!function(e){function t(t){for(var a,o,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);p.length;)p.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,s=1;s<r.length;s++){var l=r[s];0!==i[l]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},i={0:0},n=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=this.webpackJsonp=this.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;n.push([1171,1]),r()}([,,,,function(e,t,r){"use strict";var a=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlListUrls=t.isRedirectUrl=t.ensureUrlScheme=t.ensurePdfUrl=t.checkAndRecordPdfRestrictions=t.hasBlockingSignatures=t.isRestrictedFinalUrl=t.isRestrictedStatusCode=t.findContentMatchingSignature=t.cleanAndEnrichPub=t.makeUrlsUnique=t.ensureAbsoluteUrl=t.deproxifyUrls=t.isProxied=t.regExes=t.getRegExp=t.errFactory=t.ok=t.CrawlerException=void 0;var i=r(5),n=a(r(114)),o=r(26);class s extends Error{constructor(e){super(e),this.name=this.constructor.name}}t.CrawlerException=s;const{ok:l}=n;t.ok=l;t.errFactory=e=>(t,r)=>{const a=r?`${t}: ${r}`:t;return e.log(a,"error"),n.err({type:t,message:r})};t.getRegExp=e=>{const t=e.replace(/&quot;/g,'"').replace(/&amp;/g,"&");return new RegExp(t,"i")};const c={hasPdfSignature:e=>/^\s*%PDF/.test(e),looksLikeHtmlContent:e=>/<(html|meta|title|head|body|div|span|frame|iframe|script|link)/.test(e.substr(0,1e3)),looksLikePdfUrl:e=>/\.pdf([#?].*)?$/i.test(e)};t.regExes=c;const u=e=>e.proxy.length>3;t.isProxied=u;const d=e=>e.map(e=>{const t=(0,o.deproxify)(e);return u(t)?t.cleanUrl:e});t.deproxifyUrls=d;t.ensureAbsoluteUrl=(e,t,r)=>{const a=e.replace(/\s/g,"").replace(/&amp;/g,"&"),i="www."===a.slice(0,4).toLowerCase()?"http://"+a:a;try{return new URL(i,t).toString()}catch(t){return r&&r.log("Encountered invalid URL: "+e,"error"),i}};const p=e=>{const t=e.reduce((e,t)=>({...e,[t.toLowerCase()]:!0}),{});return Object.keys(t).filter(e=>!e.startsWith("http:")||!t[e.replace("http","https")])};t.makeUrlsUnique=p;t.cleanAndEnrichPub=(e,t,r,a)=>{const n=(0,i.getGlobal)("ppLibrary"),o=e.url||[],s=Array.isArray(o)?o:[o],l={...e,source:e.source||{},url:d(s)},c=p(t);return n.library.Publication.addCrawlUrls(l,c),l.source.crawler_urls=c,l.source.crawler_driver=r,l.source.crawler_target=a,n.library.Publication.autoClean(l),l};const m=(e,t)=>{var r;return(null===(r=t.find(t=>t.test(e)))||void 0===r?void 0:r.source)||null};t.findContentMatchingSignature=m;const h=e=>[401,403].includes(e);t.isRestrictedStatusCode=h;const g=(e,t)=>{for(const r of t.accessRestrictedUrl)if(r.test(e))return!0;return!1};t.isRestrictedFinalUrl=g;const f=(e,t,r)=>{let{messageReporter:a,encounteredErrors:i}=r;const n=m(e,t);return null!==n&&(a.log("Found blocking signature: "+n,"error"),i.add("BLOCKED"),!0)};t.hasBlockingSignatures=f;const b=(e,t,r,a,i)=>{let{encounteredErrors:n,messageReporter:o}=i;const s=m(e,t.loginRequired);if(null!==s)return o.log("Found login required signature: "+s,"error"),void n.add("LOGIN_REQUIRED");const l=m(e,t.accessRestricted);return null!==l?(o.log("Found access restricted signature: "+l,"error"),void n.add("ACCESS_RESTRICTED")):g(a,t)?(o.log("Found access restricted URL signature for: "+a,"error"),void n.add("ACCESS_RESTRICTED")):void(h(r)&&(o.log("Access restricted by HTTP status code: "+r,"error"),n.add("ACCESS_RESTRICTED")))};t.checkAndRecordPdfRestrictions=b;t.ensurePdfUrl=async(e,t,r,a)=>{const{err:i,fetchClient:n,messageReporter:o}=t;if(o.log(`Checking PDF: ${e}${null!=r&&r.referrer?", using referrer: "+r.referrer:""}`,"info"),f(e,(null==a?void 0:a.urlBlocked)||[],t))return t.encounteredErrors.add("BLOCKED"),i("FETCH_FAILED","PDF URL blocked");const s=await n.fetch(e,r,{checkPdfSignature:!0,allowedMimeTypes:(null==a?void 0:a.allowedMimeTypes)||[]});if(!s.isOk())return s;const{bodyText:u,bodyBlob:d,response:p}=s.value;return f(p.url,(null==a?void 0:a.urlBlocked)||[],t)?(t.encounteredErrors.add("BLOCKED"),i("FETCH_FAILED","PDF URL blocked")):f(u,(null==a?void 0:a.bodyBlocked)||[],t)?(t.encounteredErrors.add("BLOCKED"),i("FETCH_FAILED","PDF body blocked")):c.hasPdfSignature(u)?l({url:p.url,pdfBlob:d,contentDisposition:p.contentDisposition}):(a&&b(u,a,p.status,p.url,t),i("FETCH_FAILED","The URL does not point to a valid PDF file"))};t.ensureUrlScheme=e=>/^(https?|ftp|file):\/\//i.test(e)?e:"http://"+e.replace(/^[/:]+/,"");const y=["bit\\.ly/","doi\\.wiley\\.com\\/","doi\\.acm\\.org\\/","doi\\.org\\/[a-z:]*10\\.","dx\\.plos\\.org\\/","entrez\\/eutils\\/elink\\.fcgi","f1000r\\.es\\/","feeds\\.plos\\.org\\/~r","feeds\\.nature\\.com\\/~r","ff\\.im\\/","fulltext\\.do","goo\\.gl\\/","google\\.com\\/url\\?","is\\.gd\\/","agu\\.org\\/pubs\\/crossref","japanlinkcenter\\.org","worldscinet\\.com","joi\\.jlc\\.jst\\.go\\.jp\\/jst\\.jstage\\/expanim\\/","joi\\.jlc\\.jst\\.go\\.jp\\/dn","https?:\\/\\/linkinghub\\.elsevier\\.com","nature\\.com\\/doifinder\\/","nyti\\.ms\\/","ow\\.ly\\/","shar\\.es\\/","t\\.co\\/","tinyurl\\.com\\/","openurl\\.ingenta\\.com\\/","\\/xflink\\?","\\/cgi\\/doi\\/","\\/cgi\\/pmidlookup\\?","\\/lookup\\/","\\/resolve\\/","readcube\\.com\\/articles\\/","nature\\.com\\/(embo|msb)","ovidsp\\.tx\\.ovid\\.com.+pdflink=","emeraldinsight\\.com.*(articleid|contentid|chapterid)=","landesbioscience\\.com","hdl\\.handle\\.net\\/","springerlink\\.metapress\\.com\\/","mendeley.com\\/files\\/.*","opticsinfobase\\.org","icevirtuallibrary\\.com\\/content\\/","envplan\\.com","perceptionweb\\.com","hthpweb\\.com","summon\\.serialssolutions\\.com\\/2\\.0\\.0\\/link","maneyonline\\.com","palgrave-journals\\.com\\/","link\\.aps\\.org\\/","ascopubs\\.org\\/content","medphys\\.org","asadl\\.org","avspublications\\.org","aip\\.org","doi\\.emh\\.ch","palgraveconnect\\.com","oxfordjournals\\.org","sfx\\.\\S+\\.\\S+\\?","sfxit\\.\\S+\\.\\S+\\?","sfxhosted\\.\\S+\\.\\S+\\?","exlibrisgroup\\.com\\S+openurl","exlibrisgroup\\.com\\S+uresolver","search\\.serialssolutions\\.com","on\\.worldcat\\.org","linker2\\.worldcat\\.org","ebscohost\\.com\\/plink","heinonline\\.org\\/hol.*men_hide","ui\\.adsabs\\.harvard\\.edu\\/#abs\\/arxiv:","patents\\.google\\.com\\/scholar","emeraldinsight\\.com","plosgenetics\\.org","plosone\\.org"],v={META:y,PDF:[...y,"pubmed\\.ncbi\\.nlm\\.nih\\.gov","ncbi\\.nlm\\.nih\\.gov\\/pubmed","ncbi\\.nlm\\.nih\\.gov\\/labs\\/pubmed","insights\\.ovid\\.com"]};t.isRedirectUrl=(e,t)=>{if((0,o.isLoginUrl)(e))return!0;const r=e.toLowerCase();return v[t].some(e=>r.match(e))};t.getUrlListUrls=e=>{const t=[];let r;do{r=e.next(),r&&t.push(r)}while(r);return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExtensionChrome=t.getGlobal=t.isInitialized=t.initialize=void 0;var a=r(4);let i=null;t.initialize=e=>{["jQuery","ppLibrary"].forEach(t=>{if(void 0===e[t])throw new Error(`Global config key ${t} not provided`)}),i=e,globalThis.$=e.jQuery};t.isInitialized=()=>null!==i;t.getGlobal=e=>{if(null===i)throw new a.CrawlerException("Global config not initialized");return i[e]};t.getExtensionChrome=()=>void 0===globalThis.chrome||void 0===globalThis.chrome.webRequest&&void 0===globalThis.chrome.declarativeNetRequest?null:globalThis.chrome},,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchPdf=t.ATTACHMENT_FILESIZE_LIMIT=t.commonMimeTypes=t.extractFilenameFromURL=t.extractFilenameFromContentDisposition=t.normalizedGoogleScholarUrl=t.disableCSSOMInjection=t.comparePubCollections=t.delay=t.capitalizeFirstLetter=t.uniqueArray=t.isOneClickEnabled=t.isAdhocSharingPage=t.isOldWebappTab=t.isNewWebAppTab=t.getURL=t.hasSomeParentTheClass=t.normalizeBoolean=t.getIdListFromUrl=t.getIdsFromUrl=t.extractAuthors=t.extractDoi=t.hasClass=t.attachObserver=t.waitForElement=t.concatNodes=t.debounce=t.getBaseUrl=t.processPdfError=t.isPdf=t.isCiteSupported=t.extractFromPDFViewerExtensionUrl=t.isPDFViewerExtensionUrl=t.isFileUrl=t.isNewTabUrl=t.isBlockedUrl=t.isChromeOS=t.isWindows=t.isMac=t.isLinux=t.getOS=t.stripHTMLTags=t.checkIDList=t.getRandomId=void 0;var a=r(35),i=r(20);const n=()=>{const e=(Math.random()+1).toString(36).toUpperCase().substring(2,9);return 7===e.length?e:n()};t.getRandomId=n;t.checkIDList=e=>{e.id_list||(e.id_list=[]),e.id_list=e.id_list.map(e=>e.startsWith("url:")?"url:"+(0,a.shortenURL)(e.replace(/^url:/,"")):e)};t.stripHTMLTags=e=>{const t=e,r=(e,t)=>{const r=["span","b","div","em","strong","u","a","br","p","h1","h2","h3"];t&&(r.push("i"),r.push("sup"),r.push("sub"));const a=new RegExp(`</?(${r.join("|")})[^>]*>`,"gi");return e.replace(a,"")};return t.title&&"string"==typeof t.title&&(t.title=r(t.title,!1)),t.booktitle&&"string"==typeof t.booktitle&&(t.booktitle=r(t.booktitle,!0)),t.journal&&"string"==typeof t.journal&&(t.journal=r(t.journal,!0)),t.journalfull&&"string"==typeof t.journalfull&&(t.journalfull=r(t.journalfull,!0)),t};const o=()=>{let e="Unknown OS";return-1!==navigator.appVersion.indexOf("Win")&&(e="Windows"),-1!==navigator.appVersion.indexOf("Mac")&&(e="MacOS"),-1!==navigator.appVersion.indexOf("CrOS")?e="ChromeOS":-1!==navigator.appVersion.indexOf("X11")&&(e="UNIX"),-1!==navigator.appVersion.indexOf("Linux")&&(e="Linux"),-1!==navigator.appVersion.indexOf("Android")&&(e="Android"),e};t.getOS=o;t.isLinux=()=>"Linux"===o();t.isMac=()=>"MacOS"===o();t.isWindows=()=>"Windows"===o();t.isChromeOS=()=>"ChromeOS"===o();t.isBlockedUrl=e=>[/^about:/,/^chrome-extension:\/\//,/^chrome:\/\//,/^https:\/\/chrome\.google\.com\/webstore/,/^https:\/\/chromewebstore\.google\.com/,/^edge:\/\//,/^extension:\/\//,/^https:\/\/microsoftedge\.microsoft\.com/,/^vivaldi:\/\//,/^brave:\/\//,/^https:\/\/.*\.mozilla\.(org|net)/,/^https:\/\/.*\.firefox\.com/,/^moz-extension/,/^view-source/,/^data/].some(t=>t.test(e));t.isNewTabUrl=e=>/^(about:blank|about:newtab|chrome.+newtab|edge.+newtab|vivaldi.+newtab|brave.+newtab)/.test(e);t.isFileUrl=e=>/^file:\/\/.+\.pdf$/.test(e);t.isPDFViewerExtensionUrl=e=>/^(extension|chrome-extension):\/\/.+\/.+pdfurl=.+/.test(e)||/^(extension|chrome-extension):\/\/.+\/file:\/.+/.test(e)||/^(extension|chrome-extension):\/\/.*\/https?:\/\/.*/.test(e)||/^(extension|chrome-extension):\/\/.*\/enhanced-reader.html.*pdf=/.test(e);t.extractFromPDFViewerExtensionUrl=e=>{let t="";const r=e.match(/(https?:\/\/.+|https?%3A%2F%2F.+|file:\/\/|file%3A%2F%2F.+)/);return r&&r[1]&&([,t]=r),/(%3A|%2F)/i.test(t)&&(t=decodeURIComponent(t.replace(/&.*/,""))),t};t.isCiteSupported=e=>e&&(/docs.google.com\/(a\/.*?\/)?document\/d\/.*\/edit/i.test(e)||/docs.google.com\/document\/edit\?id=.*/i.test(e))?"Google":null;t.isPdf=()=>{var e,t,r;let a,i,n=!1;const o=self.location.href,s=null===(e=chrome)||void 0===e||null===(t=e.dom)||void 0===t||null===(r=t.openOrClosedShadowRoot(document.body))||void 0===r?void 0:r.querySelector("iframe");if(s&&"application/pdf"===s.getAttribute("type")&&s.getAttribute("internalid"))return{detectedUrl:o,result:!0,isPdfOopifFlag:!0};document.querySelectorAll("iframe").forEach(e=>{e.src&&/chrome-extension:\/.*\/reader\.html/.test(e.src)&&(a=o,n=!0);try{var t,r,s,l;i=null===(t=e.contentWindow)||void 0===t||null===(r=t.document)||void 0===r||null===(s=r.body)||void 0===s?void 0:s.querySelectorAll("embed"),null!==(l=e.src)&&void 0!==l&&l.match(/.pdf/)&&(a=e.src)}catch(e){}}),/\/epdf\/10\.\d+/i.test(o)&&document.querySelectorAll("script").forEach(e=>{var t;if(null!==(t=e.textContent)&&void 0!==t&&t.match(/readerConfig\s*=\s*/)){const t=e.textContent.match(/(.*"name"\s*:\s*"PDF"[^{}]+"url"\s*:\s*")([^"]+)(".+)/);if(t&&t[1]){n=!0;let e=t[2].replace(/\\u003d/g,"=");e=e.replace(/%2B/g,"+").replace(/%2F/g,"/").replace(/%3D/g,"="),a=`${self.location.origin}${e}`}}});const l=c([document.querySelectorAll("embed"),i||[]]),u=["application/x-google-chrome-pdf","application/pdf"];for(const e of Array.from(l)){const t=e.getAttribute("id"),r=e.getAttribute("name"),a=e.getAttribute("type"),i=e.getAttribute("internalid"),o=e.getAttribute("width"),s=e.getAttribute("height");(a&&u.indexOf(a)>-1&&t&&"plugin"===t||i&&r&&o&&s)&&(n=!0)}return{result:n,detectedUrl:a}};t.processPdfError=async e=>{let{pub:t,res:r,Remote:a}=e;const i=r.error||r.errorMsg,n=[];i&&n.push(i),r.errorMsg&&n.push(r.errorMsg);const o={};let s;n.forEach(e=>{const t=e.replace(/terminated$/i,"");t.match(/restricted.*loggedout\s+from\s+proxy/i)?o.proxyrestricted=[t,e]:t.match(/loggedout\s+from\s+proxy/i)?o.proxyloggedout=[t,e]:t.match(/restricted/i)?o.restricted=[t,e]:t.match(/login\s+required/i)?o.loginrequired=[t,e]:t.match(/canceled/i)?o.ready=[t,e]:o.error=[t,e]});let l="ready";const c=["proxyrestricted","restricted","loginrequired","ready","error"];for(let e=0;e<c.length;e+=1)if(c[e]&&c[e]in o){const t=o[c[e]];t&&t[0]&&([s]=t),l=c[e];break}if("proxyloggedout"in o&&(l="proxyloggedout"),"restricted"===l&&"proxyloggedout"in o&&(l="proxyrestricted"),"error"===l){let e=!1;const r=await a.bg.execute("utils.getLinksForPDFCrawler",null,{pub:t});r&&r.result&&r.result.length&&(e=!0),e||(s="NO_PUBLISHERS_LINK")}return await a.bg.execute("data-layer.updatePublication",null,{id:r.job.data.pub._id,data:{pdf_restricted:1,source:{pdf_crawl_status:l,pdf_crawl_error:s}}}),{finalError:s,status:l}};const s=e=>{const t=e.split("/");return`${t[0]}//${t[2]}`};t.getBaseUrl=s;const l=(e,t)=>{const r=e;self.clearTimeout(self.debouncedPubLoading),self.debouncedPubLoading=self.setTimeout(()=>{r()},t)};t.debounce=l;const c=e=>{let t=[];return e.forEach(e=>{t=Array.prototype.slice.call(t).concat(Array.prototype.slice.call(e))}),t};t.concatNodes=c;const u=(e,t,r)=>new Promise(a=>{"test"===i.PP_ENV&&a(!0);let n=0;const o=setInterval(()=>{if((null==r||!r.infinite)&&n>((null==r?void 0:r.maxChecks)||20))return clearInterval(o),void a(!1);n+=1;(t||document).querySelectorAll(e)[0]&&(clearInterval(o),a(!0))},100)});t.waitForElement=u;t.attachObserver=e=>{let{observerConfig:t,callback:r}=e;const a=new MutationObserver(e=>l(()=>(e=>{if(!e)return;if(null==e?void 0:e.find(e=>{let{target:t}=e;return"react-webimport-wrapper"===t.className}))return;const a=(null==e?void 0:e.find(e=>{var t;return null===(t=e.addedNodes)||void 0===t?void 0:t.length}))||(null==i?void 0:i.attributes)&&(null==e?void 0:e.find(e=>"attributes"===e.type))||(null==i?void 0:i.characterData)&&(null==e?void 0:e.find(e=>"characterData"===e.type));if(a&&t.globalCallback){const e=a.addedNodes[0];if(a&&t.addedElementClass&&(null==e||!e.classList.contains(t.addedElementClass)))return;t.globalCallback(a)}else e.forEach(async e=>{if(e.addedNodes&&e.addedNodes.length>0){[].some.call(e.addedNodes,async e=>{const a=t.addedElementClass&&e.classList&&e.classList.contains(t.addedElementClass);if(a||!t.addedElementClass){if(t.addedElementIsTarget)return await r(e),!0;if(t.targetSelector){t.waitForTargetElement&&await u(t.targetSelector,e);const a=e.querySelectorAll(t.targetSelector);if(a)for(const e of a)await r(e)}}return a})}})})(e),void 0!==t.debounceTime?t.debounceTime:500)),i={attributes:!0,childList:!0,characterData:!0,...t.config||{}},n=document&&document.querySelectorAll(t.listenSelector);if(n)for(const e of n)a.observe(e,i)};t.hasClass=(e,t)=>` ${e.className} `.indexOf(` ${t} `)>-1;t.extractDoi=e=>{var t,r,a;return null!==(t=null===(r=e.match(/(10\.\d\d\d\d\S+)/))||void 0===r||null===(a=r[0])||void 0===a?void 0:a.replace(/\/$/,""))&&void 0!==t?t:null};t.extractAuthors=e=>{let t=[];const r=e.split(", ");for(let e=0;e<r.length;e+=1){const a=r[e].split(/\s+/),i=e===r.length-1;if("\u2026"===a[0]){if(i){const e={collective:""};e.collective="others",t||(t=[]),t.push(e)}}else if(a[a.length-1]&&/\u2026/.test(a[a.length-1])){const e={first:"",last:""};e.first=a.shift(),e.last=a.join(" "),e.last=e.last.replace(/\u2026/,""),t||(t=[]),t.push(e),i&&(t||(t=[]),t.push({collective:"others"}))}else{const e={first:"",last:""};e.first=a.shift(),e.last=a.join(" "),t||(t=[]),t.push(e)}}return t};const d=e=>{const t={};if(!e)return t;const r=e.replace(/^https?:\/\//,"").replace(/\/$/,"").replace(/\?.+$/,"");if(/.+gov\/pmc\/articles\/PMC\d+$/.test(r)){const e=r.replace(/(.+\/)(PMC\d+)/,"$2");t.pmc=e}if(/pubmed\.ncbi\.nlm\.nih\.gov\/\d+$/.test(r)){const e=r.replace(/(.+gov\/)(\d+)/,"$2");t.pmid=e}if(/ncbi\.nlm\.nih\.gov\/pubmed\/\d+$/.test(r)){const e=r.replace(/(.+gov\/pubmed\/)(\d+)/,"$2");t.pmid=e}if(/europepmc.org\/article\/med\/\d+$/.test(r)){const e=r.replace(/(.+\/med\/)(\d+)/,"$2");t.pmid=e}if(/.+10\.\d{4,5}\/[-._;()/:A-Z\d]+$/i.test(r)){let e=r.replace(/(.+)(10\.\d{4,5}\/.+)/,"$2").toLowerCase();const a=/[./](abstract|abs|pdf|php|event_abstract|front-matter|full|fulltext|summary|short|html|htm|xml)$/i;e=e.replace(a,"").replace(a,""),e=e.replace(/[./]$/,"").trim(),t.doi=e}if(/arxiv\.org\/.+\/\d.+/.test(r)){const e=r.replace(/(.+\.org\/.+\/)(.+)/,"$2").replace(/\.pdf$/,"");t.arxivid=e}return t};t.getIdsFromUrl=d;t.getIdListFromUrl=e=>{const t=[];if(!e)return t;const r=e.replace(/^https?:\/\//,"").replace(/\/$/,"");t.push("url:https://"+r),t.push("url:http://"+r),t.push(`url:https://${r}/`),t.push(`url:http://${r}/`);const a=d(r);a.pmc&&t.push("pmc:"+a.pmc),a.pmid&&t.push("pmid:"+a.pmid),a.doi&&(t.push("doi:"+a.doi),t.push("url:https://doi.org/"+a.doi)),a.arxivid&&t.push("arxivid:"+a.arxivid);const i=r.split("?")[0];return i&&!t.includes(i)&&(t.push("url:https://"+i),t.push("url:http://"+i)),t};t.normalizeBoolean=e=>!(!e||"0"===e||""===e);const p=(e,t)=>!!(e.className&&e.className.split(" ").indexOf(t)>=0)||!(!e.parentNode||!p(e.parentNode,t));t.hasSomeParentTheClass=p;t.getURL=(e,t)=>{let r="";if(t){const a=s(e);r=t.match(/^http/)?t:`${a}${t}`}return r};t.isNewWebAppTab=e=>!!e&&e.indexOf(i.NEW_WEBAPP_URL)>-1;t.isOldWebappTab=e=>!!e&&e.indexOf(i.PLACK_URL+"/app")>-1;t.isAdhocSharingPage=e=>!!e&&e.indexOf(i.PP_SHARING_PAGE)>-1;t.isOneClickEnabled=e=>{const t=JSON.parse((null==e?void 0:e.ui_settings)||"{}").extension;return!(!t||void 0===t.oneClickImport)&&t.oneClickImport};t.uniqueArray=(e,t)=>e.filter((e,r,a)=>r===a.findIndex(r=>r[t||"_id"]===e[t||"_id"]));t.capitalizeFirstLetter=e=>(e.charAt(0).toUpperCase()+e.slice(1)).replace("_"," ");t.delay=e=>new Promise(t=>setTimeout(t,e));t.comparePubCollections=(e,t)=>{var r,a;const i=(t||[]).filter(e=>"folder"===e.collectionType).map(e=>e._id||""),n=(t||[]).filter(e=>"label"===e.collectionType).map(e=>e._id||"");return{foldersToPush:i.filter(t=>{var r;return!(null!=e&&null!==(r=e.folders)&&void 0!==r&&r.includes(t))}),labelsToPush:n.filter(t=>{var r;return!(null!=e&&null!==(r=e.labels)&&void 0!==r&&r.includes(t))}),foldersToPull:(null==e||null===(r=e.folders)||void 0===r?void 0:r.filter(e=>!i.includes(e)))||[],labelsToPull:(null==e||null===(a=e.labels)||void 0===a?void 0:a.filter(e=>!n.includes(e)))||[]}};t.disableCSSOMInjection=()=>!0;t.normalizedGoogleScholarUrl=e=>{const t=e||"",[,r]=t.match(/citation_for_view=(.{12}:.{12})/)||[];return r?["https://scholar.google.com/citations?view_op=view_citation&hl=en&citation_for_view="+r,r]:["",""]};t.extractFilenameFromContentDisposition=e=>{let t="";if(!e)return t;let r=e.match(/filename\*?\s*=(?:UTF-8'')?\s*"([^"]+)"/i);return r&&r[1]&&r[1].length>3?t=r[1].trim():(r=e.match(/filename\*?\s*=(?:UTF-8'')?\s*(.+\.[a-z\d]{3,4})/i),r&&r[1]&&r[1].length>3&&(t=r[1].trim())),decodeURIComponent(t).replace(/[\\/?%*:|"'<>]/g,"")};t.extractFilenameFromURL=(e,t)=>{const r=decodeURIComponent(e);let a="[article_pdf].pdf";t&&t.toLocaleLowerCase()in m&&(a="untitled."+m[t.toLocaleLowerCase()]);const i=r.substring(r.lastIndexOf("/")+1).replace(/\?.*/,"");return/.\..{3,4}$/.test(i)&&!/\.php/.test(i)&&(a=i),a};const m={"text/plain":"txt","text/html":"html","application/vnd.ms-powerpoint":"ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","application/msword":"doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/vnd.ms-excel":"xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","image/x-citrix-jpeg":"jpeg","image/gif":"gif","image/x-png":"png","audio/mpeg":"mp3","video/mp4":"mp4","audio/x-wav":"wav","video/x-msvideo":"avi","application/zip":"zip","text/csv":"csv"};t.commonMimeTypes=m;t.ATTACHMENT_FILESIZE_LIMIT=104857600;t.fetchPdf=async e=>{let{pdfUrl:t,errorCallback:r}=e;try{const e=await fetch(t),a=await e.blob();if(null==a||!a.type||!a.type.match(/pdf/)||a.size>104857600)return null==r||r({reason:a.size>104857600?"size":""}),null;return{blob:a,contentDisposition:e.headers.get("content-disposition")}}catch(e){null==r||r({reason:""}),console.error(e)}return null}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"hexToRgba",{enumerable:!0,get:function(){return i.hexToRgba}}),Object.defineProperty(t,"uiConstants",{enumerable:!0,get:function(){return n.default}}),t.getOppositeThemeName=t.projectOnly=t.themeMapper=void 0;var i=r(98),n=a(r(166));t.themeMapper=e=>t=>{const r=e[t.theme.themeName];return void 0===r&&console.error(`pp-ui themeMapper: value for theme "${t.theme.themeName}" not found`,e),"function"==typeof r?r(t):r};t.projectOnly=(e,t)=>r=>r.theme.themeName.startsWith(e)?t:null;t.getOppositeThemeName=e=>{const t=e.endsWith("light")?e.replace("light","dark"):e.replace("dark","light");if(!i.themeNames.includes(t))throw new Error("Cannot find opposite theme name of "+e);return t}},,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(5),n=a(r(101));var o=(e,t)=>{const r=(0,i.getGlobal)("jQuery");return(0,n.default)(e,r,t)};t.default=o},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onlyForStorybook=t.onlyForScssVariables=t.textThemeFixed=t.default=void 0;var a=r(6);const i={default:["small","medium","large","x-large"],fixed:["small","medium"]},n={default:["regular","medium","semi-bold","bold"],fixed:["regular","bold"]},o={default:{small:12,medium:14,large:16,"x-large":18},fixed:{small:12,medium:14}},s={default:{small:16,medium:18,large:20,"x-large":22},fixed:{small:18,medium:16}},l={default:{regular:"400",medium:"500","semi-bold":"600",bold:"700"},fixed:{regular:"400",bold:"700"}},c=(e,t)=>a.css`
    font-size: ${o.default[t]}px;
    line-height: ${s.default[t]}px;
    font-weight: ${l.default[e]};
  `,u=(e,t)=>a.css`
    font-family: Courier, monospace;
    font-size: ${o.fixed[t]}px;
    line-height: ${s.fixed[t]}px;
    font-weight: ${l.fixed[e]};
  `,d=e=>i.default.reduce((t,r)=>({...t,[r]:c(e,r)}),{}),p=e=>i.fixed.reduce((t,r)=>({...t,[r]:u(e,r)}),{}),m={default:n.default.reduce((e,t)=>({...e,[t]:d(t)}),{}),fixed:n.fixed.reduce((e,t)=>({...e,[t]:p(t)}),{})};var h=m.default;t.default=h;const g=m.fixed;t.textThemeFixed=g;const f={fontSizes:o,fontWeights:l,lineHeights:s};t.onlyForScssVariables=f;const b={fontSizes:o,fontWeights:l,textSizes:i,textWeights:n};t.onlyForStorybook=b},,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=t.reapplyFormatting=t.getTags=t.getTextDecorationMap=t.interconvertString=t.convertBracesMarkup=t.validateBrackets=t.getLatexMathMap=t.stripHtml=t.stripBracesMarkup=void 0;var a=r(180);const i={A:"\u0391",B:"\u0392","\\Gamma":"\u0393","\\Delta":"\u0394",E:"\u0395",Z:"\u0396",H:"\u0397","\\Theta":"\u0398",I:"\u0399",K:"\u039a","\\Lambda":"\u039b",M:"\u039c",N:"\u039d","\\Xi":"\u039e",O:"\u039f","\\Pi":"\u03a0",P:"\u03a1","\\Sigma":"\u03a3",T:"\u03a4","\\Upsilon":"\u03a5","\\Phi":"\u03a6",X:"\u03a7","\\Psi":"\u03a8","\\Omega":"\u03a9","\\alpha":"\u03b1","\\beta":"\u03b2","\\gamma":"\u03b3","\\delta":"\u03b4","\\varepsilon":"\u03b5","\\epsilon":"\u03b5","\\zeta":"\u03b6","\\eta":"\u03b7","\\theta":"\u03b8","\\vartheta":"\u03b8","\\iota":"\u03b9","\\kappa":"\u03ba","\\lambda":"\u03bb","\\mu":"\u03bc","\\nu":"\u03bd","\\xi":"\u03be",o:"\u03bf","\\pi":"\u03c0","\\varpi":"\u03d6","\\rho":"\u03c1","\\varrho":"\u03f1","\\sigma":"\u03c3","\\varsigma":"\u03c2","\\tau":"\u03c4","\\upsilon":"\u03c5","\\phi":"\u03c6","\\varphi":"\u03c6","\\chi":"\u03c7","\\psi":"\u03c8","\\omega":"\u03c9","\\leq":"\u2264","\\geq":"\u2265","\\in":"\u2208","\\infty":"\u221e","\\int":"\u222b","\\exists":"\u2203","\\forall":"\u2200","\\partial":"\u2202","\\pm":"\xb1","\\prod":"\u220f","\\neg":"\xac","\\neq":"\u2260","\\not\\in":"\u2209","\\times":"\xd7","\\subset":"\u2282","\\sum":"\u2211","\\supset":"\u2283","\\surd":"\u221a","\\approx":"\u2248","\\bot":"\u22a5","\\cap":"\u2229","\\cdot":"\u22c5","\\cup":"\u222a","\\div":"\xf7","\\emptyset":"\u2205","\\equiv":"\u2261","\\to":"\u2192","\\vee":"\u2228","\\wedge":"\u2227","\\Leftrightarrow":"\u21d4","\\Rightarrow":"\u21d2","\\rightarrow":"\u2192"},n=e=>{const t=e.split("");for(let e=0;e<t.length;e+=1)"{"!==t[e]&&"}"!==t[e]||(e>0&&"\\"===t[e-1]?t[e-1]="":t[e]="");return t.join("")};t.stripBracesMarkup=n;t.stripHtml=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e)return"";const r={replacement:"",exclude:[],...t};let a=[e];if(r.exclude.length>0){a=[];for(let e=0;e<r.exclude.length;e+=1)a.push(`<${r.exclude[e]}[^>]*>`),a.push(`<\\/${r.exclude[e]}[^>]*>`);const t=`(${a.join("|")})`;a=e.split(new RegExp(t,""))}for(let e=0;e<a.length;e+=2)a[e]=a[e].replace(/<(?:.|\n)*?>/gm,r.replacement);return a.join("")};const o=e=>{const t=e.split(""),r=[],a=[];let i=0;for(let e=0;e<t.length;e+=1){a[e]=!1;let n=!1;"$"===t[e]&&(n=!0,e>0&&"\\"===t[e-1]&&(n=!1)),n?(i+=1,r[e]=i):r[e]=0}for(let e=r.length-1;e>=0;e-=1)if(r[e]>0&&r[e]%2==0){a[e]=!0;for(let t=e-1;t>=0;t-=1)if(a[t]=!0,r[t]===r[e]-1){e=t;break}}return a};t.getLatexMathMap=o;const s=(e,t)=>{const r=[];for(let t=0;t<e.length;t+=1)"$"===e[t]&&(0===t||t>0&&"\\"!==e[t-1])&&r.push(t);if(0===r.length||r.length%2==1)return e;const a=[];a.push({latex:!1,str:e.substring(0,r[0])});for(let t=0;t<r.length;t+=2)a.push({latex:!0,str:e.substring(r[t],r[t+1]+1)}),a.push({latex:!1,str:e.substring(r[t+1]+1,r[t+2])});for(const e of a)if(e.latex){const r=e.str.replace(/^\$/,"").replace(/\$$/,""),a=r.match(/^_(.)$/),n=r.match(/^_\{([^}{]+)\}$/),o=r.match(/^\^(.)$/),s=r.match(/^\^\{([^}{]+)\}$/),l=r.match(/^(\\[a-z]+)$/),c=r.match(/^([a-z-]+)$/i);a&&t.sub?e.str=`<sub>${a[1]}</sub>`:n&&t.sub?e.str=`<sub>${n[1]}</sub>`:o&&t.sup?e.str=`<sup>${o[1]}</sup>`:s&&t.sup?e.str=`<sup>${s[1]}</sup>`:l&&l[1]in i&&t.commands?e.str=i[l[1]]:c&&t.plain&&([,e.str]=c)}let n="";for(const e of a)n+=e.str;return n};t.validateBrackets=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"{}";const r=[];for(const a of e){const e=t.indexOf(a);if(-1!==e)if(e%2==0)r.push(e+1);else if(r.pop()!==e)return!1}return 0===r.length};const l=e=>{const t=[],r=[],a=[],i=[],n=new RegExp(/(\\{|\\})/,"gi");for(const t of e.matchAll(n))if(void 0!==t.index)for(let{index:e}=t;e<t.index+t[0].length;e+=1)i.push(e);for(const[n,o]of Object.entries(e)){const e="{}".indexOf(o);-1===e||i.includes(parseInt(n,10))||(e%2==0?(r.push(n),t.push(e+1)):a.push(n))}let o="";for(const[t,i]of Object.entries(e.split("")))if(r.includes(t))o+="<mark>";else if(a.includes(t))o+="</mark>";else if("\\"===i){const r=e[parseInt(t.toString(),10)+1];"{"!==r&&"}"!==r&&(o=`${o}${i}`)}else o=`${o}${i}`;return o};t.convertBracesMarkup=l;const c=(e,t)=>{const r={format:"plain",...t||{}};let a="string"==typeof e?e:"";if("nopreservecase"===r.format){const e=o(a),t=(e=>{const t=[];for(let r=0;r<e.length;r+=1)t[r]=!1;const r=e.split(new RegExp("(\\\\[a-z]{3,}{.*})","i"));let a=0;for(let e=0;e<r.length;e+=1){if(r[e].match(/^\\[a-z]+\{.*\}$/i)){const i=r[e].split("");for(let e=0;e<i.length;e+=1)"{"!==i[e]&&"}"!==i[e]||(t[a+e]=!0)}a+=r[e].length}return t})(a),r=a.split("");for(let a=0;a<r.length;a+=1)"{"!==r[a]&&"}"!==r[a]||!1===e[a]&&!1===t[a]&&(r[a]="\\"+r[a]);a=r.join("").replace(/<(mark)>/g,"{").replace(/<\/(mark)>/g,"}")}else if("nomarkup"===r.format)a=n(a),a=a.replace(/\\(textit|textbf|emph)/g,""),a=a.replace(/<(i|b|sub|sup)>/g,""),a=a.replace(/<\/(i|b|sub|sup)>/g,"");else if("html"===r.format||"html-extended"===r.format){if(a.includes("\\textit{")||a.includes("\\textbf{")||a.includes("\\emph{")){const e=new RegExp("(.*)(\\\\(?:textit|textbf|emph)\\{)(.*)","g");let t=e.exec(a),r=0;for(;null!==t&&(r+=1,!(r>100));){if(t[3]){const r=t[2].match(/(textit|emph)/)?"i":"b",i=t[3].split("");let n=1,o=0,s=0;for(let e=0;e<i.length;e+=1)if("{"===i[e]&&(n+=1),"}"===i[e]&&(o+=1,o===n)){i[e]=`</${r}>`,t[2]=`<${r}>`,s=1;break}0===s&&(t[2]=""),t[3]=i.join(""),a=t[1]+t[2]+t[3],e.lastIndex=0}t=e.exec(a)}}a="html"===r.format?s(a,{sub:!0,sup:!0,commands:!0,plain:!0}):s(a,{sub:!0,sup:!0,commands:!1,plain:!1}),a="html"===r.format?n(a):l(a)}else if("bibtex"===r.format){const e=new RegExp("(.*)(<\\/?(?:i|b|sub|sup)>)(.*)","g");let t=e.exec(a),r=0;for(;null!==t&&(r+=1,!(r>100));)t[2]&&(t[2].match(/\//)?t[2].match(/(sub|sup)/)?t[2]="}$":t[2]="}":t[2].match(/<\s*b\s*>/)?t[2]="\\textbf{":t[2].match(/<\s*i\s*>/)?t[2]="\\textit{":t[2].match(/sub/)?t[2]="$_{":t[2].match(/sup/)&&(t[2]="$^{")),a=t[1]+t[2],t[3]&&(a+=t[3]),e.lastIndex=0,t=e.exec(a);a=a.replace(/&lt;/g,"<"),a=a.replace(/&gt;/g,">"),a=a.replace(/&amp;/g,"&")}return a};t.interconvertString=c;const u={b:0,i:0,sup:0,sub:0,mark:0},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;const r=[];for(const a of Object.keys(t))if(t[a]!==e[a]){const i=t[a]>e[a];"mark"===a?r.push(i?"{":"}"):r.push(i?`<${a}>`:`</${a}>`)}return r.join("")},p=e=>{const t=[],r=[],a={...u},i={b:0,i:0,sub:0,sup:0,mark:0};for(let n=0;n<e.length;n+=1)if(/^<\/?(b|i|mark|sub|sup)>$/.test(e[n])){const t=/\//.test(e[n])?-1:1;/^<\/?b>$/.test(e[n])?(i.b+=t,a.b=i.b):/^<\/?i>$/.test(e[n])?(i.i+=t,a.i=i.i):/^<\/?sup>$/.test(e[n])?(i.sup+=t,a.sup=i.sup):/^<\/?sub>$/.test(e[n])?(i.sub+=t,a.sub=i.sub):/^<\/?mark>$/.test(e[n])&&(i.mark+=t,a.mark=i.mark)}else{const i=e[n].split("");for(const e of i)r.push(e),t.push({...a})}return t[t.length-1]={...u},{chars:r,textDecorations:t}};t.getTextDecorationMap=p;const m=e=>e.split(/(<\/?(?:i|b|sub|sup|mark)>)/);t.getTags=m;t.reapplyFormatting=(e,t,r)=>{const i=r||-1,n=c(t,{format:"html-extended"}),o=m(n);if(o.length<=1)return e;const s=p(o),l=p(m(e)),h=(0,a.alignment)(l.chars.join(""),s.chars.join(""));if(h.score<i)return e;let g=-1,f=-1;for(const e of h.alignment)if(null!==e[0]&&(g+=1),null!==e[1]&&(f+=1),g>-1&&f>-1)for(const e of Object.keys(s.textDecorations[f]))0===l.textDecorations[g][e]&&(l.textDecorations[g][e]=s.textDecorations[f][e]);let b=((e,t)=>{const r=[...e];if(r.length===t.length){let e={...u};for(let a=0;a<t.length-1;a+=1){const i=d(e,t[a]);r[a]=`${i}${r[a]}`,e=t[a]}const a=d(e);r[r.length-1]=`${r[r.length-1]}${a}`}return r.join("")})(l.chars,l.textDecorations);for(let e=0;e<4;e+=1)b=b.replace(/<i>(\s*)<\/i>/g,"$1").replace(/<sub>(\s*)<\/sub>/g,"$1").replace(/<sup>(\s*)<\/sup>/g,"$1").replace(/<b>(\s*)<\/b>/g,"$1");return b};t.normalize=e=>(e||"").replace(/[\t\n\s\r]+/g," ").trim()},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPaperpileContentUrl=t.SHARING_STATUS_MAX_PROFILES=t.PP_APP_ENV=t.MIXPANEL_TOKEN=t.MIXPANEL_PROXY=t.GIT_COMMIT=t.BUILD_NUMBER=t.BUGSNAG_API_KEY=t.PP_SHARING_PAGE=t.GURU_API_URL=t.NEW_WEBAPP_URL=t.PLACK_URL=t.PAPERPILE_API_URL=t.PP_ENV=void 0;let a="http://127.0.0.1:4000",i="http://127.0.0.1:8080",n="http://127.0.0.1:6001";let o="http://127.0.0.1:4000/api/public/webview",s="59fa99ce170d752811cbdaeaec8175fc";if(!["development","test","staging","production"].includes("production"))throw new Error("PP_ENV=production, it must be set to development|test|staging|production.");t.PP_ENV="production",a="https://api.paperpile.com",i="https://paperpile.com",n="https://app.paperpile.com",s="81138760cb01e5b56e5c9d91162d40ae",o="https://paperpile.com/shared";const l=a;t.PAPERPILE_API_URL=l;const c=i;t.PLACK_URL=c;const u=n;t.NEW_WEBAPP_URL=u;t.GURU_API_URL="https://search.paperpile.com";const d=o;t.PP_SHARING_PAGE=d;const p=(e,t)=>{const r=Object({PP_ENV:"production",PP_APP_ENV:"firefox",BACKEND_URL:"https://api.paperpile.com",LIBRARY_SEARCH_URL:"https://library.paperpile.com",LIBRARY_SEARCH_SYNC_URL:"https://virginia.library.paperpile.com",BUGSNAG_API_KEY:"1d56ddd9b2081d1ae1acb38c28c2ec60",EXTENSION_BUILD_NUMBER:"70",GIT_COMMIT:"4151a9f55e9e3ca797c461b042b6431f703d5b19",MIXPANEL_PROXY:"https://e.paperpile.com"})[e];if(void 0!==r)return r;if(void 0!==t)return t;throw new Error(`getEnvVar error: ${e} not defined. Did you forget to set it in .env?`)},m=p("BUGSNAG_API_KEY");t.BUGSNAG_API_KEY=m;const h="1.5."+p("EXTENSION_BUILD_NUMBER");t.BUILD_NUMBER=h;const g=p("GIT_COMMIT");t.GIT_COMMIT=g;const f=p("MIXPANEL_PROXY","https://e.paperpile.com");t.MIXPANEL_PROXY=f;const b=s;t.MIXPANEL_TOKEN=b;const y=p("PP_APP_ENV");t.PP_APP_ENV=y;t.SHARING_STATUS_MAX_PROFILES=5;t.getPaperpileContentUrl=e=>"staging"===e?"https://stage.paperpile.com":"production"===e?"https://paperpile.com":"http://127.0.0.1:8081"},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.iconNames=void 0;var i=a(r(0)),n=a(r(162)),o=a(r(163));const s=["animated-down","animated-google-drive","angle-down","angle-left","angle-right","angle-up","app-store-ios","apple","arrow-down-bolt-custom","arrow-down-to-bracket","arrow-down","arrow-left","arrow-right","arrow-turn-down-left","arrow-up-arrow-down","arrow-up-right-from-square","arrow-up-right","arrow-up","arrows-left-right-to-line","arrows-left-right","arrows-to-line","ban","bars-filter","bars-sort-custom","bars-sort","bars","bold","bolt-lightning","bolt","book-blank","book-open-cover","book-open-line","book-open","books-copy","books","brackets-curly","broom-wide","building","bullhorn","calendar-clock","calendar","caret-down","caret-left","caret-right","caret-up","chart-simple","check-strong-custom","check","chrome","cicle-check-line","circle-check","circle-dot-custom","circle-dot-line","circle-dot","circle-exclamation","circle-info-line","circle-info","circle-line","circle-plus-line","circle-plus","circle","clipboard-line","clipboard","clock-rotate-left","clock","clone","cloud-arrow-down","cloud-arrow-up","cloud-slash","command","comment-dots-line","comment-line","comment-slash","copy","credit-card","diagram-sankey","down","draw-polygon","ellipsis-vertical","ellipsis","envelope","eraser","face-raised-eybrow","facebook-square","file-arrow-down-line","file-arrow-down","file-arrow-up-line","file-arrow-up","file-circle-plus-line","file-circle-plus","file-excel","file-image","file-invoice-line","file-invoice","file-line","file-lines-line","file-lines","file-pdf-line","file-pdf","file-powerpoint-line","file-powerpoint","file-slash","file-word-line","file-word","file-xmark-line","file-xmark","file","files-custom","files-line","files","filter-list","firefox","flask-vial","folder-gear-custom","folder-line","folder-plus","folder-user","folder-xmark","folder","folders","font-case","gear","gears","gift","github","globe-line","globe","google-color","google-drive-color","google-drive-exclamation","google-drive","google-play","google","graduation-cap","grip-dots-vertical","grip-dots","hard-drive","highlighter-line","highlighter","id-custom","image-user","image","input-lock-custom","input-text-line","input-text","intercom","italic","key","keyboard","landmark","library-custom","library-gear-custom","library-plus-custom","library-small-custom","lightbulb-line","lightbulb-on-line","lightbulb-on","lightbulb","lighthouse","link","list-ul","location-crosshairs","location-dot","location-question","lock-keyhole","magnifying-glass-minus","magnifying-glass-plus","magnifying-glass","merge","message-arrow-up-right","message-dots","message-line","message-lines","message-plus","message-question","message-slash","message","messages","microsoft-color","minus","mixpanel-custom","mobile-screen","newspaper","one-drive-color","one-drive-exclamation","one-drive","paint-roller","palette","paper-plane-top","paper-plane","paperclip-line","paperclip-vertical-line","paperclip-vertical","paperclip","paste","pdf-custom","pencil","plus-large","plus-strong-custom","plus","power-off","print","quote-left","quotes","rectangles-mixed","reply-all","reply","right-from-bracket","right-left","right-to-bracket","rocket","rotate-left","rotate-right","rotate","safari","screen-users","scribble","seal-question","shared-folder","sliders","sparkles","square-check-line","square-check","square-info-line","square-info","square-line","square-lines-corner-custom","square-lines-custom","square-list","square-minus-line","square-minus","square-plus","square-question","square-quote","square-small-line","square-small","square","stack-custom","stapler","star-line","star","strikethrough","stripe-s","subcript","superscript","tag-gear-custom","tag-line","tag-plus-custom","tag","tags","text","thumbs-down","thumbs-up-line","thumbs-up","thumbtack-custom","thumbtack-line-custom","thumbtack","thums-down-line","toggle-off-large","toggle-off","toggle-on-large","toggle-on","trash-can-custom","trash-can-xmark","trash-can","triangle-exclamation-line","triangle-exclamation","twitter","underline","universal-access","up-right-and-down-left-from-center","user-gear","user-group","user-lock","user-plus","user","users","wand-magic-sparkles","windows","word-custom","xmark-large","xmark"];t.iconNames=s;var l=e=>{let{className:t,name:r,size:a=20}=e;const s=`${t} icon-${r}`;return"animated-down"===r?i.default.createElement(n.default,{className:s,size:a}):"animated-google-drive"===r?i.default.createElement(o.default,{className:s,size:a}):i.default.createElement("svg",{className:s,width:a,height:a,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},(e=>({"angle-down":i.default.createElement("path",{d:"M10 14a.996.996 0 01-.707-.293l-5-5a1 1 0 111.414-1.414L10 11.588l4.294-4.294a1 1 0 111.414 1.414l-5 5A.997.997 0 0110 14z"}),"angle-left":i.default.createElement("path",{d:"M12 16a.996.996 0 01-.707-.293l-5-5a1 1 0 010-1.414l5-5a1 1 0 111.414 1.414L8.414 10l4.294 4.294A1 1 0 0112 16z"}),"angle-right":i.default.createElement("path",{d:"M8 16a1 1 0 01-.707-1.707L11.588 10 7.293 5.706a1 1 0 111.414-1.414l5 5a1 1 0 010 1.414l-5 5A.991.991 0 018 16z"}),"angle-up":i.default.createElement("path",{d:"M15 13a.996.996 0 01-.706-.293L10 8.416l-4.294 4.293a1 1 0 11-1.414-1.414l5-5a1 1 0 011.414 0l5 5A1 1 0 0115.001 13z"}),"app-store-ios":i.default.createElement("path",{d:"M15.5 3h-11A1.5 1.5 0 003 4.5v11A1.5 1.5 0 004.5 17h11a1.5 1.5 0 001.5-1.5v-11A1.5 1.5 0 0015.5 3zM6.969 14.016a.624.624 0 11-1.082-.625l.447-.772c.504-.153.916-.035 1.238.356l-.603 1.04zm4.34-1.685H5.625A.627.627 0 015 11.706c0-.343.281-.625.625-.625h1.594l2.043-3.537-.64-1.106a.626.626 0 01.228-.854.626.626 0 01.853.229l.278.48.278-.48a.624.624 0 111.082.625L8.659 11.08H10.6c.631 0 .984.74.71 1.25zm3.066 0h-.906l.612 1.06c.172.3.069.68-.228.853a.626.626 0 01-.853-.228c-1.028-1.778-1.797-3.116-2.313-4.004-.521-.906-.15-1.812.222-2.118.41.71 1.022 1.772 1.841 3.187h1.625a.625.625 0 110 1.25z"}),apple:i.default.createElement("path",{d:"M15.541 10.512c-.008-1.475.654-2.588 1.993-3.408-.75-1.08-1.881-1.676-3.376-1.792-1.414-.113-2.96.832-3.526.832-.598 0-1.97-.792-3.045-.792C5.363 5.388 3 7.14 3 10.705c0 1.053.191 2.14.574 3.263.51 1.475 2.351 5.091 4.272 5.031 1.004-.024 1.714-.72 3.02-.72 1.268 0 1.925.72 3.045.72 1.937-.028 3.603-3.315 4.089-4.794-2.598-1.234-2.459-3.617-2.459-3.693zm-2.255-6.599c1.088-1.302.988-2.487.956-2.913-.96.056-2.072.659-2.706 1.402-.697.796-1.108 1.78-1.02 2.89 1.04.08 1.989-.458 2.77-1.379z"}),"arrow-down-bolt-custom":i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.592 1.107c.22.155.301.436.193.677L5.384 4.94h2.032c.244 0 .461.146.547.364a.55.55 0 01-.162.62L3.135 9.862a.601.601 0 01-.727.032.55.55 0 01-.193-.677l1.401-3.154H1.584a.588.588 0 01-.547-.365.55.55 0 01.162-.62l4.666-3.938a.601.601 0 01.727-.032zm4.7 17.621c.39.363 1.024.363 1.414 0h.004l4.998-4.642a.882.882 0 00.215-1.013A1.007 1.007 0 0017 12.5h-3V7.16C14 6.519 13.44 6 12.75 6h-1.5c-.69 0-1.249.52-1.249 1.16V12.5H7.002c-.406 0-.768.226-.925.574a.877.877 0 00.216 1.013l4.998 4.642z"}),"arrow-down-to-bracket":i.default.createElement("path",{d:"M17 15v-2a1 1 0 00-2 0v2a1 1 0 01-1 1H6a1 1 0 01-1-1v-2a1 1 0 00-2 0v2a3 3 0 003 3h8a3 3 0 003-3zm-6.294-2.294l4-4a1 1 0 10-1.414-1.414L11 9.588V3a1 1 0 10-2 0v6.588L6.706 7.293a1 1 0 10-1.414 1.414l4 4c.392.389 1.024.389 1.414-.002z"}),"arrow-down":i.default.createElement("path",{d:"M15.706 11.706l-5 5a.995.995 0 01-1.413 0l-5-4.999a1 1 0 111.414-1.414L9 13.588V4a.97.97 0 01.972-.972c.524 0 1.028.42 1.028.972v9.588l3.294-3.294a1 1 0 111.412 1.412z"}),"arrow-left":i.default.createElement("path",{d:"M16.972 10c0 .553-.419 1-.972 1H6.416l3.293 3.294a1 1 0 11-1.416 1.413l-5-5a1 1 0 010-1.414l5-5a1 1 0 111.414 1.414L6.416 9H16c.553 0 .972.447.972 1z"}),"arrow-right":i.default.createElement("path",{d:"M16.706 10.706l-5 5a.995.995 0 01-1.413 0 1 1 0 010-1.413L13.588 11H4a1 1 0 110-2h9.588l-3.294-3.294a1 1 0 111.414-1.414l5 5a1.001 1.001 0 01-.002 1.414z"}),"arrow-turn-down-left":i.default.createElement("path",{d:"M6.293 15.706l-4-4a1 1 0 010-1.414l4-3.972a1 1 0 111.414 1.414L5.415 10h10.084c.275 0 .5-.225.5-.5V4a1 1 0 112 0v5.5c0 1.378-1.121 2.5-2.5 2.5H5.415l2.293 2.293a.983.983 0 01.291.679c0 .228-.097.512-.293.707a.975.975 0 01-1.413.027z"}),"arrow-up-arrow-down":i.default.createElement("path",{d:"M3.574 7.728a.998.998 0 001.413-.062L6 6.559v9.438a1 1 0 102 .002V6.56l1.012 1.107a1 1 0 101.475-1.353L7.737 3.31c-.378-.414-1.095-.414-1.474 0L3.54 6.314a.976.976 0 00.033 1.414zm6 4.544a1.002 1.002 0 00-.06 1.415l2.721 3.002c.379.415 1.096.415 1.475 0l2.722-3.002a1 1 0 10-1.475-1.353L14 13.44V4a1 1 0 10-2 0v9.437l-1.012-1.106a1.004 1.004 0 00-1.413-.06z"}),"arrow-up-right-from-square":i.default.createElement("path",{d:"M11 4a1 1 0 011-1h3.972c.162 0 .294.027.41.076.09.048.227.12.324.215 0 .001 0 .003.003.004.194.194.263.448.291.702V8a.999.999 0 11-2 0V6.416l-5.294 5.29a.998.998 0 11-1.412-1.412L13.584 5H12a1 1 0 01-1-1zM3 6a2 2 0 012-2h3a1 1 0 110 2H5v9h9v-3a.999.999 0 112 0v3c0 1.103-.897 2-2 2H5a2 2 0 01-2-2V6z"}),"arrow-up-right":i.default.createElement("path",{d:"M15 6v7a1 1 0 11-2 0V8.416l-6.294 6.293a.998.998 0 01-1.413-.002 1 1 0 010-1.414L11.588 7H7a1 1 0 110-2h7c.553 0 1 .447 1 1z"}),"arrow-up":i.default.createElement("path",{d:"M15.706 9.706a.995.995 0 01-1.413 0L11 6.417V16a.97.97 0 01-.972.972C9.504 16.972 9 16.553 9 16V6.416l-3.293 3.29a1 1 0 11-1.414-1.414l5-5a1 1 0 011.414 0l5 5a1 1 0 010 1.414z"}),"arrows-left-right-to-line":i.default.createElement("path",{d:"M1 4a1 1 0 011 1v10a1 1 0 11-2 0V5a1 1 0 011-1zm6.706 2.294a.998.998 0 010 1.412L6.416 9h7.168l-1.29-1.294a.998.998 0 111.412-1.412l3 3a.998.998 0 010 1.412l-3 3a.998.998 0 11-1.412-1.412L13.584 11H6.416l1.29 1.294a.998.998 0 11-1.412 1.412l-3-3a.997.997 0 010-1.412l3-3a.998.998 0 011.412 0zM20 15a.999.999 0 11-2 0V5a1 1 0 112 0v10z"}),"arrows-left-right":i.default.createElement("path",{d:"M17.706 10.706l-3 3a.995.995 0 01-1.413 0 1 1 0 010-1.413L14.588 11H5.415l1.293 1.293a1 1 0 11-1.416 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 111.414 1.414L5.416 9h9.171l-1.293-1.293a1 1 0 111.414-1.414l3 3a1 1 0 01-.002 1.413z"}),"arrows-to-line":i.default.createElement("path",{d:"M9.294 7.706a.995.995 0 001.413 0l2-1.999a1 1 0 00-1.414-1.414L11 4.586V3a1 1 0 10-2 0v1.586l-.294-.293a1 1 0 10-1.413 1.414l2 2zm1.412 4.588a.995.995 0 00-1.413-.001l-2 2a1 1 0 001.414 1.414L9 15.416V17a1 1 0 102 0v-1.586l.293.293a1 1 0 001.414-1.414l-2-2zM16 8.972H4a1 1 0 100 2h12a1 1 0 100-2z"}),ban:i.default.createElement("path",{d:"M18 10a8 8 0 01-8 8 8 8 0 01-8-8 8 8 0 018-8 8 8 0 018 8zM5.11 6.525A5.96 5.96 0 004 10c0 3.313 2.66 6 6 6 1.297 0 2.497-.41 3.475-1.11L5.109 6.526zM16 10c0-3.34-2.688-6-6-6a5.96 5.96 0 00-3.475 1.11l8.366 8.365A5.948 5.948 0 0016 10z"}),"bars-filter":i.default.createElement("path",{d:"M3 5c0-.553.447-1 1-1h12a.999.999 0 110 2H4c-.553 0-1-.447-1-1zm2 5c0-.553.447-1 1-1h8a.999.999 0 110 2H6c-.553 0-1-.447-1-1zm7 5c0 .553-.447 1-1 1H9a.999.999 0 110-2h2c.553 0 1 .447 1 1z"}),"bars-sort-custom":i.default.createElement("path",{d:"M17 5a1 1 0 00-1-1H4a1 1 0 100 2h12a1 1 0 001-1zm0 5a1 1 0 00-1-1H8a.999.999 0 100 2h8a1 1 0 001-1zm-5 6h4a1 1 0 100-2h-4a.999.999 0 100 2z"}),"bars-sort":i.default.createElement("path",{d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h8a.999.999 0 110 2H4a1 1 0 01-1-1zm5 6H4a1 1 0 110-2h4a.999.999 0 110 2z"}),bars:i.default.createElement("path",{d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a.999.999 0 110 2H4a1 1 0 01-1-1zm13 6H4a1 1 0 110-2h12a.999.999 0 110 2z"}),bold:i.default.createElement("path",{d:"M14.034 9.575A3.954 3.954 0 0015 7c0-2.206-1.794-4-4-4H5a1 1 0 100 2h.5v10H5a1 1 0 100 2h7c2.206 0 4-1.794 4-4 0-1.46-.794-2.725-1.966-3.425zM7.5 5H11c1.103 0 2 .898 2 2 0 1.103-.897 2-2 2H7.5V5zM12 15H7.5v-4H12c1.103 0 2 .897 2 1.972S13.103 15 12 15z"}),"bolt-lightning":i.default.createElement("path",{d:"M15.912 7.4a.745.745 0 00-.662-.4h-4.894l1.589-3.972a.75.75 0 00-.075-.7.784.784 0 00-.62-.328h-5.5a.75.75 0 00-.743.651l-1 7.5A.752.752 0 004.75 11h4.572l-1.306 6.066a.75.75 0 00.438.846.485.485 0 00.296.088.751.751 0 00.619-.326l6.5-9.5a.75.75 0 00.043-.774z"}),bolt:i.default.createElement("path",{d:"M13.919 3.394a1 1 0 00-1.578-1.147l-8 7A1 1 0 005 11h3.483l-2.403 5.606a1 1 0 001.578 1.147l8-7c.313-.275.425-.716.279-1.103A1.002 1.002 0 0015 9.003h-3.484l2.403-5.61z"}),"book-blank":i.default.createElement("path",{d:"M17 12.5v-9A1.5 1.5 0 0015.5 2H6a3 3 0 00-3 3v10a3 3 0 003 3h10c.552 0 1-.448 1-.972a.986.986 0 00-.5-.847V13.64c.306-.301.5-.695.5-1.139zM15 16H6a1 1 0 010-2h9v2z"}),"book-open-cover":i.default.createElement("path",{d:"M17 3a1 1 0 00-1.153-.988L10.5 2.84v12l6.5-1.444V3zm-7.5-.16l-5.347-.828A1 1 0 003 3v10.394l6.5 1.445v-12zm9.256.19L18 3.22v10.175c0 .44-.326.874-.783.976L10 15.975l-7.217-1.603A1 1 0 012 13.397V3.22l-.758-.19A1 1 0 000 4v10.972a1 1 0 00.783.976l9 1.972a.998.998 0 00.434 0l9-1.972c.458-.101.783-.48.783-.948V4a1 1 0 00-1.244-.97z"}),"book-open-line":i.default.createElement("path",{d:"M5.875 3c-1.731 0-3.35.456-4.028.675A1.223 1.223 0 001 4.847v9.762c0 .816.75 1.382 1.5 1.257a19.33 19.33 0 013.125-.241c1.688 0 3.047.797 3.516 1.113.234.156.525.262.843.262.36 0 .675-.131.916-.31.419-.306 1.634-1.065 3.475-1.065 1.49 0 2.516.125 3.094.225.747.128 1.531-.431 1.531-1.269V4.847c0-.516-.322-1.003-.847-1.172C17.475 3.456 15.856 3 14.125 3c-1.15 0-2.244.2-3.044.397a15.251 15.251 0 00-1.081.31 15.864 15.864 0 00-1.081-.31C8.119 3.2 7.025 3 5.875 3zM9.25 5.04v10.02c-.813-.429-2.1-.935-3.625-.935-1.34 0-2.419.116-3.125.222V5.04c.697-.21 2.013-.541 3.375-.541.987 0 1.956.175 2.684.353.27.066.504.131.691.188zm1.5 9.976V5.04c.188-.057.422-.122.69-.188.729-.178 1.697-.353 2.685-.353 1.363 0 2.678.331 3.375.54v9.294c-.678-.103-1.716-.209-3.125-.209a7.605 7.605 0 00-3.625.894v-.003z"}),"book-open":i.default.createElement("path",{d:"M5.51 3.001c-1.17-.023-2.52.294-3.929.914A.993.993 0 001 4.826v11.175c0 .361.375.611.702.458 3.946-1.848 6.868.344 6.993.438.09.069.196.103.305.103.387 0 .5-.356.5-.5V4.502a.5.5 0 00-.212-.408C9.228 4.049 7.772 3.043 5.51 3zm12.909.914c-1.41-.618-2.765-.925-3.928-.914-2.264.041-3.691 1.048-3.778 1.091a.497.497 0 00-.213.41v11.971c0 .165.11.527.5.527a.498.498 0 00.306-.104c.122-.094 3.045-2.286 6.993-.438a.498.498 0 00.702-.457V4.826c-.03-.39-.226-.754-.582-.91z"}),"books-copy":i.default.createElement("path",{d:"M6 5H4a3 3 0 00-3 3v7a3 3 0 003 3h8a.999.999 0 100-2H4a.999.999 0 110-2h2.534A3.977 3.977 0 016 12V5zm5 10h7a.999.999 0 100-2v-2c.553 0 1-.447 1-1V3c0-.553-.447-1-1-1h-8a3 3 0 00-3 3v7a2.998 2.998 0 003 3h1zm-2-3c0-.553.447-1 1-1h6v2h-6c-.553 0-1-.447-1-1z"}),books:i.default.createElement("path",{d:"M7 14h3.972V6H7v8zM5 2H2.972C2.449 2 2 2.45 2 3v1.972h4V3c0-.55-.45-1-1-1zm2 14.972c0 .55.45.972 1 .972h1.972c.55 0 1-.449.972-1v-2H6.972L7 16.972zm-5 0c0 .55.45.972.972.972h2c.55 0 .972-.45.972-.972L6 15H2v1.972zM2 14h4V6H2v8zm13.122-8.369l-3.863 1.033 2.07 7.71 3.865-1.033-2.072-7.71zm2.844 10.597l-.515-1.927-3.863 1.033.517 1.927c.143.53.692.847 1.224.705l1.933-.516a.996.996 0 00.704-1.222zm-3.622-13.49a1.001 1.001 0 00-1.224-.704l-1.93.516c-.097.026-.176.078-.257.128A.993.993 0 0010 2H8.027c-.551 0-1 .45-1 .972L7 5h3.813l.187.7 3.86-1.034-.516-1.927z"}),"brackets-curly":i.default.createElement("path",{d:"M7 3H6C4.316 3 3 4.343 3 6v1.172a1 1 0 01-.293.707L1.293 9.294a1 1 0 000 1.414l1.414 1.414c.188.187.293.44.293.706V14a3 3 0 003 3h1a.999.999 0 100-2H6c-.55 0-1-.45-1-1v-1.172c0-.795-.316-1.558-.878-2.12L3.414 10l.707-.707A3 3 0 005 7.172V6c0-.55.45-1 1-1h1a1 1 0 100-2zm11.706 6.294L17.292 7.88A1.062 1.062 0 0117 7.172V6a3 3 0 00-3-3h-1c-.553 0-1 .448-1 .972S12.447 5 12.972 5H14c.55 0 1 .45 1 1v1.172c0 .795.316 1.558.878 2.12l.71.708-.708.707a2.988 2.988 0 00-.88 2.121V14c0 .55-.45 1-1 1h-1c-.553 0-1 .447-1 .972 0 .525.447 1.028.972 1.028H14a3 3 0 003-3v-1.172a1 1 0 01.293-.707l1.414-1.414a1 1 0 000-1.413z"}),"broom-wide":i.default.createElement("path",{d:"M17.706 2.294a1.002 1.002 0 00-1.415 0l-4 4-.494-.494a1.5 1.5 0 00-1.79-.25l-1.016.562 4.896 4.891.563-1.016a1.505 1.505 0 00-.25-1.79l-.494-.494 4-4c.39-.39.39-1.025 0-1.416v.007zM7.86 6.744L2.513 9.716a.998.998 0 00-.222 1.578l1.35 1.35a.25.25 0 00.256.06l1.628-.545a.25.25 0 01.316.316l-.544 1.628a.25.25 0 00.06.256l3.352 3.35a.998.998 0 001.578-.222l2.972-5.346-5.4-5.397z"}),building:i.default.createElement("path",{d:"M5.5 2A1.5 1.5 0 004 3.5v13A1.5 1.5 0 005.5 18h3v-2.5a1.5 1.5 0 013 0V18h3a1.5 1.5 0 001.5-1.5v-13A1.5 1.5 0 0014.5 2h-9zM6 9.5c0-.275.225-.5.5-.5h1c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5h-1a.501.501 0 01-.5-.5v-1zM9.5 9h1c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5h-1a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5zm2.5.5c0-.275.225-.5.5-.5h1c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5h-1a.501.501 0 01-.5-.5v-1zM6.5 5h1c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5h-1a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5zm2.5.5c0-.275.225-.5.5-.5h1c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5h-1a.501.501 0 01-.5-.5v-1zm3.5-.5h1c.275 0 .5.225.5.5v1c0 .275-.225.5-.5.5h-1a.501.501 0 01-.5-.5v-1c0-.275.225-.5.5-.5z"}),bullhorn:i.default.createElement("path",{d:"M17 7.612c.581.276 1 1.016 1 1.888 0 .872-.419 1.613-1 1.887V16a.998.998 0 01-1.706.706l-1.366-1.39c-1.5-1.5-3.534-2.316-5.656-2.316H8v4c0 .553-.447 1-1 1H5a1 1 0 01-1-1v-4a2 2 0 01-2-2V8a2 2 0 012-2h4.272a8.002 8.002 0 005.656-2.343l1.366-1.364A1 1 0 0117 3v4.612zM8.272 8H8v3h.272c2.494 0 4.89.931 6.728 2.603V5.397A9.996 9.996 0 018.272 8z"}),"calendar-clock":i.default.createElement("path",{d:"M4 3v1H2.5A1.5 1.5 0 001 5.5V7h14V5.5A1.5 1.5 0 0013.5 4H12V3a.999.999 0 10-2 0v1H6V3a.999.999 0 10-2 0zm11 5H1v8.5A1.5 1.5 0 002.5 18h8.838A5.5 5.5 0 0115 8.022V8zm4 5.5a4.5 4.5 0 10-9 0 4.5 4.5 0 009 0zM14.5 11c.275 0 .5.225.5.5V13h1c.275 0 .5.225.5.5s-.225.5-.5.5h-1.5a.501.501 0 01-.5-.5v-2c0-.275.225-.5.5-.5z"}),calendar:i.default.createElement("path",{d:"M6 3v1H4.5A1.5 1.5 0 003 5.5V7h14V5.5A1.5 1.5 0 0015.5 4H14V3a.999.999 0 10-2 0v1H8V3a.999.999 0 10-2 0zm11 5H3v8.5A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V8z"}),"caret-down":i.default.createElement("path",{d:"M14.707 9.706l-3.972 4a1.102 1.102 0 01-.734.294.996.996 0 01-.707-.293l-3.972-4a.96.96 0 01-.245-1.088c.155-.372.52-.619.924-.619h7.972a1 1 0 01.924.617c.155.374.098.805-.19 1.09z"}),"caret-left":i.default.createElement("path",{d:"M10.294 14.706l-4-3.972A1.121 1.121 0 016 9.972a.95.95 0 01.293-.707l4-3.972A1 1 0 0112 6v7.972a1 1 0 01-.617.924c-.374.155-.805.098-1.09-.19z"}),"caret-right":i.default.createElement("path",{d:"M9.706 5.294l4 3.972c.197.221.294.478.294.706 0 .228-.098.512-.293.707l-4 3.972a1 1 0 01-1.09.217c-.374-.155-.617-.465-.617-.896V6a1 1 0 011.706-.706z"}),"caret-up":i.default.createElement("path",{d:"M5.293 10.294l3.972-4C9.488 6.097 9.744 6 10 6s.512.098.707.293l3.972 4a1 1 0 01.217 1.09.973.973 0 01-.924.617H6a1 1 0 01-.707-1.706z"}),"chart-simple":i.default.createElement("path",{d:"M8 4.5A1.5 1.5 0 019.5 3h1A1.5 1.5 0 0112 4.5v11a1.5 1.5 0 01-1.5 1.5h-1A1.5 1.5 0 018 15.5v-11zm-5 6A1.5 1.5 0 014.5 9h1A1.5 1.5 0 017 10.5v5A1.5 1.5 0 015.5 17h-1A1.5 1.5 0 013 15.5v-5zM14.5 5h1A1.5 1.5 0 0117 6.5v9a1.5 1.5 0 01-1.5 1.5h-1a1.5 1.5 0 01-1.5-1.5v-9A1.5 1.5 0 0114.5 5z"}),"check-strong-custom":i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.976 4.861a1.5 1.5 0 01.163 2.115l-6 7a1.5 1.5 0 01-2.278 0l-3-3.5A1.5 1.5 0 117.14 8.524L9 10.695l4.861-5.671a1.5 1.5 0 012.115-.163z"}),check:i.default.createElement("path",{d:"M16.706 5.294a.998.998 0 010 1.412l-8 8a.998.998 0 01-1.412 0l-4.001-4a1 1 0 011.414-1.412l3.265 3.29 7.322-7.29a.997.997 0 011.412 0z"}),chrome:i.default.createElement("path",{d:"M6.36 8.797L3.971 5.128a7.745 7.745 0 016-2.878 7.686 7.686 0 013.9 1.038 7.759 7.759 0 013.044 3.218L10.5 6.17c-1.816-.106-3.544.915-4.14 2.628zM7.386 10A2.611 2.611 0 0010 12.613 2.611 2.611 0 0012.613 10 2.611 2.611 0 0010 7.388 2.61 2.61 0 007.388 10zm9.841-2.787l-4.366.225c1.185 1.384 1.204 3.38.207 4.912l-3.503 5.388a7.718 7.718 0 004.306-1.029c3.356-1.937 4.715-6 3.356-9.496zm-10.8 4.275L3.513 5.753A7.744 7.744 0 002.25 10a7.737 7.737 0 006.547 7.653l1.99-3.9c-1.8.338-3.537-.65-4.359-2.265z"}),"cicle-check-line":i.default.createElement("path",{d:"M10 3.5a6.5 6.5 0 110 13 6.5 6.5 0 010-13zM10 18a8 8 0 100-16.001A8 8 0 0010 18zm3.531-9.469a.75.75 0 00-1.06-1.06l-3.468 3.47-1.469-1.47a.75.75 0 00-1.06 1.06l2.001 2a.747.747 0 001.06 0l3.996-4z"}),"circle-check":i.default.createElement("path",{d:"M2 10a8 8 0 018-8 8 8 0 018 8 8 8 0 01-8 8 8 8 0 01-8-8zm11.619-1.381a.877.877 0 000-1.238.877.877 0 00-1.238 0L9 10.762l-1.381-1.38a.877.877 0 00-1.238 0 .877.877 0 000 1.237l2 2c.34.34.897.34 1.238 0l4-4z"}),"circle-dot-custom":i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.596 5.404a6.5 6.5 0 11-9.192 9.192 6.5 6.5 0 019.192-9.192zM4.343 4.344a8 8 0 1011.314 11.313A8 8 0 004.343 4.343zM10 14a4 4 0 100-8 4 4 0 000 8z"}),"circle-dot-line":i.default.createElement("path",{d:"M7 10c0-1.684 1.316-3 3-3 1.656 0 3 1.316 3 3a3 3 0 01-3 3c-1.684 0-3-1.344-3-3zm11 0a8 8 0 01-8 8 8 8 0 01-8-8 8 8 0 018-8 8 8 0 018 8zm-8-6.5c-3.59 0-6.5 2.91-6.5 6.5s2.91 6.5 6.5 6.5 6.5-2.91 6.5-6.5-2.91-6.5-6.5-6.5z"}),"circle-dot":i.default.createElement("path",{d:"M2 10a8 8 0 018-8 8 8 0 018 8 8 8 0 01-8 8 8 8 0 01-8-8zm8 3a3 3 0 003-3c0-1.684-1.344-3-3-3-1.684 0-3 1.316-3 3 0 1.656 1.316 3 3 3z"}),"circle-exclamation":i.default.createElement("path",{d:"M10 3.5a6.5 6.5 0 110 13 6.5 6.5 0 010-13zM10 18a8 8 0 100-16.001A8 8 0 0010 18zm0-12a.748.748 0 00-.75.75v3.5c0 .416.334.75.75.75s.75-.334.75-.75v-3.5A.748.748 0 0010 6zm1 7a1 1 0 10-2 0 1 1 0 002 0z"}),"circle-info-line":i.default.createElement("path",{d:"M10 2a8 8 0 00-8 8 8 8 0 008 8 8 8 0 008-8 8 8 0 00-8-8zm0 14.5A6.507 6.507 0 013.5 10c0-3.584 2.916-6.5 6.5-6.5s6.5 2.916 6.5 6.5-2.916 6.5-6.5 6.5zm1.25-4h-.5V9.75A.75.75 0 0010 9H9a.752.752 0 00-.75.75c0 .412.338.75.75.75h.25v2h-.5a.752.752 0 00-.75.75c0 .412.338.75.75.75h2.5a.75.75 0 000-1.5zM10 8a1 1 0 100-2 1 1 0 000 2z"}),"circle-info":i.default.createElement("path",{d:"M10 2a8 8 0 00-8 8 8 8 0 008 8 8 8 0 008-8 8 8 0 00-8-8zm0 4a1 1 0 110 2 1 1 0 010-2zm1.25 8h-2.5a.75.75 0 010-1.5h.5v-2H9A.75.75 0 019 9h1a.75.75 0 01.75.75v2.75h.5a.75.75 0 010 1.5z"}),"circle-line":i.default.createElement("path",{d:"M18 10a8 8 0 01-8 8 8 8 0 01-8-8 8 8 0 018-8 8 8 0 018 8zm-8-6.5c-3.59 0-6.5 2.91-6.5 6.5s2.91 6.5 6.5 6.5 6.5-2.91 6.5-6.5-2.91-6.5-6.5-6.5z"}),"circle-plus-line":i.default.createElement("path",{d:"M10 3.5a6.5 6.5 0 110 13 6.5 6.5 0 010-13zM10 18a8 8 0 100-16.001A8 8 0 0010 18zm-.75-5.25c0 .416.334.75.75.75s.75-.334.75-.75v-2h2c.416 0 .75-.334.75-.75a.748.748 0 00-.75-.75h-2v-2A.748.748 0 0010 6.5a.748.748 0 00-.75.75v2h-2a.748.748 0 00-.75.75c0 .416.334.75.75.75h2v2z"}),"circle-plus":i.default.createElement("path",{d:"M2 10a8 8 0 018-8 8 8 0 018 8 8 8 0 01-8 8 8 8 0 01-8-8zm8 3.5c.416 0 .75-.334.75-.75v-2h2c.416 0 .75-.334.75-.75a.748.748 0 00-.75-.75h-2v-2A.748.748 0 0010 6.5a.748.748 0 00-.75.75v2h-2a.748.748 0 00-.75.75c0 .416.334.75.75.75h2v2c0 .416.334.75.75.75z"}),circle:i.default.createElement("path",{d:"M18 10a8 8 0 01-8 8 8 8 0 01-8-8 8 8 0 018-8 8 8 0 018 8z"}),"clipboard-line":i.default.createElement("path",{d:"M12.75 4H14c1.103 0 2 .897 2 2v10c0 1.103-.897 2-2 2H6c-1.103 0-2-.897-2-2V6c0-1.103.897-2 2-2h1.55a2.501 2.501 0 014.9 0h.3zM6 5.5c-.275 0-.5.225-.5.5v10c0 .275.225.5.5.5h8c.275 0 .5-.225.5-.5V6c0-.275-.225-.5-.5-.5h-.5v.75c0 .416-.334.75-.75.75h-5.5a.748.748 0 01-.75-.75V5.5H6zm4-.25a.75.75 0 100-1.5.75.75 0 000 1.5z"}),clipboard:i.default.createElement("path",{d:"M10 2a2.997 2.997 0 00-2.828 2H6c-1.103 0-2 .897-2 2v10c0 1.103.897 2 2 2h8c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2h-1.172A2.997 2.997 0 0010 2zm0 2a1 1 0 110 2 1 1 0 010-2zM7.5 8h5c.275 0 .5.225.5.5s-.225.5-.5.5h-5a.501.501 0 01-.5-.5c0-.275.225-.5.5-.5z"}),"clock-rotate-left":i.default.createElement("path",{d:"M10 2a8 8 0 018 8 8 8 0 01-12.572 6.566c-.453-.344-.564-.941-.247-1.394a.998.998 0 011.39-.247A6.002 6.002 0 0016 10c.001-3.34-2.687-6-5.999-6-1.684 0-3.156.67-4.244 1.756l.963.963C7.19 7.19 6.856 8 6.19 8H2.75A.75.75 0 012 7.25V3.81a.75.75 0 011.28-.53l1.063 1.063A7.962 7.962 0 019.972 2H10zm0 4c.416 0 .75.334.75.75v2.94l2.003 2.029c.319.293.319.769 0 1.034-.265.319-.74.319-1.034 0l-2.25-2.25A.642.642 0 019.25 10V6.75c0-.416.334-.75.75-.75z"}),clock:i.default.createElement("path",{d:"M10 18a8 8 0 01-8-8 8 8 0 018-8 8 8 0 018 8 8 8 0 01-8 8zM9.25 5.75V10c0 .25.125.484.334.625l3 2a.748.748 0 001.041-.21.748.748 0 00-.21-1.04L10.75 9.6V5.75A.748.748 0 0010 5a.748.748 0 00-.75.75z"}),clone:i.default.createElement("path",{d:"M2 9a2 2 0 012-2h2v4c0 1.656 1.316 3 3 3h4v2c0 1.103-.897 2-2 2H4a2 2 0 01-2-2V9zm7 4c-1.103 0-2-.897-2-2V4a2 2 0 012-2h7a2 2 0 012 2v7c0 1.103-.897 2-2 2H9z"}),"cloud-arrow-down":i.default.createElement("path",{d:"M4.5 17a4.5 4.5 0 01-1.494-8.747 4.999 4.999 0 019.328-2.747C12.81 5.16 13.384 5 14 5c1.656 0 3 1.316 3 3 0 .381-.072.744-.2 1.081A4 4 0 0116 17H4.5zm4.969-2.747c.293.319.769.319 1.034 0l2.5-2.5c.319-.265.319-.74 0-1.034-.265-.29-.74-.29-1.034 0L10.75 11.94V7.75A.748.748 0 0010 7a.748.748 0 00-.75.75v4.19L8.003 10.72c-.266-.29-.74-.29-1.034 0-.29.293-.29.769 0 1.034l2.5 2.5z"}),"cloud-arrow-up":i.default.createElement("path",{d:"M4.5 17a4.5 4.5 0 01-1.494-8.747 4.999 4.999 0 019.328-2.747C12.81 5.16 13.384 5 14 5c1.656 0 3 1.316 3 3 0 .381-.072.744-.2 1.081A4 4 0 0116 17H4.5zm2.469-6.781c-.29.293-.29.769 0 1.034.293.319.768.319 1.034 0L9.25 10.06v4.191c0 .416.334.75.75.75s.75-.334.75-.75v-4.19l1.219 1.193c.293.319.769.319 1.034 0 .319-.265.319-.74 0-1.034l-2.5-2.5c-.265-.29-.74-.29-1.034 0l-2.5 2.5z"}),"cloud-slash":i.default.createElement("path",{d:"M4.331 4.604a5 5 0 018.003.903C12.81 5.16 13.384 5 14 5c1.656 0 3 1.316 3 3 0 .381-.072.744-.2 1.081a4 4 0 013.2 3.92 3.813 3.813 0 01-1.278 2.877l.99.782a.75.75 0 01-.925 1.18L.287 3.34a.75.75 0 11.926-1.18L4.33 4.604zm-1.294 2.79L15.23 17H4.5a4.5 4.5 0 01-1.494-8.747 5.266 5.266 0 01.03-.86z"}),command:i.default.createElement("path",{d:"M14 11h-1V9h1c1.654 0 3-1.346 3-3s-1.346-3-3-3-3 1.346-3 3v1H9V6c0-1.654-1.346-3-3-3S3 4.346 3 6s1.346 3 3 3h1v2H6c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3v-1h2v1c0 1.654 1.346 3 3 3s3-1.346 3-3-1.347-3-3-3zm-1-5a1 1 0 111 1h-1V6zm-6 8a1 1 0 11-1-1h1v1zm0-7H6a1 1 0 111-1v1zm4 4H9V9h2v2zm3 4a1 1 0 01-1-1v-1h1a1 1 0 010 2z"}),"comment-dots-line":i.default.createElement("path",{d:"M6.473 8.528c-.553 0-1 .444-1 .972 0 .581.447 1.028 1 1.028.553 0 .972-.445.972-1 0-.555-.416-1-.972-1zm3.5-.028c-.555 0-.972.445-.972 1 0 .555.445.972.972.972a.985.985 0 00.972-.972c0-.527-.416-1-.972-1zm3.5.028c-.555 0-.972.445-.972 1 0 .555.445 1 .972 1 .554 0 1-.445 1-1 0-.556-.444-1-1-1zM9.973 3C5.554 3 2 5.91 2 9.5c0 1.488.622 2.852 1.653 3.947-.464 1.234-1.433 2.277-1.449 2.289a.752.752 0 00-.144.812c.094.299.361.48.662.48 1.921 0 3.41-.805 4.347-1.445.902.281 1.88.445 2.903.445 4.418 0 7.972-2.91 7.972-6.472C17.945 5.995 14.392 3 9.973 3zm0 11.528c-.836 0-1.66-.129-2.449-.379l-.711-.222-.609.43a6.682 6.682 0 01-1.797.905c.23-.378.45-.804.621-1.257l.332-.875-.644-.684c-.562-.602-1.241-1.6-1.241-2.918 0-2.758 2.913-5 6.471-5 3.559 0 6.472 2.242 6.472 5s-2.858 5-6.445 5z"}),"comment-line":i.default.createElement("path",{d:"M10 3C5.581 3 2 5.91 2 9.5c0 1.488.623 2.852 1.654 3.944-.465 1.234-1.433 2.277-1.449 2.289A.752.752 0 002.75 17c1.922 0 3.41-.805 4.347-1.445A9.578 9.578 0 0010 16c4.419 0 7.972-2.91 7.972-6.5S14.419 3 10 3zm.003 11.5a8.11 8.11 0 01-2.45-.379l-.71-.222-.61.43a6.688 6.688 0 01-1.796.905c.23-.378.449-.804.62-1.257l.333-.875-.645-.684c-.563-.602-1.243-1.6-1.243-2.918 0-2.758 2.914-5 6.5-5s6.5 2.242 6.5 5-2.914 5-6.499 5z"}),"comment-slash":i.default.createElement(i.default.Fragment,null,i.default.createElement("g",{clipPath:"url(#clip0_19356_165086)"},i.default.createElement("path",{d:"M1.213 2.16a.75.75 0 00-.925 1.18l18.5 14.5a.75.75 0 00.925-1.18l-3.685-2.888C17.256 12.632 18 11.135 18 9.5 18 5.91 14.42 3 10 3c-2.115 0-4.04.669-5.472 1.76l-3.315-2.6zM13.25 15.44L2.59 7.04C2.21 7.8 2 8.632 2 9.5c0 1.41.553 2.713 1.49 3.778-.059.766-.355 1.447-.668 1.966a5.632 5.632 0 01-.628.853c-.019.019-.031.034-.04.044l-.01.01a.5.5 0 00.356.853c.897 0 1.8-.279 2.55-.604a9.362 9.362 0 001.697-.956c.994.36 2.094.56 3.253.56 1.156 0 2.26-.2 3.253-.56l-.003-.003z"})),i.default.createElement("defs",null,i.default.createElement("clipPath",{id:"clip0_19356_165086"},i.default.createElement("path",{d:"M0 0h20v20H0z"})))),copy:i.default.createElement("path",{d:"M9.5 2h3.878a1.5 1.5 0 011.06.44l2.121 2.123A1.5 1.5 0 0117 5.622V12.5a1.5 1.5 0 01-1.5 1.5h-6A1.5 1.5 0 018 12.5v-9A1.5 1.5 0 019.5 2zm-5 4H7v2H5v8h6v-1h2v1.5a1.5 1.5 0 01-1.5 1.5h-7A1.5 1.5 0 013 16.5v-9A1.5 1.5 0 014.5 6z"}),"credit-card":i.default.createElement("path",{d:"M17 3a2 2 0 012 2v1H1V5a2 2 0 012-2h14zm2 12c0 1.103-.897 2-2 2H3a2 2 0 01-2-2V9h18v6zM4.5 13c-.275 0-.5.225-.5.5s.225.5.5.5h2c.275 0 .5-.225.5-.5s-.225-.5-.5-.5h-2zm4 1h4c.275 0 .5-.225.5-.5s-.225-.5-.5-.5h-4c-.275 0-.5.225-.5.5s.225.5.5.5z"}),"diagram-sankey":i.default.createElement("path",{d:"M10.2 3.4A.993.993 0 0111 3h7a.999.999 0 110 2h-6.5L8.8 8.6A.993.993 0 018 9H2a.999.999 0 110-2h5.5l2.7-3.6zM5.434 12H2a.999.999 0 110-2h16a.999.999 0 110 2H7.766l1.8 3H18a.999.999 0 110 2H9a.998.998 0 01-.856-.484L5.434 12z"}),down:i.default.createElement("path",{d:"M10.707 16.706c-.39.39-1.025.39-1.416 0l-5-5a.996.996 0 01-.216-1.09A1 1 0 015 9.996h3v-5.75c0-.69.56-1.25 1.25-1.25h1.5c.691 0 1.25.56 1.25 1.25v5.75h3a1.004 1.004 0 01.71 1.71l-5 5h-.003z"}),"draw-polygon":i.default.createElement("path",{d:"M15.01 13a2 2 0 11-1.741 3H6.73A2 2 0 114 13.269V6.73A2 2 0 116.731 4h6.538A2 2 0 0117 5c0 1.103-.89 1.994-1.99 1.972l-1.213 2.15c.131.265.203.562.203.878 0 .316-.072.613-.203.878L15.009 13zM6 13.269c.303.175.556.428.731.731h6.538c0-.003.003-.006.003-.01l-1.14-1.993c-.044-.025-.088.003-.132.003-1.103 0-2-.897-2-2a2.002 2.002 0 012.131-1.997l1.14-1.994L13.27 6H6.73A2.001 2.001 0 016 6.731v6.538z"}),"ellipsis-vertical":i.default.createElement("path",{d:"M10 13.25a1.75 1.75 0 11-.001 3.501A1.75 1.75 0 0110 13.25zm0-5a1.75 1.75 0 11-.001 3.501A1.75 1.75 0 0110 8.25zm0-1.5a1.75 1.75 0 11.001-3.501A1.75 1.75 0 0110 6.75z"}),ellipsis:i.default.createElement("path",{d:"M6.75 10a1.75 1.75 0 11-3.501-.001A1.75 1.75 0 016.75 10zm5 0a1.751 1.751 0 01-3.5 0 1.751 1.751 0 013.5 0zm1.5 0a1.751 1.751 0 013.5 0 1.751 1.751 0 01-3.5 0z"}),envelope:i.default.createElement("path",{d:"M3.5 4a1.5 1.5 0 00-.9 2.7l6.8 5.1c.356.266.844.266 1.2 0l6.8-5.1a1.5 1.5 0 00-.9-2.7h-13zM2 7.5V14c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2V7.5l-6.8 5.1a1.997 1.997 0 01-2.4 0L2 7.5z"}),eraser:i.default.createElement("path",{d:"M17 15a.999.999 0 110 2H6.706c-.528 0-1.037-.21-1.412-.584l-2.501-2.5a2.003 2.003 0 010-2.832l7.291-7.291c.782-.781 2.05-.781 2.832 0l4.29 4.291c.782.782.782 2.05 0 2.832L13.122 15H17zm-6.706 0l2.103-2.103-4.294-4.294L4.207 12.5l2.5 2.5h3.587z"}),"face-raised-eybrow":i.default.createElement("path",{d:"M2 10a8 8 0 1116 0 8 8 0 01-16 0zm6.512-.5a1 1 0 10-2 0 1 1 0 002 0zm4 1a1 1 0 100-2 1 1 0 000 2zM6.5 13c0 .275.225.5.5.5h6c.275 0 .5-.225.5-.5s-.225-.5-.5-.5H7c-.275 0-.5.225-.5.5zm5.775-6.569a.749.749 0 011.153.116l.153.231c.153.231.463.29.694.138a.499.499 0 00.137-.694l-.153-.231a1.75 1.75 0 00-2.693-.266l-.922.922a.502.502 0 000 .706.502.502 0 00.706 0l.922-.922h.003zM6 6.5c-.275 0-.5.225-.5.5s.225.5.5.5h2c.275 0 .5-.225.5-.5s-.225-.5-.5-.5H6z"}),"facebook-square":i.default.createElement("path",{d:"M15.5 3h-11A1.5 1.5 0 003 4.5v11A1.5 1.5 0 004.5 17h4.29v-4.76H6.82V10h1.97V8.293c0-1.943 1.155-3.015 2.926-3.015.848 0 1.735.15 1.735.15v1.907h-.977c-.963 0-1.263.598-1.263 1.21V10h2.15l-.344 2.24H11.21V17H15.5a1.5 1.5 0 001.5-1.5v-11A1.5 1.5 0 0015.5 3z"}),"file-arrow-down-line":i.default.createElement("path",{d:"M10.75 12.69V9.5a.75.75 0 00-1.5 0v3.19L8.003 11.47a.64.64 0 00-.503-.219.75.75 0 00-.53 1.28l2.5 2.5a.75.75 0 001.06 0l2.5-2.5a.75.75 0 10-1.06-1.061l-1.22 1.222zm4.666-7.772l-2.333-2.332A2.009 2.009 0 0011.67 2H6a2 2 0 00-2 2v12a2 2 0 002 2h8c1.1 0 2-.9 2-2V6.331c0-.528-.21-1.037-.584-1.413zM14.5 16a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V4.004a.5.5 0 01.5-.5h5V6a1 1 0 001 1h2.472v9h.028z"}),"file-arrow-down":i.default.createElement("path",{d:"M16 6h-4V2l4 4zm-4 1h4v9.5a1.5 1.5 0 01-1.5 1.5h-9A1.5 1.5 0 014 16.5v-13A1.5 1.5 0 015.5 2H11v4c0 .553.447 1 1 1zm-.031 4.219L10.75 12.44V9.25a.75.75 0 00-1.5 0v3.19L8.003 11.22A.64.64 0 007.5 11a.75.75 0 00-.53 1.28l2.5 2.5a.75.75 0 001.06 0l2.5-2.5a.75.75 0 10-1.061-1.061z"}),"file-arrow-up-line":i.default.createElement("path",{d:"M9.469 8.969l-2.5 2.5a.75.75 0 101.06 1.06l1.221-1.22V14.5a.75.75 0 001.5 0v-3.19l1.22 1.22c.146.148.336.22.53.22a.75.75 0 00.53-1.28l-2.5-2.5a.754.754 0 00-1.061-.001zm5.947-4.05l-2.333-2.333A2.009 2.009 0 0011.67 2H6a2 2 0 00-2 2v12a2 2 0 002 2h8c1.1 0 2-.9 2-2V6.331c0-.528-.21-1.037-.584-1.413zM14.5 16a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V4.004a.5.5 0 01.5-.5h5V6a1 1 0 001 1h2.472v9h.028z"}),"file-arrow-up":i.default.createElement("path",{d:"M12 2v4h4l-4-4zm-1 4V2H5.5A1.5 1.5 0 004 3.5v13A1.5 1.5 0 005.5 18h9a1.5 1.5 0 001.5-1.5V7h-3.972C11.447 7 11 6.553 11 6zm2.003 6.753A.586.586 0 0112.5 13a.745.745 0 01-.53-.22l-1.22-1.22v3.19a.75.75 0 01-1.5 0v-3.19l-1.22 1.22a.75.75 0 11-1.06-1.062l2.5-2.5a.75.75 0 011.06 0l2.5 2.5c.292.294.292.77-.027 1.035z"}),"file-circle-plus-line":i.default.createElement("path",{d:"M2.972 16.5H9.89a5.578 5.578 0 001.412 1.478c-.097.013-.2.022-.303.022H3a2 2 0 01-2-2V4a2 2 0 012-2h5.172c.531 0 1.037.21 1.412.586l2.832 2.83c.375.375.584.88.584 1.412v1.378a5.447 5.447 0 00-1.5.685V7H9c-.553 0-1-.447-1-1V3.5H3a.5.5 0 00-.5.5v12a.5.5 0 00.5.5h-.028zm7-3c0-2.484 2.044-4.5 4.528-4.5a4.501 4.501 0 010 9c-2.484 0-4.528-2.016-4.528-4.5zM15 11.472a.52.52 0 00-.5-.5.52.52 0 00-.5.5v1.5h-1.5a.52.52 0 00-.5.5c0 .303.225.5.5.5H14v1.5c0 .303.225.5.5.5s.5-.197.5-.5v-1.5h1.5c.275 0 .5-.197.5-.5a.52.52 0 00-.5-.5H15v-1.5z"}),"file-circle-plus":i.default.createElement("path",{d:"M1 4a2 2 0 012-2h5v4c0 .553.447 1 1 1h4v1.206c-2.31.653-4 2.775-4 5.294a5.5 5.5 0 002.303 4.478c-.097.013-.2.022-.303.022H3a2 2 0 01-2-2V4zm8 2V2l4 4H9zm1 7.5a4.501 4.501 0 019 0 4.501 4.501 0 01-9 0zm5-2.028a.52.52 0 00-.5-.5.52.52 0 00-.5.5v1.5h-1.5a.52.52 0 00-.5.5c0 .303.225.5.5.5H14v1.5c0 .303.225.5.5.5s.5-.197.5-.5v-1.5h1.5c.275 0 .5-.197.5-.5a.52.52 0 00-.5-.5H15v-1.5z"}),"file-excel":i.default.createElement("path",{d:"M6 2c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h8c1.103 0 2-.897 2-2V7h-4c-.553 0-1-.447-1-1V2H6zm6 0v4h4l-4-4zM8.866 9.819L10 11.44l1.134-1.622a.748.748 0 011.044-.185.751.751 0 01.184 1.044l-1.446 2.072 1.45 2.069a.748.748 0 01-.185 1.043.748.748 0 01-1.043-.184L10 14.056l-1.134 1.622a.748.748 0 01-1.044.184.751.751 0 01-.184-1.043l1.446-2.069-1.45-2.069a.748.748 0 01.185-1.043.748.748 0 011.044.184l.003-.003z"}),"file-image":i.default.createElement("path",{d:"M11 6V2H5.5A1.5 1.5 0 004 3.5v13A1.5 1.5 0 005.5 18h9a1.5 1.5 0 001.5-1.5V7h-3.972C11.447 7 11 6.553 11 6zM7 9a1 1 0 110 2 1 1 0 010-2zm6.94 6.734a.496.496 0 01-.44.266h-7a.5.5 0 01-.416-.777l1.666-2.5c.066-.139.222-.223.416-.223.193 0 .323.084.416.223L9 13.35l1.417-2.126a.5.5 0 01.833-.001l2.667 4c.102.152.111.349.024.511zM12 2v4h4l-4-4z"}),"file-invoice-line":i.default.createElement("path",{d:"M6.5 10v2a1 1 0 001 1h5a1 1 0 001-1v-2a1 1 0 00-1-1h-5a1 1 0 00-1 1zm8.916-5.082l-2.333-2.332A2.009 2.009 0 0011.67 2H6a2 2 0 00-2 2v12a2 2 0 002 2h8c1.1 0 2-.9 2-2V6.331c0-.528-.21-1.037-.584-1.413zM14.5 16a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V4.004a.5.5 0 01.5-.5h5V6a1 1 0 001 1h2.472v9h.028zM7 6h2.5c.275 0 .5-.225.5-.5S9.775 5 9.5 5H7a.5.5 0 000 1zm0 2h2.5c.275 0 .5-.225.5-.5S9.775 7 9.5 7H7a.5.5 0 000 1zm6 6h-2.5a.5.5 0 100 1H13a.5.5 0 100-1z"}),"file-invoice":i.default.createElement("path",{d:"M12 2v4h4l-4-4zm1 8H7v2h6v-2zm-2-4V2H5.5A1.5 1.5 0 004 3.5v13A1.5 1.5 0 005.5 18h9a1.5 1.5 0 001.5-1.5V7h-3.972C11.447 7 11 6.553 11 6zM6 4.25c0-.137.113-.25.25-.25h2.5c.137 0 .25.113.25.25v.5c0 .137-.113.25-.25.25h-2.5A.252.252 0 016 4.75v-.5zm0 2c0-.138.113-.25.25-.25h2.5a.25.25 0 01.25.25v.5a.25.25 0 01-.25.25h-2.5A.251.251 0 016 6.75v-.5zm8 9.5c0 .137-.113.25-.25.25h-2.5a.25.25 0 01-.25-.25v-.5c0-.137.113-.25.25-.25h2.5c.137 0 .25.113.25.25v.5zm0-6.25v3c0 .277-.223.5-.5.5h-7a.498.498 0 01-.5-.5v-3c0-.278.223-.5.5-.5h7c.278 0 .5.222.5.5z"}),"file-line":i.default.createElement("path",{d:"M4 4a2 2 0 012-2h5.172c.531 0 1.037.21 1.412.586l2.832 2.83c.375.375.584.88.584 1.412V16c0 1.103-.897 2-2 2H6a2 2 0 01-2-2V4zm10.5 12V7H12c-.553 0-1-.447-1-1V3.5H6a.5.5 0 00-.5.5v12a.5.5 0 00.5.5h8c.275 0 .5-.225.5-.5z"}),"file-lines-line":i.default.createElement("path",{d:"M15.416 4.918l-2.333-2.332A2.009 2.009 0 0011.67 2H6a2 2 0 00-2 2v12a2 2 0 002 2h8c1.1 0 2-.9 2-2V6.33c0-.528-.21-1.037-.584-1.413zM14.5 16a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V4.004a.5.5 0 01.5-.5h5V6a1 1 0 001 1h2.472v9h.028zM7 10.75c0 .415.338.75.75.75h4.5c.416 0 .75-.335.75-.75a.748.748 0 00-.75-.75h-4.5a.752.752 0 00-.75.75zM12.25 13h-4.5a.751.751 0 000 1.5h4.5a.75.75 0 000-1.5z"}),"file-lines":i.default.createElement("path",{d:"M12 2v4h4l-4-4zm-1 4V2H5.5A1.5 1.5 0 004 3.5v13A1.5 1.5 0 005.5 18h9a1.5 1.5 0 001.5-1.5V7h-3.972C11.447 7 11 6.553 11 6zm1.5 9h-5a.501.501 0 01-.5-.5c0-.275.225-.5.5-.5h5a.5.5 0 110 1zm0-2h-5a.501.501 0 01-.5-.5c0-.275.225-.5.5-.5h5a.5.5 0 110 1zm.5-2.5c0 .275-.225.5-.5.5h-5a.501.501 0 01-.5-.5c0-.275.225-.5.5-.5h5c.275 0 .5.225.5.5z"}),"file-pdf-line":i.default.createElement("path",{d:"M4 16.5h1.5V18H4c-1.103 0-2-.897-2-2V4c0-1.103.897-2 2-2h5.172a2 2 0 011.415.584l2.829 2.828A2 2 0 0114 6.829V11.5h-1.5V7H10c-.553 0-1-.447-1-1V3.5H4c-.275 0-.5.225-.5.5v12c0 .275.225.5.5.5zM7.5 13h1a1.751 1.751 0 010 3.5H8v1c0 .275-.225.5-.5.5a.501.501 0 01-.5-.5v-4c0-.275.225-.5.5-.5zm1 2.5c.416 0 .75-.334.75-.75A.748.748 0 008.5 14H8v1.5h.5zm3-2.5h1a1.5 1.5 0 011.5 1.5v2a1.5 1.5 0 01-1.5 1.5h-1a.501.501 0 01-.5-.5v-4c0-.275.225-.5.5-.5zm1 4c.275 0 .5-.225.5-.5v-2c0-.275-.225-.5-.5-.5H12v3h.5zm2.5-3.5c0-.275.225-.5.5-.5H17c.275 0 .5.225.5.5s-.225.5-.5.5h-1v1h1c.275 0 .5.225.5.5s-.225.5-.5.5h-1v1.5c0 .275-.225.5-.5.5a.501.501 0 01-.5-.5v-4z"}),"file-pdf":i.default.createElement("path",{d:"M2 4c0-1.103.897-2 2-2h5v4c0 .553.447 1 1 1h4v4.5H7.5c-1.103 0-2 .897-2 2V18H4c-1.103 0-2-.897-2-2V4zm12 2h-4V2l4 4zm-6.5 7h1a1.751 1.751 0 010 3.5H8v1c0 .275-.225.5-.5.5a.501.501 0 01-.5-.5v-4c0-.275.225-.5.5-.5zm1 2.5c.416 0 .75-.334.75-.75A.748.748 0 008.5 14H8v1.5h.5zm3-2.5h1a1.5 1.5 0 011.5 1.5v2a1.5 1.5 0 01-1.5 1.5h-1a.501.501 0 01-.5-.5v-4c0-.275.225-.5.5-.5zm1 4c.275 0 .5-.225.5-.5v-2c0-.275-.225-.5-.5-.5H12v3h.5zm2.5-3.5c0-.275.225-.5.5-.5H17c.275 0 .5.225.5.5s-.225.5-.5.5h-1v1h1c.275 0 .5.225.5.5s-.225.5-.5.5h-1v1.5c0 .275-.225.5-.5.5a.501.501 0 01-.5-.5v-4z"}),"file-powerpoint-line":i.default.createElement("path",{d:"M15.416 4.918l-2.333-2.332A2.009 2.009 0 0011.67 2H6a2 2 0 00-2 2v12a2 2 0 002 2h8c1.1 0 2-.9 2-2V6.331c0-.528-.21-1.037-.584-1.413zM14.5 16a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V4.004a.5.5 0 01.5-.5h5V6a1 1 0 001 1h2.472v9h.028zm-4.25-7H8c-.275 0-.5.225-.5.5v5.25a.75.75 0 001.5 0v-1h1.375a2.378 2.378 0 002.365-2.593C12.628 9.912 11.5 9 10.25 9zm.125 3.25H9V10.5h1.375a.876.876 0 010 1.75z"}),"file-powerpoint":i.default.createElement("path",{d:"M12 2v4h4l-4-4zm-1 4V2H5.5A1.5 1.5 0 004 3.5v13A1.5 1.5 0 005.5 18h9a1.5 1.5 0 001.5-1.5V7h-3.972C11.447 7 11 6.553 11 6zm1.738 5.628a2.379 2.379 0 01-2.363 2.622H9v1.25c0 .275-.225.5-.5.5H8a.5.5 0 01-.5-.5V10a.5.5 0 01.5-.5h2.235c1.243 0 2.378.89 2.503 2.128zM9 12.75h1.375a.876.876 0 000-1.75H9v1.75z"}),"file-slash":i.default.createElement(i.default.Fragment,null,i.default.createElement("g",{clipPath:"url(#clip0_19178_156406)"},i.default.createElement("path",{d:"M1.213 2.16a.75.75 0 00-.925 1.18l18.5 14.5a.75.75 0 00.925-1.18L16 13.75V7h-4c-.553 0-1-.447-1-1V2H6c-1.103 0-2 .897-2 2v.344L1.213 2.159zm14.343 15.096L4 8.15V16c0 1.103.897 2 2 2h8c.628 0 1.19-.29 1.556-.744zM16 6l-4-4v4h4z"})),i.default.createElement("defs",null,i.default.createElement("clipPath",{id:"clip0_19178_156406"},i.default.createElement("path",{d:"M0 0h20v20H0z"})))),"file-word-line":i.default.createElement("path",{d:"M15.416 4.918l-2.333-2.332A2.009 2.009 0 0011.67 2H6a2 2 0 00-2 2v12a2 2 0 002 2h8c1.1 0 2-.9 2-2V6.331c0-.528-.21-1.037-.584-1.413zM14.5 16a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V4.004a.5.5 0 01.5-.5h5V6a1 1 0 001 1h2.472v9h.028zm-3.794-6.25a.748.748 0 00-1.413 0l-.771 2.19-.81-2.426a.756.756 0 00-.95-.476.751.751 0 00-.474.95l1.5 4.5a.751.751 0 001.42.012L10 12.253l.794 2.247a.748.748 0 001.418-.013l1.5-4.5a.75.75 0 00-1.423-.475l-.81 2.427-.773-2.189z"}),"file-word":i.default.createElement("path",{d:"M11 6V2H5.5A1.5 1.5 0 004 3.5v13A1.5 1.5 0 005.5 18h9a1.5 1.5 0 001.5-1.5V7h-3.972C11.447 7 11 6.553 11 6zm1.797 3.5h.73c.241 0 .42.224.366.46l-1.327 5.75a.374.374 0 01-.363.29h-.914a.375.375 0 01-.362-.278L10 12.284l-.925 3.41c-.072.193-.194.306-.362.306h-.916a.375.375 0 01-.365-.29L6.105 9.96a.377.377 0 01.366-.46h.73c.175 0 .327.12.366.29l.74 3.21.868-3.222a.374.374 0 01.362-.278h.926c.17 0 .318.114.362.278L11.694 13l.74-3.21a.352.352 0 01.363-.29zM12 2v4h4l-4-4z"}),"file-xmark-line":i.default.createElement("path",{d:"M15.416 4.918l-2.333-2.332A2.009 2.009 0 0011.67 2H6a2 2 0 00-2 2v12a2 2 0 002 2h8c1.1 0 2-.9 2-2V6.331c0-.528-.21-1.037-.584-1.413zM14.5 16a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V4.004a.5.5 0 01.5-.5h5V6a1 1 0 001 1h2.5v9zm-3.031-6.531L10 10.94 8.503 9.469a.75.75 0 10-1.06 1.06L8.94 12l-1.47 1.47a.75.75 0 101.06 1.06L10 13.06l1.47 1.47a.75.75 0 101.06-1.062L11.06 12l1.47-1.47a.75.75 0 00-1.061-1.061z"}),"file-xmark":i.default.createElement("path",{d:"M12 2v4h4l-4-4zm-1 4V2H5.5A1.5 1.5 0 004 3.5v13A1.5 1.5 0 005.5 18h9a1.5 1.5 0 001.5-1.5V7h-3.972C11.447 7 11 6.553 11 6zm1.503 4.503L11.06 12l1.47 1.47a.75.75 0 11-1.06 1.06L10 13.06l-1.47 1.47a.75.75 0 11-1.06-1.062L8.94 12 7.47 10.503a.75.75 0 111.06-1.06L10 10.94l1.47-1.47a.75.75 0 011.06 0c.293.293.292.767-.027 1.032z"}),file:i.default.createElement("path",{d:"M4 4a2 2 0 012-2h5v4c0 .553.447 1 1 1h4v9c0 1.103-.897 2-2 2H6a2 2 0 01-2-2V4zm8 2V2l4 4h-4z"}),"files-custom":i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{d:"M17 5h-3V2l3 3z"}),i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.5 2H13v3c0 .55.45 1 1 1h3v7.5a1.5 1.5 0 01-1.5 1.5h-8A1.5 1.5 0 016 13.5v-10A1.5 1.5 0 017.5 2zm1 6.75c0 .416.338.75.75.75h4.5c.416 0 .75-.334.75-.75a.748.748 0 00-.75-.75h-4.5a.752.752 0 00-.75.75zM13.75 11h-4.5a.751.751 0 000 1.5h4.5a.75.75 0 000-1.5z"}),i.default.createElement("path",{d:"M6.75 18h6.5a.75.75 0 100-1.5h-6.5c-1.24 0-2.25-1.01-2.25-2.25v-8.5a.751.751 0 00-1.5 0v8.5A3.754 3.754 0 006.75 18z"})),"files-line":i.default.createElement("path",{d:"M16.416 4.918l-2.333-2.332A2.009 2.009 0 0012.67 2H8a2 2 0 00-2 2v9a2 2 0 002 2h7c1.1 0 2-.9 2-2V6.331c0-.528-.21-1.037-.584-1.413zM15.5 13a.5.5 0 01-.5.5H8a.5.5 0 01-.5-.5V4.004a.5.5 0 01.5-.5h4V6a1 1 0 001 1h2.5v6zm-2.25 5h-6.5A3.754 3.754 0 013 14.25v-8.5a.751.751 0 011.5 0v8.5c0 1.24 1.01 2.25 2.25 2.25h6.5a.75.75 0 010 1.5z"}),files:i.default.createElement("path",{d:"M14 2v3h3l-3-3zm-1 3V2H7.5A1.5 1.5 0 006 3.5v10A1.5 1.5 0 007.5 15h8a1.5 1.5 0 001.5-1.5V6h-3c-.55 0-1-.45-1-1zm.25 13h-6.5A3.754 3.754 0 013 14.25v-8.5a.751.751 0 011.5 0v8.5c0 1.24 1.01 2.25 2.25 2.25h6.5a.75.75 0 010 1.5z"}),"filter-list":i.default.createElement("path",{d:"M3.25 4a1.248 1.248 0 00-.928 2.084L5.5 9.62V13.5c0 .316.147.613.4.8l2 1.5a1 1 0 001.6-.8V9.619l3.178-3.531A1.25 1.25 0 0011.75 4h-8.5zM13 14a.999.999 0 100 2h4a.999.999 0 100-2h-4zm-1-4c0 .553.447 1 1 1h4a.999.999 0 100-2h-4c-.553 0-1 .447-1 1zm3-6a.999.999 0 100 2h2a.999.999 0 100-2h-2z"}),firefox:i.default.createElement("path",{d:"M17.735 9.546a1.884 1.884 0 01-.008-.146v-.004l-.01-.146v-.004a7.683 7.683 0 00-.23-1.286c0-.003 0-.003-.003-.007l-.034-.125c-.004-.008-.004-.015-.008-.019l-.033-.116c-.004-.008-.004-.019-.008-.026a3.89 3.89 0 00-.034-.11l-.01-.03a1.228 1.228 0 00-.038-.11l-.011-.033c-.012-.034-.027-.071-.038-.105a.267.267 0 00-.011-.031c-.015-.034-.026-.071-.041-.105l-.012-.026c-.015-.038-.031-.072-.045-.11 0-.003-.004-.007-.004-.01a7.023 7.023 0 00-.156-.357l-.011-.022c-.015-.031-.026-.056-.041-.083l-.023-.048c-.011-.027-.026-.05-.037-.075-.011-.02-.019-.038-.031-.057a.465.465 0 01-.038-.071l-.034-.06a1.145 1.145 0 01-.037-.067.549.549 0 00-.038-.063c-.011-.022-.026-.041-.037-.062-.011-.022-.026-.042-.038-.063-.011-.021-.026-.041-.037-.06-.012-.019-.026-.045-.041-.067a.488.488 0 00-.038-.057l-.045-.066a.488.488 0 00-.038-.057l-.048-.07-.034-.05-.056-.078c-.011-.015-.019-.027-.032-.042-.03-.04-.056-.078-.086-.116a7.76 7.76 0 00-.735-.832 5.835 5.835 0 00-.571-.522 5.475 5.475 0 00-.39-.308 5.074 5.074 0 00-.769-.472 7.937 7.937 0 00-1.957-.728c-.06-.01-.12-.026-.176-.037h-.004c-.031-.004-.056-.011-.086-.015a7.385 7.385 0 00-1.188-.125h-.332a7.33 7.33 0 00-1.421.156c-1.05.221-1.976.664-2.591 1.219-.034.031-.06.052-.075.067l-.015.015h.004a.004.004 0 00.004-.003l-.004.003a.013.013 0 01.007-.003c.458-.274 1.092-.5 1.545-.612l.184-.045c.011-.003.026-.003.038-.007l.161-.034c.007 0 .019-.004.026-.004 2.006-.365 4.143.235 5.633 1.656.321.305.603.65.84 1.024.949 1.538.859 3.472.12 4.612-1.077 1.656-3.48 2.227-4.969.777a2.631 2.631 0 01-.799-1.844 2.314 2.314 0 01.195-.969c.053-.12.409-.802.57-.768-.409-.087-1.173.082-1.71.88-.48.717-.453 1.82-.156 2.603a4.153 4.153 0 01-.378-1.226c-.383-2.58 1.353-4.782 2.947-5.329-.859-.75-3.015-.697-4.616.48-.934.688-1.601 1.662-1.954 2.824.053-.652.3-1.627.807-2.621-.537.277-1.22 1.156-1.557 1.965-.487 1.17-.656 2.568-.502 3.9l.034.3a7.765 7.765 0 007.649 6.449 7.763 7.763 0 007.76-7.763c-.004-.142-.008-.284-.015-.423z"}),"flask-vial":i.default.createElement("path",{d:"M5 15.828A3 3 0 011 13V4a1 1 0 010-2h6a1 1 0 110 2v7.684L5.469 14.17A3.18 3.18 0 005 15.829zM3 7h2V4H3v3zm13-5a1 1 0 110 2v4.716l3.678 5.978A2.17 2.17 0 0117.831 18H8.17c-1.197 0-2.197-.972-2.197-2.169 0-.403.14-.793.35-1.137l3.65-5.978V4c-.525 0-1-.448-1-1s.475-1 1-1H16zm-4 2v5c0 .184-.05.366-.147.525L10.328 12h5.344l-1.525-2.475A1.009 1.009 0 0114 9V4h-2z"}),"folder-gear-custom":i.default.createElement("path",{d:"M0 5c0-1.103.897-2 2-2h4c.628 0 1.222.297 1.6.8l.6.8c.188.253.484.4.8.4h5c1.103 0 2 .897 2 2v1h-1.253c-.803 0-1.481.54-1.688 1.281-.74-.19-1.55.125-1.953.819l-.75 1.3a1.747 1.747 0 00.266 2.1 1.747 1.747 0 00-.266 2.1l.75 1.3c.019.034.04.069.063.1H2c-1.103 0-2-.897-2-2V5zm11.35 6.9l.75-1.3a.75.75 0 011.025-.275l.25.144c.153.087.34.078.494-.01a.494.494 0 00.256-.421V9.75c0-.416.334-.75.75-.75l.003-.006h1.5c.416 0 .75.334.75.75v.293c0 .175.103.332.253.42a.491.491 0 00.49.009l.257-.147a.75.75 0 011.025.275l.75 1.3a.75.75 0 01-.275 1.025l-.278.16a.463.463 0 00-.225.405c0 .178.084.347.238.435l.262.153a.75.75 0 01.275 1.025l-.75 1.3a.75.75 0 01-1.025.275l-.278-.16a.477.477 0 00-.475.01.477.477 0 00-.247.406v.322c0 .416-.334.75-.75.75h-1.5a.748.748 0 01-.75-.75v-.313c0-.171-.1-.325-.247-.409a.483.483 0 00-.478-.01l-.272.157a.75.75 0 01-1.025-.275l-.75-1.3a.753.753 0 01.272-1.025l.25-.144a.505.505 0 00.244-.44.47.47 0 00-.228-.413l-.266-.153a.75.75 0 01-.275-1.025zm2.975.84a1.496 1.496 0 000 1.5c.269.466.763.75 1.3.75.538 0 1.031-.284 1.3-.75a1.498 1.498 0 00-1.3-2.25c-.537 0-1.031.285-1.3.75z"}),"folder-line":i.default.createElement("path",{d:"M15.973 5h-5.379L9.085 3.586A1.994 1.994 0 007.673 3h-3.7a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V7c0-1.103-.87-2-2-2zm.5 10a.5.5 0 01-.5.5h-12a.5.5 0 01-.5-.5V5a.5.5 0 01.5-.5h3.672c.133 0 .259.052.353.146L9.973 6.5h6a.5.5 0 01.5.5v8z"}),"folder-plus":i.default.createElement("path",{d:"M16.5 5h-6l-2-2h-5A1.5 1.5 0 002 4.5v11A1.5 1.5 0 003.5 17h13a1.5 1.5 0 001.5-1.5v-9A1.5 1.5 0 0016.5 5zm-1 7.722h-1.75v1.75c-.028.444-.334.778-.75.778a.72.72 0 01-.722-.722v-1.806h-1.806A.718.718 0 019.75 12a.72.72 0 01.722-.722h1.75V9.472A.788.788 0 0113 8.75c.416 0 .722.336.722.722v1.778h1.75c.444 0 .778.334.778.75s-.334.722-.75.722z"}),"folder-user":i.default.createElement("path",{d:"M16.5 5h-6l-2-2h-5A1.5 1.5 0 002 4.5v11A1.5 1.5 0 003.5 17h13a1.5 1.5 0 001.5-1.5v-9A1.5 1.5 0 0016.5 5zM12 8a2 2 0 110 4 2 2 0 010-4zm3 7H9a.5.5 0 01-.5-.5A1.5 1.5 0 0110 13h4a1.5 1.5 0 011.5 1.5c0 .275-.225.5-.5.5z"}),"folder-xmark":i.default.createElement("path",{d:"M16.5 5h-6l-2-2h-5A1.5 1.5 0 002 4.5v11A1.5 1.5 0 003.5 17h13a1.5 1.5 0 001.5-1.5v-9A1.5 1.5 0 0016.5 5zm-.997 8.469a.75.75 0 11-1.06 1.06L13 13.06l-1.47 1.47a.75.75 0 11-1.06-1.06L11.94 12l-1.471-1.497a.75.75 0 111.06-1.06L13 10.94l1.47-1.47a.75.75 0 111.06 1.06L14.06 12l1.443 1.469z"}),folder:i.default.createElement("path",{d:"M18 6.5v9a1.5 1.5 0 01-1.5 1.5h-13A1.5 1.5 0 012 15.5v-11A1.5 1.5 0 013.5 3h5l2 2h6A1.5 1.5 0 0118 6.5z"}),folders:i.default.createElement("path",{d:"M17.5 5h-6l-2-2h-4A1.5 1.5 0 004 4.5v8A1.5 1.5 0 005.5 14h12a1.5 1.5 0 001.5-1.5v-6A1.5 1.5 0 0017.5 5zm-2.25 12H4.75A3.754 3.754 0 011 13.25v-7.5a.751.751 0 011.5 0v7.5c0 1.24 1.01 2.25 2.25 2.25h10.5a.75.75 0 010 1.5z"}),"font-case":i.default.createElement(i.default.Fragment,null,i.default.createElement("g",{clipPath:"url(#clip0_11644_159802)"},i.default.createElement("path",{d:"M6.437 3.65A1.004 1.004 0 005.5 3c-.416 0-.79.26-.938.65l-4.5 12a1.002 1.002 0 00.585 1.287 1.001 1.001 0 001.287-.584L3.006 13.5h4.988l1.068 2.85a1 1 0 001.872-.703L6.437 3.65zm.807 7.85H3.756L5.5 6.847 7.244 11.5zM19 7c-.406 0-.753.24-.913.588A4 4 0 0012 11v2a4 4 0 006.087 3.413A1 1 0 0019 17c.553 0 1-.447 1-1V8c0-.553-.447-1-1-1zm-1 4v2c0 1.103-.897 2-2 2s-2-.897-2-2v-2c0-1.103.897-2 2-2s2 .897 2 2z"})),i.default.createElement("defs",null,i.default.createElement("clipPath",{id:"clip0_11644_159802"},i.default.createElement("path",{d:"M0 0h20v20H0z"})))),gear:i.default.createElement("path",{d:"M17.496 7.206a.71.71 0 01-.197.769l-1.353 1.231a6.042 6.042 0 010 1.588l1.353 1.231c.213.197.3.5.197.769a7.93 7.93 0 01-.49 1.072l-.147.253a8.23 8.23 0 01-.69.978.715.715 0 01-.766.212l-1.741-.556a6.83 6.83 0 01-1.375.797l-.39 1.784c-.063.282-.282.482-.57.557a8.164 8.164 0 01-2.656 0c-.287-.075-.506-.275-.568-.557l-.391-1.784a6.14 6.14 0 01-1.375-.797l-1.74.556a.713.713 0 01-.765-.212 8.199 8.199 0 01-.691-.978l-.146-.253c-.19-.341-.355-.7-.494-1.072a.71.71 0 01.199-.769l1.352-1.231a6.044 6.044 0 010-1.588L2.7 7.975a.709.709 0 01-.199-.769c.139-.372.304-.731.494-1.072l.145-.253c.207-.344.438-.668.692-.976a.71.71 0 01.766-.213l1.739.555a6.01 6.01 0 011.375-.796l.39-1.784a.709.709 0 01.57-.557 8.044 8.044 0 012.656 0 .709.709 0 01.568.557l.391 1.784a6.67 6.67 0 011.375.796l1.74-.555a.711.711 0 01.766.213c.253.308.485.632.69.976l.148.253c.187.341.353.7.49 1.072zM10 12.5c1.38 0 2.5-1.119 2.5-2.528 0-1.353-1.12-2.5-2.5-2.5-1.382 0-2.5 1.147-2.5 2.5A2.505 2.505 0 0010 12.5z"}),gears:i.default.createElement("path",{d:"M8.947 6.847a4.018 4.018 0 010 1.306l.694.619c.218.197.309.481.193.781-.071.138-.15.328-.237.484l-.097.17c-.122.155-.197.305-.306.452a.685.685 0 01-.772.222l-.884-.29a3.93 3.93 0 01-1.132.656l-.215.906a.637.637 0 01-.553.56 5.373 5.373 0 01-1.275 0c-.294-.038-.547-.27-.582-.56l-.215-.906a4.224 4.224 0 01-1.105-.656l-.882.29a.686.686 0 01-.772-.222 5.56 5.56 0 01-.309-.456l-.094-.165a5.17 5.17 0 01-.238-.485.68.68 0 01.194-.781l.693-.619c-.035-.212-.081-.431-.081-.681 0-.194.046-.413.081-.625L.36 6.228c-.22-.225-.31-.51-.194-.781.071-.194.15-.329.237-.486l.095-.164c.095-.158.198-.31.309-.457a.69.69 0 01.772-.222l.882.291a4.249 4.249 0 011.105-.654l.215-.909c.035-.29.288-.522.582-.558a5.287 5.287 0 011.275 0 .634.634 0 01.553.558l.215.909a3.95 3.95 0 011.132.654l.884-.29a.69.69 0 01.772.221c.11.146.184.298.306.455l.097.168c.087.157.166.318.237.484.116.272.025.556-.193.781l-.694.619zM5 5.972c-.828 0-1.5.7-1.5 1.5 0 .856.672 1.5 1.5 1.5s1.5-.644 1.5-1.5c0-.8-.672-1.5-1.5-1.5zm10.153 10.975a4.103 4.103 0 01-1.306 0l-.619.694c-.225.218-.51.309-.781.193a5.363 5.363 0 01-.484-.237l-.17-.097c-.155-.122-.305-.197-.452-.306a.685.685 0 01-.222-.772l.29-.885a3.926 3.926 0 01-.656-1.13l-.906-.216a.637.637 0 01-.56-.554 5.373 5.373 0 010-1.274c.038-.294.27-.547.56-.582l.906-.215c.156-.388.378-.77.656-1.104l-.29-.884a.685.685 0 01.222-.772c.147-.11.3-.24.456-.31l.165-.093c.157-.087.291-.165.485-.237.272-.116.556-.025.781.193l.619.694a4.094 4.094 0 011.306 0l.619-.694a.684.684 0 01.781-.193c.166.072.328.15.485.237l.165.094c.156.069.31.2.456.31.238.177.316.49.222.771l-.29.885c.278.334.5.715.656 1.103l.906.215c.29.035.522.288.56.582a5.373 5.373 0 010 1.274.637.637 0 01-.56.554l-.906.215a3.926 3.926 0 01-.656 1.131l.29.885a.685.685 0 01-.222.772c-.146.11-.296.184-.453.306l-.168.097c-.157.087-.347.165-.485.237a.684.684 0 01-.781-.193l-.619-.694zM16 13a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z"}),gift:i.default.createElement("path",{d:"M7.953 4.15L9.041 6H6.75a1.25 1.25 0 110-2.5h.069c.465 0 .9.247 1.134.65zM4 4.75c0 .45.11.875.3 1.25H3c-.553 0-1 .447-1 1v2c0 .553.447 1 1 1h14c.553 0 1-.447 1-1V7c0-.553-.447-1-1-1h-1.3a2.75 2.75 0 00-2.45-4h-.069a2.82 2.82 0 00-2.428 1.388L10 4.671 9.247 3.39A2.816 2.816 0 006.819 2H6.75A2.75 2.75 0 004 4.75zm10.5 0c0 .69-.56 1.25-1.25 1.25h-2.29l1.087-1.85c.237-.403.669-.65 1.134-.65h.069c.69 0 1.25.56 1.25 1.25zM3 11v5.5A1.5 1.5 0 004.5 18H9v-7H3zm8 7h4.5a1.5 1.5 0 001.5-1.5V11h-6v7z"}),github:i.default.createElement("path",{d:"M7.352 14.883c0 .066-.075.12-.168.12-.107.01-.18-.044-.18-.12 0-.066.073-.119.167-.119.097-.01.18.043.18.12zm-1.004-.149c-.022.066.042.143.14.162.083.034.18 0 .2-.066.018-.066-.043-.142-.14-.172-.083-.023-.177.01-.2.076zm1.426-.056c-.093.023-.158.086-.148.162.01.066.093.11.19.086.094-.023.158-.086.149-.152-.01-.063-.097-.106-.19-.096zM9.897 2C5.423 2 2 5.484 2 10.073c0 3.669 2.252 6.808 5.468 7.913.413.077.558-.185.558-.4 0-.205-.01-1.336-.01-2.031 0 0-2.258.496-2.732-.986 0 0-.368-.963-.897-1.211 0 0-.739-.52.052-.51 0 0 .803.067 1.245.854.706 1.277 1.89.91 2.351.691.075-.529.284-.896.517-1.114-1.804-.206-3.623-.473-3.623-3.656 0-.91.245-1.367.761-1.949-.084-.215-.358-1.102.084-2.246C6.448 5.213 8 6.32 8 6.32a7.402 7.402 0 012.026-.281c.687 0 1.38.096 2.026.28 0 0 1.551-1.11 2.225-.892.442 1.148.168 2.031.084 2.246.516.586.832 1.042.832 1.949 0 3.192-1.9 3.447-3.703 3.656.297.26.549.757.549 1.535 0 1.115-.01 2.494-.01 2.766 0 .215.148.476.558.4C15.813 16.88 18 13.742 18 10.073 18 5.483 14.371 2 9.897 2zM5.135 13.41c-.041.034-.032.11.023.173.052.053.126.076.168.033.042-.033.032-.11-.023-.172-.051-.053-.126-.076-.168-.033zm-.348-.267c-.022.043.01.096.074.129.052.033.116.023.139-.023.023-.043-.01-.096-.074-.13-.065-.02-.116-.01-.139.024zm1.045 1.178c-.051.043-.032.142.042.205.074.076.168.086.21.033.042-.043.022-.142-.042-.205-.071-.076-.168-.086-.21-.033zm-.367-.487c-.052.034-.052.12 0 .196.051.076.138.109.18.076.052-.043.052-.13 0-.205-.045-.076-.129-.11-.18-.067z"}),"globe-line":i.default.createElement("path",{d:"M10 2a8 8 0 018 8 8 8 0 01-8 8 8 8 0 01-8-8 8 8 0 018-8zm0 14.5c.231 0 .816-.225 1.488-1.512.274-.554.484-1.226.687-1.988h-4.35c.175.762.413 1.434.687 1.988C9.156 16.274 9.77 16.5 10 16.5zm-2.422-5h4.844a14.453 14.453 0 000-3H7.578a14.454 14.454 0 000 3zM12.175 7c-.203-.763-.413-1.434-.688-1.986C10.817 3.726 10.232 3.5 10 3.5c-.231 0-.844.226-1.488 1.514A9.003 9.003 0 007.825 7h4.35zm1.756 1.5c.044.484.069.988.069 1.5s-.025 1.016-.069 1.5h2.394A6.42 6.42 0 0016.5 10a6.42 6.42 0 00-.175-1.5h-2.394zm-1.24-4.418c.44.801.79 1.796 1.018 2.918h2.06a6.528 6.528 0 00-3.078-2.918zm-5.382 0A6.527 6.527 0 004.232 7h2.059c.228-1.122.578-2.117 1.018-2.918zM3.5 10c0 .516.06 1.019.174 1.5H6.07A16.71 16.71 0 016 10c0-.512.025-1.016.069-1.5H3.674A6.52 6.52 0 003.5 10zm12.269 3h-2.06c-.228 1.122-.578 2.116-1.018 2.919A6.532 6.532 0 0015.769 13zM6.29 13H4.232a6.532 6.532 0 003.077 2.919c-.44-.803-.79-1.797-1.018-2.919z"}),globe:i.default.createElement("path",{d:"M13 10c0 .694-.037 1.363-.103 2H7.103c-.066-.637-.131-1.306-.131-2s.065-1.363.131-2h5.794c.066.637.103 1.306.103 2zm4.747-2c.166.64.253 1.31.253 2s-.087 1.36-.253 2H13.9a20.174 20.174 0 000-4h3.847zm-.328-1h-3.647c-.313-1.996-.931-3.668-1.728-4.736A8.018 8.018 0 0117.419 7zm-4.66 0H7.241c.19-1.138.484-2.144.843-2.958.329-.738.694-1.273 1.047-1.61.35-.333.64-.432.869-.432.228 0 .519.1.869.432.353.337.719.872 1.047 1.61.359.814.653 1.82.843 2.958zM2.582 7a8.016 8.016 0 015.374-4.736C7.16 3.332 6.541 5.004 6.228 7H2.582zM6.1 8a19.612 19.612 0 00-.128 2c0 .66.062 1.356.128 2H2.252a8.022 8.022 0 010-4H6.1zm1.984 7.956c-.359-.812-.653-1.819-.843-2.956h5.518c-.19 1.137-.484 2.144-.843 2.956-.329.74-.694 1.275-1.047 1.613-.35.331-.64.431-.897.431-.2 0-.49-.1-.84-.431-.354-.338-.72-.872-1.048-1.613zm-.128 1.782A8.019 8.019 0 012.582 13h3.646c.313 1.997.931 3.669 1.728 4.738zm4.088 0c.797-1.07 1.415-2.741 1.728-4.738h3.647a8.02 8.02 0 01-5.375 4.738z"}),"google-color":i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 10.182c0-.567-.052-1.113-.148-1.637h-7.689v3.095h4.394c-.19 1-.765 1.847-1.63 2.415v2.007h2.639C17.109 14.669 18 12.618 18 10.182z",fill:"#4285F4"}),i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.163 18c2.204 0 4.052-.716 5.403-1.938l-2.638-2.007c-.731.48-1.666.763-2.765.763-2.126 0-3.926-1.407-4.567-3.298H2.868v2.073C4.212 16.207 6.972 18 10.163 18z",fill:"#34A853"}),i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.596 11.52A4.721 4.721 0 015.34 10c0-.527.092-1.04.256-1.52V6.407H2.868a7.867 7.867 0 000 7.186l2.728-2.073z",fill:"#FBBC05"}),i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.163 5.182c1.199 0 2.275.403 3.12 1.196l2.342-2.294C14.211 2.793 12.364 2 10.163 2c-3.19 0-5.952 1.793-7.295 4.407L5.596 8.48c.641-1.89 2.441-3.298 4.567-3.298z",fill:"#EA4335"})),"google-drive-color":i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{d:"M2.36 15.713l.795 1.364c.165.287.402.513.68.677l2.835-4.882H1c0 .318.082.636.247.923l1.114 1.918z",fill:"#0066DA"}),i.default.createElement("path",{d:"M10 7.128L7.165 2.246c-.278.164-.516.39-.68.677L1.247 11.95c-.161.28-.247.599-.247.923h5.67L10 7.128z",fill:"#00AC47"}),i.default.createElement("path",{d:"M16.165 17.754c.278-.164.515-.39.68-.677l.33-.564 1.578-2.718c.165-.287.247-.605.247-.923h-5.67l1.206 2.359 1.629 2.523z",fill:"#EA4335"}),i.default.createElement("path",{d:"M10 7.128l2.835-4.882A1.82 1.82 0 0011.907 2H8.093c-.33 0-.65.092-.928.246L10 7.128z",fill:"#00832D"}),i.default.createElement("path",{d:"M13.33 12.872H6.67l-2.835 4.882c.278.164.598.246.928.246h10.474c.33 0 .65-.092.928-.246l-2.835-4.882z",fill:"#2684FC"}),i.default.createElement("path",{d:"M16.134 7.436l-2.619-4.513a1.868 1.868 0 00-.68-.677L10 7.128l3.33 5.744h5.66c0-.318-.083-.636-.248-.923l-2.608-4.513z",fill:"#FFBA00"})),"google-drive-exclamation":i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{d:"M15.5 18a4.501 4.501 0 010-9 4.501 4.501 0 010 9zm0-1.5c.416 0 .75-.334.75-.75a.748.748 0 00-.75-.75.748.748 0 00-.75.75c0 .416.334.75.75.75zm0-6c-.275 0-.5.225-.5.5v2.5c0 .275.225.5.5.5s.5-.225.5-.5V11c0-.275-.225-.5-.5-.5z",fill:"#CF4543"}),i.default.createElement("path",{d:"M11.17 10.108L6.481 2h5.038L15 8.022a5.492 5.492 0 00-3.83 2.086zM10.345 11.578A5.49 5.49 0 0010 13.5c0 .9.216 1.75.6 2.5H4.778l2.519-4.422h3.048zM1 11.578l4.816-8.472 2.59 4.419L3.52 16 1 11.578z",fill:"#B8BCBE"})),"google-drive":i.default.createElement("path",{d:"M12.594 11.84L7.48 3h5.038l5.112 8.84h-5.037zm-4.297.738L5.778 17h9.703L18 12.578H8.297zM6.816 4.106L2 12.578 4.519 17l4.887-8.475-2.59-4.419z"}),"google-play":i.default.createElement("path",{d:"M12.166 9.322L5.269 2.406l8.775 5.038-1.878 1.878zM3.469 2c-.406.212-.678.6-.678 1.103v13.79c0 .504.272.891.678 1.104l8.019-8L3.469 2zm13.288 7.05l-1.841-1.066L12.863 10l2.053 2.016 1.878-1.066c.563-.447.563-1.453-.037-1.9zM5.269 17.594l8.775-5.038-1.878-1.878-6.897 6.916z"}),google:i.default.createElement("path",{d:"M17.625 10.181c0 4.422-3.028 7.569-7.5 7.569A7.74 7.74 0 012.375 10a7.74 7.74 0 017.75-7.75c2.088 0 3.844.766 5.197 2.028l-2.11 2.028c-2.759-2.662-7.89-.662-7.89 3.694 0 2.703 2.16 4.894 4.803 4.894 3.069 0 4.219-2.2 4.4-3.34h-4.4V8.886h7.378c.072.397.122.779.122 1.294z"}),"graduation-cap":i.default.createElement(i.default.Fragment,null,i.default.createElement("g",{clipPath:"url(#clip0_4427_38620)"},i.default.createElement("path",{d:"M10 3a2.21 2.21 0 00-.74.128L.493 6.294a.753.753 0 000 1.412l1.81.653a5.144 5.144 0 00-.804 2.763V12c0 .887-.338 1.803-.697 2.525A8.285 8.285 0 01.1 15.7a.503.503 0 00.278.788l2 .5a.498.498 0 00.61-.388 8.057 8.057 0 00-.066-3.397 6.911 6.911 0 00-.422-1.312v-.77c0-.943.319-1.834.872-2.546a3.816 3.816 0 011.537-1.116l4.907-1.928a.5.5 0 01.365.928L5.275 8.387a2.869 2.869 0 00-1.006.675l4.987 1.8a2.21 2.21 0 001.482 0l8.768-3.156a.753.753 0 000-1.412l-8.765-3.166A2.21 2.21 0 0010 3zM4 14.75C4 15.853 6.687 17 10 17s6-1.147 6-2.25l-.478-4.544-4.444 1.607a3.183 3.183 0 01-2.156 0l-4.444-1.607L4 14.75z"})),i.default.createElement("defs",null,i.default.createElement("clipPath",{id:"clip0_4427_38620"},i.default.createElement("path",{d:"M0 0h20v20H0z"})))),"grip-dots-vertical":i.default.createElement("path",{d:"M6 5a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm0 5a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm3 5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm2-10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm3 5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm-3 5a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z"}),"grip-dots":i.default.createElement("path",{d:"M15 6a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm-5 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm10 2a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm-5 3a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm-5-3a1.5 1.5 0 110 3 1.5 1.5 0 010-3z"}),"hard-drive":i.default.createElement("path",{d:"M2 5c0-1.103.897-2 2-2h12c1.103 0 2 .897 2 2v5.762A2.988 2.988 0 0016 10H4c-.769 0-1.469.287-2 .762V5zm2 6h12c1.103 0 2 .897 2 2v2c0 1.103-.897 2-2 2H4c-1.103 0-2-.897-2-2v-2c0-1.103.897-2 2-2zm8 4a.999.999 0 100-2 .999.999 0 100 2zm4-1a.999.999 0 10-2 0 .999.999 0 102 0z"}),"highlighter-line":i.default.createElement("path",{d:"M4.972 9.76c0-.479.253-.926.637-1.21l8.535-6.288a1.29 1.29 0 01.8-.262c.356 0 .697.142.95.394l1.712 1.712c.253.252.366.595.366.952 0 .286-.063.539-.235.798l-6.287 8.535c-.284.384-.76.609-1.21.609H7.973l-.766.794a.998.998 0 01-1.412 0l-1.588-1.588a1 1 0 010-1.412L4.972 12V9.76zm3.184-.604l2.66 2.66 4.978-6.694-.916-.916-6.722 4.95zm-2.76 7.653l-.968.944a.678.678 0 01-.531.247H1.75a.75.75 0 01-.75-.75v-.147c0-.225.079-.39.22-.531l1.97-1.969 2.207 2.206zM18.25 16.5c.416 0 .75.334.75.75s-.334.75-.75.75H8a.748.748 0 01-.75-.75c0-.416.334-.75.75-.75h10.25z"}),highlighter:i.default.createElement("path",{d:"M5.472 12V9.76c0-.479.253-.926.637-1.21l8.535-6.288a1.29 1.29 0 01.8-.262c.356 0 .697.142.95.394l1.712 1.712c.253.252.366.595.366.952 0 .286-.063.539-.235.798l-6.287 8.535c-.284.384-.76.609-1.21.609H8.473l-.766.794a.998.998 0 01-1.412 0l-1.588-1.588a.998.998 0 010-1.412L5.472 12zm10.822-6.878l-.916-.916-6.722 4.95 2.66 2.66 4.978-6.694zM1.72 16.572l1.97-1.969 2.207 2.206-.969.944a.675.675 0 01-.531.247H2.25a.75.75 0 01-.75-.75v-.147c0-.225.08-.39.22-.531z"}),"id-custom":i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{d:"M10.048 12.01V8.072h1.238c1.026 0 1.857.882 1.857 1.969 0 1.087-.832 1.97-1.857 1.97h-1.238z"}),i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 6a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6zm-11.182.964c0-.532-.407-.964-.909-.964S5 6.432 5 6.964v6.072c0 .532.407.964.91.964.501 0 .908-.432.908-.964V6.964zm2.302-.861c-.515 0-.928.439-.928.984v5.908c0 .546.413.985.928.985h2.166c2.05 0 3.714-1.764 3.714-3.939 0-2.174-1.663-3.938-3.714-3.938H9.12z"})),"image-user":i.default.createElement("path",{d:"M16 3H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-6 3a2 2 0 110 4 2 2 0 010-4zm3 8H7a.5.5 0 01-.5-.5A2.5 2.5 0 019 11h2a2.5 2.5 0 012.5 2.5c0 .275-.225.5-.5.5z"}),image:i.default.createElement("path",{d:"M15.972 3h-12C2.895 3 2 3.895 2 5v10c0 1.105.895 2 1.972 2h12a2 2 0 002-2V5c0-1.105-.869-2-2-2zm-10.5 2a1.5 1.5 0 011.5 1.5c0 .828-.644 1.5-1.5 1.5s-1.5-.672-1.5-1.5.7-1.5 1.5-1.5zm10.469 9.738a.499.499 0 01-.44.262H4.562a.5.5 0 01-.404-.795l2.188-3a.5.5 0 01.808 0l1.014 1.391 2.915-4.347A.473.473 0 0111.5 8c.166 0 .324.084.416.223l4 6a.5.5 0 01.025.514z"}),"input-lock-custom":i.default.createElement("path",{d:"M0 6c0-1.103.897-2 2-2h16c1.103 0 2 .897 2 2v4.5a3.493 3.493 0 00-2-3.162V6H2v8h10v2H2c-1.103 0-2-.897-2-2V6zm3 1.75c0-.416.334-.75.75-.75s.75.334.75.75v4.5c0 .416-.334.75-.75.75a.748.748 0 01-.75-.75v-4.5zM13 13c0-.553.447-1 1-1v-1.5a2.5 2.5 0 115 0V12c.553 0 1 .447 1 1v4c0 .553-.447 1-1 1h-5c-.553 0-1-.447-1-1v-4zm2.5-2.5V12h2v-1.5a.999.999 0 10-2 0z"}),"input-text-line":i.default.createElement("path",{d:"M2 5.5c-.275 0-.5.225-.5.5v8c0 .275.225.5.5.5h16c.275 0 .5-.225.5-.5V6c0-.275-.225-.5-.5-.5H2zM0 6c0-1.103.897-2 2-2h16c1.103 0 2 .897 2 2v8c0 1.103-.897 2-2 2H2c-1.103 0-2-.897-2-2V6zm5.75 1c.297 0 .566.175.684.447l2 4.5a.751.751 0 01-1.371.61l-.135-.304H4.572l-.135.303a.751.751 0 01-1.371-.61l2-4.5A.75.75 0 015.75 7zm0 2.597l-.513 1.153h1.026L5.75 9.597zM9.5 7.75c0-.416.334-.75.75-.75h1.625a1.876 1.876 0 011.694 2.678A1.876 1.876 0 0112.375 13H10.25a.748.748 0 01-.75-.75v-4.5zm1.5.75v.75h.875a.376.376 0 00.375-.375.376.376 0 00-.375-.375H11zm0 3h1.375a.376.376 0 00.375-.375.376.376 0 00-.375-.375H11v.75z"}),"input-text":i.default.createElement("path",{d:"M2 6v8h16V6H2zM0 6c0-1.103.897-2 2-2h16c1.103 0 2 .897 2 2v8c0 1.103-.897 2-2 2H2c-1.103 0-2-.897-2-2V6zm5.75 1c.297 0 .566.175.684.447l2 4.5a.751.751 0 01-1.371.61l-.135-.304H4.572l-.135.303a.751.751 0 01-1.371-.61l2-4.5A.75.75 0 015.75 7zm0 2.597l-.513 1.153h1.026L5.75 9.597zM9.5 7.75c0-.416.334-.75.75-.75h1.625a1.876 1.876 0 011.694 2.678A1.876 1.876 0 0112.375 13H10.25a.748.748 0 01-.75-.75v-4.5zm1.5.75v.75h.875a.376.376 0 00.375-.375.376.376 0 00-.375-.375H11zm0 3h1.375a.376.376 0 00.375-.375.376.376 0 00-.375-.375H11v.75z"}),intercom:i.default.createElement("path",{d:"M15.25 3H4.75C3.784 3 3 3.784 3 4.75v10.5c0 .966.784 1.75 1.75 1.75h10.5c.966 0 1.75-.784 1.75-1.75V4.75C17 3.784 16.216 3 15.25 3zm-3.384 2.566c0-.62.934-.62.934 0V11.8c0 .619-.934.619-.934 0V5.566zM9.534 5.33c0-.619.935-.619.935 0v6.766c0 .619-.935.619-.935 0V5.33zM7.2 5.566c0-.62.934-.62.934 0V11.8c0 .619-.934.619-.934 0V5.566zM4.866 6.5c0-.619.934-.619.934 0v4.197c0 .619-.934.619-.934 0V6.5zm10.106 7.119c-2.275 1.969-7.553 2.043-9.94 0-.47-.4.137-1.11.606-.71 2.059 1.728 6.753 1.685 8.728 0 .465-.403 1.072.307.606.71zm.162-2.922c0 .619-.934.619-.934 0V6.5c0-.619.934-.619.934 0v4.197z"}),italic:i.default.createElement("path",{d:"M16 4a1 1 0 01-1 1h-1.833L9 15H11a1 1 0 110 2H5a1 1 0 110-2h1.833L11 5H9a1 1 0 110-2h6a1 1 0 011 1z"}),key:i.default.createElement("path",{d:"M12.5 13A5.5 5.5 0 107 7.5c0 .584.09 1.15.26 1.678l-5.041 5.04A.75.75 0 002 14.75v2.5c0 .416.334.75.75.75h2.5c.416 0 .75-.334.75-.75V16h1.25c.416 0 .75-.334.75-.75V14h1.25c.2 0 .39-.078.531-.219l1.04-1.04A5.51 5.51 0 0012.5 13zm1.25-5.5a1.25 1.25 0 110-2.5 1.25 1.25 0 010 2.5z"}),keyboard:i.default.createElement("path",{d:"M17 16H3a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8c0 1.103-.897 2-2 2zM5 7.625v-1.25A.376.376 0 004.625 6h-1.25A.376.376 0 003 6.375v1.25c0 .206.168.375.375.375h1.25A.376.376 0 005 7.625zm3 0v-1.25A.376.376 0 007.625 6h-1.25A.376.376 0 006 6.375v1.25c0 .206.169.375.375.375h1.25A.376.376 0 008 7.625zm3 0v-1.25A.376.376 0 0010.625 6h-1.25A.376.376 0 009 6.375v1.25c0 .206.169.375.375.375h1.25A.376.376 0 0011 7.625zm3 0v-1.25A.376.376 0 0013.625 6h-1.25a.376.376 0 00-.375.375v1.25c0 .206.169.375.375.375h1.25A.376.376 0 0014 7.625zm3 0v-1.25A.376.376 0 0016.625 6h-1.25a.376.376 0 00-.375.375v1.25c0 .206.169.375.375.375h1.25A.376.376 0 0017 7.625zm-12 3v-1.25A.376.376 0 004.625 9h-1.25A.376.376 0 003 9.375v1.25c0 .206.168.375.375.375h1.25A.376.376 0 005 10.625zm3 0v-1.25A.376.376 0 007.625 9h-1.25A.376.376 0 006 9.375v1.25c0 .206.169.375.375.375h1.25A.376.376 0 008 10.625zm3 0v-1.25A.376.376 0 0010.625 9h-1.25A.376.376 0 009 9.375v1.25c0 .206.169.375.375.375h1.25a.376.376 0 00.375-.375zm3 0v-1.25A.376.376 0 0013.625 9h-1.25a.376.376 0 00-.375.375v1.25c0 .206.169.375.375.375h1.25a.376.376 0 00.375-.375zm3 0v-1.25A.376.376 0 0016.625 9h-1.25a.376.376 0 00-.375.375v1.25c0 .206.169.375.375.375h1.25a.376.376 0 00.375-.375zm-12 3v-1.25A.376.376 0 004.625 12h-1.25a.376.376 0 00-.375.375v1.25c0 .206.168.375.375.375h1.25A.376.376 0 005 13.625zm9 0v-1.25a.376.376 0 00-.375-.375h-7.25a.376.376 0 00-.375.375v1.25c0 .206.169.375.375.375h7.25a.376.376 0 00.375-.375zm3 0v-1.25a.376.376 0 00-.375-.375h-1.25a.376.376 0 00-.375.375v1.25c0 .206.169.375.375.375h1.25a.376.376 0 00.375-.375z"}),landmark:i.default.createElement("path",{d:"M9.503 2.132c.281-.176.684-.176.994 0L15.863 5.2l.109.05v.028l1.525.853a1 1 0 01.469 1.125 1.009 1.009 0 01-.994.744h-14a.994.994 0 01-.939-.744 1 1 0 01.47-1.125l1.469-.853V5.25l.165-.05 5.366-3.068zM4 9h2v6h1.25V9h2v6h1.5V9h2v6H14V9h2v6.134c.019.01.038-.006.056.035l1.5 1A1 1 0 0117 18H3a1 1 0 01-.555-1.831l1.5-1c.018-.04.037-.025.055-.035V9z"}),"library-custom":i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.85 17a.853.853 0 01-.85-.857V5.957c0-.473.38-.857.85-.857h1.287c.47 0 .85.384.85.857v10.186c0 .473-.38.857-.85.857H3.85zM8.33 17a.853.853 0 01-.85-.857V3.857c0-.473.38-.857.85-.857h1.287c.47 0 .85.384.85.857v12.286c0 .473-.38.857-.85.857H8.33zM15.072 16.978a.88.88 0 01-1.018-.676L11.421 4.26a.827.827 0 01.651-.997l1.257-.241a.88.88 0 011.018.676L16.98 15.74a.827.827 0 01-.652.997l-1.256.241z"}),"library-gear-custom":i.default.createElement("path",{d:"M10.1 11.906l.75-1.3a.75.75 0 011.025-.275l.25.144c.153.088.34.078.494-.01a.494.494 0 00.256-.421v-.288c0-.415.335-.75.75-.75L13.628 9h1.5c.416 0 .75.334.75.75v.294c0 .175.104.331.253.418a.492.492 0 00.491.01l.256-.147a.75.75 0 011.025.275l.75 1.3a.75.75 0 01-.275 1.025l-.278.16a.463.463 0 00-.225.406c0 .178.085.347.238.434l.262.153a.75.75 0 01.275 1.025l-.75 1.3a.75.75 0 01-1.025.275l-.278-.16a.478.478 0 00-.475.01.477.477 0 00-.247.406v.322c0 .416-.334.75-.75.75h-1.5a.748.748 0 01-.75-.75v-.312c0-.172-.1-.325-.247-.41a.484.484 0 00-.478-.009l-.272.156a.75.75 0 01-1.025-.275l-.75-1.3a.753.753 0 01.272-1.025l.25-.143a.505.505 0 00.244-.441.47.47 0 00-.228-.413l-.266-.153a.75.75 0 01-.275-1.025zm2.975.84a1.498 1.498 0 001.3 2.25c.538 0 1.031-.284 1.3-.75a1.496 1.496 0 000-1.5 1.497 1.497 0 00-1.3-.75c-.537 0-1.031.285-1.3.75zM6.33 16a.853.853 0 01-.85-.857V2.857c0-.473.38-.857.85-.857h1.287c.47 0 .85.384.85.857v12.286c0 .473-.38.857-.85.857H6.33zM1.85 16a.853.853 0 01-.85-.857V4.957c0-.473.38-.857.85-.857h1.287c.47 0 .85.384.85.857v10.186c0 .473-.38.857-.85.857H1.85zM13.383 7.436s-1.036.269-1.333.878c-.296.61-1.332.879-1.332.879L9.421 3.26a.827.827 0 01.651-.997l1.257-.241a.88.88 0 011.018.676l1.036 4.738z"}),"library-plus-custom":i.default.createElement("path",{d:"M7.091 18a.975.975 0 01-.97-.979V2.979c0-.54.434-.979.97-.979h1.471c.537 0 .972.438.972.979v14.042c0 .54-.435.979-.972.979h-1.47zM1.971 18A.975.975 0 011 17.021V5.379c0-.54.435-.979.971-.979h1.471c.537 0 .971.438.971.979v11.642c0 .54-.434.979-.97.979H1.97zM15.56 10.08a5.49 5.49 0 00-3.112 1.701l-1.824-8.34a.946.946 0 01.744-1.14l1.436-.276a1.005 1.005 0 011.163.773l1.593 7.282zM15.75 18.25v-2h-2a.748.748 0 01-.75-.75c0-.416.334-.75.75-.75h2v-2c0-.416.334-.75.75-.75s.75.334.75.75v2h2c.416 0 .75.334.75.75s-.334.75-.75.75h-2v2c0 .416-.334.75-.75.75a.748.748 0 01-.75-.75z"}),"library-small-custom":i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.85 17a.853.853 0 01-.85-.857V5.957c0-.473.38-.857.85-.857h1.287c.47 0 .85.384.85.857v10.186c0 .473-.38.857-.85.857H3.85zM8.33 17a.853.853 0 01-.85-.857V3.857c0-.473.38-.857.85-.857h1.287c.47 0 .85.384.85.857v12.286c0 .473-.38.857-.85.857H8.33zM15.072 16.978a.88.88 0 01-1.018-.676L11.421 4.26a.827.827 0 01.651-.997l1.257-.241a.88.88 0 011.018.676L16.98 15.74a.827.827 0 01-.652.997l-1.256.241z"}),"lightbulb-line":i.default.createElement("path",{d:"M7.503 16.197c0 .197.057.389.165.553l.536.802c.164.247.536.447.832.447h1.928c.294 0 .667-.2.831-.447l.534-.802c.092-.139.167-.387.167-.553l.004-1.225h-5l.003 1.225zM10 2a5.487 5.487 0 00-5.5 5.472 5.47 5.47 0 001.361 3.619c.517.588 1.323 1.82 1.632 2.857l.004.025h5.006l.004-.025c.309-1.038 1.116-2.269 1.632-2.857.849-.941 1.361-2.204 1.361-3.62 0-3.008-2.463-5.47-5.5-5.471zm3.012 8.128c-.489.558-1.095 1.447-1.532 2.372H8.523c-.438-.925-1.043-1.814-1.532-2.372A4.05 4.05 0 016 7.472C6 5.54 7.503 3.508 9.972 3.5 12.206 3.5 14 5.294 14 7.472c0 .969-.35 1.928-.988 2.656zM9.5 4.5A2.503 2.503 0 007 7a.5.5 0 101 0c0-.827.673-1.5 1.5-1.5a.5.5 0 100-1z"}),"lightbulb-on-line":i.default.createElement("path",{d:"M3.347 10.978l-1.734 1a.757.757 0 00-.387.653c0 .27.145.52.38.656a.751.751 0 00.757-.012l1.735-1a.752.752 0 00.261-1.016.746.746 0 00-1.012-.28zm.75-7.251l-1.735-1a.751.751 0 00-.757-.012.761.761 0 00-.38.656.758.758 0 00.388.652l1.734 1a.75.75 0 00.76.012.76.76 0 00.377-.656.755.755 0 00-.387-.652zM3.5 8a.75.75 0 00-.75-.75h-2a.75.75 0 000 1.5h2c.416 0 .75-.334.75-.75zm12.781-2.875a.761.761 0 00.375-.102l1.73-1a.748.748 0 00.263-1.015.747.747 0 00-1.012-.281l-1.73 1a.75.75 0 00.374 1.398zM19.25 7.25h-2a.75.75 0 000 1.5h2a.75.75 0 000-1.5zm-.863 4.728l-1.734-1a.751.751 0 00-.758-.012.761.761 0 00-.378.657.756.756 0 00.386.652l1.735 1c.355.2.809.074 1.012-.281a.752.752 0 00-.262-1.016zM10 2a5.487 5.487 0 00-5.5 5.472 5.47 5.47 0 001.36 3.619c.517.588 1.324 1.82 1.632 2.858l.004.024h5.01l.002-.024c.309-1.038 1.116-2.27 1.633-2.858.847-.941 1.359-2.203 1.359-3.62 0-3.008-2.463-5.47-5.5-5.47zm3.012 8.128c-.489.558-1.095 1.447-1.532 2.372H8.523c-.438-.925-1.043-1.814-1.532-2.372A4.044 4.044 0 016 7.472C6 5.54 7.503 3.508 9.972 3.5 12.206 3.5 14 5.294 14 7.472c0 .969-.35 1.928-.988 2.656zM7.503 16.2c0 .197.06.388.168.553l.534.802c.164.246.537.447.832.447h1.93c.294 0 .667-.2.831-.446l.534-.803c.093-.14.168-.387.168-.553v-1.199H7.503V16.2zM9.5 4.5A2.503 2.503 0 007 7a.5.5 0 101 0c0-.827.673-1.5 1.5-1.5a.5.5 0 100-1z"}),"lightbulb-on":i.default.createElement("path",{d:"M7.503 16.2c.004.195.062.389.168.553l.534.802c.164.246.54.447.832.447h1.93c.296 0 .667-.2.831-.446l.534-.803c.102-.168.16-.357.168-.553v-1.198H7.503V16.2zM9.984 2C6.797 2.009 4.5 4.567 4.5 7.473c0 1.332.481 2.617 1.36 3.619.52.59 1.324 1.82 1.632 2.858 0 .008.004.016.004.024h5.01l.002-.024c.309-1.039 1.113-2.269 1.633-2.858.878-1 1.36-2.286 1.36-3.62-.001-3.014-2.476-5.478-5.517-5.47zM10 5C8.62 5 7.5 6.121 7.5 7.472c0 .278-.223.5-.5.5a.498.498 0 01-.5-.5C6.503 5.566 8.066 4.004 10 4c.277 0 .5.223.5.5 0 .278-.222.5-.5.5zM3.5 8a.75.75 0 00-.75-.75h-2a.75.75 0 000 1.5h2A.75.75 0 003.5 8zm15.75-.75h-2a.75.75 0 000 1.5h2a.75.75 0 000-1.5zM4.097 3.727l-1.735-1a.751.751 0 00-.757-.012.761.761 0 00-.38.656.756.756 0 00.387.653l1.735 1c.23.14.52.144.758.011a.761.761 0 00.378-.656.753.753 0 00-.386-.652zm14.29 8.251l-1.734-1a.751.751 0 00-.758-.012.761.761 0 00-.378.657.756.756 0 00.386.652l1.735 1c.355.2.809.074 1.012-.281a.752.752 0 00-.262-1.016zm-15.04-1l-1.734 1a.757.757 0 00-.387.653c0 .27.145.52.38.656a.751.751 0 00.757-.012l1.735-1a.752.752 0 00.261-1.015.746.746 0 00-1.012-.282zM16.28 5.125a.761.761 0 00.375-.102l1.73-1a.748.748 0 00.263-1.015.747.747 0 00-1.012-.281l-1.73 1a.75.75 0 00.374 1.398z"}),lightbulb:i.default.createElement("path",{d:"M7.503 16.197c0 .197.057.389.165.553l.536.802c.164.247.536.447.832.447h1.928c.294 0 .667-.2.831-.447l.534-.802c.092-.139.167-.387.167-.553l.004-1.225h-5l.003 1.225zM9.981 2C6.795 2.01 4.5 4.593 4.5 7.472a5.47 5.47 0 001.361 3.619c.517.588 1.323 1.82 1.632 2.857l.004.025h5.006l.004-.025c.309-1.038 1.116-2.269 1.632-2.857.849-.941 1.361-2.204 1.361-3.62 0-3.014-2.472-5.48-5.519-5.47zM10 5C8.62 5 7.5 6.122 7.5 7.472 7.5 7.775 7.275 8 7 8a.501.501 0 01-.5-.5c0-1.93 1.57-3.472 3.5-3.472a.5.5 0 01.5.5c0 .276-.225.472-.5.472z"}),lighthouse:i.default.createElement(i.default.Fragment,null,i.default.createElement("g",{clipPath:"url(#clip0_18509_88402)"},i.default.createElement("path",{d:"M1.047 2.06l3.5 1.5a.75.75 0 11-.59 1.377l-3.5-1.5a.748.748 0 01-.398-.98.757.757 0 01.988-.398zm3.5 6.377l-3.5 1.5a.75.75 0 11-.59-1.378l3.5-1.5a.75.75 0 11.59 1.378zm4.95-6.3a1 1 0 011.006 0l3 1.75A1 1 0 0113 5.75V7a.999.999 0 01.384 1.922L14.8 16h.2a.999.999 0 110 2h-4v-2a.999.999 0 10-2 0v2H5a.999.999 0 110-2h.2l1.416-7.078A.999.999 0 017 7V5.75a1.003 1.003 0 01-.503-1.866l3-1.75v.003zM11 4.741l-1-.582-1 .582V7h2V4.74zm8.94-2.285a.75.75 0 01-.393.985l-3.5 1.5a.75.75 0 11-.59-1.379l3.5-1.5a.75.75 0 01.984.394zm-4.877 5a.75.75 0 01.984-.394l3.5 1.5a.75.75 0 11-.59 1.379l-3.5-1.5a.75.75 0 01-.394-.985z"})),i.default.createElement("defs",null,i.default.createElement("clipPath",{id:"clip0_18509_88402"},i.default.createElement("path",{d:"M0 0h20v20H0z"})))),link:i.default.createElement("path",{d:"M18.119 10.366a4.517 4.517 0 000-6.391 4.518 4.518 0 00-5.822-.481l-.05.034a.997.997 0 00-.231 1.394 1 1 0 001.393.231l.05-.034a2.518 2.518 0 013.244 3.831l-3.506 3.513a2.518 2.518 0 01-3.831-3.244l.034-.05a1 1 0 00-1.625-1.163l-.034.05a4.517 4.517 0 006.869 5.819l3.509-3.51zM1.88 9.634a4.517 4.517 0 000 6.391 4.518 4.518 0 005.822.481l.05-.034a.997.997 0 00.231-1.394 1 1 0 00-1.393-.231l-.05.034a2.515 2.515 0 01-3.244-.268 2.522 2.522 0 010-3.566l3.506-3.51a2.52 2.52 0 013.831 3.247l-.034.05a1 1 0 001.625 1.163l.034-.05A4.517 4.517 0 005.39 6.125l-3.509 3.51z"}),"list-ul":i.default.createElement("path",{d:"M2.5 5a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM17 4a1 1 0 110 2H8a.999.999 0 110-2h9zm0 5a.999.999 0 110 2H8a.999.999 0 110-2h9zm0 5a.999.999 0 110 2H8a.999.999 0 110-2h9zM2.5 15a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm3-5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}),"location-crosshairs":i.default.createElement("path",{d:"M10 2c.553 0 1 .447 1 1v1.084A5.995 5.995 0 0115.916 9H17a.999.999 0 110 2h-1.084A5.995 5.995 0 0111 15.916V17a.999.999 0 11-2 0v-1.084A5.995 5.995 0 014.084 11H3a.999.999 0 110-2h1.084A5.996 5.996 0 019 4.084V3c0-.553.447-1 1-1zm-4 8a4 4 0 108 0 4 4 0 00-8 0zm4 2.5a2.5 2.5 0 11-.001-4.999A2.5 2.5 0 0110 12.5z"}),"location-dot":i.default.createElement("path",{d:"M10.74 17.6C12.345 15.594 16 10.731 16 8c0-3.313-2.688-6-6-6-3.313 0-6 2.688-6 6 0 2.731 3.656 7.594 5.26 9.6a.944.944 0 001.48 0zM10 10c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2z"}),"location-question":i.default.createElement("path",{d:"M10.74 17.6C12.345 15.594 16 10.731 16 8c0-3.313-2.688-6-6-6-3.313 0-6 2.688-6 6 0 2.731 3.656 7.594 5.26 9.6a.944.944 0 001.48 0zM7.307 6.166A1.753 1.753 0 018.956 5h1.822a1.972 1.972 0 01.981 3.684l-1.009.579A.752.752 0 0110 10a.748.748 0 01-.75-.75v-.422c0-.269.144-.515.378-.65l1.384-.794a.473.473 0 00-.234-.88H8.956c-.106 0-.2.065-.234.165l-.013.037a.75.75 0 01-1.412-.5l.012-.037-.003-.003zM11 12a.999.999 0 11-2 0 .999.999 0 112 0z"}),"lock-keyhole":i.default.createElement("path",{d:"M10 2a4.5 4.5 0 014.5 4.5V8h.5c1.103 0 2 .897 2 2v6c0 1.103-.897 2-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2h.5V6.5A4.5 4.5 0 0110 2zm0 2a2.5 2.5 0 00-2.5 2.5V8h5V6.5A2.5 2.5 0 0010 4zm1 8a.999.999 0 10-2 0v2a.999.999 0 102 0v-2z"}),"magnifying-glass-minus":i.default.createElement("path",{d:"M17.634 15.866l-3.741-3.741a6.498 6.498 0 001.046-4.522c-.383-2.86-2.728-5.187-5.591-5.55a6.502 6.502 0 00-7.294 7.294c.363 2.864 2.69 5.21 5.55 5.59a6.496 6.496 0 004.522-1.045l3.74 3.74a1.25 1.25 0 001.768-1.766zM10.999 9.25H5.971c-.387 0-.722-.334-.722-.75s.336-.75.722-.75h5c.444 0 .778.334.778.75s-.334.75-.75.75z"}),"magnifying-glass-plus":i.default.createElement("path",{d:"M17.634 15.866l-3.741-3.741a6.498 6.498 0 001.046-4.522c-.383-2.86-2.728-5.187-5.591-5.55a6.502 6.502 0 00-7.294 7.294c.363 2.864 2.69 5.21 5.55 5.59a6.496 6.496 0 004.522-1.045l3.74 3.74a1.25 1.25 0 001.768-1.766zM10.999 9.25H9.221V11c0 .414-.336.75-.722.75a.748.748 0 01-.75-.75V9.25H5.971c-.387 0-.722-.334-.722-.75s.336-.75.722-.75H7.75V6c0-.414.336-.75.722-.75.386 0 .75.334.75.75v1.75h1.75c.444 0 .778.334.778.75s-.334.75-.75.75z"}),"magnifying-glass":i.default.createElement("path",{d:"M17.634 15.866l-3.74-3.741a6.498 6.498 0 001.045-4.522c-.383-2.86-2.726-5.187-5.589-5.55A6.505 6.505 0 002.054 9.35c.362 2.864 2.69 5.21 5.55 5.59a6.497 6.497 0 004.522-1.045l3.74 3.74a1.25 1.25 0 101.768-1.77zM4.472 8.5c0-2.206 1.794-4 4-4s4 1.794 4 4-1.794 4-4 4-4-1.794-4-4z"}),merge:i.default.createElement("path",{d:"M3 4a.999.999 0 100 2h3.037c.304 0 .591.138.782.375L9.719 10l-2.9 3.625c-.19.238-.478.375-.782.375H3a.999.999 0 100 2h3.037a3.01 3.01 0 002.344-1.125l3.1-3.875H14v1a1.004 1.004 0 001.71.71l2-2a.998.998 0 000-1.413l-2-2a.996.996 0 00-1.091-.216 1 1 0 00-.619.925v1h-2.519l-3.1-3.881A2.996 2.996 0 006.037 4H3z"}),"message-arrow-up-right":i.default.createElement("path",{d:"M16 2H4c-1.102 0-2 .898-2 1.972v8.972c0 1.101.898 1.972 2 1.972h3v2.68c0 .305.352.484.598.304l3.902-2.928H16c1.102 0 2-.899 2-1.972V3.972C18 2.898 17.103 2 16 2zm-2.5 8.25c0 .416-.334.75-.75.75a.748.748 0 01-.75-.75V8.06l-3 3A.75.75 0 117.94 10l3-3H8.75a.75.75 0 010-1.5h4a.75.75 0 01.75.75v4z"}),"message-dots":i.default.createElement("path",{d:"M15.973 2h-12c-1.102 0-2 .898-2 1.972v8.972c0 1.101.898 1.972 2 1.972h3v2.596c0 .305.351.483.597.304l3.903-2.928h4.5c1.102 0 2-.899 2-1.972V3.972a1.982 1.982 0 00-2-1.972zm-10 7.472c-.555 0-1-.445-1-.972 0-.527.445-.972 1-.972.554 0 1 .445 1 .972a.974.974 0 01-1 .972zm4 0c-.555 0-1-.445-1-.972 0-.527.445-.972 1-.972.554 0 1 .445 1 .972 0 .527-.42.972-1 .972zm4 0c-.555 0-1-.445-1-.972 0-.527.445-.972 1-.972.554 0 1 .445 1 .972a.975.975 0 01-1 .972z"}),"message-line":i.default.createElement("path",{d:"M16 2H4c-1.102 0-2 .898-2 1.972v8.972c0 1.101.898 1.972 2 1.972h3v2.624c0 .307.344.486.598.303l3.903-2.927H16c1.101 0 2-.899 2-1.972V3.972A1.982 1.982 0 0016 2zm.528 11c0 .273-.226.5-.5.5h-5l-2.5 1.875V13.5h-4.5a.504.504 0 01-.5-.5V4c0-.273.227-.5.5-.5h12c.274 0 .5.227.5.5v9z"}),"message-lines":i.default.createElement("path",{d:"M15.973 2h-12c-1.102 0-2 .898-2 1.972v8.972c0 1.101.898 1.972 2 1.972h3v2.596c0 .305.351.483.597.304l3.903-2.928h4.5c1.102 0 2-.899 2-1.972V3.972a1.982 1.982 0 00-2-1.972zm-5.722 9h-3.5a.75.75 0 010-1.5h3.5a.75.75 0 010 1.5zm3-3h-6.5a.75.75 0 010-1.5h6.5a.75.75 0 010 1.5z"}),"message-plus":i.default.createElement("path",{d:"M16 2H4c-1.102 0-2 .898-2 1.972v8.972c0 1.101.898 1.972 2 1.972h3v2.596c0 .305.352.483.598.304l3.902-2.844H16c1.102 0 2-.899 2-1.972V3.972C18 2.898 17.103 2 16 2zm-3.5 7.222h-1.75V11c-.028.416-.334.75-.75.75a.72.72 0 01-.722-.722V9.222H7.472A.718.718 0 016.75 8.5a.72.72 0 01.722-.722h1.75V5.972A.788.788 0 0110 5.25c.416 0 .722.336.722.722V7.75h1.75c.444 0 .778.334.778.75s-.334.722-.75.722z"}),"message-question":i.default.createElement("path",{d:"M2 4c0-1.103.897-2 2-2h12c1.103 0 2 .897 2 2v9c0 1.103-.897 2-2 2h-4.334L7.8 17.9a.505.505 0 01-.525.047A.492.492 0 017 17.5V15H4c-1.103 0-2-.897-2-2V4zm5.306 1.666l-.012.037a.749.749 0 101.412.5l.013-.037A.249.249 0 018.953 6h1.822a.471.471 0 01.234.881l-1.384.794a.748.748 0 00-.378.65v.425a.75.75 0 001.5.012l1.01-.578a1.972 1.972 0 00-.981-3.684h-1.82c-.74 0-1.4.466-1.65 1.166zM11 11.5a.999.999 0 10-2 0 .999.999 0 102 0z"}),"message-slash":i.default.createElement("path",{d:"M1.972 12.972c0 1.101.899 1.972 1.972 1.972h2.972v2.624c0 .305.352.483.597.304l3.904-2.928h1.23L1.972 6.59v6.38zm17.74 3.687l-2.585-2.027C17.65 14.274 18 13.68 18 13V3.972A1.974 1.974 0 0016.028 2H3.972c-.734 0-1.374.402-1.72.996L1.212 2.16a.748.748 0 00-1.053.128.75.75 0 00.127 1.053L18.76 17.813a.75.75 0 001.053-.128c.285-.297.226-.77-.1-1.026z"}),message:i.default.createElement("path",{d:"M17.971 3.972v8.972c0 1.101-.898 1.972-2 1.972h-4.5l-3.903 2.927a.377.377 0 01-.597-.303v-2.624h-3c-1.102 0-2-.899-2-1.972V3.972C1.97 2.87 2.869 2 3.97 2h12c1.128 0 2 .898 2 1.972z"}),messages:i.default.createElement("path",{d:"M1.984 2A1.994 1.994 0 000 4v6c0 1.103.89 2 1.984 2h.992v1.5c0 .19.105.363.273.447a.499.499 0 00.52-.047L6.285 12h4.628a1.994 1.994 0 001.984-2V4c0-1.103-.89-2-1.984-2H1.984zm8.928 11H7.936v1c0 1.103.89 2 1.984 2h3.636l2.514 1.9a.498.498 0 00.794-.4V16h.992a1.994 1.994 0 001.984-2V8c0-1.103-.89-2-1.984-2h-3.968v4c0 1.656-1.333 3-2.976 3z"}),"microsoft-color":i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{d:"M9.579 2H2v7.579h7.579V2z",fill:"#F25022"}),i.default.createElement("path",{d:"M9.579 10.421H2V18h7.579v-7.579z",fill:"#00A4EF"}),i.default.createElement("path",{d:"M18 2h-7.579v7.579H18V2z",fill:"#7FBA00"}),i.default.createElement("path",{d:"M18 10.421h-7.579V18H18v-7.579z",fill:"#FFB900"})),minus:i.default.createElement("path",{d:"M16.5 10c0 .553-.447 1-1 1h-11a.999.999 0 110-2h11c.553 0 1 .447 1 1z"}),"mixpanel-custom":i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V5zM9.191 9.142H7.946c-.895 0-1.227-.366-1.441-1.142l-.41-1.593c-.155-.613-.215-.817-.74-.817h-.008a.245.245 0 110-.49h1.546c.857 0 1.032.388 1.246 1.205l.468 1.817c.157.53.273.816.584 1.02zm1.637 0H9.19v1.716H7.945c-.896 0-1.228.368-1.442 1.142l-.409 1.593c-.156.613-.214.817-.74.817h-.009a.245.245 0 00-.245.245v.244l.001.001h1.792c.857 0 1.032-.388 1.246-1.205l.468-1.817c.157-.53.273-.816.584-1.02h1.637c.311.204.425.47.581 1.02l.468 1.817c.194.837.37 1.205 1.247 1.205h1.528a.245.245 0 000-.49h-.009c-.506 0-.584-.204-.74-.817L13.493 12c-.213-.776-.524-1.143-1.421-1.143h-1.244V9.143zm0 0c.311-.204.429-.47.586-1.02l.467-1.817c.195-.837.37-1.205 1.247-1.205h1.527a.245.245 0 110 .49h-.009c-.507 0-.584.204-.74.817L13.496 8c-.215.774-.526 1.142-1.421 1.142h-1.247z"}),"mobile-screen":i.default.createElement("path",{d:"M5 4c0-1.103.815-2 1.818-2h6.364C14.185 2 15 2.897 15 4v12c0 1.103-.815 2-1.818 2H6.818C5.815 18 5 17.103 5 16V4zm3.636 12c0 .275.205.5.455.5h1.818c.25 0 .455-.225.455-.5s-.205-.5-.455-.5H9.091c-.25 0-.455.225-.455.5zm4.546-12H6.818v10h6.364V4z"}),newspaper:i.default.createElement("path",{d:"M17 3H6a1 1 0 00-1 1v10.5a.5.5 0 01-1 0V5H3a1 1 0 00-1 1v9a2 2 0 002 2h12a2 2 0 002-2V4a1 1 0 00-1-1zm-6.5 12h-3a.501.501 0 01-.5-.5c0-.275.225-.5.5-.5h3a.5.5 0 110 1zm0-3h-3a.501.501 0 01-.5-.5c0-.275.225-.5.5-.5h3c.275 0 .5.225.5.5s-.225.5-.5.5zm5 3h-3a.5.5 0 010-1h3a.5.5 0 110 1zm0-3h-3a.501.501 0 01-.5-.5c0-.275.225-.5.5-.5h3c.275 0 .5.225.5.5s-.225.5-.5.5zm.5-3.5c0 .275-.225.5-.5.5h-8a.501.501 0 01-.5-.5v-3c0-.275.225-.5.5-.5h8c.275 0 .5.225.5.5v3z"}),"one-drive-color":i.default.createElement(i.default.Fragment,null,i.default.createElement("g",{clipPath:"url(#clip0_12344_201193)"},i.default.createElement("path",{d:"M9.152 6.443l5.038 3.14 3.002-1.315a4.696 4.696 0 012.262-.402 7.872 7.872 0 00-2.193-3.81 7.388 7.388 0 00-3.836-1.95 7.233 7.233 0 00-4.237.546 7.585 7.585 0 00-3.265 2.862L6 5.512a5.798 5.798 0 013.152.931z"}),i.default.createElement("path",{d:"M9.152 6.443A5.798 5.798 0 006 5.513l-.077.001a5.827 5.827 0 00-3.082.934A6.154 6.154 0 00.663 8.902a6.456 6.456 0 00.415 6.423L14.19 9.583l-5.038-3.14z"}),i.default.createElement("path",{d:"M19.454 7.866a4.696 4.696 0 00-2.262.402L14.19 9.583l9.227 5.751A5.238 5.238 0 0024 12.902a5.235 5.235 0 00-.608-2.426 4.997 4.997 0 00-1.649-1.827 4.746 4.746 0 00-2.289-.783z"}),i.default.createElement("path",{d:"M14.19 9.583L1.078 15.325a6.074 6.074 0 002.145 1.967C4.08 17.757 5.033 18 6 18h13.125a4.73 4.73 0 002.5-.717 4.99 4.99 0 001.792-1.949L14.19 9.583z"})),i.default.createElement("defs",null,i.default.createElement("clipPath",{id:"clip0_12344_201193"},i.default.createElement("path",{d:"M0 0h24v20H0z"})))),"one-drive-exclamation":i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{d:"M7.627 6.888l4.198 2.747 2.502-1.15a3.755 3.755 0 011.885-.352 6.975 6.975 0 00-1.828-3.335 6.056 6.056 0 00-3.197-1.705 5.768 5.768 0 00-3.53.477c-1.11.53-2.055 1.4-2.72 2.505L5 6.073a4.667 4.667 0 012.627.815z"}),i.default.createElement("path",{d:"M11.825 9.635L.898 14.66a5.164 5.164 0 001.788 1.721C3.4 16.788 4.194 17 5 17h10.938c.733 0 1.453-.216 2.082-.627.63-.41 1.146-1 1.494-1.706l-7.689-5.032z"}),i.default.createElement("path",{d:"M11.825 9.635L7.627 6.888A4.667 4.667 0 005 6.073l-.064.002a4.692 4.692 0 00-2.568.817A5.308 5.308 0 00.553 9.039a5.891 5.891 0 00-.542 2.863c.061.99.368 1.943.887 2.758l10.927-5.025zM14.327 8.485l-2.502 1.15 7.69 5.032A4.77 4.77 0 0020 12.54a4.764 4.764 0 00-.506-2.123 4.306 4.306 0 00-1.375-1.599 3.832 3.832 0 00-2.181-.695c-.554 0-1.103.123-1.61.363z"}),i.default.createElement("path",{d:"M15.5 17a4.501 4.501 0 010-9 4.501 4.501 0 010 9zm0-1.5c.416 0 .75-.334.75-.75a.748.748 0 00-.75-.75.748.748 0 00-.75.75c0 .416.334.75.75.75zm0-6c-.275 0-.5.225-.5.5v2.5c0 .275.225.5.5.5s.5-.225.5-.5V10c0-.275-.225-.5-.5-.5z"}),i.default.createElement("path",{d:"M15.5 9.5c-.275 0-.5.225-.5.5v2.5c0 .275.225.5.5.5s.5-.225.5-.5V10c0-.275-.225-.5-.5-.5zM15.5 15.5c.416 0 .75-.334.75-.75a.748.748 0 00-.75-.75.748.748 0 00-.75.75c0 .416.334.75.75.75z"})),"one-drive":i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{d:"M7.627 6.888l4.198 2.747 2.502-1.15a3.755 3.755 0 011.885-.352 6.975 6.975 0 00-1.828-3.335 6.056 6.056 0 00-3.197-1.705 5.768 5.768 0 00-3.53.477c-1.11.53-2.055 1.4-2.72 2.505L5 6.073a4.667 4.667 0 012.627.815z"}),i.default.createElement("path",{d:"M11.825 9.635L.898 14.66a5.164 5.164 0 001.788 1.721C3.4 16.788 4.194 17 5 17h10.938c.733 0 1.453-.216 2.082-.627.63-.41 1.146-1 1.494-1.706l-7.689-5.032z"}),i.default.createElement("path",{d:"M11.825 9.635L7.627 6.888A4.667 4.667 0 005 6.073l-.064.002a4.692 4.692 0 00-2.568.817A5.308 5.308 0 00.553 9.039a5.891 5.891 0 00-.542 2.863c.061.99.368 1.943.887 2.758l10.927-5.025zM14.327 8.485l-2.502 1.15 7.69 5.032A4.77 4.77 0 0020 12.54a4.764 4.764 0 00-.506-2.123 4.306 4.306 0 00-1.375-1.599 3.832 3.832 0 00-2.181-.695c-.554 0-1.103.123-1.61.363z"})),"paint-roller":i.default.createElement("path",{d:"M2 4a2 2 0 012-2h9a2 2 0 012 2v2c0 1.103-.897 2-2 2H4a2 2 0 01-2-2V4zm5 9c0-.553.447-1 1-1v-.5A2.5 2.5 0 0110.5 9H15c.553 0 1-.447 1-1V4.17A3 3 0 0118 7v1a3 3 0 01-3 3h-4.5c-.275 0-.5.225-.5.5v.5c.553 0 1 .447 1 1v4c0 .553-.447 1-1 1H8c-.553 0-1-.447-1-1v-4z"}),palette:i.default.createElement("path",{d:"M18 9.972c0 .056-.028.084-.028.112.015 1.141-1.022 1.888-2.163 1.888H12.75c-.828 0-1.5.7-1.5 1.528 0 .106.012.21.031.31.069.318.203.6.34.934.188.431.379.86.379 1.312 0 .997-.675 1.897-1.669 1.938A8 8 0 012 10a8 8 0 018-8 8 8 0 018 8v-.028zm-13 0c-.552 0-1 .475-1 1 0 .581.448 1 1 1 .553 0 1-.419 1-1 0-.525-.447-1-1-1zm1-2c.553 0 1-.419 1-1 0-.525-.447-1-1-1-.553 0-1 .475-1 1 0 .581.447 1 1 1zm4-4c-.553 0-1 .476-1 1 0 .581.447 1 1 1 .553 0 1-.419 1-1 0-.524-.447-1-1-1zm4 4c.553 0 1-.419 1-1 0-.525-.447-1-1-1-.553 0-1 .475-1 1 0 .581.447 1 1 1z"}),"paper-plane-top":i.default.createElement("path",{d:"M3.56 2.869c-1.088-.472-2.16.697-1.598 1.74l2.166 4.022c.138.26.394.431.684.469l5.5.688a.212.212 0 01.188.209.213.213 0 01-.188.21l-5.5.687a.91.91 0 00-.684.469L1.962 15.39c-.562 1.043.51 2.212 1.597 1.74l13.81-5.984c1.003-.434 1.003-1.86 0-2.294L3.559 2.87z"}),"paper-plane":i.default.createElement("path",{d:"M17.988 3.152l-2 12.972a1 1 0 01-1.374.77l-3.83-1.596-1.59 2.384A.62.62 0 018.65 18a.65.65 0 01-.65-.65v-3.006c0-.222.074-.438.21-.613L15 5l-9.178 8.26-3.207-1.338a1.004 1.004 0 01-.613-.888.972.972 0 01.502-.93l14-7.972a1 1 0 011.483 1.02z"}),"paperclip-line":i.default.createElement("path",{d:"M14.461 4.109c-.809-.84-2.128-.84-2.965 0l-5.973 5.973c-1.364 1.39-1.364 3.603 0 4.965a3.489 3.489 0 004.938 0l4.75-4.75c.294-.29.77-.29 1.035 0 .319.294.319.769 0 1.034l-4.75 4.75c-1.922 1.979-5.085 1.979-7.034 0-1.95-1.921-1.95-5.084 0-7.034l6-5.999c1.396-1.397 3.662-1.397 5.034 0 1.425 1.398 1.425 3.665 0 5.034L9.78 13.85a2.343 2.343 0 01-3.484-.19 2.345 2.345 0 01.172-3.12l4.743-4.743c.294-.29.77-.29 1.035 0 .319.294.319.769 0 1.035L7.53 11.6a.842.842 0 00-.062 1.122.839.839 0 001.25.069l5.743-5.744a2.076 2.076 0 000-2.938z"}),"paperclip-vertical-line":i.default.createElement("path",{d:"M14 5.375a3.375 3.375 0 10-6.75 0v7.375A2.249 2.249 0 009.5 15a2.249 2.249 0 002.25-2.25v-6A.748.748 0 0011 6a.748.748 0 00-.75.75v6c0 .416-.334.75-.75.75a.748.748 0 01-.75-.75V5.375a1.876 1.876 0 013.75 0V13.5c0 1.656-1.316 3-3 3a3 3 0 01-3-3V6.75A.748.748 0 005.75 6a.748.748 0 00-.75.75v6.75a4.501 4.501 0 009 0V5.375z"}),"paperclip-vertical":i.default.createElement("path",{d:"M16 6a4 4 0 00-8 0v6a2.5 2.5 0 105 0V7a.999.999 0 10-2 0v5c0 .275-.225.5-.5.5a.501.501 0 01-.5-.5V6a2 2 0 014 0v6.5c0 1.934-1.566 3.5-3.5 3.5A3.498 3.498 0 017 12.5V7a.999.999 0 10-2 0v5.5a5.5 5.5 0 0011 0V6z"}),paperclip:i.default.createElement("path",{d:"M14.382 4.619c-.763-.763-2-.763-2.763 0l-5.75 5.75a3.367 3.367 0 104.763 4.762l4.75-4.75a.877.877 0 011.237 0c.34.34.34.897 0 1.238l-4.75 4.75a5.118 5.118 0 01-7.237-7.237l5.75-5.75a3.704 3.704 0 015.237 5.237l-5.5 5.5a2.29 2.29 0 01-3.237-3.238l4.5-4.5a.877.877 0 011.237 0c.34.34.34.897 0 1.238l-4.5 4.5a.541.541 0 000 .762c.21.21.553.21.763 0l5.5-5.5c.762-.762.762-2 0-2.762z"}),paste:i.default.createElement("path",{d:"M12 5v-.5A1.5 1.5 0 0010.5 3H8.731C8.384 2.403 7.737 2 7 2c-.737 0-1.384.403-1.731 1H3.5A1.5 1.5 0 002 4.5v10A1.5 1.5 0 003.5 16H8V7.5A2.5 2.5 0 0110.5 5H12zm-5-.25a.751.751 0 010-1.5.751.751 0 010 1.5zM15 6v3h3l-3-3zm-1 3V6h-3.5A1.5 1.5 0 009 7.5v9a1.5 1.5 0 001.5 1.5h6a1.5 1.5 0 001.5-1.5V10h-3c-.55 0-1-.45-1-1z"}),"pdf-custom":i.default.createElement("path",{d:"M2.627 9.947c.474 0 .839-.107 1.094-.32.255-.214.383-.516.383-.907 0-.747-.492-1.12-1.477-1.12-.139 0-.274.01-.405.032-.059.014-.088.053-.088.117v2.07c0 .057.03.092.088.106.175.015.31.022.405.022zM2.407 6c2.481 0 3.722.871 3.722 2.613 0 .946-.281 1.664-.843 2.155-.554.484-1.368.725-2.44.725-.161 0-.365-.007-.613-.021-.066 0-.099.028-.099.085v1.728a.577.577 0 01-.186.427.607.607 0 01-.438.181H.624a.607.607 0 01-.438-.181.577.577 0 01-.186-.427V6.768c0-.17.058-.324.175-.459a.626.626 0 01.438-.224C1.233 6.028 1.83 6 2.408 6zM9.809 12.347c.62 0 1.083-.192 1.39-.576.314-.384.47-1.01.47-1.878 0-.782-.156-1.35-.47-1.706-.307-.356-.77-.534-1.39-.534-.139 0-.274.011-.405.032-.058.015-.088.05-.088.107v4.405c0 .064.03.103.088.118.131.021.266.032.405.032zM9.59 6c1.313 0 2.335.345 3.064 1.035.73.682 1.095 1.635 1.095 2.858 0 1.33-.369 2.347-1.106 3.051-.73.704-1.747 1.056-3.053 1.056-.576 0-1.175-.028-1.795-.085a.626.626 0 01-.438-.224.683.683 0 01-.175-.459V6.768c0-.17.059-.324.175-.459a.626.626 0 01.438-.224C8.415 6.028 9.014 6 9.59 6zM19.376 6.107c.168 0 .314.06.438.181.124.12.186.263.186.427v.49a.577.577 0 01-.186.427.607.607 0 01-.438.181h-2.233c-.065 0-.098.029-.098.086V9.21c0 .064.033.096.098.096h2.014c.168 0 .314.06.438.181.124.12.186.263.186.427v.384a.577.577 0 01-.186.426.607.607 0 01-.438.182h-2.014c-.065 0-.098.032-.098.096v2.282a.577.577 0 01-.186.427.607.607 0 01-.438.181h-.941a.607.607 0 01-.438-.181.577.577 0 01-.186-.427v-6.57c0-.164.062-.306.186-.427a.607.607 0 01.438-.181h3.896z"}),pencil:i.default.createElement("path",{d:"M15.178 8.884L7.891 16.17l-1.06-1.06.11-.109H5.5a.501.501 0 01-.5-.5v-1.44l-.11.109c-.147.15-.255.331-.314.531l-.719 2.444 2.443-.719c.172-.06.381-.169.531-.316l1.06 1.06a2.74 2.74 0 01-1.17.694l-3.76 1.106a.705.705 0 01-.741-.216c-.194-.166-.267-.45-.19-.715l1.107-3.76c.13-.44.368-.844.693-1.169l7.286-7.286 4.062 4.061zm2.219-5.048c.781.78.781 2.048 0 2.83l-1.513 1.512-4.062-4.062 1.512-1.512a2.003 2.003 0 012.832 0l1.23 1.232z"}),"plus-large":i.default.createElement("path",{d:"M11 9h6a.999.999 0 110 2h-6v6c0 .553-.447 1-1.028 1-.525 0-1-.447-1-1v-6H3a1 1 0 110-2h5.972V3c0-.552.475-1 1-1C10.553 2 11 2.448 11 3v6z"}),"plus-strong-custom":i.default.createElement("path",{d:"M10 16c.713 0 1.286-.573 1.286-1.286v-3.428h3.428c.713 0 1.286-.573 1.286-1.286 0-.713-.573-1.286-1.286-1.286h-3.428V5.286C11.286 4.573 10.713 4 10 4c-.713 0-1.286.573-1.286 1.286v3.428H5.286C4.573 8.714 4 9.287 4 10c0 .713.573 1.286 1.286 1.286h3.428v3.428C8.714 15.427 9.287 16 10 16z"}),plus:i.default.createElement("path",{d:"M16.5 10a1 1 0 01-1 1H11v4.5a1 1 0 11-2 0V11H4.5a1 1 0 110-2H9V4.5a1 1 0 112 0V9h4.5c.553 0 1 .447 1 1z"}),"power-off":i.default.createElement("path",{d:"M11 3a.999.999 0 10-2 0v7a.999.999 0 102 0V3zM6.484 5.769a1 1 0 00-1.28-1.538A7.502 7.502 0 0010 17.5a7.502 7.502 0 004.793-13.269 1.004 1.004 0 00-1.41.128 1.004 1.004 0 00.128 1.41 5.5 5.5 0 11-7.031 0h.003z"}),print:i.default.createElement("path",{d:"M16 8H4a2 2 0 00-2 2v3a1 1 0 001 1h1v3a1 1 0 001 1h10a1 1 0 001-1v-3h1a1 1 0 001-1v-3c0-1.103-.897-2-2-2zm-2 8H6v-3h8v3zm1.5-4.75a.75.75 0 110-1.5.75.75 0 010 1.5zM6 4h7.172l.828.828V7h2V4.414a1 1 0 00-.293-.707l-1.414-1.414A1 1 0 0013.588 2H5a1 1 0 00-1 1v4h2V4z"}),"quote-left":i.default.createElement("path",{d:"M6 9c-.353 0-.686.072-1 .184V9c0-1.103.897-2 2-2a1 1 0 000-2C4.794 5 3 6.794 3 9v3a3 3 0 103-3zm8 0c-.352 0-.686.072-1 .184V9c0-1.103.897-2 2-2a1 1 0 000-2c-2.206 0-4 1.794-4 4v3a3 3 0 103-3z"}),quotes:i.default.createElement("path",{d:"M11 7.25A2.249 2.249 0 008.75 5a2.116 2.116 0 00-.25.025V5c0-.552.448-1 1-1a1 1 0 000-2c-1.628.002-2.998 1.344-3 3v2.25a2.25 2.25 0 004.5 0zM3.25 5a2.164 2.164 0 00-.25.025V5c0-.552.448-1 1-1a1 1 0 000-2 3.003 3.003 0 00-3 3v2.25A2.25 2.25 0 103.25 5zm8 5.5A2.249 2.249 0 009 12.75 2.249 2.249 0 0011.25 15a2.23 2.23 0 00.25-.025V15c0 .552-.448 1-1 1a1 1 0 000 2c1.628-.002 2.998-1.344 3-3v-2.25a2.249 2.249 0 00-2.25-2.25zm5.5 0a2.25 2.25 0 100 4.5 2.23 2.23 0 00.25-.025V15c0 .552-.448 1-1 1a1 1 0 000 2c1.628-.002 2.998-1.344 3-3v-2.25a2.249 2.249 0 00-2.25-2.25z"}),"rectangles-mixed":i.default.createElement("path",{d:"M1 4.5A1.5 1.5 0 012.5 3h7A1.5 1.5 0 0111 4.5v4A1.5 1.5 0 019.5 10h-7A1.5 1.5 0 011 8.5v-4zm12 0A1.5 1.5 0 0114.5 3h3A1.5 1.5 0 0119 4.5v8a1.5 1.5 0 01-1.5 1.5h-3a1.5 1.5 0 01-1.5-1.5v-8zm-8.5 7H10a1.5 1.5 0 011.5 1.5v2.5A1.5 1.5 0 0110 17H4.5A1.5 1.5 0 013 15.5V13a1.5 1.5 0 011.5-1.5z"}),"reply-all":i.default.createElement("path",{d:"M5.26 9.069l5.5 4.722a.75.75 0 001.24-.568v-2.626c3.39.393 4.722 1.837 3.518 5.684-.157.503.45.893.877.582C17.762 15.87 19 13.967 19 12.048c0-4.104-2.965-5.413-7-5.735V3.751c0-.646-.76-.983-1.24-.568l-5.5 4.751a.748.748 0 000 1.135zm-4 0l5.5 4.722A.75.75 0 008 13.223v-.495L3.073 8.5 8 4.244V3.75c0-.646-.759-.983-1.24-.568l-5.5 4.722c-.348.326-.348.864-.001 1.164z"}),reply:i.default.createElement("path",{d:"M2.26 7.934l5.5-4.722C8.24 2.797 9 3.134 9 3.78v2.502c5.019.027 9 1.034 9 5.79 0 1.92-1.237 3.822-2.604 4.816-.427.31-1.035-.08-.877-.582 1.417-4.532-.672-5.735-5.519-5.807v2.748c0 .647-.76.983-1.24.567l-5.5-4.722c-.346-.323-.347-.86 0-1.158z"}),"right-from-bracket":i.default.createElement("path",{d:"M5 17h2a.999.999 0 100-2H5a1 1 0 01-1-1V6a1 1 0 011-1h2a1 1 0 100-2H5a3 3 0 00-3 3v8a3 3 0 003 3zm12.775-7.547l-4.503-4.25a.752.752 0 00-1.266.546l-.003 2.25h-4a1 1 0 00-1 1v2a1 1 0 001 1h4l.003 2.221a.751.751 0 001.266.546l4.503-4.25c.3-.254.3-.778 0-1.063z"}),"right-left":i.default.createElement("path",{d:"M3 7h9.997l.002 2.25a.75.75 0 001.261.55l3.5-3.25a.75.75 0 000-1.1l-3.5-3.25a.751.751 0 00-1.26.55L12.996 5H3c-.553 0-1 .447-1 .972C2 6.497 2.447 7 3 7zm14 6H7.003L7 10.722a.75.75 0 00-.45-.688.818.818 0 00-.81.166l-3.5 3.25a.75.75 0 000 1.1l3.5 3.25A.75.75 0 007 17.25L7.003 15H17a1 1 0 100-2z"}),"right-to-bracket":i.default.createElement("path",{d:"M12.772 9.453l-4.503-4.25a.752.752 0 00-1.266.547V8H3.001A1 1 0 002 9v2a1 1 0 001 1h4.004v2.25a.751.751 0 001.266.546l4.503-4.25c.299-.284.299-.808-.001-1.093zM15 3h-2a1 1 0 000 2h2a1 1 0 011 1v8a1 1 0 01-1 1h-2a1 1 0 000 2h2a3 3 0 003-3V6a3 3 0 00-3-3z"}),rocket:i.default.createElement("path",{d:"M6.894 14.028l-.966-.965a.977.977 0 01-.24-1.007c.093-.278.218-.64.368-1.056H2.75a.753.753 0 01-.653-.378.746.746 0 01.006-.753l1.64-2.766A2.25 2.25 0 015.679 6H8.25c.075-.125.15-.24.225-.353 2.56-3.775 6.372-3.9 8.647-3.481.362.065.644.35.712.712.42 2.278.291 6.088-3.48 8.647-.11.075-.229.15-.354.225v2.572c0 .794-.419 1.531-1.103 1.934l-2.766 1.641A.75.75 0 019 17.25V13.9c-.44.153-.825.278-1.116.372a.985.985 0 01-.993-.244h.003zM14 7.25a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5z"}),"rotate-left":i.default.createElement("path",{d:"M3.85 3a.843.843 0 00-.85.845v4.561a.6.6 0 00.6.6h4.552a.843.843 0 00.597-1.442l-1.41-1.41a5 5 0 013.165-1.146 5 5 0 014.994 4.995 4.999 4.999 0 01-4.992 4.995c-2.286 0-2.795-1.198-3.597-1.198a.997.997 0 00-1 .999C5.91 15.894 8.46 17 10.504 17c3.856 0 6.997-3.142 6.997-7 0-3.857-3.142-6.99-6.998-6.99a6.983 6.983 0 00-4.575 1.728L4.44 3.248A.828.828 0 003.85 3z"}),"rotate-right":i.default.createElement("path",{d:"M16.653 3.003c.434 0 .85.337.85.845v4.56c0 .33-.269.599-.6.599H12.35a.843.843 0 01-.597-1.44l1.41-1.411A5 5 0 009.998 5.01a5 5 0 00-4.994 4.993 4.998 4.998 0 004.993 4.993c2.286 0 2.795-1.197 3.597-1.197.577 0 .999.47.999.998 0 1.095-2.55 2.2-4.594 2.2-3.856 0-6.997-3.14-6.997-6.996 0-3.856 3.142-6.988 6.998-6.988 1.706 0 3.319.637 4.575 1.727l1.488-1.489a.828.828 0 01.59-.249z"}),rotate:i.default.createElement("path",{d:"M16.06 3.249l-1.516 1.516A6.746 6.746 0 0010 3a6.757 6.757 0 00-6.45 4.694 1 1 0 101.903.615 4.765 4.765 0 017.678-2.128l-1.41 1.382c-.5.525-.133 1.418.604 1.437h4.59a.598.598 0 00.585-.597V3.845c0-.752-.91-1.128-1.44-.596zm-.254 7.801a1 1 0 00-1.26.643A4.76 4.76 0 0110 15a4.764 4.764 0 01-3.131-1.181l1.381-1.382c.528-.524.162-1.418-.575-1.437H3.083a.599.599 0 00-.583.597v4.56c0 .75.908 1.127 1.44.595l1.515-1.516A6.738 6.738 0 009.972 17a6.757 6.757 0 006.45-4.694c.2-.525-.09-1.115-.616-1.256z"}),safari:i.default.createElement("path",{d:"M10.603 10.603L9.397 9.397l-2.3 3.506 3.506-2.3zM10 2c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm5.027 5.638l.477-.197a.258.258 0 01.198.477l-.476.197a.258.258 0 01-.199-.477zm-3.142-2.864l.197-.477a.258.258 0 01.477.199l-.198.477a.258.258 0 11-.476-.199zM10 3.677a.258.258 0 01.258.258v.517a.258.258 0 01-.516 0v-.517A.258.258 0 0110 3.677zm-2.42.482a.258.258 0 01.338.14l.197.475a.258.258 0 11-.477.198l-.197-.477a.258.258 0 01.14-.336zm-2.05 1.37a.258.258 0 01.365 0l.363.365a.258.258 0 01-.365.364l-.365-.365a.258.258 0 01.002-.364zM3.677 10a.258.258 0 01.258-.258h.517a.258.258 0 110 .516h-.517A.258.258 0 013.677 10zm1.296 2.362l-.477.197a.26.26 0 01-.337-.14.258.258 0 01.14-.337l.475-.197a.258.258 0 01.199.477zm.14-4.387a.258.258 0 01-.339.14l-.477-.197a.258.258 0 01.199-.477l.477.198a.258.258 0 01.14.336zm3.002 7.25l-.197.478a.259.259 0 01-.477-.198l.197-.477a.257.257 0 01.48-.002.258.258 0 01-.003.2zm2.143.84a.258.258 0 11-.516 0v-.517a.258.258 0 11.516 0v.516zm2.161-.224a.258.258 0 01-.337-.14l-.197-.475a.258.258 0 01.477-.198l.197.477a.258.258 0 01-.14.336zm2.051-1.37a.258.258 0 01-.365 0l-.363-.365a.258.258 0 01.365-.364l.365.365a.258.258 0 01-.002.364zm-3.494-3.495L5.3 14.699l3.723-5.675L14.7 5.301l-3.723 5.675zm4.865 1.443a.258.258 0 01-.337.14l-.477-.198a.258.258 0 11.199-.476l.477.197a.258.258 0 01.138.337zm.223-2.16h-.516a.258.258 0 110-.517h.516a.258.258 0 110 .516z"}),"screen-users":i.default.createElement("path",{d:"M3 2c-1.103 0-2 .897-2 2v5.762A2.988 2.988 0 013 9V4h14v5c.769 0 1.469.287 2 .762V4c0-1.103-.897-2-2-2H3zm2 10c0-1.103-.897-2-2-2s-2 .897-2 2 .897 2 2 2 2-.897 2-2zm-5 5c0 .553.447 1 1 1h4c.553 0 1-.447 1-1 0-1.103-.897-2-2-2H2c-1.103 0-2 .897-2 2zm12-5c0-1.103-.897-2-2-2s-2 .897-2 2 .897 2 2 2 2-.897 2-2zm-5 5c0 .553.447 1 1 1h4c.553 0 1-.447 1-1 0-1.103-.897-2-2-2H9c-1.103 0-2 .897-2 2zm10-3c1.103 0 2-.897 2-2s-.897-2-2-2-2 .897-2 2 .897 2 2 2zm-1 1c-1.103 0-2 .897-2 2 0 .553.447 1 1 1h4c.553 0 1-.447 1-1 0-1.103-.897-2-2-2h-2z"}),scribble:i.default.createElement("path",{d:"M9.91 4.323c-.385-.384-1.032-.397-1.404-.03L3.677 8.739a1 1 0 11-1.354-1.472L7.15 2.822a3.015 3.015 0 014.234 4.287l-6.209 6.572a.59.59 0 00-.031.772c.222.278.64.269.884.038l6.96-7.322c1.093-1.153 2.918-1.175 4.015-.053 1.031 1.03 1.135 2.68.2 3.803l-2.775 3.328a.985.985 0 001.35 1.419l.622-.466c.44-.331 1.04-.24 1.4.2.331.44.24 1.04-.2 1.4l-.622.466a2.984 2.984 0 01-4.084-4.3l2.772-3.329a.858.858 0 00-.05-1.134c-.328-.3-.86-.294-1.207.04L7.48 15.87c-1.082 1.137-2.945 1.06-3.897-.166a2.588 2.588 0 01.14-3.394l6.206-6.571c.378-.4.369-1.027-.019-1.415z"}),"seal-question":i.default.createElement("path",{d:"M8.922 2.446a1.53 1.53 0 012.159 0l1.463 1.466h2.034c.843 0 1.526.683 1.526 1.526v2.034l1.45 1.45a1.53 1.53 0 010 2.159l-1.45 1.45v2.063c0 .843-.683 1.526-1.526 1.526h-2.063l-1.434 1.434a1.53 1.53 0 01-2.159 0L7.485 16.12H5.422a1.526 1.526 0 01-1.526-1.526v-2.063l-1.45-1.45a1.53 1.53 0 010-2.159l1.45-1.45V5.438c0-.843.683-1.526 1.526-1.526h2.035l1.465-1.466zM7.26 7.132l-.012.038a.762.762 0 101.437.51l.012-.04a.253.253 0 01.239-.168h1.854a.48.48 0 01.238.897l-1.409.808a.761.761 0 00-.384.66v.43a.763.763 0 001.526.013l1.027-.588a2.006 2.006 0 00-.998-3.748H8.934c-.754 0-1.424.473-1.679 1.185l.003.003zm3.758 5.936a1.017 1.017 0 10-2.034 0 1.017 1.017 0 002.034 0z"}),"shared-folder":i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{d:"M19 6v10.286c0 .946-.756 1.714-1.688 1.714H2.688C1.756 18 1 17.232 1 16.286V3.714C1 2.768 1.756 2 2.688 2h5.624l2.25 2.286h6.75C18.244 4.286 19 5.054 19 6z",fill:"#897A31"}),i.default.createElement("path",{d:"M17.313 4.286h-6.75L8.313 2H2.686C1.756 2 1 2.768 1 3.714v12.572C1 17.232 1.756 18 2.688 18h14.624c.932 0 1.688-.768 1.688-1.714V6c0-.946-.756-1.714-1.688-1.714zM12.25 7.714c1.243 0 2.25 1.024 2.25 2.286s-1.007 2.286-2.25 2.286S10 11.26 10 10c0-1.26 1.009-2.286 2.25-2.286zm3.375 8h-6.75a.567.567 0 01-.563-.571c0-.947.756-1.714 1.688-1.714h4.5c.932 0 1.688.767 1.688 1.714a.569.569 0 01-.563.571z",fill:"#DFDF71"})),sliders:i.default.createElement("path",{d:"M2 15a1 1 0 011-1h1.708A2.498 2.498 0 017 12.5c1.025 0 1.878.616 2.29 1.5H17a.999.999 0 110 2H9.29c-.412.884-1.265 1.5-2.29 1.5A2.498 2.498 0 014.708 16H3a1 1 0 01-1-1zm6 0a.999.999 0 10-2 0 .999.999 0 102 0zm5-7.5c1.025 0 1.878.616 2.29 1.5H17a.999.999 0 110 2h-1.71c-.412.884-1.265 1.5-2.29 1.5a2.495 2.495 0 01-2.29-1.5H3a1 1 0 110-2h7.71A2.495 2.495 0 0113 7.5zm1 2.5a.999.999 0 10-2 0 .999.999 0 102 0zm3-6a1 1 0 110 2h-6.71C9.879 6.884 9.026 7.5 8 7.5A2.495 2.495 0 015.71 6H3a1 1 0 110-2h2.71A2.498 2.498 0 018 2.5c1.025 0 1.878.617 2.29 1.5H17zM7 5a.999.999 0 102 0 1 1 0 10-2 0z"}),sparkles:i.default.createElement("path",{d:"M12.234 4.662A.362.362 0 0012 5c0 .15.094.284.234.338L14 6l.662 1.766a.362.362 0 00.675 0L16 6l1.766-.662A.362.362 0 0018 5a.362.362 0 00-.234-.338L16 4l-.662-1.766a.362.362 0 00-.675 0L14 4l-1.766.662zM8.41 4.291a.498.498 0 00-.906 0l-1.65 3.562L2.291 9.5a.5.5 0 000 .91l3.565 1.646L7.5 15.62a.498.498 0 00.906 0l1.647-3.566 3.566-1.647a.498.498 0 000-.906l-3.563-1.644L8.41 4.291zM14 14l-1.766.662A.362.362 0 0012 15c0 .15.094.284.234.338L14 16l.662 1.766a.362.362 0 00.675 0L16 16l1.766-.662A.362.362 0 0018 15a.362.362 0 00-.234-.338L16 14l-.662-1.766A.362.362 0 0015 12a.362.362 0 00-.338.234L14 14z"}),"square-check-line":i.default.createElement("path",{d:"M9.619 12.619a.877.877 0 01-1.238 0l-2-2A.875.875 0 017.62 9.38L9 10.762l3.381-3.38a.877.877 0 011.238 0c.34.34.34.896 0 1.237l-4 4zM3 5a2 2 0 012-2h10a2 2 0 012 2v10c0 1.103-.897 2-2 2H5a2 2 0 01-2-2V5zm1.5 0v10a.5.5 0 00.5.5h10c.275 0 .5-.225.5-.5V5a.5.5 0 00-.5-.5H5a.5.5 0 00-.5.5z"}),"square-check":i.default.createElement("path",{d:"M15 3a2 2 0 012 2v10c0 1.103-.897 2-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h10zm-1.381 5.619a.877.877 0 000-1.238.877.877 0 00-1.238 0L9 10.762l-1.381-1.38a.875.875 0 00-1.238 1.237l2 2c.34.34.897.34 1.238 0l4-4z"}),"square-info-line":i.default.createElement("path",{d:"M15 3H5a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V5c0-1.104-.897-2-2-2zm.5 12a.5.5 0 01-.5.5H5a.5.5 0 01-.5-.5V5a.5.5 0 01.5-.5h10a.5.5 0 01.5.5v10zm-4.25-2.5h-.5V9.75A.75.75 0 0010 9H9a.752.752 0 00-.75.75c0 .412.338.75.75.75h.25v2h-.5a.752.752 0 00-.75.75c0 .412.338.75.75.75h2.5a.75.75 0 000-1.5zM10 8a1 1 0 100-2 1 1 0 000 2z"}),"square-info":i.default.createElement("path",{d:"M15 3H5a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V5a2 2 0 00-2-2zm-5 3a1 1 0 110 2 1 1 0 010-2zm1.25 8h-2.5a.75.75 0 010-1.5h.5v-2H9A.75.75 0 019 9h1a.75.75 0 01.75.75v2.75h.5a.75.75 0 010 1.5z"}),"square-line":i.default.createElement("path",{d:"M15 3a2 2 0 012 2v10c0 1.103-.897 2-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h10zm0 1.5H5a.5.5 0 00-.5.5v10a.5.5 0 00.5.5h10c.275 0 .5-.225.5-.5V5a.5.5 0 00-.5-.5z"}),"square-lines-corner-custom":i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{d:"M16.4 2H3.6C2.718 2 2 2.718 2 3.6v12.8c0 .882.718 1.6 1.6 1.6h12.8c.882 0 1.6-.718 1.6-1.6V3.6c0-.882-.718-1.6-1.6-1.6zm-.002 13.867a.533.533 0 01-.534.533H4.134a.533.533 0 01-.534-.533V4.133c0-.294.239-.533.533-.533h11.734c.294 0 .533.239.533.533l-.002 11.734z"}),i.default.createElement("path",{d:"M5.2 6.8A.8.8 0 016 6h8a.8.8 0 010 1.6H6a.8.8 0 01-.8-.8zM5.2 10a.8.8 0 01.8-.8h8a.8.8 0 010 1.6H6a.8.8 0 01-.8-.8zM5.2 13.2a.8.8 0 01.8-.8h5.6a.8.8 0 010 1.6H6a.8.8 0 01-.8-.8zM16.398 11.62l.002 4.78h-4.8l4.798-4.78z"})),"square-lines-custom":i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{d:"M16.4 2H3.6C2.718 2 2 2.718 2 3.6v12.8c0 .882.718 1.6 1.6 1.6h12.8c.882 0 1.6-.718 1.6-1.6V3.6c0-.882-.718-1.6-1.6-1.6zm-.002 13.867a.533.533 0 01-.534.533H4.134a.533.533 0 01-.534-.533V4.133c0-.294.239-.533.533-.533h11.734c.294 0 .533.239.533.533l-.002 11.734z"}),i.default.createElement("path",{d:"M5.2 6.8A.8.8 0 016 6h8a.8.8 0 010 1.6H6a.8.8 0 01-.8-.8zM5.2 10a.8.8 0 01.8-.8h8a.8.8 0 010 1.6H6a.8.8 0 01-.8-.8zM5.2 13.2a.8.8 0 01.8-.8h5.6a.8.8 0 010 1.6H6a.8.8 0 01-.8-.8z"})),"square-list":i.default.createElement("path",{d:"M3 5a2 2 0 012-2h10a2 2 0 012 2v10c0 1.103-.897 2-2 2H5a2 2 0 01-2-2V5zm4 5a.999.999 0 10-2 0 1 1 0 102 0zm0-3a.999.999 0 10-2 0 1 1 0 102 0zm0 6a.999.999 0 10-2 0 1 1 0 102 0zm2-6.75a.748.748 0 00-.75.75c0 .416.334.75.75.75h5c.416 0 .75-.334.75-.75a.748.748 0 00-.75-.75H9zm0 3a.748.748 0 00-.75.75c0 .416.334.75.75.75h5c.416 0 .75-.334.75-.75a.748.748 0 00-.75-.75H9zm0 3a.748.748 0 00-.75.75c0 .416.334.75.75.75h5c.416 0 .75-.334.75-.75a.748.748 0 00-.75-.75H9z"}),"square-minus-line":i.default.createElement("path",{d:"M12.75 9.25c.416 0 .75.334.75.75s-.334.75-.75.75h-5.5A.748.748 0 016.5 10c0-.416.334-.75.75-.75h5.5zM3 5a2 2 0 012-2h10a2 2 0 012 2v10c0 1.103-.897 2-2 2H5a2 2 0 01-2-2V5zm1.5 0v10a.5.5 0 00.5.5h10c.275 0 .5-.225.5-.5V5a.5.5 0 00-.5-.5H5a.5.5 0 00-.5.5z"}),"square-minus":i.default.createElement("path",{d:"M15 3a2 2 0 012 2v10c0 1.103-.897 2-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h10zM7.25 9.25a.748.748 0 00-.75.75c0 .416.334.75.75.75h5.5c.416 0 .75-.334.75-.75a.748.748 0 00-.75-.75h-5.5z"}),"square-plus":i.default.createElement("path",{d:"M15 3a2 2 0 012 2v10c0 1.103-.897 2-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h10zm-5 10.5c.416 0 .75-.334.75-.75v-2h2c.416 0 .75-.334.75-.75a.748.748 0 00-.75-.75h-2v-2A.748.748 0 0010 6.5a.748.748 0 00-.75.75v2h-2a.748.748 0 00-.75.75c0 .416.334.75.75.75h2v2c0 .416.334.75.75.75z"}),"square-question":i.default.createElement("path",{d:"M5 3c-1.103 0-2 .897-2 2v10c0 1.103.897 2 2 2h10c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2H5zm2.306 4.166A1.753 1.753 0 018.956 6h1.822a1.972 1.972 0 01.981 3.684l-1.009.579A.752.752 0 0110 11a.748.748 0 01-.75-.75v-.422c0-.269.144-.515.378-.65l1.384-.794a.473.473 0 00-.234-.88H8.956c-.106 0-.2.065-.234.165l-.013.037a.75.75 0 01-1.412-.5l.012-.037-.003-.003zM11 13a.999.999 0 11-2 0 .999.999 0 112 0z"}),"square-quote":i.default.createElement("path",{d:"M15 3H5a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V5a2 2 0 00-2-2zm-5.5 7.75C9.5 11.99 8.49 13 7.25 13a.75.75 0 010-1.5c.412 0 .75-.338.75-.75v-.275a1.653 1.653 0 01-.25.025 1.751 1.751 0 010-3.5c.966 0 1.75.784 1.75 1.75v2zm4.5 0c0 1.24-1.01 2.25-2.25 2.25a.75.75 0 010-1.5c.413 0 .75-.337.75-.75v-.275a1.653 1.653 0 01-.25.025A1.75 1.75 0 1114 8.75v2z"}),"square-small-line":i.default.createElement("path",{d:"M13 5c1.103 0 2 .897 2 2v6c0 1.103-.897 2-2 2H7a2 2 0 01-2-2V7a2 2 0 012-2h6zm0 1.5H7a.5.5 0 00-.5.5v6a.5.5 0 00.5.5h6c.275 0 .5-.225.5-.5V7c0-.275-.225-.5-.5-.5z"}),"square-small":i.default.createElement("path",{d:"M5 7a2 2 0 012-2h6c1.103 0 2 .897 2 2v6c0 1.103-.897 2-2 2H7a2 2 0 01-2-2V7z"}),square:i.default.createElement("path",{d:"M3 5a2 2 0 012-2h10a2 2 0 012 2v10c0 1.103-.897 2-2 2H5a2 2 0 01-2-2V5z"}),"stack-custom":i.default.createElement("path",{d:"M14.635 11.643c.1-.46-.205-.91-.682-1.006L6.976 9.229c-.48-.096-.95.2-1.05.66-.101.462.207.915.687 1.011l6.979 1.398c.476.095.942-.198 1.043-.655zm1.884-3.877a.83.83 0 00-.114-1.201l-5.468-4.368a.911.911 0 00-1.248.11.83.83 0 00.115 1.201l5.468 4.368c.376.301.934.252 1.247-.11zm-1.194 1.806a.838.838 0 00-.43-1.132L8.439 5.557a.904.904 0 00-1.182.418.84.84 0 00.434 1.132l6.458 2.879a.901.901 0 001.176-.414zm-.872 4.168c0-.466-.393-.845-.878-.845H6.43c-.485 0-.878.379-.878.845 0 .466.393.844.878.844h7.145c.485 0 .878-.378.878-.844zm1.767 1.597c0 .531-.448.962-1 .962H4.78c-.552 0-1-.431-1-.962V12.05c0-.473-.398-.856-.89-.856-.491 0-.89.383-.89.856v4.988c0 .532.448.962 1 .962h14c.552 0 1-.43 1-.962V12.05c0-.473-.398-.856-.89-.856s-.89.383-.89.856v3.287z"}),stapler:i.default.createElement("path",{d:"M20 11.353V15.5a1.5 1.5 0 01-1.5 1.5H2a.999.999 0 110-2h12v-1.5H3c-.553 0-1-.447-1-1V8.856l-.944-.168a1.28 1.28 0 01-.8-2.029L1.37 5.175a5.438 5.438 0 016.778-1.6L18.34 8.672A2.993 2.993 0 0120 11.353zm-6 .147V11L4 9.216V11.5h10z"}),"star-line":i.default.createElement("path",{d:"M9.997 2a.75.75 0 01.675.422l2.144 4.416 4.79.709c.281.04.513.237.603.506a.752.752 0 01-.184.766l-3.475 3.443.822 4.86a.749.749 0 01-.303.734c-.232.166-.566.188-.79.053l-4.282-2.287-4.306 2.287c-.225.135-.532.113-.766-.053a.835.835 0 01-.328-.734l.847-4.86L1.972 8.82a.748.748 0 01.418-1.272l4.788-.71 2.144-4.415A.753.753 0 019.997 2zm0 2.467L8.357 7.85a.763.763 0 01-.566.416l-3.698.543 2.685 2.66c.172.172.25.418.21.66l-.632 3.737 3.288-1.757a.744.744 0 01.706 0l3.287 1.757-.63-3.738a.758.758 0 01.212-.66l2.684-2.659-3.697-.543a.752.752 0 01-.565-.416L9.997 4.467z"}),star:i.default.createElement("path",{d:"M12.913 6.697l4.491.662a.998.998 0 01.556 1.7l-3.256 3.194.769 4.581a1.002 1.002 0 01-1.456 1.05l-4.013-2.14-4.01 2.14c-.337.178-.746.15-1.056-.072a.995.995 0 01-.4-.978l.77-4.58L2.05 9.058a1.005 1.005 0 01-.246-1.025.994.994 0 01.804-.675l4.487-.662 2.012-4.135a.997.997 0 011.797 0l2.01 4.135z"}),strikethrough:i.default.createElement("path",{d:"M12.381 11.997c.538.38.698.828.582 1.507-.095.55-.34.916-.773 1.155-1.107.618-3.39.374-5.812-.615a1 1 0 10-.756 1.852C6.614 16.3 8.612 17 10.547 17c.925 0 1.838-.161 2.616-.593.963-.534 1.576-1.42 1.773-2.566.125-.727.067-1.33-.11-1.845h-2.445zm4.869-2.5l-5.516-.001a25.457 25.457 0 00-1.459-.457c-2.67-.77-3.466-1.22-3.24-2.542.077-.454.317-.81.71-1.063.64-.41 2.001-.745 4.856.01a1 1 0 10.511-1.932c-2.853-.756-5.021-.676-6.446.239a3.554 3.554 0 00-1.6 2.408c-.277 1.607.306 2.632 1.221 3.338H2.75c-.414 0-.75.336-.75.722 0 .414.336.722.75.722h14.5c.414 0 .75-.336.75-.722 0-.385-.334-.722-.75-.722z"}),"stripe-s":i.default.createElement("path",{d:"M8.853 6.831c0-.697.581-.965 1.513-.965 1.356 0 3.078.415 4.434 1.147V2.816C13.322 2.225 11.847 2 10.369 2 6.753 2 4.344 3.888 4.344 7.044c0 4.934 6.775 4.134 6.775 6.262 0 .825-.716 1.09-1.71 1.09-1.475 0-3.38-.609-4.878-1.421v4.016a12.378 12.378 0 004.875 1.012c3.707 0 6.26-1.594 6.26-4.8 0-5.319-6.813-4.365-6.813-6.372z"}),subcript:i.default.createElement("path",{d:"M1.25 2.5C.559 2.5 0 3.059 0 3.75S.559 5 1.25 5h.598l3.5 5-3.5 5H1.25C.559 15 0 15.559 0 16.25s.559 1.25 1.25 1.25H2.5c.406 0 .79-.2 1.023-.531l3.352-4.79 3.352 4.79c.234.336.617.531 1.023.531h1.25c.691 0 1.25-.559 1.25-1.25S13.191 15 12.5 15h-.598l-3.5-5 3.5-5h.598c.691 0 1.25-.559 1.25-1.25S13.191 2.5 12.5 2.5h-1.25c-.406 0-.79.2-1.023.531l-3.352 4.79-3.352-4.79A1.256 1.256 0 002.5 2.5H1.25zm17.5 10c0-.434-.223-.836-.594-1.063a1.247 1.247 0 00-1.215-.054l-1.25.625a1.249 1.249 0 00.559 2.367V17.5c-.691 0-1.25.559-1.25 1.25S15.559 20 16.25 20h2.5c.691 0 1.25-.559 1.25-1.25s-.559-1.25-1.25-1.25v-5z"}),superscript:i.default.createElement("path",{d:"M18.75 1.25c0-.434-.223-.836-.594-1.062a1.247 1.247 0 00-1.215-.055l-1.25.625a1.249 1.249 0 00.559 2.367V6.25c-.691 0-1.25.559-1.25 1.25s.559 1.25 1.25 1.25h2.5c.691 0 1.25-.559 1.25-1.25s-.559-1.25-1.25-1.25v-5zM1.25 2.5C.559 2.5 0 3.059 0 3.75S.559 5 1.25 5h.598l3.5 5-3.5 5H1.25C.559 15 0 15.559 0 16.25s.559 1.25 1.25 1.25H2.5c.406 0 .79-.2 1.023-.531l3.352-4.79 3.352 4.79c.234.336.617.531 1.023.531h1.25c.691 0 1.25-.559 1.25-1.25S13.191 15 12.5 15h-.598l-3.5-5 3.5-5h.598c.691 0 1.25-.559 1.25-1.25S13.191 2.5 12.5 2.5h-1.25c-.406 0-.79.2-1.023.531l-3.352 4.79-3.352-4.79A1.256 1.256 0 002.5 2.5H1.25z"}),"tag-gear-custom":i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{d:"M11.1 11.906l.75-1.3a.75.75 0 011.025-.275l.25.144c.153.088.34.078.494-.01a.494.494 0 00.256-.421v-.288c0-.415.335-.75.75-.75L14.628 9h1.5c.416 0 .75.334.75.75v.294c0 .175.104.331.253.418a.492.492 0 00.491.01l.256-.147a.75.75 0 011.025.275l.75 1.3a.75.75 0 01-.275 1.025l-.278.16a.463.463 0 00-.225.406c0 .178.085.347.238.434l.262.153a.75.75 0 01.275 1.025l-.75 1.3a.75.75 0 01-1.025.275l-.278-.16a.478.478 0 00-.475.01.477.477 0 00-.247.406v.322c0 .416-.334.75-.75.75h-1.5a.748.748 0 01-.75-.75v-.312c0-.172-.1-.325-.247-.41a.484.484 0 00-.478-.009l-.272.156a.75.75 0 01-1.025-.275l-.75-1.3a.753.753 0 01.272-1.025l.25-.143a.505.505 0 00.244-.441.47.47 0 00-.228-.413l-.266-.153a.75.75 0 01-.275-1.025zm2.975.84a1.498 1.498 0 001.3 2.25c.538 0 1.032-.284 1.3-.75a1.496 1.496 0 000-1.5 1.497 1.497 0 00-1.3-.75c-.537 0-1.031.285-1.3.75z"}),i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.68 2h4.784C13.312 2 14 2.688 14 3.536v4.482a.838.838 0 00-.715.822v.319a.546.546 0 01-.293.468.583.583 0 01-.564.01l-.286-.159a.871.871 0 00-1.17.305l-.857 1.444a.82.82 0 00.314 1.138l.24.134-2.9 2.9c-.8.801-2.1.801-2.9 0L.6 11.132c-.8-.8-.8-2.1 0-2.9l5.633-5.63C6.617 2.215 7.135 2 7.679 2zM9.39 5.584a1.023 1.023 0 102.049 0 1.024 1.024 0 10-2.049 0z"})),"tag-line":i.default.createElement("path",{d:"M5.5 6.5a1 1 0 112 0 1 1 0 01-2 0zM9.172 3c.531 0 1.037.21 1.412.586l5.5 5.498c.782.782.782 2.05 0 2.832l-4.168 4.168a2.003 2.003 0 01-2.832 0l-5.498-5.5A1.994 1.994 0 013 9.172V4.5A1.5 1.5 0 014.5 3h4.672zM4.647 9.525l5.5 5.5a.496.496 0 00.706 0l4.172-4.172a.496.496 0 000-.706l-5.5-5.5a.502.502 0 00-.353-.147H4.5v4.672c0 .131.053.26.147.353z"}),"tag-plus-custom":i.default.createElement("path",{d:"M14.75 17.25v-2h-2a.748.748 0 01-.75-.75c0-.416.334-.75.75-.75h2v-2c0-.416.334-.75.75-.75s.75.334.75.75v2h2c.416 0 .75.334.75.75s-.334.75-.75.75h-2v2c0 .416-.334.75-.75.75a.748.748 0 01-.75-.75zM13.464 2H8.679c-.544 0-1.062.216-1.446.6L1.6 8.231c-.8.8-.8 2.1 0 2.9L5.87 15.4c.8.8 2.099.8 2.899 0l5.63-5.633c.385-.384.601-.902.601-1.446V3.536C15 2.688 14.312 2 13.464 2zm-2.048 4.609a1.023 1.023 0 110-2.049 1.024 1.024 0 110 2.049z"}),tag:i.default.createElement("path",{d:"M4.5 3h4.672c.531 0 1.037.21 1.412.586l5.5 5.498c.782.782.782 2.05 0 2.832l-4.168 4.168a2.003 2.003 0 01-2.832 0l-5.498-5.5A1.994 1.994 0 013 9.172V4.5A1.5 1.5 0 014.5 3zm2 4.5a.999.999 0 100-2 1 1 0 100 2z"}),tags:i.default.createElement("path",{d:"M16.775 7.263a4.254 4.254 0 010 5.975l-3.5 3.54a.75.75 0 11-1.066-1.056l3.497-3.538a2.752 2.752 0 000-3.868l-3.99-4.039a.746.746 0 01.006-1.06c.294-.292.769-.289 1.031.006l4.022 4.04zM2 9.172V4.5A1.5 1.5 0 013.5 3h4.672c.531 0 1.037.21 1.412.586l5.25 5.248c.782.782.782 2.05 0 2.832l-4.168 4.168a2.003 2.003 0 01-2.832 0l-5.248-5.25A1.994 1.994 0 012 9.172zM5.5 5.5a1 1 0 100 2 1 1 0 000-2z"}),text:i.default.createElement("path",{d:"M17 4v2a1 1 0 11-2 0V5h-4v10h1.5a1 1 0 011 1c0 .553-.447.972-1 .972h-5c-.553 0-1-.447-1-.972 0-.524.447-1 1-1H9V5H5v1a1 1 0 11-2 0V4a1 1 0 011-1h12a1 1 0 011 1z"}),"thumbs-down":i.default.createElement("path",{d:"M11.794 16.972a1.501 1.501 0 001.178-1.766l-.072-.356a7.45 7.45 0 00-.9-2.35h4.5a1.5 1.5 0 00.69-2.831 1.5 1.5 0 00-.656-2.64 1.5 1.5 0 00-.818-2.204A1.5 1.5 0 0014.25 3h-3.047c-.594 0-1.172.175-1.665.503l-1.204.803A3 3 0 007 6.803v3.475a3.01 3.01 0 001.125 2.344l.231.184a4.49 4.49 0 011.6 2.632l.072.356c.163.812.953 1.34 1.766 1.178zM3 14h2c.553 0 1-.447 1-1V6c0-.553-.447-1-1-1H3c-.553 0-1 .447-1 1v7c0 .553.447 1 1 1z"}),"thumbs-up-line":i.default.createElement("path",{d:"M12.119 3.088A2.25 2.25 0 009.338 4.63l-.179.625A2.743 2.743 0 018.55 6.35L6.947 8.113a.75.75 0 001.11 1.009l1.602-1.763c.441-.484.763-1.062.941-1.69l.178-.625a.75.75 0 111.444.412l-.178.625a5.732 5.732 0 01-.832 1.735A.75.75 0 0011.825 9H16a.501.501 0 01.175.969.752.752 0 00-.3 1.2.5.5 0 01-.281.822.753.753 0 00-.563.472.755.755 0 00.113.728.5.5 0 01-.213.775.75.75 0 00-.45.9.501.501 0 01-.481.634h-3.047c-.394 0-.781-.116-1.11-.334L7.917 13.88a.748.748 0 00-1.041.21.748.748 0 00.21 1.04l1.927 1.285a3.49 3.49 0 001.941.587H14a2.002 2.002 0 002-1.937 1.996 1.996 0 00.71-1.97 1.996 1.996 0 00.703-2.177c.362-.366.587-.866.587-1.419a2 2 0 00-2-2h-2.884a7.18 7.18 0 00.368-1.006l.178-.625a2.25 2.25 0 00-1.543-2.781zM3 8c-.553 0-1 .447-1 1v7c0 .553.447 1 1 1h2c.553 0 1-.447 1-1V9c0-.553-.447-1-1-1H3z"}),"thumbs-up":i.default.createElement("path",{d:"M11.794 3.028c.812.163 1.34.953 1.178 1.766l-.072.356A7.45 7.45 0 0112 7.5h4.5a1.5 1.5 0 01.69 2.831 1.5 1.5 0 01-.656 2.64 1.5 1.5 0 01-.818 2.204A1.5 1.5 0 0114.25 17h-3.047a3.006 3.006 0 01-1.665-.503l-1.204-.803A3 3 0 017 13.197V9.722a3.01 3.01 0 011.125-2.344l.231-.184a4.49 4.49 0 001.6-2.631l.072-.357a1.501 1.501 0 011.766-1.178zM3 8h2c.553 0 1 .447 1 1v7c0 .553-.447 1-1 1H3c-.553 0-1-.447-1-1V9c0-.553.447-1 1-1z"}),"thumbtack-custom":i.default.createElement("path",{d:"M12.475 13.536l-3.007 3.007a.991.991 0 01-.829.285 1.008 1.008 0 01-.736-.48l-.415-.689a5.24 5.24 0 01-.653-3.69L3.962 8.613l-.68.68a.758.758 0 01-.343.197.756.756 0 01-.719-.196.748.748 0 010-1.061l6.014-6.013a.748.748 0 011.061 0 .75.75 0 010 1.06l-.681.681 3.352 2.875a5.25 5.25 0 013.691.653l.69.416a.996.996 0 01.194 1.565l-3.005 3.004 3.005 3.005a.748.748 0 010 1.061.748.748 0 01-1.06 0l-3.006-3.005z"}),"thumbtack-line-custom":i.default.createElement("path",{d:"M5.1 7.639l2.875 3.352c.299.347.42.809.334 1.258a3.733 3.733 0 00.468 2.638l.084.142 2.553-2.554c-.294-.293-.46-.81-.165-1.104.293-.294.932-.25 1.226.043l2.554-2.553-.142-.084a3.73 3.73 0 00-2.636-.466 1.498 1.498 0 01-1.258-.333L7.64 5.1c-.029-.025-.058-.053-.084-.08L5.023 7.553c.027.026.056.055.08.084l-.002.002zm7.375 5.897l-3.007 3.007a.991.991 0 01-.829.285 1.008 1.008 0 01-.736-.48l-.415-.689a5.24 5.24 0 01-.653-3.69L3.962 8.613l-.68.68a.758.758 0 01-.343.197.756.756 0 01-.719-.196.748.748 0 010-1.061l6.014-6.013a.748.748 0 011.061 0 .75.75 0 010 1.06l-.681.681 3.352 2.875a5.25 5.25 0 013.691.653l.69.416a.996.996 0 01.194 1.565l-3.005 3.004 3.005 3.005a.748.748 0 010 1.061.748.748 0 01-1.06 0l-3.006-3.005z"}),thumbtack:i.default.createElement("path",{d:"M5 4c0-.553.447-1 1-1h8a.999.999 0 110 2h-.922l.356 4.631a5.25 5.25 0 012.485 2.96l.031.093c.103.307.05.641-.137.9-.188.26-.491.416-.813.416H5a1.001 1.001 0 01-.95-1.316l.031-.093a5.25 5.25 0 012.485-2.96L6.922 5H6c-.553 0-1-.447-1-1zm4 11h2v3a.999.999 0 11-2 0v-3z"}),"thums-down-line":i.default.createElement("path",{d:"M12.119 16.913a2.25 2.25 0 01-2.781-1.544l-.179-.625a2.743 2.743 0 00-.609-1.094l-1.603-1.763a.75.75 0 011.11-1.009l1.602 1.763c.441.484.763 1.062.941 1.69l.178.625a.75.75 0 101.444-.413l-.178-.624a5.732 5.732 0 00-.832-1.735.75.75 0 01.613-1.184H16a.501.501 0 00.175-.969.752.752 0 01-.3-1.2.5.5 0 00-.281-.822.75.75 0 01-.45-1.203.5.5 0 00-.213-.775.75.75 0 01-.45-.9.501.501 0 00-.481-.634h-3.047c-.394 0-.781.116-1.11.334L7.917 6.116a.748.748 0 01-1.041-.21.748.748 0 01.21-1.04L9.011 3.58a3.49 3.49 0 011.941-.587H14c1.084 0 1.966.862 2 1.937a1.996 1.996 0 01.71 1.969 1.997 1.997 0 01.703 2.178c.362.369.587.869.587 1.422a2 2 0 01-2 2h-2.884c.146.325.271.662.368 1.006l.178.625a2.25 2.25 0 01-1.543 2.782zM3 14c-.553 0-1-.447-1-1V6c0-.553.447-1 1-1h2c.553 0 1 .447 1 1v7c0 .553-.447 1-1 1H3z"}),"toggle-off-large":i.default.createElement("path",{d:"M1 10c0-3.34 2.686-6 6-6h6c3.313 0 6 2.66 6 6 0 3.313-2.688 6-6 6H7a6 6 0 01-6-6zm6-4a4 4 0 100 8 4 4 0 000-8zm6 8a4 4 0 100-8h-1.528C12.422 7.034 13 8.463 13 10a5.979 5.979 0 01-1.528 4H13z"}),"toggle-off":i.default.createElement("path",{d:"M7 13c-1.684 0-3-1.344-3-3 0-1.684 1.316-3 3-3 1.656 0 3 1.316 3 3a3 3 0 01-3 3zm6 3H7a6 6 0 01-6-6c0-3.34 2.686-6 6-6h6c3.313 0 6 2.66 6 6 0 3.313-2.688 6-6 6zm0-10H7a4 4 0 100 8h6a4 4 0 100-8z"}),"toggle-on-large":i.default.createElement("path",{d:"M13 4c3.313 0 6 2.66 6 6 0 3.313-2.688 6-6 6H7a6 6 0 01-6-6c0-3.34 2.686-6 6-6h6zm0 10a4 4 0 100-8 4 4 0 000 8z"}),"toggle-on":i.default.createElement("path",{d:"M13 4c3.313 0 6 2.66 6 6 0 3.313-2.688 6-6 6H7a6 6 0 01-6-6c0-3.34 2.686-6 6-6h6zm0 9a3 3 0 003-3c0-1.684-1.344-3-3-3-1.684 0-3 1.316-3 3 0 1.656 1.316 3 3 3z"}),"trash-can-custom":i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.185 6v10.316c0 .928.755 1.684 1.684 1.684h8.422c.929 0 1.684-.756 1.684-1.684V6H4.185zm5.053 7.79a.842.842 0 01-1.684 0v-3.368a.842.842 0 111.684 0v3.368zm2.526.842a.842.842 0 00.843-.842v-3.368a.842.842 0 00-1.685 0v3.368c0 .465.377.842.842.842z"}),i.default.createElement("path",{d:"M8.119 2a.999.999 0 00-.894.553L7 3H4a1 1 0 000 2h12a1 1 0 100-2h-3l-.225-.447A.999.999 0 0011.881 2H8.12z"})),"trash-can-xmark":i.default.createElement("path",{d:"M11.881 2c.378 0 .725.214.894.553L13 3h3a1 1 0 110 2H4a1 1 0 010-2h3l.225-.447A.999.999 0 018.119 2h3.762zm-7.91 4H16v10c0 1.103-.897 2-2 2H5.972c-1.077 0-2-.897-2-2V6zm3.498 4.503l1.472 1.469-1.472 1.497c-.29.293-.29.769 0 1.034.293.319.769.319 1.034 0l1.469-1.444 1.497 1.444c.293.319.769.319 1.034 0 .319-.265.319-.74 0-1.034l-1.444-1.497 1.444-1.469c.319-.265.319-.74 0-1.034-.265-.29-.74-.29-1.034 0L9.972 10.94 8.503 9.469c-.265-.29-.74-.29-1.034 0-.29.293-.29.769 0 1.034z"}),"trash-can":i.default.createElement("path",{d:"M7.225 2.553A.999.999 0 018.119 2h3.762c.378 0 .725.214.894.553L13 3h3a1 1 0 110 2H4a1 1 0 010-2h3l.225-.447zM3.972 6H16v10c0 1.103-.897 2-2 2H5.972c-1.077 0-2-.897-2-2V6zm2.5 2.5v7c0 .275.253.5.5.5.303 0 .5-.225.5-.5v-7c0-.275-.197-.5-.5-.5a.52.52 0 00-.5.5zm3 0v7c0 .275.253.5.5.5.303 0 .528-.225.528-.5v-7c0-.275-.225-.5-.528-.5a.52.52 0 00-.5.5zm3.028 0v7c0 .275.225.5.5.5s.5-.225.5-.5v-7c0-.275-.225-.5-.5-.5s-.5.225-.5.5z"}),"triangle-exclamation-line":i.default.createElement("path",{d:"M17.822 15.031L11.156 3.656A1.326 1.326 0 0010 3c-.45 0-.9.219-1.184.656L2.153 15.031C1.67 15.903 2.308 17 3.336 17h13.33c1.025 0 1.665-1.094 1.156-1.969zM3.643 15.5L9.972 4.65l6.384 10.85H3.643zM10 12.534a.983.983 0 100 1.966.983.983 0 000-1.966zM9.25 7.75v3a.75.75 0 001.5 0v-3a.75.75 0 00-1.5 0z"}),"triangle-exclamation":i.default.createElement("path",{d:"M17.823 15.031L11.157 3.656c-.51-.875-1.798-.875-2.312 0L2.183 15.031C1.67 15.903 2.309 17 3.337 17h13.33c1.024 0 1.665-1.094 1.156-1.969zM9.25 7.25a.75.75 0 011.5 0v4c0 .414-.336.75-.722.75-.386 0-.778-.334-.778-.75v-4zM10 15a.983.983 0 110-1.965.983.983 0 010 1.965z"}),twitter:i.default.createElement("path",{d:"M16.355 6.741c.01.142.01.284.01.427 0 4.334-3.299 9.33-9.33 9.33A9.266 9.266 0 012 15.024c.264.03.518.041.792.041a6.567 6.567 0 004.07-1.401 3.285 3.285 0 01-3.065-2.274c.203.03.406.05.62.05.294 0 .588-.04.862-.111a3.28 3.28 0 01-2.63-3.218v-.04c.437.243.945.395 1.483.415a3.277 3.277 0 01-1.462-2.73c0-.61.162-1.168.447-1.655a9.32 9.32 0 006.761 3.431 3.702 3.702 0 01-.081-.751 3.278 3.278 0 013.28-3.28c.943 0 1.796.397 2.395 1.036a6.457 6.457 0 002.081-.792 3.27 3.27 0 01-1.441 1.807c.66-.07 1.3-.253 1.888-.507a7.048 7.048 0 01-1.645 1.695z"}),underline:i.default.createElement("path",{d:"M16 16H4a1 1 0 100 2h12a1 1 0 100-2zM4.5 4H5v5c0 2.757 2.243 4.972 5 4.972S15 11.73 15 9V4h.5a1 1 0 001-1c0-.552-.447-.972-1-.972h-3a1 1 0 100 2h.5v5C13 10.683 11.654 12 10 12s-3-1.372-3-3V4h.5a1 1 0 100-2h-3c-.553 0-1 .447-1 .972C3.5 3.497 3.947 4 4.5 4z"}),"universal-access":i.default.createElement("path",{d:"M2 10a8 8 0 1116 0 8 8 0 01-16 0zm5.047-2.69a.75.75 0 10-.59 1.378l.371.159c.54.231 1.1.403 1.675.51v1.565c0 .134-.022.269-.066.394l-.896 2.69a.75.75 0 101.425.475l.762-2.287a.289.289 0 01.55 0l.763 2.287a.75.75 0 101.425-.475l-.897-2.69a1.21 1.21 0 01-.066-.394V9.359a8.094 8.094 0 001.675-.509l.372-.16a.75.75 0 10-.59-1.377l-.376.156a6.55 6.55 0 01-5.168 0l-.372-.16h.003zM10 7a1.25 1.25 0 100-2.5A1.25 1.25 0 0010 7z"}),"up-right-and-down-left-from-center":i.default.createElement("path",{d:"M12.75 2h4.5c.416 0 .75.334.75.75v4.5a.749.749 0 01-1.281.531L15.5 6.563 12.781 9.28a.747.747 0 01-1.06 0l-1-1a.747.747 0 010-1.06l2.72-2.718-1.222-1.222A.751.751 0 0112.75 2zm-5.5 16h-4.5a.748.748 0 01-.75-.75v-4.5a.75.75 0 011.281-.531L4.5 13.438l2.719-2.72a.747.747 0 011.06 0l1 1a.747.747 0 010 1.06l-2.72 2.719 1.22 1.219a.751.751 0 01-.532 1.28L7.25 18z"}),"user-gear":i.default.createElement("path",{d:"M13.284 17.081a4.638 4.638 0 01-.212-.123l-.245.14c-.187.11-.4.168-.617.168-.335 0-.66-.14-.905-.398a5.76 5.76 0 01-1.257-2.185c-.167-.564.073-1.152.557-1.413l.25-.146a4.788 4.788 0 010-.246l-.239-.14a1.211 1.211 0 01-.613-1.043 5.377 5.377 0 00-1.419-.195H5.416A5.419 5.419 0 000 16.919C0 17.516.485 18 1.083 18h11.833c.179 0 .34-.054.489-.13a1.202 1.202 0 01-.12-.503v-.286zM7 10a4 4 0 100-8 4 4 0 000 8zm12.078 3.666c.082-.438.082-.891 0-1.329l.805-.468a.225.225 0 00.105-.266A4.746 4.746 0 0018.95 9.81a.225.225 0 00-.281-.043l-.805.465a3.655 3.655 0 00-1.152-.664v-.934c0-.105-.078-.199-.18-.218a4.687 4.687 0 00-2.07 0 .222.222 0 00-.176.218v.934a3.654 3.654 0 00-1.152.664l-.808-.466a.227.227 0 00-.281.043 4.69 4.69 0 00-1.036 1.793.228.228 0 00.102.265l.805.47c-.078.437-.078.89 0 1.327l-.805.469a.223.223 0 00-.102.266 4.719 4.719 0 001.036 1.793.226.226 0 00.281.043l.809-.465c.34.289.73.515 1.152.664v.933c0 .106.075.2.176.22.7.155 1.406.152 2.07 0a.226.226 0 00.18-.22v-.933a3.655 3.655 0 001.152-.664l.805.465c.09.054.211.035.282-.043a4.746 4.746 0 001.038-1.793.225.225 0 00-.105-.266l-.806-.467zm-3.578.85c-.836 0-1.516-.68-1.516-1.516s.68-1.516 1.516-1.516 1.516.68 1.516 1.516-.678 1.516-1.516 1.516z"}),"user-group":i.default.createElement("path",{d:"M7 10a4 4 0 100-8 4 4 0 000 8zm1.584 1.5H5.416A5.415 5.415 0 000 16.916C0 17.516.485 18 1.083 18h11.833c.6 0 1.084-.484 1.084-1.084A5.416 5.416 0 008.584 11.5zm6.388.5h-2.308A6.33 6.33 0 0115 16.916c0 .4-.119.768-.313 1.084H19c.553 0 1-.45 1-1.028C20 14.237 17.762 12 14.972 12zM13.5 10c1.934 0 3.5-1.566 3.5-3.5S15.434 3 13.5 3c-.785 0-1.501.267-2.085.703C11.775 4.395 12 5.17 12 6c0 1.11-.373 2.13-.987 2.96A3.489 3.489 0 0013.5 10z"}),"user-lock":i.default.createElement("path",{d:"M18.5 11H18V8.647c0-1.308-.938-2.501-2.24-2.634A2.503 2.503 0 0013 8.5V11h-.5c-.825 0-1.5.675-1.5 1.5v4c0 .825.675 1.5 1.5 1.5h6c.825 0 1.5-.675 1.5-1.5v-4c0-.825-.675-1.5-1.5-1.5zm-3 4.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm1-4.5h-2V8.5c0-.55.45-1 1-1s1 .45 1 1V11zM7 10a4 4 0 100-8 4 4 0 000 8zm3 2.5c0-.271.054-.527.134-.772a5.406 5.406 0 00-1.55-.228H5.416A5.419 5.419 0 000 16.919C0 17.516.485 18 1.083 18h9.428A2.491 2.491 0 0110 16.5v-4z"}),"user-plus":i.default.createElement("path",{d:"M11 6a4 4 0 11-8 0 4 4 0 018 0zM0 17.072A5.57 5.57 0 015.572 11.5h2.856A5.57 5.57 0 0114 17.072a.928.928 0 01-.928.928H.928A.928.928 0 010 17.072zm15.75-5.322v-2h-2A.748.748 0 0113 9c0-.416.334-.75.75-.75h2v-2c0-.416.334-.75.75-.75s.75.334.75.75v2h2c.416 0 .75.334.75.75s-.334.75-.75.75h-2v2c0 .416-.334.75-.75.75a.748.748 0 01-.75-.75z"}),user:i.default.createElement("path",{d:"M10 10a4 4 0 100-8 4 4 0 000 8zm1.584 1.5H8.416A5.416 5.416 0 003 16.916c0 .598.485 1.083 1.083 1.083h11.834C16.517 18 17 17.516 17 16.916a5.416 5.416 0 00-5.416-5.416z"}),users:i.default.createElement("path",{d:"M9.997 12c1.794 0 3.222-1.455 3.222-3.25S11.764 5.5 9.997 5.5c-1.794 0-3.222 1.455-3.222 3.25C6.747 10.544 8.203 12 9.997 12zm1.562 1H8.441C5.987 13 4 14.866 4 17.166c0 .462.397.834.888.834h10.225c.49 0 .887-.372.887-.834 0-2.3-1.988-4.166-4.44-4.166zM16 7a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM5.747 8.75c0-.17.03-.332.05-.497C5.457 8.066 5.081 8 4.684 8H2.752C1.232 8 0 9.306 0 10.916c0 .322.246.584.55.584h6.235a4.21 4.21 0 01-1.038-2.75zM4 7a2.5 2.5 0 100-5 2.5 2.5 0 000 5zm13.247 1h-1.933c-.4 0-.777.095-1.12.258.018.164.05.323.05.492 0 1.053-.4 2.007-1.037 2.75h6.241c.305 0 .552-.262.552-.584C20 9.306 18.769 8 17.247 8z"}),"wand-magic-sparkles":i.default.createElement("path",{d:"M8.334 3.334l-1.178.441a.24.24 0 000 .45l1.178.44.441 1.179a.24.24 0 00.45 0l.44-1.178 1.179-.441a.24.24 0 000-.45l-1.178-.44-.441-1.179a.24.24 0 00-.45 0l-.44 1.178zM2.441 14.356a1.503 1.503 0 000 2.122l1.08 1.081a1.503 1.503 0 002.123 0L17.559 5.641a1.503 1.503 0 000-2.122L16.48 2.44a1.503 1.503 0 00-2.123 0L2.441 14.356zm13.703-9.775l-3.281 3.281-.729-.728 3.282-3.28.728.727zM1.234 5.662A.362.362 0 001 6c0 .15.094.284.234.338L3 7l.663 1.766C3.716 8.906 3.85 9 4 9c.15 0 .284-.094.338-.234L5 7l1.766-.662A.362.362 0 007 6a.362.362 0 00-.234-.338L5 5l-.662-1.766A.362.362 0 004 3a.362.362 0 00-.337.234L3 5l-1.766.662zm11 8A.362.362 0 0012 14c0 .15.094.284.234.338L14 15l.662 1.766a.362.362 0 00.675 0L16 15l1.766-.662A.362.362 0 0018 14a.362.362 0 00-.234-.338L16 13l-.662-1.766A.362.362 0 0015 11a.362.362 0 00-.338.234L14 13l-1.766.662z"}),windows:i.default.createElement("path",{d:"M3 4.928l5.738-.79V9.68H3V4.928zm0 10.144l5.738.79v-5.475H3v4.685zm6.369.875L17 17v-6.613H9.369v5.56zm0-11.894v5.628H17V3L9.369 4.053z"}),"word-custom":i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 3h10a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2zm5.941 4A.993.993 0 0010 6.333.997.997 0 009.057 7L8.03 9.92 6.95 6.686a1.008 1.008 0 00-1.266-.635 1.002 1.002 0 00-.633 1.267l2 6c.137.404.512.679.94.683.424 0 .811-.267.952-.667L10 10.338l1.058 2.995c.142.4.517.667.942.667a1.01 1.01 0 00.948-.684l2-6a1.001 1.001 0 00-1.897-.633L11.973 9.92 10.94 7z"}),"xmark-large":i.default.createElement("path",{d:"M15.294 3.293a.998.998 0 111.412 1.414l-5.29 5.265 5.29 5.322a.998.998 0 11-1.412 1.412l-5.322-5.29-5.265 5.29a1 1 0 01-1.414-1.412l5.291-5.322-5.291-5.265a1 1 0 011.414-1.414l5.265 5.291 5.322-5.291z"}),xmark:i.default.createElement("path",{d:"M14.706 13.294a1 1 0 11-1.413 1.413L10 11.416l-3.293 3.29A.991.991 0 016 15a1 1 0 01-.707-1.708l3.294-3.294-3.294-3.292a1 1 0 111.414-1.414L10 8.588l3.294-3.294a1 1 0 111.414 1.414l-3.294 3.294 3.292 3.292z"})}[e]))(r))};t.default=l},,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.proxify=t.deproxify=t.inferLoginUrl=t.tldMatchBoundaries=t.getDomain=t.proxifyCrossDomain=t.proxifyIfNeeded=t.isProxied=t.isUnsupportedUrl=t.isLoggedOut=t.isLoginUrl=t.getUrlFromLoginUrl=t.getLoginUrl=void 0;var a=r(424);t.getLoginUrl=(e,t)=>e.replace(/\$@/,t);t.getUrlFromLoginUrl=e=>{let t;const r=e.substring(e.indexOf("?")+1).split("&").map(e=>e.split("="));for(const e of r)e&&e.length>=2&&"url"===e.shift()&&(t=decodeURIComponent(e.join("=")));return t};const i=e=>{if(!e)return!1;return!![/(ez|ezp|ezproxy|ezlib|ezlibrary|libproxy|proxy)\d*\.[a-z0-9.-]+:?\d*\/login(\.html?)?\?q?url=/i,/\.(bibl|lib)\.[a-z.-]+:?\d*\/login(\.html?)?\?q?url=/i,/proxy-[a-z]+\.[a-z.-]+\/login(\.html?)?\?q?url=/i,/(ac\.uk|upmc\.fr|edu\.co|edu\.sa|edu\.jo|edu\.om|edu\.tw|edu\.hk|ac\.za|ac\.jp|lorraine\.fr|ac\.nz|usask\.ca|tcd\.ie|\.kb\.dk|laurentian\.ca|lu\.se|bth\.se|sdu\.dk|\.edu\.au|\.edu|aau\.dk|unizar\.es|ub\.tum\.de|universite\.fr|inrs.ca):?\d*\/login(\.html?)?\?q?url=/i,/ezproxy\/login\?url=/i,/idm\.oclc\.org\/login\?url=/i,/go\.openathens\.net\/redirector\/[a-z.-]+\?url=/i,/login\.[a-z0-9.-]+\.idm\.oclc\.org\/login\?qurl=/i,/uaccess\..+(edu|ac\.[a-z]{2})\/login\?url=/i].some(t=>t.test(e))};t.isLoginUrl=i;t.isLoggedOut=e=>{let t=!1;if(i(e))t=!0;else{const r=[],i=`(${a.patterns.authenticationServices.join("|")})`,o=`(${a.patterns.subdomains.join("|")})\\d*.`,s=`(${a.patterns.eduDomains.join("|")})`,l=`(${a.patterns.domains.join("|")})`,c=`(${a.patterns.pathPrimary.join("|")})`,u=`(${a.patterns.pathSecondary.join("|")})`;r.push(i),r.push(o+".+/(signin|login|login.jsp)/*$"),r.push(o+".+/login?q*url="),r.push(o+".+/login?service="),r.push(`${o}.+/.*${u}`),r.push(o+".+/my.policy$"),r.push(s+"(:\\d+)*/(signin|login|login.jsp)/*$"),r.push(s+"(:\\d+)*/login?q*url="),r.push(s+"(:\\d+)*/login?service="),r.push(s+"(:\\d+)*/menue$"),r.push(s+"(:\\d+)*/menu$"),r.push(s+"(:\\d+)*/(sessions/new|my.policy)$"),r.push(`${s}(:\\d+)*/.*${u}`),r.push(`${l}(:\\d+)*/.*${u}`),r.push(l+"(:\\d+)*/login$"),r.push(l+"(:\\d+)*/login?q*url="),r.push(l+"(:\\d+)*/?q*url="),r.push("://[^/]+/.*/*"+c),r.push("://[^/]+/login?service="),r.push("://[^/]+/?(cosign-www.lib|entityID=.*shibboleth)"),r.push("weblogin.stanford.edu/login.*?RT="),r.push("kb/login.php?AuthState");const d=e=>{const t=e.replace(/\//g,"\\/").replace(/\?/g,"\\?").split("");for(const[e,r]of t.entries())"."===r&&e+1<t.length&&(t[e+1].match(/[+*]/)||(t[e]="\\"+t[e]));return t.join("")};new RegExp(`(${r.map(d).join("|")})`,"i").test(e)&&(t=!0),t&&n(e)&&(t=!1)}return t};t.isUnsupportedUrl=(e,t,r)=>{const a="string"==typeof e?e.replace(/\n/g," ").replace(/\s+/g," "):"";r&&({type:"event",subtype:"Proxy logout",msg:"Text rep of the proxy log in page",data:a,proxyurl:t}.redirectUrl=r);let i=!1;return/Currently\s+this\s+URL\s+is\s+not\s+managed\s+via\s+authentication\s+service/i.test(a)&&(i=!0),/attempted\sto\sview\sa\spage\sthat\shas\snot\sbeen\sconfigured\sfor\saccess/i.test(a)&&(i=!0),/your\sEZproxy\sadministrator\smust\sfirst\sauthorize\sthe\shostname\sof\sthis\sURL/i.test(a)&&(i=!0),/presentato\sil\sseguente\serrore:\sAccesso\snegato/i.test(a)&&(i=!0),/Tato\s+URL\s+ale\s+nen.\s+prost.ednictv.m\s+proxy\s+p..stupn./i.test(a)&&(i=!0),i};const n=e=>{var t;const r=c(e);return(null==r||null===(t=r.proxy)||void 0===t?void 0:t.length)>3};t.isProxied=n;t.proxifyIfNeeded=(e,t)=>{let r=t;if(n(e)&&!n(t)){const a=c(e),i=o(a.cleanUrl),n=o(t);""!==i.domain&&i.domain===n.domain&&(/^https/.test(e)&&!/^https/.test(t)&&(r=t.replace(/^http/,"https")),a.proxy&&(r=u(r,a.proxy,a.dash)))}return r};t.proxifyCrossDomain=(e,t)=>{let r=t;if(n(e)&&!n(t)){const t=c(e);t.proxy&&(r=u(r,t.proxy,t.dash))}return r};const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r={domain:"",port:""};if(!e)return r;r.domain=e.replace(/^(https?|ftp):\/\//,""),/\//.test(r.domain)?r.domain=r.domain.replace(/([^/]+)(\/.*)/,"$1"):r.domain="";const a=r.domain.split("."),i=a.length;i>2&&!t&&(a[i-2].length>2?r.domain=`${a[i-2]}.${a[i-1]}`:r.domain=`${a[i-3]}.${a[i-2]}.${a[i-1]}`);const[n,o]=r.domain.split(/:/);return n&&o&&(r.domain=n,r.port=o),r};t.getDomain=o;const s=()=>{const e=`(${a.TLDs.join("|")})`;return new RegExp(`^${e}$`,"i")},l=s();t.tldMatchBoundaries=l;t.inferLoginUrl=e=>{let t;if(n(e)){t=`http://${c(e).proxy}/login?url=$@`}return t};const c=e=>{const t=e,r={fullUrl:t,cleanUrl:t,proxy:"",dash:!1};let a,i,n;const[,o=""]=e.match(/^(https?:\/\/)/)||[];if(!o)return r;const l=e.replace(/^https?:\/\//,""),[,c,u=""]=l.match(/^([^/]+)(\/.*)?$/)||[];if(!c)return r;const[,d=""]=c.match(/(:\d{4})$/)||[],p=c.replace(/:\d{4}$/,""),m=s(),h=p.split(/\./g);let g=[],f=!1;if(/-/.test(h[0])&&(g=h[0].split(/-/),m.test(g[g.length-1])&&(f=!0)),f){["spandidos-publications"].forEach(e=>{const t=e.replace(/-/g,"|");h[0]=h[0].replace(e,t)}),g=h[0].split(/-/),a=`${o+g.join(".")}${u}`,a=a.replace(/\|/g,"-"),i=h.slice(1,h.length).join(".")+d,n=!0}else{const e=[];h.forEach(t=>{m.test(t)?e.push(1):e.push(0)}),e.length>0&&1===e[0]&&(e[0]=0);const t=e.join("");if(/.?1+0+1+$/.test(t)){let t=!1,r=-1;for(const[a,i]of e.entries())if(1===i)t=!0;else if(t){r=a;break}if(r>-1&&r<=e.length){const e=h.slice(0,r),t=h.slice(r);a=`${o+e.join(".")}${u}`,i=t.join(".")+d}}}if(i&&a){let e=!0,o=i.split(/\./).length,s=3;/\.(edu|ac)\.[a-z]+$/i.test(i)&&(s=4),o<s&&(e=!1),o=a.replace(/^(https?:\/\/)/,"").replace(/\/.*/,"").split(/\./).length,o<2&&(e=!1);const l=["login\\.simsrad\\.net\\.ocs\\.mq\\.edu\\.au"];e&&l.forEach(r=>{t.match(new RegExp("^https?:\\/\\/"+r))&&(e=!1)}),e&&(r.proxy=i,r.cleanUrl=a,n&&(r.dash=!0))}return r};t.deproxify=c;const u=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return e;const[,a=""]=e.match(/^(https?:\/\/)/)||[],i=e.replace(/^https?:\/\//,""),[,n,o]=i.match(/^([^/]+)(\/.*)?$/)||[],s=`${a}${r?n.replace(/\./g,"-"):n}.${t}${o}`;return s};t.proxify=u},,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(112)),n=r(20);const o=new i.default("bg",self.localStorage,{});o.setLevel("production"===n.PP_ENV?"info":"debug");var s=o;t.default=s},,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.isUrlLike=t.getBestLink=t.encodeProxyString=t.decodeProxyString=t.replaceDiacritics=t.stopwords=t.cleanFileName=t.convertHtmlEntitiesToUnicode=t.escapeRegex=t.authorToString=t.replaceOutsideTags=t.renderHighlight=t.mergeURLs=t.makeUniqueArray=t.removeQuotationMarksAndPunctation=t.removeSuffixAndPrefix=t.renderFormatType=t.renderFormatAuthors=t.renderFormatTitle=t.formatAuthorYearJournal=t.getJournalString=t.formatYear=t.getJournalField=t.formatAuthorYearUncleaned=t.formatAuthorYear=t.yearString=t.ellipsis=t.template=t.publicationFormatAuthors=t.publicationFormatAuthorsUncleaned=t.getAuthorType=t.midEllipsis=void 0;var i=r(179),n=r(130),o=r(66),s=a(r(370)),l=r(18),c=r(51);const u=(e,t,r,a)=>{let i=r,n=e,o=a;if(!n)return n;if(t<1)return n;if(void 0===o&&(o=" ... "),n+="",n.length<=t)return n;void 0===i&&(i=!1);const s=i?0:1,l=[];let c=[];const u=n.split(i?"":/\s/);let d=0;for(const e of u){if(d>n.length/2)break;l.push(e),d+=e.length+s}c=c.concat(u.slice(l.length));let p,m=l.join(i?"":" ").length,h=c.join(i?"":" ").length,g=n.length,f=h>m;for(;g>t;)f?(p=c.shift(),p&&(h-=p.length+s)):(p=l.pop(),p&&(m-=p.length+s)),p&&(g-=p.length+s),f=h>m;return`${l.join(i?"":" ")}${o}${c.join(i?"":" ")}`};t.midEllipsis=u;const d=(e,t)=>{const r=["author","editor","series_editor","contributor","translator"],a=[];for(const i of r){const r=e[i];if(r&&r.length>0&&(a.push(i),"multiple"!==t))break}return(a.length||"multiple"===t)&&(!a.includes("author")||"single"!==t&&t)?1!==a.length||"single"!==t&&t?a:a[0]:"author"};t.getAuthorType=d;const p=(e,t)=>{const r=d(e,"single");if(r){const a=e[r];if(a){return A(a,t)}return"[No author]"}return"[No author]"};t.publicationFormatAuthorsUncleaned=p;const m=(e,t)=>{const r=d(e,"single");if(r){const a=e[r];if(a){const e=A(a,t);return(0,n.purify)(e,"authorextjs")}return"[No author]"}return"[No author]"};t.publicationFormatAuthors=m;t.template=(e,t)=>e.replace(/\{ *([\w_]+) *\}/g,(e,r)=>{if(void 0===t[r])throw new Error("No value provided for variable "+e);return t[r]});const h=function(e,t){let{keepWords:r=!1,ellipsisString:a="..."}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t<=0)throw new Error("ellipsis called with non-positive maxLength: "+t);if(e.length<=t)return e;if(r){const r=e.substr(0,t-2),i=Math.max(r.lastIndexOf(" "),r.lastIndexOf("."),r.lastIndexOf("!"),r.lastIndexOf("?"));if(-1!==i&&i>=t-15)return`${r.substr(0,i)}${a}`}return`${e.substr(0,t-a.length)}${a}`};t.ellipsis=h;const g=e=>e.year?e.year.toString():"";t.yearString=g;const f=(e,t)=>{const r={...t}||{};let a;d(e)?a=m(e,{etAl:!0,output:"last",includeItalics:!1}):(a=e.title||"[untitled item]",a=(0,l.interconvertString)(a,{format:"nomarkup"}));const i=e.published||{},o=`${a} ${g(i)}`,s=r.maxLength||40;return(0,n.purify)(h(o,s),"textonly")};t.formatAuthorYear=f;t.formatAuthorYearUncleaned=(e,t)=>{const r={...t}||{};let a;d(e)?a=p(e,{etAl:!0,output:"last",includeItalics:!1}):(a=e.title||"[untitled item]",a=(0,l.interconvertString)(a,{format:"nomarkup"}));const i=e.published||{},n=`${a} ${g(i)}`,o=r.maxLength||40;return h(n,o)};const b=e=>e.pubtype&&["PP_CONFERENCE_PAPER","PP_BOOK_CHAPTER","PP_WEBSITE"].includes(e.pubtype)?"booktitle":"journal";t.getJournalField=b;t.formatYear=e=>{const t=e.published||{},r=g(t);return""===r?"[no date]":(0,n.purify)(r,"textonly")};const y=e=>{const t=b(e);let r="";return t&&e[t]&&(r=e[t]||""),r};t.getJournalString=y;t.formatAuthorYearJournal=(e,t)=>{let r=t;void 0===r&&(r=!1);const a=f(e);let i=y(e),o=a;return i?(r||(i=`<span style="font-style:italic;">${i}</span>`),o+=" - "+i,(0,n.purify)(o,"authorextjs")):(0,n.purify)(o,"textonly")};t.renderFormatTitle=(e,t)=>{const{pubtype:r}=e;let a=e.title||"No title";if("No title"===a){let t={};if(("PP_LETTER"===r||"PP_PERSONAL_COMMUNICATION"===r)&&e.editor&&e.editor.length?[t]=e.editor:"PP_INTERVIEW"===r&&e.author&&e.author.length&&([t]=e.author),t){const e=(e=>e.first&&e.last?`${e.first} ${e.last}`:e.initials&&e.last?`${e.initials} ${e.last}`:e.collective?e.collective:e.last?e.last:void 0)(t);e&&("PP_LETTER"===r&&(a="Letter to "),"PP_PERSONAL_COMMUNICATION"===r&&(a="Personal communication with "),"PP_INTERVIEW"===r&&(a="Interview with "),a+=e)}}a=(0,l.interconvertString)(a,{format:"html"}),a=S(a,t);let i="",n="";if(t.includeActions&&e.abstract){i="pp-grid-clickable-title";const t=e.view_state,{openPanel:r}=t;n="abstract"===r?'onlyonclick="true" action="GRID_CLOSE_ABSTRACT"':'onlyonclick="true" action="GRID_OPEN_ABSTRACT"'}let o=e.title?"":"pp-grid-no-title";return"PP_LETTER"!==r&&"PP_PERSONAL_COMMUNICATION"!==r&&"PP_INTERVIEW"!==r||"No title"!==a&&(o=""),[`<div class="pp-grid-title ${o}">`,`<span ${n} class="pp-grid-titletext ${i}">${a}</span>`,"</div>"].join("").replace(/\s+/g," ").replace(/\s+"/g,'"')};t.renderFormatAuthors=(e,t)=>{const r=t,a={prefix:'<span class="pp-author">',suffix:"</span>",delim:", ",output:"display",othersString:"&hellip;"},i={prefix:"",suffix:"",delim:", ",output:"display",othersString:"..."},n={author:[],editor:[],contributor:[],series_editor:[],translator:[]};for(const t of(0,o.getKeys)(n))if(e[t]){const r=e[t];r&&Array.isArray(r)&&(n[t]=r.slice(0,80/6+1>r.length?r.length:80/6+1))}let s,l=m(n,a);const c=d(n,"single");if(c){let e=n[c];const t=[];if(e){for(const r of e)if("et al."===r.collective)t.push(r);else{if(""===A(r))continue;t.push(r)}e=t,s=A(e,i);let r=e.length,n=0;for(;s.length>80;){r-=1;const t=e.slice(0,r);n=e.slice(r,e.length).length,s=[A(t,i),n>0?" et al.":""].join(""),l=[A(t,a),n>0?" <i>et al.</i>":""].join("")}}}return"[No author]"===l?"":(r.allowShortStrings=!0,S(l,r))};const v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",r=s.default.PP_MISC[t];return e&&e in s.default&&(r=s.default[e][t]),r||""},_={PP_ARTICLE:(e,t,r)=>t?"Research Article"===t?v(e,r):t:v(e,r),PP_THESIS:(e,t,r)=>t||v(e,r)};t.renderFormatType=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US";const a=_[e];return a?a(e,t,r):v(e,r)};t.removeSuffixAndPrefix=(e,t,r)=>{let a=w(e,!0);if(t&&(a=a.replace(t,"")),r){const e=w(r,!0).replace(/data=[a-zA-Z0-9\s]+/gi,"");a=a.replace(/data=[a-zA-Z0-9\s]+/gi,""),a=a.replace(e,"")}return a};const w=(e,t)=>{const r="[\u2018\u2019\u201b\u201c\u201d\u201e\u201f\xa8\"'`\\-\\(\\[\\{\\)\\]\\}\\.,;:\\?\\!]+";return t?e.replace(new RegExp(""+r,"gi"),""):e.replace(new RegExp("^"+r,"i"),"").replace(new RegExp(r+"$","i"),"")};t.removeQuotationMarksAndPunctation=w;const P=e=>e.filter((e,t,r)=>r.indexOf(e)===t);t.makeUniqueArray=P;t.mergeURLs=(e,t)=>{const r=e||[],a=t||[],i={};for(const e of r.concat(a)){const t=e.toLowerCase().replace(/^https?:\/\//,"");t in i||(i[t]=[]),i[t].push(e)}const n=[];for(const e of Object.keys(i)){let t=i[e][0];for(const r of i[e])!t.match(/^https/)&&r.match(/^https/)&&(t=r);n.push(t)}return n};const S=(e,t)=>{const r={...t}||{};let a=e;if(!a)return a;if(!r.searchTerms)return a;const i=r.searchTerms;let n=[];i&&(n=i.split(/\s+/)),n=n.filter(e=>!(!0!==r.allowShortStrings&&e.length<=2)&&!(""===e));for(let e=0;e<n.length;e+=1)n[e]=w(n[e]);const o=n.sort((e,t)=>t.length-e.length);let s,l;n=P(o);for(const e of n)l=e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),s=l.length<=2?new RegExp(`(<\\/?\\w+(\\s+\\w+(\\s*=\\s*("[^"]*"|'[^']*'|\\S+))?)*>)|\\b(${l})\\b`,"ig"):new RegExp(`(<\\/?\\w+(\\s+\\w+(\\s*=\\s*("[^"]*"|'[^']*'|\\S+))?)*>)|(${l})`,"ig"),a=C(a,s);return a};t.renderHighlight=S;const C=(e,t)=>e.replace(t,(e,t,r,a,i,n)=>t||`<span class="pp-grid-highlight">${(n||e).replace(/<\//g,"")}</span>`);t.replaceOutsideTags=C;const A=(e,t,r)=>{let a;if(a=void 0===t?{...{prefixWrap:"",suffixWrap:"",prefix:"",suffix:"",delim:",",includeItalics:!0,output:"display",etAl:!1,othersString:"et al."}}:{...t},Array.isArray(e)){if(a.etAl){if(e.length>2){let t=A(e[0],a,r);return a.includeItalics?t+=" <i>et al.</i>":t+=" et al.",t}return e.map(e=>A(e,a,r)).join(" and ")}const t=e.map(e=>A(e,a,r));if(a.prefixWrap&&""!==a.prefixWrap){let i="";for(let n=0;n<t.length;n+=1){const o=r&&!t[n].includes("highlight")?(0,c.matchHighlight)(t[n],r):t[n],s=""+a.prefixWrap.replace("{author}",`"${t[n]}:${(0,c.generateAuthorIndex)(e[n]).id}"`);n<t.length-1?i+=s+o+a.delim+a.suffixWrap+" ":i+=s+o+a.suffixWrap}return i}return t.join(a.delim)}const{first:i}=e,n=e.collective,{last:o}=e,{initials:s}=e,{jr:l}=e,u=e._id,d=[];let p;if(n?"serialize"===a.output||"forDiff"===a.output?d.push(`{${n}}`):"others"===n?d.push(a.othersString):d.push(n):("serialize"===a.output&&(o&&d.push(o),l&&d.push(" "+l),(i||s)&&(d.push(", "),d.push(i||s))),"full"===a.output?(i&&d.push(i),!i&&s&&d.push(s),o&&d.push(o),l&&d.push(l)):"forDiff"===a.output?(i&&d.push(i),!i&&s&&d.push(s),d.push(","),o&&d.push(o),d.push(","),l&&d.push(l)):"display"===a.output?(o&&d.push(o),l&&d.push(l),s&&d.push(s)):"last"===a.output?n?d.push(n):o&&d.push(o):"firstlast"===a.output&&(i&&d.push(i),o&&d.push(o))),p="serialize"===a.output?d.join(""):d.join(" "),"others"===n&&"et al."===a.othersString&&a.prefix&&a.prefix.match(/span/i))p=` <i>${p}</i>`;else{if(a.prefix){const t=r?(0,c.matchHighlight)(p,r):p;p=`${a.prefix.replace("{author}",`"${p}:${(0,c.generateAuthorIndex)(e).id}"`)}${t}`}a.suffix&&(p+=a.suffix)}return u&&(p=p.replace(/{_id}/g,u)),!r||p.includes("pp-grid-highlight")||p.includes("<span")?p:(0,c.matchHighlight)(p,r)};t.authorToString=A;t.escapeRegex=e=>e.replace(/\\/g,"\\\\").replace(/\^/g,"\\^").replace(/\|/g,"\\|").replace(/\$/g,"\\$").replace(/\?/g,"\\?").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\{/g,"\\{").replace(/\}/g,"\\}").replace(/\*/g,"\\*");t.convertHtmlEntitiesToUnicode=e=>(0,i.decode)(e);t.cleanFileName=e=>{const t=e.replace(/[/\\?:|]/g," - ").replace(/[<>*]/g," ").replace(/(\w)(\.\.)(\w)/g,"$1.$3").replace(/"/g,"'").replace(/\s*-\s*$/g,"").replace(/\s*-\s*\./g,".").replace(/(\s*\.)([^.])/g,".$2").replace(/-[- ]*-/g,"-").replace(/-+/g,"-").replace(/ +/g," ").replace(/^\s*/,"").replace(/\s*$/,"");return t.length>150?u(t,145,!0):t};t.stopwords={about:1,again:1,all:1,almost:1,also:1,although:1,always:1,among:1,and:1,another:1,any:1,are:1,because:1,been:1,before:1,being:1,between:1,both:1,but:1,can:1,could:1,did:1,does:1,done:1,due:1,during:1,each:1,either:1,enough:1,especially:1,etc:1,for:1,found:1,from:1,further:1,had:1,has:1,have:1,having:1,here:1,how:1,however:1,into:1,its:1,itself:1,just:1,made:1,mainly:1,make:1,may:1,might:1,most:1,mostly:1,must:1,nearly:1,neither:1,nor:1,not:1,obtained:1,often:1,our:1,overall:1,perhaps:1,quite:1,rather:1,really:1,regarding:1,seem:1,seen:1,several:1,should:1,show:1,showed:1,shown:1,shows:1,since:1,some:1,such:1,than:1,that:1,the:1,their:1,theirs:1,them:1,then:1,there:1,therefore:1,these:1,they:1,this:1,those:1,through:1,thus:1,upon:1,use:1,used:1,using:1,various:1,very:1,was:1,were:1,what:1,when:1,which:1,while:1,with:1,within:1,without:1,would:1,"[":1,"]":1,"{":1,"}":1,"(":1,")":1,_:1,$:1,"!":1,"#":1,"^":1,"&":1,"*":1,"'":1,'"':1,":":1,"?":1,".":1,",":1,";":1,"%":1,"|":1,"@":1};const E={A:"A","\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY",B:"B","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B",C:"C","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C",D:"D","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz",E:"E","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E",F:"F","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F",G:"G","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G",H:"H","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H",I:"I","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I",J:"J","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J",K:"K","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K",L:"L","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj",M:"M","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M",N:"N","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj",O:"O","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU",P:"P","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P",Q:"Q","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q",R:"R","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R",S:"S","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S",T:"T","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ",U:"U","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U",V:"V","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY",W:"W","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W",X:"X","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X",Y:"Y","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y",Z:"Z","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z",a:"a","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay",b:"b","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b",c:"c","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c",d:"d","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz",e:"e","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e",f:"f","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f",g:"g","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g",h:"h","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv",i:"i","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i",j:"j","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j",k:"k","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k",l:"l","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj",m:"m","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m",n:"n","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj",o:"o","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo",p:"p","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p",q:"q","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q",r:"r","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r",s:"s","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s",t:"t","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz",u:"u","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u",v:"v","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy",w:"w","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w",x:"x","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x",y:"y","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y",z:"z","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"};t.replaceDiacritics=e=>e.split("").map(e=>E[e]||e).join("");t.decodeProxyString=e=>e.split(/\^/).map(e=>{const t=e.split(/\|/);if(3!==t.length)return null;const[r,a,i]=t;return{name:r,url:a,active:"1"===i}}).filter(e=>null!==e);t.encodeProxyString=e=>e.map(e=>[e.name,e.url,e.active?"1":"0"].join("|")).join("^");t.getBestLink=e=>{if(e.doi)return"https://doi.org/"+e.doi;if(!e.url)return null;if(0===e.url.length)return null;const t=[[],[],[],[],[]];for(const r of e.url){let e=1;(/pubmed.ncbi.nlm.nih.gov\/\d+/i.test(r)||/arxiv\.org\//i.test(r))&&(e=-1),/pdf/i.test(r)?e=3:/10\.\d{4,5}\//.test(r)?e=0:/(\/pmc\/articles\/|scopus|clarivate|ovid)/i.test(r)?e=2:/^https?:\/\/[^/]+\/?$/.test(r)&&(e=4),e>-1&&t[e].push(r)}for(const e of t)if(e[0])return e[0];return null};t.isUrlLike=e=>{if(!e||"string"!=typeof e)return!1;return e.match(/^(www|http|ftp|file|evernote)/i)||e.match(/\.(com|org|net|gov|edu|uk|de)/i)}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(57));class n extends i.default{constructor(e,t,r,a){super(e,t,a),this.extra=r}toJSON(){return{...super.toJSON(),extra:this.extra}}}t.default=n},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shortenURL=t.capitalize=t.normalizeAndStripOfNonAlphaNumericCharacters=t.nonLatinCharacterToLatinMapping=t.getStringByteSize=t.isSentenceCase=t.formatFileSize=t.formatNumber=t.filterElasticStopWords=void 0;const a={a:1,an:1,and:1,are:1,as:1,at:1,be:1,but:1,by:1,for:1,if:1,in:1,into:1,is:1,it:1,no:1,not:1,of:1,on:1,or:1,such:1,that:1,the:1,their:1,then:1,there:1,these:1,they:1,this:1,to:1,was:1,will:1,with:1};t.filterElasticStopWords=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return"";const r=[];for(const i of e.split(/([\s\t\n\r,!?:;.]+)/))i.toLowerCase()in a&&!t.includes(i.toLowerCase())||r.push(i);return r.join("").replace(/\s+/g," ").replace(/^\s+/,"").replace(/[\n\t\r\s]+$/,"")};const i=function(e){let{decimals:t=2,decimalPoint:r=".",thousandsSeparator:a=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e<0?"-":"",n=parseInt(Math.abs(e).toFixed(t),10),o=n.toString(),s=o.length>3?o.length%3:0,l=""+(Math.abs(e)-n).toFixed(t),c=l.indexOf(".")+1;return i+(s?`${o.substr(0,s)}${a}`:"")+o.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+a)+(t?`${r}${l.slice(c)}`:"")};t.formatNumber=i;t.formatFileSize=function(e){let{spaceCharacter:t=" "}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=1024,a=1024*r,n=1024*a;return e>=n?`${i(e/n,{decimals:1})}${t}GB`:e>=a?`${i(e/a,{decimals:1})}${t}MB`:e>=r?`${i(e/r,{decimals:1})}${t}KB`:`${i(e,{decimals:0})}${t}bytes`};t.isSentenceCase=e=>{const t=e.replace(/<mark>[^<>]*<\/mark>/g,""),r=/[A-Z]/.test(t),a=/[a-z]/.test(t);if(!r)return/^\d+/.test(t);if(a){if(/^[a-z]+\s/.test(t))return!1;const e=(e=>{const t=/\b(the|a|an|and|or|but|aboard|about|above|across|after|against|along|amid|among|around|as|at|before|behind|below|beneath|beside|besides|between|beyond|but|by|for|from|in|inside|into|like|minus|near|of|off|on|onto|opposite|outside|over|past|per|plus|regarding|since|than|through|to|toward|towards|under|underneath|unlike|until|up|upon|versus|via|with|within|without|v|vs|if)\b/,r=e.split(/[\n\r\t\s]+/).map(e=>e.replace(/^[\u2018\u2019'()[\]{}]/,"").replace(/[\u2018\u2019'()[\]{}]$/,"")),a={lc:0,uc:0,alluc:0,excluded:0};for(let e=0;e<r.length;e+=1)if(/^[A-Z]/.test(r[e])){let t=e>0;e>0&&/[.?!;:]+$/.test(r[e-1])&&(t=!1),t&&(/^[A-Z\d]+$/.test(r[e])?a.alluc+=1:a.uc+=1)}else if(/^[a-z]/.test(r[e])){const i=t.test(r[e]);i||/[A-Z\d]/.test(r[e])||/^(de|du|van)$/.test(r[e])?i&&(a.excluded+=1):a.lc+=1}else{const t=r[e].split(/-/);if(t.length>1)for(let e=1;e<t.length;e+=1)/^[A-Z]/.test(t[e])?a.uc+=1:/^[a-z]/.test(t[e])&&(a.lc+=1)}return a})(t);if(e.uc<=1&&e.excluded+e.lc>0)return!0;if(e.uc<=2&&e.lc>2)return!0}return!1};t.getStringByteSize=e=>/[\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/giu.test(e)?new Blob([e]).size:e.length;const n={"\u0141":"L","\u0142":"l","\u0131":"i","\xd8":"O","\xf8":"o","\xc6":"AE","\xe6":"ae","\xdf":"ss","\u1e9e":"SS","\xd0":"D","\xde":"TH","\xf0":"d","\xfe":"th"};t.nonLatinCharacterToLatinMapping=n;t.normalizeAndStripOfNonAlphaNumericCharacters=(e,t)=>{const r=void 0===(null==t?void 0:t.removeLetterAccents)||t.removeLetterAccents,a=void 0===(null==t?void 0:t.removeNonAlphaNumericCharacters)||t.removeNonAlphaNumericCharacters;let i=e;return e&&"string"==typeof e?(r&&(i=i.replace(/[\u0141\u0142\u0131\u00d8\u00f8\u00c6\u00e6\u00df\u1e9e\u00d0\u00de\u00f0\u00fe]/g,e=>n[e])),i=i.normalize(r?"NFKD":"NFKC"),r&&(i=i.replace(/\p{M}/gu,"")),a&&(i=i.replace(/[^\p{L}\p{N}\p{Co}]/gu," "),i=i.replace(/\s+/g," ")),i.trim()):i};t.capitalize=e=>e.charAt(0).toUpperCase()+e.slice(1);t.shortenURL=(e,t)=>{const r=void 0===t?500:t;let a=e.replace(/#:~:text=.+$/,"");if(a.length>r&&a.indexOf("?")>-1){const e=a.split("?");if(e.length>1){let t=e[1].split("&");for(;a.length>r&&t.length>0;)t=t.slice(0,-1),a=`${e[0]}?${t.join("&")}`}a=a.replace(/\?$/,"").replace(/&$/,"")}return a.length>r&&(a=a.substring(0,r)),a}},,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.personalLibraryId=void 0;var i=a(r(7)),n=a(r(97)),o=a(r(223));t.personalLibraryId="personal";t.default=class{constructor(e,t){(0,i.default)(this,"libraries",{}),this.remote=e,this.logger=t,e.addActions({"broadcast.syncProgress":e=>{e.progress.error&&(e.progress.error=(0,n.default)(e.progress.error)),this.forLibrary(e.libraryId||"personal").emit("syncProgress",e.progress)}}),e.addActions({"broadcast.filterMapUpdate":e=>{this.forLibrary(e.libraryId||"personal").emit("filterMapUpdate",e.changes)}}),e.addActions({"broadcast.pdfDownloadProgress":e=>{this.forLibrary(e.libraryId||"personal").emit("pdfDownloadProgress",e.progress)}}),e.addActions({"broadcast.jobUpdate":e=>{this.forLibrary(e.libraryId||"personal").emit("jobUpdate",e.job)}}),e.addActions({"broadcast.progressStateUpdate":e=>{this.forLibrary(e.libraryId||"personal").emit("progressStateUpdate",e.progress)}})}forLibrary(e){return e||(e="personal"),this.libraries[e]||(this.libraries[e]=new o.default(e,this.remote,this.logger)),this.libraries[e]}async removeLibrary(e){await this.forLibrary(e).wipeAndReset(),delete this.libraries[e]}}},,function(e,t,r){"use strict";var a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getSignedExtensionFinishedLogS3Url=t.getSignedExtensionLogS3Url=t.getSignedFilterLogS3Url=t.getAllUserData=t.getDefaultPinnedCollections=t.getSharedLibraryOrFolder=t.getDefaultLibrary=t.getUserFromDb=t.getUserOnlyFromDb=t.getLocalSettingsFromDb=t.getAllJobsFromDb=t.getCollectionsFromDb=t.updatePublication=t.replacePublication=t.createOrReplacePublication=t.createPublication=t.detectDuplicateAndSetIcon=t.duplicateByTab=t.detectDuplicates=t.getPub=t.getAttachment=t.reportCrawler=t.createCollection=t.getProfilesByShared=t.getSharedLibraries=t.getPermissions=t.getUserFromApi=t.uploadAttachment=t.checkPdfImprove=t.improvePub=t.requestUploadToken=t.fetchLocaleFromApi=t.searchStylesFromApi=t.fetchStyleFromApi=t.fetchUserFromApi=t.getBackend=t.logToPlack=t.isBackendApiError=void 0;var n=i(r(447)),o=r(145),s=r(26),l=r(40),c=r(105),u=r(32),d=r(376),p=r(20),m=a(r(29)),h=a(r(47)),g=a(r(44)),f=r(46),b=r(100),y=r(95),v=r(138),_=r(9);const w=e=>null!==e&&"error"in e;t.isBackendApiError=w;const P=e=>!w(e)&&null!==e;t.logToPlack=async(e,t,r,a,i)=>{if(!t)return null;const n={action:"insert",mcollection:"Logs",data:[{type:"report",subtype:e,userAgent:{google_email:a||"NA",google_name:i||"NA",user_id:r||"NA"}}]};if("string"==typeof t)n.data[0].msg=t;else if(Array.isArray(t))n.data[0].message=t;else if("object"==typeof t)for(const e of Object.keys(t))n.data[0][e]=t[e];n.data[0].msg||(n.data[0].msg=e);return await fetch(`${p.PLACK_URL}/ajax/crud/query?query=${encodeURIComponent(JSON.stringify(n))}`,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"}})};const S=async(e,t)=>{const r=`${p.PAPERPILE_API_URL}${e}`,a=t&&t.method||"GET",i=e=>{const t=e?" "+e.status:"";return`${a}${t} ${r}`};let n;m.default.debug("api backend",i(),t);try{n=await fetch(r,t),m.default.debug("api backend","fetched: ",n),n&&n.status&&403===n.status&&(0,f.notifyTabsOfUserData)(null);const e=204===n.status?{}:await n.json();if(w(e)&&(m.default.errorNoNotify("api backend",i(n),e),e.error&&["No cookie or api_key","Cookie not found"].indexOf(e.error.msg)>-1))throw h.default.broadcastAll("broadcast.logout"),new Error(e.error.msg);return e}catch(e){return m.default.errorNoNotify("api backend",i(n),e),"test"===p.PP_ENV?null:((0,f.checkExtensionPermissionsAndNotify)(),null)}},C=(e,t,r)=>{const a=(e=>{let t="";return"object"!=typeof e?t=e:"/api/tasks/{jobId}"===e.url?t=e.url.replace("{jobId}",e.jobId):"/api/attachments/{attachmentId}"===e.url||"/api/attachments/{attachmentId}/improvePub"===e.url?t=e.url.replace("{attachmentId}",e.attachmentId):"/api/attachments/{attachmentId}/improvePub?library_id={libraryId}"===e.url?t=e.url.replace("{attachmentId}",e.attachmentId).replace("{libraryId}",e.libraryId):"/api/attachments/{attachmentId}/improvePub?folder_id={folderId}"===e.url?t=e.url.replace("{attachmentId}",e.attachmentId).replace("{folderId}",e.folderId):"/api/attachments/{attachmentId}/file?client_md5={md5}"===e.url?t=e.url.replace("{attachmentId}",e.attachmentId).replace("{md5}",e.md5):"/api/styles/{style}"===e.url?t=e.url.replace("{style}",e.style):"/api/styles/?q={q}"===e.url?(t=e.url.replace("{q}",e.q),t+="&limit=100"):"/api/locales/{locale}"===e.url&&(t=e.url.replace("{locale}",e.locale)),t})(e);if(t&&("POST"===t||"PATCH"===t))return S(a,{credentials:"include",method:t,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r||{})});const i=r?`${a}?${n.stringify(r)}`:a;return S(i,{credentials:"include",method:t})};t.getBackend=C;const A=async()=>{const e=await C("/api/users/me","GET");return P(e)?e:null};t.fetchUserFromApi=A;t.fetchStyleFromApi=async e=>{const t=C({url:"/api/styles/{style}",style:e.substring(e.lastIndexOf("/")+1)},"GET",{});return P(t)?t:null};t.searchStylesFromApi=async e=>{const t=C({url:"/api/styles/?q={q}",q:e},"GET");return P(t)?t:null};t.fetchLocaleFromApi=async e=>{const t=C({url:"/api/locales/{locale}",locale:e},"GET",{});return P(t)?t:null};t.requestUploadToken=async e=>{if(!e.attachment._id)return null;const t=e.attachment._id,{md5:r}=e;return await C({url:"/api/attachments/{attachmentId}/file?client_md5={md5}",attachmentId:t,md5:r},"POST",{})};t.improvePub=async e=>{let{attachmentId:t,libraryId:r,folderId:a}=e;return m.default.debug("api backend","improvePub API Call: ",t),r&&r!==l.personalLibraryId?C({url:"/api/attachments/{attachmentId}/improvePub?library_id={libraryId}",attachmentId:t,libraryId:r||""},"POST",{}):C(a?{url:"/api/attachments/{attachmentId}/improvePub?folder_id={folderId}",attachmentId:t,folderId:a||""}:{url:"/api/attachments/{attachmentId}/improvePub",attachmentId:t},"POST",{})};t.checkPdfImprove=async e=>{let{jobId:t}=e;return m.default.debug("api backend","check Task API Call: ",t),C({url:"/api/tasks/{jobId}",jobId:t},"GET",{})};t.uploadAttachment=async(e,t)=>{const r=new FormData;for(const e of Object.keys(t.fields))r.append(e,t.fields[e]);r.append("file",e);try{const e=await fetch(t.url,{method:"POST",body:r});if(e.ok)return!0;m.default.errorNoNotify("api backend","Uploading file to S3 directly failed, falling back to /s3 endpoint",e.status)}catch(e){m.default.errorNoNotify("api backend","Uploading file to S3 directly failed, falling back to /s3 endpoint",e)}try{const e=await fetch(p.PAPERPILE_API_URL+"/api/s3",{credentials:"include",method:"POST",body:r});if(e.ok)return!0;m.default.error("api backend","Uploading file to S3 via fallback endpoint failed",e.status)}catch(e){m.default.error("api backend","Uploading file to S3 via fallback endpoint failed",e)}return!1};const E=async()=>{let e=null;const t=await A();return t?t._id&&(e={...t,_id:t._id,google_name:t.google_name||"",google_email:t.google_email||""}):e=null,(0,f.notifyTabsOfUserData)(e),e};t.getUserFromApi=E;const T=async()=>g.default.forLibrary().getPermissions();t.getPermissions=T;const k=async()=>{const e=[];for(const t of Object.keys(g.default.libraries)){const r=await g.default.forLibrary(t).getSharedLibrary(t);r&&e.push(r)}return e};t.getSharedLibraries=k;const x=async e=>{const t={},r=await g.default.forLibrary().getProfiles();for(const a of Object.keys(g.default.libraries)){t[a]=r.filter(t=>{var r;return t._id!==e._id&&(null===(r=t.folders)||void 0===r?void 0:r.includes(a))});const{orderedProfiles:i}=(0,d.orderProfiles)(t[a]),n=i.slice(0,p.SHARING_STATUS_MAX_PROFILES).filter(e=>!e.base_64_photo);if(n.length){for(const e of n)await g.default.forLibrary().getProfileImageBase64(e);await g.default.forLibrary().setProfiles(n)}}return t};t.getProfilesByShared=x;t.createCollection=async e=>{let{name:t,type:r,libraryId:a,cParent:i="ROOT"}=e;const n={_id:(0,o.v4)(),cName:t,collectionType:r,cStyle:"0",cHidden:0,cParent:i,cSortOrder:-1,cCount:0};try{const e=await g.default.forLibrary(a).getOwnerId();await g.default.forLibrary(a).insertCollection({...n,owner:e})}catch(e){return null}return{collection:n,collectionsForLibrary:await(0,c.fetchCollectionsForLibraries)({dataClient:g.default})}};t.reportCrawler=async e=>{let{pub:t,url:r,isItPdf:a,proxy:i,extensionBuild:n,extensionVersion:o,browser:s}=e;return await C("/api/report/crawler","POST",{pub:t,url:r,type:a?"pdf":"metadata",proxy:i,additionalInfo:{browser:s,extensionVersion:o,extensionBuild:n,PP_ENV:p.PP_ENV}})};t.getAttachment=async(e,t)=>await g.default.forLibrary(t).getAttachment(e);t.getPub=async e=>{let{id:t,syncFirst:r,libraryId:a}=e;return r&&(g.default.forLibrary(a).sync(),await g.default.forLibrary(a).waitForSync()),g.default.forLibrary(a).getPub(t)};const R=async e=>{var t;const r=await g.default.forLibrary().getDuplicateEntries(e,!0,!0),a=await U();if(null!=a&&null!==(t=a.libraries)&&void 0!==t&&t.length)for(const t of a.libraries){await g.default.forLibrary(t).init(!0);(await g.default.forLibrary(t).getDuplicateEntries(e,!0,!0)).forEach((function(e,a){null!=e&&e.length&&(e.forEach(e=>{e&&(e.library_id=t)}),r[a]=[...r[a]||[],...e])}))}return r.map(e=>e?(0,_.uniqueArray)(e,"library_id"):null)};t.detectDuplicates=async e=>{let{pubs:t,libraryId:r}=e;const a=[];t.forEach(e=>{if(e.id_list){const t=[];e.id_list.forEach(e=>{e.match(/http:\/\//)?(t.push(e),t.push(e.replace("http://","https://"))):e.match(/https:\/\//)?(t.push(e),t.push(e.replace("https://","http://"))):t.push(e)}),e.url&&e.url.length&&t.push("url:"+e.url[0]),a.push([...t])}else a.push([])});let i=[];return g.default.forLibrary().getIsInitialized()?(i=r?await g.default.forLibrary(r).getDuplicateEntries(a,!0,!0):await R(a),m.default.debug("api backend","Duplicate bulk: ",a,i),i):i};const I=async e=>{if(!g.default.forLibrary().getIsInitialized())return[];let t=(null==e?void 0:e.url)||"";if(t&&(0,s.isProxied)(t)){const e=(0,s.deproxify)(t);e&&e.cleanUrl&&(t=e.cleanUrl)}return R([(0,_.getIdListFromUrl)(t)])};t.duplicateByTab=I;t.detectDuplicateAndSetIcon=async(e,t)=>{const{url:r}=e;if(!r||!e.id)return null;const a=await I(e);if(m.default.debug("api backend","Duplicate : ",a),a&&a[0]&&a[0][0])await(0,v.setIcon)(e.id,"imported");else if(e.url){let r=!1;if(void 0!==t)r=t;else{const t=(0,y.isSupportedPage)({url:e.url});t&&(r=t.supported)}(r||e.url.match(/.pdf$/))&&g.default.forLibrary().getIsInitialized()&&await(0,v.setIcon)(e.id,"ready")}return a};const L=async(e,t)=>{const r={...e};if(!r._id)return null;r.pubtype||(r.pubtype="PP_MISC"),await g.default.forLibrary(t).insertPub(r);return await g.default.forLibrary(t).getPub(r._id)};t.createPublication=L;t.createOrReplacePublication=async(e,t)=>{const r={...e};if(!r._id)return null;let a;return await g.default.forLibrary(t).getPub(null==r?void 0:r._id)?a=await D({id:r._id,data:e,libraryId:t}):(e.pubtype||(e.pubtype="PP_MISC"),a=await L(e,t)),a};const D=async e=>{let{id:t,data:r,autoclean:a,libraryId:i}=e;a&&self.PP.library.Publication.autoClean(r);try{await g.default.forLibrary(i).replacePub(t,r)}catch(e){return null}return{...r}};t.replacePublication=D;t.updatePublication=async e=>{let{id:t,data:r,libraryId:a}=e;try{await g.default.forLibrary(a).updatePub(t,r)}catch(e){return null}return{...r}};const N=async e=>{const t=await g.default.forLibrary(e).getAll("Collections");return{folders:null==t?void 0:t.filter(e=>"folder"===e.collectionType),labels:null==t?void 0:t.filter(e=>"label"===e.collectionType)}};t.getCollectionsFromDb=N;t.getAllJobsFromDb=async()=>g.default.forLibrary().getAll("Jobs");const O=async()=>await g.default.forLibrary().getLocalSettings()||{};t.getLocalSettingsFromDb=O;t.getUserOnlyFromDb=async()=>{let e;if(!g.default.forLibrary().getIsInitialized())return null;try{e=await g.default.forLibrary().getUser()}catch(t){e=null}return e};const U=async()=>{let e;if(!g.default.forLibrary().getIsInitialized())return null;try{e=await g.default.forLibrary().getUser()}catch(t){e=null}return e||(e=await E()),e||null};t.getUserFromDb=U;const M=async()=>{var e;const t=await O(),r=Object.keys(g.default.libraries);return(null===(e=(t.extensionDefaultCollections||[]).filter(e=>r.includes(e)))||void 0===e?void 0:e[0])||l.personalLibraryId};t.getDefaultLibrary=M;t.getSharedLibraryOrFolder=async e=>{let t=await g.default.forLibrary(e).getSharedLibrary(e);return t||(t=await g.default.forLibrary(e).getCollection(e)),t};t.getDefaultPinnedCollections=async()=>{var e;const t=await O(),r=Object.keys(g.default.libraries),a=null===(e=(t.extensionDefaultCollections||[]).filter(e=>r.includes(e)))||void 0===e?void 0:e[0],i=await N(a);return{lib:a,collections:[...i.folders||[],...i.labels||[]].filter(e=>{var r;return(null==e?void 0:e._id)&&(null===(r=t.extensionDefaultCollections)||void 0===r?void 0:r.includes(e._id))})}};t.getAllUserData=async e=>{if(!g.default.forLibrary().getIsInitialized()){const e=await A();return{tabId:await(0,b.getTabId)(),nonInitialized:!!e}}const t=await U(),r=await N(),a=await(0,c.fetchCollectionsForLibraries)({dataClient:g.default});a.profiles=await x(t);const i=await k(),n=await M(),o=await O();if(o.selectedPubId){const e=o.selectedPubId.split(":");if(e[1]){const t=await g.default.forLibrary(e[0]).getPub(e[1]);t&&(o.selectedPubShort=(0,u.formatAuthorYear)(t))}}const s=await T(),l=await new Promise(t=>{chrome.tabs.get(e.tabId,async r=>{if(null!=r&&r.id){const e=await I(r),n=[];if(null!=e&&e[0])for(const t of e[0]){var a,i;let e,r,o;null!=t&&t.library_id&&(o=t.library_id),null!=t&&t.publication_id&&(e=await g.default.forLibrary(o).getPub(t.publication_id),t.attachment_id&&(r=await g.default.forLibrary(o).getAttachment(t.attachment_id))),n.push({pub:e,attachment:r,library_id:o,publication_id:(null===(a=e)||void 0===a?void 0:a._id)||null,attachment_id:(null===(i=r)||void 0===i?void 0:i._id)||null})}t({tabId:r.id,duplicates:n})}else t({tabId:e.tabId,duplicates:[]})})});return{user:t,collections:r,activeLibrary:n,sharedLibraries:i,collectionsForLibrary:a,localSettings:o,tabId:l.tabId,duplicates:l.duplicates,permissions:s,language:(0,f.getUILanguage)()}};t.getSignedFilterLogS3Url=async e=>{try{const t=JSON.stringify({files:[{name:e}]}),r=await fetch(p.PAPERPILE_API_URL+"/api/debug/dataLayer/filterLogs",{credentials:"include",body:t,method:"POST",headers:{"Content-Type":"application/json"}});if(r.ok){return(await r.json()).urls[0]}return null}catch(e){return null}};t.getSignedExtensionLogS3Url=async e=>{try{const t=JSON.stringify({files:[{name:e}]}),r=await fetch(p.PAPERPILE_API_URL+"/api/debug/extension/logs",{credentials:"include",body:t,method:"POST",headers:{"Content-Type":"application/json"}});if(r.ok){return(await r.json()).urls[0]}return null}catch(e){return null}};t.getSignedExtensionFinishedLogS3Url=async e=>{try{const t=JSON.stringify({url:e});return!!(await fetch(p.PAPERPILE_API_URL+"/api/debug/extension/logs/finished",{credentials:"include",body:t,method:"POST",headers:{"Content-Type":"application/json"}})).ok}catch(e){return!1}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPubtype=t.simplifyRenderData=t.splitSiblingEntries=t.createObjectTagHierarchy=t.preRenderPubData=t.getAffectedFieldsForPreRender=t.getHighlightedFields=t.getAuthors=t.getTitle=t.getStringsArray=t.encodeStringToArrayParts=void 0;var a=r(48),i=r(51),n=r(18),o=r(35),s=r(32),l=r(127);const c=/(?:(?:<|<\/)(?:div|span|i|sup|sub|span|p)[^<]*>(?:(?!(?:<|<\/)(?:div|span|i|sup|sub|span|p)).)*)/g,u=e=>{const t=e.match(c);if(!t)return[e];const r=t,a=e.split(t[0]);return a[0]&&a[1]&&a[0]!==a[1]?(r.unshift(a[0]),r):r};t.encodeStringToArrayParts=u;const d=(e,t,r)=>{if(!e)return[""];const a=t=>r?(0,i.matchHighlight)(e,r):t,n=a(e);if(t&&t.journalfull){const e=a(t.journalfull);if(e.match(/<span class="pp-grid-highlight">/)){let t=[];t=n.split(" ");if(e.split(" ").filter(e=>!["and","of","for","in","the","The"].includes(e)).forEach((e,r)=>{e.startsWith('<span class="pp-grid-highlight">')&&t[r]&&!t[r].match(/<span class="pp-grid-highlight">/)&&(t[r]=`<span class="pp-grid-highlight">${t[r]}</span>`)}),t.length)return t.every(e=>!e.match(/<span class="pp-grid-highlight">/))&&e.match(/<span class="pp-grid-highlight">/)?u(e):u(t.join(" "))}}const o=u(n),s=[];return o.forEach((e,r)=>{e.startsWith('<span class="pp-grid-highlight">')&&s[s.length-1]&&s[s.length-1].startsWith('<span class="pp-grid-highlight">')?s[s.length-1]=s[s.length-1]+e.replace('<span class="pp-grid-highlight">',""):e.startsWith("</span>")&&o[r+1]&&o[r+1].startsWith("</span>")&&(null==t||!t.prefix)?s[s.length-1]=s[s.length-1]+e.replace("</span>",""):s.push(e)}),s};t.getStringsArray=d;const p=(e,t,r)=>{const a=P(e.pubtype);let{title:i}=e;if(!i){let t;if(("PP_LETTER"===a||"PP_PERSONAL_COMMUNICATION"===a)&&e.editor&&e.editor.length?[t]=e.editor:"PP_INTERVIEW"===a&&e.author&&e.author.length&&([t]=e.author),t){const e=(e=>e.first&&e.last?`${e.first} ${e.last}`:e.initials&&e.last?`${e.initials} ${e.last}`:e.collective?e.collective:e.last?e.last:"")(t);e&&("PP_LETTER"===a&&(i="Letter to "),"PP_PERSONAL_COMMUNICATION"===a&&(i="Personal communication with "),"PP_INTERVIEW"===a&&(i="Interview with "),i+=e)}}i=(0,n.interconvertString)(i||"",{format:"html"});let o=e.title?"":"pp-grid-no-title";return"PP_LETTER"!==a&&"PP_PERSONAL_COMMUNICATION"!==a&&"PP_INTERVIEW"!==a||"No title"!==i&&(o=""),[`<div class="pp-grid-title ${o}">`,'<span class="pp-grid-titletext">',...d(i,t,r),"</span>","</div>"]};t.getTitle=p;const m=(e,t,r,n,o)=>{const l=[...e].map(e=>e._id?e:{...e,_id:(0,a.v4)()});let c=n.maxAuthors,u="",p="";const m={prefix:n.prefix,suffix:n.suffix,delim:", ",output:n.output||"display",othersString:"..."},h=(0,s.authorToString)(l,m,o),g=d(h,n,void 0);if(!c||c>=l.length)return g;const f=[],b=[],y=[];let v,_;c%2==0?(v=c/2,_=c/2):(v=Math.ceil(c/2),_=Math.floor(c/2));const w=e=>g.some(t=>!!(t.startsWith('<span class="pp-grid-highlight">')&&t.replace('<span class="pp-grid-highlight">',"").trim().length>1&&(e.last&&e.last.includes(t.replace('<span class="pp-grid-highlight">',""))||e.first&&e.first.includes(t.replace('<span class="pp-grid-highlight">',""))||e.collective&&e.collective.includes(t.replace('<span class="pp-grid-highlight">',""))||e.formatted&&e.formatted.includes(t.replace('<span class="pp-grid-highlight">',"")))));if("middle"===n.cutAuthorsPosition){for(let e=0;e<l.length;e+=1){const t=w(l[e]);e<v&&!t&&(f.push(l[e]),l[e].inserted=!0),e<=v&&t&&(f.push(l[e]),l[e].inserted=!0,y.findIndex(t=>C(t,f[e]))>-1&&(v+=1))}let e=0;for(let t=l.length-1;t>=0;t-=1){const r=w(l[t]);e<_&&!l[t].inserted&&!r&&(b.unshift(l[t]),l[t].inserted=!0,e+=1),e<=_&&!l[t].inserted&&r&&(b.unshift(l[t]),l[t].inserted=!0,e+=1,_+=1)}}else for(let e=0;e<l.length;e+=1){const t=w(l[e]);e<c&&!t&&(f.push(l[e]),l[e].inserted=!0),e<=c&&t&&(f.push(l[e]),l[e].inserted=!0,c+=1),e>c&&t&&(f.push(l[e]),l[e].inserted=!0)}let P=0,S=!1;const C=(e,t)=>e._id===t._id&&e.first===t.first&&e.last===t.last&&e.initials===t.initials;if(l.forEach(e=>{C(e,f[f.length-1])?S=!0:(b[0]&&C(e,b[0])&&(S=!1),S&&(P+=1,y.push(e)))}),n.minCutAuthors&&n.showAbbrCount&&"middle"===n.cutAuthorsPosition&&P<n.minCutAuthors)for(let e=f.length;e<l.findIndex(e=>b[0]&&C(e,b[0]));e+=1)f[e]&&w(f[e])&&y.findIndex(t=>C(t,f[e]))>-1&&f.push(l[e]);const A=e=>{e.forEach((t,r)=>{const a=e[r+1],i=l.findIndex(e=>"first"in e&&e._id===t._id&&e.first===t.first&&e.last===t.last),o=l[i+1];o&&a&&!o.inserted&&(!("first"in o)||o._id===a._id&&o.first===a.first&&o.last===a.last||(n.hideOmittedDots?e.splice(r+1,0,o):e.splice(r+1,0,"...")))})};A(f),A(b);const E=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="";return e.forEach((e,a)=>{a>0&&(r+=", "),r+="..."===e?`<span className="authors-omitted" data="${E(y,!0)}">${e}</span>`:(0,s.authorToString)(e,{...m,authorId:(0,i.generateAuthorIndex)(e).id,...t?{prefix:"",suffix:""}:{}},o)}),r};let T;if(u+=E(f),p+=E(b),r[t]&&c&&c<r[t].length)if(P){let e;const t=n.locale||"en";if(e="middle"===n.cutAuthorsPosition?n.showAbbrCount?`... ${n.locales&&n.locales.nMore[t].replace("<N>",P)} ...`:"...":n.locales&&n.locales.etAl[t],"middle"===n.cutAuthorsPosition)T=`${u}${n.showAbbrCount?` <span className="authors-abbreviation" data="${y.length>100?`${E(y.slice(0,100),!0)}, {{${y.length-100}}}`:E(y,!0)}">${e}</span>`:""}${p?" "+p:""}`;else{const t=l[l.length-1],r=f[f.length-1];T=`${u} ${p?", "+p:""}`,"first"in t&&(t._id!==r._id||t.first!==r.first||t.last!==r.last)&&(T+=`<span className="authors-abbreviation-et-al">${e}</span>`)}}else T=`${u}, ${p}`;return d(T,n,void 0)},h=(e,t,r)=>{const a={author:e.author||[],editor:e.editor||[],contributor:e.contributor||[],series_editor:e.series_editor||[],translator:e.translator||[]},i=(0,s.getAuthorType)(a,t.allowOtherAuthorFields?"multiple":"single");if(!i)return d("",t,r);const n={author:[],editor:[],contributor:[],series_editor:[],translator:[]};let o=[];if(Array.isArray(i)){const l={editor:"(Eds.)",series_editor:"(Eds.)",translator:"(Translators)",author:"",contributor:"(Contributors)"};i.forEach(i=>{if(a[i].forEach(e=>{("collective"in e&&"et al."===e.collective||""!==(0,s.authorToString)(e))&&n[i].push({...e,inserted:!1})}),n[i].length){const a=m(n[i],i,e,{...t,..."author"===i?{}:{maxAuthors:4,minCutAuthors:2}},r);if(a.length){const e=[...a];l[i]&&(e.push('<span class="other-author-abbreviation">'),e.push(" "),e.push(l[i]),e.push("</span>")),o.length&&e.push(" "),("author"===i||a.some(e=>e.includes("pp-grid-highlight")))&&(o=[...e,...o])}}})}else a[i].forEach(e=>{("collective"in e&&"et al."===e.collective||""!==(0,s.authorToString)(e))&&n[i].push({...e,inserted:!1})}),o=m(n[i],i,e,t,r);return o};t.getAuthors=h;const g=(e,t,r)=>{const a=P(e.pubtype);if(!a||!["PP_CASE"].includes(a))return[];let i="";return"PP_CASE"===a&&(i=`${e.court?e.court+" \xb7 ":""}${e.jurisdiction?""+e.jurisdiction.replace("|"," \xb7 "):""}`.trim()),d(i,t,r)},f=(e,t,r)=>{const a=P(e.pubtype),i=t.locale||"en";let o="";if("PP_CONFERENCE_PAPER"===a||"PP_WEBSITE"===a)o=(e.booktitle||"").replace(/^(http|https|ftp):\/\//,"");else if("PP_BOOK_CHAPTER"===a){const t=(0,n.interconvertString)(e.booktitle||"",{format:"html"});o=e.booktitle?'<span class="source-prefix" data="in">In:</span> '+t:""}else if("PP_THESIS"===a)o=e.school||"";else if("PP_MANUSCRIPT"===a)o=e.series||"";else if("PP_ARTWORK"===a||"PP_REPORT"===a)o=e.institution||"";else if("PP_PATENT"===a){let t="";e.journal&&!e.assignee&&(t=e.journal.replace(/\./g,"")),!e.journal&&e.assignee&&(t=e.assignee),e.journal&&e.assignee&&(t=`${e.journal.replace(/\./g,"")} \xb7 ${e.assignee}`),o=t||""}else if("PP_ENCYCLOPEDIA_ARTICLE"===a)o=e.booktitle?'<span class="source-prefix" data="in">In:</span> '+e.booktitle:"";else if("PP_AUDIO"===a){let t="";e.publisher&&!e.booktitle&&(t=e.publisher),!e.publisher&&e.booktitle&&(t=e.booktitle),e.publisher&&e.booktitle&&(t=`${e.booktitle} \xb7 ${e.publisher}`),o=t||""}else if("PP_BROADCAST"===a){let t="";e.publisher&&!e.booktitle&&(t=e.publisher),!e.publisher&&e.booktitle&&(t=e.booktitle),e.publisher&&e.booktitle&&(t=`${e.publisher} \xb7 ${e.booktitle}`),o=t||""}else if("PP_PRESENTATION"===a)o=e.conference||"";else if("PP_DATASET"===a){var s;o=(null===(s=e.journal||e.journalfull)||void 0===s?void 0:s.replace(/\./g,""))||e.publisher||"",o=""+(o?'<span class="source-prefix" data="deposited">Deposited in:</span> '+o:"")}else o="PP_CASE"===a?(e.journalfull||e.journal||"").replace(/\./g,""):(e.journal||e.journalfull||"").replace(/\./g,"");let l=d(o,{...t},r);const c=!l||!l.length||!l[0];if(c&&e.publisher)l=[e.publisher];else if(c)if("PP_BOOK"===a)l=[t.locales&&t.locales.noPublisher[i]||""];else if("PP_WEBSITE"===a)e.url&&e.url.length>0&&"string"==typeof e.url[0]&&(l=[e.url[0].replace(/^(http|https|ftp):\/\//,"")]);else if(a&&["PP_LETTER","PP_MAP","PP_STANDARD","PP_FIGURE","PP_PRESENTATION","PP_COMPUTER_PROGRAM","PP_MANUAL","PP_PERSONAL_COMMUNICATION","PP_UNPUBLISHED","PP_MISC"].includes(a))l=[""];else if("PP_BILL"===a){let t="";e.legislative_body&&!e.jurisdiction&&(t=e.legislative_body),!e.legislative_body&&e.jurisdiction&&(t=e.jurisdiction),e.legislative_body&&e.jurisdiction&&(t=`${e.legislative_body} \xb7 ${e.jurisdiction}`),l=[t||""]}else l="PP_PREPRINT"===a?[t.locales&&t.locales.ppPreprint[i]||""]:[t.locales&&t.locales.noJournal[i]||""];return l},b=(e,t,r)=>{const a=(0,s.yearString)(e.published||{});return d(a,t,r)};t.getHighlightedFields=(e,t,r)=>{const a={};if("title"in t){const i=p(e,{...t.title,fieldType:"title"},null==r?void 0:r.title);if(i.some(e=>e.includes("pp-grid-highlight"))){const e=_(y(i,0));null!=e&&e.length&&(a.title=e)}}if("authors"in t){const i={searchTerms:"",maxAuthors:10,etalString:" et al.",showAbbrCount:!0,cutAuthorsPosition:"middle",prefix:'<span class="author" data={author}>',suffix:"</span>",hideOmittedDots:!0,minCutAuthors:5,locales:{etAl:{en:"et al.",de:"und andere"},nMore:{en:"<N> more",de:"<N> weitere"}},...t.authors},n=h(e,{...i,fieldType:"author",allowOtherAuthorFields:!0},null==r?void 0:r.authors);if(n.some(e=>e.includes("pp-grid-highlight"))){const e=_(y(n,0));null!=e&&e.length&&(a.authors=e)}}if("journal"in t){const i=f(e,{...t.journal,fieldType:"journal"},null==r?void 0:r.journal);if(i.some(e=>e.includes("pp-grid-highlight"))){const e=_(y(i,0));null!=e&&e.length&&(a.journal=e)}}if("year"in t&&t.year){const n=b(e,t.year,null==r?void 0:r.year);if(n.some(e=>e.includes("pp-grid-highlight"))){var i;const t=_(y(n,0));null==t||!t.length||"string"==typeof t&&t===(null===(i=e.published)||void 0===i?void 0:i.year)||(a.year=t)}}if("abstract"in t&&e.abstract){const i=d(e.abstract,{...t.abstract,fieldType:"abstract"},r.abstract);if(i.some(e=>e.includes("pp-grid-highlight"))){const e=_(y(i,0));null!=e&&e.length&&(a.abstract=e)}}return a};t.getAffectedFieldsForPreRender=e=>{const t=["title","author","journal","published"],r=["journalfull","url","booktitle","school","series","institution","assignee","conference","legislative_body","editor","pubtype","publisher"],a=Object.keys(e).filter(e=>t.includes(e)),i=Object.keys(e).some(e=>r.includes(e));return a.length&&!i?a:i?["title","author","journal","published","pubtype"]:void 0};t.preRenderPubData=(e,t)=>{const r={searchTerms:"",maxAuthors:10,etalString:" et al.",showAbbrCount:!0,cutAuthorsPosition:"middle",minCutAuthors:5,prefix:'<span class="author" data={author}>',suffix:"</span>",locales:{etAl:{en:"et al.",de:"und andere"},nMore:{en:"<N> more",de:"<N> weitere"}}},a=["title","author","journal","published","pubtype"],i=t||a,n={};for(const t of i){if(!a.includes(t))continue;const i=P(e.pubtype);switch(t){case"title":{const r=(0,s.renderFormatTitle)(e,{}),a=u(r),i=_(y(a,0));null!=i&&i.length&&(n[t]=i);continue}case"author":{var o;let a;a=i&&["PP_CASE"].includes(i)?_(y(g(e,r),0)):_(y(h(e,r),0)),null!==(o=a)&&void 0!==o&&o.length&&(n[t]=a);continue}case"journal":{var l,c;let r=_(y(f(e,{searchTerms:""}),0));if(null!==(l=r)&&void 0!==l&&l.length&&"string"==typeof r&&(r=w(r,{skipBrackets:"PP_PREPRINT"===i,skipApostrophes:!0})),"string"==typeof r&&r===e.journal)continue;null!==(c=r)&&void 0!==c&&c.length&&(n[t]=r);continue}case"published":{const r=_(y(b(e,{searchTerms:""}),0));if("string"==typeof r&&"object"==typeof e.published&&null!==e.published&&r===e.published.year)continue;null!=r&&r.length&&(n[t]=r);continue}case"pubtype":{const r=_(y([(0,s.renderFormatType)(i,e.kind)],0));null!=r&&r.length&&(n[t]=r);continue}default:continue}}return n};const y=(e,t,r)=>{const a=r||[],i=/^<(div|span|i|sup|sub|span|p).*?>/,n=/^<\/(div|span|i|sup|sub|span|p).*?>/,o=v(e);for(const e of o){let r=e[t];const o={type:"",content:""};if(!r)return[];const u=i.exec(r);if(i.lastIndex=0,u&&(null==u?void 0:u.length)>1){var s,l;const t=u[1],i=/(?:class|className)="(.*?)"/gim.exec(u[0]),d=/(?:data)="(.*?)"/gim.exec(u[0]);if(i&&(null==i?void 0:i.length)>1&&([,o.className]=i),d&&(null==d?void 0:d.length)>1&&([,o.data]=d),o.type=`<${t}>`,o.content=r.replace(u[0],""),void 0===o.content||o.content||delete o.content,!o.type&&!o.content)continue;a.push(o);const p=e.slice(1,-1);p&&(o.children=y(p,0));const m=(null===(s=e[e.length-1])||void 0===s?void 0:s.match(n))&&(null===(l=e[e.length-1])||void 0===l?void 0:l.match(/^<\/(div|span|i|sup|sub|span|p).*?>.*/));if(null!=m&&m.length){var c;const t=null===(c=e[e.length-1])||void 0===c?void 0:c.replace(/<\/?[^>]+(>|$)/g,"");t&&a.push(t)}o.children&&!o.children.length&&delete o.children;continue}const d=r.match(n);null!=d&&d.length&&(o.type="",r=r.replace(d[0],"")),o.content=r,void 0===o.content||o.content||delete o.content,o.type?(o.type||o.content)&&a.push(o):a.push(o.content||"")}return a};t.createObjectTagHierarchy=y;const v=e=>{const t=/^<(div|span|i|sup|sub|p).*?>/,r=/^<\/(div|span|i|sup|sub|p).*?>/,a=[],i=[];let n="",o=0,s=0;for(const[i,l]of e.entries()){const c=t.exec(l);if(t.lastIndex=0,!n&&!c){a.push(i+1);continue}if(c&&c.length>1&&!n){[,n]=c,o+=1;continue}if(c&&c.length>1&&n){c[1]===n&&(o+=1);continue}const u=l.match(r);u&&u.length&&n&&(u[0].startsWith("</"+n)&&(s+=1),!l.endsWith(`</${n}>`)&&n&&o&&o===s&&!e[i-1].match(r)&&a.push(i)),o&&o===s&&(a.push(i+1),n="",o=0,s=0)}let l=0;for(const t of a)i.push(e.slice(l,t)),l=t;return i};t.splitSiblingEntries=v;const _=e=>1===e.length&&"string"==typeof e[0]?e[0]:e;t.simplifyRenderData=_;const w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipBrackets:!1,skipApostrophes:!1},r=(0,o.normalizeAndStripOfNonAlphaNumericCharacters)(e,{removeLetterAccents:!1,removeNonAlphaNumericCharacters:!1});return r=(0,n.interconvertString)(r,{format:"html"}),r=r.replace(/<\/?\s*(i|b|sub|sup)\s*>/g,""),r=r.replace(/\\(textit|textbf|emph)/g,""),r=r.replace(/[()\u2039\u203a{}~]/g,""),t.skipApostrophes||(r=r.replace(/["'\xab\xbb\u2018\u2019\u201a\u201b\u201c\u201d\u201e\u201f]/g,"")),t.skipBrackets||(r=r.replace(/[[\]]/g,"")),r},P=e=>e&&l.pubtypes.includes(e)?e:"PP_MISC";t.getPubtype=P},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(40)),n=a(r(29)),o=a(r(47)),s=r(20);const l=new i.default(o.default,n.default);"development"===s.PP_ENV&&(self.onlyForTesting||(self.onlyForTesting={}),self.onlyForTesting.dataClient=l);var c=l;t.default=c},,function(e,t,r){"use strict";var a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultPubs=t.getAppsScriptUrl=t.attachPPFormattingDependenciesToWindow=t.checkExtensionPermissionsAndNotify=t.checkExtensionPermissions=t.pubEligibleForPdfCrawl=t.getDomainForUrl=t.saveUISettings=t.saveSettings=t.checkJobExists=t.cancelImports=t.checkPdfExistsAndOpen=t.activateOrCreateViewTab=t.openWebapp=t.openContentPage=t.openIntercom=t.openPubInWebapp=t.skipAutocomplete=t.enoughInformationToCallGuru=t.isPubImproved=t.isValidMatch=t.extractDoiFromUrl=t.extractFilenameFromURL=t.callGuruForPDFUrl=t.importAndTriggerDownload=t.triggerImprovePubJob=t.bulkImportIntoLibrary=t.scheduleS3Sync=t.runWebkitFileSystemMigration=t.autoCompleteFinished=t.addS3SyncJob=t.collectionsUpdated=t.importIntoLibrary=t.addBatchPdfCrawlJob=t.addPdfCrawlJob=t.addDirectPdfCrawlJob=t.cancelJobs=t.addBatchAutoCompletJob=t.addAutoCompleteJob=t.mergeAutocompletedPub=t.checkAutocompletedPubType=t.preparePubForImport=t.openUrl=t.signInOut=t.notifyTabsOfUserData=t.togglePopup=t.switchBackToOldExtension=t.terminateAllContentScripts=t.isWebAppOpen=t.getAnyWebappTabId=t.isWebimportSupported=t.isNewExtensionEnabledIndexDBSetting=t.isNewExtensionEnabled=t.getPreferedColorScheme=t.getBrowserUILanguage=t.getUILanguage=t.checkDatabaseExists=void 0;var n=i(r(211)),o=r(200),s=r(18),l=r(32),c=a(r(118)),u=r(609),d=r(26),p=a(r(213)),m=a(r(119)),h=r(40),g=r(9),f=r(42),b=r(20),y=r(177),v=r(597),_=r(100),w=r(95),P=a(r(29)),S=a(r(185)),C=a(r(47)),A=a(r(44)),E=r(138),T=r(542),k=r(745),x=r(746),R=(r(747),a(r(600)));const I=new c.default,L=new p.default(self.PP);let D=!1;t.checkDatabaseExists=async e=>{if(!("databases"in self.indexedDB))return!1;try{const t=await self.indexedDB.databases();return t.some(t=>t.name===e)}catch(e){return!1}};t.getUILanguage=()=>"en";t.getBrowserUILanguage=()=>chrome&&chrome.i18n&&chrome.i18n.getUILanguage?chrome.i18n.getUILanguage():Intl&&"function"==typeof Intl.DateTimeFormat?(new Intl.DateTimeFormat).resolvedOptions().locale:navigator&&navigator.language?navigator.language:"en";t.getPreferedColorScheme=async()=>{let e="light";if(window&&"function"==typeof window.matchMedia){window.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark")}return e};t.isNewExtensionEnabled=()=>!0;t.isNewExtensionEnabledIndexDBSetting=async()=>{const e=await(0,f.getUserFromDb)(),t=JSON.parse((null==e?void 0:e.beta_features)||"{}");return!(!t||!t.sputnik)};t.isWebimportSupported=async e=>{var t,r;let{url:a,driver:i}=e;const n=await(0,f.getUserFromDb)();let o=i;var s,l;if(o||(o=(0,T.detectDriver)(a,{remote:C.default})),!n)return{target:o,status:(0,g.normalizeBoolean)(null===(s=o)||void 0===s||null===(l=s.driver)||void 0===l?void 0:l.settings)};let c;return null!==(t=o)&&void 0!==t&&null!==(r=t.driver)&&void 0!==r&&r.settings&&(c=(n.disabled_webimport||[]).includes(o.driver.settings)),{target:o,status:!c}};t.getAnyWebappTabId=async()=>{const e=await(0,_.getWebappTabs)();return e.length>0&&e[0].id?e[0].id:null};t.isWebAppOpen=async()=>(await(0,_.getWebappTabs)()).length>0;t.terminateAllContentScripts=async()=>{P.default.debug("utils","terminate signal"),await new Promise(e=>{chrome.tabs.query({},async t=>{for(const e of t)await C.default.cs.execute("webimport.terminateNewExtension",e.id),await C.default.cs.execute("popup.utils.terminateNewExtension",e.id);e(!0)})}),chrome.runtime.reload()};t.switchBackToOldExtension=e=>{(0,E.setPopup)("old-extension"),self.PP.backend.Settings.deactivateBetaFeature("sputnik",async()=>{chrome.tabs.query({},async t=>{for(const e of t)await C.default.cs.execute("webimport.terminateNewExtension",e.id),await C.default.cs.execute("popup.utils.terminateNewExtension",e.id);e&&e.tabId&&e.url&&self.PP.bg.App.forceLoadWebimportScript({tabId:e.tabId,url:e.url}),A.default.forLibrary().getIsInitialized()&&await A.default.forLibrary().wipeAll(),chrome.runtime.reload()})})};t.togglePopup=async e=>{const t=await C.default.cs.execute("popup.popup-helpers.isPopupVisible",e);t&&t.result?await C.default.cs.execute("popup.popup-helpers.hidePopup",e):(await C.default.cs.execute("popup.popup-helpers.mockShowPopup",e),setTimeout(async()=>{await C.default.cs.execute("popup.popup-helpers.showPopup",e),(0,R.default)({name:"Open pop-up"})},0))};const N=e=>{chrome.tabs.query({},async t=>{for(const r of t){const t=(0,w.isSupportedPage)({url:r.url||""});await C.default.cs.execute("render.renderApp",r.id,{url:r.url,user:e,tabId:r.id,websitePubtypeAllowed:null==t?void 0:t.websitePubtypeAllowed}),await C.default.cs.execute("webimport.updateUser",r.id,{url:r.url,user:e,tabId:r.id,websitePubtypeAllowed:null==t?void 0:t.websitePubtypeAllowed})}})};t.notifyTabsOfUserData=N;t.signInOut=async e=>{let{type:t}=e;U({type:t}),"sign-out"===t&&N(null)};t.openUrl=e=>{let{url:t}=e;chrome.tabs.create({url:t})};const O=e=>self.PP.library.Publication.preparePubForImport(e);t.preparePubForImport=O;t.checkAutocompletedPubType=(e,t)=>e.pubtype===t.pubtype||("PP_WEBSITE"!==t.pubtype||"[No title]"!==t.title)&&("PP_MISC"===e.pubtype||"PP_WEBSITE"===e.pubtype||("PP_ARTICLE"===e.pubtype&&("PP_CONFERENCE_PAPER"===t.pubtype||"PP_BOOK_CHAPTER"===t.pubtype)||("PP_CONFERENCE_PAPER"===e.pubtype&&("PP_ARTICLE"===t.pubtype||"PP_BOOK_CHAPTER"===t.pubtype)||"PP_BOOK_CHAPTER"===e.pubtype&&("PP_CONFERENCE_PAPER"===t.pubtype||"PP_ARTICLE"===t.pubtype))));t.mergeAutocompletedPub=(e,t)=>{const r=self.PP.Utils.clone(t);void 0!==e._id&&(r._id=e._id),void 0!==e.folders&&(r.folders=e.folders),void 0!==e.labels&&(r.labels=e.labels),void 0!==e.citekey&&(r.citekey=e.citekey),void 0!==e.gs_cluster_id&&(r.gs_cluster_id=e.gs_cluster_id),void 0!==e.starred&&(r.starred=e.starred),void 0!==e.trashed&&(r.trashed=e.trashed),void 0!==e.crawl_urls&&(r.crawl_urls=(0,l.mergeURLs)(e.crawl_urls,r.crawl_urls)),void 0!==e.url&&(r.url=(0,l.mergeURLs)(e.url,r.url));const a=I.getPubType(r.pubtype,r.subtype,"en","paperpile"),i=["pubtype","subtype"];if(a&&a.fields)for(const t of a.fields)"name"in t&&t.name in e&&!(t.name in r)&&!i.includes(t.name)&&(r[t.name]=e[t.name]);if(r.title&&e.title&&(r.title=(0,s.reapplyFormatting)(r.title,e.title,.3)),r.booktitle&&e.booktitle&&(r.booktitle=(0,s.reapplyFormatting)(r.booktitle,e.booktitle,.3)),r.issn&&r.issn_alt&&(r.issn===e.issn_alt&&r.issn_alt===e.issn?(r.issn_alt=e.issn_alt,r.issn=e.issn):r.issn_alt!==e.issn||e.issn_alt||(r.issn_alt=r.issn,r.issn=e.issn)),r.published&&e.published&&r.published.year===e.published.year&&(!r.published.month&&e.published.month&&(r.published.month=e.published.month),!r.published.day&&e.published.day&&(r.published.day=e.published.day)),!r.accessed&&"PP_WEBSITE"===r.pubtype){const e=new Date;r.accessed={year:e.getFullYear().toString(),month:(e.getMonth()+1).toString(),day:e.getDate().toString()}}return r};t.addAutoCompleteJob=async e=>{let{user:t,pub:r,libraryId:a}=e;return S.default&&(P.default.debug("utils","add autocomplete job"),await S.default.addJob({libraryId:a,type:"autocomplete",priority:m.default.SINGLE_AUTOCOMPLETE,broadcastType:"tab",data:{pub:r,user:t,source:"webapp",pubExists:!0,force:!0}})),{success:!0}};t.addBatchAutoCompletJob=async e=>{let{libraryId:t,user:r,pubs:a,taskId:i,tabId:n}=e;if(S.default){P.default.debug("utils","add batch-auto-complete job");const e=[];for(const o of a)e.push({libraryId:t,type:"autocomplete",priority:m.default.BATCH_AUTOCOMPLETE,tabId:n,broadcastType:"tab",data:{pub:o,taskId:i,source:"webapp",user:r,pubExists:!0,force:!0}});S.default.addJobs(e)}return{success:!0}};t.cancelJobs=async e=>{let{cancelImports:t=!1,cancelAutocompletes:r=!1}=e;if(S.default){P.default.debug("utils","cancel jobs");const e=[];t&&e.push("pdf-crawl"),r&&e.push("autocomplete"),S.default.cancelJobs(e.length?e:void 0)}return{success:!0}};t.addDirectPdfCrawlJob=async e=>{let{user:t,pub:r,tabId:a,source:i,libraryId:n,url:o,pdfAttachingData:s}=e;return S.default&&(P.default.debug("utils","add pdf-crawl job for direct PDF downloading"),await S.default.addJob({libraryId:n,type:"pdf-crawl",priority:m.default.SINGLE_PDF_DOWNLOAD,tabId:a,broadcastType:"all",data:{source:i||"webimport",pub:r,user:t,pdf_url:{local:[o]},pdfAttachingData:s}})),{success:!0}};t.addPdfCrawlJob=async e=>{let{user:t,pub:r,tabId:a,source:i,libraryId:n,pdfAttachingData:o}=e;return S.default&&(P.default.debug("utils","add pdf-crawl job"),await S.default.addJob({libraryId:n,type:"pdf-crawl",priority:m.default.SINGLE_PDF_DOWNLOAD,tabId:a,broadcastType:"tab",data:{source:i||"webimport",pub:r,user:t,pdf_url:r&&r.pdf_url,pdfAttachingData:o}})),{success:!0}};t.addBatchPdfCrawlJob=async e=>{let{user:t,pubs:r,taskId:a,tabId:i,source:n,libraryId:o}=e;if(S.default){P.default.debug("utils","add batch-pdf-crawl job");const e=[];for(const s of r)e.push({libraryId:o,type:"pdf-crawl",priority:m.default.BATCH_PDF_DOWNLOAD,tabId:i,broadcastType:"tab",data:{libraryId:o,source:n||"webimport",pub:s,user:t,taskId:a,pdf_url:s&&s.pdf_url}});S.default.addJobs(e)}return{success:!0}};t.importIntoLibrary=async e=>{let{pub:t,tabId:r,source:a,pdf_url:i,libraryId:n,isCustomPdfViewer:o,collections:s}=e;P.default.debug("utils","Import into library call api, single, 1",i,t);const l=await(0,f.getUserFromDb)();if(!t||!l)return null;t.autoCleaned&&t._id||self.PP.library.Publication.autoClean(t);const c={webimport:!0,popup:"webimport"!==a},u=O(t);P.default.debug("utils","Import into library call api, single, 2",u,c),u.owner=await A.default.forLibrary(n).getOwnerId();const d=await(0,f.getDefaultPinnedCollections)(),p=d.lib||n||h.personalLibraryId,b=(0,g.uniqueArray)([...s||[],...d.collections||[]].filter(e=>e._id&&((null==s?void 0:s.map(e=>e._id))||[]).includes(e._id)));u.folders=(b||[]).filter(e=>"folder"===e.collectionType).map(e=>e._id),u.labels=(b||[]).filter(e=>"label"===e.collectionType).map(e=>e._id);const y=await(0,f.createPublication)(u,p);if(!y){const e="backend error";return await C.default.cs.execute("webimport.pubAdded",r,{pub:t,errorMsg:e}),await C.default.cs.execute("render.renderError",r,{errorMsg:e}),null}if(P.default.debug("utils","inserted: immediate ",y,c),c.popup){const e={pubExists:!0,pub:y,user:l,source:a,activeLibraryId:p,duplicates:[{library_id:p,publication_id:null==y?void 0:y._id,attachment_id:null,pub:y}],saving:!1};await C.default.cs.execute("render.renderApp",r,e),o&&await C.default.popup.execute("render.renderApp",r,e)}return c.webimport&&await C.default.cs.execute("webimport.pubAdded",r,{pub:t,source:a}),"webimport"!==a&&"context"!==a&&await(0,E.setIcon)(r,"imported"),P.default.debug("utils","should add pdf-crawl job single",(0,g.normalizeBoolean)(null==l?void 0:l.autoDownloadPDFs)),S.default&&a&&((0,g.normalizeBoolean)(null==l?void 0:l.autoDownloadPDFs)&&F(t)||"pdf"===a)&&await S.default.addJob({libraryId:p,type:"pdf-crawl",tabId:r,priority:m.default.SINGLE_PDF_DOWNLOAD,broadcastType:"tab",data:{source:a,tabId:r,user:l,pub:t,pdf_url:t&&t.pdf_url?t.pdf_url:i,triggerImprovePub:"pdf"===a&&!t.title}}),{success:!0,createdPub:y}};t.collectionsUpdated=async e=>{let{pubIds:t,libraryId:r,selectedCollections:a}=e;if(await(0,_.isOnWebappTab)())return null;P.default.debug("utils","collectionUpdated: ",a,t,r);const i=await A.default.forLibrary(r).getPub(t[0]);if(!i)return null;const{foldersToPush:n,labelsToPush:o,foldersToPull:s,labelsToPull:l}=(0,g.comparePubCollections)(i,a);return(n.length||s.length)&&await A.default.forLibrary(r).pushOrPullCollections(t,"folders",n.length?"push":"pull",n.length?n:s),(o.length||l.length)&&await A.default.forLibrary(r).pushOrPullCollections(t,"labels",o.length?"push":"pull",o.length?o:l),t?A.default.forLibrary(r).getBulk("Library",t):null};t.addS3SyncJob=async e=>{var t;e&&"finished"===e.status&&e.attachmentData&&S.default&&S.default.addJob({libraryId:e.libraryId,type:"s3-sync",priority:m.default.S3_SYNC,broadcastType:"tab",data:{attachmentData:e.attachmentData},throttleStrategy:"periodic",throttleValue:6e4,timesMaxRun:3,tabId:null===(t=e.job)||void 0===t?void 0:t.tabId})};t.autoCompleteFinished=async e=>{e&&"finished"===e.status&&e.isMatched&&e.job&&e.job.libraryId&&e.pub&&("improve-pub"===e.source||"webapp"===e.source&&e.taskId)&&(delete e.pub.pdf_url,(0,f.replacePublication)({id:e.pub._id,data:e.pub,libraryId:e.job.libraryId}))};t.runWebkitFileSystemMigration=async(e,t)=>{const r=await A.default.forLibrary().getUser();if(!r)return;const a=await(0,k.getAllAttachments)(r._id);if(a.error)return void P.default.error("utils","runWebkitFileSystemMigration",a.error);if(P.default.info("utils",`webkitFileSystemMigration run started removeAfterInsert: ${e}, unsyncedOnly: ${t}, nrAttachments: ${a.attachments.length}`),0===a.attachments.length)return;const i=await A.default.forLibrary().getAll("Attachments")||[],o={};for(const e of i)e&&e._id&&(t&&!e.s3_md5?o[e._id]=e:t||(o[e._id]=e));const s=[];for(const e of a.attachments)o[e]&&s.length<=200&&s.push(e);if(0===s.length)return;let l=0;for(const t of s){if(await A.default.forLibrary().checkIfFileExists(t))e&&(0,k.deleteAttachment)(r._id,t);else{const a=await(0,k.getFileAsBlob)(r._id,t);if(a&&a.blob){const i=new FileReader;i.readAsArrayBuffer(a.blob),await new Promise(e=>{i.onloadend=t=>e(t)});const s=i.result instanceof ArrayBuffer?n.ArrayBuffer.hash(i.result):null;if(s){await A.default.forLibrary().insertFile({_id:t,blob:a.blob,size:a.blob.size,"mime-type":o[t].mimeType,md5:s}),l+=1;await A.default.forLibrary().checkIfFileExists(t)&&e&&(0,k.deleteAttachment)(r._id,t)}}}}P.default.info("utils","webkitFileSystemMigration run finished, nrTransfered: "+l),(0,x.logToBackend)("webkitFileSystemMigration run finished",{nrTransfered:l},{},P.default)};t.scheduleS3Sync=async()=>{if(S.default&&!D){D=!0,await A.default.forLibrary().waitForSync(),await(0,u.ensureS3SyncJobForAllFiles)({modelPersonal:A.default.forLibrary(),model:A.default.forLibrary(),libraryId:h.personalLibraryId,queue:S.default});for(const e of Object.keys(A.default.libraries))await A.default.forLibrary(e).waitForSync(),await(0,u.ensureS3SyncJobForAllFiles)({modelPersonal:A.default.forLibrary(),model:A.default.forLibrary(e),libraryId:e,queue:S.default});D=!1}};t.bulkImportIntoLibrary=async e=>{let{pubs:t,tabId:r,collections:a,noteTextSearchPage:i,source:n,libraryId:o}=e;const s=await(0,f.getUserFromDb)(),l=[...t];P.default.debug("utils","Bulk Import into library call api",l,a);let c=0;await C.default.cs.execute("render.importProgress",r,{count:0,all:l.length,pubs:l});const u=[],d=await(0,f.getDefaultPinnedCollections)(),p=(0,g.uniqueArray)([...a||[],...d.collections||[]].filter(e=>e._id&&((null==a?void 0:a.map(e=>e._id))||[]).includes(e._id)));for(const e of t)c+=1,u.push({libraryId:d.lib||o||h.personalLibraryId,type:"autocomplete",priority:m.default.BATCH_AUTOCOMPLETE_EXTENSION,tabId:r,broadcastType:"tab",data:{pub:e,user:s,pubExists:!0,force:!0,source:n,count:c,noteTextSearchPage:i,collections:p}});return await(null===S.default||void 0===S.default?void 0:S.default.addJobs(u)),null};t.triggerImprovePubJob=async e=>{S.default&&await S.default.addJob({libraryId:e.libraryId,type:"improve-pub",priority:m.default.SINGLE_PDF_IMPROVE,tabId:e.tabId,broadcastType:"tab",throttleStrategy:"periodic",throttleValue:5e3,timesMaxRun:60,data:{attachmentId:e.attachmentId,backgroundJobId:e.backgroundJobId}})};t.importAndTriggerDownload=async e=>{var t;if("finished"!==e.status||!await(null===S.default||void 0===S.default?void 0:S.default.checkExists(null===(t=e.job)||void 0===t?void 0:t._id)))return;const{user:r,count:a}=e.job.data,{tabId:i}=e.job,{source:n,triggerImprovePub:o,triggerNonPdfAttachmentInsert:s}=e,{noteTextSearchPage:c}=e.job.data,u=e.pub;if(!u)return;const d=await(0,f.getDefaultPinnedCollections)(),p=(0,g.uniqueArray)([...e.selectedCollections||[],...d.collections.filter(t=>t._id&&e.selectedCollections.map(e=>e._id).includes(t._id))||[]]);u.folders=(p||[]).filter(e=>"folder"===e.collectionType).map(e=>e._id),u.labels=(p||[]).filter(e=>"label"===e.collectionType).map(e=>e._id);const h=[];if(u.url){const e=[];for(const t of u.url)/^file:/.test(t)?h.push(t):e.push(t);u.url=e}"pdf"===n&&u.url&&0===u.url.length&&0===h.length&&h.push(u.url[0]);const b={publisher:[],preprint:[],local:h};u.pdf_url&&(u.pdf_url.publisher&&(b.publisher=u.pdf_url.publisher),u.pdf_url.preprint&&(b.preprint=u.pdf_url.preprint),delete u.pdf_url);const y=O(u);y.owner=await A.default.forLibrary(e.libraryId).getOwnerId(),c&&(y.note=c);const v=await(0,f.createOrReplacePublication)(y,e.libraryId),_=(0,l.formatAuthorYear)(u);if(P.default.debug("utils","inserted - after autocomplete: ",v,e),a&&await C.default.cs.execute("render.importProgress",i,{currentPub:{...e.pub,authorYearString:_,pdf_url:b}}),await C.default.cs.execute("webimport.pubAdded",i,{pub:y,source:n}),"webimport"!==n&&"context"!==n&&await(0,E.setIcon)(i,"imported"),s)S.default&&(0,g.normalizeBoolean)(null==r?void 0:r.autoDownloadPDFs)&&y&&y.url&&y.url[0]&&S.default.addJob({type:"add-attachment",priority:m.default.SINGLE_AUTOCOMPLETE,broadcastType:"tab",tabId:i,libraryId:e.libraryId,data:{url:y.url[0],pub:y}});else{const t={source:n,bulk:!0,tabId:i,user:r,pub:y,pdf_url:b,triggerImprovePub:o};let a=(0,g.normalizeBoolean)(null==r?void 0:r.autoDownloadPDFs);if(o&&(a=!0),S.default&&a&&F(y)){var w;P.default.debug("utils","add pdf-crawl job",r);let a=m.default.BATCH_PDF_DOWNLOAD;(null===(w=e.job)||void 0===w?void 0:w.priority)===m.default.BATCH_AUTOCOMPLETE_EXTENSION&&(a=m.default.BATCH_PDF_DOWNLOAD_EXTENSION),await S.default.addJob({libraryId:e.libraryId,type:"pdf-crawl",priority:a,tabId:i,broadcastType:"tab",data:t})}else if("webimport"===n){const e={errorMsg:"not-eligible",status:"finished",job:{data:{pub:y,source:n,bulk:!0}}};await C.default.cs.execute("render.pdfCrawlFinished",i,e),await C.default.cs.execute("webimport.pdfCrawlFinished",i,e)}}};t.callGuruForPDFUrl=e=>!!(e.pubtype&&["PP_ARTICLE","PP_BOOK_CHAPTER","PP_CONFERENCE_PAPER","PP_REPORT","PP_PREPRINT"].indexOf(e.pubtype)>-1)||!!(e.doi||e.pmid||e.pmc||e.arxivid||e.issn||e.issn_alt);t.extractFilenameFromURL=(e,t)=>{const r=decodeURIComponent(e);let a="[article_pdf].pdf";t&&t.toLocaleLowerCase()in g.commonMimeTypes&&(a="untitled."+g.commonMimeTypes[t.toLocaleLowerCase()]);const i=r.substring(r.lastIndexOf("/")+1).replace(/\?.*/,"");return/.\..{3,4}$/.test(i)&&!/\.php/.test(i)&&(a=i),a};t.extractDoiFromUrl=e=>{let t=null;for(const r of e){const e=r.toString().replace(/[\n\r\t]+/,"").match(/.+[=/:?](10\.\d{4,5}[/%2F][^?&]{3,})/);if(e&&e[1]&&!t){let[,r]=e;r=decodeURIComponent(e[1]).toLowerCase().replace(/\/$/,"");const a=/[./](abstract|abs|pdf|php|event_abstract|front-matter|full|fulltext|summary|short|html|htm|xml)$/i;r=r.replace(a,""),r=r.replace(a,""),r=r.replace(/\/$/,"").replace(/^\s+/,""),/^10\.\d{4,5}\/.{3,}/.test(r)&&(t=r)}}return t&&(t=t.replace(/(10\.1101\/.+)(v\d+)$/,"$1")),t};t.isValidMatch=(e,t)=>{let r=!1;if("PP_PREPRINT"!==t.pubtype&&"bioRxiv"!==t.journal||(r=!0),"PP_ARTICLE"===e.pubtype&&r){const r=(e.doi||"").replace(/(10\.\d+)(\/.+)/,"$1"),a=(t.doi||"").replace(/(10\.\d+)(\/.+)/,"$1");if(r&&r!==a)return!1}return!0};t.isPubImproved=(e,t)=>{let r=!1;if(!t.title)return r;const a=L.diff(e,t);if(a&&a.update){Object.keys(a.update).filter(e=>!/^_/.test(e)&&"author"!==e&&"editor"!==e).length>0&&(r=!0)}return r};t.enoughInformationToCallGuru=e=>{let t=0;["pmid","arxivid","doi","isbn","isbn_alt","pmc"].forEach(r=>{e[r]&&(t=1)});let r=0;return e.url&&"string"!=typeof e.url&&(e.url.forEach(e=>{/10\.\d+\/.+/.test(e)&&(t=1),/nih.+\/PMC\d+/.test(e)&&(t=1),/arxiv\.org.+\d+/.test(e)&&(t=1)}),r=e.url.length),t||(0===r&&e.title?t=2:e.title&&(e.author&&e.author||e.editor&&e.editor[0])&&("PP_ARTICLE"===e.pubtype&&(e.journal||e.journalfull||e.issn||e.issn_alt)||"PP_BOOK"===e.pubtype?t=2:"PP_BOOK_CHAPTER"!==e.pubtype&&"PP_CONFERENCE_PAPER"!==e.pubtype||!e.booktitle||(t=2))),t};t.skipAutocomplete=e=>{let t=!0;for(const r of["doi","pmid","pmc","arxivid","isbn","isbn_alt"])e[r]&&(t=!1);if("PP_ARTICLE"===e.pubtype)for(const r of["issn","issn_alt"])e[r]&&(t=!1);if(e.url&&"string"!=typeof e.url&&e.url.forEach(e=>{e.match(/10\.\d+\/.+/)&&(t=!1)}),e.pubtype&&["PP_WEBSITE","PP_NEWS_ARTICLE","PP_VIDEO"].includes(e.pubtype)){let r=!1;for(const t of["title","author","published"])e[t]||(r=!0);r&&(t=!1)}return t};t.openPubInWebapp=async e=>{var t,r;if(!(null!==(t=e.pub)&&void 0!==t&&t._id||e.pubs))return void P.default.info("openPubInWebapp requires valid pub");const a=await(0,_.getWebappTabs)();let i;e.libraryId&&e.libraryId!==h.personalLibraryId&&(i=await(0,f.getSharedLibraryOrFolder)(e.libraryId));const n=i?"cName"in i?i.cName:i.name:"my-library";if(null!==(r=a[0])&&void 0!==r&&r.id){var s,c;(0,_.focusWebappTab)(a),C.default.webapp.execute("webapp.focusSpecificPub",a[0].id,{pubId:null===(s=e.pub)||void 0===s?void 0:s._id,pubs:null==e||null===(c=e.pubs)||void 0===c?void 0:c.map(e=>e._id),libraryId:e.libraryId,sharedName:n,sharedType:i?"cName"in i?"shared-folder":"shared-library":void 0,panelToOpen:e.panelToOpen})}else{var u;const t=e.libraryId&&"personal"!==e.libraryId?(0,o.getNameForURL)(n,e.libraryId,"library"):"my-library";if(null!==(u=e.pub)&&void 0!==u&&u._id){const r=await A.default.forLibrary(e.libraryId).getReferences([e.pub._id]);if(r[0]){const a=(0,l.formatAuthorYear)(r[0]);chrome.tabs.create({url:`${b.NEW_WEBAPP_URL}/${t}/${(0,o.cleanNameForURL)(a)}-p${(0,o.uuidToBase64)(e.pub._id)}`})}}else if(e.pubs){const r=e.pubs.filter(e=>e._id).map(e=>e._id);let a="";const i=await A.default.forLibrary(e.libraryId).getReferences([...r]);for(const e of i)if(e){const t=""+(0,l.formatAuthorYear)(e);if(null!=e&&e._id){a=`${a}+${`${(0,o.cleanNameForURL)(t)}-p${(0,o.uuidToBase64)(e._id)}`}`}}chrome.tabs.create({url:`${b.NEW_WEBAPP_URL}/${t}/${a}`})}}};t.openIntercom=async()=>{const e=await(0,_.getWebappTabs)();let t=0;const r=async e=>{const r=setInterval(async()=>{t+=1;if(!await C.default.webapp.execute("checkConnection",e,{}))return;if(t>30)return void clearInterval(r);const a=await C.default.webapp.execute("webapp.openIntercom",e,{});(a&&!a.error||t>30)&&clearInterval(r)},200)};e[0]&&e[0].id?(await(0,_.focusWebappTab)(e),r(e[0].id)):chrome.tabs.create({url:b.NEW_WEBAPP_URL},e=>{e&&e.id&&r(e.id)})};t.openContentPage=async()=>{const e=(0,b.getPaperpileContentUrl)(b.PP_ENV)+"/?welcome";chrome.tabs.create({url:e},()=>{})};const U=async e=>{let{settingsTab:t,tabToRemove:r,type:a,tabId:i}=e;const n=await(0,_.getWebappTabs)();if(n[0])return await(0,_.focusWebappTab)(n),"permissions"===a&&C.default.webapp.execute("webapp.checkExtensionStatus",n[0].id),void(t&&(C.default.webapp.execute("webapp.openSettingsDialog",n[0].id,{type:t}),r&&chrome.tabs.remove(r)));let o;"sign-in"===a?o=(0,b.getPaperpileContentUrl)(b.PP_ENV)+"/sign-in/":"sign-up"===a?o=(0,b.getPaperpileContentUrl)(b.PP_ENV)+"/sign-up/":(o=b.NEW_WEBAPP_URL,"sign-out"===a?o+="/"+a:t&&(o+="/settings/"+t));const s=i?await(0,_.getTabUrl)(i):"";i&&(0,g.isNewTabUrl)(s||"")?chrome.tabs.update(i,{url:o},()=>{r&&chrome.tabs.remove(r)}):chrome.tabs.create({url:o},()=>{r&&chrome.tabs.remove(r)})};t.openWebapp=U;const M=async e=>{let{attachment:t,preferedViewer:r,libraryId:a,tabId:i,page:n,query:o,optionsArgs:s,pub:c}=e;const u=s||{background:!1,forceNew:!1};let d;chrome.tabs.query({},async e=>{if(!t)return;const s={id:null,windowId:null,url:null},p=`?id=${t._id}${a&&a!==h.personalLibraryId?"&library="+a:""}${n?"&page="+n:""}${o?"&q="+o:""}`;for(const r of e)(0,g.isNewWebAppTab)(r.url)&&r.id&&r.url&&r.url.indexOf("view/")>-1&&r.url.indexOf(""+t._id)>-1?(s.id=r.id,s.windowId=r.windowId,n&&o&&(s.url=`${r.url.split("?id=")[0]}${p}`)):r.id===i&&(d=r.index);u.forceNew||null===s.id||null===s.windowId?"metapdf"===r?chrome.tabs.create({index:d+1,url:`${b.NEW_WEBAPP_URL}/view/${p}`,active:!u.background},e=>{if(e.id&&c&&chrome.scripting){const t=e=>{document.title=e},r=(0,l.formatAuthorYearJournal)(c,!0);chrome.scripting.executeScript({target:{tabId:e.id},injectImmediately:!0,func:t,args:[r]},()=>{})}}):chrome.tabs.create({index:d+1,url:`${b.NEW_WEBAPP_URL}/view/plain/${p}`,active:!u.background}):chrome.windows.update(s.windowId,{focused:!0},()=>{s.id&&(s.url?chrome.tabs.update(s.id,{active:!0,url:s.url},()=>{}):chrome.tabs.update(s.id,{active:!0},()=>{}))})})};t.activateOrCreateViewTab=M;t.checkPdfExistsAndOpen=async e=>{const{pub:t}=e;let r,{user:a}=e,{tabId:i}=e;if(r="string"==typeof e.attachment?await(0,f.getAttachment)(e.attachment,e.libraryId):"object"==typeof e.attachment?e.attachment:void 0,a||(a=await(0,f.getUserFromDb)()),i||(i=await(0,_.getTabId)()),!r)return void P.default.debug("utils","No attachment found in backend");const n=self.PP.backend.Settings.get("pubview_preferredViewer");P.default.debug("utils","Open pdf",i,t,r._id,n),self.PP.backend.LocalAttachments.getAttachmentFileEntry(r,async(n,o)=>{if(P.default.debug("utils","getAttachmentFileEntry",n,o),o){if(r&&r._id){await A.default.forLibrary(e.libraryId).checkIfFileExists(r._id)||(await C.default.cs.execute("render.pdfProgress",i,{progress:{type:"progress",downloadedCount:0}}),await C.default.cs.execute("webimport.pdfProgress",i,{text:"S3",pub:t,progress:{downloadedCount:0}}));const n=await A.default.forLibrary(e.libraryId).getFile(r._id);var s;if(n)P.default.debug("utils","Exists in indexDB, return",n),M({attachment:r,preferedViewer:null===(s=a)||void 0===s?void 0:s.pubview_preferredViewer,libraryId:e.libraryId,tabId:i,pub:t})}}else{var l;var c;if((null===(l=r)||void 0===l?void 0:l._id)&&await A.default.forLibrary(e.libraryId).checkIfFileExists(r._id)&&r)M({attachment:r,preferedViewer:null===(c=a)||void 0===c?void 0:c.pubview_preferredViewer,libraryId:e.libraryId,tabId:i,pub:t});else self.PP.files.Files.getFileAsBlob(n,async n=>{var o,s,l,c,u;n&&null!==(o=r)&&void 0!==o&&o._id&&null!==(s=r)&&void 0!==s&&s.mimeType&&null!==(l=r)&&void 0!==l&&l.md5&&null!==(c=a)&&void 0!==c&&c._id&&(await A.default.forLibrary(e.libraryId).insertFile({_id:r._id,blob:n.blob,size:n.blob.size,"mime-type":r.mimeType,md5:r.md5}),M({attachment:r,preferedViewer:null===(u=a)||void 0===u?void 0:u.pubview_preferredViewer,libraryId:e.libraryId,tabId:i,pub:t}))})}})};t.cancelImports=async e=>{let{tabId:t,pub:r,importedPubs:a,isItPdf:i,libraryId:n,isItDone:o,isLastLocation:s}=e;if(r&&r._id&&!a&&await A.default.forLibrary(n).updatePub(r._id,{trashed:1}),S.default&&await S.default.cancelJobs(),null!=a&&a.length||r){let e=0;const t=()=>new Promise(t=>{const i=setInterval(async()=>{if(e+=1,e>20)return void clearInterval(i);const o=await(0,f.detectDuplicates)({pubs:r?[r]:[...a||[]],libraryId:n});(r&&o.every(e=>null===e)||null!=a&&a.length&&o.every(e=>null==e?void 0:e[0]))&&(clearInterval(i),t(!0))},200)});await t()}if(r&&!a){if(!s)return await C.default.cs.execute("render.deletedPub",t,{tabId:t,id:r._id}),!0;await(0,E.setIcon)(t,"default"),i?(C.default.cs.execute("popup.utils.terminateNewExtension",t),(0,y.reinject)(t)):"PP_WEBSITE"!==r.pubtype?(await C.default.cs.execute("popup.utils.terminateNewExtension",t),await C.default.cs.execute("webimport.terminateNewExtension",t),(0,y.reinject)(t)):C.default.cs.execute("popup.utils.terminateNewExtension",t)}else{await C.default.cs.execute("webimport.importsCancelled",t,{isItDone:o});const e=(await(0,_.getWebappTabs)()).map(e=>e.id);if(null!=e&&e.length&&null!=a&&a.length)for(const t of e)C.default.webapp.execute("webapp.pdfDownloadsCancelled",t,{pubs:a})}return!0};t.checkJobExists=async e=>{if(!S.default)return null;return await S.default.checkExists(e._id)};t.saveSettings=async e=>{let{settings:t,tabId:r}=e;P.default.debug("utils","Save settings: ",t,Object.keys(t)),await A.default.forLibrary().updateUser({...t});const a=await A.default.forLibrary().getUser();await C.default.cs.execute("render.renderApp",r,{user:a}),await C.default.cs.execute("webimport.updateUserState",r,{user:a,tabId:r}),Object.keys(t).some(e=>/disabled_webimport/.test(e))&&(await C.default.cs.execute("webimport.terminateNewExtension",r),await C.default.cs.execute("popup.utils.terminateNewExtension",r),(0,v.tabActivated)(r))};t.saveUISettings=async e=>{let{changes:t,tabId:r}=e;P.default.debug("utils","Save UI settings: ",t);const a=await A.default.forLibrary().getUser();await A.default.forLibrary().updateUserJSONField("ui_settings",{extension:{...JSON.parse(a.ui_settings||"{}").extension||{},...t}});const i=await A.default.forLibrary().getUser();await C.default.cs.execute("render.renderApp",r,{user:i})};t.getDomainForUrl=e=>{let t=self.PP.Utils.getDomainSuffix(e);return(0,d.isLoginUrl)(e)&&(t="Connecting to proxy"),t};const F=(e,t)=>{if(e.pubtype&&["PP_ARTICLE","PP_BOOK_CHAPTER","PP_CONFERENCE_PAPER","PP_PREPRINT"].includes(e.pubtype))return!0;if(e.doi||e.pmc||e.pmid||e.arxivid)return!0;if(e.url&&e.url.some(e=>!!(e.match(/10\.\d{4,5}\//)||e.match(/10\.\d{4,5}%2F/)||e.match(/pdf/i))))return!0;if(e.pdf_url){if(e.pdf_url.publisher&&e.pdf_url.publisher.length>0)return!0;if(e.pdf_url.preprint&&e.pdf_url.preprint.length>0)return!0}if(t){if(t.publisher&&t.publisher.length>0)return!0;if(t.preprint&&t.preprint.length>0)return!0}return!!(e.url&&Array.isArray(e.url)&&e.url.length>0)&&(0,w.isSupportedPageForPDFCrawling)({url:e.url})};t.pubEligibleForPdfCrawl=F;const j=async()=>await new Promise(e=>{chrome.permissions.contains({origins:["http://*/","https://*/"]},async t=>{e(!!t)})});t.checkExtensionPermissions=j;t.checkExtensionPermissionsAndNotify=async()=>{await j()||(U({type:"permissions"}),chrome.tabs.query({},async e=>{for(const t of e)t&&t.id&&await C.default.cs.execute("render.renderAccessRestricted",t.id,{})}))};t.attachPPFormattingDependenciesToWindow=()=>{{const e=r(748);self.$=e.default,self.$.prototype.filterNode=function(e){const t=e.toLowerCase();return this.find("*").filter((function(){return(this.name&&this.name.toLowerCase())===t}))},self.$xmlNodeJs=self.$.load("XMLSTRING",{xmlMode:!0})}};t.getAppsScriptUrl=()=>"https://script.google.com/macros/s/AKfycbxxxYD7eluuO5uEUURCM6gq5n_kFxbzsrukTdahyctkXpE-dtA/exec";t.getDefaultPubs=()=>[{_id:"A",pubtype:"PP_ARTICLE",kind:"Review",issue:"5",url:["http://linkinghub.elsevier.com/retrieve/pii/S0958-1669(06)00119-4"],doi:"10.1016/j.copbio.2006.08.003",published:{month:"10",year:"2006"},affiliation:"National Center for Biotechnology Information, National Library of Medicine, National Institutes of Health, Bethesda, MD 20894, USA. koonin@ncbi.nlm.nih.gov",title:"Evolutionary systems biology: links between gene evolution and function",pages:"481-487",journalfull:"Current opinion in biotechnology",issn:"0958-1669",author:[{initials:"EV",first:"Eugene V",formatted:"Koonin EV",last:"Koonin"},{initials:"YI",first:"Yuri I",formatted:"Wolf YI",last:"Wolf"}],journal:"Curr Opin Biotechnol",volume:"17",pmid:"16962765"},{_id:"B",pubtype:"PP_CONFERENCE_PAPER",url:["http://dx.doi.org/10.1109/NEBC.2009.4967708"],isbn:"9781424443628",address:"Boston, MA",publisher:"IEEE",doi:"10.1109/NEBC.2009.4967708",conference_date:{year:"2009"},published:{month:"4",year:"2009"},booktitle:"Bioengineering Conference, 2009 IEEE 35th Annual Northeast",title:"Layer by layer 3D tissue epitaxy by cell laden hydrogel droplets",pages:"1-2",author:[{initials:"SK",first:"S K",formatted:"Hasan SK",last:"Hasan"},{initials:"S",first:"Sangjun",formatted:"Moon S",last:"Moon"},{initials:"YS",first:"Y S",formatted:"Song YS",last:"Song"},{initials:"HO",first:"H O",formatted:"Keles HO",last:"Keles"},{initials:"F",first:"F",formatted:"Manzur F",last:"Manzur"},{initials:"S",first:"S",formatted:"Mikkilineni S",last:"Mikkilineni"},{initials:"JW",first:"Jong Wook",formatted:"Hong JW",last:"Hong"},{initials:"J",first:"Jiro",formatted:"Nagatomi J",last:"Nagatomi"},{initials:"E",first:"E",formatted:"Haeggstrom E",last:"Haeggstrom"},{initials:"A",first:"A",formatted:"Khademhosseini A",last:"Khademhosseini"},{initials:"U",first:"U",formatted:"Demirci U",last:"Demirci"}],conference:"2009 IEEE 35th Annual Northeast Bioengineering Conference",conference_location:"Boston, MA"},{_id:"C",pubtype:"PP_BOOK_CHAPTER",isbn:"9783540751564",publisher:"Springer Berlin Heidelberg",doi:"10.1007/978-3-540-75157-1_10",published:{year:"2008"},isbn_alt:"9783540751571",booktitle:"RNA Interference",title:"RNA-Mediated Transcriptional Gene Silencing in Human Cells",pages:"211-224",author:[{initials:"KV",first:"Kevin V",formatted:"Morris KV",last:"Morris"}],editor:[{initials:"PJ",first:"Patrick J",formatted:"Paddison PJ",last:"Paddison"},{initials:"PK",first:"Peter K",formatted:"Vogt PK",last:"Vogt"}]}]},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(92)),n=a(r(29)),o=r(20);const s=new i.default({origin:"bg",actions:{},logger:n.default,setupCompleted:!1});"development"===o.PP_ENV&&(self.onlyForTesting||(self.onlyForTesting={}),self.onlyForTesting.Remote=s),s.addListener();var l=s;t.default=l},,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSQLiteFTS5ResultsHighlightRegex=t.snippetHighlightStateMachine=t.snippetHighlightRegex=t.matchHighlight=t.generateJournalIndex=t.generateAuthorIndex=t.formatLookupId=t.normalizeSearchableFields=void 0;var a=r(18),i=r(35);const n=(e,t)=>{let r=e;const n=void 0===(null==t?void 0:t.stripOfNonLetterAndNumericCharacters)||t.stripOfNonLetterAndNumericCharacters;return r&&"string"==typeof r?(r=r.replace(/<img\b[^>]*>/gi,""),r=(0,a.interconvertString)(r,{format:"html"}),r=r.replace(/<\/?\s*(i|b|sub|sup)\s*>/g,""),r=r.replace(/\\(textit|textbf|emph)/g,""),r=(0,i.normalizeAndStripOfNonAlphaNumericCharacters)(r,{removeNonAlphaNumericCharacters:n})):r="",r.trim()};t.normalizeSearchableFields=n;const o=e=>""===e.trim()?"":`~${e.trim().replace(/[ .-]/g,"~").toUpperCase()}~`;t.formatLookupId=o;t.generateAuthorIndex=e=>{var t;if("collective"in e){const t=n(e.collective);return{id:o(t),indexLibrary:`${o(t)} ${t}`,indexLookup:t}}const r=[],a={initials:n(e.initials),first:n(e.first),last:n(e.last)},i=a.initials?Array.from(a.initials):null,s=a.last,l=null==i?void 0:i[0],c=null==i?void 0:i[1],u=a.first,d=u.split(" ")[0];l&&(r.push(`${l} ${s} ${l}`),c&&(r.push(`${c} ${s} ${l} ${c}`),r.push(`${l}${c} ${s} ${l}${c}`))),r.push(`${u||""} ${s} ${u||""}`.trim()),d!==u&&r.push(`${d||""} ${s} ${d||""}`.trim()),c&&r.push(`${c} ${s}`),(l||c)&&r.push(o(`${s} ${l||""}${c||""}`));const p=o(`${a.first||""} ${a.last}`);r.push(p);const m=(null==u?void 0:u.split(" ").join("~"))||"",h=u&&c&&u===d?"~"+c:"",g=s?"~"+s.split(" ").join("~"):"",f=(null===(t=a.initials)||void 0===t?void 0:t.split("").join("~"))||"";return{id:p.trim(),indexLibrary:r.join(" ").trim(),indexLookup:`${m}${h} ${g} ${f}`.trim()}};t.generateJournalIndex=e=>{const t={full:n(e.full),short:n(e.short)};t.full=t.full.replace(/\./g,""),t.short=t.short.replace(/\./g,"");const r=o(t.short);return{id:r.trim(),indexLibrary:`${r} ${t.short} ${t.full}`.trim(),indexLookup:`${t.short} ${t.full}`.trim()}};t.matchHighlight=(e,t)=>{const r=(0,i.normalizeAndStripOfNonAlphaNumericCharacters)(e,{removeNonAlphaNumericCharacters:!1});if(r===e||r.length!==e.length)return r.replace(t,'$2<span class="pp-grid-highlight">$4</span>');let a,n=0;const o='<span class="pp-grid-highlight">'.length+"</span>".length;let s=e;for(;a=t.exec(r);){const e=a.index+o*n,t=a.index+a[4].length+o*n;n+=1;const r=s.split(""),i=a[0].length===a[4].length?0:1;r.splice(e+i,0,'<span class="pp-grid-highlight">'),r.splice(t+i+1,0,"</span>"),s=r.join("")}return s};t.snippetHighlightRegex=e=>e.match(/(?:\S+\s+){0,8}\S*<span class="pp-grid-highlight">(.*?)<\/span>\S*(?:\s+\S+){0,8}/giu);t.snippetHighlightStateMachine=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const r=[];let a=[],i=null;if(!e.match(/<span class="pp-grid-highlight">/))return r;for(const s of e.split(/(<span class="pp-grid-highlight">(?:.*?)<\/span>[^\s]*)/giu))if(s.startsWith('<span class="pp-grid-highlight">'))a&&i&&r.push(i.join(" ")),a?(a.push(s),i=a):(i||(i=[]),i.push(s)),a=[];else{const e=s.trim().split(/\s/g).filter(e=>e.length<100);var n,o;if(e.length>(i?2*t:t))null===(n=i)||void 0===n||n.push(...e.slice(0,t)),null===(o=a)||void 0===o||o.push(...e.slice(-1*t));else i||(i=[]),i.push(s),a=null}return i&&r.push(i.join(" ")),r.map(e=>e.replace(/\s+/g," ").trim())};t.generateSQLiteFTS5ResultsHighlightRegex=e=>{const t=[],r=[];for(const a of e){const e=a.isPhrase?n(a.text,{stripOfNonLetterAndNumericCharacters:!1}).trim().split(/[^\p{L}\p{N}\p{Co}]+/giu).join("[^\\p{L}\\p{N}\\p{Co}]+"):n(a.text,{stripOfNonLetterAndNumericCharacters:!1}).trim().split(/\s+/g).map(e=>e.split(/[^\p{L}\p{N}\p{Co}]+/giu).join("[^\\p{L}\\p{N}\\p{Co}]+")).sort((e,t)=>t.length-e.length).join("|");a.isFullMatch?r.push(e):t.push(e)}const a=r.length>0&&t.length>0?"|(":"",i=r.length>0&&t.length>0?"(":"",o=r.length>0&&t.length>0?")":"",s=r.length>0?"((?=[^\\p{L}\\p{N}\\p{Co}]{1})|$)":"",l=r.length>0&&t.length>0?")":"";return new RegExp(`((([^\\p{L}\\p{N}\\p{Co}]{1})|^)(${t.sort((e,t)=>t.length-e.length).join("|")}${a}${i}${r.join("|")}${o})${s}${l})`,"giu")}},,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.isOfflineError=t.default=void 0;var i=a(r(33));class n extends i.default{constructor(e,t){super("OfflineError",`${e.method} ${e.url}`,e,t)}}t.default=n;t.isOfflineError=e=>e instanceof Error&&("Failed to fetch"===e.message||"NetworkError when attempting to fetch resource."===e.message)},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.jobCallbackMiddleware=t.multiply=t.sleep=void 0;var i=a(r(47)),n=r(100);const o=e=>new Promise(t=>setTimeout(t,e));t.sleep=o;t.multiply=async e=>{const{i:t}=e.data,r=t*t;return await o(1e4),{res:r,jobId:e.id}};t.jobCallbackMiddleware=async(e,t)=>{const r={cs:[],bg:[],webapp:[],sw:[],popup:[],offscreen:[]};for(const t of e)r[t.remoteTarget].push(t.remoteAction);for(const e of r.bg)await i.default.bg.execute(e,null,t);const a=(await(0,n.getWebappTabs)()).map(e=>e.id);for(const e of a)for(const a of r.webapp)await i.default.webapp.execute(a,e,t,1e3);if("tab"===t.job.broadcastType&&t.job.tabId){if(a.includes(t.job.tabId))return;for(const e of["cs","popup"])for(const a of r[e])await i.default[e].execute(a,t.job.tabId,t,1e3)}else if("all"===t.job.broadcastType){const e=await(0,n.getAllTabIds)();for(const n of e)if(!a.includes(n))for(const e of["cs","popup"])for(const a of r[e])await i.default[e].execute(a,n,t,1e3)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStringOrUndefined=t.isNumber=t.isString=t.isObject=t.isUndefined=void 0;const a=e=>void 0===e;t.isUndefined=a;t.isObject=e=>"object"==typeof e&&null!==e&&!Array.isArray(e);const i=e=>"string"==typeof e;t.isString=i;t.isNumber=e=>"number"==typeof e;t.isStringOrUndefined=e=>i(e)||a(e)},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(68));class n extends Error{constructor(e,t,r){super(t),this.name=e,this.cause=null==r?void 0:r.cause}toJSON(){const e={name:this.name,message:this.message,stack:this.stack};return this.cause&&(e.cause=(0,i.default)(this.cause)),e}getAllErrors(){return this.cause instanceof n?[this,...this.cause.getAllErrors()]:this.cause?[this,this.cause]:[this]}}t.default=n},,,,function(e,t,r){"use strict";var a=r(2),i=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PorpoverDialogContent=t.TooltipWrapper=void 0;var n=i(r(27)),o=a(r(0)),s=a(r(6)),l=r(102),c=i(r(196)),u=i(r(14)),d=r(10),p=i(r(197)),m=i(r(99));const h=s.default.div`
  ${e=>{let{hasText:t,open:r,type:a}=e;return s.css`
    border-radius: 4px;
    color: ${c.default.color};
    padding: 6px 12px;
    background-color: ${c.default.backgroundColor};
    ${u.default.medium.small}

    ${"normal"===a&&s.css`
      max-width: 250px;
    `}

      ${"popover"===a&&s.css`
      max-width: 350px;
    `}

      ${"fixed"===a&&s.css`
      width: 350px;
    `}


    visibility: ${r?"visible":"hidden"};
    z-index: 100;

    ${t&&s.css`
      display: flex;
      align-items: center;
      gap: 8px;
    `}
  `}}
`;t.TooltipWrapper=h;const g=s.default.div`
  width: 350px;
  display: grid;
  grid-template-rows: max-content max-content;
  row-gap: 16px;
  padding: 4px;
  user-select: none;
  ${u.default.medium.medium}
`;t.PorpoverDialogContent=g;const f=(0,s.default)(p.default)`
  height: 16px;
`,b=(0,s.default)(m.default)`
  padding: 0;
`,y=s.default.div`
  background-color: inherit;
  position: absolute;
  width: 10px;
  height: 10px;
  transform: rotate(45deg);
  ${e=>{let{open:t}=e;return t&&"visibility: visible;"}}
`,v=e=>{let{children:t,className:r,disabled:a,forwardedRef:i,open:c,placement:u="bottom",setOpen:p,useSameThemeAsParent:g,useTriggerWrapper:v,disablePortal:_,hideArrow:w,...P}=e;const[S,C]=(0,o.useState)(!1),A=null!=c?c:S,E=null!=p?p:C,T=(0,o.useRef)(null),{context:k,floating:x,reference:R,strategy:I,x:L,y:D,middlewareData:N,placement:O}=(0,l.useFloating)({placement:u,open:A,onOpenChange:E,middleware:[(0,l.offset)(11),(0,l.flip)({padding:10}),(0,l.shift)({padding:10}),(0,l.arrow)({element:T})],whileElementsMounted:l.autoUpdate});let U;"type"in P&&(U="normal"===P.type?{open:500,close:0}:{open:P.delayValue||50,close:0});const{getReferenceProps:M,getFloatingProps:F}=(0,l.useInteractions)([(0,l.useHover)(k,{move:!1,delay:U,enabled:!a&&(void 0===c||void 0!==P.allowHover&&P.allowHover),handleClose:(0,l.safePolygon)({restMs:50})}),(0,l.useDismiss)(k,{enabled:!!P.useDismissProps,...P.useDismissProps})]);let j;(0,o.useEffect)(()=>{a&&E(!1)},[a]),j="text"in P&&"subheading"in P?o.default.createElement(o.default.Fragment,null,o.default.createElement(b,{textLabelStyle:"neutral-3",text:P.text,size:!("type"in P)||"defaultSize"in P||"normal"!==P.type&&"popover"!==P.type?void 0:"small"}),P.subheading&&o.default.createElement(m.default,{textLabelStyle:"neutral-2",text:P.subheading,size:!("type"in P)||"defaultSize"in P||"normal"!==P.type&&"popover"!==P.type?void 0:"small"})):"text"in P?o.default.createElement(o.default.Fragment,null,P.isHtml?o.default.createElement("span",{dangerouslySetInnerHTML:{__html:P.text}}):P.text,P.hint&&o.default.createElement(f,{styleName:"box"},P.hint)):P.component;const B=M({ref:(0,l.useMergeRefs)([R,i])}),$=v||"string"==typeof t||"number"==typeof t?o.default.createElement("div",B,t):o.default.cloneElement(t,B),z={top:"bottom",right:"left",bottom:"top",left:"right"}[O.split("-")[0]],H=(0,o.useMemo)(()=>{var e,t,r,a,i;return o.default.createElement(y,{ref:T,open:A,style:{top:void 0===(null===(e=N.arrow)||void 0===e?void 0:e.y)?void 0:(null===(t=N.arrow)||void 0===t?void 0:t.y)+"px",left:void 0===(null===(r=N.arrow)||void 0===r?void 0:r.x)?void 0:(null===(a=N.arrow)||void 0===a?void 0:a.x)+"px",[z]:T.current?-(null===(i=T.current)||void 0===i?void 0:i.offsetWidth)/2+"px":0}})},[N.arrow,z]),W=_?o.default.Fragment:l.FloatingPortal;return o.default.createElement(o.default.Fragment,null,$,o.default.createElement(s.ThemeProvider,{theme:{themeName:g?(0,s.useTheme)().themeName:(0,d.getOppositeThemeName)((0,s.useTheme)().themeName)}},!a&&A&&o.default.createElement(W,!_&&{id:"pp-ui-portal-tooltip"},o.default.createElement(h,(0,n.default)({"data-testid":"tooltip",className:r,hasText:"text"in P&&!("subheading"in P),open:A,role:"tooltip",type:"type"in P?P.type:void 0,ref:x,style:{position:I,top:null!=D?D:0,left:null!=L?L:0}},F()),!w&&H,j))))};var _=o.default.forwardRef((e,t)=>o.default.createElement(v,(0,n.default)({},e,{forwardedRef:t})));t.default=_},,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvVarWebpack=t.getKeys=void 0;const a=Object.keys;t.getKeys=a;t.getEnvVarWebpack=(e,t,r)=>{if(void 0!==t)return t;if(void 0!==r)return r;throw new Error(`getEnvVar error: ${e} not defined. Did you forget to set it in .env?`)}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Wrapper=t.PADDING=void 0;var i=a(r(0)),n=a(r(6)),o=a(r(172)),s=a(r(173));t.PADDING=2;const l=n.default.span`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: ${2}px;
`;t.Wrapper=l;var c=e=>{let{className:t,percentDone:r,percentNotDone:a,size:n=16,styleName:c="primary"}=e;const u=n-4;return i.default.createElement(l,{className:t},void 0===r?i.default.createElement(o.default,{size:u,styleName:c}):i.default.createElement(s.default,{percentDone:r,percentNotDone:a,size:u,styleName:c}))};t.default=c},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.serializeErrorMessage=void 0;var i=a(r(57));t.serializeErrorMessage=e=>{if(e instanceof Error||e instanceof i.default)return e.message;if("string"==typeof e)return e;try{return JSON.stringify(e)}catch{return String(e)}};var n=e=>{if(e instanceof i.default)return e.toJSON();if(e instanceof Error)return{name:e.name,message:e.message,stack:e.stack};if("string"==typeof e)return e;try{return JSON.stringify(e)}catch{return String(e)}};t.default=n},,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunkArray=void 0;t.chunkArray=(e,t)=>{const r=[];for(let a=0;a<e.length;a+=t){const i=e.slice(a,a+t);r.push(i)}return r}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const a=["insertFile","insertFileChunk","insertStyle","updateFile","updateFileChunk"];var i=e=>{var t,r;return!!a.includes(null===(t=e.data)||void 0===t?void 0:t.fn)||[e,null==e?void 0:e.result,null==e||null===(r=e.result)||void 0===r?void 0:r.file].some(e=>e&&Object.values(e).some(e=>e instanceof File||e instanceof Blob||e instanceof ArrayBuffer))};t.default=i},,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(10);const{light:i,dark:n,white:o,black:s}=a.uiConstants.colors,l={backColor:(0,a.themeMapper)({"webapp-light":i.blue[200],"webapp-dark":n.gray[400]}),foreColor:(0,a.themeMapper)({"webapp-light":i.blue[500],"webapp-dark":n.blue[300]})};var c={primary:l,"neutral-1":{backColor:(0,a.themeMapper)({"webapp-light":(0,a.hexToRgba)(o,.3),"webapp-dark":(0,a.hexToRgba)(o,.3)}),foreColor:(0,a.themeMapper)({"webapp-light":(0,a.hexToRgba)(o,.6),"webapp-dark":(0,a.hexToRgba)(o,.6)})},"neutral-2":{backColor:(0,a.themeMapper)({"webapp-light":(0,a.hexToRgba)(s,.3),"webapp-dark":(0,a.hexToRgba)(s,.3)}),foreColor:(0,a.themeMapper)({"webapp-light":(0,a.hexToRgba)(s,.6),"webapp-dark":(0,a.hexToRgba)(s,.6)})},"task-window":{...l,backColor:(0,a.themeMapper)({"webapp-light":i.gray[300],"webapp-dark":n.gray[400]})}};t.default=c},,,,,,,,,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(48),o=a(r(148)),s=a(r(149)),l=a(r(150)),c=a(r(151)),u=a(r(68)),d=a(r(97)),p=r(153);const m="A listener indicated an asynchronous response by returning true, but the message channel closed before a response was received",h="Could not establish connection. Receiving end does not exist.",g=()=>"app.paperpile.com"===self.location.host,f=e=>new Promise((t,r)=>{try{chrome.runtime.sendMessage(e,e=>{chrome.runtime.lastError?r(chrome.runtime.lastError):t(e)})}catch(e){r(e)}}),b=e=>null!=e&&e.error?{result:null,error:(0,d.default)(e.error)}:e;class y{constructor(e){var t=this;(0,i.default)(this,"loggerLabel","remote"),(0,i.default)(this,"listenerAttached",!1),(0,i.default)(this,"messageCache",{}),(0,i.default)(this,"backLog",[]),(0,i.default)(this,"onMessageCallback",this.onMessage.bind(this)),(0,i.default)(this,"onEventListenerMessageCallback",this.onEventListenerMessage.bind(this)),(0,i.default)(this,"bg",{execute:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;const n=await t.sendMessage("bg",r,e,a,i);return b(n)}}),(0,i.default)(this,"offscreen",{execute:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;const n=await t.sendMessage("offscreen",r,e,a,i);return b(n)}}),(0,i.default)(this,"cs",{execute:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;const n=await t.sendMessage("cs",r,e,a,i);return b(n)}}),(0,i.default)(this,"popup",{execute:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;const n=await t.sendMessage("popup",r,e,a,i);return b(n)}}),(0,i.default)(this,"webapp",{execute:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;const n=await t.sendMessage("webapp",r,e,a,i);return b(n)}}),(0,i.default)(this,"sw",{execute:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;"webapp"===t.origin&&await navigator.serviceWorker.ready;const n=await t.sendMessage("sw",r,e,a,i);return b(n)}}),this.origin=e.origin,this.actions=e.actions||{},this.logger=e.logger,this.webappUrl=e.webappUrl||null,this.setupCompleted=void 0===e.setupCompleted||e.setupCompleted,this.actions["remote.send-broadcast"]=this.sendBroadcast.bind(this),this.actions["remote.send-broadcast-to"]=this.sendBroadcastTo.bind(this),this.actions["remote.test-connection"]=()=>this.origin+" connection alive",this.actions["remote.test-echo"]=e=>(this.logger.debug(this.loggerLabel,"ECHO: "+JSON.stringify(e)),e),this.actions["remote.test-delay"]=async e=>{const t=(null==e?void 0:e.delay)||1e4;return await new Promise(e=>setTimeout(e,t)),{delay:t}}}addListener(){if(this.logger.debug(this.loggerLabel,"addListener called"),"sw"===this.origin)throw new Error("Use serviceWorker specific class ServiceWorkerRemote.ts");self.executionContext&&self.executionContext!==this.origin||this.listenerAttached?this.logger.errorNoNotify(this.loggerLabel,`Error adding message listener to ${this.origin} context - possible duplicate`,{executionContext:self.executionContext,listenerAttached:this.listenerAttached}):(("webapp"===this.origin||"cs"===this.origin&&g())&&self.addEventListener("message",this.onEventListenerMessageCallback,!1),"webapp"===this.origin&&navigator.serviceWorker.addEventListener("message",this.onEventListenerMessageCallback),"webapp"!==this.origin&&chrome.runtime.onMessage.addListener(this.onMessageCallback),this.listenerAttached=!0)}removeListener(){this.logger.debug(this.loggerLabel,"removeListener called"),("webapp"===this.origin||"cs"===this.origin&&g())&&self.removeEventListener("message",this.onEventListenerMessageCallback,!1),"webapp"===this.origin&&navigator.serviceWorker.removeEventListener("message",this.onEventListenerMessageCallback),"webapp"!==this.origin&&chrome.runtime.onMessage.removeListener(this.onMessageCallback),this.listenerAttached=!1}addActions(e){Object.assign(this.actions,e)}getListenerAttached(){return this.listenerAttached}resolveBacklog(){for(this.setupCompleted=!0;this.backLog.length;){const e=this.backLog.shift();e&&this.processMessage(e[0],e[1],e[2])}}onMessage(e,t,r){var a,i,n,o;if(this.logger.debug(this.loggerLabel,"onMessage: ",e),"object"!=typeof e||"string"!=typeof e.origin||"string"!=typeof e.target)return!1;const l="bg"===this.origin&&"bg"!==e.origin||"cs"===this.origin&&["webapp","sw"].includes(e.target),c=(null===(a=t.origin)||void 0===a?void 0:a.match(/chrome-extension:\/\//))&&(null===(i=t.url)||void 0===i?void 0:i.match(/background.html/))||(null===(n=t.url)||void 0===n?void 0:n.match(/chrome-extension:\/\/.*bg-wrapper.js/))||(null===(o=t.url)||void 0===o?void 0:o.match(/moz-extension:\/\/.*background.html/)),u="null"===t.origin||c||"popup"!==this.origin,d=e.target===this.origin&&u,p=l||d;if(p){const a=async e=>r(await(0,s.default)(e));this.setupCompleted?this.processMessage(e,t,a):this.backLog.push([e,t,a])}return!!p}async relayMessage(e){const t=await this[e.target].execute(e.action,e.tabId,await(0,l.default)(e));return null!=(r=t)&&r.error?{result:null,error:(0,u.default)(r.error)}:r;var r}async onEventListenerMessage(e){if("webapp"!==this.origin&&"cs"!==this.origin&&"popup"!==this.origin)throw new Error("Unexpected origin");if(!e||!e.data||"object"!=typeof e.data||"string"!=typeof e.data.origin||"string"!=typeof e.data.target)return;this.logger.debug(this.loggerLabel,"onEventListenerMessage: ",e.data);const t=e.data;if(!t.origin||!t.target)return;if("webapp"===this.origin&&"popup"===t.origin)return;if(t.origin===this.origin)return;if(t.target===this.origin){var r;const a=await(0,l.default)(t);if(t.id){if(this.messageCache[t.id])return this.messageCache[t.id](a),void delete this.messageCache[t.id];if("response"===t.idType)return}const i=null===(r=t.action)||void 0===r?void 0:r.replace(new RegExp(`^${y.ACTION_PREFIX}-`,""),"");if(i&&i in this.actions){const r=await this.actions[i](a),n=await(0,o.default)({error:null,result:r},""),s={type:"remote-message",origin:this.origin,target:t.origin,action:t.action,id:t.id,idType:"response",tabId:t.tabId,...n},l=e.source;if(!l)return;if("scriptURL"in l)l.postMessage(s,(0,c.default)(n));else if(["safari","chrome"].includes((0,p.detectBrowser)()))l.postMessage(s,(0,c.default)(n));else{if(!(l instanceof Window))throw new Error("Unexpected client type (MessagePort or other) in successResponse");l.postMessage(s,"*",(0,c.default)(n))}return}const n={type:"remote-message",origin:this.origin,target:t.origin,action:t.action,id:t.id,idType:"response",tabId:t.tabId,data:{error:"action not recognized",result:null}},s=e.source;if(!s)return;if("scriptURL"in s)s.postMessage(n,[]);else if(["safari","chrome"].includes((0,p.detectBrowser)()))s.postMessage(n,[]);else{if(!(s instanceof Window))throw new Error("Unexpected client type (MessagePort or other) in actionNotRecognizedResponse");s.postMessage(n,"*")}return}if("popup"===this.origin)return;const a=await this.relayMessage(t),i=await(0,o.default)(a,""),n={type:"remote-message",origin:this.origin,target:t.origin,action:t.action,id:t.id,idType:t.idType,tabId:t.tabId,...i},s=e.source;if(s)if("scriptURL"in s)s.postMessage(n,(0,c.default)(i));else if(["safari","chrome"].includes((0,p.detectBrowser)()))s.postMessage(n,(0,c.default)(i));else{if(!(s instanceof Window))throw new Error("Unexpected client type (MessagePort or other) in relayMessage");s.postMessage(n,"*",(0,c.default)(i))}}async processMessage(e,t,r){var a;if(e.target!==this.origin){return r(await this.relayMessage(e))}if(!e.action)return r({result:null,error:"no action"});const i=null!=t&&null!==(a=t.tab)&&void 0!==a&&a.id?t.tab.id:e.tabId;if(!i)if("bg"===e.origin&&"offscreen"===e.target);else if("popup"!==e.origin||"bg"!==e.target)return r({result:null,error:"no tab id defined"});const n=e.action.replace(new RegExp(`^${y.ACTION_PREFIX}-`,""),"");if(!this.actions[n])return r({result:null,error:"action not recognized"});try{const t=await(0,l.default)(e);return r({result:await this.actions[n]({...t,tabId:i}),error:null})}catch(e){return r({result:null,error:(0,u.default)(e)})}}async sendMessage(e,t,r,a,i){if(this.logger.debug(this.loggerLabel,"sendMessage",{target:e,tabId:t,action:r,dataToSend:a}),"sw"===this.origin)throw new Error("Unexpected origin");if("offscreen"===e&&"bg"!==this.origin)throw new Error("offscreen can only be used from bg");if(this.origin===e){const e=r.replace(new RegExp(`^${y.ACTION_PREFIX}-`,""),"");if(e&&e in this.actions)try{return{result:await this.actions[e](a),error:null}}catch(e){return{result:null,error:(0,u.default)(e)}}return{result:null,error:"action not recognized"}}const d={type:"remote-message",origin:this.origin,target:e,action:r.startsWith(y.ACTION_PREFIX)?r:`${y.ACTION_PREFIX}-${r}`,tabId:t,data:a};if("webapp"===this.origin){const t=await(0,o.default)(a,"");return new Promise(r=>{d.id=(0,n.v4)(),d.idType="request";const a=Number.isInteger(i)?setTimeout(()=>r(void 0),i):null;var o;(this.messageCache[d.id]=e=>{a&&clearTimeout(a),r(e)},"sw"===e)?null===(o=navigator.serviceWorker.controller)||void 0===o||o.postMessage({...d,...t},(0,c.default)(t)):["safari"].includes((0,p.detectBrowser)())?self.postMessage({...d,...t},(0,c.default)(t)):self.postMessage({...d,...t},"*",(0,c.default)(t))})}if("cs"===this.origin){if("webapp"===e||"sw"===e){const e=await(0,o.default)(a,"");return new Promise(t=>{d.id=(0,n.v4)(),d.idType="request";const r=Number.isInteger(i)?setTimeout(()=>t(void 0),i):null;this.messageCache[d.id]=e=>{r&&clearTimeout(r),t(e)},self.postMessage({...d,...e},"*",(0,c.default)(e))})}if("popup"===e){return new Promise(async e=>{d.id=(0,n.v4)(),d.idType="request";const t=Number.isInteger(i)?setTimeout(()=>e(void 0),i):null;this.messageCache[d.id]=r=>{t&&clearTimeout(t),e(r)},chrome.runtime.sendMessage({...d,...await(0,s.default)(d.data)},async t=>{chrome.runtime.lastError?e(void 0):e(await(0,l.default)(t))})})}if("bg"===e){const e={...d,...await(0,s.default)(d.data)};let t=null;try{const t=await f(e);return(0,l.default)(t)}catch(e){const a=e;if(!a||!a.message)return void this.logger.error(this.loggerLabel,a.message||"remote error was set without message",a);if("The message port closed before a response was received."===a.message||a.message===m)t=a.message,this.logger.debug(this.loggerLabel,"bg request connection was closed, resending action "+r);else if("Extension context invalidated."===a.message)t=a.message,this.logger.debug(this.loggerLabel,"bg extension context was invalidated, resending action "+r);else{if(a.message!==h)return this.logger.error(this.loggerLabel,a.message),{result:null,error:a.message};t=a.message,this.logger.debug(this.loggerLabel,"bg extension is currently not available, resending action "+r)}}try{t===h&&await new Promise(e=>setTimeout(e,2e3));const r=await f(e);return(0,l.default)(r)}catch(e){const t=e;if(!t||!t.message)return void this.logger.error(this.loggerLabel,t.message||"remote error was set without message",t);if("The message port closed before a response was received."===t.message||t.message===m)return;if("Extension context invalidated."===t.message)return;if(t.message===h)return;return this.logger.error(this.loggerLabel,t.message),{result:null,error:t.message}}}return this.logger.error(this.loggerLabel,new Error(`Error sending message, target [${e}] not recognized`)),Promise.resolve({result:null,error:"unexpected target in cs"})}return"popup"===this.origin?"bg"===e?new Promise(async e=>{chrome.runtime.sendMessage({...d,...await(0,s.default)(d.data)},async t=>{chrome.runtime.lastError?e(void 0):e(await(0,l.default)(t))})}):t?new Promise(async e=>{chrome.tabs.sendMessage(t,{...d,...await(0,s.default)(d.data)},async t=>{chrome.runtime.lastError?e(void 0):e(await(0,l.default)(t))})}):(this.logger.error(this.loggerLabel,new Error("Error sending message, target is tab but tabId was not provided")),Promise.resolve({result:null,error:"incorrect use of sendMessage"})):"offscreen"===e?new Promise(async e=>{chrome.runtime.sendMessage({...d,...await(0,s.default)(d.data)},async t=>{chrome.runtime.lastError?e(void 0):e(await(0,l.default)(t))})}):t?new Promise(async e=>{if("popup"===d.target){if(["safari"].includes((0,p.detectBrowser)())&&0===chrome.extension.getViews({type:"popup"}).length)return void e(void 0);chrome.runtime.sendMessage({...d,...await(0,s.default)(d.data)},async t=>{chrome.runtime.lastError?e(void 0):e(await(0,l.default)(t))})}else{d.id=(0,n.v4)(),d.idType="request";let r=i;["safari"].includes((0,p.detectBrowser)())&&!Number.isInteger(i)&&(r=1e3,d.action&&d.action.endsWith("checkPopupConnection")&&(r=50));const a=Number.isInteger(r)?setTimeout(()=>e(void 0),r):null;this.messageCache[d.id]=t=>{a&&clearTimeout(a),e(t)},chrome.tabs.sendMessage(t,{...d,...await(0,s.default)(d.data)},async t=>{chrome.runtime.lastError?e(void 0):e(await(0,l.default)(t))})}}):(this.logger.error(this.loggerLabel,new Error("Error sending message, target is tab but tabId was not provided")),Promise.resolve({result:null,error:"incorrect use of sendMessage"}))}async sendBroadcast(e){if("sw"===this.origin)throw new Error("Use serviceWorker specific class ServiceWorkerRemote.ts");const t={...e,source:this.origin};if(this[this.origin].execute(e.functionName,e.tabId,e.data),"sw"!==e.source)switch(this.origin){case"bg":chrome.tabs.query({},async r=>{for(const a of r)a.id&&e.tabId!==a.id&&a.url&&this.cs.execute("remote.send-broadcast",a.id,t)});break;case"cs":"webapp"!==e.source&&this.webapp.execute("remote.send-broadcast",e.tabId,t),"bg"!==e.source&&this.bg.execute("remote.send-broadcast",e.tabId,t);break;case"popup":"bg"!==e.source&&this.bg.execute("remote.send-broadcast",e.tabId,t);break;case"webapp":"cs"!==e.source&&this.cs.execute("remote.send-broadcast",e.tabId,t)}else"webapp"===this.origin&&this.cs.execute(t.functionName,null,t.data)}broadcastAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.sendBroadcast({source:this.origin,tabId:null,functionName:e,data:t})}sendBroadcastTo(e){return"webapp"===this.origin&&e.targetUrl===this.webappUrl?this.sw.execute("remote.send-broadcast",null,e):"bg"!==this.origin?this.bg.execute("remote.send-broadcast-to",null,e):(chrome.tabs.query({},t=>{for(const r of t)r.url&&r.url.startsWith(e.targetUrl)&&this.cs.execute("remote.send-broadcast",r.id,{...e,source:this.origin})}),null)}broadcastTo(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.sendBroadcastTo({targetUrl:e,functionName:t,data:r})}}t.default=y,(0,i.default)(y,"ACTION_PREFIX","new")},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(33));class n extends i.default{constructor(e,t){super("BackendError",JSON.stringify(e),e,t)}}t.default=n},function(e,t,r){"use strict";var a=r(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DataClient",{enumerable:!0,get:function(){return l.DataClient}}),Object.defineProperty(t,"DB",{enumerable:!0,get:function(){return l.DB}}),Object.defineProperty(t,"FM",{enumerable:!0,get:function(){return l.FM}}),Object.defineProperty(t,"FMA",{enumerable:!0,get:function(){return l.FMA}}),Object.defineProperty(t,"Sync",{enumerable:!0,get:function(){return l.Sync}}),Object.defineProperty(t,"Model",{enumerable:!0,get:function(){return l.Model}}),Object.defineProperty(t,"apiSyncVerifyHashCollections",{enumerable:!0,get:function(){return g.apiSyncVerifyHashCollections}}),Object.defineProperty(t,"types",{enumerable:!0,get:function(){return f.types}}),Object.defineProperty(t,"ppDOMPurify",{enumerable:!0,get:function(){return b.ppDOMPurify}}),Object.defineProperty(t,"ppString",{enumerable:!0,get:function(){return b.ppString}}),Object.defineProperty(t,"ppUtils",{enumerable:!0,get:function(){return b.ppUtils}}),Object.defineProperty(t,"parseCollectionSharingSettings",{enumerable:!0,get:function(){return y.parseCollectionSharingSettings}}),Object.defineProperty(t,"chunkArray",{enumerable:!0,get:function(){return v.chunkArray}}),t.syncUtils=t.Permissions=t.typesUtils=t.oplog=t.ReferenceDL=t.UserStyles=t.CitationStyles=t.CitationLocales=t.CSL=t.backendApiClient=void 0;var i=a(r(140));t.backendApiClient=i;var n=a(r(141));t.CSL=n;var o=a(r(123));t.CitationLocales=o;var s=a(r(124));t.CitationStyles=s;var l=r(126),c=a(r(125));t.UserStyles=c;var u=a(r(43));t.ReferenceDL=u;var d=a(r(131));t.oplog=d;var p=a(r(129));t.typesUtils=p;var m=a(r(181));t.Permissions=m;var h=a(r(372));t.syncUtils=h;var g=r(374),f=r(117),b=r(142),y=r(105),v=r(74)},function(e,t,r){"use strict";var a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getGoogleScholarAPACitation=t.crawlMetaUrlForTesting=t.getLinksForPDFCrawler=t.getLinksForMetaCrawler=t.isSupportedPageForPDFCrawling=t.isSupportedPage=t.skipCrawler=void 0;var n=i(r(175)),o=a(r(735)),s=a(r(29)),l=r(417);const c=n.getDriversByMode("META"),u=n.getDriversByMode("PDF");t.skipCrawler=e=>{let t=!0;return e.url&&"string"!=typeof e.url&&e.url.forEach(e=>{const r=n.info(e,c);(r.targets.length>1||-1===r.targets.indexOf("Default")||r.requests)&&(t=!1)}),t};t.isSupportedPage=e=>{if(!e.url)return null;const t=(0,o.default)(e.url,c);return s.default.debug("utils","Is supported page (CRAWLER): ",e.url,t),t};t.isSupportedPageForPDFCrawling=e=>{if(!e.url)return null;let t=!1;for(const r of e.url){if((0,o.default)(r,u).supported){t=!0;break}}return t};t.getLinksForMetaCrawler=e=>{const t=[[],[],[],[],[]],r=[/ncbi\.nlm\.nih\.gov/i,/europepmc\.org/i];return e&&e.url&&"string"!=typeof e.url&&e.url.forEach(e=>{if(e.match(/^https?:\/\//)){let a=(0,o.default)(e,c).supported,i=!1;r.forEach(t=>{e.match(t)&&(i=!0,a=!1)});const n=e.match(/doi\.org\/(10\.\d+\/.+)/);n&&n[1]?t[1].push("https://doi.org/"+n[1]):i?t[0].push(e):a?t[2].push(e):t[3].push(e)}}),t[1].length>0&&(t[4]=t[2].concat([]),t[2]=[]),Array.from(new Set(t.flat()))};t.getLinksForPDFCrawler=(e,t,r,a,i)=>{const n=[[],[],[],[],[],[],[],[]],s=[/ncbi\.nlm\.nih\.gov\/pmc\/articles\/PMC\d+/i,/europepmc\.org\/article\//i],d=[/ncbi\.nlm\.nih\.gov\/pubmed\/\d+/i,/pubmed\.ncbi\.nlm\.nih\.gov\/\d+/i,/eutils\.ncbi\.nlm\.nih\.gov/i,/market\.android\.com/i,/books\.google\./i,/play\.google\./i,/www\.amazon\./i,/wikipedia\.org/i,/www\.youtube\.com/i,/worldcat\.org/i];for(const t of e)t&&t.url&&"string"!=typeof t.url&&t.url.forEach(e=>{let t=!1;if(d.forEach(r=>{e.match(r)&&(t=!0)}),i&&i.includes(e)&&(t=!0),e.match(/^https?:\/\//)&&!t){const t=(0,o.default)(e,u);let r=t.supported,a=!1;["Filename","CORE","CiteSeerx"].includes(t.target||"")&&(r=!1),s.forEach(t=>{e.match(t)&&(a=!0,r=!1)});const i=e.match(/doi\.org\/(10\.\d+\/.+)/);i&&i[1]?n[0].push("https://doi.org/"+i[1].toLowerCase()):a?n[6].push(e):e.match(/arxiv\.org/i)?n[7].push(e):r?n[2].push(e):n[4].push(e)}});if(n[0].length>0&&(n[2]=[]),n[2].length>0){const e={};n[2].forEach(t=>{const r=t.replace(/^https?:\/\//i,"").replace(/\/.*/,"");r in e||(e[r]=[[],[],[],[],[],[]]);const a=t.match(/^https/i);t.match(/pdf/i)?e[r][a?0:3].push(t):(0,o.default)(t,c).supported?e[r][a?1:4].push(t):e[r][a?2:5].push(t)}),n[2]=[],Object.keys(e).forEach(t=>{for(let r=0;r<6;r+=1)if(e[t][r].length>0){n[2].push(e[t][r][0]);break}})}if(t)for(const e of[0,2,4])for(const r of(0,l.proxifyUrls)(n[e],t)){let t=!0;i&&i.includes(r)&&(t=!1),t&&n[e+1].push(r)}return e[0]&&"PP_PREPRINT"===e[0].pubtype&&0===n[0].length&&(n[0]=n[7].concat(n[6]),n[6]=[],n[7]=[]),r&&(n[6]=[],n[7]=[]),a&&(n[0]=[],n[1]=[],n[2]=[],n[3]=[]),Array.from(new Set(n.flat()))};t.crawlMetaUrlForTesting=(e,t)=>n.default([t],{mode:e,onMessage:()=>{}});t.getGoogleScholarAPACitation=async e=>{const t=`https://scholar.google.com/scholar?q=info:${e}:scholar.google.com/&output=cite&scirp=0&hl=en`,r=new AbortController;setTimeout(()=>r.abort(),5e3);const a=await fetch(t,{signal:r.signal}),i=await a.text();if(i){const e=i.replace(/\n/g,"").match(/APA<\/th><td><div tabindex="0" class="gs_citr">(.*)<\/div>.+class="gs_cith">Chicago/);if(e)return e[1]}return""}},,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isDeserializableError=void 0;var i=r(56),n=a(r(152)),o=a(r(93)),s=a(r(54)),l=a(r(139));const c=e=>"deserializeError failed to deserialize: "+JSON.stringify(e),u=e=>"string"==typeof e||(0,i.isObject)(e)&&"name"in e&&(0,i.isString)(e.name)&&"message"in e&&(0,i.isStringOrUndefined)(e.message)&&(!("stack"in e)||(0,i.isStringOrUndefined)(e.stack));t.isDeserializableError=u;const d=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}if(!u(e))throw new Error(c(e));const t=(e=>{const t=e.cause?{cause:d(e.cause)}:void 0;switch(e.name){case"AnyExtraError":if(!(0,i.isObject)(e.extra))throw new Error(c(e));return new n.default(e.message,e.extra,t);case"BackendError":if(!(0,i.isObject)(e.extra)||!(0,i.isString)(e.extra.msg)||!(0,i.isNumber)(e.extra.status)||!(0,i.isUndefined)(e.extra.details)&&!(0,i.isObject)(e.extra.details))throw new Error(c(e));return new o.default({msg:e.extra.msg,status:e.extra.status,details:e.extra.details},t);case"OfflineError":if(!(0,i.isObject)(e.extra)||!(0,i.isString)(e.extra.method)||!(0,i.isString)(e.extra.url))throw new Error(c(e));return new s.default({method:e.extra.method,url:e.extra.url},t);case"PaperpileError":if(!(0,i.isObject)(e.extra)||!(0,i.isString)(e.extra.key))throw new Error(c(e));return new l.default(e.extra,t);case"ErrorWithCause":throw new Error("deserializeError failed to deserialize, ErrorWithCause should not be used directly: "+JSON.stringify(e));default:{const t=new Error(e.message);return t.name=e.name,t}}})(e);return t.stack=e.stack,t};var p=d;t.default=p},function(e,t,r){"use strict";var a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0});var n={themeNames:!0,defaultOs:!0,themeMapper:!0,themeMapperProject:!0,osMapper:!0,media:!0,hexToRgba:!0,projectOnly:!0,projectExcept:!0,themeOnly:!0,uiConstants:!0};Object.defineProperty(t,"uiConstants",{enumerable:!0,get:function(){return s.default}}),t.default=t.themeOnly=t.projectExcept=t.projectOnly=t.hexToRgba=t.media=t.osMapper=t.themeMapperProject=t.themeMapper=t.defaultOs=t.themeNames=void 0;var o=i(r(6));Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var s=a(r(164));t.themeNames=["desktop-light","desktop-dark","bibguru-light","bibguru-dark","webapp-light","webapp-dark","google-docs-light","google-docs-dark"];const l=navigator.userAgent.includes("Mac OS X")?"mac":"win";t.defaultOs=l;const c=e=>t=>{const r=e[t.theme.themeName];return void 0===r&&console.error(`pp-ui themeMapper: value for theme "${t.theme.themeName}" not found`,e),function(e){return"function"==typeof e}(r)?r(t):r};t.themeMapper=c;t.themeMapperProject=e=>c({"desktop-light":e.desktop,"desktop-dark":e.desktop,"bibguru-light":e.bibguru,"bibguru-dark":e.bibguru,"webapp-light":e.webapp,"webapp-dark":e.webapp,"google-docs-light":e.googleDocs,"google-docs-dark":e.googleDocs});t.osMapper=e=>t=>{const r=t.theme.os||l;return e[r]};const u=Object.keys(s.default.breakpoints).reduce((e,t)=>({...e,[t]:`@media (min-width: ${s.default.breakpoints[t]}px)`}),{});t.media=u;t.hexToRgba=(e,t)=>{const r=parseInt(e.substring(1),16);return`rgba(${[r>>16&255,r>>8&255,255&r,t].join()})`};t.projectOnly=(e,t)=>r=>"desktop"===e&&"desktop-light"!==r.theme.themeName&&"desktop-dark"!==r.theme.themeName||"bibguru"===e&&"bibguru-light"!==r.theme.themeName&&"bibguru-dark"!==r.theme.themeName||"webapp"===e&&"webapp-light"!==r.theme.themeName&&"webapp-dark"!==r.theme.themeName||"googleDocs"===e&&"google-docs-light"!==r.theme.themeName&&"google-docs-dark"!==r.theme.themeName?null:t;t.projectExcept=(e,t)=>r=>("desktop"!==e||"desktop-light"!==r.theme.themeName&&"desktop-dark"!==r.theme.themeName)&&("bibguru"!==e||"bibguru-light"!==r.theme.themeName&&"bibguru-dark"!==r.theme.themeName)&&("webapp"!==e||"webapp-light"!==r.theme.themeName&&"webapp-dark"!==r.theme.themeName)&&("googleDocs"!==e||"google-docs-light"!==r.theme.themeName&&"google-docs-dark"!==r.theme.themeName)?t:null;t.themeOnly=(e,t)=>r=>r.theme.themeName===e?t:null;var d=o.default;t.default=d},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(0)),n=a(r(6)),o=a(r(21)),s=a(r(14)),l=a(r(199)),c=a(r(67));const u=n.default.div`
  display: flex;
  align-items: center;
  gap: 7px;
  line-height: ${e=>{let{lineHeight:t}=e;return t}}px;
  padding: 2px;
`,d=n.default.div`
  flex: 1;
  color: ${e=>{let{textLabelStyle:t}=e;return l.default[t].color}};
  ${e=>{let{size:t,textLabelWeight:r}=e;return s.default[r][t]}}
`,p=(0,n.default)(o.default)`
  fill: ${e=>{let{textLabelStyle:t}=e;return l.default[t].iconColor}};

  align-self: baseline;
`;var m=e=>{let{className:t,icon:r,loading:a,text:n,size:o="default",textLabelStyle:s,textLabelWeight:l="medium"}=e;return i.default.createElement(u,{className:t,lineHeight:"default"===o?18:16},r&&!a&&i.default.createElement(p,{textLabelStyle:s,name:r,size:"default"===o?20:16}),a&&i.default.createElement(c.default,{size:"default"===o?20:16}),i.default.createElement(d,{textLabelStyle:s,size:"default"===o?"medium":o,textLabelWeight:l},n))};t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWebappTabs=t.focusWebappTab=t.isOnWebappTab=t.getTab=t.getTabUrl=t.getAllTabIds=t.getTabId=void 0;var a=r(9);t.getTabId=async e=>new Promise((t,r)=>{null!=e&&e.tabId?t(null==e?void 0:e.tabId):chrome.tabs.query({active:!0,currentWindow:!0},e=>{e&&e[0]&&e[0].id?t(e[0].id):r(new Error("No tab found"))})});t.getAllTabIds=async()=>{const e=[];return await new Promise(t=>{chrome.tabs.query({},r=>{for(const t of r)t&&t.id&&t.url&&e.push(t.id);t()})}),e};t.getTabUrl=async e=>new Promise(t=>{chrome.tabs.get(e,e=>{t(null==e?void 0:e.url)})});t.getTab=async e=>new Promise(t=>{chrome.tabs.get(e,e=>{t(e?[e]:[])})});t.isOnWebappTab=async()=>{var e;const t=await new Promise(e=>chrome.tabs.query({currentWindow:!0,active:!0},e));return(0,a.isNewWebAppTab)(null==t||null===(e=t[0])||void 0===e?void 0:e.url)};t.focusWebappTab=async e=>new Promise(t=>{e[0]&&e[0].windowId?chrome.windows.update(e[0].windowId,{focused:!0},()=>{e[0].id?chrome.tabs.update(e[0].id,{active:!0},()=>{t(!0)}):t(!1)}):t(!1)});t.getWebappTabs=async e=>{const t=[];return await new Promise(r=>{chrome.tabs.query({},i=>{for(const r of i)r.url&&(0,a.isNewWebAppTab)(r.url)&&r.id&&(e||r.url.indexOf("/view")<0)&&t.push(r);r()})}),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isCheerio=void 0;const a=e=>"load"in e;t.isCheerio=a;var i=(e,t,r)=>{if(!t)throw new Error("No jQuery instance provided.");const i=`<div>${e}</div>`,n=a(t)?t.load("",{xmlMode:!0})(i):((e,t,r)=>{try{return e(e.parseXML(t).documentElement)}catch(a){return null==r||r.log(a.message,"error"),e(t)}})(t,i,r);return{$:t,rootElement:n}};t.default=i},,,,function(e,t,r){"use strict";var a=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.parseCollectionWebSharingSettings=t.parseCollectionSharingSettings=t.getDefaultCollectionSharingSettings=t.unlinkPubsInCollection=t.transferReferences=t.changeReferenceOwnership=t.cloneReference=t.fetchCollectionsForLibraries=t.normalizeLibraryOrFolder=void 0;var i=r(48),n=r(74),o=a(r(43));t.normalizeLibraryOrFolder=e=>{if(e)return{_id:e._id,name:"collectionType"in e?e.cName:e.name,..."collectionType"in e?{type:"shared-folder",sharing_mode:e.sharing_settings?JSON.parse(e.sharing_settings).sharing_mode:void 0}:{type:"shared-library",sharing_mode:e.sharing_mode},owner:"collectionType"in e&&"owner"in e?e.owner:e._id}};t.fetchCollectionsForLibraries=async e=>{let{dataClient:t}=e;const r=[],a={personal:[],sharedWithMe:[]};let i={};for(const e of Object.keys(t.libraries)){const n=await t.forLibrary(e).getAll("Collections");r.push(...n);const o=n.map(e=>e._id),s=await t.forLibrary(e).getFilterCounts([..."personal"===e?["ALL","STARRED","TRASHED"]:["ALL","TRASHED"],...o]);if("personal"!==e){0===(await t.forLibrary(e).getAll("SharedLibraries")||[]).length&&a.sharedWithMe.push(...o),a[e]=o,s["ALL_"+e]=s.ALL||0,s["TRASHED_"+e]=s.TRASHED||0,delete s.ALL,delete s.TRASHED}else a[e]=o;i={...i,...s}}return a.sharedWithMe=[...new Set(a.sharedWithMe)],{collections:r,collectionsForLibrary:a,collectionCounts:i}};const s=(e,t,r)=>{const a=e.library.Publication.getAllData(t);a.ignore_duplicates||(a.ignore_duplicates=[]),a.ignore_duplicates=[...new Set([...a.ignore_duplicates,t._id])];return["owner","_id","citekey","webimport_sha1","webimport_sha1s","id_list","citedByLink","crawl_urls"].forEach(e=>{delete a[e]}),r&&(a.owner=r),e.library.Publication.autoClean(a),a.__render=o.preRenderPubData(a),a};t.cloneReference=s;t.changeReferenceOwnership=async(e,t,r,a,i,n,o,s)=>{try{if(!i)return;if("take-ownership"===a){if(o){let a;if(n.copied_from&&n.copied_from.includes(i))[,a]=n.copied_from.split(":");else if(n.copied_to&&n.copied_to.some(e=>e.includes(i))){var c;a=null===(c=n.copied_to.find(e=>e.includes(i)))||void 0===c?void 0:c.split(":")[1]}if(a)await e.forLibrary(o).updatePubLinks(n._id,{field:"linked_from",value:`${i}:${a}`});else{const{transferredReferences:a}=await l(e,t,r,[n],!0,o,s,"personal",i);await e.forLibrary("personal").waitForSync(),await e.forLibrary(o).updatePubLinks(n._id,{field:"linked_from",value:`${i}:${a[0]._id}`})}}else await e.forLibrary().updatePubLinks(n._id,{field:"linked_from",value:null});return}if("remove-owner"===a||"give-up-ownership"===a)return void await e.forLibrary(o).updatePubLinks(n._id,{field:"linked_from",value:null})}catch(e){t.error("share","changeReferenceOwnership",e)}};const l=async(e,t,r,a,n,o,l,c,u,d,p)=>{try{const t=[],g=[],f=[];for(const e of a){var m;const a={...s(r,e),_id:(0,i.v4)(),owner:u,folders:null!=d&&d[e._id]?d[e._id]:[],labels:[],starred:0,attachments:[],...l?{copied_from:`${l}:${e._id}`}:{},...n&&c&&"personal"!==c?{linked_from:`${l}:${e._id}`}:{}},o=["ignore_duplicates","duplicates","note","shared_folders"];for(const e of o)delete a[e];var h;if(p&&(null===(m=a.folders)||void 0===m||!m.includes(p._id)))null===(h=a.folders)||void 0===h||h.push(p._id);for(const t of e.attachments||[]){const e={_id:(0,i.v4)(),owner:u,copy_from:t._id,pub_id:a._id};t.filename&&(e.filename=t.filename),t.filesize&&(e.filesize=t.filesize),t.md5&&(e.md5=t.md5),t.mimeType&&(e.mimeType=t.mimeType),t.source_filename&&(e.source_filename=t.source_filename),t.article_pdf&&(e.article_pdf=t.article_pdf),g.push(e)}if(u){const t=`${u}:${a._id}`;f.push({_id:e._id,copied_to:[...e.copied_to||[],t]})}t.push(a)}return await e.forLibrary(o).triggerActionsByChange({type:"update_pubs",payload:f}),await e.forLibrary(c).insertPubs(t.reverse()),await e.forLibrary(c).insertAttachments(g),{transferredReferences:t,transferredAttachments:g}}catch(e){t.error("transfer","import","transferReferences",e)}return{transferredReferences:[],transferredAttachments:[]}};t.transferReferences=l;t.unlinkPubsInCollection=async(e,t,r)=>{const a="ROOT"===t?{}:{collections:{rule:"OR",data:[t]}},i=await e.getReferenceIds(a,!1),{ids:o}=i||{};if(o)for(const t of(0,n.chunkArray)(o,100)){const a=await e.getReferences(t);for(const t of a)t&&t._id&&t.linked_from&&(r.debug("links",`Unlinking pub ${t._id}, linked_from: ${t.linked_from}`),await e.updatePubLinks(t._id,{field:"linked_from",value:null}))}};t.getDefaultCollectionSharingSettings=()=>({share_annotations:!1,sharing_mode:"linked",web_sharing_minimal_access_level:"writer"});t.parseCollectionSharingSettings=e=>{let t;try{t=JSON.parse(e||"{}")}catch{t={}}return{share_annotations:t.share_annotations||!1,sharing_mode:t.sharing_mode||"independent",web_sharing_minimal_access_level:t.web_sharing_minimal_access_level||"nobody"}};t.parseCollectionWebSharingSettings=e=>{let t;try{t=JSON.parse(e||"{}")}catch{t={}}return{share_annotations:t.share_annotations||!1,share_attachments:t.share_attachments||!1}}},function(e,t,r){"use strict";var a=r(2),i=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overlayScrollbarStyle=t.fixedScrollbarStyle=t.scrollbarStyle=t.SCROLLBAR_WIDTH=void 0;var n=i(r(0)),o=a(r(6)),s=r(10);t.SCROLLBAR_WIDTH=12;const l=o.css`
  overflow-y: ${navigator.userAgent.includes("Firefox")?"auto":"overlay"};

  &::-webkit-scrollbar {
    width: ${12}px;
  }

  &::-webkit-scrollbar-track {
    background: none;
  }

  &::-webkit-scrollbar-thumb {
    border: 2px solid transparent;
    background-clip: padding-box;
    border-radius: 8px;
    background-color: ${s.uiConstants.colors.light.gray[400]};
  }
`;t.scrollbarStyle=l;const c=o.css`
  &::-webkit-scrollbar {
    background-color: ${s.uiConstants.colors.light.gray[100]};
    border-left: 1px solid ${s.uiConstants.colors.light.gray[300]};
    border-radius: 0 4px 4px 0;
  }
`;t.fixedScrollbarStyle=c;const u=o.css`
  @property --thumbColor {
    syntax: '<color>';
    inherits: true;
    initial-value: transparent;
  }
  scrollbar-color: transparent transparent;

  @keyframes in {
    from {
      --thumbColor: transparent;
      scrollbar-color: transparent transparent;
    }
    to {
      --thumbColor: ${s.uiConstants.colors.light.gray[400]};
      scrollbar-color: ${s.uiConstants.colors.light.gray[400]} transparent;
    }
  }

  @keyframes out {
    from {
      --thumbColor: ${s.uiConstants.colors.light.gray[400]};
      scrollbar-color: ${s.uiConstants.colors.light.gray[400]} transparent;
    }
    to {
      --thumbColor: transparent;
      scrollbar-color: transparent transparent;
    }
  }

  &:hover {
    animation: in 0.5s forwards;
  }

  ${e=>{let{fadeOut:t}=e;return t&&"animation: out 0.5s forwards;"}}

  &::-webkit-scrollbar-thumb {
    background-color: var(--thumbColor);
  }
`;t.overlayScrollbarStyle=u;const d=o.css`
  &::-webkit-scrollbar {
    width: 0px;
  }

  scrollbar-color: transparent transparent;
`,p=o.default.div`
  ${e=>{let{maxHeight:t,styleName:r}=e;return o.css`
    max-height: ${t?t+"px":"100%"};

    ${l}
    ${"fixed"===r&&c}
    ${"overlay"===r&&u}
    ${"hidden"===r&&d}
  `}}
`;var m=e=>{let{className:t,children:r,innerRef:a,maxHeight:i,styleName:o="overlay",onScroll:s,...l}=e;const[c,u]=n.default.useState(!1);return n.default.createElement(p,{"data-testid":l["data-testid"],ref:a,className:t,fadeOut:c,maxHeight:i,onMouseOver:"overlay"===o?()=>{u(!0)}:void 0,styleName:o,onScroll:s},r)};t.default=m},,,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=a(r(122));class o extends n.default{static generateRandomId(){const e=(Math.random()+1).toString(36).substring(2,7);return 5===e.length?e:o.generateRandomId()}getDefaultLevel(){var e;const t=null===(e=this.localStorage)||void 0===e?void 0:e.getItem(o.LOG_LEVEL_LOCAL_STORAGE_KEY);return"string"==typeof(r=t)&&["debug","info","warn","error"].includes(r)?t:"warn";var r}constructor(e,t,r){super(),this.context=e,t&&("getItem"in t?this.localStorage=t:t.addUniqueContextId&&(this.contextId=o.generateRandomId())),null!=r&&r.addUniqueContextId&&(this.contextId=o.generateRandomId());const a="object"==typeof self?self:null;a&&(a.ppLoggerSetLevel=this.setLevel.bind(this)),this.setLevel(this.getDefaultLevel())}setLevel(e){var t;super.setLevel(e),null===(t=this.localStorage)||void 0===t||t.setItem(o.LOG_LEVEL_LOCAL_STORAGE_KEY,e)}getContextId(){if(!this.contextId)throw new Error("Initialize LoggerConsole with addUniqueContextId true");return this.contextId}getFormattedContextAndLabel(e){const t=this.contextId?`[${this.contextId}]`:"";return`[${this.context}]${t}[${e}]`}log(e){let{label:t,level:r,messages:a}=e;console[r]("%c"+this.getFormattedContextAndLabel(t),"color: "+o.CONTEXT_COLORS[this.context],...a)}now(){return"undefined"==typeof performance?Date.now():performance.now()}}(0,i.default)(o,"LOG_LEVEL_LOCAL_STORAGE_KEY","ppLoggerLogLevel"),(0,i.default)(o,"CONTEXT_COLORS",{bg:"#A03133",cs:"#238F5C",webapp:"#2F69A3",worker:"#5998DA",sw:"#CEB74C",offscreen:"#7B1F2A"});var s=o;t.default=s},,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.err=t.ok=void 0;var i=a(r(536)),n=a(r(539)),o=new WeakMap;class s{constructor(e){o.set(this,{writable:!0,value:void 0}),(0,n.default)(this,o,e)}isOk(){return!(0,i.default)(this,o)}unsafeOkValue(){throw new Error("unsafeOkValue: Result not Ok")}unsafeErrValue(){throw new Error("unsafeErrValue: Result not Err")}}class l extends s{constructor(e){super(!1),this.value=e}unsafeOkValue(){return this.value}}class c extends s{constructor(e){super(!0),this.error=e}unsafeErrValue(){return this.error}}t.ok=e=>new l(e);t.err=e=>new c(e)},,,function(e,t,r){"use strict";var a=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.typesUtils=t.types=t.RemoteUtilsTypes=t.QueueTypes=t.DataLayerTypes=t.BackendOldTypes=t.BackendTypes=void 0;var i=a(r(225));t.BackendTypes=i;var n=a(r(242));t.BackendOldTypes=n;var o=a(r(126));t.DataLayerTypes=o;var s=a(r(178));t.QueueTypes=s;var l=a(r(249));t.RemoteUtilsTypes=l;var c=a(r(128));t.types=c;var u=a(r(129));t.typesUtils=u},function(e,t,r){"use strict";const a=r(77);let i=r(431);function n(){this._supportedLanguages=["en-US","de-DE","de-CH","de-AT","pt-PT","pt-BR","es-ES"],this._pubtypes={},this._authorFields=["author","editor","series_editor","translator","contributor"],this._supportedLanguages.forEach(e=>{this._pubtypes[e]={paperpile:null,bibguru:null}}),this._data=i,Object.keys(this._data.pubtypes).forEach(e=>{const t=this._data.pubtypes[e].fields.default;-1===t.indexOf("pubtype")&&t.push("pubtype"),-1===t.indexOf("kind")&&t.push("kind")}),this._fieldStatus={ALWAYS:"default",VALUEONLY:"valueOnly",HIDDEN:"hidden",NEVER:"never"},this._dates={"en-US":{year:{label:"Year",fields:[{type:"yearOrFreestyle",label:"YYYY"}]},yearmonth:{label:"Year + month",fields:[{type:"month",label:"MM"},{type:"sep",label:"/"},{type:"year",label:"YYYY"}]},yearmonthday:{label:"Year + month + day",fields:[{type:"month",label:"MM"},{type:"sep",label:"/"},{type:"day",label:"DD"},{type:"sep",label:"/"},{type:"year",label:"YYYY"}]},freestyle:{label:"Other",fields:[{type:"yearOrFreestyle",label:""}]}},"pt-PT":{year:{label:"Ano",fields:[{type:"yearOrFreestyle",label:"YYYY"}]},yearmonth:{label:"Ano/M\xeas",fields:[{type:"month",label:"MM"},{type:"sep",label:"/"},{type:"year",label:"YYYY"}]},yearmonthday:{label:"Ano/M\xeas/Dia",fields:[{type:"day",label:"DD"},{type:"sep",label:"/"},{type:"month",label:"MM"},{type:"sep",label:"/"},{type:"year",label:"YYYY"}]},freestyle:{label:"Outra",fields:[{type:"yearOrFreestyle",label:""}]}},"de-DE":{year:{label:"Jahr",fields:[{type:"yearOrFreestyle",label:"JJJJ"}]},yearmonth:{label:"Jahr und Monat",fields:[{type:"month",label:"MM",padding:"none"},{type:"sep",label:"-",padding:"none"},{type:"year",label:"JJJJ",padding:"none"}]},yearmonthday:{label:"Jahr, Monat und Tag",fields:[{type:"day",label:"TT",padding:"none"},{type:"sep",label:".",padding:"none"},{type:"month",label:"MM",padding:"none"},{type:"sep",label:".",padding:"none"},{type:"year",label:"JJJJ",padding:"none"}]},freestyle:{label:"Freies Format",fields:[{type:"yearOrFreestyle",label:""}]}},"es-ES":{year:{label:"A\xf1o",fields:[{type:"yearOrFreestyle",label:"AAAA"}]},yearmonth:{label:"A\xf1o + mes",fields:[{type:"month",label:"MM"},{type:"sep",label:"/"},{type:"year",label:"AAAA"}]},yearmonthday:{label:"A\xf1o + mes + d\xeda",fields:[{type:"month",label:"MM"},{type:"sep",label:"/"},{type:"day",label:"DD"},{type:"sep",label:"/"},{type:"year",label:"AAAA"}]},freestyle:{label:"Otro",fields:[{type:"yearOrFreestyle",label:""}]}}},this._groups={fields:[{pubtype:2},{online_source:2},{kind:2},{title:4},{titleshort:4},{original_title:4},{booktitle:4},{author:4},{socialmedia_handle:2},{assignee:4},{affiliation:4},{editor:4},{series_editor:4},{contributor:4},{translator:4},{institution:4},{school:4},{department:4},{abstract:4},{keywords:4},{note:4},{scale:2},{journal:2},{journalfull:2},{publisher:2},{original_publisher:2},{address:2},{original_address:2},{conference:2},{conference_location:2},{archive:2},{archive_location:2},{archive_place:2},{call_number:2},{database:2},{status:2},{howpublished:2},{issuing_authority:2},{patent_publication_type:2},{class:2},{search_class:2},{international_class:2},{states:4},{foreign_patents:4},{published:1},{originally_published:1},{filed:1},{accessed:1},{conference_date:1},{volume:1},{num_volumes:1},{issue:1},{chapter:1},{number:1},{version:1},{edition:1},{series:1},{series_number:1},{pages:1},{num_pages:1},{running_time:1},{medium:2},{genre:2},{patent_number:1},{application_number:1},{priority_numbers:1},{copyright:2},{language:1},{jurisdiction:2},{legislative_body:2},{court:2},{history:2},{section:2},{session:2},{url:{paperpile:2,bibguru:4}},{doi:2},{associated_doi:2},{pmid:1},{pmc:1},{arxivid:1},{eprint:1},{archivePrefix:1},{primaryClass:1},{isbn:1},{isbn_alt:1},{issn:1},{issn_alt:1},{ismn:1},{lccn:1},{mr:1},{zbl:1},{user_citekey:1}],bibguru:[{id:"what",description:{"en-US":"","de-DE":"","es-ES":"","pt-PT":""},label:{"en-US":"What do you want to cite?","pt-PT":"O que \xe9 que queres citar? ","de-DE":"Was willst du zitieren?","es-ES":"\xbfQu\xe9 quieres citar?"},items:["pubtype","kind","title","titleshort","booktitle","original_title","online_source","language"]},{id:"who",description:{"en-US":"","de-DE":"","es-ES":"","pt-PT":""},label:{"en-US":"Who created it?","pt-PT":"Quem \xe9 que contribuiu?","de-DE":"Wer hat es erstellt?","es-ES":"\xbfQui\xe9n lo cre\xf3?"},items:["author","socialmedia_handle","editor","series_editor","translator","contributor"]},{id:"when",description:{"en-US":"","de-DE":"","es-ES":"","pt-PT":""},label:{"en-US":"When?","pt-PT":"Quando?","de-DE":"Wann?","es-ES":"\xbfCu\xe1ndo?"},items:["published","accessed","filed","conference_date","originally_published"]},{id:"where",description:{"en-US":"","de-DE":"","es-ES":"","pt-PT":""},label:{"en-US":"Where can you find it?","pt-PT":"Onde podes encontrar?","de-DE":"Wo findet man es?","es-ES":"\xbfD\xf3nde se puede encontrar?"},items:["journal","journalfull","school","database","publisher","address","patent_number","volume","issue","edition","num_pages","pages"]},{id:"ids",description:{"en-US":"","de-DE":"","es-ES":"","pt-PT":""},label:{"en-US":"","de-DE":"","es-ES":"","pt-PT":""},items:["url","doi","isbn","issn","issn_alt","arxivid","pmid","pmc","ismn"]},{id:"excluded",items:["mr","zbl","isbn_alt","keywords","note","copyright","affiliation"]}],paperpile:[{id:"type",description:{"en-US":"Type and subtype","de-DE":"","pt-PT":""},label:{"en-US":"","de-DE":""},items:["pubtype","kind"]},{id:"what",description:{"en-US":"About the reference","de-DE":"","pt-PT":""},label:{"en-US":"","de-DE":""},items:["title","titleshort","original_title","booktitle","author","assignee","socialmedia_handle","affiliation","editor","series_editor","contributor","translator","institution","school","department","abstract","keywords","note","scale"]},{id:"where",description:{"en-US":"Where, when and how it was published","de-DE":"","pt-PT":""},label:{"en-US":"","de-DE":"","pt-PT":""},items:["journal","journalfull","publisher","original_publisher","address","original_address","conference","conference_location","archive","archive_location","archive_place","call_number","database","status","howpublished","issuing_authority","patent_publication_type","class","search_class","international_class","states","foreign_patents","published","originally_published","filed","accessed","conference_date","volume","num_volumes","issue","chapter","number","version","edition","series","series_number","pages","num_pages","running_time","medium","genre","patent_number","application_number","priority_numbers","copyright","language","jurisdiction","legislative_body","court","history","section","session"]},{id:"ids",description:{"en-US":"Identifiers","de-DE":"","pt-PT":""},label:{"en-US":"","de-DE":"","pt-PT":""},items:["url","doi","associated_doi","pmid","pmc","arxivid","eprint","archivePrefix","primaryClass","isbn","isbn_alt","issn","issn_alt","ismn","lccn","mr","zbl","user_citekey"]}]},this._fields={},this._groups.fields.forEach((e,t)=>{const r=Object.keys(e)[0];this._fields[r]={size:e[r],pos:t}}),this._fieldsByPubtype={paperpile:{},bibguru:{}},this._lookupGroups={journal:["journal","journalfull","issn","issn_alt"],publisher:["publisher","address"]},this._lookup={PP_ARTICLE:this._lookupGroups.journal,PP_BOOK:this._lookupGroups.publisher,PP_BOOK_CHAPTER:this._lookupGroups.publisher},this._mainTypes=["PP_ARTICLE","PP_BOOK","PP_BOOK_CHAPTER","PP_CONFERENCE_PAPER","PP_NEWS_ARTICLE","PP_THESIS","PP_WEBSITE","PP_MISC"]}"__esModule"in i&&(i=i.default),n.prototype._getByLanguage=function(e,t){let r=null,a=t.toLowerCase();if(5===a.length){const e=a.split(/-/);a=`${e[0]}-${e[1].toUpperCase()}`}if("object"==typeof e)if(a in e)r=e[a];else{let t="";a.match(/^en/)?t="en-US":a.match(/^de/)?t="de-DE":a.match(/^es/)?t="es-ES":a.match(/^pt/)&&(t="pt-PT"),t in e&&(r=e[t])}return r},n.prototype.getAllPubTypes=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"paperpile",r=arguments.length>2?arguments[2]:void 0;const a=this;let i=[];if(Object.keys(a._data.pubtypes).forEach(r=>{let n=!0;if("bibguru"===t&&["PP_NEWS_ARTICLE","PP_THESIS","PP_VIDEO","PP_REVIEW"].indexOf(r)>-1&&(n=!1),n){const n={pubtype:r,subtype:null,label:a._getByLanguage(a._data.pubtypes[r].label,e)||"",desc:a._getByLanguage(a._data.pubtypes[r].description,e)||"",synonyms:[]};a._data.pubtypes[r].synonyms&&a._getByLanguage(a._data.pubtypes[r].synonyms,e)&&(n.synonyms=a._getByLanguage(a._data.pubtypes[r].synonyms,e)),"paperpile"===t&&(n.mainType=!1,a._mainTypes.indexOf(r)>-1&&(n.mainType=!0)),i.push(n)}a._data.pubtypes[r].subtypes&&Object.keys(a._data.pubtypes[r].subtypes).forEach(n=>{let o=!0;if(a._data.pubtypes[r].subtypes[n].modes&&!1===a._data.pubtypes[r].subtypes[n].modes[t]&&(o=!1),o){const o={pubtype:r,subtype:n,label:a._getByLanguage(a._data.pubtypes[r].subtypes[n].label,e)||"",desc:a._getByLanguage(a._data.pubtypes[r].subtypes[n].description,e)||"",synonyms:[]};"paperpile"===t&&(o.mainType=!1,a._mainTypes.indexOf(r)>-1&&(o.mainType=!0)),a._data.pubtypes[r].subtypes[n].synonyms&&a._getByLanguage(a._data.pubtypes[r].subtypes[n].synonyms,e)&&(o.synonyms=a._getByLanguage(a._data.pubtypes[r].subtypes[n].synonyms,e)),i.push(o)}})}),r&&(i=i.sort((e,t)=>e.label.localeCompare(t.label)),"paperpile"===t)){const e=[],t=[];a._mainTypes.forEach(t=>{i.forEach(r=>{r.pubtype===t&&e.push(r)})}),i.forEach(e=>{-1===a._mainTypes.indexOf(e.pubtype)&&t.push(e)}),i=e.concat(t)}return i},n.prototype.getPubTypeName=function(e,t){let r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"paperpile";return void 0===t&&(t=null),r=this._getByLanguage(this._pubtypes,a)?this._getByLanguage(this._pubtypes,a):this._getByLanguage(this._pubtypes,"en"),r[i]||this._fillPubTypesInfo(a,i),r[i][`${e}|${t}`]},n.prototype._fillPubTypesInfo=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"paperpile";e=this._getByLanguage(this._pubtypes,t)?this._getByLanguage(this._pubtypes,t):this._getByLanguage(this._pubtypes,"en"),e[r]={},this.getAllPubTypes(t,r,!1).forEach(t=>{e[r][""+t.pubtype]=t.label,e[r][`${t.pubtype}|${t.subtype}`]=t.label})},n.prototype.getBestLink=function(e){let t=null;if(e.doi)t="https://doi.org/"+e.doi;else if(e.url){const r=[[],[],[]];e.url.forEach(e=>{e.match(/(doi\.org|nih.gov)/i)?r[2].push(e):e.match(/pdf/i)?r[1].push(e):r[0].push(e)}),t=r[0][0],t||(t=r[1][0])}return!t&&e.pmid&&(t="https://www.ncbi.nlm.nih.gov/pubmed/"+e.pmid),!t&&e.pmc&&(t="https://www.ncbi.nlm.nih.gov/pmc/articles/"+e.pmc),t},n.prototype._getDomain=function(e){e||(e="");const t=e.replace(/^https?:\/\//i,"").replace(/\/.*/,"").split(/\./);if(t.length>=2){const e=[];return e.unshift(t.pop()),e.unshift(t.pop()),2===e[0].length&&e.unshift(t.pop()),this._ucFirst(e.join("."))}return""},n.prototype._ucFirst=function(e){e||(e="");const t=[];let r=!1;return e.split("").forEach(e=>{r||e.toUpperCase()===e.toLowerCase()||(e=e.toUpperCase(),r=!0),t.push(e)}),t.join("")},n.prototype.checkPub=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"paperpile",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=a(e);if(this._pubtypes["en-US"][t]||this._fillPubTypesInfo("en",t),this._pubtypes["en-US"][t][i.pubtype]?this._pubtypes["en-US"][t][`${i.pubtype}|${i.kind}`]||(i.kind=null):(i.pubtype="PP_MISC",i.kind=null),"guru"===r&&(["published_alt","edition_alt","_score"].forEach(e=>{delete i[e]}),i.subtitle&&(i.title&&(i.title=i.title+": "),i.subtitle=this._ucFirst(i.subtitle),i.title=`${i.title}${i.subtitle}`,delete i.subtitle)),"bibguru"===t){const e=`${i.pubtype}|${i.subtype?i.subtype:null}`;if(!(e in this._fieldsByPubtype.bibguru)){const t=this.getPubType(i.pubtype,i.subtype,"en","bibguru");t&&t.fields&&(this._fieldsByPubtype.bibguru[e]={},t.fields.forEach(t=>{this._fieldsByPubtype.bibguru[e][t.name]=1}))}if(Object.keys(i).forEach(t=>{this._fields[t]&&!this._fieldsByPubtype.bibguru[e][t]&&delete i[t]}),["subfolders","source","citedByLink"].forEach(e=>{delete i[e]}),"PP_ARTICLE"===i.pubtype&&i.journal&&!i.journalfull&&(i.journalfull=i.journal),i.url){const e=[];i.url.forEach(t=>{let r=!0;(t.match(/ncbi\.nlm\.nih\.gov\/pubmed/i)&&i.pmid||t.match(/ncbi\.nlm\.nih\.gov\/pmc/i)&&i.pmc||t.match(/doi\.org\//i)&&i.doi)&&(r=!1),r&&e.push(t)}),i.url=e.length>0?[e[0]]:[]}"guru"===r&&("PP_PREPRINT"===i.pubtype&&i.arxivid&&("url"in i||(i.url=[]),i.url.push("https://arxiv.org/abs/"+i.arxivid)),i.online_source=!1,(i.doi||i.url&&i.url.length>0)&&("PP_BOOK"===i.pubtype&&"Electronic Book"===i.kind||"PP_VIDEO"===i.pubtype&&"Online Video"===i.kind||"PP_PREPRINT"===i.pubtype||"PP_ARTICLE"===i.pubtype?i.online_source=!0:"PP_WEBSITE"!==i.pubtype&&"PP_MISC"!==i.pubtype&&"PP_NEWS_ARTICLE"!==i.pubtype||(i.online_source=!0)),"PP_ARTICLE"===i.pubtype&&(delete i.publisher,delete i.address),"PP_BOOK"===i.pubtype&&delete i.num_pages,i.published&&i.pubtype.match(/^(PP_ARTICLE|PP_BOOK|PP_BOOK_CHAPTER|PP_REPORT|PP_CONFERENCE_PAPER|PP_PREPRINT)$/)&&(delete i.published.day,delete i.published.month),"PP_WEBSITE"===i.pubtype&&!i.booktitle&&i.url&&i.url.length>0&&(i.booktitle=this._getDomain(i.url[0])),i._alt&&Array.isArray(i._alt)&&i._alt.forEach(e=>{e.published&&(delete e.published.day,delete e.published.month),delete e.num_pages}))}else"paperpile"===t&&("source"in i||(i.source={}),"guru"===r&&(i.journal_checked=1));return i},n.prototype.getCategories=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"paperpile";const r=this,a=[];return r._groups[t].forEach(t=>{"excluded"!==t.id&&a.push({id:t.id,description:this._getByLanguage(t.description,e)?this._getByLanguage(t.description,e):this._getByLanguage(t.description,"en"),label:this._getByLanguage(t.label,e)?this._getByLanguage(t.label,e):this._getByLanguage(t.label,"en")})}),a},n.prototype._getFieldText=function(e,t,r){if("object"==typeof e){const a=this._getByLanguage(e,t);return a?"string"==typeof a?a:r in a?a[r]:"":""}return""},n.prototype._resolveField=function(e,t,r,a,i){const n=this,o={name:e,category:null,pos:999,label:t[e]&&t[e].label?this._getFieldText(t[e].label,a,i):"",help:t[e]&&t[e].help?this._getFieldText(t[e].help,a,i):""};if(this._authorFields.indexOf(e)>-1){let e="";this._data.tokens&&this._data.tokens.author&&this._getByLanguage(this._data.tokens.author,a)&&"string"==typeof this._getByLanguage(this._data.tokens.author,a)&&(e=this._getByLanguage(this._data.tokens.author,a));const t=e.match(/^[^<>]*<\/p>/)?"<p>":"";o.help=`${t}${o.help} ${e}`.replace(/\s+$/,"")}t[e]&&"default"in t[e]&&(o.default=t[e].default);const s=n._groups[i];Object.keys(s).forEach(t=>{s[t].items.indexOf(e)>-1&&(o.category=s[t].id,o.pos=n._fields[e].pos,o.size=n._getFieldSize(e,i))});let l=-1;return e in r[0]?l=0:e in r[1]&&(l=1),l>-1&&(r[l][e].label&&this._getByLanguage(r[l][e].label,a)&&(o.label=this._getFieldText(r[l][e].label,a,i)),r[l][e].help&&this._getByLanguage(r[l][e].help,a)&&(o.help=this._getFieldText(r[l][e].help,a,i))),"excluded"===o.category&&(o.category=null),o},n.prototype._resolveGroups=function(e,t,r,a){const i=this,n={},o={};"void"in e&&e.void.forEach(e=>{o[e]=!0});const s={};return[{source:"default",target:"default"},{source:"valid",target:"other"}].forEach(l=>{n[l.target]=[],e[l.source]&&e[l.source].forEach(c=>{if(!(c in o)){const o=i._resolveField(c,t,e.values,r,a);null!==o.category&&(o.category in s||(s[o.category]={}),s[o.category][o.name]=o.pos,n[l.target].push(o))}o[c]=!0})}),Object.keys(s).forEach(e=>{Object.keys(s[e]).sort((t,r)=>s[e][t]-s[e][r]).forEach((t,r)=>{s[e][t]=r+1})}),Object.keys(n).forEach(e=>{const t=[],r={};Object.keys(s).forEach((e,a)=>{t.push([]),r[e]=a}),n[e].forEach(e=>{e.pos=s[e.category][e.name],t[r[e.category]].push(e)}),t.forEach(e=>{e.sort((e,t)=>e.pos-t.pos)}),n[e]=[].concat(...t)}),n},n.prototype.getDateFormat=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return this._getByLanguage(this._dates,e)?this._getByLanguage(this._dates,e):this._getByLanguage(this._dates,"en")},n.prototype._getFieldSize=function(e,t){return"object"!=typeof this._fields[e].size?this._fields[e].size:this._fields[e].size[t]},n.prototype._getVoidFields=function(e,t){t||(t="");const r=[];return e&&(Array.isArray(e)?e.forEach(e=>{r.push(e)}):"object"==typeof e&&t in e&&Array.isArray(e[t])&&e[t].forEach(e=>{r.push(e)})),r},n.prototype.getPubType=function(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"paperpile",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const n=this,o={pubtype:null,subtype:null,label:"",description:"",fields:[]};let s={default:[],other:[]};if(e in n._data.pubtypes){const i=n._data.pubtypes[e];o.pubtype=e,o.label=this._getByLanguage(i.label,r),o.description=this._getByLanguage(i.description,r);const l=n._getVoidFields(i.fields.void,a);if(t&&t in i.subtypes){const e=i.subtypes[t];o.subtype=t,o.label=this._getByLanguage(e.label,r),o.description=this._getByLanguage(e.description,r),n._getVoidFields(e.fields.void,a).forEach(e=>{-1===l.indexOf(e)&&l.push(e)}),s=n._resolveGroups({default:e.fields.default.length>0?e.fields.default:i.fields.default,valid:i.fields.valid,values:[e.fields.values,i.fields.values],void:l},n._data.defaults,r,a)}else s=n._resolveGroups({default:i.fields.default,valid:i.fields.valid,values:[i.fields.values,{}],void:l},n._data.defaults,r,a)}o.fields=[],["default","other"].forEach(t=>{s[t].forEach(r=>{r.status="default"===t?this._fieldStatus.ALWAYS:this._fieldStatus.VALUEONLY,"bibguru"===a&&("kind"===r.name&&(r.status=this._fieldStatus.NEVER),["isbn_alt","issn","issn_alt","arxivid","pmid","pmc","ismn","lccn"].indexOf(r.name)>-1&&(r.status=this._fieldStatus.HIDDEN),"PP_ARTICLE"===e&&(!0===i&&"journalfull"===r.name&&(r.status=this._fieldStatus.HIDDEN),!1===i&&"journal"===r.name&&(r.status=this._fieldStatus.HIDDEN))),o.fields.push(r)})}),o.pubtype in this._lookup&&o.fields.forEach(e=>{this._lookup[o.pubtype].indexOf(e.name)>-1&&(e.lookup=!0)});let l=!1;return["PP_BOOK","PP_BOOK_CHAPTER"].indexOf(o.pubtype)>-1&&"Electronic Book"===o.subtype&&(l=!0),"PP_WEBSITE"===o.pubtype&&(l=!0),l&&o.fields.forEach(e=>{"online_source"===e.name&&(e.default=!0)}),o},e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={S3_SYNC:1,BATCH_AUTOCOMPLETE:2,BATCH_PDF_DOWNLOAD:3,BATCH_PDF_DOWNLOAD_EXTENSION:4,BATCH_AUTOCOMPLETE_EXTENSION:5,SINGLE_PDF_DOWNLOAD:6,SINGLE_PDF_IMPROVE:7,SINGLE_AUTOCOMPLETE:7};t.default=a},,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(56);class o{static isDisabledInTests(){return!1}static getTimerKey(e,t){return`${e}-${t}`}constructor(){(0,i.default)(this,"startedTimers",new Map),this.setEnabledLevels("warn")}setEnabledLevels(e){this.enabledLevels={debug:"debug"===e,info:"debug"===e||"info"===e,warn:"debug"===e||"info"===e||"warn"===e,error:!0}}setLevel(e){this.setEnabledLevels(e)}setBugsnagClient(e){this.bugsnagClient=e}logIfEnabled(e){this.enabledLevels[e.level]&&!o.isDisabledInTests()&&this.log(e)}debug(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];this.logIfEnabled({level:"debug",messages:r,label:e})}info(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];this.logIfEnabled({level:"info",messages:r,label:e})}warn(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];this.logIfEnabled({level:"warn",messages:r,label:e})}error(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];this.logIfEnabled({level:"error",messages:r,label:e});const i=r.pop();if((0,n.isObject)(i)){if(i.toString().includes("xhr poll error"))return}if("string"==typeof i){var o,s;const e=new Error(i);e.stack=null===(o=e.stack)||void 0===o?void 0:o.split("\n").filter((e,t)=>1!==t&&!e.includes("node_modules/@babel/runtime/helpers")).join("\n"),null===(s=this.bugsnagClient)||void 0===s||s.notify(e)}else{var l;null===(l=this.bugsnagClient)||void 0===l||l.notify(i)}}errorNoNotify(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];this.logIfEnabled({level:"error",messages:r,label:e})}time(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.enabledLevels.debug)return;const a=o.getTimerKey(e,t);!this.startedTimers.has(a)||r.overrideStartedTimer?this.startedTimers.set(a,this.now()):this.warn(e,`\ud83d\udd52 Timer '${t}' already started`)}timeEnd(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.enabledLevels.debug)return;const a=o.getTimerKey(e,t),i=this.startedTimers.get(a);if(void 0===i)return void(r.ignoreNotStartedWarning||this.warn(e,`\ud83d\udd52 Timer '${t}' was not started`));this.startedTimers.delete(a);const n=this.now()-i;this.timePrint(e,t,n)}timePrint(e,t,r){this.debug(e,`\ud83d\udd52 ${t}: ${parseFloat(r.toFixed(2))} ms`)}}var s=o;t.default=s},function(e,t,r){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCommonStyle=t.isFullJsonStyle=t.isUserStyle=t.isUserStyleListItem=void 0;t.isUserStyleListItem=e=>"is_custom_style"in e&&1===e.is_custom_style;const a=e=>"is_custom_style"in e&&1===e.is_custom_style;t.isUserStyle=a;t.isFullJsonStyle=e=>"csljson"in e;t.isCommonStyle=e=>!a(e)},function(e,t,r){},function(e,t,r){"use strict";var a=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.DataClient=t.Model=t.FMA=t.FM=t.Sync=t.DB=void 0;var i=a(r(243));t.DB=i;var n=a(r(244));t.Sync=n;var o=a(r(127));t.FM=o;var s=a(r(245));t.FMA=s;var l=a(r(246));t.Model=l;var c=a(r(247));t.DataClient=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterFlags=t.filterToField=t.subFilters=t.filters=t.mainFilters=t.subtypes=t.pubtypes=void 0;t.pubtypes=["PP_ARTICLE","PP_ARTWORK","PP_AUDIO","PP_BILL","PP_BOOK","PP_BOOK_CHAPTER","PP_BROADCAST","PP_CASE","PP_COMPUTER_PROGRAM","PP_CONFERENCE_PAPER","PP_DATASET","PP_ENCYCLOPEDIA_ARTICLE","PP_FIGURE","PP_GRANT","PP_INTERVIEW","PP_LETTER","PP_MANUAL","PP_MANUSCRIPT","PP_MAP","PP_MISC","PP_NEWS_ARTICLE","PP_PATENT","PP_PERIODICAL","PP_PERSONAL_COMMUNICATION","PP_PREPRINT","PP_PRESENTATION","PP_REPORT","PP_REVIEW","PP_SCORE","PP_STANDARD","PP_STATUTE","PP_THESIS","PP_TREATY","PP_UNPUBLISHED","PP_VIDEO","PP_WEBSITE"];t.subtypes=["ST_REVIEW"];t.mainFilters=["ALL","STARRED","TRASHED"];t.filters=["HAS_PDF","HAS_NO_PDF","HAS_ATTACHMENTS","HAS_NOTE","HAS_NO_ATTACHMENTS","HAS_LABEL","HAS_NO_LABEL","HAS_FOLDER","HAS_NO_FOLDER","HAS_NO_NOTE","IS_INCOMPLETE","IS_UNSORTED"];t.subFilters=["byCreated","byDate","byTitle","byJournal","byFirstAuthor","byLastAuthor"];t.filterToField={byCreated:{type:"number",field:"created"},byDate:{type:"number",field:"date"},byTitle:{type:"string",field:"title"},byFirstAuthor:{type:"string",field:"firstAuthor"},byLastAuthor:{type:"string",field:"lastAuthor"},byJournal:{type:"string",field:"journal"}};t.filterFlags={starred:1,trashed:2,HAS_PDF:4,HAS_NO_PDF:8,HAS_ATTACHMENTS:16,HAS_NO_ATTACHMENTS:32,HAS_NOTE:64,HAS_NO_NOTE:128,HAS_FOLDER:256,HAS_NO_FOLDER:512,HAS_LABEL:1024,HAS_NO_LABEL:2048,IS_INCOMPLETE:4096,IS_UNSORTED:8192}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(250);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}));var i=r(251);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}));var n=r(252);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})}));var o=r(253);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}));var s=r(254);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}));var l=r(255);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})}));var c=r(256);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})}));var u=r(257);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})}));var d=r(258);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}})}));var p=r(259);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}})}));var m=r(260);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}})}));var h=r(261);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}})}));var g=r(262);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}})}));var f=r(263);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}})}));var b=r(264);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}})}));var y=r(265);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}})}));var v=r(266);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}})}));var _=r(267);Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}})}));var w=r(268);Object.keys(w).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}})}));var P=r(269);Object.keys(P).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}})}));var S=r(270);Object.keys(S).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return S[e]}})}));var C=r(271);Object.keys(C).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}})}));var A=r(272);Object.keys(A).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return A[e]}})}));var E=r(273);Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}})}));var T=r(274);Object.keys(T).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return T[e]}})}));var k=r(275);Object.keys(k).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return k[e]}})}));var x=r(276);Object.keys(x).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return x[e]}})}));var R=r(277);Object.keys(R).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return R[e]}})}));var I=r(278);Object.keys(I).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return I[e]}})}));var L=r(279);Object.keys(L).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return L[e]}})}));var D=r(280);Object.keys(D).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return D[e]}})}));var N=r(281);Object.keys(N).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return N[e]}})}));var O=r(282);Object.keys(O).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}})}));var U=r(283);Object.keys(U).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return U[e]}})}));var M=r(284);Object.keys(M).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return M[e]}})}));var F=r(285);Object.keys(F).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return F[e]}})}));var j=r(286);Object.keys(j).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return j[e]}})}));var B=r(287);Object.keys(B).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return B[e]}})}));var $=r(288);Object.keys($).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return $[e]}})}));var z=r(289);Object.keys(z).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return z[e]}})}));var H=r(290);Object.keys(H).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return H[e]}})}));var W=r(291);Object.keys(W).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return W[e]}})}));var V=r(292);Object.keys(V).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return V[e]}})}));var G=r(293);Object.keys(G).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return G[e]}})}));var q=r(294);Object.keys(q).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return q[e]}})}));var J=r(295);Object.keys(J).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return J[e]}})}));var K=r(296);Object.keys(K).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return K[e]}})}));var Y=r(297);Object.keys(Y).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Y[e]}})}));var Z=r(298);Object.keys(Z).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Z[e]}})}));var X=r(299);Object.keys(X).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return X[e]}})}));var Q=r(300);Object.keys(Q).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Q[e]}})}));var ee=r(301);Object.keys(ee).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return ee[e]}})}));var te=r(302);Object.keys(te).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return te[e]}})}));var re=r(303);Object.keys(re).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return re[e]}})}));var ae=r(304);Object.keys(ae).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return ae[e]}})}));var ie=r(305);Object.keys(ie).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return ie[e]}})}));var ne=r(306);Object.keys(ne).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return ne[e]}})}));var oe=r(307);Object.keys(oe).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return oe[e]}})}));var se=r(308);Object.keys(se).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return se[e]}})}));var le=r(309);Object.keys(le).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return le[e]}})}));var ce=r(310);Object.keys(ce).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return ce[e]}})}));var ue=r(311);Object.keys(ue).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return ue[e]}})}));var de=r(312);Object.keys(de).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return de[e]}})}));var pe=r(313);Object.keys(pe).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return pe[e]}})}));var me=r(314);Object.keys(me).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return me[e]}})}));var he=r(315);Object.keys(he).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return he[e]}})}));var ge=r(316);Object.keys(ge).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return ge[e]}})}));var fe=r(317);Object.keys(fe).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return fe[e]}})}));var be=r(318);Object.keys(be).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return be[e]}})}));var ye=r(319);Object.keys(ye).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return ye[e]}})}));var ve=r(320);Object.keys(ve).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return ve[e]}})}));var _e=r(321);Object.keys(_e).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return _e[e]}})}));var we=r(322);Object.keys(we).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return we[e]}})}));var Pe=r(323);Object.keys(Pe).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Pe[e]}})}));var Se=r(324);Object.keys(Se).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Se[e]}})}));var Ce=r(325);Object.keys(Ce).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Ce[e]}})}));var Ae=r(326);Object.keys(Ae).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Ae[e]}})}));var Ee=r(327);Object.keys(Ee).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Ee[e]}})}));var Te=r(328);Object.keys(Te).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Te[e]}})}));var ke=r(329);Object.keys(ke).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return ke[e]}})}));var xe=r(330);Object.keys(xe).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return xe[e]}})}));var Re=r(331);Object.keys(Re).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Re[e]}})}));var Ie=r(332);Object.keys(Ie).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Ie[e]}})}));var Le=r(333);Object.keys(Le).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Le[e]}})}));var De=r(334);Object.keys(De).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return De[e]}})}));var Ne=r(335);Object.keys(Ne).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Ne[e]}})}));var Oe=r(336);Object.keys(Oe).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Oe[e]}})}));var Ue=r(337);Object.keys(Ue).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Ue[e]}})}));var Me=r(338);Object.keys(Me).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Me[e]}})}));var Fe=r(339);Object.keys(Fe).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Fe[e]}})}));var je=r(340);Object.keys(je).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return je[e]}})}));var Be=r(341);Object.keys(Be).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Be[e]}})}));var $e=r(342);Object.keys($e).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return $e[e]}})}));var ze=r(343);Object.keys(ze).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return ze[e]}})}));var He=r(344);Object.keys(He).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return He[e]}})}));var We=r(345);Object.keys(We).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return We[e]}})}));var Ve=r(346);Object.keys(Ve).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Ve[e]}})}));var Ge=r(347);Object.keys(Ge).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Ge[e]}})}));var qe=r(348);Object.keys(qe).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return qe[e]}})}));var Je=r(349);Object.keys(Je).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Je[e]}})}));var Ke=r(350);Object.keys(Ke).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Ke[e]}})}));var Ye=r(351);Object.keys(Ye).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Ye[e]}})}));var Ze=r(352);Object.keys(Ze).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Ze[e]}})}));var Xe=r(353);Object.keys(Xe).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Xe[e]}})}));var Qe=r(354);Object.keys(Qe).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Qe[e]}})}));var et=r(355);Object.keys(et).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return et[e]}})}));var tt=r(356);Object.keys(tt).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return tt[e]}})}));var rt=r(357);Object.keys(rt).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return rt[e]}})}));var at=r(358);Object.keys(at).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return at[e]}})}));var it=r(359);Object.keys(it).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return it[e]}})}));var nt=r(360);Object.keys(nt).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return nt[e]}})}));var ot=r(361);Object.keys(ot).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return ot[e]}})}));var st=r(362);Object.keys(st).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return st[e]}})}));var lt=r(363);Object.keys(lt).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return lt[e]}})}));var ct=r(364);Object.keys(ct).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return ct[e]}})}));var ut=r(365);Object.keys(ut).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return ut[e]}})}));var dt=r(366);Object.keys(dt).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return dt[e]}})}));var pt=r(128);Object.keys(pt).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return pt[e]}})}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAuthorCollective=t.isAuthorPerson=void 0;t.isAuthorPerson=e=>e&&("string"==typeof e.first||"string"==typeof e.last);t.isAuthorCollective=e=>e&&"string"==typeof e.collective},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.purify=t.escapeHTML=void 0;var i=a(r(210)),n=a(r(77)),o=r(66);let s;"object"==typeof self&&self&&self.document&&(s=i.default);const l={a:!0,abbr:!0,acronym:!0,address:!0,applet:!0,area:!0,article:!0,aside:!0,audio:!0,b:!0,base:!0,basefont:!0,bdi:!0,bdo:!0,big:!0,blockquote:!0,body:!0,br:!0,button:!0,canvas:!0,caption:!0,center:!0,cite:!0,code:!0,col:!0,colgroup:!0,data:!0,datalist:!0,dd:!0,del:!0,details:!0,dfn:!0,dialog:!0,dir:!0,div:!0,dl:!0,dt:!0,em:!0,embed:!0,fieldset:!0,figcaption:!0,figure:!0,font:!0,footer:!0,form:!0,frame:!0,frameset:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,head:!0,header:!0,hr:!0,html:!0,i:!0,iframe:!0,img:!0,input:!0,ins:!0,kbd:!0,label:!0,legend:!0,li:!0,link:!0,main:!0,map:!0,mark:!0,meta:!0,meter:!0,nav:!0,noframes:!0,noscript:!0,object:!0,ol:!0,optgroup:!0,option:!0,output:!0,p:!0,param:!0,picture:!0,pre:!0,progress:!0,q:!0,rp:!0,rt:!0,ruby:!0,s:!0,samp:!0,script:!0,section:!0,select:!0,small:!0,source:!0,span:!0,strike:!0,strong:!0,style:!0,sub:!0,summary:!0,sup:!0,svg:!0,table:!0,tbody:!0,td:!0,template:!0,textarea:!0,tfoot:!0,th:!0,thead:!0,time:!0,title:!0,tr:!0,track:!0,tt:!0,u:!0,ul:!0,var:!0,video:!0,wbr:!0},c={textonly:{ALLOWED_TAGS:[]},authorextjs:{ALLOWED_TAGS:["span"],ALLOWED_ATTR:["class","id","style"]},titlemarkup:{ALLOWED_TAGS:["i","b","sup","sub"],ALLOWED_ATTR:[]},extendedmarkup:{ALLOWED_TAGS:["i","b","sup","sub","span","div","p","img","table","col","colgroup","thead","tbody","tfoot","td","tr","th","h1","h2","h3","h4"]}};t.escapeHTML=(e,t)=>{const r="string"==typeof t?[t]:[...t];let a=e;for(const e of r)'"'===e?a=a.replace(/"/g,"&quot;"):"'"===e?a=a.replace(/'/g,"&#39;"):"<"===e?a=a.replace(/</g,"&lt;"):"<"===e&&(a=a.replace(/>/g,"&gt;"));return a};const u=(e,t)=>{let r={};t in c&&(r=c[t]);return d(e,r,(e,t)=>{let r=e;const a=r.split(/(<[a-z\d]+)/i);for(let e=0;e<a.length;e+=1){const t=a[e].match(/^<([a-z\d]+)$/i);t&&t[1]&&!(t[1].toLowerCase()in l)&&(a[e]=a[e].replace(/</g,"&lt;"))}r=a.join("");let i=r;return void 0!==s&&(i=""+s.sanitize(r,t)),i})};t.purify=u;const d=(e,t,r)=>{if("string"==typeof e&&r)return r(e,t);if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){const a=[];return e.forEach(e=>{const i=d(e,t,r);a.push(i||{})}),a}const a={};for(const i of(0,o.getKeys)(e)){const n=d(e[i],t,r);n&&(a[i]=n)}return a}return(0,n.default)(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLookupHash=t.ignoreFields=t.preprocessCollections=t.preprocess=t.fieldsIgnoredInSync=void 0;const a=["count_index","imported","shared_folders","duplicates","collection_timestamps","autoCleaned","autocompleted","hasUpdates","updated","journal_checked","attachments","cCount","cExpanded","cHidden","gdrive_needs_sync","pub_trashed","subfolders","hasUpdates","md5s","beta","changes_largestChange","gdrive_largestChangeId","gdrive_lock","google_access_token","google_id","google_refresh_token","is_beta_user","labs_user","last_active","new_features_notification","site_email","site_verified_date","site"];t.fieldsIgnoredInSync=a;t.preprocess=e=>{const t=i(e),r=new Set,a=[];for(const i of e){if(!("mcollection"in i)){a.push(i);continue}const{action:e,fields:c}=i,u=n(i);for(const d of Array.isArray(i.id)?i.id:[i.id])if(!("insert"===e&&t[d].remove||"remove"===e&&t[d].insert||"update"===e&&t[d].remove||"update"===e&&t[d].insert))if("update"!==e)r.has(d)||(r.add(d),a.push({...i,id:d}));else{if(c&&1===c.length&&("labels"===c[0]||"folders"===c[0])){a.push({...i,id:d});continue}let e=!0;for(const r of c||[]){var o,s,l;if("labels"===r||"folders"===r)continue;const a=null===(o=t[d])||void 0===o||null===(s=o.update)||void 0===s||null===(l=s.other)||void 0===l?void 0:l[r];if(a){const t=a.slice(-1)[0];u<n(t)||(e=!1)}else e=!1}e||a.push({...i,id:d})}}return a};t.preprocessCollections=e=>{const t=i(e),r=[];for(const i of e){if(!i)continue;if(!("mcollection"in i)){r.push(i);continue}const{mcollection:e,action:o,fields:s}=i,l=null==s?void 0:s[0],c=i.pull?"pull":"push",u=i[c];if("Library"!==e||"update"!==o||"labels"!==l&&"folders"!==l||!u)r.push(i);else for(const e of Array.isArray(i.id)?i.id:[i.id]){var a;const o=null===(a=t[e].update)||void 0===a?void 0:a[l];if(!o){r.push(i);continue}const s=[];for(const e of u){let r=[];if(o.pull&&o.pull[e]&&(r=r.concat(o.pull[e])),o.push&&o.push[e]&&(r=r.concat(o.push[e])),r=r.filter(e=>i._id!==e._id),t[e]&&t[e].remove)continue;if(!r.length){s.push(e);continue}const a=n(r.slice(-1)[0]);i.timestamp>a&&s.push(e)}s.length&&r.push({...i,id:e,[c]:s})}}return r};t.ignoreFields=(e,t)=>{const r=JSON.parse(JSON.stringify(e));let i=a;"Collections"===t&&(i=[...i,"title","type"]);for(const e of Object.keys(r))"string"==typeof e&&(i.includes(e)&&delete r[e],e.match(/^_/g)&&"_id"!==e&&delete r[e]);const n=["author","editor","series_editor","contributor","translator"];if(n.some(e=>Array.isArray(r[e]))){const e=r;for(const t of n)if(Array.isArray(e[t]))for(const r of e[t]||[])delete r._id}return r};const i=e=>{const t={},r=e.slice();r.sort((e,t)=>n(e)-n(t));for(const e of r){if(!("mcollection"in e))continue;const{action:r,fields:a}=e;for(const i of Array.isArray(e.id)?e.id:[e.id]){const n=t[i]||(t[i]={});if("insert"!==r&&"remove"!==r){if("update"===r){const t=n[r]||(n[r]={});for(const r of a||[])if("labels"!==r&&"folders"!==r){const a=t.other||(t.other={});(a[r]||(a[r]=[])).push(e)}else{const a=e.pull?"pull":"push",i=e[a];if(!i)continue;const n=t[r]||(t[r]={}),o=n[a]||(n[a]={});for(const t of i){(o[t]||(o[t]=[])).push(e)}}}}else{(n[r]||(n[r]=[])).push(e)}}}return t};t.createLookupHash=i;const n=e=>e.client_time?e.client_time:e.timestamp},,,,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.browserActionClicked=t.setIcon=t.setDefaultIcon=t.setPopup=t.setPopupAllTabs=t.getPopup=t.browserAction=void 0;var i=a(r(47)),n=r(9),o=r(20),s=r(177),l=a(r(806)),c=r(46),u=r(95),d=r(42),p=a(r(29)),m=a(r(44)),h=r(55),g=r(389);const f={"no-access":"/dist-new/html/popup-noaccess.html","old-extension":"html/popup.html",unset:""},b=chrome&&chrome.action?chrome.action:chrome.browserAction;t.browserAction=b;t.getPopup=async e=>await new Promise(t=>b.getPopup({tabId:e},t));t.setPopupAllTabs=async()=>{chrome.tabs.query({},async e=>{for(const t of e)t.id&&(t.url&&!(0,n.isBlockedUrl)(t.url||"")||y("no-access",t.id))})};const y=async(e,t)=>{p.default.info("main",`Setting ${e} on tabId ${t}`),void 0!==t?await new Promise(r=>{b.setPopup({tabId:t,popup:f[e]},()=>{chrome.runtime.lastError&&((0,g.checkBrowserError)([g.CHROME_NO_TAB_WITH_ID,g.FIREFOX_INVALID_TAB,g.SAFARI_TAB_NOT_FOUND],chrome.runtime.lastError.message)?p.default.info("main","Error setting popup: "+chrome.runtime.lastError.message):p.default.error("main","Error setting popup: "+chrome.runtime.lastError.message)),r()})}):await new Promise(t=>{b.setPopup({popup:f[e]},()=>{chrome.runtime.lastError&&((0,g.checkBrowserError)([g.CHROME_NO_TAB_WITH_ID,g.FIREFOX_INVALID_TAB,g.SAFARI_TAB_NOT_FOUND],chrome.runtime.lastError.message)?p.default.info("main","Error setting popup: "+chrome.runtime.lastError.message):p.default.error("main","Error setting popup: "+chrome.runtime.lastError.message))}),t()})};t.setPopup=y;const v=e=>chrome.runtime.getURL(e),_=async()=>{let e="light";if(window&&"function"==typeof window.matchMedia){window.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark")}return e},w={light:{ready:{19:v("images/icon-light-ready-19.png"),38:v("images/icon-light-ready-38.png")},autocompleted:{19:v("images/icon-light-ready-19.png"),38:v("images/icon-light-ready-38.png")},imported:{19:v("images/icon-light-imported-19.png"),38:v("images/icon-light-imported-38.png")},default:{19:v("images/icon-light-default-19.png"),38:v("images/icon-light-default-38.png")},signedout:{19:v("images/icon-light-signedout-19.png"),38:v("images/icon-light-signedout-38.png")}},dark:{ready:{19:v("images/icon-dark-ready-19.png"),38:v("images/icon-dark-ready-38.png")},autocompleted:{19:v("images/icon-dark-ready-19.png"),38:v("images/icon-dark-ready-38.png")},imported:{19:v("images/icon-dark-imported-19.png"),38:v("images/icon-dark-imported-38.png")},default:{19:v("images/icon-dark-default-19.png"),38:v("images/icon-dark-default-38.png")},signedout:{19:v("images/icon-dark-signedout-19.png"),38:v("images/icon-dark-signedout-38.png")}}};t.setDefaultIcon=async e=>{let t=e;t||(t=await _());const r={path:w[t].default};b.setIcon(r)};t.setIcon=async(e,t)=>{p.default.debug("browserAction",`Icon change for ${e} to ${t}`);const r=await _(),a={path:w[r][t]};null!==e&&(a.tabId=e),b.setIcon(a,()=>{chrome.runtime.lastError&&((0,g.checkBrowserError)([g.CHROME_NO_TAB_WITH_ID,g.FIREFOX_INVALID_TAB,g.SAFARI_TAB_NOT_FOUND],chrome.runtime.lastError.message)?p.default.info("main","Error setting icon: "+chrome.runtime.lastError.message):p.default.error("main","Error setting icon: "+chrome.runtime.lastError.message))})};t.browserActionClicked=async e=>{var t;p.default.info("browserAction","Clicked icon",e);if(!await(0,c.checkExtensionPermissions)())return void(0,c.openWebapp)({type:"permissions"});if((0,l.default)("browserActionIcon click",0),null==e||!e.id||!e.url)return;let r=await i.default.cs.execute("popup.utils.checkPopupConnection",e.id);if(e.id in s.injectionTracker&&s.injectionTracker[e.id]>=Date.now()-3e3){let t=0;for(;!r&&t<3e3;)p.default.debug("browserAction","Waiting 250 ms."),await(0,h.sleep)(250),t+=250,r=await i.default.cs.execute("popup.utils.checkPopupConnection",e.id)}const a=await i.default.cs.execute("popup.popup-helpers.isSelecting",e.id),g=await i.default.cs.execute("popup.popup-helpers.isImporting",e.id);if((0,c.togglePopup)(e.id),null!=g&&g.result)return;const f=await i.default.cs.execute("render.isPdfsDownloadDone",e.id);if(null!=a&&a.result||null!=f&&f.result)return void i.default.cs.execute("webimport.clearAll",e.id);if((0,n.isNewWebAppTab)(e.url))return;if((0,n.isBlockedUrl)(e.url))return void y("no-access",e.id);if((0,n.isFileUrl)(e.url))return void(0,s.handleFileInjection)({tab:e,eventType:"click"});if((0,n.isCiteSupported)(e.url))return void(r&&"alive"===r.result||await(0,s.initInjections)(e,{popup:!0,webimport:!1,cite:!1},{reason:"click"}));if(!m.default.forLibrary().getIsInitialized()&&r)return;const b=(0,u.isSupportedPage)({url:e.url});if(!(null!=b&&b.supported||r)){const t=await i.default.cs.execute("webimport.checkWebimportConnection",e.id),r=await i.default.cs.execute("cite.checkCiteConnection",e.id);return void await(0,s.initInjections)(e,{popup:!0,webimport:!!t,cite:!!r},{reason:"click"})}if(!r)return void await(0,s.initInjections)(e,{popup:!0,webimport:!1,cite:!1},{reason:"click"});if(!await(0,d.getUserFromDb)())return;const v=null===(t=(await(0,c.isWebimportSupported)({url:e.url})).target)||void 0===t?void 0:t.driver;null!=b&&b.supported&&v?await i.default.cs.execute("render.triggerImport",e.id):(null==b||!b.supported)&&v||e.url.indexOf(o.PLACK_URL)>-1||(0,n.isNewWebAppTab)(e.url)||(0,n.isAdhocSharingPage)(e.url)||(null!=b&&b.autoComplete||null==b||!b.supported||!r?r&&(null!=b&&b.autoComplete||null!=b&&b.supported?await i.default.cs.execute("render.triggerImport",e.id,{autoCompleteOnLoad:null==b?void 0:b.autoComplete}):i.default.cs.execute("popup.readHtmlAndAutocomplete",e.id,{forAutocomplete:!1})):i.default.cs.execute("popup.readHtmlAndAutocomplete",e.id,{forAutocomplete:!0}))}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.errorToPaperpileError=t.default=void 0;var i=a(r(33)),n=a(r(54));class o extends i.default{constructor(e,t){super("PaperpileError",e.key,e,t)}}t.default=o;t.errorToPaperpileError=(e,t)=>e instanceof n.default?e:new o(t,{cause:e})},function(e,t,r){"use strict";var a=r(2),i=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=void 0;var n=i(r(93)),o=a(r(54));t.fetch=async(e,t)=>{let r;try{r=await globalThis.fetch(e,t)}catch(r){if((0,o.isOfflineError)(r))throw new o.default({method:(null==t?void 0:t.method)||"GET",url:"string"==typeof e?e:e.url},{cause:r});throw r}const a=204===r.status?{}:await r.json();if(a&&"object"==typeof a&&"error"in a)throw new n.default(a.error);return{json:a,response:r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"convertNewStyleFile",{enumerable:!0,get:function(){return a.convertNewStyleFile}}),Object.defineProperty(t,"convertNewStyleId",{enumerable:!0,get:function(){return a.convertNewStyleId}}),Object.defineProperty(t,"convertOldStyleId",{enumerable:!0,get:function(){return a.convertOldStyleId}}),Object.defineProperty(t,"convertStyleIdToBaseId",{enumerable:!0,get:function(){return a.convertStyleIdToBaseId}}),Object.defineProperty(t,"customStyleFileToOriginalFile",{enumerable:!0,get:function(){return a.customStyleFileToOriginalFile}}),Object.defineProperty(t,"isCustomStyleFile",{enumerable:!0,get:function(){return a.isCustomStyleFile}}),Object.defineProperty(t,"prepareSearchStyleList",{enumerable:!0,get:function(){return a.prepareSearchStyleList}}),Object.defineProperty(t,"searchStyleList",{enumerable:!0,get:function(){return a.searchStyleList}}),Object.defineProperty(t,"sortStyles",{enumerable:!0,get:function(){return a.sortStyles}});var a=r(224)},function(e,t,r){"use strict";var a=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.ppUtils=t.ppString=t.ppDOMPurify=void 0;var i=a(r(130));t.ppDOMPurify=i;var n=a(r(18));t.ppString=n;var o=a(r(32));t.ppUtils=o},,,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(76));const n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={transferables:{},data:e};if(!e)return a;if(!r&&!(0,i.default)(e))return a;for(const[r,i]of Object.entries(e)){const o=`${t}.${r}`;if(i instanceof File)a.transferables[o]={type:"file",bufferOrString:await new Response(i).arrayBuffer(),fileName:i.name},delete a.data[r];else if(i instanceof Blob)a.transferables[o]={type:"blob",bufferOrString:await new Response(i).arrayBuffer()},delete a.data[r];else if(i instanceof ArrayBuffer)a.transferables[o]={type:"arrayBuffer",bufferOrString:i},delete a.data[r];else if(Array.isArray(i)){a.data[r]=[];for(const[e,t]of i.entries()){const i=await n({[e]:t},o+"[]",!0);a.transferables={...a.transferables,...i.transferables},a.data[r][e]=i.data[e]}}else if("object"==typeof e[r]){const t=await n(e[r],o,!0);a.transferables={...a.transferables,...t.transferables},a.data[r]=t.data}}return a};var o=n;t.default=o},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(76));const n=e=>{const t=new FileReader;return t.readAsDataURL(e),new Promise(e=>{t.addEventListener("load",()=>{e(t.result)})})},o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={transferables:{},data:e};if(!e)return a;if(!r&&!(0,i.default)(e))return a;a.data={...e};for(const[r,i]of Object.entries(e)){const e=`${t}.${r}`;if(i instanceof File)a.transferables[e]={type:"file",bufferOrString:await n(i),fileName:i.name},delete a.data[r];else if(i instanceof Blob)a.transferables[e]={type:"blob",bufferOrString:await n(i)},delete a.data[r];else if(i instanceof ArrayBuffer)a.transferables[e]={type:"arrayBuffer",bufferOrString:await n(new Blob([i]))},delete a.data[r];else if(Array.isArray(i)){a.data[r]=[];for(const[t,n]of i.entries()){const i=await o({[t]:n},e+"[]",!0);a.transferables={...a.transferables,...i.transferables},a.data[r][t]=i.data[t]}}else if("object"==typeof i){const t=await o(i,e,!0);a.transferables={...a.transferables,...t.transferables},a.data[r]=t.data}}return a};var s=o;t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const a=async e=>await fetch(e).then(e=>e.blob());var i=async e=>{if(!e||!e.data)return;const{data:t}=e;for(const i of Object.keys(e.transferables||{})){var r;const n=null===(r=e.transferables)||void 0===r?void 0:r[i];if(!n)continue;const o=i.split(".").filter(e=>""!==e);let s=t;for(const[e,t]of o.entries()){const r=t.endsWith("[]")?t.substr(0,t.length-2):t,i=Array.isArray(s)?Number.parseInt(r,10):r;if(e!==o.length-1)s[i]||(s[i]=t.endsWith("[]")?[]:{}),s=s[i];else{const e="string"==typeof n.bufferOrString?await a(n.bufferOrString):n.bufferOrString;switch(n.type){case"file":s[i]=new File([e],n.fileName);break;case"blob":s[i]=e instanceof Blob?e:new Blob([e]);break;case"arrayBuffer":s[i]=e instanceof Blob?await e.arrayBuffer():e;break;default:throw new Error(`Unexpected transferable type "${n.type}"`)}}}}return t};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=e=>Object.values(e.transferables).map(e=>e.bufferOrString);t.default=a},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(33));class n extends i.default{constructor(e,t,r){super("AnyExtraError",e,t,r)}}t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExtensionProtocol=t.detectBrowser=void 0;t.detectBrowser=()=>{const e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":-1!==e.indexOf("safari")?e.indexOf("chrome")>-1?"chrome":"safari":"chrome"};t.getExtensionProtocol=e=>{let t="chrome-extension";return"firefox"===e?t="moz-extension":"safari"===e&&(t="safari-web-extension"),t}},,,,,,,,,function(e,t,r){"use strict";var a=r(2),i=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(0)),o=a(r(6));const s=o.keyframes`
  0% {
    transform: translateY(-25px);
  }
  40% {
    transform: translateY(0);
  }
  60% {
    transform: translateY(0);
  }
  100% {
    transform: translateY(50px);
  }
`,l=o.default.svg`
  path {
    animation: ${s} 1.5s ease-out 0s infinite normal;
  }
`;var c=e=>{let{className:t,size:r}=e;return n.default.createElement(l,{className:t,width:r,height:r,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("path",{d:"M10.707 16.706c-.39.39-1.025.39-1.416 0l-5-5a.996.996 0 01-.216-1.09A1 1 0 015 9.996h3v-5.75c0-.69.56-1.25 1.25-1.25h1.5c.691 0 1.25.56 1.25 1.25v5.75h3a1.004 1.004 0 01.71 1.71l-5 5h-.003z"}))};t.default=c},function(e,t,r){"use strict";var a=r(2),i=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(0)),o=a(r(6));const s=o.keyframes`
  0% {
    opacity: 0.4;
  }
  66% {
    opacity: 1;
  }
`,l=o.default.svg`
  path {
    animation: ${s} 1s linear 0s infinite normal;

    &:nth-child(1) {
      animation-delay: 0.3s;
    }
    &:nth-child(2) {
      animation-delay: 0.6s;
    }
  }
`;var c=e=>{let{className:t,size:r}=e;return n.default.createElement(l,{className:t,height:r,width:r,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("path",{d:"M5.89633 16.4039L8.41508 11.982H18.1182L15.5995 16.4039H5.89633Z"}),n.default.createElement("path",{d:"M7.04318 3.61071L9.60907 8.0054L4.74949 16.4039L2.1836 12.0092L7.04318 3.61071Z"}),n.default.createElement("path",{d:"M17.4156 11.2035L12.327 11.1519L7.61015 2.67238L12.6988 2.72397L17.4156 11.2035Z"}))};t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={borderRadius:4,breakpoints:{phone:576,tablet:768,desktop:1025,desktopLarge:1200},colors:r(165),fonts:{webapp:"Helvetica, Arial, sans-serif",system:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'},shadows:{level1:"0px 1px 3px rgba(0, 0, 0, 0.25)",level2:"0px 2px 4px rgba(0, 0, 0, 0.1), 0px 3px 6px rgba(0, 0, 0, 0.15)",level3:"0px 20px 40px rgba(0, 0, 0, 0.2)"}};t.default=a},function(e){e.exports=JSON.parse('{"warning":"Automatically generated by build.js. Do not edit.","light":{"labels":[{"background":"#EDEDED","border":"#BDBDBD","font":"#686868"},{"background":"#E0ECFF","border":"#206CFF","font":"#206CFF"},{"background":"#DFE2FF","border":"#0000CC","font":"#0000CC"},{"background":"#E0D5F9","border":"#5229A3","font":"#5229A3"},{"background":"#FDE9F4","border":"#854F61","font":"#854F61"},{"background":"#FFE3E3","border":"#CC0000","font":"#CC0000"},{"background":"#5A6986","border":"#5A6986","font":"#DEE5F2"},{"background":"#206CFF","border":"#206CFF","font":"#E0ECFF"},{"background":"#0000CC","border":"#0000CC","font":"#DFE2FF"},{"background":"#5229A3","border":"#5229A3","font":"#E0D5F9"},{"background":"#854F61","border":"#854F61","font":"#FDE9F4"},{"background":"#CC0000","border":"#CC0000","font":"#FFE3E3"},{"background":"#FFF0E1","border":"#EC7000","font":"#EC7000"},{"background":"#FADCB3","border":"#B36D00","font":"#B36D00"},{"background":"#F3E7B3","border":"#AB8B00","font":"#AB8B00"},{"background":"#FFFFD4","border":"#636330","font":"#636330"},{"background":"#F9FFEF","border":"#64992C","font":"#64992C"},{"background":"#F1F5EC","border":"#006633","font":"#006633"},{"background":"#EC7000","border":"#EC7000","font":"#FFF0E1"},{"background":"#B36D00","border":"#B36D00","font":"#FADCB3"},{"background":"#AB8B00","border":"#AB8B00","font":"#F3E7B3"},{"background":"#636330","border":"#636330","font":"#FFFFD4"},{"background":"#64992C","border":"#64992C","font":"#F9FFEF"},{"background":"#006633","border":"#006633","font":"#F1F5EC"},{"background":"#DEE5F2","border":"#8D8D8D","font":"#5A6986"}],"blue":{"0":"#F6FAFD","100":"#DDEBF8","200":"#ADCCEB","300":"#9BC2E8","400":"#7BAEE0","500":"#5998DA","600":"#3B84D2","700":"#2F69A3","800":"#29598C","900":"#234A73"},"gray":{"0":"#FFFFFF","100":"#F7F7F7","200":"#E8E8E9","300":"#DEDEDE","400":"#B8BCBE","500":"#8A9096","600":"#63696E","700":"#54585C","800":"#45494C","900":"#37393C"},"green":{"0":"#C4C4C4","100":"#ADE8D2","200":"#C4C4C4","300":"#5CD1A5","400":"#C4C4C4","500":"#21BA79","600":"#C4C4C4","700":"#238F5C","800":"#C4C4C4","900":"#175E3F"},"red":{"0":"#FEF6F6","100":"#F8C7C5","200":"#C4C4C4","300":"#F28C8C","400":"#F07675","500":"#EC5553","600":"#CF4543","700":"#A03133","800":"#C4C4C4","900":"#6B2123"},"yellow":{"0":"#C4C4C4","100":"#FFFACB","200":"#C4C4C4","300":"#FEF599","400":"#C4C4C4","500":"#FEEE6C","600":"#C4C4C4","700":"#CEB74C","800":"#C4C4C4","900":"#897A31"}},"dark":{"labels":[{"background":"#EDEDED","border":"#BDBDBD","font":"#686868"},{"background":"#E0ECFF","border":"#206CFF","font":"#206CFF"},{"background":"#DFE2FF","border":"#0000CC","font":"#0000CC"},{"background":"#E0D5F9","border":"#5229A3","font":"#5229A3"},{"background":"#FDE9F4","border":"#854F61","font":"#854F61"},{"background":"#FFE3E3","border":"#CC0000","font":"#CC0000"},{"background":"#5A6986","border":"#5A6986","font":"#DEE5F2"},{"background":"#206CFF","border":"#206CFF","font":"#E0ECFF"},{"background":"#0000CC","border":"#0000CC","font":"#DFE2FF"},{"background":"#5229A3","border":"#5229A3","font":"#E0D5F9"},{"background":"#854F61","border":"#854F61","font":"#FDE9F4"},{"background":"#CC0000","border":"#CC0000","font":"#FFE3E3"},{"background":"#FFF0E1","border":"#EC7000","font":"#EC7000"},{"background":"#FADCB3","border":"#B36D00","font":"#B36D00"},{"background":"#F3E7B3","border":"#AB8B00","font":"#AB8B00"},{"background":"#FFFFD4","border":"#636330","font":"#636330"},{"background":"#F9FFEF","border":"#64992C","font":"#64992C"},{"background":"#F1F5EC","border":"#006633","font":"#006633"},{"background":"#EC7000","border":"#EC7000","font":"#FFF0E1"},{"background":"#B36D00","border":"#B36D00","font":"#FADCB3"},{"background":"#AB8B00","border":"#AB8B00","font":"#F3E7B3"},{"background":"#636330","border":"#636330","font":"#FFFFD4"},{"background":"#64992C","border":"#64992C","font":"#F9FFEF"},{"background":"#006633","border":"#006633","font":"#F1F5EC"},{"background":"#DEE5F2","border":"#8D8D8D","font":"#5A6986"}],"blue":{"0":"#F6FAFD","100":"#DDEBF8","200":"#ADCCEB","300":"#9BC2E8","400":"#7BAEE0","500":"#3786DA","600":"#3B84D2","700":"#2F69A3","800":"#29598C","900":"#234A73"},"gray":{"0":"#F9F8F8","100":"#F4F4F4","200":"#CCCCCC","300":"#8F918F","400":"#787878","500":"#5E5E5E","600":"#454545","700":"#3D3D3D","800":"#353535","900":"#292929"},"green":{"0":"#FFFFFF","100":"#ADE8D2","200":"#C4C4C4","300":"#5CD1A6","400":"#C4C4C4","500":"#09BA6F","600":"#C4C4C4","700":"#238F5C","800":"#C4C4C4","900":"#175E3F"},"red":{"0":"#FEF6F6","100":"#FFDDDB","200":"#C4C4C4","300":"#F28C8C","400":"#F06160","500":"#EC322F","600":"#C4C4C4","700":"#A03133","800":"#C4C4C4","900":"#6B2123"},"yellow":{"0":"#FFFFFF","100":"#FFFACB","200":"#C4C4C4","300":"#FEF599","400":"#C4C4C4","500":"#FEE940","600":"#C4C4C4","700":"#CEB74C","800":"#C4C4C4","900":"#897A31"}}}')},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(167)),n=a(r(168));var o={colors:i.default,effects:{mask:"background: rgba(0, 0, 0, 0.4);",shadows:{level1:"0px 1px 5px rgba(0, 0, 0, 0.1)",level2:"0px 3px 10px rgba(0, 0, 0, 0.1)"}},labels:n.default};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={light:{red:{0:"#FEF6F6",100:"#FCE5E4",300:"#F28C8C",400:"#F07675",500:"#EC5553",600:"#CF4543",700:"#A03133",900:"#6B2123"},yellow:{0:"#FFFEF5",100:"#F9FAD1",300:"#F1F293",500:"#DFDF71",600:"#D4D543",700:"#BBBC2A",900:"#5F6015"},green:{0:"#F7FDFB",100:"#DFF6EE",300:"#ADE8D2",500:"#56E1A6",600:"#2BD98F",700:"#1FAD71",800:"#178255",900:"#175E3F"},blue:{0:"#F6FAFD",50:"#F2F7FD",100:"#DDEBF8",200:"#ADCCEB",300:"#9BC2E8",400:"#7BAEE0",500:"#5998DA",600:"#3B84D2",700:"#2F69A3",800:"#29598C",900:"#234A73"},gray:{0:"#FFFFFF",100:"#F7F7F7",200:"#E8E8E9",300:"#DEDEDE",400:"#B8BCBE",500:"#8A9096",600:"#63696E",700:"#54585C",800:"#45494C",900:"#37393C"},purple:{0:"#FBF6FD",50:"#F9F2FD",100:"#EFDDF8",200:"#D6ADEB",300:"#CE9BE8",400:"#BE7BE0",500:"#AF59DA",600:"#A23BD2",700:"#7C2FA3",800:"#6B298C",900:"#582373"},orange:{0:"#FFF7EF",100:"#FDE9D8",200:"#FFDEC1",300:"#FEC28B",400:"#FDA85B",500:"#FE8920",600:"#EC7000",700:"#C35C00",800:"#9C4A00",900:"#7E3C00"}},dark:{red:{0:"#FEF6F6",100:"#FFDDDB",300:"#F28C8C",400:"#F06160",500:"#EC322F",700:"#A03133",900:"#6B2123"},yellow:{0:"#FFFFFF",100:"#FFFACB",300:"#FEF599",500:"#FEE940",700:"#CEB74C",900:"#897A31"},green:{0:"#FFFFFF",100:"#ADE8D2",300:"#5CD1A6",500:"#09BA6F",700:"#238F5C",900:"#175E3F"},blue:{0:"#F6FAFD",100:"#DDEBF8",200:"#ADCCEB",300:"#9BC2E8",400:"#7BAEE0",500:"#3786DA",600:"#3B84D2",700:"#2F69A3",800:"#29598C",900:"#234A73"},gray:{0:"#F9F8F8",100:"#F4F4F4",200:"#CCCCCC",300:"#8F918F",400:"#787878",500:"#5E5E5E",600:"#454545",700:"#3D3D3D",800:"#353535",900:"#292929"},orange:{0:"#FFF7EF",100:"#FDE9D8",200:"#FFDEC1",300:"#FEC28B",400:"#FDA85B",500:"#FE8920",600:"#EC7000",700:"#C35C00",800:"#9C4A00",900:"#7E3C00"},purple:{0:"#FBF6FD",100:"#EFDDF8",200:"#D6ADEB",300:"#CE9BE8",400:"#BE7BE0",500:"#AF59DA",600:"#A23BD2",700:"#7C2FA3",800:"#6B298C",900:"#582373"}},white:"#FFFFFF",black:"#000000"};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={0:{backgroundColor:"#EDEDED",borderColor:"#BDBDBD",color:"#686868"},1:{backgroundColor:"#E0ECFF",borderColor:"#206CFF",color:"#206CFF"},2:{backgroundColor:"#DFE2FF",borderColor:"#0000CC",color:"#0000CC"},3:{backgroundColor:"#E0D5F9",borderColor:"#5229A3",color:"#5229A3"},4:{backgroundColor:"#FDE9F4",borderColor:"#854F61",color:"#854F61"},5:{backgroundColor:"#FFE3E3",borderColor:"#CC0000",color:"#CC0000"},6:{backgroundColor:"#5A6986",borderColor:"#5A6986",color:"#DEE5F2"},7:{backgroundColor:"#206CFF",borderColor:"#206CFF",color:"#E0ECFF"},8:{backgroundColor:"#0000CC",borderColor:"#0000CC",color:"#DFE2FF"},9:{backgroundColor:"#5229A3",borderColor:"#5229A3",color:"#E0D5F9"},10:{backgroundColor:"#854F61",borderColor:"#854F61",color:"#FDE9F4"},11:{backgroundColor:"#CC0000",borderColor:"#CC0000",color:"#FFE3E3"},12:{backgroundColor:"#FFF0E1",borderColor:"#EC7000",color:"#EC7000"},13:{backgroundColor:"#FADCB3",borderColor:"#B36D00",color:"#B36D00"},14:{backgroundColor:"#F3E7B3",borderColor:"#AB8B00",color:"#AB8B00"},15:{backgroundColor:"#FFFFD4",borderColor:"#636330",color:"#636330"},16:{backgroundColor:"#F9FFEF",borderColor:"#64992C",color:"#64992C"},17:{backgroundColor:"#F1F5EC",borderColor:"#006633",color:"#006633"},18:{backgroundColor:"#EC7000",borderColor:"#EC7000",color:"#FFF0E1"},19:{backgroundColor:"#B36D00",borderColor:"#B36D00",color:"#FADCB3"},20:{backgroundColor:"#AB8B00",borderColor:"#AB8B00",color:"#F3E7B3"},21:{backgroundColor:"#636330",borderColor:"#636330",color:"#FFFFD4"},22:{backgroundColor:"#64992C",borderColor:"#64992C",color:"#F9FFEF"},23:{backgroundColor:"#006633",borderColor:"#006633",color:"#F1F5EC"},24:{backgroundColor:"#DEE5F2",borderColor:"#5A6986",color:"#5A6986"}};t.default=a},,,,function(e,t,r){"use strict";var a=r(2),i=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AnimatedSvg=void 0;var n=i(r(0)),o=a(r(6)),s=i(r(80));const l=o.keyframes`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,c=o.default.svg`
  animation: ${l} 0.8s linear 0s infinite normal;
`;t.AnimatedSvg=c;const u=o.default.path`
  fill: ${e=>{let{styleName:t}=e;return s.default[t].backColor}};
`,d=o.default.path`
  fill: ${e=>{let{styleName:t}=e;return s.default[t].foreColor}};
`;var p=e=>{let{size:t,styleName:r}=e;return n.default.createElement(c,{width:t,height:t,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement(u,{styleName:r,fillRule:"evenodd",clipRule:"evenodd",d:"M11.1868 4.82289L13.6617 2.34805C12.2136 0.897452 10.2116 0 7.99995 0C3.5817 0 0 3.58172 0 8C0 12.4183 3.5817 16 7.99995 16C10.2116 16 12.2136 15.1025 13.6617 13.6519L11.1868 11.1771C10.3721 11.9943 9.24512 12.5 8 12.5C5.51472 12.5 3.5 10.4853 3.5 8C3.5 5.51472 5.51472 3.5 8 3.5C9.24511 3.5 10.3721 4.00569 11.1868 4.82289Z"}),n.default.createElement(d,{styleName:r,fillRule:"evenodd",clipRule:"evenodd",d:"M16.0001 8.00009C16.0001 10.2067 15.1067 12.2047 13.6619 13.652L11.187 11.1771C11.9984 10.3632 12.5 9.24024 12.5 8.00015C12.5 6.76003 11.9984 5.63707 11.1869 4.82312L13.6619 2.34814C15.1067 3.79547 16.0001 5.79345 16.0001 8.00009Z"}))};t.default=p},function(e,t,r){"use strict";var a=r(2),i=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ForegroundCircle=t.BackgroundCircle=void 0;var n=i(r(27)),o=i(r(0)),s=a(r(6)),l=i(r(80));const c=s.default.circle`
  ${e=>{let{percent:t}=e;return s.css`
    ${t?`stroke-dashoffset: ${t};`:""}
    transition: stroke-dashoffset 0.35s;
    transform: rotate(-90deg);
    transform-origin: 50% 50%;
  `}}
`,u=(0,s.default)(c)`
  stroke: ${e=>{let{styleName:t}=e;return l.default[t].backColor}};
`;t.BackgroundCircle=u;const d=(0,s.default)(c)`
  stroke: ${e=>{let{styleName:t}=e;return l.default[t].foreColor}};
`;t.ForegroundCircle=d;var p=e=>{let{styleName:t,size:r,percentDone:a,strokeOffset:i=0}=e;const s=3/14*16-i,l=8-s/2,c=2*l*Math.PI,p=c-(a||0)/100*c,m={strokeDasharray:`${c} ${c}`,strokeWidth:s,fill:"transparent",r:l,cx:8,cy:8};return o.default.createElement("svg",{viewBox:"0 0 16 16",height:r,width:r},o.default.createElement(u,(0,n.default)({styleName:t},m)),o.default.createElement(d,(0,n.default)({styleName:t,percent:p},m)))};t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isbn10To13=t.isISBN13=t.isISBN10=t.extractISBNs=void 0;t.extractISBNs=(e,t)=>{const r=[];for(let o of e.split(/[^\dxX-]/))if(o.length>1)if(null!=t&&t.normalize&&(o=o.toUpperCase().replace(/-/g,"")),a(o))if(null!=t&&t.convert){const e=n(o);13===e.length&&r.push(e)}else r.push(o);else i(o)&&r.push(o);return null!=t&&t.unique?[...new Set(r)]:r};const a=e=>{const t=e.toUpperCase().replace(/[\n\r\t\s-]+/g,"");if(/^\d{9}[\dX]$/.test(t)){let e=0;for(let r=0;r<=8;r+=1)e+=parseInt(t.charAt(r),10)*(r+1);return e+=10*("X"===t.charAt(9)?10:parseInt(t.charAt(9),10)),e%11==0}return!1};t.isISBN10=a;const i=e=>{const t=e.toUpperCase().replace(/[\n\r\t\s-]+/g,"");if(/^978\d{10}$/.test(t)){let e=0;for(let r=0;r<=11;r+=1)e+=r%2==0?parseInt(t.charAt(r),10):3*parseInt(t.charAt(r),10);if(e=(10-e%10)%10,parseInt(t.charAt(12),10)===e)return!0}return!1};t.isISBN13=i;const n=e=>{if(10!==e.length)return"";if(!a(e))return"";let t=38;for(let r=0;r<=8;r+=1)t+=r%2==0?3*parseInt(e.charAt(r),10):parseInt(e.charAt(r),10);const r=(10-t%10)%10;return`978${e.substring(0,9)}${r}`};t.isbn10To13=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"initialize",{enumerable:!0,get:function(){return o.initialize}}),Object.defineProperty(t,"info",{enumerable:!0,get:function(){return l.info}}),Object.defineProperty(t,"getDriversByMode",{enumerable:!0,get:function(){return l.getDriversByMode}}),t.default=t.crawlDirectPdf=void 0;var i=r(4),n=r(114),o=r(5),s=a(r(611)),l=r(448);t.crawlDirectPdf=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,o.isInitialized)())throw new i.CrawlerException("Not initialized, call initialize() before running crawlDirectPdf()");const r=new s.default({...t,mode:"PDF"});r.crawlerState.messageReporter.log("Crawling direct PDF URL: "+e,"info");const a=await r.crawlDirectPdf(e);return a.isOk()?a:(0,n.err)(r.formatEncounteredErrors())};var c=async(e,t)=>{if(!(0,o.isInitialized)())throw new i.CrawlerException("Not initialized, call initialize() before running crawl()");const r=new s.default(t),a=await r.crawl(e);return a.isOk()?a:(0,n.err)(r.formatEncounteredErrors())};t.default=c},,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.handleFileInjection=t.reinject=t.decideWhatToInjectAndInitInjections=t.initInjections=t.shouldInjectCite=t.injectContentScripts=t.testCSInjection=t.injectionTracker=void 0;var i=a(r(47)),n=r(9),o=r(42),s=r(46),l=r(95),c=r(100),u=r(138),d=a(r(29)),p=r(436),m=r(389);const h="/dist-new",g={popup:{path:h+"/cs-popup.js"},clear:{path:h+"/cs-clear.js"},webimport:{path:h+"/cs-webimport.js"},cite:{path:h+"/pp-write.js"},citeNotification:{path:h+"/cs-cite-notification.js"},webapp:{path:h+"/cs-webapp.js"}},f={};t.injectionTracker=f;const b=e=>{self.PP_CS_INITIAL_DATA=e},y=()=>{self.PP_INJECTION_TEST=!0},v=()=>{if(document){return!!document.getElementById("pp-injected")}return!1};t.testCSInjection=async e=>{if(!chrome.scripting)return!1;return await new Promise(t=>{chrome.scripting.executeScript({target:{tabId:e},injectImmediately:!0,func:y,args:[]},()=>{chrome.runtime.lastError&&t(!1),t(!0)})})};const _=async(e,t,r)=>{for(const a of Object.keys(t)){if(!t[a])continue;const i=g[a].path;if(chrome.scripting&&chrome.scripting.executeScript){let t={reason:"auto",...await(0,o.getAllUserData)({tabId:e}),...r||{}};0,chrome.scripting.executeScript({target:{tabId:e},injectImmediately:!0,func:b,args:[t]},async()=>{if(chrome.runtime.lastError){const t=chrome.runtime.lastError.message||"error";if((0,m.checkBrowserError)([m.CHROME_POLICY_ERROR,m.CHROME_DIFFERENT_EXTENSION,m.CHROME_CANNOT_CHROME_URL,m.CHROME_ERROR_PAGE,m.CHROME_FILE_ACCESS,m.EDGE_EXTENSION_GALLERY,m.FIREFOX_MISSING_HOST_PERMISSION,m.SAFARI_CANNOT_ACCESS],t))(0,u.setPopup)("no-access",e);else if((0,m.checkBrowserError)([m.CHROME_NO_TAB_WITH_ID,m.CHROME_FRAME_ID_0,m.FIREFOX_INVALID_TAB,m.SAFARI_TAB_NOT_FOUND,m.FIREFOX_UNEXPECTED_ERROR],t));else if((0,m.checkBrowserError)(m.CHROME_CANNOT_ACCESS_CONTENTS,t));else{let r=t;if(e){r+=" - "+await(0,c.getTabUrl)(e)}d.default.error("injection",new Error(r))}}else{const t="click"===(null==r?void 0:r.reason);chrome.scripting.executeScript({files:[i],injectImmediately:t,target:{tabId:e}},async()=>{if(chrome.runtime.lastError){const t=chrome.runtime.lastError.message||"error";if((0,m.checkBrowserError)([m.CHROME_POLICY_ERROR,m.CHROME_DIFFERENT_EXTENSION,m.CHROME_CANNOT_CHROME_URL,m.CHROME_ERROR_PAGE,m.CHROME_FILE_ACCESS,m.EDGE_EXTENSION_GALLERY,m.FIREFOX_MISSING_HOST_PERMISSION,m.SAFARI_CANNOT_ACCESS],t))(0,u.setPopup)("no-access",e);else if((0,m.checkBrowserError)([m.CHROME_NO_TAB_WITH_ID,m.CHROME_FRAME_ID_0,m.FIREFOX_INVALID_TAB,m.SAFARI_TAB_NOT_FOUND,m.FIREFOX_UNEXPECTED_ERROR],t));else if((0,m.checkBrowserError)(m.CHROME_CANNOT_ACCESS_CONTENTS,t)){let r=t;if(e){const t=await(0,c.getTab)(e);t&&t[0]&&(t[0].discarded||"unloaded"===t[0].status||(r+=` - ${t[0].url} ${t[0].status}`,d.default.error("injection",new Error(r))))}}else{let r=t;if(e){r+=" - "+await(0,c.getTabUrl)(e)}d.default.error("injection",new Error(r))}}})}}),"popup"===a&&(f[e]=Date.now()),/pp-write/.test(i)&&chrome.scripting.insertCSS&&chrome.scripting.insertCSS({files:[h+"/pp-write.css"],target:{tabId:e}},()=>{})}else{await(0,p.sessionStorageSetValue)("reason-injection",e.toString(),(null==r?void 0:r.reason)||"auto");const t="click"===(null==r?void 0:r.reason)?"document_start":"document_idle";chrome.tabs.executeScript(e,{file:i,runAt:t},()=>{chrome.runtime.lastError?(0,m.checkBrowserError)(m.CHROME_POLICY_ERROR,chrome.runtime.lastError.message)?(0,u.setPopup)("no-access",e):d.default.warn("injection",chrome.runtime.lastError.message):(d.default.debug("injection","Injected new "+i),/pp-write/.test(i)&&chrome.tabs.insertCSS&&chrome.tabs.insertCSS(e,{file:h+"/pp-write.css",runAt:"document_start"}))})}}},w=async(e,t,r)=>{e?await _(e,t,r):chrome.tabs.query({},async e=>{for(const a of e)"number"==typeof a.id&&await _(a.id,t,r)})};t.injectContentScripts=w;const P=async e=>{const t=await(0,o.getUserFromDb)();if(!t)return!1;const r="writing_injectDocsScripts";if(!t[r]||"0"===t[r])return!1;return!!(0,n.isCiteSupported)(e)};t.shouldInjectCite=P;const S=async(e,t,r)=>{if(!e)return;(await(0,s.checkExtensionPermissions)()||null!=r&&r.reason&&"click"===r.reason)&&(d.default.debug("injection","content-scripts to be injected:",t,(0,s.isNewExtensionEnabled)()),await w(e.id||0,t,r||{}))};t.initInjections=S;const C=async(e,t,r)=>{const{url:a}=t;if(!a||!e)return;if((0,n.isBlockedUrl)(a))return;if((0,n.isNewWebAppTab)(a))return;null!=r&&r.forceKillScripts&&(await i.default.cs.execute("webimport.terminateNewExtension",e),await i.default.cs.execute("popup.utils.terminateNewExtension",e));const o=await(async(e,t)=>{let r=await(0,p.sessionStorageGetValue)("tab-mode",e.toString());if(!r&&t.openerTabId){const a=await(0,p.sessionStorageGetValue)("tab-mode",t.openerTabId.toString());a&&(r=a,(0,p.sessionStorageSetValue)("tab-mode",e.toString(),a))}return!!r})(e,t),c=(0,l.isSupportedPage)({url:a}),u=await(0,s.isWebimportSupported)({url:a}),d=u.target,m=u.status,h=await P(a),g=await i.default.cs.execute(h?"cite.checkCiteConnection":"popup.utils.checkPopupConnection",e);if(h&&!g){if(await(async e=>!(!chrome.scripting||!chrome.scripting.executeScript)&&new Promise(t=>{chrome.scripting.executeScript({target:{tabId:e},injectImmediately:!0,func:v,args:[]},e=>{chrome.runtime.lastError?t(!1):e&&e[0]?t(e[0].result):t(!1)})}))(e))return void await S(t,{citeNotification:!0})}await S(t,{popup:(o||!(null==c||!c.supported)||!(null==d||!d.driver)||(null==r?void 0:r.filePage))&&!g,webimport:!(null==d||!d.driver||g||!m),cite:h&&!g&&!1},{autocompleteOnLoad:!(null==c||!c.autoComplete),websitePubtypeAllowed:!(null==c||!c.websitePubtypeAllowed),pdfInMetaSupported:!(null==c||!c.pdfInMetaSupported),webimportTarget:d,reason:(null==r?void 0:r.reason)||"auto"})};t.decideWhatToInjectAndInitInjections=C;t.reinject=e=>{chrome.tabs.get(e,async e=>{if(e&&e.url){const{url:r}=e;if(r&&(0,n.isBlockedUrl)(r)&&e.id)return;const a=(0,l.isSupportedPage)({url:r}),i=await(0,s.isWebimportSupported)({url:r}),c=i.target,d=i.status,p=await P(r);if(e.id){var t;const r=await(0,o.duplicateByTab)(e);null!=r&&null!==(t=r[0])&&void 0!==t&&t[0]?await(0,u.setIcon)(e.id,"imported"):(null!=a&&a.supported||null!=c&&c.driver)&&await(0,u.setIcon)(e.id,"ready")}if((0,n.isFileUrl)(e.url))return void A({tab:e,eventType:"reinject"});await S(e,{popup:!(null==a||!a.supported)||!(null==c||!c.driver),webimport:!(null==c||!c.driver||!d),cite:p},{autocompleteOnLoad:!(null==a||!a.autoComplete),websitePubtypeAllowed:!(null==a||!a.websitePubtypeAllowed),pdfInMetaSupported:!(null==a||!a.pdfInMetaSupported),webimportTarget:c,reason:"auto"})}})};const A=e=>{let{tab:t,eventType:r}=e;chrome.permissions.contains({origins:["file://*/"]},async e=>{e?chrome.extension.isAllowedFileSchemeAccess(async e=>{e&&t.id?(await(0,u.setIcon)(t.id,"ready"),"click"===r&&C(t.id,t,{forceKillScripts:!0,filePage:!0,reason:"click"})):(0,u.setPopup)("no-access",t.id)}):(0,u.setPopup)("no-access",t.id)})};t.handleFileInjection=A},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(48),o=a(r(248));t.default=class{constructor(e,t,r,a,n,o,s){(0,i.default)(this,"loggerLabel","queue"),this.n=1,this.fastlaneSlots=o||0,this.fastlaneMinPriority=s||1,this.currentlyRunning=!1,this.currentlyRunningTimestamp=null,this.isWaitingJobsRunScheduled=!1,this.model=e,this.remote=t,this.jobHandlers=r,this.logger=a,this.webappUrl=n||null}async init(e){this.logger.debug(this.loggerLabel,"Inited"),this.n=e.n||1,this.fastlaneSlots=e.fastlaneSlots||0,this.fastlaneMinPriority=e.fastlaneMinPriority||1,await this.executeOnStart()}async setModel(e){this.model=e}async checkStuckJobs(){const e=await this.model.getAll("Jobs")||[];for(const r of e){var t;if("running"===(null==r||null===(t=r.status)||void 0===t?void 0:t.currentStatus)){const e=Date.now();let t=e-(r.startDate||e);r.lastActive&&(t=e-r.lastActive),t>36e5&&(this.logger.error(this.loggerLabel,"Job stuck, restarting",r),await this.model.updateJob(r._id,{status:{...r.status,currentStatus:"waiting"}}))}}}async executeOnStart(){const e=await this.model.getAll("Jobs")||[];for(const r of e){var t;"running"===(null==r||null===(t=r.status)||void 0===t?void 0:t.currentStatus)&&await this.model.updateJob(r._id,{status:{...r.status,currentStatus:"waiting"}})}}async run(e){if(this.logger.info(this.loggerLabel,"Running: "+e,this.currentlyRunning),this.currentlyRunning){const e=3e4;if(!(this.currentlyRunningTimestamp&&Date.now()-this.currentlyRunningTimestamp>=e))return null;this.logger.error(this.loggerLabel,"Queue seems stuck, ignoring currentlyRunning lock.")}let t;this.currentlyRunning=!0,this.currentlyRunningTimestamp=Date.now();try{t=await this.model.getAll("Jobs")||[]}catch(e){return this.logger.error(this.loggerLabel,"Job storage not available.",e),this.currentlyRunning=!1,this.currentlyRunningTimestamp=null,null}const r=t.filter(e=>e.status&&"running"===e.status.currentStatus);if(r.length>=this.n)return this.currentlyRunning=!1,this.currentlyRunningTimestamp=null,null;const a=(0,o.default)(t,this.n,r.length,this.fastlaneSlots,this.fastlaneMinPriority);this.logger.info(this.loggerLabel,`Queue status: ${r.length} running | ${a.numberWaitingJobs} (waiting, able to run now) | ${a.numberAllWaitingJobs} (waiting total) | ${a.jobsToRun.length} will run now`);for(const e of a.jobsToRun){const t=this.jobHandlers[e.type];t&&t.func&&(await this.progress("running",{jobId:e._id,res:null},"",e),this.executeFunction(t.func,e,t.keepJobOnError))}return 0===a.jobsToRun.length&&a.numberAllWaitingJobs>0&&!this.isWaitingJobsRunScheduled&&(this.isWaitingJobsRunScheduled=!0,setTimeout(()=>{this.isWaitingJobsRunScheduled=!1,this.run("WAITING_JOBS")},5e3)),this.currentlyRunning=!1,this.currentlyRunningTimestamp=null,null}async executeFunction(e,t,r){let a;try{a=await e(t)}catch(e){return r||await this.progress("finished",null,"Error in executing backend function, "+e,t),void this.logger.error(this.loggerLabel,"Job handler execution error: ",t,e)}if(this.logger.debug(this.loggerLabel,"Job handler execution done: ",a,t),a||!r||t.timesMaxRun>-1&&t.timesRun+1>=t.timesMaxRun)await this.progress("finished",a,"",t);else{const e={status:{currentStatus:"waiting"},timesRun:t.timesRun+1};"periodic"===t.throttle.strategy?e.runEarliestAt=Date.now()+t.throttle.value:"exponential"===t.throttle.strategy&&(e.runEarliestAt=Date.now()+2**t.timesRun*t.throttle.value),await this.model.updateJob(t._id,e),await this.run("JOB_FAILED")}}async progress(e,t,r,a){const i=await this.model.getJob(a._id);if(this.logger.debug(this.loggerLabel," - progress - job storage: ",i,e),!i)return;const n={status:{...{currentStatus:e}}};"running"===e&&(n.startDate=Date.now()),await this.model.updateJob(a._id,{...n});const{callbacks:o,callbackMiddleware:s}=this.jobHandlers[a.type];if(o)if(s)await s(o,{...t,status:e,error:r,job:a});else for(const i of o){const n=this.remote[i.remoteTarget];n&&await n.execute(i.remoteAction,a.tabId,{...t,status:e,error:r,job:a})}var l;"tab"===a.broadcastType?(this.webappUrl&&this.remote.broadcastTo&&this.remote.broadcastTo(this.webappUrl,"broadcast.jobProgress",t||{}),a.tabId&&await(null===(l=this.remote.cs)||void 0===l?void 0:l.execute("broadcast.jobProgress",a.tabId,t||{},1e3))):this.remote.broadcastAll("broadcast.jobProgress",{...t,status:e,error:r,job:a});"finished"===e&&(await this.model.removeJob(a._id),await this.run("JOB_FINISHED"))}async addJob(e){let{libraryId:t,type:r,priority:a,data:i={},tabId:o=0,broadcastType:s="all",throttleStrategy:l="none",throttleValue:c=5e3,timesMaxRun:u=-1}=e;const d={_id:(0,n.v4)(),libraryId:t,type:r,tabId:o,broadcastType:s,priority:a||0,submissionDate:Date.now(),data:{...i},throttle:{strategy:l,value:c},timesRun:0,timesMaxRun:u,status:{currentStatus:"waiting",data:{},error:""}};return await this.model.insertJob(d),await this.run("ADD_JOB"),d._id}async addJobs(e){const t=Date.now();let r=0;const a=[];for(const i of e){const{libraryId:e,type:o,priority:s,data:l={},tabId:c=0,broadcastType:u="all",throttleStrategy:d="none",throttleValue:p=5e3,timesMaxRun:m=-1}=i;r+=1,a.push({_id:(0,n.v4)(),libraryId:e,type:o,tabId:c,broadcastType:u,priority:s||0,submissionDate:t+r,data:{...l},throttle:{strategy:d,value:p},timesRun:0,timesMaxRun:m,status:{currentStatus:"waiting",data:{},error:""}})}return await this.model.insertJobs(a),await this.run("ADD_JOBS"),null}async cancelJobs(e){await this.model.clearJobs(e)}async cancelJob(e){await this.model.removeJob(e)}async checkExists(e){return await this.model.getJob(e)}async updateJobLastActive(e){await this.model.getJob(e)&&await this.model.updateJob(e,{lastActive:Date.now()})}}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.alignment=void 0;const a=(e,t)=>{const r=new Array(e);for(let a=0;a<e;a+=1){r[a]=new Array(t);for(let e=0;e<t;e+=1)r[a][e]=0}return r},i=(e,t,r)=>{let a=e.length,i=t.length;const n=[];for(;a>0&&i>0;)switch(r[a][i]){case 0:n.push([e[a-1],null]),a-=1;break;case 1:n.push([null,t[i-1]]),i-=1;break;case 2:n.push([e[a-1],t[i-1]]),a-=1,i-=1}if(0===a&&0!==i)for(;i>0;)n.push([null,t[i-1]]),i-=1;if(0!==a&&0===i)for(;a>0;)n.push([e[a-1],null]),a-=1;return n},n=(e,t)=>{const r=a(e.length+1,t.length+1),n=a(e.length+1,t.length+1);for(let t=1;t<=e.length;t+=1)n[t][0]=t;for(let e=1;e<=t.length;e+=1)n[0][e]=e;for(let a=1;a<=e.length;a+=1)for(let i=1;i<=t.length;i+=1){const o=1,s=e[a-1].toLowerCase()!==t[i-1].toLowerCase()?2:0,l=n[a-1][i]+o,c=n[a][i-1]+o,u=n[a-1][i-1]+s;let d=c<l?c:l,p=c<l?1:0;u<d&&(d=u,p=2),r[a][i]=p,n[a][i]=d}const o=n[e.length][t.length],s=e.length+t.length;return{score:s>0?1-o/s:1,alignment:i(e,t,r).reverse()}};t.alignment=n;var o=n;t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(371);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}))},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7));t.default=class{constructor(){(0,i.default)(this,"events",{})}on(e,t){(this.events[e]||(this.events[e]=[])).push(t)}off(e,t){const r=(this.events[e]||[]).findIndex(e=>e===t);-1!==r&&this.events[e].splice(r,1)}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];(this.events[e]||[]).forEach(e=>e(...r))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSnippet=void 0;var a=r(51),i=r(43);const n=e=>{let t=[],r=0;const i=(0,a.snippetHighlightStateMachine)(e);if(!i||!i.length)return[];for(const e of i){if(r>=350)break;t=[...t,e],r+=e.length}return t};t.createSnippet=(e,t,r,o,s)=>{var l,c;const u="abstract"===t||"note"===t?e[t]:null===(l=e.__render)||void 0===l||null===(c=l.snippets)||void 0===c?void 0:c.filter(e=>"fulltext"===t?"full-text"===e.type:"note"===e.type);if(!u||!u.length)return;if("string"!=typeof u){let e=[];for(const t of u){const i=(0,a.matchHighlight)(t.value,r),o=n(i);o&&o.length&&(e=[...e,o.join(' <span class="pp-snippet-ellipsis">&hellip;</span> ')])}return{type:"fulltext"===t?"fullText":"annotation",text:"",renderData:e.map((e,t,r)=>({render:(0,i.simplifyRenderData)((0,i.createObjectTagHierarchy)((0,i.encodeStringToArrayParts)(`<span class="pp-snippet-ellipsis">&hellip;</span> ${e} ${t===r.length-1?' <span class="pp-snippet-ellipsis">&hellip;</span>':""}`),0)),data:{page:u[t].page,attachmentId:u[t].attachment_id,query:o}}))}}const d=(0,a.matchHighlight)(u,r);let p;if(p="note"!==t||d.length<4e3?n(d):[s||"matched note"],!p||!p.length)return;const m=p.join(' <span class="pp-snippet-ellipsis">&hellip;</span> ');return{type:t,renderData:(0,i.simplifyRenderData)((0,i.createObjectTagHierarchy)((0,i.encodeStringToArrayParts)(` <span class="pp-snippet-ellipsis">&hellip;</span> ${m} <span class="pp-snippet-ellipsis">&hellip;</span> `),0))}}},function(e,t,r){"use strict";var a=r(2),i=r(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Duplicates",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Fields",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Pubtypes",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Reference",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"createHighlights",{enumerable:!0,get:function(){return u.default}}),t.ReferenceDL=void 0;var n=i(r(433)),o=i(r(213)),s=i(r(118)),l=i(r(434)),c=a(r(43));t.ReferenceDL=c;var u=i(r(435))},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(178)),n=a(r(44)),o=a(r(29)),s=a(r(47)),l=a(r(598)),c=r(20);var u="test"===c.PP_ENV?null:new i.default(n.default.forLibrary(),s.default,l.default,o.default,c.NEW_WEBAPP_URL);t.default=u},,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(10);const{light:i,dark:n}=a.uiConstants.colors;var o={backgroundColor:(0,a.themeMapper)({"webapp-light":i.gray[0],"webapp-dark":n.gray[700]}),color:(0,a.themeMapper)({"webapp-light":i.gray[700],"webapp-dark":i.gray[0]})};t.default=o},function(e,t,r){"use strict";var a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(6)),o=a(r(14)),s=a(r(198));var l=n.default.kbd`
  font-family: inherit;
  ${o.default.regular.small}
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2px 8px;
  border-radius: 4px;
  user-select: none;
  color: ${s.default.color};
  flex-shrink: 0;
  ${e=>{let{styleName:t}=e;return"box"===t&&n.css`
      border: 1px solid ${s.default.border};
      background-color: ${s.default.backgroundColor};
    `}}
`;t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(10);const{light:i,dark:n}=a.uiConstants.colors;var o={border:(0,a.themeMapper)({"webapp-light":i.gray[300],"webapp-dark":n.gray[400]}),color:(0,a.themeMapper)({"webapp-light":i.gray[500],"webapp-dark":i.gray[100]}),backgroundColor:(0,a.themeMapper)({"webapp-light":"transparent","webapp-dark":n.gray[400]})};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(10);const{colors:{dark:i,light:n}}=a.uiConstants;var o={"neutral-1":{color:(0,a.themeMapper)({"webapp-light":n.gray[400],"webapp-dark":i.gray[400]}),iconColor:(0,a.themeMapper)({"webapp-light":n.gray[400],"webapp-dark":i.gray[500]})},"neutral-2":{color:(0,a.themeMapper)({"webapp-light":n.gray[500],"webapp-dark":i.gray[300]}),iconColor:(0,a.themeMapper)({"webapp-light":n.gray[500],"webapp-dark":i.gray[400]})},"neutral-3":{color:(0,a.themeMapper)({"webapp-light":n.gray[900],"webapp-dark":i.gray[100]}),iconColor:(0,a.themeMapper)({"webapp-light":n.gray[500],"webapp-dark":i.gray[200]})},warning:{color:(0,a.themeMapper)({"webapp-light":n.red[500],"webapp-dark":i.red[300]}),iconColor:(0,a.themeMapper)({"webapp-light":n.red[300],"webapp-dark":i.red[300]})},success:{iconColor:(0,a.themeMapper)({"webapp-light":n.green[700],"webapp-dark":i.green[700]})}};t.default=o},function(e,t,r){"use strict";var a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Remote",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"PubTypes",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"postProcessGuruPub",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"sortAlphaNumeric",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"base64ToUuid",{enumerable:!0,get:function(){return b.base64ToUuid}}),Object.defineProperty(t,"uuidToBase64",{enumerable:!0,get:function(){return b.uuidToBase64}}),Object.defineProperty(t,"cleanNameForURL",{enumerable:!0,get:function(){return b.cleanNameForURL}}),Object.defineProperty(t,"getNameForURL",{enumerable:!0,get:function(){return b.getNameForURL}}),Object.defineProperty(t,"typeMap",{enumerable:!0,get:function(){return b.typeMap}}),Object.defineProperty(t,"createHighlights",{enumerable:!0,get:function(){return y.createHighlights}}),Object.defineProperty(t,"ppDOMPurify",{enumerable:!0,get:function(){return v.ppDOMPurify}}),Object.defineProperty(t,"ppString",{enumerable:!0,get:function(){return v.ppString}}),Object.defineProperty(t,"ppUtils",{enumerable:!0,get:function(){return v.ppUtils}}),t.Utils=t.strings=t.Snippets=t.ReferenceDL=t.Parse=t.CSL=t.backendApiClient=t.attachmentNameFormatter=void 0;var n=i(r(416));t.attachmentNameFormatter=n;var o=a(r(92)),s=i(r(140));t.backendApiClient=s;var l=i(r(141));t.CSL=l;var c=i(r(430));t.Parse=c;var u=i(r(43));t.ReferenceDL=u;var d=i(r(183));t.Snippets=d;var p=i(r(35));t.strings=p;var m=i(r(66));t.Utils=m;var h=a(r(118)),g=a(r(212)),f=a(r(378)),b=r(432),y=r(184),v=r(142)},function(e,t,r){"use strict";var a=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.insertAttachmentInBackend=t.getSelectedPubFromLocalSettings=t.updateAttachment=t.createAttachment=void 0;var i=a(r(211)),n=r(145),o=r(9);const s=async(e,t)=>{try{await t.forLibrary(e.libraryId).insertAttachment(e.attachment)}catch(e){return null}return e.attachment};t.createAttachment=s;const l=async(e,t)=>{try{await t.forLibrary(e.libraryId).updateAttachment(e.id,e.changes)}catch(e){return null}return e.id};t.updateAttachment=l;t.getSelectedPubFromLocalSettings=async e=>{const t=await e.forLibrary().getLocalSettings(),{selectedPubId:r}=t;if(!r)return null;const a=r.split(/:/);return a&&3===a.length?{libraryId:a[0],pubId:a[1],folderId:a[2]}:null};t.insertAttachmentInBackend=async(e,t,r,a,c,u,d)=>{if(!r._id)return null;const p=new FileReader;await p.readAsArrayBuffer(t),await new Promise(e=>{p.onloadend=t=>e(t)});const m=p.result instanceof ArrayBuffer?i.ArrayBuffer.hash(p.result):null;let h=!1,g=null;const f=await e.forLibrary(u).getPubAttachments(r._id)||[];for(const e of f)e.article_pdf&&(h=!0),e.md5===m&&(g=e);let b=!0;if(d&&!/pdf/i.test(d)&&(b=!1),b&&g&&g._id)return 1!==g.article_pdf&&await l({id:g._id,changes:{article_pdf:1},libraryId:u},e),g;const y=c||(0,o.extractFilenameFromURL)(a,d),v=await s({attachment:{_id:(0,n.v4)(),mimeType:d||"application/pdf",pub_id:r._id,source_filename:y,filename:y,md5:m,article_pdf:b&&!h?1:0,filesize:t.size},libraryId:u},e);return null!=v&&v._id?(await e.forLibrary(u).insertFile({_id:v._id,"mime-type":v.mimeType||"application/pdf",blob:t,size:v.filesize||0,md5:v.md5||""}),v):null}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(203));var n=()=>{const e={en:{}};for(const t of Object.entries(i.default)){const[r,a]=t;e.en[r]=a}return e};t.default=n},function(e){e.exports=JSON.parse('{"extension":{"contextMenu":{"menu_addLinkedToMultiple":"Save linked resource to\u2026","menu_addLinkedToMyLibrary":"Save linked resource to $t(common:label_myLibrary)","menu_attachNoSelection":"Select a reference in Paperpile to attach files","menu_attachTo":"Attach linked file to {{pub}}","menu_more":"More\u2026","menu_myLibrary":"$t(common:label_myLibrary)","menu_openWebApp":"Open Paperpile","menu_openDebug":"Send debug logs...","text_readOnly":"(view only)"},"errors":{"errorMessage_contact":"Please try again or contact <email></email> if the error persists.","errorMessage_retry":"Retry","errorMessage_sorry":"Something went wrong"},"pdfStatus":{"button_retry":"$t(common:button_retry)","button_solveCaptcha":"Solve CAPTCHA","message_ACCESS_RESTRICTED":"Restricted","message_BLOCKED":"Blocked by CAPTCHA","message_CRAWLER_FAILED":"PDF not found","message_DOWNLOAD_SIZE_EXCEEDED":"PDF too large","message_LOGIN_REQUIRED":"Sign-in required","message_NO_URL":"PDF not found","message_PDF_NOT_FOUND":"PDF not found","message_PROXY_LOGGED_OUT":"Not signed in to proxy","message_SITE_NOT_SUPPORTED":"PDF not found","message_downloading":"Downloading","message_success":"View PDF","message_waiting":"Waiting","tooltip_blockedByCaptcha":"The publisher has blocked the download. Solve the CAPTCHA and try again."},"popup":{"nonInitializedMode":{"button_openPaperpile":"Open Paperpile","heading_nonInitialized":"Update successful","subheading_nonInitialized":"The Paperpile extension was updated successfully. To use the extension, please open Paperpile once to finish the setup."},"attachMode":{"button_close":"Close and cancel","button_finished":"Back to Paperpile","button_learnMore":"$t(common:button_learnMore)","heading_Pdf":"Browse for PDF","heading_saving":"Saving PDF","heading_success":"PDF saved and attached to {{name}}","heading_supplementaryFiles":"Browse for files","subheading_google":"Find the PDF link in the search results and click <i>Select PDF</i> to attach it automatically to {{name}}.","subheading_pdf":"Locate and follow the PDF link. The PDF will automatically be attached to {{name}}.","subheading_saving":"The PDF will be downloaded and attached to {{name}}.","subheading_supplementaryFiles":"Locate the links to the files you want to attach and in the right-click menu select ","subheading_supplementaryFilesContinued":"<i>Paperpile</i> > <i>Attach linked file to {{name}}</i>."},"cite":{"text_instruction":"Use the Paperpile menu or \u201cP\u201d button to add citations to your Google Doc.","text_instructionFirefox":"The Paperpile add-on for Firefox is currently in beta. Integration with Google Docs isn\'t yet supported but will be available in a future update."},"default":{"buttonTooltip_openPDF":"View PDF","buttonTooltip_openPaperpile":"Open Paperpile","buttonTooltip_settings":"Settings","buttonTooltip_trash":"Trash reference","button_addReference":"Save to Paperpile","button_cancel":"$t(common:button_cancel)","button_continue":"$t(common:button_continue)","button_morePlaces":"{{x}} other places","button_openInPaperpile":"Open in Paperpile","button_reportWebsite":"Report","button_save":"$t(common:button_save)","menu_showInformation":"Show reference from","message_analyzingPdf":"Analyzing PDF\u2026","message_saved":"View in Paperpile","message_saving":"Saving","message_addToOther":"Add to \\"{{name}}\\" and share with {{n}} other users?","message_addToYour":"Add to your library?","message_transferingInProgress":"Adding to \\"{{name}}\\"","message_transferingInProgressYourLibrary":"Adding to your library","message_updating":"Searching metadata\u2026","notification_addedFolder":"Added reference to Folder {{name}}","notification_addedLabel":"Added reference to Label {{name}}","notification_changeToSharedLibraryFolder":"Saving to {{folder}} will share it with {{n}} other users in {{name}}","notification_changeToSharedLibraryLabel":"Adding {{label}} will share it with {{n}} other users in {{name}}","notification_changeToSharedRoot":"Saving to {{name}} will share it with {{n}} other users","notification_addedNote":"Added note","notification_deactivatePinnedFolder":"Pinned folder disabled on this page","notification_deactivatePinnedLabel":"Pinned label disabled on this page","notification_activatePinnedFolder":"Pinned folder re-enabled","notification_activatePinnedLabel":"Pinned label re-enabled","notification_updatedNote":"Updated note","notification_savedReferenceAndNote":"Saved reference and note","notification_removedFolder":"Removed reference from Folder {{name}}","notification_removedLabel":"Removed Label {{name}} from reference","notification_reportSent":"Report sent. Thank you!","notification_referenceTrashed":"Reference trashed","notification_pinnedCollection":"Pinned {{name}}. It\'s now set as default for saving new references.","notification_unpinnedCollection":"Unpinned {{name}}. It\'s no longer the default for saving new references.","text_noArticle":"No article or book data found. Added as website.","text_sharedIn":"In {{name}} and","tooltip_callToEnablePinnedFolder":"Pinned folder disabled on this page. Click to re-enable.","tooltip_callToEnablePinnedLabel":"Pinned label disabled on this page. Click to re-enable.","tooltip_forUnpinnedCollection":"Pin to set as default for saving new references","tooltip_forPinnedCollection":"Unpin to remove as default"},"loggedOut":{"button_signIn":"$t(common:button_signIn)","button_signUp":"Sign up","text_or":"$t(common:separator_or)"},"specialPage":{"button_allowAccess":"Allow access","button_grantFileAccess":"Allow file access","button_openExtensionSettings":"Extension settings","button_openWebApp":"Go to Paperpile","heading_noAccessPage":"Special pages like this cannot be saved.","heading_localFile":"This PDF is stored locally on your computer.","heading_setPermissions":"Additional permissions required","subheading_noAccessPage":"Use this button on regular web pages and PDFs, to save them to your Paperpile library.","subheading_localFile":"Additional permissions are required to import it. Click on the button below and make sure the <i>Allow access to file URLs</i> option is enabled in the Paperpile extension settings.","subheading_localFileMV2":"For privacy reasons it can\'t be imported directly. Go to Paperpile and import it via <i>Add</i> > <i>Upload Files</i>.","text_needsPermission":"The Chrome extension needs permission to access data from the websites you visit."},"webApp":{"heading":"Save to your Paperpile library with one click","subheading":"Use this button to save articles, books, websites, and more as you browse."},"webimport":{"button_clear":"Clear selection","button_hideDetails":"Hide Details","button_openDetails":"Details\u2026","button_savedBulk":"Saved","button_selectAll":"Select all","message_bulkImportFinished":"{{references}} $t(popup.webimport.text_reference, {\\"count\\": {{references}} }) and {{pdfs}} $t(popup.webimport.text_Pdf, {\\"count\\": {{pdfs}} }) saved","message_referencesImported":"Saving references \xb7 {{x}} of {{y}}","message_referencesSaved":"{{count}} $t(popup.webimport.text_reference, {\\"count\\": {{count}} }) saved","message_waiting":"Waiting","text_Pdf":"PDF","text_Pdf_other":"PDFs","text_downloadingPdfs":"Downloading PDFs \xb7 {{x}} of {{y}} found","text_noSelection":"No references selected","text_reference":"reference","text_reference_other":"references","text_selectedReference":"{{count}} $t(popup.webimport.text_reference, {\\"count\\": {{count}} }) selected"},"attachToPdf":{"button_attachTo":"Attach PDF to...","button_attachThis":"Attach this PDF","button_goToPaperpile":"Go to Paperpile","button_showInPaperpile":"Show in Paperpile","button_close":"$t(common:button_close)","heading_currentlySelected":"Currently selected reference","text_noSelected":"No reference selected. Go to Paperpile and select a reference to which you want attach this PDF.","text_attaching":"Attaching PDF to {{pub}}","text_attached":"Attached PDF to {{pub}}","text_error":"Error attaching PDF","text_error_size":"Attachment could not be added. The file is too big."}},"settings":{"button_allSettings":"All Paperpile settings","button_back":"$t(common:button_back)","menuHeading_keyboardShortcut":"Keyboard shortcut","menuHeading_oneClickImport":"One-click import","menuSubheading_keyboardShortcut":"Activate the Paperpile extension with a keyboard shortcut. Set and view the shortcut in your ","menuSubheading_keyboardShortcutBrowser":"browser settings","menuSubheading_oneClickImport":"Save references directly by clicking the Paperpile button.","menuSubheading_proxy":"Configure proxy connection","menu_autoSavePdfs":"Automatically save PDFs with references","menu_enableWebimport":"Show Paperpile buttons on"},"webimport":{"buttonTooltip_addTo":"Save to {{libraryOrFolder}}","buttonTooltip_loadingPdf":"Loading PDF","buttonTooltip_readOnly":"{{libraryOrFolder}} is view only.","buttonTooltip_saving":"Saving\u2026","buttonTooltip_searchingForPdf":"Searching for PDF:","buttonTooltip_showIn":"Show in {{libraryOrFolder}}","buttonTooltip_signIn":"Sign in to Paperpile","button_error":"Error","button_import":"Paperpile","button_selectPdf":"Select PDF","button_signedOut":"$t(common:button_signIn)","button_viewInLibrary":"Paperpile","text_yourLibrary":"your library"},"proxyPage":{"button_signIn":"Sign in","button_runProxyTests":"Run proxy tests","heading_proxy":"Test your proxy connection","heading_urls":"Test urls","subheading_proxy":"Choose your proxy to test","text_customUrl":"Custom URL"}},"targetSelector":{"inputPlaceholder":"Type to search","label_readOnly":"View only","label_myLibrary":"My Library","menu_createNewItem":"Create new {{type}} \u201c{{name}}\u201d","menu_createNewItem_library":"Create new {{type}} \u201c{{name}}\u201d in {{library}}","inputPlaceholder_searchOrCreate":"Search or create new {{type}}","button_applyChanges":"$t(common:button_applyChanges)","message_noCollections":"No {{type}}s found"},"common":{"button_continue":"Continue","button_cancel":"Cancel","button_close":"Close","button_add":"Add","button_applyChanges":"Apply changes","button_finish":"Finish","button_next":"Next","button_back":"Back","button_copy":"Copy","button_edit":"Edit","button_delete":"Delete","button_autoUpdate":"Auto update","button_clear":"Clear","button_popOut":"Pop out","button_save":"Save","button_saveChanges":"Save changes","button_submit":"Submit","button_gotIt":"Got it","button_done":"Done","button_signIn":"Sign in","button_signOut":"Sign out","button_skip":"Skip","button_learnMore":"Learn more","button_retry":"Retry","button_copyLink":"Copy link","button_contact":"Contact support","button_okay":"OK","button_discard":"Discard","button_reloadTab":"Reload tab","buttonTooltip_chooseColor":"Choose color","label_cannotUndoneAction":"This cannot be undone.","label_deletingAccount":"Deleting your account and signing out\u2026","label_signingOut":"Signing out\u2026","label_and":"and","label_new":"New","placeholder_confirm":"Enter DELETE to confirm","notification_offline":"You\'re offline.","notification_newVersionAvailable":"A new version of Paperpile is available","notification_reloadToUpdate":"Reload to update","notification_noReferencesSelected":"No references selected","notification_notAvailableInBeta":"Not available in this beta","notification_cantOpenPdf":"There was an error loading the PDF. Please try again later or contact support if the error persists.","notification_linkCopied":"Copied link to clipboard","errorTryLater":"Please try again later.","errorNotification_reload":"Reload","errorNotification_unknown":"There was an error. Please reload the app or contact support if the error persists.","errorNotification_chunkLoad":"There was an error loading the app. Please reload the page and try again.","separator_or":"or","tooltip_restrictedAction":"You don\'t have enough permissions in {{name}}.","notification_restrictedAction":"You don\'t have enough permissions in {{name}}.","notification_copied":"Copied","references":"{{count, pp-number}} reference","references_other":"{{count, pp-number}} references","label_gdrive":"Google Drive","label_onedrive":"OneDrive","label_myLibrary":"My Library","discardConfirmation":{"title":"Discard unsaved changes?","button_ok":"$t(common:button_discard)"},"title_globalError":"Sorry, there was an error","text_globalError":"Please try reloading the page. If the issue continues, sign out and then sign back in. If that doesn\'t resolve the problem, please contact support.","label_error":"Error:"},"grid":{"reference":{"label_sourcePrefix":{"in":"In: ","deposited":"Deposited in: "}}},"extensionPermissionSetup":{"text_heading":"Why does Paperpile need this permission?","text_content":"Paperpile searches databases, finds metadata, and downloads PDFs from thousands of different academic websites\u2014way more than can be whitelisted on a one-by-one basis.","text_contentQuestion":"Why?","text_privacy":"Paperpile never accesses or transfers any personal or sensitive information.","text_more":"$t(common:button_learnMore)","text_extension":"Find the extension \u201cP\u201d button and select <i>Always Allow on Every Website</i>."},"profiles":{"label_everyoneAtOrg":"All at {{name}}","label_allOfOrganization":"All at {{name}}","tooltip_admin":"$t(dialogs:share:permission_admin)","tooltip_owner":"Owner","tooltip_personal":"You"}}')},,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.nonSupportedGuruFields=void 0;const a=["_p","_u","_c","_alt","_bak","_score","language_title","subtitle","pdf_url","guru_id","refs","editionID","owner","affiliation"];t.nonSupportedGuruFields=a;var i=(e,t)=>{const r={...t};return e.library.Publication.autoClean(r),r.source||(r.source={}),r.guru_id&&(r.source.guru_id=r.guru_id),r.subtitle&&(r.title?r.title=`${r.title}: ${r.subtitle}`:r.title=r.subtitle),"string"!=typeof r.address&&delete r.address,a.forEach(e=>{delete r[e]}),r};t.default=i},function(e,t,r){"use strict";const a=r(77),i=r(379),{interconvertString:n}=r(18);e.exports=class{constructor(e){if(this.PP=e,!this.PP||!this.PP.library)return;this._fields={url:"url",title:"title",original_title:"title",booktitle:"title",titleshort:"title"},this.doiRegExp=/^(https?:\/\/dx.doi.org\/10|https?:\/\/doi.org\/10)/i,this.pubmedRegExp=/(ncbi\.nlm\.nih\.gov\/pubmed|ncbi\.nlm\.nih\.gov\/\d+)/i,this.pmcRegExp=/(ncbi\.nlm\.nih\.gov\/pmc\/articles)/i,this.arxivRegExp=/arxiv\.org\/(format|abs|pdf)\//i,this.zbmathRegExp=/zbmath\.org\/\?q=an:/i,this.mrRegExp=/ams\.org\/mathscinet-getitem\?mr=/i;const t=this.PP.library.PublicationFields.getFieldsMap(),r=["general","library","citation","temporary"];for(const e of Object.keys(t))-1===r.indexOf(t[e].fieldType)&&(this._fields[e]=t[e].fieldType)}_decodeDate(e,t,r,a){null==r?a[e]={}:"freestyle"in r&&r.freestyle.match(/[A-Z\d]/i)?a[e]=this.PP.library.Date.parseDate(r.freestyle):"day"in r&&"month"in r&&"year"in r?a[e]={day:parseInt(r.day.toString()).toString(),month:parseInt(r.month.toString()).toString(),year:parseInt(r.year.toString()).toString()}:"month"in r&&"year"in r?a[e]={month:parseInt(r.month.toString()).toString(),year:parseInt(r.year.toString()).toString()}:"year"in r&&r.year.match(/[A-Z\d]/i)?a[e]=this.PP.library.Date.parseDate(r.year):a[e]={}}_decodeID(e,t,r,i,n){const o=this;if(Array.isArray(i)){const r="string"==typeof t?this.escapeRegex(t.replace(/[\r\n\t\s]/g,"")):"";if(r){let t=a(i);"doi"===e&&(t=t.filter((function(e){return!(o.doiRegExp.test(e)&&new RegExp(r,"i").test(e))}))),"pmid"===e&&(t=t.filter((function(e){return!(o.pubmedRegExp.test(e)&&new RegExp(r,"i").test(e))}))),"pmc"===e&&(t=t.filter((function(e){return!(o.pmcRegExp.test(e)&&new RegExp(r,"i").test(e))}))),"arxivid"===e&&(t=t.filter((function(e){return!(o.arxivRegExp.test(e)&&new RegExp(r,"i").test(e))}))),"zbl"===e&&(t=t.filter((function(e){return!(o.zbmathRegExp.test(e)&&new RegExp(r,"i").test(e))}))),"mr"===e&&(t=t.filter((function(e){return!(o.mrRegExp.test(e)&&new RegExp(r,"i").test(e))}))),n.url=t}}r="string"==typeof r?r.replace(/[\r\n\t\s]/g,""):"",n[e]=r}_decodeUrls(e,t,r,a){if("string"==typeof r){a[e]=[];for(const t of r.split(/[\n\r\t]+/)){const r=t.replace(/^\s+/,"").replace(/\s+$/,"");r.length>3&&a[e].push(r)}}else a[e]=r}_decodeAuthor(e,t,r,a){const i=this.PP.library.Author.parseAuthorList(r||"",{delimiter:";",familyNameFirst:!1}).filter(e=>{let t=!1;return(e.last&&e.last.length>0||e.collective&&e.collective.length>0)&&(t=!0),t});i.forEach((e,r)=>{for(const t of Object.keys(e))void 0!==e[t]&&""!==e[t]||delete e[t],delete e.level,delete e.bak;i.length===t.length&&"_id"in t[r]&&(e._id=t[r]._id,t[r].orcid&&(e.orcid=t[r].orcid))}),a[e]=i}_decodeTitle(e,t,r,a){const i=n(t,{format:"html"});a[e]=i===r?t:r}decodeField(e,t,r){const a={};return e in this._fields?"date"===this._fields[e]?this._decodeDate(e,t,r[e],a):"url"===this._fields[e]?this._decodeUrls(e,t,r[e],a):"title"===this._fields[e]?this._decodeTitle(e,t,r[e],a):"identifier"===this._fields[e]?this._decodeID(e,t,r[e],r.url,a):"author"===this._fields[e]&&this._decodeAuthor(e,t||[],r[e],a):a[e]=r[e],a}escapeRegex(e){return e.replace(/\\/g,"\\\\").replace(/\^/g,"\\^").replace(/\|/g,"\\|").replace(/\$/g,"\\$").replace(/\?/g,"\\?").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\{/g,"\\{").replace(/\}/g,"\\}").replace(/\*/g,"\\*")}decode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=a(t);null==e&&(e={});const n={},o=[...new Set(["url"].concat(Object.keys(i)))];for(const t of o){const r=this.decodeField(t,e[t],i);if("url"===t){const t={};if(this._decodeUrls("url","",e.url,t),t.url&&Array.isArray(t.url))for(const e of t.url)n[e.toLowerCase().trim()]=!0;if(r.url)for(const e of r.url)delete n[e.toLowerCase().trim()]}t in r||delete i[t],i=Object.assign(i,r)}for(const e of Object.keys(n))this.doiRegExp.test(e)&&i.doi&&new RegExp(this.escapeRegex(i.doi),"i").test(e)&&(i.doi=""),this.pubmedRegExp.test(e)&&i.pmid&&new RegExp(this.escapeRegex(i.pmid),"i").test(e)&&(i.pmid=""),this.pmcRegExp.test(e)&&i.pmc&&new RegExp(this.escapeRegex(i.pmc),"i").test(e)&&(i.pmc=""),this.arxivRegExp.test(e)&&i.arxivid&&new RegExp(this.escapeRegex(i.arxivid),"i").test(e)&&(i.arxivid=""),this.zbmathRegExp.test(e)&&i.zbl&&new RegExp(this.escapeRegex(i.zbl),"i").test(e)&&(i.zbl=""),this.mrRegExp.test(e)&&i.mr&&new RegExp(this.escapeRegex(i.mr),"i").test(e)&&(i.mr="");delete i.citedByLink;const s={};if("paperpile"===r)for(const e of Object.keys(i))"string"==typeof i[e]&&""===i[e]?s[e]="string":Array.isArray(i[e])&&0===i[e].length&&(s[e]="array");const l=a(i.id_list),c=a(i.autoCleaned);this.PP.library.Publication.autoClean(i,{}),this.arrayEqual(e.url,i.url)&&(i.url=a(e.url)),this.arrayEqual(l,i.id_list)&&(i.id_list=l),"1"!==c&&1!==c||(i.autoCleaned=1);for(const t of["source","subfolders","incomplete","autoCleaned"])!(t in e)&&t in i&&Object.keys(e).length>0&&delete i[t];for(const e of Object.keys(s))e in i||("string"===s[e]?i[e]="":"array"===s[e]&&(i[e]=[]));return i}arrayEqual(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;const r={};for(const t of e)t in r||(r[t]={array1:!1,array2:!1}),r[t].array1=!0;for(const e of t){if(!(e in r))return!1;r[e].array2=!0}return Object.values(r).every(e=>e.array1&&e.array2)}diff(e,t){null==e&&(e={});const r={update:{},remove:[]};for(const a of Object.keys(e))if(!(a in t)){if(""===e[a])continue;if(Array.isArray(e[a])&&0===e[a].length)continue;r.remove.push(a)}for(const n of Object.keys(t))if("object"==typeof t[n])if("object"==typeof e[n]){const o={};if(o.item1=a(t[n]),o.item2=a(e[n]),["author","editor","series_editor","contributor","translator"].indexOf(n)>-1)for(const e of["item1","item2"])if(o[e]&&Array.isArray(o[e]))for(const t of o[e]){for(const e of Object.keys(t))""===t[e]&&delete t[e];delete t.bak,delete t.level}i(o.item1,o.item2)||(r.update[n]=t[n])}else r.update[n]=t[n];else t[n]!==e[n]&&(r.update[n]=t[n]);return r}_encodeDate(e){const t={},r=e=>!(null==e||""===e||"0"===e||0===e);return r(e.season)&&r(e.year)?t.freestyle=`${e.season} ${e.year}`:r(e.day)&&r(e.month)&&r(e.year)?(t.day="0"+e.day,t.month="0"+e.month,t.year=""+e.year):r(e.month)&&r(e.year)?(t.month="0"+e.month,t.year=""+e.year):r(e.literal)?t.freestyle=""+e.literal:r(e.year)&&(t.year=""+e.year),"day"in t&&t.day.length>2&&(t.day=t.day.substring(1)),"month"in t&&t.month.length>2&&(t.month=t.month.substring(1)),t}encodeField(e,t){if("date"===this._fields[e])return this._encodeDate(t);if("title"===this._fields[e])return n(t,{format:"html"});if("url"===this._fields[e])return t.join("\n");if("author"===this._fields[e]){const e=this.PP.library.Author.toString(t,{delim:"; ",output:"serialize"});return""+(e?e+";":"")}return t}encode(e){const t={},r=null==e?{}:e;for(const e of Object.keys(r))t[e]=this.encodeField(e,a(r[e]));return t}}},,,,,,,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(74),o=r(94),s=a(r(182));t.default=class{constructor(e,t,r){(0,i.default)(this,"isInitialized",!1),(0,i.default)(this,"hasExtension",!1),(0,i.default)(this,"promises",[]),(0,i.default)(this,"loggerLabel","data client"),this.libraryId=e,this.remote=t,this.logger=r,this.emitter=new s.default}emit(e,t){return this.emitter.emit(e,t)}on(e,t){return this.emitter.on(e,t)}off(e,t){return this.emitter.off(e,t)}setDisplayProgressOverride(e){return this.dispatchMessage("progressStore","setDisplayProgressOverride",e)}startProgress(){return this.dispatchMessage("progressStore","startProgress")}endProgress(e){return this.dispatchMessage("progressStore","endProgress",e)}async exportFilterLog(){return this.dispatchMessage("model","exportFilterLog")}async importFilterLog(e){return this.dispatchMessage("model","importFilterLog",e)}async insertFilterLogJson(e){return this.dispatchMessage("model","insertFilterLogJson",e)}async nextFilterLogAction(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.dispatchMessage("model","nextFilterLogAction",e)}async previousFilterLogAction(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.dispatchMessage("model","previousFilterLogAction",e)}async goToFilterLogAction(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return this.dispatchMessage("model","goToFilterLogAction",e)}async wipeAndReset(){return this.isInitialized=!1,this.dispatchMessageWithoutCache("syncClient","wipeAndReset")}checkFilterMapSyncStatus(){return this.dispatchMessage("model","checkFilterMapSyncStatus")}verifyDB(e){return this.dispatchMessage("model","verifyDB",e)}wipeAll(){return this.dispatchMessage("model","wipeAll")}getUser(){return this.dispatchMessage("model","getUser")}async getOwnerId(){try{return await this.dispatchMessage("model","getOwnerId")}catch(e){if("personal"===this.libraryId)return this.getUser().then(e=>e._id);throw e}}getSharedLibrary(e){return this.dispatchMessage("model","getSharedLibrary",e)}updateSharedLibrary(e,t){return this.dispatchMessage("model","updateSharedLibrary",e,t)}getPermissions(){return this.dispatchMessage("model","getPermissions")}updateUser(e){return this.dispatchMessage("model","updateUser",e)}async updateUserJSONField(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{return await this.dispatchMessage("model","updateUserJSONField",e,t,r)}catch(r){this.logger.debug(this.loggerLabel,"updateUserJSONField is using fallback",r);const a=await this.getUser();let i={};try{i=JSON.parse(a[e]||"{}")}catch(e){}const n={[e]:JSON.stringify({...i,...t})};return this.dispatchMessage("model","updateUser",n)}}ensureStylesAndLocales(){return this.dispatchMessage("citationStyles","ensureStylesAndLocales")}getStyleById(e){return this.dispatchMessage("citationStyles","getStyleById",e)}getLocaleById(e){return this.dispatchMessage("citationStyles","getLocaleById",e)}getStylesList(){return this.dispatchMessage("citationStyles","getStylesList")}getUserStylesList(){return this.dispatchMessage("citationStyles","getUserStylesList")}getLocalesList(){return this.dispatchMessage("citationStyles","getLocalesList")}insertStyle(e){return this.dispatchMessage("citationStyles","insertStyle",e)}removeStyleById(e){return this.dispatchMessage("citationStyles","removeStyleById",e)}getLocalesForCiteEngine(e){return this.dispatchMessage("citationStyles","getLocalesForCiteEngine",e)}getUserStyleXML(e){return this.dispatchMessage("citationStyles","getUserStyleXML",e)}getDefaultStyle(){return this.dispatchMessage("citationStyles","getDefaultStyle")}sync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.dispatchMessage("syncClient","sync",e)}waitForSync(){return this.dispatchMessage("syncClient","waitForSync")}cancelRequest(){return this.dispatchMessage("syncClient","cancelRequest")}resetCitationKeys(e,t,r){return this.dispatchMessage("model","resetCitationKeys",e,t,r)}getReferenceIdsWithCustomCitationKeys(){return this.dispatchMessage("model","getReferenceIdsWithCustomCitationKeys")}async getReferenceIds(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,-1];const a=-1===r[1]?1/0:r[1]-r[0];if(t&&a>1e3){const t=await this.dispatchMessage("model","getReferenceIds",e,!1,r);return t&&(t.data=await this.getReferences(t.ids)),t}return this.dispatchMessage("model","getReferenceIds",e,t,r)}getDuplicateEntriesByFilterQuery(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return this.dispatchMessage("model","getDuplicateEntriesByFilterQuery",e,t)}async getReferences(e){const t=(0,n.chunkArray)(e,1e3).map(e=>this.dispatchMessage("model","getReferences",e));return(await Promise.all(t)).flat()}getFilterCounts(e){return this.dispatchMessage("model","getFilterCounts",e)}setLocalSettings(e){return this.dispatchMessage("model","setLocalSettings",e)}getLocalSettings(){return this.dispatchMessage("model","getLocalSettings")}insertCollection(e){return this.dispatchMessage("model","insertCollection",e)}insertJob(e){return this.dispatchMessage("model","insertJob",e)}insertJobs(e){return this.dispatchMessage("model","insertJobs",e)}updateJob(e,t){return this.dispatchMessage("model","updateJob",e,t)}removeJob(e){return this.dispatchMessage("model","removeJob",e)}getJob(e){return this.dispatchMessage("model","getJob",e)}getAllJobs(){return this.dispatchMessage("model","getAllJobs")}getJobsCount(e){return this.dispatchMessage("model","getJobsCount",e)}clearJobs(e){return this.dispatchMessage("model","clearJobs",e)}getChangesCount(){return this.dispatchMessage("model","getChangesCount")}async insertFile(e){if(e.blob.size<20971520)await this.dispatchMessage("model","insertFile",e);else try{const t=Math.ceil(e.blob.size/20971520)||1;for(let r=0;r<t;r+=1){const a=e.blob.slice(20971520*r,20971520*(r+1));await this.dispatchMessage("model","insertFileChunk",r,t,{...e,blob:a},"its internal only")}}catch(t){this.logger.info(this.loggerLabel,"insertFileChunk call failed - sending via normal insertFile now",t),await this.dispatchMessage("model","insertFile",e)}}insertFileChunk(e,t,r,a){throw new Error("Method not implemented.")}checkIfFileExists(e){return this.dispatchMessage("model","checkIfFileExists",e)}ensureFileExists(e){return this.dispatchMessage("model","ensureFileExists",e)}async getFile(e){const t=await this.dispatchMessage("model","getChunkedFile",e,0);if(!t)return;if(1===t.totalChunks)return t.file;const r=[];r.push(t.file.blob);const a=[];for(let r=1;r<t.totalChunks;r+=1)a.push(this.dispatchMessage("model","getChunkedFile",e,r));for(const e of await Promise.all(a))e&&r.push(e.file.blob);return{...t.file,blob:new Blob(r)}}async getUnsyncedAttachmentFilesCount(){return this.dispatchMessage("model","getUnsyncedAttachmentFilesCount")}async getFileStatistics(){return this.dispatchMessage("model","getFileStatistics")}async checkExistingFiles(e){return this.dispatchMessage("model","checkExistingFiles",e)}getChunkedFile(e,t){throw new Error("Method not implemented.")}async updateFile(e,t){if(!t.blob||t.blob.size<20971520)await this.dispatchMessage("model","updateFile",e,t);else try{const r=Math.ceil(t.blob.size/20971520)||1;for(let a=0;a<r;a+=1){const i=t.blob.slice(20971520*a,20971520*(a+1));await this.dispatchMessage("model","updateFileChunk",a,r,e,{...t,blob:i},"its internal only")}}catch(r){this.logger.info(this.loggerLabel,"updateFileChunk call failed - sending via normal updateFile now",r),await this.dispatchMessage("model","updateFile",e,t)}}updateFileChunk(e,t,r,a,i){throw new Error("Method not implemented.")}getFileURL(e){return this.dispatchMessage("model","getFileURL",e)}removeFile(e){return this.dispatchMessage("model","removeFile",e)}clearFiles(){return this.dispatchMessage("model","clearFiles")}deleteSyncedFiles(){return this.dispatchMessage("model","deleteSyncedFiles")}getFileCount(){return this.dispatchMessage("model","getFileCount")}insertPub(e){return this.dispatchMessage("model","insertPub",e)}replacePub(e,t){return this.dispatchMessage("model","replacePub",e,t)}updatePub(e,t){return this.dispatchMessage("model","updatePub",e,t)}mergeDuplicatedPubs(e,t,r,a,i,n,o){return this.dispatchMessage("model","mergeDuplicatedPubs",e,t,r,a,i,n,o)}removePub(e){return this.dispatchMessage("model","removePub",e)}insertAttachment(e){return this.dispatchMessage("model","insertAttachment",e)}insertAttachments(e){return this.dispatchMessage("model","insertAttachments",e)}insertNote(e){return this.dispatchMessage("model","insertNote",e)}updateCollection(e,t){return this.dispatchMessage("model","updateCollection",e,t)}updateAttachment(e,t){return this.dispatchMessage("model","updateAttachment",e,t)}updateNote(e,t){return this.dispatchMessage("model","updateNote",e,t)}removeCollection(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.dispatchMessage("model","removeCollection",e,t)}removeCollections(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.dispatchMessage("model","removeCollections",e,t)}removeAttachment(e){return this.dispatchMessage("model","removeAttachment",e)}removeAttachments(e){return this.dispatchMessage("model","removeAttachments",e)}removeNote(e){return this.dispatchMessage("model","removeNote",e)}getPub(e){return this.dispatchMessage("model","getPub",e)}getAttachment(e){return this.dispatchMessage("model","getAttachment",e)}getAllAttachments(){return this.dispatchMessage("model","getAllAttachments")}getPubAttachments(e){return this.dispatchMessage("model","getPubAttachments",e)}getAttachmentNotes(e){return this.dispatchMessage("model","getAttachmentNotes",e)}getCollection(e){return this.dispatchMessage("model","getCollection",e)}getCollections(e){return this.dispatchMessage("model","getCollections",e)}getNote(e){return this.dispatchMessage("model","getNote",e)}updatePubs(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.dispatchMessage("model","updatePubs",e,t,r)}updatePubLinks(e,t){return this.dispatchMessage("model","updatePubLinks",e,t)}updatePubsCollections(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return this.dispatchMessage("model","updatePubsCollections",e,t,r,a)}pushOrPullCollections(e,t,r,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return this.dispatchMessage("model","pushOrPullCollections",e,t,r,a,i)}insertPubs(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.dispatchMessage("model","insertPubs",e,t,r)}removePubs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.dispatchMessage("model","removePubs",e,t)}saveBulk(e,t){return this.dispatchMessage("model","saveBulk",e,t)}putBulk(e,t){return this.dispatchMessage("model","putBulk",e,t)}getBulk(e,t){return this.dispatchMessage("model","getBulk",e,t)}async getAll(e,t){try{let a=await this.dispatchMessage("model","getAllChunked",e,null,t);if(!a)return;if(!a.cursor)return a.docs;const i=a.docs;for(;null!==(r=a)&&void 0!==r&&r.cursor;){var r;a=await this.dispatchMessage("model","getAllChunked",e,a.cursor,t),a&&i.push(...a.docs)}return i}catch(t){return this.logger.debug(this.loggerLabel,"getAll is using fallback",t),this.dispatchMessage("model","getAll",e)}}getAllChunked(e,t,r){throw new Error("Method not implemented.")}updateBulk(e,t,r,a){return this.dispatchMessage("model","updateBulk",e,t,r,a)}removeBulk(e,t,r){return this.dispatchMessage("model","removeBulk",e,t,r)}getDuplicateIds(e){return this.dispatchMessage("model","getDuplicateIds",e)}searchMultipleDuplicateIds(e){return this.dispatchMessage("model","searchMultipleDuplicateIds",e)}getDuplicateEntries(e,t,r){return this.dispatchMessage("model","getDuplicateEntries",e,t,r)}recreateFilterMap(){return this.dispatchMessage("model","recreateFilterMap")}checkFilterMapIntegrity(){return this.dispatchMessage("model","checkFilterMapIntegrity")}getCollectionsInSelector(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.dispatchMessage("model","getCollectionsInSelector",e,t,r)}async updateProfilesCache(e){return this.dispatchMessage("model","updateProfilesCache",e)}async setProfiles(e){return this.dispatchMessage("model","setProfiles",e)}async getProfiles(e,t){return this.dispatchMessage("model","getProfiles",e,t)}async clearProfiles(e){return this.dispatchMessage("model","clearProfiles",e)}async getProfileImageBase64(e){return this.dispatchMessage("model","getProfileImageBase64",e)}async triggerActionsByChange(e){return this.dispatchMessage("model","triggerActionsByChange",e)}async insertCollections(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.dispatchMessage("model","insertCollections",e,t)}getIsInitialized(){return this.isInitialized}getHasExtension(){return this.hasExtension}async init(e){this.hasExtension=e;const t=await this.executeInDataLayer("data-layer.init",{libraryId:this.libraryId});if(null!=t&&t.error)throw t.error;this.isInitialized=!0;for(const e of this.promises)if("model"===e.component)await this.dispatchMessage(e.component,e.fn,...e.args).then(e.resolve).catch(e.reject);else if("syncClient"===e.component)await this.dispatchMessage(e.component,e.fn,...e.args).then(e.resolve).catch(e.reject);else if("citationStyles"===e.component)await this.dispatchMessage(e.component,e.fn,...e.args).then(e.resolve).catch(e.reject);else{if("progressStore"!==e.component)throw new Error("unexpected component in promise");await this.dispatchMessage(e.component,e.fn,...e.args).then(e.resolve).catch(e.reject)}this.promises=[]}setHasExtension(e){this.hasExtension=e}async onSocketUpdate(e){if(this.logger.debug(this.loggerLabel,"Socket Update",e),!this.syncClientId){const e=await this.getLocalSettings();this.syncClientId=e.syncClientId}for(const t of e)if(t.sync_client!==this.syncClientId){if("Workflows"===t.collection)continue;if("update"!==t.action||t.fields&&t.fields.filter(e=>!o.oplog.fieldsIgnoredInSync.includes(e)).length>0){await this.sync();break}}}async dispatchMessage(e,t){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];if("on"===t||"off"===t)throw new Error("Unable to dispatch EventEmitter functions");if(!this.isInitialized){if("model"===e){return new Promise((r,i)=>{const n={component:e,resolve:r,reject:i,fn:t,args:a};this.promises.push(n)})}if("syncClient"===e){return new Promise((r,i)=>{this.promises.push({component:e,resolve:r,reject:i,fn:t,args:a})})}if("citationStyles"===e){return new Promise((r,i)=>{const n={component:e,resolve:r,reject:i,fn:t,args:a};this.promises.push(n)})}if("progressStore"===e){return new Promise((r,i)=>{const n={component:e,resolve:r,reject:i,fn:t,args:a};this.promises.push(n)})}throw new Error("unexpected component")}const n=await this.executeInDataLayer("data-layer."+e,{data:{libraryId:this.libraryId,fn:t,args:a}});if(!n)throw new Error("Empty response for "+t);if(n.error)throw n.error;return n.result}async dispatchMessageWithoutCache(e,t){if("on"===t||"off"===t)throw new Error("Unable to dispatch EventEmitter functions");for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];const n=await this.executeInDataLayer("data-layer."+e,{data:{libraryId:this.libraryId,fn:t,args:a}});if(!n)throw new Error("Empty response for "+t);if(n.error)throw n.error;return n.result}async executeInDataLayer(e,t){var r,a;const i=this.hasExtension?"bg":"sw";if(!this.remote.bg||!this.remote[i])throw new Error("Unexpected Remote class in DataClient - missing bg/[worker] functions");const n="bg"!==this.remote.origin||this.hasExtension?0:await(null===(r=this.remote.bg)||void 0===r?void 0:r.execute("utils.getAnyWebappTabId").then(e=>null==e?void 0:e.result)),o=await(null===(a=this.remote[i])||void 0===a?void 0:a.execute(e,n,t));if(!o){var s;await new Promise(e=>setTimeout(e,2e3));return await(null===(s=this.remote[i])||void 0===s?void 0:s.execute(e,n,t))}return o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customStyleFileToOriginalFile=t.convertStyleIdToBaseId=t.convertNewStyleId=t.convertOldStyleId=t.isCustomStyleFile=t.searchStyleList=t.prepareSearchStyleList=t.getStyleSearchString=t.sortStyles=t.convertNewStyleFile=void 0;var a=r(117),i=r(32);const n="http://www.zotero.org/styles/",o=["pp-apa7","pp-chicago-author-date","pp-harvard-cite-them-right","pp-mla9","nature","plos"],s=["pp-vancouver","pp-ieee","pp-chicago-fullnote-bibliography","university-of-york-harvard","harvard-university-for-the-creative-arts","american-medical-association","harvard-leeds-beckett-university","sage-harvard","cell","science","jama","pnas","the-new-england-journal-of-medicine","national-library-of-medicine-grant-proposals"],l=["modern-language-association-7th-edition","apa","apa-6th-edition","chicago-author-date","chicago-fullnote-bibliography","harvard1","ieee","vancouver","harvard-cite-them-right"],c={[n+"apa-6th-edition"]:"pp-apa",[n+"apa"]:"pp-apa7",[n+"modern-language-association-7th-edition"]:"pp-mla7",[n+"modern-language-association-8th-edition"]:"pp-mla8",[n+"modern-language-association"]:"pp-mla9"},u={"apa.csl":"apa-7th-edition.csl","harvard-cite-them-right.csl":"harvard1.csl","modern-language-association.csl":"modern-language-association-9th-edition.csl"},d=e=>c[e]||e.replace(n,""),p=e=>{var t;return(null===(t=Object.entries(u).find(t=>{let[,r]=t;return r===e}))||void 0===t?void 0:t[0])||e};t.convertNewStyleFile=p;const m=(e,t)=>e>=0?t>=0?e-t:-1:t>=0?1:0,h=e=>{let t=[];const r=[];let i=[];const n=[];for(const c of e)a.BackendTypes.CitationStyles.isUserStyleListItem(c)?r.push(c):o.includes(c._id)?t.push(c):s.includes(c._id)?i.push(c):l.includes(c._id)||n.push(c);return t=t.sort((e,t)=>m(o.indexOf(e._id),o.indexOf(t._id))),i=i.sort((e,t)=>m(s.indexOf(e._id),s.indexOf(t._id))),[...t,...r,...i,...n]};t.sortStyles=h;const g=e=>{const t=e.toLowerCase(),r=t.split(" "),a=t.replace(/(^|\s)(of|in|de|the|and|&|la|le)(?=(\s|$))/g," ").split(" ").reduce((e,t)=>`${e}${t.charAt(0)}`,"");return r.push(a),r.join(" ")};t.getStyleSearchString=g;t.prepareSearchStyleList=e=>h(e).map(e=>{const{_id:t,filename:r,title:i}=e;return{_id:t,filename:p(r),isUserStyle:a.BackendTypes.CitationStyles.isUserStyleListItem(e),searchString:g(i),title:i}});t.searchStyleList=(e,t)=>{if(!t)return e;const r=(0,i.escapeRegex)(t).trim().toLowerCase(),a=r.split(/\s+/),n=new RegExp(""+a.join(".*\\b.*"));return e.filter(e=>{let{searchString:t}=e;return null!==t.match(n)}).sort((e,t)=>e.title.toLowerCase()===r?-1:t.title.toLowerCase()===r?1:0)};const f=e=>!!e.match(/^custom-/);t.isCustomStyleFile=f;t.convertOldStyleId=async(e,t)=>{const r=d(e);if(await t(r))return r;const a="pp-"+r;return await t(a)?a:r};t.convertNewStyleId=(e,t)=>{return f(t)||e.startsWith(n)?e:(r=e,(null===(a=Object.entries(c).find(e=>{let[,t]=e;return t===r}))||void 0===a?void 0:a[0])||`${n}${r.replace(/^pp-/,"")}`);var r,a};t.convertStyleIdToBaseId=e=>d(e).replace(/^pp-/,"");t.customStyleFileToOriginalFile=e=>{var t;return(null===(t=e.match(/^custom-[^-]+-[^-]+-(.+)$/))||void 0===t?void 0:t[1])||e}},function(e,t,r){"use strict";var a=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.Webview=t.Users=t.Invoices=t.Billing=t.Admin=t.Profiles=t.Organizations=t.Invitations=t.SharedLibraries=t.SharedLists=t.SocketIO=t.Permissions=t.Emails=t.Collections=t.UserStyles=t.Convert=t.CitationStyles=t.CitationLocales=t.Auth=void 0;var i=a(r(226));t.Auth=i;var n=a(r(123));t.CitationLocales=n;var o=a(r(124));t.CitationStyles=o;var s=a(r(227));t.Convert=s;var l=a(r(125));t.UserStyles=l;var c=a(r(228));t.Collections=c;var u=a(r(229));t.Emails=u;var d=a(r(230));t.Permissions=d;var p=a(r(231));t.SocketIO=p;var m=a(r(232));t.SharedLists=m;var h=a(r(233));t.SharedLibraries=h;var g=a(r(234));t.Invitations=g;var f=a(r(235));t.Organizations=f;var b=a(r(236));t.Profiles=b;var y=a(r(237));t.Admin=y;var v=a(r(238));t.Billing=v;var _=a(r(239));t.Invoices=_;var w=a(r(240));t.Users=w;var P=a(r(241));t.Webview=P},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCollectionsType=function(e){return["label","folder"].includes(e)}},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(e,t,r,a,i)=>{const n={jobsToRun:[],numberWaitingJobs:0,numberAllWaitingJobs:0};if(0===e.length)return n;const o=e.filter(e=>"waiting"===e.status.currentStatus);n.numberAllWaitingJobs=o.length;const s=o.filter(e=>!e.runEarliestAt||Date.now()>=e.runEarliestAt).sort((e,t)=>e.priority===t.priority&&t.submissionDate&&e.submissionDate?e.submissionDate-t.submissionDate:e.priority&&t.priority?t.priority-e.priority:0);n.numberWaitingJobs=s.length;const l=t-r;if(l>0&&s.length>0)if(0===a)n.jobsToRun=s.slice(0,l);else{const e=s.filter(e=>e.priority>=i).slice(0,a),t=e.map(e=>e._id),r=l-a;let o=[];r>0&&(o=s.filter(e=>!t.includes(e._id)).slice(0,r)),n.jobsToRun=[...e,...o]}return n};t.default=a},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={PP_ARTICLE:{"de-AT":"Artikel in einer Fachzeitschrift","de-CH":"Artikel in einer Fachzeitschrift","de-DE":"Artikel in einer Fachzeitschrift","en-US":"Journal article","es-ES":"Art\xedculo de revista cient\xedfica","fr-FR":"Article de revue scientifique","pt-PT":"Artigo de revista acad\xe9mica (journal)","pt-BR":"Artigo de revista acad\xeamica"},PP_ARTWORK:{"de-AT":"Kunstwerk","de-CH":"Kunstwerk","de-DE":"Kunstwerk","en-US":"Artwork","es-ES":"Obra de arte","fr-FR":"Ouvrages d'art","pt-PT":"Obra de arte","pt-BR":"Obra de arte"},PP_AUDIO:{"de-AT":"Audioaufname","de-CH":"Audioaufname","de-DE":"Audioaufname","en-US":"Audio recording","es-ES":"Grabaci\xf3n de audio","fr-FR":"Enregistrement audio","pt-PT":"Grava\xe7\xe3o de \xe1udio","pt-BR":"Grava\xe7\xe3o de \xe1udio"},PP_BILL:{"de-AT":"Gesetzentwurf","de-CH":"Gesetzentwurf","de-DE":"Gesetzentwurf","en-US":"Bill","es-ES":"Proyecto de ley","fr-FR":"Projet de loi","pt-PT":"Projeto de lei","pt-BR":"Projeto de lei"},PP_BOOK:{"de-AT":"Buch","de-CH":"Buch","de-DE":"Buch","en-US":"Book","es-ES":"Libro","fr-FR":"Livre","pt-PT":"Livro","pt-BR":"Livro"},PP_BOOK_CHAPTER:{"de-AT":"Buchkapitel","de-CH":"Buchkapitel","de-DE":"Buchkapitel","en-US":"Book chapter","es-ES":"Cap\xedtulo de libro","fr-FR":"Chapitre du livre","pt-PT":"Cap\xedtulo de livro","pt-BR":"Cap\xedtulo de livro"},PP_BROADCAST:{"de-AT":"Rundfunk","de-CH":"Rundfunk","de-DE":"Rundfunk","en-US":"Broadcast","es-ES":"Emisi\xf3n","fr-FR":"\xc9mission","pt-PT":"Transmiss\xe3o","pt-BR":"Transmiss\xe3o"},PP_CASE:{"de-AT":"Rechtsfall","de-CH":"Rechtsfall","de-DE":"Rechtsfall","en-US":"Case","es-ES":"Caso","fr-FR":"Cas","pt-PT":"Caso","pt-BR":"Caso"},PP_COMPUTER_PROGRAM:{"de-AT":"Computerprogramm","de-CH":"Computerprogramm","de-DE":"Computerprogramm","en-US":"Computer program","es-ES":"Programa de computadora","fr-FR":"Programme d'ordinateur","pt-PT":"Programa de computador","pt-BR":"Programa de computador"},PP_CONFERENCE_PAPER:{"de-AT":"Beitrag in einem Tagungsband","de-CH":"Beitrag in einem Tagungsband","de-DE":"Beitrag in einem Tagungsband","en-US":"Conference paper","es-ES":"Documento de conferencia","fr-FR":"Document de conf\xe9rence","pt-PT":"Documento de confer\xeancia","pt-BR":"Documento de confer\xeancia"},PP_DATASET:{"de-AT":"Datensatz","de-CH":"Datensatz","de-DE":"Datensatz","en-US":"Dataset","es-ES":"Conjunto de datos","fr-FR":"Ensemble de donn\xe9es","pt-PT":"Conjunto de dados","pt-BR":"Conjunto de dados"},PP_ENCYCLOPEDIA_ARTICLE:{"de-AT":"Enzyklop\xe4die Artikel","de-CH":"Enzyklop\xe4die Artikel","de-DE":"Enzyklop\xe4die Artikel","en-US":"Encyclopedia article","es-ES":"Art\xedculo de enciclopedia","fr-FR":"Article d'encyclop\xe9die","pt-PT":"Artigo de Enciclop\xe9dia","pt-BR":"Artigo de Enciclop\xe9dia"},PP_FIGURE:{"de-AT":"Abbildung","de-CH":"Abbildung","de-DE":"Abbildung","en-US":"Figure","es-ES":"Figura","fr-FR":"Figure","pt-PT":"Figura","pt-BR":"Figura"},PP_GRANT:{"de-AT":"F\xf6rderung","de-CH":"F\xf6rderung","de-DE":"F\xf6rderung","en-US":"Grant","es-ES":"Subvenci\xf3n","fr-FR":"Subvention","pt-PT":"Bolsa","pt-BR":"Bolsa"},PP_INTERVIEW:{"de-AT":"Interview","de-CH":"Interview","de-DE":"Interview","en-US":"Interview","es-ES":"Entrevista","fr-FR":"Entrevue","pt-PT":"Entrevista","pt-BR":"Entrevista"},PP_LETTER:{"de-AT":"Brief","de-CH":"Brief","de-DE":"Brief","en-US":"Letter","es-ES":"Carta","fr-FR":"Lettre","pt-PT":"Carta","pt-BR":"Carta"},PP_MANUAL:{"de-AT":"Handbuch oder Dokumentation","de-CH":"Handbuch oder Dokumentation","de-DE":"Handbuch oder Dokumentation","en-US":"Manual or documentation","es-ES":"Manual o Documentaci\xf3n","fr-FR":"Manuel ou Documentation","pt-PT":"Manual ou Documenta\xe7\xe3o","pt-BR":"Manual ou Documenta\xe7\xe3o"},PP_MANUSCRIPT:{"de-AT":"Archivmaterial","de-CH":"Archivmaterial","de-DE":"Archivmaterial","en-US":"Archival material","es-ES":"Material de archivo","fr-FR":"Mat\xe9riel d'archives","pt-PT":"Material de arquivo","pt-BR":"Material de arquivo"},PP_MAP:{"de-AT":"Karte","de-CH":"Karte","de-DE":"Karte","en-US":"Map","es-ES":"Mapa","fr-FR":"Carte","pt-PT":"Mapa","pt-BR":"Mapa"},PP_MISC:{"de-AT":"Sonstiges","de-CH":"Sonstiges","de-DE":"Sonstiges","en-US":"Miscellaneous","es-ES":"Miscel\xe1neo","fr-FR":"Divers","pt-PT":"Diversos","pt-BR":"Diversos"},PP_NEWS_ARTICLE:{"de-AT":"Nachrichtenartikel","de-CH":"Nachrichtenartikel","de-DE":"Nachrichtenartikel","en-US":"News article","es-ES":"Art\xedculo de noticias","fr-FR":"Article de nouvelles","pt-PT":"Artigo de not\xedcias","pt-BR":"Artigo de not\xedcias"},PP_PATENT:{"de-AT":"Patent","de-CH":"Patent","de-DE":"Patent","en-US":"Patent","es-ES":"Patente","fr-FR":"Brevet","pt-PT":"Patente","pt-BR":"Patente"},PP_PERIODICAL:{"de-AT":"Periodische Ver\xf6ffentlichung","de-CH":"Periodische Ver\xf6ffentlichung","de-DE":"Periodische Ver\xf6ffentlichung","en-US":"Periodical","es-ES":"Publicaci\xf3n peri\xf3dica","fr-FR":"P\xe9riodiques","pt-PT":"Publica\xe7\xe3o peri\xf3dica","pt-BR":"Publica\xe7\xe3o peri\xf3dica"},PP_PERSONAL_COMMUNICATION:{"de-AT":"Pers\xf6nliche Kommunikation","de-CH":"Pers\xf6nliche Kommunikation","de-DE":"Pers\xf6nliche Kommunikation","en-US":"Personal communication","es-ES":"Comunicaci\xf3n personal","fr-FR":"Communication personnelle","pt-PT":"Comunica\xe7\xe3o pessoal","pt-BR":"Comunica\xe7\xe3o pessoal"},PP_PREPRINT:{"de-AT":"Preprint","de-CH":"Preprint","de-DE":"Preprint","en-US":"Preprint","es-ES":"Manuscrito preimpreso","fr-FR":"Manuscrit pr\xe9-imprim\xe9","pt-PT":"Pr\xe9-publica\xe7\xe3o","pt-BR":"Pr\xe9-publica\xe7\xe3o"},PP_PRESENTATION:{"de-AT":"Pr\xe4sentation","de-CH":"Pr\xe4sentation","de-DE":"Pr\xe4sentation","en-US":"Presentation","es-ES":"Presentaci\xf3n","fr-FR":"Pr\xe9sentation","pt-PT":"Apresenta\xe7\xe3o","pt-BR":"Apresenta\xe7\xe3o"},PP_REPORT:{"de-AT":"Bericht","de-CH":"Bericht","de-DE":"Bericht","en-US":"Report","es-ES":"Reporte","fr-FR":"Rapport","pt-PT":"Relat\xf3rio","pt-BR":"Relat\xf3rio"},PP_REVIEW:{"de-AT":"Buch- oder Filmrezension","de-CH":"Buch- oder Filmrezension","de-DE":"Buch- oder Filmrezension","en-US":"Book or film review","es-ES":"Rese\xf1a de libro o pel\xedcula","fr-FR":"Critique de livre ou de film","pt-PT":"Opini\xe3o de livro ou filme","pt-BR":"Resenha de livro ou filme"},PP_SCORE:{"de-AT":"Partitur","de-CH":"Partitur","de-DE":"Partitur","en-US":"Musical score","es-ES":"Partitura","fr-FR":"Partition","pt-PT":"Partitura","pt-BR":"Partitura"},PP_STANDARD:{"de-AT":"Standard","de-CH":"Standard","de-DE":"Standard","en-US":"Standard","es-ES":"Norma","fr-FR":"Norme","pt-PT":"Padr\xe3o","pt-BR":"Padr\xe3o"},PP_STATUTE:{"de-AT":"Gesetz","de-CH":"Gesetz","de-DE":"Gesetz","en-US":"Statute","es-ES":"Estatuto","fr-FR":"Statut","pt-PT":"Estatuto","pt-BR":"Estatuto"},PP_THESIS:{"de-AT":"Abschlussarbeit","de-CH":"Abschlussarbeit","de-DE":"Abschlussarbeit","en-US":"Thesis","es-ES":"Tesis","fr-FR":"Th\xe8se","pt-PT":"Tese","pt-BR":"Tese"},PP_TREATY:{"de-AT":"Vertrag","de-CH":"Vertrag","de-DE":"Vertrag","en-US":"Treaty","es-ES":"Tratado","fr-FR":"Trait\xe9","pt-PT":"Tratado","pt-BR":"Tratado"},PP_UNPUBLISHED:{"de-AT":"Unver\xf6ffentlichtes Arbeit","de-CH":"Unver\xf6ffentlichtes Arbeit","de-DE":"Unver\xf6ffentlichtes Arbeit","en-US":"Unpublished item","es-ES":"Elemento no publicado","fr-FR":"\xc9l\xe9ment non publi\xe9","pt-PT":"Item n\xe3o publicado","pt-BR":"Item n\xe3o publicado"},PP_VIDEO:{"de-AT":"Video oder Film","de-CH":"Video oder Film","de-DE":"Video oder Film","en-US":"Video or film","es-ES":"Video o Pel\xedcula","fr-FR":"Vid\xe9o ou film","pt-PT":"V\xeddeo ou filme","pt-BR":"V\xeddeo ou filme"},PP_WEBSITE:{"de-AT":"Webseite","de-CH":"Webseite","de-DE":"Webseite","en-US":"Website","es-ES":"Sitio web","fr-FR":"Site Internet","pt-PT":"Site da Internet","pt-BR":"Site da Internet"}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortAccessLevel=t.hasGreaterAccess=t.hasMinimumAccess=t.isPermissionCollectionSpecial=t.isPermissionCollectionBasic=t.isPermissionCollectionPositive=t.isCollectionAccessLevelBasic=t.isCollectionAccessLevelPositive=t.isCollectionAccessLevel=t.isCollectionPermission=t.COLLECTION_ACCESS_LEVELS_SPECIAL=t.COLLECTION_ACCESS_LEVELS_BASIC=t.COLLECTION_ACCESS_LEVELS_POSITIVE=t.COLLECTION_ACCESS_LEVELS_POSITIVE_MAP=void 0;const a={owner:5,admin:4,writer:3,commenter:2,reader:1};t.COLLECTION_ACCESS_LEVELS_POSITIVE_MAP=a;const i={...a,no_access:!0},n={cannot_delete:!0,limited_read:!0},o={...i,...a,...n},s=Object.keys(a);t.COLLECTION_ACCESS_LEVELS_POSITIVE=s;const l=Object.keys(i);t.COLLECTION_ACCESS_LEVELS_BASIC=l;const c=Object.keys(n);t.COLLECTION_ACCESS_LEVELS_SPECIAL=c;t.isCollectionPermission=e=>"folder_id"in e;t.isCollectionAccessLevel=e=>e in o;const u=e=>e in a;t.isCollectionAccessLevelPositive=u;const d=e=>e in i;t.isCollectionAccessLevelBasic=d;t.isPermissionCollectionPositive=e=>u(e.access_level);t.isPermissionCollectionBasic=e=>d(e.access_level);t.isPermissionCollectionSpecial=e=>e.access_level in n;t.hasMinimumAccess=(e,t)=>u(e)&&a[e]>=a[t];t.hasGreaterAccess=(e,t)=>u(e)&&a[e]>a[t];t.sortAccessLevel=(e,t)=>a[t]-a[e]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(373);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}))},function(e,t,r){"use strict";var a=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.sortingReplacer=t.fieldsIgnoredInSQLiteSyncVerify=t.fieldsIgnoredInSyncVerify=t.SYNC_VERIFY_VERSION=void 0;var i=a(r(131));t.SYNC_VERIFY_VERSION="3";const n=[...i.fieldsIgnoredInSync,"__render","source","pdf_crawl_current_url","pdf_crawl_status","pdf_web_url","pdf_restricted","pdf_url","shared_member_ids","notifications_sent","guest_organizations","shared_member_emails","download_counts","intercom_hash","guide_flags_anyArticlesAddedYet","guide_flags_seenAttachmentsYet","guide_hide_cloudSyncHoverPanel","guide_hide_cloudSyncWindow","guide_hide_webImportThroughDatabases"];t.fieldsIgnoredInSQLiteSyncVerify=n;const o=[...i.fieldsIgnoredInSync,...n,"_id","owner","intercom_hash","_titleNE","_pi_i","__render","attachments","incomplete","source","mp_thumbnailTime"];t.fieldsIgnoredInSyncVerify=o;const s=new Intl.Collator("en-US",{numeric:!0,sensitivity:"base"});t.sortingReplacer=(e,t)=>t instanceof Object&&!(t instanceof Array)?Object.keys(t).sort(s.compare).reduce((e,r)=>(o.includes(r)||(e[r]=t[r],["labels","folders"].includes(r)&&e[r].sort()),e),{}):t},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.ApiSyncVerifyPostRequestSchema=t.ApiSyncVerifyHashCollectionsSchema=t.apiSyncVerifyHashCollections=void 0;var i=a(r(375));const n=["Collections","Library","Attachments","Notes","SharedLibraries","Users"];t.apiSyncVerifyHashCollections=n;const o=i.default.string().valid(...n);t.ApiSyncVerifyHashCollectionsSchema=o;const s=i.default.object({hash:i.default.string().required(),count:i.default.number().required(),ids:i.default.array().items(i.default.string()).required()}),l=i.default.object({...n.reduce((e,t)=>(e[t]=s.required(),e),{})}),c=i.default.object({storeDatabasesOnFailure:i.default.boolean().required(),libraryId:i.default.string().required(),libraryOwner:i.default.string().required(),hashes:l.required()}).label("ApiSyncVerifyPostRequest");t.ApiSyncVerifyPostRequestSchema=c},,function(e,t,r){"use strict";var a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.orderProfiles=t.ProfilesList=t.uuidRegex=t.DefaultProfile=t.StyledProfile=void 0;var n=i(r(0)),o=i(r(6)),s=r(25),l=i(r(425)),c=a(r(427)),u=a(r(61)),d=a(r(428)),p=a(r(106)),m=r(377);const h=(e,t)=>o.css`
    border: 1px solid ${c.default.border};
    position: relative;

    ${t&&o.css`
      margin-left: ${t}px;
    `}
    ${o.css`
      z-index: ${e};
    `}

  box-sizing: content-box;

    &:first-of-type {
      margin-left: 0;
    }
  `,g=(0,o.default)(l.default)`
  ${e=>{let{position:t,gap:r}=e;return h(t,r)}}
  background-color: ${c.default.profileImageBg};
`;t.StyledProfile=g;const f=(0,o.default)(l.DefaultProfileImage)`
  ${e=>{let{position:t,gap:r}=e;return h(t,r)}}

  ${e=>{let{isList:t}=e;return t&&o.css`
      top: -3px;
      left: -2px;
    `}}
`;t.DefaultProfile=f;const b=(0,o.default)(d.default)`
  color: ${c.default.color};
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: pre-line;
`,y=(0,o.default)(d.default)`
  color: ${c.default.nameColor};
`,v=o.default.div`
  align-items: center;

  ${e=>{let{imagesLoaded:t}=e;return t?o.css`
          display: flex;
        `:o.css`
          display: none;
        `}}

  display: flex;
  gap: 8px;
  div {
    white-space: nowrap;
  }
`,_=o.default.div`
  display: grid;
  grid-template-columns: max-content 1fr 174px;
  gap: 8px;
  align-items: center;

  ${e=>{let{fullWidth:t}=e;return t?o.css`
          width: 100%;
        `:o.css`
          width: 270px;
        `}}
`,w=(0,o.default)(p.default)`
  padding-right: 14px;
  margin-right: 2px;
`,P=(0,o.default)(u.default)`
  padding-right: 0;
`,S=-2,C=5,A=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i;t.uuidRegex=A;const E=e=>{let{profile:t,translate:r,getDisplayName:a,ownerIds:i,adminIds:n,libraryType:o}=e;if("personal-library"===o)return r("tooltip_personal");if("google_email"in t&&!A.test(t._id||"")){let e=(null==a?void 0:a(t))||t.google_name;return"shared-library"===o?null!=t&&t._id&&(i||[]).includes(t._id)&&(e=`${e} ${m.DotSeparatorCharacter} ${r("tooltip_admin")||""}`):"shared-folder"===o&&null!=t&&t._id&&(i||[]).includes(t._id)?e=`${e} ${m.DotSeparatorCharacter} ${r("tooltip_owner")||""}`:null!=t&&t._id&&(n||[]).includes(t._id)&&(e=`${e} ${m.DotSeparatorCharacter} ${r("tooltip_admin")||""}`),e}return"domain"in t?""+r("label_everyoneAtOrg",{name:t.name}):""+r("label_everyoneAtOrg",{name:t.google_name})},T=e=>"google_email"in e?e.google_email:"",k=e=>"google_email"in e?e.base_64_photo?e.base_64_photo:e.google_photo_url:e.logo,x=e=>{let{fullWidth:t,getDisplayName:r,profiles:a}=e;const{t:i}=(0,s.useTranslation)("profiles");return n.default.createElement(_,{fullWidth:t},a.map((e,t,a)=>n.default.createElement(n.Fragment,{key:e._id},k(e)?n.default.createElement(g,{disableHover:!0,position:a.length-t,size:22,styleName:"round",src:k(e)}):n.default.createElement(f,{disableHover:!0,isList:!1,position:a.length-t,size:22,styleName:"round"}),n.default.createElement(y,{size:"small",weight:"medium"},E({profile:e,translate:i,getDisplayName:r})),n.default.createElement(b,{size:"small",weight:"medium"},T(e)))))};t.ProfilesList=x;const R=function(e){let{ownerIds:t,adminIds:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=e.filter(e=>!A.test(e._id||"")),i=e.filter(e=>A.test(e._id||"")),n=a.filter(e=>(t||[]).includes(e._id||"")),o=a.filter(e=>!(t||[]).includes(e._id||"")),s=o.filter(e=>(r||[]).includes(e._id||"")),l=o.filter(e=>!(r||[]).includes(e._id||""));return{orderedProfiles:[...i||[],...n||[],...s||[],...l||[]],organizationProfiles:i}};t.orderProfiles=R;var I=e=>{let{className:t,disableTooltips:r,gap:a=S,getDisplayName:i,max:o=C,profiles:l,disablePortal:c,ownerIds:d,adminIds:p,libraryType:m}=e;const{t:h}=(0,s.useTranslation)("profiles"),[y,_]=(0,n.useState)(0),{orderedProfiles:A,organizationProfiles:I}=R(l,{ownerIds:d,adminIds:p}),L=A.slice(0,o),D=A.length-L.length;return n.default.createElement(v,{hasOrganizations:I.length>0,imagesLoaded:y===L.length,className:t},n.default.createElement("div",{style:{height:"24px",display:"flex"}},L.map((e,t,o)=>n.default.createElement(u.default,{disablePortal:c,disabled:r,key:e._id,text:E({profile:e,translate:h,getDisplayName:i,ownerIds:d,adminIds:p,libraryType:m}),subheading:T(e),defaultSize:!0,delayValue:100,type:"popover"},k(e)?n.default.createElement(g,{disableHover:!0,gap:a,position:o.length-t,size:22,styleName:"round",src:k(e),onLoad:e=>{e&&"complete"in e.target&&e.target.complete&&_(e=>e+1)}}):n.default.createElement(f,{disableHover:!0,isList:!0,position:o.length-t,size:22,styleName:"round"})))),D>0&&n.default.createElement(P,{disablePortal:c,disabled:r,component:n.default.createElement(w,{maxHeight:400},n.default.createElement(x,{profiles:A.slice(o),getDisplayName:i}))},n.default.createElement(b,{size:"medium",weight:"medium"},"+",D)))};t.default=I},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DotSeparatorCharacter=void 0;var i=a(r(6)),n=a(r(429)),o=a(r(14));t.DotSeparatorCharacter="\xb7";var s=i.default.span.attrs({children:"\xb7"})`
  color: ${n.default.color};
  ${o.default.bold.medium}
`;t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(e,t)=>{const[,r]=e.match(/^(\d+)/)||[],[,a]=t.match(/^(\d+)/)||[];if(r&&a){const e=r.length,t=a.length,i=r.localeCompare(a,void 0,{numeric:!0});if(0!==i)return i;if(e!==t)return e-t}return e.localeCompare(t,void 0,{numeric:!0})};t.default=a},,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.extractPubFromFrames=t.extractPubFromHtml=t.sortFrameUrlsByDomain=t.getFrameUrls=void 0;var i=r(4),n=r(5),o=a(r(12)),s=a(r(449));const l=(e,t)=>{const{$:r,rootElement:a}=(0,o.default)(e,t),i=a.find("frame").toArray(),n=new Set;return i.forEach(e=>{const t=r(e).attr("src");t&&n.add(t)}),Array.from(n)};t.getFrameUrls=l;const c=(e,t)=>{const r=(0,n.getGlobal)("ppLibrary"),a=r.Utils.getDomainSuffix(e),i={same:[],different:[]};return t.forEach(e=>{const t=r.Utils.getDomainSuffix(e)===a;i[t?"same":"different"].push(e)}),[...i.same,...i.different]};t.sortFrameUrlsByDomain=c;const u=async(e,t,r,a)=>{let[o]=(0,n.getGlobal)("ppLibrary").format.HTML.syncRead(e);return o&&o.title?(o.url=Array.from(new Set([t].concat(o.url||[]))),o=(0,s.default)(e,t,o,r,a),(0,i.ok)(o)):r.err("CONVERTER_FAILED","No pub found in HTML")};t.extractPubFromHtml=u;const d=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{err:a,fetchClient:o}=t,s=(0,n.getGlobal)("ppLibrary");let l=null;for(const n of e){const e=await o.fetch(n);if(!e.isOk())return e;const{response:c,bodyText:d}=e.value;if(!c.ok)return a("FETCH_FAILED",c.status);const p=await u(d,n,t,r);if(p.isOk()){const e=p.value;if(!s.library.Publication.isIncomplete(e)&&e.author)return(0,i.ok)(e);null===l&&(l=e)}}return null===l?a("CONVERTER_FAILED","Nothing found in frames"):(0,i.ok)(l)};t.extractPubFromFrames=d;var p=async(e,t,r,a)=>{const{err:n,messageReporter:o}=r;if(!e)return n("CONVERTER_FAILED","No content provided");if(!t)return n("CONVERTER_FAILED","No URL provided");if(i.regExes.looksLikePdfUrl(t))return n("CONVERTER_FAILED","Default target hit PDF file");if(!i.regExes.looksLikeHtmlContent(e))return n("CONVERTER_FAILED","Default target hit a non-HTML file");const s=l(e,o);if(s.length){const e=c(t,s),i=await d(e,r,a);if(i.isOk())return i}return u(e,t,r,a)};t.default=p},,,,function(e,t){},,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkBrowserError=t.CHROME_OFFSCREEN_CLOSED=t.CHROME_OFFSCREEN_SINGLE_ERROR=t.SAFARI_CANNOT_ACCESS=t.FIREFOX_MISSING_HOST_PERMISSION=t.EDGE_EXTENSION_GALLERY=t.CHROME_FILE_ACCESS=t.CHROME_CANNOT_CHROME_URL=t.CHROME_DIFFERENT_EXTENSION=t.CHROME_ERROR_PAGE=t.CHROME_POLICY_ERROR=t.FIREFOX_UNEXPECTED_ERROR=t.CHROME_CANNOT_ACCESS_CONTENTS=t.CHROME_FRAME_ID_0=t.SAFARI_TAB_NOT_FOUND=t.FIREFOX_INVALID_TAB=t.CHROME_NO_TAB_WITH_ID=void 0;t.CHROME_NO_TAB_WITH_ID={msg:"No tab with id",match:"start"};t.FIREFOX_INVALID_TAB={msg:"Invalid tab ID",match:"start"};t.SAFARI_TAB_NOT_FOUND={msg:"Tab not found.",match:"end"};t.CHROME_FRAME_ID_0={msg:"Frame with ID 0 was removed.",match:"exact"};t.CHROME_CANNOT_ACCESS_CONTENTS={msg:"Cannot access contents of the page. Extension manifest must request permission to access the respective host.",match:"exact"};t.FIREFOX_UNEXPECTED_ERROR={msg:"An unexpected error occurred",match:"exact"};t.CHROME_POLICY_ERROR={msg:"This page cannot be scripted due to an ExtensionsSettings policy.",match:"exact"};t.CHROME_ERROR_PAGE={msg:"Frame with ID 0 is showing error page",match:"exact"};t.CHROME_DIFFERENT_EXTENSION={msg:"Cannot access a chrome-extension:// URL of different extension",match:"exact"};t.CHROME_CANNOT_CHROME_URL={msg:"Cannot access a chrome:// URL",match:"exact"};t.CHROME_FILE_ACCESS={msg:'Cannot access contents of url "file://',match:"start"};t.EDGE_EXTENSION_GALLERY={msg:"The extensions gallery cannot be scripted.",match:"exact"};t.FIREFOX_MISSING_HOST_PERMISSION={msg:"Missing host permission for the tab",match:"exact"};t.SAFARI_CANNOT_ACCESS={msg:'Cannot access contents of the page. Extension manifest must request permission to access the respective host, or have "activeTab" permission with a user gesture.',match:"exact"};t.CHROME_OFFSCREEN_SINGLE_ERROR={msg:"Only a single offscreen document may be created",match:"contains"};t.CHROME_OFFSCREEN_CLOSED={msg:"Offscreen document closed before fully loading",match:"contains"};const a=(e,t)=>!!t&&(Array.isArray(e)?e.some(e=>a(e,t)):"start"===e.match?t.startsWith(e.msg):"end"===e.match?t.endsWith(e.msg):"contains"===e.match?t.includes(e.msg):t===e.msg);t.checkBrowserError=a},,,,,,,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(400),o=r(401),s=r(20);var l=class{constructor(e,t){(0,i.default)(this,"bugsnagClient",null),this.logger=e,this.bugsnagLibrary=t}initialize(){var e=this;"test"!==s.PP_ENV&&(this.logger.debug("bugsnag","Initializing"),this.bugsnagClient=this.bugsnagLibrary.start({trackInlineScripts:"firefox"!==s.PP_APP_ENV,apiKey:s.BUGSNAG_API_KEY,appVersion:s.BUILD_NUMBER,collectUserIp:!0,releaseStage:s.PP_ENV,onError:[n.allowExtensionErrors,e=>!(window&&"cs"===window.executionContext&&!(0,n.isExtensionError)(e))&&(e.context="New extension: "+e.context,this.logger.errorNoNotify("bugsnag","onError",e),!0),o.bugsnagAttachErrorCauses,o.bugsnagAttachExtraMetadata],logger:{debug:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.logger.debug("bugsnag",...r)},info:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.logger.info("bugsnag",...r)},warn:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.logger.warn("bugsnag",...r)},error:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.logger.errorNoNotify("bugsnag",...r)}}}),this.logger.setBugsnagClient(this.bugsnagClient),this.logger.info("bugsnag","Initialized"))}getBugsnagClient(){if("chrome-mv3"!==s.PP_APP_ENV&&null===this.bugsnagClient)throw new Error(this.logger.getFormattedContextAndLabel("bugsnag")+" Not initialized, call initialize first");return this.bugsnagClient}getLogs(){let e=[];const t=this.getBugsnagClient();return t&&t.breadcrumbs?e=t.breadcrumbs:t&&t._breadcrumbs&&(e=t._breadcrumbs),e}setUser(e){var t;null===(t=this.getBugsnagClient())||void 0===t||t.setUser(e._id,e.google_email,e.google_name)}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isExtensionError=t.allowExtensionErrors=void 0;t.allowExtensionErrors=e=>{e.errors[0].stacktrace=e.errors[0].stacktrace.map(e=>(e.file=e.file.replace(/chrome-extension:/g,"chrome_extension:").replace(/(moz-extension:\/\/.{36})/g,"moz_extension://paperpile-id").replace(/(safari-extension:\/\/.{36})/g,"safari_extension://paperpile-id").replace(/(safari-web-extension:\/\/.{36})/g,"safari_web_extension://paperpile-id"),e))};t.isExtensionError=e=>e.errors[0].stacktrace.some(e=>e.file.startsWith("chrome_extension:")||e.file.startsWith("moz_extension:")||e.file.startsWith("safari_extension:")||e.file.startsWith("safari_web_extension:"))},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.bugsnagAttachExtraMetadata=t.bugsnagAttachErrorCauses=void 0;var i=r(136),n=a(r(57)),o=a(r(33));t.bugsnagAttachErrorCauses=e=>{const t=e.originalError instanceof n.default?e.originalError.getAllErrors().slice(1):[],r={unhandled:e.unhandled,severity:e.severity,severityReason:{type:"unknown"}};t.forEach(t=>{e.errors.push(i.Event.create(t,!0,r,"unknown",0).errors[0])})};t.bugsnagAttachExtraMetadata=e=>{if(!(e.originalError instanceof n.default))return;e.originalError.getAllErrors().forEach((t,r)=>{t instanceof o.default&&e.addMetadata(`Error ${r+1} extra`,t.extra)})}},,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getPermissionsService=t.initPermissionsService=void 0;var i=a(r(808));let n;class o extends i.default{constructor(e){let{userId:t,store:r}=e;super(),this.store=r,this.userId=t}getActiveLibraryFolderIds(){}getCollection(e){return this.store.collectionsList.find(t=>t._id===e)}getPermissions(){return this.store.permissionsList}getSharedLibrary(){throw new Error("getSharedLibrary not implemented")}getUserId(){return this.userId}}t.initPermissionsService=async e=>{let{user:t,store:r}=e;n=new o({userId:t._id,store:r})};t.getPermissionsService=()=>n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(20);const i=e=>"string"==typeof e&&(e.match(/Could not establish connection/)||e.match(/content invalidated/)||e.match(/handler received a non-error/));var n=e=>{let{bugsnag:t,logger:r,remote:n,callback:o}=e;if("test"!==a.PP_ENV){try{t.initialize()}catch(e){r.errorNoNotify("bugsnag","Failed to initialize",e)}self.onerror=async(e,t)=>{if((null==t||!t.length||"string"!=typeof t||/safari-web-extension:\/\//.test(t)||/moz-extension:\/\//.test(t))&&("string"!=typeof t||!t.startsWith("blob:http")))if("string"==typeof e&&e.match(/ResizeObserver/))r.errorNoNotify("global","onerror",e);else if("string"!=typeof e||!e.match(/importScripts/)){if(i(e))r.errorNoNotify("bugsnag","onerror",e);else{const t=new Error("string"==typeof e?e:JSON.stringify(e));r.error("bugsnag","onerror",t);!(window&&"cs"===window.executionContext)&&n.broadcastTo(a.NEW_WEBAPP_URL,"broadcast.extensionUncaughtError")}null==o||o(e)}},self.addEventListener("unhandledrejection",e=>{var t,s,l;if("cs"!==(null===(t=window)||void 0===t?void 0:t.executionContext)){if(e.preventDefault(),i(null===(s=e.reason)||void 0===s?void 0:s.message))r.errorNoNotify("bugsnag","unhandled error",e.reason);else{r.error("bugsnag","unhandled error",e.reason);!(window&&"cs"===window.executionContext)&&n.broadcastTo(a.NEW_WEBAPP_URL,"broadcast.extensionUncaughtError")}null==o||o("unhandled error:"+(null===(l=e.reason)||void 0===l?void 0:l.message))}else e.preventDefault()})}};t.default=n},,,,,,,,,,,,function(e,t,r){"use strict";const{interconvertString:a}=r(18),{cleanFileName:i,ellipsis:n,midEllipsis:o,replaceDiacritics:s,stopwords:l}=r(32),c=(e,t)=>{if(!e)return e;if(!t)return e;if(Array.isArray(e))return e.map(e=>c(e,t));switch(t){case"lowercase":return e.toLowerCase();case"uppercase":return e.toUpperCase()}throw new Error("Invalid capitalization")},u=e=>e.replace(/\s(.)/g,e=>e.toUpperCase()).replace(/\s/g,"").replace(/^(.)/,e=>e.toLowerCase()),d=(e,t,r,o,s,d)=>{const h={};{const i=e.author&&e.author.length>0?e.author:e.editor||[],o=i&&i.length||0,s=o>0&&(i[0].last||i[0].formatted)||null,c=o>0&&(i[i.length-1].last||i[i.length-1].formatted)||null,u=e.published&&e.published.year||null,p=a(n(e.title||"Unknown Title",200,{ellipsisString:"[...]"}),{format:"nomarkup"}),m=("[article_pdf].pdf"===t.source_filename?p:t.source_filename)||"Unknown Title";let g=m,f=null;const b=m.lastIndexOf(".");b>=m.length-5?(g=m.substring(0,b),f=m.substring(b)):1===t.article_pdf||"[article_pdf].pdf"===t.source_filename||"application/pdf"===t.mimeType?f=".pdf":"plain/text"===t.mimeType&&(f=".txt");const y=r&&r.length>0?r.join("/"):null;h.authors=i,h.numOfAuthors=o,h.firstAuthor=s,h.lastAuthor=c,h.year=u,h.title=p,h.titleshort=p.split(/\s+/).map(e=>e.toLowerCase()in l?null:e).filter(e=>!!e).join(" "),h.fileName=g,h.fileExtension=f,h.isFolder=d,h.subfolders=y}const b=[];let y=o.indexOf("["),v=-1;for(;-1!==y;){const t=o.substring(v+1,y);if(b.push(t),v=o.indexOf("]",y),-1===v)throw new Error("Incomplete field: ["+o.substring(y+1));const r=o.substring(y+1,v),a=r.split(":");if(a.length>3)throw new Error(`Too many limits in [${r}]`);let[i,n,l]=a;if(void 0!==l){if(""===n&&(n=void 0),n&&!n.match(/^[0-9]+$/)||!l.match(/^[0-9]+$/))throw new Error(`Invalid limit in field [${r}]. Use numbers only.`)}else if(void 0!==n&&!n.match(/^[0-9]+$/))throw new Error(`Invalid limit in field [${r}]. Use numbers only.`);void 0!==n&&(n=parseInt(n)),void 0!==l&&(l=parseInt(l)),i=i.trim();let u=null;i.match(/^[a-z]*$/)&&(u="lowercase"),i.match(/^[A-Z]*$/)&&(u="uppercase");let p=null;switch(i.toLowerCase()){case"authors":p=f(h,n,l,u,s);break;case"firstauthor":if(Number.isInteger(l))throw new Error(`Invalid limit in field [${r}]. Use one limit only.`);p=g(h,n,u,h.firstAuthor);break;case"lastauthor":if(Number.isInteger(l))throw new Error(`Invalid limit in field [${r}]. Use one limit only.`);p=g(h,n,u,h.lastAuthor);break;case"title":p=m(n,l,u,s,h.title);break;case"titleshort":p=m(n,l,u,s,h.titleshort);break;case"journal":p=e.journal,p&&(p=c(p,u),p=p.replace(/\./g," "),p=p.replace(/ {2}/g," "),p=p.split(/\s+/g),Number.isInteger(n)&&p.splice(n),Number.isInteger(l)&&(p=p.map(e=>e.substr(0,l))),p=p.join(" "));break;case"filename":p=m(n,l,u,s,h.fileName);break;case"folder":if(!d)throw new Error(`[${i}] is not supported in file name`);p=m(n,l,u,s,h.subfolders);break;case"year":if(Number.isInteger(l))throw new Error(`Invalid limit in field [${r}]. Use one limit only.`);p=h.year,p&&Number.isInteger(n)&&n<4&&(p=""+p,p=p.slice(-1*n));break;default:throw new Error(`[${r}] is not a supported field`)}!p&&h.isFolder&&(p=s.fallbackFolder),p&&b.push(p),y=o.indexOf("[",v)}const _=o.substring(v+1);b.push(_);let w=b.join("");return w=d?p(s,w):h.fileExtension&&!w.endsWith(h.fileExtension)?i(`${w}${h.fileExtension}`):i(w),"string"!=typeof s.replaceWhitespace?w:""===s.replaceWhitespace?u(w):w.replace(/\s/g,s.replaceWhitespace)},p=(e,t)=>{let r=t;const a=new TextEncoder;for(let i=t.length-1;a.encode(r).length>120&&i>0;i-=1)r=h(i,null,e,t);return r},m=(e,t,r,a,i)=>{if(!i)return i;let n=i,o=n.split(/\s+/);const s=o.length;if(Number.isInteger(e)&&e<o.length&&(0===e?o=[]:1===e?o=[o[0]]:("end"===a.abbreviateFieldsPosition&&(o=o.slice(0,e)),"middle"===a.abbreviateFieldsPosition&&(o=[...o.slice(0,Math.ceil(e/2)),...o.slice(-1*Math.floor(e/2))]))),o.length>0)if(null!==t&&(o=o.map(e=>e.substring(0,t))),o=c(o,r),s===o.length)n=o.join(" ");else if("end"===a.abbreviateFieldsPosition)n=o.join(" ")+a.abbreviateFieldsString;else if("middle"===a.abbreviateFieldsPosition)if(1===o.length)[n]=o;else{const e=o.slice(0,Math.ceil(o.length/2)).join(" "),t=o.slice(-1*Math.floor(o.length/2)).join(" ");n=e+a.abbreviateFieldsString+t}return n},h=(e,t,r,a)=>{let i=a;return i&&Number.isInteger(e)&&("middle"===r.abbreviateFieldsPosition?i=o(i,e,!0,r.abbreviateFieldsString):"end"===r.abbreviateFieldsPosition&&(i=n(i,e,{ellipsisString:r.abbreviateFieldsString}))),i=c(i,t),i},g=(e,t,r,a)=>{let i=null;return a&&(i=a,i&&Number.isInteger(t)&&(i=i.slice(0,t)),1===i.length&&e.isFolder&&(i=s(i)),i=c(i,r)),i},f=(e,t,r,a,i)=>{let o=null,s=e.authors.map(e=>e.last||e.formatted);if(Number.isInteger(t)&&t<s.length&&(0===t?s=[]:1===t?s=2===s.length&&i.twoAuthorsDelimiter?[...s]:[s[0]]:t>1&&("end"===i.abbreviateAuthorsPosition&&(s=s.slice(0,t)),"middle"===i.abbreviateAuthorsPosition&&(s=[...s.slice(0,Math.ceil(t/2)),...s.slice(-1*Math.floor(t/2))]))),s.length>0){if(null!==r&&(s=s.map(e=>e.substring(0,r))),s=c(s,a),2===e.authors.length&&i.twoAuthorsDelimiter)o=s.join(i.twoAuthorsDelimiter);else if(e.authors.length===s.length)o=s.join(i.authorsDelimiter);else if("end"===i.abbreviateAuthorsPosition)o=s.join(i.authorsDelimiter)+i.abbreviateAuthorsString;else if("middle"===i.abbreviateAuthorsPosition)if(1===s.length)[o]=s;else{const e=s.slice(0,Math.ceil(s.length/2)).join(i.authorsDelimiter),t=s.slice(-1*Math.floor(s.length/2)).join(i.authorsDelimiter);o=e+i.abbreviateAuthorsString+t}}else e.isFolder||(o=e.title);return o&&(o=n(o,40)),o},b=(e,t,r,a,n)=>{const o=(1===t.article_pdf?r:a).split("/").pop(),s=d(e,t,null,o,n,!1);return i(s)},y=(e,t,r,a,i,n)=>{const o=[];if(1===e.trashed)n.syncTrashedOn&&o.push(n.syncTrashed);else{const s=!0;let l=(1===t.article_pdf?a:i).split("/");l.pop(),l=l.join("/");const c=n.syncAllOn?n.syncAll+"/":"";if(l.match(/\[folder:?[0-9]*\]/i)&&e.folders&&e.folders.length>0)for(const a of e.folders){const i=[],u=r[a];if(u){i.push(u.cName);const e=[];let t=u;for(;t&&"ROOT"!==t.cParent&&!e.includes(t.cParent);)t=r[t.cParent],t&&i.unshift(t.cName)}o.push(`${c}${d(e,t,i,l,n,s)}`)}else o.push(`${c}${d(e,t,null,l,n,s)}`);1===e.starred&&n.syncStarredOn&&o.push(n.syncStarred)}return"string"!=typeof n.replaceWhitespace?o:""===n.replaceWhitespace?o.map(u):o.map(e=>e.replace(/\s/g,n.replaceWhitespace))};e.exports={formatAttachment:(e,t,r,a,i,n)=>{const o={...n};"string"!=typeof o.syncStarred&&(o.syncStarred="Starred Papers"),"string"!=typeof o.syncTrashed&&(o.syncTrashed="Trashed Papers"),"string"!=typeof o.syncAll&&(o.syncAll="All Papers"),"boolean"!=typeof o.syncStarredOn&&(o.syncStarredOn=!0),"boolean"!=typeof o.syncTrashedOn&&(o.syncTrashedOn=!0),"boolean"!=typeof o.syncAllOn&&(o.syncAllOn=!0),"string"!=typeof o.replaceWhitespace&&(o.replaceWhitespace=null),"string"!=typeof o.fallbackFolder&&(o.fallbackFolder="Other"),"string"!=typeof o.authorsDelimiter&&(o.authorsDelimiter=", "),"string"!=typeof o.twoAuthorsDelimiter&&(o.twoAuthorsDelimiter=" and "),o.abbreviateAuthorsPosition||(o.abbreviateAuthorsPosition="end"),"string"!=typeof o.abbreviateAuthorsString&&"end"===o.abbreviateAuthorsPosition&&(o.abbreviateAuthorsString=" et al."),"string"!=typeof o.abbreviateAuthorsString&&"middle"===o.abbreviateAuthorsPosition&&(o.abbreviateAuthorsString=" ... "),o.abbreviateFieldsPosition||(o.abbreviateFieldsPosition="middle"),"string"!=typeof o.abbreviateFieldsString&&(o.abbreviateFieldsString="...");let s=a,l=i;"string"!=typeof s&&(s="[FIRSTAUTHOR:1]/[Authors:1] [year] - [Filename]"),"string"!=typeof l&&(l=s);const c=[{name:"Main file pattern",str:s},{name:"Supplementary file pattern",str:l},{name:"All Papers folder name",str:o.syncAll},{name:"Trashed Papers folder name",str:o.syncTrashed},{name:"Starred Papers folder name",str:o.syncStarred},{name:"Fallback folder name",str:o.fallbackFolder},{name:"Combine two authors",str:o.twoAuthorsDelimiter,allowEmpty:!0},{name:"Combine multiple authors",str:o.authorsDelimiter,allowEmpty:!0},{name:"Abbreviate authors",str:o.abbreviateAuthorsString,allowEmpty:!0},{name:"Abbreviate other fields",str:o.abbreviateFieldsString,allowEmpty:!0}];for(let e=0;e<c.length;e+=1){if(!c[e].allowEmpty&&0===c[e].str.trim().length)throw new Error("The pattern cannot be empty");if(c[e].str.match(/[\\?]/g))throw new Error("The pattern cannot contain ? or \\");if(c[e].str.match(/\/\s*\//g))throw new Error("The pattern cannot contain an empty subfolder");if(c[e].str.match(/\/\s*$/g))throw new Error("The pattern cannot end with /")}return{fileName:b(e,t,s,l,o),folders:y(e,t,r,s,l,o)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testProxy=t.loginProxy=t.proxifyUrls=void 0;var a=r(26),i=r(736),n=r(42);const o="http://onlinelibrary.wiley.com/";t.proxifyUrls=(e,t)=>{const r=[];if(t)for(const i of t)for(const t of e)r.push((0,a.getLoginUrl)(i,t));return r};t.loginProxy=async e=>{if(e.url){const t=(0,a.getLoginUrl)(e.url,o),r=await(0,i.authorize)(t,new RegExp("^https?://onlinelibrary.wiley.com"),e.msg);return r&&{success:null==r?void 0:r.success,msg:null==r?void 0:r.rMsg}}};t.testProxy=async e=>{const t=e.url,r="saveBody"in e&&e.saveBody;let i="",s="",l="";if(t&&(i=(0,a.getLoginUrl)(t,o)),i){var c;let e=null;const u=new AbortController,{signal:d}=u,p=setTimeout(()=>{u.abort()},2e4);try{e=await fetch(i,{signal:d})}catch(t){e=null}finally{clearTimeout(p)}if(!e||200!==e.status)return{flag:!1,msg:"Ajax failure!"};let m=!0,h="Proxy is working";if(r&&(l=await e.text()),(0,a.isLoggedOut)(e.url))if(e.url===o)m=!0,h="Proxy is working - oncampus";else{m=!1,h="Not logged in";const r=(0,a.getDomain)(e.url),i=(0,a.getDomain)(t);r.domain===i.domain&&r.port!==i.port&&(h="Proxy-By-Port not supported")}return null!==(c=e)&&void 0!==c&&c.url&&(s=e.url,(0,n.logToPlack)("Proxy test",{url:i,responseUrl:e.url,status:h})),{flag:m,msg:h,responseUrl:s,responseBody:l}}return{flag:!1,msg:"No proxy configured",responseUrl:s,responseBody:l}}},,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patterns=t.TLDs=void 0;t.TLDs=["com","org","edu","gov","uk","net","ca","de","jp","fr","au","us","ru","ch","it","nl","se","no","es","br","info","cn","pl","in","biz","ir","eu","cz","ua","za","ro","gr","mx","tv","dk","at","co","be","tw","ar","me","vn","hu","af","ax","al","dz","as","ad","ao","ai","aq","ag","am","aw","az","bs","bh","bd","bb","by","bz","bj","bm","bt","bo","bq","ba","bw","bv","io","bn","bg","bf","bi","kh","cm","cv","ky","cf","td","cl","cx","cc","km","cg","cd","ck","cr","ci","hr","cu","cw","cy","dj","dm","do","ec","eg","sv","gq","er","ee","et","fk","fo","fj","fi","gf","pf","tf","ga","gm","ge","gh","gi","gl","gd","gp","gu","gt","gg","gn","gw","gy","ht","hm","va","hn","hk","is","id","iq","ie","im","il","jm","je","jo","kz","ke","ki","kw","kg","la","lv","lb","ls","lr","ly","li","lt","lu","mo","mk","mg","mw","my","mv","ml","mt","mh","mq","mr","mu","yt","fm","md","mc","mn","ms","ma","mz","mm","na","nr","np","nc","nz","ni","ne","ng","nu","nf","kp","mp","om","pk","pw","ps","pa","pg","py","pe","ph","pn","pt","pr","qa","re","rw","bl","sh","kn","lc","mf","pm","vc","ws","sm","st","sa","sn","rs","sc","sl","sg","sx","sk","si","sb","so","gs","kr","ss","lk","sd","sr","sj","sz","sy","tj","tz","th","tl","tg","tk","to","tt","tn","tr","tm","tc","ug","ae","gb","uy","uz","vu","ve","vg","vi","wf","eh","ye","zm","zw"];t.patterns={authenticationServices:["accounts.google.com","ebsco-gss.net","engine.surfconext.nl","gss.ebscohost.com","gssapps.ebscohost.com","widgets.ebscohost.com","iamcloud.net","login.microsoftonline.com","login.openathens.net","oauth.oclc.org","okta.com","onelogin.com","populiweb.com","quicklaunch.io","ssib.es","launchpad.classlink.com"],eduDomains:["edu","ac.[a-z][a-z]","edu.[a-z][a-z]","uni-.*.de","fh-.*.de",".uni[a-z]+.it","univ-[a-z\\d]+.fr"],subdomains:["adfs","authenticate","authentication","authentification","cas","ezlib","ezp","ezpauth","ezplib","ezproxy","ezproxy-auth","ezproxyauth","ezproxy-[a-z\\d]","ezproxylogin","ezproxy-prd","idcheck","idp","idpv","libaccess","libproxy","libraries","library","libraryssl","libresources","login","logon","oclc","proxy","proxylogin","shibboleth","sso","sso","webaccess","webauth","weblogon","weblogin","websso","www.lib"],domains:["bnl.lu","catalyst.net.nz","cnrs.fr","ensam.eu","exlibrisgroup.com","gu.se","hku.hk","hro.nl","journals.labiomed.org","mcgill.ca","nelliportaali.fi","nipissingu.ca","nist.gov","nrc-cnrc.gc.ca","nuigalway.ie","obspm.fr","statsbiblioteket.dk","surgeons.org","uam.mx","unam.mx","viu.ca","worldcat.org","wrlc.org","wur.nl"],pathPrimary:["authentication/idp/single-sign-on?SAMLRequest=","auth/login?.*service=","casfirst/login?.*service=","cas/login?.*service=","oam/server/obrareq.cgi?","v1/login?.*service=","webauth/login?.*service="],pathSecondary:["openid-connect/auth","signon/SAMS001_CDC.aspx","Koha/Plugin/OAKoha/OAKoha.pl","weblogin/web/openath|oala/auth","signon/SAMS001_CDC.aspx","oxauth/authorize.htm","acces-a-distance-ez-proxy","account/login.aspx?url=","account/login/?cb=","adfs/ls/","ATS_Shibboleth_IdP_Idm","/auth/","auth/authenticate.html?","auth.cgi?url","authenticationendpoint","authentification.html","auth/ezproxyauth.php","auth/index.php?action=login","auth/index.php?q*url=","authn/splash?url=","Authn/UserPassword","auth/ulib.pl?url","auth/?url=ezp","auth/?url=&source=ez","bin/cosign.cgi","bin/ezpmysqlssl.cgi","bluestem/login.cgi?","cas/login","CasProd&SAMLRequest=","cgi-bin/allinonelogin.pl","cgi-bin/login.pl","cgi-bin/ezlogin","cgi-bin/ezpauthn","cgi-bin/index.cgi?url=","cgi.proxy1.php?qurl","commonauth","connect?session=.*url=","cosign-scripts.libraries","discoveryLoginPage.html?.*shibboleth","DS/?shire=.*shibboleth","entityID=.*shibboleth","ezpauth.cgi?url","ezpAuthen.cgi?url=","ezpmysqlssl.cgi?url","EZproxy/auth-bigip/","ezproxy/Authentication/Authentication_Interface.php","ezproxy_auth.php?url","ezproxy.*.cgi?url","ezproxy/login.auth","ezproxylogin_louis_uno.x?url=","ezproxy-login?url=","ezproxylogin?url=","ezproxy/patsearch.php","ezproxy.php?url","/EZProxy?qurl=","ezproxy?url=","ezp-sso.pl?url","ezpws.exe?url=","ezticket/login","func=load-login&.*calling_system=","go_log.pl?url=","goproxyurl?url=","idcheck$","idp/Authn","idp/profile/cas/login","idp/profile/SAML2","idp/SSO.saml2","index.cfm?PID=.*targeturl=","ldapauth&cosign-Resources","les-ressources-en-ligne","libaccess/login.php?url","libauth/servlet/authMain","libproxy1/public/login.asp?","libproxy/index.cfm?url=","login/?action=login","/login.aspx?ReturnUrl","login?auth=","login/?cosign-http-library","Login?goto=","login/index.php?login_groups=","login/login.htm","login/oalogin.aspx","login/?ReturnUrl=.*url=","loginuserpass.php","login/uwe-auth","module.php/saml/disco.php?entityID=","nidp/idff/sso?","oaam_server","oala/auth","oala/login/","oauth2callback/ezproxyjs.php","oxauth/login?","pages/login.jsp","passivests","PatronCheckCAC.php?url=","profile/SAML2/POST/SSO","rpas/ezproxy.cgi","SAML2/Redirect/SSO?","saml2/sso","samlpost/oclc","SAMLRequest=","Shibboleth.sso/DS","Shibboleth.sso/SAML2","signin.asp?redirect=","signon/SAMSDefault/","spep/sso?redirectURL=","SSOService","uhtbin/ezproxylogin_","umbcLogin","useraction/login?acsURL","uwalogin.fcc?TYPE=","webauth/login?","web@logind?","Z-WEB/Aladin?"]}},function(e,t,r){"use strict";var a=r(2),i=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DefaultProfileImage=void 0;var n=i(r(0)),o=a(r(6)),s=i(r(21)),l=i(r(426));const c=o.default.img`
  ${e=>{let{disabled:t,size:r,styleName:a,disableHover:i}=e;return o.css`
    width: ${r}px;
    height: ${r}px;
    border-radius: ${"square"===a?4:2*r}px;
    opacity: ${t?.5:1};
    ${!t&&!i&&o.css`
      :hover {
        filter: brightness(80%);
      }
    `}
  `}}
`,u=o.default.div`
  ${e=>{let{disabled:t,size:r,styleName:a,disableHover:i}=e;return o.css`
    width: ${r}px;
    height: ${r}px;
    border-radius: ${"square"===a?4:2*r}px;
    opacity: ${t?.5:1};
    background-color: ${l.default.userImageBackground};

    svg {
      fill: ${l.default.userImageSvg};
    }
    display: inline-flex;
    align-items: center;
    justify-content: center;

    ${!t&&!i&&o.css`
      :hover {
        filter: brightness(80%);
      }
    `}
  `}}
`;t.DefaultProfileImage=e=>n.default.createElement(u,e,n.default.createElement(s.default,{name:"user"}));var d=c;t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(10);const{light:i}=a.uiConstants.colors;var n={userImageBackground:(0,a.themeMapper)({"webapp-light":i.gray[200],"webapp-dark":i.gray[200]}),userImageSvg:(0,a.themeMapper)({"webapp-light":i.gray[400],"webapp-dark":i.gray[400]})};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(10);const{light:i,dark:n}=a.uiConstants.colors;var o={border:(0,a.themeMapper)({"webapp-light":i.gray[0],"webapp-dark":n.gray[700]}),color:(0,a.themeMapper)({"webapp-light":i.gray[500],"webapp-dark":n.gray[300]}),nameColor:(0,a.themeMapper)({"webapp-light":i.gray[900],"webapp-dark":n.gray[100]}),profileImageBg:(0,a.themeMapper)({"webapp-light":i.gray[100],"webapp-dark":i.gray[100]})};t.default=o},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(6)),n=a(r(14));var o=i.default.div`
  ${e=>{let{size:t="medium",weight:r="regular"}=e;return n.default[r][t]}}
`;t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(10);const{colors:{dark:i}}=a.uiConstants;var n={color:(0,a.themeMapper)({"webapp-light":"inherit","webapp-dark":i.gray[300]})};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extract=t.getType=t.getErrorReason=t.isPatentNumber=t.isBibTeXKey=t.isMR=t.isZBL=t.isISMN=t.isISSN=t.isArxivID=t.isISBN=t.isPMC=t.isPMID=t.isDOI=t.isLCCN=void 0;var a=r(174);const i=e=>/^@[a-z]{4,}\s*\{/i.test(e),n=e=>/^TY\s+-\s*[a-zA-Z]/.test(e),o=e=>{const t=e.toUpperCase().trim().replace(/-/g,"");return/^\d+$/.test(t)};t.isLCCN=o;const s=e=>/^(doi)?:?\s*10\.\d{4,5}\/\S+/i.test(e);t.isDOI=s;const l=e=>/^\d{6,8}$/.test(e);t.isPMID=l;const c=e=>/^PMC\d+$/.test(e);t.isPMC=c;const u=e=>(0,a.extractISBNs)(e).length>0;t.isISBN=u;const d=e=>!!/^(arXiv:)?\d{4}\.\d{4,5}(v\d)?$/i.test(e)||/^(arXiv:)?(astro-ph|cond-mat|cs|econ|eess|gr-qc|hep-ex|hep-lat|hep-ph|hep-th|math|math-ph|nlin|nucl-ex|nucl-th|physics|q-bio|q-fin|quant-ph|stat)(\.[a-z-]+)?\/\d+/i.test(e);t.isArxivID=d;const p=e=>{const t=e.toUpperCase().trim().replace(/-/g,"");return/^\d{7}[\dX]$/.test(t)};t.isISSN=p;const m=e=>{const t=e.toUpperCase().trim().replace(/-/g,"");return/^9790[\dX]+$/.test(t)};t.isISMN=m;const h=e=>{const t=e.toUpperCase().trim().replace(/-/g,"");let r=!1;return/^\d{4}\.\d{5}$/.test(t)&&(r=!0),/^\d+$/.test(t)&&(r=!0),r};t.isZBL=h;const g=e=>{const t=e.toUpperCase().trim().replace(/-/g,"");return/^MR\d{7}/.test(t)};t.isMR=g;const f=e=>{let t=!0;return/[#%&{}()[\]]/.test(e)&&(t=!1),/[\r\t\n\s]/.test(e.trim())&&(t=!1),/[~!$^*=|:;"'<>.,?\\/]/.test(e)&&(t=!1),t};t.isBibTeXKey=f;t.isPatentNumber=e=>{const t=e.toUpperCase().trim().replace(/[:\-,]/g,"");return/^(CN|JP|US|DE|EP|KR|WO|GB|FR|CA|AU|TW|ES|RU|SU|IT|AT|BR|SE|CH|PL|NL|BE|DK|TH|NO|FI|MX|IL|ZA|UA|HU|DD|PT|CS|AR|HK|SG|NZ|CZ|IE|TR|GR|EA|MY|RO|IN|LU|PH|BG|YU|SI|CL|SK|CO|HR|MA|PE|LT|RS|CY|OA|UY|EC|MD|AP|ID|EG|CR|TN|LV|IS|SA|EE|GE|GT|CU|DO|JO|SM|ME|MC|ZM|ZW|PA|HN|NI|SV|DZ|KE|MW|MT|TJ|GC|MN|VN|BA|KZ|BY|UZ|KG|AM|TT|EM|MO)\d{4,}/.test(t)};t.getErrorReason=(e,t)=>{if("doi"===t&&!s(e)){if(!/^10\.\d{4,5}/i.test(e))return"doi:invalid-prefix";if(/^10\.\d{6,}\//i.test(e))return"doi:invalid-prefix";if(!/^10\.\d{4,5}\//i.test(e))return"doi:missing-slash";if(!/^10\.\d{4,5}\/.+/i.test(e))return"doi:missing-suffix"}if("pmid"===t&&!l(e)){if(/^\d+$/.test(e)&&e.length<6)return"pmid:too-short";if(/^\d+$/.test(e)&&e.length>8)return"pmid:too-long";if(!/^\d{6,8}$/.test(e))return"pmid:only-numbers-allowed"}if("pmc"===t&&!c(e)){const t=e.substring(0,3);if(/pmc/i.test(t)&&"PMC"!==t)return"pmc:invalid-pmc-prefix";if(!/^PMC/.test(e))return"pmc:missing-pmc-prefix";if(!/^PMC\d+$/.test(e))return"pmc:only-numbers-allowed"}if("isbn"===t&&!u(e)){if(!/^[\d\-X]+$/.test(e))return"isbn:invalid-chars";const t=e.replace(/-/g,"").length;if(/^[\d\-X]+$/.test(e)&&t<10)return"isbn:too-short";if(/^[\d\-X]+$/.test(e)&&(11===t||12===t))return"isbn:invalid-length";if(/^[\d\-X]+$/.test(e)&&t>13)return"isbn:too-long";if(10===t&&!(0,a.isISBN10)(e))return"isbn:invalid-isbn10";if(13===t&&!(0,a.isISBN13)(e))return"isbn:invalid-isbn13"}if("issn"===t&&!p(e)){if(!/^[\d\-X]+$/.test(e))return"issn:invalid-chars";if(/^[\d\-X]+$/.test(e)&&e.replace(/-/g,"").length<8)return"issn:too-short";if(/^[\d\-X]+$/.test(e)&&e.replace(/-/g,"").length>8)return"issn:too-long"}if("arxiv"===t&&!d(e)){const t=e.replace(/^\s*arxiv:\s*/i,"");if(/[^\d.vV]/.test(t))return"arxiv:invalid-chars";if(/^\d+/.test(t)&&!/^\d{4}\./.test(t))return"arxiv:prefix-invalid";if(/^\d+\.\d+/.test(t)&&!/^\d{4}\.\d{4,5}/.test(t))return"arxiv:suffix-invalid";if(!/^\d{4}\.\d{4,5}(v\d)?/i.test(t))return"arxiv:invalid-arxiv-id"}if("ismn"===t&&!m(e)){const t=e.replace(/-/i,"");if(!/^[\dX]+$/.test(t))return"ismn:invalid-chars";if(!t.startsWith("9790"))return"ismn:missing-ismn-prefix";if(13===t.length)return"ismn:invalid length";if(!/^[\dX]+$/.test(t))return"ismn:invalid-ismn"}if("zbl"===t&&!h(e)){if(!/^[\d.]+$/.test(e))return"zbl:invalid-chars";if(/^\d+/.test(e)&&!/^\d{4}\./.test(e))return"zbl:prefix-invalid";if(/^\d+\.\d+/.test(e)&&!/^\d{4}\.\d{5}/.test(e))return"zbl:suffix-invalid";if(!/^\d{4}\.\d{5}$/.test(e)&&!/^\d+$/.test(e))return"zbl:invalid-zbl"}if("mr"===t&&!g(e)){if(!/^[\d-]+$/.test(e))return"mr:invalid-chars";if(/^\d+/.test(e)&&!/^MR\d{7}/.test(e))return"mr:prefix-invalid";if(!/^MR\d{7}/.test(e))return"mr:invalid-mr"}if("bibtexkey"===t&&!f(e)){if(/[\s\t\n\r]/.test(e.trim()))return"bibtexkey:invalid-whitespace";if(/[~!*=|:;"'<>.,?\\/]/.test(e))return"bibtexkey:invalid-punctuation";if(/[$#%&{}()[\]]/.test(e))return"bibtexkey:invalid-special-chars"}return"lccn"!==t||o(e)||/^[\d-]+$/.test(e)?null:"lccn:invalid-chars"};const b=(e,t)=>{if(s(e))return"doi";if(l(e))return"pmid";if(c(e))return"pmc";if(d(e))return"arxiv";if(u(e))return"isbn";if((e=>/^https?:\/\/.+\..+/i.test(e))(e)){if(t){const t=e.replace(/^\s*https?:\/\/.*doi.org\//i,"");if(s(t))return"doi"}return"url"}return(e=>/^[a-z.\d-]{3,}\.(com|org|net|int|edu|gov|at|de|au|uk)\/\S+$/i.test(e))(e)?"url":(e=>/[a-z]{3,}\s[a-z]{3,}/i.test(e)&&/\d/i.test(e)&&/[,.():]/i.test(e))(e)?"reference":null};t.getType=b;const y=(e,t)=>{let r=e.trim().replace(/\.$/,"");return"url"!==t||/^https?:\/\//.test(r)||(r="http://"+r),"doi"===t&&(r=r.replace(/^\s*doi:?\s*/i,""),r=r.replace(/^\s*https?:\/\/.*doi.org\//i,"")),"arxiv"===t&&(r=r.replace(/^\s*arxiv:?\s*/i,"")),r.trim().replace(/^(doi)?:?/i,"").replace(/[\t\s].+/g,"").replace(/[,;]+$/,"").trim()},v=(e,t,r)=>{const a=[],i=[];for(const n of e.split(new RegExp(`\\s*${t}+\\s*`)))if(n.length>0){const e=b(n,r);null!==e&&"reference"!==e&&(a.push(y(n,e)),i.push(e))}return{blocks:a,types:i}};t.extract=(e,t)=>{let r=[],a=[];const o=e.split(/[\n\r]+/),s=o.length;for(const s of o){if(i(s))return{cleanedInput:e,types:["bibtex"]};if(n(s))return{cleanedInput:e,types:["ris"]};if(/[\da-z]/i.test(s)){const e=[v(s,"\\t",t),v(s,",",t),v(s,";",t),v(s,"\\s",t)],i=b(s,t),n=e.reduce((e,t)=>e.types.length>t.types.length?e:t);"reference"===i&&1===n.types.length&&"url"===n.types[0]?(r.push(s),a.push("reference")):n.types.length>0?(r=r.concat(n.blocks),a=a.concat(n.types)):"reference"===i&&(r.push(s),a.push("reference"))}}return r.length>0?{cleanedInput:r.join("\n"),types:[...new Set(a)],inputCount:s,cleanCount:r.length}:{cleanedInput:"",types:[],inputCount:s,cleanCount:0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={defaults:{abstract:{label:{"en-US":"Abstract"}},accessed:{default:"yearmonthday",help:{"en-US":"Date when the web page was accessed"},label:{"en-US":"Date accessed"}},address:{help:{"en-US":"The publisher's place e.g. New York, NY"},label:{"en-US":"Publisher place"}},affiliation:{help:{"en-US":"The organization the authors are affiliated with, typically a university, research institute or company"},label:{"en-US":"Affiliation"}},archive:{help:{"en-US":"Name of the archive where this document can be found e.g. American Heritage Center"},label:{"en-US":"Archive"}},archivePrefix:{help:{"en-US":"Name of the preprint archive e.g. arXiv and bioRxiv"},label:{"en-US":"Archive prefix"}},archive_location:{help:{"en-US":"Storage location within an archive (e.g. a box and folder number)"},label:{"en-US":"Archive location"}},archive_place:{help:{"en-US":"Place of the archive e.g. West Lafayette, IN"},label:{"en-US":"Archive place"}},arxivid:{help:{"en-US":"An identifier for e-print articles published on arXiv.org"},label:{"en-US":"Arxiv ID"}},associated_doi:{help:{"en-US":"One or more DOIs for the item with which this entry is associated."},label:{"en-US":"Associated DOI"}},author:{help:{"en-US":"The author(s)"},label:{"en-US":"Authors"}},call_number:{help:{"en-US":"Location in the library where the item can be found"},label:{"en-US":"Call number"}},chapter:{help:{"en-US":"The chapter number"},label:{"en-US":"Chapter"}},conference:{help:{"en-US":"The name of the conference where this work was presented e.g. Biology of Genomes"},label:{"en-US":"Conference"}},conference_date:{default:"yearmonthday",help:{"en-US":"Date when the conference was held"},label:{"en-US":"Conference date"}},conference_location:{help:{"en-US":"Location where the event was held"},label:{"en-US":"Conference location"}},contributor:{help:{"en-US":"Additional contributor(s)"},label:{"en-US":"Contributors"}},copyright:{help:{"en-US":"Copyright statement for the content"},label:{"en-US":"Copyright"}},database:{help:{"en-US":"The library catalog or database the item can be found in."},label:{"en-US":"Library catalog/database"}},department:{help:{"en-US":"The department at the university where the degree was awarded e.g. Department of Computer Science"},label:{"en-US":"Department"}},doi:{help:{"en-US":"A generic identifier for digital objects. Most journal articles have a unique DOI assigned on publication."},label:{"en-US":"DOI"}},edition:{help:{"en-US":"The book edition (1, 2, ...)"},label:{"en-US":"Edition"}},editor:{help:{"en-US":"The editor(s)"},label:{"en-US":"Editors"}},eprint:{help:{"en-US":"Identifier for the e-print article (e.g. 0707.3168)"},label:{"en-US":"Eprint ID"}},genre:{help:{"en-US":"Class, type or genre of the item"},label:{"en-US":"Custom subtype"}},history:{help:{"en-US":"Legal history: this explains what happened to the case on appeal to a higher appellate court"},label:{"en-US":"History"}},howpublished:{help:{"en-US":"How it was published, if the publishing method is nonstandard"},label:{"en-US":"How published"}},institution:{help:{"en-US":"The institution that was involved in the publishing, but not necessarily the publisher"},label:{"en-US":"Institution"}},isbn:{help:{"en-US":"An international identifier for books"},label:{"en-US":"ISBN"}},isbn_alt:{help:{"en-US":"A secondary or alternate ISBN (e.g. electronic or re-issued version)"},label:{"en-US":"ISBN (alt.)"}},ismn:{help:{"en-US":"An international identifier for notated music"},label:{"en-US":"ISMN"}},issn:{help:{"en-US":"An identifier for periodicals (journals, magazines)"},label:{"en-US":"ISSN"}},issn_alt:{help:{"en-US":"A secondary or alternate ISSN (e.g. online version of the journal)"},label:{"en-US":"ISSN (alt.)"}},issue:{help:{"en-US":"The issue number"},label:{"en-US":"Issue"}},journal:{help:{"en-US":"Title of the journal in abbreviated form"},label:{"en-US":"Journal"}},journalfull:{help:{"en-US":"Full title of the journal"},label:{"en-US":"Journal (full title)"}},jurisdiction:{help:{"en-US":"Jurisdiction (e.g. United States, United Kingdom)"},label:{"en-US":"Jurisdiction"}},keywords:{help:{"en-US":"Index terms added by the authors"},label:{"en-US":"Keywords"}},kind:{label:{"en-US":"Subtype"}},language:{help:{"en-US":"Language of the item as two letter ISO-code (e.g., en, de, fr, es, it). To avoid automatic title casing for Non-English citations set this field to another language."},label:{"en-US":"Language"}},lccn:{help:{"en-US":"An identifier for books published in the United States, managed by the Library of Congress"},label:{"en-US":"LCCN"}},legislative_body:{help:{"en-US":"Legislative body who made, amended or repealed the bill (e.g. Senate)"},label:{"en-US":"Legislative Body"}},medium:{help:{"en-US":"Medium of the media type (e.g. CD, DVD, VHS)"},label:{"en-US":"Medium"}},mr:{help:{"en-US":"An identifier to locate a specific record in the Mathematical Reviews (MR) database"},label:{"en-US":"MR Number"}},note:{label:{"en-US":"Notes"}},num_pages:{help:{"en-US":"The total number of pages in the book"},label:{"en-US":"Page count"}},num_volumes:{help:{"en-US":"The total number of volumes in the book series"},label:{"en-US":"Volume count"}},number:{label:{"en-US":"Number"}},online_source:{help:{},label:{"en-US":"Is online source"}},original_address:{help:{"en-US":"The original publisher's address"},label:{"en-US":"Original address"}},original_publisher:{help:{"en-US":"The original publisher's name, for works that have been republished by a different publisher"},label:{"en-US":"Original publisher"}},original_title:{help:{"en-US":"Title of the original work, e.g. for translated books"},label:{"en-US":"Original title"}},originally_published:{default:"year",help:{"en-US":"Date the work was originally published"},label:{"en-US":"Date of the original publication"}},pages:{help:{"en-US":"The range or starting page e.g. 201-213"},label:{"en-US":"Pages"}},pmc:{help:{"en-US":"An identifier for articles deposited in the PubMed Central open access repository"},label:{"en-US":"PMC ID"}},pmid:{help:{"en-US":"An identifier for articles in the PubMed database"},label:{"en-US":"PMID"}},primaryClass:{help:{"en-US":"Primary arXiv category (e.g. hep-th)"},label:{"en-US":"Primary class"}},published:{default:"year",help:{"en-US":"Date when the item was published"},label:{"en-US":"Date published"}},publisher:{help:{"en-US":"The publisher's name e.g. MIT Press"},label:{"en-US":"Publisher"}},pubtype:{label:{"en-US":{paperpile:"Type"}}},running_time:{help:{"en-US":"Running time e.g. 142 min"},label:{"en-US":"Running time"}},scale:{help:{"en-US":"The scale of a map e.g. 1:50.000"},label:{"en-US":"Scale"}},school:{help:{"en-US":"The degree-awarding institution e.g. University of Cambridge"},label:{"en-US":"University"}},section:{help:{"en-US":"Section number of the statute or bill"},label:{"en-US":"Section"}},series:{help:{"en-US":"The series the book was published"},label:{"en-US":"Series"}},series_editor:{help:{"en-US":"The series editor(s)"},label:{"en-US":"Series editors"}},series_number:{help:{"en-US":"Number of the series the book was published in"},label:{"en-US":"Series number"}},session:{help:{"en-US":"Session of the Congress"},label:{"en-US":"Session"}},socialmedia_handle:{help:{"en-US":"The social media handle from Twitter, Facebook, Instagram, and so on"},label:{"en-US":"Username"}},status:{help:{"en-US":"Publication status, such as 'in preparation', 'submitted', 'in revision', 'in press'"},label:{"en-US":"Status"}},title:{label:{"en-US":"Title"}},titleshort:{help:{"en-US":"Short version of the title"},label:{"en-US":"Short title"}},translator:{help:{"en-US":"The translator(s)"},label:{"en-US":"Translators"}},url:{help:{"en-US":{paperpile:"A list of URLs where this item can be accessed online (one per line)"}},label:{"en-US":{paperpile:"URLs"}}},user_citekey:{help:{"en-US":"Citation key for use with LaTeX/BibTeX. If not set Paperpile will assign a key automatically. If you set this field make sure it is unique in your library."},label:{"en-US":"BibTeX key"}},version:{help:{"en-US":"The software or device version e.g. '2.1.0'"},label:{"en-US":"Version"}},volume:{help:{"en-US":"The volume number"},label:{"en-US":"Volume"}},zbl:{help:{"en-US":"An identifier to locate a specific record in the Zentralblatt MATH database"},label:{"en-US":"Zbl number"}}},pubtypes:{PP_ARTICLE:{description:{"en-US":"Article in a scholarly journal"},fields:{default:["title","author","journal","journalfull","published","abstract","volume","issue","pages","url","doi","pmid","online_source"],valid:["title","author","journal","published","abstract","volume","issue","pages","url","doi","pmid","pubtype","original_title","titleshort","status","keywords","note","copyright","affiliation","language","kind","series","series_number","publisher","original_publisher","address","original_address","call_number","archivePrefix","archive","archive_location","archive_place","eprint","primaryClass","genre","database","editor","series_editor","contributor","translator","accessed","originally_published","user_citekey","issn","issn_alt","lccn","mr","zbl","arxivid","associated_doi","pmc"],values:{journal:{help:{"en-US":"Title of the journal in its standardized abbreviation if available"},label:{"en-US":"Journal"}},series:{help:{"en-US":"The series the article was published in ('Recent Advances in Medical Genetics')"},label:{"en-US":"Series"}},series_number:{help:{"en-US":"Number of the series the article was published in"},label:{"en-US":"Series Number"}},title:{help:{"en-US":"Title of the article"},label:{"en-US":"Title"}}}},label:{"en-US":"Journal article"},subtypes:{Commentary:{description:{"en-US":"An article providing a viewpoint"},fields:{default:[],values:{},void:[]},label:{"en-US":"Commentary"},modes:{paperpile:!0},synonyms:{"en-US":["Critique"]}},Editorial:{description:{"en-US":"An article expressing the editor's opinion"},fields:{default:[],values:{},void:[]},label:{"en-US":"Editorial"},modes:{paperpile:!0},synonyms:{"en-US":["Leading Article"]}},Erratum:{description:{"en-US":"A list of corrected errors appended to a publication"},fields:{default:[],values:{},void:[]},label:{"en-US":"Erratum"},modes:{paperpile:!0},synonyms:{"en-US":["Misprint"]}},"Letter to the Editor":{description:{"en-US":"A review article addressed to the editor"},fields:{default:[],values:{},void:[]},label:{"en-US":"Letter to the editor"},modes:{paperpile:!0},synonyms:{"en-US":["Editorial letter"]}},News:{description:{"en-US":"Newly received information"},fields:{default:[],values:{},void:[]},label:{"en-US":"News"},modes:{paperpile:!0},synonyms:{"en-US":["New information"]}},Opinion:{description:{"en-US":"An article providing a viewpoint"},fields:{default:[],values:{},void:[]},label:{"en-US":"Opinion"},modes:{paperpile:!0},synonyms:{"en-US":["Viewpoint"]}},"Research Article":{description:{"en-US":"Results of original research"},fields:{default:[],values:{},void:[]},label:{"en-US":"Research article"},modes:{paperpile:!0},synonyms:{"en-US":["Research paper"]}},Retracted:{description:{"en-US":"A retracted article"},fields:{default:[],values:{},void:[]},label:{"en-US":"Retracted"},modes:{paperpile:!0},synonyms:{"en-US":["Withdrawn article"]}},Review:{description:{"en-US":"An evaluation of a written work"},fields:{default:[],values:{},void:[]},label:{"en-US":"Review in journal"},modes:{paperpile:!0},synonyms:{"en-US":["Review article"]}}},synonyms:{"en-US":["Scientific article","Paper"]}},PP_ARTWORK:{description:{"en-US":"Painting, drawing, sculpture,\u2026"},fields:{default:["title","author","url","institution","address","published","medium"],valid:["title","author","url","institution","address","published","medium","pubtype","original_title","titleshort","abstract","keywords","note","copyright","affiliation","language","kind","series","series_number","number","howpublished","original_address","version","scale","call_number","archive","archive_location","archive_place","genre","database","contributor","translator","accessed","originally_published","user_citekey","lccn","doi"],values:{address:{help:{"en-US":"The city where the work resides"},label:{"en-US":"Address"}},author:{help:{"en-US":"The artist(s)"},label:{"en-US":"Artist"}},institution:{help:{"en-US":"The institution or individual who owns the work"},label:{"en-US":"Institution"}},medium:{help:{"en-US":"e.g. 'Oil on canvas'"},label:{"en-US":"Medium"}},published:{help:{"en-US":"Date the artwork was created"},label:{"en-US":"Date"}},scale:{help:{"en-US":"Size of the artwork"},label:{"en-US":"Size"}},title:{help:{"en-US":"Title of the artwork"},label:{}}}},label:{"en-US":"Artwork"},subtypes:{Calligraphy:{description:{"en-US":"The art of decorative handwriting"},fields:{default:[],values:{},void:[]},label:{"en-US":"Calligraphy"},modes:{paperpile:!0},synonyms:{"en-US":["Handwriting"]}},Drawing:{description:{"en-US":"An image made with pencil"},fields:{default:[],values:{},void:[]},label:{"en-US":"Drawing"},modes:{paperpile:!0},synonyms:{"en-US":["Illustration"]}},Painting:{description:{"en-US":"A painted picture"},fields:{default:[],values:{},void:[]},label:{"en-US":"Painting"},modes:{paperpile:!0},synonyms:{"en-US":["Picture"]}},Photography:{description:{"en-US":"The art of photographing"},fields:{default:[],values:{},void:[]},label:{"en-US":"Photography"},modes:{paperpile:!0},synonyms:{"en-US":["Photographic image"]}},Sculpture:{description:{"en-US":"A three-dimensional art object"},fields:{default:[],values:{},void:[]},label:{"en-US":"Sculpture"},modes:{paperpile:!0},synonyms:{"en-US":["Carving"]}}},synonyms:{"en-US":["Art piece"]}},PP_AUDIO:{description:{"en-US":"Published audio recording"},fields:{default:["title","author","publisher","url","published","medium","running_time","online_source"],valid:["title","author","publisher","url","published","medium","running_time","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","booktitle","series","series_number","volume","number","edition","original_publisher","address","original_address","version","conference","conference_location","call_number","num_volumes","archive","archive_location","archive_place","genre","database","editor","series_editor","contributor","translator","accessed","originally_published","conference_date","user_citekey","lccn","doi"],values:{author:{help:{"en-US":"The performer(s), the band, or the podcaster(s)"},label:{"en-US":"Performers"}},booktitle:{help:{"en-US":"Title of the album"},label:{"en-US":"Album name"}},conference:{help:{"en-US":"Event where the item was recorded"},label:{"en-US":"Event name"}},conference_date:{help:{"en-US":"Date of the event"},label:{"en-US":"Date of the event"}},conference_location:{help:{"en-US":"Place where the item was recorded"},label:{"en-US":"Event place"}},editor:{help:{"en-US":"The composer(s)"},label:{"en-US":"Composers"}},number:{help:{"en-US":"Number assigned to the episode"},label:{"en-US":"Episode Number"}},published:{help:{"en-US":"Date when the item was released"},label:{"en-US":"Date released"}},publisher:{help:{"en-US":"The name of the label e.g. 'Universal Music Group' or 'Warner Music Group'"},label:{"en-US":"Label or publisher"}},series_editor:{help:{"en-US":"The producer(s)"},label:{"en-US":"Producers"}}}},label:{"en-US":"Audio recording"},subtypes:{Concert:{description:{"en-US":"A musical performance"},fields:{default:[],values:{},void:[]},label:{"en-US":"Concert"},modes:{paperpile:!0},synonyms:{"en-US":["Musical Show"]}},Podcast:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Podcast"},modes:{paperpile:!0},synonyms:{"en-US":["Series of digital audio files"]}},Song:{description:{"en-US":"A musical composition"},fields:{default:[],values:{},void:[]},label:{"en-US":"Song"},modes:{paperpile:!0},synonyms:{"en-US":["Melody"]}}},synonyms:{"en-US":["Audio documentation"]}},PP_BILL:{description:{"en-US":"Bill"},fields:{default:["title","author","legislative_body","session","number","section","jurisdiction","url","published"],valid:["title","author","legislative_body","session","number","section","jurisdiction","url","published","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","language","kind","journal","volume","pages","call_number","history","database","contributor","translator","accessed","user_citekey","lccn","doi","associated_doi"],values:{author:{help:{"en-US":"Sponsor"},label:{"en-US":"Sponsor"}},journal:{help:{"en-US":"The official source for the bill (e.g. the United States Code or U.S.C.)"},label:{"en-US":"Code"}},number:{help:{"en-US":"Bill number"},label:{"en-US":"Bill number"}},pages:{help:{"en-US":"Code pages"},label:{"en-US":"Code pages"}},published:{help:{"en-US":"Date"},label:{"en-US":"Date"}},volume:{help:{"en-US":"Code volume"},label:{"en-US":"Code volume"}}}},label:{"en-US":"Bill"},subtypes:{},synonyms:{"en-US":["Legislation proposal"]}},PP_BOOK:{description:{"en-US":"A whole book"},fields:{default:["author","editor","title","publisher","address","published","online_source"],valid:["title","author","editor","published","publisher","address","series","volume","isbn","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","series_number","chapter","edition","pages","url","original_publisher","original_address","conference","conference_location","call_number","num_pages","num_volumes","archive","archive_location","archive_place","medium","genre","database","series_editor","contributor","translator","accessed","originally_published","conference_date","user_citekey","isbn_alt","lccn","mr","zbl","doi","associated_doi","issn","issn_alt"],values:{conference_location:{help:{"en-US":"Location where the conference was held"},label:{}},pages:{help:{"en-US":"The range or starting page, e.g. '210-213' or '210'"},label:{"en-US":"Pages cited"}},title:{help:{"en-US":"Title of the book"},label:{"en-US":"Title"}}},void:{}},label:{"en-US":"Book"},subtypes:{"Ancient Text":{description:{"en-US":"A text created in ancient times"},fields:{default:[],values:{},void:[]},label:{"en-US":"Ancient text"},modes:{paperpile:!0},synonyms:{"en-US":["Old text"]}},"Audio Book":{description:{"en-US":"Recording of a text being read."},fields:{default:[],values:{contributor:{label:{"en-US":"Narrator"}},published:{help:{"en-US":"Date when the item was released"},label:{"en-US":"Date released"}}},void:[]},label:{"en-US":"Audio book"},modes:{paperpile:!0},synonyms:{"en-US":["Taped book"]}},Booklet:{description:{"en-US":"A small book with information"},fields:{default:[],values:{},void:[]},label:{"en-US":"Booklet"},modes:{paperpile:!0},synonyms:{"en-US":["Pamphlet"]}},"Classical Work":{description:{"en-US":"A work with timeless quality"},fields:{default:[],values:{},void:[]},label:{"en-US":"Classical work"},modes:{paperpile:!0},synonyms:{"en-US":["Classical piece"]}},Dictionary:{description:{"en-US":"A book that lists the meaning of words"},fields:{default:[],values:{},void:[]},label:{"en-US":"Dictionary"},modes:{paperpile:!0},synonyms:{"en-US":["Glossary"]}},"Edited Book":{description:{"en-US":"An edited book is a collection of articles or chapters written by different authors on the same subject."},fields:{default:["editor","title","publisher","address","published"],values:{},void:["author"]},label:{"en-US":"Edited book"},modes:{paperpile:!1}},"Electronic Book":{description:{"en-US":"A digital book"},fields:{default:["author","title","publisher","address","published","edition","online_source","url","doi"],values:{},void:[]},label:{"en-US":"Electronic book"},modes:{paperpile:!0},synonyms:{"en-US":["E-Book"]}},Encyclopedia:{description:{"en-US":"A book containing many articles arranged in alphabetical order"},fields:{default:[],values:{},void:[]},label:{"en-US":"Encyclopedia"},modes:{paperpile:!0},synonyms:{"en-US":["Almanac"]}},Fiction:{description:{"en-US":"Prose literature with imaginary events and people"},fields:{default:[],values:{},void:[]},label:{"en-US":"Fiction"},modes:{paperpile:!0},synonyms:{"en-US":["Fantasy"]}},Monograph:{description:{"en-US":"A work of writing on a single subject."},fields:{default:[],values:{},void:[]},label:{"en-US":"Monograph"},modes:{paperpile:!0},synonyms:{"en-US":["Monograph"]}},Proceedings:{description:{"en-US":"Report of an event"},fields:{default:["editor","title","publisher","address","published"],values:{},void:["author"]},label:{"en-US":"Proceedings"},modes:{paperpile:!0},synonyms:{"en-US":["Accounts"]}},Textbook:{description:{"en-US":"A book to study a particular subject"},fields:{default:[],values:{},void:[]},label:{"en-US":"Textbook"},modes:{paperpile:!0},synonyms:{"en-US":["Reader"]}},"Translated Book":{description:{"en-US":"A book expressed in another language"},fields:{default:["author","translator","title","publisher","address","published"],values:{},void:[]},label:{"en-US":"Translated book"},modes:{paperpile:!1},synonyms:{"en-US":["Interpreted Book"]}}},synonyms:{"en-US":["Text"]}},PP_BOOK_CHAPTER:{description:{"en-US":"Book chapter with its own title and authors"},fields:{default:["booktitle","editor","title","pages","author","published","publisher","address","isbn","online_source"],valid:["abstract","series","volume","booktitle","editor","title","pages","author","abstract","published","publisher","address","series","volume","isbn","pubtype","original_title","titleshort","status","keywords","note","copyright","affiliation","language","kind","series_number","chapter","edition","url","original_publisher","original_address","conference","conference_location","call_number","num_volumes","archive","archive_location","archive_place","medium","genre","database","series_editor","contributor","translator","accessed","originally_published","conference_date","user_citekey","issn","issn_alt","isbn_alt","pmid","lccn","mr","zbl","doi","associated_doi","pmc"],values:{author:{help:{"en-US":"The chapter author(s)"},label:{"en-US":"Chapter authors"}},booktitle:{help:{"en-US":"Title of the book"},label:{"en-US":"Book title"}},conference_location:{help:{"en-US":"Location where the conference was held"},label:{"en-US":"Event place"}},editor:{help:{"en-US":"The book editor(s)"},label:{"en-US":"Book editors"}},pages:{help:{"en-US":"The range or starting page, e.g. '210-213' or '210'"},label:{"en-US":"Chapter pages"}},title:{help:{"en-US":"Title of the chapter"},label:{"en-US":"Chapter title"}}}},label:{"en-US":"Book chapter"},subtypes:{"Ancient Text":{description:{"en-US":"A text created in ancient times"},fields:{default:[],values:{},void:[]},label:{"en-US":"Ancient text"},modes:{paperpile:!0},synonyms:{"en-US":["Old text"]}},Appendix:{description:{"en-US":"Added material at end of document"},fields:{default:[],values:{},void:[]},label:{"en-US":"Appendix"},modes:{paperpile:!0},synonyms:{"en-US":["Addendum"]}},"Classical Work":{description:{"en-US":"A work with timeless quality"},fields:{default:[],values:{},void:[]},label:{"en-US":"Classical work"},modes:{paperpile:!0},synonyms:{"en-US":["Classical piece"]}},Dictionary:{description:{"en-US":"A book that lists the meaning of words"},fields:{default:[],values:{},void:[]},label:{"en-US":"Dictionary"},modes:{paperpile:!0},synonyms:{"en-US":["Glossary"]}},"Electronic Book":{description:{"en-US":"Chapter in a digital book with its own title and authors"},fields:{default:[],values:{},void:[]},label:{"en-US":"Chapter in an electronic book"},modes:{paperpile:!0},synonyms:{"en-US":["E-Book"]}},Fiction:{description:{"en-US":"Prose literature with imaginary events and people"},fields:{default:[],values:{},void:[]},label:{"en-US":"Fiction"},modes:{paperpile:!0},synonyms:{"en-US":["Fantasy"]}},Monograph:{description:{"en-US":"Chapter in a monograph, with its own title and authors"},fields:{default:[],values:{},void:[]},label:{"en-US":"Chapter in a monograph"},modes:{paperpile:!0},synonyms:{"en-US":["Chapter in a monograph"]}},Textbook:{description:{"en-US":"Chapter in a textbook with its own title and authors"},fields:{default:[],values:{},void:[]},label:{"en-US":"Chapter in a textbook"},modes:{paperpile:!0},synonyms:{"en-US":["Reader"]}}},synonyms:{"en-US":["Book Chapter"]}},PP_BROADCAST:{description:{"en-US":"Radio or TV broadcast"},fields:{default:["title","booktitle","author","publisher","address","number","url","published","medium","running_time"],valid:["title","booktitle","author","publisher","address","number","url","published","medium","running_time","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","series","series_number","volume","edition","original_publisher","original_address","conference","conference_location","call_number","num_volumes","archive","archive_location","archive_place","genre","database","editor","series_editor","contributor","translator","accessed","originally_published","conference_date","user_citekey","doi"],values:{address:{help:{"en-US":"Address of the network"},label:{}},author:{help:{"en-US":"The director(s)"},label:{"en-US":"Directors"}},booktitle:{help:{"en-US":"Title of the program"},label:{"en-US":"Program Title"}},conference:{help:{"en-US":"Name of the event"},label:{"en-US":"Event name"}},conference_date:{help:{"en-US":"Date of the event"},label:{"en-US":"Date of the event"}},conference_location:{help:{"en-US":"Event where the broadcast was recorded"},label:{"en-US":"Event place"}},editor:{help:{"en-US":"The cast member(s) or reporter(s)"},label:{"en-US":"Cast members"}},medium:{help:{"en-US":"e.g. 'Radio broadcast' or 'TV broadcast'"},label:{"en-US":"Format"}},number:{help:{"en-US":"Number of the current episode"},label:{"en-US":"Episode Number"}},published:{help:{"en-US":"Date when the broadcast was aired"},label:{"en-US":"Broadcast date"}},publisher:{help:{"en-US":"The network's name e.g. 'BBC' or 'HBO'"},label:{"en-US":"Network"}},series_editor:{help:{"en-US":"The producer(s)"},label:{"en-US":"Producers"}},title:{help:{"en-US":"Title of the broadcast"},label:{}}}},label:{"en-US":"Broadcast"},subtypes:{"Radio broadcast":{description:{"en-US":"The distribution of audio content"},fields:{default:[],values:{},void:[]},label:{"en-US":"Radio broadcast"},modes:{paperpile:!0},synonyms:{"en-US":["Radio transmission"]}},"TV broadcast":{description:{"en-US":"The distribution of video content"},fields:{default:[],values:{},void:[]},label:{"en-US":"TV broadcast"},modes:{paperpile:!0},synonyms:{"en-US":["TV transmission"]}}},synonyms:{"en-US":["Transmission"]}},PP_CASE:{description:{"en-US":"Legal case"},fields:{default:["title","journal","court","volume","pages","jurisdiction","url","published","number"],valid:["title","journal","court","volume","pages","jurisdiction","url","published","number","pubtype","original_title","titleshort","abstract","keywords","note","copyright","affiliation","language","kind","series_number","journalfull","edition","call_number","genre","history","section","database","contributor","translator","accessed","filed","user_citekey","lccn","doi","associated_doi"],values:{court:{help:{"en-US":"Court (e.g. Supreme Court or Court of Appeals)"},label:{"en-US":"Court"}},filed:{help:{"en-US":"Date when the case was filed"},label:{"en-US":"Filing date"}},journal:{help:{"en-US":"Abbreviation of the reporter (publication containing the opinions of a particular court or jurisdiction)"},label:{"en-US":"Reporter"}},journalfull:{help:{"en-US":"The reporter fully spelled out"},label:{"en-US":"Full reporter name"}},number:{help:{"en-US":"Docket number"},label:{"en-US":"Docket number"}},pages:{help:{"en-US":"First page of the case in the given volume"},label:{"en-US":"First page"}},published:{help:{"en-US":"Date of decision"},label:{"en-US":"Date decided"}},series_number:{help:{"en-US":"The year used as volume number"},label:{"en-US":"Year as volume"}},title:{help:{"en-US":"Case name"},label:{"en-US":"Case name"}},volume:{help:{"en-US":"Volume number"},label:{"en-US":"Reporter volume"}}}},label:{"en-US":"Case"},subtypes:{},synonyms:{}},PP_COMPUTER_PROGRAM:{description:{"en-US":"Software run on a computer"},fields:{default:["title","author","version","medium","published","url"],valid:["title","author","version","medium","published","url","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","publisher","original_publisher","institution","address","original_address","call_number","genre","database","contributor","translator","accessed","originally_published","user_citekey","doi","associated_doi"],values:{medium:{help:{"en-US":"Operating system (OS X, Android, ...)"},label:{"en-US":"System"}},title:{help:{"en-US":"Name of the program"},label:{}}}},label:{"en-US":"Computer program"},subtypes:{"Business software":{description:{"en-US":"A software used for business purposes"},fields:{default:[],values:{},void:[]},label:{"en-US":"Business software"},modes:{paperpile:!0},synonyms:{"en-US":["Business computer program"]}},Database:{description:{"en-US":"A structured set of data held in a computer"},fields:{default:[],values:{},void:[]},label:{"en-US":"Database"},modes:{paperpile:!0},synonyms:{"en-US":["Collection of data"]}},"Graphics software":{description:{"en-US":"A software used to create or edit images"},fields:{default:[],values:{},void:[]},label:{"en-US":"Graphics software"},modes:{paperpile:!0},synonyms:{"en-US":["Graphics editor"]}},"Programming language":{description:{"en-US":"Vocabulary for instructing a computer"},fields:{default:[],values:{},void:[]},label:{"en-US":"Programming language"},modes:{paperpile:!0},synonyms:{"en-US":["Computer language"]}},"Scientific software":{description:{"en-US":"Software used for science"},fields:{default:[],values:{},void:[]},label:{"en-US":"Scientific software"},modes:{paperpile:!0},synonyms:{"en-US":["Scientific computer program"]}},Script:{description:{"en-US":"An automated series of instructions"},fields:{default:[],values:{},void:[]},label:{"en-US":"Script"},modes:{paperpile:!0},synonyms:{"en-US":["Scripting language"]}},"Statistics software":{description:{"en-US":"Software used for statistics"},fields:{default:[],values:{},void:[]},label:{"en-US":"Statistics software"},modes:{paperpile:!0},synonyms:{"en-US":["Statistics computer program"]}},"System software":{description:{"en-US":"A software that provides a platform for other software"},fields:{default:[],values:{},void:[]},label:{"en-US":"System software"},modes:{paperpile:!0},synonyms:{"en-US":["Computer software"]}},Utility:{description:{"en-US":"A software designed to help configure a computer"},fields:{default:[],values:{},void:[]},label:{"en-US":"Utility"},modes:{paperpile:!0},synonyms:{"en-US":["Utility software"]}},"Video game":{description:{"en-US":"A game played in a computer"},fields:{default:[],values:{},void:[]},label:{"en-US":"Video game"},modes:{paperpile:!0},synonyms:{"en-US":["Computer game"]}}},synonyms:{"en-US":["System Program"]}},PP_CONFERENCE_PAPER:{description:{"en-US":"Paper published in the proceedings of a conference"},fields:{default:["title","booktitle","author","editor","pages","published","institution","series","publisher","address","abstract","conference","conference_location","conference_date"],valid:["title","booktitle","author","editor","pages","published","institution","series","publisher","address","abstract","conference","conference_location","conference_date","pubtype","original_title","titleshort","status","keywords","note","copyright","affiliation","language","kind","series_number","volume","number","url","original_publisher","original_address","call_number","archive","archive_location","archive_place","genre","database","series_editor","contributor","translator","accessed","originally_published","user_citekey","issn","issn_alt","isbn","isbn_alt","pmid","lccn","mr","zbl","doi","associated_doi","pmc"],values:{booktitle:{help:{"en-US":"Title of the conference proceedings"},label:{"en-US":"Proceedings title"}},conference_location:{help:{"en-US":"Location where the conference was held"},label:{}},series:{help:{"en-US":"Conference proceedings series"},label:{}},title:{help:{"en-US":"Title of the paper"},label:{}}}},label:{"en-US":"Conference paper"},subtypes:{},synonyms:{"en-US":["Conference publication"]}},PP_DATASET:{description:{"en-US":"A dataset with its own DOI or webpage"},fields:{default:["title","author","url","doi","published","accessed","booktitle","associated_doi"],valid:["title","author","url","doi","published","accessed","booktitle","associated_doi","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","edition","publisher","original_publisher","address","original_address","version","call_number","archive","archive_location","archive_place","genre","database","editor","contributor","translator","originally_published","user_citekey"],values:{associated_doi:{help:{"en-US":"The DOI of the publication with which this dataset is associated"},label:{"en-US":"Publication DOI"}},author:{help:{"en-US":"The dataset author(s)"},label:{"en-US":"Dataset author(s)"}},booktitle:{help:{"en-US":"The title of the publication associated with this dataset"},label:{"en-US":"Publication title"}},doi:{help:{"en-US":"A generic identifier for digital objects. Some datasets have a unique DOI assigned on publication."},label:{"en-US":"Dataset DOI"}},title:{help:{"en-US":"Title of the dataset"},label:{"en-US":"Dataset name"}},url:{help:{"en-US":"URL of the dataset"},label:{"en-US":"Dataset URL"}}}},label:{"en-US":"Dataset"},subtypes:{},synonyms:{"en-US":["Set of data"]}},PP_ENCYCLOPEDIA_ARTICLE:{description:{"en-US":"An article in an encyclopedia"},fields:{default:["title","booktitle","pages","author","abstract","published","publisher","address"],valid:["title","booktitle","pages","author","abstract","published","publisher","address","pubtype","original_title","titleshort","status","keywords","note","copyright","affiliation","language","kind","chapter","volume","edition","url","original_publisher","original_address","conference","conference_location","call_number","num_volumes","archive","archive_location","archive_place","genre","database","editor","contributor","translator","accessed","originally_published","conference_date","user_citekey","issn","issn_alt","isbn","isbn_alt","lccn","mr","zbl","doi","associated_doi"],values:{booktitle:{help:{"en-US":"Title of the encyclopedia"},label:{"en-US":"Encyclopedia title"}},conference_location:{help:{"en-US":"Location where the conference was held"},label:{}},title:{help:{"en-US":"Title of the article"},label:{}}}},label:{"en-US":"Encyclopedia article"},subtypes:{},synonyms:{"en-US":["Encyclopedia publication"]}},PP_FIGURE:{description:{"en-US":"Published graph, chart,\u2026"},fields:{default:["title","author","publisher","url","published","medium","number"],valid:["title","author","publisher","url","published","medium","number","pubtype","original_title","titleshort","abstract","keywords","note","copyright","affiliation","language","kind","edition","original_publisher","address","original_address","version","conference","conference_location","call_number","archive","archive_location","archive_place","genre","database","contributor","translator","accessed","originally_published","conference_date","user_citekey","lccn","doi"],values:{conference:{help:{"en-US":"Name of the event"},label:{"en-US":"Event name"}},conference_date:{help:{"en-US":"Date of the event"},label:{"en-US":"Date of the event"}},conference_location:{help:{"en-US":"Event where the item was presented"},label:{"en-US":"Event place"}},medium:{help:{"en-US":"e.g. 'Online image'"},label:{"en-US":"Format"}},title:{help:{"en-US":"Figure title"},label:{}}}},label:{"en-US":"Figure"},subtypes:{Chart:{description:{"en-US":"A sheet of information in the form of a table, graph, or diagram"},fields:{default:[],values:{},void:[]},label:{"en-US":"Chart"},modes:{paperpile:!0},synonyms:{"en-US":["Graph"]}},Drawing:{description:{"en-US":"An image illustrating something"},fields:{default:[],values:{},void:[]},label:{"en-US":"Drawing"},modes:{paperpile:!0},synonyms:{"en-US":["Illustration"]}},Graph:{description:{"en-US":"A diagram showing the relation between variable quantities"},fields:{default:[],values:{},void:[]},label:{"en-US":"Graph"},modes:{paperpile:!0},synonyms:{"en-US":["Diagram"]}},Image:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Image"},modes:{paperpile:!0},synonyms:{"en-US":["Illustration"]}},Photography:{description:{"en-US":"A photographic image"},fields:{default:[],values:{},void:[]},label:{"en-US":"Photography"},modes:{paperpile:!0},synonyms:{"en-US":["Picture"]}}},synonyms:{"en-US":["Symbol"]}},PP_GRANT:{description:{"en-US":"Grant application"},fields:{default:["title","author","number","publisher","published","num_pages"],valid:["title","author","number","publisher","published","num_pages","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","edition","url","address","call_number","genre","database","editor","contributor","translator","accessed","filed","user_citekey","doi"],values:{filed:{help:{"en-US":"Date when the grant was submitted"},label:{"en-US":"Date submitted"}},published:{help:{"en-US":"Date when the grant was approved"},label:{"en-US":"Date granted"}},publisher:{help:{"en-US":"The sponsoring agency the grant was submitted to"},label:{"en-US":"Sponsoring agency"}},title:{help:{"en-US":"Title of the grant"},label:{}}}},label:{"en-US":"Grant"},subtypes:{},synonyms:{"en-US":["Subvention"]}},PP_INTERVIEW:{description:{"en-US":"A published or personal interview"},fields:{default:["author","editor","published","abstract","conference","conference_location","conference_date","genre","url"],valid:["author","editor","published","abstract","conference","conference_location","conference_date","genre","url","pubtype","title","original_title","titleshort","keywords","note","copyright","affiliation","language","kind","journal","journalfull","volume","number","issue","pages","publisher","original_publisher","address","original_address","call_number","num_pages","num_volumes","archive","archive_location","archive_place","database","translator","accessed","originally_published","user_citekey","lccn","doi","associated_doi"],values:{author:{help:{"en-US":"Name of the person that is interviewed"},label:{"en-US":"Interview with"}},conference:{help:{"en-US":"Name of the event"},label:{"en-US":"Event name"}},conference_date:{help:{"en-US":"Date of the event"},label:{"en-US":"Date of the event"}},conference_location:{help:{"en-US":"Event where the interview was conducted"},label:{"en-US":"Event place"}},editor:{help:{"en-US":"The interviewer(s)"},label:{"en-US":"Interviewer"}},genre:{help:{"en-US":"Type of interview e.g.'Personal Interview', Phone Interview', 'Skype Interview'"},label:{"en-US":"Type"}},journal:{help:{"en-US":"Title of the magazine in its standardized abbreviation if available"},label:{"en-US":"Magazine"}},published:{help:{"en-US":"Date when the interview was conducted or published"},label:{"en-US":"Date"}}}},label:{"en-US":"Interview"},subtypes:{},synonyms:{"en-US":["Questioning"]}},PP_LETTER:{description:{"en-US":"A letter with sender and recipient"},fields:{default:["author","published","editor","abstract","series","archive","archive_location","archive_place","url"],valid:["author","published","editor","abstract","series","archive","archive_location","archive_place","url","pubtype","title","original_title","titleshort","keywords","note","copyright","affiliation","language","kind","series_number","volume","number","publisher","original_publisher","address","original_address","conference","conference_location","call_number","num_pages","num_volumes","genre","database","series_editor","translator","accessed","originally_published","conference_date","user_citekey","lccn","doi","associated_doi"],values:{author:{help:{"en-US":"The sender(s)"},label:{"en-US":"Sender"}},conference_location:{help:{"en-US":"Location where the conference was held"},label:{}},editor:{help:{"en-US":"The recipient(s)"},label:{"en-US":"Recipient"}},published:{help:{"en-US":"Date when the letter was written"},label:{"en-US":"Date"}},series:{help:{"en-US":"Name of the collection e.g. 'William H. Sager China Marines Photograph Collection'"},label:{"en-US":"Collection"}},series_editor:{help:{"en-US":"The collection editor(s)"},label:{"en-US":"Collection editor"}},series_number:{help:{"en-US":"Number of the collection"},label:{"en-US":"Collection number"}}}},label:{"en-US":"Letter"},subtypes:{},synonyms:{"en-US":["Correspondence"]}},PP_MANUAL:{description:{"en-US":"Instruction manual or other type of documentation"},fields:{default:["title","version","author","institution","published","url"],valid:["title","version","author","institution","published","url","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","number","edition","pages","publisher","original_publisher","address","original_address","call_number","num_pages","genre","database","editor","contributor","translator","accessed","originally_published","user_citekey","isbn","isbn_alt","doi","associated_doi"],values:{institution:{help:{"en-US":"The organization or institution that publishes the manual"},label:{}},title:{help:{"en-US":"Title of the document"},label:{}},version:{help:{"en-US":"Version of the product this manual is about"},label:{}}}},label:{"en-US":"Manual or documentation"},subtypes:{},synonyms:{"en-US":["Instruction booklet"]}},PP_MANUSCRIPT:{description:{"en-US":"Documents stored in an archive"},fields:{default:["title","author","series","archive","archive_location","archive_place","url","published"],valid:["title","author","series","archive","archive_location","archive_place","url","published","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","series_number","volume","pages","howpublished","publisher","original_publisher","address","original_address","call_number","num_pages","num_volumes","genre","database","editor","series_editor","contributor","translator","accessed","originally_published","user_citekey","isbn","isbn_alt","lccn","doi","associated_doi"],values:{series:{help:{"en-US":"Name of the collection e.g. 'William H. Sager China Marines Photograph Collection'"},label:{"en-US":"Collection"}},series_editor:{help:{"en-US":"Collection editor(s)"},label:{"en-US":"Editor of the collection"}},series_number:{help:{"en-US":"Number of the collection"},label:{"en-US":"Collection number"}},title:{help:{"en-US":"Title of the manuscript"},label:{}}}},label:{"en-US":"Archival material"},subtypes:{},synonyms:{"en-US":["Archival document"]}},PP_MAP:{description:{"en-US":"Published map"},fields:{default:["title","author","url","scale","publisher","address","published"],valid:["title","author","url","scale","publisher","address","published","pubtype","original_title","titleshort","abstract","keywords","note","copyright","affiliation","language","kind","series","series_number","number","edition","howpublished","original_publisher","original_address","version","call_number","archive","archive_location","archive_place","genre","database","editor","series_editor","contributor","translator","accessed","originally_published","user_citekey","lccn","doi"],values:{author:{help:{"en-US":"The cartographer(s)"},label:{"en-US":"Cartographer"}}}},label:{"en-US":"Map"},subtypes:{},synonyms:{"en-US":["Chart of geographic area"]}},PP_MISC:{description:{"en-US":"Miscellaneous reference or resource"},fields:{default:["title","author","howpublished","url","published"],valid:["title","author","howpublished","url","published","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","booktitle","series","series_number","journal","journalfull","chapter","volume","number","issue","edition","pages","publisher","original_publisher","institution","school","department","address","original_address","version","scale","conference","conference_location","call_number","num_pages","num_volumes","archivePrefix","archive","archive_location","archive_place","eprint","primaryClass","running_time","medium","genre","database","editor","series_editor","contributor","translator","accessed","originally_published","conference_date","user_citekey","issn","issn_alt","isbn","isbn_alt","ismn","pmid","lccn","mr","zbl","arxivid","doi","associated_doi","pmc"],values:{booktitle:{help:{"en-US":"The title of the book that this item appears in"},label:{"en-US":"Book title"}},conference_location:{help:{"en-US":"Location where the conference was held"},label:{}},journal:{help:{"en-US":"Title of the journal in its standardized abbreviation if available"},label:{}},title:{help:{"en-US":"Title of the item"},label:{}}}},label:{"en-US":"Miscellaneous"},subtypes:{},synonyms:{"en-US":["Diverse"]}},PP_NEWS_ARTICLE:{description:{"en-US":"Article in a newspaper, magazine, or other periodical"},fields:{default:["title","author","journalfull","pages","published"],valid:["title","author","abstract","journal","pages","volume","issue","edition","published","pubtype","original_title","titleshort","keywords","note","copyright","affiliation","language","kind","journalfull","url","publisher","original_publisher","address","original_address","call_number","num_volumes","archive","archive_location","archive_place","genre","database","editor","translator","accessed","originally_published","user_citekey","issn","issn_alt","lccn","doi","num_pages"],values:{edition:{help:{"en-US":"The edition of the magazine or newspaper e.g. 'European edition'"},label:{"en-US":"Edition"}},journal:{help:{"en-US":"Title of the magazine or newspaper in its standardized abbreviation if available"},label:{"en-US":"Newspaper"}},journalfull:{help:{"en-US":"Full title of the magazine or newspaper"},label:{"en-US":"Newspaper (full title)"}},title:{help:{"en-US":"Title of the article"},label:{}}}},label:{"en-US":"News article"},subtypes:{"Magazine Article":{description:{"en-US":"Article in a magazine"},fields:{default:[],values:{journal:{help:{"en-US":"Title of the magazine in its standardized abbreviation"},label:{"en-US":"Newspaper (Abbreviation)"}},journalfull:{help:{"en-US":"Full title of the magazine"},label:{"en-US":"Magazine"}}},void:[]},label:{"en-US":"Magazine article"},modes:{paperpile:!0},synonyms:{"en-US":["Magazine publication"]}},"Newspaper Article":{description:{"en-US":"Article in a newspaper"},fields:{default:[],values:{journal:{help:{"en-US":"Title of newspaper in its standardized abbreviation"},label:{"en-US":"Newspaper (Abbreviation)"}},journalfull:{help:{"en-US":"Full title of the newspaper"},label:{"en-US":"Newspaper"}}},void:[]},label:{"en-US":"Newspaper article"},modes:{paperpile:!0},synonyms:{"en-US":["Newspaper publication"]}}},synonyms:{"en-US":["News publication"]}},PP_PATENT:{description:{"en-US":"Published patent"},fields:{default:["title","author","assignee","issuing_authority","patent_number","filed","published","abstract"],valid:["title","author","assignee","issuing_authority","patent_number","filed","published","abstract","pubtype","original_title","titleshort","status","keywords","note","copyright","affiliation","language","kind","journal","journalfull","url","institution","address","original_address","patent_publication_type","application_number","class","international_class","search_class","states","priority_numbers","foreign_patents","call_number","genre","database","contributor","translator","accessed","originally_published","user_citekey","issn","issn_alt","doi"],values:{application_number:{help:{"en-US":"The number assigned to the initial patent application (e.g., '09/458811')"},label:{"en-US":"Application number"}},assignee:{help:{"en-US":"The individual or organization to which the patent was assigned"},label:{"en-US":"Assignee"}},author:{help:{"en-US":"The inventor(s)"},label:{"en-US":"Inventors"}},class:{help:{"en-US":"The category / class of the invention (within the issuing authority's classification system)"},label:{"en-US":"Class"}},filed:{help:{"en-US":"Date when the patent was filed"},label:{"en-US":"Date filed"}},foreign_patents:{help:{"en-US":"A list of patent numbers for any associated foreign patents"},label:{"en-US":"Foreign references"}},international_class:{help:{"en-US":"The category / class of the invention within the International Patent Classification (IPC) scheme"},label:{"en-US":"International class"}},issuing_authority:{help:{"en-US":"The patent issuing authority (e.g. US, Japan, Germany, EC)"},label:{"en-US":"Issuing authority"}},journal:{help:{"en-US":"Type of patent (e.g. US Patent, International Patent)"},label:{"en-US":"Type of patent"}},journalfull:{help:{"en-US":"The full name of the authority / office issuing the patent (e.g., 'United States Patent and Trademark Office')"},label:{"en-US":"Issuing office full name"}},patent_number:{help:{"en-US":"The patent number without the preceding country / authority code (e.g., '3990438' NOT 'US3990438')"},label:{"en-US":"Patent number"}},patent_publication_type:{help:{"en-US":"The type of patent publication (e.g., 'patent' or 'application')"},label:{"en-US":"Patent publication type"}},priority_numbers:{help:{"en-US":"A list of patent application numbers for which priority is claimed"},label:{"en-US":"Priority numbers"}},search_class:{help:{"en-US":"An extended list of classes covering the invention categories relevant to this patent"},label:{"en-US":"Field of search"}},states:{help:{"en-US":"A list of states specified by the inventor when filed with WIPO or EPO"},label:{"en-US":"Designated states"}},title:{help:{"en-US":"Title of the patent"},label:{"en-US":"Patent title"}}}},label:{"en-US":"Patent"},subtypes:{"Defensive Publication":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Defensive publication"},modes:{paperpile:!0},synonyms:{}},"Design Patent":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Design patent"},modes:{paperpile:!0},synonyms:{}},"Patent Application":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Patent application"},modes:{paperpile:!0},synonyms:{"en-US":["Patent request"]}},"Plant Patent":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Plant patent"},modes:{paperpile:!0},synonyms:{}},"Reissue Patent":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Reissue patent"},modes:{paperpile:!0},synonyms:{}},"Statutory Invention Registration":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Statutory invention registration"},modes:{paperpile:!0},synonyms:{}},"Utility Patent":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Utility patent"},modes:{paperpile:!0},synonyms:{}}},synonyms:{"en-US":["Copyright"]}},PP_PERIODICAL:{description:{"en-US":"Journal, Magazine, or Newspaper"},fields:{default:["title","editor","publisher","volume","num_volumes","issue","issn","issn_alt","published"],valid:["title","editor","publisher","volume","num_volumes","issue","issn","issn_alt","published","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","number","edition","url","howpublished","original_publisher","address","original_address","call_number","genre","database","contributor","translator","accessed","user_citekey","isbn","isbn_alt","lccn","doi"],values:{genre:{help:{"en-US":"Title of the issue"},label:{"en-US":"Issue title"}},howpublished:{help:{"en-US":"Frequency (monthly, weekly, daily)"},label:{"en-US":"Frequency"}},published:{help:{"en-US":"Date or date range the periodical was published"},label:{}}}},label:{"en-US":"Periodical"},subtypes:{Journal:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Journal"},modes:{paperpile:!0},synonyms:{}},Magazine:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Magazine"},modes:{paperpile:!0},synonyms:{}},Newspaper:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Newspaper"},modes:{paperpile:!0},synonyms:{}}},synonyms:{"en-US":["Regular publication"]}},PP_PERSONAL_COMMUNICATION:{description:{"en-US":"Information or data received via personal communication"},fields:{default:["author","published","editor","abstract"],valid:["author","published","editor","abstract","pubtype","title","original_title","titleshort","keywords","note","copyright","affiliation","language","kind","volume","number","url","publisher","original_publisher","address","original_address","conference","conference_location","call_number","archive","archive_location","archive_place","database","translator","accessed","originally_published","conference_date","user_citekey","lccn","doi","associated_doi"],values:{author:{help:{"en-US":"Name of author or source"},label:{"en-US":"Author or source"}},conference:{help:{"en-US":"Event where the communication took place"},label:{}},conference_date:{help:{"en-US":"Date of the event"},label:{}},editor:{help:{"en-US":"The recipient(s)"},label:{"en-US":"Recipient"}},published:{help:{"en-US":"Date when the communication took place"},label:{"en-US":"Date"}}}},label:{"en-US":"Personal communication"},subtypes:{Conversation:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Conversation"},modes:{paperpile:!0},synonyms:{"en-US":["Discourse"]}},"E-mail":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"E-mail"},modes:{paperpile:!0},synonyms:{"en-US":["E-mail"]}},Letter:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Letter"},modes:{paperpile:!0},synonyms:{"en-US":["Correspondence"]}},Message:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Message"},modes:{paperpile:!0},synonyms:{"en-US":["Note"]}}},synonyms:{"en-US":["Private communication"]}},PP_PREPRINT:{description:{"en-US":"Preprint version of a manuscript or working paper"},fields:{default:["title","author","journal","institution","series","number","published","url"],valid:["title","author","journal","institution","series","number","published","url","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","issue","pages","howpublished","conference","conference_location","call_number","num_pages","archivePrefix","archive","archive_location","archive_place","eprint","primaryClass","genre","database","editor","contributor","translator","accessed","conference_date","user_citekey","arxivid","doi","associated_doi"],values:{conference_location:{help:{"en-US":"Location where the conference was held"},label:{}},journal:{help:{"en-US":"Database or archive where the preprint manuscript was deposited"},label:{"en-US":"Source"}},num_pages:{help:{"en-US":"The total number of pages of the manuscript"},label:{}},number:{help:{"en-US":"Number of the working paper"},label:{}},series:{help:{"en-US":"The series the working paper was published in <br>'Working Paper Series'"},label:{}},title:{help:{"en-US":"Title of the manuscript"},label:{}}}},label:{"en-US":"Preprint"},subtypes:{},synonyms:{"en-US":["Manuscript in advance"]}},PP_PRESENTATION:{description:{"en-US":"Talk or other presentation"},fields:{default:["title","conference","conference_location","author","abstract","published","url"],valid:["title","conference","conference_location","author","abstract","published","url","pubtype","original_title","titleshort","status","keywords","note","copyright","affiliation","language","kind","publisher","original_publisher","address","original_address","call_number","genre","database","contributor","translator","accessed","originally_published","conference_date","user_citekey","lccn","doi","associated_doi","series"],values:{author:{help:{"en-US":"The presenter(s)"},label:{"en-US":"Presenter"}},conference:{help:{"en-US":"Name of the event"},label:{"en-US":"Event name"}},conference_date:{help:{"en-US":"Date when the event took place"},label:{"en-US":"Date of the event"}},conference_location:{help:{"en-US":"Event where the presentation took place"},label:{"en-US":"Event place"}},journal:{help:{"en-US":"Event where the presentation took place"},label:{"en-US":"Event place"}},published:{help:{"en-US":"Date when the presentation was held"},label:{"en-US":"Date"}},title:{help:{"en-US":"Title of the presentation"},label:{}}}},label:{"en-US":"Presentation"},subtypes:{"Conference talk":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Conference talk"},modes:{paperpile:!0},synonyms:{"en-US":["Conference presentation"]}},Lecture:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Lecture"},modes:{paperpile:!0},synonyms:{"en-US":["Educational talk"]}},"Poster presentation":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Poster presentation"},modes:{paperpile:!0},synonyms:{"en-US":["Poster presentation"]}},Reading:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Reading"},modes:{paperpile:!0},synonyms:{}},Seminar:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Seminar"},modes:{paperpile:!0},synonyms:{"en-US":["Workshop"]}},Workshop:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Workshop"},modes:{paperpile:!0},synonyms:{"en-US":["Seminar"]}}},synonyms:{"en-US":["Talk"]}},PP_REPORT:{description:{"en-US":"Report published by a university or organization"},fields:{default:["title","author","number","institution","published","num_pages"],valid:["title","author","number","institution","published","num_pages","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","series","series_number","volume","edition","pages","url","publisher","original_publisher","address","original_address","conference","conference_location","call_number","archive","archive_location","archive_place","genre","database","editor","series_editor","contributor","translator","accessed","originally_published","conference_date","user_citekey","issn","issn_alt","isbn","isbn_alt","lccn","doi"],values:{conference:{help:{"en-US":"Event where the report was presented"},label:{"en-US":"Event name"}},conference_date:{help:{"en-US":"Date when the event took place"},label:{"en-US":"Date of the event"}},conference_location:{help:{"en-US":"Location where the conference was held"},label:{"en-US":"Event place"}},pages:{help:{"en-US":"The range or starting page, e.g. '210-213' or '210'"},label:{"en-US":"Pages cited"}},series:{help:{"en-US":"The series the report was published in ('Recent Advances in Medical Genetics')"},label:{}},series_number:{help:{"en-US":"Number of the series the report was published in"},label:{}},title:{help:{"en-US":"Title of the report"},label:{}}}},label:{"en-US":"Report"},subtypes:{"Government Report":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Government report"},modes:{paperpile:!0},synonyms:{"en-US":["Government Account"]}},Guideline:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Guideline"},modes:{paperpile:!0},synonyms:{"en-US":["Instruction"]}},"Technical Report":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Technical report"},modes:{paperpile:!0},synonyms:{}},"White Paper":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"White paper"},modes:{paperpile:!0},synonyms:{}}},synonyms:{"en-US":["Account"]}},PP_REVIEW:{description:{"en-US":"A published review of a book or film"},fields:{default:["title","author","booktitle","contributor","journal","published","volume","issue","pages","url"],valid:["title","author","booktitle","contributor","journal","published","volume","issue","pages","url","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","series","series_number","journalfull","chapter","edition","publisher","original_publisher","address","original_address","call_number","num_pages","num_volumes","archive","archive_location","archive_place","genre","database","editor","series_editor","translator","accessed","originally_published","user_citekey","issn","issn_alt","isbn","isbn_alt","lccn","mr","zbl","doi","associated_doi"],values:{booktitle:{help:{"en-US":"The title of the reviewed item"},label:{"en-US":"Title of the reviewed item"}},contributor:{help:{"en-US":"The author(s) of the reviewed item"},label:{"en-US":"Reviewed author"}},journal:{help:{"en-US":"Title of the journal in its standardized abbreviation if available"},label:{}},title:{help:{"en-US":"Title of the book"},label:{}}}},label:{"en-US":"Book or film review"},subtypes:{"Book review":{description:{"en-US":"A published review of a book"},fields:{default:[],values:{},void:[]},label:{"en-US":"Book review"},modes:{paperpile:!0},synonyms:{}},"Film review":{description:{"en-US":"A published review of a film"},fields:{default:[],values:{title:{help:{"en-US":"Title of the film"},label:{"en-US":"Title"}}},void:[]},label:{"en-US":"Film review"},modes:{paperpile:!0},synonyms:{}}},synonyms:{"en-US":["Book or film commentary"]}},PP_SCORE:{description:{"en-US":"Sheet music"},fields:{default:["title","author","number","publisher","address","published","ismn"],valid:["title","author","number","publisher","address","published","ismn","pubtype","original_title","titleshort","abstract","keywords","note","copyright","affiliation","language","kind","series","series_number","volume","url","original_publisher","original_address","version","call_number","num_pages","num_volumes","archive","archive_location","archive_place","genre","database","editor","series_editor","contributor","translator","accessed","filed","originally_published","user_citekey","lccn","doi"],values:{author:{help:{"en-US":"The composer(s)"},label:{"en-US":"Composer"}},filed:{help:{"en-US":"The date of the composition"},label:{"en-US":"Composition date"}},number:{help:{"en-US":"Number of composition, e.g. 'KV 216'"},label:{}},title:{help:{"en-US":"Title of the composition, e.g. 'Sonata in Es'"},label:{}}}},label:{"en-US":"Musical score"},subtypes:{},synonyms:{"en-US":["Musical Composition"]}},PP_STANDARD:{description:{"en-US":"A standard issued by ISO, ANSI, \u2026"},fields:{default:["title","author","number","published","num_pages","publisher","address"],valid:["title","author","number","published","num_pages","publisher","address","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","language","kind","edition","pages","url","original_publisher","original_address","call_number","genre","database","translator","accessed","originally_published","user_citekey","doi"],values:{author:{help:{"en-US":"The name of the issuing agency in braces e.g. {International Organization for Standardization}"},label:{"en-US":"Issuing Agency"}},pages:{help:{"en-US":"The range or starting page, e.g. '210-213' or '210'"},label:{"en-US":"Pages cited"}},title:{help:{"en-US":"Title of the standard"},label:{}}}},label:{"en-US":"Standard"},subtypes:{},synonyms:{}},PP_STATUTE:{description:{"en-US":"Statute"},fields:{default:["title","journal","volume","pages","section","number","history","jurisdiction","url","published","filed"],valid:["title","journal","volume","pages","section","number","history","jurisdiction","url","published","filed","pubtype","original_title","titleshort","abstract","keywords","note","copyright","language","kind","series_number","journalfull","chapter","call_number","session","legislative_body","database","contributor","translator","accessed","user_citekey","lccn","doi","associated_doi"],values:{filed:{help:{"en-US":"Date when the statute was amended"},label:{"en-US":"Date amended"}},journal:{help:{"en-US":"The official source for statutes (e.g. U.S.C.)"},label:{"en-US":"Code"}},journalfull:{help:{"en-US":"The official source for statutes (e.g. United States Code)"},label:{"en-US":"Full name of the Code"}},number:{help:{"en-US":"Public Law Number"},label:{"en-US":"Public Law Number"}},published:{help:{"en-US":"Date when the statute was enacted"},label:{"en-US":"Date enacted"}},series_number:{help:{"en-US":"Regnal year"},label:{"en-US":"Regnal year"}},title:{help:{"en-US":"Name of act"},label:{"en-US":"Name of act"}},volume:{help:{"en-US":"Code number"},label:{"en-US":"Code number"}}}},label:{"en-US":"Statute"},subtypes:{},synonyms:{"en-US":["Law"]}},PP_THESIS:{description:{"en-US":"Thesis for a Ph.D. or other degree"},fields:{default:["title","author","school","address","genre","published"],valid:["title","author","editor","school","department","genre","published","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","url","publisher","original_publisher","address","original_address","call_number","num_pages","archive","archive_location","archive_place","database","contributor","accessed","originally_published","user_citekey","isbn","isbn_alt","lccn","doi"],values:{address:{help:{"en-US":"The place the university or college is located e.g. New York, NY"},label:{"en-US":"University place"}},editor:{help:{"en-US":"The advisor(s) of the thesis"},label:{"en-US":"Advisor"}},genre:{help:{"en-US":"Awarded degree or level (e.g. BSc, MSc, Phd, Doctoral Dissertation, ...)"},label:{"en-US":"Level of thesis"}},num_pages:{help:{"en-US":"The total number of pages of the thesis"},label:{"en-US":"Number of pages"}},title:{help:{"en-US":"Title of the thesis"},label:{}}}},label:{"en-US":"Thesis"},subtypes:{"Bachelor's Thesis":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Bachelor's thesis"},modes:{paperpile:!0},synonyms:{"en-US":["Bachelor paper"]}},Habilitation:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Habilitation"},modes:{paperpile:!0},synonyms:{}},"Masters Thesis":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Masters thesis"},modes:{paperpile:!0},synonyms:{"en-US":["Master's paper"]}},"Ph.D. Thesis":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Ph.D. thesis"},modes:{paperpile:!0},synonyms:{"en-US":["Ph.D. Dissertation"]}},"Undergraduate Thesis":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Undergraduate thesis"},modes:{paperpile:!0},synonyms:{"en-US":["Undergraduate paper"]}}},synonyms:{"en-US":["Dissertation"]}},PP_TREATY:{description:{"en-US":"Treaty (International law)"},fields:{default:["title","author","journal","volume","pages","number","url","published"],valid:["title","author","journal","volume","pages","number","url","published","pubtype","original_title","titleshort","abstract","keywords","note","copyright","language","kind","journalfull","publisher","call_number","section","database","contributor","translator","accessed","filed","user_citekey","lccn","doi","associated_doi"],values:{author:{help:{"en-US":"Names of the signing parties"},label:{"en-US":"Names of the parties"}},filed:{help:{"en-US":"Date signed"},label:{"en-US":"Date signed"}},journal:{help:{"en-US":"Name of the source that published the text of the treaty"},label:{"en-US":"Source"}},journalfull:{help:{"en-US":"Full name of the source (e.g. United Nations Treaty Series)"},label:{"en-US":"Full name of source"}},published:{help:{"en-US":"Date in force"},label:{"en-US":"Date in force"}},title:{help:{"en-US":"Title of the agreement (e.g. Kyoto Protocol to the United Nations Framework Convention on Climate Change)"},label:{"en-US":"Title of the agreement"}}}},label:{"en-US":"Treaty"},subtypes:{},synonyms:{"en-US":["Agreement"]}},PP_UNPUBLISHED:{description:{"en-US":"Work that has not been formally published"},fields:{default:["title","author","published"],valid:["title","author","published","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","number","url","conference","conference_location","call_number","archive","archive_location","archive_place","genre","database","contributor","translator","accessed","conference_date","user_citekey"],values:{conference:{help:{"en-US":"Name of the event"},label:{"en-US":"Event name"}},conference_date:{help:{"en-US":"Date of the event"},label:{"en-US":"Date of the event"}},conference_location:{help:{"en-US":"Event where the interview was conducted"},label:{"en-US":"Event place"}},published:{help:{"en-US":"Date when the document was created"},label:{"en-US":"Date"}},title:{help:{"en-US":"Title of the document"},label:{}}}},label:{"en-US":"Unpublished item"},subtypes:{},synonyms:{}},PP_VIDEO:{description:{"en-US":"Published video recording or film"},fields:{default:["title","author","publisher","address","url","published","medium","running_time"],valid:["title","author","publisher","address","url","published","medium","running_time","pubtype","original_title","titleshort","status","abstract","keywords","note","copyright","affiliation","language","kind","series","series_number","volume","number","edition","original_publisher","original_address","version","conference","conference_location","call_number","num_volumes","archive","archive_location","archive_place","genre","database","editor","series_editor","contributor","translator","accessed","originally_published","conference_date","user_citekey","lccn","doi","socialmedia_handle"],values:{address:{help:{"en-US":"Country where the movie or film was produced"},label:{"en-US":"Country"}},author:{help:{"en-US":"The director(s)"},label:{"en-US":"Directors"}},conference:{help:{"en-US":"Name of the event"},label:{"en-US":"Event name"}},conference_date:{help:{"en-US":"Date of the event"},label:{"en-US":"Date of the event"}},conference_location:{help:{"en-US":"Place of the event"},label:{"en-US":"Event place"}},editor:{help:{"en-US":"The cast member(s)"},label:{"en-US":"Cast members"}},published:{help:{"en-US":"Date when the video or film was released"},label:{"en-US":"Date released"}},publisher:{help:{"en-US":"The name of the studio or distributor e.g. 'Walt Disney Pictures', '20th Century Fox', 'YouTube'"},label:{"en-US":"Studio or distributor"}},series_editor:{help:{"en-US":"The producer(s)"},label:{"en-US":"Producers"}},title:{help:{"en-US":"Title of film or video"},label:{}}}},label:{"en-US":"Video or film"},subtypes:{Film:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Film"},modes:{paperpile:!0},synonyms:{}},"Online Video":{description:{},fields:{default:[],values:{author:{help:{"en-US":"The person who created/uplodaed the video"},label:{"en-US":"Creator"}}},void:[]},label:{"en-US":"Online video"},modes:{paperpile:!0},synonyms:{"en-US":["Youtube","Vimeo"]}},"TV Series":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"TV series"},modes:{paperpile:!0},synonyms:{"en-US":["TV Program"]}},Video:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Video"},modes:{paperpile:!0},synonyms:{}}},synonyms:{}},PP_WEBSITE:{description:{"en-US":"Website accessed online"},fields:{default:["title","booktitle","url","author","accessed","published","online_source"],valid:["title","booktitle","url","author","accessed","published","pubtype","original_title","titleshort","abstract","keywords","note","copyright","affiliation","language","kind","publisher","original_publisher","address","original_address","call_number","genre","database","contributor","translator","originally_published","user_citekey","doi","associated_doi","online_source","socialmedia_handle"],values:{booktitle:{help:{"en-US":"Title of the website"},label:{"en-US":"Website name"}},title:{help:{"en-US":"Title of the page"},label:{}}}},label:{"en-US":"Website"},subtypes:{Article:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Article"},modes:{paperpile:!0},synonyms:{"en-US":["Text"]}},"Blog post":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Blog post"},modes:{paperpile:!0},synonyms:{"en-US":["Blog article"]}},Database:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Database"},modes:{paperpile:!0},synonyms:{"en-US":["Collection of data"]}},"Forum post":{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Forum post"},modes:{paperpile:!0},synonyms:{"en-US":["Forum comment"]}},Tweet:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Tweet"},modes:{paperpile:!0},synonyms:{}},Wikipedia:{description:{},fields:{default:[],values:{},void:[]},label:{"en-US":"Wikipedia article"},modes:{paperpile:!0},synonyms:{}}},synonyms:{"en-US":["Web page"]}}},tokens:{author:{"en-US":"separated by semicolons.</p> <p>Names of persons are entered in the form of <i>Last name, given names</i>.</p> <p>Names of organizations are put in braces: {Organization name}.</p> <p>Here is an example: Knuth, Donald E; Moore, Ronald W;{1000 Genomes Consortium}</p>"}}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSharedItemUrl=t.getNameForURL=t.typeMap=t.cleanNameForURL=t.base64ToUuid=t.uuidToBase64=void 0;const a=e=>{const t=e.replace(/-/g,"");return btoa(String.fromCharCode.apply(null,t.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").map(e=>parseInt(e,16)))).replace(/\//g,"_").replace(/\+/g,"~").replace(/=+$/,"")};t.uuidToBase64=a;t.base64ToUuid=e=>{const t=e.replace(/_/g,"/").replace(/~/g,"+"),r=atob(t);let a,i="";for(const e of r){const t=r.indexOf(e);a=r.charCodeAt(t).toString(16),i+=2===a.length?a:"0"+a}if(i=i.toLowerCase(),i.length<32)return i;return i.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")};const i=e=>{const t=e.replace(/[ `~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/g,"-"),r=e=>e.replace(/([-]{2,})/g,"-").replace(/([-]$)/,"");try{return r(encodeURIComponent(t))}catch(e){return r(t)}};t.cleanNameForURL=i;const n={l:"label",f:"folder",u:"user",t:"library",p:"pub",s:"list"};t.typeMap=n;const o=(e,t,r)=>{const o=Object.keys(n).find(e=>n[e]===r);return o?"s"===o?`${o}${a(t)}`:`${i(e)}-${o}${a(t)}`:""};t.getNameForURL=o;t.createSharedItemUrl=e=>function(t,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const i=o(a,t,r);return e.isDev?`${e.apiUrl}/api/public/webview/render/${i}`:`${e.contentUrl}/shared/${i}`}},function(e,t,r){"use strict";e.exports=class{constructor(e){this.PP=e,this.levels={doc:"doc",lib:"lib",additionalLib:"lib",web:"web"}}_assignDuplicate(e,t,r,a){t!==r&&(t in e||(e[t]={doc:[],lib:[],web:[]}),a=this.levels[a],-1===e[t][a].indexOf(r)&&e[t][a].push(r))}_buildIDList(e){const t=[];if(!("sha1"in e)){const r=this.PP.library.Publication.sha1(e);r&&"da39a3ee5e6b4b0d3255bfef95601890afd80709"!==r&&t.push("sha1:"+r)}return this.PP.library.Publication.collectIdList(e).forEach(e=>{t.push(e)}),t}_getDetailedIDList(e,t,r,a){if((Array.isArray(e.id_list)?e.id_list:this._buildIDList(e)).forEach(e=>{const a=e.replace(/^([^:]+)(:.+)/,"$1");e in r||(r[e]=[!1,!1,a]),r[e][t]=!0}),e.source_id){const a="source_id:"+e.source_id;a in r||(r[a]=[!1,!1,"source_id"]),r[a][t]=!0}if(e.guru_id&&a){const a="guru_id:"+e.guru_id;a in r||(r[a]=[!1,!1,"guru_id"]),r[a][t]=!0}}_comparePubs(e,t,r,a){let i=!0;if(e.ignore_duplicates&&e.ignore_duplicates.indexOf(t._id)>-1&&(i=!1),t.ignore_duplicates&&t.ignore_duplicates.indexOf(e._id)>-1&&(i=!1),e.ignore_duplicates&&t.source_id&&e.ignore_duplicates.indexOf(t.source_id)>-1&&(i=!1),t.ignore_duplicates&&e.source_id&&t.ignore_duplicates.indexOf(e.source_id)>-1&&(i=!1),i){i=!1;const n={};this._getDetailedIDList(e,0,n,r),this._getDetailedIDList(t,1,n,r);const o={},s={};let l=!1;Object.keys(n).forEach(e=>{if(n[e][0]&&n[e][1])n[e][0]&&n[e][1]&&(s[n[e][2]]=[],s[n[e][2]].push(e));else{n[e][2]in o||(o[n[e][2]]=[[],[]]);const t=!0===n[e][0]?0:1;o[n[e][2]][t].push(e)}});const c=[];if(Object.keys(o).forEach(r=>{r.match(/^(doi|pmid|pmc|arxivid|dup_sha1)$/)?o[r][0].length>0&&o[r][1].length>0&&c.push(r):"source_id"===r&&(e._id!==t.source_id&&t._id!==e.source_id||(l=!0))}),0===c.length)i=!0;else if("web"===a){let e=0;Object.keys(s).forEach(t=>{t.match(/^(doi|pmid|pmc|arxivid)$/)&&1===s[t].length&&(e+=1)}),e>0&&1===c.length&&"dup_sha1"===c[0]&&(i=!0)}l&&(i=!0)}return i}_evalInternalDuplicates(e,t){const r={},a=[];for(let e=0;e<t.length;e+=1)for(let r=e+1;r<t.length;r+=1)a.push([e,r]);return a.forEach(a=>{this._comparePubs(t[a[0]],t[a[1]])&&this._assignDuplicate(r,t[a[0]]._id,t[a[1]]._id,e)}),r}_mergeDuplicates(e,t){Object.keys(e).forEach(r=>{["doc","lib","web"].forEach(a=>{e[r][a].forEach(e=>{this._assignDuplicate(t,r,e,a)})})})}_evalDuplicates(e,t,r,a,i,n){const o={};return a.forEach(a=>{r.forEach(r=>{this._comparePubs(a,r,n,e)&&this._assignDuplicate(o,a._id,r._id,t)})}),o}getDuplicates(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const i={};null==a&&(a={});const n={doc:e||[],lib:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||[],additionalLib:[],web:t||[]};t&&"function"==typeof r&&t.forEach(e=>{let t=r(e);null==t?t=[]:"string"==typeof t?t=[t]:"object"!=typeof t||Array.isArray(t)||(t=[t]),Array.isArray(t)||(t=[]);const a={};t.forEach(t=>{"string"==typeof t?this._assignDuplicate(i,e._id,t,"lib"):null!==t&&"object"==typeof t&&t._id&&(t._id in a||(a[t._id]=t))}),Object.keys(a).forEach(e=>{n.additionalLib.push(a[e])})});const o={};Object.keys(n).forEach(e=>{n[e].forEach((t,r)=>{(Array.isArray(t.id_list)&&t.id_list.length>0?t.id_list:this._buildIDList(t)).forEach(t=>{t in o||(o[t]={doc:[],lib:[],web:[],additionalLib:[]}),o[t][e].push(r)}),t.source_id&&("source:"+t.source_id in o||(o["source:"+t.source_id]={doc:[],lib:[],web:[],additionalLib:[]}),o["source:"+t.source_id][e].push(r)),"source:"+t._id in o&&o["source:"+t._id][e].push(r),t.guru_id&&a.useGuruID&&("guru_id:"+t.guru_id in o||(o["guru_id:"+t.guru_id]={doc:[],lib:[],web:[],additionalLib:[]}),o["guru_id:"+t.guru_id][e].push(r))})});const s={internal:{},cross:{}};return Object.keys(o).forEach(e=>{["doc","lib"].forEach(t=>{if(o[e][t].length>1){const r=`${t}|${o[e][t].join(",")}`;r in s.internal||(s.internal[r]=[t,o[e][t].map(e=>n[t][e]),[]]),s.internal[r][2].push(e)}}),[{lowerLevel:"lib",higherLevel:"doc"},{lowerLevel:"additionalLib",higherLevel:"doc"},{lowerLevel:"web",higherLevel:"doc"},{lowerLevel:"web",higherLevel:"lib"},{lowerLevel:"web",higherLevel:"additionalLib"}].forEach(t=>{if(o[e][t.lowerLevel].length>0&&o[e][t.higherLevel].length>0){const r=`${t.lowerLevel}|${o[e][t.lowerLevel].join(",")}|${t.higherLevel}|${o[e][t.higherLevel].join(",")}`;r in s.cross||(s.cross[r]=[t.lowerLevel,t.higherLevel,o[e][t.higherLevel].map(e=>n[t.higherLevel][e]),o[e][t.lowerLevel].map(e=>n[t.lowerLevel][e]),[]]),s.cross[r][4].push(e)}})}),Object.keys(s.cross).forEach(e=>{this._mergeDuplicates(this._evalDuplicates(s.cross[e][0],s.cross[e][1],s.cross[e][2],s.cross[e][3],s.cross[e][4],a.useGuruID),i)}),Object.keys(s.internal).forEach(e=>{this._mergeDuplicates(this._evalInternalDuplicates(s.internal[e][0],s.internal[e][1]),i)}),i}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(18);const i=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779\xd0"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"OE",letters:"\x8c\u0152"},{base:"oe",letters:"\x9c\u0153"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],n={};for(let e=0;e<i.length;e+=1){const{letters:t}=i[e];for(let r=0;r<t.length;r+=1)n[t[r]]=i[e].base}t.default=e=>{const t=e=>{const t=e.match(/<[^> ]+[^>]*>[^<]*/g);if(!t)return[e];const r=t,a=e.split(t[0]);return a[0]&&a[1]&&a[0]!==a[1]?(r.unshift(a[0]),r):r},r=(e,t,r,a)=>r.slice(0,e)+a+r.slice(e+Math.abs(t)),i=e=>e.replace(/[^\u0000-\u007E]/g,e=>n[e]||e),o=(e,t)=>{let a=e,i=a.match(/<highlight>|<\/highlight>/i),n=t;for(;i;)i&&void 0!==i.index&&n.charAt(i.index)!==a.charAt(i.index)&&(n=r(i.index||0,0,n,i[0])),a=r(i.index||0,i[0].length,a,new Array(i[0].length+1).join("*")),i=a.match(/<highlight>|<\/highlight>/i);return n||""},s=(e,t)=>{const r=i(e),a=r.replace(t,a=>{const i=t.exec(r);if(i&&(i[0].match(/^</)||i.index>0&&e.substring(i.index-1)&&!e.substring(i.index-1).match(/^\W/)&&(n=e.substring(i.index,i.index+i[0].length))!==n.toUpperCase()))return i[0];var n;let o;return i&&(o=e.substring(i.index,i.index+i[0].length)),`<highlight>${o&&o.match(/[^\u0000-\u007E]/g)?o:a}</highlight>`});return o(a,e)},l=(e,r)=>{if(!e)return[""];const a=r&&r.searchTerms;if(!a)return t(e);const n=a.split(/\s+/).filter(e=>!(r&&!0!==r.allowShortStrings&&e.length<=2)&&""!==e).map(e=>(e=>{if(!e)return"";return e.replace(new RegExp("^[\u2018\u2019\u201b\u201c\u201d\u201e\u201f\xa8\"'`\\-\\(\\[\\{\\)\\]\\}\\,;:\\?\\!]+","i"),"").replace(new RegExp("[\u2018\u2019\u201b\u201c\u201d\u201e\u201f\xa8\"'`\\-\\(\\[\\{\\)\\]\\}\\,;:\\?\\!]+$","i"),"")})(e)),l=Array.from(new Set(n)).sort((e,t)=>t.length-e.length),c=e=>l.reduce((e,t)=>{let a=t;a.match(/\.$/)&&(!r||!r.journalfull||a.length>2)&&(a=a.replace(".",""));const n=a.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");let l;if(n.length<=2){l=new RegExp("(<\\/?\\w+(\\s+\\w+(\\s*=\\s*(\"[^\"]*\"|'[^']*'|\\S+))?)*>)","ig");const t=s(e,l);return l=new RegExp(`>\\s(${i(n)})`,"ig"),((e,t)=>{const r=i(e).replace(t,e=>`> <highlight>${e.substring(2,e.length)}</highlight>`);return o(r,e)})(t,l)}return l=r&&r.journalfull?new RegExp(`(${i(n)})`,"ig"):new RegExp(`(<\\/?\\w+(\\s+\\w+(\\s*=\\s*("[^"]*"|'[^']*'|\\S+))?)*>)|(${i(n)})`,"ig"),s(e,l)},e),u=c(e);if(r&&r.journalfull){const e=c(r.journalfull);if(e.match(/<highlight>/)){let r=[];r=u.split(" ");if(e.split(" ").filter(e=>!["and","of","for","in","the","The"].includes(e)).forEach((e,t)=>{e.startsWith("<highlight>")&&r[t]&&!r[t].match(/<highlight>/)&&(r[t]=`<highlight>${r[t]}</highlight>`)}),r.length)return r.every(e=>!e.match(/<highlight>/))&&e.match(/<highlight>/)?t(e):t(r.join(" "))}}const d=t(u),p=[];return d.forEach((e,t)=>{e.startsWith("<highlight>")&&p[p.length-1]&&p[p.length-1].startsWith("<highlight>")?p[p.length-1]=p[p.length-1]+e.replace("<highlight>",""):e.startsWith("</highlight>")&&d[t+1]&&d[t+1].startsWith("</highlight>")?p[p.length-1]=p[p.length-1]+e.replace("</highlight>",""):p.push(e)}),p};return{getTitle:(e,t)=>{const{pubtype:r}=e;let{title:i}=e;if(!i){let t;if(("PP_LETTER"===r||"PP_PERSONAL_COMMUNICATION"===r)&&e.editor&&e.editor.length?[t]=e.editor:"PP_INTERVIEW"===r&&e.author&&e.author.length&&([t]=e.author),t){const e=(e=>e.first&&e.last?`${e.first} ${e.last}`:e.initials&&e.last?`${e.initials} ${e.last}`:e.collective?e.collective:e.last?e.last:"")(t);e&&("PP_LETTER"===r&&(i="Letter to "),"PP_PERSONAL_COMMUNICATION"===r&&(i="Personal communication with "),"PP_INTERVIEW"===r&&(i="Interview with "),i+=e)}}return i=(0,a.interconvertString)(i,{format:"html"}),l(i,t)},getSnippets:(t,r)=>{const a=e.library.Snippets.createSnippets(t,r);return a?a.map(e=>{const{type:t}=e;let a=e.text&&e.text.replace(/<\/?[^>]+(>|$)/g,"");return a=(a||"").replace(/&hellip;/g,"..."),{type:t,text:l(a,r)}}):[]},getCitedBy:e=>void 0!==e.gs_cited_by_count?["cited by "+e.gs_cited_by_count]:void 0!==e.pubmed_cited_by_count?["cited by "+e.pubmed_cited_by_count]:[""],getYear:(t,r)=>{const a=e.library.Date.yearString(t.published||{});return l(a,r)},getJournal:(e,t)=>{const{pubtype:r,journalfull:i}=e,n=t.locale||"en";let o="";o="PP_CONFERENCE_PAPER"===r||"PP_WEBSITE"===r?e.booktitle||"":"PP_BOOK_CHAPTER"===r?(0,a.interconvertString)(e.booktitle||"",{format:"html"}):"PP_THESIS"===r?e.school||"":"PP_MANUSCRIPT"===r?e.series||"":"PP_ARTWORK"===r||"PP_REPORT"===r?e.institution||"":e.journal||"";let s=l(o,{...t,journalfull:i});const c=!s||!s.length||!s[0];return c&&e.publisher?s=[e.publisher]:c&&("PP_BOOK"===r?s=[t.locales&&t.locales.noPublisher[n]||""]:"PP_WEBSITE"===r?e.url&&e.url.length>0&&(s=[e.url[0]]):s=r&&["PP_LETTER","PP_MAP","PP_STANDARD","PP_FIGURE","PP_PRESENTATION","PP_COMPUTER_PROGRAM","PP_MANUAL","PP_PERSONAL_COMMUNICATION","PP_UNPUBLISHED","PP_MISC"].includes(r)?[""]:"PP_BILL"===r?[e.legislative_body?e.legislative_body:""]:"PP_PREPRINT"===r?[t.locales&&t.locales.ppPreprint[n]||""]:[t.locales&&t.locales.noJournal[n]||""]),s},getAuthors:(t,r)=>{const a={prefix:"",suffix:"",delim:", ",output:"display",othersString:"..."};let i=r.maxAuthors;const n={author:t.author||[],editor:t.editor||[],contributor:t.contributor||[],series_editor:t.series_editor||[],translator:t.translator||[]};let o="",s="";const c=e.library.Publication.getAuthorType(n);if(!c)return l("",r);const u=[];n[c].forEach(t=>{"et al."!==t.collective&&""===e.library.Author.toString(t)||u.push({...t,inserted:!1})});const d=l(e.library.Author.toString(u,a),r);if(!i||i>=u.length)return d;const p=[],m=[];let h,g;i%2==0?(h=i/2,g=i/2):(h=Math.ceil(i/2),g=Math.floor(i/2));const f=e=>d.some(t=>!!(t.startsWith("<highlight>")&&t.replace("<highlight>","").trim().length>1&&(e.last&&e.last.includes(t.replace("<highlight>",""))||e.first&&e.first.includes(t.replace("<highlight>",""))||e.collective&&e.collective.includes(t.replace("<highlight>",""))||e.formatted&&e.formatted.includes(t.replace("<highlight>","")))));if("middle"===r.cutAuthorsPosition){for(let e=0;e<u.length;e+=1){const t=f(u[e]);e<h&&!t&&(p.push(u[e]),u[e].inserted=!0),e<=h&&t&&(p.push(u[e]),u[e].inserted=!0,h+=1)}let e=0;for(let t=u.length-1;t>=0;t-=1){const r=f(u[t]);e<g&&!u[t].inserted&&!r&&(m.unshift(u[t]),u[t].inserted=!0,e+=1),e<=g&&!u[t].inserted&&r&&(m.unshift(u[t]),u[t].inserted=!0,e+=1,g+=1)}}else for(let e=0;e<u.length;e+=1){const t=f(u[e]);e<i&&!t&&(p.push(u[e]),u[e].inserted=!0),e<=i&&t&&(p.push(u[e]),u[e].inserted=!0,i+=1),e>i&&t&&(p.push(u[e]),u[e].inserted=!0)}let b=0,y=!1;const v=(e,t)=>e._id===t._id&&e.first===t.first&&e.last===t.last&&e.initials===t.initials;if(u.forEach(e=>{v(e,p[p.length-1])?y=!0:(m[0]&&v(e,m[0])&&(y=!1),y&&(b+=1))}),r.minCutAuthors&&r.showAbbrCount&&"middle"===r.cutAuthorsPosition&&b<r.minCutAuthors){for(let e=p.length;e<u.findIndex(e=>v(e,m[0]));e+=1)p.push(u[e]);b=0}const _=e=>{e.forEach((t,r)=>{const a=e[r+1],i=u.findIndex(e=>e._id===t._id&&e.first===t.first&&e.last===t.last),n=u[i+1];n&&a&&!n.inserted&&(n._id===a._id&&n.first===a.first&&n.last===a.last||e.splice(r+1,0,"..."))})};_(p),_(m);const w=t=>{let r="";return t.forEach((t,i)=>{i>0&&(r+=", "),r+="..."===t?`<span className="authors-abbreviation">${t}</span>`:e.library.Author.toString(t,a)}),r};let P;if(o+=w(p),s+=w(m),t[c]&&i&&i<t[c].length)if(b){let e;const t=r.locale||"en";if(e="middle"===r.cutAuthorsPosition?r.showAbbrCount?`... ${r.locales&&r.locales.nMore[t].replace("<N>",b)} ...`:"...":r.locales&&r.locales.etAl[t],"middle"===r.cutAuthorsPosition)P=`${o}, <span className="authors-abbreviation">${e}</span>${s?", "+s:""}`;else{const t=u[u.length-1],r=p[p.length-1];P=`${o} ${s?", "+s:""}`,(t._id!==r._id||t.first!==r.first||t.last!==r.last)&&(P+=`<span className="authors-abbreviation-et-al">${e}</span>`)}}else P=`${o}, ${s}`;return l(P,r)},getStringsArray:l}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(183),i=r(51),n=r(66),o=r(184);const s=(e,t,r,a,i,n,o)=>{const s={author_kw:"author","publisher.raw":"publisher","journalfull.raw":"journal"};var l;i&&(null==a||null===(l=a.data)||void 0===l||l.forEach(e=>{const{value:t}=i[e.value];p(o,{data:t||e.value,field:e.field,isPhrase:!0},s,n)}));r.forEach(e=>{p(o,{data:e,isPhrase:!0},s,n)}),e&&p(o,{data:e},s,n),null==t||t.data.forEach(e=>{let{field:t,value:r,isPhrase:a}=e;p(o,{data:r,field:t,isPhrase:a},s,n)})},l=(e,t,r,a,o,s,l)=>{for(const m of(0,n.getKeys)(l)){var c,u,d,p;if(l[m]&&l[m].length)if(s[m]=(0,i.generateSQLiteFTS5ResultsHighlightRegex)(l[m]),"title"!==m)if("authors"!==m)if("journal"!==m)"year"!==m?"abstract"!==m?"fulltext"!==m||(o.fulltext={searchTerms:a.includes("fulltext")?"":e,phrasesSearch:a.includes("fulltext")?[]:t}):o.abstract={searchTerms:a.includes("abstract")?"":e,phrasesSearch:a.includes("abstract")?[]:t}:o.year={searchTerms:e,phrasesSearch:t};else o.journal={allowShortStrings:!(null==r||!r.data)&&(null==r||null===(c=r.data)||void 0===c||null===(u=c.filter(e=>"journal"===e.field))||void 0===u?void 0:u.length)>0,searchTerms:e};else o.authors={allowShortStrings:!(null==r||!r.data)&&(null==r||null===(d=r.data)||void 0===d||null===(p=d.filter(e=>"authors"===e.field))||void 0===p?void 0:p.length)>0,searchTerms:e};else o.title={searchTerms:e,phrasesSearch:t}}},c=(e,t,r,i,n,s,l,c)=>{var p,m;const h=c||{disableSnippets:!1},g=d(r,i),f=!n.includes("note")&&!!t,b=null==r||null===(p=r.data.find(e=>"abstract"===e.field))||void 0===p?void 0:p.value,y=!(n.includes("abstract")||!b&&0!==Object.keys(g).length&&!t),v=null==r||null===(m=r.data.find(e=>"fulltext"===e.field))||void 0===m?void 0:m.value,_=!(n.includes("fulltext")||!v&&0!==Object.keys(g).length&&!t),w={snippets:{},highlights:{}};for(const r of e){const e=[];if(!h.disableSnippets){var P;if(r.abstract&&!n.includes("abstract")&&l.abstract){const t=(0,a.createSnippet)(r,"abstract",l.abstract);t&&e.push(t)}if(r.note&&!n.includes("note")&&l.note){const t=(0,a.createSnippet)(r,"note",l.note,void 0,null==c?void 0:c.longNoteText);t&&e.push(t)}if(null!==(P=r.__render)&&void 0!==P&&P.snippets&&!n.includes("fulltext")&&l.fulltext){const n=(0,a.createSnippet)(r,"fulltext",l.fulltext,i.join(" ")||v||t);n&&e.push(n)}}const d=0!==Object.keys(g).length||b?{...s,...g}:s,p=o.ReferenceDL.getHighlightedFields(r,d,l);e.length&&(y||_||f)&&(w.snippets[r._id]=e),u(p)&&(w.highlights[r._id]=p)}return w},u=e=>e.authors||e.journal||e.year||e.title||e.abstract,d=(e,t)=>{const r={};for(const a of(null==e?void 0:e.data)||[]){const e=a.field,i=r[e];if(!["authors","year","journal","title"].includes(a.field))continue;const n=void 0!==r[e];return{...r,[e]:{searchTerms:n||"authors"===e?"":a.value,phrasesSearch:n||"authors"===e?[a.value,...n&&null!=i&&i.searchTerms?[i.searchTerms]:[],...n&&(null==i?void 0:i.phrasesSearch)||[],...t||[]]:t,allowShortStrings:"authors"===a.field}}}return r},p=(e,t,r,a)=>{if(t.field){e[r[t.field]||t.field].push({text:t.data,isPhrase:t.isPhrase,isFullMatch:t.isPhrase})}else for(const r of(0,n.getKeys)(e))null!=a&&a.includes(r)||e[r].push({text:(0,i.normalizeSearchableFields)(t.data,{stripOfNonLetterAndNumericCharacters:!0}),isPhrase:t.isPhrase,isFullMatch:t.isPhrase})};var m=function(e,t,r,a,i,n){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=arguments.length>7?arguments[7]:void 0;const d={},p={},m={authors:[],journal:[],title:[],year:[],abstract:[],note:[],fulltext:[]};return s(t,r,n,a,i,o,m),l(t,n,a,o,p,d,m),c(e,t,r,n,o,p,d,u)};t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sessionStorageGetAll=t.sessionStorageRemoveKey=t.sessionStorageGetValue=t.sessionStorageSetValue=void 0;const a={};t.sessionStorageSetValue=async(e,t,r)=>{var i,n;const o=`${e}${t}`;null!==(i=chrome)&&void 0!==i&&null!==(n=i.storage)&&void 0!==n&&n.session,a[o]=r};t.sessionStorageGetValue=async(e,t)=>{var r,i;let n=null;const o=`${e}${t}`;return null!==(r=chrome)&&void 0!==r&&null!==(i=r.storage)&&void 0!==i&&i.session,o in a&&(n=a[o]),n};t.sessionStorageRemoveKey=async(e,t)=>{var r,i;const n=`${e}${t}`;return null!==(r=chrome)&&void 0!==r&&null!==(i=r.storage)&&void 0!==i&&i.session,n in a&&(delete a[n],!0)};t.sessionStorageGetAll=async e=>{var t,r;const i=[];null!==(t=chrome)&&void 0!==t&&null!==(r=t.storage)&&void 0!==r&&r.session;for(const t of Object.keys(a))0===t.indexOf(e)&&i.push({key:t.substring(e.length),value:a[t]});return i}},,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.searchGuruByQuery=t.getGuruMatch=t.callGuruForPDFUrl=void 0;var i=a(r(738)),n=r(20),o=r(46);const s=async(e,t,r)=>{try{const a=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},...r});if(200===a.status)return await a.json()}catch(e){return null}return null};t.callGuruForPDFUrl=e=>!!(e.pubtype&&["PP_ARTICLE","PP_BOOK_CHAPTER","PP_CONFERENCE_PAPER","PP_REPORT","PP_PREPRINT"].indexOf(e.pubtype)>-1)||!!(e.doi||e.pmid||e.pmc||e.arxivid||e.issn||e.issn_alt);t.getGuruMatch=async(e,t)=>{let r;try{r=self.PP.library.Publication.getGuruMatchPub(e)}catch(t){r=e}const a=2===t?7e3:5e3,l=new AbortController;setTimeout(()=>l.abort(),a);const c=await s(n.GURU_API_URL+"/match","POST",{body:JSON.stringify(r),signal:l.signal});if(!c){let{doi:e}=r;if(!e&&r.url&&(e=(0,o.extractDoiFromUrl)(r.url)),e&&/^10\.\d+/.test(""+e)){const t="https://doi.org/"+e;let r="application/vnd.crossref.unixref+xml;q=1, application/vnd.datacite.datacite+xml;q=0.5";const a=new AbortController;let n;setTimeout(()=>a.abort(),3e3);try{n=await fetch(t,{headers:{Accept:r},signal:a.signal})}catch(e){return null}if(!n.ok)return null;if(n&&n.url&&/data.crosscite.org/.test(""+n.url)){r="application/x-research-info-systems";const e=new AbortController;let a;setTimeout(()=>e.abort(),3e3);try{a=await fetch(t,{headers:{Accept:r},signal:e.signal})}catch(e){return null}if(!a.ok)return null;try{const e=await a.text(),t=self.PP.format.Ris.doRead(e);if(t&&t.length>0)return t[0]}catch(e){return null}}else try{const e=await n.text(),t=new i.default(self.PP,self.$).doRead(e);if(t&&t.length>0)return t[0]}catch(e){return null}}}return c};t.searchGuruByQuery=async e=>{const t=["q="+encodeURIComponent(e)].join("&"),r=new AbortController;return setTimeout(()=>r.abort(),5e3),s(`${n.GURU_API_URL}/works?${t}`,"GET",{signal:r.signal})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processIdList=t.getFilterMapChunk=t.getFilterMapType=t.generateFilterCounts=t.getFilterNames=t.generateFilterKeys=t.generateCountsPrefix=t.generateFilters=t.arrayRightDifference=t.arrayLeftDifference=t.arrayDifference=t.arrayObjectUnion=t.arrayUnion=t.arrayIntersection=t.getTimestamp=t.isDefined=t.getKeys=t.getEntries=void 0;var a=r(807);t.getEntries=e=>Object.entries(e);const i=Object.keys;t.getKeys=i;t.isDefined=e=>!!e;t.getTimestamp=()=>Date.now()/1e3;t.arrayIntersection=(e,t)=>e.filter(e=>t.some(t=>e===t));t.arrayUnion=(e,t)=>e.filter(e=>!t.includes(e)).concat(t);t.arrayObjectUnion=(e,t,r)=>e.filter(e=>!t.filter(t=>t[r]===e[r]).length).concat(t);t.arrayDifference=(e,t)=>e.filter(e=>-1===t.indexOf(e)).concat(t.filter(t=>-1===e.indexOf(t)));t.arrayLeftDifference=(e,t)=>e.filter(e=>-1===t.indexOf(e));t.arrayRightDifference=(e,t)=>t.filter(t=>-1===e.indexOf(t));const n=(e,t)=>{const r=[e+"_byCreated",e+"_byTitle",e+"_byLastAuthor",e+"_byFirstAuthor",e+"_byJournal",e+"_byDate"];if("unbatched"===t.filterType)return r;const a=t.filterKeys.filter(t=>t.startsWith(e));return a.length?a:r};t.generateFilters=n;const o=e=>[e+"_counts",e+"_subCounts"];t.generateCountsPrefix=o;t.generateFilterKeys=(e,t)=>{const r=[];e.trashed||r.push(...n("ALL",t)),e.trashed&&r.push(...n("TRASHED",t)),e.starred&&r.push(...n("STARRED",t));const a=[...e.folders||[],...e.labels||[]];for(const e of a)r.push(...n(e,t));return r};t.getFilterNames=e=>{const t=[];e.trashed||t.push("ALL"),e.trashed&&t.push("TRASHED"),e.starred&&t.push("STARRED");const r=[...e.folders||[],...e.labels||[]];for(const e of r)t.push(e);return t};t.generateFilterCounts=e=>{const t=[];e.trashed||t.push(...o("ALL")),e.trashed&&t.push(...o("TRASHED")),e.starred&&t.push(...o("STARRED"));const r=[...e.folders||[],...e.labels||[]];for(const e of r)t.push(...o(e));return t};t.getFilterMapType=e=>{let t="unbatched";const r=[];for(const a of i(e)){if(!a.endsWith("subCounts"))continue;const n=i(e[a]);n[n.length>1?1:0].split("_").length>2&&(t="batched"),r.push(...n)}return{filterType:t,filterKeys:r}};t.getFilterMapChunk=function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;const{filterType:l,filterKeys:c}=r;if("batched"===l){const r=c.filter(t=>t.startsWith(e));if(!r.length)return[e];if(1===r.length)return[r[0]];const l=(0,a.sort)([...r,t]).desc().findIndex(e=>e===t),u=[...r];u.splice(l+1,0,t);const d=u.findIndex(t=>t===e);-1!==d&&(u.splice(d,1),u.unshift(e));const p=/.*?-(\d+$)/,m=u.findIndex(e=>e===t),h=u.filter(e=>e===t).length;if(-1!==m){const a=h>1?t:u[m-1];if(o)for(const t of o)if(t&&null!=t&&t._id.includes(e)&&Array.isArray(null==t?void 0:t.data))for(const e of t.data)if(e.includes(null==n?void 0:n._id))return[t._id];const l=[];if(p.test(a)&&i){const e=r.filter(e=>e.includes(t)&&p.test(e));if(e.length){const t=u.findIndex(t=>t===e[0]);-1!==t&&r[t-1]?l.push(r[t-1],...e):l.push(...e)}}if(i){const e=[],i=[];a===t&&u[m-1]&&(l.push(u[m-1],a),i.push(-1)),(a===t&&!u[m-1]||m===u.length-1&&a===u[m-1])&&l.push(a),a!==t&&u[m+1]&&(l.push(u[m-1],u[m+1]),i.push(-1,1));for(const t of l){const a=s(t,p,r);if(a&&a.length){e.push(...a);for(const e of i){if(-1===e){const e=r.findIndex(e=>e===a[0]);-1!==e&&r[e-1]&&!l.includes(r[e-1])&&l.push(r[e-1])}if(1===e){const e=r.findIndex(e=>e===a[a.length-1]);-1!==e&&r[e+1]&&!l.includes(r[e+1])&&l.push(r[e+1])}}}}const n=[...new Set([...l,...e])];if(n.length)return n}return[a]}}return[e]};t.processIdList=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t&&!r)return e;const a=[],i=[];for(const n of e){if("u"===n.charAt(0))if(r){let e=n.match(/^url:https?:\/\/.?.?.?doi.org\/(10.+)/);if(e){const r="doi:"+e[1];if(i.push(r),t)continue}if(e=n.match(/^url:https?:\/\/www.ncbi.nlm.nih.gov\/pmc\/articles\/(PMC\d+)/),e){const r="pmc:"+e[1];if(i.push(r),t)continue}if(e=n.match(/^url:https?:\/\/www.ncbi.nlm.nih.gov\/pubmed\/(\d+)/),e){const r="pmid:"+e[1];if(i.push(r),t)continue}if(e=n.match(/^url:https?:\/\/pubmed.ncbi.nlm.nih.gov\/(\d+)/),e){const r="pmid:"+e[1];if(i.push(r),t)continue}if(e=n.match(/^url:https?:\/\/arxiv.org\/abs\/(.+)/),e){const r="arxivid:"+e[1];if(i.push(r),t)continue}}else if(t&&(/^url:https?:\/\/dx.doi.org/.test(n)||/^url:https?:\/\/doi.org/.test(n)||/^url:https?:\/\/www.ncbi.nlm.nih.gov\/pmc\/articles/.test(n)||/^url:https?:\/\/www.ncbi.nlm.nih.gov\/pubmed/.test(n)||/^url:https?:\/\/pubmed.ncbi.nlm.nih.gov\/\d/.test(n)||/^url:https?:\/\/arxiv.org\/abs/.test(n)))continue;a.push(n)}return r?Array.from(new Set([...a,...i])):a};const s=(e,t,r)=>{if(t.test(e)){const a=e.split("-")[0],i=r.filter(e=>e.includes(a)&&t.test(e));if(i.length)return i}return null}},,,,,,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getDriversByMode=t.identifyDriver=t.matchContentBySignatureBody=t.info=t.DriverProcessor=void 0;var i=r(4),n=a(r(612)),o=a(r(450)),s=a(r(451)),l=a(r(686)),c=a(r(687));class u{constructor(e,t){this.driver=e,this.crawlerState=t,this.name=e.name}async tryRule(e,t){const{crawlOptions:{mode:r},err:a}=this.crawlerState,n=await(0,c.default)(e,t,this.driver.signature,this.crawlerState);if(!n.isOk())return n;const o=n.value;if("META"===r&&"final-pdf"===o.type)throw new i.CrawlerException('Invalid type "final-pdf" returned from steps for Meta driver');if("final-pdf"===o.type)return(0,i.ok)({url:o.url,pdfBlob:o.pdfBlob,contentDisposition:o.contentDisposition});if("PDF"===r){const e=await this.checkFinalPdf(o);return e.isOk()?e:a("RULE_FAILED","PDF not found")}const{target:s,targetOptions:l}=t;if(!s)throw new i.CrawlerException("META driver has no target");const u=await this.convertRuleResultToPub({url:o.url,fetchParams:o.fetchParams},this.driver.signature,s,l);return u.isOk()?(0,i.ok)((0,i.cleanAndEnrichPub)(u.value,[...this.crawlerState.fetchClient.visitedUrls,...(0,i.getUrlListUrls)(this.crawlerState.urlList)],this.name,s)):u}async processUrl(e){const{crawlOptions:{mode:t},err:r,fetchClient:a,messageReporter:n}=this.crawlerState;for(const[t,r]of this.driver.rules.entries()){n.log("Processing rule "+t,"info");const a=await this.tryRule(e,r);if(a.isOk())return a}if("PDF"===t&&!a.visitedUrls.includes(e)&&i.regExes.looksLikePdfUrl(e)){n.log("No rule worked, checking for direct PDF","info");const t=await this.checkFinalPdf({url:e});if(t.isOk())return t}return r("RULE_FAILED","No rule worked")}async convertRuleResultToPub(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{err:o,fetchClient:s,messageReporter:l}=this.crawlerState,{url:c,fetchParams:u}=e;if((0,i.hasBlockingSignatures)(c,t.urlBlocked,this.crawlerState))return o("DRIVER_FAILED","URL has blocking signatures");const d=this.getReferrer();l.log(`Fetching file: ${c}${d?", using referrer: "+d:""}`,"info");const p=await s.fetch(c,{...u,referrer:d},{allowedMimeTypes:t.allowedMimeTypes,useCachedResult:"Default"===this.driver.name&&!u&&!d&&0===t.allowedMimeTypes.length});if(!p.isOk())return p;if((0,i.hasBlockingSignatures)(p.value.response.url,t.urlBlocked,this.crawlerState))return o("DRIVER_FAILED","URL has blocking signatures");const{response:m,bodyText:h}=p.value;if((0,i.hasBlockingSignatures)(h,t.bodyBlocked,this.crawlerState))return o("DRIVER_FAILED","Body has blocking signatures");if(!m.ok)return o("FETCH_FAILED",m.status);l.log("Converting using converter: "+r,"info");return(0,n.default[r])(h,c,{err:o,fetchClient:s,messageReporter:l},a)}getReferrer(){const{referer:e}=this.driver;if(!e)return;if("object"==typeof e)return e.url;const{visitedUrls:t}=this.crawlerState.fetchClient;return t[t.length-1]}async checkFinalPdf(e){if("PDF"!==this.crawlerState.crawlOptions.mode)throw new i.CrawlerException("checkFinalPdf called for Meta driver");const t=this.getReferrer();return(0,i.ensurePdfUrl)(e.url,this.crawlerState,{...e.fetchParams,referrer:t},"loginRequired"in this.driver.signature?this.driver.signature:void 0)}}t.DriverProcessor=u;t.info=(e,t)=>{const r=(0,o.default)(e,t),a={targets:[],requests:!1};return r&&r.driver.rules.forEach(e=>{e.target&&a.targets.push(e.target),e.steps&&(a.requests=!0)}),a.targets=Array.from(new Set(a.targets)),a};const d=(e,t)=>t.find(t=>"body"in t.signature&&null!==(0,i.findContentMatchingSignature)(e,t.signature.body))||null;t.matchContentBySignatureBody=d;t.identifyDriver=async(e,t,r)=>{const{crawlOptions:{mode:a},err:n,messageReporter:s}=r,l=(0,o.default)(e,t);if(null!==l&&!1===l.deferred)return s.log("Matched by signature URL","info"),(0,i.ok)({driverProccessor:new u(l.driver,r)});const c=null==l?void 0:l.driver;s.log(c?"Found Filename driver, getting body":"No URL match, getting body","info");const p=await r.fetchClient.fetch(e,void 0,{cacheResult:!0,checkPdfSignature:!0});if(!p.isOk())return p;const{response:m,bodyText:h,bodyBlob:g}=p.value;if(!m.ok)return n("FETCH_FAILED",m.status);if(i.regExes.hasPdfSignature(h))return"META"===a?n("DRIVER_FAILED","Not crawling PDF URL"):(s.log("Found direct PDF","info"),(0,i.ok)({url:m.url,pdfBlob:g,contentDisposition:m.contentDisposition}));const f=d(h,t);return f?(0,i.ok)({driverProccessor:new u(f,r)}):c?n("DRIVER_FAILED","PDF not found"):(r.encounteredErrors.add("SITE_NOT_SUPPORTED"),n("DRIVER_FAILED","No driver match"))};t.getDriversByMode=e=>{switch(e){case"META":return s.default;case"PDF":return l.default;default:throw new i.CrawlerException("Invalid mode for getDriversByMode: "+e)}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(12)),n=r(5);t.default=function(e,t,r,a){let{messageReporter:o}=a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const l={...r},{rootElement:c}=(0,i.default)(e,o);for(const e of Object.keys(s)){const t=s[e];if(t)switch(t.type){case"selector":for(const r of t.value){let t=c.find(r).text();if(t){if(t=t.replace(/[\n\r\s\t]+/g," ").replace(/^\s+/,"").replace(/\s+$/,""),"published"===e){const r=t.match(/\b((?:19|20)\d\d)\b/);null!=r&&r[1]&&!l[e]&&(l[e]={year:r[1]})}else if("isbn"===e||"isbn_alt"===e){const r=(0,n.getGlobal)("ppLibrary").Utils.extractISBNs(t,{convert:!0,unique:!0})[0];r&&!l[e]&&(l[e]=r,"PP_WEBSITE"===l.pubtype&&(l.pubtype="PP_BOOK"))}else if("title"===e)t=t.replace(/^Title:?\s*/gi,""),l[e]=t;else if("abstract"===e)t=t.replace(/^Abstract:?\s*/gi,""),l[e]=t;else if("doi"===e){const r=t.match(/(.*)(10\.\d{4,}\/\S+)/);if(null!=r&&r[2]&&!l[e]){const t=r[2];l[e]=t,"PP_WEBSITE"===l.pubtype&&(l.pubtype="PP_ARTICLE")}}else l[e]||(l[e]=t);break}}break;case"exact":l[e]=t.value}}return l.url&&Array.isArray(l.url)&&(l.url=l.url.map(e=>e.includes("patents.google.com")?e.replace(/(.+\/patent\/[^/]+\/)(.+)/,"$1"):e)),l}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(26);var i=(e,t)=>{const r=(0,a.deproxify)(e),i=r&&r.cleanUrl?r.cleanUrl:e;let n=null;for(const e of t){const t=e.signature.url;for(const r of t)if(r.test(i)){if(!e.deferToBodyDrivers)return{driver:e,deferred:!1};n={driver:e,deferred:!0}}}return n};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.stepRulesToRegExp=void 0;var a=r(452),i=r(4);const n={SFX:{rules:[{target:"SFX"}]},SerialsSolutions:{rules:[{target:"SerialsSolutions"}]},JMB:{rules:[{target:"Default"}]},Longdom:{rules:[{target:"Default"}]},ChineseMedicalAssociation:{rules:[{target:"Default"}]},"Journal of the Chinese Academy of Medical Sciences":{rules:[{target:"Default"}]},TUBITAK:{rules:[{target:"Default"}]},AKJournals:{rules:[{target:"Default"}]},Brieflands:{rules:[{target:"Default"}]},"Giornale Italiano di Cardiologia":{rules:[{target:"Default"}]},"Institute of Biomedical Chemistry":{rules:[{target:"Default"}]},JCP:{rules:[{target:"Default"}]},MinervaMedica:{rules:[{target:"Doi"}]},ProblemsOfVirology:{rules:[{target:"Default"}]},SharedSciencePublisher:{rules:[{target:"Default"}]},Viamedica:{rules:[{target:"Default"}]},SciDoc:{rules:[{target:"Default",targetOptions:{pubtype:{type:"exact",value:"PP_ARTICLE"},title:{type:"selector",value:[".contentArea h1"]},author:{type:"selector",value:["#divMain > p:nth-child(1) > strong"]},journal:{type:"selector",value:[".contentArea > div.divPanel > a"]},abstract:{type:"selector",value:["#divMain > div:nth-child(7) > div > p"]}}}]},OAEPublish:{rules:[{target:"Ris",steps:[{match:'href="([^"]+\\.ris)"'}]}]},"Beijing Renhe Information Technology":{rules:[{target:"Default"}]},XMLinkHub:{rules:[{target:"Ris",steps:[{rewrite:["(.*)(DOIx.php)(.*)","$1ExportCitation.php$3&type=ex2&cr=cr2"]}]}]},KAMJE:{rules:[{target:"Default"}]},"Baishideng Publishing Group":{rules:[{target:"Default"}]},"AME Publishing Company":{rules:[{target:"Default"}]},"Bentus Journals Systems":{rules:[{target:"Default"}]},SciencePublishingGroup:{rules:[{target:"SciencePublishingGroup"}]},Jove:{rules:[{target:"Ris",steps:[{match:'href="([^"]+GetRIS[^"]+)"'}]}]},"Histology and Histopathology":{rules:[{target:"Doi"}]},"Singapore Medical Journal":{rules:[{target:"Doi"}]},"Hong Kong Medical Journal":{rules:[{target:"Doi"}]},"Veterinary World":{rules:[{target:"Doi"}]},"The Ukranian BioChemical Journal":{rules:[{target:"Doi"}]},"Electronic Physician":{rules:[{target:"Doi"}]},BioProtocol:{rules:[{target:"Doi"}]},ProBiologists:{rules:[{target:"Doi"}]},"European Journal of Rheumatology":{rules:[{target:"Doi"}]},CVJA:{rules:[{target:"Doi"}]},BioInformation:{rules:[{target:"Default",targetOptions:{title:{type:"selector",value:["tbody > tr:nth-child(2) > td:nth-child(2)"]},author:{type:"selector",value:["tbody > tr:nth-child(4) > td:nth-child(2)"]},abstract:{type:"selector",value:["tbody > tr:nth-child(9) > td:nth-child(2)"]},issn:{type:"selector",value:["tbody > tr:nth-child(13) > td:nth-child(2)"]},publisher:{type:"selector",value:["tbody > tr:nth-child(14) > td:nth-child(2)"]},pubtype:{type:"exact",value:"PP_ARTICLE"}}}]},ZoologicalStudies:{rules:[{target:"Doi"}]},"West Indian Medical Journal":{rules:[{target:"Doi"}]},Hormones:{rules:[{target:"Doi"}]},"West China Journal of Stomatology":{rules:[{target:"Ris",steps:[{match:'href="([^"]+fileType=Ris[^"]+)"'}]}]},FTB:{rules:[{target:"Doi"}]},SciEngine:{rules:[{target:"Default"}]},XHPPublishing:{rules:[{target:"Default"}]},"Caister Academic Press":{rules:[{target:"Doi"}]},Actavia:{rules:[{target:"Bibtex",steps:[{match:'href="([^"]+fmt=bibtex[^"]+)"',rewrite:["&amp;","&"]}]}]},"Polish Archives of Internal Medicine":{rules:[{target:"Doi"}]},AEPress:{rules:[{target:"Doi"}]},JournalAgent:{rules:[{target:"Ris",steps:[{match:'href\\s*=\\s*"([^"]+&format=RIS)"'}]},{target:"Ris",steps:[{match:'href\\s*=\\s*"([^"]+RIS[^"]+\\.ris)"'}]}]},NBER:{rules:[{target:"NBER"}]},Neurips:{rules:[{target:"Bibtex",steps:[{match:'href\\s*=\\s*"([^"]+bibtex)"'}]}]},FirstDoiLink:{rules:[{target:"Doi"}]},"BioMed Central":{rules:[{target:"Default"}]},"Oxford Handbooks":{rules:[{target:"Default"}]},OpenLibrary:{rules:[{target:"OpenLibrary"}]},OpenLibHums:{rules:[{target:"Default"}]},EurekaSelect:{rules:[{target:"Default"}]},"Molecules and Cells":{rules:[{target:"Default"}]},DeepDyve:{rules:[{target:"Default"}]},"Congress.gov":{disablePreAutocomplete:!0,rules:[{target:"Congress"}]},"American Psychological Association":{rules:[{target:"APA",steps:[{rewrite:["(.*)(buy\\.optionToBuy&id=)(.+)","$1search.displayRecord&uid=$3"]}]},{target:"APA"}],dynamic:!0},zbMATH:{rules:[{target:"Bibtex",steps:[{match:'(/bibtex[^"]+)"'}]}]},"Video Portals":{disablePreAutocomplete:!0,rules:[{target:"VideoPortals"}]},Cochrane:{rules:[{target:"Default"}]},"European Digital Mathematics Library":{rules:[{target:"Default"}]},BASE:{rules:[{target:"BASE"}]},CORE:{rules:[{target:"Default"}]},EUDL:{rules:[{target:"Bibtex"}]},JSTOR:{rules:[{target:"JSTOR"}]},"Google Scholar Citations":{rules:[{target:"GoogleScholarCitations"}]},"Google Scholar Cases":{rules:[{target:"GoogleScholarCases"}]},"Google Scholar Clusters":{rules:[{target:"Default"}]},Magazines:{disablePreAutocomplete:!0,rules:[{target:"Newspapers"}]},Newspapers:{disablePreAutocomplete:!0,rules:[{target:"Newspapers"}]},"Google Books":{rules:[{target:"GoogleBooks"}]},Figshare:{rules:[{target:"RisFirstNameFirst",steps:[{rewrite:[".*/(\\d+)/?","https://figshare.com/articles/$1/1/citations/reference_manager"]}]},{target:"RisFirstNameFirst",steps:[{rewrite:[".*/(\\d+)/?","https://figshare.com/articles/$1/3/citations/reference_manager"]}]}]},zenodo:{rules:[{target:"Bibtex",steps:[{rewrite:["(.*)/?","$1/export/hx"]}]}]},"D-Lib":{rules:[{target:"Doi"}]},"Touch Medical Media":{rules:[{target:"Doi"}]},IMDB:{rules:[{target:"IMDB"}]},"Free Patents Online":{rules:[{target:"Default",steps:[{rewrite:["(.*)(\\.pdf)","$1.html"]}]},{target:"Default"}]},"Google Patents":{rules:[{target:"GooglePatents",steps:[{rewrite:["(.*patentimages.storage.googleapis.com.*/)([^/]+)(.pdf.*)","https://patents.google.com/patent/$2/en"]}]},{target:"GooglePatents"}]},chemRxiv:{rules:[{target:"Default",targetOptions:{pubtype:{type:"exact",value:"PP_PREPRINT"},journal:{type:"exact",value:"ChemRxiv"}}}]},"Berkeley Electronic Press":{rules:[{target:"Default"}]},SumoBrain:{rules:[{target:"SumoBrain"}]},WorldCat:{rules:[{target:"WorldCat"}]},"NASA Technical Reports Server":{rules:[{target:"Default"}]},RePEc:{rules:[{target:"Default"}]},"NIPS Proceedings":{rules:[{target:"Bibtex",steps:[{rewrite:["(paper/[^/]+)(.*)","$1/bibtex"]}]}]},"Theory of Computing":{rules:[{target:"Bibtex",steps:[{rewrite:["(.*)(/index\\.html)","$1/bibtex.txt"]}]},{target:"Bibtex",steps:[{rewrite:["(.*)","$1/bibtex.txt"]}]}]},DBLP:{rules:[{target:"Bibtex"}]},"Portland Press":{rules:[{target:"Default"}]},KoreaScience:{rules:[{target:"Default"}]},"ARVO journals":{rules:[{target:"Default"}]},Longwoods:{rules:[{target:"Ris",steps:[{rewrite:["https?(.*)","https$1///citation"]}]}]},"Library Catalog Aleph":{rules:[{target:"LibraryCatalogAleph",steps:[{rewrite:["(.+&format=)(\\d\\d\\d)(.*)","$1001$3&type=new"]}]}]},"Library Catalog InnoPac":{rules:[{target:"MARC",steps:[{rewrite:["(.+)(/frameset)(.+)","$1/marc$3"]}]},{target:"MARC",steps:[{match:'href\\s*=\\s*"([^"]+/marc~[^"]+)'}]}]},"Library Catalog Encore":{rules:[{target:"MARC",steps:[{rewrite:["(.+)(\\?)(.*)","$1?marcData=Y&$3"]}]}]},"Library Catalog SirsiDynix":{rules:[{target:"SIRSI"}]},"Library Catalog Capita Prism":{rules:[{target:"Ris",steps:[{rewrite:["(.+/items/\\d+)(\\D?.*)","$1.ris"]}]}]},"Library Catalog Summon":{rules:[{target:"Ris",steps:[{rewrite:["(.+serialssolutions[^\\/]+)(.*)(-\\w+_catalog_\\w?\\d+)","$1/citation/export?ids=FETCH$3&format=endnote"]}]}]},ProQuest:{rules:[{target:"ProQuest"}]},"ProQuest EBook Central":{rules:[{target:"Ris",steps:[{rewrite:["(.*)(/[^\\/]+\\.action\\?)(.*)","$1/biblioExport.action?$3"]}]}]},"Library Catalog Primo":{rules:[{target:"PNX"}]},"Library Catalog SearchWorks":{rules:[{target:"MARC",steps:[{rewrite:["(.+)","$1.marcxml"]}]}]},"Library Catalog Koha":{rules:[{target:"Ris",steps:[{rewrite:["(.+/koha)(.+biblionumber=)(\\d+)","$1/opac-export.pl?op=export&bib=$3&format=ris"]}]},{target:"Default",targetOptions:{pubtype:{type:"exact",value:"PP_BOOK"}}}]},"Begell Digital Library":{rules:[{target:"Default"}]},"NIHR Journals Library":{rules:[{target:"Default"}]},"American Physical Society":{rules:[{target:"Ris",steps:[{rewrite:["(.*.aps.org/.*?)(abstract/|showrefs/|forward/)(.*)","$1export/$3?type=ris"]}]},{target:"Ris",steps:[{match:'href\\s*=\\s*"([^"]+export[^"]+ris)"'}]},{target:"Default"}]},"Public Library of Science":{rules:[{target:"Default",targetOptions:{abstract:{type:"selector",value:['h1:contains("Abstract") ~ p']}}}]},UpToDate:{rules:[{target:"Default"}]},"IOP Publishing":{rules:[{target:"Ris",steps:[{match:'href\\s*=\\s*"([^"]+export_ris[^"]+)"'}]},{target:"Default",targetOptions:{abstract:{type:"selector",value:['div[itemprop="description"]']}}}]},"Atypon PDFDIRECT":{rules:[{target:"Ris",steps:[{rewrite:["(.*/)(doi/\\w*/?)(10.*)(\\?.*)","$1action/downloadCitation?doi=$3&include=abs&format=ris"]}]},{target:"Ris",steps:[{rewrite:["(.*/)(doi/\\w*/?)(10.*)","$1action/downloadCitation?doi=$3&include=abs&format=ris"]}]},{target:"Default"}]},Emerald:{rules:[{target:"Default"}]},"Atypon PDFPLUS":{rules:[{target:"Bibtex",steps:[{rewrite:["(.*/)(doi/\\w+/)(10.*)(\\?.*)","$1action/downloadCitation?doi=$3&include=abs&format=bibtex"]}]},{target:"Bibtex",steps:[{rewrite:["(.*/)(doi/\\w+/)(10.*)","$1action/downloadCitation?doi=$3&include=abs&format=bibtex"]}]},{target:"Default"}]},"Atypon BibTeX":{rules:[{target:"Bibtex",steps:[{rewrite:["(.*/)(doi/\\w*/?)(10.*)(\\?.*)","$1action/downloadCitation?doi=$3&include=abs&format=bibtex"]}]},{target:"Bibtex",steps:[{rewrite:["(.*/)(doi/\\w*/?)(10.*)","$1action/downloadCitation?doi=$3&include=abs&format=bibtex"]}]}]},"Atypon RIS":{rules:[{target:"Ris",steps:[{rewrite:["(.*/)(doi/\\w*/?)(10.*)(\\?.*)","$1action/downloadCitation?doi=$3&include=abs&format=ris"]}]},{target:"Ris",steps:[{rewrite:["(.*/)(doi/\\w*/?)(10.*)","$1action/downloadCitation?doi=$3&include=abs&format=ris"]}]},{target:"Default",targetOptions:{abstract:{type:"selector",value:["section.abstract","div.article__body section:nth-child(1) > div.section-paragraph"]}}}]},Atypon:{rules:[{target:"Bibtex",steps:[{rewrite:["(.*/)(doi/\\w*/?)(10.*)(\\?.*)","$1action/downloadCitation?doi=$3&include=abs&format=bibtex"]}]},{target:"Bibtex",steps:[{rewrite:["(.*/)(doi/\\w*/?)(10.*)","$1action/downloadCitation?doi=$3&include=abs&format=bibtex"]}]},{target:"Bibtex",steps:[{rewrite:["(.*/)(do/\\w*/?)(10[^/]*/[^/]+)(/full)?/?","$1action/downloadCitation?doi=$3&include=abs&format=bibtex"]}]},{target:"Default",targetOptions:{abstract:{type:"selector",value:["section.abstract","div.article__body section:nth-child(1) > div.section-paragraph"]}}}]},JStage:{rules:[{target:"Bibtex",steps:[{match:'href\\s*=\\s*"([^"]+)"\\s*>\\s*BIB\\s*TEX'}]}]},EbscoHost:{rules:[{target:"EbscoHost"}]},"ACL Anthology":{rules:[{target:"Bibtex",steps:[{rewrite:["(.+)(/|\\.pdf)","$1.bib"]}]}]},"Inter-Research Science Center":{rules:[{target:"Default"}]},Labome:{rules:[{target:"Doi",targetOptions:{abstract:{type:"selector",value:["div.c_desc_v"]},title:{type:"selector",value:["div.c_ti"]}}}]},"SciTech Connect":{rules:[{target:"Default"}]},"JMIR Publications":{rules:[{target:"Default"}]},CDC:{rules:[{target:"Ris",steps:[{match:'href\\s*=\\s*"([^"]+(?:citations|article)[^"]+ris)"'}]},{target:"Default"}]},ERIC:{rules:[{target:"Eric"}]},"European Geosciences Unit":{rules:[{target:"Default"}]},"Now Publishers":{rules:[{target:"NowPublishers"}]},"International Union of Crystallography":{rules:[{target:"Default"}]},"Highwire BMJ":{rules:[{target:"Default"}]},Highwire:{rules:[{target:"Ris",steps:[{match:'href\\s*=\\s*"([^"]+/ris)"'}]},{target:"Ris",steps:[{rewrite:["^(.*citmgr.*)","$1&type=refman"]}]},{target:"Ris",steps:[{match:'a\\shref="(\\S+citmgr\\S+)"'},{rewrite:["^(.*citmgr.*)","$1&type=refman"]}]},{target:"Ris",steps:[{match:'href\\s*=\\s*"([^"]*highwire/citation/\\d+/ris[^"]*)"'}]},{target:"Ris",steps:[{rewrite:["full","abstract"]},{match:'a\\shref="(\\S+citmgr\\S+)"'},{rewrite:["^(.*citmgr.*)","$1&type=refman"]}]},{target:"Default"}]},"American Institute of Mathematical Sciences":{rules:[{target:"Default"}]},JSAP:{rules:[{target:"Default"}]},SciTechnol:{rules:[{target:"Default"}]},"Oxford Scholarship":{rules:[{target:"Default",targetOptions:{published:{type:"selector",value:['div.bibliography p:contains("date")','div.bibliography td:contains("date")']}}}]},Dimensions:{rules:[{target:"Bibtex",steps:[{rewrite:["(.*)/details/publication/(pub\\.\\d+)$","$1/details/sources/publication/export/$2/citation/bibtex"]}]}]},DiVA:{rules:[{target:"Default"}]},"Project Euclid":{rules:[{target:"Default"}]},MDPI:{rules:[{target:"Default"}]},readcube:{rules:[{target:"Default"}]},AEA:{rules:[{target:"Default",steps:[{rewrite:["(.+pdfplus/)(.+)","https://www.aeaweb.org/articles.php?doi=$2"]}]},{target:"Default"}]},GaleGroup:{rules:[{target:"GaleGroup"}]},Github:{disablePreAutocomplete:!0,rules:[{target:"Github"}]},INSPIRE:{rules:[{target:"Inspire",steps:[{rewrite:[".*/(\\d+)$","http://inspirehep.net/api/literature/$1?format=json"]}]}]},ScopeMed:{rules:[{steps:[{rewrite:["(.*fulltextpdf\\.php\\?mno=)(.+)","http://www.scopemed.org/?mno=$2"]}],target:"Default"},{target:"Default"}]},PhilPapers:{rules:[{target:"Bibtex",steps:[{rewrite:["(.*\\.org/rec/)(.+)","http://philpapers.org/export.html?__format=bib&eId=$2&formatName=BibTeX"]}]}]},ResearchGate:{rules:[{target:"ResearchGate"}]},IEEE:{rules:[{target:"IEEE"}]},"IEEE CS Digital Library":{rules:[{target:"IEEEcsdl"}]},"Cell Press":{rules:[{steps:[{rewrite:["(https://[^/]+/)(.+pdf/)(S[^/]+)(\\.pdf.*)","$1abstract/$3"]}],target:"Default"},{steps:[{rewrite:["(https://[^/]+/)(.+pdfExtended/)(S.{20})(.*)","$1abstract/$3"]}],target:"Default"},{target:"Default"}]},"Springer Link":{rules:[{target:"Default",targetOptions:{isbn:{type:"selector",value:["#print-isbn"]},isbn_alt:{type:"selector",value:["#electronic-isbn"]},abstract:{type:"selector",value:["section.Abstract"]},doi:{type:"selector",value:["#doi-url"]}},steps:[{rewrite:["(https?://[^/]+)(/.+pdf/)(10\\.\\d+[^.]+)(.*)","$1/$3"]}]},{target:"Default",targetOptions:{isbn:{type:"selector",value:["#print-isbn"]},isbn_alt:{type:"selector",value:["#electronic-isbn"]},abstract:{type:"selector",value:["section.Abstract"]},doi:{type:"selector",value:["#doi-url"]}}}]},"Springer Nature Experiments":{rules:[{target:"Default",targetOptions:{abstract:{type:"selector",value:["#abstract","div.abstract"]}}}]},"Springer Book":{rules:[{target:"SpringerBook"}]},JMLR:{rules:[{steps:[{rewrite:["(.*volume)(\\d+/[^/]+)(/[^/]+\\.pdf.*)","https://www.jmlr.org/papers/v$2.html"]}],target:"Default"},{target:"Default"}]},"Nature Publishing Group":{rules:[{steps:[{rewrite:["(.+)(\\.pdf.*)","$1"]}],target:"Default"},{target:"Default"}]},"Science Direct":{rules:[{steps:[{rewrite:["(.*pdf.sciencedirectassets.com.+)(S\\d+[^/]+)(/main.+)","https://www.sciencedirect.com/science/article/pii/$2"]}],target:"ScienceDirect"},{target:"ScienceDirect"}]},PubMed:{rules:[{target:"PubMed"}]},"PubMed Central":{rules:[{target:"PubMed"}]},"Spandidos Publication":{rules:[{target:"Default"}]},"EDP Sciences":{rules:[{target:"Default"}]},Tidsskrift:{rules:[{target:"Doi"}]},"Dove Medical Press":{rules:[{target:"Default"}]},Lancet:{rules:[{target:"Default"}]},Wiley:{rules:[{target:"Default",targetOptions:{abstract:{type:"selector",value:["div.abstract-group p"]}},steps:[{rewrite:["(.*)(/citedby|/references|/suppinfo|/epdf|/full|/pdf|/abstract)","$1/abstract/"]}]},{target:"Default",targetOptions:{abstract:{type:"selector",value:["div.abstract-group p"]}}}]},Scopus:{rules:[{target:"Scopus"}]},"Engineering Village":{rules:[{target:"Default"}]},"Web Of Science":{rules:[{target:"WoK"}],dynamic:!0},Ovid:{rules:[{target:"Ovid",steps:[{rewrite:["(.*cgi.*)Link\\+Set(.*)","$1Complete+Reference$2"]}]},{target:"Ovid"}],dynamic:!0},AAAI:{rules:[{target:"Default"}]},"John Benjamins":{rules:[{target:"Default"}]},PenSoft:{rules:[{target:"Ris",steps:[{match:"SetArticleId(\\(\\d+)"},{rewrite:["(.*\\()(\\d+)$","http://phytokeys.pensoft.net/lib/ajax_srv/article_elements_srv.php?action=download_citation_ris&item_id=$2&article_id=$2"]}]}]},"Lippincott William and Wilkins":{rules:[{target:"Default",targetOptions:{abstract:{type:"selector",value:[".article-abstract p"]}}}]},CiteSeerx:{rules:[{target:"Default"}]},Eprints:{rules:[{target:"Default"}]},"Ingenta Connect":{rules:[{target:"Ris",steps:[{match:'href="(\\S+format=ris)[^>]+Export reference"'}]},{target:"Bibtex",steps:[{match:'href="(\\S+format=bib)[^>]+Export reference'}]},{target:"Default"}]},"Ingenta Edify":{rules:[{target:"Default"}]},"ACM Queue":{rules:[{target:"ACM",steps:[{rewrite:[".*id=(\\d+)","https://portal.acm.org/citation.cfm?id=$1"]}]}]},"Association for Computing Machinery":{rules:[{target:"ACM"}]},Hindawi:{rules:[{target:"Default"}]},"De Gruyter":{rules:[{target:"DeGruyter"}]},Mendeley:{rules:[{target:"Default",targetOptions:{abstract:{type:"selector",value:['div.card p[data-name="content"]']}}}]},Amazon:{disablePreAutocomplete:!0,rules:[{target:"Amazon"}]},"Frontiers In":{rules:[{target:"Default"}]},"RSC Publishing":{rules:[{target:"Default",targetOptions:{abstract:{type:"selector",value:["p.abstract"]}}}]},PierOnline:{rules:[{target:"Default"}]},"European Mathematical Society":{rules:[{target:"Default"}]},"Optics InfoBase":{rules:[{target:"Default"}]},"Project Muse":{rules:[{target:"Default"}]},Dryad:{rules:[{target:"Default",targetOptions:{published:{type:"selector",value:["summary.c-file-group__summary"]},journal:{type:"exact",value:"Dryad Digital Repository"}}}]},ArXiv:{disableAutocompleteMatch:!0,rules:[{target:"Arxiv",steps:[{rewrite:["(http.+)(/pdf/)(.+)","$1/abs/$3"]}]},{target:"Arxiv"}]},PubFactory:{rules:[{target:"Default",targetOptions:{abstract:{type:"selector",value:[".abstract .section"]}}}]},"Astrophysics Data System":{rules:[{steps:[{rewrite:["(http.+)(/#?abs/)([^=/]+)(.*$)","$1/abs/$3/abstract?"]}],target:"Default",targetOptions:{abstract:{type:"selector",value:["div.s-abstract-text p"]}}}]},"Thieme Connect":{rules:[{target:"Default"}]},"IET Digital Library":{rules:[{target:"Default"}]},"Biodiversity Heritage Library":{rules:[{target:"Bibtex",steps:[{match:'<a.*title="download bibtex" download=".*" href="(.*)">'}]}]},"Cambridge University Press":{rules:[{target:"Default"}]},"American Mathematical Society":{rules:[{target:"Default",targetOptions:{abstract:{type:"selector",value:["p:has(> a#Abstract)"]}}}]},"American Mathematical Society MathSciNet":{rules:[{target:"MathSciNet"}]},CiNii:{rules:[{target:"Default",targetOptions:{abstract:{type:"selector",value:["div.abstract"]}}}]},EdITLib:{rules:[{target:"EndNote",steps:[{rewrite:["(.*paper_id=)(\\d+)","http://www.editlib.org/index.cfm/files/citation_$2.enw?fuseaction=Reader.ExportAbstract&paper_id=$2&citationformat=EndNote"]}]},{target:"EndNote",steps:[{rewrite:["(.*/)(\\d+)(/?)","http://www.editlib.org/index.cfm/files/citation_$2.enw?fuseaction=Reader.ExportAbstract&paper_id=$2&citationformat=EndNote"]}]},{target:"Default"}]},"Impact Journals":{rules:[{target:"Doi"}]},IWAP:{rules:[{target:"Ris",steps:[{rewrite:["(https?://iwaponline\\.com/)([^d]+)(\\d+/\\d+/\\d+/)(\\d+)(/.*)","$1Citation/Download?resourceId=$4&resourceType=3&citationFormat=0"]}]}]},JStatSoft:{rules:[{target:"Bibtex",steps:[{match:'href="(https://www.jstatsoft.org/index.php/jss/citationstylelanguage/download/bibtex[^"]+)"'}]}]},Silverchair:{rules:[{target:"Default"},{target:"Ris",steps:[{rewrite:["(.*)(/article\\.aspx.*)(articleid=\\d+)","$1/downloadCitation.aspx?format=ris&$3"]}]}]},"Spie Digital Library":{rules:[{target:"Default"}]},Wikipedia:{disablePreAutocomplete:!0,rules:[{target:"Wikipedia"}]},PeerJ:{rules:[{target:"Default"}]},"Medknow Publications":{rules:[{target:"Default"}]},"Mathematical Sciences Publishers":{rules:[{target:"Default"}]},Elsevier:{rules:[{target:"Default",steps:[{rewrite:["(https://[^/]+/article/S.+)(/pdf)","$1/fulltext"]}],targetOptions:{abstract:{type:"selector",value:["div.section-paragraph div.section-paragraph","div.abstract"]}}},{target:"Default",steps:[{rewrite:["(https://[^/]+/)(.+showPdf\\?pii=)(S.+)","$1article/$3/abstract"]}],targetOptions:{abstract:{type:"selector",value:["div.section-paragraph div.section-paragraph","div.abstract"]}}},{target:"Default",targetOptions:{abstract:{type:"selector",value:["div.section-paragraph div.section-paragraph","div.abstract"]}}}]},"Elsevier Masson":{rules:[{target:"Bibtex",steps:[{rewrite:["(.*)/article/(.*)","$1/ArticleMeta?docType=bib&abs=1&articleId=$2"]}]}]},"Elsevier ClinicalKey":{rules:[{target:"Default"}]},eLife:{rules:[{target:"Ris",steps:[{match:'href="([^"]+.ris)"'}]}]},"F1000 Research":{rules:[{target:"F1000Research"}]},"Social Science Research Network":{rules:[{target:"SSRN"}]},"Scientific and Academic Publishing":{rules:[{target:"Default"}]},"Philosophy Documentation Center":{rules:[{target:"Default"}]},"Science Publications":{rules:[{target:"Default"}]},SciELO:{rules:[{target:"Default"}]},"Court Listener":{rules:[{target:"CourtListener"}]},"American Society for Clinical Investigation":{rules:[{target:"Bibtex",steps:[{rewrite:["(.*view/\\d+)(\\D?.*)","$1/cite/bibtex"]}]}]},OpenJournalSystems:{rules:[{target:"Default"}]},CSIRO:{rules:[{target:"Ris",steps:[{rewrite:["(http:\\/\\/www\\.publish\\.csiro\\.au\\/[^\\/]+\\/)(.*)(\\.htm)","$1JournalCitation/$2.ris"]}]},{target:"Default"}]},EHP:{rules:[{target:"EHP"}]},Editorium:{rules:[{target:"Doi"}]},"Oriental Journal of Chemistry":{rules:[{target:"Doi",targetOptions:{title:{type:"selector",value:["#post-title"]}}}]},IJIET:{rules:[{target:"Doi"}]},IJCRBP:{rules:[{target:"Doi",targetOptions:{title:{type:"selector",value:["div.abstitle"]},abstract:{type:"selector",value:["p.absp"]}}}]},"Science Alert":{rules:[{target:"Doi"}]},DSpace:{rules:[{steps:[{rewrite:["(.*)","$1?show=full"]}],target:"Default"}]},ORBi:{rules:[{target:"Default"}]},Eurosurveillance:{rules:[{target:"Default"}]},"Journal of Interactive Media in Education":{rules:[{target:"Default"}]},Agris:{rules:[{target:"Default"}]},Infona:{rules:[{target:"Default"}]},"Central and Eastern European Online Library":{rules:[{target:"Default"}]},"IGI Global":{rules:[{target:"Default"}]},USGS:{referer:!0,rules:[{target:"Ris",steps:[{match:'href="(.*?mimetype=ris)"'}]}]},"China National Knowledge Infrastructure":{rules:[{target:"CNKI"}]},"Stanford Encyclopedia of Philosophy":{rules:[{target:"StanfordEncylopediaOfPhilosophy"}]},RCNi:{rules:[{target:"Default"}]},"Journal of Clinical and Diagnostic Research":{rules:[{target:"Doi",steps:[{rewrite:["(.*id=)(\\d+)","http://www.jcdr.net/ReadXMLFile.aspx?id=$2"]}]}]},"Airiti Library":{rules:[{target:"Default"}]},Jaypeedigital:{rules:[{target:"Doi"}]},"Journal of Object Technology":{rules:[{target:"JournalOfObjectTechnology"}]},Escholarship:{rules:[{target:"Default"}]},"Washington University Supreme Court Database":{rules:[{target:"CourtListener",steps:[{match:'href="(\\S*courtlistener\\S*)"'},{rewrite:["http:(.*)","https:$1"]}]}]},"Library of Congress":{rules:[{target:"MARC",steps:[{rewrite:["(.*)searchArg(1?)=([0-9]+)&(.*)","https://lccn.loc.gov/$3/marcxml"]}]},{target:"MARC",steps:[{rewrite:["(.*)/item/([0-9]+)/","https://lccn.loc.gov/$2/marcxml"]}]}]},JADA:{rules:[{target:"Default"}]},"Open Research Exeter":{rules:[{target:"Default"}]},"Ecology and Society":{rules:[{target:"Default"}]},HeinOnline:{rules:[{target:"Ris",steps:[{match:'href="(CitationFile\\?kind=ris[^"]+base=js)'},{rewrite:["(.*)id=(\\d+)&div=(\\d+)(.*)","$1div=$2&id=$3$4"]}]},{target:"Ris",steps:[{match:'href="(CitationFile\\?kind=ris[^"]+)'},{rewrite:["(.*)id=(\\d+)&div=(\\d+)(.*)","$1div=$2&id=$3$4"]},{match:'window\\.location\\s*=\\s*"([^"]+)'}]}]},"Annual Reviews":{rules:[{target:"AnnualReviews"}]},"Cryptology ePrint Archive":{rules:[{target:"CryptologyEPrintArchive"}]},"Federal Register":{rules:[{target:"FederalRegister"}]},AJTMH:{rules:[{target:"Default"}]},"Public Health Research and Practice":{rules:[{target:"PublicHealthResearchAndPractice"}]},"Turkish Journal of Gastroenterology":{rules:[{target:"Doi",targetOptions:{title:{type:"selector",value:["div.article_content h1"]},abstract:{type:"selector",value:["div.content"]}}}]},"Oxford Academic":{rules:[{target:"Default"}]},Biotaxa:{rules:[{target:"Default"}]},"Advances in Clinical and Experimental Medicine":{rules:[{target:"Default",targetOptions:{abstract:{type:"selector",value:["section.art-abstract"]}}}]},JIACI:{rules:[{target:"Doi"}]},"Ovid Insights":{rules:[{target:"OvidInsights"}]},CAIRN:{rules:[{target:"Default",targetOptions:{abstract:{type:"selector",value:["#pa1"]}}}]},Cogprints:{rules:[{target:"Bibtex",targetOptions:{journal:{type:"exact",value:"Cogprints"}},steps:[{rewrite:["(http://cogprints.org/)([^\\/]+)(/.*)","http://cogprints.org/cgi/export/eprint/$2/BibTeX/cogprints-eprint-$2.bib.html"]}]}]},GeoJournals:{rules:[{target:"Default"}]},"Inter American Development Bank":{rules:[{target:"InterAmericanDevelopmentBank"}]},Forbes:{rules:[{target:"Forbes"}]},"Proceedings of Machine Learning Research":{rules:[{target:"ProceedingsOfMachineLearningResearch",steps:[{rewrite:["(.*)(/[^/]+pdf.*)","$1"]}]},{target:"ProceedingsOfMachineLearningResearch",steps:[{rewrite:["(.*)(.pdf)","$1"]}]},{target:"ProceedingsOfMachineLearningResearch"}]},OpenReview:{rules:[{target:"OpenReview"}]},Britannica:{disablePreAutocomplete:!0,rules:[{target:"Britannica"}]},"National Academies Press":{rules:[{target:"Bibtex",steps:[{rewrite:["(.*catalog/)(\\d+)(/.*)","https://www.nap.edu/citation.php?type=bibtex&record_id=$2"]}]}]},"Semantic Scholar":{rules:[{target:"SemanticScholar"}]},"OMICS Publishing Group":{rules:[{target:"Default"}]},Brookings:{rules:[{target:"Default"}]},"Library Catalog Arena":{rules:[{target:"Arena"}]},"Social Media":{rules:[{target:"SocialMedia"}]},"Hathi Trust":{rules:[{target:"Ris",steps:[{rewrite:["(.*)(/Record/)(\\d+)","$1/Search/SearchExport?handpicked=$3&method=ris"]}]},{target:"Ris",steps:[{match:"HT.params.RecordURL\\s=\\s'([^']+)';"},{rewrite:["(.*)(/Record/)(\\d+)","$1/Search/SearchExport?handpicked=$3&method=ris"]}]}]},Redalyc:{rules:[{target:"Ris",steps:[{rewrite:["(.*id=)(\\d+)","http://www.redalyc.org/service/r2020/exportarCita/$2/1"]}]}]},"Sage Publications":{rules:[{target:"RisFirstNameFirst",steps:[{rewrite:["(.*/)(doi/\\w*/?)(10.*)(\\?.*)","$1action/downloadCitation?doi=$3&include=abs&format=ris"]}]},{target:"RisFirstNameFirst",steps:[{rewrite:["(.*/)(doi/\\w*/?)(10.*)","$1action/downloadCitation?doi=$3&include=abs&format=ris"]}]},{target:"Default"}]},"Google Arts and Culture":{rules:[{target:"GoogleArts"}]},OpenEdition:{rules:[{target:"Default"}]},DBpia:{rules:[{target:"Default"}]},InTech:{rules:[{target:"Bibtex",steps:[{rewrite:["https://www.intechopen.com/(.*)/(\\d+)","https://www.intechopen.com/chapter/bibtex/$2"]}]}]},"World Scientific":{rules:[{target:"Ris",steps:[{rewrite:["(.*/)(doi/\\w*/?)(10.*)(\\?.*)","$1action/downloadCitation?doi=$3&include=abs&format=ris"]}]},{target:"Ris",steps:[{rewrite:["(.*/)(doi/\\w*/?)(10.*)","$1action/downloadCitation?doi=$3&include=abs&format=ris"]}]},{target:"Default"}]},"Screen Studies":{rules:[{target:"Ris",steps:[{rewrite:["(.*\\.com/)(\\w+)(.*tocid=)([^&]+)(&.*)","https://www.screenstudies.com/app/getris?doctype=$2&docid=$4"]}]}]},"Open Science Framework":{rules:[{target:"OSF",steps:[{rewrite:["(.*/)(\\w+)/?","https://api.osf.io/v2/preprints/$2/citation/bibtex/"]}]}]},"M2 Community":{rules:[{target:"Default",targetOptions:{abstract:{type:"selector",value:["font.AbstractText","div.abstract"]}}}]},BioOne:{rules:[{target:"Default"}]},Trove:{rules:[{target:"EndNote",steps:[{rewrite:[".*/(\\d+)","https://trove.nla.gov.au/newspaper/citations/endnote-article-$1.enw"]}]}]},"SEG Library":{rules:[{target:"Default",targetOptions:{abstract:{type:"selector",value:["div.abstractSection p"]}}}]},"Data Intelligence Journal":{rules:[{target:"Bibtex",steps:[{match:'href\\s*=\\s*"([^"]+generate_bib[^"]+)"'}]}]},Archive:{rules:[{target:"MARC",steps:[{match:'href\\s*=\\s*"(/download.*\\.xml)"'}]},{target:"Archive"}]},Default:{rules:[{target:"Default"}]}},o=e=>e.map(e=>({...e,steps:e.steps?e.steps.map(e=>"match"in e?{match:(0,i.getRegExp)(e.match)}:"rewrite"in e?{rewrite:[(0,i.getRegExp)(e.rewrite[0]),e.rewrite[1]]}:e):void 0}));t.stepRulesToRegExp=o;var s=Object.keys(n).map(e=>{const t=n[e],r=(0,a.getByName)(e),s={...t,name:e,rules:o(t.rules),signature:{url:r.urls.map(i.getRegExp),body:(r.body_sigs||[]).map(i.getRegExp),direct_import_format:r.direct_import_format||null,webimport:(r.article_sigs||[]).map(i.getRegExp),webimport_exclude:(r.article_exclude_sigs||[]).map(i.getRegExp),urlBlocked:(r.blocking_url_sigs||[]).map(i.getRegExp),bodyBlocked:(r.blocking_body_sigs||[]).map(i.getRegExp),allowedMimeTypes:r.allowed_mime_types||[],inline_button_disabled:r.inline_button_disabled||!1,proxify:void 0===r.proxify||r.proxify,website_pubtype_allowed:r.website_pubtype_allowed||!1,pdf_in_meta_supported:r.pdf_in_meta_supported||!1}};return Object.keys(s.signature).length||console.error(`Driver ${e} has zero signatures`),s});t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getByName=void 0;const a={JMB:{urls:["jmb\\.or\\.kr"],article_sigs:["/journal/view"]},Longdom:{urls:["longdom\\.org"],article_sigs:["/abstract/","/open-access/"]},ChineseMedicalAssociation:{urls:["rs.yiigle.com"],article_sigs:["/resource_static.jspx"]},"Journal of the Chinese Academy of Medical Sciences":{urls:["journal13.magtechjournal.com"],article_sigs:["/yxkxy/"]},TUBITAK:{urls:["journals\\.tubitak\\.gov\\.tr"],article_sigs:["/iss\\d+/\\d+"]},AKJournals:{urls:["akjournals.com"],article_sigs:["/view/journals/"]},Brieflands:{urls:["brieflands.com"],article_sigs:["/articles/"]},"Giornale Italiano di Cardiologia":{urls:["giornaledicardiologia\\.it"],article_sigs:["/articoli/"],pdf_restricted_sigs:["Accesso autorizzato solo agli utenti registrati","Access authorized only for registered users"]},"Institute of Biomedical Chemistry":{urls:["http://pbmc.ibmc.msk.ru/"],article_sigs:["/article-"]},JCP:{urls:["jcpjournal.org"],article_sigs:["/view.html"]},MinervaMedica:{urls:["minervamedica\\.it"],article_sigs:["/en/journals/"],pdf_restricted_sigs:["Purchase access"]},ProblemsOfVirology:{urls:["virusjour.crie.ru"],article_sigs:["/article/"]},SharedSciencePublisher:{urls:["microbialcell\\.com"],article_sigs:["/researcharticles/"]},Viamedica:{urls:["journals\\.viamedica\\.pl"],article_sigs:["/article/"]},SciDoc:{urls:["scidoc\\.org"],article_sigs:["\\d+.php"]},OAEPublish:{urls:["oaepublish\\.com"],article_sigs:["/articles/"]},"Beijing Renhe Information Technology":{urls:["besjournal\\.com","jbr-pub.org.cn"],article_sigs:["/article/doi/"]},XMLinkHub:{urls:["e\\-jcvi.org","ejgo.org","ejbc.kr","e-nrp.org"],article_sigs:["/DOIx.php"]},KAMJE:{urls:["synapse.koreamed.org"],article_sigs:["/articles/"]},"Histology and Histopathology":{urls:["hh\\.um\\.es"],article_sigs:["/Abstracts/"]},"Singapore Medical Journal":{urls:["smj.org.sg"],article_sigs:["/article/"]},"Veterinary World":{urls:["veterinaryworld\\.org"],article_sigs:["/\\d+.html"]},"The Ukranian BioChemical Journal":{urls:["ukrbiochemjournal\\.org"],article_sigs:["/\\d{4}/\\d{2}/"]},"Electronic Physician":{urls:["ephysician\\.ir"],article_sigs:["/browse-issues/"]},BioProtocol:{urls:["bio-protocol\\.org"],article_sigs:["/bpdetail"]},ProBiologists:{urls:["probiologists\\.com"],article_sigs:["/Article/"]},"European Journal of Rheumatology":{urls:["eurjrheumatol\\.org"],article_sigs:["-\\d+"]},CVJA:{urls:["cvja\\.co\\.za"],article_sigs:["/onlinejournal/"]},BioInformation:{urls:["bioinformation\\.net"],article_sigs:["/\\d+.htm"]},ZoologicalStudies:{urls:["zoolstud\\.sinica\\.edu\\.tw"],article_sigs:["/Journals/"]},"West Indian Medical Journal":{urls:["mona.uwi.edu"],article_sigs:["/article/"]},Hormones:{urls:["hormones\\.gr"],article_sigs:["/article/"]},"West China Journal of Stomatology":{urls:["hxkqyxzz\\.net"]},FTB:{urls:["ftb\\.com\\.hr"],article_sigs:["/archives/"]},SciEngine:{urls:["sciengine\\.com"],article_sigs:["/doi/"]},XHPPublishing:{urls:["xiahepublishing\\.com"],article_sigs:["/ArticleFullText.aspx"]},"Caister Academic Press":{urls:["caister\\.com"],article_sigs:["/abstracts/"]},Actavia:{urls:["folia.paru.cas.cz","cejph.szu.cz"],article_sigs:["/artkey/"]},"Polish Archives of Internal Medicine":{urls:["mp\\.pl"],article_sigs:["/article/"]},"Bentus Journals Systems":{urls:["termedia.pl","ijhdt.com","astrj.com","ijomeh.eu","visagaapublishing.com","medphj.com","pneumon.org","psychoterapiaptp.pl","soilsa.com","journal.gpps.global","nrfhh.com","zer.waw.pl","rgg.edu.pl","brc.amu.edu.pl","pjoes.com","jpccr.eu","populationmedicine.eu","journal.pan.olsztyn.pl","europeanjournalofmidwifery.eu","efood.visagaapublishing.com","jafs.com.pl","journalofhearingscience.com","currenttopicsindiabetes.com","tobaccoinduceddiseases.org","jtam.pl","jeeng.net","ijame-poland.com","miningscience.pwr.edu.pl","ecoeet.com","archivesofmedicalscience.com","biomaterials.pl","acta-agrophysica.org","securityanddefence.pl","management-poland.com","publichealthtoxicology.com","epj.min-pan.krakow.pl","journalssystem.com","aaem.pl","polish-sociological-review.eu","jmacheng.not.pl","tobaccopreventioncessation.com","medpr.imp.lodz.pl","paom.pl","pfsyst.botany.pl","foliamalacologica.com","plantprotection.pl","jomswsge.com"]},JournalAgent:{urls:["achmedicaljournal.com","actaoncologicaturcica.com","agridergisi.com","ajfamed.org","ajhealth.org","anadolutibbidergisi.saglik.gov.tr","anajog.com","anatolianjmed.org","anatoljcardiol.com","androlojibulten.org","anestezidergisi.com","ankaradergisi.org","ankaramedj.com","ankaratipfakultesimecmuasi.net","archivestsc.com","bauhealth.org","behcetuzdergisi.com","beyoglueye.com","bezmialemscience.org","bosphorusmedj.com","caucasianmedj.com","caybdergi.com","cogepderg.com","comprehensivemedicine.org","csmedj.org","dergi.bdhd.org.tr","dergipark.org.tr","eajem.com","eastjmed.org","ejmad.org","eudfd.org","eurarchmedres.org","eurendodj.com","europeaneyeresearch.com","forbestip.org","fujece.firat.edu.tr","gkdaybd.org","globemcc.com","gpt-studios.org","grandjournalofurology.com","gulhanemedj.org","guncelpediatri.com","hamidiyemedj.com","hipsurgeryjournal.org","hnhtipdergisi.com","ighdergisi.org","ijabes.com","ijads.org","ijcva.org","ijtd.org","imjea.com","internationalbiochemistry.com","istanbulmedicaljournal.org","jag.journalagent.com","jag.journalagent.com","jarem.org","jarengteah.org","jcpres.com","jcrpe.org","jemsjournal.org","jer-nursing.org","jiasscience.com","jilti.org","jmsres.com","journal.turkderm.org.tr","journalagent.com","jpedres.org","jtad.org","jtsm.org","jtss.org","khd.tkd.org.tr","klinikpsikiyatri.org","kocaelimj.org","kvbulten.com","lapend.org","meandrosmedicaljournal.org","medeniyetmedicaljournal.org","medicaljournal-ias.org","megaronjournal.com","mirt.tsnmjournals.org","namikkemalmedj.com","northclinist.com","nwmedj.org","oftalmoloji.org","pajes.pau.edu.tr","pelviperineology.org","perfusionjournal.com","phdergi.org","planlamadergisi.org","qrheumatol.com","raeddergisi.org","respircase.com","scie.online","secjournal.net","shydergisi.org","sislietfaltip.org","tipdergi.kafkas.edu.tr","tjh.com.tr","tjn.org.tr","tjoddergisi.org","tjtes.org","tmc.dergisi.org","trendspediatrics.com","turkailehekderg.org","turkhijyen.org","turkishendodonticjournal.com","turkishimmunology.org","turkishjic.org","turkiyeparazitolderg.org","turkjps.org","turkosteoporozdergisi.org","umraniyepediatri.com","updatesincardiology.com","vanmedjournal.com","yeditepedentaljournal.org","zeynepkamilmedj.com"],allowed_mime_types:["application/octet-stream"],body_sigs:['meta name="citation_title"']},SciencePublishingGroup:{urls:["sciencepublishinggroup.com"],article_sigs:["/article/"]},Jove:{urls:["jove\\.com"],article_sigs:["/t/\\d+/"]},"Hong Kong Medical Journal":{urls:["hkmj.org"],article_sigs:["/abstracts/"]},AAAI:{urls:["aaai\\.org"]},AAFP:{urls:["aafp\\.org"]},AASV:{urls:["aasv\\.org"]},"Academia.edu":{urls:["academia\\.edu"],login_required_sigs:["controller_name = 'signup"],proxify:!1},"Academic Journals":{urls:["academicjournals\\.org"]},"Atypon PDFDIRECT":{urls:["ascopubs\\.org"],article_sigs:["doi/(abs|full|pdf|pdfplus|pdfdirect)","/doi/10\\."],pdf_restricted_sigs:["FULL ACCESS RIGHTS ARE REQUIRED","Sorry, you do not have access to this article","Online access to the content you have requested requires","PAY PER VIEW","You do not have access to the full text of this publication","2 days access for \\$",'offer-price">24 hours access for',"You can also purchase online an Individual or Institutional Subscription","Access to the content you have requested requires one of the following","past 24 hours, you can gain access by logging in with your email address and password below","YOU DO NOT HAVE ACCESS TO THE FULL TEXT OF THIS ARTICLE","Your current credentials do not allow retrieval of the full text","Purchase this article now for immediate electronic delivery and access","This article is available to subscribers","nnen diesen Beitrag online erwerben","or if you have purchased this article through","you can purchase this content online through any offer listed below","You will be able to gain full access and download the PDF of this article immediately","Your current credentials do not allow retrieval of the full text","your subscription does not provide access to this content","If you have personal access to this content","If you wish to purchase this article, please visit","Subscribe to NEJM","PLEASE LOG IN TO ACCESS THE FULL TEXT OF THIS ARTICLE","Or purchase it","Purchase this article","a subscription provided by one of AIP","Buy Single Article","Please click here for full access options","purchase access to view the full text","You do not currently have access to this article"]},"ACL Anthology":{urls:["aclweb\\.org","aclanthology\\.org"]},"Advances in Clinical and Experimental Medicine":{urls:["advances\\.umed\\.wroc\\.pl","advances\\.umw\\.edu\\.pl"],article_sigs:["/article/"]},AEA:{urls:["aeaweb\\.org"],pdf_restricted_sigs:["If you normally access AEAweb journal content via","AEA members have free access to the full-text content","AEA Journal Article Full-Text Access"]},AEPress:{urls:["elis\\.sk"],pdf_restricted_sigs:["Buy PDF"]},Agris:{urls:["agris\\.fao\\.org"],article_sigs:["recordID="],proxify:!1},"Airiti Library":{urls:["airitilibrary\\.com"]},ALTEX:{urls:["altex\\.ch"]},"AME Publishing Company":{urls:["amepc\\.org","amegroups\\.(com|org)"],article_sigs:["article/view"]},Amazon:{urls:["amazon\\.(com|co.uk|de|fr|es)"],article_sigs:["/dp/\\d{10}"],proxify:!1,inline_button_disabled:!0,website_pubtype_allowed:!0},"American Institute of Mathematical Sciences":{urls:["aimsciences\\.org"],pdf_restricted_sigs:["Access restricted: you will need to login"],blocking_url_sigs:["https://www.aimsciences.org/article/noLoginPage\\?viewType=PDF"]},"American Mathematical Society":{urls:["ams\\.org/journals"],article_sigs:["/S"],pdf_restricted_sigs:["content-delivery.gif"]},"American Mathematical Society MathSciNet":{urls:["ams\\.org.*mathscinet"],article_sigs:["publdoc\\.html","getitem","mathscinet/article","relay-station\\?mr="]},"American Physical Society":{urls:["aps\\.org"],article_sigs:["/abstract/","/showrefs/","/forward/","/articles/"],pdf_restricted_sigs:["<h2>Authorization Required"]},"American Psychological Association":{urls:["apa\\.org"],article_sigs:["record","/journals/","id=","/psycinfo/\\d","doiLanding","fulltext"],pdf_restricted_sigs:["Purchase PDF","Add to Cart","Login if you have a Gold","%2Fbuy%2F","distil_r_captcha"],blocking_body_sigs:["We probably closed this session for your privacy because we thought you left."]},"American Society for Clinical Investigation":{urls:["jci\\.org"]},"Annual Reviews":{urls:["annualreviews\\.org","physiology.org"],article_sigs:["doi"],pdf_restricted_sigs:["Choose Your Access Options","#article-denial"]},ArXiv:{urls:["arxiv\\.org","scirate\\.com"],article_sigs:["abs/","pdf","arxiv/\\d+"],proxify:!1},"Association for Computing Machinery":{urls:["portal\\.acm\\.org","dl\\.acm\\.org"],article_sigs:["doi"],pdf_restricted_sigs:["Get Access","Access Denial"]},"ACM Queue":{urls:["queue\\.acm\\.org"],article_sigs:["detail\\.cfm"]},"ARVO journals":{urls:["arvojournals\\.org"],article_sigs:["article.aspx"]},AJTMH:{urls:["ajtmh\\.org"],article_sigs:["journals"],pdf_restricted_sigs:["Buy:","Get Permissions"]},"Astrophysics Data System":{urls:["adsabs\\.harvard\\.edu","cdsads\\.u-strasbg\\.fr","ukads\\.nottingham\\.ac\\.uk","ads\\.(iucaa|bao|nao|on|astro|mao|inasan|ari|eso)\\."]},"Atypon BibTeX":{urls:["\\.science\\.org"],article_sigs:["doi/(abs|full|pdf|pdfplus|pdfdirect|10)"],pdf_restricted_sigs:["Get full access to this article","View all available purchase options and get full access to this article"],blocking_body_sigs:["Your browser will redirect to your requested content shortly"]},"Atypon RIS":{urls:["acpjournals\\.org"],article_sigs:["doi/(abs|full|pdf|pdfplus)","doi/10\\."],pdf_restricted_sigs:["please use one of the options below to sign in or purchase access","Access to PDFs for FREE content requires users to be registered and logged in"]},Atypon:{urls:["embopress.org","journals.biologists.com","journalofdairyscience.org","neurology.org","pnas.org","physicstoday.scitation.org","mededportal.org","jcsm.aasm.org","annsaudimed.net","pubs.asha.org","idunn.no","journals.healio.com","journal.csj.jp","auajournals.org","science.org","atypon","ahajournals.org","cdnsciencepub.com","acs\\.org","amsciepub\\.com","liebertpub\\.com","liebertonline\\.com","reference-global\\.com","informahealthcare\\.com","avma\\.org","apsjournals\\.apsnet\\.org","tandfonline\\.com","morganclaypool\\.com","futuremedicine\\.com","anesthesiaprogress\\.org","aapb-biofeedback\\.com","aami-bit\\.org","asmjournals\\.org","journals\\.asm\\.org","castaneajournal\\.org","cpcjournal\\.org","hljournals\\.org","jevtonline\\.org","joionline\\.org","journalofparasitology\\.org","pedpath\\.org","phycologia\\.org","pbsw\\.org","psjournals\\.org","srmjournals\\.org","wssajournals\\.org","nejm\\.org","nrcresearchpress\\.com","expert-reviews\\.com","siam\\.org","guilfordjournals\\.com","esajournals\\.org","natajournals\\.org","atsjournals\\.org","ajronline\\.org","ascelibrary\\.org","journal\\.southerneconomic\\.org","archivesofpathology\\.org","future-science\\.com","jacc\\.org","joponline\\.org","journals\\.ama\\.org","journals\\.asm\\.org","iijournals\\.com","cfapubs\\.org","ejournals\\.duncker-humblot\\.de","arc\\.aiaa\\.org","ajpe\\.org","aphapublications\\.org","qscience\\.com","www\\.science\\.com","hanser-elibrary\\.com","gahmj\\.com","pubsonline\\.informs\\.org","jospt\\.org","pubs\\.rsna\\.org","birpublications\\.org","rrjournal\\.org","aaajournals\\.org","journals\\.ama\\.org","magonlinelibrary\\.com","jcronline\\.org","pubs\\.aic\\.ca","psychiatryonline\\.org","jwildlifedis\\.org","jopdentonline\\.org","vr-elibrary\\.de","jgme\\.org","jsad\\.com","econtent\\.hogrefe\\.com","psychiatryonline\\.org","icevirtuallibrary\\.com","journals\\.jps\\.jp","inderscienceonline\\.com","wageningenacademic\\.com","jaaha\\.org","publications\\.amsus\\.org","cerealchemistry\\.aaccnet\\.org","jgi\\.camh\\.net","multiplevoicesjournal\\.org","akademiai\\.com","aoucospubs\\.org","jisne\\.org","journals.humankinetics.com","brepolsonline\\.net","atsjournals\\.org","clinicalschizophrenia\\.org","familiesinsocietyjournal\\.org","utexaspressjournals\\.org","\\.scitation\\.org","rsfjournal\\.org","healthaffairs\\.org","molbiolcell\\.org","aom\\.org","future-science\\.com","lifescied\\.org","fasebj\\.org","journals\\.uchicago\\.edu","royalsocietypublishing\\.org"],body_sigs:["atypon\\.com"],article_sigs:["doi/(abs|full|pdf|pdfplus|epdf)","doi/10\\.","/article/"],pdf_restricted_sigs:['class="icon-download"></i>[\\s\\n]*<span>View full text',"Access through your institution",'title="No access"',"Get full access to this article","You do not currently have access to this content","FULL ACCESS RIGHTS ARE REQUIRED","Sorry, you do not have access to this article","Online access to the content you have requested requires","PAY PER VIEW","You do not have access to the full text of this publication","2 days access for \\$",'offer-price">24 hours access for',"You can also purchase online an Individual or Institutional Subscription","Access to the content you have requested requires one of the following","past 24 hours, you can gain access by logging in with your email address and password below","YOU DO NOT HAVE ACCESS TO THE FULL TEXT OF THIS ARTICLE","Your current credentials do not allow retrieval of the full text","Purchase this article now for immediate electronic delivery and access","This article is available to subscribers","nnen diesen Beitrag online erwerben","or if you have purchased this article through","you can purchase this content online through any offer listed below","You will be able to gain full access and download the PDF of this article immediately","Your current credentials do not allow retrieval of the full","your subscription does not provide access to this content","If you have personal access to this content","If you wish to purchase this article, please visit","Subscribe to NEJM","PLEASE LOG IN TO ACCESS THE FULL TEXT OF THIS ARTICLE","Or purchase it","Purchase this article","a subscription provided by one of AIP","Buy Single Article","Please click here for full access options","purchase access to view the full text","You do not currently have access to this article","Get Access","Pay Per Article Purchase","you can gain access by logging in with your email","Buy This Article","You will be redirected to acponline.org to sign","To read the full text, please use one of the options below to sign in or purchase access","PDF download + Online access","To read the fulltext, please use one of the options below to sign in or purchase access","You do not have access to the full text of this content"]},"Atypon PDFPLUS":{urls:["euppublishing\\.com","rcnpublishing\\.com","journals\\.rcni\\.com"],article_sigs:["doi/(abs|full|pdf|pdfplus)"],pdf_restricted_sigs:["FULL ACCESS RIGHTS ARE REQUIRED","Sorry, you do not have access to this article","Online access to the content you have requested requires","PAY PER VIEW","You do not have access to the full text of this publication","2 days access for \\$","You can also purchase online an Individual or Institutional Subscription","Access to the content you have requested requires one of the following","past 24 hours, you can gain access by logging in with your email address and password below","Please select one of the following purchase options for immediate online access","Buy this article:","Buy this item:","if you or your institution have a subscription, access token or Pay Per Article access","If you have access to this journal as a benefit of membership","You need a subscription to read the full article","You may already have access to this article. Please","You can access this article if you have a personal subscription","Purchase this article","Your subscription package includes","Alternatively, you can purchase access to this article for the next seven days","Unlock full access to RCNi Plus today","Want to read more?"]},Archive:{urls:["archive\\.org"]},BASE:{urls:["base-search\\.net/"],article_sigs:["/Record/"],proxify:!1},"Berkeley Electronic Press":{urls:["digitalcommons\\.","scholarworks\\.","docs\\.lib\\.purdue\\.edu","aisel\\.aisnet\\.org"],body_sigs:["bepress_citation"],pdf_body_sigs:["bepress_citation_pdf_url"]},"Biodiversity Heritage Library":{urls:["biodiversitylibrary\\.org"],article_sigs:["/bibliography/"]},"BioMed Central":{urls:["springeropen\\.com","biomedcentral\\.com"],article_sigs:["/articles/10"],pdf_body_sigs:["http://\\S*/content/pdf/.*\\.pdf","/content/pdf/.*\\.pdf"],proxify:!1},BioOne:{urls:["bioone\\.org"],article_sigs:["/10\\."],pdf_restricted_sigs:['onclick\\s*=\\s*"ShowDownloadOptionsDialog']},Biotaxa:{urls:["biotaxa\\.org"],article_sigs:["/article/"],pdf_restricted_sigs:["Subscription required to access item","Subscription or article purchase required to access item",'class=\\"accessLogo\\"\\ssrc=\\".*(?=fulltext_restricted_medium)']},"Baishideng Publishing Group":{urls:["wjgnet\\.com"],article_sigs:["/full/"],allowed_mime_types:["application/octet-stream"]},"Begell Digital Library":{urls:["dl\\.begellhouse\\.com"],article_sigs:["/journals/.*,.*"],pdf_restricted_sigs:["In order to access this website you must be an authorized user","Check subscription","Purchase"]},"Biomolecules & Therapeutics":{urls:["biomolther\\.org"],article_sigs:["/journal/view"],allowed_mime_types:["application/download"]},Britannica:{urls:["britannica\\.com"],proxify:!1,inline_button_disabled:!0},Brookings:{urls:["brookings\\.edu"],article_sigs:["/blog/","/articles/"]},CAIRN:{urls:["www\\.cairn\\.info","www\\.cairn\\-int\\.info"]},"Cambridge University Press":{urls:["www\\.cambridge\\.org"],article_sigs:["/article/"],pdf_restricted_sigs:["Get access"]},"M2 Community":{urls:["animbiosci\\.org","ecerm\\.org","e-crt\\.org","e-ceo\\.org","e-jnic\\.org","irjournal\\.org","e-aaps\\.org","kjp\\.or\\.kr","j-nn\\.org","e-arm\\.org","asianspinejournal\\.org","neo-med\\.org","j-kosham\\.or\\.kr","kjfm\\.or\\.kr","joet\\.org","neurointervention\\.org","coloproctol\\.org","ajkinesiol\\.org","ijat\\.net","ekja\\.org","e-acfs\\.org","psychiatryinvestigation\\.org","pha\\.or\\.kr","e-jar\\.org","jees\\.kr","e-apem\\.org","genominfo\\.org","exercmed\\.org","e-aps\\.org","qihjournal\\.org","ejao\\.org","ejpbl\\.org","emsjournal\\.org","jwmr\\.org","pfmjournal\\.org","traumaimpro\\.org","bcjjl\\.org","e-cacd\\.org","kjorl\\.org","ijkh\\.khistory\\.org","jkns\\.or\\.kr","jkslp\\.org","kjuo\\.or\\.kr","pemj\\.org","kjmm\\.org","jmisst\\.org","jrpr\\.org","medhist\\.or\\.kr","accjournal\\.org","jkcs\\.or\\.kr","e-algae\\.org","jikm\\.or\\.kr","e-roj\\.org","clinicalultrasound\\.org","thenerve\\.net","e-ajbc\\.org","e-jhis\\.org","childstudies\\.org","e-kjpt\\.org","ksep-es\\.org","kjim\\.org","e-asr\\.org","jkscoe\\.or\\.kr","jksem\\.org","e-arrhythmia\\.org","e-chnr\\.org","jkgn\\.org","chikd\\.org","jksqm\\.org","kjpbt\\.org","einj\\.org","parasitol\\.kr","jkna\\.org","j\\.kafn\\.or\\.kr","jksee\\.or\\.kr","jpatholtm\\.org","ceemjournal\\.org","jpmph\\.org","e-eht\\.org","jsms\\.sch\\.ac\\.kr","kjme\\.kr","fer\\.or\\.kr","e-ceth\\.org","e-epih\\.org","e-ce\\.org","ajas\\.info","ekjm\\.org","e-jmd\\.org","e-cmh\\.org","e-jsm\\.org","escienceediting\\.org","e-neurospine\\.org","e-ultrasonography\\.org","jbd\\.or\\.kr","j-epilepsy\\.org","eeer\\.org","e-rvs\\.org","e-jer\\.org","e-csd\\.org","kjco\\.org","jkom\\.org","sleepmedres\\.org","jeehp\\.org","e-jnc.org","j-stroke\\.org","e-jsst\\.org","e-jei\\.org","journal\\.kapd\\.org","e-acn.org"],article_sigs:["/journal/view"]},Cogprints:{urls:["cogprints\\.org"],article_sigs:["cogprints\\.org/\\d+/"]},CSIRO:{urls:["publish\\.csiro\\.au"],pdf_restricted_sigs:["You have selected the following items during your visit to","PDF\\s+\\([^\\)]+\\)\\s+\\$25","Buy PDF"]},CDC:{urls:["\\.cdc\\.gov/mmwr/preview","cdc\\.gov/pcd","cdc\\.gov/eid","cdc\\.gov/mmwr"],article_sigs:["/issues/","/article/","mmwr/volumes/\\d+/.+/.+"],proxify:!1},CEDRAM:{urls:["cedram\\.org"],article_sigs:["item\\?id="]},"Cell Press":{urls:["cell\\.com/","10\\.1016/j\\.celrep"],article_sigs:["(pdf|pdfExtended|abstract|fulltext|retrieve)"],pdf_restricted_sigs:["Choose an option to locate\\/access this article","please login as a subscribed user or","please choose from the options below","Purchase one-time access"],pdf_in_meta_supported:!0},"Cell Press Version Science Direct":{urls:["10\\.1016/j\\.tig"],article_sigs:["(pdf|abstract|fulltext|retrieve)"],pdf_restricted_sigs:["please login as a subscribed user","Purchase one-time access"]},"Central and Eastern European Online Library":{urls:["ceeol\\.com"],article_sigs:["article-detail"]},"China National Knowledge Infrastructure":{urls:["en\\.cnki\\.com\\.cn","cnki\\.net"],pdf_restricted_sigs:['class="loginmain"','class="loginmod"',"Publication Search"],article_sigs:["/Article_en/","/detail/","/doi/"]},chemRxiv:{urls:["chemrxiv\\.org"],article_sigs:["/articles/"],proxify:!1},CiNii:{urls:["ci\\.nii\\.ac\\.jp"]},CiteSeerx:{urls:["citeseerx","citeseer\\.ist\\.psu\\.edu"],article_sigs:["/viewdoc/"],proxify:!1},"Congress.gov":{urls:["congress.gov/bill"],proxify:!1,blocking_body_sigs:["Your browser will redirect to your requested content shortly"]},Cochrane:{urls:["cochranelibrary\\.com"],article_sigs:["/doi/"],pdf_restricted_sigs:["readcube-label locked"]},CORE:{urls:["core\\.ac\\.uk"],article_sigs:["/display/"],proxify:!1},"Court Listener":{urls:["courtlistener\\.com"],article_sigs:["opinion/\\d+"],proxify:!1},"Cryptology ePrint Archive":{urls:["eprint\\.iacr\\.org"],article_sigs:["/\\d\\d\\d\\d/"]},"Data Intelligence Journal":{urls:["data-intelligence-journal\\.org"],article_sigs:["/p/"],allowed_mime_types:["application/octet-stream"]},DeepDyve:{urls:["deepdyve\\.com"],article_sigs:["/lp/.+/.+"]},"De Gruyter":{urls:["degruyter\\.com","sciendo\\.com"],pdf_restricted_sigs:['"not-authorized"',"\\/paywalllightbox\\/",'role="alert"']},DBLP:{urls:["dblp\\.uni-trier\\.de"],article_sigs:["/bibtex/"],proxify:!1},DBpia:{urls:["dbpia\\.co\\.kr"],article_sigs:["/articleDetail"],pdf_restricted_sigs:["If you want to get full access"],login_required_sigs:["\uac1c\uc778\ud68c\uc6d0\uc73c\ub85c \ub85c\uadf8\uc778 \ud6c4 \uc774\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4"]},Default:{urls:[],body_sigs:[".*"]},Dimensions:{urls:["dimensions\\.ai"],article_sigs:["/details/publication/"]},DiVA:{urls:["diva-portal\\.org"],article_sigs:["record\\.jsf"]},"Dove Medical Press":{urls:["dovepress\\.com"],proxify:!1},Dryad:{urls:["datadryad.org"],article_sigs:["resource"]},DSpace:{urls:["dspace\\.mit\\.edu"],article_sigs:["handle"],proxify:!1},"D-Lib":{urls:["dlib\\.org"],article_sigs:["/dlib/.+/.+/.+html"],proxify:!1},EbscoHost:{urls:["research\\.ebsco\\.com","web\\.[a-z]+\\.ebscohost\\.com"],article_sigs:["/c/","detail/detail\\?"]},"Ecology and Society":{urls:["ecologyandsociety\\.org"],article_sigs:["art"]},EdITLib:{urls:["editlib\\.org"]},Editorium:{urls:["editorum\\.ru","naukaru\\.ru"],article_sigs:["/article/view/","/nauka/article/"]},"EDP Sciences":{urls:["agronomy-journal.org","analusis.edpsciences.org","animres.edpsciences.org","limnology-journal.org","annphys.org","ata-journal.org","afs-journal.org","apidologie.org","alr-journal.org","aanda.org","aas.aanda.org","biologie-journal.org","bio-conferences.org","uniodf-journal.org","cahiersagricultures.fr","asees.water-quality-journal.org","cahiers-myologie.org","ctv-jve-journal.org","dairy-journal.org","rdmbd.org","e3s-conferences.org","eas-journal.org","etp-journal.org","ebr-journal.org","epjap.org","epjam.edp-open.org","epjb.epj.org","epjd.epj.org","epjds.epj.org","epje.epj.org","epjh.epj.org","epj-n.org","epj-pv.org","epjst.epj.org","epjti.epj.org","epj-conferences.org","epljournal.edpsciences.org","esaim-cocv.org","esaim-m2an.org","esaim-ps.org","esaim-proc.org","ejess.edpsciences.org","water-quality-journal.org","europhysicsnews.org","fruits-journal.org","gse-journal.org","hel-journal.org","shf-lhb.org","hydroecologie.org","ijsmdo.org","metrology-journal.org","itm-conferences.org","j3ea.org","jcp.edpsciences.org","journaldephysique.org","jdao-journal.org","swsc-journal.org","kmae-journal.org","mfr.edp-open.org","matec-conferences.org","mattech-journal.org","mmnp-journal.org","mechanics-industry.org","mbcb-journal.org","medecine-nutrition.org","medecinesciences.org","metallurgical-research.org","mmm.edpsciences.org","mov-sport-sciences.org","nss-journal.org","ocl-journal.org","ogst.ifpenergiesnouvelles.fr","orthodfr.org","parasite-journal.org","pedagogie-medicale.org","perspectives-psy.org","photoniques.com","psycho-clinique.org","quadrature-journal.org","radioprotection.org","rairo-ro.org","rairo-ita.org","refletsdelaphysique.fr","regenmedres-journal.org","rees-journal.org","rnd.edpsciences.org","odf.edpsciences.org","geotechnique-journal.org","rgn.publications.sfen.org","shs-conferences.org","sicot-j.org","surgmedtech-journal.org","sustainable-buildings-journal.org","tsm.astee.org","journal-therapie.org","vetres.org"],pdf_restricted_sigs:["Online access to the article requires one","Purchase access"]},eLife:{urls:["elifesciences.org"],article_sigs:["/content/","/articles/"],proxify:!1},Elsevier:{urls:["aaceclinicalcasereports.com","aacejournalendocrinepractice.org","aaojournal.org","academicpedsjnl.net","academicradiology.org","ackdjournal.org","advancesinanesthesia.com","advancesinophthalmology.com","advancesinpediatrics.com","advancesradonc.org","advancessurgery.com","airmedicaljournal.com","ajconline.org","ajemjournal.com","ajgponline.org","ajhg.org","ajicjournal.org","ajkd.org","ajo.com","ajodo.org","ajogmfm.org","ajog.org","ajp.amjpathol.org","ajpm-online.net","ajpmonline.org","americanjournalofsurgery.com","amjmed.com","amjmedsci.com","amjmedsci.org","anaesthesiajournal.co.uk","andjrnl.org","anesthesiahistoryjournal.org","anesthesiology.theclinics.com","annallergy.org","annalsofoncology.org","annalsofvascularsurgery.com","annalsthoracicsurgery.org","annemergmed.com","archives-pmr.org","arthroplastyjournal.org","arthroplastytoday.org","arthroscopyjournal.org","arthroscopysportsmedicineandrehabilitation.org","arthroscopytechniques.org","asian-nursingresearch.com","atherosclerosis-journal.com","aurisnasuslarynx.com","ausemergcare.com","australiancriticalcare.com","autonomicneuroscience.com","bbmt.org","biologicalpsychiatryjournal.com","biophysj.org","bjaed.org","bjanaesthesia.org","bjoms.com","bodyworkmovementtherapies.com","brachyjournal.com","brainanddevelopment.com","brainstimjrnl.com","canadianjournalofdiabetes.com","canadianjournalofophthalmology.ca","cancergeneticsjournal.org","cancertreatmentreviews.com","cardiacep.theclinics.com","cartilagejournal.org","cegh.net","celltherapyjournal.org","cghjournal.org","cidjournal.com","cjcopen.ca","clinbiomech.com","clinical-breast-cancer.com","clinical-colorectal-cancer.com","clinical-genitourinary-cancer.com","clinicalimaging.org","clinical-lung-cancer.com","clinical-lymphoma-myeloma-leukemia.com","clinicalmicrobiologyandinfection.com","clinicalnutritionespen.com","clinicalnutritionexperimental.com","clinicalnutritionjournal.com","clinicalnutritionopenscience.com","clinicaloncologyonline.net","clinicalradiologyonline.net","clinicaltherapeutics.com","cmghjournal.org","collegianjournal.com","contactlensjournal.com","contraceptionjournal.org","criticalcare.theclinics.com","ctro.science","cvcasejournal.com","cvdigitalhealthjournal.com","cysticfibrosisjournal.com","diabetesresearchclinicalpractice.com","diagnostichistopathology.co.uk","dldjournalonline.com","ejcancer.com","ejinme.com","ejog.org","ejoncologynursing.com","ejpn-journal.com","ejradiology.com","ejropen.com","ejso.com","ejves.com","ejvesreports.com","epilepsybehavior.com","esmoiotech.org","esmoopen.com","eu-focus.europeanurology.com","euoncology.europeanurology.com","europeanurology.com","exphem.org","fastracjournal.org","fertstert.org","fertstertreports.org","fertstertreviews.org","fertstertscience.org","fsigenetics.com","fsigeneticssup.com","gastrojournal.org","geriatriconcology.net","geriatric.theclinics.com","ghadvances.org","giejournal.org","gimjournal.org","goldjournal.net","gynecologiconcology-online.net","hardware-x.com","heartandlung.org","heartlungcirc.org","heartrhythmcasereports.com","heartrhythmjournal.com","heartrhythmopen.com","hpbonline.org","idhjournal.com.au","ijidonline.com","ijoms.com","injuryjournal.com","internationaljournalofcardiology.com","interventional.theclinics.com","jaacap.org","jaadcasereports.org","jaadinternational.org","jaad.org","jaapos.org","jaci-global.org","jaci-inpractice.org","jacionline.org","jacr.org","jada.ada.org","jahonline.org","jamda.com","jandonline.org","japha.org","jbc.org","jcardioanesthesia.com","jcehepatology.com","jclinepi.com","jctecasereports.com","jctejournal.com","jcvaonline.com","jdscommun.org","jdsjournal.com","jem-journal.com","jendodon.com","jenonline.org","jfas.org","jhandsurg.org","jhandtherapy.org","jhep-reports.eu","jhltonline.org","jhsgo.org","jiac-j.com","jidinnovations.org","jidonline.org","jidsponline.org","jisakos.org","jlr.org","jmdjournal.org","jmig.org","jmirs.org","jmmc-online.com","jmptonline.org","jneb.org","jni-journal.com","jns-journal.com","jocn-journal.com","jogc.com","jognn.awhonn.org","joms.org","jopan.org","journalacs.org","journal.chestnet.org","journalchiromed.com","journal-cot.com","journalnursingregulation.com","journalofcardiologycases.com","journal-of-cardiology.com","journalofcardiovascularct.com","journal-of-hepatology.eu","journalofhospitalinfection.com","journalofinfection.com","journalofosteopathicmedicine.com","journalofsubstanceabusetreatment.com","journalofsurgicalresearch.com","journals.elsevierhealth.com","jpagonline.org","jpain.org","jpedhc.org","jpeds.com","jpedsurg.org","jpharmsci.org","jprasurg.com","jpsmjournal.com","jpurol.com","jrnjournal.org","jsams.org","jscai.org","jsesarthroplasty.org","jsesreviewsreportstech.org","jshoulderelbow.org","jsm.jsexmed.org","jtcvsonline.org","jtcvsopen.org","jtcvstechniques.org","jtocrr.org","jto.org","jvascsurgcases.org","jvascsurg.org","jvir.org","jvoice.org","jvsvenous.com","jvsvenous.org","jwfo.org","kidney-international.org","kidneymedicinejournal.org","kireports.org","kisupplements.org","lipidjournal.com","lungcancerjournal.info","maturitas.org","mayoclinicproceedings.org","mcpiqojournal.org","mcponline.org","meddos.org","medicinejournal.co.uk","metabolismjournal.com","msard-journal.com","nassopenaccess.org","neuromodulationjournal.org","nmcd-journal.com","nmd-journal.com","npjournal.org","nurseleader.com","nursingoutlook.org","nursingsimulation.org","oarsijournal.com","obstetanesthesia.com","obstetrics-gynaecology-journal.com","onlinecjc.ca","onlinejase.com","onlinejcf.com","oooojournal.net","ophthalmologyscience.org","optechtcs.com","optecoto.com","oralmaxsurgeryatlas.theclinics.com","orthopaedicsandtraumajournal.co.uk","paediatricsandchildhealthjournal.co.uk","painmanagementnursing.org","pathologyjournal.rcpa.edu.au","pediatricnursing.org","pediatr-neonatol.com","pedneur.com","personalizedmedpsych.com","pet.theclinics.com","phiro.science","physicamedica.com","physicianassistant.theclinics.com","physiotherapyjournal.com","plasticsurgery.theclinics.com","plefa.com","practicalradonc.org","prd-journal.com","primary-care-diabetes.com","prosdent.org","psychiatricnursing.org","radiographyonline.com","radiologic.theclinics.com","rbmojournal.com","redjournal.org","resmedjournal.com","resuscitationjournal.com","rheumatic.theclinics.com","seizure-journal.com","seminarsinnephrology.org","semortho.com","semtcvspeds.com","semthorcardiovascsurg.com","sfnmjournal.com","slas-discovery.org","slas-technology.org","sleep.theclinics.com","smoa.jsexmed.org","smr.jsexmed.org","soard.org","softwareimpacts.com","sportsmed.theclinics.com","strokejournal.org","surgeryjournal.co.uk","surgjournal.com","surgonc.theclinics.com","surgpath.theclinics.com","surveyophthalmol.com","techvir.com","tetrahedron-chem.com","thebreastonline.com",".*.theclinics.com","thegreenjournal.com","thejpd.org","thekneejournal.com","thespinejournalonline.com","thoracic.theclinics.com","thrombosisresearch.com","tigejournal.org","tipsro.science","translationalres.com","trasci.com","umbjournal.org","vaajournal.org","valuehealthregionalissues.com","valueinhealthjournal.com","videogie.org","wemjournal.org","whijournal.com","womenandbirth.org","worldallergyorganizationjournal.org","zefq-journal.com"],article_sigs:["/article/","action/showPdf"],pdf_restricted_sigs:["You do not have access to the content that you requested","find out if you have full-text access via your institute","review your options for gaining access","Purchase one-time access"],blocking_body_sigs:["::CLOUDFLARE_ERROR_","Request Verification In Progress"],blocking_url_sigs:["/craft/capi/cfts/init/"],pdf_in_meta_supported:!0},"Elsevier ES":{urls:["elsevier\\.es"],article_sigs:["-revista-"],pdf_restricted_sigs:["You do not have access to the content that you requested","find out if you have full-text access via your institute","review your options for gaining access","Para leer el texto completo","Si ya tiene sus datos de acceso"]},ElsevierHub:{urls:["https?://linkinghub.elsevier.com"],pdf_restricted_sigs:["Purchase this article for","please review your options for gaining access"]},"Elsevier Masson":{urls:["em-consulte\\.com"],pdf_restricted_sigs:["Access to the full text of this article requires a subscription"]},"Elsevier Reader":{urls:["reader.elsevier.com"],article_sigs:["/reader/"]},"Elsevier ClinicalKey":{urls:["clinicalkey\\.com"],article_sigs:["/content/"],pdf_restricted_sigs:["No Active Session"]},Emerald:{urls:["emeraldinsight\\.com","emerald\\.com"],article_sigs:["doi/"],pdf_restricted_sigs:["Please note you might not have access to this content","To read the full version of this content please select one of the options below","To read this content please select one of the options below"]},"Engineering Village":{urls:["engineeringvillage\\.com"],article_sigs:["abstract\\.url","detailed\\.url"]},EHP:{urls:["ehp\\.niehs\\.nih\\.gov"],article_sigs:["EHP","\\d\\d\\d\\d\\d+"]},Eprints:{urls:["//eprints\\.","//etheses\\..*/\\d+/"],body_sigs:["eprints.title"],proxify:!1},ERIC:{urls:["eric\\.ed\\.gov"],article_sigs:["id=.+"],proxify:!1},Escholarship:{urls:["escholarship\\.org"],article_sigs:["item"]},EUDL:{urls:["eudl\\.eu"],article_sigs:["doi"],login_required_sigs:["You have to be registered"]},EurekaSelect:{urls:["eurekaselect\\.com","benthamdirect\\.com","benthamdirect\\.org"],article_sigs:["/article"],pdf_restricted_sigs:["cart\\.gif","<strong>Price","Purchase PDF"]},"European Geosciences Unit":{urls:["annales-geophysicae\\.net","ann-geophys\\.net","atmospheric-chemistry-and-physics\\.net","atmos-chem-phys\\.net","atmospheric-measurement-techniques\\.net","atmos-meas-tech\\.net","biogeosciences\\.net","biogeosciences-discuss\\.net","climate-of-the-past\\.net","clim-past\\.net","earth-system-dynamics\\.net","earth-syst-dynam\\.net","geoscientific-instrumentation-methods-and-data-systems\\.net","geosci-instrum-method-data-syst\\.net","geoscientific-model-development\\.net","geosci-model-dev\\.net","hydrology-and-earth-system-sciences\\.net","hydrol-earth-syst-sci\\.net","natural-hazards-and-earth-system-sciences\\.net","nat-hazards-earth-syst-sci\\.net","nonlinear-processes-in-geophysics\\.net","nonlin-processes-geophys\\.net","ocean-science\\.net","solid-earth\\.net","solid-earth-discuss\\.net","the-cryosphere\\.net","advances-in-geosciences\\.net","adv-geosci\\.net","geophysical-research-abstracts\\.net","stephan-mueller-special-publication-series\\.net","stephan-mueller-spec-publ-ser\\.net"]},"European Digital Mathematics Library":{urls:["eudml\\.org"],article_sigs:["/doc/\\d+"]},"European Mathematical Society":{urls:["ems-ph\\.org"],article_sigs:["show_abstract"],pdf_restricted_sigs:["is restricted to the subscribers of the journal","Currently you do not have access to this article","A subscription is required to access this article"]},"European Review":{urls:["europeanreview\\.org"],article_sigs:["/article/"]},Eurosurveillance:{urls:["eurosurveillance\\.org"],article_sigs:["ViewArticle.aspx","/content/"]},"F1000 Research":{urls:["f1000research\\.com","f1000\\.com/posters"],article_sigs:["articles","/summary/"]},"Federal Register":{urls:["federalregister\\.gov"],article_sigs:["documents"]},Figshare:{urls:["figshare\\.com"],article_sigs:["articles"],proxify:!1,allowed_mime_types:["application/force-download"]},Filename:{urls:["\\.pdf"]},FirstDoiLink:{urls:["scialert\\.net"]},"Free Patents Online":{urls:["freepatentsonline.com"],article_sigs:["\\.com/\\d+"],proxify:!1},Forbes:{urls:["forbes\\.com"]},"Frontiers In":{urls:["frontiersin\\.org"],article_sigs:["/articles/"],proxify:!1},GaleGroup:{urls:["go\\.galegroup\\.com","go\\.gale\\.com","find\\.galegroup\\.com","gdc\\.galegroup\\.com"],article_sigs:["id=","docId=","documentId="]},GeoJournals:{urls:["geojournals\\.pgi\\.gov\\.pl"],article_sigs:["/article/"]},Github:{urls:["github\\.com"],proxify:!1,inline_button_disabled:!0},"Google Arts and Culture":{urls:["^https?://w*\\.?google\\.\\w+/culturalinstitute"],article_sigs:["/asset/"],proxify:!1},"Google Books":{urls:["^https?://books\\.google\\.","\\.google\\..+/books\\?id","\\.google\\..+/books/edition/","play\\.google\\..+/store/books/details.*id=","market\\.android\\..+/details\\?id=book-"],proxify:!1},"Google Patents":{urls:["patents\\.google\\..+","www\\.google\\..+/patents","patentimages\\.storage\\.googleapis\\.com"],article_sigs:["/patent/",".pdf","/scholar/"],proxify:!1,pdf_in_meta_supported:!0},"Google Scholar Citations":{urls:["scholar\\.google\\..+/citations\\?view_op=view_citation"],proxify:!1},"Google Scholar Cases":{urls:["scholar\\.google\\..+/scholar_case\\?"],proxify:!1},"Google Scholar Clusters":{urls:["scholar\\.google\\..+/scholar\\?cluster"],proxify:!1},"Hathi Trust":{urls:["catalog\\.hathitrust\\.org","babel\\.hathitrust\\.org"]},HeinOnline:{urls:["heinonline\\.org"],article_sigs:["handle"]},"Highwire BMJ":{urls:["bmj.com","bmjjournals.com"],body_sigs:['a\\shref="(\\S+citmgr\\S+)"'],article_sigs:["/content/(abstract/|early/)?\\d+"],article_exclude_sigs:["blogs\\.bmj"],pdf_restricted_sigs:["item requires a subscription","The content you requested requires","Buy Access to","free with registration","To view this item, select one of the options below","Purchase Article","Read the full text or download the PDF"]},Highwire:{urls:["pm-research.com","bjgp.org","ishrs-htforum.org","canjsurg.ca","medrxiv.org","eneuro.org","smj.org.sa","cancerbiomed.org","panafrican-med-journal.com","cshlp.org","ajhp.org","uwpress.org","geoscienceworld.org","hematologylibrary.org","iovs.org","amjpathol.org","dukejournals.org","psychonomic-journals.org","ama-assn.org","ctsnetjournals.org","birjournals.org","ctsnetbooks.org","jwatch.org","chestpubs.org","rsmjournals.com","biologists.org","lyellcollection.org","highwire.org","asha.org","asm.org","aappublications.org","gsapubs.org","fass.org","acrl.org","boneandjoint.org.uk","endojournals.org","sepmonline.org","saejournals.org","snmjournals.org","aspetjournals.org","sgmjournals.org","ersjournals.com","alphamedpress.org","rcpsych.org","maneyjournals.org","genetics.org","aacnjournals.org","aacrmeetingabstracts.org","ajevonline.org","ajnr.org","ajsonline.org","amjbot.org","andrologyjournal.org","anesthesia-analgesia.org","animalfrontiers.org","annclinlabsci.org","annfammed.org","aotapress.net","apta.org","ascpjournals.org","ashspublications.org","journals.ashs.org","asnjournals.org","aspbjournals.org","biolbull.org","biolreprod.org","bssaonline.org","bvapublications.com","canmin.org","ccjm.org","cfp.ca","clinchem.org","clinmedres.org","cmaj.ca","cmajopen.ca","cro3.org","dmphp.org","economicgeology.org","ecsdl.org","eje-online.org","endocrineconnections.com","endocrinology-journals.org","fasebj.org","g3journal.org","healthaffairs.org","iiarjournals.org","jaaos.org","jaapl.org","jabfm.org","jacn.org","japmaonline.org","jdentaled.org","jimmunol.org","jleukbio.org","jnccn.org","jneurosci.org","journalofanimalscience.org","journalofvision.org","jrheum.org","jswconline.org","jultrasoundmed.org","jwildlifedis.org","kappanmagazine.org","mycologia.org","netprints.org","oxfordmedicine.com","pda.org","pdiconnect.com","physiciansfirstwatch.org","physoc.org","plantphysiol.org","psychosomaticmedicine.org","radiologictechnology.org","rcjournal.com","rcpjournal.org","reproduction-online.org","smpte.org","highwire.stanford.edu","studiesinmycology.org","telospress.com","theannals.com","biorxiv.org","jbjs\\.org","asnneuro\\.org","biochemj\\.org","symposia\\.biochemistry\\.org","essays\\.biochemistry\\.org","biochemsoctrans\\.org","bioscirep\\.org","clinsci\\.org","biochemist\\.org","ijssurgery\\.com"],body_sigs:['a\\shref="(\\S+citmgr\\S+)"'],article_sigs:["/content/(abstract/|early/|article/)?\\d+"],pdf_restricted_sigs:["You do not currently have access to this content","item requires a subscription","The content you requested requires","Buy Access to","free with registration","To view this item, select one of the options below",'id="get-access"',"For full access to this article, log in","You may be able to gain access using your login credentials",'id="login-pane"',"You can regain access to a recent Pay per Article purchase"],login_required_sigs:["free with registration"],blocking_url_sigs:["!crawlprevention/governor!"],blocking_body_sigs:["We are sorry, but we are experiencing unusual traffic at this time.","Please help us confirm that you are not a robot and we will take you to your content.","Your browser will redirect to your requested content shortly"]},Hindawi:{urls:["hindawi\\.com"],article_sigs:["/journals/.+/.+/"],proxify:!1},"Inter American Development Bank":{urls:["publications\\.iadb\\.org"],article_sigs:["/handle/"]},IEEE:{urls:["ieeexplore\\.ieee\\.org"],article_sigs:["/document/"],pdf_restricted_sigs:['"individual":\\s*false,.*"institute":\\s*false','"institute":\\s*false,.*"individual":\\s*false']},"IEEE CS Digital Library":{urls:["computer\\.org"],article_sigs:["/magazine/","/journal/","/proceedings-article/"]},"IET Digital Library":{urls:["digital-library\\.theiet\\.org"],article_sigs:["/journals/10\\.\\d{4}"],pdf_restricted_sigs:["Buy article PDF"]},"IGI Global":{urls:["igi-global\\.com"],article_sigs:["(/article|chapter)/"],pdf_restricted_sigs:["Instant access upon order completion"]},IJCRBP:{urls:["ijcrbp\\.com"],article_sigs:["abstractview.php"]},IJIET:{urls:["ijiet\\.org"],article_sigs:["show-"]},IMDB:{urls:["imdb.com/title/tt"],proxify:!1,inline_button_disabled:!0,website_pubtype_allowed:!0},Infona:{urls:["infona\\.pl"],article_sigs:["/resource/"]},"Ingenta Connect":{urls:["ingentaconnect\\.com"],pdf_restricted_sigs:['value="Buy now"']},"Ingenta Edify":{urls:["ingentaopen\\.com","microbiologyresearch\\.org"],article_sigs:["10\\.\\d\\d\\d\\d"],pdf_restricted_sigs:['alt="No Access"']},INSPIRE:{urls:["inspirehep\\.net"],article_sigs:["literature/\\d+"],proxify:!1},"Institute of Mathematics Polish Academy of Sciences":{urls:["impan\\.gov\\.pl","impan\\.pl"],pdf_restricted_sigs:["Nie masz dost","PDF files of articles are only available for institutions which have paid"]},InTech:{urls:["intechopen\\.com"]},"International Medical Press":{urls:["intmedpress\\.com"]},"International Press":{urls:["intlpress\\.com"],pdf_restricted_sigs:["Access to Document is Denied","Access to the requested document cannot be granted","Preview/Buy on Amazon.com","The full text of this article is unavailable through your IP address"]},"International Union of Crystallography":{urls:["iucr\\.org"],pdf_restricted_sigs:["noaccess.pl","Page Redirection"]},"Impact Journals":{urls:["impactjournals\\.com","aging-us\\.com","oncotarget\\.com","oncoscience\\.us","genesandcancer\\.com"],proxify:!1,allowed_mime_types:["application/force-download"]},"Inter-Research Science Center":{urls:["int-res\\.com"],article_sigs:["/abstracts/"]},"International Journal of Developmental Biology":{urls:["intjdevbiol\\.com","ijdb\\.ehu\\.es"]},"IOP Publishing":{urls:["iop\\.org"],article_sigs:["article"],blocking_url_sigs:["validate.perfdrive.com"],allowed_mime_types:["application/IOPEXPORT_RIS;charset=UTF-8"],pdf_restricted_sigs:["not registered by an institution with a subscription to this article"]},"IOS Press Ebooks":{urls:["ebooks.iospress\\.nl"],article_sigs:["/publication/","/volumearticle/"],pdf_restricted_sigs:["Add PDF to cart"]},"IOS Press":{urls:["iospress\\.com"],article_sigs:["/articles/"],pdf_restricted_sigs:["Add to cart"]},"Ivyspring International Publisher":{urls:["biolsci.org","ijbs\\.com","medsci\\.org","jcancer\\.org","thno\\.org","jgenomics\\.com"]},IWAP:{urls:["iwaponline\\.com"],article_sigs:["article-abstract","article"],pdf_restricted_sigs:["You do not currently have access to this content"]},JADA:{urls:["jada\\.ada\\.org"],article_sigs:["article"],pdf_restricted_sigs:["To read this article in full"]},Jaypeedigital:{urls:["jaypeedigital\\.com"],article_sigs:["ChapterDetail","ArticleDetail"]},JIACI:{urls:["jiaci\\.org"],article_sigs:["summary"]},JMLR:{urls:["jmlr\\.org"],article_sigs:["/papers/.+/.+"],pdf_in_meta_supported:!0},"JMIR Publications":{urls:["jmir\\.org","medicine20\\.com","researchprotocols\\.org","i-jmr\\.org"],pdf_restricted_sigs:["You can purchase a PDF copy of this paper"]},"John Libbey EUROTEXT":{urls:["www\\.jle\\.com"],pdf_restricted_sigs:["<h2>Connect to your account","Log in to an institutional account","Login de votre institution"]},"John Benjamins":{urls:["jbe-platform\\.com"],pdf_restricted_sigs:["Buy this article","Add to Basket"]},"Journal of Interactive Media in Education":{urls:["jime-open\\.ac\\.uk"],article_sigs:["/articles/"]},"Journal of Clinical and Diagnostic Research":{urls:["jcdr\\.net"],article_sigs:["article_fulltext"]},"Journal of Object Technology":{urls:["jot\\.fm"],article_sigs:["column","article"]},JSAP:{urls:["journals.jsap.jp"]},JStage:{urls:["jst\\.go\\.jp"]},JStatSoft:{urls:["jstatsoft\\.org"],allowed_mime_types:["pb"]},JSTOR:{urls:["jstor\\.org"],article_sigs:["/stable/","/discover/"],pdf_restricted_sigs:["You are not currently logged in","Get Access to this Item","download-purchase-button","subscribe-button","no-access-header","Log in through your school or library","Purchase article",'"openAccess"\\s*:\\s*"False",[\\r\\n]+.*"userAuthorization" : "None"']},KoreaScience:{urls:["koreascience\\.or\\.kr"],article_sigs:["/article/"]},Labome:{urls:["labome\\.org"],article_sigs:["/research/"]},Lancet:{urls:["thelancet\\.com"],pdf_restricted_sigs:["Purchase one-time access"],login_required_sigs:["This article is available free of charge"]},"Law Trove":{urls:["oxfordlawtrove\\.com"]},"Library Catalog Aleph":{urls:["/F.*\\?.*func=.+set_entry=/+"],article_sigs:["set_entry="],proxify:!1},"Library Catalog Arena":{urls:["/web/arena","bibliotek.ax","arena.westsussex.gov.uk","arena.yourlondonlibrary.net"],article_sigs:["results?"],proxify:!1},"Library Catalog InnoPac":{urls:["/search~S\\d+\\?/","record=.+~S\\d","innopac\\."],article_sigs:["frameset","record="],proxify:!1},"Library Catalog Encore":{urls:["/encore/record","/encore_[^/]+/record"],article_sigs:["record"],proxify:!1},"Library Catalog Primo":{urls:["/primo_library/libweb/","/primo-explore/","\\.primo\\.exlibrisgroup\\.com/","solo.bodleian.ox.ac.uk/discovery"],article_sigs:["display\\.do","Display\\.do","fulldisplay"],proxify:!1},"Library Catalog SearchWorks":{urls:["searchworks\\.stanford\\.edu"],article_sigs:["/view/"],proxify:!1},"Library Catalog Summon":{urls:["summon\\.serialssolutions\\.com.+/document\\?"],article_sigs:["/document"],proxify:!1,allowed_mime_types:["application/octet-stream"]},"Library Catalog Koha":{urls:["cgi-bin/koha","libraries.newcastle.gov"],article_sigs:["opac-detail\\.pl\\?biblionumber"],proxify:!1},"Library Catalog Capita Prism":{urls:["capitadiscovery\\.co\\.uk"],article_sigs:["items/\\d+"],proxify:!1},"Library Catalog SirsiDynix":{urls:["uhtbin/cgisirsi","ent\\.sirsidynix\\.net"],article_sigs:["uhtbin/cgisirsi","detailnonmodal"],direct_import_format:"SIRSI",proxify:!1},"Library of Congress":{urls:["loc\\.gov"],article_sigs:["/item/","/vwebv/"],proxify:!1},"Lippincott William and Wilkins":{urls:["journals\\.lww\\.com","wkhealth\\.com"],article_sigs:["/citation/","/fulltext/","/abstract/"],pdf_restricted_sigs:["If you have access to this article","The following article requires a subscription","this is your first visit to the site","Ovid Login","Log in to view full text"]},Longwoods:{urls:["longwoods\\.com"],article_sigs:["/content/"],pdf_restricted_sigs:["Instant access to the full text and PDF of this article"]},Magazines:{urls:["www\\.newscientist\\.com","www\\.scientificamerican\\.com","nationalgeographic\\.com","americanscientist\\.org","foreignaffairs\\.com","harvardpolitics\\.com","motherjones\\.com","thenation\\.com","newint\\.org","www\\.spectator\\.co\\.uk","time\\.com","technologyreview\\.com","the-american-interest\\.com","www\\.wired\\.com","theatlantic\\.com","hbr\\.org","nautil\\.us","businessoffashion.com","theconversation\\.com","psychologytoday\\.com","businessinsider\\.com","techcrunch\\.com","sciencedaily\\.com","newyorker\\.com"],proxify:!1,inline_button_disabled:!0},"Mathematical Sciences Publishers":{urls:["msp\\.org"],article_sigs:["/\\d{4}/"],pdf_restricted_sigs:["PDF Access Denied"]},"Medical Journal of Australia":{urls:["mja\\.com\\.au"],article_sigs:["/journal/"],pdf_restricted_sigs:["full contents of this page are only available to subscribers","The full article is accessible to AMA members"],login_required_sigs:["Please login with your free MJA account to view this article in full"]},MDPI:{urls:["mdpi\\.com"],proxify:!1},"Medknow Publications":{urls:["article.asp\\?issn=\\S*?aulast=\\S*"],pdf_restricted_sigs:["Please\\s+select\\s+one\\s+of\\s+the\\s+options\\s+from\\s+below\\s+if\\s+you\\s+are\\s+not\\s+a\\s+subscriber"]},"MedicalJournals.se":{urls:["medicaljournals\\.se"]},Mendeley:{urls:["mendeley\\.com"],article_sigs:["/research/"],article_exclude_sigs:["/oauth/"],proxify:!1},"Molecules and Cells":{urls:["molcells\\.org"],allowed_mime_types:["application/download"]},"NASA Technical Reports Server":{urls:["ntrs\\.nasa\\.gov"],article_sigs:["search\\.jsp\\?R="],proxify:!1},"National Academies Press":{urls:["nap\\.edu"],article_sigs:["/catalog/"]},"Nature Publishing Group":{urls:["nature.com","labanimal\\.com"],article_sigs:["(news/.+|/(srep|journal|ncomms)/.*(full|abs|pdf))","/articles/"],pdf_restricted_sigs:["To read this story in full you will need to login or make a payment","View full access options","To read this article in full you may need to log in","Already a subscriber?",'title-buybox">Subscribe to Journal',"Access through your institution"],pdf_in_meta_supported:!0},NBER:{urls:["nber\\.org"],article_sigs:["/papers/w"]},Neurips:{urls:["proceedings\\.neurips\\.cc"],article_sigs:["/paper/"]},Newspapers:{urls:["www\\.theguardian\\.com","www\\.latimes\\.com","www\\.washingtonpost\\.com","www\\.thestar\\.com","www\\.chicagotribune\\.com","online\\.wsj\\.com/articles","usatoday\\.com","www\\.denverpost\\.com","thetimes\\.co\\.uk","www\\.independent\\.co\\.uk","www\\.telegraph\\.co\\.uk","nytimes\\.com","www\\.theaustralian\\.com\\.au","nzherald\\.co\\.nz","www\\.cnn\\.com","edition\\.cnn\\.com","bbc\\.co\\.uk","bbc\\.com","huffingtonpost\\.com","www\\.ft\\.com","app\\.ft\\.com","npr\\.org","reuters\\.com","abc\\.net\\.au","bloomberg\\.com/news","cbc\\.ca","latercera\\.com","www\\.emol\\.com","elmostrador\\.cl"],proxify:!1,blocking_url_sigs:["tosv2.html"],blocking_body_sigs:["To continue, please click the box below to let us know you're not a robot","We've detected unusual activity from your computer network"],inline_button_disabled:!0},"NIHR Journals Library":{urls:["journalslibrary\\.nihr\\.ac\\.uk"],article_sigs:["/volume"]},"NIPS Proceedings":{urls:["papers\\.nips\\.cc"],article_sigs:["/paper/"]},"Now Publishers":{urls:["nowpublishers\\.com"],article_sigs:["article"],pdf_restricted_sigs:["Free Preview","Login to download a free copy"]},NUMDAM:{urls:["numdam\\.org"]},"OECD iLibrary":{urls:["oecd-ilibrary\\.org"],pdf_restricted_sigs:["OECD iLibrary did not recognize you"]},"OMICS Publishing Group":{urls:["omicsonline\\.com","omicsonline\\.org"],proxify:!1},"Open Research Exeter":{urls:["ore\\.exeter\\.ac\\.uk"],article_sigs:["handle"],pdf_restricted_sigs:["Single Sign On Service","glyphicon-lock","isAllowed=n"]},ORBi:{urls:["orbi\\.uliege\\.be"],article_sigs:["handle"]},"Oriental Journal of Chemistry":{urls:["orientjchem\\.org"],article_sigs:["absdoic\\.php\\?snoid=","\\/vol"]},"Oncology Nursing Society":{urls:["cjon\\.ons\\.org","onf\\.ons\\.org","connect\\.ons\\.org"],article_sigs:["/\\d+/\\d+/"]},OpenEdition:{urls:["openedition\\.org","revues\\.org"]},OpenJournalSystems:{urls:["index\\.php/.*/article/(view|viewArticle|download)/\\S+","/ojs/article/(view|viewArticle|download)/\\S+","ojs\\.st-andrews\\.ac\\.uk","haematologica.org","mapress\\.com","chimia\\.ch","bloodtransfusion\\.it","cajgh\\.pitt\\.edu"],pdf_restricted_sigs:["Subscription required to access item","Subscription or article purchase required to access item"]},OpenLibHums:{urls:["www.comicsgrid.com","www.19.bbk.ac.uk","olh.openlibhums.org","poetry.openlibhums.org","www.pynchon.net","www.mamsie.bbk.ac.uk/"],article_sigs:["/articles/"],proxify:!1},OpenLibrary:{urls:["openlibrary.org"],article_sigs:["/books/"],proxify:!1},OpenReview:{urls:["openreview\\.net"],article_sigs:["forum\\?id="]},"Open Science Framework":{urls:["socarxiv\\.org","psyarxiv\\.com","agrixiv\\.org","engrxiv\\.org","osf\\.io/preprints"],proxify:!1,allowed_mime_types:["application/vnd.api+json","application/octet-stream"]},"Optics InfoBase":{urls:["opticsinfobase\\.org","osapublishing\\.org","opg\\.optica\\.org"],pdf_restricted_sigs:["To view this article you will need to login or make a payment","Not Accessible"],article_sigs:["abstract.cfm","viewmedia.cfm","fulltext.cfm"]},Ovid:{urls:["ovidsp\\.tx\\.ovid\\.com","ovidsp\\.ovid\\.com","oce\\.ovid\\.com"],article_sigs:["/article/"]},"Ovid Insights":{urls:["insights\\.ovid\\.com","Insights\\.ovid\\.com","oce\\.ovid\\.com"],article_sigs:["an=","pmid="],pdf_restricted_sigs:["The following article requires a subscription",'journalURL = ""',"Access Through Institution","Access Through your Institution","log in"]},"Oxford Academic":{urls:["academic\\.oup\\.com","oxfordartonline\\.com","oxfordscholarlyeditions\\.com","oxforddnb\\.com"],pdf_restricted_sigs:["You do not currently have access to this article."],blocking_url_sigs:["!crawlprevention/governor!"],blocking_body_sigs:["We are sorry, but we are experiencing unusual traffic at this time.","Please help us confirm that you are not a robot and we will take you to your content."]},"Oxford Scholarship":{urls:["oxfordscholarship\\.com","universitypressscholarship\\.com"],article_sigs:["view"]},"Oxford Handbooks":{urls:["oxfordhandbooks\\.com"]},"Pacific Symposium on Biocomputing":{urls:["psb\\.stanford\\.edu"]},PeerJ:{urls:["peerj\\.com"],article_sigs:["/articles/.+","/preprints/.+"],proxify:!1},PenSoft:{urls:["pensoft\\.net","biodiversitydatajournal\\.com","riojournal\\.com"]},Persee:{urls:["persee\\.fr"]},"Philosophy Documentation Center":{urls:["pdcnet\\.org"],article_sigs:["/content/"]},PhilPapers:{urls:["philpapers\\.org"]},PierOnline:{urls:["pieronline\\.jp"],article_sigs:["/article/"]},"Portland Press":{urls:["portlandpress\\.com"],pdf_restricted_sigs:["do not currently have access to this content"],blocking_url_sigs:["!crawlprevention/governor!"]},"Preprint Archives: HAL":{urls:["hal\\.archives-ouvertes\\.fr","hal\\.ird\\.fr","hprints\\.org","hal\\.cirad\\.fr","tel\\.archives-ouvertes\\.fr","halshs\\.archives-ouvertes\\.fr"],proxify:!1},"Preprint Archives: Handle":{urls:["hdl\\.handle\\.net","\\.[a-z]{2,3}/handle"],pdf_restricted_sigs:['title="Restricted access"',"If you're member of the institution","you just have to login to download the file in restricted access","The desired document is not currently available on open access"]},"Proceedings of Machine Learning Research":{urls:["proceedings\\.mlr\\.press"],article_sigs:["/r\\d+/.+","/v\\d+/.+"],pdf_in_meta_supported:!0},"Project Euclid":{urls:["projecteuclid\\.org"],article_sigs:["handle=euclid\\."],pdf_restricted_sigs:["Full-text: Access denied","ACCESS THE FULL ARTICLE"]},"Project Muse":{urls:["muse\\.jhu\\.edu"],pdf_restricted_sigs:["Access your Project MUSE content using one of the login options","You must be logged in through an institution that","You are not currently authenticated"]},ProQuest:{urls:["search\\.proquest\\.com","www\\.proquest\\.com"],article_sigs:["/docview/","/openview/","/ebdetailsview/","/docviewvideoobject/"]},"ProQuest EBook Central":{urls:["ebookcentral\\.proquest\\.com","site\\.ebrary\\.com"],article_sigs:["docID="]},"Prous Science":{urls:["journals\\.prous\\.com/journals"],pdf_restricted_sigs:["Access Online Article"]},PubFactory:{urls:["thejns\\.org","elgaronline\\.com","sciendo\\.com","booksandjournals\\.brillonline\\.com","brill\\.com","journals\\.ametsoc\\.org","jme\\.bioscientifica\\.com"],pdf_restricted_sigs:["You are not authenticated to view the full text of this chapter or article","Purchase article","Beschr\xe4nkter Zugang","Restricted Access","No Access","Zugriff auf gesamten Text erhalten","Get Access to Full Text","Add to Cart","Sofortzugang erwerben","Purchase instant access"]},"Public Health Research and Practice":{urls:["phrp\\.com\\.au"],article_sigs:["-issue-"]},"Public Library of Science":{urls:["currents\\.plos\\.org","journals\\.plos\\.org","plosone\\.org","plosbiology\\.org","plosmedicine\\.org","ploscompbiol\\.org","plosgenetics\\.org","plospathogens\\.org","plosntds\\.org"],article_sigs:["/article"],pdf_body_sigs:["/article/\\S*representation=PDF"],proxify:!1},PubMed:{urls:["ncbi\\.nlm\\.nih\\.gov/(pubmed|books|labs/pubmed)","ncbi\\.nlm\\.nih\\.gov/m/(pubmed|books|labs/pubmed)","pubmed\\.ncbi\\.nlm\\.nih\\.gov/"],article_sigs:["pubmed/\\d+","books/NBK\\d+","\\.gov/\\d+"]},"PubMed Central":{urls:["pubmedcentral\\.nih\\.gov","ncbi\\.nlm\\.nih\\.gov/pmc","europepmc\\.org","pmc\\.ncbi\\.nlm\\.nih\\.gov"],article_sigs:["/articles/","/articles/"],pdf_restricted_sigs:["\\(Subscription required\\)"]},RCNi:{urls:["journals\\.rcni\\.com"],article_sigs:["/doi/"]},Redalyc:{urls:["redalyc\\.org"],article_sigs:["articulo"]},RePEc:{urls:["econpapers\\.repec\\.org","ideas\\.repec\\.org"],article_sigs:["/article/","wpaper","-\\d+\\.html"]},ResearchGate:{urls:["researchgate\\.net"],article_sigs:["publication/\\d+"],proxify:!1,blocking_body_sigs:["Your browser will redirect to your requested content shortly"]},"RSC Publishing":{urls:["\\.rsc\\.org"]},readcube:{urls:["readcube\\.com"],article_sigs:["/articles/"]},"Sage Publications":{urls:["sagepub.com"],article_sigs:["doi/(abs|full|pdf|pdfplus)","doi/10\\."],pdf_restricted_sigs:["FULL ACCESS RIGHTS ARE REQUIRED","Sorry, you do not have access to this article","Online access to the content you have requested requires","PAY PER VIEW","You do not have access to the full text of this publication","2 days access for \\$",'offer-price">24 hours access for',"You can also purchase online an Individual or Institutional Subscription","Access to the content you have requested requires one of the following","past 24 hours, you can gain access by logging in with your email address and password below","YOU DO NOT HAVE ACCESS TO THE FULL TEXT OF THIS ARTICLE","Your current credentials do not allow retrieval of the full text","Purchase this article now for immediate electronic delivery and access","This article is available to subscribers","nnen diesen Beitrag online erwerben","or if you have purchased this article through","you can purchase this content online through any offer listed below","You will be able to gain full access and download the PDF of this article immediately","Your current credentials do not allow retrieval of the full","your subscription does not provide access to this content","If you have personal access to this content","If you wish to purchase this article, please visit","Subscribe to NEJM","PLEASE LOG IN TO ACCESS THE FULL TEXT OF THIS ARTICLE","Or purchase it","Purchase this article","a subscription provided by one of AIP","Buy Single Article","Please click here for full access options","purchase access to view the full text","You do not currently have access to this article","Get Access"],blocking_body_sigs:["Your browser will redirect to your requested content shortly"]},SciELO:{urls:["scielo\\.isciii\\.es","scielo\\.br","scielosp\\.org","scielo\\.cl","ppegeo\\.igc\\.usp\\.br","scielo\\.iec\\.pa\\.gov\\.br"],article_sigs:["pid=S\\d+","/j/"]},"Science Alert":{urls:["scialert\\.net"],article_sigs:["/abstract/"]},"Science Direct":{urls:["sciencedirect\\.com.*/science","pdf\\.sciencedirectassets\\.com"],article_sigs:["/science/article/pii/","-S\\d+.+/main","/science/article/abs/pii/"],pdf_restricted_sigs:["Get Access","Purchase PDF","Login using your SciVerse credentials",'title="Purchase',"Check Access"],blocking_body_sigs:["::CLOUDFLARE_ERROR_","Request Verification In Progress"],blocking_url_sigs:["/craft/capi/cfts/init/"],pdf_in_meta_supported:!0},"Science Publications":{urls:["thescipub\\.com"],article_sigs:["/(abstract|pdf)/"]},"Science Societies":{urls:["dl\\.sciencesocieties\\.org"],article_sigs:["/abstracts/"]},"Scientific and Academic Publishing":{urls:["sapub\\.org"],article_sigs:["article\\.sapub"]},"Scientific Research Publishing":{urls:["scirp\\.org"]},"SciTech Connect":{urls:["osti\\.gov/scitech"],article_sigs:["/biblio/"]},SciTechnol:{urls:["scitechnol\\.com"]},ScopeMed:{urls:["scopemed\\.org","bibliomed.org "],article_sigs:["mno="]},Scopus:{urls:["scopus\\.com"],article_sigs:["display\\.uri"]},"Screen Studies":{urls:["screenstudies\\.com"],article_sigs:["docid="],allowed_mime_types:["application/octet-stream"]},"SEG Library":{urls:["library\\.seg\\.org"],article_sigs:["/doi/"],pdf_restricted_sigs:["citation__access__type no-access"]},"Semantic Scholar":{urls:["www\\.semanticscholar\\.org"],article_sigs:["/paper/"]},SerialsSolutions:{urls:["search\\.serialssolutions\\.com"]},SFX:{urls:["sfx\\.\\S+\\.edu","exlibrisgroup\\.com\\S+openurl\\?","sfxhosted\\.exlibrisgroup\\.com","exlibrisgroup\\.com\\S+uresolver","sfxit\\.","sfx\\.scholarsportal\\.info"]},Silverchair:{urls:["journals\\.aai\\.org","diabetesjournals\\.org","publications\\.aap\\.org","ashpublications\\.org","direct\\.mit\\.edu","jaoa\\.org","allenpress\\.com","article\\.aspx\\?[Vv]olume=\\d+&page=\\d+","article\\.aspx\\?articleid=\\d+","jamanetwork\\.com","publications\\.chestnet\\.org","asme\\.org","pubs\\.aip\\.org","rupress\\.org","aacrjournals\\.org","karger\\.com"],pdf_restricted_sigs:["Full Content is available to subscribers","unauthenticated_without_access","The full content of \\S+ is available to subscribers","to gain full access to the content and tools","Purchase this Content",'data-attribute="articleStatus" data-value="Locked"',"You do not currently have access to this content","Access through your institution"],article_sigs:["/article","/article-abstract/"],login_required_sigs:["Sign in to download this free article PDF"],blocking_url_sigs:["!crawlprevention/governor!"]},"Social Media":{urls:["twitter\\.com","instagram\\.com"],article_sigs:["/status/"],proxify:!1,inline_button_disabled:!0,website_pubtype_allowed:!0},"Social Science Research Network":{urls:["ssrn.com"],article_sigs:["papers.cfm"],login_required_sigs:["Sign up to enjoy more from SSRN"]},"Spandidos Publication":{urls:["spandidos-publications\\.com"],pdf_restricted_sigs:["Purchase PDF"]},"Spie Digital Library":{urls:["spiedigitallibrary\\.org"],pdf_restricted_sigs:["ACCESS THE FULL ARTICLE"]},"Springer Book":{urls:["springer\\.com/us/book","springer\\.com/book"]},"Springer Link":{urls:["link\\.springer\\.com","springerlink\\.com","rd\\.springer\\.com"],pdf_restricted_sigs:["Access to this content is restricted to subscribers","Access to this resource is secured","Get Access","Log in to check your access to this article","Log in to check access","Buy article PDF","Buy Chapter","to check access"],article_exclude_sigs:["journal/\\d+"]},"Springer Nature Experiments":{urls:["experiments\\.springernature\\.com","cureus\\.com"],article_sigs:["\\/articles\\/"],pdf_restricted_sigs:["Access via your institution","Access to this content is restricted to subscribers","Access to this resource is secured","Get Access","Log in to check your access to this article","Log in to check access"]},"Stanford Encyclopedia of Philosophy":{urls:["plato.stanford.edu"],article_sigs:["entries"]},SumoBrain:{urls:["www\\.sumobrain\\.com"],article_sigs:["/patents/.+/.+"],proxify:!1},"Swiss Medical Weekly":{urls:["smw\\.ch"]},"Thieme Connect":{urls:["thieme-connect\\.(com|de)"],article_sigs:["/DOI/","/(abstract|html)/"],pdf_restricted_sigs:["Please enter your username and password."]},"Theory of Computing":{urls:["toc\\.cse\\.iitk\\.ac\\.in","theoryofcomputing\\.org"],article_sigs:["/articles/"]},Tidsskrift:{urls:["tidsskriftet\\.no"],article_sigs:["/article/"]},Trove:{urls:["trove\\.nla\\.gov\\.au"],article_sigs:["/article/"]},"Touch Medical Media":{urls:["touchophthalmology\\.com","touchendocrinology\\.com","touchoncology\\.com","touchneurology\\.com","touchcardio\\.com","touchrespiratory\\.com"],article_sigs:["/articles/"]},"Turkish Journal of Gastroenterology":{urls:["turkjgastroenterol\\.org"],article_sigs:["makale"]},UpToDate:{urls:["www\\.uptodate\\.com"],article_sigs:["/contents/"],direct_import_format:"UpToDate"},USGS:{urls:["pubs\\.er\\.usgs\\.gov","pubs\\.usgs\\.gov"],article_sigs:["publication"]},"Video Portals":{urls:["youtube\\.com","vimeo\\.com"],article_sigs:["/\\d+","watch\\?"],inline_button_disabled:!0,proxify:!1},"Washington University Supreme Court Database":{urls:["scdb\\.wustl\\.edu"],article_sigs:["analysisCaseDetail"]},"Web Of Science":{urls:["apps\\.webofknowledge\\.com","ws\\.isiknowledge\\.com","\\.webofscience\\.com"],article_sigs:["full_record\\.do","CitedFullRecord\\.do","full-record"]},Wikipedia:{urls:["wikipedia.org"],article_sigs:["wiki/"],proxify:!1,inline_button_disabled:!0,website_pubtype_allowed:!0},Wiley:{urls:["onlinelibrary\\.wiley\\.com","blackwell-synergy\\.com"],pdf_restricted_sigs:["options for accessing this content","Log in to get access","You do not have access to the full version of this article","Get access to the full version of this article","Get access to this single chapter"],pdf_url_restricted_sigs:["doi/abs/10"],blocking_body_sigs:["Your browser will redirect to your requested content shortly"]},"World Scientific":{urls:["worldscientific\\.com"],article_sigs:["doi/(abs|full|pdf|pdfplus|10)"],pdf_restricted_sigs:["To read the fulltext, please use one of the options below to sign in or purchase access"]},WorldCat:{urls:["[\\/\\.]worldcat\\.org"],article_sigs:["/title/"],proxify:!1},zbMATH:{urls:["zbmath\\.org"],article_sigs:["\\?q=an","/\\d+"]},zenodo:{urls:["zenodo\\.org"],article_sigs:["record"]},"Meta Tests":{urls:[],pdf_restricted_sigs:["This item requires a subscription","Payment options","Full Content is available to subscribers","current credentials do not allow retrieval of the full text"],pdf_body_sigs:["<\\s*meta\\s*name\\s*=\\s*[\"']\\s*citation_pdf_url\\s*['\"]\\s*content\\s*=['\"]([^'\"]+)['\"]\\s*/?\\s*>","<\\s*meta\\s*content\\s*=\\s*['\"]([^'\"]+)['\"]\\s*name\\s*=\\s*['\"]\\s*citation_pdf_url\\s*['\"]\\s*/?\\s*>"]},"PubMed Redirects":{urls:[]},"readcube: Tests":{urls:[]},"Tests for pages that redirect":{urls:[]}};t.getByName=e=>a[e]},,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(2),i=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(7)),o=r(712),s=r(4),l=r(68),c=r(5),u=r(26),d=a(r(468)),p=i(r(727));const m=e=>"string"==typeof e?e:"url"in e?e.url:e.toString();t.default=class{constructor(e){(0,n.default)(this,"visitedUrls",[]),(0,n.default)(this,"fetchResultCache",{}),this.crawlerState=e}async fetchSimple(e,t){var r;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{err:i,messageReporter:n}=this.crawlerState,u=new d.CrossFetchAbortController,p=setTimeout(()=>u.abort(),null!==(r=a.timeout)&&void 0!==r?r:1e4),h=e=>(0,o.chromeSpoofReferer)(e,n),g=(0,c.getExtensionChrome)();try{const r=m(e);this.visitedUrls.push(r),n.reportUrl(r);const a=new d.CrossFetchHeaders(null==t?void 0:t.headers),i=(0,c.getGlobal)("fetchUserAgent");!a.get("user-agent")&&i&&a.set("user-agent",i),!a.get("referer")&&null!=t&&t.referrer&&a.set("referer",t.referrer);const l=a.get("referer");if(l&&g)if(a.set("CustomReferer",l),g.declarativeNetRequest){const e=(0,o.getDeclarativeNetRequestRule)(l,(0,o.getChromeUrlFilter)(r));await g.declarativeNetRequest.updateDynamicRules({removeRuleIds:[],addRules:[e]})}else g.webRequest.onBeforeSendHeaders.addListener(h,{urls:(0,o.getChromeUrlFilterList)(r)},["blocking","requestHeaders","extraHeaders"]);const f=null==t?void 0:t.credentials,b=await(0,d.default)(e,{...t,headers:a,signal:u.signal,agent:d.CrossFetchAgentOptions,credentials:f});return b.url&&b.url!==r&&this.visitedUrls.push(b.url),(0,s.ok)(b)}catch(e){return i("FETCH_FAILED",(0,l.serializeErrorMessage)(e))}finally{clearTimeout(p),null!=g&&g.webRequest&&g.webRequest.onBeforeSendHeaders.removeListener(h),null!=g&&g.declarativeNetRequest&&g.declarativeNetRequest.updateDynamicRules({removeRuleIds:[o.CHROME_REFERER_RULE_ID],addRules:[]})}}async fetch(e,t){var r;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{crawlOptions:i,encounteredErrors:n,err:l,messageReporter:c}=this.crawlerState,d=m(e),h=a.useCachedResult?this.fetchResultCache[d]:void 0;if(h)return c.log("Response found in cache","info"),(0,s.ok)(h);const g=await(0,p.default)(d);if(!g.isOk())return g;let{response:f}=g.value;if(!f){const r=await this.fetchSimple(e,t,a);if(!r.isOk())return r;f=r.value}const b=f.url,y=f.headers.get("content-disposition"),v=(0,u.isLoginUrl)(d),_=null!==(r=g.value.readBodyStreamResult)&&void 0!==r?r:await(0,o.readBodyStream)(f,{...a,...this.crawlerState,needsFullBlob:"PDF"===i.mode&&!0===i.returnPdfBlob});if(!_.isOk())return _;const{bodyText:w,bodyBlob:P,pdfFound:S}=_.value,C={response:{ok:f.ok,status:f.status,url:f.url,contentDisposition:y},bodyText:w,bodyBlob:P},A=!0===a.cacheResult,E=!0===i.heavyLogging;if(S)return A&&(this.fetchResultCache[d]=C),(0,s.ok)(C);const T=(0,o.getRedirectUrlsFromContent)(b,w,c);if(E&&(c.log("Redirects: "+JSON.stringify(T),"info"),c.log(`getRedirectUrlsFromContent: ${b} ${w}`,"info")),!T.length)return v&&(0,u.isLoggedOut)(b)?(0,u.isUnsupportedUrl)(w,d,b)?l("FETCH_FAILED","Site not supported by proxy"):(n.add("PROXY_LOGGED_OUT"),l("FETCH_FAILED","Logged out from proxy")):(A&&(this.fetchResultCache[d]=C),(0,s.ok)(C));const[k,...x]=T;if(x.length&&(c.log("Found multiple redirects: "+JSON.stringify(T),"info"),this.crawlerState.urlList.prepend(x.map(e=>e.url))),k.url===d||k.url===b)return l("FETCH_FAILED","Detected redirection cycle");if(v&&(0,u.isLoggedOut)(k.url))return(0,u.isUnsupportedUrl)(w,d,k.url)?l("FETCH_FAILED","Site not supported by proxy"):(n.add("PROXY_LOGGED_OUT"),l("FETCH_FAILED","Logged out from proxy"));if("POST"===k.method){const e=new FormData;for(const[t,r]of Object.entries(null!==(R=k.params)&&void 0!==R?R:{})){var R;e.append(t,r)}return this.fetch(k.url,{method:"POST",body:e},a)}return this.fetch(k.url,void 0,a)}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CrossFetchAgentOptions=t.CrossFetchHeaders=t.CrossFetchBlob=t.CrossFetchAbortController=void 0;a(r(714)),a(r(469)),r(4);let i,n,o,s;t.CrossFetchAbortController=i,t.CrossFetchBlob=n,t.CrossFetchHeaders=s,t.CrossFetchAgentOptions=void 0,t.CrossFetchAbortController=i=globalThis.AbortController,t.CrossFetchBlob=n=globalThis.Blob,o=globalThis.fetch,t.CrossFetchHeaders=s=globalThis.Headers;var l=o;t.default=l},,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=class{constructor(e){this.onMessage=e}log(e,t){var r;null===(r=this.onMessage)||void 0===r||r.call(this,{type:"log",message:e,level:t})}reportProgress(e){var t;null===(t=this.onMessage)||void 0===t||t.call(this,{type:"progress",...e})}reportUrl(e){var t;null===(t=this.onMessage)||void 0===t||t.call(this,{type:"url",url:e})}};t.default=a},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7));var n=class{constructor(e){(0,i.default)(this,"visitedUrls",new Map),this.urls=e}next(){const e=this.urls.shift();if(void 0!==e)return this.visitedUrls.get(e)?this.next():(this.visitedUrls.set(e,!0),e)}prepend(e){this.urls=[...e,...this.urls]}};t.default=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compactClientChanges=t.createOplogChange=void 0;var a=r(834),i=r(94),n=r(439);t.createOplogChange=(e,t,r,o,s)=>{if(!t._id)throw new Error(e+" change is missing _id");let l;if("update"===r&&t){l=(0,n.getKeys)(t);let r=l.reduce((e,t)=>Object.assign(e,{[t]:1}),{});r=i.oplog.ignoreFields(r,e),l=(0,n.getKeys)(r).filter(e=>"_id"!==e)}return{_id:(0,a.v4)(),id:t._id,timestamp:o,action:r,mcollection:e,...l?{fields:l}:{},...s?{data:s}:{}}};t.compactClientChanges=e=>{let t=null;const r=e=>{if(!t)throw new Error("Unexpected missing lastChange");Array.isArray(t.id)||(t.id=[t.id]),Array.isArray(e.id)?t.id.push(...e.id):t.id.push(e.id),t.timestamp=e.timestamp},a=[];for(const h of e){var i,n,o,s,l,c,u,d,p,m;t&&h.mcollection===t.mcollection&&h.action===t.action?Array.isArray(t.id)&&t.id.length>100?(t=h,a.push(h)):"remove"!==h.action?"update"===h.action&&1===(null===(i=h.fields)||void 0===i?void 0:i.length)&&1===(null===(n=t.fields)||void 0===n?void 0:n.length)&&h.fields[0]===t.fields[0]&&["trashed","starred"].includes(h.fields[0])||"update"===h.action&&((null===(o=h.push)||void 0===o?void 0:o.length)||0)>0&&(null===(s=h.push)||void 0===s?void 0:s.length)===(null===(l=t.push)||void 0===l?void 0:l.length)&&null!==(c=t.push)&&void 0!==c&&c.every(e=>{var t;return null===(t=h.push)||void 0===t?void 0:t.includes(e)})||"update"===h.action&&((null===(u=h.pull)||void 0===u?void 0:u.length)||0)>0&&(null===(d=h.pull)||void 0===d?void 0:d.length)===(null===(p=t.pull)||void 0===p?void 0:p.length)&&null!==(m=t.pull)&&void 0!==m&&m.every(e=>{var t;return null===(t=h.pull)||void 0===t?void 0:t.includes(e)})?r(h):(t=h,a.push(h)):r(h):(t=h,a.push(h))}return a}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=a(r(101));t.default=class{constructor(e,t){(0,i.default)(this,"doRead",e=>[this.getPub(e)]),(0,i.default)(this,"getName",()=>"WebOfScience"),this.ppLibrary=e,this.$=t}cleanString(e){return e.replace(/\s+/g," ").trim()}getPub(e){const{$:t,rootElement:r}=(0,n.default)(e,this.$),a={pubtype:"PP_ARTICLE",title:"",id_list:[]},i=r.find("span[id*=doctype]");if(i){const e=i.text();/Book Chapter/i.test(e)?a.pubtype="PP_BOOK_CHAPTER":/Proceedings Paper/i.test(e)?a.pubtype="PP_CONFERENCE_PAPER":/Book/i.test(e)&&(a.pubtype="PP_BOOK")}const o=r.find("h2.title[id*=Recordtitle]");if(o){const e=o.text();a.title=this.cleanString(e)}const s=r.find("div[id*=author] span[id^=author]");if(s){const e=s.text().replace(/(\d{4}).*-.*(\d{4})/,"").replace(/^.*:/,"").replace(/&nbsp;/g,"").trim().split(";").map(e=>e.replace(/\(.*\)/,"").trim());for(const t of e)if(t.length>0){const e=this.ppLibrary.library.Author.parseAuthor(t,{familyNameFirst:!1,delimiter:";"});a.author=[...a.author||[],e]}}const l=r.find("div[id*=editor] span[id^=author]");if(l){const e=l.text().replace(/(\d{4}).*-.*(\d{4})/,"").replace(/^.*:/,"").replace(/&nbsp;/g,"").trim().split(";").map(e=>e.replace(/\(.*\)/,"").trim());for(const t of e)if(t.length>0){const e=this.ppLibrary.library.Author.parseAuthor(t,{familyNameFirst:!1,delimiter:";"});a.editor=[...a.editor||[],e]}}const c=r.find("span[id*=bookSeries]");if(c){const e=c.text();e&&(a.booktitle=e,"PP_BOOK"===a.pubtype&&(a.pubtype="PP_BOOK_CHAPTER"))}const u=r.find("span[name=pubdate]");if(u){const e=u.text();e&&(a.published=this.ppLibrary.library.Date.parseDate(e))}const d=r.find(".journal-content-row > span .value");if(d){const e=d.text();e&&(a.publisher=e)}const p=r.find('span[data-ta="publisherAddress"]');if(p){const e=p.text();e&&(a.address=e)}let m=r.find("div.journal-info-source-title"),h="";m&&(h=m.text().trim()),h||(m=r.find('a[cdxanalyticscategory="wos-recordCard_Journal_Info"]'),m&&(h=m.text().trim())),h&&("PP_ARTICLE"===a.pubtype?a.journal=h:"PP_CONFERENCE_PAPER"===a.pubtype&&(a.booktitle=h));const g=r.find("span[id*=pageNo]");if(g){const e=g.text();e&&(a.pages=e)}const f=r.find("span[id*=volume]");if(f){const e=f.text();e&&(a.volume=e)}const b=r.find("span[id*=issue]");if(b){const e=b.text();e&&(a.issue=e)}const y=r.find("span[id*=DOI]");if(y){const e=y.text();e&&(a.doi=e)}const v=r.find("span[id*=ISBN]");if(v){const e=t(v[0]).text();e&&(a.isbn=e.replace(/-/g,""));const r=t(v[1]).text();r&&(a.isbn_alt=r.replace(/-/g,""))}const _=r.find("span[id*=pubmedId]");if(_){const e=_.text();e&&(a.pmid=e)}const w=r.find("span[id*=-ISSN]");if(w){const e=w.text();e&&(a.issn=e)}const P=r.find("span[id*=EISSN]");if(P){const e=P.text();e&&(a.issn_alt=e)}const S=r.find("div[id*=abstract]");if(S){const e=S.text();a.abstract=this.cleanString(e)}const C=r.find('span[id*="language-0"]');if(C){const e=this.cleanString(C.text()),t=this.ppLibrary.Utils.normalizeLanguage(e);t&&(a.language=t)}return a}}},function(e,t,r){"use strict";var a=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.detectDriver=t.processPub=void 0;var i=r(26),n=r(56),o=r(9),s=a(r(543)),l=a(r(544)),c=a(r(545)),u=a(r(546)),d=a(r(547)),p=a(r(548)),m=a(r(549)),h=a(r(550)),g=a(r(551)),f=a(r(552)),b=a(r(553)),y=a(r(554)),v=a(r(555)),_=a(r(556)),w=a(r(557)),P=a(r(558)),S=a(r(559)),C=a(r(560)),A=a(r(561)),E=a(r(562)),T=a(r(563)),k=a(r(564)),x=a(r(565)),R=a(r(566)),I=a(r(567)),L=a(r(568)),D=a(r(569)),N=a(r(570)),O=a(r(571)),U=a(r(572)),M=a(r(573)),F=a(r(574)),j=a(r(575)),B=a(r(576)),$=a(r(577)),z=a(r(578));t.processPub=(e,t,r)=>{const a={...r};if(a.url&&"string"!=typeof a.url){const e=[];a.url.forEach(t=>{if(t.match(/^http/))if((0,i.isProxied)(t)){const r=(0,i.deproxify)(t);r&&r.cleanUrl&&e.push(r.cleanUrl)}else e.push(t)});for(const t of e){const e=(0,o.getIdsFromUrl)(t);e.pmc&&!a.pmc&&(a.pmc=e.pmc),e.doi&&!a.doi&&(a.doi=e.doi),e.pmid&&!a.pmid&&(a.pmid=e.pmid),e.arxivid&&!a.arxivid&&(a.arxivid=e.arxivid)}a.url=e}if(a.title&&(0,n.isString)(a.title)&&a.title.length>5){const e=self.PP.library.Publication.dupSha1(a);self.PP.library.Publication.addWebimportSha1(a,e)}return a.source||(a.source={}),self.PP.Utils.merge(a.source,{webimport_url:e,webimport_plugin:t}),self.PP.library.Publication.autoClean(a),a};t.detectDriver=(e,t)=>{const r={ACM:{settings:"acm",search:{includePattern:[/dl.acm.org.*\/action\/doSearch\?.+/],getElements:s.getElements,style:"margin-top: 8px;",extractPub:s.extractPub}},arXiv:{settings:"arxiv",search:{includePattern:[/arxiv[-.]org.*(search\/?|list|find|\/recent)\//],getElements:l.getElements,extractPub:l.extractPub}},BASE:{settings:"base",search:{includePattern:[/base-search\.net\/Search\/Results\?/i],getElements:c.getElements,append:c.append,style:"margin-top: 8px; margin-left: -2px;",extractPub:c.extractPub}},ConnectedPapers:{settings:"connectedpapers",search:{includePattern:[/connectedpapers\.com\//i],getElements:u.getElements,append:u.append,extractPub:u.extractPub,observer:u.observer}},Consensus:{settings:"consensus",search:{includePattern:[/consensus\.app\/results\/\?/i],getElements:d.getElements,append:d.append,extractPub:d.extractPub,observer:d.observer}},Deepdyve:{settings:"deepdyve",search:{includePattern:[/deepdyve\.com\/search\?query=/i,/deepdyve\.com\/browse\/journals\/.+/,/deepdyve\.com\/recommendations\/.+/],getElements:p.getElements,append:p.append,style:"margin-top: 8px;",extractPub:p.extractPub}},Dimensions:{settings:"dimensions",search:{includePattern:[/app.dimensions.ai\/discover\/publication/i],getElements:m.getElements,observer:m.observer,append:m.append,extractPub:m.extractPub}},EBSCOHost:{settings:"ebsco",search:{includePattern:[/ebsco\.com\/.+\/results\?/i,/ebscohost[.-]com[^/]*\/ehost\/resultsadvanced\?/i],getElements:h.getElements,append:h.append,extractPub:h.extractPub,observer:h.observer}},EngineeringVillage:{settings:"engineeringvillage",search:{includePattern:[/engineeringvillage[.-]com[^/]*\/search\//i],getElements:g.getElements,append:g.append,extractPub:g.extractPub}},Elicit:{settings:"elicit",search:{includePattern:[],getElements:f.getElements,append:f.append,extractPub:f.extractPub,observer:f.observer}},ERIC:{settings:"eric",search:{includePattern:[/eric\.ed\.gov\/\?q=(?!.*id=)/],getElements:b.getElements,style:"margin-top: 8px;",extractPub:b.extractPub}},Google:{settings:"googlesearch",search:{includePattern:[/google[-.](com|at|be|bg|ca|ch|cl|cz|co[-.]uk|de|dk|es|fi|fr|hr|hu|ie|it|jp|co[-.]jp|la|li|lu|lv|md|mu|ng|no|pl|pt|ro|rs|ru|se|si|sk)[^/]*\/search\?/gi,/google\..*search\?.*tbm=bks/i,/www[-.]google[-.](com|at|be|bg|ca|ch|cl|cz|co[-.]uk|de|dk|es|fi|fr|hr|hu|ie|it|jp|co[-.]jp|la|li|lu|lv|md|mu|ng|no|pl|pt|ro|rs|ru|se|si|sk)[^/]*\/webhp/gi,/www[-.]google[-.](com|at|be|bg|ca|ch|cl|cz|co[-.]uk|de|dk|es|fi|fr|hr|hu|ie|it|jp|co[-.]jp|la|li|lu|lv|md|mu|ng|no|pl|pt|ro|rs|ru|se|si|sk)[^/]*\/.*output=search/gi],getElements:y.getElements,append:y.append,extractPub:y.extractPub(t),observer:y.observer}},"Google Patents":{settings:"googlepatents",search:{includePattern:[/patents\.google\..*\/\?/i,/google.*\?.*tbm=pts/i],excludePattern:[/\/patent\//],getElements:v.getElements,append:v.append,observer:v.observer,extractPub:v.extractPub}},"Google Scholar":{settings:"googlescholar",search:{includePattern:[/scholar[-.]google\..*\/scholar\?/i,/scholar[-.]google\..*\/scholar_lookup\?/i,/scholar[-.]google\..*\/citations\?(?!view_op)/,/scholar[-.]google\..*\/citations\?view_op=list_works/],observer:_.observer,getElements:_.getElements,style:"margin-top: 8px;",extractPub:_.extractPub}},IEEEXplore:{settings:"ieeexplore",search:{includePattern:[/ieeexplore.*searchresult\.jsp/i],getElements:w.getElements,observer:w.observer,append:w.append,style:"margin-right: 12px;",extractPub:w.extractPub}},INSPIRE:{settings:"inspire",search:{includePattern:[/inspirehep.net[^/]*\/literature\?/],getElements:P.getElements,append:P.append,style:"display: inline-flex; position: absolute; top: 2px;",extractPub:P.extractPub,observer:P.observer}},JSTOR:{settings:"jstor",search:{includePattern:[/www.jstor.org\/(action\/doAdvancedSearch|action\/doAdvancedResults)/i,/www.jstor.org\/(action\/doBasicSearch|action\/doBasicResults)/i],getElements:S.getElements,append:S.append,observer:S.observer,extractPub:S.extractPub}},LitMaps:{settings:"litmaps",search:{includePattern:[/app\.litmaps\.com\/seed/i,/app\.litmaps\.co\/seed/i,/app\.litmaps\.com\/preview/i,/app\.litmaps\.co\/preview/i,/app\.litmaps\.com\/map\//i,/app\.litmaps\.co\/map\//i],getElements:C.getElements,append:C.append,extractPub:C.extractPub,observer:C.observer,style:"margin-right: 16px;"}},Lens:{settings:"lens",search:{includePattern:[/lens\.org\/lens\/search\//i,/lens\.org.+\/citations\/patents\/list/i,/lens\.org.+\/citations\/citing/i,/lens\.org.+\/citations\/articles/i,/lens\.org.+\/recommended/i],getElements:A.getElements,append:A.append,extractPub:A.extractPub,observer:A.observer,style:"margin-bottom: 4px;"}},OpenKnowledgeMaps:{settings:"openknowledgemaps",search:{includePattern:[/openknowledgemaps\.org\/map\//i],getElements:T.getElements,append:T.append,extractPub:T.extractPub,observer:T.observer,style:"display: inline-flex;transform: translateY(7px);margin-right: 8px;"}},Ovid:{settings:"ovid",search:{includePattern:[/ovid.com\/search\?.*q/,/ovid[.-]com[^/]*\/ovid-new-a\/ovidweb\.cgi$/],getElements:E.getElements,append:E.append,observer:E.observer,extractPub:E.extractPub}},"Paperpile Google Docs":{settings:"paperpilegoogledocs",search:{includePattern:[/paperpile\.com\/b\/[A-Z\d]{6}\?id=/i,/paperpile\.com\/b\/[A-Z\d]{6}\/[A-Z\d]{4}\?id=/i,/paperpile\.com\/b\/[A-Z\d]{6}\/[A-Z\d]{4}\/\?id=/i,/127\.0\.0\.1:8080\/b\/[A-Z\d]{6}\?id=/i,/127\.0\.0\.1:8080\/b\/[A-Z\d]{6}\/[A-Z\d]{4}\?id=/i,/127\.0\.0\.1:8080\/b\/[A-Z\d]{6}\/[A-Z\d]{4}\/\?id=/i],getElements:k.getElements,style:"transform: translateY(5px);display:inline-block;",append:k.append,extractPub:k.extractPub}},"Paperpile Sharing":{settings:"paperpileshared",search:{includePattern:[],getElements:x.getElements,style:"display: inline-flex; margin-left: 12px;",append:x.append,extractPub:x.extractPub}},Primo:{settings:"librarycatalogs",search:{includePattern:[/primo_library\/libweb\/action\/search\.do/,/primo_library\/libweb\/action\/dlSearch\.do/,/primo-explore\/search\?.*query/,/primo\.exlibrisgroup\.com\/discovery\/search\?.*query=/,/solo.bodleian.ox.ac.uk\/discovery\/search\?.*query=/,/library.*\/discovery\/search\?.*query=.*vid=/],getElements:R.getElements,observer:R.observer,append:R.append,style:"margin-left: 42px; z-index: 99999;position: absolute; top: 8px; right: 174px;",extractPub:R.extractPub}},ProQuest:{settings:"proquest",search:{includePattern:[/www.proquest.com[^/]*\/results\//,/www.proquest.com[^/]*\/resultsol\//,/www.proquest.com[^/]*\/[^/]+\/results\//,/www.proquest.com[^/]*\/[^/]+\/resultsol\//,/search.proquest.com[^/]*\/results\//,/search.proquest.com[^/]*\/resultsol\//,/search.proquest.com[^/]*\/[^/]+\/results\//,/search.proquest.com[^/]*\/[^/]+\/resultsol\//],getElements:I.getElements,extractPub:I.extractPub}},PsycNet:{settings:"psycnet",search:{includePattern:[/psycnet.apa.org\/search\/results\?/],getElements:L.getElements,extractPub:L.extractPub,append:L.append,style:"padding: 0 2px"}},PubMed:{settings:"pubmed",single:{includePattern:[/pubmed.ncbi.nlm.nih.gov\/\d+\//],getElement:D.getElement,style:"margin-top: 8px;"},search:{includePattern:[/pubmed.ncbi.nlm.nih.gov\/\?term=/,/pubmed.ncbi.nlm.nih.gov\/\?linkname=/],getElements:D.getElements,style:"margin-top: 8px;",append:D.append,observer:D.observer,extractPub:D.extractPub}},"PubMed Central":{settings:"pubmed",single:{includePattern:[/ncbi.nlm.nih.gov\/pmc\/articles\//],getElement:N.getElement,style:"margin-top: 8px;"},search:{includePattern:[/ncbi.nlm.nih.gov\/pmc\/\?term/,/ncbi.nlm.nih.gov\/pmc$/],getElements:N.getElements,style:"display: inline-flex;",append:N.append,extractPub:N.extractPub}},ResearchRabbit:{settings:"researchrabbit",search:{includePattern:[/researchrabbitapp.com\/home/],getElements:O.getElements,append:O.append,extractPub:O.extractPub,observer:O.observer,style:"margin: 8px 0px"}},Scopus:{settings:"scopus",search:{includePattern:[/scopus[.-]com[^/]*\/results\/(results|citedbyresults)\.uri/i,/scopus[.-]com[^/]*\/authid\/detail\.uri/i],getElements:U.getElements,append:U.append,extractPub:U.extractPub,observer:U.observer}},"Semantic Scholar":{settings:"semanticscholar",search:{includePattern:[/semanticscholar\.org\/search/],getElements:M.getElements,observer:M.observer,style:"display: flex; align-items: center;",append:M.append,extractPub:M.extractPub}},SIRSI:{settings:"librarycatalogs",search:{includePattern:[/(ent\.sirsidynix\.net|uhtbin\/cgisirsi).*\/search\/results\?/],getElements:F.getElements,style:"margin: 4px 0 0 -4px;",append:F.append,extractPub:F.extractPub}},Summon:{settings:"librarycatalogs",search:{includePattern:[/summon.serialssolutions.com.*\/.*q=.+/i],observer:j.observer,getElements:j.getElements,extractPub:j.extractPub}},WorldCat:{settings:"worldcat",search:{includePattern:[/worldcat\.org\/search/i],getElements:B.getElements,style:"margin: 8px 0;",extractPub:B.extractPub,append:B.append,observer:B.observer}},"Web of Science":{settings:"wok",search:{includePattern:[/apps.webofknowledge.com[^/]*\/Search\.do/i,/apps.webofknowledge.com[^/]*\/InterService\.do/i,/apps.webofknowledge.com[^/]*\/SharedRefs\.do/i,/apps.webofknowledge.com[^/]*\/CitingArticles\.do/i,/apps.webofknowledge.com[^/]*\/OneClickSearch\.do/i,/apps.webofknowledge.com[^/]*\/summary\.do/i,/www.webofscience.com\/wos\/.+\/summary/i],getElements:$.getElements,append:$.append,style:"margin-top: 4px;",observer:$.observer,extractPub:$.extractPub}},zbMath:{settings:"zbmath",search:{includePattern:[/zbmath.org\/\?q=/i],getElements:z.getElements,append:z.append,extractPub:z.extractPub}}},a={name:"",isSingle:!1,isSearch:!1,driver:null};if(r[e])a.name=e;else{const t=(0,i.deproxify)(e),n=t&&t.cleanUrl?t.cleanUrl:e;Object.keys(r).forEach(e=>{const t=r[e].single?r[e].single:null;var i,o;t&&t.includePattern&&(t.includePattern.forEach(t=>{t.test(n)&&(a.name=e,a.isSingle=!0)}),t.excludePattern&&(null===(i=t.excludePattern)||void 0===i||i.forEach(e=>{e.test(n)&&(a.name="",a.isSingle=!1)})));r[e].search&&r[e].search.includePattern&&(r[e].search.includePattern.forEach(t=>{t.test(n)&&(a.name=e,a.isSearch=!0)}),r[e].search.excludePattern&&(null===(o=r[e].search.excludePattern)||void 0===o||o.forEach(e=>{e.test(n)&&(a.name="",a.isSearch=!1)})))})}return a.name&&(a.driver=r[a.name]),a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElements=t.extractPub=void 0;t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",url:[]},a=t.querySelectorAll(".issue-item__title a");a&&a[0]&&a[0].textContent&&(r.title=a[0].textContent.replace(/\n/g," ").replace(/\s+/g," ").trim());const i=e.replace(/(https?:\/\/[^/]+)(\/.+)/,"$1"),n=t.querySelectorAll(".issue-item__title a"),o=n&&n[0]&&n[0].getAttribute("href");if(o&&r.url){r.url.push(i+o);const[,e]=o.match(/doi\/(10\.\d+.+)/i)||[];e&&(r.doi=e)}return r};t.getElements=()=>document.querySelectorAll("div.issue-item")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElements=t.extractPub=void 0;var a=r(18),i=r(9);t.extractPub=(e,t)=>{const r={pubtype:"PP_PREPRINT"},i=t.querySelectorAll("p.title")[0];let n;if(i){const e=i.textContent;n=t.querySelectorAll("p.list-title a"),e&&(r.title=e.replace(/Title:/gi,""))}else{const e=t.querySelectorAll("div.list-title")[0].textContent;e&&(r.title=e.replace(/Title:/gi,""))}if(n&&n[0]){if(r.url||(r.url=[]),"string"!=typeof r.url){const e=n[0].getAttribute("href");e&&(r.url.push(e),n[0].textContent&&(r.arxivid=n[0].textContent))}}else{const a=t&&t.parentNode&&t.parentNode.previousElementSibling;if(a){const t=a.querySelectorAll(".list-identifier")[0];let i;i=t?t.firstChild&&t.firstChild.getAttribute("href"):a.children[1]&&a.children[1].getAttribute("href"),r.url||(r.url=[]),"string"!=typeof r.url&&i&&r.url.push(`${e.replace(/(https?:\/\/[^/]+)(\/.+)/,"$1")}${i}`)}}return r.title&&(r.title=(0,a.normalize)(r.title)),r};t.getElements=()=>(0,i.concatNodes)([document.querySelectorAll("li[class=arxiv-result]"),document.querySelectorAll(".meta"),document.querySelectorAll("#abs")])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.getElements=t.extractPub=void 0;t.extractPub=(e,t)=>{let r={pubtype:"PP_ARTICLE",author:[],url:[]};const a=t.querySelectorAll("span.Z3988")[0].getAttribute("title"),i=self.PP.format.ContextObject.doRead(a);if(i&&i.length&&([r]=i,"pubtype"in r||(r.pubtype="PP_ARTICLE"),!("publisher"in r))){const e=t.querySelectorAll(".row.row-eq-height"),a=e&&e.length?e[3]:null;if(a){const e=[].reduce.call(a.children[1].childNodes,(e,t)=>e+(3===t.nodeType?t.textContent:""),"");e&&(r.publisher=e.trim())}}const n=t.querySelectorAll(".link-gruen");if(n)for(let e=0;e<n.length;e+=1)if(n[e]){const t=n[e].getAttribute("href");if(t&&(r.url||(r.url=[]),"string"!=typeof r.url&&r.url.push(t)),!r.title){const t=n[e].textContent;t&&(r.title=t)}}return r};t.getElements=()=>document.querySelectorAll("div.record-panel");t.append=(e,t)=>{const r=e.querySelectorAll(".panel-footer");r[0]&&r[0].append(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.getElements=t.observer=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{let r={pubtype:"PP_ARTICLE",author:[],url:[]};const i=t.querySelector(".title_link");i&&i.textContent&&(r.title=i.textContent.replace(/\s+/g," "));const n=t.querySelector(".metadata");n&&n.textContent&&(r.author=self.PP.library.Author.parseAuthorList(n.textContent.replace(/\+\s?\d+\sauthor(s)?/,"").replace(/\s+/g," "),{delimiter:",",familNameFirst:!1}));const o=t.querySelector(".metadata.publication");if(o&&o.textContent){const[e,t]=o.textContent.split(", ");r.journal=t,r.published=self.PP.library.Date.parseDate(e)}const s=t.querySelector(".abstract-text");s&&s.textContent&&(r.abstract=s.textContent.replace(/\s+/g," "));const l=t.querySelectorAll(".search-result-links a");if(l)for(const e of l){const t=e.getAttribute("href");t&&!/connectedpapers\.com/.test(t)&&(r.url=[...r.url||[],t],r={...r,...(0,a.getIdsFromUrl)(t)})}return r};t.observer=async(e,t)=>{(0,a.attachObserver)({observerConfig:{listenSelector:".flexrow.items-start.justify-between a",addedElementClass:"",targetSelector:".flexrow.items-start.justify-between a",debounceTime:0,globalCallback:async()=>{t&&t();(await i()).forEach(t=>{e(t)})}},callback:()=>()=>{}})};const i=async()=>{var e;return self.location.href.match(/search\?/)?[]:(await(0,a.waitForElement)(".abtract-scrollbox .title_link",void 0,{infinite:!0}),null!==(e=document.getElementsByClassName("enforcer-popup"))&&void 0!==e&&e[0]?[]:document.querySelectorAll(".abtract-scrollbox"))};t.getElements=i;t.append=(e,t)=>{const r=e.querySelectorAll(".flexrow.justify-between.items-center")[0];if(!r)return;const a=t;r.style.position="relative",a.style.position="absolute",a.style.left=r.children[0].offsetWidth+8+"px",r.insertBefore(t,r.children[1])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.observer=t.getElements=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{var r;const i={pubtype:"PP_ARTICLE",url:[]},n=t.querySelector("h2");if(null!=n&&n.textContent){var o;i.title=n.textContent.replace(/\n/g," ").replace(/\s+/g," ").trim();const e=n.getAttribute("href");e&&(null===(o=i.url)||void 0===o||o.push(e))}const s=t.querySelector("a"),l=null==s?void 0:s.getAttribute("href");var c;l&&(null===(c=i.url)||void 0===c||c.push(`${(0,a.getBaseUrl)(e)}${l}`));const u=t.querySelector("p[data-testid=detail-extras-author]");if(u){var d,p;const e=u.textContent;e&&(i.author=self.PP.library.Author.parseAuthorList(e.replace(/by:/i,"").trim(),{familyNameFirst:!1,delimiter:";"}));const r=null===(d=t.querySelector("p[data-testid=detail-extras-journal]"))||void 0===d?void 0:d.textContent;if(r){const[,e,t]=r.match(/(.+)\s*\((.+)\)/)||[];e&&(i.journal=e),t&&(i.publisher=t)}const a=null===(p=u.parentNode)||void 0===p?void 0:p.parentNode;if(a){var m;const e=null===(m=a.textContent)||void 0===m?void 0:m.split(" ");if(e){const t=e[e.length-1];t&&(i.published={year:t})}}}const h=null===(r=t.querySelector(".zotero-doi"))||void 0===r?void 0:r.textContent;if(h){const e=(0,a.extractDoi)(h);e&&(i.doi=e)}return i};t.getElements=async()=>(await(0,a.waitForElement)("div[data-testid=card-search-result-item]",void 0,{maxChecks:200}),document.querySelectorAll("div[data-testid=card-search-result-item]"));t.observer=e=>{(0,a.attachObserver)({observerConfig:{listenSelector:"div[data-testid=card-search-results]",addedElementClass:"",targetSelector:"div[data-testid=card-search-result-item]",addedElementIsTarget:!0},callback:t=>e(t)})};t.append=(e,t)=>{const r=t,{lastChild:a}=e,i=null==a?void 0:a.lastChild;if(!i)throw new Error("injection - target element not present");i.style.display="flex",i.style.gap="16px",i.appendChild(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.getElements=t.extractPub=void 0;var a=r(26),i=r(18),n=r(4);t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",author:[]},o=t.querySelectorAll("span.docTitle a");if(o.length){const t=o[0];t.textContent&&(r.title=t.textContent);let i=t.getAttribute("href")||"";if(i=(0,n.ensureAbsoluteUrl)(i,e),i=i&&i.replace(/\?.+/,""),i&&(0,a.isProxied)(i)){const e=(0,a.deproxify)(i);e&&e.cleanUrl&&(i=e.cleanUrl)}i&&(r.url=[i])}const s=t.querySelectorAll("div.docAuthor a");if(s.length)for(let e=0;e<s.length;e+=1){const t=s[e].textContent;r.author||(r.author=[]),r.author.push(self.PP.library.Author.parseAuthor(t,{familyNameFirst:!1}))}const l=t.querySelectorAll("div.docMeta");if(l.length){const e=l[0];let t=(0,i.normalize)(e.textContent||"");t=t.replace(/Follow\s+Journal\s*/,"");const a=self.PP.library.BibliographicData.parse(t);a&&(a.journal&&(r.journal=a.journal),a.volume&&(r.volume=a.volume),a.issue&&(r.issue=a.issue),a.year&&(r.published={year:a.year}))}return Array.from(t.querySelectorAll(".docIdsList-id")).forEach(e=>{if(e&&e.textContent){const t=e.getAttribute("href");t&&/doi/.test(t)?r.doi=e.textContent:r.pmid=e.textContent}}),r};t.getElements=()=>document.querySelectorAll("li.doc");t.append=(e,t)=>{const r=e.querySelectorAll("div");r[r.length-1].append(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.observer=t.getElements=t.extractPub=void 0;var a=r(9);const i={Article:"PP_ARTICLE",Chapter:"PP_BOOK_CHAPTER",Proceeding:"PP_CONFERENCE_PAPER",Preprint:"PP_PREPRINT","Edited Book":"PP_BOOK",Monograph:"PP_BOOK"};t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",url:[]},n=t.querySelector("h3 a");if(null!=n&&n.textContent){r.title=n.textContent.replace(/\n/g," ").replace(/\s+/g," ").trim();const t=(0,a.getURL)(e,n.getAttribute("href"));t&&(r.url=[t.replace(/\?.+/,"")])}const o=t.querySelector('div[data-bt="abstract_wrapper"]');null!=o&&o.textContent&&(r.abstract=o.textContent.replace(/\n/g," ").replace(/\s+/g," ").replace("...more","").trim());const s=t.querySelector("div[id*=crop]")||t.querySelector("h3 + div");null!=s&&s.textContent&&(r.author=self.PP.library.Author.parseAuthorList(s.textContent,{delimiter:",",familNameFirst:!1}));const l=t.querySelector('div[data-bt="publication_metadata"]');if(null!=l&&l.textContent){const[,e,t,a]=l.textContent.match(/(\d{4})\s*,?(.*)?\s+-\s+(.*)/)||[];r.published={year:e},r.pubtype=i[a.trim()],t&&(["PP_BOOK_CHAPTER","PP_CONFERENCE_PAPER"].includes(r.pubtype||"")?r.booktitle=t.trim():r.journal=t.trim())}const c=t.querySelector("span.__readcube-library-button");if(c){const e=c.getAttribute("data-doi");e&&(r.doi=e);const t=c.getAttribute("data-pmid");t&&(r.pmid=t);const a=c.getAttribute("data-pmc_id");a&&(r.pmc=a);const i=c.getAttribute("data-oa-url");i&&(r.url=[...r.url||[],i])}return r};t.getElements=async()=>(await(0,a.waitForElement)("span.__readcube-library-button",void 0,{maxChecks:200}),document.querySelectorAll("div.resultList.resultList--publications article.resultList__item"));t.observer=(e,t)=>{(0,a.attachObserver)({observerConfig:{listenSelector:"div.resultList.resultList--publications",addedElementClass:"",targetSelector:"div.resultList__item",globalCallback:async()=>{t&&t();document.querySelectorAll("div.resultList.resultList--publications article.resultList__item").forEach(t=>{e(t)})}},callback:()=>()=>{}})};t.append=(e,t)=>{var r;const a=t;a.style.position="relative",a.style.top="0",a.style.marginRight="16px",null===(r=e.querySelector("div.resultList__item__metrics"))||void 0===r||r.prepend(a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.observer=t.getElements=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{var r,a;const i={pubtype:"PP_ARTICLE",url:[]},n=t.getAttribute("data-amplitude");if(n&&"string"==typeof n)try{const e=JSON.parse(n);e&&e.doi&&"string"==typeof e.doi&&e.doi.startsWith("10.")&&(i.doi=e.doi),e&&"cmedm"===e.database&&e.record_an&&"string"==typeof e.record_an&&(i.pmid=e.record_an)}catch(e){}const o=e.replace(/^(https?:\/\/[^/]+).*$/,"$1"),s=t.querySelector('div[class^="result-item-title_"] a')||t.querySelector("h3.title-link-wrapper a");if(null!=s&&s.textContent){i.title=s.textContent.replace(/\n/g," ").replace(/\s+/g," ").trim();const e=s.getAttribute("href");var l,c;if(e)if(e.startsWith("/"))null===(l=i.url)||void 0===l||l.push(`${o}${e}`);else null===(c=i.url)||void 0===c||c.push(e)}const u=null===(r=t.querySelector('dd[data-auto="result-item-body__metadata-content--contributors"] span'))||void 0===r?void 0:r.textContent;u&&(i.author=self.PP.library.Author.parseAuthorList(u.replace(/by:/i,"").trim(),{familyNameFirst:!1,delimiter:";"}).filter(e=>!/\+[0-9]/.test(e.first)));const d=null===(a=t.querySelector('dd[data-auto="result-item-body__metadata-content--published"]'))||void 0===a?void 0:a.textContent;if(d){const[e,t,r]=d.split(",");e&&(i.journal=e.trim()),r&&(i.publisher=r.trim()),t&&(i.published=self.PP.library.Date.parseDate(t))}const p=t.querySelector('dd[data-auto="abstract-content"]');var m;p&&(i.abstract=null===(m=p.textContent)||void 0===m?void 0:m.trim());return i};t.getElements=async()=>document.querySelector(".result-list")?document.querySelectorAll(".result-list .result-list-record"):(await(0,a.waitForElement)('#result-list div[role="listitem"]',void 0,{infinite:!0}),document.querySelectorAll('#result-list div[role="listitem"]'));t.observer=(e,t)=>{const r='#result-list div[role="listitem"]';(0,a.attachObserver)({observerConfig:{listenSelector:'div[role="list"]',targetSelector:r,addedElementIsTarget:!0,config:{childList:!0},globalCallback:async()=>{t&&t(),await(0,a.waitForElement)(r);document.querySelectorAll(r).forEach(t=>{e(t)})}},callback:()=>()=>{}})};t.append=(e,t)=>{if(e.querySelector(".record-formats-wrapper.externalLinks")){const r=e.querySelector(".record-formats-wrapper.externalLinks"),a=t;return r.style.display="flex",r.style.gap="8px",r.style.overflow="visible",void r.insertBefore(a,r.children[0])}const r=e.querySelectorAll('div[data-auto="call-to_action_id"]')[0],a=t;a.style.marginTop="0.62rem",a.style.marginRight="8px",r.appendChild(a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.getElements=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",author:[],url:[]},a=e.replace(/(https?:\/\/[^/]+)(\/.+)/,"$1"),i=t.querySelectorAll("h3.resulttitle a")[0]||t.querySelectorAll("h3.result-title a")[0];let n;i&&(n=i.getAttribute("href")),r.url||(r.url=[]),"string"!=typeof r.url&&r.url.push(a+n);let o=i&&i.textContent&&i.textContent.replace(/[\r\n]/g," ");return o=o&&o.replace(/\s+/g," ").replace(/^\s+/,"").replace(/\s+$/,""),o&&(r.title=o),r};t.getElements=async()=>document.querySelector("#resultslist")?document.querySelectorAll("#resultslist div.resultcontent"):(await(0,a.waitForElement)("#results-region div.result-info",void 0,{infinite:!0}),document.querySelectorAll("#results-region div.result-info"));t.append=(e,t)=>{const r=e.querySelectorAll(".row.result-buttons")[0];if(r){const e=t;return r.style.display="flex",e.style.marginRight="12px",void r.insertBefore(e,r.children[1])}e.append(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.observer=t.getElements=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",url:[]},i=t.querySelector(".text-slate-800");if(null!=i&&i.textContent){var n;r.title=i.textContent.replace(/\n/g," ").replace(/\s+/g," ").trim();const e=i.getAttribute("href");e&&(null===(n=r.url)||void 0===n||n.push(e))}const o=t.querySelector("a"),s=null==o?void 0:o.getAttribute("href");var l;s&&(null===(l=r.url)||void 0===l||l.push(`${(0,a.getBaseUrl)(e)}${s}`));const c=t.querySelector(".flex-1.text-sm.text-slate-600");if(c){const e=c.textContent;e&&(r.author=self.PP.library.Author.parseAuthorList(e.replace(/by:/i,"").trim(),{familyNameFirst:!1,delimiter:";"}))}return r};t.getElements=async()=>(await(0,a.waitForElement)(".group.text-slate-900"),document.querySelectorAll(".group.text-slate-900"));t.observer=e=>{(0,a.attachObserver)({observerConfig:{listenSelector:".cursor-pointer",addedElementClass:"",targetSelector:".group.text-slate-900",addedElementIsTarget:!0},callback:t=>e(t)})};t.append=(e,t)=>{var r;const a=t;a.style.position="relative",a.style.top="0",a.style.zIndex="1",null===(r=e.querySelector(".w-fit.items-center.mt-4.flex"))||void 0===r||r.appendChild(a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElements=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{const r=/id=/.test(e);let i=!1;const n=t.querySelectorAll("a");for(let e=0;e<n.length;e+=1){const t=n[e].getAttribute("href")||"";/id=/i.test(t)&&(i=!0)}if(!i&&!r)return{};const o={pubtype:"PP_ARTICLE",url:[]};let s,l;if(r){s=e;const r=t.querySelectorAll("div.title")[0];r&&(l=r.textContent)}else{const r=t.querySelectorAll("div.r_t a");if(r&&r[0]&&(s=r[0].getAttribute("href")),s){s=`${e.replace(/(.*\/)([^/]+)/,"$1")}${s}`}l=t.querySelectorAll("div.r_t")[0].textContent}l&&(o.title=l),s&&o.url&&"string"!=typeof o.url&&o.url.push(s);const c=t.querySelectorAll("div.r_f a");if(c&&c[0]&&(s=c[0].getAttribute("title")||"",/^http/.test(s)&&o.url&&"string"!=typeof o.url)){o.url.push(s);const e=(0,a.extractDoi)(s);e&&(o.doi=e)}return o};t.getElements=()=>(0,a.concatNodes)([document.querySelectorAll("div.r_i"),document.querySelectorAll("div.record")])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observer=t.append=t.getElements=t.extractPub=void 0;var a=r(9);t.extractPub=e=>async(t,r)=>{var a,i;let n=!1,o=!1,s=!1;const l=r.querySelectorAll("a");for(let e=0;e<l.length;e+=1){const t=l[e].getAttribute("href");t&&/^https?:\/\/scholar\.google\.[^/]+\/.+/i.test(t)?n=!0:t&&/^https?:\/\/books\.google\.[^/]+\/.+/i.test(t)?o=!0:t&&/^.*\.pdf$/i.test(t)&&(s=!0)}if(!s){const e=r.querySelectorAll("span");for(let t=0;t<e.length;t+=1){"PDF"===e[t].textContent&&(s=!0)}}/google.*\?.*tbm=bks/i.test(t)&&(o=!0);let c=!1;if(/google[-.](com|at|be|bg|ca|ch|cl|cz|co[-.]uk|de|dk|es|fi|fr|hr|hu|ie|it|jp|co[-.]jp|la|li|lu|lv|md|mu|ng|no|pl|pt|ro|rs|ru|se|si|sk)[^/]*\/search\?/gi.test(t)&&(c=!0),!(n||s||o||c))return{};let u=null===(a=r.querySelectorAll("div a"))||void 0===a||null===(i=a[0])||void 0===i?void 0:i.getAttribute("href");u&&(u=u.replace(/#:~:text=.+/,""));let d={};if(s){var p;d={pubtype:"PP_ARTICLE",title:"",source:{pdf_web_url:u||""}},u&&(d.url=[u]);const e=null===(p=r.querySelectorAll("h3")[0])||void 0===p?void 0:p.textContent;e&&(d.title=e),n||(d.source||(d.source={}),d.source.skip_parsing_and_autocomplete=!0)}else if(o){const e=r.querySelectorAll("h3")[0].textContent,t=r.querySelectorAll("cite")[0].textContent,a=[];if(u){const[,,e]=u.match(/(.+books\?id=)([^&]+)(&.+)/)||[];e?a.push(`https://books.google.com/books?id=${e}&newbks=1`):a.push(u)}d={pubtype:"PP_BOOK",title:e||"",url:a};const[,i]=(null==t?void 0:t.match(/isbn=(\d+X?)/i))||[];i&&([,d.isbn]=i,t&&a.push(t))}else if(d={pubtype:"PP_ARTICLE",url:[]},u){var m,h,g;const t=await(null==e?void 0:e.remote.bg.execute("utils.isSupportedPage",null,{url:u})),a=[/by.*Cited\sby/],i=r.querySelectorAll(".MUxGbd.wuQ4Ob")[0],n=u.replace(/(.*\/)([^/]+)/,"$1").replace(/^https?:\/\//,""),o=!n||"/"===n;if(null===(m=d.url)||void 0===m||m.push(u),i&&i.textContent&&a.some(e=>e.test(i.textContent||""))||t&&null!==(h=t.result)&&void 0!==h&&h.supported&&(null===(g=t.result)||void 0===g||!g.inlineButtonDisabled)&&!o){var f;const e=null===(f=r.querySelectorAll("h3")[0])||void 0===f?void 0:f.textContent;e&&(d.title=e.trim())}else d.pubtype="PP_WEBSITE"}return d.title&&(/\.\.\.$/.test(d.title)||/\.\.\.\s+-\s+/.test(d.title)?d.title="":(d.title=d.title.replace(/\s+-\s+.+$/,"").replace(/\.\s*$/,"").trim(),(!/\s/.test(d.title)||d.title.length<5)&&(d.title=""))),d};const i=async()=>{const e=document.querySelectorAll(".g"),t=[],r=document.querySelectorAll("div.Yr5TG");return e.forEach(e=>{if(!(e.classList.contains("g-blk")||e.classList.contains("liYKde")||e.closest(".bCOlv")||e.querySelectorAll(".g")[0])){const a=e.querySelectorAll(".Y4pkMc");if(a&&a.length)a.forEach(e=>{t.push(e)});else if(e.children.length>1){var r;null===(r=Array.from(e.children))||void 0===r||r.forEach(e=>{var r;null!=e&&e.firstChild&&"UL"===e.firstChild.tagName&&e.firstChild.firstChild?(e.firstChild.firstChild.setAttribute("style","position: relative"),t.push(e.firstChild.firstChild)):"DIV"===(null==e?void 0:e.tagName)&&null!==(r=e.querySelectorAll("a"))&&void 0!==r&&r[0]&&(e.setAttribute("style","position: relative"),t.push(e))})}else t.push(e);e.style.position="relative"}}),r.forEach(e=>{e.style.position="relative"}),(0,a.concatNodes)([t,r])};t.getElements=i;t.append=(e,t)=>{var r,a;const i=null===(r=e.querySelectorAll("a"))||void 0===r?void 0:r[1],n=/books\.google\./.test((null==i?void 0:i.getAttribute("href"))||""),o=t;let s;if(o.style.position="absolute",o.style.top="0",n)s=i.parentNode,o.style.left="calc(100% - 82px)";else{var l;const t=null===(l=e.querySelectorAll(".xTFaxe svg"))||void 0===l?void 0:l[0];let r=e.firstChild;for(;r&&"DIV"===r.tagName;)r.style.setProperty("contain","unset"),r.style.setProperty("overflow","visible"),r=r.firstChild;var c,u;if(e.style.width)null===(c=e.querySelectorAll(".yuRUbf"))||void 0===c||null===(u=c[0])||void 0===u||u.setAttribute("style",`min-width: ${e.style.width};`);if(t)s=null==t?void 0:t.parentNode,o.style.left="32px";else{const t=e.querySelectorAll("cite");null!=t&&t[0]&&([s]=t,o.style.left="calc(100% + 82px)")}}null===(a=s)||void 0===a||a.append(o)};t.observer=e=>{document.body.onscroll=()=>{(0,a.debounce)(()=>{i().forEach(t=>{const r=t.querySelectorAll(".react-webimport-wrapper");null!=r&&r[0]||e(t)})},500)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observer=t.append=t.getElements=t.getElement=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{const r=e.replace(/(https?:\/\/[^/]+)(\/.+)/,"$1"),a={pubtype:"PP_PATENT",url:[]};let i=t.querySelector(".result-title");if(i&&i.textContent){a.title=i.textContent.trim();const e=i.getAttribute("data-result");if(e){const t=`${r}/${e}`.replace(/(.+\/patent\/[^/]+\/)(.+)/,"$1");a.url=[t]}}else if(i=t.querySelector("h3"),i&&i.textContent&&(a.title=i.textContent.trim(),i.parentElement)){const e=i.parentElement.getAttribute("href");e&&(a.url=[e])}return a};t.getElement=()=>document.getElementById("title");const i=async()=>{const e=document.querySelectorAll(".g");return e.forEach(e=>{e.style.position="relative"}),e&&e.length?e:(await(0,a.waitForElement)(".result.search-result-item",void 0,{infinite:!0}),document.querySelectorAll('.result.search-result-item:not([style*="display: none;"])'))};t.getElements=i;t.append=(e,t)=>{const r=t,a=e.querySelectorAll(".dates.search-result-item");a&&a[0]?(a[0].append(r),r.style.marginTop="2px",r.style.marginBottom="2px",r.style.width="124px"):(e.append(r),r.style.position="absolute",r.style.top="4px",r.style.left="-152px")};t.observer=(e,t)=>{(0,a.attachObserver)({observerConfig:{listenSelector:"#htmlContent",targetSelector:".result.search-result-item",globalCallback:async()=>{t&&t(),await(0,a.waitForElement)(".result.search-result-item");(await i()).forEach(t=>{e(t)})}},callback:async()=>{}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observer=t.getElements=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{var r,i;const n={author:[],url:[],pubtype:"PP_ARTICLE"},o=t.getAttribute("data-cid");let s;o&&(n.gs_bibtex=o),s=(0,a.hasClass)(t,"gsc_a_t")?t.querySelector("a"):t.querySelector("h3[class=gs_rt] > a");let l=s&&s.textContent;if(l&&(n.title=l.replace(/\[(DOC|PDF|BOOK|BUCH|LIBRO|LIVRE|B|[ZC]ITATIONE?|CITAS|C|HTML)\]/g,""),n.title=n.title.trim(),/^User profiles for/i.test(n.title)))return{};const c=t.querySelector("h3[class=gs_rt]");if(l=c&&c.textContent,l&&!n.title&&(n.title=l.replace(/\[(DOC|PDF|BOOK|BUCH|LIBRO|LIVRE|B|[ZC]ITATIONE?|CITAS|C|HTML)\]/g,""),n.title=n.title.trim(),/^User profiles for/i.test(n.title)))return{};l&&/\[(BOOK|BUCH|LIBRO|LIVRE)\]/gi.test(l)&&(n.pubtype="PP_BOOK");const u=t.querySelector("div.gs_a"),d=u&&u.textContent;d&&/Patent/gi.test(d)&&(n.pubtype="PP_PATENT");let p=t.querySelectorAll("h3[class=gs_rt] a");if(p&&p[0]||(p=t.querySelectorAll("a")),null!==(r=p)&&void 0!==r&&r[0]){let r=p[0].getAttribute("href");if(r&&/^\/citations\?/.test(r)){const t=(0,a.normalizedGoogleScholarUrl)(r);t[0]&&n.url&&Array.isArray(n.url)&&n.url.push(t[0]),r=t[1]?`${(0,a.getBaseUrl)(e)}/citations?view_op=view_citation&hl=en&citation_for_view=${t[1]}`:`${(0,a.getBaseUrl)(e)}${r}`}if(r&&/^\/scholar_case\?.*case=(\d+)/.test(r)){n.pubtype="PP_CASE",r=e.replace(/(.*\/)([^/]+)/,"$1")+r.substring(1);const a=t.querySelector("div.gs_a"),i=(null==a?void 0:a.textContent)||"",[,o,s,l,c,u,d]=i.match(/^(\d+)\s([^-]+)\s(\d+)\s?-\s?([^,]+),\s?([^,]+),\s?(\d+)\s?-\s?.*$/)||[];if(o&&s&&l&&c&&u&&d){n.volume=o,n.journal=s,n.pages=l,n.court=c;const e=self.PP.library.Jurisdictions.getJurisdiction(u);e.jurisdiction&&(n.jurisdiction=e.jurisdiction),n.published={...n.published,year:d}}}n.url||(n.url=[]),"string"!=typeof n.url&&r&&n.url.push(r)}if(p=t.querySelectorAll("div.gs_or_ggsm a"),p&&p[0]){const e=p[0].getAttribute("href");n.url&&n.url[0]?n.url[0]!==e&&"string"!=typeof n.url&&e&&n.url.push(e):"string"!=typeof n.url&&e&&(n.url||(n.url=[]),n.url.push(e))}const m=t.querySelectorAll("div[class=gs_a]");if(m[0]){const e=m[0].textContent,t=(m[0].textContent||"").replace(/\u00A0/g," ").replace(/\s+/g," ").split(" - ");if("PP_CASE"===n.pubtype);else{var h,g;if(t[0]){const e=(0,a.extractAuthors)(t[0]);e&&e.length>0&&(n.author=e)}t[1]&&(/(.*), (\d{4})$/.test(t[1])?(n.journal=RegExp.$1,/\u2026/.test(n.journal)&&delete n.journal,n.published={year:RegExp.$2}):/^\d{4}$/.test(t[1])?(n.published={},[,n.published.year]=t):([,n.journal]=t,n.journal=n.journal.replace(/\u2026/,"")));const[,r]=(null===(h=n.journal)||void 0===h?void 0:h.match(/arXiv preprint arXiv:(\d+\.\d+)/))||(null===(g=n.journal)||void 0===g?void 0:g.match(/arXiv preprint (\S+\/\d+)/))||[];if(r&&(n.arxivid=r),t[2]&&(/\.\d{3}$/.test(t[2])||([,,n.publisher]=t,"Google Patents"===t[2]&&(n.pubtype="PP_PATENT"))),n.published||(n.published={}),!n.published.year){const[,t]=(null==e?void 0:e.match(/(\d{4})$/))||[];t&&(n.published.year=t)}}}if(0===(null===(i=n.author)||void 0===i?void 0:i.length)&&/citations\?user=/i.test(e)){const e=t.querySelectorAll("div[class=gs_gray]");if(e[0]){const t=e[0].textContent,r=(0,a.extractAuthors)(t||"");r&&r.length>0&&(n.author=r)}}return n};t.getElements=()=>(0,a.concatNodes)([document.querySelectorAll(".gs_r.gs_or"),document.querySelectorAll("td.gsc_a_t")]);t.observer=e=>{(0,a.attachObserver)({observerConfig:{listenSelector:"#gsc_a_b",addedElementClass:"",targetSelector:"td.gsc_a_t"},callback:t=>e(t)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.observer=t.getElements=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{var r;const a={pubtype:"PP_ARTICLE",url:[]};let i=null===(r=t.querySelectorAll("h3 a")[0])||void 0===r?void 0:r.textContent;i&&(i=i.replace(/\n/g," "),i=i.replace(/^\s+/g,""),i=i.replace(/\s+$/g,""),i=i.replace(/ +(?= )/g,""),i=i.replace(/(\[::|::\])/g,""),a.title=i);const n=t.querySelectorAll("h3 a");let o;n&&n[0]&&(o=n[0].getAttribute("href")),o&&(/(.*arnumber=)(\d+)(\D.*)/.test(o)||/(.*document\/)(\d+)(\D.*)/.test(o))&&(a.url||(a.url=[]),"string"!=typeof a.url&&a.url.push("http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&arnumber="+RegExp.$2));const s=t.querySelectorAll('a[href^="http://dx.doi.org"]');let l;return s&&s[0]&&(l=s[0].getAttribute("href")),l&&(a.url||(a.url=[]),"string"!=typeof a.url&&a.url.push(l)),a};t.getElements=async()=>(await(0,a.waitForElement)("div.List-results-items h3 a",void 0,{maxChecks:100}),document.querySelectorAll("div.List-results-items"));t.observer=(e,t)=>{(0,a.attachObserver)({observerConfig:{listenSelector:".ng-SearchResults > .col",addedElementClass:"",targetSelector:"xpl-results-item",globalCallback:async()=>{t&&t(),await(0,a.waitForElement)("xpl-results-item");document.querySelectorAll("xpl-results-item").forEach(t=>{e(t)})}},callback:()=>()=>{}})};t.append=(e,t)=>{const r=e.querySelectorAll(".List.List--horizontal")[0];r.insertBefore(t,r.firstChild)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observer=t.append=t.getElements=t.extractPub=void 0;var a=r(4),i=r(26),n=r(9);t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",url:[],author:[]},n=t.querySelectorAll("[data-test-id='literature-result-title-link']");let o;if(!(n.length>0))return{};if(r.title=n[0].textContent||"",o=n[0].getAttribute("href")||"",o&&(0,i.isProxied)(o)){const e=(0,i.deproxify)(o);e&&e.cleanUrl&&(o=e.cleanUrl)}r.url||(r.url=[]),"string"!=typeof r.url&&r.url.push((0,a.ensureAbsoluteUrl)(o,e));const s=t.querySelectorAll(".di > a");if(s&&s.length)for(let e=0;e<s.length;e+=1){const t=s[e].textContent;r.author||(r.author=[]),r.author.push(self.PP.library.Author.parseAuthor(t,{familyNameFirst:!1}))}const l=t.querySelectorAll("div.__InlineList__ a, span.__ListItemAction__ a");if(l&&l.length)for(let e=0;e<l.length;e+=1)o=l[e].getAttribute("href"),o&&/(arxiv|doi)/.test(o)&&(/^http/.test(o)||(o="https://"+o.replace(/^\/\//,"")),r.url||(r.url=[]),"string"!=typeof r.url&&r.url.push(o));return r};t.getElements=async()=>(await(0,n.waitForElement)(".ant-card-body",void 0,{maxChecks:100}),document.querySelectorAll(".ant-card-body"));t.append=(e,t)=>{var r;const a=e.querySelectorAll(".ant-row.ant-row-space-between.actions")[0],i=t;i.style.position="static",i.style.marginTop="12px",null===(r=a.previousElementSibling)||void 0===r||r.append(i)};t.observer=e=>{(0,n.attachObserver)({observerConfig:{listenSelector:".ant-col.ant-col-xs-24.ant-col-lg-17",addedElementClass:"",targetSelector:".ant-card-body",waitForTargetElement:!0},callback:t=>e(t)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observer=t.append=t.getElements=t.extractPub=void 0;var a=r(4),i=r(26),n=r(9);t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",author:[]};let n=t.querySelectorAll("div.title a");if(n.length||(n=t.querySelectorAll('*[data-qa="search-result-title-link"]')),n.length){r.title=n[0].textContent||"";const o=t.querySelectorAll("div.contrib")[0]&&t.querySelectorAll("div.contrib")[0].textContent,s=o&&o.replace(/[\t\r\s\n]+/g," ").split(/(?:,|and)/g);s&&s.forEach(e=>{r.author||(r.author=[]),r.author.push(self.PP.library.Author.parseAuthor(e,{familyNameFirst:!1}))});let l=n[0].getAttribute("href")||"";if(l=(0,a.ensureAbsoluteUrl)(l,e),l=l&&l.replace(/\?.+/,""),l&&(0,i.isProxied)(l)){const e=(0,i.deproxify)(l);e&&e.cleanUrl&&(l=e.cleanUrl)}l&&(r.url=[l])}return r};t.getElements=async()=>(await(0,n.waitForElement)(".action-buttons.action-buttons--grouped"),document.querySelectorAll(".result-list__item"));t.append=(e,t)=>{e.querySelectorAll(".action-buttons.action-buttons--grouped")[0].append(t)};t.observer=e=>{(0,n.attachObserver)({observerConfig:{listenSelector:"ol.result-list",addedElementClass:"result-list__item",targetSelector:".result-list__item",addedElementIsTarget:!0},callback:t=>e(t)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.getElements=t.observer=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",author:[],url:[]},i=t.querySelector("h3");i&&(r.title=i.textContent||"");const n=t.querySelectorAll('p[class*="InspectorSections__AuthorText"]')[0];n&&(r.author=self.PP.library.Author.parseAuthorList(n.textContent,{delimiter:",",familNameFirst:!1}));const o=Array.from(t.querySelectorAll("p.dim"));for(const e of o){(0,a.extractDoi)(e.textContent||"")&&(r.doi=e.textContent||"")}const s=o[o.length-1];null!=s&&s.textContent&&(null==s?void 0:s.textContent.length)>24&&(r.abstract=s.textContent||"");const l=null==i?void 0:i.querySelectorAll("a");if(l)for(const e of l){const t=e.getAttribute("href");t&&!/\/seed\/\d+/.test(t)&&(r.url=[...r.url||[],t])}return r};t.observer=async(e,t)=>{const r=async()=>{t&&t();(await i()).forEach(t=>{e(t)})};(0,a.attachObserver)({observerConfig:{listenSelector:".flex-column.height-100.relative.overflow-hidden",targetSelector:'div[class*="AnimatedContainer__Container"]',debounceTime:0,globalCallback:async()=>{await r(),(0,a.attachObserver)({observerConfig:{listenSelector:'div[class*="AnimatedContainer__Container"]',targetSelector:"h4",debounceTime:0,config:{characterData:!0,attributes:!1,childList:!1,subtree:!0},globalCallback:r},callback:()=>()=>{}})}},callback:()=>()=>{}})};const i=async()=>(await(0,a.waitForElement)('div[class*="ArticleInspector__Container"]',void 0,{maxChecks:150}),document.querySelectorAll('div[class*="ArticleInspector__Container"]'));t.getElements=i;t.append=(e,t)=>{const r=e.querySelector("h3");t.style.marginTop="16px",r.parentNode&&r.parentNode.append(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observer=t.append=t.getElements=t.extractPub=void 0;var a=r(4),i=r(26),n=r(9);const o={Dissertation:"PP_THESIS",Preprint:"PP_PREPRINT","Book Chapter":"PP_BOOK_CHAPTER",Dataset:"PP_DATASET",Book:"PP_BOOK"};t.extractPub=(e,t)=>{let r={pubtype:"PP_ARTICLE",author:[],url:[]};const s=t.querySelectorAll("h3");if(s.length){var l;r.title=(0,n.capitalizeFirstLetter)((null===(l=s[0].textContent)||void 0===l?void 0:l.trim())||"");const o=t.querySelectorAll(".ng-binding.institution-");o&&o.forEach(e=>{const t=e.textContent;t&&(r.author||(r.author=[]),r.author.push(self.PP.library.Author.parseAuthor(t,{familyNameFirst:!1})))});const u=t.querySelectorAll("h3 a");if(u.length){var c;let t=u[0].getAttribute("href")||"";if(t=(0,a.ensureAbsoluteUrl)(t,e),t=t&&t.replace(/\?.+/,""),t&&(0,i.isProxied)(t)){const e=(0,i.deproxify)(t);e&&e.cleanUrl&&(t=e.cleanUrl)}t&&(null===(c=r.url)||void 0===c||c.push(t))}}const u=t.querySelectorAll("ul.header-meta li");if(u.length){var d;const e=(null===(d=u[0].textContent)||void 0===d?void 0:d.trim())||"";o[e]&&(r.pubtype=o[e]),u.forEach(e=>{var t;const a=e.getAttribute("ng-if")||"",i=(null===(t=e.textContent)||void 0===t?void 0:t.trim().replace(/^[^:]+:/,"").replace(/[\s\n\t\r]+/g," ").replace(/^\s+/,"").replace(/\s*,\s*/g,", "))||"";/dockey/.test(a)?(r.patent_number=i,r.pubtype="PP_PATENT"):/listView.application/.test(a)?r.application_number=i:/filed/.test(a)?r.filed=self.PP.library.Date.parseDate(i):/published/.test(a)?r.published=self.PP.library.Date.parseDate(i):/applicants/.test(a)?r.assignee=i:/inventors/.test(a)?r.author=self.PP.library.Author.parseAuthorList(i,{familyNameFirst:!1}):/listView.family/.test(a)&&/^[A-Z][A-Z]$/.test(i)&&(r.issuing_authority=i)})}return t.querySelectorAll("a").forEach(e=>{const t=e.getAttribute("href")||"";if(/(doi\.org\/10|nih\.gov|arxiv\.org)/.test(t)){const e=(0,n.getIdsFromUrl)(t);r={...r,...e}}else if(/http.+core\.ac\.uk/.test(t)){var a;null===(a=r.url)||void 0===a||a.push(t)}}),r};t.getElements=async()=>document.querySelectorAll(".div-table-results-row");t.append=(e,t)=>{const r=e.querySelectorAll(".meta-sources.ng-scope")[0];if(r)return void(null==r||r.insertBefore(t,r.firstChild));const a=e.querySelectorAll(".meta-notices")[0];null==a||a.insertBefore(t,a.firstChild)};t.observer=e=>{(0,n.attachObserver)({observerConfig:{listenSelector:".div-table-results-body",addedElementClass:"div-table-results-row",targetSelector:".div-table-results-row",addedElementIsTarget:!0},callback:t=>e(t)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observer=t.append=t.getElements=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{var r,a;const i={pubtype:"PP_ARTICLE",author:[],url:[]},n=e.replace(/(.*\/)([^/]+)/,"$1"),o=t.querySelectorAll(".searchResultTitle > a")[0]||t.querySelectorAll(".tlink.citation_title")[0];if(o){var s;i.title=null===(s=o.textContent)||void 0===s?void 0:s.replace(/\n/g," ").replace(/^\s+/g,"").replace(/\s+$/g,"");let e=o.getAttribute("href");e&&(e=n+e.replace(/^\//,""),e=e.replace(/Link\+Set/,"Complete+Reference"),i.url||(i.url=[]),"string"!=typeof i.url&&i.url.push(e))}if(t.querySelector(".titles-other a")){var l;i.url||(i.url=[]);const e=null===(l=t.querySelector(".titles-other a"))||void 0===l?void 0:l.getAttribute("href");"string"!=typeof i.url&&e&&i.url.push(e)}let c=(null===(r=t.querySelectorAll(".journalName")[0])||void 0===r?void 0:r.textContent)||(null===(a=t.querySelectorAll(".titles-source")[0])||void 0===a?void 0:a.textContent);c&&(c=c.replace(/\n/g," "),c=c.replace(/^\s+/g,""),c=c.replace(/\d.*/,""),c=c.replace(/\.*\s+$/g,""),i.journal=c);return(t.querySelector(".authorName")?t.querySelectorAll(".authorName"):t.querySelectorAll(".article-authors")).forEach(e=>{const t=e.textContent;if(t){const e=t.split(/\s*;\s*/);for(let t=0;t<e.length;t+=1){e[t]=e[t].replace(/[+*[(\d].*$/g,""),e[t]=e[t].replace(/\s*(MD|PhD|MSc)\s*,?\s*/g,"");const r=e[t].split(/,\s*/);r.length>=2&&(i.author||(i.author=[]),i.author.push({last:r[0],first:r[1]}))}}}),i};const i=async()=>document.querySelector(".msp_display")?(await(0,a.waitForElement)(".titles-record"),document.querySelectorAll(".titles-record")):(await(0,a.waitForElement)(".resultWrapper"),document.querySelectorAll(".resultWrapper"));t.getElements=i;t.append=(e,t)=>{const r=t;if(e.querySelector(".article-title"))return r.style.marginTop="8px",void e.querySelector(".article-title").append(r);r.style.marginBottom="8px";e.querySelectorAll(".searchResultTitle")[0].append(r)};t.observer=(e,t)=>{(0,a.attachObserver)({observerConfig:{listenSelector:"#main-content",addedElementClass:"",targetSelector:".search-results-view-container",addedElementIsTarget:!0,globalCallback:async()=>{t&&t();(await i()).forEach(t=>{e(t)})}},callback:()=>()=>{}}),(0,a.attachObserver)({observerConfig:{listenSelector:"#maincontent",addedElementClass:"",targetSelector:"search-list",addedElementIsTarget:!0,globalCallback:async()=>{t&&t();(await i()).forEach(t=>{e(t)})}},callback:()=>()=>{}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observer=t.append=t.getElements=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",author:[],url:[]},i=t.querySelectorAll(".list_title")[0];var n;i&&(r.title=null===(n=i.textContent)||void 0===n?void 0:n.replace(/\n/g," ").replace(/^\s+/g,"").replace(/\s+$/g,""));const o=t.querySelectorAll(".doi_outlink_link")[0];if(o){const e=o.getAttribute("href");if(e){r.url||(r.url=[]),r.url.push(e);const t=(0,a.extractDoi)(e);t&&(r.doi=t)}}const s=t.querySelectorAll(".list_authors")[0].textContent;return s&&(r.author=(0,a.extractAuthors)(s)),r};t.getElements=async()=>(await(0,a.waitForElement)(".list_entry"),Array.from(document.querySelectorAll(".list_entry")).slice(0,10));t.append=(e,t)=>{const r=e.querySelectorAll(".paper_buttons_row")[0];r.insertBefore(t,r.firstChild)};t.observer=e=>{setTimeout(()=>{document.querySelectorAll(".list_entry").forEach(t=>{const r=t.querySelectorAll(".react-webimport-wrapper");null!=r&&r[0]||e(t)})},1e3)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.getElements=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{var r;let a=null;const i=null===(r=t.querySelectorAll(".pubjson"))||void 0===r?void 0:r[0];if(i){const e=i.textContent;if(e)try{a=JSON.parse(e)}catch(e){return null}}return a};t.getElements=async()=>{await(0,a.waitForElement)(".pp-citations-container",void 0,{infinite:!0});const e=document.querySelectorAll(".pp-citations-container");return await new Promise(t=>{const r=setInterval(()=>{document.querySelectorAll(".pp-citations-container .pubjson").length===e.length&&(clearInterval(r),t(!0))},100)}),document.querySelectorAll(".pp-citations-container")};t.append=(e,t)=>{var r;null===(r=e.parentNode)||void 0===r||r.append(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.getElements=t.extractPub=void 0;t.extractPub=(e,t)=>{let r=null;const a=t.querySelectorAll('div[ppdata*="pubtype"]');if(a){const e=a[0].getAttribute("ppdata");if(e)try{r=JSON.parse(e)}catch(e){return null}}let i=null;const n=t.querySelectorAll(".pp-pub-view-pdf");return n&&n[0]&&n[0].getAttribute("href")&&(i=n[0].getAttribute("href")),null===r?[]:(r.from_pp_share=!0,i&&(r.source={pdf_web_url:i}),r)};t.getElements=()=>document.querySelectorAll(".pp-pub-item");t.append=(e,t)=>{const r=e.querySelectorAll(".pp-pub-links")[0];if(r)r.append(t);else{const r=e.querySelectorAll(".pp-pub-reference")[0];r?r.append(t):e.append(t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.observer=t.getElements=t.extractPub=void 0;var a=r(18),i=r(9);t.extractPub=(e,t)=>{const r=t.querySelector("span.Z3988");if(r&&r.getAttribute("title")){return self.PP.format.ContextObject.doRead(r.getAttribute("title"))[0]}const i={pubtype:"PP_MISC",author:[],url:[]},n=t.querySelectorAll("h3.item-title");if(n&&n.length){n[0]&&n[0].textContent&&(i.title=n[0].textContent.replace(/^[^a-zA-Z0-9]*|[^a-zA-Z0-9]*$/g,""));const e=t.querySelectorAll("h3.item-title a");if(e&&e.length&&(i.url||(i.url=[]),"string"!=typeof i.url)){const t=e[0].getAttribute("href");t&&i.url.push(t)}}else{const r=t.querySelectorAll("h2.EXLResultTitle a");if(r&&r.length>0){r[0]&&(i.title=(0,a.normalize)(r[0].textContent||""));const t=e.replace(/(https?:\/\/[^/]+)(\/.+)/,"$1");let n=r[0].getAttribute("href");n&&(/^http/.test(n)||(n=/^\//.test(n)?t+n:`${t}/primo_library/libweb/action/${n}`),i.url||(i.url=[]),"string"!=typeof i.url&&i.url.push(n))}const n=t.querySelectorAll("span.EXLThumbnailCaption");if(n&&n.length>0){const e=n[0].textContent||"";/book/i.test(e)?i.pubtype="PP_BOOK":/audio/i.test(e)?i.pubtype="PP_AUDIO":/score/i.test(e)?i.pubtype="PP_SCORE":/thesis/i.test(e)?i.pubtype="PP_THESIS":/article/i.test(e)&&(i.pubtype="PP_ARTICLE")}}return i};t.getElements=async()=>(await(0,i.waitForElement)("prm-brief-result-container.list-item h3 span"),await(0,i.waitForElement)(".result-item-actions"),(0,i.concatNodes)([document.querySelectorAll("tr.EXLResult"),document.querySelectorAll("prm-brief-result-container.list-item")]));t.observer=e=>{(0,i.attachObserver)({observerConfig:{listenSelector:"prm-explore-main",addedElementClass:"",targetSelector:"prm-brief-result-container.list-item",waitForTargetElement:!0},callback:t=>e(t)}),document.body.onscroll=()=>{(0,i.debounce)(async()=>{const t=document.querySelectorAll("prm-brief-result-container.list-item");if(t)for(const r of t)r.querySelectorAll(".react-webimport-wrapper")&&r.querySelectorAll(".react-webimport-wrapper")[0]||(await(0,i.waitForElement)("prm-brief-result-container.list-item h3 span",r),await e(r))},3e3)}};t.append=(e,t)=>{e.appendChild(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElements=t.extractPub=void 0;t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",author:[],url:[]},a=t.querySelector("div.source-type-label");a&&((e,t)=>{/(journal\s+article|Scholarly\s+Journal(s?)|Historical\s+Periodicals)/i.test(e)||/^article$/i.test(e)?t.pubtype="PP_ARTICLE":/^review$/i.test(e)?(t.pubtype="PP_ARTICLE",t.kind="Review"):/(chapter|book\s+article)/i.test(e)?t.pubtype="PP_BOOK_CHAPTER":/book/i.test(e)?t.pubtype="PP_BOOK":/(Thesis|Dissertation|Theses)/i.test(e)?t.pubtype="PP_THESIS":/(Magazine|Trade Journal)/i.test(e)?(t.pubtype="PP_NEWS_ARTICLE",t.kind="Magazine Article"):/Newspaper(s?)/i.test(e)?(t.pubtype="PP_NEWS_ARTICLE",t.kind="Newspaper Article"):/Conference\s+Paper/i.test(e)?t.pubtype="PP_CONFERENCE_PAPER":/(Blog|Podcast|Website)/i.test(e)?t.pubtype="PP_WEBSITE":/(Reports)/.test(e)?t.pubtype="PP_REPORT":/(Working\s+Papers)/.test(e)?t.pubtype="PP_PREPRINT":/Government\s+&\s+Official\s+Publications/i.test(e)?(t.pubtype="PP_REPORT",t.kind="Government Report"):/Standards\s+&\s+Practice\s+Guidelines/i.test(e)?t.pubtype="PP_STANDARD":/(Audio|Video)/i.test(e)?t.pubtype="PP_VIDEO":/Encyclopedias|Reference/.test(e)?t.pubtype="PP_ENCYCLOPEDIA_ARTICLE":t.pubtype="PP_MISC"})(a.textContent||"",r);const i=t.querySelectorAll("h3 a");if(i&&i.length>0){let t=i[0].textContent;t&&(t=t.replace(/\n/g," "),t=t.replace(/^\s+/g,""),t=t.replace(/\s+$/g,""),r.title=t);const a=e.replace(/(https?:\/\/[^/]+)(\/.+)/,"$1");let n=i[0].getAttribute("href");n&&!/^http/.test(n)&&(n=a+n),r.url||(r.url=[]),"string"!=typeof r.url&&n&&r.url.push(n)}return r};t.getElements=()=>document.querySelectorAll("div.item")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.getElements=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",author:[],url:[]},i=t.querySelectorAll("a.article-title")[0];if(i){var n;r.title=null===(n=i.textContent)||void 0===n?void 0:n.replace(/\n/g," ").replace(/^\s+/g,"").replace(/\s+$/g,"");let e=i.getAttribute("href");e&&(e=e.replace(/(.*\/)([^/]+)/,"$1")+e,r.url||(r.url=[]),"string"!=typeof r.url&&r.url.push(e))}const o=t.querySelectorAll(".author-name-list span a");for(const e of o){if(!e.textContent)continue;const t=self.PP.library.Author.parseAuthor(e.textContent,{familyNameFirst:!1});r.author=[...r.author||[],t]}const s=t.querySelectorAll(".resultData")[0],[,l,c]=s.querySelectorAll("div");if(l){const e=l.textContent,[t,a,i,n]=(null==e?void 0:e.split(",").map(e=>e.trim()))||[];if(t&&(r.journal=t.trim()),a&&/\d+/.test(a)){const[,e,t]=(null==a?void 0:a.match(/Vol (\d+)\((\d+)\)/))||[];e&&(r.volume=e.trim()),t&&(r.issue=t.trim())}i&&/\d{4}/.test(i)&&(r.published=self.PP.library.Date.parseDate(i)),n&&/\d/.test(n)&&(r.pages=n.trim())}if(c){const e=(0,a.extractDoi)(c.textContent||"");e&&(r.doi=e)}return r};t.getElements=async()=>(await(0,a.waitForElement)("search-results-list"),document.querySelectorAll("article.result-item"));t.append=(e,t)=>{const r=t;r.style.marginTop="6px";e.querySelectorAll("div.resultData searchresults-buttonbar div.row")[0].append(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observer=t.append=t.getElements=t.getElement=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",url:[]};let i,n,o,s,l;if((0,a.hasClass)(t,"docsum-content")?i=0:(0,a.hasClass)(t,"ncbi-docsum")?i=1:(0,a.hasClass)(t,"results-article")?i=2:(0,a.hasClass)(t,"full-view")&&(i=3),3===i)n=t.querySelectorAll(".heading-title"),n[0]&&(r.title=n[0].textContent&&n[0].textContent.trim()||"",o=t.querySelectorAll(".pubmed.identifier strong"),o[0]&&o[0].textContent&&(r.pmid=o[0].textContent,r.url=["https://pubmed.ncbi.nlm.nih.gov/"+r.pmid]));else if(0===i){var c,u,d;if(n=t.querySelectorAll("a.labs-docsum-title"),n&&n.length||(n=t.querySelectorAll("a.docsum-title")),null!==(c=n)&&void 0!==c&&c[0])if(r.title=n[0].textContent&&n[0].textContent.trim()||"",o=t.querySelectorAll(".docsum-pmid"),null!==(u=o[0])&&void 0!==u&&u.textContent&&(r.pmid=o[0].textContent.trim(),r.url=[`https://pubmed.ncbi.nlm.nih.gov/${r.pmid}/`]),s=t.querySelectorAll("span.docsum-journal-citation"),null!==(d=s[0])&&void 0!==d&&d.textContent){const[,e]=s[0].textContent.match(/doi:\s+(\S+)/)||[];e&&(r.doi=e.replace(/\.$/,""))}}else if(1===i){var p,m;if(n=t.querySelectorAll("a"),null!==(p=n)&&void 0!==p&&p[0])if(r.title=(null===(m=n[0].textContent)||void 0===m?void 0:m.trim())||"",n[0]&&r.url&&"string"!=typeof r.url){var h;const e=null===(h=n[0])||void 0===h?void 0:h.getAttribute("href");e&&(r.url=[e.replace(/\?.*/,"")])}}else if(2===i){var g,f;n=t.querySelectorAll("h1.heading-title a"),n&&n[0]&&n[0].textContent&&(r.title=n[0].textContent.trim()),o=t.querySelectorAll("span.identifier.pubmed strong"),null!==(g=o[0])&&void 0!==g&&g.textContent&&(r.pmid=o[0].textContent.trim(),r.url&&"string"!=typeof r.url&&(r.url=[`https://pubmed.ncbi.nlm.nih.gov/${r.pmid}/`])),s=t.querySelectorAll("span.identifier.doi a"),s[0]&&s[0].textContent&&(r.doi=s[0].textContent.trim()),l=t.querySelectorAll("span.identifier.pmc a"),null!==(f=l[0])&&void 0!==f&&f.textContent&&(r.pmc=l[0].textContent.trim())}return r};t.getElement=()=>document.getElementsByClassName("identifiers")[0];t.getElements=()=>(0,a.concatNodes)([document.querySelectorAll('.search-results-list div[class="docsum-content"]'),document.querySelectorAll('.citations div[class="ncbi-docsum"]'),document.querySelectorAll('.search-results-list div[class="results-article"]'),document.querySelectorAll('.article-details div[class="full-view"]')]);t.append=(e,t)=>{const r=e.querySelector("h1");r?r.appendChild(t):e.appendChild(t)};t.observer=e=>{(0,a.attachObserver)({observerConfig:{listenSelector:".search-results-chunks",addedElementClass:"search-results-chunk",targetSelector:'div[class="docsum-content"]'},callback:t=>e(t)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.getElements=t.getElement=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",url:[]},i=t.querySelector(".rprtid dd");i&&i.textContent&&(r.pmc=i.textContent);const n=t.querySelector("span.doi");n&&n.textContent&&(r.doi=n.textContent.replace(/^doi:\s+/,""));let o=t.querySelector(".title a");if(o&&o.textContent){r.title=o.textContent;const t=(0,a.getURL)(e,o.getAttribute("href"));t&&(r.url||(r.url=[]),"string"!=typeof r.url&&r.url.push(t))}else t.querySelector("div.title")&&(o=t.querySelector("div.title")),o&&o.textContent&&(r.title=o.textContent);return r};t.getElement=()=>document.getElementsByClassName("content-title")[0]||document.getElementsByClassName("data-supp-article-title")[0];t.getElements=()=>{const e=document.querySelectorAll(".rslt");return e&&e[0]?e:document.querySelectorAll(".rprt")};t.append=(e,t)=>{const r=e.querySelector(".links");r&&r.appendChild(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.getElements=t.observer=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{let r={pubtype:"PP_ARTICLE",author:[],url:[]};const i=t.querySelector("a.title-link");if(i){r.title=i.textContent||"";const e=i.getAttribute("href");e&&(r.url=[e],r={...r,...(0,a.getIdsFromUrl)(e)})}const n=Array.from(t.querySelectorAll("span.author"));if(n.length){r.author=[];for(const e of n){const t=e.textContent;t&&(r.author=[...r.author,self.PP.library.Author.parseAuthor(t,{familNameFirst:!1})])}}const o=t.querySelector("div.abstract");null!=o&&o.textContent&&(r.abstract=o.textContent);const s=t.querySelector("div.journal");null!=s&&s.textContent&&(r.journal=s.textContent);const l=t.querySelector("div.year");return null!=l&&l.textContent&&(r.published={year:l.textContent}),r};t.observer=async(e,t)=>{(0,a.attachObserver)({observerConfig:{listenSelector:".app",addedElementClass:"",targetSelector:"li.paper",debounceTime:0,config:{childList:!1,characterData:!1,attributeFilter:["disabled"],subtree:!0},globalCallback:async r=>{var a,n;if(null!=r&&null!==(a=r.target)&&void 0!==a&&null!==(n=a.textContent)&&void 0!==n&&n.match(/These Authors/)){t&&t();(await i()).forEach(t=>{e(t)})}}},callback:()=>()=>{}})};const i=async()=>(await(0,a.waitForElement)("main > li.paper"),document.querySelectorAll("main > li.paper"));t.getElements=i;t.append=(e,t)=>{const r=e;r.childNodes[5].style.position="relative";const a=t;a.style.margin="0",a.style.position="absolute",a.style.top="0",a.style.right="0",a.style.transform="translateY(-24px)",r.childNodes[5].appendChild(a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observer=t.append=t.getElements=t.extractPub=void 0;var a=r(18),i=r(9);const n=e=>{const t=(0,a.normalize)(e.textContent||"");if(/\.\.\./i.test(t))return{};if(/[A-Z]/.test(t)){return self.PP.library.Author.parseAuthor(t,{familyNameFirst:!0})}return{}};t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",url:[],author:[]};let i=t.querySelectorAll("a.ddmDocTitle, a.table-title, h3 > a")[0];if(i){const e=i.getAttribute("href");var o;if(e)null===(o=r.url)||void 0===o||o.push(e)}else[i]=t.querySelectorAll("span.docTitle");i&&(r.title=(0,a.normalize)(i.textContent||""));const s=t.querySelectorAll("td");if(5===s.length||6===s.length){const e=5===s.length?1:2,t=5===s.length?2:4,i=3,o=s[e].querySelectorAll("a");if(o.length>0)for(let e=0;e<o.length;e+=1){var l;const t=n(o[e]);t&&t.last&&(null===(l=r.author)||void 0===l||l.push(t))}else{const t=s[e].querySelectorAll("span");if(t.length>0)for(let e=0;e<t.length;e+=1){var c;const a=n(t[e]);a&&a.last&&(null===(c=r.author)||void 0===c||c.push(a))}}const u=(0,a.normalize)(s[t].textContent||"");/^\d{4}$/.test(u)&&(r.published={year:u});const d=s[i].querySelectorAll(".ddmDocSource, .source-link");if(d[0])r.journal=(0,a.normalize)(d[0].textContent||"");else{const e=(0,a.normalize)(s[i].textContent||"");/[A-Z]/i.test(e)&&(r.journal=e)}}t.querySelectorAll(".bookChapterNoWrap").length>0&&(r.pubtype="PP_BOOK_CHAPTER",r.journal&&(r.booktitle=r.journal,delete r.journal));const u=t.nextElementSibling;if(u){const e=u.querySelectorAll("a");for(let t=0;t<e.length;t+=1){const a=e[t].getAttribute("href");if(a&&!/openurl/.test(a)){const e=a.match(/targetURL=(http[^&]+)&/);var d;if(e&&e[1])null===(d=r.url)||void 0===d||d.push(decodeURIComponent(e[1]))}}}return r};t.getElements=async()=>{if(!document.querySelector("div.document-results-list-layout"))return await(0,i.waitForElement)("tr.searchArea",void 0,{infinite:!0}),document.querySelectorAll("tr.searchArea, tr[class^=resultsRow]:not([class*=footer]");await(0,i.waitForElement)("div.document-results-list-layout tr h3",void 0,{infinite:!0});const e=document.querySelectorAll("div.document-results-list-layout tr"),t=[];return e.forEach(e=>{e.querySelector("h3")&&t.push(e)}),t};t.append=(e,t)=>{var r;const a=t,i=null===(r=e.nextElementSibling)||void 0===r?void 0:r.querySelector("ul.list-inline");if(i)a.style.marginBottom="12px",i.insertBefore(a,i.firstChild);else{var n;const t=null===(n=e.nextElementSibling)||void 0===n?void 0:n.querySelector("div > div");t&&t.insertBefore(a,t.firstChild)}};t.observer=async(e,t)=>{0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.observer=t.getElements=t.extractPub=void 0;var a=r(18),i=r(9);t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",author:[],url:[]},n=t.querySelectorAll(".cl-paper-title");if(n&&n.length>0){n[0].textContent&&(r.title=(0,a.normalize)(n[0].textContent));const e=n[0].parentNode.getAttribute("href");r.url||(r.url=[]),e&&(r.url=["https://www.semanticscholar.org"+e]);const i=t.querySelectorAll(".cl-paper-controls");(null==i?void 0:i[0].querySelectorAll("a")).forEach(e=>{if(e.textContent&&/(pubmed|pdf|arxiv)/i.test(e.textContent)){const t=e.getAttribute("href");t&&r.url&&!r.url.includes(t)&&r.url.push(t)}})}const o=t.querySelectorAll(".cl-paper-view-paper");if(o&&o[0]&&o[0].getAttribute("href")){const e=o[0].getAttribute("href");if(e&&/doi/.test(e)){const t=(0,i.extractDoi)(e);t&&(r.doi=t)}}return r};t.getElements=async()=>(await(0,i.waitForElement)(".cl-paper-row",void 0,{maxChecks:100}),document.querySelectorAll(".cl-paper-row.serp-papers__paper-row.paper-row-normal"));t.observer=(e,t)=>{(0,i.attachObserver)({observerConfig:{listenSelector:".app-page__content",addedElementClass:"fresh-serp-column",globalCallback:async()=>{t&&t(),await(0,i.waitForElement)(".cl-paper-row");document.querySelectorAll(".cl-paper-row").forEach(t=>{e(t)})}},callback:()=>()=>{}})};t.append=(e,t)=>{e.querySelectorAll(".cl-paper__bulleted-row.cl-paper-controls")[0].append(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.getElements=t.extractPub=void 0;var a=r(18),i=r(9);t.extractPub=(e,t)=>{var r;const i={pubtype:"PP_BOOK",author:[],url:[]};let n;const o=t.querySelectorAll("div.displayDetailLink a");o[0]&&(i.title=(0,a.normalize)(o[0].textContent||""));const s=e.replace(/(https?:\/\/[^/]+)(\/.+)/,"$1");if(n=(null===(r=o[0])||void 0===r?void 0:r.getAttribute("href"))||"",n){if(/^http/.test(n)||(n=s+n),!(n.indexOf("detailnonmodal")>=0))return{};i.url||(i.url=[]),"string"!=typeof i.url&&i.url.push(n)}return/sound\s+recording/i.test(i.title||"")?i.pubtype="PP_AUDIO":/video\s*recording/i.test(i.title||"")&&(i.pubtype="PP_VIDEO"),i.title&&(i.title=i.title.replace(/\s\[[^\]]+\]/g,"")),i};t.getElements=()=>(0,i.concatNodes)([document.querySelectorAll("div.cell_wrapper"),document.querySelectorAll("#panel3 > div.bibinfo")]);t.append=(e,t)=>{const r=e.querySelectorAll(".results_bio");r[0]&&r[0].append(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observer=t.getElements=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{const r=t.querySelector("span.Z3988");if(r&&r.getAttribute("title")){return self.PP.format.ContextObject.doRead(r.getAttribute("title"))[0]}return null};t.getElements=async()=>(await(0,a.waitForElement)("#results .list-unstyled"),document.querySelectorAll("div.documentSummary"));t.observer=e=>{(0,a.attachObserver)({observerConfig:{listenSelector:"#results .list-unstyled",addedElementClass:"ng-scope",targetSelector:"div.documentSummary"},callback:t=>e(t)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observer=t.append=t.getElements=t.extractPub=void 0;var a=r(9);t.extractPub=(e,t)=>{const r={pubtype:"PP_ARTICLE",url:[]},i=t.querySelector("h2 a");if(i){r.title=i.textContent||"";const t=(0,a.getURL)(e,i.getAttribute("href"));t&&(r.url=[t])}const n=t.querySelector("span[aria-labelledby*=author] a");null!=n&&n.textContent&&(r.author=self.PP.library.Author.parseAuthorList(n.textContent,{delimiter:",",familNameFirst:!1}));const o=t.querySelector("span[aria-labelledby*=summary]");null!=o&&o.textContent&&(r.abstract=o.textContent);const s=t.querySelector("span[id*=date]");null!=s&&s.textContent&&(r.published=self.PP.library.Date.parseDate(s.textContent));const l=t.querySelector("span[aria-labelledby*=publication]");if(null!=l&&l.textContent){const[e]=l.textContent.split(",");r.publisher=e}const c=t.querySelector("span[id*=format]");null!=c&&c.textContent&&(r.pubtype=(e=>{switch(e){case"eBook":case"Print Book":return"PP_BOOK";case"Audiobook on CD":case"eAudiobook":case"Online Music":case"Downloadable Musical Score":return"PP_AUDIO";case"DVD Video":case"Online Video":return"PP_VIDEO";case"Journal Article":case"Downloadable Article":case"ejournal, eMagazine":case"Print Journal":case"Article":return"PP_ARTICLE";case"Book Chapter":return"PP_BOOK_CHAPTER";case"Conference Paper":case"Conference Proceeding":return"PP_CONFERENCE_PAPER";case"Print Newspaper":return"PP_NEWS_ARTICLE";case"Report":return"PP_REPORT";case"Thesis, Dissertation":return"PP_THESIS";case"Website":return"PP_WEBSITE";case"Encyclopedia Article":return"PP_ENCYCLOPEDIA_ARTICLE";case"Compute Program":return"PP_COMPUTER_PROGRAM";default:return"PP_MISC"}})(c.textContent.trim()));const u=t.querySelector("a[data-testid*=open-access]");if(u){const e=u.getAttribute("href");e&&(Array.isArray(r.url)?r.url.push(e):r.url=[e])}return r};t.getElements=async()=>(await(0,a.waitForElement)("li.MuiBox-root div.MuiPaper-root"),document.querySelectorAll("li.MuiBox-root div.MuiPaper-root"));t.append=(e,t)=>{var r;(null===(r=e.querySelectorAll("h2"))||void 0===r?void 0:r[0]).append(t)};t.observer=(e,t)=>{const r="li.MuiBox-root div.MuiPaper-root";(0,a.attachObserver)({observerConfig:{listenSelector:"main > div",addedElementClass:"MuiBox-root",targetSelector:r,globalCallback:async()=>{t&&t(),await(0,a.waitForElement)(r);document.querySelectorAll(r).forEach(t=>{e(t)})}},callback:()=>()=>{}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observer=t.append=t.getElements=t.extractPub=void 0;var a=r(26),i=r(9);t.extractPub=async(e,t)=>{const r={pubtype:"PP_ARTICLE",url:[]};let n=e;const o=(0,a.deproxify)(e);o&&o.cleanUrl&&(n=o.cleanUrl);const s=t.querySelector(".smallV110 value");if(s&&s.textContent){r.title=s.textContent;const e=t.querySelector('span[name="doi"]');e&&e.textContent&&(r.doi=e.textContent.replace(/^doi:\s+/,""));const a=t.querySelector("a.smallV110");if(a){const e=(0,i.getURL)(n,a.getAttribute("href"));e&&(r.url||(r.url=[]),r.url.push(e))}}else{const e=t.querySelectorAll(".title.title-link");if(e&&e[0]&&e[0].textContent){r.title=e[0].textContent;const t=(0,i.getURL)(n,e[0].getAttribute("href"));t&&(r.url||(r.url=[]),r.url.push(t))}}let l=t.querySelectorAll("app-summary-record-links a");if(0===l.length&&(await new Promise(e=>setTimeout(e,1e3)),l=t.querySelectorAll("app-summary-record-links a")),l)for(let e=0;e<l.length;e+=1){const t=l[e].getAttribute("href"),[,a]=(null==t?void 0:t.match(/KeyAID=([^&amp;]*)&amp;/))||(null==t?void 0:t.match(/KeyAID=([^&]*)&/))||[];if(a)r.doi=decodeURIComponent(a);else{const a=l[e].getAttribute("data-pendo");a&&/^green/.test(a)&&t&&t.startsWith("http")?(r.url||(r.url=[]),r.url.push(t)):a&&/open_url_link_summary/.test(a)&&t&&t.startsWith("http")}}return r};const n=async()=>self.location.href.match(/webofscience.com/)?(await(0,i.waitForElement)(".summary-record-parent > .summary-record"),document.querySelectorAll(".summary-record-parent > .summary-record")):(0,i.concatNodes)([document.querySelectorAll(".search-results-content"),document.querySelectorAll("app-record.summary-record"),document.querySelectorAll(".app-record-holder")]);t.getElements=n;t.append=async(e,t)=>{await(0,i.waitForElement)(".title",e,{infinite:!0});const r=e.querySelectorAll("h3");var a,n;r[0]&&(null===(a=r[0].parentNode)||void 0===a||null===(n=a.parentNode)||void 0===n||n.append(t))};t.observer=e=>{document.body.onscroll=()=>{(0,i.debounce)(async()=>{(await n()).forEach(t=>{const r=t.querySelectorAll(".react-webimport-wrapper");null!=r&&r[0]||e(t)})},300)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.getElements=t.extractPub=void 0;var a=r(18),i=r(9);t.extractPub=(e,t)=>{var r,i,n;const o={pubtype:"PP_ARTICLE",url:[],author:[],id_list:[]},s=t.querySelectorAll("div.author a")||[];for(const e of s){const t=e.textContent||"";t&&(o.author=[...o.author||[],self.PP.library.Author.parseAuthor(t)])}o.title=(0,a.normalize)((null===(r=t.querySelector("h3.title strong"))||void 0===r?void 0:r.textContent)||"");const l=null===(i=t.querySelector("h3.title a"))||void 0===i?void 0:i.getAttribute("href");if(l){const e=l.replace(/.*\//,"");e&&/^[.\d]+$/.test(e)&&(o.zbl=e),!/^http/.test(l)&&/^\//.test(l)&&(o.url=["https://zbmath.org"+l])}const c=null===(n=t.querySelector('a.fulltext[type="button"]'))||void 0===n?void 0:n.getAttribute("href");return c&&(o.url=[...o.url||[],c]),o};t.getElements=async()=>(await(0,i.waitForElement)('div.list[role="listitem"]'),document.querySelectorAll('div.list[role="listitem"]'));t.append=(e,t)=>{const r=e.querySelector("div.functions");r&&r.appendChild(t)}},,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.tabUpdated=t.tabActivated=void 0;var i=r(177),n=(r(46),r(9)),o=r(20),s=r(138),l=r(42),c=r(55),u=r(436),d=a(r(29)),p=a(r(185)),m=a(r(47)),h=a(r(44));const g={};t.tabActivated=async e=>{chrome.tabs.get(e,async t=>{t&&(0,i.decideWhatToInjectAndInitInjections)(e,t)}),p.default&&h.default.forLibrary().getIsInitialized()&&Math.random()>=.95&&(d.default.debug("main","Checking for stuck jobs"),p.default.checkStuckJobs())};t.tabUpdated=async(e,t,r)=>{let a=!1,{status:f}=t;if("complete"!==f&&"loading"!==f&&(a=!0),a)return;if(d.default.debug("main","On updated: @",t,r.url,f),r.url&&!(0,n.isBlockedUrl)(r.url)){if(!await(0,i.testCSInjection)(e))return void(0,s.setPopup)("no-access",e)}let b=(y=r.url)&&[/connectedpapers\.com/,/researchrabbitapp\.com/,/worldcat\.org/].some(e=>e.test(y));var y;if(!b||"complete"===f||"fakeloading"===f){if("complete"===f){0;{const t=g[e.toString()];t?t.url!==r.url&&(b=!0):b=!0}if(delete g[e.toString()],b){if((0,n.isNewWebAppTab)(r.url))return;return await m.default.cs.execute("webimport.terminateNewExtension",e),await m.default.cs.execute("popup.utils.terminateNewExtension",e),void(0,i.decideWhatToInjectAndInitInjections)(e,r)}}if("loading"===f||"fakeloading"===f){const a=await(async(e,t)=>{const r={isLocked:!1,reason:"NA"};if(!(e.toString()in g))return r.reason="NO_RECORD",r;const a=Date.now()-g[e.toString()].timestamp;if(t&&t===g[e].url&&a<3e3)return r.reason="SAME_URL",r.isLocked=!0,r;let i=await m.default.cs.execute("popup.utils.checkPopupConnection",e);return i||a<3e3&&(await(0,c.sleep)(3e3-a),i=await m.default.cs.execute("popup.utils.checkPopupConnection",e),i)?(r.reason="ACTIVE_CS",r.isLocked=!0,r):(delete g[e],r)})(e,r.url);if(a.isLocked)return"ACTIVE_CS"===a.reason&&"fakeloading"===f?void await m.default.cs.execute("popup.reset",e,{url:t.url||r.url,tabId:e}):void d.default.debug("main",`NOT injecting content-script into ${e}: ${a.reason}`);if(((e,t)=>{"about:blank"!==t&&(g[e.toString()]={timestamp:Date.now(),url:t})})(e,r.url),r.url){if((0,n.isFileUrl)(r.url))return void(0,i.handleFileInjection)({tab:r,eventType:"page-load"});if((0,n.isNewWebAppTab)(r.url))return;if((0,n.isBlockedUrl)(r.url)){if(r.openerTabId&&(0,n.isNewTabUrl)(r.url)){await(0,u.sessionStorageGetValue)("tab-mode",r.openerTabId.toString())&&(0,u.sessionStorageRemoveKey)("tab-mode",r.openerTabId.toString())}return(0,s.setPopup)("no-access",e),void((0,n.isPDFViewerExtensionUrl)(r.url)&&await(0,s.setIcon)(e,"ready"))}if(r.url.indexOf(o.PLACK_URL)>-1){if(!/\/b\/[A-Z\d]{6}\?id=/i.test(r.url)&&!/\/b\/[A-Z\d]{6}\/[A-Z\d]{4}\?id=/i.test(r.url)&&!/\/b\/[A-Z\d]{6}\/[A-Z\d]{4}\/\?id=/i.test(r.url))return;return await m.default.cs.execute("webimport.terminateNewExtension",e),await m.default.cs.execute("popup.utils.terminateNewExtension",e),void(0,i.decideWhatToInjectAndInitInjections)(e,r)}(0,l.detectDuplicateAndSetIcon)(r);if(await m.default.cs.execute("popup.utils.checkPopupConnection",e)){if(t.url&&/pubmed.ncbi.nlm.nih.gov.+page=/i.test(t.url))return;return void await m.default.cs.execute("popup.reset",e,{url:t.url||r.url,tabId:e})}await m.default.cs.execute("webimport.terminateNewExtension",e),await m.default.cs.execute("popup.utils.terminateNewExtension",e),(0,i.decideWhatToInjectAndInitInjections)(e,r)}p.default&&h.default.forLibrary().getIsInitialized()?p.default.run("TAB_UPDATED"):d.default.info("main","Queue is not defined or dataLayer not initialized, not executing queue.run(TAB_UPDATED)")}}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.allFunctions=void 0;var i=r(55),n=a(r(610)),o=a(r(739)),s=a(r(740)),l=a(r(741)),c=a(r(743)),u=a(r(744));const d={test1:{func:i.multiply,callbacks:[{remoteAction:"popup.showTest1",remoteTarget:"cs"}],callbackMiddleware:i.jobCallbackMiddleware},test2:{func:i.multiply,callbacks:[{remoteAction:"popup.showTest2",remoteTarget:"cs"}],callbackMiddleware:i.jobCallbackMiddleware},test3:{func:i.multiply,callbacks:[{remoteAction:"popup.showTest3",remoteTarget:"cs"}],callbackMiddleware:i.jobCallbackMiddleware},test4:{func:i.multiply,callbacks:[{remoteAction:"popup.showTest4",remoteTarget:"cs"}],callbackMiddleware:i.jobCallbackMiddleware},test5:{func:i.multiply,callbacks:[{remoteAction:"popup.showTest5",remoteTarget:"cs"}],callbackMiddleware:i.jobCallbackMiddleware},autocomplete:n.default,"pdf-crawl":o.default,"s3-sync":s.default,"improve-pub":l.default,"add-attachment":c.default,"filter-map-logs":u.default};t.allFunctions=d;var p=d;t.default=p},function(e,t,r){"use strict";var a=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.crawlerOnMessageLoggerDisabled=t.getCrawlerOnMessageLogger=t.initCrawler=void 0;var i=a(r(175)),n=r(20);t.initCrawler=()=>{let e;e=r(214),e.prototype.filterNode=function(e){const t=e.toLowerCase();return this.find("*").filter((function(){return(this.name&&this.name.toLowerCase())===t}))},i.initialize({jQuery:e,ppLibrary:self.PP})};t.getCrawlerOnMessageLogger=e=>t=>{"log"===t.type&&"development"===n.PP_ENV&&("error"===t.level?e.error("crawler",t.message):e.debug("crawler",t.message))};t.crawlerOnMessageLoggerDisabled=e=>{"log"===e.type&&"development"===n.PP_ENV&&e.level}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(20),n=a(r(29)),o=r(42);const s=(e,t)=>-1!==e.indexOf(t),l=()=>{const{userAgent:e}=navigator;let{vendor:t}=navigator;const{opera:r}=window;return t=t||"",r||s(e," OPR/")?s(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":s(e,"IEMobile")||s(e,"WPDesktop")?"Internet Explorer Mobile":s(e,"SamsungBrowser/")?"Samsung Internet":s(e,"Edge")||s(e,"Edg/")?"Microsoft Edge":s(e,"FBIOS")?"Facebook Mobile":s(e,"Chrome")?"Chrome":s(e,"CriOS")?"Chrome iOS":s(e,"UCWEB")||s(e,"UCBrowser")?"UC Browser":s(e,"FxiOS")?"Firefox iOS":s(t,"Apple")?s(e,"Mobile")?"Mobile Safari":"Safari":s(e,"Android")?"Android Mobile":s(e,"Konqueror")?"Konqueror":s(e,"Firefox")?"Firefox":s(e,"MSIE")||s(e,"Trident/")?"Internet Explorer":s(e,"Gecko")?"Mozilla":""},c=()=>{const{userAgent:e}=navigator,t={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[l()];if(void 0===t)return null;const r=e.match(t);return r?parseFloat(r[r.length-2]):null},u=()=>{const e=navigator.userAgent;return/Windows/i.test(e)?/Phone/.test(e)||/WPDesktop/.test(e)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":/CrOS/.test(e)?"Chrome OS":""};var d=async e=>{const t=await(0,o.getUserFromDb)(),{name:r,...a}=e,s={event:r,properties:{token:i.MIXPANEL_TOKEN,distinct_id:null==t?void 0:t._id,$browser:l(),$browser_version:c(),$os:u(),...a,organizationId:null==t?void 0:t.organization}},d=btoa(JSON.stringify(s));n.default.info("mixpanel","Sending to mixpanel ->",e,s),fetch(`${i.MIXPANEL_PROXY}/track/?data=${d}`,{method:"POST",headers:{Accept:"text/plain","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>n.default.info("mixpanel",e)).catch(e=>n.default.error("mixpanel",e))};t.default=d},,,,,,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.ensureS3SyncJobForAllFiles=void 0;var i=a(r(119));t.ensureS3SyncJobForAllFiles=async e=>{let{modelPersonal:t,model:r,libraryId:a,queue:n}=e;const o=await t.getAll("Jobs",{type:["s3-sync"]}),s=(null==o?void 0:o.filter(e=>"s3-sync"===e.type).map(e=>e.data.attachmentData._id))||[],l=await r.getAll("Attachments")||[];for(const e of l)if(e&&e._id&&!e.s3_md5&&!s.includes(e._id)){(await r.checkExistingFiles([e._id]))[0]&&n.addJob({libraryId:a,type:"s3-sync",priority:i.default.S3_SYNC,broadcastType:"tab",data:{attachmentData:{...e}},throttleStrategy:"periodic",throttleValue:6e4,timesMaxRun:3})}}},function(e,t,r){"use strict";var a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(175)),o=a(r(212)),s=r(728),l=a(r(734)),c=r(26),u=r(95),d=r(46),p=r(9),m=r(599),h=r(438),g=r(55),f=a(r(29));const b={webimport:{import:!0,checkPDF:!0,force:!0},context:{import:!0,checkPDF:!0,force:!0},"improve-pub":{import:!1,checkPDF:!1,force:!0},popup:{import:!1,checkPDF:!1,force:!0},pdf:{import:!0,checkPDF:!1,force:!0},webapp:{import:!1,checkPDF:!1,force:!0},bg:{import:!1,checkPDF:!1,force:!0}};var y={func:async e=>{var t,r,a,i;const g=(null===(t=e.data)||void 0===t?void 0:t.collections)||[];f.default.debug("autocomplete","Start autocomplete",e);const{libraryId:y}=e,{pub:v,pubExists:_,user:w,taskId:P,source:S,reason:C}=e.data,A="force"in e.data?e.data.force:null===(r=b[S])||void 0===r?void 0:r.force;let E=void 0!==e.data.isItPdf&&e.data.isItPdf,T=!1;const k="auto"!==C&&(null===(a=b[S])||void 0===a?void 0:a.import)||!1,x=(null===(i=b[S])||void 0===i?void 0:i.import)||!1,R="pdfInMetaSupported"in e.data&&e.data.pdfInMetaSupported,I={pub:v,jobId:e._id,user:w,pubExists:_,source:S,isItPdf:E,isMatched:!1,taskId:P};if(x&&v&&v.url&&v.url[0]&&!v.doi&&!v.pmid&&!v.arxivid&&!E){let e;try{e=await fetch(v.url[0],{method:"HEAD"})}catch(e){f.default.debug("autocomplete","pub url is not available ,404?",v.url[0])}if(e&&e.headers){const t=e.headers.get("content-type");t&&(/(application\/pdf|application\/download|application\/force-download|application\/octet)/i.test(t)||/\.pdf$/.test(v.url[0])?(E=!0,f.default.debug("autocomplete","Detected a PDF URL",v.url[0])):t.toLocaleLowerCase()in p.commonMimeTypes&&!/html/i.test(t)&&(T=!0))}}if(!A&&(0,d.skipAutocomplete)(v))return k&&(0,d.importAndTriggerDownload)({status:"finished",pub:v,source:S,job:e,libraryId:y,selectedCollections:g,triggerImprovePub:!1}),I;let L,D={},N=(0,d.enoughInformationToCallGuru)(v);if(N>0){const e=await(0,h.getGuruMatch)(v,N);e&&(0,d.isPubImproved)(v,e)&&(0,d.isValidMatch)(v,e)&&(L=e.pdf_url,D=(0,o.default)(self.PP,e),D=(0,p.stripHTMLTags)(D),e.pdf_url&&(I.pdf_url=e.pdf_url))}if(!D.pubtype&&(!E||R)&&(A||!(0,u.skipCrawler)(v))){const e=(0,u.getLinksForMetaCrawler)(v);if(e.length>0){const t=await n.default(e,{mode:"META",onMessage:m.crawlerOnMessageLoggerDisabled});if(t.isOk()){const e=t.value;if((0,d.checkAutocompletedPubType)(v,e)&&(D=(0,p.stripHTMLTags)(e),N=(0,d.enoughInformationToCallGuru)(e),N>0)){const t=await(0,h.getGuruMatch)(e,N);t&&(0,d.isValidMatch)(e,t)&&(D=(0,o.default)(self.PP,t),D=(0,p.stripHTMLTags)(D),t.pdf_url&&(I.pdf_url=t.pdf_url))}}}}if(!D.pubtype&&v.gs_bibtex){const e=await(0,u.getGoogleScholarAPACitation)(v.gs_bibtex),t=new l.default(self.PP).doRead(e);t&&t[0]&&(D=t[0],delete v.gs_bibtex)}if(!D.pubtype){if(E)return I.isItPdf=!0,I.pub={...v,needsParsing:1,title:""},I.isMatched=!0,k&&(0,d.importAndTriggerDownload)({status:"finished",pub:I.pub,source:S,job:e,libraryId:y,triggerImprovePub:!0,selectedCollections:g}),I;const t=new s.GoogleScholar({onMessage:()=>{}}),r=await t.match(v);if(r.isOk()){const e=r.value;if((0,d.checkAutocompletedPubType)(v,e)&&(D=(0,p.stripHTMLTags)(e),N=(0,d.enoughInformationToCallGuru)(D),N>0)){const e=await(0,h.getGuruMatch)(D,N);e&&(0,d.isValidMatch)(D,e)&&(D=(0,o.default)(self.PP,e),D=(0,p.stripHTMLTags)(D),e.pdf_url&&(I.pdf_url=e.pdf_url))}}}if(!D.pubtype)return k&&(0,d.importAndTriggerDownload)({status:"finished",pub:v,source:S,job:e,libraryId:y,selectedCollections:g,triggerImprovePub:!1,triggerNonPdfAttachmentInsert:!E&&T}),I;const O=(0,d.mergeAutocompletedPub)(v,D),U=O.url||[],M=[];for(const e of U)if((0,c.isProxied)(e)){const t=(0,c.deproxify)(e);t&&t.cleanUrl&&M.push(t.cleanUrl)}else M.push(e);O.url=Array.from(new Set(M));const F=O.citekey;return self.PP.library.Publication.autoClean(O),(0,p.checkIDList)(O),O.citekey=F,f.default.debug("autocomplete","Autocomplete -> ",O,e,v._id,k),L&&(O.pdf_url=L),I.isMatched=!0,I.pub=O,k&&(0,d.importAndTriggerDownload)({status:"finished",pub:I.pub,source:S,job:e,libraryId:y,selectedCollections:g,triggerImprovePub:!1}),I},callbacks:[{remoteAction:"render.showAutocompletedPub",remoteTarget:"cs"},{remoteAction:"render.showAutocompletedPub",remoteTarget:"popup"},{remoteAction:"webimport.showAutocompletedPub",remoteTarget:"cs"},{remoteAction:"webapp.showAutocompletedPub",remoteTarget:"webapp"},{remoteAction:"utils.autoCompleteFinished",remoteTarget:"bg"}],callbackMiddleware:g.jobCallbackMiddleware};t.default=y},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.processAndCleanUrl=void 0;var i=r(4),n=r(448),o=a(r(467)),s=a(r(481)),l=a(r(482));const c=e=>{let t=e.trim();return""===t||(t=(0,i.ensureUrlScheme)(t),t=t.replace(/^http:\/\/(dx\.)?doi\.org/i,"https://doi.org").replace(/#[^/]*$/,"")),t};t.processAndCleanUrl=c;t.default=class{constructor(e){this.drivers=(0,n.getDriversByMode)(e.mode);const t=new Set,r=new s.default(e.onMessage),a={crawlOptions:e,encounteredErrors:t,err:(0,i.errFactory)(r),messageReporter:r,urlList:new l.default([])};this.crawlerState={...a,fetchClient:new o.default(a)}}async crawl(e){if(!e.length)throw new i.CrawlerException("No URLs passed");const{err:t,messageReporter:r,urlList:a}=this.crawlerState;a.prepend(e);let n=a.next();for(;void 0!==n;){r.log("Crawling URL: "+n,"info");const e=await this.crawlOne(n);if(e.isOk())return e;n=a.next()}return t("CRAWLER_FAILED","No URL worked")}async crawlOne(e){const{messageReporter:t}=this.crawlerState,r=c(e);if(r!==e&&t.log("URL processed and cleaned to: "+r,"info"),""===r||"http://"===r)throw new i.CrawlerException("Invalid URL");t.log("Resolving possible redirects","info");const a=await this.resolvePossibleRedirect(r);if(!a.isOk())return a;const o=a.value;o!==r&&t.log("Redirected to: "+o,"info");const s=await(0,n.identifyDriver)(o,this.drivers,this.crawlerState);if(!s.isOk())return s;const l=s.value;if("pdfBlob"in l)return(0,i.ok)(l);const u=l.driverProccessor;return t.log("Found driver: "+u.name,"info"),u.processUrl(o)}async resolvePossibleRedirect(e){const{crawlOptions:{mode:t},err:r}=this.crawlerState;if(!(0,i.isRedirectUrl)(e,t))return(0,i.ok)(e);const a=await this.crawlerState.fetchClient.fetch(e);if(!a.isOk())return a;const{response:n}=a.value;return n.ok?(0,i.ok)(n.url):r("FETCH_FAILED",n.status)}async crawlDirectPdf(e){const{crawlOptions:{mode:t},messageReporter:r}=this.crawlerState;if("PDF"!==t)throw new i.CrawlerException("crawlDirectPdf called for Meta driver");const a=await(0,n.identifyDriver)(e,this.drivers,this.crawlerState);if(!a.isOk())return a;const o=a.value;if("pdfBlob"in o)return(0,i.ok)(o);const s=o.driverProccessor;return r.log("Found driver: "+s.name,"info"),s.checkFinalPdf({url:e})}formatEncounteredErrors(){const{encounteredErrors:e}=this.crawlerState;let t=null;e.has("BLOCKED")&&(t=this.crawlerState.fetchClient.visitedUrls[this.crawlerState.fetchClient.visitedUrls.length-1]);return{errors:e.size?Array.from(e):["CRAWLER_FAILED"],blockedUrl:t}}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(381)),n=a(r(613)),o=a(r(614)),s=a(r(615)),l=a(r(616)),c=a(r(617)),u=a(r(619)),d=a(r(620)),p=a(r(621)),m=a(r(622)),h=a(r(623)),g=a(r(624)),f=a(r(625)),b=a(r(626)),y=a(r(627)),v=a(r(628)),_=a(r(629)),w=a(r(630)),P=a(r(632)),S=a(r(633)),C=a(r(634)),A=a(r(635)),E=a(r(636)),T=a(r(637)),k=a(r(638)),x=a(r(639)),R=a(r(640)),I=a(r(641)),L=a(r(642)),D=a(r(643)),N=a(r(644)),O=a(r(645)),U=a(r(646)),M=a(r(647)),F=a(r(648)),j=a(r(649)),B=a(r(650)),$=a(r(651)),z=a(r(652)),H=a(r(653)),W=a(r(654)),V=a(r(655)),G=a(r(656)),q=a(r(657)),J=a(r(658)),K=a(r(659)),Y=a(r(660)),Z=a(r(661)),X=a(r(662)),Q=a(r(663)),ee=a(r(664)),te=a(r(665)),re=a(r(666)),ae=a(r(667)),ie=a(r(668)),ne=a(r(669)),oe=a(r(670)),se=a(r(671)),le=a(r(672)),ce=a(r(673)),ue=a(r(674)),de=a(r(675)),pe=a(r(676)),me=a(r(677)),he=a(r(678)),ge=a(r(679)),fe=a(r(680)),be=a(r(681)),ye=a(r(682)),ve=a(r(683)),_e=a(r(684));var we={Default:i.default,ACM:n.default,Amazon:o.default,AnnualReviews:s.default,APA:l.default,Archive:c.default,Arena:u.default,Arxiv:d.default,BASE:p.default,Bibtex:m.default,Britannica:h.default,CNKI:g.default,Congress:f.default,CryptologyEPrintArchive:y.default,CourtListener:b.default,DeGruyter:v.default,Doi:_.default,EbscoHost:w.default,EndNote:(e,t,r)=>(0,ie.default)(e,r,"EndNote"),EHP:P.default,Eric:S.default,F1000Research:C.default,FederalRegister:A.default,Forbes:E.default,GaleGroup:T.default,Github:k.default,GoogleArts:x.default,GoogleBooks:R.default,GooglePatents:I.default,GoogleScholarCitations:D.default,GoogleScholarCases:L.default,IEEE:N.default,IEEEcsdl:O.default,Inspire:M.default,IMDB:U.default,InterAmericanDevelopmentBank:F.default,JournalOfObjectTechnology:j.default,JSTOR:B.default,LibraryCatalogAleph:$.default,MathSciNet:z.default,MARC:H.default,NBER:W.default,Newspapers:V.default,NowPublishers:G.default,OpenLibrary:q.default,OpenReview:J.default,OSF:K.default,Ovid:(e,t,r)=>(0,Y.default)(e,t,r,"Ovid"),OvidInsights:(e,t,r)=>(0,Y.default)(e,t,r,"OvidInsights"),PNX:Z.default,ProceedingsOfMachineLearningResearch:X.default,ProQuest:Q.default,PublicHealthResearchAndPractice:ee.default,PubMed:te.default,ResearchGate:re.default,Ris:(e,t,r)=>(0,ie.default)(e,r,"Ris"),RisFirstNameFirst:ae.default,ScienceDirect:ne.default,SciencePublishingGroup:oe.default,Scopus:se.default,SemanticScholar:le.default,SerialsSolutions:ce.default,SFX:ue.default,SIRSI:de.default,SocialMedia:pe.default,SpringerBook:me.default,SSRN:he.default,StanfordEncylopediaOfPhilosophy:ge.default,SumoBrain:fe.default,VideoPortals:be.default,Wikipedia:ye.default,WoK:ve.default,WorldCat:_e.default};t.default=we},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{var a,s,l,c;let{err:u,fetchClient:d,messageReporter:p}=r,m=null;const{rootElement:h}=(0,o.default)(e,p);if(m=/doi\/.+\/10\.\d+/.test(t)?t.replace(/(.+doi\/.+\/10\.)(\d+.+)/,"10.$2"):h.find("#citation-format").attr("data-csl-doi")||null,!m)return u("CONVERTER_FAILED","ACM could not get DOI from URL or content");m=m.replace(/\?.+/,"");const g=new URL("https://dl.acm.org/action/exportCiteProcCitation"),f={dois:m,targetFile:"custom-bibtex",format:"bibTex"};g.search=new URLSearchParams(f).toString();const b=await d.fetch(g.toString(),{method:"POST"});if(!b.isOk()||!b.value.response.ok)return u("CONVERTER_FAILED","ACM could not get BibTex");const{bodyText:y}=b.value;let v;try{v=JSON.parse(y)}catch(e){return u("CONVERTER_FAILED","ACM JSON parsing error")}const _=null===(a=v.items)||void 0===a||null===(s=a[0])||void 0===s?void 0:s[m];if(!_)return u("CONVERTER_FAILED","No CSL Object in JSON response");delete _.id,delete _["original-date"],delete _["call-number"],_.type=null===(l=_.type)||void 0===l?void 0:l.toLowerCase().replace(/_/,"-"),"article"===_.type&&(_.type="article-journal"),_.page=null===(c=_.page)||void 0===c?void 0:c.replace(/\u2013/g,"-");const[w]=(0,n.getGlobal)("ppLibrary").format.CSL.syncRead(_);return w?(0,i.ok)(w):u("CONVERTER_FAILED","ACM parsing error")};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n}=r;const[o]=(0,i.getGlobal)("ppLibrary").format.Amazon.doRead(e);return o?o.title?(0,a.ok)(o):n("CONVERTER_FAILED","Amazon target parsing failed"):n("CONVERTER_FAILED","Amazon parsing error")};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n,fetchClient:o}=r;const s=(0,i.getGlobal)("ppLibrary"),[l]=s.format.HTML.syncRead(e),c=t.replace(/doi\/\w+\//g,"doi/").replace(/\/doi\//,"/action/downloadCitation?doi=")+"&include=abs&format=ris",u=await o.fetch(c);if(!u.isOk()||!u.value.response.ok)return n("CONVERTER_FAILED","Annual Review unable to fetch bib file");const d=u.value.bodyText,[p]=s.format.Ris.syncRead(d);return p?("author"in p||(p.author=l.author),(0,a.ok)(p)):l?(0,a.ok)(l):n("CONVERTER_FAILED","Annual Review failed parsing")};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);const n={api:"search.record",params:{friendlyQuery:"",totalRecords:"0",metadata:{uid:"2008-14602-004",excludeFromLogs:!1,hasBeenLogged:!1,auto:!1,fromDoi:!1,directUID:!0},query:{criteria:[{field:"UID",operator:"OR",value:"2008-14602-004",source:"user"}],limits:[],filter:{onlyShow:{ftOnly:!1,testAvailable:!1,peerReviewed:!1,latestUpdate:!1,impactStatement:!1,openAccess:!1},dateRange:{begin:"eternity",end:"eternity",field:"PublicationYear",puby1:"*",yearRange:""},facets:[]},displayOptions:{pageSize:25,sort:[{field:"PublicationYearMSSort",direction:"desc"},{field:"AuthorSort",direction:"asc"}]},nativeOptions:{pb:{type:{conferenceProceedings:!1,handbookManual:!1,referenceBook:!1,classicBook:!1,textbookStudyGuide:!1},publicationType:{authored:!1,edited:!1},audience:{generalPublic:!1,professional:!1}}},databases:["PI","PA","PB","PE"],tab:"all",source:"",viewMode:"psycnet",index:"psycnet"},responseParameters:{start:0,rows:1,facet:!1,results:!0,hl:!1}}},o=e=>{const t=(0,i.getGlobal)("ppLibrary");let r={title:"NO_TITLE",pubtype:"PP_ARTICLE",author:[],id_list:[]};if(e.SourcePI&&(r=t.library.BibliographicInferer.parse(e.SourcePI)),"PP_BOOK"===r.pubtype&&r.booktitle&&e.GivenDocumentTitle&&e.GivenDocumentTitle!==r.booktitle?(r.pubtype="PP_BOOK_CHAPTER",r.author&&(r.editor=r.author,delete r.author)):"PB"===e.ProductCode&&(r.pubtype="PP_BOOK",r.journal&&!r.title&&(r.booktitle=r.journal,delete r.journal)),e.GivenDocumentTitle&&(r.title=e.GivenDocumentTitle),e.DOI&&(r.doi=e.DOI),e.PublicationName&&(r.journal=e.PublicationName),e.PAVolume&&(r.volume=e.PAVolume),e.PAIssueCode&&(r.issue=e.PAIssueCode),e.PAFirstPage&&!r.pages&&(r.pages=e.PAFirstPage),e.AuthorName){r.author||(r.author=[]),r.editor||(r.editor=[]);for(let a=0;a<e.AuthorName.length;a+=1){let i=e.AuthorName[a];const n=/\(ed\)/i.test(i);i=i.replace(/\(ed\)/i,""),n?r.editor.push(t.library.Author.parseAuthor(i,{commasWithinNames:!0,familyNameFirst:!0})):r.author.push(t.library.Author.parseAuthor(i,{commasWithinNames:!0,familyNameFirst:!0}))}}if(e.PublicationYear&&!r.published&&(r.published=t.library.Date.parseDate(e.PublicationYear)),e.Abstract){const t=Object.keys(e.Abstract),a=e.Abstract;1===t.length?r.abstract=a[t[0]]:r.abstract=t.map(e=>`${e}: ${a[e]}`).join("\n\n")}if(e.ISSN)for(const t of e.ISSN)/\(Print\)/.test(t)&&(r.issn=t.replace("(Print)","")),/\(Electronic\)/.test(t)&&(r.issn_alt=t.replace("(Electronic)",""));if(e.UID&&(r.url||(r.url=[]),Array.isArray(r.url)||(r.url=[r.url]),r.url.push(`https://psycnet.apa.org/fulltext/${e.UID}.pdf`)),"PP_BOOK"===r.pubtype&&r.title){let e=r.title.replace(/\.\s*$/,"");if(r.volume&&(e=e.replace(/\.?,?\s+vol\.?\s+\d+/gi,"")),r.booktitle){const t=r.booktitle.indexOf(e);if(t>0){const e=r.booktitle.substring(0,t).split(":"),[a,i]=e;r.address=a,r.publisher=i}}if(e.indexOf(":")>0){var a;const[t]=e.split(":");null!==(a=r.publisher)&&void 0!==a&&a.includes(t)&&(r.publisher=r.publisher.replace(t,"").trim())}r.booktitle=e}return r};var s=async(e,t,r)=>{var s,l,c,u,d,p,m,h,g;let{err:f,fetchClient:b}=r;const y=(0,i.getGlobal)("ppLibrary"),[v]=y.format.HTML.syncRead(e);if(null!=v&&v.title&&"PP_WEBSITE"!==(null==v?void 0:v.pubtype))return/Database: PsycBOOKS/.test(e)&&/Chapter/.test(e)&&(v.pubtype="PP_BOOK_CHAPTER"),(0,a.ok)(v);const{api:_,body:w}=(e=>{var t,r,a,i,o;const s=null===(t=e.match(/\d+-\d+-\d+/))||void 0===t?void 0:t[0],l=null===(r=e.match(/[^u]id=[^&]+/))||void 0===r||null===(a=r[0])||void 0===a?void 0:a.replace(/.id=/,""),c=null===(i=e.match(/doi=[^&]+/))||void 0===i||null===(o=i[0])||void 0===o?void 0:o.replace(/doi=/,""),u={api:null,body:null};if(!s&&!l&&!c)return u;if(s&&!l){const e={body:{...n},api:"search.record"};return e.body.params.metadata.uid=s,e.body.params.query.criteria[0].value=s,e}return l?{api:"recentSearch.get",body:{api:"doi.record",params:{id:l}}}:c?{api:"doi.record",body:{api:"doi.record",params:{DOI:decodeURIComponent(c)}}}:u})(t);if(!w)return f("CONVERTER_FAILED","Error parsing URL IDs for APA API");const P=await b.fetch("https://psycnet.apa.org/api/request/"+_,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(!P.isOk()||!P.value.response.ok)return f("CONVERTER_FAILED","Bad response from APA API");const{bodyText:S}=P.value;let C={};try{C=JSON.parse(S)}catch(e){}let A=null,E=!1;if(null!==(s=C.results)&&void 0!==s&&null!==(l=s.result)&&void 0!==l&&null!==(c=l.doc)&&void 0!==c&&c[0]?[A]=C.results.result.doc:null!==(u=C.response)&&void 0!==u&&null!==(d=u.result)&&void 0!==d&&null!==(p=d.doc)&&void 0!==p&&p[0]&&([A]=C.response.result.doc),"search"===C.type&&(E=!0),A){const e=o(A);return e&&![e.title,e.booktitle].includes("NO_TITLE")?(0,a.ok)(e):f("CONVERTER_FAILED","Could not parse APA API response")}if(!E)return f("CONVERTER_FAILED","Bad response from APA API");const T=((e,t)=>{var r;const a={api:"search.record",params:t},i=new URL(e),n=i.searchParams.get("recordId"),o=i.searchParams.get("tab"),s=i.searchParams.get("display"),l=i.searchParams.get("sort");if(o&&(a.params.query={...a.params.query,tab:o}),n){const e=parseInt(n,10)-1;isNaN(e)||(a.params.responseParameters={...a.params.responseParameters,start:e,rows:1})}if(null!==(r=a.params)&&void 0!==r&&r.query||(a.params.query={}),s&&(a.params.query.displayOptions={...a.params.query.displayOptions,pageSize:s}),l){const e=l.split(","),t=[];for(let r=0;r<e.length;r+=1){const a=e[r].split(" ");2===a.length&&t.push({field:a[0],direction:a[1]})}a.params.query.displayOptions={...a.params.query.displayOptions,sort:t}}})(t,C),k=await b.fetch("https://psycnet.apa.org/api/request/search.record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(!k.isOk()||!P.value.response.ok)return f("CONVERTER_FAILED","Bad response from APA API");const{bodyText:x}=k.value;let R={};try{R=JSON.parse(x)}catch(e){}let I={};if(null!==(m=R.results)&&void 0!==m&&null!==(h=m.result)&&void 0!==h&&null!==(g=h.doc)&&void 0!==g&&g[0]&&([I]=R.results.result.doc),!I)return f("CONVERTER_FAILED","Bad response from APA API");const L=o(I);return L&&(L.title||L.booktitle)?(0,a.ok)(L):f("CONVERTER_FAILED","Could not parse APA API response")};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=a(r(618)),o=r(5);var s=async(e,t,r)=>{let{err:a}=r;const s=(0,o.getGlobal)("jQuery"),l=new n.default((0,o.getGlobal)("ppLibrary"),s),[c]=l.doRead(e);return c?c.title?(0,i.ok)(c):a("CONVERTER_FAILED","Archive target parsing failed"):a("CONVERTER_FAILED","Archive parsing error")};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=a(r(101));t.default=class{constructor(e,t){(0,i.default)(this,"pubTypeMapping",{web:"PP_WEBSITE",texts:"PP_ARTICLE",videos:"PP_VIDEO",audio:"PP_AUDIO",tv:"PP_VIDEO",movies:"PP_VIDEO",image:"PP_VIDEO",etree:"PP_AUDIO",software:"PP_COMPUTER_PROGRAM",data:"PP_DATASET"}),(0,i.default)(this,"doRead",e=>[this.getPub(e)]),(0,i.default)(this,"getName",()=>"Archive"),this.ppLibrary=e,this.$=t}cleanString(e){return e.replace(/\s+/g," ").trim()}getPub(e){const{rootElement:t,$:r}=(0,n.default)(e,this.$),a={pubtype:"PP_ARTICLE",title:"",id_list:[]},i=t.find("h1.item-title");if(i){const e=i.text();a.title=this.cleanString(e)}const o=t.find('.metadata-definition a[href*="query=creator"]');if(o){const e=o.text().replace(/(\d{4}).*-.*(\d{4})/,"").replace(/^.*:/,"").trim(),t=this.ppLibrary.library.Author.parseAuthor(e,{familyNameFirst:!1});a.author=[t]}const s=t.find("#maincontent .item-details-metadata span.icon-label.sr-only");if(s){const e=r(s[0]).text();this.pubTypeMapping[e]&&(a.pubtype=this.pubTypeMapping[e])}const l=t.find('span[itemprop="datePublished"]');if(l){const e=l.text();e&&(a.published=this.ppLibrary.library.Date.parseDate(e))}const c=t.find('span[itemprop="publisher"]');if(c){const e=c.text(),[,t,r]=e.match(/^(.*)\s*[:,]\s*(.*)$/)||[];t&&r?(a.publisher=this.cleanString(r),a.address=this.cleanString(t)):e&&(a.publisher=e)}const u=t.find('span[itemprop="numberOfPages"]');if(u){const e=u.text();e&&(a.pages=e)}const d=t.find("#descript");if(d){const e=d.text();a.abstract=this.cleanString(e)}return a}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n}=r;const[o]=(0,i.getGlobal)("ppLibrary").format.Arena.syncRead(e);return o&&o.title?(0,a.ok)(o):n("CONVERTER_FAILED","Arena parsing error")};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{err:a,messageReporter:s}=r;const[l]=(0,n.getGlobal)("ppLibrary").format.HTML.syncRead(e);if(!l)return a("CONVERTER_FAILED","ArXiv parsing error");if(!l.title||"[No title]"===l.title)return a("CONVERTER_FAILED","ArXiv target parsing failed");const{rootElement:c}=(0,o.default)(e,s),u=c.find(".primary-subject");if(u){const e=u.text(),[,t]=e.match(/\((.*)\)/)||[];l.journal="arXiv",t&&(l.journal=`arXiv [${t.trim()}]`,l.primaryClass=t.trim())}return l.eprint=l.arxivid,l.archivePrefix="arXiv",l.pubtype="PP_PREPRINT",l.doi&&!/arxiv/i.test(l.doi)&&(l.associated_doi=l.doi,delete l.doi),l.url=[t],(0,i.ok)(l)};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n,fetchClient:o}=r;const s=(0,i.getGlobal)("ppLibrary"),l=(t.replace(/\/$/,"")+"/Export").replace(/^http:/,"https:"),c=new URLSearchParams;c.append("style[]","RIS");const u=await o.fetch(l,{method:"POST",body:c});if(!u.isOk()||!u.value.response.ok)return n("CONVERTER_FAILED","BASE error fetching RIS file");const d=u.value.bodyText,[p]=s.format.Ris.syncRead(d);return p.title?(0,a.ok)(p):n("CONVERTER_FAILED","BASE error parsing RIS")};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r,n)=>{var o,s;const l=(0,i.getGlobal)("ppLibrary"),c=((e,t)=>{var r;const a=t.format.Bibtex.getAllPubtypes(),i=new RegExp(`@(${a.join("|")}|string)\\s*{[\\s\\S]*}\\s*(</pre>)?`,"gi"),n=e.match(i),o=(null==n||null===(r=n[0])||void 0===r?void 0:r.replace("</pre>",""))||e;return new RegExp(`@(${a.join("|")}|string)\\s*{([^=,]*),`,"gi").test(o)?o:o.replace(new RegExp(`(@(${a.join("|")}|string)\\s*{)`,"gi"),"$1 NoCiteKey,")})(e,l),[u]=l.format.Bibtex.syncRead(c);if(!u)return r.err("CONVERTER_FAILED","BibTex parsing error");u.title=null===(o=u.title)||void 0===o?void 0:o.replace(/^\{(.+)\}$/,"$1"),u.booktitle=null===(s=u.booktitle)||void 0===s?void 0:s.replace(/^\{(.+)\}$/,"$1");for(const e of Object.keys(n)){const t=n[e];"exact"===(null==t?void 0:t.type)&&(u[e]=t.value)}return delete u.original_citekey,(0,a.ok)(u)};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n}=r;const[o]=(0,i.getGlobal)("ppLibrary").format.Britannica.doRead(e);return o?(0,a.ok)(o):n("CONVERTER_FAILED","Britannica parsing error")};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n}=r;const o=e.replace("<body>",`<paperpileurl>${t}</paperpileurl>`),[s]=(0,i.getGlobal)("ppLibrary").format.CNKI.syncRead(o);return s&&s.title?(0,a.ok)(s):n("CONVERTER_FAILED","CNKI parsing error")};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{err:a,messageReporter:s}=r;const[l]=(0,n.getGlobal)("ppLibrary").format.HTML.syncRead(e);if(!l)return a("CONVERTER_FAILED","Congress parsing error");const c=l.title.match(/(H.R.|S.)(\d+) - (.*): (.*)/);if(null!==c){l.pubtype="PP_BILL";const[,e,t,r,a]=c;"H.R."===e?l.legislative_body="House of Representatives":"S."===e&&(l.legislative_body="Senate"),t&&(l.number=t),r&&(l.session=r.replace(/\s\(.*\)$/,"")),a&&(l.title=a)}const{rootElement:u}=(0,o.default)(e,s),d=u.find("#bill-summary").text(),p=d.indexOf(l.title);return p>=0&&(l.abstract=d.substring(p+l.title.length)),(0,i.ok)(l)};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n}=r;const o=(0,i.getGlobal)("ppLibrary"),[s]=o.format.CourtListener.doRead(e);return s?(o.library.Publication.autoCleanLegalDocs(s),"jurisdiction"in s||(s.jurisdiction="United States"),(0,a.ok)(s)):n("CONVERTER_FAILED","CourtListener parsing error")};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{var a;let{err:s,messageReporter:l}=r;const c=(0,n.getGlobal)("ppLibrary");if(!(null===(a=t.match(/eprint\.iacr\.org\/(.*)/))||void 0===a?void 0:a[1]))return s("CONVERTER_FAILED","CryptologyEPrintArchive cannot find entry ID");const{rootElement:u}=(0,o.default)(e,l),d=u.find("#bibtex").text(),[p]=c.format.Bibtex.syncRead(d);return p?(0,i.ok)(p):s("CONVERTER_FAILED","CryptologyEPrintArchive failed parsing")};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{messageReporter:a}=r;const s=(0,n.getGlobal)("ppLibrary"),[l]=s.format.HTML.syncRead(e),{rootElement:c}=(0,o.default)(e,a);if(!l.journal){const e=c.find('meta[property="article:section"]').attr("content");e&&(l.journal=e)}return(0,i.ok)(l)};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(449));var s=async(e,t,r,a)=>{const{err:s}=r,l={};let c=null,u=null;const d=e.replace(/\\u002F/gi,"/"),p=/(10\.\d{4,5}\/[A-Z\d._/-]+)/gi;let m=p.exec(d),h=0;for(;null!==m;)m&&m[1]&&(m[1].toLowerCase()in l||(h+=1,l[m[1].toLowerCase()]={count:0,discoveredIndex:h,doi:m[1]}),l[m[1].toLowerCase()].count+=1),m=p.exec(e);if(m=p.exec(t),m&&m[1]&&([,c]=m),0===Object.keys(l).length&&c)u=c;else if(1===Object.keys(l).length)u=l[Object.keys(l)[0]].doi;else if(Object.keys(l).length>1){const t=(0,n.getGlobal)("ppLibrary").format.HTML.syncRead(e);if(t&&t.length>0&&t[0].doi)u=t[0].doi;else if(c){const e=c.split("");for(;e.length>8;){if(e.join("").toLowerCase()in l){u=l[e.join("").toLowerCase()].doi;break}e.pop()}}if(!u){const e=Object.keys(l).sort((e,t)=>l[e].discoveredIndex-l[t].discoveredIndex);u=l[e[0]].doi}}if(u){let n={pubtype:"PP_ARTICLE",id_list:[],title:"",doi:u};return n=(0,o.default)(e,t,n,r,a),(0,i.ok)(n)}return s("CONVERTER_FAILED","Could not locate a DOI")};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12)),s=a(r(631)),l=r(26);var c=async(e,t,r)=>{var a;let{err:c,fetchClient:u,messageReporter:d}=r;const p=(0,n.getGlobal)("ppLibrary"),m=(null===(a=(0,l.deproxify)(t))||void 0===a?void 0:a.cleanUrl)||t;let h,g;if(/^https?:\/\/research.ebsco.com/i.test(m)){if([,h,g]=t.match(/(https?:\/\/[^/]+)\/.+\/(details\/[^?]+)/)||[],!h||!g)return c("CONVERTER_FAILED","EBSCOHost - invalid url");const e=`${h}/api/v5/${g}`,r=await u.fetch(e);if(!r.isOk()||!r.value.response.ok)return c("CONVERTER_FAILED","EBSCOHost - api call failed");const a=r.value.bodyText,n=new s.default(p),[o]=n.doRead(a);return o?(0,i.ok)(o):c("CONVERTER_FAILED","EBSCOHost - parsing failed")}const f={pubtype:"PP_ARTICLE",title:"",author:[],id_list:[],url:[]},{$:b,rootElement:y}=(0,o.default)(e,d),v=y.find('a[name="citation"]');if(v[0]){const e=b(v[0]).attr("data-amplitude");if(e&&"string"==typeof e)try{const t=JSON.parse(e);t&&t.doi&&"string"==typeof t.doi&&t.doi.startsWith("10.")&&(f.doi=t.doi),t&&"cmedm"===t.database&&t.record_an&&"string"==typeof t.record_an&&(f.pmid=t.record_an),t&&t.title&&"string"==typeof t.title&&(f.title=t.title)}catch(e){}}return(0,i.ok)(f)};t.default=c},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(174);t.default=class{constructor(e){(0,i.default)(this,"name","EBSCOHost"),this.ppLibrary=e}doRead(e){const t=this.readJSON(e);return t?(this.ppLibrary.library.Publication.autoClean(t),[t]):[]}readJSON(e){var t,r,a,i,o,s,l,c,u,d,p,m,h,g,f,b,y,v,_,w,P,S,C,A,E;let T=null;try{var k;const t=JSON.parse(e);T=null==t||null===(k=t[0])||void 0===k?void 0:k.result}catch(e){return null}const x={url:[],id_list:[],title:"",pubtype:"PP_ARTICLE"},R=null===(t=T)||void 0===t||null===(r=t.docTypes)||void 0===r?void 0:r[0];if(R&&(/Book Chapter/i.test(R)?x.pubtype="PP_BOOK_CHAPTER":/Book/i.test(R)&&(x.pubtype="PP_BOOK")),null!==(a=T)&&void 0!==a&&null!==(i=a.title)&&void 0!==i&&i.value&&(x.title=this.ppLibrary.Utils.normalizeString(T.title.value)),null!==(o=T)&&void 0!==o&&null!==(s=o.abstract)&&void 0!==s&&s.value&&(x.abstract=this.ppLibrary.Utils.normalizeString(T.abstract.value)),null!==(l=T)&&void 0!==l&&null!==(c=l.doids)&&void 0!==c&&c.length&&([x.doi]=T.doids),null!==(u=T)&&void 0!==u&&u.publicationDate&&(4===T.publicationDate.length?x.published={year:T.publicationDate}:6===T.publicationDate.length?x.published={year:T.publicationDate.slice(0,4),month:T.publicationDate.slice(4,6)}:8===T.publicationDate.length&&(x.published={year:T.publicationDate.slice(0,4),month:T.publicationDate.slice(4,6),day:T.publicationDate.slice(6,8)})),null!==(d=T)&&void 0!==d&&d.publisher&&(x.publisher=this.ppLibrary.Utils.normalizeString(T.publisher)),null!==(p=T)&&void 0!==p&&p.source){let{source:e}=T;e=e.replace(/[([][^([]+$/,"").trim(),"PP_ARTICLE"===x.pubtype?x.journal=this.ppLibrary.Utils.normalizeString(e):"PP_BOOK_CHAPTER"===x.pubtype&&(x.booktitle=this.ppLibrary.Utils.normalizeString(e))}if(null!==(m=T)&&void 0!==m&&null!==(h=m.issns)&&void 0!==h&&h.length){const[e,t]=T.issns;x.issn=e,t&&(x.issn_alt=t)}if(null!==(g=T)&&void 0!==g&&null!==(f=g.isbns)&&void 0!==f&&f.length){let[e,t=""]=T.isbns;[e]=(0,n.extractISBNs)(e),[t]=(0,n.extractISBNs)(t),e&&(x.isbn=e),t&&(x.isbn_alt=t)}if(null!==(b=T)&&void 0!==b&&b.volume&&(x.volume=this.ppLibrary.Utils.normalizeString(T.volume)),null!==(y=T)&&void 0!==y&&y.issue&&(x.issue=this.ppLibrary.Utils.normalizeString(T.issue)),null!==(v=T)&&void 0!==v&&v.contributors){const e=[];for(const{name:t}of T.contributors)e.push(this.ppLibrary.library.Author.parseAuthor(t,{familyNameFirst:!1}));e.length&&(x.author=e)}if(null!==(_=T)&&void 0!==_&&_.pageStart&&null!==(w=T)&&void 0!==w&&w.pageEnd?x.pages=`${T.pageStart}-${T.pageEnd}`:null!==(P=T)&&void 0!==P&&P.pageStart?x.pages=T.pageStart:null!==(S=T)&&void 0!==S&&S.pageEnd&&(x.pages=T.pageEnd),!x.pages&&null!==(C=T)&&void 0!==C&&C.pageCount&&(x.num_pages=T.pageCount),null!==(A=T)&&void 0!==A&&A.language&&(x.language=this.ppLibrary.Utils.normalizeLanguage(T.language)),null!==(E=T)&&void 0!==E&&E.htmlMetadata){if(!x.issn){const e=/<ul>\s*<li>(\d{4}-\d{4})<\/li>\s*<\/ul>/,[,t]=T.htmlMetadata.match(e)||[];x.issn=t}if(!x.doi){const e=/<ul>\s*<li>(10\.\d{4,}\/[^<]+)<\/li>\s*<\/ul>/,[,t]=T.htmlMetadata.match(e)||[];x.doi=t}}return x}getName(){return this.name}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{messageReporter:a}=r;const s=(0,n.getGlobal)("ppLibrary"),[l]=s.format.HTML.syncRead(e),{rootElement:c}=(0,o.default)(e,a),u=c.find('meta[name="pbContext"]').attr("content"),d=u?u.split(";"):[];for(const e of d){if(e.split("article:article:doi\\").length>1){const t=e.split("article:article:doi\\:")[1];l.doi=t}if(e.split("issue:issue:doi\\").length>1){const t=e.split("issue:issue:doi\\:")[1].split("ehp.")[1].split(".");3===t.length&&(l.year=t[0],l.volume=t[1],l.issue=t[2].substring(6))}}return(0,i.ok)(l)};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{messageReporter:a}=r;const s=(0,n.getGlobal)("ppLibrary"),[l]=s.format.HTML.syncRead(e),{rootElement:c}=(0,o.default)(e,a),u=c.find('a:contains("Direct link")').attr("title");return null!=u&&u.match(/(.*)(10\.\d{4,}\/\S+)/)&&(l.doi=u),(0,i.ok)(l)};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{messageReporter:a}=r;const s=(0,n.getGlobal)("ppLibrary"),[l]=s.format.HTML.syncRead(e),{$:c,rootElement:u}=(0,o.default)(e,a);if(l.journal&&l.journal.match("F1000Posters")){const e=u.find("div.posterBriefSummary");return l.abstract=e.text(),l.pubtype="PP_PRESENTATION",(0,i.ok)(l)}if(t.indexOf(".com/posters/")>-1){const e=u.find("#summary-text-field");return l.abstract=c(e).attr("value"),l.pubtype="PP_PRESENTATION",(0,i.ok)(l)}let d=u.find("p.article-abstract");d||(d=u.find("div.article-abstract"));const p=d.text();return p&&(l.abstract=p.trim()),(0,i.ok)(l)};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n}=r;const[o]=(0,i.getGlobal)("ppLibrary").format.FederalRegister.syncRead(e);return o?(0,a.ok)(o):n("CONVERTER_FAILED","FederalRegister parsing error")};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(381));var n=async(e,t,r,a)=>{const{err:n,fetchClient:o}=r,s=await o.fetch(t,{headers:{"User-Agent":"runscope/0.1"}});return s.isOk()&&s.value.response.ok?(0,i.default)(e,t,r,a):n("CONVERTER_FAILED","Forbes unable to fetch bib file")};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{err:a,fetchClient:s,messageReporter:l}=r;const{rootElement:c}=(0,o.default)(e,l);let u,d;const p=t.match(/(.+[?&]id)=([^&]+)/);if(null!=p&&p[2]&&(d=decodeURIComponent(p[2])),d||(d=c.find("#primaryDocId").attr("data-docid")),!d)return a("CONVERTER_FAILED","GaleGroup ID parsing error");const m={citationFormat:"RIS",documentData:`{"docId":"${d}"}`};u=t.replace(/^(https?:\/\/[^/]+\/[^/]+\/)(.+)/,"$1"),u=u.replace(/gdc\//,"gdc-artemis/");const h=u+"citationtools/rest/cite/download",g=await s.fetch(h,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(m)});if(!g.isOk()||!g.value.response.ok)return a("CONVERTER_FAILED","GaleGroup RIS download error");const{bodyText:f}=g.value,[b]=(0,n.getGlobal)("ppLibrary").format.Ris.syncRead(f);return b?(delete b.note,(0,i.ok)(b)):a("CONVERTER_FAILED","GaleGroup RIS parsing error")};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{err:a,fetchClient:s,messageReporter:l}=r;const c=(0,n.getGlobal)("ppLibrary"),[u]=c.format.HTML.syncRead(e);if(!u)return a("CONVERTER_FAILED","Github parsing error");u.pubtype="PP_COMPUTER_PROGRAM",u.institution="Github",u.title&&(u.title=u.title.replace(/^([^/]+\/)(.+)/,"$2")),delete u.booktitle,u.author=[];const d=t.replace(/(.*github\.com\/[^/]+)(\/.*)/,"$1"),p=await s.fetch(d);if(!p.isOk()||!p.value.response.ok)return a("CONVERTER_FAILED","Github fetch request not successful");const{bodyText:m}=p.value,{rootElement:h}=(0,o.default)(m,l),g=h.find("span.vcard-fullname").first().text();return g&&u.author.push(c.library.Author.parseAuthor(g,{familyNameFirst:!1})),(0,i.ok)(u)};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n}=r;const o=e.replace(/\n/g,"").match(/window\.INIT_data\[.*\s=\s(\[.*\]);<\/script>/);if(null===o)return n("CONVERTER_FAILED","Google Arts & Culture parsing error");const s=o[1],[l]=(0,i.getGlobal)("ppLibrary").format.GoogleArts.syncRead(s);return l?(0,a.ok)(l):n("CONVERTER_FAILED","Google Arts & Culture parsing error")};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{var a;let{err:s,fetchClient:l,messageReporter:c}=r,u=null,d=t.match(/id=book-([\dA-Z-]{12})/i);if(null!==d?[,u]=d:(d=t.match(/id=([_\dA-Z-]{12})/i),null!==d?[,u]=d:(d=t.match(/books\/edition\/[^/]+\/(............)/i),null!==d&&([,u]=d))),!u)return s("CONVERTER_FAILED","GoogleBooks parsing error - cannot find book ID");const p=`https://books.google.at/books/download/?id=${u}&output=ris`,m=await l.fetch(p);if(!m.isOk()||!m.value.response.ok)return s("CONVERTER_FAILED","GoogleBooks error downloading RIS file");const{bodyText:h}=m.value,[g]=(0,n.getGlobal)("ppLibrary").format.Ris.syncRead(h);if(!g)return s("CONVERTER_FAILED","GoogleBooks error parsing RIS file");const f=null===(a=e.match(/AF_initDataCallback\({key: 'ds:5'[^=]*sideChannel: {}}\);/))||void 0===a?void 0:a[0].match(/data:([\s\S]*), sideChannel: {}/);if(null!=f&&f[1])try{var b,y,v;const e=JSON.parse(f[1]);g.abstract=null===(b=e[0])||void 0===b||null===(y=b[8])||void 0===y||null===(v=y[0])||void 0===v?void 0:v[1]}catch(e){}else{const{rootElement:t}=(0,o.default)(e,c),r=t.find('meta[name="description"]');null!=r&&r.length&&(g.abstract=r.attr("content"))}return delete g.note,(0,i.ok)(g)};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12)),s=a(r(381));var l=async(e,t,r)=>{const{err:a,messageReporter:l}=r,c={title:"",pubtype:"PP_ARTICLE",id_list:[],url:[t]},{rootElement:u,$:d}=(0,o.default)(e,l);if("patent"===d(u.find('meta[itemprop="type"]')).attr("content"))return(0,s.default)(e,t,r,{});const p=u.find('span[itemprop="title"]');if(p&&(c.title=p.text()),!c.title)return a("CONVERTER_FAILED","GooglePatents target parsing failed");const m=u.find('dd[itemprop="authors"]').toArray()||[];for(const e of m){const t=(0,n.getGlobal)("ppLibrary").library.Author.parseAuthor(d(e).text());c.author=[...c.authors||[],t]}const h=u.find('time[itemprop="publicationYear"]');h&&(c.published=(0,n.getGlobal)("ppLibrary").library.Date.parseDate(h.text()));const g=u.find('dd[itemprop="publicationVenue"]');g&&(c.journal=g.text());const f=u.find('a[itemprop="fullViewURL"]').attr("href");f&&(c.url=[...c.url||[],f]);const b=u.find('a[itemprop="institutionURL"]').attr("href");return b&&(c.url=[...c.url||[],b]),(0,i.ok)(c)};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n}=r;const[o]=(0,i.getGlobal)("ppLibrary").format.GoogleScholarCases.doRead(e);return o?(0,a.ok)(o):n("CONVERTER_FAILED","GoogleScholarCases parsing error")};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n}=r;const[o]=(0,i.getGlobal)("ppLibrary").format.GoogleScholarCitations.doRead(e);return o?(0,a.ok)(o):n("CONVERTER_FAILED","GoogleScholar parsing error")};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n}=r;const[o]=(0,i.getGlobal)("ppLibrary").format.IEEE.doRead(e);return o?(0,a.ok)(o):n("CONVERTER_FAILED","IEEE - could not parse JSON metadata")};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n,fetchClient:o}=r,s="";const l=t.replace(/\?.*$/,"").replace(/\/$/,"").split("/").pop();if(!l)return n("CONVERTER_FAILED","IEEE CS cannot find Article ID from URL");if(/csdl\/magazine/.test(t)||/csdl\/journal/.test(t))s=t.replace(/([^/]+)\/([^/]+)$/,"$2").replace(/\/csdl\//,"/csdl/api/v1/citation-by-id/download/bibtex/");else{var c,u;const e={operationName:null,variables:{articleId:l},query:"\n        query ($articleId: String!) {\n          proceeding: proceedingByArticleId(articleId: $articleId) { id }\n        }"},t=await o.fetch("https://www.computer.org/csdl/api/v1/graphql",{body:JSON.stringify(e),method:"POST",headers:{accept:"*/*","content-type":"application/json","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin"}});if(!t.isOk()||!t.value.response.ok)return n("CONVERTER_FAILED","IEEE CS cannot get Proceeding ID");let r={};try{r=JSON.parse(t.value.bodyText)}catch(e){}const a=null===(c=r.data)||void 0===c||null===(u=c.proceeding)||void 0===u?void 0:u.id;a&&(s=`https://www.computer.org/csdl/api/v1/citation-by-id/download/bibtex/proceedings/${a}/${l}`)}if(!s)return n("CONVERTER_FAILED","IEEE CS - could not parse BibTex URL");const d=await o.fetch(s);if(!d.isOk()||!d.value.response.ok)return n("CONVERTER_FAILED","IEEE CS error downloading Bibtex");const{bodyText:p}=d.value,[m]=(0,i.getGlobal)("ppLibrary").format.Bibtex.syncRead(p);return m?(0,a.ok)(m):n("CONVERTER_FAILED","IEEE CS - BibTex parsing error")};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n,fetchClient:o}=r;const s=(0,i.getGlobal)("ppLibrary"),l=t.match(/\/(tt\d+)(.*)/);if(null==l||!l[1])return n("CONVERTER_FAILED","IMDB cannot find ID");const c=await o.fetch(`http://www.omdbapi.com/?i=${l[1]}&plot=long&r=json&apikey=${Object({PP_ENV:"production",PP_APP_ENV:"firefox",BACKEND_URL:"https://api.paperpile.com",LIBRARY_SEARCH_URL:"https://library.paperpile.com",LIBRARY_SEARCH_SYNC_URL:"https://virginia.library.paperpile.com",BUGSNAG_API_KEY:"1d56ddd9b2081d1ae1acb38c28c2ec60",EXTENSION_BUILD_NUMBER:"70",GIT_COMMIT:"4151a9f55e9e3ca797c461b042b6431f703d5b19",MIXPANEL_PROXY:"https://e.paperpile.com"}).IMDB_API_KEY||"7b37ab1e"}`);if(c.isOk()&&c.value.response.ok){const t=c.value.bodyText,[r]=s.format.IMDB.doRead(t,e);return r?(0,a.ok)(r):n("CONVERTER_FAILED","IMDB parsing error")}const[u]=s.format.IMDB.doRead(e);return u?(0,a.ok)(u):n("CONVERTER_FAILED","IMDB parsing error")};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n}=r;const[o]=(0,i.getGlobal)("ppLibrary").format.Inspire.doRead(e);return o?o.title?(0,a.ok)(o):n("CONVERTER_FAILED","Inspire target parsing failed"):n("CONVERTER_FAILED","Inspire parsing error")};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{err:a,messageReporter:s}=r;const l=(0,n.getGlobal)("ppLibrary"),[c]=l.format.HTML.syncRead(e);if(null==c||!c.title)return a("CONVERTER_FAILED","InterAmericanDevelopmentBank failed parsing data");const{$:u,rootElement:d}=(0,o.default)(e,s);c.title=c.title.replace("| Publications","").trim(),c.pubtype="PP_REPORT",c.institution="Inter-American Development Bank";const p=d.find(".field--name-field-author > .field__items");if(null!=p&&p.length){const e=u(p[0]).text().replace(/[\s\r\n]+/g," "),t=l.library.Author.parseAuthorList(e,{delimiter:";",commasWithinNames:!0,familyNameFirst:!0});null!=t&&t.length&&(c.author=t)}const m=d.find(".field--name-field-date-issued-text > .field__item");if(null!=m&&m.length){const e=u(m[0]).text().trim(),t=l.library.Date.parseDate(e);t&&"year"in t&&(c.published=t)}return(0,i.ok)(c)};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12)),s=r(18);var l=async(e,t,r)=>{let{err:a,fetchClient:l,messageReporter:c}=r;const u=(0,n.getGlobal)("ppLibrary"),d=e.indexOf("<h1>Abstract</h1>");let p;d>-1&&(p=e.substring(d+"<h1>Abstract</h1>".length),p=p.substring(0,p.indexOf("</p>")),p=p.replace(/<p>/,""));const m=await l.fetch(t.replace(".html","/bibtex.html"));if(!m.isOk()||!m.value.response.ok)return a("CONVERTER_FAILED","Journal of Object Technology unable to fetch bib file");const h=m.value.bodyText,{$:g,rootElement:f}=(0,o.default)(h,c),b=f.find("textarea"),y=(0,s.stripHtml)(g(b).text()),[v]=u.format.Bibtex.syncRead(y);return v&&v.title?(p&&void 0===v.abstract&&(v.abstract=p),(0,i.ok)(v)):a("CONVERTER_FAILED","Journal of Object Technology bibtex parsing failed")};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{var n;let{err:o,fetchClient:s}=r;if(!e)return o("CONVERTER_FAILED","JSTOR content unavailable");const l=(0,i.getGlobal)("ppLibrary"),c=t.replace(/(https?:\/\/[^/]+)(.*)/,"$1"),u=null===(n=t.match(/(.+)(\/10\.\d{4,5}\/[^#?=+]+)(.*)/))||void 0===n?void 0:n[2];let d="";if(u)d=`${c}/citation/ris${u}`;else{var p,m;let t=null===(p=e.match(/"objectDOI"\s*:\s*"([^"]+)"/))||void 0===p?void 0:p[1];t&&(d=`${c}/citation/ris/${t}`),t=null===(m=e.match(/'doi':\s'([^']+)'/))||void 0===m?void 0:m[1],t&&(d=`${c}/citation/ris/${t}`)}if(!d)return o("CONVERTER_FAILED","JSTOR cannot find DOI");const h=await s.fetch(d);if(!h.isOk()||!h.value.response.ok)return o("CONVERTER_FAILED","JSTOR unable to fetch bib file");const g=await h.value.bodyText.replace(/\\r\\n/g,"\n"),[f]=l.format.Ris.syncRead(g);return f?(0,a.ok)(f):o("CONVERTER_FAILED","JSTOR RIS parsing failed")};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12)),s=r(18);var l=async(e,t,r)=>{let{err:a,messageReporter:l}=r;const c=(0,n.getGlobal)("ppLibrary");let u="";const{$:d,rootElement:p}=(0,o.default)(e,l);p.find("tr").each((e,t)=>{const r=d(t).find("td");if(r&&2===r.length){let e=d(r[0]).text();const t=d(r[1]).text();e&&/^(L|\d)/.test(e)&&(e=(0,s.normalize)(e.split(/(\d\d\d)/).join(" ")),"LDR"===e&&(e="LEADER"),e=e.padEnd(7," "),u+=`${e}${t}\n`)}});const[m]=c.format.MARC.syncRead(u);return m?(0,i.ok)(m):a("CONVERTER_FAILED","LibraryCatalogAleph - MARC parsing error")};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{var n;let{err:o,fetchClient:s}=r;const l=(0,i.getGlobal)("ppLibrary"),c=t.match(/mr=(\d+)/);if(!c)return o("CONVERTER_FAILED","No id found in URL");const u="https://mathscinet.ams.org/mathscinet/api/publications/format?formats=bib&ids="+c[1];let d="";try{const e=await s.fetch(u);if(!e.isOk()||!e.value.response.ok)return o("CONVERTER_FAILED","MathSciNet error fetching BibTeX file");d=JSON.parse(e.value.bodyText)[0].bib||""}catch(e){return o("CONVERTER_FAILED","MathSciNet error fetching BibTeX file")}const[p]=l.format.Bibtex.syncRead(d);if(!p)return o("CONVERTER_FAILED","MathSciNet error parsing BibTeX");if(!p.title)return o("CONVERTER_FAILED","MathSciNet error parsing BibTeX");var m;(p.title=null===(n=p.title)||void 0===n?void 0:n.replace(/^\{(.+)\}$/,"$1"),p.booktitle)&&(p.booktitle=null===(m=p.booktitle)||void 0===m?void 0:m.replace(/^\{(.+)\}$/,"$1"));return delete p.original_citekey,(0,a.ok)(p)};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n}=r;const o=/<datafield/.test(e)&&/<subfield/.test(e),s=(0,i.getGlobal)("ppLibrary"),[l]=o?s.format.MARCXML.syncRead(e):s.format.MARC.syncRead(e);return l?(0,a.ok)(l):n("CONVERTER_FAILED","MARC parsing error")};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n,fetchClient:o}=r;const s=(0,i.getGlobal)("ppLibrary"),l=`https://back.nber.org/bibliographic/${t.split("/").pop()}.bib`,c=await o.fetch(l);if(!c.isOk()||!c.value.response.ok)return n("CONVERTER_FAILED","NBER unable to fetch bib file");const u=await c.value.bodyText,[d]=s.format.Bibtex.syncRead(u);if(d)return"PP_REPORT"===d.pubtype&&(d.pubtype="PP_PREPRINT",d.number=d.issue,delete d.issue),(0,a.ok)(d);const[p]=s.format.HTML.syncRead(e);return p?(0,a.ok)(p):n("CONVERTER_FAILED","NBER failed to parse pub")};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));const s=(e,t,r,a)=>{const i=[],n=e.find(r).toArray();if(null!=n&&n.length){const e=new Set;for(const r of n){const a="META"===(null==r?void 0:r.nodeName)?t(r).attr("content"):t(r).text();a&&e.add(a)}const r=[...e];for(const e of r){let t=e;if(/\S\s\S/.test(t)&&t.length>4){t=t.replace(/^[\s\n\t]*By\s+/,""),t=t.replace(/,\s+CNN$/,""),t=t.replace(/\s+Ph\.D\.$/,""),t=t.replace(/[,\s;:.]+$/,""),t=t.replace(/archive page/gi,"");const e=a.library.Author.parseAuthorList(t,{auto:!0})||[];for(const t of e)i.push(t)}}}return i},l=(e,t,r,a,i)=>{let n={};const o=void 0===a?0:a,s=e.find(r);if(null!=s&&s.length){let e="";e=t(s[o]).attr("datetime")?t(s[o]).attr("datetime")||"":t(s[o]).text(),e.indexOf(" on ")>-1&&(e=e.substring(e.indexOf(" on ")+4,e.length)),e=e.replace(/^\s*Published:?\s*/i,""),e=e.replace(/^\s*Posted:?\s*/i,""),e=e.replace(/.+\|\s+/,""),n=i.library.Date.parseDate(e)}return n},c=e=>{const t={},r=e.match(/\/(\d{4})\/(\d{2})\/(\d{2})\//);return r&&(t.year=parseInt(null==r?void 0:r[1],10).toString(),t.month=parseInt(null==r?void 0:r[2],10).toString(),t.day=parseInt(null==r?void 0:r[3],10).toString()),t};var u=async(e,t,r)=>{let{err:a,messageReporter:u}=r;const d=(0,n.getGlobal)("ppLibrary"),[p]=d.format.HTML.syncRead(e);if(!p||!p.title)return a("CONVERTER_FAILED","Annual Review failed parsing");const{rootElement:m,$:h}=(0,o.default)(e,u);p.pubtype="PP_NEWS_ARTICLE",p.kind="Newspaper Article";let g=((e,t,r,a,i)=>{const n={...e};if(/nytimes\.com/.test(t))n.journal="The New York Times",n.issn="0362-4331",n.author||(n.author=s(r,a,'p[itemprop="author creator"] span[itemprop="name"]',i));else if(/theguardian\.com/.test(t))n.journal="The Guardian",n.issn="0261-3077";else if(/latimes\.com/.test(t))n.journal="Los Angeles Times",n.issn="0458-3035",n.title=n.title.replace(" - Los Angeles Times","");else if(/washingtonpost\.com/.test(t))n.journal="The Washington Post",n.issn="0190-8286",n.author=s(r,a,"div.author-byline a.author-name",i),n.published=c(t);else if(/thestar\.com/.test(t))n.journal="The Toronto Star",n.issn="0319-0781",n.published=c(t),n.title&&(n.title=n.title.replace(/\s*\|\s*Toronto\s*Star/i,""));else if(/chicagotribune\.com/.test(t))n.journal="Chicago Tribune",n.issn="1085-6706",n.author=s(r,a,".byline span",i);else if(/online\.wsj\.com/.test(t))n.journal="The Wall Street Journal",n.issn="0099-9660";else if(/usatoday\.com/.test(t))n.journal="USA Today",n.issn="0734-7456";else if(/denverpost\.com/.test(t))n.journal="The Denver Post",n.issn="1930-2193";else if(/thetimes\.co\.uk/.test(t))n.journal="The Times",n.issn="0140-0460",n.author=s(r,a,"strong.Byline-name--article",i),n.published=l(r,a,".Dateline",0,i),n.title&&(n.title=n.title.replace(/\s*\|\s*The\s*Times/i,""));else if(/independent\.co\.uk/.test(t))n.journal="The Independent",n.issn="0951-9467";else if(/telegraph\.co\.uk/.test(t))n.journal="The Daily Telegraph",n.issn="0307-1235",n.author=s(r,a,"span.e-byline__author",i);else if(/theaustralian\.com\.au/.test(t))n.journal="The Australian",n.issn="1038-8761";else if(/nzherald\.co\.nz/.test(t))n.journal="The New Zealand Herald",n.issn="1170-0777",n.title=r.find("h1.article__heading").text().replace(/\n/g,"").trim(),n.author=s(r,a,"a.author__link",i),n.published=l(r,a,"time.meta-data__time-stamp",0,i);else if(/bbc\.co\.uk/.test(t)||/bbc\.com/.test(t))n.journal="BBC";else if(/huffingtonpost\.com/.test(t))n.journal="Huffington Post";else if(/ft\.com/.test(t))n.journal="Financial Times";else if(/npr\.org/.test(t))n.journal="NPR";else if(/reuters\.com/.test(t))n.journal="Reuters",n.author=s(r,a,'a[class*="Byline-author-"]',i);else if(/abc\.net\.au/.test(t))n.journal="ABC News",n.author=s(r,a,'span[data-component="Byline"]',i);else if(/bloomberg\.com\/news/.test(t))n.journal="Bloomberg News";else if(/cbc\.ca/.test(t))n.journal="CBC News",n.author=s(r,a,"span.authorText",i),n.published=l(r,a,"time.timeStamp",0,i);else if(/latercera\.com/.test(t))n.journal="La Tercera",n.author=s(r,a,"h4.m-top-10 a",i);else if(/emol\.com/.test(t)){n.journal="Emol";const e=r.find(".info-notaemol-porfecha");if(null!=e&&e.length){const t=e.text().split("|");if(null!=t&&t.length){const[e,,r]=t;n.author=[i.library.Author.parseAuthor(r,{familyNameFirst:!1})],n.published=i.library.Date.parseDate(e)}}}else/elmostrador\.cl/.test(t)&&(n.journal="El Mostrador",n.author=s(r,a,"p.autor-y-fecha a",i),n.published=c(t));return n})(p,t,m,h,d);return g.journal||(g=((e,t,r,a,i)=>{const n={...e};if(n.kind="Magazine Article",/newscientist\.com/.test(t)&&(n.journal="New Scientist",n.issn="0262-4079",n.published=l(r,a,"span.published-date",0,i),n.author=s(r,a,"a.author",i)),/scientificamerican\.com/.test(t)){n.journal="Scientific American",n.issn="0036-8733",n.published=l(r,a,"li.meta-list__item",3,i);const e=r.find(".t_article-subtitle");e&&e.length&&(n.abstract=a(e).first().text())}if(/nationalgeographic\.com/.test(t)&&(n.journal="National Geographic",n.issn="0027-9358"),/americanscientist\.org/.test(t)&&(n.journal="American Scientist",n.issn="0003-0996",n.author=s(r,a,"h3.article-author a",i),n.title&&(n.title=n.title.replace(/\s*\S\s*American Scientist\s*$/i,""))),/foreignaffairs\.com/.test(t)&&(n.journal="Foreign Affairs",n.issn="0015-7120",n.booktitle&&delete n.booktitle),/harvardpolitics\.com/.test(t)&&(n.journal="Harvard Political Review",n.issn="0090-1032",n.title&&(n.title=n.title.replace(/\s*- Harvard Political Review/i,"").replace("\xbb ","")),n.abstract=a(r.find("div.tdb-block-inner p")[0]).text(),n.author=s(r,a,"a.tdb-author-name",i)),/hbr\.org/.test(t)&&(n.journal="Harvard Business Review",n.issn="0017-8012",n.author=s(r,a,"li.article-author a",i)),/motherjones\.com/.test(t)&&(n.journal="Mother Jones",n.issn="0362-8841",n.published=l(r,a,"#dateline",0,i)),/thenation\.com/.test(t)&&(n.journal="The Nation",n.issn="0027-8378"),/newint\.org/.test(t)&&(n.journal="New Internationalist",n.issn="0305-9529",n.published=c(t),n.author=s(r,a,".author__name a",i)),/spectator\.co\.uk/.test(t)&&(n.journal="The Spectator"),/time\.com/.test(t)&&(n.journal="Time",n.issn="0040-781X",n.published=l(r,a,"div.published-date",0,i),n.author=s(r,a,"div.author-text a",i)),/technologyreview\.com/.test(t)&&(n.journal="MIT Technology Review",n.issn="0040-1692"),/the-american-interest\.com/.test(t)&&(n.journal="The American Interest",n.issn="1556-5777",n.author=s(r,a,"span.byline a",i),n.title&&(n.title=n.title.replace(/\s*- The American Interest/i,"")),n.published=c(t)),/wired\.com/.test(t)&&(n.journal="Wired",n.issn="1059-1028",n.author=s(r,a,"a.byline__name-link",i),n.title=r.find('h1[data-testid="ContentHeaderHed"]').text().replace(/\n/g,"")),/theatlantic\.com/.test(t)&&(n.journal="The Atlantic",n.issn="1072-7825"),/cnn\.com/.test(t)&&(n.journal="CNN",n.author=s(r,a,"span.byline__name",i)),/nautil\.us/.test(t)&&(n.journal="Nautilus"),/forbes\.com/.test(t)&&(n.journal="Forbes Magazine"),/businessoffashion\.com/.test(t)&&(n.journal="Business of Fashion"),/theconversation\.com/.test(t)&&(n.journal="The Conversation",n.published=l(r,a,'time[itemprop="datePublished"]',0,i)),/psychologytoday\.com/.test(t)&&(n.journal="Psychology Today",n.author=s(r,a,"p.blog-entry__date--full",i),n.published=l(r,a,"p.blog-entry__date--full",0,i)),/businessinsider\.com/.test(t)&&(n.journal="Business Insider"),/techcrunch\.com/.test(t)&&(n.journal="TechCrunch"),/sciencedaily\.com/.test(t)){n.journal="Science Daily";const e=r.find("#source").first().text();!e||n.author&&n.author.length||(n.author=[{collective:e}]),n.published=l(r,a,"#date_posted",0,i)}return/newyorker\.com/.test(t)&&(n.journal="The New Yorker"),n})(p,t,m,h,d)),g.journal&&delete g.booktitle,-1!==g.title.indexOf("|")&&(g.title=g.title.substring(0,g.title.indexOf("|")-1)),(0,i.ok)(g)};t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{var n;let{err:o,fetchClient:s}=r;const l=(0,i.getGlobal)("ppLibrary"),c=null===(n=t.match(/articles?\/[^/]+\/(.+)/))||void 0===n?void 0:n[1];if(!c)return o("CONVERTER_FAILED","Now Publishers cannot find ID");const u=new URLSearchParams({id:c,format:"RIS"}),d=await s.fetch("https://www.nowpublishers.com/article/ExportCitation",{method:"POST",body:u});if(!d.isOk()||!d.value.response.ok)return o("CONVERTER_FAILED","Now Publishers unable to fetch RIS file");const p=d.value.bodyText,[m]=l.format.Ris.syncRead(p);return(0,a.ok)(m)};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n,fetchClient:o}=r;const s=t.match(/\/books\/([^/"]+)\//);if(null===s)return n("CONVERTER_FAILED","OpenLibrary parsing error");const l=await o.fetch(`https://openlibrary.org/books/${s[1]}.opds`);if(!l.isOk()||!l.value.response.ok)return n("CONVERTER_FAILED","OpenLibrary call failed");const{bodyText:c}=l.value,[u]=(0,i.getGlobal)("ppLibrary").format.RSS.syncRead(c.replace(/^b'/,"").replace(/(\\n|\\n'$)/g,""));return u?(0,a.ok)(u):n("CONVERTER_FAILED","OPDS parsing error")};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{err:a,messageReporter:s}=r;const l=(0,n.getGlobal)("ppLibrary"),[c]=l.format.HTML.syncRead(e);if(!c)return a("CONVERTER_FAILED","OpenReview failed parsing");c.pubtype="PP_PREPRINT";const{$:u,rootElement:d}=(0,o.default)(e,s),p=d.find(".note-content-field"),m=d.find(".note-content-value");for(let e=0;e<p.length;e+=1){if("Abstract:"===u(p[e]).text().trim()){c.abstract=u(m[e]).text();break}}return(0,i.ok)(c)};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{var n,o;let{err:s,fetchClient:l}=r;const c=(0,i.getGlobal)("ppLibrary");let u={};try{u=JSON.parse(e)}catch(e){}const d=null===(n=u.data)||void 0===n||null===(o=n.attributes)||void 0===o?void 0:o.citation;if(!d)return s("CONVERTER_FAILED","OSF could not parse JSON");const p=c.format.Bibtex,[m]=p.syncRead(d);if(!m)return s("CONVERTER_FAILED","OSF error in parsing Bibtex");const h=m;h.pubtype="PP_PREPRINT",delete h.original_citekey;const g=t.replace("https://api.osf.io/v2/preprints/","").replace("/citation/bibtex/",""),f=await l.fetch("https://api.osf.io/v2/preprints/"+g);if(!f.isOk()||!f.value.response.ok)return(0,a.ok)(h);try{var b,y,v,_;const e=JSON.parse(f.value.bodyText);h.abstract=null===(b=e.data)||void 0===b||null===(y=b.attributes)||void 0===y?void 0:y.description,h.keywords=null===(v=e.data)||void 0===v||null===(_=v.attributes)||void 0===_?void 0:_.tags}catch(e){}return(0,a.ok)(h)};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r,n)=>{let{err:o}=r;const[s]=(0,i.getGlobal)("ppLibrary").format[n].syncRead(e);if(!s)return o("CONVERTER_FAILED","Ovid parsing error");const l=t.match(/directlink=([^&]+)/);return null!=l&&l[1]&&(s.url||(s.url=[]),Array.isArray(s.url)||(s.url=[s.url]),s.url.push(unescape(l[1]))),(0,a.ok)(s)};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);const n=e=>/solo\.bodleian\.ox\.ac\.uk/.test(e)||/.+\.primo\.exlibrisgroup\.com/.test(e),o=async(e,t,r,o,s)=>{let{fetchClient:l,err:c}=s;const u=await(async(e,t,r,a,i)=>{const o=e.match(/(.+)&context(.+)/),s=(null===o?e+"&showPnx=true":o[1]+"&showPnx=true").replace(/:/g,"%253A").replace(/\//g,"%252F").replace(/\?/g,"%253F").replace(/=/g,"%253D").replace(/&/g,"%2526"),l=`${n(e)?`${t}/primaws/rest/pub/institution/${a.replace(/:.*/,"")}/guestJwt`:`${t}/primo_library/libweb/webservices/rest/v1/guestJwt/${r}`}?isGuest=true&lang=en_US&targetUrl=${s}&viewId=${a}`,c=await i.fetch(l);if(!c.isOk()||!c.value.response.ok)return null;const{bodyText:u}=c.value;return u})(e,t,r,o,l),d=await l.fetch(e,{headers:{Authorization:"Bearer "+u}});if(!d.isOk()||!d.value.response.ok)return c("CONVERTER_FAILED","PNX retrieval error");const{bodyText:p}=d.value,[m]=(0,i.getGlobal)("ppLibrary").format.PNX.doRead(p);return m?(0,a.ok)(m):c("CONVERTER_FAILED","PNX parsing error")};var s=async(e,t,r)=>{const{err:a,fetchClient:i}=r,s=i.visitedUrls[i.visitedUrls.length-1];let l;try{l=new URL(s).searchParams}catch(e){return a("CONVERTER_FAILED","PNX invalid URL")}const c=l.get("context")||"PC",u=l.get("vid"),d=u?u.replace(/_.*/g,""):null,p=l.get("docid")||l.get("doc");if(!p||!d||!u)return a("CONVERTER_FAILED","PNX URL params for IDs not parsed");const[,m]=t.match(/(https?:\/\/[^/]+).*/)||[];let h="";const g=decodeURIComponent(p).replace(/~2F/g,"/");return h=n(m)?`${m}/primaws/rest/pub/pnxs/${c}/${g}?vid=${u}&lang=en`:`${m}/primo_library/libweb/webservices/rest/primo-explore/v1/pnxs/xml/${c}/${g}?vid=${u}&lang=en_US&showPnx=true`,o(h,m,d,u,r)};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{var a,s;let{err:l,messageReporter:c}=r;const u=(0,n.getGlobal)("ppLibrary"),{rootElement:d,$:p}=(0,o.default)(e,c),m=d.find("#bibtex");if(!m)return l("CONVERTER_FAILED","ProceedingsOfMachineLearningResearch cannot find Bibtex");const h=p(m).text(),[g]=u.format.Bibtex.syncRead(h);return g?(g.title=null===(a=g.title)||void 0===a?void 0:a.replace(/^\{(.+)\}$/,"$1"),g.booktitle=null===(s=g.booktitle)||void 0===s?void 0:s.replace(/^\{(.+)\}$/,"$1"),(0,i.ok)(g)):l("CONVERTER_FAILED","ProceedingsOfMachineLearningResearch failed parsing")};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r,a)=>{const s=t.match(/(docview|openview|ebdetailsview|docviewvideoobject)\/([^/]+)/),l=t.match(/(docview|openview|ebdetailsview|docviewvideoobject)\/([^?]+)/);return null!=l&&l[2]||null!=s&&s[2]?(async(e,t,r)=>{let{err:a,fetchClient:s,messageReporter:l}=r;const c=(0,n.getGlobal)("ppLibrary"),{$:u,rootElement:d}=(0,o.default)(e,l);if(/DocView: Book Details/g.test(e)){const e=d.find("#ebDetailsIframe");if(null==e||!e.length)return a("CONVERTER_FAILED","Could not parse ProQuest book page");const t=u(e[0]).attr("src");if(!t)return a("CONVERTER_FAILED","Could not find ProQuest book page link");const r=await s.fetch(t);if(!r.isOk()||!r.value.response.ok)return a("CONVERTER_FAILED","Could not get ProQuest book page");const{bodyText:n}=r.value,o=`<div>${n.replace(/<img[^>]+>/gi,"")}</div>`,[l]=c.format.ProQuest.doRead(o);return l?(0,i.ok)(l):a("CONVERTER_FAILED","Could not parse ProQuest book page")}const p=d.find("#addFlashPageParameterformat_abstract");if(null!=p&&p.length){const t=u(p[0]).attr("href");if(!t)return a("CONVERTER_FAILED","Could not find ProQuest detailed citation page link");const r=await s.fetch(t);if(!r.isOk()||!r.value.response.ok){const[t]=c.format.ProQuest.doRead(e);return t?(0,i.ok)(t):a("CONVERTER_FAILED","ProQuest failed parsing")}const{bodyText:n}=r.value,o=n.replace(/<img[^>]+>/gi,""),[l]=c.format.ProQuest.doRead(o);return l?(0,i.ok)(l):a("CONVERTER_FAILED","ProQuest failed parsing detailed page")}const[m]=c.format.ProQuest.doRead(e);return m?(0,i.ok)(m):a("CONVERTER_FAILED","ProQuest failed parsing basic page")})(e,0,r):r.err("CONVERTER_FAILED","ProQuest parsing error - unsupported page")};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{err:a,messageReporter:s}=r;const l=(0,n.getGlobal)("ppLibrary"),c={title:"",id_list:[],journal:"Public Health Research and Practice",pubtype:"PP_ARTICLE"},u=t.match(/\S+-(\d{4})-volume-(\d+)-issue-(\d+)/);if(!u||4!==u.length)return a("CONVERTER_FAILED","PublicHealthResearchAndPractice parser failed");const[,d,p,m]=u;c.published={year:d},c.volume=p,c.issue=m;const{rootElement:h}=(0,o.default)(e,s),g=h.find("#author").text(),f=l.library.Author.parseAuthorList(g,{familyNameFirst:!1});f&&(c.author=f);const b=h.find(".article_title").text();b&&(c.title=b);const y=h.find("#abstract").text();return y&&(c.abstract=y.trim()),(0,i.ok)(c)};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{err:a,messageReporter:s}=r;const l=(0,n.getGlobal)("ppLibrary"),[c]=l.format.HTML.syncRead(e),{$:u,rootElement:d}=(0,o.default)(e,s),p=t.match(/europepmc.org\/\w+\/med\/(\d+)(\D.*)?/i);if(null!=p&&p[1]){const e={pubtype:"PP_ARTICLE",title:"",id_list:[],url:[t],pmid:p[1]};return(0,i.ok)(e)}let m=((e,t)=>{var r;return null===(r=e.match(/ncbi[.-]nlm[.-]nih[.-]gov[^/]*\/?l?a?b?s?\/pubmed\/(\d+)(\D.*)?/i)||e.match(/pubmed[.-]ncbi[.-]nlm[.-]nih[.-]gov\/(\d+)(\D.*)/i)||e.match(/pubmed[.-]ncbi[.-]nlm[.-]nih[.-]gov\/(\d+)$/i)||e.match(/ncbi[.-]nlm[.-]nih[.-]gov[^/]*\/m\/pubmed\/(\d+)(\D.*)?/i)||e.match(/ncbi[.-]nlm[.-]nih[.-]gov[^/]*\/pubmed\?term=(\d+)(\D.*)?/i)||e.match(/ncbi[.-]nlm[.-]nih[.-]gov[^/]*\/sites\/entrez\/(\d+)(\D.*)?/i)||e.match(/ukpmc[.-]ac[.-]uk[^/]*\/abstract\/MED\/(\d+)/i)||e.match(/europepmc[.-]org[^/]*\/abstract\/MED\/(\d+)/i)||e.match(/ncbi[.-]nlm[.-]nih[.-]gov[^/]*\/books\/.+/i)&&t.match(/PMID:\s+<a\s+href\s*=\s*"\/pubmed\/(\d+)"\s+title\s*=\s*"PubMed record of this/))||void 0===r?void 0:r[1]})(t,e),h=(e=>{var t;return null===(t=e.match(/ncbi[.-]nlm[.-]nih[.-]gov[^/]*\/pmc\/articles\/(PMC\d+)(\D.*)?/i)||e.match(/ukpmc[.-]ac[.-]uk[^/]*\/articles\/(PMC\d+)/i)||e.match(/pubmedcentralcanada[.-]ca[^/]*\/.*articles\/(PMC\d+)/i)||e.match(/europepmc[.-]org[^/]*\/articles\/(PMC\d+)/i))||void 0===t?void 0:t[1]})(t);if(void 0===h&&void 0===m){const e=d.find("div.fm-citation-pmcid");if(null!=e&&e.length){const t=u(e).text().match(/PMCID:\s+PMC(\d+)/i);null!=t&&t[1]&&([,h]=t)}}if(!m&&!h){if(!/ncbi[.-]nlm[.-]nih[.-]gov[^/]*\/books/i.test(t))return a("CONVERTER_FAILED","PubMed failed parsing and cannot find any of PMID/PMC/ISBN");const e=d.find('span[itemprop="isbn"]');null!=e&&e.length&&(c.isbn=u(e[0]).text()),c.pubtype="PP_BOOK"}return m&&(m=m.replace(/^0+/,"")),(0,i.ok)(c)};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n}=r;const[o]=(0,i.getGlobal)("ppLibrary").format.ResearchGate.doRead(e);return o?(0,a.ok)(o):n("CONVERTER_FAILED","ResearchGate parsing error")};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n}=r;const o=(0,i.getGlobal)("ppLibrary"),[s]=o.format.Ris.syncRead(e);if(!s)return n("CONVERTER_FAILED","RIS parsing error");const l=["author","editor","translator","contributor","series_editor"],c=/(10\.5042|10\.1108|10\.35241)/.test(s.doi);for(let e=0;e<l.length;e+=1){const t=l[e];if(s&&s[t]&&s[t].length)for(let e=0;e<s[t].length;e+=1)s[t][e].collective&&(s[t][e]=o.library.Author.parseAuthor(s[t][e].collective,{familyNameFirst:c}))}return delete s.note,(0,a.ok)(s)};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);t.default=async(e,t,r)=>{let{err:n}=t;const[o]=(0,i.getGlobal)("ppLibrary").format[r].syncRead(e);return o?(delete o.note,(0,a.ok)(o)):n("CONVERTER_FAILED",r+" parsing error")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n,fetchClient:o}=r;const s=(0,i.getGlobal)("ppLibrary"),l=t.match(/pii\/([\dA-Z]+)/i);if(null==l||!l[1])return n("CONVERTER_FAILED","ScienceDirect could not find ID from URL");const c=`https://www.sciencedirect.com/sdfe/arp/cite?pii=${l[1]}&format=application/x-research-info-systems&withabstract=true`,u=await o.fetch(c,{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(!u.isOk()||!u.value.response.ok)return n("CONVERTER_FAILED","ScienceDirect export form fetch error");const{bodyText:d}=u.value,[p]=s.format.Ris.syncRead(d);return p?(delete p.note,(0,a.ok)(p)):n("CONVERTER_FAILED","ScienceDirect RIS parsing error")};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{var n;let{err:o}=r;const[,s]=null!==(n=e.match(/"spgCommon.bindDownloadData\(&quot;.+.ris&quot;,\s*&quot;([^"]+)&quot;\)"/))&&void 0!==n?n:[];if(!s)return o("CONVERTER_FAILED","SciencePublishingGroup cannot find RIS content");const l=s.replace(/\\r\\n/g,"\r\n").replace(/\\\//g,"/"),[c]=(0,i.getGlobal)("ppLibrary").format.Ris.syncRead(l);return c?(0,a.ok)(c):o("CONVERTER_FAILED","SciencePublishingGroup parsing error")};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{err:a,fetchClient:s,messageReporter:l}=r;const{rootElement:c}=(0,o.default)(e,l),u=c.find("#txGid").val(),d=c.find("#currentRecordPageEID").val();if(!u||!d)return a("CONVERTER_FAILED","Scopus IDs not found");let p;try{p=new URL(t)}catch(e){return a("CONVERTER_FAILED","Scopus invalid URL")}const m=p.origin,h=new URL(`onclick/export.uri?oneClickExport=%7b%22Format%22%3a%22RIS%22%2c%22View%22%3a%22FullDocument%22%7d&origin=recordpage&eid=${d}&zone=exportDropDown&outputType=export&txGid=${u}`,m).toString(),g=await s.fetch(h);if(!g.isOk()||!g.value.response.ok)return a("CONVERTER_FAILED","Scopus fetch error");const{bodyText:f}=g.value,[b]=(0,n.getGlobal)("ppLibrary").format.Ris.syncRead(f);return b?(delete b.note,(0,i.ok)(b)):a("CONVERTER_FAILED","Scopus parsing error")};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);const n=(e,t,r)=>e.doi||null!=e&&e.title&&"[No title]"!==e.title?(0,a.ok)(e):r("CONVERTER_FAILED","SemanticScholar - "+t);var o=async(e,t,r)=>{const[a]=(0,i.getGlobal)("ppLibrary").format.HTML.syncRead(e),o=t.match(/[^/]+$/g);return null!=o&&o[0]?(async(e,t,r)=>{let{err:a,fetchClient:o}=r;const s=(0,i.getGlobal)("ppLibrary"),l=await o.fetch("http://api.semanticscholar.org/v1/paper/"+e);if(!l.isOk()||!l.value.response.ok)return n(t,"Error fetching from API",a);const{bodyText:c}=l.value,[u]=s.format.SemanticScholar.syncRead(c);return u&&s.Utils.merge(t,u),n(t,"Error parsing pub",a)})(o[0],a,r):n(a,"No SemanticScholar API URL",r.err)};t.default=o},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{err:a,messageReporter:s}=r;const l=(0,n.getGlobal)("ppLibrary"),c={pubtype:"PP_ARTICLE",title:"",author:[],id_list:[]},u=(e,t,r)=>{const a=e.match(t);if(null!=a&&a[1]){const[,e]=a;c[r]=e}},d=(e,t)=>{c.published||(c.published={}),c.published={[e]:t,...c.published},delete c[e]},{rootElement:p,$:m}=(0,o.default)(e,s),h=p.find("input");for(let e=0;e<h.length;e+=1){const t=m(h[e]).attr("name"),r=m(h[e]).attr("value")||"";switch(t){case"title":c.journal=r;break;case"genre":"article"===r&&(c.pubtype="PP_ARTICLE"),"book"===r&&(c.pubtype="PP_BOOK");break;case"issn":c.issn=r;break;case"eissn":c.issn_alt=r;break;case"date":c.published=l.library.Date.parseDate(r);break;case"issue":c.issue=r;break;case"volume":c.volume=r;break;case"pages":c.pages=r;break;case"spage":c.startpage=r;break;case"epage":c.endpage=r;break;case"atitle":c.title=r;break;case"pub":c.publisher=r;break;case"SS_authors":c.authorString=r}}const g=decodeURIComponent(t);if(c.pmid||u(g,/pmid:([^\b&]+)/,"pmid"),c.pages||u(g,/pages=([^\b&]+)/,"pages"),c.pages||u(g,/spage=([^\b&]+)/,"startpage"),c.pages||u(g,/epage=([^\b&]+)/,"endpage"),c.title||u(g,/atitle=([^\b&]+)/,"title"),c.journal||u(g,/jtitle=([^\b&]+)/,"journal"),c.volume||u(g,/volume=([^\b&]+)/,"volume"),c.issue||u(g,/issue=([^\b&]+)/,"issue"),c.issn||u(g,/issn=([^\b&]+)/,"issn"),c.issn_alt||u(g,/eissn=([^\b&]+)/,"issn_alt"),c.isbn||u(g,/issn=([^\b&]+)/,"isbn"),c.doi||u(g,/info:doi\/([^\b&]+)/,"doi"),c.authorString||u(g,/au=([^\b&]+)/,"authorString"),c.published||(u(g,/date=([^\b&]+)/,"numDate"),c.numDate&&8===c.numDate.length&&(c.year=c.numDate.substring(0,4),c.month=c.numDate.substring(4,6),c.day=c.numDate.substring(6))),c.year&&d("year",c.year),c.month&&d("month",c.month),c.day&&d("day",c.day),c.startpage&&!c.pages&&(c.pages=c.endpage?`${c.startpage}-${c.endpage}`:c.startpage),c.authorString){const e=c.authorString.trim().replace(/ \w+$/,"");c.author=[l.library.Author.parseAuthor(e)]}return c.journal&&/(\w\+\w)+/.test(c.journal)&&(c.journal=c.journal.replace(/\+/g," ").trim()),delete c.startpage,delete c.endpage,delete c.numDate,delete c.authorString,l.library.Publication.autoCleanLegalDocs(c),c.title||c.pmid||c.doi?(0,i.ok)(c):a("CONVERTER_FAILED","SerialSolutions parsing failed")};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{err:a,messageReporter:s}=r;const l=(0,n.getGlobal)("ppLibrary"),c={pubtype:"PP_ARTICLE",title:"",id_list:[],author:[]},u=(e,t,r)=>{const a=e.match(t);if(null!=a&&a[1]){const[,e]=a;c[r]=e.trim()}},d=(e,t)=>{c.published||(c.published={}),c.published={[e]:t,...c.published},delete c[e]},{rootElement:p,$:m}=(0,o.default)(e,s);let h=p.find("th");h&&h.length||(h=m(e).find("td"));for(let e=0;e<h.length;e+=1){const t=m(h[e]).text();if("Title:"===t)c.title=m(h[e]).next().text();else if("Source:"===t){const t=m(h[e]).next().text().replace(/([\n\r\t])/g,"").replace(/\s\s+/g," ");u(t,/([\w\s,&]+)/,"journal"),u(t,/yr:(\d+)/,"year"),u(t,/vol:(\d+)/,"volume"),u(t,/iss:(\d+)/,"issue"),u(t,/pg:(\d+\s-\d+)/,"pages"),u(t,/\[(\d{4}-\d{4})\]/,"issn"),u(t,/\]([\w\s,&]+)\s+\w+:/,"authorString")}}const g=decodeURIComponent(t.replace(/%20&%20/g," and ").replace(/\+/g," "));if(c.pmid||u(g,/pmid:([^\b&]+)/,"pmid"),c.pages||u(g,/pages=([^\b&]+)/,"pages"),c.pages||u(g,/spage=([^\b&]+)/,"startpage"),c.pages||u(g,/epage=([^\b&]+)/,"endpage"),c.title||u(g,/atitle=([^\b&]+)/,"title"),c.journal||u(g,/jtitle=([^\b&]+)/,"journal"),c.volume||u(g,/volume=([^\b&]+)/,"volume"),c.issue||u(g,/issue=([^\b&]+)/,"issue"),c.issn||u(g,/issn=([^\b&]+)/,"issn"),c.issn_alt||u(g,/eissn=([^\b&]+)/,"issn_alt"),c.isbn||u(g,/issn=([^\b&]+)/,"isbn"),c.doi||u(g,/info:doi\/([^\b&]+)/,"doi"),/\w+\s+\w+/.test(c.authorString)||u(g,/au=([^\b&]+)/,"authorString"),/\w+\s+\w+/.test(c.authorString)||u(g,/au::([^"\b&]+)/,"authorString"),c.published||(u(g,/date=([^\b&]+)/,"numDate"),c.numDate&&8===c.numDate.length&&(c.year=c.numDate.substring(0,4),c.month=c.numDate.substring(4,6),c.day=c.numDate.substring(6))),c.year&&d("year",c.year),c.month&&d("month",c.month),c.day&&d("day",c.day),c.startpage&&!c.pages&&(c.pages=c.endpage?`${c.startpage}-${c.endpage}`:c.startpage),c.authorString){const e=c.authorString.trim();c.author=[l.library.Author.parseAuthor(e)]}return delete c.authorString,delete c.startpage,delete c.endpage,delete c.numDate,l.library.Publication.autoCleanLegalDocs(c),c.title||c.pmid||c.doi?(0,i.ok)(c):a("CONVERTER_FAILED","SFX failed to parse data")};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=async(e,t,r)=>{let{err:n,fetchClient:o}=r,[s]=(0,i.getGlobal)("ppLibrary").format.SIRSI.syncRead(e);if(s.title)return(0,a.ok)(s);const l=await o.fetch(t,{method:"POST"});if(!l.isOk()||!l.value.response.ok)return n("CONVERTER_FAILED","SIRSI POST request error");const{bodyText:c}=l.value;return[s]=(0,i.getGlobal)("ppLibrary").format.SIRSI.syncRead(c),s.title?(0,a.ok)(s):n("CONVERTER_FAILED","SIRSI parsing error")};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{err:a,fetchClient:s,messageReporter:l}=r;const c=(0,n.getGlobal)("ppLibrary");let[u]=c.format.HTML.syncRead(e);return u?(/twitter\.com/i.test(t)?u=await(async(e,t,r,a)=>{const i={...e},s=(0,n.getGlobal)("ppLibrary");if(i.pubtype="PP_WEBSITE",i.booktitle="Twitter",i.kind="Tweet",/twitter\.com\/.*\/status/.test(t)){const e=await r.fetch("https://publish.twitter.com/oembed?url="+encodeURIComponent(t));if(!e.isOk()||!e.value.response.ok)return i;try{const t=JSON.parse(e.value.bodyText);if(t.author_name){let e,r=t.author_name;r=r.replace(/MPP\b/i,""),r=r.replace(/MP\b/i,""),r=r.trim(),e=/ of | for |[A-Z]{3}/.test(r)?{collective:r}:s.library.Author.parseAuthor(r,{familyNameFirst:!1}),i.author=[e]}if(t.author_url&&(i.socialmedia_handle=t.author_url.split("/").pop()),t.html){const{rootElement:e}=(0,o.default)(t.html,a),r=e.find("p").first().text();r&&(i.title=r.replace(/pic\.twitter/," pic.twitter").replace(/(\S)(http)/i,"$1 $2"));const n=e.find("a").last().text().trim().replace(/\d+:\d+\s?[AP]?M?/,"").replace(/\s*-\s*/,"");n&&(i.published=s.library.Date.parseDate(n))}}catch(e){}}return i})(u,t,s,l):/instagram\.com/i.test(t)&&(u=((e,t)=>{const r={...e},a=(0,n.getGlobal)("ppLibrary");r.pubtype="PP_WEBSITE",r.booktitle="Instagram",r.genre="Instagram photo",delete r.abstract;const i=t.split(/\n/).filter(e=>/window\._sharedData\s*=\s*/.test(e)).map(e=>e.replace(/(.*window\._sharedData\s*=\s*)([^<>]+)(;<\/script>.*)/,"$2")).join();try{var o,s,l,c;const e=null===(o=JSON.parse(i).entry_data)||void 0===o||null===(s=o.PostPage)||void 0===s||null===(l=s[0])||void 0===l||null===(c=l.graphql)||void 0===c?void 0:c.shortcode_media;if(e){var u,d,p,m;if(null!=e&&e.owner){const{username:t,full_name:i}=e.owner;if(t&&(r.socialmedia_handle=t),i){const e=a.library.Author.parseAuthor(i,{familyNameFirst:!1});r.author=[e]}}const t=null===(u=e.edge_media_to_caption)||void 0===u||null===(d=u.edges)||void 0===d||null===(p=d[0])||void 0===p||null===(m=p.node)||void 0===m?void 0:m.text;if(t&&(r.title=t),e.taken_at_timestamp){const t=new Date(1e3*e.taken_at_timestamp),a=t.getDate().toString(),i=(t.getMonth()+1).toString(),n=t.getFullYear().toString();r.published={day:a,month:i,year:n}}e.is_video&&(r.genre="Instagram video")}}catch(e){}return r})(u,e)),(0,i.ok)(u)):a("CONVERTER_FAILED","SocialMedia - HTML parsing error for meta-tags")};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{var a;let{err:s,messageReporter:l}=r;if(!/springer\.com\/us\/book/i.test(t))return s("CONVERTER_FAILED","SpringerBook parsing error");const c=(0,n.getGlobal)("ppLibrary"),u={title:"NO_TITLE",id_list:[],pubtype:"PP_BOOK",url:[t]},{rootElement:d}=(0,o.default)(e,l),p=d.find('meta[name="citation_doi"]');p.length&&(u.doi=p.attr("content"));const[,m]=null!==(a=e.match(/<script type="application\/ld\+json">(.+?)<\/script>/is))&&void 0!==a?a:[];if(m){const e=JSON.parse(m);u.title=e.name||"NO_TITLE",Array.isArray(e.author)&&(u.authors=e.author.map(e=>{let{name:t}=e;return c.library.Author.parseAuthor(t)})),e.publisher&&(u.publisher=e.publisher.name),e.isbn&&(u.isbn=e.isbn.replace(/-/g,"")),e.numberOfPages&&(u.num_pages=e.numberOfPages.toString()),e.description&&(u.abstract=e.description),e.copyrightYear&&(u.published={year:e.copyrightYear})}if("NO_TITLE"===u.title)return s("CONVERTER_FAILED","Error parsing Springer Book HTML");for(const e of Object.keys(u))u[e]||delete u[e];return(0,i.ok)(u)};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{err:a,messageReporter:s}=r;const[l]=(0,n.getGlobal)("ppLibrary").format.HTML.syncRead(e);if(!l)return a("CONVERTER_FAILED","SSRN parsing error");const{rootElement:c}=(0,o.default)(e,s);return l.pubtype="PP_PREPRINT",l.journal="Social Science Research Network",l.abstract=c.find("div.abstract-text > p").text().replace(/\s+/g," "),(0,i.ok)(l)};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{var a,s;let{err:l,fetchClient:c,messageReporter:u}=r;const d=(0,n.getGlobal)("ppLibrary"),p=null===(a=t.match(/entries\/(.*)\//))||void 0===a?void 0:a[1];if(!p)return l("CONVERTER_FAILED","StanfordEncylopediaOfPhilosophy cannot find entry ID");const m="https://plato.stanford.edu/cgi-bin/encyclopedia/archinfo.cgi?entry="+p,h=await c.fetch(m);if(!h.isOk()||!h.value.response.ok)return l("CONVERTER_FAILED","StanfordEncylopediaOfPhilosophy unable to fetch bib file");const g=h.value.bodyText,{rootElement:f}=(0,o.default)(g,u),b=f.find("pre").text(),[y]=d.format.Bibtex.syncRead(b);return y&&y.title?(y.pubtype="PP_ENCYCLOPEDIA_ARTICLE",y.booktitle=null===(s=y.booktitle)||void 0===s?void 0:s.replace(/{/g,"").replace(/}/g,""),y.title=y.title.replace(/[{}]/g,""),(0,i.ok)(y)):l("CONVERTER_FAILED","StanfordEncylopediaOfPhilosophy Bibtex parsing failed")};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{messageReporter:a}=r;const{$:s,rootElement:l}=(0,o.default)(e,a),c=(0,n.getGlobal)("ppLibrary"),u={title:"NO_TITLE",pubtype:"PP_PATENT",author:[],published:{},url:[t],id_list:[]};return l.find('form[name="biblio"] input').each((e,t)=>{var r;const a=null===(r=s(t).attr("name"))||void 0===r?void 0:r.toLowerCase(),i=s(t).attr("value");if(i)if("number"===a)u.patent_number=i;else if("year"===a)u.published={...u.published,year:i};else if("title"===a)u.title=i;else if("assignee"===a)u.assignee=i;else if("abstract"===a)u.abstract=i;else if("url"===a)u.url||(u.url=[]),Array.isArray(u.url)||(u.url=[u.url]),u.url=[...u.url,i];else if("author"===a){const e=i.replace(/\([^)]+\)/g,"").split(/;/),t=u.author||[],r=e.map(e=>c.library.Author.parseAuthor(e,{familyNameFirst:!0}));u.author=[...t,...r]}}),(0,i.ok)(u)};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{err:a,fetchClient:s,messageReporter:l}=r;const c=(0,n.getGlobal)("ppLibrary"),[u]=c.format.HTML.syncRead(e);if(!u)return a("CONVERTER_FAILED","VideoPortal - Error parsing HTML for meta-tags.");let d={title:"NO_TITLE",id_list:[]};return/vimeo[-.]com/.test(t)?d=((e,t,r)=>{const a=(0,n.getGlobal)("ppLibrary"),i={...t};i.publisher="Vimeo";const s=e.match(/window\.vimeo\.clip_page_config\s+=\s+(.*)};/);if(null!=s&&s[1])try{var l,c,u,d;const e=JSON.parse(s[1]+"}");if(null!==(l=e.clip)&&void 0!==l&&l.title&&(i.title=e.clip.title),null!==(c=e.clip)&&void 0!==c&&c.description){const{rootElement:t}=(0,o.default)(e.clip.description,r);i.abstract=t.text()}null!==(u=e.clip)&&void 0!==u&&u.uploaded_on&&(i.published=a.library.Date.parseDate(e.clip.uploaded_on)),null!==(d=e.owner)&&void 0!==d&&d.display_name&&(i.author=[a.library.Author.parseAuthor(e.owner.display_name,{familyNameFirst:!1})])}catch(e){}return i})(e,u,l):/youtube[-.]com/.test(t)&&(d=await(async(e,t,r)=>{const a=(0,n.getGlobal)("ppLibrary"),i={...r};i.publisher="Youtube",i.pubtype="PP_VIDEO";const o=await t.fetch(`https://www.youtube.com/oembed?url=${encodeURIComponent(e)}&format=json`);if(o.isOk()&&o.value.response.ok)try{const e=JSON.parse(o.value.bodyText);e.title&&(i.title=e.title),e.author_name&&(i.author=[a.library.Author.parseAuthor(e.author_name,{familyNameFirst:!1})]),e.author_url&&(i.socialmedia_handle=e.author_url.split("/").pop())}catch(e){}return i.url||(i.url=[e]),i})(t,s,u)),d.kind="Online Video",(0,i.ok)(d)};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=async(e,t,r)=>{let{fetchClient:a,messageReporter:s}=r;const{rootElement:l,$:c}=(0,o.default)(e,s),u=t.replace(/^(https?:\/\/[^/]+)(\/.+)/,"$1"),d=l.find("#firstHeading").text();let p=l.find("#t-permalink a").attr("href");p?/^https?:/.test(p)||(p=u+p):p=t;let m="";const h=l.find("div.mw-parser-output > p");for(let e=0;e<h.length;e+=1){let t=c(h[e]);t=c(t).hasClass("mw-empty-elt")?c(t).next():t;const r=c(t).text();if(!/^coordinates/i.test(r.trim())){m=r;break}}const g={title:d,pubtype:"PP_WEBSITE",kind:"Wikipedia",author:[{collective:"Wikipedia contributors"}],booktitle:"Wikipedia, The Free Encyclopedia",abstract:m,accessed:(new Date).getTime(),url:[p],id_list:[]};let f=l.find("#t-cite a").attr("href");if(f&&!/^https?:/.test(f)&&(f=new URL(f,u).toString()),f){const e=await a.fetch(f);if(e.isOk()&&e.value.response.ok){const{bodyText:t}=e.value,r=c(t).find("span.Z3988");if(null!=r&&r[0]){const e=c(r[0]).attr("title")||"",[t]=(0,n.getGlobal)("ppLibrary").format.ContextObject.doRead(e);t&&(g.published=t.published)}}}return(0,i.ok)(g)};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(541));var s=async(e,t,r)=>{let{err:a}=r;const s=(0,n.getGlobal)("jQuery"),l=new o.default((0,n.getGlobal)("ppLibrary"),s),[c]=l.doRead(e);return c?(0,i.ok)(c):a("CONVERTER_FAILED","WoK parsing error")};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(685));var s=async(e,t,r)=>{let{err:a}=r;const s=(0,n.getGlobal)("ppLibrary"),l=new o.default(s),[c]=l.doRead(e);return c?(0,i.ok)(c):a("CONVERTER_FAILED","WorldCat parsing error")};t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(174);t.default=class{constructor(e){(0,i.default)(this,"name","WorldCat"),this.ppLibrary=e}setPubtype(e,t){if("Artcl"===t.props.pageProps.record.specificFormat)return{...e,pubtype:"PP_ARTICLE"};if("Chptr"===t.props.pageProps.record.specificFormat){const t={...e,pubtype:"PP_BOOK_CHAPTER",booktitle:e.journal};return delete t.journal,t}return"Book"===t.props.pageProps.record.generalFormat?"PrintBook"===t.props.pageProps.record.specificFormat?{...e,pubtype:"PP_BOOK"}:"Digital"===t.props.pageProps.record.specificFormat?{...e,pubtype:"PP_BOOK",kind:"Electronic Book"}:"thsis"===t.props.pageProps.record.specificFormat?{...e,pubtype:"PP_THESIS"}:{...e,pubtype:"PP_BOOK"}:"Music"===t.props.pageProps.record.generalFormat?{...e,pubtype:"PP_AUDIO",medium:t.props.pageProps.record.specificFormat}:"Encyc"===t.props.pageProps.record.generalFormat?{...e,pubtype:"PP_ENCYCLOPEDIA_ARTICLE"}:{...e,pubtype:"PP_MISC"}}parseAPIResponse(e){var t,r;if(!e.props.pageProps.record.title)return[];let a={pubtype:"PP_BOOK",title:"",id_list:[]};const[i,o]=e.props.pageProps.record.title.split(":").map(e=>e.trim());a.title=this.ppLibrary.String.toTitleCase(i),o&&(a.subtitle=this.ppLibrary.String.toTitleCase(o));for(const t of e.props.pageProps.record.contributors)if("nonPersonalName"in t&&(a.author=[...a.author||[],{collective:t.nonPersonalName.text}]),"firstName"in t&&"secondName"in t){var s;const e="edt"===(null===(s=t.relatorCodes)||void 0===s?void 0:s[0])?"editor":"author";a[e]=[...a[e]||[],{first:t.firstName.text,last:t.secondName.text}]}if(a.abstract=e.props.pageProps.record.summary||e.props.pageProps.record.abstract||"",e.props.pageProps.record.publicationDate){const t=this.ppLibrary.library.Date.parseDate(e.props.pageProps.record.publicationDate);t&&t.year&&(a.published={year:t.year},t.month&&(a.published.month=t.month),t.day&&(a.published.day=t.day))}const l=e.props.pageProps.record.publisher||(null===(t=e.props.pageProps.record.publisherName)||void 0===t?void 0:t.text)||"";if(l.includes(":")){const[,e]=l.split(":").map(e=>e.trim());a.publisher=e}else a.publisher=l;if(a.address=(null===(r=e.props.pageProps.record.publicationPlace)||void 0===r?void 0:r.replace(/[[\]]/g,""))||"",e.props.pageProps.record.publication){var c,u,d,p;const[t,r,i]=e.props.pageProps.record.publication.split(",").map(e=>e.trim());a.journal=t;let n="",o="";/^\d{4}$/.test(r)||/^\d{6}$/.test(r)||/^\d{8}$/.test(r)?(n=r,o=i):(n=i,o=r),a.issue=o;const[,s,l,m]=(null===(c=n)||void 0===c?void 0:c.match(/(\d{4})?(\d{2})?(\d{2})?/))||[];null!==(u=a.published)&&void 0!==u&&u.year||!s||(a.published={...a.published,year:parseInt(s,10).toString()}),null!==(d=a.published)&&void 0!==d&&d.month||!l||(a.published={...a.published,month:parseInt(l,10).toString()}),null!==(p=a.published)&&void 0!==p&&p.day||!m||(a.published={...a.published,day:parseInt(m,10).toString()})}if(a.url=["https://www.worldcat.org/title/"+e.props.pageProps.record.oclcNumber],e.props.pageProps.record.digitialAccessAndLocations)for(const t of e.props.pageProps.record.digitialAccessAndLocations)a.url.push(t.uri);if(e.props.pageProps.record.isbns)for(const t of e.props.pageProps.record.isbns){const[e]=(0,n.extractISBNs)(t);e&&(a.isbn?a.isbn_alt||e===a.isbn||(a.isbn_alt=e):a.isbn=e)}if(e.props.pageProps.record.sourceIsbns)for(const t of e.props.pageProps.record.sourceIsbns){const[e]=(0,n.extractISBNs)(t);e&&(a.isbn?a.isbn_alt||e===a.isbn||(a.isbn_alt=e):a.isbn=e)}if(!a.isbn&&e.props.pageProps.record.isbn13){const[t]=(0,n.extractISBNs)(e.props.pageProps.record.isbn13);t&&(a.isbn?a.isbn_alt||t===a.isbn||(a.isbn_alt=t):a.isbn=t)}return e.props.pageProps.record.doi&&(a.doi=e.props.pageProps.record.doi),e.props.pageProps.record.issns&&([a.issn,a.issn_alt]=e.props.pageProps.record.issns),!a.issn&&e.props.pageProps.record.sourceIssn&&(a.issn=e.props.pageProps.record.sourceIssn),e.props.pageProps.record.edition&&(a.edition=e.props.pageProps.record.edition),e.props.pageProps.record.series&&(a.series=e.props.pageProps.record.series),a=this.setPubtype(a,e),this.ppLibrary.library.Publication.autoClean(a),a.isbn===a.isbn_alt&&delete a.isbn_alt,[a]}doRead(e){const[,t]=e.match(/<script id="__NEXT_DATA__" type="application\/json">(.*?)<\/script>/s)||[];if(!t)return[];try{const e=JSON.parse(t);return this.parseAPIResponse(e)}catch(e){return[]}}getName(){return this.name}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(452),i=r(4),n=r(451);const o={JMB:{rules:[{steps:[{fn:"JqMeta"}]}]},Longdom:{rules:[{steps:[{fn:"JqMeta"}]}]},ChineseMedicalAssociation:{rules:[{steps:[{rewrite:["(.*)(/resource_static.jspx)(.*)","$1/pdfAttachment.jspx$3"]}]}]},"Journal of the Chinese Academy of Medical Sciences":{rules:[{steps:[{fn:"JqMeta"}]}]},TUBITAK:{rules:[{steps:[{fn:"JqMeta"}]}]},AKJournals:{rules:[{steps:[{fn:"JqMeta"}]}]},Brieflands:{rules:[{steps:[{fn:"JqMeta"}]}]},"Giornale Italiano di Cardiologia":{rules:[{steps:[{fn:"JqMeta"}]}]},"Institute of Biomedical Chemistry":{rules:[{steps:[{fn:"JqMeta"}]}]},JCP:{rules:[{steps:[{fn:"JqMeta"}]}]},MinervaMedica:{rules:[{steps:[{match:'href="([^"]+)">PDF'},{match:'href="([^"]+\\.pdf)"'}]}],referer:!0},ProblemsOfVirology:{rules:[{steps:[{fn:"JqMeta"}]}]},SharedSciencePublisher:{rules:[{steps:[{match:'href="([^"]+\\.pdf)"'}]}]},Viamedica:{rules:[{steps:[{fn:"JqMeta"}]}]},SciDoc:{rules:[{steps:[{match:'href="([^"]+\\.pdf)"'}]}]},OAEPublish:{rules:[{steps:[{rewrite:["(.*)(/articles/)(.*)","$1/articles/download/$3"]}]}]},"Beijing Renhe Information Technology":{rules:[{steps:[{match:'name="citation_id" content="([^"]+)"'},{rewrite:[".*/([^/]+)$","https://www.besjournal.com/article/exportPdf?id=$1"]}]}]},XMLinkHub:{rules:[{steps:[{fn:"JqMeta"}]}]},KAMJE:{rules:[{steps:[{fn:"JqMeta"}]}]},"Bentus Journals Systems":{rules:[{steps:[{fn:"JqMeta"}]}]},"Singapore Medical Journal":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},SciencePublishingGroup:{rules:[{steps:[{rewrite:["(.*)(/article/)(.*)","$1/pdf/$3"]}]}]},Jove:{rules:[{steps:[{match:'href\\s*=\\s*"(/pdf/\\d+)"'}]}]},"Hong Kong Medical Journal":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},"Veterinary World":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},"Histology and Histopathology":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},"The Ukranian BioChemical Journal":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},"Electronic Physician":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},BioProtocol:{rules:[{steps:[{rewrite:["(.*)(/bpdetail\\?id=)(\\d+)(.*)","$1/pdf/Bio-protocol$3.pdf"]}]}]},ProBiologists:{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},"European Journal of Rheumatology":{rules:[{steps:[{match:'href\\s*=\\s*"(/en/[^"]+)" target="_blank"'}]}]},BioInformation:{rules:[{steps:[{rewrite:["(.*).htm","$1.pdf"]}]}]},ZoologicalStudies:{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},"West Indian Medical Journal":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},Hormones:{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},"West China Journal of Stomatology":{rules:[{steps:[{match:"href=\"#1\" onclick=\"lsdy1\\('PDF','(\\d+)'"},{rewrite:["(.+)","http://www.hxkqyxzz.net/CN/article/downloadArticleFile.do?attachType=PDF&id=$1"]}]}]},FTB:{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},SciEngine:{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},XHPPublishing:{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},"Caister Academic Press":{rules:[{steps:[{rewrite:["(.+).html","$1.pdf"]}]}]},Actavia:{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},"Polish Archives of Internal Medicine":{rules:[{steps:[{rewrite:["(.*)/?","$1/pdf"]}]}]},"BioMed Central":{rules:[{steps:[{fn:"JqMeta"}]}]},JournalAgent:{rules:[{steps:[{match:'href\\s*=\\s*"?([^"]+download_fulltext\\.asp[^">]+)"?'}]}]},IEEE:{rules:[{steps:[{match:'"pdfUrl"\\s*:\\s*"(/stamp/stamp.jsp[^"]+)"'},{match:'frame\\s+src\\s*=\\s*"([^"]+pdf[^"]+)"'}]}]},Longwoods:{rules:[{steps:[{rewrite:["(.*content/)(\\d+)","http://www.longwoods.com/product/download/code/$2"]}]}]},"IOP Publishing":{rules:[{steps:[{fn:"JqMeta"}]}]},"Touch Medical Media":{rules:[{steps:[{fn:"JqMeta"}]}]},ResearchGate:{rules:[{steps:[{match:'href="([^"]+.pdf[^"]+.)"'}]}]},CiteSeerx:{rules:[{steps:[{rewrite:["(.*type=pdf)$","$1&dummy=T"]}]},{steps:[{match:'"([^"]+type=pdf)"'}]},{steps:[{rewrite:["(https?://[^/]+).*doi=([^&]+)","$1/viewdoc/download?repid=rep1&type=pdf&doi=$2"]}]}]},Ovid:{rules:[{steps:[{fn:"Ovid"}]}]},ProQuest:{rules:[{steps:[{rewrite:["(.+docview/\\d+)([^\\d]*.*)","$1/fulltextPDF"]},{match:'id\\s*=\\s*"embedded-pdf"\\s+src\\s*=\\s*"([^"]+)"'}]},{steps:[{match:'id\\s*=\\s*"embedded-pdf"\\s+src\\s*=\\s*"([^"]+)"'}]}]},"Elsevier Reader":{rules:[{steps:[{fn:"ElsevierReader"},{fn:"Elsevier"}]}]},Elsevier:{rules:[{steps:[{fn:"JqMeta"}]}]},"Science Direct":{rules:[{steps:[{fn:"Elsevier"}]}]},ElsevierHub:{rules:[{steps:[{match:'pdfurl\\s*=\\s*"([^"]+)"'}]},{steps:[{match:"window\\.open\\(\\'(http://www.sciencedirect.com/science.*?/sdarticle.pdf)"}]},{steps:[{match:'rel="canonical"\\s+href="(https?://www.sciencedirect.com/science/article/[^"]+)"'}]},{steps:[{match:'value="(http://www\\.sciencedirect\\.com/science\\?_ob=GatewayURL.*?)"'},{match:"window\\.open\\(\\'(http://www.sciencedirect.com/science.*?/sdarticle.pdf)"}]},{steps:[{match:'.*action="(http.*value="\\d+").*'},{rewrite:["(.*md5=[^%]+)(%.*value=%22)(\\d+)(%.*)","$1&dept=$3"]},{match:"window\\.open\\(\\'(http://www.sciencedirect.com/science.*?/sdarticle.pdf)"}]}]},Cochrane:{rules:[{steps:[{fn:"JqMeta"},{match:'href\\s*=\\s*"([^"]+)">Download PDF'}]}]},"ACL Anthology":{rules:[{steps:[{fn:"JqMeta"}]}]},"Public Library of Science":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+=printable)"'}]},{steps:[{fn:"JqMeta"}]}]},PierOnline:{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+=pdf)"'}]}]},AEPress:{rules:[{steps:[{match:'href\\s*=\\s*"([^"]*download_file\\.php[^"]*product_id[^"]+)"'}]}]},OpenLibHums:{rules:[{steps:[{match:'href="([^"]+download/)">Download PDF'}]}]},"ARVO journals":{referer:!0,rules:[{steps:[{fn:"JqMeta"}]}]},"NIHR Journals Library":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+document/download[^"]+).*/'}]}]},CORE:{referer:!0,rules:[{steps:[{match:'href="(https?://arxiv\\.org[^"]+)"'},{rewrite:["(.*)(/abs/|/pdf/)(.*)","$1/pdf/$3"]}]},{steps:[{rewrite:["(.+)(/display/|/reader/|/works/)(.+)","$1/download/pdf/$3.pdf"]}]},{steps:[{match:'div href="([^"]+)" class="card-dropdown_link[^"]+"'}]}]},Wiley:{rules:[{steps:[{fn:"JqMeta"},{rewrite:["(.*)(/pdf/)(.*)","$1/pdfdirect/$3"]}]},{steps:[{rewrite:["(.+)(/epdf/)(.+)","$1/pdf/$3"]}]}]},"Springer Link":{rules:[{steps:[{match:'name="citation_pdf_url"\\s*content="([^"]+)"'}]},{steps:[{match:'abstract-actions-download-protocol-pdf-link[^<>]+href="([^"]+\\.pdf)"'}]},{steps:[{match:'action-bar-download-book-pdf-link[^<>]+href="([^"]+\\.pdf)"'}]},{steps:[{match:'href="([^"]+\\.pdf)".+gtm-bookpdf-link'}]},{steps:[{match:'href="([^"]+\\.pdf)".+test-bookpdf-link'}]},{steps:[{match:'href="([^"]+\\.pdf\\?pdf=button)".+c-pdf-download__link"'}]}]},"China National Knowledge Infrastructure":{rules:[{steps:[{match:'name="pdfDown" href="([^"]+pdfdown)[^"]+"'}]}]},CEDRAM:{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+/article/[^"]+\\.pdf)"'}]}]},"International Press":{rules:[{steps:[{fn:"JqMeta"}]}]},"Springer Nature Experiments":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+/pdf/[^"]+.pdf)"'}]}]},PenSoft:{rules:[{steps:[{rewrite:["articles\\.php\\?id=(\\d+)","lib/ajax_srv/article_elements_srv.php?action=download_pdf&item_id=$1"]}]}]},ArXiv:{rules:[{steps:[{rewrite:["(.+/pdf/.+)","$1?t="]}]},{steps:[{fn:"JqMeta"}]}]},NUMDAM:{rules:[{steps:[{rewrite:["(.*)(item|article)(.*)","$1article$3.pdf"]}]},{steps:[{match:'href\\s*=\\s*"([^"]+.pdf)"\\s*>\\s*pdf'}]}]},"Mathematical Sciences Publishers":{rules:[{steps:[{match:'"([^"]+\\.pdf)"'}]}]},"Institute of Mathematics Polish Academy of Sciences":{rules:[{steps:[{fn:"JqMeta"}]}]},"Project Euclid":{referer:!0,rules:[{steps:[{match:'href="(/journalArticle/Download[^"]+)"'}]}]},"Project Muse":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+/pdf)"\\s*>\\s*Download'}]}]},"IGI Global":{rules:[{steps:[{fn:"JqMeta"}]}]},"International Medical Press":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+serveFile[^"]+)"\\s*>\\s*PDF'}]}]},Tidsskrift:{rules:[{steps:[{match:'href="([^"]+\\.pdf)".*title\\s*=\\s*"Download PDF'}]}]},CDC:{rules:[{steps:[{match:'href\\s*=\\s*"([^"]*pdfs?/[^"]+pdf)"'}]}]},"Nature Publishing Group":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"[^<>]+class\\s*=\\s*"[^"]*c-pdf-download__link"'}]},{steps:[{match:'class\\s*=\\s*"c-pdf-download__link"[^<>]+href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},"Google Patents":{rules:[{steps:[{fn:"JqMeta"}]}]},"Free Patents Online":{rules:[{steps:[{match:"['\"](\\S+\\.pdf)"},{match:"[\"']([^\"']+pdf.sumobrain.com[^\"']+)[\"']"}]}]},"PubMed Central":{rules:[{steps:[{rewrite:["(.+europepmc.+/MED/)(\\d+)","https://www.ncbi.nlm.nih.gov/pmc/articles/pmid/$2/pdf/?tool=EBI"]}]},{steps:[{rewrite:["(.+europepmc.+/articles/PMC\\d+)","$1?pdf=render"]}]},{steps:[{match:'href\\s*=\\s*"([^"]+pdf)"\\s+class\\s*=\\s*"int-view"'}]},{steps:[{match:'id="article--side-menu--item-full-text-links" href="([^"]+)"'}]}]},"Portland Press":{rules:[{steps:[{fn:"JqMeta"}]}]},PubFactory:{rules:[{steps:[{fn:"JqMeta"}]}]},Emerald:{rules:[{steps:[{rewrite:["(.+doi.+/full/)(html.*)","$1pdf"]}]}]},"Ingenta Edify":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+deliver[^"]+pdf[^"]+)"'}]},{steps:[{match:'action\\s*=\\s*"([^"]+deliver[^"]+pdf[^"]+)"'}]}]},"Atypon PDFDIRECT":{rules:[{steps:[{rewrite:["(.+)(/doi/abs/|/doi/full/|/doi/pdf/|/doi/)(10\\..+)","$1/doi/pdfdirect/$3?t="]}]},{steps:[{fn:"JqMeta"},{rewrite:["(.*)(/pdf/)(.*)","$1/pdfdirect/$3"]}]}]},"Atypon RIS":{rules:[{steps:[{rewrite:["(doi/abs|doi/full|doi/pdf|doi/epdf|doi/epub)","doi/pdf"]}]},{steps:[{rewrite:["doi/(10.*)","doi/pdf/$1"]}]}]},"Atypon BibTeX":{rules:[{steps:[{rewrite:["(doi/abs|doi/full|doi/pdf|doi/epdf|doi/epub|doi/reader)","doi/pdf"]}]},{steps:[{rewrite:["doi/","doi/pdf/"]}]}]},"Atypon PDFPLUS":{rules:[{steps:[{rewrite:["(doi/abs|doi/full|doi/pdf)","doi/pdfplus"]}]},{steps:[{match:'href="(/doi/pdfplus[/\\w%\\-\\.]+)'}]}]},Atypon:{rules:[{steps:[{fn:"JqMeta"}]},{steps:[{match:'href="([^"]+article-pdf[^"]+)"'}]},{steps:[{rewrite:["(.+)(doi/abs|doi/full|doi/pdfdoi/epdf)(.+)","$1doi/pdf$3?t="]}]},{steps:[{rewrite:["(.*)(doi/10\\.)(.*)","$1doi/pdf/10.$3"]}]},{steps:[{rewrite:["(.+)(doi/epdf)(.+)","$1doi/pdf$3"]}]},{steps:[{match:'href\\s*=\\s*"([^"]*cgi/reprint/[^"]+)".*\\(PDF\\)'},{rewrite:["(.*)","$1.pdf"]}]},{steps:[{match:'href="([^"]*/doi/pdf[/\\w%\\-\\.]+)'}]}]},"De Gruyter":{rules:[{steps:[{rewrite:["(.+/document/doi/10.\\d+/.+/)(html)","$1pdf"]}]},{steps:[{fn:"JqMeta"}]}]},"Highwire BMJ":{rules:[{steps:[{fn:"JqMeta"}]},{steps:[{match:'content\\s*=\\s*"([^"]+\\.pdf\\+html)"'},{match:'href\\s*=\\s*"([^"]+/filestream/[^"]+\\.pdf)"'}]}]},Highwire:{rules:[{steps:[{fn:"JqMeta"}]}]},"Oxford Academic":{rules:[{steps:[{fn:"JqMeta"}]}]},"Oxford Handbooks":{rules:[{steps:[{rewrite:["(.*)","$1?print=pdf"]}]}]},JStage:{rules:[{steps:[{match:'(/article/\\S*?/_pdf)"'}]}]},"Spandidos Publication":{rules:[{steps:[{fn:"JqMeta"}]}]},"Medknow Publications":{rules:[{steps:[{rewrite:["(.*)","$1;type=2"]},{rewrite:["article.asp","downloadpdf.asp"]},{match:"(temp/\\S*?\\.pdf)"}]}]},Hindawi:{rules:[{steps:[{match:'"(\\S+downloads\\S+\\.pdf)"'}]}]},"European Review":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+wp-content[^"]+\\.pdf)"'}]}]},EUDL:{rules:[{steps:[{match:'content\\s*=\\s*"([^"]+/pdf/[^"]+)"'}]}]},"Oncology Nursing Society":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+/download)"'}]}]},"ACM Queue":{rules:[{steps:[{rewrite:["(.*)detail(.*)","$1citation$2"]}]}]},"Association for Computing Machinery":{rules:[{steps:[{match:'a\\s+href\\s*=\\s*"([^"]+)"\\s+title\\s*=\\s*"PDF"'}]}]},KoreaScience:{rules:[{steps:[{fn:"JqMeta"}]}]},"American Physical Society":{rules:[{steps:[{rewrite:["(abstract|showrefs|forward)(/\\w+/v\\d+/i\\d+/.*)","pdf$2"]}]},{steps:[{match:'href\\s*=\\s*"([^"]*/pdf[^"]+)'}]}]},"Berkeley Electronic Press":{rules:[{steps:[{match:'bepress_citation_pdf_url"\\scontent="([^"]+)"'}]},{steps:[{fn:"JqMeta"}]}]},"Theory of Computing":{rules:[{steps:[{rewrite:["(.*/articles/)(.+)(/.*)","$1/$2/$2.pdf"]}]}]},"NASA Technical Reports Server":{rules:[{steps:[{rewrite:["(.+R=|.+citations/)(\\d+)","https://ntrs.nasa.gov/api/citations/$2/downloads/$2.pdf"]}]}]},"NIPS Proceedings":{rules:[{steps:[{fn:"JqMeta"}]}]},"Impact Journals":{rules:[{steps:[{match:'href=\\s*"\\s*([^"]+)"\\s+class="file"'}]}]},"Medical Journal of Australia":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+issues[^"]+\\.pdf)"'}]}]},"IOS Press":{rules:[{steps:[{fn:"JqMeta"}]}]},"IOS Press Ebooks":{rules:[{steps:[{fn:"IOSPress"}]}]},JMLR:{rules:[{steps:[{match:'href="([^"]+\\.pdf)">'}]}]},"Academic Journals":{rules:[{steps:[{rewrite:["(.*)(/article-abstract/)(.*)","$1/article-full-text-pdf/$3"]}]},{steps:[{fn:"JqMeta"}]}]},"European Geosciences Unit":{rules:[{steps:[{fn:"JqMeta"}]}]},"European Mathematical Society":{rules:[{steps:[{fn:"JqMeta"}]}]},"Lippincott William and Wilkins":{referer:!0,rules:[{steps:[{fn:"JqMeta"}]}]},"EDP Sciences":{rules:[{steps:[{match:'citation_pdf_url"\\s+content\\s*=\\s*"([^"]+)"'}]}]},"Cambridge University Press":{rules:[{steps:[{match:'citation_pdf_url"\\s+content\\s*=\\s*"([^"]+)"'},{match:'iframe\\s+src\\s*=\\s*"([^"]+displayFulltext[^"]+)"'}]},{steps:[{match:'citation_pdf_url"\\s+content\\s*=\\s*"([^"]+)"'}]}]},"Now Publishers":{rules:[{steps:[{match:"href\\s*=\\s*'([^']+Download[^']+)'"}]}]},"MedicalJournals.se":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]*download\\.php[^"]+)"'}]}]},"International Journal of Developmental Biology":{rules:[{steps:[{fn:"JqMeta"}]},{steps:[{match:'SRC\\s*=\\s*"([^"]+)"'},{fn:"JqMeta"}]}]},"Baishideng Publishing Group":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]*DownLoadFile[^"]*)"'}]}]},"John Libbey EUROTEXT":{rules:[{steps:[{fn:"JqMeta"}]}]},ALTEX:{rules:[{steps:[{fn:"JqMeta"}]}]},"Ingenta Connect":{rules:[{steps:[{match:'class\\s*=\\s*"[^"]*pdf[^"]*"[^<>]+data-popup\\s*=\\s*\'([^\']+)\''}]}]},"International Union of Crystallography":{rules:[{steps:[{fn:"JqMeta"}]}]},"Ivyspring International Publisher":{rules:[{steps:[{match:"href\\s*=\\s*(?:'|\")([^\"']+\\.pdf)(?:'|\")"}]}]},"Prous Science":{rules:[{steps:[{match:"openpdf\\('(.*ispdf=Y)"},{match:"href\\s*=\\s*'([^']+/pdf/[^']+)'"}]},{steps:[{rewrite:["(http.*)(xml_summary_pr)(.*)","$1xml_article_pr$3&p_ispdf=Y"]}]}]},"Scientific Research Publishing":{rules:[{steps:[{fn:"JqMeta"}]}]},"Preprint Archives: HAL":{rules:[{steps:[{fn:"JqMeta"}]}]},"Preprint Archives: Handle":{rules:[{steps:[{fn:"JqMeta"}]},{steps:[{match:'href\\s*=\\s*"([^"]*.pdf)"'}]},{steps:[{fn:"JqMeta"},{rewrite:["(.+)","$1?accept=1"]}]},{steps:[{match:'href\\s*=\\s*"([^"]*bitstream[^"]*\\.pdf[^"]*)"'},{rewrite:["(.+)","$1?accept=1"]}]}]},"Astrophysics Data System":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+nph-data_query\\?bibcode=[^"]+link_type=ARTICLE[^"]+)"'}]},{steps:[{rewrite:["(.*)(/full/|/abs/)(.*)","$1/cgi-bin/nph-iarticle_query?$3&defaultprint=YES&filetype=.pdf"]}]},{steps:[{match:'frame\\s+src\\s*=\\s*"([^"]*/record/[^"]*)"'},{match:'href\\s*=\\s*"([^"]*filetype=.pdf)"'}]}]},EurekaSelect:{rules:[{steps:[{fn:"EurekaSelect"}]}]},"Cell Press":{rules:[{steps:[{fn:"JqMeta"}]}]},"American Psychological Association":{rules:[{steps:[{rewrite:["(https?://psycnet.apa.org)/(\\w+)/([\\d-]+).*","$1/fulltext/$3.pdf?dl=true"]}]},{steps:[{rewrite:["(.*)\\.html","$1.pdf"]}]},{steps:[{rewrite:["(.*)/","$1.pdf"]}]}]},"Cell Press Version Science Direct":{rules:[{steps:[{fn:"JqMeta"},{match:'href\\s*=\\s*"([^"]+(GatewayURL)[^"]+)"'},{match:'id="pdfLink"\\s+href="([^"]+)"'}]}]},"European Digital Mathematics Library":{rules:[{steps:[{match:"href\\s*=\\s*['\"]([^'\"]+)['\"][^>]+>\\s*Full\\s+\\(PDF\\)"}]}]},"Inter-Research Science Center":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"'}]}]},"Dove Medical Press":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]*getfile[^"]+)"'},{rewrite:["(.*)(getfile.*)","$1/$2"]}]}]},"OMICS Publishing Group":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+pdfdownload.php[^"]+pdf[^"]+")'}]}]},CSIRO:{rules:[{steps:[{fn:"JqMeta"}]}]},"Molecules and Cells":{rules:[{steps:[{rewrite:["(.*)(view\\.html)(.*)","$1download_pdf.php$3"]}]}]},"SciTech Connect":{rules:[{steps:[{fn:"JqMeta"}]}]},"RSC Publishing":{rules:[{steps:[{fn:"JqMeta"}]}]},"American Mathematical Society":{rules:[{steps:[{match:'name\\s*=\\s*"citation_pdf_url"\\s*content\\s*=\\s*"([^"]+pdf)"'}]},{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"\\s*>Full-text\\s+PDF'}]},{steps:[{match:'href\\s*=\\s*"([^"]+\\.pdf)"\\s*>PDF'}]}]},"Social Science Research Network":{referer:!0,rules:[{steps:[{match:'href\\s*=\\s*"(Delivery\\.cfm/[^"]+pdf\\?abstractid=[^"]+)"'}]}]},"American Society for Clinical Investigation":{rules:[{steps:[{rewrite:["(.*/view/\\w+)","$1/version/1/pdf/render"]}]}]},"Pacific Symposium on Biocomputing":{rules:[{steps:[{match:'href="([^"]+pdf)"'}]}]},Eprints:{rules:[{steps:[{match:'"eprints.document_url"\\s+content\\s*=\\s*"([^"]+pdf[^"]*)"'}]}]},ScopeMed:{rules:[{steps:[{rewrite:["(.*mno=)(.*)","http://www.ejmanager.com/fulltextpdf.php?mno=$2"]},{match:'window\\.location\\s*=\\s*"([^"]+)'}]},{steps:[{fn:"JqMeta"}]}]},SciELO:{rules:[{steps:[{match:"window\\.open\\('(http[^']+script=sci_pdf[^']+)'"},{match:'URL=(http://[^"]+\\.pdf)"'}]},{steps:[{fn:"JqMeta"}]}]},"Thieme Connect":{rules:[{steps:[{rewrite:["(.*)/DOI/DOI\\?(.*)","$1/products/ejournals/pdf/$2.pdf"]}]}]},"IET Digital Library":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+fulltext[^"]+\\.pdf[^"]+)"'}]}]},"AME Publishing Company":{rules:[{steps:[{match:'class="pdf"\\s+href="([^"]+)"'},{rewrite:["(.+/)(view)(/.+)","$1download$3/pdf"]}]},{steps:[{rewrite:["(.+/)(view)(/.+)","$1download$3/pdf"]}]}]},"OECD iLibrary":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+mimeType=pdf)"'}]}]},"JMIR Publications":{rules:[{steps:[{match:'pdf_url"\\s+content="([^"]+)"'}]}]},"John Benjamins":{rules:[{steps:[{match:'href\\s*=\\s*"([^"]+itemId[^"]+mimeType=pdf[^"]+)"'}]}]},"Begell Digital Library":{rules:[{steps:[{fn:"JqMeta"}]}]},"readcube: Tests":{rules:[]},"Tests for pages that redirect":{rules:[]},AAFP:{rules:[{steps:[{rewrite:["(https?://.*aafp.org)/afp/([\\d/]+)/([^/]+).html?.*","$1/dam/brand/aafp/pubs/afp/issues/$2/$3.pdf"]}]},{steps:[{rewrite:["(https?://.*aafp.org)/(pubs.*)(.html?.*)","$1/dam/brand/aafp/$2.pdf"]}]}]},AASV:{rules:[{steps:[{rewrite:["(.*)(.html?.*)","$1.pdf"]}]}]},InTech:{rules:[{steps:[{match:'content="([^"]+citation-pdf-url[^"]+)"'}]}]},"Swiss Medical Weekly":{rules:[{steps:[{match:'a class="article__btn pdf" href="([^"]+)"'},{rewrite:["(.*)/view/(.*)","$1/download/$2"]}]}]},"American Institute of Mathematical Sciences":{rules:[{steps:[{fn:"JqMeta"}]}]},"Spie Digital Library":{rules:[{steps:[{fn:"JqMeta"}]}]},Silverchair:{referer:!0,rules:[{steps:[{match:'href="([^"]+/pdf[^"]*)"'}]},{steps:[{fn:"JqMeta"}]}]},Lancet:{rules:[{steps:[{fn:"JqMeta"}]}]},AEA:{rules:[{steps:[{fn:"JqMeta"}]}]},eLife:{rules:[{steps:[{match:'href="(https://elifesciences\\.org/download[^"]+\\.pdf[^"]+)"'}]}]},OpenJournalSystems:{rules:[{steps:[{fn:"JqMeta"}]},{steps:[{match:'href\\s*=\\s*"([^"]+download[^"]+)"\\s+class\\s*=\\s*"download"'}]}]},Filename:{deferToBodyDrivers:!0,rules:[]},JSTOR:{rules:[{steps:[{fn:"JSTOR"}]}]},Figshare:{rules:[{steps:[{fn:"JqMeta"}]}]},"F1000 Research":{rules:[{steps:[{fn:"JqMeta"}]}]},"Frontiers In":{referer:{url:"http://journal.frontiersin.org"},rules:[{steps:[{rewrite:["(.+)(/|/full|/pdf|/abstract)$","$1/pdf?pdf=true"]}]}]},"Journal of Clinical and Diagnostic Research":{rules:[{steps:[{rewrite:["article_abstract","pdf_download"]},{match:'href\\s*=\\s*"([^"]+\\.pdf)"\\s*>'}]}]},"Journal of Object Technology":{rules:[{steps:[{match:'<a class="pdf" href="(.*)">PDF'}]}]},Escholarship:{referer:!0,rules:[{steps:[{rewrite:["(.*/item/\\w*)","$1.pdf"]}]}]},JADA:{rules:[{steps:[{fn:"JqMeta"}]}]},"Open Research Exeter":{rules:[{steps:[{fn:"JqMeta"}]}]},"Ecology and Society":{rules:[{steps:[{fn:"JqMeta"}]},{steps:[{match:'href="(\\S+.pdf)"'}]},{steps:[{rewrite:["(https?:)(.+art\\d+)/?","https:$2/print.pdf"]}]}]},"Annual Reviews":{rules:[{steps:[{rewrite:["(.+)(doi/abs|doi/full|doi/pdf|doi)(.+)","$1doi/pdf$3?t="]}]}]},"Cryptology ePrint Archive":{rules:[{steps:[{rewrite:["(.*)","$1.pdf"]}]}]},"Federal Register":{rules:[{steps:[{match:'href="(\\S+.pdf)"'}]}]},AJTMH:{rules:[{steps:[{fn:"JqMeta"}]}]},"Public Health Research and Practice":{rules:[{steps:[{match:'href="(\\S+.pdf)"'}]}]},"Turkish Journal of Gastroenterology":{rules:[{steps:[{match:'href="(\\S+.pdf)"'}]}]},"Elsevier ES":{rules:[{steps:[{rewrite:["(.*-)([^\\-]+)$","http://www.elsevier.es/index.php?p=revista&pRevista=pdf-simple&pii=$2&r=293"]}]}]},Biotaxa:{rules:[{steps:[{fn:"JqMeta"}]}]},"Advances in Clinical and Experimental Medicine":{rules:[{steps:[{match:"href=[\"'](\\S+\\.pdf)[\"']"}]}]},JIACI:{rules:[{steps:[{match:"href=[\"'](\\S+revistas\\S+\\.pdf)[\"']"}]}]},"Ovid Insights":{rules:[{steps:[{match:"viewonjournalsite.+href=([^>]+)>"},{match:'href="([^"]+pdfs\\.journals\\.lww\\.com[^"]+)"'}]},{steps:[{match:'ovidFullTextUrlForButtons\\s*=\\s*"(\\S+)"'},{match:'src="(\\S+\\.pdf)"'}]},{steps:[{match:'ovidFullTextUrlForButtons\\s*=\\s*"(\\S+)"'},{match:'id="pdf"\\s+href="(\\S+Full\\+Text\\S+)"'},{match:'src="(\\S+\\.pdf)"'}]}]},EbscoHost:{rules:[{steps:[{rewrite:["(.*)(/detail/.*)(vid=.*)(&*.*)(sid=.*)(&*.*)(sessionmgr\\d+)(.*)","$1/pdfviewer/pdfviewer?$3&$5$7"]},{match:'name="pdfUrl"\\s+type="hidden"\\s+value="(\\S+)"'}]},{steps:[{rewrite:["(.*)(/detail/.*)(vid=.*)&(sid=.*)&(hid=.*)(&bdata.*)","$1/pdfviewer/pdfviewer?$4&$3&$5"]},{match:'name="pdfUrl"\\s+type="hidden"\\s+value="(\\S+)"'}]},{steps:[{rewrite:["(.*)(/detail/.*)(sid=.*)&(vid=.*)&(hid=.*)(&bdata.*)","$1/pdfviewer/pdfviewer?$3&$4&$5"]},{match:'name="pdfUrl"\\s+type="hidden"\\s+value="(\\S+)"'}]}]},HeinOnline:{rules:[{steps:[{match:'href="(PrintRequest[^"]+)'},{match:'window\\.location\\s*=\\s*"([^"]+)'}]}]},CAIRN:{rules:[{steps:[{fn:"JqMeta"},{rewrite:["(.*)","$1&download=1"]}]}]},JStatSoft:{rules:[{steps:[{match:'<a class="galley-link btn btn-primary file" role="button" href="(.*)"'}]}]},"Optics InfoBase":{rules:[{steps:[{fn:"JqMeta"},{match:'src\\s?=\\s?"([^"]+osapublishing\\.org/DirectPDFAccess[^"]+)"'}]}]},SumoBrain:{rules:[{steps:[{match:'href="([^"]+\\.pdf)"'},{match:'src\\s*=\\s*"([^"]+\\.pdf[^"]*)"'}]}]},Cogprints:{rules:[{steps:[{match:'content\\s*=\\s*"([^"]+\\.pdf)"'}]}]},OpenReview:{rules:[{steps:[{rewrite:["(.*)(forum\\?id=)(.*)","$1pdf?id=$3"]}]}]},"Semantic Scholar":{rules:[{steps:[{match:'paper-link[^<>]+link\\s*=\\s*"(http[^"]+pdf)"'}]}]},Redalyc:{rules:[{steps:[{match:"window.open\\('(https?://www.redalyc.org[^']+.pdf)'"}]}]},"Sage Publications":{rules:[{steps:[{rewrite:["(.+)(doi/abs|doi/full|doi/pdf)(.+)","$1doi/pdf$3?t="]}]},{steps:[{rewrite:["(.+)(doi/10\\.)(.+)","$1doi/pdf/10.$3"]}]},{steps:[{rewrite:["(doi/abs|doi/full|doi/pdf)","doi/pdfplus"]}]},{steps:[{match:'href\\s*=\\s*"([^"]*doi/pdf/[^"]+)"'},{rewrite:["(.+://)(\\w+)(\\.sagepub.+)","$1journals$3"]}]},{steps:[{match:'href\\s*=\\s*"([^"]*cgi/reprint/[^"]+)".*\\(PDF\\)'},{rewrite:["(.*)","$1.pdf"]}]},{steps:[{match:'href="(/doi/pdf[/\\w%\\-\\.]+)'}]}]},RePEc:{rules:[{steps:[{fn:"RePEc"}]}]},OpenEdition:{rules:[{steps:[{fn:"JqMeta"}]}]},"World Scientific":{rules:[{steps:[{match:'href="([^"]*/doi/pdf[/\\w%\\-\\.]+)'},{rewrite:["(.*)","$1?download=true"]}]},{steps:[{rewrite:["(.*)(\\?.*)","$1?download=true"]}]},{steps:[{rewrite:["(.*)","$1?download=true"]}]}]},IWAP:{rules:[{steps:[{match:'href="([^"]+\\.pdf)"'}]}]},"Academia.edu":{rules:[{steps:[{match:'class="js-swp-download-button"[^>]+href="([^"]+)"'}]}]},"Open Science Framework":{rules:[{steps:[{rewrite:["(.*)/?","$1/download"]}]}]},"Biomolecules & Therapeutics":{rules:[{steps:[{match:'href="([^"]+download_pdf[^"]+)"'}]}]},"M2 Community":{rules:[{steps:[{match:"<\\s*meta[^>]*name\\s*=\\s*[\"']\\s*fulltext_pdf\\s*['\"]\\s*content\\s*=['\"]([^'\"]+)['\"]\\s*/?\\s*>"}]},{steps:[{rewrite:["(.*)(\\.org|\\.com|\\.net)(.*)(\\w{3}\\w*)\\.(\\d+)\\.(\\d+)#?$","$1$2/upload/pdf/$4-$5-$6.pdf"]}]}]},"Elsevier ClinicalKey":{rules:[{steps:[{rewrite:["(.*content/journal/|.*ontent/)([^/?]+)(.*)","https://www.clinicalkey.com/service/content/pdf/watermarked/$2.pdf?locale=en_US"]}]}]},BioOne:{rules:[{steps:[{fn:"JqMeta"}]}]},"SEG Library":{rules:[{steps:[{rewrite:["(.*)(/doi/)(.*)","$1/doi/pdf/$3"]}]}]},"Data Intelligence Journal":{rules:[{steps:[{match:"pdf_download\\('([^']+)'"}]}]},"Meta Tests":{rules:[{steps:[{fn:"JqMeta"}]}]}};var s=Object.keys(o).map(e=>{const t=o[e],r=(0,a.getByName)(e),s={...t,name:e,rules:(0,n.stepRulesToRegExp)(t.rules),signature:{url:r.urls.map(i.getRegExp),body:(r.pdf_body_sigs||[]).map(i.getRegExp),accessRestricted:(r.pdf_restricted_sigs||[]).map(i.getRegExp),accessRestrictedUrl:(r.pdf_url_restricted_sigs||[]).map(i.getRegExp),urlBlocked:(r.blocking_url_sigs||[]).map(i.getRegExp),bodyBlocked:(r.blocking_body_sigs||[]).map(i.getRegExp),loginRequired:(r.login_required_sigs||[]).map(i.getRegExp),allowedMimeTypes:r.allowed_mime_types||[]}};return Object.keys(s.signature).length||console.error(`Driver ${e} has zero signatures`),s});t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=a(r(688));var o=async(e,t,r,a)=>{const{crawlOptions:{mode:o},messageReporter:s}=a;if("PDF"===o&&t.target)throw new i.CrawlerException("PDF rules should not have a target: "+JSON.stringify(t));if("META"===o&&!t.target)throw new i.CrawlerException("META rules must have a target: "+JSON.stringify(t));if(t.steps)return s.log("Processing rule steps","info"),(0,n.default)(e,t.steps,r,a);if(t.target)return s.log("No processing needed, will apply target","info"),(0,i.ok)({type:"intermediate",url:e});throw new i.CrawlerException("Invalid rule: "+JSON.stringify(t))};t.default=o},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.processStep=t.processRewrite=t.processFn=t.processMatch=void 0;var i=r(4),n=r(26),o=a(r(689));const s=(e,t,r,a)=>{const n=t.match(r);if(null===n)return null;if(void 0===n[1])return a.log("Invalid match rule: "+r,"error"),null;const o=(0,i.ensureAbsoluteUrl)(n[1],e,a);return a.log("Matched to URL: "+o,"info"),o};t.processMatch=s;const l=async(e,t,r,a)=>{let{err:n,messageReporter:s,fetchClient:l,encounteredErrors:c}=a;const u=o.default[r],d=await u(t,e,{err:n,fetchClient:l,messageReporter:s,encounteredErrors:c});if(null===d)return null;const p=(0,i.ensureAbsoluteUrl)(d.url,e,s);return s.log("fn returned URL: "+p,"info"),{url:p,fetchParams:d.fetchParams}};t.processFn=l;const c=(e,t,r)=>{const[a,o]=t;if(!a||!o)return r.log("Invalid rewrite rule: "+t,"error"),null;const s=(0,n.deproxify)(e),l=(0,i.isProxied)(s),c=l?s.cleanUrl:e;r.log(`Attempting rewrite from ${c} using ${a.source} and ${o}`,"info");const u=c.replace(a,o);if(u===c)return r.log("Nothing rewritten during rewrite","error"),null;const d=(0,i.ensureAbsoluteUrl)(u,c,r);if(r.log(`Rewrote ${c} to ${d}`,"info"),l){const e=(0,n.proxify)(d,s.proxy,s.dash);return r.log("Proxified to "+e,"info"),e}return d};t.processRewrite=c;const u=async(e,t,r,a)=>{const{crawlOptions:{mode:n},fetchClient:o,messageReporter:u}=a,{url:d,fetchParams:p}=e;if((0,i.hasBlockingSignatures)(d,r.urlBlocked,a))return a.encounteredErrors.add("BLOCKED"),null;if("rewrite"in t){const e=c(d,t.rewrite,u);return null===e?null:{type:"intermediate",url:e,fetchParams:p}}const m=await o.fetch(d,p,{allowedMimeTypes:r.allowedMimeTypes});if(!m.isOk())return null;const{response:h,bodyBlob:g,bodyText:f}=m.value;if((0,i.hasBlockingSignatures)(f,r.bodyBlocked,a))return a.encounteredErrors.add("BLOCKED"),null;if(!h.ok&&!(0,i.isRestrictedStatusCode)(h.status))return null;if("PDF"===n&&i.regExes.hasPdfSignature(f))return u.log("Hit a PDF, returning","info"),{type:"final-pdf",url:h.url,pdfBlob:g,contentDisposition:h.contentDisposition};if("PDF"===n&&"loginRequired"in r&&(0,i.checkAndRecordPdfRestrictions)(f,r,h.status,h.url,a),"match"in t){const e=s(h.url,f,t.match,u);return null===e?null:{type:"intermediate",url:e}}const b=await l(h.url,f,t.fn,a);return null===b?null:{type:"intermediate",...b}};t.processStep=u;var d=async(e,t,r,a)=>{const{err:n,messageReporter:o}=a;let s={type:"intermediate",url:e};for(const[e,l]of t.entries()){if(o.log("Processing step "+e,"info"),s=await u(s,l,r,a),null===s)return n("RULE_FAILED","Steps failed");if("final-pdf"===s.type)return(0,i.ok)(s)}return(0,i.ok)(s)};t.default=d},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(690)),n=a(r(691)),o=a(r(706)),s=a(r(707)),l=a(r(708)),c=a(r(709)),u=a(r(710)),d=a(r(711));var p={Elsevier:n.default,ElsevierReader:o.default,EurekaSelect:i.default,IOSPress:s.default,JqMeta:l.default,JSTOR:c.default,Ovid:u.default,RePEc:d.default};t.default=p},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(12));var n=(e,t,r)=>{let{messageReporter:a}=r;const{rootElement:n}=(0,i.default)(e,a),o=n.find("input[name=hdnauthor]").attr("value"),s=n.find("input[name=form_build_id]").attr("value");if(o&&s){return{url:t,fetchParams:{method:"POST",body:`op=Download&Supplementary2=&user_name=&password=&hdnauthor=${o}&hdntrack=&hdn_restricted_type=&hdn_restricted_access_key=&agree-flag=1&form_build_id=${s}&form_id=article_download_form`,headers:{"Content-Type":"application/x-www-form-urlencoded"}}}}return null};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(692));const n=e=>{var t;return(null===(t=e.match(/window.location\s*=\s*'([^']+sciencedirectassets[^']+)'/))||void 0===t?void 0:t[1])||null},o=(e,t)=>{var r,a,n,o,s,l;const c=null===(r=e.match(/\.update\("([^)]+)"\);/))||void 0===r?void 0:r[1],u=null===(a=e.match(/\.util\.createBuffer\("([^)]+)"\)/))||void 0===a?void 0:a[1],d=null===(n=e.match(/"&token=(.+)&text="/))||void 0===n?void 0:n[1],p=null===(o=e.match(/"&original=([^"]+)"/))||void 0===o?void 0:o[1],m=null===(s=t.match(/pii\/([^/]+)\//))||void 0===s?void 0:s[1];if(!(c&&u&&d&&p&&m))return null;const h=i.default.random.getBytesSync(16),g=i.default.util.bytesToHex(h),f=i.default.md.sha256.create();f.update(c);const b=i.default.cipher.createCipher("AES-CBC",f.digest());b.start({iv:h}),b.update(i.default.util.createBuffer(u)),b.finish();const y=b.output.toHex(),v=null===(l=e.match(/window\.location\s?=\s?"([^"]+crasolve[^"]+)"/))||void 0===l?void 0:l[1];if(!v)return null;const _=t.replace(/^(https?:\/\/)([^/]+)(\/.*)/,"$2");return`https://${_}${v}https&vrr=UKN&redir=UKN&redir_fr=UKN&redir_arc=UKN&vhash=UKN&host=${encodeURIComponent(btoa(_))}&tsoh=${encodeURIComponent(btoa(_))}&rh=${encodeURIComponent(btoa(_))}&re=X2JsYW5rXw%3D%3D&ns_h=${encodeURIComponent(btoa(_))}&ns_e=X2JsYW5rXw%3D%3D&rh_fd=rrr)n%5Ed%60i%5E%60_dm%60%5Eo)%5Ejh&tsoh_fd=rrr)n%5Ed%60i%5E%60_dm%60%5Eo)%5Ejh&iv=${g}&token=${d}&text=${y}&original=${p}`},s=async(e,t)=>{if(null===e)return null;const r=await t.fetch(e);if(!r.isOk())return null;if(404===r.value.response.status){const r=await t.fetch(e);if(!r.isOk())return null;const{bodyText:a}=r.value;return n(a)}const{bodyText:a}=r.value,i=n(a);return i||s(o(a,e),t)};var l=async(e,t,r)=>{let{fetchClient:a,encounteredErrors:i}=r;await(async()=>{var e;if(null!==(e=chrome)&&void 0!==e&&e.cookies)try{const e=await new Promise(e=>chrome.cookies.get({url:"https://sciencedirect.com",name:"cf_clearance",partitionKey:{topLevelSite:"https://sciencedirect.com"}},e));if(!e||!e.partitionKey)return;await new Promise(t=>chrome.cookies.set({url:"https://sciencedirect.com",name:"cf_clearance",value:e.value,domain:"sciencedirect.com",path:"/",partitionKey:{topLevelSite:chrome.runtime.getURL("").replace(/\/$/,"")},secure:!0,httpOnly:!0,expirationDate:e.expirationDate},t))}catch(e){}})();const l=n(e);if(l)return{url:l};const c=o(e,t);if(null!==c||!/article\/pii\/[^/+]\/?/.test(t)){const e=await s(c,a);return e?{url:e}:null}const u=((e,t)=>{const r=t.replace(/^(https?:\/\/[^/]+)(\/.*)/,"$1"),a=e.match(/"queryParams":{"md5":"([^"]+)"/)||[],i=e.match(/"pid":"([^"]+)"/)||[],n=e.match(/"pii":"([^"]+)"/)||[],o=e.match(/"pdfExtension":"([^"]+)"\s*,\s*"path":"([^"]+)"/)||[];return o[1]&&i[1]?`${r}/${o[2]}/${n[1]}${o[1]}?md5=${a[1]}&pid=${i[1]}`:t.replace(/\?.*/,"").replace(/\/$/,"")+"/pdf"})(e,t),d=await s(u,a);if(d)return{url:d};const p=o(e,u);if(null===p&&[/crasolve/,/craft\/capi\/cfts\/init/].some(e=>e.test(a.visitedUrls[a.visitedUrls.length-1])))return i.add("BLOCKED"),null;const m=await s(p,a);return m?{url:m}:null};t.default=l},,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(e,t)=>{const r=e.match(/"md5":"([^"]+)".*"pid":"([^"]+)".*"pii":"([^"]+)".*"pdfExtension":"([^"]+)".*"path":"([^"]+)"/);if(6===(null==r?void 0:r.length)){return{url:`https://www.sciencedirect.com/${r[5]}/${r[3]}${r[4]}?md5=${r[1]}&pid=${r[2]}&download=true`}}return{url:t}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(e,t)=>{const r=t.match(/.*(publication|volumearticle)\/(\d+)/);if(null!==r){return{url:t.replace(/(https?:\/\/[^/]+)(\/.+)/,"$1").replace(/http:/,"https:")+"/Download/Pdf",fetchParams:{method:"POST",body:JSON.stringify({id:r[2]}),headers:{"Content-Type":"application/json"}}}}return null};t.default=a},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(4),n=r(5),o=a(r(12));var s=(e,t,r)=>{let{messageReporter:a}=r;const{rootElement:s}=(0,o.default)(e,a);let l=s.find('meta[name*="pdf_url"]').attr("content");if(!l)return null;const c=/^https?:\/[^/]+/;if(c.test(l)){const e=l.replace(c,"");l=(0,i.ensureAbsoluteUrl)(e,t,a)}return l=(0,i.ensureUrlScheme)(l),l=(0,n.getGlobal)("ppLibrary").crawling.Proxy.proxifyIfNeeded(t,l),{url:l}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(5);var i=(e,t)=>{const r=e.match(/window\.requestId\s*=\s*"([^"]+)/m),i=e.match(/"page_path"\s*:\s*"([^"]+)"/m);let n=null;return r&&r[1]&&i&&i[1]&&(n=`https://www.jstor.org${i[1]}.pdf?refreqid=${encodeURIComponent(r[1])}`,n=n.replace(/stable\//,"stable/pdf/")),n?(n=(0,a.getGlobal)("ppLibrary").crawling.Proxy.proxifyIfNeeded(t,n),{url:n}):null};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(4),i=r(5);var n=(e,t)=>{let r="https://www.someurl.com/1234";return r=(0,a.ensureUrlScheme)(r),r=(0,i.getGlobal)("ppLibrary").crawling.Proxy.proxifyIfNeeded(t,r),{url:r}};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(12));var n=(e,t,r)=>{let{messageReporter:a}=r;const{$:n,rootElement:o}=(0,i.default)(e,a),s=[];if(o.find("INPUT[NAME=url]").each((e,t)=>{const r=n(t).attr("VALUE");r&&s.push(r)}),0===s.length&&o.find("a").each((e,t)=>{const r=n(t).attr("href");if(r){const e=r.match(/.*redir\.pf\?u=(http[^;]+);.*/);null!==e&&s.push(unescape(e[1]))}}),s.length>0){return{url:s.find(e=>/pdf/i.test(e))||s[0]}}return null};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getRedirectUrlsFromContent=t.getCrossrefRedirectUrls=t.getBlobText=t.readBodyStream=t.isContentTypeAllowed=t.getResponseContentLength=t.chromeSpoofReferer=t.getDeclarativeNetRequestRule=t.getChromeUrlFilter=t.getChromeUrlFilterList=t.CHROME_REFERER_RULE_ID=void 0;var i=r(713),n=r(4),o=r(26),s=r(468),l=a(r(12));function c(e){const t=new URL(e),[r,a,i]=t.hostname.split(".").reverse();let n=`${a}.${r}`;return a.length<=3&&i&&(n=`${i}.${n}`),n}t.CHROME_REFERER_RULE_ID=600;t.getChromeUrlFilterList=e=>{try{const t=c(e);return[`*://${t}/*`,`*://*.${t}/*`]}catch(e){return["<all_urls>"]}};t.getChromeUrlFilter=e=>"|*://*."+c(e);t.getDeclarativeNetRequestRule=(e,t)=>({id:600,action:{type:chrome.declarativeNetRequest.RuleActionType.MODIFY_HEADERS||"modifyHeaders",requestHeaders:[{header:"Referer",operation:chrome.declarativeNetRequest.HeaderOperation.SET||"set",value:e}]},condition:{urlFilter:t,resourceTypes:[chrome.declarativeNetRequest.ResourceType.XMLHTTPREQUEST||"xmlhttprequest"]}});t.chromeSpoofReferer=(e,t)=>{var r;const a=e.requestHeaders||[],i=(null===(r=a.find(e=>/customreferer/i.test(e.name)))||void 0===r?void 0:r.value)||e.url,n=a.filter(e=>!/referer/i.test(e.name)&&!/customreferer/i.test(e.name));return t.log("Setting referer to: "+i,"info"),{requestHeaders:[...n,{name:"Referer",value:i}]}};const u=e=>{if(e.get("content-encoding"))return null;const t=e.get("content-length");return null===t?null:parseInt(t,10)};t.getResponseContentLength=u;const d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(null===e)return!0;const r=["text","text/html","text/plain","text/xml","text/x-bibtex","txt/csv","application/bib/text","application/xhtml+xml","application/pdf","application/json","application/ld+json","application/xml","application/atom+xml","application/x-bibtex","application/x-endnote-refer","application/x-research-info-systems","application/marc","application/rdf+xml","multipart/form-data",...t];return r.some(t=>e.toLocaleLowerCase().trim().startsWith(t))};t.isContentTypeAllowed=d;t.readBodyStream=async(e,t)=>{let{checkPdfSignature:r,crawlOptions:{maxDownloadSize:a},err:o,encounteredErrors:l,messageReporter:c,needsFullBlob:p,allowedMimeTypes:m=[]}=t;if(null===e.body)throw new n.CrawlerException("response.body not implemented on fetch");const h=e.headers.get("content-type"),g=d(h,m);if(!g&&!r)return l.add("CONTENT_TYPE_RESTRICTED"),o("FETCH_FAILED",`Content-Type: ${h} not allowed`);const f="getReader"in e.body?new i.BodyStreamReaderBrowser(e.body):new i.BodyStreamReaderNode(e.body),b=[];let y="",v=!1,_=!1;const w=u(e.headers);if(a&&null!==w&&w>a)return l.add("DOWNLOAD_SIZE_EXCEEDED"),o("FETCH_FAILED",`Download size exceeded: ${w} > ${a}`);let P=0;for await(const{chunk:e,chunkLength:t,decodedChunk:i}of f){if(b.push(e),y+=i,P+=t,_&&0!==t&&c.reportProgress({contentType:h,downloadedCount:P,totalCount:w}),a&&P>a)return l.add("DOWNLOAD_SIZE_EXCEEDED"),o("FETCH_FAILED",`Download size exceeded: ${P} > ${a}`);if(r&&!v&&P>=10){if(v=!0,_=n.regExes.hasPdfSignature(y),_&&0!==t&&c.reportProgress({contentType:h,downloadedCount:P,totalCount:w}),_&&!p){await f.cancel();break}if(!_&&!g)return await f.cancel(),l.add("CONTENT_TYPE_RESTRICTED"),o("FETCH_FAILED",`Content-Type: ${h} not allowed`)}}_&&(null===w||P<w)&&c.reportProgress({contentType:h,downloadedCount:P,totalCount:P});const S=p?new s.CrossFetchBlob(b,{type:"application/pdf"}):null;return(0,n.ok)({bodyText:y,bodyBlob:S,pdfFound:_})};t.getBlobText=e=>"function"==typeof e.text?e.text():new Promise((t,r)=>{const a=new FileReader;a.onloadend=()=>{"string"==typeof a.result?t(a.result):null!==a.error?r(a.error):r(new n.CrawlerException("FileReader did not return a success string or an error"))},a.readAsText(e)});const p=(e,t)=>{const{$:r,rootElement:a}=(0,l.default)(e,t),i=a.find("a").toArray().map(e=>{try{const t=r(e).attr("href");return t?new URL(t):null}catch(e){return null}}).filter(e=>e instanceof URL).filter(e=>!1===["doi.org","mr.crossref.org","api.crossref.org","www.crossref.org"].includes(e.hostname)&&"/"!==e.pathname).map(e=>e.href.replace(/\/$/,""));return[...new Set(i)]};t.getCrossrefRedirectUrls=p;t.getRedirectUrlsFromContent=(e,t,r)=>{const a=(0,o.deproxify)(e),i=a&&a.cleanUrl?a.cleanUrl:e,s=i.match(/.*readcube.com\/articles\/(10\..*)/i);if(null!==s)return[{url:"https://doi.org/"+s[1],method:"GET"}];if(/sciencedirect\.com/.test(i)&&t.match(/meta\shttp-equiv="refresh".*\?ref=cra_js_challenge/i))return[];if(/OpenAthens/i.test(t)){const e={},r=t.match(/name\s*=\s*"SAMLResponse"\s+value\s*=\s*"([^"]+)"/);if(r){const[,t]=r;e.SAMLResponse=t}const a=t.match(/name\s*=\s*"RelayState"\s+value\s*=\s*"([^"]+)"/);if(a){const[,t]=a;e.RelayState=t}const i=t.match(/action="([^"]+)"/);if(null!==i&&(e.RelayState||e.SAMLResponse))return[{url:i[1],method:"POST",params:e}]}if(/EZproxyCheckBack/.test(t)){const e=t.match(/location\.href\s*=\s*"([^"]+)"/);if(null!==e)return[{url:e[1],method:"GET"}];const r=t.match(/location\.href\s*=\s*'([^']+)'/);if(null!==r)return[{url:r[1],method:"GET"}];const a=t.match(/method='POST'\s+action='(http[^']+)'/);if(null!==a){const e={},r=t.match(/name\s*=\s*'RelayState'\s+value\s*=\s*'([^']+)'/),i=t.match(/name\s*=\s*'SAMLRequest'\s+value\s*=\s*'([^']+)'/);if(r){const[,t]=r;e.RelayState=t}if(i){const[,t]=i;e.SAMLRequest=t}return[{url:a[1],method:"POST",params:e}]}const i=t.match(/method="POST"\s+action="(http[^"]+)"/);if(null!==i){const e={},r=t.match(/name\s*=\s*"RelayState"\s+value\s*=\s*"([^"]+)"/),a=t.match(/name\s*=\s*"SAMLRequest"\s+value\s*=\s*"([^"]+)"/);if(r){const[,t]=r;e.RelayState=t}if(a){const[,t]=a;e.SAMLRequest=t}return[{url:i[1],method:"POST",params:e}]}}if(/linkinghub\.elsevier\.com/.test(i)){const r=t.match(/name="urls\['sd'\]"\s+value="(http:\/\/www\.sciencedirect\.com\/[^"]+)"/);if(null!==r)return[{url:r[1],method:"GET"}];const i=t.match(/name="redirectURL"\s+value="([^"]+)"/);if(null!==i){const t=unescape(i[1].replace(/\?_returnURL=.*/,""));if(!(0,n.isProxied)(a))return[{url:t,method:"GET"}];const r=t.replace(/\?.+/,"");return[{url:(0,o.inferLoginUrl)(e)?(0,o.proxifyCrossDomain)(e,r):r,method:"GET"}]}}if(/journals\.lww\.com/.test(i))return[];const l=t.match(/<meta[^<>]+http-equiv="refresh"[^<>]+>/i);if(null!==l){const e=l[0].match(/URL='?(.*?)'?"/i);if(null!==e&&"/"!==e[1])return[{url:(0,n.ensureAbsoluteUrl)(e[1],i,r),method:"GET"}]}if(/mr\.crossref\.org\/iPage\?doi=/.test(i)||/chooser\.crossref\.org\/\?doi=/.test(i)){const e=[],a=p(t,r);for(const t of a)e.push({url:t,method:"GET"});return e}return[]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BodyStreamReaderBrowser=t.BodyStreamReaderNode=void 0;class a{constructor(){this.chunkGenerator=this.createChunkGenerator()}[Symbol.asyncIterator](){return this.chunkGenerator}next(){return this.chunkGenerator.next()}}t.BodyStreamReaderNode=class extends a{constructor(e){super(),this.nodeStream=e}async*createChunkGenerator(){for await(const e of this.nodeStream)yield{chunk:e,chunkLength:e.length,decodedChunk:e.toString()}}cancel(){return Promise.resolve(this.nodeStream.destroy())}};t.BodyStreamReaderBrowser=class extends a{constructor(e){super(),this.browserStream=e,this.reader=e.getReader(),this.decoder=new globalThis.TextDecoder("utf-8")}async*createChunkGenerator(){for(;;){const e=await this.reader.read();if(e.done)break;const t=e.value,r=this.decoder.decode(t,{stream:!0});yield{chunk:t,chunkLength:t.length,decodedChunk:r}}const e=this.decoder.decode();yield{chunk:new Uint8Array,chunkLength:0,decodedChunk:e}}cancel(){return this.reader.cancel()}}},,,function(e,t){},,function(e,t){},,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(114);var i=async()=>(0,a.ok)({response:null,readBodyStreamResult:null});t.default=i},function(e,t,r){"use strict";var a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GoogleScholar",{enumerable:!0,get:function(){return o.default}}),t.pluginTypes=void 0;var n=i(r(729));t.pluginTypes=n;var o=a(r(730))},function(e,t,r){},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=a(r(731)),o=a(r(733)),s=a(r(12)),l=r(5),c=r(18),u=r(114);class d extends n.default{constructor(e){let{onMessage:t}=e;super({fetchOptions:{crawlOptions:{onMessage:t,mode:"META"}},rateLimit:{shortDelay:3e3,medDelay:5e3,longDelay:8e3,isRateLimited:!1,nextTimeAvailable:null,preferencesForBibTeX:{}}}),(0,i.default)(this,"baseUrl","https://scholar.google.com"),(0,i.default)(this,"searchUrl","/scholar?btnG=&hl=en&as_sdt=0%2C5&q="),(0,i.default)(this,"citeUrl","/scholar?hl=en&lr=&cites="),(0,i.default)(this,"totalEntries",null),(0,i.default)(this,"cache",{}),this.ppLibrary=(0,l.getGlobal)("ppLibrary");const r=(0,l.getGlobal)("jQuery");this.formatter=new o.default(this.ppLibrary,r)}getDescription(){return"Google Scholar"}getRateLimiter(){return this.rateLimit}async connect(e){let t;const r=e.replace(/\s+/g,"+");t=/^https?:\/\/scholar\.google\.*\/scholar\?/.test(r)?r:this.baseUrl+this.searchUrl+encodeURIComponent(e).replace(/%2B/g,"+");const a=await this.fetchClient.fetch(t);if(!a.isOk())return(0,u.err)("FETCH_ERROR");const{response:i,bodyText:n}=a.value;if(503===i.status||403===i.status){if(/automated queries/i.test(n)){this.rateLimit.isRateLimited=!0;const e=6e4*(403===i.status?30:10),t=(new Date).getTime()+e;return this.rateLimit.nextTimeAvailable=t,(0,u.err)("RATE_LIMITED")}return(0,u.err)("BAD_RESPONSE")}if(/Please show you&#39;re not a robot/.test(n))return(0,u.err)("CAPTCHA_BLOCKED");const{rootElement:o,$:l}=(0,s.default)(n,this.messageReporter),c=o.find('div[id="gs_ab_md"]');if(!c)return(0,u.err)("BAD_RESPONSE");const d=l(c[0]).text();this.cache={0:{[this.pageLimit]:n}};let p=d.match(/\s*([\d,.]+)\s/);if(p){const e=p[1].replace(/[,.]/,"");return this.totalEntries=parseInt(e,10),(0,u.ok)(this.totalEntries)}if(p=d.match(/^\s*$/),p){if(1===l(n).find("a.gs_or_cit").length)return this.totalEntries=1,(0,u.ok)(this.totalEntries)}return(0,u.err)("NO_RESULTS")}async page(e,t){var r;const a=t||e+this.pageLimit;if(null!==(r=this.cache[e])&&void 0!==r&&r[a]){const t=this.cache[e][a],r=await this.parseGoogleScholarPage(t);return(0,u.ok)(r)}const i=`${this.baseUrl+this.searchUrl+this.query}&start=${e}&num=${this.pageLimit}`,n=await this.fetchClient.fetch(i);if(!n.isOk())return(0,u.err)("FETCH_ERROR");const{response:o,bodyText:s}=n.value;if(!o.ok)return(0,u.err)("BAD_RESPONSE");this.cache[e]={[a]:s};const l=await this.parseGoogleScholarPage(s);return(0,u.ok)(l)}async match(e){var t;const r=(0,c.interconvertString)(e.title,{format:"nomarkup"}),[,a]=this.prepareTitle(r),i=a.join(" ");let n="";if(null!==(t=e.author)&&void 0!==t&&t.length){n=this.prepareAuthors(e.author,"author:").join(" ")}const o=[];i&&n?o.push([`${i}+${n}`,"title+author"]):o.push([i,"title"]),this.matchStrategies=o;const s=await this.getMatchFromStrategies(e);if(!s.isOk())return s;const l=s.value,d=await this.improvePubUsingBibTex(l);return l&&l.abstract&&(d.abstract=l.abstract),(0,u.ok)(d)}async parseGoogleScholarPage(e){const t=this.formatter.doRead(e);for(const e of t)e.source.plugin=this.getDescription();const r=e.match(/scholar\.google\.[a-zA-z.]{2,7}/g);let a="scholar.google.com",i=0;if(r){const e={};for(const t of r)e[t]||(e[t]=0),e[t]+=1;for(const t of Object.keys(e))e[t]>i&&(a=t,i=e[t])}if(t.some(e=>e.gs_bibtex)||await this.setPreferencesForBibTeX("http://"+a),t.length>0){const[r]=t,{rootElement:a}=(0,s.default)(e,this.messageReporter),i=/([0-9,]+) results/i,n=a.find("div#gs_ab").text().match(i);if(n){const[,e]=n;r.source._gs_total_count=e.replace(/,/g,"")}}return t}async setPreferencesForBibTeX(e){const t=e+"/scholar_settings?sciifh=1&hl=en&as_sdt=0,5";if(!this.rateLimit.preferencesForBibTeX[e])return;const r=await this.fetchClient.fetch(t);if(!r.isOk())return;const{bodyText:a}=r.value,i=a.match(/name\s*=\s*"scisig"\s+value\s*=\s*"([^"]+)"/);if(null==i||!i[1])return;const n=`${t.replace("scholar_settings?","scholar_setprefs?")}&scis=yes&scisf=4&submit=&scisig=${i[1]}`,o=await this.fetchClient.fetch(n);o.isOk()&&200===o.value.response.status&&(this.rateLimit.preferencesForBibTeX[e]=!0)}async getCitingReference(e){if(e.doi)return this.citingArticleFetch(e);const t=await this.match(e);return t.isOk()?this.citingArticleFetch(t.value):null}async citingArticleFetch(e){let t="",r="";const{doi:a}=e;if(a){let e="";/http:\/\/dx.doi.org/.test(a)||(e=a.replace("doi:",""),e="http://dx.doi.org/"+a),t=e,r=this.baseUrl+this.citeUrl+t}else{if(!e.gs_cited_by_link)return null;r=e.gs_cited_by_link}const i=await this.fetchClient.fetch(r);if(!i.isOk())return null;let n=0;const{bodyText:o}=i.value;if(/(\d+) results/.test(o)){const[,e="0"]=o.match(/(\d+) results/)||[];n=parseInt(e,10)}return{count:n,page:this.parseGoogleScholarPage(o)}}async getPubUsingBibtexCid(e){const t=`https://scholar.google.com/scholar?q=info:${e.gs_bibtex}:scholar.google.com/&output=cite&scirp=0&hl=en`,r=await this.fetchClient.fetch(t);if(!r.isOk())return e;const{bodyText:a}=r.value,[,i]=a.match(/href="([^"]+)"\s*>BibTeX/)||[];return i?this.getPubUsingBibtex({...e,gs_bibtex:i}):e}async getPubUsingBibtex(e){const t=e.gs_bibtex.replace(/&amp;/g,"&"),r=await this.fetchClient.fetch(t);if(!r.isOk()||200!==r.value.response.status)return e;const a=r.value.bodyText,i=(0,l.getGlobal)("ppLibrary"),[n]=i.format.Bibtex.syncRead(a);return{...n,url:e.url}}async improvePubUsingBibTex(e){if(!e.gs_bibtex)return e;return e.gs_bibtex.indexOf("http")<0?this.getPubUsingBibtexCid(e):this.getPubUsingBibtex(e)}}t.default=d},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(18),o=r(114),s=a(r(481)),l=a(r(467)),c=r(4),u=r(732),d=a(r(482));t.default=class{constructor(e){let{fetchOptions:t,rateLimit:r}=e;(0,i.default)(this,"skipCitedBy",!1),(0,i.default)(this,"query",""),(0,i.default)(this,"stopWords",["about","com","for","from","how","that","the","this","was","what","when","where","will","with","und","and","www"]),(0,i.default)(this,"pageLimit",20),(0,i.default)(this,"matchStrategies",[]),(0,i.default)(this,"resultsToValidate",[]);const a=new Set,{crawlOptions:n}=t;this.messageReporter=new s.default(n.onMessage);const o={crawlOptions:n,encounteredErrors:a,err:(0,c.errFactory)(this.messageReporter),messageReporter:this.messageReporter,urlList:new d.default([])};this.fetchClient=new l.default({...o,...t}),this.rateLimit=r}async search(e){if(!(await this.connect(e)).isOk())return null;const t=await this.page(0,this.pageLimit);return t.isOk()?t.value:null}prepareTitle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!e)return[[],[]];const i=e.replace(/<\S+>/g,"").replace(/(\(|\)|-|\.|,|:|;|\{|\}|\?|!|\/)/g," ").split(/\s+/),n=[],o=[],s=[...t,...this.stopWords];for(const e of i)e.length<3||s.includes(e.toLocaleLowerCase())||(n.push(e),o.push(r+e+a));return[n,o]}prepareAuthors(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a=[];let i=0;for(const n of e)if(n.last&&(i+=1,a.push(t+n.last+r),i>=2))break;return a}async getMatchFromStrategies(e){if(0===this.matchStrategies.length)return(0,o.err)("NO_MATCH_STRATEGIES");for(const[t,r]of this.matchStrategies){const a=await this.matchHelper(t,r,e);if(a.isOk()){const e=a.value;return e.source||(e.source={match_status:"success",match_plugin:this.getDescription(),match_strategy:r,match_query:t}),(0,o.ok)(e)}}return(0,o.err)("ALL_STRATEGIES_FAILED")}async matchHelper(e,t,r){if(!e)return(0,o.err)("NO_QUERY");const a=await this.connect(e);if(!a.isOk())return(0,o.err)("CONNECT_FAILED");const i=a.value;if(0===i)return(0,o.err)("NO_RESULTS");if(/(pmid|pmc|doi|arxivid)/.test(t)&&i>1)return(0,o.err)("MULTIPLE_RESULTS_FOR_ID");this.skipCitedBy=!0;const n=await this.page(0);if(this.skipCitedBy=!1,!n.isOk())return(0,o.err)(n.error);const s=n.value;return this.validateAndGetMatch(r,s)}validateAndGetMatch(e,t){if(0===t.length)return(0,o.err)("NO_VALID_RESULTS");for(const r of t)if(this.validateHit(r,e))return(0,o.ok)(r);return(0,o.err)("NO_VALID_RESULTS")}validateHit(e,t){var r,a;if(null===e||!e)return!1;if(t.pmid&&e.pmid)return t.pmid===e.pmid;if(t.pmc&&e.pmc)return t.pmc===e.pmc;if(t.arxivid&&e.arxivid)return t.arxivid.replace(/v\d+$/,"")===e.arxivid.replace(/v\d+$/,"");if(t.doi&&e.doi&&/^10\.\d{4,5}\/.+/.test(t.doi)&&/^10\.\d{4,5}\/.+/.test(e.doi))return t.doi.toLowerCase()===e.doi.toLowerCase();if(null!==(r=t.published)&&void 0!==r&&r.year&&null!==(a=e.published)&&void 0!==a&&a.year){const r=parseInt(t.published.year.toString(),10)-parseInt(e.published.year.toString(),10);if(Math.abs(r)>1)return!1}const i=(0,u.authorMatch)(t,e),o=(0,u.titleMatch)(t.title||"",e.title||""),s=(0,u.journalMatch)(t.journal||"",t.journalfull||"",e.journal||"",e.journalfull||"");if("none"===i&&"none"===o||"none"===i&&"none"===s||"none"===o&&"none"===s)return!1;let l=0,c=e.title||"";c=c.replace(/(\(|\)|-|\.|,|:|;|\{|\}|\?|!|\/)/g," ");const d=[],p=c.split(/\s+/);for(let e=0;e<p.length;e+=1){if(p[e].length<3)continue;let t=!1;const r=p[e].toLowerCase();for(let e=0;e<this.stopWords.length;e+=1)r===this.stopWords[e]&&(t=!0);t||d.push(p[e])}const m=this.prepareTitle((0,n.interconvertString)(t.title,{format:"nomarkup"}),this.stopWords,"",""),[h]=m;c=` ${c} `;for(let e=0;e<h.length;e+=1){const t=h[e].replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),r=new RegExp(`\\s${t}\\s`,"i");c.match(r)&&(l+=1)}return!(p.length>2*h.length&&p.length>=4)&&(l>=h.length&&l/d.length>=.8||h.length<=3&&l>=h.length&&l>=2)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authorMatch=t.journalMatch=t.titleMatch=void 0;var a=r(18),i=r(180);t.titleMatch=(e,t)=>{let r="none";const i=(0,a.normalize)((0,a.interconvertString)(e,{format:"nomarkup"}).toLowerCase().replace(/[:;.,&\u2014\u2013-]/g," ")),n=(0,a.normalize)((0,a.interconvertString)(t,{format:"nomarkup"}).toLowerCase().replace(/[:;.,&\u2014\u2013-]/g," "));return i?n&&i===n&&(r="exact"):r="na",r};const n=(e,t)=>{const r=(0,i.alignment)(e,t);let a=0,n=0,o=0,s=0;for(const e of r.alignment)null===e[0]?o+=1:null===e[1]?s+=1:e[0]!==e[1]?n+=1:a+=1;return a>0&&0===n&&(o>0&&0===s||s>0&&0===o)};t.journalMatch=(e,t,r,i)=>{let o="none";const s=(0,a.normalize)(e.toLowerCase().replace(/\./g," ")),l=(0,a.normalize)(t.toLowerCase().replace(/\./g," ")),c=(0,a.normalize)(r.toLowerCase().replace(/\./g," ")),u=(0,a.normalize)(i.toLowerCase().replace(/\./g," "));if(s)if(s===c)o="exact";else if(s===u)o="exact";else{const e=n(s,c),t=n(s,u);(e||t)&&(o="fuzzy")}else if(l)if(l===c)o="exact";else if(l===u)o="exact";else{const e=n(l,c),t=n(l,u);(e||t)&&(o="fuzzy")}else o="na";return o};const o=e=>{const t=["author","editor","series_editor","contributor","translator"];for(const r of t)if(e[r]&&Array.isArray(e[r]))for(const t of e[r]){if(t.collective)return t.collective;if(t.last)return t.last}return""};t.authorMatch=(e,t)=>{let r="none";const a=o(e),i=o(t);return a&&i&&a===i&&(r="exact"),r}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=a(r(101));t.default=class{constructor(e,t){(0,i.default)(this,"name","GoogleScholar"),(0,i.default)(this,"baseUrl","https://scholar.google.com"),this.ppLibrary=e,this.$=t}parseCase(e,t){const r={...e},a=this.ppLibrary;let i,n;if(3===t.length?[i,n]=t:2===t.length&&([n]=t),i){const[e]=i.split(/\s*,\s*/);if(e){const t=e.match(/(\d+)\s+(.+)\s+(\d+)$/);if(null!=t&&t[3]){const[,e,a,i]=t;r.volume=e,r.journal=a.replace(/\u2026/g,"").trim(),r.pages=i}}}if(n){const t=n.split(/\s*,\s*/);if(t[0]){r.published={year:t.pop()},r.court=t.shift();const i=r.court.match(/(.+):(.+)/);if(null!=i&&i[2]){const[,e,t]=i;r.court=t.trim();const n=a.library.Jurisdictions.getJurisdiction(e);n.jurisdiction&&(r.jurisdiction=n.jurisdiction)}if(t.length&&!e.jurisdiction){const e=a.library.Jurisdictions.getJurisdiction(t[0]);e.jurisdiction&&(r.jurisdiction=e.jurisdiction)}}}return a.library.Publication.autoCleanLegalDocs(e),"jurisdiction"in e||(r.jurisdiction="United States"),r}parseEntry(e,t){var r,a;const i={title:"[NO_TITLE]",author:[],id_list:[],url:[],pubtype:"PP_ARTICLE"};let n=t(e).find("h3[class=gs_rt]").text();if(n&&(i.title=n.replace(/\[(DOC|PDF|BOOK|BUCH|LIBRO|LIVRE|B|[ZC]ITATIONE?|CITAS|C|HTML|KNIHA|KNJIGA|KNYGA|K\xd6NYV|KSI\u0104\u017bKA|KIRJA|BOK|BOG|BUKU|BOEK|GR\u0100MATA|K\u0130TAP|\ucc45|\u66f8\u7c4d)\]/g,"").trim(),i.title.match(/^User profiles for/i)))return null;if((!i.title||"[NO_TITLE]"===i.title)&&(n=t(e).find("h3[class=gs_rt]").text(),n&&(i.title=n.replace(/\[(DOC|PDF|BOOK|BUCH|LIBRO|LIVRE|B|[ZC]ITATIONE?|CITAS|C|HTML|KNIHA|KNJIGA|KNYGA|K\xd6NYV|KSI\u0104\u017bKA|KIRJA|BOK|BOG|BUKU|BOEK|GR\u0100MATA|K\u0130TAP|\ucc45|\u66f8\u7c4d)\]/g,"").trim(),i.title.match(/^User profiles for/i))))return null;i.title=i.title.replace(/\u2026/g,"").trim(),/\[(BOOK|BUCH|LIBRO|LIVRE|KNIHA|KNJIGA|KNYGA|K\xd6NYV|KSI\u0104\u017bKA|KIRJA|BOK|BOG|BUKU|BOEK|GR\u0100MATA|K\u0130TAP|\ucc45|\u66f8\u7c4d)\]/gi.test(i.title)&&(i.pubtype="PP_BOOK");t(e).find("div.gs_a").text().match(/Patent/gi)&&(i.pubtype="PP_PATENT");let o=t(e).find("h3[class=gs_rt] a");if(null!==(r=o)&&void 0!==r&&r[0]){let e=t(o).attr("href")||"";/^\/citations\?/.test(e)&&(e=this.baseUrl+e);const r=e.match(/^\/scholar_case\?.*case=(\d+)/);null!=r&&r[1]&&(i.pubtype="PP_CASE",e="https://scholar.google.com/scholar_case?case="+r[1]),Array.isArray(i.url)?i.url.push(e):i.url=[]}if(o=t(e).find("div.gs_or_ggsm a"),null!==(a=o)&&void 0!==a&&a[0]){var s;const e=t(o).attr("href")||"";null!==(s=i.url)&&void 0!==s&&s[0]&&i.url[0]!==e&&Array.isArray(i.url)&&i.url.push(e)}const l=t(e).find("div[class=gs_fl]").text().match(/Cited by (\d+?)\s/i);if(l){const e=parseInt(l[1],10);i.gs_cited_by_count=e}let c=t(e).find("div[class=gs_a]");if(c[0]||(c=t(e).find('div[class="gs_a gs_fma_s"]')),c[0]){const e=t(c[0]).text(),r=e.replace(/\u00A0/g," ").replace(/\s+/g," ").split(" - ");if("PP_CASE"===i.pubtype){const e=this.parseCase(i,r);for(const t of Object.keys(e))i[t]=e[t]}else{var u,d,p,m;if(Array.isArray(i.author)||(i.author=[]),r[0]){const e=r[0].split(", ").filter(e=>"\u2026"!==e);for(const t of e){const e=t.split(/\s+/),r={};r.first=e.shift(),r.last=e.join(" ").replace(/\u2026/,""),i.author.push(r)}}if(r[1]){const e=r[1].match(/(.*), (\d{4})$/);if(null!=e&&e[1]){const[,t,r]=e;i.journal=t.replace(/\u2026/g,"").trim(),i.year=r}else if(/^\d{4}$/.test(r[1])){const[,e]=r;i.year=e}else{const[,e]=r;i.journal=e.replace(/\u2026/g,"").trim()}}let t=null===(u=i.journal)||void 0===u?void 0:u.match(/arXiv preprint arXiv:(\d+\.\d+)/);if(null!==(d=t)&&void 0!==d&&d[1]){const[,e]=t;i.arxivid=e}if(t=null===(p=i.journal)||void 0===p?void 0:p.match(/arXiv preprint (\S+\/\d+)/),null!==(m=t)&&void 0!==m&&m[1]){const[,e]=t;i.arxivid=e}if(r[2]&&!/\.\d{3}$/.test(r[2])&&!/(.*\.)+.*/.test(r[2])){const[,,e]=r;i.publisher=e,"Google Patents"===r[2]&&(i.pubtype="PP_PATENT")}const a=e.match(/(\d{4})/);if(!i.year&&null!=a&&a[1]){const[,e]=a;i.year=e}}}let h=t(e).find("div[class=gs_fma_snp]");if(h[0]||(h=t(e).find("div[class=gs_rs]")),h[0]){const e=t(h[0]).text();i.abstract=e.replace(/\n/g," ").replace(/^\s+/g,"").replace(/\s+/g," ").replace(/\u2026/g,"")}const g=t(e).find("div[class=gs_fl] a");for(const e of g.toArray()){const r=t(e).attr("href")||"";if(r){let e=r.match(/cluster=(\d+)/);if(e){const[,t]=e;i.gs_cluster_id=t}if(e=r.match(/(.*)(scholar\.bib\?.*)/),e){const[,,t]=e;r.match(/^http/)?i.gs_bibtex=r:i.gs_bibtex=`${this.baseUrl}/${t}`}if(e=r.match(/(.*)(scholar\?cites=.*)/),e){const[,,t]=e;i.gs_cited_by_link=`${this.baseUrl}/${t}`}if(e=r.match(/(.*)(scholar\?cites=.*)/),e){const[,,t]=e;i.gs_related_articles=`${this.baseUrl}/${t}`}if(e=r.match(/(.*)(scholar\?cluster.*)/),e){const[,,t]=e;i.gs_all_versions=`${this.baseUrl}/${t}`}}}if(!i.gs_bibtex){const r=t(e).attr("data-cid");r&&(i.gs_bibtex=r)}for(const e of i.url||[])/books\.google\.com/.test(e)&&"PP_BOOK"!==i.pubtype&&(i.pubtype="PP_BOOK");return this.ppLibrary.library.Publication.autoClean(i),i}doRead(e){const{rootElement:t,$:r}=(0,n.default)(e,this.$),a=t.find("div.gs_or"),i=[];for(const e of a.toArray()){const t=this.parseEntry(e,r);t&&i.push(t)}return i}getName(){return this.name}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7));t.default=class{constructor(e){(0,i.default)(this,"name","APA"),this.ppLibrary=e}doRead(e){const t={},r=e.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/\s+/g," ").trim(),a=[{regex:/^(.+)\s+\((\d{4})\)\.\s+(.+)\s+<i>(.+)<\/i>,\s<i>(\d+)<\/i>\((\d+)\),\s(.+-.+)/,fields:["author","year","title","journal","volume","issue","pages"]},{regex:/^(.+)\s+\((\d{4})\)\.\s+(.+)\s+<i>(.+)<\/i>,\s<i>(\d+)<\/i>,\s(.+-.+)/,fields:["author","year","title","journal","volume","pages"]},{regex:/^(.+)\s\((\d{4})\)\.\s<i>(.+)<\/i>\s\(Vol\.\s(\d+)\)\.\s(.+)/,fields:["author","year","title","volume","publisher"]},{regex:/^(.+)\s\((\d{4})\)\.\s<i>(.+)<\/i>\.\s(.+)/,fields:["author","year","title","publisher"]}];for(const e of a){const a=r.match(e.regex);if(a){e.fields.forEach((e,r)=>{t[e]=a[r+1]});break}}const i={title:"",author:[],id_list:[],url:[],pubtype:"PP_ARTICLE"};return t.title&&(i.title=t.title.trim().replace(/\.+$/,"")),t.author&&(i.author=this.ppLibrary.library.Author.parseAuthorList(t.author.replace(/&/g,""),{delimiter:",",commasWithinNames:!0,familyNameFirst:!0,auto:!1})),t.year&&(i.published={year:t.year.trim().replace(/\.+$/,"")}),t.journal&&(i.journal=t.journal.trim().replace(/\.+$/,"")),t.volume&&(i.volume=t.volume.trim().replace(/\.+$/,"")),t.issue&&(i.issue=t.issue.trim().replace(/\.+$/,"")),t.pages&&(i.pages=t.pages.trim().replace(/\.+$/,"")),t.publisher&&(i.publisher=t.publisher.trim().replace(/\.+$/,"")),this.ppLibrary.library.Publication.autoClean(i),i.title?[i]:[]}getName(){return this.name}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(26),n=a(r(450));var o=(e,t)=>{const r=(0,i.deproxify)(e),a=r&&r.cleanUrl?r.cleanUrl:e,o=(0,n.default)(a,t),s={supported:!1,autoComplete:!1,inlineButtonDisabled:!1,dynamic:!1,target:null,proxify:!1,websitePubtypeAllowed:!1,pdfInMetaSupported:!1};if(null===o)return s;s.supported=!0,s.autoComplete=!0,o.driver.disablePreAutocomplete&&(s.autoComplete=!1),o.driver.dynamic&&(s.dynamic=!0);const{signature:l}=o.driver;if(o.driver&&o.driver.name&&(s.target=o.driver.name),!("webimport"in l)||!("webimport_exclude"in l))return s;s.inlineButtonDisabled=l.inline_button_disabled;const{webimport:c,webimport_exclude:u,proxify:d}=l;return s.supported=!1,(0===c.length||c.some(e=>e.test(a)))&&(s.supported=!0),u.some(e=>e.test(a))&&(s.supported=!1),s.supported||(s.autoComplete=!1),l.website_pubtype_allowed&&(s.websitePubtypeAllowed=!0),l.pdf_in_meta_supported&&(s.pdfInMetaSupported=!0),s.proxify=d,s};t.default=o},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.authorize=void 0;var i=r(26),n=a(r(737));const o={},s=(e,t)=>{e&&t&&chrome.tabs.remove(e),chrome.tabs.onUpdated.removeListener(o[e].login),chrome.tabs.onRemoved.removeListener(o[e].close),delete o[e]};t.authorize=async(e,t,r)=>{const a=await new Promise(e=>chrome.tabs.query({currentWindow:!0,active:!0},e)),l=null==a?void 0:a[0],c=await new Promise(t=>{chrome.tabs.create({url:e,active:!0},t)});return new Promise(a=>{var u;const d={originalUrl:e,testPattern:t,msg:r||"",login:async(e,t)=>{const r=((e,t)=>{if(e in o&&"url"in t){const{msg:a}=o[e],n=(0,i.deproxify)(t.url||"");var r;if(n&&n.cleanUrl&&n.proxy){if(n.cleanUrl.match(o[e].testPattern))return s(e,!0),{success:!0,msg:"Successfully logged in!",rMsg:a}}else if(null!=t&&null!==(r=t.url)&&void 0!==r&&r.match(o[e].testPattern))return s(e,!0),{success:!0,msg:"Successfully logged in!",rMsg:a}}})(e,t);r&&(a(r),await(0,n.default)(l))},close:async e=>{const t=(e=>{if(e in o){var t;const r=null===(t=o[e])||void 0===t?void 0:t.msg;return s(e,!1),{success:!1,msg:"Tab closed during authentication!",rMsg:r}}})(e);t&&(a(t),await(0,n.default)(l))}};o[null!==(u=c.id)&&void 0!==u?u:0]=d,chrome.tabs.onUpdated.addListener(d.login),chrome.tabs.onRemoved.addListener(d.close)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(20),i=r(9);var n=async e=>{const t=await new Promise(e=>chrome.windows.getAll({populate:!0},e)),r={};for(const e of t){const{tabs:t,id:a}=e;if(a)for(const e of t||[])if((0,i.isNewWebAppTab)(e.url)){var n;const t=null!==(n=e.id)&&void 0!==n?n:0;r[a]||(r[a]=[]),r[a].push(t)}}const o=null!=e&&e.windowId?r[e.windowId]:void 0,s=e&&(null==o?void 0:o.some(t=>t===(null==e?void 0:e.id)))?null==e?void 0:e.id:null==o?void 0:o[0];if(s)return void await new Promise(e=>chrome.tabs.update(s,{active:!0},e));let l=-1,c=-1;for(const e of Object.keys(r)){const t=parseInt(e,10),a=r[t][0];a&&(c=t,l=a)}if(l>0&&c>0)return await new Promise(e=>chrome.windows.update(c,{focused:!0},e)),void await new Promise(e=>chrome.tabs.update(l,{active:!0},e));await new Promise(t=>chrome.tabs.create({url:a.NEW_WEBAPP_URL,windowId:null==e?void 0:e.windowId},t))};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=a(r(101));t.default=class{constructor(e,t){(0,i.default)(this,"fieldMappings",{title:["journal_article > titles title","conference_paper > titles title","content_item[component_type=chapter] > titles title","content_item[component_type=reference_entry] > titles title","book_series_metadata > titles title","dissertation > titles title","report-paper titles title","dataset titles title","component titles title","standard_metadata > titles title","posted_content > titles title"],subtitle:["journal_article > titles subtitle","conference_paper > titles subtitle","content_item[component_type=chapter] > titles subtitle","content_item[component_type=reference_entry] > titles subtitle","book_series_metadata > titles subtitle","dissertation > titles subtitle","report-paper titles subtitle","dataset titles subtitle"],abstract:["journal_article description","conference_paper description","content_item[component_type=chapter] description","book_series_metadata description","dissertation description","report-paper description","dataset description","posted_content abstract"],series:["series_metadata > titles title","series_title"],booktitle:["book book_metadata > titles title","proceedings_title","book_series_metadata > titles title"],conference:["conference event_metadata conference_name"],conference_location:["conference event_metadata conference_location"],conference_date:["conference event_metadata conference_date"],startpage:["pages first_page"],endpage:["pages last_page"],volume:["journal_volume volume","proceedings_series_metadata volume","book_series_metadata volume"],issue:["journal_issue issue"],genre:["dissertation degree"],edition:["book_metadata edition_number","report-paper_metadata edition_number"],journal:["journal_metadata abbrev_title","journal_metadata full_title","database database_metadata titles title","posted_content > group_title"],journalfull:["journal_metadata full_title"],publisher:["publisher publisher_name"],address:["publisher publisher_place","dissertation institution_place"],institution:["institution > institution_name"],author:["journal_article > contributors *[contributor_role]","conference_paper > contributors *[contributor_role]","chapter_contributors > contributors *[contributor_role]","content_item[component_type=chapter] > contributors *[contributor_role]","dissertation *[contributor_role]","report-paper contributors *[contributor_role]","dataset *[contributor_role]","component *[contributor_role]","standard *[contributor_role]","posted_content > contributors *[contributor_role]"],book_contributors:["book book_metadata > contributors *[contributor_role]"],series_contributors:["book book_series_metadata series_metadata > contributors *[contributor_role]"],bookseries_contributors:["book book_series_metadata > contributors *[contributor_role]"],url:["journal_article doi_data resource","conference_paper doi_data resource","book content_item resource","book_metadata doi_data resource","book_series_metadata doi_data resource","sa_component component_list component doi_data resource","dissertation doi_data resource","report-paper doi_data resource","dataset doi_data resource","component doi_data resource","standard doi_data resource"],number:['report-paper item_number[item_number_type="Report Number"]','report-paper item_number[item_number_type="article-number"]','posted_content item_number[item_number_type="pisa"]'],year:["journal_article publication_date[media_type=print] year","journal_article publication_date[media_type=online] year","journal_article publication_date year","conference_paper publication_date[media_type=print] year","conference_paper publication_date[media_type=online] year","conference_paper publication_date year","book_metadata publication_date[media_type=print] year","book_metadata publication_date[media_type=online] year","book_metadata publication_date year","book_series_metadata publication_date[media_type=print] year","book_series_metadata publication_date[media_type=online] year","book_series_metadata publication_date year","dissertation approval_date year","report-paper publication_date[media_type=print] year","report-paper publication_date[media_type=online] year","report-paper publication_date year","dataset publication_date year","component publication_date year","standard approval_date year","posted_content posted_date year"],month:["journal_article publication_date[media_type=print] month","journal_article publication_date[media_type=online] month","journal_article publication_date month","conference_paper publication_date[media_type=print] month","conference_paper publication_date[media_type=online] month","conference_paper publication_date month","book_metadata publication_date[media_type=print] month","book_metadata publication_date[media_type=online] month","book_metadata publication_date month","book_series_metadata publication_date[media_type=print] month","book_series_metadata publication_date[media_type=online] month","dissertation approval_date month","report-paper publication_date[media_type=print] month","report-paper publication_date[media_type=online] month","report-paper publication_date month","dataset publication_date month","component publication_date month","standard approval_date month","posted_content posted_date month"],day:["journal_article publication_date[media_type=print] day","journal_article publication_date[media_type=online] day","journal_article publication_date day","conference_paper publication_date[media_type=print] day","conference_paper publication_date[media_type=online] day","conference_paper publication_date day","book_metadata publication_date[media_type=print] day","book_metadata publication_date[media_type=online] day","book_metadata publication_date day","book_series_metadata publication_date[media_type=print] day","book_series_metadata publication_date[media_type=online] day","book_series_metadata publication_date day","dissertation approval_date day","report-paper publication_date[media_type=print] day","report-paper publication_date[media_type=online] day","report-paper publication_date day","dataset publication_date day","component publication_date day","standard approval_date day","posted_content posted_date day"],issn:["journal journal_metadata issn","series_metadata issn"],isbn:["isbn"],doi:["conference_paper doi_data doi","journal_article doi_data doi","book content_item doi_data doi","book_metadata doi_data doi","sa_component component_list component doi_data doi","dissertation doi_data doi","report-paper doi_data doi","book_series_metadata doi_data doi","dataset doi_data doi","component doi_data doi","standard doi_data doi"]}),(0,i.default)(this,"parseAuthor",(e,t)=>{const r={first:void 0,last:void 0,collective:void 0,jr:void 0};if("organization"===t(e).prop("tagName"))return r.collective=this.cleanString(e.text()),r;if(r.first=this.cleanString(t(e).find("given_name").text()),r.last=this.cleanString(t(e).find("surname").text()),r.jr=this.cleanString(t(e).find("suffix").text()),r.last&&r.first&&1===r.last.length&&r.first.length>1){const e=r.first;r.first=r.last,r.last=e}return r.jr||delete r.jr,r.role="editor"===t(e).attr("contributor_role")?"editor":"author",r}),(0,i.default)(this,"getPub",(e,t)=>{const r={pubtype:"PP_MISC",title:"",id_list:[],author:[],editor:[],series_editor:[],url:[],bookurl:[],book_contributors:[],bookseries_contributors:[],series_contributors:[]};for(const[a,i]of Object.entries(this.fieldMappings))for(const n of i){const i=e.find(n);if(i.length&&i[0]){if(["author","editor"].includes(a)||/contributors/.test(a)){for(const e of i.toArray()){const i=this.parseAuthor(t(e),t);"book_contributors"===a?r.book_contributors.push(i):"bookseries_contributors"===a?r.bookseries_contributors.push(i):"series_contributors"===a?r.series_contributors.push(i):i.role&&"editor"===i.role?r.editor=[...r.editor||[],i]:r.author=[...r.author||[],i]}break}if("url"===a){const e=/book_metadata|book_series_metadata/.test(n)?"bookurl":"url";for(const a of i.toArray())t(a).attr("mime_type")||t(a).parent().attr("link_header_relationship")||t(a).text().match(/^http/)&&r[e].push(t(a).text());break}if("isbn"===a){if(!r.isbn){r.isbn=t(i[0]).text();continue}i[1]&&!r.isbn_alt&&(r.isbn_alt=t(i[1]).text());break}if("issn"===a){r.issn||(r.issn=t(i[0]).text()),i[1]&&!r.issn_alt&&(r.issn_alt=t(i[1]).text());break}if("conference_date"===a){const e=t(i[0]).text(),n=t(i[0]).attr("start_year"),o=t(i[0]).attr("start_month"),s=t(i[0]).attr("start_day"),l=t(i[0]).attr("end_year"),c=t(i[0]).attr("end_month"),u=t(i[0]).attr("end_day");if(n&&o&&s)r[a]={literal:`${s}/${o}/${n}-${u}/${c}/${l}`};else{const t=this.ppLibrary.library.Date.parseDate(e);r[a]="unparsed"in t?{literal:e}:t}break}if(!(a in r)||!r[a]){r[a]=this.cleanString(t(i).text());break}}}const a={journal:"PP_ARTICLE",conference_paper:"PP_CONFERENCE_PAPER",book:"PP_BOOK","report-paper":"PP_REPORT",dissertation:"PP_THESIS",dataset:"PP_DATASET",component:"PP_DATASET",standard:"PP_STANDARD","posted_content[type=preprint]":"PP_PREPRINT"};for(const[t,i]of Object.entries(a))if(e.has(t).length){r.pubtype=i;break}"PP_THESIS"===r.pubtype&&(r.kind="Ph.D. Thesis",r.institution&&(r.school=r.institution,delete r.institution)),"PP_BOOK"===r.pubtype&&(t(e).find("content_item[component_type=chapter]").length||t(e).find("content_item[component_type=reference_entry]").length)&&(r.pubtype="PP_BOOK_CHAPTER"),"PP_BOOK_CHAPTER"===r.pubtype&&(r.book_contributors.length?r.editor=[...r.editor||[],...r.book_contributors.filter(e=>"author"!==e.role)]:(r.series_contributors.length&&(r.editor=[...r.editor||[],...r.series_contributors.filter(e=>"author"!==e.role)]),r.bookseries_contributors.length&&(r.editor=[...r.editor||[],...r.bookseries_contributors.filter(e=>"author"!==e.role)]))),"PP_BOOK"===r.pubtype&&(!r.title&&r.booktitle&&(r.title=r.booktitle,delete r.booktitle),r.book_contributors.length?(r.author=[...r.author||[],...r.book_contributors.filter(e=>"author"===e.role)],r.editor=[...r.editor||[],...r.book_contributors.filter(e=>"editor"===e.role)]):r.bookseries_contributors.length&&(r.author=[...r.author||[],...r.bookseries_contributors.filter(e=>"author"===e.role)],r.editor=[...r.editor||[],...r.bookseries_contributors.filter(e=>"editor"===e.role)]),r.series_contributors.length&&(r.series_editor=r.series_contributors),r.url=[...r.url||[],...r.bookurl]),r.subtitle&&(r.title?r.title.toLowerCase().includes(r.subtitle.toLowerCase())||(r.title+=(": "+r.subtitle).replace(/\s*:\s*$/,"")):r.title=r.subtitle,delete r.subtitle),r.title&&(r.title=r.title.replace(/\s*<\/title>\s*$/,""),r.title=r.title.replace(/^\s*<title>\s*/,""),r.title=this.cleanString(r.title));for(const e of["author","editor","series_editor"])for(const t of r[e]||[])t.role&&delete t.role;return delete r.book_contributors,delete r.bookseries_contributors,delete r.series_contributors,delete r.bookurl,r.title||(r.doi&&(r.title=r.doi),r.pubtype="PP_MISC"),r}),(0,i.default)(this,"doRead",e=>{const{rootElement:t,$:r}=(0,n.default)(e,this.$),a=this.getPub(t,r);return this.ppLibrary.library.Publication.autoClean(a),[a]}),(0,i.default)(this,"getName",()=>"Unixref"),this.ppLibrary=e,this.$=t}cleanString(e){return e.replace(/\s+/g," ").trim()}}},function(e,t,r){"use strict";var a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.crawlPDF=void 0;var n=i(r(175)),o=a(r(418)),s=r(32),l=r(438),c=r(46),u=r(9),d=r(201),p=r(95),m=r(417),h=r(100),g=a(r(47)),f=r(55),b=a(r(29)),y=a(r(44));const v=e=>{let t=null,r="",a="";return e.isOk()&&e.value&&(t=e.value.pdfBlob,e.value.url&&(r="string"==typeof e.value.url?e.value.url:e.value.url[0]),e.value.contentDisposition&&"string"==typeof e.value.contentDisposition&&(a=e.value.contentDisposition)),{fileBlob:t,pdfUrl:r,contentDisposition:a}},_=e=>{let t=!0;return/pmc\/articles\/PMC/i.test(e)&&!/pdf/.test(e)&&(t=!1),t},w=e=>{const t=[];if(e)for(const r of e){const e=r.replace(/^https?:\/+/,""),a=e.match(/(.*doi\.org\/)(10\.\d{4,5}\/.+)/);a&&a[2]?(t.push("http://dx.doi.org/"+a[2]),t.push("https://dx.doi.org/"+a[2]),t.push("http://doi.org/"+a[2]),t.push("https://doi.org/"+a[2])):(t.push("http://"+e),t.push("https://"+e))}return t},P=async(e,t)=>{const{pub:r,user:a,source:i,triggerImprovePub:o}=e.data;if(!r._id)return{errorMsg:"PDF_NOT_FOUND",attachmentData:null,jobId:e._id,user:a,source:i};const h=await y.default.forLibrary(e.libraryId).getPub(r._id);if(!h)return{errorMsg:"PDF_NOT_FOUND",attachmentData:null,jobId:e._id,user:a,source:i};if(h.trashed)return{errorMsg:"PDF_NOT_FOUND",attachmentData:null,jobId:e._id,user:a,source:i};const g=!(!("downloadPreprints"in a)||0!==a.downloadPreprints);C(e,{type:"text",text:"INIT_SEARCH"});const f=a&&a.proxy_list?(0,s.decodeProxyString)(a.proxy_list):null,P=null==f?void 0:f.filter(e=>e.active).map(e=>e.url);let S;e.data.pdf_url&&({pdf_url:S}=e.data);let A="";const E=[];let T=null;S||(0,l.callGuruForPDFUrl)(r)&&(T=await(0,l.getGuruMatch)(r),T&&T.pdf_url&&(S=T.pdf_url));let k=null,x="";const R=S&&S.publisher&&S.publisher.length>0,I=S&&S.preprint&&S.preprint.length>0;if(S&&S.local&&S.local.length>0)for(const r of S.local){const a=await n.crawlDirectPdf(r,{onMessage:t,returnPdfBlob:!0,maxDownloadSize:u.ATTACHMENT_FILESIZE_LIMIT});if(!await(0,c.checkJobExists)({_id:e._id}))return null;if(({fileBlob:k,pdfUrl:A,contentDisposition:x}=v(a)),k){b.default.debug("pdf crawl","Direct PDF download locally from ",A);break}}let L=[],D=null;if(!k&&R){const r=(e=>{const t=[];if(e)for(const r of e)/sciencedirect.*pdfft/.test(r)||t.push(r);return t})([...S.publisher,...(0,m.proxifyUrls)(S.publisher,P)]);for(const a of r){E.push(...w([a]));const r=await n.default([a],{mode:"PDF",onMessage:t,returnPdfBlob:!0,maxDownloadSize:u.ATTACHMENT_FILESIZE_LIMIT});if(!await(0,c.checkJobExists)({_id:e._id}))return null;if(({fileBlob:k,pdfUrl:A,contentDisposition:x}=v(r)),k){b.default.debug("pdf crawl","Direct PDF download from publisher site.",A);break}!r.isOk()&&r.error&&(D=r.error.blockedUrl,L=L.concat(r.error.errors))}}let N=!1;if(!k&&L.indexOf("ACCESS_RESTRICTED")>-1&&I&&!g){N=!0;for(const r of S.preprint){E.push(...w([r]));const a=await n.default([r],{mode:"PDF",onMessage:t,returnPdfBlob:!0,maxDownloadSize:u.ATTACHMENT_FILESIZE_LIMIT});if(!await(0,c.checkJobExists)({_id:e._id}))return null;if(({fileBlob:k,pdfUrl:A,contentDisposition:x}=v(a)),k){b.default.debug("pdf crawl","Direct PDF download from preprint site.",A);break}}}let O=[];if(!k){const a=L.indexOf("ACCESS_RESTRICTED")>-1,i=[r];T&&i.push(T);const o=(0,p.getLinksForPDFCrawler)(i,P,g,a,E);if(o.length>0){var U;E.push(...w(o));const r=await n.default(o,{mode:"PDF",onMessage:t,returnPdfBlob:!0,maxDownloadSize:u.ATTACHMENT_FILESIZE_LIMIT});let s=await(0,c.checkJobExists)({_id:e._id});if(!s)return null;if(({fileBlob:k,pdfUrl:A,contentDisposition:x}=v(r)),k&&b.default.debug("pdf crawl","PDF download via crawler.",A),!r.isOk()&&null!==(U=r.error.errors)&&void 0!==U&&U[0]){O=r.error.errors,D=r.error.blockedUrl;const o=(0,p.getLinksForPDFCrawler)(i,P,g,a,E);if(o.length>0){var M;E.push(...w(o));const r=await n.default(o,{mode:"PDF",onMessage:t,returnPdfBlob:!0,maxDownloadSize:u.ATTACHMENT_FILESIZE_LIMIT});if(s=await(0,c.checkJobExists)({_id:e._id}),!s)return null;if(({fileBlob:k,pdfUrl:A,contentDisposition:x}=v(r)),k&&b.default.debug("pdf crawl","PDF download via crawler.",A),!r.isOk()&&null!==(M=r.error.errors)&&void 0!==M&&M[0]){D=r.error.blockedUrl;for(const e of r.error.errors)O.push(e)}}}}}if(!k&&I&&!N&&!g)for(const r of S.preprint){let a;a=_(r)?await n.crawlDirectPdf(r,{onMessage:t,returnPdfBlob:!0,maxDownloadSize:u.ATTACHMENT_FILESIZE_LIMIT}):await n.default([r],{mode:"PDF",onMessage:t,returnPdfBlob:!0,maxDownloadSize:u.ATTACHMENT_FILESIZE_LIMIT});if(!await(0,c.checkJobExists)({_id:e._id}))return null;if(({fileBlob:k,pdfUrl:A,contentDisposition:x}=v(a)),k){b.default.debug("pdf crawl","Direct PDF download from preprint site.",A);break}}if(k){const t=(0,u.extractFilenameFromContentDisposition)(x),n=await(0,d.insertAttachmentInBackend)(y.default,k,r,A,t,e.libraryId);return o&&n&&n._id&&(0,c.triggerImprovePubJob)({attachmentId:n._id,libraryId:e.libraryId,tabId:e.tabId}),b.default.debug("pdf crawl","Final pdf-crawl result",n),{attachmentData:n,jobId:e._id,user:a,source:i}}if(O.length>0||L.length>0){const t=["PROXY_LOGGED_OUT","BLOCKED","LOGIN_REQUIRED","DOWNLOAD_SIZE_EXCEEDED","ACCESS_RESTRICTED","SITE_NOT_SUPPORTED"];let r="CRAWLER_FAILED";for(const e of t)"CRAWLER_FAILED"===r&&(L.indexOf(e)>-1||O.indexOf(e)>-1)&&(r=e);return{errorMsg:r,blockedUrl:D,jobId:e._id,user:a,source:i}}return{errorMsg:"NO_URL",attachmentData:null,jobId:e._id,user:a,source:i}};t.crawlPDF=P;const S=(0,o.default)(async(e,t)=>{C(e,t)},1500,{trailing:!0}),C=async(e,t)=>{const r=await(0,c.checkJobExists)({_id:e._id});if(!r)return;if("log"===t.type)return;if("progress"===t.type&&t.contentType&&/(html|text)/i.test(t.contentType))return;let a;"url"===t.type?a=(0,c.getDomainForUrl)(t.url):"text"===t.type&&(a=t.text);const i=(await(0,h.getWebappTabs)()).map(e=>e.id);var n,o,s;(i||[]).includes(r.tabId)||(await g.default.cs.execute("render.pdfProgress",r.tabId,{progress:{...t,pubId:r.data.pub._id},text:a,jobData:r}),await g.default.cs.execute("webimport.pdfProgress",r.tabId,{progress:{...t,pubId:(null===(n=r.data.pdfAttachingData)||void 0===n||null===(o=n.renderedPub)||void 0===o?void 0:o._id)||r.data.pub._id},pub:(null===(s=r.data.pdfAttachingData)||void 0===s?void 0:s.renderedPub)||r.data.pub,text:a}));if(null!=i&&i.length)for(const n of i)g.default.webapp.execute("webapp.pdfProgress",n,{progress:{...t,pubId:r.data.pub._id},text:a,taskId:e.data.taskId});"url"===t.type&&b.default.debug("pdf crawl","Fetching: "+t.url)};var A={func:async e=>({...await P(e,async t=>{"progress"===t.type?S(e,t):C(e,t)}),taskId:e.data.taskId,libraryId:e.libraryId}),callbacks:[{remoteAction:"render.pdfCrawlFinished",remoteTarget:"cs"},{remoteAction:"render.pdfCrawlFinished",remoteTarget:"popup"},{remoteAction:"webimport.pdfCrawlFinished",remoteTarget:"cs"},{remoteAction:"webapp.pdfCrawlFinished",remoteTarget:"webapp"},{remoteAction:"utils.addS3SyncJob",remoteTarget:"bg"}],callbackMiddleware:f.jobCallbackMiddleware};t.default=A},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(44)),n=r(42),o=r(55),s=a(r(29)),l=r(9);var c={func:async e=>{const t=e.data.attachmentData,r=e.data.libraryId||e.libraryId,{md5:a}=t;s.default.debug("s3 upload","job:",e),await i.default.forLibrary(r).waitForSync();const o=await i.default.forLibrary(r).getFile(t._id);if(!o||!o.blob)return s.default.debug("s3 upload","File not found locally. Stopping."),{attachmentData:{...t}};if(o&&o.blob&&0===o.blob.size)return s.default.debug("s3 upload","File is empty. Stopping."),{attachmentData:{...t}};if(o&&o.blob&&o.blob.size>l.ATTACHMENT_FILESIZE_LIMIT)return s.default.debug("s3 upload","File size exceeds limit. Stopping."),{attachmentData:{...t}};const c=await(0,n.requestUploadToken)({attachment:t,md5:a});if(!c)return!1;if("error"in c){if(404===c.error.status){return await i.default.forLibrary(r).getAttachment(t._id)?(await i.default.forLibrary(r).sync(),await i.default.forLibrary(r).waitForSync(),!1):{attachmentData:{...t}}}return!1}if("upload_data"in c&&c.upload_data)try{return!!await(0,n.uploadAttachment)(o.blob,c.upload_data)&&(await i.default.forLibrary(r).updateAttachment(t._id,{s3_md5:a}),s.default.debug("s3 upload","File uploaded successfully to S3!",a),{attachmentData:{...t,s3_md5:a}})}catch(e){return s.default.error("s3 upload","Error uploading file to S3",e),!1}return!1},callbacks:[{remoteAction:"render.s3UploadDone",remoteTarget:"cs"}],callbackMiddleware:o.jobCallbackMiddleware,keepJobOnError:!0};t.default=c},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.extractPubFromPDF=void 0;var i=a(r(742)),n=a(r(119)),o=r(32),s=a(r(44)),l=r(42),c=r(55),u=a(r(29)),d=r(46),p=a(r(185));const m=async(e,t)=>{const r=new i.default(e),a=await r.extract();let n=null;if(a&&(a.xmp.length>0||a.doi)){for(const e of a.xmp){let t;try{t=self.PP.format.XMP.syncRead(e)}catch(e){u.default.debug("XMP.syncRead failed","->",e)}t&&t[0]&&t[0].doi&&null===n&&([n]=t)}null===n&&a.doi&&(n={pubtype:"PP_ARTICLE",doi:a.doi}),n&&t&&(n=(0,d.mergeAutocompletedPub)(t,n),self.PP.library.Publication.autoClean(n))}return n};t.extractPubFromPDF=m;var h={func:async e=>{var t;u.default.debug("improve-pub","->",e);const{libraryId:r}=e,{attachmentId:a,backgroundJobId:i}=e.data,c=await s.default.forLibrary(r).getAttachment(a);if(!c)return{improvePubStatus:"error",msg:"Attachment not found"};const h=await s.default.forLibrary(r).getFile(a);if(!h||!h.blob)return{improvePubStatus:"error",msg:"File not found"};let g=null;if(c.pub_id&&(g=await s.default.forLibrary(r).getPub(c.pub_id),!g))return{improvePubStatus:"error",msg:"Pub not found"};let f=await m(h.blob,g);const b=(0,d.extractDoiFromUrl)((null===(t=g)||void 0===t?void 0:t.url)||[]);if(null===f&&b&&g&&(f=(0,d.mergeAutocompletedPub)(g,{pubtype:"PP_ARTICLE",doi:b}),self.PP.library.Publication.autoClean(f)),p.default&&f){const e=await(0,l.getUserFromDb)();return await p.default.addJob({libraryId:r,type:"autocomplete",priority:n.default.SINGLE_AUTOCOMPLETE,broadcastType:"all",data:{pub:f,user:e,source:"improve-pub",pubExists:!0,force:!0}}),{improvePubStatus:"success"}}if(c&&!c.s3_md5)return null;if(i){const t=await(0,l.checkPdfImprove)({jobId:i});if(!t)return null;if("queued"===t.status||"running"===t.status)return null;if("done"===t.status){let t;s.default.forLibrary(r).sync(),await s.default.forLibrary(r).waitForSync();const a=await s.default.forLibrary(r).getAttachment(e.data.attachmentId);return null!=a&&a.pub_id&&(t=await s.default.forLibrary(r).getPub(null==a?void 0:a.pub_id)),{improvePubStatus:"success",pub:{...t,authorYearString:t?(0,o.formatAuthorYear)(t):""}}}return{improvePubStatus:"error",msg:"improvePubJob failed"}}if(a){await s.default.forLibrary(r).waitForSync();const t=await(0,l.improvePub)({attachmentId:a,libraryId:r});return t?t.error?{improvePubStatus:"error",msg:"improvePubJob failed"}:(t._id&&(0,d.triggerImprovePubJob)({attachmentId:a,libraryId:r,tabId:e.tabId,backgroundJobId:t._id}),{improvePubStatus:"success"}):null}return{improvePubStatus:"error",msg:"improvePubJob failed"}},callbacks:[{remoteAction:"render.pdfImproveFinished",remoteTarget:"cs"},{remoteAction:"render.pdfImproveFinished",remoteTarget:"popup"}],callbackMiddleware:c.jobCallbackMiddleware,keepJobOnError:!0};t.default=h},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const r=/<x:xmpmeta.*>/,a=/<\/x:xmpmeta>/,i=[/URI\s*\((https?:\/\/crossmark\.crossref\.org\/dialog\/\?doi=10\.\d+.+)\)/g,/URI\s*\((https?:\/\/www\.mdpi\.com\/article\/10\.\d+.+type=check_update.*)\)/g,/URI\s*\((https?:.+action\/showCitFormats\?doi=10\.\d+\/.+)\)/g,/URI\s*\((https?:.+lookup\/doi\/10\.\d+\/.+)\)/g],n=[/(\/Title\s*\()/g,/(\/Subject\s*\()/g];t.default=class{constructor(e){this.pdfBlob=e}async sliceBlob(t){const o=this.pdfBlob instanceof e?e.byteLength(this.pdfBlob):this.pdfBlob.size,s={xmp:[],urls:[],info:[]};let l="";for(let c=0;c<o;c+=t){const o=this.pdfBlob instanceof e?this.pdfBlob.toString("utf8",c,c+t):await this.pdfBlob.slice(c,c+t).text(),u=[...o.matchAll(new RegExp(r,"g"))].map(e=>e.index),d=[...o.matchAll(new RegExp(a,"g"))].map(e=>e.index);if(""!==l)if(0===u.length&&0===d.length)l+=o;else if(d.length>0){const e=d.shift()||-1;l+=o.substring(0,e+12),s.xmp.push(l),l=""}for(;u.length>0||d.length>0;){const e=u.shift()||-1,t=d.shift()||-1;-1===t?l=o.substring(e,o.length):s.xmp.push(o.substring(e,t+12))}for(const e of i){let t=e.exec(o);for(;null!==t;)s.urls.push(t[1]),t=e.exec(o)}for(const e of n){let t=e.exec(o);for(;null!==t;){let r=t.index;for(let e=t.index+t[1].length;e<t.index+500;e+=1)if(")"===o[e]&&"\\"!==o[e-1]){r=e;break}if(r>t.index){const e=o.substring(t.index+t[1].length,r).replace(/\\\(/g,"(").replace(/\\\)/g,")");/10\.\d+\/.+/.test(e)&&s.info.push(e)}t=e.exec(o)}}}let c=[];for(const e of s.urls){const t=e.replace(/%2F/g,"/").match(/(.+)(10\.\d+\/[^?&]+)(.*)/);if(t){const[,,e]=t;c.push(e.toLocaleLowerCase())}}let u=[...new Set(c)];if(1===u.length)[s.doi]=u;else{c=[];for(const e of s.info){const t=e.match(/(10\.\d+\/\S+)/);if(t){const[,e]=t;c.push(e.toLocaleLowerCase())}}u=[...new Set(c)],1===u.length&&([s.doi]=u)}return s}async extract(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:102400;return this.sliceBlob(e)}}}).call(this,r(39).Buffer)},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(9),n=r(201),o=r(55),s=a(r(29)),l=a(r(44));var c={func:async e=>{const{url:t,pub:r,blob:a,contentDisposition:o,sessionData:c}=e.data;let u;try{let s,c;if(a)c=o?(0,i.extractFilenameFromContentDisposition)(o):"",s=a;else{const e=await fetch(t);if(!e.ok)return{status:"done",error:"Failed to fetch attachment from url"};const r=e.headers.get("content-disposition");c=r?(0,i.extractFilenameFromContentDisposition)(r):"",s=await e.blob()}if(!(s.size<=i.ATTACHMENT_FILESIZE_LIMIT))return{status:"done",error:"File too big",errorType:"size"};u=await(0,n.insertAttachmentInBackend)(l.default,s,r,t,c,e.libraryId,s.type)}catch(e){s.default.debug("context-menu",e)}return{status:"done",error:null,pub:r,libraryId:e.libraryId,attachmentData:u,sessionData:c}},callbacks:[{remoteAction:"render.addAttachmentDone",remoteTarget:"cs"},{remoteAction:"render.addAttachmentDone",remoteTarget:"popup"}],callbackMiddleware:o.jobCallbackMiddleware,keepJobOnError:!1};t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(55),i=r(42);var n={func:async e=>{const{blob:t}=e.data;let{url:r}=e.data;if(r||(r=await(0,i.getSignedFilterLogS3Url)(e.libraryId)),!r)return null;return!!(await fetch(r,{method:"PUT",body:t})).ok||null},callbacks:[],callbackMiddleware:a.jobCallbackMiddleware,keepJobOnError:!0};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteAttachment=t.getFileAsBlob=t.getAllAttachments=void 0;t.getAllAttachments=async e=>{if(!window)return{attachments:[],error:"window not available"};if(!window.webkitRequestFileSystem)return{attachments:[],error:"webkitRequestFileSystem not available"};return await new Promise(t=>{window.webkitRequestFileSystem(window.PERSISTENT,104857600,r=>{r.root.getDirectory(e,{create:!1},e=>{e.getDirectory("pp_attachments",{create:!1},e=>{e.createReader().readEntries(e=>{const r=e.map(e=>e.name);t({attachments:r,error:null})})},e=>{t({attachments:[],error:e})})},e=>{t({attachments:[],error:e})})})})};t.getFileAsBlob=async(e,t)=>{if(!window)return{blob:null,error:"window not available"};if(!window.webkitRequestFileSystem)return{blob:null,error:"webkitRequestFileSystem not available"};return await new Promise(r=>{window.webkitRequestFileSystem(window.PERSISTENT,104857600,a=>{a.root.getDirectory(e,{create:!1},e=>{e.getDirectory("pp_attachments",{create:!1},e=>{e.getFile(t,{create:!1},e=>{e.file(e=>{e&&e instanceof Blob?r({blob:e,error:null}):r({blob:null,error:"file not found"})})},e=>{r({blob:null,error:e})})},e=>{r({blob:null,error:e})})},e=>{r({blob:null,error:e})})})})};t.deleteAttachment=async(e,t)=>window?window.webkitRequestFileSystem?(await new Promise(r=>{window.webkitRequestFileSystem(window.PERSISTENT,104857600,a=>{a.root.getDirectory(e,{create:!1},e=>{e.getDirectory("pp_attachments",{create:!1},e=>{e.getFile(t,{create:!1},e=>{e.remove(()=>{r({error:null})})},e=>{r({error:e})})},e=>{r({error:e})})},e=>{r({error:e})})})}),{error:null}):{error:"webkitRequestFileSystem not available"}:{error:"window not available"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logToBackend=void 0;var a=r(20);t.logToBackend=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;try{const i=a.PAPERPILE_API_URL+"/api/debug/webapp/logs",n={msg:e,details:t,moreData:r};await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)})}catch(e){i.errorNoNotify("api","Error when sending logs to backend",e)}return null}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.closeOffscreenDocument=t.setupOffscreenDocument=void 0;var i=r(389),n=a(r(29));const o=async()=>{if("getContexts"in chrome.runtime){const e=await chrome.runtime.getContexts({contextTypes:["OFFSCREEN_DOCUMENT"]});return Boolean(e.length)}return(await clients.matchAll()).some(e=>e.url.includes(chrome.runtime.id))};t.setupOffscreenDocument=async e=>{var t,r;const a=await o();if("MATCH_MEDIA"===e&&!a&&null!==(t=chrome.offscreen)&&void 0!==t&&null!==(r=t.Reason)&&void 0!==r&&r.MATCH_MEDIA){try{await chrome.offscreen.createDocument({url:"dist-new/html/offscreen-matchmedia.html",reasons:[chrome.offscreen.Reason.MATCH_MEDIA],justification:"reason for needing the document"})}catch(e){e&&(0,i.checkBrowserError)([i.CHROME_OFFSCREEN_SINGLE_ERROR],e.toString())?n.default.info("bg","Error: Only a single offscreen document may be created"):e&&(0,i.checkBrowserError)([i.CHROME_OFFSCREEN_CLOSED],e.toString())?n.default.info("bg","Error: Offscreen document closed before fully loading"):n.default.error("bg",e)}return!0}return!("MATCH_MEDIA"!==e||!a)};t.closeOffscreenDocument=async()=>{if(chrome.offscreen){await o()&&await chrome.offscreen.closeDocument()}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(44)),n=a(r(29)),o=r(46);t.default=async(e,t)=>{if(!i.default.forLibrary().getIsInitialized())return;if(await(0,o.isWebAppOpen)())return;if(Math.random()<t)return;n.default.debug("keepInSync","reason: "+e);const r=Date.now()/1e3,a=await i.default.forLibrary().getLocalSettings();if(a.last_server_sync&&a.last_server_sync>r-1800)n.default.debug("keepInSync","Successful sync recently. Done.");else if(a.lastSyncAttempt&&a.lastSyncAttempt>r-1800)n.default.debug("keepInSync","Attempted to sync recently. Done.");else{for(const e of Object.keys(i.default.libraries)){const t=await i.default.forLibrary(e).sync();t&&!("error"in t)&&await i.default.forLibrary(e).setLocalSettings({lastSyncAttempt:r})}n.default.debug("keepInSync","Synced all libraries")}}},,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(105),o=r(181);const s={showReference:{restrictedFor:[]},openAttachedFiles:{restrictedFor:[]},shareReferencesAdHoc:{restrictedFor:[]},editNotes:{restrictedFor:["reader"],onePermissionEnoughForMultipleFolders:!0},addAnnotationsToPdf:{restrictedFor:["reader"],onePermissionEnoughForMultipleFolders:!0},addReference:{restrictedFor:["reader"]},trashReference:{restrictedFor:["reader"],onePermissionEnoughForMultipleFolders:!0},addRemoveAttachments:{restrictedFor:["reader"],onePermissionEnoughForMultipleFolders:!0},editReference:{restrictedFor:["reader"],onePermissionEnoughForMultipleFolders:!0},addEditLabels:{restrictedFor:["reader"],onePermissionEnoughForMultipleFolders:!0},addEditFolders:{restrictedFor:["reader"],onePermissionEnoughForMultipleFolders:!0}},l={addNewMembers:{restrictedFor:["reader","writer"]},toggleWebShare:{restrictedFor:[]},changePermissionToAdminOwner:{restrictedFor:["reader","writer"]},editSharedFolderLibrarySettings:{restrictedFor:["reader","writer"]},renameSharedFolder:{restrictedFor:["reader"]},renameSharedRoot:{restrictedFor:["reader","writer"]},deleteSharedFolder:{restrictedFor:["reader","cannot_delete"]},deleteSharedRoot:{restrictedFor:["reader","writer","cannot_delete"]},rearrangeSubfolders:{restrictedFor:["reader"]}},c=e=>e in s;class u{constructor(){(0,i.default)(this,"isWebSharingAllowed",e=>{let{accessLevelsByFolderId:t,libraryFolderIds:r}=e;const a=(e,t)=>"nobody"!==t&&e.some(e=>(0,o.hasMinimumAccess)(e,t));if("shared-library"===r.type){var i;const e=(null===(i=this.getSharedLibrary(r.libraryId))||void 0===i?void 0:i.web_sharing_minimal_access_level)||(0,n.getDefaultCollectionSharingSettings)().web_sharing_minimal_access_level;return[...t.values()].some(t=>{const r=[...t.personal,...t.organization];return a(r,e)})}return[...t.entries()].some(e=>{let[t,r]=e;const i=[...r.personal,...r.organization],o=this.getCollection(t),s=(0,n.parseCollectionSharingSettings)(null==o?void 0:o.sharing_settings).web_sharing_minimal_access_level;return a(i,s)})}),(0,i.default)(this,"filterFoldersWithAnnotationsAllowed",e=>"shared-library"===e.type?e:{...e,folderIds:e.folderIds.filter(e=>{const t=this.getCollection(e);return!0===(0,n.parseCollectionSharingSettings)(null==t?void 0:t.sharing_settings).share_annotations})})}getCollectionPermissions(){return this.getPermissions().filter(e=>(0,o.isCollectionPermission)(e))}getAccessLevelsByFolderOrLibraryId(e,t){if("shared-library"===t&&"personal"===e)return{personal:["owner"],organization:[]};if("shared-folder"===t&&this.isFolderOwner(e))return{personal:["owner"],organization:[]};const r=this.getCollectionPermissions(),a="shared-library"===t?r.filter(t=>"ROOT"===t.folder_id&&t.library_id===e):r.filter(t=>t.folder_id===e),i={personal:[],organization:[]};for(const e of a)e.group_id===this.getUserId()?i.personal.push(e.access_level):i.organization.push(e.access_level);return i}getAccessLevelsByLibraryFolderIds(e){const t=this.getCollectionPermissions().filter(t=>t.library_id===e.libraryId&&e.folderIds.includes(t.folder_id)),r=new Map;for(const t of e.folderIds)r.set(t,{personal:[],organization:[]});for(const e of t){const t=r.get(e.folder_id)||{personal:[],organization:[]};e.group_id===this.getUserId()?t.personal.push(e.access_level):t.organization.push(e.access_level),r.set(e.folder_id,t)}return r}getAccessLevelsByActiveLibraryFolderIds(){const e=this.getActiveLibraryFolderIds();if(!e)return[{personal:["owner"],organization:[]}];if(!e.folderIds.length)throw new Error("activeLibraryFolderIds has no folders, pass ['ROOT'] or list of folders");return[...this.getAccessLevelsByLibraryFolderIds(e).values()]}static hasPermissionInFolders(e,t){if(!t.length)return!1;const{restrictedFor:r}=c(e)?s[e]:l[e],a=e=>e.some(o.isCollectionAccessLevelPositive)&&e.every(e=>!r.includes(e)),i=e=>a(e.personal)||a(e.organization);return c(e)&&s[e].onePermissionEnoughForMultipleFolders?t.some(i):t.every(i)}hasReferencePermission(e,t,r){const a=t&&r?[this.getAccessLevelsByFolderOrLibraryId(t,r)]:this.getAccessLevelsByActiveLibraryFolderIds();return u.hasPermissionInFolders(e,a)}hasSharePermission(e,t,r){const a=this.getAccessLevelsByFolderOrLibraryId(e,t);return u.hasPermissionInFolders(r,[a])}isFolderOwner(e){const t=this.getCollection(e);return(null==t?void 0:t.owner)===this.getUserId()}getReferenceAllowedActions(e,t){return Object.keys(s).filter(r=>"shareReferencesAdHoc"!==r&&"addAnnotationsToPdf"!==r&&this.hasReferencePermission(r,e,t))}getShareAllowedActions(e,t){return Object.keys(l).filter(r=>"toggleWebShare"!==r&&this.hasSharePermission(e,t,r))}hasPermission(e,t){if("personal"===t.libraryId)return!0;if(!t.folderIds.length)throw new Error("libraryFolderIds has no folders, pass ['ROOT'] or list of folders");const r="addAnnotationsToPdf"===e?this.filterFoldersWithAnnotationsAllowed(t):t,a=this.getAccessLevelsByLibraryFolderIds(r);return!!("shareReferencesAdHoc"!==e&&"toggleWebShare"!==e||this.isWebSharingAllowed({accessLevelsByFolderId:a,libraryFolderIds:r}))&&u.hasPermissionInFolders(e,[...a.values()])}hasPermissionInActiveLibraryFolderIds(e){const t=this.getActiveLibraryFolderIds();return!t||this.hasPermission(e,t)}}var d=u;t.default=d},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(1175)),n=r(958),o=r(94);class s extends i.default{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"paperpile_database",arguments.length>1?arguments[1]:void 0),this.version(8).stores({Users:"_id",Library:"_id, citekey",Attachments:"_id, pub_id",Collections:"_id",Notes:"_id, attachment_id",Changes:"_id, timestamp",LocalSettings:"_id",FilterMap:"_id",CitationLocales:"_id",CitationStyles:"_id",Duplicates:"_id, *id_list, *duplicates",Jobs:"_id",Files:"_id",ChangesBackup:"_id",Profiles:"_id",SharedLibraries:"_id",Permissions:"_id, [library_id+folder_id], folder_id",FilterMapLogs:"++_id",FilterMapFlags:"_id"}),this.Users=this.table("Users"),this.Library=this.table("Library"),this.Attachments=this.table("Attachments"),this.Collections=this.table("Collections"),this.Notes=this.table("Notes"),this.Changes=this.table("Changes"),this.LocalSettings=this.table("LocalSettings"),this.FilterMap=this.table("FilterMap"),this.Duplicates=this.table("Duplicates"),this.CitationLocales=this.table("CitationLocales"),this.CitationStyles=this.table("CitationStyles"),this.Jobs=this.table("Jobs"),this.Files=this.table("Files"),this.ChangesBackup=this.table("ChangesBackup"),this.Profiles=this.table("Profiles"),this.SharedLibraries=this.table("SharedLibraries"),this.Permissions=this.table("Permissions"),this.FilterMapLogs=this.table("FilterMapLogs"),this.FilterMapFlags=this.table("FilterMapFlags")}async exportData(){return{dbBlob:await(0,n.exportDB)(this,{filter:e=>"Files"!==e}),fileIds:(await this.Files.toArray()).map(e=>e._id)}}async exportFilterLogsData(){return(0,n.exportDB)(this,{filter:e=>e===this.FilterMapLogs.name})}async importData(e){await(0,n.importInto)(this,e,{acceptMissingTables:!0,acceptVersionDiff:!0,acceptNameDiff:!0,acceptChangedPrimaryKey:!0,overwriteValues:!0,clearTablesBeforeImport:!0,noTransaction:!0})}async add(e,t,r){const a=["Changes"];try{await this.transaction("rw",this[e],this.Changes,async()=>{a.includes(e)||await this.table(e).add(t),r&&await this.Changes.add(r)})}catch(t){let r="";throw t instanceof Error&&(r=t.stack?JSON.stringify(t.stack):t.message||""),new Error(`Error adding data to ${e}: ${r}`)}}async update(e,t,r,a){await this.transaction("rw",this[e],this.Changes,async()=>{await this.table(e).update(t,r),a&&await this.Changes.add(a)})}async put(e,t,r,a){await this.transaction("rw",this[e],this.Changes,async()=>{await this.table(e).put(t,r),a&&await this.Changes.add(a)})}async remove(e,t,r){await this.transaction("rw",this[e],this.Changes,async()=>{await this.table(e).delete(t),r&&await this.Changes.add(r)})}async get(e,t){return this.table(e).get(t)}async getWhere(e,t,r){const a=await this.table(e).where(t).anyOf(r).toArray();return a||[]}async getWhereWithOperator(e,t,r,a){if(a)return this.table(e).where(t)[r](a).distinct().toArray()}async count(e){return this.table(e).count()}async isEmpty(){try{const e=["SharedLibraries","Library","Attachments","Collections","Notes","Users"];for(const t of this.tables){const r=t.name;if(e.includes(r)&&await this.count(r)>0)return!1}return!0}catch(e){return!1}}async addBulk(e,t,r){await this.transaction("rw",this[e],this.Changes,async()=>{for(const r of this.tables)r.name===e&&await r.bulkAdd(t);r&&await this.Changes.bulkAdd(r)})}async getBulk(e,t){return this.table(e).bulkGet(t)}async putBulk(e,t,r){r&&await this.Changes.bulkAdd(r);const a=(0,o.chunkArray)(t,250);for(const t of a)await this.table(e).bulkPut(t)}async updateBulk(e,t,r,a){await this.transaction("rw",this[e],this.Changes,async()=>{for(const[i,n]of t.entries())await this.table(e).update(n,r),a&&await this.Changes.add(a[i])})}async updateBulk2(e,t,r){await this.transaction("rw",this[e],this.Changes,async()=>{for(const r of t)await this.table(e).where("_id").equals(r.key).modify(r.changes);r&&await this.Changes.bulkAdd(r)})}async removeBulk(e,t,r){await this.transaction("rw",this[e],this.Changes,async()=>{await this.table(e).bulkDelete(t),r&&await this.Changes.bulkAdd(r)})}async getAll(e){return"Collections"===e?(await this.table(e).toArray()).filter(e=>"shared_folder"!==e.collectionType):this.table(e).toArray()}async getWithOffset(e,t){return this.table(e).offset(t).toArray()}async clearChanges(e){await this.table("Changes").where("timestamp").belowOrEqual(e).delete()}async clearStore(e){await this.table(e).clear()}async clearStores(){for(const e of this.tables)await e.clear()}async getKeys(e){return this.table(e).orderBy("_id").keys()}async getPartial(e,t,r){const a=[],i=r&&r.length?this.table(e).where("_id").anyOf(r):this.table(e);return await i.each(e=>{const r={};for(const a of t)a in e&&(r[a]=e[a]);a.push(r)}),a}}t.default=s},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"IndexedDBWrapper",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Model",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"CitationStyles",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"SyncClient",{enumerable:!0,get:function(){return s.default}});var i=a(r(879)),n=a(r(1176)),o=a(r(1380)),s=a(r(961))},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nonNullable=void 0;t.nonNullable=e=>null!=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=async e=>{const t=new TextEncoder,r=await crypto.subtle.digest("SHA-1",t.encode(e));return Array.from(new Uint8Array(r)).map(e=>e.toString(16).padStart(2,"0")).join("")};t.default=a},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.librarySearchSyncUrl=t.baseUrl=void 0;var i=a(r(7)),n=r(834),o=r(40),s=r(439),l=a(r(182));const c="https://api.paperpile.com";t.baseUrl=c;t.librarySearchSyncUrl="https://virginia.library.paperpile.com";const u=e=>new Promise(t=>setTimeout(t,e)),d=e=>{let t=null,r=null;return{promise:new Promise((e,a)=>{t=e,r=a}),resolve:t,reject:r,syncCallConfig:e}};t.default=class{constructor(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};(0,i.default)(this,"status",{waiting:!1,syncing:!1,uploaded:0,totalUploads:0,downloaded:0,totalDownloads:0,initialSyncFinished:null}),(0,i.default)(this,"debug",{requests:[],responses:[],status:[]}),(0,i.default)(this,"cancelled",!1),(0,i.default)(this,"config",{maxRetries:1,requestTimeout:6e4,pageSize:null,uploadPageSize:100,debounce:1e3,shouldSyncLock:!1,debugMode:!1,debugDelay:0,debugCrashMode:null}),(0,i.default)(this,"debounceTimeout",null),(0,i.default)(this,"firstDebounceTime",null),(0,i.default)(this,"syncLockTimeout",null),(0,i.default)(this,"loggerLabel","sync client"),this.libraryId=e,this.model=t,this.logger=r,this.emitter=new l.default,this.fetch=(null==n?void 0:n.fetch)||fetch.bind(globalThis),this.getUrlBase=(null==n?void 0:n.getUrlBase)||(()=>c),this.getLibrarySearchUrlBase=(null==n?void 0:n.getLibrarySearchUrlBase)||(()=>"https://virginia.library.paperpile.com"),this.getTimestamp=(null==n?void 0:n.getTimestamp)||s.getTimestamp,this.config={...this.config,...a},this.updateCachedInitialSyncFinished()}emit(e,t){return"syncProgress"===e&&!1===t.waiting&&!1===t.syncing&&this.logger.timeEnd(this.loggerLabel,"Sync"),this.emitter.emit(e,t)}on(e,t){return this.emitter.on(e,t)}off(e,t){return this.emitter.off(e,t)}waitForSync(){return this.nextSyncPromise?this.nextSyncPromise.promise:this.currentSyncPromise?this.currentSyncPromise.promise:null}async wipeAndReset(){this.cancelRequest(),this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=null,this.status={waiting:!1,syncing:!1,uploaded:0,totalUploads:0,downloaded:0,totalDownloads:0,initialSyncFinished:!1},this.currentSyncPromise&&this.currentSyncPromise.resolve(this.status),delete this.currentSyncPromise,this.nextSyncPromise&&this.nextSyncPromise.resolve(this.status),delete this.nextSyncPromise,await this.model.wipeAll()}async cancelRequest(){(this.status.waiting||this.status.syncing)&&(this.cancelled=!0)}async updateCachedInitialSyncFinished(){try{const e=await this.model.getLocalSettings();this.status.initialSyncFinished="boolean"==typeof e.initialSyncFinished&&e.initialSyncFinished}catch(e){this.logger.error(this.loggerLabel,"Getting LocalSettings failed",e)}}sync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!1===this.status.waiting&&!1===this.status.syncing&&this.logger.time(this.loggerLabel,"Sync"),delete this.status.error,this.nextSyncPromise)return this.logger.debug(this.loggerLabel,"=> Next sync already scheduled"),this.emit("syncProgress",this.status),e.resync&&(this.nextSyncPromise.syncCallConfig.resync=!0),this.nextSyncPromise.promise;if(this.currentSyncPromise&&!this.debounceTimeout)return this.logger.debug(this.loggerLabel,"=> Current sync in progress - scheduling next sync"),this.nextSyncPromise=d(e),this.emit("syncProgress",this.status),e.resync&&(this.nextSyncPromise.syncCallConfig.resync=!0),this.nextSyncPromise.promise;this.currentSyncPromise||(this.currentSyncPromise=d(e));let t="number"==typeof this.currentSyncPromise.syncCallConfig.debounce?this.currentSyncPromise.syncCallConfig.debounce:this.config.debounce;return null!==this.firstDebounceTime&&this.firstDebounceTime+1e4<Date.now()&&(t=0),0===t?(this.logger.debug(this.loggerLabel,"=> Start actual new sync without debounce"),this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),this.firstDebounceTime=null,this.status.waiting=!1,this.status.syncing=!0,this.emit("syncProgress",this.status),this._runAllSyncs()):(this.debounceTimeout?(this.logger.debug(this.loggerLabel,"=> Debounce postponed"),clearTimeout(this.debounceTimeout),this.debounceTimeout=null):(this.logger.debug(this.loggerLabel,"=> Debouncing sync"),this.firstDebounceTime=Date.now()),this.status.waiting=!0,this.status.syncing=!1,this.emit("syncProgress",this.status),this.debounceTimeout=setTimeout(async()=>{this.logger.debug(this.loggerLabel,"=> Start actual new sync after debounce"),this.debounceTimeout=null,this.firstDebounceTime=null,this.status.waiting=!1,this.status.syncing=!0,this.emit("syncProgress",this.status),this._runAllSyncs()},t)),this.currentSyncPromise.promise}async _runAllSyncs(){this.logger.debug(this.loggerLabel,"=> Start first sync cycle");const e=[];try{for(;this.currentSyncPromise;){if(e.push(this.currentSyncPromise),await this._runOneSyncRound(this.currentSyncPromise.syncCallConfig),!this.nextSyncPromise){const e=await this.model.getChangesBackup();if(e.length>0)await this.model.reapplyChangesBackup(e),await this.model.clearChangesBackup(),this.sync({debounce:0});else if(!0===this.currentSyncPromise.syncCallConfig.resync)await this.model.setLocalSettings({syncClientId:(0,n.v4)()}),this.sync({debounce:0});else{await this.model.finishSync();const{changes:e}=await this.model.getOplog();e.length>0&&this.sync({debounce:0})}}if(this.currentSyncPromise=this.nextSyncPromise,delete this.nextSyncPromise,this.currentSyncPromise){const e="number"==typeof this.currentSyncPromise.syncCallConfig.debounce?this.currentSyncPromise.syncCallConfig.debounce:this.config.debounce;0!==e&&(this.logger.debug(this.loggerLabel,"=> Debouncing sync"),await u(e)),this.logger.debug(this.loggerLabel,"=> Start another sync cycle")}}this.logger.debug(this.loggerLabel,"=> Done syncing"),this.status.initialSyncFinished||(await this.model.setLocalSettings({initialSyncFinished:!0}),this.status.initialSyncFinished=!0),this.status.syncing=!1}catch(e){var t,r;this.status.waiting=!1,this.status.syncing=!1,this.status.error=e,delete this.status.error._e,delete this.status.error._promise,delete this.status.error._stack,null===(t=this.currentSyncPromise)||void 0===t||t.resolve(this.status),delete this.currentSyncPromise,null===(r=this.nextSyncPromise)||void 0===r||r.resolve(this.status),delete this.nextSyncPromise}finally{this.status.uploaded=0,this.status.totalUploads=0,this.status.downloaded=0,this.status.totalDownloads=0,this.emit("syncProgress",this.status);for(const t of e)t.resolve(this.status);await this._clearSyncLock()}}async _runOneSyncRound(e){this.model.setSyncInfo({type:null,totalServerChanges:0,totalUploads:0,processedChanges:0});const t={};this.config.pageSize&&(t.pageSize=this.config.pageSize);const{api_key:r,syncClientId:a,last_server_sync:i}=await this.model.getLocalSettings();this.libraryId!==o.personalLibraryId&&(t.libraryId=this.libraryId),r&&(t.api_key=r),a?t.syncClientId=a:(t.syncClientId=(0,n.v4)(),await this.model.setLocalSettings({syncClientId:t.syncClientId}));let s=e.resync||!i||(e=>{const t=new Date(1e3*e),r=new Date;return r.setMonth(r.getMonth()-6),t<r})(i);s?(i&&await this.model.setLocalSettings({last_server_sync:void 0}),t.resync=!0):t.last_server_sync=i,this.config.shouldSyncLock&&await this._setSyncLock(),this.config.debugDelay&&await u(this.config.debugDelay);let{changes:l,lastTimestamp:c}=s?{changes:[],lastTimestamp:void 0}:await this.model.getOplog();l.length&&this.logger.debug("sync client",`Sending ${l.length} local changes to server`),this.status.totalUploads+=l.length;let d=null,p=null,m=null;do{var h;if(this._throwIfCancelled(),l.length){const e=l.splice(0,this.config.uploadPageSize);m=e.length;const r=this._compactClientChanges(e);t.clientChanges=await this.model.completeOplogData(r);for(const e of t.clientChanges)delete e._id,delete e.owner;l.length?t.moreClientChanges=!0:delete t.moreClientChanges}else delete t.clientChanges,delete t.moreClientChanges,m=null;if(this.config.debugMode&&this.debug.requests.push({...t}),this.config.debugCrashMode&&(t.crashMode=this.config.debugCrashMode),this.logger.time(this.loggerLabel,"Server response time for one sync round"),p=await this._fetch(t),this.logger.timeEnd(this.loggerLabel,"Server response time for one sync round"),this._throwIfCancelled(),p.totalServerChanges&&this.model.setSyncInfo({type:t.resync?"all":null,totalServerChanges:p.totalServerChanges||0,totalUploads:l.length}),this.logger.time(this.loggerLabel,"Client handling time for one sync round"),p.totalServerChanges&&(this.status.totalDownloads+=p.totalServerChanges),null!==m&&(this.status.uploaded+=m),this.emit("syncProgress",this.status),p.syncSession&&(t.syncSession=p.syncSession),p.lastClientSync&&await this.model.clearOplog(p.lastClientSync),p.syncStartTime&&(d=p.syncStartTime),this._crashTest("crashPoint3"),p.serverChanges){let e=0;const t=t=>{e+=t,this.emit("syncProgress",{...this.status,downloaded:this.status.downloaded+e})};if(p.resync){s=!0;const e=await this.model.getAll("Changes");if(e.length){const t=await this.model.completeOplogData(e);await this.model.insertChangesBackupBulk(t)}this.status.initialSyncFinished=!1,await this.model.removeSyncedData(),l=[],this.status.uploaded=this.status.totalUploads}await this.model.applyServerChanges(p.serverChanges,t),this.status.downloaded+=p.serverChanges.reduce((e,t)=>e+("mcollection"in t&&Array.isArray(t.id)?t.id.length:1),0)}this._crashTest("crashPoint4"),p.last_server_sync&&(await this.model.setLocalSettings({last_server_sync:p.last_server_sync}),t.last_server_sync=p.last_server_sync),t.resync||this._crashTest("crashPoint5"),2===this.status.downloaded&&this._crashTest("crashPoint6"),p.token?t.token=p.token:delete t.token,this.config.debugMode&&(this.debug.responses.push({...p}),this.debug.status.push({...this.status})),delete t.resync,this.logger.timeEnd(this.loggerLabel,"Client handling time for one sync round")}while(null!==(h=l)&&void 0!==h&&h.length||p.token);c&&await this.model.clearOplog(c),s&&d&&await this.model.setLocalSettings({last_server_sync:d})}_throwIfCancelled(){if(this.cancelled)throw this.cancelled=!1,new Error("Cancelled request")}_compactClientChanges(e){let t=null;const r=e=>{if(!t)throw new Error("Unexpected missing lastChange");Array.isArray(t.id)||(t.id=[t.id]),Array.isArray(e.id)?t.id.push(...e.id):t.id.push(e.id),t.timestamp=e.timestamp},a=[];for(const h of e){var i,n,o,s,l,c,u,d,p,m;t&&h.mcollection===t.mcollection&&h.action===t.action?Array.isArray(t.id)&&t.id.length>this.config.uploadPageSize?(t=h,a.push(h)):"remove"!==h.action?"update"===h.action&&1===(null===(i=h.fields)||void 0===i?void 0:i.length)&&1===(null===(n=t.fields)||void 0===n?void 0:n.length)&&h.fields[0]===t.fields[0]&&["trashed","starred"].includes(h.fields[0])||"update"===h.action&&((null===(o=h.push)||void 0===o?void 0:o.length)||0)>0&&(null===(s=h.push)||void 0===s?void 0:s.length)===(null===(l=t.push)||void 0===l?void 0:l.length)&&null!==(c=t.push)&&void 0!==c&&c.every(e=>{var t;return null===(t=h.push)||void 0===t?void 0:t.includes(e)})||"update"===h.action&&((null===(u=h.pull)||void 0===u?void 0:u.length)||0)>0&&(null===(d=h.pull)||void 0===d?void 0:d.length)===(null===(p=t.pull)||void 0===p?void 0:p.length)&&null!==(m=t.pull)&&void 0!==m&&m.every(e=>{var t;return null===(t=h.pull)||void 0===t?void 0:t.includes(e)})?r(h):(t=h,a.push(h)):r(h):(t=h,a.push(h))}return a}async _fetch(e){var t;let r=null;for(let t=0;t<this.config.maxRetries+1;t+=1){this.config.debugCrashMode&&t>0&&(delete this.config.debugCrashMode.crashPoint1,delete this.config.debugCrashMode.crashPoint2);try{if(r=e.resync&&!e.pageSize&&0===t?await this._timeout(this.config.requestTimeout,this.fetch(this.getLibrarySearchUrlBase()+"/sync",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})):await this._timeout(this.config.requestTimeout,this.fetch(this.getUrlBase()+"/api/sync?v=3",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})),r.ok)return r.json();if(429===r.status){const e=r.headers.get("x-ratelimit-reset");if(e){const r=parseInt(e);if(!Number.isNaN(r)){const e=Date.now()/1e3,a=Math.max(r-e,5);await u(1e3*a),t-=1;continue}}}}catch(e){if(t<this.config.maxRetries)continue;const r=e.message;throw{msg:"Failed to fetch"===r?"Offline":r,status:500}}}throw{msg:r&&await r.text()||"Request error",status:(null===(t=r)||void 0===t?void 0:t.status)||500}}_timeout(e,t){return new Promise((r,a)=>{const i=setTimeout(()=>{a(new Error("Connection timeout"))},e);t.then(e=>{clearTimeout(i),r(e)}).catch(e=>{clearTimeout(i),a(e)})})}_crashTest(e){if(this.config.debugCrashMode&&Math.random()<this.config.debugCrashMode[e])throw"CrashMode: "+e}async _setSyncLock(){this.syncLockTimeout&&clearTimeout(this.syncLockTimeout),await this.model.setLocalSettings({syncLock:!0,syncLockTimestamp:this.getTimestamp()}),this.syncLockTimeout=setTimeout(()=>this._setSyncLock(),1e3)}async _clearSyncLock(){this.syncLockTimeout&&clearTimeout(this.syncLockTimeout),await this.model.setLocalSettings({syncLock:!1})}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(399)),n=a(r(29));const o=r(136);var s=new i.default(n.default,o);t.default=s},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.updateContextMenu=t.initContextMenu=t.getSelectedPubFromLocalSettings=void 0;var i=a(r(119)),n=r(26),o=r(32),s=r(40),l=a(r(116)),c=r(46),u=a(r(185)),d=a(r(44)),p=r(42),m=r(100),h=a(r(29)),g=r(403),f=a(r(202));l.default.init({resources:(0,f.default)(),fallbackLng:"en",ns:["extension"],defaultNS:"extension",interpolation:{escapeValue:!1}});const b={PP_MAIN:"pp_main",PP_IMPORT_MULTIPLE:"pp_multiple",PP_IMPORT_MORE_LIBRARIES:"pp_more_libraries",PP_IMPORT_MORE_FOLDERS:"pp_more_folders",PP_IMPORT_PERSONAL:"pp_import_"+s.personalLibraryId,PP_OPEN_WEBAPP:"pp_open_webapp",PP_OPEN_DIAGNOSE:"pp_open_diagnose",PP_ATTACH_FILE:"pp_attach_file"},y={PP_ADD:["link"],PP_ATTACH:["link","image"],PP_OPEN:["all"]},v=(e,t)=>{chrome.contextMenus.create({id:t,parentId:e,type:"separator",contexts:["all"]})},_=async(e,t)=>{const r=l.default.t("contextMenu.menu_attachNoSelection");if(null==e||!e.pubId)return r;const a=await d.default.forLibrary(e.libraryId).getPub(e.pubId);if(a){let e=l.default.t("contextMenu.menu_attachTo",{pub:(0,o.formatAuthorYearUncleaned)(a)});return t||(e=`${e} ${l.default.t("contextMenu.text_readOnly")}`),e}return r},w=async()=>{const e=await d.default.forLibrary().getLocalSettings(),{selectedPubId:t}=e;if(!t)return null;const r=t.split(/:/);return r&&3===r.length?{libraryId:r[0],pubId:r[1],folderId:r[2]}:null};t.getSelectedPubFromLocalSettings=w;const P=async(e,t,r,a)=>{let i=!1;if(a&&t)if(t===s.personalLibraryId)i=!0;else{const a=await d.default.forLibrary(t).getSharedLibrary(t)?"shared-library":"shared-folder";i=e.hasReferencePermission("addRemoveAttachments",r||t,a)}return i};t.initContextMenu=async()=>{const e=await d.default.forLibrary().getPermissions(),t=await(0,p.getUserFromDb)();if(!t)return;await(0,g.initPermissionsService)({user:t,store:{collectionsList:[],permissionsList:e||[]}}),chrome.contextMenus.removeAll(),chrome.contextMenus.create({id:b.PP_MAIN,title:"Paperpile",contexts:y.PP_OPEN});const r={folders:[],libraries:[]};for(const e of Object.keys(d.default.libraries))if(e!==s.personalLibraryId){const t=await d.default.forLibrary(e).getSharedLibrary(e);if(t){var a;r.libraries.push({libraryId:e,name:t.name,access:null===(a=(0,g.getPermissionsService)())||void 0===a?void 0:a.hasReferencePermission("addReference",e,"shared-library")})}else{const t=await d.default.forLibrary(e).getCollection(e);var o;if(t&&t.cName)r.folders.push({libraryId:e,name:t.cName,access:null===(o=(0,g.getPermissionsService)())||void 0===o?void 0:o.hasReferencePermission("addReference",e,"shared-folder")})}}if(0===r.libraries.length&&0===r.folders.length)chrome.contextMenus.create({id:b.PP_IMPORT_PERSONAL,parentId:b.PP_MAIN,title:l.default.t("contextMenu.menu_addLinkedToMyLibrary"),contexts:y.PP_ADD});else{chrome.contextMenus.create({id:b.PP_IMPORT_MULTIPLE,parentId:b.PP_MAIN,title:l.default.t("contextMenu.menu_addLinkedToMultiple"),contexts:y.PP_ADD}),chrome.contextMenus.create({id:b.PP_IMPORT_PERSONAL,parentId:b.PP_IMPORT_MULTIPLE,title:l.default.t("contextMenu.menu_myLibrary"),contexts:y.PP_ADD}),v(b.PP_IMPORT_MULTIPLE,"multiple-separator");for(const e of["libraries","folders"]){const t=r[e].splice(0,10);if(t.length>0){for(const e of t)chrome.contextMenus.create({id:"pp_import_"+e.libraryId,parentId:b.PP_IMPORT_MULTIPLE,title:e.access?""+e.name:`${e.name} ${l.default.t("contextMenu.text_readOnly")}`,contexts:y.PP_ADD,enabled:e.access});if(r[e].length>0){const t="libraries"===e?b.PP_IMPORT_MORE_LIBRARIES:b.PP_IMPORT_MORE_FOLDERS;chrome.contextMenus.create({id:t,parentId:b.PP_IMPORT_MULTIPLE,title:l.default.t("contextMenu.menu_more"),contexts:y.PP_ADD,enabled:!0});for(const a of r[e])chrome.contextMenus.create({id:"pp_import_"+a.libraryId,parentId:t,title:a.access?""+a.name:`${a.name} ${l.default.t("contextMenu.text_readOnly")}`,contexts:y.PP_ADD,enabled:a.access})}"libraries"===e&&r.folders.length>0&&v(b.PP_IMPORT_MULTIPLE,"multiple-separator-shared")}}}v(b.PP_MAIN,"main-separator-1");const h=await w(),f=await P((0,g.getPermissionsService)(),(null==h?void 0:h.libraryId)||"",(null==h?void 0:h.folderId)||null,(null==h?void 0:h.pubId)||null),S=await _(h,f);chrome.contextMenus.create({id:b.PP_ATTACH_FILE,parentId:b.PP_MAIN,title:S,contexts:y.PP_ATTACH,enabled:f}),v(b.PP_MAIN,"main-separator-2"),chrome.contextMenus.create({id:b.PP_OPEN_WEBAPP,parentId:b.PP_MAIN,title:l.default.t("contextMenu.menu_openWebApp"),contexts:["all"]}),v(b.PP_MAIN,"main-separator-3"),chrome.contextMenus.create({id:b.PP_OPEN_DIAGNOSE,parentId:b.PP_MAIN,title:l.default.t("contextMenu.menu_openDebug"),contexts:["all"]}),chrome.contextMenus.onClicked.addListener(async e=>{const t=await(0,m.getTabId)();if(e)if(e.menuItemId===b.PP_OPEN_WEBAPP)(0,c.openWebapp)({});else if(e.menuItemId===b.PP_OPEN_DIAGNOSE)chrome.tabs.create({url:chrome.runtime.getURL("diagnose.html")});else if(e.menuItemId===b.PP_ATTACH_FILE){let r=e.linkUrl;if(r?/#.+/.test(r)&&e.srcUrl&&(r=e.srcUrl):r=e.srcUrl,!r)return;const a=await w();if(null==a||!a.pubId)return;const n=await d.default.forLibrary(a.libraryId).getPub(a.pubId);if(!n)return;if(!u.default)return;u.default.addJob({type:"add-attachment",priority:i.default.SINGLE_AUTOCOMPLETE,broadcastType:"tab",tabId:t,libraryId:a.libraryId,data:{url:r,pub:n}})}else if(/^pp_import_/.test(e.menuItemId.toString())){const a=e.menuItemId.toString().replace(/^pp_import_/,"");if(a===s.personalLibraryId||36===a.length){var r;if(!e.linkUrl)return;if(!u.default)return;let o=e.linkUrl;if((0,n.isProxied)(o)){const e=(0,n.deproxify)(o);e&&e.cleanUrl&&(o=e.cleanUrl)}const s={pubtype:"PP_MISC",url:[o]};self.PP.library.Publication.autoClean(s);const l=await(0,p.detectDuplicates)({pubs:[s],libraryId:a});if(null!=l&&null!==(r=l[0])&&void 0!==r&&r[0])return;const c=await(0,p.getUserFromDb)();u.default.addJob({type:"autocomplete",priority:i.default.SINGLE_AUTOCOMPLETE,broadcastType:"tab",tabId:t,libraryId:a,data:{source:"context",user:c,pubExists:!1,tabId:t,pub:s}})}}})};t.updateContextMenu=async e=>{if(!e.pubId){const t=await _(e,!1);return void chrome.contextMenus.update(b.PP_ATTACH_FILE,{enabled:!1,title:t},()=>{chrome.runtime.lastError&&h.default.debug("context-menu",b.PP_ATTACH_FILE+" not yet found.")})}const t=await d.default.forLibrary().getPermissions(),r=await(0,p.getUserFromDb)();if(!r)return;await(0,g.initPermissionsService)({user:r,store:{collectionsList:[],permissionsList:t||[]}});const a=await P((0,g.getPermissionsService)(),e.libraryId,e.folderId,e.pubId),i=await _(e,a);chrome.contextMenus.update(b.PP_ATTACH_FILE,{enabled:a,title:i},()=>{chrome.runtime.lastError&&h.default.debug("context-menu",b.PP_ATTACH_FILE+" not yet found.")})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvVarWebpack=t.getKeys=void 0,t.getKeys=Object.keys;t.getEnvVarWebpack=(e,t,r)=>{if(void 0!==t)return t;if(void 0!==r)return r;throw new Error(`getEnvVar error: ${e} not defined. Did you forget to set it in .env?`)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=t.reapplyFormatting=t.getTags=t.getTextDecorationMap=t.interconvertString=t.convertBracesMarkup=t.validateBrackets=t.getLatexMathMap=t.stripHtml=t.stripBracesMarkup=void 0;const a=r(1396),i={A:"\u0391",B:"\u0392","\\Gamma":"\u0393","\\Delta":"\u0394",E:"\u0395",Z:"\u0396",H:"\u0397","\\Theta":"\u0398",I:"\u0399",K:"\u039a","\\Lambda":"\u039b",M:"\u039c",N:"\u039d","\\Xi":"\u039e",O:"\u039f","\\Pi":"\u03a0",P:"\u03a1","\\Sigma":"\u03a3",T:"\u03a4","\\Upsilon":"\u03a5","\\Phi":"\u03a6",X:"\u03a7","\\Psi":"\u03a8","\\Omega":"\u03a9","\\alpha":"\u03b1","\\beta":"\u03b2","\\gamma":"\u03b3","\\delta":"\u03b4","\\varepsilon":"\u03b5","\\epsilon":"\u03b5","\\zeta":"\u03b6","\\eta":"\u03b7","\\theta":"\u03b8","\\vartheta":"\u03b8","\\iota":"\u03b9","\\kappa":"\u03ba","\\lambda":"\u03bb","\\mu":"\u03bc","\\nu":"\u03bd","\\xi":"\u03be",o:"\u03bf","\\pi":"\u03c0","\\varpi":"\u03d6","\\rho":"\u03c1","\\varrho":"\u03f1","\\sigma":"\u03c3","\\varsigma":"\u03c2","\\tau":"\u03c4","\\upsilon":"\u03c5","\\phi":"\u03c6","\\varphi":"\u03c6","\\chi":"\u03c7","\\psi":"\u03c8","\\omega":"\u03c9","\\leq":"\u2264","\\geq":"\u2265","\\in":"\u2208","\\infty":"\u221e","\\int":"\u222b","\\exists":"\u2203","\\forall":"\u2200","\\partial":"\u2202","\\pm":"\xb1","\\prod":"\u220f","\\neg":"\xac","\\neq":"\u2260","\\not\\in":"\u2209","\\times":"\xd7","\\subset":"\u2282","\\sum":"\u2211","\\supset":"\u2283","\\surd":"\u221a","\\approx":"\u2248","\\bot":"\u22a5","\\cap":"\u2229","\\cdot":"\u22c5","\\cup":"\u222a","\\div":"\xf7","\\emptyset":"\u2205","\\equiv":"\u2261","\\to":"\u2192","\\vee":"\u2228","\\wedge":"\u2227","\\Leftrightarrow":"\u21d4","\\Rightarrow":"\u21d2","\\rightarrow":"\u2192"};t.stripBracesMarkup=e=>{const t=e.split("");for(let e=0;e<t.length;e+=1)"{"!==t[e]&&"}"!==t[e]||(e>0&&"\\"===t[e-1]?t[e-1]="":t[e]="");return t.join("")};t.stripHtml=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e)return"";const r={replacement:"",exclude:[],...t};let a=[e];if(r.exclude.length>0){a=[];for(let e=0;e<r.exclude.length;e+=1)a.push(`<${r.exclude[e]}[^>]*>`),a.push(`<\\/${r.exclude[e]}[^>]*>`);const t=`(${a.join("|")})`;a=e.split(new RegExp(t,""))}for(let e=0;e<a.length;e+=2)a[e]=a[e].replace(/<(?:.|\n)*?>/gm,r.replacement);return a.join("")};t.getLatexMathMap=e=>{const t=e.split(""),r=[],a=[];let i=0;for(let e=0;e<t.length;e+=1){a[e]=!1;let n=!1;"$"===t[e]&&(n=!0,e>0&&"\\"===t[e-1]&&(n=!1)),n?(i+=1,r[e]=i):r[e]=0}for(let e=r.length-1;e>=0;e-=1)if(r[e]>0&&r[e]%2==0){a[e]=!0;for(let t=e-1;t>=0;t-=1)if(a[t]=!0,r[t]===r[e]-1){e=t;break}}return a};const n=(e,t)=>{const r=[];for(let t=0;t<e.length;t+=1)"$"===e[t]&&(0===t||t>0&&"\\"!==e[t-1])&&r.push(t);if(0===r.length||r.length%2==1)return e;const a=[];a.push({latex:!1,str:e.substring(0,r[0])});for(let t=0;t<r.length;t+=2)a.push({latex:!0,str:e.substring(r[t],r[t+1]+1)}),a.push({latex:!1,str:e.substring(r[t+1]+1,r[t+2])});for(const e of a)if(e.latex){const r=e.str.replace(/^\$/,"").replace(/\$$/,""),a=r.match(/^_(.)$/),n=r.match(/^_\{([^}{]+)\}$/),o=r.match(/^\^(.)$/),s=r.match(/^\^\{([^}{]+)\}$/),l=r.match(/^(\\[a-z]+)$/),c=r.match(/^([a-z-]+)$/i);a&&t.sub?e.str=`<sub>${a[1]}</sub>`:n&&t.sub?e.str=`<sub>${n[1]}</sub>`:o&&t.sup?e.str=`<sup>${o[1]}</sup>`:s&&t.sup?e.str=`<sup>${s[1]}</sup>`:l&&l[1]in i&&t.commands?e.str=i[l[1]]:c&&t.plain&&([,e.str]=c)}let n="";for(const e of a)n+=e.str;return n};t.validateBrackets=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"{}";const r=[];for(const a of e){const e=t.indexOf(a);if(-1!==e)if(e%2==0)r.push(e+1);else if(r.pop()!==e)return!1}return 0===r.length};t.convertBracesMarkup=e=>{const t=[],r=[],a=[],i=[],n=new RegExp(/(\\{|\\})/,"gi");for(const t of e.matchAll(n))if(void 0!==t.index)for(let{index:e}=t;e<t.index+t[0].length;e+=1)i.push(e);for(const[n,o]of Object.entries(e)){const e="{}".indexOf(o);-1===e||i.includes(parseInt(n,10))||(e%2==0?(r.push(n),t.push(e+1)):a.push(n))}let o="";for(const[t,i]of Object.entries(e.split("")))if(r.includes(t))o+="<mark>";else if(a.includes(t))o+="</mark>";else if("\\"===i){const r=e[parseInt(t.toString(),10)+1];"{"!==r&&"}"!==r&&(o=`${o}${i}`)}else o=`${o}${i}`;return o};t.interconvertString=(e,r)=>{const a={format:"plain",...r||{}};let i="string"==typeof e?e:"";if("nopreservecase"===a.format){const e=(0,t.getLatexMathMap)(i),r=(e=>{const t=[];for(let r=0;r<e.length;r+=1)t[r]=!1;const r=e.split(new RegExp("(\\\\[a-z]{3,}{.*})","i"));let a=0;for(let e=0;e<r.length;e+=1){if(r[e].match(/^\\[a-z]+\{.*\}$/i)){const i=r[e].split("");for(let e=0;e<i.length;e+=1)"{"!==i[e]&&"}"!==i[e]||(t[a+e]=!0)}a+=r[e].length}return t})(i),a=i.split("");for(let t=0;t<a.length;t+=1)"{"!==a[t]&&"}"!==a[t]||!1===e[t]&&!1===r[t]&&(a[t]="\\"+a[t]);i=a.join("").replace(/<(mark)>/g,"{").replace(/<\/(mark)>/g,"}")}else if("nomarkup"===a.format)i=(0,t.stripBracesMarkup)(i),i=i.replace(/\\(textit|textbf|emph)/g,""),i=i.replace(/<(i|b|sub|sup)>/g,""),i=i.replace(/<\/(i|b|sub|sup)>/g,"");else if("html"===a.format||"html-extended"===a.format){if(i.includes("\\textit{")||i.includes("\\textbf{")||i.includes("\\emph{")){const e=new RegExp("(.*)(\\\\(?:textit|textbf|emph)\\{)(.*)","g");let t=e.exec(i),r=0;for(;null!==t&&(r+=1,!(r>100));){if(t[3]){const r=t[2].match(/(textit|emph)/)?"i":"b",a=t[3].split("");let n=1,o=0,s=0;for(let e=0;e<a.length;e+=1)if("{"===a[e]&&(n+=1),"}"===a[e]&&(o+=1,o===n)){a[e]=`</${r}>`,t[2]=`<${r}>`,s=1;break}0===s&&(t[2]=""),t[3]=a.join(""),i=t[1]+t[2]+t[3],e.lastIndex=0}t=e.exec(i)}}i="html"===a.format?n(i,{sub:!0,sup:!0,commands:!0,plain:!0}):n(i,{sub:!0,sup:!0,commands:!1,plain:!1}),i="html"===a.format?(0,t.stripBracesMarkup)(i):(0,t.convertBracesMarkup)(i)}else if("bibtex"===a.format){const e=new RegExp("(.*)(<\\/?(?:i|b|sub|sup)>)(.*)","g");let t=e.exec(i),r=0;for(;null!==t&&(r+=1,!(r>100));)t[2]&&(t[2].match(/\//)?t[2].match(/(sub|sup)/)?t[2]="}$":t[2]="}":t[2].match(/<\s*b\s*>/)?t[2]="\\textbf{":t[2].match(/<\s*i\s*>/)?t[2]="\\textit{":t[2].match(/sub/)?t[2]="$_{":t[2].match(/sup/)&&(t[2]="$^{")),i=t[1]+t[2],t[3]&&(i+=t[3]),e.lastIndex=0,t=e.exec(i);i=i.replace(/&lt;/g,"<"),i=i.replace(/&gt;/g,">"),i=i.replace(/&amp;/g,"&")}return i};const o={b:0,i:0,sup:0,sub:0,mark:0},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;const r=[];for(const a of Object.keys(t))if(t[a]!==e[a]){const i=t[a]>e[a];"mark"===a?r.push(i?"{":"}"):r.push(i?`<${a}>`:`</${a}>`)}return r.join("")};t.getTextDecorationMap=e=>{const t=[],r=[],a={...o},i={b:0,i:0,sub:0,sup:0,mark:0};for(let n=0;n<e.length;n+=1)if(/^<\/?(b|i|mark|sub|sup)>$/.test(e[n])){const t=/\//.test(e[n])?-1:1;/^<\/?b>$/.test(e[n])?(i.b+=t,a.b=i.b):/^<\/?i>$/.test(e[n])?(i.i+=t,a.i=i.i):/^<\/?sup>$/.test(e[n])?(i.sup+=t,a.sup=i.sup):/^<\/?sub>$/.test(e[n])?(i.sub+=t,a.sub=i.sub):/^<\/?mark>$/.test(e[n])&&(i.mark+=t,a.mark=i.mark)}else{const i=e[n].split("");for(const e of i)r.push(e),t.push({...a})}return t[t.length-1]={...o},{chars:r,textDecorations:t}};t.getTags=e=>e.split(/(<\/?(?:i|b|sub|sup|mark)>)/);t.reapplyFormatting=(e,r,i)=>{const n=i||-1,l=(0,t.interconvertString)(r,{format:"html-extended"}),c=(0,t.getTags)(l);if(c.length<=1)return e;const u=(0,t.getTextDecorationMap)(c),d=(0,t.getTextDecorationMap)((0,t.getTags)(e)),p=(0,a.alignment)(d.chars.join(""),u.chars.join(""));if(p.score<n)return e;let m=-1,h=-1;for(const e of p.alignment)if(null!==e[0]&&(m+=1),null!==e[1]&&(h+=1),m>-1&&h>-1)for(const e of Object.keys(u.textDecorations[h]))0===d.textDecorations[m][e]&&(d.textDecorations[m][e]=u.textDecorations[h][e]);let g=((e,t)=>{const r=[...e];if(r.length===t.length){let e={...o};for(let a=0;a<t.length-1;a+=1){const i=s(e,t[a]);r[a]=`${i}${r[a]}`,e=t[a]}const a=s(e);r[r.length-1]=`${r[r.length-1]}${a}`}return r.join("")})(d.chars,d.textDecorations);for(let e=0;e<4;e+=1)g=g.replace(/<i>(\s*)<\/i>/g,"$1").replace(/<sub>(\s*)<\/sub>/g,"$1").replace(/<sup>(\s*)<\/sup>/g,"$1").replace(/<b>(\s*)<\/b>/g,"$1");return g};t.normalize=e=>(e||"").replace(/[\t\n\s\r]+/g," ").trim()},function(e,t,r){"use strict";var a=r(2),i=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.removeNonSupportedFields=t.sortPubs=t.getValidFields=t.convertDate=t.convertMonth=t.convertYMD=t.convertAuthors=t.convertFiles=t.formatField=t.smartQuote=t.escapeLatexSpecialChars=t.convertUnicode2Latex=t.spaces=t.leadingZeros=t.getCiteKey=void 0;var n=r(18),o=i(r(1401)),s=a(r(416)),l=i(r(118));t.getCiteKey=e=>{let t="";if(e.user_citekey)t=e.user_citekey;else if(e.citekey)t=e.citekey;else{t="temporaryCitekey-";for(let e=0;e<5;e+=1)t+="abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(26*Math.random()))}return t};const c=(e,t)=>{if(e.length>=t)return e;const r=t-e.length;let a=e;for(let e=0;e<r;e+=1)a="0"+a;return a};t.leadingZeros=c;const u=e=>{const t=[];for(let r=0;r<e;r+=1)t.push(" ");return t.join("")};t.spaces=u;t.convertUnicode2Latex=e=>{const t={str:"",error:!1,packages:[]},r=e.split(""),a=(0,n.getLatexMathMap)(e);for(let e=0;e<r.length;e+=1)if("\\"===r[e])e+=1;else{const n=r[e].charCodeAt(0).toString(16).padStart(4,"0"),m=o.default.get(n);var i,s;if(m){if(!0===a[e]&&"m"in m)r[e]=(null===(i=m.m)||void 0===i?void 0:i.c)||r[e],null!==(s=m.m)&&void 0!==s&&s.p&&t.packages.push(m.m.p);else if("t"in m){var l,c,u;if(r[e]=(null===(l=m.t)||void 0===l?void 0:l.c)||r[e],null!==(c=m.t)&&void 0!==c&&c.w){let t=!1;/"/.test(r[e])&&(t=!0),e>0&&/[\s,.:;]+/.test(r[e-1])&&(t=!0),t&&(r[e]=`{${r[e]}}`)}null!==(u=m.t)&&void 0!==u&&u.p&&t.packages.push(m.t.p)}else if("m"in m){var d,p;r[e]=`$${(null===(d=m.m)||void 0===d?void 0:d.c)||r[e]}$`,null!==(p=m.m)&&void 0!==p&&p.p&&t.packages.push(m.m.p)}}else r[e].charCodeAt(0)>255&&(t.error=!0)}return t.str=r.join(""),t.packages=[...new Set(t.packages)],t};t.escapeLatexSpecialChars=e=>{const t=(0,n.getLatexMathMap)(e),r=e.split("");for(const[e,a]of r.entries())"$"===a&&"\\"!==r[e-1]&&!1===t[e]?r[e]="\\$":"_"===a&&"\\"!==r[e-1]&&!1===t[e]?r[e]="\\_":"^"===a&&"\\"!==r[e-1]&&!1===t[e]?r[e]="\\textasciicircum":"&"===a&&"\\"!==r[e-1]?r[e]="\\&":"%"===a&&"\\"!==r[e-1]?r[e]="\\%":"#"===a&&"\\"!==r[e-1]?r[e]="\\#":"\\"!==a||"\\"===r[e-1]||" "!==r[e+1]&&e+1!==r.length||(r[e]="\\\\");return r.join("")};const d=e=>{let t="normal";return/^[A-Z]+$/.test(e)&&"A"!==e?t="upper":(/^[A-Z][A-Z\d].+/.test(e)||/^[a-z]+[A-Z\d]/.test(e)||/^[A-Z\d]+[^A-Z]+[A-Z\d]/.test(e)&&!/^\d+$/.test(e)||/^[A-Z]+\d+/.test(e)||/^\d+[A-Z]/i.test(e))&&(t="mixed"),t};t.smartQuote=e=>{const t=(0,n.getLatexMathMap)(e),r=[],a=e.split("");let i=0;for(const[e,t]of a.entries())"{"===t&&"\\"!==a[e-1]?i+=1:"}"===t&&"\\"!==a[e-1]&&(i-=1),r.push(i);const o=e.split(/([\s,.;:?!"'()\-$/])/);let s=-1;for(const[e,a]of o.entries()){const i=d(a);(("mixed"===i||"upper"===i)&&!1===t[s+a.length]&&0===r[s+a.length]&&a.length>=1||"$"===o[e+1]&&t[s+a.length+1]&&/[A-Z]/i.test(a)&&!1===t[s+1]||"$"===o[e-1]&&t[s-1]&&/[A-Z]/i.test(a)&&!1===t[s+1])&&(o[e]=`{${o[e]}}`),s+=a.length}return o.join("")};t.formatField=(e,t,r,a,i,n,o,s)=>{let l="",c="",d=t;"braces"===s?(l="{",c="}"):"quotes"===s?(l='"',c='"',d=(e=>{const t=e.split(/(")/);let r=0;for(const[e,a]of t.entries())'"'!==a||/\\$/.test(t[e-1]||"")||(r+=1,t[e]=r%2==1?"``":"''");return t.join("")})(d)):"spaces"===s&&(l=" ",c="");const p=u(o),m=n?u(r-e.length):"",h=n?u(r+4):"",g=[`${p}${e}${m} = ${l}`];if(a){const e=d.split(/\s+/);if(e.length>1)for(const t of e){const e=g.length-1;g[e].length+t.length<=i?g[e]+=t+" ":(g[e]=g[e].replace(/\s+$/,""),g.push(`${p}${h}${t} `))}else g[0]+=d}else g[0]+=d;return g[g.length-1]=g[g.length-1].replace(/\s+$/,""),g[g.length-1]+=c+",",g.join("\n")};t.convertFiles=(e,t,r,a)=>{const i=[];for(const n of a){const a=s.formatAttachment(e,n,t,r.mainPattern,r.supplementaryPattern,r.patternConfig);let{fileName:o}=a;a.folders&&a.folders[0]&&(o=`${a.folders[0]}/${o}`),i.push(o)}return i.join(";")};t.convertAuthors=e=>{const t=[];for(const r of e){const e=r,a=r;if(a.collective)t.push(`{${a.collective}}`);else if(e.last&&e.first){const r=[];r.push(e.last),e.jr&&r.push(e.jr),r.push(e.first),t.push(r.join(", "))}else if(e.last&&e.initials){const r=[];r.push(e.last),e.jr&&r.push(e.jr),r.push(e.initials),t.push(r.join(", "))}else e.last?t.push(`{${e.last}}`):e.first?t.push(`{${e.first}}`):e.initials&&t.push(`{${e.initials}}`)}return t.join(" and ")};t.convertYMD=e=>e?e.toString():"";t.convertMonth=(e,t)=>{const r={1:"jan",2:"feb",3:"mar",4:"apr",5:"may",6:"jun",7:"jul",8:"aug",9:"sep",10:"oct",11:"nov",12:"dec"};return e&&e in r?t?`"${t}~" # ${r[e]}`:r[e]:""};t.convertDate=(e,t,r)=>e&&t&&r?`${c(e,4)}-${c(t,2)}-${c(r,2)}`:e&&t?`${c(e,4)}-${c(t,2)}`:e?""+c(e,4):"";t.getValidFields=(e,t)=>{if(e in t)return t[e];const r=["attachments","labelsNamed","foldersNamed"],a=(new l.default).getPubType(e,null,"en","paperpile");if(a&&a.fields&&Array.isArray(a.fields))for(const e of a.fields)"object"==typeof e&&"name"in e&&r.push(e.name.toString());return t[e]=r,r};t.sortPubs=(e,t)=>"created"===t?e.sort((e,t)=>(e.created||0)-(t.created||0)):"citekey"===t?e.sort((e,t)=>(e.citekey||"").localeCompare(t.citekey||"")):e;t.removeNonSupportedFields=(e,t)=>{const r=e;if(null!=t&&t.noExport)for(const e of t.noExport)delete r.fields[e];return r}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(1);r(20),a(r(29));self.executionContext="bg",r(1172)},function(e,t,r){"use strict";var a=r(2),i=r(1),n=r(20),o=r(138),s=r(597),l=r(46),c=i(r(47)),u=a(r(1173)),d=i(r(44)),p=r(599),m=r(95),h=r(100),g=i(r(404)),f=i(r(962)),b=i(r(29)),y=i(r(185)),v=i(r(1403)),_=r(963),w=r(42),P=r(9),S=r(177);Error.stackTraceLimit=100;let C=!1;(0,o.setIcon)(null,"default");const A=[];o.browserAction.onClicked.addListener(async e=>{C?(0,o.browserActionClicked)(e):A.push(e)}),chrome.tabs.onActivated.addListener(async e=>{(0,s.tabActivated)(e.tabId)}),chrome.tabs.onUpdated.addListener(async(e,t,r)=>{e&&(0,s.tabUpdated)(e,t,r)}),chrome.tabs.onCreated.addListener(async e=>{!e||!e.id||"about:newtab"!==e.url&&e.url||(b.default.info("main",`onCreated: new tab: ${e.id} URL:${e.url} setting no-access`),(0,o.setPopup)("no-access",e.id))}),chrome.runtime.onInstalled.addListener(async e=>{b.default.info("main","onInstalled called: "+e.reason);const t=await(0,l.checkExtensionPermissions)();let r=[];if(t&&(r=(await(0,h.getWebappTabs)()).map(e=>e.id)),"install"===e.reason){if(b.default.info("main",`onInstalled: permissions: ${t}, webapp tabs: ${r.length}`),!t&&"safari"===n.PP_APP_ENV)return void(0,l.openUrl)({url:(0,n.getPaperpileContentUrl)(n.PP_ENV)+"/safari-setup/"});if(0===r.length){const e=(0,n.getPaperpileContentUrl)(n.PP_ENV)+"/sign-in/";(0,l.openUrl)({url:e})}else(0,l.openWebapp)({})}chrome.tabs.query({discarded:!1},async e=>{for(const r of e)if(r&&r.id)if((0,P.isNewWebAppTab)(r.url||""));else if(!r.url||(0,P.isBlockedUrl)(r.url||""))(0,o.setPopup)("no-access",r.id);else if((0,P.isCiteSupported)(r.url))r.active&&(0,S.injectContentScripts)(r.id,{citeNotification:!0});else{var t;if(null===(t=(await(0,l.isWebimportSupported)({url:r.url})).target)||void 0===t?void 0:t.driver)(0,S.decideWhatToInjectAndInitInjections)(r.id,r,{forceKillScripts:!0});else{const e=await(0,w.duplicateByTab)(r);if(e&&e[0])(0,S.injectContentScripts)(r.id,{clear:!0},{reason:"auto"}),await(0,o.setIcon)(r.id,"imported");else{const e=(0,m.isSupportedPage)({url:r.url});e&&e.supported&&await(0,o.setIcon)(r.id,"ready")}}}})}),self.webkitRequestFileSystem||(self.webkitRequestFileSystem=()=>{}),self&&self.PP||(self.PP=r(1405),"function"!=typeof self.PP.log&&(self.PP.log=()=>{})),(0,g.default)({bugsnag:f.default,logger:b.default,remote:c.default,callback:e=>{chrome.tabs.query({},async t=>{for(const r of t)r&&r.id&&(await c.default.cs.execute("render.renderError",r.id,{errorMsg:e}),await c.default.cs.execute("webimport.renderError",r.id,{errorMsg:e,url:r.url}))}),"string"==typeof e&&e.startsWith("unhandled error:Failed to execute 'transaction' on 'IDBDatabase'")&&chrome.tabs.query({},async e=>{for(const t of e)await c.default.cs.execute("webimport.terminateNewExtension",t.id),await c.default.cs.execute("popup.utils.terminateNewExtension",t.id);chrome.runtime.reload()})}}),(async()=>{if(b.default.info("main","Bg pages",Object({PP_ENV:"production",PP_APP_ENV:"firefox",BACKEND_URL:"https://api.paperpile.com",LIBRARY_SEARCH_URL:"https://library.paperpile.com",LIBRARY_SEARCH_SYNC_URL:"https://virginia.library.paperpile.com",BUGSNAG_API_KEY:"1d56ddd9b2081d1ae1acb38c28c2ec60",EXTENSION_BUILD_NUMBER:"70",GIT_COMMIT:"4151a9f55e9e3ca797c461b042b6431f703d5b19",MIXPANEL_PROXY:"https://e.paperpile.com"}),self.executionContext),"test"===n.PP_ENV)return;(0,u.default)(),(0,p.initCrawler)();if("migrated"===await(0,u.getDataLayerStatusFromCache)()){var e;await d.default.forLibrary().init(!0);const t=await d.default.forLibrary().getUser();if(t&&null!==(e=t.libraries)&&void 0!==e&&e.length)for(const e of t.libraries)await d.default.forLibrary(e).init(!0)}else{b.default.info("startup","No data found. Waiting for initialization by webapp");const e=(await(0,h.getWebappTabs)()).map(e=>e.id),t=await(0,l.checkDatabaseExists)("paperpile_database");0===e.length&&t&&(0,o.setIcon)(null,"signedout")}for(y.default&&(0,v.default)(y.default),(0,l.attachPPFormattingDependenciesToWindow)(),(0,_.initContextMenu)(),C=!0;A.length;){const e=A.shift();e&&(0,o.browserActionClicked)(e)}c.default.resolveBacklog(),y.default&&d.default.forLibrary().getIsInitialized()&&y.default.run("BG_START")})()},function(e,t,r){"use strict";var a=r(1),i=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getDataLayerStatusFromCache=void 0;var n=i(r(40)),o=a(r(1174)),s=a(r(119)),l=r(1382),c=r(32),u=r(105),d=a(r(1383)),p=r(20),m=r(100),h=r(417),g=r(95),f=a(r(962)),b=r(436),y=r(963),v=r(46),_=a(r(1388)),w=r(403),P=r(42),S=r(138),C=r(177),A=a(r(47)),E=a(r(44)),T=a(r(29)),k=a(r(600)),x=a(r(1389)),R=a(r(185)),I=r(55),L=r(9);const D={};let N=!1,O=null;const U=(0,o.default)(T.default);U.setQueue(R.default);let M=null;const F=async()=>{if(null===M){const e=await U.getModel(n.personalLibraryId).getLocalSettings();M=e.dataLayerStatus||"empty"}return M};t.getDataLayerStatusFromCache=F;const j=async e=>{if("migrating"!==e){const t=U.getModel(n.personalLibraryId);await t.setLocalSettings({dataLayerStatus:e})}M=e},B=(e,t,r)=>["cs","popup"].forEach(a=>A.default[a].execute(e,t,r)),$=e=>{D[e]||(U.onSyncProgress(e,async t=>{t&&t.error&&500===t.error.status&&(0,v.checkExtensionPermissionsAndNotify)(),A.default.broadcastTo(p.NEW_WEBAPP_URL,"broadcast.syncProgress",{libraryId:e,progress:t})}),U.onFilterMapUpdate(e,async t=>{for(let r=0;r<t.length;r+=5e3)A.default.broadcastTo(p.NEW_WEBAPP_URL,"broadcast.filterMapUpdate",{libraryId:e,changes:t.slice(r,r+5e3)});if(t&&t.length){if(t.some(e=>"mcollection"in e&&"Permissions"===e.mcollection)){const e=await(0,P.getPermissions)(),t=await(0,u.fetchCollectionsForLibraries)({dataClient:E.default});(0,y.initContextMenu)(),chrome.tabs.query({},async r=>{for(const a of r)a&&a.id&&B("render.updateCollectionsPermissions",a.id,{collectionsForLibrary:t,permissions:e})})}if(t.some(e=>"mcollection"in e&&"Collections"===e.mcollection)){const e=await(0,u.fetchCollectionsForLibraries)({dataClient:E.default});chrome.tabs.query({},async t=>{for(const r of t)if(r&&r.id){const t=await(0,P.getPermissions)();B("render.updateCollectionsFromWebapp",r.id,{collectionsForLibrary:e,permissions:t})}})}if("mcollection"in t[0]&&"id"in t[0]&&"string"==typeof t[0].id&&"Library"===t[0].mcollection&&await(0,m.isOnWebappTab)()){const r=await E.default.forLibrary(e).getPub(t[0].id);null!=r&&r._id&&chrome.tabs.query({},async e=>{for(const t of e)t&&t.id&&B("render.updatePubCollectionsFromWebapp",t.id,{updatedPub:r})})}if(t.some(e=>"mcollection"in e&&"Users"===e.mcollection)){const e=await(0,P.getUserFromDb)();e&&chrome.tabs.query({},async t=>{for(const r of t)r&&r.id&&A.default.cs.execute("render.updateUserFromWebapp",r.id,e)})}t.filter(e=>{var t;return"mcollection"in e&&"Library"===e.mcollection&&(null==e||null===(t=e.fields)||void 0===t?void 0:t.includes("note"))}).forEach(e=>{chrome.tabs.query({},async t=>{for(const a of t)if(a&&a.id){var r;if(!("mcollection"in e))return;A.default.cs.execute("render.updateNoteFromWebapp",a.id,{pubId:e.id,newNote:null==e||null===(r=e.data)||void 0===r?void 0:r.note})}})}),t.filter(e=>{var t,r;return"mcollection"in e&&"update"===e.action&&"Attachments"===e.mcollection&&(null===(t=e.fields)||void 0===t?void 0:t.includes("s3_md5"))&&!(null===(r=e.data)||void 0===r||!r.s3_md5)}).forEach(e=>{"mcollection"in e&&chrome.tabs.query({},async t=>{for(const r of t)r&&r.id&&A.default.cs.execute("render.atachmentIndexingDone",r.id,{id:e.id})})})}}),U.onPdfDownloadProgress(e,t=>{A.default.broadcastAll("broadcast.pdfDownloadProgress",{libraryId:e,progress:t})}),U.onProgressStoreUpdate(e,t=>{A.default.broadcastTo(p.NEW_WEBAPP_URL,"broadcast.progressStateUpdate",{libraryId:e,progress:t})}),U.onJobUpdate(e,t=>{A.default.broadcastTo(p.NEW_WEBAPP_URL,"broadcast.jobUpdate",{libraryId:e,job:t})}),D[e]=!0)};var z=()=>{A.default.addActions({"utils.resetCsMode":async e=>{let{tabId:t}=e;const r=await(0,b.sessionStorageGetValue)("tab-mode",t.toString());if(r){const e=await(0,b.sessionStorageGetAll)("tab-mode");for(const t of e){var a;(null===(a=t.value)||void 0===a?void 0:a.pubId)===r.pubId&&await(0,b.sessionStorageRemoveKey)("tab-mode",t.key)}}return!0},"utils.getCsMode":async e=>{let t,r,a,{tabId:i}=e,n="default";const o=await(0,b.sessionStorageGetValue)("tab-mode",i.toString()),s=await(0,b.sessionStorageGetValue)("reason-injection",i.toString());if(o&&o.mode){const e=await(0,y.getSelectedPubFromLocalSettings)();if("supplement"===o.mode?null===e||o.pubId!==(null==e?void 0:e.pubId)?(0,b.sessionStorageRemoveKey)("tab-mode",i.toString()):(n="supplement",r=o.pubId,a=o.libraryId):"pdf"===o.mode&&o.pubId&&(n="pdf",r=o.pubId,a=o.libraryId),"default"!==n&&a&&r){const e=await E.default.forLibrary(a).getPub(r);e?t=(0,c.formatAuthorYear)(e):(n="default",(0,b.sessionStorageRemoveKey)("tab-mode",i.toString()))}}return{mode:n,pubAuthorString:t,pubId:r,libraryId:a,reasonForInjection:s,sessionTabId:null==o?void 0:o.tabId,originalPdfUrl:null==o?void 0:o.originalPdfUrl}},"utils.searchGoogle":async e=>{let{reference:t,libraryId:r}=e;const a="https://www.google.com/search?q="+encodeURIComponent("filetype:pdf "+t.title);chrome.tabs.create({url:a},async e=>{T.default.info("import",`Setting tab with id ${e.id} to pdf mode.`),e.id&&(0,b.sessionStorageSetValue)("tab-mode",e.id.toString(),{mode:"pdf",libraryId:r,pubId:t._id})})},"utils.attachPdfToSessionPub":async e=>{var t;let{tabId:r,renderedPub:a,source:i,originalPdfUrl:n,blob:o,contentDisposition:l}=e;const u=await(0,P.getUserFromDb)(),d=null==a||null===(t=a.url)||void 0===t?void 0:t[0];if(!d||!u)return;const p=await(0,b.sessionStorageGetValue)("tab-mode",r.toString()),{libraryId:m,pubId:h}=p,g=await E.default.forLibrary(m).getPub(h);g&&(g.url=[],delete g.doi,delete g.pmid,delete g.pmc,delete g.arxivid,o?R.default&&(d&&R.default.addJob({type:"add-attachment",priority:s.default.SINGLE_AUTOCOMPLETE,broadcastType:"tab",tabId:r,libraryId:m,data:{url:d,pub:g,blob:o,contentDisposition:l,sessionData:{...p,pubAuthorString:(0,c.formatAuthorYear)(g)}}}),(0,b.sessionStorageSetValue)("tab-mode",r.toString(),{...p,originalPdfUrl:n})):(0,v.addDirectPdfCrawlJob)({user:u,pub:{...g},url:d,tabId:r,libraryId:m,source:i,pdfAttachingData:{renderedPub:a,sessionData:{...p,pubAuthorString:(0,c.formatAuthorYear)(g)}}}))},"utils.cancelSpecialMode":async e=>{let{tabId:t}=e;await(0,b.sessionStorageRemoveKey)("tab-mode",t.toString()),(0,C.reinject)(t)},"utils.specialModeDoneCallback":async e=>{let{tabId:t}=e;(0,b.sessionStorageRemoveKey)("tab-mode",t.toString()),(0,v.openWebapp)({tabToRemove:t})},"utils.getTabId":async e=>{let{tabId:t}=e;return t},"utils.switchBackToOldExtension":v.switchBackToOldExtension,"utils.terminateAllContentScripts":v.terminateAllContentScripts,"utils.isSputnik":v.isNewExtensionEnabled,"utils.reloadExtension":()=>chrome.runtime.reload(),"utils.signInOut":v.signInOut,"utils.debugInfo":()=>{const e={};if(E.default){var t;const r=E.default.forLibrary();e.dataClientPromises=null===(t=r.promises)||void 0===t?void 0:t.length,e.dataClientInitialized=r.isInitialized}return R.default&&(e.queueCurrentlyRunning=R.default.currentlyRunning,e.queueCurrentlyRunningTimestamp=R.default.currentlyRunningTimestamp),e},"utils.isExtensionPinned":async()=>{if(chrome.action&&"function"==typeof chrome.action.getUserSettings){return await new Promise(e=>{chrome.action.getUserSettings(t=>{e(t.isOnToolbar)})})}return!0},"utils.getBugsnagLogs":async()=>f.default.getLogs(),"bg.logout":async()=>{if(await j("empty"),U.hasModel(n.personalLibraryId)){const e=await U.getModel(n.personalLibraryId).getUser().catch(()=>null);for(const t of(null==e?void 0:e.libraries)||[])await U.getSyncClient(t).wipeAndReset(),await U.getProgressStore(t).reset();await U.getSyncClient(n.personalLibraryId).wipeAndReset(),await U.getProgressStore(n.personalLibraryId).reset()}A.default.broadcastAll("broadcast.logout"),(0,v.notifyTabsOfUserData)(null),setTimeout(()=>{T.default.info("logout","Performing reload after logout"),chrome.runtime.reload()},50)},"utils.browseForFiles":async e=>{const t=e.url,r=await(0,P.getUserFromDb)(),a=null!=r&&r.proxy_list&&!e.disableProxify?self.PP.Utils.decodeProxyString(r.proxy_list).filter(e=>e.active):null,i=null!=a&&a.length?self.PP.crawling.Proxy.getLoginUrl(a[0].url,t):t;chrome.tabs.create({url:i},async t=>{T.default.info("import",`Setting tab with id ${t.id} to ${e.type} mode.`),t.id&&(0,b.sessionStorageSetValue)("tab-mode",t.id.toString(),{mode:e.type,libraryId:e.libraryId,pubId:e.pubId,tabId:t.id})})},"utils.openUrl":v.openUrl,"utils.getUserFromDb":P.getUserFromDb,"utils.checkStartupProgress":async()=>null!==await(0,P.getUserOnlyFromDb)(),"utils.sendLogs":async()=>{const e={bugsnagLogs:{}},t=await A.default.bg.execute("utils.fetchUserFromApi");e.apiuser=t;const r=f.default.getLogs();r&&(e.bugsnagLogs.bg=r);const a=await new Promise(e=>{chrome.tabs.query({},async t=>{e(t)})});for(const t of a)if(t&&t.id&&t.url&&!t.url.match(/moz-extension/)&&!t.url.match(/safari-web-extension/)){const r=await A.default.cs.execute("popup.utils.checkPopupConnection",t.id);if(r&&"alive"===r.result){let r;r=(0,L.isNewWebAppTab)(t.url)?await A.default.webapp.execute("webapp.getBugsnagLogs",t.id):await A.default.cs.execute("popup.utils.getBugsnagLogs",t.id),r&&r.result&&(e.bugsnagLogs["tabId-"+t.id]={url:t.url,logs:r.result})}}const i=await(0,P.getSignedExtensionLogS3Url)("log");if(i){const t=JSON.stringify(e),r=new Blob([t],{type:"text/json"});try{(await fetch(i,{method:"PUT",body:r})).ok&&(0,P.getSignedExtensionFinishedLogS3Url)(i)}catch(e){T.default.error("startup","Failed to upload logs to S3",e)}}},"utils.fetchUserFromApi":P.fetchUserFromApi,"utils.getCollectionsFromDb":P.getCollectionsFromDb,"utils.getLocalSettingsFromDb":P.getLocalSettingsFromDb,"utils.getActiveLibraryId":async()=>{var e;const t=await(0,P.getDefaultLibrary)(),r=await(0,P.getSharedLibraries)(),a=await(0,P.getUserFromDb)(),i=await(0,u.fetchCollectionsForLibraries)({dataClient:E.default}),n=null==i||null===(e=i.collections)||void 0===e?void 0:e.filter(e=>!!e.sharing_on&&"folder"===e.collectionType),o=await(0,P.getPermissions)();let s;if(a&&(0,w.initPermissionsService)({user:a,store:{collectionsList:(null==i?void 0:i.collections)||[],permissionsList:o||[]}}),t){var l;const e=i.collections.find(e=>e._id===t&&"folder"===e.collectionType)?"shared-folder":"shared-library";s=null===(l=(0,w.getPermissionsService)())||void 0===l?void 0:l.hasReferencePermission("addReference",t,e)}return{sharedLibraries:r,sharedFolders:n,activeLibrary:t,libraryHasPermission:s}},"utils.getAllUserData":P.getAllUserData,"utils.getAllJobs":P.getAllJobsFromDb,"utils.getAllChanges":async()=>{const e={};e.personal=await E.default.forLibrary().getAll("Changes");const t=Object.keys(E.default.libraries).filter(e=>e!==n.personalLibraryId);for(const r of t)e[r]=await E.default.forLibrary(r).getAll("Changes");return e},"utils.isSupportedPage":g.isSupportedPage,"utils.isWebimportSupported":v.isWebimportSupported,"browserAction.setIcon":async e=>{let{tabId:t,type:r}=e;await(0,S.setIcon)(t,r)},"remote.isExistingPub":async e=>{let{pub:t}=e;const r=await(0,P.detectDuplicates)({pubs:[t]});if(r&&r[0]){const e=[];for(const n of r[0]){var a,i;let r,o,s;null!=n&&n.library_id&&(s=n.library_id),null!=n&&n.publication_id&&(r=await E.default.forLibrary(s).getPub(n.publication_id),n.attachment_id&&(o=await E.default.forLibrary(s).getAttachment(n.attachment_id))),e.push({pub:r,attachment:o,library_id:s,publication_id:(null===(a=r)||void 0===a?void 0:a._id)||(null==t?void 0:t._id)||null,attachment_id:(null===(i=o)||void 0===i?void 0:i._id)||null})}return{duplicates:e}}return null},"api-backend.detectDuplicates":P.detectDuplicates,"utils.importIntoLibrary":v.importIntoLibrary,"utils.addBatchAutoCompletJob":v.addBatchAutoCompletJob,"utils.addAutoCompleteJob":v.addAutoCompleteJob,"utils.addPdfCrawlJob":v.addPdfCrawlJob,"utils.addS3SyncJob":v.addS3SyncJob,"utils.autoCompleteFinished":v.autoCompleteFinished,"utils.addBatchPdfCrawlJob":v.addBatchPdfCrawlJob,"utils.cancelJobs":v.cancelJobs,"utils.getAnyWebappTabId":v.getAnyWebappTabId,"utils.countSputnikTabs":async()=>(await(0,m.getWebappTabs)(!0)).length,"utils.closeAllTabs":async()=>{(await(0,m.getWebappTabs)(!0)).forEach(e=>{e.id&&chrome.tabs.remove(e.id)})},"utils.bulkImport":v.bulkImportIntoLibrary,"utils.collectionsUpdated":v.collectionsUpdated,"utils.openPubInWebapp":v.openPubInWebapp,"utils.openIntercom":v.openIntercom,"utils.openWebapp":v.openWebapp,"utils.openContentPage":v.openContentPage,"utils.checkPdfExistsAndOpen":v.checkPdfExistsAndOpen,"utils.saveSettings":v.saveSettings,"utils.saveUISettings":v.saveUISettings,"utils.getLinksForPDFCrawler":e=>{let{pub:t}=e;return(0,g.getLinksForPDFCrawler)([t])},"utils.cancelImports":v.cancelImports,"utils.testProxy":h.testProxy,"utils.loginProxy":h.loginProxy,"utils.activateOrCreateViewTab":v.activateOrCreateViewTab,"utils.getExtensionId":()=>{let e=chrome.runtime.id;return e=chrome.runtime.getURL("").replace(/^.+:\/\//,"").replace(/\/.*/,""),e},"utils.openBrowserExtensionSettings":e=>{let{msg:t}=e,r="chrome://extensions/?id="+chrome.runtime.id;if("file-access"===t){const e=(0,_.default)("chromium_3341703758641437857",(0,v.getBrowserUILanguage)());r+="#:~:text="+encodeURIComponent(e).replace(/-/g,"%2D")}chrome.windows.create({url:r,height:525,width:700,type:"popup"})},"utils.openBrowserExtensionShortcut":()=>{let e="chrome://extensions/shortcuts";e="about:addons",chrome.tabs.create({url:e})},"utils.getExtensionVersion":()=>({browser:p.PP_APP_ENV,buildNumber:p.BUILD_NUMBER,gitCommitHash:p.GIT_COMMIT}),"utils.triggerImprovePubJob":v.triggerImprovePubJob,"utils.ensureS3SyncJobForAllFiles":v.scheduleS3Sync,"utils.pinCollection":async e=>{var t;let{tabId:r,id:a}=e;const i=Object.keys(E.default.libraries).filter(e=>e!==n.personalLibraryId),o=i.includes(a),s=await(0,P.getLocalSettingsFromDb)(),l=null===(t=s.extensionDefaultCollections)||void 0===t?void 0:t.find(e=>i.includes(e));let c;if(o)c=[a];else{const e=await E.default.forLibrary(l).getAll("Collections");if(null!=e&&e.map(e=>e._id).includes(a)){var u;c=[...(null===(u=s.extensionDefaultCollections)||void 0===u?void 0:u.filter(t=>e.map(e=>e._id).includes(t)))||[],a],l&&c.push(l)}else{c=[a];for(const e of i){const t=await E.default.forLibrary(e).getAll("Collections");var d;if((t||[]).map(e=>e._id).includes(a))c=[...c,e,...(null===(d=s.extensionDefaultCollections)||void 0===d?void 0:d.filter(e=>(t||[]).map(e=>e._id).includes(e)))||[]]}}}await E.default.forLibrary().setLocalSettings({extensionDefaultCollections:c});const p={localSettings:{...s,extensionDefaultCollections:c}};A.default.cs.execute("render.updatedLocalSettings",r,p),A.default.popup.execute("render.updatedLocalSettings",r,p)},"utils.unpinCollection":async e=>{let{tabId:t,id:r}=e;const a=Object.keys(E.default.libraries).includes(r),i=await(0,P.getLocalSettingsFromDb)(),n=a?[]:(i.extensionDefaultCollections||[]).filter(e=>e!==r);await E.default.forLibrary().setLocalSettings({extensionDefaultCollections:n});const o={localSettings:{...i,extensionDefaultCollections:n}};A.default.cs.execute("render.updatedLocalSettings",t,o),A.default.popup.execute("render.updatedLocalSettings",t,o)},"api-backend.improvePub":P.improvePub,"data-layer.updatePublication":P.updatePublication,"data-layer.replacePublication":P.replacePublication,"api-backend.checkPdfImprove":P.checkPdfImprove,"api-backend.getPub":P.getPub,"api-backend.createCollection":P.createCollection,"api-backend.reportCrawler":P.reportCrawler,"app.checkExtensionPermissions":v.checkExtensionPermissions,"app.reinject":e=>{let{tabId:t}=e;(0,C.reinject)(t)},"app.reinjectAllTabs":()=>{chrome.tabs.query({},async e=>{for(const t of e)t&&t.id&&(0,C.reinject)(t.id)})},"app.grabDbFromServiceWorker":async()=>{if("empty"===await F()){T.default.info("startup","Migrating IndexedDB to Extension"),await j("migrating"),A.default.broadcastTo(p.NEW_WEBAPP_URL,"broadcast.migratingExtension",{status:"inprogress"});try{let e=await(0,m.getWebappTabs)();if(e.length>0){let t;0;const r=await A.default.sw.execute("data-layer.export",e[0].id,void 0,t);if(!r){if(await j("empty"),A.default.broadcastTo(p.NEW_WEBAPP_URL,"broadcast.migratingExtension",{status:"aborted"}),T.default.info("startup","Failed to migrate IndexedDB to Extension: empty response"),e=await(0,m.getWebappTabs)(),0===e.length)return;let t=e[0].id;for(const r of e)r.id&&r.active&&(t=r.id);return void(void 0!==t&&(await(0,I.sleep)(500),chrome.tabs.reload(t)))}if(r.result){let{dbBlob:a}=r.result;if(r.result.blobParts){const i=[a];for(let a=1;a<r.result.blobParts;a+=1){const r=await A.default.sw.execute("data-layer.exportPart",e[0].id,{blobPart:a},t);if(!r||!r.result)return await j("empty"),A.default.broadcastTo(p.NEW_WEBAPP_URL,"broadcast.migratingExtension",{status:"aborted"}),void T.default.info("startup","Failed to migrate IndexedDB to Extension: empty response");i.push(r.result.dbBlob)}a=new Blob(i)}const i=new l.IndexedDBWrapper;if(await i.importData(a),r.result.fileIds.length>0){await E.default.forLibrary().init(!0);const e=new n.default(A.default,T.default);await e.forLibrary().init(!1);for(const t of r.result.fileIds){const r=await e.forLibrary().getFile(t);r&&await E.default.forLibrary().insertFile(r)}}}await j("migrated"),A.default.broadcastTo(p.NEW_WEBAPP_URL,"broadcast.migratingExtension",{status:"done"}),r.result&&0!==r.result.fileIds.length||await E.default.forLibrary().init(!0)}else await j("migrated"),A.default.broadcastTo(p.NEW_WEBAPP_URL,"broadcast.migratingExtension",{status:"done"}),await E.default.forLibrary().init(!0);(0,S.setIcon)(null,"default");const t=await(0,P.fetchUserFromApi)(),r=await E.default.forLibrary().getUser();!t||r._id===t._id&&r.created===t.created||(T.default.warn("startup",`User mismatch: API "${t.google_email}" (${t.created}), Local: ${r.google_email} (${r.created})`),await E.default.forLibrary().wipeAndReset(),await E.default.forLibrary().init(!0));for(const e of r.libraries||[])await E.default.forLibrary(e).init(!0),await E.default.forLibrary(e).setLocalSettings({user_id:r._id});const a=await E.default.forLibrary().sync({debounce:0});if(a.error)throw a.error;for(const e of r.libraries||[])await E.default.forLibrary(e).sync();chrome.tabs.query({},async e=>{for(const t of e)t&&t.id&&(0,C.reinject)(t.id)})}catch(e){await j("empty"),T.default.error("startup","Failed to migrate IndexedDB to Extension",e),A.default.broadcastTo(p.NEW_WEBAPP_URL,"broadcast.migratingExtension",{status:"error"})}}},"bg.attachPdfToPub":async e=>{let t,r,{tabId:a,pdfUrl:i,importedPub:n,blob:o,contentDisposition:l,isLocalFile:c}=e;if(null!=n&&n.id)t=n.id,r=n.libraryId;else{const e=await(0,y.getSelectedPubFromLocalSettings)();if(null==e||!e.pubId)return;t=e.pubId,r=e.libraryId}const u=await E.default.forLibrary(r).getPub(t);if(!u||!R.default)return;let d=null;c&&(d=await(0,L.fetchPdf)({pdfUrl:i}));const p=i;var m,h;p&&R.default.addJob({type:"add-attachment",priority:s.default.SINGLE_AUTOCOMPLETE,broadcastType:"tab",tabId:a,libraryId:r,data:{url:p,pub:u,blob:o||(null===(m=d)||void 0===m?void 0:m.blob),contentDisposition:l||(null===(h=d)||void 0===h?void 0:h.contentDisposition)}})},"bg.changeSettingsSetSelectedPubId":async e=>{let{libraryId:t,pubId:r,selectedPubFoldersId:a}=e;const i=a&&a[0]?a[0]:"";await(0,y.updateContextMenu)({libraryId:t,folderId:i,pubId:r});const n=r?`${t}:${r}:${i}`:t;if(await E.default.forLibrary().setLocalSettings({selectedPubId:n}),r){const e=await E.default.forLibrary(t).getPub(r);if(e){const t=(0,c.formatAuthorYear)(e),r={localSettings:{...await(0,P.getLocalSettingsFromDb)(),selectedPubShort:t}};chrome.tabs.query({},async e=>{for(const t of e)t&&t.id&&A.default.cs.execute("render.updatedLocalSettings",t.id,r)})}}},"app.transferPub":async e=>{var t;T.default.info("transfer",e);const r=[(null==e||null===(t=e.pub)||void 0===t?void 0:t._id)||""],{sourceLibraryId:a}=e,i=e.target,o=await(0,P.detectDuplicates)({pubs:[null==e?void 0:e.pub]});if(i&&o&&o[0]&&o[0].some(e=>(null==e?void 0:e.library_id)===i))return null;try{const t=await E.default.forLibrary(a).getReferences(r);for(const e of t)for(const t of(null==e?void 0:e.attachments)||[])if(null!=t&&t._id){var s;const e=[2,4,8,16,32];let r=e.shift(),i=(null===(s=await E.default.forLibrary(a).getAttachment(t._id))||void 0===s?void 0:s.s3_md5)&&await E.default.forLibrary(a).getFile(t._id);for(;!i&&void 0!==r;){var l;await(0,L.delay)(1e3*r),i=(null===(l=await E.default.forLibrary(a).getAttachment(t._id))||void 0===l?void 0:l.s3_md5)&&await E.default.forLibrary(a).getFile(t._id),r=e.shift()}}const o=await(0,P.getUserFromDb)(),d=await(0,P.getSharedLibraryOrFolder)(i),p=await(0,P.getSharedLibraryOrFolder)(a),m=i!==n.personalLibraryId?(0,u.normalizeLibraryOrFolder)(d):void 0,h=a!==n.personalLibraryId?(0,u.normalizeLibraryOrFolder)(p):void 0,g=(null==m?void 0:m.owner)||(null==o?void 0:o._id),f=(null==h?void 0:h.owner)||(null==o?void 0:o._id),b=a===n.personalLibraryId&&"linked"===(null==m?void 0:m.sharing_mode);if(!t||!t.length||!t[0])return null;const y=await E.default.forLibrary(i).getCollection(i);let v;y&&(v={...y}),null!=e&&e.additionalCollection&&(v={...e.additionalCollection});const _=await(0,u.transferReferences)(E.default,T.default,self.PP,t,b,a,f,i,g,void 0,v),w=null==_?void 0:_.transferredReferences,S=null==_?void 0:_.transferredAttachments;T.default.info("transfer ->",w,S);const C=null==w?void 0:w[0];let A;if(C){var c;const e=()=>new Promise(e=>{const t=setInterval(async()=>{var r,a,o,s;(A=await(0,P.detectDuplicates)({pubs:[C]}),i===n.personalLibraryId)?null!==(o=A)&&void 0!==o&&null!==(s=o[0])&&void 0!==s&&s.some(e=>(null==e?void 0:e.publication_id)&&!(null!=e&&e.library_id))&&(clearInterval(t),e(!0)):null!==(r=A)&&void 0!==r&&null!==(a=r[0])&&void 0!==a&&a.some(e=>(null==e?void 0:e.library_id)===i)&&(clearInterval(t),e(!0))},100)});return await e(),{transferredReference:null==w?void 0:w[0],transferredAttachment:null==S?void 0:S[0],duplicates:null===(c=A)||void 0===c?void 0:c[0]}}return null}catch(e){return T.default.error("grid","import","importReferenceToOtherLibraryAction",e),null}},"data-layer.syncClient":function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return $(t[0].data.libraryId),U.syncClientHandler(...t)},"data-layer.model":function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return $(t[0].data.libraryId),U.modelHandler(...t)},"data-layer.citationStyles":U.citationStylesHandler,"data-layer.progressStore":function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return $(t[0].data.libraryId),U.progressStoreHandler(...t)},"data-layer.getStatus":F,"data-layer.triggerSync":async e=>{let{libraryId:t}=e;E.default.forLibrary(t).sync(),await E.default.forLibrary(t).waitForSync()},"data-layer.init":async()=>O||(O=new Promise(async(e,t)=>{try{$(n.personalLibraryId);const t=U.getModel(n.personalLibraryId),r=U.getSyncClient(n.personalLibraryId);let a=await t.getUser().catch(()=>{});if(!a){const e=()=>new Promise((e,a)=>{const i=n=>{!Array.isArray(n)&&n.error&&(t.off("filterMapUpdate",i),r.off("syncProgress",i),a(n.error instanceof Error?n.error:new Error(n.error.msg))),(Array.isArray(n)?n.some(e=>"mcollection"in e&&"Users"===e.mcollection&&"insert"===e.action):!0===n.initialSyncFinished)&&(t.off("filterMapUpdate",i),r.off("syncProgress",i),e())};t.on("filterMapUpdate",i),r.on("syncProgress",i)});if(r.sync({debounce:0}),await e(),a=await t.getUser().catch(()=>{}),!a)throw new Error("Failed to get User for DataClient setup");await t.setLocalSettings({user_id:a._id})}await r.updateCachedInitialSyncFinished(),await(async e=>{if(N)return;N=!0,T.default.info("migration","Checking if there are any migrations to do...");const t=e.libraries||[],r=t.map(e=>U.getModel(e)),a=t.map(e=>U.getSyncClient(e));(await(0,d.default)({personalModel:U.getModel(n.personalLibraryId),sharedLibrariesModels:r,personalSyncClient:U.getSyncClient(n.personalLibraryId),sharedLibrariesSyncClients:a})).promise.then(e=>{let{total:t,previousVersion:r,newVersion:a}=e;0===t?T.default.info("migration","Done, no migrations to be run"):T.default.info("migration",`Done, run ${t} migration(s). From ${r} to ${a}`)}).catch(e=>{T.default.error("migration","Migrations failed",e)})})(a),f.default.setUser(a),e()}catch(e){t(e)}finally{O=null}}),O),"mixpanel.track":e=>{let{event:t}=e;(0,k.default)(t)},"crawler.crawlUrl":async e=>{let{mode:t,url:r}=e;const a=await(0,g.crawlMetaUrlForTesting)(t,r);return a.isOk()?{isOk:a.isOk(),value:a.value}:a},"debug.triggerSyncAllLibraries":async()=>{for(const e of Object.keys(E.default.libraries))E.default.forLibrary(e).sync(),await E.default.forLibrary(e).waitForSync()},...x.default})};t.default=z},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=a(r(418)),o=r(957),s=a(r(1381)),l=a(r(879)),c=r(40);let u=null;t.default=e=>(u||(u=new d(e)),u);class d{constructor(e){(0,i.default)(this,"libraries",{}),(0,i.default)(this,"syncClientHandler",e=>{const t=this.getSyncClient(e.data.libraryId||c.personalLibraryId);if(!t[e.data.fn])throw new Error(`Function ${e.data.fn} is not registered in syncClient`);return t[e.data.fn](...e.data.args)}),(0,i.default)(this,"modelHandler",async e=>{const t=this.getModel(e.data.libraryId||c.personalLibraryId);if(!t[e.data.fn])throw new Error(`Function ${e.data.fn} is not registered in model`);const r=["insertAttachment","insertAttachments","insertCollection","insertCollections","insertNote","insertPub","insertPubs","pushOrPullCollections","removeAttachment","removeAttachments","removeCollection","removeCollections","removeNote","removePub","removePubs","replacePub","updateAttachment","updateCollection","updateNote","updatePub","updatePubLinks","updatePubs","updatePubsCollections","updateSharedLibrary","updateUser","updateUserJSONField","triggerActionsByChange"].includes(e.data.fn),a=r?await this.getProgressStore(e.data.libraryId||c.personalLibraryId).startProgress():null,i=await t[e.data.fn](...e.data.args);return r&&this.getSyncClient(e.data.libraryId||c.personalLibraryId).sync().then(()=>a?this.getProgressStore(e.data.libraryId||c.personalLibraryId).endProgress(a):null).catch(t=>{this.logger.error("data-layer","Sync failed",t),a&&this.getProgressStore(e.data.libraryId||c.personalLibraryId).endProgress(a)}),i}),(0,i.default)(this,"citationStylesHandler",e=>{const t=this.getCitationStyles(e.data.libraryId||c.personalLibraryId);if(!t[e.data.fn])throw new Error(`Function ${e.data.fn} is not registered in citationStyles`);return t[e.data.fn](...e.data.args)}),(0,i.default)(this,"progressStoreHandler",e=>{const t=this.getProgressStore(e.data.libraryId||c.personalLibraryId);if(!t[e.data.fn])throw new Error(`Function ${e.data.fn} is not registered in progressStore`);return t[e.data.fn](...e.data.args)}),this.logger=e}initializeLibrary(e){if(this.libraries[e])return;const t=e===c.personalLibraryId,r="FMLogTest"===e;t||r||this.libraries[c.personalLibraryId]||this.initializeLibrary(c.personalLibraryId);const a=t?new o.Model(this.logger):new o.Model(this.logger,200,e,r?new l.default(e):new l.default("shared_"+e),r?void 0:this.libraries[c.personalLibraryId].model.db),i=new o.SyncClient(e,a,this.logger),n=new o.CitationStyles(a,this.logger),u=new s.default(this.logger),d=u.handleModelProgress.bind(u);a.on("modelProgress",d);const p=u.handleFilterMapProgress.bind(u);a.on("filterMapProgress",p),a.on("filterMapLogs",async t=>{var r;await(null===(r=this.queue)||void 0===r?void 0:r.addJob({libraryId:e,type:t.type,priority:1,data:t.data,tabId:0,broadcastType:"all",throttleStrategy:"exponential",throttleValue:15e3,timesMaxRun:10}))});const m=u.handleSyncProgress.bind(u);i.on("syncProgress",m),this.libraries[e]={model:a,syncClient:i,citationStyles:n,progressStore:u}}setQueue(e){this.queue=e}hasModel(e){return!!this.libraries[e]}getModel(e){return this.libraries[e]||this.initializeLibrary(e),this.libraries[e].model}getSyncClient(e){if("string"!=typeof e)throw new Error("Invalid argument to getSyncClient "+JSON.stringify(e));return this.libraries[e]||this.initializeLibrary(e),this.libraries[e].syncClient}getCitationStyles(e){return this.libraries[e]||this.initializeLibrary(e),this.libraries[e].citationStyles}getProgressStore(e){return this.libraries[e]||this.initializeLibrary(e),this.libraries[e].progressStore}onSyncProgress(e,t){this.getSyncClient(e).on("syncProgress",(0,n.default)(t,250))}onFilterMapUpdate(e,t){this.getModel(e).on("filterMapUpdate",t)}onPdfDownloadProgress(e,t){this.getModel(e).on("pdfDownloadProgress",t)}onJobUpdate(e,t){this.getModel(e).on("jobUpdate",t)}onProgressStoreUpdate(e,t){this.getProgressStore(e).on("progressStateUpdate",t)}}},,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=a(r(1177)),o=r(94),s=r(959),l=a(r(879)),c=a(r(1178)),u=r(439),d=r(511),p=a(r(960)),m=a(r(1179)),h=a(r(182)),g=r(40),f=a(r(1180)),b=a(r(1184)),y=a(r(1185)),v=a(r(1186)),_=a(r(1370)),w=a(r(1371)),P=a(r(1372)),S=a(r(1373)),C=a(r(1374)),A=a(r(1375)),E=a(r(1376)),T=a(r(1377)),k=a(r(1378)),x=a(r(1379));const{preRenderPubData:R}=o.ReferenceDL;t.default=class{constructor(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.personalLibraryId,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;(0,i.default)(this,"loggerLabel","data model"),(0,i.default)(this,"withChanges",(async function(e){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=await e();if(null!=a&&a.changes){const e=await t.sync.sanitizeChanges(a.changes);e.length&&r&&t.emit("filterMapUpdate",e)}return a})),(0,i.default)(this,"withProgress",async(e,t,r)=>{const{start:a,finish:i,error:n}=r;try{return a&&this.emit(e,a),await t()}catch(t){throw n&&this.emit(e,n),t}finally{i&&this.emit(e,i)}}),this.logger=e,this.filterSize=r,this.libraryId=a,this.db=n||new l.default,this.personalDB=o,this.emitter=new h.default,this.filterMapUtils=new c.default(r),this.general=new b.default(this.db,this.emitter,this.logger),this.sync=new _.default(this.db,this.general,this.logger),this.users=new y.default(this.db,this.general,this.logger),this.profiles=new E.default(this.db,this.logger),this.library=new v.default(this.db,this.general,this.filterMapUtils,this.logger),this.citations=new T.default(this.db,this.logger),this.sharedLibraries=new P.default(this.db,this.general,this.logger),this.permissions=new A.default(this.db,a,this.library,this.logger,this.personalDB),this.collections=new k.default(this.db,this.general,this.logger),this.files=new S.default(this.db,this.general,this.logger),this.attachments=new x.default(this.db,this.general,this.files,this.logger),this.notes=new C.default(this.db,this.general,this.logger),this.filterMap=new f.default(this.db,a,this.general,this.filterMapUtils,this.emitter,this.logger),this.jobs=new w.default(this.db,this.logger),this.init()}async init(){const{getLocalSettings:e}=this.general,t=await e();t.filterSizes||await this.recreateFilterMap(),this.general.timestampOffset=t.timestamp_offset||0,this.general.memoryCounts&&await this.general.getMemoryCounts()}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return this.emitter.emit(e,...r)}on(e,t){return this.emitter.on(e,t)}off(e,t){return this.emitter.off(e,t)}getLocalSettings(){return this.general.getLocalSettings()}setLocalSettings(){return this.general.setLocalSettings(...arguments)}async getChangesCount(){return this.general.getChangesCount()}async getUser(){return this.users.getUser()}async getCitationKeyConfig(){if(this.libraryId===g.personalLibraryId){const e=await this.getUser();return e&&e.citation_key_config&&"string"==typeof e.citation_key_config?e.citation_key_config:"{}"}const e=await this.sharedLibraries.get();if(e)return e&&e.citation_key_config&&"string"==typeof e.citation_key_config?e.citation_key_config:"{}"}async updateUser(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a={start:{total:{writing:1}},finish:{current:{writing:1}}},i=async()=>this.users.updateUser(...t);await this.withChanges(async()=>this.withProgress("modelProgress",i,a))}async updateUserJSONField(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a={start:{total:{writing:1}},finish:{current:{writing:1}}},i=async()=>this.users.updateUserJSONField(...t);await this.withChanges(async()=>this.withProgress("modelProgress",i,a))}async getProfiles(){return this.profiles.get(...arguments)}async setProfiles(){return this.profiles.set(...arguments)}async updateProfilesCache(){return this.profiles.updateCache(...arguments)}async clearProfiles(){return this.profiles.clear(...arguments)}async getProfileImageBase64(){return this.profiles.getProfileImageBase64(...arguments)}async getReferenceIds(){return this.filterMap.recreateLock&&await this.filterMap.recreateLock,this.library.getReferenceIds(...arguments)}async getReferenceIdsWithCustomCitationKeys(){return this.filterMap.recreateLock&&await this.filterMap.recreateLock,this.library.getReferenceIdsWithCustomCitationKeys()}async resetCitationKeys(){return this.library.resetCitationKeys(...arguments)}async getReferences(e){return this.library.getReferences(e)}async getFilterCounts(e){return this.library.getFilterCounts(e)}async getDuplicateEntriesByFilterQuery(){return this.library.getDuplicateEntriesByFilterQuery(...arguments)}async getDuplicateIds(e){return this.withProgress("modelProgress",()=>this.library.getDuplicateIds(e),{start:{total:{reading:1}},finish:{current:{reading:1}}})}async searchMultipleDuplicateIds(e){return this.withProgress("modelProgress",()=>this.library.searchMultipleDuplicateIds(e),{start:{total:{reading:1}},finish:{current:{reading:1}}})}async getDuplicateEntries(e,t,r){const a={start:{total:{reading:e.length}},finish:{current:{reading:e.length}}};return this.withProgress("modelProgress",()=>this.library.getDuplicateEntries(e,t,r),a)}async getPub(e){return this.library.getPub(e)}async getPubAttachments(e){return this.library.getPubAttachments(e)}async insertPub(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a=async()=>{this.filterMap.recreateLock&&await this.filterMap.recreateLock;await this.withChanges(async()=>{const[e,r]=t,a=await this.getCitationKeyConfig(),{changes:i}=await this.library.insertPub(e,r,a);return await this.useFilterMapAction(()=>this.filterMap.insertBulk([e],!(null==i||!i.length)),1),{changes:i}})};Object.defineProperty(a,"name",{value:"insertPub"}),await this.filterMap.addToQueue(a)}async insertPubs(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a=async()=>{this.filterMap.recreateLock&&await this.filterMap.recreateLock;const[e,r,a]=t,i=e.length>=this.filterSize,{changes:n}=await this.withChanges(async()=>{const t=await this.getCitationKeyConfig(),{changes:i}=await this.library.insertPubs(e,r,a,t);return{changes:i}},!i);i?await this.recreateFilterMap():await this.useFilterMapAction(()=>this.filterMap.insertBulk(e,!(null==n||!n.length)),e.length)};return Object.defineProperty(a,"name",{value:"insertPubs"}),this.filterMap.addToQueue(a)}async updatePub(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=async()=>{this.filterMap.recreateLock&&await this.filterMap.recreateLock;const a=await this.getCitationKeyConfig(),i=async()=>{const{changes:i,pub:n,shouldCalculateDuplicates:o}=await this.library.calculatePubUpdate(e,a||"{}",t,r,!!a);if(n&&n._id){const e=[n._id],r=[e,[n],t,i,o];await this.useFilterMapAction(()=>this.filterMap.updateBulk(...r),e.length)}return{changes:i}},n={start:{total:{writing:1}},finish:{current:{writing:1}}};await this.withChanges(async()=>this.withProgress("modelProgress",i,n))};return Object.defineProperty(a,"name",{value:"updatePub"}),this.filterMap.addToQueue(a)}async mergeDuplicatedPubs(e,t,r,a,i,n,o){await this.updatePubs(r,{trashed:1}),await this.replacePub(e,t);for(const e of a){const r=e._id||"";i[r]&&await this.updateAttachment(r,{...i[r].pub_id?{pub_id:i[r].pub_id}:{},...void 0!==i[r].article_pdf?{article_pdf:i[r].article_pdf}:{}});const a=await this.getAttachmentNotes(r);for(const e of a||[])await this.updateNote(e._id,{pub_id:t._id})}if(Object.keys(n).length)for(const e of Object.keys(n)){const r=n[e],a=await this.getAttachmentNotes(e);for(const e of a||[])await this.updateNote(e._id,{pub_id:t._id,attachment_id:r})}o.folders&&await this.pushOrPullCollections([e],"folders","push",o.folders),o.labels&&await this.pushOrPullCollections([e],"labels","push",o.labels),await this.removeAttachments(Object.keys(n))}async replacePub(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=await this.library.calculatePubReplace(e,t);return this.updatePub(e,a,r)}async updatePubs(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=async()=>{this.filterMap.recreateLock&&await this.filterMap.recreateLock;const i=await this.library.getIdsFromSelector(e,r),n=this.general.filterMapFlags.size>0,o=i.length>=this.filterSize,s=(0,u.getKeys)(t),l=1===s.length&&"starred"===s[0]&&n&&o&&a,c=o&&!l,d=!o&&!l,p=[],m=()=>this.db.getBulk("Library",i),h={start:{total:{reading:i.length,writing:i.length}},error:{current:{reading:i.length,writing:i.length}}},g={start:{current:{reading:i.length}},finish:{current:{writing:i.length}}},f=async()=>{const e=await this.getCitationKeyConfig()||"{}";if(l){const e=1===t.starred?"push":"pull";await this.filterMap.partialRecreate({pubIds:i,mainFilter:"ALL",filterIds:["STARRED"],type:s[0],action:e})}p.length||p.push(...await this.withProgress("modelProgress",m,h));const{library:r,changes:n,shouldCalculateDuplicates:u}=l?await(async()=>this.library.prepareUpdatePubs(p,t,e,!0,!0))():await(async()=>this.library.updatePubs(p,t,e,o,a,!!e))();if(l){const e=async()=>({changes:n});await this.withChanges(async()=>this.withProgress("modelProgress",e,g)),await this.library.updatePubsPartial(r,n)}if(c&&await this.recreateFilterMap(u),d){const e=p.filter(e=>!!e),r=[i,e,t,n,u];await this.useFilterMapAction(()=>this.filterMap.updateBulk(...r),i.length)}return{changes:n,shouldCalculateDuplicates:u}};l?await f():await this.withChanges(async()=>this.withProgress("modelProgress",f,g))};return Object.defineProperty(i,"name",{value:"updatePubs"}),this.filterMap.addToQueue(i)}async removePub(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a=async()=>{this.filterMap.recreateLock&&await this.filterMap.recreateLock;const[e,r]=t;if(!await this.db.get("Library",e))return;const a=async()=>(await this.useFilterMapAction(()=>this.filterMap.removeBulk([e],r),1),this.library.removePub(...t)),i={start:{total:{writing:1}},finish:{current:{writing:1}}};await this.withChanges(async()=>this.withProgress("modelProgress",a,i))};return Object.defineProperty(a,"name",{value:"removePub"}),this.filterMap.addToQueue(a)}async removePubs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=async()=>{this.filterMap.recreateLock&&await this.filterMap.recreateLock;const a=await this.library.getIdsFromSelector(e,t),i=a.length>=this.filterSize,n={start:{total:{writing:a.length}},finish:{current:{writing:a.length}}},o=async()=>{i||await this.useFilterMapAction(()=>this.filterMap.removeBulk(a,r),a.length);const{changes:e}=await this.library.removePubs(a,r);return i&&await this.recreateFilterMap(),{changes:e}};await this.withChanges(async()=>this.withProgress("modelProgress",o,n))};return Object.defineProperty(a,"name",{value:"removePubs"}),this.filterMap.addToQueue(a)}async updatePubLinks(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if("linked_from"===t[1].field)return void await this.updatePub(t[0],{linked_from:t[1].value},t[2]);const a=async()=>this.library.updatePubLinks(...t),i={start:{total:{writing:1}},finish:{current:{writing:1}}};await this.withChanges(async()=>this.withProgress("modelProgress",a,i))}async getCitationStyle(){return this.citations.getCitationStyle(...arguments)}async getCitationStyles(){return this.citations.getCitationStyles()}async getCitationLocale(){return this.citations.getCitationLocale(...arguments)}async getCitationLocales(){return this.citations.getCitationLocales()}async insertCitationStyle(){return this.citations.insertCitationStyle(...arguments)}async insertCitationStyleList(){return this.citations.insertCitationStyleList(...arguments)}async insertCitationLocales(){return this.citations.insertCitationLocales(...arguments)}async removeCitationStyle(){return this.citations.removeCitationStyle(...arguments)}async getSharedLibrary(){return this.sharedLibraries.get(...arguments)}async getOwnerId(){return this.sharedLibraries.getOwnerId()}async updateSharedLibrary(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a={start:{total:{writing:1}},finish:{current:{writing:1}}},i=async()=>this.sharedLibraries.update(...t);await this.withChanges(async()=>this.withProgress("modelProgress",i,a))}async getPermissions(){return this.permissions.get()}async deleteNotesUserLostAccessTo(e){if(this.libraryId===g.personalLibraryId)return;const{getTimestamp:t}=this.general;if(!(!!await this.getSharedLibrary(this.libraryId)&&!0===(0,o.parseCollectionSharingSettings)("{}").share_annotations)){const a=await this.getReferences(e);if(a.length){const e=new Set;for(const t of a)for(const r of(null==t?void 0:t.folders)||[])e.add(r);const i=new Set,n=await this.getCollections(Array.from(e));for(const e of n){if(!e||!e._id)continue;!0===(0,o.parseCollectionSharingSettings)(e.sharing_settings).share_annotations&&i.add(e._id)}const l=[];for(const e of a){var r;null==e||!e._id||null!==(r=e.folders)&&void 0!==r&&r.some(e=>i.has(e))||l.push(e._id)}if(l.length){const e=await this.db.getWhere("Attachments","pub_id",l),r=await this.db.getWhere("Notes","attachment_id",e.map(e=>e._id).filter(s.nonNullable));for(const e of r)await this.removeNote(e._id,!1),this.sync.changesCache.push((0,d.createOplogChange)("Notes",{_id:e._id},"remove",t()))}}}}async getCollection(){return this.collections.get(...arguments)}async getCollections(){return this.collections.getBulk(...arguments)}async getFolderAndSubfolderIds(){return this.collections.getFolderAndSubfolderIds(...arguments)}async insertCollection(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a=async()=>this.collections.insert(...t),i={start:{total:{writing:1}},finish:{current:{writing:1}}};await this.withChanges(async()=>this.withProgress("modelProgress",a,i))}async insertCollections(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a=async()=>this.collections.insertBulk(...t),i={start:{total:{writing:1}},finish:{current:{writing:1}}};await this.withChanges(async()=>this.withProgress("modelProgress",a,i))}async updateCollection(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a=async()=>this.collections.update(...t),i={start:{total:{writing:1}},finish:{current:{writing:1}}};await this.withChanges(async()=>this.withProgress("modelProgress",a,i))}async updatePubsCollections(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const i=await this.library.getIdsFromSelector(e,a);t.folders.length&&await this.pushOrPullCollections(i,"folders","push",t.folders,[]),r.folders.length&&await this.pushOrPullCollections(i,"folders","pull",r.folders,[]),t.labels.length&&await this.pushOrPullCollections(i,"labels","push",t.labels,[]),r.labels.length&&await this.pushOrPullCollections(i,"labels","pull",r.labels,[])}async pushOrPullCollections(e,t,r,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],l=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];const c=async()=>{this.filterMap.recreateLock&&await this.filterMap.recreateLock;const c=await this.library.getIdsFromSelector(e,i,!1);if(!Array.isArray(e)&&!e.mainFilter){var u;const e=await this.getReferenceIds({mainFilter:{data:"TRASHED"}},!0),t=(null==e||null===(u=e.data)||void 0===u?void 0:u.filter(e=>{var t,r;return(null==e||null===(t=e.folders)||void 0===t?void 0:t.some(e=>a.includes(e)))||(null==e||null===(r=e.labels)||void 0===r?void 0:r.some(e=>a.includes(e)))}).map(e=>null==e?void 0:e._id).filter(s.nonNullable))||[];for(const e of t)c.push(e)}const d=c.length>=this.filterSize,p=this.general.filterMapFlags.size>0&&l&&d&&o,m=l&&d&&!p,h=l&&!d,g={start:{total:{writing:c.length}},finish:{current:{writing:c.length}}},f=async()=>{p&&await this.filterMap.partialRecreate({pubIds:c,mainFilter:"ALL",filterIds:a,type:t,action:r});const{changes:e,collectionsMap:i,pubs:s}=p?await(async()=>this.collections.preparePushOrPull(c,t,r,a,o))():await(async()=>this.collections.pushOrPull(c,t,r,a,d,o,l))();if(p){const t=async()=>({changes:e});g.start.total.writing=e.length,g.finish.current.writing=e.length,await this.withChanges(async()=>this.withProgress("modelProgress",t,g)),await this.collections.pushOrPullPartial(s,e)}if(m&&await this.recreateFilterMap(n),h){const r=[c,s,{["_"+t]:i},e,n];await this.useFilterMapAction(()=>this.filterMap.updateBulk(...r),c.length)}return"folders"===t&&"pull"===r&&(await this.permissions.deletePubsUserLostAccessTo(c),await this.deleteNotesUserLostAccessTo(c)),{changes:e}};p?await f():await this.withChanges(async()=>this.withProgress("modelProgress",f,g))};return Object.defineProperty(c,"name",{value:"pushOrPullCollections"}),this.filterMap.addToQueue(c)}async getCollectionsInSelector(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const a=await this.library.getIdsFromSelector(t,r);return this.collections.getCollectionsInSelector(e,a)}async removeCollection(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=async()=>{const a=await this.collections.get(e);if(!a||"folder"!==a.collectionType&&"label"!==a.collectionType)return{changes:[]};const i="folder"===a.collectionType?await this.getFolderAndSubfolderIds([e]):[e],n={collections:{rule:"OR",data:i}},o="folder"===a.collectionType?"folders":"labels";if(t&&this.general.memoryCounts){await this.pushOrPullCollections(n,o,"pull",i,[],!1,!1,!1);const e=await this.getReferenceIds({collections:{data:i,rule:"OR"}});null!=e&&e.ids.length&&await this.updatePubs(e.ids,{trashed:1},[],r)}else await this.pushOrPullCollections(n,o,"pull",i,[],!1,r,!0);return this.collections.removeBulk(i,r)},i={start:{total:{writing:1}},finish:{current:{writing:1}}};await this.withChanges(async()=>this.withProgress("modelProgress",a,i))}async removeCollections(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=async()=>{const a=await this.collections.getBulk(e),i=e.filter(e=>a.every(t=>(null==t?void 0:t._id)!==e)),n=[],o=a.filter(e=>e&&("folder"===e.collectionType||"shared_folder"===e.collectionType)),s=a.filter(e=>e&&"label"===e.collectionType),l=o.map(e=>null==e?void 0:e._id).filter(e=>!!e),c=s.map(e=>null==e?void 0:e._id).filter(e=>!!e),u=[...c];if(l.length){const e=await this.collections.getFolderAndSubfolderIds(l);n.push({type:"folders",ids:e}),u.push(...e)}if(c.length&&n.push({type:"labels",ids:c}),t&&this.general.memoryCounts){for(const e of n){const t={collections:{rule:"OR",data:e.ids}},{type:r}=e;await this.pushOrPullCollections(t,r,"pull",e.ids,[],!1,!1,!1)}const e=await this.getReferenceIds({collections:{data:u,rule:"OR"}});null!=e&&e.ids.length&&await this.updatePubs(e.ids,{trashed:1},[],r)}else for(const e of n){const t={collections:{rule:"OR",data:e.ids}},{type:a}=e;await this.pushOrPullCollections(t,a,"pull",e.ids,[],!1,r,!0)}if(i.length){const e={collections:{rule:"OR",data:i}};await this.pushOrPullCollections(e,"folders","pull",i,[],!1,!1,!1),await this.pushOrPullCollections(e,"labels","pull",i,[],!1,!1,!1)}return this.collections.removeBulk(u,r)},i={start:{total:{writing:1}},finish:{current:{writing:1}}};await this.withChanges(async()=>this.withProgress("modelProgress",a,i))}async getAttachment(){return this.attachments.get(...arguments)}async getAllAttachments(){return this.attachments.getAll()}async insertAttachment(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a=async()=>{this.filterMap.recreateLock&&await this.filterMap.recreateLock;const e=async()=>{const{changes:e,flags:r,pub:a,data:i}=await this.attachments.insert(...t),{hasPdfs:n,hasAttachments:o,isValidPdf:s}=r;if(!n&&s||!o){const e={_attachments:{[i.pub_id]:{data:[i],pdfCounts:1,attachmentCounts:1,action:"add"}}},t=[i.pub_id],r=[t,[a],e,void 0,!1];await this.useFilterMapAction(()=>this.filterMap.updateBulk(...r),t.length)}return{changes:e}},r={start:{total:{writing:1}},finish:{current:{writing:1}}};await this.withChanges(async()=>this.withProgress("modelProgress",e,r))};return Object.defineProperty(a,"name",{value:"insertAttachment"}),this.filterMap.addToQueue(a)}async insertAttachments(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a=t[0],i=async()=>{this.filterMap.recreateLock&&await this.filterMap.recreateLock;const e=a.length>=this.filterSize,r=async()=>{let r={changes:[]};if(e)r=await this.attachments.insertBulk(...t),await this.recreateFilterMap(!1);else{const{attachmentsMap:e,pubs:i}=await this.attachments.createInsertBulkMap(a);if(r=await this.attachments.insertBulk(...t),i.length){const t=i.map(e=>e._id),r=[t,i,{_attachments:e},void 0,!1];await this.useFilterMapAction(()=>this.filterMap.updateBulk(...r),t.length)}}return r},i={start:{total:{reading:a.length,writing:a.length}},finish:{current:{reading:a.length,writing:a.length}}};await this.withChanges(async()=>this.withProgress("modelProgress",r,i))};return Object.defineProperty(i,"name",{value:"insertAttachments"}),this.filterMap.addToQueue(i)}async updateAttachment(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a=async()=>{const e=async()=>this.attachments.update(...t),r={start:{total:{writing:1}},finish:{current:{writing:1}}},{shouldUpdateArticlePdf:a}=await this.withChanges(async()=>this.withProgress("modelProgress",e,r));if(a){const e=await this.attachments.get(t[0]);e&&await this.ensureMainPdf(e.pub_id,t[0])}};return Object.defineProperty(a,"name",{value:"updateAttachment"}),this.filterMap.addToQueue(a)}async removeAttachment(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a=async()=>{this.filterMap.recreateLock&&await this.filterMap.recreateLock;const e=async()=>{const{changes:e,shouldUpdateArticlePdf:r,pub:a,filterData:i}=await this.attachments.remove(...t);if(i){const{pub:e,attachment:t,nMainPdf:r,nSubPdf:a,nAttachments:n}=i,o={_attachments:{[e._id]:{data:[t],pdfCounts:r,attachmentCounts:a+n,action:"remove"}}},s=[e._id],l=[s,[e],o,void 0,!1];await this.useFilterMapAction(()=>this.filterMap.updateBulk(...l),s.length)}return{changes:e,shouldUpdateArticlePdf:r,pub:a}},r={start:{total:{writing:1}},finish:{current:{writing:1}}},{shouldUpdateArticlePdf:a,pub:i}=await this.withChanges(async()=>this.withProgress("modelProgress",e,r));a&&i&&await this.ensureMainPdf(i._id,t[0])};return Object.defineProperty(a,"name",{value:"removeAttachment"}),this.filterMap.addToQueue(a)}async removeAttachments(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=async()=>{this.filterMap.recreateLock&&await this.filterMap.recreateLock;const r=e.length>=this.filterSize,a=async()=>{const{changes:a,attachmentsMap:i,shouldUpdateArticlePdf:n,pubs:o}=await this.attachments.removeBulk(e,t,r);if(r)await this.recreateFilterMap(!1);else if(o.length){const e=o.map(e=>e._id),t=[e,o,{_attachments:i},void 0,!1];await this.useFilterMapAction(()=>this.filterMap.updateBulk(...t),e.length)}return{changes:a,shouldUpdateArticlePdf:n,pubs:o}},i={start:{total:{writing:e.length}},finish:{current:{writing:e.length}}},{shouldUpdateArticlePdf:n,pubs:o}=await this.withChanges(async()=>this.withProgress("modelProgress",a,i));if(n&&o.length)for(const e of o)await this.ensureMainPdf(e._id)};return Object.defineProperty(r,"name",{value:"removeAttachments"}),this.filterMap.addToQueue(r)}async ensureMainPdf(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a=async()=>{const{changes:e,attachmentsMap:r,shouldUpdateFilterMap:a,pub:i}=await this.attachments.ensureMainPdf(...t);if(a&&i){const e=[i._id],t=[e,[i],{_attachments:r},void 0,!1];await this.useFilterMapAction(()=>this.filterMap.updateBulk(...t),e.length)}return{changes:e}};await this.withChanges(async()=>a())}async getFile(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return await this.ensureFileExists(...t),this.withProgress("modelProgress",async()=>this.files.get(...t),{start:{total:{reading:1}},finish:{current:{reading:1}}})}async getUnsyncedAttachmentFilesCount(){const e=await this.files.getFilesIds();return(await this.general.getBulk("Attachments",e)).reduce((e,t)=>null!=t&&t.s3_md5?e:e+1,0)}async getChunkedFile(){await this.ensureFileExists(arguments.length<=0?void 0:arguments[0]);const e=await this.files.getChunked(...arguments),t={...e&&0===(arguments.length<=1?void 0:arguments[1])&&{start:{total:{reading:e.totalChunks}}},finish:{current:{reading:1}}};return await this.withProgress("modelProgress",()=>null,t),e}async getFileURL(){return this.files.getURL(...arguments)}async getFileStatistics(){return this.files.getStatistics(...arguments)}getFileCount(){return this.files.getFileCount(...arguments)}async insertFile(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.withProgress("modelProgress",async()=>this.files.insert(...t),{start:{total:{writing:1}},finish:{current:{writing:1}}})}async insertFileChunk(){return this.files.insertChunk(...arguments)}async updateFile(){return this.files.update(...arguments)}async updateFileChunk(){return this.files.updateChunk(...arguments)}async checkIfFileExists(){return this.files.checkIfFileExists(...arguments)}async ensureFileExists(e){const{pub:t,attachment:r,result:a}=await this.withProgress("modelProgress",async()=>this.files.checkIfValidFile(e),{start:{total:{reading:1}},finish:{current:{reading:1}}});if(a)return!0;return this.withProgress("modelProgress",async()=>{const a=r?await(0,m.default)(r._id,e=>{this.emit("pdfDownloadProgress",{...e,attachment:r,pub:t})},this.logger):void 0;return!!a&&(await this.files.insertBlob(r,a),this.files.checkIfFileExists(e))},{start:{total:{writing:1}},finish:{current:{writing:1}}})}async checkExistingFiles(){return this.files.checkExistingFiles(...arguments)}async removeFile(){return this.files.remove(...arguments)}async removeFiles(){return this.files.removeBulk(...arguments)}async clearFiles(){return this.files.clear()}async deleteSyncedFiles(){return this.files.deleteSyncedFiles()}async getNote(){return this.notes.get(...arguments)}async getAttachmentNotes(){return this.notes.getAttachmentNotes(...arguments)}async insertNote(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a={start:{total:{writing:1}},finish:{current:{writing:1}}},i=async()=>this.notes.insert(...t);await this.withChanges(async()=>this.withProgress("modelProgress",i,a))}async updateNote(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a={start:{total:{writing:1}},finish:{current:{writing:1}}},i=async()=>this.notes.update(...t);await this.withChanges(async()=>this.withProgress("modelProgress",i,a))}async removeNote(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a={start:{total:{writing:1}},finish:{current:{writing:1}}},i=async()=>this.notes.remove(...t);await this.withChanges(async()=>this.withProgress("modelProgress",i,a))}async recreateFilterMap(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t={start:{total:{writing:1}},finish:{current:{writing:1}}},r=async()=>(await this.filterMap.recreate(e),{changes:this.sync.changesCache});await this.withChanges(async()=>this.withProgress("modelProgress",r,t)),this.sync.changesCache=[]}async checkFilterMapIntegrity(){const e=await this.filterMap.checkIntegrity();return e||await this.recreateFilterMap(),e}async checkFilterMapSyncStatus(){if(!await this.filterMap.checkSyncStatus())throw await this.recreateFilterMap(),new Error("FilterMap out of sync")}async verifyDB(e){try{const t=(e,t)=>{if(e>t)throw new Error("Count must be higher than Max");const r=new Set;for(;r.size<e;){const e=Math.floor(Math.random()*t)+1;r.add(e)}return Array.from(r)},r=async e=>{const r=await this.db.table(e).toArray(),a=r.length;if(r.length>1e4){r.sort((e,t)=>String(e.created||e._id||"").localeCompare(String(t.created||t._id||"")));const a=r.splice(1e3);for(const i of t(9e3,a.length-1)){if(!a[i])throw new Error(`Failed to find document. Collection ${e}, index: ${i}, docsLength: ${a.length}`);r.push(a[i])}}r.sort((e,t)=>(e._id||"").localeCompare(t._id||"","en-US"));return{hash:await(0,p.default)(JSON.stringify(r,o.syncUtils.sortingReplacer)),count:a,ids:r.map(e=>e._id)}},a={storeDatabasesOnFailure:e,libraryId:this.libraryId,libraryOwner:await this.getOwnerId(),hashes:{Attachments:await r("Attachments"),Collections:await r("Collections"),Library:await r("Library"),Notes:await r("Notes"),SharedLibraries:await r("SharedLibraries"),Users:await r("Users")}},i="https://api.paperpile.com",s=await fetch(`${i}/api/sync/verify?v=${o.syncUtils.SYNC_VERIFY_VERSION}`,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(400===s.status){if(e){const e=await s.json(),t="error"in e&&"details"in e.error&&"signedUrl"in e.error.details&&e.error.details.signedUrl||void 0;if(!t)return this.logger.error("sync verify","Sync DB verification failed, but no signedUrl in response"),{ok:!1,error:"NO_SIGNED_URL"};const r=await this.db.exportData(),a=n.default.gzip(await r.dbBlob.arrayBuffer());await fetch(t,{credentials:"include",method:"PUT",body:a,headers:{"Content-Type":"application/json","Content-Encoding":"gzip"}})}return{ok:!1,error:"DB_MISMATCH"}}return{ok:!0}}catch(e){this.logger.error("sync verify","checking global hash failed: ",e)}return{ok:!1,error:"UNKNOWN"}}async useFilterMapAction(e,t){const r={start:{total:{writing:t}},finish:{current:{writing:t}}};await this.withProgress("filterMapProgress",e,r)}async exportFilterLog(){return this.filterMap.exportFilterLog()}async importFilterLog(e){return this.filterMap.importFilterLog(e)}async insertFilterLogJson(e){return this.db.addBulk("FilterMapLogs",e)}async nextFilterLogAction(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.filterMap.nextFilterLogAction(e)}async previousFilterLogAction(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.filterMap.previousFilterLogAction(e)}async goToFilterLogAction(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return this.filterMap.goToFilterLogAction(e)}async getJob(){return this.jobs.get(...arguments)}async getAllJobs(){return this.jobs.getAll()}async getJobsCount(e){return this.jobs.count(e)}async insertJob(){await this.jobs.insert(...arguments),this.emit("jobUpdate",arguments.length<=0?void 0:arguments[0])}async insertJobs(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];await this.jobs.insertMany(...t);for(const e of t[0])this.emit("jobUpdate",e)}async updateJob(){await this.jobs.update(...arguments),this.emit("jobUpdate",{_id:arguments.length<=0?void 0:arguments[0],...arguments.length<=1?void 0:arguments[1]})}async removeJob(){await this.jobs.remove(...arguments)}async clearJobs(){await this.jobs.clear(...arguments)}async saveBulk(){await this.general.saveBulk(...arguments)}async putBulk(){await this.general.putBulk(...arguments)}async getBulk(e,t){return this.general.getBulk(e,t)}async getAll(e){return this.general.getAll(e)}async getAllChunked(){return this.general.getAllChunked(...arguments)}async updateBulk(){await this.general.updateBulk(...arguments)}async removeBulk(){await this.general.removeBulk(...arguments)}async wipeAll(){await this.general.wipeAll(),this.sync.syncInfo={type:null,totalServerChanges:0,totalUploads:0,processedChanges:0}}async isEmpty(){return this.general.isEmpty()}setSyncInfo(){this.sync.setSyncInfo(...arguments)}async getOplog(){return this.sync.getOplog()}async completeOplogData(){return this.sync.completeOplogData(...arguments)}async clearOplog(){return this.sync.clearOplog(...arguments)}getChangesBackup(){return this.sync.getChangesBackup()}insertChangesBackupBulk(){return this.sync.insertChangesBackupBulk(...arguments)}clearChangesBackup(){return this.sync.clearChangesBackup()}async removeSyncedData(){await this.general.removeSyncedData(),await this.recreateFilterMap(!0)}async triggerActionsByChange(){const{changes:e}=await this.sync.triggerActionsByChange(...arguments);e.length&&(await this.applyServerChanges(e,()=>({})),await this.withChanges(async()=>({changes:e})))}async finishSync(){const e=async()=>{this.filterMap.recreateLock&&await this.filterMap.recreateLock,this.sync.duplicateSyncError=!1,await this.general.getMemoryCounts();const e=await this.filterMap.rebalanceData(this.sync.syncInfo,this.recreateFilterMap.bind(this));this.sync.setSyncInfo({processedChanges:0}),!e&&this.general.duplicateUpdatePubs.length&&await this.general.updateDuplicates(),await this.withChanges(async()=>({changes:this.sync.changesCache})),this.sync.changesCache=[]};return Object.defineProperty(e,"name",{value:"finishSync"}),this.filterMap.addToQueue(e,!1)}async reapplyChangesBackup(e){for(const t of e)for(const e of Array.isArray(t.id)?t.id:[t.id])"Library"===t.mcollection?"insert"===t.action&&t.data?await this.insertPub(t.data):"update"===t.action&&t.data?await this.updatePub(e,t.data):"remove"===t.action&&await this.removePub(e):"Attachments"===t.mcollection?"insert"===t.action&&t.data?await this.insertAttachment(t.data):"update"===t.action&&t.data?await this.updateAttachment(e,t.data):"remove"===t.action&&await this.removeAttachment(e):"Collections"===t.mcollection?"insert"===t.action&&t.data?await this.insertCollection(t.data):"update"===t.action&&t.data?await this.updateCollection(e,t.data):"remove"===t.action&&await this.removeCollection(e):"Notes"===t.mcollection?"insert"===t.action&&t.data?await this.insertNote(t.data):"update"===t.action&&t.data?await this.updateNote(e,t.data):"remove"===t.action&&await this.removeNote(e):"Users"===t.mcollection&&"update"===t.action&&t.data&&await this.updateUser(t.data)}async applyServerChanges(e,t){let r={text:"Startup"};try{var a,i,n,l;const{getTimestamp:f}=this.general,{totalServerChanges:b,processedChanges:y}=this.sync.syncInfo,v={};let _=b>=this.filterSize,w=e;if(this.sync.duplicateSyncError||0===y){for(const e of w)"insert"===e.action&&e.data&&(v[e.mcollection]||(v[e.mcollection]={searchIds:[],entriesToReplace:[]}),v[e.mcollection].searchIds.push(e.data._id));const t=(0,u.getKeys)(v);for(const e of t){const t=v[e];if(!t)continue;const r=(await this.db.getBulk(e,t.searchIds)).filter(e=>!!e).map(e=>e._id);r.length&&(v[e].entriesToReplace.push(...w.filter(e=>r.some(t=>"data"in e&&e.data&&"_id"in e.data&&t===e.data._id)).map(e=>"data"in e&&e.data||{})),w=w.filter(e=>!r.some(t=>"data"in e&&e.data&&"_id"in e.data&&t===e.data._id)))}w.length!==e.length&&(this.sync.duplicateSyncError=!0)}this.sync.setSyncInfo({processedChanges:y+e.length}),this.logger.time(this.loggerLabel,"applyServerChangesBulk");for(const e of w)this.sync.changesCache.push(e);const P=((null===(a=this.general.memoryCounts)||void 0===a||null===(i=a.ALL_counts)||void 0===i?void 0:i.total)||0)+((null===(n=this.general.memoryCounts)||void 0===n||null===(l=n.TRASHED_counts)||void 0===l?void 0:l.total)||0),S={Users:[],Collections:[],Library:[],Attachments:[],Notes:[],SharedLibraries:[],Permissions:[]},C={},A={Notes:[],Attachments:[],Library:[],Collections:[],Users:[],SharedLibraries:[],Permissions:[]},E={},T=[];for(const e of w){if(r=e,!("mcollection"in e)){if("permission-removed"===e.action){var c;const t=!1,r=e.data.folder_id;if(!this.personalDB)throw new Error("Expected PersonalDB to be present when permission-removed Change comes");const a=await this.getReferenceIds({collections:{data:[r],rule:"OR"}},!0),i=await this.getReferenceIds({mainFilter:{data:"TRASHED"}},!0),n=(null==i||null===(c=i.data)||void 0===c?void 0:c.filter(e=>{var t;return null==e||null===(t=e.folders)||void 0===t?void 0:t.includes(r)}))||[],s=[...(null==a?void 0:a.data)||[],...n],l=await this.personalDB.getAll("Permissions"),u=l.filter(e=>e.library_id===this.libraryId).filter(t=>!(t.folder_id===r&&t.group_id===e.data.group_id)&&o.Permissions.isCollectionAccessLevelPositive(t.access_level)).map(e=>e.folder_id);if(!u.some(e=>"ROOT"===e)){if(s.length){const e=[];for(const t of s){var p;null==t||!t._id||null!==(p=t.folders)&&void 0!==p&&p.some(e=>u.includes(e))||e.push(t._id)}e.length&&(await this.removePubs(e,[],t),this.sync.changesCache.push(...e.map(e=>(0,d.createOplogChange)("Library",{_id:e},"remove",f()))))}u.includes(r)||(await this.removeCollections([r],!1,!1),this.sync.changesCache.push((0,d.createOplogChange)("Collections",{_id:r},"remove",f())))}}"share-annotations-disabled"===e.action&&T.push(e.id),t(1);continue}const{action:a,mcollection:i,fields:n}=e;for(const r of Array.isArray(e.id)?e.id:[e.id]){const o=e.data?{...e.data,_id:r}:void 0;if(["SharedLibraries","Permissions"].includes(e.mcollection))"insert"===e.action&&o?(await this.db.add(i,o),t(1)):"update"===e.action&&o?(await this.db.update(i,r,o),t(1)):"remove"===a&&(await this.db.remove(i,r),t(1));else if("insert"===a&&o&&((S[i]||(S[i]=[])).push(o),"Library"!==i||P||(_=!0)),"remove"===a&&(A[i]||(A[i]=[])).push(r),"update"===a)if("Library"===i){const t=null==n?void 0:n[0],a=["labels","folders"].includes(t||"");if(a&&(e.pull||e.push)){const a=t;if(e.pull){const t="pull:"+JSON.stringify(e.pull);E[t]?E[t].pubIds.push(r):E[t]={pubIds:[r],collIds:e.pull,type:a}}if(e.push){const t="push:"+JSON.stringify(e.push);E[t]?E[t].pubIds.push(r):E[t]={pubIds:[r],collIds:e.push,type:a}}}else if(o){const t=JSON.stringify(e.data);C[t]?C[t].ids.push(r):C[t]={ids:[r],data:e.data}}}else o&&(await this.db.update(i,r,o),t(1))}}if(T.length>0){const e=await this.getSharedLibrary(this.libraryId);if(!(!!e&&!0===(0,o.parseCollectionSharingSettings)("{}").share_annotations)){var m;const e=await this.getReferenceIds(T.includes("ROOT")?{}:{collections:{data:T,rule:"OR"}},!0),t=await this.getReferenceIds({mainFilter:{data:"TRASHED"}},!0),r=(null==t||null===(m=t.data)||void 0===m?void 0:m.filter(e=>{var t;return T.includes("ROOT")||(null==e||null===(t=e.folders)||void 0===t?void 0:t.some(e=>T.includes(e)))}))||[],a=[...(null==e?void 0:e.data)||[],...r];if(a.length){const e=new Set;for(const t of a)for(const r of(null==t?void 0:t.folders)||[])e.add(r);const t=new Set,r=await this.getCollections(Array.from(e));for(const e of r){if(!e||!e._id)continue;!0===(0,o.parseCollectionSharingSettings)(e.sharing_settings).share_annotations&&t.add(e._id)}const i=[];for(const e of a){var h;null==e||!e._id||null!==(h=e.folders)&&void 0!==h&&h.some(e=>t.has(e))||i.push(e._id)}if(i.length){const e=await this.db.getWhere("Attachments","pub_id",i),t=await this.db.getWhere("Notes","attachment_id",e.map(e=>e._id).filter(s.nonNullable));for(const e of t)await this.removeNote(e._id,!1),this.sync.changesCache.push((0,d.createOplogChange)("Notes",{_id:e._id},"remove",f()))}}}}this.logger.time(this.loggerLabel,"addBulk");let k=(0,u.getKeys)(C);if(!_){for(const e of k)C[e].data&&(r=C[e],await this.updatePubs(C[e].ids,C[e].data,[],!1),t(C[e].ids.length));S.Library.length&&(r=S.Library,await this.insertPubs(S.Library,!1,!1),t(S.Library.length)),S.Attachments.length&&(r=S.Attachments,await this.insertAttachments(S.Attachments,!1,!1),t(S.Attachments.length)),A.Library.length&&(r=A.Library,await this.removePubs(A.Library,[],!1),t(A.Library.length)),A.Attachments.length&&(r=A.Attachments,await this.removeAttachments(A.Attachments,!1),t(A.Attachments.length)),A.Collections.length&&(r=A.Collections,await this.removeCollections(A.Collections,!1,!1),t(A.Collections.length)),S.Library=[],S.Attachments=[],A.Library=[],A.Attachments=[],A.Collections=[],k=[]}for(const e of Object.keys(E)){const t=e.split(":")[0],{pubIds:a,collIds:i,type:n}=E[e];r={key:e,value:E[e]},await this.pushOrPullCollections(a,n,t,i,[],!1,!1,!0)}if(k.length){r={updateKeys:k};const e=[];for(const t of k)C[t].data&&e.push(...C[t].ids);const a=await this.db.getBulk("Library",e),i={};for(const e of a)e&&(i[e._id]=e);let n=0;for(const e of k)if(C[e].data){for(const t of C[e].ids)i[t]&&(i[t]={...i[t],...C[e].data});n+=C[e].ids.length}await this.db.putBulk("Library",Object.values(i)),t(n)}for(const e of(0,u.getKeys)(S)){if(r={key:e,bulkInsertValue:S[e]},"Library"===e){for(const e of S.Library)e.__render=R(e);const e=await this.getCitationKeyConfig(),t=await this.library.handleCitations(S.Library,!1,e);t.length>0&&await this.db.addBulk("Changes",t)}S[e].length>0&&(await this.db.addBulk(e,S[e]),t(S[e].length))}this.logger.timeEnd(this.loggerLabel,"addBulk");const x={};for(const e of Object.keys(A))x[e]=A[e].length;if(A.Library.length>0){r={bulkRemoveLibrary:A.Library};const e=await this.db.getWhere("Attachments","pub_id",A.Library);A.Attachments.push(...e.map(e=>e._id))}if(A.Attachments.length>0){r={bulkRemoveAttachments:A.Attachments};const e=await this.db.getWhere("Notes","attachment_id",A.Attachments);A.Notes.push(...e.map(e=>e._id)),await this.db.removeBulk("Files",A.Attachments)}this.logger.time(this.loggerLabel,"removeBulk");for(const e of Object.keys(A))if(A[e].length>0&&(r={key:e,bulkRemoveValues:A[e]},await this.db.removeBulk(e,A[e]),t(x[e]),"Collections"===e)){const t={collections:{rule:"OR",data:A[e]}};await this.pushOrPullCollections(t,"folders","pull",A[e],[],!1,!1,!1),await this.pushOrPullCollections(t,"labels","pull",A[e],[],!1,!1,!1)}this.logger.timeEnd(this.loggerLabel,"removeBulk");let I=0;const L=(0,u.getKeys)(v);for(const e of L){var g;const r=null===(g=v[e])||void 0===g?void 0:g.entriesToReplace;if(r&&r.length){if("Library"===e){const e=r;for(const t of e)t.__render=R(t);const t=await this.getCitationKeyConfig(),a=await this.library.handleCitations(e,!1,t);a.length>0&&await this.db.addBulk("Changes",a)}await this.db.putBulk(e,r),t(r.length),I+=r.length}}I>0&&(r={text:"recreating filter map"},await this.recreateFilterMap()),!_||P||I||(r={text:"recreating filter map"},await this.recreateFilterMap())}catch(a){if(["Key already exists in the object store","an object such as an object store or index already exists"].some(e=>a.message.includes(e))&&!1===this.sync.duplicateSyncError)return this.logger.errorNoNotify(this.loggerLabel,"applyServerChangesBulk: key already exists, fall back to 'put', context: "+JSON.stringify(r),a),this.sync.duplicateSyncError=!0,void await this.applyServerChanges(e,t);throw this.sync.duplicateSyncError=!1,this.sync.setSyncInfo({processedChanges:0}),this.logger.error(this.loggerLabel,"applyServerChangesBulk: context: "+JSON.stringify(r),a),a}this.logger.timeEnd(this.loggerLabel,"applyServerChangesBulk")}}},,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(807),o=r(94),s=r(35),l=r(439);const{mainFilters:c,subFilters:u,filterToField:d,filterFlags:p}=o.FM;t.default=class{constructor(e){(0,i.default)(this,"handleFilterChecks",async(e,t,r,a)=>{const i=e.mainFilter.data,n=e.mainType.data,{filter:o,collections:s}=e,c=(0,l.getEntries)(p);for(const e of r){if("string"!=typeof e)continue;const r=e.split("~"),l=+r[3],u=l&p.trashed,d=l&p.starred;if(["ALL","STARRED"].includes(i)&&u)continue;if("TRASHED"===i&&!u)continue;if("STARRED"===i&&!d)continue;if(o.data.length){let e=!1,t=0;for(const r of o.data)if("OR"!==o.rule||e||(e=!!(l&(p[r]||0))),"AND"===o.rule){!!(l&(p[r]||0))&&(t+=1)}if(t===o.data.length&&(e=!0),!e)continue}if(a&&s.data.length){if(u)continue;if(s.data.length>1){const{rule:t,data:r}=s;if("OR"===t&&!r.some(t=>a[e].includes(t)))continue;if("AND"===t&&!r.every(t=>a[e].includes(t)))continue}}const m=r[2];(!n.length||n.includes(m)||n.includes("PP_ARTICLE")&&"ST_REVIEW"===m)&&(t.ids.push(r[1]),t.count.total+=1);for(const[e,r]of c){if(r>l)break;if(l&r){if("starred"===e||"trashed"===e)continue;t.count[e]?t.count[e]+=1:t.count[e]=1}}t.count[m]?t.count[m]+=1:t.count[m]=1,"ST_REVIEW"===m&&(t.count.PP_ARTICLE?t.count.PP_ARTICLE+=1:t.count.PP_ARTICLE=1)}}),(0,i.default)(this,"handleFilterChecksDB",(e,t,r,a,i)=>{const n=e.mainFilter.data,o=e.mainType.data,{filter:s,collections:c}=e,u=(0,l.getEntries)(p),d={},m=[];for(const e of r){if("string"!=typeof e)continue;const t=e.split("~");m.push(t[1]),d[t[1]]={entry:e,splits:t}}for(const e of m){var h;const{entry:r,splits:l}=d[e],m=(null===(h=a.get(e))||void 0===h?void 0:h.flags)||+l[3]||0,g=m&p.trashed,f=m&p.starred;if(["ALL","STARRED"].includes(n)&&g)continue;if("TRASHED"===n&&!g)continue;if("STARRED"===n&&!f)continue;if(s.data.length){let e=!1,t=0;for(const r of s.data)if("OR"!==s.rule||e||(e=!!(m&(p[r]||0))),"AND"===s.rule){!!(m&(p[r]||0))&&(t+=1)}if(t===s.data.length&&(e=!0),!e)continue}if(i&&r&&c.data.length){if(g)continue;if(c.data.length>1){const{rule:e,data:t}=c;if("OR"===e&&!t.some(e=>i[r].includes(e)))continue;if("AND"===e&&!t.every(e=>i[r].includes(e)))continue}}const b=l[2];(!o.length||o.includes(b)||o.includes("PP_ARTICLE")&&"ST_REVIEW"===b)&&(t.ids.push(l[1]),t.count.total+=1);for(const[e,r]of u){if(r>m)break;if(m&r){if("starred"===e||"trashed"===e)continue;t.count[e]?t.count[e]+=1:t.count[e]=1}}t.count[b]?t.count[b]+=1:t.count[b]=1,"ST_REVIEW"===b&&(t.count.PP_ARTICLE?t.count.PP_ARTICLE+=1:t.count.PP_ARTICLE=1)}}),(0,i.default)(this,"getFilterStringSorter",()=>{const{compare:e}=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return(0,n.createNewSortInstance)({comparer:(t,r)=>{const a=t.split("~"),i=r.split("~"),n=a[0],o=i[0],s=e(n,o);if(0!==s)return s;const l=a[1],c=i[1];return e(l,c)},inPlaceSorting:!0})}),this.filterSize=e}calculatePartialFilter(e,t,r){const a=this.calculatePubProperties(e,t),i=a.trashed?[]:Object.keys(a.collections),n=[...c,...i];for(const t of n)if(("ALL"!==t||!a.trashed)&&("TRASHED"!==t||a.trashed)&&("STARRED"!==t||a.starred)&&("STARRED"!==t||!a.trashed))for(const i of u){const n=`${t}_${i}`,{field:o}=d[i],s={...a.filter,...a.starred?{starred:a.starred}:{},...a.trashed?{trashed:a.trashed}:{}},c=(0,l.getKeys)(a.type),u=c.find(e=>"ST_REVIEW"===e)||c[0],p={id:e._id,sort:a.sorting[o],type:u,filter:s};r&&(r[n]||(r[n]=[])).push(p)}}createFilterMap(e,t){const r={},a=[];if(!e||!t)return{filterMap:r,filterMapCounts:a};for(const a of e){if(!a||!a._id)continue;const e=t.filter(e=>void 0!==e&&e.pub_id===a._id);this.calculatePartialFilter(a,e,r)}for(const e of(0,l.getKeys)(r)){const t=e.split("_");if(r[e]=(0,n.sort)(r[e]).by([{desc:e=>e.sort},{desc:e=>e.id}]),-1===a.findIndex(e=>e._id.includes(t[0]))){const i=this.getMemoryCount(r[e]);a.push({_id:t[0]+"_counts",data:i})}}return{filterMap:r,filterMapCounts:a}}createFilterObject(e,t,r){const a=t.filter(t=>void 0!==t&&t.pub_id===e._id),i=this.calculatePubProperties(e,a),n={...i.filter,...i.starred?{starred:i.starred}:{},...i.trashed?{trashed:i.trashed}:{}},{field:o}=d[r];return{id:e._id,sort:i.sorting[o],type:(0,l.getKeys)(i.type)[0],filter:n}}getMemoryCount(e){const t=e.filter(e=>!("total"in e)),r={total:t.length},a=e=>!["starred","trashed"].includes(e);for(const e of t){const t=(0,l.getKeys)(e.filter).filter(a),i=[..."ST_REVIEW"===e.type?["PP_ARTICLE"]:[],e.type,...t];for(const e of i)r[e]?r[e]+=1:r[e]=1}return r}splitFilterKeys(e,t){if(t.length<=this.filterSize)return[{_id:`${e}_${t[0].sort}`,data:t}];const r=[],a=Math.ceil(t.length/this.filterSize),i=Math.floor(t.length/a),n=/.*?-(\d+$)/;let o=999999;for(let s=0;s<a;s+=1){const l=s<a-1?t.slice(s*i,(s+1)*i):t.slice(s*i),c=r.filter(t=>t._id.includes(`${e}_${l[0].sort}`));if(c.length){for(const e of c){const t=r.findIndex(t=>t._id.includes(e._id));-1===t||n.test(e._id)||(r[t]._id=`${r[t]._id}-${o}`,o-=1)}r.push({_id:`${e}_${l[0].sort}-${o}`,data:l}),o-=1}else r.push({_id:`${e}_${l[0].sort}`,data:l})}return r}encodeFilters(e,t){const r=[],a=[],i=(0,l.getKeys)(e),n={};for(const o of i){const i=e[o],s=this.splitFilterKeys(o,i),c={},u=o.split("_")[0]+"_subCounts";r.push({_id:o,data:[]}),c[o]={total:0};for(const e of s){const a={_id:t>this.filterSize?e._id:o,data:[]};c[a._id]={total:e.data.length};for(const t of e.data){const e=(0,l.getKeys)(t.filter).reduce((e,t)=>e+=p[t],0),r=`${t.sort}~${t.id}~${t.type}~${e}`;n[t.id]||(n[t.id]={flags:e,type:t.type}),a.data.push(r)}const i=r.findIndex(e=>e._id===a._id);-1!==i?r[i].data.push(...a.data):r.push(a)}const d=a.findIndex(e=>e._id===u);-1===d?a.push({_id:u,data:c}):a[d].data={...a[d].data,...c}}return{encodedFilters:r,encodedFilterSubCounts:a,filterMapFlagsArray:(0,l.getEntries)(n).map(e=>{let[t,r]=e;return{_id:t,flags:r.flags,type:r.type}})}}encodeFilterMap(e,t){for(const r of(0,l.getKeys)(e)){const a=e[r];for(const e of a){const a=(0,l.getKeys)(e.filter).reduce((e,t)=>e+=p[t],0),i=`${e.sort}~${e.id}~${e.type}~${a}`;(t[r]||(t[r]=[])).push(i)}}}encodeFilterMapChunks(e,t){const r={},a={},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{}:t;for(const o of(0,l.getKeys)(e)){const s=e[o],[c]=o.split("_"),u=!!r[c+"_counts"],d=Object.keys(t[c+"_subCounts"]||{}).filter(e=>e.includes(o));let m="";a[o]||(a[o]=[]);const h={total:0};for(const e of s){if(i[c+"_subCounts"]||(i[c+"_subCounts"]={}),d.length||d.push(o),1===d.length)m=d[0];else{const t=`${o}_${e.sort}`,r=(0,n.sort)([...d,t]).desc(),a=r.findIndex(e=>e===o);-1!==a&&r.splice(a,1),r.unshift(o);for(const[e,a]of r.entries()){if(a===t&&r[e+1]===t){m=r[e];break}a===t&&(m=r[e-1])}}i[c+"_subCounts"][m]?i[c+"_subCounts"][m].total+=1:i[c+"_subCounts"][m]={total:1};const t=(0,l.getKeys)(e.filter).reduce((e,t)=>e+=p[t],0),s=`${e.sort}~${e.id}~${e.type}~${t}`;if((a[m]||(a[m]=[])).push(s),!u){h.total+=1,h[e.type]=h[e.type]?h[e.type]+1:1;for(const t of(0,l.getKeys)(e.filter))"starred"!==t&&"trashed"!==t&&(h[t]?h[t]+=1:h[t]=1)}r[c+"_counts"]||(r[c+"_counts"]=!0)}if(!u)if(i[c+"_counts"])for(const e of(0,l.getKeys)(h))i[c+"_counts"][e]?i[c+"_counts"][e]+=h[e]:i[c+"_counts"][e]=h[e];else i[c+"_counts"]=h}return{chunkedFilterMap:a,memoryCounts:i}}decodeFilters(e){const t={};for(const r of e)if(r)for(const e of r.data){const a=e.split("~"),i={};if(4!==a.length)continue;for(const e of(0,l.getKeys)(p))+a[3]&p[e]&&(i[e]=!0);const n={id:a[1],sort:isNaN(+a[0])?a[0]:+a[0],type:a[2],filter:i};(t[r._id]||(t[r._id]=[])).push(n)}return t}decodeFilterNumber(e,t){const r={};for(const a of(0,l.getKeys)(p))"trashed"!==a&&"starred"!==a&&e&p[a]&&(r[a]="positive"===t?1:-1);return r}getReferenceIds(e,t,r){const a={ids:[],count:{total:0}},i=this.getFilterStringSorter(),n=!t.collections.data.length&&!t.filter.data.length&&!t.mainType.data.length&&"desc"===t.order,o={};if(1===e.length){var s,c;if(e[0]){const{filterName:t}=this.decodeFilterNameAndSort(e[0]);for(const r of e[0].data)(o[r]||(o[r]=[])).push(t)}const u=n?(null===(s=e[0])||void 0===s?void 0:s.data)||[]:i((null===(c=e[0])||void 0===c?void 0:c.data)||[])[t.order]();0===r.size?this.handleFilterChecks(t,a,u,(0,l.getKeys)(o).length?o:void 0):this.handleFilterChecksDB(t,a,u,r,(0,l.getKeys)(o).length?o:void 0)}else{for(const t of e){if(!t)continue;const{filterName:e}=this.decodeFilterNameAndSort(t);for(const r of t.data)(o[r]||(o[r]=[])).push(e)}const s=n?(0,l.getKeys)(o):i((0,l.getKeys)(o))[t.order]();0===r.size?this.handleFilterChecks(t,a,s,o):this.handleFilterChecksDB(t,a,s,r,o)}return a}decodeFilterNameAndSort(e){const t=e._id.split("_");return{filterName:t[0],filterSort:t[1]}}calculatePubProperties(e,t){var r,a;const i={},n=[...e.labels||[],...e.folders||[]];for(const e of n)i[e]=!0;const o={};if(e.labels&&0!==(null===(r=e.labels)||void 0===r?void 0:r.length)?o.HAS_LABEL=!0:o.HAS_NO_LABEL=!0,e.folders&&0!==(null===(a=e.folders)||void 0===a?void 0:a.length)?o.HAS_FOLDER=!0:o.HAS_NO_FOLDER=!0,e.incomplete&&(o.IS_INCOMPLETE=!0),e.note&&!e.note.match(/^\s*$/)?o.HAS_NOTE=!0:o.HAS_NO_NOTE=!0,t&&t.length>0){let e=!1,r=!1;for(const a of t)a.article_pdf?r=!0:e=!0;e?o.HAS_ATTACHMENTS=!0:o.HAS_NO_ATTACHMENTS=!0,r?o.HAS_PDF=!0:o.HAS_NO_PDF=!0}else o.HAS_NO_PDF=!0,o.HAS_NO_ATTACHMENTS=!0;const{firstAuthor:s,lastAuthor:l}=this.generateFilterAuthor(e);return{id:e._id||"",sorting:{created:e.created,date:this.generateFilterDate(e),title:this.generateFilterTitle(e),journal:this.generateFilterJournal(e),firstAuthor:s,lastAuthor:l},type:this.generateFilterType(e),trashed:!!e.trashed,starred:!!e.starred,filter:o,collections:i}}generateFilterType(e){const t={Review:"ST_REVIEW"},r=e.pubtype&&o.FM.pubtypes.includes(e.pubtype)?e.pubtype:"PP_MISC";for(const e of o.FM.pubtypes)t[e]=e;const a={};return r in t&&(a[t[r]]=!0),e.kind&&e.kind in t&&(a[t[e.kind]]=!0),a}generateFilterTitle(e){let t="ZZZ";return e.title&&(t=e.title,t=o.ppString.interconvertString(t,{format:"html"}),t=t.replace(/<\/?\s*(i|b|sub|sup)\s*>/g,""),t=t.replace(/\\(textit|textbf|emph)/g,""),t=(0,s.normalizeAndStripOfNonAlphaNumericCharacters)(t)),t.toUpperCase()}generateFilterDate(e){const t=new Date(Date.UTC(-5e3,0,1));if(e.published){if(e.published.year&&e.published.year.toString().match(/^-?\d{1,4}$/g)){const r=parseInt(e.published.year);isNaN(r)||t.setUTCFullYear(r)}if(e.published.month){const r=parseInt(e.published.month);!isNaN(r)&&r>=0&&r<=12&&t.setUTCMonth(r-1)}if(e.published.day){const r=parseInt(e.published.day);!isNaN(r)&&r>=0&&r<=31&&t.setUTCDate(r)}}return t.setUTCFullYear(t.getUTCFullYear()+5e3),t.toISOString().replace(/T.+/,"").replace(/-/g,"")}generateFilterJournal(e){const t=["journal","publisher","conference","school","institution","howpublished","issuing_authority"];let r="ZZZ";for(const i of t)if("ZZZ"===r&&i in e){var a;const t=null===(a=e[i])||void 0===a?void 0:a.toString();if(""===t)continue;r="journal"===i?(t||"").replace(/\./g," ").replace(/\s+/g," ").trim():("ZZ"+t||"ZZ").replace(/\./g," ").replace(/\s+/g," ").trim(),r=r.replace(/~/g,""),r=(0,s.normalizeAndStripOfNonAlphaNumericCharacters)(r)}return r.toUpperCase()}generateFilterAuthor(e){let t="ZZZ",r="ZZZ",a=!1;const i=e=>{const t=[];return e&&("last"in e?(t.push(e.last),e.jr&&t.push(e.jr),e.initials&&t.push(e.initials)):e.collective&&t.push(e.collective)),t.join(" ").replace(/\s+/g," ").replace(/^\s/,"").replace(/\s$/,"").replace(/~/g,"")},n=["author","editor"];for(const o of n){const n=e[o];n&&Array.isArray(n)&&n.length>0&&!a&&(n[0].formatted?t=n[0].formatted:(t=i(n[0]),t=(0,s.normalizeAndStripOfNonAlphaNumericCharacters)(t)),n[n.length-1].formatted?r=n[n.length-1].formatted:(r=i(n[n.length-1]),r=(0,s.normalizeAndStripOfNonAlphaNumericCharacters)(r)),"ZZZ"!==t&&"ZZZ"!==r&&(a=!0))}return{firstAuthor:t.toUpperCase().replace(/~/g,""),lastAuthor:r.toUpperCase().replace(/~/g,"")}}generateFilterAttachments(e){const t=new Set;if((null==e?void 0:e.length)>0){let r=!1,a=!1;for(const t of e)t.article_pdf?a=!0:r=!0;r?t.add("HAS_ATTACHMENTS"):t.add("HAS_NO_ATTACHMENTS"),a?t.add("HAS_PDF"):t.add("HAS_NO_PDF")}else t.add("HAS_NO_PDF"),t.add("HAS_NO_ATTACHMENTS");return[...t]}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(418));var n=async(e,t,r)=>{let a;try{try{a=await fetch(`https://api.paperpile.com/api/attachments/${e}/file?type=latest`,{credentials:"include"})}catch(t){r.errorNoNotify("Downloading latest file failed, retrying via proxy",t);const i=await fetch(`https://api.paperpile.com/api/attachments/${e}/file?type=latest&redirect=false`,{credentials:"include"}),{url:n}=await i.json(),o=new URL(n);if(a=await fetch(`https://api.paperpile.com/api/s3${o.pathname}${o.search}`,{credentials:"include",redirect:"manual"}),!a.ok)throw t}}catch(e){return t({error:"offline"}),r.errorNoNotify("data utils","downloadAttachmentWithProgress fetch error: ",e),null}if(r.debug("data utils","downloadAttachmentWithProgress download status:",a.status),200!==a.status)return t({error:"restricted"}),null;if(a.body){const e=a.body.getReader();if(a.headers){const r=a.headers.get("Content-Length");if(r){const a=(0,i.default)(t,250),n=+r;let o=0;const s=[];for(;;){const{done:t,value:r}=await e.read();if(t)break;r&&(s.push(r),o+=r.length,a({current:o,total:n}))}return new Blob(s)}}}return null};t.default=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(94),o=a(r(1181)),s=a(r(1182)),l=r(439),c=a(r(1183));const{filterFlags:u}=n.FM,{preRenderPubData:d,getAffectedFieldsForPreRender:p}=n.ReferenceDL;t.default=class{constructor(e,t,r,a,n,m){var h=this;(0,i.default)(this,"loggerLabel","FilterMap_Model"),(0,i.default)(this,"updateQueue",new s.default),(0,i.default)(this,"exportFilterLog",async()=>this.filterMapLogs.export()),(0,i.default)(this,"importFilterLog",async e=>{await this.filterMapLogs.import(e)}),(0,i.default)(this,"nextFilterLogAction",(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];await h.filterMapLogs.next(e,{init:h.recreateFilterSizes.bind(h),insert:h.insertBulk.bind(h),update:h.updateBulk.bind(h),remove:h.removeBulk.bind(h),partialRecreate:h.partialRecreate.bind(h)})})),(0,i.default)(this,"previousFilterLogAction",(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];await h.filterMapLogs.previous(e,{init:h.recreateFilterSizes.bind(h),insert:h.insertBulk.bind(h),update:h.updateBulk.bind(h),remove:h.removeBulk.bind(h),partialRecreate:h.partialRecreate.bind(h)})})),(0,i.default)(this,"goToFilterLogAction",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;await h.filterMapLogs.goTo(e,{init:h.recreateFilterSizes.bind(h),insert:h.insertBulk.bind(h),update:h.updateBulk.bind(h),remove:h.removeBulk.bind(h),partialRecreate:h.partialRecreate.bind(h)})})),(0,i.default)(this,"addToQueue",(async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getTimestamp:r,setLocalSettings:a}=h.general,i=r(),n={lastAction:e.name||"unknown",libraryActionTimestamp:i},o={lastAction:e.name||"unknown",filterMapActionTimestamp:i},s=async()=>a(n),l=async()=>{await a({...o,...n})};return t?h.updateQueue.add({precedingAction:s,mainAction:e,postAction:l}):h.updateQueue.add({mainAction:e})})),(0,i.default)(this,"rebalanceData",async(e,t)=>{var r,a,i,n;const{type:o,totalServerChanges:s}=e,{getLocalSettings:c}=this.general,{filterSize:u}=this.filterMapUtils;if(!this.general.memoryCounts||"all"===o||s>=u)return await t(),!0;if(!this.general.memoryCounts)return!0;const d=(e,t)=>{const r=e.reduce((e,r)=>e+=(r-t)**2,0);return Math.sqrt(r/e.length)},p=((null===(r=this.general.memoryCounts)||void 0===r||null===(a=r.ALL_counts)||void 0===a?void 0:a.total)||0)+((null===(i=this.general.memoryCounts)||void 0===i||null===(n=i.TRASHED_counts)||void 0===n?void 0:n.total)||0);if(p!==await this.db.count("Library"))return await t(),!0;const{filterSizes:m}=await c();if(p&&!m)return await t(),!0;if(!p||!m)return!0;for(const e of(0,l.getKeys)(this.general.memoryCounts)){const[r]=e.split("_");if(!e.endsWith("_subCounts")||!m[r])continue;const a=this.general.memoryCounts[e],i=(0,l.getKeys)(a),n=i.length;if(n)if(6===n){if(a[i[0]].total>u)return await t(),!0}else{const e=this.general.memoryCounts[r+"_counts"].total,n=6*Math.ceil(e/u),o=m[r].chunks>6?m[r].chunks-6:m[r].chunks;if(Math.abs(n-o)>6)return await t(),!0;const s=Math.round(o/6),l=Math.floor(m[r].total/s),c=Array(s).fill(l);c[c.length-1]+=m[r].total-l*s;const p=d(c,u),h=.15*u,g=p>h?p:h,f=["byCreated","byDate","byJournal","byFirstAuthor","byLastAuthor","byTitle"];for(const e of f){const r=[];for(const t of i){if(!t.includes(e))continue;!t.split("_")[2]&&a[t].total<u/2||r.push(a[t].total)}if(!r.length)continue;if(d(r,u)>=2*g)return await t(),!0}}}return!1}),(0,i.default)(this,"recreateFilterSizes",async()=>{const{getMemoryCounts:e,setLocalSettings:t}=this.general;if(await e(),this.general.memoryCounts){const e={};for(const t of(0,l.getKeys)(this.general.memoryCounts)){if(!t.endsWith("_subCounts"))continue;const r=this.general.memoryCounts[t],a=t.split("_")[0],i=(0,l.getKeys)(r);e[a]={total:0,chunks:i.length};for(const t of i)t.includes("_byCreated")&&(e[a].total+=r[t].total)}await t({filterSizes:e})}}),(0,i.default)(this,"partialRecreate",async e=>{const{pubIds:t,mainFilter:r,filterIds:a,type:i,action:n}=e,{filterSize:s}=this.filterMapUtils,l=new o.default(this.db,this.general,s),c=new Set(t);if("FMLogTest"!==this.libraryId){const t={action:"partial-recreate",source:"user",data:e};await this.filterMapLogs.add("FM_action",t)}this.general.memoryCounts&&this.general.filterMapFlags.size||await this.general.getMemoryCounts();const u=this.general.memoryCounts||{},{mainFilterKeys:d,filterKeysToSearch:p,otherFilterKeys:m}=l.getFilterSearchKeys(u,a,r),{mainFilterMap:h,currentFilterMap:g,otherFilterMap:f}=await l.getFilterMapArrays(d,p,m),b=l.getPubsInCollectionMap(c,a,f,n),{dbFilterMap:y,filterFlagsToUpdate:v}=l.calculateDBFilterMap(c,h,b,a,i,n),_=l.getCountsForRemainingFilters(a,f);l.mergeNewAndCurrentFilterMap(c,y,g);const w=l.chunkAndSortFilterMap(t,a,y,n);await l.updateFilterSizes(t,a,w),await l.updateIDBFilterMap(a,[...w,..._],v,p)}),(0,i.default)(this,"recreate",(async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{getTimestamp:t,setLocalSettings:r}=h.general;h.logger.time(h.loggerLabel,"-recreateFilterMap"),h.recreateLock=new Promise(async(e,a)=>{try{var i;const a=await h.db.getAll("Library"),n=await h.db.getAll("Attachments"),o=await h.db.count("Library");await h.db.clearStore("FilterMap"),await h.db.clearStore("FilterMapLogs");const{filterMap:s,filterMapCounts:l}=h.filterMapUtils.createFilterMap(a,n),{encodedFilters:c,encodedFilterSubCounts:u,filterMapFlagsArray:d}=null===(i=h.filterMapUtils)||void 0===i?void 0:i.encodeFilters(s,o),p=[...c,...l,...u];if(!h.general.memoryCounts&&0===p.length)return void e();await h.db.putBulk("FilterMap",p),d.push({_id:"test",flags:0,type:"PP_ARTICLE"}),await h.db.putBulk("FilterMapFlags",d),"FMLogTest"!==h.libraryId&&await h.filterMapLogs.add("FM_init",p),await h.recreateFilterSizes();const m=t();await r({libraryActionTimestamp:m,filterMapActionTimestamp:m}),e()}catch(e){a(e)}}),await h.recreateLock,h.recreateLock=void 0,h.logger.timeEnd(h.loggerLabel,"-recreateFilterMap"),e&&(h.logger.time(h.loggerLabel,"-duplicatesUpdateBulk"),await h.general.updateDuplicates(),h.logger.timeEnd(h.loggerLabel,"-duplicatesUpdateBulk"))})),(0,i.default)(this,"checkSyncStatus",async()=>{const{getLocalSettings:e}=this.general,t=await e(),r=t.libraryActionTimestamp||0,a=t.filterMapActionTimestamp||0,i=t.lastAction||"unknown";return this.logger.info("FilterMap Status",`lastAction: ${i}, libraryActionTimestamp: ${r}, filterMapActionTimestamp: ${a}`),r===a||(await this.updateQueue.clear(),!1)}),(0,i.default)(this,"checkIntegrity",async()=>{const{getLocalSettings:e}=this.general,{filterSizes:t}=await e();if(!t)return!0;const r=(0,l.getKeys)(t);return await this.db.count("FilterMap")===2*r.length+r.reduce((e,r)=>e+t[r].chunks,0)}),(0,i.default)(this,"updateBulk",(async function(e,t,r,a){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const n=[],o=r._folders&&!Object.keys(r._folders).length,s=r._labels&&!Object.keys(r._labels).length,c=r._attachments&&!Object.keys(r._attachments).length,u=!Object.keys(r).length||o||s||c,m=new Map;if(0===e.length||e.length!==t.length||u)return;const{getMemoryCounts:g}=h.general;let f={};const b={action:"update",source:a&&a.length?"user":"sync"};try{if(!Object.keys(r).length)return;let o=[],s=[],c=[];const u={},y=(0,l.getKeys)(r),v=new Set,_={},w={},P={},S={},C={},A=["journal","publisher","conference","school","institution","howpublished","issuing_authority"],E=[...A,"title","published","author","editor"],T=["pubtype","kind"],k=["starred","trashed","note","incomplete","_folders","_labels","_attachments"],x=JSON.parse(JSON.stringify(r));delete x._folders,delete x._labels,delete x._attachments;const R=(0,l.getKeys)(x);h.general.memoryCounts||await g(),b.lastStep="[GET_MEMORY_COUNTS]";const I=(0,l.getFilterMapType)(h.general.memoryCounts||{}),L=["byCreated","byTitle","byFirstAuthor","byLastAuthor","byJournal","byDate"];b.lastStep="[GET_FILTERMAP_TYPE]";for(let[e,a]of t.entries()){const i=[];if(s.push(...(0,l.generateFilterCounts)(a)),r._folders)for(const e of r._folders[a._id].pull){if("batched"===I.filterType)for(const t of L)i.push(...(0,l.getFilterMapChunk)(`${e}_${t}`,`${e}_${t}_${h.convertFilterIdToFunction(t,a)[0]}`,I,!0,a));else i.push(...(0,l.generateFilters)(e,I));s.push(...(0,l.generateCountsPrefix)(e))}if(r._labels)for(const e of r._labels[a._id].pull){if("batched"===I.filterType)for(const t of L)i.push(...(0,l.getFilterMapChunk)(`${e}_${t}`,`${e}_${t}_${h.convertFilterIdToFunction(t,a)[0]}`,I,!0,a));else i.push(...(0,l.generateFilters)(e,I));s.push(...(0,l.generateCountsPrefix)(e))}let c=(0,l.getFilterNames)(a);"batched"===I.filterType?h.getBatchChunksByFilterInfo(i,c,L,a,I,!0):i.push(...(0,l.generateFilterKeys)(a,I)),o.push(...i),u[a._id]={oldPub:JSON.parse(JSON.stringify(a)),pub:{},encodedStrings:{},counts:{},subCounts:{},filterAddKeys:[],filterRemoveKeys:[]},n.push(u[a._id].oldPub),a={...a,...x};const m=p(x);a.__render={...a.__render,...d({...a,...x},void 0!==m&&m.length?m:void 0)},t[e]=a,u[a._id].pub=a,s.push(...(0,l.generateFilterCounts)(a)),c=(0,l.getFilterNames)(a),"batched"===I.filterType&&(R.includes("trashed")||R.includes("starred"))?h.getBatchChunksByFilterInfo(o,c,L,a,I,!0):h.getPubChunkUnbatched(a,o,c,L,I)}o=[...new Set(o)],s=[...new Set(s)],b.lastStep="[GET_FILTER_KEYS_&_UPDATE_RECORD_MAP]",await h.db.putBulk("Library",t,a),b.lastStep="[PUT_LIBRARY_BULK]";const D=await h.db.getBulk("FilterMap",[...o,...s]);b.lastStep="[GET_FILTERMAP_IDB]";for(const e of E)_[e]=0,"title"===e?w.title="generateFilterTitle":"published"===e?w.published="generateFilterDate":["author","editor"].includes(e)?w[e]="generateFilterAuthor":w[e]="generateFilterJournal";for(const e of T)_[e]=2;for(const e of k)_[e]=3;for(const e of y)"title"===e&&v.add("byTitle"),"published"===e&&v.add("byDate"),A.includes(e)&&v.add("byJournal"),["author","editor"].includes(e)&&(v.add("byFirstAuthor"),v.add("byLastAuthor"));b.lastStep="[SET_MAPPING_FIELDS]";const N={},O=h.filterMapUtils.getFilterStringSorter(),U={},M={};h.logger.time(h.loggerLabel,"- data-processing");const F=D.entries();for(const[t,a]of F){if(!a)continue;S[a._id]=t;const i=a._id.split("_"),n=i[0],o=i[1];if(Array.isArray(a.data)){for(const t of e){const e=a.data.findIndex(e=>"string"==typeof e&&e.includes(t+"~"));if(-1!==e){let i=a.data[e],l=[],c=0;if(N[i]?l=N[i]:(l=i.split("~"),N[i]=l),h.general.filterMapFlags.size>0){const e=m.get(t)||h.general.filterMapFlags.get(t);if(!e)continue;c=e.flags}else c=+l[3];await h.calculateFilterStringUpdates(r,y,u,t,o,l,c,_,w,I,s,D,m),i=u[t].encodedStrings[o].filter;for(const e of u[t].filterRemoveKeys)if(e.includes(`${n}_${o}`)){i="";break}a.data[e]=i}u[t].filterAddKeys=[...new Set(u[t].filterAddKeys)],u[t].filterRemoveKeys=[...new Set(u[t].filterRemoveKeys)]}a.data=a.data.filter(e=>!!e),v.has(o)&&O(a.data).desc()}}b.lastStep="[CALCULATE_FILTER_STRING_UPDATES]",h.logger.timeEnd(h.loggerLabel,"- data-processing"),f={updates:r,...f,...JSON.parse(JSON.stringify(u))};for(const t of e){const e=[...new Set(u[t].filterAddKeys.map(e=>e.split("_")[0]))],r=[...new Set(u[t].filterRemoveKeys.map(e=>e.split("_")[0]))];for(const t of e)U[t]=U[t]?U[t]+1:1;for(const e of r)M[e]=M[e]?M[e]+1:1;for(const e of(0,l.getKeys)(u[t].counts))if(C[e+"_counts"])for(const r of(0,l.getKeys)(u[t].counts[e]))C[e+"_counts"][r]?C[e+"_counts"][r]+=u[t].counts[e][r]:C[e+"_counts"][r]=u[t].counts[e][r];else C[e+"_counts"]={...u[t].counts[e]};for(const e of(0,l.getKeys)(u[t].subCounts)){if(!h.general.memoryCounts)break;c.push(e+"_subCounts");const r=u[t].subCounts[e];for(const t of(0,l.getKeys)(r))h.general.memoryCounts[e+"_subCounts"]||(h.general.memoryCounts[e+"_subCounts"]={}),h.general.memoryCounts[e+"_subCounts"][t]?(h.general.memoryCounts[e+"_subCounts"][t].total+=r[t].total,h.general.memoryCounts[e+"_subCounts"][t].total<0&&(h.general.memoryCounts[e+"_subCounts"][t].total=0),3===t.split("_").length&&h.general.memoryCounts[e+"_subCounts"][t].total<=0&&delete h.general.memoryCounts[e+"_subCounts"][t]):h.general.memoryCounts[e+"_subCounts"][t]=r[t]}}b.lastStep="[CALCULATE_COUNTS_&_SUBCOUNTS_MAP]",c=[...new Set(c)];const j=(0,l.getKeys)(u);for(const e of j)for(const t of u[e].filterAddKeys){const r=t.split("_")[1],a=u[e].encodedStrings[r].filter;(P[t]||(P[t]=[])).push(a)}const B=[...(0,l.getKeys)(P),...(0,l.getKeys)(C)];b.lastStep="[CALCULATE_FILTER_ADD_KEYS_MAP]";const $=[],z={},H=[];for(const e of B){const t=S[e];if(e.endsWith("counts")){const r=D[t];if(r)for(const t of(0,l.getKeys)(C[e]))r.data[t]?r.data[t]+=C[e][t]:r.data[t]=C[e][t],"total"!==t&&(!r.data[t]||r.data[t]<=0)&&delete r.data[t],h.general.memoryCounts&&h.general.memoryCounts[e]&&(h.general.memoryCounts[e][t]?h.general.memoryCounts[e][t]+=C[e][t]:h.general.memoryCounts[e][t]=C[e][t],"total"!==t&&(!h.general.memoryCounts[e][t]||h.general.memoryCounts[e][t]<=0)&&delete h.general.memoryCounts[e][t]);if(h.general.memoryCounts&&!h.general.memoryCounts[e]){for(const t of(0,l.getKeys)(C[e]))C[e][t]<0&&delete C[e][t];h.general.memoryCounts[e]={...C[e]}}r&&delete C[e]}else if(void 0!==t)D[t].data.push(...P[e]),O(D[t].data).desc();else{const t=e.split("_")[0],r=D.find(e=>(null==e?void 0:e._id)===t+"_subCounts");null!=r&&r.data[e]?($.push(e),(z[e]||(z[e]=[])).push(...P[e])):(D.push({_id:e,data:P[e]}),O(D[D.length-1].data).desc(),H.push(e))}}b.lastStep="[UPDATE_MEMORY_COUNTS_&_FILTERMAP_IDB]";const W=await h.db.getBulk("FilterMap",$);b.lastStep="[GET_SEARCH_FILTERS]";for(const e of W){if(!e||!Array.isArray(null==e?void 0:e.data))continue;const t=$.findIndex(t=>t===e._id);-1!==t&&$.splice(t,1),D.push({_id:e._id,data:[...e.data,...z[e._id]]}),O(D[D.length-1].data).desc()}b.lastStep="[UPDATE_FILTERMAP_IDB_1]";for(const e of $)D.push({_id:e,data:z[e]}),O(D[D.length-1].data).desc();b.lastStep="[UPDATE_FILTERMAP_IDB_2]",H.push(...$),b.lastStep="[UPDATE_NON_EXIXTING_FILTERS]";for(const e of(0,l.getKeys)(C))D.push({_id:e,data:C[e]});b.lastStep="[UPDATE_FILTERMAP_IDB_3]";for(const e of c){if(!h.general.memoryCounts)continue;const t=S[e];void 0===t?D.push({_id:e,data:h.general.memoryCounts[e]}):D[t].data=h.general.memoryCounts[e]}b.lastStep="[UPDATE_FILTERMAP_IDB_4]";const{filterType:V}=(0,l.getFilterMapType)(h.general.memoryCounts||{});let G=[];const q=[],J={};for(const e of D)e&&Array.isArray(e.data)&&(J[e._id]=e.data.length);for(const e of D)e&&(!Array.isArray(e.data)||Array.isArray(e.data)&&e.data.length||"batched"===V&&!e._id.split("_")[2]?q.push(e):G.push(e._id));if(G=[...new Set([...G,...h.getFilterKeysToRemoveWhenEmpty(q)])],b.lastStep="[GET_FULL_EMPTY_FILTERS]",f.emptyFilters=G,f.fullFilters=q,b.data=f,delete b.lastStep,"FMLogTest"!==h.libraryId&&await h.filterMapLogs.add("FM_action",b),h.general.filterMapFlags.size>0){const e=Array.from(m.values());for(const t of e)h.general.filterMapFlags.set(t._id,t);await h.db.putBulk("FilterMapFlags",e)}if(h.logger.time(h.loggerLabel,"DBPut"),await h.db.putBulk("FilterMap",q),await h.db.removeBulk("FilterMap",G),h.logger.timeEnd(h.loggerLabel,"DBPut"),i)for(const e of t)-1===h.general.duplicateUpdatePubs.findIndex(t=>t._id===e._id)&&h.general.duplicateUpdatePubs.push(e);await h.updateFilterSizes(U,M,H,G)}catch(a){const i={ids:e,updates:r,pubs:n};if(n.length!==t.length)for(let e=n.length;e<t.length;e+=1)t[e]&&n.push(t[e]);const o={input:i,action:b.action,source:b.source,data:f,lastStep:b.lastStep};throw await h.saveFilterLogError(o,a),a}})),(0,i.default)(this,"removeBulk",async(e,t)=>{const{getMemoryCounts:r}=this.general,a={},i={action:"remove",source:t?"user":"sync"};try{const t=await this.db.getBulk("Library",e);i.lastStep="[GET_LIBRARY_BULK]";const n=await this.db.getWhere("Attachments","pub_id",e);i.lastStep="[GET_ATTACHMENTS_BULK]";const{filterMapCounts:o}=this.filterMapUtils.createFilterMap(t,n);if(i.lastStep="[CREATE_FILTERMAP_(COUNTS)]",a.pubs=t.filter(e=>!!e),a.attachments=n,this.general.memoryCounts||await r(),i.lastStep="[GET_MEMORY_COUNTS]",!this.general.memoryCounts)return;const s=(0,l.getFilterMapType)(this.general.memoryCounts||{});i.lastStep="[GET_FILTERMAO_TYPE]";const c=["byCreated","byTitle","byFirstAuthor","byLastAuthor","byJournal","byDate"];let u=[],d=[];const p={},m={};for(const e of t){if(!e)continue;u.push(...(0,l.generateFilterCounts)(e));const t=(0,l.getFilterNames)(e);"batched"===s.filterType?this.getBatchChunksByFilterInfo(d,t,c,e,s,!0):d.push(...(0,l.generateFilterKeys)(e,s))}i.lastStep="[CALCULATE_FILTER_KEYS]";for(const e of o)m[e._id]=e.data;i.lastStep="[CALCULATE_FILTER_COUNT_KEYS]",d=[...new Set(d)],u=[...new Set(u)],a.filterCountKeys=u,a.filterKeys=d;const h=await this.db.getBulk("FilterMap",[...d,...u]);i.lastStep="[GET_FILTERMAP_BULK]";for(const e of t){if(!e)continue;const t=(0,l.getFilterNames)(e);for(const r of t)if(p[r]||(p[r]={}),"batched"===s.filterType)for(const t of c){const a=(0,l.getFilterMapChunk)(`${r}_${t}`,`${r}_${t}_${this.convertFilterIdToFunction(t,e)[0]}`,s,!0,e,h);for(const e of a)p[r][e]=p[r][e]?p[r][e]+1:1}else{const e=(0,l.generateFilters)(r,s);for(const t of e)p[r][t]=p[r][t]?p[r][t]+1:1}}i.lastStep="[GET_FILTERMAP_CHUNKS]";const g=[],{filterType:f}=s,b={};for(const t of h)if(t){if(Array.isArray(t.data))for(const r of e){const e=t.data.findIndex(e=>e.includes(r+"~"));-1!==e&&t.data.splice(e,1)}else if("total"in t.data){if(!m[t._id])continue;for(const e of(0,l.getKeys)(m[t._id]))t.data[e]&&(t.data[e]-=m[t._id][e],"total"===e||t.data[e]||delete t.data[e]),this.general.memoryCounts&&this.general.memoryCounts[t._id]&&("total"===e||this.general.memoryCounts[t._id][e]?this.general.memoryCounts[t._id][e]-=m[t._id][e]:delete this.general.memoryCounts[t._id][e])}else{const e=t._id.split("_")[0];if(p[e]){const r=(0,l.getKeys)(p[e]);for(const a of r){if(b[e]||(b[e]=p[e][a]),t.data[a].total-=p[e][a],t.data[a].total<0&&(t.data[a].total=0),!this.general.memoryCounts||!this.general.memoryCounts[t._id]||!this.general.memoryCounts[t._id][a])continue;this.general.memoryCounts[t._id][a].total-=p[e][a],this.general.memoryCounts[t._id][a].total<0&&(this.general.memoryCounts[t._id][a].total=0);const r=a.split("_"),i=this.general.memoryCounts[t._id][a].total,n="batched"===f&&3===r.length;!i&&n&&delete this.general.memoryCounts[t._id][a]}}}g.push(t)}i.lastStep="[UPDATE_MEMORY_COUNTS_&_ADD_NEW_DB_FILTERS]",a.counts=m,a.subCounts=p;let y=[];const v=[];for(const e of g)e&&(!Array.isArray(e.data)||Array.isArray(e.data)&&e.data.length||"batched"===f&&!e._id.split("_")[2]?v.push(e):y.push(e._id));if(y=[...new Set([...y,...this.getFilterKeysToRemoveWhenEmpty(v)])],i.lastStep="[GET_FULL_EMPTY_FILTERS]",a.emptyFilters=y,a.fullFilters=v,await this.db.putBulk("FilterMap",v),await this.db.removeBulk("FilterMap",y),await this.updateFilterSizes({},b,[],y),t&&await this.general.removeDuplicates(t.filter(e=>!!e)),i.data=a,delete i.lastStep,this.general.filterMapFlags.size>0){for(const t of e)this.general.filterMapFlags.delete(t);await this.db.removeBulk("FilterMapFlags",e)}"FMLogTest"!==this.libraryId&&await this.filterMapLogs.add("FM_action",i)}catch(t){const r={input:{ids:e},action:i.action,source:i.source,data:a,lastStep:i.lastStep};throw await this.saveFilterLogError(r,t),t}}),(0,i.default)(this,"insertBulk",async(e,t)=>{const r={pubs:e},a={action:"insert",source:t?"user":"sync"};try{const{getMemoryCounts:t}=this.general;this.general.memoryCounts||await t(),a.lastStep="[GET_MEMORY_COUNTS]";const{filterMap:i}=this.filterMapUtils.createFilterMap(e,[]);a.lastStep="[CREATE_PARTIAL_FILTERMAP]";const n=this.filterMapUtils.getFilterStringSorter();a.lastStep="[GET_FILTER_STRING_SORTER]";const{chunkedFilterMap:o,memoryCounts:s}=this.filterMapUtils.encodeFilterMapChunks(i,this.general.memoryCounts||{});a.lastStep="[ENCODE_FILTERMAP_CHUNKS]",this.general.memoryCounts||(this.general.memoryCounts=s),r.chunkedFilterMap=JSON.parse(JSON.stringify(o));const c=[],d=(0,l.getKeys)(o),p=await this.db.getBulk("FilterMap",d);a.lastStep="[GET_FILTERMAP_BULK]",r.filterKeys=d;const m=[],h=Object.entries(o).filter(e=>{let[t]=e;return t.includes("byCreated")}).reduce((e,t)=>{let[r,a]=t;const i=r.split("_")[0];return e[i]||(e[i]=0),e[i]+=a.length,e},{});a.lastStep="[CALCULATE_FILTER_ADD_KEY_COUNTS]";for(const e of p)e&&Array.isArray(e.data)&&(c.push({_id:e._id,data:n([...e.data,...o[e._id]]).desc()}),delete o[e._id]);a.lastStep="[ADD_NEW_DB_FILTERS]";for(const e of(0,l.getKeys)(o))m.push(e),c.push({_id:e,data:n(o[e]).desc()});if(a.lastStep="[ADD_NEW_DB_FILTERS_&_ADD_NON_EXISTING_FILTERS]",r.nonExistingFilters=m,this.general.memoryCounts)for(const e of(0,l.getKeys)(this.general.memoryCounts))c.push({_id:e,data:this.general.memoryCounts[e]});a.lastStep="[ADD_NEW_DB_FILTERS_2]",r.memoryCounts=this.general.memoryCounts,r.fullFilters=c,a.data=r,await this.db.putBulk("FilterMap",c),a.lastStep="[PUT_FILTERMAP_BULK]";for(const t of e)-1===this.general.duplicateUpdatePubs.findIndex(e=>e._id===t._id)&&this.general.duplicateUpdatePubs.push(t);if(await this.updateFilterSizes(h,{},m,[]),delete a.lastStep,"FMLogTest"!==this.libraryId&&await this.filterMapLogs.add("FM_action",a),this.general.filterMapFlags.size>0){const e=new Map,t=(0,l.getKeys)(i).filter(e=>e.includes("byCreated")),r=e=>(0,l.getKeys)(e).reduce((e,t)=>e+=u[t],0);for(const a of t)for(const t of i[a]){if(e.has(t.id))continue;const a={_id:t.id,flags:r(t.filter),type:t.type};e.set(t.id,a),this.general.filterMapFlags.set(t.id,a)}const a=Array.from(e.values());await this.db.putBulk("FilterMapFlags",a)}"user"===a.source&&await this.general.updateDuplicates()}catch(t){const i={input:{pubs:e},action:a.action,source:a.source,data:r,lastStep:a.lastStep};throw await this.saveFilterLogError(i,t),t}}),(0,i.default)(this,"updateFilterSizes",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const{getLocalSettings:i,setLocalSettings:n}=h.general,{filterSizes:o}=await i();if(o){const i=[...new Set([...(0,l.getKeys)(e),...(0,l.getKeys)(t),...(0,l.getKeys)(o)])];for(const n of i){const i=e[n],s=t[n];if(o[n]||(o[n]={total:0,chunks:0}),o[n].total+=(i||0)-(s||0),o[n].total<=0)delete o[n];else{const e=r.filter(e=>e.startsWith(n)).length,t=a.filter(e=>e.startsWith(n)).length;o[n].chunks+=e-t}}await n({filterSizes:o})}else await h.recreate()})),(0,i.default)(this,"calculateFilterStringUpdates",async(e,t,r,a,i,n,o,s,c,d,p,m,h)=>{const{isMainPdf:g}=this.general,f={generateFilterDate:"byDate",generateFilterTitle:"byTitle",generateFilterJournal:"byJournal",generateFilterAuthor:""};let b=(0,l.getKeys)(r[a].encodedStrings),y=o;if(b.length){if(!r[a].encodedStrings[i]){const e=r[a].encodedStrings[b[0]].filter.split("~");r[a].encodedStrings[i]={filter:`${n[0]}~${e[1]}~${e[2]}~${e[3]}`}}}else{const w=[...new Set([...t.indexOf("trashed")>-1?["trashed"]:[],...t.indexOf("starred")>-1?["starred"]:[],...t])];for(const t of w){if(0===s[t]&&c[t]){const e=this.filterMapUtils[c[t]](r[a].pub);if("object"==typeof e&&"firstAuthor"in e)r[a].encodedStrings.byFirstAuthor={filter:e.firstAuthor},r[a].encodedStrings.byLastAuthor={filter:e.lastAuthor};else if("generateFilterAuthor"!==c[t]){const i=f[c[t]];r[a].encodedStrings[i]={filter:""+e}}if("batched"===d.filterType){const i=[],n=(0,l.getFilterNames)(r[a].pub);for(const o of n){let n=!0;const s=[],u=this.filterMapUtils[c[t]](r[a].oldPub),p="generateFilterAuthor"!==c[t]?[f[c[t]]]:["byFirstAuthor","byLastAuthor"],h="object"==typeof u&&"firstAuthor"in u?[u.firstAuthor,u.lastAuthor]:[""+u];for(const[e,t]of h.entries()){if("byFirstAuthor"===o&&0!==e)continue;if("byLastAuthor"===o&&1!==e)continue;const i=(0,l.getFilterMapChunk)(`${o}_${p[e]}`,`${o}_${p[e]}_${t}`,d,!1,r[a].oldPub,m);s.push(...i)}const g="object"==typeof e&&"firstAuthor"in e?[e.firstAuthor,e.lastAuthor]:[""+e];for(const[e,t]of g.entries()){if("byFirstAuthor"===o&&0!==e)continue;if("byLastAuthor"===o&&1!==e)continue;const c=(0,l.getFilterMapChunk)(`${o}_${p[e]}`,`${o}_${p[e]}_${t}`,d,!1,r[a].pub);for(const e of c)s.includes(e)?(n=!1,i.push(e)):n=!0;if(n){r[a].filterAddKeys.push(...c),r[a].subCounts[o]||(r[a].subCounts[o]={});for(const e of c)r[a].subCounts[o][e]={total:1}}}if(n){r[a].subCounts[o]||(r[a].subCounts[o]={});for(const e of s)i.includes(e)||(r[a].filterRemoveKeys.push(e),r[a].subCounts[o][e]={total:-1})}}}}r[a].encodedStrings[i]||(r[a].encodedStrings[i]={filter:n[0]}),b=(0,l.getKeys)(r[a].encodedStrings);for(const i of b){const c=r[a].encodedStrings[i].filter.split("~");if(c[1]||(r[a].encodedStrings[i].filter+="~"+n[1]),2===s[t]){const t=(0,l.getKeys)(this.filterMapUtils.generateFilterType(r[a].oldPub)),n=(0,l.getKeys)(this.filterMapUtils.generateFilterType(r[a].pub)),s=t.find(e=>"ST_REVIEW"===e)||t[0],u=n.find(e=>"ST_REVIEW"===e)||n[0];if(s!==u){const t=(0,l.generateFilterCounts)(r[a].pub),i=h.get(a);i?h.set(a,{...i,type:u}):h.set(a,{_id:a,flags:o,type:u});for(const i of t){if(i.endsWith("subCounts"))continue;let t=0;const n=i.split("_")[0],o={...r[a].counts[n]};"ALL"===n&&e.trashed&&(t=1===e.trashed?-1:1),"STARRED"===n&&e.trashed&&(t=1===e.trashed?-1:1),"TRASHED"===n&&e.trashed&&(t=1===e.trashed?1:-1),"STARRED"===n&&e.starred&&(t=1===e.starred?1:-1),r[a].counts[n]={...o||{},[s]:-1,[u]:1,total:t},"ST_REVIEW"===s&&(r[a].counts[n].PP_ARTICLE="PP_ARTICLE"===u?0:-1),"ST_REVIEW"===u&&(r[a].counts[n].PP_ARTICLE="PP_ARTICLE"===s?0:1)}}c[2]?r[a].encodedStrings[i].filter=`${c[0]}~${c[1]}~${u}~${c[3]}`:r[a].encodedStrings[i].filter+="~"+u}else c[2]||(r[a].encodedStrings[i].filter+="~"+n[2])}if(3===s[t]){if("_folders"===t||"_labels"===t){const i="_folders"===t?"folders":"labels";r[a].oldPub[i]=e[t][a].original}const i=this.filterMapUtils.decodeFilterNumber(o,"positive"),s=this.filterMapUtils.decodeFilterNumber(o,"negative"),c=[],h=[],{filterType:f}=d,w=[...new Set([...(0,l.getFilterNames)(r[a].oldPub),...(0,l.getFilterNames)(r[a].pub)])],P=["byCreated","byTitle","byFirstAuthor","byLastAuthor","byJournal","byDate"];let S=[];if("batched"===f&&["starred","trashed","_folders","_labels"].includes(t))for(const e of w)for(const t of P)c.push(...this.getPubChunkBatched(r[a].oldPub,e,t,d,!1,m)),h.push(...this.getPubChunkBatched(r[a].pub,e,t,d,!1,m));if("unbatched"===f&&["starred","trashed","_folders","_labels"].includes(t)&&(this.getPubChunkUnbatched(r[a].oldPub,c,w,P,d),this.getPubChunkUnbatched(r[a].pub,h,w,P,d)),S=(0,l.arrayDifference)(c,h),["starred","trashed"].includes(t)&&S.length>0&&(S=h),S.length)if("_folders"!==t&&"_labels"!==t){for(const e of c){const i=e.split("_")[0];"starred"===t&&"ALL"===i||(r[a].subCounts[i]||(r[a].subCounts[i]={}),r[a].filterRemoveKeys.push(e),r[a].subCounts[i][e]={total:-1})}for(const e of h){const i=e.split("_")[0];"starred"===t&&"ALL"===i||(r[a].subCounts[i]||(r[a].subCounts[i]={}),r[a].filterAddKeys.push(e),r[a].subCounts[i][e]={total:1})}}else for(const i of S){const n=i.split("_")[0],o=e[t][a].pull.length?-1:1;r[a].subCounts[n]||(r[a].subCounts[n]={}),r[a].subCounts[n][i]={total:o},-1===o?r[a].filterRemoveKeys.push(i):r[a].filterAddKeys.push(i)}if(["starred","trashed"].includes(t)){if(S.length)for(const e of b){const n=r[a].encodedStrings[e].filter.split("~"),l=+u[t],c=o&l?"remove":"add",d=o&l?o-l:o+l;if(y=d,n[3]){const t=`${n[0]}~${n[1]}~${n[2]}~${d}`;r[a].encodedStrings[e].filter=t}else r[a].encodedStrings[e].filter+="~"+d;const p={[n[2]]:1},m={[n[2]]:-1};if("ST_REVIEW"===n[2]&&(p.PP_ARTICLE=1,m.PP_ARTICLE=-1),"trashed"===t){const e=[...r[a].pub.folders||[],...r[a].pub.labels||[]];if("add"===c){S.length&&(r[a].counts.TRASHED||(r[a].counts.TRASHED={total:1,...p,...i}),r[a].counts.ALL||(r[a].counts.ALL={total:-1,...m,...s}),!r[a].counts.STARRED&&r[a].pub.starred&&(r[a].counts.STARRED={total:-1,...m,...s}));for(const t of e)S.length&&(r[a].counts[t]||(r[a].counts[t]={total:-1,...m,...s}))}else{S.length&&(r[a].counts.TRASHED||(r[a].counts.TRASHED={total:-1,...m,...s}),r[a].counts.ALL||(r[a].counts.ALL={total:1,...p,...i}),!r[a].counts.STARRED&&r[a].pub.starred&&(r[a].counts.STARRED={total:1,...p,...i}));for(const t of e)S.length&&(r[a].counts[t]||(r[a].counts[t]={total:1,...p,...i}))}}"starred"===t&&("add"===c?(r[a].filterAddKeys.push(...S.filter(e=>e.startsWith("STARRED"))),r[a].counts.STARRED={total:1,...p,...i}):(r[a].filterRemoveKeys.push(...S.filter(e=>e.startsWith("STARRED"))),r[a].counts.STARRED={total:-1,...m,...s}))}}else if("_attachments"===t){const i=e[t];let n=o;if(i){const e=(0,l.generateFilterCounts)(r[a].pub),t={total:0};for(const e of i[a].data){const r=g(e),{pdfCounts:o,attachmentCounts:s,shouldDecrementAttachmentCounts:l}=i[a];"remove"===i[a].action&&((!r&&s>0||r&&s>0&&o>1)&&(i[a].attachmentCounts-=1),r&&o>0&&(i[a].pdfCounts-=1));const c=this.filterMapUtils.generateFilterAttachments([e]);for(const e of c){const r=u[e],o=n&r;"add"===i[a].action?(l&&s>0&&(n&u.HAS_NO_ATTACHMENTS||(n+=u.HAS_NO_ATTACHMENTS,t.HAS_NO_ATTACHMENTS=1),n&u.HAS_ATTACHMENTS&&(n-=u.HAS_ATTACHMENTS,t.HAS_ATTACHMENTS=-1)),n&u.HAS_NO_PDF&&(c.includes("HAS_NO_PDF")||(n-=u.HAS_NO_PDF,t.HAS_NO_PDF=-1)),n&u.HAS_NO_ATTACHMENTS&&(c.includes("HAS_NO_ATTACHMENTS")||(n-=u.HAS_NO_ATTACHMENTS,t.HAS_NO_ATTACHMENTS=-1)),o||"HAS_NO_PDF"===e||"HAS_NO_ATTACHMENTS"===e||(n+=r,t[e]=1)):(n&u.HAS_NO_PDF||i[a].pdfCounts||(n+=u.HAS_NO_PDF,t.HAS_NO_PDF=1),n&u.HAS_NO_ATTACHMENTS||i[a].attachmentCounts||(n+=u.HAS_NO_ATTACHMENTS,t.HAS_NO_ATTACHMENTS=1),o&&"HAS_NO_PDF"!==e&&"HAS_NO_ATTACHMENTS"!==e&&(n-=r,t[e]=-1))}}for(const i of e)r[a].counts[i.split("_")[0]]=t}for(const e of b){const t=r[a].encodedStrings[e].filter.split("~");t[3]?r[a].encodedStrings[e].filter=`${t[0]}~${t[1]}~${t[2]}~${n}`:r[a].encodedStrings[e].filter+="~"+n}y=n}else if("_folders"===t||"_labels"===t){var v;const l=e[t],c=l?Object.keys(l):[],d="_folders"===t?"folders":"labels",m=[...r[a].oldPub.folders||[],...r[a].oldPub.labels||[],"ALL","TRASHED","STARRED"].filter(e=>!c.includes(e));let h,g=!1,f=o;if(l&&l[a].push.length&&null!==(v=r[a].pub[d])&&void 0!==v&&v.length){const e="_folders"===t?"HAS_NO_FOLDER":"HAS_NO_LABEL",s=u["_folders"===t?"HAS_FOLDER":"HAS_LABEL"];if(!(o&s)){f+=s,f&u[e]&&(f-=u[e]),h=this.filterMapUtils.decodeFilterNumber(f,"positive");for(const e of m)("TRASHED"!==e||r[a].pub.trashed)&&("STARRED"!==e||r[a].pub.starred)&&("TRASHED"!==e&&r[a].pub.trashed||(p.includes(e+"_counts")?r[a].counts[e]={total:0}:(r[a].counts[e]={...h,[n[2]]:1,total:1},"ST_REVIEW"===n[2]&&(r[a].counts[e].PP_ARTICLE=1)),p.includes(e+"_counts")&&(r[a].counts[e]={...r[a].counts[e],..."_folders"===t?{HAS_FOLDER:1,HAS_NO_FOLDER:-1}:{HAS_LABEL:1,HAS_NO_LABEL:-1}})))}for(const e of b){const t=r[a].encodedStrings[e].filter.split("~"),n={[t[2]]:1};if("ST_REVIEW"===t[2]&&(n.PP_ARTICLE=1),t[3]?r[a].encodedStrings[e].filter=`${t[0]}~${t[1]}~${t[2]}~${f}`:r[a].encodedStrings[e].filter+="~"+f,!r[a].pub.trashed)for(const e of l[a].push)l[a].push.includes(e)&&(r[a].counts[e]={total:1,...n,...h||i})}g=!0}if(l&&l[a].pull.length){var _;if(null===(_=r[a].pub[d])||void 0===_||!_.length){const e="_folders"===t?"HAS_FOLDER":"HAS_LABEL",i=u["_folders"===t?"HAS_NO_FOLDER":"HAS_NO_LABEL"];if(!(o&i)){f+=i,f&u[e]&&(f-=u[e]);for(const e of m)("TRASHED"!==e||r[a].pub.trashed)&&("STARRED"!==e||r[a].pub.starred)&&("TRASHED"!==e&&r[a].pub.trashed||(r[a].counts[e]={total:0,..."_folders"===t?{HAS_FOLDER:-1,HAS_NO_FOLDER:1}:{HAS_LABEL:-1,HAS_NO_LABEL:1}}))}}for(const e of b){const t=r[a].encodedStrings[e].filter.split("~"),i={[t[2]]:-1};if("ST_REVIEW"===t[2]&&(i.PP_ARTICLE=-1),t[3]?r[a].encodedStrings[e].filter=`${t[0]}~${t[1]}~${t[2]}~${f}`:r[a].encodedStrings[e].filter+="~"+f,!r[a].pub.trashed)for(const e of l[a].pull)l[a].pull.includes(e)&&(r[a].counts[e]={total:-1,...i,...s})}g=!0}if(!g)for(const e of b){r[a].encodedStrings[e].filter.split("~")[3]||(r[a].encodedStrings[e].filter+="~"+n[3])}y=f}else{const e={note:r[a].oldPub.note?"HAS_NO_NOTE":"HAS_NOTE",incomplete:"IS_INCOMPLETE"}[t],i=+u[e],n=(0,l.generateFilterCounts)(r[a].pub),s={total:0};let c=o;if("note"===t){const t=o&i,n=i===u.HAS_NOTE?u.HAS_NO_NOTE:u.HAS_NOTE,l="HAS_NOTE"===e?"HAS_NO_NOTE":"HAS_NOTE",d="HAS_NOTE"===e&&!r[a].oldPub.note&&!!r[a].pub.note||"HAS_NO_NOTE"===e&&!!r[a].oldPub.note&&!r[a].pub.note;!t&&d&&(c-=n,c+=i,s[l]=-1,s[e]=1)}else!r[a].pub[t]&&o&i&&(c-=i,s[e]=-1),!r[a].pub[t]||o&i||(c+=i,s[e]=1);for(const e of b){const t=r[a].encodedStrings[e].filter.split("~");t[3]?r[a].encodedStrings[e].filter=`${t[0]}~${t[1]}~${t[2]}~${c}`:r[a].encodedStrings[e].filter+="~"+c}for(const e of n)r[a].counts[e.split("_")[0]]=s;y=c}for(const e of b){r[a].encodedStrings[e].filter.split("~")[3]||(r[a].encodedStrings[e].filter+="~"+n[3])}}else for(const e of b){r[a].encodedStrings[e].filter.split("~")[3]||(r[a].encodedStrings[e].filter+="~"+n[3])}}}if(y!==o){const e=h.get(a);if(e)h.set(a,{...e,flags:y});else{const e=(0,l.getKeys)(this.filterMapUtils.generateFilterType(r[a].pub));h.set(a,{_id:a,flags:y,type:e[0]})}}}),(0,i.default)(this,"saveFilterLogError",async(e,t)=>{if("FMLogTest"!==this.libraryId){const{input:r,action:a,source:i,lastStep:n,data:o}=e;await this.filterMapLogs.add("FM_error",{input:r,action:a,source:i,message:t.message,stack:t.stack,data:o,lastStep:n})}const r=await this.db.exportFilterLogsData();if(r){const e={libraryId:this.libraryId,type:"filter-map-logs",data:{url:null,blob:r}};this.emitter.emit("filterMapLogs",e),await this.db.clearStore("FilterMapLogs")}}),(0,i.default)(this,"getFilterKeysToRemoveWhenEmpty",e=>{const{memoryCounts:t}=this.general;if(!t)return[];const r=[];for(const i of(0,l.getKeys)(t)){var a;if(!t[i]||i.endsWith("subCounts"))continue;const n=e.find(e=>e._id===i),o=n&&"data"in n&&(null===(a=n.data)||void 0===a?void 0:a.total)||0;if(void 0!==t[i].total&&t[i].total+o===0){const e=i.split("_")[0];e&&(r.push(...(0,l.generateFilters)(e,{filterKeys:[],filterType:"unbatched"})),r.push(...(0,l.generateCountsPrefix)(e)))}}return r}),(0,i.default)(this,"convertFilterIdToFunction",(e,t)=>{const r=()=>{const{firstAuthor:e,lastAuthor:r}=this.filterMapUtils.generateFilterAuthor(t);return[e,r]};return{byCreated:()=>[t.created],byTitle:()=>[this.filterMapUtils.generateFilterTitle(t)],byFirstAuthor:()=>[r()[0]],byLastAuthor:()=>[r()[1]],byJournal:()=>[this.filterMapUtils.generateFilterJournal(t)],byDate:()=>[this.filterMapUtils.generateFilterDate(t)]}[e]()}),(0,i.default)(this,"getBatchChunksByFilterInfo",(function(e,t,r,a,i){let n=arguments.length>5&&void 0!==arguments[5]&&arguments[5];for(const o of t)for(const t of r)e.push(...h.getPubChunkBatched(a,o,t,i,n))})),(0,i.default)(this,"getPubChunkBatched",(function(e,t,r,a){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=arguments.length>5?arguments[5]:void 0;const o=[],s=h.convertFilterIdToFunction(r,e);for(const d of s){if(!d)continue;if("TRASHED"!==t&&e.trashed)continue;if("TRASHED"===t&&!e.trashed)continue;if("STARRED"===t&&!e.starred)continue;var c,u;if(!["ALL","STARRED","TRASHED"].includes(t))if(!(null!==(c=e.labels)&&void 0!==c&&c.includes(t)||null!==(u=e.folders)&&void 0!==u&&u.includes(t)))continue;const s=(0,l.getFilterMapChunk)(`${t}_${r}`,`${t}_${r}_${d}`,a,i,e,n);o.push(...s)}return o})),(0,i.default)(this,"getPubChunkUnbatched",(e,t,r,a,i)=>{for(const s of r)if(("TRASHED"===s||!e.trashed)&&("TRASHED"!==s||e.trashed)&&("STARRED"!==s||e.starred)){var n,o;if(!["ALL","STARRED","TRASHED"].includes(s))if(!(null!==(n=e.labels)&&void 0!==n&&n.includes(s)||null!==(o=e.folders)&&void 0!==o&&o.includes(s)))continue;for(const r of a)t.push(...(0,l.getFilterMapChunk)(`${s}_${r}`,"",i,!1,e))}return t}),this.db=e,this.libraryId=t,this.general=r,this.filterMapUtils=a,this.emitter=n,this.logger=m,this.filterMapLogs=new c.default(this.db,this.logger)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(807),i=r(94),n=r(439);const{filterFlags:o}=i.FM;t.default=class{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;this.db=e,this.general=t,this.filterSize=r}getFilterSearchKeys(e,t,r){const a=[],i=[],n=[];for(const o of Object.keys(e)){if(!o.endsWith("_subCounts"))continue;let s=!1;const l=e[o],c=Object.keys(l);if(o.includes(r)||t.includes("trashed")&&(o.includes("TRASHED")||o.includes("ALL")))a.push(...c),!t.includes("STARRED")&&t.includes("TRASHED")&&n.push(...c.filter(e=>e.includes("byCreated")));else for(const e of t)o.includes(e)?i.push(...c):(s||t.includes("STARRED")||!t.includes("TRASHED")||n.push(...c.filter(e=>e.includes("byCreated"))),s=!0)}return{mainFilterKeys:a,filterKeysToSearch:i,otherFilterKeys:n}}async getFilterMapArrays(e,t,r){return{mainFilterMap:await this.db.getBulk("FilterMap",e),currentFilterMap:await this.db.getBulk("FilterMap",t),otherFilterMap:await this.db.getBulk("FilterMap",r)}}getPubsInCollectionMap(e,t,r,a){const i={},n={};if("push"===a)return n;for(const a of r){if(!a||!Array.isArray(a.data))continue;const r=a._id.split("_"),[o]=r;if(t.includes(o))continue;i[o]||(i[o]=[]);const s=a.data.map(e=>e.split("~")[1]);if(i[o].push(...s),!o.includes("ALL")&&!o.includes("STARRED")&&!o.includes("TRASHED"))for(const t of s)e.has(t)&&(n[t]=!0)}return n}calculateDBFilterMap(e,t,r,a,i,n){const o=new Map;let s={};for(const l of a)if(0===Object.keys(s).length)s=t.reduce((t,a)=>{if(a&&Array.isArray(a.data)){const s=a._id.split("_"),c=`${l}_${s[1]}`;for(const s of a.data){const a=s.split("~")[1],l=this.general.filterMapFlags.get(a);e.has(a)&&(this._calculateFlags(a,n,i,o,l,r),"push"===n&&(t[c]||(t[c]=[])).push(s))}}return t},{});else{const e=Object.keys(s).filter(e=>e.startsWith("ALL")||e.startsWith("TRASHED")||e.startsWith("STARRED"));for(const t of e){const e=t.split("_");s[`${l}_${e[1]}`]=s[t]}}return{dbFilterMap:s,filterFlagsToUpdate:o}}mergeNewAndCurrentFilterMap(e,t,r){for(const a of r){if(!a)continue;const r=a._id.split("_"),i=`${r[0]}_${r[1]}`;if(Array.isArray(a.data))for(const r of a.data){const a=r.split("~")[1];e.has(a)||(t[i]||(t[i]=[])).push(r)}}}getCountsForRemainingFilters(e,t){const r=[],{filterMapFlags:a}=this.general,i={};for(const r of t){if(!r||!Array.isArray(r.data))continue;const t=r._id.split("_"),[a]=t;if(e.includes(a))continue;i[a]||(i[a]=[]);const n=r.data.map(e=>e.split("~")[1]);i[a].push(...n)}for(const e of Object.keys(i)){const t=this._getMemoryCountFromDBFlag(i[e],a);r.push({_id:e+"_counts",data:t})}if(this.general.memoryCounts)for(const e of r)0===e.data.total?delete this.general.memoryCounts[e._id]:this.general.memoryCounts[e._id]=e.data;return r.filter(e=>e.data.total>0)}chunkAndSortFilterMap(e,t,r,i){const n=[],o=[],s={},l=[],{filterMapFlags:c}=this.general,u={},d={};for(const e of Object.keys(r)){(0,a.inPlaceSort)(r[e]).desc();const t=e.split("_"),[o,c]=t,p=this._splitFilterKeysEncoded(o,c,r[e]);if(!d[o]&&"push"===i){const t=r[e].map(e=>e.split("~")[1]);d[o]=new Set(t)}l.push({_id:e,data:[]}),l.push(...p),s[o+"_subCounts"]||(s[o+"_subCounts"]={}),s[o+"_subCounts"][e]={total:0};for(const e of p)s[o+"_subCounts"][e._id]={total:e.data.length};if("pull"===i&&-1===n.findIndex(e=>e._id.includes(o))){u[o]||(u[o]=[]);for(const t of r[e]){const e=t.split("~")[1];u[o].push(e)}}}for(const[e,t]of Object.entries(d))if(-1===n.findIndex(t=>t._id.includes(e))){const r=this._getMemoryCountFromDBFlag([...t],c);n.push({_id:e+"_counts",data:r})}for(const[e,t]of Object.entries(u)){const r=[...new Set(t)];if(r.length>0){const t=this._getMemoryCountFromDBFlag(r,c);n.push({_id:e+"_counts",data:t})}}for(const[e,t]of Object.entries(s))o.push({_id:e,data:t});const p=[...l,...n.filter(e=>e.data.total>0),...o.filter(e=>Object.values(e.data).reduce((e,t)=>e+t.total,0)>0)];if(this.general.memoryCounts){for(const e of n)0===e.data.total?delete this.general.memoryCounts[e._id]:this.general.memoryCounts[e._id]=e.data;for(const e of o){0===Object.values(e.data).reduce((e,t)=>e+t.total,0)?delete this.general.memoryCounts[e._id]:this.general.memoryCounts[e._id]=e.data}if("pull"===i)for(const e of t)delete this.general.memoryCounts[e+"_counts"],delete this.general.memoryCounts[e+"_subCounts"]}return p}async updateFilterSizes(e,t,r){const{filterSizes:a}=await this.general.getLocalSettings(),i={};for(const a of t){i[a]||(i[a]={total:0,chunks:0});for(const e of r)!e._id.startsWith(a)||e._id.endsWith("counts")||e._id.endsWith("subCounts")||(i[a].chunks+=1);i[a].total=e.length}const n={...a||{},...i};for(const e of Object.keys(n))0===n[e].chunks&&delete n[e];await this.general.setLocalSettings({filterSizes:n})}async updateIDBFilterMap(e,t,r,a){const i=[...e.map(e=>e+"_counts"),...e.map(e=>e+"_subCounts")];await this.db.removeBulk("FilterMap",[...a,...i]),await this.db.putBulk("FilterMap",t);const n=Array.from(r.values());await this.db.putBulk("FilterMapFlags",n)}_calculateFlags(e,t,r,a,i,n){const s={folders:o.HAS_FOLDER,labels:o.HAS_LABEL,starred:o.starred,trashed:o.trashed},l={folders:o.HAS_NO_FOLDER,labels:o.HAS_NO_LABEL,starred:0,trashed:0},c={folders:o.HAS_NO_FOLDER,labels:o.HAS_NO_LABEL,starred:0,trashed:0},u={folders:o.HAS_FOLDER,labels:o.HAS_LABEL,starred:o.starred,trashed:o.trashed};if(i){const{flags:o}=i,d=o&&!a.has(e);if("push"===t){const t=!(+o&s[r]);if(d&&t){const t={_id:e,flags:o+s[r]-(+o&l[r]?l[r]:0),type:i.type};a.set(e,t),this.general.filterMapFlags.set(e,t)}return}if("pull"===t){const t=!(+o&c[r]);if(d&&t&&!n[e]){const t={_id:e,flags:o+c[r]-(+o&u[r]?u[r]:0),type:i.type};a.set(e,t),this.general.filterMapFlags.set(e,t)}}}}_splitFilterKeysEncoded(e,t,r){const a=[];if(r.length<=this.filterSize)return[{_id:`${e}_${t}`,data:r}];const i=Math.ceil(r.length/this.filterSize),n=Math.floor(r.length/i),o=/.*?-(\d+$)/;let s=999999;for(let l=0;l<i;l+=1){const c=l<i-1?r.slice(l*n,(l+1)*n):r.slice(l*n),u=c[0].split("~")[0],d=a.filter(r=>r._id.includes(`${e}_${t}_${u}`));if(d.length){for(const e of d){const t=a.findIndex(t=>t._id.includes(e._id));-1===t||o.test(e._id)||(a[t]._id=`${a[t]._id}-${s}`,s-=1)}a.push({_id:`${e}_${t}_${u}-${s}`,data:c}),s-=1}else a.push({_id:`${e}_${t}_${u}`,data:c})}return a}_getMemoryCountFromDBFlag(e,t){const r={total:e.length},a=[],i=e=>!["starred","trashed"].includes(e);for(const s of e){const e={},l=t.get(s);if(!l)continue;const{flags:c,type:u}=l;for(const t of(0,n.getKeys)(o))+c&o[t]&&(e[t]=!0);a.push(e);const d=[..."ST_REVIEW"===u?["PP_ARTICLE"]:[],u,...(0,n.getKeys)(e).filter(i)];for(const e of d)r[e]?r[e]+=1:r[e]=1}return r}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7));t.default=class{constructor(){(0,i.default)(this,"promiseDataArray",[]),(0,i.default)(this,"processing",!1)}async add(e){let t,r;const a=new Promise((e,a)=>{t=e,r=a});return this.promiseDataArray.unshift({actions:e,res:t,rej:r}),this.processing||(this.processing=!0,await this.process()),a}async process(){let e=this.promiseDataArray.pop();for(;e;){try{var t;const{mainAction:r,precedingAction:a,postAction:i}=e.actions;a&&await a(),await r(),i&&await i(),null!==(t=e)&&void 0!==t&&t.res&&e.res()}catch(t){var r;null!==(r=e)&&void 0!==r&&r.rej&&e.rej(t)}e=this.promiseDataArray.pop()}this.processing=!1}async clear(){let e=this.promiseDataArray.pop();for(;e;){var t;null!==(t=e)&&void 0!==t&&t.res&&e.res(),e=this.promiseDataArray.pop()}}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7));r(958);t.default=class{constructor(e,t){(0,i.default)(this,"loggerLabel","FilterMapLogs"),(0,i.default)(this,"currentId",-1),this.db=e,this.logger=t}async add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[a,i]=t;"FM_init"===a&&0===i.length||await this.db.add("FilterMapLogs",{type:a,created:Date.now()/1e3,payload:i})}async export(){try{return this.db.export({filter:e=>e===this.db.FilterMapLogs.name})}catch(e){this.logger.error(this.loggerLabel,e)}}async import(e){try{this.currentId=-1,await this.db.clearStore("FilterMapLogs"),await this.db.clearStore("FilterMap"),await this.db.import(e,{acceptMissingTables:!0,acceptVersionDiff:!0,acceptNameDiff:!0})}catch(e){this.logger.error(this.loggerLabel,e)}}async next(e,t){const r=this.currentId?this.db.FilterMapLogs.where("_id").above(this.currentId):this.db.FilterMapLogs,a=await r.limit(1).first();console.log("this.currentId: ",this.currentId),console.log("Doc: ",a),a&&(await this.applyAction(a,e,t),this.currentId=+a._id)}async previous(e,t){const r=this.db.FilterMapLogs.where("_id").below(this.currentId),a=await r.toArray();if(await this.db.clearStore("FilterMap"),!a.length)return void(this.currentId=-1);const i=a[a.length-1];for(const r of a)r._id===i._id||"FM_init"===r.type?await this.applyAction(r,e,t):await this.applyAction(r);this.currentId=+i._id}async goTo(e,t){if(await this.db.clearStore("FilterMap"),!e||e<1)return void(this.currentId=-1);const r=await this.db.FilterMapLogs.toArray();for(const a of r){if(!a||a&&+a._id>e)break;this.currentId=+a._id,await this.applyAction(a,!0,t)}}async applyAction(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;const{type:a,payload:i}=e;switch(a){case"FM_init":await this.db.clearStore("FilterMap"),await this.db.addBulk("FilterMap",i),await(null==r?void 0:r.init());break;case"FM_action":if(n(i)&&t&&r&&i.data.pubs&&await r.insert(i.data.pubs),o(i)&&t&&r){var c;const e=Object.keys(i.data).filter(e=>!["updates","emptyFilters","fullFilters"].includes(e)),t=e.reduce((e,t)=>{var r;const a=null===(r=i.data[t])||void 0===r?void 0:r.oldPub;return a&&e.push(a),e},[]);null!==(c=i.data)&&void 0!==c&&c.updates&&await r.update(e,t,i.data.updates)}var u;if(s(i)&&t&&r)null!==(u=i.data)&&void 0!==u&&u.pubs&&await r.remove(i.data.pubs.map(e=>e._id));l(i)&&r&&await r.partialRecreate(i.data),!t&&"action"in i&&i.data&&("fullFilters"in i.data&&i.data.fullFilters&&await this.db.putBulk("FilterMap",i.data.fullFilters),!n(i)&&"emptyFilters"in i.data&&i.data.emptyFilters&&await this.db.removeBulk("FilterMap",i.data.emptyFilters));break;case"FM_error":if(console.error("Error:",i,r),i.input){const{ids:e,pubs:t,updates:a}=i.input;await r.update(e,t,a)}}}};const n=e=>"action"in e&&"insert"===e.action,o=e=>"action"in e&&"update"===e.action,s=e=>"action"in e&&"remove"===e.action,l=e=>"action"in e&&"partial-recreate"===e.action},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(439);t.default=class{constructor(e,t,r){var a=this;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{trim:!0,extract:!0};(0,i.default)(this,"loggerLabel","General_Model"),(0,i.default)(this,"duplicateUpdatePubs",[]),(0,i.default)(this,"filterMapFlags",new Map),(0,i.default)(this,"lastTimestamp",0),(0,i.default)(this,"getTimestamp",()=>{let e=Date.now()/1e3;return this.timestampOffset&&(e-=this.timestampOffset),e<=this.lastTimestamp&&(e=this.lastTimestamp+.001),this.lastTimestamp=e,e}),(0,i.default)(this,"setCreatedField",(e,t)=>{const r=t||this.getTimestamp();e.created=r}),(0,i.default)(this,"getDuplicateSettings",()=>this.duplicatesSettings),(0,i.default)(this,"getLocalSettings",async()=>{const e=await this.db.getAll("LocalSettings");if(e.length){const t=e[0];return t.last_server_sync||(t.last_server_sync=0),t.timestamp_offset||(t.timestamp_offset=0),t}return{_id:"singleton"}}),(0,i.default)(this,"setLocalSettings",async e=>{const t=await this.db.getAll("LocalSettings");if(t.length>1)throw new Error("Error updating LocalSettings");if(t.length>0)await this.db.update("LocalSettings","singleton",e);else try{await this.db.add("LocalSettings",{_id:"singleton",...e})}catch(t){if(!(t instanceof Error&&/Key already exists in the object store/i.test(t.message)))throw t;await this.db.update("LocalSettings","singleton",e)}}),(0,i.default)(this,"getMemoryCounts",(async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=await a.db.getKeys("FilterMap"),r=[],i={};if(e){const e=await a.db.getAll("FilterMapFlags");for(const t of e)a.filterMapFlags.set(t._id,t)}for(const e of t)r.push(e.toString());const o=await a.db.getBulk("FilterMap",r);for(const e of o)e&&!Array.isArray(null==e?void 0:e.data)&&(i[e._id]=e.data);(0,n.getKeys)(i).length?a.memoryCounts=i:a.memoryCounts=void 0})),(0,i.default)(this,"removeDuplicates",async e=>{this.emitter.emit("modelProgress",{total:{writing:e.length}});try{const t=e.map(e=>e._id),r=await this.db.getBulk("Duplicates",t),a=[...new Set(r.map(e=>(null==e?void 0:e.duplicates)||[]).flat())],i=await this.db.getBulk("Duplicates",a),n=[];for(const e of i)if(e){for(const r of t){const t=null==e?void 0:e.duplicates.findIndex(e=>e===r);-1!==t&&e.duplicates.splice(t,1)}n.push(e)}await this.db.putBulk("Duplicates",n),await this.db.removeBulk("Duplicates",t)}finally{this.emitter.emit("modelProgress",{current:{writing:e.length}})}}),(0,i.default)(this,"updateDuplicates",async()=>{const e=this.duplicateUpdatePubs.length||1;this.emitter.emit("modelProgress",{total:{writing:e}});try{this.logger.time(this.loggerLabel,"duplicatesUpdateBulk"),this.duplicateUpdatePubs.length||await this.db.clearStore("Duplicates");const r=[],a={},i=[];let o=[];if(this.logger.time(this.loggerLabel,"duplicatesUpdateBulk=getAll"),this.duplicateUpdatePubs){var t;i.push(...this.duplicateUpdatePubs);let e=[];for(const t of this.duplicateUpdatePubs)t&&e.push(...t.id_list||[]);if(e=[...new Set(e)],o=((null===(t=await this.db.getWhereWithOperator("Duplicates","id_list","anyOfIgnoreCase",(0,n.processIdList)(e||[],this.duplicatesSettings.trim,this.duplicatesSettings.extract)))||void 0===t?void 0:t.filter(e=>!!e))||[]).map(e=>e._id),o.length){for(const e of i){if(!e)continue;const t=o.findIndex(t=>t===e._id);-1!==t&&o.splice(t,1)}const e=await this.db.getBulk("Library",o);i.push(...e)}this.duplicateUpdatePubs=[]}const s=i.length?i:await this.db.getAll("Library");this.logger.timeEnd(this.loggerLabel,"duplicatesUpdateBulk=getAll"),this.logger.time(this.loggerLabel,"duplicatesUpdateBulk=generateDuplicates");let l=[];for(const e of s){if(!e||!e._id)continue;const t=(0,n.processIdList)(e.id_list||[],this.duplicatesSettings.trim,this.duplicatesSettings.extract),i={_id:e._id,owner:e.owner,id_list:t,duplicates:[],trashed:e.trashed?1:0,ignoreDuplicates:e.ignore_duplicates||[]};r.push(i),l.push(...i.ignoreDuplicates);for(const r of t)a[r]||(a[r]=[]),-1===a[r].findIndex(t=>t._id===e._id)&&a[r].push(e)}l=[...new Set(l)];for(const e of r){for(const t of e.id_list)for(const r of a[t])r._id&&(r.trashed||r._id===e._id||e.trashed||e.duplicates.push(r._id));l.includes(e._id)?(e.duplicates=[...new Set(e.duplicates)],e.ignoreDuplicates=[...new Set([...e.ignoreDuplicates,e._id])]):e.duplicates=(0,n.arrayLeftDifference)([...new Set(e.duplicates)],l),0===e.trashed&&delete e.trashed}this.logger.timeEnd(this.loggerLabel,"duplicatesUpdateBulk=generateDuplicates"),this.logger.time(this.loggerLabel,"duplicatesUpdateBulk=addBulk"),await this.db.putBulk("Duplicates",r),this.logger.timeEnd(this.loggerLabel,"duplicatesUpdateBulk=addBulk"),this.logger.timeEnd(this.loggerLabel,"duplicatesUpdateBulk")}finally{this.emitter.emit("modelProgress",{current:{writing:e}})}}),(0,i.default)(this,"saveBulk",async(e,t)=>{await this.db.addBulk(e,t)}),(0,i.default)(this,"putBulk",async(e,t)=>{await this.db.putBulk(e,t)}),(0,i.default)(this,"getBulk",async(e,t)=>this.db.getBulk(e,t)),(0,i.default)(this,"getAll",async e=>this.db.getAll(e)),(0,i.default)(this,"getAllChunked",async(e,t,r)=>{const a=t?this.db.table(e).where("_id").above(t):this.db.table(e),i=await a.limit(1001).toArray(),n=()=>r?i.filter(e=>Object.entries(r).every(t=>{let[r,a]=t;return a.includes(e[r])})):i;return i.length>1e3?(i.pop(),{docs:n(),cursor:i[i.length-1]._id}):{docs:n(),cursor:null}}),(0,i.default)(this,"updateBulk",async(e,t,r,a)=>{await this.db.updateBulk(e,t,r,a)}),(0,i.default)(this,"removeBulk",async(e,t,r)=>{await this.db.removeBulk(e,t,r)}),(0,i.default)(this,"wipeAll",async()=>{await this.db.clearStores(),this.memoryCounts=void 0}),(0,i.default)(this,"isEmpty",()=>this.db.isEmpty()),(0,i.default)(this,"removeSyncedData",async()=>{await this.db.Users.clear(),await this.db.Library.clear(),await this.db.Collections.clear(),await this.db.Attachments.clear(),await this.db.Notes.clear(),await this.db.Permissions.clear(),await this.db.Files.clear(),await this.db.Changes.clear(),await this.db.Duplicates.clear(),await this.db.FilterMap.clear(),await this.db.FilterMapLogs.clear(),this.memoryCounts=void 0}),(0,i.default)(this,"isPdf",e=>{var t;return"application/pdf"===e.mimeType||e.article_pdf||(null===(t=e.filename)||void 0===t?void 0:t.endsWith(".pdf"))}),(0,i.default)(this,"isMainPdf",e=>"application/pdf"===e.mimeType&&e.article_pdf),this.db=e,this.emitter=t,this.logger=r,this.duplicatesSettings=o}async getChangesCount(){return this.db.count("Changes")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(511);t.default=class{constructor(e,t,r){this.db=e,this.general=t,this.logger=r}async getUser(){const e=await this.db.getAll("Users");if(1!==e.length)throw new Error("Unexpected number of Users in database");return e[0]}async updateUser(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getTimestamp:r}=this.general,i=r(),n=await this.getUser(),o=t?(0,a.createOplogChange)("Users",{_id:n._id,...e},"update",i):void 0;return await this.db.update("Users",n._id,e,o),{changes:o?[o]:[]}}async updateUserJSONField(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{getTimestamp:i}=this.general,n=i(),o=await this.getUser();let s={};try{const t=e=>o[e];s=JSON.parse(t(e)||"{}")}catch{}const l={[e]:JSON.stringify({...s,...t})},c=r?(0,a.createOplogChange)("Users",{_id:o._id,...l},"update",n):void 0;return await this.db.update("Users",o._id,l,c),{changes:c?[c]:[]}}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(94),o=r(834),s=r(807),l=r(439),c=r(511),u=r(1187);const{preRenderPubData:d,getAffectedFieldsForPreRender:p}=n.ReferenceDL,m={mainFilter:{data:"ALL"},mainType:{data:[]},filter:{rule:"OR",data:[]},collections:{rule:"OR",data:[]},sort:{data:"byCreated"},order:"desc"},h=e=>({...JSON.parse(JSON.stringify(m)),...e});t.default=class{constructor(e,t,r,a){(0,i.default)(this,"loggerLabel","Library_Model"),this.db=e,this.general=t,this.filterMapUtils=r,this.logger=a}async getIdsFromSelector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=[];if(Array.isArray(e))a=(0,l.arrayLeftDifference)(e,t);else{const i=await this.getReferenceIds(e);if(!i&&r)throw new Error("Unable to updatePubs before we have FilterMap");i&&(a=(0,l.arrayLeftDifference)(i.ids,t))}return a}async citationKeyExists(e,t){return(await this.db.getWhere("Library","citekey",[e])).filter(e=>1!==e.trashed).length>0||!!t&&t.includes(e)}async resetCitationKeys(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=(0,u.parseCitationKeyOptions)(e),i={numberPubsProcessed:0,changedCitationKeys:{}},n=await this.db.getAll("Library"),o=[],l={},d=[],p=[];for(const e of(0,s.sort)(n).asc(e=>e.created)){if(!e._id||e.trashed)continue;i.numberPubsProcessed+=1;const n=e.citekey||"";if(t?await(0,u.setCitationKey)(e,a,p):(e.citekey&&p.includes(e.citekey)&&delete e.citekey,await(0,u.updateCitationKey)(e,a,p)),r&&"string"==typeof e.user_citekey&&e.user_citekey.length>0){const t=this.general.getTimestamp(),r=(0,c.createOplogChange)("Library",{_id:e._id,user_citekey:""},"update",t);o.push(r),d.push(e._id)}if(e.citekey&&(p.push(e.citekey),n!==e.citekey)){i.changedCitationKeys[e._id]=[n,e.citekey];const t=this.general.getTimestamp(),r=(0,c.createOplogChange)("Library",{_id:e._id,citekey:e.citekey},"update",t);o.push(r),l[e._id]=e.citekey}}return 0===o.length?i:(await this.db.transaction("rw",this.db.Changes,this.db.Library,async()=>{for(const e of Object.keys(l))await this.db.update("Library",e,{citekey:l[e]});for(const e of d)await this.db.update("Library",e,{user_citekey:""});await this.db.addBulk("Changes",o)}),{...i,updatedPubsUserCitekeys:d||[]})}async getReferenceIdsWithCustomCitationKeys(){return(await this.db.getAll("Library")).filter(e=>e.user_citekey).map(e=>e._id)}async getReferenceIds(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,-1];const{getMemoryCounts:a}=this.general;if(this.logger.time(this.loggerLabel,"getReferenceIds"),!this.filterMapUtils)return null;if(this.general.memoryCounts||await a(),!this.general.memoryCounts)return null;const i=[];for(const t of(0,l.getKeys)(e))e[t]||delete e[t];const n=h(e);let o=-1;if(n.collections.data.length>1){const e=n.collections.data;for(const t of e){const e=t+"_subCounts";if(e in this.general.memoryCounts){const r=(0,l.getKeys)(this.general.memoryCounts[e]);for(const e of(0,s.sort)(r)[n.order]())e.includes(`${t}_${n.sort.data}`)&&i.push(e)}}}else{const e=[],t=n.collections.data[0]?n.collections.data[0]:n.mainFilter.data,a=t+"_subCounts";if(a in this.general.memoryCounts){const r=(0,l.getKeys)(this.general.memoryCounts[a]);for(const a of(0,s.sort)(r)[n.order]())a.includes(`${t}_${n.sort.data}`)&&e.push(a);if("asc"===n.order){const t=e.shift();t&&e.push(t)}else{const t=e.pop();t&&e.unshift(t)}}let c=0;if(-1===r[1]||n.mainType.data.length||n.filter.data.length)i.push(...e),r[0]>0&&(o=r[0]);else for(const a of e){const e=this.general.memoryCounts[t+"_subCounts"][a].total;if(c+e>=r[0]&&(i.push(a),-1===o&&r[0])){o=Math.abs(c-r[0])}if(c+e>=r[1])break;c+=e}}this.logger.debug(this.loggerLabel,"getReferenceIds",{filterMapIds:i,readingInterval:r,filterQuery:n});const c=await this.db.getBulk("FilterMap",i);if(c.every(e=>void 0===e)){if(0===await this.db.count("FilterMap"))return null}const u=this.filterMapUtils.getReferenceIds(c,n,this.general.filterMapFlags);-1===o&&(o=0),u.ids=-1!==r[1]?u.ids.slice(o,o+(r[1]-r[0])):u.ids.slice(o);const d=!n.filter.data.length,p=!n.mainType.data.length,m=n.mainFilter.data,g=n.collections.data.length;var f,b;("ALL"===m&&d&&p&&g<2||("STARRED"===m||"TRASHED"===m)&&d&&p&&!g)&&(u.count=null!==(f=n.collections.data)&&void 0!==f&&f.length?this.general.memoryCounts[n.collections.data+"_counts"]:this.general.memoryCounts[n.mainFilter.data+"_counts"],null!==(b=u.count)&&void 0!==b&&b.total||(u.count={total:0}));if(0===r[0]&&-1!==r[1]){const e=(0,l.getKeys)(this.general.memoryCounts);u.countNumbers={};for(const t of e){const e=this.general.memoryCounts[t];if(!t||!this.isMemoryCount(e))continue;const r=t.split("_")[0];u.countNumbers[r]=e.total||0}}return t&&(u.data=await this.getReferences(u.ids)),u.count||(u.count={total:0}),this.logger.timeEnd(this.loggerLabel,"getReferenceIds"),u}async getReferences(e){const t="getReferences-"+(0,o.v4)();this.logger.time(this.loggerLabel,t);const r=await this.db.getWhere("Attachments","pub_id",e),a=await this.db.getBulk("Library",e),i={};for(const e of a)e&&e._id&&(i[e._id]=e);for(const e of r)e&&e.pub_id&&(i[e.pub_id].attachments||(i[e.pub_id].attachments=[])).push(e);return this.logger.timeEnd(this.loggerLabel,t),a}async getFilterCounts(e){const t={},r=e.map(e=>e+"_counts"),a=await this.db.getBulk("FilterMap",r);for(const[r,i]of a.entries()){if(!i){t[e[r]]=0;continue}if(!this.isFilterCount(i))continue;t[i._id.split("_counts")[0]]=i.data.total}return t}async getDuplicateEntriesByFilterQuery(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;this.logger.time(this.loggerLabel,"getDuplicateEntriesByFilterQuery");const r=[],a=h(e),i=await this.getReferenceIds(e,!1,[0,-1]);if(!i)return{groups:[],pubs:[]};this.logger.time(this.loggerLabel,"getDuplicates");const n=await this.db.getAll("Duplicates");this.logger.timeEnd(this.loggerLabel,"getDuplicates");for(const e of i.ids){const t=n.find(t=>t._id===e);t&&t.duplicates.length&&!t.ignoreDuplicates.includes(t._id)&&r.push(t)}const o=[],l=r.map(e=>e._id),c=r.map(e=>e.duplicates).flat(),u=new Set([...l,...c]),d=[...u];for(const e of r){if(!u.has(e._id))continue;const t=[e._id],r=[];for(const t of e.duplicates){const e=d.findIndex(e=>e===t);-1!==e&&r.push({position:e,id:t})}const i="asc"===a.order?{desc:e=>e.position}:{asc:e=>e.position},n=(0,s.sort)(r).by([i]).map(e=>e.id);for(const e of n)u.has(e)&&(t.push(e),u.delete(e));u.delete(e._id),o.push(t)}const p=[];for(const e of o){for(const t of e)p.push(t);if(p.length>=t)break}return{groups:o,pubs:await this.getReferences(p)}}async getDuplicateIds(e){var t;return((null===(t=await this.db.getWhereWithOperator("Duplicates","id_list","anyOfIgnoreCase",e))||void 0===t?void 0:t.filter(e=>!!e&&!!e.duplicates.length))||[]).map(e=>e._id)}async searchMultipleDuplicateIds(e){const t=[];for(const a of e){var r;const e=(null===(r=await this.db.getWhereWithOperator("Duplicates","id_list","anyOfIgnoreCase",a))||void 0===r?void 0:r.filter(e=>!!e))||[];t.push(e.map(e=>e._id))}const a=[...new Set(t.flat())],i=(await this.db.getBulk("Library",a)).filter(e=>!!e&&!!e.trashed).map(e=>e._id);for(const[e,r]of t.entries())t[e]=(0,l.arrayLeftDifference)(r,i);return t}async getDuplicateEntries(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=[],i=this.general.getDuplicateSettings(),n=[],o={};for(const[t,r]of e.entries()){a.push(null);const e=(0,l.processIdList)(r,i.trim,i.extract);for(const r of e){const e=r.toLowerCase();o[e]||(o[e]=[]),o[e].push(t)}n.push(...e)}let s=[];if(r){var c;s=(null===(c=await this.db.getWhereWithOperator("Duplicates","id_list","anyOfIgnoreCase",n)||[])||void 0===c?void 0:c.filter(e=>!!e&&!e.trashed))||[]}else{const e={};for(let t=0;t<n.length;t+=1){const r=await this.db.table("Duplicates").where("id_list").equals(n[t]).distinct().toArray();for(const t of r)t&&t._id&&!t.trashed&&(e[t._id]=t)}s=Object.values(e)}const u=t?await this.db.getWhere("Attachments","pub_id",[...new Set(s.map(e=>e._id))]):[],d={};for(const e of u)e.pub_id&&(e.pub_id in d||(d[e.pub_id]=[]),d[e.pub_id].push(e));for(const e of s)if(e._id&&e.id_list){var p;const t=d[e._id]||[],r=t.find(e=>1===e.article_pdf),i=(null==r?void 0:r._id)||(null===(p=t[0])||void 0===p?void 0:p._id)||null,n=[];for(const t of e.id_list){const e=t.toLowerCase();o[e]&&n.push(...o[e])}if(n.length>0){const t=new Set(n);for(const r of t){const t=a[r]||[];t.push({publication_id:e._id,attachment_id:i}),a[r]=t}}}return a}async getPub(e){const t=await this.db.get("Library",e);if(!t)return t;const r=await this.getPubAttachments(e);return{...t,attachments:r}}async getPubAttachments(e){return this.db.getWhere("Attachments","pub_id",[e])}async handleCitations(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;const{getTimestamp:a}=this.general,i=[],n=[],o=async e=>this.citationKeyExists.bind(this,e,n)();for(const s of e)!1===t?!s.citekey&&r&&(await(0,u.setCitationKey)(s,r,o),s.citekey&&n.push(s.citekey),i.push((0,c.createOplogChange)("Library",{_id:s._id,citekey:s.citekey},"update",a()))):r?(await(0,u.setCitationKey)(s,r,o),s.citekey&&n.push(s.citekey)):s.citekey="";return i}async insertPub(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;const a=[];this.general.setCreatedField(e),this.removeAuthorIdFromPub(e),this.cleanUpPub(e),e.labels||(e.labels=[]),e.folders||(e.folders=[]),!0!==t||e.title||(e.title=""),e.__render=d(e);const i=await this.handleCitations([e],t,r);a.push(...i);const n=this.general.getTimestamp(),o=t?(0,c.createOplogChange)("Library",e,"insert",n):void 0;return o&&a.push(o),await this.db.addBulk("Library",[e],a),{changes:a}}async insertPubs(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3?arguments[3]:void 0;const{getTimestamp:i,setCreatedField:n}=this.general,o=[],s=await this.handleCitations(e,t,a);o.push(...s);const l=i();for(const[a,i]of e.entries()){let e=l;r&&(e=l+(a+1)/1e3,n(i,e)),i.labels||(i.labels=[]),i.folders||(i.folders=[]),!0!==t||i.title||(i.title=""),this.removeAuthorIdFromPub(i),this.cleanUpPub(i),i.__render=d(i),t&&o.push((0,c.createOplogChange)("Library",i,"insert",e))}return await this.db.addBulk("Library",e,o),{changes:o}}async calculatePubReplace(e,t){const r=await this.db.get("Library",e);return this.removeAuthorIdFromPub(t),this.getChangedFields(t,r)}async calculatePubUpdate(e,t,r){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0;const{getTimestamp:n}=this.general,o=n();this.removeAuthorIdFromPub(r),this.cleanUpPub(r);const s=Object.keys(r),l=[],m=a?(0,c.createOplogChange)("Library",{...r,_id:e},"update",o):void 0,h=!s.includes("starred")||s.includes("starred")&&s.length>1,g=await this.db.get("Library",e);if(g&&g._id){const e=p(r);if(a&&(0,u.potentialCitationKeyUpdate)(s,t,r.trashed)){delete r.citekey;const e={...g,...r};0===r.trashed&&(e.citekey="");await(0,u.updateCitationKey)(e,t,this.citationKeyExists.bind(this))&&(i&&e.citekey?(g.citekey=e.citekey,l.push((0,c.createOplogChange)("Library",{_id:e._id,citekey:g.citekey},"update",o))):(g.citekey="",l.push((0,c.createOplogChange)("Library",{_id:e._id,citekey:g.citekey},"update",o))))}else if(!a&&""===r.citekey&&i){delete r.citekey;const e={...g,...r};await(0,u.updateCitationKey)(e,t,this.citationKeyExists.bind(this))&&(g.citekey=e.citekey,l.push((0,c.createOplogChange)("Library",{_id:e._id,citekey:g.citekey},"update",o)))}if(e){for(const t of e)g.__render&&g.__render[t]&&delete g.__render[t];g.__render={...g.__render,...d({...g,...r},e.length?e:void 0)}}m&&(m.data={__render:g.__render},l.unshift(m))}return{changes:l,pub:g,shouldCalculateDuplicates:h}}async prepareUpdatePubs(e,t,r){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0;const{getTimestamp:n}=this.general,o=n(),s=Object.keys(t),p=!s.includes("starred")||s.includes("starred")&&s.length>1,m=[],h=["title","author","journal","year","pubtype"],g=(0,l.getKeys)(t).filter(e=>h.includes(e)),f=[],b=async e=>this.citationKeyExists.bind(this,e,f)(),y=[];for(const n of e){if(!n)continue;const e={...n,...t};if(a&&(0,u.potentialCitationKeyUpdate)(s,r,t.trashed)){delete t.citekey,0===t.trashed&&(e.citekey="");await(0,u.updateCitationKey)(e,r,b)&&(i&&e.citekey?(f.push(e.citekey),n.citekey=e.citekey,m.push((0,c.createOplogChange)("Library",{_id:n._id,citekey:n.citekey},"update",o))):(n.citekey="",m.push((0,c.createOplogChange)("Library",{_id:n._id,citekey:n.citekey},"update",o))))}const l=a?(0,c.createOplogChange)("Library",{...t,_id:n._id},"update",o):void 0;g.length&&(n.__render={...n.__render,...d(e)}),l&&(l.data={__render:n.__render},m.push(l)),y.push(e)}return{changes:m,shouldCalculateDuplicates:p,library:y}}async updatePubsPartial(e,t){await this.db.putBulk("Library",e,t)}async updatePubs(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=arguments.length>5?arguments[5]:void 0;const{getTimestamp:o}=this.general,s=o(),p=[],m=Object.keys(t),h=["title","author","journal","year","pubtype"],g=(0,l.getKeys)(t).filter(e=>h.includes(e)),f=!m.includes("starred")||m.includes("starred")&&m.length>1,b=[],y=async e=>this.citationKeyExists.bind(this,e,b)();for(const[a,o]of e.entries()){if(!o)continue;if(i&&(0,u.potentialCitationKeyUpdate)(m,r,t.trashed)){delete t.citekey;const e={...o,...t};0===t.trashed&&(e.citekey="");await(0,u.updateCitationKey)(e,r,y)&&(n&&e.citekey?(b.push(e.citekey),o.citekey=e.citekey,p.push((0,c.createOplogChange)("Library",{_id:o._id,citekey:o.citekey},"update",s+(a+1)/1e3))):(o.citekey="",p.push((0,c.createOplogChange)("Library",{_id:o._id,citekey:o.citekey},"update",s+(a+1)/1e3))))}const e=i?(0,c.createOplogChange)("Library",{...t,_id:o._id},"update",s+(a+1)/1e3):void 0;if(g.length){for(const e of g)o.__render&&o.__render[e]&&delete o.__render[e];o.__render={...o.__render,...d({...o,...t},g.length?g:void 0)}}e&&(e.data={__render:o.__render},p.push(e))}const v=[];if(a){for(const r of e)r&&v.push({...r,...t});await this.db.putBulk("Library",v,p)}return{changes:p,shouldCalculateDuplicates:f,library:v}}async removePub(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getTimestamp:r}=this.general,a=r(),i=await this.db.getWhere("Attachments","pub_id",[e]),n=await this.db.getWhere("Notes","attachment_id",i.map(e=>e._id));await this.db.removeBulk("Attachments",i.map(e=>e._id)),await this.db.removeBulk("Notes",n.map(e=>e._id));const o=t?(0,c.createOplogChange)("Library",{_id:e},"remove",a):void 0;return await this.db.remove("Library",e,o),{changes:o?[o]:[]}}async removePubs(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getTimestamp:r}=this.general,a=r(),i=[];if(t)for(const[t,r]of e.entries())i.push((0,c.createOplogChange)("Library",{_id:r},"remove",a+(t+1)/1e3));const n=await this.db.getWhere("Attachments","pub_id",e),o=await this.db.getWhere("Notes","attachment_id",n.map(e=>e._id)),s=await this.db.getWhere("Files","_id",n.map(e=>e._id));return await this.db.removeBulk("Notes",o.map(e=>e._id)),await this.db.removeBulk("Attachments",n.map(e=>e._id)),await this.db.removeBulk("Files",s.map(e=>e._id)),await this.db.removeBulk("Library",e,i),{changes:i}}async updatePubLinks(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{getTimestamp:a}=this.general,i=a(),n=[],o=await this.db.get("Library",e);if(o&&"linked_to"===t.field){let a,s=o.linked_to||[];if(!s.includes(t.value))return this.logger.debug(this.loggerLabel,`Pulling linked_to [${t.value}] ignored. Already gone.`),{changes:n};s=s.filter(e=>e!==t.value),r&&(a=(0,c.createOplogChange)("Library",{_id:e},"update",i),a.fields=["linked_to"],a[t.pushOrPull]=[t.value]),await this.db.update("Library",e,{linked_to:s},a),a&&n.push(a)}return{changes:n}}removeAuthorIdFromPub(e){const t=["author","editor","series_editor","contributor","translator"];for(const r of t)for(const t of e[r]||[])delete t._id}cleanUpPub(e){e.attachments&&(this.logger.debug(this.loggerLabel,"Removing attachments field from pub: "+e._id),delete e.attachments)}isFilterCount(e){var t;return void 0!==(null==e||null===(t=e.data)||void 0===t?void 0:t.total)}isMemoryCount(e){return void 0!==(null==e?void 0:e.total)}getChangedFields(e,t){const r={...e},a=["attachments","labels","folders","__render","copied_from","copied_to","linked_from","linked_to","created","owner","_id"];for(const e of a)delete r[e];for(const a of(0,l.getKeys)(e))a in t&&(JSON.stringify(t[a])===JSON.stringify(e[a])&&delete r[a],delete t[a]);const i=Array.from(["published","accessed","filed","originally_published","conference_date","source"]),n=Array.from(["author","editor","series_editor","contributor","translator","id_list","url","crawl_urls","xref"]),o=Array.from(["kind"]),s=Array.from(["abstract","address","affiliation","application_number","archive","archivePrefix","archive_location","archive_place","arxivid","assignee","associated_doi","booktitle","call_number","chapter","cite_alias","citedByLink","citekey","class","conference","conference_location","copyright","court","database","department","doi","dup_sha1","edition","eprint","external_pdf_filename","foreign_patents","genre","gs_all_versions","gs_bibtex","gs_cited_by_link","gs_cluster_id","gs_related_articles","history","howpublished","institution","international_class","isbn","isbn_alt","ismn","issn","issn_alt","issue","issuing_authority","journal","journalfull","jurisdiction","keywords","language","lccn","legislative_body","masid","medium","mr","note","num_pages","num_volumes","number","original_address","original_citekey","original_id","original_publisher","original_title","pages","patent_number","patent_publication_type","pmc","pmid","primaryClass","priority_numbers","publisher","running_time","scale","school","search_class","section","series","series_number","session","sha1","socialmedia_handle","states","status","title","titleshort","version","volume","zbl"]),c=Array.from(["autoCleaned","autocompleted","incomplete","needsParsing","starred","trashed"]);function u(e,t){return e.includes(t)}for(const e of(0,l.getKeys)(t))u(i,e)?r[e]={}:u(n,e)?r[e]=[]:u(s,e)?r[e]="":u(o,e)?r[e]=null:u(c,e)?r[e]=0:"pubtype"===e&&(r[e]="PP_MISC");return r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateCitationKey=t.updateCitationKey=t.setCitationKey=t.potentialCitationKeyUpdate=t.parseCitationKeyOptions=void 0;var a=r(1188);const i=e=>{const t={pattern:"[Firstauthor][year]-[unique:2]",patternConfig:{deduplicateWith:"random"}};if(!e||"{}"===e)return t;try{if("string"==typeof e){const t=JSON.parse(e);if(t&&t.pattern)return t}else if("object"==typeof e&&e.pattern)return e}catch(e){throw new Error("Failed parsing citation key config")}return t};t.parseCitationKeyOptions=i;t.potentialCitationKeyUpdate=(e,t,r)=>{const a=[];"{}"===t?a.push("author","editor","series_editor","contributor","translator","published"):(/author/i.test(t)&&a.push("author","editor","series_editor","contributor","translator"),/title/i.test(t)&&a.push("title"),/journal/i.test(t)&&a.push("journal"),/year/i.test(t)&&a.push("published"));for(const t of e)if(a.includes(t))return!0;return!(!e.includes("trashed")||0!==r)};t.setCitationKey=async(e,t,r)=>{const a=await n(e,t,r);e.citekey=a};t.updateCitationKey=async(e,t,r)=>{const n=e.citekey||"";if("{}"===t){const t=await(0,a.regenerateCitationKey)(e,r,n);e.citekey=t}else{const o=i(t),s=await(0,a.regenerateCitationKey)(e,r,n,o.pattern,o.patternConfig);e.citekey=s}return n!==e.citekey};const n=async(e,t,r)=>{if("{}"===t){return await(0,a.formatCitationKey)(e,[])}const n=i(t);return await(0,a.formatCitationKey)(e,r,n.pattern,n.patternConfig)};t.generateCitationKey=n},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.formatCitationKey=t.validateCitationKeyConfig=t.regenerateCitationKey=t.isSamePattern=t.generators=void 0;var i=a(r(1189)),n=r(18),o=r(32),s=r(959);const l=["a","an","the","is","are","was","were","has","have","had","do","does","did","can","could","should","would","might","must","shall","will","and","but","or","nor","for","yet","so","as","if","that","while","since","because","although","though","unless","at","in","on","of","to","for","with","by","from","about","into","over","after","under","before","between","among","through","around","during","without","he","she","it","they","them","him","her","us","we","you","his","her","its","their","your","our","absolutely","again","almost","already","also","always","barely","briefly","clearly","closely","completely","deeply","easily","entirely","far","fast","frequently","fully","generally","hard","hardly","here","high","how","just","late","long","loudly","merely","mostly","near","nearly","nicely","now","off","often","particularly","partly","quickly","quietly","rarely","recently","right","short","simply","slowly","smoothly","sometimes","soon","still","suddenly","today","tomorrow","totally","usually","well","yesterday","yet","all","every","many","few","several","most","some","any","none","much","little","enough","too","so","one","two","three","four","five","six","seven","eight","nine","ten","hundred","thousand","million","billion"],c=["@",",","\\\\","#","}","{","~","^","%","&","$",'"',"=","'","(",")","\\[","\\]"],u=(e,t)=>e?e.replace(new RegExp(`[${c.join("")}]`,"g"),t):"",d=(e,t)=>{if(!e)return e;if(!t)return e;switch(t){case"lowercase":return e.toLowerCase();case"uppercase":return e.toUpperCase()}throw new Error("Invalid capitalization")},p=e=>e.replace(/\s(.)/g,e=>e.toUpperCase()).replace(/\s/g,""),m=e=>{const t=[];for(let r=0;r<e;r+=1){const e=Math.floor(Math.random()*("0abcdefghijklmnopqrstuvwxyz".length-1))+1;t.push("0abcdefghijklmnopqrstuvwxyz".charAt(e))}return t.join("")},h=(e,t)=>{const r=[];let a=t;for(;a>0||e>r.length;)r.unshift("0abcdefghijklmnopqrstuvwxyz"[a%27]),a-=a%27,a/=27;return r.join("")},g={random:function*(e){for(;;)yield m(e)},none:function*(e){for(;;)yield"\xb6".repeat(e)},"sufficient-ordered-number":function*(e){yield"";let t=0;for(;;)t+=1,yield t.toString().padStart(e,"0")},"sufficient-random":function*(e){yield"";const t=g.random(e);for(;;)yield t.next().value},"ordered-a":function*(e){let t=1;for(;;){let r=h(e,t);for(;/0/.test(r);)t+=1,r=h(e,t);yield r,t+=1}},"sufficient-ordered-a":function*(e){yield"";const t=g["ordered-a"](e);for(;;)yield t.next().value},"sufficient-ordered-b":function*(e){yield"";const t=g["ordered-a"](e);for(t.next();;)yield t.next().value}};t.generators=g;const f=e=>{const t=[],r=[];let a=e.indexOf("["),i=-1;for(;-1!==a;){const n=e.substring(i+1,a);if(r.push({fullCmd:"text",cmd:"text",value:n,wordLimit:null,charLimit:null,capitalization:null}),i=e.indexOf("]",a),-1===i)throw new Error("Incomplete field: ["+e.substring(a+1));const o=e.substring(a+1,i),s=o.split(":");if(s.length>3)throw new Error(`Too many limits in [${o}]`);let[l]=s;const[,c,u]=s;if(void 0!==u){if(c&&!/^[0-9]+$/.test(c)||!/^[0-9]+$/.test(u))throw new Error(`Invalid limit in field [${o}]. Use numbers only.`)}else if(void 0!==c&&!/^[0-9]+$/.test(c))throw new Error(`Invalid limit in field [${o}]. Use numbers only.`);const d=c?parseInt(c,10):null,p=u?parseInt(u,10):null;l=l.trim();let m=null;/^[a-z]*$/.test(l)&&(m="lowercase"),/^[A-Z]*$/.test(l)&&(m="uppercase");let h=null;switch(l.toLowerCase()){case"firstauthor":case"lastauthor":case"year":if(Number.isInteger(p))throw new Error(`Invalid limit in field [${o}]. Use one limit only.`);break;case"unique":if(Number.isInteger(p))throw new Error(`Invalid limit in field [${o}]. Use one limit only.`);t.push(r.length),h="random-to-be-replaced";break;case"authors":case"titleshort":case"journal":case"title":break;default:throw new Error(`[${o}] is not a supported field`)}r.push({fullCmd:o,cmd:l,value:h,wordLimit:d,charLimit:p,capitalization:m}),a=e.indexOf("[",i)}const n=e.substring(i+1);if(r.push({fullCmd:"text",cmd:"text",value:n,wordLimit:null,charLimit:null,capitalization:null}),0===t.length)throw new Error("The field [unique] is required");if(t.length>1)throw new Error("The field [unique] can only be used once in the pattern");if(t[0]!==r.length-2)throw new Error("The field [unique] can only be at the last position");return r},b=async(e,t,r,a)=>{const s={};{let t=[];0===t.length&&e.author&&e.author.length>0&&(t=e.author),0===t.length&&e.editor&&e.editor.length>0&&(t=e.editor),0===t.length&&e.series_editor&&e.series_editor.length>0&&(t=e.series_editor),0===t.length&&e.contributor&&e.contributor.length>0&&(t=e.contributor),0===t.length&&e.translator&&e.translator.length>0&&(t=e.translator);const r=t&&t.length||0,a=r>0&&(t[0].last||t[0].collective)||null,i=r>0&&(t[t.length-1].last||t[t.length-1].collective)||null,c=e.published&&e.published.year||null,u=(0,n.interconvertString)((0,o.ellipsis)(e.title||"Unknown Title",200,{ellipsisString:"[...]"}),{format:"nomarkup"}).replace(/[']/g,"");s.authors=t,s.numOfAuthors=r,s.firstAuthor=a,s.lastAuthor=i,s.year=c,s.title=u,s.titleshort=u.split(/\s+/).map(e=>l.includes(e.toLowerCase())?null:e).filter(e=>!!e).join(" ")}const c=f(r),m=[];for(const t of c){let r="",i=!1;switch(t.cmd.toLowerCase()){case"authors":r=_(s,t.wordLimit,t.charLimit,t.capitalization,a);break;case"firstauthor":r=v(t.wordLimit,t.capitalization,s.firstAuthor);break;case"lastauthor":r=v(t.wordLimit,t.capitalization,s.lastAuthor);break;case"title":r=y(t.wordLimit,t.charLimit,t.capitalization,a,s.title);break;case"titleshort":r=y(t.wordLimit,t.charLimit,t.capitalization,a,s.titleshort);break;case"journal":if(r=e.journal||null,r){r=d(r,t.capitalization),r=r.replace(/\./g," "),r=r.replace(/ {2}/g," "),r=r.trim();let e=r.split(/\s+/g);"number"==typeof t.wordLimit&&Number.isInteger(t.wordLimit)&&e.splice(t.wordLimit),"number"==typeof t.charLimit&&Number.isInteger(t.charLimit)&&(e=e.map(e=>e.substr(0,t.charLimit))),r=e.join(" ")}break;case"year":r=s.year,r&&"number"==typeof t.wordLimit&&Number.isInteger(t.wordLimit)&&t.wordLimit<4&&(r=""+r,r=r.slice(-1*t.wordLimit));break;default:i=!0,r=t.value}i?"string"==typeof r&&m.push(r):m.push(r||a.fallback)}const h=c.length-2,b=c[h];let w,P=b.wordLimit||2,S=g[a.deduplicateWith](P),C=0;for(;!w;){C+=1,C>50&&/random/.test(a.deduplicateWith)&&(P+=1,S=g[a.deduplicateWith](P),S.next());let{value:e}=S.next();"uppercase"===b.capitalization&&(e=e.toUpperCase()),m.splice(h,1,e);let r=m.join("").trim();if(""===a.replaceWhitespace){r="";for(const e of m)r=`${r}${p(u(e," "))}`}else r=u(r," ").replace(/\s+/g,a.replaceWhitespace);if(r=r.replace(/^[-_]+/g,""),r=r.replace(/[-_]+$/g,""),r=r.replace(/-+/g,"-"),r=r.replace(/_+/g,"_"),"none"===a.deduplicateWith&&(r=r.replace(/\xb6/g,"")),a.useUTF8||(r=(0,i.default)(r),r=(0,o.replaceDiacritics)(r)),"function"==typeof t){await t(r)||(w=r)}else t.includes(r)||(w=r)}return w},y=(e,t,r,a,i)=>{if(!i)return null;let n=i,o=n.split(/[\s;.,:!?"']+/);const s=o.length;if("number"==typeof e&&Number.isInteger(e)&&e<o.length&&(0===e?o=[]:1===e?o=[o[0]]:("end"===a.abbreviateFieldsPosition&&(o=o.slice(0,e)),"middle"===a.abbreviateFieldsPosition&&(o=[...o.slice(0,Math.ceil(e/2)),...o.slice(-1*Math.floor(e/2))]))),o.length>0){if(null!==t&&(o=o.map(e=>e.substring(0,t))),null===r){const e=!/[a-z]/.test(o.join(""));o=e?o.map(e=>e.toLowerCase().replace(/^(.)/g,e=>e.toUpperCase())):o.map(e=>e.replace(/^(.)/g,e=>e.toUpperCase()))}else o=o.map(e=>d(e,r));if(s===o.length)n=o.join(" ");else if("end"===a.abbreviateFieldsPosition)n=o.join(" ")+a.abbreviateFieldsString;else if("middle"===a.abbreviateFieldsPosition)if(1===o.length)[n]=o;else{const e=o.slice(0,Math.ceil(o.length/2)).join(" "),t=o.slice(-1*Math.floor(o.length/2)).join(" ");n=e+a.abbreviateFieldsString+t}}return n},v=(e,t,r)=>{let a=null;return r&&(a=r.replace(/\./g,""),a&&"number"==typeof e&&Number.isInteger(e)&&(a=a.slice(0,e)),a=d(a,t)),a},_=(e,t,r,a,i)=>{let n=null,l=e.authors.map(e=>e.last||e.collective).filter(s.nonNullable).map(e=>null==e?void 0:e.replace(/\./g,""));if("number"==typeof t&&Number.isInteger(t)&&t<l.length&&(0===t?l=[]:1===t?l=2===l.length&&i.twoAuthorsDelimiter?[...l]:[l[0]]:t>1&&("end"===i.abbreviateAuthorsPosition&&(l=l.slice(0,t)),"middle"===i.abbreviateAuthorsPosition&&(l=[...l.slice(0,Math.ceil(t/2)),...l.slice(-1*Math.floor(t/2))]))),l.length>0)if(null!==r&&(l=l.map(e=>e.substring(0,r))),l=l.map(e=>d(e,a)),2===e.authors.length&&i.twoAuthorsDelimiter)n=l.join(i.twoAuthorsDelimiter);else if(e.authors.length===l.length)n=l.join(i.authorsDelimiter);else if("end"===i.abbreviateAuthorsPosition)n=l.join(i.authorsDelimiter)+i.abbreviateAuthorsString;else if("middle"===i.abbreviateAuthorsPosition)if(1===l.length)[n]=l;else{const e=l.slice(0,Math.ceil(l.length/2)).join(i.authorsDelimiter),t=l.slice(-1*Math.floor(l.length/2)).join(i.authorsDelimiter);n=e+i.abbreviateAuthorsString+t}return null!==n&&(n=(0,o.ellipsis)(n,40)),n},w=(e,t,r)=>{if(0!==e.indexOf(r))return!1;const a=e.substring(r.length),i=t.substring(r.length);return/[a-z]/.test(a)===/[a-z]/.test(i)&&/[A-Z]/.test(a)===/[A-Z]/.test(i)&&/\d/.test(a)===/\d/.test(i)};t.isSamePattern=w;t.regenerateCitationKey=async(e,t,r,a,i)=>{let n=[];if("function"==typeof t)n=async e=>{if(e===r)return!1;return await t(e)};else for(const e of t)e!==r&&n.push(e);let o=await A(e,n,a,i);if(i&&/random/i.test(i.deduplicateWith||"")||!a&&!i){const t=await A(e,n,a,{...i,deduplicateWith:"none"});w(r,o,t)&&(o=r)}return o};const P=e=>{const t={...e};return"string"!=typeof t.fallback&&(t.fallback="Unknown"),"string"!=typeof t.replaceWhitespace&&(t.replaceWhitespace="-"),"string"!=typeof t.twoAuthorsDelimiter&&(t.twoAuthorsDelimiter=""),"string"!=typeof t.authorsDelimiter&&(t.authorsDelimiter=""),"string"!=typeof t.abbreviateAuthorsPosition&&(t.abbreviateAuthorsPosition="end"),"string"!=typeof t.abbreviateAuthorsString&&(t.abbreviateAuthorsString=""),"string"!=typeof t.abbreviateFieldsPosition&&(t.abbreviateFieldsPosition="end"),"string"!=typeof t.abbreviateFieldsString&&(t.abbreviateFieldsString=""),"string"!=typeof t.deduplicateWith&&(t.deduplicateWith="random"),"boolean"!=typeof t.useUTF8&&(t.useUTF8=!1),t},S=e=>"string"==typeof e?e:"[Firstauthor][year]-[unique:2]",C=(e,t)=>{const r=[{name:"Pattern",str:e},{name:"Fallback",str:t.fallback},{name:"Combine two authors",str:t.twoAuthorsDelimiter,allowEmpty:!0},{name:"Combine multiple authors",str:t.authorsDelimiter,allowEmpty:!0},{name:"Abbreviate authors",str:t.abbreviateAuthorsString,allowEmpty:!0},{name:"Abbreviate other fields",str:t.abbreviateFieldsString,allowEmpty:!0}];for(let e=0;e<r.length;e+=1){if(!r[e].allowEmpty&&0===r[e].str.length)throw new Error("The pattern cannot be empty");if(/[/\\?]/g.test(r[e].str))throw new Error("The pattern cannot contain ? or \\ or /")}};t.validateCitationKeyConfig=(e,t)=>{const r=P(t),a=S(e);return C(a,r),f(a),!0};const A=async(e,t,r,a)=>{const i=P(a),n=S(r);C(n,i);return await b(e,t,n,i)};t.formatCitationKey=A},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(94),o=r(807),s=r(511);t.default=class{constructor(e,t,r){(0,i.default)(this,"loggerLabel","Sync_Model"),(0,i.default)(this,"changesCache",[]),(0,i.default)(this,"duplicateSyncError",!1),this.db=e,this.general=t,this.logger=r,this.syncInfo={type:null,totalServerChanges:0,totalUploads:0,processedChanges:0}}setSyncInfo(e){this.syncInfo={...this.syncInfo,...e}}async getOplog(){var e;const t=await this.db.getAll("Changes");if(!t.length)return{changes:[],lastTimestamp:void 0};let r=(0,o.sort)(t).asc([e=>e.timestamp]);const a=null===(e=r[r.length-1])||void 0===e?void 0:e.timestamp;return r=n.oplog.preprocess(r),r=n.oplog.preprocessCollections(r),{changes:r,lastTimestamp:a}}async clearOplog(e){await this.db.clearChanges(e)}getChangesBackup(){return this.db.ChangesBackup.toArray()}insertChangesBackupBulk(e){return this.db.ChangesBackup.bulkAdd(e)}clearChangesBackup(){return this.db.ChangesBackup.clear()}async triggerActionsByChange(e){const{getTimestamp:t}=this.general,{type:r,payload:a}=e,i=[],n=[],o=t();if(!["update_pubs","update_attachments"].includes(r))throw new Error("Invalid type provided");for(const e of a){const{_id:t,...a}=e;let l;l="update_pubs"===r?"Library":"Attachments";const c=(0,s.createOplogChange)(l,{...e},"update",o,a),{data:u,...d}=c;i.push(c),n.push(d)}return i.length&&await this.db.addBulk("Changes",n),{changes:i}}async completeOplogData(e){const t=[];for(const a of e){if("remove"===a.action){t.push(a);continue}if("update"===a.action&&(a.push||a.pull)){t.push(a);continue}if(Array.isArray(a.id)){const e=await this.db.getWhere(a.mcollection,"_id",a.id),i={};for(const t of e){var r;if(!t._id)continue;const e=null===(r=a.fields)||void 0===r?void 0:r.reduce((e,r)=>(e[r]=t[r],e),{});i[JSON.stringify(e)]||(i[JSON.stringify(e)]=[]),i[JSON.stringify(e)].push(t._id)}for(const e of Object.keys(i))t.push({...a,id:i[e],data:JSON.parse(e)});continue}const e=await this.db.get(a.mcollection,a.id);if(!e)continue;const i=n.oplog.ignoreFields(e,a.mcollection);if("update"===a.action)if(!a.resync&&a.fields){const e={};for(const t of a.fields)e[t]=i[t];a.data=e}else a.data=i;"insert"===a.action&&(!a.timestamp&&i.created&&(a.timestamp=i.created),a.data=i),t.push(a)}return t}async sanitizeChanges(e){const t=Array.isArray(e)?e:[e];for(const e of t)if("mcollection"in e&&!Array.isArray(e.id)){if("Attachments"===e.mcollection){const t=await this.db.get("Attachments",e.id);if(t){if(e.data={...t},e.fields&&e.fields.length)for(const t of Object.keys(e.data)){var r;e.fields.includes(t)||null===(r=e.data)||void 0===r||delete r[t]}e.data.pub_id=t.pub_id}}if("Library"===e.mcollection&&"remove"!==e.action){const t=await this.db.get("Library",e.id);if(t&&(e.data={...t},e.fields&&e.fields.length))for(const t of Object.keys(e.data)){var a;"__render"===t||e.fields.includes(t)||null===(a=e.data)||void 0===a||delete a[t]}}if("Collections"===e.mcollection&&!e.data&&"remove"!==e.action){const t=await this.db.get("Collections",e.id);if(t&&(e.data={...t},e.fields&&e.fields.length))for(const t of Object.keys(e.data)){var i;e.fields.includes(t)||null===(i=e.data)||void 0===i||delete i[t]}}}return t}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7));t.default=class{constructor(e,t){(0,i.default)(this,"loggerLabel","Jobs_Model"),this.db=e,this.logger=t}async get(e){return this.db.get("Jobs",e)}async getAll(){return this.db.getAll("Jobs")}async insert(e){await this.db.add("Jobs",e)}async insertMany(e){await this.db.addBulk("Jobs",e)}async update(e,t){await this.db.update("Jobs",e,t)}async remove(e){await this.db.remove("Jobs",e)}async count(e){if(e){const t=await this.getAll();return new Promise(r=>{r(t.filter(t=>Object.entries(e).every(e=>{let[r,a]=e;return"currentStatus"!==r?a.includes(t[r]):a.includes(t.status.currentStatus)})).length)})}return this.db.count("Jobs")}async clear(e){if(e){const t=await this.getAll();for(const r of t)e.includes(r.type)&&await this.remove(r._id)}else await this.db.clearStore("Jobs")}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(511);t.default=class{constructor(e,t,r){(0,i.default)(this,"loggerLabel","SharedLibraries_Model"),this.db=e,this.general=t,this.logger=r}async get(e){const t=e?await this.db.getWhere("SharedLibraries","_id",[e]):await this.db.getAll("SharedLibraries");return null==t?void 0:t[0]}async getOwnerId(){const e=await this.db.getAll("Users");if(e[0])return e[0]._id;const t=await this.db.getAll("SharedLibraries");if(t.length>1)throw new Error("Expected up to 1 library, found "+t.length);if(1===t.length)return t[0]._id;const r=await this.db.getAll("Collections"),a=r.reduce((e,t)=>(t._id&&(e[t._id]=!0),e),{});for(const e of r)if(e.owner&&e.cParent&&!(e.cParent in a))return e.owner;throw new Error("Failed to find owner ID")}async update(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{getTimestamp:a}=this.general,i=a(),o=r?(0,n.createOplogChange)("SharedLibraries",{...t,_id:e},"update",i):void 0;return await this.db.update("SharedLibraries",e,{...t},o),{changes:o?[o]:[]}}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7));t.default=class{constructor(e,t,r){(0,i.default)(this,"loggerLabel","Files_Model"),(0,i.default)(this,"insertFileChunksCache",{}),(0,i.default)(this,"updateFileChunksCache",{}),this.db=e,this.general=t,this.logger=r}async get(e){const t=await this.db.get("Files",e);if(t&&t._id)return t}async getChunked(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=await this.get(e);if(!r)return;const a=Math.ceil(r.blob.size/10485760)||1,i=r.blob.slice(10485760*t,10485760*(t+1));return r.blob=i,{file:r,totalChunks:a}}async getURL(e){const t=await this.get(e);if(!t)return;const r=new Blob([t.blob],{type:t["mime-type"]});return URL.createObjectURL(r)}async getStatistics(){const{getLocalSettings:e}=this.general,{fileStatistics:t}=await e();return t||{total:0,size:0}}getFileCount(){return this.db.count("Files")}async getFilesIds(){return(await this.db.getKeys("Files")).map(e=>e.toString())}async insert(e){const{getLocalSettings:t,setLocalSettings:r}=this.general;await this.db.add("Files",e);const a=(await t()).fileStatistics||{total:0,size:0};a.total+=1,a.size+=e.size,await r({fileStatistics:a})}async insertChunk(e,t,r,a){if("its internal only"!==a)throw new Error("really");if(r._id in this.insertFileChunksCache||(this.insertFileChunksCache[r._id]=[]),this.insertFileChunksCache[r._id].length!==e)throw new Error("Unexpected chunkId sent");if(this.insertFileChunksCache[r._id].push(r.blob),this.insertFileChunksCache[r._id].length===t)try{await this.insert({...r,blob:new Blob(this.insertFileChunksCache[r._id])})}finally{delete this.insertFileChunksCache[r._id]}}async update(e,t){await this.db.update("Files",e,t)}async updateChunk(e,t,r,a,i){if("its internal only"!==i)throw new Error("really");if(r in this.updateFileChunksCache||(this.updateFileChunksCache[r]=[]),this.updateFileChunksCache[r].length!==e)throw new Error("Unexpected chunkId sent");if(this.updateFileChunksCache[r].push(a.blob),this.updateFileChunksCache[r].length===t)try{await this.update(r,{...a,blob:new Blob(this.updateFileChunksCache[r])})}finally{delete this.updateFileChunksCache[r]}}async checkIfFileExists(e){const t=await this.db.get("Files",e);return!(!t||!t._id)}async checkExistingFiles(e){const t=await this.db.getPartial("Files",["_id"],e);return e.map(e=>-1!==t.findIndex(t=>t._id&&t._id===e))}async remove(e){const{getLocalSettings:t,setLocalSettings:r}=this.general,a=await this.db.get("Files",e);await this.db.remove("Files",e);const{fileStatistics:i}=await t();i&&a&&(i.total-=1,i.size-=a.size,await r({fileStatistics:i}))}async removeBulk(e){const{getLocalSettings:t,setLocalSettings:r}=this.general,a=(await this.db.getBulk("Files",e)).filter(e=>!!e);await this.db.removeBulk("Files",e);const{fileStatistics:i}=await t();i&&a.length&&(i.total-=a.length,i.size-=a.reduce((e,t)=>e+t.size,0),await r({fileStatistics:i}))}async clear(){const{setLocalSettings:e}=this.general;await this.db.clearStore("Files"),await e({fileStatistics:{total:0,size:0}})}async deleteSyncedFiles(){const{setLocalSettings:e}=this.general,t=(await this.db.getAll("Files")).map(e=>e._id),r=await this.db.getBulk("Attachments",t),a=[],i={total:0,size:0};for(const[e,n]of t.entries()){const t=r[e];!t||null!=t&&t.s3_md5?a.push(n):t&&(i.total+=1,i.size+=t.filesize||0)}await this.removeBulk(a),await e({fileStatistics:i})}async checkIfValidFile(e){if(await this.checkIfFileExists(e))return{pub:void 0,attachment:void 0,result:!0};const t=await this.db.get("Attachments",e);return{pub:t?await this.db.get("Library",t.pub_id):void 0,attachment:t,result:!1}}async insertBlob(e,t){await this.insert({_id:e._id,blob:t,size:t.size,"mime-type":e.mimeType||"application/pdf",md5:e.md5||""})}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(511);t.default=class{constructor(e,t,r){(0,i.default)(this,"loggerLabel","Notes_Model"),this.db=e,this.general=t,this.logger=r}async get(e){return this.db.get("Notes",e)}async getAttachmentNotes(e){return this.db.getWhere("Notes","attachment_id",[e])}async insert(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getTimestamp:r,setCreatedField:a}=this.general,i=r();a(e);const o=t?(0,n.createOplogChange)("Notes",e,"insert",i):void 0;return await this.db.add("Notes",e,o),{changes:o?[o]:[]}}async update(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{getTimestamp:a}=this.general,i=a(),o=r?(0,n.createOplogChange)("Notes",{...t,_id:e},"update",i):void 0;return await this.db.update("Notes",e,{...t},o),{changes:o?[o]:[]}}async remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getTimestamp:r}=this.general,a=r(),i=t?(0,n.createOplogChange)("Notes",{_id:e},"remove",a):void 0;return await this.db.remove("Notes",e,i),{changes:i?[i]:[]}}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(40);t.default=class{constructor(e,t,r,a,n){(0,i.default)(this,"loggerLabel","Permissions_Model"),this.db=e,this.libraryId=t,this.library=r,this.logger=a,this.personalDB=n}async get(){return this.db.getAll("Permissions")}async deletePubsUserLostAccessTo(e){if(this.libraryId===n.personalLibraryId)return;if(!this.personalDB)return;const t=await this.personalDB.getWhereWithOperator("Permissions","[library_id+folder_id]","equals",[this.libraryId,"ROOT"]);if(t&&t.length>0&&t.every(e=>"limited_read"!==(null==e?void 0:e.access_level)))return;const r=await this.db.getBulk("Library",e),a=new Set;for(const e of r)for(const t of(null==e?void 0:e.folders)||[])a.add(t);const i=await this.personalDB.getWhere("Permissions","folder_id",Array.from(a)),o={};for(const e of i)["owner","admin","writer","commenter","reader","cannot_delete"].includes(e.access_level)&&(o[e.folder_id]=!0);const s=[];for(const e of r)e&&e._id&&(e.folders&&e.folders.some(e=>o[e])||s.push(e._id));if(s.length>0){const e=!1;await this.library.removePubs(s,e)}}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(74),o=r(94),s=r(439),l=a(r(960));t.default=class{constructor(e,t){(0,i.default)(this,"loggerLabel","Profiles_Model"),this.db=e,this.logger=t}composeUserProfile(e){return{_id:e._id,google_given_name:e.google_given_name,google_family_name:e.google_family_name,google_name:e.google_name,google_email:e.google_email,google_photo_url:e.google_photo_url,source:"paperpile"}}async get(e,t){if(!e)return this.db.getAll("Profiles");const r=e.filter(e=>!e.includes("@")),a=e.filter(e=>e.includes("@")),i=(await this.db.getAll("Profiles")).filter(e=>e._id&&r.includes(e._id)||a.includes(e.google_email)),s=i.map(e=>e._id),l=new Set(r.filter(e=>!s.includes(e)));if(!l.size)return i;const c=[],[u]=await this.db.Users.toArray();if(u&&l.has(u._id)&&(c.push(this.composeUserProfile(u)),l.delete(u._id)),null!=t&&t.apiQueryHint&&l.size>300){const e=await o.backendApiClient.fetch(`https://api.paperpile.com/api/profiles?${t.apiQueryHint.type}=${t.apiQueryHint.id}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});for(const t of e.json)t._id&&l.has(t._id)&&(c.push(t),l.delete(t._id))}const d=(0,n.chunkArray)([...l],100);for(const e of d){const t=await o.backendApiClient.fetch("https://api.paperpile.com/api/profiles?"+e.map(e=>"user_id="+e).join("&"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});c.push(...t.json)}return await this.downloadProfilesImages(c),await this.db.putBulk("Profiles",c),i.push(...c),i}set(e){return this.db.putBulk("Profiles",e)}async updateCache(e){let t="https://api.paperpile.com/api/profiles";if(e&&(0,s.getKeys)(e).length&&!("googleContacts"in e)){const r=(0,s.getKeys)(e)[0];t+=`?${r}_id=${e[r]}`}else e&&"googleContacts"in e&&(t+="/googleContacts");const r=(await o.backendApiClient.fetch(t,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"})).json,a=await this.db.Profiles.toArray();if(e&&"googleContacts"in e){for(const e of r)e._id=await(0,l.default)(e.google_email);const e=r.map(e=>e._id),t=a.filter(t=>"google"===t.source&&!e.includes(t._id));t.length&&await this.db.Profiles.bulkDelete(t.map(e=>e._id||""))}else{const[e]=await this.db.Users.toArray();e&&r.push(this.composeUserProfile(e));const t=r.map(e=>e._id),i=a.filter(e=>!t.includes(e._id));i.length&&await this.db.Profiles.bulkDelete(i.map(e=>e._id||""))}const i=[];for(const e of r){const t=a.find(t=>t._id===e._id);t&&t.google_photo_url===e.google_photo_url?e.base_64_photo=t.base_64_photo:i.push(e)}i.length&&await this.downloadProfilesImages(i),await this.db.putBulk("Profiles",r)}async clear(e){if(e&&"all"!==e){const t=(await this.db.getAll("Profiles")).filter(t=>t&&t.source===e).map(e=>e._id);await this.db.removeBulk("Profiles",t)}else await this.db.clearStore("Profiles")}async downloadProfilesImages(e){const t=e.slice(0,50).map(e=>this.getProfileImageBase64(e));await Promise.allSettled(t)}async getProfileImageBase64(e){if(!e.google_photo_url)return e;if(/^http/.test(e.google_photo_url))try{const t=await fetch(e.google_photo_url),r=await t.arrayBuffer(),a=this.arrayBufferToBase64(r);e.base_64_photo="data:image/png;base64,"+a}catch(e){}else/^data:image/.test(e.google_photo_url)&&(e.base_64_photo=e.google_photo_url);return e}arrayBufferToBase64(e){let t="";const r=new Uint8Array(e),a=r.byteLength;for(let e=0;e<a;e+=1)t+=String.fromCharCode(r[e]);return btoa(t)}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7));t.default=class{constructor(e,t){(0,i.default)(this,"loggerLabel","Citations_Model"),this.db=e,this.logger=t}async getCitationStyle(e){return this.db.get("CitationStyles",e)}async getCitationStyles(){return this.db.getAll("CitationStyles")}async getCitationLocale(e){return this.db.get("CitationLocales",e)}async getCitationLocales(){return this.db.getAll("CitationLocales")}async insertCitationStyle(e){await this.db.put("CitationStyles",e)}async insertCitationStyleList(e){await this.db.transaction("rw",this.db.CitationStyles,this.db.Changes,async()=>{await this.db.clearStore("CitationStyles"),await this.db.addBulk("CitationStyles",e)})}async insertCitationLocales(e){await this.db.transaction("rw",this.db.CitationLocales,this.db.Changes,async()=>{await this.db.clearStore("CitationLocales"),await this.db.addBulk("CitationLocales",e)})}async removeCitationStyle(e){await this.db.remove("CitationStyles",e)}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(511);t.default=class{constructor(e,t,r){(0,i.default)(this,"loggerLabel","Collections_Model"),this.db=e,this.general=t,this.logger=r}async get(e){return this.db.get("Collections",e)}async getBulk(e){return this.db.getBulk("Collections",e)}async getFolderAndSubfolderIds(e){const t=await this.db.getAll("Collections"),r=[],a=[...e];for(;a.length;){const e=a.shift();if(!e||r.includes(e))continue;r.push(e);const i=t.filter(t=>t.cParent===e);for(const e of i)e._id&&a.push(e._id)}return r}async insert(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getTimestamp:r,setCreatedField:a}=this.general,i=r();a(e);const o=t?(0,n.createOplogChange)("Collections",e,"insert",i):void 0;return await this.db.add("Collections",e,o),{changes:o?[o]:[]}}async insertBulk(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getTimestamp:r,setCreatedField:a}=this.general,i=[];for(const o of e){const e=r();a(o,e),t&&i.push((0,n.createOplogChange)("Collections",o,"insert",e))}return await this.db.addBulk("Collections",e,i),{changes:i}}async update(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{getTimestamp:a}=this.general,i=a();let o;if(r){const{sharing_on:r,...a}=t;Object.keys(a).length&&(o=(0,n.createOplogChange)("Collections",{...a,_id:e},"update",i))}return await this.db.update("Collections",e,{...t},o),{changes:o?[o]:[]}}async preparePushOrPull(e,t,r,a){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const o=[],{getTimestamp:s}=this.general,l={},c=await this.db.getBulk("Library",e),u=[];for(const e of c){if(!e||!e._id)continue;const c=new Set(e[t]?e[t]:[]);l[e._id]||(l[e._id]={push:[],pull:[],original:[]}),l[e._id].original.length||(l[e._id].original=[...e[t]||[]]);for(const i of a){var d,p;"push"!==r||null!==(d=e[t])&&void 0!==d&&d.includes(i)?"pull"===r&&null!==(p=e[t])&&void 0!==p&&p.includes(i)&&(l[e._id].pull.push(i),c.delete(i)):(l[e._id].push.push(i),c.add(i))}const m=[...c];if(e[t]=m,i){const i=(0,n.createOplogChange)("Library",{_id:e._id},"update",s());i.fields=[t],i[r]=a,o.push(i)}u.push(e)}return{changes:(0,n.compactClientChanges)(o),collectionsMap:l,pubs:u}}async pushOrPullPartial(e,t){await this.db.putBulk("Library",e,t)}async pushOrPull(e,t,r,a){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const l=[],{getTimestamp:c}=this.general,u={},d=await this.db.getBulk("Library",e),p=[];for(const e of d){if(!e||!e._id)continue;const i=new Set(e[t]?e[t]:[]);u[e._id]||(u[e._id]={push:[],pull:[],original:[]}),u[e._id].original.length||(u[e._id].original=[...e[t]||[]]);for(const n of a){var m,h;"push"!==r||null!==(m=e[t])&&void 0!==m&&m.includes(n)?"pull"===r&&null!==(h=e[t])&&void 0!==h&&h.includes(n)&&(u[e._id].pull.push(n),i.delete(n)):(u[e._id].push.push(n),i.add(n))}const s=[...i];if(e[t]=s,o){const i=(0,n.createOplogChange)("Library",{_id:e._id},"update",c());i.fields=[t],i[r]=a,l.push(i)}p.push(e)}return!i&&s||await this.db.putBulk("Library",p,l),{changes:l,collectionsMap:u,pubs:p}}async getCollectionsInSelector(e,t){const r=await this.db.getBulk("Library",t),a={};for(const t of r)for(const r of(null==t?void 0:t[e])||[])r in a||(a[r]=0),a[r]+=1;const i={};for(const e of Object.keys(a))i[e]=a[e]===r.length?"checked":"halfChecked";return i}async removeBulk(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getTimestamp:r}=this.general,a=[];for(const i of e){const e=r(),o=t?(0,n.createOplogChange)("Collections",{_id:i},"remove",e):void 0;o&&a.push(o)}return await this.db.removeBulk("Collections",e,a),{changes:a}}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(7)),n=r(511);t.default=class{constructor(e,t,r,a){(0,i.default)(this,"loggerLabel","Attachments_Model"),this.db=e,this.general=t,this.files=r,this.logger=a}async get(e){return this.db.get("Attachments",e)}async getAll(){return this.db.getAll("Attachments")}async insert(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e._id||!e.pub_id)throw new Error("Attachment needs to have both _id and pub_id");const{getTimestamp:r,setCreatedField:a,isPdf:i}=this.general,o=r(),s=[];a(e);const l=t?(0,n.createOplogChange)("Attachments",e,"insert",o):void 0,c=await this.db.get("Library",e.pub_id);if(!c)throw new Error("Attachment needs to linked to a pub");const u=i(e),d=await this.db.getWhere("Attachments","pub_id",[e.pub_id]);let p=!1,m=!1;for(const e of d)i(e)?p=!0:m=!0;await this.db.add("Attachments",e,l);const h={hasPdfs:p,hasAttachments:m,isValidPdf:u};return l&&s.push(l),{changes:s,flags:h,pub:c,data:e}}async insertBulk(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{getTimestamp:a,setCreatedField:i}=this.general,o=a(),s=[];for(const[a,l]of e.entries()){if(!l._id||!l.pub_id)throw new Error("Attachment needs to have both _id and pub_id");let e=o;r&&(e=o+(a+1)/1e3,i(l,e));const c=t?(0,n.createOplogChange)("Attachments",l,"insert",e):void 0;c&&s.push(c)}return await this.db.addBulk("Attachments",e,s),{changes:s}}async createInsertBulkMap(e){const{isPdf:t}=this.general,r=[...new Set(e.map(e=>e.pub_id).filter(e=>!!e))],a=(await this.db.getBulk("Library",r)).filter(e=>!!e),i={},n={};for(const r of e)if(r.pub_id)if(i[r.pub_id]){const e=t(r),{pdfCounts:a,attachmentCounts:n}=i[r.pub_id];(e&&!a||!e&&!n)&&i[r.pub_id].data.push(r)}else{const e=await this.db.getWhere("Attachments","pub_id",[r.pub_id]);n[r.pub_id]&&(n[r.pub_id]=e);const a=t(r),o=e.filter(e=>t(e)).length,s=e.length-o;(a&&!o||!s)&&(i[r.pub_id]={data:[r],pdfCounts:o,attachmentCounts:s,action:"add"})}return{attachmentsMap:i,pubs:a.filter(e=>!!i[e._id])}}async update(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{getTimestamp:a}=this.general,i=a(),o=[];let s=!1;if("article_pdf"in t&&(s=!0,delete t.article_pdf),Object.keys(t).length){const a=r?(0,n.createOplogChange)("Attachments",{...t,_id:e},"update",i):void 0;await this.db.update("Attachments",e,{...t},a);const s=["s3_md5","md5s"],l=Object.keys(t),c=l.reduce((e,t)=>s.includes(t)?e+1:e,0);a&&l.length>c&&o.push(a)}return{changes:o,shouldUpdateArticlePdf:s}}async remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{getTimestamp:r,isPdf:a,isMainPdf:i}=this.general,o=r(),s=[],l=await this.db.Attachments.get(e);if(!l)return{changes:s,shouldUpdateArticlePdf:!1,pub:void 0,filterData:void 0};const c=(await this.db.getAll("Notes")).filter(t=>t.attachment_id===e).map(e=>e._id),u=t?(0,n.createOplogChange)("Attachments",{_id:e},"remove",o,{pub_id:l.pub_id}):void 0,d=await this.db.get("Library",l.pub_id);if(!d||!d._id)throw new Error("Attachment needs to linked to a pub");const p=await this.db.getWhere("Attachments","pub_id",[l.pub_id]),m=a(l),h=p.filter(e=>i(e)).length,g=p.filter(e=>!i(e)&&a(e)).length,f=p.length-g-h,b=m&&h>0&&!g||m&&h>0&&1===g&&!f||!m&&1===f;return await this.db.transaction("rw",this.db.Files,this.db.Notes,this.db.Attachments,this.db.Changes,this.db.LocalSettings,async()=>{await this.files.remove(e),await this.db.removeBulk("Notes",c),await this.db.remove("Attachments",e,u)}),u&&s.push(u),{changes:s,shouldUpdateArticlePdf:!0,pub:d,...b&&{filterData:{pub:d,attachment:l,nMainPdf:h,nSubPdf:g,nAttachments:f}}}}async removeBulk(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{getTimestamp:a,isPdf:i,isMainPdf:o}=this.general,s=a(),l=[],c={},u={},d=(await this.db.getBulk("Attachments",e)).filter(e=>!!e);if(!d.length)return{changes:l,attachmentsMap:c,shouldUpdateArticlePdf:!1,pubs:[]};const p=[...new Set(d.map(e=>e.pub_id))],m=(await this.db.getBulk("Library",p)).filter(e=>!!e),h=(await this.db.getAll("Notes")).filter(t=>e.includes(t.attachment_id)).map(e=>e._id);for(const a of d){if(!a.pub_id)continue;const d=t?(0,n.createOplogChange)("Attachments",a,"remove",s):void 0;if(d&&l.push(d),!r){const t=u[a.pub_id]||await this.db.getWhere("Attachments","pub_id",[a.pub_id]),r=i(a),n=t.filter(e=>o(e)).length,s=t.filter(e=>!o(e)&&i(e)).length,l=t.length-s-n,d=t.filter(t=>!o(t)&&e.includes(t._id)).length,p=r&&n>0&&!s||r&&n>0&&1===s&&!l||!r&&l===d;c[a.pub_id]?p&&c[a.pub_id].data.push(a):(u[a.pub_id]&&(u[a.pub_id]=t),p&&(c[a.pub_id]={data:[a],pdfCounts:n,attachmentCounts:l+s,action:"remove"}))}}return await this.db.transaction("rw",this.db.Files,this.db.Notes,this.db.Attachments,this.db.Changes,this.db.LocalSettings,async()=>{await this.files.removeBulk(e),await this.db.removeBulk("Notes",h),await this.db.removeBulk("Attachments",e,l)}),{changes:l,attachmentsMap:c,shouldUpdateArticlePdf:!1,pubs:m.filter(e=>!!c[e._id])}}async ensureMainPdf(e,t){const{getTimestamp:r,isPdf:a}=this.general,i=r(),o=await this.db.getWhere("Attachments","pub_id",[e]),s=o.filter(e=>!!e.article_pdf),l=[],c={};if(!o.length)return{changes:l,attachmentsMap:c,shouldUpdateFilterMap:!1,pub:void 0};let u,d;s.length?(d=s[0],t&&(u=o.find(e=>e._id===t))):u=o.find(e=>a(e));const p=await this.db.get("Library",e);if(!u||!p)return{changes:l,attachmentsMap:c,shouldUpdateFilterMap:!1,pub:void 0};const m=(0,n.createOplogChange)("Attachments",{article_pdf:1,_id:u._id},"update",i),h=d?(0,n.createOplogChange)("Attachments",{article_pdf:0,_id:d._id},"update",i):void 0;await this.db.update("Attachments",u._id,{article_pdf:1},m),d&&await this.db.update("Attachments",d._id,{article_pdf:0},h),s.length||(c[e]={data:[{...u,article_pdf:1}],pdfCounts:0,attachmentCounts:o.length,action:"add",shouldDecrementAttachmentCounts:o.some(e=>a(e))});const g=!s.length;return m&&l.push(m),h&&l.push(h),{changes:l,attachmentsMap:c,shouldUpdateFilterMap:g,pub:p}}}},function(e,t,r){"use strict";var a=r(2),i=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(7)),o=r(117),s=r(94),l=i(r(93)),c=i(r(54)),u=a(r(139)),d=r(834),p=r(961);const m=async function(){let{userOnly:e=!1,limit:t=15e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=new URLSearchParams({allowDeprecated:"true",limit:t.toString()});e&&r.set("type","custom");const a=await s.backendApiClient.fetch(`${p.baseUrl}/api/styles?${r.toString()}`,{credentials:"include"});return a.json},h=async function(e){let{xml:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=`${p.baseUrl}/api/styles/${e}`;t&&(r=`${r}?${new URLSearchParams({type:"xml"}).toString()}`);const a=await s.backendApiClient.fetch(r,{credentials:"include"});return a.json},g=async()=>{const e=await s.backendApiClient.fetch(p.baseUrl+"/api/locales");return Object.values(e.json.locales)};t.default=class{debugLog(e){this.logger.debug("citation styles",`${this.debugId}: ${e}`)}constructor(e,t){(0,n.default)(this,"hasStylesAndLocales",!1),(0,n.default)(this,"debugId",(0,d.v4)()),this.model=e,this.logger=t}async initialize(){let{forceUpdate:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1;try{if(t=await this.getLock(),t){this.debugLog("Got style list lock");const{citationStylesTimestamp:t}=await this.model.getLocalSettings();return void(e||void 0===t?await this.updateStylesAndLocales():this.debugLog("Already has citation styles list"))}this.debugLog("Waiting for lock release"),await this.waitForLockRelease(),this.debugLog("After lock release");const{citationStylesTimestamp:r}=await this.model.getLocalSettings();void 0===r&&await this.initialize({forceUpdate:e})}catch(e){const{citationStylesTimestamp:t}=await this.model.getLocalSettings();if(void 0===t)throw(0,u.errorToPaperpileError)(e,{key:"styleInitialize"});e instanceof c.default||this.logger.error("citation styles",e)}finally{t&&await this.releaseLock()}}getLock(){return this.model.db.transaction("rw",this.model.db.LocalSettings,this.model.db.Changes,async()=>{const{citationStylesLock:e}=await this.model.getLocalSettings();return!e&&(await this.model.setLocalSettings({citationStylesLock:!0}),!0)})}async waitForLockRelease(){return new Promise(e=>{const t=async()=>{const{citationStylesLock:i}=await this.model.getLocalSettings();if(!i)return clearTimeout(a),void e();r=setTimeout(t,100)};let r=setTimeout(t,100);const a=setTimeout(async()=>{clearTimeout(r),await this.releaseLock(),e()},15e3)})}async releaseLock(){await this.model.setLocalSettings({citationStylesLock:!1}),this.debugLog("Lock released")}async updateStylesAndLocales(){const{citationStylesTimestamp:e}=await this.model.getLocalSettings();if(e){if((await m({limit:0})).timestamp<=e)return void await this.updateUserStyles()}const[t,r]=await Promise.all([m(),g()]);if(null===t.timestamp)throw new Error("Backend returned no styles");const a=(await this.model.getCitationStyles()).filter(e=>o.BackendTypes.CitationStyles.isFullJsonStyle(e)).map(e=>({...e,_outdated:!0})),i=a.reduce((e,t)=>({...e,[t._id]:!0}),{}),n=t.styles[0].filter(e=>!i[e._id]);await Promise.all([this.model.insertCitationStyleList([...n,...a]),this.model.insertCitationLocales(r)]),await this.model.setLocalSettings({citationStylesTimestamp:t.timestamp})}async updateUserStyles(){try{const e=await m({userOnly:!0}),t=(await this.model.getCitationStyles()).filter(e=>o.BackendTypes.CitationStyles.isUserStyleListItem(e)).map(e=>e._id),r=e.styles[0],a=r.map(e=>e._id),i=t.filter(e=>!a.includes(e)).map(e=>this.model.removeCitationStyle(e)),n=r.filter(e=>!t.includes(e._id)).map(e=>this.model.insertCitationStyle(e));await Promise.all(i),await Promise.all(n)}catch(e){throw(0,u.errorToPaperpileError)(e,{key:"styleGetUserStylesLatest"})}}async initializeIfNecessary(){this.hasStylesAndLocales||(await this.initialize(),this.hasStylesAndLocales=!0)}async ensureStylesAndLocales(){await this.getLocaleById("en-US").catch(()=>{})||(await this.initialize(),this.hasStylesAndLocales=!0)}async getStyleById(e){await this.initializeIfNecessary();const t=await s.CSL.convertOldStyleId(e,async e=>void 0!==await this.model.getCitationStyle(e)),r=await this.model.getCitationStyle(t),a=void 0!==r&&o.BackendTypes.CitationStyles.isFullJsonStyle(r)?r:null;if(null!==a&&!a._outdated)return a;try{const e=await h(t);return await this.model.insertCitationStyle(e),e}catch(e){if(null===a)throw e;const{_outdated:t,...r}=a;return r}}async getLocaleById(e){await this.initializeIfNecessary();const t=await this.model.getCitationLocale(e);if(!t)throw new Error(`Locale ${e} not found`);return t}async getStylesList(){try{await this.initializeIfNecessary();const e=await this.model.getCitationStyles(),t=s.CSL.prepareSearchStyleList(e);return this.initialize({forceUpdate:!0}),t}catch(e){if(e instanceof u.default)throw e;throw(0,u.errorToPaperpileError)(e,{key:"styleGetStyles"})}}async getUserStylesList(){try{await this.initializeIfNecessary();const e=await this.model.getCitationStyles();return e.filter(e=>o.BackendTypes.CitationStyles.isUserStyleListItem(e))}catch(e){if(e instanceof u.default)throw e;throw(0,u.errorToPaperpileError)(e,{key:"styleGetUserStyles"})}}async getLocalesList(){try{await this.initializeIfNecessary();return(await this.model.getCitationLocales()).map(e=>({_id:e._id,names:e.names}))}catch(e){throw(0,u.errorToPaperpileError)(e,{key:"styleGetLocales"})}}async insertStyle(e){try{await this.initializeIfNecessary();const t=new FormData;t.append("file",e);const r=await(async e=>(await s.backendApiClient.fetch(p.baseUrl+"/api/styles",{method:"POST",credentials:"include",body:e})).json)(t);return await this.model.insertCitationStyle(r),r}catch(e){const t=e instanceof l.default&&e.extra.msg.startsWith("Style validation failed");throw(0,u.errorToPaperpileError)(e,{key:t?"styleUploadInvalid":"styleUpload"})}}async removeStyleById(e){try{await this.initializeIfNecessary(),await(e=>s.backendApiClient.fetch(`${p.baseUrl}/api/styles/${e}`,{method:"DELETE",credentials:"include"}))(e),await this.model.removeCitationStyle(e)}catch(e){throw(0,u.errorToPaperpileError)(e,{key:"styleDelete"})}}async getLocalesForCiteEngine(e){const t=await this.getLocaleById(e);if(t.primaryDialect===t._id)return[t];return[t,await this.getLocaleById(t.primaryDialect)]}async getUserStyleXML(e){try{const t=await h(e,{xml:!0});if(!("cslxml"in t))throw new Error("cslxml attribute missing in user style: "+e);return t.cslxml}catch(e){throw(0,u.errorToPaperpileError)(e,{key:"styleDownload"})}}async getDefaultStyle(){try{await this.initializeIfNecessary();const e=await this.model.getCitationStyle("pp-chicago-author-date");if(!e)throw new Error("Default style not found");const{_id:t,filename:r,title:a}=e;return{styleId:t,styleFile:r,styleLabel:a}}catch(e){throw(0,u.errorToPaperpileError)(e,{key:"styleGetDefault"})}}}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.progressTypes=void 0;var i=a(r(7)),n=r(834),o=a(r(418)),s=a(r(182));const l=["idb","filtermap","syncUpload","syncDownload"];t.progressTypes=l;t.default=class{constructor(e){(0,i.default)(this,"tasksInProgress",[]),(0,i.default)(this,"state",{displayProgressOverride:!1,tasksInProgress:0,status:{idb:"idle",filtermap:"idle",syncUpload:"idle",syncDownload:"idle"},current:{idb:0,filtermap:0,syncUpload:0,syncDownload:0},total:{idb:0,filtermap:0,syncUpload:0,syncDownload:0}}),(0,i.default)(this,"previousSyncStats",{currentUpload:0,totalDownload:0,totalUpload:0,currentDownload:0}),(0,i.default)(this,"emitter",new s.default),(0,i.default)(this,"emitProgressStateUpdate",(0,o.default)(()=>{const e={...this.state};e.current={...e.current,syncDownload:e.current.syncDownload+this.previousSyncStats.currentDownload,syncUpload:e.current.syncUpload+this.previousSyncStats.currentUpload},e.total={...e.total,syncDownload:e.total.syncDownload+this.previousSyncStats.totalDownload,syncUpload:e.total.syncUpload+this.previousSyncStats.totalUpload},this.emitter.emit("progressStateUpdate",e)},250)),this.logger=e}on(e,t){return this.emitter.on(e,t)}off(e,t){return this.emitter.off(e,t)}handleSyncProgress(e){e.waiting?(this.updateState("syncUpload","running"),this.updateState("syncDownload","running")):e.syncing?(this.updateState("syncUpload","running",e.uploaded,e.totalUploads),this.updateState("syncDownload","running",e.downloaded,e.totalDownloads)):(this.updateState("syncUpload","idle",0,0),this.updateState("syncDownload","idle",0,0))}handleModelProgress(e){e.total&&(e.total.reading&&(this.updateState("idb","running"),this.incrementTotalState("idb",e.total.reading)),e.total.writing&&(this.updateState("idb","running"),this.incrementTotalState("idb",e.total.writing))),e.current&&(e.current.reading&&this.incrementCurrentState("idb",e.current.reading),e.current.writing&&this.incrementCurrentState("idb",e.current.writing))}handleFilterMapProgress(e){e.total&&(e.total.reading&&(this.updateState("filtermap","running"),this.incrementTotalState("filtermap",e.total.reading)),e.total.writing&&(this.updateState("filtermap","running"),this.incrementTotalState("filtermap",e.total.writing))),e.current&&(e.current.reading&&this.incrementCurrentState("filtermap",e.current.reading),e.current.writing&&this.incrementCurrentState("filtermap",e.current.writing))}reset(){this.tasksInProgress=[],this.state={displayProgressOverride:!1,tasksInProgress:0,status:{idb:"idle",filtermap:"idle",syncUpload:"idle",syncDownload:"idle"},current:{idb:0,filtermap:0,syncUpload:0,syncDownload:0},total:{idb:0,filtermap:0,syncUpload:0,syncDownload:0}},this.previousSyncStats={currentUpload:0,totalDownload:0,totalUpload:0,currentDownload:0},this.emitProgressStateUpdate()}async setDisplayProgressOverride(e){this.state.displayProgressOverride!==e&&(this.state.displayProgressOverride=e,this.emitProgressStateUpdate())}async startProgress(){const e=(0,n.v4)();return this.tasksInProgress.push(e),this.state.tasksInProgress+=1,this.emitProgressStateUpdate(),e}async endProgress(e){if(!this.tasksInProgress.includes(e))throw new Error("Unexpected progress token to end");if(this.tasksInProgress.splice(this.tasksInProgress.indexOf(e),1),this.state.tasksInProgress-=1,0===this.state.tasksInProgress&&l.every(e=>"idle"===this.state.status[e])){this.state.displayProgressOverride=!1;for(const e of l)this.state.total[e]=0,this.state.current[e]=0;this.previousSyncStats={currentUpload:0,totalDownload:0,totalUpload:0,currentDownload:0}}this.emitProgressStateUpdate()}updateState(e,t,r,a){if(void 0!==r&&void 0!==a&&r>a)throw new Error(`Unexpected state update, total: ${a}, current: ${r}`);let i=!1;if("syncUpload"===e&&"running"===this.state.status.syncUpload&&"idle"===t&&(this.previousSyncStats.currentUpload+=this.state.current.syncUpload,this.previousSyncStats.totalUpload+=this.state.total.syncUpload),"syncDownload"===e&&"running"===this.state.status.syncDownload&&"idle"===t&&(this.previousSyncStats.currentDownload+=this.state.current.syncDownload,this.previousSyncStats.totalDownload+=this.state.total.syncDownload),this.state.status[e]!==t&&(this.state.status[e]=t,i=!0),void 0!==r&&(this.state.current[e]=r,i=!0),void 0!==a&&(this.state.total[e]=a,i=!0),0===this.state.tasksInProgress&&l.every(e=>"idle"===this.state.status[e])){this.state.displayProgressOverride=!1;for(const e of l)this.state.total[e]=0,this.state.current[e]=0;this.previousSyncStats={currentUpload:0,totalDownload:0,totalUpload:0,currentDownload:0},i=!0}i&&this.emitProgressStateUpdate()}incrementCurrentState(e,t){0!==t&&(this.state.current[e]+=t,this.state.current[e]===this.state.total[e]?this.updateState(e,"idle"):this.updateState(e,"running"),this.emitProgressStateUpdate())}incrementTotalState(e,t){0!==t&&(this.state.total[e]+=t,this.updateState(e,"running"),this.emitProgressStateUpdate())}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"IndexedDBWrapper",{enumerable:!0,get:function(){return i.IndexedDBWrapper}}),Object.defineProperty(t,"CitationStyles",{enumerable:!0,get:function(){return i.CitationStyles}}),t.PUBTYPES_LIST=t.FILTERS_LIST=void 0;var a=r(94),i=r(957);const n=a.FM.filters;t.FILTERS_LIST=n;const o=[...a.FM.pubtypes,...a.FM.subtypes];t.PUBTYPES_LIST=o},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(1384)),n=a(r(1385)),o=a(r(1386)),s=a(r(1387));const l=async e=>{const t=await e.getLocalSettings();return t&&t.migrationsVersion||null},c=e=>{for(const t of e)if(!t.version.match(/^\d{4}-\d{2}-\d{2}/))throw new Error("Invalid migration version!\nExpected YYYY-MM-DD format, can additional incremental (intra-day) counter after DD")};t.default=async function(e){let{personalModel:t,sharedLibrariesModels:r,personalSyncClient:a,sharedLibrariesSyncClients:u}=e,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const p=[n.default,i.default,s.default,o.default,...d].sort((e,t)=>e.version.localeCompare(t.version));c(p);const m=await l(t);if(null===m){const e=p[p.length-1].version;return await t.setLocalSettings({migrationsVersion:e}),{promise:Promise.resolve({total:0,previousVersion:e,newVersion:e})}}const h=p.filter(e=>1===e.version.localeCompare(m));if(0===h.length)return{promise:Promise.resolve({total:0,previousVersion:m,newVersion:m})};const g=async()=>{var e;for(const e of h)await e.fn({personalModel:t,sharedLibrariesModels:r,personalSyncClient:a,sharedLibrariesSyncClients:u});const i=(null===(e=h[h.length-1])||void 0===e?void 0:e.version)||m;return await t.setLocalSettings({migrationsVersion:i}),{total:h.length,previousVersion:m,newVersion:i}};if(h.some(e=>e.isBlocking)){const e=await g();return{promise:Promise.resolve(e)}}return{promise:new Promise((e,t)=>{setTimeout(async()=>{try{const t=await g();e(t)}catch(e){t(e)}},1e4)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={version:"2024-08-22",isBlocking:!1,fn:async e=>{let{personalModel:t,sharedLibrariesModels:r}=e;for(const e of[t,...r])await e.recreateFilterMap()}};t.default=a},function(e,t,r){"use strict";var a=r(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(43));var n={version:"2023-02-13",isBlocking:!1,fn:async e=>{let{personalModel:t,sharedLibrariesModels:r}=e;for(const e of[t,...r]){const t=await e.getAll("Library")||[];for(const e of t)e.__render=i.preRenderPubData(e);await e.putBulk("Library",t)}}};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={version:"2024-05-07",isBlocking:!0,fn:async e=>{let{personalModel:t,personalSyncClient:r}=e;const a=await t.getUser().catch(()=>null);a&&(Object.keys(a).some(e=>e.startsWith("license_"))||await r.sync({resync:!0}))}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={version:"2024-07-15",isBlocking:!1,fn:async e=>{let{personalModel:t,sharedLibrariesModels:r}=e;for(const e of[t,...r]){let t=!1;const r=await e.getAll("Library")||[];for(const n of r){var a,i;if(!n._id)continue;const r=null===(a=n.labels)||void 0===a?void 0:a.filter(e=>e.startsWith("new")),o=null===(i=n.folders)||void 0===i?void 0:i.filter(e=>e.startsWith("new"));r&&r.length>0&&(t=!0,await e.pushOrPullCollections([n._id],"labels","pull",r,[],!1,!0,!1)),o&&o.length>0&&(t=!0,await e.pushOrPullCollections([n._id],"folders","pull",o,[],!1,!0,!1))}t&&await e.recreateFilterMap()}}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const a={chromium_3341703758641437857:{bg:"\u0414\u0430 \u0441\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0438 \u0434\u043e\u0441\u0442\u044a\u043f \u0434\u043e URL \u0430\u0434\u0440\u0435\u0441\u0438\u0442\u0435 \u043d\u0430 \u0444\u0430\u0439\u043b\u043e\u0432\u0435\u0442\u0435",ca:"Permet l'acc\xe9s als URL de fitxer",cs:"Umo\u017enit p\u0159\xedstup k adres\xe1m URL soubor\u016f",da:"Tillad adgang til webadresser p\xe5 filer",de:"Zugriff auf Datei-URLs zulassen",el:"\u039d\u03b1 \u03b5\u03c0\u03b9\u03c4\u03c1\u03ad\u03c0\u03b5\u03c4\u03b1\u03b9 \u03b7 \u03c0\u03c1\u03cc\u03c3\u03b2\u03b1\u03c3\u03b7 \u03c3\u03b5 \u03b4\u03b9\u03b5\u03c5\u03b8\u03cd\u03bd\u03c3\u03b5\u03b9\u03c2 URL \u03b1\u03c1\u03c7\u03b5\u03af\u03c9\u03bd",en:"Allow access to file URLs",es:"Permitir acceso a URL de archivo",es_419:"Permitir acceso a URL de archivo",fa:"\u0627\u062c\u0627\u0632\u0647\u0654 \u062f\u0633\u062a\u0631\u0633\u06cc \u0628\u0647 \u0646\u0634\u0627\u0646\u06cc\u200c\u0647\u0627\u06cc \u0648\u0628 \u0641\u0627\u06cc\u0644",fi:"Salli tiedostojen URL-osoitteiden k\xe4ytt\xf6",fil:"Payagan ang access na mag-file ng mga URL",fr:"Autoriser l'acc\xe8s aux URL de fichier",he:"\u05d4\u05ea\u05e8\u05ea \u05d2\u05d9\u05e9\u05d4 \u05dc\u05db\u05ea\u05d5\u05d1\u05d5\u05ea \u05d0\u05ea\u05e8\u05d9\u05dd \u05e9\u05dc \u05e7\u05d1\u05e6\u05d9\u05dd",hi:"\u092b\u093c\u093e\u0907\u0932 \u0915\u0947 \u092f\u0942\u0906\u0930\u090f\u0932 \u0924\u0915 \u090f\u0915\u094d\u0938\u0947\u0938 \u0926\u0947\u0902",hr:"Dozvoli pristup URL-ovima datoteke",hu:"F\xe1jl URL-ekhez val\xf3 hozz\xe1f\xe9r\xe9s enged\xe9lyez\xe9se",id:"Izinkan akses ke URL file",it:"Consenti l'accesso agli URL dei file",ja:"\u30d5\u30a1\u30a4\u30eb\u306e URL \u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b",ko:"\ud30c\uc77c URL\uc5d0 \ub300\ud55c \uc561\uc138\uc2a4 \ud5c8\uc6a9",lt:"Leisti pasiekti failo URL",lv:"At\u013caut piek\u013cuvi faila vietr\u0101\u017eiem URL",nl:"Toegang tot bestand-URL's toestaan",no:"Tillat tilgang til filnettadresser",pl:"Zezwalaj na dost\u0119p do adres\xf3w URL plik\xf3w",pt_BR:"Permitir acesso a URLs de arquivo",pt_PT:"Permitir acesso a URLs de ficheiro",ro:"Permite accesul la adresele URL de fi\u0219iere",ru:"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0430\u043c",sk:"Povoli\u0165 pr\xedstup k webov\xfdm adres\xe1m s\xfaboru",sl:"Dovoli dostop do URL-jev datoteke",sr:"\u0414\u043e\u0437\u0432\u043e\u043b\u0438 \u043f\u0440\u0438\u0441\u0442\u0443\u043f URL \u0430\u0434\u0440\u0435\u0441\u0430\u043c\u0430 \u0434\u0430\u0442\u043e\u0442\u0435\u043a\u0430",sv:"Till\xe5t \xe5tkomst till webbadresser i filen",th:"\u0e2d\u0e19\u0e38\u0e0d\u0e32\u0e15\u0e43\u0e2b\u0e49\u0e40\u0e02\u0e49\u0e32\u0e16\u0e36\u0e07\u0e44\u0e1f\u0e25\u0e4c URL",tr:"Dosya URL'lerine eri\u015fime izin ver",uk:"\u041d\u0430\u0434\u0430\u0432\u0430\u0442\u0438 \u0434\u043e\u0441\u0442\u0443\u043f \u0434\u043e URL-\u0430\u0434\u0440\u0435\u0441 \u0444\u0430\u0439\u043b\u0443",vi:"Cho ph\xe9p truy c\u1eadp v\xe0o c\xe1c URL c\u1ee7a t\u1ec7p",zh_CN:"\u5141\u8bb8\u8bbf\u95ee\u6587\u4ef6\u7f51\u5740",zh_TW:"\u5141\u8a31\u5b58\u53d6\u6a94\u6848\u7db2\u5740"}};var i=(e,t)=>{const r=t.replace(/-/g,"_");if(a[e]){if(a[e][r])return a[e][r];const t=r.split("_")[0].toLocaleLowerCase();return a[e][t]?a[e][t]:a[e].en}return""};t.default=i},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(1390)),n=r(1400),o=r(1402),s=r(40),l=r(598),c=r(20),u=r(46),d=r(100),p=r(438),m=r(42),h=r(177),g=a(r(29)),f=a(r(47));const b=(e,t)=>{f.default.cs.execute("cite.broadcastProgress",t.tabId,{fn:"updateFormatProgress",args:[{data:e,processorState:t,tabId:t.tabId}]})};var y={"mv3-cite.authorizeWritingPlugin":async()=>{let e=(0,u.getAppsScriptUrl)();e+="?action=authenticate";return chrome.windows.create({url:e,type:"popup",width:800,height:600,left:Math.round(100),top:Math.round(100)},async e=>{var t;const r=null==e||null===(t=e.tabs)||void 0===t?void 0:t[0],a=null==r?void 0:r.id;a&&(0,h.reinject)(a)}),null},"mv3-cite.getTabId":async()=>(0,d.getTabId)(),"mv3-cite.sessionInfoRequest":async()=>await(0,m.getUserFromDb)(),"mv3-cite.docsSendQuery":async e=>{var t;const r=null==e||null===(t=e.args)||void 0===t?void 0:t.args[0],{query:a}=r,i=await(0,m.getUserFromDb)(),n={query:self.PP.Utils.encode({...a,owner:null==i?void 0:i._id})},o=c.PLACK_URL+"/ajax/crud/query",s=`${encodeURIComponent("query")}=${encodeURIComponent(n.query)}`,l=await fetch(o,{credentials:"include",method:"POST",headers:{Accept:"application/json","Content-Type":'application/x-www-form-urlencoded; charset=UTF-8"'},body:s});return await l.json()},"mv3-cite.getCslStyleInfo":async e=>{var t,r;const a=await(0,m.fetchStyleFromApi)(null==e||null===(t=e.args)||void 0===t||null===(r=t.args[0])||void 0===r?void 0:r.id);return a&&a._id&&(a.id=a._id),a},"mv3-cite.cslStyleSearch":async e=>{var t,r;const a=await(0,m.searchStylesFromApi)(null==e||null===(t=e.args)||void 0===t||null===(r=t.args[0])||void 0===r?void 0:r.query),i=null==a?void 0:a.styles[0];if(i&&Array.isArray(i))for(let e=0;e<i.length;e+=1)i[e]._id&&(i[e].id=i[e]._id);return i},"mv3-cite.docsCheckGoogleEmail":async()=>null,"mv3-cite.crawlAndImport":async e=>{var t;const r=null==e||null===(t=e.args)||void 0===t?void 0:t.args[0],a=await(0,m.getUserFromDb)(),i=self.PP.library.Publication.preparePubForImport(r);g.default.debug("utils","Import into library call api 2",i),i.owner=null==a?void 0:a._id;const n={mcollection:"Library",owner:null==a?void 0:a._id,all:!1,refreshFields:null,callback:null,how:null,what:null,action:"insert",reloadLibraryView:!0,data:[i]},o=c.PLACK_URL+"/ajax/crud/query",l={query:self.PP.Utils.encode(n)},u=`${encodeURIComponent("query")}=${encodeURIComponent(l.query)}`;return await fetch(o,{credentials:"include",method:"POST",headers:{Accept:"application/json","Content-Type":'application/x-www-form-urlencoded; charset=UTF-8"'},body:u}),await(0,m.createPublication)(i,s.personalLibraryId),i},"mv3-cite.exportDocReferences":async e=>{var t,r;const a=null==e||null===(t=e.args)||void 0===t?void 0:t.args[0],i=await(0,m.getUserFromDb)(),s={query:self.PP.Utils.encode({action:"list",mcollection:"Citations",owner:null==i?void 0:i._id,what:{document_id:a.docId},limit:500})},l=`${encodeURIComponent("query")}=${encodeURIComponent(s.query)}`,u=c.PLACK_URL+"/ajax/crud/cite",d=await fetch(u,{credentials:"include",method:"POST",headers:{Accept:"application/json","Content-Type":'application/x-www-form-urlencoded; charset=UTF-8"'},body:l}),p=await d.json(),h=null==p||null===(r=p.response)||void 0===r?void 0:r[0];let g=null;if("bibtex"===a.format&&null!=h&&h.data){const e=await(0,m.getUserFromDb)();if(e){const t="string"==typeof e.gdrive_config?JSON.parse(e.gdrive_config):{},r="biblatex"===e.bibtex_dialect,a=r?null==e?void 0:e.biblatex_config:null==e?void 0:e.bibtex_config,i=JSON.parse(a||"{}");g=r?(0,o.writeArray)(null==h?void 0:h.data,i,t):(0,n.writeArray)(null==h?void 0:h.data,i,t)}}else g=self.PP.format.Ris.write(null==h?void 0:h.data);return g},"mv3-cite.setSettings":async e=>{var t;return(0,u.saveSettings)({settings:null==e||null===(t=e.args)||void 0===t?void 0:t.args[0],tabId:e.tabId}),null},"mv3-cite.refreshCitations":async e=>{var t;const r=null==e||null===(t=e.args)||void 0===t?void 0:t.args[0],{docId:a,gdocsTabId:i}=r;let n=`${(0,u.getAppsScriptUrl)()}?server=production&docId=${a}`;i&&(n+="&gdocsTabId="+i);const o={origParams:self.PP.Utils.clone(r),waitingToFinish:!0,authorizing:!1,docId:a,processUrl:n+"&action=processDoc",updateUrl:n+"&action=getStatus",status:{},tabId:0};o.tabId=await(0,d.getTabId)(),b({status:"Loading Paperpile processor...",progress:null},o);setTimeout(async()=>{const e=async()=>{if(chrome.runtime.getPlatformInfo(async e=>{console.log("Platform info:",e)}),!0!==o.authorizing)if(!1!==o.waitingToFinish){try{var t;const e=await fetch(o.updateUrl,{credentials:"include"}),r=await e.json();if(null!=e&&null!==(t=e.statusText)&&void 0!==t&&t.match(/auth-loading-hidden/gi))return;b(r,o)}catch(e){if(e&&e.toString().match(/is not valid JSON/i))return;console.log("Error fetching status:",e);const t={error:"PROCESSING_ERROR",errorMsg:"Network error contacting Google Apps Script",troubleshootingHash:"/h/troubleshooting-google-docs/#formatting-problems",messages:[],showMessages:!1,showLearnMore:!0,showReport:!1};return o.waitingToFinish=!1,void b(t,o)}setTimeout((function(){e()}),50)}else console.log("PROCESSOR FINISHED -- done retrieving status!");else console.log("PROCESSOR AUTHORIZING -- stopping status retrieval")};e()},200),await(async()=>{const e={query:self.PP.Utils.encode({action:"refresh_cited_items",document_id:a})},t=`${encodeURIComponent("query")}=${encodeURIComponent(e.query)}`,r=c.PLACK_URL+"/ajax/crud/query",i=await fetch(r,{credentials:"include",method:"POST",headers:{Accept:"application/json","Content-Type":'application/x-www-form-urlencoded; charset=UTF-8"'},body:t});return await i.json()})();chrome.runtime.getPlatformInfo(async e=>{console.log("Platform info:",e)});const s=await function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e4;return Promise.race([fetch(e,t),new Promise((e,t)=>setTimeout(()=>t(new Error("timeout")),r))])}(o.processUrl,{},6e4);let l,p="";try{p=await s.text(),l=JSON.parse(p)}catch(e){l=e}if(o.waitingToFinish=!1,p&&(p.match(/auth-loading-hidden/gi)||p.match(/match the expected pattern/)||p.match(/support.google.com\/drive\?p=requesting_access/)))return b({error:"NEEDS_AUTHORIZATION"},o),{error:"NEEDS_AUTHORIZATION"};if(p&&p.match(/action not allowed/i)){return b({error:"PROCESSING_ERROR",errorMsg:"Document authentication error &mdash; you may be logged in to the wrong or multiple Google accounts",troubleshootingHash:"/h/troubleshooting-google-docs/#google-accounts",messages:[],showMessages:!1,showLearnMore:!0,showReport:!1},o),null}if(p&&p.match(/document is inaccessible/i)){return b({error:"PROCESSING_ERROR",errorMsg:"Cannot format citations in this document &mdash; if you are working on a .DOCX file save as Google Docs first",troubleshootingHash:"/h/troubleshooting-google-docs/#unconverted-word-files",messages:[],showMessages:!1,showLearnMore:!0,showReport:!1},o),null}if(l&&l.errors&&l.errors.length>0){let e="Formatted document, but with warnings.",t="/h/troubleshooting-google-docs/#formatting-problems";const r=[];let a=!1,i=!0,n=!0,s=!1,c=!1;const u={};l.errors.forEach((function(e){u[e.id]||(u[e.id]=!0,"SERVER_TIMEOUT"===e.id?(r.push("The Paperpile server took too long to respond when formatting your citations."),s=!0):"CITATION_COUNT_MISMATCH"===e.id?r.push("An inconsistency in the number of citations was found. Perhaps the document was modified during processing."):"CITATION_TEXT_MISMATCH"===e.id?r.push("The document text was changed during processing. Formatting results may be inconsistent."):"ERROR_STYLING_CITATION_TEXT"===e.id?(g.default.info("cite",`Error styling citation text. Non-fatal error with message "${e.message}"`),r.push("There was an error styling the text for one of your citations.")):"CITATION_ERROR"===e.id?(g.default.info("cite","Citation processing error (non-fatal to processing, but serious enough to log)"),r.push(["<p>An error occurred when loading one or more of your citations. This may be due to a broken citation link, or an error in the citation processing code used by Paperpile</p>",'<p>Try removing the text "[Citation error]" from the document and re-inserting your citations. Then re-format the document with Paperpile.</p>','<p>If the error persists, contact <a href="mailto:support@paperpile.com">Paperpile support</a> for help.</p>'].join(""))):"FATAL_ERROR"===e.id?c=!0:"UNEXPECTED_APPS_SCRIPT_ERROR"===e.id?(g.default.info("cite","Apps Script error with message:"+e.message),r.push([`A Google Apps Script error occurred with message "${e.message}". Contact Paperpile support to resolve this issue.`].join(""))):e.id?(g.default.info("cite","Unhandled error with ID: "+e.id),r.push([`An unknown error "${e.id}" occurred. Contact Paperpile support to resolve this issue.`].join(""))):r.push(["An unexpected processing error occurred. Contact Paperpile support to resolve this issue."].join("")))})),c&&r.length>0&&r.push("One or more of these errors caused processing to not be completed."),s?(e="Whoops &mdash; an error occurred during processing.",t="/h/troubleshooting-google-docs/#formatting-problems",a=!1,i=!0,n=!0):c?(e="Whoops &mdash; an error occurred during processing.",a=!0,i=!0,n=!0):(a=!0,i=!0,n=!1);const d=self.PP.Array.mapCounts(l.errors,"id"),p=Object.keys(d).join(", ");c?g.default.info("cite","Fatal error(s) were encountered while processing document: "+p):g.default.info("cite","Non-fatal error(s) occurred, but processing completed: "+p);return b({error:"PROCESSING_ERROR",errorMsg:e,messages:r,troubleshootingHash:t,showMessages:a,showLearnMore:i,showReport:n},o),null}if(l&&!l.style_title){g.default.info("cite","Background page received a bad response from Apps Script call");return b({error:"PROCESSING_ERROR",errorMsg:"Whoops &mdash; something went wrong while formatting your document. Please try again or contact support.",troubleshootingHash:"/h/troubleshooting-google-docs/#formatting-problems",messages:[],showMessages:!1,showLearnMore:!0,showReport:!0},o),null}if(void 0===l){g.default.info("cite","Background page received no data response from Apps Script call");return b({error:"PROCESSING_ERROR",errorMsg:"Whoops &mdash; something went wrong while formatting your document. Please try again or contact support.",troubleshootingHash:"/h/troubleshooting-google-docs/#formatting-problems",messages:[],showMessages:!1,showLearnMore:!0,showReport:!0},o),null}let m=l.style_title;m=self.PP.Utils.midEllipsis(m,30,!1);const h={status:`Formatted document with style "${m}"`,progress:1};return b(h,o),h},"mv3-cite.multiSearch":async e=>{var t,r;const a=null==e||null===(t=e.args)||void 0===t||null===(r=t.args)||void 0===r?void 0:r.query,i=await(0,m.getUserFromDb)();if(a){if(/https?:\/\/.+/.test(a)){const e=a.match(/(https?:\/\/\S+\.\S+)/);if(e&&e[0]){let t=null;try{const r=await l.allFunctions.autocomplete.func({data:{pub:{pubtype:"PP_WEBSITE",url:[e[0]]},force:!0}});r&&r.pub&&r.pub.title&&(t=r.pub)}catch(t){g.default.info("Failed to autocomplete: "+e,t)}if(t){const e=[];return t.source={},t.source.quick_result_sort_order=1,t.source.quick_result_status="ready",t.source.quick_result_type="multisearch",t._multiSearchScore=1,self.PP.library.Publication.autoClean(t),t.owner=null==i?void 0:i._id,e.push(t),{searchResults:e}}}}const e=await(0,p.searchGuruByQuery)(a);if(null!=e&&e.hits){const t=[];for(let r=0;r<e.hits.length;r+=1){const a=e.hits[r];a.source={},a.source.quick_result_sort_order=r,a.source.quick_result_status="ready",a.source.quick_result_type="multisearch",a._multiSearchScore=1,self.PP.library.Publication.autoClean(a),a.owner=null==i?void 0:i._id,t.push(a)}return{searchResults:t}}}return{searchResults:[]}},"mv3-cite.makeFlatCopy":async()=>{},"mv3-cite.previewCitationStyle":async e=>{const t=(0,i.default)(self.PP),r=null==e?void 0:e.args.args[0],a=r.styleSettings.locale,{includeDOI:n}=r.styleSettings,o=r.styleFilename;let s="";try{var l;let e=o.replace(".csl","");"apa-7th-edition"===e&&(e="apa7");const r=(0,u.getDefaultPubs)(),i=await(0,m.fetchStyleFromApi)(e),c=await(0,m.fetchLocaleFromApi)(a);let d;try{d=await t({style:i,locales:[c],includeDOI:!!n,resultsType:"byPub",generateSubsequentCitations:!0,trimBibEntries:!1})}catch(e){g.default.info("cite",e)}const p=null===(l=d)||void 0===l?void 0:l.addPublications(r,!0);s=`<span class="pp-style-preview-header">Text citations</span><br/> ${((e,t)=>{let r=[...e];const a={"container-title":{},"collection-title":{},"institution-entire":{},"institution-part":{},nickname:{},number:{},title:{},place:{},hereinafter:{},classic:{},"container-phrase":{},"title-phrase":{}};Array.isArray(r)||(r=[r]);const i=[],n=[];for(let e=0;e<r.length;e+=1){const t=r[e],o=self.PP.format.CSL.write(t,{prefixSuffix:"0192837465"});o?(n.push({id:o.id}),o.abbreviations&&(self.PP.Utils.merge(a,o.abbreviations),delete o.abbreviations),i.push(r[e]._id)):g.default.info("Error converting pub to Citeproc",t)}t.engine.setOutputFormat("paperpile_plain"),t.engine.setAbbreviations("default");let o=t.engine.previewCitationCluster({citationItems:n,properties:{noteIndex:1}},[],[],"html");return o=o.replace(/[^\x00-\x7F]\s/g,""),o})((0,u.getDefaultPubs)(),d)}<br/>`,s+='<span class="pp-style-preview-header">Bibliography</span><br/>',Object.keys(p||{}).forEach(e=>{var t,r;null!=p&&null!==(t=p[e])&&void 0!==t&&null!==(r=t.bibliography)&&void 0!==r&&r[0]&&(s+=p[e].bibliography[0])})}catch(e){return""}return s=s.replace(/(<br\/>)*$/,""),s},"mv3-cite.triggerViewPubs":async e=>{var t,r,a;const i=null==e||null===(t=e.args)||void 0===t||null===(r=t.args)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.ids;if(i){const e=await(0,m.getPub)({id:i[0],libraryId:s.personalLibraryId});e&&(0,u.openPubInWebapp)({pub:e})}return null},"mv3-cite.openTab":async e=>(chrome.tabs.query({active:!0},()=>{var t;chrome.tabs.create(null==e||null===(t=e.args)||void 0===t?void 0:t.args[0])}),null)};t.default=y},function(e,t,r){"use strict";const a=r(1391);e.exports=e=>t=>a(t,e)},function(e,t,r){"use strict";const a=r(1392),i=r(77),{escapeRegex:n}=r(1393),{preprocessPubLowerCaseUrls:o,postProcessLowerCaseUrls:s}=r(1399),l={"container-title":{},"collection-title":{},"institution-entire":{},"institution-part":{},nickname:{},number:{},title:{},place:{},hereinafter:{},classic:{},"container-phrase":{},"title-phrase":{}},c=(e,t,r,a,i)=>{a in l&&i in l[a]&&(t[r][a][i]=l[a][i])};function u(){this.items={},this.locales={}}function d(){this.opts={},this.sys=null,this.engine=null,this._storedStyle=null,this._storedLocale=null,this.resultTypes={byPub:"byPub",byCluster:"byCluster",document:"document",all:"all"},this.defaultOptions={resultsType:this.resultTypes.all,generateSubsequentCitations:!1,trimBibEntries:!0,wrapURLAndDOI:!0}}u.prototype.retrieveLocale=function(e){return this.locales[e]},u.prototype.retrieveItem=function(e){return this.items[e]},u.prototype.addLocale=function(e,t){this.locales[e]=t},u.prototype.newEngine=function(e,t,r){return new a.Engine(this,e,t,r)},u.prototype.getAbbreviation=c,d.prototype.init=async function(e,t){if(this.prevClusters=[],this.opts={...this.defaultOptions,...e},this.PP=t,this.sys||(this.sys=new u,this.sys.getAbbreviation=c),!this.engine||this.engine._storedStyle!==e.style._id||this.engine._storedLocale!==e.locales[0]._id){e.style.conf?this.opts.styleConf=e.style.conf:this.opts.styleConf={};const t="localeFormat"in e?e.localeFormat:"json",r=e.locales[0]._id;await this.loadLocales(e.locales,t),e.style.subsequentEtAl||(this.opts.generateSubsequentCitations=!1),this.engine=this.sys.newEngine(e.style.csljson,r,!0),this._storedStyle=e.style._id,this._storedStyleObj=e.style,this._storedLocale=r}this.engine.opt.development_extensions.wrap_url_and_doi=this.opts.wrapURLAndDOI},d.prototype.loadLocales=async function(e,t){const r=e.map(e=>e._id),a=e.map(e=>e.primaryDialect);for(const e of a)r.includes(e)||console.error("MISSING LOCALE:",e);for(const r of e)this.sys.addLocale(r._id,r[t])},d.prototype.cite=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0;const a=[];let i=!1;if(this.opts.generateSubsequentCitations){for(const t of e)if(a.push(t),t.pubs.length){const e={...t,id:t.id+"_dup"};a.push(e)}i=!0}const{cslPubs:n,cslPubsById:o,cslPubIds:s,cslClusters:l,cslClustersById:c,cslClusterIds:u}=this._convertClusters(i?a:e,r);this.sys.items=o,this.engine.updateItems(s),this.engine.setAbbreviations("default");const d={};if(t&&t.length)for(let e=0;e<t.length;e++){const{clustersPre:r,clustersPost:a,clustersUnchanged:i}=this._prePostUnchanged(t,e,l);for(let r=0;r<i.length;r++){const a=i[r][0],n=c[a],o=r>0?i.slice(0,r):[];if(!this.engine.registry.citationreg.citationById[n.citationID]){const r=this.engine.processCitationCluster(n,o,[]);if(a===t[e]+"_dup"&&r.length>1)for(const e of r[1]){d[l[e[0]].citationID]=e[1]}}}const n=this.engine.processCitationCluster(c[t[e]],r,a);if(n.length>1)for(const e of n[1]){d[l[e[0]].citationID]=e[1]}else console.log("ERROR processing citation: "+JSON.stringify(n,null,2))}else{const e=[];for(const t of l){const r=this.engine.processCitationCluster(t,e,[]);if(r.length>1)for(const e of r[1])d[e[2]]=e[1];else console.log("ERROR processing citation: "+JSON.stringify(r,null,2));e.push([t.citationID,t.properties.noteIndex])}}let p={entry_ids:[]},m=[];const h=this.engine.makeBibliography();h&&([p,m]=h,p.entry_ids=[].concat(...p.entry_ids));const{resultsByCluster:g,resultsByPub:f,docResults:b}=this._processOutput(this.postProcessCitations(d,o,{annotate:!h&&r}),p,this.postProcessBibliographyStrings(m,p.entry_ids,o,{annotate:r}),e);return{resultsByCluster:g,resultsByPub:f,docResults:b}},d.prototype._getOutsideSpanBlocks=function(e){const t={blocks:e.split(/(<\/?[a-z]+[^<>]*>)/).filter(e=>""!==e),idxs:[]};let r=0;for(let e=0;e<t.blocks.length;e+=1)!t.blocks[e].match(/^<\/?[a-z]/)&&t.blocks[e].match(/[a-z\d]/i)&&0===r?t.idxs.push(e):t.blocks[e].match(/^<span/)?r=1:t.blocks[e].match(/^<\/span/)&&(r=0);return t};const p=(e,t,r)=>{if("journal"!==e)return e;if(!t.journalAbbreviation)return"journal";if(t["container-title"]===t["container-title-short"])return"journalfull";const a=e=>e.toLowerCase().replace(/[.,'"\-\u2014]/g,"");return a(r).includes(a(t.journalAbbreviation))?"journal":"journalfull"};d.prototype.annotate=function(e,t){if(!t._annotation)return e;let r=e.replace(/<a href=[^<>]+>/,"");r=r.replace(/<\/a>/,"");const a={};Object.keys(t._annotation).forEach(e=>{const i=p(e,t,r),[n,o]=t._annotation[e].symbols,s=new RegExp(n+" "),l=new RegExp(o);if(""!==n){const t=r.indexOf(n),c=r.indexOf(o);t>-1&&c>-1&&t<c?(r=r.replace(s,`<span class="${i}">`),r=r.replace(l,"</span>"),a[e]=!0):t>-1&&c>-1&&t>c?(r=r.replace(l,`<span class="${i}">`),r=r.replace(s,"</span>"),a[e]=!0):t>-1?r=r.replace(s,`<span class="${i}"></span>`):a[e]=!0}});let i=this._getOutsideSpanBlocks(r);Object.keys(t._annotation).forEach(e=>{const o=t._annotation[e],s=p(e,t,r);if(!a[e]&&-1===["id","type"].indexOf(o.csl)){const e=[];let r=!1;if("string"==typeof t[o.csl]&&e.push(new RegExp(`(.*)(${n(t[o.csl])})(.*)`,"i")),"page"===o.csl){let r=!1;const a=t.page.split(""),i=a.map((e,t)=>{if("-"===e||"\u2013"===e)return r=!0,".*";const i=n(e);return r&&t<a.length-1?i+"?":i});e.push(new RegExp(`(.*)(${i.join("")})(.*)`))}else if(["issued","accessed"].includes(o.csl)&&t[o.csl].literal)e.push(new RegExp(`(.*)(${n(t[o.csl].literal)})(.*)`,"i"));else if(["issued","accessed"].indexOf(o.csl)>-1&&t[o.csl]["date-parts"]&&t[o.csl]["date-parts"][0]){const r=t[o.csl]["date-parts"][0],a=r[0];let i=null;if(r.length>1&&(i=r[1]<10?"month-0"+r[1]:"month-"+r[1]),r[2]){const t=r[2];Object.keys(this.engine.locale).forEach(r=>{if(this.engine.locale[r].terms[i]){const n=this.engine.locale[r].terms[i].short.replace(/\./,"\\.?"),o=this.engine.locale[r].terms[i].long.replace(/\./,"\\.?");e.push(new RegExp(`(.*)(${a},?\\s*${n}\\s+${t}\\s*)(.*)`)),e.push(new RegExp(`(.*)(${a},?\\s*${o}\\s+${t}\\s*)(.*)`)),e.push(new RegExp(`(.*)(${t}\\.?\\s+${n}\\s+${a})(.*)`)),e.push(new RegExp(`(.*)(${t}\\.?\\s+${o}\\s+${a})(.*)`)),e.push(new RegExp(`(.*)(${n}\\s+${t},?\\s*${a})(.*)`)),e.push(new RegExp(`(.*)(${o}\\s+${t},?\\s*${a})(.*)`))}})}r[1]&&Object.keys(this.engine.locale).forEach(t=>{this.engine.locale[t].terms[i]&&(e.push(new RegExp(`(.*)(${this.engine.locale[t].terms[i].short.replace(/\./,"\\.?")}\\s*${a})(.*)`)),e.push(new RegExp(`(.*)(${this.engine.locale[t].terms[i].long.replace(/\./,"\\.?")}\\s*${a})(.*)`)))}),r[0]&&e.push(new RegExp(`(.*)(${a})(.*)`))}i.idxs.forEach(t=>{e.forEach(e=>{i.blocks[t].match(e)&&!r&&(r=!0,i.blocks[t]=i.blocks[t].replace(e,`$1<span class="${s}">$2</span>$3`))})}),i=this._getOutsideSpanBlocks(i.blocks.join(""))}}),i=this._getOutsideSpanBlocks(i.blocks.join("")),i.blocks.forEach((e,t)=>{e.match(/^<span/)&&t+2<i.blocks.length&&i.blocks[t+1].match(/^<\/span/)&&(i.blocks[t+1]="",i.blocks[t+2].match(/[\[(\u201c\u2018]/)?i.blocks[t+2]=i.blocks[t+2].replace(/([^\[(\u201c\u2018]+)(\s*[\[(\u201c\u2018].*)$/,"$1</span>$2"):i.blocks[t+2]=i.blocks[t+2]+"</span>")}),i=this._getOutsideSpanBlocks(i.blocks.join(""));let o=!1;for(i.blocks.forEach((e,t)=>{if(e.match(/^<span class="(author|editor)"/)&&!o&&(o=!0,t>0&&!i.blocks[t-1].match(/^<[a-z]/))){const r=i.blocks[t-1];i.blocks[t-1]=e,i.blocks[t]=r}}),r=i.blocks.join("");r.match(/\s+<\/span/);)r=r.replace(/(.*)(\s+)(<\/span>)(.*)/,"$1$3$2$4");return r},d.prototype._convertClusters=function(e,t){const r=[],a=[],i={},n=[],o=[],s={};let l=0;for(const c of e){const e=[];c.cslItems=c.pubs.map(n=>{let o;n._id in i?o=i[n._id]:(o=this.PP.format.CSL.doWrite(this.preprocessPub(n),{noDataBackup:!0,style_conf:this.opts.styleConf||{},includeDOI:this.opts.includeDOI||!1,annotate:t,lang:this._storedLocale}),o.id=n._id,o._position=l,l++,i[o.id]=o,a.push(o.id),r.push(o)),n._cite_options||(n._cite_options={});const s={id:o.id,"suppress-author":n._cite_options.no_author||!1,prefix:n._cite_options.prefix||"",suffix:n._cite_options.suffix||"",label:n._cite_options.locator_label||"",locator:n._cite_options.locator||""};return e.push(s),s});const u={citationID:c.id,citationItems:e,properties:{noteIndex:c.note_index}};n.push(u),s[c.id]=u,o.push(c.id)}return{cslPubs:r,cslPubIds:a,cslPubsById:i,cslClusters:n,cslClusterIds:o,cslClustersById:s}},d.prototype._preprocessPubByStyle=function(e){const t={};if(["mla8","pp-mla8","modern-language-association-8th-edition"].includes(this._storedStyle)){if(e.title&&!e.booktitle&&!e.journal&&e.title.match(/".*"/i)){const r=e.title.replace(/"(.*?)"/gi,"<i>$1</i>");t.title=r}if(e.edition&&e.edition.match(/edition\w*/i)){const r=e.edition.replace(/edition\w*/gi,"ed.");t.edition=r}}return{...e,...t}},d.prototype.preprocessPub=function(e){return o(this._preprocessPubByStyle(e))},d.prototype.postProcessBibliographyStrings=function(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t.map((t,i)=>{const n=e[i];if(!n)return null;let o=s(n);const l=r[t];return a.annotate&&l&&(o=this.annotate(o,l)),o}).filter(e=>null!==e)};d.prototype.postProcessCitations=function(e,t,r){return Object.entries(e).reduce((e,a)=>{let[i,n]=a,o=s(n);const l=t[(e=>e.replace(/_(base|dup|opt[0-9]+)$/,""))(i)];return r.annotate&&l&&(o=this.annotate(o,l)),{...e,[i]:o}},{})};const m=e=>e.filter(e=>"[NO_PRINTED_FORM]"!==e);d.prototype._processOutput=function(e,t,r,a){const{resultsType:i}=this.opts,n=this.opts.resultsType===this.resultTypes.document||this.opts.resultsType===this.resultTypes.all,o=this.opts.resultsType===this.resultTypes.byCluster||this.opts.resultsType===this.resultTypes.all,s=this.opts.resultsType===this.resultTypes.byPub||this.opts.resultsType===this.resultTypes.all,l=o?{}:null,c=s?{order:t.entry_ids}:null;let u=n?{}:null;if(n&&(u={citations:e,bibliography:{meta:t,entries:r.map(e=>this.trimBibEntry(e))}}),s||o)for(const i of a){const a=i.pubs.map(e=>e._id);if(o){const n=r.filter((e,r)=>!!a.includes(t.entry_ids[r]));l[i.id]={citation:e[i.id],citationSubsequent:e[i.id+"_dup"]||e[i.id],bibliography:n.map(e=>this.trimBibEntry(e)),bibliographyMetadata:t}}if(s)for(const i of a){const a=t.entry_ids.indexOf(i.replace("_base","")),n=Object.keys(e).filter(e=>e.match(i)&&!e.match("_dup"));if(n.sort((function(e,t){if(!e.match(/opt([0-9]*)/)||!t.match(/opt([0-9]*)/))return 0;const r=e.match(/opt([0-9]*)/)[0],a=t.match(/opt([0-9]*)/)[0];return r<a?-1:r>a?1:0})),n.length){let o=[],s=[],l=[],u=!1;for(const t of n){let r=e[t];const a=e[t+"_dup"]||e[t];u?l.length&&(r=r.replace(l[0],l[1])):(u=!0,l=this._getReplacements(r,a,n.length)),o.push(r),s.push(a)}o=m(o),s=m(s),c[i]={citation:o,citationSubsequent:s,bibliography:[this.trimBibEntry(r[a])],bibliographyMetadata:t}}}}return{resultsByCluster:l,resultsByPub:c,docResults:u}},d.prototype._getReplacements=function(e,t,r){const a=[];if(e!==t&&r>1){let r=0,i=0;for(let a=0;a<Math.min(e.length,t.length)&&(r||e.charAt(a)===t.charAt(a)||(r=a),i||e.charAt(e.length-(a+1))===t.charAt(t.length-(a+1))||(i=a),!r||!i);a++);a.push(t.substring(r,t.length-i)),a.push(e.substring(r,e.length-i))}return a},d.prototype.trimBibEntry=function(e){return e?this.opts.trimBibEntries?e.replace(/^\s*<div class="csl-entry">[\s\n\t]*/gm,"").replace(/[\s\n\t]*<\/div>[\s\n\t]*$/m,"").replace(/[\s\n\t]+<\/div>[\s\n\t]*$/,"</div>").replace(/<a href=[^>]+>([^<]+)<\/a>/g,"$1"):e:""},d.prototype._prePostUnchanged=function(e,t,r){const a=e[t],i=[],n=[],o=[];let s=!1;for(let l=0;l<r.length;l++){const c=r[l].citationID,u=[c,r[l].properties.noteIndex];c===a?s=!0:e.indexOf(c)>=t||(s?(n.push(u),o.push(u)):(i.push(u),o.push(u)))}return{clustersPre:i,clustersPost:n,clustersUnchanged:o}},d.prototype.addPublications=function(e,t,r){const a=this.prevClusters||[],n=this.prevResults||{},o=[],s=[];for(const t of e){const e=a.map(e=>e.id).filter(e=>e.match(t._id));if(t._cite_options&&Object.keys(t._cite_options).length){Array.isArray(t._cite_options)||(t._cite_options=[t._cite_options]);const e=i(t);delete e._cite_options,o.push(t._id+"_base"),s.push({id:t._id+"_base",note_index:0,pubs:[e]});let r=0;for(const e of t._cite_options){const a=i(t);a._cite_options=e,o.push(`${t._id}_opt${r}`),s.push({id:`${t._id}_opt${r}`,note_index:0,pubs:[a]}),r++}}else o.push(t._id+"_base"),s.push({id:t._id+"_base",note_index:0,pubs:[t]});const r=e.filter(e=>!o.includes(e));for(const e of r)o.push(e),s.push({id:e,note_index:0,pubs:[]})}const l=[];for(const e of a)o.includes(e.id)||l.push(e);for(const e of s)l.push(e);const{resultsByPub:c}=this.cite(l,o,t);this.prevClusters=l;const u={...n};for(const e of Object.keys(c))"order"===e?u.order=c.order:e in u?(r&&r.origin&&"bibguru"===r.origin?(u[e].citation=u[e].citation||c[e].citation,u[e].citationSubsequent=u[e].citationSubsequent||c[e].citationSubsequent):(u[e].citation=c[e].citation||u[e].citation,u[e].citationSubsequent=c[e].citationSubsequent||u[e].citationSubsequent),u[e].bibliography=c[e].bibliography,u[e].bibliographyMetadata=c[e].bibliographyMetadata):u[e]=c[e];return this.prevResults=u,u},d.prototype.removePublications=function(e){const t=this.prevClusters||[],r=this.prevResults||{},a=[],i=[];for(const r of e){const e=t.map(e=>e.id).filter(e=>e.match(r));for(const t of e)a.push(t),i.push({id:t,note_index:0,pubs:[]})}const n=[];for(const e of t)a.includes(e.id)||n.push(e);for(const e of i)n.push(e);const{resultsByPub:o}=this.cite(n,a);this.prevClusters=n;const s={...r};for(const e of Object.keys(o))"order"===e?s.order=o.order:e in s&&o.order.includes(e)?s[e]={citation:o[e].citation||s[e].citation,citationSubsequent:o[e].citationSubsequent||s[e].citationSubsequent,bibliography:o[e].bibliography,bibliographyMetadata:o[e].bibliographyMetadata}:e in s?delete s[e]:s[e]=o[e];return this.prevResults=s,s},d.prototype.updatePublications=function(e){return this.addPublications(e)};e.exports=async function(e,t){const r=new d;return await r.init(e,t),r}},,function(e,t,r){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isUrlLike=t.getBestLink=t.encodeProxyString=t.decodeProxyString=t.replaceDiacritics=t.stopwords=t.cleanFileName=t.convertHtmlEntitiesToUnicode=t.escapeRegex=t.authorToString=t.replaceOutsideTags=t.renderHighlight=t.mergeURLs=t.makeUniqueArray=t.removeQuotationMarksAndPunctation=t.removeSuffixAndPrefix=t.renderFormatType=t.renderFormatAuthors=t.renderFormatTitle=t.formatAuthorYearJournal=t.getJournalString=t.formatYear=t.getJournalField=t.formatAuthorYearUncleaned=t.formatAuthorYear=t.yearString=t.ellipsis=t.template=t.publicationFormatAuthors=t.publicationFormatAuthorsUncleaned=t.getAuthorType=t.midEllipsis=void 0;const i=r(179),n=r(1394),o=r(964),s=a(r(1395)),l=r(965),c=r(1397);t.midEllipsis=(e,t,r,a)=>{let i=r,n=e,o=a;if(!n)return n;if(t<1)return n;if(void 0===o&&(o=" ... "),n+="",n.length<=t)return n;void 0===i&&(i=!1);const s=i?0:1,l=[];let c=[];const u=n.split(i?"":/\s/);let d=0;for(const e of u){if(d>n.length/2)break;l.push(e),d+=e.length+s}c=c.concat(u.slice(l.length));let p,m=l.join(i?"":" ").length,h=c.join(i?"":" ").length,g=n.length,f=h>m;for(;g>t;)f?(p=c.shift(),p&&(h-=p.length+s)):(p=l.pop(),p&&(m-=p.length+s)),p&&(g-=p.length+s),f=h>m;return`${l.join(i?"":" ")}${o}${c.join(i?"":" ")}`};t.getAuthorType=(e,t)=>{const r=["author","editor","series_editor","contributor","translator"],a=[];for(const i of r){const r=e[i];if(r&&r.length>0&&(a.push(i),"multiple"!==t))break}return(a.length||"multiple"===t)&&(!a.includes("author")||"single"!==t&&t)?1!==a.length||"single"!==t&&t?a:a[0]:"author"};t.publicationFormatAuthorsUncleaned=(e,r)=>{const a=(0,t.getAuthorType)(e,"single");if(a){const i=e[a];if(i){return(0,t.authorToString)(i,r)}return"[No author]"}return"[No author]"};t.publicationFormatAuthors=(e,r)=>{const a=(0,t.getAuthorType)(e,"single");if(a){const i=e[a];if(i){const e=(0,t.authorToString)(i,r);return(0,n.purify)(e,"authorextjs")}return"[No author]"}return"[No author]"};t.template=(e,t)=>e.replace(/\{ *([\w_]+) *\}/g,(e,r)=>{if(void 0===t[r])throw new Error("No value provided for variable "+e);return t[r]});t.ellipsis=function(e,t){let{keepWords:r=!1,ellipsisString:a="..."}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t<=0)throw new Error("ellipsis called with non-positive maxLength: "+t);if(e.length<=t)return e;if(r){const r=e.substr(0,t-2),i=Math.max(r.lastIndexOf(" "),r.lastIndexOf("."),r.lastIndexOf("!"),r.lastIndexOf("?"));if(-1!==i&&i>=t-15)return`${r.substr(0,i)}${a}`}return`${e.substr(0,t-a.length)}${a}`};t.yearString=e=>e.year?e.year.toString():"";t.formatAuthorYear=(e,r)=>{const a={...r}||{};let i;(0,t.getAuthorType)(e)?i=(0,t.publicationFormatAuthors)(e,{etAl:!0,output:"last",includeItalics:!1}):(i=e.title||"[untitled item]",i=(0,l.interconvertString)(i,{format:"nomarkup"}));const o=e.published||{},s=`${i} ${(0,t.yearString)(o)}`,c=a.maxLength||40;return(0,n.purify)((0,t.ellipsis)(s,c),"textonly")};t.formatAuthorYearUncleaned=(e,r)=>{const a={...r}||{};let i;(0,t.getAuthorType)(e)?i=(0,t.publicationFormatAuthorsUncleaned)(e,{etAl:!0,output:"last",includeItalics:!1}):(i=e.title||"[untitled item]",i=(0,l.interconvertString)(i,{format:"nomarkup"}));const n=e.published||{},o=`${i} ${(0,t.yearString)(n)}`,s=a.maxLength||40;return(0,t.ellipsis)(o,s)};t.getJournalField=e=>e.pubtype&&["PP_CONFERENCE_PAPER","PP_BOOK_CHAPTER","PP_WEBSITE"].includes(e.pubtype)?"booktitle":"journal";t.formatYear=e=>{const r=e.published||{},a=(0,t.yearString)(r);return""===a?"[no date]":(0,n.purify)(a,"textonly")};t.getJournalString=e=>{const r=(0,t.getJournalField)(e);let a="";return r&&e[r]&&(a=e[r]||""),a};t.formatAuthorYearJournal=(e,r)=>{let a=r;void 0===a&&(a=!1);const i=(0,t.formatAuthorYear)(e);let o=(0,t.getJournalString)(e),s=i;return o?(a||(o=`<span style="font-style:italic;">${o}</span>`),s+=" - "+o,(0,n.purify)(s,"authorextjs")):(0,n.purify)(s,"textonly")};t.renderFormatTitle=(e,r)=>{const{pubtype:a}=e;let i=e.title||"No title";if("No title"===i){let t={};if(("PP_LETTER"===a||"PP_PERSONAL_COMMUNICATION"===a)&&e.editor&&e.editor.length?[t]=e.editor:"PP_INTERVIEW"===a&&e.author&&e.author.length&&([t]=e.author),t){const e=(e=>e.first&&e.last?`${e.first} ${e.last}`:e.initials&&e.last?`${e.initials} ${e.last}`:e.collective?e.collective:e.last?e.last:void 0)(t);e&&("PP_LETTER"===a&&(i="Letter to "),"PP_PERSONAL_COMMUNICATION"===a&&(i="Personal communication with "),"PP_INTERVIEW"===a&&(i="Interview with "),i+=e)}}i=(0,l.interconvertString)(i,{format:"html"}),i=(0,t.renderHighlight)(i,r);let n="",o="";if(r.includeActions&&e.abstract){n="pp-grid-clickable-title";const t=e.view_state,{openPanel:r}=t;o="abstract"===r?'onlyonclick="true" action="GRID_CLOSE_ABSTRACT"':'onlyonclick="true" action="GRID_OPEN_ABSTRACT"'}let s=e.title?"":"pp-grid-no-title";return"PP_LETTER"!==a&&"PP_PERSONAL_COMMUNICATION"!==a&&"PP_INTERVIEW"!==a||"No title"!==i&&(s=""),[`<div class="pp-grid-title ${s}">`,`<span ${o} class="pp-grid-titletext ${n}">${i}</span>`,"</div>"].join("").replace(/\s+/g," ").replace(/\s+"/g,'"')};t.renderFormatAuthors=(e,r)=>{const a=r,i={prefix:'<span class="pp-author">',suffix:"</span>",delim:", ",output:"display",othersString:"&hellip;"},n={prefix:"",suffix:"",delim:", ",output:"display",othersString:"..."},s={author:[],editor:[],contributor:[],series_editor:[],translator:[]};for(const t of(0,o.getKeys)(s))if(e[t]){const r=e[t];r&&Array.isArray(r)&&(s[t]=r.slice(0,80/6+1>r.length?r.length:80/6+1))}let l,c=(0,t.publicationFormatAuthors)(s,i);const u=(0,t.getAuthorType)(s,"single");if(u){let e=s[u];const r=[];if(e){for(const a of e)if("et al."===a.collective)r.push(a);else{if(""===(0,t.authorToString)(a))continue;r.push(a)}e=r,l=(0,t.authorToString)(e,n);let a=e.length,o=0;for(;l.length>80;){a-=1;const r=e.slice(0,a);o=e.slice(a,e.length).length,l=[(0,t.authorToString)(r,n),o>0?" et al.":""].join(""),c=[(0,t.authorToString)(r,i),o>0?" <i>et al.</i>":""].join("")}}}return"[No author]"===c?"":(a.allowShortStrings=!0,(0,t.renderHighlight)(c,a))};const u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",r=s.default.PP_MISC[t];return e&&e in s.default&&(r=s.default[e][t]),r||""},d={PP_ARTICLE:(e,t,r)=>t?"Research Article"===t?u(e,r):t:u(e,r),PP_THESIS:(e,t,r)=>t||u(e,r)};t.renderFormatType=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US";const a=d[e];return a?a(e,t,r):u(e,r)};t.removeSuffixAndPrefix=(e,r,a)=>{let i=(0,t.removeQuotationMarksAndPunctation)(e,!0);if(r&&(i=i.replace(r,"")),a){const e=(0,t.removeQuotationMarksAndPunctation)(a,!0).replace(/data=[a-zA-Z0-9\s]+/gi,"");i=i.replace(/data=[a-zA-Z0-9\s]+/gi,""),i=i.replace(e,"")}return i};t.removeQuotationMarksAndPunctation=(e,t)=>{const r="[\u2018\u2019\u201b\u201c\u201d\u201e\u201f\xa8\"'`\\-\\(\\[\\{\\)\\]\\}\\.,;:\\?\\!]+";return t?e.replace(new RegExp(""+r,"gi"),""):e.replace(new RegExp("^"+r,"i"),"").replace(new RegExp(r+"$","i"),"")};t.makeUniqueArray=e=>e.filter((e,t,r)=>r.indexOf(e)===t);t.mergeURLs=(e,t)=>{const r=e||[],a=t||[],i={};for(const e of r.concat(a)){const t=e.toLowerCase().replace(/^https?:\/\//,"");t in i||(i[t]=[]),i[t].push(e)}const n=[];for(const e of Object.keys(i)){let t=i[e][0];for(const r of i[e])!t.match(/^https/)&&r.match(/^https/)&&(t=r);n.push(t)}return n};t.renderHighlight=(e,r)=>{const a={...r}||{};let i=e;if(!i)return i;if(!a.searchTerms)return i;const n=a.searchTerms;let o=[];n&&(o=n.split(/\s+/)),o=o.filter(e=>!(!0!==a.allowShortStrings&&e.length<=2)&&!(""===e));for(let e=0;e<o.length;e+=1)o[e]=(0,t.removeQuotationMarksAndPunctation)(o[e]);const s=o.sort((e,t)=>t.length-e.length);let l,c;o=(0,t.makeUniqueArray)(s);for(const e of o)c=e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),l=c.length<=2?new RegExp(`(<\\/?\\w+(\\s+\\w+(\\s*=\\s*("[^"]*"|'[^']*'|\\S+))?)*>)|\\b(${c})\\b`,"ig"):new RegExp(`(<\\/?\\w+(\\s+\\w+(\\s*=\\s*("[^"]*"|'[^']*'|\\S+))?)*>)|(${c})`,"ig"),i=(0,t.replaceOutsideTags)(i,l);return i};t.replaceOutsideTags=(e,t)=>e.replace(t,(e,t,r,a,i,n)=>t||`<span class="pp-grid-highlight">${(n||e).replace(/<\//g,"")}</span>`);t.authorToString=(e,r,a)=>{let i;if(i=void 0===r?{...{prefixWrap:"",suffixWrap:"",prefix:"",suffix:"",delim:",",includeItalics:!0,output:"display",etAl:!1,othersString:"et al."}}:{...r},Array.isArray(e)){if(i.etAl){if(e.length>2){let r=(0,t.authorToString)(e[0],i,a);return i.includeItalics?r+=" <i>et al.</i>":r+=" et al.",r}return e.map(e=>(0,t.authorToString)(e,i,a)).join(" and ")}const r=e.map(e=>(0,t.authorToString)(e,i,a));if(i.prefixWrap&&""!==i.prefixWrap){let t="";for(let n=0;n<r.length;n+=1){const o=a&&!r[n].includes("highlight")?(0,c.matchHighlight)(r[n],a):r[n],s=""+i.prefixWrap.replace("{author}",`"${r[n]}:${(0,c.generateAuthorIndex)(e[n]).id}"`);n<r.length-1?t+=s+o+i.delim+i.suffixWrap+" ":t+=s+o+i.suffixWrap}return t}return r.join(i.delim)}const{first:n}=e,o=e.collective,{last:s}=e,{initials:l}=e,{jr:u}=e,d=e._id,p=[];let m;if(o?"serialize"===i.output||"forDiff"===i.output?p.push(`{${o}}`):"others"===o?p.push(i.othersString):p.push(o):("serialize"===i.output&&(s&&p.push(s),u&&p.push(" "+u),(n||l)&&(p.push(", "),p.push(n||l))),"full"===i.output?(n&&p.push(n),!n&&l&&p.push(l),s&&p.push(s),u&&p.push(u)):"forDiff"===i.output?(n&&p.push(n),!n&&l&&p.push(l),p.push(","),s&&p.push(s),p.push(","),u&&p.push(u)):"display"===i.output?(s&&p.push(s),u&&p.push(u),l&&p.push(l)):"last"===i.output?o?p.push(o):s&&p.push(s):"firstlast"===i.output&&(n&&p.push(n),s&&p.push(s))),m="serialize"===i.output?p.join(""):p.join(" "),"others"===o&&"et al."===i.othersString&&i.prefix&&i.prefix.match(/span/i))m=` <i>${m}</i>`;else{if(i.prefix){const t=a?(0,c.matchHighlight)(m,a):m;m=`${i.prefix.replace("{author}",`"${m}:${(0,c.generateAuthorIndex)(e).id}"`)}${t}`}i.suffix&&(m+=i.suffix)}return d&&(m=m.replace(/{_id}/g,d)),!a||m.includes("pp-grid-highlight")||m.includes("<span")?m:(0,c.matchHighlight)(m,a)};t.escapeRegex=e=>e.replace(/\\/g,"\\\\").replace(/\^/g,"\\^").replace(/\|/g,"\\|").replace(/\$/g,"\\$").replace(/\?/g,"\\?").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\{/g,"\\{").replace(/\}/g,"\\}").replace(/\*/g,"\\*");t.convertHtmlEntitiesToUnicode=e=>(0,i.decode)(e);t.cleanFileName=e=>{const r=e.replace(/[/\\?:|]/g," - ").replace(/[<>*]/g," ").replace(/(\w)(\.\.)(\w)/g,"$1.$3").replace(/"/g,"'").replace(/\s*-\s*$/g,"").replace(/\s*-\s*\./g,".").replace(/(\s*\.)([^.])/g,".$2").replace(/-[- ]*-/g,"-").replace(/-+/g,"-").replace(/ +/g," ").replace(/^\s*/,"").replace(/\s*$/,"");return r.length>150?(0,t.midEllipsis)(r,145,!0):r},t.stopwords={about:1,again:1,all:1,almost:1,also:1,although:1,always:1,among:1,and:1,another:1,any:1,are:1,because:1,been:1,before:1,being:1,between:1,both:1,but:1,can:1,could:1,did:1,does:1,done:1,due:1,during:1,each:1,either:1,enough:1,especially:1,etc:1,for:1,found:1,from:1,further:1,had:1,has:1,have:1,having:1,here:1,how:1,however:1,into:1,its:1,itself:1,just:1,made:1,mainly:1,make:1,may:1,might:1,most:1,mostly:1,must:1,nearly:1,neither:1,nor:1,not:1,obtained:1,often:1,our:1,overall:1,perhaps:1,quite:1,rather:1,really:1,regarding:1,seem:1,seen:1,several:1,should:1,show:1,showed:1,shown:1,shows:1,since:1,some:1,such:1,than:1,that:1,the:1,their:1,theirs:1,them:1,then:1,there:1,therefore:1,these:1,they:1,this:1,those:1,through:1,thus:1,upon:1,use:1,used:1,using:1,various:1,very:1,was:1,were:1,what:1,when:1,which:1,while:1,with:1,within:1,without:1,would:1,"[":1,"]":1,"{":1,"}":1,"(":1,")":1,_:1,$:1,"!":1,"#":1,"^":1,"&":1,"*":1,"'":1,'"':1,":":1,"?":1,".":1,",":1,";":1,"%":1,"|":1,"@":1};const p={A:"A","\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY",B:"B","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B",C:"C","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C",D:"D","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz",E:"E","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E",F:"F","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F",G:"G","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G",H:"H","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H",I:"I","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I",J:"J","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J",K:"K","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K",L:"L","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj",M:"M","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M",N:"N","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj",O:"O","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU",P:"P","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P",Q:"Q","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q",R:"R","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R",S:"S","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S",T:"T","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ",U:"U","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U",V:"V","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY",W:"W","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W",X:"X","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X",Y:"Y","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y",Z:"Z","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z",a:"a","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay",b:"b","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b",c:"c","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c",d:"d","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz",e:"e","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e",f:"f","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f",g:"g","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g",h:"h","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv",i:"i","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i",j:"j","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j",k:"k","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k",l:"l","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj",m:"m","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m",n:"n","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj",o:"o","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo",p:"p","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p",q:"q","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q",r:"r","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r",s:"s","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s",t:"t","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz",u:"u","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u",v:"v","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy",w:"w","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w",x:"x","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x",y:"y","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y",z:"z","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"};t.replaceDiacritics=e=>e.split("").map(e=>p[e]||e).join("");t.decodeProxyString=e=>e.split(/\^/).map(e=>{const t=e.split(/\|/);if(3!==t.length)return null;const[r,a,i]=t;return{name:r,url:a,active:"1"===i}}).filter(e=>null!==e);t.encodeProxyString=e=>e.map(e=>[e.name,e.url,e.active?"1":"0"].join("|")).join("^");t.getBestLink=e=>{if(e.doi)return"https://doi.org/"+e.doi;if(!e.url)return null;if(0===e.url.length)return null;const t=[[],[],[],[],[]];for(const r of e.url){let e=1;(/pubmed.ncbi.nlm.nih.gov\/\d+/i.test(r)||/arxiv\.org\//i.test(r))&&(e=-1),/pdf/i.test(r)?e=3:/10\.\d{4,5}\//.test(r)?e=0:/(\/pmc\/articles\/|scopus|clarivate|ovid)/i.test(r)?e=2:/^https?:\/\/[^/]+\/?$/.test(r)&&(e=4),e>-1&&t[e].push(r)}for(const e of t)if(e[0])return e[0];return null};t.isUrlLike=e=>{if(!e||"string"!=typeof e)return!1;return e.match(/^(www|http|ftp|file|evernote)/i)||e.match(/\.(com|org|net|gov|edu|uk|de)/i)}},function(e,t,r){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.purify=t.escapeHTML=void 0;const i=a(r(210)),n=a(r(77)),o=r(964);let s;"object"==typeof self&&self&&self.document&&(s=i.default);const l={a:!0,abbr:!0,acronym:!0,address:!0,applet:!0,area:!0,article:!0,aside:!0,audio:!0,b:!0,base:!0,basefont:!0,bdi:!0,bdo:!0,big:!0,blockquote:!0,body:!0,br:!0,button:!0,canvas:!0,caption:!0,center:!0,cite:!0,code:!0,col:!0,colgroup:!0,data:!0,datalist:!0,dd:!0,del:!0,details:!0,dfn:!0,dialog:!0,dir:!0,div:!0,dl:!0,dt:!0,em:!0,embed:!0,fieldset:!0,figcaption:!0,figure:!0,font:!0,footer:!0,form:!0,frame:!0,frameset:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,head:!0,header:!0,hr:!0,html:!0,i:!0,iframe:!0,img:!0,input:!0,ins:!0,kbd:!0,label:!0,legend:!0,li:!0,link:!0,main:!0,map:!0,mark:!0,meta:!0,meter:!0,nav:!0,noframes:!0,noscript:!0,object:!0,ol:!0,optgroup:!0,option:!0,output:!0,p:!0,param:!0,picture:!0,pre:!0,progress:!0,q:!0,rp:!0,rt:!0,ruby:!0,s:!0,samp:!0,script:!0,section:!0,select:!0,small:!0,source:!0,span:!0,strike:!0,strong:!0,style:!0,sub:!0,summary:!0,sup:!0,svg:!0,table:!0,tbody:!0,td:!0,template:!0,textarea:!0,tfoot:!0,th:!0,thead:!0,time:!0,title:!0,tr:!0,track:!0,tt:!0,u:!0,ul:!0,var:!0,video:!0,wbr:!0},c={textonly:{ALLOWED_TAGS:[]},authorextjs:{ALLOWED_TAGS:["span"],ALLOWED_ATTR:["class","id","style"]},titlemarkup:{ALLOWED_TAGS:["i","b","sup","sub"],ALLOWED_ATTR:[]},extendedmarkup:{ALLOWED_TAGS:["i","b","sup","sub","span","div","p","img","table","col","colgroup","thead","tbody","tfoot","td","tr","th","h1","h2","h3","h4"]}};t.escapeHTML=(e,t)=>{const r="string"==typeof t?[t]:[...t];let a=e;for(const e of r)'"'===e?a=a.replace(/"/g,"&quot;"):"'"===e?a=a.replace(/'/g,"&#39;"):"<"===e?a=a.replace(/</g,"&lt;"):"<"===e&&(a=a.replace(/>/g,"&gt;"));return a};t.purify=(e,t)=>{let r={};t in c&&(r=c[t]);return u(e,r,(e,t)=>{let r=e;const a=r.split(/(<[a-z\d]+)/i);for(let e=0;e<a.length;e+=1){const t=a[e].match(/^<([a-z\d]+)$/i);t&&t[1]&&!(t[1].toLowerCase()in l)&&(a[e]=a[e].replace(/</g,"&lt;"))}r=a.join("");let i=r;return void 0!==s&&(i=""+s.sanitize(r,t)),i})};const u=(e,t,r)=>{if("string"==typeof e&&r)return r(e,t);if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){const a=[];return e.forEach(e=>{const i=u(e,t,r);a.push(i||{})}),a}const a={};for(const i of(0,o.getKeys)(e)){const n=u(e[i],t,r);n&&(a[i]=n)}return a}return(0,n.default)(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={PP_ARTICLE:{"de-AT":"Artikel in einer Fachzeitschrift","de-CH":"Artikel in einer Fachzeitschrift","de-DE":"Artikel in einer Fachzeitschrift","en-US":"Journal article","es-ES":"Art\xedculo de revista cient\xedfica","fr-FR":"Article de revue scientifique","pt-PT":"Artigo de revista acad\xe9mica (journal)","pt-BR":"Artigo de revista acad\xeamica"},PP_ARTWORK:{"de-AT":"Kunstwerk","de-CH":"Kunstwerk","de-DE":"Kunstwerk","en-US":"Artwork","es-ES":"Obra de arte","fr-FR":"Ouvrages d'art","pt-PT":"Obra de arte","pt-BR":"Obra de arte"},PP_AUDIO:{"de-AT":"Audioaufname","de-CH":"Audioaufname","de-DE":"Audioaufname","en-US":"Audio recording","es-ES":"Grabaci\xf3n de audio","fr-FR":"Enregistrement audio","pt-PT":"Grava\xe7\xe3o de \xe1udio","pt-BR":"Grava\xe7\xe3o de \xe1udio"},PP_BILL:{"de-AT":"Gesetzentwurf","de-CH":"Gesetzentwurf","de-DE":"Gesetzentwurf","en-US":"Bill","es-ES":"Proyecto de ley","fr-FR":"Projet de loi","pt-PT":"Projeto de lei","pt-BR":"Projeto de lei"},PP_BOOK:{"de-AT":"Buch","de-CH":"Buch","de-DE":"Buch","en-US":"Book","es-ES":"Libro","fr-FR":"Livre","pt-PT":"Livro","pt-BR":"Livro"},PP_BOOK_CHAPTER:{"de-AT":"Buchkapitel","de-CH":"Buchkapitel","de-DE":"Buchkapitel","en-US":"Book chapter","es-ES":"Cap\xedtulo de libro","fr-FR":"Chapitre du livre","pt-PT":"Cap\xedtulo de livro","pt-BR":"Cap\xedtulo de livro"},PP_BROADCAST:{"de-AT":"Rundfunk","de-CH":"Rundfunk","de-DE":"Rundfunk","en-US":"Broadcast","es-ES":"Emisi\xf3n","fr-FR":"\xc9mission","pt-PT":"Transmiss\xe3o","pt-BR":"Transmiss\xe3o"},PP_CASE:{"de-AT":"Rechtsfall","de-CH":"Rechtsfall","de-DE":"Rechtsfall","en-US":"Case","es-ES":"Caso","fr-FR":"Cas","pt-PT":"Caso","pt-BR":"Caso"},PP_COMPUTER_PROGRAM:{"de-AT":"Computerprogramm","de-CH":"Computerprogramm","de-DE":"Computerprogramm","en-US":"Computer program","es-ES":"Programa de computadora","fr-FR":"Programme d'ordinateur","pt-PT":"Programa de computador","pt-BR":"Programa de computador"},PP_CONFERENCE_PAPER:{"de-AT":"Beitrag in einem Tagungsband","de-CH":"Beitrag in einem Tagungsband","de-DE":"Beitrag in einem Tagungsband","en-US":"Conference paper","es-ES":"Documento de conferencia","fr-FR":"Document de conf\xe9rence","pt-PT":"Documento de confer\xeancia","pt-BR":"Documento de confer\xeancia"},PP_DATASET:{"de-AT":"Datensatz","de-CH":"Datensatz","de-DE":"Datensatz","en-US":"Dataset","es-ES":"Conjunto de datos","fr-FR":"Ensemble de donn\xe9es","pt-PT":"Conjunto de dados","pt-BR":"Conjunto de dados"},PP_ENCYCLOPEDIA_ARTICLE:{"de-AT":"Enzyklop\xe4die Artikel","de-CH":"Enzyklop\xe4die Artikel","de-DE":"Enzyklop\xe4die Artikel","en-US":"Encyclopedia article","es-ES":"Art\xedculo de enciclopedia","fr-FR":"Article d'encyclop\xe9die","pt-PT":"Artigo de Enciclop\xe9dia","pt-BR":"Artigo de Enciclop\xe9dia"},PP_FIGURE:{"de-AT":"Abbildung","de-CH":"Abbildung","de-DE":"Abbildung","en-US":"Figure","es-ES":"Figura","fr-FR":"Figure","pt-PT":"Figura","pt-BR":"Figura"},PP_GRANT:{"de-AT":"F\xf6rderung","de-CH":"F\xf6rderung","de-DE":"F\xf6rderung","en-US":"Grant","es-ES":"Subvenci\xf3n","fr-FR":"Subvention","pt-PT":"Bolsa","pt-BR":"Bolsa"},PP_INTERVIEW:{"de-AT":"Interview","de-CH":"Interview","de-DE":"Interview","en-US":"Interview","es-ES":"Entrevista","fr-FR":"Entrevue","pt-PT":"Entrevista","pt-BR":"Entrevista"},PP_LETTER:{"de-AT":"Brief","de-CH":"Brief","de-DE":"Brief","en-US":"Letter","es-ES":"Carta","fr-FR":"Lettre","pt-PT":"Carta","pt-BR":"Carta"},PP_MANUAL:{"de-AT":"Handbuch oder Dokumentation","de-CH":"Handbuch oder Dokumentation","de-DE":"Handbuch oder Dokumentation","en-US":"Manual or documentation","es-ES":"Manual o Documentaci\xf3n","fr-FR":"Manuel ou Documentation","pt-PT":"Manual ou Documenta\xe7\xe3o","pt-BR":"Manual ou Documenta\xe7\xe3o"},PP_MANUSCRIPT:{"de-AT":"Archivmaterial","de-CH":"Archivmaterial","de-DE":"Archivmaterial","en-US":"Archival material","es-ES":"Material de archivo","fr-FR":"Mat\xe9riel d'archives","pt-PT":"Material de arquivo","pt-BR":"Material de arquivo"},PP_MAP:{"de-AT":"Karte","de-CH":"Karte","de-DE":"Karte","en-US":"Map","es-ES":"Mapa","fr-FR":"Carte","pt-PT":"Mapa","pt-BR":"Mapa"},PP_MISC:{"de-AT":"Sonstiges","de-CH":"Sonstiges","de-DE":"Sonstiges","en-US":"Miscellaneous","es-ES":"Miscel\xe1neo","fr-FR":"Divers","pt-PT":"Diversos","pt-BR":"Diversos"},PP_NEWS_ARTICLE:{"de-AT":"Nachrichtenartikel","de-CH":"Nachrichtenartikel","de-DE":"Nachrichtenartikel","en-US":"News article","es-ES":"Art\xedculo de noticias","fr-FR":"Article de nouvelles","pt-PT":"Artigo de not\xedcias","pt-BR":"Artigo de not\xedcias"},PP_PATENT:{"de-AT":"Patent","de-CH":"Patent","de-DE":"Patent","en-US":"Patent","es-ES":"Patente","fr-FR":"Brevet","pt-PT":"Patente","pt-BR":"Patente"},PP_PERIODICAL:{"de-AT":"Periodische Ver\xf6ffentlichung","de-CH":"Periodische Ver\xf6ffentlichung","de-DE":"Periodische Ver\xf6ffentlichung","en-US":"Periodical","es-ES":"Publicaci\xf3n peri\xf3dica","fr-FR":"P\xe9riodiques","pt-PT":"Publica\xe7\xe3o peri\xf3dica","pt-BR":"Publica\xe7\xe3o peri\xf3dica"},PP_PERSONAL_COMMUNICATION:{"de-AT":"Pers\xf6nliche Kommunikation","de-CH":"Pers\xf6nliche Kommunikation","de-DE":"Pers\xf6nliche Kommunikation","en-US":"Personal communication","es-ES":"Comunicaci\xf3n personal","fr-FR":"Communication personnelle","pt-PT":"Comunica\xe7\xe3o pessoal","pt-BR":"Comunica\xe7\xe3o pessoal"},PP_PREPRINT:{"de-AT":"Preprint","de-CH":"Preprint","de-DE":"Preprint","en-US":"Preprint","es-ES":"Manuscrito preimpreso","fr-FR":"Manuscrit pr\xe9-imprim\xe9","pt-PT":"Pr\xe9-publica\xe7\xe3o","pt-BR":"Pr\xe9-publica\xe7\xe3o"},PP_PRESENTATION:{"de-AT":"Pr\xe4sentation","de-CH":"Pr\xe4sentation","de-DE":"Pr\xe4sentation","en-US":"Presentation","es-ES":"Presentaci\xf3n","fr-FR":"Pr\xe9sentation","pt-PT":"Apresenta\xe7\xe3o","pt-BR":"Apresenta\xe7\xe3o"},PP_REPORT:{"de-AT":"Bericht","de-CH":"Bericht","de-DE":"Bericht","en-US":"Report","es-ES":"Reporte","fr-FR":"Rapport","pt-PT":"Relat\xf3rio","pt-BR":"Relat\xf3rio"},PP_REVIEW:{"de-AT":"Buch- oder Filmrezension","de-CH":"Buch- oder Filmrezension","de-DE":"Buch- oder Filmrezension","en-US":"Book or film review","es-ES":"Rese\xf1a de libro o pel\xedcula","fr-FR":"Critique de livre ou de film","pt-PT":"Opini\xe3o de livro ou filme","pt-BR":"Resenha de livro ou filme"},PP_SCORE:{"de-AT":"Partitur","de-CH":"Partitur","de-DE":"Partitur","en-US":"Musical score","es-ES":"Partitura","fr-FR":"Partition","pt-PT":"Partitura","pt-BR":"Partitura"},PP_STANDARD:{"de-AT":"Standard","de-CH":"Standard","de-DE":"Standard","en-US":"Standard","es-ES":"Norma","fr-FR":"Norme","pt-PT":"Padr\xe3o","pt-BR":"Padr\xe3o"},PP_STATUTE:{"de-AT":"Gesetz","de-CH":"Gesetz","de-DE":"Gesetz","en-US":"Statute","es-ES":"Estatuto","fr-FR":"Statut","pt-PT":"Estatuto","pt-BR":"Estatuto"},PP_THESIS:{"de-AT":"Abschlussarbeit","de-CH":"Abschlussarbeit","de-DE":"Abschlussarbeit","en-US":"Thesis","es-ES":"Tesis","fr-FR":"Th\xe8se","pt-PT":"Tese","pt-BR":"Tese"},PP_TREATY:{"de-AT":"Vertrag","de-CH":"Vertrag","de-DE":"Vertrag","en-US":"Treaty","es-ES":"Tratado","fr-FR":"Trait\xe9","pt-PT":"Tratado","pt-BR":"Tratado"},PP_UNPUBLISHED:{"de-AT":"Unver\xf6ffentlichtes Arbeit","de-CH":"Unver\xf6ffentlichtes Arbeit","de-DE":"Unver\xf6ffentlichtes Arbeit","en-US":"Unpublished item","es-ES":"Elemento no publicado","fr-FR":"\xc9l\xe9ment non publi\xe9","pt-PT":"Item n\xe3o publicado","pt-BR":"Item n\xe3o publicado"},PP_VIDEO:{"de-AT":"Video oder Film","de-CH":"Video oder Film","de-DE":"Video oder Film","en-US":"Video or film","es-ES":"Video o Pel\xedcula","fr-FR":"Vid\xe9o ou film","pt-PT":"V\xeddeo ou filme","pt-BR":"V\xeddeo ou filme"},PP_WEBSITE:{"de-AT":"Webseite","de-CH":"Webseite","de-DE":"Webseite","en-US":"Website","es-ES":"Sitio web","fr-FR":"Site Internet","pt-PT":"Site da Internet","pt-BR":"Site da Internet"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.alignment=void 0;const a=(e,t)=>{const r=new Array(e);for(let a=0;a<e;a+=1){r[a]=new Array(t);for(let e=0;e<t;e+=1)r[a][e]=0}return r},i=(e,t,r)=>{let a=e.length,i=t.length;const n=[];for(;a>0&&i>0;)switch(r[a][i]){case 0:n.push([e[a-1],null]),a-=1;break;case 1:n.push([null,t[i-1]]),i-=1;break;case 2:n.push([e[a-1],t[i-1]]),a-=1,i-=1}if(0===a&&0!==i)for(;i>0;)n.push([null,t[i-1]]),i-=1;if(0!==a&&0===i)for(;a>0;)n.push([e[a-1],null]),a-=1;return n};t.alignment=(e,t)=>{const r=a(e.length+1,t.length+1),n=a(e.length+1,t.length+1);for(let t=1;t<=e.length;t+=1)n[t][0]=t;for(let e=1;e<=t.length;e+=1)n[0][e]=e;for(let a=1;a<=e.length;a+=1)for(let i=1;i<=t.length;i+=1){const o=1,s=e[a-1].toLowerCase()!==t[i-1].toLowerCase()?2:0,l=n[a-1][i]+o,c=n[a][i-1]+o,u=n[a-1][i-1]+s;let d=c<l?c:l,p=c<l?1:0;u<d&&(d=u,p=2),r[a][i]=p,n[a][i]=d}const o=n[e.length][t.length],s=e.length+t.length;return{score:s>0?1-o/s:1,alignment:i(e,t,r).reverse()}},t.default=t.alignment},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSQLiteFTS5ResultsHighlightRegex=t.snippetHighlightStateMachine=t.snippetHighlightRegex=t.matchHighlight=t.generateJournalIndex=t.generateAuthorIndex=t.formatLookupId=t.normalizeSearchableFields=void 0;const a=r(965),i=r(1398);t.normalizeSearchableFields=(e,t)=>{let r=e;const n=void 0===(null==t?void 0:t.stripOfNonLetterAndNumericCharacters)||t.stripOfNonLetterAndNumericCharacters;return r&&"string"==typeof r?(r=r.replace(/<img\b[^>]*>/gi,""),r=(0,a.interconvertString)(r,{format:"html"}),r=r.replace(/<\/?\s*(i|b|sub|sup)\s*>/g,""),r=r.replace(/\\(textit|textbf|emph)/g,""),r=(0,i.normalizeAndStripOfNonAlphaNumericCharacters)(r,{removeNonAlphaNumericCharacters:n})):r="",r.trim()};t.formatLookupId=e=>""===e.trim()?"":`~${e.trim().replace(/[ .-]/g,"~").toUpperCase()}~`;t.generateAuthorIndex=e=>{var r;if("collective"in e){const r=(0,t.normalizeSearchableFields)(e.collective);return{id:(0,t.formatLookupId)(r),indexLibrary:`${(0,t.formatLookupId)(r)} ${r}`,indexLookup:r}}const a=[],i={initials:(0,t.normalizeSearchableFields)(e.initials),first:(0,t.normalizeSearchableFields)(e.first),last:(0,t.normalizeSearchableFields)(e.last)},n=i.initials?Array.from(i.initials):null,o=i.last,s=null==n?void 0:n[0],l=null==n?void 0:n[1],c=i.first,u=c.split(" ")[0];s&&(a.push(`${s} ${o} ${s}`),l&&(a.push(`${l} ${o} ${s} ${l}`),a.push(`${s}${l} ${o} ${s}${l}`))),a.push(`${c||""} ${o} ${c||""}`.trim()),u!==c&&a.push(`${u||""} ${o} ${u||""}`.trim()),l&&a.push(`${l} ${o}`),(s||l)&&a.push((0,t.formatLookupId)(`${o} ${s||""}${l||""}`));const d=(0,t.formatLookupId)(`${i.first||""} ${i.last}`);a.push(d);const p=(null==c?void 0:c.split(" ").join("~"))||"",m=c&&l&&c===u?"~"+l:"",h=o?"~"+o.split(" ").join("~"):"",g=(null===(r=i.initials)||void 0===r?void 0:r.split("").join("~"))||"";return{id:d.trim(),indexLibrary:a.join(" ").trim(),indexLookup:`${p}${m} ${h} ${g}`.trim()}};t.generateJournalIndex=e=>{const r={full:(0,t.normalizeSearchableFields)(e.full),short:(0,t.normalizeSearchableFields)(e.short)};r.full=r.full.replace(/\./g,""),r.short=r.short.replace(/\./g,"");const a=(0,t.formatLookupId)(r.short);return{id:a.trim(),indexLibrary:`${a} ${r.short} ${r.full}`.trim(),indexLookup:`${r.short} ${r.full}`.trim()}};t.matchHighlight=(e,t)=>{const r=(0,i.normalizeAndStripOfNonAlphaNumericCharacters)(e,{removeNonAlphaNumericCharacters:!1});if(r===e||r.length!==e.length)return r.replace(t,'$2<span class="pp-grid-highlight">$4</span>');let a,n=0;const o='<span class="pp-grid-highlight">'.length+"</span>".length;let s=e;for(;a=t.exec(r);){const e=a.index+o*n,t=a.index+a[4].length+o*n;n+=1;const r=s.split(""),i=a[0].length===a[4].length?0:1;r.splice(e+i,0,'<span class="pp-grid-highlight">'),r.splice(t+i+1,0,"</span>"),s=r.join("")}return s};t.snippetHighlightRegex=e=>e.match(/(?:\S+\s+){0,8}\S*<span class="pp-grid-highlight">(.*?)<\/span>\S*(?:\s+\S+){0,8}/giu);t.snippetHighlightStateMachine=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const r=[];let a=[],i=null;if(!e.match(/<span class="pp-grid-highlight">/))return r;for(const s of e.split(/(<span class="pp-grid-highlight">(?:.*?)<\/span>[^\s]*)/giu))if(s.startsWith('<span class="pp-grid-highlight">'))a&&i&&r.push(i.join(" ")),a?(a.push(s),i=a):(i||(i=[]),i.push(s)),a=[];else{const e=s.trim().split(/\s/g).filter(e=>e.length<100);var n,o;if(e.length>(i?2*t:t))null===(n=i)||void 0===n||n.push(...e.slice(0,t)),null===(o=a)||void 0===o||o.push(...e.slice(-1*t));else i||(i=[]),i.push(s),a=null}return i&&r.push(i.join(" ")),r.map(e=>e.replace(/\s+/g," ").trim())};t.generateSQLiteFTS5ResultsHighlightRegex=e=>{const r=[],a=[];for(const i of e){const e=i.isPhrase?(0,t.normalizeSearchableFields)(i.text,{stripOfNonLetterAndNumericCharacters:!1}).trim().split(/[^\p{L}\p{N}\p{Co}]+/giu).join("[^\\p{L}\\p{N}\\p{Co}]+"):(0,t.normalizeSearchableFields)(i.text,{stripOfNonLetterAndNumericCharacters:!1}).trim().split(/\s+/g).map(e=>e.split(/[^\p{L}\p{N}\p{Co}]+/giu).join("[^\\p{L}\\p{N}\\p{Co}]+")).sort((e,t)=>t.length-e.length).join("|");i.isFullMatch?a.push(e):r.push(e)}const i=a.length>0&&r.length>0?"|(":"",n=a.length>0&&r.length>0?"(":"",o=a.length>0&&r.length>0?")":"",s=a.length>0?"((?=[^\\p{L}\\p{N}\\p{Co}]{1})|$)":"",l=a.length>0&&r.length>0?")":"";return new RegExp(`((([^\\p{L}\\p{N}\\p{Co}]{1})|^)(${r.sort((e,t)=>t.length-e.length).join("|")}${i}${n}${a.join("|")}${o})${s}${l})`,"giu")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shortenURL=t.capitalize=t.normalizeAndStripOfNonAlphaNumericCharacters=t.nonLatinCharacterToLatinMapping=t.getStringByteSize=t.isSentenceCase=t.formatFileSize=t.formatNumber=t.filterElasticStopWords=void 0;const a={a:1,an:1,and:1,are:1,as:1,at:1,be:1,but:1,by:1,for:1,if:1,in:1,into:1,is:1,it:1,no:1,not:1,of:1,on:1,or:1,such:1,that:1,the:1,their:1,then:1,there:1,these:1,they:1,this:1,to:1,was:1,will:1,with:1};t.filterElasticStopWords=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return"";const r=[];for(const i of e.split(/([\s\t\n\r,!?:;.]+)/))i.toLowerCase()in a&&!t.includes(i.toLowerCase())||r.push(i);return r.join("").replace(/\s+/g," ").replace(/^\s+/,"").replace(/[\n\t\r\s]+$/,"")};t.formatNumber=function(e){let{decimals:t=2,decimalPoint:r=".",thousandsSeparator:a=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e<0?"-":"",n=parseInt(Math.abs(e).toFixed(t),10),o=n.toString(),s=o.length>3?o.length%3:0,l=""+(Math.abs(e)-n).toFixed(t),c=l.indexOf(".")+1;return i+(s?`${o.substr(0,s)}${a}`:"")+o.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+a)+(t?`${r}${l.slice(c)}`:"")};t.formatFileSize=function(e){let{spaceCharacter:r=" "}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=1024,i=1024*a,n=1024*i;return e>=n?`${(0,t.formatNumber)(e/n,{decimals:1})}${r}GB`:e>=i?`${(0,t.formatNumber)(e/i,{decimals:1})}${r}MB`:e>=a?`${(0,t.formatNumber)(e/a,{decimals:1})}${r}KB`:`${(0,t.formatNumber)(e,{decimals:0})}${r}bytes`};t.isSentenceCase=e=>{const t=e.replace(/<mark>[^<>]*<\/mark>/g,""),r=/[A-Z]/.test(t),a=/[a-z]/.test(t);if(!r)return/^\d+/.test(t);if(a){if(/^[a-z]+\s/.test(t))return!1;const e=(e=>{const t=/\b(the|a|an|and|or|but|aboard|about|above|across|after|against|along|amid|among|around|as|at|before|behind|below|beneath|beside|besides|between|beyond|but|by|for|from|in|inside|into|like|minus|near|of|off|on|onto|opposite|outside|over|past|per|plus|regarding|since|than|through|to|toward|towards|under|underneath|unlike|until|up|upon|versus|via|with|within|without|v|vs|if)\b/,r=e.split(/[\n\r\t\s]+/).map(e=>e.replace(/^[\u2018\u2019'()[\]{}]/,"").replace(/[\u2018\u2019'()[\]{}]$/,"")),a={lc:0,uc:0,alluc:0,excluded:0};for(let e=0;e<r.length;e+=1)if(/^[A-Z]/.test(r[e])){let t=e>0;e>0&&/[.?!;:]+$/.test(r[e-1])&&(t=!1),t&&(/^[A-Z\d]+$/.test(r[e])?a.alluc+=1:a.uc+=1)}else if(/^[a-z]/.test(r[e])){const i=t.test(r[e]);i||/[A-Z\d]/.test(r[e])||/^(de|du|van)$/.test(r[e])?i&&(a.excluded+=1):a.lc+=1}else{const t=r[e].split(/-/);if(t.length>1)for(let e=1;e<t.length;e+=1)/^[A-Z]/.test(t[e])?a.uc+=1:/^[a-z]/.test(t[e])&&(a.lc+=1)}return a})(t);if(e.uc<=1&&e.excluded+e.lc>0)return!0;if(e.uc<=2&&e.lc>2)return!0}return!1};t.getStringByteSize=e=>/[\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/giu.test(e)?new Blob([e]).size:e.length,t.nonLatinCharacterToLatinMapping={"\u0141":"L","\u0142":"l","\u0131":"i","\xd8":"O","\xf8":"o","\xc6":"AE","\xe6":"ae","\xdf":"ss","\u1e9e":"SS","\xd0":"D","\xde":"TH","\xf0":"d","\xfe":"th"};t.normalizeAndStripOfNonAlphaNumericCharacters=(e,r)=>{const a=void 0===(null==r?void 0:r.removeLetterAccents)||r.removeLetterAccents,i=void 0===(null==r?void 0:r.removeNonAlphaNumericCharacters)||r.removeNonAlphaNumericCharacters;let n=e;return e&&"string"==typeof e?(a&&(n=n.replace(/[\u0141\u0142\u0131\u00d8\u00f8\u00c6\u00e6\u00df\u1e9e\u00d0\u00de\u00f0\u00fe]/g,e=>t.nonLatinCharacterToLatinMapping[e])),n=n.normalize(a?"NFKD":"NFKC"),a&&(n=n.replace(/\p{M}/gu,"")),i&&(n=n.replace(/[^\p{L}\p{N}\p{Co}]/gu," "),n=n.replace(/\s+/g," ")),n.trim()):n};t.capitalize=e=>e.charAt(0).toUpperCase()+e.slice(1);t.shortenURL=(e,t)=>{const r=void 0===t?500:t;let a=e.replace(/#:~:text=.+$/,"");if(a.length>r&&a.indexOf("?")>-1){const e=a.split("?");if(e.length>1){let t=e[1].split("&");for(;a.length>r&&t.length>0;)t=t.slice(0,-1),a=`${e[0]}?${t.join("&")}`}a=a.replace(/\?$/,"").replace(/&$/,"")}return a.length>r&&(a=a.substring(0,r)),a}},function(e,t,r){"use strict";const a=/(\{\s*)?(https?:\/\/)?[a-z.\d-{}]{3,}\.[{}]?(com|org|net|int|edu|gov|at|de|au|uk)(\/\S+)?(\s*\})?/gi,i=/([^{}]*)(\{[^{}]+\})?([^{}]*)/g,n=new RegExp("ppurlpadding","gi"),o=e=>0===e.length?e:`{${e.toLocaleLowerCase()}}`,s=e=>e.length<2?e:`${e[0]}ppurlpadding${o(e.substring(1))}`,l=(e,t)=>e[0]<t[0]&&e[1]>t[1],c=e=>{const t=[...e.matchAll(/\{[^{}]+\}/gi)].map(e=>[e.index,e.index+e[0].length]);return e.replace(a,(function(){const e=arguments.length<=0?void 0:arguments[0],r=arguments.length<=6?void 0:arguments[6],a=[r,r+e.length],n=t.some(e=>l(e,a));return n?e:e.replace(i,(e,t,r,a)=>`${s(t||"")}${r||""}${o(a||"")}`)}))};e.exports={preprocessPubLowerCaseUrls:e=>{const t={...e};for(const e of["title","original_title","booktitle","titleshort"])t[e]&&(t[e]=c(t[e]));return t},postProcessLowerCaseUrls:e=>e.replace(n,"")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeArray=t.default=t.write=t.getFieldMapping=t.getOptions=t.optionalFields=void 0;var a=r(179),i=r(18),n=r(966);const o={abstract:["abstract"],address:["address"],affiliation:["affiliation"],attachments:["file"],author:["author"],archivePrefix:["archivePrefix"],arxivid:["eprint"],booktitle:["booktitle"],chapter:["chapter"],doi:["doi"],edition:["edition"],editor:["editor"],eprint:["eprint"],foldersNamed:["keywords"],howpublished:["howpublished"],institution:["institution"],isbn:["isbn"],isbn_alt:["isbn"],issn:["issn"],issn_alt:["issn"],ismn:["ismn"],issue:["number"],journal:["journal"],keywords:["keywords"],labelsNamed:["keywords"],language:["language"],lccn:["lccn"],mr:["mrnumber"],note:["annote"],number:["number"],organization:["organization"],pages:["pages"],patent_number:["number"],pmid:["pmid"],pmc:["pmc"],primaryClass:["eprintclass"],published:["year","month"],publisher:["publisher"],school:["school"],status:["note"],series:["series"],title:["title"],url:["url"],version:["version"],volume:["volume"]},s=["abstract","address","affiliation","annote","archivePrefix","chapter","doi","edition","eprint","eprintclass","file","howpublished","institution","isbn","issn","ismn","keywords","language","lccn","month","mrnumber","note","number","organization","pages","pmc","pmid","primaryClass","series","translator","url","version","volume","zbl"];t.optionalFields=s;const l=["title","author","editor","translator","affiliation","journal","booktitle","publisher","institution","address","edition","volume","number","pages","abstract","chapter","series","month","year","url","howpublished","note","file","archivePrefix","primaryClass","eprint","keywords","doi","pmc","pmid","lccn","mrnumber","zbl","isbn","issn"],c=(e,t)=>{let r=l.indexOf(e[0]),a=l.indexOf(t[0]);return-1===r&&(r=l.length),-1===a&&(a=l.length),r-a},u=(e,t)=>{const r=e.pubtype||"PP_MISC",a=e.kind||"";let i="MISC";switch(r){case"PP_ARTICLE":case"PP_NEWS_ARTICLE":i="ARTICLE";break;case"PP_BOOK":i="BOOK","Proceedings"===a?i="PROCEEDINGS":"Booklet"===a&&(i="BOOKLET");break;case"PP_ENCYCLOPEDIA_ARTICLE":i="INBOOK";break;case"PP_BOOK_CHAPTER":i="INCOLLECTION";break;case"PP_CONFERENCE_PAPER":i="INPROCEEDINGS";break;case"PP_MANUAL":i="MANUAL";break;case"PP_PREPRINT":i="unpublished"===t?"UNPUBLISHED":"misc"===t?"MISC":"ARTICLE";break;case"PP_UNPUBLISHED":case"PP_MANUSCRIPT":i="UNPUBLISHED";break;case"PP_REPORT":i="TECHREPORT";break;case"PP_THESIS":i="PHDTHESIS","Masters Thesis"===a&&(i="MASTERSTHESIS");break;default:i="MISC"}return i},d=(e,t,r,a)=>{let i=o[e]||[];return"institution"===e&&"MANUAL"===t&&(i=["organization"]),"conference"===e&&"PP_PRESENTATION"===r.pubtype&&(i=["howpublished"]),"publisher"===e&&"PP_STANDARD"===r.pubtype&&(i=["institution"]),"primaryClass"===e&&r.arxivid&&(i=["primaryClass"]),"journal"===e&&r.journal&&"PP_PREPRINT"===r.pubtype&&(i="article"===a?["journal"]:[]),"url"===e&&"PP_WEBSITE"===r.pubtype&&(i=["howpublished"]),"accessed"===e&&"PP_WEBSITE"===r.pubtype&&(i=["note"]),"booktitle"===e&&"PP_DATASET"===r.pubtype&&(i=[]),i},p=(e,t,r,o,s)=>{const l={pubtype:u(e,t.preprint||"article"),citekey:(0,n.getCiteKey)(e),fields:{},conversionError:!1,packages:[]};"MISC"===l.pubtype&&"PP_PERSONAL_COMMUNICATION"===e.pubtype&&(l.fields.howpublished={value:"personal communication",format:!0}),"PP_DATASET"===e.pubtype&&e.booktitle&&(l.fields.note={value:"Title of the publication associated with this dataset: "+(0,i.interconvertString)(e.booktitle,{format:"bibtex"}),format:!0});const c=[...new Set(["isbn","isbn_alt","issn","issn_alt","keywords","foldersNamed","labelsNamed"].concat(Object.keys(e)))];for(const u of c){if(-1===o.indexOf(u))continue;if(void 0===e[u])continue;const c=d(u,l.pubtype,e,t.preprint||"article");for(const o of c){let c=!0,d=!0;if("note"===o||"isbn"===o||"issn"===o||"keywords"===o||!(o in l.fields)){let m=e[u];if("year"===o)m=(0,n.convertYMD)(m.year);else if("month"===o)m=(0,n.convertMonth)(m.month,t.noExport.includes("day")?null:m.day),c=!1;else if("author"===u||"editor"===u||"series_editor"===u||"contributor"===u||"translator"===u)m=(0,n.convertAuthors)(m);else if("title"===u||"booktitle"===u||"shorttitle"===u)m=(0,i.interconvertString)(m,{format:"bibtex"}),t.preserveTitles&&m.length>0&&(m=`{${m}}`);else if("pages"===u)t.doubleDash&&(m=m.replace(/-+/g,"--"));else if("journal"===o)m=t.useFullJournalName?e.journalfull||e.journal:e.journal||e.journalfull;else if("isbn"===o||"issn"===o)l.fields[o]&&m&&(m=`${l.fields[o].value},${m}`);else if("url"===o)[m]=m,d=!1;else if("note"===o)"accessed"===u&&(m=`Accessed: ${(0,n.convertYMD)(m.year)}-${(0,n.convertYMD)(m.month)}-${(0,n.convertYMD)(m.day)}`),l.fields[o]&&(m=`${l.fields[o].value}; ${m}`);else if("howpublished"===o)"url"===u&&(m=`\\url{${m[0]}}`);else if("attachments"===u)m=(0,n.convertFiles)(e,s,r,m),d=!1;else if("keywords"===o){var p;Array.isArray(m)&&(m=m.join(";")),"labelsNamed"!==u&&"foldersNamed"!==u||!t.noExport.includes("folders")||(m=""),m=`${(null===(p=l.fields[o])||void 0===p?void 0:p.value)||""};${m}`.replace(/^;/,"").replace(/\s*;\s*$/,"")}if(m){if(m=m.toString().replace(/[\u2012\u2015]/g,"-"),m=(0,a.decode)(m),c&&d&&(m=(0,n.escapeLatexSpecialChars)(m)),!t.utf8&&"file"!==o){const e=(0,n.convertUnicode2Latex)(m);m=e.str,e.error&&(l.conversionError=!0),l.packages=l.packages.concat(e.packages)}l.fields[o]={value:m,format:c}}}}}return l},m=(e,t,r,a)=>{const i=[];if(0===Object.keys(e.fields).length)return"";e.conversionError&&(i.push("% The entry below contains non-ASCII chars that could not be converted"),i.push("% to a LaTeX equivalent."),i.push("")),i.push(`@${e.pubtype}{${e.citekey},`);for(const[o,s]of Object.entries(e.fields).sort(c)){let e=s.value.toString();"title"===o&&t.smartQuote&&(e=(0,n.smartQuote)(e));let l="quotes";/^\d+$/.test(e)?l="spaces":s.format||(l="spaces"),i.push((0,n.formatField)(o,e,"global"===t.align?a:r,"file"!==o&&t.wrap,t.wrapColumn,"global"===t.align||"block"===t.align,t.indent,l))}return i[i.length-1]=i[i.length-1].replace(/,$/,""),i.push("}\n"),i.join("\n")};t.getOptions=e=>{const t={doubleDash:!1,useFullJournalName:!1,noExport:[],preserveTitles:!1,smartQuote:!1,wrap:!1,wrapColumn:80,indent:2,align:"none",utf8:!1,sort:"none",preprint:"article"};let r=e;if(r.bibtex_config&&"string"==typeof r.bibtex_config&&"{}"!==r.bibtex_config)try{r=JSON.parse(r.bibtex_config)}catch(e){}if("object"==typeof r&&"wrapColumn"in r){if("boolean"==typeof r.doubleDash&&(t.doubleDash=r.doubleDash),"boolean"==typeof r.useFullJournalName&&(t.useFullJournalName=r.useFullJournalName),"boolean"==typeof r.preserveTitles&&(t.preserveTitles=r.preserveTitles),"boolean"==typeof r.smartQuote&&(t.smartQuote=r.smartQuote),"boolean"==typeof r.wrap&&(t.wrap=r.wrap),"string"==typeof r.preprint&&(t.preprint=r.preprint),Array.isArray(r.noExport))for(const e of r.noExport)s.indexOf(e)>-1&&t.noExport.push(e);"number"==typeof r.wrapColumn&&(t.wrapColumn=r.wrapColumn),"number"==typeof r.indent&&(t.indent=r.indent),"block"!==r.align&&"global"!==r.align&&"none"!==r.align||(t.align=r.align),"citekey"!==r.sort&&"created"!==r.sort||(t.sort=r.sort),"boolean"==typeof r.utf8&&(t.utf8=r.utf8)}else if("object"==typeof r){var a,i,n,o,l,c,u,d,p,m,h,g,f,b,y;"1"===(null===(a=r.bibtex_doubleDash)||void 0===a?void 0:a.toString())&&(t.doubleDash=!0),"0"===(null===(i=r.bibtex_exportDay)||void 0===i?void 0:i.toString())&&t.noExport.push("day"),"0"===(null===(n=r.bibtex_exportAbstract)||void 0===n?void 0:n.toString())&&t.noExport.push("abstract"),"0"===(null===(o=r.bibtex_exportAffiliation)||void 0===o?void 0:o.toString())&&t.noExport.push("affiliation"),"0"===(null===(l=r.bibtex_exportFilePath)||void 0===l?void 0:l.toString())&&t.noExport.push("file"),"0"===(null===(c=r.bibtex_exportFoldersLabels)||void 0===c?void 0:c.toString())&&t.noExport.push("folders"),"0"===(null===(u=r.bibtex_exportIdentifiers)||void 0===u?void 0:u.toString())&&t.noExport.push("doi","eprint","issn","isbn","ismn","pmc","pmid","lccn","mrnumber","zbl"),"0"===(null===(d=r.bibtex_exportKeywords)||void 0===d?void 0:d.toString())&&t.noExport.push("keywords"),"0"===(null===(p=r.bibtex_exportNotes)||void 0===p?void 0:p.toString())&&t.noExport.push("annote"),"0"===(null===(m=r.bibtex_exportUrls)||void 0===m?void 0:m.toString())&&t.noExport.push("url"),"1"===(null===(h=r.bibtex_escapeUTF8)||void 0===h?void 0:h.toString())&&(t.utf8=!0),"1"===(null===(g=r.bibtex_preserveTitles)||void 0===g?void 0:g.toString())&&(t.preserveTitles=!0),"1"===(null===(f=r.bibtex_prettyPrint)||void 0===f?void 0:f.toString())&&(t.align="block",t.wrap=!0),"1"===(null===(b=r.bibtex_smartQuote)||void 0===b?void 0:b.toString())&&(t.smartQuote=!0),"1"===(null===(y=r.bibtex_useFullJournalName)||void 0===y?void 0:y.toString())&&(t.useFullJournalName=!0)}return t};t.getFieldMapping=(e,t)=>{const r=(0,n.getValidFields)(e.pubtype||"PP_MISC",{}),a={};for(const i of Object.keys(e)){if(-1===r.indexOf(i))continue;const n=d(i,u(e,t||"article"),e,t||"article");n[0]&&([a[i]]=n)}return a};t.default=t.write=function(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return h(e,t,r,a).join("\n")};t.writeArray=function(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return h(e,t,r,a)};const h=(e,t,r,a)=>{const i={},o=[],s=[];let l=[];for(const c of(0,n.sortPubs)(e,t.sort)){let e=0;const u=(0,n.removeNonSupportedFields)(p(c,t,r||{},(0,n.getValidFields)(c.pubtype||"PP_MISC",i),a),t);for(const t of Object.keys(u.fields))e=Math.max(e,t.length);s.push(e),l=l.concat(u.packages),o.push(u)}const c=Math.max(...s),u=[];if(l.length>0){let e="% Use the LaTeX commands listed below in your .tex file\n";for(const t of[...new Set(l)])e+=`% \\usepackage{${t}}\n`;u.push(e)}for(let e=0;e<o.length;e+=1)u.push(m(o[e],t,s[e],c));return u}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=new Map([["007c",{m:{c:"\\vert{}"},t:{c:"|",w:!1}}],["00a1",{t:{c:"\\textexclamdown{}",w:!1}}],["00a2",{t:{c:"\\textcent{}",w:!1}}],["00a3",{m:{c:"\\pounds{}"},t:{c:"\\textsterling{}",w:!1}}],["00a4",{t:{c:"\\textcurrency{}",w:!1}}],["00a5",{t:{c:"\\textyen{}",w:!1}}],["00a6",{t:{c:"\\textbrokenbar{}",w:!1}}],["00a7",{t:{c:"\\textsection{}",w:!1}}],["00a8",{t:{c:"\\textasciidieresis{}",w:!1}}],["00a9",{t:{c:"\\textcopyright{}",w:!1}}],["00aa",{t:{c:"\\textordfeminine{}",w:!1}}],["00ab",{t:{c:"\\guillemotleft{}",w:!1}}],["00ac",{m:{c:"\\lnot{}"}}],["00ad",{t:{c:"\\-",w:!1}}],["00ae",{t:{c:"\\textregistered{}",w:!1}}],["00af",{t:{c:"\\textasciimacron{}",w:!1}}],["00b0",{t:{c:"\\textdegree{}",w:!1}}],["00b1",{m:{c:"\\pm{}"}}],["00b2",{m:{c:"^2"}}],["00b3",{m:{c:"^3"}}],["00b4",{t:{c:"\\textasciiacute{}",w:!1}}],["00b5",{m:{c:"\\mathrm{\\mu}"}}],["00b6",{t:{c:"\\textparagraph{}",w:!1}}],["00b7",{m:{c:"\\cdot{}"}}],["00b8",{t:{c:"\\c{}",w:!1}}],["00b9",{m:{c:"^1"}}],["00ba",{t:{c:"\\textordmasculine{}",w:!1}}],["00bb",{t:{c:"\\guillemotright{}",w:!1}}],["00bc",{t:{c:"\\textonequarter{}",w:!1}}],["00bd",{t:{c:"\\textonehalf{}",w:!1}}],["00be",{t:{c:"\\textthreequarters{}",w:!1}}],["00bf",{t:{c:"\\textquestiondown{}",w:!1}}],["00c0",{t:{c:"\\`{A}",w:!0}}],["00c1",{t:{c:"\\'{A}",w:!0}}],["00c2",{t:{c:"\\^{A}",w:!0}}],["00c3",{t:{c:"\\~{A}",w:!0}}],["00c4",{t:{c:'\\"{A}',w:!0}}],["00c5",{t:{c:"\\AA{}",w:!1}}],["00c6",{t:{c:"\\AE{}",w:!1}}],["00c7",{t:{c:"\\c{C}",w:!1}}],["00c8",{t:{c:"\\`{E}",w:!0}}],["00c9",{t:{c:"\\'{E}",w:!0}}],["00ca",{t:{c:"\\^{E}",w:!0}}],["00cb",{t:{c:'\\"{E}',w:!0}}],["00cc",{t:{c:"\\`{I}",w:!0}}],["00cd",{t:{c:"\\'{I}",w:!0}}],["00ce",{t:{c:"\\^{I}",w:!0}}],["00cf",{t:{c:'\\"{I}',w:!0}}],["00d0",{t:{c:"\\DH{}",w:!1}}],["00d1",{t:{c:"\\~{N}",w:!0}}],["00d2",{t:{c:"\\`{O}",w:!0}}],["00d3",{t:{c:"\\'{O}",w:!0}}],["00d4",{t:{c:"\\^{O}",w:!0}}],["00d5",{t:{c:"\\~{O}",w:!0}}],["00d6",{t:{c:'\\"{O}',w:!0}}],["00d7",{t:{c:"\\texttimes{}",w:!1}}],["00d8",{t:{c:"\\O{}",w:!1}}],["00d9",{t:{c:"\\`{U}",w:!0}}],["00da",{t:{c:"\\'{U}",w:!0}}],["00db",{t:{c:"\\^{U}",w:!0}}],["00dc",{t:{c:'\\"{U}',w:!0}}],["00dd",{t:{c:"\\'{Y}",w:!0}}],["00de",{t:{c:"\\TH{}",w:!1}}],["00df",{t:{c:"\\ss{}",w:!1}}],["00e0",{t:{c:"\\`{a}",w:!0}}],["00e1",{t:{c:"\\'{a}",w:!0}}],["00e2",{t:{c:"\\^{a}",w:!0}}],["00e3",{t:{c:"\\~{a}",w:!0}}],["00e4",{t:{c:'\\"{a}',w:!0}}],["00e5",{t:{c:"\\aa{}",w:!1}}],["00e6",{t:{c:"\\ae{}",w:!1}}],["00e7",{t:{c:"\\c{c}",w:!1}}],["00e8",{t:{c:"\\`{e}",w:!0}}],["00e9",{t:{c:"\\'{e}",w:!0}}],["00ea",{t:{c:"\\^{e}",w:!0}}],["00eb",{t:{c:'\\"{e}',w:!0}}],["00ec",{t:{c:"\\`{\\i}",w:!1}}],["00ed",{t:{c:"\\'{\\i}",w:!1}}],["00ee",{t:{c:"\\^{\\i}",w:!1}}],["00ef",{t:{c:'\\"{\\i}',w:!1}}],["00f0",{t:{c:"\\dh{}",w:!1}}],["00f1",{t:{c:"\\~{n}",w:!0}}],["00f2",{t:{c:"\\`{o}",w:!0}}],["00f3",{t:{c:"\\'{o}",w:!0}}],["00f4",{t:{c:"\\^{o}",w:!0}}],["00f5",{t:{c:"\\~{o}",w:!0}}],["00f6",{t:{c:'\\"{o}',w:!0}}],["00f7",{m:{c:"\\div{}"}}],["00f8",{t:{c:"\\o{}",w:!1}}],["00f9",{t:{c:"\\`{u}",w:!0}}],["00fa",{t:{c:"\\'{u}",w:!0}}],["00fb",{t:{c:"\\^{u}",w:!0}}],["00fc",{t:{c:'\\"{u}',w:!0}}],["00fd",{t:{c:"\\'{y}",w:!0}}],["00fe",{t:{c:"\\th{}",w:!1}}],["00ff",{t:{c:'\\"{y}',w:!0}}],["0100",{m:{c:"\\bar{A}"},t:{c:"\\={A}",w:!0}}],["0101",{m:{c:"\\bar{a}"},t:{c:"\\={a}",w:!0}}],["0102",{m:{c:"\\breve{A}"},t:{c:"\\u{A}",w:!0}}],["0103",{t:{c:"\\u{a}",w:!0}}],["0104",{t:{c:"\\k{A}",w:!0}}],["0105",{t:{c:"\\k{a}",w:!0}}],["0106",{m:{c:"\\acute{C}"},t:{c:"\\'{C}",w:!0}}],["0107",{m:{c:"\\acute{c}"},t:{c:"\\'{c}",w:!0}}],["0108",{m:{c:"\\hat{C}"},t:{c:"\\^{C}",w:!0}}],["0109",{m:{c:"\\hat{c}"},t:{c:"\\^{c}",w:!0}}],["010a",{m:{c:"\\dot{C}"},t:{c:"\\.{C}",w:!0}}],["010b",{m:{c:"\\dot{c}"},t:{c:"\\.{c}",w:!0}}],["010c",{m:{c:"\\check{C}"},t:{c:"\\v{C}",w:!0}}],["010d",{m:{c:"\\check{c}"},t:{c:"\\v{c}",w:!0}}],["010e",{m:{c:"\\check{D}"},t:{c:"\\v{D}",w:!0}}],["010f",{m:{c:"\\check{d}"},t:{c:"\\v{d}",w:!0}}],["0110",{t:{c:"\\DJ{}",w:!1}}],["0111",{t:{c:"\\dj{}",w:!1}}],["0112",{m:{c:"\\bar{E}"},t:{c:"\\={E}",w:!0}}],["0113",{m:{c:"\\bar{e}"},t:{c:"\\={e}",w:!0}}],["0114",{m:{c:"\\breve{E}"},t:{c:"\\u{E}",w:!0}}],["0115",{m:{c:"\\breve{e}"},t:{c:"\\u{e}",w:!0}}],["0116",{m:{c:"\\dot{E}"},t:{c:"\\.{E}",w:!0}}],["0117",{m:{c:"\\dot{e}"},t:{c:"\\.{e}",w:!0}}],["0118",{t:{c:"\\k{E}",w:!0}}],["0119",{t:{c:"\\k{e}",w:!0}}],["011a",{m:{c:"\\check{E}"},t:{c:"\\v{E}",w:!0}}],["011b",{m:{c:"\\check{e}"},t:{c:"\\v{e}",w:!0}}],["011c",{m:{c:"\\hat{G}"},t:{c:"\\^{G}",w:!0}}],["011d",{m:{c:"\\hat{g}"},t:{c:"\\^{g}",w:!0}}],["011e",{m:{c:"\\breve{G}"},t:{c:"\\u{G}",w:!0}}],["011f",{m:{c:"\\breve{g}"},t:{c:"\\u{g}",w:!0}}],["0120",{m:{c:"\\dot{G}"},t:{c:"\\.{G}",w:!0}}],["0121",{m:{c:"\\dot{g}"},t:{c:"\\.{g}",w:!0}}],["0122",{t:{c:"\\c{G}",w:!0}}],["0123",{t:{c:"\\c{g}",w:!0}}],["0124",{m:{c:"\\hat{H}"},t:{c:"\\^{H}",w:!0}}],["0125",{m:{c:"\\hat{h}"},t:{c:"\\^{h}",w:!0}}],["0126",{t:{c:"{\\fontencoding{LELA}\\selectfont\\char40}",w:!1}}],["0128",{m:{c:"\\tilde{I}"},t:{c:"\\~{I}",w:!0}}],["0129",{m:{c:"\\tilde{\\imath}"},t:{c:"\\~{\\i}",w:!0}}],["012a",{m:{c:"\\bar{I}"},t:{c:"\\={I}",w:!0}}],["012b",{m:{c:"\\bar{\\imath}"},t:{c:"\\={\\i}",w:!0}}],["012c",{m:{c:"\\breve{I}"},t:{c:"\\u{I}",w:!0}}],["012d",{m:{c:"\\breve{\\imath}"},t:{c:"\\u{\\i}",w:!0}}],["012e",{t:{c:"\\k{I}",w:!0}}],["012f",{t:{c:"\\k{i}",w:!0}}],["0130",{m:{c:"\\dot{I}"},t:{c:"\\.{I}",w:!0}}],["0131",{m:{c:"\\imath{}"},t:{c:"\\i{}",w:!1}}],["0132",{t:{c:"IJ",w:!1}}],["0133",{t:{c:"ij",w:!1}}],["0134",{m:{c:"\\hat{J}"},t:{c:"\\^{J}",w:!0}}],["0135",{m:{c:"\\hat{\\jmath}"},t:{c:"\\^{\\j}",w:!0}}],["0136",{t:{c:"\\c{K}",w:!0}}],["0137",{t:{c:"\\c{k}",w:!0}}],["0138",{t:{c:"{\\fontencoding{LELA}\\selectfont\\char91}",w:!1}}],["0139",{m:{c:"\\acute{L}"},t:{c:"\\'{L}",w:!0}}],["013a",{m:{c:"\\acute{l}"},t:{c:"\\'{l}",w:!0}}],["013b",{t:{c:"\\c{L}",w:!1}}],["013c",{t:{c:"\\c{l}",w:!1}}],["013d",{m:{c:"\\check{L}"},t:{c:"\\v{L}",w:!0}}],["013e",{m:{c:"\\check{l}"},t:{c:"\\v{l}",w:!0}}],["013f",{t:{c:"{\\fontencoding{LELA}\\selectfont\\char201}",w:!1}}],["0140",{t:{c:"{\\fontencoding{LELA}\\selectfont\\char202}",w:!1}}],["0141",{t:{c:"\\L{}",w:!1}}],["0142",{t:{c:"\\l{}",w:!1}}],["0143",{m:{c:"\\acute{N}"},t:{c:"\\'{N}",w:!0}}],["0144",{m:{c:"\\acute{n}"},t:{c:"\\'{n}",w:!0}}],["0145",{t:{c:"\\c{N}",w:!1}}],["0146",{t:{c:"\\c{n}",w:!1}}],["0147",{m:{c:"\\check{N}"},t:{c:"\\v{N}",w:!0}}],["0148",{m:{c:"\\check{n}"},t:{c:"\\v{n}",w:!0}}],["0149",{t:{c:"'n",w:!1}}],["014a",{t:{c:"\\NG{}",w:!1}}],["014b",{t:{c:"\\ng{}",w:!1}}],["014c",{m:{c:"\\bar{O}"},t:{c:"\\={O}",w:!0}}],["014d",{m:{c:"\\bar{o}"},t:{c:"\\={o}",w:!0}}],["014e",{m:{c:"\\breve{O}"},t:{c:"\\u{O}",w:!0}}],["014f",{m:{c:"\\breve{o}"},t:{c:"\\u{o}",w:!0}}],["0150",{t:{c:"\\H{O}",w:!0}}],["0151",{t:{c:"\\H{o}",w:!0}}],["0152",{t:{c:"\\OE{}",w:!1}}],["0153",{t:{c:"\\oe{}",w:!1}}],["0154",{m:{c:"\\acute{R}"},t:{c:"\\'{R}",w:!0}}],["0155",{m:{c:"\\acute{r}"},t:{c:"\\'{r}",w:!0}}],["0156",{t:{c:"\\c{R}",w:!1}}],["0157",{t:{c:"\\c{r}",w:!1}}],["0158",{m:{c:"\\check{R}"},t:{c:"\\v{R}",w:!0}}],["0159",{m:{c:"\\check{r}"},t:{c:"\\v{r}",w:!0}}],["015a",{m:{c:"\\acute{S}"},t:{c:"\\'{S}",w:!0}}],["015b",{m:{c:"\\acute{s}"},t:{c:"\\'{s}",w:!0}}],["015c",{m:{c:"\\hat{S}"},t:{c:"\\^{S}",w:!0}}],["015d",{m:{c:"\\hat{s}"},t:{c:"\\^{s}",w:!0}}],["015e",{t:{c:"\\c{S}",w:!0}}],["015f",{t:{c:"\\c{s}",w:!0}}],["0160",{m:{c:"\\check{S}"},t:{c:"\\v{S}",w:!0}}],["0161",{m:{c:"\\check{s}"},t:{c:"\\v{s}",w:!0}}],["0162",{t:{c:"\\c{T}",w:!0}}],["0163",{t:{c:"\\c{t}",w:!0}}],["0164",{m:{c:"\\check{T}"},t:{c:"\\v{T}",w:!0}}],["0165",{m:{c:"\\check{t}"},t:{c:"\\v{t}",w:!0}}],["0166",{t:{c:"{\\fontencoding{LELA}\\selectfont\\char47}",w:!1}}],["0167",{t:{c:"{\\fontencoding{LELA}\\selectfont\\char63}",w:!1}}],["0168",{m:{c:"\\tilde{U}"},t:{c:"\\~{U}",w:!0}}],["0169",{m:{c:"\\tilde{u}"},t:{c:"\\~{u}",w:!0}}],["016a",{m:{c:"\\bar{U}"},t:{c:"\\={U}",w:!0}}],["016b",{m:{c:"\\bar{u}"},t:{c:"\\={u}",w:!0}}],["016c",{m:{c:"\\breve{U}"},t:{c:"\\u{U}",w:!0}}],["016d",{m:{c:"\\breve{u}"},t:{c:"\\u{u}",w:!0}}],["016e",{m:{c:"\\mathring{U}"},t:{c:"\\r{U}",w:!0}}],["016f",{m:{c:"\\mathring{u}"},t:{c:"\\r{u}",w:!0}}],["0170",{t:{c:"\\H{U}",w:!0}}],["0171",{t:{c:"\\H{u}",w:!0}}],["0172",{t:{c:"\\k{U}",w:!0}}],["0173",{t:{c:"\\k{u}",w:!0}}],["0174",{m:{c:"\\hat{W}"},t:{c:"\\^{W}",w:!0}}],["0175",{m:{c:"\\hat{w}"},t:{c:"\\^{w}",w:!0}}],["0176",{m:{c:"\\hat{Y}"},t:{c:"\\^{Y}",w:!0}}],["0177",{m:{c:"\\hat{y}"},t:{c:"\\^{y}",w:!0}}],["0178",{t:{c:'\\"{Y}',w:!0}}],["0179",{m:{c:"\\acute{Z}"},t:{c:"\\'{Z}",w:!0}}],["017a",{m:{c:"\\acute{z}"},t:{c:"\\'{z}",w:!0}}],["017b",{m:{c:"\\dot{Z}"},t:{c:"\\.{Z}",w:!0}}],["017c",{m:{c:"\\dot{z}"},t:{c:"\\.{z}",w:!0}}],["017d",{m:{c:"\\check{Z}"},t:{c:"\\v{Z}",w:!0}}],["017e",{m:{c:"\\check{z}"},t:{c:"\\v{z}",w:!0}}],["0195",{t:{c:"\\texthvlig{}",w:!1,p:"tipa"}}],["01aa",{m:{c:"\\eth{}",p:"amssymb"}}],["01ba",{t:{c:"{\\fontencoding{LELA}\\selectfont\\char195}",w:!1}}],["01c2",{t:{c:"\\textdoublepipe{}",w:!1,p:"tipa"}}],["01f5",{m:{c:"\\acute{g}"},t:{c:"\\'{g}",w:!0}}],["0258",{t:{c:"{\\fontencoding{LEIP}\\selectfont\\char61}",w:!1}}],["025b",{m:{c:"\\varepsilon{}"}}],["0278",{t:{c:"\\textphi{}",w:!1,p:"tipa"}}],["027f",{t:{c:"{\\fontencoding{LEIP}\\selectfont\\char202}",w:!1}}],["029e",{t:{c:"\\textturnk{}",w:!1,p:"tipa"}}],["02c7",{t:{c:"\\textasciicaron{}",w:!1}}],["02d8",{t:{c:"\\textasciibreve{}",w:!1}}],["02d9",{m:{c:"\\dot{}"},t:{c:"\\textperiodcentered{}",w:!1}}],["02da",{m:{c:"\\mathring{}"},t:{c:"\\r{}",w:!1}}],["02db",{t:{c:"\\k{}",w:!1}}],["02dc",{t:{c:"\\texttildelow{}",w:!1}}],["02dd",{t:{c:"\\H{}",w:!1}}],["0311",{t:{c:"{\\fontencoding{LECO}\\selectfont\\char177}",w:!1}}],["0318",{t:{c:"{\\fontencoding{LECO}\\selectfont\\char184}",w:!1}}],["0319",{t:{c:"{\\fontencoding{LECO}\\selectfont\\char185}",w:!1}}],["0328",{t:{c:"\\k",w:!1}}],["032b",{t:{c:"{\\fontencoding{LECO}\\selectfont\\char203}",w:!1}}],["032f",{t:{c:"{\\fontencoding{LECO}\\selectfont\\char207}",w:!1}}],["0337",{t:{c:"{\\fontencoding{LECO}\\selectfont\\char215}",w:!1}}],["0338",{t:{c:"{\\fontencoding{LECO}\\selectfont\\char216}",w:!1}}],["033a",{t:{c:"{\\fontencoding{LECO}\\selectfont\\char218}",w:!1}}],["033b",{t:{c:"{\\fontencoding{LECO}\\selectfont\\char219}",w:!1}}],["033c",{t:{c:"{\\fontencoding{LECO}\\selectfont\\char220}",w:!1}}],["033d",{t:{c:"{\\fontencoding{LECO}\\selectfont\\char221}",w:!1}}],["0361",{t:{c:"{\\fontencoding{LECO}\\selectfont\\char225}",w:!1}}],["0386",{m:{c:"\\acute{A}"},t:{c:"\\'{A}",w:!0}}],["0388",{m:{c:"\\acute{E}"},t:{c:"\\'{E}",w:!0}}],["0389",{m:{c:"\\grave{H}"},t:{c:"\\'{H}",w:!0}}],["038a",{t:{c:"\\'{}{I}",w:!1}}],["038c",{t:{c:"\\'{}O",w:!1}}],["038e",{t:{c:"\\mathrm{'Y}",w:!1}}],["038f",{m:{c:"\\mathrm{'\\Omega}"}}],["0390",{m:{c:"\\acute{\\ddot{\\iota}}"}}],["0391",{t:{c:"A",w:!1}}],["0392",{t:{c:"B",w:!1}}],["0393",{m:{c:"\\Gamma"}}],["0394",{m:{c:"\\Delta"}}],["0395",{t:{c:"E",w:!1}}],["0396",{t:{c:"Z",w:!1}}],["0397",{t:{c:"H",w:!1}}],["0398",{m:{c:"\\Theta"}}],["0399",{t:{c:"I",w:!1}}],["039a",{t:{c:"K",w:!1}}],["039b",{m:{c:"\\Lambda"}}],["039e",{m:{c:"\\Xi"}}],["03a0",{m:{c:"\\Pi"}}],["03a1",{t:{c:"R",w:!1}}],["03a3",{m:{c:"\\Sigma"}}],["03a4",{t:{c:"T",w:!1}}],["03a5",{m:{c:"\\Upsilon"}}],["03a6",{m:{c:"\\Phi"}}],["03a7",{t:{c:"X",w:!1}}],["03a8",{m:{c:"\\Psi"}}],["03a9",{m:{c:"\\Omega"}}],["03aa",{m:{c:"\\mathrm{\\ddot{I}}"}}],["03ab",{m:{c:"\\mathrm{\\ddot{Y}}"}}],["03ad",{m:{c:"\\acute{\\epsilon}"}}],["03ae",{m:{c:"\\acute{\\eta}"}}],["03af",{m:{c:"\\acute{\\iota}"}}],["03b0",{m:{c:"\\acute{\\ddot{\\upsilon}}"}}],["03b1",{m:{c:"\\alpha"}}],["03b2",{m:{c:"\\beta"}}],["03b3",{m:{c:"\\gamma"}}],["03b4",{m:{c:"\\delta"}}],["03b5",{m:{c:"\\epsilon"}}],["03b6",{m:{c:"\\zeta"}}],["03b7",{m:{c:"\\eta"}}],["03b8",{t:{c:"\\texttheta{}",w:!1,p:"tipa"}}],["03b9",{m:{c:"\\iota"}}],["03ba",{m:{c:"\\kappa"}}],["03bb",{m:{c:"\\lambda"}}],["03bc",{m:{c:"\\mu"}}],["03bd",{m:{c:"\\nu"}}],["03be",{m:{c:"\\xi"}}],["03c0",{m:{c:"\\pi"}}],["03c1",{m:{c:"\\rho"}}],["03c2",{m:{c:"\\varsigma"}}],["03c3",{m:{c:"\\sigma"}}],["03c4",{m:{c:"\\tau"}}],["03c5",{m:{c:"\\upsilon"}}],["03c6",{m:{c:"\\varphi"}}],["03c7",{m:{c:"\\chi"}}],["03c8",{m:{c:"\\psi"}}],["03c9",{m:{c:"\\omega"}}],["03ca",{m:{c:"\\ddot{\\iota}"}}],["03cb",{m:{c:"\\ddot{\\upsilon}"}}],["03cc",{m:{c:"\\acute{o}"},t:{c:"\\'{o}",w:!0}}],["03cd",{m:{c:"\\acute{\\upsilon}"}}],["03ce",{m:{c:"\\acute{\\omega}"}}],["03d0",{t:{c:"\\Pisymbol{ppi022}{87}",w:!1,p:"pifont"}}],["03d2",{m:{c:"\\Upsilon"}}],["03d5",{m:{c:"\\phi"}}],["03d6",{m:{c:"\\varpi"}}],["03dd",{m:{c:"\\digamma{}",p:"amssymb"}}],["03f0",{m:{c:"\\varkappa{}",p:"amssymb"}}],["03f1",{m:{c:"\\varrho{}"}}],["03f6",{m:{c:"\\backepsilon{}",p:"amssymb"}}],["2002",{t:{c:"\\hspace{0.6em}",w:!1}}],["2003",{t:{c:"\\hspace{1em}",w:!1}}],["2004",{t:{c:"\\hspace{0.33em}",w:!1}}],["2005",{t:{c:"\\hspace{0.25em}",w:!1}}],["2006",{t:{c:"\\hspace{0.166em}",w:!1}}],["2007",{t:{c:"\\hphantom{0}",w:!1}}],["2008",{t:{c:"\\hphantom{,}",w:!1}}],["2009",{t:{c:"\\hspace{0.167em}",w:!1}}],["200a",{m:{c:"\\mkern1mu{}"}}],["2010",{t:{c:"-",w:!1}}],["2013",{t:{c:"--",w:!1}}],["2014",{t:{c:"--",w:!1}}],["2015",{t:{c:"\\rule{1em}{1pt}",w:!1}}],["2016",{m:{c:"\\Vert{}"}}],["2018",{t:{c:"`",w:!1}}],["2019",{t:{c:"'",w:!1}}],["201c",{t:{c:"``",w:!1}}],["201d",{t:{c:"''",w:!1}}],["201e",{t:{c:",,",w:!1}}],["2020",{t:{c:"\\textdagger{}",w:!1}}],["2021",{t:{c:"\\textdaggerdbl{}",w:!1}}],["2022",{m:{c:"\\bullet{}"},t:{c:"\\textbullet{}",w:!1}}],["2025",{t:{c:"..",w:!1}}],["2026",{t:{c:"\\ldots{}",w:!1}}],["2030",{t:{c:"\\textperthousand{}",w:!1}}],["2031",{t:{c:"\\textpertenthousand{}",w:!1}}],["2032",{t:{c:"'",w:!1}}],["2033",{t:{c:"''",w:!1}}],["2034",{t:{c:"'''",w:!1}}],["2035",{m:{c:"\\backprime{}",p:"amssymb"}}],["2039",{t:{c:"\\guilsinglleft{}",w:!1}}],["203a",{t:{c:"\\guilsinglright{}",w:!1}}],["2057",{t:{c:"''''",w:!1}}],["205f",{m:{c:"\\mkern4mu{}"}}],["2060",{t:{c:"\\nolinebreak{}",w:!1}}],["20ac",{t:{c:"\\mbox{\\texteuro}{}",w:!1}}],["20db",{m:{c:"\\dddot{}",p:"amsmath"}}],["20dc",{m:{c:"\\ddddot{}",p:"amsmath"}}],["2102",{t:{c:"\\mathbb{C}",w:!1,p:"amssymb"}}],["210a",{t:{c:"\\mathscr{g}",w:!1,p:"mathrsfs"}}],["210b",{t:{c:"\\mathscr{H}",w:!1,p:"mathrsfs"}}],["210c",{t:{c:"\\mathfrak{H}",w:!1,p:"amssymb"}}],["210d",{t:{c:"\\mathbb{H}",w:!1,p:"amssymb"}}],["210f",{m:{c:"\\hslash{}",p:"amssymb"}}],["2110",{t:{c:"\\mathscr{I}",w:!1,p:"mathrsfs"}}],["2111",{t:{c:"\\mathfrak{I}",w:!1,p:"amssymb"}}],["2112",{t:{c:"\\mathscr{L}",w:!1,p:"mathrsfs"}}],["2113",{t:{c:"\\mathscr{l}",w:!1,p:"mathrsfs"}}],["2115",{t:{c:"\\mathbb{N}",w:!1,p:"amssymb"}}],["2118",{m:{c:"\\wp{}"}}],["2119",{t:{c:"\\mathbb{P}",w:!1,p:"amssymb"}}],["211a",{t:{c:"\\mathbb{Q}",w:!1,p:"amssymb"}}],["211b",{t:{c:"\\mathscr{R}",w:!1,p:"mathrsfs"}}],["211c",{t:{c:"\\mathfrak{R}",w:!1,p:"amssymb"}}],["211d",{t:{c:"\\mathbb{R}",w:!1,p:"amssymb"}}],["2122",{t:{c:"\\texttrademark{}",w:!1}}],["2124",{t:{c:"\\mathbb{Z}",w:!1,p:"amssymb"}}],["2126",{m:{c:"\\Omega{}"}}],["2127",{t:{c:"\\mho{}",w:!1}}],["2128",{t:{c:"\\mathfrak{Z}",w:!1,p:"amssymb"}}],["212b",{t:{c:"\\AA{}",w:!1}}],["212c",{t:{c:"\\mathscr{B}",w:!1,p:"mathrsfs"}}],["212d",{t:{c:"\\mathfrak{C}",w:!1,p:"amssymb"}}],["212f",{t:{c:"\\mathscr{e}",w:!1,p:"mathrsfs"}}],["2130",{t:{c:"\\mathscr{E}",w:!1,p:"mathrsfs"}}],["2131",{t:{c:"\\mathscr{F}",w:!1,p:"mathrsfs"}}],["2133",{t:{c:"\\mathscr{M}",w:!1,p:"mathrsfs"}}],["2134",{t:{c:"\\mathscr{o}",w:!1,p:"mathrsfs"}}],["2135",{m:{c:"\\aleph{}"}}],["2136",{m:{c:"\\beth{}",p:"amssymb"}}],["2137",{m:{c:"\\gimel{}",p:"amssymb"}}],["2138",{m:{c:"\\daleth{}",p:"amssymb"}}],["2190",{m:{c:"\\leftarrow{}"}}],["2191",{m:{c:"\\uparrow{}"}}],["2192",{m:{c:"\\rightarrow{}"}}],["2193",{m:{c:"\\downarrow{}"}}],["2194",{m:{c:"\\leftrightarrow{}"}}],["2195",{m:{c:"\\updownarrow{}"}}],["2196",{m:{c:"\\nwarrow{}"}}],["2197",{m:{c:"\\nearrow{}"}}],["2198",{m:{c:"\\searrow{}"}}],["2199",{m:{c:"\\swarrow{}"}}],["219a",{m:{c:"\\nleftarrow{}",p:"amssymb"}}],["219b",{m:{c:"\\nrightarrow{}",p:"amssymb"}}],["219e",{m:{c:"\\twoheadleftarrow{}",p:"amssymb"}}],["21a0",{m:{c:"\\twoheadrightarrow{}",p:"amssymb"}}],["21a2",{m:{c:"\\leftarrowtail{}",p:"amssymb"}}],["21a3",{m:{c:"\\rightarrowtail{}",p:"amssymb"}}],["21a6",{m:{c:"\\mapsto{}"}}],["21a9",{m:{c:"\\hookleftarrow{}"}}],["21aa",{m:{c:"\\hookrightarrow{}"}}],["21ab",{m:{c:"\\looparrowleft{}",p:"amssymb"}}],["21ac",{m:{c:"\\looparrowright{}",p:"amssymb"}}],["21ad",{m:{c:"\\leftrightsquigarrow{}",p:"amssymb"}}],["21ae",{m:{c:"\\nleftrightarrow{}",p:"amssymb"}}],["21b0",{m:{c:"\\Lsh{}",p:"amssymb"}}],["21b1",{m:{c:"\\Rsh{}",p:"amssymb"}}],["21b6",{m:{c:"\\curvearrowleft{}",p:"amssymb"}}],["21b7",{m:{c:"\\curvearrowright{}",p:"amssymb"}}],["21ba",{m:{c:"\\circlearrowleft{}",p:"amssymb"}}],["21bb",{m:{c:"\\circlearrowright{}",p:"amssymb"}}],["21bc",{m:{c:"\\leftharpoonup{}"}}],["21bd",{m:{c:"\\leftharpoondown{}"}}],["21be",{m:{c:"\\upharpoonright{}",p:"amssymb"}}],["21bf",{m:{c:"\\upharpoonleft{}",p:"amssymb"}}],["21c0",{m:{c:"\\rightharpoonup{}"}}],["21c1",{m:{c:"\\rightharpoondown{}"}}],["21c2",{m:{c:"\\downharpoonright{}",p:"amssymb"}}],["21c3",{m:{c:"\\downharpoonleft{}",p:"amssymb"}}],["21c4",{m:{c:"\\rightleftarrows{}",p:"amssymb"}}],["21c6",{m:{c:"\\leftrightarrows{}",p:"amssymb"}}],["21c7",{m:{c:"\\leftleftarrows{}",p:"amssymb"}}],["21c8",{m:{c:"\\upuparrows{}",p:"amssymb"}}],["21c9",{m:{c:"\\rightrightarrows{}",p:"amssymb"}}],["21ca",{m:{c:"\\downdownarrows{}",p:"amssymb"}}],["21cb",{m:{c:"\\leftrightharpoons{}",p:"amssymb"}}],["21cc",{m:{c:"\\rightleftharpoons{}"}}],["21cd",{m:{c:"\\nLeftarrow{}",p:"amssymb"}}],["21ce",{m:{c:"\\nLeftrightarrow{}",p:"amssymb"}}],["21cf",{m:{c:"\\nRightarrow{}",p:"amssymb"}}],["21d0",{m:{c:"\\Leftarrow{}"}}],["21d1",{m:{c:"\\Uparrow{}"}}],["21d2",{m:{c:"\\Rightarrow{}"}}],["21d3",{m:{c:"\\Downarrow{}"}}],["21d4",{m:{c:"\\Leftrightarrow{}"}}],["21d5",{m:{c:"\\Updownarrow{}"}}],["21da",{m:{c:"\\Lleftarrow{}",p:"amssymb"}}],["21db",{m:{c:"\\Rrightarrow{}",p:"amssymb"}}],["21dd",{m:{c:"\\rightsquigarrow{}",p:"amssymb"}}],["2200",{m:{c:"\\forall{}"}}],["2201",{m:{c:"\\complement{}",p:"amssymb"}}],["2202",{m:{c:"\\partial{}"}}],["2203",{m:{c:"\\exists{}"}}],["2204",{m:{c:"\\nexists{}",p:"amssymb"}}],["2205",{m:{c:"\\varnothing{}",p:"amssymb"}}],["2207",{m:{c:"\\nabla{}"}}],["2208",{m:{c:"\\in{}"}}],["2209",{m:{c:"\\not\\in{}"}}],["220b",{m:{c:"\\ni{}"}}],["220c",{m:{c:"\\not\\ni{}"}}],["220f",{m:{c:"\\prod{}"}}],["2210",{m:{c:"\\coprod{}"}}],["2211",{m:{c:"\\sum{}"}}],["2212",{t:{c:"-",w:!1}}],["2213",{m:{c:"\\mp{}"}}],["2214",{m:{c:"\\dotplus{}",p:"amssymb"}}],["2216",{m:{c:"\\setminus{}"}}],["2217",{m:{c:"{\\_\\ast}"}}],["2218",{m:{c:"\\circ{}"}}],["2219",{m:{c:"\\bullet{}"}}],["221a",{m:{c:"\\surd{}"}}],["221d",{m:{c:"\\propto{}"}}],["221e",{m:{c:"\\infty{}"}}],["2220",{t:{c:"\\angle{}",w:!1}}],["2221",{m:{c:"\\measuredangle{}",p:"amssymb"}}],["2222",{m:{c:"\\sphericalangle{}",p:"amssymb"}}],["2223",{m:{c:"\\mid{}"}}],["2224",{m:{c:"\\nmid{}",p:"amssymb"}}],["2225",{m:{c:"\\parallel{}"}}],["2226",{m:{c:"\\nparallel{}",p:"amssymb"}}],["2227",{m:{c:"\\wedge{}"}}],["2228",{m:{c:"\\vee{}"}}],["2229",{m:{c:"\\cap{}"}}],["222a",{m:{c:"\\cup{}"}}],["222b",{m:{c:"\\int{}"}}],["222c",{m:{c:"\\int\\!\\int{}"}}],["222d",{m:{c:"\\int\\!\\int\\!\\int{}"}}],["222e",{m:{c:"\\oint{}"}}],["2234",{m:{c:"\\therefore{}",p:"amssymb"}}],["2235",{m:{c:"\\because{}",p:"amssymb"}}],["223a",{m:{c:"\\mathbin{{:}\\!\\!{-}\\!\\!{:}}"}}],["223c",{m:{c:"\\sim{}"}}],["223d",{m:{c:"\\backsim{}",p:"amssymb"}}],["2240",{m:{c:"\\wr{}"}}],["2241",{m:{c:"\\not\\sim{}"}}],["2243",{m:{c:"\\simeq{}"}}],["2244",{m:{c:"\\not\\simeq{}"}}],["2245",{m:{c:"\\cong{}"}}],["2247",{m:{c:"\\not\\cong{}"}}],["2248",{m:{c:"\\approx{}"}}],["2249",{m:{c:"\\not\\approx{}"}}],["224a",{m:{c:"\\approxeq{}",p:"amssymb"}}],["224d",{m:{c:"\\asymp{}"}}],["224e",{m:{c:"\\Bumpeq{}",p:"amssymb"}}],["224f",{m:{c:"\\bumpeq{}",p:"amssymb"}}],["2250",{m:{c:"\\doteq{}"}}],["2251",{m:{c:"\\doteqdot{}",p:"amssymb"}}],["2252",{m:{c:"\\fallingdotseq{}",p:"amssymb"}}],["2253",{m:{c:"\\risingdotseq{}",p:"amssymb"}}],["2254",{t:{c:":=",w:!1}}],["2255",{t:{c:"=:",w:!1}}],["2256",{m:{c:"\\eqcirc{}",p:"amssymb"}}],["2257",{m:{c:"\\circeq{}",p:"amssymb"}}],["225c",{m:{c:"\\triangleq{}",p:"amssymb"}}],["2260",{m:{c:"\\not ="}}],["2261",{m:{c:"\\equiv{}"}}],["2262",{m:{c:"\\not\\equiv{}"}}],["2264",{m:{c:"\\leq{}"}}],["2265",{m:{c:"\\geq{}"}}],["2266",{m:{c:"\\leqq{}",p:"amssymb"}}],["2267",{m:{c:"\\geqq{}",p:"amssymb"}}],["2268",{m:{c:"\\lneqq{}",p:"amssymb"}}],["2269",{m:{c:"\\gneqq{}",p:"amssymb"}}],["226a",{m:{c:"\\ll{}"}}],["226b",{m:{c:"\\gg{}"}}],["226c",{m:{c:"\\between{}",p:"amssymb"}}],["226d",{m:{c:"\\not\\kern-0.3em\\times{}"}}],["226e",{m:{c:"\\not&lt;"}}],["226f",{m:{c:"\\not&gt;"}}],["2270",{m:{c:"\\not\\leq{}"}}],["2271",{m:{c:"\\not\\geq{}"}}],["2276",{m:{c:"\\lessgtr{}",p:"amssymb"}}],["2277",{m:{c:"\\gtrless{}",p:"amssymb"}}],["227a",{m:{c:"\\prec{}"}}],["227b",{m:{c:"\\succ{}"}}],["227c",{m:{c:"\\preccurlyeq{}",p:"amssymb"}}],["227d",{m:{c:"\\succcurlyeq{}",p:"amssymb"}}],["227e",{m:{c:"\\precapprox{}",p:"amssymb"}}],["227f",{m:{c:"\\succapprox{}",p:"amssymb"}}],["2280",{m:{c:"\\not\\prec{}"}}],["2281",{m:{c:"\\not\\succ{}"}}],["2282",{m:{c:"\\subset{}"}}],["2283",{m:{c:"\\supset{}"}}],["2284",{m:{c:"\\not\\subset{}"}}],["2285",{m:{c:"\\not\\supset{}"}}],["2286",{m:{c:"\\subseteq{}"}}],["2287",{m:{c:"\\supseteq{}"}}],["2288",{m:{c:"\\not\\subseteq{}"}}],["2289",{m:{c:"\\not\\supseteq{}"}}],["228a",{m:{c:"\\subsetneq{}",p:"amssymb"}}],["228b",{m:{c:"\\supsetneq{}",p:"amssymb"}}],["228e",{m:{c:"\\uplus{}"}}],["228f",{t:{c:"\\sqsubset{}",w:!1}}],["2290",{t:{c:"\\sqsupset{}",w:!1}}],["2291",{m:{c:"\\sqsubseteq{}"}}],["2292",{m:{c:"\\sqsupseteq{}"}}],["2293",{m:{c:"\\sqcap{}"}}],["2294",{m:{c:"\\sqcup{}"}}],["2295",{m:{c:"\\oplus{}"}}],["2296",{m:{c:"\\ominus{}"}}],["2297",{m:{c:"\\otimes{}"}}],["2298",{m:{c:"\\oslash{}"}}],["2299",{m:{c:"\\odot{}"}}],["229a",{m:{c:"\\circledcirc{}",p:"amssymb"}}],["229b",{m:{c:"\\circledast{}",p:"amssymb"}}],["229d",{m:{c:"\\circleddash{}",p:"amssymb"}}],["229e",{m:{c:"\\boxplus{}",p:"amssymb"}}],["229f",{m:{c:"\\boxminus{}",p:"amssymb"}}],["22a0",{m:{c:"\\boxtimes{}",p:"amssymb"}}],["22a1",{m:{c:"\\boxdot{}",p:"amssymb"}}],["22a2",{m:{c:"\\vdash{}"}}],["22a3",{m:{c:"\\dashv{}"}}],["22a4",{m:{c:"\\top{}"}}],["22a5",{m:{c:"\\perp{}"}}],["22a9",{m:{c:"\\Vdash{}",p:"amssymb"}}],["22aa",{m:{c:"\\Vvdash{}",p:"amssymb"}}],["22ac",{m:{c:"\\nvdash{}",p:"amssymb"}}],["22ad",{m:{c:"\\nvDash{}",p:"amssymb"}}],["22ae",{m:{c:"\\nVdash{}",p:"amssymb"}}],["22af",{m:{c:"\\nVDash{}",p:"amssymb"}}],["22b2",{m:{c:"\\vartriangleleft{}",p:"amssymb"}}],["22b3",{m:{c:"\\vartriangleright{}",p:"amssymb"}}],["22b4",{m:{c:"\\trianglelefteq{}",p:"amssymb"}}],["22b5",{m:{c:"\\trianglerighteq{}",p:"amssymb"}}],["22b8",{m:{c:"\\multimap{}",p:"amssymb"}}],["22ba",{m:{c:"\\intercal{}",p:"amssymb"}}],["22bb",{m:{c:"\\veebar{}",p:"amssymb"}}],["22c2",{m:{c:"\\bigcap{}"}}],["22c3",{m:{c:"\\bigcup{}"}}],["22c4",{m:{c:"\\diamond{}"}}],["22c5",{m:{c:"\\cdot{}"}}],["22c6",{m:{c:"\\star{}"}}],["22c7",{m:{c:"\\divideontimes{}",p:"amssymb"}}],["22c8",{m:{c:"\\bowtie{}"}}],["22c9",{m:{c:"\\ltimes{}",p:"amssymb"}}],["22ca",{m:{c:"\\rtimes{}",p:"amssymb"}}],["22cb",{m:{c:"\\leftthreetimes{}",p:"amssymb"}}],["22cc",{m:{c:"\\rightthreetimes{}",p:"amssymb"}}],["22cd",{m:{c:"\\backsimeq{}",p:"amssymb"}}],["22ce",{m:{c:"\\curlyvee{}",p:"amssymb"}}],["22cf",{m:{c:"\\curlywedge{}",p:"amssymb"}}],["22d0",{m:{c:"\\Subset{}",p:"amssymb"}}],["22d1",{m:{c:"\\Supset{}",p:"amssymb"}}],["22d2",{m:{c:"\\Cap{}",p:"amssymb"}}],["22d3",{m:{c:"\\Cup{}",p:"amssymb"}}],["22d4",{m:{c:"\\pitchfork{}",p:"amssymb"}}],["22d6",{m:{c:"\\lessdot{}",p:"amssymb"}}],["22d7",{m:{c:"\\gtrdot{}",p:"amssymb"}}],["22da",{m:{c:"\\lesseqgtr{}",p:"amssymb"}}],["22db",{m:{c:"\\gtreqless{}",p:"amssymb"}}],["22de",{m:{c:"\\curlyeqprec{}",p:"amssymb"}}],["22df",{m:{c:"\\curlyeqsucc{}",p:"amssymb"}}],["22e2",{m:{c:"\\not\\sqsubseteq{}"}}],["22e3",{m:{c:"\\not\\sqsupseteq{}"}}],["22e6",{m:{c:"\\lnsim{}",p:"amssymb"}}],["22e7",{m:{c:"\\gnsim{}",p:"amssymb"}}],["22e9",{m:{c:"\\succnsim{}",p:"amssymb"}}],["22ea",{m:{c:"\\ntriangleleft{}",p:"amssymb"}}],["22eb",{m:{c:"\\ntriangleright{}",p:"amssymb"}}],["22ec",{m:{c:"\\ntrianglelefteq{}",p:"amssymb"}}],["22ed",{m:{c:"\\ntrianglerighteq{}",p:"amssymb"}}],["22ee",{t:{c:"\\vdots{}",w:!1}}],["22ef",{m:{c:"\\cdots{}"}}],["2305",{m:{c:"\\barwedge{}",p:"amssymb"}}],["2308",{m:{c:"\\lceil{}"}}],["2309",{m:{c:"\\rceil{}"}}],["230a",{m:{c:"\\lfloor{}"}}],["230b",{m:{c:"\\rfloor{}"}}],["2315",{t:{c:"\\recorder{}",w:!1,p:"wasysym"}}],["2316",{m:{c:'\\mathchar"2208'}}],["231c",{m:{c:"\\ulcorner{}",p:"amssymb"}}],["231d",{m:{c:"\\urcorner{}",p:"amssymb"}}],["231e",{m:{c:"\\llcorner{}",p:"amssymb"}}],["231f",{m:{c:"\\lrcorner{}",p:"amssymb"}}],["2322",{m:{c:"\\frown{}"}}],["2323",{m:{c:"\\smile{}"}}],["2329",{m:{c:"\\langle{}"}}],["232a",{m:{c:"\\rangle{}"}}],["23b0",{m:{c:"\\lmoustache{}"}}],["23b1",{m:{c:"\\rmoustache{}"}}],["2423",{t:{c:"\\textvisiblespace{}",w:!1}}],["2460",{t:{c:"\\ding{172}",w:!1,p:"pifont"}}],["2461",{t:{c:"\\ding{173}",w:!1,p:"pifont"}}],["2462",{t:{c:"\\ding{174}",w:!1,p:"pifont"}}],["2463",{t:{c:"\\ding{175}",w:!1,p:"pifont"}}],["2464",{t:{c:"\\ding{176}",w:!1,p:"pifont"}}],["2465",{t:{c:"\\ding{177}",w:!1,p:"pifont"}}],["2466",{t:{c:"\\ding{178}",w:!1,p:"pifont"}}],["2467",{t:{c:"\\ding{179}",w:!1,p:"pifont"}}],["2468",{t:{c:"\\ding{180}",w:!1,p:"pifont"}}],["2469",{t:{c:"\\ding{181}",w:!1,p:"pifont"}}],["24c8",{m:{c:"\\circledS{}",p:"amssymb"}}],["2571",{m:{c:"\\diagup{}",p:"amssymb"}}],["25a0",{t:{c:"\\ding{110}",w:!1,p:"pifont"}}],["25a1",{m:{c:"\\square{}",p:"amssymb"}}],["25aa",{m:{c:"\\blacksquare{}",p:"amssymb"}}],["25ad",{t:{c:"\\fbox{~~}",w:!1}}],["25b2",{t:{c:"\\ding{115}",w:!1,p:"pifont"}}],["25b3",{m:{c:"\\bigtriangleup{}"}}],["25b4",{m:{c:"\\blacktriangle{}",p:"amssymb"}}],["25b5",{m:{c:"\\vartriangle{}",p:"amssymb"}}],["25b8",{m:{c:"\\blacktriangleright{}",p:"amssymb"}}],["25b9",{m:{c:"\\triangleright{}"}}],["25bc",{t:{c:"\\ding{116}",w:!1,p:"pifont"}}],["25bd",{m:{c:"\\bigtriangledown{}"}}],["25be",{m:{c:"\\blacktriangledown{}",p:"amssymb"}}],["25bf",{m:{c:"\\triangledown{}",p:"amssymb"}}],["25c2",{m:{c:"\\blacktriangleleft{}",p:"amssymb"}}],["25c3",{m:{c:"\\triangleleft{}"}}],["25c6",{t:{c:"\\ding{117}",w:!1,p:"pifont"}}],["25ca",{m:{c:"\\lozenge{}",p:"amssymb"}}],["25cb",{m:{c:"\\bigcirc{}"}}],["25cf",{t:{c:"\\ding{108}",w:!1,p:"pifont"}}],["25d7",{t:{c:"\\ding{119}",w:!1,p:"pifont"}}],["25ef",{m:{c:"\\bigcirc{}"}}],["2605",{t:{c:"\\ding{72}",w:!1,p:"pifont"}}],["2606",{t:{c:"\\ding{73}",w:!1,p:"pifont"}}],["260e",{t:{c:"\\ding{37}",w:!1,p:"pifont"}}],["261b",{t:{c:"\\ding{42}",w:!1,p:"pifont"}}],["261e",{t:{c:"\\ding{43}",w:!1,p:"pifont"}}],["263e",{t:{c:"\\rightmoon{}",w:!1,p:"wasysym"}}],["263f",{t:{c:"\\mercury{}",w:!1,p:"wasysym"}}],["2640",{t:{c:"\\venus{}",w:!1,p:"wasysym"}}],["2642",{t:{c:"\\male{}",w:!1,p:"wasysym"}}],["2643",{t:{c:"\\jupiter{}",w:!1,p:"wasysym"}}],["2644",{t:{c:"\\saturn{}",w:!1,p:"wasysym"}}],["2645",{t:{c:"\\uranus{}",w:!1,p:"wasysym"}}],["2646",{t:{c:"\\neptune{}",w:!1,p:"wasysym"}}],["2647",{t:{c:"\\pluto{}",w:!1,p:"wasysym"}}],["2648",{t:{c:"\\aries{}",w:!1,p:"wasysym"}}],["2649",{t:{c:"\\taurus{}",w:!1,p:"wasysym"}}],["264a",{t:{c:"\\gemini{}",w:!1,p:"wasysym"}}],["264b",{t:{c:"\\cancer{}",w:!1,p:"wasysym"}}],["264c",{t:{c:"\\leo{}",w:!1,p:"wasysym"}}],["264d",{t:{c:"\\virgo{}",w:!1,p:"wasysym"}}],["264e",{t:{c:"\\libra{}",w:!1,p:"wasysym"}}],["264f",{t:{c:"\\scorpio{}",w:!1,p:"wasysym"}}],["2650",{t:{c:"\\sagittarius{}",w:!1,p:"wasysym"}}],["2651",{t:{c:"\\capricornus{}",w:!1,p:"wasysym"}}],["2652",{t:{c:"\\aquarius{}",w:!1,p:"wasysym"}}],["2653",{t:{c:"\\pisces{}",w:!1,p:"wasysym"}}],["2660",{t:{c:"\\ding{171}",w:!1,p:"pifont"}}],["2662",{m:{c:"\\diamond{}"}}],["2663",{t:{c:"\\ding{168}",w:!1,p:"pifont"}}],["2665",{t:{c:"\\ding{170}",w:!1,p:"pifont"}}],["2666",{t:{c:"\\ding{169}",w:!1,p:"pifont"}}],["2669",{t:{c:"\\quarternote{}",w:!1,p:"wasysym"}}],["266a",{t:{c:"\\eighthnote{}",w:!1,p:"wasysym"}}],["266d",{m:{c:"\\flat{}"}}],["266e",{m:{c:"\\natural{}"}}],["266f",{m:{c:"\\sharp{}"}}],["2701",{t:{c:"\\ding{33}",w:!1,p:"pifont"}}],["2702",{t:{c:"\\ding{34}",w:!1,p:"pifont"}}],["2703",{t:{c:"\\ding{35}",w:!1,p:"pifont"}}],["2704",{t:{c:"\\ding{36}",w:!1,p:"pifont"}}],["2706",{t:{c:"\\ding{38}",w:!1,p:"pifont"}}],["2707",{t:{c:"\\ding{39}",w:!1,p:"pifont"}}],["2708",{t:{c:"\\ding{40}",w:!1,p:"pifont"}}],["2709",{t:{c:"\\ding{41}",w:!1,p:"pifont"}}],["270c",{t:{c:"\\ding{44}",w:!1,p:"pifont"}}],["270d",{t:{c:"\\ding{45}",w:!1,p:"pifont"}}],["270e",{t:{c:"\\ding{46}",w:!1,p:"pifont"}}],["270f",{t:{c:"\\ding{47}",w:!1,p:"pifont"}}],["2710",{t:{c:"\\ding{48}",w:!1,p:"pifont"}}],["2711",{t:{c:"\\ding{49}",w:!1,p:"pifont"}}],["2712",{t:{c:"\\ding{50}",w:!1,p:"pifont"}}],["2713",{t:{c:"\\ding{51}",w:!1,p:"pifont"}}],["2714",{t:{c:"\\ding{52}",w:!1,p:"pifont"}}],["2715",{t:{c:"\\ding{53}",w:!1,p:"pifont"}}],["2716",{t:{c:"\\ding{54}",w:!1,p:"pifont"}}],["2717",{t:{c:"\\ding{55}",w:!1,p:"pifont"}}],["2718",{t:{c:"\\ding{56}",w:!1,p:"pifont"}}],["2719",{t:{c:"\\ding{57}",w:!1,p:"pifont"}}],["271a",{t:{c:"\\ding{58}",w:!1,p:"pifont"}}],["271b",{t:{c:"\\ding{59}",w:!1,p:"pifont"}}],["271c",{t:{c:"\\ding{60}",w:!1,p:"pifont"}}],["271d",{t:{c:"\\ding{61}",w:!1,p:"pifont"}}],["271e",{t:{c:"\\ding{62}",w:!1,p:"pifont"}}],["271f",{t:{c:"\\ding{63}",w:!1,p:"pifont"}}],["2720",{t:{c:"\\ding{64}",w:!1,p:"pifont"}}],["2721",{t:{c:"\\ding{65}",w:!1,p:"pifont"}}],["2722",{t:{c:"\\ding{66}",w:!1,p:"pifont"}}],["2723",{t:{c:"\\ding{67}",w:!1,p:"pifont"}}],["2724",{t:{c:"\\ding{68}",w:!1,p:"pifont"}}],["2725",{t:{c:"\\ding{69}",w:!1,p:"pifont"}}],["2726",{t:{c:"\\ding{70}",w:!1,p:"pifont"}}],["2727",{t:{c:"\\ding{71}",w:!1,p:"pifont"}}],["2729",{t:{c:"\\ding{73}",w:!1,p:"pifont"}}],["272a",{t:{c:"\\ding{74}",w:!1,p:"pifont"}}],["272b",{t:{c:"\\ding{75}",w:!1,p:"pifont"}}],["272c",{t:{c:"\\ding{76}",w:!1,p:"pifont"}}],["272d",{t:{c:"\\ding{77}",w:!1,p:"pifont"}}],["272e",{t:{c:"\\ding{78}",w:!1,p:"pifont"}}],["272f",{t:{c:"\\ding{79}",w:!1,p:"pifont"}}],["2730",{t:{c:"\\ding{80}",w:!1,p:"pifont"}}],["2731",{t:{c:"\\ding{81}",w:!1,p:"pifont"}}],["2732",{t:{c:"\\ding{82}",w:!1,p:"pifont"}}],["2733",{t:{c:"\\ding{83}",w:!1,p:"pifont"}}],["2734",{t:{c:"\\ding{84}",w:!1,p:"pifont"}}],["2735",{t:{c:"\\ding{85}",w:!1,p:"pifont"}}],["2736",{t:{c:"\\ding{86}",w:!1,p:"pifont"}}],["2737",{t:{c:"\\ding{87}",w:!1,p:"pifont"}}],["2738",{t:{c:"\\ding{88}",w:!1,p:"pifont"}}],["2739",{t:{c:"\\ding{89}",w:!1,p:"pifont"}}],["273a",{t:{c:"\\ding{90}",w:!1,p:"pifont"}}],["273b",{t:{c:"\\ding{91}",w:!1,p:"pifont"}}],["273c",{t:{c:"\\ding{92}",w:!1,p:"pifont"}}],["273d",{t:{c:"\\ding{93}",w:!1,p:"pifont"}}],["273e",{t:{c:"\\ding{94}",w:!1,p:"pifont"}}],["273f",{t:{c:"\\ding{95}",w:!1,p:"pifont"}}],["2740",{t:{c:"\\ding{96}",w:!1,p:"pifont"}}],["2741",{t:{c:"\\ding{97}",w:!1,p:"pifont"}}],["2742",{t:{c:"\\ding{98}",w:!1,p:"pifont"}}],["2743",{t:{c:"\\ding{99}",w:!1,p:"pifont"}}],["2744",{t:{c:"\\ding{100}",w:!1,p:"pifont"}}],["2745",{t:{c:"\\ding{101}",w:!1,p:"pifont"}}],["2746",{t:{c:"\\ding{102}",w:!1,p:"pifont"}}],["2747",{t:{c:"\\ding{103}",w:!1,p:"pifont"}}],["2748",{t:{c:"\\ding{104}",w:!1,p:"pifont"}}],["2749",{t:{c:"\\ding{105}",w:!1,p:"pifont"}}],["274a",{t:{c:"\\ding{106}",w:!1,p:"pifont"}}],["274b",{t:{c:"\\ding{107}",w:!1,p:"pifont"}}],["274d",{t:{c:"\\ding{109}",w:!1,p:"pifont"}}],["274f",{t:{c:"\\ding{111}",w:!1,p:"pifont"}}],["2750",{t:{c:"\\ding{112}",w:!1,p:"pifont"}}],["2751",{t:{c:"\\ding{113}",w:!1,p:"pifont"}}],["2752",{t:{c:"\\ding{114}",w:!1,p:"pifont"}}],["2756",{t:{c:"\\ding{118}",w:!1,p:"pifont"}}],["2758",{t:{c:"\\ding{120}",w:!1,p:"pifont"}}],["2759",{t:{c:"\\ding{121}",w:!1,p:"pifont"}}],["275a",{t:{c:"\\ding{122}",w:!1,p:"pifont"}}],["275b",{t:{c:"\\ding{123}",w:!1,p:"pifont"}}],["275c",{t:{c:"\\ding{124}",w:!1,p:"pifont"}}],["275d",{t:{c:"\\ding{125}",w:!1,p:"pifont"}}],["275e",{t:{c:"\\ding{126}",w:!1,p:"pifont"}}],["2761",{t:{c:"\\ding{161}",w:!1,p:"pifont"}}],["2762",{t:{c:"\\ding{162}",w:!1,p:"pifont"}}],["2763",{t:{c:"\\ding{163}",w:!1,p:"pifont"}}],["2764",{t:{c:"\\ding{164}",w:!1,p:"pifont"}}],["2765",{t:{c:"\\ding{165}",w:!1,p:"pifont"}}],["2766",{t:{c:"\\ding{166}",w:!1,p:"pifont"}}],["2767",{t:{c:"\\ding{167}",w:!1,p:"pifont"}}],["2776",{t:{c:"\\ding{182}",w:!1,p:"pifont"}}],["2777",{t:{c:"\\ding{183}",w:!1,p:"pifont"}}],["2778",{t:{c:"\\ding{184}",w:!1,p:"pifont"}}],["2779",{t:{c:"\\ding{185}",w:!1,p:"pifont"}}],["277a",{t:{c:"\\ding{186}",w:!1,p:"pifont"}}],["277b",{t:{c:"\\ding{187}",w:!1,p:"pifont"}}],["277c",{t:{c:"\\ding{188}",w:!1,p:"pifont"}}],["277d",{t:{c:"\\ding{189}",w:!1,p:"pifont"}}],["277e",{t:{c:"\\ding{190}",w:!1,p:"pifont"}}],["277f",{t:{c:"\\ding{191}",w:!1,p:"pifont"}}],["2780",{t:{c:"\\ding{192}",w:!1,p:"pifont"}}],["2781",{t:{c:"\\ding{193}",w:!1,p:"pifont"}}],["2782",{t:{c:"\\ding{194}",w:!1,p:"pifont"}}],["2783",{t:{c:"\\ding{195}",w:!1,p:"pifont"}}],["2784",{t:{c:"\\ding{196}",w:!1,p:"pifont"}}],["2785",{t:{c:"\\ding{197}",w:!1,p:"pifont"}}],["2786",{t:{c:"\\ding{198}",w:!1,p:"pifont"}}],["2787",{t:{c:"\\ding{199}",w:!1,p:"pifont"}}],["2788",{t:{c:"\\ding{200}",w:!1,p:"pifont"}}],["2789",{t:{c:"\\ding{201}",w:!1,p:"pifont"}}],["278a",{t:{c:"\\ding{202}",w:!1,p:"pifont"}}],["278b",{t:{c:"\\ding{203}",w:!1,p:"pifont"}}],["278c",{t:{c:"\\ding{204}",w:!1,p:"pifont"}}],["278d",{t:{c:"\\ding{205}",w:!1,p:"pifont"}}],["278e",{t:{c:"\\ding{206}",w:!1,p:"pifont"}}],["278f",{t:{c:"\\ding{207}",w:!1,p:"pifont"}}],["2790",{t:{c:"\\ding{208}",w:!1,p:"pifont"}}],["2791",{t:{c:"\\ding{209}",w:!1,p:"pifont"}}],["2792",{t:{c:"\\ding{210}",w:!1,p:"pifont"}}],["2793",{t:{c:"\\ding{211}",w:!1,p:"pifont"}}],["2794",{t:{c:"\\ding{212}",w:!1,p:"pifont"}}],["2798",{t:{c:"\\ding{216}",w:!1,p:"pifont"}}],["2799",{t:{c:"\\ding{217}",w:!1,p:"pifont"}}],["279a",{t:{c:"\\ding{218}",w:!1,p:"pifont"}}],["279b",{t:{c:"\\ding{219}",w:!1,p:"pifont"}}],["279c",{t:{c:"\\ding{220}",w:!1,p:"pifont"}}],["279d",{t:{c:"\\ding{221}",w:!1,p:"pifont"}}],["279e",{t:{c:"\\ding{222}",w:!1,p:"pifont"}}],["279f",{t:{c:"\\ding{223}",w:!1,p:"pifont"}}],["27a0",{t:{c:"\\ding{224}",w:!1,p:"pifont"}}],["27a1",{t:{c:"\\ding{225}",w:!1,p:"pifont"}}],["27a2",{t:{c:"\\ding{226}",w:!1,p:"pifont"}}],["27a3",{t:{c:"\\ding{227}",w:!1,p:"pifont"}}],["27a4",{t:{c:"\\ding{228}",w:!1,p:"pifont"}}],["27a5",{t:{c:"\\ding{229}",w:!1,p:"pifont"}}],["27a6",{t:{c:"\\ding{230}",w:!1,p:"pifont"}}],["27a7",{t:{c:"\\ding{231}",w:!1,p:"pifont"}}],["27a8",{t:{c:"\\ding{232}",w:!1,p:"pifont"}}],["27a9",{t:{c:"\\ding{233}",w:!1,p:"pifont"}}],["27aa",{t:{c:"\\ding{234}",w:!1,p:"pifont"}}],["27ab",{t:{c:"\\ding{235}",w:!1,p:"pifont"}}],["27ac",{t:{c:"\\ding{236}",w:!1,p:"pifont"}}],["27ad",{t:{c:"\\ding{237}",w:!1,p:"pifont"}}],["27ae",{t:{c:"\\ding{238}",w:!1,p:"pifont"}}],["27af",{t:{c:"\\ding{239}",w:!1,p:"pifont"}}],["27b1",{t:{c:"\\ding{241}",w:!1,p:"pifont"}}],["27b2",{t:{c:"\\ding{242}",w:!1,p:"pifont"}}],["27b3",{t:{c:"\\ding{243}",w:!1,p:"pifont"}}],["27b4",{t:{c:"\\ding{244}",w:!1,p:"pifont"}}],["27b5",{t:{c:"\\ding{245}",w:!1,p:"pifont"}}],["27b6",{t:{c:"\\ding{246}",w:!1,p:"pifont"}}],["27b7",{t:{c:"\\ding{247}",w:!1,p:"pifont"}}],["27b8",{t:{c:"\\ding{248}",w:!1,p:"pifont"}}],["27b9",{t:{c:"\\ding{249}",w:!1,p:"pifont"}}],["27ba",{t:{c:"\\ding{250}",w:!1,p:"pifont"}}],["27bb",{t:{c:"\\ding{251}",w:!1,p:"pifont"}}],["27bc",{t:{c:"\\ding{252}",w:!1,p:"pifont"}}],["27bd",{t:{c:"\\ding{253}",w:!1,p:"pifont"}}],["27be",{t:{c:"\\ding{254}",w:!1,p:"pifont"}}],["27f5",{m:{c:"\\longleftarrow{}"}}],["27f6",{m:{c:"\\longrightarrow{}"}}],["27f7",{m:{c:"\\longleftrightarrow{}"}}],["27f8",{m:{c:"\\Longleftarrow{}"}}],["27f9",{m:{c:"\\Longrightarrow{}"}}],["27fa",{m:{c:"\\Longleftrightarrow{}"}}],["27fc",{m:{c:"\\longmapsto{}"}}],["27ff",{m:{c:"\\sim\\joinrel\\leadsto"}}],["29eb",{m:{c:"\\blacklozenge{}",p:"amssymb"}}],["2a3f",{m:{c:"\\amalg{}"}}],["2a6e",{m:{c:"\\stackrel{*}{=}"}}],["2a7d",{m:{c:"\\leqslant{}",p:"amssymb"}}],["2a7e",{m:{c:"\\geqslant{}",p:"amssymb"}}],["2a85",{m:{c:"\\lessapprox{}",p:"amssymb"}}],["2a86",{m:{c:"\\gtrapprox{}",p:"amssymb"}}],["2a87",{m:{c:"\\lneq{}",p:"amssymb"}}],["2a88",{m:{c:"\\gneq{}",p:"amssymb"}}],["2a89",{m:{c:"\\lnapprox{}",p:"amssymb"}}],["2a8a",{m:{c:"\\gnapprox{}",p:"amssymb"}}],["2a8b",{m:{c:"\\lesseqqgtr{}",p:"amssymb"}}],["2a8c",{m:{c:"\\gtreqqless{}",p:"amssymb"}}],["2a95",{m:{c:"\\eqslantless{}",p:"amssymb"}}],["2a96",{m:{c:"\\eqslantgtr{}",p:"amssymb"}}],["2a9d",{t:{c:"\\Pisymbol{ppi020}{117}",w:!1,p:"pifont"}}],["2a9e",{t:{c:"\\Pisymbol{ppi020}{105}",w:!1,p:"pifont"}}],["2aaf",{m:{c:"\\preceq{}"}}],["2ab0",{m:{c:"\\succeq{}"}}],["2ab5",{m:{c:"\\precneqq{}",p:"amssymb"}}],["2ab6",{m:{c:"\\succneqq{}",p:"amssymb"}}],["2ab7",{m:{c:"\\precapprox{}",p:"amssymb"}}],["2ab8",{m:{c:"\\succapprox{}",p:"amssymb"}}],["2ab9",{m:{c:"\\precnapprox{}",p:"amssymb"}}],["2aba",{m:{c:"\\succnapprox{}",p:"amssymb"}}],["2ac5",{m:{c:"\\subseteqq{}",p:"amssymb"}}],["2ac6",{m:{c:"\\supseteqq{}",p:"amssymb"}}],["2acb",{m:{c:"\\subsetneqq{}",p:"amssymb"}}],["2acc",{m:{c:"\\supsetneqq{}",p:"amssymb"}}],["2afd",{m:{c:"{{/}\\!\\!{/}}"}}],["fb00",{t:{c:"ff",w:!1}}],["fb01",{t:{c:"fi",w:!1}}],["fb02",{t:{c:"fl",w:!1}}],["fb03",{t:{c:"ffi",w:!1}}],["fb04",{t:{c:"ffl",w:!1}}]]);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeArray=t.default=t.write=t.getOptions=t.optionalFields=void 0;var a=r(179),i=r(18),n=r(966);const o={abstract:"literal",affiliation:"literal",annotation:"literal",author:"name",booktitle:"literal",chapter:"literal",date:"date",doi:"verbatim",edition:"literal",editor:"name",editora:"name",editorb:"name",eid:"literal",entrysubtype:"literal",eprint:"verbatim",eprintclass:"literal",eprinttype:"literal",eventdate:"date",eventtitle:"literal",file:"verbatim",holder:"name",howpublished:"literal",institution:"literal",isbn:"literal",ismn:"literal",issn:"literal",issue:"literal",journaltitle:"literal",keywords:"csv",language:"key",lccn:"literal",location:"literal",mrnumber:"literal",note:"literal",number:"literal",organization:"literal",origlocation:"literal",origdate:"date",origpublisher:"literal",origtitle:"literal",pages:"range",pagetotal:"literal",pmc:"literal",pmid:"literal",publisher:"literal",pubstate:"key",series:"literal",shorttitle:"literal",title:"literal",translator:"name",type:"key",url:"verbatim",urldate:"date",venue:"literal",version:"literal",volume:"literal",volumes:"literal",zbl:"literal"},s=["abstract","annotation","chapter","doi","edition","editora","editorb","eid","entrysubtype","eprint","eprintclass","eprinttype","eventdate","eventtitle","file","holder","howpublished","isbn","ismn","issn","issue","keywords","language","lccn","location","note","number","organization","origdate","origlocation","origpublisher","origtitle","pages","pagetotal","pmc","pmid","publisher","pubstate","series","shorttitle","translator","type","url","urldate","venue","version","volume","volumes","affiliation","mrnumber","zbl"];t.optionalFields=s;const l={abstract:"abstract",assignee:"holder",address:"location",accessed:"urldate",attachments:"file",author:"author",booktitle:"booktitle",chapter:"chapter",conference_date:"eventdate",conference:"eventtitle",conference_location:"venue",contributor:"editorb",doi:"doi",edition:"edition",editor:"editor",eprint:"eprint",foldersNamed:"keywords",institution:"institution",isbn:"isbn",isbn_alt:"isbn",ismn:"ismn",issn:"issn",issn_alt:"issn",issue:"issue",journal:"journaltitle",keywords:"keywords",labelsNamed:"keywords",language:"language",lccn:"lccn",mr:"mrnumber",note:"note",number:"number",num_pages:"pagetotal",num_volumes:"volumes",organization:"organization",original_address:"origlocation",originally_published:"origdate",original_publisher:"origpublisher",original_title:"origtitle",pages:"pages",patent_number:"number",pmc:"pmc",pmid:"pmid",primaryClass:"eprintclass",published:"date",publisher:"publisher",school:"institution",series:"series",series_editor:"editora",status:"pubstate",title:"title",titleshort:"shorttitle",translator:"translator",url:"url",version:"version",volume:"volume",zbl:"zbl"},c=["type","title","shorttitle","author","editor","editora","editorb","translator","holder","affiliation","journaltitle","booktitle","publisher","institution","location","eventtitle","venue","eventdate","edition","volume","issue","number","pages","date","pagetotal","pubstate","eprint","eprintclass","doi","pmc","pmid","lccn","issn","isbn","ismn","abstract","chapter","series","url","urldate","howpublished","note","file"],u=(e,t)=>{let r=c.indexOf(e[0]),a=c.indexOf(t[0]);return-1===r&&(r=c.length),-1===a&&(a=c.length),r-a},d=(e,t,r,a)=>{let i=l[e]||null;return"PATENT"===t&&"journal"===e&&(i="type"),"journal"===e&&"PP_PREPRINT"===r&&"article"!==a&&(i=null),i},p=(e,t,r,s,l)=>{const c=((e,t,r)=>{let a="MISC",i=null;switch(e){case"PP_ARTICLE":a="ARTICLE";break;case"PP_ARTWORK":a="ARTWORK";break;case"PP_AUDIO":a="AUDIO";break;case"PP_BILL":a="LEGISLATION";break;case"PP_BOOK":a="BOOK","Proceedings"===t?a="PROCEEDINGS":"Booklet"===t?a="BOOKLET":("Encyclopedia"===t||"Dictionary"===t)&&(a="REFERENCE");break;case"PP_BOOK_CHAPTER":a="INBOOK";break;case"PP_CASE":a="JURISDICTION";break;case"PP_COMPUTER_PROGRAM":a="SOFTWARE",i="software";break;case"PP_CONFERENCE_PAPER":a="INPROCEEDINGS";break;case"PP_DATASET":a="DATASET";break;case"PP_ENCYCLOPEDIA_ARTICLE":a="INREFERENCE";break;case"PP_FIGURE":a="IMAGE";break;case"PP_LETTER":a="LETTER";break;case"PP_MANUAL":a="MANUAL";break;case"PP_PATENT":a="PATENT";break;case"PP_PREPRINT":a="unpublished"===r?"UNPUBLISHED":"misc"===r?"MISC":"ARTICLE";break;case"PP_UNPUBLISHED":case"PP_MANUSCRIPT":a="UNPUBLISHED";break;case"PP_PERIODICAL":a="PERIODICAL";break;case"PP_REPORT":a="REPORT",i="resreport","Technical Report"===t&&(i="techreport");break;case"PP_REVIEW":a="REVIEW";break;case"PP_STANDARD":a="STANDARD";break;case"PP_STATUTE":case"PP_TREATY":a="LEGAL";break;case"PP_THESIS":a="THESIS","Ph.D. Thesis"===t?(a="PHDTHESIS",i="phdthesis"):"Masters Thesis"===t?(a="MASTERSTHESIS",i="mathesis"):"Bachelor's Thesis"===t&&(i="bathesis");break;case"PP_VIDEO":a="VIDEO";break;case"PP_WEBSITE":a="ONLINE";break;default:a="MISC"}return{pubtype:a,type:i}})(e.pubtype,e.kind,t.preprint),u={pubtype:c.pubtype,citekey:(0,n.getCiteKey)(e),fields:{}};c.type&&(u.fields.type=c.type);const p=[...new Set(["isbn","isbn_alt","issn","issn_alt","keywords","foldersNamed","labelsNamed"].concat(Object.keys(e)))];for(const c of p){if(-1===s.indexOf(c))continue;if(void 0===e[c])continue;const p=d(c,u.pubtype,e.pubtype||"PP_MISC",t.preprint||"article");if(!p)continue;const m=o[p];if(p&&("note"===p||"isbn"===p||"issn"===p||"keywords"===p||!(p in u.fields))){let o=e[c];"published"===c||"accessed"===c||"originally_published"===c||"conference_date"===c||"filed"===c?o=(0,n.convertDate)(o.year,o.month,o.day):"author"===c||"editor"===c||"series_editor"===c||"contributor"===c||"translator"===c?o=(0,n.convertAuthors)(o):"title"===c||"booktitle"===c||"titleshort"===c?(o=(0,i.interconvertString)(o,{format:"bibtex"}),t.preserveTitles&&o.length>0&&(o=`{${o}}`)):"pages"===c?(o=o.replace(/[\u2013\u2014]/g,"-"),t.doubleDash&&(o=o.replace(/-+/g,"--"))):"journaltitle"===p?o=t.useFullJournalName?e.journalfull||e.journal:e.journal||e.journalfull:"holder"===p?o=`{${o}}`:"isbn"===p||"issn"===p?u.fields[p]&&o&&(o=`${u.fields[p]},${o}`):"url"===p?[o]=o:"note"===p?u.fields[p]&&(o=`${u.fields[p]}; ${o}`):"attachments"===c?o=(0,n.convertFiles)(e,l,r,o):"type"===p?"PATENT"===u.pubtype&&(o=/US/.test(o)?"patentus":/EP/.test(o)?"patenteu":/GB/.test(o)?"patentuk":/DE/.test(o)?"patentde":/FR/.test(o)?"patentfr":"patent"):"keywords"===p&&(Array.isArray(o)&&(o=o.join(";")),"labelsNamed"!==c&&"foldersNamed"!==c||!t.noExport.includes("folders")||(o=""),o=`${u.fields[p]||""};${o}`.replace(/^;/,"").replace(/\s*;\s*$/,"")),o&&(o=o.toString(),o=(0,a.decode)(o),"literal"!==m&&"csv"!==m&&"range"!==m||(o=(0,n.escapeLatexSpecialChars)(o)),u.fields[p]=o)}}return u},m=(e,t,r,a)=>{const i=[];if(0===Object.keys(e.fields).length)return"";i.push(`@${e.pubtype}{${e.citekey},`);for(const[s,l]of Object.entries(e.fields).sort(u)){const e="verbatim"!==o[s]&&t.wrap;let c=l.toString();"title"===s&&t.smartQuote&&(c=(0,n.smartQuote)(c)),i.push((0,n.formatField)(s,c,"global"===t.align?a:r,e,t.wrapColumn,"global"===t.align||"block"===t.align,t.indent,"braces"))}return i[i.length-1]=i[i.length-1].replace(/,$/,""),i.push("}\n"),i.join("\n")};t.getOptions=e=>{const t={doubleDash:!1,useFullJournalName:!1,noExport:[],preserveTitles:!1,smartQuote:!1,wrap:!0,wrapColumn:80,indent:2,align:"none",sort:"none",preprint:"article"};let r=e;if(r.biblatex_config&&"string"==typeof r.biblatex_config&&"{}"!==r.biblatex_config)try{r=JSON.parse(r.biblatex_config)}catch(e){}if("object"==typeof r&&"wrapColumn"in r){if("boolean"==typeof r.doubleDash&&(t.doubleDash=r.doubleDash),"boolean"==typeof r.useFullJournalName&&(t.useFullJournalName=r.useFullJournalName),"boolean"==typeof r.preserveTitles&&(t.preserveTitles=r.preserveTitles),"boolean"==typeof r.smartQuote&&(t.smartQuote=r.smartQuote),"boolean"==typeof r.wrap&&(t.wrap=r.wrap),"string"==typeof r.preprint&&(t.preprint=r.preprint),Array.isArray(r.noExport))for(const e of r.noExport)s.indexOf(e)>-1&&t.noExport.push(e);"number"==typeof r.wrapColumn&&(t.wrapColumn=r.wrapColumn),"number"==typeof r.indent&&(t.indent=r.indent),"block"!==r.align&&"global"!==r.align&&"none"!==r.align||(t.align=r.align),"citekey"!==r.sort&&"created"!==r.sort||(t.sort=r.sort)}else if("object"==typeof r){var a,i,n,o,l,c,u,d,p,m,h,g,f;"1"===(null===(a=r.bibtex_doubleDash)||void 0===a?void 0:a.toString())&&(t.doubleDash=!0),"0"===(null===(i=r.bibtex_exportAbstract)||void 0===i?void 0:i.toString())&&t.noExport.push("abstract"),"0"===(null===(n=r.bibtex_exportAffiliation)||void 0===n?void 0:n.toString())&&t.noExport.push("affiliation"),"0"===(null===(o=r.bibtex_exportFilePath)||void 0===o?void 0:o.toString())&&t.noExport.push("file"),"0"===(null===(l=r.bibtex_exportFoldersLabels)||void 0===l?void 0:l.toString())&&t.noExport.push("folders"),"0"===(null===(c=r.bibtex_exportIdentifiers)||void 0===c?void 0:c.toString())&&t.noExport.push("doi","eprint","issn","isbn","ismn","pmc","pmid","lccn","mrnumber","zbl"),"0"===(null===(u=r.bibtex_exportKeywords)||void 0===u?void 0:u.toString())&&t.noExport.push("keywords"),"0"===(null===(d=r.bibtex_exportNotes)||void 0===d?void 0:d.toString())&&t.noExport.push("annotation"),"0"===(null===(p=r.bibtex_exportUrls)||void 0===p?void 0:p.toString())&&t.noExport.push("url"),"1"===(null===(m=r.bibtex_preserveTitles)||void 0===m?void 0:m.toString())&&(t.preserveTitles=!0),"1"===(null===(h=r.bibtex_prettyPrint)||void 0===h?void 0:h.toString())&&(t.align="block",t.wrap=!0),"1"===(null===(g=r.bibtex_smartQuote)||void 0===g?void 0:g.toString())&&(t.smartQuote=!0),"1"===(null===(f=r.bibtex_useFullJournalName)||void 0===f?void 0:f.toString())&&(t.useFullJournalName=!0)}return t};t.default=t.write=function(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return h(e,t,r,a).join("\n")};t.writeArray=function(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return h(e,t,r,a)};const h=(e,t,r,a)=>{const i={},o=[],s=[];for(const l of(0,n.sortPubs)(e,t.sort)){let e=0;const c=(0,n.removeNonSupportedFields)(p(l,t,r||{},(0,n.getValidFields)(l.pubtype||"PP_MISC",i),a),t);for(const t of Object.keys(c.fields))e=Math.max(e,t.length);s.push(e),o.push(c)}const l=Math.max(...s),c=[];for(let e=0;e<o.length;e+=1)c.push(m(o[e],t,s[e],l));return c}},function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.setupQueueMessagingAndAlarm=t.QUEUE_ALARM_NAME=void 0;var i=a(r(119)),n=r(1404),o=a(r(47)),s=r(20),l=r(46),c=a(r(29));t.QUEUE_ALARM_NAME="queueAlarm";const u=async e=>{if("test"===s.PP_ENV||"bg"!==self.executionContext)return;o.default.addActions({"queue.addJob":async t=>{const r={...t};"s3-sync"===r.type&&(r.throttleStrategy="periodic",r.throttleValue=6e4,r.timesMaxRun=3),e.addJob(r)},"queue.cancelJobs":()=>e.cancelJobs(),"queue.cancelJob":t=>e.cancelJob(t._id),"queue.run":()=>e.run("REMOTE_TRIGGER")}),await e.init({n:4,fastlaneSlots:1,fastlaneMinPriority:i.default.SINGLE_PDF_DOWNLOAD});const t=await(0,n.localStorageGetValue)("s3-sync","lastSync");let r=!0;if(t&&"number"==typeof t){const e=Date.now()-t;e>864e5?r=!0:(r=!1,c.default.info("s3-sync","Not running s3-sync, last run was",e/1e3/60/60,"hours ago"))}if(r)try{0,await(0,n.localStorageSetValue)("s3-sync","lastSync",Date.now()),(0,l.scheduleS3Sync)()}catch(e){c.default.debug("ensureS3SyncJobForAllFiles error",e)}};t.setupQueueMessagingAndAlarm=u;var d=u;t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localStorageSetValue=t.localStorageGetValue=void 0;t.localStorageGetValue=async(e,t)=>{var r,a;const i=`${e}${t}`;return null!==(r=chrome)&&void 0!==r&&null!==(a=r.storage)&&void 0!==a&&a.local?new Promise((e,t)=>{chrome.storage.local.get(i,r=>{chrome.runtime.lastError?t(chrome.runtime.lastError):e(r[i])})}):Promise.resolve(void 0)};t.localStorageSetValue=async(e,t,r)=>{var a,i;const n={[`${e}${t}`]:r};return null!==(a=chrome)&&void 0!==a&&null!==(i=a.storage)&&void 0!==i&&i.local?new Promise((e,t)=>{chrome.storage.local.set(n,()=>{chrome.runtime.lastError?t(chrome.runtime.lastError):e()})}):Promise.resolve()}},function(e,t,r){"use strict";(function(e,r){var a,i,n,o,s,l={addon:{},attach:{},backend:{},bg:{task:{}},cb:{},cloud:{},crawling:{},cs:{},files:{},fg:{},format:{},iframe:{},library:{},pdf:{},plugin:{},pop:{},guru:{crawling:{},db:{},format:{},deduplication:{}},scratch:{},target:{},test:{},upload:{},webimport:{},wizard:{},write:{}};function c(){return"object"==typeof self&&"object"==typeof self.document&&!u()}function u(){return e&&"object"==typeof e.exports}function d(){return"object"==typeof self&&"object"==typeof self.chrome}if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&void 0===p&&"undefined"!=typeof self){var p=self;console.log("Assigning window = self.")}if(function(){try{return!1}catch(e){return!1}}()&&void 0===p)p=r;if(void 0===p&&void 0!==r)p=r;if(u()){var m=l;e.exports=m}if(c()||r.isPaperpileCiteServerInstance){if(void 0===self.ppAlreadyExists&&(self.ppAlreadyExists=!1),self.PP)console.log("self.PP already exists -- not loading singletons"),self.ppAlreadyExists=!0;else{self.PP=l;m=self.PP}if(self.document)document.getElementById("pp-extension-running")&&(self.extensionExists=!0);if(self.isWorker)m=l;var h=/^__PP_/;"1.5".match(h)&&"__PP_WEBAPP_VERSION__".match(h)?(self.PP_EXTENSION_VERSION=0,self.PP_WEBAPP_VERSION=0,self.PP_URL_BASE="http://127.0.0.1:8080"):(self.PP_EXTENSION_VERSION="1.5",self.PP_WEBAPP_VERSION="__PP_WEBAPP_VERSION__",self.PP_URL_BASE="https://paperpile.com"),"exports"in e?e.exports=m:self.isWorker,!self.ppAlreadyExists&&self.$&&($.fn.filterNode=function(e){var t=e.toLowerCase();return this.find("*").filter((function(){return this.nodeName.toLowerCase()===t}))})}function g(e,t,r){c()&&!0===self.ppAlreadyExists&&!0===self.doNotClobber||(e[r]=new e[t])}m.Ajax={request:function(e){var t=this;if(p.plackSession){var a=m.Utils.getCookie("plack_session");p.plackSession!==a&&(p.plackSession=null,m.log({type:"exception",subtype:"Sanitation",msg:"Plack session mismatch",session_user_id:m.Session.user_id}))}var i={url:e.url,data:e.params,type:"GET"},n=m.Utils.clone(e),o=e.callback;delete e.callback,e.xhrFields&&(i.xhrFields=e.xhrFields);var s=0;e.delay&&(s=e.delay);var l=0;void 0!==e.maxRetries&&(l=e.maxRetries);var h=0;if(void 0===e.curRetryCount?e.curRetryCount=0:h=e.curRetryCount,e.timeout&&(i.timeout=e.timeout),e.dataType&&(i.dataType=e.dataType),e.contentType&&(i.contentType=e.contentType),"processData"in e&&(i.processData=e.processData),!1===e.cache&&(i.cache=!1),e.method&&(i.type=e.method),e.oauth){var g=i.url,b=i.type,y=i.data,v=e.oauth.signURL(g,b,y);v!=g&&(i.url=v,delete i.data),e.oauth&&e.oauth.addHeaders&&e.oauth.addHeaders(e)}if(e.accessToken&&(e.headers||(e.headers={}),e.headers.Authorization="Bearer "+e.accessToken),e.headers?i.beforeSend=function(t,r){for(var a in t.origUrl=r.url,e.headers)e.headers.hasOwnProperty(a)&&t.setRequestHeader(a,e.headers[a])}:i.beforeSend=function(e,t){e.origUrl=t.url},e.scope&&(i.context=e.scope),e.progress&&c()){var _=e.progress;delete e.progress,i.xhr=function(){var e=new p.XMLHttpRequest;return e.addEventListener("progress",(function(e){if(e.lengthComputable){var t=e.loaded/e.total;_(t)}}),!1),e}}i.async=!0;var w,P,S,C={url:e.url,urlHistory:[e.url]};if(e.requestListenFn&&(P=e.requestListenFn,p&&p.chrome&&p.chrome.webRequest&&chrome.webRequest.onBeforeRequest.addListener(P,{urls:["<all_urls>"]})),e.trackRedirects&&d()&&p.chrome.webRequest&&(w=function(t){var r=p.unescape(t.url);if(C.url===r||C.url===t.url){var a=m.Utils.ellipsis(t.url,30,null,"..."),i=m.Utils.ellipsis(t.redirectUrl,30,null,"...");console.log(e.logPrefix||"","found redirect URL",a,"->",i),C.urlHistory.push(t.redirectUrl),C.url=t.redirectUrl}},chrome.webRequest.onBeforeRedirect.addListener(w,{urls:["<all_urls>"]})),e.loadingMessage&&c()){var A=e.loadingMessageDelay||1e3;S=p.setTimeout((function(){e.loadingMessageObject=m.backend.Utils.showLoadingMessage(e.loadingMessage)}),A)}"undefined"!=typeof jQuery&&(jQuery.support.cors=!0);var E=function(){var a=(new Date).getTime(),s=function(r,i,s){var u=(new Date).getTime();if(w&&d()&&p.chrome.webRequest&&chrome.webRequest.onBeforeRedirect.removeListener(w),P&&d()&&p.chrome.webRequest&&chrome.webRequest.onBeforeRequest.removeListener(P),c()&&(C.url!==e.url&&(g.redirectUrl=[C.url]),C.urlHistory&&(g.redirectHistory=C.urlHistory),e.trackRedirects))if("parsererror"!==i&&"success"!==i||"redirectUrl"in g){if("success"===i&&"redirectUrl"in g&&g.redirectUrl[0]){var f=t.getRedirectUrlFromBody(g.redirectUrl[0],g.responseText,e.purpose);f.length>0&&(g.redirectUrl=f)}}else{var b=[];(b=t.getRedirectUrlFromBody(e.url,g.responseText,e.purpose)).length>0&&(g.redirectUrl=b)}if(void 0!==S&&(clearTimeout(S),m.backend.Utils.clearLoadingMessage(e.loadingMessageObject),delete e.loadingMessageObject),"success"===i){var y=u-a,v=!0,_="";if(e.params&&e.params.query){var A=e.params.query;_=(M=JSON.parse(A)).action,M.mcollection&&("Logs"===M.mcollection&&(v=!1),_+="/"+M.mcollection)}var E=e.url;if(m.Ajax.isPaperpileAjax(e.url)?E=(E=E.replace(/https?:\/\/(127.0.0.1:8080|paperpile.com|stage.paperpile.com)\//,"")).replace(/\?.*$/,""):(!0!==e.logTiming&&(v=!1),E=m.Utils.getDomainSuffix(e.url)),v){var T=.5;if(m.Ajax.isPaperpileAjax(e.url)&&(m.Globals.isBackgroundPage()&&(T=.1),_&&_.match(/update\/library/i)&&(T=.1)),Math.random()<T){var k=e.url,x=k.split("?");x.length>1&&(k=x[0]);var R=m.Ajax.isPaperpileAjax(e.url)?"Paperpile":"Non-Paperpile";void 0!==m.backend.Logs&&m.backend.Logs.googleAnalytics({timingOnly:!0,type:R,subtype:_||E,msg:k,duration:y})}}if(m.Ajax.isPaperpileAjax(e.url)&&y>5e3){var I=_;""==I&&(I=E);var L=!0;"insert/Logs"==I&&(L=!1),L&&"function"==typeof m.log&&m.log({type:"performance",subtype:"Paperpile Ajax",msg:"Slow request at "+I,url:e.url,start:a,end:u,duration:y})}else y>1e4&&"function"==typeof m.log&&m.log({type:"performance",subtype:"Other Ajax",msg:"Slow request at "+E,url:e.url,start:a,end:u,duration:y});m.Utils.callback(o,e.scope||g,[r,i,s])}else{if("error"===i&&401===r.status&&m.Ajax.isPaperpileAjax(e.url))return m.bg.LoginState&&m.bg.LoginState.setLoggedOut(),(m.Globals.isWebApp()||m.Globals.isBackgroundPage())&&(e.params&&e.params.query&&e.params.query.match('"mcollection":"Logs"')||m.Utils.createErrorStatus("You need to sign in again",["STATUS_PANEL_SIGN_IN"])),void m.Utils.callback(o,e.scope||g,[r.responseText,i,r]);if("timeout"===i)return"function"==typeof m.log&&m.log({type:"performance",subtype:"Ajax timeout",msg:"URL timed out: "+e.url,url:e.url,start:a,end:u,duration:y}),l>0&&h<l&&("function"==typeof m.log&&m.log({type:"performance",subtype:"Ajax timeout -> retry",msg:"Timeout retry ("+h+" of "+l+") for URL: "+e.url,url:e.url,start:a,end:u,duration:y}),n.curRetryCount=h+1,m.Utils.defer((function(){t.request(n)}),20)),void m.Utils.callback(o,e.scope||g,[r.responseText,i,r]);if(m.Ajax.isPaperpileAjax(e.url)&&!0!==e.noErrorStatusPanel&&"abort"!==i&&c()){var D=!0,N=!0,O="there was an error on our server.",U=["STATUS_PANEL_RELOAD_WEBAPP"];if(503===r.status)O="the Paperpile servers are currently unavailable.",U=["STATUS_PANEL_VISIT_TWITTER"];else if(r.responseText&&r.responseText.match(/error/g)){var M;if((M=JSON.parse(r.responseText))&&M.error){var F=M.error;F&&F.type&&!F.type.match(/unknown/gi)&&(O='The server responded with an error "'+F.msg+'"',F.actions&&(U=M.error.actions),N=!1)}}else 0===r.status&&""==r.responseText&&(N=!0,D=!1,m.Globals.isBackgroundPage()&&!e.url.match(/ping/i)&&m.bg.LoginState.pingServer());if(m.Globals.isWebApp()){if(!e.url.match(/ping/i)){var j=Paperpile.Globals.grid();if(j){var B=j.store;B.updateFilterViewTimeout&&clearTimeout(B.updateFilterViewTimeout)}D&&m.Utils.createErrorStatus(O,U),N&&m.fg.ServerState.badResponseCheck()}}else D&&m.Utils.createErrorStatus(O,U)}m.Utils.callback(o,e.scope||g,[r?r.responseText:"",i,r||g])}};if(c()){var g=$.ajax(i);return g.always(s),g}return"object"==typeof r&&r.useFetch?(console.log("Calling fetch."),function(e,a){if(e.method=a.type,e.hasOwnProperty("beforeSend")&&a.headers)for(var i in a.headers)a.headers.hasOwnProperty(i)&&(e.hasOwnProperty("headers")?e.headers[i]=a.headers[i]:e.headers={key:a.headers[i]});var n=new f(a.url),o=n.getQuery()||"";"params"in a&&(Object.keys(a.params).forEach((function(e){"action"!=e&&(o.length&&(o+="&"),o+=encodeURIComponent(e)+"="+encodeURIComponent(a.params[e]))})),n.setQuery(o),a.url=n.toString());var l={},c={headers:{}},d=!1;if(a.headers&&Object.keys(a.headers).forEach((function(e){"User-Agent"===e&&(d=!0),c.headers[e]=a.headers[e]})),d||(c.headers||(c.headers={}),c.headers["User-Agent"]=userAgent),r&&r.isReactNative&&(c.headers["Content-Type"]="text/html",r.cookies&&(c.headers.Cookie=m.Ajax.getCookieNodeJS(a.url,r.cookies.hosts))),u()&&fetch&&fetch.toString().startsWith("async function fetchCookie")){c.agent=function(e){return"http:"===e.protocol?new fetchHttp.Agent({rejectUnauthorized:!1}):new fetchHttps.Agent({rejectUnauthorized:!1})}}var p=function(e,r){fetch(e,r).then((function(e){return l=e,e.text()})).then((function(e){l.responseUrl=l.url;var r=l.rnfbRespInfo&&l.rnfbRespInfo.redirects?l.rnfbRespInfo.redirects:null;if(r&&r.length>0&&(l.responseUrl=r[r.length-1]),a.trackRedirects){a.url!==l.responseUrl&&(l.origUrl=a.url,l.redirectUrl=r?r[r.length-1]:l.responseUrl,l.redirectHistory=r?l.rnfbRespInfo.redirects:[a.url,l.url]);var i=t.getRedirectUrlFromBody(l.responseUrl,e,a.purpose);i.length&&(l.origUrl=a.url,l.redirectUrl=i[0],m.Utils.isArray(l.redirectHistory)?l.redirectHistory.push(i[0]):l.redirectHistory=[a.url,i[0]])}if(l.status>=200&&l.status<400){var n=l.headers["content-type"]||l.headers["Content-Type"]||l.headers.get("content-type");if(n&&n.indexOf("application/json")>-1){var o;try{o=JSON.parse(e)}catch(e){o=!1}o&&(l.responseText=o)}else l.responseText=e;a.hasOwnProperty("scope")&&a.scope?s.bind(a.scope)(l.responseText,"success",l):s(l.responseText,"success",l)}else s(l,"error",null);return e})).catch((function(e){console.log("Request failed",l.statusText,e),s(l,"error",null)}))};"POST"===e.type&&o&&a.url.indexOf("base-search.net")>-1?(c.headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",c.body=o,p(a.url,c)):"POST"===e.type&&a.data?(c.body=a.data,p(a.url,c)):p(a.url,c)}(i,e)):(console.log("Calling XMLHttpRequest."),function(e,a){if(e.method=a.type,e.hasOwnProperty("beforeSend")&&a.headers)for(var i in a.headers)a.headers.hasOwnProperty(i)&&(e.hasOwnProperty("headers")?e.headers[i]=a.headers[i]:e.headers={key:a.headers[i]});var n=new f(a.url),o=n.getQuery()||"";"params"in a&&(Object.keys(a.params).forEach((function(e){"action"!=e&&(o.length&&(o+="&"),o+=encodeURIComponent(e)+"="+encodeURIComponent(a.params[e]))})),n.setQuery(o),a.url=n.toString());var l=new XMLHttpRequest({request:{rejectUnauthorized:!1}});l.open(e.type,a.url,!0);var c=!1;a.headers&&Object.keys(a.headers).forEach((function(e){"User-Agent"===e&&(c=!0),l.setRequestHeader(e,a.headers[e],!0)})),c||l.setRequestHeader("User-Agent",userAgent,!0),r&&r.isReactNative&&r.cookies&&l.setRequestHeader("Cookie",m.Ajax.getCookieNodeJS(a.url,r.cookies.hosts),!0),l.onload=function(){if(!("responseUrl"in l)&&"responseURL"in l&&(l.responseUrl=l.responseURL),a.trackRedirects){a.url!==l.responseUrl&&(l.origUrl=a.url,l.redirectUrl=l.responseUrl,l.redirectHistory=[a.url,l.responseUrl]);var e=t.getRedirectUrlFromBody(l.responseUrl,l.responseText,a.purpose);e.length&&(l.origUrl=a.url,l.redirectUrl=e[0],m.Utils.isArray(l.redirectHistory)?l.redirectHistory.push(e[0]):l.redirectHistory=[a.url,e[0]])}if(l.status>=200&&l.status<400){var r=l.getResponseHeader("Content-Type");if(r&&r.indexOf("application/json")>-1){var i;try{i=JSON.parse(l.responseText)}catch(e){i=!1}i&&(l.responseText=i)}a.hasOwnProperty("scope")&&a.scope?s.bind(a.scope)(l.responseText,"success",l):s(l.responseText,"success",l)}else s(l,"error",null)},l.onerror=function(){console.log("Request failed",l.statusText),s(l,"error",null)},"POST"==e.type&&o&&a.url.indexOf("base-search.net")>-1?(l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8",!0),l.send(o)):"POST"===e.type&&a.data?l.send(a.data):l.send()}(i,e))};if(s>0){var T=m.Utils.defer(E,s);return{isFakeXhr:!0,abort:function(){clearTimeout(T);m.Utils.callback(o,e.scope,[null,"aborted",{status:-1}])}}}return E()},followRedirects:function(e,t){var r={initiatingUrl:e,requestId:null,jqXhr:null,urls:[]},a=function(e){var t=e.url;if(t===r.initiatingUrl)r.requestId=e.requestId;else if(e.requestId!==r.requestId)return;r.urls.push(t),m.Ajax.isRedirectUrl(t)||r.jqXhr.abort()},i=function(e){r.jqXhr=m.Ajax.request({url:e,requestListenFn:a,callback:function(a,n,o){if("success"===n){var s=m.Ajax.getRedirectUrlFromBody(e,a);s.length>0?(r.initiatingUrl=s[0],i(s[0])):m.Utils.callback(t,null,[r.urls])}else m.Utils.callback(t,null,[r.urls])}})};i(e)},isPaperpileAjax:function(e){return!!e&&(!!e.match(/ajax\/crud\/query/)||!!e.match(/ajax/))},getRedirectUrlFromBody:function(e,t,r){var a=e,i=null;if(m.crawling.Proxy.isProxied(e)){var n=m.crawling.Proxy.deproxify(e);n&&n.cleanUrl&&(e=n.cleanUrl)}if(e.match(/.*readcube.com\/articles\/(10\..*)/i))return["http://dx.doi.org/"+RegExp.$1];if(t&&m.Utils.isString(t)){if(e.match(/pt.wkhealth.com\/pt\/re\/lwwgateway\/landingpage/))if((i=t.match(/OvidAN\s*=\s*'([^\']+)'/))&&i[1])return["http://ovidsp.ovid.com/ovidweb.cgi?T=JS&MODE=ovid&NEWS=n&PAGE=fulltext&D=ovft&SEARCH="+i[1]+".an.","http://content.wkhealth.com/linkback/openurl?an="+i[1]];if(t.match(/EZproxyCheckBack/)&&(i=t.match(/location.href\s*=\s*"([^\"]+)"/))&&i[1])return[i[1]];if(e.match(/fulltext\.do/i)&&t.match(/^http/))return[t];if(e.match(/nature\.com\/doifinder/i)&&(i=t.match(/href="([^\"]+)"\s+class="articletext"/))&&i[1])return["http://www.nature.com"+i[1]];if(e.match(/linkinghub\.elsevier\.com/)){if((i=t.match(/name=\"urls\[\'sd\'\]\"\s+value=\"(http:\/\/www.sciencedirect.com\/[^\"]+)\"/))&&i[1])return[i[1]];if((i=t.match(/name=\"redirectURL\"\s+value=\"([^\"]+)\"/))&&i[1]){if(i[1]=unescape(i[1].replace(/\?_returnURL=.*/,"")),m.crawling.Proxy.isProxied(a)){i[1]=i[1].replace(/\?.+/,"");var o=m.crawling.Proxy.inferLoginUrl(a);null!==o&&(i[1]=m.crawling.Proxy.getLoginUrl(o,i[1]+"?par=ezproxy"))}return[i[1]]}}if(t.match(/googleJavaScriptRedirect/i)&&(i=t.match(/URL='(.*?)'/))&&i[1])return[i[1]];if(t.match(/http-equiv="refresh"/i)&&(i=t.match(/URL=(.*?)"/))&&i[1]){if(i[1].match(/^\//))return[new f(i[1]).resolve(new f(e)).toString()];if(i[1].match(/^http/))return[i[1]]}if(e.match(/ebscohost\.com\/plink/i)&&(i=t.match(/window\.location\.replace\('([^']+)'\)/))&&i[1])return[new f(i[1]).resolve(new f(e)).toString()];if((e.match(/heinonline\.org\/hol/i)||e.match(/heinonline\.org\/hol\/printrequest/i))&&(i=t.match(/window\.location\s*=\s*"([^"]+)/))&&i[1])return[new f(i[1]).resolve(new f(e)).toString()];if(e.match(/ncbi\.nlm\.nih\.gov\/pubmed/i)&&"PDF"===r&&(i=t.match(/Full text links[^=]+="([^"]+)"/i))&&i[1])return[new f(i[1].replace(/&amp;/g,"&")).resolve(new f(e)).toString()];if((e.match(/pubmed\.ncbi\.nlm\.nih\.gov/i)||e.match(/ncbi\.nlm\.nih\.gov\/labs\/pubmed/i))&&"PDF"===r){var s=$(t).find(".full-text-links-list a");if(s&&s.length)return[new f(m.Utils.getHtmlAttribute(s[0],"href")).resolve(new f(e)).toString()]}if(e.match(/insights\.ovid\.com/i)&&"PDF"===r){var l=/var\s*journalURL\s*=\s*"([^"]+)"/i.exec(t);if(l&&l[1])return[l[1]]}if(e.match(/adsabs\.harvard\.edu\/#abs\/arXiv/i)){var c=e.match(/.*arXiv:(\d+\.\d+)/);if(c&&c[1])return["https://arxiv.org/abs/"+c[1]]}if(e.match(/sfx\./i)||e.match(/sfxit\./i)||e.match(/sfxhosted\./i)||e.match(/exlibrisgroup\.com\S+openurl/i)||e.match(/exlibrisgroup\.com\S+uresolver/i))return new m.crawling.LinkResolver({url:e,text:t}).sfx();if(e.match(/search\.serialssolutions\.com/i)&&!e.match(/vb3lk7eb4t\./))return new m.crawling.LinkResolver({url:e,text:t}).serialsSolutions();if(e.match(/\.on\.worldcat\.org/i)&&(i=t.match(/a\s+class="fullTextLink"\s+href="([^"]+)/))&&i[1])return[i[1]];if(e.match(/patents\.google\.com\/scholar/i)){var u=e.match(/\/scholar\/(\d+)/);if(u&&u[1])return["https://scholar.google.com/scholar?cluster="+u[1]]}}return[]},getCookieNodeJS:function(e,t){void 0===t&&(t={});var r="",a=[];if(e&&(r=e.toLowerCase().replace(/^([^\/]+:\/\/)/,"").replace(/\/.*/,"").replace(/:.*/,"")),""!==r&&r.length>4){r in t&&(a=a.concat(t[r]));for(var i=r.split(/\./);i.length>=2;){var n=i.join(".");"."+n in t&&(a=a.concat(t["."+n])),i.shift()}}var o={},s=[];return a.forEach((function(e){(e=e.replace(/;\s*$/,"").replace(/\s/g,"")).length>=3&&e.match(/=/)&&(e in o||(s.push(e),o[e]=1))})),s.join("; ")},isRedirectUrl:function(e,t){var r=["bit\\.ly/","doi\\.wiley\\.com\\/","doi\\.acm\\.org\\/","doi\\.org\\/[a-z:]*10\\.","dx\\.plos\\.org\\/","entrez\\/eutils\\/elink\\.fcgi","f1000r\\.es\\/","feeds\\.plos\\.org\\/~r","feeds\\.nature\\.com\\/~r","ff\\.im\\/","fulltext\\.do","goo\\.gl\\/","google\\.com\\/url\\?","is\\.gd\\/","agu\\.org\\/pubs\\/crossref","japanlinkcenter\\.org","worldscinet\\.com","joi\\.jlc\\.jst\\.go\\.jp\\/jst\\.jstage\\/expanim\\/","joi\\.jlc\\.jst\\.go\\.jp\\/dn","https?:\\/\\/linkinghub\\.elsevier\\.com","nature\\.com\\/doifinder\\/","nyti\\.ms\\/","ow\\.ly\\/","shar\\.es\\/","t\\.co\\/","tinyurl\\.com\\/","openurl\\.ingenta\\.com\\/","\\/xflink\\?","\\/cgi\\/doi\\/","\\/cgi\\/pmidlookup\\?","\\/lookup\\/","\\/resolve\\/","readcube\\.com\\/articles\\/","nature\\.com\\/(embo|msb)","ovidsp\\.tx\\.ovid\\.com.+pdflink=","emeraldinsight\\.com.*(articleid|contentid|chapterid)=","landesbioscience\\.com","hdl\\.handle\\.net\\/","springerlink\\.metapress\\.com\\/","mendeley.com\\/files\\/.*","opticsinfobase\\.org","icevirtuallibrary\\.com\\/content\\/","envplan\\.com","perceptionweb\\.com","hthpweb\\.com","summon\\.serialssolutions\\.com\\/2\\.0\\.0\\/link","maneyonline\\.com","palgrave-journals\\.com\\/","link\\.aps\\.org\\/","ascopubs\\.org\\/content","medphys\\.org","asadl\\.org","avspublications\\.org","aip\\.org","doi\\.emh\\.ch","palgraveconnect\\.com","oxfordjournals\\.org","sfx\\.\\S+\\.\\S+\\?","sfxit\\.\\S+\\.\\S+\\?","sfxhosted\\.\\S+\\.\\S+\\?","exlibrisgroup\\.com\\S+openurl","exlibrisgroup\\.com\\S+uresolver","search\\.serialssolutions\\.com","on\\.worldcat\\.org","linker2\\.worldcat\\.org","ebscohost\\.com\\/plink","heinonline\\.org\\/hol.*men_hide","ui\\.adsabs\\.harvard\\.edu\\/#abs\\/arxiv:","patents\\.google\\.com\\/scholar","emeraldinsight\\.com","plosgenetics\\.org","plosone\\.org"],a=[],i=["pubmed\\.ncbi\\.nlm\\.nih\\.gov","ncbi\\.nlm\\.nih\\.gov\\/pubmed","ncbi\\.nlm\\.nih\\.gov\\/labs\\/pubmed","insights\\.ovid\\.com"];if(m.crawling.Proxy.isLoginUrl(e))return!0;e=e.toLowerCase();for(var n=0;n<r.length;n++)if(e.match(r[n]))return!0;if("PDF"===t)for(n=0;n<i.length;n++)if(e.match(i[n]))return!0;if("META"===t)for(n=0;n<a.length;n++)if(e.match(a[n]))return!0;return!1}},a=Array.prototype,i=a.slice,m.Array={remove:function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return e.splice(r,1),e},pluck:function(e,t){var r,a,i,n=[];for(r=0,a=e.length;r<a;r++)i=e[r],n.push(i[t]);return n},sort:function(e,t){e.sort(t)},filter:function(e,t,r){return e.filter(t,r)},each:function(e,t,r){return e.forEach(t,r)},map:function(e,t,r){return e.map(t,r)},contains:function(e,t){return-1!==e.indexOf(t)},indexOf:function(e,t,r){return e.indexOf(t,r)},merge:function(){var e,t,r=i.call(arguments),a=[];for(e=0,t=r.length;e<t;e++)a=a.concat(r[e]);return m.Array.unique(a)},flatten:function(e){var t=[];return function e(r){var a,i,n;for(a=0,i=r.length;a<i;a++)n=r[a],m.Utils.isArray(n)?e(n):t.push(n);return t}(e)},stringUnique:function(e){var t={},r=[];return e.forEach((function(e){void 0===t[e]&&(r.push(e),t[e]=!0)})),r},unique:function(e){for(var t,r=[],a=0,i=e.length;a<i;a++)t=e[a],-1===m.Array.indexOf(r,t)&&r.push(t);return r},mapCounts:function(e,t,r){var a={},i=e.length,n=void 0,o=0;if(t)if("string"==typeof t)for(;i--;)void 0===(o=a[n=e[i][t]])&&(o=0),a[n]=o+1;else for(;i--;)void 0===(o=a[n=t.call(r,e[i])])&&(o=0),a[n]=o+1;else for(;i--;)void 0===(o=a[n=e[i]])&&(o=0),a[n]=o+1;return a},mapBoolean:function(e,t,r){var a={},i=e.length;if(t)if("string"==typeof t)for(;i--;)a[e[i][t]]=!0;else for(;i--;)a[t.call(r,e[i])]=!0;else for(;i--;)a[e[i]]=!0;return a},toMap:function(e,t,r){var a={};if(null==e)return a;var i=e.length;if(!t)return console.log("toMap requires a getKey argument"),{};if("string"==typeof t)for(;i--;)a[e[i][t]]=e[i];else for(;i--;)a[t.call(r,e[i])]=e[i];return a},batch:function(e,t){for(var r=[];;){for(var a=[],i=0;i<t;i++){var n=e.pop();if(!n)break;a.push(n)}if(r.push(a),0===e.length)break}return r}},s=Object.prototype.toString,m.Utils={languages:{aa:{n:["Afar"],a3:"aar"},ab:{n:["Abkhazian"],a3:"abk"},af:{n:["Afrikaans"],a3:"afr"},ak:{n:["Akan"],a3:"aka"},sq:{n:["Albanian"],a3:"alb"},am:{n:["Amharic"],a3:"amh"},ar:{n:["Arabic"],a3:"ara"},an:{n:["Aragonese"],a3:"arg"},hy:{n:["Armenian"],a3:"arm"},as:{n:["Assamese"],a3:"asm"},av:{n:["Avaric"],a3:"ava"},ae:{n:["Avestan"],a3:"ave"},ay:{n:["Aymara"],a3:"aym"},az:{n:["Azerbaijani"],a3:"aze"},ba:{n:["Bashkir"],a3:"bak"},bm:{n:["Bambara"],a3:"bam"},eu:{n:["Basque"],a3:"baq"},be:{n:["Belarusian"],a3:"bel"},bn:{n:["Bengali"],a3:"ben"},bh:{n:["Bihari languages"],a3:"bih"},bi:{n:["Bislama"],a3:"bis"},bs:{n:["Bosnian"],a3:"bos"},br:{n:["Breton"],a3:"bre"},bg:{n:["Bulgarian"],a3:"bul"},my:{n:["Burmese"],a3:"bur"},ca:{n:["Catalan","Valencian"],a3:"cat"},ch:{n:["Chamorro"],a3:"cha"},ce:{n:["Chechen"],a3:"che"},zh:{n:["Chinese"],a3:"chi"},cu:{n:["Church Slavic","Old Slavonic","Church Slavonic","Old Bulgarian","Old Church Slavonic"],a3:"chu"},cv:{n:["Chuvash"],a3:"chv"},kw:{n:["Cornish"],a3:"cor"},co:{n:["Corsican"],a3:"cos"},cr:{n:["Cree"],a3:"cre"},cs:{n:["Czech"],a3:"cze"},da:{n:["Danish"],a3:"dan"},dv:{n:["Divehi","Dhivehi","Maldivian"],a3:"div"},nl:{n:["Dutch","Flemish"],a3:"dut"},dz:{n:["Dzongkha"],a3:"dzo"},en:{n:["English","Englisch","Inglese","Anglais"],a3:"eng"},eo:{n:["Esperanto"],a3:"epo"},et:{n:["Estonian"],a3:"est"},ee:{n:["Ewe"],a3:"ewe"},fo:{n:["Faroese"],a3:"fao"},fj:{n:["Fijian"],a3:"fij"},fi:{n:["Finnish"],a3:"fin"},fr:{n:["French","Fran\xe7ais"],a3:"fre"},fy:{n:["Western Frisian"],a3:"fry"},ff:{n:["Fulah"],a3:"ful"},ka:{n:["Georgian"],a3:"geo"},de:{n:["German"],a3:["ger","deu"]},gd:{n:["Gaelic","Scottish Gaelic"],a3:"gla"},ga:{n:["Irish"],a3:"gle"},gl:{n:["Galician"],a3:"glg"},gv:{n:["Manx"],a3:"glv"},el:{n:["Greek"],a3:"gre"},gn:{n:["Guarani"],a3:"grn"},gu:{n:["Gujarati"],a3:"guj"},ht:{n:["Haitian","Haitian Creole"],a3:"hat"},ha:{n:["Hausa"],a3:"hau"},he:{n:["Hebrew"],a3:"heb"},hz:{n:["Herero"],a3:"her"},hi:{n:["Hindi"],a3:"hin"},ho:{n:["Hiri Motu"],a3:"hmo"},hr:{n:["Croatian"],a3:"hrv"},hu:{n:["Hungarian"],a3:"hun"},ig:{n:["Igbo"],a3:"ibo"},is:{n:["Icelandic"],a3:"ice"},io:{n:["Ido"],a3:"ido"},ii:{n:["Sichuan Yi","Nuosu"],a3:"iii"},iu:{n:["Inuktitut"],a3:"iku"},ie:{n:["Interlingue","Occidental"],a3:"ile"},id:{n:["Indonesian"],a3:"ind"},ik:{n:["Inupiaq"],a3:"ipk"},it:{n:["Italian","Italiano"],a3:"ita"},jv:{n:["Javanese"],a3:"jav"},ja:{n:["Japanese"],a3:"jpn"},kl:{n:["Kalaallisut","Greenlandic"],a3:"kal"},kn:{n:["Kannada"],a3:"kan"},ks:{n:["Kashmiri"],a3:"kas"},kr:{n:["Kanuri"],a3:"kau"},kk:{n:["Kazakh"],a3:"kaz"},km:{n:["Central Khmer"],a3:"khm"},ki:{n:["Kikuyu","Gikuyu"],a3:"kik"},rw:{n:["Kinyarwanda"],a3:"kin"},ky:{n:["Kirghiz","Kyrgyz"],a3:"kir"},kv:{n:["Komi"],a3:"kom"},kg:{n:["Kongo"],a3:"kon"},ko:{n:["Korean"],a3:"kor"},kj:{n:["Kuanyama","Kwanyama"],a3:"kua"},ku:{n:["Kurdish"],a3:"kur"},lo:{n:["Lao"],a3:"lao"},la:{n:["Latin"],a3:"lat"},lv:{n:["Latvian"],a3:"lav"},li:{n:["Limburgan","Limburger","Limburgish"],a3:"lim"},ln:{n:["Lingala"],a3:"lin"},lt:{n:["Lithuanian"],a3:"lit"},lb:{n:["Luxembourgish","Letzeburgesch"],a3:"ltz"},lu:{n:["Luba-Katanga"],a3:"lub"},lg:{n:["Ganda"],a3:"lug"},mk:{n:["Macedonian"],a3:"mac"},mh:{n:["Marshallese"],a3:"mah"},ml:{n:["Malayalam"],a3:"mal"},mi:{n:["Maori"],a3:"mao"},mr:{n:["Marathi"],a3:"mar"},ms:{n:["Malay"],a3:"may"},mg:{n:["Malagasy"],a3:"mlg"},mt:{n:["Maltese"],a3:"mlt"},mn:{n:["Mongolian"],a3:"mon"},na:{n:["Nauru"],a3:"nau"},nv:{n:["Navajo","Navaho"],a3:"nav"},nr:{n:["Ndebele, South","South Ndebele"],a3:"nbl"},nd:{n:["Ndebele, North","North Ndebele"],a3:"nde"},ng:{n:["Ndonga"],a3:"ndo"},ne:{n:["Nepali"],a3:"nep"},nn:{n:["Norwegian Nynorsk","Nynorsk, Norwegian"],a3:"nno"},nb:{n:["Bokm\xe5l, Norwegian","Norwegian Bokm\xe5l"],a3:"nob"},no:{n:["Norwegian"],a3:"nor"},ny:{n:["Chichewa","Chewa","Nyanja"],a3:"nya"},oc:{n:["Occitan","Proven\xe7al"],a3:"oci"},oj:{n:["Ojibwa"],a3:"oji"},or:{n:["Oriya"],a3:"ori"},om:{n:["Oromo"],a3:"orm"},os:{n:["Ossetian","Ossetic"],a3:"oss"},pa:{n:["Panjabi","Punjabi"],a3:"pan"},fa:{n:["Persian"],a3:"per"},pi:{n:["Pali"],a3:"pli"},pl:{n:["Polish"],a3:"pol"},pt:{n:["Portuguese"],a3:"por"},ps:{n:["Pushto","Pashto"],a3:"pus"},qu:{n:["Quechua"],a3:"que"},rm:{n:["Romansh"],a3:"roh"},ro:{n:["Romanian","Moldavian","Moldovan"],a3:"rum"},rn:{n:["Rundi"],a3:"run"},ru:{n:["Russian"],a3:"rus"},sg:{n:["Sango"],a3:"sag"},sa:{n:["Sanskrit"],a3:"san"},si:{n:["Sinhala","Sinhalese"],a3:"sin"},sk:{n:["Slovak"],a3:"slo"},sl:{n:["Slovenian"],a3:"slv"},se:{n:["Northern Sami"],a3:"sme"},sm:{n:["Samoan"],a3:"smo"},sn:{n:["Shona"],a3:"sna"},sd:{n:["Sindhi"],a3:"snd"},so:{n:["Somali"],a3:"som"},st:{n:["Sotho, Southern"],a3:"sot"},es:{n:["Spanish","Castilian"],a3:"spa"},sc:{n:["Sardinian"],a3:"srd"},sr:{n:["Serbian"],a3:"srp"},ss:{n:["Swati"],a3:"ssw"},su:{n:["Sundanese"],a3:"sun"},sw:{n:["Swahili"],a3:"swa"},sv:{n:["Swedish"],a3:"swe"},ty:{n:["Tahitian"],a3:"tah"},ta:{n:["Tamil"],a3:"tam"},tt:{n:["Tatar"],a3:"tat"},te:{n:["Telugu"],a3:"tel"},tg:{n:["Tajik"],a3:"tgk"},tl:{n:["Tagalog"],a3:"tgl"},th:{n:["Thai"],a3:"tha"},bo:{n:["Tibetan"],a3:"tib"},ti:{n:["Tigrinya"],a3:"tir"},to:{n:["Tonga"],a3:"ton"},tn:{n:["Tswana"],a3:"tsn"},ts:{n:["Tsonga"],a3:"tso"},tk:{n:["Turkmen"],a3:"tuk"},tr:{n:["Turkish"],a3:"tur"},tw:{n:["Twi"],a3:"twi"},ug:{n:["Uighur","Uyghur"],a3:"uig"},uk:{n:["Ukrainian"],a3:"ukr"},ur:{n:["Urdu"],a3:"urd"},uz:{n:["Uzbek"],a3:"uzb"},ve:{n:["Venda"],a3:"ven"},vi:{n:["Vietnamese"],a3:"vie"},vo:{n:["Volap\xfck"],a3:"vol"},cy:{n:["Welsh"],a3:"wel"},wa:{n:["Walloon"],a3:"wln"},wo:{n:["Wolof"],a3:"wol"},xh:{n:["Xhosa"],a3:"xho"},yi:{n:["Yiddish"],a3:"yid"},yo:{n:["Yoruba"],a3:"yor"},za:{n:["Zhuang","Chuang"],a3:"zha"},zu:{n:["Zulu"],a3:"zul"}},diacriticsMap:{A:"A","\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY",B:"B","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B",C:"C","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C",D:"D","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz",E:"E","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E",F:"F","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F",G:"G","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G",H:"H","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H",I:"I","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I",J:"J","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J",K:"K","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K",L:"L","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj",M:"M","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M",N:"N","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj",O:"O","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU",P:"P","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P",Q:"Q","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q",R:"R","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R",S:"S","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S",T:"T","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ",U:"U","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U",V:"V","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY",W:"W","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W",X:"X","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X",Y:"Y","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y",Z:"Z","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z",a:"a","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay",b:"b","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b",c:"c","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c",d:"d","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz",e:"e","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e",f:"f","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f",g:"g","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g",h:"h","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv",i:"i","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i",j:"j","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j",k:"k","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k",l:"l","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj",m:"m","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m",n:"n","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj",o:"o","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo",p:"p","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p",q:"q","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q",r:"r","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r",s:"s","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s",t:"t","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz",u:"u","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u",v:"v","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy",w:"w","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w",x:"x","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x",y:"y","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y",z:"z","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"},stopwords:{about:1,again:1,all:1,almost:1,also:1,although:1,always:1,among:1,and:1,another:1,any:1,are:1,because:1,been:1,before:1,being:1,between:1,both:1,but:1,can:1,could:1,did:1,does:1,done:1,due:1,during:1,each:1,either:1,enough:1,especially:1,etc:1,for:1,found:1,from:1,further:1,had:1,has:1,have:1,having:1,here:1,how:1,however:1,into:1,its:1,itself:1,just:1,made:1,mainly:1,make:1,may:1,might:1,most:1,mostly:1,must:1,nearly:1,neither:1,nor:1,not:1,obtained:1,often:1,our:1,overall:1,perhaps:1,quite:1,rather:1,really:1,regarding:1,seem:1,seen:1,several:1,should:1,show:1,showed:1,shown:1,shows:1,since:1,some:1,such:1,than:1,that:1,the:1,their:1,theirs:1,them:1,then:1,there:1,therefore:1,these:1,they:1,this:1,those:1,through:1,thus:1,upon:1,use:1,used:1,using:1,various:1,very:1,was:1,were:1,what:1,when:1,which:1,while:1,with:1,within:1,without:1,would:1,"[":1,"]":1,"{":1,"}":1,"(":1,")":1,_:1,$:1,"!":1,"#":1,"^":1,"&":1,"*":1,"'":1,'"':1,":":1,"?":1,".":1,",":1,";":1,"%":1,"|":1,"@":1},decode:function(e){try{var t=JSON.parse(e)}catch(t){throw m.log({type:"exception",subtype:"Follow up: Invalid JSON",msg:"Could not decode JSON string in Utils.decode ",str:m.Utils.escape(e),stack:m.Utils.stackTrace(),error:t}),t}return t},encode:function(e){return JSON.stringify(e)},convertHtmlEntitiesToUnicode:function(e){for(var t=e.split(/(&[^;]+;)/),r=0;r<t.length;r++)if(t[r].match(/^&[^;]+;$/))if("undefined"!=typeof document){var a=document.createElement("div");a.innerHTML=t[r],t[r]=a.textContent}else t[r]=$("<textarea />").html(t[r]).text();return t.join("")},escapeXML:function(e){return m.Utils.isString(e)?(e||"").replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;"):e},escape:function(e,t){var r={exclude:[]};m.Utils.apply(r,t||{}),e=(e=(e=e.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&");var a=document.createElement("div");a.appendChild(document.createTextNode(e));for(var i=a.innerHTML,n=0;n<r.exclude.length;n++){var o=new RegExp("&lt;"+r.exclude[n]+"&gt;","g");i=i.replace(o,"<"+r.exclude[n]+">"),o=new RegExp("&lt;\\/"+r.exclude[n]+"&gt;","g"),i=i.replace(o,"</"+r.exclude[n]+">")}return i},escapeAttributeValue:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(e).replace(/[&<>"'\/]/g,(function(e){return t[e]}))},addAllDiacritics:function(e){var t=this;if(!t.reversedDiacriticsMap){for(var r in t.reversedDiacriticsMap={},t.diacriticsMap)t.diacriticsMap[r]in t.reversedDiacriticsMap||(t.reversedDiacriticsMap[t.diacriticsMap[r]]=[]),t.reversedDiacriticsMap[t.diacriticsMap[r]].push(r);for(var r in t.reversedDiacriticsMap)t.reversedDiacriticsMap[r]="["+t.reversedDiacriticsMap[r].join("")+"]"}for(var a=e.split(""),i="",n=0;n<a.length;n++)i+=a[n]in t.reversedDiacriticsMap?t.reversedDiacriticsMap[a[n]]:a[n];return i},replaceDiacritics:function(e){for(var t=e.split(""),r="",a=0;a<t.length;a++)r+=t[a]in this.diacriticsMap?this.diacriticsMap[t[a]]:t[a];return r},replaceU0308:function(e){if(!e)return e;if(!e.match(/\u0308/))return e;for(var t,r=new RegExp("(.*)([AEIOUaeiouy])(\u0308)(.*)","g"),a=0,i={a:"\xe4",e:"\xeb",i:"\xef",o:"\xf6",u:"\xfc",y:"\xff",A:"\xc4",E:"\xcb",I:"\xcf",O:"\xd6",U:"\xdc"};null!==(t=r.exec(e))&&!(a++>50);)e=t[1]+i[t[2]]+t[4],r.lastIndex=0;return e=e.replace(/\u0308/g,"")},replaceControlChars:function(e){return e?e=e.replace(/[\u0000-\u0008\u000B-\u001F]/g,""):e},addWbrs:function(e){if(!e)return e;var t,r,a=[],i=0,n={},o=new RegExp("(.{30})");for(var s in(r=(e+="").replace(/\s+$/g,"").replace(/^\s+/g,"").split(/(<\/?(?:span|i|sub|sup)[^>]*>)/)).forEach((function(e){e.match(/^<\/?(?:span|i|sub|sup)[^>]*>$/)?a.push({str:e,type:"html"}):e.split(/(\s+)/).forEach((function(e){e.match(/^\s+$/)?(a.push({str:" <wbr>",type:"space"}),i++):""!=e&&(a.push({str:e,type:"text",wbrs:[]}),i in n||(n[i]=[]),n[i].push(a.length-1))}))})),n){var l="";if(n[s].forEach((function(e){l+=a[e].str})),l.length>=30){for(r=l.split(/([_\/\-]+)/),t=0;t<r.length;t++)r[t].match(/^[_\/\-]+$/)?r[t]=r[t]+"<wbr>":r[t].length>=30&&(r[t]=r[t].split(o).join("<wbr>").replace(/^<wbr>/,""));var c=0;r.join("").split(/(<wbr>)/).forEach((function(e){if("<wbr>"==e){var t=0;n[s].forEach((function(e){c>t&&c<=t+a[e].str.length&&a[e].wbrs.push(c-t-1),t+=a[e].str.length}))}else c+=e.length}))}}return e=[],a.forEach((function(t){"text"==t.type&&t.wbrs.length&&(r=t.str.split(""),t.wbrs.forEach((function(e){r[e]+="<wbr>"})),t.str=r.join("")),e.push(t.str)})),e.join("")},escapeRegex:function(e){return e?e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\^/g,"\\^")).replace(/\|/g,"\\|")).replace(/\$/g,"\\$")).replace(/\?/g,"\\?")).replace(/\+/g,"\\+")).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")).replace(/\[/g,"\\[")).replace(/\]/g,"\\]")).replace(/\*/g,"\\*"):e},removeQuotationMarksAndPunctation:function(e){return e?e.replace(new RegExp("^[\u2018\u2019\u201b\u201c\u201d\u201e\u201f\xa8\"'`\\-\\(\\[\\{\\)\\]\\}\\.,;:\\?\\!]+","i"),"").replace(new RegExp("[\u2018\u2019\u201b\u201c\u201d\u201e\u201f\xa8\"'`\\-\\(\\[\\{\\)\\]\\}\\.,;:\\?\\!]+$","i"),""):""},normalizeIdsForSearch:function(e){if(!e)return e;if((e=this.removeQuotationMarksAndPunctation(e)).match(/^(pmid|doi|pmc|arxivid|isbn):/i))return e;if(e.match(/^10\.[^\/]+\/[^\s\>\<]+/))return"doi:"+e;if(e.match(/^\d{7,8}$/))return"pmid:"+e;if(e.match(/PMC\d+/i))return"pmc:"+e;if(e.match(/\d{4}\.\d{4}/))return"arxivid:"+e;var t=e.replace(/[-\s\.]/g,"");return t.match(/^\d{10}$/)||t.match(/^\d{13}$/)||t.match(/^\d{9}X$/i)||t.match(/^\d{12}X$/i)?"isbn:"+e:(e.toLowerCase()in this.stopwords&&(e=""),e)},pp:function(e){console.warn(this.prettyPrint(e))},prettyPrint:function(e){return JSON.stringify(m.Utils.clone(e),null,4)},getPath:function(e,t){for(var r,a=t.split("."),i=e,n=0;n<a.length;n++){var o=a[n];if(void 0===i[o])return i[o];i=r=i[o]}return r},setPath:function(e,t,r){for(var a,i=t.split("."),n=e,o=0;o<i.length;o++){if(a=i[o],o==i.length-1){n[a]=r;break}n[a]||(n[a]={}),n=n[a]}},getCslLocales:function(){return[{abbr:"default",name:"Language: Default"},{abbr:"af-ZA",name:"Afrikaans"},{abbr:"ar",name:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},{abbr:"bg-BG",name:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438"},{abbr:"ca-AD",name:"Catal\xe0"},{abbr:"cs-CZ",name:"\u010ce\u0161tina"},{abbr:"cy-GB",name:"Cymraeg"},{abbr:"da-DK",name:"Dansk"},{abbr:"de-AT",name:"Deutsch (\xd6sterreich)"},{abbr:"de-CH",name:"Deutsch (Schweiz)"},{abbr:"de-DE",name:"Deutsch (Deutschland)"},{abbr:"el-GR",name:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"},{abbr:"en-GB",name:"English (UK)"},{abbr:"en-US",name:"English (US)"},{abbr:"es-CL",name:"Espa\xf1ol (Chile)"},{abbr:"es-ES",name:"Espa\xf1ol (Espa\xf1a)"},{abbr:"es-MX",name:"Espa\xf1ol (M\xe9xico)"},{abbr:"et-EE",name:"Eesti"},{abbr:"eu",name:"Euskara"},{abbr:"fa-IR",name:"\u0641\u0627\u0631\u0633\u06cc"},{abbr:"fi-FI",name:"Suomi"},{abbr:"fr-CA",name:"Fran\xe7ais (Canada)"},{abbr:"fr-FR",name:"Fran\xe7ais (France)"},{abbr:"he-IL",name:"\u05e2\u05d1\u05e8\u05d9\u05ea"},{abbr:"hi-IN",name:"\u0939\u093f\u0902\u0926\u0940"},{abbr:"hr-HR",name:"Hrvatski"},{abbr:"hu-HU",name:"Magyar"},{abbr:"id-ID",name:"Bahasa Indonesia"},{abbr:"is-IS",name:"\xcdslenska"},{abbr:"it-IT",name:"Italiano"},{abbr:"ja-JP",name:"\u65e5\u672c\u8a9e"},{abbr:"km-KH",name:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a"},{abbr:"ko-KR",name:"\ud55c\uad6d\uc5b4"},{abbr:"la",name:"Latina"},{abbr:"lt-LT",name:"Lietuvi\u0173"},{abbr:"lv-LV",name:"Latvie\u0161u"},{abbr:"mn-MN",name:"\u041c\u043e\u043d\u0433\u043e\u043b"},{abbr:"nb-NO",name:"Norsk bokm\xe5l"},{abbr:"nl-NL",name:"Nederlands"},{abbr:"nn-NO",name:"Norsk nynorsk"},{abbr:"pl-PL",name:"Polski"},{abbr:"pt-BR",name:"Portugu\xeas (Brasil)"},{abbr:"pt-PT",name:"Portugu\xeas (Portugal)"},{abbr:"ro-RO",name:"Rom\xe2n\u0103"},{abbr:"ru-RU",name:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"},{abbr:"sk-SK",name:"Sloven\u010dina"},{abbr:"sl-SI",name:"Sloven\u0161\u010dina"},{abbr:"sr-RS",name:"\u0421\u0440\u043f\u0441\u043a\u0438 / Srpski"},{abbr:"sv-SE",name:"Svenska"},{abbr:"th-TH",name:"\u0e44\u0e17\u0e22"},{abbr:"tr-TR",name:"T\xfcrk\xe7e"},{abbr:"uk-UA",name:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"},{abbr:"vi-VN",name:"Ti\u1ebfng Vi\u1ec7t"},{abbr:"zh-CN",name:"\u4e2d\u6587 (\u4e2d\u56fd\u5927\u9646)"},{abbr:"zh-TW",name:"\u4e2d\u6587 (\u53f0\u7063)"}]},merge:function(e,t){for(var r=Object.keys(t),a=0;a<r.length;a++){var i=r[a];e[i]&&t[i]&&this.isObject(e[i])&&this.isObject(t[i])?this.merge(e[i],t[i]):void 0!==t[i]&&(e[i]=t[i])}},extend:function(e){for(var t,r=Array.prototype.slice.call(arguments,1),a=0,i=r.length;a<i;a++)for(var n in t=r[a]||{})t.hasOwnProperty(n)&&(e[n]=t[n]);return e},extendIf:function(e,t){var r;if(e)for(r in t)void 0===e[r]&&(e[r]=t[r]);return e},objectEach:function(e,t,r){for(var a in e)if(e.hasOwnProperty(a)&&!1===t.call(r||e,a,e[a],e))return},bind:function(e,t,r,a){if(2===arguments.length)return function(){return e.apply(t,arguments)};void 0===a&&(a=!0);var i=e,n=Array.prototype.slice;return function(){var e=r||arguments;return!0===a&&void 0!==r&&(e=(e=n.call(arguments,0)).concat(r)),i.apply(t,e)}},strip:function(e){return e=(e=e.replace(/^\s*/,"")).replace(/\s*$/,"")},normalizeString:function(e){return e=e?e.replace(/[\t\n\s\r]+/g," ").replace(/^\s+/,"").replace(/\s+$/,""):""},joinExternalPDFFilenames:function(e){var t=[];return e.forEach((function(e){e=e.replace(/^\s*(file|internal-pdf|internal-file):?\/*/i,"").replace(/^\s+/,"").replace(/\s+$/,""),t.push("internal-file://"+e)})),t.join(" ")},splitExternalPDFFilenames:function(e){var t=[];return this.isString(e)&&e.split(/\s*(?:file|internal-pdf|internal-file):?\/*/).forEach((function(e){e.length>0&&t.push(e)})),t},isPdfRestricted:function(e){var t=!1;return("restricted"===e||"loginrequired"===e||"proxyrestricted"===e)&&(t=!0),t},ellipsis:function(e,t,r,a){void 0===r&&(r=!1),void 0===a&&(a="&hellip;");var i=Math.abs(t);if(e&&e.length>i){if(r&&t>0){var n=e.substr(0,i-2),o=Math.max(n.lastIndexOf(" "),n.lastIndexOf("."),n.lastIndexOf("!"),n.lastIndexOf("?"));if(-1!==o&&o>=i-15)return n.substr(0,o)+a}else if(r&&t<0){n=e.substr(2);for(var s=[" ",".","!","?"],l=e.length,c=0;c<s.length;c++)-1!==n.indexOf(s[c])&&(l=Math.min(l,n.indexOf(s[c])));if(l<15)return a+n.substr(l+1)}return t>0?e.substr(0,t-3)+a:a+e.substr(e.length-i)}return e},midEllipsis:function(e,t,r,a){if(!e)return e;if(t<1)return e;if(void 0===a&&(a=" ... "),(e+="").length<=t)return e;void 0===r&&(r=!1);var i,n=r?0:1,o=[],s=[];i=r?e.split(""):e.split(/\s/);for(var l=0,c=0;c<i.length&&!(l>e.length/2);c++)o.push(i[c]),l+=i[c].length+n;s=s.concat(i.slice(o.length));for(var u,d=o.join(r?"":" ").length,p=s.join(r?"":" ").length,m=e.length,h=p>d;m>t;)h?p-=(u=s.shift()).length+n:d-=(u=o.pop()).length+n,m-=u.length+n,h=p>d;return r?o.join("")+a+s.join(""):o.join(" ")+a+s.join(" ")},getFilenameFromUrl:function(e,t){var r=e.split("/"),a="";if(r.length>1){var i=r[r.length-1];if(a=i,i.match(/\./)&&!i.match(/[&\?"']/))return i}return t?a:null},getDomainSuffix:function(e){return e?(e=(e=(e=e.replace(/^(http|https|ftp):\/\//g,"")).replace(/^www\./g,"")).split("/")[0],e=(e=(e=this.ellipsis(e,-20,!0)).replace(/\.\.\./,"")).replace("&hellip;","")):""},isArray:"isArray"in Array?Array.isArray:function(e){return"[object Array]"===s.call(e)},isObject:"[object Object]"===s.call(null)?function(e){return null!=e&&"[object Object]"===s.call(e)&&void 0===e.ownerDocument}:function(e){return"[object Object]"===s.call(e)},isString:function(e){return"string"==typeof e},isFunction:"undefined"!=typeof document&&"function"==typeof document.getElementsByTagName("body")?function(e){return"[object Function]"===s.call(e)}:function(e){return"function"==typeof e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isBetaUser:function(e){var t=!1;return!0!==e&&1!==e&&"1"!==e||(t=!0),t},isUrlLike:function(e){return!(!e||!this.isString(e))&&!(!e.match(/^(www|http|ftp|file|evernote)/i)&&!e.match(/\.(com|org|net|gov|edu|uk|de)/i))},clone:function(e){var t,r,a,i;if(null==e)return e;if(e.nodeType&&e.cloneNode)return e.cloneNode(!0);if("[object Date]"===(t=s.call(e)))return new Date(e.getTime());if("[object Array]"===t)for(r=e.length,a=[];r--;)a[r]=m.Utils.clone(e[r]);else if("[object Object]"===t&&e.constructor===Object)for(i in a={},e)void 0!==e[i]&&(a[i]=m.Utils.clone(e[i]));return a||e},stamp:(n=0,o="_leaflet_id",function(e){return e[o]=e[o]||++n,e[o]}),limitExecByInterval:function(e,t,r){var a,i;return function n(){var o=arguments;a?i=!0:(a=!0,setTimeout((function(){a=!1,i&&(n.apply(r,o),i=!1)}),t),e.apply(r,o))}},throttle:function(e,t,r,a){var i,n=0;return"boolean"!=typeof r&&(a=e,e=r,r=void 0),function(){var o=this,s=+new Date-n,l=arguments;function c(){n=+new Date,e.apply(o,l)}function u(){i=void 0}a&&!i&&c(),i&&clearTimeout(i),void 0===a&&s>t?c():!0!==r&&(i=setTimeout(a?u:c,void 0===a?t-s:t))}},debounce:function(e,t,r){var a;return function(){var i=this,n=arguments,o=function(){a=null,r||e.apply(i,n)},s=r&&!a;clearTimeout(a),a=setTimeout(o,t),s&&e.apply(i,n)}},falseFn:function(){return!1},formatNum:function(e,t){var r=Math.pow(10,t||5);return Math.round(e*r)/r},splitWords:function(e){return e.replace(/^\s+|\s+$/g,"").split(/\s+/)},setOptions:function(e,t){return e.options=m.Utils.extend({},e.options,t),e.options},getParamString:function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r+"="+e[r]);return"?"+t.join("&")},template:function(e,t){return e.replace(/\{ *([\w_]+) *\}/g,(function(e,r){var a=t[r];if(!t.hasOwnProperty(r))throw new Error("No value provided for variable "+e);return a}))},callback:function(e,t,r){void 0!==e&&m.Utils.isFunction(e)&&e.apply(t,r)},getRegex:function(e){return e instanceof RegExp?e:(e=(e=(e=(e=(e=e.replace(/^!/,"")).replace(/!$/,"")).replace(/&quot;/g,'"')).replace(/&amp;/g,"&")).replace(/\//g,"\\/"),new RegExp(e))},defer:function(e,t,r,a){return a=a||[],r=r||{},e=m.Utils.bind(e,r,a,!0),setTimeout(e,t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",objectToHtml:function(e){var t=JSON.stringify(e,null,4);return t=(t=t.replace(/^\s+/gm,(function(e){return new Array(e.length+1).join("&nbsp;")}))).replace(/\n/g,"<br/>")},ensureAbsoluteUrl:function(e,t){return t&&!t.match(/^(http|www|ftp)/gi)?new f(t).resolve(new f(e)).toString():t},keySummary:function(e){var t=Object.keys(e);return"["+m.Utils.ellipsis(t.join(", "),150,null,"")+"]"},progressModulus:function(e,t){return e<100?1:e<500?5:e<1e3?10:e<2e3?20:Math.floor(10*Math.round(e/100/10))},extractISBNs:function(e,t){var r=this,a=[];if("convert"in(t=t||{})||(t.convert=!1),"unique"in t||(t.unique=!1),"normalize"in t||(t.normalize=!1),e&&m.Utils.isString(e)&&e.split(/[^\dxX\-]/).forEach((function(e){e.length>1&&(t.normalize&&(e=e.toUpperCase().replace(/-/g,"")),(r.isISBN10(e)||r.isISBN13(e))&&a.push(e))})),t.convert){var i=[];a.forEach((function(e){10==e.replace(/-/g,"").length?i.push(r.isbn10To13(e)):i.push(e)})),a=i}return t.unique&&(a=m.Array.unique(a)),a},isISBN10:function(e){var t=!1;if(e&&m.Utils.isString(e)&&(e=e.toUpperCase().replace(/[\n\r\t\s\-]+/g,"")).match(/^\d{9}[\dX]$/)){var r=1*parseInt(e.charAt(0));r+=2*parseInt(e.charAt(1)),r+=3*parseInt(e.charAt(2)),r+=4*parseInt(e.charAt(3)),r+=5*parseInt(e.charAt(4)),r+=6*parseInt(e.charAt(5)),r+=7*parseInt(e.charAt(6)),r+=8*parseInt(e.charAt(7)),r+=9*parseInt(e.charAt(8)),r+=10*("X"==e.charAt(9)?10:parseInt(e.charAt(9))),0==(r%=11)&&(t=!0)}return t},isISBN13:function(e){var t=!1;if(e&&m.Utils.isString(e)&&(e=e.toUpperCase().replace(/[\n\r\t\s\-]+/g,"")).match(/^978\d{10}$/)){var r=parseInt(e.charAt(0));r+=3*parseInt(e.charAt(1)),r+=parseInt(e.charAt(2)),r+=3*parseInt(e.charAt(3)),r+=parseInt(e.charAt(4)),r+=3*parseInt(e.charAt(5)),r+=parseInt(e.charAt(6)),r+=3*parseInt(e.charAt(7)),r+=parseInt(e.charAt(8)),r+=3*parseInt(e.charAt(9)),r+=parseInt(e.charAt(10)),r=(10-(r+=3*parseInt(e.charAt(11)))%10)%10,parseInt(e.charAt(12))==r&&(t=!0)}return t},isbn10To13:function(e){if(!m.Utils.isString(e))return"";if(10!=e.length)return"";var t=(10-(38+3*(parseInt(e[0])+parseInt(e[2])+parseInt(e[4])+parseInt(e[6])+parseInt(e[8]))+parseInt(e[1])+parseInt(e[3])+parseInt(e[5])+parseInt(e[7]))%10)%10;return"978"+e.substring(0,9)+t},normalizeLanguage:function(e){if(!m.Utils.isString(e))return"";if((e=m.Utils.normalizeString(e)).toLowerCase()in m.Utils.languages)return e.toLowerCase();if(!m.Utils.languagesHelper)for(var t in m.Utils.languagesHelper={},m.Utils.languages)m.Utils.languages[t].a3&&(m.Utils.isString(m.Utils.languages[t].a3)?m.Utils.languagesHelper[m.Utils.languages[t].a3]=t:m.Utils.languages[t].a3.forEach((function(e){m.Utils.languagesHelper[e]=t}))),m.Utils.languages[t].n&&m.Utils.languages[t].n.forEach((function(e){m.Utils.languagesHelper[e.toLowerCase()]=t}));if(e.toLowerCase()in m.Utils.languagesHelper)return m.Utils.languagesHelper[e.toLowerCase()];var r=e.toLowerCase().replace(/-..$/,"");return r!==e&&r in m.Utils.languages?r:""},formatFileSize:function(e){var t=e,r="KB";return t>1073741824?(e=t/1073741824,r="GB"):t>1048576?(e=t/1048576,r="MB"):(e=t/1024,r="KB"),Math.round(10*e)/10+" "+r},createErrorStatus:function(e,t){var r={cls:"error",text:"Something went wrong &mdash; "+e};t&&(r.links=t),this.createStatus(r)},createStatus:function(e){if(m.Globals.isWebApp()&&"undefined"!=typeof Paperpile&&Paperpile.Utils)return Paperpile.Utils.createStatus(e);m.Msg.sendMessage({fn:"createStatus",args:[e]})},createErrorWindow:function(e){m.Msg.sendMessage({fn:"createErrorWindow",args:[{type:e}]})},callSerially:function(e,t){0===e.length?m.Utils.callback(t):e.shift()((function(r,a){a?m.Utils.callback(t,null,[null,a]):m.Utils.callSerially(e,t)}))},cleanFileName:function(e){return(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[\/\\?:|]/g," - ")).replace(/[<>*]/g," ")).replace(/(\w)(\.\.)(\w)/g,(function(e,t,r,a){return t+"."+a}))).replace(/"/g,"'")).replace(/\s*-\s*$/g,"")).replace(/\s*-\s*\./g,".")).replace(/(\s*\.)([^\.])/g,(function(e,t,r){return"."+r}))).replace(/-[- ]*-/g,"-")).replace(/-+/g,"-")).replace(/ +/g," ")).replace(/^\s*/,"")).replace(/\s*$/,"")).length>150&&(e=m.Utils.midEllipsis(e,145,!0)),e},createLogLevel:function(e){return function(){return e}},verifyPubResult:function(e,t){var r=[];for(var a in e)if(!a.match(/^test_/g)){var i=e[a],n=m.Utils.getPath(t,a);n=""+n;var o=!1;if((i=""+i).match(/!.+!/)){var s=m.Utils.getRegex(i);n&&n.match(s)&&(o=!0)}else o=i===n;"__require_set__"===i?n||r.push(a+" not set"):o||r.push(a+" does not match (WANTED: "+i+" GOT: "+n+")")}return r},deepEquals:function(e,t){var r;for(r in e)if(void 0===t[r])return!1;for(r in e)if(e[r])switch(typeof e[r]){case"object":if(!this.deepEquals(e[r],t[r]))return!1;break;case"function":if(void 0===t[r]||"equals"!=r&&e[r].toString()!=t[r].toString())return!1;break;default:if(e[r]!=t[r])return!1}else if(t[r])return!1;for(r in t)if(void 0===e[r])return!1;return!0},getTabId:function(e){return e&&e.tab&&-1!==e.tab.id?e.tab.id:e?e.tabId:void 0},logToBg:function(e){m.Globals.isBackgroundPage()||m.Msg.sendMessage({fn:"logToBg",args:[e]})},decodeProxyString:function(e){var t=[];return e&&m.Utils.isString(e)&&e.split(/\^/).forEach((function(e){var r=e.split(/\|/);if(r&&3==r.length){var a={name:r[0],url:r[1],active:!1};"1"==r[2]&&(a.active=!0),t.push(a)}})),t},getProxyLoginUrl:function(){var e=m.backend.Settings.getSetting("proxy_list");if(e){var t=m.Utils.decodeProxyString(e);if(t.length)return t[0].url}},getPermalink:function(e){return m.Globals.getUrlBase()+"/app/p/"+e._id},encodeProxyString:function(e){var t=[];return e.forEach((function(e){t.push([e.name,e.url,e.active?"1":"0"].join("|"))})),t.join("^")},encode64:function(e){for(var t,r,a,i,n,o,s,l="",c=0,u=e.length,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c<u;)i=(t=e.charCodeAt(c++))>>2,n=(3&t)<<4|(r=e.charCodeAt(c++))>>4,o=(15&r)<<2|(a=e.charCodeAt(c++))>>6,s=63&a,isNaN(r)?o=s=64:isNaN(a)&&(s=64),l=l+d.charAt(i)+d.charAt(n)+d.charAt(o)+d.charAt(s);return l},stackTrace:function(){var e=new Error("Custom"),t="";return e&&e.stack&&(t=e.stack),t},getCookie:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},debugStamp:function(e){return e+"_"+Date.now()+"_"+Math.random()},makeAlphaNumericID:function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*r.length));return t},convertInlineLatexToHtml:function(e){for(var t=function(e){var t=0,r=[],a="",i=0;if(-1==e.indexOf("{"))return[{level:0,pre:"",value:e,close:!1}];for(;-1!=e.indexOf("{")|-1!=e.indexOf("}")&&i<100;){i+=1;var n="";a="",-1!=e.indexOf("{")&&e.indexOf("{")<e.indexOf("}")?(t+=1,a=e.substring(0,e.indexOf("{")),-1!=(e=e.substring(e.indexOf("{")+1)).indexOf("{")&&e.indexOf("{")<e.indexOf("}")?r.push({level:t,pre:a,value:n,close:!1}):-1!=e.indexOf("}")?(n=e.substring(0,e.indexOf("}")),r.push({level:t,pre:a,value:n,close:!0}),e=e.substring(e.indexOf("}")+1),t-=1):(r.push({level:t,pre:a,value:e,close:!1}),e="",t-=1)):-1!=e.indexOf("}")?(n=e.substring(0,e.indexOf("}")),r.push({level:t,pre:a,value:n,close:!0}),e=e.substring(e.indexOf("}")+1),t-=1):(r.push({level:t,pre:a,value:e,close:!1}),e="",t-=1)}return r},r=e.split("$"),a="",i=0;i<r.length;i++)if(r[i].length){for(var n=t(r[i]),o=0,s=[],l=0;l<n.length;l++)if(n[l].level>=o)switch(o=n[l].level,n[l].pre){case"_":s.push("sub"),a+="<sub>",a+=n[l].value,n[l].close&&(a+="</"+s.pop()+">");break;case"^":s.push("sup"),a+="<sup>",a+=n[l].value,n[l].close&&(a+="</"+s.pop()+">");break;case"\\emph":case"\\textit":s.push("i"),a+="<i>",a+=n[l].value,n[l].close&&(a+="</"+s.pop()+">");break;case"\\textbf":s.push("b"),a+="<b>",a+=n[l].value,n[l].close&&(a+="</"+s.pop()+">");break;case"\\text":a+=n[l].value;break;default:a+=n[l].value,n[l].close&&s.length&&(a+="</"+s.pop()+">")}else o-=1,a+=n[l].value,n[l].close&&s.length&&(a+="</"+s.pop()+">");for(;s.length;)pre=s.pop(),""!==pre&&(a+="</"+pre+">")}return a},getHtmlAttribute:function(e,t){var r;return"attribs"in e?t in e.attribs&&(r=e.attribs[t]):r=e.getAttribute(t),r}},m.Utils.apply=m.Utils.extend,m.Utils.applyIf=m.Utils.extendIf,m.pp=m.Utils.prettyPrint;m.Utils.createLogLevel(["font-weight: bold;","color: rgb(50, 50, 100)"].join("")),m.Utils.createLogLevel(["color: rgb(50, 50, 50);","margin-left: 2em;"].join("")),m.Utils.createLogLevel(["color: rgb(150, 150, 150);","margin-left: 4em;"].join("")),m.Utils.createLogLevel(["font-style: italic;","color: rgb(150, 150, 150);","margin-left: 6em;"].join("")),m.Utils.createLogLevel(["font-weight: bold;","color: rgb(255, 50, 50);"].join(""));m.Class=function(){},m.Class.extend=function(e){var t=function(e){e&&m.Utils.isObject(e)&&m.Utils.apply(this,e),!0===this.debug?this.c=console:this.c={log:function(){},warn:function(){},error:function(){console.error(arguments)}},this.initialize&&(this.initialize.apply(this,arguments),!0===this.debug&&(this.c=console))},r=function(){};r.prototype=this.prototype;var a=new r;for(var i in a.constructor=t,t.prototype=a,this)this.hasOwnProperty(i)&&"prototype"!==i&&(t[i]=this[i]);return e.statics&&(m.Utils.extend(t,e.statics),delete e.statics),e.includes&&(m.Utils.extend.apply(null,[a].concat(e.includes)),delete e.includes),e.options&&a.options&&(e.options=m.Utils.extend({},a.options,e.options)),m.Utils.extend(a,e),t},m.Data={hasKey:function(e){for(var t=0;t<this.fields.length;t++)if(this.fields[t].name===e)return!0;return!1},getId:function(){return this.get("id")},get:function(e){if(this.hasKey(e)||!0===this.allowNonFieldValues)return this[e];console.error("get() error: no key "+e+" in data object!"),console.error(this)},set:function(e,t){this.hasKey(e)||!0===this.allowNonFieldValues?this[e]=t:(console.error("set() error: no key "+e+" in data object!"),console.error(this))},serialize:function(e){for(var t=this.fields,r={},a=0;a<t.length;a++){var i=t[a].name;!1===t[a].persist&&!0!==e||void 0!==this.get(i)&&(r[i]=this.get(i))}return r},getDefaults:function(){for(var e=this.fields,t={},r=0;r<e.length;r++){var a=e[r].name;if(void 0===e[r].defaultValue)return console.error("No default value for field",e[r]),null;t[a]=e[r].defaultValue}return t},isMissingFields:function(){for(var e=this.fields,t=0;t<e.length;t++){if(void 0===this[e[t].name])return!0}return!1},apply:function(e){for(var t in e)this.set(t,e[t])},saveToChromeStorage:function(e){if(p.chrome&&p.chrome.storage){var t={},r=this.getStorageKey();if(null===r)return void console.log("data NOT saved -- storage key is null!");t[r]=this.serialize(),chrome.storage.local.set(t,(function(){chrome.runtime.lastError?m.Utils.callback(e,null,[null,chrome.runtime.lastError]):m.Utils.callback(e,null,[!0,null])}))}},loadFromChromeStorage:function(e){var t=this;if(p.chrome&&p.chrome.storage){var r=this.getStorageKey();if(null===r)return console.log("data NOT loaded -- storage key is null!"),void m.Utils.callback(e,null,[null,"Storage key is null"]);chrome.storage.local.get(r,(function(a){if(chrome.runtime.lastError)m.Utils.callback(e,null,[null,chrome.runtime.lastError]);else{var i=a[r];t.apply(i),m.Utils.callback(e,null,[i,null])}}))}},saveToLocalStorage:function(e){var t=this.getStorageKey();null!==t?(!0!==e&&this.c.log("Saving",t,"to localStorage"),p.localStorage[t]=m.Utils.encode(this.serialize())):console.log("data NOT saved -- storage key is null!")},clearLocalStorage:function(){var e=this.getStorageKey();null===e&&console.log("data NOT cleared -- storage key is null!"),delete p.localStorage[e]},loadFromLocalStorage:function(){var e=this.getStorageKey();if(null!==e){this.debug&&console.log("Loading",e,"from localStorage");var t=p.localStorage[e]||"{}";t.match(/object object/i)&&(t="{}");var r=m.Utils.decode(t);Object.keys(r).length>0?this.apply(r):console.log("  no localStorage for",e)}else console.log("data NOT loaded -- storage key is null!")}},m._DOMPurify=m.Class.extend({HTMLTags:{a:!0,abbr:!0,acronym:!0,address:!0,applet:!0,area:!0,article:!0,aside:!0,audio:!0,b:!0,base:!0,basefont:!0,bdi:!0,bdo:!0,big:!0,blockquote:!0,body:!0,br:!0,button:!0,canvas:!0,caption:!0,center:!0,cite:!0,code:!0,col:!0,colgroup:!0,data:!0,datalist:!0,dd:!0,del:!0,details:!0,dfn:!0,dialog:!0,dir:!0,div:!0,dl:!0,dt:!0,em:!0,embed:!0,fieldset:!0,figcaption:!0,figure:!0,font:!0,footer:!0,form:!0,frame:!0,frameset:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,head:!0,header:!0,hr:!0,html:!0,i:!0,iframe:!0,img:!0,input:!0,ins:!0,kbd:!0,label:!0,legend:!0,li:!0,link:!0,main:!0,map:!0,mark:!0,meta:!0,meter:!0,nav:!0,noframes:!0,noscript:!0,object:!0,ol:!0,optgroup:!0,option:!0,output:!0,p:!0,param:!0,picture:!0,pre:!0,progress:!0,q:!0,rp:!0,rt:!0,ruby:!0,s:!0,samp:!0,script:!0,section:!0,select:!0,small:!0,source:!0,span:!0,strike:!0,strong:!0,style:!0,sub:!0,summary:!0,sup:!0,svg:!0,table:!0,tbody:!0,td:!0,template:!0,textarea:!0,tfoot:!0,th:!0,thead:!0,time:!0,title:!0,tr:!0,track:!0,tt:!0,u:!0,ul:!0,var:!0,video:!0,wbr:!0},modes:{textonly:{ALLOWED_TAGS:[]},authorextjs:{ALLOWED_TAGS:["span"],ALLOWED_ATTR:["class","id"]},titlemarkup:{ALLOWED_TAGS:["i","b","sup","sub"],ALLOWED_ATTR:[]},extendedmarkup:{ALLOWED_TAGS:["i","b","sup","sub","span","div","p","img","table","col","colgroup","thead","tbody","tfoot","td","tr","th","h1","h2","h3","h4"]}},escapeHTML:function(e,t){var r=e;return"string"!=typeof e&&(r=e.toString()),void 0===t?t=[]:"string"==typeof t&&(t=[t]),t.forEach((function(e){'"'===e?r=r.replace(/"/g,"&quot;"):"'"===e?r=r.replace(/'/g,"&#39;"):"<"===e?r=r.replace(/</g,"&lt;"):"<"===e&&(r=r.replace(/>/g,"&gt;"))})),r},purifyPubObject:function(e){var t=this;return Object.keys(e).forEach((function(r){var a="textonly";"title"===r||"booktitle"===r?a="titlemarkup":"note"===r&&(a="extendedmarkup"),e[r]=t.purify(e[r],a)})),e},purify:function(e,t){var r=this,a={};t in r.modes&&(a=r.modes[t]);return this.traverse(e,a,(function(e,t){for(var a=e.split(/(<[a-z\d]+)/i),i=0;i<a.length;i++){var n=a[i].match(/^<([a-z\d]+)$/i);n&&n[1]&&!(n[1].toLowerCase()in r.HTMLTags)&&(a[i]=a[i].replace(/</g,"&lt;"))}var o=e=a.join("");return"undefined"!=typeof DOMPurify&&(o=DOMPurify.sanitize(e,t)+""),o}))},traverse:function(e,t,r){var a=this;if("string"==typeof e)return r(e,t);if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){var i=[];return e.forEach((function(e,n){i.push(a.traverse(e,t,r))})),i}i={};for(var n in e)i[n]=a.traverse(e[n],t,r);return i}return m.Utils.clone(e)}}),m.DOMPurify=new m._DOMPurify,m._Errors=m.Class.extend({includes:[m.Events],debug:!1,listeningForErrors:!1,errorCount:0,startListeningForErrors:function(){if(this.listeningForErrors=!0,this.addedListener||(p.onerror=m.Utils.bind(this.onError,this),this.addedListener=!0),p&&p.jQuery&&(jQuery.find.error=function(e){throw m.log({type:"error",subtype:"JQuery Sizzle",msg:"Sizzle syntax error: "+e}),new Error("Sizzle error: "+e)}),bugsnag){var e="development";m.Globals.isProduction()?e="production":m.Globals.isStaging()&&(e="staging"),m.Session.doWhenReady((function(){p.bugsnagClient=bugsnag({apiKey:"a703b3f0afc5317e9069f371c7f790f4",autoNotify:!1,autoCaptureSessions:!1,collectUserIp:!1,appVersion:m.Globals.isWebApp()?p.PP_WEBAPP_VERSION+"":p.PP_EXTENSION_VERSION+"",releaseStage:e,beforeSend:function(e){var t=!1;e.stacktrace=e.stacktrace.map((function(r){return r&&r.file&&(r.file=r.file.replace(/chrome-extension:\/\/\w*?\//g,"chrome_extension://"),r.file=r.file.replace(/.+pp-cs\.js/,"pp-cs.js"),r.file=r.file.replace(/.+pp-write\.js/,"pp-write.js"),r.file.match(/pp-cs\.js/)&&(t=!0),r.file.match(/metapdf/)&&"metapdf"!==e.context&&(e.context="metapdf")),r})),t&&"Maximum call stack size exceeded"===e.errorMessage&&e.ignore(),e.breadcrumbs=e.breadcrumbs.map((function(e){return e.metaData&&(e.metaData.fileLocation&&(e.metaData.fileLocation=e.metaData.fileLocation.replace(/.+pp-cs.js/,"pp-cs.js"),e.metaData.fileLocation=e.metaData.fileLocation.replace(/.+pp-write.js/,"pp-write.js")),e.metaData.stack&&(e.metaData.stack=e.metaData.stack.replace(/(file:\/\/[^()].+pp-cs.js)/g,"pp-cs.js"),e.metaData.stack=e.metaData.stack.replace(/(file:\/\/[^()].+pp-write.js)/g,"pp-write.js"))),e}))}}),p.bugsnagClient.user={id:m.Session.get("user_id")}}))}},stopListeningForErrors:function(){this.listeningForErrors=!1},callBugsnag:function(e,t,r){p.bugsnagClient&&p.bugsnagClient.notify(e,{severity:"error",context:t,metaData:{type:r}})},onError:function(e,t,r,a,i){var n=m.Globals.getWindowId();if(this.listeningForErrors){if(0===r)return console.log("Caught a non-Paperpile error. Not logging..."),console.log(e),!1;if("Script error."===e)return console.log("Caught a non-paperpile error. Not logging..."),console.log(e),!1;var o;if(i?o=i.stack:(o=a,a=void 0),"cs"===n&&t&&t.match(/http/))return console.log("Caught a non-paperpile error. Not logging..."),console.log(e),!1;if(e&&m.Utils.isString(e)&&e.match&&e.match(/error connecting to extension/i)){var s=!1;return["ohdohjbmdpjmodcjkknnepbnbbmkmkcb","bomfdkbfpdhijjbeoicnfhjbdhncfhig"].forEach((function(t){e.match(t)&&(s=!0)})),s?m.log({type:"error",subtype:"Error connecting to Paperpile extension",msg:e}):console.log("Chrome error connecting to extension (error msg: '"+e+"')"),!1}if(console.log("PP caught an error: \n msg:",e,"\n fileLocation:",t,"\n lineNumber:",r,"\n colNumber:",a,"\n stack:",o,"\n errorObject:",i),m.Globals.isBackgroundPage())m.Utils.createErrorWindow("BACKGROUND_PAGE"),m.log({type:"exception",subtype:"Extension Javascript",msg:e,fileLocation:t,lineNumber:r,colNumber:a,stack:o}),this.callBugsnag(i,"extension","Background page");else if(m.Globals.isWebApp()){var l=!0,c=!0;e&&m.Utils.isString(e)&&e.match(/installation is already pending/i)&&(l=!1,c=!1),t&&m.Utils.isString(t)&&t.match(/webstore/i)&&(l=!1,c=!1),l&&m.Utils.createErrorStatus("Paperpile encountered an error",["STATUS_PANEL_RELOAD_WEBAPP"]),c&&(m.log({type:"exception",subtype:"Webapp Javascript",msg:e,fileLocation:t,windowLocation:p.location.href,lineNumber:r,colNumber:a,stack:o,showedErrorStatusPanel:l}),this.callBugsnag(i,"webapp","webapp"))}else if(m.Globals.isDocsPlugin()){if(t&&m.Utils.isString(t)&&t.match(/docs\.google\.com\/static/i))return console.log("Ignoring docs.google.com JS error!"),!1;if(t&&m.Utils.isString(t)&&t.match(/searcho is not defined/i))return console.log("Ignoring searcho error!"),!1;if(1==r)return console.log("Ignoring lineNumber == 1 error!"),!1;m.log({type:"exception",subtype:"Google Docs Javascript",msg:e,fileLocation:t,lineNumber:r,colNumber:a,windowId:p.PP_WINDOW_ID,windowLocation:p.location.href,stack:o}),this.callBugsnag(i,"extension","Google Docs plugin")}else if(m.Globals.isMetaPDF())m.log({type:"exception",subtype:"MetaPDF Javascript",msg:e,fileLocation:t,lineNumber:r,colNumber:a,windowId:p.PP_WINDOW_ID,windowLocation:p.location.href,stack:o}),this.callBugsnag(i,"extension","MetaPDF");else{var u=!0;if(e&&e.match(/cannot call method .(match|appendchild). of undefined/i)&&(u=!1),e&&e.match(/Cannot set property .display. of null/i)&&(u=!1),u){var d=p.location.href;if(m.crawling&&m.crawling.MetaDriver){var h,g=m.crawling.MetaDriver.getSupportingDriver(d);g&&(h=g.name);var f=m.webimport.Utils.getSupportingWebImportPlugins(d),b=f.map((function(e){return e.getName()}));g||f.length?!g&&f.length&&m.Array.contains(b,"Google")&&(d=p.location.host+" (logging domain only)"):d=p.location.host+" (logging domain only)"}m.log({type:"exception",subtype:"Content script Javascript",msg:e,fileLocation:t,lineNumber:r,windowId:p.PP_WINDOW_ID,windowLocation:d,webimportPlugins:b,crawlerDrivers:h,stack:o}),this.callBugsnag(i,"extension","Content script")}}return m.Errors.errorCount++,!1}console.log("Ignoring uncaught error: ",e)},logErrorObject:function(e){if(this.listeningForErrors&&e){var t,r,a=e.name+" "+e.message,i=e.stack;if(i){var n=i.split("\n")[1].match(/(at) (\S+) \((\S+)\)/);if(n){var o=n[3].split(":");r=o[o.length-2],t=o.slice(0,o.length-2).join("")}}this.onError(a,t,r,0,e)}}}),g(m,"_Errors","Errors");var f,b,y;m.Events={addEventListener:function(e,t,r){var a,i,n,o=this._pp_events=this._pp_events||{};if("object"!=typeof e)for(i=0,n=(e=m.Utils.splitWords(e)).length;i<n;i++)o[e[i]]=o[e[i]]||[],o[e[i]].push({action:t,context:r||this});else for(a in e)e.hasOwnProperty(a)&&this.addEventListener(a,e[a],t)},hasEventListeners:function(e){return"_pp_events"in this&&e in this._pp_events&&this._pp_events[e].length>0},removeEventListener:function(e,t,r){var a,i,n,o,s,l=this._pp_events;if("object"==typeof e){for(a in e)e.hasOwnProperty(a)&&this.removeEventListener(a,e[a],t);return this}for(i=0,n=(e=m.Utils.splitWords(e)).length;i<n;i++)if(this.hasEventListeners(e[i]))for(s=(o=l[e[i]]).length-1;s>=0;s--)t&&o[s].action!==t||r&&o[s].context!==r||o.splice(s,1);return this},fireEvent:function(e,t){if(!this.hasEventListeners(e))return this;for(var r=m.Utils.extend({type:e,target:this},t),a=this._pp_events[e].slice(),i=0,n=a.length;i<n;i++)try{a[i].action.call(a[i].context||this,r)}catch(e){if(!m.Errors)throw new Error("Error calling listener",e);m.Errors.logErrorObject(e)}return this},clearListeners:function(){var e=this._pp_events;for(var t in e)e.hasOwnProperty(t)&&delete e[t]},removeAllListeners:function(){this.clearListeners()}},m.Events.on=m.Events.addEventListener,m.Events.un=m.Events.removeEventListener,m.Events.fire=m.Events.fireEvent,m._Features=m.Class.extend({getPaperReferences:function(){return!1},mobileView:function(){return!1}}),m.Features=new m._Features,m._Globals=m.Class.extend({flags:{noPdfSupport:!0},getMaxSyncFileSize:function(){return 20971520},getWindowId:function(){return p.PP_WINDOW_ID},hasNoUserInfo:function(){return!m.Session.get("user_id")},isTestEnvironment:function(){return"test"===this.getWindowId()},isContentScript:function(){return"cs"===this.getWindowId()},isAttachmentContentScript:function(){return"attach"===this.getWindowId()},isPopupView:function(){return"pop"===this.getWindowId()},isBackgroundPage:function(){return"bg"===this.getWindowId()},isDocAddOn:function(){return"addon"===this.getWindowId()},isWebApp:function(){return"webapp"===this.getWindowId()},isDocsPlugin:function(){return"write"===this.getWindowId()},isUploadIframe:function(){return"upload"===this.getWindowId()},isPdfIframe:function(){return"pdfIframe"===this.getWindowId()},isMetaPDF:function(){return"metapdf"===this.getWindowId()},isDev:function(){return"0"==p.PP_EXTENSION_VERSION},isStaging:function(){var e=this.getUrlBase();return!(this.isDev()||!e.match(/stage/i))},isProduction:function(){return!this.isDev()&&!this.isStaging()},isChrome:function(){var e=navigator.userAgent,t=this.getOS();return!(!e.match(/chrome/i)||"Android"===t)},getOS:function(){var e="Unknown OS";return-1!=navigator.appVersion.indexOf("Win")&&(e="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(e="MacOS"),-1!=navigator.appVersion.indexOf("CrOS")?e="ChromeOS":-1!=navigator.appVersion.indexOf("X11")&&(e="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(e="Linux"),-1!=navigator.appVersion.indexOf("Android")&&(e="Android"),e},isLinux:function(){return"Linux"===this.getOS()},isMac:function(){return"MacOS"===this.getOS()},isWindows:function(){return"Windows"===this.getOS()},isChromeOS:function(){return"ChromeOS"===this.getOS()},getUrlBaseAPI:function(){var e="https://api.paperpile.com";return this.isStaging()?e="https://stage-api.paperpile.com":this.isDev()&&(e="http://127.0.0.1:4000"),e},getNewWebappUrl:function(){var e="https://app.paperpile.com";return this.isStaging()?e="https://stage-beta.paperpile.com":this.isDev()&&(e="http://127.0.0.1:6001"),e},isNewWebappUrl:function(e){return"string"==typeof e&&e.match(/^(https:\/\/app\.paperpile\.com|https:\/\/stage-beta\.paperpile\.com|http:\/\/127\.0\.0\.1:6001)/i)},getUrlBaseSearch:function(){var e="https://search.paperpile.com";return this.isStaging()?e="https://stage-search.paperpile.com":this.isDev()&&(e="http://127.0.0.1:8181"),e},getUrlBase:function(){var e="https://stage.paperpile.com";if(p.location&&p.location.href&&p.location.href.match(/stage\.paperpile\.com/i))return e;if(p.chrome&&p.chrome.runtime&&"function"==typeof chrome.runtime.getURL&&chrome.runtime.getURL("").match(/ohdohjbmdpjmodcjkknnepbnbbmkmkcb/i))return e;return p.PP_URL_BASE},url:function(e){e=e.replace(/^\//,"");var t=this.getUrlBase();return t?e=t+"/"+e:(console.error("  Error: no server URL base!"),null)},getSharedFolderLink:function(e){var t=e.alias;return t||(t=e._id),m.Globals.getUrlBase()+"/shared/"+t},getPubViewAttachmentUrl:function(e){return m.library.Attachment.getPubViewAttachmentUrl(e)},getSharedAttachmentUrl:function(e,t){return m.library.Attachment.getSharedAttachmentUrl(e,t)}}),g(m,"_Globals","Globals"),m._Licensing=m.Class.extend({licenseTrialDaysLeft:function(e){e.license_trial_ends||(e.license_trial_ends=Date.now()/1e3);var t=new Date,r=new Date(1e3*e.license_trial_ends).getTime()-t.getTime();return Math.ceil(r/864e5)},licenseStatus:function(e){if(m.TestFlags.testExpiredLicense())return"trial-expired";if(e.license_forever_free)return"active";var t="inactive";return t=this.licenseTrialDaysLeft(e)<=0?"trial-expired":"trial-active","personal"!==e.site&&(e.site_verified_date>0&&"active"===e.site_status?t="active":"trial-active"!==t&&(t="inactive")),e.license_grace_period_ends&&1e3*e.license_grace_period_ends>Date.now()&&(t="active"),e.license_id&&("trial-expired"===t&&(t="inactive"),"free"===e.license_seat_type&&(t="active"),e.subscription&&"status"in e.subscription&&("active"===e.subscription.status||"current_period_end"in e.subscription&&"past_due"!==e.subscription.status&&1e3*e.subscription.current_period_end>Date.now())&&(t="active")),t},getShortStatusString:function(e){if(m.TestFlags.testExpiredLicense())return"Your trial has expired";var t=this.licenseStatus(e);return"trial-active"==t?"Your trial has "+this.licenseTrialDaysLeft(e)+" day(s) remaining":"trial-expired"==t?"Your trial has expired":"inactive"==t?"Your license has expired":"active"==t?"You have an active license":void 0},isInGoodStanding:function(e){if(m.TestFlags.testExpiredLicense())return!1;var t=this.licenseStatus(e);return"active"==t||"trial-active"==t}}),g(m,"_Licensing","Licensing"),m.Messenger=m.Class.extend({includes:[m.Events],passSelfMessages:!1,logMessages:!1,debug:!1,disabled:!1,initialize:function(){this.ports={},this.portsTimesReconnected={},this.callbacks={},this.receiptExpected={},this.receiptTimeout={},this.timeouts={},this.persistentPorts={},this.listening=!1,this.listenForCallbacks=!0},disableAllMessaging:function(){this.disabled=!0},handleAppFunctionMessages:function(e){var t=this;t.on("message",(function(r){var a=r.msg;if(a.fn)if(e[a.fn]){void 0===a.args?a.args=[]:m.Utils.isArray(a.args)||(a.args=[a.args]);var i=m.Utils.clone(a.args);delete a.args,i.push(a),t.c.log("Calling fn",a.fn,"with args",i),m.Utils.callback(e[a.fn],e,i)}else t.c.log(["No app function",a.fn])}))},getId:function(){return p.PP_WINDOW_ID},connectPort:function(e,t){if(!this.ports[e]){if(this.c.log("Trying to connect to port "+e),void 0!==p.chrome&&chrome.runtime&&chrome.runtime.onConnect){var r;try{r=chrome.runtime.connect(chrome.runtime.id,{name:e})}catch(e){this.c.log(e)}if(r)return this._listenConnect(r),!0===t&&(this.persistentPorts[e]=!0),!0;this.c.log("Failed to connect to port ",e)}else this.c.error("Can't connect port: not running as a Chrome extension!");return!1}console.error("  already have a port by the name "+e+" - not connecting!")},listen:function(){void 0!==p.chrome&&chrome.runtime&&chrome.runtime.onConnect&&!this.listening&&(this.listening=!0,chrome.runtime.onConnect.addListener(m.Utils.bind(this._listenConnect,this)))},listenPost:function(){var e=(new Date).getTime();p._postListener=m.Utils.bind(this.onPostMessage,this,[e]),p.addEventListener("message",p._postListener,!1)},stopListenPost:function(){p.removeEventListener("message",p._postListener,!1)},listenForSingleMessages:function(){var e=this;chrome.runtime.onMessage.addListener((function(t,r,a){var i={};m.Utils.apply(i,t),i.tab=r.tab,e._onMessage(i)}))},onPostMessage:function(e,t){if(!this.destroyed){var r=e.data;this._onMessage(r)}},_onMessage:function(e){if((void 0===e.targetId||e.targetId===this.getId())&&(!e.fromOutsideExtension||e.tab||this.passSelfMessages))if(m.Utils.isObject(e)){var t=Object.keys(e),r="["+m.Utils.ellipsis(t.join(", "),150,null,"")+"]";if(e.fn&&(r+=', app function "'+e.fn+'"'),this.logMessages&&(e.crudResponse,console.log("<\tmsg "+r+" from "+e.source)),this.listenForCallbacks&&e.isCallbackResponse){var a=e.callbackId,i=e.callbackArgs;if(this.callbacks[a]){m.Utils.callback(this.callbacks[a],this,i),delete this.callbacks[a];var n=this.timeouts[a];n&&(p.clearTimeout(n),delete this.timeouts[e.callbackId]),this.clearLoadingMessage()}else this.c.log("CALLBACK NOT FOUND",a)}else this.fire("message",{msg:e})}else console.log("Extension message is not an object",e)},clearLoadingMessage:function(){this.loadingMessageTimeout&&(p.clearTimeout(this.loadingMessageTimeout),delete this.loadingMessageTimeout),this.loadingMessageObject&&(m.backend.Utils.clearLoadingMessage(this.loadingMessageObject),delete this.loadingMessageObject)},onMessage:function(e,t){if(!this.destroyed){if(e){var r=t.name;e.requestReceipt&&(this.c.log("Got message with requested receipt",e.requestReceipt),t.postMessage({sendReceipt:e.requestReceipt})),e.sendReceipt&&(this.c.log("Got receipt with id and clear timeout",e.sendReceipt,this.receiptExpected[r]),e.sendReceipt===this.receiptExpected[r]&&(this.c.log("Clearing receipt timeout",this.receiptTimeout[r]),p.clearTimeout(this.receiptTimeout[r]),this.receiptExpected[r]=null,this.receiptTimeout[r]=null))}t.sender&&(e.tab=t.sender.tab),this._onMessage(e)}},callback:function(e,t){m.Utils.isArray(t)||(t=[t]);var r={isCallbackResponse:!0,callbackId:e.callbackId,callbackArgs:t};this.sendMessage(r)},sendMessage:function(e){var t=this;if(!this.destroyed&&!0!==this.disabled){if(e.source||(e.source=this.getId()),e.isFromPaperpile=!0,this.guid||(this.guid=m.UUID.generate()),e.source_guid=this.guid,e.callback){if(e.loadingMessage){t=this;var r=e.loadingMessageDelay||1e3;this.loadingMessageTimeout=p.setTimeout((function(){t.loadingMessageObject=m.backend.Utils.showLoadingMessage(e.loadingMessage)}),r)}var a=m.UUID.generate(),i=e.callback;if(this.callbacks[a]=i,delete e.callback,e.callbackId=a,e.timeout){var n=m.Utils.bind((function(){this.clearLoadingMessage(),m.Utils.callback(i,this,[null,"Callback timed out."])}),this),o=p.setTimeout(n,e.timeout);delete e.timeout,this.timeouts[a]=o}}if(void 0!==p.chrome&&chrome.runtime&&chrome.runtime.getManifest){if(void 0!==e.targetTab)for(var s in this.ports){if(this.ports.hasOwnProperty(s))(c=this.ports[s]).sender&&c.sender.tab&&c.sender.tab.id===e.targetTab&&(this.c.log("--\x3e Sending msg",e,"to target tab: ",e.targetTab),this._addReceiptTimeout(c,e),c.postMessage(e))}else{var l=!1;for(var s in this.ports)if(this.ports.hasOwnProperty(s)){l=!0;var c=this.ports[s];s=m.Utils.ellipsis(s,-30,null,"");u=Object.keys(e),d="["+m.Utils.ellipsis(u.join(", "),150,null,"")+"]";e.fn&&(d+=', app function "'+e.fn+'"'),this.logMessages&&console.log(" >\tmsg "+d+" to port "+s),this._addReceiptTimeout(c,e),c.postMessage(e)}}l||e.source&&"webapp"==e.source&&(e.backgroundPing||t.fire("disconnect",{portName:"background-dummy",info:"port disconnected; no ports available"}))}else{e.fromOutsideExtension=!0,this.sendPostMessage(e);var u=Object.keys(e);e.crudResponse;var d="["+m.Utils.ellipsis(u.join(", "),150,null,"")+"]";this.logMessages}}},_addReceiptTimeout:function(e,t){var r=this,a=e.name;this.receiptExpected[a]||"bg"===m.Msg.getId()||(r.receiptExpected[a]=m.UUID.generate(),r.receiptTimeout[a]=p.setTimeout((function(){r.c.log("Did not get response for",r.receiptExpected[a],t,a),r.reconnect(a,t),r.receiptExpected[a]=null,r.receiptTimeout[a]=null}),1e3),t.requestReceipt=r.receiptExpected[a],r.c.log("Setting up receipt timeout",r.receiptTimeout[a],t.requestReceipt))},sendPostMessage:function(e){if(e.source||(e.source=this.getId()),e.isFromPaperpile=!0,p.isWorker)postMessage(e);else{var t="https://paperpile.com/app";p&&"location"in p&&"href"in p.location&&(p.location.href.match(/stage\.paperpile/i)?t="https://stage.paperpile.com/app":p.location.href.match(/127\.0\.0\.1:8080/)&&(t="http://127.0.0.1:8080/app")),p.postMessage(e,t)}},_listenConnect:function(e){var t=this;for(var r in this.ports[e.name]=e,e.name in t.portsTimesReconnected||(t.portsTimesReconnected[e.name]=0),this.ports)this.c.log("  [port summary ]"+r);var a=m.Utils.bind(this.onMessage,this,[e]),i=e.name;e.onMessage.addListener(a),e.onDisconnect.addListener((function(e){delete t.ports[i],t.c.log("Port disconnected ",i),p._postListener;var r=!0;t.persistentPorts[i]&&i in t.portsTimesReconnected&&t.portsTimesReconnected[i]<3&&(r=!1,t.portsTimesReconnected[i]++,console.log("Disconnect from port received. Trying to reconnect persistent port "+i+" for the "+t.portsTimesReconnected[i]+" time"),t.reconnect(i,null,500)),r&&t.fire("disconnect",{portName:i,info:"port disconnected; tried 3 times to reconnect"})})),this.fire("connect",{port:e}),this.c.log("Port successfully connected ",i)},reconnect:function(e,t,r){null==r&&(r=100);var a=this;delete this.ports[e],m.Utils.defer((function(){a.connectPort(e,!0)?(a.c.log("Connected again to port",e),a.fire("reconnected",{portName:e}),t&&a.sendMessage(t)):a.fire("lost_connection",{portName:e})}),r)},old_reconnect:function(e,t){var r=this;void 0===t&&(t={retryCount:0,delay:250}),r.ports[e]?r.c.log("  reconnected to port ",e," -- stopping reconnect loop!"):(5===t.retryCount&&r.fire("lost_connection",{portName:e}),t.retryCount>10?r.c.log("  taking a long time to reconnect... maybe it's really gone"):r.c.log("  reconnection try #",t.retryCount),m.Utils.defer((function(){t.retryCount+=1,t.delay*=2,r.connectPort(e,!0)?r.c.log("  Connected again to port",e):r.reconnect(e,t)}),t.delay))},destroy:function(){this.destroyed=!0}}),g(m,"Messenger","Msg"),m._Permissions=m.Class.extend({targets:{paperpile:{dev:["http://127.0.0.1:4000/*","http://127.0.0.1:8080/*","https://paperpile-dev.s3.amazonaws.com/*"],stage:["*://*.paperpile.com/","https://paperpile-staging.s3.amazonaws.com/*"],production:["*://*.paperpile.com/","https://paperpile-production.s3.amazonaws.com/*"]},all:["http://*/","https://*/"]},checkURL:function(e,t){chrome&&chrome.permissions?chrome.permissions.contains({origins:[e]},(function(e){m.Utils.callback(t,null,[e])})):m.Utils.callback(t,null,[!0])},getTargetURLs:function(e){var t=[];return"paperpile"===e?t=m.Globals.isDev()?this.targets.paperpile.dev:m.Globals.isStaging()?this.targets.paperpile.stage:this.targets.paperpile.production:"all"===e&&(t=this.targets.all),t},request:function(e,t){chrome.permissions.request({origins:e},(function(e){m.Utils.callback(t,null,[e])}))}}),g(m,"_Permissions","Permissions"),m._Session=m.Class.extend({includes:[m.Data,m.Events],debug:!1,fields:[{name:"user_id"},{name:"google_id"},{name:"google_name"},{name:"google_email"},{name:"google_access_token"},{name:"server_url_base"}],get:function(e){var t=m.Data.get.call(this,e);return t},isLoaded:function(){return this.hasUserId()},load:function(){if(!this.isLoaded())if(this.loadFromDom(),this.isLoaded())this.c.log("  loaded session from DOM!");else if(this.isLoaded())this.c.log("  loaded session from localStorage!");else{var e=!0;p&&p.PP_WINDOW_ID&&"cs"===p.PP_WINDOW_ID&&(e=!1),e&&this.loadFromServer(),this.isLoaded()?this.c.log("  loaded session from server!"):m.Utils.defer((function(){m.Msg.sendMessage({sessionInfoRequest:!0}),m.bg&&m.bg.LoginState&&m.bg.LoginState.pingServer()}),1e3)}},loadFromDom:function(){!function(e){e.fn.getAttributes=function(){var t={};return this.length?(e.each(this[0].attributes,(function(e,r){t[r.name]=r.value})),t):this}}(jQuery),$(m.Utils.bind((function(){var e=$("#pp-session");if(1===e.length){var t=e.getAttributes();delete t.id,this.apply(t)}}),this))},loadFromServer:function(){var e=this;this.c.log("Attempting to load session from server!"),m.Ajax.request({url:m.Globals.url("/ajax/app/ping"),callback:function(t,r,a){t.session&&(e.apply(t.session),e.fire("update"))}})},initialize:function(){m.Msg.on("message",this.onMessage,this)},broadcastSession:function(){var e=this.serialize();m.Msg.sendMessage({session:e})},onMessage:function(e){var t=e.msg;t.session&&(this.c.log("  loading session from message!"),this.loadFromMessage(t)),t.clearSession&&(this.c.log("  Clearing session from message!"),this.clear()),t.sessionInfoRequest&&this.hasUserId()&&m.Msg.sendMessage({targetId:t.source,session:this.serialize()})},doWhenReady:function(e){this.isLoaded()?e.call(this):(this.on("ready",e),this.load())},getStorageKey:function(){return"PP.Session"},hasUserId:function(){return void 0!==this.user_id},loadFromMessage:function(e){this.apply(e.session),this.fire("update")},clear:function(){this.clearLocalStorage();for(var e=this.fields,t=0;t<e.length;t++){var r=e[t].name;this.set(r,null)}this.c.log("  cleared Session:",this.serialize()),this.fire("clear")},apply:function(e){var t=this.user_id;m.Data.apply.call(this,e);var r=this.user_id;void 0===t&&void 0!==r?this.fire("ready"):t&&r&&t!==r&&(this.fire("newid"),this.c.log("  new session user ID!")),void 0!==r&&this.saveToLocalStorage()}}),g(m,"_Session","Session"),m._String=m.Class.extend({truncate:function(e,t,r){var a,i,n,o,s,l=["img"],c=[],u=0,d="",p=new RegExp('<\\/?\\w+\\s*(\\w+\\s*=\\s*"[^"]*"\\s*)*\\s*\\/\\s*>'),m=new RegExp('<\\/?\\w+\\s*(\\w+\\s*=\\s*"[^"]*"\\s*)*\\s*\\/?\\s*>'),h=new RegExp('<img\\s*(\\w+\\s*=\\s*"[^"]*"\\s*)*\\s*\\/?\\s*>'),g=!0,f=function(e){var t=e.indexOf(" ");return-1===t&&-1===(t=e.indexOf(">"))&&console.log("HTML tag is not well-formed : "+e),e.substring(1,t)};for((r=r||{}).ellipsis=r.ellipsis||"...";g;){if(!(g=m.exec(e))){u<t&&(d+=e.substring(0,t-u));break}if(a=g[0],u+(i=g.index)>t){d+=e.substring(0,t-u);break}u+=i,d+=e.substring(0,i),"/"===a[1]?c.pop():(o=p.exec(a))||(n=f(a),c.push(n)),d+=o?o[0]:a,e=e.substring(i+a.length)}return e.length>t&&r.ellipsis&&(d+=r.ellipsis),d+=(s="",c.reverse().forEach((function(e,t){-1===l.indexOf(e)&&(s+="</"+e+">")})),s),r.keepImageTag||(d=function(e){var t,r,a=h.exec(e);return a?(t=a.index,r=a[0].length,e.substring(0,t)+e.substring(t+r)):e}(d)),d},stripHtml:function(e,t){if(void 0===e)return"";var r={replacement:"",exclude:[]};m.Utils.apply(r,t||{});var a=[e];if(r.exclude.length>0){a=[];for(var i=0;i<r.exclude.length;i++)a.push("<"+r.exclude[i]+"[^>]*>"),a.push("<\\/"+r.exclude[i]+"[^>]*>");var n="("+a.join("|")+")";a=e.split(new RegExp(n,""))}for(i=0;i<a.length;i+=2)a[i]=a[i].replace(/<(?:.|\n)*?>/gm,r.replacement);return a.join("")},escapeBraces:function(e){for(var t=(e=e||"").split(""),r=0;r<t.length;r++)"{"!==t[r]&&"}"!==t[r]||(r>0?"\\"!==t[r-1]&&(t[r]="\\"+t[r]):t[r]="\\"+t[r]);return t.join("")},htmlToPlainText:function(e){return void 0===e?"":(e=e.replace(/<br\/>/g,"\n"),e=this.stripHtml(e,{replacement:"",exclude:[]}),e=$("<div/>").html(e).text())},upperFirst:function(e){return e=e.charAt(0).toUpperCase()+e.substr(1)},_stripBracesMarkup:function(e){for(var t=e.split(""),r=0;r<t.length;r++)"{"!==t[r]&&"}"!==t[r]||(r>0&&"\\"===t[r-1]?t[r-1]="":t[r]="");return t.join("")},toTitleCase:function(e){if(!e)return"";var t=[];t=(t=(t=t.concat(["the","a","an","some"])).concat(["as","because","for","and","nor","but","or","yet","so"])).concat(["a","abaft","aboard","about","above","absent","across","afore","after","against","along","alongside","amid","amidst","among","amongst","an","apropos","apud","around","as","aside","astride","at","athwart","atop","barring","before","behind","below","beneath","beside","besides","between","beyond","but","by","circa","concerning","despite","down","during","except","excluding","failing","following","for","forenenst","from","given","in","including","inside","into","like","mid","midst","minus","modulo","near","next","notwithstanding","o'","of","off","on","onto","opposite","out","outside","over","pace","past","per","plus","pro","qua","regarding","round","sans","save","since","than","through","throughout","thru","thruout","till","times","to","toward","towards","under","underneath","unlike","until","unto","up","upon","versus","via","vice","vis-\xe0-vis","with","within","without","worth"]),e=e.split(/([\t\r\n\s])+/);for(var r=0;r<e.length;r++)if(!e[r].match(/[\t\r\n\s]/)&&(e[r]=e[r].toLowerCase(),-1==t.indexOf(e[r])||0===r)){for(var a=e[r].split(/(-)/),i=0;i<a.length;i++)a[i]=a[i].charAt(0).toUpperCase()+a[i].substr(1).toLowerCase();e[r]=a.join("")}return e=(e=e.join("")).replace(/\b(rna|dna|usa|hiv)/gi,(function(e){return e.toUpperCase()}))},interconvertString:function(e,t){var r={format:"plain"};m.Utils.apply(r,t||{});var a=m.Utils.isString(e)?e:"";if("nomarkup"===r.format)a=(a=(a=(a=this._stripBracesMarkup(a)).replace(/\\(textit|textbf|emph)/g,"")).replace(/<(i|b|sub|sup)>/g,"")).replace(/<\/(i|b|sub|sup)>/g,"");else if("html"===r.format){for(var i=new RegExp("(.*)(\\\\(?:textit|textbf|emph)\\{)(.*)","g"),n=0;null!==(h=i.exec(a))&&!(n++>100);)if(h[3]){for(var o=h[2].match(/(textit|emph)/)?"i":"b",s=h[3].split(""),l=1,c=0,u=0,d=0;d<s.length;d++)if("{"===s[d]&&l++,"}"===s[d]&&++c==l){s[d]="</"+o+">",h[2]="<"+o+">",u=1;break}0==u&&(h[2]=""),h[3]=s.join(""),a=h[1]+h[2]+h[3],i.lastIndex=0}s=a.split(/(\$)/);for(var p=0;p<s.length;p++)"$"==s[p]&&"$"==s[p+2]&&(s[p+1].match(/^_\{([^\}\{]+)\}$/)||s[p+1].match(/^_(.)$/)?(s[p]="<sub>",s[p+1]=RegExp.$1,s[p+2]="</sub>"):s[p+1].match(/^\^\{([^\}\{]+)\}$/)||s[p+1].match(/^\^(.)$/)?(s[p]="<sup>",s[p+1]=RegExp.$1,s[p+2]="</sup>"):s[p+1].match(/^(\\[a-z]+)$/i)?RegExp.$1 in this.latexUnicodeMath&&(s[p]="",s[p+1]=this.latexUnicodeMath[RegExp.$1],s[p+2]=""):s[p+1].match(/^[^\\]+$/i)&&(s[p]="",s[p+2]=""));a=s.join(""),a=this._stripBracesMarkup(a)}else if("bibtex"===r.format){var h;for(i=new RegExp("(.*)(<\\/?(?:i|b|sub|sup)>)(.*)","g"),n=0;null!==(h=i.exec(a))&&!(n++>100);)h[2]&&(h[2].match(/\//)?h[2].match(/(sub|sup)/)?h[2]="}$":h[2]="}":h[2].match(/<\s*b\s*>/)?h[2]="\\textbf{":h[2].match(/<\s*i\s*>/)?h[2]="\\textit{":h[2].match(/sub/)?h[2]="$_{":h[2].match(/sup/)&&(h[2]="$^{")),a=h[1]+h[2],h[3]&&(a+=h[3]),i.lastIndex=0;a=(a=(a=a.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&")}return a},removeControlChars:function(e){return e=(e=(e=(e=e||"").replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/[\x00-\x08\x0B-\x1F\x7F]/g,"")},latexUnicodeASCII_1:{"'":{A:"\xc1",C:"\u0106",E:"\xc9",I:"\xcd",L:"\u0139",N:"\u0143",O:"\xd3",R:"\u0154",S:"\u015a",U:"\xda",Y:"\xdd",Z:"\u0179",a:"\xe1",c:"\u0107",e:"\xe9",g:"\u01f5","\\i":"\xed",l:"\u013a",n:"\u0144",o:"\xf3",r:"\u0155",s:"\u015b",u:"\xfa",y:"\xfd",z:"\u017a"},"`":{A:"\xc0",E:"\xc8",I:"\xcc",O:"\xd2",U:"\xd9",a:"\xe0",e:"\xe8","\\i":"\xec",o:"\xf2",u:"\xf9"},'"':{A:"\xc4",E:"\xcb",I:"\xcf",O:"\xd6",U:"\xdc",Y:"\u0178",a:"\xe4",e:"\xeb","\\i":"\xef",o:"\xf6",u:"\xfc",y:"\xff"},"^":{A:"\xc2",C:"\u0108",E:"\xca",G:"\u011c",H:"\u0124",I:"\xce",J:"\u0134",O:"\xd4",S:"\u015c",U:"\xdb",W:"\u0174",Y:"\u0176",a:"\xe2",c:"\u0109",e:"\xea",g:"\u011d",h:"\u0125","\\i":"\xee","\\j":"\u0135",o:"\xf4",s:"\u015d",u:"\xfb",w:"\u0175",y:"\u0177"},"~":{A:"\xc3",I:"\u0128",N:"\xd1",O:"\xd5",U:"\u0168",a:"\xe3","\\i":"\u0129",n:"\xf1",o:"\xf5",u:"\u0169"},"=":{A:"\u0100",E:"\u0112",I:"\u012a",O:"\u014c",U:"\u016a",a:"\u0101",e:"\u0113","\\i":"\u012b",o:"\u014d",u:"\u016b"},".":{C:"\u010a",E:"\u0116",G:"\u0120",I:"\u0130",L:"\u013f",Z:"\u017b",c:"\u010b",e:"\u0117",g:"\u0121",l:"\u0140",z:"\u017c"},H:{O:"\u0150",U:"\u0170",o:"\u0151",u:"\u0171"},c:{C:"\xc7",G:"\u0122",K:"\u0136",L:"\u013b",N:"\u0145",R:"\u0156",S:"\u015e",T:"\u0162",c:"\xe7",g:"\u0123",k:"\u0137",l:"\u013c",n:"\u0146",r:"\u0157",s:"\u015f",t:"\u0163"},k:{A:"\u0104",E:"\u0118",I:"\u012e",U:"\u0172",a:"\u0105",e:"\u0119",i:"\u012f",u:"\u0173"},r:{U:"\u016e",u:"\u016f"},u:{A:"\u0102",E:"\u0114",G:"\u011e",I:"\u012c",O:"\u014e",U:"\u016c",a:"\u0103",e:"\u0115",g:"\u011f","\\i":"\u012d",o:"\u014f",u:"\u016d"},v:{C:"\u010c",D:"\u010e",E:"\u011a",L:"\u013d",N:"\u0147",R:"\u0158",S:"\u0160",T:"\u0164",Z:"\u017d",c:"\u010d",d:"\u010f",e:"\u011b",l:"\u013e",n:"\u0148",r:"\u0159",s:"\u0161",t:"\u0165",z:"\u017e"}},latexUnicodeASCII_2:{AA:"\xc5",AE:"\xc6",DH:"\xd0",DJ:"\u0110",L:"\u0141",NG:"\u014a",O:"\xd8",OE:"\u0152",TH:"\xde",aa:"\xe5",ae:"\xe6",dh:"\xf0",dj:"\u0111",i:"\u0131",l:"\u0142",ng:"\u014b",o:"\xf8",oe:"\u0153",ss:"\xdf",th:"\xfe"},latexUnicodeASCII_3:{"\\pounds":"\xa3","\\texttimes":"\xd7","\\copyright":"\xa9","\\textasciimacron":"\xaf","\\textcent":"\xa2","\\textregistered":"\xae","\\?\\`":"\xbf","\\!\\`":"\xa1","--":"\u2013","---":"\u2014"},latexUnicodeASCII_4:{"\\texttildelow":"~","\\textdollar":"$","\\textunderscore":"_","\\textbackslash":"\\","\\backslash":"\\","\\%":"%","\\$":"$","\\&":"&","\\#":"#","\\_":"_"},latexUnicodeMath:{A:"\u0391",B:"\u0392","\\Gamma":"\u0393","\\Delta":"\u0394",E:"\u0395",Z:"\u0396",H:"\u0397","\\Theta":"\u0398",I:"\u0399",K:"\u039a","\\Lambda":"\u039b",M:"\u039c",N:"\u039d","\\Xi":"\u039e",O:"\u039f","\\Pi":"\u03a0",P:"\u03a1","\\Sigma":"\u03a3",T:"\u03a4","\\Upsilon":"\u03a5","\\Phi":"\u03a6",X:"\u03a7","\\Psi":"\u03a8","\\Omega":"\u03a9","\\alpha":"\u03b1","\\beta":"\u03b2","\\gamma":"\u03b3","\\delta":"\u03b4","\\varepsilon":"\u03b5","\\epsilon":"\u03b5","\\zeta":"\u03b6","\\eta":"\u03b7","\\theta":"\u03b8","\\vartheta":"\u03b8","\\iota":"\u03b9","\\kappa":"\u03ba","\\lambda":"\u03bb","\\mu":"\u03bc","\\nu":"\u03bd","\\xi":"\u03be",o:"\u03bf","\\pi":"\u03c0","\\varpi":"\u03d6","\\rho":"\u03c1","\\varrho":"\u03f1","\\sigma":"\u03c3","\\varsigma":"\u03c2","\\tau":"\u03c4","\\upsilon":"\u03c5","\\phi":"\u03c6","\\varphi":"\u03c6","\\chi":"\u03c7","\\psi":"\u03c8","\\omega":"\u03c9","\\leq":"\u2264","\\geq":"\u2265","\\in":"\u2208","\\infty":"\u221e","\\int":"\u222b","\\exists":"\u2203","\\forall":"\u2200","\\partial":"\u2202","\\pm":"\xb1","\\prod":"\u220f","\\neg":"\xac","\\neq":"\u2260","\\not\\in":"\u2209","\\times":"\xd7","\\subset":"\u2282","\\sum":"\u2211","\\supset":"\u2283","\\surd":"\u221a","\\approx":"\u2248","\\bot":"\u22a5","\\cap":"\u2229","\\cdot":"\u22c5","\\cup":"\u222a","\\div":"\xf7","\\emptyset":"\u2205","\\equiv":"\u2261","\\to":"\u2192","\\vee":"\u2228","\\wedge":"\u2227","\\Leftrightarrow":"\u21d4","\\Rightarrow":"\u21d2","\\rightarrow":"\u2192"},_latex2Unicode:function(e){var t,r=this;if(e){var a=e.match(/\\(['"\.=H\^`ckruv~])\s*\{*(\\?[A-Z])/i);a&&3==a.length&&r.latexUnicodeASCII_1[a[1]]&&r.latexUnicodeASCII_1[a[1]][a[2]]&&(t=r.latexUnicodeASCII_1[a[1]][a[2]]),t||(a=e.match(/\\([A-Z])\{?([A-Z]?)\}?/i))&&3==a.length&&(t=r.latexUnicodeASCII_2[a[1]+a[2]]),t||r.latexUnicodeASCII_3[e]&&(t=r.latexUnicodeASCII_3[e]),t||r.latexUnicodeASCII_4[e]&&(t=r.latexUnicodeASCII_4[e])}return t},_latexMarkBraces:function(e){var t,r={};if(e)for(var a=0,i=0,n={},o=e.split(/([\{\}])/),s=-1,l=0;l<o.length;l++)s+=o[l].length,"{"==o[l]?(a++,t=!0,l>0&&"\\"==o[l-1]&&(t=!1),t&&(n[++i]=a,r[s]=a)):"}"==o[l]&&(t=!0,l>0&&"\\"==o[l-1]&&(t=!1),t&&(r[s]=n[i],0==--i&&(n={})));return r},_latexRemoveBraces:function(e,t){var r,a=this._latexMarkBraces(e),i=[];if(t[1].match(/\{\s*$/)&&t[3].match(/^\s*\}/)){var n=-1,o=e.length+1;for(var s in a)(r=parseInt(s))>n&&r<t[1].length&&(n=r),r<o&&r>=t[1].length+t[2].length&&(o=r);n>-1&&a[n]==a[o]&&(i.push(n),i.push(o))}if(t[2].match(/[\{\}]/))for(var s in a)if((r=parseInt(s))>t[1].length&&r<t[1].length+t[2].length)for(var l in a)a[l]==a[s]&&i.push(parseInt(l));var c=t[1].length;t[2].length;i.forEach((function(e){e>=0&&e<c?t[1]=t[1].substring(0,e)+t[1].substring(e+1,c):e>=t[1].length+t[2].length&&(e=e-t[1].length-t[2].length-1,t[3]=t[3].substring(0,e)+t[3].substring(e+1,t[3].length))}))},_latexSplitByMathEnvironment:function(e){return e.split(/(\$[^\$]*\$)/)},_initializeReverseMapping:function(){var e=this;for(var t in e.unicodeLatexASCII={},e.latexUnicodeASCII_1)for(var r in e.latexUnicodeASCII_1[t]){var a=t.match(/[a-z]/i)?" ":"";e.unicodeLatexASCII[e.latexUnicodeASCII_1[t][r]]="{\\"+t+a+r+"}"}for(var t in e.latexUnicodeASCII_2)e.unicodeLatexASCII[e.latexUnicodeASCII_2[t]]="{\\"+t+"}";for(var t in e.latexUnicodeASCII_3)e.unicodeLatexASCII[e.latexUnicodeASCII_3[t]]=t,t.match(/[a-z]+/)&&(e.unicodeLatexASCII[e.latexUnicodeASCII_3[t]]+="{}");for(var t in e.latexUnicodeMath)e.unicodeLatexASCII[e.latexUnicodeMath[t]]="$"+t+"$"},unicode2Latex:function(e){var t=this;if(!e)return"";t.unicodeLatexASCII||t._initializeReverseMapping();for(var r=t._latexSplitByMathEnvironment(e),a=0;a<r.length;a++){for(var i=!!r[a].match(/^\$.*\$$/),n=r[a].split(""),o=0;o<n.length;o++)n[o]in t.unicodeLatexASCII&&(n[o]=t.unicodeLatexASCII[n[o]],i&&(n[o]=n[o].replace(/\$/g,""),o+1<n.length&&(n[o+1].match(/[\/\s\$\}\{]/)||(n[o]+="{}"))));r[a]=n.join("")}return e=r.join("")},latex2Unicode:function(e){var t=this;if(!e)return"";var r="\\\\['\"\\.=H\\^`ckruv~]\\s*",a=[new RegExp("(.*)(\\\\(?:%|\\$|&|#|_|\\?\\`|\\!\\`))(.*)","g"),new RegExp("(.*)(\\\\[a-z][a-z]+)(.*)","g"),new RegExp("(.*)("+r+"\\{(?:[A-Za-z]|\\\\i|\\\\j)\\})(.*)","g"),new RegExp("(.*)("+r+"(?:[A-Za-z]|\\\\i|\\\\j))(.*)","g"),new RegExp("(.*)(\\\\(?:A{?A}?|A{?E}?|D{?H}?|D{?J}?|L|N{?G}?|O|O{?E}?|T{?H}?|S{?S}?|a{?a}?|a{?e}?|d{?h}?|d{?j}?|i|j|l|n{?g}?|o|o{?e}?|s{?s}?|t{?h}?|P|S))(.*)","g")];e=e.replace(/\\\$/g,"\\textdollar");for(var i=t._latexSplitByMathEnvironment(e),n=0;n<i.length;n++)if(!i[n].match(/^\$.*\$$/)){i[n]=i[n].replace(/\\\'i/g,"\\'\\i{}"),i[n]=i[n].replace(/\\\'\{i\}/g,"\\'{\\i}");var o={},s=0;for(var l in a.forEach((function(e){for(var r=null,a=0;null!==(r=e.exec(i[n]))&&!(++a>500);){var l=t._latex2Unicode(r[2]);if(l)t._latexRemoveBraces(i[n],r);else{var c="__82650A8ABPppP__"+ ++s+"__";o[c]=r[2],l=c}i[n]=r[1]+l+r[3],e.lastIndex=0}})),o)i[n]=i[n].replace(new RegExp(l),o[l]);i[n]=i[n].replace(/\{\s*\}/g,"")}return e=i.join("")}}),m.String=new m._String,m._TestFlags=m.Class.extend({failWebImport:function(){return!1},timeoutWebImport:function(){return!1},skipAllGuides:function(){return!1},alwaysShowGuides:function(){return!1},alwaysLoggedOut:function(){return!1},failAttachByUrlDownload:function(){return!1},testExtensionInstallWindow:function(){return!1},testExtensionUpdateWindow:function(){return!1},testNotChromeWindow:function(){return!1},testStatusPanel:function(){return!1},alwaysShowAnnouncements:function(){return!1},triggerExtensionJavascriptErrors:function(){return!1},triggerWebappJavascriptErrors:function(){return!1},triggerContentScriptJavascriptErrors:function(){return!1},testNewUser:function(){return!1},docsTestNotAllowedResponse:function(){return!1},docsTestServerTimeoutResponse:function(){return!1},docsTestFormattingErrorResponse:function(){return!1},filesystemUseLegacyLocalAttachments:function(){return!1},filesystemTestFailedLegacyRemoval:function(){return!1},testContactsAuth:function(){return!1},clearContacts:function(){return!1},testExpiredLicense:function(){return!1},testReadOnlyWebapp:function(){return!1},testMobileWebapp:function(){return!1},testTablet:function(){return!1},testPhone:function(){return!1},testWizardTaskFailures:function(){return!1},testWizardDupsFailure:function(){return!1},testWizardRefreshToken:function(){return!1},testLocalAttachmentNotFoundErrors:function(){return!1},testLocalAttachmentDriveDownloadFailure:function(){return!1}}),m.TestFlags=new m._TestFlags,m.UUID={parts:[],salt:{},timestamp:{}},function(){var e=Math.pow(2,14),t=Math.pow(2,16),r=Math.pow(2,28),a=Math.pow(2,32);function i(e,t){var r=e.toString(16);return r.length>t?r=r.substring(r.length-t):r.length<t&&(r=function(e,t,r){var a=String(e);for(r=r||" ";a.length<t;)a=r+a;return a}(r,t,"0")),r}function n(e,t){var r=Math.random()*(t-e+1);return Math.floor(r)+e}m.UUID.init=function(){var i,o,s=this;s.clockSeq=n(0,e-1),i=s.salt||(s.salt={}),o=s.timestamp||(s.timestamp={}),i.lo=n(0,a-1),i.hi=n(0,t-1),o.lo=n(0,a-1),o.hi=n(0,r-1)},m.UUID.generate=function(){var e=this,t=e.parts,r=e.timestamp;return t[0]=i(r.lo,8),t[1]=i(65535&r.hi,4),t[2]=i(r.hi>>>16&4095|e.version<<12,4),t[3]=i(128|e.clockSeq>>>8&63,2)+i(255&e.clockSeq,2),t[4]=i(e.salt.hi,4)+i(e.salt.lo,8),e.init(),t.join("-").toLowerCase()}}(),m.UUID.init(),m._Versioning=m.Class.extend({includes:[m.Events],debug:!1,initialize:function(){m.Msg.on("message",this.onMessage,this)},checkVersions:function(e){var t=e.version_info;this.c.log("  incoming version info"),this.c.log(m.pp(t));var r=this.getInfo();if("bg"===p.PP_WINDOW_ID){if("0"==r.PP_WEBAPP_VERSION||"0"==r.PP_EXTENSION_VERSION||"0"==t.PP_WEBAPP_VERSION||"0"==t.PP_EXTENSION_VERSION)return void this.c.log("Webapp or extension version is 0 --- must be dev mode!");parseInt(r.PP_WEBAPP_VERSION)>parseInt(t.PP_WEBAPP_VERSION)&&this.fire("webapp_needsupdate",{latestVersion:r.PP_WEBAPP_VERSION,myInfo:r,incomingInfo:t}),parseInt(r.PP_EXTENSION_VERSION)<parseInt(t.PP_EXTENSION_VERSION)&&this.fire("extension_needsupdate",{latestVersion:t.PP_EXTENSION_VERSION,myInfo:r,incomingInfo:t})}else console.error("Shouldn't get here from a non-bg tab!")},onMessage:function(e){var t=e.msg;t.version_info&&this.checkVersions(t)},getInfo:function(){return{PP_EXTENSION_VERSION:p.PP_EXTENSION_VERSION,PP_WEBAPP_VERSION:p.PP_WEBAPP_VERSION}}}),g(m,"_Versioning","Versioning"),m._Socket=m.Class.extend({includes:[m.Events],debug:!1,socket:null,backoffCounter:0,reconnectTimeout:null,logger:null,initSocket:function(e,t){var r=this;e&&(r.logger=t,r.log("Connecting..."),r.socket=e,r.socket.on("connect",(function(){r.log("Connected and authenticated")})),e.on("reconnect",(function(e){r.log("Reconnected. Attempt number: "+e)})),r.socket.on("disconnect",(function(e){if(r.log("Disconnected, reason: "+e),["io server disconnect","transport error"].includes(e)){if(r.backoffCounter>=50)return void r.logError("Failed to reconnect to SocketIO. Fatal error.");var t=Math.min(1e3*Math.pow(2,r.backoffCounter),3e4);r.backoffCounter+=1,r.clearReconnectTimeout(),r.reconnectTimeout=setTimeout((function(){r.log("Reconnecting..."),r.socket&&r.socket.connect()}),t)}})),r.socket.on("error",(function(e){r.logError("Error "+e)})))},emit:function(e,t){var r=t?e+" "+t:e;this.log("Emitting: "+r),this.socket.emit(e,t)},on:function(e,t){this.socket.on(e,t)},destroy:function(){var e=this;e.clearReconnectTimeout(),e.socket&&(e.socket.close(),e.socket.off(),e.socket=null),e.log("Destroyed")},clearReconnectTimeout:function(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)},composeLogMessage:function(e){return"[PP SocketIO]"+(this.socket&&this.socket.id?"["+this.socket.id+"]":"")+" "+e},log:function(e){var t=this.composeLogMessage(e);this.c.log(t),this.logger&&this.logger.log&&this.logger.log(t)},logError:function(e){var t=this.composeLogMessage(e);this.c.error(t),this.logger&&this.logger.error&&this.logger.error(t)}}),g(m,"_Socket","Socket"),m._IndexedDB=m.Class.extend({indexedDB:p&&(p.indexedDB||p.mozIndexedDB||p.webkitIndexedDB||p.msIndexedDB||p.shimIndexedDB),dbName:"paperpile_database",_openTable:function(e,t){var r=this,a=this.indexedDB.open(this.dbName),i=!0;a.onupgradeneeded=function(){i=!1},a.onsuccess=function(){var n,o=a.result;if(!i)return r.indexedDB.deleteDatabase(r.dbName),void m.Utils.callback(t,null,[]);try{n=o.transaction([e],"readwrite")}catch(e){return void m.Utils.callback(t,null,[])}var s=n.objectStore(e);m.Utils.callback(t,null,[s])},a.onerror=function(e){m.Utils.callback(t,null,[])}},getAllFiles:function(e){m.backend.Settings.hasBetaFeature("sputnik")?this._openTable("Files",(function(t){if(t){var r=t.getAll();r.onsuccess=function(){var t=r.result;void 0!==t?m.Utils.callback(e,null,[t]):m.Utils.callback(e,null,[])}}else m.Utils.callback(e,null,[])})):m.Utils.callback(e,null,[])},deleteSyncedFiles:function(e){var t=this;m.backend.Settings.hasBetaFeature("sputnik")?m.backend.Attachments.getAllAttachments(!1,[],(function(r){if(r&&r.data){var a=r.data.filter((function(e){return e.s3_md5}));t._openTable("Files",(function(t){t?a.forEach((function(r,i){t.delete(r._id).onsuccess=function(){i===a.length-1&&(console.log("Deleted synced from indexDB: ",a.length),m.Utils.callback(e,null,[]))}})):m.Utils.callback(e,null,[])}))}else m.Utils.callback(e,null,[])})):m.Utils.callback(e,null,[])},getFile:function(e,t){this._openTable("Files",(function(r){if(r){var a=r.get(e);a.onsuccess=function(){var e=a.result;void 0!==e?m.Utils.callback(t,null,[e]):m.Utils.callback(t,null,[])}}else m.Utils.callback(t,null,[])}))},getBlob:function(e,t){this.getFile(e,(function(e){e?m.Utils.callback(t,null,[e.blob]):m.Utils.callback(t,null,[])}))},saveFile:function(e,t,r,a){this._openTable("Files",(function(i){var n=i.put({blob:t,id:e._id,md5:r,user_id:m.Session.get("user_id"),size:t.size,filename:e.filename,"mime-type":"application/pdf"});n.onsuccess=function(){if(void 0!==n.result){var i=new Blob([t],{type:"application/pdf"}),o=URL.createObjectURL(i);m.Utils.callback(a,null,[{name:e.filename,url:o,originalName:e.filename,md5:r,size:t.size,type:"application/pdf"},null])}else console.log("Error save in indexdb")}}))}}),m.IndexedDB=new m._IndexedDB,function(){var e=/\/((?!\.\.\/)[^\/]*)\/\.\.\//;function t(t){if(!t)return"";var r=t.replace(/\/\.\//g,"/");for(r=r.replace(/\/\.$/,"/");r.match(e);)r=r.replace(e,"/");for(r=r.replace(/\/([^\/]*)\/\.\.$/,"/");r.match(/\/\.\.\//);)r=r.replace(/\/\.\.\//,"/");return r}(f=function(e){e||(e="");var t=e.match(/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/),r=t[1]||null,a=t[2]||null,i=t[3]||null,n=t[4]||null,o=t[5]||null;this.getScheme=function(){return r},this.setScheme=function(e){r=e},this.getAuthority=function(){return a},this.setAuthority=function(e){a=e},this.getPath=function(){return i},this.setPath=function(e){i=e},this.getQuery=function(){return n},this.setQuery=function(e){n=e},this.getFragment=function(){return o},this.setFragment=function(e){o=e}}).prototype.toString=function(){var e="";return this.getScheme()&&(e+=this.getScheme()+":"),this.getAuthority()&&(e+="//"+this.getAuthority()),this.getPath()&&(e+=this.getPath()),this.getQuery()&&(e+="?"+this.getQuery()),this.getFragment()&&(e+="#"+this.getFragment()),e},f.prototype.resolve=function(e){var r=new f;return this.getScheme()?(r.setScheme(this.getScheme()),r.setAuthority(this.getAuthority()),r.setPath(t(this.getPath())),r.setQuery(this.getQuery())):(this.getAuthority()?(r.setAuthority(this.getAuthority()),r.setPath(t(this.getPath())),r.setQuery(this.getQuery())):(this.getPath()?("/"===this.getPath().charAt(0)?r.setPath(t(this.getPath())):(r.setPath(function(e,t){return e.authority&&!e.path?"/"+t:e.getPath().match(/^(.*)\//)[0]+t}(e,this.getPath())),r.setPath(t(r.getPath()))),r.setQuery(this.getQuery())):(r.setPath(e.getPath()),this.getQuery()?r.setQuery(this.getQuery()):r.setQuery(e.getQuery())),r.setAuthority(e.getAuthority())),r.setScheme(e.getScheme())),r.setFragment(this.getFragment()),r},f.prototype.parseQuery=function(){return b.fromString(this.getQuery(),this.querySeparator)},(b=function(){this.params={},this.separator="&"}).fromString=function(e,t){var r=new b;return t&&(r.separator=t),r.addStringParams(e),r},b.prototype.addStringParams=function(e){for(var t,r,a,i=e.split(this.separator),n=0;n<i.length;n++)r=(t=i[n].split("=",2))[0].replace(/\+/g," "),a=t[1].replace(/\+/g," "),this.params.hasOwnProperty(r)||(this.params[r]=[]),this.params[r].push(a)},b.prototype.getParam=function(e){return this.params.hasOwnProperty(e)?this.params[e][0]:null},b.prototype.toString=function(){var e,t,r=[],a=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t.sort()}(this.params);for(e=0;e<a.length;e++)for(t=0;t<this.params[a[e]].length;t++)r.push(a[e].replace(/ /g,"+")+"="+this.params[a[e]][t].replace(/ /g,"+"));return r.join(this.separator)}}(),y=y||function(e){var r,a,i,n={natives:!1,extensibility:!1},o={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},s={},l={},c=[],u={default:/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/,class:/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/},d=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,p=/([\s\S])(?=[\s\S]*\1)/g,m=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,h=o.exec.call(/()??/,"")[1]===e,g=RegExp.prototype.sticky!==e,f=!1,b="gim"+(g?"y":"");function y(e,t,a){var i;for(i in r.prototype)r.prototype.hasOwnProperty(i)&&(e[i]=r.prototype[i]);return e.xregexp={captureNames:t,isNative:!!a},e}function v(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function _(e,t,a){if(!r.isRegExp(e))throw new TypeError("type RegExp expected");var i=o.replace.call(v(e)+(t||""),p,"");return a&&(i=o.replace.call(i,new RegExp("["+a+"]+","g"),"")),e=e.xregexp&&!e.xregexp.isNative?y(r(e.source,i),e.xregexp.captureNames?e.xregexp.captureNames.slice(0):null):y(new RegExp(e.source,i),null,!0)}function w(e,t){var r=e.length;if(Array.prototype.lastIndexOf)return e.lastIndexOf(t);for(;r--;)if(e[r]===t)return r;return-1}function P(e,t){return Object.prototype.toString.call(e).toLowerCase()==="[object "+t+"]"}function S(e){return"all"===(e=e||{})||e.all?e={natives:!0,extensibility:!0}:P(e,"string")&&(e=r.forEach(e,/[^\s,]+/,(function(e){this[e]=!0}),{})),e}function C(e,t,r,a){var i,n,o=c.length,l=null;f=!0;try{for(;o--;)if(("all"===(n=c[o]).scope||n.scope===r)&&(!n.trigger||n.trigger.call(a))&&(n.pattern.lastIndex=t,(i=s.exec.call(n.pattern,e))&&i.index===t)){l={output:n.handler.call(a,i,r),match:i};break}}catch(e){throw e}finally{f=!1}return l}function A(e){r.addToken=a[e?"on":"off"],n.extensibility=e}function E(e){RegExp.prototype.exec=(e?s:o).exec,RegExp.prototype.test=(e?s:o).test,String.prototype.match=(e?s:o).match,String.prototype.replace=(e?s:o).replace,String.prototype.split=(e?s:o).split,n.natives=e}return(r=function(t,a){if(r.isRegExp(t)){if(a!==e)throw new TypeError("can't supply flags when constructing one RegExp from another");return _(t)}if(f)throw new Error("can't call the XRegExp constructor within token definition functions");var i,n,s,l=[],c="default",d={hasNamedCapture:!1,captureNames:[],hasFlag:function(e){return a.indexOf(e)>-1}},m=0;if(t=t===e?"":String(t),a=a===e?"":String(a),o.match.call(a,p))throw new SyntaxError("invalid duplicate regular expression flag");for(t=o.replace.call(t,/^\(\?([\w$]+)\)/,(function(e,t){if(o.test.call(/[gy]/,t))throw new SyntaxError("can't use flag g or y in mode modifier");return a=o.replace.call(a+t,p,""),""})),r.forEach(a,/[\s\S]/,(function(e){if(b.indexOf(e[0])<0)throw new SyntaxError("invalid regular expression flag "+e[0])}));m<t.length;)(i=C(t,m,c,d))?(l.push(i.output),m+=i.match[0].length||1):(n=o.exec.call(u[c],t.slice(m)))?(l.push(n[0]),m+=n[0].length):("["===(s=t.charAt(m))?c="class":"]"===s&&(c="default"),l.push(s),++m);return y(new RegExp(l.join(""),o.replace.call(a,/[^gimy]+/g,"")),d.hasNamedCapture?d.captureNames:null)}).addToken=(a={on:function(e,t,r){r=r||{},e&&c.push({pattern:_(e,"g"+(g?"y":"")),handler:t,scope:r.scope||"default",trigger:r.trigger||null}),r.customFlags&&(b=o.replace.call(b+r.customFlags,p,""))},off:function(){throw new Error("extensibility must be installed before using addToken")}}).off,r.cache=function(e,t){var a=e+"/"+(t||"");return l[a]||(l[a]=r(e,t))},r.escape=function(e){return o.replace.call(e,/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},r.exec=function(e,t,r,a){var i,n=_(t,"g"+(a&&g?"y":""),!1===a?"y":"");return n.lastIndex=r=r||0,i=s.exec.call(n,e),a&&i&&i.index!==r&&(i=null),t.global&&(t.lastIndex=i?n.lastIndex:0),i},r.forEach=function(e,t,a,i){for(var n,o=0,s=-1;n=r.exec(e,t,o);)a.call(i,n,++s,e,t),o=n.index+(n[0].length||1);return i},r.globalize=function(e){return _(e,"g")},r.install=function(e){e=S(e),!n.natives&&e.natives&&E(!0),!n.extensibility&&e.extensibility&&A(!0)},r.isInstalled=function(e){return!!n[e]},r.isRegExp=function(e){return P(e,"regexp")},r.matchChain=function(e,t){return function e(a,i){var n,o=t[i].regex?t[i]:{regex:t[i]},s=[],l=function(e){s.push(o.backref?e[o.backref]||"":e[0])};for(n=0;n<a.length;++n)r.forEach(a[n],o.regex,l);return i!==t.length-1&&s.length?e(s,i+1):s}([e],0)},r.replace=function(t,a,i,n){var o,l=r.isRegExp(a),c=a;return l?(n===e&&a.global&&(n="all"),c=_(a,"all"===n?"g":"","all"===n?"":"g")):"all"===n&&(c=new RegExp(r.escape(String(a)),"g")),o=s.replace.call(String(t),c,i),l&&a.global&&(a.lastIndex=0),o},r.split=function(e,t,r){return s.split.call(e,t,r)},r.test=function(e,t,a,i){return!!r.exec(e,t,a,i)},r.uninstall=function(e){e=S(e),n.natives&&e.natives&&E(!1),n.extensibility&&e.extensibility&&A(!1)},r.union=function(e,t){var a,i,n,o,s=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,l=0,c=function(e,t,r){var n=i[l-a];if(t){if(++l,n)return"(?<"+n+">"}else if(r)return"\\"+(+r+a);return e},u=[];if(!P(e,"array")||!e.length)throw new TypeError("patterns must be a nonempty array");for(o=0;o<e.length;++o)n=e[o],r.isRegExp(n)?(a=l,i=n.xregexp&&n.xregexp.captureNames||[],u.push(r(n.source).source.replace(s,c))):u.push(r.escape(n));return r(u.join("|"),t)},r.version="2.0.0",s.exec=function(t){var r,a,i,n,s;if(this.global||(n=this.lastIndex),r=o.exec.apply(this,arguments)){if(!h&&r.length>1&&w(r,"")>-1&&(i=new RegExp(this.source,o.replace.call(v(this),"g","")),o.replace.call(String(t).slice(r.index),i,(function(){var t;for(t=1;t<arguments.length-2;++t)arguments[t]===e&&(r[t]=e)}))),this.xregexp&&this.xregexp.captureNames)for(s=1;s<r.length;++s)(a=this.xregexp.captureNames[s-1])&&(r[a]=r[s]);this.global&&!r[0].length&&this.lastIndex>r.index&&(this.lastIndex=r.index)}return this.global||(this.lastIndex=n),r},s.test=function(e){return!!s.exec.call(this,e)},s.match=function(e){if(r.isRegExp(e)){if(e.global){var t=o.match.apply(this,arguments);return e.lastIndex=0,t}}else e=new RegExp(e);return s.exec.call(e,this)},s.replace=function(e,t){var a,i,n,s,l=r.isRegExp(e);return l?(e.xregexp&&(a=e.xregexp.captureNames),e.global||(s=e.lastIndex)):e+="",P(t,"function")?i=o.replace.call(String(this),e,(function(){var r,i=arguments;if(a)for(i[0]=new String(i[0]),r=0;r<a.length;++r)a[r]&&(i[0][a[r]]=i[r+1]);return l&&e.global&&(e.lastIndex=i[i.length-2]+i[0].length),t.apply(null,i)})):(n=String(this),i=o.replace.call(n,e,(function(){var e=arguments;return o.replace.call(String(t),d,(function(t,r,i){var n;if(r){if((n=+r)<=e.length-3)return e[n]||"";if((n=a?w(a,r):-1)<0)throw new SyntaxError("backreference to undefined group "+t);return e[n+1]||""}if("$"===i)return"$";if("&"===i||0==+i)return e[0];if("`"===i)return e[e.length-1].slice(0,e[e.length-2]);if("'"===i)return e[e.length-1].slice(e[e.length-2]+e[0].length);if(i=+i,!isNaN(i)){if(i>e.length-3)throw new SyntaxError("backreference to undefined group "+t);return e[i]||""}throw new SyntaxError("invalid token "+t)}))}))),l&&(e.global?e.lastIndex=0:e.lastIndex=s),i},s.split=function(t,a){if(!r.isRegExp(t))return o.split.apply(this,arguments);var i,n=String(this),s=t.lastIndex,l=[],c=0;return a=(a===e?-1:a)>>>0,r.forEach(n,t,(function(e){e.index+e[0].length>c&&(l.push(n.slice(c,e.index)),e.length>1&&e.index<n.length&&Array.prototype.push.apply(l,e.slice(1)),i=e[0].length,c=e.index+i)})),c===n.length?o.test.call(t,"")&&!i||l.push(""):l.push(n.slice(c)),t.lastIndex=s,l.length>a?l.slice(0,a):l},(i=a.on)(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,(function(e,t){if("B"===e[1]&&"default"===t)return e[0];throw new SyntaxError("invalid escape "+e[0])}),{scope:"all"}),i(/\[(\^?)]/,(function(e){return e[1]?"[\\s\\S]":"\\b\\B"})),i(/(?:\(\?#[^)]*\))+/,(function(e){return o.test.call(m,e.input.slice(e.index+e[0].length))?"":"(?:)"})),i(/\\k<([\w$]+)>/,(function(e){var t=isNaN(e[1])?w(this.captureNames,e[1])+1:+e[1],r=e.index+e[0].length;if(!t||t>this.captureNames.length)throw new SyntaxError("backreference to undefined group "+e[0]);return"\\"+t+(r===e.input.length||isNaN(e.input.charAt(r))?"":"(?:)")})),i(/(?:\s+|#.*)+/,(function(e){return o.test.call(m,e.input.slice(e.index+e[0].length))?"":"(?:)"}),{trigger:function(){return this.hasFlag("x")},customFlags:"x"}),i(/\./,(function(){return"[\\s\\S]"}),{trigger:function(){return this.hasFlag("s")},customFlags:"s"}),i(/\(\?P?<([\w$]+)>/,(function(e){if(!isNaN(e[1]))throw new SyntaxError("can't use integer as capture name "+e[0]);return this.captureNames.push(e[1]),this.hasNamedCapture=!0,"("})),i(/\\(\d+)/,(function(e,t){if(!("default"===t&&/^[1-9]/.test(e[1])&&+e[1]<=this.captureNames.length)&&"0"!==e[1])throw new SyntaxError("can't use octal escape or backreference to undefined group "+e[0]);return e[0]}),{scope:"all"}),i(/\((?!\?)/,(function(){return this.hasFlag("n")?"(?:":(this.captureNames.push(null),"(")}),{customFlags:"n"}),t.XRegExp=r,r}(),m.bg._RemoteControl=m.Class.extend({debug:!1,downloadMessages:{REDOWNLOAD_SUCCESSFUL:"Redownload finished.",WRITING_LOCAL_FILE_FAILED:"Redownload was successful but writing to local filesystem failed.",CALCULATING_MD5_BLOB_FAILED:"Redownload was successful but calculating the MD5 sum of the downloaded blob failed.",CALCULATING_MD5_LOCALFILE_FAILED:"Calculating the MD5 sum of the current local file failed."},initialize:function(){m.Msg.on("message",this.onMessage,this)},onMessage:function(e){e.msg},viewGoogleDriveFolder:function(e){var t=this;m.cloud.Google.getPaperpileFolderUrl((function(r,a){a?m.Msg.callback(e,a):(m.Msg.callback(e),t.createTabWrapper({url:r,openerTabId:m.Utils.getTabId(e)}))}))},manageGoogleDriveFolder:function(e){var t=this;m.cloud.Google.getPaperpileFolderId((function(r,a){if(a)m.Msg.callback(e,a);else{var i="https://drive.google.com/#folders/"+r;m.Msg.callback(e),t.createTabWrapper({url:i,openerTabId:m.Utils.getTabId(e)})}}))},viewPubPdf:function(e,t){var r=e.pub,a=m.library.Publication.getPdfAttachment(r);if(a){var i=a._id;e.attachment_id=i,this.viewPubAttachment(e,t)}else console.error("No PDF attachment for pub",r)},viewPubAttachment:function(e,t){var r=e.pub,a=e.attachment_id;if(!m.library.Publication.getAttachment(r,a))return m.log({type:"exception",subtype:"Attachments",msg:"Attachment not found within database",pub:r,attachmentId:a}),void m.Msg.callback(t,[null,"Attachment not found within database"]);var i=this,n={openDrive:function(e){i.viewSyncedAttachment(e,t)},openRaw:function(e){i.viewRawAttachment(e,t)},openPubView:function(e){i.viewRawAttachment(e,t)},openMetaPDF:function(e){i.viewMetaPDFAttachment(e,t)},saveToDisk:function(e){i.saveToDiskRawAttachment(e,t)}};m.library.Attachment.openAttachment(e,n)},viewSyncedAttachment:function(e,t){var r,a=this,i=e.attachment_id,n=e.pub,o=m.library.Publication.getAttachment(n,i),s=function(r){a.createOrNavigateTab(e,r,t,(function(e){m.Msg.callback(t,[e])}))};r=function(){var e=m.backend.Attachments.getDriveDesktopWebUrl(o);s(e)};var l=m.Session.get("user_id");n.owner!=l?m.backend.Attachments.addViewDrivePermissions(o,(function(e,a){a?m.Msg.callback(t,[null,"viewSyncedAttachment error adding Drive permissions / "+a]):r()})):r()},checkWindows:function(e,t,r,a,i,n,o){var s=this,l=e.shift(),c=function(e){return e||(e=""),e.replace(/view-dm.html/,"view.html")};l?chrome.tabs.query({windowId:l},(function(l){for(var u=0;u<l.length;u++)c(l[u].url)==c(a)&&(t=l[u].id);s.checkWindows(e,t,r,a,i,n,o)})):t?chrome.tabs.update(t,{active:!0},(function(e){m.Utils.callback(o,s,[{url:a,tabId:e.id,viewer:r.viewer}])})):s.createTabWrapper({url:a,openerTabId:m.Utils.getTabId(n),active:!i},(function(e){m.Utils.callback(o,s,[{url:a,tabId:e.id,viewer:r.viewer}])}))},createOrNavigateTab:function(e,t,r,a){var i=this,n=1==e.openInBackground;if(!0===e.openInCurrentTab){var o=m.Utils.getTabId(r);chrome.tabs.update(o,{url:t},(function(r){m.Utils.callback(a,i,[{url:t,tabId:r.id,viewer:e.viewer}])}))}else chrome.windows.getAll({},(function(o){for(var s=[],l=0;l<o.length;l++)s.push(o[l].id);i.checkWindows(s,null,e,t,n,r,a)}))},getMD5SumLocal:function(e,t){var r=this;e.file((function(e){m.files.Files.getBlobMd5(e,(function(e,a){a&&(e=null),m.Utils.callback(t,r,[e])}))}),(function(e){m.Utils.callback(t,r,[null])}))},getMD5SumLocalGDrive:function(e,t,r){var a=this;t.file((function(t){m.files.Files.getBlobMd5(t,(function(t,i){i&&(t=null),m.cloud.Google.getFilesFromIds([e.gdrive_id],(function(i){i&&e.gdrive_id in i?m.Utils.callback(r,a,[t,i[e.gdrive_id].md5Checksum,i[e.gdrive_id]]):m.Utils.callback(r,a,[t,null,null])}))}))}),(function(e){m.Utils.callback(r,a,[null,null,null])}))},viewRawAttachment:function(e,t){var r=this;e.viewer="raw";var a=e.pub,i=e.attachment_id,n=m.library.Publication.getAttachment(a,i);if(m.library.Attachment.browserCanView(n)){var o={};"forceGoogleDrive"in e&&(o.forceGoogleDrive=e.forceGoogleDrive),m.backend.LocalAttachments.getLocalFileEntry(n,(function(i,o){if(o)m.Msg.callback(t,[null,"viewRawAttachment / "+o]);else{var s=m.backend.Settings.getGoogleDriveConfig(),l=m.library.Attachment.getFilename(a,n,s),c=i.toURL(),u=chrome.runtime.getURL("view-file.html?file="+encodeURIComponent(c)+"&name="+encodeURIComponent(l));r.createOrNavigateTab(e,u,t,(function(e){m.Msg.callback(t,[e]),r.checkIfRedownloadRefreshNeeded(n,i,e.tabId,(function(){}))}))}}),o)}else r.saveToDiskRawAttachment(e,t)},saveToDiskRawAttachment:function(e,t){var r=this,a=e.pub,i=e.attachment_id,n=m.library.Publication.getAttachment(a,i),o={};"forceGoogleDrive"in e&&(o.forceGoogleDrive=e.forceGoogleDrive),m.backend.LocalAttachments.getLocalFileEntry(n,(function(e,i){i?m.Msg.callback(t,[null,"viewRawAttachment / "+i]):r.checkIfLatestVersion(n,e,(function(i){var o=m.backend.Settings.getGoogleDriveConfig(),s=m.library.Attachment.getFilename(a,n,o);r.triggerDownloadToDisk(e,s),m.Msg.callback(t,[{status:"done"},null])}))}),o)},checkIfLatestVersion:function(e,t,r){var a=this;a.getMD5SumLocal(t,(function(t){null!==t?m.cloud.S3.download(e._id,"latest",[t],(function(t,i){!i&&t?m.files.Files.getBlobMd5(t,(function(i,n){n?m.Utils.callback(r,this,[{msg:a.downloadMessages.CALCULATING_MD5_BLOB_FAILED}]):m.files.Files.writeBlobToFile(t,e._id,"","application/pdf",i,e.filename,(function(e,t){t?m.Utils.callback(r,this,[{msg:a.downloadMessages.WRITING_LOCAL_FILE_FAILED}]):m.Utils.callback(r,this,[{msg:a.downloadMessages.REDOWNLOAD_SUCCESSFUL}])}))})):m.Utils.callback(r,this,[{msg:i.msg}])})):m.Utils.callback(r,this,[{msg:a.downloadMessages.CALCULATING_MD5_LOCALFILE_FAILED}])}))},checkIfRedownloadRefreshNeeded:function(e,t,r,a){var i=this;i.checkIfLatestVersion(e,t,(function(e){e.msg&&e.msg==i.downloadMessages.REDOWNLOAD_SUCCESSFUL?(chrome.tabs.reload(r),m.Utils.callback(a,this,[!0])):m.Utils.callback(a,this,[null])}))},triggerDownloadToDisk:function(e,t){var r=document.createElement("a");r.href=e.toURL(),r.target="_blank",r.download=t,(document.body||document.documentElement).appendChild(r),r.click(),r.parentNode.removeChild(r)},viewMetaPDFAttachment:function(e,t){var r=this;e.viewer="metapdf";var a=e.pub,i=e.attachment_id,n=e.attachment||m.library.Publication.getAttachment(a,i);m.backend.LocalAttachments.getLocalFileUrl(n,(function(i,n){if(n)m.Msg.callback(t,[null,"viewMetaPDFAttachment / "+n]);else{var o=i.match(/persistent\/([^\/]+)\/pp_attachments\/([^\/]+)/);o&&o.length&&o[2]?m.backend.MetaPDF.getShortURLID(o[1],o[2],a._id,(function(a,i){var n=chrome.runtime.getURL("view.html?mp="+a);i&&"dark"===i.theme&&(n=chrome.runtime.getURL("view-dm.html?mp="+a)),r.createOrNavigateTab(e,n,t,(function(e){m.Msg.callback(t,[e])}))})):m.Msg.callback(t,[null,"viewMetaPDFAttachment / Error parsing attachment URL."])}}))},viewPubViewAttachment:function(e,t){var r=this;e.viewer="pubview";var a=e.pub,i=e.attachment_id,n=m.library.Publication.getAttachment(a,i),o=m.library.Attachment.getPubViewUrl(n),s=1==e.openInBackground,l=function(a){1==e.openedFromWebApp?m.Utils.defer((function(){chrome.tabs.executeScript(a.id,{file:"js/flagOpenedByWebapp.js",runAt:"document_start"},(function(){console.log("Webapp has been flagged!",a.id),m.Msg.callback(t,[{url:o,tabId:a.id,viewer:e.viewer}]),m.backend.LocalAttachments.getLocalFileEntry(n,(function(e,t){t||r.checkIfRedownloadRefreshNeeded(n,e,a.id,(function(e){e&&chrome.tabs.executeScript(a.id,{file:"js/flagOpenedByWebapp.js",runAt:"document_start"},(function(){}))}))}))}))}),10):(m.Msg.callback(t,[{url:o,tabId:a.id,viewer:e.viewer}]),m.backend.LocalAttachments.getLocalFileEntry(n,(function(e,t){t||r.checkIfRedownloadRefreshNeeded(n,e,a.id,(function(){}))})))};if(!0===e.openInCurrentTab){var c=m.Utils.getTabId(t);chrome.tabs.update(c,{url:o},l)}else r.createTabWrapper({url:o,openerTabId:m.Utils.getTabId(t),active:!s},l)},createTabWrapper:function(e,t){chrome.tabs.query({active:!0},(function(r){r&&r.length>0&&"index"in r[0]&&(e.index=r[0].index+1),chrome.tabs.create(e,t)}))},openTab:function(e,t,r){var a=1==e.openInBackground,i=m.Utils.bind((function(e){e.id;m.Utils.callback(t,this,[e])}),this);this.createTabWrapper({url:e.url,openerTabId:m.Utils.getTabId(r),active:!a},i)},openGoogleAttachTab:function(e,t){console.log("Opening google attach tab...");var r="",a=e.title||"";a&&(a.split(/\s+/).length<5&&(r=e.journal||""));var i="";"PP_PATENT"==e.pubtype&&(i=" "+m.library.PublicationTypes.getLabel(e));var n="https://www.google.com/search?q="+encodeURIComponent(a+" "+r+i+" filetype:pdf");n+="&pp_attach=1";var o=e.pub;this.openAttachTab(n,o,"pdf",t)},openSupplementaryAttachTab:function(e,t){var r=e.url,a=e.pub;this.openAttachTab(r,a,"suppl",t)},openPdfAttachTab:function(e,t){var r=e.url,a=e.pub;this.openAttachTab(r,a,"articlepdf",t)},openAttachTab:function(e,t,r,a){this.openTab({url:m.crawling.ProxyControl.setProxyIfNeeded(e)[0]},(function(e){var a=e.id;chrome.tabs.executeScript(a,{file:"dist/pp-attach.js",runAt:"document_idle"},(function(){m.Msg.sendMessage({targetTab:a,attachTabType:r,pub:t})})),chrome.tabs.insertCSS(a,{file:"dist/pp-attach.css",runAt:"document_idle"},(function(){}))}),a)},triggerIntercom:function(e,t){m.Utils.getTabId(t);this.doWhenWebAppIsOpen((function(t){m.Msg.sendMessage({targetTab:t,fn:"openIntercom",args:[e]}),chrome.tabs.update(t,{active:!0})}))},triggerViewPubs:function(e,t){var r=e.ids,a=e.label,i=e.showAbstract,n=e.showAttachments,o=e.selectAll,s=e.closeCurrentTab,l=m.Utils.getTabId(t);if(e.citationView&&m.backend.Settings.hasBetaFeature("sputnik")&&r&&r.length>0){var c=(d=r[0],p=d.replace(/-/g,""),btoa(String.fromCharCode.apply(null,p.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").map((function(e){return parseInt(e,16)})))).replace(/\//g,"_").replace(/\+/g,"~").replace(/=+$/,"")),u=m.Globals.getNewWebappUrl()+"/my-library/p"+c;chrome.tabs.create({url:u})}else{var d,p;this.doWhenWebAppIsOpen((function(e){a||(a="{n} Reference{s}");var t=r.length;a=(a=a.replace(/{n}/g,t)).replace(/({es}|{s})/g,t>1?"s":""),r&&r.length>0&&m.Msg.sendMessage({targetTab:e,fn:"setGridFilter",args:[{displayName:a,filterType:"query",showAbstract:i,showAttachments:n,selectAll:o,ids:r}]}),chrome.tabs.update(e,{active:!0}),!0===s&&void 0!==l&&chrome.tabs.remove(l)}))}},getWebAppTabCount:function(e){var t=this,r=0;chrome.windows.getAll({populate:!0},(function(a){a.forEach((function(e){e.tabs.forEach((function(e){t.looksLikeAWebApp(e)&&r++}))})),m.Utils.callback(e,null,[r])}))},doWithOpenWebApps:function(e){chrome.windows.getAll({populate:!0},m.Utils.bind((function(t){for(var r=0;r<t.length;r++)for(var a=t[r].tabs,i=0;i<a.length;i++)this.looksLikeAWebApp(a[i])&&(this.c.log("Found a webapp tab -- calling callback!",a[i].url,a[i].id),m.Utils.callback(e,this,[a[i].id]))}),this))},openWebappTab:function(e,t){e&&e.closeExistingTab&&m.Utils.defer((function(){chrome.tabs.remove(e.closeExistingTab)}),200),this.openWebAppAndCallback()},openWebAppAndCallback:function(e){this.doWhenWebAppIsOpen((function(t,r){r?m.Utils.callback(e,null,[t,r]):chrome.tabs.update(t,{active:!0},(function(){m.Utils.callback(e,null,[t,r])}))}))},doWhenWebAppIsOpen:function(e){var t=this;chrome.windows.getLastFocused({populate:!0},(function(r){chrome.windows.getAll({populate:!0},(function(a){var i,n={};r&&(i=r.id);for(var o=0;o<a.length;o++)for(var s=a[o],l=s.tabs,c=0;c<l.length;c++)t.isWebAppTab(l[c])&&(n[s.id]=l[c].id);if(i&&null!=n[i])m.Utils.callback(e,t,[n[i],!1]);else{var u,d;for(var p in n){var h=n[p];h&&(u=parseInt(h),d=parseInt(p))}if(u&&d&&d!==i)chrome.windows.update(d,{focused:!0},(function(r){m.Utils.callback(e,t,[u,!1])}));else{var g;if(m.backend.Settings.hasBetaFeature("sputnik"))g=m.Globals.getNewWebappUrl();else{g=m.Globals.getUrlBase()+"/app"}var f={url:g};i&&(f.windowId=i),chrome.tabs.create(f,(function(r){t._webAppTabId=r.id,t._webAppCallback=function(){m.Utils.callback(e,t,[r.id,!0])},m.Msg.on("message",t._onWebAppMessage,t)}))}}}))}))},attachFileToPub:function(e,t){var r=e.attachType;"pdf"!=r&&"articlepdf"!=r||(e.articlePdf=!0),m.bg.RemoteControl.openWebAppAndCallback((function(){var r,a=e.url;if(e.useLastSelected){var i=m.bg.App.lastSelectedPub;i&&(r=i._id)}else e.pubId?r=e.pubId:console.log("NO PUB ID!!!");m.backend.Publications.getPubById(r,(function(r,i){i?console.log("EROR GETTING PUB!!"):(e.closeTab&&t&&m.Utils.defer((function(){chrome.tabs.remove(t.tab.id)}),200),m.bg.RemoteControl.triggerViewPubs({ids:[r._id],showAttachments:!0},t),m.Utils.defer((function(){m.backend.Attachments.addAttachmentFromUrl(r,a,{description:e.description,filename:e.filename,articlePdf:e.articlePdf,callback:function(t,r){r?m.log({type:"error",subtype:"Attaching file from URL",msg:"Download / attachment failed: "+r}):m.log({type:"event",subtype:"Successfully attached "+e.typeStr,msg:"Download and attachment was successful",fileData:t})}})}),800))}))}))},importSelectedCitation:function(e,t){var r=this,a=e.link,i=e.clickInfo,n=function(e){m.Utils.createStatus(e)},o=function(e,t){n({text:e,iconCls:"error",links:["STATUS_PANEL_SEARCH_ONLINE"],data:{link:a}}),m.log({type:"error",subtype:"Import citation link crawl error",msg:"Failure importing context-selected link",errorMsg:e,pub:t,clickInfo:i})},s=function(e){var t=m.library.Publication.formatAuthorYear(e);n({text:"Added "+t+" to your library.",iconCls:"ok",links:["STATUS_PANEL_SHOW_PUB"],data:{pubId:e._id}}),m.log({type:"event",subtype:"Import from link",pub:e,clickInfo:i})},l=function(e,t){m.backend.Publications.insertPubs({data:[e],debugsource:m.Utils.debugStamp("RemoteControl"),scope:r,callback:function(r,a){if(a)o("Error importing publication",e);else{m.Msg.sendMessage({reloadLibraryView:!0});var i=r.response[0].updates[0];m.Utils.callback(t,null,[i,null])}}})};r.openWebAppAndCallback((function(){n({text:"Importing item from selected URL",progress:-1}),m.Utils.defer((function(){var e={pubtype:"PP_MISC",url:[a]};m.library.Publication.autoClean(e);var t=m.library.Publication.isIncomplete(e);(new m.crawling.Autocomplete).autocomplete(e,(function(r,a){a?t?o("Error getting metadata for selected URL.",e):l(e,(function(e){s(e)})):l(r,(function(e){m.Utils.defer((function(){s(e)}),500),(new m.crawling.DownloadPdfs).crawlPub(e,!1,"remotecontrol")}))}))}),800)}))},_onWebAppMessage:function(e){var t=e.msg,r=m.Utils.getTabId(e.msg);r===this._webAppTabId&&t.webAppReady&&(m.Msg.un("message",this._onWebAppMessage,this),m.Utils.callback(this._webAppCallback,this,[r]))},looksLikeAWebApp:function(e){if(e.url.match(new RegExp(m.Globals.getUrlBase()+"/app")))return!0},isWebAppTab:function(e){return!!this.looksLikeAWebApp(e)}}),m.bg.RemoteControl=new m.bg._RemoteControl,m.crawling._Proxy=m.Class.extend({TLDs:["com","org","edu","gov","uk","net","ca","de","jp","fr","au","us","ru","ch","it","nl","se","no","es","br","info","cn","pl","in","biz","ir","eu","cz","ua","za","ro","gr","mx","tv","dk","at","co","be","tw","ar","me","vn","hu","af","ax","al","dz","as","ad","ao","ai","aq","ag","am","aw","az","bs","bh","bd","bb","by","bz","bj","bm","bt","bo","bq","ba","bw","bv","io","bn","bg","bf","bi","kh","cm","cv","ky","cf","td","cl","cx","cc","km","cg","cd","ck","cr","ci","hr","cu","cw","cy","dj","dm","do","ec","eg","sv","gq","er","ee","et","fk","fo","fj","fi","gf","pf","tf","ga","gm","ge","gh","gi","gl","gd","gp","gu","gt","gg","gn","gw","gy","ht","hm","va","hn","hk","is","id","iq","ie","im","il","jm","je","jo","kz","ke","ki","kw","kg","la","lv","lb","ls","lr","ly","li","lt","lu","mo","mk","mg","mw","my","mv","ml","mt","mh","mq","mr","mu","yt","fm","md","mc","mn","ms","ma","mz","mm","na","nr","np","nc","nz","ni","ne","ng","nu","nf","kp","mp","om","pk","pw","ps","pa","pg","py","pe","ph","pn","pt","pr","qa","re","rw","bl","sh","kn","lc","mf","pm","vc","ws","sm","st","sa","sn","rs","sc","sl","sg","sx","sk","si","sb","so","gs","kr","ss","lk","sd","sr","sj","sz","sy","tj","tz","th","tl","tg","tk","to","tt","tn","tr","tm","tc","ug","ae","gb","uy","uz","vu","ve","vg","vi","wf","eh","ye","zm","zw"],getLoginUrl:function(e,t){return e.replace(/\$@/,t)},getUrlFromLoginUrl:function(e){for(var t,r=e.substring(e.indexOf("?")+1).split("&"),a=0;a<r.length;a++)if(r[a]){var i=r[a].split("=");i.length>=2&&"url"==i.shift()&&(t=decodeURIComponent(i.join("=")))}return t},isLoginUrl:function(e){var t=!1;if(!this._loginUrlRegExp){var r=["(ezp|ezproxy|libproxy|proxy)\\d*\\.[a-z\\.\\-]+\\/login(\\.html?)?\\?url=","(ezp|ezproxy|libproxy|proxy)\\d*\\.[a-z\\.\\-]+:\\d+\\/login(\\.html?)?\\?url="],a=new RegExp(r[0],"i"),i=new RegExp(r[1],"i");m.crawling.ProxyList&&m.crawling.ProxyList.getLoginUrls().forEach((function(e){var t=e.replace(/^https?:\/\//,"");t.match(a)||t.match(i)||(t=(t=(t=(t=t.replace(/\//g,"\\/")).replace(/\?/g,"\\?")).replace(/\./g,"\\.")).replace(/\$@.*/,""),r.push(t))})),this._loginUrlRegExp=new RegExp("("+r.join("|")+")","i")}return e&&e.match(this._loginUrlRegExp)&&(t=!0),t},isLoggedOut:function(e){var t=!1;if(this.isLoginUrl(e))t=!0;else{if(!this._loggedOutUrlRegExp){var r=[],a="(authentication|authenticate|adfs|sso|websso|logon|idpv|shibboleth|authentification|sso|cas|ezproxy-auth|ezproxyauth|ezproxy-prd|ezproxy-[a-z\\d]|login|ezproxy|libproxy|proxy|library|libraries|ezlib|ezp|idp|ezplib|libaccess|libresources|www.lib|ezpauth|proxylogin|ezproxylogin|oclc|libraryssl|weblogon|webaccess|webauth|idcheck)\\d*.",i=".(edu|ac.[a-z][a-z]|edu.[a-z][a-z]|uni-.*.de|fh-.*.de)",n="(wrlc.org|nipissingu.ca|.uni[a-z]+.it|journals.labiomed.org|ensam.eu|catalyst.net.nz|wur.nl|viu.ca|surgeons.org|hku.hk|bnl.lu|nelliportaali.fi|univ-lille2.fr|nipissingu.ca|unam.mx|hro.nl|statsbiblioteket.dk|gu.se|nuigalway.ie|exlibrisgroup.com|cnrs.fr|nrc-cnrc.gc.ca|obspm.fr|nist.gov|worldcat.org|mcgill.ca|uam.mx)",o="(Shibboleth.sso/SAML2|cgi-bin/allinonelogin.pl|saml2/sso|idp/SSO.saml2|idp/profile/SAML2|idp/profile/cas/login|idp/Authn|ezproxy.*.cgi?url|ezproxy_auth.php?url|Z-WEB/Aladin?|rpas/ezproxy.cgi|ezpauth.cgi?url|ezp-sso.pl?url|ezproxy.php?url|auth/ulib.pl?url|auth.cgi?url|nidp/idff/sso?|auth/index.php?action=login|loginuserpass.php?AuthState=|libaccess/login.php?url|ezproxy/Authentication/Authentication_Interface.php|/EZProxy?qurl=|libproxy/index.cfm?url=|cosign-scripts.libraries|libproxy1/public/login.asp?|authn/splash?url=|ezpmysqlssl.cgi?url=|go_log.pl?url=|connect?session=.*url=|ezproxylogin?url=|Authn/UserPassword|SAML2/Redirect/SSO?|profile/SAML2/POST/SSO|ezproxy/patsearch.php|ezproxylogin_louis_uno.x?url=|loginuserpass.php?AuthState=|discoveryLoginPage.html?.*shibboleth|auth/?url=&source=ez|goproxyurl?url=|PatronCheckCAC.php?url=|ezpAuthen.cgi?url=|SAMLRequest=|ezpws.exe?url=|uwalogin.fcc?TYPE=|signon/SAMSDefault/|login/?action=login|libauth/servlet/authMain|func=load-login&.*calling_system=|ezproxy-login?url=|login/?cosign-http-library|Shibboleth.sso/DS|ezproxy?url=|adfs/ls/|ezpmysqlssl.cgi?url|cgi-bin/index.cgi?url=|module.php/saml/disco.php?entityID=|login/uwe-auth|login/?ReturnUrl=.*url=|bluestem/login.cgi?|spep/sso?redirectURL=|DS/?shire=.*shibboleth|auth/?url=ezp|ldapauth&cosign-Resources|account/login/?cb=|index.cfm?PID=.*targeturl=|acces-a-distance-ez-proxy|les-ressources-en-ligne|uhtbin/ezproxylogin_|signin.asp?redirect=|oauth2callback/ezproxyjs.php|useraction/login?acsURL|account/login.aspx?url=|ezproxy/login.auth|login/index.php?login_groups=|oxauth/login?|EZproxy/auth-bigip/|oala/login/|ezproxy/login.auth|auth/index.php?q*url=|login?auth=|cas/login|webauth/login?|entityID=.*shibboleth|auth/authenticate.html?|auth/ezproxyauth.php|CasProd&SAMLRequest=|samlpost/oclc|ATS_Shibboleth_IdP_Idm|umbcLogin|idcheck$|bin/cosign.cgi|bin/ezpmysqlssl.cgi|ezticket/login|loginuserpass.php|cgi.proxy1.php?qurl|Login?goto=|web@login\\d?|authentification.html|pages/login.jsp|commonauth|authenticationendpoint|passivests|oaam_server|SSOService|/auth/|login/login.htm|/oala/auth|login/oalogin.aspx|/login.aspx?ReturnUrl|openid-connect/auth|signon/SAMS001_CDC.aspx|Koha/Plugin/OAKoha/OAKoha.pl|weblogin/web/openath|oala/auth)";r.push("(login.microsoftonline.com|accounts.google.com|login.openathens.net|engine.surfconext.nl|onelogin.com|quicklaunch.io|okta.com|gss.ebscohost.com|ebsco-gss.net|populiweb.com)"),r.push(a+".+/(signin|login|login.jsp)/*$"),r.push(a+".+/login?q*url="),r.push(a+".+/login?service="),r.push(a+".+/.*"+o),r.push(a+".+/my.policy$"),r.push(i+"(:\\d+)*/(signin|login|login.jsp)/*$"),r.push(i+"(:\\d+)*/login?q*url="),r.push(i+"(:\\d+)*/login?service="),r.push(i+"(:\\d+)*/menue$"),r.push(i+"(:\\d+)*/menu$"),r.push(i+"(:\\d+)*/(sessions/new|my.policy)$"),r.push(i+"(:\\d+)*/.*"+o),r.push(n+"(:\\d+)*/.*"+o),r.push(n+"(:\\d+)*/login$"),r.push(n+"(:\\d+)*/login?q*url="),r.push(n+"(:\\d+)*/?q*url="),r.push("://[^/]+/.*/*(cas/login?.*service=|casfirst/login?.*service=|auth/login?.*service=|webauth/login?.*service=|authentication/idp/single-sign-on?SAMLRequest=|oam/server/obrareq.cgi?|v1/login?.*service=)"),r.push("://[^/]+/login?service="),r.push("://[^/]+/?(cosign-www.lib|entityID=.*shibboleth)"),r.push("weblogin.stanford.edu/login.*?RT="),r.push("kb/login.php?AuthState");for(var s=0;s<r.length;s++){r[s]=r[s].replace(/\//g,"\\/"),r[s]=r[s].replace(/\?/g,"\\?");for(var l=r[s].split(""),c=0;c<l.length;c++)"."==l[c]&&c+1<l.length&&(l[c+1].match(/[\+\*]/)||(l[c]="\\"+l[c]));r[s]=l.join("")}this._loggedOutUrlRegExp=new RegExp("("+r.join("|")+")","i")}e.match(this._loggedOutUrlRegExp)&&(t=!0),t&&this.isProxied(e)&&(t=!1)}return t},isUnsupportedUrl:function(e,t,r){e||(e="");var a={type:"event",subtype:"Proxy logout",msg:"Text rep of the proxy log in page",data:e=(e=e.replace(/\n/g," ")).replace(/\s+/g," "),proxyurl:t};r&&(a.redirectUrl=r),c()&&m.log(a);var i=!1;return e.match(/Currently\s+this\s+URL\s+is\s+not\s+managed\s+via\s+authentication\s+service/i)&&(i=!0),e.match(/attempted\sto\sview\sa\spage\sthat\shas\snot\sbeen\sconfigured\sfor\saccess/i)&&(i=!0),e.match(/your\sEZproxy\sadministrator\smust\sfirst\sauthorize\sthe\shostname\sof\sthis\sURL/i)&&(i=!0),e.match(/presentato\sil\sseguente\serrore:\sAccesso\snegato/i)&&(i=!0),i},isProxied:function(e){var t=!1,r=this.deproxify(e);return r&&"proxy"in r&&r.proxy&&r.proxy.length>3&&(t=!0),t},proxifyIfNeeded:function(e,t){if(this.isProxied(e)&&!this.isProxied(t)){var r=this.deproxify(e),a=this.getDomain(r.cleanUrl),i=this.getDomain(t);""!==a.domain&&a.domain==i.domain&&(e.match(/^https/)&&!t.match(/^https/)&&(t=t.replace(/^http/,"https")),r.proxy&&(t=this.proxify(t,r.proxy,r.dash)))}return t},getDomain:function(e,t){var r={domain:"",port:""};if(e){r.domain=e.replace(/^(https?|ftp):\/\//,""),r.domain.match(/\//)&&(r.domain=r.domain.replace(/([^\/]+)(\/.*)/,"$1")),r.domain.match(/\./)||(r.domain="");var a,i=(a=r.domain.split(".")).length;i>2&&!t&&(a[i-2].length>2?r.domain=a[i-2]+"."+a[i-1]:r.domain=a[i-3]+"."+a[i-2]+"."+a[i-1]),2==(a=r.domain.split(/:/)).length&&(r.domain=a[0],r.port=a[1])}return r},getTldMatchBoundaries:function(){if(this.tldMatchBoundaries)return this.tldMatchBoundaries;var e="("+this.TLDs.join("|")+")",t=new RegExp("^"+e+"$","i");return this.tldMatchBoundaries=t,t},inferLoginUrl:function(e){var t=null;if(this.isProxied(e)){var r=this.deproxify(e),a=[];m.crawling.ProxyList&&m.crawling.ProxyList.getLoginUrls().forEach((function(e){e.indexOf(r.proxy+"/")>-1&&a.push(e)})),t=a.length>0?a[0]:"http://"+r.proxy+"/login?url=$@"}return t},deproxify:function(e){var t,r,a,i=e,n={fullUrl:i,cleanUrl:i,proxy:"",dash:!1},o="",s=e.match(/^(https?:\/\/)/);s&&s.length&&(o=s[1],e=e.replace(/^https?:\/\//,""));var l=e.split("/"),c=l[0],u=l.slice(1).join("/"),d="";(s=c.match(/(:\d{4})$/))&&s.length&&(d=s[1],c=c.replace(/:\d{4}$/,""));var p=this.getTldMatchBoundaries(),h=c.split(/\./g),g=[],f=!1;if(h[0].match(/-/)&&(g=h[0].split(/-/))[g.length-1].match(p)&&(f=!0),f){["spandidos-publications"].forEach((function(e){var t=e.replace(/-/g,"|");h[0]=h[0].replace(e,t)})),t=(t=o+(g=h[0].split(/-/)).join(".")+"/"+u).replace(/\|/g,"-"),r=h.slice(1,h.lentgh).join(".")+d,a=!0}else{var b=[];if(h.forEach((function(e){e.match(p)?b.push(1):b.push(0)})),b.length>0&&1==b[0]&&(b[0]=0),b.join("").match(/.?1+0+1+$/)){for(var y=!1,v=-1,_=0;_<b.length;_++){if(1==b[_])y=!0;else if(y){v=_;break}}if(v>-1&&v<=b.length){var w=h.slice(0,v),P=h.slice(v);t=o+w.join(".")+"/"+u,r=P.join(".")+d}}}if(r&&t){var S=!0;m.crawling.ProxyList&&(S=!!r.match(m.crawling.ProxyList.getDomainsOfProxiesRegExp())),S||r.match(/proxy\./i)&&(S=!0);var C=r.split(/\./).length,A=3;r.match(/\.(edu|ac)\.[a-z]+$/i)&&(A=4),C<A&&(S=!1),(C=t.replace(/^(https?:\/\/)/,"").replace(/\/.*/,"").split(/\./).length)<2&&(S=!1);S&&["login\\.simsrad\\.net\\.ocs\\.mq\\.edu\\.au"].forEach((function(e){i.match(new RegExp("^https?:\\/\\/"+e))&&(S=!1)})),S&&(n.proxy=r,n.cleanUrl=t,a&&(n.dash=!0))}return n},proxify:function(e,t,r){if(!t)return e;var a="",i=e.match(/^(https?:\/\/)/);i&&i.length&&(a=i[1],e=e.replace(/^https?:\/\//,""));var n=e.split("/"),o=n[0];return r&&(o=o.replace(/\./g,"-")),a+o+"."+t+"/"+n.slice(1).join("/")}}),g(m.crawling,"_Proxy","Proxy"),m.crawling._ProxyList=m.Class.extend({domainsOfProxiesRegExp:null,proxies:[{url:"http://p.atsu.edu/login?url=$@",name:"A.T. Still University of Health Sciences",alt:"ATSU"},{url:"http://zorac.aub.aau.dk/login?qurl=$@",name:"Aalborg Universitet",alt:"AAU"},{url:"http://libproxy.aalto.fi/login?url=$@",name:"Aalto University",alt:"Aalto-universitetet"},{url:"http://ez.statsbiblioteket.dk:2048/login?url=$@",name:"Aarhus Universitet",alt:"Aarhus University"},{url:"http://libproxy.abertay.ac.uk/login?url=$@",name:"Abertay University"},{url:"http://ezproxy.acadiau.ca:2048/login?url=$@",name:"Acadia University (Vaughan Memorial Library)"},{url:"http://adams.idm.oclc.org/login?url=$@",name:"Adams State University"},{url:"http://libproxy.adelphi.edu:2048/login?url=$@",name:"Adelphi University"},{url:"http://ezproxy.adler.edu/login?url=$@",name:"Adler University"},{url:"http://ejproxy.a-star.edu.sg/login?url=$@",name:"Agency for Science, Technology and Research",alt:"A*STAR"},{url:"https://ezproxy.lib.cas.cz/login?url=$@",name:"Akademie v\u011bd \u010cesk\xe9 republiky",alt:"Academy of Sciences of the Czech Republic"},{url:"http://elibrary.amc.edu/login?url=$@",name:"Albany Medical College"},{url:"https://felix.albright.edu/login?url=$@",name:"Albright College"},{url:"http://ezproxy1.allegheny.edu:2048/login?url=$@",name:"Allegheny College"},{url:"http://libraryproxy.amnh.org:9000/login?url=$@",name:"American Museum of Natural History"},{url:"http://ezproxy.apus.edu/login?url=$@",name:"American Public University System",alt:"APUS"},{url:"http://proxyau.wrlc.org/login?url=$@",name:"American University"},{url:"https://ezproxy.aub.edu.lb/login?url=$@",name:"American University of Beirut",alt:"AUB"},{url:"http://proxy.wcl.american.edu/login?url=$@",name:"American University, Washington College of Law"},{url:"https://ezproxy.amherst.edu/login?url=$@",name:"Amherst College"},{url:"https://ezproxy.angelina.edu/login?url=$@",name:"Angelina College"},{url:"https://easydb.angelo.edu/login?url=$@",name:"Angelo State University",alt:"ASU"},{url:"http://aecc.idm.oclc.org/login?url=$@",name:"Anglo-European College of Chiropractic",alt:"AECC"},{url:"https://antioch.idm.oclc.org/login?url=$@",name:"Antioch University"},{url:"http://ezproxy.arcadia.edu:2048/login?url=$@",name:"Arcadia University"},{url:"https://login.libproxy.edmc.edu/login?url=$@",name:"Argosy University"},{url:"http://login.ezproxy1.lib.asu.edu/login?url=$@",name:"Arizona State University"},{url:"https://ezproxy.library.astate.edu/login?url=$@",name:"Arkansas State University (Dean B. Ellis Library)",alt:"ASU"},{url:"https://go.openathens.net/redirector/aub.ac.uk?url=$@",name:"Arts University Bournemouth"},{url:"http://lrc-proxy.abtech.edu:2048/login?url=$@",name:"Asheville-Buncombe Technical Community College",alt:"ABTech"},{url:"http://proxy.ashland.edu:2048/login?url=$@",name:"Ashland University"},{url:"http://spot.lib.auburn.edu/login?url=$@",name:"Auburn University"},{url:"http://ezproxy.aut.ac.nz/login?url=$@",name:"Auckland University of Technology"},{url:"http://ezproxy.augsburg.edu/login?url=$@",name:"Augsburg College"},{url:"http://aurarialibrary.idm.oclc.org/login?url=$@",name:"Auraria Library"},{url:"http://webster.austincollege.edu/login?url=$@",name:"Austin College (Abell Library)"},{url:"http://lsproxy.austincc.edu/login?url=$@",name:"Austin Community College",alt:"ACC"},{url:"http://ezproxy.lib.apsu.edu/login?url=$@",name:"Austin Peay State University"},{url:"http://journals.library.austin.org.au/login?url=$@",name:"Austin University of Technology"},{url:"http://ezproxy.acu.edu.au/login?url=$@",name:"Australian Catholic University"},{url:"http://virtual.anu.edu.au/login?url=$@",name:"Australian National University"},{url:"http://ezproxy.anzca.edu.au/login?url=$@",name:"Australian and New Zealand College of Anaesthetists",alt:"ANZCA"},{url:"http://ezproxy.library.bi.no/login?url=$@",name:"BI Norwegian Business School"},{url:"http://proxy.bsu.edu/login?url=$@",name:"Ball State University",alt:"BSU"},{url:"http://libproxy.bankstreet.edu/login?url=$@",name:"Bank Street College"},{url:"http://ezproxy.bshp.edu:2048/login?url=$@",name:"Baptist School of Health Professions"},{url:"http://proxy1.athensams.net/login?url=$@",name:"Bar-Ilan University (and other OpenAthens/MyAthens users)"},{url:"http://ezprox.bard.edu/login?url=$@",name:"Bard College"},{url:"http://ezproxy.simons-rock.edu/login?url=$@",name:"Bard College at Simon's Rock",alt:"Simon's Rock"},{url:"http://ezproxy.bathspa.ac.uk:2048/login?url=$@",name:"Bath Spa University"},{url:"https://bathspa.idm.oclc.org/login?url=$@",name:"Bath Spa University"},{url:"http://bcd.tamhsc.libguides.com/proxy_login?url=$@",name:"Baylor Health Sciences Library"},{url:"http://ezproxy.baylor.edu/login?url=$@",name:"Baylor University"},{url:"http://login.beaumont.idm.oclc.org/login?url=$@",name:"Beaumont Health System"},{url:"https://liblynxgateway.com/beaumont?url=$@",name:"Beaumont Health System - LibLynx"},{url:"http://ezproxy.bellevue.edu/login?url=$@",name:"Bellevue University"},{url:"https://ezproxy.beloit.edu/login?url=$@",name:"Beloit College"},{url:"https://ezproxy.bgu.ac.il/login?url=$@",name:"Ben Gurion University"},{url:"http://ezproxy.bethel.edu/login?url=$@",name:"Bethel University"},{url:"http://proxy.insermbiblio.inist.fr/login?url=$@",name:"BiblioINSERM",alt:"INSERM"},{url:"http://proxy.bnl.lu/login?url=$@",name:"Biblioth\xe8que nationale de Luxembourg"},{url:"https://login.ezproxy.biola.edu/login?url=$@",name:"Biola University"},{url:"http://ezproxy.lib.bbk.ac.uk/login?url=$@",name:"Birkbeck, University of London"},{url:"http://ezproxy.bcu.ac.uk/login?url=$@",name:"Birmingham City University",alt:"BCU"},{url:"https://ezproxy.bsc.edu/login?url=$@",name:"Birmingham-Southern College",alt:"BSC"},{url:"http://miman.bib.bth.se/login?url=$@",name:"Blekinge Tekniska H\xf6gskola"},{url:"http://proxy-bloomu.klnpa.org/login?url=$@",name:"Bloomsburg University"},{url:"http://ezproxy.bju.net/login?url=$@",name:"Bob Jones University",alt:"BJU"},{url:"https://libproxy.boisestate.edu/login?url=$@",name:"Boise State University"},{url:"https://ezproxy.bond.edu.au/login?qurl=$@",name:"Bond University"},{url:"http://proxy.the-bac.edu/login?url=$@",name:"Boston Architectural College"},{url:"https://login.proxy.bc.edu/login?url=$@",name:"Boston College",alt:"BC"},{url:"http://ezproxy.bpl.org/login?url=$@",name:"Boston Public Library"},{url:"http://ezproxy.bu.edu/login?url=$@",name:"Boston University",alt:"BU"},{url:"http://libezproxy.bournemouth.ac.uk/login?url=$@",name:"Bournemouth University"},{url:"http://ezproxy.bowdoin.edu/login?url=$@",name:"Bowdoin College"},{url:"http://ezproxy.bgsu.edu:8080/login?url=$@",name:"Bowling Green State University",alt:"BGSU"},{url:"http://shibboleth.bradfordcollege.ac.uk:2048/login?url=$@",name:"Bradford College"},{url:"https://login.ezproxy.bradley.edu/login?url=$@",name:"Bradley University"},{url:"https://go.openathens.net/redirector/brandeis.edu?url=$@",name:"Brandeis University"},{url:"http://ezproxy.brenau.edu:2048/login?url=$@",name:"Brenau University (Brenau Trustee Library)"},{url:"https://ezproxy.brescia.edu/login?url=$@",name:"Brescia University"},{url:"https://www.lib.byu.edu/cgi-bin/remoteauth.pl?url=$@",name:"Brigham Young University"},{url:"https://ezproxy.lib.vutbr.cz/login?qurl=$@",name:"Brno University of Technology"},{url:"https://login.proxy.library.brocku.ca/login?qurl=$@",name:"Brock University"},{url:"https://revproxy.brown.edu/login?url=$@",name:"Brown University"},{url:"https://proxy.brynmawr.edu/login?url=$@",name:"Bryn Mawr College"},{url:"https://ezproxy.bucknell.edu/login?url=$@",name:"Bucknell University"},{url:"https://ezproxy.cern.ch/login?url=$@",name:"CERN"},{url:"http://ezproxy.cqu.edu.au/login?url=$@",name:"CQUniversity Australia",alt:"CQU"},{url:"https://login.proxy.library.cpp.edu/login?url=$@",name:"Cal Poly Pomona"},{url:"http://library2.csumb.edu:2048/login?url=$@",name:"Cal State Monterey Bay"},{url:"http://libproxy.calbaptist.edu/login?url=$@",name:"California Baptist University (Annie Gabriel Library)",alt:"CBU"},{url:"http://clsproxy.library.caltech.edu/login?url=$@",name:"California Institute of Technology",alt:"Caltech"},{url:"http://ezproxy.lib.calpoly.edu/login?url=$@",name:"California Polytechnic State University"},{url:"http://mantis.csuchico.edu/login?url=$@",name:"California State University, Chico (Meriam Library)",alt:"CSU"},{url:"http://proxylib.csueastbay.edu/login?url=$@",name:"California State University, East Bay",alt:"CSUEB"},{url:"http://hmlproxy.lib.csufresno.edu/login?url=$@",name:"California State University, Fresno",alt:"CSU Fresno"},{url:"http://lib-proxy.fullerton.edu/login?url=$@",name:"California State University, Fullerton",alt:"CSU Fullerton"},{url:"http://mimas.calstatela.edu/login?url=$@",name:"California State University, Los Angeles",alt:"CSU LA"},{url:"http://libproxy.csun.edu/login?url=$@",name:"California State University, Northridge",alt:"CSUN"},{url:"http://proxy.lib.csus.edu/login?url=$@",name:"California State University, Sacramento",alt:"Sacramento State"},{url:"http://libproxy.lib.csusb.edu/login?url=$@",name:"California State University, San Bernardino",alt:"CSUSB"},{url:"http://proxy-calu.klnpa.org/login?url=$@",name:"California University of Pennsylvania"},{url:"http://ezproxy.ccsj.edu:2048/login?url=$@",name:"Calumet College of St. Joseph (Specker Library)",alt:"CCSJ"},{url:"https://lib-proxy.calvin.edu/login?url=$@",name:"Calvin College"},{url:"http://ezproxy.cameron.edu/login?url=$@",name:"Cameron University"},{url:"http://ezproxy.cmcc.ca/login?url=$@",name:"Canadian Memorial Chiropractic College",alt:"CMCC"},{url:"http://libraryproxy.cancerresearchuk.org/login?url=$@",name:"Cancer Research UK"},{url:"https://ezproxy.canisius.edu/login?url=$@",name:"Canisius College"},{url:"http://ezproxy.library.capella.edu/login?url=$@",name:"Capella University"},{url:"https://ezproxy.capilanou.ca/login?url=$@",name:"Capilano University",alt:"Cap U"},{url:"https://ezproxy.cardiffmet.ac.uk/login?url=$@",name:"Cardiff Metropolitan University"},{url:"http://abc.cardiff.ac.uk/login?url=$@",name:"Cardiff University"},{url:"http://ezproxy.carleton.edu/login?url=$@",name:"Carleton College"},{url:"https://login.proxy.library.carleton.ca/login?url=$@",name:"Carleton University"},{url:"http://carlow.idm.oclc.org/login?url=$@",name:"Carlow University (Grace Library)"},{url:"https://cmu.idm.oclc.org/login?url=$@",name:"Carnegie Mellon University",alt:"CMU"},{url:"http://proxycu.wrlc.org/login?url=$@",name:"Catholic University of America"},{url:"http://ezproxy.cayuga-cc.edu:2048/login?url=$@",name:"Cayuga Community College"},{url:"https://centenary.idm.oclc.org/login?url=$@",name:"Centenary College of Louisiana"},{url:"http://cmich.idm.oclc.org/login?url=$@",name:"Central Michigan University",alt:"CMICH"},{url:"https://login.ezp.lib.cwu.edu/login?url=$@",name:"Central Washington University (Brooks Library)",alt:"CWU"},{url:"http://proxy.lib.chalmers.se/login?url=$@",name:"Chalmers tekniska h\xf6gskola AB",alt:"Chalmers University of Technology"},{url:"http://proxy.lib.cgu.edu.tw:81/login?url=$@",name:"Chang Gung University"},{url:"https://libproxy.chapman.edu/login?qurl=$@",name:"Chapman University"},{url:"http://ezproxy.cdu.edu.au/login?url=$@",name:"Charles Darwin University",alt:"CDU"},{url:"http://ezproxy.csu.edu.au/login?url=$@",name:"Charles Sturt University"},{url:"http://mendel.csuniv.edu/login?url=$@",name:"Charleston Southern University (L. Mendel Rivers Library)"},{url:"http://proxy-cheyney.klnpa.org/login?url=$@",name:"Cheyney University"},{url:"https://cts.idm.oclc.org/login?url=$@",name:"Chicago Theological Seminary",alt:"CTS"},{url:"http://ezproxy1.cincinnatistate.edu:2048/login?url=$@",name:"Cincinnati State Technical and Community College"},{url:"http://ezproxy.ccb.ac.uk:2048/login?url=$@",name:"City College Brighton and Hove"},{url:"https://lbapp01.lib.cityu.edu.hk/ezlogin/index.aspx?url=$@",name:"City University of Hong Kong"},{url:"http://remote.baruch.cuny.edu/login?url=$@",name:"City University of New York, Baruch College",alt:"CUNY"},{url:"https://login.ez-proxy.brooklyn.cuny.edu/login?url=$@",name:"City University of New York, Brooklyn College",alt:"CUNY"},{url:"http://central.ezproxy.cuny.edu:2048/login?url=$@",name:"City University of New York, Central Office",alt:"CUNY"},{url:"http://ccny-proxy1.libr.ccny.cuny.edu/login?url=$@",name:"City University of New York, City College of New York",alt:"CUNY CCNY"},{url:"http://proxy.library.csi.cuny.edu/login?url=$@",name:"City University of New York, College of Staten Island",alt:"CUNY CSI"},{url:"https://ezproxy.gc.cuny.edu/login?url=$@",name:"City University of New York, Graduate Center",alt:"CUNY"},{url:"http://journalism.ezproxy.cuny.edu:2048/login?url=$@",name:"City University of New York, Graduate School of Journalism",alt:"CUNY"},{url:"http://hostos.ezproxy.cuny.edu:2048/login?url=$@",name:"City University of New York, Hostos Community College",alt:"CUNY"},{url:"http://proxy.wexler.hunter.cuny.edu/login?url=$@",name:"City University of New York, Hunter College",alt:"CUNY"},{url:"http://ez.lib.jjay.cuny.edu/login?url=$@",name:"City University of New York, John Jay College of Criminal Justice",alt:"CUNY"},{url:"http://kbcc.ezproxy.cuny.edu:2048/login?url=$@",name:"City University of New York, Kingsborough Community College",alt:"CUNY"},{url:"http://law.ezproxy.cuny.edu:2048/login?url=$@",name:"City University of New York, Law School",alt:"CUNY"},{url:"http://mec.ezproxy.cuny.edu:2048/login?url=$@",name:"City University of New York, Medgar Evers College",alt:"CUNY"},{url:"http://citytech.ezproxy.cuny.edu:2048/login?url=$@",name:"City University of New York, New York City College of Technology",alt:"CUNY"},{url:"http://queens.ezproxy.cuny.edu:2048/login?url=$@",name:"City University of New York, Queens College",alt:"CUNY"},{url:"http://qbcc.ezproxy.cuny.edu:2048/login?url=$@",name:"City University of New York, Queensborough Community College",alt:"CUNY"},{url:"http://york.ezproxy.cuny.edu:2048/login?url=$@",name:"City University of New York, York College",alt:"CUNY"},{url:"https://proxy.cityu.edu/login?url=$@",name:"City University of Seattle",alt:"CU"},{url:"https://login.ccl.idm.oclc.org/login?qurl=$@",name:"Claremont Colleges"},{url:"http://proxy-clarion.klnpa.org/login?url=$@",name:"Clarion University"},{url:"http://ezproxy.clarkson.edu/login?url=$@",name:"Clarkson University"},{url:"http://proxy.lib.clemson.edu/login?url=$@",name:"Clemson University"},{url:"http://sicd.clermont-universite.fr/login?url=$@",name:"Clermont Universit\xe9"},{url:"http://login.library.coastal.edu:2048/login?url=$@",name:"Coastal Carolina University (Kimbel Library)"},{url:"https://colby.idm.oclc.org/login?url=$@",name:"Colby College"},{url:"http://journals.cshl.edu:2048/login?url=$@",name:"Cold Spring Harbor Laboratory",alt:"CSHL"},{url:"http://nuncio.cofc.edu/login?url=$@",name:"College of Charleston"},{url:"https://cod.idm.oclc.org/login?url=$@",name:"College of DuPage",alt:"COD"},{url:"http://ezproxy.library.csn.edu/login?url=$@",name:"College of Southern Nevada"},{url:"https://ezproxy.com.edu/login?url=$@",name:"College of the Mainland"},{url:"http://cos.idm.oclc.org/login?url=$@",name:"College of the Sequoias",alt:"COS"},{url:"https://ezproxy2.library.colostate.edu/login?url=$@",name:"Colorado State University",alt:"CSU"},{url:"https://csuglobal.idm.oclc.org/login?url=$@",name:"Colorado State University-Global Campus",alt:"CSU Global"},{url:"https://login.ctu.idm.oclc.org/login?qurl=$@",name:"Colorado Technical University"},{url:"http://libdbcc.yosemite.edu/login?url=$@",name:"Columbia College, Sonora"},{url:"http://ezproxy.columbiacollege.bc.ca/login?url=$@",name:"Columbia College, Vancouver"},{url:"http://cgcc-access.sage.eou.edu/login?url=$@",name:"Columbia Gorge Community College"},{url:"http://ezproxy.cul.columbia.edu/login?url=$@",name:"Columbia University",alt:"City of New York"},{url:"https://lib-ezproxy.concordia.ca/login?url=$@",name:"Concordia University (Montreal, Canada)"},{url:"https://cupdx.idm.oclc.org/login?url=$@",name:"Concordia University Portland"},{url:"https://ezproxy.csp.edu/login?url=$@",name:"Concordia University St. Paul",alt:"CSP"},{url:"http://esc-web.lib.cbs.dk/login?url=$@",name:"Copenhagen Business School",alt:"CBS"},{url:"http://ezproxy.corban.edu/login?url=$@",name:"Corban University"},{url:"https://proxy.library.cornell.edu/login?url=$@",name:"Cornell University"},{url:"http://ezproxy.corning-cc.edu:2048/login?url=$@",name:"Corning Community College"},{url:"https://search.covenantseminary.edu/login?url=$@",name:"Covenant Theological Seminary"},{url:"https://login.cuhsl.creighton.edu/login?url=$@",name:"Creighton University"},{url:"http://odin.curry.edu/login?url=$@",name:"Curry College (Levin Library)"},{url:"http://dbgw.lis.curtin.edu.au/login?url=$@",name:"Curtin University"},{url:"https://dyc.idm.oclc.org/login?url=$@",name:"D'Youville College (Montante Family Library)",alt:"DYC"},{url:"https://login.ezproxy.library.dal.ca/login?url=$@",name:"Dalhousie University"},{url:"http://library.dbu.edu:2048/login?url=$@",name:"Dallas Baptist University"},{url:"https://login.dsc.idm.oclc.org/login?qurl=$@",name:"Dalton State College",alt:"DSC"},{url:"https://proxy.findit.cvt.dk/login?url=$@",name:"Danmarks Tekniske Universitet",alt:"DTU"},{url:"http://dartmouth.idm.oclc.org/login?url=$@",name:"Dartmouth College"},{url:"https://ezproxy.lib.davidson.edu/login?qurl=$@",name:"Davidson College"},{url:"http://ezproxy.hhs.nl:2048/login?url=$@",name:"De Haagse Hogeschool",alt:"Hague University"},{url:"http://proxy.devry.edu/login?url=$@",name:"DeVry University"},{url:"http://ezproxy.deakin.edu.au/login?url=$@",name:"Deakin University"},{url:"http://ezproxy.delta.edu:2048/login?url=$@",name:"Delta College"},{url:"http://proxy-dixon.klnpa.org/login?url=$@",name:"Dixon Center"},{url:"https://login.cowles-proxy.drake.edu/login?qurl=$@",name:"Drake University"},{url:"http://ezproxy.drew.edu/login?url=$@",name:"Drew University"},{url:"http://ezproxy2.library.drexel.edu/login?url=$@",name:"Drexel University"},{url:"https://dcu.idm.oclc.org/login?url=$@",name:"Dublin City University",alt:"DCU"},{url:"http://proxy.lib.duke.edu/login?url=$@",name:"Duke University"},{url:"https://authenticate.library.duq.edu/login?url=$@",name:"Duquesne University"},{url:"http://dutlib.dut.ac.za:2048/login?url=$@",name:"Durban University of Technology",alt:"DUT"},{url:"http://ezphost.dur.ac.uk/login?url=$@",name:"Durham University"},{url:"http://ezproxy.dscc.edu:2048/login?url=$@",name:"Dyersburg State Community College",alt:"DSCC"},{url:"https://login.ezp.essec.fr/login?url=$@",name:"ESSEC Business School"},{url:"https://proxy.ethz.ch/cgi-bin/login.pl?url=$@",name:"ETH Z\xfcrich",alt:"ETH Zurich"},{url:"http://jproxy.lib.ecu.edu/login?url=$@",name:"East Carolina University"},{url:"http://navigator-esu.passhe.edu/login?url=$@",name:"East Stroudsburg University"},{url:"http://proxy.library.eiu.edu:2048/login?url=$@",name:"Eastern Illinois University",alt:"EIU"},{url:"http://libproxy.eku.edu/login?url=$@",name:"Eastern Kentucky University",alt:"EKU"},{url:"http://ezproxy.emich.edu/login?url=$@",name:"Eastern Michigan University",alt:"EMU"},{url:"http://ezproxy.library.enc.edu:2048/login?url=$@",name:"Eastern Nazarene College (Nease Library)",alt:"ENC"},{url:"http://access.library.eou.edu/login?url=$@",name:"Eastern Oregon University (Pierce Library)",alt:"EOU"},{url:"https://evms.idm.oclc.org/login?url=$@",name:"Eastern Virginia Medical School",alt:"EVMS"},{url:"http://ezproxy.library.ewu.edu:2048/login?url=$@",name:"Eastern Washington University",alt:"EWU"},{url:"http://proxy.eckerd.edu:5000/login?url=$@",name:"Eckerd College"},{url:"http://rp1.ensam.eu/login?url=$@",name:"Ecole Nationale Sup\xe9rieure d'Arts et M\xe9tiers",alt:"ENSAM ParisTech"},{url:"https://edgehill.idm.oclc.org/login?url=$@",name:"Edge Hill University"},{url:"http://proxy-edinboro.klnpa.org/login?url=$@",name:"Edinboro University"},{url:"http://ezproxy.napier.ac.uk/login?url=$@",name:"Edinburgh Napier University"},{url:"https://ezproxy.ecu.edu.au/login?url=$@",name:"Edith Cowan University",alt:"ECU"},{url:"http://ezproxy.elmira.edu:2048/login?url=$@",name:"Elmira College (Gannett-Tripp Library)"},{url:"http://elms.idm.oclc.org/login?url=$@",name:"Elms College"},{url:"http://ezproxy.libproxy.db.erau.edu/login?url=$@",name:"Embry-Riddle Aeronautical University"},{url:"http://proxy.emerson.edu/login?url=$@",name:"Emerson College"},{url:"http://ezproxy.eciad.ca:2048/login?url=$@",name:"Emily Carr University"},{url:"http://library.emmanuel.edu:2048/login?url=$@",name:"Emmanuel College"},{url:"https://proxy.library.emory.edu/login?url=$@",name:"Emory University"},{url:"https://eur.idm.oclc.org/login?url=$@",name:"Erasmus Universiteit Rotterdam",alt:"Erasmus University Rotterdam"},{url:"https://ezproxy.ecc.edu:2443/login?url=$@",name:"Erie Community College",alt:"ECC"},{url:"http://ezproxy.eui.eu/login?url=$@",name:"European University Institute",alt:"EUI"},{url:"http://ezproxy.everettcc.edu/login?url=$@",name:"Everett Community College"},{url:"http://ezproxy.fh-salzburg.ac.at/login?url=$@",name:"Fachhochschule Salzburg",alt:"FH Salzburg"},{url:"http://libdb.fairfield.edu/login?url=$@",name:"Fairfield University"},{url:"https://libproxy.fitsuny.edu/login?url=$@",name:"Fashion Institute of Technology",alt:"FIT"},{url:"https://fgul.idm.oclc.org/login?url=$@",name:"Fielding Graduate University"},{url:"https://ezproxy.flcc.edu/login?url=$@",name:"Finger Lakes Community College (Charles J. Meder Library)",alt:"FLCC"},{url:"http://20p4y.finlandia.edu:2048/login?url=$@",name:"Finlandia University"},{url:"https://login.ezproxy.fau.edu/login?qurl=$@",name:"Florida Atlantic University"},{url:"http://ezproxy.fgcu.edu/login?url=$@",name:"Florida Gulf Coast University",alt:"FGCU"},{url:"http://ezproxy.fiu.edu/login?url=$@",name:"Florida International University"},{url:"https://login.proxy.lib.fsu.edu/login?url=$@",name:"Florida State"},{url:"http://ezproxy.fhsu.edu:2048/login?url=$@",name:"Fort Hays State University",alt:"FHSU"},{url:"https://fortlewis.idm.oclc.org/login?url=$@",name:"Fort Lewis College"},{url:"http://fmarion.idm.oclc.org/login?url=$@",name:"Francis Marion University (Rogers Library)",alt:"FMU"},{url:"https://ezproxy.franklincollege.edu/login?url=$@",name:"Franklin College"},{url:"https://login.fhcrc.idm.oclc.org/login?url=$@",name:"Fred Hutchinson Cancer Research Center"},{url:"https://login.libproxy.furman.edu/login?url=$@",name:"Furman University (James B. Duke Library)"},{url:"http://ezproxy.gavilan.edu/login?url=$@",name:"Gavilan College"},{url:"http://proxy-geneva.klnpa.org/login?url=$@",name:"Geneva University"},{url:"https://georgefox.idm.oclc.org/login?url=$@",name:"George Fox University",alt:"GFU"},{url:"http://mutex.gmu.edu/login?url=$@",name:"George Mason University"},{url:"http://proxygw.wrlc.org/login?url=$@",name:"George Washington University",alt:"GWU"},{url:"https://gwlaw.idm.oclc.org/login?url=$@",name:"George Washington University Law School"},{url:"http://proxy.library.georgetown.edu/login?url=$@",name:"Georgetown University"},{url:"http://prx.library.gatech.edu/login?url=$@",name:"Georgia Institute of Technology",alt:"Georgia Tech"},{url:"http://libez.lib.georgiasouthern.edu:2048/login?url=$@",name:"Georgia Southern University"},{url:"https://ezproxy.gsu.edu/login?url=$@",name:"Georgia State University"},{url:"https://gcu.idm.oclc.org/login?url=$@",name:"Glasgow Caledonian University",alt:"GCU"},{url:"http://libproxy.gc.maricopa.edu/login?url=$@",name:"Glendale Community College",alt:"GCC"},{url:"http://proxy.ub.uni-frankfurt.de/login?url=$@",name:"Goethe-Universit\xe4t Frankfurt am Main",alt:"Goethe University Frankfurt"},{url:"http://proxy.gordonconwell.edu/login?url=$@",name:"Gordon-Conwell Theological Seminary",alt:"GCTS"},{url:"https://ezproxy.goshen.edu/login?url=$@",name:"Goshen College"},{url:"https://lopes.idm.oclc.org/login?url=$@",name:"Grand Canyon University",alt:"GCU"},{url:"http://ezproxy.gvsu.edu/login?url=$@",name:"Grand Valley State University"},{url:"http://ezproxy.gcd.ie:2048/login?url=$@",name:"Griffith College",alt:"GCD"},{url:"http://libraryproxy.griffith.edu.au/login?url=$@",name:"Griffith University"},{url:"https://grinnell.idm.oclc.org/login?url=$@",name:"Grinnell College"},{url:"http://ezproxy.ub.gu.se/login?url=$@",name:"G\xf6teborgs universitet",alt:"University of Gothenburg"},{url:"https://ezproxy.hec.fr/login?url=$@",name:"HEC Paris"},{url:"https://ezproxy.bib.hh.se/login?url=$@",name:"Halmstad University"},{url:"http://ezproxy.hamline.edu:2048/login?url=$@",name:"Hamline University"},{url:"http://hsuezproxy.alc.org:2048/login?url=$@",name:"Hardin-Simmons University"},{url:"http://ezproxy.hsutx.edu:2048/login?url=$@",name:"Hardin-Simmons University (Richardson Library)",alt:"HSU"},{url:"http://proxy-harrisburg.klnpa.org/login?url=$@",name:"Harrisburg University"},{url:"http://ezp-prod1.hul.harvard.edu/login?url=$@",name:"Harvard University"},{url:"https://ezproxy.haverford.edu/login?url=$@",name:"Haverford College"},{url:"http://libproxy.helsinki.fi/login?url=$@",name:"Helsingin yliopisto",alt:"University of Helsinki"},{url:"http://ezproxy1.hw.ac.uk:2048/login?url=$@",name:"Heriot-Watt University Edinburgh"},{url:"https://ezproxy.hofstra.edu/login?url=$@",name:"Hofstra University"},{url:"http://ezproxy.hro.nl/login?url=$@",name:"Hogeschool Rotterdam",alt:"Rotterdam University"},{url:"https://login.ezoris.lib.hokudai.ac.jp/login?url=$@",name:"Hokkaido University"},{url:"http://holyfamily.idm.oclc.org/login?url=$@",name:"Holy Family University"},{url:"https://lib-ezproxy.hkbu.edu.hk/login?url=$@",name:"Hong Kong Baptist University"},{url:"http://ezproxy.lb.polyu.edu.hk/login?url=$@",name:"Hong Kong Polytechnic University"},{url:"https://ezproxy.hkpl.gov.hk/login?url=$@",name:"Hong Kong Public Libraries"},{url:"https://login.lib.ezproxy.ust.hk/login?url=$@",name:"Hong Kong University of Science and Technology",alt:"HKUST"},{url:"https://login.ezproxy.hope.edu/login?url=$@",name:"Hope College"},{url:"http://librouter.hud.ac.uk/login?url=$@",name:"Huddersfield University"},{url:"http://proxy.hvcc.edu:2048/login?url=$@",name:"Hudson Valley Community College",alt:"HVCC"},{url:"http://ezproxy.humboldt.edu/login?url=$@",name:"Humboldt State University"},{url:"http://ezproxy.inn.no/login?url=$@",name:"H\xf8gskolen i Innlandet"},{url:"https://login.ezproxy.hioa.no/login?url=$@",name:"H\xf8gskolen i Oslo og Akershus",alt:"Oslo and Akershus University College"},{url:"https://login.galanga.hvl.no/login?url=$@",name:"H\xf8gskulen p\xe5 Vestlandet"},{url:"http://libproxy.kentlaw.edu/login?url=$@",name:"IIT Chicago-Kent College of Law"},{url:"http://rproxy.insa-rennes.fr/login?url=$@",name:"INSA Rennes"},{url:"https://login.sanraffaele.idm.oclc.org/login?qurl=$@",name:"IRCCS Ospedale San Raffaele"},{url:"http://libpublic3.library.isu.edu/login?url=$@",name:"Idaho State University"},{url:"https://uidaho.idm.oclc.org/login?url=$@",name:"University of Idaho"},{url:"https://ezproxy.gl.iit.edu/login?url=$@",name:"Illinois Institute of Technology"},{url:"https://iclibezp1.cc.ic.ac.uk/login?qurl=$@",name:"Imperial College London"},{url:"http://ezproxy.indstate.edu:2048/login?url=$@",name:"Indiana State University"},{url:"http://proxyiub.uits.iu.edu/login?url=$@",name:"Indiana University"},{url:"http://ezproxy.lib.indiana.edu/login?url=$@",name:"Indiana University Bloomington"},{url:"http://proxy-iup.klnpa.org/login?url=$@",name:"Indiana University of Pennsylvania",alt:"IUP"},{url:"http://proxy.ulib.iupui.edu/login?url=$@",name:"Indiana University, Purdue University Indianapolis"},{url:"http://erable.inrs.ca:2048/login?url=$@",name:"Institut national de la recherche scientifique",alt:"INRS"},{url:"https://ezproxy.icr.ac.uk/login?url=$@",name:"Institute of Cancer Research",alt:"ICR"},{url:"http://ezproxy.library.itsligo.ie:2048/login?url=$@",name:"Institute of Technology Sligo",alt:"IT Sligo"},{url:"http://ezp.imu.edu.my/login?url=$@",name:"International Medical University",alt:"IMU"},{url:"https://go.openathens.net/redirector/iastate.edu?url=$@",name:"Iowa State University"},{url:"http://ezlibrary.technion.ac.il/login?qurl=$@",name:"Israel Institute of Technology",alt:"Technion"},{url:"https://login.ezproxy.ithaca.edu/login?qurl=$@",name:"Ithaca College"},{url:"http://ezproxy.uef.fi:2048/login?url=$@",name:"It\xe4-Suomen yliopisto",alt:"University of Eastern Finland"},{url:"http://allstate.libproxy.ivytech.edu/login?url=$@",name:"Ivy Tech Community College"},{url:"http://ezproxy.jax.org/login?url=$@",name:"Jackson Laboratory"},{url:"http://ezproxy.jscc.edu/login?url=$@",name:"Jackson State Community College"},{url:"http://elibrary.jcu.edu.au/login?url=$@",name:"James Cook University",alt:"JCU"},{url:"http://lib-proxy.jeffco.edu:2048/login?url=$@",name:"Jefferson College",alt:"JC"},{url:"http://proxy.library.jhu.edu/login?url=$@",name:"Johns Hopkins University"},{url:"https://ezp.welch.jhmi.edu/login?url=$@",name:"Johns Hopkins University School of Medicine"},{url:"http://ezproxy.bibliothek.uni-wuerzburg.de/login?url=$@",name:"Julius-Maximilians-Universit\xe4t W\xfcrzburg"},{url:"http://ezproxy.uni-giessen.de/login?url=$@",name:"Justus-Liebig-Universit\xe4t Gie\xdfen",alt:"JLU Gie\xdfen"},{url:"http://ezproxy.jyu.fi/login?url=$@",name:"Jyv\xe4skyl\xe4n yliopisto",alt:"University of Jyv\xe4skyl\xe4"},{url:"https://login.bibl.proxy.hj.se/login?url=$@",name:"J\xf6nk\xf6ping University"},{url:"https://kuleuven.e-bronnen.be/login?url=$@",name:"KU Leuven"},{url:"http://proxy.kcumb.edu/login?url=$@",name:"Kansas City University of Medicine and Biosciences"},{url:"http://er.lib.k-state.edu/login?url=$@",name:"Kansas State University"},{url:"http://proxy.kib.ki.se/login?url=$@",name:"Karolinska Institutet",alt:"KI"},{url:"http://ezp.kendall.edu/login?url=$@",name:"Kendall College"},{url:"http://proxy.kennesaw.edu/login?url=$@",name:"Kennesaw State University"},{url:"https://proxy.library.kent.edu/login?url=$@",name:"Kent State University"},{url:"https://proxy.kc.edu/login?url=$@",name:"Kettering College"},{url:"http://extoljp.kfupm.edu.sa/login?url=$@",name:"King Fahd University of Petroleum & Minerals (KFUPM)"},{url:"http://libproxy.kcl.ac.uk/login?url=$@",name:"King's College London"},{url:"http://ezproxy.aekc.talonline.ca/login?url=$@",name:"King's University College"},{url:"https://knowledge.idm.oclc.org/login?url=$@",name:"Knowledge Network (NHS Education for Scotland)"},{url:"http://library.korea.ac.kr/login?url=$@",name:"Korea University"},{url:"http://focus.lib.kth.se/login?url=$@",name:"Kungliga Tekniska H\xf6gskolan",alt:"KTH Royal Institute of Technology"},{url:"http://proxy-kutztown.klnpa.org/login?url=$@",name:"Kutztown University"},{url:"https://ezproxy.kyorin-u.ac.jp/login?url=$@",name:"Kyorin University"},{url:"http://ep.fjernadgang.kb.dk/login?url=$@",name:"K\xf8benhavns Universitet (The Royal Library)",alt:"University of Copenhagen"},{url:"http://ez.library.latrobe.edu.au/login?url=$@",name:"La Trobe University"},{url:"https://rpa.laguardia.edu/login?url=$@",name:"Laguardia Community College"},{url:"http://ezproxy.lakeheadu.ca/login?url=$@",name:"Lakehead University"},{url:"http://ezproxy.lakeviewcol.edu:2048/login?url=$@",name:"Lakeview College of Nursing"},{url:"http://ezproxy.lsco.edu:2048/login?url=$@",name:"Lamar State College at Orange (Ron E. Lewis Library)",alt:"LSCO"},{url:"https://libproxy.lamar.edu/login?url=$@",name:"Lamar University"},{url:"http://ezproxy.lancs.ac.uk/login?url=$@",name:"Lancaster University"},{url:"http://lanecc.idm.oclc.org/login?url=$@",name:"Lane Community College"},{url:"https://lcc.idm.oclc.org/login?url=$@",name:"Lansing Community College",alt:"LCC"},{url:"http://librweb.laurentian.ca/login?url=$@",name:"Laurentian University"},{url:"http://proxy.lawrence.edu:2048/login?url=$@",name:"Lawrence University"},{url:"http://research-db.letu.edu/login?url=$@",name:"LeTourneau University"},{url:"http://ezproxy.lvc.edu:2048/login?url=$@",name:"Lebanon Valley College",alt:"LVC"},{url:"http://leonardo.lee.edu/login?url=$@",name:"Lee College"},{url:"http://ezproxy.leedsbeckett.ac.uk/login?url=$@",name:"Leeds Beckett University"},{url:"https://lhs.idm.oclc.org/login?url=$@",name:"Legacy Health"},{url:"https://ezproxy.lib.lehigh.edu/login?url=$@",name:"Lehigh University"},{url:"http://watzekpx.lclark.edu/login?url=$@",name:"Lewis &amp; Clark College (Watzek Library)"},{url:"http://ezproxy.liberty.edu:2048/login?url=$@",name:"Liberty University"},{url:"http://ezproxy.dbazes.lsmuni.lt:2048/login?url=$@",name:"Lietuvos sveikatos moksl\u0173 universitetas"},{url:"http://proxy-lincoln.klnpa.org/login?url=$@",name:"Lincoln University"},{url:"https://ezproxy.linfield.edu/login?url=$@",name:"Linfield College"},{url:"https://login.e.bibl.liu.se/login?url=$@",name:"Link\xf6pings Universitet",alt:"Link\xf6ping University"},{url:"http://ezproxy.libweb.linnbenton.edu:2048/login?url=$@",name:"Linn-Benton Community College",alt:"LBCC"},{url:"http://proxy.lnu.se/login?url=$@",name:"Linnaeus University"},{url:"http://proxy-lhup.klnpa.org/login?url=$@",name:"Lock Haven University"},{url:"https://gate2.library.lse.ac.uk/login?url=$@",name:"London School of Economics",alt:"LSE"},{url:"http://ezproxy.lonestar.edu/login?url=$@",name:"Lone Star College",alt:"LSCS"},{url:"https://login.proxy.longwood.edu/login?url=$@",name:"Longwood University"},{url:"http://libezp.lib.lsu.edu/login?url=$@",name:"Louisiana State University",alt:"LSU"},{url:"http://ezproxy.law.lsu.edu/login?url=$@",name:"Louisiana State University, Paul M. Hebert Law Center",alt:"LSU"},{url:"http://ezproxy.latech.edu:2072/login?url=$@",name:"Louisiana Tech University"},{url:"http://flagship.luc.edu/login?url=$@",name:"Loyola University Chicago"},{url:"http://ezproxy.loyno.edu/login?url=$@",name:"Loyola University New Orleans (Monroe Library)"},{url:"http://emedien.ub.uni-muenchen.de/login?url=$@",name:"Ludwig-Maximilians-Universit\xe4t M\xfcnchen",alt:"LMU"},{url:"http://proxy.lib.ltu.se/login?url=$@",name:"Lule\xe5 Tekniska Universitet",alt:"Lule\xe5 University of Technology"},{url:"http://ludwig.lub.lu.se/login?url=$@",name:"Lunds Universitet",alt:"Lund University"},{url:"http://proxy.luther.edu/login?url=$@",name:"Luther College"},{url:"https://luthersem.idm.oclc.org/login?url=$@",name:"Luther Seminary"},{url:"http://ezproxy.lynchburg.edu/login?url=$@",name:"Lynchburg College (Knight-Capron Library)"},{url:"http://ezproxy.mpib-berlin.mpg.de/login?url=$@",name:"MPI for Human Development Berlin"},{url:"http://ezproxy.ub.unimaas.nl/login?url=$@",name:"Maastricht University"},{url:"http://ezproxy.macewan.ca/login?url=$@",name:"MacEwan University"},{url:"http://ezproxy.macalester.edu/login?url=$@",name:"Macalester College"},{url:"http://simsrad.net.ocs.mq.edu.au/login?url=$@",name:"Macquarie University"},{url:"http://madonnaezp.liblime.com/login?url=$@",name:"Madonna University"},{url:"http://ezproxy.maheclibrary.org/login?url=$@",name:"Mahec Digital Library"},{url:"http://libraries.maine.edu/mainedatabases/authmaine.asp?url=$@",name:"Maine's Virtual Library"},{url:"http://proxy.mah.se/login?url=$@",name:"Malm\xf6 H\xf6gskola",alt:"Malm\xf6 University"},{url:"http://ezproxy.mmu.ac.uk/login?url=$@",name:"Manchester Metropolitan University",alt:"MMU"},{url:"http://librda.mville.edu:2048/login?url=$@",name:"Manhattanville College",alt:"Mville"},{url:"http://proxy-mansfield.klnpa.org/login?url=$@",name:"Mansfield University"},{url:"https://library.proxy.mbl.edu/login?url=$@",name:"Marine Biological Laboratory",alt:"MBL"},{url:"http://login.online.library.marist.edu/login?url=$@",name:"Marist College"},{url:"http://libproxy.marlboro.edu/login?url=$@",name:"Marlboro College"},{url:"http://marshall.idm.oclc.org/login?url=$@",name:"Marshall University"},{url:"http://proxy.library.maryville.edu/login?url=$@",name:"Maryville University"},{url:"http://libproxy.mit.edu/login?url=$@",name:"Massachusetts Institute of Technology",alt:"MIT"},{url:"http://ezproxy.massey.ac.nz/login?url=$@",name:"Massey University"},{url:"https://browser.cbs.mpg.de/login?url=$@",name:"Max Planck Institute for Human Cognitive and Brain Sciences"},{url:"https://login.jproxy.nuim.ie/login?url=$@",name:"Maynooth University",alt:"NUI National University of Ireland"},{url:"https://mclibrary.idm.oclc.org/login?url=$@",name:"Mayo Clinic Libraries"},{url:"http://proxy.library.mcgill.ca/login?url=$@",name:"McGill University"},{url:"http://libaccess.lib.mcmaster.ca/login?url=$@",name:"McMaster University"},{url:"https://login.proxy.lib.mcw.edu/login?url=$@",name:"Medical College of Wisconsin",alt:"MCW"},{url:"http://ezproxy.musc.edu/login?url=$@",name:"Medical University of South Carolina"},{url:"http://ez.srv.meduniwien.ac.at/login?url=$@",name:"Medizinische Universit\xe4t Wien",alt:"Medical University Vienna"},{url:"https://go.openathens.net/redirector/mskcc.org?url=$@",name:"Memorial Sloan Kettering Cancer Center",alt:"MSK"},{url:"http://proxy-s.mercer.edu/login?url=$@",name:"Mercer University"},{url:"http://rdas-proxy.mercy.edu:2048/login?url=$@",name:"Mercy College"},{url:"https://ezproxy.mcny.edu/login?qurl=$@",name:"Metropolitan College of New York",alt:"MCNY"},{url:"http://proxy.lib.miamioh.edu/login?url=$@",name:"Miami University Oxford, Ohio"},{url:"http://ezproxy.msu.edu/login?url=$@",name:"Michigan State University",alt:"MSU"},{url:"http://ezproxy.middlebury.edu/login?url=$@",name:"Middlebury College"},{url:"http://ezproxy.mdx.ac.uk/login?url=$@",name:"Middlesex University London",alt:"MDX"},{url:"http://proxy-millersville.klnpa.org/login?url=$@",name:"Millersville University"},{url:"https://intra.mills.edu:2443/login?url=$@",name:"Mills College"},{url:"https://login.ezproxy.mnsu.edu/$@",name:"Minnesota State University"},{url:"http://libproxy.mst.edu:2048/login?url=$@",name:"Missouri University of Science and Technology (Curtis Laws Wilson Library)",alt:"MST"},{url:"http://ezproxy.mohawkcollege.ca:2048/login?url=$@",name:"Mohawk College"},{url:"http://molloy.idm.oclc.org/login?url=$@",name:"Molloy College (James E. Tobin Library)"},{url:"http://ezproxy.lib.monash.edu.au/login?url=$@",name:"Monash University"},{url:"http://proxybz.lib.montana.edu/login?url=$@",name:"Montana State University"},{url:"https://montgomerycollege.idm.oclc.org/login?url=$@",name:"Montgomery College"},{url:"https://ezproxy.mc3.edu/login?url=$@",name:"Montgomery County Community College",alt:"MCCC"},{url:"https://tjportal.idm.oclc.org/login?url=$@",name:"Monticello (Jefferson Library)"},{url:"http://proxy.mtholyoke.edu:2048/login?url=$@",name:"Mount Holyoke College"},{url:"https://msm.idm.oclc.org/login?url=$@",name:"Mount Saint Marys University (Phillips Library)",alt:"MSMU"},{url:"https://libris.mtsac.edu/login?url=$@",name:"Mt. San Antonio College"},{url:"http://muhlenberg.idm.oclc.org/login?url=$@",name:"Muhlenberg College (Trexler Library)"},{url:"https://www.ezpdhcs.nt.gov.au/login?url=$@",name:"NT Health Library"},{url:"http://ezproxy.nsk.hr/login?url=$@",name:"Nacionalna i sveu\u010dili\u0161na knji\u017enica u Zagrebu",alt:"National and University Library in Zagreb"},{url:"http://ejgw.nul.nagoya-u.ac.jp/login?url=$@",name:"Nagoya University"},{url:"http://ezlibproxy1.ntu.edu.sg/login?url=$@",name:"Nanyang Technological University",alt:"NTU"},{url:"http://ezlib.ncifcrf.gov/login?url=$@",name:"National Cancer Institute",alt:"NIH NCI"},{url:"https://ezproxy.lib.ncu.edu.tw/login?url=$@",name:"National Central University, Taiwan"},{url:"http://ncnm.idm.oclc.org/login?url=$@",name:"National College of Natural Medicine"},{url:"https://ezproxy.uned.es/login?url=$@",name:"National Distance Education University",alt:"UNED"},{url:"https://libproxy.nie.edu.sg/login?url=$@",name:"National Institute of Education Singapore",alt:"NIE"},{url:"https://nist.idm.oclc.org/login?url=$@",name:"National Institute of Standards &amp; Technology"},{url:"http://ezproxy.nihlibrary.nih.gov/login?url=$@",name:"National Institutes of Health",alt:"NIH"},{url:"http://libsw.nutc.edu.tw:2048/login?url=$@",name:"National Taichung University of Science and Technology",alt:"NUTC"},{url:"http://sw.library.ntpu.edu.tw:81/login?url=$@",name:"National Taipei University"},{url:"http://nthulib-oc.nthu.edu.tw/login?url=$@",name:"National Tsing Hua University"},{url:"http://libgate.library.nuigalway.ie/login?url=$@",name:"National University of Ireland Galway",alt:"NUI"},{url:"https://nunm.idm.oclc.org/login?url=$@",name:"National University of Natural Medicine",alt:"NUNM"},{url:"http://libproxy1.nus.edu.sg/login?url=$@",name:"National University of Singapore"},{url:"http://libproxy.nps.edu/login?url=$@",name:"Naval Postgraduate School"},{url:"https://ezproxy.navitas.com/login?url=$@",name:"Navitas Professional Institute"},{url:"https://login.thor.nebrwesleyan.edu/login?url=$@",name:"Nebraska Wesleyan University"},{url:"https://ozone.nsc.edu/login?url=$@",name:"Nevada State College"},{url:"http://libdb.njit.edu:8888/login?url=$@",name:"New Jersey Institute of Technology (Robert W. Van Houten Library)",alt:"NJIT"},{url:"http://ezproxy.nmjc.edu:2048/login?url=$@",name:"New Mexico Junior College",alt:"NMJC"},{url:"http://nrproxy.newriver.edu/login?url=$@",name:"New River Community and Technical College",alt:"New River CTC"},{url:"http://libproxy.newschool.edu/login?url=$@",name:"New School"},{url:"http://ezproxy.nycc.edu:2048/login?url=$@",name:"New York Chiropractic College",alt:"NYCC"},{url:"https://nycpm.idm.oclc.org/login?url=$@",name:"New York College of Podiatric Medicine",alt:"NYCPM"},{url:"http://arktos.nyit.edu/login?url=$@",name:"New York Institute of Technology",alt:"NYIT"},{url:"https://proxy.library.nyu.edu/login?url=$@",name:"New York University",alt:"NYU"},{url:"https://ezproxy.med.nyu.edu/login?url=$@",name:"New York University School of Medicine",alt:"NYU"},{url:"http://libproxy.ncl.ac.uk/login?url=$@",name:"Newcastle University"},{url:"http://ezproxy.niagara.edu:2048/login?url=$@",name:"Niagara University"},{url:"http://roxy.nipissingu.ca/login?url=$@",name:"Nipissing University"},{url:"https://proxying.lib.ncsu.edu/index.php?url=$@",name:"North Carolina State University",alt:"NC"},{url:"https://ezproxy.lib.ndsu.nodak.edu/login?url=$@",name:"North Dakota State University"},{url:"http://ezproxy.niacc.edu:2048/login?url=$@",name:"North Iowa Area Community College"},{url:"http://ezproxy.nwtc.edu:2048/login?url=$@",name:"Northeast Wisconsin Technical College"},{url:"http://neiulibrary.idm.oclc.org/login?url=$@",name:"Northeastern Illinois University (Ronald Williams Library)",alt:"NEIU"},{url:"http://ezproxy.neu.edu/login?url=$@",name:"Northeastern University"},{url:"http://libproxy.nau.edu/login?url=$@",name:"Northern Arizona University"},{url:"http://proxy1.nku.edu/login?url=$@",name:"Northern Kentucky University",alt:"NKU"},{url:"https://proxy.lib.nosm.ca/login?url=$@",name:"Northern Ontario School of Medicine",alt:"NOSM"},{url:"http://ezproxy.northwestms.edu:2048/login?url=$@",name:"Northwest Mississippi Community College"},{url:"http://nu.idm.oclc.org/login?url=$@",name:"Northwest University",alt:"NU"},{url:"https://login.proxy.nmc.edu/login?url=$@",name:"Northwestern Michigan College",alt:"NMC"},{url:"https://ezproxy.nsula.edu/login?url=$@",name:"Northwestern State University"},{url:"http://ezproxy.galter.northwestern.edu/login?url=$@",name:"Northwestern University"},{url:"http://library.norwich.edu/login?url=$@",name:"Norwich University"},{url:"http://proxy.ohiolink.edu:9099/login?url=$@",name:"Notre Dame College"},{url:"http://ezproxylocal.library.nova.edu/login?url=$@",name:"Nova Southeastern University",alt:"NSU"},{url:"https://nunez.idm.oclc.org/login?url=$@",name:"Nunez Community College"},{url:"https://ezproxy.techlib.cz/login?url=$@",name:"N\xe1rodn\xed technick\xe1 knihovna",alt:"NTK"},{url:"https://ocadu.idm.oclc.org/login?url=$@",name:"OCAD University"},{url:"http://webproxy2.ouhsc.edu/login?url=$@",name:"University of Oklahoma Health Sciences Center",alt:"OUHSC"},{url:"https://huaryu.kl.oakland.edu/login?url=$@",name:"Oakland University"},{url:"http://oaktonlibrary.oakton.edu:2048/login?url=$@",name:"Oakton Community College"},{url:"http://ezproxy.oberlin.edu:2048/login?url=$@",name:"Oberlin College"},{url:"http://ezproxy.obspm.fr/login?url=$@",name:"Observatoire de Paris"},{url:"http://proxy.lib.ohio-state.edu/login?url=$@",name:"Ohio State University"},{url:"http://proxy.library.ohiou.edu/login?url=$@",name:"Ohio University"},{url:"https://login.argo.library.okstate.edu/login?url=$@",name:"Oklahoma State University (Edmon Low Library)",alt:"OKState"},{url:"http://proxy.lib.odu.edu/login?url=$@",name:"Old Dominion University",alt:"ODU"},{url:"http://libezproxy.open.ac.uk/login?url=$@",name:"Open University"},{url:"https://elib.openu.ac.il/login?url=$@",name:"Open University of Israel"},{url:"https://ezproxy.ocom.edu:2443/login?url=$@",name:"Oregon College of Oriental Medicine"},{url:"http://liboff.ohsu.edu/login?url=$@",name:"Oregon Health &amp; Sciences University"},{url:"https://www.library.oit.edu:2443/login?url=$@",name:"Oregon Institute of Technology",alt:"OIT"},{url:"http://proxy.library.oregonstate.edu/login?url=$@",name:"Oregon State University"},{url:"http://remote.library.osaka-u.ac.jp/login?url=$@",name:"Osaka University"},{url:"http://ezproxy.biblioottawalibrary.ca/login?url=$@",name:"Ottawa Public Library"},{url:"http://ezproxy2.otterbein.edu/login?url=$@",name:"Otterbein University"},{url:"https://oxfordbrookes.idm.oclc.org/login?url=$@",name:"Oxford Brookes University"},{url:"http://rlib.pace.edu/login?url=$@",name:"Pace University"},{url:"http://ezproxy.plu.edu/login?url=$@",name:"Pacific Lutheran University",alt:"PLU"},{url:"http://libproxy.puc.edu/login?url=$@",name:"Pacific Union College (Nelson Memorial Library)",alt:"PUC"},{url:"http://proxy.lib.pacificu.edu:2048/login?url=$@",name:"Pacific University"},{url:"http://pgi.idm.oclc.org/login?url=$@",name:"Pacifica Graduate Institute",alt:"PGI"},{url:"http://ezproxy.pstcc.edu:2048/login?url=$@",name:"Pellissippi State Technical Community College"},{url:"http://ezproxy.plsinfo.org:2048/login?url=$@",name:"Peninsula Library System"},{url:"http://ezaccess.libraries.psu.edu/login?url=$@",name:"Pennsylvania State University",alt:"Penn State"},{url:"http://lib.pepperdine.edu/login?url=$@",name:"Pepperdine University"},{url:"http://ezproxy.pcom.edu:2048/login?url=$@",name:"Philadelphia College of Ostheopathic Medicine"},{url:"https://ezproxy.philau.edu/login?url=$@",name:"Philadelphia University"},{url:"https://login.ezproxy.piedmont.edu/login?url=$@",name:"Piedmont College"},{url:"https://plymouth.idm.oclc.org/login?url=$@",name:"Plymouth University"},{url:"https://proxy.pointpark.edu/login?url=$@",name:"Point Park University"},{url:"http://ezproxy.point.edu:2048/login?url=$@",name:"Point University"},{url:"https://login.ezproxy.biblio.polito.it/login?url=$@",name:"Politecnico di Torino"},{url:"http://ezproxy.puc.cl/login?url=$@",name:"Pontificia Universidad Cat\xf3lica de Chile"},{url:"https://login.ezproxy.javeriana.edu.co/login?url=$@",name:"Pontificia Universidad Javeriana Bogot\xe1"},{url:"http://proxy.lib.pdx.edu/login?url=$@",name:"Portland State University"},{url:"http://pvamu.idm.oclc.org/login?url=$@",name:"Prairie View A&amp;M University (John B. Coleman Library)",alt:"PVAMU"},{url:"https://ezproxy.pratt.edu/login?url=$@",name:"Pratt Institute"},{url:"http://ezproxy.princeton.edu/login?url=$@",name:"Princeton University"},{url:"http://ezproxy.purchase.edu:2048/login?url=$@",name:"Purchase College"},{url:"https://login.ezproxy.lib.purdue.edu/login?url=$@",name:"Purdue University"},{url:"https://login.ezproxy.library.qmul.ac.uk/login?url=$@",name:"Queen Mary University of London"},{url:"http://proxy.queensu.ca/login?url=$@",name:"Queen's University"},{url:"https://queens.ezp1.qub.ac.uk/login?url=$@",name:"Queen's University Belfast"},{url:"https://go.openathens.net/redirector/qut.edu.au?url=$@",name:"Queensland University of Technology",alt:"QUT"},{url:"https://login.ezproxy.lib.rmit.edu.au/login?url=$@",name:"RMIT University"},{url:"https://ru.idm.oclc.org/login?url=$@",name:"Radboud University"},{url:"http://lib-proxy.radford.edu/login?url=$@",name:"Radford University (McConnell Library)"},{url:"http://ezproxy2.rmc.edu/login?url=$@",name:"Randolph-Macon College"},{url:"http://proxy.library.reed.edu/login?url=$@",name:"Reed College"},{url:"https://library.regent.edu/wamvalidate?url=$@",name:"Regent University"},{url:"http://dml.regis.edu/login?url=$@",name:"Regis University"},{url:"http://ezproxy.reinhardt.edu:2048/login?url=$@",name:"Reinhardt University"},{url:"https://libproxy.rpi.edu/login?url=$@",name:"Rensselaer Polytechnic Institute"},{url:"https://login.ezproxy.rice.edu/login?url=$@",name:"Rice University"},{url:"https://login.proxy-ub.rug.nl/login?url=$@",name:"Rijksuniversiteit Groningen",alt:"University of Groningen"},{url:"https://login.ripon.idm.oclc.org/login?qurl=$@",name:"Ripon College"},{url:"http://ezproxy.rit.edu/login?url=$@",name:"Rochester Institute of Technology",alt:"RIT"},{url:"http://ezproxy.rollins.edu:2048/login?url=$@",name:"Rollins College (Olin Library)"},{url:"http://ezproxy.roosevelt.edu:2048/login?url=$@",name:"Roosevelt University",alt:"RU"},{url:"https://rosalindfranklin.idm.oclc.org/login?url=$@",name:"Rosalind Franklin University (Boxer Library)",alt:"RFU"},{url:"https://rosemont.idm.oclc.org/login?url=$@",name:"Rosemont College (Gertrude Kistler Memorial Library)"},{url:"http://ezproxy.rowan.edu/login?url=$@",name:"Rowan University"},{url:"http://ezproxy.surgeons.org/login?url=$@",name:"Royal Australasian College of Surgeons",alt:"RACS"},{url:"https://rcn.idm.oclc.org/login?url=$@",name:"Royal College of Nursing",alt:"RCN"},{url:"http://ezproxy01.rhul.ac.uk:2048/login?url=$@",name:"Royal Holloway, University of London"},{url:"https://login.rplibresources.health.wa.gov.au/login?url=$@",name:"Royal Perth Hospital"},{url:"https://ezproxy.royalroads.ca/login?url=$@",name:"Royal Roads University"},{url:"https://login.ezproxy.rush.edu/login?url=$@",name:"Rush University Medical Center"},{url:"https://proxy.libraries.rutgers.edu/login?url=$@",name:"Rutgers University"},{url:"http://ezproxy.lib.ryerson.ca/login?url=$@",name:"Ryerson University"},{url:"https://salus.idm.oclc.org/login?url=$@",name:"SA Health Library",alt:"SALUS"},{url:"http://www.sndl1.arn.dz/login?url=$@",name:"SNDL Systeme National de Documentation en Ligne"},{url:"http://ezp.slu.edu/login?url=$@",name:"Saint Louis University",alt:"SLU"},{url:"https://stmarys-ca.idm.oclc.org/login?url=$@",name:"Saint Mary's College CA"},{url:"http://ezproxy.smumn.edu/login?url=$@",name:"Saint Mary's University of Minnesota",alt:"SMUMN"},{url:"http://library.smcvt.edu/login?url=$@",name:"Saint Michael's College"},{url:"http://login.ezproxy.shsu.edu/login?url=$@",name:"Sam Houston State University"},{url:"http://libproxy.sdsu.edu/login?url=$@",name:"San Diego State University"},{url:"http://ezproxy.sfpl.org/login?url=$@",name:"San Francisco Public Library"},{url:"http://jpllnet.sfsu.edu/login?url=$@",name:"San Francisco State University (J. Paul Leonard Library)",alt:"SF State"},{url:"http://libaccess.sjlibrary.org/login?url=$@",name:"San Jose State University"},{url:"https://login.ezproxy.uniroma1.it/login?url=$@",name:"Sapienza Universit\xe0 di Roma"},{url:"http://remote.slc.edu/login?url=$@",name:"Sarah Lawrence College"},{url:"http://ezproxy.shirp.ca/login?url=$@",name:"Saskatchewan Health Information Resource Partnership",alt:"SHIRP"},{url:"http://reference.sit.edu:2048/login?url=$@",name:"School for International Training",alt:"SIT"},{url:"http://ezproxy.spu.edu/login?url=$@",name:"Seattle Pacific University"},{url:"http://proxy.seattleu.edu/login?url=$@",name:"Seattle University",alt:"SU"},{url:"http://ezproxy.shu.edu/login?url=$@",name:"Seton Hall University"},{url:"https://hallam.idm.oclc.org/login?url=$@",name:"Sheffield Hallam University"},{url:"https://suproxy.idm.oclc.org/login?url=$@",name:"Shenandoah University",alt:"SU"},{url:"http://ezproxy.simmons.edu:2048/login?url=$@",name:"Simmons College"},{url:"http://proxy.lib.sfu.ca/login?url=$@",name:"Simon Fraser University",alt:"SFU"},{url:"http://libproxy.smu.edu.sg/login?url=$@",name:"Singapore Management University",alt:"SMU"},{url:"http://proxy-sru.klnpa.org/login?url=$@",name:"Slippery Rock University"},{url:"http://libproxy.smith.edu:2048/login?url=$@",name:"Smith College"},{url:"http://ezproxy.sofia.edu:2048/login?url=$@",name:"Sofia University"},{url:"https://ezproxy.solano.edu/login?url=$@",name:"Solano Community College"},{url:"https://sonoma.idm.oclc.org/login?url=$@",name:"Sonoma State University",alt:"SSU"},{url:"http://libproxy.sookmyung.ac.kr/_Lib_Proxy_Url/login?url=$@",name:"Sookmyung University"},{url:"http://ezproxy.sau.ac.in/login?url=$@",name:"South Asian University"},{url:"http://proxy.southcollegetn.edu:2048/login?url=$@",name:"South College"},{url:"http://ezproxy.southtexascollege.edu:2048/login?url=$@",name:"South Texas College"},{url:"https://login.smhslibresources.health.wa.gov.au/login?url=$@",name:"South and East Metropolitan Health Service",alt:"SMHS"},{url:"http://sco.idm.oclc.org/login?url=$@",name:"Southern College of Optometry",alt:"SCO"},{url:"http://ezproxy.scu.edu.au/login?url=$@",name:"Southern Cross University"},{url:"http://proxy.lib.siu.edu/login?url=$@",name:"Southern Illinois University Carbondale",alt:"SIU"},{url:"https://libproxy.siumed.edu/login?url=$@",name:"Southern Illinois University School of Medicine",alt:"SIU MED"},{url:"http://proxy.libraries.smu.edu/login?url=$@",name:"Southern Methodist University"},{url:"http://ezproxy.snhu.edu/login?url=$@",name:"Southern New Hampshire University",alt:"SNHU"},{url:"http://glacier.sou.edu/login?url=$@",name:"Southern Oregon University",alt:"SOU"},{url:"http://ezproxy.swic.edu/login?url=$@",name:"Southwestern Illinois College",alt:"SWIC"},{url:"https://navigator.southwestern.edu/login?url=$@",name:"Southwestern University"},{url:"https://svhm.idm.oclc.org/login?url=$@",name:"St Vincent's Health Australia"},{url:"https://login.libproxy.stcloudstate.edu/login?qurl=$@",name:"St. Cloud State University"},{url:"https://ezproxy.stedwards.edu/login?url=$@",name:"St. Edward's University in Austin"},{url:"https://jerome.stjohns.edu/login?url=$@",name:"St. John's University"},{url:"http://ezproxy.stlcc.edu/login?url=$@",name:"St. Louis Community College"},{url:"http://ezproxy.stolaf.edu/login?url=$@",name:"St. Olaf College"},{url:"http://proxy.stu.edu:2048/login?url=$@",name:"St. Thomas University",alt:"STU"},{url:"http://laneproxy.stanford.edu/login?url=$@",name:"Stanford University (Lane Medical Library)"},{url:"https://stanford.idm.oclc.org/login?url=$@",name:"Stanford University",alt:"SU"},{url:"http://ezproxy.oswego.edu:2048/login?url=$@",name:"State University of New York at Oswego",alt:"SUNY"},{url:"https://login.proxy.binghamton.edu/login?qurl=$@",name:"State University of New York, Binghamton",alt:"SUNY"},{url:"https://esf.idm.oclc.org/login?url=$@",name:"State University of New York, College of Environmental Science and Forestry",alt:"SUNY"},{url:"http://newproxy.downstate.edu/login?url=$@",name:"State University of New York, Downstate Medical Center",alt:"SUNY"},{url:"http://is-ezproxy01.sunydutchess.edu:2048/login?url=$@",name:"State University of New York, Dutchess Community College",alt:"SUNY DCC"},{url:"http://library.esc.edu/login?url=$@",name:"State University of New York, Empire State College",alt:"SUNY"},{url:"https://libdatabase.newpaltz.edu/login?url=$@",name:"State University of New York, New Paltz (Sojourner Truth Library)",alt:"SUNY"},{url:"http://ezproxy.sunyocc.edu:2048/login?url=$@",name:"State University of New York, Onondaga Community College",alt:"SUNY OCC"},{url:"http://libproxy.sunysccc.edu/login?url=$@",name:"State University of New York, Schenectady County Community College",alt:"SUNY"},{url:"https://login.libproxy.albany.edu/login?qurl=$@",name:"State University of New York, University at Albany",alt:"SUNY"},{url:"https://libproxy1.upstate.edu/login?qurl=$@",name:"State University of New York, Upstate Medical University",alt:"SUNY"},{url:"http://steenproxy.sfasu.edu:2048/login?url=$@",name:"Stephen F. Austin State University",alt:"SFASU"},{url:"http://www.stevens.edu/ezproxy/login?url=$@",name:"Stevens Institute of Technology"},{url:"https://ezp.sub.su.se/login?url=$@",name:"Stockholms universitet",alt:"Stockholm University"},{url:"http://ezproxy.stockton.edu:2048/login?url=$@",name:"Stockton University (Richard E. Bjork Library)"},{url:"http://proxy.library.stonybrook.edu/login?url=$@",name:"Stony Brook University (SBU)"},{url:"http://ezproxy.hsclib.sunysb.edu/login?url=$@",name:"Stony Brook University"},{url:"https://ezproxy.library.strathmore.edu/login?url=$@",name:"Strathmore University"},{url:"http://ezproxysrv.squ.edu.om:2048/login?url=$@",name:"Sultan Qaboos University"},{url:"http://openlink.sa.skku.edu/link.n2s?url=$@",name:"Sungkyunkwan University, Campus of Natural Science"},{url:"http://openlink.ca.skku.edu/link.n2s?url=$@",name:"Sungkyunkwan University, Humanities/Social Science Campus"},{url:"http://ezproxy.sunway.edu.my/login?url=$@",name:"Sunway University"},{url:"http://proxy.swarthmore.edu/login?url=$@",name:"Swarthmore College"},{url:"http://ezproxy.lib.swin.edu.au/login?url=$@",name:"Swinburne University"},{url:"http://libezproxy.syr.edu/login?url=$@",name:"Syracuse University"},{url:"http://ezproxy.tlu.ee/login?url=$@",name:"Tallinna \xdclikool",alt:"Tallinn University"},{url:"http://ezp.tccd.edu/login?url=$@",name:"Tarrant County College",alt:"TCC"},{url:"http://ezproxy.taylors.edu.my/login?url=$@",name:"Taylor's University"},{url:"http://tudelft.idm.oclc.org/login?url=$@",name:"Technische Universiteit Delft",alt:"TU Delft"},{url:"https://janus.libr.tue.nl/login?url=$@",name:"Technische Universiteit Eindhoven",alt:"Eindhoven University of Technology"},{url:"https://eaccess.ub.tum.de:2443/login?url=$@",name:"Technische Universit\xe4t M\xfcnchen",alt:"TUM"},{url:"http://rproxy.tau.ac.il/login?url=$@",name:"Tel Aviv University",alt:"TAU"},{url:"http://libproxy.temple.edu/login?url=$@",name:"Temple University"},{url:"https://login.ezproxy.tntech.edu/login?qurl=$@",name:"Tennessee Tech University (Angelo &amp; Jennette Volpe Library)",alt:"TTU"},{url:"http://lib-ezproxy.tamu.edu:2048/login?url=$@",name:"Texas A&amp;M"},{url:"https://library-proxy.tamhsc.edu/login?url=$@",name:"Texas A&amp;M University, Baylor College of Dentistry",alt:"TAMU"},{url:"http://dbproxy.tamut.edu/login?url=$@",name:"Texas A&amp;M University-Texarkana"},{url:"https://login.libproxy.txstate.edu/login?qurl=$@",name:"Texas State University"},{url:"http://ezp.lib.ttu.edu/login?url=$@",name:"Texas Tech University",alt:"TTU"},{url:"http://ezproxy.ttuhsc.edu/login?url=$@",name:"Texas Tech University Health Sciences Center"},{url:"https://ejwl.idm.oclc.org/login?url=$@",name:"Texas Wesleyan University (West Library)"},{url:"http://aufric.idm.oclc.org/login?url=$@",name:"The Air University"},{url:"https://login.proxy1.lib.tju.edu/login?url=$@",name:"Thomas Jefferson University"},{url:"http://cat1.lib.trentu.ca:2048/login?url=$@",name:"Trent University"},{url:"http://elib.tcd.ie/login?url=$@",name:"Trinity College Dublin"},{url:"https://login.ezproxy.tiu.edu/login?url=$@",name:"Trinity International University"},{url:"http://libproxy.trinity.edu/login?url=$@",name:"Trinity University"},{url:"http://ezproxy.library.tufts.edu/login?url=$@",name:"Tufts University"},{url:"https://login.libproxy.tulane.edu/login?qurl=$@",name:"Tulane University"},{url:"http://ezproxy.utu.fi:2048/login?url=$@",name:"Turun yliopisto",alt:"University of Turku"},{url:"http://ezproxy.mytyndale.ca:2048/login?url=$@",name:"Tyndale University College &amp; Seminary"},{url:"http://stimson.idm.oclc.org/login?url=$@",name:"U.S. Army Medical Department Center and School (Stimson Library)"},{url:"http://uchastings.idm.oclc.org/login?url=$@",name:"UC Hastings College of the Law"},{url:"http://proxy.ub.umu.se/login?url=$@",name:"Ume\xe5 universitet",alt:"Umea University"},{url:"http://lrc1.usuhs.edu/login?url=$@",name:"Uniformed Services University",alt:"USU"},{url:"http://lib-ezproxy.unog.ch/login?url=$@",name:"United Nations Office at Geneva",alt:"UNOG"},{url:"http://ezproxy.ucol.ac.nz/login?url=$@",name:"Universal College of Learning",alt:"UCOL"},{url:"https://login.ezproxy.uax.es/login?url=$@",name:"Universidad Alfonso X El Sabio"},{url:"http://pbidi.unam.mx:8080/login?url=$@",name:"Universidad Aut\xf3noma de M\xe9xico",alt:"UNAM"},{url:"http://ezproxy.ucn.cl/login?url=$@",name:"Universidad Cat\xf3lica del Norte"},{url:"http://ezproxy.unal.edu.co/login?url=$@",name:"Universidad Nacional de Colombia",alt:"UNAL"},{url:"http://roble.unizar.es:9090/login?url=$@",name:"Universidad Zaragoza"},{url:"https://uchile.idm.oclc.org/login?url=$@",name:"Universidad de Chile"},{url:"http://ezproxy.sibdi.ucr.ac.cr:2048/login?url=$@",name:"Universidad de Costa Rica"},{url:"http://bd.univalle.edu.co/login?url=$@",name:"Universidad del Valle"},{url:"http://ez29.periodicos.capes.gov.br/login?url=$@",name:"Universidade Federal do Rio de Janeiro (UFRJ)"},{url:"http://ezproxy.ugm.ac.id/login?url=$@",name:"Universitas Gadjah Mada",alt:"Gadjah Mada University"},{url:"https://login.are.uab.cat/login?url=$@",name:"Universitat Autonoma de Barcelona"},{url:"http://recursos.biblioteca.upc.edu/login?url=$@",name:"Universitat Polit\xe8cnica de Catalunya"},{url:"https://login.proxy.bib.uottawa.ca/login?url=$@",name:"Universite d'Ottawa",alt:"University of Ottawa"},{url:"https://login.bib-proxy.uhasselt.be/login?url=$@",name:"Universiteit Hasselt",alt:"University of Hasselt"},{url:"http://ezproxy.leidenuniv.nl:2048/login?url=$@",name:"Universiteit Leiden",alt:"Leiden University"},{url:"http://proxy.uba.uva.nl:2048/login?url=$@",name:"Universiteit van Amsterdam",alt:"University of Amsterdam"},{url:"https://login.pva.uib.no/login?url=$@",name:"Universitetet i Bergen",alt:"University of Bergen"},{url:"http://ezproxy.ump.edu.my/login?url=$@",name:"Universiti Malaysia Pahang"},{url:"http://ezaccess.library.uitm.edu.my/login?url=$@",name:"Universiti Teknologi MARA",alt:"UiTM"},{url:"https://ezproxy.uthm.edu.my/login?url=$@",name:"Universiti Tun Hussein Onn Malaysia (UTHM)"},{url:"https://libezp.utar.edu.my/login?url=$@",name:"Universiti Tunku Abdul Rahman"},{url:"https://ucc.idm.oclc.org/login?url=$@",name:"University College Cork",alt:"UCC"},{url:"https://ucd.idm.oclc.org/login?url=$@",name:"University College Dublin",alt:"UCD"},{url:"https://libproxy.ucl.ac.uk/login?url=$@",name:"University College London",alt:"UCL"},{url:"http://passerelle.univ-rennes1.fr/login?url=$@",name:"University Rennes 1"},{url:"http://ezproxy.server.hv.se/login?url=$@",name:"University West"},{url:"http://gate.lib.buffalo.edu/login?url=$@",name:"University at Buffalo"},{url:"https://ucreative.idm.oclc.org/login?url=$@",name:"University for the Creative Arts",alt:"UCA"},{url:"https://proxy.library.adelaide.edu.au/login?url=$@",name:"University of Adelaide"},{url:"http://ezproxy.uakron.edu:2048/login?url=$@",name:"University of Akron"},{url:"http://libdata.lib.ua.edu/login?url=$@",name:"University of Alabama"},{url:"http://ezproxy3.lhl.uab.edu/login?url=$@",name:"University of Alabama at Birmingham (Lister Hill Library)",alt:"UAB"},{url:"https://elib.uah.edu/login?url=$@",name:"University of Alabama in Huntsville (M. Louis Salmon Library)",alt:"UAH"},{url:"http://proxy.consortiumlibrary.org/login?url=$@",name:"University of Alaska Anchorage"},{url:"http://login.ezproxy.library.ualberta.ca/login?url=$@",name:"University of Alberta"},{url:"http://ezproxy.library.arizona.edu/login?url=$@",name:"University of Arizona"},{url:"http://ezproxy.libproxy.uams.edu/login?url=$@",name:"University of Arkansas for Medical Sciences"},{url:"http://ezproxy.auckland.ac.nz/login?url=$@",name:"University of Auckland"},{url:"http://libproxy.bath.ac.uk/login?url=$@",name:"University of Bath"},{url:"http://ezproxyd.bham.ac.uk/login?url=$@",name:"University of Birmingham"},{url:"https://brad.idm.oclc.org/login?url=$@",name:"University of Bradford",alt:"UoB"},{url:"http://ezproxy.brighton.ac.uk/login?url=$@",name:"University of Brighton"},{url:"http://bris.idm.oclc.org/login?url=$@",name:"University of Bristol"},{url:"http://ezproxy.library.ubc.ca/login?url=$@",name:"University of British Columbia"},{url:"https://login.ezproxy.lib.ucalgary.ca/login?url=$@",name:"University of Calgary"},{url:"https://libproxy.berkeley.edu/login?url=$@",name:"University of California, Berkeley",alt:"UC Berkeley"},{url:"https://ucsf.idm.oclc.org/login?qurl=$@",name:"University of California, San Francisco",alt:"UCSF"},{url:"https://login.proxy.library.ucsb.edu:9443/login?url=$@",name:"University of California, Santa Barbara",alt:"UCSB"},{url:"http://oca.ucsc.edu/login?url=$@",name:"University of California, Santa Cruz",alt:"UCSC"},{url:"http://ezproxy.lib.cam.ac.uk:2048/login?url=$@",name:"University of Cambridge"},{url:"https://login.ezproxy.canberra.edu.au/login?url=$@",name:"University of Canberra"},{url:"http://ezproxy.canterbury.ac.nz/login?url=$@",name:"University of Canterbury, NZ"},{url:"http://ezproxy.uct.ac.za/login?url=$@",name:"University of Cape Town",alt:"UCT"},{url:"http://ezproxy.net.ucf.edu/login?url=$@",name:"University of Central Florida"},{url:"https://login.cyrano.ucmo.edu/login?url=$@",name:"University of Central Missouri (James C. Kirkpatrick Library)"},{url:"http://proxy.uchicago.edu/login?url=$@",name:"University of Chicago"},{url:"https://uc.idm.oclc.org/login?url=$@",name:"University of Cincinnati"},{url:"http://colorado.idm.oclc.org/login?url=$@",name:"University of Colorado Boulder",alt:"UCB"},{url:"http://ezproxy.lib.uconn.edu/login?url=$@",name:"University of Connecticut",alt:"Uconn"},{url:"https://online.uchc.edu/login?qurl=$@",name:"University of Connecticut Health",alt:"Uconn Health"},{url:"https://dbproxy.udallas.edu/login?url=$@",name:"University of Dallas"},{url:"http://libproxy.udayton.edu/login?url=$@",name:"University of Dayton"},{url:"https://udel.idm.oclc.org/login?url=$@",name:"University of Delaware Newark"},{url:"http://du.idm.oclc.org/login?url=$@",name:"University of Denver"},{url:"http://ezproxy.derby.ac.uk/login?url=$@",name:"University of Derby"},{url:"http://ezproxy.libraries.udmercy.edu:2048/login?url=$@",name:"University of Detroit Mercy"},{url:"http://libproxy.dundee.ac.uk/login?url=$@",name:"University of Dundee"},{url:"https://ueaezproxy.uea.ac.uk:2443/login?url=$@",name:"University of East Anglia",alt:"UEA"},{url:"http://ezproxy.is.ed.ac.uk/login?url=$@",name:"University of Edinburgh"},{url:"https://login.lp.hscl.ufl.edu/login?url=$@",name:"University of Florida"},{url:"http://proxy-remote.galib.uga.edu/login?url=$@",name:"University of Georgia"},{url:"http://ezproxy.lib.gla.ac.uk/login?url=$@",name:"University of Glasgow"},{url:"http://subzero.lib.uoguelph.ca/login?url=$@",name:"University of Guelph"},{url:"https://ezproxy.haifa.ac.il/login?url=$@",name:"University of Haifa"},{url:"http://micro189.lib3.hawaii.edu:2048/login?url=$@",name:"University of Hawaii"},{url:"http://eres.library.manoa.hawaii.edu/login?url=$@",name:"University of Hawaii, Manoa"},{url:"http://eproxy.lib.hku.hk/login?url=$@",name:"University of Hong Kong Libraries"},{url:"http://ezproxy.lib.uh.edu/login?url=$@",name:"University of Houston"},{url:"http://libproxy.uhcl.edu/login?url=$@",name:"University of Houston - Clear Lake"},{url:"http://ezproxy.uis.edu:2048/login?url=$@",name:"University of Illinois Springfield",alt:"UIS"},{url:"https://proxy2.library.illinois.edu/login?url=$@",name:"University of Illinois Urbana-Champaign"},{url:"http://proxy.cc.uic.edu/login?url=$@",name:"University of Illinois at Chicago"},{url:"https://ezproxy.uindy.edu/login?url=$@",name:"University of Indianapolis (Krannert Memorial Library)"},{url:"https://login.proxy.lib.uiowa.edu/login?qurl=$@",name:"University of Iowa"},{url:"http://ezlibrary.ju.edu.jo/login?url=$@",name:"University of Jordan"},{url:"http://www2.lib.ku.edu:2048/login?url=$@",name:"University of Kansas"},{url:"http://proxy.kumc.edu:2048/login?url=$@",name:"University of Kansas Medical Center"},{url:"http://chain.kent.ac.uk/login?url=$@",name:"University of Kent"},{url:"http://ezproxy.uky.edu/login?url=$@",name:"University of Kentucky"},{url:"http://ezproxy.lib.le.ac.uk/login?url=$@",name:"University of Leicester"},{url:"https://ezproxy.uleth.ca/login?url=$@",name:"University of Lethbridge",alt:"UofL"},{url:"https://login.proxy.lib.ul.ie/login?url=$@",name:"University of Limerick",alt:"UL"},{url:"http://proxy.library.lincoln.ac.uk/login?url=$@",name:"University of Lincoln"},{url:"https://liverpool.idm.oclc.org/login?url=$@",name:"University of Liverpool"},{url:"http://echo.louisville.edu/login?url=$@",name:"University of Louisville"},{url:"http://www.library.umaine.edu/auth/EZProxy/test/authej.asp?url=$@",name:"University of Maine System"},{url:"https://manchester.idm.oclc.org/login?url=$@",name:"University of Manchester"},{url:"https://uml.idm.oclc.org/login?url=$@",name:"University of Manitoba",alt:"UM"},{url:"http://proxy2.lib.umanitoba.ca/login?url=$@",name:"University of Manitoba"},{url:"http://ezproxy.law.umaryland.edu/login?auth=Library&amp;url=$@",name:"University of Maryland (Thurgood Marshall Law Library)"},{url:"http://proxy-hs.researchport.umd.edu/login?url=$@",name:"University of Maryland (Health Sciences and Human Services Library)"},{url:"http://ezproxy.umuc.edu/login?url=$@",name:"University of Maryland University College",alt:"UMUC"},{url:"http://proxy-bc.researchport.umd.edu/login?url=$@",name:"University of Maryland, Baltimore County",alt:"UMBC"},{url:"http://proxy-um.researchport.umd.edu/login?url=$@",name:"University of Maryland, College Park"},{url:"http://silk.library.umass.edu:2048/login?url=$@",name:"University of Massachusetts Amherst",alt:"UMass"},{url:"http://ezproxy.lib.umb.edu/login?url=$@",name:"University of Massachusetts Boston",alt:"Umass UMB"},{url:"http://libproxy.umassd.edu/login?url=$@",name:"University of Massachusetts Dartmouth",alt:"UmassD"},{url:"http://ezproxy.umassmed.edu/login?url=$@",name:"University of Massachusetts Medical School",alt:"Umass"},{url:"http://ezp.lib.unimelb.edu.au/login?url=$@",name:"University of Melbourne"},{url:"https://ezproxy.memphis.edu:3443/login?url=$@",name:"University of Memphis",alt:"UofM"},{url:"http://proxy.lib.umich.edu/login?url=$@",name:"University of Michigan"},{url:"http://libproxy.umflint.edu:2048/login?qurl=$@",name:"University of Michigan-Flint"},{url:"http://ezproxy.law.umn.edu/login?url=$@",name:"University of Minnesota (Law Library)"},{url:"http://login.ezproxy.lib.umn.edu/login?url=$@",name:"University of Minnesota",alt:"UMN"},{url:"https://login.libpdb.d.umn.edu:2443/login?url=$@",name:"University of Minnesota Duluth"},{url:"http://ezproxy.morris.umn.edu/login?url=$@",name:"University of Minnesota Morris (Rodney A. Briggs Library)",alt:"UMM"},{url:"http://umiss.idm.oclc.org/login?url=$@",name:"University of Mississippi",alt:"UMISS"},{url:"http://ezproxy.umsl.edu/login?url=$@",name:"University of Missouri - St. Louis"},{url:"http://proxy.library.umkc.edu/login?url=$@",name:"University of Missouri-Kansas City",alt:"UMKC"},{url:"http://weblib.lib.umt.edu:8080/login?url=$@",name:"University of Montana"},{url:"http://library1.unmc.edu:2048/login?url=$@",name:"University of Nebraska Medical Center"},{url:"https://login.ezproxy.library.unlv.edu/login?url=$@",name:"University of Nevada, Las Vegas"},{url:"https://unr.idm.oclc.org/login?url=$@",name:"University of Nevada, Reno",alt:"UNR"},{url:"http://ezproxy.une.edu.au/login?url=$@",name:"University of New England",alt:"UNE"},{url:"http://unh-proxy.newhaven.edu:2048/login?url=$@",name:"University of New Haven (Marvin K. Peterson Library)",alt:"UNH"},{url:"https://login.libproxy.unm.edu/login?qurl=$@",name:"University of New Mexico"},{url:"http://ezproxy.uno.edu/login?url=$@",name:"University of New Orleans"},{url:"https://login.wwwproxy1.library.unsw.edu.au/login?qurl=$@",name:"University of New South Wales (UNSW)"},{url:"https://login.ezproxy.newcastle.edu.au/login?url=$@",name:"University of Newcastle (Australia)",alt:"UoN"},{url:"https://ezproxy.una.edu/login?url=$@",name:"University of North Alabama",alt:"UNA"},{url:"http://liblink.uncw.edu/login?url=$@",name:"University of North Carolina Wilmington (Randall Library)",alt:"UNCW"},{url:"http://libproxy.lib.unc.edu/login?url=$@",name:"University of North Carolina at Chapel Hill",alt:"UNC"},{url:"https://librarylink.uncc.edu/login?url=$@",name:"University of North Carolina at Charlotte",alt:"UNC"},{url:"https://libproxy.uncg.edu/login?url=$@",name:"University of North Carolina at Greensboro",alt:"UNC"},{url:"http://ezproxy.library.und.edu/login?url=$@",name:"University of North Dakota",alt:"UND"},{url:"https://login.dax.lib.unf.edu/login?url=$@",name:"University of North Florida"},{url:"https://proxy.hsc.unt.edu/login?url=$@",name:"University of North Texas Health Science Center (Gibson D. Lewis Library)",alt:"UNTHSC"},{url:"https://ezproxy.northampton.ac.uk/login?url=$@",name:"University of Northampton"},{url:"http://login.proxy.lib.uni.edu/login?url=$@",name:"University of Northern Iowa"},{url:"http://proxy.library.nd.edu/login?url=$@",name:"University of Notre Dame"},{url:"https://nottingham.idm.oclc.org/login?url=$@",name:"University of Nottingham"},{url:"http://ezproxy.lib.ou.edu/login?url=$@",name:"University of Oklahoma"},{url:"http://uproxy.library.dc-uoit.ca/login?url=$@",name:"University of Ontario Institute of Technology",alt:"UOIT"},{url:"http://libproxy.uoregon.edu/login?url=$@",name:"University of Oregon"},{url:"https://ezproxy.otago.ac.nz/login?url=$@",name:"University of Otago, Dunedin"},{url:"https://wmezproxy.wnmeds.ac.nz/login?url=$@",name:"University of Otago, Wellington"},{url:"http://contentproxy.phoenix.edu/login?url=$@",name:"University of Phoenix"},{url:"http://pitt.idm.oclc.org/login?url=$@",name:"University of Pittsburgh",alt:"Pitt"},{url:"https://login.ezproxy-eres.up.edu/login?url=$@",name:"University of Portland (Clark Library)",alt:"UP"},{url:"http://proxy.library.upei.ca/login?url=$@",name:"University of Prince Edward Island",alt:"UPEI"},{url:"http://ezproxy.ups.edu/login?url=$@",name:"University of Puget Sound",alt:"UPS"},{url:"http://ezproxy.library.uq.edu.au/login?url=$@",name:"University of Queensland"},{url:"http://libproxy.uregina.ca:2048/login?url=$@",name:"University of Regina"},{url:"http://uri.idm.oclc.org/login?url=$@",name:"University of Rhode Island",alt:"URI"},{url:"http://ezp.lib.rochester.edu/login?url=$@",name:"University of Rochester"},{url:"https://login.ezpminer.urmc.rochester.edu/login?url=$@",name:"University of Rochester Medical Center"},{url:"https://salford.idm.oclc.org/login?url=$@",name:"University of Salford"},{url:"https://ezproxy.usc.edu.ph/login?url=$@",name:"University of San Carlos"},{url:"https://sandiego.idm.oclc.org/login?url=$@",name:"University of San Diego"},{url:"http://cyber.usask.ca/login?url=$@",name:"University of Saskatchewan",alt:"U of S"},{url:"https://sheffield.idm.oclc.org/login?url=$@",name:"University of Sheffield"},{url:"http://eresources.shef.ac.uk/login?url=$@",name:"University of Sheffield"},{url:"https://libproxy.usouthal.edu/login?url=$@",name:"University of South Alabama"},{url:"http://pallas2.tcl.sc.edu/login?url=$@",name:"University of South Carolina Columbia",alt:"USC Columbia"},{url:"http://ezproxy.usd.edu/login?url=$@",name:"University of South Dakota",alt:"USD"},{url:"http://ezproxy.lib.usf.edu/login?url=$@",name:"University of South Florida",alt:"USF"},{url:"https://ezproxy.hsc.usf.edu/login?url=$@",name:"University of South Florida Health Sciences",alt:"USF"},{url:"https://libproxy.usc.edu/login?url=$@",name:"University of Southern California"},{url:"http://proxy1-bib.sdu.dk:2048/login?url=$@",name:"University of Southern Denmark"},{url:"http://lynx.lib.usm.edu/login?url=$@",name:"University of Southern Mississippi"},{url:"http://ezproxy.usq.edu.au/login?url=$@",name:"University of Southern Queensland"},{url:"http://ezproxy.st-andrews.ac.uk:80/login?url=$@",name:"University of St. Andrews"},{url:"http://ezproxy.stfrancis.edu/login?url=$@",name:"University of St. Francis"},{url:"http://ezproxy.stthom.edu:2048/login?url=$@",name:"University of St. Thomas, Houston"},{url:"https://login.ezproxy.stthomas.edu/login?url=$@",name:"University of St. Thomas, Minnesota"},{url:"http://ez.sun.ac.za/login?url=$@",name:"University of Stellenbosch"},{url:"http://ezproxy.stir.ac.uk/login?url=$@",name:"University of Stirling"},{url:"http://proxy.lib.strath.ac.uk/login?url=$@",name:"University of Strathclyde"},{url:"http://ezproxy.usc.edu.au:2048/login?url=$@",name:"University of Sunshine Coast"},{url:"http://ezproxy.sussex.ac.uk/login?url=$@",name:"University of Sussex"},{url:"http://ezproxy.library.usyd.edu.au/login?url=$@",name:"University of Sydney"},{url:"https://login.ezproxy.utas.edu.au/login?url=$@",name:"University of Tasmania"},{url:"http://ezproxy.lib.uts.edu.au/login?url=$@",name:"University of Technology, Sydney"},{url:"https://login.ezproxy.uthsc.edu/login?qurl=$@",name:"University of Tennessee Health Science Center",alt:"UTHSC"},{url:"http://ezproxy.utm.edu/login?url=$@",name:"University of Tennessee at Martin",alt:"UT Martin"},{url:"http://proxy.lib.utc.edu/login?url=$@",name:"University of Tennessee, Chattanooga",alt:"UT"},{url:"http://libproxy.uthscsa.edu/login?url=$@",name:"University of Texas Health Center San Antonio"},{url:"https://login.libux.utmb.edu/login?qurl=$@",name:"University of Texas Medical Branch",alt:"UTMB"},{url:"http://ezhost.utrgv.edu:2048/login?url=$@",name:"University of Texas Rio Grande Valley"},{url:"https://foyer.swmed.edu/login?url=$@",name:"University of Texas Southwestern Medical Center",alt:"UT"},{url:"http://ezproxy.lib.utexas.edu/login?url=$@",name:"University of Texas at Austin"},{url:"http://libproxy.utdallas.edu:80/login?url=$@",name:"University of Texas at Dallas",alt:"UT"},{url:"https://login.libweb.lib.utsa.edu/login?url=$@",name:"University of Texas at San Antonio"},{url:"https://ezproxy.utpb.edu/login?qurl=$@",name:"University of Texas of the Permian Basin",alt:"UTPB"},{url:"http://myaccess.library.utoronto.ca/login?url=$@",name:"University of Toronto"},{url:"http://ezproxy.tulips.tsukuba.ac.jp/login?url=$@",name:"University of Tsukuba"},{url:"https://login.ezproxy.lib.utah.edu/login?url=$@",name:"University of Utah"},{url:"http://ezproxy.uvm.edu/login?url=$@",name:"University of Vermont"},{url:"http://login.ezproxy.library.uvic.ca/login?url=$@",name:"University of Victoria"},{url:"http://proxy.its.virginia.edu/login?url=$@",name:"University of Virginia"},{url:"http://ezproxy.waikato.ac.nz/login?url=$@",name:"University of Waikato"},{url:"http://ezproxy.wales.ac.uk:2048/login?url=$@",name:"University of Wales"},{url:"https://ezproxy.uwtsd.ac.uk/login?url=$@",name:"University of Wales Trinity St Davids"},{url:"https://pugwash.lib.warwick.ac.uk/wamvalidate?url=$@",name:"University of Warwick"},{url:"http://offcampus.lib.washington.edu/login?url=$@",name:"University of Washington"},{url:"http://proxy.lib.uwaterloo.ca/login?url=$@",name:"University of Waterloo"},{url:"http://ezproxy.lib.uwf.edu/login?url=$@",name:"University of West Florida",alt:"UWF"},{url:"https://ezproxy.uwl.ac.uk/login?url=$@",name:"University of West London"},{url:"http://ezproxy.library.uwa.edu.au/login?url=$@",name:"University of Western Australia"},{url:"https://ezproxy.westminster.ac.uk/login?url=$@",name:"University of Westminster"},{url:"http://ezproxy.uwindsor.ca/login?url=$@",name:"University of Windsor"},{url:"http://libproxy.uwinnipeg.ca/login?url=$@",name:"University of Winnipeg"},{url:"https://ezproxy.uwc.edu/login?url=$@",name:"University of Wisconsin",alt:"UWC"},{url:"https://link.uwsuper.edu:9433/login?url=$@",name:"University of Wisconsin - Superior"},{url:"http://www.remote.uwosh.edu/login?url=$@",name:"University of Wisconsin Oshkosh"},{url:"https://login.proxy.uwec.edu/login?qurl=$@",name:"University of Wisconsin-Eau Claire"},{url:"https://ezproxy.uwgb.edu:2443/login?url=$@",name:"University of Wisconsin-Green Bay"},{url:"https://ezproxy.library.wisc.edu/login?url=$@",name:"University of Wisconsin-Madison"},{url:"http://ezproxy.lib.uwm.edu/login?url=$@",name:"University of Wisconsin-Milwaukee"},{url:"http://libraryproxy.uwp.edu:2048/login?url=$@",name:"University of Wisconsin-Parkside",alt:"UWP"},{url:"https://login.ezproxy.uwplatt.edu/login?url=$@",name:"University of Wisconsin-Platteville (Karrmann Library)"},{url:"http://ezproxy.uwrf.edu:2048/login?url=$@",name:"University of Wisconsin-River Falls"},{url:"https://ezproxy.uwsp.edu/login?url=$@",name:"University of Wisconsin-Stevens Point"},{url:"http://ezproxy.uow.edu.au/login?url=$@",name:"University of Wollongong"},{url:"http://ezproxy.wlv.ac.uk/login?url=$@",name:"University of Wolverhampton"},{url:"http://libproxy.uwyo.edu/login?url=$@",name:"University of Wyoming"},{url:"http://libproxy.york.ac.uk/login?url=$@",name:"University of York"},{url:"http://proxy.ufv.ca:2048/login?url=$@",name:"University of the Fraser Valley"},{url:"https://uiwtx.idm.oclc.org/login?url=$@",name:"University of the Incarnate Word",alt:"UIW"},{url:"http://ezproxy.engglib.upd.edu.ph/login?url=$@",name:"University of the Philippines, College of Engineering"},{url:"https://login.db.usip.edu/login?url=$@",name:"University of the Sciences in Philadelphia"},{url:"http://rproxy.uwimona.edu.jm/login?url=$@",name:"University of the West Indies at Mona",alt:"UWI Mona"},{url:"http://ezproxy.uwe.ac.uk/login?url=$@",name:"University of the West of England"},{url:"http://ezproxy.uwc.ac.za/login?url=$@",name:"University of the Western Cape"},{url:"https://innopac.wits.ac.za/validate?url=$@",name:"University of the Witwatersrand"},{url:"http://proxysba.uniss.it:2048/login?url=$@",name:"Universit\xe0 degli Studi di Sassari"},{url:"http://ezp.biblio.unitn.it/login?url=$@",name:"Universit\xe0 degli Studi di Trento"},{url:"http://ezproxy.pros.lib.unimi.it/login?url=$@",name:"Universit\xe0 degli studi di Milano",alt:"University of Milan"},{url:"https://www.ezproxy.unibo.it/login?url=$@",name:"Universit\xe0 di Bologna"},{url:"http://px.units.it/login?url=$@",name:"Universit\xe0 di Trieste"},{url:"http://ubproxy.ub.uni-heidelberg.de/login?qurl=$@",name:"Universit\xe4t Heidelberg",alt:"Heidelberg University"},{url:"http://ezproxy.medma.uni-heidelberg.de/login?url=$@",name:"Universit\xe4t Heidelberg, Medizinischen Fakult\xe4t Mannheim"},{url:"http://uaccess.univie.ac.at/login?url=$@",name:"Universit\xe4t Wien",alt:"University of Vienna"},{url:"http://ezproxy.uzh.ch/login?url=$@",name:"Universit\xe4t Z\xfcrich",alt:"University of Zurich"},{url:"https://login.gaelnomade-1.grenet.fr/login?url=$@",name:"Universit\xe9 Grenoble Alpes"},{url:"http://acces.bibl.ulaval.ca/login?url=$@",name:"Universit\xe9 Laval"},{url:"http://ezproxy.ulb.ac.be/login?url=$@",name:"Universit\xe9 Libre de Bruxelles"},{url:"http://faraway.u-paris10.fr/login?url=$@",name:"Universit\xe9 Ouest Nanterre La D\xe9fense"},{url:"http://ezproxy.univ-paris1.fr/login?url=$@",name:"Universit\xe9 Paris 1 Panth\xe9on-Sorbonne"},{url:"http://ezproxy.math-info-paris.cnrs.fr/login?url=$@",name:"Universit\xe9 Paris 6 et 7 - Math\xe9matiques Informatique Recherche"},{url:"http://rproxy.sc.univ-paris-diderot.fr:80/login?url=$@",name:"Universit\xe9 Paris Diderot"},{url:"http://accesdistant.upmc.fr/login?url=$@",name:"Universit\xe9 Pierre et Marie Curie",alt:"UPMC"},{url:"http://distant.bu.univ-rennes2.fr/login?url=$@",name:"Universit\xe9 Rennes 2"},{url:"http://proxy.bib.ucl.ac.be:888/login?url=$@",name:"Universit\xe9 catholique de Louvain",alt:"UCL"},{url:"http://buadistant.univ-angers.fr/login?url=$@",name:"Universit\xe9 d'Angers"},{url:"http://ezproxy.univ-artois.fr/login?url=$@",name:"Universit\xe9 d'Artois"},{url:"http://ezproxy.universite-paris-saclay.fr/login?url=$@",name:"Universit\xe9 d'\xc9vry Val d'Essonne"},{url:"http://docelec.u-bordeaux.fr/login?url=$@",name:"Universit\xe9 de Bordeaux"},{url:"http://proxy-scd.u-bourgogne.fr/login?url=$@",name:"Universit\xe9 de Bourgogne"},{url:"http://ressources-electroniques.univ-lille.fr/login?url=$@",name:"Universit\xe9 de Lille"},{url:"http://docproxy.univ-lille1.fr/login?url=$@",name:"Universit\xe9 de Lille 1"},{url:"http://ezproxy.unilim.fr/login?url=$@",name:"Universit\xe9 de Limoges"},{url:"http://bases-doc.univ-lorraine.fr/login?url=$@",name:"Universit\xe9 de Lorraine"},{url:"http://proxy.cm.umoncton.ca/login?url=$@",name:"Universit\xe9 de Moncton"},{url:"http://proxy.unice.fr/login?url=$@",name:"Universit\xe9 de Nice Sophia Antipolis"},{url:"https://ezproxy.usherbrooke.ca/login?url=$@",name:"Universit\xe9 de Sherbrooke"},{url:"http://scd-rproxy.u-strasbg.fr/login?url=$@",name:"Universit\xe9 de Strasbourg"},{url:"http://proxy.utt.fr/login?url=$@",name:"Universit\xe9 de technologie de Troyes",alt:"UTT"},{url:"http://sbiproxy.uqac.ca/login?url=$@",name:"Universit\xe9 du Qu\xe9bec \xe0 Chicoutimi (Biblioth\xe8que Paul-\xc9mile-Boulet)",alt:"UQAC"},{url:"http://proxy.bibliotheques.uqam.ca:2048/login?url=$@",name:"Universit\xe9 du Qu\xe9bec \xe0 Montr\xe9al",alt:"UQAM"},{url:"https://login.ezproxy.is.cuni.cz/login?url=$@",name:"Univerzita Karlova v Praze",alt:"Charles University in Prague"},{url:"http://ezproxy.its.uu.se/login?url=$@",name:"Uppsala universitet"},{url:"http://dist.lib.usu.edu/login?url=$@",name:"Utah State University"},{url:"https://ezproxy.uvu.edu/login?qurl=$@",name:"Utah Valley University",alt:"UVU"},{url:"https://ezproxy.utica.edu/login?url=$@",name:"Utica College"},{url:"https://login.proxy.library.uu.nl/login?url=$@",name:"Utrecht University"},{url:"https://vu-nl.idm.oclc.org/login?url=$@",name:"VU University Amsterdam"},{url:"http://ezproxy.valpo.edu/login?url=$@",name:"Valparaiso University  (Christopher Center Library)"},{url:"http://hvhl.idm.oclc.org/login?url=$@",name:"Van Hall Larenstein"},{url:"http://ezproxy.viu.ca/login?url=$@",name:"Vancouver Island University",alt:"VIU"},{url:"http://proxy.library.vanderbilt.edu/login?url=$@",name:"Vanderbilt University"},{url:"https://vanguard.idm.oclc.org/login?url=$@",name:"Vanguard University"},{url:"http://libproxy.vassar.edu/login?url=$@",name:"Vassar College"},{url:"http://wallaby.vu.edu.au:5678/login?url=$@",name:"Victoria University"},{url:"https://login.helicon.vuw.ac.nz/login?url=$@",name:"Victoria University of Wellington"},{url:"http://ezp1.villanova.edu:80/login?url=$@",name:"Villanova University"},{url:"http://proxy.library.vcu.edu/login?url=$@",name:"Virginia Commonwealth University",alt:"VCU"},{url:"http://login.ezproxy.lib.vt.edu/login?url=$@",name:"Virginia Polytechnic Institute and State University",alt:"Virginia Tech"},{url:"https://www.vub.ac.be/cgi-bin/ezlogin?url=$@",name:"Vrije Universiteit Brussel"},{url:"http://ezproxy.library.wur.nl/login?url=$@",name:"Wageningen University"},{url:"http://ezproxy.wfu.edu/login?url=$@",name:"Wake Forest University",alt:"WFU"},{url:"http://ezp.waldenulibrary.org/login?url=$@",name:"Walden University"},{url:"http://ezproxy.wallawalla.edu:2048/login?url=$@",name:"Walla Walla University (Peterson Memorial Library)",alt:"WWU"},{url:"http://ezproxy.warnerpacific.edu:2048/login?url=$@",name:"Warner Pacific College"},{url:"https://beckerproxy.wustl.edu/login?url=$@",name:"Washington University School of Medicine"},{url:"http://libproxy.wustl.edu/login?url=$@",name:"Washington University in St. Louis"},{url:"https://ezproxy.wlu.edu/login?url=$@",name:"Washington and Lee University"},{url:"https://login.ezproxy.wccnet.edu/login?url=$@",name:"Washtenaw Community College (Bailey Library)"},{url:"http://ezproxy.wit.ie:2048/login?url=$@",name:"Waterford Institute of Technology",alt:"WIT"},{url:"http://proxy.lib.wayne.edu/login?url=$@",name:"Wayne State University"},{url:"https://login.hal.weber.edu/login?url=$@",name:"Weber State University"},{url:"http://library3.webster.edu/login?url=$@",name:"Webster University"},{url:"http://ezproxywit.flo.org/login?url=$@",name:"Wentworth Institute of Technology",alt:"WIT"},{url:"http://ezproxy.wesleyan.edu:7790/login?url=$@",name:"Wesleyan University"},{url:"https://login.databases.wtamu.edu/login?url=$@",name:"West Texas A&amp;M University",alt:"WTAMU"},{url:"https://wvu.idm.oclc.org/login?url=$@",name:"West Virginia University",alt:"WVU"},{url:"http://wgu.idm.oclc.org/login?url=$@",name:"Western Governors University",alt:"WGU"},{url:"https://ezproxy.wiu.edu/login?url=$@",name:"Western Illinois University",alt:"WIU"},{url:"http://witcc.idm.oclc.org/login?url=$@",name:"Western Iowa Tech Community College"},{url:"http://libsrv.wku.edu:2048/login?url=$@",name:"Western Kentucky University"},{url:"http://libproxy.library.wmich.edu/login?url=$@",name:"Western Michigan University"},{url:"http://proxyserver.umwestern.edu:2048/login?url=$@",name:"Western Montana College of The University of Montana (Lucy Carson Library)"},{url:"https://galanga.hvl.no/login?url=$@",name:"Western Norway University of Applied Sciences (HVL)"},{url:"http://ezproxy.uws.edu.au/login?url=$@",name:"Western Sydney University"},{url:"http://ezproxy.westerntc.edu:2048/login?url=$@",name:"Western Technical College"},{url:"https://www.lib.uwo.ca/cgi-bin/ezpauthn.cgi?url=$@",name:"Western University"},{url:"https://proxy.westernu.edu/login?url=$@",name:"Western University of Health Sciences"},{url:"http://ezproxy.library.wwu.edu/login?url=$@",name:"Western Washington University"},{url:"http://ezproxy.westminstercollege.edu/login?url=$@",name:"Westminster College"},{url:"http://ezproxy.wscal.edu/login?url=$@",name:"Westminster Seminary California"},{url:"http://ezproxy.wheaton.edu/login?url=$@",name:"Wheaton College"},{url:"http://ezproxy.whitman.edu:2048/login?url=$@",name:"Whitman College"},{url:"http://ezproxy.whittier.edu/login?url=$@",name:"Whittier College"},{url:"http://proxy.wichita.edu/login?url=$@",name:"Wichita State University"},{url:"http://libproxy.wlu.ca/login?url=$@",name:"Wilfrid Laurier University"},{url:"http://proxy.wm.edu/login?url=$@",name:"William &amp; Mary"},{url:"http://ezproxy.jessup.edu/login?url=$@",name:"William Jessup University",alt:"WJU"},{url:"http://ezproxy.wpunj.edu:2048/login?url=$@",name:"William Paterson University",alt:"WPUNJ"},{url:"http://library.wmpenn.edu:2048/login?url=$@",name:"William Penn University"},{url:"http://wsuproxy.mnpals.net/login?url=$@",name:"Winona State University"},{url:"http://ezproxy.woodbury.edu:880/login?url=$@",name:"Woodbury University"},{url:"http://ezproxy.wpi.edu/login?url=$@",name:"Worcester Polytechnic Institution",alt:"WPI"},{url:"http://wrs.idm.oclc.org/login?url=$@",name:"Wright-Patterson AFB (AFRL D'Azzo Research Library)"},{url:"http://libproxy.xu.edu:2048/login?url=$@",name:"Xavier University",alt:"XU"},{url:"https://ezproxy.xula.edu/login?url=$@",name:"Xavier University of Louisiana"},{url:"http://elibrary.einstein.yu.edu/login?url=$@",name:"Yeshiva University, Albert Einstein College of Medicine"},{url:"http://ezproxy.library.yorku.ca/login?url=$@",name:"York University"},{url:"https://ha.idm.oclc.org/login?url=$@",name:"\xc5land University of Applied Sciences"},{url:"http://proxy.rubens.ens.fr/login?url=$@",name:"\xc9cole normale sup\xe9rieure"}],getEZProxyUrlPP:function(){var e="";return this.proxies.forEach((function(t){"Paperpile"==t.name&&(e=t.url)})),e},getLoginUrls:function(){var e=[];return this.proxies.forEach((function(t){t.url&&e.push(t.url)})),e},getListOfProxies:function(){var e=[];return this.proxies.forEach((function(t){var r=!0;"Paperpile"==t.name&&(r=!(!m.Globals.isDev()&&!m.Globals.isStaging())),r&&e.push(t)})),e},getDomainsOfProxies:function(){var e=[],t=[];return m.crawling.ProxyControl&&m.crawling.ProxyControl.getActiveProxies().forEach((function(e){t.push({url:e})})),t.concat(this.proxies).forEach((function(t){if(t.url){var r=m.crawling.Proxy.getDomain(t.url).domain.split(/\./);if(r.length>=2){var a=[r.pop()];a.unshift(r.pop()),a[0].match(/^(ac|edu|org)$/i)&&r.length>0&&a.unshift(r.pop()),e.push(a.join("."))}}})),e},buildDomainsOfProxiesRegExp:function(){var e=this.getDomainsOfProxies().join("|").replace(/\./g,"\\.");this._domainsOfProxiesRegExp=new RegExp("("+e+")")},getDomainsOfProxiesRegExp:function(){return this._domainsOfProxiesRegExp||this.buildDomainsOfProxiesRegExp(),this._domainsOfProxiesRegExp}}),g(m.crawling,"_ProxyList","ProxyList"),m.backend._Settings=m.Class.extend({includes:[m.Events,m.Data],fields:[{name:"_id",type:"string",defaultValue:""},{name:"abtest",type:"int",defaultValue:0},{name:"created",type:"int",defaultValue:0},{name:"google_id",type:"string",defaultValue:""},{name:"google_access_token",type:"string",defaultValue:""},{name:"google_authorized_contacts",type:"int",defaultValue:"0"},{name:"google_refresh_token",type:"string",defaultValue:""},{name:"google_given_name",type:"string",defaultValue:""},{name:"google_family_name",type:"string",defaultValue:""},{name:"google_name",type:"string",defaultValue:""},{name:"google_email",type:"string",defaultValue:""},{name:"google_photo_url",type:"string",defaultValue:""},{name:"google_public_link",type:"string",defaultValue:""},{name:"proxy_list",type:"string",defaultValue:""},{name:"autoDownloadPDFs",defaultValue:1},{name:"downloadPreprints",defaultValue:1},{name:"citation_includeDOI",defaultValue:0},{name:"citation_citationStyle",type:"string",defaultValue:"http://www.zotero.org/styles/chicago-author-date"},{name:"citation_citationStyleFilename",type:"string",defaultValue:"chicago-author-date.csl"},{name:"citation_citationStyleLabel",type:"string",defaultValue:"Chicago Manual of Style (author-date)"},{name:"citation_lastUsedFormat",type:"string",defaultValue:"plain"},{name:"citation_htmlFormat",type:"string",defaultValue:"plain"},{name:"citation_locale",type:"string",defaultValue:"default"},{name:"citation_useLegalAbbreviations",defaultValue:1},{name:"metapdf_colors",defaultValue:""},{name:"bibtex_dialect",type:"string",defaultValue:"bibtex"},{name:"bibtex_config",type:"string",defaultValue:"{}"},{name:"biblatex_config",type:"string",defaultValue:"{}"},{name:"bibtex_citationCommand",defaultValue:"\\cite"},{name:"bibtex_doubleDash",defaultValue:1},{name:"bibtex_escapeUTF8",defaultValue:1},{name:"bibtex_exportAbstract",defaultValue:1},{name:"bibtex_exportAffiliation",defaultValue:0},{name:"bibtex_exportDay",defaultValue:0},{name:"bibtex_exportKeywords",defaultValue:1},{name:"bibtex_exportIdentifiers",defaultValue:0},{name:"bibtex_exportFilePath",defaultValue:0},{name:"bibtex_exportFoldersLabels",defaultValue:0},{name:"bibtex_exportNotes",defaultValue:0},{name:"bibtex_exportUrls",defaultValue:0},{name:"bibtex_preserveTitles",defaultValue:0},{name:"bibtex_useFullJournalName",defaultValue:0},{name:"bibtex_prettyPrint",defaultValue:1},{name:"bibtex_smartQuote",defaultValue:1},{name:"citation_key_config",type:"string",defaultValue:"{}"},{name:"gdrive_config",type:"string",defaultValue:"{}"},{name:"gdrive_syncEnabled",defaultValue:0},{name:"gdrive_quotaTotal",type:"int",defaultValue:"0"},{name:"gdrive_quotaUsed",note:"bytes used by all Google services.",type:"int",defaultValue:"0"},{name:"gdrive_quotaUsedByDrive",note:"Bytes used only by Google Drive",type:"int",defaultValue:"0"},{name:"gdrive_quotaTrashUsed",type:"int",defaultValue:"0"},{name:"gdrive_largestChangeId",type:"int",defaultValue:"-1"},{name:"gdrive_paperpileFileCount",type:"int",defaultValue:"0"},{name:"gdrive_paperpileFileSize",note:"Total size of Paperpile usage",type:"int",defaultValue:"0"},{name:"gdrive_paperpileFolderId",type:"string",defaultValue:""},{name:"gdrive_lock",type:"int",defaultValue:"0"},{name:"localstorage_fileCount",type:"int",defaultValue:"0"},{name:"localstorage_totalFileSize",type:"int",defaultValue:"0"},{name:"guide_flags_anyArticlesAddedYet",type:"int",defaultValue:"0"},{name:"guide_flags_seenAttachmentsYet",type:"int",defaultValue:"0"},{name:"guide_hide_cloudSyncHoverPanel",type:"int",defaultValue:"0"},{name:"guide_hide_cloudSyncWindow",type:"int",defaultValue:"0"},{name:"guide_hide_webImportThroughDatabases",type:"int",defaultValue:"0"},{name:"promotion_optin",type:"int",defaultValue:1},{name:"ui_label_sort",type:"string",defaultValue:"count"},{name:"ui_settings",type:"string",defaultValue:"{}"},{name:"webimport_arxivButtons",defaultValue:"1"},{name:"webimport_baseButtons",defaultValue:"1"},{name:"webimport_ericSearchButtons",defaultValue:"1"},{name:"webimport_dimensionsButtons",defaultValue:"1"},{name:"webimport_EBSCOButtons",defaultValue:"1"},{name:"webimport_googlePatentsButtons",defaultValue:"1"},{name:"webimport_googleScholarButtons",defaultValue:"1"},{name:"webimport_googleSearchButtons",defaultValue:"1"},{name:"webimport_googleScholarCitationsButtons",defaultValue:"1"},{name:"webimport_pubMedButtons",defaultValue:"1"},{name:"webimport_engineeringVillageButtons",defaultValue:"1"},{name:"webimport_inspireButtons",defaultValue:"1"},{name:"webimport_jstorButtons",defaultValue:"1"},{name:"webimport_IEEEXploreButtons",defaultValue:"1"},{name:"webimport_ACMButtons",defaultValue:"1"},{name:"webimport_OvidButtons",defaultValue:"1"},{name:"webimport_WoKButtons",defaultValue:"1"},{name:"webimport_ProQuestButtons",defaultValue:"1"},{name:"webimport_deepdyveButtons",defaultValue:"1"},{name:"webimport_ScopusButtons",defaultValue:"1"},{name:"webimport_semanticScholarButtons",defaultValue:"1"},{name:"webimport_libraryCatalogButtons",defaultValue:"1"},{name:"webimport_worldCatButtons",defaultValue:"1"},{name:"webimport_socialButtons",defaultValue:"1"},{name:"webimport_paperpileShareButtons",defaultValue:"1"},{name:"webimport_connectedpapersButtons",defaultValue:"1"},{name:"webimport_researchrabbitButtons",defaultValue:"1"},{name:"webimport_litmapsButtons",defaultValue:"1"},{name:"writing_injectDocsScripts",defaultValue:"1"},{name:"writing_usedPluginYet",defaultValue:"0"},{name:"writing_lastUsedPluginAt",defaultValue:"0"},{name:"beta",defaultValue:"0"},{name:"is_beta_user",defaultValue:"0"},{name:"beta_features",type:"string",defaultValue:"{}"},{name:"new_features_notification",defaultValue:""},{name:"search_settings",defaultValue:"{}"},{name:"site",defaultValue:"personal"},{name:"site_email",defaultValue:""},{name:"site_verified_date",defaultValue:0},{name:"last_active",defaultValue:0},{name:"labs_user",defaultValue:0},{name:"license_activated",defaultValue:0},{name:"license_forever_free",defaultValue:0},{name:"license_id",defaultValue:""},{name:"license_seat_type",defaultValue:""},{name:"license_trial_ends",defaultValue:0},{name:"license_grace_period_ends",defaultValue:0},{name:"license_cancelled",defaultValue:0},{name:"pubview_preferredViewer",note:"Which viewer type is preferred",defaultValue:"pubview"},{name:"changes_largestChange",type:"int",defaultValue:0},{name:"newsfeed",type:"string",defaultValue:"{}"},{name:"disabled_webimport",defaultValue:[]}],ignoredFields:["feature_access","libraries","license_revoked","license_trial_extended","organization","intercom_hash"],debug:!0,allowNonFieldValues:!0,initialize:function(){m.Msg.on("message",this.onMessage,this),this.settingsLoaded=!1},doWhenSettingsLoaded:function(e){this.isLoaded()?m.Utils.callback(e):this.on("load",e)},startListeningToChromeStorage:function(){p.chrome&&p.chrome.storage&&(m.Globals.isBackgroundPage()||p.isListeningToChromeStorage||(p.isListeningToChromeStorage=!0,p.chrome.storage.onChanged.addListener(m.Utils.bind(this.onStorageUpdate,this))))},onStorageUpdate:function(e,t){if(e[this.getStorageKey()]){var r=this.getSettings(),a=e[this.getStorageKey()].newValue;this.apply(a),this.fire("update",{oldData:r,newData:a})}},isLoaded:function(){return!!this.get("_id")},onMessage:function(e){var t=e.msg;t.settings&&(this.apply(t.settings),this.settingsLoaded=!0,this.fire("load"))},getSettings:function(){return this.serialize()},getSetting:function(e){return this.get(e)},getBoolean:function(e){var t=this.get(e);return 1===parseInt(t)},getStorageKey:function(){return"PP.backend.Settings"},setSetting:function(e,t,r){var a=this.get("_id");if(a){"beta_features"!==e&&"gdrive_config"!==e||(t=this._setJSONSetting(t));var i={};i[e]=t,this.updateSettings(a,i,r)}else console.log("No ID for settings update!")},_getJSONSetting:function(e){var t=this.get(e),r={};if(m.Utils.isString(t))try{r=JSON.parse(t)}catch(e){}return m.Utils.isObject(r)||(r={}),r},_setJSONSetting:function(e){var t="{}";return m.Utils.isString(e)?t=e:m.Utils.isObject(e)&&(t=JSON.stringify(e)),t},getGoogleDriveConfig:function(){return this._getJSONSetting("gdrive_config")},getCitationKeyConfig:function(){return this._getJSONSetting("citation_key_config")},getSearchSettings:function(){return this._getJSONSetting("search_settings")},hasBetaFeature:function(e){var t=this._getJSONSetting("beta_features"),r=!1;return e&&m.Utils.isString(e)&&(!0!==t[e]&&1!==t[e]&&"1"!==t[e]||(r=!0),e.match(/whitelisted$/i)&&this.hasBetaFeature("isStaff")&&(r=!0)),r},activateBetaFeature:function(e,t){var r=this._getJSONSetting("beta_features");r[e]=1,this.setSetting("beta_features",r,t)},deactivateBetaFeature:function(e,t){var r=this._getJSONSetting("beta_features");r[e]=0,this.setSetting("beta_features",r,t)},setSettings:function(e,t){var r=this.get("_id");r?this.updateSettings(r,e,t):console.log("No ID for settings update!")},updateSettings:function(e,t,r){var a;for(var i in t.unset&&(a=t.unset,delete t.unset),t)this.set(i,t[i]);var n={action:"update",mcollection:"Users",what:{_id:e},how:{$set:t}};0===Object.keys(t).length&&delete n.how.$set,a&&(n.how.$unset=a),delete t._id,delete t.google_id,m.Ajax.request({url:m.Globals.url("/ajax/crud/query"),params:{query:m.Utils.encode(n)},scope:this,callback:function(e,t,a){if("success"!==t)console.error("Settings update ajax fail"),m.Utils.callback(r,this,[null,"Settings update ajax fail"]);else{var i=e;m.backend.Utils.applyUpdates(i),m.backend.Utils.broadcastUpdates(i);var n=this.serialize();m.Utils.callback(r,this,[n,null])}}})},insertDefaults:function(e,t){var r=this.getDefaults();this.updateSettings(e,r,t)},load:function(e,t){if(this.loading=!0,e){var r=this.get("google_id")||m.Session.get("google_id"),a=this.get("_id")||m.Session.get("user_id"),i=this.get("google_email")||m.Session.get("google_email");this.get("google_name")||m.Session.get("google_name");m.Ajax.request({url:m.Globals.url("/ajax/app/get_user_settings"),params:{google_id:r,user_id:a,google_email:i},scope:this,callback:function(e,r,a){if(this.loading=!1,"success"!==r||e&&!e.settings){var i;"success"==r&&e&&!e.settings?(i="No settings object in response",m.log({type:"exception",subtype:"Settings Load",msg:"No settings object in response.",ajaxResponse:e,ajaxStatus:r,jqXhrStatus:a.status})):(i=e,401===a.status?i="Unauthorized!":(i="Server error",m.log({type:"error",subtype:"Settings Load",msg:"Paperpile server gave a non-success response: "+i,ajaxStatus:r,jqXhrStatus:a.status,stack:m.Utils.stackTrace()}))),m.Utils.callback(t,this,[null,"Settings load ajax fail: "+i])}else{var n=e.settings;this.ignoredFields.forEach((function(e){delete n[e]})),this.loadSettingsData(n,t)}}})}else console.log("Settings.load requires a user ID!! Load the session info first.")},loadSettingsData:function(e,t){e._id;if(this.sendFakeCrudResponse(e),this.settingsNeedFixing(e)){this.c.log("  Settings need adjustment -- updating with default values or removing extra settings");var r=this;this.applyAdjustments(e,(function(){r.settingsLoaded=!0,this.fire("load");var e=r.serialize();r.sendFakeCrudResponse(e),m.Utils.callback(t,this,[e,null])}))}else m.Utils.callback(t,this,[e,null]),this.settingsLoaded=!0,this.fire("load");(p||self).dispatchEvent(new CustomEvent("ppSettingsLoaded",{detail:e}))},sendFakeCrudResponse:function(e){var t={response:[{mcollection:"Users",action:"list",data:[e]}]};m.backend.Utils.applyUpdates(t),m.backend.Utils.broadcastUpdates(t)},settingsNeedFixing:function(e){var t=this.getSettingAdjustments(e);return Object.keys(t).length>0},getSettingAdjustments:function(e){var t=this.fields,r={},a={};for(var i in t.forEach((function(t){var i=t.name;a[i]=!0,void 0===e[i]&&!1!==t.persist&&(r[i]=t.defaultValue)})),e)!0!==a[i]&&(void 0===r.unset&&(r.unset={}),r.unset[i]=1);return r},applyAdjustments:function(e,t){this.getDefaults();var r=this.getSettingAdjustments(e);["_id","google_id","google_email","google_access_token","google_refresh_token"].forEach((function(e){void 0!==r[e]&&delete r[e],r.unset&&void 0!==r.unset[e]&&delete r.unset[e]})),this.c.log("  Inserting setting adjustments into Settings DB"),this.c.log(m.pp(r)),this.updateSettings(e._id,r,t)},applyUpdates:function(e){for(var t=m.Session.get("user_id"),r=0;r<e.length;r++){var a=e[r];if("Users"===a.mcollection){var i=this.serialize();if("update"===a.action||"list"===a.action){var n="updates";"list"===a.action&&(n="data"),a[n]||console.error("Bad key for applyUpdates",a,n);for(var o=0;o<a[n].length;o++){var s=a[n][o];if(s._id!==t)console.error("ID mismatch for settings applyUpdates!");else for(var l in s)this.hasKey(l)&&(!0,this.set(l,s[l]))}this.fire("update",{oldData:i,newData:this.serialize()})}else console.error("bad Settings response -- wazzat?")}}}}),g(m.backend,"_Settings","Settings"),m.backend._LocalAttachments=m.Class.extend({debug:!1,includes:[m.Data,m.Events],fields:[{name:"attachmentMap",type:"object",defaultValue:{}}],create:function(e,t,r){var a=this,i=this.getExpectedFolder(e);m.TestFlags.filesystemUseLegacyLocalAttachments()?m.files.Files.getFile(i,t.name,(function(i,n){if(n)m.Utils.callback(r,null,[null,n]);else{var o={attachment_id:e._id,md5:t.md5,id:t.name,url:t.url};a.setLegacyAttachment(o);var s=m.Utils.clone(o);s.fileEntry=i,m.Utils.callback(r,null,[s,null])}})):a.renameFile(e,t.name,r)},getLocalFileEntry:function(e,t,r){var a=this;r?!1!==r.attemptDriveDownload&&(r.attemptDriveDownload=!0):r={};var i=function(){a.getAttachmentFileEntry(e,(function(r,i){i?m.IndexedDB.getFile(e._id,(function(r){r?a.copyFromIndexedDB(e,r,(function(e,r){r?m.Utils.callback(t,null,[null,i+" / "+r]):m.Utils.callback(t,null,[e,null])})):a.downloadFileFromS3(e,(function(e,r){r?m.Utils.callback(t,null,[null,i+" / "+r]):m.Utils.callback(t,null,[e,null])}))})):m.Utils.callback(t,null,[r,null])}))},n=a.getLegacyAttachmentInfo(e._id);n?a.renameFile(e,n.id,(function(e,r){r?(a.removeFromLegacyMap(n),i()):(a.removeFromLegacyMap(n),m.Utils.callback(t,null,[e.fileEntry,null]))})):i()},getLocalFileUrl:function(e,t,r){this.getLocalFileEntry(e,(function(e,r){r?m.Utils.callback(t,null,[null,r]):m.Utils.callback(t,null,[e.toURL(),null])}),r)},load:function(){delete p.localStorage["PP.backend.LocalAttachments"],this.loadFromLocalStorage(),this.attachmentMap||(this.attachmentMap={},this.saveToLocalStorage()),this.attachmentMap[void 0]&&(delete this.attachmentMap[void 0],this.saveToLocalStorage())},getStorageKey:function(){return m.Session.isLoaded()?"PP.backend.LocalAttachments."+m.Session.get("user_id"):null},getLegacyAttachmentInfo:function(e){return this.attachmentMap&&this.attachmentMap[e]?this.attachmentMap[e]:null},getExpectedFolder:function(e){return"pp_attachments"},getAttachmentFileEntry:function(e,t){var r=this.getExpectedFolder(e);m.TestFlags.testLocalAttachmentNotFoundErrors()&&(e._id="asdf",e.gdrive_id=""),m.files.Files.getFile(r,e._id,(function(e,r){r?m.Utils.callback(t,null,[null,r]):m.Utils.callback(t,null,[e,null])}))},copyFromIndexedDB:function(e,t,r){m.files.Files.writeBlobToFile(t.blob,e._id,"",t["mime-type"],t.md5,e.filename,(function(t,a){m.backend.LocalAttachments.create(e,t,(function(e,t){t?m.Utils.callback(r,null,[null,t]):m.Utils.callback(r,null,[e.fileEntry,null])}))}))},downloadFileFromS3:function(e,t){e.gdrive_id||e.s3_md5?m.cloud.S3.download(e._id,"latest",[],(function(r,a){!a&&r?m.files.Files.getBlobMd5(r,(function(a,i){i?m.Utils.callback(t,null,[null,"Error calculating MD5 sum."]):m.files.Files.writeBlobToFile(r,e._id,"","application/pdf",a,e.filename,(function(r,a){m.backend.LocalAttachments.create(e,r,(function(e,r){r?m.Utils.callback(t,null,[null,r]):m.Utils.callback(t,null,[e.fileEntry,null])}))}))})):m.Utils.callback(t,null,[null,a.msg])}),(function(t){if(t.lengthComputable){var r=t.loaded/t.total;m.Msg.sendMessage({attachmentId:e._id,attachmentCacheProgress:!0,attachmentCacheProgressPercent:r})}else m.Msg.sendMessage({attachmentId:e._id,attachmentCacheProgress:!0,attachmentCacheProgressBytes:t.loaded})})):m.Utils.callback(t,null,[null,"Download: file is neither synced to Google Drive nor S3."])},downloadFileFromDrive:function(e,t){if(m.library.Attachment.isSynced(e)){var r=e.owner!=m.Session.get("user_id"),a=function(a,i){if(i)m.Utils.callback(t,null,[null,"Drive download: error getting file's download URL"]);else{var n={};if(!r)n={Authorization:"Bearer "+m.cloud.Google.accessToken};var o={url:a,id:e._id,headers:n,progress:function(t){if(t.lengthComputable){var r=t.loaded/t.total;m.Msg.sendMessage({attachmentId:e._id,attachmentCacheProgress:!0,attachmentCacheProgressPercent:r})}else m.Msg.sendMessage({attachmentId:e._id,attachmentCacheProgress:!0,attachmentCacheProgressBytes:t.loaded})},callback:function(r,a){if(a)m.Utils.callback(t,null,[null,"Error downloading Drive file or saving to local filesystem: files.Download error "+a]);else{delete r.filesystem;var i=m.Utils.clone(r);m.backend.LocalAttachments.create(e,i,(function(e,r){r?m.Utils.callback(t,null,[null,r]):m.Utils.callback(t,null,[e.fileEntry,null])}))}}};m.files.Download.download(o)}};if(1==m.TestFlags.testLocalAttachmentDriveDownloadFailure()&&((e=m.Utils.clone(e)).gdrive_id="asdfasdf"),e.owner!=m.Session.get("user_id")){var i=m.Globals.getSharedAttachmentUrl(e);m.Utils.callback(a,null,[i,null])}else m.cloud.Google.getDownloadUrl(e,a)}else m.Utils.callback(t,null,[null,"Drive download: file is not synced online."])},removeFromLegacyMap:function(e){if(!m.TestFlags.filesystemTestFailedLegacyRemoval()){delete this.attachmentMap[e.attachment_id],delete this.attachmentMap[e.id];try{this.saveToLocalStorage(!0)}catch(e){console.error("Error saving to local storage after legacy removal!"),m.log({type:"exception",subtype:"Local Attachments",msg:"Error removing legacy attachment: "+e.message})}}},setLegacyAttachment:function(e){var t=e.attachment_id,r=e.id;this.attachmentMap[t]=e,this.attachmentMap[r]=e,this.saveToLocalStorage(!0)},renameFile:function(e,t,r){var a=this,i=this.getExpectedFolder(e);m.files.Files.getFile(i,t,(function(i,n){if(n)m.Utils.callback(r,null,[null,n]);else{if(e._id==t){var o={attachment_id:e._id,id:t,url:i.toURL(),fileEntry:i};return void m.Utils.callback(r,null,[o,null])}a.removeFileEntryIfExists(e,(function(t,a){a?m.Utils.callback(r,null,[null,a]):m.files.Files.rename(i,e._id,(function(t,a){if(a)m.log({type:"exception",subtype:"Local Attachments",msg:"Error renaming / moving local attachment: "+a}),m.Utils.callback(r,null,[null,a]);else{var i={attachment_id:e._id,id:e._id,url:t.toURL(),fileEntry:t};m.Utils.callback(r,null,[i,null])}}))}))}}))},removeFileEntryIfExists:function(e,t){this.getAttachmentFileEntry(e,(function(e,r){r?m.Utils.callback(t,null,[!1,null]):m.files.Files.removeFiles([e],(function(e,r){r?m.Utils.callback(t,null,[!1,r]):m.Utils.callback(t,null,[!0,null])}))}))},deleteSyncedAttachments:function(e){this.deleteAttachments(!0,e)},deleteAllAttachments:function(e){this.deleteAttachments(!1,e)},deleteAttachments:function(e,t){var r=this;m.backend.Attachments.getAllAttachments(!1,[],(function(a){if(a&&!a.error){m.log({type:"event",subtype:"Clean Local Attachments",msg:"User clicked to clean up locally-cached files"}),m.Utils.callSerially([function(t){console.log("Handling local attachments");var i={};a.data.forEach((function(e){i[e._id]=e}));var n=[];for(var o in r.attachmentMap){var s=r.attachmentMap[o],l=i[s.attachment_id];l?e?r.isAttachmentSafelySynced(l)?n.push(s):console.log("Not safe to delete attachment",s,l):n.push(s):n.push(s)}var c=function(e){if(e)m.Utils.callback(t,null,[null,e]);else if(0===n.length)r.saveToLocalStorage(),m.Utils.callback(t);else{var a=n.shift();console.log("Removing legacy attachment "+a.id),delete r.attachmentMap[a.id],delete r.attachmentMap[a.attachment_id],r.deleteFile(a,c)}};c()},function(e){console.log("Handling new attachments");var t=m.Utils.clone(a.data),i=function(){if(0==t.length)m.Utils.callback(e);else{var a=t.shift();r.isAttachmentSafelySynced(a)?r.removeFileEntryIfExists(a,(function(e,t){t||e&&console.log("Removed attachment "+a._id),m.Utils.callback(i,null)})):m.Utils.callback(i,null)}};m.Utils.callback(i,null)}],(function(e,r){r?(m.log({type:"exception",subtype:"Local Attachments",msg:"Error cleaning local attachments: "+r}),m.Utils.callback(t,null,[null,r])):(console.log("Finished cleaning local attachments"),m.Utils.callback(t,null,["Local storage cleaned",null]))}))}else m.Utils.callback(t,null,[null,"Error getting attachments"])}))},deleteNonAttachmentFiles:function(e){var t=this;m.backend.Attachments.getAllAttachments(!1,[],(function(r){if(r&&!r.error){var a={};r.data.forEach((function(e){a[e._id]=e})),m.files.Files.getFiles("pp_attachments",(function(r,i){if(i)m.Utils.callback(e,null,[null,"Error getting files for deleting non-attachment files"]);else{var n=[];r.forEach((function(e){var r=e.name;a[r]?console.log("FileEntry looks like one of our own attachments... ok!"):t.attachmentMap[r]?console.log("FileEntry has a legacy attachment of our own... ok!"):(console.log("FileEntry has no matching attachment of our own!"),n.push(e))})),n.length>0?m.files.Files.removeFiles(n,(function(t,r){r?m.Utils.callback(e,null,[null,r]):m.Utils.callback(e,null,["Removed "+t+" non-attachment files",null])})):m.Utils.callback(e,null,["No non-attachment files to remove",null])}}))}else m.Utils.callback(e,null,[null,"Error getting attachments"])}))},isAttachmentSafelySynced:function(e){return!!(1==e.deleted||e.gdrive_id&&!e.gdrive_needs_sync||e.s3_md5)},deleteFile:function(e,t){var r=e.id;m.files.Files.getFile("pp_attachments",r,(function(e,r){r?m.Utils.callback(t,null,[null,r]):e.remove(t,(function(e){m.files.Files.fileErrorHandler(t,"Error removing LocalAttachment file",e)}))}))}}),g(m.backend,"_LocalAttachments","LocalAttachments"),m.files._Files=m.Class.extend({quota:104857600,getFileSystem:function(e){var t=this;p.webkitRequestFileSystem(1,t.quota,(function(t){m.Utils.callback(e,null,[t,null])}),(function(r){t.fileErrorHandler(e,"Error getting filesystem",r)}))},getBlobMd5:function(e,t){var r=new FileReader,a=Math.ceil(e.size/2097152),i=0,n=new SparkMD5,o=function(){var t=2097152*i,a=t+2097152>=e.size?e.size:t+2097152;r.readAsBinaryString(e.slice(t,a))};n.reset(),r.onload=function(e){if(n.appendBinary(e.target.result),++i<a)o();else{var r=n.end();m.Utils.callback(t,null,[r,null])}},o()},writeDataToFile:function(e,t,r,a,i,n){var o=new SparkMD5;o.reset(),o.append(e);var s=o.end(),l=new Blob([e],{type:a});this.writeBlobToFile(l,t,r,a,s,i,n)},writeBlobToFile:function(e,t,r,a,i,n,o){var s=this,l=e.size;a=a||"application/octet-stream";r?(r=r.replace(/\./g,""),n+="."+r):"application/pdf"===a&&(n+=".pdf");var c={parentDir:"pp_attachments",name:t};s.createFile(c,(function(t,r){if(r)m.Utils.callback(o,null,[null,r]);else{var c=t.fileWriter,u=t.file,d=!1;c.onwriteend=function(){if(0===c.length&&d)console.log("Truncating file is finished, calling actual write"),c.write(e);else{console.log("Actual writing finished");var t={};t.name=u.name,t.url=u.toURL(),t.originalName=n,t.md5=i,t.size=l,t.type=a,m.Utils.callback(o,null,[t,null])}},c.onerror=function(e){c.error&&c.error.name&&c.error.message&&(e=c.error),s.fileErrorHandler(o,"Error writing file in writeBlobToFile",e)},l>0?(d=!0,c.truncate(0)):c.write(e)}}))},createFile:function(e,t){var r=this;e.parentDir||(e.parentDir="pp_attachments"),m.Utils.isString(e.parentDir)?r.getOrCreateDirectory(e.parentDir,(function(a,i){i?m.Utils.callback(t,null,[null,i]):r.createWithinDirEntry(a,e,t)})):m.Utils.callback(t,null,[null,"Error -- parentDir param must be a string!"])},createWithinDirEntry:function(e,t,r){var a=this;if(t.name){var i=t.name;e.getFile(i,{create:!0},(function(e){e.createWriter((function(t){m.Utils.callback(r,null,[{file:e,fileWriter:t},null])}),(function(e){a.fileErrorHandler(r,"Error creating FileWriter",e)}))}),(function(e){a.fileErrorHandler(r,"Error creating file within directory",e)}))}else console.error("ERROR CREATING FILE, filenames must be specified as 'name' param")},getFile:function(e,t,r){var a=this;a.getOrCreateDirectory(e,(function(e,i){i?m.Utils.callback(r,null,[null,i]):e.getFile(t,{create:!1},(function(e){m.Utils.callback(r,null,[e,null])}),(function(e){"NotFoundError"==e.name||void 0!==e.code&&e.code==FileError.NOT_FOUND_ERR?m.Utils.callback(r,null,[null,"Error getting file ["+e.name+": "+e.message+"]"]):a.fileErrorHandler(r,"Error getting file",e)}))}))},getMultipleFiles:function(e,t,r){var a=m.Array.mapBoolean(t);this.getFiles(e,(function(e,t){if(t)m.Utils.callback(r,null,[null,t]);else{for(var i=[],n=0;n<e.length;n++){var o=e[n];a[o.name]&&i.push(o)}m.Utils.callback(r,null,[i,null])}}))},getFileAsBlob:function(e,t){var r=this;e.file((function(e){r.getBlobMd5(e,(function(a,i){i?m.Utils.callback(t,r,[null,"getBlob failed "+i]):m.Utils.callback(t,r,[{blob:e,md5:a,mimeType:e.type},null])}))}),(function(e){r.fileErrorHandler(t,"Error getting file for FileEntry",e)}))},rename:function(e,t,r){var a=this;e.getParent((function(i){e.moveTo(i,t,(function(e){m.Utils.callback(r,null,[e,null])}),(function(e){a.fileErrorHandler(r,"Error renaming file",e)}))}),(function(e){a.fileErrorHandler(r,"Error getting file parent",e)}))},moveTo:function(e,t,r){var a=this;a.getOrCreateDirectory(t,(function(t,i){i?m.Utils.callback(r,null,[null,i]):e.moveTo(t,null,(function(e){m.Utils.callback(r,null,[e,null])}),(function(e){a.fileErrorHandler(r,"Error moving file",e)}))}))},getOrCreateDirectory:function(e,t){var r=this;m.Utils.isString(e)?(r.directoryCache||(r.directoryCache={}),r.directoryCache[e]?m.Utils.callback(t,null,[r.directoryCache[e],null]):r.getUserDirectory((function(a,i){i?m.Utils.callback(t,null,[null,i]):a.getDirectory(e,{create:!0},(function(a){r.directoryCache[e]=a,m.Utils.callback(t,null,[a,null])}),(function(e){r.fileErrorHandler(t,"Error getting directory",e)}))}))):m.Utils.callback(t,null,[e,null])},getAttachmentsDirectory:function(e){this.getOrCreateDirectory("pp_attachments",e)},getExportDirectory:function(e){this.getOrCreateDirectory("pp_export",e)},getTempDirectory:function(e){this.getOrCreateDirectory("pp_temp",e)},createTempFiles:function(e,t){var r=this,a=[],i=function(){if(0===e.length)m.Utils.callback(t,null,[a,null]);else{var n=e.shift();r.getBlobMd5(n,(function(e,o){if(o)m.Utils.callback(t,null,[null,o]);else{var s=m.UUID.generate(),l={parentDir:"pp_temp",name:s};r.createFile(l,(function(o,l){if(l)m.Utils.callback(t,null,[null,l]);else{var c=o.file,u=o.fileWriter;a.push({parentDir:"pp_temp",name:s,originalName:n.name,originalPath:n.webkitRelativePath,md5:e,size:n.size,type:n.type,url:c.toURL()}),u.onwriteend=i,u.onerror=function(e){u.error&&u.error.name&&u.error.message&&(e=u.error),r.fileErrorHandler(t,"Error writing file in createTempFiles",e)},u.write(n)}}))}}))}};i()},getUserDirectory:function(e){var t=this,r=m.Session.get("user_id");if(!r){m.Utils.callback(e,null,[null,"Error: no user_id for getting user directory!"])}var a=r;t.getFileSystem((function(r,i){i?m.Utils.callback(e,null,[null,i]):r.root.getDirectory(a,{create:!0},(function(t){m.Utils.callback(e,null,[t,null])}),(function(r){t.fileErrorHandler(e,"Error getting/creating user directory",r)}))}))},getAllFiles:function(e){var t=this;t.getUserDirectory((function(r,a){a?m.Utils.callback(e,null,[null,a]):t.getFilesRecursively(r,e)}))},getFilesRecursively:function(e,t){var r=this,a=[],i=[e],n=function(){if(0===i.length)r.getAllMetadata(a,t);else{var e=i.shift();r.getFiles(e,(function(r,o){if(o)m.Utils.callback(t,null,[null,o]);else{a.push(e);for(var s=0;s<r.length;s++)r[s].isDirectory?i.push(r[s]):a.push(r[s]);n()}}))}};n()},getAllMetadata:function(e,t){var r=this,a=0,i=function(){if(a===e.length)m.Utils.callback(t,null,[e,null]);else{var n=e[a];n.getMetadata((function(e){n.fileSize=e.size,n.modificationTime=e.modificationTime,a++,i()}),(function(e){r.fileErrorHandler(t,"Error getting file metadata",e)}))}};i()},getFiles:function(e,t){var r=this;if(m.Utils.isString(e))r.getOrCreateDirectory(e,(function(e,a){a?m.Utils.callback(t,null,[null,a]):r.getFiles(e,t)}));else{var a=e.createReader(),i=[],n=function(){a.readEntries((function(e){var a;e.length?(i=i.concat((a=e,Array.prototype.slice.call(a||[],0))),n()):m.Utils.callback(t,r,[i,null])}),(function(e){r.fileErrorHandler(t,"Error reading files within directory",e)}))};n()}},removeAllFiles:function(e){var t=this;t.getUserDirectory((function(r,a){a?m.Utils.callback(e,null,[null,a]):t.removeRecursively(r,e)}))},removeTempFiles:function(e){var t=this;t.getTempDirectory((function(r,a){a?m.Utils.callback(e,null,[null,a]):t.removeRecursively(r,e)}))},removeExportFiles:function(e){var t=this;t.getExportDirectory((function(r,a){a?m.Utils.callback(e,null,[null,a]):t.removeRecursively(r,e)}))},removeRecursively:function(e,t){var r=this;e.removeRecursively((function(){var a=e.name;r.directoryCache&&r.directoryCache[a]&&delete r.directoryCache[a],m.Utils.callback(t)}),(function(e){r.fileErrorHandler(t,"Error removing directory",e)}))},removeFiles:function(e,t){var r=this,a=0,i=function(){if(0===e.length)m.Utils.callback(t,null,[a,null]);else{var n=e.shift();n.isDirectory?i():(a++,n.remove(i,(function(e){r.fileErrorHandler(t,"Error removing file",e)})))}};i()},cleanLocalStorage:function(e){console.log("Cleaning local storage..."),m.Utils.callSerially([function(e){console.log("remove tmp"),m.files.Files.removeTempFiles(e)},function(e){console.log("remove export"),m.files.Files.removeExportFiles(e)},function(e){console.log("delete synced"),m.backend.LocalAttachments.deleteSyncedAttachments(e)},function(e){console.log("delete non-attachment files"),m.backend.LocalAttachments.deleteNonAttachmentFiles(e)},function(e){console.log("delete synced indexdb files"),m.IndexedDB.deleteSyncedFiles(e)},function(e){console.log("update storage"),m.files.Files.updateStorageInfo(e)}],(function(t,r){r?function(t){m.log({type:"exception",subtype:"Filesystem API",msg:"Error cleaning local storage: "+t}),m.Utils.callback(e,null,[null,t])}(r):m.Utils.callback(e,null,["Local storage cleaned",null])}))},updateStorageInfo:function(e){this.getStorageInfo((function(t,r){r?m.Utils.callback(e,null,[null,"Error listing files"]):m.backend.Settings.setSettings(t,(function(){m.Utils.callback(e)}))}))},getStorageInfo:function(e){var t=this;m.IndexedDB.getAllFiles((function(r){t.getAllFiles((function(t,a){if(a)m.Utils.callback(e,null,[null,"Error listing files"]);else{var i=[];t.forEach((function(e){e.isFile&&i.push(e)})),r&&r.length&&r.forEach((function(e){i.push(e)}));var n=0,o=0;i.forEach((function(e){n+=e.fileSize||e.size,o++}));var s={localstorage_fileCount:o,localstorage_totalFileSize:n};m.Utils.callback(e,null,[s,null])}}))}))},fileErrorHandler:function(e,t,r){if(!t||r){var a=t+" ["+r.name+": "+r.message+"]",i="";r&&r.toString&&(i=r.toString()),m.log({type:"exception",subtype:"Filesystem API",msg:a,fileErrorName:r.name,fileErrorMessage:r.message,fileErrorString:i,info:"Logged by the generic fileErrorHandler in PP.files.Files"}),m.Utils.callback(e,this,[null,a])}else console.error("Error in args to file error handler!",t,r)},logAllFiles:function(e){this.getAllFiles((function(t,r){r?(console.log("Error logging all files:",r),m.Utils.callback(e,null,[null,r])):(0===t.length?console.log("[No files in the HTML5 filesystem]"):console.log("[All files for user",m.Session.get("user_id"),"]"),t.forEach((function(e){var t="  "+e.fullPath,r=[];r.push(e.isDirectory?"(dir)":"(file)"),e.isDirectory||r.push(m.Utils.formatFileSize(e.fileSize)),t+="\n    "+r.join("\t"),console.log(t)})),m.Utils.callback(e,null,[t.length,null]))}))},isAbortError:function(e){return!(!e||void 0===e)&&(e.match(/abort_err/i)||e.match(/AbortError/i))}}),g(m.files,"_Files","Files"),m.library._Attachment=m.Class.extend({getFields:function(){return[{name:"_id",description:"Internal GUID"},{name:"owner",description:"User_id of the attachment owner (internal use)"},{name:"deleted",description:'flag for deleted / "hanging" attachments.'},{name:"filename",description:"File name (including extension, i.e. my_file.pdf)"},{name:"mimeType",description:"MIME type of the file"},{name:"source_filename",description:'The "source" filename, i.e. the original filename of the attached or downloaded file.'},{name:"article_pdf",description:"Flags an attachment as the article PDF. 1 if yes, otherwise 0."},{name:"pub_id",description:"The Paperpile GUID of the associated publication object."},{name:"pub_trashed",description:"1 if the associated pub is trashed."},{name:"filesize",description:"File size (in bytes)"},{name:"md5",description:"MD5 checksum of the file contents"},{name:"md5s",description:"Array of MD5 checksums of the PDF file that were written by the backend"},{name:"s3_md5",description:"MD5 checksum of the file when it was uploaded to S3"},{name:"s3_fingerprint",description:"encoded json string used for file comparison in backend"},{name:"description",description:"Description of the attachment (if any)"},{name:"gdrive_id",description:"ID of the cloud backup of the file (if any)"},{name:"gdrive_needs_sync",description:"Flag indicating whether google drive still needs to be synced."},{name:"gdrive_trashed",description:"ID of the cloud backup of the file (if any)"},{name:"gdrive_deleted",description:"ID of the cloud backup of the file (if any)"},{name:"subfolders",description:"List of subfolders this article should be stored in Google Drive."},{name:"web_url",description:"Online URL of the file (if any)"},{name:"download_progress",description:"The current download progress (if attachment is being downloaded)"},{name:"download_status",description:"The download state of the attachment (if being downloaded)"}]},autoClean:function(e,t){t._id||(t._id=m.UUID.generate());var r=m.Utils.clone(t);if(t.pub_id=e._id,t.owner=e.owner,t.owner,void 0===t.pub_id)throw new Error("Attachment pub_id cannot be undefined!");void 0===t.gdrive_needs_sync&&(t.gdrive_needs_sync=1),void 0===t.pub_trashed&&(t.pub_trashed=0),t.subfolders=e.subfolders||[],t.filename?t.filename=this.ensureFilenameContainsAuthorYear(e,t):t.filename=this.getDefaultFilename(e,t),t.filename=this.removeFilenameDoubleSuffix(t),t.filename=m.Utils.cleanFileName(t.filename);t.mimeType;this.couldBePdf(t)&&(m.library.Publication.getPdfAttachment(e)||(t.article_pdf=1,t.source_filename="[article_pdf].pdf",t.filename=this.getDefaultFilename(e,t),t.filename=m.Utils.cleanFileName(t.filename)));this.couldBePdf(t)&&(t.filename=this.ensureFilenameHasPdfSuffix(t)),m.Utils.deepEquals(r,t)||(t.hasUpdates=1)},removeFilenameDoubleSuffix:function(e){var t=e.filename;if(t&&t.match(/\.([^\.]{1,5})\.(\1)$/)){var r="."+RegExp.$1+"."+RegExp.$2,a="."+RegExp.$1;t=t.replace(r,a)}return t},ensureFilenameHasPdfSuffix:function(e){var t=e.filename;return t&&!t.match(/\.pdf$/i)&&(t+=".pdf"),t},ensureFilenameContainsAuthorYear:function(e,t){var r=t.filename;if("[article_pdf].pdf"===t.source_filename&&1==t.article_pdf)return this.getDefaultFilename(e,t);var a=m.library.Publication.formatAuthorYear(e),i=new RegExp(m.Utils.escapeRegex(a)+" - ","i");return r.match(i)||(r.match(/^(\w+\s+){1,4}- /)&&(r=r.replace(/^(\w+\s+){1,4}- /,"")),r=a+" - "+r),r},getDefaultFilename:function(e,t){var r,a,i=t.source_filename,n=/(?:\.([^.]+))?$/.exec(i)[1],o=m.library.Publication.formatAuthorYear(e);return r=e.title?m.Utils.ellipsis(e.title,200,!1,"[...]"):"[No title]",a="[article_pdf].pdf"===i?o+" - "+(r=r.replace(/\.pdf$/i,""))+"."+n:o+" - "+i,a=m.String.interconvertString(a,{format:"nomarkup"})},browserCanView:function(e){var t=!1;return e&&e.mimeType&&e.mimeType.match(/^(application.pdf|text|plain|image)/i)&&(t=!0),t},couldBePdf:function(e){var t=!1;return e.filename&&e.filename.match(/\.pdf/gi)&&(t=!0),e.mimeType&&e.mimeType.match(/application.pdf/i)&&(t=!0),t},getSyncServiceLink:function(e,t){if("gdrive"!==t&&console.error("Only support gdrive for now!"),"gdrive"===t){var r=[];e.forEach((function(e){e.gdrive_id&&r.push(e.filename)}));var a="https://drive.google.com/#search/",i=[];return r.forEach((function(e){i.push('title:"'+e+'"')})),query=i.join(" OR "),query=encodeURIComponent(query),a+=query,{n_links:r.length,url:a}}},openAttachment:function(e,t){var r,a=e.pub;if(e.attachment)r=e.attachment;else{if(!e.attachment_id)throw new Error("No attachment or attachment_id!");r=m.library.Publication.getAttachment(a,e.attachment_id)}var i=e.preferredViewer;if(i||(i=m.backend.Settings.get("pubview_preferredViewer")),p&&p.UAParser){var n=(new UAParser).getResult();n&&n.browser&&"major"in n.browser&&"pubview"==i&&"55"==n.browser.major&&(i="raw")}"drive"==i&&this.isSynced(r)?t.openDrive(e):"raw"==i?t.openRaw(e):"saveToDisk"==i?t.saveToDisk(e):"metapdf"==i&&m.backend.Attachments.canShowInPubView(r)?t.openMetaPDF(e):this.isSynced(r)&&this.worksBestInDriveViewer(r)?t.openDrive(e):m.backend.Attachments.canShowInPubView(r)?t.openPubView(e):this.canShowInChrome(r)?t.openRaw(e):t.saveToDisk(e)},canShowInPubView:function(e){return this.isPdfAttachment(e)},canShowInChrome:function(e){var t=!0;return e&&e.mimeType&&m.Utils.isString(e.mimeType)&&e.mimeType.match(/officedocument/)&&(t=!1),t},isPdfAttachment:function(e){return 1==e.article_pdf||e.mimeType&&e.mimeType.match(/pdf/i)||e.filename&&e.filename.match(/\.pdf$/i)},worksBestInDriveViewer:function(e){var t=!1;return["doc","docx","eps","odt","svg","xls","xlsx"].forEach((function(r){var a=new RegExp("."+r+"$","i");e.filename&&e.filename.match(a)&&(t=!0)})),t},isSynced:function(e){return!!e.gdrive_id},getPubViewUrl:function(e){return 1==e.article_pdf?m.Globals.url("/view/"+e.pub_id):m.Globals.url("/view/file/"+e._id)},getDriveDesktopWebUrl:function(e){return this.isSynced(e)?"https://docs.google.com/file/d/"+e.gdrive_id+"/edit":null},getDriveMobileWebUrl:function(e){return this.isSynced(e)?"https://docs.google.com/viewer?a=v&pid=explorer&srcid="+e.gdrive_id:null},getDriveDownloadUrl:function(e){return this.isSynced(e)?"https://drive.google.com/uc?export=download&id="+e.gdrive_id:null},getDriveRawContentUrl:function(e){return this.isSynced(e)?"https://drive.google.com/uc?id="+e.gdrive_id:null},addViewDrivePermissions:function(e,t){if(this.isSynced(e))m.Utils.callback(t,null,[null,"Attachment is not synced!"]);else{var r=this.getSharedAttachmentUrl(e);r+="?no_redirect=1";var a=m.Ajax.request({url:r,trackRedirects:!0,progress:function(e){a.abort()},callback:function(e,r,a){"success"!==r?m.Utils.callback(t,null,[null,a.status]):m.Utils.callback(t,null,[e,null])}})}},getPubViewAttachmentUrl:function(e){return this.getSharedAttachmentUrl(e,"pubview")},getSharedAttachmentUrl:function(e,t){return t||(t="internal"),m.Globals.getUrlBase()+"/shared/"+t+"/download/"+e._id},getFilename:function(e,t,r){var a="";(r||(r={}),m.shared&&m.shared.attachmentNameFormatter)&&(a=m.shared.attachmentNameFormatter.formatAttachment(e,t,{},r.mainPattern,r.supplementaryPattern,r.patternConfig).fileName);return a},getFullPathFilename:function(e,t,r,a){var i="";if(a||(a={}),r||(r={}),m.shared&&m.shared.attachmentNameFormatter){var n=m.shared.attachmentNameFormatter.formatAttachment(e,t,r,a.mainPattern,a.supplementaryPattern,a.patternConfig);i=n.fileName,n.folders&&n.folders[0]&&(i=n.folders[0]+"/"+i)}return i},getChangedFieldNames:function(e,t){var r=Object.keys(e),a=Object.keys(t),i={deleted:[],changed:[],created:[]};return a.forEach((function(a){if(-1===r.indexOf(a))i.created.push(a);else if(typeof e[a]==typeof t[a])if("object"!=typeof e[a])e[a]!==t[a]&&i.changed.push(a);else if(m.Utils.isArray(e[a])&&m.Utils.isArray(t[a])){var n=!0;if(e[a].length!==t[a].length)n=!1;else for(var o=0;o<e[a].length;o++)e[a][o]!==t[a][o]&&(n=!1);n||i.changed.push(a)}else i.changed.push(a);else i.changed.push(a)})),r.forEach((function(e){-1===a.indexOf(e)&&i.deleted.push(e)})),i}}),m.library.Attachment=new m.library._Attachment,m.library._Author=m.Class.extend({regExpCache:{},getRegExp:function(e,t){void 0===t&&(t="");var r={__latinUC__:"A-Z",__latinLC__:"a-z",__umlauteUC__:"\xc0-\xd6\xd8-\xdd\u0100\u0102\u0104\u0106\u0108\u010a\u010c\u010e\u0110\u0112\u0114\u0116\u0118\u011a\u011c\u011e\u0120\u0122\u0124\u0126\u0128\u012a\u012c\u012e\u0130\u0134\u0136\u0139\u013b\u013d\u013f\u0141\u0143\u0145\u0147\u014c\u014e\u0150\u0154\u0156\u0158\u015a\u015c\u015e\u0160\u0162\u0164\u0166\u0168\u016a\u016c\u016e\u0170\u0172\u0174\u0176\u0178\u0179\u017b\u017d",__umlauteLC__:"\xe0-\xff\u0101\u0103\u0105\u0107\u0109\u010b\u010d\u010f\u0111\u0113\u0115\u0117\u0119\u011b\u011d\u011f\u0121\u0123\u0125\u0127\u0129\u012b\u012d\u012f\u0135\u0137\u013a\u013c\u013e\u0140\u0142\u0144\u0146\u0148\u014d\u014f\u0151\u0155\u0157\u0159\u015b\u015d\u015f\u0161\u0163\u0165\u0167\u0169\u016b\u016d\u016f\u0171\u0173\u0175\u0177\u017a\u017c\u017e",__cyrillicUC__:"\u0400-\u042f",__cyrillicLC__:"\u0430-\u044f",__greekUC__:"\u0391-\u03ab",__greekLC__:"\u03ac-\u03ce"};r.__universalUC__=r.__latinUC__+r.__umlauteUC__+r.__cyrillicUC__+r.__greekUC__,r.__universalLC__=r.__latinLC__+r.__umlauteLC__+r.__cyrillicLC__+r.__greekLC__;var a=e+t;if(!(a in this.regExpCache)){for(var i in r)e=e.replace(new RegExp(i,"g"),r[i]);this.regExpCache[a]=new RegExp(e,t)}return this.regExpCache[a]},getFields:function(){return[{name:"last"},{name:"first"},{name:"jr"},{name:"initials"},{name:"collective"},{name:"bak"},{name:"formatted"},{name:"_id"}]},toBibtex:function(e){if("others"===e.collective)return"{"+e.collective+"}";if(e.collective)return"{"+e.collective+"}";var t=[];return e.last&&e.first?(t.push(e.last),e.jr&&t.push(e.jr),t.push(e.first),t.join(", ")):e.last&&e.initials?(t.push(e.last),e.jr&&t.push(e.jr),t.push(e.initials),t.join(", ")):e.last?"{"+e.last+"}":e.first?"{"+e.first+"}":e.initials?"{"+e.initials+"}":""},toRis:function(e){if("others"===e.collective)return e.collective;if(e.collective)return e.collective;var t=[];return e.last&&e.first?(t.push(e.last),t.push(e.first),e.jr&&t.push(e.jr),t.join(", ")):e.last&&e.initials?(t.push(e.last),t.push(e.initials),e.jr&&t.push(e.jr),t.join(", ")):e.last?e.last+", ":e.first?", "+e.first:e.initials?", "+e.initials:""},toCSL:function(e){var t={};return e.collective&&"others"===e.collective?null:e.collective?(t.family=m.String.removeControlChars(e.collective),t):(e.first&&""!=e.first&&(t.given=m.String.removeControlChars(e.first)),e.last&&""!=e.last&&(t.family=m.String.removeControlChars(e.last)),e.jr&&(t.suffix=m.String.removeControlChars(e.jr)),t.given||""==e.initials||(t.given=m.String.removeControlChars(e.initials)),t.given&&!t.family&&(t.family=t.given,delete t.given),this.removeCommas(t,"given"),this.removeCommas(t,"family"),this.addPeriods(t),t)},addPeriods:function(e){if(e.given){for(var t=e.given.split(/\s+/),r=0;r<t.length;r++)t[r].match(/^.$/)&&(t[r]+=".");e.given=t.join(" ")}},removeCommas:function(e,t){e[t]&&e[t].match(/,/g)&&(e[t]=e[t].replace(/,/g,""))},toString:function(e,t){var r={prefixWrap:"",suffixWrap:"",prefix:"",suffix:"",delim:",",includeItalics:!0,output:"display",etAl:!1,othersString:"et al."};if(void 0===t?t=r:m.Utils.applyIf(t,r),!e)return"";if(m.Utils.isArray(e)){if(t.etAl){if(e.length>2){var a=this.toString(e[0],t);return t.includeItalics?a+=" <i>et al.</i>":a+=" et al.",a}return(i=m.Array.map(e,(function(e){return this.toString(e,t)}),this)).join(" and ")}var i=m.Array.map(e,(function(e){return this.toString(e,t)}),this);if(""!=t.prefixWrap){a="";for(var n=0;n<i.length;n++)n<i.length-1?a+=t.prefixWrap+i[n]+t.delim+t.suffixWrap+" ":a+=t.prefixWrap+i[n]+t.suffixWrap;return a}return i.join(t.delim)}var o,s=e.first,l=e.collective,c=e.last,u=e.initials,d=e.jr,p=e._id,h=[];return l?"serialize"===t.output||"forDiff"===t.output?h.push("{"+l+"}"):"others"===l?h.push(t.othersString):h.push(l):("serialize"===t.output&&(c&&h.push(c),d&&h.push(" "+d),(s||u)&&(h.push(", "),h.push(s||u))),"full"===t.output?(s&&h.push(s),!s&&u&&h.push(u),c&&h.push(c),d&&h.push(d)):"forDiff"===t.output?(s&&h.push(s),!s&&u&&h.push(u),h.push(","),c&&h.push(c),h.push(","),d&&h.push(d)):"display"===t.output?(c&&h.push(c),d&&h.push(d),u&&h.push(u)):"last"===t.output?l?h.push(l):c&&h.push(c):"firstlast"===t.output&&(s&&h.push(s),c&&h.push(c))),o="serialize"===t.output?h.join(""):h.join(" "),"others"===l&&"et al."===t.othersString&&t.prefix&&t.prefix.match(/span/i)?o=" <i>"+o+"</i>":(t.prefix&&(o=t.prefix+o),t.suffix&&(o+=t.suffix)),o=o.replace(/{_id}/g,p)},hasValue:function(e){return m.Utils.isArray(e)&&e.length>0},authorStringClassification:function(e){var t=this,r="N",a=e.replace(/\./g,". ").replace(/,/g," , ").replace(/^[\t\r\n\s]+/,"").replace(/[\t\r\n\s]+$/,"").split(/[\t\r\n\s]+/),i=[];a.forEach((function(e){e.match(t.getRegExp("^-?[__universalUC__]{1,2}\\.?$"))||e.match(/^(Kh|Ye|Sh)\.$/)?i.push("I"):e.match(t.getRegExp("^[__universalUC__][^\\s]*[__universalLC__]+"))?i.push("L"):","===e?i.push(","):e.match(/^[\.\-:;'"]+$/)||i.push("N")}));var n=i.join("");return n.match(/^I+$/)?r="I":n.match(/^L$/)||n.match(/^N{0,2}L$/)?r="L":n.match(/^L{2,4}$/)||n.match(/^L{1,2}N{1,2}L$/)?r="D":n.match(/^I{1,4}N{0,2}L+$/)?r="B":n.match(/^N{0,2}L+,?I{1,4}$/)?r="A":n.match(/^LI{1,4}N{0,2}L+$/)?r="E":(n.match(/^L,L{1,4}$/)||n.match(/^L,L{1,2}I{1,2}$/))&&(r="F"),e.match(/^The\s/)&&(r="C"),t.isCollectiveName(e)&&(r="C"),r},isConcatenatedAuthor:function(e){var t={flag:!1,parts:[]};return(e.match(this.getRegExp("^[__universalUC__][__universalLC__]+[__universalUC__][__universalLC__]+$"))||e.match(this.getRegExp("^[__universalUC__][__universalLC__]+[__universalUC__][__universalLC__]+[__universalUC__][__universalLC__]+$")))&&(t.flag=!0,e.split(this.getRegExp("([__universalUC__][__universalLC__]+)")).forEach((function(e){""!==e&&t.parts.push(e)}))),t},parseAuthorList:function(e,t){var r=this;t=m.Utils.apply({delimiter:",",commasWithinNames:!1,familyNameFirst:!0,auto:!1},t);var a=[];if(e=(e=e.replace(/\s+/g," ")).replace(/[,;:]\s*$/,""),t.auto){for(var i={";":0,",":0,".":0},n=e.split(""),o=0;o<n.length;o++)n[o].match(/[,;:]/)&&(i[n[o]]||(i[n[o]]=0),i[n[o]]++);var s=[];for(var l in i)s.push({key:l,cnt:i[l]});if(s.length>0&&(s=s.sort((function(e,t){return t.cnt-e.cnt})),t.delimiter=s[0].key,s.length>1&&","==s[0].key&&";"==s[1].key&&s[1].cnt/s[0].cnt>=.5&&(t.delimiter=";")),0===i[";"]&&1===i[","]&&this.authorStringClassification(e).match(/^(A|F)$/))return a.push(r.parseAuthor(e,{familyNameFirst:!0})),a;var c=new RegExp("(?:"+t.delimiter+"|\\s+and\\s+|\\s+&\\s+)");n=e.split(c);var u=[];for(o=0;o<n.length;o++)if(""!==n[o]&&!n[o].match(/^\s+$/)&&n[o].match(r.getRegExp("[__universalLC__]","i"))){n[o]=n[o].replace(/^\s+/,""),n[o]=n[o].replace(/\s+$/,"");var d={text:n[o]};d.anno=r.authorStringClassification(d.text),u.push(d)}for(;u.length>0;){var p=u.shift();if("C"===p.anno)a.push({collective:p.text});else if("B"===p.anno||"D"===p.anno||"E"===p.anno)a.push(r.parseAuthor(p.text,{familyNameFirst:!1}));else if("A"===p.anno||"F"===p.anno)a.push(r.parseAuthor(p.text,{familyNameFirst:!0}));else if("I"===p.anno){if(u[0]&&"L"===u[0].anno){var h={last:(g=u.shift()).text,first:p.text};r.autoClean(h),a.push(h)}}else if("L"===p.anno&&u[0]&&"I"===u[0].anno){var g=u.shift();h={last:p.text,first:g.text};r.autoClean(h),a.push(h)}}}else{n=e.split(t.delimiter);if(","===t.delimiter&&!0===t.commasWithinNames){var f=[];for(o=1;o<n.length;o++)(o+1)%2==0&&f.push(n[o-1]+n[o]);n=f}for(o=0;o<n.length;o++)a.push(r.parseAuthor(n[o],t))}return a},parseAuthor:function(e,t){if(t=m.Utils.apply({familyNameFirst:!0},t),m.Utils.isArray(e))return m.Array.map(e,(function(e){return this.parseAuthor(e,t)}),this);var r=this._parseAuthorStringHelper(e,t);if(r&&r.last&&r.last.match(/^[A-Z]$/i)&&r.first){var a=r.first.split(/\s+/),i=r.last;1===a.length&&a[0].match(/[a-z]{3,}/i)?(r.last=r.first,r.first=i):2===a.length&&a[0].match(/[a-z]{3,}/i)&&a[1].match(/[a-z]{3,}/i)?(r.last=a[0],r.first=a[1]+" "+i):3===a.length&&a[0].match(/[a-z]{3,}/i)&&a[1].match(/^[A-Z]$/i)&&a[2].match(/^[A-Z]$/i)||3===a.length&&a[0].match(/[a-z]{3,}/i)&&a[1].match(/[a-z]{3,}/i)&&a[2].match(/^[A-Z]$/i)||3===a.length&&a[0].match(/[a-z]{3,}/i)&&a[1].match(/[a-z]{3,}/i)&&a[2].match(/[a-z]{3,}/i)?(r.last=a[0],r.first=a[1]+" "+a[2]+" "+i):(r.collective=r.bak,delete r.first,delete r.last)}return void 0===r.level&&(r.collective=r.bak),this.autoClean(r),r},getFirstNameStopRegex:function(){return/^(aus|auf|da|das|de|del|der|den|do|dos|la|las|van|von|von|zu|)$/i},autoClean:function(e){for(var t,r=this,a=this.getFields(),i=0;i<a.length;i++){var n=a[i].name;e[n]&&(e[n]=e[n].replace(/^\s*/,""),e[n]=e[n].replace(/\s*$/,""),e[n]=m.Utils.replaceU0308(e[n]),e[n]=m.Utils.replaceControlChars(e[n]),e[n].match(/\u2018/)||(e[n]=e[n].replace(/\u2019/g,"'")))}if(void 0!==e.first){var o=e.first;if(o=(o=(o=o.replace(/\./g," ")).replace(/\s+/g," ")).replace(/\s+$/,""),!e.initials&&o.length>0&&o.length<4&&o.toUpperCase()===o)e.initials=o,e.initials=e.initials.replace(/-/g,""),e.first=o;else{var s=e.first.replace(/\./g,". "),l=(s=s.replace(/\s+$/,"")).split(/\s+/);for(i=0;i<l.length;i++)if(l[i]=l[i].replace(/\.$/,""),!(l[i].length<=2)){for(var c=l[i].split(/\s*-\s*/),u=0;u<c.length;u++)c[u].match(this.getFirstNameStopRegex())||(c[u]=this.wordToLowerCase(c[u]));l[i]=c.join("-")}e.first=l.join(" "),e.first=e.first.replace(/(.+)\s+(-\S.*)/g,"$1$2")}}if(void 0===e.first&&void 0!==e.initials&&m.Utils.isString(e.initials)&&(e.first=e.initials),void 0!==e.first&&m.Utils.isString(e.first)){for(c=e.first.split(/\s+/),u=0;u<c.length;u++)c[u].match(r.getRegExp("^[__universalUC__]{1,2}$"))&&(c[u]=c[u].split("").join(" ")),c[u].match(r.getRegExp("^[__universalUC__]{3}$"))&&e.last&&e.last.match(r.getRegExp("[__universalLC__]"))&&(c[u]=c[u].split("").join(" "));e.first=c.join(" ")}if(void 0!==e.last&&m.Utils.isString(e.last)){if(e.last.match(r.getRegExp("^[__universalUC__\xdf\\s\\-]+$"))||e.last.toUpperCase()===e.last){for(l=[e.last],e.last.match(/-/)&&(l=e.last.split(/\s*-\s*/)),i=0;i<l.length;i++){for(c=[l[i]],l[i].match(/\s/)&&(c=l[i].split(/\s+/)),u=0;u<c.length;u++)c[u].match(/^(del|de\sla|de|da|do|den)$/i)?c[u]=c[u].toLowerCase():c[u]=this.wordToLowerCase(c[u]);l[i]=c.join(" ")}e.last=l.join("-")}e.last.match(r.getRegExp("^[__universalLC__\\s]+$"))&&(e.last=m.String.upperFirst(e.last))}(void 0!==e.first&&m.Utils.isString(e.first)&&e.first.match(r.getRegExp("^[__universalLC__\\s]+$"))&&(e.first=m.String.upperFirst(e.first)),e.first)&&(null!==(t=e.first.match(/(.+)(\sSr\.?|\sJr\.?|\sIV|\sIII|\s3rd|\sII|\s2nd)$/i))&&t.length>=3&&(e.jr=t[2],e.jr=m.Utils.strip(e.jr),e.first=t[1]));e.last&&(null!==(t=e.last.match(/(.*)(\sSr\.?|\sJr\.?|\sV|\sIV|\sIII|\s3rd|\sII|\s2nd)$/i))&&t.length>=3&&(e.jr=t[2],e.jr=m.Utils.strip(e.jr),e.last=t[1],e.last=e.last.replace(/,?\s*$/,"")),null!==(t=e.last.match(/^(Sr\.?|Jr\.?|V|IV|III|3rd|II|2nd)(\s.+)/i))&&t.length>=3&&(e.jr=t[1],e.jr=m.Utils.strip(e.jr),e.last=m.Utils.strip(t[2]),e.last=e.last.replace(/,?\s*$/,"")));if(e.jr&&(e.jr=m.Utils.strip(e.jr),e.jr=e.jr.replace(/\.$/,""),"JR"===e.jr&&(e.jr="Jr"),"SR"===e.jr&&(e.jr="Sr")),e.first&&e.last){var d=e.first.match(/(\svan den$|\svan$)/i);null!==d&&d.length>=1&&(e.last=d[1].trim()+" "+e.last,e.first=e.first.replace(d[1],""))}e.initials?this.cleanInitials(e):this.loadInitials(e),e.formatted||this.loadFormatted(e),e._id||(e._id=m.UUID.generate())},isInitials:function(e){return e.match(this.getRegExp("^([__universalUC__]\\.?){1,4}$"))},loadFormatted:function(e){e.formatted=this.toString(e,{output:"display"})},loadInitials:function(e){var t=this,r="",a=e.first;if(a&&this.isInitials(a))return r=a.replace(/[\.\s\-]/g,""),void(e.initials=r);var i=[];a&&(i=a.replace(/-/g," ").split(/\s+/g));(i=i.filter((function(e){return!e.match(t.getFirstNameStopRegex())}))).length>2&&(i=[i[0],i[1]]),r="";for(var n=this.getRegExp("([__universalUC__]+)"),o=/(\w)\w+/,s=0;s<i.length;s++){var l=i[s],c=n.exec(l),u=o.exec(l);c&&c.length>0?r+=c[0]:u&&u.length>0&&(r+=u[0])}r=r.replace(/[\.\s\-]/g,""),e.initials=r},cleanInitials:function(e){var t=e.initials;t=(t=t.replace(/\./g,"")).replace(/\s/g,""),e.initials=t},isEtAl:function(e){null==e&&(e="");var t=!1;return"etal"===(e=e.toLowerCase().replace(/[\s\.]/g,""))&&(t=!0),t},isTainted:function(e){m.Utils.isString(e)||(e="");var t=new RegExp("("+["author","autor","staff","editor","writer","report","contribut","name","nombre","redazion","r\xe9daction","redaktion","reda\xe7\xe3o","redacci\xf3","redacci\xf3n","redazione","r\xe9daction","admin","team","https","www","@","src","<","class","#","View","profil","post"].join("|")+")","i");return!!e.match(t)},isCollectiveName:function(e){var t=new RegExp("\\b("+["Aboriginal","Academics?","Academia","Academie","Academy","Access","Accountants","Accounting","Active","Adviser","Adviserory","Against","Alliance","Atlas","Administration","Agency","Agreement","Agriculture","American","Anglicare","Architects?","Archives?","Archivo","Archivist","Asociacion","Assembly","Association","Associated","Associates","Associazione","Audiovisuel","Australian?","Authority","Bank of","Bureau","Business","Board","Britannica","British","Brotherhood","Canadian","Cancer","Careers?","Catholic","Centrale?","Centres?","Centers?","Certification","Children","Children.s","Church of ","Cinema","City","Classical","Clinical","Club","&amp; Co\\.","Cohort","Collaborators","Collaboration","Collective","Collections?","College","Colloquium","Commission","Committee","Commonwealth","Communications","Community","Communities","Compagnie","Company","Computers?","Conf\\.","Confederated?","Conference","Congress","Connect","Conservation","Consortium","Consultants","Consulate","Consulting","Consumer","Contemporary","Contributors","Corp","Corporation","Councils?","Court of","Creative","Cultural","Dept","Departments?","D\xe9partement","Designs?","Deutscher","Deutschen?","Development","Developmental","Devices","Digest","Digital","Distribution","Division","Economics","Editions","Editorial","Education","Electronics?","Embassy","Encode","Energy","Engineering","Ensemble","Enterprises?","Entrepreneurs?","Eprint","Establishment","Estates","European","Exhibitions?","Explorations?","Express","Fachgruppe","Fantom","Federal","Federation","Fakultas","Fachkomission","Faculty","Family","Finances?","Foundation","Forum","Gallery","Galleries","Globe","Government","Graphics","Great Britain","Group","Grupo","Gruppo","Health","Healthcare","Herald","History","Hochschule","Hospital","Human","Inc","Incorporated","Independent","Index","Indiana","Indonesia","Industries?","Industrial","Information","Initiative","Illustrated","Inspection","Inspectorate","Institute?","Interactive","Intl\\.?","International","Internationale","Investments?","Investors","Investigators","Joint","Journal","Kernforschungsanlage","Kommission","Laboratory","Laboratories","Lawyers","Learning","League","Lectures","Legal","Library","Libraries","Literatur","Llp","Ltd","Limited","Living","Magazine","Management","Maps","Market","Marketing","Materials?","Mathematics?","Medical","Medicine","Medicins","Medicina","Members?","Ministry","Monographs?","Monastery","Musee","Museum","Museen","Music","Multimedia","Nacional","National","Network","News?","New Zealand","Northern","On behalf of","Office","Operations","Opportunities","Organization","Organisation","Panel","Parliament","Partners","Partnership","Party","Performance","Photo","Photography","Platform","Police","Policy","Practice","Preparation","Press","Printing","Problem","Productions?","Profession","Programs?","Projects?","Publications?","Publishers?","Publishing","Recruitment","Reference","Report","Reporters","Research","Resources?","Review","Roundtable","Royal","Seminars?","Sciences?","School","Schweizerischer?","Scottish","Secretariat","Security","Seminar","Senatskommission","Series","Services?","Simulations","Sisters","Software","Societes?","Society","Societies","Solutions","Staff","Standard","State","Stiftung","Studies","Studio","Study","Subcommittee","Supreme Court","Survey","Symposium","Systems","Task Force","Team","Technology","Technologies?","Telegraph","Test Prep","The","Times","Training","Tribune","Trust","Unit","United","University","Universidad","Universitat","Universities","Unlimited","U\\.S\\.","Various","Victorian","Working Party","Workshops?","World","Writers","Yearbook","Akademie","Arbeitsgruppe","Landesamt","Lehrstuhl","Gesellschaft","Gmbh","Stiftung","Bundesamt","Deutschland","Arbeitskreis","Bibliothek","Hochschule","Generaldirektion","Wissenschaftliche","Forschung","Umwelt","Gesundheit","Werkstatt","Zentrum","Mitglieder","Wirtschaftsforschung","Ministerium","Geschichte","Allgemeine","Kommission","Fachredaktion","VerlagsgesmbH","Archiv","Verein","Vereinigung","Verband","Verlag","Forschungsstelle","Wissenschaftsrat","Bundesrepublik","Schweiz","Schweizer","Schweizerische","Staatlichen","Gesundheitswesen"].join("|")+")\\b","gi"),r=new RegExp("\\b("+["f\xfcr","F\xf6rderung","\xd6sterreich"].join("|")+")\\b","i"),a=new RegExp("("+["\\.com\\b","\\.Com\\b","^[A-Z]{3,4,5,6}$","\\s\\bfor\\s\\S","\\s\\bof\\s\\S",'^".*"$',"^\\S+\\s(&|&amp;)\\s\\S+$","^[A-Z\\s\\.]{3,4,5,6,7,8,9,10}$","[a-z]+(bibliothek|musuem|verein|vereinigung|ministerium|institut|verband|verlag|denkmalamt|geschichte|gerichtshof|gemeinschaft|gesellschaft|stiftung|abteilung|kommission)\\s","[a-z]+(bibliothek|musuem|verein|vereinigung|ministerium|institut|verband|verlag|denkmalamt|geschichte|gerichtshof|gemeinschaft|gesellschaft|stiftung|abteilung|kommission)$"].join("|")+")","g"),i=!1,n=e.normalize("NFD").replace(/[\u0300-\u036f]/,""),o=n.match(t);if(o&&o.length>0){var s=e.split(/,/);if(1!==o.length||2!=s.length||e.match(/,\s*Inc/i))i=!0;else{var l=s[0].trim().split(/\s+/).length,c=s[1].trim().split(/\s+/).length;(l>2||c>3)&&(i=!0)}}return(!i&&e.match(r)||!i&&n.match(a))&&(i=!0),i},_parseAuthorStringHelper:function(e,t){var r={first:void 0,last:void 0,collective:void 0,jr:void 0,level:void 0,bak:void 0};if(e&&e.match(/\{(.*?)\}/i))return r.collective=RegExp.$1,r.level="collective",r.bak=e,r;if(t.collective)return r.collective=e,r.level="collective",r.bak=e,r;for(var a=["Op\\sde","van\\sder","von\\sder","von\\szu","van\\sde","van\\sden","van\\s't","auf\\sden","de\\sla","de\\slas","in\\s't"],i=["al","au","af","el","do","del","della","dello","des","da","de","di","dos","du","la","le","lo","les","Mc","lou","pietro","st.","st","ter","vanden","van","vel","ver","vere","vom","von","zur","ten","te","den","sir"],n={Andreas:1,Bruno:1},o=this.getRegExp("^([__universalUC__]){1,3}$"),s=this.getRegExp("^[__universalUC__]\\.?$"),l=new RegExp("(.+)\\s("+a.join("|")+")\\s(.+)","i"),c=this.getRegExp("^("+a.join("|")+")\\s(.+)\\s([__universalUC__]{1,3})$"),u=new RegExp("(.+)\\s("+i.join("|")+")\\s(.+)","i"),d=this.getRegExp("^("+i.join("|")+")\\s(.+)\\s([__universalUC__]{1,3})$","i"),p=new RegExp("^[A-Z-]*$"),m=0;e.match(/\d\s*$/)&&(e=(e=e.replace(/(.*)(\s*,\s*\d+\s*)$/g,"$1")).replace(/(.*)(\s*\d+\s*)$/g,"$1"),!(++m>10)););(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/^\s+/,"")).replace(/\s+$/,"")).replace(/\s+/g," ")).replace(/\s-\s/,"-")).replace(/^(Prof|Dr)\.\s*/,"")).replace(/^Professor\s*/,"")).replace(/^(Prof|Dr)\s+/,"")).replace(/,?\s?Ph\.?\s?D\.?$/i,"")).replace(/,?\s?D.?\s?Phil\.?$/i,"")).replace(/,?\s?M\.?D\.?$/i,"")).replace(/,?\s?Pharm\.?\s?D\.$/i,"")).replace(/,\s?Dr\.?$/,"")).replace(/,\s?Professor$/i,"")).replace(/^Vice\sPresident\s*/i,"")).replace(/^President\s*/i,"")).match(/^Senator/)&&!e.match(/,/)&&(e=e.replace(/^Senator\s*/i,"")),e=(e=(e=(e=(e=e.replace(/^Sen\.\s*/i,"")).replace(/^Ambassador\s*/i,"")).replace(/^Amb\.\s*/i,"")).replace(/^Representative\s*/i,"")).replace(/^Rep\.\s*/i,""),r.bak=e;var h,g=e.match(/(.*)(\sJr\.?|\sSr\.?|\sII|\sIII|\sIV|\s1st|\s2nd|\s3rd|\s4th|\s5th)$/i);if(null!==g){var f=0;a.concat(i);g[1].split(/\s+/).forEach((function(e){var t=1;a.concat(i).forEach((function(r){r.toUpperCase()==e.toUpperCase()&&(t=0)})),t&&f++}));var b=0;g[2].match(/I/)?(g[1].match(/.*,.*,.*/)&&(b=1),!e.match(/,/)&&f>=2&&(b=1)):f>=2&&(b=1),b&&(r.jr=g[2],e=(e=g[1]).replace(/,?\s*$/,""))}if(null!==(g=e.match(/(.+),\s*(Jr\.?|Sr\.?|II|III|IV|1st|2nd|3rd|4th|5th)\s*,\s*(.+)/i))&&4==g.length&&(r.jr=g[2],e=g[1]+", "+g[3]),null!==(g=e.match(/^(Jr\.?|Sr\.?|II|III|IV|1st|2nd|3rd|4th|5th)\s,?\s*(.+)/i))&&3==g.length&&g[2].match(/\s/)&&(r.jr=g[1],e=g[2]),null!==(g=e.match(/^([^,]+),\s*(Jr\.?|Sr\.?|II|III|IV|1st|2nd|3rd|4th|5th)$/i))&&3==g.length&&g[1].split(/\s+/).length>=2&&(r.jr=g[2],e=g[1]),e=(e=(e=(e=(e=e.replace(/U\.S\./g,"--PPUS--")).replace(/(\.)/g,"$1 ").replace(/\s+/g," ").replace(/\s+$/,"")).replace(/--PPUS--/g,"U.S.")).replace(/\.\s+-/g,".-")).replace(/\.\s((com\b|net\b|org\b|edu\b))/i,".$1"),this.isCollectiveName(e))return r.collective=e,r.level="9.0",r;if("et al."===e||"et al"===e)return r.collective="others",r.level="0.0 <et al.>",r;if(e.match(/,/)&&2===(h=e.split(/,/)).length)return r.first=h[1],r.last=h[0],r.level="0.0",r;if(2===(h=e.split(/\s+/)).length)return h[0]=h[0].replace(/\.$/,""),!h[1].match(o)||h[0].match(o)||h[0].match(p)?!h[0].match(o)||h[1].match(o)||h[1].match(p)?(!0===t.familyNameFirst?(r.first=h[1],r.last=h[0],r.level="1.0 familyFirst"):(r.first=h[0],r.last=h[1],r.level="1.0 familyLast"),r):(r.first=h[0],r.last=h[1],r.level="0.9 <FM Last>",r):(r.first=h[1],r.last=h[0],r.level="0.9 <Last FM>",r);var y=e.match(l),v=e.match(c),_=e.match(u),w=e.match(d);if(null!==y)return r.first=y[1],r.last=y[2]+" "+y[3],e.match(/\sy\s/)&&null!==(y=r.first.match(l))&&(r.first=y[1],r.last=y[2]+" "+y[3]+" "+r.last),r.level="1.1",r;if(null!==v)return r.first=v[3],r.last=v[1]+" "+v[2],r.level="1.1a",r;if(null!==_)return r.first=_[1],r.last=_[2]+" "+_[3],r.level="1.2",r;if(null!==w)return r.first=w[3],r.last=w[1]+" "+w[2],r.level="1.2a",r;if(h.indexOf("y")>1&&h.indexOf("y")<h.length-1)return r.first=h.slice(0,h.indexOf("y")-1).join(" "),r.last=h.slice(h.indexOf("y")-1).join(" "),r.level="1.3",r;if(3===h.length){if(!0===t.familyNameFirst&&(h[1].match(s)||h[2].match(s)))return r.first=h[1]+" "+h[2],r.last=h[0],r.level="2.0 familyFirst",r;if(h[0].match(s)&&!h[1].match(s))return h[1].match(/^-.\.?$/)?(r.first=h[0]+h[1],r.last=h[2]):n[h[1]]?(r.first=h[0]+" "+h[1],r.last=h[2]):(r.first=h[0],r.last=h[1]+" "+h[2]),r.level="2.0",r;if(h[1].match(s)&&h[2].match(s))return r.first=h[1]+" "+h[2],r.last=h[0],r.level="2.0.5",r;if(!h[0].match(s)&&h[1].match(s))return r.first=h[0]+" "+h[1],r.last=h[2],r.level="2.1",r;if(h[0].match(s)&&h[1].match(s))return r.first=h[0]+" "+h[1],r.last=h[2],r.level="2.2",r;if(!h[0].match(s)&&!h[1].match(s))return"Ben"===h[1]||"Castro"===h[1]?(r.first=h[0],r.last=h[1]+" "+h[2]):(r.first=h[0]+" "+h[1],r.last=h[2]),r.level="2.3",r;if(h[1].match(/^[a-z]+$/))return r.first=h[0]+" "+h[1],r.last=h[2],r.level="2.4",r}if(4===h.length){if(h[2].match(s))return r.first=h[0]+" "+h[1]+" "+h[2],r.last=h[3],r.level="3.1",r;if(h[1].match(s))return n[h[2]]?(r.first=h[0]+" "+h[1]+" "+h[2],r.last=h[3]):(r.first=h[0]+" "+h[1],r.last=h[2]+" "+h[3]),r.level="3.1",r;if(h[0].match(s))return n[h[1]]&&n[h[2]]?(r.first=h[0]+" "+h[1]+" "+h[2],r.last=h[3]):n[h[1]]&&!n[h[2]]?(r.first=h[0]+" "+h[1],r.last=h[2]+" "+h[3]):(r.first=h[0],r.last=h[1]+" "+h[2]+" "+h[3]),r.level="3.2",r;if(!h[0].match(s))return r.first=h[0]+" "+h[1]+" "+h[2],r.last=h[3],r.level="3.3",r}if(h.length>4&&h.length<=6){for(var P,S=h.length-1;S>=0;S--)if(h[S].match(s)){P=S;break}return P?(r.first=h.slice(0,P).join(" "),r.last=h.slice(P+1).join(" "),r.level="4.0",r):(r.first=h.slice(0,h.length-2).join(" "),r.last=h.slice(h.length-1).join(" "),r.level="4.1",r)}return r},wordToLowerCase:function(e){return e.charAt(0).toUpperCase()+e.substring(1,e.length).toLowerCase()}}),m.library.Author=new m.library._Author,m.library._BibliographicData=m.Class.extend({rules:["_journal_ _monthNum_ \\/ _year_ _volume_ \\( _issue_ \\) : _pages_","_journal_ _monthNum_ \\/ _year_ _volume_ : _pages_","_journal_ _monthNum_ \\/ _year_ _volume_ \\( _issue_ \\)","_journal_ _period_ _year_ _month_ _day_ ; _volume_ _issueParens_ : _pages_ _any_","_journal_ _period_ _year_ _month_ _day_ _period_ _any_","_journal_ _period_ _year_ _month_ _day_ ; _volume_ : _pages_ _any_","_journal_ _period_ _volume_ _issueParens_ _seperator_ _pages_ _seperator_ _year_","_journal_ _period_ _volume_ _issueParens_ _seperator_ _pages_ _seperator_ _month_ _year_","_journal_ _period_ _volume_ _issueParens_ _seperator_ _pages_ _seperator_ _month_ _day_ _seperator_ _year_","_journal_ _period_ _volume_ _seperator_ _pagesSingle_ _seperator_ _month_ _day_ _seperator_ _year_","_journal_ _VOL_ _volume_ _PP_ _pagesSingle_ _yearAny_","_journal_ _VOL_ _volume_ _PP_ _pages_ _yearAny_","_journal_ _VOL_ _volume_ _NO_ _issue_ _PP_ _pages_ _yearAny_","_journal_ _yearParens_ _volume_ _pages_","_journal_ _volumeParens_ _pages_ _year_","_journal_ _volume_ _issueParens_ _yearAny_ _pages_","_journal_ _volume_ _issueParens_ _pages_ _yearAny_","_journal_ _volume_ _issueParens_ _pagesSingle_ _yearAny_","_journal_ _volume_ _yearParens_ _pages_","_journal_ _volume_ _yearParens_ _pagesSingle_","_journal_ _volume_ _pages_ _yearAny_","_journal_ _volume_ _seperator_ _pagesSingle_ _seperator_ _yearAny_","_journal_ _seperator_ _VOL_ _volume_ _seperator_ _NO_ _issue_ \\( _any_ _year_ \\) , pp\\. _pages_","_journal_ _VOL_ _volume_ _NO_ _issue_ _year_ _pages_","_journal_ , _any_ _year_ _seperator_ _PP_ _pages_ _VOL_ _volume_ _seperator_ _NO_ _issue_",".* University Press _journal_ _seperator_ _year_ _seperator_ _VOL_ _volume_ _seperator_ _NO_ _issue_ _pages_","_journal_ VOL _volume_ \\S+ \\S+ _year_",".* _year_ _VOL_ _volume_ _journal_","_journal_ _VOL_ _volume_ _NO_ _issue_ \\S+ \\S+ _year_",".* \\| _journal_ \\| _VOL_ _volume_ \\| .* _year_","_journal_ _volume_ _seperator_ _pages_ Published .* _year_","_journal_ _seperator_ _VOL_ _volume_ _seperator_ \\S+ _year_","_journal_ _yearParens_ _volume_ _seperator_ _pages_","_journal_ _yearParens_ _seperator_ _volume_ _seperator_ _pages_","_journal_ _yearParens_ _volume_ _issueParens_ _seperator_ _pages_","_journal_ _year_ _seperator_ _volume_ _issueParens_ _seperator_ _pages_","_journal_ _year_ _month_ _seperator_ _volume_ _seperator_ _pages_","_journal_ \\s _year_ _seperator_ _volume_ _seperator_ _pages_","_journal_ _seperator_ _any_ _year_ _seperator_ _VOL_ _volume_ _seperator_ _NO_ _issue_ _seperator_ _pages_","_journal_ _seperator_ _year_ _seperator_ _VOL_ _volume_ _seperator_ _NO_ _issue_ _pages_","_journal_ _seperator_ _year_ _seperator_ _VOL_ _volume_ _seperator_ _NO_ _issue_ _seperator_ _PP_ _pages_","_journal_  _volume_ _seperator_ _month_ _year_ _seperator_ _PP_ _pages_","_journal_ _seperator_ _VOL_ _volume_ _seperator_ _NO_ _issue_ _seperator_ \\S+ _year_","_journal_ _seperator_ _VOL_ _volume_ _seperator_ _NO_ _issue_ _seperator_ _year_","_journal_ _seperator_ _VOL_ _volume_ _seperator_ _NO_ _issue_ _seperator_ _pages_","_journal_ _seperator_ _VOL_ _volume_ _seperator_ _NO_ _issue_ _seperator_ _PP_ _pages_ _seperator_ _year_","_journal_ _seperator_ _VOL_ _volume_ _seperator_ _pages_ _seperator_ [^,]+ _seperator_ _year_","_journal_ _seperator_ _VOL_ _volume_ _seperator_ _pages_ _seperator_ \\S+ _year_","_journal_ _VOL_ _volume_ _seperator_ _NO_ _issue_ _seperator_ _any_ _seperator_ _PP_ _pages_ _seperator_ _year_","_journal_ _volume_ _seperator_ _issue_ _seperator_ _pages_ _seperator_ .+\\/.+ _year_","_journal_ _volume_ _issueParens_ _seperator_ _pages_ _seperator_ _year_","_journal_ _volume_ _seperator_ _pages_ . _year_","_journal_ _volume_ _seperator_ _pages_ _seperator_ [^,]+ _seperator_ _year_","_journal_ _year_ , _volume_ : _pagesSingle_ $","_journal_ _period_ _year_ _month_ _seperator_ _volume_ _issueParens_ _seperator_ _pages_","_journal_ _month_ _year_ _seperator_ _VOL_ _volume_ _seperator_ _NO_ _issue_ _seperator_ _pages_","_journal_ _seperator_ _VOL_ _volume_ _seperator_ _NO_ _issue_ _seperator_ _PP_ _pages_ _seperator_ _month_ _year_","_journal_ _seperator_ _volume_ _issueParens_ _seperator_ _pages_ _seperator_ _month_ .* _year_","_journal_ _seperator_ _any_ _year_ _seperator_ _VOL_ _volume_ _issueParens_ _seperator_ _PP_ _pages_","_journal_ _seperator_  _VOL_ _volume_ _issueParens_ _seperator_ _month_ _day_ _seperator_ _year_","_journal_ _seperator_  _VOL_ _volume_ _seperator_ _NO_ _issue_ \\( _month_  _seperator_ _year_ \\) _seperator_ _pages_","_journal_ _period_ _year_ _month_ _day_ _period_ _volume_ _issueParens_ p _period_ _pages_","_place_ _colon_ _institution_ , _year_ _period_ _journal_ _semicolon_ _NO_ _number_","_journal_ _period_ _PP_ _pages_ _period_ _period_","_journal_ _period_ _any_ _VOL_ _volume_ , _issueParens_ _PP_ _pages_ _period_ _period_","_journal_ _period_ _VOL_ _volume_ n _issue_ _PP_ _pages_ _month_ _year_","_journal_ _period_ _VOL_ _volume_ n _issue_ p _any_ _month_ - _month_ _year_","_journal_ _period_ _volume_ _issueParens_ \\( _PP_ _pages_ \\), _year_ _period_ _any_","_journal_ _period_ Conference: _conference_ _year_ _period_ _conferenceLocation_ , _any_ _period_ Conference Start: _conferenceDate_ Conference End: _any_","_journal_ _period_ _VOL_ _volume_ _issueParens_ _seperator_ _month_ _year_ _seperator_ _PP_ _pages_ _seperator_","_journal_ _period_ _any_ _year_ _period_ Article Number: _number_ _period_ Date of Publication: _day_ _month_ _year_ _period_","_journal_ _period_ _year_ _day_ _month_ _seperator_ _volume_ _issueParens_ _seperator_ _pages_","_editor_ _period_ _yearParens_ _journal_ _period_ \\( _PP_ _pages_ \\) _any_ \\. _place_ _colon_ _institution_ _semicolon_ _any_","_editor_ _semicolon_ _editor_ _period_ _yearParens_ _journal_ _period_ \\( _PP_ _pages_ \\) _any_ \\. _place_ _colon_ _institution_ _semicolon_ _any_","_editor_ _semicolon_ _editor_ _semicolon_ _editor_ _period_ _yearParens_ _journal_ _period_ \\( _PP_ _pages_ \\) _any_ \\. _place_ _colon_ _institution_ _semicolon_ _any_","_editor_ _semicolon_ _editor_ _semicolon_ _editor_ _semicolon_ _editor_ _period_ _yearParens_ _journal_ _period_ \\( _PP_ _pages_ \\) _any_ \\. _place_ _colon_ _institution_ _semicolon_ _any_","_editor_ _semicolon_ _editor_ _semicolon_ _editor_ _semicolon_ _editor_ _semicolon_ _editor_ _period_ _yearParens_ _journal_ _period_ \\( _PP_ _pages_ \\) _any_ \\. _place_ _colon_ _institution_ _semicolon_ _any_","_journal_ _period_ _volume_ _issueParens_ \\( _any_ _colon_ _any_ \\) _colon_ _pages_ , _month_ _year_","_journal_ _period_ _volume_ _issueParens_ _colon_ _pagesSingle_ , _month_ _year_","_journal_ _period_ _volume_ \\( _any_ \\) _colon_ _pages_ , _month_ _year_","_journal_ _period_ _volume_ _issueParens_ _colon_ _pagesSingle_ , _month_ _day_ , _year_","_journal_ _period_ _volume_ _issueParens_ \\( _any_ \\) _colon_ _pages_ , _month_ _year_","_journal_ _period_ _volume_ _any_ _colon_ _pages_ , _month_ _any_ _year_","_any_ \\. _title_ \\. _journal_ \\. _volume_ _issueParens_ _colon_ _pages_","_journal_ _year_ Issue _NO_  , _any_ \\. _any_ \\. .*","_any_ : _authors_ \\. _title_ \\. _journal_ \\. _pagesSingle_ _PP_ _year_","_editor_ \\. \\( _any_ \\) \\. _journal_ \\. \\( _PP_ _pages_ \\) \\. _any_ _PP_ _place_ : _publisher_","_journal_ _volume_ _issueParens_ _colon_ _pages_ , _any_ _year_","_journal_ \\. _volume_ \\( _any_ \\) \\( _any_ \\) _colon_ _pagesSingle_ , _month_ _year_ .*","_journal_ \\. _volume_ \\( _any_ \\) _colon_ _any_ , _month_ _year_ .*","_journal_ \\. _volume_ \\( _any_ \\) _colon_ _pages_ , _any_ _year_","_journal_ \\. _VOL_ _volume_ _issueParens_ \\. _PP_ _pages_ \\. _month_ _year_","_publisher_ , Inc, _journal_ _colon_ _number_ \\. _year_","_journal_ \\. _VOL_ _volume_ _issueParens_ \\. _PP_ _pages_ \\. _any_ _year_","_journal_ \\. _volume_ , _year_","_journal_ _VOL_ _volume_ _NO_ _issue_ _month_ _year_","_authors_ _yearParens_ \\. _title_ \\. _journal_ , _volume_ _issueParens_ , _pages_","_journal_ \\. _volume_ _any_ _colon_ _pages_ , _year_ _month_","_journal_ \\[ _any_ \\] \\. _volume_ _issueParens_ _colon_ _pagesSingle_ , _year_","_authors_ _yearParens_ \\. _title_ \\. In _editor_ , _journal_ \\( _PP_ _pagesSingle_ \\) \\. _place_ _colon_ _publisher_","_journal _VOL_ _volume_ _NO_ _issue_ _PP_ _pages_ _month_ _year_","_journal_ _VOL_ _volume_ _PP_ _pages_ _month_ _year_","_journal_ _VOL_ _volume_ _PP_ _pages_ _year_","_authors_ _year_ _title_","_authors_ _year_ _title_ _pages_","_journal_ _seperator_ _VOL_ _volume_ _issueParens_ _seperator_ _month_ _year_ _seperator_ _pages_","_VOL_ _volume_ _seperator_ _NO_ _number_ _issueParens_ _seperator_ _year_ _month_ _day_ _seperator_ _PP_ _pages_ \\.","_VOL_ _volume_ _seperator_ _NO_ _issue_ _seperator_ _year_ _month_ _seperator_ _PP_ _pagesSingle_","_VOL_ _volume_ _seperator_ _NO_ _issue_ _seperator_ _pages_ _journal_"],patterns:{any:"(.*)",year:"(\\d{4}[a-z]?)",yearParens:"\\((\\s?\\d{4}[a-z]?\\s?)\\)",yearAny:"\\(?(\\s?\\d{4}[a-z]?\\s?)\\)?",colon:":",semicolon:";",period:"\\.",seperator:"[\\.;,:\\|\u2013\u2014\\-]",stop:"[\\.\\?\\!:]",journal:"([^\\d\\|]+)",volume:"(\\d+[A-Z]?)",volumeParens:"\\((\\d+[A-Z]?)\\)",VOL:"([Vv]olume|VOLUME|VOL|[Vv]ol|v)\\.?",NO:"([Ii]ssue|ISSUE|[Nn]umber|NUMBER|NO|[Nn]o|n)\\.?",month:"(Jan|JAN|January|Feb|FEB|February|Mar|MAR|March|Apr|APR|April|May|MAY|June?|JUN|July?|JUL|Aug|AUG|August|Sep|SEP|September|Oct|OCT|October|Nov|NOV|November|Dec|DEC|December)\\.?",monthNum:"(0?1|0?2|0?3|0?4|0?5|0?6|0?7|0?8|0?9|10|11|12)",day:"(\\d+)",PP:"(p{1,2}\\.?|[Pp]ages?)",issue:"(\\d+[c]?)",issueParens:"\\((\\d+[c]?|\\d\\s*-\\s*\\d+)\\)",pages:"([RrEeSsNnAa]?\\d+[^\\/,]{1,3}[RrEeSsNn]?\\d+|e\\d+)",pagesSingle:"([RrEeSsNnAa]\\d+|\\d+)",title:"([^\\.]*?)",authors:"([\\w,\\.\\; \\n]+?)",place:"(.*)",institution:"(.*)",publisher:"(.*)",number:"([0-9]*)",conference:"(.*)",conferenceLocation:"(.*)",conferenceDate:"(.*)",editor:"(.+?)(?:\\[Ed\\]|\\(Ed.\\))"},getExtractors:function(e){if(this._extractors)return this._extractors;this.extractors=[];for(var t=0;t<this.rules.length;t++)this.extractors.push(this.buildReferenceExtractor(t,this.rules[t],e));return this.extractors},buildReferenceExtractor:function(e,t,r){var a=this,i=t.split(/\s+/),n=1,o={},s=[];void 0===r&&(r={authorParseParams:{familyNameFirst:!0,commasWithinNames:!1}}),i.forEach((function(e){var t=e.replace(/_/g,"");if(a.patterns[t]){var r=a.patterns[t],i=!1;r.match(/\(/)&&(i=!0),i&&(o[t]=n++),s.push(r)}else s.push(t)}));var l=new RegExp(s.join("\\s?"),"g");return{name:e,captureMap:o,regexp:l,params:r,getCount:function(e){for(var t=0;null!==this.regexp.exec(e);)t++;return t},getRefs:function(e,t){for(var r=[],a=null;null!==(a=this.regexp.exec(e));){var i=this.getData(a,t);r.push(i)}return r},getData:function(e,t){var r={};r._origText=e[0],r._extractor=this.name;var a=m.Utils.apply(this.params.authorParseParams,t.authorParseParams);for(var i in this.captureMap)if(!i.match(/^(NO|VOL)$/)){var n=e[this.captureMap[i]];n=m.Utils.strip(n);var o=i;switch(i){case"authors":o="author",n=m.library.Author.parseAuthorList(n,a);break;case"yearParens":case"yearAny":o="year";break;case"issueParens":o="issue";break;case"volumeParens":o="volume";break;case"pagesSingle":o="pages";break;case"monthNum":o="month";break;case"conferenceLocation":o="conference_location";break;case"conferenceDate":o="conference_date"}r[o]=n}return r}}},addExtractor:function(e,t,r){this.extractors.push(this.buildReferenceExtractor(e,t,r))},parse:function(e,t){var r=this;void 0===t&&(t={});var a=null;(e=(e=(e=(e=e.replace(/[\n\t\s]+/g," ")).replace(/^\s+/,"").replace(/\s+\.$/,"")).replace(/^Source:\s*/,"")).replace(/\s*www\.[a-z]+\.(org|com)\s*/,"")).match(/(.+)(10\.\d{4,5}\/[^\s]+)(.*)/)&&(a=RegExp.$2,e=(e=RegExp.$1+RegExp.$3).replace(/\s+/g," "));var i={};return r.getExtractors(t).forEach((function(t){var a=t.getRefs(e,{});if(a&&1==a.length){var n=r.rateData(a[0]);n>0&&n>r.rateData(i)&&(i=a[0])}})),a&&(i.doi=a.replace(/[\.\s]*$/,"")),i.journal&&(i.journal=i.journal.replace(/.*et\s+al\s+\.?\s+/,""),i.journal=i.journal.replace(/^[^A-Z]\s+/i,""),i.journal=i.journal.replace(/\s*[,;]+\s*$/,""),i.journal=i.journal.replace(/,\s+Vol[\.\s]*$/,"")),i.pages&&(i.pages=i.pages.replace(/^(e\d+)\s.*/,"$1")),i},rateData:function(e){var t=0;if(e.journal){if(!e.journal.match(/[A-Z]/i))return 0;if(1==e.journal.length)return 0;t+=3}if(e.volume&&(t+=2),e.year){var r=new Date,a=parseInt(r.getFullYear());if(parseInt(e.year)>a+2)return 0;t+=2}if(e.pages){if(e.pages.match(/(\d+)\s*[-\u2013]\s*(\d+)/)){var i=RegExp.$1,n=RegExp.$2;if(parseInt(n)-parseInt(i)>1e3)return 0;if(n.length<i.length){var o=i.slice(-1*n.length);if(parseInt(o)>parseInt(n))return 0}t+=3}else if(e.pages.match(/\d+\:\d+/))return 0;if(e.year&&e.pages==e.year)return 0;t+=2}if(e.month&&(t+=1),e.issue){if(e.issue.match(/(\d+)\s*-\s*(\d+)/)){var s=RegExp.$1,l=RegExp.$2;if(parseInt(l)<parseInt(s))return 0}t+=1}return e.doi&&(t+=1),t}}),m.library.BibliographicData=new m.library._BibliographicData,m.library._BibliographicInferer=m.Class.extend({parse:function(e){var t=this;return t.c={str:e,pub:{pubtype:"PP_ARTICLE"},got:{},claimed:[],matches:{}},t.parseNumbers(),t.parseStrings(),t.useLastNumbers(),t.postProcess(),m.library.Publication.autoClean(t.c.pub),t.c.pub},parseNumbers:function(){var e=this;e.c.matches.dashNumbers=e.matchAll(e.c.str,/\w?\d+\s?[\-\u2013]\s?\w?\d+/),e.c.matches.slashNumbers=e.matchAll(e.c.str,/\d+\/\d+/),e.c.matches.parensNumbers=e.matchAll(e.c.str,/\(\d+[\-\u2013\d]*\)/),e.c.matches.allNumbers=e.matchAll(e.c.str,/\d+[A-Z]?/),e.c.matches.yearNumbers=e.matchAll(e.c.str,/\d{4}/),e.c.matches.allNumberSegments=e.matchAll(e.c.str,/[\d\s\:\-\u2013\,\.\/\(\)]+/),e.c.matches.pagesP=e.matchAll(e.c.str,/[\(\s]p+a?g?e?s?\.?\s*\d+[\-\u2013]*\d*/i),e.c.matches.numPages=e.matchAll(e.c.str,/\d+\s?p+a?g?e?s?\.?/i),e.c.matches.yearMonthDays=e.matchAll(e.c.str,e.constructMonthRegEx("\\d{4}\\s","\\.?\\s\\d{1,2}")),e.c.matches.monthDayYears=e.matchAll(e.c.str,e.constructMonthRegEx("","\\.?\\s\\d{1,2},?\\s\\d{4}")),e.c.matches.dayMonthYears=e.matchAll(e.c.str,e.constructMonthRegEx("\\d{1,2}\\s","\\.?,?\\s\\d{4}")),e.c.matches.yearDayMonths=e.matchAll(e.c.str,e.constructMonthRegEx("\\d{4}\\s\\d{1,2}\\s","\\.?")),e.c.matches.monthYears=e.matchAll(e.c.str,e.constructMonthRegEx("","\\.?,?\\s\\d{4}")),e.c.matches.yearMonths=e.matchAll(e.c.str,e.constructMonthRegEx("\\d{4},?\\s","")),e.c.matches.monthDays=e.matchAll(e.c.str,e.constructMonthRegEx("","\\.?\\s\\d{1,2}")),e.c.matches.plosPages=e.matchAll(e.c.str,/[ae]\d+/i),e.c.matches.volumeNumbers=e.matchAll(e.c.str,/\Wvo?l?u?m?e?\.?\s?\d+|^vo?l?u?m?e?\.?\s?\d+/i),e.c.matches.issueNumbers=e.matchAll(e.c.str,/\Wis?s?u?e?\.?\s?\d+|no?\.?\s?\d+|numb?e?r?\.?\:?\s\d+/i),e.getPages(),e.getYears(),e.getVolumeIssue()},parseStrings:function(){var e=this;e.c.matches.quotes=e.matchAll(e.c.str,/"[^"]+"/),e.c.matches.nonNumbers=e.matchAll(e.c.str,/[^\W\d][^\d]*[^\W\d]\.?\??\)?\]?/),e.c.matches.wordsAndSuch=e.matchAll(e.c.str,/[\w\.\,\s]+/),e.c.matches.dois=e.matchAll(e.c.str,/10\.\S+/),e.c.matches.publishers=e.matchAll(e.c.str,/published by [\w\.\,\s]+/i),e.getAuthorTitleJournal(),e.getEditors(),e.getPublisher(),e.getJournal(),e.getDoi()},useLastNumbers:function(){var e=this,t=e.c.matches,r=e.unused(t.yearNumbers);1===r.length?(e.useSegment(r[0],"year",r[0][0]),a=e.unused(t.allNumbers)):r.length;var a=e.unused(t.allNumbers);if(!e.c.pub.volume&&e.c.pub.journal)for(var i=0;i<a.length;i++)e.c.got.journal&&a[i].index===e.c.got.journal.index+e.c.got.journal[0].length+1&&(e.useSegment(a[i],"volume",a[i][0]),i=a.length,a=e.unused(t.allNumbers));if(e.c.pub.volume&&!e.c.pub.issue)for(i=0;i<a.length;i++)e.c.got.volume&&a[i].index===e.c.got.volume.index+e.c.got.volume[0].length+1&&":"!==e.c.str.charAt(e.c.got.volume.index+e.c.got.volume[0].length)&&(e.useSegment(a[i],"issue",a[i][0]),i=a.length,a=e.unused(t.allNumbers));!e.c.pub.volume&&a.length&&"PP_BOOK"!==e.c.pub.pubtype&&(e.useSegment(a[0],"volume",a[0][0]),a=e.unused(t.allNumbers)),!e.c.pub.volume&&"PP_BOOK"!==e.c.pub.pubtype||e.c.pub.pages||!a.length||e.useSegment(a[0],"pages",a[0][0])},postProcess:function(){var e=this.c.pub;e.issue&&!e.volume&&(e.volume=e.issue,delete e.issue),e.editor&&e.editor.length&&e.address&&e.publisher&&(e.pubtype="PP_BOOK",delete e.volume,e.booktitle=e.journal,delete e.journal),this.c.pub=e},constructMonthRegEx:function(e,t){for(var r=["january","february","march","april","may","june","july","august","september","october","november","december","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],a="",i=0;i<r.length;i++)a+=e+r[i]+t,i!=r.length-1&&(a+="|");return new RegExp(a,"i")},matchAll:function(e,t){for(var r=e+"",a=0,i=[],n=r.match(t);n;)n.index+=a,""!==n[0].trim()&&i.push(n),(r=e.substring(n.index+n[0].length))&&r.length?(a=n.index+n[0].length,n=r.match(t)):n=null;return i},removePresses:function(e){return e.replace(/^.*university press /i,"").trim()},removeHyperlinks:function(e){return e.replace(/h?t?t?p?:?\/?\/?www\S+/i,"").trim()},removeAbbreviatedAuthors:function(e){return e.replace(/^.*\set\.?\sal[\.\s]+/i,"").trim()},countInstances:function(e,t){var r=0,a=e.match(new Regex(t,"g"));return a&&(r=a.length),r},unused:function(e){for(var t=this.c.claimed,r=[],a=0;a<e.length;a++)t.indexOf(e[a].index)<0&&t.indexOf(e[a].index+e[a][0].length-1)<0&&r.push(e[a]);return r},useSegment:function(e,t,r){this.c.pub[t]||(this.c.pub[t]=r,this.c.got[t]=e,this.claimSegment(e))},claimSegment:function(e){for(var t=e.index;t<e.index+e[0].length;t++)this.c.claimed.push(t)},unclaimedString:function(e){for(var t="",r=0;r<e[0].length;r++)this.c.claimed.indexOf(r+e.index)<0&&(t+=e[0][r]);return t},parseAuthor:function(e){var t=[],r=(e=e.replace(/^[^\w]+/,"").replace(/[^\w\.\)]+$/,"").replace(/[\+\*\[\(\d].*$/g,"").replace(/\s*(MD|PhD|MSc)\s*,?\s*/g,"").replace(/[0-9]{4}-[0-9]{4}/g,"").replace(/[0-9]{4}-/g,"")).split(/,\s*/);return r.length>=2&&t.push({last:r[0].trim(),first:r[1].trim()}),t},removeExtraCharacters:function(e){var t=(e=e.replace(/^[^\w]+/,"").replace(/[^\w\.\)]+$/,"")).split(" ").length,r=0,a=e.match(/\./g);return a&&(r=a.length),(r<=t/2||1===r)&&"."===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),","===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),(e=(e=(e=e.replace(/^\s*\|\s*/g,"")).replace(/\|.*/g,"")).replace(/\[.*/g,"")).trim()},getAuthorTitleJournal:function(){var e=this,t=e.c.matches,r=!1;if(t.nonNumbers.length>1){var a=e.c.str.substring(t.nonNumbers[0].index+t.nonNumbers[0][0].length,t.nonNumbers[1].index);a&&a.match(/\(?\d{4}\)?/)&&(r=!0)}for(var i=0;i<1;i++)if(t.nonNumbers[i]){var n=t.nonNumbers[i][0].split(".");if(r&&t.nonNumbers[i+1]){n=[t.nonNumbers[i][0]].concat(t.nonNumbers[i+1][0].split(/[\.\?!]/g));for(var o=0;o<n.length;o++)n[o].trim().length&&(t.nonNumbers[i+1][0].indexOf(n[o]+"?")>=0&&(n[o]=n[o]+"?"),t.nonNumbers[i+1][0].indexOf(n[o]+"!")>-1&&(n[o]=n[o]+"!"))}if(3===n.length||4===n.length&&""===n[3]||2===n.length&&2===t.nonNumbers.length&&r){if(n[0].length<8||n[1].length<8||n[2]&&n[2].length<8)continue;var s=n[0];s=s.replace(/original article: /i,"");var l=e.splitAuthors([],[s],",",!1);l&&l.length&&(s.indexOf("[Ed]")>=0?(e.c.pub.editor=l,e.c.pub.booktitle=n[1],e.c.pub.pubtype="PP_BOOK"):2===n.length||3==n.length&&""===n[2]?(e.c.pub.author=l,e.c.pub.booktitle=n[1].trim(),e.c.pub.pubtype="PP_BOOK"):(e.c.pub.author=l,e.c.pub.title=n[1].trim(),e.c.pub.journal=n[2].trim()),e.claimSegment(t.nonNumbers[i]),r&&e.claimSegment(t.nonNumbers[i+1]))}}},splitAuthors:function(e,t,r,a,i){for(var n=t[0].split(r),o=e.length,s=e.concat([]),l=!1,c=0;c<n.length;c++)if(n[c].match(/\w/)){var u=n[c];if(","===r&&n[c+1])u+=","+n[c+1],c++;else if(" "===r&&i)for(;n[c+1]&&n[c+1].match(/^[A-Z\s\.,]+$/);)u+=n[c+1],c++;var d=this.parseAuthor(u);(d[0]&&d[0].first&&d[0].last||d[0]&&d[0].collective)&&(d[0].last&&d[0].last.indexOf(" ")>=0&&(l=!0),e.push(d[0]))}return l&&(e=this.splitAuthors(s,t," ",!1,!0)),a&&e.length>o&&this.claimSegment(t),e},getPublisher:function(){for(var e=this,t=e.c.matches,r=0;r<t.publishers.length;r++){var a=e.unclaimedString(t.publishers[r]).trim().replace(/published by /i,"");e.useSegment(t.publishers[r],"publisher",a)}var i=e.unused(t.nonNumbers);for(r=0;r<i.length;r++)if(!(i[r][0].toLowerCase().indexOf("journal")>=0)){i.indexOf(":");var n=i[r][0].split(/[ -]/),o="";if(n.map((function(t){o||t.replace(/\W/g,"")in e.publisherCities&&(o=t)})),o){var s=i[r][0].split("Ltd.");s.length>1?s[0]=s[0]+"Ltd.":s=i[r][0].split(":"),s.length>1&&(s[0].indexOf(o)>=0?(e.c.pub.address=s[0].replace(/^[^\w]+/,"").replace(/[^\w\.\)]+$/,"").replace(/^p+\.\s+/i,""),e.c.pub.publisher=s[1].replace(/^[^\w]+/,"").replace(/[^\w\.\)]+$/,"")):(e.c.pub.address=s[1].replace(/^[^\w]+/,"").replace(/[^\w\.\)]+$/,""),e.c.pub.publisher=s[0].replace(/^[^\w]+/,"").replace(/[^\w\.\)]+$/,"")),e.claimSegment(i[r]))}}},getDoi:function(){var e,t=this.c.matches;1===t.dois.length&&("."===(e=t.dois[0][0]).charAt(e.length-1)&&(e=e.substring(0,e.length-1)),this.useSegment(t.dois[0],"doi",e))},getJournal:function(){for(var e=this,t=e.c.matches.nonNumbers,r=0;r<t.length;r++){var a=e.unclaimedString(t[r]).trim();if(!(a.indexOf("ublished")>=0)&&("("===(a=a.replace(/^source:\s*/i,"")).charAt(a.length-1)&&(a=a.substring(0,a.length-1)),a=e.removeExtraCharacters(a),a=e.removePresses(a),a=e.removeHyperlinks(a),"reprinted"!==(a=(a=e.removeAbbreviatedAuthors(a)).replace(/^[^\w]+/,"").replace(/[^\w\.\)]+$/,""))&&a&&a.length))return void e.useSegment(t[0],"journal",a)}},getEditors:function(){var e=this.c.matches.nonNumbers[0],t=[];if(e&&e[0]){e[0].toLowerCase();e[0].indexOf("[Ed]")>=0&&(t=this.splitAuthors(t,e,"[Ed]",!0)),t&&t.length&&(this.c.pub.editor=t)}},getPages:function(){for(var e=this,t=e.c.matches,r=0;r<t.dashNumbers.length;r++)if(!e.overlapping(t.dashNumbers[r],t.parensNumbers)){var a=t.dashNumbers[r][0].replace(/\s/g,"").replace(/\u2013/g,"-");return void((n=e.overlapping(t.dashNumbers[r],t.pagesP))?e.useSegment(t.pagesP[n-1],"pages",a):e.useSegment(t.dashNumbers[r],"pages",a))}if(t.plosPages.length)for(r=0;r<t.plosPages.length;r++)if(":"===e.c.str.charAt(t.plosPages[r].index-1)||" "===e.c.str.charAt(t.plosPages[r].index-1))return void e.useSegment(t.plosPages[r],"pages",t.plosPages[r][0]);if(t.pagesP.length){var i=e.unused(t.allNumbers);for(r=0;r<i.length;r++){var n;if(n=e.overlapping(i[r],t.pagesP)){a=t.pagesP[n-1][0].replace(/[\(\s]p+a?g?e?s?\.?\s*/,"").replace(/\s/g,"").replace(/\u2013/g,"-");return void e.useSegment(t.pagesP[n-1],"pages",a)}}}},getYears:function(){var e=this,t=e.c.matches;if(!e.c.pub.year){for(var r,a,i,n=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec","january","february","march","april","may","june","july","august","september","october","november","december"],o=0;o<t.yearMonthDays.length;o++)if(a=(r=t.yearMonthDays[o][0].replace(".","").match(/(\d{4})\s(\w+)\s(\d+)/))[2].toLowerCase(),(i=n.indexOf(a))>=0)return++i>12&&(i-=12),e.c.pub.year=r[1],e.c.pub.month=i,e.c.pub.day=r[3],void e.claimSegment(t.yearMonthDays[o]);for(o=0;o<t.monthDayYears.length;o++)if(a=(r=t.monthDayYears[o][0].replace(".","").replace(",","").match(/(\w+)\s(\d+)\s(\d{4})/))[1].toLowerCase(),(i=n.indexOf(a))>=0)return++i>12&&(i-=12),e.c.pub.year=r[3],e.c.pub.month=i,e.c.pub.day=r[2],void e.claimSegment(t.monthDayYears[o]);for(o=0;o<t.dayMonthYears.length;o++)if(!e.overlapping(t.dayMonthYears[o],t.volumeNumbers)&&!e.overlapping(t.dayMonthYears[o],t.issueNumbers)&&(a=(r=t.dayMonthYears[o][0].replace(".","").replace(",","").match(/(\d+)\s(\w+)\s(\d{4})/))[2].toLowerCase(),(i=n.indexOf(a))>=0))return++i>12&&(i-=12),e.c.pub.year=r[3],e.c.pub.month=i,e.c.pub.day=r[1],void e.claimSegment(t.dayMonthYears[o]);for(o=0;o<t.yearDayMonths.length;o++)if(!e.overlapping(t.yearDayMonths[o],t.volumeNumbers)&&!e.overlapping(t.yearDayMonths[o],t.issueNumbers)&&(a=(r=t.yearDayMonths[o][0].replace(".","").replace(",","").match(/(\d{4})\s(\d{1,2})\s(\w+)/))[3].toLowerCase(),(i=n.indexOf(a))>=0))return++i>12&&(i-=12),e.c.pub.year=r[1],e.c.pub.month=i,e.c.pub.day=r[2],void e.claimSegment(t.yearDayMonths[o]);for(var s=[],l=[],c=0;c<t.yearNumbers.length;c++)e.overlapping(t.yearNumbers[c],t.dashNumbers)&&s.push(c),e.overlapping(t.yearNumbers[c],t.volumeNumbers)&&s.push(c),e.overlapping(t.yearNumbers[c],t.issueNumbers)&&s.push(c),e.c.claimed.indexOf(t.yearNumbers[c].index)>=0&&s.push(c),"("===e.c.str.charAt(t.yearNumbers[c].index+t.yearNumbers[c][0].length)&&s.push(c),":"===e.c.str.charAt(t.yearNumbers[c].index+t.yearNumbers[c][0].length)&&s.push(c),"."===e.c.str.charAt(t.yearNumbers[c].index-1)&&s.push(c),e.c.str.charAt(t.yearNumbers[c].index+t.yearNumbers[c][0].length).match(/\d/)&&s.push(c),e.c.str.charAt(t.yearNumbers[c].index-1).match(/\d/)&&s.push(c),e.c.str.charAt(t.yearNumbers[c].index+t.yearNumbers[c][0].length).match(/[a-zA-Z]/)&&s.push(c),e.c.str.charAt(t.yearNumbers[c].index-1).match(/[a-zA-Z]/)&&s.push(c),e.c.str.substring(t.yearNumbers[c].index-10,t.yearNumbers[c].index).match(/reprinted/i)&&s.push(c),s.indexOf(c)<0&&l.push(c);var u=!0;for(c=0;c<l.length-1;c++)t.yearNumbers[l[c]][0]!==t.yearNumbers[l[c+1]][0]&&(u=!1);if(u&&l.length>1){var d=[];for(c=0;c<l.length;c++){var p=!1;e.overlapping(t.yearNumbers[l[c]],t.monthYears)&&(p=!0),e.overlapping(t.yearNumbers[l[c]],t.yearMonths)&&(p=!0),p?d.push(l[c]):e.claimSegment(t.yearNumbers[l[c]])}0===d.length&&d.push(l[0]),l=d}if(1===l.length){e.useSegment(t.yearNumbers[l[0]],"year",t.yearNumbers[l[0]][0]);var m=e.overlapping(t.yearNumbers[l[0]],t.slashNumbers);if(m){var h=t.slashNumbers[m-1],g=h[0].match(/(\d{2})\/\d{4}/);g&&g[1]||(g=h[0].match(/\d{4}\/(\d{2})/)),g&&g[1]&&e.useSegment(h,"month",g[1])}var f=e.overlapping(t.yearNumbers[l[0]],t.monthYears);if(f){var b=t.monthYears[f-1];if(a=(r=b[0].replace(".","").replace(",","").match(/(\w+)\s(\d{4})/))[1].toLowerCase(),(i=n.indexOf(a))>=0)return++i>12&&(i-=12),void e.useSegment(b,"month",i)}var y=e.overlapping(t.yearNumbers[l[0]],t.yearMonths);if(y){var v=t.yearMonths[y-1];if(a=(r=v[0].replace(".","").replace(",","").match(/(\d{4})\s(\w+)/))[2].toLowerCase(),(i=n.indexOf(a))>=0)return++i>12&&(i-=12),void e.useSegment(v,"month",i)}}var _=e.unused(t.monthDays);for(c=0;c<_.length;c++)if(!e.c.pub.month){var w=_[c];a=(r=w[0].replace(".","").replace(",","").match(/(\w+)\s(\d{1,2})/))[1].toLowerCase(),(i=n.indexOf(a))>=0&&(++i>12&&(i-=12),e.c.pub.day=r[2],e.useSegment(w,"month",i))}}},getVolumeIssue:function(){for(var e=this,t=e.c.matches,r=e.unused(t.allNumbers),a=0;a<r.length-1;a++){e.c.str.substring(r[a].index+r[a][0].length).match(/^\s?\(?suppl/i)&&(e.useSegment(r[a],"volume",r[a][0]),r=e.unused(t.allNumbers))}for(a=0;a<r.length;a++){(n=e.overlapping(r[a],t.volumeNumbers))&&(e.useSegment(t.volumeNumbers[n-1],"volume",r[a][0]),r=e.unused(t.allNumbers))}for(a=0;a<r.length-1;a++)if(!e.c.pub.volume){var i=e.overlapping(r[a+1],t.parensNumbers);if(i&&(r[a].index+r[a][0].length===t.parensNumbers[i-1].index||r[a].index+r[a][0].length+1===t.parensNumbers[i-1].index)){var n;(n=e.overlapping(r[a],t.volumeNumbers))?e.useSegment(t.volumeNumbers[n-1],"volume",r[a][0]):e.useSegment(r[a],"volume",r[a][0]);var o=t.parensNumbers[i-1][0].replace("(","").replace(")","");return void e.useSegment(t.parensNumbers[i-1],"issue",o)}}for(a=0;a<r.length;a++)":"===e.c.str.charAt(r[a].index+r[a][0].length)&&(e.useSegment(r[a],"volume",r[a][0]),r=e.unused(t.allNumbers));for(a=0;a<r.length;a++){var s=e.overlapping(r[a],t.issueNumbers);s&&(e.useSegment(t.issueNumbers[s-1],"issue",r[a][0]),r=e.unused(t.allNumbers))}for(a=0;a<r.length;a++){var l=e.overlapping(r[a],t.parensNumbers);l&&(e.useSegment(t.parensNumbers[l-1],"issue",r[a][0]),r=e.unused(t.allNumbers))}e.c.pub.volume||1!==r.length||(e.useSegment(r[0],"volume",r[0][0]),r=e.unused(t.allNumbers)),e.c.pub.volume&&e.c.pub.pages&&!e.c.pub.issue&&1===r.length&&(e.useSegment(r[0],"issue",r[0][0]),r=e.unused(t.allNumbers))},overlapping:function(e,t){for(var r=0,a=0;a<t.length;a++)e.index>=t[a].index&&e.index<t[a].index+t[a][0].length&&(r=a+1);return r},publisherCities:{Aberdeen:1,Abilene:1,Abingdon:1,Acton:1,Adelaide:1,Aignan:1,Akron:1,Alabama:1,Albans:1,Albany:1,Alberquerque:1,Alessandria:1,Alexandria:1,Alresford:1,Alto:1,Amenia:1,Amherst:1,Amsterdam:1,Andover:1,Angeles:1,Angers:1,Annandale:1,Annapolis:1,Antonio:1,Antwerp:1,Arbor:1,Argyll:1,Arlington:1,Armidale:1,Armonk:1,Artamon:1,Artarmon:1,Ashcroft:1,Asheville:1,Ashfield:1,Ashland:1,Athens:1,Atlanta:1,Auckland:1,Austin:1,Baltimore:1,Banff:1,Barbara:1,Barmenda:1,Barrytown:1,Basingstoke:1,Bath:1,Baton:1,Bayreuth:1,Bayswater:1,Beach:1,Belfast:1,Bellatera:1,Berkeley:1,Berks:1,Berlin:1,Bern:1,Bielefeld:1,Binghampton:1,Bingley:1,Birkenhead:1,Birmingham:1,Blackrock:1,Bloomington:1,"Boca Raton":1,Boise:1,Bologna:1,Bondi:1,Borehamwood:1,Boston:1,Boulder:1,Bridgewater:1,Brisbane:1,Bristol:1,Brixton:1,Broadway:1,Bronx:1,Brooklyn:1,Broomall:1,Brouzils:1,Brussels:1,Buckingham:1,Buckinghamshire:1,Budapest:1,Calcutta:1,Calgary:1,Camberwell:1,Cambridge:1,Cambridgeshire:1,Campbell:1,Canberra:1,Carbondale:1,Cardiff:1,Carlton:1,Carnforth:1,Carolina:1,Castle:1,Cedar:1,Champaign:1,Charleston:1,Charlotte:1,Charlottenlund:1,Charlottesville:1,Charnwood:1,Cheltenham:1,Chester:1,Chicago:1,Chichester:1,Christchurch:1,Cincinatti:1,Clark:1,Clayton:1,Clemson:1,Clifton:1,Colchester:1,Collingwood:1,Collins:1,Colombo:1,Columbia:1,Columbus:1,Conway:1,Copenhagen:1,Cornwall:1,Corvallis:1,County:1,"Covent Garden":1,Cranbury:1,Cresskill:1,Cruz:1,Dallas:1,Dame:1,Darmstadt:1,DeKalb:1,Delaware:1,Delhi:1,Denver:1,Derbyshire:1,Detroit:1,Devon:1,Diego:1,Dijon:1,Dingwall:1,Dorset:1,Dublin:1,Dunedin:1,Durban:1,Durham:1,Easthampton:1,Edinburgh:1,Edison:1,Edmonton:1,Enfield:1,Escondido:1,Essex:1,Eugene:1,Evanston:1,Ewing:1,Exeter:1,Fairview:1,Faisalabad:1,Farmington:1,Fayetteville:1,Fishponds:1,Fitzroy:1,Florence:1,Francisco:1,Frankfurt:1,Freeport:1,Fremantle:1,Frenchs:1,Gainesville:1,Gendale:1,Geneva:1,"Gen\xe8ve":1,Gent:1,Georgetown:1,Ghaziabad:1,Glasgow:1,Gloucester:1,Gloucestershire:1,Gosford:1,Goteborg:1,Gottingen:1,"G\xf6ttingen":1,Grahamstown:1,"Grand Rapids":1,Green:1,Greensboro:1,Grenoble:1,Hackney:1,Hadley:1,Hague:1,Halifax:1,Hamburg:1,Hamilton:1,Hampshire:1,Handsowrth:1,Hants:1,Haren:1,Harrogate:1,Harrow:1,Hastings:1,Hauppauge:1,Haven:1,Heidelberg:1,Helsinki:1,Herefordshire:1,Herts:1,Hexham:1,Hildesheim:1,Hillsdale:1,Hiroshima:1,Hoboken:1,Honolulu:1,Houston:1,Houten:1,Huddersfield:1,Hueva:1,Huntington:1,Huntsville:1,Iceland:1,Idaho:1,Illinois:1,Indianapolis:1,Inverness:1,Iowa:1,Ireland:1,Ithaca:1,Jaipur:1,Johannesburg:1,Jyvaskyla:1,Kalamazoo:1,Kansas:1,"Kansas City":1,Kassel:1,Kemptville:1,Kensington:1,Kent:1,Kenthurst:1,Keswick:1,Keynes:1,Kilda:1,Kildare:1,Kingsbury:1,Kingston:1,Kirksville:1,Knoxville:1,Krakow:1,"Krak\xf3w":1,Lancaster:1,Lanham:1,Lansing:1,Laurent:1,Lausanne:1,Lawrence:1,Lebanon:1,Leeds:1,Leicester:1,Leicestershire:1,Leichardt:1,Leiden:1,Lerwick:1,Leuven:1,Lewisburg:1,Lewiston:1,Lexington:1,Lincoln:1,Lincolnshire:1,Liverpool:1,Llandysul:1,Lleida:1,London:1,Lothian:1,Louis:1,Louisville:1,Louvain:1,Loveland:1,Lubbock:1,Lucia:1,Lumpur:1,Lund:1,Luton:1,Macon:1,Madison:1,Madrid:1,Manchester:1,Manila:1,Manningtree:1,Mansfield:1,Marino:1,Markham:1,Maryland:1,Marylebone:1,Meath:1,Melbourne:1,Middlesex:1,Middleton:1,Middletown:1,Milan:1,Milsons:1,"Milton Keynes":1,Mineola:1,Minneapolis:1,Mississippi:1,Montpellier:1,Montreal:1,"Montr\xe9al":1,Monza:1,Morgantown:1,Moro:1,Msida:1,Mulgrave:1,Munchen:1,Munich:1,Munster:1,Nanterre:1,Nashville:1,Nedlands:1,Neuilly:1,Nevada:1,"New South Wales":1,"New York":1,Newark:1,Newcastle:1,"Newcastle-upon-tyne":1,Norfolk:1,Norman:1,Northam:1,Northampton:1,Northumberland:1,Norwich:1,Norwood:1,Nottingham:1,Novato:1,NSW:1,Oakland:1,Oakville:1,Odense:1,Okayama:1,Ontario:1,Orchard:1,Oslo:1,Ottawa:1,Oxford:1,Oxfordshire:1,Oxon:1,Paderborn:1,Pahrump:1,Paris:1,Park:1,Parker:1,Parkville:1,Pasadena:1,Pathumthani:1,Paul:1,Penrith:1,Philadelphia:1,Pietermaritzburg:1,Piscataway:1,Pittsburg:1,Pittsburgh:1,Plymouth:1,Pokfulam:1,Pomfret:1,Pontefract:1,Portland:1,Portsmouth:1,Potsdam:1,Pradesh:1,Praha:1,Pretoria:1,Princeton:1,Providence:1,Provo:1,Pullman:1,Pymble:1,Quebec:1,"Qu\xe9bec":1,Queensland:1,Rajasthan:1,Raleigh:1,Rapids:1,Raton:1,Raynaud:1,Reading:1,Redwood:1,Regina:1,Rennes:1,Reno:1,"Richland Hills":1,Ridgewood:1,Ringwood:1,Riverside:1,Roanoke:1,Rochester:1,Rockaway:1,Rockville:1,Roma:1,Rondebosch:1,"Rose Bay":1,Rossshire:1,Rouge:1,Rushcutters:1,Saarbrucken:1,Sacranebti:1,"Saint-denis":1,Etienne:1,Sakai:1,Salem:1,Sandpoint:1,Scotia:1,Scotsville:1,Seattle:1,Selinsgrove:1,Seoul:1,Sevitengasse:1,Sewanee:1,Sheffield:1,Shropshire:1,Sioux:1,"S\xf6dert\xe4lje":1,Soignies:1,Somerset:1,Somerville:1,Southport:1,Southville:1,Staffs:1,Stanford:1,Stirling:1,Stockbridge:1,Stockholm:1,Stocksfield:1,Street:1,Stroud:1,Stuttgart:1,Suffolk:1,Surrey:1,Sussex:1,Sydney:1,Tampa:1,Tasmania:1,Temecula:1,Tempe:1,Texas:1,Tokyo:1,Toronto:1,Toulouse:1,Townsend:1,Trenton:1,Trier:1,Tubingen:1,"T\xfcbingen":1,Tucson:1,Turku:1,Turnhout:1,Tuscaloosa:1,Tuscon:1,Udine:1,Uppsala:1,Urbana:1,Utah:1,Utrecht:1,Vancouver:1,Vaxjo:1,Venice:1,Vergne:1,Victoria:1,Waco:1,Wales:1,Warwickshire:1,Washington:1,Waterloo:1,Weinheim:1,Wellington:1,Wells:1,Westport:1,Whitefish:1,Willowdale:1,Wilmington:1,Winchester:1,Winfield:1,Winnipeg:1,Woodstock:1,Woollongong:1,Wurzburg:1,Yarra:1,York:1,Yorkshire:1,Zollikofen:1,Zurich:1}}),m.library.BibliographicInferer=new m.library._BibliographicInferer,m.library._Date=m.Class.extend({getFields:function(){return[{name:"year"},{name:"month"},{name:"day"},{name:"unparsed"},{name:"literal"},{name:"season"}]},autoClean:function(e){var t=this.getFields();m.Utils.isNumeric(e)&&(e=this.format(e,"MMM DD, YYYY")),m.Utils.isString(e)&&(e=this.parseDate(e));for(var r=0;r<t.length;r++){var a=t[r].name;e[a]&&m.Utils.isString(e[a])&&(e[a]=e[a].replace(/^\s*/,""),e[a]=e[a].replace(/\s*$/,""),"year"!=a&&"day"!=a&&"month"!=a||e[a].match(/^\d+$/)&&(e[a]=e[a]))}if(e.month&&m.Utils.isString(e.month)){var i=this.monthMap(),n=e.month.toUpperCase();i[n]&&(e.month=i[n])}return e},yearString:function(e){return e.year?e.year.toString():""},toString:function(e,t){if(!e)return"";if(t=t||{},this.isTimestamp(e)){var r=new Date(1e3*e);return this.format(r,"MMM DD, YYYY, h:mm:ss a")}var a=e.unparsed,i=!1;""!==a&&null!=a&&(i=!0);var n=e.year,o=!1;""!==n&&null!=n&&(o=!0);var s=e.month,l=!1;""!==s&&null!=s&&(l=!0);var c=e.day,u=!1;""!==c&&null!=c&&(u=!0);var d=e.season,p=!1;""!==d&&null!=d&&(p=!0);var h=e.literal,g=!1;""!==h&&null!=h&&(g=!0),n=n||0,s=s||1,m.Utils.isNumeric(s)||(s=1),c=c||1,m.Utils.isNumeric(c)||(c=1);r=new Date(n,s-1,c);return o&&l&&u?t&&t.dashed?this.format(r,"YYYY-MM-DD"):this.format(r,"MMM DD, YYYY"):o&&l?t&&t.dashed?this.format(r,"YYYY-MM"):this.format(r,"MMMM YYYY"):l&&u?t&&t.dashed?this.format(r,"MM-DD"):this.format(r,"MMMM DD"):o&&p?t&&t.dashed?this.format(r,"YYYY"):d+" "+n:g?(t&&t.escape&&(h="{"+h+"}"),h):o?this.format(r,"YYYY"):i?e.unparsed:""},toCSL:function(e){var t={},r=[];return e.year&&e.month&&e.day?(r.push(e.year+""),r.push(e.month+""),r.push(e.day+"")):e.year&&e.month?(r.push(e.year+""),r.push(e.month+"")):e.year&&r.push(e.year+""),e.literal?t.literal=e.literal:r.length&&(t["date-parts"]=[r],e.season&&("Spring"==e.season?t.season=1:"Summer"==e.season?t.season=2:"Autumn"==e.season||"Fall"==e.season?t.season=3:"Winter"==e.season?t.season=4:t.season=e.season)),t},fromNow:function(e,t){var r=new Date(t),a=new Date(e),i=Math.abs(a-r)/1e3,n=i/60,o=n/60,s=o/24,l=s/30,c=l/12,u="a few seconds ago";return i>=60&&i<120?u="a minute ago":i>=120&&(u=Math.floor(n)+" minutes ago",n>=60&&n<120?u="an hour ago":o>2&&o<24?u=Math.floor(o)+" hours ago":o>=24&&(u="a day ago",s>=2&&s<31?u=Math.floor(s)+" days ago":s>=31&&(u="a month ago",l>=2&&l<12?u=Math.floor(l)+" months ago":l>=12&&(u="a year ago",c>=2&&(u=Math.floor(c)+" years ago"))))),u},format:function(e,t){var r=e;r instanceof Date||(r=new Date(r.toString()));var a={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},i={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},n="";if(!isNaN(r.getTime())){var o=r.getDate().toString(),s=o;1===s.length&&(s="0"+s);var l=(r.getMonth()+1).toString(),c=l;1===c.length&&(c="0"+c);var u=r.getFullYear().toString(),d=u.replace(/^../,""),p=r.getHours(),m=p,h="am";m>=12&&(h="pm",m=(m-12).toString()),p=p.toString();var g=r.getMinutes().toString();1===g.length&&(g="0"+g);var f=r.getSeconds().toString();1===f.length&&(f="0"+f),n=a[l]+" "+s+", "+u,"YYYY-MM-DD"===t?n=u+"-"+c+"-"+s:"MM/DD/YYYY"===t?n=c+"/"+s+"/"+u:"M/D/YYYY"===t?n=l+"/"+o+"/"+u:"YYYY-MM"===t?n=u+"-"+c:"MMMM YYYY"===t?n=i[l]+" "+u:"MMMM DD"===t?n=i[l]+" "+s:"MMM DD"===t?n=a[l]+" "+s:"MMM DD, YYYY, h:mm:ss a"===t?n=a[l]+" "+s+", "+u+", "+m+":"+g+":"+f+" "+h:"MM-DD"===t?n=c+"-"+s:"D MMM"===t?n=o+" "+a[l]:"D MMM YY"===t?n=o+" "+a[l]+" "+d:"YYYY"===t?n=u:"h:mma - D MMM YY"===t?n=m+":"+g+h+" - "+o+" "+a[l]+" "+d:"MMM DD, YYYY h:mma"===t&&(n=a[l]+" "+s+", "+u+" "+m+":"+g+h)}return n},isTimestamp:function(e){if(m.Utils.isNumeric(e))return!0},hasValue:function(e){return void 0!==e&&(void 0!==e.year||void 0!==e.month||void 0!==e.day||void 0!==e.literal||!!this.isTimestamp(e))},extractDate:function(e,t,r){var a=t+"year",i=t+"month",n=t+"day",o=t+"season";e[a]&&(e[a]=e[a]+"",e[a]=e[a].replace(/^0+/,""),e[a]=e[a].replace(/\s/g,""),e[a].match(/^\d+$/)||delete e[a]);var s=this.monthMap();e[i]&&(e[i]=e[i]+"",e[i]=e[i].replace(/^0+/,""),e[i]=e[i].replace(/\s/g,""),e[i]=e[i].replace(/\.$/,""),s[e[i].toUpperCase()]&&(e[i]=s[e[i].toUpperCase()]),e[i].match(/^\d+$/)||delete e[i]),e[n]&&(e[n]=e[n]+"",e[n]=e[n].replace(/^0+/,""),e[n]=e[n].replace(/\s/g,""),e[n].match(/^\d+$/)?(e[n]<1||e[n]>31)&&delete e[n]:delete e[n]),e[o]&&(e[o]=e[o]+"",e[o]=e[o].replace(/^\s+/,"").replace(/\s+$/g,"")),(e[a]||e[i]||e[n]||e[o])&&(e[a]&&m.Utils.isString(e[a])&&(e[a]=e[a]),e[i]&&m.Utils.isString(e[i])&&(e[i]=e[i]),e[n]&&m.Utils.isString(e[n])&&(e[n]=e[n]),e[r]={year:e[a],month:e[i],day:e[n]},e[o]&&(e[r].season=e[o],delete e[o]),delete e[a],delete e[i],delete e[n])},fixTwoDigitYear:function(e){var t="19",r=parseInt((new Date).getFullYear())-2e3;return parseInt(e)<=r&&(t=20),t+e},parseDate:function(e){var t,r,a,i,n=this.monthMapAbbr();for(r in t=[],n)n.hasOwnProperty(r)&&t.push(r);var o="("+t.join("|")+")";for(r in t=[],n=this.monthMap())n.hasOwnProperty(r)&&t.push(r);var s="("+t.join("|")+")";if(e=e.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," "),r=new RegExp("^\\{(.+)\\}$",""),(t=e.match(r))&&t[1]){var l=this.parseLiteral(t[1]);return l.year&&m.Utils.isString(l.year)&&l.year.match(/^\d+$/)&&(l.year=l.year),l}for(r in t=[],i=this.seasonsMap())i.hasOwnProperty(r)&&t.push(r);var c="\\b("+t.join("|")+")\\b";if(r=new RegExp("(.*)"+c+"(.*)","i"),(t=e.match(r))&&t[0]){for(t.shift(),r=0;r<t.length;r++)i[t[r].toUpperCase()]&&(a=i[t[r].toUpperCase()],t[r]="");e=t.join("")}var u={year:null,month:null,day:null,unparsed:e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/(at|T)?\s*\d\d?:\d\d:\d\d\s*[\(\)A-Z]+\s*[\-\+]\d+/i,"")).replace(/(at|T)?\s*\d\d?:\d\d:\d\d\s*[\(\)A-Z]+/i,"")).replace(/(at|T)?\s*\d\d?:\d\d:\d\d\s*[\-\+]\d+\s*[\(\)A-Z]+/i,"")).replace(/(at|T)?\s*\d\d?:\d\d:\d\d\s*[\-\+]\d+/i,"")).replace(/(at|T)?\s*\d\d?:\d\d\s*[\(\)A-Z]+\s+[\(\)A-Z]+[\-\+]\d+/i,"")).replace(/(at|T)?\s*\d\d?:\d\d\s*[\(\)A-Z]+\s+[\(\)A-Z]+/i,"")).replace(/(at|T)?\s*\d\d?:\d\d\s*[\(\)A-Z]+/i,"")).replace(/(at|T)?\s*\d\d:\d\d:\d\d/,"")).replace(/\s\d\d:\d\d\s*$/i,"")).replace(/\.000Z/,"")).replace(/^\s+/,"").replace(/[,\s]+$/,"").replace(/\s+/g," ")).replace(/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday),?\s*/i,"")).replace(/^(\d+)\.\s+(.+)/,"$1 $2")).replace(/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s*/i,"")).replace(/^(Mo|Di|Mi|Do|Fr|Sa|So),?\s*/i,"")).replace(/(\d+)(th|rd|nd|st)/,"$1")).replace(/\/+$/,"")).replace(/(.+),\s+(\d\d\d\d)$/,"$1 $2")).replace(new RegExp("(.*)"+o+"\\.(.*)","i"),"$1$2$3")).replace(/Sept\b\.?/i,"Sep")).replace(/undefined/i,"")).replace(/\/+/g,"/")).replace(/-\s*$/,"")},d=e.match(new RegExp("^"+s+"\\s+(\\d+)\\s+(\\d{4})","i"));if(!d||!d[3]||u.year||u.month||u.day||(u.month=d[1].toUpperCase(),u.day=d[2],u.year=d[3]),!(d=e.match(/^(\d{1,2})[\-\/\s\.](\d{1,2})[\-\/\s\.](\d\d\d\d)/))||!d[3]||u.year||u.month||u.day||(parseInt(d[1])>12?(u.month=d[2],u.day=d[1],u.year=d[3]):(u.month=d[1],u.day=d[2],u.year=d[3])),!(d=e.match(/^(\d{1,2})[\-\/\s\.](\d{1,2})[\-\/\s\.](\d\d)/))||!d[3]||u.year||u.month||u.day||(parseInt(d[1])>12?(u.month=d[2],u.day=d[1],u.year=this.fixTwoDigitYear(d[3])):(u.month=d[1],u.day=d[2],u.year=this.fixTwoDigitYear(d[3]))),!(d=e.match(/^(\d{1,2})\s*\.\s*(\d{1,2})\s*\.\s*(\d{4})/))||!d[3]||u.year||u.month||u.day||(parseInt(d[2])>12?(u.month=d[1],u.day=d[2],u.year=d[3]):(u.month=d[2],u.day=d[1],u.year=d[3])),(d=e.match(/^(\d{4})[\-\/\.](\d\d)$/))&&d[2]&&!u.year&&!u.month&&(u.year=d[1],u.month=d[2]),!(d=e.match(/^(\d{4})[\-\/\.](\d{1,2})[\-\/\.](\d{1,2})/))||!d[3]||u.day||u.month||u.year||(u.day=d[3],u.month=d[2],u.year=d[1]),!(d=e.match(new RegExp("^(\\d{4})/(\\d{1,2})/"+s+"$","i")))||!d[3]||u.day||u.month||u.year||(u.month=d[3],u.day=d[2],u.year=d[1]),(d=e.match(/^(\d{1,2})[\-\/](\d{1,2})[\-\/](\d{4})/))&&d[3]&&(u.day||u.month||u.year||(u.day=d[1],u.month=d[2],u.year=d[3])),!(d=e.match(new RegExp("^(\\d{1,2})[\\-\\/\\s]+"+s+"[\\-\\/\\s]+(\\d{2})$","i")))||!d[3]||u.day||u.month||u.year||(u.day=d[1],u.month=d[2],u.year=this.fixTwoDigitYear(d[3])),!(d=e.match(new RegExp("^"+s+"\\s+(\\d{1,2})\\s*,\\s*(\\d{4})$","i")))||!d[3]||u.day||u.month||u.year||(u.month=d[1],u.day=d[2],u.year=d[3]),(d=e.match(new RegExp("^"+s+"\\s+(\\d{4})$","i")))&&d[2]&&!u.month&&!u.year&&(u.month=d[1],u.year=d[2]),(d=e.match(new RegExp("^"+s+"$","i")))&&d[1]&&!u.month&&!u.year&&(u.month=d[1]),!(d=e.match(new RegExp("^(\\d+)\\s+"+s+"\\.?\\s+(\\d{4})$","i")))||!d[3]||u.day||u.month||u.year||(u.day=d[1],u.month=d[2],u.year=d[3]),!(d=e.match(new RegExp("^(\\d\\d?)\\s+"+s+"$","i")))||!d[2]||u.day||u.month||u.year||(u.day=d[1],u.month=d[2]),(d=e.match(new RegExp("^(\\d{4})\\s+"+s+"$","i")))&&d[2]&&!u.month&&!u.year&&(u.year=d[1],u.month=d[2]),(d=e.match(new RegExp("^(\\d{4})\\s+"+s+"\\s*-\\s*"+s+"$","i")))&&d[2]&&!u.month&&!u.year&&(u.year=d[1],u.month=d[2]),!(d=e.match(new RegExp("^(\\d{4})[\\s\\-]+"+s+"[\\s\\-]+(\\d+)$","i")))||!d[3]||u.day||u.month||u.year||(u.year=d[1],u.month=d[2],u.day=d[3]),(d=e.match(/^(\d{4})\s[A-Z].*/))&&d[1]&&!u.year&&(u.year=d[1]),u.month){var p=this.monthMap(),h=u.month.toUpperCase();p[h]&&(u.month=p[h]),u.month.match(/^\d+$/)?(parseInt(u.month)<1||parseInt(u.month)>12)&&(u.month=null,u.day=null):u.month=null}if(!u.year){var g=!1;e.match(s)&&(g=!0),e.match(/\b(BC|AD|CENTURY)\b/i)&&(g=!0),e.match(/^\d\d\d\d/)&&(g=!0),e.match(/\d\d\d\d$/)&&(g=!0),g&&(u=this.parseLiteral(e))}return u.month&&(u.month=u.month.replace(/^0+/,""),m.Utils.isString(u.month)&&u.month.match(/^\d+$/)&&(u.month=parseInt(u.month)+""),""===u.month&&(u.month=null)),u.day&&(u.day=u.day.replace(/^0+/,""),m.Utils.isString(u.day)&&u.day.match(/^\d+$/)&&(u.day=parseInt(u.day)+""),""===u.day&&(u.day=null)),u.year&&m.Utils.isString(u.year)&&u.year.match(/^\d+$/)&&(u.year=parseInt(u.year)+""),a&&(u.season=a),null===u.day&&delete u.day,null===u.month&&delete u.month,null===u.year&&delete u.year,u.literal&&u.literal===u.year&&delete u.literal,u.day&&u.month&&u.year&&delete u.unparsed,u},parseLiteral:function(e){var t={literal:e},r=new RegExp("(\\d{4})","i"),a=e.match(r);return a&&a[1]&&(t.year=a[1]),t},monthMapAbbr:function(){return{JAN:"1",FEB:"2",MAR:"3",APR:"4",MAY:"5",JUN:"6",JUL:"7",AUG:"8",SEP:"9",OCT:"10",NOV:"11",DEC:"12"}},monthMapFull:function(){var e={};return[["JANUARY","JANVIER","JANUAR","ENERO","GENNAIO","GEN","ENE"],["FEBRUARY","F\xc9VRIER","FEBRUAR","FEBRERO","FEBBRAIO","FEV"],["MARCH","MARS","M\xc4RZ","MARZO"],["APRIL","AVRIL","ABRIL","APRILE","AVR","ABR"],["MAY","MAI","MAYO","MAGGIO","MAG"],["JUNE","JUIN","JUNI","JUNIO","GIUGNO","GIU"],["JULY","JUILLET","JULI","JULIO","LUGLIO"],["AUGUST","AO\xdbT","AGOSTO","AGO","AOU"],["SEPTEMBER","SEPTEMBRE","SEPTIEMBRE","SETTEMBRE","SET"],["OCTOBER","OCTOBRE","OKTOBER","OCTUBRE","OTTOBRE","OTT","OKT"],["NOVEMBER","NOVEMBRE","NOVIEMBRE"],["DECEMBER","DECEMBRE","D\xc9CEMBRE","DEZEMBER","DICIEMBRE","DICEMBRE","DIC","DEZ"]].forEach((function(t,r){t.forEach((function(t){e[t]=r+1+""}))})),e},seasonsMap:function(){var e={Spring:["Fr\xfchling","primavera","udaberria"],Summer:["Sommer","estate","uda"],Autumn:["Herbst","autunno","udazkena"],Winter:["Winter","inverno","negua"]},t={};for(var r in e)e.hasOwnProperty(r)&&(t[r.toUpperCase()]=r,e[r].forEach((function(e){t[e.toUpperCase()]=r})));return t},monthMap:function(){var e,t={},r=this.monthMapAbbr();for(e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);for(e in r=this.monthMapFull())r.hasOwnProperty(e)&&(t[e]=r[e]);return t}}),m.library.Date=new m.library._Date,m.library._Diff=m.Class.extend({diff:function(e,t,r){e=m.library.Publication.getPersistentData(e);var a=[],i=(t=m.library.Publication.getPersistentData(t)).pubtype,n=m.library.PublicationFields.getFields(),o=this.getExcludedFields(),s=m.Array.mapBoolean(o);if(void 0!==r)for(var l=0;l<r.length;l++)s[r[l]]=!1;var c=0,u=0,d=0,p=[];for(l=0;l<n.length;l++){var h=n[l].name;if(!0!==s[h]){var g=this.getFieldValueString(e,h),f=this.getFieldValueString(t,h);"journal"===h&&g&&f&&(g=g.replace(/\./g,""),f=f.replace(/\./g,"")),null===g&&null===f||(null===g?(c++,a.push({field:h,type:"add",old:g,new:f})):null===f?(u++,a.push({field:h,type:"delete",old:g,new:f})):g!==f?(d++,a.push({field:h,type:"mod",old:g,new:f})):g===f?p.push(h):console.log("Weird diff",h,g,f))}}var b=m.library.Publication.formatAuthorYear(t);return{pubId:t._id,pubLabel:b,pubType:i,pubDiffs:a,nAdded:c,nRemoved:u,nChanged:d,fieldsNotChanged:p}},hasValue:function(e,t){var r=m.library.PublicationFields.getField(t);t.fieldType;return"author"===r.dataType?m.library.Author.hasValue(e[t]):"date"===r.dataType?m.library.Date.hasValue(e[t]):"array"===r.dataType?m.Utils.isArray(e[t])&&e[t].length>0:""!==e[t]&&void 0!==e[t]},getFieldValueString:function(e,t){var r=m.library.PublicationFields.getField(t);r.fieldType;return this.hasValue(e,t)?"author"===r.dataType?m.library.Author.toString(e[t],{output:"forDiff"}):"date"===r.dataType?m.library.Date.toString(e[t]):"array"===r.dataType?e[t].join("\n"):e[t]:null},getExcludedFields:function(){return["autocompleted","collection_timestamps","crawl_urls","dup_sha1","duplicates","id_list","sha1","source","subfolders","journal_checked","xref"]},formatDiffHtml:function(e){m.Utils.isArray(e)||(e=[e]);for(var t=new diff_match_patch,r=[],a=0;a<e.length;a++){var i=[],n=e[a],o=(n.pubId,n.pubLabel),s=n.pubType,l=m.library.PublicationFields.getFieldsForPubType(s),c=m.Array.toMap(l,"name");i.push('<div class="pp-pub-diff-item">'),i.push(['<div class="pp-pub-diff-header">',o,"</div>"].join(""));var u=n.pubDiffs;0===u.length&&i.push(['<div class="pp-pub-diff-nochanges">',"No changes made.","</div>"].join(""));for(var d=[],p=[],h=[],g=0;g<u.length;g++){var f="",b=u[g],y=b.field,v=y;if(c[y])v=c[y].label;if("pubtype"==y&&(v="Type of item"),f+='<div class="pp-pub-diff-field">',f+=['<div class="pp-pub-diff-fieldlabel">',v,"</div>"].join(""),"add"===b.type)f+=['<div class="pp-pub-diff-fieldvalue">',m.Utils.midEllipsis(b.new,80),"</div>"].join("");else if("mod"===b.type){var _=b.old+"",w=b.new+"";"pubtype"==y&&(_=m.library.PublicationTypes.getPubType(b.old).label,w=m.library.PublicationTypes.getPubType(b.new).label);var P=t.diff_main(_,w);t.diff_cleanupSemantic(P),diffHtml=t.diff_prettyHtml(P),"url"!==y&&(diffHtml=m.String.truncate(diffHtml,200)),f+=['<div class="pp-pub-diff-fieldvalue">',diffHtml,"</div>"].join("")}else b.type;f+="</div>","add"===b.type?d.push(f):"mod"===b.type?p.push(f):h.push(f)}d.length>0&&(i.push('<div class="pp-pub-diff-type">Fields added</div>'),i.push(d.join(""))),p.length>0&&(i.push('<div class="pp-pub-diff-type">Fields updated</div>'),i.push(p.join(""))),h.length>0&&(i.push('<div class="pp-pub-diff-type">Fields removed</div>'),i.push(h.join(""))),i.push("</div>"),r.push(i.join(""))}return r.join("\n")}}),m.library.Diff=new m.library._Diff,m.library._Jurisdictions=m.Class.extend({jurisdictions:{us:{name:"United States",abbr:[{name:"SCOTUS",court:"Supreme Court"},{name:"U.S.",court:"Supreme Court",default:!0}]},"us:ak":{name:"US|Alaska",abbr:[{name:"Alaska",court:"Supreme Court"},{name:"Alaska Ct. App.",court:"Court of Appeals"}]},"us:al":{name:"US|Alabama",abbr:[{name:"Ala.",court:"Supreme Court"},{name:"Ala. Civ. App.",court:"Court of Civil Appeals"},{name:"Ala. Crim. App.",court:"Court of Criminal Appeals"},{name:"Ala. Ct. App.",court:"Court of Appeals"}]},"us:ar":{name:"US|Arkansas",abbr:[{name:"Ark.",court:"Supreme Court"},{name:"Ark. Ct. App.",court:"Court of Appeals"}]},"us:as":{name:"US|American Samoa",abbr:[]},"us:az":{name:"US|Arizona",abbr:[{name:"Ariz.",court:"Supreme Court"},{name:"Ariz. Ct. App.",court:"Court of Appeals"},{name:"Ariz. T.C.",court:"Tax Court"}]},"us:c":{name:"US|Federal Circuit",abbr:[{name:"Federal Circuit",court:"Court of Appeals"},{name:"Fed. Cir.",court:"Court of Appeals",default:!0},{name:"Vet. App.",court:"Court of Appeals for Veterans Claims"},{name:"Ct. Cl.",court:"Court of Claims"},{name:"C.C.P.A.",court:"Court of Customs and Patent Appeals"},{name:"Ct. Intl. Trade",court:"Court of International Trade"},{name:"Comm. Ct.",court:"Commerce Court"},{name:"Cust. Ct.",court:"Customs Court"},{name:"Emer. Ct. App.",court:"Emergency Court of Appeals"},{name:"FISA Ct.",court:"Foreign Intelligence Surveillance Court"},{name:"FISA Ct. Rev.",court:"Foreign Intelligence Surveillance Court of Review"},{name:"J.P.M.L.",court:"Judicial Panel on Multidistrict Litigation"},{name:"M.C.",court:"Court of Military Commission Review"},{name:"Tax Ct.",court:"Tax Court"},{name:"Temp. Emerg. Ct. App.",court:"Temporary Emergency Court of Appeals"},{name:"Test.",court:"Testing Supreme Court"},{name:"Fed. Cl.",court:"Court of Federal Claims"},{name:"U.S.J.C.",court:"Judicial Conference Committee"},{name:"C.A.A.F.",court:"Court of Appeals for the Armed Forces"}]},"us:c0":{name:"US|D.C. Circuit",abbr:[{name:"D.C. Cir.",court:"Court of Appeals",default:!0},{name:"Dist. of Columbia Circuit",court:"Court of Appeals"}]},"us:c0:dc.d":{name:"US|D.C. Circuit|D. District of Columbia",abbr:[{name:"Bankr. D.C.",court:"Bankruptcy Court"}]},"us:c1":{name:"US|First Circuit",abbr:[{name:"1st Circuit",court:"Court of Appeals"},{name:"1st Cir.",court:"Court of Appeals",default:!0},{name:"1st Cir. BAP",court:"Bankruptcy Appellate Panel"}]},"us:c10":{name:"US|Tenth Circuit",abbr:[{name:"10th Circuit",court:"Court of Appeals"},{name:"10th Cir.",court:"Court of Appeals",default:!0},{name:"10th Cir. BAP",court:"Bankruptcy Appellate Panel"}]},"us:c10:co.d":{name:"US|Tenth Circuit|D. Colorado",abbr:[{name:"D. Colorado",court:"District Court"},{name:"D. Colo.",court:"District Court",default:!0},{name:"Bankr. D. Colo.",court:"Bankruptcy Court"}]},"us:c10:ks.d":{name:"US|Tenth Circuit|D. Kansas",abbr:[{name:"D. Kansas"},{name:"Bankr. D. Kan.",court:"Bankruptcy Court"}]},"us:c10:nm.d":{name:"US|Tenth Circuit|D. New Mexico",abbr:[{name:"D. New Mexico",court:"District Court"},{name:"D.N.M.",court:"District Court",default:!0},{name:"Bankr. D.N.M.",court:"Bankruptcy Court"}]},"us:c10:ok.ed":{name:"US|Tenth Circuit|E.D. Oklahoma",abbr:[{name:"E.D. Oklahoma",court:"District Court"},{name:"E.D. Okla.",court:"District Court",default:!0},{name:"Bankr. E.D. Okla.",court:"Bankruptcy Court"}]},"us:c10:ok.nd":{name:"US|Tenth Circuit|N.D. Oklahoma",abbr:[{name:"N.D. Oklahoma",court:"District Court"},{name:"N.D. Okla.",court:"District Court",default:!0},{name:"Bankr. N.D. Okla",court:"Bankruptcy Court"}]},"us:c10:ok.wd":{name:"US|Tenth Circuit|W.D. Oklahoma",abbr:[{name:"W.D. Oklahoma",court:"District Court"},{name:"W.D. Okla.",court:"District Court",default:!0},{name:"Bankr. W.D. Okla.",court:"Bankruptcy Court"}]},"us:c10:ut.d":{name:"US|Tenth Circuit|D. Utah",abbr:[{name:"D. Utah",court:"United States District Court"},{name:"Bankr. D. Utah",court:"Bankruptcy Court"}]},"us:c10:wy.d":{name:"US|Tenth Circuit|D. Wyoming",abbr:[{name:"D. Wyoming",court:"District Court"},{name:"Bankr. D. Wyo.",court:"Bankruptcy Court"}]},"us:c11":{name:"US|Eleventh Circuit",abbr:[{name:"11th Circuit",court:"Court of Appeals"},{name:"11th Cir.",court:"Court of Appeals",default:!0}]},"us:c11:al.md":{name:"US|Eleventh Circuit|M.D. Alabama",abbr:[{name:"MD Alabama",court:"District Court"},{name:"M.D. Ala.",court:"District Court",default:!0},{name:"Bankr. M.D. Ala.",court:"Bankruptcy Court"}]},"us:c11:al.nd":{name:"US|Eleventh Circuit|N.D. Alabama",abbr:[{name:"N.D. Alabama",court:"District Court"},{name:"N.D. Ala.",court:"District Court",default:!0},{name:"Bankr. N.D. Ala.",court:"Bankruptcy Court"}]},"us:c11:al.sd":{name:"US|Eleventh Circuit|S.D. Alabama",abbr:[{name:"S.D. Alabama",court:"District Court"},{name:"S.D. Ala.",court:"District Court",default:!0},{name:"Bankr. S.D. Ala.",court:"Bankruptcy Court"}]},"us:c11:fl.md":{name:"US|Eleventh Circuit|M.D. Florida",abbr:[{name:"MD Florida",court:"District Court"},{name:"M.D. Fla.",court:"District Court",default:!0}]},"us:c11:fl.nd":{name:"US|Eleventh Circuit|N.D. Florida",abbr:[{name:"N.D. Florida",court:"District Court"},{name:"N.D. Fla.",court:"District Court",default:!0},{name:"Bankr. N.D. Fla.",court:"Bankruptcy Court"}]},"us:c11:fl.sd":{name:"US|Eleventh Circuit|S.D. Florida",abbr:[{name:"S.D. Florida",court:"District Court"},{name:"S.D. Fla.",court:"District Court",default:!0},{name:"Bankr. S.D. Florida",court:"Bankruptcy Court"}]},"us:c11:ga.md":{name:"US|Eleventh Circuit|M.D. Georgia",abbr:[{name:"MD Georgia"},{name:"Bankr. M.D. Ga.",court:"Bankruptcy Court"}]},"us:c11:ga.nd":{name:"US|Eleventh Circuit|N.D. Georgia",abbr:[{name:"N.D. Georgia",court:"District Court"},{name:"N.D. Ga.",court:"District Court",default:!0},{name:"Bankr. N.D. Ga.",court:"Bankruptcy Court"}]},"us:c11:ga.sd":{name:"US|Eleventh Circuit|S.D. Georgia",abbr:[{name:"S.D. Georgia",court:"District Court"},{name:"S.D. Ga.",court:"District Court",default:!0},{name:"Bankr. S.D. Ga.",court:"Bankruptcy Court"}]},"us:c1:ma.d":{name:"US|First Circuit|D. Massachusetts",abbr:[{name:"D. Massachusetts",court:"District Court"},{name:"D. Mass.",court:"District Court",default:!0},{name:"Bankr. D. Mass.",court:"Bankruptcy Court"}]},"us:c1:me.d":{name:"US|First Circuit|D. Maine",abbr:[{name:"D. Maine",court:"District Court"},{name:"D. Me.",court:"District Court",default:!0},{name:"Bankr. D. Me.",court:"Bankruptcy Court"}]},"us:c1:nh.d":{name:"US|First Circuit|D. New Hampshire",abbr:[{name:"D. New Hampshire",court:"District Court"},{name:"D.N.H.",court:"District Court",default:!0},{name:"Bankr. D.N.H.",court:"Bankruptcy Court"}]},"us:c1:pr.d":{name:"US|First Circuit|D. Puerto Rico",abbr:[{name:"D. Puerto Rico",court:"District Court"},{name:"D.P.R.",court:"District Court",default:!0},{name:"Bankr. D.P.R.",court:"Bankruptcy Court"}]},"us:c1:ri.d":{name:"US|First Circuit|D. Rhode Island",abbr:[{name:"D. Rhode Island",court:"District Court"},{name:"D.R.I.",court:"District Court",default:!0},{name:"Bankr. D.R.I.",court:"Bankruptcy Court"}]},"us:c2":{name:"US|Second Circuit",abbr:[{name:"2nd Circuit",court:"Court of Appeals"},{name:"2d Cir.",court:"Court of Appeals",default:!0},{name:"2d Cir. BAP",court:"Bankruptcy Appellate Panel"}]},"us:c2:ct.d":{name:"US|Second Circuit|D. Connecticut",abbr:[{name:"D. Connecticut",court:"District Court"},{name:"D. Conn.",court:"District Court",default:!0},{name:"Bankr. D. Conn.",court:"Bankruptcy Court"}]},"us:c2:ny.ed":{name:"US|Second Circuit|E.D. New York",abbr:[{name:"E.D. New York",court:"District Court"},{name:"E.D.N.Y",court:"District Court",default:!0},{name:"Bankr. E.D.N.Y.",court:"Bankruptcy Court"}]},"us:c2:ny.nd":{name:"US|Second Circuit|N.D. New York",abbr:[{name:"N.D. New York",court:"District Court"},{name:"Bankr. N.D.N.Y.",court:"Bankruptcy Court"}]},"us:c2:ny.sd":{name:"US|Second Circuit|S.D. New York",abbr:[{name:"S.D. New York",court:"District Court"},{name:"S.D.N.Y.",court:"District Court",default:!0},{name:"Bankr. S.D.N.Y.",court:"Bankruptcy Court"}]},"us:c2:ny.wd":{name:"US|Second Circuit|W.D. New York",abbr:[{name:"W.D. New York",court:"District Court"},{name:"W.D.N.Y.",court:"District Court",default:!0},{name:"Bankr. W.D.N.Y.",court:"Bankruptcy Court"}]},"us:c2:vt.d":{name:"US|Second Circuit|D. Vermont",abbr:[{name:"D. Vermont",court:"District Court"},{name:"D. Vt.",court:"District Court",default:!0},{name:"Bankr. D. Vt.",court:"Bankruptcy Court"}]},"us:c3":{name:"US|Third Circuit",abbr:[{name:"3rd Circuit",court:"Court of Appeals"},{name:"3rd Cir.",court:"Court of Appeals",default:!0}]},"us:c3:de.d":{name:"US|Third Circuit|D. Delaware",abbr:[{name:"D. Delaware",court:"District Court"},{name:"D. Del.",court:"District Court",default:!0},{name:"Bankr. D. Del.",court:"Bankruptcy Court"}]},"us:c3:nj.d":{name:"US|Third Circuit|D. New Jersey",abbr:[{name:"D. New Jersey",court:"District Court"},{name:"D.N.J.",court:"District Court",default:!0},{name:"Bankr. D.N.J.",court:"Bankruptcy Court"}]},"us:c3:pa.d":{name:"US|Third Circuit|D. Pennsylvania",abbr:[{name:"D. Pa.",court:"District Court"}]},"us:c3:pa.ed":{name:"US|Third Circuit|E.D. Pennsylvania",abbr:[{name:"E.D. Pennsylvania",court:"District Court"},{name:"E.D. Pa.",court:"District Court",default:!0},{name:"Bankr. E.D. Pa.",court:"Bankruptcy Court"}]},"us:c3:pa.md":{name:"US|Third Circuit|M.D. Pennsylvania",abbr:[{name:"MD Pennsylvania",court:"District Court"},{name:"M.D. Penn.",court:"District Court",default:!0},{name:"Bankr. M.D. Penn.",court:"Bankruptcy Court"}]},"us:c3:pa.wd":{name:"US|Third Circuit|W.D. Pennsylvania",abbr:[{name:"W.D. Pennsylvania",court:"District Court"},{name:"W.D. Pa.",court:"District Court",default:!0},{name:"Bankr. W.D. Pa.",court:"Bankruptcy Court"}]},"us:c3:vi.d":{name:"US|Third Circuit|D. U.S. Virgin Islands",abbr:[{name:"D. Virgin Islands",court:"District Court"},{name:"D.V.I.",court:"District Court",default:!0},{name:"Bankr. D.V.I.",court:"Bankruptcy Court"}]},"us:c4":{name:"US|Fourth Circuit",abbr:[{name:"4th Circuit",court:"Court of Appeals"},{name:"4th Cir.",court:"Court of Appeals",default:!0}]},"us:c4:md.d":{name:"US|Fourth Circuit|D. Maryland",abbr:[{name:"D. Maryland",court:"District Court"},{name:"Bankr. D. Md.",court:"Bankruptcy Court"}]},"us:c4:nc.ed":{name:"US|Fourth Circuit|E.D. North Carolina",abbr:[{name:"E.D. North Carolina",court:"District Court"},{name:"E.D.N.C.",court:"District Court",default:!0},{name:"Bankr. E.D.N.C.",court:"Bankruptcy Court"}]},"us:c4:nc.md":{name:"US|Fourth Circuit|M.D. North Carolina",abbr:[{name:"MD North Carolina",court:"District Court"},{name:"M.D.N.C.",court:"District Court",default:!0},{name:"Bankr. M.D.N.C.",court:"Bankruptcy Court"}]},"us:c4:nc.wd":{name:"US|Fourth Circuit|W.D. North Carolina",abbr:[{name:"W.D. North Carolina",court:"District Court"},{name:"W.D.N.C.",court:"District Court",default:!0},{name:"Bankr. W.D.N.C.",court:"Bankruptcy Court"}]},"us:c4:sc.ed":{name:"US|Fourth Circuit|E.D. South Carolina",abbr:[{name:"E.D. South Carolina",court:"District Court"},{name:"E.D.S.C.",court:"District Court",default:!0}]},"us:c4:sc.wd":{name:"US|Fourth Circuit|W.D. South Carolina",abbr:[{name:"W.D. South Carolina",court:"District Court"},{name:"W.D.S.C.",court:"District Court",default:!0}]},"us:c4:sc.d":{name:"US|Fourth Circuit|D. South Carolina",abbr:[{name:"D. South Carolina",court:"District Court"},{name:"D.S.C.",court:"District Court",default:!0},{name:"Bankr. D.S.C.",court:"Bankruptcy Court"}]},"us:c4:va.ed":{name:"US|Fourth Circuit|E.D. Virginia",abbr:[{name:"E.D. Virginia",court:"District Court"},{name:"E.D. Va.",court:"District Court",default:!0},{name:"Bankr. E.D. Va.",court:"Bankruptcy Court"}]},"us:c4:va.wd":{name:"US|Fourth Circuit|W.D. Virginia",abbr:[{name:"W.D. Virginia",court:"District Court"},{name:"W.D. Va.",court:"District Court",default:!0},{name:"Bankr. W.D. Va.",court:"Bankruptcy Court"}]},"us:c4:wv.nd":{name:"US|Fourth Circuit|N.D. West Virginia",abbr:[{name:"N.D. West Virginia",court:"District Court"},{name:"N.D.W. Va.",court:"District Court",default:!0},{name:"Bankr. N.D.W. Va.",court:"Bankruptcy Court"}]},"us:c4:wv.sd":{name:"US|Fourth Circuit|S.D. West Virginia",abbr:[{name:"S.D. West Virginia",court:"District Court"},{name:"S.D.W. Va",court:"District Court",default:!0},{name:"Bankr. S.D.W. Va.",court:"Bankruptcy Court"}]},"us:c5":{name:"US|Fifth Circuit",abbr:[{name:"5th Circuit",court:"Court of Appeals"},{name:"5th Cir.",court:"Court of Appeals",default:!0}]},"us:c5:la.ed":{name:"US|Fifth Circuit|E.D. Louisiana",abbr:[{name:"E.D. Louisiana",court:"District Court"},{name:"E.D. La.",court:"District Court",default:!0},{name:"Bankr. E.D. La.",court:"Bankruptcy Court"}]},"us:c5:la.md":{name:"US|Fifth Circuit|M.D. Louisiana",abbr:[{name:"MD Louisiana",court:"District Court"},{name:"M.D. La.",court:"District Court",default:!0},{name:"Bankr. M.D. La.",court:"Bankruptcy Court"}]},"us:c5:la.wd":{name:"US|Fifth Circuit|W.D. Louisiana",abbr:[{name:"W.D. Louisiana",court:"District Court"},{name:"W.D. La.",court:"District Court",default:!0},{name:"Bankr. W.D. La.",court:"Bankruptcy Court"}]},"us:c5:ms.nd":{name:"US|Fifth Circuit|N.D. Mississippi",abbr:[{name:"N.D. Mississippi",court:"District Court"},{name:"N.D. Miss.",court:"District Court",default:!0},{name:"Bankr. N.D. Miss.",court:"Bankruptcy Court"}]},"us:c5:ms.sd":{name:"US|Fifth Circuit|S.D. Mississippi",abbr:[{name:"S.D. Mississippi",court:"District Court"},{name:"S.D. Miss.",court:"District Court",default:!0},{name:"Bankr. S.D. Miss.",court:"Bankruptcy Court"}]},"us:c5:pz.d":{name:"US|Fifth Circuit|D. Panama Canal Zone",abbr:[]},"us:c5:tx.ed":{name:"US|Fifth Circuit|E.D. Texas",abbr:[{name:"E.D. Texas",court:"District Court"},{name:"E.D. Tex.",court:"District Court",default:!0},{name:"Bankr. E.D. Tex.",court:"Bankruptcy Court"}]},"us:c5:tx.nd":{name:"US|Fifth Circuit|N.D. Texas",abbr:[{name:"N.D. Texas",court:"District Court"},{name:"N.D. Tex.",court:"District Court",default:!0},{name:"Bankr. N.D. Tex.",court:"Bankruptcy Court"}]},"us:c5:tx.sd":{name:"US|Fifth Circuit|S.D. Texas",abbr:[{name:"S.D. Texas",court:"District Court"},{name:"S.D. Tex.",court:"District Court",default:!0},{name:"Bankr. S.D. Tex.",court:"Bankruptcy Court"}]},"us:c5:tx.wd":{name:"US|Fifth Circuit|W.D. Texas",abbr:[{name:"W.D. Texas",court:"District Court"},{name:"W.D. Tex.",court:"District Court",default:!0},{name:"Bankr. W.D. Tex.",court:"Bankruptcy Court"}]},"us:c6":{name:"US|Sixth Circuit",abbr:[{name:"6th Circuit",court:"Court of Appeals"},{name:"6th Cir.",court:"Court of Appeals",default:!0},{name:"6th Cir. BAP",court:"Bankruptcy Appellate Panel"}]},"us:c6:ky.ed":{name:"US|Sixth Circuit|E.D. Kentucky",abbr:[{name:"E.D. Kentucky",court:"District Court"},{name:"E.D. Ky.",court:"District Court",default:!0},{name:"Bankr. E.D. Ky.",court:"Bankruptcy Court"}]},"us:c6:ky.wd":{name:"US|Sixth Circuit|W.D. Kentucky",abbr:[{name:"W.D. Kentucky",court:"District Court"},{name:"W.D. Ky.",court:"District Court",default:!0},{name:"Bankr. W.D. Ky.",court:"Bankruptcy Court"}]},"us:c6:mi.ed":{name:"US|Sixth Circuit|E.D. Michigan",abbr:[{name:"E.D. Michigan",court:"District Court"},{name:"E.D. Mich.",court:"District Court",default:!0},{name:"Bankr. E.D. Mich.",court:"Bankruptcy Court"}]},"us:c6:mi.wd":{name:"US|Sixth Circuit|W.D. Michigan",abbr:[{name:"W.D. Michigan"},{name:"Bankr. W.D. Mich.",court:"Bankruptcy Court"}]},"us:c6:oh.d":{name:"US|Sixth Circuit|D. Ohio",abbr:[{name:"D. Ohio",court:"District Court"}]},"us:c6:oh.nd":{name:"US|Sixth Circuit|N.D. Ohio",abbr:[{name:"N.D. Ohio",court:"District Court"},{name:"Bankr. N.D. Ohio",court:"Bankruptcy Court"}]},"us:c6:oh.sd":{name:"US|Sixth Circuit|S.D. Ohio",abbr:[{name:"S.D. Ohio",court:"District Court"},{name:"Bankr. S.D. Ohio",court:"Bankruptcy Court"}]},"us:c6:tn.d":{name:"US|Sixth Circuit|D. Tennessee",abbr:[{name:"D. Tenn.",court:"District Court"},{name:"Bankr. D. Tenn.",court:"Bankruptcy Court"}]},"us:c6:tn.ed":{name:"US|Sixth Circuit|E.D. Tennessee",abbr:[{name:"E.D. Tennessee",court:"District Court"},{name:"E.D. Tenn.",court:"District Court",default:!0},{name:"Bankr. E.D. Tenn.",court:"Bankruptcy Court"}]},"us:c6:tn.md":{name:"US|Sixth Circuit|M.D. Tennessee",abbr:[{name:"MD Tennessee",court:"District Court"},{name:"M.D. Tenn.",court:"District Court",default:!0},{name:"Bankr. M.D. Tenn.",court:"Bankruptcy Court"}]},"us:c6:tn.wd":{name:"US|Sixth Circuit|W.D. Tennessee",abbr:[{name:"W.D. Tennessee",court:"District Court"},{name:"W.D. Tenn.",court:"District Court",default:!0},{name:"Bankr. W.D. Tenn.",court:"Bankruptcy Court"}]},"us:c7":{name:"US|Seventh Circuit",abbr:[{name:"7th Circuit",court:"Court of Appeals"},{name:"7th Cir.",court:"Court of Appeals",default:!0}]},"us:c7:il.cd":{name:"US|Seventh Circuit|C.D. Illinois",abbr:[{name:"CD Illinois",court:"District Court"},{name:"C.D. Ill.",court:"District Court",default:!0},{name:"Bankr. C.D. Ill.",court:"Bankruptcy Court"}]},"us:c7:il.d":{name:"US|Seventh Circuit|D. Illinois",abbr:[{name:"D. Ill.",court:"District Court"}]},"us:c7:il.ed":{name:"US|Seventh Circuit|E.D. Illinois",abbr:[{name:"E.D. Ill.",court:"District Court"}]},"us:c7:il.nd":{name:"US|Seventh Circuit|N.D. Illinois",abbr:[{name:"N.D. Illinois",court:"District Court"},{name:"N.D. Ill.",court:"District Court",default:!0},{name:"Bankr. N.D. Ill.",court:"Bankruptcy Court"}]},"us:c7:il.sd":{name:"US|Seventh Circuit|S.D. Illinois",abbr:[{name:"S.D. Illinois",court:"District Court"},{name:"S.D. Ill.",court:"District Court",default:!0},{name:"Bankr. S.D. Ill.",court:"Bankruptcy Court"}]},"us:c7:in.d":{name:"US|Seventh Circuit|D. Indiana",abbr:[{name:"D. Ind.",court:"District Court"}]},"us:c7:in.nd":{name:"US|Seventh Circuit|N.D. Indiana",abbr:[{name:"N.D. Indiana",court:"District Court"},{name:"N.D. Ind.",court:"District Court",default:!0},{name:"Bankr. N.D. Ind.",court:"Bankruptcy Court"}]},"us:c7:in.sd":{name:"US|Seventh Circuit|S.D. Indiana",abbr:[{name:"S.D. Indiana",court:"District Court"},{name:"S.D. Ind.",court:"District Court",default:!0},{name:"Bankr. S.D. Ind.",court:"Bankruptcy Court"}]},"us:c7:wi.ed":{name:"US|Seventh Circuit|E.D. Wisconsin",abbr:[{name:"E.D. Wisconsin",court:"District Court"},{name:"E.D. Wis.",court:"District Court",default:!0},{name:"Bankr. E.D. Wis.",court:"Bankruptcy Court"}]},"us:c7:wi.wd":{name:"US|Seventh Circuit|W.D. Wisconsin",abbr:[{name:"W.D. Wisconsin",court:"District Court"},{name:"W.D. Wis.",court:"District Court",default:!0},{name:"Bankr. W.D. Wis.",court:"Bankruptcy Court"}]},"us:c8":{name:"US|Eighth Circuit",abbr:[{name:"8th Circuit",court:"Court of Appeals"},{name:"8th Cir.",court:"Court of Appeals",default:!0},{name:"8th Cir. BAP",court:"United States Bankruptcy Appellate Panel"}]},"us:c8:ar.ed":{name:"US|Eighth Circuit|E.D. Arkansas",abbr:[{name:"E.D. Arkansas",court:"District Court"},{name:"E.D. Ark.",court:"District Court",default:!0},{name:"Bankr. E.D. Ark.",court:"Bankruptcy Court"}]},"us:c8:ar.wd":{name:"US|Eighth Circuit|W.D. Arkansas",abbr:[{name:"W.D. Arkansas",court:"District Court"},{name:"W.D. Ark.",court:"District Court",default:!0},{name:"Bankr. W.D. Ark.",court:"Bankruptcy Court"}]},"us:c8:ia.nd":{name:"US|Eighth Circuit|N.D. Iowa",abbr:[{name:"N.D. Iowa",court:"District Court"},{name:"Bankr. N.D. Iowa",court:"Bankruptcy Court"}]},"us:c8:ia.sd":{name:"US|Eighth Circuit|S.D. Iowa",abbr:[{name:"S.D. Iowa",court:"District Court"},{name:"Bankr. S.D. Iowa",court:"Bankruptcy Court"}]},"us:c8:mn.d":{name:"US|Eighth Circuit|D. Minnesota",abbr:[{name:"Minnesota",court:"District Court"},{name:"D. Minnesota",court:"District Court",default:!0},{name:"Bankr. D. Minn.",court:"Bankruptcy Court"}]},"us:c8:mo.cd":{name:"US|Eighth Circuit|C.D. Missouri",abbr:[{name:"C.D. Mo.",court:"District Court"}]},"us:c8:mo.ed":{name:"US|Eighth Circuit|E.D. Missouri",abbr:[{name:"E.D. Missouri",court:"District Court"},{name:"E.D. Mo.",court:"District Court",default:!0},{name:"Bankr. E.D. Mo.",court:"Bankruptcy Court"}]},"us:c8:mo.sd":{name:"US|Eighth Circuit|S.D. Missouri",abbr:[{name:"Mo. S.D.",court:"District Court"}]},"us:c8:mo.wd":{name:"US|Eighth Circuit|W.D. Missouri",abbr:[{name:"W.D. Missouri",court:"District Court"},{name:"W.D. Mo.",court:"District Court",default:!0},{name:"Bankr. W.D. Mo.",court:"Bankruptcy Court"}]},"us:c8:nd.d":{name:"US|Eighth Circuit|D. North Dakota",abbr:[{name:"D. North Dakota",court:"District Court"},{name:"D.N.D.",court:"District Court",default:!0},{name:"Bankr. D.N.D.",court:"Bankruptcy Court"}]},"us:c8:ne.d":{name:"US|Eighth Circuit|D. Nebraska",abbr:[{name:"D. Nebraska",court:"District Court"},{name:"D. Neb.",court:"District Court",default:!0},{name:"Bankr. D. Neb.",court:"Bankruptcy Court"}]},"us:c8:sd.d":{name:"US|Eighth Circuit|D. South Dakota",abbr:[{name:"D. South Dakota",court:"District Court"},{name:"D.S.D.",court:"District Court",default:!0},{name:"Bankr. D.S.D.",court:"Bankruptcy Court"}]},"us:c9":{name:"US|Ninth Circuit",abbr:[{name:"9th Circuit",court:"Court of Appeals"},{name:"9th Cir.",court:"Court of Appeals",default:!0},{name:"9th Cir. BAP",court:"United States Bankruptcy Appellate Panel"}]},"us:c9:ak.d":{name:"US|Ninth Circuit|D. Alaska",abbr:[{name:"D. Alaska",court:"District Court"},{name:"Bankr. D. Alaska",court:"Bankruptcy Court"}]},"us:c9:az.d":{name:"US|Ninth Circuit|D. Arizona",abbr:[{name:"D. Arizona",court:"District Court"},{name:"D. Ariz.",court:"District Court",default:!0},{name:"Bankr. D. Ariz.",court:"Bankruptcy Court"}]},"us:c9:ca.cd":{name:"US|Ninth Circuit|C.D. California",abbr:[{name:"CD California",court:"District Court"},{name:"C.D. Cal.",court:"District Court",default:!0},{name:"Bankr. C.D. Cal.",court:"Bankruptcy Court"}]},"us:c9:ca.d":{name:"US|Ninth Circuit|D. California",abbr:[{name:"D. Cal.",court:"District Court"}]},"us:c9:ca.ed":{name:"US|Ninth Circuit|E.D. California",abbr:[{name:"E.D. California",court:"District Court"},{name:"E.D. Cal.",court:"District Court",default:!0},{name:"Bankr. E.D. Cal.",court:"Bankruptcy Court"}]},"us:c9:ca.nd":{name:"US|Ninth Circuit|N.D. California",abbr:[{name:"N.D. California",court:"District Court"},{name:"N.D. Cal.",court:"District Court",default:!0},{name:"Bankr. N.D. Cal.",court:"Bankruptcy Court"}]},"us:c9:ca.sd":{name:"US|Ninth Circuit|S.D. California",abbr:[{name:"S.D. California",court:"District Court"},{name:"S.D. Cal.",court:"District Court",default:!0},{name:"Bankr. S.D. Cal.",court:"Bankruptcy Court"}]},"us:c9:gu.d":{name:"US|Ninth Circuit|D. Guam",abbr:[{name:"D. Guam",court:"District Court"},{name:"Bankr. D. Guam",court:"Bankruptcy Court"}]},"us:c9:hi.d":{name:"US|Ninth Circuit|D. Hawaii",abbr:[{name:"D. Hawaii",court:"District Court"},{name:"D. Haw.",court:"District Court",default:!0},{name:"Bankr. D. Haw.",court:"Bankruptcy Court"}]},"us:c9:id.d":{name:"US|Ninth Circuit|D. Idaho",abbr:[{name:"D. Idaho",court:"District Court"},{name:"Bankr. D. Idaho",court:"Bankruptcy Court"}]},"us:c9:mp.d":{name:"US|Ninth Circuit|D. Northern Mariana Islands",abbr:[{name:"N. Mar. I.",court:"District Court"},{name:"Bankr. N. Mar. I.",court:"Bankruptcy Court"}]},"us:c9:mt.d":{name:"US|Ninth Circuit|D. Montana",abbr:[{name:"D. Montana",court:"District Court"},{name:"D. Mont.",court:"District Court",default:!0},{name:"Bankr. D. Mont.",court:"Bankruptcy Court"}]},"us:c9:nv.d":{name:"US|Ninth Circuit|D. Nevada",abbr:[{name:"D. Nevada",court:"District Court"},{name:"D. Nev.",court:"District Court",default:!0},{name:"Bankr. D. Nev.",court:"Bankruptcy Court"}]},"us:c9:or.d":{name:"US|Ninth Circuit|D. Oregon",abbr:[{name:"D. Oregon",court:"District Court"},{name:"D. Or.",court:"District Court",default:!0},{name:"Bankr. D. Or.",court:"Bankruptcy Court"}]},"us:c9:wa.ed":{name:"US|Ninth Circuit|E.D. Washington",abbr:[{name:"E.D. Washington",court:"District Court"},{name:"E.D. Wash.",court:"District Court",default:!0},{name:"Bankr. E.D. Wash.",court:"Bankruptcy Court"}]},"us:c9:wa.wd":{name:"US|Ninth Circuit|W.D. Washington",abbr:[{name:"W.D. Washington",court:"District Court"},{name:"W.D. Wash.",court:"District Court",default:!0},{name:"Bankr. W.D. Wash.",court:"Bankruptcy Court"}]},"us:ca":{name:"US|California",abbr:[{name:"Cal.",court:"Supreme Court"},{name:"Cal. Ct. App.",court:"Court of Appeal"}]},"us:co":{name:"US|Colorado",abbr:[{name:"Colo.",court:"Supreme Court"},{name:"Colo. Ct. App.",court:"Court of Appeals"}]},"us:ct":{name:"US|Connecticut",abbr:[{name:"Conn.",court:"Supreme Court"},{name:"Conn. App. Ct.",court:"Appellate Court"},{name:"Conn. Super. Ct.",court:"Superior Court"}]},"us:dc":{name:"US|District of Columbia",abbr:[]},"us:de":{name:"US|Delaware",abbr:[{name:"Del.",court:"Supreme Court"},{name:"Del. Ch.",court:"Court of Chancery"},{name:"Del. Fm. Ct.",court:"Family Court"},{name:"Ct. Jud. Del.",court:"Court on the Judiciary"},{name:"Del. Super. Ct.",court:"Superior Court"}]},"us:fl":{name:"US|Florida",abbr:[{name:"Fla.",court:"Supreme Court"},{name:"Fla. Dist. Ct. App.",court:"District Court of Appeal"},{name:"Bankr. M.D. Fla.",court:"Bankruptcy Court"}]},"us:ga":{name:"US|Georgia",abbr:[{name:"Ga",court:"Supreme Court"},{name:"Ga. Ct. App.",court:"Court of Appeals"}]},"us:gu":{name:"US|Guam",abbr:[]},"us:hi":{name:"US|Hawaii",abbr:[{name:"Haw.",court:"Supreme Court"},{name:"Haw. App.",court:"Intermediate Court of Appeals"}]},"us:ia":{name:"US|Iowa",abbr:[{name:"Iowa",court:"Supreme Court"},{name:"Iowa Ct. App.",court:"Court of Appeals"}]},"us:id":{name:"US|Idaho",abbr:[{name:"Idaho",court:"Supreme Court"},{name:"Idaho Ct. App.",court:"Court of Appeals"}]},"us:il":{name:"US|Illinois",abbr:[{name:"Ill.",court:"Supreme Court"},{name:"Ill. App. Ct.",court:"Appellate Court"}]},"us:in":{name:"US|Indiana",abbr:[{name:"Ind.",court:"Supreme Court"},{name:"Ind. Ct. App.",court:"Court of Appeals"},{name:"Ind. T.C.",court:"Tax Court"}]},"us:ks":{name:"US|Kansas",abbr:[{name:"Kan.",court:"Supreme Court"},{name:"Kan. Ct. App.",court:"Court of Appeals"}]},"us:ky":{name:"US|Kentucky",abbr:[{name:"Ky.",court:"Supreme Court"},{name:"Ky. Ct. App.",court:"Court of Appeals"}]},"us:la":{name:"US|Louisiana",abbr:[{name:"La.",court:"Supreme Court"},{name:"La. Ct. App.",court:"Court of Appeal"}]},"us:ma":{name:"US|Massachusetts",abbr:[{name:"Mass.",court:"Supreme Judicial Court"},{name:"Mass. App. Ct.",court:"Appeals Court"}]},"us:md":{name:"US|Maryland",abbr:[{name:"Md.",court:"Court of Appeals"},{name:"Md. Ct. Spec. App.",court:"Court of Special Appeals"}]},"us:me":{name:"US|Maine",abbr:[{name:"Me.",court:"Supreme Judicial Court"}]},"us:mi":{name:"US|Michigan",abbr:[{name:"Mich.",court:"Supreme Court"},{name:"Mich. Ct. App.",court:"Court of Appeals"}]},"us:mn":{name:"US|Minnesota",abbr:[{name:"Minn.",court:"Supreme Court"},{name:"Minn. Ct. App.",court:"Court of Appeals"}]},"us:mo":{name:"US|Missouri",abbr:[{name:"Mo.",court:"Supreme Court"},{name:"Mo. Ct. App.",court:"Court of Appeals"}]},"us:mp":{name:"US|Northern Mariana Islands",abbr:[]},"us:ms":{name:"US|Mississippi",abbr:[{name:"Miss.",court:"Supreme Court"},{name:"Miss. Ct. App.",court:"Court of Appeals"}]},"us:mt":{name:"US|Montana",abbr:[{name:"Mont.",court:"Supreme Court"}]},"us:navajo":{name:"US|Navajo Nation",abbr:[{name:"Navajo",court:"Supreme Court"}]},"us:nc":{name:"US|North Carolina",abbr:[{name:"N.C.",court:"Supreme Court"},{name:"N.C. Ct. App.",court:"Court of Appeals"}]},"us:nd":{name:"US|North Dakota",abbr:[{name:"N.D.",court:"Supreme Court"},{name:"N.D. Ct. App.",court:"Court of Appeals"}]},"us:ne":{name:"US|Nebraska",abbr:[{name:"Neb.",court:"Supreme Court"},{name:"Neb. Ct. App.",court:"Court of Appeals"}]},"us:nh":{name:"US|New Hampshire",abbr:[{name:"N.H.",court:"Supreme Court"}]},"us:nj":{name:"US|New Jersey",abbr:[{name:"N.J.",court:"Supreme Court"},{name:"N.J. Super. Ct. App. Div.",court:"Superior Court"},{name:"N.J. Tax Ct.",court:"Tax Court"}]},"us:nm":{name:"US|New Mexico",abbr:[{name:"N.M.",court:"Supreme Court"},{name:"N.M. Ct. App.",court:"Court of Appeals"}]},"us:nv":{name:"US|Nevada",abbr:[{name:"Nev.",court:"Supreme Court"}]},"us:ny":{name:"US|New York",abbr:[{name:"N.Y.",court:"Court of Appeals"},{name:"N.Y. App. Div.",court:"Appellate Division of the Supreme Court"},{name:"N.Y. Fam. Ct.",court:"Family Court"},{name:"N.Y. Sur. Ct.",court:"Surrogate 's Court"}]},"us:oh":{name:"US|Ohio",abbr:[{name:"Ohio",court:"Supreme Court"}]},"us:ok":{name:"US|Oklahoma",abbr:[{name:"Okla.",court:"Supreme Court"},{name:"Okla. Civ. App.",court:"Court of Civil Appeals"},{name:"Okla. C.O.J.",court:"Court on the Judiciary"},{name:"Okla. Crim. App.",court:"Court of Criminal Appeals"},{name:"Okla. J.E.A.P.",court:"Judicial Ethics Advisory Panel"}]},"us:or":{name:"US|Oregon",abbr:[{name:"Or.",court:"Supreme Court"},{name:"Or. Ct. App.",court:"Court of Appeals"}]},"us:pa":{name:"US|Pennsylvania",abbr:[{name:"Pa.",court:"Supreme Court"},{name:"Pa. Commw. Ct.",court:"Commonwealth Court"},{name:"Special Tribunal of Pa.",court:"Special Tribunal"},{name:"Pa. Super. Ct.",court:"Superior Court"},{name:"Ct. Jud. Disc. Pa",court:"Court of Judicial Discipline"}]},"us:pr":{name:"US|Puerto Rico",abbr:[{name:"P.R.",court:"Supreme Court"}]},"us:ri":{name:"US|Rhode Island",abbr:[{name:"R.I.",court:"Supreme Court"}]},"us:sc":{name:"US|South Carolina",abbr:[{name:"S.C.",court:"Supreme Court"},{name:"S.C. Ct. App.",court:"Court of Appeals"}]},"us:sd":{name:"US|South Dakota",abbr:[{name:"S.D.",court:"Supreme Court"}]},"us:tn":{name:"US|Tennessee",abbr:[{name:"Tenn.",court:"Supreme Court"},{name:"Tenn. Crim. App.",court:"Court of Criminal Appeals"},{name:"Tenn. Ct. App.",court:"Court of Appeals"}]},"us:tx":{name:"US|Texas",abbr:[{name:"Tex.",court:"Supreme Court"},{name:"Tex. App.",court:"Court of Appeals"},{name:"Tex. Crim. App.",court:"Court of Criminal Appeals"},{name:"Tex. Rev.",court:"Special Court of Review"}]},"us:ut":{name:"US|Utah",abbr:[{name:"Utah",court:"Supreme Court"},{name:"Utah Ct. App.",court:"Court of Appeals"}]},"us:va":{name:"US|Virginia",abbr:[{name:"Va.",court:"Supreme Court"},{name:"Va. Ct. App.",court:"Court of Appeals"}]},"us:vi":{name:"US|U.S. Virgin Islands",abbr:[]},"us:vt":{name:"US|Vermont",abbr:[{name:"Vt.",court:"Supreme Court of Vermont"}]},"us:wa":{name:"US|Washington",abbr:[{name:"Wash.",court:"Supreme Court"},{name:"Wash. Ct. App.",court:"Court of Appeals"}]},"us:wi":{name:"US|Wisconsin",abbr:[{name:"Wis.",court:"Supreme Court"},{name:"Wis. Ct. App.",court:"Court of Appeals"}]},"us:wv":{name:"US|West Virginia",abbr:[{name:"W. Va.",court:"Supreme Court"}]},"us:wy":{name:"US|Wyoming",abbr:[{name:"Wyo.",court:"Supreme Court"}]}},getJurisdiction:function(e){var t=this.jurisdictions,r=0,a={jurisdiction:void 0,court:void 0};if(null==e)return a;for(var i in e=e.toUpperCase().replace(/[\.\s]/g,""),t)t[i].abbr&&m.Utils.isArray(t[i].abbr)&&t[i].abbr.forEach((function(n){n.name&&(n.name.toUpperCase().replace(/[\.\s]/g,"")==e&&(a.jurisdiction=t[i].name,a.court=n.court,r++))}));return r>1&&(a={jurisdiction:void 0,court:void 0}),a},getJurisdictionCSL:function(e){var t=this.jurisdictions,r="";for(var a in e=e.toUpperCase().replace(/[\.\s]/g,""),t){if(t[a].name)t[a].name.toUpperCase().replace(/[\.\s]/g,"")==e&&(r=a)}return r},getCourtAbbreviation:function(e,t){var r=e||"";if(t){var a=this.jurisdictions[t];if(a&&a.abbr){"DIST.COURT"==(e=e.toUpperCase().replace(/\s/g,""))&&(e="DISTRICTCOURT");var i={};a.abbr.forEach((function(e){if(e.default&&e.court){var t=e.court.toUpperCase().replace(/\s/g,"");i[t]=e.name}})),a.abbr.forEach((function(e){if(e.court){var t=e.court.toUpperCase().replace(/\s/g,"");t in i||(i[t]=e.name)}})),e in i&&(r=i[e])}}return r}}),m.library.Jurisdictions=new m.library._Jurisdictions,m.library._LegalAbbreviations=m.Class.extend({abbr:{us:{classic:{},"collection-title":{},"container-phrase":{},"container-title":{"A. 2d":"A.2d","A. 3d":"A.3d","Atlantic Reporter":"A.","Atlantic Reporter 2d":"A.2d","Atlantic Reporter 3d":"A.3d","B. R.":"B.R.",BR:"B.R.","Bankruptcy Reporter":"B.R.",Black:"Black","Board of Tax Appeals Memorandum Decisions":"B.T.A.M. (P-H)","Court Martial Reports":"C.M.R.","Court of Claims Reports":"Ct. Cl.","Court of Customs Appeals Reports":"Ct. Cust.","Court of Customs and Patent Appeals Reports":"C.C.P.A.","Court of International Trade Reports":"Ct. Int\u2019l Trade",Cranch:"Cranch","Ct.Cl.":"Ct. Cl.","Ct.Int'l Trade":"Ct. Int\u2019l Trade","Customs Bulletin and Decisions":"Cust. B. & Dec.","Customs Court Reports":"Cust. Ct.",Dallas:"Dall.","Decisions of the United States Court of Military Appeals":"C.M.A.","F. 2d":"F.2d","F. 3d":"F.3d","F. Supp.2d":"F. Supp. 2d","F.2d":"F.2d","F.3d":"F.3d","F.Supp.":"F. Supp.","F.Supp. 2d":"F. Supp. 2d","F.Supp.2d":"F. Supp. 2d","Fed.Cl.":"Fed. Cl.","Federal Appendix":"F. App\u2019x","Federal Cases":"F. Cas.","Federal Claims Reporter":"Fed. Cl.","Federal Reporter":"F.","Federal Reporter 2d":"F.2d","Federal Reporter 3d":"F.3d","Federal Rules Decisions":"F.R.D.","Federal Rules Service":"Fed. R. Serv. (Callaghan)","Federal Rules Service 2d":"Fed. R. Serv. 2d (Callaghan)","Federal Rules Service 3d":"Fed. R. Serv. 3d (West)","Federal Supplement":"F. Supp.","Federal Supplement 2d":"F. Supp. 2d",Howard:"How.","International Trade Reporter Decisions":"I.T.R.D. (BNA)","Kan.App.":"Kan. App.","Kansas Court of Appeals Reports":"Kan. App.","L. Ed.2d":"L. Ed. 2d","L.Ed.":"L. Ed.","L.Ed. 2d":"L. Ed. 2d","L.Ed.2d":"L. Ed. 2d","Lawyers' Edition":"L. Ed.","Lawyers' Edition 2d":"L. Ed. 2d","M. J.":"M.J.","N. E.":"N.E.","N. E. 2d":"N.E.2d","N. E.2d":"N.E.2d","N. W.":"N.W.","N. W. 2d":"N.W.2d","N. W.2d":"N.W.2d","N.E. 2d":"N.E.2d","N.W. 2d":"N.W.2d","NE 2d":"N.E.2d","NW 2d":"N.W.2d","North Eastern Reporter":"N.E.","North Eastern Reporter 2d":"N.E.2d","North Western Reporter":"N.W.","North Western Reporter 2d":"N.W.2d","Northwest Reporter Second":"N.W.2d","Ohio St.3d":"Ohio St. 3d","P. 2d":"P.2d","P. 3d":"P.3d","Pacific Reporter":"P.","Pacific Reporter 2d":"P.2d","Pacific Reporter 3d":"P.3d","Pennsylvania Statutes Annotated":"Pa. Stat. Ann.",Peters:"Pet.","Reports of the United States Board of Tax Appeals":"B.T.A.","S. E.":"S.E.","S. E. 2d":"S.E.2d","S. E.2d":"S.E.2d","S. W.":"S.W.","S. W. 2d":"S.W.2d","S. W. 3d":"S.W.3d","S. W.2d":"S.W.2d","S. W.3d":"S.W.3d","S.Ct":"S. Ct.","S.E. 2d":"S.E.2d","S.W. 2d":"S.W.2d","S.W. 3d":"S.W.3d","SE 2d":"S.E.2d","SW 3d":"S.W.3d","So.2d":"So. 2d","So.3d":"So. 3d","South Eastern Reporter":"S.E.","South Eastern Reporter 2d":"S.E.2d","South Eastern Reporter.":"S.E.","South Eastern Reporter. 2d":"S.E.2d","South Western":"S.W.","South Western 2d":"S.W.2d","South Western 3d":"S.W.3d","South Western Reporter":"S.W.","South Western Reporter 2d":"S.W.2d","South Western Reporter 3d":"S.W.3d","Southern Reporter":"So.","Southern Reporter 2d":"So. 2d","Southern Reporter 3d":"So. 3d","Statutes at Large":"Stat.","Supreme Court":"Wall.","Supreme Court Reporter":"!authority>>>S. Ct.","T. C.":"T.C.","Tax Court Memorandum Decisions":"T.C.M. (CCH)","U. S.":"!authority>>>U.S.","US Code":"U.S.C.","United States Claims Court Reporter":"Cl. Ct.","United States Claims Reporter":"Ct. Cl.","United States Law Week":"U.S.L.W.","United States Reports":"!authority>>>U.S.","United States Supreme Court Reports":"!authority>>>L. Ed.","United States Supreme Court Reports 2d":"!authority>>>L. Ed. 2d","United States Supreme Court Reports, Lawyer's Edition":"!authority>>>L. Ed.","United States Supreme Court Reports, Lawyer's Edition 2d":"!authority>>>L. Ed. 2d","United States Supreme Court Reports, Lawyers' Edition":"!authority>>>L. Ed.","United States Supreme Court Reports, Lawyers' Edition 2d":"!authority>>>L. Ed. 2d","United States Tax Court Reports":"T.C.","Vet.App.":"Vet. App.",Wallace:"Wall.","West's Bankruptcy Reporter":"B.R.","West's Military Justice Reporter":"M.J.","West's Veterans Appeals Reporter":"Vet. App.",Wheaton:"Wheat.","Wn. Terr.":"Wash. Terr."},hereinafter:{},"institution-entire":{},"institution-part":{Congress:"Cong.","Court of Appeals for the Eighth Circuit":"8th Cir.","House Committee on the Judiciary":"H. Comm. on the Judiciary","House of Representatives":"H.R.",Legislature:"Leg.","Second Circuit Court of Appeals":"2d Cir.","Supreme Court":"Sup. Ct.","U.S. Congress":"Cong."},nickname:{},number:{},place:{},title:{"House of Representatives Joint Resolution":"H.R.J. Res.","Senate Joint Resolution":"S.J. Res.","Special Session":"Spec. Sess."},"title-phrase":{}},"us;ak":{classic:{},"collection-title":{},"container-title":{"Alaska Federal Reports":"Alaska Fed.","Alaska Reports":"Alaska","Federal Cases":"F. Cas."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;al":{classic:{},"collection-title":{},"container-title":{"Alabama Appellate Courts Reports":"Ala. App.","Alabama Reports":"Ala."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;ar":{classic:{},"collection-title":{},"container-title":{"Arkansas Appellate Reports":"Ark. App.","Arkansas Reports":"Ark."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;az":{classic:{},"collection-title":{},"container-title":{"Arizona Appeals Reports":"Ariz. App.","Arizona Reports":"Ariz."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;ca":{classic:{},"collection-title":{},"container-title":{"Cal. App.2d":"Cal. App. 2d","Cal. App.3d":"Cal. App. 3d","Cal. App.4th":"Cal. App. 4th","Cal. Rptr.2d":"Cal. Rptr. 2d","Cal. Rptr.3d":"Cal. Rptr. 3d","Cal.2d":"Cal. 2d","Cal.3d":"Cal. 3d","Cal.4th":"Cal. 4th","Cal.App.":"Cal. App.","Cal.App. 2d":"Cal. App. 2d","Cal.App. 2d Supp.":"Cal. App. 2d Supp.","Cal.App. 3d":"Cal. App. 3d","Cal.App. 3d Supp.":"Cal. App. 3d Supp.","Cal.App. 4th":"Cal. App. 4th","Cal.App. Supp. 2d":"Cal. App. 2d Supp.","Cal.App. Supp. 3d":"Cal. App. 3d Supp.","Cal.App. Supp.2d":"Cal. App. 2d Supp.","Cal.App. Supp.3d":"Cal. App. 3d Supp.","Cal.App.2d":"Cal. App. 2d","Cal.App.2d Supp.":"Cal. App. 2d Supp.","Cal.App.3d":"Cal. App. 3d","Cal.App.3d Supp.":"Cal. App. 3d Supp.","Cal.App.4th":"Cal. App. 4th","Cal.App.Supp.":"Cal. App. Supp.","Cal.Rptr.":"Cal. Rptr.","Cal.Rptr. 2d":"Cal. Rptr. 2d","Cal.Rptr. 3d":"Cal. Rptr. 3d","Cal.Rptr.2d":"Cal. Rptr. 2d","Cal.Rptr.3d":"Cal. Rptr. 3d","California Appellate Reports":"Cal. App.","California Appellate Reports 2d":"Cal. App. 2d","California Appellate Reports 3d":"Cal. App. 3d","California Appellate Reports 4th":"Cal. App. 4th","California Appellate Reports Supplement":"Cal. App. Supp.","California Appellate Reports Supplement 2d":"Cal. App. 2d Supp.","California Appellate Reports Supplement 3d":"Cal. App. 3d Supp.","California Appellate Reports Supplement 4th":"Cal. App. 4th Supp.","California Reports":"Cal.","California Reports 2d":"Cal. 2d","California Reports 3d":"Cal. 3d","California Reports 4th":"Cal. 4th","California Unreported Cases":"Cal. Unrep.","West's California Reporter":"Cal. Rptr.","West's California Reporter 2d":"Cal. Rptr. 2d","West's California Reporter 3d":"Cal. Rptr. 3d","West\u2019s California Reporter":"Cal. Rptr.","West\u2019s California Reporter 2d":"Cal. Rptr. 2d","West\u2019s California Reporter 3d":"Cal. Rptr. 3d"},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;co":{classic:{},"collection-title":{},"container-title":{"Brief Times Reporter":"Brief Times Rptr.","Colorado Court of Appeals Reports":"Colo. App.","Colorado Journal":"Colo. J.","Colorado Lawyer":"Colo. Law.","Colorado Reports":"Colo.","Law Week Colorado":"L. Week Colo."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;ct":{classic:{},"collection-title":{},"container-title":{"Connecticut Appellate Reports":"Conn. App.","Connecticut Circuit Court Reports":"Conn. Cir. Ct.","Connecticut Law Reporter":"Conn. L. Rptr.","Connecticut Reports":"Conn.","Connecticut Superior Court Reports":"Conn. Super. Ct.","Connecticut Supplement":"Conn. Supp."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;dc":{classic:{},"collection-title":{},"container-title":{"Appeal Cases, District of Columbia":"App. D.C.","Federal Reporter 3d":"F.3d","United States Court of Appeals Reports":"U.S. App. D.C."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;de":{classic:{},"collection-title":{},"container-title":{"Delaware Cases":"Del. Cas.","Delaware Chancery Reports":"Del. Ch.","Delaware Reports":"Del."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;federal":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{},"institution-part":{"Bankruptcy Court":"Bankr.",Congress:"Cong.","Court of Appeals for the Eighth Circuit":"8th Cir.","District Court":"!here>>>","Eighth Circuit Court of Appeals":"8th Cir.","Eleventh Circuit Court of Appeals":"11th Cir.","Fifth Circuit Court of Appeals":"5th Cir.","First Circuit Court of Appeals":"1st Cir.","Fourth Circuit Court of Appeals":"4th Cir.","House Committee on the Judiciary":"H. Comm. on the Judiciary","House of Representatives":"H.R.",Legislature:"Leg.","Ninth Circuit Court of Appeals":"9th Cir.","Second Circuit Court of Appeals":"2d Cir.","Seventh Circuit Court of Appeals":"7th Cir.","Sixth Circuit Court of Appeals":"6th Cir.","Supreme Court":"Sup. Ct.","Tenth Circuit Court of Appeals":"10th Cir.","Third Circuit Court of Appeals":"3rd Cir.","U.S. Congress":"Cong."},nickname:{},number:{},place:{},title:{}},"us;federal;dc":{classic:{},"collection-title":{},"container-title":{"District of Columbia Reports":"D.C."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;fl":{classic:{},"collection-title":{},"container-title":{"Florida Law Weekly":"Fla. L. Weekly","Florida Law Weekly Supplement":"Fla. L. Weekly Supp.","Florida Reports":"Fla.","Florida Supplement":"Fla. Supp.","Florida Supplement 2d":"Fla. Supp. 2d"},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;ga":{classic:{},"collection-title":{},"container-title":{"Georgia Appeals Reports":"Ga. App.","Georgia Reports":"Ga."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;gu":{classic:{},"collection-title":{},"container-title":{"Federal Supplement 2d":"F. Supp. 2d","Guam Reports":"Guam"},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;hi":{classic:{},"collection-title":{},"container-title":{"Hawaii Appellate Reports":"Haw. App.","Hawaii Reports(ends with vol. 75)":"Haw.","West's Hawaii Reports":"Haw.","West's Hawaii Reports (begins with vol. 76)":"Haw.","West\u2019s Hawaii Reports":"Haw."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;ia":{classic:{},"collection-title":{},"container-title":{"Iowa Reports":"Iowa","Iowa Reports (Cite to edition published by Clarke for vols. 1-8.)":"Iowa"},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;id":{classic:{},"collection-title":{},"container-title":{"Idaho Reports":"Idaho"},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;il":{classic:{},"collection-title":{},"container-title":{"Ill. App.2d":"Ill. App. 2d","Ill. App.3d":"Ill. App. 3d","Ill.Dec.":"Ill. Dec.","Illinois Court of Claims Reports":"Ill. Ct. Cl.","West's Illinois Decisions":"Ill. Dec.","West\u2019s Illinois Decisions":"Ill. Dec.","lllinois Appellate Court Reports":"Ill. App.","lllinois Appellate Court Reports 2d":"Ill. App. 2d","lllinois Appellate Court Reports 3d":"Ill. App. 3d","lllinois Reports":"Ill."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;in":{classic:{},"collection-title":{},"container-title":{"Indiana Court of Appeals Reports (prior to 1972, Indiana Appellate Court Reports)":"Ind. App.","Indiana Reports":"Ind."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;ks":{classic:{},"collection-title":{},"container-title":{"Kan. App.2d":"Kan. App. 2d","Kan.App. 2d":"Kan. App. 2d","Kan.App.2d":"Kan. App. 2d","Kansas Court of Appeals Reports":"Kan. App.","Kansas Court of Appeals Reports 2d":"Kan. App. 2d","Kansas Reports":"Kan."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;ky":{classic:{},"collection-title":{},"container-title":{"Kentucky Appellate Reporter":"Ky. App.","Kentucky Attorney's Memo":"Ky. Att\u2019y Memo","Kentucky Law Reporter":"Ky. L. Rptr.","Kentucky Law Summary":"Ky. L. Summ.","Kentucky Opinions":"Ky. Op.","Kentucky Reports":"Ky."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;la":{classic:{},"collection-title":{},"container-title":{"Gunby's Reports":"Gunby","Louisiana Annual Reports":"La. Ann.","Louisiana Court of Appeals Reports":"La. App.","Louisiana Reports":"La.","Peltier's Decisions, Parish at Orleans":"Pelt.","Teissier, Orleans Court of Appeals":"Teiss."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;ma":{classic:{},"collection-title":{},"container-title":{"Appellate Division Advance Sheets":"Mass. App. Div. Adv. Sh.","Massachusetts Appeals Court Reports":"Mass. App. Ct.","Massachusetts Appellate Decisions":"Mass. App. Dec.","Massachusetts Reports":"Mass.","Massachusetts Reports Supplement":"Mass. Supp. 246","Reports of MassachusettsAppellate Division":"Mass. App. Div."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;md":{classic:{},"collection-title":{},"container-title":{"Maryland Appellate Reports":"Md. App.","Maryland Reports":"Md."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;me":{classic:{},"collection-title":{},"container-title":{"Maine Reports":"Me."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;mi":{classic:{},"collection-title":{},"container-title":{"Michigan Appeals Reports":"Mich. App.","Michigan Court of Claims Reports":"Mich. Ct. CL","Michigan Reports":"Mich."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;mn":{classic:{},"collection-title":{},"container-title":{"Minnesota Reports":"Minn."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;mo":{classic:{},"collection-title":{},"container-title":{"Missouri Appeals Reports":"Mo. App.","Missouri Reports":"Mo."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;ms":{classic:{},"collection-title":{},"container-title":{"Mississippi Reports":"Miss."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;mt":{classic:{},"collection-title":{},"container-title":{"Montana Reports":"Mont.","State Reporter":"State Rptr."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;nc":{classic:{},"collection-title":{},"container-title":{"North Carolina Court of Appeals Reports":"N.C. App.","North Carolina Reports":"N.C.","North Carolina Reports (63 N.C. to date)":"N.C."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;nd":{classic:{},"collection-title":{},"container-title":{"Dakota Reports":"Dakota","North Dakota Reports":"N.D.","Northwestern Reporter 2d":"N.W.2d"},hereinafter:{},"institution-entire":{"Court of Appeals":"ND App","Supreme Court":"ND"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;ne":{classic:{},"collection-title":{},"container-title":{"Nebraska Court of Appeals Reports":"Neb. App.","Nebraska Reports":"Neb."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;nh":{classic:{},"collection-title":{},"container-title":{"New Hampshire Reports":"N.H."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;nj":{classic:{},"collection-title":{},"container-title":{"New Jersey Administrative Reports":"N.J. Admin.","New Jersey Administrative Reports 2d":"N.J. Admin. 2d","New Jersey Equity Reports":"N.J. Eq.","New Jersey Law Reports":"N.J.L.","New Jersey Miscellaneous Reports":"N.J. Misc.","New Jersey Reports":"N.J.","New Jersey Superior Court Reports":"N.J. Super.","New Jersey Tax Court Reports":"N.J. Tax"},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;nm":{classic:{},"collection-title":{},"container-title":{"New Mexico Reports":"N.M."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;nv":{classic:{},"collection-title":{},"container-title":{"Nevada Report":"Nev.","Nevada Reports":"Nev."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;ny":{classic:{},"collection-title":{},"container-title":{"A.D. 2d":"A.D.2d","A.D. 3d":"A.D.3d","AD 2d":"A.D.2d","AD 3d":"A.D.3d","Abbott's New Cases":"Abb. N. Cas.","Abbott's Practice Reports":"Abb. Pr.","Anthon's Nisi Prius Cases":"Ant. N.P. Cas.","Appellate Division Reports":"A.D.","Appellate Division Reports 2d":"A.D.2d","Appellate Division Reports 3d":"A.D.3d","Barbour's Chancery Reports":"Barb. Ch.","Barbour's Supreme Court Reports":"Barb.","Caines' Cases":"Cai. Cas.","Caines' Reports":"Cai.","Clarke's Chancery Reports":"Cl. Ch.","Coleman & Caines' Cases":"Cole. & Cai. Cas.","Coleman's Cases":"Cole. Cas.","Cowen's Reports":"Cow.","Denio's Reports":"Denio","Edmond's Select Cases":"Edm. Sel. Cas.","Edwards' Chancery Reports":"Edw. Ch.","Hill and Denio Supplement (Lalor)":"Hill & Den.","Hill's Reports":"Hill","Hoffman's Chancery Reports":"Hoff. Ch.","Hopkins' Chancery Reports":"Hopk. Ch.","Howard's Practice Reports":"How. Pr.","Johnson's Cases":"Johns. Cas.","Johnson's Chancery Reports":"Johns. Ch.","Johnson's Reports":"Johns.","Lansing's Chancery Reports":"Lans. Ch.","Lansing's Reports":"Lans.","Lockwood's Reversed Cases":"Lock. Rev. Cas.","Misc 2d":"Misc. 2d","Misc 3d":"Misc. 3d","Misc.2d":"Misc. 2d","Misc.3d":"Misc. 3d","N. Y.":"N.Y.","N.Y. 2d":"N.Y.2d","N.Y. 3d":"N.Y.3d","N.Y.S. 2d":"N.Y.S.2d","N.Y.S. 3d":"N.Y.S.3d","NY 2d":"N.Y.2d","NY 3d":"N.Y.3d","NYS 2d":"N.Y.S.2d","NYS 3d":"N.Y.S.3d","New York Chancery Reports Annotated":"N.Y. Ch. Ann.","New York Miscellaneous Reports":"Misc.","New York Miscellaneous Reports 2d":"Misc. 2d","New York Miscellaneous Reports 3d":"Misc. 3d","New York Reports":"N.Y.","New York Reports 2d":"N.Y.2d","New York Reports 3d":"N.Y.3d","Paige's Chancery Reports":"Paige Ch.","Sandford's Chancery Reports":"Sand. Ch.","Saratoga Chancery Sentinel":"Sarat. Ch. Sent.","Supreme Court Reports":"N.Y. Sup. Ct.","Wendell's Reports":"Wend.","West's New York Supplement":"N.Y.S.","West's New York Supplement 2d":"N.Y.S.2d","West's New York Supplement 3d":"N.Y.S.3d","West\u2019s New York Supplement":"N.Y.S.","West\u2019s New York Supplement 2d":"N.Y.S.2d","West\u2019s New York Supplement 3d":"N.Y.S.3d","Yates' Select Cases":"Yates Sel. Cas."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;oh":{classic:{},"collection-title":{},"container-title":{"Anderson's Unreported Ohio Appellate Cases":"Ohio App. Unrep.","Baldwin's Ohio Monthly Record":"Ohio Monthly Rec.","Ohio Appellate Reports":"Ohio App.","Ohio Appellate Reports 2d":"Ohio App. 2d","Ohio Appellate Reports 3d":"Ohio App. 3d","Ohio Bar Reports":"Ohio B.","Ohio Circuit Court Decisions":"13-23 Ohio C.C. Dec.","Ohio Circuit Court Reports":"Ohio C.C.","Ohio Circuit Court Reports, New Series":"Ohio C.C. (n.s.)","Ohio Circuit Decisions":"Ohio Cir. Dec.","Ohio Courts of Appeals Reports":"Ohio Ct. App.","Ohio Decisions":"Ohio Dec.","Ohio Decisions, Reprint":"Ohio Dec. Reprint","Ohio Department Reports":"Ohio Dep\u2019t","Ohio Government Reports":"Ohio Gov\u2019t","Ohio Law Abstract":"Ohio Law Abs.","Ohio Law Bulletin":"Ohio L. Bull.","Ohio Law Reporter":"Ohio L.R.","Ohio Miscellaneous":"Ohio Misc.","Ohio Miscellaneous 2d":"Ohio Misc. 2d","Ohio Nisi Prius Reports":"Ohio N.P.","Ohio Opinions":"Ohio Op.","Ohio Opinions 2d":"Ohio Op. 2d","Ohio Opinions 3d":"Ohio Op. 3d","Ohio Reports":"Ohio","Ohio St.3d":"Ohio St. 3d","Ohio State Reports":"Ohio St.","Ohio State Reports 2d":"Ohio St. 2d","Ohio State Reports 3d":"Ohio St. 3d","Ohio Unreported Cases":"Ohio Unrep. Cas.","Tappen's Reports":"Tapp. Rep.","Wilcox's Condensed Reports":"Wilc. Cond. Rep."},hereinafter:{},"institution-entire":{Ohio:"Ohio"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;ok":{classic:{},"collection-title":{},"container-title":{"Indian Territory Reports":"Indian Terr.","Oklahoma Criminal Reports":"Okla. Crim.","Oklahoma Reports":"Okla."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;or":{classic:{},"collection-title":{},"container-title":{"Oregon Reports":"Or.","Oregon Reports, Court of Appeals":"Or. App.","Oregon Tax Reports":"Or. Tax"},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;pa":{classic:{},"collection-title":{},"container-title":{"Pa. Commonwealth Ct.":"Pa. Commw.","Pa. Superior Ct.":"Pa. Super.","Pennsylvania Commonwealth Court Reports":"Pa. Commw.","Pennsylvania County Court Reports":"Pa. C.","Pennsylvania District Reports":"Pa. D.","Pennsylvania District and County Reports":"Pa. D. & C","Pennsylvania District and County Reports 2d":"Pa. D. & C.2d","Pennsylvania District and County Reports 3d":"Pa. D. & C.3d","Pennsylvania State Reports":"Pa.","Pennsylvania Superior Court Reports":"Pa. Super."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;pr":{classic:{},"collection-title":{},"container-title":{"Decisiones de Puerto Rico":"P.R. Dec.","Decisiones del Tribunal de Circuito de Apelaciones de Puerto Rico":"T.C.A.","Official Translations of the Opinions of the Supreme Court of Puerto Rico":"P.R. Offic. Trans.","Puerto Rico":"P.R.","Puerto Rico Reports":"P.R.","Sentencias del Tribunal Supremo de Puerto Rico":"P.R. Sent."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;ri":{classic:{},"collection-title":{},"container-title":{"Rhode Island Reports":"R.I."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;sc":{classic:{},"collection-title":{},"container-title":{"South Carolina Reports":"S.C."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;sd":{classic:{},"collection-title":{},"container-title":{"South Dakota Reports":"S.D."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;tn":{classic:{},"collection-title":{},"container-title":{"Tennessee Appeals Reports":"Tenn. App.","Tennessee Criminal Appeals Reports":"Tenn. Crim. App.","Tennessee Reports":"Tenn."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;tx":{classic:{},"collection-title":{},"container-title":{"Condensed Reports of Decisions in Civil Causes in the Court of Appeals (White & Willson)":"White & W. Willson","Condensed Reports of Decisions in Civil Causes in the Court of Appeals (Willson)":"White & W. Willson","Dallam's Opinions":"Dallam","Digest of the Laws of Texas":"Dallam",Robards:"Robards","Synopses of the Decisions of the Supreme Court of Texas Arising from Restraints by Conscript and Other Military Authorities":"Robards","Texas Civil Appeals Reports":"Tex. Civ. App.","Texas Court of Appeals Reports":"Tex. Ct. App.","Texas Criminal Reports":"Tex. Crim.","Texas Reports":"Tex.","Texas Supreme Court Journal":"Tex. Sup. Ct. J.","Texas Unreported Cases (Posey)":"Posey"},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;ut":{classic:{},"collection-title":{},"container-title":{"Utah Reports":"Utah","Utah Reports 2d":"Utah 2d","Vermont Reports":"Vt."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;va":{classic:{},"collection-title":{},"container-title":{"Virginia Circuit Court Opinions":"Va. Cir.","Virginia Court of Appeals Reports":"Va. App.","Virginia Reports":"Va."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;vi":{classic:{},"collection-title":{},"container-title":{"Virgin Islands Reports":"V.I."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;vt":{classic:{},"collection-title":{},"container-title":{"Vermont Reports":"Vt."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;wa":{classic:{},"collection-title":{},"container-title":{"Washington Appellate Reports":"Wash. App.","Washington Reports":"Wash.","Washington Reports 2d":"Wash. 2d","Washington Territory Reports":"Wash. Terr.",Wn:"Wash.","Wn. 2d":"Wash. 2d","Wn. App.":"Wash. App.","Wn. Terr.":"Wash. Terr.","Wn.2d":"Wash. 2d","Wn.App.":"Wash. App."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;wi":{classic:{},"collection-title":{},"container-title":{"Wis.2d":"Wis. 2d","Wisconsin Reports":"Wis.","Wisconsin Reports 2d":"Wis. 2d"},hereinafter:{},"institution-entire":{"Court of Appeals":"WI App","Supreme Court":"WI"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;wv":{classic:{},"collection-title":{},"container-title":{"West Virginia Reports":"W. Va."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},"us;wy":{classic:{},"collection-title":{},"container-title":{"Wyoming Reports":"Wyo."},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},au:{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Australian Capital Territory|Supreme Court":"AUTSC","Australian Federal Police Disciplinary Tribunal":"AFPDT","Competition Tribunal":"ACompT","Copyright Tribunal":"ACopyT","Defence Forces Discipline Appeal Tribunal":"ADFDAT","Family Court":"FamCA","Federal Court":"FCA","Federal Court|Full Court":"FCAFC","Federal Magistrate's Court":"FMCA","High Court":"HCA","Industrial Relations Commission":"AIRComm","Industrial Relations Court of Australia":"IRCA","National Native Title Tribunal":"NNTTA","Native Appeal Tribunal":"AATA","Refugee Review Tribunal":"RRTA","Supreme Court":"AUTSC"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"au;nsw":{classic:{},"collection-title":{},"container-title":{"Administrative Law Decisions":"ALD","Commonwealth Law Reports":"CLR","Family Law Reports":"Fam LR","Federal Court Reports":"FC","New South Wales Law Reports":"NSWLR","Northern Territory Law Reports":"NTLR","Northern Territory Reports":"NTR","Queensland Reports":"QR","Queensland State Reports":"St R Qd","South Australia Law Reports":"SALR","South Australia State Reports":"SASR","State Reports New South Wales":"SR (NSW)","State Reports South Australia":"SRSA","State Reports Tasmania":"Tas SR","Tasmanian Law Reports":"TLR","Tasmanian Reports":"Tas R","Victorian Law Reports":"VLR","Victorian Reports":"VR","Western Australia Law Reports":"WALR","Western Australian Reports":"WAR"},hereinafter:{},"institution-entire":{"Administrative Decisions Tribunal":"NSWADT","Administrative Decisions Tribunal| Appeal Panel":"NSWADTAP","Community Services Appeals Tribunal":"NSWCSAT","Compensation Court":"NSWCC","Consumer, Trader and Tenancy Tribunal":"NSWCTTT","Court of Appeal":"NSWCA","Court of Criminal Appeal":"NSWCCA","District Court":"NSWDC","Drug Court":"NSWDRGC","Dust Diseases Tribunal":"NSWDDT","Industrial Relations Commission":"NSWIRComm","Land and Environment Court":"NSALEEC","Local Government & Pecuniary Interest & Disciplinary Tribunal":"NSWPIDT","Residential Tenancies Tribunal of NSW":"NSWRTT","Supreme Court":"NSWSC","Transport Appeal Board":"NSWTAB","Workers Compensation Commission":"NSW WCC"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"au;nt":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Anti-Discrimination Commission":"NTADDComm","Supreme Court":"NTSC"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"au;qld":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Anti-Discrimination Tribunal":"QADT","Building Tribunal":"QBT","Court of Appeal":"QCA","District Court of Queensland":"QDC","Industrial Court":"QIC","Land Appeal Court":"QLAC","Land Court":"QLC","Medical Assessment Tribunal":"QMAT","Planning & Environment Court":"QPEC","Queensland Industrial Relations Commission":"QIRComm","Supreme Court":"QSC"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"au;sa":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"District Court":"SADC","Environment Resources and Development Court":"SAERDC","Industrial Relations Commission":"SAIRComm","Industrial Relations Court":"SAIRC","Supreme Court":"SASC","Workers Compensation Appeal Tribunal":"SAWCAT"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"au;tas":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Resource Management and Planning Appeal Tribunal":"TASRMPAT","Supreme Court":"TASSC"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"au;vic":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Civil and Administrative Tribunal":"VCAT","County Court":"VCC","Court of Appeal":"VSCA","Supreme Court":"VSC"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"au;wa":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Children\u2019s Court":"WACC","District Court":"WADC","Family Court":"FamCWA","State Administrative Tribunal":"WASAT","State Administrative Tribunal|Equal Opportunity Tribunal":"WAEOT","State Administrative Tribunal|Guardianship and Administration Board":"WAGAB","State Administrative Tribunal|Office of the Strata Titles Referee":"WASTR","State Administrative Tribunal|Town Planning Appeal Tribunal":"WATPAT","Supreme Court":"WASC","Supreme Court|Criminal Appeal":"WASCA"},"institution-part":{},nickname:{},number:{},place:{},title:{}},ca:{classic:{},"collection-title":{},"container-title":{"Alberta Law Reports":"Alta LR","Alberta Reports":"AR","British Columbia Reports":"BCR","Canada Law Reports: Supreme Court of Canada":"!authority>>>SCR","Canada Rederal Court Reports":"FC","Canada Supreme Court Reports":"!authority>>>SCR","Exchequer Court of Canada Reports":"Ex CR","Federal Court Reports":"FC","Manitoba Reports":"Man R","New Brunswick Reports":"NBR","New Brunswick Reports (2d)":"NBR (2d)","Newfoundland & Prince Edward Island Reports":"Nfld & PEIR","Northwest Territories Reports":"NZTR","Nova Scotia Reports":"NSR","Nova Scotia Reports (2d)":"NSR (2d)","Ontario Law Reports":"OLR","Ontario Reports (2d)":"OR (2d)","Ontario Reports (3d)":"OR (3d)","Ontario Reports Second":"OR (2d)","Ontario Weekly Notes":"OWN","Rapports judiciaries officiels de Qu\xe9bec: Cour du Banc de la Reine/du Roi":"BR","Rapports judiciaries officiels de Qu\xe9bec: Cour sup\xe9rieure":"CS","Recueils de jurisprudence du Qu\xe9bec: Cour d'appel":"CA","Recueils de jurisprudence du Qu\xe9bec: Cour des Sessions de la paix":"CSP","Recueils de jurisprudence du Qu\xe9bec: Cour du Banc de la Reine/du Roi":"BR","Recueils de jurisprudence du Qu\xe9bec: Cour du bein-\xeatre social":"CBES","Recueils de jurisprudence du Qu\xe9bec: Cour provinciale":"CP","Recueils de jurisprudence du Qu\xe9bec: Tribunal de la jeunesse":"TJ","Recueils du jurisprudence du Qu\xe9bec: Cour sup\xe9rieure":"CS","Supreme Court Reports":"!authority>>>S.C.R.","Territories Law Reports":"Terr LR","Yukon Reports":"YR"},hereinafter:{},"institution-entire":{"Federal Court":"!authority,jurisdiction>>>FC","Federal Court of Appeal":"!authority,jurisdiction>>>FCA","Supreme Court":"!authority>>>SCC"},"institution-part":{"Court of Appeal":"CA","District Court":"DC","High Court":"HC","High Court of Justice":"High Ct J","House of Lords":"HL","Privy Council":"PC","Supreme Court":"SC"},nickname:{},number:{},place:{},title:{}},"ca;ab":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Court of Appeal":"!authority,jurisdiction>>>ABCA","Court of Queen's Bench":"!authority,jurisdiction>>>ABQB","Provincial Court":"!authority,jurisdiction>>>ABPC"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"ca;bc":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Court of Appeal":"!authority,jurisdiction>>>BCCA","Provincial Court":"!authority,jurisdiction>>>BCPC","Supreme Court":"!authority,jurisdiction>>>BCSC"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"ca;mb":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Court of Appeal":"!authority,jurisdiction>>>MBCA","Court of Queen's Bench":"!authority,jurisdiction>>>MBQB","Provincial Court":"!authority,jurisdiction>>>MBPC"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"ca;nb":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Court of Appeal":"!authority,jurisdiction>>>NBCA","Court of Queen's Bench":"!authority,jurisdiction>>>NBQC","Provincial Court":"!authority,jurisdiction>>>NBPC"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"ca;nl":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Supreme Court|Court of Appeal":"!authority,jurisdiction>>>NFCA","Supreme Court|Trial Division":"!authority,jurisdiction>>>NFSCTD"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"ca;ns":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Court of Appeal":"!authority,jurisdiction>>>NSCA","Provincial Court":"!authority,jurisdiction>>>NSPC","Supreme Court":"!authority,jurisdiction>>>NSSC","Supreme Court|Family Division":"!authority,jurisdiction>>>NSSF"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"ca;nt":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Court of Appeal":"!authority,jurisdiction>>>NWTCA","North West Territories|Territorial Court":"!authority,jurisdiction>>>NWTTC","Supreme Court":"!authority,jurisdiction>>>NWTSC"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"ca;nu":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Court of Appeal":"!authority,jurisdiction>>>NUCA","Court of Justice":"!authority,jurisdiction>>>NUCJ"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"ca;on":{classic:{},"collection-title":{},"container-title":{"Ontario Reports Second":"OR (2d)"},hereinafter:{},"institution-entire":{"Court of Appeal":"!authority,jurisdiction>>>ONCA","Court of Justice":"!authority,jurisdiction>>>ONCJ"},"institution-part":{"High Court of Justice":"H Ct J"},nickname:{},number:{},place:{},title:{}},"ca;pe":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Supreme Court|Appeal Division":"!authority,jurisdiction>>>PESCAD","Supreme Court|Trial Division":"!authority,jurisdiction>>>PESCTD"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"ca;qc":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Court of Appeal":"!authority,jurisdiction>>>QCCA","Court of Qu\xe9bec":"!authority,jurisdiction>>>QCCP","Superior Court":"!authority,jurisdiction>>>QCCS"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"ca;sk":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Court of Appeal":"!authority,jurisdiction>>>SKCA","Court of Queen's Bench":"!authority,jurisdiction>>>SKQB","Provincial Court":"!authority,jurisdiction>>>SKPC"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"ca;yt":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Court of Appeal":"!authority,jurisdiction>>>YKCA","Supreme Court":"!authority,jurisdiction>>>YKSC","Territorial Court":"!authority,jurisdiction>>>YKTC"},"institution-part":{},nickname:{},number:{},place:{},title:{}},default:{classic:{},"collection-title":{},"container-title":{"Administrative Law Decisions":"ALD","Alberta Law Reports":"Alta LR","Alberta Reports":"AR","All England Law Reports":"All ER","All England Reports":"All E.R.","Appeal Cases":"AC","British Columbia Reports":"BCR","British Company Law Cases":"BCC","Butterworths Medico-Legal Reports":"B.M.L.R.","Canada Law Reports: Supreme Court of Canada":"!authority>>>SCR","Canada Rederal Court Reports":"FC","Canada Supreme Court Reports":"!authority>>>SCR",Chancery:"Ch","Common Market Law Reports":"CMLR","Commonwealth Law Reports":"CLR","Criminal Appeal Reports":"Cr App R","Criminal Appeal Reports (Sentencing)":"Cr App R (S)","Criminal Reports of New Zealand":"CRNZ","Current Law Yearbook":"CLY","District Court Reports":"DCR","Employment Reports of New Zealand":"ERNZ","English Reports":"ER","Environmental Law Reporter":"NZELR","Environmental Law Reports of New Zealand":"ELRNZ","Estates Gazette":"EG","Estates Gazette Law Reports":"EGLR","European Court Reports":"ECR","European Human Rights Reports":"E.H.R.R.","Exchequer Court of Canada Reports":"Ex CR",Family:"Fam","Family Law Reports":"Fam LR","Family Reports of New Zealand":"FRNZ","Federal Court Reports":"FC","Financial Times Law Reports":"FTLR","Fleet Street Reports":"FSR","Gazette Law Reports":"GLR","Harvard Law Review":"Harv. L. Rev.","Housing Law Reports":"HLR","Human Rights Reports of New Zealand":"HRNZ","Industrial Cases Reports":"ICR","Industrial Relations Law Reports":"IRLR","Justice of the Peace Reports":"JP","Land Valuation Casebook":"Land Valuation Casebook","Land Valuation Cases":"Land Valuation Cases","Landlord and Tenant Reports":"L & TR","Law Society Gazette":"LS Gaz","Lloyd's Law Reports":"Lloyd's Rep","Local Government Reports":"LGR","Macassey's Reports":"Mac","Magistrates' Court Reports":"MCR","Magistrates' Courts Decisions":"MCD","Manitoba Reports":"Man R","Maori Law Review":"Maori LR","Matrimonial Property Act Cases":"MPC","Morison's Company Law Reports":"MCLR","New Brunswick Reports":"NBR","New Brunswick Reports (2d)":"NBR (2d)","New Property Cases":"NPC","New South Wales Law Reports":"NSWLR","New Zealand Accident Compensation Reports":"NZACR","New Zealand Administrative Reports":"NZAR","New Zealand Arbitation Court Judgments":"ACJ","New Zealand Armed Forces Law Review":"NZAFLR","New Zealand Bill of Rights Reports":"NZBORR","New Zealand Business Law Cases":"NZBLC","New Zealand Business Law Cases Commerce Commission Decisions":"NZBLC (Com)","New Zealand Company Law Cases":"NZCLC","New Zealand Company and Commercial Law Reports":"NZCCLR","New Zealand Conveyancing Cases":"NZ ConvC","New Zealand Conveyancing and Property Reports":"NZCPR","New Zealand Courts Martial Appeal Reports":"NZCMAR","New Zealand Current Taxation":"New Zealand Current Taxation","New Zealand Customs Cases":"NZCC","New Zealand Employment Law Cases":"NZELC","New Zealand Employment Law Reports":"NZELR","New Zealand Environmental Law Reporter":"NZELR","New Zealand Family Law Reports":"NZFLR","New Zealand Industrial Court Judgments":"ICJ","New Zealand Industrial Law Reports":"NZILR","New Zealand Intellectual Property Reports":"NZIPR","New Zealand Jurist Reports (New Series)":"NZ Jur (NS)","New Zealand Law Reports":"NZLR","New Zealand Law Reports Leading Cases":"NZLRLC","New Zealand Parliamentary Debates":"NZPD","New Zealand Privy Council Cases":"NZPCC","New Zealand Procedural Cases":"NZPC","New Zealand Resource Management Appeals":"NZRMA","New Zealand Superannuation cases":"NZSC","New Zealand Tax Cases":"NZTC","New Zealand Taxation Board of Review Decisions":"NZTBR","New Zealand Town Planning Appeals":"NZTPA","New Zealand Town and Country Planning Appeals":"NZTCPA","Newfoundland & Prince Edward Island Reports":"Nfld & PEIR","Northern Territory Law Reports":"NTLR","Northern Territory Reports":"NTR","Northwest Territories Reports":"NZTR","Nova Scotia Reports":"NSR","Nova Scotia Reports (2d)":"NSR (2d)","Ollivier, Bell & Fitzgerald's Reports of Cases":"OB&F","Ontario Law Reports":"OLR","Ontario Reports (2d)":"OR (2d)","Ontario Reports (3d)":"OR (3d)","Ontario Weekly Notes":"OWN","Privy Council":"P","Procedure Reports of New Zealand":"PRNZ","Property and Compensation Reports":"P&CR","Public and Third Sector Law Reports":"PTSLR","Queen's Bench":"QB","Queensland Reports":"QR","Queensland State Reports":"St R Qd","Rapports judiciaries officiels de Qu\xe9bec: Cour du Banc de la Reine/du Roi":"BR","Rapports judiciaries officiels de Qu\xe9bec: Cour sup\xe9rieure":"CS","Rating and Valuation Reporter":"RVR","Recueils de jurisprudence du Qu\xe9bec: Cour d'appel":"CA","Recueils de jurisprudence du Qu\xe9bec: Cour des Sessions de la paix":"CSP","Recueils de jurisprudence du Qu\xe9bec: Cour du Banc de la Reine/du Roi":"BR","Recueils de jurisprudence du Qu\xe9bec: Cour du bein-\xeatre social":"CBES","Recueils de jurisprudence du Qu\xe9bec: Cour provinciale":"CP","Recueils de jurisprudence du Qu\xe9bec: Tribunal de la jeunesse":"TJ","Recueils du jurisprudence du Qu\xe9bec: Cour sup\xe9rieure":"CS","Reports of Patent Cases":"RPC","Road Traffic Reports":"RTR","Scots Law Times":"SLT","Scottish Civil Law Reports":"SCLR","Scottish Criminal Case Reports ":"SCCR","Session Cases":"SC","Simon's Tax Cases":"STC","Simon's Tax Intelligence":"STI","South Australia Law Reports":"SALR","South Australia State Reports":"SASR","State Reports New South Wales":"SR (NSW)","State Reports South Australia":"SRSA","State Reports Tasmania":"Tas SR","Tasmanian Law Reports":"TLR","Tasmanian Reports":"Tas R","Tax Cases":"TC","Tax Reports New Zealand":"Tax Reports New Zealand","Territories Law Reports":"Terr LR","Trade and Competition Law Reports":"TCLR","Victorian Law Reports":"VLR","Victorian Reports":"VR","Weekly Law Reports":"WLR","Western Australia Law Reports":"WALR","Western Australian Reports":"WAR","Wills & Trusts Law Reports":"WTLR","Yukon Reports":"YR"},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{}},gb:{classic:{},"collection-title":{"Command Papers 1987-present":"Cm"},"container-title":{"All England Law Reports":"All E.R.","All England Reports":"All E.R.","Appeal Cases":"AC","British Company Law Cases":"BCC","Butterworths Medico-Legal Reports":"B.M.L.R.",Chancery:"Ch","Common Market Law Reports":"CMLR","Criminal Appeal Reports":"Cr App R","Criminal Appeal Reports (Sentencing)":"Cr App R (S)","Current Law Yearbook":"CLY","English Reports":"ER","Estates Gazette":"EG","Estates Gazette Law Reports":"EGLR","European Court Reports":"ECR","European Human Rights Reports":"EHRR",Family:"Fam","Family Law Reports":"FLR","Financial Times Law Reports":"FTLR","Fleet Street Reports":"FSR","Housing Law Reports":"HLR","Industrial Cases Reports":"ICR","Industrial Relations Law Reports":"IRLR","Justice of the Peace Reports":"JP","Landlord and Tenant Reports":"L & TR","Law Society Gazette":"LS Gaz","Lloyd's Law Reports":"Lloyd's Rep","Local Government Reports":"LGR","New Property Cases":"NPC","Property and Compensation Reports":"P&CR","Public and Third Sector Law Reports":"PTSLR","Queen's Bench":"QB","Rating and Valuation Reporter":"RVR","Reports of Patent Cases":"RPC","Road Traffic Reports":"RTR","Scots Law Times":"SLT","Scottish Civil Law Reports":"SCLR","Scottish Criminal Case Reports ":"SCCR","Session Cases":"SC","Simon's Tax Cases":"STC","Simon's Tax Intelligence":"STI","Tax Cases":"TC","The Times":"The Times","Weekly Law Reports":"WLR","Wills & Trusts Law Reports":"WTLR"},hereinafter:{},"institution-entire":{"Administrative Appeals Chamber":"AAC","Asylum and Immigration Tribunal":"United Kingdom Asylum and Immigration Tribunal","Competition Appeals Tribunal":"United Kingdom Competition Appeals Tribunal","Employment Appeal Tribunal":"UKEAT","Financial Services and Markets Tribunals":"United Kingdom Financial Services and Markets Tribunals Decisions","First-tier Tribunal":"UKFTT","First-tier Tribunal|General Regulatory Chamber":"First-tier Tribunal (General Regulatory Chamber)","First-tier Tribunal|Tax":"First-tier Tribunal (Tax)","Health Education and Social Care Chamber":"HESC","High Court|Chancery":"UKHC","House of Lords":"UKHL","Information Tribunal and National Security Appeals Panel":"United Kingdom Information Tribunal including the National Security Appeals Panel","Nominet Dispute Resolution Service":"Nominet UK Dispute Resolution Service","Privy Council":"UKPC","Social Security and Child Support Commissioners":"UK Social Security and Child Support Commissioners' Decisions","Special Commissioners of Income Tax":"United Kingdom Special Commissioners of Income Tax Decisions","Special Immigrations Appeals Commission":"UKSIAC","Supreme Court":"UKSC","Upper Tribunal|Administrative Appeals Chamber":"UKUT","Upper Tribunal|Immigration and Asylum Chamber":"Upper Tribunal (Immigration and Asylum Chamber)","Upper Tribunal|Lands Chamber":"Upper Tribunal (Lands Chamber)","Upper Tribunal|Tax and Chancery Chamber":"Upper Tribunal (Tax and Chancery Chamber)","VAT and Duties Tribunals":"United Kingdom VAT & Duties Tribunals Decisions","VAT and Duties Tribunals|Customs":"United Kingdom VAT & Duties Tribunals (Customs) Decisions","VAT and Duties Tribunals|Excise":"United Kingdom VAT & Duties Tribunals (Excise) Decisions","VAT and Duties Tribunals|Insurance Premium Tax":"United Kingdom VAT & Duties Tribunals (Insurance Premium Tax) Decisions","VAT and Duties Tribunals|Landfill Tax":"United Kingdom VAT & Duties Tribunals (Landfill Tax) Decisions"},"institution-part":{Chancery:"Ch","House of Lords":"HL","King's Bench":"KB","Queen's Bench":"QB"},nickname:{},number:{},place:{},title:{"George III":"Geo 3"}},"gb;england.and.wales":{classic:{},"collection-title":{},"container-title":{"All England Reports":"All ER"},hereinafter:{},"institution-entire":{"Administrative Court":"Admin","Care Standards Tribunal":"England and Wales Care Standards Tribunal Decisions","Chancery Division":"Ch","Commercial Court":"Comm","County Court|Family":"England and Wales County Court (Family)","County Court|Patents":"England and Wales Patents County Court Decisions","Court of Appeal|Civil Division":"EWCA Civ","Court of Appeal|Criminal Division":"EWCA Crim","England and Wales|Admiralty Division":"Admlty","Family Division":"Fam","High Court":"EWHC","High Court|Chancery":"EWHC","Lands Tribunal":"England and Wales Lands Tribunal","Magistrates' Court|Family":"England and Wales Magistrates' Court (Family)","Patents Court":"Pat","Queen's Bench Division":"QB","Technology and Construction Court":"TCC"},"institution-part":{Chancery:"Ch","Court of Appeal":"CA","Queen's Bench":"QB"},nickname:{},number:{},place:{},title:{}},"gb;northern.ireland":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Court of Appeal":"NICA","Crown Court":"NICC","Fair Employment Tribunal":"Fair Employment Tribunal Northern Ireland Decisions","High Court|Chancery Division":"High Court of Justice in Northern Ireland Chancery Division Decisions","High Court|Family Division":"High Court of Justice in Northern Ireland Family Division Decisions","High Court|Masters":"High Court of Justice in Northern Ireland Master's Decisions","High Court|Queen's Bench Division":"NIQB","Industrial Tribunals":"Industrial Tribunals Northern Ireland Decisions","Social Security and Child Support Commissioners":"Northern Ireland - Social Security and Child Support Commissioners' Decisions"},"institution-part":{},nickname:{},number:{},place:{},title:{}},"gb;scotland":{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Court of Session|Inner House":"CSIH","Court of Session|Outer House":"CSOH","High Court":"HCJT","Sheriff Court":"Scottish Sheriff Court Decisions"},"institution-part":{},nickname:{},number:{},place:{},title:{}},ie:{classic:{},"collection-title":{},"container-title":{},hereinafter:{},"institution-entire":{"Competition Authority":"Irish Competition Authority Decisions","Court of Criminal Appeal":"Irish Court of Criminal Appeal","Data Protection Commission":"Irish Data Protection Commission Case Studies","High Court":"High Court of Ireland Decisions","Information Commissioner":"Irish Information Commissioner's Decisions","Supreme Court":"Supreme Court of Ireland Decisions"},"institution-part":{},nickname:{},number:{},place:{},title:{}},nz:{classic:{},"collection-title":{},"container-title":{"Criminal Reports of New Zealand":"CRNZ","District Court Reports":"DCR","Employment Reports of New Zealand":"ERNZ","Environmental Law Reporter":"NZELR","Environmental Law Reports of New Zealand":"ELRNZ","Family Reports of New Zealand":"FRNZ","Gazette Law Reports":"GLR","Human Rights Reports of New Zealand":"HRNZ","Land Valuation Casebook":"Land Valuation Casebook","Land Valuation Cases":"Land Valuation Cases","Macassey's Reports":"Mac","Magistrates' Court Reports":"MCR","Magistrates' Courts Decisions":"MCD","Maori Law Review":"Maori LR","Matrimonial Property Act Cases":"MPC","Morison's Company Law Reports":"MCLR","New Zealand Accident Compensation Reports":"NZACR","New Zealand Administrative Reports":"NZAR","New Zealand Arbitation Court Judgments":"ACJ","New Zealand Armed Forces Law Review":"NZAFLR","New Zealand Bill of Rights Reports":"NZBORR","New Zealand Business Law Cases":"NZBLC","New Zealand Business Law Cases Commerce Commission Decisions":"NZBLC (Com)","New Zealand Company Law Cases":"NZCLC","New Zealand Company and Commercial Law Reports":"NZCCLR","New Zealand Conveyancing Cases":"NZ ConvC","New Zealand Conveyancing and Property Reports":"NZCPR","New Zealand Courts Martial Appeal Reports":"NZCMAR","New Zealand Current Taxation":"New Zealand Current Taxation","New Zealand Customs Cases":"NZCC","New Zealand Employment Law Cases":"NZELC","New Zealand Employment Law Reports":"NZELR","New Zealand Environmental Law Reporter":"NZELR","New Zealand Family Law Reports":"NZFLR","New Zealand Industrial Court Judgments":"ICJ","New Zealand Industrial Law Reports":"NZILR","New Zealand Intellectual Property Reports":"NZIPR","New Zealand Jurist Reports (New Series)":"NZ Jur (NS)","New Zealand Law Reports":"NZLR","New Zealand Law Reports Leading Cases":"NZLRLC","New Zealand Parliamentary Debates":"NZPD","New Zealand Privy Council Cases":"NZPCC","New Zealand Procedural Cases":"NZPC","New Zealand Resource Management Appeals":"NZRMA","New Zealand Superannuation cases":"NZSC","New Zealand Tax Cases":"NZTC","New Zealand Taxation Board of Review Decisions":"NZTBR","New Zealand Town Planning Appeals":"NZTPA","New Zealand Town and Country Planning Appeals":"NZTCPA","Ollivier, Bell & Fitzgerald's Reports of Cases":"OB&F","Procedure Reports of New Zealand":"PRNZ","Tax Reports New Zealand":"Tax Reports New Zealand","Trade and Competition Law Reports":"TCLR"},hereinafter:{},"institution-entire":{"Court of Appeal":"NZCA","District Court":"NZDC","High Court":"NZHC","Supreme Court":"NZSC"},"institution-part":{"Court of Appeal":"CA","District Court":"DC","High Court":"HC","House of Lords":"HL","Privy Council":"PC","Supreme Court":"SC"},nickname:{},number:{},place:{},title:{}}},getAbbreviation:function(e){for(var t in this.abbr)if("container-title"in this.abbr[t]){var r=this.abbr[t]["container-title"][e];if(r)return r=r.replace(/!authority>>>/,"")}return""},getAbbreviations:function(e){var t={default:{classic:{},"collection-title":{},"container-phrase":{},"container-title":{},hereinafter:{},"institution-entire":{},"institution-part":{},nickname:{},number:{},place:{},title:{},"title-phrase":{}}};return t["institution-part"]=this.abbr.ca["institution-part"],t},getReporterMap:function(e){var t={};for(var r in this.abbr)if("container-title"in this.abbr[r]){var a=this.abbr[r]["container-title"];for(var i in a){var n=a[i];e&&(n=(n=n.toUpperCase().replace(/[\s\.]+/g,"")).replace(/\!authority>>>/i,"")),n in t?i.length>t[n].length&&(t[n]=i):t[n]=i}}return t.US="United States Reports",t}}),m.library.LegalAbbreviations=new m.library._LegalAbbreviations,m.library._Merge=m.Class.extend({merge:function(e,t){var r=this;e=m.Utils.clone(e),t=m.Utils.clone(t);var a={};return a._id=m.UUID.generate(),m.library.PublicationFields.getFields().forEach((function(i){r.fillInField(a,e,t,i)})),m.library.Publication.autoClean(a),a},fillInField:function(e,t,r,a){var i=a.name;if(!{_id:!0,_keywords:!0,subfolders:!0}[i]){var n=t[i],o=r[i],s=null==n||""===n,l=null==o||""===o;if(!s||!l)if(!s||l)if(!l||s)if("author"===a.fieldType){if(n&&o){if(n.length!=o.length){var c=n.length>o.length?n:o;return void(e[i]=c)}c=this.authorCharLength(n)>=this.authorCharLength(o)?n:o;return void(e[i]=c)}}else if("date"===a.fieldType){if(n&&o){c=this.getDateSpecificity(n)>=this.getDateSpecificity(o)?n:o;return void(e[i]=c)}}else{if("object"!==a.dataType){if("array"===a.dataType){var u=n.concat(o);return u=m.Array.unique(u),void(e[i]=u)}c=(n=""+n).length>=(o=""+o).length?n:o;return void(e[i]=c)}var d={};m.Utils.merge(d,n),m.Utils.merge(d,o),e[i]=d}else e[i]=n;else e[i]=o}},getDateSpecificity:function(e){var t=0;return["year","month","day"].forEach((function(r){e[r]&&t++})),t},authorCharLength:function(e){var t=0;return e.forEach((function(e){t+=e.last?e.last.length:0,t+=e.first?e.first.length:0,t+=e.collective?e.collective.length:0})),t},runTests:function(){var e={pubtype:"PP_ARTICLE",author:[{last:"Jordan",first:"GE",initials:"GE"}],published:{year:2007},title:"Testing testing one two three",url:["http://www.google.com/"],source:{pdf_crawl_status:"complete"}},t=m.Utils.clone(e);t.author=[{last:"Jordan",first:"Gregory Eric",initials:"GE"}],t.published={year:2007,month:10,day:12},t.url=["http://www.yahoo.com/"],t.source={webimport_status:"success",plugin:"pubmed"},m.library.Publication.autoClean(e),m.library.Publication.autoClean(t);var r=m.library.Merge.merge(e,t);console.log(m.pp(r))}}),g(m.library,"_Merge","Merge"),m.library.Patterns=m.Class.extend({statics:{applyPattern:function(e,t){var r=t[m.library.Publication.getAuthorType(t)];void 0===r&&(r=[]);for(var a=[],i=0;i<r.length;i++)a.push(m.library.Author.toString(r[i],{output:"last"}));0===a.length&&(a=["_noauthor_"]);var n,o=a[0],s=a[a.length-1];o===s&&(s=""),t.published&&t.published.year?(n=t.published.year+"").substring(2,4):n="_undated_",o=o.replace(/\s+/g,"_"),s=s.replace(/\s+/g,"_"),a.length>0&&(o===o.toUpperCase()&&(o=o.toLowerCase()),o=m.String.upperFirst(o),s===s.toUpperCase()&&(s=s.toLowerCase()),s=m.String.upperFirst(s));var l="";for(i=0;i<2;i++)l+=this.getRandomChar();var c=o.substr(0,1).toUpperCase(),u={firstAuthor:o,lastAuthor:s,initial:c,year:n,randomChars:l};return e=(e=(e=m.Utils.template(e,u)).replace(/\[/g,"")).replace(/\]/g,""),m.Globals.isDocAddOn(),e=(e=(e=(e=(e=(e=m.Utils.replaceDiacritics(e)).replace(/[^\w-]/g,"")).replace(/_-/g,"-")).replace(/_+/g,"_")).replace(/^_/g,"")).replace(/_$/g,"")},getRandomChar:function(){var e="abcdefghijklmnopqrstuvwxyz",t=Math.floor(Math.random()*e.length);return e.charAt(t)}}}),m.library._PublicationTypes=m.Class.extend({getBibtexMap:function(){for(var e=this.getPubTypes(),t={},r=0;r<e.length;r++)for(var a=e[r].bibtex_types,i=0;i<a.length;i++){var n=a[i];t[n]?t[n].push(e[r].id):t[n]=[e[r].id]}return t},getPubTypeMap:function(){if(this._map)return this._map;for(var e=this.getPubTypes(),t={},r=0;r<e.length;r++){t[e[r].id]=e[r]}return this._map=t,t},getPubType:function(e){var t=this.getPubTypes();for(var r in t)if(t[r]){var a=t[r];if(a.id===e)return a}return null},getSortOrder:function(){return["PP_ARTICLE","PP_BOOK","PP_BOOK_CHAPTER","PP_CONFERENCE_PAPER","PP_THESIS","PP_PREPRINT","PP_MANUSCRIPT","PP_WEBSITE","PP_NEWS_ARTICLE","PP_PATENT","PP_PRESENTATION","PP_COMPUTER_PROGRAM","PP_REPORT","PP_MANUAL","PP_DATASET","PP_PERSONAL_COMMUNICATION","PP_UNPUBLISHED","PP_MISC","PP_BROADCAST","PP_AUDIO","PP_VIDEO","PP_FIGURE","PP_ARTWORK","PP_SCORE","PP_GRANT","PP_STANDARD","PP_MAP","PP_LETTER","PP_INTERVIEW","PP_REVIEW","PP_ENCYCLOPEDIA_ARTICLE","PP_CASE","PP_STATUTE","PP_BILL","PP_TREATY","PP_PERIODICAL"]},getTitleHelp:function(){return"<p>Italics: &lt;i&gt<i>Homo sapiens</i>&lt;/i&gt <br>Superscript: Ca&lt;sup&gt<sup>2+</sup>&lt;/sup&gt <br>Subscript: H&lt;sub&gt<sub>2</sub>&lt;/sub&gt;O</p>"},getAuthorHelp:function(){return", separated by semicolons <p><i>Last, First Middle</i> <p>e.g. Knuth, Donald E; Moore, Ronald W</p><p><i>Collective names in braces</i><p>e.g. {1000 Genomes Consortium}</p>"},getDateHelp:function(){return"<p>'2002' <i>or</i> 'June 2002' <i>or</i> 'June 24, 2002' <br/> <i>or free-form date in braces<i><br> '{May-June 1876}'</p>"},getEditWindowPubTypes:function(){var e=m.Utils.clone(this.getPubTypes());e=m.Array.filter(e,(function(e){return!0!==e.hideFromEditWindow}));var t=m.Array.toMap(e,"id"),r=[],a=["PP_ARTICLE","PP_BOOK","PP_BOOK_CHAPTER","PP_CONFERENCE_PAPER","PP_THESIS","PP_NEWS_ARTICLE","PP_WEBSITE","PP_MISC"],i=["PP_MANUSCRIPT","PP_ARTWORK","PP_AUDIO","PP_BILL","PP_REVIEW","PP_BROADCAST","PP_CASE","PP_COMPUTER_PROGRAM","PP_DATASET","PP_ENCYCLOPEDIA_ARTICLE","PP_FIGURE","PP_GRANT","PP_INTERVIEW","PP_LETTER","PP_MANUAL","PP_MAP","PP_SCORE","PP_PATENT","PP_PERSONAL_COMMUNICATION","PP_PREPRINT","PP_PRESENTATION","PP_REPORT","PP_STANDARD","PP_STATUTE","PP_TREATY","PP_VIDEO","PP_UNPUBLISHED","PP_PERIODICAL"];r.push({isHeader:!0,name:"Main reference types"});for(var n=0;n<a.length;n++)r.push(t[a[n]]);r.push({isHeader:!0,name:"More reference types"});for(n=0;n<i.length;n++)r.push(t[i[n]]);return r},getPubTypes:function(){if(this._types)return this._types;var e={patent:["issuing_authority","application_number","class","international_class","search_class","states","priority_numbers","patent_number","assignee","foreign_patents","patent_publication_type"],legal:["jurisdiction","history","section","legislative_body","session","court"],issn:["issn","issn_alt"],isbn:["isbn","isbn_alt"],pubmed:["pmc","pmid"],arxiv:["archivePrefix","arxivid","primaryClass","eprint"],misc:["running_time","scale","ismn"],conference:["conference","conference_location","conference_date"],journal:["journal","journalfull","issue"],book:["booktitle","chapter"],math:["mr","zbl"],pages:["pages","num_pages"],volume:["volume","num_volumes"],publisher:["publisher","address","original_publisher","original_address"],series:["series","series_number","series_editor"],thesis:["school","department"],archive:["archive","archive_location","archive_place"]},t=[{id:"PP_BOOK",name:"Book",label:"Book",description:"A whole book",bibtex_types:["BOOK"],biblatex_type:[{name:"BOOK",default:!0},{name:"PROCEEDINGS",subtype:"Proceedings"},{name:"BOOKLET",subtype:"Booklet"},{name:"REFERENCE",subtype:"Encyclopedia"},{name:"REFERENCE",subtype:"Dictionary"}],zotero_type:"BOOK",mendeley_type:"BOOK",endnote_type:[{name:"BOOK",default:!0},{name:"CONFERENCE PROCEEDINGS",subtype:"Proceedings"},{name:"ELECTRONIC BOOK",subtype:"Electronic Book"},{name:"EDITED BOOK"},{name:"ANCIENT TEXT",subtype:"Ancient Text"},{name:"CLASSICAL WORK",subtype:"Classical Work"},{name:"DICTIONARY",subtype:"Dictionary"}],csl_type:"book",openxml_type:"Book",ris_type:[{name:"BOOK",default:!0},{subtype:"Proceedings",name:"CONF"},{subtype:"Ancient Text",name:"ANCIENT"},{subtype:"Dictionary",name:"DICT"},{name:"EBOOK"}],citavi_type:[{name:"Book"},{name:"BookEdited"},{name:"BookWhole"},{name:"ConferenceProceedings",subtype:"Proceedings"},{name:"CollectedWorks"}],refworks_type:[{name:"Book, Whole"},{name:"Book, Edited"},{name:"Monograph",subtype:"Monograph"}],field_labels:{pages:"Pages cited"},field_ris:{isbn:"SN",series:"T2",num_pages:"SP",pages:"SE",series_editor:"A2",editor:"A3",original_title:"OP",translator:"A4"},field_ris_additional:{ED:"editor"},field_endnote:{series_number:"%N",num_pages:"%P",pages:"%&"},field_zotero:{},field_help:{title:"Title of the book."+this.getTitleHelp(),pages:"<p>The range or starting page, e.g. <p>'210-213' or '210'</p>"},subtypes:[{name:"Monograph"},{name:"Textbook"},{name:"Booklet"},{name:"Proceedings"},{name:"Encyclopedia"},{name:"Dictionary"},{name:"Classical Work"},{name:"Ancient Text"},{name:"Fiction"},{name:"Electronic Book"},{name:"Audio Book"}],mandatory_fields:["title","author","editor","published",["publisher","address"],["series","volume"],"isbn"],excluded_fields:m.Array.merge(e.patent,e.misc,e.legal,e.journal,e.thesis,e.arxiv,e.pubmed,["booktitle","howpublished","institution","version","filed","number","socialmedia_handle"])},{id:"PP_REVIEW",name:"Book or Film Review",label:"Book or Film Review",description:"A published review of a book or film",bibtex_types:["MISC"],biblatex_type:"REVIEW",zotero_type:[],mendeley_type:[],endnote_type:[],csl_type:"review-book",openxml_type:"Misc",ris_type:[],field_labels:{contributor:"Reviewed author",booktitle:"Title of the reviewed item"},field_ris:{isbn:"SN",series:"T2",num_pages:"SP",pages:"SE",series_editor:"A2",editor:"A3",original_title:"OP",translator:"A4"},field_ris_additional:{ED:"editor"},field_endnote:{},field_zotero:{},field_csl:{booktitle:"reviewed-title",contributor:"reviewed-author"},field_help:{title:"Title of the book"+this.getTitleHelp(),booktitle:"The title of the reviewed item"+this.getTitleHelp(),contributor:"The author(s) of the reviewed item"+this.getAuthorHelp()},subtypes:[{name:"Film review"},{name:"Book review"}],mandatory_fields:["title","author","booktitle","contributor",["journal:2","published"],["volume","issue","pages"],"url"],excluded_fields:m.Array.merge(e.patent,e.conference,e.misc,e.legal,e.thesis,e.arxiv,e.pubmed,["howpublished","institution","number","version","filed","medium","socialmedia_handle"])},{id:"PP_BOOK_CHAPTER",name:"Book Chapter",label:"Book Chapter",description:"Book chapter, with its own title and authors",bibtex_types:["INCOLLECTION","INBOOK"],biblatex_type:"INBOOK",csl_type:"chapter",openxml_type:"BookSection",endnote_type:[{name:"BOOK SECTION"},{name:"ELECTRONIC BOOK SECTION"}],zotero_type:"BOOKSECTION",mendeley_type:"BOOK_SECTION",refworks_type:"Book, Section",ris_type:[{name:"CHAP",default:!0},{name:"CHAPTER"},{name:"ECHAP"},{name:"SER"},{name:"EDBOOK"}],citavi_type:"Contribution",field_labels:{editor:"Book editors",author:"Chapter authors",title:"Chapter title",pages:"Chapter pages"},field_ris:{isbn:"SN",booktitle:"T2",series:"T3",pages:"SP",series_editor:"A3",editor:"A2",original_title:"OP",num_volumes:"IS",translator:"A4"},field_ris_additional:{ED:"editor",SE:"series",NV:"num_volumes",BT:"booktitle"},field_mendeley:{booktitle:"source"},field_endnote:{chapter:"%&",journal:null},field_zotero:{},field_help:{title:"Title of the chapter."+this.getTitleHelp(),booktitle:"Title of the book."+this.getTitleHelp(),editor:"The book editor(s)"+this.getAuthorHelp(),author:"Te chapter author(s)"+this.getAuthorHelp(),pages:"<p>The range or starting page, e.g. <p>'210-213' or '210'</p>"},mandatory_fields:["booktitle","editor","title",["pages"],"author","abstract","published",["publisher","address"],["series","volume"],"isbn"],excluded_fields:m.Array.merge(e.patent,e.misc,e.legal,e.journal,e.arxiv,e.thesis,["howpublished","institution","number","version","num_pages","filed","socialmedia_handle"]),subtypes:[{name:"Monograph"},{name:"Textbook"},{name:"Dictionary"},{name:"Classical Work"},{name:"Ancient Text"},{name:"Fiction"},{name:"Electronic Book"},{name:"Appendix"}]},{id:"PP_ENCYCLOPEDIA_ARTICLE",name:"Encyclopedia Article",label:"Encyclopedia Article",description:"An article in an encyclopedia",bibtex_types:["INBOOK"],biblatex_type:"INREFERENCE",csl_type:"entry-encyclopedia",openxml_type:"Misc",endnote_type:"ENCYCLOPEDIA",zotero_type:"ENCYCLOPEDIAARTICLE",mendeley_type:"ENCYCLOPEDIA_ARTICLE",ris_type:[{name:"ENCYC",default:!0}],field_labels:{booktitle:"Encyclopedia title"},field_ris:{isbn:"SN",booktitle:"T2",pages:"SP",editor:"A2",original_title:"OP",translator:"A4"},field_ris_additional:{ED:"editor",NV:"num_volumes",BT:"booktitle"},field_mendeley:{booktitle:"source"},field_endnote:{},field_zotero:{booktitle:"encyclopediatitle"},field_help:{title:"Title of the article."+this.getTitleHelp(),booktitle:"Title of the encyclopedia."+this.getTitleHelp()},mandatory_fields:["title","booktitle",["pages"],"author","abstract","published",["publisher","address"]],excluded_fields:m.Array.merge(e.pubmed,e.patent,e.series,e.misc,e.legal,e.journal,e.arxiv,e.thesis,["howpublished","institution","number","version","num_pages","filed","medium","socialmedia_handle"]),subtypes:[]},{id:"PP_ARTICLE",name:"Journal Article",label:"Journal Article",description:"Article in a scholarly journal",field_help:{title:"Title of the article"+this.getTitleHelp(),series:"The series the article was published in ('Recent Advances in Medical Genetics')",series_number:"Number of the series the article was published in"},subtypes:[{name:"Research Article"},{name:"Review"},{name:"Editorial"},{name:"Commentary"},{name:"Letter to the Editor"},{name:"Opinion"},{name:"News"},{name:"Erratum"},{name:"Retracted"}],labelFn:function(e){return e.kind?"Research Article"===e.kind?"Journal Article":e.kind:"Journal Article"},bibtex_types:["ARTICLE"],biblatex_type:"ARTICLE",mendeley_type:"JOURNAL",zotero_type:"JOURNALARTICLE",endnote_type:[{name:"JOURNAL ARTICLE"},{name:"ELECTRONIC ARTICLE"}],refworks_type:[{name:"Journal Article"},{name:"Journal, Electronic"}],csl_type:[{name:"article-journal",default:!0}],openxml_type:"JournalArticle",ris_type:[{name:"JOUR",default:!0},{name:"ABST"},{name:"EJOUR"},{name:"JFULL"}],citavi_type:"JournalArticle",field_ris:{issn:"SN",pages:"SP",pmc:"C2",author:"AU",journal:"T2",original_title:"OP",translator:"A4"},field_ris_additional:{JF:"journalfull",JO:"journal",JA:"journal"},field_endnote:{issn:"%@"},field_zotero:{},mandatory_fields:["title","author",["journal:2","published"],"abstract",["volume","issue","pages"],"url",["doi:2","pmid"]],excluded_fields:m.Array.merge(e.conference,e.patent,e.misc,e.legal,e.isbn,e.book,e.thesis,["edition","howpublished","institution","version","num_pages","num_volumes","filed","number","medium","socialmedia_handle"])},{id:"PP_NEWS_ARTICLE",name:"News Article",label:"News Article",description:"Article in a newspaper, magazine, or other periodical",bibtex_types:["ARTICLE"],biblatex_types:"ARTICLE",zotero_type:[{subtype:"Newspaper Article",name:"NEWSPAPERARTICLE"},{subtype:"Magazine Article",name:"MAGAZINEARTICLE"}],endnote_type:[{subtype:"Newspaper Article",name:"NEWSPAPER ARTICLE"},{subtype:"Magazine Article",name:"MAGAZINE ARTICLE"}],mendeley_type:[{subtype:"Newspaper Article",name:"NEWSPAPER_ARTICLE"},{subtype:"Magazine Article",name:"MAGAZINE_ARTICLE"}],refworks_type:[{subtype:"Magazine Article",name:"Magazine Article"},{subtype:"Newspaper Article",name:"Newspaper Article"}],csl_type:[{subtype:"Newspaper Article",name:"article-newspaper",default:!0},{subtype:"Magazine Article",name:"article-magazine"}],openxml_type:"ArticleInAPeriodical",ris_type:[{subtype:"Newspaper Article",name:"NEWS",default:!0},{subtype:"Magazine Article",name:"MGZN"}],citavi_type:[{name:"NewspaperArticle",subtype:"Newspaper Article"},{name:"NewsAgencyReport",subtype:"Newspaper Article"},{name:"PressRelease"}],ris:{input:{},output:{}},field_ris:{pages:"SP",issue:"C2",issn:"SN"},field_ris_additional:{JF:"journalfull",JO:"journal",JA:"journal",M1:"issue"},field_endnote:{journal:"%B"},field_zotero:{},field_help:{title:"Title of the article"+this.getTitleHelp(),journal:"Title of the magazine or newspaper in its standardized abbreviation if available",journalfull:"Full title of the magazine or newspaper",edition:"The edition of the magazine or newspaper<p>'European edition'</p>"},subtypes:[{name:"Newspaper Article"},{name:"Magazine Article"}],mandatory_fields:["title","author","abstract","journal","pages","volume","issue","edition","published"],excluded_fields:m.Array.merge(e.conference,e.patent,e.misc,e.legal,e.pubmed,e.arxiv,e.math,e.isbn,e.book,e.series,e.thesis,["associated_doi","howpublished","institution","version","number","contributor","filed","status","medium","socialmedia_handle"])},{id:"PP_CONFERENCE_PAPER",name:"Conference Paper",label:"Conference Paper",description:"Paper published in the proceedings of a conference",bibtex_types:["INPROCEEDINGS","CONFERENCE"],biblatex_type:"INPROCEEDINGS",csl_type:"paper-conference",openxml_type:"ConferenceProceedings",refworks_type:"Conference Proceedings",mendeley_type:"CONFERENCE_PROCEEDINGS",endnote_type:"CONFERENCE PAPER",zotero_type:"CONFERENCEPAPER",ris_type:"CPAPER",field_labels:{booktitle:"Proceedings title"},field_ris:{booktitle:"T2",series:"J2",address:"C1",pages:"SP",editor:"A2"},field_ris_additional:{},field_endnote:{conference:"%B",conference_location:"%C",conference_date:"%8",number:"%N"},field_zotero:{booktitle:"proceedingstitle"},field_mendeley:{booktitle:"source"},field_help:{title:"Title of the paper."+this.getTitleHelp(),booktitle:"Title of the conference proceedings",series:"Conference proceedings series"},mandatory_fields:["title","booktitle","author","editor","pages","published",["institution","series"],["publisher","address"],"abstract","conference","conference_location","conference_date"],excluded_fields:m.Array.merge(e.patent,e.misc,e.legal,e.arxiv,e.journal,e.thesis,["chapter","edition","howpublished","version","filed","num_pages","num_volumes","medium","socialmedia_handle"])},{id:"PP_THESIS",name:"Thesis",label:"Thesis",description:"Thesis for a Ph.D. or other degree",subtypes:[{name:"Ph.D. Thesis",default:!0},{name:"Masters Thesis"},{name:"Bachelor's Thesis"},{name:"Undergraduate Thesis"},{name:"Habilitation"}],labelFn:function(e){return e.kind?e.kind:"Thesis"},bibtex_types:["MASTERSTHESIS","PHDTHESIS"],biblatex_type:[{name:"THESIS",default:!0},{name:"PHDTHESIS",subtype:"Ph.D. Thesis"},{name:"MASTERSTHESIS",subtype:"Masters Thesis"}],csl_type:"thesis",openxml_type:"Report",endnote_type:"THESIS",mendeley_type:"THESIS",zotero_type:"THESIS",citavi_type:"Thesis",refworks_type:[{name:"Dissertation"},{name:"Thesis"},{name:"Thesis, Unpublished"},{name:"Dissertation/Thesis"}],ris_type:[{name:"THES",default:!0},{name:"PHDT",subtype:"Ph.D. Thesis",output:!1},{name:"MAST",subtype:"Masters Thesis",output:!1}],field_labels:{genre:"Degree",editor:"Advisor"},field_ris:{editor:"A3",kind:"M3",school:"PB",address:"CY",genre:"VL",department:"T2"},field_ris_additional:{},field_endnote:{department:"%B",num_pages:"%P",school:"%I",genre:"%V",editor:"%Y"},field_mendeley:{school:"institution"},field_zotero:{},field_help:{editor:"The advisor(s) of the thesis "+this.getAuthorHelp(),genre:"Awarded degree (e.g. BSc, MSc, Phd)",title:"Title of the thesis."+this.getTitleHelp(),num_pages:"The total number of pages of the thesis"},mandatory_fields:["title","author","editor","school","department","genre","published"],excluded_fields:m.Array.merge(e.conference,e.patent,e.misc,e.math,e.legal,e.issn,e.pubmed,e.arxiv,e.series,e.journal,e.book,e.volume,["associated_doi","number","edition","howpublished","institution","version","filed","pages","medium","socialmedia_handle","translator"])},{id:"PP_PREPRINT",name:"Preprint Manuscript",label:"Preprint Manuscript",description:"Preprint version of a manuscript or working paper",bibtex_types:["UNPUBLISHED","MISC","ARTICLE"],biblatex_type:"UNPUBLISHED",zotero_type:"PREPRINT",csl_type:"manuscript",openxml_type:"Misc",mendeley_type:"WORKING_PAPER",endnote_type:"UNPUBLISHED WORK",ris_type:[{name:"INPR",default:!0}],citavi_type:"Manuscript",field_ris:{eprint:"SN",archivePrefix:"DP",translator:"A4"},field_endnote:{institution:["%I","%S"]},field_labels:{journal:"Source"},field_help:{title:"Title of the manuscript"+this.getTitleHelp(),num_pages:"The total number of pages of the manuscript",journal:"Database or archive where the preprint manuscript was deposited",series:"The series the working paper was published in <br>'Working Paper Series'",number:"Number of the working paper"},mandatory_fields:["title","author","journal","institution","series","number","published","url"],excluded_fields:m.Array.merge(e.patent,e.misc,e.legal,e.book,e.volume,e.publisher,e.thesis,e.math,e.issn,e.isbn,["series_number","series_editor","edition","version","filed","originally_published","lccn","journalfull","medium","socialmedia_handle","pmid"])},{id:"PP_MANUSCRIPT",label:"Archival Material",name:"Archival Material",description:"Documents stored in an archive",bibtex_types:["MISC"],biblatex_type:"UNPUBLISHED",csl_type:"manuscript",openxml_type:"Misc",endnote_type:"MANUSCRIPT",zotero_type:"MANUSCRIPT",ris_type:[{name:"MANSCPT",default:!0}],citavi_type:"ArchiveMaterial",refworks_type:"Unpublished Material",field_labels:{series:"Collection",series_editor:"Editor of the collection",series_number:"Collection number"},field_ris:{eprint:"SN",archivePrefix:"DP",translator:"A4",howpublished:"T2"},field_mendeley:{howpublished:"source"},field_endnote:{series:"%B",series_number:"%N",original_title:"%(",archive:"%I",publisher:null},field_zotero:{howpublished:"journalabbreviation"},field_csl:{howpublished:"container-title"},field_help:{title:"Title of the manuscript"+this.getTitleHelp(),series:"Name of the collection<p>'William H. Sager China Marines Photograph Collection'</p>",series_number:"Number of the collection",series_editor:"Collection editor(s)"+this.getAuthorHelp()},mandatory_fields:["title","author","series","archive","archive_location","archive_place","url","published"],excluded_fields:m.Array.merge(e.patent,e.misc,e.legal,e.book,e.journal,e.thesis,e.issn,e.pubmed,e.arxiv,e.math,e.conference,["institution","number","edition","version","filed","medium","socialmedia_handle"])},{id:"PP_REPORT",name:"Report",label:"Report",description:"Report published by a university or organization",bibtex_types:["TECHREPORT"],biblatex_type:"REPORT",subtypes:[{name:"Technical Report"},{name:"Government Report"},{name:"White Paper"},{name:"Guideline"}],csl_type:"report",openxml_type:"Report",mendeley_type:"REPORT",zotero_type:"REPORT",endnote_type:[{name:"REPORT"},{name:"GOVERNMENT DOCUMENT",subtype:"Government Report"}],ris_type:[{name:"RPRT",default:!0},{name:"GOVDOC",subtype:"Government Report"}],citavi_type:[{name:"Report"},{name:"UnpublishedWork"}],refworks_type:"Report",field_ris:{publisher:"A3",issue:"C6",kind:"M3",institution:"PB",number:"SN",num_pages:"SP",series:"T2",series_editor:"A2"},field_endnote:{number:"%@",institution:["%I","%1","%?","%E"],series_editor:"%E",publisher:"%Y",series:"%B",translator:null,editor:null,series_editor:null,series_volume:"%6"},field_zotero:{number:"reportnumber",series:"seriestitle"},field_mendeley:{number:"revision"},field_ris_additional:{},field_help:{title:"Title of the report."+this.getTitleHelp(),series:"The series the report was published in ('Recent Advances in Medical Genetics')",series_number:"Number of the series the report was published in",conference:"Event where the report was presented",conference_location:"Location where the event was held",conference_date:"Date of the event",pages:"<p>The range or starting page, e.g. <p>'210-213' or '210'</p>"},field_labels:{pages:"Pages cited",conference:"Event name",conference_location:"Event place",conference_date:"Date of the event"},mandatory_fields:["title","author",["number","institution"],"published","num_pages"],excluded_fields:m.Array.merge(e.patent,e.misc,e.legal,e.book,e.journal,e.pubmed,e.math,e.arxiv,e.thesis,["associated_doi","howpublished","version","num_volumes","filed","medium","socialmedia_handle"])},{id:"PP_STANDARD",name:"Standard",label:"Standard",description:"A standard issued by ISO, ANSI,\u2026",bibtex_types:["TECHREPORT"],biblatex_type:"STANDARD",subtypes:[],csl_type:"report",openxml_type:"Report",ris_type:[{name:"STAND",default:!0}],endnote_type:"STANDARD",citavi_type:"Standard",field_ris:{number:"SN",num_pages:"SP"},field_endnote:{number:["%V","%S","%@"],genre:"%B"},field_zotero:{},field_help:{title:"Title of the standard."+this.getTitleHelp(),author:"The name of the issuing agency in braces <p>'{International Organization for Standardization}'</p>",pages:"<p>The range or starting page, e.g. <p>'210-213' or '210'</p>"},field_labels:{pages:"Pages cited",author:"Issuing Agency"},mandatory_fields:["title","author","number","published","num_pages","publisher","address"],excluded_fields:m.Array.merge(e.conference,e.patent,e.misc,e.legal,e.pubmed,e.arxiv,e.series,e.volume,e.journal,e.book,e.thesis,e.isbn,e.issn,e.math,e.archive,["associated_doi","howpublished","version","filed","affiliation","editor","contributor","institution","lccn","medium","socialmedia_handle"])},{id:"PP_PATENT",name:"Patent",label:"Patent",description:"Published patent",bibtex_types:["PATENT"],biblatex_type:"PATENT",csl_type:"patent",openxml_type:"Patent",mendeley_type:"PATENT",endnote_type:"PATENT",zotero_type:"PATENT",ris_type:"PAT",citavi_type:"Patent",refworks_type:"Patent",subtypes:[{name:"Patent Application"},{name:"Utility Patent"},{name:"Design Patent"},{name:"Plant Patent"},{name:"Reissue Patent"},{name:"Defensive Publication"},{name:"Statutory Invention Registration"}],field_labels:{title:"Patent title",author:"Inventors",journal:"Type of patent",journalfull:"Issuing office full name"},field_ris:{patent_publication_type:"M3",assignee:"PB",states:"C3",class:"NV",international_class:"ET",issuing_authority:"A2"},field_endnote:{patent_number:"%@",assignee:"%I",international_class:"%7",states:"%3",priority_numbers:"%(",class:"%6",application_number:"%N",issuing_authority:"%E",filed:"%2",genre:"%9"},field_zotero:{published:"issuedate"},field_mendeley:{patent_number:"revision",issuing_authority:"publisher"},field_help:{title:"Title of the patent."+this.getTitleHelp(),journal:"Type of patent (e.g. US Patent, International Patent)",journalfull:"The full name of the authority / office issuing the patent (e.g., 'United States Patent and Trademark Office')",author:"The inventor(s)"+this.getAuthorHelp()},mandatory_fields:["title","author","assignee","issuing_authority","patent_number","filed","published","abstract"],excluded_fields:m.Array.merge(e.conference,e.misc,e.legal,e.book,e.series,e.volume,e.pages,e.arxiv,e.pubmed,e.math,e.thesis,e.isbn,e.archive,["associated_doi","number","issue","edition","howpublished","publisher","original_publisher","version","editor","lccn","medium","socialmedia_handle"])},{id:"PP_UNPUBLISHED",name:"Unpublished Item",label:"Unpublished",description:"Work that has not been formally published",bibtex_types:["UNPUBLISHED"],biblatex_type:"UNPUBLISHED",csl_type:"article",openxml_type:"Misc",ris_type:"UNPB",field_labels:{published:"Date",conference:"Event name",conference_location:"Event place",conference_date:"Date of the event"},field_ris:{},field_ris_additional:{},field_endnote:{},field_zotero:{},field_help:{title:"Title of the document."+this.getTitleHelp(),conference:"Event where the interview was conducted",conference_location:"Location where the event was held",conference_date:"Date of the event"+this.getDateHelp(),published:"Date when the document was created"+this.getDateHelp()},mandatory_fields:["title","author","published"],excluded_fields:m.Array.merge(e.patent,e.misc,e.legal,e.isbn,e.issn,e.pubmed,e.book,e.journal,e.arxiv,e.publisher,e.series,e.volume,e.thesis,e.math,["associated_doi","doi","edition","pages","howpublished","institution","version","num_pages","editor","originally_published","lccn","filed","medium","socialmedia_handle"])},{id:"PP_LETTER",name:"Letter",label:"Letter",description:"A letter with sender and recipient",bibtex_types:["MISC"],biblatex_type:"LETTER",csl_type:"personal_communication",openxml_type:"Misc",zotero_type:[{name:"LETTER"}],subtypes:[],field_ris:{pages:"SP"},field_ris_additional:{},field_endnote:{},field_zotero:{},field_labels:{author:"Sender",published:"Date",editor:"Recipient",series:"Collection",series_number:"Collection number",series_editor:"Collection editor"},field_csl:{editor:"recipient"},field_help:{series:"Name of the collection<p>'William H. Sager China Marines Photograph Collection'</p>",series_number:"Number of the collection",series_editor:"The collection editor(s)"+this.getAuthorHelp(),editor:"The recipient(s)"+this.getAuthorHelp(),author:"The sender(s)"+this.getAuthorHelp(),published:"Date when the letter was written"+this.getDateHelp()},mandatory_fields:["author","published","editor","abstract","series","archive","archive_location","archive_place","url"],excluded_fields:m.Array.merge(e.patent,e.misc,e.legal,e.journal,e.pubmed,e.math,e.arxiv,e.thesis,e.issn,e.isbn,e.book,["edition","pages","howpublished","institution","version","contributor","status","filed","medium","socialmedia_handle"])},{id:"PP_INTERVIEW",name:"Interview",label:"Interview",description:"A published or personal interview",bibtex_types:["MISC"],biblatex_type:"MISC",csl_type:"interview",openxml_type:"Interview",zotero_type:[{name:"INTERVIEW"}],ris_type:[{name:"INTV",default:!0}],endnote_type:[{name:"INTERVIEW"}],citavi_type:"InterviewMaterial",subtypes:[],field_ris:{pages:"SP",editor:"A2"},field_ris_additional:{},field_zotero:{editor:"interviewer",author:"interviewee"},field_endnote:{journal:"%B",original_title:"%("},field_labels:{author:"Interview with",published:"Date",editor:"Interviewer",conference:"Event name",conference_location:"Event place",conference_date:"Date of the event",journal:"Magazine",genre:"Type"},field_csl:{editor:"interviewer"},field_help:{genre:"Type of interview <p>'Personal Interview', Phone Interview', 'Skype Interview'",published:"Date when the interview was conducted or published",conference:"Event where the interview was conducted",conference_location:"Location where the event was held",conference_date:"Date of the event"+this.getDateHelp(),author:"Name of the person that is interviewed"+this.getAuthorHelp(),editor:"The interviewer(s)"+this.getAuthorHelp(),journal:"Title of the magazine in its standardized abbreviation if available"},mandatory_fields:["author","editor","published","abstract","conference","conference_location","conference_date","genre","url"],excluded_fields:m.Array.merge(e.series,e.patent,e.misc,e.legal,e.pubmed,e.math,e.arxiv,e.thesis,e.issn,e.isbn,e.book,["edition","howpublished","institution","version","contributor","status","filed","medium","socialmedia_handle"])},{id:"PP_PERSONAL_COMMUNICATION",name:"Personal Communication",label:"Personal Communication",description:"Information or data received via personal communication",bibtex_types:["MISC"],biblatex_type:"MISC",csl_type:"personal_communication",openxml_type:"Misc",endnote_type:"PERSONAL COMMUNICATION",zotero_type:[{subtype:"Message",name:"INSTANTMESSAGE"},{subtype:"E-mail",name:"EMAIL"}],ris_type:[{name:"PCOMM",default:!0},{name:"ICOMM"}],citavi_type:"PersonalCommunication",refworks_type:"Personal Communication",subtypes:[{name:"E-mail"},{name:"Letter"},{name:"Conversation"},{name:"Message"}],field_ris:{pages:"SP",editor:"A2"},field_ris_additional:{},field_endnote:{},field_zotero:{},field_labels:{author:"Author or source",published:"Date",editor:"Recipient"},field_csl:{editor:"recipient"},field_help:{conference:"Event where the communication took place",conference_location:"Location where the event was held",conference_date:"Date of the event"+this.getDateHelp(),editor:"The recipient(s)"+this.getAuthorHelp(),author:"The author(s)"+this.getAuthorHelp(),published:"Date when the communication took place"+this.getDateHelp()},mandatory_fields:["author","published","editor","abstract"],excluded_fields:m.Array.merge(e.series,e.patent,e.misc,e.legal,e.journal,e.pubmed,e.math,e.arxiv,e.thesis,e.issn,e.isbn,e.book,["edition","pages","howpublished","institution","version","contributor","status","genre","filed","num_pages","num_volumes","medium","socialmedia_handle"])},{id:"PP_WEBSITE",name:"Website",label:"Website",description:"Website accessed online",bibtex_types:["ONLINE","MISC"],biblatex_type:"ONLINE",csl_type:[{subtype:"Blog post",name:"post-weblog"},{name:"webpage",default:!0}],openxml_type:"InternetSite",mendeley_type:"WEB_PAGE",endnote_type:[{name:"WEB PAGE"},{name:"BLOG",subtype:"Blog post"},{name:"ONLINE DATABASE",subtype:"Database"},{name:"ELECTRONIC SOURCE"}],zotero_type:[{name:"WEBPAGE"},{name:"BLOGPOST",subtype:"Blog post"},{name:"FORUMPOST",subtype:"Forum post"}],ris_type:[{name:"ELEC",default:!0},{subtype:"Database",name:"DBASE"},{subtype:"Blog post",name:"BLOG"},{subtype:"Wikipedia",name:"ENCYC"},{name:"WEB"},{name:"WEBP"},{name:"MULTI"}],citavi_type:"InternetDocument",refworks_type:[{name:"Web Page"},{name:"Online Discussion Forum"},{name:"Online Discussion Forum/Blogs"}],field_labels:{booktitle:"Website name"},subtypes:[{name:"Article"},{name:"Database"},{name:"Blog post"},{name:"Forum post"},{name:"Wikipedia"},{name:"Tweet"}],field_ris:{isbn:"SN",accessed:"M1"},field_ris_additional:{},field_endnote:{accessed:["%V","%N"],affiliation:["%1","%+"]},field_mendeley:{booktitle:"source"},field_zotero:{booktitle:"websitetitle"},field_zotero_additional:{blogtitle:"booktitle",forumtitle:"booktitle"},field_help:{title:"Title of the page."+this.getTitleHelp(),booktitle:"Title of the website."},mandatory_fields:["title","booktitle","url","author","accessed","published"],excluded_fields:m.Array.merge(e.archive,e.conference,e.patent,e.misc,e.legal,e.journal,e.pages,e.volume,e.arxiv,e.issn,e.pubmed,e.math,e.thesis,e.series,e.isbn,["chapter","number","edition","howpublished","institution","version","editor","filed","lccn","status","medium"])},{id:"PP_COMPUTER_PROGRAM",name:"Computer Program",label:"Computer Program",description:"Software run on a computer",subtypes:[{name:"Scientific software"},{name:"Statistics software"},{name:"Graphics software"},{name:"Business software"},{name:"System software"},{name:"Programming language"},{name:"Database"},{name:"Script"},{name:"Utility"},{name:"Video game"}],bibtex_types:["MISC"],biblatex_type:"SOFTWARE",csl_type:"book",openxml_type:"Misc",endnote_type:"COMPUTER PROGRAM",mendeley_type:"COMPUTER_PROGRAM",zotero_type:"COMPUTERPROGRAM",ris_type:[{name:"COMP",default:!0},{subtype:"Database",name:"DBASE"}],citavi_type:[{name:"Software"},{name:"ComputerProgram"}],refworks_type:"Computer Program",field_ris:{version:"ET"},field_ris_additional:{},field_mendeley:{version:"revision"},field_endnote:{version:"%V"},field_zotero:{series:"seriestitle",medium:"system",publisher:"company"},field_zotero_additional:{versionnumber:"version"},field_help:{title:"Name of the program"+this.getTitleHelp(),medium:"Operating system (OS X, Android, ...)"},field_labels:{medium:"System"},mandatory_fields:["title","author","version","medium","published","url"],excluded_fields:m.Array.merge(e.patent,e.legal,e.journal,e.book,e.pages,e.volume,e.series,e.thesis,e.arxiv,e.isbn,e.issn,e.pubmed,e.conference,e.math,e.archive,["number","edition","howpublished","editor","filed","lccn","running_time","scale","ismn","socialmedia_handle"])},{id:"PP_MANUAL",name:"Manual or Documentation",label:"Manual or Documentation",description:"Instruction manual or other type of documentation",bibtex_types:["MANUAL"],biblatex_type:"MANUAL",csl_type:"report",openxml_type:"Misc",ris_type:"MANU",field_ris:{number:"IS",num_pages:"SP"},field_ris_additional:{},field_help:{title:"Title of the document"+this.getTitleHelp(),version:"Version of the product this manual is about",institution:"The organization or institution that publishes the manual"},mandatory_fields:["title","version","author","institution","published","url"],excluded_fields:m.Array.merge(e.conference,e.patent,e.misc,e.legal,e.issn,e.book,e.journal,e.series,e.thesis,e.volume,e.arxiv,e.pubmed,e.math,e.archive,["howpublished","filed","lccn","medium","socialmedia_handle"])},{id:"PP_DATASET",name:"Dataset",label:"Dataset",description:"A dataset with its own DOI or webpage",bibtex_types:["MISC"],biblatex_type:"DATASET",csl_type:"dataset",openxml_type:"Misc",ris_type:"DATA",endnote_type:[{name:"AGGREGATED DATABASE"},{name:"DATASET",default:!0}],mandatory_fields:["title","author","url","doi",["published","accessed"],"booktitle","associated_doi"],field_help:{title:"Title of the dataset"+this.getTitleHelp(),booktitle:"The title of the publication associated with this dataset",associated_doi:"The DOI of the publication with which this dataset is associated",url:"A list of URLs where this item can be accessed online (one per line)",author:"The dataset author(s)"+this.getAuthorHelp(),doi:"A generic identifier for digital objects. Some datasets have a unique DOI assigned on publication."},field_labels:{title:"Dataset name",author:"Dataset author(s)",doi:"Dataset DOI",url:"Dataset URL",booktitle:"Publication title",associated_doi:"Publication DOI"},field_ris:{},field_ris_additional:{},field_endnote:{version:"%7"},field_zotero:{},excluded_fields:m.Array.merge(e.patent,e.misc,e.legal,e.journal,e.pages,e.conference,e.issn,e.isbn,e.volume,e.thesis,e.series,e.pubmed,e.arxiv,e.math,["chapter","number","howpublished","institution","filed","lccn","medium","socialmedia_handle"])},{id:"PP_PRESENTATION",name:"Presentation",label:"Presentation",description:"Talk or other presentation",bibtex_types:["MISC"],biblatex_type:"MISC",csl_type:"speech",openxml_type:"Misc",zotero_type:"PRESENTATION",ris_type:[{name:"SLIDE",default:!0}],citavi_type:[{name:"Lecture",subtype:"Lecture"}],field_labels:{author:"Presenter",published:"Date",conference:"Event name",conference_location:"Event place",conference_date:"Date of the event",series:"Module"},field_ris:{},field_ris_additional:{A2:"editor",T2:"conference",CY:"conference_location"},field_endnote:{},field_zotero:{},field_csl:{journal:"event"},field_help:{title:"Title of the presentation"+this.getTitleHelp(),conference:"Event where the presentation took place",conference_location:"Location where the event was held",conference_date:"Date when the event took place",author:"The presenter(s)"+this.getAuthorHelp(),published:"Date when the presentation was held"+this.getDateHelp()},mandatory_fields:["title","author","conference","conference_location","published","abstract","url"],excluded_fields:m.Array.merge(e.archive,e.patent,e.misc,e.legal,e.issn,e.isbn,e.math,e.pubmed,e.arxiv,e.volume,e.book,e.thesis,["number","num_pages","version","journal","journalfull","volume","issue","edition","pages","institution","editor","howpublished","filed","series_number","series_editor","medium","socialmedia_handle"]),subtypes:[{name:"Conference talk"},{name:"Seminar"},{name:"Lecture"},{name:"Reading"},{name:"Poster presentation"},{name:"Workshop"}]},{id:"PP_MISC",name:"Miscellaneous",label:"Miscellaneous",description:"Miscellaneous reference or resource",bibtex_types:["MISC"],biblatex_type:"MISC",csl_type:"article",openxml_type:"Misc",ris_type:"MISC",citavi_type:[{name:"Unknown"},{name:"LegalCommentary"},{name:"File"},{name:"ContributionInLegalCommentary"}],refworks_type:[{name:"Hearing"},{name:"Generic"},{name:"Abstract"}],mandatory_fields:["title","author","howpublished","url","published"],excluded_fields:m.Array.merge(e.patent,e.legal,["filed","socialmedia_handle"]),field_ris:{pages:"SP"},field_ris_additional:{JF:"journalfull",JO:"journal"},field_endnote:{},field_zotero:{},field_help:{title:"Title of the item"}},{id:"PP_BROADCAST",name:"Broadcast",label:"Broadcast",description:"Radio or TV broadcast",bibtex_types:["MISC"],biblatex_type:"MISC",mendeley_type:[{name:"TELEVISION_BROADCAST",subtype:"TV broadcast"}],csl_type:"broadcast",openxml_type:"Misc",zotero_type:[{subtype:"TV broadcast",name:"TVBROADCAST"},{subtype:"Radio broadcast",name:"RADIOBROADCAST"}],ris_type:[{name:"MPCT",import:!1,default:!0}],citavi_type:[{name:"RadioPlay"},{name:"Broadcast"}],mandatory_fields:["title","booktitle","author","publisher","address","number","url","published","medium","running_time"],excluded_fields:m.Array.merge(e.arxiv,e.pages,e.patent,e.legal,e.journal,e.pubmed,e.math,e.arxivid,e.issn,e.isbn,e.thesis,["filed","institution","socialmedia_handle","scale","howpublished","version","ismn","associated_doi","chapter","lccn"]),csl_excluded_fields:["editor","series_editor"],subtypes:[{name:"TV broadcast"},{name:"Radio broadcast"}],field_labels:{booktitle:"Program Title",publisher:"Network",number:"Episode Number",author:"Directors",editor:"Cast members",series_editor:"Producers",published:"Broadcast date",conference:"Event name",conference_location:"Event place",conference_date:"Date of the event",medium:"Format"},field_ris:{editor:"C1",series_editor:"A3",running_time:"SP",medium:"M3",booktitle:"T2"},field_endnote:{},field_zotero:{booktitle:"programtitle",number:"episodenumber",publisher:"network",medium:"videorecordingformat"},field_ris_additional:{},field_zotero_additional:{audiorecordingformat:"medium"},field_help:{title:"Title of the broadcast"+this.getTitleHelp(),publisher:"The network's name <p>'BBC' or 'HBO'</p>",booktitle:"Title of the program",number:"Number of the current episode",author:"The director(s)"+this.getAuthorHelp(),editor:"The cast member(s) or reporter(s)"+this.getAuthorHelp(),series_editor:"The producer(s)"+this.getAuthorHelp(),medium:"e.g. 'Radio broadcast' or 'TV broadcast'",address:"Address of the network",conference:"Event where the broadcast was recorded",conference_location:"Location where the event was held",conference_date:"Date of the event",published:"Date when the broadcast was aired"+this.getDateHelp()}},{id:"PP_AUDIO",name:"Audio",label:"Audio",description:"Published audio recording",bibtex_types:["MISC"],biblatex_type:"AUDIO",csl_type:"song",openxml_type:"SoundRecording",zotero_type:[{subtype:"Podcast",name:"PODCAST"},{subtype:"Audio recording",name:"AUDIORECORDING"}],ris_type:[{name:"SOUND",default:!0},{name:"MUSIC"}],citavi_type:[{name:"MusicAlbum"},{name:"MusicTrack",subtype:"Song"},{name:"AudioBook"},{name:"AudioOrVideoDocument"}],refworks_type:"Sound Recording",mandatory_fields:["title","author","publisher","url","published","medium","running_time"],excluded_fields:m.Array.merge(e.pages,e.patent,e.legal,e.journal,e.isbn,e.issn,e.pubmed,e.arxiv,e.math,e.thesis,["chapter","filed","scale","institution","ismn","howpublished","associated_doi","socialmedia_handle"]),csl_excluded_fields:["series_editor"],subtypes:[{name:"Song"},{name:"Concert"},{name:"Podcast"}],field_labels:{publisher:"Label or publisher",author:"Performers",editor:"Composers",series_editor:"Producers",number:"Episode Number",published:"Date released",conference:"Event name",conference_location:"Event place",conference_date:"Date of the event",booktitle:"Album name"},field_shortlabels:{published:"Released"},field_ris:{editor:"C1",series_editor:"A3",running_time:"SP",medium:"M3"},field_ris_additional:{C5:"medium",A2:"author",AU:"editor"},field_endnote:{},field_zotero:{medium:"audiorecordingformat",publisher:"label",series:"seriestitle"},field_csl:{editor:"composer"},field_help:{publisher:"The name of the label <p>'Universal Music Group' or 'Warner Music Group'</p>",number:"Number of the episode",author:"The performer(s), the band, or the podcaster(s)"+this.getAuthorHelp(),editor:"The composer(s)"+this.getAuthorHelp(),series_editor:"The producer(s)"+this.getAuthorHelp(),booktitle:"Name of the album",conference:"Event where the item was recorded",conference_location:"Location where the event was held",conference_date:"Date of the event",published:"Date when the item was released"+this.getDateHelp()}},{id:"PP_VIDEO",name:"Video or Film",label:"Video or Film",description:"Published video recording or film",bibtex_types:["MISC"],biblatex_type:"VIDEO",mendeley_type:"FILM",endnote_type:[{name:"ONLINE MULTIMEDIA"},{name:"AUDIOVISUAL MATERIAL"},{name:"FILM OR BROADCAST"}],csl_type:[{subtype:"Online Video",name:"webpage"},{name:"motion_picture",default:!0}],openxml_type:"Film",zotero_type:[{subtype:"Film",name:"FILM"},{subtype:"Video",name:"VIDEORECORDING"}],ris_type:[{name:"VIDEO",default:!0},{name:"ADVS"},{name:"MPCT"}],citavi_type:[{name:"Movie"}],refworks_type:[{name:"Motion Picture"},{name:"Video"},{name:"DVD"},{name:"Video/DVD"}],mandatory_fields:["title","author","publisher","address","url","published","medium","running_time"],excluded_fields:m.Array.merge(e.pages,e.patent,e.journal,e.legal,e.math,e.pubmed,e.isbn,e.issn,e.arxiv,e.book,e.thesis,["scale","institution","ismn","howpublished","filed","associated_doi"]),csl_excluded_fields:["editor","series_editor"],subtypes:[{name:"Video"},{name:"Online Video"},{name:"Film"},{name:"TV Series"}],field_labels:{publisher:"Studio or distributor",author:"Directors",editor:"Cast members",series_editor:"Producers",published:"Date released",conference:"Event name",conference_location:"Event place",conference_date:"Date of the event",address:"Country"},field_shortlabels:{published:"Released"},field_ris:{editor:"C1",series_editor:"A3",running_time:"SP",medium:"M3",genre:"C4",series:"T2"},field_endnote:{number:"%N",running_time:["%3","%P"],genre:"%4",series:"%B",editor:"%?"},field_zotero:{publisher:"studio",medium:"videorecordingformat",series:"seriestitle"},field_ris_additional:{A2:"editor"},field_csl:{contributor:"contributor"},field_help:{title:"Title of film or video",publisher:"The name of the studio or distributor<p>'Walt Disney Pictures', '20th Century Fox', 'YouTube'</p>",author:"The director(s)"+this.getAuthorHelp(),editor:"The cast member(s)"+this.getAuthorHelp(),series_editor:"The producer(s)"+this.getAuthorHelp(),conference:"Event where the item was recorded",conference_location:"Location where the event was held",conference_date:"Date of the event",published:"Date when the item was released"+this.getDateHelp(),address:"Country where the movie or film was produced"}},{id:"PP_CASE",name:"Case",label:"Case",description:"Legal case",bibtex_types:["MISC"],biblatex_type:"JURISDICTION",csl_type:"legal_case",openxml_type:"Case",mendeley_type:"CASE",endnote_type:"CASE",zotero_type:"CASE",ris_type:"CASE",citavi_type:"CourtDecision",refworks_type:[{name:"Case"},{name:"Court Decisions"},{name:"Case/Court Decisions"}],mandatory_fields:["title","journal","court","volume","pages","jurisdiction","url","published","number"],excluded_fields:m.Array.merge(e.conference,e.patent,e.misc,e.math,e.thesis,e.archive,e.pubmed,e.arxiv,["issue","isbn","isbn_alt","issn","issn_alt","eprint","num_pages","conference","institution","chapter","session","legislative_body","status","series","num_volumes","booktitle","author","address","publisher","original_publisher","howpublished","original_address","originally_published","version","editor","series_editor","medium","socialmedia_handle"]),subtypes:[],field_labels:{journal:"Reporter",journalfull:"Full reporter name",title:"Case name",volume:"Reporter volume",pages:"First page",filed:"Filing date",series_number:"Year as volume",number:"Docket number",published:"Date decided"},field_ris:{journal:"T2",pages:"SP",filed:"SE",history:"OP",court:"PB"},field_zotero:{title:"casename",journal:"reporter",volume:"reportervolume",court:"court",pages:"firstpage",number:"docketnumber"},field_endnote:{journal:"%B",history:"%(",number:"%N",court:"%I",filed:"%&",edition:null,kind:null,translator:null,original_title:null,contributor:null},field_mendeley:{journal:"authors"},field_ris_additional:{},field_csl:{},field_help:{title:"Case name",journal:"Abbreviation of the reporter (publication containing the opinions of a particular court or jurisdiction)",journalfull:"The reporter fully spelled out",volume:"Volume number",pages:"First page of the case in the given volume",series_number:"The year used as volume number",number:"Docket number",filed:"Date when the case was filed"+this.getDateHelp(),published:"Date of decision"+this.getDateHelp()}},{id:"PP_STATUTE",name:"Statute",label:"Statute",description:"Statute",bibtex_types:["MISC"],biblatex_type:"LEGAL",csl_type:"legislation",openxml_type:"Misc",mendeley_type:"STATUTE",endnote_type:"STATUTE",zotero_type:"STATUTE",ris_type:"STAT",citavi_type:"StatuteOrRegulation",refworks_type:[{name:"Statutes"},{name:"Laws"},{name:"Laws/Statutes"}],mandatory_fields:["title","journal","volume","pages","section","number","history","jurisdiction","url","published","filed"],excluded_fields:m.Array.merge(e.conference,e.patent,e.misc,e.math,e.thesis,e.archive,e.pubmed,e.arxiv,["issue","isbn","isbn_alt","issn","issn_alt","num_pages","institution","status","series","num_volumes","booktitle","edition","genre","publisher","original_publisher","affiliation","address","original_address","originally_published","author","editor","series_editor","version","howpublished","court","medium","socialmedia_handle"]),subtypes:[],field_labels:{published:"Date enacted",filed:"Date amended",title:"Name of act",volume:"Code number",series_number:"Regnal year",journal:"Code",journalfull:"Full name of the Code",number:"Public Law Number"},field_ris:{number:"M1",history:"OP",section:"SE",pages:"SP",journal:"T2",session:"ET"},field_endnote:{section:"%&",journal:"%B",history:"%(",number:"%N",author:"%?",session:"%7",original_title:null},field_ris_additional:{},field_csl:{filed:"event-date"},field_zotero:{title:"nameofact",volume:"codenumber",journal:"code",number:"publiclawnumber"},field_mendeley:{journal:"code"},field_help:{journal:"The official source for statutes (e.g. U.S.C.)",journalfull:"The official source for statutes (e.g. United States Code)",published:"Date when the statute was enacted"+this.getDateHelp(),filed:"Date when the statute was amended"+this.getDateHelp(),title:"Name of act",volume:"Code number",series_number:"Regnal year",number:"Public Law Number"}},{id:"PP_BILL",name:"Bill",label:"Bill",description:"Bill",bibtex_types:["MISC"],biblatex_type:"LEGISLATION",csl_type:"bill",openxml_type:"Misc",mendeley_type:"BILL",endnote_type:"BILL",zotero_type:"BILL",refworks_type:[{name:"Bills"},{name:"Resolutions"},{name:"Bills/Resolutions"}],ris_type:[{name:"BILL",default:!0},{name:"UNBILL"}],mandatory_fields:["title","author","legislative_body","session","number","section","jurisdiction","url","published"],excluded_fields:m.Array.merge(e.conference,e.patent,e.misc,e.math,e.thesis,e.archive,e.pubmed,e.arxiv,e.series,["issue","isbn","isbn_alt","issn","issn_alt","num_pages","institution","chapter","journalfull","num_volumes","booktitle","edition","genre","publisher","original_publisher","affiliation","address","original_address","howpublished","originally_published","editor","series_editor","version","filed","court","medium","socialmedia_handle"]),subtypes:[],field_labels:{published:"Date",journal:"Code",volume:"Code volume",pages:"Code pages",author:"Sponsor",number:"Bill number"},field_ris:{author:"A2",number:"M1",history:"OP",section:"SE",pages:"SP",journal:"T2",legislative_body:"T3",session:"ET"},field_ris_additional:{},field_endnote:{section:"%&",legislative_body:"%S",journal:"%B",history:"%(",number:"%N",author:"%?",session:"%7",original_title:null},field_zotero:{pages:"codepages",volume:"codevolume",number:"billnumber",journal:"code"},field_help:{journal:"The official source for the bill (e.g. the United States Code or U.S.C.)",published:"Date"+this.getDateHelp(),volume:"Code volume",pages:"Code pages",author:"Sponsor",number:"Bill number"}},{id:"PP_TREATY",name:"Treaty",label:"Treaty",description:"Treaty (International law)",bibtex_types:["MISC"],biblatex_type:"LEGAL",csl_type:"treaty",openxml_type:"Misc",zotero_type:"TREATY",mandatory_fields:["title","author","journal","volume","pages","number","url","published"],excluded_fields:m.Array.merge(e.conference,e.patent,e.misc,e.math,e.thesis,e.archive,e.pubmed,e.arxiv,e.series,["issue","isbn","isbn_alt","issn","issn_alt","num_pages","institution","chapter","status","num_volumes","booktitle","edition","genre","original_publisher","affiliation","address","original_address","originally_published","editor","version","howpublished","jurisdiction","legislative_body","history","session","court","medium","socialmedia_handle"]),subtypes:[],field_labels:{title:"Title of the agreement",author:"Names of the parties",published:"Date in force",filed:"Date signed",journal:"Source",journalfull:"Full name source"},field_ris:{},field_ris_additional:{},field_zotero:{},field_help:{title:"Title of the agreement (e.g. Kyoto Protocol to the United Nations Framework Convention on Climate Change)",author:"Names of the signing parties "+this.getAuthorHelp(),published:"Date in force"+this.getDateHelp(),filed:"Date signed"+this.getDateHelp(),journal:"Name of the source that published the text of the treaty",journalfull:"Full name of the source (e.g. United Nations Treaty Series)"}},{id:"PP_FIGURE",name:"Figure",label:"Figure",description:"Published graph, chart,\u2026",bibtex_types:["MISC"],biblatex_type:"IMAGE",csl_type:"figure",openxml_type:"Misc",endnote_type:[{name:"CHART OR TABLE"},{name:"EQUATION"},{name:"FIGURE"}],ris_type:[{name:"FIGURE",default:!0},{name:"CHART"}],mandatory_fields:["title","author","publisher","url","published","medium","number"],excluded_fields:m.Array.merge(e.legal,e.patent,e.pages,e.volume,e.journal,e.book,e.math,e.thesis,e.isbn,e.arxiv,e.pubmed,e.issn,e.series,["institution","howpublished","status","editor","filed","associated_doi","running_time","scale","ismn","socialmedia_handle"]),subtypes:[{name:"Image"},{name:"Graph"},{name:"Chart"},{name:"Drawing"},{name:"Photography"}],field_labels:{conference:"Event name",conference_location:"Event place",conference_date:"Date of the event",medium:"Format"},field_ris:{version:"ET",number:"M1"},field_ris_additional:{},field_endnote:{version:"%7",abstract:["%X","%P"],archive:"%E",archive_location:"%B",number:"%N",medium:"%V"},field_help:{medium:"e.g. 'Online image'",conference:"Event where the item was presented",conference_location:"Location where the event was held",conference_date:"Date of the event",title:"Figure title"+this.getTitleHelp()}},{id:"PP_ARTWORK",name:"Artwork",label:"Artwork",description:"Painting, drawing, sculpture,\u2026",bibtex_types:["MISC"],biblatex_type:"ARTWORK",csl_type:"graphic",openxml_type:"Art",endnote_type:[{name:"ARTWORK"}],refworks_type:"Artwork",ris_type:[{name:"ART",default:!0}],zotero_type:[{name:"ARTWORK"}],mandatory_fields:["title","author","url","institution","address","published","medium"],excluded_fields:m.Array.merge(e.legal,e.conference,e.patent,e.pubmed,e.math,e.arxiv,e.isbn,e.journal,e.book,e.issn,e.pages,e.volume,e.math,e.thesis,["status","editor","edition","filed","running_time","publisher","original_publisher","series_editor","ismn","associated_doi","socialmedia_handle"]),subtypes:[{name:"Painting"},{name:"Drawing"},{name:"Sculpture"},{name:"Calligraphy"},{name:"Photography"}],field_labels:{author:"Artist",published:"Date",scale:"Size"},field_ris:{genre:"M3"},field_endnote:{scale:"%3"},field_zotero:{medium:"artworkmedium",scale:"artworksize"},field_csl:{scale:"dimensions",howpublished:"note"},field_ris_additional:{},field_help:{title:"Title of the artwork",institution:"The institution or individual who owns the work",address:"The city where the work resides",medium:"e.g. 'Oil on canvas'",scale:"Size of the artwork",author:"The artist(s)"+this.getAuthorHelp(),published:"Date the artwork was created"+this.getDateHelp()}},{id:"PP_MAP",name:"Map",label:"Map",description:"Published map",bibtex_types:["MISC"],biblatex_type:"MISC",csl_type:"map",openxml_type:"Misc",endnote_type:[],ris_type:[{name:"MAP",default:!0}],zotero_type:[{name:"MAP"}],citavi_type:"Map",refworks_type:"Map",mandatory_fields:["title","author","url","scale","publisher","address","published"],excluded_fields:m.Array.merge(e.legal,e.conference,e.patent,e.thesis,e.pubmed,e.journal,e.book,e.math,e.arxiv,e.pages,e.volume,e.issn,e.isbn,["ismn","running_time","medium","institution","status","filed","associated_doi","socialmedia_handle"]),subtypes:[],field_labels:{author:"Cartographer"},field_ris:{genre:"M3"},field_ris_additional:{},field_endnote:{},field_zotero:{genre:"maptype",series:"seriestitle"},field_csl:{howpublished:"note"},field_help:{author:"The cartographer(s)"+this.getAuthorHelp()}},{id:"PP_SCORE",name:"Musical Score",label:"Musical Score",description:"Sheet music",bibtex_types:["MISC"],biblatex_type:"MISC",csl_type:"musical_score",openxml_type:"Misc",ris_type:[{name:"MUSIC",default:!0}],refworks_type:"Music Score",mandatory_fields:["title","author","number","publisher","address","published","ismn"],excluded_fields:m.Array.merge(e.legal,e.conference,e.patent,e.pubmed,e.math,e.book,e.journal,e.issn,e.isbn,e.arxiv,e.thesis,["institution","status","edition","running_time","scale","medium","pages","howpublished","associated_doi","socialmedia_handle"]),subtypes:[],field_labels:{author:"Composer",filed:"Composition date"},field_ris:{genre:"M3",ismn:"SN"},field_ris_additional:{},field_endnote:{},field_zotero:{},field_help:{title:"Title of the composition, e.g. 'Sonate in Es'",author:"The composer(s)"+this.getAuthorHelp(),filed:"The date of the composition"+this.getDateHelp(),number:"Number of composition, e.g. 'KV 216'"}},{id:"PP_GRANT",name:"Grant",label:"Grant",description:"Grant application",bibtex_types:["MISC"],biblatex_type:"MISC",subtypes:[],csl_type:"report",openxml_type:"Misc",endnote_type:[{name:"GRANT",default:!0}],ris_type:[{name:"GRANT",default:!0}],refworks_type:"Grant",field_ris:{},field_ris_additional:{},field_endnote:{number:"%N",genre:"%9",original_title:"%("},field_zotero:{},field_mendeley:{},field_help:{title:"Title of the grant"+this.getTitleHelp(),publisher:"The sponsoring agency the grant was submitted to",published:"Date when the grant was approved"+this.getDateHelp(),filed:"Date when the grant was submitted"+this.getDateHelp()},field_labels:{publisher:"Sponsoring agency",published:"Date granted",filed:"Date submitted"},mandatory_fields:["title","author","number","publisher","published","num_pages"],excluded_fields:m.Array.merge(e.series,e.conference,e.patent,e.misc,e.legal,e.pubmed,e.math,e.book,e.journal,e.volume,e.thesis,e.issn,e.isbn,e.archive,e.arxiv,["howpublished","version","original_publisher","original_address","institution","pages","originally_published","lccn","associated_doi","medium","socialmedia_handle"])},{id:"PP_PERIODICAL",name:"Periodical",label:"Periodical",description:"Journal, Magazine, or Newspaper",bibtex_types:["MISC"],biblatex_type:"PERIODICAL",subtypes:[{name:"Journal"},{name:"Magazine"},{name:"Newspaper"}],csl_type:"book",openxml_type:"Misc",citavi_type:[{name:"SpecialIssue"}],endnote_type:[],ris_type:[],field_ris:{},field_ris_additional:{},field_endnote:{},field_zotero:{},field_mendeley:{},field_help:{published:"Date or date range the periodical was published "+this.getDateHelp(),howpublished:"Frequency (monthly, weekly, daily)"},field_labels:{howpublished:"Frequency",genre:"Issue title"},mandatory_fields:["title","editor","publisher",["volume","num_volumes"],"issue",["issn","issn_alt"],"published"],excluded_fields:m.Array.merge(e.series,e.conference,e.patent,e.legal,e.pubmed,e.math,e.book,e.thesis,e.archive,e.arxiv,e.misc,["journal","journalfull","filed","author","version","institution","pages","num_pages","originally_published","associated_doi","medium","socialmedia_handle"])}],r=this.getSortOrder();t.sort((function(e,t){return r.indexOf(e.id)-r.indexOf(t.id)}));for(var a=0;a<t.length;a++)t[a].defaultSortOrder=a;return this._types=t,t},getTypeForPub:function(e){e.pubtype;return this.getPubTypeMap()[e.pubtype]},getDummyPubForPubtype:function(e){var t={pubtype:e},r={doi:"10.1000/1",pmc:"PMC1234",pmid:"1234567",issn:"1825-411X",issn_alt:"1530-6984",isbn:"9780195122213",isbn_alt:"9788479195045",arxivid:"1211.7025",archivePrefix:"arXiv",primaryClass:"math.DS",pages:"12-22",ismn:"979-0-2306-7118-7"},a=2e3;m.library.PublicationFields.getFieldsForPubType(e).forEach((function(i){var n=i.name,o=i.label;n in r?o=r[n]:"title"==n?o+=" for "+e:"author"==i.dataType?o=[{last:o,first:"AR"}]:"date"==i.dataType&&(o={year:++a,month:6,day:30}),t[n]=o})),m.library.Publication.autoClean(t);for(var i in["incomplete","citedByLink","sha1","dup_sha1","id_list","subfolders","source_id","owner_email","owner_name","_id","created","updated","autoCleaned","id_list","citekey","xref","source"].forEach((function(e){delete t[e]})),t)m.Utils.isArray(t[i])&&t[i].forEach((function(e){m.Utils.isObject(e)&&(delete e._id,delete e.formatted)}));return t},getInputTypeForPub:function(e,t){var r={pubtype:"PP_MISC",kind:void 0};if(void 0===t)return r;return this.getPubTypes().forEach((function(a){var i=void 0;"ris"==t?i=a.ris_type:"mendeley"==t?i=a.mendeley_type:"zotero"==t?i=a.zotero_type:"endnote"==t?i=a.endnote_type:"csl"==t?i=a.csl_type:"citavi"==t?i=a.citavi_type:"refworks"==t&&(i=a.refworks_type),m.Utils.isArray(i)?i.forEach((function(t){if(m.Utils.isString(t))t===e&&(r.pubtype=a.id);else if(t.name){var i=!0;"import"in t&&(i=t.import),t.name==e&&i&&(r.pubtype=a.id,r.kind=t.subtype)}})):i==e&&"PP_MISC"==r.pubtype&&(r.pubtype=a.id)})),r},getOutputTypeForPub:function(e,t){if(void 0===t)return undefinded;var r,a=void 0,i=this.getPubTypeMap()[e.pubtype],n=void 0;("csl"==t?a=i.csl_type:"ris"==t?a=i.ris_type:"openxml"==t?a=i.openxml_type:"biblatex"==t&&(a=i.biblatex_type),m.Utils.isArray(a))?(a.forEach((function(e){e.default&&(r=e.name)})),e.kind&&a.forEach((function(t){var r=!0;"output"in t&&(r=t.output),r&&t.subtype==e.kind&&(n=t.name)})),void 0===n&&(n=r)):n=a;return n},getLabel:function(e){var t=this.getTypeForPub(e);return t?t.labelFn?t.labelFn.call(null,e):t.label:"BAD PUBTYPE: "+e.pubtype},getFullLabel:function(e){var t=this.getTypeForPub(e);if(t){var r=t.label;return e.kind&&(r=r+" / "+e.kind),r}return"BAD PUBTYPE: "+e.pubtype}}),m.library.PublicationTypes=new m.library._PublicationTypes,m.library._PublicationFields=m.Class.extend({decorate:function(e,t){for(var r=0;r<e.length;r++)t&&m.Utils.applyIf(e[r],t);return e},generalFields:function(){return this.decorate([{name:"pubtype",label:"Publication Type",bibtex_persist:!1},{name:"title",biblatex:"title",label:"Title",csl:"title",ris:"TI",zotero:"title",mendeley:"title",endnote:"%T",openxml:"Title"},{name:"original_title",biblatex:"origtitle",label:"Original title",help:"Title of the original item, e.g. for translated books",csl:"original-title",bibtex_support:!1,endnote:"%O"},{name:"titleshort",biblatex:"shorttitle",label:"Short title",help:"Short version of the title",csl:"shortTitle",zotero:"shorttitle",mendeley:"short_title",bibtex_support:!1,endnote:"%!",openxml:"ShortTitle"},{name:"status",biblatex:"pubstate",label:"Status",help:"Publication status, such as 'in preparation', 'submitted', 'in revision', 'in press'",bibtex_support:!0,bibtex_name:"note",csl:"status"},{name:"abstract",biblatex:"abstract",label:"Abstract",csl:"abstract",ris:"AB",zotero:"abstractnote",mendeley:"abstract",endnote:"%X"},{name:"keywords",biblatex:"keywords",label:"Keywords",ris:"KW",help:"Index terms added by the authors",mendeley:"keywords",csl:"keyword",endnote:"%K"},{name:"note",biblatex:"annote",label:"Notes",bibtex_name:"annote",csl:"annote",hideFromEditWindow:1,ris:"N1",endnote:"%<"},{name:"copyright",biblatex:"copyright",label:"Copyright",help:"Copyright statement for the content"},{name:"affiliation",biblatex:"affiliation",label:"Affiliation",ris:"AD",help:"The organization the authors are affilated with, typically a university, research institute or company",endnote:"%+"},{name:"language",biblatex:"language",defaultWidth:"67%",label:"Language",help:"Language of the item as two letter ISO-code (e.g., en, de, fr, es, it). To avoid automatic title casing for Non-English citations set this field to another language.",csl:"language",ris:"LA",zotero:"language",mendeley:"language",endnote:"%G"},{name:"kind",defaultWidth:"67%",label:"Sub-type",hideFromEditWindow:1,bibtex_support:!1,mendeley:"source_type",endnote:"%9"},{name:"booktitle",biblatex:"booktitle",label:"Book title",help:"The title of the book that this item appears in",csl:"container-title",zotero:"booktitle",endnote:"%B",openxml:"BookTitle"},{name:"series",biblatex:"series",label:"Series",help:"The series the book was published in <br>'Lecture Notes in Computer Science'",csl:"collection-title",zotero:"series",mendeley:"series",endnote:"%S"},{name:"series_number",defaultWidth:"67%",label:"Series number",help:"Number of the series the book was published in",bibtex_support:!1,csl:"collection-number",zotero:"seriesnumber"},{name:"journal",biblatex:"journaltitle",label:"Journal",defaultWidth:"67%",help:"Title of the journal in its standardized abbreviation if available",csl:"container-title",ris:"T2",zotero:"journalabbreviation",mendeley:"source",endnote:"%J",openxml:"JournalName"},{name:"journalfull",label:"Full journal",bibtex_persist:!1,help:"Full title of the journal",zotero:"publicationtitle"},{name:"chapter",biblatex:"chapter",label:"Chapter",defaultWidth:"67%",help:"The chapter number",csl:"chapter-number",mendeley:"chapter",openxml:"ChapterNumber"},{name:"volume",biblatex:"volume",label:"Volume",defaultWidth:"67%",help:"The volume number",csl:"volume",ris:"VL",zotero:"volume",mendeley:"volume",endnote:"%V",openxml:"Volume"},{name:"number",biblatex:"number",defaultWidth:"33%",label:"Number",csl:"number",mendeley:"revision"},{name:"issue",biblatex:"issue",label:"Issue",defaultWidth:"33%",help:"The issue number",bibtex_name:"number",csl:"issue",ris:"IS",zotero:"issue",mendeley:"issue",endnote:"%N",openxml:"Issue"},{name:"edition",biblatex:"edition",label:"Edition",help:"The book edition <p>('first' or 'second')</p>",csl:"edition",ris:"ET",zotero:"edition",mendeley:"edition",endnote:"%7",openxml:"Edition"},{name:"pages",biblatex:"pages",label:"Pages",defaultWidth:"33%",help:"<p>The range or starting page, e.g. <p>'210-213' or '210'</p><p>The article number of an electronic article, e.g. e10233</p>",csl:"page",zotero:"pages",mendeley:"pages",endnote:"%P",openxml:"Pages"},{name:"url",biblatex:"url",label:"URLs",defaultValue:[],help:"A list of URLs where this item can be accessed online (one per line)",bibtex_name:"url",dataType:"array",csl:"URL",ris:"UR",zotero:"url",mendeley:"websites",endnote:"%U",openxml:"URL"},{name:"howpublished",biblatex:"howpublished",label:"How published",help:"How it was published, if the publishing method is nonstandard"},{name:"publisher",biblatex:"publisher",label:"Publisher",defaultWidth:"67%",help:"The publisher's name <p>'MIT Press'</p>",csl:"publisher",ris:"PB",zotero:"publisher",mendeley:"publisher",endnote:"%I",openxml:"Publisher"},{name:"original_publisher",biblatex:"origpublisher",label:"Original publisher",defaultWidth:"67%",help:"The original publisher's name, for items that have been republished by a different publisher",csl:"original-publisher",bibtex_support:!1},{name:"institution",biblatex:"institution",label:"Institution",help:"The institution that was involved in the publishing, but not necessarily the publisher",csl:"publisher",zotero:"institution",mendeley:"institution",openxml:"Institution"},{name:"school",biblatex:"institution",label:"School",help:"The degree-awarding institution <p>'University of Cambridge'</p>",csl:"publisher",zotero:"university",openxml:"Institution1"},{name:"department",label:"Department",help:"The department at the university where the degree was awarded <p>'Computer Science'</p>",mendeley:"department",csl:"department",bibtex_support:!1,openxml:"Department"},{name:"address",biblatex:"location",label:"Address",help:"The publisher's address (usually just the city) <p>'Cambridge'</p>",csl:"publisher-place",ris:"CY",zotero:"place",mendeley:"city",endnote:"%C",openxml:"City"},{name:"original_address",biblatex:"origlocation",label:"Original address",help:"The original publisher's address (usually just the city) <p>'Cambridge'</p>",csl:"original-publisher-place",bibtex_support:!1},{name:"version",biblatex:"version",label:"Version",help:"The software or device version <p>'2.1.0'</p>",bibtex_support:!1,csl:"version",zotero:"version",openxml:"Version"},{name:"scale",label:"Scale",help:"The scale of a map e.g. 1:50.000",bibtex_support:!1,csl:"scale",zotero:"scale",ris:"C1"},{name:"conference",biblatex:"eventtitle",label:"Conference",help:"The name of the conference where this work was presented <p>'Biology of Genomes'</p>",csl:"event",zotero:"conferencename",openxml:"ConferenceName"},{name:"conference_location",biblatex:"venue",label:"Conference location",help:"Location where the conference was held",csl:"event-place",bibtex_name:"location"},{name:"issuing_authority",label:"Issuing authority",help:"The patent issuing authority (e.g. US, Japan, Germany, EC)",bibtex_support:!1,csl:"authority",zotero:"issuingauthority"},{name:"patent_publication_type",label:"Patent publication type",help:"The type of patent publication (e.g., 'patent' or 'application')",bibtex_support:!1},{name:"application_number",label:"Application number",help:"The number assigned to the initial patent application (e.g., '09/458811')",bibtex_support:!1,csl:"call-number",ris:"M1",zotero:"applicationnumber",mendeley:"patent_application_number",endnote:"%N"},{name:"class",label:"Class",help:"The category / class of the invention (within the issuing authority's classification system)",bibtex_support:!1},{name:"international_class",label:"International class",help:"The category / class of the invention within the International Patent Classification (IPC) scheme",bibtex_support:!1},{name:"search_class",label:"Field of search",help:"An extended list of classes covering the invention categories relevant to this patent",bibtex_support:!1},{name:"states",label:"Designated states",help:"A list of states specified by the inventor when filed with WIPO or EPO",bibtex_support:!1,zotero:"country"},{name:"priority_numbers",label:"Priority numbers",help:"A list of patent application numbers for which priority is claimed",csl:"issue",zotero:"prioritynumbers",bibtex_support:!1},{name:"patent_number",biblatex:"number",label:"Patent number",help:"The patent number without the preceding country / authority code (e.g., '3990438' NOT 'US3990438')",bibtex_name:"number",csl:"number",ris:"SN",zotero:"patentnumber",openxml:"PatentNumber"},{name:"assignee",biblatex:"holder",label:"Assignee",help:"The individual or organization to which the patent was assigned",bibtex_support:!1,zotero:"assignee",mendeley:"patent_owner"},{name:"foreign_patents",label:"Foreign references",help:"A list of patent numbers for any associated foreign patents",bibtex_support:!1},{name:"call_number",label:"Call number",help:"Location in the library where the item can be found",bibtex_support:!1,csl:"call-number",zotero:"callnumber",endnote:"%L",ris:"CN"},{name:"num_pages",biblatex:"pagetotal",label:"Page count",help:"The total number of pages in the book",bibtex_support:!1,csl:"number-of-pages",zotero:"numpages",endnote:"%&"},{name:"num_volumes",biblatex:"volumes",label:"Volume count",help:"The total number of volumes in the book series",bibtex_support:!1,csl:"number-of-volumes",ris:"NV",zotero:"numberofvolumes",endnote:"%6",openxml:"NumberVolumes"},{name:"archivePrefix",biblatex:"archivePrefix",label:"Archive prefix",help:"Name of the preprint archive<p>arXiv, bioRxiv</p>",csl:"archive",zotero:"archive"},{name:"archive",label:"Archive",help:"Name of the archive where this document can be found<p>American Heritage Center</p>",csl:"archive",zotero:"archive",bibtex_support:!1},{name:"archive_location",label:"Archive location",help:"Storage location within an archive (e.g. a box and folder number)",csl:"archive_location",zotero:"archivelocation",bibtex_support:!1},{name:"archive_place",label:"Archive place",help:"Geographic location of the archive<p>West Lafayette, Indiana</p>",csl:"archive-place",bibtex_support:!1},{name:"eprint",biblatex:"eprint",label:"Eprint ID",help:"Identifier for the e-print article (e.g. 0707.3168)"},{name:"primaryClass",biblatex:"eprintclass",label:"Primary class",help:"Primary arXiv category (e.g. hep-th)"},{name:"running_time",label:"Running time",help:"Running time e.g. 142 min",bibtex_support:!1,csl:"dimensions",zotero:"runningtime",endnote:"%runningtime"},{name:"medium",label:"Medium",help:"Medium of the media type (e.g. CD, DVD, VHS)",bibtex_support:!1,csl:"medium",mendeley:"medium",endnote:"%#",openxml:"Medium"},{name:"genre",label:"Custom sub-type",help:"Class, type or genre of the item",bibtex_support:!1,csl:"genre",mendeley:"genre",openxml:"Type"},{name:"jurisdiction",label:"Jurisdiction",help:"Jurisdiction (e.g. United States, United Kingdom)",bibtex_support:!1,csl:"jurisdiction"},{name:"court",label:"Court",help:"Court (e.g. Supreme Court or Court of Appeals)",bibtex_support:!1,csl:"authority",zotero:"court",openxml:"Court"},{name:"history",label:"History",help:"Legal history: this explains what happened to the case on appeal to a higher appellate court",bibtex_support:!1,csl:"references",zotero:"history"},{name:"section",label:"Section",help:"Section number of the statute or bill",bibtex_support:!1,csl:"section",zotero:"section"},{name:"session",label:"Session",help:"Session of the Congress",bibtex_support:!1,zotero:"session",csl:"chapter-number"},{name:"legislative_body",label:"Legislative Body",help:"Legislative body who made, amended or repealed the bill (e.g. Senate)",bibtex_support:!1,zotero:"legislativebody",csl:"authority"},{name:"database",biblatex:"library",label:"Library catalog/database",help:"The library catalog or database the item can be found in.",bibtex_support:!1,zotero:"librarycatalog",csl:"source"},{name:"socialmedia_handle",defaultWidth:"33%",label:"Social Media handle",csl:"username",bibtex_support:!1}],{fieldType:"general",defaultValue:void 0})},identifierFields:function(){return this.decorate([{name:"user_citekey",label:"BibTeX key",help:"Citation key for use with LaTeX/BibTeX. If not set Paperpile will assign a key automatically. If you set this field make sure it is unique in your library."},{name:"issn",biblatex:"issn",label:"ISSN",defaultWidth:"67%",help:"An identifier for periodicals (journals, magazines)",csl:"ISSN",zotero:"issn",mendeley:"identifiers.issn",openxml:"StandardNumber"},{name:"issn_alt",biblatex:"issn",label:"ISSN (alt.)",defaultWidth:"67%",help:"A secondary or alternate ISSN (e.g. online version of the journal)",bibtex_name:"issn"},{name:"isbn",biblatex:"isbn",label:"ISBN",defaultWidth:"67%",help:"An international identifier for books",csl:"ISBN",zotero:"isbn",mendeley:"identifiers.isbn",endnote:"%@",openxml:"StandardNumber1"},{name:"isbn_alt",biblatex:"isbn",label:"ISBN (alt.)",defaultWidth:"67%",help:"A secondary or alternate ISBN (e.g. electronic or re-issued version)",bibtex_name:"isbn"},{name:"ismn",biblatex:"ismn",label:"ISMN",defaultWidth:"67%",help:"An international identifier for notated music",bibtex_support:!1},{name:"pmid",biblatex:"pmid",label:"PMID",defaultWidth:"67%",help:"An identifier for articles in the PubMed database",csl:"PMID",mendeley:"identifiers.pmid"},{name:"lccn",biblatex:"lccn",label:"LCCN",defaultWidth:"67%",help:"An identifier for books published in the United States, managed by the Library of Congress"},{name:"mr",biblatex:"mr",label:"MR Number",defaultWidth:"67%",help:"An identifier to locate a specific record in the Mathematical Reviews (MR) database",bibtex_name:"mrnumber"},{name:"zbl",biblatex:"zbl",label:"Zbl Number",defaultWidth:"67%",help:"An identifier to locate a specific record in the Zentralblatt MATH database",bibtex_name:"zbl"},{name:"arxivid",biblatex:"arxivid",label:"Arxiv ID",defaultWidth:"67%",help:"An identifier for e-print articles published on arXiv.org",mendeley:"identifiers.arxiv"},{name:"doi",biblatex:"doi",label:"DOI",defaultWidth:"67%",help:"A generic identifier for digital objects. Most journal articles have a unique DOI assigned on publication.",csl:"DOI",ris:"DO",zotero:"doi",mendeley:"identifiers.doi",endnote:"%R"},{name:"associated_doi",label:"Associated DOI",defaultWidth:"67%",help:"One or more DOIs for the item with which this entry is associated."},{name:"pmc",biblatex:"pmc",label:"PMC ID",defaultWidth:"67%",help:"An identifier for articles deposited in the PubMed Central open access repository",csl:"PMCID",endnote:"%]"}],{fieldType:"identifier",defaultValue:void 0})},dateFields:function(){return this.decorate([{name:"published",biblatex:"date",label:"Date published",shortLabel:"Published",help:"Date when the item was published <p>'2002' <i>or</i> 'June 2002' <i>or</i> 'June 24, 2002' <br/> <i>or free-form date in braces<i><br> '{May-June 1876}'</p>",csl:"issued",ris:"DA",zotero:"date",endnote:"%8",openxml:"published"},{name:"accessed",biblatex:"urldate",label:"Date accessed",shortLabel:"Accessed",help:"Date when the item was accessed <p>'May 1, 2012'</p>",csl:"accessed",ris:"Y2",zotero:"accessdate",endnote:"%[",openxml:"accessed"},{name:"filed",biblatex:"date",label:"Date filed",shortLabel:"Filed",help:"Date when the patent was filed",csl:"submitted",ris:"C2",zotero:"filingdate"},{name:"originally_published",biblatex:"origdate",label:"Date of the original publication",shortLabel:"Originally published",help:"Date when the item was originally published <p>'2002' <br/> 'June 2002' <br/> 'June 24, 2002' <br/> '{May-June 1876}'</p>",csl:"original-date",bibtex_support:!1},{name:"conference_date",biblatex:"eventdate",label:"Conference date",shortLabel:"Conference date",help:"Date when the conference was held",csl:"event-date"}],{fieldType:"date",dataType:"date",defaultValue:void 0})},libraryFields:function(){return this.decorate([{name:"imported",type:"int",defaultValue:0,note:"Either 0 (if the pub hasn't been stored in the DB yet) or 1 (if it has been)"},{name:"_id",label:"GUID",note:"Paperpile GUID for this reference.",bibtex_name:"pp_guid",export_persist:!0,csl:"id",openxml:"Guid"},{name:"original_id",label:"Source ID",note:"GUID of the original item from which this item was copied.",export_persist:!0},{name:"owner",label:"Owner",note:"Paperpile user who owns this reference",export_persist:!0},{name:"id_list",label:"ID list",dataType:"array",note:"Internal array of unique IDs (i.e. doi, pmid, patent_number, etc.)"},{name:"_keywords",label:"Keywords",dataType:"array",note:"Internal array of keywords for indexing",persist:!1,endnote:"%K"},{name:"collection_timestamps",label:"Collection Timestamps",defaultValue:{},note:"A hash of collection IDs and timestamps, tracking when this item was added to each collection.",dataType:"object"},{name:"sha1",label:"Sha1 hash",note:"A sha1 hash of the main contents of the reference."},{name:"dup_sha1",label:"Sha1 hash (Duplicates)",note:"A simpler sha1 hash, for detecting duplicate references."},{name:"duplicates",label:"Duplicates",note:"A list of the IDs of any duplicate publications in the library.",dataType:"array"},{name:"ignore_duplicates",label:"Ignored Duplicates",note:"A list of publications that have been manually flagged as NOT duplicates of this item.",dataType:"array"},{name:"created",label:"Created",note:"A Unix timestamp, storing the date and time that this reference was created in our database",dataType:"date",showInExpandedView:!0},{name:"updated",label:"Last modified",note:"A Unix timestamp, storing the date and time that this reference was last modified",dataType:"date",showInExpandedView:!0},{name:"trashed",label:"Trashed",note:"Either 0 or 1, indicating whether or not the pub is currently trashed"},{name:"starred",label:"Starred",note:"Either 0 or 1, indicating whether or not the pub is currently starred"},{name:"labels",label:"Labels",defaultValue:[],note:"An array of collection GUIDs corresponding to the assigned labels",dataType:"array"},{name:"folders",label:"Folders",defaultValue:[],note:"An array of collection GUIDs corresponding to the assigned folders",dataType:"array"},{name:"shared_folders",label:"Shared Folders",defaultValue:[],note:"An array of collection GUIDs corresponding to the assigned shared folders",dataType:"array"},{name:"crawl_urls",label:"URLs",defaultValue:[],help:"An internal array of ALL the URLs that were encountered during crawling.",dataType:"array"},{name:"webimport_sha1s",label:"Webimport sha1s",defaultValue:[],help:"An internal array of webimport Sha1s (for identifying webimport pubs)",dataType:"array"},{name:"attachments",label:"Attachments",defaultValue:[],help:"An internal array of file attachment objects.",dataType:"array",bibtex_name:"file",export_persist:!0},{name:"xref",label:"Associated items",help:"An internal array of objects containing data about associated items.",dataType:"array"},{name:"pdf",label:"PDF file ID",help:"An internal PDF file ID"},{name:"source",label:"Data source",defaultValue:{},help:"Information about the source of this article's metadata.",dataType:"object"},{name:"masid",label:"Microsoft Academic Search ID",defaultWidth:"67%",help:"The ID for this article within Microsoft Academic Search (unstable)"},{name:"mendeleyid",label:"Mendeley UUID",help:"The canonical Mendeley ID for this article"},{name:"scopusid",label:"Scopus ID",help:"The scopus ID for this article"},{name:"gs_related_articles",label:'Link to Google Scholar "related articles"'},{name:"gs_all_versions",label:'Link to Google Scholar "all versions"'},{name:"gs_cluster_id",label:'Google Scholar "cluster" ID'},{name:"gs_cited_by_count",label:"Google Scholar cited by count"},{name:"pubmed_cited_by_count",label:"PubMed / PMC cited by count"},{name:"gs_cited_by_link",label:'Link to Google Scholar "cited by"'},{name:"gs_bibtex",label:'Link to Google Scholar "details" bibtex link'},{name:"citedByLink",label:'"Cited by" link',help:"URL of a page listing articles that cite this article"},{name:"referencesLink",label:"References link",help:"URL of a page where the article's references can be found"},{name:"external_pdf_filename",label:"External PDF Filename",help:"The PDF filename found during RIS import"},{name:"subfolders",label:"Subfolder",defaultValue:[],note:"List of subfolders this article should be stored in Google Drive.",dataType:"array"},{name:"count_index",label:"Count Index",defaultValue:[],note:"List of keywords used for collecting faceted counts.",dataType:"array"},{name:"citekey",label:"Citation key",export_persists:!0,help:"Citation key for use with LaTeX/BibTeX. If you change it, make sure the key remains unique in your library."},{name:"autocompleted",label:"Autocompleted",note:"Whether the article was autocompleted or not"},{name:"locked_citation",label:"Locked citation",note:'Flags items in the "Citations" database as modified externally so they are not ovewritten by changes in the original from "Library"'},{name:"journal_checked",label:"Journal checked",note:"Whether the article has had its journal checked against our db or not"},{name:"force_complete",label:"Force Complete",note:"Flag to force the data to NOT be considered incomplete."},{name:"incomplete",label:"Incomplete",note:'1 if the article has "incomplete" data, i.e. missing crucial information for the given pubtype. 0 otherwise.'},{name:"pdf_restricted",label:"PDF restricted",note:"1 if the article hit a paywall when downloading an article PDF."},{name:"original_citekey",label:"Original BibTeX key",help:"Original key (if any) loaded via BibTeX import."}],{fieldType:"library",defaultValue:void 0,export_persist:!1})},authorFields:function(){var e=", separated by semicolons <p><i>Last, First Middle</i> <p>e.g. Knuth, Donald E; Moore, Ronald W</p><p><i>Collective names in braces</i><p>e.g. {1000 Genomes Consortium}</p>";return this.decorate([{name:"author",biblatex:"author",label:"Authors",help:"The author(s)"+e,csl:"author",ris:"AU",mendeley:"authors",endnote:"%A",openxml:"Author"},{name:"editor",biblatex:"editor",label:"Editors",help:"The editor(s)"+e,csl:"editor",mendeley:"editors",endnote:"%E",openxml:"Editor"},{name:"series_editor",biblatex:"editora",label:"Series editors",help:"The series editor(s)"+e,csl:"collection-editor",mendeley:"series_editor",bibtex_support:!1},{name:"contributor",biblatex:"editorb",label:"Contributors",help:"Additional contributor(s)"+e,bibtex_support:!1,endnote:"%Y"},{name:"translator",biblatex:"translator",label:"Translators",help:"The translator(s) "+e,csl:"translator",mendeley:"translators",bibtex_support:!1,endnote:"%?",openxml:"Translator"}],{fieldType:"author",dataType:"author",defaultValue:void 0})},temporaryFields:function(){return this.decorate([{name:"view_expanded",type:"int",defaultValue:0},{name:"view_state"},{name:"editing_note",type:"int",defaultValue:0},{name:"view_context_open",type:"int",defaultValue:0},{name:"dup_group",type:"int",note:"The current duplicate group, if the view is showing duplicate articles",defaultValue:0},{name:"dup_group_first",type:"int",note:"1 if the current article is first in its group, 0 otherwise",defaultValue:0},{name:"dup_group_last",type:"int",note:"1 if the current article is last in its group, 0 otherwise",defaultValue:0},{name:"_imported",type:"int",defaultValue:0,note:"0 or 1, used to indicate whether an equivalent pub exists in the user's personal library when viewing a shared folder."},{name:"_imported_id",type:"string",defaultValue:"",note:"the _id of the equivalent item from the user's library."},{name:"_owner_google_email",type:"string",defaultValue:"",note:"Email of the user who owns this item"},{name:"_owner_google_name",type:"string",defaultValue:"",note:"Full name of the user who owns this item"},{name:"pdf_crawl_status"}],{fieldType:"temporary",defaultValue:void 0,persist:!1,export_persist:!1})},citationFields:function(){return this.decorate([{name:"cite_alias",label:"Cite Alias",ris:"LB"},{name:"source_id",label:"Source ID"},{name:"owner_email",label:"Owner's email"},{name:"owner_name",label:"Owner's name"}],{fieldType:"citation",persist:!1,export_persist:!1})},getField:function(e){var t=this.getFieldsMap();return t[e]?t[e]:null},getFieldType:function(e){var t=this.getFieldsMap();return t[e]?t[e].fieldType:null},getDataType:function(e){var t=this.getFieldsMap();return t[e]?t[e].dataType:null},isFieldMandatory:function(e,t){var r=m.library.PublicationTypes.getPubType(t).mandatory_fields||[];return r=m.Array.flatten(r),r=m.Array.unique(r),!!m.Array.contains(r,e)},getInputMapForPubType:function(e,t){var r=m.library.PublicationTypes.getPubType(e),a={};if(-1==["ris","zotero","mendeley","endnote","csl"].indexOf(t))return a;if(this.getFieldsForPubType(e).forEach((function(e){t in e&&("ris"==t&&(a[e.ris]=e.name),"zotero"==t&&(a[e.zotero]=e.name),"mendeley"==t&&(a[e.mendeley]=e.name),"csl"==t&&(a[e.csl]=e.name),"endnote"==t&&(m.Utils.isArray(e.endnote)?e.endnote.forEach((function(t){a[t]=e.name})):a[e.endnote]=e.name))})),"ris"==t){if(r.field_ris_additional)for(var i in r.field_ris_additional)a[i]=r.field_ris_additional[i];a.PY="published",a.Y1="published",a.DA="published",a.PG="pages",a.A1="author",a.T1="title",a.ID="doi",a.DOI="doi",a.L3="doi",a.N2="abstract",a.L1="url",a.L2="url",a.L4="url",a.RN="note",a.U2="pmid",a.IB="isbn"}else if("zotero"==t){if(r.field_zotero_additional)for(var i in r.field_zotero_additional)a[i]=r.field_zotero_additional[i];a.creators="creators",a.tags="zotero_tags"}else"mendeley"==t?(a.id="source.mendeley_id",a.day="published.day",a.month="published.month",a.year="published.year",a.folder_uuids="folder_uuids",a.starred="source.starred",a.tags="tags"):"csl"==t?a.note="note":"endnote"==t&&(a["%\xc4"]="url",a["%\xcb"]="journal");return a},getOutputMapForPubType:function(e,t,r){var a=r||{},i=m.library.PublicationTypes.getPubType(e),n={};if(-1==["csl","ris","openxml"].indexOf(t))return n;var o={};"csl"==t&&((i.csl_excluded_fields||[]).forEach((function(e){var t=!0;"csl_excluded_fields"in a&&-1==a.csl_excluded_fields.indexOf(e)&&(t=!1),t&&(o[e]=1)})),n._id="id");return this.getFieldsForPubType(e).forEach((function(e){t in e&&(o[e.name]||("csl"==t?n[e.name]=e.csl:"ris"==t?n[e.ris]=e.name:"openxml"==t&&(n[e.openxml]=e.name)))})),n},getFieldsForPubType:function(e,t){var r=t||{};"includeAll"in r||(r.includeAll=!1);var a=m.library.PublicationTypes.getPubType(e),i=a.excluded_fields||[],n=a.field_labels||{},o=a.field_shortlabels||{},s=a.field_help||{},l=a.field_csl||{},c=a.field_ris||{},u=a.field_zotero||{},d=a.field_mendeley||{},p=a.field_endnote||{},h=a.field_openxml||{},g=a.mandatory_fields||[];g=m.Array.flatten(g),g=m.Array.filter(g,(function(e){return!!e})),g=m.Array.map(g,(function(e){return e.replace(/:\d/,"")}));var f=m.Array.map(g,(function(e){var t=m.library.PublicationFields.getField(e);return t.mandatory=!0,t})),b=m.Utils.clone(this.getFields());b=m.Array.filter(b,(function(e){return"temporary"===e.fieldType||"library"===e.fieldType&&!e.showInExpandedView||"pubtype"===e.name?!!r.includeAll:!m.Array.contains(i,e.name)&&!m.Array.contains(g,e.name)})),b=m.Array.map(b,(function(e){return e.mandatory=!1,e})),b=f.concat(b);var y={};for(var v in p)m.Utils.isArray(p[v])?p[v].forEach((function(e){y["endnote:"+e]=1})):y["endnote:"+p[v]]=1;for(var v in c)y["ris:"+c[v]]=1;for(var _=0;_<b.length;_++){var w=m.Utils.clone(b[_]),P=w.name;w.endnote&&"endnote:"+w.endnote in y&&delete w.endnote,w.ris&&"ris:"+w.ris in y&&delete w.ris,n[P]&&(w.label=n[P]),o[P]&&(w.shortLabel=o[P]),s[P]&&(w.help=s[P]),l[P]&&(w.csl=l[P]),P in c&&(null===c[P]?delete w.ris:w.ris=c[P]),P in h&&(null===h[P]?delete w.openxml:w.openxml=h[P]),u[P]&&(w.zotero=u[P]),d[P]&&(w.mendeley=d[P]),P in p&&(null===p[P]?delete w.endnote:w.endnote=p[P]),b[_]=w}return b},getFieldHelp:function(e,t){var r=m.library.PublicationTypes.getPubType(t).field_help||{};if(r[e])return r[e];var a=this.getFieldsMap()[e];return a?a.help||"":null},getFieldLabel:function(e,t){var r=m.library.PublicationTypes.getPubType(t).field_labels||{};if(r[e])return r[e];var a=this.getFieldsMap()[e];return a?a.label:null},getFieldsMap:function(){if(this._fieldsMap)return this._fieldsMap;var e=this.getFields(),t={};return e.forEach((function(e){t[e.name]=e})),this._fieldsMap=t,this._fieldsMap},getFields:function(){if(this._fields)return this._fields;var e=this.generalFields(),t=this.authorFields(),r=this.dateFields(),a=this.identifierFields(),i=this.libraryFields(),n=this.temporaryFields(),o=this.citationFields();this._fields=e.concat(t,r,a,i,n,o);for(var s=0;s<this._fields.length;s++)this._fields[s].defaultSortOrder=s;return this._fields},getDateFieldNames:function(){var e=[];return this.dateFields().forEach((function(t){e.push(t.name)})),e},getAuthorFieldNames:function(){var e=[];return this.authorFields().forEach((function(t){e.push(t.name)})),e}}),m.library.PublicationFields=new m.library._PublicationFields,function(){function e(e){return s(t(o(e),8*e.length))}function t(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var o=new Array(80),s=1732584193,l=-271733879,c=-1732584194,u=271733878,d=-1009589776,p=0;p<e.length;p+=16){for(var m=s,h=l,g=c,f=u,b=d,y=0;y<80;y++){o[y]=y<16?e[p+y]:n(o[y-3]^o[y-8]^o[y-14]^o[y-16],1);var v=i(i(n(s,5),r(y,l,c,u)),i(i(d,o[y]),a(y)));d=u,u=c,c=n(l,30),l=s,s=v}s=i(s,m),l=i(l,h),c=i(c,g),u=i(u,f),d=i(d,b)}return new Array(s,l,c,u,d)}function r(e,t,r,a){return e<20?t&r|~t&a:e<40?t^r^a:e<60?t&r|t&a|r&a:t^r^a}function a(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function i(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function n(e,t){return e<<t|e>>>32-t}function o(e){for(var t=[],r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<24-r%32;return t}function s(e){for(var t="0123456789abcdef",r="",a=0;a<4*e.length;a++)r+=t.charAt(e[a>>2]>>8*(3-a%4)+4&15)+t.charAt(e[a>>2]>>8*(3-a%4)&15);return r}m.library.Crypto={},m.library.Crypto.sha1=function(t){return e(t)}}(),m.library._Publication=m.Class.extend({nonSupportedGuruFields:["_p","_u","_c","_alt","_bak","_score","_titleNE","language_title","edition_alt","published_alt","medium_alt","subtitle","pdf_url","guru_id","inferred_id","refs","editionID","crawler_urls"],links:function(e){var t=[];if(e.doi&&t.push(this.getDoiLink(e)),e.url){var r;r=m.Utils.isArray(e.url)?e.url:[e.url];for(var a=[],i=0;i<r.length;i++)r[i]&&"string"==typeof r[i]&&(r[i]=r[i].replace(/\s*$/,"").replace(/^\s*/,""),a.push(r[i]));r=a,e.doi||m.Array.each(r,(function(e){e.match(/doi\.org/)&&t.push(e)})),m.Array.each(r,(function(e){e.match(/fulltext/i)&&t.push(e)})),m.Array.each(r,(function(e){e.match(/full/i)&&t.push(e)})),m.Array.each(r,(function(e){e.match(/pdf/i)||t.push(e)})),m.Array.each(r,(function(e){t.push(e)}))}if(e.pmid){var n=this.getPubMedLink(e).replace(/https/,"http");(t=m.Array.filter(t,(function(e){return e!=n}))).push(this.getPubMedLink(e))}if(e.pmc){n=this.getPMCLink(e).replace(/https/,"http");(t=m.Array.filter(t,(function(e){return e!=n}))).push(this.getPMCLink(e))}return e.arxivid&&(t=m.Array.filter(t,(function(e){return!e.match(/arxiv\.org/i)}))).push(this.getArxivLink(e)),e.scopusid&&t.push(this.getScopusLink(e)),e.zbl&&t.push(this.getZBLLink(e)),e.mr&&t.push(this.getMRLink(e)),t=m.Array.stringUnique(t),t=m.Array.filter(t,(function(e){return!e.match(/^\//)&&(!e.match(/mail-attachment.googleusercontent.com/i)&&!!m.Utils.isUrlLike(e))}))},getDoiLink:function(e){return"http://dx.doi.org/"+e.doi},getPubMedLink:function(e){return"https://www.ncbi.nlm.nih.gov/pubmed/"+e.pmid},getPMCLink:function(e){return"https://www.ncbi.nlm.nih.gov/pmc/articles/"+e.pmc},getArxivLink:function(e){return"http://arxiv.org/abs/"+e.arxivid},getLCCNLink:function(e){return"http://lccn.loc.gov/"+e.lccn},getMRLink:function(e){return"http://www.ams.org/mathscinet-getitem?mr="+e.mr},getZBLLink:function(e){return"https://zbmath.org/?q=an:"+e.zbl},getScopusLink:function(e){return"https://www.reaxys.com/reaxys/secured/fulltext.do?performed=true&citationNumber="+e.scopusid},hasPublisherLink:function(e){var t=this.links(e),r=m.crawling.PdfDriver.getUrlRegexes(),a=!1;return m.Array.each(t,(function(e){e.match(/doi\.org/i)&&(a=!0);for(var t=0;t<r.length;t++)e.match(r[t])&&(a=!0)})),a},getCitedByCount:function(e){return void 0!==e.gs_cited_by_count?e.gs_cited_by_count:void 0!==e.pubmed_cited_by_count?e.pubmed_cited_by_count:null},getCitedByLink:function(e){var t=e.doi;if(t)return"http://scholar.google.com"+"/scholar?hl=en&lr=&num=30&cites="+("http://dx.doi.org/"+t);if(e.gs_cluster_id)return"http://scholar.google.com"+"/scholar?hl=en&lr=&num=30&cites="+e.gs_cluster_id;if(e.patent_number){var r=e.patent_number,a=e.issuing_authority;return"http://scholar.google.com"+"/scholar?cites="+("http://www.freepatentsonline.com/"+(r=r.replace(a,""))+".html")}return null},crawlUrlsContainDoi:function(e){if(!e.crawl_urls)return!1;var t=!1;return e.crawl_urls&&m.Utils.isArray(e.crawl_urls)&&e.crawl_urls.forEach((function(e){e&&e.match(/doi\.org/i)&&(t=!0)})),t},getSupportedRefDriver:function(e){var t,r,a=this.links(e);e.crawl_urls&&(a=e.crawl_urls.reverse().concat(a)),a=m.Array.stringUnique(a);for(var i=0;i<a.length;i++){var n=a[i],o=m.crawling.RefDriver.getSupportingDriver(n);if(o){t=o,r=n;break}}return void 0!==t?{driver:t,url:r}:void 0},addUrl:function(e,t){t&&(e.url||(e.url=[]),e.url.push(t))},addCrawlUrls:function(e,t){t&&(e.crawl_urls||(e.crawl_urls=[]),e.crawl_urls=e.crawl_urls.concat(t),e.crawl_urls=m.Array.stringUnique(e.crawl_urls))},addWebimportSha1:function(e,t){e.webimport_sha1s||(e.webimport_sha1s=[]),e.webimport_sha1s.push(t)},addXref:function(e,t){e.xref||(e.xref=[]);var r=!0;e.xref.forEach((function(e){"pmid"in t&&"pmid"in e&&t.pmid==e.pmid&&(r=!1),"doi"in t&&"doi"in e&&t.doi==e.doi&&(r=!1)})),r&&e.xref.push(t)},getAttachment:function(e,t){var r=null;return e.attachments.forEach((function(e){e._id===t&&(r=e)})),r},addAttachment:function(e,t){e.attachments||(e.attachments=[]),m.library.Attachment.autoClean(e,t),e.attachments.push(t)},removeAttachment:function(e,t){var r;e.attachments.forEach((function(e){e._id===t&&(r=e)})),r&&m.Array.remove(e.attachments,r)},getPdfAttachment:function(e){if(!e.attachments)return null;var t=null;return e.attachments.forEach((function(e){1===e.article_pdf&&(t=e)})),t},getPersistentData:function(e){for(var t=m.Utils.clone(e),r={},a=m.library.PublicationFields.getFields(),i=0;i<a.length;i++){var n=a[i].name;if(!1!==a[i].persist&&void 0!==t[n]){if(m.Utils.isArray(t[n])&&0==t[n].length)continue;r[n]=t[n]}}return r._id=t._id,r},getAllData:function(e){for(var t=m.Utils.clone(e),r={},a=m.library.PublicationFields.getFields(),i=0;i<a.length;i++){var n=a[i].name;if(void 0!==t[n]){if(m.Utils.isArray(t[n])&&0==t[n].length)continue;r[n]=t[n]}}return r._id=t._id,r},stripNonBibtexFields:function(e){for(var t=m.library.PublicationFields.getFields(),r=0;r<t.length;r++){var a=t[r].name;!1===t[r].persist_bibtex&&e[a]&&delete e[a]}return e},clearEmptyValues:function(e){for(var t=m.library.PublicationFields.getFields(),r=0;r<t.length;r++){var a=t[r].name,i=t[r].fieldType,n=e[a];("array"===i||"author"===i||"date"===i?""===n||null==n||m.Utils.isArray(n)&&0===n.length:""===n||null==n)&&delete e[a]}},autoClean:function(e,t){var r,a=t||{};for(h in"updateUrls"in a||(a.updateUrls=!0),e.autoCleaned,e)void 0!==e[h]&&null!==e[h]?m.Utils.isString(e[h])&&(e[h]=m.Utils.replaceU0308(e[h]),e[h]=m.Utils.replaceControlChars(e[h])):delete e[h];this.convertHtmlEntitiesToUnicode(e),e._id||(e._id=m.UUID.generate()),e.owner||(m.Session&&m.Session.hasKey("user_id")&&(e.owner=m.Session.get("user_id")),e.owner);var i=e.pubtype,n=m.library.PublicationTypes.getPubTypeMap();for(h in n[i]||console.log("BAD PUBTYPE: "+i),e)if(h.match(/arxiv/i)){var o=e[h];o=o.replace(/arxiv:?\s*/i,""),delete e[h],e.arxivid=o}!e.journal&&e.archivePrefix&&e.primaryClass&&(e.journal=e.archivePrefix+" ["+e.primaryClass+"]"),e.source||(e.source={}),e.url?(m.Utils.isString(e.url)&&""!==e.url&&(e.url=[e.url]),m.Utils.isArray(e.url)):e.url=[];var s=this.links(e);if(s.length>0&&!e.doi)for(h=0;h<s.length;h++)(s[h].match(/^(http:\/\/)?dx\.doi\.org/)||s[h].match(/^(https:\/\/)?doi\.org/))&&(e.doi=s[h]);if(e.doi){e.doi=e.doi.replace(/^info:doi\//i,""),e.doi=e.doi.replace(/^doi:\s*/i,""),e.doi=e.doi.replace(/^(https?:\/\/)?dx\.doi\.org[^\/]*\//i,""),e.doi=e.doi.replace(/^(https?:\/\/)?doi\.org\//i,""),e.doi=e.doi.replace(/^(https?:\/\/)?doi\.acm\.org\//i,""),e.doi=e.doi.replace(/^(https?:\/\/)?doi\.ieeecomputersociety\.org\//i,""),e.doi=e.doi.replace(/^(https?:\/\/)?doi\.org[^\/]*\//i,""),e.doi=e.doi.replace(/\?locatt=mode:legacy/i,"");try{e.doi=decodeURIComponent(e.doi)}catch(e){}}if(e.associated_doi){var l={type:"article",doi:e.associated_doi};this.addXref(e,l)}if(e.pmid?e.pmid=e.pmid.replace(/^pmid:?\s*/i,""):(s=this.links(e)).forEach((function(t){t.match(/ncbi\.nlm\.nih\.gov\/pubmed\/(\d+)/i)&&(e.pmid=RegExp.$1)})),e.pmc||(s=this.links(e)).forEach((function(t){t.match(/ncbi\.nlm\.nih\.gov\/pmc\/articles\/(PMC\d+)/i)&&(e.pmc=RegExp.$1)})),e.zbl?e.zbl=e.zbl.replace(/\s*zbl\s*/i,""):(s=this.links(e)).forEach((function(t){t.match(/zbmath\.org\/\?q=an:(.+)/i)&&(e.zbl=RegExp.$1)})),e.mr||(s=this.links(e)).forEach((function(t){t.match(/ams\.org\/mathscinet-getitem\?mr=(.+)/i)&&(e.mr=RegExp.$1)})),a.updateUrls){var c=this.links(e),u=[];e.url.forEach((function(e){for(var t=0;t<c.length;t++)c[t]=c[t].replace(/\s*$/,"").replace(/^\s*/,""),e==c[t]&&(u.push(e),c.splice(t,1))})),e.url=u.concat(c),0===e.url.length&&delete e.url}if(e.crawl_urls&&e.url){for(var d=m.Array.mapBoolean(e.url),p=!1,h=0;h<e.crawl_urls.length;h++)if(d[e.crawl_urls[h]]){p=!0;break}p||(e.crawl_urls=[])}else e.crawl_urls&&!e.url&&(e.crawl_urls=[]);var g=this.getCitedByLink(e);if(null!==g&&(e.citedByLink=g),m.Features.getPaperReferences()){var f=this.getSupportedRefDriver(e);if(f){var b=f.url;e.referencesLink=b}}if(["issn","isbn","issn_alt","isbn_alt"].forEach((function(t){var r=e[t];if(r){if("issn"!=t&&"isbn"!=t||!m.Utils.isArray(r)||(r.length>1?(e[t]=r[0],e[t+"_alt"]||(e[t+"_alt"]=r[1])):r.length>0?e[t]=r[0]:delete e[t]),!m.Utils.isString(e[t]))return void delete e[t];"issn"!=t&&"issn_alt"!=t||(e[t]=e[t].replace(/\s/g,""),e[t].match(/^(\d{4})(\d{3}[X\d])$/)&&(e[t]=RegExp.$1+"-"+RegExp.$2)),"isbn"!=t&&"isbn_alt"!=t||(e[t]=e[t].toUpperCase(),e[t]=e[t].replace(/-/g,""),e[t]=e[t].replace(/\s/g,""),e[t].match(/^[X\d]+$/)||(e[t].match(/([X\d]{13})/)||e[t].match(/([X\d]{10})/)?e[t]=RegExp.$1:delete e[t]),e[t]&&10==e[t].length&&(e[t]=m.Utils.isbn10To13(e[t])))}else delete e[t]})),e.startpage&&e.endpage?(e.pages=e.startpage+"-"+e.endpage,delete e.startpage,delete e.endpage):e.startpage?(e.pages=e.startpage,delete e.startpage):e.endpage&&(e.pages=e.endpage,delete e.endpage),e.pages){if(e.pages=e.pages.replace(/\s*-\s*/,"-"),e.pages=e.pages.replace(/^\s*/,""),e.pages=e.pages.replace(/\s$/,""),e.pages=e.pages.replace(/--/,"-"),e.pages=e.pages.replace(/^pp?\.?\s*/,""),e.pages){var y=e.pages.match(/^(\d+)-(\d+)$/);if(y){var v=y[1],_=y[2];v.length>_.length&&(_=v.substring(0,v.length-_.length)+_,e.pages=v+"-"+_)}}e.pages.match(/n\/a/gi)&&delete e.pages}e.volume&&m.Utils.isString(e.volume)&&e.volume.match(/\d/)&&(e.volume=e.volume.replace(/\s*([Vv]olume|VOLUME|VOL|[Vv]ol|v)\s*\.?\s*/,"")),e.issue&&m.Utils.isString(e.issue)&&e.issue.match(/\d/)&&(e.issue=e.issue.replace(/\s*([Ii]ssue|ISSUE|[Nn]umber|NUMBER|NO|[Nn]o)\.?\s*/,"")),m.library.Date.extractDate(e,"","published"),m.library.Date.extractDate(e,"acc","accessed"),m.library.Date.extractDate(e,"filed","filed");var w=m.library.PublicationFields.authorFields();for(h=0;h<w.length;h++)if(T=w[h].name,e[T]&&m.Utils.isArray(e[T])){var P=e[T],S=[];for(r=0;r<P.length;r++)m.Utils.isString(P[r])&&(P[r]=m.library.Author.parseAuthor(P[r])),m.library.Author.autoClean(P[r]),""!==m.library.Author.toString(P[r])&&S.push(P[r]);e[T]=S}else if(e[T]&&m.Utils.isString(e[T])){P=[];(A=e[T]).split(/[,;]/g).forEach((function(e){var t=m.library.Author.parseAuthor(e);""!==m.library.Author.toString(t)&&P.push(t)})),e[T]=P}var C=m.library.PublicationFields.dateFields();for(h=0;h<C.length;h++)T=C[h].name,e[T]&&(e[T]=m.library.Date.autoClean(e[T]));if(e.journalfull&&!e.journal&&(e.journal=e.journalfull),e.journal){var A=e.journal;e.journal=A}var E=["title","booktitle","journal","abstract","publisher"];for(h=0;h<E.length;h++){var T=E[h],k={replacement:"",exclude:[]};h<=1&&(k.exclude=["i","b","sup","sub"]),void 0!==e[T]&&(e[T]=this.strip(e[T]),e[T]=m.String.stripHtml(e[T],k))}if(e.title&&(e.title=e.title.replace(/\.$/,""),e.title=e.title.replace(/\s+/g," ")),e.booktitle&&(e.booktitle=e.booktitle.replace(/\s+/g," ")),e.abstract){e.abstract=e.abstract.replace(/\s+/g," ");var x=/(\\){10,}/g;e.abstract.match(x)&&(e.abstract=e.abstract.replace(x,""))}if("PP_ARTICLE"===e.pubtype&&e.number&&!e.issue&&(e.issue=e.number,delete e.number),e.keywords&&m.Utils.isArray(e.keywords)&&(e.keywords=e.keywords.join("; ")),e.kind)this.checkKindField(e)||(e.kind="");else{var R=m.library.PublicationTypes.getTypeForPub(e);R&&R.subtypes&&(e.kind=R.defaultSubtype)}"PP_PATENT"===e.pubtype&&(e.patent_number&&e.patent_number.match(/^us\s*:?(.+)/i)?(e.patent_number=RegExp.$1,e.issuing_authority="USPTO",e.journal="US Patent",e.journalfull="United States Patent and Trademark Office"):e.patent_number&&e.patent_number.match(/^WO\s*:?(.+)/i)?(e.patent_number=RegExp.$1,e.issuing_authority="WIPO",e.journal="World Patent",e.journalfull="World Intellectual Property Organization"):e.patent_number&&e.patent_number.match(/^EP\s*:?(.+)/i)&&(e.patent_number=RegExp.$1,e.issuing_authority="EPO",e.journal="European Patent",e.journalfull="European Patent Office"),e.application_number&&(e.application_number=e.application_number.replace(/,/g,"")),e.journal||(e.journal="Patent"));var I=m.library.Patterns.applyPattern("{initial}",e);I.match(/[A-Z]/)||(I="Other");var L=["All Papers/"+I];e.starred&&L.push("Starred Papers"),e.subfolders=L,(e.attachments||[]).forEach((function(t){m.library.Attachment.autoClean(e,t)}));var D=this.isIncomplete(e),N=1==e.force_complete;e.incomplete=D&&!N?1:0,this.isEmptyPub(e)?(delete e.sha1,delete e.dup_sha1):(e.sha1=this.sha1(e),e.dup_sha1=this.dupSha1(e));var O=m.library.Patterns.applyPattern("{firstAuthor}{year}-{randomChars}",e);if(e.citekey){var U,M=e.citekey,F=M.replace(/-\S{2,3}$/,"");M.match(/(\S{2,3})$/)&&(U=RegExp.$1);var j=O.replace(/-\S{2,3}$/,"");O.match(/(\S{2,3})$/)&&RegExp.$1,j!==F&&(e.citekey=U?j+U:O)}else e.citekey=O;e.id_list=this.collectIdList(e),this.clearEmptyValues(e),e.autoCleaned=1},removeNonPubtypeSpecificFields:function(e){var t=[],r=["general","date","identifier","author"];if(m.library.PublicationFields.getFields().forEach((function(e){e.fieldType&&r.indexOf(e.fieldType)>-1&&t.push(e.name)})),e&&e.pubtype&&e.pubtype.match(/^PP_/)){var a={pubtype:1};for(var i in m.library.PublicationFields.getFieldsForPubType(e.pubtype).forEach((function(e){a[e.name]=1})),e)t.indexOf(i)>-1&&(a[i]||this.setEmpty(e,i))}},autoCleanLegalDocs:function(e){if(e.journal){var t=m.library.LegalAbbreviations.getReporterMap(!0),r=e.journal.toUpperCase().replace(/[\s\.]+/g,"");r in t&&(e.journalfull=t[r],e.journal=m.library.LegalAbbreviations.getAbbreviation(e.journalfull))}},isEmptyPub:function(e){return!e.title||(!e[m.library.Publication.getAuthorType(e)]||void 0)},checkValidityOfISSN:function(e){if(!e)return"";var t=e.toUpperCase().replace(/-/g,"");if((t=(t=t.replace(/\s+\(.+/,"")).replace(/^\s+/,"")).match(/^\d{7}[\dX]$/)){var r=t.split("");"X"==r[7].toUpperCase()&&(r[7]=10);for(var a=0,i=0;i<r.length;i++)a+=(8-i)*parseInt(r[i]);if(a%11==0)return 10==r[7]&&(r[7]="X"),r.slice(0,4).join("")+"-"+r.slice(4,8).join("")}return""},getAuthorArray:function(e){var t=m.library.Publication.getAuthorType(e);return e[t]?e[t]:[]},getIdentifierFieldNames:function(){return["arxivid","isbn","doi","patent_number","pmc","pmid","zbl","mr"]},hasIdentifier:function(e){var t=this.getIdentifierFieldNames(),r=!1;return t.forEach((function(t){e[t]&&(r=!0)})),r},collectIdList:function(e){var t=["sha1","dup_sha1"];t=t.concat(this.getIdentifierFieldNames()),"PP_BOOK"!=e.pubtype&&(t=m.Array.remove(t,"isbn"));for(var r=[],a=0;a<t.length;a++){var i=t[a];e[i]&&r.push(i+":"+e[i])}var n=this.links(e),o=e.crawl_urls||[],s=[];o.forEach((function(e){if(m.crawling.Proxy.isLoginUrl(e));else if(m.crawling.Proxy.isProxied(e)){var t=m.crawling.Proxy.deproxify(e);t&&t.cleanUrl&&s.push(t.cleanUrl)}else s.push(e)})),n=n.concat(s),0===(n=m.Array.filter(n,(function(e){return!(e.length>500)&&(!!m.Utils.isString(e)&&(!e.match(/scopus\.com\/scopus\/inward/i)&&!(!e.match(/\d+/)&&!e.match(/wikipedia.org\/wiki\/.+/i))))}))).length&&e.url&&e.url.length>0&&("PP_WEBSITE"===e.pubtype||"PP_VIDEO"===e.pubtype||"PP_NEWS_ARTICLE"===e.pubtype)?e.url.forEach((function(e){m.Utils.isString(e)&&!e.match(/\d/)&&(e.match(/\/\/.+\/.+\//)||e.match(/\/\/.+\/.*\?.+=/))&&n.push(e)})):0===n.length&&e.url&&1===e.url.length&&e.url.forEach((function(e){(m.Utils.isString(e)&&!e.match(/\d/)&&e.match(/\/\/.+\/.+\//)&&e.match(/pdf/i)||m.Utils.isString(e)&&!e.match(/\d/)&&e.match(/\/\/.+\/[^\/]+\.pdf$/))&&n.push(e)}));for(a=0;a<n.length;a++)r.push("url:"+n[a]);var l=e.webimport_sha1s||[];for(a=0;a<l.length;a++)r.push("webimport_sha1:"+l[a]);return e.original_id&&r.push("original_id:"+e.original_id),r=m.Array.stringUnique(r)},dupSha1:function(e){var t,r=[],a=["title","booktitle","author"];for(var i in a)if(a[i]){t=a[i];var n,o=m.library.PublicationFields.getFieldType(t);if("date"===o)n=m.library.Date.toString(e[t]);else if("author"===o){var s=[];e[t]&&e[t].length>=2?s=e[t].slice(0,2):e[t]&&e[t].length>0&&(s=e[t]),n=m.library.Author.toString(s,{output:"last",delim:" "})}else n=e[t];n&&(n=(n=(n=n.toLowerCase()).replace(/[\.,-\/#!$%\^&\*;:{}=\-_`~()]/g,"")).replace(/\s{2,}/g,""),r.push(n))}var l=r.join(" ");return m.library.Crypto.sha1(l)},sha1:function(e){var t,r=["title","booktitle","journal","author","editor","publisher","published"],a=[];for(var i in r)if(r[i]){t=r[i];var n,o=m.library.PublicationFields.getFieldType(t);(n="date"===o?m.library.Date.toString(e[t]):"author"===o?m.library.Author.toString(e[t]):e[t])&&a.push(n)}var s=a.join(" ");return m.library.Crypto.sha1(s)},strip:function(e){return e=(e=e.replace(/^\s*/,"")).replace(/\s*$/,"")},setEmpty:function(e,t){var r=m.library.PublicationFields.getField(t).dataType;e[t]="array"===r||"author"===r?[]:"object"===r||"date"===r?{}:""},getAuthorType:function(e){for(var t,r=["author","editor","series_editor","contributor","translator"],a=0;a<r.length;a++){var i=e[r[a]];if(i&&i.length>0){t=r[a];break}}return t},getAuthorById:function(e,t){for(var r=m.library.PublicationFields.getFields(),a=0;a<r.length;a++){var i=r[a].name;if("author"===r[a].dataType){var n=e[i];if(n&&m.Utils.isArray(n))for(var o=0;o<n.length;o++){var s=n[o];if(s._id===t)return s}}}},getJournalString:function(e){var t=this.getJournalField(e),r="";return t&&e[t]&&(r=e[t]),r},getJournalField:function(e){return"PP_CONFERENCE_PAPER"==e.pubtype||"PP_BOOK_CHAPTER"==e.pubtype||"PP_WEBSITE"==e.pubtype?"booktitle":"journal"},formatAuthors:function(e,t){var r=this.getAuthorType(e);if(r){var a=e[r];if(a){var i=m.library.Author.toString(a,t);return m.DOMPurify.purify(i,"authorextjs")}return""}return"[No author]"},formatAuthorYearJournal:function(e,t){void 0===t&&(t=!1);var r=this.formatAuthorYear(e),a=this.getJournalString(e),i=r;return a&&(t||(a='<span style="font-style:italic;">'+a+"</span>"),i+=" - "+a),m.DOMPurify.purify(i,"textonly")},formatAuthorYear:function(e,t){if(t=t||{},this.getAuthorType(e))var r=this.formatAuthors(e,{etAl:!0,output:"last",includeItalics:!1});else r=e.title||"[untitled item]",r=m.String.interconvertString(r,{format:"nomarkup"});var a=e.published||{},i=r+" "+m.library.Date.yearString(a),n=t.maxLength||40;return m.DOMPurify.purify(m.Utils.ellipsis(i,n,!1,"..."),"textonly")},formatYear:function(e){var t=e.published||{},r=m.library.Date.yearString(t);return""==r?"[no date]":m.DOMPurify.purify(r,"textonly")},formatAuthorYearLink:function(e){var t=this.formatAuthorYear(e),r=this.links(e);if(r.length>0){var a=r[0];return m.DOMPurify.purify(t+" "+a,"textonly")}return m.DOMPurify.purify(t,"textonly")},formatYearTitle:function(e){var t=m.library.Date.yearString(e.published||{}),r=e.title||"";return m.DOMPurify.purify(t+" &mdash; "+r,"textonly")},findAuthorById:function(e,t){for(var r=m.library.PublicationFields.authorFields(),a=0;a<r.length;a++){var i=r[a].name;if(e[i])for(var n=e[i],o=0;o<n.length;o++){var s=n[o];if(s._id===t)return s}}return null},toText:function(e){if(m.Utils.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(m.library.Publication.toText(e[r]));return t.join("\n")}e&&e.$className&&(e=e.serialize());var a="";return a+=void 0!==e._plugin?"["+e._plugin+"]":"",a+=m.Utils.ellipsis(e.title||"",40,!0,"..."),a+=" - ",a+=m.Utils.ellipsis(m.library.Publication.formatAuthors(e),20,null,"..."),a+=" - ",a+=m.library.Date.toString(e.published||""),a+=", ",a+=e.journal,m.DOMPurify.purify(a,"textonly")},convertHtmlEntitiesToUnicode:function(e){if(m.Utils.isObject(e))for(var t in e)if(void 0!==e[t]&&null!==e[t])if(m.Utils.isString(e[t]))e[t]=m.Utils.convertHtmlEntitiesToUnicode(e[t]);else if(m.Utils.isArray(e[t]))for(var r=0;r<e[t].length;r++)if(m.Utils.isObject(e[t][r]))for(var a in e[t][r])void 0!==e[t][r][a]&&null!==e[t][r][a]&&m.Utils.isString(e[t][r][a])&&(e[t][r][a]=m.Utils.convertHtmlEntitiesToUnicode(e[t][r][a]))},checkKindField:function(e){if(e){if("kind"in e){if("pubtype"in e){var t=m.library.PublicationTypes.getTypeForPub(e),r=[];if("subtypes"in t&&(r=t.subtypes),0===r.length)return!1;var a=!1;return r.forEach((function(t){"name"in t&&t.name===e.kind&&(a=!0)})),a}return!0}return!0}return!0},_collectLink:function(e,t,r){return{url:e,name:t,type:r}},collectLinks:function(e){for(var t,r,a=[],i=this.links(e),n=!1,o=0;o<i.length;o++){(b=i[o]).match("dx.doi.org")?(a.push(this._collectLink(b,"Website","website")),n=!0):b.match("nih.gov/pubmed")?(r=this._collectLink(b,"PubMed","db"),a.push(r)):b.match("arxiv.org")?a.push(this._collectLink(b,"arXiv","db")):b.match("nih.gov/pmc")?t=this._collectLink(b,"PMC","db"):b.match("mendeley.com")?a.push(this._collectLink(b,"Mendeley","db")):b.match("citeulike.org")?a.push(this._collectLink(b,"CiteULike","db")):b.match("inspirehep.net")?a.push(this._collectLink(b,"INSPIRE","db")):b.match("evernote")&&a.push(this._collectLink(b,"Evernote","db"))}if(!r&&t&&a.push(t),!n)for(o=0;o<i.length;o++){if(!((b=i[o]).match("dx.doi.org")||b.match("nih.gov/pubmed")||b.match("arxiv.org")||b.match("nih.gov/pmc")||b.match("mendeley.com")||b.match("citeulike.org")||b.match("inspirehep.net")||b.match("evernote"))){a.push(this._collectLink(b,"Website","website"));break}}if(e.source&&e.source.pdf_web_url){var s="PDF";m.Utils.isPdfRestricted(e.source.pdf_crawl_status)&&(s="PDF"),a.push(this._collectLink(e.source.pdf_web_url,s,"pdf"))}if(e.citedByLink&&a.push(this._collectLink(e.citedByLink,"Cited By","citedby")),m.Features.getPaperReferences()&&e.referencesLink&&a.push(this._collectLink(e.referencesLink,"References","refs")),e.patent_number){var l=e.patent_number,c=e.issuing_authority;if(l=l.replace(c,""),"US"===c){var u=e.patent_number,d="http://www.google.com/patents/"+(u=u.replace(/\s\S+$/,""));a.push(this._collectLink(d,"Google Patents","website"))}}if(e.xref){var p={};for(o=0;o<e.xref.length;o++){var h=e.xref[o];if(h.doi||h.pmid||h.url){s="";var g=!0;if("article"===h.type)s="Associated Paper";else if("commentin"===h.type.toLowerCase())s="Commentary",g=!1;else if("erratumin"===h.type.toLowerCase())s="Erratum";else if("commenton"===h.type.toLowerCase())s="Associated Paper",g=!1;else{if("cites"===h.type.toLowerCase())continue;if("data"!==h.type.toLowerCase())continue;s="Associated Data"}p[s]?p[s].push(h):p[s]=[h];var f=this.links(h);if(f.length>0){var b=f[0];g&&a.push(this._collectLink(b,s,"xref"))}else console.error("No link for xref",h)}else console.error("Xref without a good ID",h)}var y=p.Commentary;if(y){var v=m.Array.pluck(y,"pmid"),_="https://www.ncbi.nlm.nih.gov/pubmed?term="+(v=m.Array.map(v,(function(e){return e+"[PMID]"}))).join(" OR ");s="Commentary";y.length>1&&(s+=" ("+y.length+")"),a.push(this._collectLink(_,s,"xref"))}var w=p["Associated Paper"];if(w&&(w=m.Array.filter(w,(function(e){return null!=e.pmid}))).length>0){v=m.Array.pluck(w,"pmid"),_="https://www.ncbi.nlm.nih.gov/pubmed?term="+(v=m.Array.map(v,(function(e){return e+"[PMID]"}))).join(" OR "),s="Associated Paper";w.length>1&&(s+=" ("+w.length+")"),a.push(this._collectLink(_,s,"xref"))}}var P=!1,S=!1;return(a=m.Array.filter(a,(function(e){return("Website"!=e.name||!P)&&(("PubMed"!=e.name||!S)&&("Website"==e.name?P=!0:"PubMed"==e.name&&(S=!0),!0))}))).sort((function(e,t){var r={website:0,db:1,citedby:2,refs:3,pdf:4,xref:5};return r[e.type]>r[t.type]})),a},hasAnyUsefulMetadata:function(e){var t=m.library.Publication.getAuthorType(e),r=e.published||{},a=m.library.Date.yearString(r),i=e.title,n=e[t],o=e.journal;return i||n||o||a},isIncomplete:function(e){var t=m.library.Publication.getAuthorType(e),r=!1,a=e.published||{},i=m.library.Date.yearString(a),n=e.title,o=e[t],s=e.editor,l=e.journal,c=e.court,u=e.kind,d=e.legislative_body;return"PP_ARTICLE"===e.pubtype?(n&&o&&l&&i||(r=!0),u&&"Editorial"==u&&(r=!1,n&&l&&i||(r=!0))):"PP_WEBSITE"===e.pubtype?n||(r=!0):"PP_CASE"===e.pubtype?n&&l&&c||(r=!0):"PP_PERIODICAL"===e.pubtype?n||(r=!0):"PP_STATUTE"===e.pubtype||"PP_TREATY"===e.pubtype?n&&l||(r=!0):"PP_BILL"===e.pubtype?n&&d||(r=!0):"PP_LETTER"===e.pubtype||"PP_INTERVIEW"===e.pubtype||"PP_PERSONAL_COMMUNICATION"===e.pubtype?o&&s||(r=!0):n&&o||(r=!0),r},processGuruPub:function(e){var t=m.Utils.clone(e);return this.autoClean(t),t.source||(t.source={}),t.guru_id&&(t.source.guru_id=t.guru_id),t.subtitle&&"PP_BOOK"===t.pubtype&&(t.title?t.title=t.title+": "+t.subtitle:t.title=t.subtitle),this.nonSupportedGuruFields.forEach((function(e){delete t[e]})),t},preparePubForImport:function(e){var t=m.Utils.clone(e);return["num_volumes","num_pages"].forEach((function(e){e in t&&(t[e]=t[e].toString())})),["author","editor","series_editor","translator","contributor"].forEach((function(e){t[e]&&(t[e]=t[e].map((function(e){return delete e.level,delete e.bak,e.collective&&e.collective.length>0&&(delete e.first,delete e.last,delete e.initials,delete e.jr,delete e.orcid),e})))})),["published","accessed","filed","originally_published","conference_date"].forEach((function(e){t[e]&&(Object.keys(t[e]).forEach((function(r){["day","literal","month","season","unparsed","year"].indexOf(r)>-1?null===t[e][r]||""===t[e][r]?delete t[e][r]:t[e][r]&&(t[e][r]=t[e][r].toString()):delete t[e][r]})),0===Object.keys(t[e]).length&&delete t[e])})),["image_url","imageurl","owner","_compleDetailsCalled","_pi_i"].concat(this.nonSupportedGuruFields).forEach((function(e){delete t[e]})),t},extractDoi:function(e){return e.match(/(10\.\d\d\d\d\S+)/)?this.cleanDoi(RegExp.$1):null},cleanDoi:function(e){return e=e.replace(/\/$/,"")},getMissingFields:function(e){var t=e.pubtype,r=[];return("PP_ARTICLE"===t?["title","author","journal","year"]:["title","author"]).forEach((function(t){if("author"===t){var a=m.library.Publication.getAuthorType(e);e[a]||r.push(t)}else if("year"===t){var i=e.published||{};m.library.Date.yearString(i)||r.push("published")}else e[t]||r.push(t)})),r},isAutocompleted:function(e){return 1===e.autocompleted},hasWebsiteLink:function(e){this.collectLinks(e);return!!this.getWebsiteLink(e)},getWebsiteLink:function(e){var t;return this.collectLinks(e).forEach((function(e){"Website"!==e.name||t||(t=e)})),t},getBibTeXkey:function(e,t){null==t&&(t={});var r=e.citekey;if(e.user_citekey&&(r=e.user_citekey),t.use_original_citekey&&e.original_citekey){var a=!1;e.source&&m.Utils.isObject(e.source)&&null!==e.source?"file import"===e.source.type&&(a=!0):a=!0,a&&(r=e.original_citekey)}return void 0===r&&(r="dummy_key"),r},getEndNoteCitation:function(e){if(this.getAuthorType(e))var t=this.formatAuthors(e,{etAl:!1,output:"last",includeItalics:!1});else t=e.title||"[untitled item]",t=m.String.interconvertString(t,{format:"nomarkup"});t=t.split(",")[0];var r=e.published||{};return t+", "+m.library.Date.yearString(r)+", "+e.cite_alias},hasPdf:function(e){if(this.getPdfAttachment(e))return!0},applyIdentifiersToNewPub:function(e,t){if(e._id&&(t._id=e._id),e.citekey&&(t.citekey=e.citekey),e.gs_cluster_id&&(t.gs_cluster_id=e.gs_cluster_id),e.crawl_urls&&m.library.Publication.addCrawlUrls(t,e.crawl_urls),e.url)for(var r=0;r<e.url.length;r++)this.addUrl(t,e.url[r]);e.source&&(m.Utils.merge(t.source,e.source),e.source.pdf_web_url&&(this.addCrawlUrls(t,[e.source.pdf_web_url]),this.addUrl(t,e.source.pdf_web_url))),void 0!==e.starred&&(t.starred=e.starred),e.attachments&&(t.attachments=m.Utils.clone(e.attachments)),this.autoClean(t)},applyTitleToNewPub:function(e,t){["title","booktitle"].forEach((function(r){var a=e[r]||"",i=t[r]||"";a&&a!=i&&(m.String.interconvertString(a,{format:"nomarkup"})==m.String.interconvertString(i,{format:"nomarkup"})&&r in t&&(t[r]=e[r]))}))},applyKeywordsToNewPub:function(e,t){if(e.keywords){var r="";if(t.keywords){var a={};e.keywords.split(/[;,]/).forEach((function(e){e=(e=e.replace(/^[\t\n\s]+/g,"")).replace(/[\t\n\s]+$/g,""),a[e.toUpperCase()]=e}));var i=[];t.keywords.split(/[;,]/).forEach((function(e){e=(e=e.replace(/^[\t\n\s]+/g,"")).replace(/[\t\n\s]+$/g,""),a[e.toUpperCase()]||(a[e.toUpperCase()]=e,i.push(e))})),i.length>0&&(r="; "+i.join("; "))}t.keywords=e.keywords+r}},applyAllOtherAttributesToNewPub:function(e,t){e&&t&&e.pubtype==t.pubtype&&m.library.PublicationFields.getFieldsForPubType(e.pubtype).forEach((function(r){"general"!=r.fieldType&&"author"!=r.fieldType||r.name in e&&!(r.name in t)&&e[r.name]&&(t[r.name]=m.Utils.clone(e[r.name]))}))},getGuruMatchPub:function(e){var t={},r={string:["pubtype","kind","title","booktitle","journal","journalfull","issn","issn_alt","isbn","isbn_alt","doi","pmid","pmc","arxivid","volume","issue","pages","publisher"],author:["author","editor"],date:["published"],url:["url"]};return Object.keys(r).forEach((function(a){r[a].forEach((function(r){if(r in e&&null!==e[r])if(t[r]=m.Utils.clone(e[r]),"string"===a)t[r]=t[r].toString();else if("author"===a&&m.Utils.isArray(t[r]))for(var i=0;i<t[r].length;i++)Object.keys(t[r][i]).forEach((function(e){["last","collective","first"].indexOf(e)>-1?t[r][i][e]=t[r][i][e].toString():delete t[r][i][e]})),t[r][i].collective&&(delete t[r][i].last,delete t[r][i].first),""===t[r][i].first&&t[r][i].last&&t[r][i].last.length>0&&(delete t[r][i].first,t[r][i].collective=t[r][i].last,delete t[r][i].last),""===t[r][i].last&&t[r][i].first&&t[r][i].first.length>0&&(delete t[r][i].last,t[r][i].collective=t[r][i].first,delete t[r][i].first);else if("date"===a)Object.keys(t[r]).forEach((function(e){["day","month","year"].indexOf(e)>-1?(t[r][e]=t[r][e].toString(),0===t[r][e].length&&delete t[r][e]):delete t[r][e]})),0===Object.keys(t[r]).length&&delete t[r];else if("url"===a&&m.Utils.isArray(t[r]))for(i=0;i<t[r].length;i++)t[r][i]=t[r][i].toString();else delete t[r]}))})),t},getXML:function(){var e=this,t='<?xml version="1.0" encoding="UTF-8"?>\n';return t+="<pubtypes>\n",m.library.PublicationTypes.getPubTypes().forEach((function(r){t+="  <pubtype "+e.formatXMLattr({id:r.id,label:r.label,description:r.description})+">\n",t+="    <subtypes>\n",r.subtypes&&r.subtypes.forEach((function(e){t+='      <subtype name="'+m.Utils.escapeXML(e.name)+'" />\n'})),t+="    </subtypes>\n",t+="    <fields>\n",m.library.PublicationFields.getFieldsForPubType(r.id,{includeAll:!0}).forEach((function(r){t+="    <field "+e.formatXMLattr({name:r.name,label:r.label||"",help:r.help||"",type:r.fieldType,mandatory:r.mandatory})+"/>\n"})),t+="    </fields>\n",t+="  </pubtype>\n"})),t+="</pubtypes>\n"},formatXMLattr:function(e){var t=[];for(var r in e)t.push(r+'="'+m.Utils.escapeXML(e[r])+'"');return t.join(" ")}}),m.library.Publication=new m.library._Publication,m.library._Render=m.Class.extend({renderPub:function(e,t){t=m.Utils.apply({renderType:"autocomplete",searchTerms:""},t);var r=m.Utils.clone(e);r=m.DOMPurify.purifyPubObject(r);var a=t.renderType;return"autocomplete"===a?this.renderAutocomplete(r,t):"citation-grid-view"===a?this.renderCitationGridView(r,t):"citation-details"===a?this.renderCitationDetails(r,t):"pubview-error"===a?this.renderPubViewError(r,t):"addon"===a?this.renderAddon(r,t):"pubmed"===a?this.renderPubMed(r,t):"word"===a?this.renderWord(r,t):"bibguru"===a?this.renderBibguru(r,t):this.renderAuthorYearJournal(r,t)},renderAutocomplete:function(e,t){return['<div class="pp-paper-panel-item pp-cite-autocomplete">','  <div class="pp-paper-panel-title">',this.formatTitle(e,t),"  </div>",'  <div class="pp-paper-panel-authors">',this.formatAuthors(e,t),"  </div>",'  <div class="pp-paper-panel-reference">',this.formatReferenceLine(e,t),"  </div>",this.formatSnippets(e,t),"</div>"].join("")},renderAddon:function(e,t){return['<div class="pp-paper-panel-item pp-cite-autocomplete">','  <div class="pp-paper-panel-title">',this.formatTitle(e,t),"  </div>",'  <div class="pp-paper-panel-authors">',this.formatAuthors(e,t),"  </div>",'  <div class="pp-paper-panel-reference">',this.formatReferenceLine(e,t),this.getAddonEditLink(e,t),"  </div>",this.formatSnippets(e,t),'<div class="pp-search-item-button"></div><div class="dot-spinner"><div class="bounce1"></div><div class="bounce2"></div> <div class="bounce3"></div></div>',"</div>"].join("")},renderWord:function(e,t){return['<div class="pp-title">',this.formatTitle(e,t),"  </div>",'  <div class="pp-authors">',this.formatAuthors(e,t),"  </div>",'  <div class="pp-reference">',this.formatReferenceLine(e,t),"  </div>",this.formatSnippets(e,t)].join("")},renderBibguru:function(e,t){return['<div class="pp-title">',this.formatTitle(e,t),"  </div>",'  <div class="pp-authors">',this.formatAuthors(e,t),"  </div>",'  <div class="pp-reference">',this.formatReferenceLine(e,t),"  </div>",this.formatSnippets(e,t)].join("")},renderPubMed:function(e,t){var r=e.titleDisplay||e.title||"Untitled Item";r=m.String.interconvertString(r,{format:"html"});var a="";return e.abstractDisplay&&(a='<div class="pp-pubview-abstract">'+e.abstractDisplay+"</div>"),['<div class="pp-paper-panel-item pp-cite-autocomplete">','  <div class="pp-paper-panel-title">','<div class="pp-grid-title"><span class="pp-grid-titletext">'+r+"</span></div>","  </div>",'  <div class="pp-paper-panel-authors">',this.formatAuthors(e,t),"  </div>",'  <div class="pp-paper-panel-reference">',this.formatReferenceLine(e,t),"  </div>",a,"</div>"].join("")},renderCitationGridView:function(e,t){return['<div class="'+this.getClasses(e,t)+'">','  <div class="pp-grid-cursorblock"></div>','  <div class="pp-grid-content pp-grid-collapsed">',"    <div>",this.formatTitle(e,t),'        <div class="pp-grid-authors">',this.formatAuthors(e,t),"        </div>",'        <div class="pp-grid-reference">',this.formatReferenceLine(e,t),"        </div>",'        <div class="pp-paper-panel-library-info">',this.getOwnerMessage(e,t),this.getEditLink(e,t),this.getLinkToPaperpile(e,t),"      </div>","    </div>","  </div>","</div>"].join("")},renderCitationDetails:function(e,t){return['<div class="pp-paper-panel-item">','  <div class="pp-paper-panel-title">',this.formatTitle(e,t),"  </div>",'  <div class="pp-paper-panel-authors">',this.formatAuthors(e,t),"  </div>",'  <div class="pp-paper-panel-reference">',this.formatReferenceLine(e,t),"  </div>",'  <div class="pp-paper-panel-library-info">',this.getOwnerMessage(e,t),this.getCiteDetailsLinkToPaperpile(e,t),"  </div>","</div>"].join("")},renderPubViewError:function(e,t){var r="";e&&(r=['<div class="pp-pubview-pub">','  <div class="pp-paper-panel-item">','    <div class="pp-paper-panel-title">',this.formatTitle(e,t),"    </div>",'    <div class="pp-paper-panel-authors">',this.formatAuthors(e,t),"    </div>",'    <div class="pp-paper-panel-reference">',this.formatReferenceLine(e,t),"    </div>","  </div>",this.formatPubViewAbstract(e,t),"</div>"].join(""));var a=!1;e&&m.Session.get("user_id")&&e.owner==m.Session.get("user_id")&&(a=!0);var i,n='visit <a class="pp-link" href="'+m.Globals.url("/h/guide-google-drive/")+'" target="_blank">Troubleshooting</a> for help.';return i=!0===a&&!0===t.isExtensionAvailable?'Please try again, contact <a class="pp-link" fn="contactSupport">Paperpile support</a> or '+n:a?"Please try again or "+n:"Please try again, contact the item's owner or "+n,['<div class="pp-pubview-error">',"  <p>"+t.errorMessage+"</p>","  <p>"+i+"</p>","</div>",r].join("")},renderAuthorYearJournal:function(e,t){return[m.library.Publication.formatAuthorYear(e),e.journal].join(", ")},getClasses:function(e,t){var r=["pp-grid-item"];return 1===e.view_context_open&&r.push("pp-grid-context-open"),1===e.view_pdf_context_open&&r.push("pp-grid-pdf-context-open"),(e.view_state.open_panel||e.view_state.search_open_panel)&&(r.push("pp-grid-panel-open"),e.view_state.open_panel&&r.push("pp-grid-panel-open-"+e.view_state.open_panel),e.view_state.search_open_panel&&r.push("pp-grid-panel-open-"+e.view_state.search_open_panel)),m.library.Publication.isIncomplete(e)&&r.push("pp-grid-incomplete"),t.extraClasses&&(r=r.concat(t.extraClasses)),r.join(" ")},formatAddToCitationSection:function(e,t){var r="pp-paper-panel-add";return e.addedToCitation?r="pp-paper-panel-add pp-paper-panel-added":e.addingToCitation&&(r="pp-paper-panel-add pp-paper-panel-adding"),['  <div class="'+r+'" ','action="ADD_TO_CITATION"',"></div>"].join("")},getOwnerMessage:function(e,t){var r=m.Session.get("user_id"),a=e.owner,i=e.owner_email,n=e.owner_name,o="";o=r===a?"Added by you":n?"Added by "+n:i?"anonymous@example.com"===i?"Added by an anonymous collaborator":"Added by "+i:"Added by another user";var s="",l=e.created;if(l){var c=new Date(1e3*l);s="Added "+m.library.Date.fromNow(c)}return['<div class="pp-cite-details-user" ppTip="'+s+'">',o,"</div>"].join("")},getTweetStyleTime:function(e,t){t=t||new Date,e=new Date(e).valueOf(),t=new Date(t).valueOf();var r=Math.round(Math.abs(t-e)/60/1e3),a=Math.round(Math.abs(t-e)/1e3),i=Math.round(Math.abs(t-e)/60/1e3/60),n=Math.round(Math.abs(t-e)/60/1e3/60/24);return r<2?a<60?a+"s":"1m":r<60?r+"m":r<1440?Math.round(r/60)+"h":i<48?Math.round(i)+"h":n<7?Math.round(n)+"d":void((new Date).getYear()==new Date(e).getYear()?m.library.Date.format(e,"D MMM"):m.library.Date.format(e,"D MMM YY"))},getEditLink:function(e,t){return['<div class="pp-action-container">','<span class="pp-link pp-action" action="EDIT">Edit</span>'," / ",'<span class="pp-link pp-action" action="CITEVIEW_DELETE">Delete</span>',"</div>"].join("")},getCiteDetailsLinkToPaperpile:function(e,t){var r=m.Session.get("user_id"),a=e.owner;if(r&&r===a)return['<div class="pp-cite-details-linkout">','<a class="pp-link" ','cite_alias="'+e.cite_alias+'" source_id="'+e.source_id+'" ','action="OPEN_CITATION_IN_PAPERPILE"',">Open in Paperpile</a>","</div>"].join("");var i=m.write.CitationStore.documentSettings;return i?['<div class="pp-cite-details-linkout">','<a target="_blank" class="pp-link" href="'+(m.Globals.getUrlBase()+"/c/"+i.doc_alias+"/"+e.cite_alias+"?id="+i._id)+'">View / edit reference</a>',"</div>"].join(""):""},getAddonEditLink:function(e,t){var r;m.Session.get("user_id"),e.owner;return e&&e.source&&(r=e.source.quick_result_plugin),r&&"local"!==e._searchSource?'<div class="pp-webresult-byline"><span class="pp-paper-panel-source">From '+r+' </span> <div class="pp-details-link-container"><span class="pp-details-link" forid="'+e._id+'" id="info-panel-toggle-'+e._id+'" >&hellip;</span></div></div>':'<div class="pp-details-link-container"><span class="pp-details-link" forid="'+e._id+'" id="info-panel-toggle-'+e._id+'" >&hellip;</span></div>'},getLinkToPaperpile:function(e,t){var r,a=m.Session.get("user_id"),i=m.Globals.isChrome(),n=!0;e.source&&(e.source.quick_result_status,r=null!=e.source._existing_pub_data);var o,s,l=e.owner;if(a&&i){if(a&&a===l)o="pp-exists",s="OPEN_CITATION_IN_PAPERPILE","Open in Paperpile","You cited this paper.<br/>Click to open in Paperpile";else if(r)o="pp-exists",s="OPEN_CITATION_IN_PAPERPILE","Open in Paperpile","You have this paper in your library.<br/>Click to open in Paperpile";else if(a&&a!==l){var c=e.source.quick_result_status;c&&c.match(/ready/i)?(o="pp-ready",s="ADD_CITATION_TO_PAPERPILE","Add to Library","Click to copy this paper to your library"):c&&c.match(/working/i)?(o="pp-working",s="","Adding...",""):c&&c.match(/error/i)?(o="pp-error",s="REPORT_CITATION_ADD_ERROR","Error","Something went wrong &mdash; click to report this error."):c&&c.match(/success/i)&&(o="pp-success",s="OPEN_CITATION_IN_PAPERPILE","Added to Library","Added successfully.<br/>Click to open in Paperpile")}}else n=!1,o="pp-ready",s="SHOW_MARKETING_DIALOG","Add to My Library","Get Paperpile to add papers<br/>to your personal web library";if(!n)return"";var u="";if("ADD_CITATION_TO_PAPERPILE"==s||"OPEN_CITATION_IN_PAPERPILE"==s){var d=m.Utils.clone(e);["autoCleaned","citekey","cite_alias","collection_timestamps","count_index","created","duplicates","dup_sha1","external_pdf_filename","folders","id_list","imported","incomplete","journal_checked","labels","owner","owner_email","owner_name","sha1","shared_folders","source","source_id","subfolders","updated","webimport_sha1s","pdf_restricted","crawl_urls","attachments","editing_note"].forEach((function(e){delete d[e]})),Object.keys(d).forEach((function(e){/^dup_/.test(e)&&delete d[e],/^_/.test(e)&&delete d[e],/^view_/.test(e)&&delete d[e]})),u='<script class="pubjson" id="'+e.source_id+'" type="application/json">'+JSON.stringify(d,null,0)+"<\/script>"}return['<div class="pp-citations-container '+o+'" style="display:inline-block">',u,"</div>"].join("")},selectionTickOnly:function(e){return['<div class="pp-grid-grabstar-wrap">',this.selectionTickRegion(e),"</div>"].join("")},grabRegion:function(e){return'<div class="pp-grid-grab"><span class="icon" ppTip="Drag to add a folder or label"></span></div>'},starRegion:function(e){return e.starred?'<span class="pp-grid-star pp-star-filled pp-grid-button" action="TOGGLE_STAR"><span class="icon"></span></span>':'<span class="pp-grid-star pp-grid-button" action="TOGGLE_STAR"><span class="icon"></span></span>'},selectionTickRegion:function(e){return'<div class="pp-grid-selection-tick pp-grid-button" action="TOGGLE_SELECTION"><span class="icon"></span></div>'},searchIconRegion:function(e){if("snippets"===e.view_state.search_open_panel)return['<div class="pp-grid-snippet">',"</div>"].join("")},formatSnippets:function(e,t){m.library.Snippets.createSnippets(e,t);var r=[];return e.snippets?(e.snippets.forEach((function(e){var t='<div class="raster-u-22-24 pp-snippet-text">'+('<span class="pp-snippet-type">'+e.type+"</span>")+e.text+"</div>";r.push(['<div class="pp-snippet raster">','<div class="raster-u-1-24"></div>',t,"</div>"].join(""))})),['<div class="pp-grid-snippet-container">',r.join(""),"</div>"].join("")):""},formatTitle:function(e,t){var r,a,i=e.title||"Untitled Item";"Untitled Item"==i&&("PP_LETTER"==e.pubtype||"PP_PERSONAL_COMMUNICATION"==e.pubtype?"editor"in e&&e.editor.length&&(r=e.editor[0]):"PP_INTERVIEW"==e.pubtype&&"author"in e&&e.author.length&&(r=e.author[0]),r&&(r.first&&r.last?a=r.first+" "+r.last:r.initials&&r.last?a=r.initials+" "+r.last:r.collective?a=r.collective:r.last&&(a=r.last),a&&("PP_LETTER"==e.pubtype&&(i="Letter to "),"PP_PERSONAL_COMMUNICATION"==e.pubtype&&(i="Personal communication with "),"PP_INTERVIEW"==e.pubtype&&(i="Interview with "),i+=a)));i=m.String.interconvertString(i,{format:"html"}),i=this.highlight(i,t);var n="",o="";t.includeActions&&(e.abstract&&(n="pp-grid-clickable-title",o="abstract"===(e.view_state||{}).open_panel?'onlyonclick="true" action="GRID_CLOSE_ABSTRACT"':'onlyonclick="true" action="GRID_OPEN_ABSTRACT"'));var s=e.title?"":"pp-grid-no-title";return"PP_LETTER"!=e.pubtype&&"PP_PERSONAL_COMMUNICATION"!=e.pubtype&&"PP_INTERVIEW"!=e.pubtype||"Untitled Item"!=i&&(s=""),['<div class="pp-grid-title '+s+'">',"<span "+o+' class="pp-grid-titletext '+n+'">'+i+"</span>","</div>"].join("").replace(/\s+/g," ").replace(/\s+"/g,'"')},formatAuthors:function(e,t){var r={prefix:'<span class="pp-author">',suffix:"</span>",delim:", ",output:"display",othersString:"&hellip;"},a={prefix:"",suffix:"",delim:", ",output:"display",othersString:"..."},i=parseInt(80/6)+1,n={author:[],editor:[],contributor:[],series_editor:[],translator:[]};for(var o in n)e[o]&&(n[o]=e[o].slice(0,i>e[o].length?e[o].length:i));var s,l=m.library.Publication.formatAuthors(n,r),c=m.library.Publication.getAuthorType(n);if(c){for(var u=n[c],d=[],p=0;p<u.length;p++){var h=u[p];if("et al."===h.collective)d.push(h);else{if(""===m.library.Author.toString(h))continue;d.push(h)}}u=d,s=m.library.Author.toString(u,a);u.length;for(var g=u.length,f=0;s.length>80;){g--;var b=u.slice(0,g);f=u.slice(g,u.length).length,s=[m.library.Author.toString(b,a),f>0?" et al.":""].join(""),l=[m.library.Author.toString(b,r),f>0?" <i>et al.</i>":""].join("")}}return"[No author]"===l?"":(t.allowShortStrings=!0,this.highlight(l,t))},formatReferenceLine:function(e,t){var r;e&&e.source&&(r=e.source.quick_result_plugin);var a="";r&&t&&!e.cite_alias&&"citation-grid-view"!==t.renderType&&"addon"!==t.renderType&&"local"!=e._searchSource&&(a=['<span class="pp-paper-panel-source">'," from "+r,"</span>"].join(""));var i=!1,n=this.formatJournal(e,t);!n&&e.publisher?n=e.publisher:n||("PP_BOOK"===e.pubtype?(n="No publisher",i=!0):"PP_WEBSITE"===e.pubtype?e.url&&e.url.length>0&&(n=e.url[0].replace(/([\.\/_])/g,"$1<wbr>")):"PP_LETTER"===e.pubtype||"PP_MAP"===e.pubtype||"PP_STANDARD"===e.pubtype||"PP_FIGURE"===e.pubtype||"PP_PRESENTATION"==e.pubtype||"PP_COMPUTER_PROGRAM"==e.pubtype||"PP_MANUAL"==e.pubtype||"PP_PERSONAL_COMMUNICATION"==e.pubtype||"PP_UNPUBLISHED"==e.pubtype||"PP_MISC"==e.pubtype?n="":"PP_BILL"==e.pubtype?n=e.legislative_body?e.legislative_body:"":(n="No journal",i=!0));var o=i?" pp-paper-panel-empty":"",s=[this.surroundIf('<span class="pp-paper-panel-journal'+o+'">',n,"</span>"),this.surroundIf('<span class="pp-paper-panel-year'+o+'">',this.formatYear(e,t),"</span>")],l=[a,this.surroundIf('<span class="pp-paper-panel-citedby">',this.formatCitedBy(e,t),"</span>")];return[(s=s.filter((function(e){return""!=e}))).join(", "),(l=l.filter((function(e){return""!=e}))).join('<span class="pp-paper-panel-sep">|</span>')].join(" ").replace(/\s+$/,"").replace(/\s+/g," ")},formatEditLink:function(e,t){return e.cite_alias?e.cite_alias:""},formatPubViewAbstract:function(e,t){return e.abstract?['<div class="pp-pubview-abstract">',e.abstract,"</div>"].join(""):""},surroundIf:function(e,t,r){return t?e+t+r:""},formatCitedBy:function(e,t){return void 0!==e.gs_cited_by_count?"cited by "+e.gs_cited_by_count:void 0!==e.pubmed_cited_by_count?"cited by "+e.pubmed_cited_by_count:""},formatYear:function(e,t){var r=e.published||{},a=m.library.Date.yearString(r);return a=this.highlight(a,t)},formatJournal:function(e,t){var r="";return r="PP_CONFERENCE_PAPER"==e.pubtype||"PP_WEBSITE"==e.pubtype?e.booktitle:"PP_BOOK_CHAPTER"==e.pubtype?m.String.interconvertString(e.booktitle,{format:"html"}):"PP_THESIS"==e.pubtype?e.school:"PP_MANUSCRIPT"==e.pubtype?e.series:"PP_ARTWORK"==e.pubtype||"PP_REPORT"==e.pubtype?e.institution:"PP_LETTER"==e.pubtype||"PP_MAP"===e.pubtype||"PP_STANDARD"===e.pubtype||"PP_FIGURE"===e.pubtype||"PP_PRESENTATION"==e.pubtype||"PP_COMPUTER_PROGRAM"==e.pubtype||"PP_MANUAL"==e.pubtype||"PP_PERSONAL_COMMUNICATION"==e.pubtype||"PP_UNPUBLISHED"==e.pubtype||"PP_MISC"==e.pubtype?"":e.journal,r=this.highlight(r,t)},highlight:function(e,t){if(!e||""==e)return e;if(!t.searchTerms)return e;var r,a,i=(t=t||{}).searchTerms,n=[];i&&(n=i.split(/\s+/)),n=m.Array.filter(n,(function(e){return!(!0!==t.allowShortStrings&&e.length<=2)&&(""!==e||void 0)}));for(var o=0;o<n.length;o++)n[o]=m.Utils.removeQuotationMarksAndPunctation(n[o]);n=m.Array.unique(n.sort((function(e,t){return t.length-e.length})));for(o=0;o<n.length;o++)r=(a=n[o].replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")).length<=2?new RegExp("(<\\/?\\w+(\\s+\\w+(\\s*=\\s*(\"[^\"]*\"|'[^']*'|\\S+))?)*>)|\\b("+a+")\\b","ig"):new RegExp("(<\\/?\\w+(\\s+\\w+(\\s*=\\s*(\"[^\"]*\"|'[^']*'|\\S+))?)*>)|("+a+")","ig"),e=this.replaceOutsideTags(e,r);return e},replaceOutsideTags:function(e,t){return e=e.replace(t,(function(e,t,r,a,i,n){return t||'<span class="pp-grid-highlight">'+(n=n.replace(/<\//g,""))+"</span>"}))}}),m.library.Render=new m.library._Render,m.library._Serialization=m.Class.extend({serialize:function(e,t){for(var r=m.library.PublicationFields.getFields(),a={},i=0;i<r.length;i++){var n=r[i],o=r[i].name,s=m.library.PublicationFields.getFieldType(o),l=m.library.PublicationFields.getDataType(o);if(!1!==n.export_persist)if("author"===s){var c=e[o];c&&c.length>0&&(a[o]=m.library.Author.toString(c,{delim:"; ",output:"serialize"}),e[o+"_origString"]=a[o])}else if("date"===s){var u=e[o];u&&(a[o]=m.library.Date.toString(u,t),e[o+"_origString"]=a[o])}else if("array"===l){var d=e[o];d&&m.Utils.isArray(d)&&d.length>0&&(a[o]=d.join("\n"),e[o+"_origString"]=a[o])}else void 0!==e[o]&&(a[o]=e[o]+"")}for(var p in a)if(!m.Utils.isString(a[p]))throw new Error("Key "+p+" in serialized pub is not a string!");return m.Utils.clone(a)},unserializeField:function(e,t){var r=m.library.PublicationFields.getFieldsMap()[e];if(!r)return console.log("Field not found",e),t;parseOptions={delimiter:";",familyNameFirst:!1};var a=r.fieldType,i=r.dataType;return"array"!==i||""!==t?"author"===a?m.library.Author.parseAuthorList(t,parseOptions):"date"===a?m.library.Date.parseDate(t):"array"===i?t.split(/\n/g):t:void 0},unserialize:function(e,t){e=m.Utils.clone(e);var r={};void 0===t&&(t={delimiter:";",familyNameFirst:!1});for(var a=m.library.PublicationFields.getFields(),i=0;i<a.length;i++){var n=a[i].name,o=a[i].fieldType,s=a[i].dataType;if(void 0!==e[n]){if("array"===s&&""===e[n]){r[n]=void 0;continue}if("author"===o){var l=m.library.Author.parseAuthorList(e[n],t);r[n]=l}else if("date"===o){l=m.library.Date.parseDate(e[n]);r[n]=l}else if("array"===s){var c=e[n].split(/\n/g);r[n]=c}else r[n]=e[n]}}return r}}),m.library.Serialization=new m.library._Serialization,m.library._Snippets=m.Class.extend({createSnippets:function(e,t){var r=[],a=(t.searchTerms||"").split(/\s+/);if((a=m.Array.filter(a,(function(e){if(""!==e)return!0}))).length>0){var i=[];a.forEach((function(e){e=m.Utils.escapeRegex(e),i.push(new RegExp(e,"ig"))}));for(var n=!0,o=m.library.Publication.formatAuthors(e,{delim:",",output:"display"}),s=0;s<i.length;s++){var l=i[s];if(!(l.test(e.title)||l.test(e.journal)||l.test(o))){n=!1;break}}if(!1===n){var c,u;if(e.abstract)c=(c=(c=e.abstract).replace(/(<([^>]+)>)/g,"&nbsp;")).replace(/&nbsp;/g," "),(u=this.getSnippet(i,c,t))&&(u.type="Abstract",r.push(u));if(e.note)c=(c=(c=e.note).replace(/(<([^>]+)>)/g,"&nbsp;")).replace(/&nbsp;/g," "),(u=this.getSnippet(i,c,t))&&(u.type="Notes",r.push(u));r.length>0&&(e.snippets=r,e.view_state&&(e.view_state.search_open_panel="snippets"))}else e.view_state&&delete e.view_state.search_open_panel}else e.view_state&&delete e.view_state.search_open_panel;return r},getSnippet:function(e,t,r){for(var a=[],i=0;i<e.length;i++)for(var n,o=e[i];null!==(n=o.exec(t));){var s=n.index,l=n[0].length,c={};c[n[0]]=1;var u={left:s,right:s+l,tokens:c};a.push(u)}this.mergeMatches(a,30),a.sort((function(e,t){var r=Object.keys(e.tokens).length;return Object.keys(t.tokens).length-r}));var d=[],p={},h={};for(i=0;i<a.length;i++){for(var g=a[i],f=!1,b=Object.keys(g.tokens),y=0;y<b.length;y++)if(!p[b[y]]){f=!0;break}f&&(d.push(this.getTextRange(g,t)),m.Utils.apply(p,g.tokens),h[i]=1)}for(i=0;i<a.length;i++){g=a[i];if(!h[i]){var v=this.getTextRange(g,t),_=v[1]-v[0];if(this.getCombinedLength(d)+_>=350)break;d.push(v)}}d.sort((function(e,t){return e[0]-t[0]})),this.mergeRanges(d);var w=[];d.forEach((function(e){var a=t.substring(e[0],e[1]);a=m.library.Render.highlight(a,r),w.push(a)}));var P='<span class="pp-snippet-ellipsis">&hellip;</span>',S=P+" "+w.join(" "+P+" ")+P;return w.length>0?{text:S}:null},getCombinedLength:function(e){var t=0;return e.forEach((function(e){t+=e[1]-e[0]})),t},getTextRange:function(e,t){var r,a;r=Math.max(0,e.left-500),a=e.left;var i=t.substring(r,a).split("").reverse().join(""),n=this.expandOnPunctuation(i,5,15),o=e.left-n;r=e.right,a=Math.min(t.length,e.right+500);var s=t.substr(r,a),l=this.expandOnPunctuation(s,5,15);return[o,e.right+l]},expandOnPunctuation:function(e,t,r){for(var a=e.split(/[\.,;!\?]/),i=0,n=0,o=0;o<a.length;o++)for(var s=a[o].split(/\s+/),l=i+s.length,c=0;c<s.length;c++){if(i>t&&l>r)return n-1;if(i>r)return n-1;i++,n+=s[c].length+1}return n},mergeRanges:function(e){for(var t=0;t<e.length;t++)for(var r=t+1;r<e.length;r++){var a=e[t],i=e[r],n=!1;if(this.rangesOverlap(a,i)&&(n=!0),n){e.splice(t,1),e.splice(r-1,1);var o=[];return o[0]=Math.min(a[0],i[0]),o[1]=Math.max(a[1],i[1]),e.push(o),void this.mergeRanges(e)}}},rangesOverlap:function(e,t){var r=e[0]-0,a=e[1]+0,i=t[0]-0,n=t[1]+0;return r>i&&r<n||i>r&&i<a},mergeMatches:function(e,t){e.length;for(var r=0;r<e.length;r++)for(var a=r+1;a<e.length;a++){var i=e[r],n=e[a],o=!1;if(this.matchesOverlap(i,n,t)&&(o=!0),o){e.splice(r,1),e.splice(a-1,1);var s={};return m.Utils.apply(s,i.tokens),m.Utils.apply(s,n.tokens),e.push({left:Math.min(i.left,n.left),right:Math.max(i.right,n.right),tokens:s}),void this.mergeMatches(e,t)}}},matchesOverlap:function(e,t,r){var a=e.left-r,i=e.right+r,n=t.left-r,o=t.right+r;return a>n&&a<o||n>a&&n<i}}),m.library.Snippets=new m.library._Snippets,m.format.AbstractReader=m.Class.extend({includes:[m.Events],debug:!0,canRead:function(){return void 0!==this.doRead},getName:function(){return"Abstract Reader"},doRead:void 0,isAsync:function(){return!1},getXMLParser:function(e){var t;(p&&(p.chrome&&!0,p.navigator&&p.navigator.userAgent&&p.navigator.userAgent.match(/PhantomJS/i)&&!0),c())?t=(new DOMParser).parseFromString(e,"text/xml"):t=$xmlNodeJs(e);return t},_getAttribute:function(e,t){return m.Utils.getHtmlAttribute(e,t)},_setAttribute:function(e,t,r){"attribs"in e?e.attribs[t]=r:e.setAttribute(t,r)},syncRead:function(e,t){m.format&&"globalOptions"in m.format&&m.Utils.isObject(m.format.globalOptions)&&(null==t&&(t={}),Object.keys(m.format.globalOptions).forEach((function(e){e in t||(t[e]=m.format.globalOptions[e])})));for(var r=this.doRead(e,t),a=0;a<r.length;a++)m.library.Publication.autoClean(r[a]),r[a].source.format=this.getName(),r[a].source.format.match(/bibtex/i)||(r[a].title&&(r[a].title=m.String.escapeBraces(r[a].title)),r[a].booktitle&&(r[a].booktitle=m.String.escapeBraces(r[a].booktitle)));return r},read:function(e,t,r){var a=(new Date).getTime(),i=this,n=function(e,r){if(r)m.Utils.callback(t,null,[null,r]);else{var n=(new Date).getTime(),o=e?e.length:0;o>10&&m.log({type:"performance",subtype:"Parsing file",format:i.getName(),pubCount:o,start:a,end:n,duration:n-a});for(var s=0;s<e.length;s++)m.library.Publication.autoClean(e[s]),e[s].source.format=i.getName(),e[s].source.format.match(/bibtex/i)||(e[s].title&&(e[s].title=m.String.escapeBraces(e[s].title)),e[s].booktitle&&(e[s].booktitle=m.String.escapeBraces(e[s].booktitle)));m.Utils.callback(t,null,[e,null])}};i.isAsync()?i.doRead(e,n,r):m.Utils.defer((function(){try{var t=i.doRead(e,r);n.apply(i,[t,null])}catch(e){var a=e.message;m.log({type:"error",subtype:'Error parsing "'+i.getName()+'" string into a pub',msg:"Encountered error: "+a}),n.apply(i,[null,a])}}),20)},canWrite:function(){return void 0!==this.doWrite},doWrite:void 0,write:function(e,t){return this.doWrite(e,t)},jsonMapToPaperpileFields:function(e,t){var r,a,i,n,o={},s=void 0;this.getName().match(/mendeley/i)?s="mendeley":this.getName().match(/zotero/i)&&(s="zotero");var l=m.library.PublicationFields.getInputMapForPubType(t,s);for(r in e)if(m.Utils.isObject(e[r])&&!m.Utils.isArray(e[r]))for(a in e[r])e[r+"."+a]=e[r][a];for(r in e){var c=r.toLowerCase();c in l&&(n=l[c],i=e[r],o[n]||(o[n]=[]),o[n].push(i))}return o},jsonIninitalizeValue:function(e){var t={},r=e.split(/\./);return r&&r[1]?(t[r[0]]={},t[r[0]][r[1]]=void 0):t[r[0]]=void 0,t},jsonGetPubtypeAndKind:function(e){var t=void 0;return this.getName().match(/mendeley/i)?t="mendeley":this.getName().match(/zotero/i)&&(t="zotero"),m.library.PublicationTypes.getInputTypeForPub(e.toUpperCase(),t)},jsonCheckISSN:function(e){var t={},r=e.split(/\s*[,;]\s*/),a=m.library.Publication.checkValidityOfISSN(r[0]);return""!==a&&(t.issn=a,r[1]&&""!==(a=m.library.Publication.checkValidityOfISSN(r[1]))&&(t.issn_alt=a)),t},jsonCheckISBN:function(e){var t={},r=m.Utils.extractISBNs(e,{convert:!0,unique:!0});return r[0]&&(t.isbn=r[0]),r[1]&&(t.isbn_alt=r[1]),t},jsonSetValue:function(e,t,r){if(void 0===t[e])t[e]=r;else if(m.Utils.isObject(t[e])){var a=[];for(var i in t[e])a.push(i);1===a.length?t[e][a[0]]=r+"":t[e]=void 0}},jsonAssignValuesToPub:function(e,t){for(var r in e)if(void 0!==e[r]&&(!m.Utils.isString(e[r])&&!m.Utils.isArray(e[r])||0!==e[r].length))if(r in t)if(m.Utils.isObject(e[r]))for(var a in e[r])t[r][a]=e[r][a];else t[r]=e[r];else t[r]=e[r]},validateAuthor:function(e,t){if(e.match(/^https?:\/\//)||e.match(/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/)||e.match(/^admin$/i)||e.match(/\s?online\s/i)||e.match(/\s?facebook\s/i)||e.match(/\scontacto\s/i)||e.match(/\smujeres/i)||e.match(/^user$/i)||e.match(/^staff$/i))return null;var r=e.replace(/^by\s/i,"").replace(/\s\|(.*)/,"");return t&&t.some((function(e){return e.bak===r}))?null:r},statics:{guessFormat:function(e,t){t=t||"";var r=e.split(/[\n\r]/),a=r.length<50?r.length:50,i={Bibtex:[/^\s*\@[A-Z]+\s*\{/i],Ris:[/^\s*TY\s+-\s+/],EndNote:[/^%0\s/,/^<\?xml\sversion="1\.0"\sencoding="UTF-8"\s\?><xml><records>/,/^<\?xml\sversion="1\.0"\sencoding="UTF-8"/],PubMedXML:[/^<PubmedArticle/],PubMedNBIB:[/^PMID-\s\d+/],ISI:[/^PT\s+(J|S|P|R)\s*/],PaperpileJSON:[/%%PAPERPILEJSONEXPORT%%/],Citavi:[/<CitaviExchangeData/],RefWorks:[/^\s*RT\s+/]},n={};for(var o in i)for(var s=0;s<i[o].length;s++)for(var l=i[o][s],c=0;c<a;c++){r[c].match(l)&&(n[o]=1)}var u=Object.keys(n);return 1===u.length?u[0]:null},parseFromMessage:function(e,t){var r=e.blobUrl;m.Ajax.request({url:r,callback:function(e,r,a){if("success"!==r)console.log("ERROR GETTING TEXT");else{var i=a.responseText,n=m.format.AbstractReader.guessFormat(i);n||(n="References");var o=m.format[n];o.on("progress",(function(e){m.Msg.sendMessage({parseProgress:!0,progress:e.progress})}));o.read(i,(function(e,r){r?m.Msg.callback(t,[null,r]):(e.forEach((function(e){e.source.quick_result_type="clipboard",e.source.quick_result_plugin=n,e.source.quick_result_status="ready"})),m.Msg.callback(t,[e,null]))}),{})}}})}}}),m.format._Amazon=m.format.AbstractReader.extend({doRead:function(e){var t=this._readHTML(e);return m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t={pubtype:"PP_BOOK"},r=$(e),a=r.find("div[class=bucket]:contains('Book Description') div.content");if(a.length>0){var i=$(a[0]).children()[0];i&&(t.abstract=$(i).text())}var n=r.find("#detail_bullets_id td[class=bucket] ul");n.length||(n=r.find("#detail-bullets td[class=bucket] ul")),n.length||(n=r.find("#detailBullets_feature_div ul")),n[0]&&$(n[0]).find("li").each((function(e,r){var a=m.Utils.normalizeString($(r).text()).replace(/[\u200e\u200f]/g,"");if(a.match(/(ISBN|\u6761\u5f62\u7801)/)){var i=m.Utils.extractISBNs(a,{convert:!0,unique:!0});i[0]&&(t.isbn=i[0]),i[1]&&(t.isbn_alt=i[1])}if(a.match(/^(?:Verlag|Publisher|Herausgeber|Editor|Editora|Editeur|\xc9diteur|Editore|\u51fa\u7248\u793e)\s*:\s(.*)/i)){var n=RegExp.$1.split(/;/g);if(2==n.length){t.publisher=n[0];var o=n[1],s=o;s=(s=(s=s.replace(/\(.*?\)/,"")).replace(/\s+$/,"")).replace(/^\s+/,""),t.edition=s.replace(/^(Edition|Auflage|\xc9dition)\s*:\s*/i,""),o.match(/\((.*?,?\s\d{4})\)/i)&&(t.published=m.library.Date.parseDate(RegExp.$1))}else 1==n.length&&(t.publisher=n[0]);a.match(/\((.*?,\s+\d{4})\)/i)&&(t.published=m.library.Date.parseDate(RegExp.$1))}if(a.match(/^(?:Language|Sprache|\u8bed\u79cd|\u8a00\u8a9e|Langue|Lingua|Idioma)\s*:\s(.*)/i)){var l=RegExp.$1.replace(/[:,;]/g,"");t.language=m.Utils.normalizeLanguage(l)}a.match(/^(?:Hardcover|Gebundene Ausgabe|\u7cbe\u88c5|\u30cf\u30fc\u30c9\u30ab\u30d0\u30fc|Reli\xe9|Copertina rigida|Tapa dura|Paperback|Taschenbuch|\u5e73\u88c5|\u30da\u30fc\u30d1\u30fc\u30d0\u30c3\u30af|Broch\xe9|Copertina flessibile|Tapa blanda|Print Length|Seitenzahl der Print-Ausgabe|\u7d19\u306e\u672c\u306e\u9577\u3055|Nombre de pages de l'\xe9dition imprim\xe9e|Longueur d'impression|Poche|Broch\xe9|Lunghezza stampa|Longitud de impresi\xf3n|N\xfamero de p\xe1ginas)\s*:\s(.*)/i)&&(t.num_pages=parseInt(RegExp.$1,10).toString())})),t.edition&&(t.edition=t.edition.replace(/edition\s+edition/i,"Edition"));var o=r.find("span[id=btAsinTitle]");if(o[0]&&(t.title=$(o[0]).text(),t.title&&!t.title.match(/[A-Z]/i)&&delete t.title),t.title||(o=r.find("span[id=ebooksProductTitle]"))[0]&&(t.title=$(o[0]).text(),t.edition||(t.edition="Kindle"),t.title&&!t.title.match(/[A-Z]/i)&&delete t.title),!t.title){if((o=r.find("h1#title")).length>0){var s=$(o[0]).contents().filter((function(){return"undefined"!=typeof Node?this.nodeType===Node.TEXT_NODE:"text"===this.type}));s.length>0?t.title=s.text():t.title=$(o[0]).text()}t.title&&!t.title.match(/[A-Z]/i)&&delete t.title}t.title||(o=r.find("span#productTitle")).length>0&&(t.title=$(o[0]).text()),t.title&&(t.title=t.title.replace(/Hardcover/i,""),t.title=t.title.replace(/Paperback/i,""),t.title=t.title.replace(/\[.+\]\s*$/,""));var l=r.find("span.author");return l.length>0&&l.each((function(e,r){var a=$(r).find("> a, a.contributorNameID").text().replace(/\s*\(.+/,""),i=$(r).find("span.contribution").text(),n=m.library.Author.parseAuthor(a,{familyNameFirst:!1}),o="author";i&&(i.match(/edit/i)?o="editor":i.match(/(Translator|\xdcbersetzer|Traduttore|Traductor|\u7ffb\u8a33)/i)?o="translator":i.match(/(Ill?ust|\u30a4\u30e9\u30b9\u30c8)/i)&&(o=null)),o&&(o in t||(t[o]=[]),t[o].push(n))})),t.edition&&t.edition.match(/(\d+)/)&&(t.edition=RegExp.$1),t.publisher&&t.publisher.match(/^(.*)\((.*\d{4})\)/i)&&(t.publisher=RegExp.$1,t.published=m.library.Date.parseDate(RegExp.$2)),t},getName:function(){return"Amazon"}}),m.format.Amazon=new m.format._Amazon,m.format._Arena=m.format.AbstractReader.extend({doRead:function(e){var t=this._readHTML(e);return m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t={pubtype:"PP_BOOK"},r=$(e),a=r.find(".arena-detail-title > span");a&&a.length&&(t.title=$(a).last().text(),t.title=t.title.replace(/\s\/.*/,""),t.title=t.title.replace(/(\s:\s\[)([^\]]+)(])/,": $2"));var i=r.find(".arena-detail-edition .arena-value");i&&i.length&&(t.edition=$(i).first().text());var n=r.find(".arena-detail-year .arena-value");n&&n.length&&(t.year=$(n).first().text());var o=r.find(".arena-detail-extent .arena-value");o&&o.length&&(t.num_pages=$(o).first().text());var s=r.find(".arena-record-publisher .arena-value");s&&s.length&&(t.publisher=$(s).first().text(),t.publisher=t.publisher.replace(/, \d{4}/,""));var l=r.find(".arena-detail-author .arena-value");if(l&&l.length){t.author=[];for(var c=0;c<l.length;c++){var u=$(l[c]).text();(u=u.replace(/\d{4}\-\d?\d?\d?\d?/,"").replace(/,\s*$/,"")).indexOf("(");var d=u.match(/,\s(.*)\s\(/),p=u.match(/\((.*)\)/);if(d&&d[1]&&p&&p[1]){var h=!1,g=d[1].split(" "),f=p[1].split(" ");if(g.length==f.length){for(var b=!0,y=0;y<g.length;y++)g[y].charAt(0)!==f[y].charAt(0)&&(b=!1);b&&(h=!0)}h&&(u=u.substring(0,u.indexOf(",")+2),u+=p[1])}t.author.push(m.library.Author.parseAuthor(u))}}var v,_=r.find(".arena-detail-isbn .arena-value");if(_&&_.length){t.isbn=[];for(c=0;c<_.length;c++)t.isbn.push($(_[c]).text())}if((v=r.find(".arena-detail-notes .arena-detail-notes-list-entry"))&&v.length){t.abstract="";for(c=0;c<v.length;c++)0!==c&&(t.abstract+="\n"),t.abstract+=$(v[c]).text()}t.abstract||(v=r.find(".arena-detail-notes"))&&v.length&&(t.abstract=$(v).text().replace(/Notes:\s/,""));var w=r.find(".arena-detail-description .arena-value");if(w&&w.length)if(t.abstract&&t.abstract.length){var P=$(w).text();P&&t.abstract.length<P.length&&(t.abstract=P)}else t.abstract=$(w).text();if(!t.year&&t.edition&&t.edition.match(/\s\d{4}\b/)){var S=t.edition.match(/\s(\d{4})\b/);S&&S[1]&&(t.year=S[1])}return t},getName:function(){return"Arena"}}),m.format.Arena=new m.format._Arena,m.format._APA=m.format.AbstractReader.extend({doRead:function(e){var t=this._readHTML(e);return m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t={url:[],pubtype:"PP_ARTICLE",keywords:[]},r=$(e).find("div.citation-text").first();r&&r.length||(r=$(e).find("p.articleCitationText").first()),r&&r.length||(r=$(e).find("div.citation").first()),r&&r.length&&(t=m.library.BibliographicInferer.parse($(r).text())),!t.author&&t.journal&&t.journal.indexOf(",")>0&&(t.author=[m.library.Author.parseAuthor(t.journal)],delete t.journal);var a=$(e).find("div.authorGroup > a");if(a&&a.length||(a=$(e).find("span.linked-author > a")),a&&a.length){(!t.author||a.length>t.author.length)&&(t.author=[]);for(var i=0;i<a.length;i++){var n=m.library.Author.parseAuthor($(a[i]).text(),{familyNameFirst:!1});n&&t.author.length<=i?t.author.push(n):n&&t.author.length>i&&t.author[i].last===n.last&&(t.author[i]=n)}}if((a=$(e).find("div.authors"))&&a.length&&!t.author){var o=m.library.Author.parseAuthorList($(a).text(),{delimiter:",",commasWithinNames:!0,familyNameFirst:!0});o&&o.length&&(t.author=o)}var s=$(e).find("main h1").first();s&&s.length||(s=$(e).find("h2.title").first()),s&&s.length&&(t.title=$(s).text());var l=$(e).find("div.metaData div.title").first();l&&l.length||(l=$(e).find("div.list-group-item h3.m-b-0").first()),l&&l.length&&(t.journal=$(l).text());var c=$(e).find("div.abstract p");if(c&&c.length||(c=$(e).find("div.abstractsContainer")),c&&c.length){var u=$(c).text(),d=/\(Psyc[A-Z]+.*(\d{4})\sAPA.*reserved\)/g.exec(u);d&&d[0]&&(t.published&&t.published.year||!d[1]||(t.year=d[1]),u=u.replace(d[0],"")),t.abstract=u}if(!t.doi){var p=/doiLanding%3Fdoi%3D([^"]+)"/g.exec(e);p&&p[1]&&(t.doi=decodeURIComponent(p[1]))}return t},getName:function(){return"APA"}}),m.format.APA=new m.format._APA,m.format._Bibtex=m.format.AbstractReader.extend({debug:!1,bibtex_pubtypes:["article","book","booklet","conference","inbook","incollection","inproceedings","manual","mastersthesis","misc","phdthesis","proceedings","techreport","unpublished","comment"],biblatex_pubtypes:["article","artwork","audio","book","bookinbook","booklet","collection","commentary","customa","customb","customc","customd","custome","customf","dataset","digitalobject","electronic","inbook","incollection","inproceedings","inreference","image","jurisdiction","legal","legislation","letter","manual","misc","movie","music","mvcollection","mvreference","mvproceedings","mvbook","online","patent","performance","periodical","proceedings","reference","report","review","software","standard","suppbook","suppcollection","suppperiodical","thesis","unpublished","video","www"],MapIn:{abstract:"abstract",abstracturl:"url",address:"address",affiliation:"affiliation",annote:"note",archiveprefix:"archivePrefix",author:"author",authors:"author",bookauthor:"author",booktitle:"booktitle",chapter:"chapter",citekey:"citekey","citeulike-linkout-0":"url","citeulike-linkout-1":"url","citeulike-linkout-2":"url","citeulike-linkout-3":"url","citeulike-linkout-4":"url","citeulike-linkout-5":"url","citeulike-linkout-6":"url",file:"external_pdf_filename",sentelink:"external_pdf_filename",conference:"conference",copyright:"copyright",doi:"doi",edition:"edition",editor:"editor",editors:"editor",editora:"series_editor",editorb:"contributor",editorc:"contributor",eprint:"eprint",eventtitle:"conference",eventdate:"conference_date",ee:"url",howpublished:"howpublished",institution:"institution",isbn:"isbn",ismn:"ismn",issn:"issn",journal:"journal",journaltitle:"journal",fjournal:"journalfull",jstor_formatteddate:"published",date:"published",keyword:"keywords",keywords:"keywords",kind:"kind",language:"language",location:"address",lccn:"lccn",mrnumber:"mr",note:"note",number:"issue",origtitle:"original_title",origpublisher:"original_publisher",origlocation:"original_address",origdate:"originally_published",organization:"institution",pagetotal:"num_pages",pages:"pages",pdfurl:"url","pdf-url":"url",pmid:"pmid",pmc:"pmc",pmcid:"pmc",primaryclass:"primaryClass",publisher:"publisher",pubtype:"pubtype",pubstate:"status",school:"school",shorttitle:"titleshort",shortjournal:"journal",series:"series",title:"title",translator:"translator",url:"url",urlpdf:"url",urldate:"accessed",volume:"volume",volumes:"num_volumes",location:"address",zbl:"zbl",zbmath:"zbl",version:"version",venue:"conference_location"},hierarchy:["citekey","pubtype","address","annote","author","bookauthor","booktitle","chapter","edition","editor","editora","editorb","editorc","translator","howpublished","pubstate","institution","journal","shortjournal","journalabr","journaltitle","fjournal","note","number","pages","pagetotal","publisher","kind","school","series","title","shorttitle","url","volume","doi","pmid","affiliation","abstract","copyright","issn","isbn","ismn","lccn","keywords","keyword","authors","editors","language","citeulike-linkout-0","citeulike-linkout-1","citeulike-linkout-2","citeulike-linkout-3","citeulike-linkout-4","citeulike-linkout-5","citeulike-linkout-6","conference","pdfurl","pdf-url","urlpdf","abstracturl","ee","jstor_formatteddate","date","organization","archiveprefix","primaryclass","eprint","location","volumes","pmc","pmcid","mrnumber","zbl","zbmath","sentelink","file","version","venue","eventtitle","eventdate","origdate","urldate","origtitle","origpublisher","origlocation","origdate"],getAllPubtypes:function(){var e=this.bibtex_pubtypes,t=this.biblatex_pubtypes;return m.Array.unique(e.concat(t))},getName:function(){return"Bibtex"},preprocessFields:function(e){"day"in e&&"month"in e&&"year"in e&&(e.date=e.day+". "+e.month+" "+e.year,delete e.day,delete e.month,delete e.year),"month"in e&&"year"in e&&(e.date=e.month+" "+e.year,delete e.month,delete e.year),"year"in e&&(e.date=e.year,delete e.year),"pubmonth"in e&&"pubyear"in e&&(e.date=e.pubmonth+" "+e.pubyear,delete e.pubmonth,delete e.pubyear),"pubyear"in e&&(e.date=e.pubyear,delete e.pubyear),"eventday"in e&&"eventmonth"in e&&"eventyear"in e&&(e.eventdate=e.eventday+". "+e.eventmonth+" "+e.eventyear,delete e.eventday,delete e.eventmonth,delete e.eventyear),"eventmonth"in e&&"eventyear"in e&&(e.eventdate=e.eventmonth+" "+e.eventyear,delete e.eventmonth,delete e.eventyear),"eventyear"in e&&(e.eventdate=e.eventyear,delete e.eventyear),"origday"in e&&"origmonth"in e&&"origyear"in e&&(e.origdate=e.origday+". "+e.origmonth+" "+e.origyear,delete e.origday,delete e.origmonth,delete e.origyear),"origmonth"in e&&"origyear"in e&&(e.origdate=e.origmonth+" "+e.origyear,delete e.origmonth,delete e.origyear),"origyear"in e&&(e.origdate=e.origyear,delete e.origyear),"urlday"in e&&"urlmonth"in e&&"urlyear"in e&&(e.urldate=e.urlday+". "+e.urlmonth+" "+e.urlyear,delete e.urlday,delete e.urlmonth,delete e.urlyear),"urlmonth"in e&&"urlyear"in e&&(e.urldate=e.urlmonth+" "+e.urlyear,delete e.urlmonth,delete e.urlyear),"urlyear"in e&&(e.urldate=e.urlyear,delete e.urlyear),e.subtitle&&(e.title?e.title=e.title+": "+e.subtitle:e.title=e.subtitle,delete e.subtitle),e.booksubtitle&&(e.booktitle?e.booktitle=e.booktitle+": "+e.booksubtitle:e.booktitle=e.booksubtitle,delete e.subtitle),e.journaltitle&&e.shortjournal&&(e.fjournal=e.journaltitle,e.journaltitle=e.shortjournal,delete e.shortjournal),e.journalsubtitle&&(e.fjournal?e.fjournal=e.fjournal+": "+e.subtitle:e.journaltitle?e.fjournal=e.journaltitle+": "+e.subtitle:e.journaltitle=e.journalsubtitle,delete e.journalsubtitle),e.shortseries&&(e.series||(e.series=e.shortseries),delete e.shortseries),e.location&&e.address&&!e.venue&&(e.venue=e.location,delete e.location)},parseDateString:function(e,t,r){var a=m.library.Date.parseDate(r);if(a&&a.year){var i=!1;t in e?("month"in a&&!("month"in e[t])&&(i=!0),"day"in a&&!("day"in e[t])&&(i=!0)):i=!0,i&&(e[t]=a)}},doRead:function(e,t){var r=this.readBibTeX(e,!0),a=[];t&&"fields"in t&&m.Utils.isArray(t.fields)&&(a=m.Utils.clone(t.fields));for(var i=[],n=0;n<r.length;n++)if(r[n].pubtype&&"COMMENT"!==r[n].pubtype&&"STRING"!==r[n].pubtype){this.preprocessFields(r[n]);for(var o={url:[]},s=m.Utils.clone(this.hierarchy).concat(a),l=0;l<s.length;l++){var c=s[l];if(r[n][c]){var u=this.MapIn[c];if(void 0===u&&a.indexOf(c)>-1&&(u=c),void 0!==u)if(m.Utils.isString(r[n][c])&&(r[n][c]=r[n][c].replace(/\s+$/,""),r[n][c]=r[n][c].replace(/^\s+/,"")),"url"===u)if(r[n][c].match(/\s/)){if("ee"===c)for(var d=r[n][c].split(/,\s+/),p=0;p<d.length;p++)d[p].match(/^(https?|ftp)/)&&o[u].push(d[p])}else o[u].push(r[n][c]);else if("note"===u)o[u]||(o[u]=""),o[u]=o[u]+r[n][c]+"\n";else if("published"===u||"originally_published"===u||"conference_date"===u||"accessed"===u)this.parseDateString(o,u,r[n][c]);else if("external_pdf_filename"===u){var h=[],g=r[n][c].match(/^(file:\/\/.+),Sente,/);g&&g[1]&&h.push(g[1]),0===h.length&&"file"===c&&r[n][c].split(/;/).forEach((function(e){(g=e.replace(/\\:/g,"__PPESCAPEDCOLON__").match(/(.*:)([^:]+)(:PDF|:application\/pdf|:.+)/i))&&g[2]?h.push(g[2].replace(/__PPESCAPEDCOLON__/g,":")):!e.match(/^(http|ftp)/)&&e.match(/\.[a-z]{2,4}$/i)&&h.push(e)})),0===h.length&&(g=r[n][c].match(/^(file:\/\/.+\S+\.pdf)$/i))&&g[1]&&h.push(g[1]);var f=[];h.forEach((function(e){if(e&&e.length>3&&!e.match(/^https?:\/\//i)){if(e.match(/%/))try{e=decodeURIComponent(e)}catch(t){try{e=decodeURI(e)}catch(e){}}f.push(e)}})),f.length>0&&(u in o||(o[u]=[]),f.forEach((function(e){o[u].push(e)})))}else o[u]||(o[u]=r[n][c])}}if("external_pdf_filename"in o&&(o.external_pdf_filename=m.Utils.joinExternalPDFFilenames(o.external_pdf_filename)),o.note&&(o.note=o.note.replace(/\n$/,"")),o.isbn){var b=m.Utils.extractISBNs(o.isbn,{convert:!0,unique:!0,normalize:!0});delete o.isbn,b[0]&&(o.isbn=b[0]),b[1]&&(o.isbn_alt=b[1])}if(o.issn){var y=o.issn.split(/,/),v=m.library.Publication.checkValidityOfISSN(y[0]);""!==v?(o.issn=v,y[1]&&""!==(v=m.library.Publication.checkValidityOfISSN(y[1]))&&(o.issn_alt=v)):delete o.issn}if(r[n].archiveprefix&&r[n].eprint&&"ARXIV"===r[n].archiveprefix.toUpperCase()&&(o.arxivid=r[n].eprint),r[n].arxiv&&(o.arxivid||(o.arxivid=r[n].arxiv)),o.doi&&o.doi.match(/,\s+/gm)){var _=o.doi.split(/,\s+/gm);_.length>0&&(o.doi=_.shift(),_.forEach((function(e){var t={type:"article",doi:e};m.library.Publication.addXref(o,t)})))}o.journal&&o.journal.match(/\S\.\S/g)&&(o.journal=o.journal.replace(/\./g,". ")),o.howpublished&&o.howpublished.match(/^(ftp|https?):\/\/\S+\s*$/)&&(o.url.push(o.howpublished),delete o.howpublished,o.journal||(o.pubtype="PP_WEBSITE")),o.note&&o.note.match(/^Accessed:\s(\d{4})-(\d\d?)-(\d\d?)$/)&&(o.accyear=RegExp.$1,o.accmonth=RegExp.$2,o.accday=RegExp.$3,delete o.note),o.citekey&&(o.original_citekey=o.citekey,delete o.citekey),i.push(o)}return i},readBibTeX:function(e,t){var r,a,i,n,o,s,l=this,c=e.split(/\n/),u=[],d=[],p=new RegExp("^\\s*@("+this.bibtex_pubtypes.join("|")+"|"+this.biblatex_pubtypes.join("|")+"|string)","i"),h=0;for(r=null,a=0;a<c.length;a++)c[a].match(/^\s*%/)||c[a].match(/^$/)||(c[a].match(p)&&(h=1,d.length>0&&((r=this.parseEntry(d))&&u.push(r),d=[])),d.push(c[a]));r=null,d.length>0&&1===h&&(r=this.parseEntry(d))&&u.push(r),s=u.length;var g={jan:"January",feb:"February",mar:"March",apr:"April",may:"May",jun:"June",jul:"July",aug:"August",sep:"September",oct:"October",nov:"November",dec:"December"},f=[];for(a=0;a<u.length;a++){a%10==0&&this.fire("progress",{progress:.1*a/s,totalCount:s});try{if("STRING"===u[a].pubtype){for(n in u[a])if(u[a].hasOwnProperty(n)){if("citekey"===n||"pubtype"===n)continue;g[n.toUpperCase()]=u[a][n]}}else f.push(u[a])}catch(e){m.log({type:"exception",subtype:"Parsing",msg:"Caught error when parsing Bibtex: "+e.message})}}for(a=0;a<f.length;a++){a%10==0&&this.fire("progress",{progress:.1+.9*a/s,totalCount:s});try{for(n in f[a])if(f[a].hasOwnProperty(n)){if("citekey"===n||"pubtype"===n)continue;g[f[a][n].toUpperCase()]&&(f[a][n]=g[f[a][n].toUpperCase()])}if(["author","editor","series_editor","translator","contributor"].forEach((function(e){if(f[a][e])for(f[a][e]=l._splitAuthors(f[a][e]),i=0;i<f[a][e].length;i++)f[a][e][i]=l.getNameParts(f[a][e][i])})),delete f[a].references,t)for(n in f[a])if(f[a].hasOwnProperty(n)){if("citekey"===n||"pubtype"===n)continue;if(["author","editor","series_editor","translator","contributor"].indexOf(n)>-1)for(i=0;i<f[a][n].length;i++)for(o in f[a][n][i])f[a][n][i].hasOwnProperty(o)&&(f[a][n][i][o]=this._interpretLaTeX(f[a][n][i][o],n));else f[a][n]=this._interpretLaTeX(f[a][n],n)}}catch(e){m.log({type:"exception",subtype:"Parsing",msg:"Caught error when parsing Bibtex: "+e.message})}}return f},_addValue:function(e,t,r){},_getWriteOptions:function(e){var t={doubleDash:1,escapeUTF8:1,useFullJournalName:0,exportAbstract:1,exportKeywords:1,exportAffiliation:0,exportIdentifiers:0,exportNotes:0,exportFilePath:0,exportFoldersLabels:0,exportUrls:0,exportDay:0,preserveTitles:0,prettyPrint:1,smartQuote:1};return m.Utils.apply(t,e||{}),t},_getFields:function(e){var t=["pp_guid","owner","user_citekey","_id"];e.exportAbstract||t.push("abstract"),e.exportAffiliation||t.push("affiliation"),e.exportIdentifiers||(t=t.concat(["arxivid","doi","eprint","issn","isbn","pmc","pmid","lccn","issn_alt","isbn_alt","mr","zbl"])),e.exportFilePath||t.push("attachments"),e.exportKeywords||t.push("keywords");var r=m.Array.mapBoolean(t),a=m.library.PublicationFields.getFields(),i=m.Array.pluck(a,"name"),n=m.Array.merge(["pubtype","address","author","booktitle","chapter","edition","editor","howpublished","issue","journal","month","number","pages","publisher","school","series","title","volume","year"],i);return n=m.Array.filter(n,(function(e){return!r[e]}))},_preprocessPubs:function(e,t){for(var r=[],a=new RegExp("(\\\\){10,}","g"),i=0;i<e.length;i++){var n=m.Utils.clone(e[i]);if(delete n.associated_doi,m.library.Publication.convertHtmlEntitiesToUnicode(n),t.exportFoldersLabels){var o=[];void 0!==n.keywords&&null!==n.keywords&&n.keywords.match(/\S/)&&o.push(n.keywords),n.labelsNamed&&m.Utils.isArray(n.labelsNamed)&&n.labelsNamed.length>0&&o.push(n.labelsNamed.join(";")),n.foldersNamed&&m.Utils.isArray(n.foldersNamed)&&n.foldersNamed.length>0&&o.push(n.foldersNamed.join(";")),n.keywords=o.join(";"),""!==n.keywords&&";"!==n.keywords||delete n.keywords}var s=m.library.PublicationTypes.getPubType(n.pubtype);s.excluded_fields&&s.excluded_fields.forEach((function(e){e in n&&delete n[e]})),n.abstract&&n.abstract.match(a)&&(n.abstract=n.abstract.replace(a,"")),r.push(n)}return r},_getBibTeXPubType:function(e){var t,r,a=e.pubtype,i=m.library.PublicationTypes.getPubType(a);return t=i?i.bibtex_types:["PP_MISC"],"PP_THESIS"===a?r=!e.kind||e.kind.match(/ph.d./i)?"PHDTHESIS":"MASTERSTHESIS":"PP_CONFERENCE_PAPER"===a?r=!e.author&&e.editor?"PROCEEDINGS":t[0]:"PP_BOOK_CHAPTER"===a?r=e.booktitle?"INCOLLECTION":"INBOOK":"PP_WEBSITE"===a||"PP_PERSONAL_COMMUNICATION"===a?r="MISC":"PP_BOOK"===a?(r="BOOK",e.kind&&("Booklet"===e.kind?r="BOOKLET":"Proceedings"===e.kind&&(r="PROCEEDINGS"))):r=t[0],r},doWrite:function(e,t){var r,a,i,n,o;m.Utils.isArray(e)||(e=[e]),t||(t={}),"gdrive_config"in t||(t.gdrive_config={});var s=this._getWriteOptions(t),l=this._getFields(s),c="";for(e=this._preprocessPubs(e,s),r=0;r<e.length;r++){this.c.log("  pub #",r,m.Utils.ellipsis(e[r].title,80));var u=e[r],d={note:[]},p=0,h=u.pubtype,g=this._getBibTeXPubType(u),f=m.Utils.clone(l);"UNPUBLISHED"===g&&u.arxivid&&(g="ARTICLE",s.exportIdentifiers||(u.eprint||(u.eprint=u.arxivid),f.push("eprint")),u.journal&&u.journal.match(/arXiv/i)&&(u.journal=void 0)),"MISC"===g&&"PP_PERSONAL_COMMUNICATION"===h&&(u.howpublished||(d.howpublished="personal communication"));var b=0,y="";for(a=0;a<f.length;a++){var v=void 0;o=f[a];var _=m.library.PublicationFields.getField(o)||{};if("citekey"!==_.name&&(!1!==_.export_persist&&!1!==_.bibtex_persist&&!1!==_.bibtex_support&&!("PP_THESIS"==h&&"kind"===_.name||"PP_BOOK"==h&&"kind"===_.name&&u[o]&&u[o].match(/^(Booklet|Proceedings)$/)))){var w=_.bibtex_name?_.bibtex_name:o;if("institution"==w&&"MANUAL"==g&&(w="organization"),"conference"==w&&"PP_PRESENTATION"==h&&(w="howpublished"),"publisher"==w&&"PP_STANDARD"==h&&(w="institution"),"file"===w){if(n=[],u[o])for(i=0;i<u[o].length;i++){u[o][i].article_pdf;var P=m.library.Attachment.getFullPathFilename(u,u[o][i],t.collections,t.gdrive_config);u[o][i].mimeType&&u[o][i].mimeType.match(/application\/(.+)/)&&RegExp.$1,n.push(P)}v=n.sort().join(";")}else if("author"===_.fieldType&&u[o]){for(n=[],i=0;i<u[o].length;i++)n.push(m.library.Author.toBibtex(u[o][i]));v=n.join(" and ")}else if(["month","year"].indexOf(o)>-1){var S=u.published||{};(v=S[o])&&(v+=""),"month"===o&&(moMap={1:"jan",2:"feb",3:"mar",4:"apr",5:"may",6:"jun",7:"jul",8:"aug",9:"sep",10:"oct",11:"nov",12:"dec"},moMap[v]?(v=moMap[v],S.day&&void 0!==S.day&&1===s.exportDay&&(v='"'+S.day+'~" # '+v)):void 0!==v&&console.warn("Bibtex warning: error mapping month",v))}else if("isbn"===w||"issn"===w)u[o]&&(v=d[w]?d[w]+", "+u[o]:u[o]);else if("url"===o){if(1===s.exportUrls&&u[o]&&u[o].length>0&&(v=u[o][0]),"PP_WEBSITE"===h&&(u[o]&&u[o].length&&(d.howpublished="\\url{"+u[o][0]+"}"),u.accessed)){var C=u.accessed.year?u.accessed.year:"NA",A=u.accessed.month?u.accessed.month:"NA",E=u.accessed.day?u.accessed.day:"NA";d.note.push("Accessed: "+C+"-"+A+"-"+E)}}else if("journal"===w){if("PP_PATENT"===h)continue;v=1===s.useFullJournalName&&u.journalfull&&u.journalfull.length>0?u.journalfull:u[o]}else if("annote"===w)1===s.exportNotes&&(v=u[o]);else if("issue"===w)v=u[o],"TECHREPORT"===g&&(w="number");else if("booktitle"===w){if(v=m.String.interconvertString(u[o],{format:"bibtex"}),"PP_DATASET"===h){u[o]&&void 0!==u[o]&&d.note.push("Title of the publication associated with this dataset: "+u[o]);continue}}else if("howpublished"===o)u.howpublished&&(u.howpublished.match(/^https?:\/\/\S+$/)?v="\\url{"+u.howpublished+"}":(v=u.howpublished,p=1));else if("note"===w){if(void 0===u[o])continue;"status"===o&&d[w].push(u[o])}else v="title"===w?m.String.interconvertString(u[o],{format:"bibtex"}):u[o];if(v){if(void 0===v)continue;if("published"===w)continue;if("filed"===w)continue;m.Utils.isString(v)&&(v=(v=v.replace(/\n+$/,"")).replace(/\s+$/,"")),d[w]=v}}}d.note.length>0?d.note=d.note.join("; "):delete d.note,d.archivePrefix&&(d.eprint||(delete d.archivePrefix,delete d.primaryClass));var T=Object.keys(d);for(a=0;a<T.length;a++)T[a].length>b&&(b=T[a].length);for(a=1;a<=b+6;a++)y+=" ";var k=["title","booktitle","author","editor","affiliation","abstract","journal","publisher","volume","issue","number","pages","chapter","series","edition","institution","day","month","year","url","howpublished","note","annote","file"];for(var x in d)d.hasOwnProperty(x)&&-1===k.indexOf(x)&&k.push(x);var R=[];for(a=0;a<k.length;a++){x=k[a];if(d.hasOwnProperty(k[a]))if(m.Utils.isString(d[x])){var I='"',L='"';s.preserveTitles&&("title"!==x&&"booktitle"!==x||(I='"{',L='}"'));var D=0;"month"===x&&(D=1);for(var N=["year","day","volume","number","issue","series","edition","chapter"],O=0;O<N.length;O++)x===N[O]&&d[x].match(/^\d+$/)&&(D=1);1===D&&(I=" ",L=""),d[x]=d[x].replace(/[\u2012\u2015]/g,"-");var U=1;if("url"===x&&(U=0),"file"===x&&(U=0),"howpublished"===x&&0===p&&d[x].match(/\\url/)&&(U=0),1===U){for(var M=d[x].split(/(\$[^\$]*\$)/),F=0;F<M.length;F++)M[F].match(/^\$.*\$$/)||(M[F]=M[F].replace(/\\/g,"\\textbackslash"));d[x]=M.join(""),d[x]=d[x].replace(/\\textbackslash(\$|&|#|%|\{|\}|~|^)/g,"\\$1"),x.match(/(title|booktitle)/)&&(d[x]=d[x].replace(/\\textbackslash(textit|textbf|emph|\{|\})/g,"\\$1")),x.match(/(author|editor|title|booktitle)/)||(d[x]=d[x].replace(/\{/g,"\\{"),d[x]=d[x].replace(/\\\\\{/g,"\\{"),d[x]=d[x].replace(/\}/g,"\\}"),d[x]=d[x].replace(/\\\\\}/g,"\\}")),d[x]=d[x].replace(/%/g,"\\%"),d[x]=d[x].replace(/\\\\%/g,"\\%"),d[x]=this._escapeDollars(d[x]),d[x]=this._escapeUnderscores(d[x]),d[x]=d[x].replace(/&/g,"\\&"),d[x]=d[x].replace(/\\\\&/g,"\\&"),"month"!==x&&(d[x]=d[x].replace(/#/g,"\\#"),d[x]=d[x].replace(/\\\\#/g,"\\#"))}if(U=s.escapeUTF8?1:0,"file"===x&&(U=0),1===U&&(d[x]=m.String.unicode2Latex(d[x])),s.smartQuote&&!s.preserveTitles&&("title"===x||"booktitle"===x)){for(n=d[x].split(/\s+/),i=0;i<n.length;i++){var j=0,B=0,$=n[i].split("");for(A=0;A<$.length;A++)$[A].match(/[A-Z]/)&&j++,"$"==$[A]&&B++;var z=0;if(j>1&&!n[i].match(/(\$|~)/)&&(z=1),j>=1&&B>0&&B%2==0&&(z=1),j>=1&&n[i].match(/^[A-Z\d\-]+$/)&&(z=1),n[i].match(/^\{.*\}$/)&&(z=0),s.smartQuote||(z=0),"A"===n[i]&&(z=0),1===z){var H,W,V="",G="";(H=n[i].match(/^(\(|\[|\")/))&&(V=H[1],n[i]=n[i].replace(/^./,"")),(H=n[i].match(/(\)|\]|\")$/))&&(G=H[1],n[i]=n[i].replace(/.$/,"")),n[i]="{"+n[i]+"}",null!==(W=/(.+)(;|:|\.|,|\?|\!)\}$/.exec(n[i]))&&(n[i]=W[1]+"}"+W[2]),null!==(W=/^\{(;|:|\.|,|\?|\!)(.+)/.exec(n[i]))&&(n[i]=W[1]+"{"+W[2]),n[i]=V+n[i]+G}}d[x]=n.join(" ")}if("pages"===x&&s.doubleDash&&(d[x]=d[x].replace(/-\s+-/g,"-"),d[x]=d[x].replace(/-+/g,"-"),d[x]=d[x].replace(/-/g,"--")),'"'===L){for(var q=d[x].split(/(")/),J=0,K=0;K<q.length;K++)'"'==q[K]&&(K>0&&q[K-1].match(/\\$/)||(J++,q[K]=J%2==1?"``":"''"));d[x]=q.join("")}var Y={"\u201c":"``","\u201d":"''","\u2018":"`","\u2019":"'"};for(var Z in Y){var X=d[x].split(new RegExp("("+Z+")")),Q=Y[Z].substring(0,1);for(i=0;i<X.length;i++)X[i]===Z&&(X[i]=Y[Z],i>0&&X[i-1].match(new RegExp(Q+"$"))&&(X[i-1]+="{}"),i<X.length-1&&X[i+1].match(new RegExp("^"+Q))&&(X[i+1]="{}"+X[i+1]));d[x]=X.join("")}if(s.prettyPrint){var ee="  "+x;for(i=x.length-1;i<b;i++)ee+=" ";for(n=[d[x]],"file"!==x&&d[x].match(/\s/)&&(n=this.wrapText(d[x],80-ee.length-4)),i=1;i<n.length;i++)n[i]=y+n[i];ee=(ee+="= "+I+n.join("\n")+L).replace(/\n\s*.$/,L),R.push(ee)}else R.push(x+" = "+I+d[x]+L)}else this.c.log("Cannot write non-string field to bibtex: ",x)}var te=m.library.Publication.getBibTeXkey(u,t);if(1===U){var re=0;R.forEach((function(e){e.match(/[^\x00-\x7F]/)&&(re=1)})),re&&(c+="% The entry below contains non-ASCII chars that could not be converted\n",c+="% to a LaTeX equivalent.\n")}c+="@"+g+"{"+te+",\n",c+=R.join(",\n"),c+="\n}\n\n"}return c=c.replace(/\n$/,"")},wrapText:function(e,t){for(var r=e.split(/\s+/),a=[],i=[],n=0;n<r.length;n++)r[n].length>=t||i.join(" ").length+1+r[n].length>t?(a.push(i.join(" ")),(i=[]).push(r[n])):i.push(r[n]);return a.push(i.join(" ")),a},getNameParts:function(e){var t,r={first:void 0,last:void 0,collective:void 0,jr:void 0};if(!e)return r;if(void 0===e)return r;var a=(e=(e=(e=(e=e.replace(/^\s*/,"")).replace(/\s*$/,"")).replace(/\s+\.\s+/g," ")).replace(/\s+/g," ")).match(/^\{([^\{\}]+)\}$/);if(null!==a)return r.collective=a[1],r;var i=this._splitHelper(e,",+");if(0===i.length)return r;if(1===i.length){var n,o=this._splitHelper(i[0],"\\s+");for(t=0;t<o.length;t++)o[t].toLowerCase()===o[t]&&(n=t);if(n){var s=[];o.length;for(t=o.length;t>n;t--)s.unshift(o.pop());r.last=s.join(" "),r.first=o.join(" ")}else r.last=o.pop(),r.first=o.join(" ")}else 2===i.length?(r.last=i[0],r.first=i[1]):3===i.length&&(r.last=i[0],r.jr=i[1],r.first=i[2]);return r},_escapeDollars:function(e){for(var t=(e=e||"").split(""),r=0,a=0;a<t.length;a++)"$"===t[a]&&(a>0?"\\"!==t[a-1]&&r++:r++);if(r%2==1)for(a=0;a<t.length;a++)"$"===t[a]&&(a>0?"\\"!==t[a-1]&&(t[a]="\\$"):t[a]="\\$");return t.join("")},_escapeUnderscores:function(e){for(var t=(e=e||"").split(""),r=0,a=0;a<t.length;a++)"$"===t[a]?a>0?"\\"!==t[a-1]&&r++:r++:"_"===t[a]&&0===r&&(a>0?"\\"!==t[a-1]&&(t[a]="\\_"):t[a]="\\_");return t.join("")},_splitHelper:function(e,t){var r;if(!e)return[];if(void 0===e)return[];for(var a=new RegExp(t,"g"),i=new RegExp(t+"$"),n=[],o=0,s=0;null!==a.exec(e);){if(s++>50){console.log("splitHelper Bad latex loop",e);break}r=e.substr(o,a.lastIndex-o-1),this._countBracesOpening(r)-this._countBracesClosing(r)==0&&(r=r.replace(i,""),n.push(r),o=a.lastIndex)}return r=e.substr(o,e.length-o),n.push(r),n},_splitAuthors:function(e){var t;if(!e)return[];if(void 0===e)return[];var r=[],a=(e=(e=e.replace(/\s+AND\s+/g," and ")).replace(/\s+and\s+ands\s+/g," and ")).split(/\s+/),i=0,n=0,o=[];for(t=0;t<a.length;t++)i+=this._countBracesOpening(a[t]),n+=this._countBracesClosing(a[t]),"and"===a[t]&&n===i?(r.push(o.join(" ")),o=[]):o.push(a[t]);return o.length>0&&r.push(o.join(" ")),r},_interpretLaTeX:function(e,t){var r=0;if(e&&void 0!==e){/[\\${}]/.test(e)&&(e=m.String.latex2Unicode(e));for(var a=e.split(/(\$[^\$]*\$)/),i=0,n={},o=0;o<a.length;o++)if(!a[o].match(/^\$/)){for(var s=a[o].split(/(\{|\})/),l=0;l<s.length;l++)"{"==s[l]?0==l?i++:s[l-1].match(/\\$/)||(t.match(/^(booktitle|title)$/i)&&s[l-1].match(/\\(textbf|textit|emph)$/)?i++:s[l-1].match(/^(.*)\\(textbf|textit|textrm|texttt|textsl|textem|textmd|textup|textnormal|mathrm|mathtt|mathit|mathbf|mathcal|mathbb|mathfrak|mathnormal|textin|textsu|textsi|textsf|mathsf|textsc|textln|textos|textdf|textsw|rm|cal|mbox|footnotesize|etalchar|newblock|url)$/)?(n[++i]=1,s[l-1]=RegExp.$1,s[l]=""):i++):"}"==s[l]&&(0==l?(n[i]&&(delete n[i],s[l]=""),i--):s[l-1].match(/\\$/)||(n[i]&&(delete n[i],s[l]=""),i--));a[o]=s.join("")}if(e=a.join(""),!t.match(/^(booktitle|title)$/i)){var c=/[\{\}]/g;for(r=0;null!==c.exec(e);){if(r++>50){console.log("Bad mapping",e);break}var u=e.substr(c.lastIndex-2,2);"\\{"!==u&&"\\}"!==u&&(e=e.substr(0,c.lastIndex-1)+e.substr(c.lastIndex,e.length),c.lastIndex--)}}return e=(e=e.replace(/\\(smallskip|medskip|bigskip)/g," ")).replace(/\\(enskip|quad|qquad|thinspace|negthinspace)/g," "),t.match(/^file$/i)||(e=e.replace(/\\[,:;\\!\s]/g," ")),e=(e=e.replace(/~/g," ")).replace(/\s+/g," ")}},parseEntry:function(e){var t=e.join(" ");t=(t=t.replace(/\t+/g," ")).replace(/\s+/g," ");var r,a,i,n={citekey:"dummy"},o=new RegExp("^\\s*@("+this.bibtex_pubtypes.join("|")+"|"+this.biblatex_pubtypes.join("|")+")\\s*\\{([^,]+),?\\s(.+)","i"),s="";if(t.match(o))n.pubtype=RegExp.$1.toUpperCase(),n.citekey=RegExp.$2,s=RegExp.$3;else if(t.match(/^\s*@string\{(.+)/i))n.pubtype="STRING",s=RegExp.$1;else{if(o=new RegExp("^\\s*@("+this.bibtex_pubtypes.join("|")+"|"+this.biblatex_pubtypes.join("|")+")\\{,(.+)","i"),!t.match(o))return null;n.pubtype=RegExp.$1,s=RegExp.$2}"COMMENT"===n.pubtype&&(n.citekey="COMMENT"),n.citekey&&n.citekey.match(/(.+)(\s+[a-z]+\s*=\s*.+)/)&&(n.citekey=RegExp.$1,s=RegExp.$2+","+s);for(var l=/([A-Z\d_\-:]+)\s*=\s*/gi,c=0;null!==(r=l.exec(s));){if(c++>50){console.log("Bad mapping",s);break}var u=/[\{\}]/g;a=s.substr(l.lastIndex,s.length);var d=r[1].toLowerCase();if("STRING"===n.pubtype&&(d=r[1]),a.match(/^\"(.+)/)){a=RegExp.$1;for(var p=/\"/g,h=0;null!==p.exec(a);){if(h++>50){console.log("Bad mapping",a);break}if('\\"'!==a.substr(p.lastIndex-2,2)&&(i=a.substr(0,p.lastIndex-1),this._countBracesOpening(i)-this._countBracesClosing(i)==0)){if("month"===d){var g=a.indexOf('~"'),f=a.indexOf("#"),b=a.indexOf(",");if(g&&b&&g<f&&b>f){n.day=a.substring(0,g),n.month=a.substring(f+2,b),l.lastIndex+=b;break}n[d]=i,l.lastIndex+=n[d].length;break}n[d]=i,l.lastIndex+=n[d].length;break}}}else if(a.match(/^\{(.+)/)){a=RegExp.$1;for(h=0;null!==u.exec(a);){if(h++>50){console.log("Bad mapping",a);break}if(i=a.substr(0,u.lastIndex),this._countBracesOpening(i)+1-this._countBracesClosing(i)==0){n[d]=a.substr(0,u.lastIndex-1),l.lastIndex+=n[d].length;break}}}else if(a.match(/^([^\s,]+)\s*,/))n[d]=RegExp.$1,l.lastIndex+=n[d].length;else for(h=0;null!==u.exec(a);){if(h++>50){console.log("Bad mapping",a);break}i=a.substr(0,u.lastIndex),n[d]=i}}var y=n.pubtype;if(!m.library.PublicationTypes.getPubTypeMap()[y]){var v="ERROR";switch(y){case"COMMENT":v="COMMENT";break;case"STRING":v="STRING";break;case"DIGITALOBJECT":case"ARTICLE":v="news"===n.kind?"PP_NEWS_ARTICLE":"preprint"===n.kind?"PP_PREPRINT":"PP_ARTICLE",n.journaltitle&&!n.journal&&(n.journal=n.journaltitle,delete n.journaltitle);break;case"BOOK":case"COMMENTARY":case"MVBOOK":v="PP_BOOK";break;case"COLLECTION":case"MVCOLLECTION":v="PP_BOOK",n.booktitle&&!n.title&&(n.title=n.booktitle),delete n.booktitle;break;case"BOOKLET":v="PP_BOOK",n.kind="Booklet";break;case"ONLINE":case"WWW":case"ELECTRONIC":v="PP_WEBSITE";break;case"INCOLLECTION":case"INBOOK":case"BOOKINBOOK":case"SUPPBOOK":case"SUPPCOLLECTION":case"SUPPPERIODICAL":v="PP_BOOK_CHAPTER";break;case"CONFERENCE":case"INPROCEEDINGS":v="PP_CONFERENCE_PAPER";break;case"INREFERENCE":v="PP_ENCYCLOPEDIA_ARTICLE";break;case"REFERENCE":case"MVREFERENCE":v="PP_BOOK",n.kind="Encyclopedia";break;case"PROCEEDINGS":case"MVPROCEEDINGS":v="PP_BOOK",n.kind="Proceedings";break;case"THESIS":n.kind="Ph.D. Thesis",v="PP_THESIS",n.type&&(n.type.match(/(mathesis|master)/i)&&(n.kind="Masters Thesis"),delete n.type),n.institution&&!n.school&&(n.school=n.institution,delete n.institution);break;case"PHDTHESIS":n.kind="Ph.D. Thesis",v="PP_THESIS";break;case"MASTERSTHESIS":n.kind="Masters Thesis",v="PP_THESIS";break;case"UNPUBLISHED":v="PP_UNPUBLISHED";break;case"PERFORMANCE":case"CUSTOMA":case"CUSTOMB":case"CUSTOMC":case"CUSTOMD":case"CUSTOME":case"CUSTOMF":case"MISC":v="PP_MISC";break;case"REPORT":case"TECHREPORT":v="PP_REPORT";break;case"IMAGE":v="PP_FIGURE";break;case"DATASET":v="PP_DATASET";break;case"PATENT":v="PP_PATENT";break;case"SOFTWARE":v="PP_COMPUTER_PROGRAM";break;case"PERIODICAL":v="PP_PERIODICAL";break;case"STANDARD":v="PP_STANDARD";break;case"LETTER":v="PP_LETTER";break;case"REVIEW":v="PP_REVIEW";break;case"JURISDICTION":v="PP_CASE";break;case"LEGAL":v="PP_STATUTE";break;case"LEGISLATION":v="PP_BILL";break;case"ARTWORK":v="PP_ARTWORK";break;case"MUSIC":case"AUDIO":v="PP_AUDIO";break;case"MOVIE":case"VIDEO":v="PP_VIDEO";break;case"MANUAL":v="PP_MANUAL";break;default:m.log({type:"error",subtype:"BibTex",msg:"Error converting from BibTeX publication type",badpubType:n.pubType}),v="PP_MISC"}n.pubtype=v}return n},_countBracesOpening:function(e){var t=e.match(/\\\{/g),r=e.match(/\{/g),a=t?t.length:0;return(r?r.length:0)-a},_countBracesClosing:function(e){var t=e.match(/\\\}/g),r=e.match(/\}/g),a=t?t.length:0;return(r?r.length:0)-a}}),m.format.Bibtex=new m.format._Bibtex,m.format._Britannica=m.format.AbstractReader.extend({doRead:function(e){var t;return t=this._readHTML(e),m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t={pubtype:"PP_ENCYCLOPEDIA_ARTICLE",booktitle:"Encyclopedia Britannica",author:[]},r=$("<div>"+e+"</div>"),a=r.find("div.citation");if(a){t.title=a.attr("data-title");var i=a.attr("data-authors")||"";i.match(/the editors of.*britannica/i)?t.author=[{collective:"The Editors of Encyclopedia Britannica"}]:i&&(t.author=m.library.Author.parseAuthorList(i,{familyNameFirst:!1}));var n=a.attr("data-published-date");n&&(t.published=m.library.Date.parseDate(n))}if(!t.title){var o=r.find('meta[property="og:title"]');o&&(t.title=o.attr("content"))}if(0===t.author.length){var s=r.find("div.written-by + div.source");if(s&&s[0]){i=$(s[0]).find("a");for(var l=0;l<i.length;l+=1){var c=$(i[l]).text();c.match(/see all/i)||t.author.push(m.library.Author.parseAuthor(c,{familyNameFirst:!1}))}}}var u=r.find('meta[name="description"]');u&&u.length&&(t.abstract=u.attr("content"));var d=r.find('meta[property="og:url"]');return d&&d.length&&(t.url=[d.attr("content")]),t},getName:function(){return"Britannica"}}),m.format.Britannica=new m.format._Britannica,m.format._Citavi=m.format.AbstractReader.extend({doRead:function(e){var t;if("string"==typeof e?(e=e.trim(),t=c()?this.getXMLParser(e):this.getXMLParser("<wrapper>"+e+"</wrapper>")):"object"==typeof e&&(t=e),t){var r=this._buildDict(t),a=this._getLocations(r);return this._getPubs(r,a)}return[]},_buildDict:function(e){for(var t=$(e).find("CitaviExchangeData").first().children(),r={},a=0;a<t.length;a++){for(var i=this._getElementName(t[a]),n=$(t[a]).children(),o={},s=0;s<n.length;s++){for(var l,c,u={},d=this._getAttribute(n[s],"id"),p=$(n[s]).children(),m=0;m<p.length;m++)l=this._getElementName(p[m]),c=$(p[m]).text(),u[l]=c;if(0===p.length){if("OnetoN"===(l=this._getElementName(n[s]))){var h=(c=$(n[s]).text()).split(";");d=h[0],l="ids",c=h.slice(1)}else c=$(n[s]).text();u[l]=c}o[d]=u}r[i]=o}return r},_buildCategories:function(e){for(var t,r,a,i={},n={},o={},s=Object.keys(e.CategoryCatgories),l=0;l<s.length;l++)if((t=s[l])in o){if("ids"in e.CategoryCatgories[t]){r=e.CategoryCatgories[t].ids;for(var c=0;c<r.length;c++)(a=r[c])in o||(i[t][a]={},e.Categories[a]&&(n[e.Categories[t].Name][e.Categories[a].Name]={}),o[a]=1)}}else if(i[t]={},e.Categories[t]&&(n[e.Categories[t].Name]={}),o[t]=1,"ids"in e.CategoryCatgories[t]){r=e.CategoryCatgories[t].ids;for(c=0;c<r.length;c++)(a=r[c])in o||(i[a]={},e.Categories[a]&&(n[e.Categories[a].Name]={}),o[a]=1)}},_getLocations:function(e){var t={};if(e.Locations)for(var r=Object.keys(e.Locations),a=0;a<r.length;a++){var i=e.Locations[r[a]];i.ReferenceID&&!i.MirrorsReferencePropertyId&&(t[i.ReferenceID]=i.Address)}return t},_getPubs:function(e,t){var r=[],a=[];e.References&&(a=Object.keys(e.References));for(var i=0;i<a.length;i++){var n=a[i],o=this._getPub(n,e,t);o.title&&(m.library.Publication.autoClean(o),r.push(o))}return r},_getPub:function(e,t,r){var a=t.References[e],i={pubtype:"PP_ARTICLE"};if(a.ReferenceType){var n=m.library.PublicationTypes.getInputTypeForPub(a.ReferenceType,"citavi");n&&n.pubtype&&(i.pubtype=n.pubtype),n&&n.kind&&(i.kind=n.kind)}if(a.Date&&(i.published=this._parseDate(a.Date)),a.Year&&!i.published&&(i.published={year:a.Year}),a.DateForSorting&&!i.published){var o=this._parseDate(a.DateForSorting);i.published={year:o.year}}if(a.AccessDate&&(i.accessed=this._parseDate(a.AccessDate)),a.OriginalPublication&&(i.originally_published=this._parseDate(a.OriginalPublication)),a.OnlineAddress&&m.Utils.isUrlLike(a.OnlineAddress)&&(i.url=[a.OnlineAddress]),a.TextLinks&&m.Utils.isUrlLike(a.TextLinks)&&(i.url?i.url.push(a.TextLinks):i.url=[a.TextLinks]),a.CitationKey&&(i.citekey=a.CitationKey),a.Notes&&(i.note=a.Notes),a.Evaluation&&(i.note?i.note+="\nEvaluation: "+a.Evalutation:i.note="\nEvaluation: "+a.Evalutation),a.Title&&(i.title=a.Title),a.Subtitle&&i.title&&(i.title+=": "+a.Subtitle,i.title=i.title.replace(/::/g,":")),a.Volume&&(i.volume=a.Volume),a.Issue&&(i.issue=a.Issue),a.Number&&(i.volume&&!i.issue?i.issue=a.Number:i.number=a.Number),a.Edition&&(i.edition=a.Edition),a.DOI&&(i.doi=a.DOI),a.Abstract&&(i.abstract=a.Abstract),a.Notes&&(i.note=a.Notes),a.ISBN&&(i.isbn=a.ISBN),a.PubMedID&&(i.pmid=a.PubMedID),a.PlaceOfPublication&&(i.address=a.PlaceOfPublication),a.PageRange){var s=a.PageRange.replace(/\n/g,""),l=s.match(/<sp>\D+(\d+).*<\/sp>/),c=s.match(/<ep>\D+(\d+).*<\/ep>/);l&&l[1]&&c&&c[1]&&(i.pages=l[1]+"-"+c[1])}if(a.PageRangeNumber&&!i.pages&&(i.pages=a.PageRangeNumber),a.PageCount){var u=a.PageCount.match(/(\d+)/g);u&&u[1]&&(i.num_pages=u[1])}a.Language&&(i.language=a.Language),a.LanguageCode&&!i.language&&(i.language=a.LanguageCode),a.SeriesTitleID&&t.SeriesTitles&&t.SeriesTitles[a.SeriesTitleID]&&(i.series=t.SeriesTitles[a.SeriesTitleID].Name),a.PeriodicalID&&t.Periodicals&&t.Periodicals[a.PeriodicalID]&&(i.journal=t.Periodicals[a.PeriodicalID].Name);var d=this._getPersons(t,e,"Authors");d&&d.length&&(i.author=d);var p=this._getPersons(t,e,"Editors");p&&p.length&&(i.editor=p);var h=this._getPersons(t,e,"Collaborators");if(h&&h.length&&(i.contributor=h),t.ReferencePublishers&&t.ReferencePublishers[e])for(var g=t.ReferencePublishers[e].ids,f=0;f<g.length;f++)t.Publishers&&t.Publishers[g[f]]&&(i.publisher=t.Publishers[g[f]].Name);if(t.ReferenceOrganizations&&t.ReferenceOrganizations[e]){var b=t.ReferenceOrganizations[e].ids;for(f=0;f<b.length;f++)t.Organizations&&t.Organizations[b[f]]&&(i.institution=t.Organizations[b[f]].Name)}if(r[e]&&m.Utils.isUrlLike(r[e])){i.url||(i.url=[]);var y=r[e];if("string"==typeof y)try{y=JSON.parse(r[e])}catch(e){}"string"==typeof y?i.url.push(y):y&&y.UriString?i.url.push(y.UriString):y&&y.OriginalString&&i.url.push(y.OriginalString)}if("-1"===i.pages&&delete i.pages,"PP_BOOK_CHAPTER"===i.pubtype&&(i=this._getBookInfo(i,e,t,r)),"PP_STATUTE"===i.pubtype){a.Date2&&(i.filed=this._parseDate(a.Date2));var v=this._getPersons(t,e,"Organizations");v&&v[0]&&v[0].collective&&(i.jurisdiction=v[0].collective),a.Title&&(i.title=a.Title),a.Subtitle&&(i.titleshort=a.Subtitle)}if("PP_THESIS"===i.pubtype){i.contributor&&!i.editor&&(i.editor=i.contributor,delete i.contributor);var _=this._getPersons(t,e,"Organizations");_&&_[0]&&_[0].collective&&(i.school=_[0].collective),a.SpecificField1&&(i.department=a.SpecificField1)}if("PP_STANDARD"===i.pubtype){i.issue&&!i.number&&(i.number=i.issue,delete i.issue);var w=this._getPersons(t,e,"Organizations");w&&!i.author&&(i.author=w),a.SpecificField2&&(i.genre=a.SpecificField2)}if("PP_NEWS_ARTICLE"===i.pubtype){var P=this._getPersons(t,e,"Organizations");P&&P[0]&&P[0].collective&&(i.journal=P[0].collective)}if("PP_PERSONAL_COMMUNICATION"===i.pubtype&&i.contributor&&!i.editor&&(i.editor=i.contributor,delete i.contributor,a.TitleSupplement&&(i.title?i.title=a.TitleSupplement+": "+i.title:i.title=a.TitleSupplement)),"PP_PATENT"===i.pubtype&&(i.issue&&!i.number&&(i.number=i.issue,delete i.issue),i.published&&(i.filed=i.published,delete i.published),a.Date2&&(i.published=this._parseDate(a.Date2)),a.SpecificField1&&(i.issuing_authority=a.SpecificField1),a.SpecificField2&&(i.journal=a.SpecificField2),!i.filed&&a.SpecificField3&&(i.filed={year:a.SpecificField3}),!i.issuing_authority&&a.SpecificField4&&(i.issuing_authority=a.SpecificField4),!i.number&&a.SpecificField5&&(i.number=a.SpecificField5),a.TitleSupplement&&(i.abstract?i.abstract+="\n\n"+a.TitleSupplement:i.abstract=a.TitleSupplement)),"PP_NEWS_ARTICLE"===i.pubtype&&(i.issue&&!i.edition&&(i.edition=i.issue,delete i.issue),i.publisher&&!i.journal&&(i.journal=i.publisher,delete i.publisher)),"PP_AUDIO"===i.pubtype){var S=i.author,C=i.editor,A=i.contributor;i.author&&delete i.author,i.contributor&&delete i.contributor,i.editor&&delete i.editor,S&&(i.editor=S),C&&(i.author=C),A&&(i.author?i.author=C.concat(A):i.author=A);var E=this._getPersons(t,e,"Organizations");!i.publisher&&E&&E[0]&&E[0].collective&&(i.publisher=E[0].collective),a.StorageMedium&&(i.medium=a.StorageMedium),i=this._getBookInfo(i,e,t,r)}if("PP_VIDEO"===i.pubtype){var T=i.author,k=i.editor,x=i.contributor;i.author&&delete i.author,i.contributor&&delete i.contributor,i.editor&&delete i.editor,T&&(i.author=T),k&&(i.series_editor=k),x&&(i.editor=x),a.SpecificField1&&!i.address&&(i.address=a.SpecificField1),a.SpecificField2&&(i.running_time=a.SpecificField2),a.StorageMedium&&(i.medium=a.StorageMedium),a.Title&&(i.title=a.Title),a.Subtitle&&(i.original_title=a.Subtitle)}if("PP_MISC"===i.pubtype&&(i=this._getBookInfo(i,e,t,r)),"PP_INTERVIEW"===i.pubtype){var R=i.author,I=i.contributor;i.author&&delete i.author,i.contributor&&delete i.contributor,R&&(i.editor=R),I&&(i.author=I),i.address&&(i.conference_location=i.address,delete i.address)}if("PP_WEBSITE"===i.pubtype){var L=this._getPersons(t,e,"Organizations");L&&L[0]&&L[0].collective&&(i.booktitle=L[0].collective)}if("PP_CASE"===i.pubtype){var D=this._getPersons(t,e,"Organizations");D&&D[0]&&D[0].collective&&(i.court=D[0].collective),a.SpecificField1&&(i.jurisdiction=a.SpecificField1),a.SpecificField2&&(i.number=a.SpecificField2),a.SpecificField3&&(i.abstract=i.title,i.title=a.SpecificField3)}if("PP_BOOK"===i.pubtype&&"Proceedings"===i.kind&&(a.SpecificField1&&(i.conference_location=a.SpecificField1),a.SpecificField4&&(i.conference_date=this._parseDate(a.SpecificField4)),a.SpecificField7&&(i.conference=a.SpecificField7)),"PP_MANUSCRIPT"===i.pubtype){i.issue&&!i.call_number&&(i.call_number=i.issue,delete i.issue),a.TitleSupplement&&(i.series=a.TitleSupplement);var N=this._getPersons(t,e,"Organizations");N&&N[0]&&N[0].collective&&(i.archive=N[0].collective)}return i},_getBookInfo:function(e,t,r,a){var i="",n=[];r.ReferenceReferences&&(n=Object.keys(r.ReferenceReferences));for(var o=0;o<n.length;o++)if(r.ReferenceReferences[n[o]].ids&&r.ReferenceReferences[n[o]].ids.indexOf(t)>=0){i=n[o];break}if(i&&i.length){var s=this._getPub(i,r,a),l=Object.keys(e);for(o=0;o<l.length;o++)switch(l[o]){case"title":s.title&&(s.booktitle=s.title),s.title=e.title;break;case"author":s.author&&!s.editor&&(s.editor=s.author),s.author=e.author;break;case"editor":s.editor||(s.editor=e.editor);break;case"published":s.published||(s.published=e.published);break;case"pages":s.pages=e.pages;break;case"originally_published":s.originally_published=e.originally_published;break;case"pubtype":s.pubtype=e.pubtype;break;case"url":s.url||(s.url=[]),s.url=m.Array.stringUnique(s.url.concat(e.url));break;case"language":s.language=e.language;break;case"notes":s.notes=e.notes;break;case"abstract":s.abstract=e.abstract;break;case"number":s.number=e.number;break;case"kind":s.kind=e.kind;break;case"note":s.note||(s.note=e.note);break;case"publisher":s.publisher||(s.publisher=e.publisher);break;case"volume":s.volume||(s.volume=e.volume);break;default:console.log("IGNORED CHAPTER ITEM:",l[o])}return"PP_BOOK"===s.pubtype&&(s.pubtype="PP_BOOK_CHAPTER"),s}return e},_getPersons:function(e,t,r){var a=[],i="Reference"+r;if(e[i]&&e[i][t])for(var n=e[i][t].ids,o=0;o<n.length;o++)if(e.Persons&&e.Persons[n[o]]){var s=e.Persons[n[o]],l={};s.FirstName?(l.first=s.FirstName,s.MiddleName&&(l.first+=" "+s.MiddleName),s.LastName&&(l.last=s.LastName)):s.LastName&&(l.collective=s.LastName),s.Prefix&&l.last&&(l.last=s.Prefix+" "+l.last),(l.last||l.collective||l.first)&&a.push(l)}return a},_getElementName:function(e){return c()?$(e).prop("tagName"):e.name},_parseDate:function(e){var t=e.match(/^(\d+)\/(\d+)\/(\d+)$/);if(t&&4===t.length){var r=t[2]+"/"+t[1]+"/"+t[3];return m.library.Date.parseDate(r)}return m.library.Date.parseDate(e)},getName:function(){return"Citavi"}}),m.format.Citavi=new m.format._Citavi,m.format._CNKI=m.format.AbstractReader.extend({doRead:function(e){var t=this._readHTML(e);return m.library.Publication.autoClean(t),[t]},_readHTML:function(e){e=this.normalizeStr(e);var t={url:[],pubtype:"PP_ARTICLE",keywords:[]},r=$(e).find("#enTitle");r&&r.length&&(t.title=$(r).first().text()),t.title||(r=$(e).find("#chTitle"))&&r.length&&(t.title=$(r).first().text()),t.title||(r=$(e).find("h2"))&&r.length&&(t.title=$(r).first().text()),t.title||(r=$(e).find(".brief .wx-tit h1"),$(r).find("a, i").remove(),r&&r.length&&(t.title=$(r).text()));var a=$(e).find(".author p");if(a&&a.length){var i=[],n="",o=$(a).first().find("a");if(o&&o.length)for(var s=0;s<o.length;s++){0===s&&(t.author=[]),n=(n=$(o[s]).text()).replace(/\*/,""),(g=m.library.Author.parseAuthor(n,{familyNameFirst:!1}))&&i.push(g)}if(i.length&&i[0].last)t.author=i;else{o.length;var l=$(e).find("#au_en");if(l&&l.length){var c,u=$(l).first().text(),d=(u=(u=u.replace(/([a-z])([A-Z].*)/,"$1")).replace(/.Author./,"").trim()).replace(/[^,]/g,""),p=u.replace(/[^;]/g,"");if((c=d.length>p.length?u.split(","):u.split(";")).length>=o.length)for(s=0;s<o.length;s++){0===s&&(t.author=[]),(g=m.library.Author.parseAuthor(c[s],{familyNameFirst:!1}))&&t.author.push(g)}else t.author=i}else t.author=i}}if(!t.author){a=$(e).find("#content > div").first().children()[2];var h=(n=$(a).text()).split(";");for(s=0;s<h.length;s++){if(0===s&&(t.author=[]),(n=(n=h[s]).replace(/\(.*\)\s*$/,"").replace(/\*/,"").replace(/_/g," ").replace(/\s/,", ")).match(/^[A-Z]{2}/))(g=m.library.Author.parseAuthor(n,{familyNameFirst:!0}))&&t.author.push(g)}}if(!t.author||!t.author.length){a=$(e).find(".brief .wx-tit h3");for(h=(n=$(a).text()).split(";"),s=0;s<h.length;s++){var g;if(0===s&&(t.author=[]),(n=(n=h[s]).replace(/\(.*\)\s*$/,"").replace(/\*/,"").replace(/_/g," ").replace(/\s/,", ")).match(/^[A-Z]{2}/))(g=m.library.Author.parseAuthor(n,{familyNameFirst:!0}))&&t.author.push(g)}}var f,b=$(e).find("#jname");if(b&&b.length&&(t.journal=$(b).first().text()),!t.journal){var y=e.match(/baseinfo[^>]+>\s*([A-Z][^<]+)/);y&&y[1]&&(t.journal=y[1])}if(!t.journal&&(b=$(e).find("title"))&&b.length){var v=$(b).text().match(/\u300a(.*)\u300b(\d{4})/,"");v&&v[2]&&(t.published=m.library.Date.parseDate(v[2]),t.journal=v[1])}t.journal||(f=e.match(/<span class="rowtit">Series.<\/span><p>([^<]+)<\/p>/i))&&f[1]&&(t.journal=f[1].replace(/^\s*\([^\)]\)\s*/,"").trim());t.doi||(f=e.match(/<span class="rowtit">DOI.<\/span><p>([^<]+)<\/p>/i))&&f[1]&&(t.doi=f[1].replace(/^\s*\([^\)]\)\s*/,"").trim());var _=e.match(/publish\sdate.\s*(\d{4}\-\d{1,2}\-\d{1,2})/i)||e.match(/publishing\sdate.\s*(\d{4}\-\d{1,2}\-\d{1,2})/i);if(_&&_[1]&&(t.published=m.library.Date.parseDate(_[1])),t.published||(_=e.match(/yearinfo[^>]+>([^<]+)</))&&_[1]&&(t.published=m.library.Date.parseDate(_[1])),!t.published){var w=$(e).find("#jnq");if(w&&w.length){var P=$(w).first().text();t.published=m.library.Date.parseDate(P)}}var S=$(e).find("#EnChDivSummary");return S&&S.length&&(t.abstract=$(S).first().text()),t.abstract||(S=$(e).find("#ChDivSummary"))&&S.length&&(t.abstract=$(S).first().text()),t.abstract||(S=$(e).find("#content > div").first().children()[3])&&$(S).length&&(t.abstract=$(S).text()),t},normalizeStr:function(e){var t="";return e&&(t=e.replace(/^[\n\t\r\s]+/,"").replace(/[\n\t\r\s]+$/,"").replace(/[\t\r\n\s]+/g," ")),"<div>"+t+"</div>"},parseAuthors:function(e){for(var t=[],r=0;r<e.length;r++){for(var a=e[r].split(" "),i={first:"",last:""},n=0;n<a.length;n++)0===n?i.last+=a[n]:i.first+=a[n];i.first&&i.first.indexOf("_")>=0&&(i.first=i.first.replace(/_/g," ")),t.push(i)}return t},getName:function(){return"CNKI"}}),m.format.CNKI=new m.format._CNKI,m.format._ContextObject=m.format.AbstractReader.extend({doRead:function(e){if("string"==typeof e){var t=this._readContextObject(e);return m.library.Publication.autoClean(t),[t]}return[]},_readContextObject:function(e){var t={author:[{}],url:[]},r={"rft.atitle":"title","rft.btitle":"title","rft.title":"journal","rft.jtitle":"journal","rft.stitle":"journal","rft.volume":"volume","rft.issue":"issue","rft.spage":"startpage","rft.epage":"endpage","rft.pages":"pages","rft.tpages":"num_pages","rft.issn":"issn","rft.eissn":"issn","rft.assignee":"assignee","rft.aulast":"author","rft.aufirst":"author","rft.auinitm":"author","rft.auinit1":"author","rft.ausuffix":"author","rft.aucorp":"author","rft.au":"author","rft.aucorp":"author","rft.invlast":"author","rft.invfirst":"author","rft.creator":"author","rft.contributor":"author","rft.inventor":"author","rft.edition":"edition","rft.series":"series","rft.isbn":"isbn","rft.type":"type","rft.genre":"type",rft_val_fmt:"type","rft.pub":"publisher","rft.publisher":"publisher","rft.date":"date","rft.place":"address",rft_id:"ID","rft.inst":"institution",issn:"issn",title:"journal",atitle:"title",volume:"volume",issue:"issue",aulast:"author",aufirst:"author",date:"date",spage:"startpage",epage:"endpage"};return(e=(e=e.replace(/&amp;/g,"&")).replace(/\n/g,"")).split("&").forEach((function(e){var a=e.split("=");if(a[0]=a[0].toLowerCase(),a[1]&&r[a[0]]){var i=decodeURIComponent(a[1]);if("ID"!=r[a[0]]&&(i=i.replace(/\+/g," ")),i=i.replace(/,\s*$/,""),"author"===r[a[0]])"rft.aulast"!==a[0]&&"aulast"!==a[0]&&"rft.invlast"!==a[0]||(t.author[0].last=i),"rft.aufirst"!==a[0]&&"aufirst"!==a[0]&&"rft.invfirst"!==a[0]||(t.author[0].first=i),"rft.auinit1"===a[0]&&(t.author[0].auinit1=i),"rft.auinitm"===a[0]&&(t.author[0].auinitm=i),"rft.au"===a[0]&&t.author.push(m.library.Author.parseAuthor(i,{familyNameFirst:!1})),"rft.aucorp"===a[0]&&t.author.push({collective:i});else if("issn"===r[a[0]])t.issn?i!=t.issn&&(t.issn_alt=i):t.issn=i;else if("isbn"===r[a[0]])for(var n,o=m.Utils.extractISBNs(i,{convert:!0,unique:!0});n=o.shift();)t.isbn?t.isbn_alt||(t.isbn_alt=n):t.isbn=n;else if("type"===r[a[0]])"BOOK"===i.toUpperCase()&&(t.pubtype="PP_BOOK"),"JOURNALARTICLE"===i.toUpperCase()&&(t.pubtype="PP_ARTICLE"),"THESIS"===i.toUpperCase()&&(t.pubtype="PP_THESIS"),"BOOKITEM"===i.toUpperCase()&&(t.pubtype="PP_BOOK_CHAPTER"),"PROCEEDING"===i.toUpperCase()&&(t.pubtype="PP_CONFERENCE_PAPER"),"REPORT"===i.toUpperCase()&&(t.pubtype="PP_REPORT"),"DOCUMENT"===i.toUpperCase()&&(t.pubtype="PP_MISC"),"UNKNOWN"!==i.toUpperCase()||t.pubtype||(t.pubtype="PP_MISC"),"DISSERTATION"===i.toUpperCase()&&(t.pubtype="PP_THESIS"),"INFO:OFI/FMT:KEV:MTX:PATENT"===i.toUpperCase()&&(t.pubtype="PP_PATENT"),"INFO:OFI/FMT:KEV:MTX:DC"===i.toUpperCase()&&(t.pubtype="PP_WEBSITE"),"INFO:OFI/FMT:KEV:MTX:BOOK"===i.toUpperCase()&&(t.pubtype="PP_BOOK"),"INFO:OFI/FMT:KEV:MTX:DISSERTATION"===i.toUpperCase()&&(t.pubtype="PP_THESIS"),"JOURNAL"===i.toUpperCase()&&(t.pubtype="PP_MISC");else if("date"===r[a[0]]){var s=m.library.Date.parseDate(i);s.year&&(t.year=s.year),s.month&&(t.month=s.month),s.day&&(t.day=s.day)}else"ID"===r[a[0]]?(i.match(/(10\.\d\d\d\d\d?\/\S+)/)&&(t.doi=RegExp.$1),i.match(/info:pmc\/(\d+)/)&&(t.pmc="PMC"+RegExp.$1),i.match(/info:pmid\/(\d+)/)&&(t.pmid=RegExp.$1),i.match(/^http/)&&t.url.push(i),i.match(/urn:isbn:([\d-X]+)/)&&(t.isbn?RegExp.$1!=t.isbn&&(t.ibsn_alt=RegExp.$1):t.isbn=RegExp.$1)):t[r[a[0]]]=i}})),t.address&&(t.address=t.address.replace(/\s*:\s*$/,""),t.address=t.address.replace(/;+/g,";")),t.author[0].auinit1&&(t.author[0].first||(t.author[0].first=t.author[0].auinit1),delete t.author[0].auinit1),t.author[0].auinitm&&(t.author[0].first?t.author[0].first+=" "+t.author[0].auinitm:t.author[0].first=t.author[0].auinitm,delete t.author[0].auinitm),t.author[0]&&(m.library.Author.autoClean(t.author[0]),t.author[0].last||t.author[0].collective||t.author.shift()),t.author.length>1&&t.author[0].last==t.author[1].last&&t.author[0].first==t.author[1].first&&t.author.shift(),t.pubtype||(t.pubtype="PP_ARTICLE"),"PP_BOOK"===t.pubtype&&(t.pages&&(t.num_pages=t.pages,delete t.pages),!t.title&&t.journal&&(t.title=t.journal),t.journal&&delete t.journal),"PP_BOOK_CHAPTER"!==t.pubtype&&"PP_CONFERENCE_PAPER"!==t.pubtype||t.journal&&(t.booktitle||(t.booktitle=t.journal),delete t.journal),"PP_THESIS"!==t.pubtype&&"PP_MISC"!==t.pubtype||t.journal&&!t.title&&(t.title=t.journal,delete t.journal),t},getName:function(){return"ContextObject"}}),m.format.ContextObject=new m.format._ContextObject,m.format._CourtListener=m.format.AbstractReader.extend({doRead:function(e){var t;return t=this._readHTML(e),m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t,r,a={pubtype:"PP_CASE",author:[]},i=$(e).find("article > h2").text().split(/\s*,\s*/);i.length>1&&(t=i.pop(),a.title=i.join(", "),(r=t.match(/(\d+)\s+(.+)\s+(\d+)\s+\((.+)\s+(\d\d\d\d)\)/))&&r[5]?(a.volume=r[1],a.pages=r[3],a.court=r[4],a.published={year:r[5]},a.journal=r[2].replace(/^\(/,"").replace(/\)$/,"")):((r=t.match(/(\d+)\s+(.+)\s+(\d+)\s+\((\d\d\d\d)\)/))&&r[4]?a.published={year:r[4]}:r=t.match(/(\d+)\s+(.+)\s+(\d+)/),r&&r[3]&&(a.volume=r[1],a.pages=r[3],a.journal=r[2].replace(/^\(/,"").replace(/\)$/,""),t=$(e).find("article > h3").text().replace(/\n/g," ").replace(/\s+$/,"").replace(/^\s+/,""),a.court=t))),(r=(t=$(e).find("p:contains('Docket Number')").text().replace(/\n/g," ").replace(/\s+$/,"")).match(/Number\s*:\s*(\S.+)$/))&&r[1]&&(a.number=r[1]);for(var n=$(e).find("span.meta-data-value"),o=0;o<n.length;o++){var s=$(n[o]).text().trim(),l=$(n[o]).prev().text().trim();l.match(/docket number/i)&&(a.number||(a.number=s)),l.match(/filed/i)&&(a.published||(a.published=m.library.Date.parseDate(s)))}return a.court&&(jur=m.library.Jurisdictions.getJurisdiction(a.court),jur.jurisdiction&&(a.jurisdiction=jur.jurisdiction,a.court=jur.court)),a},getName:function(){return"CourtListener"}}),m.format.CourtListener=new m.format._CourtListener,m.format._CSL=m.format.AbstractReader.extend({debug:!1,doRead:function(e){if(!e)return[];m.Utils.isString(e)?e=m.Utils.decode(e):m.Utils.isArray(e)||(e=[e]);var t=this._readCSL(e);return t.forEach((function(e){m.library.Publication.autoClean(e)})),t},_readCSL:function(e){var t,r=[];return e.forEach((function(e){var a={url:[]};t=m.library.PublicationTypes.getInputTypeForPub(e.type.toLowerCase(),"csl"),a.pubtype=t.pubtype,t.kind&&(a.kind=t.kind);var i=m.library.PublicationFields.getInputMapForPubType(a.pubtype,"csl"),n="";for(var o in e)if("journalAbbreviation"==o&&(n=e[o]),o in i){var s=i[o],l=e[o];if("author"==s||"editor"==s||"contributor"==s||"translator"==s||"series_editor"==s)s in a||(a[s]=[]),m.Utils.isArray(l)&&l.forEach((function(e){var t={};if(e.given&&e.family?(t.first=e.given,t.last=e.family):e.family?t.collective=e.family:e.literal&&(t.collective=e.literal),t.last){if(e["non-dropping-particle"]&&(t.last=e["non-dropping-particle"]+" "+t.last),e["dropping-particle"]){var r=e["dropping-particle"].match(/[A-Z\.\s]/g);r&&r.length!==e["dropping-particle"].length?t.last=e["dropping-particle"]+" "+t.last:t.first?t.first=t.first+" "+e["dropping-particle"]:t.first=e["dropping-particle"]}e.suffix&&(t.jr=e.suffix)}a[s].push(t)}));else if("published"==s||"accessed"==s||"originally_published"==s){if("date-parts"in l&&m.Utils.isArray(l["date-parts"])&&m.Utils.isArray(l["date-parts"][0])){var c={};l["date-parts"][0][0]&&(c.year=l["date-parts"][0][0]+""),l["date-parts"][0][1]&&(c.month=l["date-parts"][0][1]+""),l["date-parts"][0][2]&&(c.day=l["date-parts"][0][2]+""),a[s]=c}}else"note"==s?(l.match(/PMID:\s*(\d+)/)&&(a.pmid=RegExp.$1),s in a||(a[s]=[]),a[s].push(l)):"url"===s?(a.url||(a.url=[]),a.url.push(l)):a[s]=l}a.note&&(a.note=a.note.join("\n")),a.language&&(a.language=m.Utils.normalizeLanguage(a.language)),a.journal&&n&&(a.journalfull=a.journal,a.journal=n),r.push(a)})),r},doWrite:function(e,t){e.length>1?console.log("Only one pub at a time is supported!"):m.Utils.isArray(e)||(e=[e]);var r=m.Utils.clone(e[0]),a=m.library.PublicationTypes.getPubType(r.pubtype);a.excluded_fields&&a.excluded_fields.forEach((function(e){e in r&&delete r[e]})),t&&"style_conf"in t&&m.Utils.isString(t.style_conf)&&(t.style_conf=JSON.parse(t.style_conf));var i=this.toCSL(r,t);return t.stringOutput?(delete i["pp-data"],JSON.stringify(i,null,2)):(t.noDataBackup&&delete i["pp-data"],i)},getMapping:function(e){var t=m.library.PublicationFields.getOutputMapForPubType(e,"csl",{});return Object.keys(t).forEach((function(e){t[e]=[t[e]],"journal"===e&&"container-title"===t[e][0]&&t[e].push("container-title-short"),"pages"===e&&(t[e].push("page-first"),t[e].push("page-last"))})),t},_getNewFieldValue:function(e,t){var r=t||"en",a=r.replace(/-.*/,""),i=null;if(m.Utils.isObject(e)){var n=!1;["en","en-US","en-GB","de","de-AT","de-DE","de-CH"].forEach((function(t){t in e&&(n=!0)})),n&&t in e?i=e[t]:n&&r in e?i=e[r]:n&&a in e&&(i=e[a])}else m.Utils.isString(e)&&(i=e);return i},applyPreModifications:function(e,t){var r=this,a="lang"in t?t.lang:"en";"style_conf"in t&&"pre"in t.style_conf&&t.style_conf.pre.forEach((function(t){if("requirements"in t&&"actions"in t){var i=!0;if(t.requirements.forEach((function(t){var r=!0;for(var a in t)a in e?e[a]!==t[a]&&(r=!1):r=!1;r||(i=!1)})),!i)return;t.actions.forEach((function(t){for(var i in t){if(e[i]&&t[i].delete){var n=!0;t[i].match&&(n=!1,t[i].match.forEach((function(t){e[i].match(new RegExp(t,"i"))&&(n=!0)}))),n&&delete e[i]}if("set"in t[i]){var o=!e[i];if(!o&&t[i].overwrite&&(o=!0),o){var s=r._getNewFieldValue(t[i].set,a);null!==s?e[i]=r._checkStringModification(s,e):(m.Utils.isArray(t[i].set)&&t[i].set.forEach((function(t){null===r._getNewFieldValue(t)&&Object.keys(t).forEach((function(i){null!==(s=r._getNewFieldValue(t[i],a))&&(t[i]=r._checkStringModification(s,e))}))})),e[i]=t[i].set)}}}}))}}))},_checkStringModification:function(e,t){for(var r=e.split(/(\$\{[a-z\_]+\})/),a=0;a<r.length;a++)r[a].match(/^\$\{(.+)\}$/)&&RegExp.$1 in t&&(r[a]=t[RegExp.$1]);return r.join("")},applyPostModifications:function(e,t){if("style_conf"in t&&"post"in t.style_conf&&t.style_conf.post.forEach((function(t){if("requirements"in t&&"actions"in t){var r=!0;if(t.requirements.forEach((function(t){var a=!0;for(var i in t)i in e&&e[i].match(new RegExp("^("+t[i].join("|")+")$","i"))||(a=!1);a||(r=!1)})),!r)return;t.actions.forEach((function(t){for(var r in t)e[r]&&(t[r].rename?(e[t[r].rename]=e[r],delete e[r]):t[r].modify&&t[r].modify.forEach((function(t){e[r]=e[r].replace(new RegExp(t[0],"i"),t[1])})))}))}})),e.annote){var r=m.String.stripHtml(e.annote,{exclude:["p","div","br","li"]});r=(r=m.String.stripHtml(r,{replacement:"\n"})).replace(/&nbsp;/g," "),e.annote=r}},toCSL:function(e,t){var r={},a=t.prefixSuffix;if(void 0===a&&(a=""),void 0===t.includeDOI&&(t.includeDOI=0),void 0===t.includeURL&&(t.includeURL=t.includeDOI),"online_source"in e&&(t.online_source=e.online_source),this.applyPreModifications(e,t),r.type=m.library.PublicationTypes.getOutputTypeForPub(e,"csl"),r.type){var i={};t.style_conf&&t.style_conf.options&&(i=t.style_conf.options);var n=m.library.PublicationFields.getOutputMapForPubType(e.pubtype,"csl",i),o={};if(t.annotate){for(var s=[],l=9728;l<9923;l+=1)s.push(String.fromCharCode(l));Object.keys(n).forEach((function(t){if(t in e&&(o[t]={csl:n[t],symbols:["",""]},-1===["pages","published","accessed"].indexOf(t)))for(var r=0;r<2;r+=1)o[t].symbols[r]=s.shift()}))}return t.extraKeys&&t.extraKeys.forEach((function(e){n[e]=e})),this.applyMapping(e,r,n,a,o),this.checkUrlAndDOI(e,r,t),this.applyPostModifications(r,t),r["pp-data"]=m.Utils.clone(e),r._annotation=o,r}m.log({type:"error",subtype:"Citeproc Output: missing CSL type",msg:"No CSL type found when outputting to citeproc format",pub:e})},applyMapping:function(e,t,r,a,i){var n=m.library.PublicationFields.getDateFieldNames(),o=m.library.PublicationFields.getAuthorFieldNames();for(var s in r){var l=r[s],c=e[s],u=s in i?i[s].symbols:["",""],d=""===u[0]?"":u[0]+" ",p=u[1];if("url"===s)if(c&&c.length>0)c=d+c[0]+p;else{var h=m.library.Publication.links(e);h&&h.length>0&&(c=d+h[0]+p)}else if(s in e)if(n.indexOf(s)>-1)c=m.library.Date.toCSL(c);else if(o.indexOf(s)>-1){var g=[];c.forEach((function(e){var t=m.library.Author.toCSL(e);t&&g.push(t)})),g[0]&&g[0].family&&(g[0].family=d+g[0].family),c=g}else if("jurisdiction"==s)c=m.library.Jurisdictions.getJurisdictionCSL(c);else if("court"==s){var f;e.jurisdiction&&(f=m.library.Jurisdictions.getJurisdictionCSL(e.jurisdiction)),c=m.library.Jurisdictions.getCourtAbbreviation(c,f)}else"language"===s||("title"===s||"booktitle"===s||"original_title"===s||"titleshort"===s?(m.Utils.isString(c)&&(c=c.replace(/\\\{/g,"ppescapedbraceopen").replace(/\\\}/g,"ppescapedbraceclose").replace(/\{([^{}]+)\}/g,'<span class="nocase">$1</span>').replace(/ppescapedbraceopen/g,"\\{").replace(/ppescapedbraceclose/g,"\\}")),c=d+(c=m.String.interconvertString(c,{format:"html"}))+a+p):"journal"===s?"PP_ARTICLE"!==e.pubtype&&"PP_NEWS_ARTICLE"!==e.pubtype&&"PP_MISC"!==e.pubtype||(c=d+c+a+p,e.journalfull&&(t["container-title-short"]=c,t.journalAbbreviation=c,this._add_citeproc_abbrev(t,e.journalfull+a,c,l),c=d+e.journalfull+a+p)):c=d+c+p);else c=void 0;var b=!1;l in t?void 0===t[l]&&(b=!0):b=!0,void 0===c&&(b=!1),b&&(m.Utils.isString(c)&&(c=m.String.removeControlChars(c)),t[l]=c)}for(var y in t)void 0===t[y]&&delete t[y],"undefined"==t[y]&&delete t[y]},checkUrlAndDOI:function(e,t,r){var a=r.includeDOI,i=r.includeDOI;e.pubtype&&"PP_WEBSITE"==e.pubtype&&(i=1),e.pubtype&&e.pubtype.match(/^(PP_BOOK|PP_BOOK_CHAPTER)$/i)&&e.kind&&e.kind.match(/Electronic Book/i)&&(a=1,i=1),e.pubtype&&(e.pubtype.match(/(PP_ARTICLE|PP_NEWS_ARTICLE|PP_CONFERENCE_PAPER)/i)?e.pages?""==e.pages&&(a=1,i=1):(a=1,i=1):e.pubtype.match(/^(PP_BOOK|PP_BOOK_CHAPTER)$/i)||(a=1,i=1)),"online_source"in r&&(r.online_source?(a=1,i=1):(a=0,i=0)),a||delete t.DOI,i||delete t.URL},_add_citeproc_abbrev:function(e,t,r,a){e.abbreviations||(e.abbreviations={}),e.abbreviations[a]||(e.abbreviations[a]={}),e.abbreviations[a][t]=r}}),m.format.CSL=new m.format._CSL,m.format._CSV=m.format.AbstractReader.extend({debug:!1,orderedOutput:["Item type","Authors","Editors","Title","Journal","Full journal","Publication year","Volume","Issue","Pages","Folders filed in","Labels filed in","Institution","Number","Edition","Publisher","Address","Book title","Website name","Patent title","Proceedings title","Conference","Conference location","Conference date","Date published","Date accessed","ISBN","ISBN (alt.)","ISSN","ISSN (alt.)","LCCN","ISMN","URLs","Call number","DOI","PMID","MR Number","Zbl Number","Arxiv ID","Associated DOI","PMC ID","Abstract","Keywords","Notes","Short title","Status","Copyright","Affiliation","Contributors","Translators","Language","Sub-type","Series","Series number","Series editors","Original title","Original publisher","Original address","Date of the original publication","Archive prefix","Archive","Archive location","Archive place","Eprint ID","Primary class","Custom sub-type","BibTeX key","Chapter","Pages cited","Page count","Volume count","Advisor","School","Department","Degree","Source","How published","Collection editor","Collection","Collection number","Inventors","Assignee","Issuing authority","Patent number","Date filed","Type of patent","Issuing office full name","Patent publication type","Application number","Class","International class","Field of search","Designated states","Priority numbers","Foreign references","Event name","Event place","Presenter","Date","Date of the event","Version","Dataset name","Dataset author(s)","Dataset URL","Dataset DOI","Publication title","Publication DOI","Author or source","Recipient","Scale","Running time","Medium","Program Title","Directors","Network","Episode Number","Broadcast date","Format","Cast members","Producers","Performers","Label or publisher","Date released","Album name","Composers","Studio or distributor","Country","Artist","Size","Composer","Composition date","Sponsoring agency","Date granted","Date submitted","Issuing Agency","Cartographer","Sender","Interview with","Interviewer","Type","Magazine","Title of the reviewed item","Reviewed author","Encyclopedia title"],getName:function(){return"CSV"},doWrite:function(e,t){m.Utils.isArray(e)||(e=[e]);var r=["owner_name","owner_email","source_id","cite_alias","sha1","folders","labels","autoCleaned","dup_sha1","shared_folders","id_list","incomplete","count_index","imported","owner","journal_checked","subfolders","updated","collection_timestamps","external_pdf_filename","duplicates","created"],a={},i={};m.library.PublicationTypes.getPubTypes().forEach((function(e){a[e.id]={pubtype:"Item type",year:"Publication year",foldersNamed:"Folders filed in",labelsNamed:"Labels filed in"},m.library.PublicationFields.getFieldsForPubType(e.id).forEach((function(t){if(-1==r.indexOf(t.name)){var n=t.label;"Chapter authors"==n?n="Authors":"Book editors"==n?n="Editors":"Chapter title"==n?n="Title":"Editor of the collection"==n?n="Collection editor":"Chapter pages"==n&&(n="Pages"),a[e.id][t.name]=n,i[t.label]=1}}))}));var n={},o=[];e.forEach((function(e){var t={};for(var r in e)if(r in a[e.pubtype]&&void 0!==e[r]){var i=e[r],s=m.library.PublicationFields.getFieldType(r);"author"==s?i=m.library.Author.toString(i):"date"==s?("published"==r&&"year"in i&&(t[a[e.pubtype].year]=i.year,n[a[e.pubtype].year]=1),i=m.library.Date.toString(i,{dashed:!0})):m.Utils.isArray(i)?i=i.join(";"):"pubtype"==r?i=m.library.PublicationTypes.getLabel(e):"title"!==r&&"booktitle"!==r||(i=m.String.interconvertString(i,{format:"nomarkup"})),t[a[e.pubtype][r]]=i,n[a[e.pubtype][r]]=1}o.push(t)}));var s=[],l=Object.keys(n);this.orderedOutput.forEach((function(e){l.indexOf(e)>-1&&s.push(e)})),l.forEach((function(e){-1==s.indexOf(e)&&s.push(e)}));var c='"'+s.join('","')+'"\n';return o.forEach((function(e){var t=[];s.forEach((function(r){var a="";e[r]&&(a=e[r]),m.Utils.isString(a)||(a=a.toString()),a=a.replace(/\"/g,'""'),t.push(a)})),c+='"'+t.join('","')+'"\n'})),c}}),m.format.CSV=new m.format._CSV,m.format._Datacite=m.format.AbstractReader.extend({parsingRules:{title:["titles title"],abstract:["descriptions description[descriptionType=Abstract]"],publisher:["publisher"],doi:["identifier[identifierType=DOI]"],year:["publicationYear","dates date[dateType=Created]"],author:["creators creator creatorName"],resourceType:["resourceType"],url:["alternateIdentifiers alternateIdentifier[alternateIdentifierType=URL]"],isbn:["alternateIdentifiers alternateIdentifier[alternateIdentifierType=ISBN]"],arxivid:["alternateIdentifiers alternateIdentifier[alternateIdentifierType=arXiv]"],subjects:["subjects subject"]},doRead:function(e){var t;"string"==typeof e?t=this.getXMLParser(e):"object"==typeof e&&(t=e);var r=[],a=$(t).find("record");if(a&&a.length)for(var i=0;i<a.length;i++){var n,o=$(a[i]).html();(n=this._readDatacite(o))&&(m.library.Publication.autoClean(n),r.push(n))}else(n=this._readDatacite(t))&&(m.library.Publication.autoClean(n),r.push(n));return r},_readDatacite:function(e){var t={author:[],editor:[],resourceTypeGeneral:"NA",resourceType:"NA",url:[]};for(var r in this.parsingRules)for(var a=0;a<this.parsingRules[r].length;a++){var i=$(e).find(this.parsingRules[r][a]);if(i&&i[0])if("author"==r){for(var n=0;n<i.length;n++)if($(i[n]).text()&&!$(i[n]).text().match(/No Name Supplied/i)){var o=m.library.Author.parseAuthor($(i[n]).text(),{familyNameFirst:!1});t.author.push(o)}}else if("resourceType"==r){var s=this._getAttribute(i[0],"resourceTypeGeneral");s&&(t.resourceTypeGeneral=s),$(i[0]).text()&&(t.resourceType=$(i[0]).text())}else if("url"==r)for(n=0;n<i.length;n++)$(i[n]).text().match(/^http/)&&t.url.push($(i[n]).text());else if("isbn"==r){var l=m.Utils.extractISBNs($(i[0]).text(),{convert:!0,unique:!0});l[0]&&(t.isbn=l[0]),l[1]&&(t.isbn_alt=l[1])}else if("year"==r){var c=m.library.Date.parseDate($(i[0]).text());c.year&&!("year"in t)&&(t.year=c.year),c.month&&!("month"in t)&&(t.month=c.month),c.day&&!("day"in t)&&(t.day=c.day)}else if("subjects"==r){if(!t.journal){var u=this._getAttribute(i[0],"subjectScheme"),d=$(i[0]).text().match(/\(.+\)/);d&&(d=d[0].replace(/[\(\)]/g,""),t.journal=u+" ["+d+"]",t.primaryClass=d)}}else t[r]||(t[r]=$(i[0]).text())}t.pubtype="PP_MISC";var p={dissertation:"PP_THESIS",datasheet:"PP_DATASET",dataset:"PP_DATASET",article:"PP_ARTICLE","^book$":"PP_BOOK","conference[\\s-]*paper":"PP_CONFERENCE_PAPER",report:"PP_REPORT",preprint:"PP_PREPRINT"};if("Software"==t.resourceTypeGeneral?t.pubtype="PP_COMPUTER_PROGRAM":"Dataset"==t.resourceTypeGeneral?t.pubtype="PP_DATASET":"Image"==t.resourceTypeGeneral?t.pubtype="PP_FIGURE":"Audiovisual"==t.resourceTypeGeneral?t.pubtype="PP_VIDEO":"Sound"==t.resourceTypeGeneral?t.pubtype="PP_AUDIO":"Preprint"==t.resourceTypeGeneral&&(t.pubtype="PP_PREPRINT"),"PP_MISC"==t.pubtype)for(var h in p)t.resourceType.match(new RegExp(h,"i"))&&(t.pubtype=p[h]);return t.arxivid&&(t.eprint=t.arxivid),delete t.resourceType,delete t.resourceTypeGeneral,t.publisher&&t.publisher.match(/No Publisher Supplied/i)&&delete t.publisher,t.title||t.doi&&(t.title=t.doi,t.pubtype="PP_MISC"),t},getName:function(){return"Datacite"}}),m.format.Datacite=new m.format._Datacite,m.format._EMail=m.format.AbstractReader.extend({doRead:function(e){var t=[],r=this.decideOnFormat(e);return"GS"==r?t=this.googleScholarAlert(e):"RG"==r?t=this.researchGateAlert(e):"PM"==r?t=this.pubMedAlert(e):"EB"==r?t=this.easyBibEMail(e):"WoK"==r?t=this.webOfScienceAlert(e):"BMC"==r&&(t=this.BMCAlert(e)),t.forEach((function(e){e.journal&&"PP_PATENT"!=e.pubtype&&(e.pubtype="PP_ARTICLE")})),t},decideOnFormat:function(e){return e.match(/From: Google Scholar Alerts <scholaralerts-noreply/)?"GS":e.match(/From: ResearchGate <no-reply\@researchgate.net/)?"RG":e.match(/From: My NCBI <efback\@mail.nih.gov>/)?"PM":e.match(/Subject: EasyBib\.com Citation List/)?"EB":e.match(/Web of Science Alert/)&&e.match(/noreply@isiknowledge.com/)?"WoK":e.match(/BioMed Central Article Alert/)?"BMC":"unkown"},easyBibEMail:function(e){var t=[],r={title:"title",year:"year",publisher:"publisher",city:"address"};return $(e).find("p a").each((function(e,a){if($(a).attr("href").match(/.*form\?data=(.+)/)){var i=JSON.parse(unescape(RegExp.$1)),n={pubtype:"PP_MISC",author:[],editor:[]};if(i.pubnonperiodical)for(var o in r)i.pubnonperiodical[o]&&(n[r[o]]=i.pubnonperiodical[o].replace(/\+/g," "));i.contributors&&i.contributors.forEach((function(e){var t={last:e.last,first:e.first};e.middle&&(t.first+=" "+e.middle),e.function&&("editor"==e.function?n.editor.push(t):n.author.push(t))})),i.source&&"book"==i.source&&(n.pubtype="PP_BOOK"),t.push(n)}})),t},pubMedAlert:function(e){var t=[],r=this;return $(e).find("div table a").closest("table").each((function(e,a){var i=$(a).find("a").text();t.push({pubtype:"PP_MISC",title:i,url:[]});var n=$(a).find("a").attr("href");n&&t[t.length-1].url.push(n),$(a).find("tr").each((function(e,a){var i=$(a).text();if(1==e)t[t.length-1].author=[],i.split(/\s*,\s*/).forEach((function(e){var r=m.library.Author.parseAuthor(e,{familyNameFirst:!0});t[t.length-1].author.push(r)}));else if(2==e){var n=m.library.BibliographicData.parse(i);n&&n.journal&&r.copyBiblioData(t[t.length-1],n),t[t.length-1].journal||(t[t.length-1].journal=i.replace(/\..*/,""))}}))})),t},BMCAlert:function(e){var t=[],r=this;return $(e).find("table tr:contains(Abstract)").each((function(e,a){var i=$(a).find("span.xcitationtitle").text();t.push({pubtype:"PP_MISC",title:i,url:[],author:[]});var n=$(a).find("a:contains(Abstract)").attr("href");n&&t[t.length-1].url.push(n);var o=$(a).find("span.smalltext").last().html();if(o){var s=o.split(/<br\/?>/);if(s&&3==s.length){m.library.Author.parseAuthorList($("<div>"+s[0]+"</div>").text(),{multiple:!0,auto:!1,delimiter:","}).forEach((function(e){t[t.length-1].author.push(e)}));var l=m.library.BibliographicData.parse($("<div>"+s[1]+"</div>").text());l&&r.copyBiblioData(t[t.length-1],l)}}})),t},webOfScienceAlert:function(e){var t=[],r=this;return $(e).find("table td:contains(Title)").closest("table").each((function(e,a){t.push({pubtype:"PP_MISC",author:[]}),$(a).find("tr td").each((function(e,a){var i=$(a).text().replace(/[\t\n\s]+/g," ");if((i=i.replace(/^\s+/,"").replace(/\s+$/,"")).match(/^Title:(.+)/)&&(t[t.length-1].title=RegExp.$1),i.match(/^Authors:(.+)/)&&m.library.Author.parseAuthorList(RegExp.$1,{multiple:!0,auto:!0}).forEach((function(e){t[t.length-1].author.push(e)})),i.match(/^Source:(.+)/)){var n=m.library.BibliographicData.parse(RegExp.$1);n&&r.copyBiblioData(t[t.length-1],n)}i.match(/^ISSN:\s*(.+)/)&&(t[t.length-1].issn=RegExp.$1),i.match(/^Abstract:(.+)/)&&(t[t.length-1].abstract=RegExp.$1)}))})),t},researchGateAlert:function(e){var t=[],r=this;return $(e).find("table a span").closest("table").each((function(e,a){var i=$(a).find("a span").text().replace(/\s*$/,"");i.match(/\.\.\.$/)&&(i+="."),t.push({pubtype:"PP_MISC",title:i,url:[]});var n=$(a).find("a").attr("href");n&&(n=n.replace(/\?pli.*/,""),t[t.length-1].url.push(n)),$(a).find("td p").each((function(e,a){var i=$(a).text().replace(/\.+$/,"");if(0==e)t[t.length-1].author=[],i.split(/\s*,\s*/).forEach((function(e){var r=m.library.Author.parseAuthor(e,{familyNameFirst:!1});t[t.length-1].author.push(r)}));else if(1==e){var n=m.library.BibliographicData.parse(i);n&&n.journal&&r.copyBiblioData(t[t.length-1],n),t[t.length-1].journal||(t[t.length-1].journal=i)}})),t[t.length-1].author?0==t[t.length-1].author.length&&t.pop():t.pop()})),t},googleScholarAlert:function(e){var t=[];return $(e).find("h3 a").each((function(e,r){var a=$(r).text().replace(/\[(PDF|BOOK|BUCH|LIBRO|LIVRE|B|[ZC]ITATIONE?|CITAS|C|HTML)\]\s+/,"");t.push({pubtype:"PP_MISC",title:a,url:[]});var i=$(r).attr("href");i&&(i=(i=i.replace(/(.+&q=)(.+)/,"$2")).replace(/&sa=[A-Z]+/,"").replace(/&scisig=.+/,""),t[t.length-1].url.push(i))})),$(e).find("font[color='#006621']").each((function(e,r){var a=$(r).text().split(/\s+-\s+/);a[0]&&(t[e].author=[],a[0].split(/\s*,\s+/).forEach((function(r){var a=r.split(/\s+/);a[0]&&a[0].match(/^\u2026$/)?t[e].author.push({collective:"others"}):a[0]&&a[1]&&(a[1].match(/\u2026/)?(a[1]=a[1].replace(/\u2026/,""),t[e].author.push({last:a[1],first:a[0]}),t[e].author.push({collective:"others"})):t[e].author.push({last:a[1],first:a[0]}))}))),a[1]&&(a[1]=a[1].replace(/\u2026/,""),a[1].match(/(.+),\s+(\d\d\d\d)\s*$/)?(t[e].journal=RegExp.$1,t[e].year=RegExp.$2):a[1].match(/^\s*(\d\d\d\d)\s*$/)?t[e].year=RegExp.$1:t[e].journal=a[1]),t[e].journal&&t[e].journal.match(/^\s*(US\s+Patent)\s+(.+)/)&&(t[e].pubtype="PP_PATENT",t[e].patent_number="US"+RegExp.$2.replace(/,/g,""),delete t[e].journal)})),$(e).find("font[color='#222222']").each((function(e,r){e<t.length&&(t[e].abstract=$(r).text())})),t},copyBiblioData:function(e,t){t&&(t.journal&&(e.journal=t.journal),t.volume&&(e.volume=t.volume),t.pages&&(e.pages=t.pages),t.issue&&(e.issue=t.issue),t.year&&(e.year=t.year),t.month&&(e.month=t.month),t.doi&&!e.doi&&(e.doi=t.doi))}}),m.format.EMail=new m.format._EMail,m.format._EndNote=m.format.AbstractReader.extend({debug:!1,mapXML:{"%A":{rules:["contributors authors author"]},"%B":{rules:["titles secondary-title","periodical full-title","titles secondary-title","alt-periodical full-title"]},"%J":{rules:["titles secondary-title"]},"%C":{rules:["pub-location"]},"%D":{rules:["dates year"]},"%E":{rules:["contributors secondary-authors author"]},"%F":{rules:["label"]},"%G":{rules:["language"]},"%H":{rules:["contributors translated-authors author"]},"%I":{rules:["publisher"]},"%K":{rules:["keywords keyword"]},"%L":{rules:["call-num"]},"%M":{rules:["accession-num"]},"%N":{rules:["number"]},"%O":{rules:["titles alt-title","orig-pub"]},"%P":{rules:["pages"]},"%Q":{rules:["titles translated-title"]},"%R":{rules:["electronic-resource-num"]},"%S":{rules:["titles tertiary-title"]},"%T":{rules:["titles title"],style:!0},"%U":{rules:["urls related-urls url"]},"%V":{rules:["volume"]},"%W":{rules:["remote-database-provider"]},"%X":{rules:["abstract"]},"%Y":{rules:["contributors tertiary-authors author"]},"%Z":{rules:["notes"]},"%0":{rules:["ref-type"]},"%1":{rules:["custom1"]},"%2":{rules:["custom2"]},"%3":{rules:["custom3"]},"%4":{rules:["custom4"]},"%#":{rules:["custom5"]},"%$":{rules:["custom6"]},"%]":{rules:["custom7"]},"%6":{rules:["num-vols"]},"%7":{rules:["edition"]},"%8":{rules:["dates pub-dates date"]},"%9":{rules:["work-type"]},"%@":{rules:["isbn"]},"%+":{rules:["auth-address"]},"%~":{rules:["remote-database-name"]},"%<":{rules:["research-notes"]},"%)":{rules:["reprint-edition"]},"%*":{rules:["reviewed-item"]},"%!":{rules:["titles short-title"]},"%?":{rules:["subsidiary-authors"]},"%(":{rules:["orig-pub"]},"%[":{rules:["access-date"]},"%^":{rules:["caption"]},"%&":{rules:["section"]},"%>":{rules:["urls pdf-urls url"]},"%\xc4":{rules:["urls web-urls"]}},hierarchy:["%0","%V","%N","%D","%8","%[","%?","%X","%A","%B","%C","%E","%F","%G","%I","%J","%K","%L","%O","%P","%R","%S","%T","%U","%W","%Y","%1","%2","%3","%4","%6","%7","%8","%9","%@","%!","%#","%$","%]","%+","%<","%=","%~","%>","%(","%)","%&","%M","%H","%\xc4"],getName:function(){return"EndNote"},doRead:function(e){var t=[];if("string"==typeof e){e.indexOf("%[")>=0&&e.indexOf("%[ ")<0&&(e=e.replace("%[","%[ ")),e.indexOf("%(")>=0&&e.indexOf("%( ")<0&&(e=e.replace("%(","%( "));for(var r=e.split(/\n+/),a=0,i=0;i<r.length;i++)r[i].match(/^\s*%/)&&a++;if(a/r.length>.1)t=this._parseENW(e);else{e=e.replace(/<style/g,"<styletag").replace(/<\/style/g,"</styletag");var n=this.getXMLParser(e);t=this._parseXML(n)}}return t},_parseXML:function(e){this.debug&&console.log("parsing xml");var t,r,a,i=this,n=[];return $(e).find("record").each((function(){var e={};for(var o in i.mapXML)for(t=0;t<i.mapXML[o].rules.length;t++){var s=$(this).find(i.mapXML[o].rules[t]);if(s&&s.length>0)for(r=0;r<s.length;r++){a=m.Utils.normalizeString($(s[r]).text());var l="children",c="name";if(l in s[r]?l in s[r]&&"childNodes"in s[r]&&s[r].childNodes.length>=s[r][l].length&&(l="childNodes",c="tagName"):(l="childNodes",c="tagName"),i.mapXML[o].style&&s[r][l]){a="";for(var u=0;u<s[r][l].length;u++)if("styletag"==s[r][l][u][c]){var d=i._getAttribute(s[r][l][u],"face"),p=$(s[r][l][u]).text();"italic"==d?p="<i>"+p+"</i>":"superscript"==d?p="<sup>"+p+"</sup>":"subscript"==d&&(p="<sub>"+p+"</sub>"),a+=p}else 0==u&&1==s[r][l].length&&("type"in s[r][l][u]&&"cdata"==s[r][l][u].type?a+=s[r][l][u].children[0].data:a+=$(s[r][l][u]).text())}var h=i._getAttribute(s[r],"name");o in e||(e[o]=[]),"%0"==o&&h?e[o].push(h):e[o].push(a)}}n.push(e)})),this._processEntries(n)},_parseENW:function(e){this.debug&&console.log("parsing enw");var t,r=e.split(/\n+/),a=[],i=[],n=0;for(t in r)r[t].match(/^\s*%0\s/)&&n++;if(1==n)a.push(r);else if(n>1){for(t in r)r[t].match(/^\s*%0\s/)&&(i.length>0&&a.push(i),i=[]),i.push(r[t]);a.push(i)}for(i=[],t=0;t<a.length;t++){var o={},s="empty";for(var l in a[t])if(a[t][l].match(/^\s*(%.)\s+(.*)/)){s=RegExp.$1;var c=RegExp.$2;c=c.replace(/\r/g,""),o[s]||(o[s]=[]),o[s].push(c)}else""==a[t][l]||a[t][l].match(/^\s+$/)||(o[s]||(o[s]=[]),o[s].push(a[t][l]));i.push(o)}return this._processEntries(i)},_processEntries:function(e){for(var t=[],r=0;r<e.length;r++){this.fire("progress",{progress:r/e.length,totalCount:e.length});var a=e[r];this.debug&&console.log(JSON.stringify(a,null,2));var i={pubtype:"PP_ARTICLE"};if(a["%0"]&&a["%0"][0]){var n=m.library.PublicationTypes.getInputTypeForPub(a["%0"][0].toUpperCase(),"endnote");i.pubtype=n.pubtype,n.kind&&(i.kind=n.kind),"PP_MISC"==i.pubtype&&(i.kind=a["%0"][0])}a=this._modifyFieldsByReferenceType(a,i);var o=m.library.PublicationFields.getInputMapForPubType(i.pubtype,"endnote");if(this.debug){for(var s=Object.keys(a),l={},c=0;c<s.length;c++)void 0===o[s[c]]&&(l[s[c]]=m.Utils.clone(a[s[c]]));console.log("not in map:",JSON.stringify(l,null,2));var u=Object.keys(o),d={};for(c=0;c<u.length;c++)void 0===a[u[c]]&&(d[u[c]]=o[u[c]]);console.log("unused:",JSON.stringify(d,null,2))}for(var p in o["%D"]="published",o["%8"]="published",o["%>"]="external_pdf_filename",this.debug&&console.log("map:",JSON.stringify(o,null,2)),this.hierarchy){var h=a[this.hierarchy[p]];if(h){for(var g=0;g<h.length;g++)h[g]=h[g].replace(/^\s+/,"").replace(/\s+$/,""),h[g]=h[g].replace(/\s+/g," ");var f=o[this.hierarchy[p]];if(!f)continue;if("author"==f||"editor"==f||"contributor"==f||"translator"==f||"series_editor"==f)for(var c in h){var b=m.library.Author.parseAuthor(h[c],{familyNameFirst:!1});i[f]||(i[f]=[]),i[f].push(b)}else if("published"==f||"accessed"==f||"filed"==f){var y=m.library.Date.parseDate(h[0]);f in i?i[f].year&&y.year?y.year==i[f].year&&y.month&&(i[f]=y):!i[f].year||i[f].month||i[f].day||y.year||y.month&&(i[f].month=y.month,y.day&&(i[f].day=y.day)):y.year&&(i[f]=y)}else if("url"==f){i[f]||(i[f]=[]);for(var v=0;v<h.length;v++)h[v].split(/[\n\t\r\s]+/).forEach((function(e){e.match(/^(http|ftp)/)&&i[f].push(e)}))}else if("note"==f)i[f]=h.join(" ");else if("isbn"==f){var _=m.Utils.extractISBNs(h.join(" "),{convert:!0,unique:!0,normalize:!0});_[0]&&(i.isbn=_[0]),_[1]&&(i.isbn_alt=_[1])}else if("issn"==f){i[f]||(i[f]=[]),h[0].split(/(\d{4}-[X\d]{4})/).forEach((function(e){e.match(/(\d{4}-[X\d]{4})/)&&i[f].push(e)}))}else if("external_pdf_filename"==f)for(v=0;v<h.length;v++)h[v].match(/^internal-pdf/)||h[v].match(/^file:\/\//)?(f in i||(i[f]=[]),i[f].push(h[v].replace(/(file|internal-pdf):\/\//,""))):h[v].match(/^https?:\/\//)&&("url"in i||(i.url=[]),i.url.push(h[v]));else"keywords"==f?i[f]=h.join("; "):i[f]||(i[f]=h[0])}}if("external_pdf_filename"in i&&(i.external_pdf_filename=m.Utils.joinExternalPDFFilenames(i.external_pdf_filename)),"PP_ARTICLE"===i.pubtype&&i.booktitle&&!i.journal&&(i.journal=i.booktitle,delete i.booktitle),"PP_BOOK"===i.pubtype&&i.booktitle&&i.title&&(i.kind&&"Proceedings"===i.kind?i.pubtype="PP_CONFERENCE_PAPER":i.pages&&i.pages.match(/\s*\d+\s*-\s*\d+\s*/)&&(i.pubtype="PP_BOOK_CHAPTER")),"PP_THESIS"===i.pubtype&&(i.publisher&&!i.school&&(i.school=i.publisher,delete i.publisher),i.contributor&&!i.editor&&(i.editor=i.contributor,delete i.contributor)),"PP_VIDEO"===i.pubtype&&i.translator&&!i.contributor&&(i.contributor=i.translator,delete i.translator),a["%0"]){if("Conference Proceedings"!=a["%0"][0]&&"Dataset"!=a["%0"][0]||(delete i.translator,delete i.journal),"Equation"!=a["%0"][0]&&"Figure"!=a["%0"][0]&&"Pamphlet"!=a["%0"][0]||(delete i.editor,delete i.journal),"Map"!=a["%0"][0]&&"Music"!=a["%0"][0]||(delete i.journal,delete i.translator),"Edited Book"==a["%0"][0]){var w=i.author,P=i.editor;P&&(i.series_editor=P),w&&(i.editor=w,delete i.author)}}else i.pubtype="PP_ARTICLE";if(i.language){var S=m.Utils.normalizeLanguage(i.language);S&&2==S.length&&(i.language=S)}t.push(i)}return this.debug&&console.log("returning:",JSON.stringify(t,null,2)),t},_modifyFieldsByReferenceType:function(e,t){return"PP_BOOK"!=t.pubtype&&"PP_BOOK_CHAPTER"!=t.pubtype&&"PP_MISC"!=t.pubtype||(e["%O"]=e["%("],delete e["%("]),"PP_PATENT"==t.pubtype&&(delete e["%Y"],delete e["%B"]),"PP_BOOK"==t.pubtype&&e["%B"]&&!e["%S"]&&(e["%S"]=e["%B"],delete e["%B"]),"PP_ARTICLE"==t.pubtype&&(e["%B"]&&!e["%J"]&&(e["%J"]=e["%B"],delete e["%B"]),e["%3"]&&!e["%R"]&&(e["%R"]=e["%3"],delete e["%3"])),e["%0"]&&"Electronic Article"==e["%0"][0]&&e["%3"]&&(e["%]"]=e["%3"],delete e["%3"]),e["%0"]&&"Journal Article"==e["%0"][0]&&e["%2"]&&(e["%]"]=e["%2"],delete e["%2"]),e["%M"]&&!e["%R"]&&e["%M"][0].match(/10\.\d\d\d\d\/.+/)&&(e["%R"]=e["%M"],delete e["%M"]),e}}),m.format.EndNote=new m.format._EndNote,m.format._FederalRegister=m.format.AbstractReader.extend({getName:function(){return"FederalRegister"},doRead:function(e){var t=this._readHTML(e);return m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t={pubtype:"PP_MISC",journal:"Federal Register"},r=$(e).find("#metadata_content_area > h1").text();t.title=r;var a=$(e).find(".agencies a").text();t.author=[{collective:a}];var i=$(e).find(".date").text().split(" ");3==(i=i[0].split("/")).length&&(t.published={year:i[2],month:i[0],day:i[1]});for(var n=0;n<$(e).find("h1").length;n++){switch($(e).find("#h-"+n).text().trim()){case"AGENCY:":if(t.author)break;a=$(e).find("#h-"+n).next().text(),t.author=[{collective:a}];break;case"SUMMARY:":var o=$(e).find("#h-"+n).next().text();o&&(t.abstract=o)}}for(var s=$(e).find("dt"),l=0;l<s.length;l++){switch($(s[l]).text().trim()){case"Publication Date:":if(t.published)break;3==(i=(i=$(s[l]).next().text().trim().split(" "))[0].split("/")).length&&(t.published={year:i[2],month:i[0],day:i[1]});break;case"Document Citation:":var c=$(s[l]).next().text().trim().match(/(\d+) FR/);c&&c[1]&&(t.volume=c[1]);break;case"Page:":var u=$(s[l]).next().text().trim().match(/(\d+-\d+)/);u&&u[1]&&(t.pages=u[1]);break;case"Shorter Document URL":var d=$(s[l]).next().text().trim().match(/(http\S+)/);d&&d[1]&&(t.url=[d[1]]);break;case"Scheduled Publication Date:":t.title+=" [Public Inspection Version]";break;case"Filed at:":if(t.published)break;3==(i=(i=$(s[l]).next().text().trim().split(" "))[0].split("/")).length&&(t.published={year:i[2],month:i[0],day:i[1]});break;case"Document Number:":var p=$(s[l]).next().text().trim();p&&(t.number=p)}}return t}}),m.format.FederalRegister=new m.format._FederalRegister,m.format._GoogleArts=m.format.AbstractReader.extend({doRead:function(e){try{var t=JSON.parse(e),r=this._readJSON(t);return m.library.Publication.autoClean(r),[r]}catch(e){return[null]}},_readJSON:function(e){var t={pubtype:"PP_ARTWORK"};if(e&&e[2]&&e[2][12])for(var r=e[2][12],a=0;a<r.length;a++){var i=r[a][0],n=r[a][1][0][0];if(i&&n)if(i.match(/title/i))t.title=n;else if(i.match(/date/i))n.match(/^\d{4}$/)?t.published||(t.published={year:n}):t.published||(t.published={literal:n});else if(i.match(/(artist$|creator$|painter$|sculptor$|geographer$|photographer$)/i)){if(i.match(/biography/i))continue;if(n.match(/unknown/i))continue;t.author||(t.author=[]);var o=n.replace(/\sI$/,"");t.author.push(m.library.Author.parseAuthor(o,{familyNameFirst:!1}))}else if(i.match(/dimension/i))t.scale=n;else if(i.match(/(collect|source credit)/i)){var s=n.split(", ");t.institution=s[0],s.length>1&&(s=s.slice(1),t.address=s.join(", "))}else i.match(/publisher/i)?t.institution||(t.institution=n):i.match(/Type/)?(n.match(/paint/i)&&(t.kind="Painting"),n.match(/draw/i)&&(t.kind="Drawing"),n.match(/photo/i)&&(t.kind="Photography"),n.match(/(sculpture|figure)/i)&&(t.kind="Sculpture"),n.match(/calligraph/i)&&(t.kind="Calligraphy")):i.match(/medium/i)?t.medium=n:i.match(/number/i)?t.number=n:i.match(/^location$/i)&&(t.address=n)}if(e&&e[2]&&e[2][5]&&e[2][5][1]){var l=e[2][5][1],c=m.String.stripHtml(l);c&&c.length&&(t.abstract=c)}(!t.published&&e&&e[2]&&e[2][3]&&(e[2][3].match(/^\d{4}$/)?t.published={year:e[2][3]}:t.published={literal:e[2][3]}),!t.author&&e&&e[2]&&e[2][6]&&e[2][6][0])&&((o=e[2][6][0])&&o.toLowerCase().indexOf("unknown")<0&&(t.author||(t.author=[]),o=o.replace(/\sI$/,""),t.author.push(m.library.Author.parseAuthor(o,{familyNameFirst:!1}))));return!t.title&&e&&e[2]&&e[2][2]&&"string"==typeof e[2][2]&&e[2][2].toLowerCase().indexOf("unknown")<0&&(t.title=e[2][2]),!t.institution&&e&&e[2]&&e[2][7]&&e[2][7][0]&&(t.institution=e[2][7][0]),t},getName:function(){return"Google Arts"}}),m.format.GoogleArts=new m.format._GoogleArts,m.format._GoogleScholarCitations=m.format.AbstractReader.extend({doRead:function(e){var t=this._readHTML(e);return m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t={Authors:"author",Author:"author","Publication date":"published",Journal:"journal",Volume:"volume",Issue:"issue",Pages:"pages",Page:"pages",Publisher:"publisher",Description:"abstract"},r={pubtype:"PP_ARTICLE",url:[]},a=$("<div>"+e+"</div>"),i=a.find("a.gsc_oci_title_link");i&&(r.title=this.normalizeStr(i.text().trim()),(l=i.attr("href"))&&r.url.push(l));var n=a.find("div.gsc_oci_title_ggi > a");n&&((l=n.attr("href"))&&r.url.push(l));for(var o=[],s=0;s<r.url.length;s+=1){var l,c=(l=r.url[s]).match(/.*\/(PMC\d+)/i);if(c&&c[1]&&(r.pmc=c[1],o.push(s)),(c=l.match(/.+[=/:?](10\.\d{4,5}[/%2F][^?&]{3,})/))&&c[1]){var u=decodeURIComponent(c[1]).toLowerCase().replace(/\/$/,""),d=/[./](abstract|abs|pdf|php|event_abstract|front-matter|full|fulltext|summary|short|html|htm|xml)$/i;r.doi=u.replace(d,"").replace(d,"").replace(/\/$/,"").replace(/^\s+/,"")}}var p=[];for(s=0;s<r.url.length;s+=1)o.includes(s)||p.push(r.url[s]);r.url=p;var h=a.find("div.gs_scl").toArray();for(s=0;s<h.length;s+=1){var g=$(h[s]).find("div.gsc_oci_field").text().trim(),f=$(h[s]).find("div.gsc_oci_value").text().trim();if(g&&f&&t[g]){var b=t[g];if("author"===b){var y=this.normalizeStr(f),v=m.library.Author.parseAuthorList(y,{familyNameFirst:!1});r[b]=v}else if("published"===b){var _=f.split("/");r.published={},_[0]&&(r.published.year=_[0]),_[1]&&(r.published.month=_[1]),_[2]&&(r.published.day=_[2])}else r[b]=this.normalizeStr(f)}}return r},normalizeStr:function(e){var t="";return e&&(t=e.replace(/^[\n\t\r\s]+/,"").replace(/[\n\t\r\s]+$/,"").replace(/[\t\r\n\s]+/g," ")),t},getName:function(){return"GoogleScholarCitations"}}),m.format.GoogleScholarCitations=new m.format._GoogleScholarCitations,m.format._GoogleScholarCases=m.format.AbstractReader.extend({doRead:function(e){var t=this._readHTML(e);return m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t={pubtype:"PP_CASE"},r=$("<div>"+e+"</div>"),a=r.find("#gsl_case_name");if(a){var i=this.normalizeStr(a.text());t.title=m.String.toTitleCase(i)}var n=r.find("#gs_opinion center").last();if(n){var o=n.text(),s="";o.match(/(\d+),/)&&(s=RegExp.$1),o=s+" "+o.replace(/\d+,\s/,"").replace(/\.$/,""),t.published=m.library.Date.parseDate(o)}var l=r.find("#gs_opinion center").first();if(l){var c=l.text();(c=c.split(" "))[0]&&(t.volume=c[0]),c[1]&&(t.journal=c[1]),c[2]&&(t.pages=c[2]),!t.published.year&&c[3]&&(t.published.year=c[3].replace(/\((\d+)\)/,"$1"))}var u=r.find("#gs_opinion center a");if(u&&(t.number=u.text()),l=r.find("#gs_hdr_md h1")||null){var d=l.text().split("-").pop().replace(/\d+$/,"").split(",");if(d[0]){t.court=this.normalizeStr(d[0]);var p,h=t.court.match(/(.+):(.+)/);if(h&&h[2])t.court=this.normalizeStr(h[2]),(p=m.library.Jurisdictions.getJurisdiction(h[1])).jurisdiction&&(t.jurisdiction=p.jurisdiction)}if(!t.jurisdiction&&d[1])(p=m.library.Jurisdictions.getJurisdiction(this.normalizeStr(d[1]))).jurisdiction&&(t.jurisdiction=p.jurisdiction)}return m.library.Publication.autoCleanLegalDocs(t),"jurisdiction"in t||(t.jurisdiction="United States"),t},normalizeStr:function(e){var t="";return e&&(t=e.replace(/^[\n\t\r\s]+/,"").replace(/[\n\t\r\s]+$/,"").replace(/[\t\r\n\s]+/g," ")),t},getName:function(){return"GoogleScholarCases"}}),m.format.GoogleScholarCases=new m.format._GoogleScholarCases,m.format._HTML=m.format.AbstractReader.extend({getName:function(){return"HTML"},doRead:function(e,t){return void 0===t&&(t={parseImages:!1}),this._readHTML(e,t)},getMetaTags:function(e,t){var r=t.text(),a=this;if("undefined"!=typeof HTMLDocument&&(e instanceof HTMLDocument||e instanceof XMLDocument||e instanceof Document)){var i="",n=e.getElementsByTagName("head");n.length>0&&(i+=$(n[0]).html());var o=e.getElementsByTagName("body");o.length>0&&(i+=$(o[0]).html()),e=i,i=""}var s,l=new RegExp("("+["related-?post","related-?article","popular-?article","popular-?post","recent-?post","recent-?article","\\.node-commentary","other-?stories","story-frag-list","top-stories","read-more","comment"].join("|")+")"),c=function(e,t){var r=!0;return e.split(/\s+/).forEach((function(e){e.match(/^[a-z]+$/i)&&(t.match(new RegExp(e),"i")||(r=!1))})),r};try{s=t.find("meta, title, link")}catch(e){s=[]}var u=[],d=e.indexOf("<html");if(d>-1){var p=e.substr(d,d+150).replace(/[\s\n\t\r]+/g," ").match(/lang\s*=\s*"([^"]+)"/);p&&p[1]&&u.push(a._newMetaTag("HTML:LANG",p[1]))}for(var h={},g=0;g<s.length;g++){var f=s[g],b=!1,y=!1,v=!1;if("undefined"!=typeof HTMLMetaElement?(f instanceof HTMLMetaElement&&(b=!0),f instanceof HTMLTitleElement&&(y=!0),f instanceof HTMLLinkElement&&(v=!0)):"type"in f&&"name"in f&&("tag"==f.type&&"meta"==f.name&&(b=!0),"tag"==f.type&&"title"==f.name&&(y=!0),"tag"==f.type&&"link"==f.name&&(v=!0)),v){if(!(R=$(f)[0]))continue;var _=a._getAttribute(R,"rel"),w=a._getAttribute(R,"href"),P=a._getAttribute(R,"sizes");if(_&&_.match(/(apple-touch-icon|icon)/i)&&w&&w.match(w.match(/^http/))){var S="1";if(P){var C=P.split(/x/);if(C&&C[0]&&C[0].match(/^\d+/)){var A=parseInt(C[0]);A>=192?S="6":A>=180?S="5":A>=152?S="4":A>=120?S="3":A>=76&&(S="2")}}u.push(a._newMetaTag("LINKICON:"+S,w))}}if(b){if(!(R=$(f)[0]))continue;var E=a._getAttribute(R,"name");if(E||(E=a._getAttribute(R,"property"))||(E=a._getAttribute(R,"itemprop")),!E)continue;var T=a._getAttribute(R,"content");if(!T)continue;if(a._getPath(R).match(l))continue;if(E.match(/DC:(.+)/)&&(E="DC."+RegExp.$1),E.match(/PRISM:(.+)/)&&(E="PRISM."+RegExp.$1),("SAILTHRU.AUTHOR"===(E=E.toUpperCase())||"SAILTHRU.AUTHOR_NAME"===E)&&T.match(/(href=|&lt;span|title=|rel=)/))continue;if("DCTERMS.CREATOR"===E&&T.match(/@/))continue;if(E.match(/creator/i)&&!c(T,r))continue;if("PARSELY-PAGE"===E){var k=null;try{k=JSON.parse(T)}catch(e){}k&&("title"in k&&m.Utils.isString(k.title)&&u.push(a._newMetaTag("PARSELY-TITLE",k.title)),"author"in k&&m.Utils.isString(k.author)&&u.push(a._newMetaTag("PARSELY-AUTHOR",k.author)),"link"in k&&m.Utils.isString(k.link)&&u.push(a._newMetaTag("PARSELY-URL",k.link.replace(/\\\//g,"/"))),"pub_date"in k&&m.Utils.isString(k.pub_date)&&u.push(a._newMetaTag("PARSELY-PUB-DATE",k.pub_date)));continue}if(T.match(/\|\[/)){T=(T=T.replace(/\|\[/g,"&")).replace(/\]\|/g,";");var x=document.createElement("span");x.innerHTML=T,T=x.innerText}h[E]=!0,a._setAttribute(R,"name",E),a._setAttribute(R,"content",T),u.push(R)}else if(y){var R=$(f)[0];$(R).text()&&(a._setAttribute(R,"name","WEBSITE_TITLE"),a._setAttribute(R,"content",$(R).text()),h.WEBSITE_TITLE=!0,u.push(R))}}var I=[{pattern:'a[rel="author"]',data:[],group:1},{pattern:'span[itemprop="author"]',data:[],group:1},{pattern:'a[itemprop="author"]',data:[],group:1},{pattern:'span[property="schema:author"]',data:[],group:1},{pattern:'div[itemprop="creator"] span[itemprop="name"]',data:[],group:1},{pattern:"div.authorName > a",data:[],group:1},{pattern:".author-name",data:[],group:1},{pattern:".author_name",data:[],group:1},{pattern:".aos-ArticleAuthor",data:[],group:1},{pattern:'.post-author > a[href*="author"]',data:[],group:1},{pattern:"span.author.vcard > a",data:[],group:1},{pattern:"a.author-link",data:[],group:1},{pattern:'.author > a[href*="author"]',data:[],group:1},{pattern:'.author-card a[href*="author"]',data:[],group:1},{pattern:'p[itemprop="author"] span[itemprop="name"]',data:[],group:1},{pattern:'div[itemprop="author"] div[itemprop="name"]',data:[],group:1},{pattern:'a[href*="/author/"]',data:[],group:2},{pattern:'a[href*="/authors/"]',data:[],group:2},{pattern:'a[href*="/editor/"]',data:[],group:2},{pattern:'a[href*="/editors/"]',data:[],group:2},{pattern:'a[href*="/staff/"]',data:[],group:2},{pattern:'a[href*="/contributor/"]',data:[],group:2},{pattern:'a[href*="/contributors/"]',data:[],group:2},{pattern:'a[href*="/people/"]',data:[],group:2},{pattern:'a[href*="/team/"]',data:[],group:2},{pattern:'a.author[href*="mailto"]',data:[],group:2},{pattern:'span[class*="author"]',data:[],group:3},{pattern:'b[class*="author"]',data:[],group:3},{pattern:'h2[class*="author"]',data:[],group:3},{pattern:'h3[class*="author"]',data:[],group:3},{pattern:'h4[class*="author"]',data:[],group:3},{pattern:'p[class*="author"]',data:[],group:3},{pattern:'div[class*="author"]',data:[],group:3},{pattern:'span[class*="authors"]',data:[],group:3},{pattern:'h2[class*="authors"]',data:[],group:3},{pattern:'h3[class*="authors"]',data:[],group:3},{pattern:'h4[class*="authors"]',data:[],group:3},{pattern:'p[class*="authors"]',data:[],group:3},{pattern:'div[class*="authors"]',data:[],group:3},{pattern:'span[class*="byline"]',data:[],group:3},{pattern:'span[class*="byl"]',data:[],group:3},{pattern:'p[class*="byline"]',data:[],group:3},{pattern:'cite[class*="byline"]',data:[],group:3},{pattern:'div[class*="byline"] > div[class*="name"]',data:[],group:3},{pattern:"span#byline",data:[],group:3}],L=function(e,t){var r=[];return e.forEach((function(e,a){e.group===t&&r.push(e.pattern)})),r},D=function(e,t,r){for(var a=0;a<t.length;a++){var i=r._getPath(s[a]);e.forEach((function(e,t){if($(s[a]).is(e.pattern)){var r=m.Utils.normalizeString($(s[a]).text()),n=$(s[a]).attr("href")||"";r.length>2&&e.data.push({content:r,path:i,depth:i.split(" ").length,href:n})}if(e.pattern.match(/a\[href/)){var o=[],l={};e.data.forEach((function(e){e.href&&!(e.href in l)&&(o.push(e),l[e.href]=1)})),e.data=o}if(e.group>=2){o=[];e.data.forEach((function(t){t.depth===e.data[0].depth&&o.push(t)})),e.data=o}}))}},N=function(e,t,r,a,i){for(var n=0,o=0;o<e.length;o++)if(e[o].data.length>0&&e[o].group===i){for(var s=0;s<e[o].data.length;s++)if(!e[o].data[s].path.match(t)){var l=!0;e[o].data[s].content.match(/\s/)||(l=!1),e[o].data[s].content.length<=3&&(l=!1),m.library.Author.isTainted(e[o].data[s].content)&&(l=!1),2===i&&(e[o].data.length>3&&(l=!1),e[o].data[s].content.split(/\s+/).length>4&&(l=!1)),3===i&&(e[o].data.length>1&&(l=!1),e[o].data[s].content.split(/\s+/).length>3&&(l=!1)),l&&(r.push(a._newMetaTag("BODY_AUTHORS",e[o].data[s].content)),n=1)}if(n)break}return n},O=L(I,1);D(I,s=t.find(O.join(",")),a);var U=N(I,l,u,a,1);if(U||(O=L(I,2),D(I,s=t.find(O.join(",")),a),U=N(I,l,u,a,2)),U||(O=L(I,3),D(I,s=t.find(O.join(",")),a),U=N(I,l,u,a,3)),e){var M=e.match(/EBcitation\s*=\s*(\{[^\}]+\});\s*/);if(M&&2==M.length)try{var F=JSON.parse(M[1]);F&&(F.page&&u.push(a._newMetaTag("EB_PAGE",F.page)),F.site&&u.push(a._newMetaTag("EB_SITE",F.site)),F.date&&u.push(a._newMetaTag("EB_DATE",F.date)),F.authors&&u.push(a._newMetaTag("EB_AUTHORS",F.authors)))}catch(e){}if(e.match(/brightspot-dataLayer/)){var j=e.match(/&quot;author&quot;\s*:\s*&quot;(.+)&quot;,/);j&&j[1]&&u.push(a._newMetaTag("BRIGHTSPOT_AUTHORS",j[1]))}if(e.match(/name="twitter:label1" content="Written by"/)){var B=e.match(/name="twitter:data1" content="([^"]+)"/);B&&B[1]&&u.push(a._newMetaTag("TWITTER_DATA_AUTHORS",B[1]))}}var z=t.find('time[itemprop="datePublished"]');if(z&&z.length>0)for(g=0;g<z.length;g++)if(!a._getPath(z[g]).match(l)){var H=E=a._getAttribute(z[g],"datetime");H&&u.push(a._newMetaTag("BODY_DATE",H))}return e.replace(/<meta\s+name\s*=\s*["']([^'"]+)['"]\s*content\s*=['"]([^'"]+)['"]\s*?\/?>/gim,(function(e,t,i){if(!h[t.toUpperCase()]){var n=1;"DCTERMS.CREATOR"===t.toUpperCase()&&i.match(/@/)&&(n=0),t.match(/creator/i)&&(c(i,r)||(n=0)),n&&u.push(a._newMetaTag(t.toUpperCase(),i))}})),u},_checkMetaTagValue:function(e){var t=!0,r=this._getAttribute(e,"name"),a=this._getAttribute(e,"content");return["null","na","n/a","NA","N/A","","undefined","Array"].indexOf(a)>-1&&(t=!1),["CITATION_JOURNAL_TITLE","CITATION_JOURNAL_TITLE_ABBREV","CITATION_JOURNAL_ABBREV"].indexOf(r)>-1&&a&&a.match(/^\d+$/)&&(t=!1),t},_readHTML:function(e,t){var r=$("<div>"+e+"</div>"),a=this.getMetaTags(e,r),i=[];i[0]=[];for(var n=0;n<a.length;n++)if("CITATION_REFERENCE"===this._getAttribute(a[n],"name")){for(var o=this._getAttribute(a[n],"content"),s=(o=(o=o.replace(/;\s*$/,"")).replace(/[\n\r]+/g," ")).split(/;?\s*(citation_[A-Z_]+)\s*=/i),l="",c=!1,u=0;u<s.length-1;u++)s[u].match(/^citation_[A-Z_]+$/i)&&(s[u+1].match(/^citation_[A-Z_]+$/i)||(l+='<meta name="'+s[u]+'" content="',l+=s[u+1]+'">\n',s[u].match(/citation_title/i)&&(c=!0),s[u].match(/citation_author/i)&&(c=!0),u++));if(c){var d=this.getMetaTags(l,$("<div>"+l+"</div>"));i.push(d)}}else this._checkMetaTagValue(a[n])&&i[0].push(a[n]);var p=!1;m.Utils.isObject(t)&&"parseImages"in t&&!0===t.parseImages&&(p=!0);var h=[];for(n=0;n<i.length;n++){var g=this._parseDOM(i[n]);if(p||delete g.imageurl,g.startpage&&g.startpage===g.endpage){var f=g.startpage.split(/[-\u2013]/);2==f.length&&(g.startpage=f[0],g.endpage=f[1])}h.push(g)}var b=[];r.find('script[type="application/ld+json"]').each((function(e,t){t&&t.children&&t.children[0]&&t.children[0].data?b.push(t.children[0].data):b.push($(t).text())}));var y=[];b.forEach((function(e){try{e.match(/<\!\[CDATA\[/g)&&(e=e.replace(/\/*<\!\[CDATA\[/g,"").replace(/\/*\]\]>[\s\n\r\t]*$/,""));var t=JSON.parse(e);m.Utils.isArray(t)?t.forEach((function(e){y.push(e)})):m.Utils.isObject(t)&&(t["@type"]||t["@graph"])&&y.push(t)}catch(e){}})),y=m.Utils.isArray(y)&&y[0]&&(y[0]["@type"]||y[0]["@graph"])?y.map((function(e){return{json:e}})):[];var v=m.format.JSONLD.doRead(y);if(v&&v[0]&&h&&h[0])if(h[0].pubtype===v[0].pubtype){for(var _ in v[0])if("pubtype"!==_&&v[0][_])if("title"===_)h[0][_]&&h[0][_].length<v[0][_].length&&(h[0][_]=v[0][_]);else if("author"===_){var w=!!(v[0].author&&v[0].author.length>0)&&v[0].author.every((function(e){return!!e.first})),P=!!(h[0].author&&h[0].author.length>0)&&h[0].author.every((function(e){return!!e.first}));h[0].body_authors&&(P=!1),!0===w&&!1===P&&(h[0][_]=v[0][_])}else h[0][_]&&h[0][_].length||!v[0][_]||(h[0][_]=v[0][_])}else if(v[0]&&!["PP_MISC","PP_WEBSITE"].includes(v[0].pubtype)){w=!!(v[0].author&&v[0].author.length>0)&&v[0].author.every((function(e){return!!e.first})),P=!!(h[0].author&&h[0].author.length>0)&&h[0].author.every((function(e){return!!e.first}));h[0].body_authors&&(P=!1),!1===w&&!0===P&&delete v[0].author,h[0]=Object.assign(h[0],v[0])}if(h&&h[0]&&(!["PP_BOOK","PP_BOOK_CHAPTER","PP_CONFERENCE_PAPER","PP_WEBSITE"].includes(h[0].pubtype)&&h[0].booktitle&&(h[0].journal=h[0].booktitle,delete h[0].booktitle),m.library.Publication.removeNonPubtypeSpecificFields(h[0])),h[0]&&["PP_WEBSITE","PP_NEWS_ARTICLE","PP_BOOK"].includes(h[0].pubtype)){var S=h[0]&&h[0].title?h[0].title:"";S=S.replace(/\s+$/,"");var C=r.find("h1"),A="";C&&1===C.length&&C[0]&&$(C[0]).text()&&(A=$(C[0]).text().replace(/[\n\r\t\s]+/g," ").replace(/^\s+/,"").replace(/\s+$/,"")),A&&A.length>3&&(S.length<=3||h[0]._tmptitle&&h[0]._tmptitle["OG:TITLE"]&&h[0]._tmptitle["OG:TITLE"].indexOf(A)>-1||h[0]._tmptitle&&h[0]._tmptitle["TWITTER:TITLE"]&&h[0]._tmptitle["TWITTER:TITLE"].indexOf(A)>-1||h[0]._tmptitle&&h[0]._tmptitle.WEBSITE_TITLE&&h[0]._tmptitle.WEBSITE_TITLE.indexOf(A)>-1)&&(S=A),h[0].title=S}for(n=0;n<h.length;n++)delete h[n]._tmptitle,h[n].publisher&&m.Utils.isString(h[n].publisher)&&h[n].publisher.match(/^http/)&&delete h[n].publisher,h[n].journal&&m.Utils.isString(h[n].journal)&&h[n].journal.match(/^http/)&&delete h[n].journal;h=m.format.Newspapers.doRead(h);for(var E=0;E<h.length;E+=1)if(["PP_WEBSITE","PP_NEWS_ARTICLE"].includes(h[E].pubtype)){if(h[E].booktitle&&h[E].booktitle.match(/^[A-Z\s\-\.\d]+$/i)){var T=h[E].title.replace(new RegExp(h[E].booktitle+"\\s*$","i"),"");(T=T.replace(/\s*[\-\|]\s*$/,"")).length>3&&(h[E].title=T)}h[E].title=h[E].title.replace(/\|.+$/,"").trim()}h[0]&&"PP_WEBSITE"===h[0].pubtype&&(h[0].language_tmp&&!h[0].language&&(h[0].language=h[0].language_tmp),h[0].publisher&&h[0].booktitle&&h[0].publisher.toLowerCase().replace(/[\s:.;,]+/,"")===h[0].booktitle.toLowerCase().replace(/[\s:.;,]+/,"")&&delete h[0].publisher);return delete h[0].language_tmp,delete h[0].body_authors,h[0]&&h[0].url&&m.Utils.isArray(h[0].url)&&(h[0].url=h[0].url.filter((function(e){if(e.match(/^https?:\/\/.+\..+\//))return e}))),h},_newMetaTag:function(e,t){var r;return r="undefined"!=typeof document?document.createElement("meta"):$("<meta></meta>")[0],this._setAttribute(r,"name",e),this._setAttribute(r,"content",t),r},_parseDOM:function(e){var t={GoogleAuthors:{CITATION_AUTHOR:"author",CITATION_AUTHORS:"author"},Google:{CITATION_INBOOK_TITLE:"booktitle",CITATION_ABSTRACT:"abstract",CITATION_ABSTRACT_HTML_URL:"url",CITATION_ARXIV_ID:"arxivid",CITATION_BOOK_TITLE:"booktitle",CITATION_CONFERENCE:"booktitle",CITATION_CONFERENCE_TITLE:"booktitle",CITATION_DATE:"published",CITATION_DISSERTATION_INSTITUTION:"school",CITATION_END_DATE:"dateend",CITATION_TECHNICAL_REPORT_INSTITUTION:"institution",CITATION_TECHNICAL_REPORT_NUMBER:"number",CITATION_DOI:"doi",CITATION_FIRSTPAGE:"startpage",CITATION_FULLTEXT_HTML_URL:"url",CITATION_ISBN:"isbn",CITATION_EISSN:"issn_alt",CITATION_PISSN:"issn",CITATION_ISSN:"issn",CITATION_ISSUE:"issue",CITATION_NUMBER:"issue",CITATION_JOURNAL_ISSN:"issn",CITATION_JOURNAL_TITLE:"journalfull",CITATION_JOURNAL_TITLE_ABBREV:"journal",CITATION_JOURNAL_ABBREV:"journal",CITATION_KEYWORD:"keywords",CITATION_KEYWORDS:"keywords",CITATION_LANGUAGE:"language",CITATION_LASTPAGE:"endpage",CITATION_LOCATION:"conference_location",CITATION_PATENT_NUMBER:"patent_number",CITATION_PATENT_APPLICATION_NUMBER:"application_number",CITATION_PATENT_PUBLICATION_NUMBER:"patent_number",CITATION_PDF_URL:"url",CITATION_PMID:"pmid",CITATION_PMCID:"pmc",CITATION_PROCEEDINGS:"booktitle",CITATION_PUBLIC_URL:"url",CITATION_PUBLICATION_DATE:"published",CITATION_PUBLISHER:"publisher",CITATION_SERIES_TITLE:"series",CITATION_START_DATE:"datestart",CITATION_TITLE:"title",CITATION_VOLUME:"volume",CITATION_YEAR:"published",CITATION_COVER_DATE:"published",CITATION_ONLINE_DATE:"published",CITATION_ZBL:"zbl",CITATION_MR:"mr"},DublinCore:{"DC.TITLE":"title","DC.CITATION.VOLUME":"volume","DC.CITATION.ISSUE":"issue","DC.CITATION.SPAGE":"startpage","DC.CITATION.EPAGE":"endpage","DC.CONTRIBUTOR":"author","DC.CONTRIBUTOR.PERSONALNAME":"author","DC.CREATOR":"author","DC.CREATOR.PERSONALNAME":"author","DC.CREATOR.CORPORATENAME":"author","DC.DESCRIPTION":"abstract","DC.IDENTIFIER":"doi","DC.IDENTIFIER.ISBN":"isbn","DC.IDENTIFIER.DOI":"doi","DC.IDENTIFIER.PAGENUMBER":"pages","DC.IDENTIFIER.URI":"url","DC.LANGUAGE":"language","DC.PUBLISHER":"publisher","DC.PUBLISHER.CORPORATENAME":"publisher","DC.SOURCE.ISSN":"issn","DC.SOURCE.EISSN":"issn_alt","DC.SOURCE.ISSUE":"issue","DC.SOURCE.VOLUME":"volume","DC.RELATION":"url","DC.RELATION.ISPARTOF":"journal","DCTERMS.ISREFERENCEDBY":"associated_doi","DCTERMS.ABSTRACT":"abstract","DCTERMS.CREATOR":"author","DCTERMS.PUBLISHER":"journal","DCTERMS.LANGUAGE":"language","DCTERMS.DATE":"published","DC.TYPE.ARTICLETYPE":"subtype","DC.TYPE":"subtype"},Prism:{"PRISM.ENDINGPAGE":"endpage","PRISM.DOI":"doi","PRISM.ISSUEIDENTIFIER":"issue","PRISM.ISBN":"isbn","PRISM.ISSN":"issn","PRISM.EISSN":"issn_alt","PRISM.NUMBER":"issue","PRISM.PUBLICATIONDATE":"published","PRISM.PUBLICATIONNAME":"journal","PRISM.STARTINGPAGE":"startpage","PRISM.VOLUME":"volume","PRISM.SECTION":"subtype","PRISM.TEASER":"abstract","PRISM.COVERDISPLAYDATE":"published"},EPrints:{"EPRINTS.ABSTRACT":"abstract","EPRINTS.BOOK_TITLE":"booktitle","EPRINTS.CREATORS_NAME":"author","EPRINTS.DATE":"published","EPRINTS.DEPARTMENT":"department","EPRINTS.DOCUMENT_URL":"url","EPRINTS.EDITORS_NAME":"editor","EPRINTS.EVENT_TITLE":"conference","EPRINTS.EVENT_LOCATION":"conference_location","EPRINTS.EVENT_DATES":"conference_date","EPRINTS.ID_NUMBER":"doi","EPRINTS.DOI":"doi","EPRINTS.INSTITUTION":"eprintsschool","EPRINTS.FACULTY_NAME":"school","EPRINTS.ISBN":"isbn","EPRINTS.ISSN":"issn","EPRINTS.ISSUE":"issue","EPRINTS.JOURNAL":"journal","EPRINTS.KEYWORDS":"keywords","EPRINTS.NUMBER":"issue","EPRINTS.OFFICIAL_URL":"url","EPRINTS.PAGES":"pages","EPRINTS.PAGERANGE":"pages","EPRINTS.PLACE_OF_PUB":"address","EPRINTS.PUBLICATION":"journal","EPRINTS.PUBLISHER":"publisher","EPRINTS.RELATED_URL_URL":"url","EPRINTS.SERIES":"series","EPRINTS.THESIS_TYPE":"genre","EPRINTS.TITLE":"title","EPRINTS.VOLUME":"volume"},Others:{EB_AUTHORS:"author",ARTICLE_AUTHOR:"author",BRIGHTSPOT_AUTHORS:"author","BOOK:AUTHOR":"author","BOOKS:AUTHOR":"author",WKHEALTH_AUTHORS:"author","OG:BOOK:AUTHOR":"author",LDJSON_AUTHOR:"author",LDJSON_CREATOR:"author","PARSELY-AUTHOR":"author","ARTICLE:AUTHOR_NAME":"author","BOOK.AUTHOR":"author",AUTHOR:"author","ARTICLE.AUTHOR":"author","ARTICLE:AUTHOR":"author","ARTICLE:AUTHORNAME":"author",RBAUTHORS:"author","HTTP://SCHEMA.ORG/AUTHOR":"author","DCSEXT.AUTHOR":"author",TWITTER_DATA_AUTHORS:"author","SAILTHRU.TITLE":"website_title","PARSELY-TITLE":"website_title","TWITTER:TITLE":"website_title","OG:TITLE":"website_title",EB_PAGE:"title",EB_SITE:"website_name",EB_DATE:"published","BOOK:TITLE":"title","BOOK:ISBN":"isbn","BOOKS:ISBN":"isbn","BOOK:RELEASE_DATE":"published","BOOKS:RELEASE_DATE":"published","BOOK:YEAR":"published","DC.DATE.CREATED":"published","DC.DATE":"published","DC.DATE.PUBLISHED":"published","DC.DATE.ISSUED":"published","DCTERMS.ISSUED":"published","DCSext.articleFirstPublished":"published",REVISED:"published","PPL.DOI":"doi","PPL.FIRSTPAGE":"startpage","PPL.ISSUE":"issue","PPL.LASTPAGE":"endpage","PPL.VOLUME":"volume",RFT_ATITLE:"title",RFT_DATE:"published",RFT_ID:"doi",RFT_ISSN:"issn",RFT_JTITLE:"journal",RFT_PUB:"publisher","WT.CG_S":"subtype",PMID:"pmid",ISSN:"issn",PATENT_ISSUED:"published",PATENT_FILED:"filed",PATENT_ASSIGNEE:"assignee",WKHEALTH_JOURNAL_TITLE:"journal",WKHEALTH_ISSUE:"issue",WKHEALTH_VOLUME:"volume",WKHEALTH_TITLE:"title",WKHEALTH_DOI:"doi",WKHEALTH_DATE:"published",WKHEALTH_ISSN:"issn",WKHEALTH_FIRSTPAGE:"startpage",WKHEALTH_ABSTRACT_HTML_URL:"url","OG:SITE_NAME":"website_name","OG:URL":"url","OG:ISBN":"isbn","OG:TYPE":"pubtype","OG:PUBLISHED_TIME":"published","OG:DESCRIPTION":"abstract","OG:BOOK:ISBN":"isbn","OG:VIDEO:URL":"url","OG:VIDEO:TAG":"keywords","OG:VIDEO:DURATION":"running_time","OG:IMAGE":"imageurl","OG:LOCALE":"language","TWITTER:IMAGE":"imageurl","TWITTER:IMAGE:SRC":"imageurl","PARSELY-IMAGE-URL":"imageurl",LDJSON_IMAGE:"imageurl","TWITTER:TEXT:ISBN":"isbn","VIDEO:TAG":"keywords",DESCRIPTION:"abstract",DATEPUBLISHED:"published",PUBDATE:"published",DASHBOARD_PUBLISHED_DATE:"published","VR:PUBLISHED_TIME":"published",DAT:"published",CRE:"journal","ARTICLE.ORIGHEADLINE":"title","ARTICLE.SUMMARY":"abstract","ARTICLE.PUBLISHED":"published","ARTICLE:PUBLISHED":"published","ARTICLE:PUBLISHED_TIME":"published","ARTICLE:PUBLICATIONDATE":"published","PAGE.CONTENT.SOURCE":"journal","BOOK.TITLE":"title","BOOK.ISBN":"isbn","BOOK.YEAR":"published",PUBLISHER:"publisher",FULLTEXT_HTML:"url",FULLTEXT_PDF:"url","PARSELY-URL":"url","PARSELY-PUB-DATE":"published","SAILTHRU.DATE":"published",RBPUBDATE:"published",RBTITLE:"title",RBPUBNAME:"website_name",RBMAINURL:"url",DURATION:"running_time","MODS.LCCN":"lccn","GOOD_READS:ISBN":"isbn","HTTP://SCHEMA.ORG/ISBN":"isbn","HTTP://SCHEMA.ORG/PUBLISHER":"publisher","HTTP://SCHEMA.ORG/BOOKEDITION":"edition","HTTP://SCHEMA.ORG/DATECREATED":"published","HTTP://PURL.ORG/DC/TERMS/IDENTIFIER":"doi",DOI:"doi",ISBN:"isbn","PARSED.JOURNAL":"journal","PARSED.VOLUME":"volume","PARSED.ISSUE":"issue","PARSED.PAGES":"pages","PARSED.YEAR":"published",ADVISOR:"editor","ST.ISBN":"isbn","ST.DOI":"doi","ST.PUBLISHER":"publisher",DATECREATED:"published",GWA_AUTHOR:"author",GWA_PUBDATE:"published",BODY_DATE:"published",ABSTRACT:"abstract",DATE:"published",LDJSON_TITLE:"title",LDJSON_URL:"url",LDJSON_PUBLISHER:"publisher"},NYTimes:{HDL:"title"},Others_Level2:{BODY_AUTHORS:"author","SAILTHRU.AUTHOR":"author","SAILTHRU.AUTHOR_NAME":"author","LINKICON:6":"imageurl","LINKICON:5":"imageurl","LINKICON:4":"imageurl","LINKICON:3":"imageurl","LINKICON:2":"imageurl","LINKICON:1":"imageurl","HTML:LANG":"language_tmp"},LastRessort:{WEBSITE_TITLE:"website_title"}};for(var r in t.Google)t.Others["BEPRESS_"+r]=t.Google[r];for(var r in t.GoogleAuthors)t.Others["BEPRESS_"+r]=t.GoogleAuthors[r];var a={},i={pubtype:"PP_ARTICLE",author:[],editor:[],url:[],imageurl:[],issn:[],keywords:[],abstract:""},n=0;for(r=0;r<e.length;r++){var o=e[r],s=this._getAttribute(o,"name"),l=this._getAttribute(o,"content"),c=this._getAttribute(o,"scheme");if(c&&(c=c.toUpperCase()),"DC.RELATION"!==s||"REFERENCES"!==c)if("DC.IDENTIFIER"==s&&c&&("PMID"==c&&(s="PMID"),"ISSN"==c&&(s="ISSN")),"DC.IDENTIFIER"==s&&(l.match(/oai:pubmedcentral/i)?s="CITATION_PMCID":l.match(/oai:arXiv/i)&&(s="CITATION_ARXIV_ID")),"DC.DATE"==s&&c&&("ISSUED"===c&&(s="PATENT_ISSUED"),"SUBMITTED"!==c&&"DATESUBMITTED"!==c||(s="PATENT_FILED")),"DCTERMS.ISPARTOF"==s&&l.match(/^urn:ISSN:(.*)/)&&(s="ISSN",l=RegExp.$1),"OG:TYPE"===s&&l.match(/^VIDEO/i))i.pubtype="PP_VIDEO";else{if("DC.TYPE"===s){if("PATENT APPLICATION"===l.toUpperCase()||"PATENT"===l.toUpperCase()){i.pubtype="PP_PATENT";continue}"CHAPTER"===l.toUpperCase()&&(i.pubtype="PP_BOOK_CHAPTER"),l.match(/THESIS/i)&&(i.pubtype="PP_THESIS"),"DATASET"===l.toUpperCase()&&(i.pubtype="PP_DATASET"),"PREPRINT"===l.toUpperCase()&&(i.pubtype="PP_PREPRINT")}if("EPRINTS.TYPE"===s&&(l.match(/THESIS/i)&&(i.pubtype="PP_THESIS"),l.match(/book_section/i)&&(i.pubtype="PP_BOOK_CHAPTER"),l.match(/conference/i)&&(i.pubtype="PP_CONFERENCE_PAPER")),"ARTICLE.ORIGHEADLINE"===s&&(i.pubtype="PP_NEWS_ARTICLE"),"RBTITLE"===s&&(i.pubtype="PP_WEBSITE"),"EB_PAGE"==s&&(i.pubtype="PP_WEBSITE"),"BOOK.TITLE"===s&&(i.pubtype="PP_BOOK"),"DC.CONTRIBUTOR"===s&&c&&"ASSIGNEE"===c&&(s="PATENT_ASSIGNEE",i.pubtype="PP_PATENT"),"DCTERMS.BIBLIOGRAPHICCITATION"===s){var u=null;if(l&&l.match(/ctx_ver=Z39.88/)){u={};var d=l.match(/rft.spage=(\d+)/);d&&d[1]&&(u.pages=d[1],(d=l.match(/rft.epage=(\d+)/))&&d[1]&&(u.pages=u.pages+"-"+d[1])),(d=l.match(/rft.volume=(\d+)/))&&d[1]&&(u.volume=d[1]),(d=l.match(/rft.issue=(\d+)/))&&d[1]&&(u.issue=d[1])}else u=m.library.BibliographicData.parse(l);u&&(u.journal&&!u.journal.match(/[&=]/)&&(a["PARSED.JOURNAL"]=[u.journal]),u.volume&&(a["PARSED.VOLUME"]=[u.volume]),u.issue&&(a["PARSED.ISSUE"]=[u.issue]),u.year&&(a["PARSED.YEAR"]=[u.year]),u.pages&&(a["PARSED.PAGES"]=[u.pages]))}if("TWITTER:TITLE"===s||"OG:TITLE"===s)for(var p="TWITTER:TITLE"===s?"OG:TITLE":"TWITTER:TITLE",h=0;h<e.length;h++)this._getAttribute(e[h],"name")==p&&(l&&l.length>this._getAttribute(e[h],"content").length?this._setAttribute(e[h],"content",l):l&&l.length<this._getAttribute(e[h],"content").length&&(l=this._getAttribute(e[h],"content")));a[s]||(a[s]=[]),a[s].push(l)}}"AUTHOR"in a&&"BODY_AUTHORS"in a&&"OG:SITE_NAME"in a&&a["OG:SITE_NAME"][0]===a.AUTHOR[0]&&delete a.AUTHOR,Object.keys(a).forEach((function(e){var t=!1;a[e].forEach((function(e){(void 0===e||e.match(/^\{\"/))&&(t=!0)})),t&&delete a[e]}));for(var g=["GoogleAuthors","DublinCore","Prism","Google","EPrints","NYTimes","Others","Others_Level2","LastRessort"],f=0,b=0,y="",v=0;v<g.length;v++){var _=g[v];for(var s in t[_])if(a[s]){var w=t[_][s];if(s.match(/CITATION_CONFERENCE/)&&(i.pubtype="PP_CONFERENCE_PAPER"),s.match(/CITATION_CONFERENCE_TITLE/)&&(i.pubtype="PP_CONFERENCE_PAPER"),s.match(/EPRINTS.PUBLICATION/)&&"PP_CONFERENCE_PAPER"==i.pubtype&&(w="booktitle"),"PP_CONFERENCE_PAPER"==i.pubtype&&s.match(/CITATION_PROCEEDINGS/)&&i.booktitle&&(i.conference=i.booktitle,delete i.booktitle),"PP_CONFERENCE_PAPER"==i.pubtype&&s.match(/CITATION_CONFERENCE/)&&i.booktitle&&(w="conference"),"PP_THESIS"==i.pubtype&&s.match(/EPRINTS.PAGES/)&&(w="num_pages"),"website_title"==w&&("_tmptitle"in i||(i._tmptitle={}),a[s]&&a[s][0]&&(i._tmptitle[s]=a[s][0].replace(/\|.*/,"").replace(/\s+$/,""))),!this._checkIfNeeded(w,i,s))continue;if("author"===w||"editor"===w){if("PP_THESIS"==i.pubtype){if("DC.CONTRIBUTOR"==s&&a["DC.CREATOR"]&&1==a["DC.CREATOR"].length)continue}else{if("DC.CONTRIBUTOR"==s&&a["DC.CREATOR"]&&a["DC.CREATOR"].length>a[s].length)continue;if("DC.CREATOR"==s&&a["DC.CONTRIBUTOR"]&&a["DC.CONTRIBUTOR"].length>a[s].length)continue}if(v<=3&&(f=1),"BODY_AUTHORS"==s&&1===f)continue;var P=a[s];if(P&&(P=m.Array.unique(P)),P&&1===P.length){var S=a[s][0].match(/\;/g),C=a[s][0].match(/,/g);if(a[s][0].match(/\|/g)&&!S&&(a[s][0]=a[s][0].replace(/\|/g,";"),S=a[s][0].match(/\;/g)),S)P=a[s][0].split(/;/);else if(C&&!S){var A=a[s][0].split(/\s*,\s*/),E=A[0]?A[0].split(/\s+/).length:0,T=A[1]?A[1].split(/\s+/).length:0;P=1===C.length?E>1&&T>1?a[s][0].split(/,/):[a[s][0]]:a[s][0].match(/\S+\s*,\s\S+\s*\S*/)&&a[s][0].match(/(, \d\d\d\d-|, \d\d\d\d-\d\d\d\d|, \d\d\d\d)/)&&2===C.length?[a[s][0].replace(RegExp.$1,"")]:a[s][0].split(/,/)}for(var k=[],x=0;x<P.length;x++)P[x].match(/\s+(?:and|&)\s+/)?P[x].split(/\s+(?:and|&)\s+/).forEach((function(e){k.push(e)})):k.push(P[x]);P=k}for(x=0;x<P.length;x++){P[x]=m.String.stripHtml(P[x],{replacement:"",exclude:[]}),P[x]=P[x].replace(/[a-z\d\.]+@[a-z\d\.]+/,""),P[x]=P[x].replace(/\s*[\|\-,;\.]\s*$/,""),P[x]=P[x].replace(/\sin\s.*$/,"");var R=this.validateAuthor(P[x]);P[x].match(/^([a-z]+|The)$/)&&(R=!1),m.library.Author.isTainted(P[x])&&(R=!1),R&&("BODY_AUTHORS"===s&&(i.body_authors=!0),i[w].push(m.library.Author.parseAuthor(R,{familyNameFirst:!1})))}}else if("url"==w)for(x=0;x<a[s].length;x++)i[w].push(a[s][x]);else if("imageurl"==w){var I=!0;if(s.match(/LINKICON/)){I=!1;var L=s.match(/LINKICON:(\d+)/);L&&L[1]&&parseInt(L[1])>b&&(b=parseInt(L[1]),I=!0)}if(I)for(x=0;x<a[s].length;x++)i[w].push(a[s][x])}else if("eprintsschool"==w)"PP_THESIS"==i.pubtype&&(i.school=a[s][0]);else if("pmc"==w)a[s][0].match(/oai:pubmedcentral.nih.gov:(\d+)/i)?i[w]="PMC"+RegExp.$1:i[w]=a[s][0];else if("arxivid"==w)a[s][0].match(/oai:arXiv.org:(.+)/i)?i[w]=RegExp.$1:i[w]=a[s][0];else if("keywords"==w)for(x=0;x<a[s].length;x++)i[w].push(a[s][x]);else if("running_time"==w){var D=a[s][0].replace(/^PT/i,""),N=D.split(/([HMS])/),O=0;for(x=0;x<N.length;x++)if(N[x].match(/^\d+$/)){var U=0;x+1<N.length&&N[x+1].match(/^[HMS]$/)&&("H"==N[x+1]&&(U=3600),"M"==N[x+1]&&(U=60),"S"==N[x+1]&&(U=1)),O+=parseInt(N[x])*U}i[w]=O>0?O+" sec":D}else if("issn_alt"==w){a[s][x]=a[s][0].replace(/E?ISSN-?:?\s*/i,""),""!==(M=m.library.Publication.checkValidityOfISSN(a[s][0].replace(/\s*-\s*/g,"-")))&&(i[w]=M)}else if("issn"==w)for(x=0;x<a[s].length;x++){var M;a[s][x]=a[s][x].replace(/E?ISSN-?:?\s*/i,""),""!==(M=m.library.Publication.checkValidityOfISSN(a[s][x].replace(/\s*-\s*/g,"-")))&&i[w].push(M)}else if("isbn"==w)for(var F=m.Utils.extractISBNs(a[s].join(" "),{convert:!0,unique:!0,normalize:!0});$=F.shift();)i.isbn?i.isbn_alt||(i.isbn_alt=$):i.isbn=$;else if("doi"==w||"associated_doi"===w)for(x=0;x<a[s].length;x++){var j=a[s][x]||"",B="";if(j.match(/(http:\/\/)?dx\.doi\.org\/10\./))B=j;else if(j.match(/^10\.\d{4,}\//))B=j;else if(j.match(/^doi:10\.\d{4,}\//i))B=j;else if(j.match(/^info:doi\/(10\.\d{4,}\/.+)/i))B=RegExp.$1;else if(j.match(/https?:\/\//))i.url.push(j);else if(j.match(/URN:ISBN:([\dX]+)/i)){var $;for(F=m.Utils.extractISBNs(j,{convert:!0,unique:!0});$=F.shift();)i.isbn?i.isbn_alt||(i.isbn_alt=$):i.isbn=$}else j.match(/(.*)(10\.\d{4,}\/\S+)(\s.*)?/)?B=RegExp.$2:"PP_PATENT"==i.pubtype&&(i.patent_number=j);B&&(w in i?B.match(/arxiv/i)&&i.doi&&(i.associated_doi=i.doi,i.doi=B):i[w]=B)}else if("published"==w||"conference_date"==w||"filed"==w){var z={};for(x=0;x<a[s].length;x++){var H=m.library.Date.parseDate(a[s][x]),W=0;H.year&&!z.year&&(W=1),H.month&&H.year&&!z.month&&(W=1),H.day&&H.month&&H.year&&!z.day&&(W=1),1==W&&(z=H)}var V=!(w in i)||!m.Utils.isObject(i[w]);"CITATION_ONLINE_DATE"===y&&!1===V&&z.year&&z.month&&z.day&&(V=!0),V&&(y=s,w in i||(i[w]={}),z.year&&(i[w].year=parseInt(z.year)+""),z.month&&(i[w].month=parseInt(z.month)+""),z.day&&(i[w].day=parseInt(z.day)+""))}else"abstract"==w?("DCTERMS.ABSTRACT"!=s&&"EPRINTS.ABSTRACT"!=s||(i[w]=a[s][0],n=1),0==n&&a[s]&&a[s][0]&&a[s][0].length>i[w].length&&(i[w]=a[s][0])):i[w]=a[s][0]}}if(i.keywords=i.keywords.join("; "),void 0===i.pubtype&&(i.pubtype="PP_ARTICLE"),i.subtype&&"PATENT"===i.subtype.toUpperCase()&&(i.pubtype="PP_PATENT",delete i.subtype),i.subtype&&"LEGISLATION"===i.subtype.toUpperCase()&&(i.pubtype="PP_BILL",delete i.subtype),i.booktitle&&"PP_ARTICLE"===i.pubtype&&(i.pubtype="PP_BOOK_CHAPTER"),"book"===i.pubtype&&(i.pubtype="PP_BOOK"),i.school&&""!==i.school&&(i.pubtype="PP_THESIS"),i.number&&""!==i.number&&(i.pubtype="PP_REPORT"),i.pubtype.match(/^PP_/)||(i.pubtype="PP_ARTICLE"),i.doi&&i.doi.match(/dryad/i)&&(i.pubtype="PP_DATASET",i.journal="Dryad Digital Repository"),i.accessed=m.library.Date.format(new Date,"MMM DD, YYYY"),(i.datestart||i.dateend)&&(i.conference_date={literal:(i.datestart||"")+"-"+(i.dateend||"")},delete i.datestart,delete i.dateend),i.subtype){var G=i.subtype;delete i.subtype,G.match(/news\s+views/i)?(i.kind="Commentary",i.pubtype="PP_ARTICLE"):G.match(/news/i)?(i.kind="News",i.pubtype="PP_ARTICLE"):G.match(/review/i)&&(i.kind="Review",i.pubtype="PP_ARTICLE")}var q=i.journal||i.journalfull;(q&&q.match(/(arxiv|bioRxiv|medrxiv)/i)&&(i.pubtype="PP_PREPRINT"),!i.arxivid||i.volume||i.doi||i.issn&&i.issn.length>0||(i.pubtype="PP_PREPRINT"),"PP_REPORT"===i.pubtype&&i.number&&i.number.match(/arXiv:\d+.\d+/i)&&(i.pubtype="PP_PREPRINT",i.arxivid=i.number.replace(/arXiv:/i,""),delete i.number),"PP_PREPRINT"===i.pubtype&&(!i.journal&&i.journalfull&&(i.journal=i.journalfull,delete i.journalfull),!i.journal&&i.publisher&&(i.journal=i.publisher,delete i.publisher)),i.title||("PP_VIDEO"!=i.pubtype&&(i.pubtype="PP_WEBSITE"),i.website_title?i.title=i.website_title:i.title="[No title]"),i.language_tmp&&(i.language_tmp.match(/^.._..$/)&&(i.language_tmp=i.language_tmp.replace(/_[A-Z][A-Z]$/,"")),i.language_tmp=m.Utils.normalizeLanguage(i.language_tmp)),i.language&&(i.language.match(/^.._..$/)&&(i.language=i.language.replace(/_[A-Z][A-Z]$/,"")),i.language=m.Utils.normalizeLanguage(i.language)),i.isbn&&("PP_ARTICLE"!==i.pubtype&&"PP_WEBSITE"!==i.pubtype||(i.pubtype="PP_BOOK",(i.journal||i.journalfull)&&(i.pubtype="PP_BOOK_CHAPTER",i.booktitle=i.journalfull||i.journal,delete i.journal,delete i.journalfull))),"PP_WEBSITE"!==i.pubtype||i.doi||0!==i.issn.length||(i.website_name&&!i.booktitle&&(i.booktitle=i.website_name),i.publisher&&!i.booktitle&&(i.booktitle=i.publisher,delete i.publisher)),"PP_WEBSITE"===i.pubtype&&i.issn.length>0&&i.doi&&(i.pubtype="PP_ARTICLE"),"PP_BILL"==i.pubtype&&i.title)&&(i.title.match(/([^\d]+)(\d+)\s+-\s+(\d+.+Congress).+\):\s+(.+)/)&&(i.number=RegExp.$2,i.session=RegExp.$3,i.title=RegExp.$4,RegExp.$1.match(/H\./)?i.legislative_body="House of Representatives":i.legislative_body="Senate"));return 0===i.issn.length&&delete i.issn,0===i.editor.length&&delete i.editor,0===i.imageurl.length?delete i.imageurl:i.imageurl=m.Array.unique(i.imageurl),i.website_title&&delete i.website_title,i.website_name&&delete i.website_name,i},_getPath:function(e){var t,r=[];for(t=e;t&&(void 0!==t&&void 0!==t.tagName);t=t.parentNode){var a="tagName"in t?t.tagName.toLowerCase():t.name.toLowerCase();if("html"===a)break;t.className&&(a+="."+t.className.toLowerCase().replace(/\s+/g,".")),t.id&&m.Utils.isString(t.id)&&(a+="#"+t.id.toLowerCase()),"attribs"in t&&(t.attribs.class&&(a+="."+t.attribs.class.replace(/\s+/g,".")),t.attribs.id&&(a+="#"+t.attribs.id.toLowerCase())),r.push(a)}return r.reverse().join(" ")},_checkIfNeeded:function(e,t,r){var a=1;return"author"==e?t.author.length>0&&(a=0):"editor"==e?t.editor.length>0&&(a=0):"url"==e||"imageurl"==e||"issn"==e||"isbn"==e||"keywords"==e||"abstract"==e||"published"==e||"DCTERMS.ABSTRACT"==r||"EPRINTS.ABSTRACT"==r?a=1:t[e]&&(a=0),a}}),m.format.HTML=new m.format._HTML,m.format._JSONLD=m.format.AbstractReader.extend({typesMap:{article:{pubtype:"PP_WEBSITE",tmp_rank:5},blogposting:{pubtype:"PP_WEBSITE",kind:"Blog post",tmp_rank:5},discussionforumposting:{pubtype:"PP_WEBSITE",kind:"Forum post",tmp_rank:5},book:{pubtype:"PP_BOOK",tmp_rank:5},chapter:{pubtype:"PP_BOOK_CHAPTER",tmp_rank:5},product:{pubtype:"PP_MISC",tmp_rank:5},audiobook:{pubtype:"PP_BOOK",kind:"Audio Book",tmp_rank:5},report:{pubtype:"PP_REPORT",tmp_rank:5},newsarticle:{pubtype:"PP_NEWS_ARTICLE",kind:"Newspaper Article",tmp_rank:5},techarticle:{pubtype:"PP_WEBSITE",tmp_rank:5},analysisnewsarticle:{pubtype:"PP_NEWS_ARTICLE",kind:"Newspaper Article",tmp_rank:5},askpublicnewsarticle:{pubtype:"PP_NEWS_ARTICLE",kind:"Newspaper Article",tmp_rank:5},backgroundnewsarticle:{pubtype:"PP_NEWS_ARTICLE",kind:"Newspaper Article",tmp_rank:5},opinionnewsarticle:{pubtype:"PP_NEWS_ARTICLE",kind:"Newspaper Article",tmp_rank:5},reviewnewsarticle:{pubtype:"PP_NEWS_ARTICLE",kind:"Newspaper Article",tmp_rank:5},reportagenewsarticle:{pubtype:"PP_NEWS_ARTICLE",kind:"Newspaper Article",tmp_rank:5},scholarlyarticle:{pubtype:"PP_ARTICLE",tmp_rank:5},medicalscholarlyarticle:{pubtype:"PP_ARTICLE",tmp_rank:5},videoobject:{pubtype:"PP_VIDEO",tmp_rank:5},podcastepisode:{pubtype:"PP_AUDIO",kind:"Podcast",tmp_rank:5},tvepisode:{pubtype:"PP_VIDEO",kind:"TV Series",tmp_rank:5},musicalbum:{pubtype:"PP_AUDIO",tmp_rank:5},movie:{pubtype:"PP_VIDEO",kind:"Film",tmp_rank:5},website:{pubtype:"PP_WEBSITE",tmp_rank:1},webpage:{pubtype:"PP_WEBSITE",tmp_rank:2},dataset:{pubtype:"PP_DATASET",tmp_rank:4}},inputMap:{publisherimprint:"publisher",publisher:"publisher",provider:"tmp_provider",title:"title",headline:"title",datepublished:"published",datecreated:"published",uploaddate:"published",datemodified:"published",inlanguage:"language",bookedition:"edition",numberofpages:"num_pages",pagination:"pages",pagestart:"tmp_pages_start",pageend:"tmp_pages_end",issuenumber:"issue",partofseries:"booktitle",isbn:"isbn",gtin:"isbn",gtin8:"isbn",gtin13:"isbn",identifier:"doi",sameas:"doi",image:"imageurl",author:"author",creator:"author",director:"author",readby:"contributor",abstract:"abstract",description:"abstract",about:"abstract",url:"url","@id":"tmp_@id",mainentityofpage:"tmp_mainentityofpage",ispartof:"tmp_ispartof",name:"title",brand:"publisher",bookformat:"kind",actor:"editor",actors:"editor"},getName:function(){return"JSONLD"},extractJSONLD:function(e){var t=$("<div>"+e+"</div>"),r=[];return t&&t.find('script[type="application/ld+json"]').each((function(e,t){var a=$(t).html(),i=$(t).attr("data-schema");i||(i="");try{var n=JSON.parse(a);n&&r.push({dataSchema:i,json:n})}catch(e){}})),r},doRead:function(e){if(m.Utils.isString(e))try{e=JSON.parse(e)}catch(e){}var t=this._readJSON(e);return t.forEach((function(e){m.library.Publication.autoClean(e)})),t},_resolveElement:function(e,t){if(null===e)return"";var r=e;return t.forEach((function(t){m.Utils.isObject(t)&&null!==t&&t["@id"]&&t["@id"]===e["@id"]&&(r=t)})),r},_normalizeElement:function(e){var t=this,r="";return null!=e&&(m.Utils.isObject(e)?(["name","url","contenturl","value","byline","@id"].forEach((function(t){Object.keys(e).forEach((function(a){a.toLowerCase()===t&&""===r&&(r=e[a])}))})),e.familyName&&e.givenName&&(r=e.givenName+" "+e.familyName),""===r&&(r=e,Object.keys(e).forEach((function(r){m.Utils.isObject(e[r])&&(e[r]=t._normalizeElement(e[r]))})))):r=m.Utils.isString(e)?e.replace(/[\s\t]/g," ").replace(/[\n\r]+/g,"\n").trim():e.toString().replace(/[\s\t]/g," ").replace(/[\n\r]+/g,"\n").trim()),r},_getBlocks:function(e){var t=[];if(e&&m.Utils.isArray(e)&&e.forEach((function(e){e&&e.json&&(m.Utils.isArray(e.json)?e.json:[e.json]).forEach((function(e){var r=m.Utils.isArray(e)?e:[e];m.Utils.isObject(e)&&null!==e&&e["@graph"]&&(r=m.Utils.isArray(e["@graph"])?e["@graph"]:[e["@graph"]]),r.forEach((function(e){m.Utils.isObject(e)&&null!==e&&e["@type"]&&(m.Utils.isArray(e["@type"])&&(e["@type"]=e["@type"][0]),e.mainEntity&&m.Utils.isObject(e.mainEntity)&&e.mainEntity["@type"]&&(t.push(e.mainEntity),delete e.mainEntity),e.workExample&&m.Utils.isObject(e.workExample)&&null!==e.workExample&&(e.workExample=[e.workExample]),e.workExample&&m.Utils.isArray(e.workExample)&&e.workExample.forEach((function(t){m.Utils.isObject(t)&&["numberOfPages","isbn","bookEdition","inLanguage","publisher","datePublished","bookFormat","readBy"].forEach((function(r){!(r in e)&&t[r]&&(e[r]=t[r])}))})),e.offers&&m.Utils.isObject(e.offers)&&e.offers.gtin13&&(e.gtin13=e.offers.gtin13),t.push(e))}))}))})),1===t.length&&"BreadcrumbList"===t[0]["@type"]&&t[0].itemListElement&&m.Utils.isArray(t[0].itemListElement)){var r=m.Utils.clone(t[0].itemListElement);t=[],r.forEach((function(e){e.item&&m.Utils.isObject(e.item)&&e.item["@type"]&&t.push(e.item)}))}return t},_parseAuthors:function(e,t){if(e&&e.match(/\[object/))return[];var r=e,a=["Associated Press"];m.Utils.isArray(t)&&(a=a.concat(t)),a.forEach((function(t){if(m.Utils.isString(t)){var r=(t=t.replace(/^The\s/i,"")).replace(/[-\[\/\]\{\}\(\)*+?.,\\^$|#\s]/g,"\\$&");e=e.replace(new RegExp(r+"\\s*$","i"),"")}})),e=(e=(e=(e=(e=e.replace(/^By\s+/i,"")).replace(/\|.*$/g,"")).replace(/\S+@\S+/g,"")).replace(/\s(The)\s*$/,"")).replace(/[\d,;]+\s*$/,""),(e=m.String.stripHtml(e,{replacement:"",exclude:[]})).length<=2&&r.length>2&&(e=r);var i=[];return m.library.Author.isTainted(e)||e.match(/^[a-z]+$/)?i:i=e.match(/(,|;|&|\sand\s)/)?m.library.Author.parseAuthorList(e,{auto:!0}):"Al Jazeera"===e?[{collective:"Al Jazeera"}]:m.library.Author.parseAuthor(e,{familyNameFirst:!1})},_readJSON:function(e){var t=this,r=t._getBlocks(e),a=[];r.forEach((function(e){Object.keys(e).forEach((function(a){if(null===e[a])e[a]="";else if(m.Utils.isArray(e[a]))for(var i=0;i<e[a].length;i+=1){var n=-1===["mainentityofpage","ispartof"].indexOf(a.toLowerCase())?t._resolveElement(e[a][i],r):e[a][i];e[a][i]=t._normalizeElement(n)}else{n=-1===["mainentityofpage","ispartof"].indexOf(a.toLowerCase())?t._resolveElement(e[a],r):e[a];e[a]=t._normalizeElement(n)}e[a]&&m.Utils.isArray(e[a])&&1===e[a].length&&m.Utils.isString(e[a][0])&&(e[a]=e[a][0]),e[a]&&0===e[a].length&&delete e[a]}));var i=t.typesMap[e["@type"].toString().toLowerCase()];if(i){var n=m.Utils.clone(i);Object.keys(t.inputMap).forEach((function(r){var a=null;if(Object.keys(e).forEach((function(t){r===t.toLowerCase().replace(/\s/g,"")&&(a=e[t])})),a){var i=t.inputMap[r];if("published"!==i||i in n)if("language"===i)n[i]=m.Utils.normalizeLanguage(a.toString());else if("author"!==i&&"contributor"!==i&&"editor"!==i||i in n)if("isbn"===i){m.Utils.extractISBNs(a.toString(),{convert:!0,unique:!0,normalize:!0}).forEach((function(e){n.isbn||n.isbn===e?n.isbn_alt||n.isbn_alt===e||(n.isbn_alt=e):n.isbn=e}))}else if("url"===i||"imageurl"===i){i in n||(n[i]=[]),(m.Utils.isArray(a)?a:[a]).forEach((function(e){m.Utils.isString(e)&&e.match(/^https?:\/\/.+/i)&&n[i].push(e)}))}else if("kind"===i)a.toString().match(/audio/i)&&"PP_BOOK"===n.pubtype&&(n.kind="Audio Book");else if("doi"===i){(m.Utils.isArray(a)?a:[a]).forEach((function(e){var t=m.library.Publication.extractDoi(e.toString());if(t&&!n[i]){var r=/[.\/](abstract|abs|pdf|php|event_abstract|front-matter|full|fulltext|summary|short|html|htm|xml)$/i;t=(t=(t=t.replace(r,"")).replace(r,"")).replace(/\/$/,"").replace(/^\s+/,""),n[i]=t}}))}else!(i in n)&&m.Utils.isString(a)&&(i.match(/^tmp_/)?n[i]=a:a.match(/^https?:\/\//)||(n[i]=a));else{n[i]=[],(m.Utils.isArray(a)?a:[a]).forEach((function(e){if(!e.toString().match(/https?:\/\//)){var r=t._parseAuthors(e.toString(),[n.publisher,n.tmp_provider]);n[i]=n[i].concat(r)}}))}else n[i]=m.library.Date.parseDate(a.toString())}})),a.push(n)}})),a.forEach((function(e){["tmp_mainentityofpage","tmp_ispartof"].forEach((function(t){if(e[t]){var r=null;a.forEach((function(a){a["tmp_@id"]===e[t]&&(r=a)})),r&&Object.keys(r).forEach((function(t){t in e||(e[t]=r[t])}))}}))}));var i=[];return a.sort((function(e,t){if(t.tmp_rank===e.tmp_rank){var r=Object.keys(e).length,a=Object.keys(t).length;return r===a&&(r=e.title?e.title.length:0,a=t.title?t.title.length:0),a-r}return t.tmp_rank-e.tmp_rank})).forEach((function(e){Object.keys(e).forEach((function(t){e.tmp_pages_start&&e.tmp_pages_end?e.pages=e.tmp_pages_start+"-"+e.tmp_pages_end:e.tmp_pages_start&&(e.pages=e.tmp_pages_start),t.match(/^tmp_/)&&("tmp_@id"===t&&e["tmp_@id"]&&e["tmp_@id"].toString().match(/^https?:\/\/.+$/)&&!e.url&&(e.url=[e["tmp_@id"].toString()]),delete e[t])})),"PP_MISC"===e.pubtype&&e.isbn&&(e.pubtype="PP_BOOK"),Object.keys(e).length>1&&i.push(e)})),i}}),m.format.JSONLD=new m.format._JSONLD,m.format._IEEE=m.format.AbstractReader.extend({doRead:function(e){var t=e.match(/xplGlobal\.document\.metadata=(.+);\n/)||[];if(!t)return[];var r=t[1];try{r=JSON.parse(r)}catch(e){return[]}var a=this._readJSON(r);return m.library.Publication.autoClean(a),[a]},determinPubtype:function(e){return e.isJournal?"PP_ARTICLE":e.isConference?"PP_CONFERENCE_PAPER":e.isBook?e.isChapter?"PP_BOOK_CHAPTER":"PP_BOOK":"PP_MISC"},_readJSON:function(e){var t={};return t.pubtype=this.determinPubtype(e),e.displayDocTitle&&(t.title=this.normalizeStr(e.displayDocTitle)),e.doi&&(t.doi=e.doi),e.authors&&(t.author=e.authors.map((function(e){return m.library.Author.parseAuthor(e.name,{familyNameFirst:!1})}))),e.issn&&e.issn.length>0&&(t.issn=e.issn[0].value,e.issn.length>1&&(t.issn_alt=e.issn[1].value)),e.abstract&&(t.abstract=this.normalizeStr(e.abstract)),e.publicationDate&&(t.published=m.library.Date.parseDate(e.publicationDate)),e.startPage&&e.endPage?t.pages=e.startPage+"-"+e.endPage:e.startPage&&(t.pages=e.startPage),e.volume&&(t.volume=e.volume),e.issue&&(t.issue=e.issue),e.publisher&&(t.publisher=this.normalizeStr(e.publisher)),e.pubMedId&&(t.pmid=e.pubMedId),e.publicationTitle&&("PP_ARTICLE"===t.pubtype?t.journal=this.normalizeStr(e.publicationTitle):"PP_BOOK"!==t.pubtype&&(t.booktitle=this.normalizeStr(e.publicationTitle))),e.isbn&&e.isbn.length>0&&(t.isbn=m.Utils.extractISBNs(e.isbn[0].value)[0],e.isbn.length>1&&(t.isbn_alt=m.Utils.extractISBNs(e.isbn[1].value)[0])),t},normalizeStr:function(e){var t="";return e&&(t=e.replace(/^[\n\t\r\s]+/,"").replace(/[\n\t\r\s]+$/,"").replace(/[\t\r\n\s]+/g," ")),t},getName:function(){return"IEEE"}}),m.format.IEEE=new m.format._IEEE,m.format._IMDB=m.format.AbstractReader.extend({doRead:function(e,t){var r,a=null;try{a=JSON.parse(e)}catch(e){}return r=a?this._readJSON(a,t):this._readHTML(e),m.library.Publication.autoClean(r),[r]},_readHTML:function(e){var t={pubtype:"PP_VIDEO"},r={"video.episode":"TV Series","video.tv_show":"TV Series","video.movie":"Film"},a=$("<div>"+e+"</div>"),i=a.find(".title_wrapper > h1");i&&i.length&&(t.title=this.normalizeStr(i.text().replace(/\(\d+\)[\s\t\n]*$/,"")));var n=a.find("div.plot_summary .summary_text");n&&n.length&&(t.abstarct=this.normalizeStr(n.text()));var o=a.find(".credit_summary_item"),s=[],l=[];if(o&&o.length){for(var c=0;c<o.length-1;c+=1){var u=$(o[c]).find("a");if(u&&u.length)for(var d=0;d<u.length;d+=1){var p=this.normalizeStr($(u[d]).text());p.match(/more credits/i)||s.push(m.library.Author.parseAuthor(p,{familyNameFirst:!1}))}}var h=$(o[o.length-1]).find("a");if(h&&h.length)for(d=0;d<h.length;d+=1){var g=this.normalizeStr($(h[d]).text());g.match(/see full cast/i)||l.push(m.library.Author.parseAuthor(g,{familyNameFirst:!1}))}}s.length&&(t.author=this.removeDuplicates(s)),l.length&&(t.editor=l);var f=a.find('meta[property="og:type"]');if(f&&f.length){var b=this.normalizeStr(f.attr("content"));if(b in r&&(t.kind=r[b]),"video.episode"===b){var y=a.find(".titleParent a");y&&y.length&&(t.series=this.normalizeStr(y.text()))}}var v,_=a.find(".title_wrapper div.subtext time");if(_&&_.length&&(t.running_time=this.normalizeStr(_.text())),"Film"===t.kind){var w=a.find('a[title="See more release dates"]');v=this.normalizeStr(w.text())}else{var P=a.find("#titleDetails"),S=$(P).find("div.txt-block");for(c=0;c<S.length;c+=1){var C=$(S[c]).text();if(C.match(/release\sdate/i)){v=this.normalizeStr(C).replace(/^.*release\sdate:\s/i,"").replace(/see\smore.*$/i,"").trim();break}}}if(v){var A=v.match(/\(.*\)$/);A&&(t.address=A[0].replace(/^\(/,"").replace(/\)$/,""));var E=v.replace(/\(.*\)$/,"");t.published=m.library.Date.parseDate(E)}if("video.episode"===b){var T=a.find(".bp_description");if(T&&T.length){var k=T.text().split("|");t.series_number=this.normalizeStr(k[0].replace(/season\s/i,"S")),t.series_number=(t.series_number?t.series_number+"/":"")+this.normalizeStr(k[1].split("\n")[0].replace(/episode\s/i,"E"))}}var x=a.find('meta[property="og:url"]');return x&&x.length&&(t.url=[x.attr("content")]),t},_readJSON:function(e,t){var r,a={pubtype:"PP_VIDEO"};return"Title"in e&&(a.title=e.Title),"Actors"in e&&(a.editor=[],e.Actors.split(/,/).forEach((function(e){var t=m.library.Author.parseAuthor(e,{familyNameFirst:!1});t&&a.editor.push(t)}))),"Director"in e&&(a.author=[],e.Director.split(/,/).forEach((function(e){var t=m.library.Author.parseAuthor(e,{familyNameFirst:!1});t&&a.author.push(t)}))),"Runtime"in e&&(a.running_time=e.Runtime),"Released"in e&&(a.published=m.library.Date.parseDate(e.Released)),"Country"in e&&(a.address=e.Country),"Plot"in e&&(a.absract=e.Plot),"Season"in e&&(a.series_number="S"+e.Season),"Episode"in e&&(r=a.series_number?"/":"",a.series_number+=r+"E"+e.Episode),"Type"in e&&("movie"==e.Type&&(a.kind="Film"),"episode"==e.Type&&(a.kind="TV Series",(r=$(t).find("h2.tv_header a")).length>0&&(a.series=this.normalizeStr($(r[0]).text()))),"series"==e.Type&&(a.kind="TV Series")),a},removeDuplicates:function(e){for(var t=[],r=0;r<e.length;r+=1){t.findIndex((function(t){return t.first===e[r].first&&t.last===e[r].last&&t.bak===e[r].bak&&t.jr===e[r].jr}))>-1||t.push(e[r])}return t},normalizeStr:function(e){var t="";return e&&(t=e.replace(/^[\n\t\r\s]+/,"").replace(/[\n\t\r\s]+$/,"").replace(/[\t\r\n\s]+/g," ")),t},getName:function(){return"IMDB"}}),m.format.IMDB=new m.format._IMDB,m.format._Inspire=m.format.AbstractReader.extend({doRead:function(e){var t,r=null;try{r=JSON.parse(e)}catch(e){}return t=this._readJSON(r),m.library.Publication.autoClean(t),[t]},_readJSON:function(e){var t={},r=e.metadata;if(!r)return t;if(r.document_type&&r.document_type[0]&&(t.pubtype={article:"PP_ARTICLE",book:"PP_BOOK","book chapter":"PP_BOOK_CHAPTER","conference paper":"PP_CONFERENCE_PAPER",thesis:"PP_THESIS","activity report":"PP_REPORT",report:"PP_REPORT",proceedings:"PP_CONFERENCE_PAPER",note:"PP_CONFERENCE_PAPER"}[r.document_type[0]]),r.titles&&r.titles.length)for(var a=0;a<r.titles.length;a+=1)if(!r.titles[a].title.match(/\$\\\\/)){t.title=r.titles[a].title,r.titles[a].booktitle&&(t.booktitle=r.titles[a].booktitle);break}if(r.dois&&r.dois[0]&&(t.doi=r.dois[0].value),r.publication_info&&r.publication_info[0]){var i=r.publication_info[0];if(i.year&&(t.published={},t.published.year=i.year.toString()),i.page_start&&(t.pages=i.page_start),i.page_end&&(t.pages=t.pages+"-"+i.page_end),!t.pages&&i.artid&&(t.pages=i.artid),i.journal_title){var n=i.journal_title;n=n.replace(/\./g,". ").replace(/\s+/g," ").trim(),t.journal=n}i.journal_volume&&(t.pubtype.match(/PP_BOOK/)?t.isbn=i.journal_volume:t.volume=i.journal_volume)}if(r.preprint_date){var o=m.library.Date.parseDate(r.preprint_date);t.published=o}if(r.authors&&r.authors.length){t.author=[];var s=r.authors;for(a=0;a<s.length;a+=1){var l=m.library.Author.parseAuthor(s[a].full_name,{familyNameFirst:!1});l.affiliation=s[a].affiliations?s[a].affiliations[0].value:l.affiliation,t.author.push(l)}}if(r.abstracts&&r.abstracts.length){var c=r.abstracts.find((function(e){return"arXiv"===e.source}));t.abstract=c?c.value:r.abstracts[0].value}return r.arxiv_eprints&&r.arxiv_eprints[0]&&(t.arxivid=r.arxiv_eprints[0].value,r.arxiv_eprints[0].categories&&(t.primaryClass=r.arxiv_eprints[0].categories[0]),t.archivePrefix="arXiv"),!t.arxivid||t.doi||t.journal?t.arxivid&&t.journal&&t.journal.match(/arXiv/)&&(t.pubtype="PP_PREPRINT"):t.pubtype="PP_PREPRINT",t},getName:function(){return"Inspire"}}),m.format.Inspire=new m.format._Inspire,m.format._ISI=m.format.AbstractReader.extend({mapIn:{TI:"title",AB:"abstract",PU:"publisher",DI:"doi",BP:"startpage",EP:"endpage",PG:"num_pages",VL:"volume",IS:"issue",SN:"issn",EI:"issn",AF:"author",AU:"author",JI:"journal",J9:"journal",BN:"isbn",UR:"url",DT:"pubtype",PT:"pubtype",PY:"year",PD:"date",BE:"editor",LA:"language",AE:"assignee",PN:"patent_number",SO:"SO",SE:"series",CT:"booktitle",CL:"address",DE:"keywords",ID:"keywords",WC:"keywords",SC:"keywords",PA:"address",PI:"address",EM:"note",FU:"note",FX:"note",C1:"affiliation"},mapOut:{},hierarchy:["PT","DT","TI","AB","PU","DI","VL","IS","BP","EP","SN","EI","AF","AU","BE","JI","J9","BN","UR","PY","PD","LA","AE","PN","SE","CT","CL","DE","ID","PI","PA","WC","SC","EM","FU","FX","C1","SO","PG"],getName:function(){return"ISI"},getKeyValuePairs:function(e){var t={},r="empty";for(var a in e)e[a].match(/^([A-Z][A-Z\d])\s+(.*)/)?(t[r=RegExp.$1]&&(r="dummy"),t[r]=[],t[r].push(RegExp.$2)):""==e[a]||e[a].match(/^\s+$/)||(t[r]||(t[r]=[]),t[r].push(e[a]));return t},processAuthors:function(e,t){e.forEach((function(e){var r=e.replace(/^\s*/,"").split(/,\s*/),a={};2==r.length?a={last:r[0],first:r[1]}:3==r.length?(a={last:r[0],first:r[1]},r[2].match(/^\s*(I|II|III|IV|V|Jun|Sen)/)&&(a.jr=r[2])):1==r.length&&(a={collective:r[0]}),t.push(a)}))},doRead:function(e){var t=e.split(/\n+/),r=[],a=[],i=this,n=0;if(t.forEach((function(e){e.match(/^ER\s*$/)&&n++})),n<=1)a.push(t);else if(n>1){var o=[];t.forEach((function(e){e.match(/^ER\s*$/)&&(o.length>0&&a.push(o),o=[]),o.push(e)}))}for(var s=0;s<a.length;s++){this.fire("progress",{progress:s/a.length,totalCount:a.length});var l=this.getKeyValuePairs(a[s]),c={pubtype:"PP_ARTICLE",note:""};i.hierarchy.forEach((function(e){var t=l[e];if(t){var r=t.join(" ").replace(/\s+/g," ");r=(r=r.replace(/^\s+/,"")).replace(/\s+$/,"");var a=i.mapIn[e];if("pubtype"==a)return"REVIEW"==r.toUpperCase()&&(c.kind="Review"),r.match(/Data\s*set/i)&&(c.pubtype="PP_DATASET"),"PT"==e&&r.match(/^P\s*/)&&(c.pubtype="PP_PATENT"),void("PT"==e&&r.match(/^B\s*/)&&(c.pubtype="PP_BOOK"));if("author"==a||"editor"==a){if(c[a])return;return c[a]=[],void i.processAuthors(t,c[a])}if("issn"==a)return r=r.replace(/\(.*/,""),c[a]&&(a="issn_alt"),void(c[a]=r);if("endpage"==a)return void(r.match(/^\+/)||(c[a]=r));if("note"==a){var n="";return"EM"==e&&(n="e-mail: "),"FU"!=e&&"FX"!=e||(n="Funding:\n"),void(c[a]+=n+r+"\n")}if("isbn"==a){var o=m.Utils.extractISBNs(r,{convert:!0,unique:!0});return o[0]&&(c.isbn=o[0]),void(o[1]&&(c.isbn_alt=o[1]))}if("address"==a){if(c[a])return;return void(c[a]=r)}if("journal"==a){if(c[a])return;return void(c[a]=r)}if("keywords"==a)return c[a]||(c[a]=[]),void r.split(/\s*;\s*/).forEach((function(e){c[a].push(e)}));if("date"==a)return void((r=r.replace(/\./g," ")).match(/^\s*([A-Z]+)\s+(\d+)\s*$/i)?(c.month=RegExp.$1,c.day=RegExp.$2):r.match(/^\s*([A-Z]+)\s*$/i)?c.month=r:r.match(/^\s*([A-Z]+)\s+(\d+)\s+(\d\d\d\d)\s*$/i)?(c.month=RegExp.$1,c.day=RegExp.$2,c.year=RegExp.$3):r.match(/^\s*(\d\d\d\d)\s*-\s*([A-Z]+)\s*-\s*(\d+)\s*$/i)&&(c.month=RegExp.$2,c.day=RegExp.$3,c.year=RegExp.$1));if("url"==a)return c[a]||(c[a]=[]),void t.forEach((function(e){(e=e.replace(/^\s*/,"")).match(/^(http|ftp)/)&&c[a].push(e)}));"SO"==a&&("PP_PATENT"==c.pubtype&&(a="journalfull"),"PP_DATASET"==c.pubtype&&(a="archivePrefix"),"PP_ARTICLE"!=c.pubtype||c.journal||(a="journal")),"booktitle"==a&&"CT"==e&&(c.pubtype="PP_CONFERENCE_PAPER"),c[a]||(c[a]=r)}})),c.keywords&&(c.keywords=c.keywords.join("; ")),delete c.SO,r.push(c)}return r}}),m.format.ISI=new m.format._ISI,m.format._MARC=m.format.AbstractReader.extend({mapIn:{leader:"leader","007":"007","010":"lccn","010a":"lccn","019a":"issn","020a":"isbn","020":"isbn","022a":"issn","022":"issn","100a":"author",100:"author",111:"conference",245:"title","245a":"title","245b":"addtitle",250:"edition","250a":"edition",260:"address","260a":"address","260b":"publisher","260c":"year",264:"address","264a":"address","264b":"publisher","264c":"year",300:"num_pages","300a":"num_pages","300b":"num_pages",440:"series","440a":"series","440v":"volume",490:"series","490a":"series","490v":"volume","490x":"issn","507a":"scale","520a":"abstract",520:"abstract","650a":"keywords",700:"editor","700a":"editor","776z":"isbn","856u":"url","956u":"url"},doRead:function(e){var t={};t=e.match(new RegExp("\x1e"))&&e.match(new RegExp("\x1f"))?this._parseMARCBinary(e):this._parseMARC(e);var r=this.applyMapping(t);return m.library.Publication.autoClean(r),[r]},applyMapping:function(e){var t,r,a,i,n={pubtype:"PP_BOOK",author:[],editor:[],keywords:[],url:[]},o={};for(t in e)t in this.mapIn&&((r=this.mapIn[t])in o||(o[r]=[]),o[r]=m.Array.merge(o[r],e[t]));for(t in o){var s=o[t];if(s[0]){if("007"==t)(a=s[0].split(""))&&a[0]&&("v"==a[0]&&(n.pubtype="PP_VIDEO"),"s"==a[0]&&(n.pubtype="PP_AUDIO")),s=void 0;else if("leader"==t)(a=s[0].split(""))&&a[6]&&("c"==a[6]||"d"==a[6]?n.pubtype="PP_SCORE":"e"==a[6]&&(n.pubtype="PP_MAP")),s=void 0;else if("isbn"==t){for(var l,c=m.Utils.extractISBNs(s.join(" "),{convert:!0,unique:!0});l=c.shift();)n.isbn?n.isbn_alt||(n.isbn_alt=l):n.isbn=l;s=void 0}else if("issn"==t)s[0]=s[0].replace(/\(.+/,"").replace(/\s+$/,""),s=s[0].match(/(\d\d\d\d-\d\d\d[\dX])/i)?RegExp.$1:void 0;else if("address"==t)s=s.join(" ").replace(/\s+/," ").replace(/\s+$/,"");else if("year"==t)s=(s=s[0].replace(/[a-z\.]/gi,"").replace(/-\d.+/,"").replace(/[\s\-]$/,"")).replace(/(\[)(\d\d\d\d)(\])/,"$2");else if("publisher"==t)s=s.join(", ").replace(/\s+/," ").replace(/\s+$/,"");else if("url"==t)for(i=0;i<s.length;i++)s[i]=s[i].replace(/\s+/g,"");else if("abstract"==t)s=s.join("\n").replace(/\s+/," ").replace(/\s+$/,"");else if("author"==t||"editor"==t)for(i=0;i<s.length;i++){var u=s[i];s[i]=s[i].replace(/\s*[,;\.]\s*$/,""),s[i]=s[i].replace(/\[.*/,""),s[i]=m.library.Author.parseAuthor(s[i]),s[i].original=u}else s="num_pages"===t?s.join(" ").replace(/\s+/," ").replace(/\s+$/,"").replace(/;$/,""):s[0].replace(/\s*[,;\.]\s*$/,"").replace(/\s+$/,"");s&&(n[t]=s)}}return n.addtitle&&n.title&&(n.title=n.title+": "+n.addtitle,delete n.addtitle),n},_parseMARCBinary:function(e){var t,r=e.substr(0,24),a=parseInt(r.substr(10,1),10);t=e.substr(parseInt(r.substr(12,5),10));var i="";for(o=0;o<t.length;o++)i+=t.substr(o,1),t.charCodeAt(o)>65535?i+="\0\0\0":t.charCodeAt(o)>2047?i+="\0\0":t.charCodeAt(o)>127&&(i+="\0");var n=e.substr(24,e.indexOf("\x1e")-24);t={};for(var o=0;o<n.length;o+=12){var s=n.substr(o,3),l=parseInt(n.substr(o+3,4),10),c=parseInt(n.substr(o+7,5),10),u=i.substr(c+a,l-a-1).replace(/\x00/g,"");u=u.split("\x1f").join("|").replace(/^\s+/,""),s in t||(t[s]=[]),t[s].push(u)}var d=this._parseSubfields(t);return r&&(d.leader=[r]),d},_parseMARC:function(e){var t,r,a="NA",i={};i[a]=[""],e.split(/[\r\n]/).forEach((function(e){(t=e.match(/^(LEADER\s)(.+)/i))&&t[2]?r=t[2]:(t=e.match(/^(\d\d\d)\s(.+)/))&&t[2]?((a=t[1])in i||(i[a]=[]),i[a].push(""),t[2]=t[2].replace(/^(\d\d\s|\d\s\s|\s\d\s)/,""),i[a][i[a].length-1]+=t[2].replace(/^\s+/,"")):i[a][i[a].length-1]+=e}));var n=this._parseSubfields(i);return r&&(n.leader=[r]),n},_parseSubfields:function(e){var t={},r="abcdefghijklmnopqrstuvwxyz=".split("");for(var a in e)e[a].forEach((function(e){var i=(e=e.replace(/\s+/g," ")).split(new RegExp("(\\|"+r.join("|\\|")+")"));i.length>0&&""==i[0]&&i.shift();for(var n=a,o=0;o<i.length;o++){var s=i[o].match(/^\|([a-z=])$/);s&&s[1]?n=a+s[1]:(n in t||(t[n]=[]),t[n].push(i[o]))}}));return this.cleanDict(t)},cleanDict:function(e){var t={};for(var r in e){t[r]=[];for(var a=0;a<e[r].length;a++){var i=e[r][a];i=(i=(i=(i=(i=i.replace(/[:,\.\/]\s*$/,"")).replace(/\s+;/g,"; ")).replace(/\s+/g," ")).replace(/\s+$/,"")).replace(/^\s+/,""),t[r][a]=i}}return t},getName:function(){return"MARC"}}),m.format.MARC=new m.format._MARC,m.format._MARCXML=m.format.AbstractReader.extend({doRead:function(e){var t;if("string"==typeof e?t=c()?this.getXMLParser(e):this.getXMLParser("<wrapper>"+e+"</wrapper>"):"object"==typeof e&&(t=e),t){var r,a,i=[],n=$(t).find("numberOfRecords"),o=0;if(n&&n.length)try{o=parseInt($(n).text())}catch(e){}var s=$(t).find("record");if(s&&s.length){0===o&&(o=s.length);for(var l=0;l<o;l++)null,(r=this._parseMARCXML(s[l]))&&(a=m.format.MARC.applyMapping(r),m.library.Publication.autoClean(a),i.push(a))}return i}return[]},_parseMARCXML:function(e){var t,r,a,i,n,o={},s=$(e).find("leader");s&&s.length&&(o.leader=[$(s[0]).text()]);var l=$(e).find("controlfield");if(l&&l.length)for(t=0;t<l.length;t++)(i=this._getAttribute(l[t],"tag"))in o||(o[i]=[]),a=$(l[t]).text(),o[i].push(a);var c=$(e).find("datafield");if(c&&c.length)for(t=0;t<c.length;t++){i=this._getAttribute(c[t],"tag");var u=$(c[t]).find("subfield");if(u&&u.length){var d={};for(r=0;r<u.length;r++)(n=this._getAttribute(u[r],"code"))&&(d[n]=$(u[r]).text());for(n in"700"==i&&"4"in d&&d[4].match(/^aut/i)&&(i="100"),d){var p=i+n;p in o||(o[p]=[]),o[p].push(d[n])}}}return m.format.MARC.cleanDict(o)},getName:function(){return"MARCXML"}}),m.format.MARCXML=new m.format._MARCXML,m.format._MendeleyJson=m.format.AbstractReader.extend({getName:function(){return"Mendeley JSON"},doRead:function(e){if(!e)return[];m.Utils.isString(e)?e=m.Utils.decode(e):m.Utils.isArray(e)||(e=[e]);var t=this._readMendeleyItems(e);return t.forEach((function(e){m.library.Publication.autoClean(e)})),t},_readMendeleyItems:function(e){var t,r=[],a=this;return e.forEach((function(e){var i={},n=a.jsonGetPubtypeAndKind(e.type);i.pubtype=n.pubtype,n.kind&&(i.kind=n.kind);var o=a.jsonMapToPaperpileFields(e,i.pubtype);for(t in o)if(0!==o[t].length){var s=t,l=o[t][0],c=a.jsonIninitalizeValue(t);"keywords"===(t=t.replace(/\..+/,""))?m.Utils.isArray(l)&&(c[t]=l.join("; ")):"url"===t?m.Utils.isArray(l)&&(c[t]=[],l.forEach((function(e){(e=e.replace(/;$/,"")).match(/^(http|ftp)/)&&c[t].push(e)}))):"issn"===t?c=a.jsonCheckISSN(l):"isbn"===t?c=a.jsonCheckISBN(l):"kind"===t?l.match(/phdthesis/i)?c[t]="Ph.D. Thesis":l.match(/mastersthesis/i)&&(c[t]="Masters Thesis"):"author"===t||"editor"===t||"translator"===t?(c[t]=[],l.forEach((function(e){var r={};r.first=e.first_name,r.last=e.last_name,m.library.Author.autoClean(r),c[t].push(r)}))):"journal"===t?m.Utils.isArray(l)?l[0]&&l[0].last_name&&(c[t]=l[0].last_name):c[t]=l:"folder_uuids"===s||"tags"===s?c[t]=l:a.jsonSetValue(t,c,l),a.jsonAssignValuesToPub(c,i)}r.push(i)})),r}}),m.format.MendeleyJson=new m.format._MendeleyJson,m.format._Microdata=m.format.AbstractReader.extend({getName:function(){return"Microdata"},doRead:function(e,t){return void 0===t&&(t={}),this._readData(e,t)},_readData:function(e,t){var r=this,a=$("<div>"+e+"</div>"),i={publisher:"publisher",publisherImprint:"publisher",numberOfPages:"num_pages",author:{name:"author",parse:function(e){return m.library.Author.parseAuthor(e,{familyNameFirst:!1})}},editor:{name:"editor",parse:function(e){return m.library.Author.parseAuthor(e,{familyNameFirst:!1})}},isbn:"isbn",description:"abstract",url:{name:"url",parse:function(e){return[e]}},bookEdition:{name:"edition",parse:function(e){return e.replace(/\D+(.*)/,"")}},inLanguage:{name:"language",parse:function(e){return m.Utils.normalizeLanguage(e)}},datePublished:{name:"published",attribute:"datetime",parse:function(e){return m.library.Date.parseDate(e)}}},n=[],o={};Object.keys(i).forEach((function(e){var t,n=a.find("[itemprop='"+e+"']");if(n)if(i[e]&&i[e].attribute&&(t=n.attr(i[e].attribute)),t||(n.text()?t="author"===e&&n.find("[itemprop='name']").length?n.find("[itemprop='name']").text():n.first().text():n.first().attr("content")&&(t=n.first().attr("content"))),"publisher"===e&&t&&n.find("[itemprop='name']").length){var s=n.find("[itemprop='name']").attr("content")||n.find("[itemprop='name']").text();o[i[e]]=s}else"url"===e?(n.each((function(t,r){o[i[e].name]||(o[i[e].name]=[]);var a=$(r).attr("href");if(!o[i[e].name].includes(a)){var n=o[i[e].name].findIndex((function(e){return e&&a&&!!a.startsWith(e)}));n>-1&&o[i[e].name].splice(n,1);var s=o[i[e].name].findIndex((function(e){return e&&a&&e.replace("https://","").replace("http://","")===a.replace("https://","").replace("http://","")}));s>-1?(o[i[e].name].splice(s,1),o[i[e].name].push(a.replace("http://","https://"))):a&&o[i[e].name].push(a)}})),o.url&&o.url.length&&(o.url=[o.url.filter((function(e){return!e.match(/facebook/)})).filter((function(e){return!e.match(/instagram/)})).reduce((function(e,t){return e.length>t.length?e:t}),0)])):t&&(i[e].parse?"author"===e||"editor"===e?t.match(/(.*)\s(.*),\s(.*)\s(.*)/)?t.split(",").forEach((function(t){r.validateAuthor(t)&&(o[e]||(o[e]=[]),o[e].push(i[e].parse(t)))})):"admin"!==t.trim()&&r.validateAuthor(t)&&(o[e]||(o[e]=[]),o[e].push(i[e].parse(t))):o[i[e].name]="datePublished"===e?i[e].parse(t)||n.attr("content"):i[e].parse(t):o[i[e]]=t)})),!o.published&&a.find("[itemprop='dateCreated']").length&&(o.published=i.datePublished.parse(a.find("[itemprop='dateCreated']").text()));var s=a.find("[itemprop='bookFormat']");if(o.isbn||s.length||a.find("[itemtype='http://schema.org/Book']").length||a.find("[itemtype='http://schema.org/Product']").length){if(s.length){var l=s.attr("content")||s.text();l&&l.match(/Audio/)&&(o.kind="Audio Book")}o.pubtype="PP_BOOK"}else a.find(".book-item").length?o.pubtype="PP_BOOK":a.find("[itemtype='http://schema.org/NewsArticle']").length?o.pubtype="PP_NEWS_ARTICLE":(a.find("[itemtype='http://schema.org/WebPage']").length,o.pubtype="PP_WEBSITE");var c=a.find("h1[itemprop='name']");if(c&&c.text()&&(o.title=c.first().text()),!o.title){var u=a.find("h1");u&&1===u.length&&(o.title=u.first().text()),!o.title&&u.find("span[itemprop='name']")&&(o.title=u.find("span[itemprop='name']").first().text()),!o.title&&a.find("meta[itemprop='name']")&&(o.title=a.find("meta[itemprop='name']").attr("content")),!o.title&&a.find("h1[itemprop='headline']")&&(o.title=a.find("h1[itemprop='headline']").text())}if(!o.published&&a.find("meta[itemprop='datePublished']")){var d=a.find("meta[itemprop='datePublished']").attr("content");d&&(o.published=m.library.Date.parseDate(d))}if(!o.abstract&&a.find("meta[property='og:description']")){var p=a.find("meta[property='og:description']").attr("content");p&&(o.abstract=p)}if(!o.author&&a.find("meta[name='author']")&&a.find("meta[name='author']").attr("content")&&r.validateAuthor(a.find("meta[name='author']").attr("content"))&&(o.author=m.library.Author.parseAuthor(a.find("meta[name='author']").attr("content"),{familyNameFirst:!1})),!o.abstract&&a.find("meta[name='description']")&&a.find("meta[name='description']").attr("content")&&(o.abstract=a.find("meta[name='description']").attr("content")),!o.image&&a.find("meta[property='og:image']")){var h=a.find("meta[property='og:image']").attr("content");h&&(o.image=[h])}if(!o.url&&a.find("meta[property='og:url']")){var g=a.find("meta[property='og:url']").attr("content");g&&(o.url=[g])}return n.push(o),n}}),m.format.Microdata=new m.format._Microdata,m.format._Newspapers=m.format.AbstractReader.extend({domainMap:{"aargauerzeitung.ch":{name:"Aargauer Zeitung",oclc:"611044404"},"abc.net.au":{name:"ABC News"},"aberdeennews.com":{name:"Aberdeen American News"},"abilene-rc.com":{name:"Reflector-Chronicle"},"acadianagazette.net":{name:"Acadiana Gazette"},"acfreepress.com":{name:"Adams County Free Press"},"ack.net":{name:"Inquirer and Mirror"},"adaherald.com":{name:"Ada Herald",oclc:"16701983"},"adaircountyfreepress.com":{name:"Adair County Free Press"},"adairprogress.com":{name:"Adair Progress"},"adairvoice.com":{name:"Adair County Community Voice"},"addisonindependent.com":{name:"Addison Co. Independent"},"adelnews.com":{name:"Dallas County News"},"adirondackdailyenterprise.com":{name:"Adirondack Daily Enterprise"},"adirondackexpress.com":{name:"Adirondack Express"},"adn.com":{name:"Alaska Dispatch News"},"advertiser-tribune.com":{name:"Advertiser-Tribune"},"advertiserdemocrat.com":{name:"Advertiser Democrat"},"advertisergleam.com":{name:"Advertiser-Gleam"},"advertisernewsnorth.com":{name:"Advertiser-News"},"advisor-chronicle.com":{name:"Advisor & Chronicle"},"advocate-news.com":{name:"Fort Bragg Advocate-News"},"advocateanddemocrat.com":{name:"Monroe County Advocate"},"advocatepress.com":{name:"Clay County Advocate-Press"},"aerotechnews.com":{issn:"1094-7302",name:"Aerotech News and Review"},"aflrecord.com.au":{issn:"1444-2973",name:"AFL Record"},"afro.com":{issn:"0276-6523",name:"The Washington Afro American"},"aftonbladet.se":{issn:"1103-9000",name:"Aftonbladet"},"agalert.com":{name:"Ag Alert"},"agawamadvertisernews.turley.com":{name:"Agawam Advertiser News"},"ahwatukee.com":{name:"Ahwatukee Foothills News"},"aikenstandard.com":{name:"Aiken Standard"},"airforcetimes.com":{issn:"0002-2403",name:"Air Force Times"},"ajnews.com":{name:"Apache Junction News"},"akronhometowner.com":{name:"Hometowner"},"akronlegalnews.com":{name:"Akron Legal News"},"akronnewsreporter.com":{name:"Akron News-Reporter"},"alabamamessenger.com":{name:"Alabama Messenger"},"alachuatoday.com":{name:"Alachua Today"},"alamedasun.com":{name:"Alameda Sun"},"alamogordonews.com":{name:"Alamogordo Daily News"},"alamosanews.com":{name:"Valley Courier"},"alaskastar.com":{name:"Alaska Star"},"albanyenterprise.com":{name:"Albany Enterprise"},"albanyherald.com":{name:"The Albany Herald",oclc:"12531100"},"albertleatribune.com":{issn:"1051-7421",name:"Albert Lea Tribune",oclc:"20607968"},"albianews.com":{name:"Albia Union-Republican"},"albionnewsonline.com":{name:"Albion News"},"alconareview.com":{name:"Alcona County Review"},"aldenadvance.com":{name:"Alden Advance"},"aldenadvertisernews.com":{name:"Alden Advertiser",oclc:"25104817"},"aledotimesrecord.com":{name:"Times Record"},"alexandriagazette.com":{name:"Alexandria Gazette Packet"},"alexcityoutlook.com":{name:"Alexander City Outlook"},"alextimes.com":{name:"Alexandria Times"},"algona.com":{name:"Algona Upper Des Moines"},"alibi.com":{name:"Weekly Alibi"},"alicetx.com":{name:"Alice Echo-News"},"allegannews.com":{name:"Allegan County News"},"alleghanynews.com":{name:"Alleghany News"},"alliancetimes.com":{name:"Alliance Times-Herald"},"alligator.org":{issn:"0889-2423",name:"The Independent Florida Alligator"},"almadentimes.com":{name:"Almaden Times Weekly"},"almanacnews.com":{name:"Almanac"},"alpineavalanche.com":{name:"Alpine Avalanche"},"altnewsban.com":{name:"Altamont News"},"altoonamirror.com":{name:"Mirror"},"altustimes.com":{name:"Altus Times"},"alvareviewcourier.com":{name:"Alva Review Courier"},"alvinsun.net":{name:"Alvin Sun-Advertiser"},"am-news.com":{name:"Morning News"},"amarillo.com":{name:"Amarillo Globe-News"},"amboynews.com":{name:"Amboy News"},"ameliamonitor.com":{name:"Bulletin Monitor"},"americanbazaaronline.com":{name:"American Bazaar"},"americanisraelite.com":{name:"The American Israelite",oclc:"11975053"},"americanpress.com":{name:"American Press"},"americanrivermessenger.com":{name:"American River Messenger"},"americustimesrecorder.com":{name:"Times Recorder"},"americusumterobserver.com":{name:"Observer"},"amestrib.com":{name:"Daily Tribune"},"amherstbee.com":{name:"Amherst Bee"},"amherstbulletin.com":{name:"Amherst Bulletin"},"amigonews.com":{name:"Amigo Newspaper"},"amisun.com":{name:"Anna Maria Island Sun"},"amityvillerecord.com":{name:"Amityville Record"},"amny.com":{name:"am New York"},"amsterdamnews.com":{issn:"1059-1818",name:"Amsterdam News",oclc:"13416782"},"anandabazar.com":{name:"Anandabazar Patrika Group",oclc:"187024438"},"anchoragepress.com":{name:"Anchorage Press"},"andalusiastarnews.com":{name:"Andalusia Star-News"},"andovertownsman.com":{name:"Andover Townsman"},"andrewscountynews.com":{name:"Andrews County News"},"annandaleadvocate.com":{name:"Annandale Advocate"},"annanews.com":{name:"Anna Gazette Democrat"},"annistonstar.com":{name:"Anniston Star"},"ansonrecord.com":{name:"Anson Record"},"anthonyrepublicannews.com":{name:"Anthony Republican"},"antonnews.com":{name:"Anton Community Newspapers"},"antrimreview.net":{name:"Antrim Review"},"apalachtimes.com":{name:"Apalachicola Times"},"app.com":{name:"Asbury Park Press"},"appeal-democrat.com":{name:"Appeal-Democrat"},"arabamericannews.com":{issn:"1930-9619",name:"The Arab American News"},"arabnews.com":{issn:"0254-833X",name:"Arab News",oclc:"4574467"},"aransaspassprogress.com":{name:"Progress"},"arapahoemirror.org":{name:"Arapahoe Public Mirror"},"arcadianews.com":{name:"Arcadia News"},"archboldbuckeye.com":{name:"Archbold Buckeye"},"arcolarecordherald.com":{name:"Arcola Record-Herald"},"ardmoreite.com":{name:"Daily Ardmoreite"},"areawidenews.com":{name:"Area Wide News"},"arenacindependent.com":{name:"Arenac County Independent"},"argonautnews.com":{name:"Argonaut"},"argus-press.com":{name:"Argus-Press Daily"},"argusleader.com":{name:"Argus Leader"},"argusobserver.com":{name:"Argus Observer"},"argussunonline.com":{name:"Central Delta Argus Sun"},"arkansasbusiness.com":{name:"Arkansas Business"},"arkansasleader.com":{name:"Leader"},"arkansasonline.com":{name:"Arkansas Democrat-Gazette"},"arkansasweekly.com":{name:"Arkansas Weekly"},"arktimes.com":{name:"Arkansas Times"},"arkvalleynews.com":{name:"Ark Valley News"},"arlingtonconnection.com":{name:"Arlington Connection"},"arlingtonmnnews.com":{name:"Arlington Enterprise"},"arlingtontimes.com":{name:"Arlington Times"},"armenianweekly.com":{name:"Armenian Weekly"},"armytimes.com":{issn:"0004-2595",name:"Army Times"},"aroundosceola.com":{name:"Around Osceola"},"artesianews.com":{name:"Artesia Daily Press",oclc:"15615995"},"artpress.com":{issn:"0245-5676",name:"art press"},"artvoice.com":{name:"Artvoice"},"arvadapress.com":{name:"Arvada Press"},"asbarez.com":{issn:"0004-4229",name:"Asbarez",oclc:"3973991"},"ashleycountyledger.com":{name:"Ashley County Ledger"},"ashleynewsobserver.com":{name:"Ashley News Observer"},"ashtongazette.com":{name:"Ashton Gazette"},"asianprivatebanker.com":{issn:"2076-5320",name:"Asian Private Banker"},"asianreporter.com":{name:"Asian Reporter"},"aspendailynews.com":{name:"Aspen Daily News"},"aspentimes.com":{name:"Aspen Times"},"atascaderonews.com":{name:"Atascadero News"},"atchisonglobenow.com":{name:"Atchison Globe"},"athensmessenger.com":{name:"Athens Messenger"},"athensnews.com":{name:"Athens News"},"athensreview.com":{name:"Athens Daily Review"},"atholdailynews.com":{name:"Athol Daily News"},"atkinsongraphic.com":{name:"Atkinson Graphic"},"atlantadailyworld.com":{issn:"1528-6142",name:"Atlanta Daily World"},"atmoreadvance.com":{name:"Atmore Advance"},"atmorenews.com":{name:"Atmore News"},"auburnpub.com":{name:"Citizen"},"augustafreepress.com":{name:"Augusta Free Press"},"augustatimes.net":{name:"Augusta Area Times"},"auroraadvertiser.net":{name:"Aurora Advertiser"},"auroraadvocate.com":{name:"Aurora Advocate"},"auroranewsregister.com":{name:"Aurora News-Register"},"aurorasentinel.com":{name:"Aurora Sentinel"},"austinchronicle.com":{issn:"1074-0740",name:"The Austin Chronicle"},"austindailyherald.com":{name:"Austin Daily Herald"},"austinweeklynews.com":{name:"Austin Weekly News"},"avenuenews.com":{name:"Avenue News"},"avpress.com":{name:"Antelope Valley Press"},"azcapitoltimes.com":{name:"Arizona Capitol Times"},"azcentral.com":{issn:"0892-8711",name:"The Arizona Republic"},"azdailysun.com":{issn:"1054-9536",name:"Arizona Daily Sun",oclc:"796086766"},"babylonbeacon.com":{name:"Babylon Beacon"},"backbaysun.com":{name:"Back Bay Sun"},"backroadsnews.com":{name:"Washington County News"},"badgerherald.com":{issn:"0045-1304",name:"The Badger Herald"},"bainbridgereview.com":{name:"Island Review"},"bajoelsol.com":{name:"Bajo El Sol"},"bakercityherald.com":{name:"Baker City Herald"},"bakercountypress.com":{name:"Baker County Press"},"bakersfield.com":{name:"Bakersfield Californian"},"balita.com":{name:"Balita"},"ballardnewstribune.com":{name:"Ballard News-Tribune"},"ballstatedaily.com":{name:"The Daily News",oclc:"31125064"},"baltimorechronicle.com":{name:"Baltimore Chronicle"},"baltimoregaylife.com":{name:"Gay Life",oclc:"47694046"},"baltimorepostexaminer.com":{name:"Post-Examiner"},"baltimoresun.com":{name:"Baltimore Sun"},"baltimoretimes-online.com":{name:"Baltimore Times"},"banderabulletin.com":{name:"Bandera Bulletin"},"bangordailynews.com":{name:"Bangor Daily News"},"banksnewstoday.com":{name:"Banks News Today"},"bannergraphic.com":{name:"Banner-Graphic"},"barbertonherald.com":{name:"Barberton Herald"},"barnesville.com":{name:"Barnesville Herald Gazette"},"barnesvillerecordreview.net":{name:"Barnesville Record-Review"},"barnstablepatriot.com":{name:"Barnstable Patriot"},"barrowcountynews.com":{name:"Barrow County News"},"bartonchronicle.com":{name:"Chronicle"},"basketnews.net":{issn:"1271-4534",name:"Basket News"},"baslerstab.ch":{name:"Baslerstab",oclc:"173954309"},"bastropenterprise.com":{name:"Bastrop Daily Enterprise"},"batesvilleheraldtribune.com":{name:"Herald Tribune"},"bathchronicle.co.uk":{issn:"1356-0069",name:"Bath Chronicle"},"battlecreekenquirer.com":{name:"Battle Creek Enquirer"},"baxleynewsbanner.com":{name:"Baxley News-Banner"},"baxterbulletin.com":{name:"Baxter Bulletin"},"bayareaobserver.com":{name:"Bay Area Observer"},"baycitytribune.com":{name:"Bay City Tribune"},"baymillsnews.com":{name:"Bay Mills News"},"baysideoc.com":{name:"Bayside Gazette"},"baytownsun.com":{name:"Baytown Sun"},"bayweekly.com":{name:"Bay Weekly"},"baz.ch":{name:"Basler Zeitung",oclc:"183307820"},"bbc.com":{name:"BBC News"},"bccourier.com":{name:"Bandera County Courier"},"bcdemocrat.com":{name:"Brown County Democrat"},"bcdemocratonline.com":{name:"Bent County Democrat"},"bcn-news.com":{name:"Braxton Citizens' News"},"bcrnews.com":{name:"Bureau County Republican"},"bctelegraph.com":{name:"Bradford County Telegraph"},"bctribune.com":{name:"Burleson County Tribune"},"bdemo.com":{name:"Bloomfield Democrat"},"bdtonline.com":{name:"Bluefield Daily Telegraph"},"beachesleader.com":{name:"Beaches Leader"},"beaconhilltimes.com":{name:"Beacon Hill Times"},"beacononlinenews.com":{name:"West Volusia Beacon"},"beaconseniornews.com":{name:"Beacon Senior Newspaper"},"beardstownnewspapers.com":{name:"Cass County Star-Gazette"},"beatricedailysun.com":{name:"Daily Sun"},"beaumontenterprise.com":{name:"Beaumont Enterprise"},"beauregarddailynews.net":{name:"Beauregard Daily News"},"beavercreeknewscurrent.com":{name:"News Current"},"bedfordbulletin.com":{name:"Bedford Bulletin"},"bedfordtimes-press.com":{name:"Bedford Times-Press"},"beebenews.com":{name:"Beebe News"},"beenews.com":{name:"Bee Newspapers"},"belgrade-news.com":{name:"Belgrade News"},"belleplaineherald.com":{name:"Belle Plaine Herald"},"bellevilleareaindependent.com":{name:"Belleville-Area Independent"},"bellevueheraldleader.com":{name:"Bellevue Herald-Leader"},"bellinghambusinessnews.com":{name:"Bellingham Business News"},"bellinghamherald.com":{name:"Bellingham Herald"},"belmondnews.com":{name:"Independent"},"beloitdailynews.com":{name:"Beloit Daily News"},"bemidjipioneer.com":{issn:"0899-1812",name:"The Pioneer",oclc:"18033610"},"bendbulletin.com":{name:"Bulletin"},"bendsource.com":{name:"Source Weekly"},"beniciaheraldonline.com":{name:"Benicia Herald"},"benningtonbanner.com":{name:"Bennington Banner"},"bensonnews-sun.com":{name:"San Pedro Valley News-Sun"},"bentonconews.com":{name:"Benton County News"},"bentoncountyenterprise.com":{name:"Benton County Enterprise"},"bentoncourier.com":{name:"Saline Courier"},"bentoneveningnews.com":{name:"Evening News"},"bentonspiritnews.com":{name:"Benton Spirit"},"beritaharian.sg":{name:"Berita Harian",oclc:"53812840"},"berkeleydailyplanet.com":{name:"Berkeley Daily Planet"},"berkeleyobserver.com":{name:"Berkeley Observer"},"berkshireeagle.com":{name:"Berkshire Eagle"},"berkshirerecord.net":{name:"Berkshire Record"},"berlincitizen.com":{name:"Berlin Citizen"},"berlindailysun.com":{name:"Berlin Daily Sun"},"bermudasun.bm":{name:"Bermuda Sun",oclc:"751681580"},"bernerzeitung.ch":{name:"Berner Zeitung",oclc:"605915334"},"bernewitness.com":{name:"Berne Tri-Weekly News"},"berria.eus":{issn:"1696-5108",name:"Berria"},"berthoudrecorder.com":{name:"Berthoud Recorder"},"berthoudsurveyor.com":{name:"Weekly Surveyor"},"bestofneworleans.com":{name:"Gambit Weekly"},"bethanyclipper.com":{name:"Republican-Clipper"},"bethelcitizen.com":{name:"Bethel Citizen"},"beverlyhillsview.org":{name:"BeverlyHillsView"},"beverlypress.com":{name:"Park LaBrea/Beverly Press"},"beverlyreview.net":{name:"Beverly Review"},"bgdailynews.com":{name:"Daily News"},"bhcourier.com":{name:"Beverly Hills Courier"},"bhpioneer.com":{issn:"1061-6179",name:"Black Hills Pioneer",oclc:"21928320"},"bhweekly.com":{name:"Beverly Hills Weekly"},"bielertagblatt.ch":{issn:"1424-9618",name:"Bieler Tagblatt",oclc:"173956431"},"bigbeargrizzly.net":{name:"Big Bear Grizzly"},"bigbendsentinel.com":{name:"Big Bend Sentinel"},"bigforkeagle.com":{name:"Bigfork Eagle"},"bighorncountynews.com":{name:"Big Horn County News"},"bigsandynews.com":{name:"Big Sandy News"},"bigspringherald.com":{name:"Big Spring Herald"},"bigtimberpioneer.net":{name:"Big Timber Pioneer"},"billingsgazette.com":{name:"Billings Gazette"},"biloxi-diberville-press.com":{name:"Biloxi D'Iberville Press"},"birminghampost.co.uk":{issn:"0963-7915",name:"Birmingham Post"},"birminghamtimes.com":{name:"Birmingham Times"},"bismarcktribune.com":{issn:"2330-5975",name:"The Bismarck Tribune",oclc:"11987205"},"bitterrootstar.com":{name:"Bitterroot Star"},"biztimes.com":{name:"BizTimes"},"blackforestnews-co.com":{name:"Black Forest News"},"blackmountainnews.com":{name:"Black Mountain News"},"blackvoicenews.com":{name:"Black Voice News"},"bladeempire.com":{name:"Blade-Empire"},"blick.ch":{issn:"1013-0667",name:"Blick",oclc:"805695696"},"blissfieldadvance.com":{name:"Blissfield Advance"},"bloomeradvance.com":{name:"Bloomer Advance"},"bloomingprairieonline.com":{name:"News Enterprise"},"blountcountian.com":{name:"Blount Countian"},"blscourierherald.com":{name:"Courier Herald"},"bluemountaineagle.com":{name:"Blue Mountain Eagle"},"blufftontoday.com":{name:"Bluffton Today"},"blythevillecourier.com":{name:"Courier News"},"blythewoodonline.com":{name:"Independent Voice"},"bnd.com":{name:"News-Democrat"},"bocabeacon.com":{name:"Boca Beacon"},"bocaratontribune.com":{name:"Tribune"},"boernestar.com":{name:"Boerne Star"},"bogalusadailynews.com":{name:"Daily News"},"bohemian.com":{name:"North Bay Bohemian"},"boiseweekly.com":{name:"Boise Weekly"},"bolivarcommercial.com":{name:"Bolivar Commercial"},"bolivarmonews.com":{name:"Bolivar Herald-Free Press"},"bondebladet.no":{name:"Bondebladet",oclc:"1171481"},"bonnercountydailybee.com":{issn:"1047-6822",name:"Bonner County Daily Bee",oclc:"42853323"},"bonnersferryherald.com":{name:"Bonners Ferry Herald"},"boonevilledemocrat.com":{name:"Booneville Democrat"},"boonvilledailynews.com":{name:"Daily News"},"boonvilleherald.com":{name:"Boonville Herald"},"boothbayregister.com":{name:"Boothbay Register"},"borderwatch.com.au":{issn:"1329-5195",name:"The Border Watch"},"borgernewsherald.com":{name:"Borger News-Herald"},"bossierpress.com":{name:"Press-Tribune"},"bostonglobe.com":{issn:"0743-1791",name:"The Boston Globe",oclc:"66652431"},"bostonherald.com":{issn:"0738-5854",name:"Boston Herald"},"bostonirish.com":{name:"Boston Irish Reporter"},"boulder-monitor.com":{name:"Boulder Monitor"},"bouldercityreview.com":{name:"Boulder City Review"},"boulderweekly.com":{name:"Boulder Weekly",oclc:"62674422"},"bowienewsonline.com":{name:"Bowie News"},"bowlinggreentimes.com":{name:"Bowling Green Times"},"boyleheightsbeat.com":{name:"Boyle Heights Beat"},"boynegazette.com":{name:"Boyne City Gazette"},"bozemandailychronicle.com":{name:"Bozeman Daily Chronicle"},"bradenton.com":{name:"Bradenton Herald"},"bradfordera.com":{name:"Bradford Era"},"bradystandard.com":{name:"Brady Standard-Herald"},"brainerddispatch.com":{name:"Brainerd Daily Dispatch"},"brandonsun.com":{issn:"0832-4212",name:"Brandon Sun"},"bransontrilakesnews.com":{name:"Branson Tri-Lakes News"},"braseltonnewstoday.com":{name:"Braselton News Today"},"breckenridgeamerican.com":{name:"Breckenridge American"},"breezecourier.com":{name:"Breeze Courier"},"brenhambanner.com":{name:"Banner Press"},"brevardbusinessnews.com":{issn:"0889-5104",name:"Brevard Business News",oclc:"13920007"},"brewtonstandard.com":{name:"Brewton Standard"},"bridgton.com":{name:"Bridgton News"},"bridlingtonfreepress.co.uk":{issn:"0963-455X",name:"Bridlington Free Press"},"brightonparklife.com":{name:"Brighton Park Park Life"},"brightonpittsfordpost.com":{name:"Brighton-Pittsford Post"},"bristolobserver.com":{name:"Bristol Observer"},"british-weekly.com":{name:"British Weekly"},"brookingsregister.com":{name:"Brookings Register"},"brooklyneagle.com":{name:"Brooklyn Daily Eagle"},"brooklynreporter.com":{name:"Brooklyn Reporter"},"broomfieldenterprise.com":{name:"Broomfield Enterprise"},"browardpalmbeach.com":{name:"New Times Broward"},"browncitybanner.mihomepaper.com":{name:"Brown City Banner"},"browncountydm.com":{name:"Brown County Democrat-Message"},"brownfieldonline.com":{name:"Brownfield News"},"brownsvilleherald.com":{issn:"0894-2064",name:"The Brownsville Herald"},"brownwoodtx.com":{name:"Brownwood Bulletin"},"brunswickbeacon.com":{name:"Brunswick Beacon"},"brushnewstribune.com":{name:"Brush News Tribune"},"bryancountynews.net":{name:"Bryan County News"},"bryantdaily.com":{name:"Bryant Daily"},"bryantimes.com":{name:"Bryan Times"},"btimesherald.com":{name:"Burns Times Herald"},"buckeyelakebeacon.net":{name:"Buckeye Lake Beacon"},"buckscountycouriertimes.com":{name:"Bucks County Courier Times"},"buckscountyherald.com":{name:"Bucks County Herald"},"bucksportenterprise.com":{name:"Bucksport Enterprise"},"bucyrustelegraphforum.com":{name:"Telegraph Forum"},"buffalobulletin.com":{name:"Buffalo Bulletin"},"buffalonews.com":{name:"Buffalo News"},"buffaloreflex.com":{name:"Buffalo Reflex"},"buffaloriverreview.com":{name:"Buffalo River Review"},"bulgariasega.com":{name:"Bulgaria Sega"},"bullardnews.com":{name:"Bullard Banner News"},"bulletintimesnews.com":{name:"Bulletin-Times"},"bullheadcity-bee.com":{name:"Bullhead City Bee"},"burkeconnection.com":{name:"Burke Connection"},"burlington-record.com":{name:"Burlington Record"},"burlingtoncountytimes.com":{name:"Burlington County Times"},"burlingtonfreepress.com":{name:"Burlington Free Press"},"burnetbulletin.com":{name:"Burnet Bulletin"},"burnettcountysentinel.com":{name:"Burnett County Sentinel"},"burtonview.mihomepaper.com":{name:"Burton View"},"busconews.com":{name:"Churubusco News"},"businessexaminer.com":{name:"The Business Examiner"},"businessobserverfl.com":{name:"Business Observer"},"businessreport.com":{name:"Business Report"},"butlercountytimesgazette.com":{name:"Butler County Times-Gazette"},"butlereagle.com":{name:"Butler Eagle"},"buxtonadvertiser.co.uk":{issn:"0966-5862",name:"Buxton Advertiser",oclc:"500151887"},"bvwv.nwaonline.com":{name:"Weekly Vista"},"byronreviewonline.com":{name:"Byron Review"},"c-bstatesman.com":{name:"Statesman"},"cabinet.com":{name:"Cabinet Press"},"caboolenterprise.com":{name:"Enterprise"},"cadillacnews.com":{name:"Cadillac News"},"cadizrecord.com":{name:"Cadiz Record"},"cairomessenger.com":{name:"The Cairo Messenger"},"calaverasenterprise.com":{name:"Calaveras Enterprise"},"caledonianrecord.com":{name:"Caledonian Record"},"calgarysun.com":{issn:"0832-2422",name:"Calgary Sun"},"calhounchronicle.com":{name:"Calhoun Chronicle"},"calhounnewsherald.com":{name:"Calhoun News Herald"},"californiademocrat.com":{name:"California Democrat"},"callandpost.com":{issn:"0045-4036",name:"Call and Post",oclc:"9538047"},"caller.com":{name:"Caller-Times"},"calmarcourier.com":{name:"Calmar Courier"},"camaspostrecord.com":{name:"Camas-Washougal Post-Record"},"cambridgechron.com":{name:"Cambridge Chronicle"},"camdenarknews.com":{name:"Camden News"},"cameronherald.com":{name:"Cameron Herald"},"cameronpilot.com":{name:"Cameron Parish Pilot"},"campbellexpress.com":{name:"Campbell Express"},"campcountynow.com":{name:"Pittsburg Gazette"},"canarsiecourier.com":{name:"Canarsie Courier"},"canberratimes.com.au":{name:"The Canberra Times",oclc:"220340116"},"cannoncourier.com":{name:"Cannon Courier"},"cannonfalls.com":{name:"Cannon Falls Beacon"},"canoncitydailyrecord.com":{name:"Daily Record"},"cantondailyledger.com":{name:"Daily Ledger"},"cantonrep.com":{name:"Canton Repository"},"canyon-news.com":{name:"Canyon News"},"canyoncourier.com":{name:"Canyon Courier",oclc:"22191902"},"canyonnews.com":{name:"Canyon News"},"cape-coral-daily-breeze.com":{name:"Cape Coral Daily Breeze"},"capecodchronicle.com":{name:"Cape Cod Chronicle"},"capecodtimes.com":{issn:"0747-1467",name:"Cape Cod Times"},"capecourier.com":{name:"Cape Courier"},"capegazette.com":{name:"Cape Gazette"},"capemaycountyherald.com":{name:"Cape May County Herald"},"capital.bg":{issn:"1310-7984",name:"Capital"},"capitalcityweekly.com":{name:"Capital City Weekly"},"capitalgazette.com":{name:"Capital Gazette"},"capitalpress.com":{name:"Capital Press Agriculture Weekly"},"capitolfax.com":{name:"Capitol Fax",oclc:"226394739"},"capitolhilltimes.com":{name:"Capitol Hill Times"},"capitolweekly.net":{name:"Capitol Weekly"},"caprockcourier.com":{name:"Caprock Courier"},"captivacurrent.com":{name:"Captiva Current"},"caravannews.com":{name:"Stockton Caravan"},"carboncountynews.com":{name:"Carbon County News Online"},"carlislemosquito.org":{name:"Carlisle Mosquito"},"carmelpinecone.com":{name:"Carmel Pine Cone",oclc:"28146037"},"carmichaeltimes.com":{name:"Carmichael Times"},"carmitimes.com":{name:"Carmi Times"},"carriagetownenews.com":{name:"Carriage Town News"},"carrizospringsjavelin.com":{name:"Javelin"},"carrollconews.com":{name:"Carroll County Newspapers"},"carrollcountycomet.com":{name:"Carroll County Comet"},"carrollcountytimes.com":{name:"Carroll County Times"},"carrollspaper.com":{name:"Carroll Daily Times Herald"},"carthagecourier.com":{name:"Carthage Courier"},"carthagepress.com":{name:"Carthage Press"},"carycitizen.com":{name:"Cary Citizen"},"cascadebusnews.com":{name:"Cascade Business News"},"caseynews.net":{name:"Casey County News"},"cashmerevalleyrecord.com":{name:"Valley Record"},"cassville-democrat.com":{name:"Democrat"},"castlerocknewspress.net":{name:"News Press"},"casualliving.com":{issn:"0740-8285",name:"Casual Living Magazine"},"caswellmessenger.com":{name:"Caswell Messenger"},"catholicsun.org":{issn:"1533-0230",name:"The Catholic Sun"},"cathstan.org":{issn:"0411-2741",name:"Catholic Standard",oclc:"11760218"},"catskillmountainnews.com":{name:"Catskill Mountain News",oclc:"8433945"},"cbc.ca":{name:"CBC News"},"cblnews.com":{name:"Legal & Business News"},"ccchronicle.net":{name:"Cass City Chronicle"},"ccenterdispatch.com":{name:"Clay Center Dispatch"},"ccheadliner.com":{name:"Christian County Headliner"},"cctimesdemocrat.com":{name:"Clay County Times Democrat"},"cdapress.com":{name:"Coeur d'Alene Press"},"cdispatch.com":{name:"Commercial Dispatch"},"cdt.ch":{name:"Corriere del Ticino",oclc:"31672743"},"cecildaily.com":{name:"Cecil Whig"},"cedarkeybeacon.com":{name:"Cedar Key Beacon"},"cedarrepublican.com":{name:"Cedar Republican"},"cedarspringspost.com":{name:"Cedar Springs Post"},"centennialcitizen.net":{name:"Centennial Citizen"},"centerpostdispatch.com":{name:"Center Post Dispatch"},"centralcitynews.net":{name:"Central City News"},"centralkitsapreporter.com":{name:"Central Kitsap Reporter"},"centre-view.com":{name:"Centre View"},"centredaily.com":{name:"Centre Daily Times"},"cerescourier.com":{name:"Ceres Courier"},"cfpmidweek.com":{name:"Community Free Press"},"cgsentinel.com":{name:"Cottage Grove Sentinel"},"chaffeecountytimes.com":{name:"Chaffee County Times"},"chagrinvalleytoday.com":{name:"Chagrin Valley Times"},"challismessenger.com":{name:"Challis Messenger"},"chamberlainsun.com":{name:"Sun"},"championnewspapers.com":{name:"Chino Champion"},"chanute.com":{name:"Chanute Tribune"},"charitonleader.com":{name:"Chariton Herald-Patriot"},"charkoosta.com":{name:"Char-Koosta News"},"charlescitypress.com":{name:"Charles City Press"},"charleston.thedigitel.com":{name:"TheDigitel"},"charlestoncitypaper.com":{name:"Charleston City Paper"},"charlestonexpress.com":{name:"Charleston Express"},"charlestownbridge.com":{name:"Charlestown Patriot-Bridge"},"charliehebdo.fr":{issn:"1240-0068",name:"Charlie Hebdo"},"charlotte-sun.com":{name:"Charlotte Sun Herald"},"charlotte.floridaweekly.com":{name:"Florida Weekly"},"charlotte.quepasanoticias.com":{name:"Mi Gente de Charlotte"},"charlottejewishnews.org":{name:"Charlotte Jewish News",oclc:"38071216"},"charlotteobserver.com":{name:"Charlotte Observer"},"charltoncountyherald.com":{name:"Charlton County Herald"},"chathamnewsandrecord.com":{name:"Chatham News"},"chattanoogan.com":{name:"Chattanoogan"},"chattanoogapulse.com":{name:"Pulse"},"cheboygannews.com":{name:"Daily Tribune"},"cheektowagabee.com":{name:"Cheektowaga Bee"},"chelsearecord.com":{name:"Chelsea Record"},"cheneyfreepress.com":{name:"Cheney Free Press"},"cherokeescout.com":{name:"Cherokee Scout"},"cheshireherald.com":{name:"Cheshire Herald"},"chesterfieldobserver.com":{name:"Chesterfield Observer"},"chestertelegraph.org":{name:"Chester Telegraph"},"chestertontribune.com":{name:"Chesterton Tribune"},"chetekalert.com":{name:"Chetek Alert"},"chicagobusiness.com":{name:"Crain's Chicago Business"},"chicagocrusader.com":{name:"Chicago Crusader"},"chicagodefender.com":{name:"Chicago Defender"},"chicagolawbulletin.com":{name:"Chicago Daily Law Bulletin"},"chicagoreader.com":{name:"Chicago Reader"},"chicagoreporter.com":{name:"Chicago Reporter"},"chicagotribune.com":{issn:"1085-6706",issn_alt:"2165-171X",name:"Chicago Tribune",oclc:"60639020"},"chickashanews.com":{name:"Express-Star"},"chicoer.com":{name:"Chico Enterprise-Record"},"chieflandcitizen.com":{name:"Chiefland Citizen"},"chieftain.com":{name:"Pueblo Chieftain"},"chilkatvalleynews.com":{name:"Chilkat Valley News"},"chillicothegazette.com":{name:"Chillicothe Gazette"},"chillicothenews.com":{name:"Constitution-Tribune"},"chillicothetimesbulletin.com":{name:"Chillicothe Times-Bulletin"},"chinookobserver.com":{name:"Chinook Observer"},"chipleybugle.com":{name:"Chipley Bugle Newspaper"},"chippewa.com":{name:"Chippewa Herald"},"chisagocountypress.com":{name:"Chisago County Press"},"choctawplaindealer.com":{name:"Choctaw Plaindealer"},"choctawsun.org":{name:"Choctaw Sun"},"choteauacantha.com":{name:"Choteau Acantha"},"chron.com":{name:"Houston Chronicle"},"chronicle-express.com":{name:"Chronicle-Express"},"chronicle-independent.com":{name:"Chronicle-Independent"},"chronicle-tribune.com":{name:"Chronicle-Tribune"},"chronicle.augusta.com":{name:"Augusta Chronicle"},"chronicle.com":{issn:"0009-5982",name:"The Chronicle of Higher Education",oclc:"1554535"},"chronicleonline.com":{name:"Citrus County Chronicle"},"chroniclet.com":{name:"Chronicle-Telegram"},"chronicletimes.com":{name:"Chronicle Times"},"chronline.com":{name:"Chronicle"},"cibolabeacon.com":{name:"Cibola County Beacon"},"cincinnati.com":{name:"The Cincinnati Enquirer",oclc:"51645694"},"circlevilleherald.com":{name:"Circleville Herald"},"citizen-times.com":{name:"Asheville Citizen-Times"},"citizennewspapers.com":{name:"Middletown Valley Citizen"},"citizensvoice.com":{name:"Citizens Voice"},"citizentribune.com":{name:"Citizen Tribune"},"citrusheightsmessenger.com":{name:"Citrus Heights Messenger"},"citybeat.com":{name:"Cincinnati City Beat"},"citylimits.org":{issn:"0199-0330",name:"Abdullahi Ahmed Irro"},"citypages.com":{name:"City Pages"},"citypaper.com":{issn:"0740-3410",name:"City Paper"},"cityweekly.net":{name:"Salt Lake City Weekly"},"civilbeat.org":{name:"Honolulu Civil Beat"},"clairemonttimes.com":{name:"Clairemont Times"},"clantonadvertiser.com":{name:"Clanton Advertiser"},"clarecountyreview.com":{name:"Clare County Review"},"claremont-courier.com":{name:"Claremont Courier"},"claremoreprogress.com":{name:"Claremore Daily Progress"},"clarencebee.com":{name:"Clarence Bee"},"clarendonlive.com":{name:"Clarendon Enterprise"},"clarionherald.info":{name:"Clarion Herald"},"clarionledger.com":{name:"Clarion-Ledger"},"clarionnewsonline.com":{name:"Wright County Monitor"},"clarionpaper.com":{name:"Mount Hope Clarion"},"clarkcountygazette.com":{name:"Clark County Gazette"},"clarkecountydemocrat.com":{name:"Clarke County Democrat"},"clarkecountytrib.com":{name:"Clarke County Tribune"},"clarkstonnews.com":{name:"Clarkston News"},"clatl.com":{name:"Creative Loafing Atlanta"},"claxtonenterprise.com":{name:"Claxton Enterprise"},"claycity-times.com":{name:"Clay City Times"},"claytodayonline.com":{name:"Clay Today"},"claytoncountyregister.com":{name:"Clayton County Register"},"clclt.com":{name:"Creative Loafing"},"clearcreekcourant.com":{name:"Clear Creek Courant"},"clearwatergazette.com":{name:"Clearwater Beacon"},"clearwaterprogress.com":{name:"Clearwater Progress"},"clearwatertribune.com":{name:"Clearwater Tribune"},"cleburnetimesreview.com":{name:"Cleburne Times-Review"},"clermontnewsleader.com":{name:"Clermont News Leader"},"clermontsun.com":{name:"Clermont Sun"},"clevelandadvocate.com":{issn:"0746-7125",name:"Cleveland Advocate"},"clevelandbanner.com":{name:"Cleveland Daily Banner"},"clevelandcountyherald.com":{name:"Cleveland County Herald"},"clevescene.com":{name:"Cleveland Scene"},"cliftonadvocate.com":{name:"Clifton Advocate"},"cliftonrecord.com":{name:"Clifton Record"},"clintonchronicle.com":{name:"Clinton Chronicle"},"clintoncountyleader.com":{name:"Clinton County Leader"},"clintondailynews.com":{name:"Clinton Daily News"},"clintonherald.com":{name:"Clinton Herald"},"clintonnc.com":{name:"Sampson Independent"},"clintonnews.net":{name:"Clinton County News"},"clreporter.com":{name:"Clear Lake Mirror Reporter"},"cnyvision.com":{name:"CNY Vision"},"coalvalleynews.com":{name:"Coal Valley News"},"coastalcourier.com":{name:"Coastal Courier"},"coastalpoint.com":{name:"Coastal Point"},"coastalview.com":{name:"Coastal View News"},"cobbonline.com":{name:"Cobb Online"},"codyenterprise.com":{name:"Cody Enterprise"},"coffeycountyonline.com":{name:"Coffey County Republican"},"colbsent.com":{name:"News and Sentinel"},"colebrookchronicle.weebly.com":{name:"Colebrook Chronicle"},"colfaxrecord.com":{name:"Colfax Record"},"colliemail.com.au":{issn:"1321-5361",name:"Collie Mail"},"coloradoan.com":{name:"Coloradoan"},"coloradocountycitizen.com":{name:"Colorado County Citizen"},"coloradodaily.com":{name:"Colorado Daily"},"coloradostatesman.com":{issn:"2577-2317",name:"Colorado Statesman",oclc:"9542060"},"columbiabasinherald.com":{issn:"1041-1658",name:"Columbia Basin Herald",oclc:"18670398"},"columbiacountyobserver.com":{name:"Columbia County Observer"},"columbiadailyherald.com":{name:"Daily Herald"},"columbiamissourian.com":{issn:"0747-1874",name:"Columbia Missourian",oclc:"10632065"},"columbian.com":{name:"Columbian"},"columbianprogress.com":{name:"Columbian Progress"},"columbiatribune.com":{name:"Columbia Daily Tribune"},"columbinecourier.com":{name:"Columbine Courier"},"columbusalive.com":{name:"Columbus Alive"},"columbuspost.com":{name:"Columbus Post"},"columbustelegram.com":{name:"Columbus Telegram"},"commercecitysentinel.com":{name:"Sentinel Express"},"commercenewstoday.com":{name:"Commerce News Today"},"commercial-news.com":{name:"Danville Commercial-News"},"commercialappeal.com":{issn:"0745-4856",name:"The Commercial Appeal",oclc:"9227552"},"commercialrecord.com":{name:"Commercial Record"},"communityadvocate.com":{name:"Community Advocate"},"communitynewscorp.com":{name:"Star Herald"},"communitynewspapers.com":{name:"Community News of Miami"},"communityvoiceks.com":{name:"Community Voice"},"concordmonitor.com":{name:"Concord Monitor",oclc:"10828908"},"concrete-herald.com":{name:"Concrete Herald"},"conejoscountycitizen.com":{name:"Conejos County Citizen"},"connectoregonwi.com":{name:"Oregon Observer"},"connectsavannah.com":{name:"Connect Savannah"},"connectstatesboro.com":{name:"Connect Statesboro"},"conntact.com":{name:"Business New Haven"},"conquistadornews.com":{name:"El Conquistador"},"constructionequipment.com":{issn:"0192-3978",name:"Construction Equipment"},"conwaydailysun.com":{name:"Conway Daily Sun"},"cookcountynews-herald.com":{name:"Cook County News Herald"},"coopercrier.com":{name:"CoopersTown Crier"},"cooperreview.com":{name:"Cooper Review",oclc:"14148322"},"copamonitor.com":{name:"Maricopa Monitor"},"copiahcountycourier.com":{name:"Copiah County Courier"},"copperarea.com":{name:"Copper Area News"},"coppercountrynews.com":{name:"Copper Country News"},"cordeledispatch.com":{name:"Cordele Dispatch"},"cordellbeacon.com":{name:"Cordell Beacon"},"corridormessenger.com":{name:"Corridor Messenger"},"corriere.com":{issn:"0045-866X",name:"Corriere Canadese"},"corriere.it":{issn:"1120-4982",name:"Corriere della Sera"},"corsicanadailysun.com":{name:"Corsicana Daily Sun"},"cortlandstandard.net":{name:"Cortland Standard"},"corydondemocrat.com":{name:"Corydon Democrat"},"corydontimes.com":{name:"Times-Republican"},"coshoctontribune.com":{name:"Coshocton Tribune"},"cottonwoodchronicle.com":{name:"Cottonwood Chronicle"},"countrymessenger.com":{name:"Country Messenger"},"countyenews.com":{name:"Stark County News"},"countytimes.com":{name:"Litchfield County Times"},"courant.com":{name:"Hartford Courant"},"courier-herald.com":{name:"Courier Herald"},"courier-tribune.com":{name:"Courier Tribune"},"courier.mainelymediallc.com":{name:"Biddeford-Saco-OOB Courier"},"courieranywhere.com":{name:"Savannah Courier"},"courierherald.com":{name:"Courier-Herald"},"couriernews.com":{name:"Courier"},"courierpostonline.com":{name:"Courier-Post"},"courierpress.com":{name:"Evansville Courier"},"courierstandardenterprise.com":{name:"Courier Standard Enterprise"},"couriertribuneonline.com":{name:"Seneca Courier-Tribune"},"coveleaderpress.com":{name:"Leader-Press"},"covingtonleader.com":{name:"Covington Leader"},"covnews.com":{name:"Covington News"},"coyote-tv.com":{name:"High Desert Advocate"},"cpioneer.com":{name:"Cascade Pioneer"},"craigdailypress.com":{name:"Craig Daily Press"},"crainscleveland.com":{name:"Crain's Cleveland Business"},"crainsdetroit.com":{name:"Crain's Detroit Business"},"crainsnewyork.com":{name:"Crain's New York Business"},"crawfordcountyavalanche.com":{name:"Crawford County Avalanche"},"creightonnews.com":{name:"Creighton News"},"crescent-news.com":{name:"Crescent-News"},"crescotimes.com":{name:"Times Plain Dealer"},"crestedbuttenews.com":{name:"Crested Butte News"},"crestonnews.com":{name:"Creston News Advertiser"},"crestviewbulletin.com":{name:"Crestview News Bulletin"},"crittendenpress.blogspot.com":{name:"Crittenden Press"},"cronicasnewspaper.com":{name:"Cronicas"},"cronista.com":{issn:"0325-5212",name:"El Cronista"},"crookstontimes.com":{name:"Daily Times"},"crossroadschronicle.com":{name:"Crossroads Chronicle"},"crossroadsnews.com":{name:"Cross Roads News"},"crossville-chronicle.com":{name:"Crossville Chronicle"},"crowleypostsignal.com":{name:"Crowley Post-Signal"},"crozetgazette.com":{name:"Crozet Gazette"},"csctimes.com":{name:"County Times"},"csindy.com":{name:"Independent"},"csmonitor.com":{issn:"0882-7729",name:"The Christian Science Monitor"},"csrecord.net":{name:"Cold Spring Record"},"ctpost.com":{name:"Connecticut Post"},"cullmansense.com":{name:"CullmanSense"},"cullmantimes.com":{name:"Cullman Times"},"cultua.media":{issn:"2519-4429",name:"Culture and Life"},"culturadoor.com":{name:"Culturadoor"},"culvercityobserver.com":{name:"Culver City Observer"},"cumberland-advocate.com":{name:"Cumberland Advocate"},"cumberlandcountynewspaper.com":{name:"Cumberland County News"},"cumberlink.com":{name:"Sentinel"},"cunews.info":{name:"Ajo Copper News"},"current.mnsun.com":{name:"Sun Current"},"currentargus.com":{name:"Current-Argus"},"currentincarmel.com":{name:"Current in Carmel"},"currentinfishers.com":{name:"Current in Fishers"},"currentinwestfield.com":{name:"Current in Westfield"},"currentnoblesville.com":{name:"Current in Noblesville"},"currentzionsville.com":{name:"Current in Zionsville"},"currycountyreporter.com":{name:"Curry County Reporter"},"currypilot.com":{name:"Curry Coastal Pilot"},"custercountychief.com":{name:"Custer County Chief"},"cvbugle.com":{name:"Camp Verde Bugle"},"cvrnews.com":{name:"Chino Valley Review"},"cvt-news.com":{name:"Citizen Voice & Times"},"cynthianademocrat.com":{name:"Cynthiana Democrat"},"daily-chronicle.com":{name:"Daily Chronicle"},"daily-jeff.com":{name:"Daily Jeffersonian"},"daily-times.com":{name:"Daily Times"},"daily-tribune.com":{name:"Daily Tribune"},"dailyadvance.com":{name:"Daily Advance"},"dailyadvertiser.com.au":{issn:"1322-8110",name:"The Daily Advertiser",oclc:"220658139"},"dailyadvocate.com":{name:"Daily Advocate"},"dailyamerican.com":{name:"Daily American"},"dailyastorian.com":{name:"Daily Astorian"},"dailybarometer.com":{issn:"1080-6814",name:"The Daily Barometer"},"dailybreeze.com":{name:"Daily Breeze"},"dailybulletin.com":{name:"Inland Valley Daily Bulletin"},"dailycall.com":{name:"Piqua Daily Call"},"dailycamera.com":{name:"Daily Camera"},"dailychiefunion.com":{name:"Daily Chief-Union"},"dailycomet.com":{name:"Daily Comet"},"dailycommercial.com":{name:"Daily Commercial"},"dailycorinthian.com":{name:"Daily Corinthian"},"dailycourier.com":{name:"Daily Courier"},"dailydem.com":{name:"Daily Democrat"},"dailydemocrat.com":{issn:"0747-1890",name:"Daily Democrat"},"dailyecho.co.uk":{issn:"0969-5702",name:"Southern Daily Echo"},"dailyfreeman.com":{name:"Daily Freeman"},"dailyfreepress.com":{issn:"1094-7337",name:"The Daily Free Press"},"dailygate.com":{name:"Daily Gate City"},"dailygazette.com":{issn:"1050-0340",name:"The Daily Gazette"},"dailyherald.com":{name:"Daily Herald",oclc:"18030507"},"dailyillini.com":{issn:"8750-6769",name:"Daily Illini"},"dailyindependent.com":{name:"Daily Independent"},"dailyinterlake.com":{name:"Daily Inter Lake"},"dailyiowegian.com":{name:"Centerville Daily Iowegian"},"dailyitem.com":{name:"Daily Item"},"dailyleader.com":{name:"Daily Leader"},"dailyleaderextra.com":{name:"Madison Daily Leader"},"dailylocal.com":{name:"Daily Local News"},"dailymail.co.uk":{issn:"0307-7578",name:"Daily Mail",oclc:"16310567"},"dailynews.com":{name:"Los Angeles Daily"},"dailypostathenian.com":{name:"Daily Post Athenian"},"dailypress.com":{name:"Daily Press"},"dailypress.net":{name:"Daily Press"},"dailyprogress.com":{name:"Daily Progress"},"dailyranger.com":{name:"Riverton Daily Ranger"},"dailyrecord.co.uk":{issn:"0956-8069",name:"Daily Record",oclc:"500344244"},"dailyrecord.com":{name:"Daily Record",oclc:"12777527"},"dailyrecord.us":{name:"Daily Record"},"dailyrecordnews.com":{name:"Daily Record"},"dailyregister.com":{name:"Daily Register"},"dailyreportonline.com":{name:"Fulton County Daily Report"},"dailyrepublic.com":{name:"Daily Republic"},"dailyrepublicannews.com":{name:"The Daily Republican",oclc:"27159756"},"dailysentinel.com":{name:"Daily Sentinel"},"dailystandard.com":{name:"Daily Standard"},"dailysunnews.com":{name:"Daily Sun News"},"dailytidings.com":{name:"Ashland Daily Tidings"},"dailytimes.com":{name:"Kerrville Daily Times"},"dailytimesleader.com":{name:"Daily Times Leader"},"dailytrib.com":{name:"Daily Tribune"},"dailytribune.com":{name:"Daily Tribune"},"dailytribune.net":{name:"Daily Tribune"},"dailyunion.com":{name:"Daily Jefferson Co Union"},"dailyworld.com":{name:"Opelousas Daily World"},"dallasnews.com":{issn:"1553-846X",name:"The Dallas Morning News"},"dallasobserver.com":{issn:"0732-0299",name:"Dallas Observer"},"daltondailycitizen.com":{name:"Dalton Daily Citizen"},"danapointtimes.com":{name:"Dana Point Times"},"dansvilleonline.com":{name:"Genesee Country Express"},"dariennewsonline.com":{name:"Darien News-Review"},"darientimes.com":{name:"Darien Times"},"darnews.com":{name:"Daily American Republic"},"dasselcokato.com":{name:"Dassel Cokato Enterprise Dispatch"},"davisclipper.com":{name:"Davis County Clipper"},"davisenterprise.com":{name:"Davis Enterprise"},"davisonindex.mihomepaper.com":{name:"Davison Index"},"dawn.com":{issn:"1563-9444",name:"Dawn"},"dawsonnews.com":{name:"Dawsonnews"},"dawsonspringsprogress.com":{name:"Dawson Springs Progress"},"daytonatimes.com":{name:"Daytona Times"},"daytondailynews.com":{issn:"0897-0920",name:"Dayton Daily News",oclc:"232118157"},"dbrnews.com":{name:"Bulletin & Review"},"dchieftain.com":{name:"El Defensor Chieftain"},"dcourier.com":{name:"The Daily Courier",oclc:"34038415"},"dcpostgazette.com":{name:"Douglas County Post-Gazette"},"dcspotlight.com":{name:"DC Spotlight"},"dddnews.com":{name:"Daily Dunklin Democrat"},"ddtonline.com":{name:"Delta Democrat Times"},"decaturdaily.com":{name:"Decatur Daily"},"decaturdailydemocrat.com":{name:"Decatur Daily Democrat"},"decaturtribune.com":{name:"Decatur Tribune"},"deccanchronicle.com":{name:"Deccan Chronicle",oclc:"302708964"},"deccanherald.com":{name:"Deccan Herald",oclc:"185061134"},"decorahnewspapers.com":{name:"Decorah Newspapers"},"delawarestatenews.net":{name:"Delaware State News"},"delcotimes.com":{name:"Delaware County Daily Times"},"deleonfreepress.com":{name:"De Leon Free Press"},"delgazette.com":{name:"Delaware Gazette"},"delmartimes.net":{name:"Del Mar Times"},"delmarvanow.com":{issn:"0331-2739",name:"The Daily Times",oclc:"9958506"},"delnorteprospector.com":{name:"Del Norte Prospector"},"delphosherald.com":{name:"Daily Herald"},"delrionewsherald.com":{name:"News Herald"},"deltacountyindependent.com":{name:"Delta County Independent"},"deltadiscovery.com":{name:"Delta Discovery"},"deltanewscitizen.com":{name:"Delta News-Citizen"},"deltanewsweb.com":{name:"Delta News Web"},"deltawindonline.com":{name:"Delta Wind"},"demingheadlight.com":{name:"Deming Headlight"},"demo-mo.com":{name:"Democrat-Missourian"},"democratandchronicle.com":{name:"Democrat & Chronicle"},"democratargus.com":{name:"Democrat Argus"},"democratherald.com":{name:"Democrat-Herald"},"democratnewspapers.com":{name:"Mason County Democrat"},"democrattribune.com":{name:"Democrat Tribune"},"demopolistimes.com":{name:"Demopolis Times"},"dentonorator.com":{name:"Denton Orator"},"dentonrc.com":{name:"Denton Record-Chronicle"},"denveriaforum.com":{name:"Denver Forum"},"denverpost.com":{issn:"1930-2193",name:"The Denver Post"},"denverurbanspectrum.com":{name:"Denver Urban Spectrum"},"denvervoice.org":{name:"Denver Voice"},"dequeenbee.com":{name:"De Queen Bee"},"dequincynews.com":{name:"DeQuincy News"},"derbyinformer.com":{name:"Derby Informer"},"derrynews.com":{name:"Derry News"},"deseret.com":{issn:"0745-4724",name:"Deseret News"},"deseretnews.com":{name:"Deseret News"},"desertdispatch.com":{name:"Desert Dispatch"},"desertnews.com":{name:"Mojave Desert News"},"desertstarweekly.com":{name:"Desert Star Weekly"},"desertsun.com":{name:"The Desert Sun",oclc:"26432381"},"desmoinesregister.com":{name:"Des Moines Register"},"desotoexplorer.com":{name:"Desoto Explorer"},"desototimes.com":{name:"DeSoto Times Tribune"},"desplainesvalleynews.com":{name:"Desplaines Valley News"},"detroitnews.com":{issn:"1055-2715",name:"The Detroit News"},"dewitt-ee.com":{name:"DeWitt Era-Enterprise"},"dewittcountytoday.com":{name:"Cuero Record"},"dewittobserver.com":{name:"DeWitt Observer"},"dglobe.com":{name:"Daily Globe"},"di.se":{issn:"0346-640X",name:"Dagens industri"},"diaadianews.com":{name:"Dia a Dia News"},"diariopalmbeach.com":{name:"Diario Palm Beach"},"dibollfreepress.com":{name:"Diboll Free Press"},"dickinsoncountynews.com":{name:"Dickinson County News"},"dillonheraldonline.com":{name:"Dillon Herald"},"dillontribune.com":{name:"Dillon Tribune"},"dispatch.com":{name:"Columbus Dispatch"},"dispatchnews.com":{name:"Dispatch"},"dixonpilot.com":{name:"Dixon Pilot"},"dl-online.com":{name:"DL-Online"},"dln.com":{name:"Daily Legal News"},"dn.se":{issn:"1101-2447",name:"Dagens Nyheter"},"dnronline.com":{name:"Daily News Record"},"dodgecountynews.com":{name:"Dodge County News"},"dodgeglobe.com":{name:"Dodge City Daily Globe"},"donaldsonvillechief.com":{name:"Donaldsonville Chief"},"donalsonvillenews.com":{name:"Donalsonville News"},"doniphanherald.com":{name:"Doniphan Herald"},"dosmundos.com":{name:"Dos Mundos"},"dothaneagle.com":{name:"Dothan Eagle"},"dotnews.com":{name:"Dorchester Reporter"},"douglas-budget.com":{name:"Douglas Budget"},"douglascountyherald.com":{name:"Douglas County Herald"},"douglascountynewspress.net":{name:"Douglas County News-Press"},"douglascountysentinel.com":{name:"Douglas County Sentinel"},"douglasdispatch.com":{name:"Douglas Dispatch"},"douglasenterprise.net":{name:"Douglas Enterprise"},"dovecreekpress.com":{name:"Dove Creek Press"},"doverpost.com":{name:"Dover Post"},"downriversundaytimes.com":{name:"Dearborn Times-Herald"},"downtownexpress.com":{name:"Downtown Express"},"dptribune.com":{name:"Deer Park Tribune"},"draugas.org":{name:"Draugas"},"dresdenenterprise.com":{name:"Dresden Enterprise"},"dublincitizen.com":{name:"Dublin Citizen"},"duboiscountyherald.com":{name:"Dubois County Herald"},"duluthbudgeteer.com":{name:"Duluth Budgeteer News"},"duluthnewstribune.com":{name:"Duluth News-Tribune"},"duluthshippingnews.com":{name:"Duluth Shipping News"},"duncanbanner.com":{name:"Duncan Banner"},"dundalkeagle.com":{name:"Dundalk Eagle"},"dundeeonline.com":{name:"Independent"},"duquoin.com":{name:"Du Quoin Evening Call"},"durangoherald.com":{name:"Durango Herald"},"durangotelegraph.com":{name:"Durango Telegraph"},"durantdemocrat.com":{name:"Durant Daily Democrat"},"durhamskywriter.com":{name:"Durham Skywriter"},"duxburyclipper.com":{name:"Duxbury Clipper"},"dvalnews.com":{name:"Deerfield Valley News"},"dyersvillecommercial.com":{name:"Dyersville Commercial"},"dysartreporter.com":{name:"Dysart Reporter"},"dziennik.com":{name:"Nowy Dziennik"},"eacourier.com":{name:"Eastern Arizona Courier"},"eaglelakeheadlight.com":{name:"Eagle Lake Headlight"},"eaglenewsonline.com":{name:"Eagle Newspapers"},"eagleobserver.com":{name:"Westside Eagle Observer"},"eagletimes.com":{name:"Claremont Eagle Times"},"eagletribune.com":{name:"Eagle-Tribune"},"earlycountynews.com":{name:"Early County News"},"eastaurorabee.com":{name:"East Aurora Bee"},"eastbayexpress.com":{name:"East Bay Express"},"eastbaytimes.com":{issn:"1068-5936",name:"Oakland Tribune",oclc:"760300116"},"eastcountygazette.com":{name:"East County Gazette"},"eastcountymagazine.org":{name:"East County Magazine"},"eastcountytimesonline.com":{name:"East County Times"},"easterncoloradoplainsman.com":{name:"Limon Leader"},"easterngazette.com":{name:"Eastern Gazette"},"easternshorepost.com":{name:"Eastern Shore Post"},"easthamptonstar.com":{name:"East Hampton Star"},"eastietimes.com":{name:"East Boston Times"},"eastoncourier.com":{name:"Easton Courier"},"eastoregonian.com":{name:"East Oregonian"},"eastpeoriatimescourier.com":{name:"East Peoria Times-Courier"},"eastsidereviewnews.com":{name:"East Side Review"},"eastvalleytribune.com":{name:"East Valley Tribune"},"easyreadernews.com":{name:"Easy Reader"},"ebar.com":{name:"Bay Area Reporter"},"eccalifornian.com":{name:"East County Californian"},"echo-pilot.com":{name:"Echo Pilot"},"echopress.com":{name:"Echo Press"},"ecmpostreview.com":{name:"ECM Post Review"},"economist.com":{issn:"0013-0613",name:"The Economist"},"ecprogress.com":{name:"Emery County Progress"},"edgefieldadvertiser.com":{name:"Edgefield Advertiser"},"edgertonenterprise.com":{name:"Edgerton Enterprise"},"edmondsbeacon.villagesoup.com":{name:"Edmonds Beacon"},"edmondsun.com":{name:"Edmond Evening Sun"},"edmontonsun.com":{issn:"0839-4776",name:"Edmonton Sun"},"educationupdate.com":{name:"Education Update",oclc:"46666626"},"edweek.org":{issn:"0277-4232",name:"Education Week",oclc:"07579948"},"effinghamdailynews.com":{name:"Effingham Daily News"},"effinghamherald.net":{name:"Effingham Herald"},"egcitizen.com":{name:"Elk Grove Citizen"},"ehextra.com":{name:"Eagle Herald"},"ehgazette.com":{name:"Gazette"},"el-observador.com":{name:"El Observador"},"elba-clipper.com":{name:"Elba Clipper"},"elbertcountynews.net":{name:"Elbert County News"},"elberton.com":{name:"Elberton Star"},"elcolombiano.net":{name:"El Colombiano Newspaper"},"elcruceronews.com":{name:"El Crucero Newspaper"},"eldianewschicago.com":{name:"El Dia Chicago"},"eldiariony.com":{issn:"0742-9428",name:"El Diario Nueva York"},"eldoradonews.com":{name:"El Dorado News-Times"},"eldoradospringsmo.com":{name:"El Dorado Springs Sun"},"elespectador.com":{issn:"0122-2856",name:"El Espectador",oclc:"436626557"},"elgincourier.com":{name:"Elgin Courier"},"elginreview.com":{name:"Elgin Review",oclc:"33224077"},"elheraldo.co":{issn:"0122-6142",name:"El Heraldo",oclc:"20412212"},"elheraldonews.com":{name:"El Heraldo News"},"elhispanonews.com":{name:"El Hispano News"},"elhispanonewspaper.com":{name:"El Hispano de Denver"},"elizabethton.com":{name:"Elizabethton Star"},"elkharttruth.com":{issn:"0746-7516",name:"The Elkhart Truth"},"elkintribune.com":{name:"Tribune"},"elkodaily.com":{name:"Elko Daily Free Press"},"elkvalleytimes.com":{name:"Elk Valley Times"},"ellatinoarkansas.com":{name:"El Latino Arkansas"},"ellatinoonline.com":{name:"El Latino San Diego"},"ellicottvilletimes.com":{name:"Times"},"elliscountypress.com":{name:"Ellis County Press"},"ellsworthamerican.com":{name:"Ellsworth American"},"ellwoodcityledger.com":{name:"Ellwood City Ledger"},"elmundo.net":{name:"El Mundo Las Vegas"},"elmundoboston.com":{name:"El Mundo Boston"},"elnuevogeorgia.com":{name:"El Nuevo Georgia"},"elnuevoherald.com":{name:"El Nuevo Herald"},"elpasotimes.com":{name:"El Paso Times"},"elplaneta.com":{name:"El Planeta Boston"},"elpopularnews.com":{name:"El Popular Bakersfield"},"elpreg.org":{issn:"8750-9326",name:"El Pregonero"},"elrenotribune.com":{name:"El Reno Tribune"},"elreporterosf.com":{name:"El Reportero"},"elsberrydemocrat.com":{name:"Elsberry Democrat"},"elsoldesalinas.com":{name:"El Sol de Salinas"},"elsolnews.com":{name:"El Sol News"},"eltecolote.org":{name:"El Tecolote"},"eltiempo.com":{issn:"0121-9987",name:"El Tiempo",oclc:"28894254"},"eltiempohispano.com":{name:"El Tiempo Hispano"},"elyecho.com":{name:"Ely Echo"},"elynews.com":{name:"Ely Daily Times"},"emanuelcountylive.com":{name:"Emanuel County Live"},"emissourian.com":{name:"Washington Missourian"},"emmetsburgnews.com":{name:"Emmetsburg Democrat"},"emol.com":{name:"Emol"},"emporiagazette.com":{name:"Emporia Gazette"},"endeavornews.com":{name:"Cameron County Endeavor News"},"enewscourier.com":{name:"Athens News Courier"},"englewoodherald.net":{name:"Englewood Herald"},"englewoodindependent.com":{name:"Englewood Independent"},"enidnews.com":{name:"Enid News and Eagle"},"ennisdailynews.com":{name:"Ennis Daily News"},"enquirerdemocrat.com":{name:"Macoupin County Enquirer-Democrat"},"enterprise-tocsin.com":{name:"Enterprise-Tocsin"},"enterprisecourier.com":{name:"Enterprise-Courier"},"enterprisenews.com":{name:"Enterprise"},"enterprisepub.com":{name:"Pilot-Tribune & Enterprise"},"epaper.samyukthakarnataka.com":{name:"Samyuktha Karnataka",oclc:"12620822"},"epostpaper.com":{name:"Post Online"},"eptrail.com":{name:"Estes Park Trail-Gazette"},"erstarnews.com":{name:"Elk River Star News"},"erwinrecord.net":{name:"Erwin Record"},"escalontimes.com":{name:"Escalon Times"},"essexnewsdaily.com":{name:"Essex News Daily"},"esthervilledailynews.com":{name:"Estherville Daily News"},"eugeneweekly.com":{name:"Eugene Weekly"},"eunicetoday.com":{name:"Eunice News"},"eurekaherald.com":{name:"Eureka Herald"},"eurekasentinel.com":{name:"Eureka Sentinel"},"eurekaspringsindependent.com":{name:"Eureka Springs Independent"},"evanstonroundtable.com":{name:"Evanston RoundTable"},"eveningsun.com":{name:"Evening Sun"},"eveningtribune.com":{name:"Hornell Evening Tribune"},"everettindependent.com":{name:"Everett Independent"},"evergreentimes.com":{name:"Evergreen Times"},"evesun.com":{name:"Evening Sun"},"examiner-enterprise.com":{name:"Examiner-Enterprise"},"examiner.net":{name:"Examiner"},"examiner.org":{name:"Bellefontaine Examiner"},"examinerpublications.com":{name:"Bartlett Examiner"},"explorebigsky.com":{name:"Explore Big Sky"},"exploreclarion.com":{name:"Explore Clarion"},"express.co.uk":{name:"Daily Express",oclc:"173337077"},"expressen.se":{issn:"1103-923X",name:"Expressen"},"expresso.pt":{issn:"0870-1970",name:"Expresso"},"extranews.net":{name:"Extra Bilingual Newspaper"},"fairborndailyherald.com":{name:"Fairborn Daily Herald"},"fairfaxconnection.com":{name:"Fairfax Connection"},"fairfaxtimes.com":{name:"Fairfax County Times"},"fairfield-ia.villagesoup.com":{name:"Fairfield Ledger"},"fairfield-sun.com":{name:"Fairfield Sun"},"fairfieldbaynews.com":{name:"Fairfield Bay News"},"fairfieldcitizenonline.com":{name:"Fairfield Citizen-News"},"fairfieldsuntimes.com":{name:"Fairfield Sun Times"},"fairmontsentinel.com":{name:"Sentinel",oclc:"20669095"},"falkirkherald.co.uk":{issn:"0963-2034",name:"The Falkirk Herald"},"falloncountyextra.com":{name:"Fallon County Times"},"falmouthoutlook.com":{name:"Falmouth Outlook"},"fanninfocusnewspaper.com":{name:"Fannin Focus"},"fanninsentinel.com":{name:"Fannin Sentinel"},"faribaultcountyregister.com":{name:"Faribault County Register"},"farmandranchguide.com":{name:"Farm & Ranch Guide"},"farmerpublishing.com":{name:"Atchison County Mail"},"farmers-exchange.net":{name:"Farmer's Exchange"},"farmersvilletimes.com":{name:"Farmersville Times"},"farmingtonindependent.com":{name:"Farmington Independent"},"farmvilleherald.com":{name:"Farmville Herald"},"farodevigo.es":{issn:"1131-8163",name:"Faro de Vigo"},"fauquier.com":{name:"Fauquier Democrat"},"fayettecountyrecord.com":{name:"Fayette County Record"},"fayettenewspapers.com":{name:"Advertiser and Democrat"},"fayobserver.com":{name:"Fayetteville Observer"},"fbherald.com":{name:"Fort Bend Herald"},"fbnewsleader.com":{name:"News-Leader"},"fcnp.com":{name:"Falls Church News-Press"},"fd.nl":{issn:"1875-4686",name:"Het Financieele Dagblad"},"fdlreporter.com":{name:"Fond Du Lac Reporter"},"federalwaymirror.com":{name:"Federal Way Mirror"},"ferdinandnews.com":{name:"Ferdinand News"},"ferndaleenterprise.us":{name:"Ferndale Enterprise"},"fgazette.com":{name:"Farmerville Gazette"},"fhtimes.com":{name:"Fountain Hills Times"},"filamvoicemaui.com":{name:"Fil-Am Voice"},"fillmoregazette.com":{name:"Fillmore Gazette"},"finance-commerce.com":{name:"Finance and Commerce"},"financialexpress.com":{name:"The Financial Express",oclc:"30000665"},"fireisland-news.com":{name:"Fire Island News"},"firesideguard.com":{name:"Fireside Guard"},"flagpole.com":{name:"Flagpole"},"flatheadbeacon.com":{name:"Flathead Beacon"},"flcourier.com":{name:"Florida Courier"},"flippinonline.com":{name:"Mountaineer Echo"},"florence-forestnews.com":{name:"Florence Mining News"},"floridatoday.com":{issn:"1051-8304",name:"Florida Today"},"flovalleynews.com":{name:"FloValley News"},"floydcountytimes.com":{name:"Floyd County Times"},"fltimes.com":{name:"Finger Lakes Times"},"fluvannareview.com":{name:"Fluvanna Review"},"flyergroup.com":{name:"Hendricks County Flyer"},"focus.mnsun.com":{name:"Sun-Focus"},"focusnewspaper.com":{name:"Focus"},"folioweekly.com":{name:"Folio Weekly"},"fontanaheraldnews.com":{name:"Fontana Herald News"},"foothillstrader.com":{name:"Foothills Trader"},"foresthillstimes.com":{name:"Forest Hills Times"},"forestlaketimes.com":{name:"Times"},"forestparkreview.com":{name:"Forest Park Review"},"forksforum.com":{name:"Forks Forum"},"forsythnews.com":{name:"Forsyth County News"},"fortmeadeleader.com":{name:"Fort Meade Leader"},"fortmorgantimes.com":{name:"Fort Morgan Times"},"fortmyers.floridaweekly.com":{name:"Florida Weekly"},"fortmyersbeach.news":{name:"Island Sand Paper"},"fortmyersbeachtalk.com":{name:"Beach Talk"},"fortstocktonpioneer.com":{name:"Fort Stockton Pioneer"},"fortwaynereader.com":{name:"Fort Wayne Reader"},"fortworthbusiness.com":{name:"Fort Worth Business Press"},"forward.com":{issn:"1051-340X",name:"The Forward"},"forwardtimesonline.com":{name:"Forward Times"},"fosters.com":{name:"Fosters Daily Democrat"},"fowlertribune.com":{name:"Fowler Tribune"},"foxbororeporter.com":{name:"Foxboro Reporter"},"fr.de":{issn:"0940-6980}}",name:"Frankfurter Rundschau"},"frankenmuthnews.com":{name:"Frankenmuth News"},"frankfortstation.com":{name:"Frankfort Station"},"franklincountycitizen.com":{name:"Franklin County Citizen"},"franklincountytimes.com":{name:"Franklin County Times"},"franklinfavorite.com":{name:"Franklin Favorite"},"frankstoncitizen.com":{name:"Frankston Citizen"},"franoi.com":{name:"Fra Noi"},"frazeeforum.com":{name:"Frazee Forum"},"fredericknewspost.com":{name:"Frederick News-Post"},"fredericksburg.com":{name:"Free Lance-Star"},"fredericksburgstandard.com":{name:"Standard Radio Post"},"free-times.com":{name:"Free Times"},"freeburgtribune.com":{name:"Freeburg Tribune"},"freedomnews.org.uk":{issn:"0016-0504",name:"Freedom"},"freemansd.com":{name:"Freeman Courier"},"freep.com":{name:"Detroit Free Press"},"freepresshouston.com":{name:"Free Press Houston"},"freepressonline.com":{name:"Free Press"},"freepressseries.co.uk":{issn:"1757-3076",name:"The Pontypool Free Press",oclc:"500055627"},"freepressstandard.com":{name:"Free Press Standard"},"freestonecountytimesonline.com":{name:"Freestone County Times"},"freeweekly.com":{name:"Fayetteville Free Weekly"},"fremonttribune.com":{name:"Fremont Tribune"},"fresnobee.com":{name:"Fresno Bee"},"frontdoorsnews.com":{name:"Frontdoors News"},"frontiersman.com":{name:"Frontiersman"},"frontline.in":{issn:"0970-1710",name:"Frontline"},"frontpagemag.com":{name:"FrontPage Magazine",oclc:"47095728"},"frostillustrated.com":{name:"Frost Illustrated"},"fsgnews.com":{name:"Foothills Sun Gazette"},"fstribune.com":{name:"Fort Scott Tribune"},"ft.com":{name:"FT"},"ftleavenworthlamp.com":{name:"Fort Leavenworth Lamp"},"ftluptonpress.com":{name:"Fort Lupton Express"},"fuldafreepress.net":{name:"Fulda Free Press"},"fullertonobserver.com":{name:"Fullerton Observer"},"fultoncountynews.com":{name:"Fulton County News"},"fultonsun.com":{name:"Fulton Sun"},"fvshopper.com":{name:"Fox Valley News Shopper"},"fwbusiness.com":{name:"Business Weekly"},"fwweekly.com":{name:"Fort Worth Weekly"},"gadcotimes.com":{name:"Gadsden County Times"},"gadsdenmessenger.com":{name:"Gadsden Messenger"},"gadsdentimes.com":{name:"Gadsden Times"},"gaffneyledger.com":{name:"Ledger"},"gainesville.com":{name:"Gainesville Sun"},"gainesvilleregister.com":{name:"Gainesville Daily Register"},"gainesvilletimes.com":{name:"Times"},"gainformer.com":{name:"Middle Georgia Informer"},"galaxgazette.com":{name:"Gazette"},"galenagazette.com":{name:"Galena Gazette"},"galesburg.com":{name:"Register Mail"},"galioninquirer.com":{name:"Galion Inquirer"},"gallatinnews.com":{name:"Gallatin News"},"gallatinnorthmissourian.com":{name:"Gallatin North Missourian"},"gallupindependent.com":{name:"Gallup Independent"},"galtheraldonline.com":{name:"Galt Herald"},"galvanews.com":{name:"Galva News"},"galvnews.com":{name:"Galveston County Daily News"},"gantdaily.com":{name:"Gant Daily"},"gardenavalleynews.org":{name:"Gardena Valley News"},"gardencountynews.com":{name:"Garden County News"},"garrardcentralrecord.com":{name:"Garrard Central Record"},"gasconadecountyrepublican.com":{name:"Gasconade County Republican"},"gastongazette.com":{name:"Gaston Gazette"},"gateschilipost.com":{name:"Gates-Chili Post"},"gatesvillemessenger.com":{name:"Gatesville Messenger"},"gatewaynews.org":{name:"Gateway News"},"gazebogazette.com":{name:"Gazebo Gazette"},"gazette-tribune.com":{name:"Okanogan Valley Gazette-Tribune"},"gazette.com":{name:"Gazette"},"gazettechicago.com":{name:"Gazette Chicago"},"gazettelive.co.uk":{issn:"2056-6131",name:"TeessideLive"},"gazettenet.com":{name:"Daily Hampshire Gazette"},"gazetterecord.com":{name:"Gazette-Record"},"gazettes.com":{name:"Grunion Gazette"},"gazettetimes.com":{name:"Corvallis Gazette Times"},"gazettevandetroit.com":{name:"Gazette van Detroit"},"gazettextra.com":{name:"Janesville Gazette"},"gazzetta.it":{issn:"1120-5067",name:"La Gazzetta dello Sport"},"gbtribune.com":{name:"Great Bend Tribune"},"gcdailyworld.com":{name:"Daily World"},"gcherald.com":{name:"Gratiot County Herald"},"gcnews.com":{name:"Garden City News"},"gcnewsgazette.com":{name:"Grayson News-Gazette"},"gcrnews.com":{name:"Greeley County Republican"},"gctelegram.com":{name:"Garden City Telegram"},"gctimesonline.com":{name:"George County Times"},"geneseorepublic.com":{name:"Geneseo Republic"},"geringcitizen.com":{name:"Gering Citizen"},"gettysburgtimes.com":{name:"The Gettysburg Times",oclc:"12443209"},"ghll.truman.edu":{issn:"1089-2060",name:"GHLL"},"gilbertsunnews.com":{name:"Sun News"},"gillettenewsrecord.com":{name:"News-Record"},"gilmermirror.com":{name:"Gilmer Mirror"},"gilroydispatch.com":{name:"Gilroy Dispatch"},"gisborneherald.co.nz":{issn:"1170-0432",name:"The Gisborne Herald"},"gjsentinel.com":{name:"Daily Sentinel"},"gladwinmi.com":{name:"Gladwin County Record"},"glasgowcourier.com":{issn:"2378-8305",name:"The Glasgow Courier",oclc:"12317058"},"glasgowdailytimes.com":{name:"Glasgow Daily Times"},"glasgowtimes.co.uk":{issn:"0307-5745",name:"Glasgow Times"},"glcitizen.com":{name:"Glastonbury Citizen"},"glencoenews.com":{name:"McLeod County Chronicle"},"glendaleregister.com":{name:"Glendale Register"},"glendalestar.com":{name:"Glendale Star"},"glennvillesentinel.net":{name:"Glennville Sentinel"},"glenrockind.com":{name:"Glenrock Independent"},"glensfallschronicle.com":{name:"Glens Falls Chronicle"},"glenviewlantern.com":{name:"Glenview Lantern"},"globegazette.com":{name:"Globe-Gazette"},"gloucestertimes.com":{name:"Gloucester Daily Times",oclc:"20688560"},"gmtoday.com":{name:"Waukesha Freeman"},"godanriver.com":{name:"Danville Register & Bee"},"goerie.com":{name:"GoErie"},"goldendalesentinel.com":{name:"Goldendale Sentinel"},"goldentranscript.net":{name:"Golden Transcript"},"goldrivermessenger.com":{name:"Gold River Messenger"},"goldthwaiteeagle.com":{name:"Goldthwaite Eagle"},"goleader.com":{name:"Westfield Leader"},"gonzalesinquirer.com":{name:"Gonzales Inquirer"},"gonzalestribune.com":{name:"Gonzales Tribune"},"goodtimes.sc":{issn:"0164-4033",name:"Good Times",oclc:"4708924"},"gorevillegazette.com":{name:"Goreville Gazette"},"gorhamtimes.com":{name:"Gorham Times"},"gosanangelo.com":{name:"Standard-Times"},"goshennews.com":{name:"Goshen News"},"goskagit.com":{name:"Skagit Valley Herald"},"gothamgazette.com":{name:"Gotham Gazette"},"gothenburgtimes.com":{name:"Gothenburg Times"},"gotowncrier.com":{name:"Town-Crier"},"gouverneurtribunepress.com":{name:"Gouverneur Tribune-Press"},"gowilkes.com":{name:"GoWilkes"},"gpkmedia.com":{name:"Sierra County Sentinel"},"grahamleader.com":{name:"Graham Leader"},"grahamstar.com":{name:"Graham Star"},"grandblancview.mihomepaper.com":{name:"Grand Blanc View"},"grandcanyonnews.com":{name:"Grand Canyon News"},"grandcanyontourguide.com":{name:"Grand Canyon Tour Guide"},"grandforksherald.com":{name:"Grand Forks Herald"},"grandhaventribune.com":{name:"Grand Haven Tribune"},"grandlakenews.com":{name:"Grand Lake News"},"grandrapidsmn.com":{name:"Herald Review"},"granitefallsnews.com":{name:"Advocate-Tribune"},"granma.cu":{issn:"0864-0424",name:"Granma"},"grantcountypress.com":{name:"Grant County Press"},"grantherald.com":{name:"Grant County Herald"},"grantky.com":{name:"Grant County News"},"granvilleonline.com":{name:"Butner-Creedmoor News"},"graysonrecord.com":{name:"Grayson Record"},"greaterkashmir.com":{name:"Greater Kashmir",oclc:"143593517"},"greatfallsconnection.com":{name:"Great Falls Connection"},"greatfallstribune.com":{name:"Great Falls Tribune"},"greatneckrecord.com":{name:"Great Neck Record"},"greecepost.com":{name:"Greece Post"},"greeleytribune.com":{name:"Greeley Tribune"},"greenbaypressgazette.com":{name:"Green Bay Press Gazette"},"greenbeltnewsreview.com":{name:"Greenbelt News Review"},"greenecountycommonwealth.com":{name:"Greene County Commonwealth"},"greenecountyheraldonline.com":{name:"Greene County Herald"},"greeneprairiepress.com":{name:"Greene Prairie Press"},"greenepublishing.com":{name:"Madison Enterprise Recorder"},"greenevillesun.com":{name:"Greeneville Sun"},"greenfieldnews.com":{name:"Greenfield News"},"greenfieldreporter.com":{name:"Daily Reporter"},"greenfieldvedette.com":{name:"Vedette"},"greenfiretimes.com":{name:"Green Fire Times"},"greenpointstar.com":{name:"Greenpoint Star"},"greensboro.com":{name:"News and Record"},"greensburgdailynews.com":{name:"Greensburg Daily News"},"greenvilleadvocate.com":{name:"Greenville Advocate"},"greenwich-post.com":{name:"Greenwich Post"},"greenwichtime.com":{name:"Greenwich Time"},"greenwooddemocrat.com":{name:"Greenwood Democrat"},"greercitizen.com":{name:"Citizen"},"grenadastar.com":{name:"Daily Star"},"gridleyherald.com":{name:"Gridley Herald"},"griffindailynews.com":{name:"Griffin Daily News"},"grimsbytelegraph.co.uk":{issn:"0961-7051",name:"Grimsby Telegraph",oclc:"909904576"},"grossepointenews.com":{name:"Grosse Pointe News"},"grtimes.com":{name:"Grand Rapids Times"},"grundycountyherald.com":{name:"Grundy County Herald"},"gtrnews.com":{name:"GTR Newspapers"},"gtweekly.com":{name:"Good Times Santa Cruz"},"guampdn.com":{name:"Pacific Daily News",oclc:"55506584"},"guardianlv.com":{name:"Guardian Liberty Voice"},"guardonline.com":{name:"Batesville Guard"},"guernseygazette.com":{name:"Guernsey Gazette"},"guilfordgazette.com":{name:"Guilford Gazette"},"gulfcoastnews.com":{name:"Gulf Coast News"},"gulfnews.com":{name:"Gulf News",oclc:"232115522"},"gunnisontimes.com":{name:"Country Times"},"guttenbergpress.com":{name:"Guttenberg Press"},"guymondailyherald.com":{name:"Guymon Daily Herald"},"guyraargus.com.au":{issn:"1321-5396",name:"Guyra Argus"},"gvnews.com":{name:"News & Sun"},"gwcommonwealth.com":{name:"Greenwood Commonwealth"},"gwinnettcitizen.com":{name:"Gwinnett Citizen"},"gwinnettdailypost.com":{issn:"1086-0096",name:"Gwinnett Daily Post"},"gyphillpremiere.com":{name:"Gyp Hill Premiere"},"haddonfieldsun.com":{name:"Haddonfield Sun"},"hallandsposten.se":{issn:"1103-9361",name:"Hallandsposten"},"hamburgreporter.com":{name:"Hamburg Reporter"},"hamiltoncountyexpress.com":{name:"Hamilton County Express"},"hammondstar.com":{name:"Daily Star"},"hammontongazette.com":{name:"Hammonton Gazette"},"hampshirereview.com":{name:"Hampshire Review"},"hamptonchronicle.com":{name:"Hampton Chronicle"},"hamptonroadsmessenger.com":{name:"Hampton Roads Messenger"},"hancockclarion.com":{name:"Hancock Clarion"},"handelsblatt.com":{issn:"0017-7296",name:"Handelsblatt"},"hanfordsentinel.com":{name:"Sentinel"},"hannibal.net":{name:"Hannibal Courier-Post"},"happyherald.com":{name:"Happy Herald"},"harborcountry-news.com":{name:"Harbor Country News"},"harborlightnews.com":{name:"Harbor Light News"},"harlandaily.com":{name:"Harlan Daily Enterprise"},"harlanonline.com":{name:"Harlan Tribune"},"harrisondaily.com":{name:"Harrison Daily Times"},"harrisonnewsherald.com":{name:"Harrison News Herald"},"harrodsburgherald.com":{name:"Harrodsburg Herald"},"hartfordcitynewstimes.com":{name:"Hartford City News-Times"},"hartington.net":{name:"Cedar County News"},"hartselleenquirer.com":{name:"Hartselle Enquirer"},"hastingsbanner.com":{name:"Hastings Banner"},"hastingsreminder.com":{name:"Hastings Reminder"},"hastingsstargazette.com":{name:"Star Gazette"},"hastingstribune.com":{name:"Hastings Tribune"},"hattiesburgamerican.com":{name:"Hattiesburg American"},"havasunews.com":{name:"Today's News-Herald"},"havenews.com":{name:"Havelock News"},"havredailynews.com":{name:"Havre Daily News"},"hawaiireporter.com":{name:"Hawaii Reporter"},"hawaiitribune-herald.com":{name:"Hawaii Tribune-Herald"},"hawleyherald.net":{name:"Herald"},"haysfreepress.com":{name:"Hays County Free Press"},"hazard-herald.com":{name:"Hazard Herald"},"hbnews.us":{name:"Huntington Beach News"},"hccourier.com":{name:"Houston County Courier"},"hcindependent.com":{name:"Harvey County Independent"},"hclocal.com":{name:"Henry County Local"},"hcn.org":{name:"High Country News"},"hcnews.com":{name:"Hood County News"},"hcpress.com":{name:"High Country Press"},"hdnews.net":{name:"Hays Daily News"},"headlightherald.com":{name:"Headlight Herald"},"headlightnews.com":{name:"Petit Jean Country Headlight"},"healthcitysun.com":{name:"Health City Sun"},"hebdo.ahram.org.eg":{issn:"1110-5062",name:"Al Ahram Hebdo",oclc:"32526243"},"heightsobserver.org":{name:"Heights Observer"},"helena-arkansas.com":{name:"Daily World"},"helenair.com":{name:"Independent Record"},"hendersondailynews.com":{name:"Henderson Daily News"},"hendersondispatch.com":{issn:"2577-347X",name:"The Daily Dispatch",oclc:"37631964"},"henriettapost.com":{name:"Henrietta Post"},"henryherald.com":{name:"Henry Daily Herald"},"herald-citizen.com":{name:"Herald-Citizen"},"herald-dispatch.com":{name:"Herald-Dispatch"},"herald-leader.net":{name:"Herald-Leader"},"herald-progress.com":{name:"Herald-Progress"},"herald-publishing.com":{name:"Grand Prairie Herald"},"herald-review.com":{name:"Herald & Review"},"herald-zeitung.com":{name:"Herald-Zeitung"},"heraldadvocate.com":{name:"Marlboro Herald-Advocate"},"heraldandnews.com":{name:"Herald and News"},"heraldandtribune.com":{name:"Herald & Tribune"},"heraldargus.com":{name:"Herald-Argus"},"heraldbanner.com":{name:"Greenville Herald Banner"},"heraldbulletin.com":{name:"Anderson Herald Bulletin"},"heraldchronicle.com":{name:"Herald-Chronicle"},"heralddemocrat.com":{name:"Herald Democrat"},"heraldextra.com":{name:"Daily Herald"},"heraldguide.com":{name:"Herald-Guide"},"heraldledger.com":{name:"Herald Ledger"},"heraldmailmedia.com":{name:"Herald-Mail"},"heraldnet.com":{name:"Herald"},"heraldnews.com":{issn:"1074-052X",name:"The Herald News"},"heraldnewstn.com":{name:"Herald News"},"heraldonline.com":{name:"Herald"},"heraldpalladium.com":{name:"Herald-Palladium"},"heraldpub.com":{name:"Herald"},"heraldpubs.com":{name:"Mascoutah Herald"},"heraldscotland.com":{issn:"0965-9439",name:"The Herald",oclc:"29991088"},"heraldstandard.com":{name:"Herald-Standard"},"heraldstaronline.com":{name:"Herald-Star"},"heraldsun.com":{name:"Herald-Sun"},"heraldtimesonline.com":{name:"Herald-Times"},"heraldtribune.com":{name:"Sarasota Herald Tribune"},"hermannadvertisercourier.com":{name:"Hermann Advertiser Courier"},"hermistonherald.com":{name:"Hermiston Herald"},"herndonconnection.com":{name:"Herndon Connection"},"herscherpilot.com":{name:"Herscher Pilot"},"hesperianbeacononline.com":{name:"Hesperian-Beacon"},"hesperiastar.com":{name:"Hesperia Star"},"hesstonrecord.com":{name:"Hesston Record"},"heuteonline.ch":{name:"Heute",oclc:"637961425"},"hfherald.com":{name:"Haxtun-Fleming Herald"},"hgazette.com":{name:"Haverhill Gazette"},"hhcourier.com":{name:"Huber Heights Courier"},"hiawathaworldonline.com":{name:"Hiawatha World"},"hibbingmn.com":{name:"Daily Tribune"},"hickoryrecord.com":{name:"Hickory Daily Record"},"hicksvillenewstribune.com":{name:"News-Tribune"},"hidesertstar.com":{name:"Hi-Desert Star"},"highlandernews.com":{name:"Highlander"},"highlandnews.net":{name:"Highland Community News"},"highlandscurrent.com":{name:"Highlands Current"},"highlandsnews.com":{name:"Highlander"},"highlandsranchherald.net":{name:"Highlands Ranch Herald"},"highlinetimes.com":{name:"The Highline Times",oclc:"17212591"},"highplainsobserver.com":{name:"High Plains Observer"},"hightimbertimes.com":{name:"High Timber Times"},"hillcountryherald.net":{name:"Hill Country Herald"},"hillcountrynews.com":{name:"Hill Country News"},"hillsborofreepress.com":{name:"Hillsboro Free Press"},"hillsdale.net":{name:"Daily News"},"hinckleynews.com":{name:"Hinckley News"},"hindustantimes.com":{issn:"0972-0243",name:"Hindustan Times",oclc:"231696742"},"hir.harvard.edu":{issn:"0739-1854",name:"Harvard International Review"},"hispanosnews.com":{name:"Hispanos Unidos"},"hl.nwaonline.com":{name:"Herald Leader"},"hmbreview.com":{name:"Half Moon Bay Review"},"hobbsnews.com":{name:"Hobbs News-Sun"},"hockessincommunitynews.com":{name:"Community News"},"hola-arkansas.com":{name:"Hola! Arkansas"},"hollandsentinel.com":{name:"Holland Sentinel"},"hollywoodreporter.com":{name:"Hollywood Reporter"},"holmescountyherald.com":{name:"Holmes County Herald"},"holtindependent.com":{name:"Holt County Independent"},"holtonrecorder.net":{name:"Holton Recorder"},"holtvilletribune.com":{name:"Holtville Tribune"},"holyokeenterprise.com":{name:"Holyoke Enterprise"},"homerhorizon.com":{name:"Homer Horizon"},"homerindex.com":{name:"Homer Index"},"homernews.com":{name:"Homer News"},"homertribune.com":{name:"Homer Tribune"},"hometowndebate.com":{name:"Willapa Harbor Herald"},"hometownfocus.us":{name:"Hometown Focus"},"hondoanvilherald.com":{name:"Hondo Anvil Herald"},"honoluluadvertiser.com":{issn:"1072-7191",name:"The Honolulu Advertiser",oclc:"8807414"},"hoodrivernews.com":{name:"Hood River News"},"hopestar.com":{name:"Hope Star"},"hopewellnews.com":{name:"Hopewell News"},"hotsr.com":{name:"Sentinel-Record"},"houghtonlakeresorter.com":{name:"Houghton Lake Resorter"},"houmatoday.com":{name:"Houma Today"},"houstonchronicle.com":{issn:"1074-7109",name:"Houston Chronicle"},"houstonherald.com":{name:"Houston Herald"},"houstonianonline.com":{name:"The Houstonian",oclc:"15021861"},"houstonpress.com":{name:"Houston Press"},"howeenterprise.com":{name:"Howe Enterprise"},"hoylosangeles.com":{name:"Hoy Los Angeles"},"hpenews.com":{name:"High Point Enterprise"},"hpherald.com":{name:"Hyde Park Herald"},"hplandmark.com":{name:"Highland Park Landmark"},"hsvvoice.com":{name:"Village Voice"},"htrnews.com":{name:"Herald Times Reporter"},"hudsonpg.net":{name:"Hudson Post-Gazette"},"hudsonstarobserver.com":{name:"Hudson Star Observer"},"huffingtonpost.com":{name:"Huffington Post"},"hugonews.com":{name:"Hugo Daily News"},"hugotonhermes.com":{name:"Hugoton Hermes"},"hulldailymail.co.uk":{issn:"1741-3419",name:"Hull Daily Mail"},"hulltimes.com":{name:"Hull Times"},"humboldtbeacon.com":{name:"Humboldt Beacon"},"humboldtnews.com":{name:"Humboldt Independent"},"hungryhorsenews.com":{name:"Hungry Horse News"},"huntingtoncountytab.com":{name:"Huntington County TAB"},"huntingtonnews.net":{name:"HuntingtonNews.Net"},"hurherald.com":{name:"Hur Herald"},"huroncountyview.mihomepaper.com":{name:"Huron County View"},"hutchnews.com":{name:"Hutchinson News"},"iberianet.com":{name:"Daily Iberian"},"idacountycourier.com":{name:"Ida County Courier"},"idahobusinessreview.com":{name:"Idaho Business Review"},"idahocountyfreepress.com":{name:"Idaho County Free Press"},"idahopress.com":{name:"Idaho Press-Tribune"},"idahoseniornews.com":{name:"Idaho Senior News"},"idahostatesman.com":{name:"Idaho Statesman"},"idahoworld.com":{name:"Idaho World"},"identidadlatina.com":{name:"Identidad Latina"},"idyllwildtowncrier.com":{name:"Idyllwild Town Crier"},"ijn.com":{issn:"0047-0511",name:"Intermountain Jewish News"},"ilgiorno.it":{issn:"1124-2116",name:"Il Giorno",oclc:"759765507"},"illinoistimes.com":{name:"Illinois Times"},"ilmanifesto.it":{issn:"0025-2158",name:"il manifesto"},"ilriformista.it":{issn:"1723-8080",name:"Il Riformista",oclc:"464785916"},"iltempo.it":{issn:"0391-6995",name:"Il Tempo"},"impactolatino.com":{name:"Impacto Latin News"},"impactousa.com":{name:"Impacto USA"},"imperialbeachnewsca.com":{name:"Eagle and Times"},"imperialrepublican.com":{name:"Imperial Republican"},"inddist.com":{issn:"0019-8153",name:"Industrial Distribution"},"indeonline.com":{name:"Independent"},"independent.co.uk":{issn:"0951-9467",name:"The Independent",oclc:"185201487"},"independent.com":{name:"Independent"},"independent.ie":{issn:"0021-1222",name:"Irish Independent"},"independentappeal.com":{name:"Independent Appeal"},"independentmail.com":{name:"Anderson Independent-Mail"},"independentnews.com":{name:"Independent"},"independentri.com":{name:"South County Independent"},"independenttribune.com":{name:"Independent Tribune"},"independentvoice.com":{name:"Independent Voice"},"indexnewspaper.com":{name:"Mitchell Index"},"indiabulletinusa.com":{name:"India Bulletin"},"indianagazette.com":{name:"Indiana Gazette"},"indianapolisrecorder.com":{name:"Indianapolis Recorder"},"indiancountrynews.com":{issn:"1548-4939",name:"News From Indian Country",oclc:"29807522"},"indiancountrytoday.com":{issn:"1066-5501",name:"Indian Country Today"},"indianexpress.com":{name:"The Indian Express",oclc:"70274541"},"indreg.com":{name:"Independent Register"},"industrialworker.org":{issn:"0019-8870",name:"Industrial Worker"},"industryweek.com":{issn:"0039-0895",name:"IndustryWeek Magazine"},"indyeastend.com":{name:"East Hampton Independent"},"indyrepnews.com":{name:"Independent Reporter"},"indystar.com":{issn:"1930-2533",name:"The Indianapolis Star"},"indyweek.com":{issn:"0737-8254",name:"Indy Week"},"inforum.com":{name:"INForum"},"ingrams.com":{name:"Ingrams"},"inhnews.com":{name:"Independent News Herald"},"inquirer.com":{issn:"0885-6613",name:"The Philadelphia Inquirer"},"inquirer.net":{issn:"0116-0443",name:"Philippine Daily Inquirer"},"insidehighered.com":{name:"Inside Higher Ed",oclc:"721351944"},"insidenova.com":{name:"InsideNoVa"},"insidetucsonbusiness.com":{name:"Inside Tucson Business"},"insightnews.com":{name:"Insight News"},"intertownrecord.com":{name:"Intertown Record"},"investors.com":{name:"Investor's Business Daily"},"inweekly.net":{name:"Independent News"},"inyoregister.com":{name:"Inyo Register"},"iolaregister.com":{name:"Iola Register"},"iosconews.com":{name:"Iosco County News-Herald"},"irannewspaper.ir":{issn:"1027-1449",name:"Iran"},"irish-herald.com":{name:"Irish Herald"},"irishamericannews.com":{name:"Irish American News"},"irishecho.com":{name:"Irish Echo"},"irishpost.co.uk":{issn:"0959-3748",name:"The Irish Post"},"irishtimes.com":{issn:"0791-5144",name:"The Irish Times"},"ironcountyminer.com":{name:"Iron County Miner"},"ironcountyreporter.com":{name:"Iron County Reporter"},"irondequoitpost.com":{name:"Irondequoit Post"},"ironmountaindailynews.com":{name:"Daily News"},"irontontribune.com":{name:"Ironton Tribune"},"isanti-chisagocountystar.com":{name:"Isanti-Chisago County Star"},"isanticountynews.com":{name:"Isanti County News"},"island-reporter.com":{name:"Island Reporter"},"islandadvantages.com":{name:"Island Ad-Vantages"},"islander.org":{name:"Islander"},"islandgazette.net":{name:"Island Gazette"},"islandpacket.com":{name:"Island Packet"},"islandssounder.com":{name:"Islands' Sounder"},"islipbulletin.net":{name:"Islip Bulletin"},"israelhayom.com":{name:"Israel Hayom",oclc:"234764640"},"issaquahpress.com":{name:"Issaquah Press"},"isthmus.com":{name:"Isthmus"},"italy.neotrib.com":{name:"Italy Neotribune"},"itemlive.com":{name:"Daily Evening Item"},"itemonline.com":{name:"Huntsville Item"},"ithaca.com":{issn:"0277-1187",name:"Ithaca Times",oclc:"503229354"},"itnonline.com":{issn:"0361-4174",name:"Imaging Technology News"},"ivpressonline.com":{name:"Imperial Valley Press"},"jacksboronewspapers.com":{name:"Jack County Herald"},"jacksonadvocateonline.com":{name:"Jackson Advocate"},"jacksoncountypilot.com":{name:"Jackson County Pilot"},"jacksoncountytimes.net":{name:"Jackson County Times"},"jacksonfreepress.com":{name:"Jackson Free Press"},"jacksonheraldtoday.com":{name:"The Jackson Herald",oclc:"19638930"},"jacksonnewspapers.com":{name:"Jackson Herald"},"jacksonprogress-argus.com":{name:"Jackson Progress-Argus"},"jacksonsun.com":{name:"Jackson Sun"},"jacksontimesvoice.com":{name:"Jackson Times-Voice"},"jacksonville.com":{name:"Florida Times-Union"},"jacksonvillefreepress.com":{issn:"1081-3349",name:"Jacksonville Free Press",oclc:"19095970"},"jacksonvilleprogress.com":{name:"Jacksonville Daily Progress"},"jagran.com":{name:"Dainik Jagran",oclc:"416871022"},"jalrecordonline.com":{name:"Jal Record"},"jamaicaplaingazette.com":{name:"Jamaica Plain Gazette"},"jamestownnews.com":{name:"Jamestown News"},"jamestownpress.com":{name:"Jamestown Press"},"jamestownsun.com":{name:"Jamestown Sun"},"janmabhumidaily.com":{name:"Janmabhumi",oclc:"11387591"},"jasonvilleindependent.com":{name:"Jasonville Independent"},"jaxdailyrecord.com":{name:"Jacksonville Daily Record"},"jcadvocate.com":{name:"Jackson County Advocate"},"jcfloridan.com":{name:"Jackson County Floridan"},"jcnews.com":{name:"Jones County News"},"jdledger.com":{name:"Jeff Davis County Ledger"},"jdnews.com":{name:"Jacksonville Daily News"},"jeffersonpost.com":{name:"Jefferson Post"},"jeffersonstarnews.com":{name:"Jefferson Star"},"jenningsdailynews.net":{name:"Jennings Daily News"},"jesupcitizenherald.com":{name:"Jesup Citizen Herald Online"},"jewishaz.com":{name:"Jewish News of Phoenix"},"jewishobserver-la.com":{name:"Jewish Observer"},"jewishpress.com":{issn:"0021-6674",name:"The Jewish Press"},"jewishpressoftampa.our-hometown.com":{name:"Jewish Press of Tampa"},"jewishpresspinellas.com":{name:"Jewish Press Group"},"jewishstandard.timesofisrael.com":{issn:"0021-6747",name:"Jewish Standard"},"jewishtimes.com":{issn:"0005-450X",name:"The Baltimore Jewish Times"},"jewishvoicesnj.org":{name:"Jewish Community Voice"},"jhnewsandguide.com":{name:"Jackson Hole News & Guide"},"johnsoncitypress.com":{name:"Johnson City Press"},"jonesborosun.com":{name:"Jonesboro Sun"},"joplinglobe.com":{name:"Joplin Globe"},"joplinindependent.com":{name:"Joplin Independent"},"jordantimes.com":{name:"The Jordan Times",oclc:"20791953"},"jpinews.com":{name:"Barren County Progress"},"jpost.com":{issn:"0021-597X",name:"The Jerusalem Post"},"julesburgadvocate.com":{name:"Julesburg Advocate"},"juliannews.com":{name:"Julian News"},"junctioneagle.com":{name:"Junction Eagle"},"juneauempire.com":{name:"Juneau Empire",oclc:"9611310"},"jungewelt.de":{issn:"0941-9373",name:"junge Welt"},"kaleva.fi":{issn:"0356-1356",name:"Kaleva"},"kalminer.com.au":{issn:"1322-6681",name:"Kalgoorlie Miner"},"kalonanews.com":{name:"Kalona News"},"kanerepublican.com":{name:"Kane Republican"},"kansanuutiset.fi":{issn:"0357-1521",name:"Kansan Uutiset"},"kansas.com":{issn:"1046-3127",name:"The Wichita Eagle",oclc:"20386511"},"kansascity.com":{issn:"0745-1067",name:"Kansas City Star",oclc:"3555868"},"kaplantoday.com":{name:"Kaplan Herald"},"katytimes.com":{name:"Katy Times"},"kaufmanherald.com":{name:"Kaufman Herald"},"kauno.diena.lt":{issn:"1392-7639",name:"Kauno diena"},"kayhannews.ir":{name:"Kayhan",oclc:"473890618"},"kccall.com":{name:"Kansas City Call"},"kcchronicle.com":{name:"Kane County Chronicle"},"kchispanicnews.com":{name:"Hispanic News"},"kckansan.com":{name:"Kansas City Kansan"},"kcnonline.com":{name:"Kingman Leader-Courier"},"kdhnews.com":{name:"Killeen Daily Herald"},"kdminer.com":{name:"Kingman Daily Miner"},"kearneycourier.com":{name:"Kearney Courier"},"kearneyhub.com":{name:"Kearney Daily Hub"},"kearnstimes.com":{name:"Kearns Times"},"keighleynews.co.uk":{issn:"0961-1924",name:"Keighley News"},"keizertimes.com":{name:"Keizertimes"},"kempercountymessenger.com":{name:"Kemper County Messenger"},"kendallcountynow.com":{name:"Kendall County Record"},"kenmarend.com":{name:"Kenmare News"},"kenoshanews.com":{name:"Kenosha News"},"kentonbee.com":{name:"Ken-Ton Bee"},"kentontimes.com":{name:"Kenton Times",oclc:"10112155"},"kentucky.com":{name:"Lexington Herald-Leader"},"kentuckynewera.com":{name:"Kentucky New Era"},"keotaeagle.com":{name:"Keota Eagle"},"kernrivercourier.com":{name:"Kern River Courier"},"kernvalleysun.com":{name:"Kern Valley Sun"},"ketchikandailynews.com":{name:"Ketchikan Daily News"},"keypennews.com":{name:"Key Peninsula News"},"keysnews.com":{name:"Key West Citizen",oclc:"2701762"},"khaleejtimes.com":{name:"Khaleej Times",oclc:"60637427"},"kilgorenewsherald.com":{name:"Kilgore News Herald"},"kingcityrustler.com":{name:"King City Rustler"},"kingfisherpress.net":{name:"Kingfisher Times"},"kingstreenews.com":{name:"News"},"kingsvillerecord.com":{name:"Kingsville Record & Bishop News"},"kinston.com":{name:"Free Press"},"kiowacountypress.net":{name:"Kiowa County Press"},"kiowacountysignal.com":{name:"Kiowa County Signal"},"kiowanews.com":{name:"Kiowa News"},"kirksvilledailyexpress.com":{name:"Daily Express"},"kitsapsun.com":{name:"Sun"},"kittsonarea.com":{name:"Kittson County Enterprise"},"knox.villagesoup.com":{name:"The Courier-Gazette"},"knoxfocus.com":{name:"Knoxville Focus"},"knoxnews.com":{name:"Knoxville News Sentinel",oclc:"12008657"},"knoxvilledailysun.com":{name:"Knoxville Daily Sun"},"kodiakdailymirror.com":{name:"Kodiak Daily Mirror"},"kokomoherald.com":{name:"Kokomo Herald"},"kokomoperspective.com":{name:"Kokomo Perspective"},"kokomotribune.com":{name:"Kokomo Tribune"},"kompas.com":{name:"Kompas",oclc:"12594358"},"kompas.id":{name:"Kompas",oclc:"12594358"},"koorimail.com":{issn:"1038-8516",name:"Koori Mail"},"koreatimes.com":{name:"Korea Times"},"kp.ru":{issn:"0233-433X",name:"Komsomolskaya Pravda"},"kpcnews.com":{issn:"8750-0876",name:"The News Sun"},"kstatecollegian.com":{name:"Kansas State Collegian",oclc:"9453357"},"ksusentinel.com":{name:"The Sentinel",oclc:"766020808"},"kunamelbanews.com":{name:"Kuna Melba News"},"kykernel.com":{name:"The Kentucky Kernel",oclc:"13363397"},"kystandard.com":{name:"Kentucky Standard"},"kzhb.us":{name:"Colorado Chinese News"},"labougiedusapeur.com":{issn:"0761-6147",name:"La Bougie du Sapeur",oclc:"474123818"},"lacampana.us":{name:"La Campana"},"lacrossetribune.com":{name:"La Crosse Tribune"},"laderatimes.com":{name:"Ladera Times"},"ladowntownnews.com":{name:"LA Downtown News"},"ladysmithnews.com":{name:"Ladysmith News"},"lafayettecountypress.com":{name:"Lafayette County Press"},"lafollettepress.com":{name:"LaFollette Press"},"lagacetanewspaper.com":{issn:"0016-3724",name:"La Gaceta"},"lagniappemobile.com":{name:"Lagniappe"},"lagrandeobserver.com":{name:"La Grande Observer"},"lagrangenews.com":{name:"LaGrange Daily News"},"lagrangepublishing.com":{name:"LaGrange Standard"},"lagunabeachindy.com":{name:"Independent"},"lahainanews.com":{name:"Lahaina News"},"lajollalight.com":{name:"La Jolla Light"},"lajuntatribunedemocrat.com":{name:"Tribune-Democrat"},"lakeandpine.com":{name:"Cass Lake Times"},"lakechelanmirror.com":{name:"Lake Chelan Mirror"},"lakecityreporter.com":{name:"Lake City Reporter"},"lakeconews.com":{name:"Lake County News"},"lakecountrysun.com":{name:"Lake Country Sun"},"lakecountyexam.com":{name:"Lake County Examiner"},"lakegazette.net":{name:"Lake Gazette"},"lakegenevanews.net":{name:"Lake Geneva News"},"lakelandtimes.com":{name:"Lakeland Times"},"lakenewsonline.com":{name:"Lake News Online"},"lakeoconeebreeze.net":{name:"Lake Oconee Breeze"},"lakeorionreview.com":{name:"Lake Orion Review"},"lakeplacidnews.com":{name:"Lake Placid News"},"lakepowellchronicle.com":{name:"Lake Powell Chronicle"},"lakerpioneer.com":{name:"Laker & Pioneer"},"lakeviewareanewspaper.com":{name:"Lakeview Area News"},"lakewoodobserver.com":{name:"Lakewood Observer"},"lakewoodsentinel.com":{name:"Lakewood Sentinel"},"lakinindependent.com":{name:"Lakin Independent"},"lakotacountrytimes.com":{name:"Lakota Country Times"},"lamardemocrat.com":{name:"Lamar Democrat"},"lamarleader.com":{name:"Lamar Leader"},"lamarledger.com":{name:"Lamar Ledger"},"lamesacourier.com":{name:"La Mesa Courier"},"lamonitor.com":{name:"Los Alamos Monitor"},"lamorindaweekly.com":{name:"Lamorinda Weekly"},"lampasasdispatchrecord.com":{name:"Dispatch Record"},"lancashiretelegraph.co.uk":{issn:"1746-0522",name:"Lancashire Telegraph"},"lancasterbee.com":{name:"Lancaster Depew Bee"},"lancastereaglegazette.com":{name:"Eagle Gazette"},"lancasteronline.com":{name:"Lancaster Online"},"lanoticia.com":{name:"La Noticia"},"lansesentinel.com":{name:"L'Anse Sentinel"},"laoferta.com":{name:"La Oferta"},"laopinion.com":{name:"La Opinion"},"lapeerareaview.mihomepaper.com":{name:"Lapeer Area View"},"laprensa-sandiego.org":{name:"La Prensa"},"laprensadecolorado.com":{name:"La Prensa de Colorado"},"laprensadelosangeles.com":{name:"La Prensa de Los Angeles"},"laprensademn.com":{name:"La Prensa de Minnesota"},"laprensanwa.com":{name:"La Prensa Libre"},"laprensasa.com":{name:"La Prensa Newspaper"},"laprensatexas.com":{name:"La Prensa Texas",oclc:"32148445"},"lapresse.ca":{issn:"0317-9249",name:"La Presse",oclc:"299333147"},"laramieboomerang.com":{name:"Laramie Boomerang"},"laraza.com":{name:"La Raza"},"larchmontchronicle.com":{name:"Larchmont Chronicle"},"laruecountyherald.com":{name:"LaRue County Herald"},"lasamericasnews.com":{name:"Las Americas News"},"lascrucesbulletin.com":{name:"Las Cruces Bulletin"},"lasentinel.net":{name:"Los Angeles Sentinel"},"lassennews.com":{name:"Lassen County Times"},"lastampa.it":{issn:"1122-1763",name:"La Stampa"},"lasvegas.informermg.com":{name:"Las Vegas Informer"},"lasvegasoptic.com":{name:"Las Vegas Optic"},"lasvegassun.com":{name:"Las Vegas Sun"},"lasvegastribune.net":{name:"Las Vegas Tribune"},"lasvegasweekly.com":{name:"Las Vegas Weekly"},"latercera.com":{name:"La Tercera"},"latimes.com":{issn:"0458-3035",issn_alt:"2165-1736",name:"Los Angeles Times",oclc:"3638237"},"latinodetroit.com":{name:"Latino Press"},"latribune.fr":{issn_alt:"1760-4869",name:"La Tribune"},"laughlinentertainer.com":{name:"Laughlin Entertainer"},"laurelmountainpost.com":{name:"Laurel Mountain Post"},"laureloutlook.com":{name:"Laurel Outlook"},"laurelstar.com":{name:"Laurel Star"},"laurinburgexchange.com":{name:"Laurinburg Exchange"},"lavozarizona.com":{name:"La Voz"},"lavozcolorado.com":{name:"La Voz"},"lavozdebrazoriacounty.com":{name:"La Voz de Brazoria County"},"lavozhispanact.com":{name:"La Voz Hispana de CT"},"lavozlatinaonline.net":{name:"La Voz Latina"},"lawattstimes.com":{name:"LA Watts Times"},"lawdailyrecord.com":{name:"Daily Record"},"laweekly.com":{issn:"0192-1940",name:"LA Weekly"},"lawndalenews.com":{name:"Lawndale News"},"lawrencecountypress.com":{name:"Lawrence County Press"},"lazocultural.com":{name:"Lazo Cultural"},"lbpost.com":{name:"Long Beach Post"},"lccentral.com":{name:"Lincoln County Record"},"lcnewschronicle.com":{name:"Lake County News-Chronicle"},"lcnme.com":{name:"Lincoln County News"},"lcsun-news.com":{name:"Las Cruces Sun-News"},"ldnews.com":{name:"Daily News"},"leader-call.com":{name:"Leader-Call"},"leader-news.com":{name:"Leader-News"},"leaderadvertiser.com":{name:"Lake County Leader"},"leaderandtimes.com":{name:"High Plains Daily Leader"},"leaderherald.com":{name:"Leader-Herald"},"leaderlandnews.com":{name:"St. Joseph Leader"},"leaderregister.com":{name:"Inter-County Leader"},"leadertelegram.com":{name:"Leader Telegram"},"leadertimes.com":{name:"Leader Times"},"leaderunion.com":{name:"Vandalia Leader-Union"},"leadvilleherald.com":{name:"Leadville Herald Democrat"},"leavenworthecho.com":{name:"Leavenworth Echo",oclc:"16996294"},"leavenworthtimes.com":{name:"Leavenworth Times"},"lebanon-express.com":{name:"Lebanon Express"},"lebanondailyrecord.com":{name:"Lebanon Daily Record"},"lebanondemocrat.com":{name:"Lebanon Democrat"},"lebanonenterprise.com":{name:"Lebanon Enterprise"},"lecourrier.ch":{issn:"1424-1404",name:"Le Courrier",oclc:"714986559"},"ledevoir.com":{issn:"0319-0722",name:"Le Devoir"},"ledger-dispatch.com":{name:"Amador Ledger Dispatch"},"ledger-enquirer.com":{name:"Columbus Ledger-Enquirer"},"ledgertranscript.com":{name:"Monadnock Ledger"},"leecountyledger.com":{name:"Lee County Ledger"},"leelanaunews.com":{name:"Leelanau Enterprise"},"leesvilledailyleader.com":{name:"Daily Leader"},"lefigaro.fr":{issn:"0182-5852",name:"Le Figaro"},"legalnews.com":{name:"Jackson County Legal News"},"lehighacrescitizen.com":{name:"Lehigh Acres Citizen"},"lehighacresgazette.us":{name:"Lehigh Acres Gazette"},"lehighvalleylive.com":{name:"Lehigh Valley Live"},"lemarssentinel.com":{name:"Daily Sentinel"},"lematin.ch":{name:"Le Matin",oclc:"605885500"},"lemonde.fr":{issn:"1950-6244",name:"Le Monde"},"lenconnect.com":{name:"Daily Telegram"},"lennoxnews.com":{name:"Lennox Independent"},"leominsterchamp.com":{name:"Leominster Champion"},"leoweekly.com":{name:"Eccentric Observer"},"leparisien.fr":{issn:"1161-5435",name:"Le Parisien"},"leroyny.com":{name:"LeRoy Pennysaver"},"lesechos.fr":{issn:"0153-4831",name:"Les Echos"},"lesoleildelafloride.com":{name:"Le Soleil de la Floride"},"letemps.ch":{issn:"1423-3967",name:"Le Temps",oclc:"38739976"},"lewisboroledger.com":{name:"Lewisboro Ledger"},"lewiscountyherald.com":{name:"Lewis County Herald"},"lewistownnews.com":{name:"Lewistown News-Argus"},"lewistownsentinel.com":{name:"Sentinel"},"lexch.com":{name:"Lexington Clipper-Herald"},"lexingtonchronicle.com":{name:"Lexington County Chronicle"},"lexingtonleader.com":{name:"Lexington Leader"},"lfadvertiser.com":{name:"Livermore Falls Advertiser"},"lhvc.com":{name:"Left Hand Valley Courier"},"libertycountytimes.net":{name:"Liberty County Times"},"libertylakesplash.com":{name:"Liberty Lake Splash"},"libertytribune.com":{name:"Liberty Tribune"},"libn.com":{issn:"0894-4806",name:"Long Island Business News"},"liherald.com":{name:"Herald Community Newspapers"},"likethedew.com":{name:"LikeTheDew"},"limaohio.com":{name:"Lima News"},"limerickleader.ie":{issn:"1649-8992",name:"Limerick Leader"},"lincnews.com":{name:"Lincoln News"},"lincolncourier.com":{name:"Lincoln Courier"},"lincolndailynews.com":{name:"Lincoln Daily News"},"lincolnherald.net":{name:"Lincoln Herald"},"lincolnnewsmessenger.com":{name:"Lincoln News Messenger"},"lincolnsentinel.com":{name:"Lincoln Sentinel-Republican"},"lincolntimesnews.com":{name:"Lincoln Times-News"},"lindalenews-times.com":{name:"Lindale News & Times"},"lindenherald.com":{name:"Linden Herald"},"lingleguide.com":{name:"Lingle Guide"},"linncountyleader.com":{name:"Linn County Leader"},"linncountynews.net":{name:"Linn County News"},"littletonindependent.net":{name:"Littleton Independent"},"livestockweekly.com":{name:"Livestock Weekly"},"livingstondaily.com":{name:"Daily Press & Argus"},"livingstonenterprise.com":{name:"Livingston Enterprise"},"livingstonparishnews.com":{name:"Livingston Parish News"},"lmgraphic.com":{name:"Lake Mills Graphic"},"lmtonline.com":{name:"Laredo Morning Times"},"lmtribune.com":{name:"Lewiston Tribune"},"lobservateur.com":{name:"L'Observateur"},"localrag.com":{name:"Red Lodge Local Rag"},"lockhaven.com":{name:"Express"},"lockportlegend.com":{name:"Lockport Legend"},"lodinews.com":{name:"Lodi News-Sentinel"},"loganbanner.com":{name:"Logan Banner"},"logandaily.com":{name:"Logan Daily News"},"loganwoodbine.com":{name:"Herald-Observer"},"lombardian.info":{name:"Lombardian"},"lompocrecord.com":{name:"Lompoc Record"},"londonderrytimes.net":{name:"Londonderry Times"},"lonesomevalleynewspaper.com":{name:"Lonesome Valley Newspaper"},"lonetreevoice.net":{name:"Lone Tree Voice"},"longislandadvance.net":{name:"Long Island Advance"},"longislandernews.com":{name:"Long-Islander"},"longislandpress.com":{name:"Long Island Press"},"loogooteetribune.com":{name:"Tribune"},"losaltosonline.com":{name:"Los Altos Town Crier"},"losbanosenterprise.com":{name:"Los Banos Enterprise"},"loscerritosnews.net":{name:"Los Cerritos Community News"},"lostcreekguide.com":{name:"Lost Creek Guide"},"lovellchronicle.com":{name:"Lovell Chronicle"},"lovelycitizen.com":{name:"Lovely County Citizen"},"lovingtonleaderonline.com":{name:"Lovington Leader"},"lowcountrytoday.com":{name:"Low Country Today"},"lowellbuyersguide.com":{name:"Lowell Ledger"},"lowellsun.com":{name:"Sun"},"lowndessignal.com":{name:"Lowndes Signal"},"lpleader.com":{name:"Long Prairie Leader"},"lstribune.net":{name:"Lee's Summit Tribune"},"lucernevalleyleader.com":{name:"Lucerne Valley Leader"},"lufkindailynews.com":{name:"Lufkin Daily News"},"luminanews.com":{name:"Lumina News"},"luskherald.com":{name:"Lusk Herald"},"lyndentribune.com":{name:"Lynden Tribune"},"lyoncountyreporter.com":{name:"Lyon County Reporter"},"lyonsrecorder.com":{name:"Lyons Recorder"},"m.economictimes.com":{issn:"0013-0389",name:"The Economic Times",oclc:"61311680"},"machiasnews.com":{name:"Machias Valley News Observer"},"mackinacislandnews.com":{name:"Town Crier"},"macombdaily.com":{name:"Macomb Daily"},"macon.com":{name:"Macon Telegraph"},"maconcountytimes.com":{name:"Macon County Times"},"maconhomepress.com":{name:"Home Press"},"maderatribune.com":{name:"Madera Tribune"},"madison-press.com":{name:"Madison Press"},"madisoncountyrecord.com":{name:"Madison Record"},"madisoncourier.com":{name:"Madison Courier"},"madisoniannews.com":{name:"Ennis Madisonian"},"madisonparktimes.com":{name:"Madison Park Times"},"madriverunion.com":{name:"Mad River Union"},"magic-city-news.com":{name:"Magic City Morning Star"},"magicvalley.com":{name:"Times-News"},"magicvalleypublishing.com":{name:"Carroll County News-Leader"},"magnatimes.com":{name:"Magna Times"},"magnoliabannernews.com":{name:"Banner-News"},"magnoliagazette.com":{name:"Magnolia Gazette"},"magnoliareporter.com":{name:"Magnolia Reporter"},"mahnomenpioneer.com":{name:"Pioneer"},"mahometdaily.com":{name:"Mahomet Daily"},"mailonsunday.co.uk":{issn:"0263-8878",name:"The Mail on Sunday"},"mailtribune.com":{name:"Mail Tribune"},"mainebiz.biz":{name:"Mainebiz"},"maineinsights.com":{name:"Maine Insights"},"mainlinemedianews.com":{name:"Main Line Media News"},"mainstreetnews.com":{name:"Main Street News"},"maldennews.com":{name:"Malden Evening News"},"malibusurfsidenews.com":{name:"Malibu Surfside News"},"malibutimes.com":{name:"Malibu Times"},"malvern-online.com":{name:"Malvern Daily Record"},"mammothtimes.com":{name:"Mammoth Times"},"manchestereveningnews.co.uk":{issn:"0962-2276",name:"Manchester Evening News",oclc:"500150526"},"manchesterpress.com":{name:"Manchester Press"},"manchestertimes.com":{name:"Manchester Times"},"manhassetpress.com":{name:"Manhasset Press"},"manhattanfreepress.com":{name:"Manhattan Free Press"},"manhattantimesnews.com":{issn:"1941-9015",name:"Manhattan Times"},"mankatofreepress.com":{name:"Free Press"},"mansfieldmirror.com":{name:"Mansfield Mirror-Republican"},"mantecabulletin.com":{name:"Manteca Bulletin"},"maplelakemessenger.com":{name:"Messenger"},"maqnews.com":{name:"Maquoketa Sentinel-Press"},"marca.com":{name:"Marca",oclc:"472455028"},"marcoislandflorida.com":{name:"Marco Island Sun-Times"},"margatenews.net":{name:"Margate News"},"mariettatimes.com":{name:"Marietta Times"},"marinecorpstimes.com":{name:"Marine Corps Times"},"marion-press.com":{name:"Marion Press"},"marionrecord.com":{name:"Marion County Record"},"marionstar.com":{name:"Marion Star"},"mariposagazette.com":{name:"Mariposa Gazette"},"marlindemocrat.com":{name:"Marlin Democrat"},"marquettecountytribune.com":{name:"Marquette County Tribune"},"marshallindependent.com":{name:"The Independent",oclc:"22756175"},"marshallnews.com":{name:"Marshall Democrat-News"},"marshallnewsmessenger.com":{name:"News Messenger"},"marshalltribune.com":{name:"Marshall County Tribune"},"marshfieldmail.com":{name:"Marshfield Mail"},"marshfieldnewsherald.com":{name:"Marshfield News-Herald"},"martinezgazette.com":{name:"Martinez News-Gazette"},"martinsvillebulletin.com":{name:"Martinsville Bulletin"},"martinsvilledaily.com":{name:"Martinsville Daily"},"marysvilleglobe.com":{name:"Marysville Globe"},"marysvilleonline.net":{name:"Marysville Advocate"},"maryvilledailyforum.com":{name:"Maryville Daily Forum"},"masoncountynews.com":{name:"Mason County News"},"massapequaobserver.com":{name:"Massapequan Observer"},"massapequapost.com":{name:"Massapequa Post"},"masslive.com":{issn:"1941-529X",name:"The Republican",oclc:"52000893"},"mauinews.com":{name:"Maui News"},"maysville-online.com":{name:"Ledger-Independent"},"mbtmag.com":{issn:"1554-3404",name:"Manufacturing Business Technology"},"mcalesternews.com":{name:"McAlester News"},"mcall.com":{name:"Morning Call"},"mccallstarnews.com":{name:"Star News"},"mccookgazette.com":{name:"McCook Daily Gazette"},"mcdonoughvoice.com":{name:"McDonough Voice"},"mcdowellnews.com":{name:"McDowell News"},"mcduffieprogress.com":{name:"McDuffie Progress"},"mcgregormirror.com":{name:"McGregor Mirror"},"mchnews.com":{name:"Morgan County Herald"},"mcindependentnews.com":{name:"Mineral County Independent-News"},"mcitizen.com":{name:"Mahomet Citizen"},"mckenzieriverreflectionsnewspaper.com":{name:"River Reflections"},"mckinleyvillepress.com":{name:"McKinleyville Press"},"mcleanconnection.com":{name:"McLean Connection"},"mcleansborotimesleader.com":{name:"Times-Leader"},"mcnairycountynews.com":{name:"McNairy County News"},"mcnewsonline.com":{name:"Meade County News"},"mcphersonsentinel.com":{name:"McPherson Sentinel"},"mcrecord.com":{name:"Morrison County Record"},"mcrecordonline.com":{name:"Madison County Record"},"mdcoastdispatch.com":{name:"Maryland Coast Dispatch"},"mdcp.nwaonline.com":{name:"McDonald County Press"},"mdislander.com":{name:"Mount Desert Islander"},"meadecountymessenger.com":{name:"Meade County Messenger"},"meadvilletribune.com":{name:"Meadville Tribune"},"mebaneenterprise.com":{name:"The Mebane Enterprise",oclc:"24839575"},"mecktimes.com":{name:"Mecklenburg Times"},"medina-gazette.com":{name:"Medina Gazette"},"melrosebeacon.com":{name:"Melrose Beacon"},"memphisdailynews.com":{name:"Memphis Daily News"},"memphisdemocrat.com":{name:"Memphis Democrat"},"memphisflyer.com":{name:"Memphis Flyer"},"menastar.com":{name:"Mena Star"},"mendocinobeacon.com":{name:"Mendocino Beacon"},"mendonoma.com":{name:"Independent Coast Observer"},"mendotareporter.com":{name:"Mendota Reporter"},"mercedcountytimes.net":{name:"Merced County Times"},"mercedsunstar.com":{name:"Merced Sun-Star"},"mercurynews.com":{issn:"0747-2099",name:"The Mercury News",oclc:"145122249"},"meridianstar.com":{name:"Meridian Star"},"merrillfotonews.com":{name:"Merrill Foto News"},"mesquitelocalnews.com":{name:"Mesquite Local News"},"messenger-index.com":{name:"Messenger Index"},"messenger-inquirer.com":{name:"Messenger-Inquirer"},"messengernews.net":{name:"Messenger"},"messengerpaper.com":{name:"Mon Valley Messenger"},"messengerweekly.net":{name:"Bates County Messenger"},"methowvalleynews.com":{name:"Methow Valley News"},"metnews.com":{name:"Metropolitan News Enterprise"},"metro.news":{issn:"1469-6215",name:"Metro",oclc:"225917520"},"metroactive.com":{issn:"0882-4290",name:"Metro Silicon Valley",oclc:"11831028"},"metrobulletin.com":{issn:"0744-8627",name:"Metropolis Bulletin",oclc:"21549539"},"metrobulletinexample.com":{issn:"0744-8627",name:"Metropolis Bulletin",oclc:"21549539"},"metromonthly.net":{name:"Metro Monthly"},"metropolisplanet.com":{name:"Metropolis Planet"},"metrospirit.com":{name:"Metro Spirit"},"metrotimes.com":{name:"Metro Times"},"metrowestdailynews.com":{name:"MetroWest Daily News"},"metteradvertiser.com":{name:"Metter Advertiser"},"mexicoledger.com":{name:"Mexico Ledger"},"mi-reporter.com":{name:"Mercer Island Reporter"},"miamiherald.com":{issn:"0898-865X",name:"Miami Herald",oclc:"2733685"},"miaminewtimes.com":{name:"Miami New Times"},"miamiok.com":{name:"Miami News-Record"},"miamitimesonline.com":{name:"Miami Times"},"miamitodaynews.com":{name:"Miami Today"},"mibiz.com":{name:"MiBiz"},"michigansthumb.com":{name:"Huron Daily Tribune"},"michronicleonline.com":{name:"Michigan Chronicle"},"midcountymemo.com":{name:"Mid-County Memo"},"middlesborodailynews.com":{name:"Daily News"},"middletownpress.com":{name:"Middletown Press"},"middletowntranscript.com":{name:"Middletown Transcript"},"midiaenterprise.com":{name:"Mid-Iowa Enterprise"},"midilibre.fr":{name:"Midi Libre",oclc:"11968582"},"midksnews.com":{name:"Mid-Kansas News"},"midriversnewsmagazine.com":{name:"Mid Rivers Newsmagazine"},"midvalleynews.com":{name:"Mid Valley News"},"midweek.com":{name:"MidWeek"},"midweeknews.com":{name:"DeKalb MidWeek"},"midwestmessenger.com":{name:"Midwest Messenger"},"milescitystar.com":{name:"Miles City Star"},"milfordbeacon.com":{name:"Milford Beacon"},"milfordchronicle.net":{name:"Milford Chronicle"},"milforddailynews.com":{name:"Milford Daily News"},"milfordmirror.com":{name:"Milford Mirror"},"militarypress.com":{name:"Military Press Newspaper"},"millburysutton.com":{name:"Millbury-Sutton Chronicle"},"millelacscountytimes.com":{name:"Mille Lacs County Times"},"millercountyliberal.com":{name:"Miller County Liberal"},"milligazette.com":{issn:"0972-3366",name:"The Milli Gazette",oclc:"54467165"},"miltontimes.com":{name:"Milton Times"},"mineolaamerican.com":{name:"Mineola American"},"mineralcountyminer.com":{name:"Mineral County Miner"},"mineralwellsindex.com":{name:"Index"},"minicassia.com":{name:"Weekly Mailer"},"mininggazette.com":{name:"The Daily Mining Gazette",oclc:"9940134"},"miniondas.com":{name:"Periodico Miniondas"},"minotdailynews.com":{name:"Minot Daily News"},"miramesanews.com":{name:"Mira Mesa News"},"mirror.co.uk":{issn:"9975-9950",name:"Sunday Mirror",oclc:"436610738"},"misscotimes.com":{name:"Mississippi County Times"},"missionhillgazette.com":{name:"Mission Hill Gazette"},"missiontimescourier.com":{name:"Mission Times Courier"},"missionvalleynews.com":{name:"Mission Valley News"},"missloumagazine.com":{name:"Miss-Lou Magazine"},"missoulanews.bigskypress.com":{name:"Missoula Independent"},"missoulian.com":{name:"Missoulian"},"missourifarmertoday.com":{name:"Missouri Farmer Today"},"mitchellrepublic.com":{name:"Daily Republic"},"mk.ru":{issn:"1562-1987",name:"Moskovskij Komsomolets"},"mlstargazette.com":{name:"Star Gazette"},"mmsonline.com":{issn:"0026-8003",name:"Modern Machine Shop"},"moabtimes.com":{name:"Times-Independent"},"moberlymonitor.com":{name:"Monitor-Index"},"mobridgetribune.com":{name:"Mobridge Tribune"},"modbee.com":{name:"Modesto Bee"},"modocrecord.com":{name:"Modoc County Record"},"mohavedailynews.com":{name:"Mohave Daily News"},"mokenamessenger.com":{name:"Mokena Messenger"},"molokaiadvertiser-news.com":{name:"Molokai Advertiser-News"},"momenceprogressreporter.com":{name:"Momence Progress Reporter"},"mondoviherald.net":{name:"Herald-News"},"monett-times.com":{name:"Monett Times"},"monroebuzz.com":{name:"Monroe County Buzz"},"monroecountyappeal.com":{name:"Monroe County Appeal"},"monroecourier.com":{name:"Monroe Courier"},"monroelegacy.com":{name:"Monroe Legacy"},"monroemonitor.com":{name:"Monroe Monitor"},"monroenews.com":{name:"Monroe News"},"mont.thesentinel.com":{name:"Montgomery County Sentinel",oclc:"9627507"},"montenews.com":{name:"Montevideo American News"},"montereycountyweekly.com":{name:"Monterey County Weekly"},"montereyherald.com":{name:"Monterey County Herald"},"montgomeryadvertiser.com":{name:"Montgomery Advertiser"},"montgomerycountynews.net":{name:"Montgomery County News"},"montgomeryherald.com":{name:"Montgomery Herald"},"montgomerynews.com":{name:"Montgomery News"},"monticelloexpress.com":{name:"Monticello Express"},"monticellotimes.com":{name:"Monticello Times"},"montmorencytribune.com":{name:"Montmorency County Tribune"},"montrealgazette.com":{issn:"0384-1294",name:"Montreal Gazette",oclc:"456824368"},"montrosepress.com":{name:"Montrose Daily Press"},"montynews.com":{name:"Montgomery News"},"moodycountyenterprise.com":{name:"Moody County Enterprise"},"moorefieldexaminer.com":{name:"Moorefield Examiner"},"moorenews.com":{name:"News-Press"},"mooresvilletribune.com":{name:"Mooresville Tribune"},"moraminn.com":{name:"Kanabec Times"},"morgancountycitizen.com":{name:"Morgan County Citizen"},"morganhilltimes.com":{name:"Morgan Hill Times"},"morganmessenger.com":{name:"Morgan Messenger"},"morganton.com":{name:"News Herald"},"morning-times.com":{name:"Morning Times"},"morningsun.net":{name:"Morning Sun"},"morrisherald-news.com":{name:"Morris Daily Herald"},"morrissuntribune.com":{name:"Morris Sun Tribune"},"mortontimesnews.com":{name:"Morton Times-News"},"motorcyclenews.com":{issn:"0027-1853",name:"Motor Cycle News"},"moultonadvertiser.com":{name:"Moulton Advertiser"},"moultrieobserver.com":{name:"Moultrie Observer"},"moundcitynews.com":{name:"Mound City News"},"mountain-news.com":{name:"Mountain News"},"mountainadvocate.com":{name:"Mountain Advocate"},"mountaineagle.com":{name:"Daily Mountain Eagle"},"mountainecho.com":{name:"Mountain Echo"},"mountainenterprise.com":{name:"Mountain Enterprise"},"mountainhomenews.com":{name:"Mountain Home News"},"mountainjackpot.com":{name:"Mountain Jackpot"},"mountainmessenger.com":{name:"Mountain Messenger"},"mountainmonthly.com":{name:"Mountain Monthly"},"mountainstatesman.com":{name:"Mountain Statesman"},"mountaintimes.com":{name:"Mountain Times",oclc:"33926172"},"mountaintimes.info":{name:"The Mountain Times",oclc:"44437619"},"mountaintimes.net":{name:"Timberon Mountain Times"},"mountainviewstandard.com":{name:"Mountain View Standard"},"mountainx.com":{name:"Mountain Xpress"},"mountolivetribune.com":{name:"Mount Olive Tribune"},"mountvernongazette.com":{name:"Mount Vernon Gazette"},"mountvernonnews.com":{name:"Mount Vernon News"},"movillerecord.com":{name:"Moville Record"},"mpcourier.com":{name:"Daily Courier Observer"},"mpnnow.com":{name:"Daily Messenger"},"mrt.com":{name:"Midland Reporter Telegram"},"msadvocate.com":{name:"Mt. Sterling Advocate"},"msgr.com":{name:"Eatonton Messenger"},"mt-peaks.com":{name:"Mountain Peaks"},"mt-pleasant-ia.villagesoup.com":{name:"Mt. Pleasant News"},"mt-vernon.com":{name:"Optic Herald"},"mtairynews.com":{name:"Mount Airy News"},"mtayrnews.com":{name:"Mount Ayr Record-News"},"mtcarmelregister.com":{name:"Mount Carmel Register"},"mtdemocrat.com":{name:"Mountain Democrat"},"mteagle.com":{name:"Mountaintop Eagle"},"mtexpress.com":{name:"Idaho Mountain Express"},"mtjulietnews.com":{name:"Mt Juliet News"},"mtlakenews.com":{name:"Mountain Lake Observer"},"mtprogress.net":{name:"Mountaineer Progress"},"mtshastanews.com":{name:"Mount Shasta Herald"},"mtstandard.com":{name:"Montana Standard"},"mukilteobeacon.villagesoup.com":{name:"Mukilteo Beacon"},"muncievoice.com":{name:"Muncie Voice"},"mundohispanico.com":{name:"Mundo Hispanico Atlanta"},"murfreesboropost.com":{name:"Murfreesboro Post"},"murraycountynews.net":{name:"Murray County News"},"murrayledger.com":{name:"Murray Ledger & Times"},"muscatdaily.com":{issn:"2075-1575",name:"Muscat Daily"},"muskogeephoenix.com":{name:"Muskogee Phoenix"},"mv-voice.com":{name:"Mountain View Voice"},"mvgazette.com":{name:"Vineyard Gazette",oclc:"9397107"},"mvlsun.com":{name:"Mt. Vernon-Lisbon Sun"},"mvprogress.com":{name:"Moapa Valley Progress"},"mvtelegraph.com":{name:"Mountain View Telegraph"},"mvtimes.com":{name:"MV Times"},"mybiglake.com":{name:"Wildcat"},"mybulletinnewspaper.com":{name:"Bulletin"},"mycaldwellcounty.com":{name:"Caldwell County News"},"mycameronnews.com":{name:"Citizen Observer"},"mycentraljersey.com":{name:"Home News Tribune",oclc:"13854028"},"mycitizensnews.com":{name:"Naugatuck Citizen's News"},"mycitypaper.com":{name:"My City Paper"},"mydailyrecord.com":{name:"Daily Record"},"mydailyregister.com":{name:"Point Pleasant Register"},"mydailysentinel.com":{name:"Daily Sentinel"},"mydailytribune.com":{name:"Gallipolis Daily Tribune"},"mydallaspost.com":{name:"Dallas Post"},"myeldorado.net":{name:"Eldorado Success"},"myheraldreview.com":{issn:"8750-3891",name:"Herald Review Media"},"myironcountynews.com":{name:"Mountain Echo"},"myjohnstownbreeze.com":{name:"Johnstown Breeze"},"mymalonetelegram.com":{name:"Malone Telegram"},"mymcr.net":{name:"Monroe County Reporter"},"mymonticellonews.net":{name:"Advance Monticellonian"},"mynwapaper.com":{name:"Northwest Alabamian"},"myplainview.com":{name:"Plainview Daily Herald"},"myprogressnews.com":{name:"Progress News"},"myrtlebeachonline.com":{name:"Sun News"},"mysanantonio.com":{name:"MySA"},"mysanfordherald.com":{name:"Sanford Herald"},"mysoutex.com":{name:"Beeville Bee-Picayune"},"mysuburbanlife.com":{name:"My Suburban Life"},"mysullivannews.com":{name:"Sullivan Independent News"},"mytrimblenews.com":{name:"Trimble Banner"},"mytrpaper.com":{name:"Times-Record"},"myvalleynews.com":{name:"Valley News"},"mywaynenews.com":{name:"Wayne Herald"},"mywebtimes.com":{name:"Daily Times"},"mywindsornow.com":{name:"Windsor Now"},"nadignewspapers.com":{name:"Nadig Newspapers"},"napavalleyregister.com":{name:"Napa Valley Register"},"naplesnews.com":{name:"Naples Daily News"},"nashobavalleyvoice.com":{name:"Nashoba Valley Voice"},"nashuatelegraph.com":{name:"Telegraph"},"nashvillecitypaper.com":{name:"City Paper"},"nashvillescene.com":{name:"Nashville Scene"},"nassaucountyrecord.com":{name:"Nassau County Record"},"naszdziennik.pl":{issn:"1429-4834",name:"Nasz Dziennik",oclc:"613125892"},"natchezdemocrat.com":{name:"Natchez Democrat"},"natchitochestimes.com":{name:"Natchitoches Times"},"nationalpost.com":{issn:"1486-8008",name:"National Post"},"navajotimes.com":{name:"Navajo Times"},"navarrepress.com":{name:"Navarre Press"},"navasotaexaminer.com":{name:"Navasota Examiner"},"navynews.co.uk":{issn:"0028-1670",name:"Navy News",oclc:"70249744"},"navytimes.com":{issn:"0028-1697",name:"Navy Times",oclc:"03511129"},"ncadvertiser.com":{name:"New Canaan Advertiser"},"ncnewsonline.com":{name:"New Castle News"},"ncnewspress.com":{name:"News Press"},"ncregister.com":{issn:"0027-8920",name:"National Catholic Register"},"ncronline.org":{issn:"0027-8939",name:"National Catholic Reporter"},"nddaily.com":{issn:"1004-5171",name:"Southern Metropolis Daily"},"neagle.com":{name:"News Eagle"},"nelighnews.com":{name:"News and Leader"},"nemonews.net":{name:"Edina Sentinel"},"neoshodailynews.com":{name:"Neosho Daily News"},"nephitimesnews.com":{name:"Times-News"},"neshobademocrat.com":{name:"Neshoba Democrat"},"nevadaappeal.com":{name:"Nevada Appeal"},"nevadadailymail.com":{name:"Nevada Daily Mail"},"newarkadvocate.com":{issn:"0740-2120",name:"The Advocate",oclc:"9898663"},"newarkpostonline.com":{name:"Newark Post"},"newberry-news.com":{name:"Newberry News"},"newberryobserver.com":{name:"Newberry Observer"},"newburyportnews.com":{name:"Daily News"},"newburytoday.co.uk":{issn:"0961-9739",name:"The Newbury Weekly News",oclc:"500150445"},"newcanaannewsonline.com":{name:"New Canaan News"},"newcarlislenews.net":{name:"New Carlisle News"},"newcomerstown-news.com":{name:"Newcomerstown News"},"newhavenbanner.com":{name:"New Haven Banner"},"newhavenindependent.org":{name:"New Haven Independent"},"newindianexpress.com":{name:"The New Indian Express",oclc:"243883379"},"newlenoxpatriot.com":{name:"New Lenox Patriot"},"newmilfordspectrum.com":{name:"New Milford Spectrum"},"neworleanscitybusiness.com":{name:"CityBusiness"},"newpittsburghcourieronline.com":{name:"New Pittsburgh Courier"},"newportindependent.com":{name:"Newport Independent"},"newportnewstimes.com":{name:"News Times"},"newportplaintalk.com":{name:"Newport Plain Talk"},"newpraguetimes.com":{name:"New Prague Times"},"newrichlandstar.com":{name:"Star Eagle"},"news-banner.com":{name:"News Banner"},"news-bulletin.com":{name:"Valencia County News"},"news-daily.com":{name:"Clayton News Daily"},"news-examiner.net":{name:"News-Examiner"},"news-expressky.com":{name:"Appalachian News Express"},"news-graphic.com":{name:"News-Graphic"},"news-herald.com":{name:"News-Herald"},"news-herald.net":{name:"News-Herald"},"news-leader.com":{name:"News-Leader"},"news-press.com":{name:"News-Press"},"news-reporter.com":{name:"News Reporter"},"news-sentinel.com":{name:"News-Sentinel"},"news-shield.com":{name:"Barron News-Shield"},"news-star.com":{name:"Shawnee News-Star"},"news.citysuntimes.com":{name:"CITYSunTimes"},"news.fitzrovia.org.uk":{issn:"0967-1404",name:"Fitzrovia News"},"news.gulfbreezenews.com":{name:"Gulf Breeze News"},"news.keepmecurrent.com":{name:"Keep Me Current"},"news.thesunontheweb.com":{name:"Sun"},"news4u.me":{name:"News 4U"},"newsadvance.com":{name:"News & Advance"},"newsaegis.com":{name:"St. Clair News-Aegis"},"newsandcitizen.com":{name:"News & Citizen"},"newsandsentinel.com":{name:"News and Sentinel"},"newsandtribune.com":{name:"News and Tribune"},"newsargus.com":{name:"News-Argus"},"newsblade.com":{name:"Bridgeport News-Blade"},"newschief.com":{name:"News Chief"},"newsday.com":{issn:"0278-5587",name:"Newsday",oclc:"5371847"},"newsdemocrat.com":{name:"News Democrat"},"newsdemocratleader.com":{name:"News Democrat & Leader"},"newsexaminer.com":{name:"News Examiner"},"newsherald.com":{name:"News Herald"},"newsitem.com":{name:"News-Item"},"newsleader.com":{name:"Daily News Leader"},"newsminer.com":{name:"Fairbanks Daily News-Miner"},"newsmirror.net":{name:"Yucaipa News Mirror"},"newsobserver.com":{name:"News and Observer"},"newsoforange.com":{name:"News of Orange County"},"newsoftheworld.co.uk":{issn:"0027-9358",name:"News of the World",oclc:"10813236"},"newsok.com":{name:"Oklahoman"},"newspostleader.co.uk":{issn:"1753-7266",name:"News Post Leader"},"newspress.com":{name:"Santa Barbara News Press"},"newspressnow.com":{name:"St. Joseph News-Press"},"newsprint.ch":{name:"News",oclc:"638028289"},"newsprogress.com":{name:"News Progress"},"newsregister.com":{name:"News-Register"},"newsrepublican.com":{name:"Boone News-Republican"},"newssun.com":{name:"News-Sun"},"newstimes.augusta.com":{name:"Columbia Co. News Times"},"newstimes.com":{name:"Danbury News-Times"},"newstopicnews.com":{name:"Lenoir News Topic"},"newstrib.com":{name:"News Tribune"},"newstribune.com":{name:"News Tribune"},"newstribune.info":{name:"Daily News-Tribune"},"newsvirginian.com":{name:"News-Virginian"},"newswatchman.com":{name:"Pike County News Watchman"},"newtimesslo.com":{name:"New Times Weekly"},"newtoncitizen.com":{name:"Newton Citizen"},"newtoncountyappeal.com":{name:"Newton County Appeal"},"newtoncountytimes.com":{name:"Newton County Times"},"newtondailynews.com":{name:"Newton Daily News"},"newtownbee.com":{name:"Newtown Bee"},"newyorker.com":{name:"The New Yorker",issn:"0028-792X",kind:"Magazine Article"},"newyorkbeacon.net":{name:"New York Beacon"},"nganews.com":{name:"North Georgia News"},"nhbr.com":{issn:"0164-8152",name:"New Hampshire Business Review"},"nhgazette.com":{name:"New Hampshire Gazette"},"nhonews.com":{name:"Navajo Hopi Observer"},"nhregister.com":{name:"New Haven Register"},"niagara-gazette.com":{name:"Niagara Gazette"},"niagarafallsreporter.com":{name:"Niagara Falls Reporter"},"nichibei.org":{name:"Nichi Bei Weekly"},"nikkeiwest.com":{name:"NikkeiWest"},"niobraratribune.com":{name:"Niobrara Tribune"},"njbiz.com":{name:"NJBIZ"},"njeffersonnews.com":{name:"North Jefferson News"},"njherald.com":{name:"New Jersey Herald"},"njtoday.net":{name:"NJToday.net"},"nkctribune.com":{name:"Northern Kittitas County Tribune"},"nmtribune.com":{name:"New Mexico Tribune"},"nnbw.com":{name:"Northern Nevada Business Weekly"},"noblescountyreview.net":{name:"Nobles County Review"},"nodawaynews.com":{name:"Nodaway News Leader"},"nogalesinternational.com":{name:"Nogales International"},"nomenugget.net":{issn:"0745-9106",name:"The Nome Nugget"},"nonpareilonline.com":{name:"Daily Nonpareil"},"noozhawk.com":{name:"NOOZHAWK"},"norfolkdailynews.com":{name:"Norfolk Daily News"},"normalite.com":{name:"Normalite"},"normantranscript.com":{name:"Norman Transcript"},"northbendeagle.com":{name:"North Bend Eagle"},"northbrooktower.com":{name:"Northbrook Tower"},"northcoastcitizen.com":{name:"North Coast Citizen"},"northcountrynow.com":{name:"North Country Now"},"northcountymessenger.com":{name:"North County Messenger"},"northeastnews.net":{name:"Kansas City Northeast News"},"northendregionalreview.com":{name:"North End Regional Review"},"northernstar.com.au":{issn:"1036-6768",name:"The Northern Star"},"northernsunprint.com":{name:"Northern Sun Print"},"northfulton.com":{name:"Appen Newspapers"},"northglenn-thorntonsentinel.com":{name:"Northglenn-Thornton Sentinel"},"northhawaiinews.com":{name:"North Hawaii News"},"northjersey.com":{name:"The Record",oclc:"10806291"},"northkitsapherald.com":{name:"North Kitsap Herald"},"northlibertyleader.com":{name:"North Liberty Leader"},"northplattebulletin.com":{name:"North Platte Bulletin"},"northscottpress.com":{name:"North Scott Press"},"northshorenews.com":{name:"North Shore News"},"northsidesun.com":{name:"Jackson Northside Sun"},"northstate.news":{name:"Intermountain News"},"northumberlandgazette.co.uk":{issn:"1354-9189",name:"Northumberland Gazette"},"northumberlandnews.com":{name:"Northumberland News",oclc:"889232053"},"northwestsignal.net":{name:"Northwest Signal"},"norwalkreflector.com":{name:"Norwalk Reflector"},"norwichbulletin.com":{name:"Norwich Bulletin"},"norwoodnews.org":{name:"Norwood News"},"noticias.alianzanews.com":{name:"Alianza Metropolitan"},"nouvelliste.ch":{name:"Le Nouvelliste",oclc:"605916238"},"npr.org":{name:"NPR"},"nptelegraph.com":{name:"North Platte Telegraph"},"nrc.nl":{issn:"0002-5259",name:"NRC Handelsblad"},"nrcolumbus.com":{name:"News Reporter"},"nrtoday.com":{name:"News-Review"},"ntxe-news.com":{name:"North Texas e-News"},"nuevosiglo.com":{name:"Nuevo Siglo"},"nuggetnews.com":{name:"Nugget Newspaper",oclc:"47982213"},"nutfieldnews.net":{name:"Nutfield News"},"nuvo.net":{name:"Nuvo Newsweekly"},"nvdaily.com":{name:"Northern Virginia Daily"},"nwasianweekly.com":{name:"Northwest Asian Weekly"},"nwestiowa.com":{name:"N'West Iowa Review"},"nwfdailynews.com":{name:"Daily News"},"nwherald.com":{name:"Northwest Herald"},"nwherald.qwestoffice.net":{name:"North Weld Herald"},"nwitimes.com":{name:"Times"},"nwnews.com":{name:"Woodinville Weekly"},"nwobserver.com":{name:"Northwest Observer"},"nydailynews.com":{name:"Daily News",oclc:"9541172"},"nypost.com":{issn:"1090-3321",name:"New York Post"},"nypress.com":{issn:"1538-1412",name:"New York Press",oclc:"23806626"},"nysun.com":{name:"New York Sun"},"nytimes.com":{issn:"0362-4331",issn_alt:"1553-8095",name:"The New York Times",oclc:"1645522"},"nzherald.co.nz":{issn:"1170-0777",name:"The New Zealand Herald"},"oakdaleleader.com":{name:"Oakdale Leader"},"oakhillgazette.com":{name:"Oak Hill Gazette"},"oakridger.com":{name:"Ridger"},"oanow.com":{name:"Opelika-Auburn News"},"oaoa.com":{name:"Odessa American"},"obsentinel.com":{name:"Outer Banks Sentinel"},"observer-me.com":{name:"Piscataquis Observer"},"observer-reporter.com":{name:"Observer-Reporter"},"observer-review.com":{name:"Dundee Observer"},"observer.com":{issn:"1052-2948",name:"Observer"},"observernewsonline.com":{name:"Observer News Enterprise"},"observertoday.com":{name:"Observer"},"ocala.com":{name:"Star-Banner"},"oceancitytoday.net":{name:"Ocean City Today"},"och-c.com":{name:"Herald-Chronicle"},"oconeeenterprise.com":{name:"Oconee Enterprise"},"ocregister.com":{issn:"0886-4934",name:"Orange County Register",oclc:"12199155"},"ocsentinel.com":{name:"Ocean City Sentinel"},"octimesnews.com":{name:"Ohio County Times-News"},"ocweekly.com":{name:"Orange County Weekly"},"odt.co.nz":{issn:"0114-426X",name:"Otago Daily Times"},"ogdenreporter.com":{name:"Ogden Reporter"},"oglecountylife.com":{name:"Ogle County Life"},"oglecountynews.com":{name:"Ogle County News"},"ojaivalleynews.com":{name:"Ojai Valley News"},"ojornal.com":{name:"O Jornal News"},"okawvilletimes.com":{name:"Okawville Times"},"oklahomaconstitution.com":{name:"Oklahoma Constitution"},"oldhamera.com":{name:"Oldham Era"},"oleantimesherald.com":{name:"Olean Times Herald",oclc:"757862514"},"olneydailymail.com":{name:"Olney Daily Mail"},"olneyenterprise.com":{name:"Olney Enterprise"},"omaha.com":{name:"Omaha-World Herald"},"omahadailyrecord.com":{name:"Omaha Daily Record"},"omakchronicle.com":{name:"County Chronicle"},"oneidadispatch.com":{name:"Daily Dispatch"},"onlineathens.com":{name:"Athens Banner-Herald"},"onlinechester.com":{name:"Chester News and Reporter"},"ontonagonherald.com":{name:"Ontonagon Herald"},"opinion-tribune.com":{name:"Opinion-Tribune"},"oppnewsonline.com":{name:"Opp News"},"opprairie.com":{name:"Orland Park Prairie"},"orangeleader.com":{name:"Orange Leader"},"orangevalesun.com":{name:"Orangevale Sun"},"orchardparkbee.com":{name:"Orchard Park Bee"},"oregonherald.com":{name:"Oregon Herald"},"oregonlive.com":{issn:"8750-1317",name:"The Oregonian"},"orientaldaily.on.cc":{issn:"1018-8177",name:"Oriental Daily News"},"oriongazette.com":{name:"Orion Gazette"},"orlando-times.com":{name:"Times"},"orlandosentinel.com":{name:"Sentinel"},"orlandoweekly.com":{name:"Weekly"},"oronoweeklytimes.com":{issn:"0834-6844",name:"Orono Weekly Times"},"orovillemr.com":{name:"Oroville Mercury-Register"},"osceolaiowa.com":{name:"Sentinel-Tribune"},"osceolatimes.com":{name:"Osceola Times"},"oskaloosa.com":{name:"Oskaloosa Herald"},"ospreyobserver.com":{name:"Osprey Observer"},"osrecord.com":{name:"Ocean Springs Record"},"oswegocountynewsnow.com":{name:"Valley News"},"oswegocountytoday.com":{name:"Oswego County Today"},"oswegonian.com":{name:"The Oswegonian",oclc:"24944762"},"otdowntown.com":{name:"Our Town Downtown"},"othellooutlook.com":{name:"Othello Outlook"},"ottawacitizen.com":{issn:"0839-3222",name:"Ottawa Citizen"},"ottawaherald.com":{name:"Ottawa Herald"},"ottawasun.com":{issn:"0843-2570",name:"Ottawa Sun",oclc:"19898585"},"ottumwacourier.com":{name:"Ottumwa Courier"},"oudaily.com":{issn:"0030-171X",name:"The Oklahoma Daily"},"ouraynews.com":{name:"Plaindealer"},"ourcommunityfocus.com":{name:"Community Focus"},"ourdavie.com":{name:"Enterprise-Record"},"ourherald.com":{name:"Herald of Randolph"},"ourmidland.com":{name:"Midland Daily News"},"ourtownnews.com":{name:"Our Town Northern Bergen"},"ourtownnewsonline.com":{name:"Maywood Our Town"},"ourtownny.com":{name:"Our Town"},"ourvalleyvoice.com":{name:"Valley Voice"},"overtoncountynews.com":{name:"Overton County News"},"owentonnewsherald.com":{name:"Owenton News Herald"},"owossoindependent.com":{name:"Owosso Independent"},"owyheepublishing.com":{name:"Owyhee Avalanche"},"oxfordeagle.com":{name:"Oxford Eagle"},"oxfordleader.com":{name:"Oxford Leader"},"oysterbayguardian.com":{name:"Oyster Bay Guardian"},"ozarkcountytimes.com":{name:"Ozark County Times"},"ozarkspectator.net":{name:"Ozark Spectator"},"ozaukeepress.com":{name:"Ozaukee Press"},"ozonastockman.com":{name:"Ozona Stockman"},"pacbiztimes.com":{name:"Pacific Coast Business Times"},"pacesettingtimesonline.com":{name:"Pacesetting Times"},"pacific-times.com":{name:"Pacific Times"},"pacificatribune.com":{name:"Pacifica Tribune"},"pacificcitizen.org":{name:"Pacific Citizen"},"pacificcitysun.com":{name:"Pacific City Sun"},"pacificpublishingcompany.com":{name:"Pacific Publishing Newspapers"},"pacificsun.com":{name:"Pacific Sun"},"packet-media.com":{name:"Columbus Packet"},"paducahsun.com":{name:"Paducah Sun"},"pagesix.com":{issn:"1090-3321",name:"New York Post"},"pagosadailypost.com":{name:"Pagosa Springs Daily Post"},"pagosasun.com":{name:"Pagosa Springs Sun"},"paintsvilleherald.com":{name:"Paintsville Herald"},"pakistantoday.com.pk":{issn:"1098-8424",name:"Pakistan Today",oclc:"38894207"},"pal-item.com":{name:"Palladium-Item"},"palaciosbeacon.com":{name:"Palacios Beacon"},"palatkadailynews.com":{name:"Palatka Daily News"},"palestineherald.com":{name:"Herald-Press"},"palipost.com":{name:"Palisadian Post"},"palmbeachdailynews.com":{name:"Daily News"},"palmbeachpost.com":{issn:"1528-5758",name:"The Palm Beach Post"},"palmswestmonthly.com":{name:"Palms West Monthly"},"palmyra-spectator.com":{name:"Palmyra Spectator"},"paloaltoonline.com":{name:"Palo Alto Online"},"pananewsonline.net":{name:"Pana News-Palladium"},"panews.com":{name:"Port Arthur News"},"panolian.com":{name:"Panolian"},"pantagraph.com":{name:"Pantagraph"},"paolinewsrepublican.com":{name:"Paoli News-Republican"},"paradisepost.com":{name:"Paradise Post"},"paragoulddailypress.com":{name:"Paragould Daily Press"},"paris-express.com":{name:"Paris Express"},"parisbeacon.com":{name:"Beacon-News"},"parispi.net":{name:"Paris Post-Intelligencer"},"parkcitiespeople.com":{name:"Park Cities People"},"parkecountysentinel.com":{name:"Parke County Sentinel"},"parkerchronicle.net":{name:"Parker Chronicle"},"parkerpioneer.net":{name:"Parker Pioneer"},"parkrapidsenterprise.com":{name:"Park Rapids Enterprise"},"parkrecord.com":{name:"Park Record"},"parsippanyfocus.com":{name:"Parsippany Focus"},"parsonssun.com":{name:"Parsons Sun"},"pasadenaindependent.com":{name:"Pasadena Independent"},"pasadenastarnews.com":{name:"Pasadena Star-News"},"pasadenaweekly.com":{name:"Pasadena Weekly"},"pasoroblesdailynews.com":{name:"Daily News"},"pasoroblespress.com":{name:"Paso Robles Press"},"patriotledger.com":{name:"Patriot Ledger"},"paulsvalleydailydemocrat.com":{name:"Pauls Valley Daily Democrat"},"pawneerepublican.com":{name:"Pawnee Republican"},"pawpawcourierleader.com":{name:"Courier-Leader"},"pawtuckettimes.com":{name:"Times"},"paxtonrecord.net":{name:"Ford County Record"},"paynesvillearea.com":{name:"Paynesville Press"},"paysonroundup.com":{name:"Payson Roundup"},"pbcommercial.com":{name:"Pine Bluff Commercial"},"pbn.com":{name:"Providence Business News"},"pburgmail.com":{name:"Philipsburg Mail"},"pcgazette.com":{name:"Portage County Gazette"},"pcherald.com":{name:"Pickens County Herald"},"pcnr.com":{name:"Putnam News & Recorder"},"pcrecordtimes.com":{name:"Platte County Record-Times"},"pctribune.com":{name:"Pope County Tribune"},"pdclarion.com":{name:"Princeton Daily Clarion"},"pe.com":{name:"Press-Enterprise"},"peabodykansas.com":{name:"Gazette-Bulletin"},"peacearchnews.com":{issn:"0700-9003",name:"Peace Arch News"},"peacemakeronline.com":{name:"Carolina Peacemaker"},"pekintimes.com":{name:"Pekin Daily Times"},"pelhamplus.com":{name:"Pelham Plus"},"pelicanrapidspress.com":{name:"Pelican Rapids Press"},"pellachronicle.com":{name:"Pella Chronicle"},"penderthurston.com":{name:"Pender Times"},"pendletontimespost.com":{name:"Pendleton Times-Post"},"pendoreillerivervalley.com":{name:"Newport Miner"},"penfieldpost.com":{name:"Penfield Post"},"peninsulaclarion.com":{name:"Peninsula Clarion",oclc:"38079057"},"peninsuladailynews.com":{name:"Peninsula Daily News"},"peoplesdefender.com":{name:"People's Defender"},"peoriatimes.com":{name:"Peoria Times"},"perhamfocus.com":{name:"Perham Focus"},"perrycountynews.com":{name:"Perry County News"},"perryvillenews.com":{name:"Republic-Monitor"},"personcountylife.com":{name:"Courier Times"},"perthgazette.co.uk":{issn:"0312-6323",name:"Perth Gazette"},"perthnow.com.au":{issn:"1442-9527",name:"The Sunday Times",oclc:"427972890"},"peshtigotimes.net":{name:"Peshtigo Times"},"petaluma360.com":{name:"Argus-Courier"},"petersburgpilot.com":{name:"Petersburg Pilot"},"petoskeynews.com":{name:"Petoskey News-Review"},"petroleumnews.com":{name:"Petroleum News"},"pghcitypaper.com":{issn:"1066-0062",name:"Pittsburgh City Paper",oclc:"26849157"},"pgpost.com":{name:"Prince George's Post"},"pharostribune.com":{name:"Pharos-Tribune"},"philadelphiaweekly.com":{name:"Philadelphia Weekly"},"philanthropy.com":{issn:"1040-676X",name:"The Chronicle of Philanthropy"},"philippinenews.com":{name:"Philippine News"},"phillipscountynews.com":{name:"Phillips County News"},"phillipscountyreview.com":{name:"Phillips County Review"},"phillytrib.com":{issn:"0746-956X",name:"Philadelphia Tribune"},"philstar.com":{name:"The Philippine Star",oclc:"854909029"},"phoenixnewtimes.com":{issn:"0279-3962",name:"Phoenix New Times"},"phoenixvillenews.com":{name:"Phoenix"},"phtimes.net":{name:"Pleasant Hill Times"},"piadvance.com":{name:"Presque Isle County Advance"},"picayune-times.com":{name:"Nevada County Picayune"},"picayuneitem.com":{name:"Picayune Item"},"pickensprogressonline.com":{name:"Pickens County Progress"},"pickenssentinel.com":{name:"Pickens Sentinel"},"piercecountyherald.com":{name:"Pierce County Herald"},"pikepress.com":{name:"Pike Press"},"pilotonline.com":{name:"Virginian Pilot"},"pinecitymn.com":{name:"Pine City Pioneer"},"pineconearchive.com":{name:"Carmel Pine Cone"},"pineconepresscitizen.com":{name:"Pine Cone Press-Citizen"},"pineisland-eagle.com":{name:"Pine Island Eagle"},"pineislandnews.com":{name:"Pine Island News"},"pinerivertimes.com":{name:"Pine River Times"},"pioneer-review.com":{name:"Philip Pioneer-Review"},"pioneernews.net":{name:"Pioneer News"},"pioneertimes-me.com":{name:"Houlton Pioneer Times"},"pioneertribune.com":{name:"Pioneer-Tribune"},"pipestonestar.com":{name:"Pipestone County Star"},"pitch.com":{name:"Pitch"},"pittsfieldgazette.com":{name:"Pittsfield Gazette"},"placerherald.com":{name:"Placer Herald"},"placersentinel.com":{name:"Placer Sentinel"},"plaindealer-sun.com":{name:"Plain Dealer & Sun"},"plainsman.com":{name:"Plainsman"},"plaintalk.net":{name:"Plain Talk"},"plainviewnews.net":{name:"Plainview News"},"plainvillecitizen.com":{name:"Plainville Citizen"},"planetjh.com":{name:"Planet Jackson Hole"},"plaqueminesgazette.com":{name:"Plaquemines Gazette"},"plattechronicle.com":{name:"Weston Chronicle"},"plattecountycitizen.com":{name:"Platte County Citizen"},"plattecountylandmark.com":{name:"Landmark Newspaper"},"pleasantonexpress.com":{name:"Pleasanton Express"},"pleasantonweekly.com":{name:"Pleasanton Weekly"},"plumasnews.com":{name:"Plumas County News"},"plymouth-review.com":{name:"Review"},"pmtdirect.com":{issn:"1556-1658",name:"Packaging Machinery Technology"},"pnb.pl":{issn:"1641-5205",name:"The Polish News Bulletin"},"pntonline.com":{name:"News-Tribune"},"pocahontastimes.com":{name:"Pocahontas Times"},"poconorecord.com":{name:"Pocono Record"},"politico.com":{name:"Politico"},"polkcountydemocrat.com":{name:"Polk County Democrat"},"polkcountynewspaper.com":{name:"Polk County News"},"polkio.com":{name:"Polk County Itemizer-Observer"},"pomeradonews.com":{name:"Pomerado Newspaper"},"poncacitynews.com":{name:"Ponca City News"},"pontevedrarecorder.com":{name:"Recorder"},"pontiacdailyleader.com":{name:"The Daily Leader",oclc:"22601141"},"portasouthjetty.com":{name:"Port Aransas South Jetty"},"portclintonnewsherald.com":{name:"News Herald"},"portlandmercury.com":{name:"Portland Mercury"},"portlandobserver.com":{name:"Portland Observer"},"portlandtribune.com":{name:"Portland Tribune",oclc:"46708462"},"portlavacawave.com":{name:"Port Lavaca Wave"},"portorchardindependent.com":{name:"Port Orchard Independent"},"portsmouth-dailytimes.com":{name:"Portsmouth Times"},"portuguesetimes.com":{name:"Portuguese Times"},"portwashington-news.com":{name:"Port Washington News"},"poseycountynews.com":{name:"Posey County News"},"post-gazette.com":{name:"Pittsburgh Post-Gazette"},"post-register.com":{name:"Post-Register"},"post.mainelymediallc.com":{name:"Kennebunk Post"},"post.mnsun.com":{name:"Sun-Post"},"postandcourier.com":{name:"Post and Courier"},"postbulletin.com":{name:"Post Bulletin",oclc:"22368050"},"postcrescent.com":{name:"Post-Crescent"},"postguam.com":{name:"Guam Daily Post",oclc:"1035108205"},"postindependent.com":{name:"Post Independent"},"postnewsgroup.com":{name:"Post News Group"},"postregister.com":{name:"Post Register"},"postsignal.com":{name:"Post-Signal"},"postsouth.com":{name:"Post South"},"poststar.com":{name:"Post-Star"},"poteaudailynews.com":{name:"Poteau Daily News"},"potomacalmanac.com":{name:"Potomac Almanac"},"pottsmerc.com":{name:"Mercury"},"powderspringsmessenger.net":{name:"Powder Springs Messenger"},"powelltribune.com":{name:"Powell Tribune"},"ppindependent.net":{name:"Independent"},"pragati.nationalinterest.in":{issn:"0973-8460}}",name:"Pragati"},"prairieadvocate.com":{name:"Prairie Advocate"},"prajavani.net":{name:"Prajavani",oclc:"37626596"},"pratttribune.com":{issn:"1048-3675",name:"The Pratt Tribune"},"precinctreporter.com":{name:"Precinct Reporter"},"prensahispanaaz.com":{name:"Prensa Hispana"},"prensaobrera.com":{issn:"0329-8760",name:"Prensa Obrera",oclc:"14090713"},"prentissheadlight.com":{name:"Prentiss Headlight"},"press-citizen.com":{name:"Press-Citizen"},"press-herald.com":{name:"Minden Press-Herald"},"press-leader.com":{name:"Press-Leader"},"pressandguide.com":{name:"Press and Guide"},"pressargus.com":{name:"Press Argus-Courier"},"pressconnects.com":{name:"Press & Sun-Bulletin"},"pressdemocrat.com":{name:"Press Democrat"},"pressenterpriseonline.com":{name:"Press Enterprise"},"pressherald.com":{name:"Portland Press Herald"},"pressmentor.com":{name:"Newton Press-Mentor"},"pressnews.com":{name:"Press & News"},"pressofatlanticcity.com":{name:"Press of Atlantic City"},"presspublications.com":{name:"Press"},"pressregister.com":{name:"Press Register"},"pressreporter.com":{name:"Lamesa Press Reporter"},"pressrepublican.com":{name:"Press-Republican"},"presstelegram.com":{name:"Press Telegram"},"prestoncitizen.com":{name:"Preston Citizen"},"prestonhollowpeople.com":{name:"Preston Hollow People"},"priestrivertimes.com":{name:"Priest River Times"},"princetonherald.com":{name:"Princeton Herald"},"progress-index.com":{name:"Progress Index"},"progressnewspaper.org":{name:"Paulding County Progress"},"progresstimes.net":{name:"Progress Times"},"pryordailytimes.com":{name:"Daily Times"},"psdispatch.com":{name:"Dispatch"},"ptleader.com":{name:"Jefferson County Leader"},"ptreyeslight.com":{name:"Point Reyes Light"},"publicopiniononline.com":{name:"Public Opinion Online"},"pulaskicountymirror.com":{name:"Pulaski County Mirror"},"punxsutawneyspirit.com":{name:"Punxsutawney Spirit"},"purcellregister.com":{name:"Purcell Register"},"purchasing.com":{issn:"0033-4448",name:"Purchasing"},"puri.ee":{issn:"1406-0043",name:"Purjetaja"},"putnamcountycourier.com":{name:"Putnam County Courier"},"putnamcountyrecord.com":{name:"Putnam County Record"},"putnampresstimes.com":{name:"Putnam County Press"},"putnamsentinel.com":{name:"Putnam County Sentinel"},"pvmonews.com":{name:"Portageville Missourian-News"},"pvnews.com":{name:"Peninsula News"},"pvtimes.com":{name:"Pahrump Valley Times"},"pvtrib.com":{name:"Prescott Valley Tribune"},"pyongyangtimes.com.kp":{name:"The Pyongyang Times",oclc:"7713208"},"qchron.com":{name:"Queens Chronicle"},"qcsunonline.com":{name:"Quay County Sun"},"qctimes.com":{name:"Quad City Times"},"qgazette.com":{name:"Queens Gazette"},"qns.com":{name:"QNS"},"qsaltlake.com":{name:"QSaltLake"},"quaboagcurrent.turley.com":{name:"Quaboag Current"},"quadrant.org.au":{issn:"0033-5002",name:"Quadrant"},"queenannenews.com":{name:"Queen Anne & Magnolia News"},"queenstribune.com":{name:"Queens Tribune"},"quillnewspaper.com":{name:"Hancock County Quill"},"quoddytides.com":{name:"Quoddy Tides"},"racingpost.com":{issn:"0968-3364",name:"Racing Post"},"rafnews.co.uk":{issn:"0035-8614",name:"RAF News",oclc:"474096693"},"rafu.com":{name:"Rafu Shimpo"},"rainscountyleader.com":{name:"Rains County Leader"},"raleigh.quepasanoticias.com":{name:"Que Pasa"},"rallshe.com":{name:"Ralls County Herald-Enterprise"},"ramonasentinel.com":{name:"Ramona Sentinel"},"ranchland-news.com":{name:"Ranchland News"},"ranchocordovaindependent.com":{name:"Rancho Cordova Grapevine Independent",oclc:"31217426"},"ranchosantafereview.com":{name:"Rancho Santa Fe Review"},"randolphcountyheraldtribune.com":{name:"Randolph County Herald Tribune"},"randomlengthsnews.com":{name:"Random Lengths News"},"rangerreview.com":{name:"Ranger Review"},"rankincn.com":{name:"Rankin County News"},"rantoulpress.com":{name:"Rantoul Press"},"rappnews.com":{name:"Rappahannock News"},"ravallirepublic.com":{name:"Ravalli Republic"},"ravenanews.com":{name:"Ravena News-Herald"},"rawlinstimes.com":{name:"Daily Times"},"raymondville-chronicle.com":{name:"Chronicle-News"},"raynetoday.com":{name:"Rayne Acadian Tribune"},"rblandmark.com":{name:"Landmark"},"rcnky.com":{name:"River City News"},"rcreader.com":{name:"River Cities Reader"},"rdrnews.com":{name:"Roswell Daily Record"},"readexpress.com":{issn:"1947-2099",name:"Express"},"readingeagle.com":{name:"Eagle"},"readthebee.com":{name:"Sellwood Bee",oclc:"55663345"},"record-eagle.com":{name:"Record-Eagle"},"record-herald.com":{name:"Greensburg Record-Herald"},"recordbulletin.com":{name:"Prosser Record-Bulletin"},"recordcourier.com":{name:"Record-Courier"},"recorder.com":{name:"Recorder"},"recordernews.com":{name:"Recorder Online"},"recorderonline.com":{name:"Porterville Recorder"},"recordgazette.net":{name:"Record Gazette"},"recordherald.com":{name:"Record Herald"},"recordnet.com":{name:"Record"},"recordonline.com":{name:"Times Herald-Record"},"recordpub.com":{name:"Record-Courier"},"recordreporter.com":{name:"Phoenix Record Reporter"},"recordstar.com":{name:"Nueces County Record Star"},"redbluffdailynews.com":{name:"Red Bluff Daily News"},"reddeeradvocate.com":{issn:"0832-4379",name:"Red Deer Advocate"},"redding.com":{name:"Record Searchlight"},"redeyechicago.com":{name:"RedEye"},"redfieldpress.com":{name:"Redfield Press"},"redlandsdailyfacts.com":{name:"Redlands Daily Facts"},"redoakexpress.com":{name:"Red Oak Express"},"redriverminer.com":{name:"Red River Miner"},"redrocknews.com":{name:"Sedona Red Rock News"},"redwoodtimes.com":{name:"Redwood Times"},"reedleyexponent.com":{name:"Reedley Exponent"},"reflector.com":{name:"Daily Reflector"},"reflejos.com":{name:"Reflejos"},"reformer.com":{name:"Brattleboro Reformer"},"register-herald.com":{name:"Register-Herald"},"register-news.com":{name:"Register-News"},"register-pajaronian.com":{name:"Register-Pajaronian"},"register.turley.com":{name:"Ludlow Register"},"registercitizen.com":{name:"Register Citizen"},"registerguard.com":{name:"Register-Guard"},"registerherald.com":{name:"Register-Herald"},"registerstar.com":{name:"Hudson Register-Star"},"reinbeckcourier.com":{name:"Reinbeck Courier"},"reminderusa.net":{name:"Cumberland County Reminder"},"rentonreporter.com":{name:"Renton Reporter"},"rep-am.com":{name:"Waterbury Republican"},"reporter-times.com":{name:"Reporter Times"},"reporter.net":{name:"Reporter"},"reporterandfarmer.com":{name:"Reporter & Farmer"},"reporterherald.com":{name:"Daily Reporter-Herald"},"reporternews.com":{name:"Abilene Reporter News"},"repubblica.it":{issn:"0390-1076",name:"la Repubblica",oclc:"642673598"},"republican-eagle.com":{name:"Republican Eagle"},"republican-me.com":{name:"Aroostook Republican"},"republican-times.com":{name:"Republican Times"},"republicanherald.com":{name:"Republican-Herald"},"republictimes.net":{name:"Republic-Times"},"resorter.com":{name:"Straitsland Resorter"},"reston-connection.com":{name:"Reston Connection"},"reuters.com":{name:"Reuters"},"reviewatlas.com":{name:"Daily Review Atlas"},"reviewonline.com":{name:"Review"},"reviewtimes.com":{name:"Review Times"},"rheaheraldnews.com":{name:"Herald-News"},"rhinelanderdailynews.com":{issn:"0746-5866",name:"The Rhinelander Daily News"},"rhinotimes.com":{name:"Rhino Times"},"richfieldreaper.com":{name:"Richfield Reaper"},"richlandtoday.com":{name:"Richland Beacon-News"},"richmond-dailynews.com":{name:"Richmond News"},"richmond.com":{name:"Richmond Times-Dispatch"},"richmondregister.com":{name:"Richmond Register"},"ridgecrestca.com":{name:"Daily Independent"},"ridgwayrecord.com":{name:"Ridgway Record"},"riograndesun.com":{name:"Rio Grande Sun"},"ripleybee.com":{name:"Ripley Bee"},"riverdalepress.com":{name:"Riverdale Press"},"riverfronttimes.com":{name:"Riverfront Times"},"riverheadnewsreview.timesreview.com":{name:"Riverhead News Review"},"rivernewsonline.com":{name:"Northwoods River News"},"riverpressnews.com":{name:"Fort Benton River Press"},"riverreporter.com":{name:"River Reporter"},"rivertowns.net":{name:"Richmond News"},"rivertownsenterprise.net":{name:"Rivertowns Enterprise"},"roanecounty.com":{name:"Roane County News"},"roanoke-chowannewsherald.com":{name:"Roanoke-Chowan News Herald"},"roanoke.com":{name:"Roanoke Times"},"robconews.com":{name:"Robertson County News"},"robdailynews.com":{name:"Robinson Daily News"},"robesonian.com":{name:"Robesonian"},"rochellenews-leader.com":{name:"Rochelle News-Leader"},"rochesterlavoz.com":{name:"La Voz Rochester"},"rochsent.com":{name:"Rochester Sentinel"},"rockawave.com":{name:"Wave of Long Island"},"rockdalecitizen.com":{name:"Rockdale Citizen"},"rockdalereporter.com":{name:"Rockdale Reporter"},"rocket-courier.com":{name:"Rocket-Courier"},"rockfordsquire.com":{name:"Rockford Squire"},"rockinghamnow.com":{issn:"1541-3349",name:"Reidsville Review"},"rocklandtimes.com":{name:"Rockland County Times",oclc:"9889767"},"rockportpilot.com":{name:"Rockport Pilot"},"rockrivertimes.com":{name:"Rock River Times"},"rockwallheraldbanner.com":{name:"Herald Banner"},"rockymounttelegram.com":{name:"Rocky Mount Telegram"},"rogueriverpress.com":{name:"Rogue River Press"},"rollcall.com":{name:"Roll Call",oclc:"44314138"},"rollingthunderexpress.com":{name:"Rolling Thunder Express"},"romesentinel.com":{name:"Rome Sentinel"},"roscovoice.com":{name:"County Voice"},"rosemounttownpages.com":{name:"Rosemount Town Pages"},"rosevilletoday.com":{name:"Rocklin & Roseville Today"},"roslyn-news.com":{name:"Roslyn News"},"rossmoornews.com":{name:"Rossmoor News"},"roundupweb.com":{name:"Sidney Roundup"},"royalgazette.com":{name:"The Royal Gazette",oclc:"36836340"},"rp.pl":{issn:"0208-9130",name:"Rzeczpospolita",oclc:"264077858"},"rrdailyherald.com":{name:"Daily Herald"},"rrecord.com":{name:"Rappahannock Record"},"rrhgazette.com":{name:"Gazette"},"rrobserver.com":{name:"Observer"},"rrstar.com":{name:"Rockford Register Star",oclc:"5004029"},"ruidosonews.com":{name:"Ruidoso News"},"rumfordfallstimes.com":{name:"Rumford Falls Times"},"runnermag.ca":{issn:"1916-8241",name:"The Runner"},"rushvillerepublican.com":{name:"Rushville Republican"},"rustonleader.com":{name:"Ruston Daily Leader"},"rutherfordreader.com":{name:"Rutherford Reader"},"rutlandherald.com":{name:"Rutland Herald"},"sabethaherald.com":{name:"Sabetha Herald"},"sabinetoday.com":{name:"Sabine Index"},"sacbee.com":{issn:"0890-5738",name:"The Sacramento Bee",oclc:"37706143"},"sacgazette.com":{name:"Gazette"},"sacobserver.com":{issn:"0036-2212",name:"The Sacramento Observer"},"sacurrent.com":{name:"San Antonio Current"},"sagharborexpress.com":{name:"Sag Harbor Express"},"sailor.mnsun.com":{name:"Sun-Sailor"},"saladovillagevoice.com":{name:"Salado Village Voice"},"salamancapress.com":{name:"Salamanca Press"},"salem-news.com":{name:"Salem News"},"salemleader.com":{name:"Salem Leader"},"salemnews.com":{name:"Salem News"},"salemnews.net":{name:"Salem News"},"salemweeklynews.com":{name:"Salem Weekly"},"salisburypost.com":{name:"Salisbury Post"},"saludastandard-sentinel.com":{name:"Saluda Standard Sentinel"},"salyersvilleindependent.com":{name:"Salyersville Independent"},"samessenger.com":{name:"St. Albans Messenger"},"sameway.com.au":{issn:"1839-7913",name:"Sameway Magazine",oclc:"435778508"},"sampan.org":{name:"Sampan"},"samplenewsgroup.com":{name:"Tyrone Daily Herald",oclc:"12684400"},"sanbenitocountytoday.com":{name:"Hollister Free Lance"},"sanclementetimes.com":{name:"Times"},"sandiego.informermg.com":{name:"San Diego Informer"},"sandiegodowntownnews.com":{name:"Downtown News"},"sandiegoreader.com":{name:"San Diego Reader"},"sandiegouniontribune.com":{name:"San Diego Union-Tribune"},"sandmountainreporter.com":{name:"Sand Mountain Reporter"},"sanduskyregister.com":{name:"Sandusky Register"},"sanfordherald.com":{name:"Sanford Herald"},"sangrechronicle.com":{name:"Sangre de Cristo Chronicle"},"sanibel-captiva-islander.com":{name:"Sanibel-Captiva Islander"},"sanilaccountynews.mihomepaper.com":{name:"Sanilac County News"},"sanjuanislander.com":{name:"San Juan Islander"},"sanluisobispo.com":{name:"Tribune"},"sanmarcosrecord.com":{name:"San Marcos Daily Record"},"sanmarinotribune.com":{name:"San Marino Tribune"},"sansabanews.com":{name:"San Saba News & Star"},"santacruzsentinel.com":{name:"Santa Cruz Sentinel"},"santafenewmexican.com":{name:"Santa Fe New Mexican"},"santamariasun.com":{name:"Santa Maria Sun"},"santamariatimes.com":{name:"Santa Maria Times"},"santansun.com":{name:"SanTan Sun News"},"santapaulatimes.com":{name:"Santa Paula Times"},"saratogatodaynewspaper.com":{name:"Saratoga Today"},"saratogian.com":{issn:"1071-4448",name:"The Saratogian"},"saudigazette.com.sa":{issn:"1319-0326",name:"Saudi Gazette"},"saukherald.com":{name:"Sauk Centre Herald"},"savannahherald.net":{name:"Savannah Herald"},"savannahnow.com":{name:"Morning News"},"savannahtribune.com":{name:"Savannah Tribune"},"sbsun.com":{name:"San Bernardino Sun"},"scanews.com":{name:"Chinese American News"},"scdailypress.com":{name:"Silver City Daily Press"},"scdemocratonline.com":{name:"Sullivan County Democrat"},"scenenewspaper.com":{name:"Scene"},"scenicrangenewsforum.com":{name:"Scenic Range NewsForum"},"schweizermonat.ch":{issn:"0036-7400",name:"Schweizer Monat"},"scledger.net":{name:"Sanders County Ledger"},"scmr.com":{issn:"1521-9747",name:"Supply Chain Management Review"},"scnews.com":{name:"Stanwood Camano News"},"scnow.com":{name:"Morning News"},"scotsman.com":{issn:"0307-5850",name:"The Scotsman",oclc:"614655655"},"scsun-news.com":{name:"Sun News"},"scsuntimes.com":{name:"Sun-Times"},"sctimes.com":{name:"St. Cloud Times"},"sctonline.net":{name:"Scott County Times"},"sdcitybeat.com":{name:"CityBeat"},"sdcnn.com":{name:"Community News Network"},"sdnews.com":{name:"Community News Group"},"sdtranscript.com":{name:"San Diego Daily Transcript"},"sdvoice.info":{name:"Voice & Viewpoint"},"seacoastecho.com":{name:"Sea Coast Echo"},"seacoastonline.com":{issn:"0746-6218",name:"The Portsmouth Herald"},"seafordstar.com":{name:"Seaford Star"},"sealynews.com":{name:"Sealy News"},"seattlepi.com":{name:"Seattle Post Intelligencer"},"seattletimes.com":{issn:"0745-9696",name:"The Seattle Times",oclc:"9198928"},"seattleweekly.com":{issn:"0898-0845",name:"Seattle Weekly",oclc:"17527271"},"secaucushomenews.com":{name:"Secaucus Home News"},"sedaliademocrat.com":{name:"Sedalia Democrat"},"sedona.biz":{name:"Sedona.biz"},"seeleylake.com":{name:"Pathfinder"},"seguingazette.com":{name:"Gazette"},"sekvoice.com":{name:"Cherokee County News-Advocate"},"seminoleproducer.com":{name:"Seminole Producer"},"seminolesentinel.com":{name:"Seminole Sentinel"},"semissourian.com":{name:"Southeast Missourian"},"seniornewsga.com":{name:"Senior News"},"seniorspectrumnewspaper.com":{name:"Senior Spectrum"},"sent-trib.com":{name:"Sentinel Tribune"},"sentinel-echo.com":{name:"Sentinel-Echo"},"sentinel-standard.com":{name:"Ionia Sentinel Standard"},"sentinelandenterprise.com":{name:"Sentinel & Enterprise"},"sentinelnews.com":{name:"Sentinel-News"},"sentinelnews.net":{name:"Sentinel News"},"sentinelnow.com":{name:"Upper Dauphin Sentinel"},"sentinelsource.com":{name:"Keene Sentinel"},"sentineltimes.com":{name:"Galena Sentinel Times"},"sentry.mainelymediallc.com":{name:"South Portland Sentry"},"sequimgazette.com":{name:"Sequim Gazette"},"sequoyahcountytimes.com":{name:"Sequoyah County Times"},"servedaily.com":{name:"Serve Daily"},"sespesun.com":{name:"Sespe Sun"},"sevendaysvt.com":{name:"Seven Days"},"sewaneemessenger.com":{name:"Mountain Messenger"},"sewardindependent.com":{name:"Seward County Independent"},"sfbayview.com":{name:"Bay View"},"sfbg.com":{issn:"0036-4096",name:"San Francisco Bay Guardian"},"sfchronicle.com":{name:"Chronicle"},"sfexaminer.com":{name:"San Francisco Examiner"},"sfreporter.com":{name:"Santa Fe Reporter"},"sfweekly.com":{name:"San Francisco Weekly"},"sgvtribune.com":{name:"SGVTribune"},"shannoncountycurrentwave.com":{name:"Shannon County Current Wave"},"sharonherald.com":{name:"Herald"},"shawanoleader.com":{name:"Shawano Leader"},"shawneedispatch.com":{name:"Shawnee Dispatch"},"sheboyganpress.com":{name:"Sheboygan Press"},"shelburnenews.com":{name:"Shelburne News"},"shelbycountyreporter.com":{name:"Shelby County Reporter"},"shelbynews.com":{name:"Shelbyville News"},"shelbystar.com":{name:"Shelby Star"},"shelbyvilledailyunion.com":{name:"Shelbyville Daily Union"},"sheltonherald.com":{name:"Shelton Herald"},"shepherdexpress.com":{name:"Shepherd Express"},"shingletownridgeridernews.com":{name:"Ridge Rider News"},"shobannews.com":{name:"Sho-Ban News"},"shorelinetimes.com":{name:"Shore Line Times"},"shorenewstoday.com":{name:"Shore News"},"shoshonenewspress.com":{name:"Shoshone News Press"},"shreveporttimes.com":{name:"Times"},"sidneydailynews.com":{name:"Sidney Daily News"},"sidneyherald.com":{name:"Sidney Herald-Leader"},"sierrabooster.com":{name:"Sierra Booster"},"sierracountyprospect.org":{name:"Sierra County Prospect"},"sierrastar.com":{name:"Sierra Star"},"sierrasun.com":{name:"Sierra Sun"},"siftingsherald.com":{name:"Daily Siftings Herald"},"signal-enterprise.com":{name:"Wabaunsee County Signal Enterprise"},"signal.baldwincity.com":{name:"Baldwin City Signal"},"signalamerican.org":{name:"Signal American"},"signalscv.com":{name:"Valley Signal"},"signaturenewspaper.com":{name:"The Signature"},"sigourneynewsreview.com":{name:"Sigourney News-Review"},"silive.com":{name:"Staten Island Advance"},"silverbelt.com":{name:"Arizona Silver Belt"},"silvertonstandard.com":{name:"Silverton Standard"},"simpsoncounty.ms":{name:"Magee Courier"},"siouxcountynews.com":{name:"Sioux County Capital-Democrat"},"siskiyoudaily.com":{name:"Siskiyou Daily News"},"sissetoncourier.com":{name:"Sisseton Courier"},"sitkasentinel.com":{name:"Daily Sitka Sentinel"},"sitnews.us":{name:"Sitnews"},"sjnewsonline.com":{name:"St. John News"},"sjvalley-times.com":{name:"St. John Valley Times"},"skagwaynews.com":{issn:"0745-872X",name:"The Skagway News",oclc:"9526778"},"skyhidailynews.com":{name:"Sky-Hi News"},"skyvalleychronicle.com":{name:"Sky Valley Chronicle"},"skywrighter.com":{name:"Wright-Patterson Skywrighter"},"sleepyeyenews.com":{name:"Herald Dispatch"},"sleepyeyeonline.com":{name:"Sleepy Eye Online"},"sltrib.com":{issn:"0746-3502",name:"The Salt Lake Tribune"},"smcitizen.com":{name:"South Marion Citizen"},"smdailypress.com":{name:"Daily Press"},"smdp.com":{name:"Daily Press"},"smh.com.au":{issn:"0312-6315",name:"The Sydney Morning Herald",oclc:"226369741"},"smithfieldtimes.com":{name:"Times"},"smithvilleherald.com":{name:"Smithville Herald"},"smithvillereview.com":{name:"Smithville Review"},"smmercury.com":{name:"Mercury"},"smmirror.com":{name:"Santa Monica Mirror"},"smobserved.com":{name:"Santa Monica Observer"},"smokymountainnews.com":{name:"Smoky Mountain News"},"snyderdailynews.com":{name:"Snyder Daily News"},"soanmeeraas.in":{issn:"2348-8107",name:"Soan Meeraas"},"soaznewsx.com":{name:"So. Arizona News-Examiner"},"socialiststudies.org.uk":{issn:"2398-1512",name:"Socialist Studies",oclc:"723683944"},"soledadbee.com":{name:"Soledad Bee"},"soloneconomist.com":{name:"Solon Economist"},"sonomanews.com":{name:"Sonoma Index-Tribune"},"sonomasun.com":{name:"Sonoma Valley Sun"},"sonomawest.com":{name:"Sonoma West Times and News"},"sonorannews.com":{name:"Sonoran News"},"sooeveningnews.com":{name:"Evening News"},"soprissun.com":{name:"Sopris Sun"},"sourcenewspapers.com":{name:"The Source"},"south.pasadenanow.com":{name:"South Pasadena Now"},"southalabamian.com":{name:"South Alabamian"},"southbeltleader.com":{name:"South Belt-Ellington Leader"},"southbendtribune.com":{name:"South Bend Tribune"},"southcoasttoday.com":{name:"South Coast Today"},"southcountytimes.com":{name:"South County Times"},"southeastsun.com":{name:"Southeast Sun"},"southernstandard.com":{name:"Southern Standard"},"southforktines.com":{name:"South Fork Tines"},"southhaventribune.net":{name:"South Haven Tribune"},"southhillenterprise.com":{name:"South Hill Enterprise"},"southingtoncitizen.com":{name:"Southington Citizen"},"southingtonobserver.com":{name:"Southington Observer"},"southlakepress.com":{name:"South Lake Press"},"southplatteindependent.net":{name:"South Platte Independent"},"southplattesentinel.com":{name:"South Platte Sentinel"},"southreporter.com":{name:"South Reporter"},"southsidebusiness.com":{name:"Southside Business"},"southsidemessenger.com":{name:"Southside Messenger"},"southsidervoice.com":{name:"Southsider Voice"},"southstrandnews.com":{name:"South Strand News"},"southtownswny.presspublisher.us":{name:"South Buffalo News"},"southwesttimes.com":{name:"Southwest Times"},"southwhidbeyrecord.com":{name:"South Whidbey Record"},"southwicksuffieldnews.turley.com":{name:"Southwick Suffield News"},"spacenews.com":{issn:"1046-6940",name:"SpaceNews"},"sparkstrib.com":{name:"Sparks Tribune"},"spartaindependent.com":{name:"Sparta Independent"},"spcitytimes.com":{name:"Stevens Point City-Times"},"speakinoutweeklynews.com":{name:"Speakin' Out News"},"spearmanreporter.com":{name:"Reporter-Statesman"},"spencerdailyreporter.com":{name:"Daily Reporter"},"spencereveningworld.com":{name:"Spencer Evening World"},"spencermagnet.com":{name:"Spencer Magnet"},"spinalcolumnonline.com":{name:"Spinal Column Newsweekly"},"spiritofjefferson.com":{name:"Spirit of Jefferson"},"spobserver.com":{name:"South Plainfield Observer"},"spokesman-recorder.com":{name:"Minnesota Spokesman-Recorder"},"spotlightnews.com":{name:"Spotlight Newspapers"},"springfieldap.com":{name:"Springfield Advance-Press"},"springfieldconnection.com":{name:"Springfield Connection"},"springfieldnewssun.com":{name:"Springfield News-Sun"},"springsvalleyherald.com":{name:"Springs Valley Herald"},"srpressgazette.com":{name:"Santa Rosa Press Gazette"},"ss-times.com":{name:"Southside Times"},"ssentinel.com":{name:"Southside Sentinel"},"ssnewstelegram.com":{name:"News Telegram"},"sspmt.com":{name:"Silver State Post"},"standard-democrat.com":{name:"Standard Democrat"},"standard-gazette.com":{name:"Fairfax Standard-Gazette Messenger"},"standard.net":{name:"Standard-Examiner"},"standardbanner.com":{name:"Standard Banner"},"standardspeaker.com":{name:"Standard-Speaker"},"staplesworld.com":{name:"Staples World"},"star-herald.com":{name:"Rock County Star Herald"},"star-telegram.com":{name:"Fort Worth Star-Telegram"},"staradvertiser.com":{name:"Honolulu Star Advertiser"},"starandwave.com":{name:"Cape May Star and Wave"},"starbeacon.com":{name:"Ashtabula Star Beacon"},"starcourier.com":{name:"Star Courier"},"stardem.com":{name:"Star Democrat"},"starfl.com":{name:"Star"},"stargazette.com":{name:"Star-Gazette"},"starherald-me.com":{name:"Presque Isle Star-Herald"},"starherald.com":{name:"Scottsbluff Star-Herald"},"starherald.net":{name:"Star Herald"},"starheraldnews.com":{name:"Pocahontas Star Herald"},"starkvilledailynews.com":{name:"Starkville Daily News"},"starnewsga.com":{name:"Star News"},"starnewsgroup.com":{name:"Coast Star"},"starnewsonline.com":{name:"Star-News Online"},"starobserver.com.au":{issn:"0819-5129",name:"Star Observer",oclc:"26727666"},"startribune.com":{name:"Star Tribune",oclc:"43369847"},"starvalleyindependent.com":{name:"Star Valley Independent"},"stategazette.com":{name:"State Gazette"},"stateportpilot.com":{name:"State Port Pilot"},"statesboroherald.com":{name:"Statesboro Herald"},"statesman.com":{name:"Austin American Statesman"},"statesmanexaminer.com":{name:"Statesman-Examiner"},"statesville.com":{name:"Record & Landmark"},"staugustine.com":{name:"St. Augustine Record"},"stauntonstartimes.com":{name:"Staunton Star-Times"},"steamboattoday.com":{name:"Steamboat Pilot"},"steelcountrybee.com":{name:"Steel-Country Bee"},"stegenherald.com":{name:"Herald"},"sterlingbulletin.net":{name:"Sterling Bulletin"},"steubencourier.com":{name:"Steuben Courier"},"stgeorgeutah.com":{name:"St. George News"},"stiglernews.com":{name:"Stigler News Sentinel"},"stignacenews.com":{name:"St. Ignace News"},"stillwatercountynews.com":{name:"Stillwater County News"},"stillwatergazette.com":{name:"Stillwater Gazette"},"stjamesnews.com":{name:"St. James Plaindealer"},"stlamerican.com":{name:"St. Louis American"},"stltoday.com":{name:"St. Louis Post-Dispatch"},"stonecountyenterprise.com":{name:"Stone County Enterprise"},"stonecountyleader.com":{name:"Stone County Leader"},"stormlake.com":{name:"Storm Lake Times"},"stormlakepilottribune.com":{name:"Pilot Tribune"},"stowsentry.com":{name:"Stow Sentry"},"stratfordstar.com":{name:"Stratford Star"},"stripes.com":{issn:"0894-8542",name:"Stars and Stripes",oclc:"8777119"},"strohmnews.com":{name:"West Vigo Times"},"stuttgartdailyleader.com":{name:"Daily Leader"},"stuyspec.com":{name:"The Spectator",oclc:"48552566"},"stwnewspress.com":{name:"Stillwater News-Press"},"styleweekly.com":{name:"Style Weekly"},"suarakarya.id":{issn:"0215-3130",name:"Suara Karya",oclc:"34583137"},"sudouest.fr":{issn:"1760-6454",name:"Sud Ouest"},"suffolknewsherald.com":{name:"News Herald"},"suffolktimes.timesreview.com":{name:"Suffolk Times"},"suindependent.com":{name:"Independent"},"sullivan-times.com":{name:"Daily Times"},"sulphurdailynews.com":{name:"Southwest Daily News"},"sulphurtimes.com":{name:"Sulphur Times-Democrat"},"summersvillebeacon.com":{name:"Summersville Beacon"},"summitdaily.com":{name:"Summit Daily News"},"sumnerpress.com":{name:"Sumner Press"},"sumtercountytimes.com":{name:"Sumter County Times"},"sun-sentinel.com":{name:"Sun-Sentinel"},"sun.turley.com":{name:"Holyoke Sun"},"sunad.com":{name:"Sun Advocate"},"sunburynews.com":{name:"Sunbury News"},"suncommercial.com":{name:"Vincennes Sun-Commercial"},"sundayguardianlive.com":{name:"The Sunday Guardian",oclc:"801791742"},"sundaymail.co.uk":{issn:"0307-5877",name:"Sunday Mail"},"sunews.net":{name:"Southern Utah News"},"sungazette.com":{name:"Sun-Gazette"},"sunherald.com":{name:"Sun Herald"},"sunnews.org":{name:"Seal Beach Sun"},"sunpatriot.com":{name:"Waconia Patriot"},"sunshineexpressmedia.com":{name:"Sunshine Express"},"sunstatepost.com":{name:"SunState Post"},"suntelegraph.com":{name:"Sidney Sun Telegraph"},"superiorne.com":{name:"Superior Express"},"superiortelegram.com":{name:"Daily Telegram"},"surreynowleader.com":{issn:"0841-8764",name:"The Surrey Now News Leader"},"sussexcountian.com":{name:"Sussex Countian"},"sussexcountypost.com":{name:"Sussex County Post"},"suwanneedemocrat.com":{name:"Suwannee Democrat"},"svd.se":{issn:"1101-2412",name:"Svenska Dagbladet"},"svherald.com":{name:"Sierra Vista Herald"},"swartzcreekview.mihomepaper.com":{name:"Swartz Creek View"},"swcbulletin.com":{name:"County Bulletin"},"sweethomenews.com":{name:"New Era"},"sweetwaterreporter.com":{name:"Sweetwater Reporter"},"swflorida.blogspot.com":{name:"Southwest Florida Online"},"swiftcountymonitor.com":{name:"Swift County Monitor"},"swiowanewssource.com":{name:"SW Iowa News Source"},"swnewsherald.com":{name:"Chicago Southwest News-Herald"},"swoknews.com":{name:"Lawton Constitution"},"swordofthelord.com":{issn:"0039-7547",name:"The Sword of the Lord"},"swtimes.com":{name:"Times-Record"},"swvatoday.com":{name:"Richlands News Press"},"sylvaniaadvantage.com":{name:"Sylvania AdVantage"},"sylvaniatelephone.com":{name:"Sylvania Telephone"},"syossetjerichotribune.com":{name:"Syosset Jericho Tribune"},"syvnews.com":{name:"Santa Ynez Valley News"},"t-g.com":{name:"Shelbyville Times-Gazette"},"tacomadailyindex.com":{name:"Tacoma Daily Index"},"tacomaweekly.com":{name:"Tacoma Weekly"},"taftindependent.com":{name:"Taft Independent"},"taftmidwaydriller.com":{name:"Midway Driller"},"tagesspiegel.de":{issn:"1865-2263",name:"Der Tagesspiegel"},"tahlequahdailypress.com":{name:"Tahlequah Daily Press"},"takomavoice.com":{name:"Takoma Voice"},"tallahassee.com":{name:"Tallahassee Democrat"},"tallahatchienews.ms":{name:"Charleston Sun-Sentinel"},"tallasseetribune.com":{name:"Tallassee Tribune"},"tamesidereporter.com":{issn:"1746-949X",name:"Tameside Reporter"},"tampabay.com":{name:"Tampa Bay Times"},"taosnews.com":{name:"Taos News"},"taterecord.com":{name:"Tate Record"},"tauntongazette.com":{name:"Taunton Daily Gazette"},"taylorpress.net":{name:"Taylor Daily Press"},"taylorsvilletimes.com":{name:"Taylorsville Times",oclc:"38452787"},"taz.de":{issn:"0931-9085",name:"Die Tageszeitung"},"tbo.com":{name:"Tampa Tribune"},"tbrnews.com":{name:"Beach Reporter"},"tbrnewsmedia.com":{name:"Times Beacon Record"},"tctimes.com":{name:"Tri-County Times"},"tdn-net.com":{name:"Troy Daily News"},"tdn.com":{name:"Daily News"},"tdtnews.com":{name:"Temple Daily Telegram"},"teaweekly.com":{name:"Tea Weekly"},"techetoday.com":{name:"Teche News"},"technicianonline.com":{name:"Technician",oclc:"15522593"},"tecumsehchieftain.com":{name:"Tecumseh Chieftain"},"tecumsehherald.com":{name:"Tecumseh Herald"},"tehachapinews.com":{name:"Tehachapi News"},"tehrantimes.com":{issn:"1563-860X",name:"Tehran Times",oclc:"49910014"},"telegram.com":{name:"Telegram & Gazette"},"telegramnews.net":{name:"Detroit Telegram"},"telegraph.co.uk":{issn:"9976-1874",name:"The Sunday Telegraph",oclc:"436617202"},"telegraphindia.com":{name:"The Telegraph",oclc:"271717941"},"telluridenews.com":{name:"Telluride Daily Planet"},"tennessean.com":{name:"Tennessean"},"terrelltribune.com":{name:"Terrell Tribune"},"terrytribune.com":{name:"Terry Tribune"},"tes.com":{issn:"0040-7887",name:"Times Educational Supplement"},"tessinerzeitung.ch":{issn:"1660-9697",name:"Tessiner Zeitung",oclc:"173873821"},"tetonvalleynews.net":{name:"Teton Valley News"},"teutopolispress.com":{name:"Teutopolis Press"},"texasblazenews.com":{name:"Texas Blaze News"},"texasborderbusiness.com":{name:"Texas Border Business"},"texastribune.org":{name:"The Texas Tribune",oclc:"465271495"},"the-daily-record.com":{name:"Daily Record"},"the-dispatch.com":{name:"Dispatch"},"the-independent-news.com":{name:"Independent News"},"the-leader.com":{name:"Leader"},"the-messenger.com":{name:"Messenger"},"the-review.com":{name:"The Review"},"the419.com":{name:"the419"},"theacornonline.com":{name:"Acorn"},"theadamscountyrecord.com":{name:"Adams County Record"},"theadanews.com":{name:"Ada Evening News"},"theadvancenews.com":{name:"Advance Newspaper"},"theadvertiser.com":{name:"Daily Advertiser"},"theadvocate.com":{name:"Advocate"},"theaegis.com":{name:"The Aegis",oclc:"20304891"},"theage.com.au":{issn:"0312-6307",name:"The Age"},"thealbanynews.net":{name:"Albany News"},"thealmatimes.com":{name:"Alma Times"},"thealpenanews.com":{name:"Alpena News"},"thealpinesun.com":{name:"Alpine Sun"},"theandersonnews.com":{name:"Anderson News"},"theantlersamerican.com":{name:"Antlers American"},"theapopkachief.com":{name:"Apopka Chief"},"thearabtribune.com":{name:"Arab Tribune"},"thearcticsounder.com":{name:"Arctic Sounder"},"thearknewspaper.com":{name:"Ark"},"theartnewspaper.com":{issn:"0960-6556",name:"The Art Newspaper"},"theatlantavoice.com":{name:"Atlanta Voice"},"theaustinvillager.com":{name:"Villager"},"theava.com":{name:"Anderson Valley Advertiser"},"thebanker.com":{issn:"0005-5395",name:"The Banker"},"thebanner.com":{name:"Jackson County Banner"},"thebanneronline.com":{name:"Knightstown Banner"},"thebeacon.net":{name:"Beacon"},"thebellevilletelescope.com":{name:"Belleville Telescope"},"thebelzonibanner.com":{name:"Belzoni Banner"},"thebisbeeobserver.com":{name:"Bisbee Observer"},"theblacksheartimes.com":{name:"Blackshear Times"},"theborneopost.com":{name:"The Borneo Post",oclc:"488800331"},"thebrackencountynews.com":{name:"Bracken County News"},"thebradentontimes.com":{issn:"2155-2495",name:"The Bradenton Times",oclc:"615600168"},"thebraziltimes.com":{name:"Brazil Times"},"thebridgeportnews.com":{name:"Bridgeport News"},"thebridgeweekly.com":{name:"Bridge Weekly"},"thebrightonblade.com":{name:"Standard Blade"},"thebristolbaytimes.com":{name:"Bristol Bay Times"},"thebrunswicknews.com":{name:"Brunswick News"},"thebuffalocentertribune.com":{name:"Buffalo Center Tribune"},"thebulletinweekly.com":{name:"Compton Bulletin"},"thebusinessfarmer.com":{name:"Business Farmer"},"thebusinesstimes.com":{name:"Business Times"},"thecabin.net":{name:"Log Cabin Democrat"},"thecairocitizen.com":{name:"Cairo Citizen"},"thecalaisadvertiser.com":{name:"Calais Advertiser"},"thecalifornian.com":{name:"Californian"},"thecallnews.com":{name:"Call News"},"thecantoncitizen.com":{name:"Canton Citizen"},"thecapistranodispatch.com":{name:"Dispatch"},"thecarrollnews.com":{name:"Carroll News"},"thecarthaginian.com":{name:"Carthaginian"},"thecatalinaislander.com":{name:"Catalina Islander"},"thecatoctinbanner.com":{name:"Catoctin Banner"},"thecentralvirginian.com":{name:"Central Virginian News"},"thechampionnewspaper.com":{name:"The Champion"},"thecharlottepost.com":{name:"Charlotte Post"},"thecharlotteweekly.com":{name:"South Charlotte Weekly"},"thecherokeean.com":{name:"Cherokeean Herald"},"thechicagocitizen.com":{name:"Chicago Citizen"},"thechiefleader.com":{name:"Chief Leader"},"thechiefnews.com":{name:"Clatskanie Chief"},"thechowchillanews.com":{name:"Chowchilla News"},"thechronicle-news.com":{name:"Chronicle News"},"thechronicle.com":{name:"Chronicle"},"thechronicleofmtjuliet.com":{name:"Mt Juliet Chronicle"},"thechronicleonline.com":{name:"St. Helens Chronicle"},"thecincinnatiherald.com":{name:"Cincinnati Herald"},"thecitizen-times.com":{name:"Scottsville Citizen-Times"},"thecitizen.com":{name:"Citizen"},"theclarion.org":{name:"Scottsboro Clarion"},"theclarionnews.com":{name:"Clarion News"},"theclaycountynews.com":{name:"Clay County News"},"theclaytonrecordonline.com":{name:"Clayton Record"},"theclaytontribune.com":{name:"Clayton Tribune"},"theclevelandcurrent.com":{name:"Cleveland Current"},"theclinchcountynews.com":{name:"Clinch County News"},"theclintoncourier.net":{name:"Clinton Courier"},"thecoalfieldprogress.com":{name:"Coalfield Progress"},"thecoastnews.com":{name:"Coast News"},"thecolletonian.com":{name:"Colletonian"},"thecolumbiastar.com":{name:"Columbia Star"},"thecolumbusgazette.com":{name:"Columbus Gazette"},"thecommercialrecord.com":{name:"Saugatuck Commercial Record"},"thecommunityvoice.com":{name:"Community Voice"},"theconcordianonline.com":{name:"Concordian"},"thecordovatimes.com":{name:"Cordova Times"},"thecortlandnews.com":{name:"Cortland News"},"thecountypress.mihomepaper.com":{name:"County Press"},"thecountyrecord.net":{name:"County Record"},"thecourier.com":{name:"Courier"},"thecourierexpress.com":{name:"Courier Express"},"thecouriertimes.com":{name:"Courier Times"},"thecr.com":{name:"Commercial Review"},"thecreole.com":{name:"Creole"},"thecreswellchronicle.com":{name:"Creswell Chronicle"},"thecrier.net":{name:"Dunwoody Crier"},"thedahloneganugget.com":{name:"The Dahlonega Nugget",oclc:"18486914"},"thedailycitizen.com":{name:"Daily Citizen"},"thedailycourier.com":{name:"Grants Pass Daily Courier",oclc:"37297316"},"thedailymail.net":{name:"Catskill Daily Mail"},"thedailynews.cc":{name:"Daily News"},"thedailynewsonline.com":{issn:"1536-6901",name:"The Daily News",oclc:"9659012"},"thedailyrecord.com":{name:"Daily Record"},"thedailyreporter.com":{name:"Daily Reporter"},"thedailyreporteronline.com":{name:"Daily Reporter"},"thedailyreview.com":{name:"Daily Review"},"thedailysentinel.com":{name:"Daily Sentinel"},"thedailystar.com":{name:"Daily Star"},"thedailytimes.com":{name:"Daily Times"},"thedailyworld.com":{name:"Daily World"},"thedalharttexan.com":{name:"Dalhart Texan"},"thedalleschronicle.com":{name:"Dalles Chronicle"},"thedartmouth.com":{issn:"0199-9931",name:"The Dartmouth"},"theday.com":{issn:"0744-0499",name:"The Day"},"thedcn.com.au":{issn:"2203-1464",name:"Daily Cargo News"},"thedcregister.com":{name:"Dearborn County Register"},"thederrick.com":{name:"Derrick"},"thedestinlog.com":{name:"Destin Log"},"thedickinsonpress.com":{issn:"1049-6718",name:"The Dickinson Press",oclc:"1566609"},"thedigitalcourier.com":{name:"Daily Courier"},"thediplomat.com":{issn:"1446-697X",name:"The Diplomat"},"thedowneypatriot.net":{name:"Downey Patriot"},"thedpost.com":{name:"Dominion Post"},"theduplintimes.com":{name:"Duplin Times"},"thedutchharborfisherman.com":{name:"Dutch Harbor Fisherman"},"theeagle.com":{name:"Bryan-College Station Eagle"},"theeaglegroveeagle.com":{name:"Eagle Grove Eagle"},"theenterprise.net":{name:"Enterprise"},"theet.com":{name:"Exponent Telegram"},"theeveningleader.com":{name:"St. Marys Evening Leader"},"theeveningtimes.com":{name:"Evening Times"},"theexaminer.com":{name:"Examiner"},"theexponent.com":{name:"Exponent"},"theexpressnewspaper.com":{name:"Express Newspaper"},"thefacts.com":{name:"Facts"},"thefencepost.com":{name:"Fence Post"},"thefloridastar.com":{name:"Florida Star"},"theflume.com":{name:"The Flume"},"thefoothillsfocus.com":{name:"Foothills Focus"},"thefoothillspaper.com":{name:"Foothills Paper"},"theforecaster.net":{name:"Forecaster"},"thefranklinnewspost.com":{name:"Franklin News-Post"},"thefranklinpress.com":{name:"Franklin Press"},"thefranklintimes.com":{name:"Franklin Times"},"thegallatincountynews.com":{name:"Gallatin County News"},"thegardenisland.com":{name:"Garden Island"},"thegardnernews.com":{name:"Gardner News"},"thegatewayonline.ca":{issn:"0845-356X",name:"The Gateway"},"thegayword.com":{name:"Word"},"thegazette.com":{name:"Gazette"},"thegeorgiastar.com":{name:"Georgia Star"},"thegilmanstar.com":{name:"Gilman Star"},"thegleaner.com":{name:"Gleaner"},"theglobeandmail.com":{issn:"0319-0714",name:"The Globe and Mail"},"thegraftonnews.com":{name:"Grafton News"},"thegrandviewherald.com":{name:"Grandview Herald"},"thegraphic-advocate.com":{name:"Graphic-Advocate"},"thegraphic.org":{name:"Johnson County Graphic"},"thegrawn.com":{name:"TheGRAWN"},"thegrundyregister.com":{name:"Grundy Register"},"theguardian.com":{issn:"0261-3077",name:"The Guardian",oclc:"60623878"},"thegurdontimes.com":{name:"Gurdon Times"},"thehamiltonherald-news.com":{name:"Hamilton Herald-News"},"thehammontonnews.com":{name:"Hammonton News"},"thehartwellsun.com":{name:"Hartwell Sun"},"thehawaiiherald.com":{name:"Hawaii Herald"},"thehawkeye.com":{name:"Hawk Eye"},"thehendrickspioneer.com":{name:"Pioneer"},"theherald-news.com":{name:"Herald News"},"theheraldtimes.com":{name:"Rangely Herald Times"},"thehill.com":{name:"The Hill"},"thehindubusinessline.com":{issn:"0971-7528",name:"Business Line",oclc:"456162874"},"thehinsdalean.com":{name:"Hinsdalean"},"thehoosiertopics.com":{name:"Hoosier Topics"},"thehour.com":{name:"The Norwalk Hour",oclc:"27905790"},"theifp.ca":{issn:"1208-5995",name:"The Independent and Free Press"},"theindependent.com":{name:"Daily Independent"},"theindependentobserver.com":{name:"Independent-Observer"},"theindnews.com":{name:"Eagle Independent News"},"theinquisitor.com":{name:"Shreveport Inquisitor"},"theintell.com":{name:"Intelligencer"},"theintelligencer.com":{name:"Edwardsville Intelligencer"},"theintelligencer.net":{name:"Wheeling News-Register"},"theintermountain.com":{name:"Inter-Mountain"},"theirregular.com":{name:"Kingfield Irregular"},"theislanderonline.com":{name:"Saint Simons Islander"},"theitem.com":{name:"Item"},"thejakartapost.com":{issn:"0215-3432",name:"The Jakarta Post"},"thejenatimes.net":{name:"Jena Times"},"thejewishadvocate.com":{issn:"1077-2995",name:"The Jewish Advocate"},"thekansan.com":{name:"Newton Kansan"},"thelafayettesun.com":{name:"LaFayette Sun"},"thelakenews.com":{name:"Calvert City Lake News"},"thelaketoday.com":{name:"Lake Today"},"thelancasternews.com":{name:"Lancaster News"},"theland.com.au":{issn:"0023-7523",name:"The Land"},"thelandmark.com":{name:"Landmark"},"thelcn.com":{name:"Livingston County News"},"theleafchronicle.com":{name:"Leaf-Chronicle"},"theledger.com":{name:"Ledger"},"thelegalintelligencer.com":{issn:"0277-495X",name:"The Legal Intelligencer"},"thelelandprogress.com":{name:"Leland Progress"},"thelickingnews.com":{name:"Licking News"},"thelocalpaper.com":{name:"Local Paper"},"theloomisnews.com":{name:"Loomis News"},"themaconcountynews.com":{name:"Macon County News"},"themaineedge.com":{name:"The Maine Edge"},"themccrearyvoice.com":{name:"McCreary County Voice"},"themcgeheetimes.com":{name:"Times-News"},"themercury.com":{name:"Mercury"},"themercury.com.au":{issn:"1039-9992",name:"The Mercury"},"themeteor.com":{name:"Crystal Springs Meteor"},"themillennews.com":{name:"Millen News"},"themillerpress.com":{name:"Miller Press"},"themindencourier.com":{name:"Minden Courier"},"theminneotamascot.com":{name:"Minneota Mascot"},"themississippilink.com":{name:"Mississippi Link"},"themonitor.com":{name:"Monitor"},"themonitor.net":{name:"Monitor"},"themonroetimes.com":{name:"Monroe Times"},"themonticellonews.com":{name:"Monticello News"},"themoorecountynews.com":{name:"Moore County News"},"themoreheadnews.com":{name:"Morehead News"},"themorningsun.com":{name:"Morning Sun"},"themountaineagle.com":{name:"Mountain Eagle"},"themountaineer.villagesoup.com":{name:"The Mountaineer"},"themountainmail.com":{name:"Mountain Mail"},"themountainpress.com":{name:"Mountain Press"},"themtnear.com":{name:"Nederland Mountain-Ear"},"thenational.scot":{issn:"2057-231X",name:"The National"},"thenebraskasignal.com":{name:"Nebraska Signal"},"theneighbornewspapers.com":{name:"South Bay News"},"theneweuropean.co.uk":{issn:"2398-8762",name:"The New European"},"thenews-gazette.com":{name:"News-Gazette"},"thenews-messenger.com":{name:"News-Messenger"},"thenews.com.pk":{issn:"1563-9479",name:"The News International"},"thenewsandfarmer.com":{name:"News and Farmer"},"thenewsdispatch.com":{name:"News-Dispatch"},"thenewsdispatch.net":{name:"Seneca News-Dispatch"},"thenewsenterprise.com":{name:"News-Enterprise"},"thenewsguard.com":{name:"News Guard"},"thenewsharonsun.com":{name:"New Sharon Sun"},"thenewsherald.com":{name:"News Herald"},"thenewsleaders.net":{name:"Sartell Newsleader"},"thenewsobserver.com":{name:"News Observer"},"thenewsrecord.com":{name:"News and Record"},"thenewsstar.com":{name:"News-Star"},"thenewstribune.com":{issn:"1073-5860",name:"The News Tribune"},"thenigeriastandard.com.ng":{name:"The Nigeria Standard",oclc:"184922211"},"thenjsentinel.com":{name:"Franklin Township Sentinel"},"thenoise.us":{name:"Noise"},"thenortheastgeorgian.com":{name:"Northeast Georgian Online"},"thenorthernecho.co.uk":{issn:"2043-0442",name:"The Northern Echo"},"thenorthernlight.com":{name:"Northern Light"},"thenorthfieldnews.com":{name:"Northfield News"},"thenorthwestern.com":{name:"The Northwestern"},"theoaklandpress.com":{name:"Oakland Press"},"theobserver.com":{name:"Kearny Observer"},"theohiocountynews.com":{name:"Ohio County News"},"theolathenews.com":{name:"Olathe Daily News"},"theolympian.com":{name:"Olympian"},"theonion.com":{name:"Onion"},"theosakisreview.com":{name:"Osakis Review"},"thepamliconews.com":{name:"Pamlico News"},"thepampanews.com":{name:"Pampa News"},"thepaper24-7.com":{name:"Paper of Montgomery Co."},"thepaperofwabash.com":{name:"Wabash Paper"},"theparisnews.com":{name:"Paris News"},"thepenobscottimes.com":{name:"Penobscot Times"},"thepeoplesentinel.com":{name:"People-Sentinel"},"thepeoplestribune.com":{name:"People's Tribune"},"theperrisprogress.com":{name:"Perris Progress & Perris City News"},"theperrychief.com":{name:"Perry Chief"},"thephoto-news.com":{name:"Monroe Photo News"},"thepilot.com":{name:"Pilot"},"thepilotnews.com":{name:"Pilot News"},"thepitchkc.com":{name:"The Pitch",oclc:"820204079"},"theplainsman.com":{name:"Auburn Plainsman"},"theplainviewnews.com":{name:"Plainview News"},"thepolicenews.net":{name:"The Police News"},"theportugalnews.com":{issn:"0873-7746",name:"The Portugal News"},"thepostandmail.com":{name:"Post & Mail"},"thepostnewspaper.net":{name:"Post"},"thepostsearchlight.com":{name:"Bainbridge Post-Searchlight"},"theprairiestar.com":{name:"Prairie Star"},"thepress-sentinel.com":{name:"Press-Sentinel"},"thepresstribune.com":{name:"Press Tribune"},"theprogressnews.com":{name:"Progress"},"theprogressortimes.com":{name:"Progressor Times"},"theprogressreview.co":{name:"Progress-Review"},"theprovince.com":{issn:"0839-3311",name:"The Province"},"thepublicopinion.com":{name:"Public Opinion"},"thequincysun.com":{name:"Quincy Sun"},"therandolphleader.com":{name:"Randolph Leader"},"theravennanews.com":{name:"Ravenna News"},"thereader.com":{name:"Omaha Reader"},"therecord.com":{issn:"0824-5150",name:"Waterloo Region Record"},"therecordandthursdayprinting.com":{name:"Record & Thursday Printing"},"therecorderonline.com":{name:"Recorder"},"therecordherald.com":{name:"The Record Herald",oclc:"13048395"},"therecordlive.com":{name:"County Record"},"thereddingpilot.com":{name:"Redding Pilot"},"thereflector.com":{name:"Reflector"},"theregionalnews.com":{name:"Regional News"},"thereminder.com":{name:"Reminder"},"thereporter.com":{name:"Reporter"},"thereporteronline.com":{name:"Reporter"},"thereporteronline.net":{name:"Reporter"},"therepublic.com":{issn:"1086-0649",name:"The Republic"},"therepublicannews.com":{name:"Republican Newspaper"},"theretrospect.com":{name:"Retrospect"},"thereviewnewspapers.com":{name:"Review Newspapers"},"theridgefieldpress.com":{name:"Ridgefield Press"},"theriverbanknews.com":{name:"Riverbank News"},"therogersvillereview.com":{name:"Rogersville Review"},"therolladailynews.com":{name:"Rolla Daily News"},"thesalemnewsonline.com":{name:"Salem News"},"thesalinepost.com":{name:"Saline Post"},"thesangerherald.com":{name:"Sanger Herald"},"thesantamonicastar.com":{name:"Santa Monica Star"},"thescarboroughnews.co.uk":{issn:"2050-5159",name:"Scarborough News"},"theseniorvoice.net":{name:"Fort Collins Senior Voice"},"thesentinel.com":{name:"Sentinel Newspapers"},"thesewardphoenixlog.com":{name:"Seward Phoenix Log"},"theshelleypioneer.com":{name:"Shelley Pioneer"},"thesheridanheadlight.com":{name:"Sheridan Headlight"},"thesheridanpress.com":{name:"Sheridan Press"},"theshoalsnews.com":{name:"Shoals News"},"thesidellreporter.com":{name:"Sidell Reporter"},"thesiuslawnews.com":{name:"Siuslaw News"},"theskanner.com":{name:"Skanner"},"thesmokymountaintimes.com":{name:"Smoky Mountain Times"},"thesmstar.com":{name:"Saint Marys Star"},"thesnaponline.com":{name:"Stanly News & Press"},"thesocialist.org.au":{issn:"2206-320X",name:"The Socialist"},"thesomervillenews.com":{name:"Somerville Times"},"thesounder.com":{name:"Sounder"},"thesouthern.com":{name:"Southern Illinoisan"},"thesouthernreporter.co.uk":{issn:"1355-9346",name:"The Southern Reporter",oclc:"500155716"},"thesouthernstandard.com":{name:"Standard"},"thespectrum.com":{name:"Spectrum"},"thespringfieldsun.com":{name:"Springfield Sun"},"thestage.co.uk":{issn:"0038-9099",name:"The Stage"},"thestar.com":{name:"Toronto Star"},"thestarnews.com":{name:"Chula Vista Star-News"},"thestarpress.com":{name:"Star Press"},"thestate.com":{issn:"0038-9994",name:"The State"},"thestatesman.com":{name:"The Statesman",oclc:"1772961"},"thestbernardvoice.com":{name:"St. Bernard Voice"},"thestokesnews.com":{name:"Stokes News"},"thestranger.com":{issn:"1935-9004",name:"The Stranger"},"thesturbridgevillager.com":{name:"Sturbridge Villager"},"thesuburban.com":{issn:"0226-9686",name:"The Suburban",oclc:"8663159"},"thesummervillenews.com":{name:"Summerville News"},"thesun.co.uk":{issn:"0307-2681",name:"The Sun",oclc:"723661694"},"thesunchronicle.com":{name:"Sun Chronicle"},"thesuntimes.com":{name:"Sun-Times"},"thesuntimesnews.com":{name:"Sun Times"},"thesylvaherald.com":{name:"Herald and Ruralite"},"thetablet.org":{issn:"0039-8845",name:"The Tablet"},"thetahoeweekly.com":{name:"Tahoe Weekly"},"thetallahasseenews.com":{name:"Tallahassee News"},"thetandd.com":{name:"Times & Democrat"},"thetd.com":{name:"Times Dispatch"},"thetelegraph.com":{issn:"0897-456X",name:"The Telegraph"},"thethomasvilletimes.com":{name:"Thomasville Times"},"thetimes-tribune.com":{name:"Times-Tribune"},"thetimes.co.uk":{issn:"0140-0460",name:"The Times"},"thetimes24-7.com":{name:"Times"},"thetimesherald.com":{name:"The Times Herald",oclc:"36177739"},"thetimesnews.com":{name:"Times-News"},"thetimestribune.com":{name:"Corbin Times Tribune"},"thetimesweekly.com":{name:"Times Weekly"},"thetoccoarecord.com":{name:"Toccoa Record"},"thetomahawk.com":{name:"Tomahawk"},"thetombstonenews.com":{name:"Tombstone News"},"thetown-crier.com":{name:"Northeast Arkansas Town Crier"},"thetowntalk.com":{name:"Alexandria Daily Town Talk"},"thetruecitizen.com":{name:"True Citizen"},"thetrumantribune.com":{name:"Truman Tribune"},"thetrussvillenews.com":{name:"Trussville News"},"thetundradrums.com":{name:"Tundra Drums"},"thetuskegeenews.com":{name:"Tuskegee News"},"theunion.com":{name:"Union"},"thevalleychronicle.com":{name:"Valley Chronicle"},"thevalleydispatch.com":{name:"Valley Dispatch"},"thevalleygazette.com":{name:"Valley Gazette"},"thevanhornadvocate.com":{name:"Van Horn Advocate"},"thevidette.com":{name:"Vidette"},"theviennatimes.com":{name:"Vienna Times"},"thevillagenews.com":{name:"Village News"},"thevillager.com":{issn:"0042-6202",name:"The Villager"},"thevillagereporter.com":{name:"Village Reporter"},"thevirginianreview.com":{name:"Virginian Review"},"thevitalvoice.com":{name:"Vital VOICE"},"thevoice.us":{name:"The Voice"},"thevoiceofkapolei.com":{name:"Voice of Kapolei"},"thevosm.net":{name:"Voice of South Marion"},"thevoyageurpress.com":{name:"McGregor Voyageur Press"},"thevsn.net":{name:"Valley Springs News"},"thevwindependent.com":{name:"Van Wert Independent"},"thewakullanews.com":{name:"Wakulla News"},"thewamegosmokesignal.com":{name:"Wamego Smoke Signal"},"thewandererpress.com":{issn:"1068-168X",name:"The Wanderer"},"thewashingtondailynews.com":{issn:"1057-7068",name:"Washington Daily News",oclc:"990784684"},"thewaynecountynews.com":{name:"Wayne Co. News"},"thewaynedalenews.com":{name:"Waynedale News"},"theweekender.com":{name:"Weekender"},"theweirstimes.com":{name:"Weirs Times"},"thewellingtonenterprise.com":{name:"Wellington Enterprise"},"thewest.com.au":{issn:"0312-6323",name:"The West Australian"},"thewesterlysun.com":{name:"Westerly Sun"},"thewesternnews.com":{name:"Western News"},"thewesterntimes.com":{name:"Western Times"},"thewestfieldnews.com":{name:"Westfield News"},"thewestonforum.com":{name:"Weston Forum"},"thewetumpkaherald.com":{name:"Wetumpka Herald"},"thewindhameagle.com":{name:"Windham Eagle"},"thewiregrassfarmer.com":{name:"Wiregrass Farmer"},"thewoodstockindependent.com":{name:"Woodstock Independent"},"theworldlink.com":{name:"World"},"thinkstewartville.com":{name:"Stewartville Star"},"thisweeknews.com":{name:"This Week"},"thnews.com":{name:"Times-Herald"},"thomastontimes.com":{name:"Thomaston Times"},"thonline.com":{name:"Telegraph Herald"},"threeriversnews.com":{name:"Commercial-News"},"thumbprintnews.com":{name:"ThumbPrint News"},"tidbitsflorida.com":{name:"Tidbits"},"tiftongazette.com":{name:"Tifton Gazette"},"tillamookheadlightherald.com":{name:"Headlight-Herald"},"timberjay.com":{name:"Timberjay"},"times-advocate.com":{name:"Times-Advocate"},"times-gazette.com":{name:"Times Gazette"},"times-georgian.com":{name:"Times Georgian"},"times-herald.com":{name:"Newnan Times-Herald"},"times-news.com":{name:"Cumberland Times-News"},"times-online.com":{name:"Times-Record"},"times-standard.com":{name:"Times-Standard"},"timesargus.com":{name:"Times-Argus"},"timesbulletin.com":{name:"Times-Bulletin"},"timescall.com":{name:"Daily Times-Call"},"timescitizen.com":{name:"Times-Citizen"},"timescourier.com":{name:"Times-Courier"},"timesdaily.com":{name:"Times Daily"},"timesenterprise.com":{name:"Times-Enterprise"},"timesfreepress.com":{name:"Chattanooga Times"},"timesgazette.com":{name:"Times-Gazette"},"timesherald.com":{name:"Times Herald"},"timesheraldonline.com":{name:"Vallejo Times-Herald"},"timesindicator.com":{name:"Times Indicator"},"timesleader.com":{issn:"0199-0519",name:"Times Leader"},"timesleader.net":{name:"Times Leader"},"timesleaderonline.com":{name:"Times Leader"},"timesnews.net":{name:"Kingsport Times-News"},"timesobserver.com":{name:"Warren Times Observer"},"timesofindia.com":{issn:"0971-8257",name:"The Times of India",oclc:"23379369"},"timesofisrael.com":{name:"The Times of Israel",oclc:"969749342"},"timesonline.com":{name:"Beaver County Times"},"timespublications.com":{name:"Times Publications"},"timesrecord.com":{name:"Times Record"},"timesrecordnews.com":{name:"Times Record News"},"timesreporter.com":{name:"Times Reporter"},"timesrepublican.com":{name:"Times-Republican"},"timessentinel.com":{name:"Times Sentinel"},"timestelegram.com":{name:"Times Telegram"},"timesunion.com":{name:"Times-Union"},"timesuniononline.com":{name:"Times-Union"},"timeswv.com":{name:"Times West Virginian"},"tinleyjunction.com":{name:"Tinley Junction"},"tipperarystar.ie":{issn:"1393-9084",name:"Tipperary Star",oclc:"885427118"},"tippgazette.com":{name:"Tippecanoe Gazette"},"tippnews.com":{name:"TippNews Daily"},"tiptonconservative.com":{name:"Tipton Conservative"},"titusvilleherald.com":{name:"Titusville Herald"},"tmnews.com":{name:"Bedford Times-Mail"},"tnebc.nwaonline.com":{name:"Times of Northeast Benton County"},"tni-news.com":{name:"Newman Independent"},"tnonline.com":{name:"Times News"},"tntribune.com":{name:"Tennessee Tribune"},"toacorn.com":{name:"Thousand Oaks Acorn"},"tobaccovalleynews.com":{name:"Tobacco Valley News"},"today.gm":{issn:"0796-157X",name:"Today Newspaper"},"toledoblade.com":{name:"The Blade",oclc:"12962717"},"toledocitypaper.com":{name:"Toledo City Paper"},"tomahawkleader.com":{name:"Tomahawk Leader"},"tombstoneepitaph.com":{issn:"2157-6777",name:"The Tombstone Epitaph"},"tompkinsvillenews.com":{name:"Tompkinsville News"},"tonganoxiemirror.com":{name:"Mirror"},"tonicanews.com":{name:"Tonica News"},"tooeleonline.com":{name:"Tooele Transcript"},"topangamessenger.com":{name:"Messenger"},"torontosun.com":{issn:"0837-3175",name:"Toronto Sun",oclc:"66653673"},"torringtontelegram.com":{name:"Telegram"},"townhall.com":{name:"Town Hall"},"townscountyherald.net":{name:"Towns County Herald"},"towntimes.com":{name:"Town Times"},"towntopics.com":{name:"Town Topics"},"trabajadores.cu":{issn:"0864-0432",name:"Trabajadores"},"traerstarclipper.com":{name:"Traer Star-Clipper"},"transylvaniatimes.com":{name:"The Transylvania Times",oclc:"13285957"},"travelweekly.com":{issn:"0041-2082",name:"Travel Weekly"},"trcmaine.org":{name:"Three Rivers News"},"trentonian.com":{name:"Trentonian"},"trentonsun.net":{name:"Trenton Sun"},"trftimes.com":{name:"Thief River Falls Times"},"tri-cityherald.com":{name:"Tri-City Herald"},"trib.com":{name:"Casper Star Tribune"},"tribdem.com":{name:"Tribune Democrat"},"tribecatrib.com":{name:"Tribeca Trib"},"triblive.com":{name:"Pittsburgh Tribune-Review"},"tribstar.com":{name:"Tribune-Star"},"tribtoday.com":{name:"Tribune Chronicle"},"tribtown.com":{name:"Seymour Tribune"},"tribunact.com":{name:"Tribuna"},"tribune-georgian.com":{name:"Tribune and Georgian"},"tribunecourier.com":{name:"Tribune Courier"},"tribuneledgernews.com":{name:"Cherokee Tribune Ledger"},"tribunemag.co.uk":{issn:"0041-2821",name:"Tribune"},"tricitytimes-online.com":{name:"Tri-City Times"},"tricitytrib.com":{name:"Tri-City Tribune"},"tricountycitizen.mihomepaper.com":{name:"Tri County Citizen"},"tricountyleader.com":{name:"Tri County Leader"},"tricountynews.mn":{name:"Tri County News"},"tricountysentry.com":{name:"Tri County Sentry"},"tricountytimes.com":{name:"Slater Tri County Times"},"triplicate.com":{name:"Del Norte Daily Triplicate"},"troublesomecreektimes.com":{name:"Troublesome Creek Times"},"troymessenger.com":{name:"Troy Messenger"},"troyrecord.com":{name:"Record"},"trumbulltimes.com":{name:"Trumbull Times"},"trybuna.com.pl":{issn:"0867-0536",name:"Trybuna",oclc:"73601540"},"tryondailybulletin.com":{name:"Tryon Daily Bulletin"},"ttgmedia.com":{issn:"0262-4397",name:"Travel Trade Gazette"},"tucson.com":{issn:"0888-546X",name:"Arizona Daily Star"},"tucsoncitizen.com":{name:"Tucson Citizen Archives"},"tucsonlocalmedia.com":{name:"Explorer Newspapers"},"tucsonsentinel.com":{name:"Tucson Sentinel",oclc:"1002000067"},"tucsonweekly.com":{name:"Tucson Weekly"},"tularevoice.com":{name:"Tulare Voice"},"tullahomanews.com":{name:"Tullahoma News"},"tulsaworld.com":{issn:"2330-7234",name:"Tulsa World"},"tunicatimes.com":{name:"Tunica Times"},"turnagaintimes.com":{name:"Turnagain Times"},"tuscaloosanews.com":{name:"Tuscaloosa News"},"tuscolatoday.com":{name:"Tuscola County Advertiser"},"twin-citynews.com":{name:"Twin-City News"},"twincities.com":{name:"St. Paul Pioneer Press"},"twincitytimes.com":{name:"Twin City Times"},"twinvalleytimes.com":{name:"Twin Valley Times"},"tworivertimes.com":{name:"Two River Times"},"twptimes.com":{name:"Saginaw Township Times"},"tylerpaper.com":{name:"Tyler Morning Telegraph"},"tylertribute.com":{name:"Tyler Tribute"},"udayavani.com":{name:"Udayavani",oclc:"801791748"},"ukrweekly.com":{issn:"0273-9348",name:"The Ukrainian Weekly",oclc:"7042061"},"unidossc.com":{name:"La Prensa Excelsior"},"union-bulletin.com":{name:"Walla Walla Union-Bulletin"},"uniondailytimes.com":{name:"Union Daily Times"},"uniondemocrat.com":{name:"Union Democrat"},"unioneagle.com":{name:"Princeton Union-Eagle"},"unionleader.com":{name:"Union Leader"},"unionnewsdaily.com":{name:"Union News Daily"},"unionrecorder.com":{name:"Union-Recorder"},"unionvillerepublicanonline.com":{name:"Unionville Republican"},"universitytimes.ie":{issn:"2009-261X",name:"The University Times"},"unt.se":{issn:"1104-0173",name:"Upsala Nya Tidning"},"upstreamonline.com":{issn:"0807-6472",name:"Upstream",oclc:"223512583"},"uptownexaminer.com":{name:"Uptown San Diego Examiner"},"urbanacitizen.com":{name:"Urbana Daily Citizen"},"usatoday.com":{issn:"0734-7456",name:"USA Today"},"utecountrynews.com":{name:"Ute Country News"},"uticaod.com":{name:"Observer-Dispatch"},"uticaphoenix.net":{issn:"2165-0233",name:"Utica Phoenix"},"utimes.pitt.edu":{name:"University Times",oclc:"2161325"},"uusilahti.fi":{issn:"0358-8483",name:"Uusi Lahti"},"uvaldeleadernews.com":{name:"Uvalde Leader News"},"vagazette.com":{name:"Virginia Gazette"},"vaildaily.com":{name:"Vail Daily"},"valdezstar.net":{name:"Valdez Star"},"valdostadailytimes.com":{name:"Valdosta Daily Times"},"valleyadvocate.com":{name:"Valley Advocate"},"valleybreeze.com":{name:"Valley Breeze"},"valleycenter.com":{name:"Valley Roadrunner"},"valleymorningstar.com":{name:"Valley Morning Star"},"valleynewstoday.com":{name:"Valley News"},"valleyplanet.com":{name:"Valley Planet"},"valleyrecord.com":{name:"Snoqualmie Valley Record"},"valleyreporter.com":{name:"Valley Reporter"},"valleysentinel.com":{name:"Danville Valley Sentinel"},"valleytimes-news.com":{name:"Valley Times-News"},"valleytimesidaho.com":{name:"Meridian Valley Times"},"valleywidenewspaper.com":{name:"Valleywide Newspapers"},"vanburencountydem.com":{name:"Van Buren County Democrat"},"vancouversun.com":{issn:"0832-1299",name:"The Vancouver Sun"},"vandaliadrummernews.com":{name:"Vandalia Drummer News"},"vandalialeader.com":{name:"Vandalia Leader"},"vanzandtnews.com":{name:"Van Zandt News"},"variety.com":{name:"Variety Daily"},"varsity.co.uk":{issn:"1758-4442",name:"Varsity"},"vashonbeachcomber.com":{name:"Island Beachcomber"},"vaterland.li":{issn:"1818-9202",name:"Liechtensteiner Vaterland",oclc:"870441231"},"vcnewsreview.com":{name:"Vilas County News-Review"},"vcreporter.com":{name:"Ventura County Reporter"},"vcstar.com":{name:"Ventura County Star"},"venicegondolier.com":{name:"Venice Gondolier"},"verdenews.com":{name:"Verde Independent"},"vermiliontoday.com":{name:"Abbeville Meridional"},"vermontwoman.com":{name:"Vermont Woman"},"vernonpublishing.com":{name:"Vernon Publishing Newspapers"},"vfpnews.com":{name:"Valley Free Press"},"vicksburgpost.com":{name:"Vicksburg Post"},"victoriaadvocate.com":{name:"Advocate"},"victoriagazette.com":{name:"Victoria Gazette"},"vidaenelvalle.com":{name:"Fresno Vida en el Valle"},"viennaconnection.com":{name:"Vienna Connection"},"villagerpublishing.com":{name:"Villager"},"villagevoice.com":{issn:"0042-6180",name:"The Village Voice"},"vindy.com":{name:"Vindicator Online"},"vineyardgazette.com":{name:"Vineyard Gazette"},"virginiamn.com":{name:"Mesabi Daily News"},"virginiastar.net":{name:"Virginia Star"},"visaliatimesdelta.com":{name:"Visalia Times-Delta"},"visionhispanausa.com":{name:"Vision Hispana"},"vivelohoy.com":{name:"Vivelo Hoy"},"vjesnik.hr":{issn:"0350-3305",name:"Vjesnik"},"vnews.com":{issn:"1072-6179",name:"Valley News"},"voice-tribune.com":{name:"Louisville Voice-Tribune"},"voicenews.com":{name:"Voice"},"voicenewsnebraska.com":{name:"Hickman Voice News"},"voiceoftheozarks.net":{name:"Voice of the Ozarks"},"voir.ca":{issn:"0849-5920",name:"Voir"},"volkskrant.nl":{name:"de Volkskrant",oclc:"781575477"},"vp-mi.com":{name:"Clark Fork Valley Press"},"vt-world.com":{name:"World"},"vvdailypress.com":{name:"Daily Press"},"wacotrib.com":{name:"Waco Tribune-Herald"},"wahpetondailynews.com":{name:"Wahpeton Daily News"},"waitsburgtimes.com":{name:"Waitsburg Times"},"wakefieldexpress.co.uk":{issn:"0961-2459",name:"Wakefield Express"},"wakeweekly.com":{name:"Wake Weekly"},"waldronnews.com":{name:"Waldron News"},"walkermn.com":{name:"Pilot-Independent"},"wallowa.com":{name:"Wallowa County Chieftain"},"waltonsun.com":{name:"Walton Sun"},"waltontribune.com":{name:"Walton Tribune"},"wanderer.com":{name:"Wanderer"},"wapakdailynews.com":{name:"Wapakoneta Daily News"},"warerivernews.turley.com":{name:"Ware River News"},"warrencountyrecord.com":{name:"Warren County Record"},"warrenrecord.com":{name:"Warren Record"},"warrensheaf.com":{name:"Warren Sheaf"},"warricknews.com":{name:"Standard"},"warwickonline.com":{name:"Warwick Beacon"},"wasatchwave.com":{name:"Wasatch Wave"},"washingtonblade.com":{issn:"0278-9892",name:"Washington Blade"},"washingtoncitypaper.com":{name:"Washington City Paper"},"washingtonexaminer.com":{name:"Washington Examiner"},"washingtonpost.com":{issn:"0190-8286",name:"The Washington Post",oclc:"2269358"},"washingtontimes.com":{name:"Washington Times"},"washingtontimesreporter.com":{name:"Washington Times-Reporter"},"washparkprofile.com":{name:"Washington Park Profile"},"washtimesherald.com":{name:"Times Herald"},"wataugademocrat.com":{name:"Watauga Democrat"},"waterbororeporter.com":{name:"Waterboro Reporter"},"waterburyobserver.org":{name:"Waterbury Observer"},"waterfronttimes.com":{name:"Waterfront Times"},"watertowndailytimes.com":{name:"Watertown Daily Times"},"watfordcitynd.com":{name:"McKenzie County Farmer"},"waukonstandard.com":{name:"Waukon Standard"},"waunetabreeze.com":{name:"Wauneta Breeze"},"wausaudailyherald.com":{name:"Wausau Daily Herald"},"wausharaargus.com":{name:"Waushara Argus"},"wavenewspapers.com":{name:"Los Angeles Wave"},"waxahachietx.com":{name:"Waxahachie Daily Light"},"waynecountynews.com":{name:"Wayne County News"},"wayneindependent.com":{name:"Wayne Independent"},"waynepost.com":{name:"Wayne Post"},"waynesvilledailyguide.com":{name:"Daily Guide"},"wcel.nwaonline.com":{name:"Washington Co. Enterprise-Leader"},"wcexaminer.com":{name:"Wyoming County Examiner"},"wcfcourier.com":{name:"Waterloo-Cedar Falls Courier"},"wcmessenger.com":{name:"Wise County Messenger"},"wcmla.net":{name:"Woodruff Co. Monitor Leader Advocate"},"wcoutlook.com":{name:"Wayne County Outlook"},"wcregisteronline.com":{name:"Washburn County Register"},"wctrib.com":{name:"West Central Tribune"},"wdtimes.com":{name:"Watertown Daily Times"},"weatherforddemocrat.com":{name:"Weatherford Democrat"},"webbweekly.com":{name:"Webb Weekly"},"webelpuente.com":{name:"El Puente"},"webstercountycitizen.com":{name:"Webster County Citizen"},"websterkirkwoodtimes.com":{name:"Times Newspapers"},"websterprogresstimes.com":{name:"Webster Progress Times"},"weeklychoice.com":{name:"Weekly Choice"},"weeklycitizen.com":{name:"Weekly Citizen"},"weeklynews.net":{name:"Peabody Lynnfield Weekly"},"weeklypacket.com":{name:"Weekly Packet"},"weeklyrecordherald.com":{name:"Weekly Record Herald"},"weeklyview.net":{name:"Weekly View"},"weirtondailytimes.com":{name:"Weirton Daily Times"},"wellingtondailynews.com":{name:"The Wellington Daily News",oclc:"12686472"},"wellsvilledaily.com":{name:"Wellsville Daily Reporter"},"welt.de":{issn:"0173-8437",name:"Die Welt"},"weltwoche.ch":{issn:"0043-2660",name:"Die Weltwoche"},"wenatcheeworld.com":{name:"Wenatchee World"},"westbendnews.net":{name:"West Bend News"},"westbranchtimes.com":{name:"West Branch Times"},"westchesterguardian.com":{name:"Westchester Guardian"},"westendword.com":{name:"West End Word"},"westernherald.com":{name:"Western Herald",oclc:"28756413"},"westernitasca.com":{name:"Western Itasca Review"},"westernnebraskaobserver.net":{name:"Western Nebraska Observer"},"westernslopewatchdog.com":{name:"Western Slope Watchdog"},"westerntelegraph.co.uk":{issn:"0962-659X",name:"Western Telegraph"},"westernweekender.com.au":{name:"Western Weekender",oclc:"222030802"},"westessextribune.net":{name:"West Essex Tribune"},"westfargopioneer.com":{name:"West Fargo Pioneer"},"westfieldrepublican.com":{issn:"1071-1074",name:"Westfield Republican",oclc:"10035175"},"westhartfordnews.com":{name:"West Hartford News"},"westhawaiitoday.com":{name:"West Hawaii Today"},"westkentuckystar.com":{name:"West Kentucky Star"},"westlibertyindex.com":{name:"West Liberty Index"},"westlife.northcoastnow.com":{name:"Westlife"},"westmilfordmessenger.com":{name:"West Milford Messenger"},"westminsterheraldnews.com":{name:"Westminster Herald"},"westminsterwindow.com":{name:"Westminster Window"},"westondemocrat.com":{issn:"2373-1052",name:"Weston Democrat",oclc:"11200866"},"westplainsdailyquill.net":{name:"West Plains Daily Quill"},"westport-news.com":{name:"Westport News"},"westsacramentosun.com":{name:"West Sacramento Sun"},"westseattleherald.com":{name:"West Seattle Herald"},"westsenecabee.com":{name:"West Seneca Bee"},"westsherburnetribune.com":{name:"West Sherburne Tribune"},"westsideconnect.com":{name:"Westside Connect"},"westsidespirit.com":{name:"Manhattan West Side Spirit"},"westsidetoday.com":{name:"Westside Today"},"westvalleyview.com":{name:"West Valley View"},"westword.com":{name:"Westword"},"wetmountaintribune.com":{name:"Wet Mountain Tribune"},"wheatridgetranscript.com":{name:"Wheat Ridge Transcript"},"whidbeyexaminer.com":{name:"Whidbey Examiner"},"whidbeynewstimes.com":{name:"Whidbey News-Times"},"whig.com":{name:"Quincy Herald-Whig"},"whitecountynews.net":{name:"White County News"},"whitefishpilot.com":{name:"Whitefish Pilot"},"whitehallledger.com":{name:"Whitehall Ledger"},"whiterivercurrent.com":{name:"White River Current"},"whitesalmonenterprise.com":{name:"Enterprise"},"whitewaterpub.com":{name:"Brookville American-Democrat"},"whittierdailynews.com":{name:"Whittier Daily News"},"whvoice.com":{name:"West Haven Voice"},"wickenburgsun.com":{name:"Wickenburg Sun"},"wigantoday.net":{issn:"2514-0922",name:"Wigan Post"},"wilbrahamhampdentimes.turley.com":{name:"Wilbraham-Hampden Times"},"wilcoonline.com":{name:"Georgetown Advocate"},"wilcosun.com":{name:"Williamson County Sun"},"willcoxrangenews.com":{name:"Arizona Range News"},"williamsnews.com":{name:"Williams News"},"williamsondailynews.com":{name:"Williamson Daily News"},"williamsonherald.com":{name:"Williamson Herald"},"williamspioneerreview.com":{name:"Williams Pioneer Review"},"willistonherald.com":{name:"Williston Herald",oclc:"1769899"},"willistonpioneer.com":{name:"Williston Pioneer Sun News"},"willitsnews.com":{name:"Willits News"},"willowglentimes.com":{name:"Willow Glen Times"},"willspointchronicle.com":{name:"Wills Point Chronicle"},"wilmettebeacon.com":{name:"Wilmette Beacon"},"wilsoncountynews.com":{name:"Wilson County News"},"wilsonpost.com":{name:"Wilson Post"},"wilsontimes.com":{name:"Wilson Daily Times"},"wiltonbulletin.com":{name:"Wilton Bulletin"},"winchesternewsgazette.com":{name:"News-Gazette"},"windomnews.com":{name:"Cottonwood County Citizen"},"windowontheclearwater.com":{name:"Window on the Clearwater"},"windsorstar.com":{issn:"0839-2277",name:"Windsor Star"},"windycitytimes.com":{name:"Windy City Times"},"winfieldamerican.com":{name:"Winfield American"},"winnetkacurrent.com":{name:"Winnetka Current"},"winnipegfreepress.com":{issn:"0828-1785",name:"Winnipeg Free Press",oclc:"1607085"},"winnipegsun.com":{issn:"0711-3773",name:"Winnipeg Sun"},"winnparishenterprise.com":{name:"Winn Parish Enterprise"},"winonadailynews.com":{name:"Winona Daily News"},"winonapost.com":{name:"Winona Post"},"winonatimes.com":{name:"Carrollton Conservative"},"wintersetmadisonian.com":{name:"Winterset Madisonian"},"wintersexpress.com":{name:"Winters Express"},"winthroptranscript.com":{name:"Winthrop Transcript"},"wirtschaftsblatt.at":{name:"WirtschaftsBlatt",oclc:"47862186"},"wiscassetnewspaper.com":{name:"Wiscasset Newspaper"},"wisconsinrapidstribune.com":{name:"Daily Tribune"},"wkcurrent.com":{name:"West Kerr Current"},"wmicentral.com":{name:"White Mountain Independent"},"wolfpointherald.com":{name:"Wolf Point Herald"},"woodburybulletin.com":{name:"Woodbury Bulletin"},"woodfordsun.com":{name:"Woodford Sun"},"woodsideherald.com":{name:"Woodside Herald"},"woodwardnews.net":{name:"Woodward News"},"woonsocketcall.com":{name:"Woonsocket Call"},"woroni.com.au":{issn:"1326-2793",name:"Woroni"},"wpnews.com":{name:"West Point News"},"wrangellsentinel.com":{name:"Wrangell Sentinel"},"wranglernews.com":{name:"Wrangler News"},"wrightstownspirit.com":{name:"Kaukauna Times-Villager"},"wschronicle.com":{name:"Chronicle"},"wsj.com":{name:"The Wall Street Journal",issn:"0099-9660"},"wvgazettemail.com":{name:"Gazette-Mail"},"wvnewsviews.com":{name:"Wimberley Valley News & Views"},"wvobserver.com":{name:"WV Observer"},"wweek.com":{name:"Willamette Week"},"wyborcza.pl":{issn:"0860-908X",name:"Gazeta Wyborcza"},"wylienews.com":{name:"Wylie News"},"wylr.net":{name:"Wyoming Livestock Roundup"},"wymorearborstate.com":{name:"Wymore Arbor State"},"wyodaily.com":{name:"Northern Wyoming Daily News"},"wyomingnews.com":{name:"Wyoming Tribune Eagle"},"xeniagazette.com":{name:"Xenia Gazette"},"yadkinripple.com":{name:"Yadkin Ripple"},"yakimaherald.com":{name:"Yakima Herald-Republic"},"yalnews.com":{name:"North Mississippi Herald"},"yamei-today.com":{name:"Asian American Today"},"yankton.net":{name:"Press & Dakotan"},"yazooherald.net":{name:"Yazoo Herald"},"ycobserver.com":{name:"Yankton County Observer"},"ydr.com":{name:"York Daily Record"},"yelmonline.com":{name:"Nisqually Valley News"},"yesweekly.com":{name:"Yes! Weekly"},"yflyer.com":{name:"Yankee Flyer"},"yorkdispatch.com":{name:"York Dispatch"},"yorknewstimes.com":{name:"News Times"},"yorkshireeveningpost.co.uk":{issn:"0963-2255",name:"Yorkshire Evening Post"},"yorkshirepost.co.uk":{issn:"0963-1496",name:"The Yorkshire Post"},"yourdailyglobe.com":{name:"Ironwood Daily Globe"},"yourdu.net":{name:"Daily Union"},"yourgv.com":{name:"Gazette-Virginian"},"yourstephenvilletx.com":{name:"Stephenville Empire-Tribune"},"yourwestvalley.com":{name:"Glendale Today"},"yourxgroup.com":{name:"News Xpress"},"ysnews.com":{name:"Yellow Springs News"},"zanesvilletimesrecorder.com":{name:"Times Recorder"},"zavalacountysentinel.net":{name:"Zavala County Sentinel"},"zephyrhillsnewsonline.com":{name:"Zephyrhills News"},"zerkalomn.com":{name:"Zerkalo"},"zion-bentonnews.com":{name:"Zion-Benton News"},"zumbrota.com":{name:"Zumbrota News-Record"}},getName:function(){return"Newspapers"},doRead:function(e){var t=this;if(m.Utils.isString(e))try{e=JSON.parse(e)}catch(e){}return m.Utils.isArray(e)||(e=[e]),e.forEach((function(e){if("PP_NEWS_ARTICLE"==e.pubtype)if("url"in e)if(m.Utils.isArray(e.url)){var r="";e.url.forEach((function(e){for(var a=e.replace(/^https?:\/\//,"").replace(/\/.+/,"").split(/\./),i=a.length-2;i>=0;i-=1){var n=a.slice(i,a.length).join(".");n in t.domainMap&&(r=n)}})),""===r?t.convert(e):t.checkFields(e,r)}else t.convert(e);else t.convert(e)})),e},checkFields:function(e,t){delete e.booktitle,e.journal=this.domainMap[t].name,this.domainMap[t].issn&&(e.issn=this.domainMap[t].issn),this.domainMap[t].issn_alt&&(e.issn_alt=this.domainMap[t].issn_alt),this.domainMap[t].kind?e.kind=this.domainMap[t].kind:e.kind="Newspaper Article",m.library.Publication.removeNonPubtypeSpecificFields(e),m.library.Publication.autoClean(e)},convert:function(e){e.pubtype="PP_WEBSITE",e.kind=null,e.publisher?(e.booktitle=e.publisher,delete e.publisher):e.journal&&(e.booktitle=e.journal,delete e.journal),m.library.Publication.removeNonPubtypeSpecificFields(e),m.library.Publication.autoClean(e)}}),m.format.Newspapers=new m.format._Newspapers,m.format._OpenLibrary=m.format.AbstractReader.extend({getName:function(){return"OpenLibrary JSON"},doRead:function(e){if(!e)return[];m.Utils.isString(e)&&(e=m.Utils.decode(e))&&"title"in e&&(e={DUMMY:e});var t=this._readOpenLibraryItems(e);return t.forEach((function(e){m.library.Publication.autoClean(e)})),t},_readOpenLibraryItems:function(e){var t=[];for(var r in e){var a={pubtype:"PP_BOOK",author:[],url:[]},i=e[r];if("title"in i&&(a.title=i.title),"subtitle"in i){var n=i.title.match(/[\?\.\!]$/)?" ":": ";a.title+=n+i.subtitle}var o={publishers:"publisher",publish_places:"address",lccn:"lccn",isbn_10:"isbn",number_of_pages:"num_pages"};for(var s in o){var l;if(s in i)a[l=o[s]]=[],m.Utils.isArray(i[s])?i[s].forEach((function(e){m.Utils.isObject(e)?"name"in e&&a[l].push(e.name):a[l].push(e)})):(m.Utils.isString(i[s])||m.Utils.isNumeric(i[s]))&&a[l].push(i[s]),a[l]=a[l].join("; ")}if("authors"in i&&i.authors.length&&i.authors.forEach((function(e){"name"in e&&a.author.push(m.library.Author.parseAuthor(e.name,{familyNameFirst:!1}))})),"publish_date"in i){var c=m.library.Date.parseDate(i.publish_date);c.year&&(a.year=c.year),c.month&&(a.month=c.month),c.day&&(a.day=c.day)}if("identifiers"in i){var u=[];"isbn_13"in i.identifiers&&(u=u.concat(i.identifiers.isbn_13)),"isbn_10"in i.identifiers&&(u=u.concat(i.identifiers.isbn_10)),(u=m.Utils.extractISBNs(u.join(" "),{convert:!0,unique:!0}))[0]&&(a.isbn=u[0]),u[1]&&(a.isbn_alt=u[1]),"lccn"in i.identifiers&&i.identifiers.lccn.length&&(a.lccn=i.identifiers.lccn[0])}"url"in i&&a.url.push(i.url),"ebooks"in i&&i.ebooks.length&&i.ebooks[0].formats&&i.ebooks[0].formats.pdf&&a.url.push(i.ebooks[0].formats.pdf.url),t.push(a)}return t}}),m.format.OpenLibrary=new m.format._OpenLibrary,m.format._OpenXML=m.format.AbstractReader.extend({debug:!1,doWrite:function(e,t){m.Utils.isArray(e)||(e=[e]);for(var r=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<b:Sources xmlns:b="http://schemas.openxmlformats.org/officeDocument/2006/bibliography" xmlns="http://schemas.openxmlformats.org/officeDocument/2006/bibliography" SelectedStyle="">'],a=m.Utils.escapeXML,i=0;i<e.length;i++){var n=e[i],o=m.library.PublicationTypes.getOutputTypeForPub(n,"openxml"),s=m.library.PublicationFields.getOutputMapForPubType(n.pubtype,"openxml");r.push("  <b:Source>"),r.push("    <b:SourceType>"+o+"</b:SourceType>");var l=[];"PP_THESIS"===n.pubtype&&n.kind&&r.push("    <b:ThesisType>"+n.kind+"</b:ThesisType>"),Object.keys(s).forEach((function(e){var t=e.replace(/\d+$/,"");if(s[e]in n)if(e.match(/(author|editor|translator|Interviewer|Interviewee)/i))l.push("      <b:"+e+">"),l.push("        <b:NameList>"),n[s[e]].forEach((function(e){e.collective?l.push("        <b:Corporate>"+a(e.collective)+"</b:Corporate>"):(l.push("          <b:Person>"),e.last&&l.push("            <b:Last>"+a(e.last)+"</b:Last>"),e.first&&l.push("            <b:First>"+a(e.first)+"</b:First>"),l.push("          </b:Person>"))})),l.push("        </b:NameList>"),l.push("      </b:"+e+">");else if("URL"===e){var i=m.library.Publication.links(n);i&&i.length>0&&r.push("    <b:URL>"+a(i[0])+"</b:URL>")}else"published"===e?(n.published.year&&r.push("    <b:Year>"+a(n.published.year)+"</b:Year>"),n.published.month&&r.push("    <b:Month>"+a(n.published.month)+"</b:Month>"),n.published.day&&r.push("    <b:Day>"+a(n.published.day)+"</b:Day>")):"accessed"===e?(n.accessed.year&&r.push("    <b:YearAccessed>"+a(n.accessed.year)+"</b:YearAccessed>"),n.accessed.month&&r.push("    <b:MonthAccessed>"+a(n.accessed.month)+"</b:MonthAccessed>"),n.accessed.day&&r.push("    <b:DayAccessed>"+a(n.accessed.day)+"</b:DayAccessed>")):m.Utils.isString(n[s[e]])&&r.push("    <b:"+t+">"+a(n[s[e]])+"</b:"+t+">")})),l.length>0&&(r.push("    <b:Author>"),(r=r.concat(l)).push("    </b:Author>")),r.push("  </b:Source>")}return r.push("</b:Sources>"),r.join("\n")+"\n"}}),m.format.OpenXML=new m.format._OpenXML,m.format._Ovid=m.format.AbstractReader.extend({doRead:function(e){var t=this._readHTML(e);return m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t,r={pubtype:"PP_ARTICLE",keywords:[],url:[],issn:[]},a=$(e).find("table.citation-block tr");if(a&&a.length>0)for(var i=0;i<a.length;i++){var n=$(a[i]).find("th"),o=$(a[i]).find("td"),s=$(a[i]).find("td a");if(n[0]&&o[0]){var l=$(n[0]).text().replace(/\n/g," ");l=this.normalizeStr(l).replace(/:?\s*$/,"");var c,u=$(o[0]).text().replace(/\n/g," ");if(u=this.normalizeStr(u).replace(/:?\s*$/,""),"Title"!=l&&"Book Title"!=l||(u=(u=(u=u.replace("Chapter:","")).replace(" [References]","")).replace(/\s*\.?\s*\[[A-Z]+\]$/i,""),r.title=u),"Publication Type"==l&&(u.match(/Government Publication/)&&(u.match(/Journal Article/)||(r.pubtype="PP_REPORT")),u.match(/Dissertation/)&&(r.pubtype="PP_THESIS"),u.match(/Conference Paper/)&&(r.pubtype="PP_CONFERENCE_PAPER"),u.match(/Chapter/)&&(r.pubtype="PP_BOOK_CHAPTER")),"Document Type"==l&&u.match(/Chapter/)&&(r.pubtype="PP_BOOK_CHAPTER"),"Source"==l){var d=m.library.BibliographicData.parse(u);d&&d.journal?(r.journal=d.journal,d.volume&&(r.volume=d.volume),d.issue&&(r.issue=d.issue),d.pages&&(r.pages=d.pages),d.year&&(r.year=d.year),d.month&&(r.month=d.month),d.day&&(r.day=d.day),d.place&&(r.address=d.place),d.publisher&&(r.publisher=d.publisher),d.institution&&(r.institution=d.institution),d.number&&(r.number=d.number),d.conference&&(r.conference=d.conference),d.conference_location&&(r.conference_location=d.conference_location),d.conference_date&&(r.conference_date=d.conference_date),d.editor&&(r.editor=d.editor,r.booktitle=r.journal,delete r.journal,r.pubtype="PP_BOOK_CHAPTER")):(u=u.replace(/\d.*$/,""),r.journal=u),r.journal&&(r.journal=r.journal.replace(/\s*\.*$/,""))}if("Reviewed Source"==l){var p=m.library.BibliographicData.parse(u,{authorParseParams:{familyNameFirst:!0,commasWithinNames:!0}});p&&p.title?(r.pubtype="PP_REVIEW",r.booktitle=p.title,p.year&&(r.originally_published={year:p.year}),p.author&&(r.contributor=p.author)):(u=u.replace(/\d.*$/,""),r.journal=u),r.journal&&(r.journal=r.journal.replace(/\s*\.*$/,""))}if("Abstract"!=l&&"Abstract (English)"!=l&&"Study Information"!=l||(u=u.replace(/^:\s*/,""),r.abstract=u),"Author Keywords"!=l&&"Keyword"!=l||(u=u.replace(/\s*\.$/,""),r.keywords=r.keywords.concat(u.split(/\s;\s/))),"Subject Headings"!=l&&"Indexer-Assigned Descriptors (English)"!=l||(u=u.replace(/\s*\.$/,""),r.keywords=r.keywords.concat(u.split(/\s;\s/))),"Publisher"==l&&(r.publisher=u),"Location of Publisher"==l&&(r.address=u),"ISSN"!=l&&"ISSN Print"!=l&&"Electronic ISSN"!=l&&"ISSN Electronic"!=l||r.issn.push(u.replace(/\s*\(.*/,"")),"ISBN"==l){var h=m.Utils.extractISBNs(u,{convert:!0,unique:!0,normalize:!0});h[0]&&(r.isbn=h[0]),h[1]&&(r.isbn_alt=h[1])}if("Unique Identifier"==l&&(t=u),"Status"==l&&(u.match(/(\d\d\d\d)$/)?r.year=RegExp.$1:u.match(/MEDLINE/)&&t&&(r.pmid=t)),"Edition Statement"==l&&(r.edition=u),"Book Text Excerpt"==l)(c=u.match(/Chapter Author:\s*(.+)\s+Chapter Title/))&&(r[g="author"]||(r[g]=[]),r[g]=r[g].concat(this.parseAuthors(c[1]))),(c=u.match(/Chapter Title:\s*(.+)\s+Passage Text/))&&(r.title&&(r.booktitle=r.title),r.title=c[1],r.pubtype="PP_BOOK_CHAPTER");if("Year of Publication"==l&&(r.year=u),"Reviewed Article Year of Publication"==l&&(r.originally_published={year:u}),"Date of Publication"==l)(c=u.match(/(\d\d\d\d)/))&&(r.year=c[1]);if("DOI"!=l&&"DOI Number"!=l&&"Digital Object Identifier"!=l||(s&&s[0]?r.doi=$(s[0]).attr("href"):r.doi=u),"URL"==l&&s&&s[0]&&r.url.push($(s[0]).attr("href")),"Electronic Location"!=l&&"Related URI"!=l&&"URI of Resource"!=l||s&&s[0]&&r.url.push($(s[0]).attr("href")),"Journal Abbreviation"==l&&(r.journal&&(r.journalfull=r.journal),r.journal=u),"Author"==l||"Authors"==l||"Book Editor"==l||"Authors Full Name"==l||"Reviewed Article Authors"==l||"Instrument Author"==l){var g="Book Editor"==l?"editor":"author";r[g="Reviewed Article Authors"==l?"contributor":g]||(r[g]=[]);var f=[],b="children";b in o[0]?b in o[0]&&"childNodes"in o[0]&&o[0].childNodes.length>=o[0][b].length&&(b="childNodes"):b="childNodes";for(var y=0;y<o[0][b].length;y++){var v=$(o[0][b][y]).text();v&&v.match(/[A-Z]/i)&&f.push(v)}if(f.length>1)r[g]=r[g].concat(this.parseAuthors(f));else if(r[g]=r[g].concat(this.parseAuthors(u)),r[g].length>3&&r[g].length%2==0){for(var _=r[g].length/2,w=!1,P=0;P<_;P++)r[g][P].last!=r[g][P+_].last&&(w=!0);w||(r[g]=r[g].slice(_))}}"Language"==l&&(r.language=u.match(/([A-z]*)/)[0]),"Institution"==l&&(r.affiliation=u),"Note"==l&&(r.note=u),"Publisher Information"==l&&(r.publisher=u),"Year"==l&&(r.published?r.published.year||(r.published.year=u):r.published={year:u}),"Page Count"==l&&(r.num_pages=u)}}return r.editor&&r.booktitle,"PP_BOOK_CHAPTER"==r.pubtype&&(!r.booktitle&&r.journal&&(r.booktitle=r.journal),!r.publisher&&r.institution&&(r.publisher=r.institution),delete r.institution,"string"==typeof r.editor&&(r.editor=this.parseAuthors(r.editor))),r.language&&(r.language=m.Utils.normalizeLanguage(r.language)),r.keywords.length>0?r.keywords=r.keywords.join("; "):delete r.keywords,r},parseAuthors:function(e){var t,r=[];t=Array.isArray(e)?e:e.indexOf(";")>0?e.split(/\s*;\s*/):e.split(/\s*\.\s*/);for(var a=0;a<t.length;a++){var i=t[a].split(/,/);i.length>1&&(t[a]=i[0]+", "+i[1]),t[a]=t[a].replace(/\s+MS$/,""),t[a]=t[a].replace(/\s+\[.*$/,""),t[a]&&r.push(m.library.Author.parseAuthor(t[a]))}return r},normalizeStr:function(e){var t="";return e&&(t=e.replace(/^[\n\t\r\s]+/,"").replace(/[\n\t\r\s]+$/,"").replace(/[\t\r\n\s]+/g," ")),t},getName:function(){return"Ovid"}}),m.format.Ovid=new m.format._Ovid,m.format._OvidInsights=m.format.AbstractReader.extend({doRead:function(e){var t=this._readHTML(e);return m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t={pubtype:"PP_ARTICLE",keywords:[],url:[],issn:[]},r=["accessed","_id","source","citedByLink","subfolders","sha1","dup_sha1","citekey","id_list","autoCleaned"],a=/var\s*articleDoi\s*=\s*"([^"]+)"/i.exec(e);a&&a[1]&&(t.doi=a[1]);var i=/var\s*doi\s*=\s*"([^"]+)"/i.exec(e);i&&i[1]&&!t.doi&&(t.doi=i[1]);var n=/var\s*title\s*=\s*"([^"]+)"/i.exec(e);n&&n[1]&&(t.title=n[1]);var o=/citation_title\s*=\s*([^;]+);/i.exec(e);o&&o[1]&&!t.title&&(t.title=o[1].trim());var s=/citation_journal_title\s*=\s*([^;]+);/i.exec(e);s&&s[1]&&(t.journal=s[1].trim());var l=/var\s*journalTitleForOmniture\s*=\s*"([^"]+)"/i.exec(e);l&&l[1]&&!t.journal&&(t.journal=l[1]);var c=/citation_volume\s*=\s*([^;]+);/i.exec(e);c&&c[1]&&(t.volume=c[1].trim());var u=/var\s*volumeForOmniture\s*=\s*"([^"]+)"/i.exec(e);u&&u[1]&&!t.volume&&(t.volume=u[1]);var d=/citation_issue\s*=\s*([^;]+);/i.exec(e);d&&d[1]&&(t.issue=d[1].trim());var p=/var\s*issue\s*=\s*"([^"]+)"/i.exec(e);p&&p[1]&&!t.issue&&(t.issue=p[1]);var h=/citation_issn\s*=\s*([^;]+);/i.exec(e);h&&h[1]&&(t.issn=h[1].trim());var g=/\s*issnValueForOmniture\s*=\s*"([^"]+)"/i.exec(e);g&&g[1]&&!t.issn&&(t.issn=g[1]);var f=/citation_firstpage\s*=\s*([^;]+);/i.exec(e);f&&f[1]&&(t.startpage=f[1].trim());var b=/var\s*firstpage\s*=\s*"([^"]+)"/i.exec(e);b&&b[1]&&!t.startpage&&(t.startpage=b[1]);var y=/citation_lastpage\s*=\s*([^;]+);/i.exec(e);y&&y[1]&&(t.endpage=y[1].trim());var v=/var\s*lastpage\s*=\s*"([^"]+)"/i.exec(e);v&&v[1]&&!t.endpage&&(t.endpage=v[1]);var _=/citation_publication_date\s*=\s*([^;]+);/i.exec(e);_&&_[1]&&(t.published=m.library.Date.parseDate(_[1].trim()));var w=/var\s*publicationDate\s*=\s*"([^"]+)"/i.exec(e);w&&w[1]&&!t.published&&(t.published=m.library.Date.parseDate(w[1]));var P=/\s*citation_pmid"\s+content\s*=\s*"([^"]+)"/i.exec(e);P&&P[1]&&(t.pmid=P[1]);var S=/var\s*article\s*=\s*({.*});/i.exec(e),C=S&&S[1]?S[1]:"",A={};try{A=JSON.parse(C)}catch(e){}if(Object.keys(A).length){if(A.Title&&(t.title=A.Title),A.JournalTitle&&(t.journalfull=A.JournalTitle),A.JournalAbbreviation&&(t.journal=A.JournalAbbreviation),A.Authors&&(t.author=m.library.Author.parseAuthorList(A.Authors,{delimiter:";",familyNameFirst:!1})),A.Abstract&&A.Abstract.indexOf("Abstract unavailable")<0&&(t.abstract=A.Abstract),A.Volume&&(t.volume=A.Volume),A.IssuePart&&(t.issue=A.IssuePart),A.PageRange&&(t.pages=A.PageRange),A.Doi&&(t.doi=A.Doi),A.Pmid&&(t.pmid=A.Pmid),A.IssnElectronic&&(t.issn_alt=A.IssnElectronic),A.IssnPrint&&(t.issn=A.IssnPrint),A.Conference&&(t.conference_name=A.Conference),A.PageMetaTags&&A.PageMetaTags.length){var E="<html><head>";A.PageMetaTags.forEach((function(e){E+='<meta name="'+e.Name+'" content="'+e.Value+'">'})),E+="</head><body></body></html>";var T=m.format.HTML.syncRead(E);T&&T[0]&&Object.keys(T[0]).forEach((function(e){T[0][e]&&!t[e]&&r.indexOf(e)<0&&(t[e]=T[0][e])}))}var k=m.format.HTML.syncRead(e);k&&k[0]&&Object.keys(k[0]).forEach((function(e){k[0][e]&&!t[e]&&r.indexOf(e)<0&&(t[e]=k[0][e])}))}var x=/var\s*authors\s*=\s*"([^"]+)"/i.exec(e);if(x&&x[1]){var R=x[1].replace(/&#(\S+);/g,(function(e,t){var r=parseInt(t);return r.toString===t||(r=parseInt(t.replace("x",""),16)),String.fromCharCode(r)}));t.author||(t.author=m.library.Author.parseAuthorList(R,{delimiter:";",commasWithinNames:!1,familyNameFirst:!1}))}var I=$(e).find(".custom-abstract");I&&I.length&&(t.abstract=$(I[0]).text().trim());var L=/var\s*journalURL\s*=\s*"([^"]+)"/i.exec(e);return L&&L[1]&&t.url.push(L[1]),t},getName:function(){return"OvidInsights"}}),m.format.OvidInsights=new m.format._OvidInsights,m.format._ORBi=m.format.AbstractReader.extend({doRead:function(e){var t=this._readHTML(e);return m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t={url:[],pubtype:"PP_ARTICLE",keywords:[],authors:[],editors:[]},r=$(e).find("td.label"),a=$(e).find("td.data");if(r.length>0&&r.length==a.length)for(var i,n=0;n<r.length;n++){var o=$(r[n]).text().replace(/\n/g," ");""!==(o=this.normalizeStr(o).replace(/:.*/,"").toUpperCase().trim())?i=o:o=i;var s=$(a[n]).text().replace(/\n/g," ");s=this.normalizeStr(s).trim(),t=this.parseKeyValue(o,s,t)}return t.authors.length&&(t.author=this.parseAuthors(t.authors)),t.editors.length&&(t.editor=this.parseAuthors(t.editors)),t.series_editor&&t.series_editor.length&&(t.series_editor=this.parseAuthors(t.series_editor)),delete t.editors,delete t.authors,delete t.series_editor,t},normalizeStr:function(e){var t="";return e&&(t=e.replace(/^[\n\t\r\s]+/,"").replace(/[\n\t\r\s]+$/,"").replace(/[\t\r\n\s]+/g," ")),t},parseKeyValue:function(e,t,r){for(;e.indexOf("_")>=0;)e=e.replace("_"," ");if("DOCUMENT TYPE"==e)t.match(/(conference|congress|symposium|workshop)/i)?r.pubtype="PP_CONFERENCE_PAPER":t.match(/(parts of books)/i)?r.pubtype="PP_BOOK_CHAPTER":t.match(/(books)/i)?r.pubtype="PP_BOOK":t.match(/(thesis|dissertation)/i)&&(r.pubtype="PP_THESIS");else if("TITLE"==e)r.title=t;else if("AUTHOR"==e||"AUTHOR, CO-AUTHOR"==e){var a=t.replace(/(\[.*\])/,"");r.authors.push(a)}else if("EDITOR"==e||"EDITOR, CO-EDITOR"==e||"SUPERVISOR"==e){var i=t.replace(/(\[.*\])/,"");r.editors.push(i)}else if("PUBLISHER"==e)r.publisher||(","==t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),r.publisher=t);else if("KEYWORDS"==e){t.split(";").forEach((function(e){e=e.trim(),-1===r.keywords.indexOf(e)&&r.keywords.push(e)}))}else if("ISBN"==e)for(var n,o=m.Utils.extractISBNs(t,{convert:!0,unique:!0});n=o.shift();)r.isbn?r.isbn_alt||(r.isbn_alt=n):r.isbn=n;else if("ISSN"==e)r.issn=t;else if("E-ISSN"==e)r.issn_alt=t;else if("LCCN"==e)r.lccn=t;else if("EDITION"==e)r.edition=t;else if("ABSTRACT"==e)r.abstract=t;else if("MAIN DOCUMENT TITLE"==e)r.booktitle=t;else if("JOURNAL TITLE"==e)r.journal=t;else if("COLLECTION AND COLLECTION VOLUME"==e){if(-1!=t.indexOf(", Editor")){var s=t.substring(t.indexOf(", Editor")+10);r.series_editor=[s],t=t.substring(0,t.indexOf(", Editor")-1)}r.series=t}else if("INSTITUTION"==e)r.school=t;else if("LANGUAGE"==e)r.langage=t;else if("PUBLICATION DATE"==e){var l={},c=t.match(/(\d{4})/);c&&c[1]&&(l.year=c[1]),r.published=l}else"PAGE NUMBER"==e||"PAGES"==e?r.pages=t:"CITY"==e||"COUNTRY"==e?r.address?r.address+=", "+t:r.address=t:"EVENT NAME"==e?r.conference=t:"EVENT DATE"==e?r.conference_date=t:"EVENT PLACE (CITY)"==e||"EVENT COUNTRY"==e?r.conference_location?r.conference_location+=", "+t:r.conference_location=t:"PERMALINK"==e||"OTHER URL"==e?r.url.push(t):"DOI"==e&&(r.doi=t);return r},parseAuthors:function(e){for(var t=[],r=0;r<e.length;r++){e[r]=e[r].replace(/[\+\*\[\(\d].*$/g,""),e[r]=e[r].replace(/\s*(MD|PhD|MSc)\s*,?\s*/g,""),e[r]=e[r].replace(/[0-9]{4}-[0-9]{4}/g,""),e[r]=e[r].replace(/[0-9]{4}-/g,"");var a=e[r].split(/,\s*/);a.length>=2&&t.push({last:a[0],first:a[1]})}return t},getName:function(){return"ORBi"}}),m.format.ORBi=new m.format._ORBi,m.format._PaperpileJSON=m.format.AbstractReader.extend({getName:function(){return"PaperpileJSON"},doRead:function(e){var t=[];if(!e)return t;m.Utils.isString(e)?(e=e.replace(/%%PAPERPILEJSONEXPORT%%/,""),t=m.Utils.decode(e)):t=[e];var r=["sha1","folders","labels","autoCleaned","dup_sha1","shared_folders","id_list","incomplete","count_index","imported","owner","journal_checked","subfolders","updated","collection_timestamps","external_pdf_filename","duplicates","created","crawl_urls","gs_cluster_id","pdf_restricted"],a=["author","editor","series_editor","contributor","translator"],i=[];return t.forEach((function(e){for(var t in e){if(t.match(/^_/)&&delete e[t],r.indexOf(t)>-1&&delete e[t],m.Utils.isObject(e[t]))for(var n in"$numberLong"in e[t]&&(e[t]=parseInt(e[t].$numberLong)),e[t])if(m.Utils.isObject(e[t][n]))for(var o in"$numberLong"in e[t][n]&&(e[t][n]=parseInt(e[t][n].$numberLong)),e[t][n])m.Utils.isObject(e[t][n][o])&&"$numberLong"in e[t][n][o]&&(e[t][n][o]=parseInt(e[t][n][o].$numberLong));if("source"===t&&(delete e.source.pdf_crawl_status,delete e.source.pdf_crawl_current_url,delete e.source.pdf_crawl_error,delete e.source.pdf_web_url,delete e.source._existing_pub_data),"url"===t&&m.Utils.isArray(e.url)){var s=[];e.url.forEach((function(e){m.Utils.isString(e)&&(e=e.replace(/\s.+/,"")).length>10&&s.push(e)})),e.url=s}}a.forEach((function(t){t in e&&e[t].forEach((function(e){delete e._id}))})),m.library.Publication.autoClean(e),"1"!==e.trashed&&1!==e.trashed&&i.push(e)})),i}}),m.format.PaperpileJSON=new m.format._PaperpileJSON,m.format._Pdf=m.format.AbstractReader.extend({getName:function(){return"PDF Parsing"},isAsync:function(){return!0},doRead:function(e,t){var r=function(e,r){r?(console.log("PDF parse failed:",r),m.Utils.callback(t,null,[null,r])):m.Utils.callback(t,null,[[e],null])},a=new m.pdf.Pdf;if(e.match("http"))a.getPubFromPdf(e,r);else{var i=chrome.runtime.getURL(e);a.getPubFromPdf(i,r)}return null},readMendeleyItem:function(e){}}),m.format.Pdf=new m.format._Pdf,m.format._PNX=m.format.AbstractReader.extend({doRead:function(e){var t=null;try{t=JSON.parse(e)}catch(e){}if(t&&t.pnx&&"object"==typeof t.pnx){var r=this._readData(t.pnx,!1);return m.library.Publication.autoClean(r),[r]}if("string"==typeof e||t&&"string"==typeof t.pnx){t&&t.pnx&&"string"==typeof t.pnx&&(e=t.pnx);var a=this.getXMLParser(e);r=this._readData(a,!0);return m.library.Publication.autoClean(r),[r]}if("object"==typeof e){r=this._readData(e,!0);return m.library.Publication.autoClean(r),[r]}},_getValues:function(e,t,r){if("string"==typeof e)return e;if(r){var a=t?$(e).find(t):e;return t&&a&&"object"==typeof a&&a.length>1?a:$(a).text()}for(var i=t.split(" "),n=e,o=0;o<i.length;o++){if(!(i[o]in n))return"";n=n[i[o]]}return n?n.length&&n.length>1?n:n[0]:""},_readData:function(e,t){var r,a={author:[],url:[],pubtype:"PP_MISC",keywords:[]},i=this._getValues(e,"addata ristype",t);if(i&&i.length>0){var n=m.library.PublicationTypes.getInputTypeForPub(i,"ris");n&&n.pubtype&&(a.pubtype=n.pubtype)}(i=this._getValues(e,"display type",t))&&i.length>0&&(i.match(/thesis/i)&&(a.pubtype="PP_THESIS"),i.match(/audio/i)&&(a.pubtype="PP_AUDIO"),i.match(/video/i)&&(a.pubtype="PP_VIDEO"),i.match(/audiovisual/i)&&(a.pubtype="PP_AUDIO"),i.match(/book_chapter/i)&&(a.pubtype="PP_BOOK_CHAPTER"),i.match(/reference_entry/i)&&(a.pubtype="PP_ENCYCLOPEDIA_ARTICLE"),i.match(/review/i)&&(a.pubtype="PP_REVIEW"),i.match(/conference_proceeding/i)&&(a.pubtype="PP_CONFERENCE_PAPER"),i.match(/article/i)&&(a.pubtype="PP_ARTICLE")),i=this._getValues(e,"addata format",t),(i=this._getValues(i,"",t))&&i.length>0&&(i.match(/dissertation/i)&&(a.pubtype="PP_THESIS",a.kind="Ph.D. Thesis"),i.match(/patent/i)&&(a.pubtype="PP_PATENT"),"PP_MISC"==a.pubtype&&i.match(/book/i)&&(a.pubtype="PP_BOOK"));if(this._assignMapValues({"addata doi":"doi","addata pmid":"pmid","addata jtitle":"journal","addata issue":"issue","addata volume":"volume","addata pages":"pages","addata abstract":"abstract","display description":"abstract","display edition":"edition","display format":"medium","addata atitle":"title","addata btitle":"booktitle","addata issn":"issn","addata eissn":"issn_alt","addata au":"author","addata aucorp":"author","addata date":"date","addata pub":"publisher","addata cop":"address","addata isbn":"isbn","addata seriestitle":"series","links linktorsrc":"url","addata url":"url","addata spage":"startpage","addata epage":"endpage","facets topic":"keywords","display type":"tmptype","addata lccn":"lccn","display ispartof":"booktitle"},e,a,t),0===a.author.length&&this._assignMapValues({"addata addau":"author"},e,a,t),0===a.author.length&&this._assignMapValues({"display creator":"author"},e,a,t),0===a.author.length&&this._assignMapValues({"display contributor":"author"},e,a,t),this._assignMapValues({"display publisher":"publisher","display title":"title","display creationdate":"date"},e,a,t),a.series&&(r=a.series.match(/(.+)\s*;\s*(\d+)\s*$/))&&r[2]&&(a.series=r[1].replace(/\s+$/,""),a.series_number=r[2]),"PP_THESIS"==a.pubtype&&a.publisher&&(a.school=a.publisher,delete a.publisher),a.title&&(a.title=a.title.replace(/\s*\/\s*edited\s+by.+/i,""),a.author[0]&&a.author[0].last&&a.title.indexOf(a.author[0].last)>0&&a.title.indexOf("/")>0&&(a.title=a.title.replace(/\/.*/g,"").trim())),a.publisher&&a.publisher.indexOf(":")>0){var o=a.publisher.split(";"),s="",l="";o.forEach((function(e){var t=e.split(":"),r=!1,a=!1;t[0]&&t[0].match(/(university|press|ltd|limited|publish|publication)/i)&&(r=!0),t[1]&&t[1].match(/(university|press|ltd|limited|publish|publication)/i)&&(a=!0),r&&!a?(l.length&&(l+="; "),s.length&&(s+="; "),s+=t[0].trim(),l+=t[1].trim()):a?(l.length&&(l+="; "),s.length&&(s+="; "),s+=t[1].trim(),l+=t[0].trim()):(s.length&&(s+="; "),s+=t[0]+":"+t[1])})),s.length&&(a.publisher=s),l.length&&(a.address=l)}if(a.tmptype&&(a.tmptype.match(/score/)?a.pubtype="PP_SCORE":a.tmptype.match(/newspaper/)&&(a.pubtype="PP_NEWS_ARTICLE"),delete a.tmptype),"PP_REVIEW"==a.pubtype){var c=this._getValues(e,"display contributor",t);"string"==typeof c&&(c=[c]);for(var u=[],d=0;d<c.length;d++){var p=this._getValues(c[d],"display contributor",t);p&&p.indexOf("reviewed author")&&(p=p.replace(/\(review\sauthor\)/,"").trim(),u.push(m.library.Author.parseAuthor(p,{familyNameFirst:!0})))}var h=a.author;a.author=u,a.contributor=[];for(d=0;d<h.length;d++){for(var g=h[d],f=!1,b=0;b<a.author.length;b++)g.last==a.author[b].last&&(f=!0);f||a.contributor.push(g)}(!a.booktitle||a.booktitle&&a.journal&&a.booktitle.indexOf(a.journal)>=0)&&(a.booktitle=a.title)}return"PP_CONFERENCE_PAPER"==a.pubtype&&a.journal&&(a.booktitle=a.journal,delete a.journal),a.pages&&(delete a.startpage,delete a.endpage),a.keywords=a.keywords.join(";"),a},_assignMapValues:function(e,t,r,a){var i,n,o,s=this;for(o in e)if((i=s._getValues(t,o,a))&&i.length>0)if("author"===e[o]){"string"==typeof i&&(i=[i]);for(var l=0;l<i.length;l++)s._getValues(i[l],"",a).split("|").forEach((function(t){t.match(/(SpringerLink)/)||(t=(t=(t=(t=(t=(t=(t=s._getValues(a?s.getXMLParser("<div>"+t+"</div>"):t,"",a)).replace(/\s+author\s*$/i,"")).replace(/\s+editor\s*$/i,"")).replace(/\s+\(.*$/i,"")).replace(/\s*\d\d\d\d.*$/,"")).replace(/\[.+$/,"")).replace(/[,\-]\s*$/,""),o.match(/aucorp/)?r[e[o]].push({collective:t}):t.match(/;/)?r[e[o]]=r[e[o]].concat(m.library.Author.parseAuthorList(t,{auto:!1,delimiter:";"})):r[e[o]].push(m.library.Author.parseAuthor(t)))}))}else if("date"===e[o]){var c=s._getValues(i,"",a);c.match(/^\d{8}$/)||c.match(/^\d{4}-\d{2}-\d{2}$/)?(n=s._getValues(i,"",a).match(/^(\d\d\d\d)-?(\d\d)-?(\d\d)$/),r.year=n[1],r.month=n[2],r.day=n[3]):c.match(/^\d{6}$/)||c.match(/^\d{4}-\d{2}$/)?(n=s._getValues(i,"",a).match(/^(\d\d\d\d)-?(\d\d)$/),r.year=n[1],r.month=n[2]):c.match(/\d{4}/)&&(n=/\d{4}/.exec(c))&&n[1]&&(r.year=n[1]),n&&n[3]?(r.year=n[1],r.month=n[2],r.day=n[3]):(n=s._getValues(i,"",a).match(/^(\d\d\d\d)$/))&&n[1]&&(r.year=n[1])}else if("url"===e[o])(n=s._getValues(i,"",a).match(/\$\$U(.+)\$\$E/))&&n[1]||(n=s._getValues(i,"",a).match(/^(http.+)\$\$U/))&&n[1]?r.url.push(n[1]):(n=s._getValues(i,"",a)).match(/\$/)||r.url.push(n);else if("abstract"===e[o]){r.abstract=[];for(l=0;l<i.length;l++)r.abstract.push(s._getValues(i,"",a));r.abstract=m.Array.unique(r.abstract).join("\n")}else if("keywords"===e[o])for(l=0;l<i.length;l++)r.keywords.push(s._getValues(i[l],"",a));else if("isbn"===e[o]){var u,d=[];"string"==typeof i&&(i=[i]);for(l=0;l<i.length;l++)d.push(s._getValues(i[l],"",a));for(d=m.Utils.extractISBNs(d.join(" "),{convert:!0,unique:!0,normalize:!0});u=d.shift();)r.isbn?r.isbn_alt||(r.isbn_alt=u):r.isbn=u}else e[o]in r||(n=s._getValues(i,"",a),(n=s._getValues(a?this.getXMLParser("<div>"+n+"</div>"):n,"",a)).match(/^None$/i)||(r[e[o]]=n))},getName:function(){return"PNX"}}),m.format.PNX=new m.format._PNX,m.format._ProQuest=m.format.AbstractReader.extend({doRead:function(e){var t=this._readHTML(e);return m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t,r,a,i,n=this,o={url:[],pubtype:"PP_MISC",keywords:[]},s={Author:"author",Director:"author",Producer:"author","Country of publication":"country",Department:"department","Document author":"author","Document type":"pubtype","Document URL":"url",DOI:"doi",Editor:"editor",eISSN:"issn",ISBN:"isbn",ISSN:"issn",Issue:"issue","Journal abbreviation":"journal",Location:"address",Language:"language","Language of publication":"language","Monograph title":"booktitle","Number of pages":"num_pages",Pages:"pages","Place of publication":"address","Publication date":"date","Publication details":"details","Publication title":"journal","Publication type":"pubtype","Publication year":"year",Publisher:"publisher","PubMed ID":"pmid","Record type":"pubtype",School:"school",Series:"series","Source type":"pubtype",Title:"title","University/institution":"school",URL:"url",Volume:"volume",Advisor:"editor","First page":"pages","Full text outside of ProQuest":"url","Weblog post":"Weblog post"},l={ISSN:["\u0631\u0642\u0645 \u0627\u0644\u0645\u0633\u0644\u0633\u0644 \u0627\u0644\u062f\u0648\u0644\u064a"],ISBN:["\u0627\u0644\u062a\u0631\u0642\u064a\u0645 \u0627\u0644\u062f\u0648\u0644\u064a \u0644\u0644\u0643\u062a\u0627\u0628"],"Weblog post":["Web g\xfcnl\xfc\u011f\xfc g\xf6nderisi","\u0e42\u0e1e\u0e2a\u0e15\u0e4c\u0e43\u0e19\u0e40\u0e27\u0e47\u0e1a\u0e25\u0e47\u0e2d\u0e01","\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u0432 \u0432\u0435\u0431-\u0436\u0443\u0440\u043d\u0430\u043b\u0435","Publica\xe7\xe3o de blogue","Post de weblog","Wpis w blogu","Nettblogginnlegg","\u30d6\u30ed\u30b0 \u30dd\u30b9\u30c8","Weblog k\xfcld\xe9se","Nota del blog","\uc6f9 \ub85c\uadf8 \uac8c\uc2dc","Article de blog","Publicaci\xf3n de blog","Posting Weblog","\u0646\u0634\u0631 \u0645\u062f\u0648\u0646\u0629 \u0648\u064a\u0628","\u535a\u5ba2\u6587\u7ae0","\u90e8\u843d\u683c\u6587\u7ae0"],Producer:["\u0e1c\u0e39\u0e49\u0e1c\u0e25\u0e34\u0e15","\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c","Produtor","\uc81c\uc791\uc790","\u0627\u0644\u0645\u0646\u062a\u062c","Produser","V\xfdrobce","Hersteller","Productor","Producteur","Produttore","Gy\xe1rt\xf3","\u751f\u7523\u8005","Produsent","Producent","Produtor","Yap\u0131mc\u0131","\u5236\u4f5c\u4eba","\u88fd\u9020\u8005"],Director:["\u4e3b\u7ba1","\u5bfc\u6f14","\u0e1c\u0e39\u0e49\u0e2d\u0e33\u0e19\u0e27\u0e22\u0e01\u0e32\u0e23","\u0420\u0435\u0436\u0438\u0441\u0441\u0435\u0440","Dyrektor","\uac10\ub3c5","\u0645\u062f\u064a\u0631","Direktur","\u0158editel","Leiter","Directeur","Direttore","Igazgat\xf3","\u30c7\u30a3\u30ec\u30af\u30bf\u30fc","Regiss\xf8r","Diretor","Y\xf6netmen"],"Full text outside of ProQuest":["\u5728 ProQuest \u5916\u90e8\u7684\u5168\u6587","ProQuest \u4ee5\u5916\u5168\u6587\u6587\u732e","ProQuest d\u0131\u015f\u0131 tam metin","Texto completo fora da ProQuest","Pe\u0142ny tekst poza serwisem ProQuest","Fulltekst utenfor ProQuest","ProQuest\u4ee5\u5916\u306e\u5168\u6587","ProQuest-en k\xedv\xfcli teljes sz\xf6veg","Testo completo all'esterno di ProQuest","ProQuest \uc678\ubd80 full text","Texte int\xe9gral en dehors de ProQuest","Texto completo externo a ProQuest","Volltext au\xdferhalb von ProQuest","Pln\xfd text mimo ProQuest","Teks lengkap di luar ProQuest","\u0627\u0644\u0646\u0635 \u0627\u0644\u0643\u0627\u0645\u0644 \u062e\u0627\u0631\u062c ProQuest","\u041f\u043e\u043b\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u0432\u043d\u0435 ProQuest","\u0e2b\u0e21\u0e32\u0e22\u0e40\u0e25\u0e02\u0e1b\u0e23\u0e30\u0e08\u0e33\u0e15\u0e31\u0e27\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23\u0e02\u0e2d\u0e07 ProQuest"],Author:["Pengarang","Autor","Auteur","\uc800\uc790","Autore","Szerz\u0151","\u8457\u8005","Forfatter","\u0410\u0432\u0442\u043e\u0440","\u0e1c\u0e39\u0e49\u0e41\u0e15\u0e48\u0e07","Yazar ad\u0131","\u4f5c\u8005"],Copyright:["\u8457\u4f5c\u6a29","Opphavsrett","Prawa autorskie","\u0e25\u0e34\u0e02\u0e2a\u0e34\u0e17\u0e18\u0e34\u0e4c","Telif Hakk\u0131","\u7248\u6743","\u8457\u4f5c\u6b0a"],"Country of publication":["Publikationsland","Pa\xeds de publicaci\xf3n","Pays de publication","\ucd9c\ud310 \uad6d\uac00","Paese di pubblicazione","Publik\xe1ci\xf3 orsz\xe1ga","\u51fa\u7248\u56fd","Utgivelsesland","Kraj publikacji","Pa\xeds de publica\xe7\xe3o","\u0421\u0442\u0440\u0430\u043d\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438","\u0e1b\u0e23\u0e30\u0e40\u0e17\u0e28\u0e17\u0e35\u0e48\u0e1e\u0e34\u0e21\u0e1e\u0e4c","Yay\u0131nlanma \xfclkesi","\u51fa\u7248\u7269\u56fd\u5bb6/\u5730\u533a","\u51fa\u7248\u570b\u5bb6/\u5730\u5340"],Database:["Datenbank","Base de datos","Base de donn\xe9es","\ub370\uc774\ud130\ubca0\uc774\uc2a4","Adatb\xe1zis","\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9","Baza danych","Base de dados","\u0411\u0430\u0437\u0430","\u0e10\u0e32\u0e19\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25","Veritaban\u0131","\u6570\u636e\u5e93","\u8cc7\u6599\u5eab"],Department:["Abteilung"],Degree:["Studienabschluss","T\xedtulo universitario","Dipl\xf4me","\ud559\uc704","Titolo accademico","Diploma","\u5b66\u4f4d\u79f0\u53f7","Grad","Stopie\u0144","Gradua\xe7\xe3o","Licenciatura","\u0421\u0442\u0435\u043f\u0435\u043d\u044c","\u0e1b\u0e23\u0e34\u0e0d\u0e0d\u0e32\u0e1a\u0e31\u0e15\u0e23","Derece","\u5b66\u4f4d","\u5b78\u4f4d"],"Document type":["Dokumententyp","Tipo de documento","Type de document","\ubb38\uc11c \ud615\uc2dd","Tipo di documento","Dokumentum t\xedpusa","\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u30bf\u30a4\u30d7","Dokumenttype\u0646\u062f","Rodzaj dokumentu","\u0422\u0438\u043f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430","\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23","Belge t\xfcr\xfc","\u6587\u6863\u7c7b\u578b","\u6587\u4ef6\u985e\u578b"],"Identifier / keyword":["Identifikator/Schl\xfcsselwort","Identificador / palabra clave","Identificateur / mot-cl\xe9","\uc2dd\ubcc4\uc790/\ud0a4\uc6cc\ub4dc","Identificativo/parola chiave","Azonos\xedt\xf3 / kulcssz\xf3","\u8b58\u5225\u5b50 / \u30ad\u30fc\u30ef\u30fc\u30c9","Identifikator/n\xf8kkelord","Identyfikator/s\u0142owo kluczowe","Identificador / palavra-chave","\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 / \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e","\u0e15\u0e31\u0e27\u0e1a\u0e48\u0e07\u0e0a\u0e35\u0e49/\u0e04\u0e33\u0e2a\u0e33\u0e04\u0e31\u0e0d","Tan\u0131mlay\u0131c\u0131 / anahtar kelime","\u6807\u8bc6\u7b26/\u5173\u952e\u5b57","\u8b58\u5225\u78bc/\u95dc\u9375\u5b57"],Issue:["\u0627\u0644\u0625\u0635\u062f\u0627\u0631","\u0e09\u0e1a\u0e31\u0e1a","\u0418\u0437\u0434","Edi\xe7","Ed.","Nr/wydanie","Utst","Kiad","Fasc","N\xb0","N.\xba","\u010c\xeds","Ausgabe","Ausg","N\xfamero","Num\xe9ro","\ud638","Fascicolo","Sz\xe1m","\u53f7","Utgave","Wydanie","Edi\xe7\xe3o","\u0412\u044b\u043f\u0443\u0441\u043a","\u0e09\u0e1a\u0e31\u0e1a\u0e17\u0e35\u0e48","Say\u0131","\u671f"],"Journal subject":["Zeitschriftenthema","Materia de la revista","Sujet de la publication","\uc800\ub110 \uc8fc\uc81c","Soggetto rivista","Foly\xf3irat t\xe1rgya","\u5b66\u8853\u8a8c\u306e\u4e3b\u984c","Journalemne","Tematyka czasopisma","Assunto do peri\xf3dico","Assunto da publica\xe7\xe3o peri\xf3dica","\u0422\u0435\u043c\u0430\u0442\u0438\u043a\u0430 \u0436\u0443\u0440\u043d\u0430\u043b\u0430","\u0e2b\u0e31\u0e27\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07\u0e02\u0e2d\u0e07\u0e27\u0e32\u0e23\u0e2a\u0e32\u0e23","Dergi konusu","\u671f\u520a\u4e3b\u9898","\u671f\u520a\u4e3b\u984c"],Language:["\u0644\u063a\u0629 \u0627\u0644\u0646\u0634\u0631","Jazyk publikace","Bahasa publikasi","Sprache","Idioma","Langue","\uc5b8\uc5b4","Lingua","Nyelv","\u8a00\u8a9e","Spr\xe5k","J\u0119zyk","\u042f\u0437\u044b\u043a","\u0e20\u0e32\u0e29\u0e32","Dil","\u8bed\u8a00","\u8a9e\u8a00"],"Language of publication":["Publikationssprache","Idioma de la publicaci\xf3n","Langue de publication","\ucd9c\ud310 \uc5b8\uc5b4","Lingua di pubblicazione","Publik\xe1ci\xf3 nyelve","\u51fa\u7248\u7269\u306e\u8a00\u8a9e","Utgivelsesspr\xe5k","J\u0119zyk publikacji","Idioma de publica\xe7\xe3o","\u042f\u0437\u044b\u043a \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438","\u0e20\u0e32\u0e29\u0e32\u0e02\u0e2d\u0e07\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23\u0e2a\u0e34\u0e48\u0e07\u0e1e\u0e34\u0e21\u0e1e\u0e4c","Yay\u0131n Dili","\u51fa\u7248\u7269\u8bed\u8a00","\u51fa\u7248\u7269\u8a9e\u8a00"],"Number of pages":["Seitenanzahl","N\xfamero de p\xe1ginas","Nombre de pages","\ud398\uc774\uc9c0 \uc218","Numero di pagine","Oldalsz\xe1m","\u30da\u30fc\u30b8\u6570","Antall sider","Liczba stron","\u0427\u0438\u0441\u043b\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446","\u0e08\u0e33\u0e19\u0e27\u0e19\u0e2b\u0e19\u0e49\u0e32","Sayfa say\u0131s\u0131","\u9875\u6570","\u9801\u6578"],Pages:["\u0627\u0644\u0635\u0641\u062d\u0627\u062a","\u0627\u0644\u0635\u0641\u062d\u0629 \u0627\u0644\u0623\u0648\u0644\u0649","\u7b2c\u4e00\u9801","\u7b2c\u4e00\u9875","\u0130lk sayfa","\u0e2b\u0e19\u0e49\u0e32\u0e41\u0e23\u0e01","\u041f\u0435\u0440\u0432\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430","Primeira p\xe1gina","Rozdzia\u0142","Pierwsza strona","F\xf8rste side","\u6700\u521d\u306e\u30da\u30fc\u30b8","Els\u0151 oldal","Prima pagina","\ucc98\uc74c \ud398\uc774\uc9c0","Primera p\xe1gina","Premi\xe8re page","Primera p\xe1gina","Strany","Prvn\xed strana","Halaman","Halaman pertama","Erste Seite","Seiten","P\xe1ginas","\ud398\uc774\uc9c0","Pagine","Oldalak","\u30da\u30fc\u30b8","Sider","Strony","\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b","\u0e2b\u0e19\u0e49\u0e32","Sayfalar","\u9875","\u9801\u9762"],"Place of publication":["Verlagsort","Lugar de publicaci\xf3n","Lieu de publication","\ucd9c\ud310 \uc9c0\uc5ed","Luogo di pubblicazione:","Publik\xe1ci\xf3 helye","\u51fa\u7248\u5730","Utgivelsessted","Miejsce publikacji","Local de publica\xe7\xe3o","\u041c\u0435\u0441\u0442\u043e \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438","\u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48\u0e1e\u0e34\u0e21\u0e1e\u0e4c","Bas\u0131m yeri","\u51fa\u7248\u7269\u5730\u70b9"],"Publication date":["Publikationsdatum","Fecha de titulaci\xf3n","Date du dipl\xf4me","\ucd9c\ud310 \ub0a0\uc9dc","Data di pubblicazione","Publik\xe1ci\xf3 d\xe1tuma","\u51fa\u7248\u65e5","Utgivelsesdato","Data publikacji","Data de publica\xe7\xe3o","Data da publica\xe7\xe3o","\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438","\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23\u0e2a\u0e34\u0e48\u0e07\u0e1e\u0e34\u0e21\u0e1e\u0e4c","Yay\u0131nlanma tarihi","\u51fa\u7248\u65e5\u671f"],"Publication title":["Titel der Publikation","T\xedtulo de publicaci\xf3n","Titre de la publication","\ucd9c\ud310\ubb3c \uc81c\ubaa9","Titolo pubblicazione","Publik\xe1ci\xf3 c\xedme","\u51fa\u7248\u7269\u306e\u30bf\u30a4\u30c8\u30eb","Utgivelsestittel","Tytu\u0142 publikacji","T\xedtulo da publica\xe7\xe3o","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438","\u0e0a\u0e37\u0e48\u0e2d\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23\u0e2a\u0e34\u0e48\u0e07\u0e1e\u0e34\u0e21\u0e1e\u0e4c","Yay\u0131n ad\u0131","\u51fa\u7248\u7269\u540d\u79f0","\u51fa\u7248\u7269\u540d\u7a31"],"Publication year":["\u0639\u0627\u0645 \u0627\u0644\u0646\u0634\u0631","Rok vyd\xe1n\xed","Tahun publikasi","Erscheinungsjahr","A\xf1o de publicaci\xf3n","Ann\xe9e de publication","\ucd9c\ud310 \uc5f0\ub3c4","Anno di pubblicazione","Publik\xe1ci\xf3 \xe9ve","\u51fa\u7248\u5e74","Utgivelses\xe5r","Rok publikacji","Ano de publica\xe7\xe3o","Ano da publica\xe7\xe3o","\u0413\u043e\u0434 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438","\u0e1b\u0e35\u0e17\u0e35\u0e48\u0e1e\u0e34\u0e21\u0e1e\u0e4c","Yay\u0131n Y\u0131l\u0131","\u51fa\u7248\u5e74\u4efd"],Publisher:["\u0627\u0644\u0646\u0627\u0634\u0631","Vydavatel","Penerbit","Herausgeber","Editorial","\xc9diteur","\ucd9c\ud310\uc0ac","Casa editrice","Kiad\xf3","\u51fa\u7248\u793e","Utgiver","Wydawca","Editora","\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e","\u0e2a\u0e33\u0e19\u0e31\u0e01\u0e1e\u0e34\u0e21\u0e1e\u0e4c","Yay\u0131nc\u0131","\u51fa\u7248\u5546","\u51fa\u7248\u8005"],School:["Bildungseinrichtung","Instituci\xf3n","\xc9cole","\ud559\uad50","Istituzione accademica","Iskola","\u5b66\u6821","Skole","Uczelnia","Escola","\u0423\u0447\u0435\u0431\u043d\u043e\u0435 \u0437\u0430\u0432\u0435\u0434\u0435\u043d\u0438\u0435","\u0e2a\u0e16\u0e32\u0e1a\u0e31\u0e19\u0e01\u0e32\u0e23\u0e28\u0e36\u0e01\u0e29\u0e32","Okul","\u5b78\u6821"],"School location":["Standort der Bildungseinrichtung","Lugar de la instituci\xf3n","\ud559\uad50 \uc9c0\uc5ed","Localit\xe0 istituzione accademica","Iskola helysz\xedne:","\u5b66\u6821\u6240\u5728\u5730","Skolested","Lokalizacja uczelni","Localiza\xe7\xe3o da escola","\u041c\u0435\u0441\u0442\u043e\u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0443\u0447\u0435\u0431\u043d\u043e\u0433\u043e \u0437\u0430\u0432\u0435\u0434\u0435\u043d\u0438\u044f","\u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48\u0e15\u0e31\u0e49\u0e07\u0e02\u0e2d\u0e07\u0e2a\u0e16\u0e32\u0e1a\u0e31\u0e19\u0e01\u0e32\u0e23\u0e28\u0e36\u0e01\u0e29\u0e32","Okul konumu","\u5b66\u6821\u5730\u70b9","\u5b78\u6821\u5730\u9ede"],Section:["Bereich","Secci\xf3n","\uc139\uc158","Sezione","R\xe9sz","\u30bb\u30af\u30b7\u30e7\u30f3","Del","Rozdzia\u0142","Se\xe7\xe3o","Sec\xe7\xe3o","\u0420\u0430\u0437\u0434\u0435\u043b","\u0e2a\u0e48\u0e27\u0e19","B\xf6l\xfcm","\u7ae0\u8282","\u5340\u6bb5"],"Source type":["Quellentyp","Tipo de fuente","Type de source","\uc6d0\ubcf8 \uc720\ud615","Tipo di fonte","Forr\xe1st\xedpus","\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7","Kildetype","Typ \u017ar\xf3d\u0142a","Tipo de fonte","\u0422\u0438\u043f \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430","\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e02\u0e2d\u0e07\u0e41\u0e2b\u0e25\u0e48\u0e07\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25","Yay\u0131n t\xfcr\xfc","\u6765\u6e90\u7c7b\u578b","\u4f86\u6e90\u985e\u578b"],Subject:["Thema","Materia","Sujet","\uc8fc\uc81c","Soggetto","T\xe1rgy","\u4e3b\u984c","Emne","Temat","Assunto","\u0422\u0435\u043c\u0430","\u0e2b\u0e31\u0e27\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07","Konu","\u4e3b\u9898"],Title:["\u0627\u0644\u0639\u0646\u0648\u0627\u0646","N\xe1zev","Judul","Titel","T\xedtulo","Titre","\uc81c\ubaa9","Titolo","C\xedm","\u30bf\u30a4\u30c8\u30eb","Tittel","Tytu\u0142","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","\u0e0a\u0e37\u0e48\u0e2d\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07","Ba\u015fl\u0131k","\u6807\u9898","\u6a19\u984c"],Volume:["\u0627\u0644\u0645\u062c\u0644\u062f","Vol","K\xf6t","Bd","Sv","Band","Tomo","\uad8c","K\xf6tet","\u5dfb","Volum","Tom","\u0422\u043e\u043c","\u0e40\u0e25\u0e48\u0e21","Cilt","\u5377","\u5377\u671f"],Year:["Jahr","A\xf1o","Ann\xe9e","\uc5f0\ub3c4","Anno","\xc9v","\u5e74","\xc5r","Rok","Ano","\u0413\u043e\u0434","\u0e1b\u0e35","Y\u0131l","\u51fa\u7248\u5e74"],"University/institution":["Universit\xe4t/Einrichtung","\u5927\u5b66/\u6559\u80b2\u6a5f\u95a2"],Advisor:["Doktorvater","\u30a2\u30c9\u30d0\u30a4\u30b6\u30fc"]};for(var c in l)c in s&&l[c].forEach((function(e){s[e]=s[c]}));var u=$("<div>"+e+"</div>"),d=u.find("#main_title_label_");if(d&&d[0]){o.pubtype="PP_BOOK",(U=u.find("#main_title_label_"))&&U.length&&(M=$(U[0]).text(),o.title=M);var p=u.find("#desc-container");if(p&&p[0]&&(o.abstract=$(p[0]).text()),(R=u.find("div.author"))&&R.length){var h=$(R[0]).text().replace(/,\s/g,"; "),g=this.parseAuthorList(h);o.author=g}var f=e.match(/'PrintISBN_Hit':\s?'(\d+)'\s?,/);f&&f[1]&&(o.isbn=f[1]),(f=e.match(/'EbookISBN_Hit':\s?'(\d+)'\s?,/))&&f[1]&&(o.isbn_alt=f[1]),(f=e.match(/'Publisher_Hit':\s?'(.*)'\s?,/))&&f[1]&&(o.publisher=f[1]),o&&o.title&&m.library.Publication.autoClean(o)}else{var b=u.find("div.display_record_indexing_row"),y={};for(a=0;a<b.length;a++){var v=n.normalizeStr($(b[a]).find("div.display_record_indexing_fieldname").text()),_=s[v];(r=$(b[a]).find("div.display_record_indexing_data")).find("br").replaceWith("\n");var w="";w="author"===_||"editor"===_?n.normalizeStr(r.text().replace(/\n[^=;]*/g,"")):n.normalizeStr(r.text());var P=[];if((t=$(b[a]).find("div.display_record_indexing_data > a, div.display_record_indexing_data > span")).length)for(i=0;i<t.length;i++){var S=n.normalizeStr($(t[i]).text());P.push(S)}_&&(_ in y||(y[_]=[]),y[_].push({str:w,spans:P}))}if(y.pubtype){for(i=0;i<y.pubtype.length;i++)r=y.pubtype[i].str,this.determinePubType(r,o);delete y.pubtype}else{var C=u.find("ul.horizontal.open-access li:last-child");C&&(r=$(C).text(),this.determinePubType(r,o))}for(var _ in y)y[_].forEach((function(e){r=e.str;var t=e.spans;if("url"==_)r=r.replace(/\?accountid=.+/,""),o.url.push(r);else if("issn"==_)o.issn&&(_="issn_alt"),o[_]=r;else if("doi"==_)o[_]=r.replace(/^https?:\/\/[^\/]+\//,"");else if("isbn"==_){var a=m.Utils.extractISBNs(r,{convert:!0,unique:!0});a[0]&&(o.isbn=a[0]),a[1]&&(o.isbn_alt=a[1])}else if("date"==_){(s=m.library.Date.parseDate(r)).month&&(o.month=s.month),s.year&&(o.year=s.year),s.day&&(o.day=s.day)}else if("author"==_||"editor"==_)o[_]=_ in o?o[_].concat(n.parseAuthorList(e.str)):n.parseAuthorList(e.str);else if("details"==_){var s;if("PP_ARTICLE"==o.pubtype){if(o.journal=t[0],6==t.length)o.volume=t[1].replace(/[\(\)]/g,""),o.pages=t[3].replace(/[\(\)]/g,""),(s=m.library.Date.parseDate(t[4])).month&&(o.month=s.month),s.year&&(o.year=s.year)}else if("PP_BOOK"==o.pubtype)o.address=t[0]+" "+t[1],o.publisher=t[2];else if("PP_BOOK_CHAPTER"==o.pubtype)for(i=0;i<t.length;i++)t[i].match(/^\d\d\d\d$/)&&(o.booktitle=t[i-4],o.address=t[i-3]+" "+t[i-2],o.publisher=t[i-1])}else o[_]||(o[_]=r)}));m.library.Publication.autoClean(o);var A=u.find("div.abstract_Text");if(A&&A.length){var E=$(A).text();for(var c in E=this.normalizeStr(E),s)E=E.replace(c,s[c]);"PP_WEBSITE"===o.pubtype&&E.match(/Weblog post/i)&&(o.kind="Blog post");var T=E.match(/(\w+)\s(ed\.|edition)/);if(T&&T[1]){var k=T[1].match(/\d+/);o.edition=k?k[0]:T[1]}var x=m.library.BibliographicInferer.parse(E);delete x.journal,this.mergeNonExistingFields(o,x)}var R=$(A).find("span.titleAuthorETC");if(o.author&&o.author.length||!R||!R[0]||(h=$(R[0]).text(),g=this.parseAuthorList(h),this.mergeNonExistingFields(o,{author:g})),R=$(A).find("span.scholUnivAuthors"),o.author&&o.author.length||!R||!R[0]||(h=$(R[0]).text(),g=this.parseAuthorList(h),this.mergeNonExistingFields(o,{author:g})),!o.journal){var I,L=$(A).find(".titleAuthorETC > strong"),D="";(L&&L[0]||(L=$(A).find(".titleAuthorETC > em"))&&L[0]||(L=$(A).find(".titleAuthorETC:nth-child(2)"))&&L[0])&&(D=$(L[0]).text(),I=m.library.BibliographicInferer.parse(D).journal),I&&(o.journal=I)}if(!o.publisher||!o.address){var N=$(A).find(".titleAuthorETC:nth-child(2)");if(N&&N[0]){var O=$(N[0]).text().match(/,\s*([\w\s]+):\s*([\w\s]+)\./);O&&(!o.address&&O[1]&&(o.address=O[1]),!o.publisher&&O[2]&&(o.publisher=O[2]))}}var U=u.find(".documentTitle");if(!o.title&&U&&U.length){var M=$(U[0]).text();o.title=M.replace(/ - [^\-]*$/g,"")}if(o.country&&(o.address?o.address+=", ":o.address="",o.address+=o.country,delete o.country),o.pages&&o.pages.match(/^\d+$/)&&o.num_pages&&o.num_pages.match(/^\d+$/)){var F=parseInt(o.pages)+parseInt(o.num_pages);o.pages=o.pages+"-"+F,delete o.num_pages}o.abstract=n.normalizeStr(u.find("#abstractZone root").text()),o.abstract||(o.abstract=n.normalizeStr(u.find(".abstract").text())),o.language&&(o.language=m.Utils.normalizeLanguage(o.language)),"PP_CONFERENCE_PAPER"===o.pubtype&&o.journal&&(o.booktitle=o.journal,delete o.journal);var j=u.find("a.pdf-download");j&&j.length&&(o.url||(o.url=[]),o.url.push($(j).attr("href")))}return this.removeInvalidFields(o),o},isArrayOrObj:function(e){return!(!e||!e.toString().match(/\[object Object\]/))},mergeNonExistingFields:function(e,t){for(var r=Object.keys(t),a=0;a<r.length;a++){var i=r[a];this.isArrayOrObj(t[i])&&this.isArrayOrObj(e[i])?this.mergeNonExistingFields(e[i],t[i]):!e[i]&&t[i]&&(e[i]=t[i])}},parseAuthorList:function(e){var t=[];!(e=(e=(e=e.replace(/\s/," ")).replace(/et al\.?/gi,"")).replace(/\[primaryauthor\]/gi,"")).match(/;/)&&e.trim()&&(e=e.split(/,\s/).filter(Boolean).reduce((function(e,t,r){return r%2==0?e+";"+t:e+","+t}))),e=(e=e.replace(/\sand\s/gi,";")).split(/;/);for(var r=0;r<e.length;r++)e[r]=e[r].replace(/[,\.]\s*$/,"").trim(),t.push(m.library.Author.parseAuthor(e[r],{familyNameFirst:!1}));return t},removeInvalidFields:function(e){if("PP_ARTICLE"===e.pubtype)delete e.booktitle;else if("PP_THESIS"===e.pubtype){if(e.journal){var t=e.journal.split(",");e.school||(e.school=t.slice(0,t.length-1).join(",")),!e.publisher&&t.length>1&&(e.publisher=t[t.length-1]),delete e.journal}}else"PP_WEBSITE"!==e.pubtype&&"PP_ENCYCLOPEDIA_ARTICLE"!==e.pubtype||e.journal&&(e.booktitle=e.journal,delete e.journal)},determinePubType:function(e,t){e.match(/(journal\s+article|Scholarly\s+Journal(s?)|Historical\s+Periodicals)/i)||e.match(/^article$/i)?t.pubtype="PP_ARTICLE":e.match(/^review$/i)?(t.pubtype="PP_ARTICLE",t.kind="Review"):e.match(/(chapter|book\s+article)/i)?t.pubtype="PP_BOOK_CHAPTER":e.match(/book/i)?t.pubtype="PP_BOOK":e.match(/(Thesis|Dissertation|Theses)/i)?t.pubtype="PP_THESIS":e.match(/(Magazine|Trade Journal)/i)?(t.pubtype="PP_NEWS_ARTICLE",t.kind="Magazine Article"):e.match(/Newspaper(s?)/i)?(t.pubtype="PP_NEWS_ARTICLE",t.kind="Newspaper Article"):e.match(/Conference\s+Paper/i)?t.pubtype="PP_CONFERENCE_PAPER":e.match(/(Blog|Podcast|Website)/i)?t.pubtype="PP_WEBSITE":e.match(/(Reports)/)?t.pubtype="PP_REPORT":e.match(/(Working\s+Papers)/)?t.pubtype="PP_PREPRINT":e.match(/Government\s+&\s+Official\s+Publications/i)?(t.pubtype="PP_REPORT",t.kind="Government Report"):e.match(/Standards\s+&\s+Practice\s+Guidelines/i)?t.pubtype="PP_STANDARD":e.match(/(Audio|Video)/i)?t.pubtype="PP_VIDEO":e.match(/Encyclopedias|Reference/)&&(t.pubtype="PP_ENCYCLOPEDIA_ARTICLE")},normalizeStr:function(e){var t="";return e&&(t=e.replace(/^[\n\t\r\s]+/,"").replace(/[\n\t\r\s]+$/,"").replace(/[\t\r\n\s]+/g," ")),t},getName:function(){return"ProQuest"}}),m.format.ProQuest=new m.format._ProQuest,m.format._PubMedXML=m.format.AbstractReader.extend({debug:!1,doRead:function(e,t){return this.parsePubMedXml(e,t)},parsePubMedXml:function(e,t){void 0===t&&(t={});var r=[];e&&e.documentElement&&e.xmlVersion||this.isXmlDoc(e)||(e=this.convertStringToXml(e,t));var a=this.find(e,"ReferenceList");for(o=0;o<a.length;o++)$(a[o]).remove();for(var i=[],n=this.find(e,"PubmedArticle"),o=0;o<n.length;o++)i.push(n[o]);var s=this.find(e,"PubmedBookArticle");for(o=0;o<s.length;o++)i.push(s[o]);if(this.isXmlDoc(e)&&e.name&&"pubmedarticle"==e.name.toLowerCase())i.push(e);else if(e.length>0)for(o=0;o<e.length;o++){var l=e[o].tagName;l&&"pubmedarticle"==l.toLowerCase()&&i.push($(e[o]))}for(o=0;o<i.length;o++){var c=i[o],u=this.parsePubMedItem(c);"refs"in t||delete u.refs,"affiliation"in t?delete u.affiliation:["author","editor","translator","series_editor"].forEach((function(e){if(e in u)for(var t=0;t<u[e].length;t++)delete u[e][t].affiliation})),"nlmid"in t||delete u.nlmid,u&&r.push(u)}return r},isXmlDoc:function(e){return!!(e&&e.name&&e.attr&&e.children)},convertStringToXml:function(e,t){return m.Globals.isDocAddOn()||1==t.useXmlDocument?new XmlDocument(e):$(e)},findSingle:function(e,t){var r;return this.isXmlDoc(e)?(r=this.find(e,t)).length>0?r[0]:null:(r=$(e).find(t)).length>0?r.first():null},find:function(e,t){return this.isXmlDoc(e)?this.findWithXmlDoc(e,t):$(e).find(t)},findWithXmlDoc:function(e,t){var r=t.split(" ");return this.findXmlChildren(e,r)},findXmlChildren:function(e,t){var r,a,i,n=t.shift();n.match(/(.*?)\[(.*?)=(.*?)\]/)?(r=RegExp.$1,a=RegExp.$2,i=RegExp.$3):r=n;var o=e.childrenNamed(r);if(a&&(o=o.filter((function(e){return e.attr[a]==i}))),0==o.length)return[];if(0==t.length)return o;for(var s=[],l=0;l<o.length;l++){var c=o[l],u=m.Utils.clone(t);s=s.concat(this.findXmlChildren(c,u))}return s},text:function(e){return this.isXmlDoc(e)?e.val:$(e).text()},attr:function(e,t){return this.isXmlDoc(e)?e.attr[t]:"attribs"in e?e.attribs[t.toLowerCase()]:$(e).attr(t)},parsePubMedItem:function(e){var t=this.findSingle(e,"MedlineCitation");if(t||(t=this.findSingle(e,"BookDocument Book")),!t)return console.log("N entry found!"),null;var r={year:void 0};return this.parseSimpleTextFields(r,t,e),this.parseDateFields(r,t,e),this.parseXrefs(r,t,e),this.parseAuthors(r,t,e),this.parseAbstract(r,t,e),this.parseKeywords(r,t,e),this.parseAffiliations(r,t,e),this.fixPubtypes(r,t,e),this.fixBooks(r,t,e),this.finalCleanup(r,t,e),r},parseSimpleTextFields:function(e,t,r){var a={title:"Article ArticleTitle",title2:"BookDocument ArticleTitle",original_title:"Article VernacularTitle",volume:"Article Journal JournalIssue Volume",issue:"Article Journal JournalIssue Issue",pages:"Article Pagination MedlinePgn",language:"Article Language",journal:"MedlineJournalInfo MedlineTA",nlmid:"MedlineJournalInfo NlmUniqueID",journal2:"Article Journal ISOAbbreviation",journalfull:"Article Journal Title",issn:"Article Journal ISSN",issn2:"MedlineJournalInfo ISSNLinking",doi:"PubmedData ArticleIdList ArticleId[IdType=doi]",pii:"PubmedData ArticleIdList ArticleId[IdType=pii]",pmid:"PubmedData ArticleIdList ArticleId[IdType=pubmed]",doi2:"PubmedBookData ArticleIdList ArticleId[IdType=doi]",pii2:"PubmedBookData ArticleIdList ArticleId[IdType=pii]",pmid2:"PubmedBookData ArticleIdList ArticleId[IdType=pubmed]",pmid3:">PMID",doi3:"Article ELocationID[EIdType=doi]",doi4:"Book ELocationID[EIdType=doi]",doi5:"BookDocument ArticleIdList ArticleId[IdType=doi]",pii3:"Article ELocationID[EIdType=pii]",pii4:"Book ELocationID[EIdType=pii]",pii5:"BookDocument ArticleIdList ArticleId[IdType=pii]",booktitle:"BookTitle",publisher:"Publisher PublisherName",address:"Publisher PublisherLocation",isbn:"Isbn",pmc:"PubmedData ArticleIdList ArticleId[IdType=pmc]"};for(var i in a){var n,o,s=a[i];if(void 0===e[i=i.replace(/\d/g,"")]){if((n=this.findSingle(t,s))&&"N"!==this.attr(n,"ValidYN"))""!==(o=this.text(n))&&(e[i]=o);else if((n=this.findSingle(r,s))&&"N"!==this.attr(n,"ValidYN"))""!==(o=this.text(n))&&(e[i]=o)}else if(i.match(/issn/))if((n=this.findSingle(t,s))&&"N"!==this.attr(n,"ValidYN"))""!==(o=this.text(n))&&o!==e[i]&&(e.issn_alt=o)}if(!("pmc"in e))for(var l=this.find(t,"OtherID"),c=0;c<l.length;c++){var u=this.text(l[c]);u.match(/^PMC/)&&(e.pmc=u.replace(/(PMC\d+)(\s.*)/,"$1"))}e.language&&(e.language=m.Utils.normalizeLanguage(e.language)),e.pii&&(e.pii=e.pii.replace(/^\s+/,"").replace(/\s+$/,""),e.pii.match(/\s/)&&delete e.pii)},parseDateFields:function(e,t,r){this.extractDate(t,"Article Journal JournalIssue PubDate MedlineDate",e),this.extractDate(t,"Article Journal JournalIssue PubDate",e),this.extractDate(t,"Article ArticleDate",e),this.extractDate(t,"ContributionDate",e),this.extractDate(t,"PubMedPubDate[PubStatus=accepted]",e),this.extractDate(t,"PubMedPubDate[PubStatus=pubmed]",e),this.extractDate(r,"BookDocument ContributionDate",e),this.extractDate(r,"PubmedBookData History PubMedPubDate[PubStatus=pubmed]",e)},extractDate:function(e,t,r){var a;if(void 0===r.year){if(a=this.findSingle(e,t)){var i=this.findSingle(a,"Year"),n=this.findSingle(a,"Month"),o=this.findSingle(a,"Day"),s=this.findSingle(a,"Season");if(i)r.year=this.text(i),n&&(r.month=this.text(n)),o&&(r.day=this.text(o)),!s||n||o||(r.season=this.text(s));else{var l=this.text(a),c=m.library.Date.parseDate(l);null!==c.year&&(r.year=c.year),null!==c.month&&(r.month=c.month),null!==c.day&&(r.day=c.day)}}}else if(t.match(/ArticleDate/)&&void 0===r.month&&(a=this.findSingle(e,t))){i=this.findSingle(a,"Year"),n=this.findSingle(a,"Month"),o=this.findSingle(a,"Day");i&&n&&this.text(i)===r.year&&(r.month=this.text(n),o&&(r.day=this.text(o)))}},parseXrefs:function(e,t,r){for(var a=this.find(r,"MedlineCitation CommentsCorrectionsList CommentsCorrections"),i=0;i<a.length;i++){var n=a[i],o=this.findSingle(n,"PMID");if(o){var s=this.attr(n,"RefType");if("Cites"===s){"refs"in e||(e.refs=[]),e.refs.push({pmid:this.text(o)});continue}var l={type:s,pmid:this.text(o)};m.library.Publication.addXref(e,l)}}},parseAuthors:function(e,t,r){var a=this.findAuthors(t,"Article AuthorList Author"),i=this.findAuthors(t,"Article AuthorList[Type=authors] Author");0==i.length&&0==(i=this.findAuthors(r,"BookDocument AuthorList[Type=authors] Author")).length&&(i=this.findAuthors(r,"BookDocument Book AuthorList[Type=authors] Author"));var n=this.findAuthors(t,"AuthorList[Type=editors] Author");0==n.length&&0==(n=this.findAuthors(r,"BookDocument AuthorList[Type=editors] Author")).length&&(n=this.findAuthors(r,"BookDocument Book AuthorList[Type=editors] Author")),i.length>0&&n.length>0||i.length>0&&0==a.length?e.author=i:a.length>0&&(e.author=a),n.length>0&&(e.editor=n)},findAuthors:function(e,t){for(var r=this.find(e,t),a=[],i=0;i<r.length;i++){var n=r[i];if("N"!==this.attr(n,"ValidYN")){var o={},s=this.findSingle(n,"ForeName"),l=this.findSingle(n,"LastName"),u=this.findSingle(n,"Initials"),d=this.findSingle(n,"CollectiveName"),p=this.findSingle(n,"Suffix"),h=this.findSingle(n,"Identifier"),g=this.find(n,"Affiliation");if(s&&(o.first=this.text(s)),l&&(o.last=this.text(l)),u&&(o.initials=this.text(u)),d&&(o.collective=this.text(d)),p&&(o.jr=this.text(p)),h&&(c()&&h.attr||!c()&&"attribs"in h)&&(h=[h]),h&&h.length>0)for(var f=0;f<h.length;f++)"ORCID"!=this.attr(h[f],"Source")||o.orcid||(o.orcid=this.text(h[f]).replace(/https?:\/\/orcid\.org\//i,""));if(g&&g.length>0){for(var b=[],y=0;y<g.length;y++){var v=m.Utils.normalizeString(this.text(g[y]));b.push(v)}b.length>0&&(o.affiliation=b.join("; "))}m.library.Author.autoClean(o),a.push(o)}}return a},parseAffiliations:function(e,t,r){for(var a=[],i=this.find(t,"Article AuthorList Author Affiliation"),n=0;n<i.length;n++){var o=m.Utils.normalizeString(this.text(i[n]));-1===a.indexOf(o)&&a.push(o)}e.affiliation=a.join(" ")},parseKeywords:function(e,t,r){for(var a=[],i=this.find(t,"KeywordList Keyword"),n=0;n<i.length;n++)a.push(this.text(i[n]));e.keywords=a.join("; ")},parseAbstract:function(e,t,r){var a,i,n=[],o=this.find(t,"Article Abstract AbstractText");0==o.length&&(o=this.find(r,"BookDocument Abstract AbstractText"));for(var s=0;s<o.length;s++){var l=o[s];null!=(a=this.attr(l,"Label"))&&""!==a&&n.push(a+":"),i=this.text(l),n.push(i)}e.abstract=n.join(" ")},fixPubtypes:function(e,t,r){for(var a={},i=this.find(t,"Article PublicationTypeList PublicationType"),n=0;n<i.length;n++){var o=i[n],s=this.text(o).toLowerCase();s.match(/Journal Article/i)||(s.match(/^Review/i)?a.Review=!0:s.match(/^News/i)?a.News=!0:s.match(/Erratum/i)?a.Erratum=!0:s.match(/Comment/i)?a.Commentary=!0:s.match(/Retracted/i)?a.Retracted=!0:s.match(/Retraction/i))}e.kind="Research Article",a.Retracted||(a.Review?e.kind="Review":a.Commentary?e.kind="Commentary":a.News&&(e.kind="News")),e.pubtype="PP_ARTICLE"},fixBooks:function(e,t,r){var a;if(this.findSingle(r,"BookDocument ArticleTitle")&&(e.pubtype="PP_BOOK_CHAPTER",delete e.kind,a=this.findSingle(r,"PubmedBookData ArticleIdList ArticleId[IdType=bookaccession]"))){var i=this.text(a);e.url="https://www.ncbi.nlm.nih.gov/books/"+i+"/"}if(e.booktitle&&!e.title&&(e.pubtype="PP_BOOK",e.title=e.booktitle,delete e.kind,delete e.booktitle,a=this.findSingle(t,"PubmedData ArticleIdList ArticleId[IdType=bookaccession]"))){i=this.text(a);e.url="https://www.ncbi.nlm.nih.gov/books/"+i+"/"}},finalCleanup:function(e,t,r){e.abstract&&(e.abstract=e.abstract.replace(/(\n|\t)/g," "),e.abstract=e.abstract.replace(/\s+/g," ")),void 0!==e.title&&(e.title=e.title.replace(/\s*\.$/,""),e.title.match(/^'[^']+'$/)&&(e.title=e.title.replace(/'/g,""))),void 0!==e.booktitle&&(e.booktitle=e.booktitle.replace(/\s*\.$/,""))}}),m.format.PubMedXML=new m.format._PubMedXML,m.format._PubMedNBIB=m.format.AbstractReader.extend({debug:!1,doRead:function(e,t){return this.parsePubMedNBIB(e,t)},parsePubMedNBIB:function(e,t){void 0===t&&(t={});var r,a,i=[],n={name:"doi",parse:function(e){if(e.match(/\[doi\]/))return e.replace(" [doi]","")}},o={name:"author",parse:function(e){return m.library.Author.parseAuthor(e,{familyNameFirst:!1})}},s={PMID:"pmid",TI:"title",AB:"abstract",VI:"volume",IP:"issue",TA:"journal",JT:"journalfull",PB:"publisher",PL:"address",BTI:"booktitle",PT:"pubtype",PG:"pages",AD:"affiliation",OT:"keywords",TT:"original_title",PMC:"pmc",AUID:"orcid",ISBN:{name:"isbn",parse:function(e){return m.Utils.extractISBNs(e,{convert:!0,unique:!0,normalize:!0})}},DP:{name:"published",parse:function(e){return m.library.Date.parseDate(e)}},DEP:{name:"published",parse:function(e){if(e){var t=e.substring(0,4)+"/"+e.substring(4,6)+"/"+e.substring(6,8);return m.library.Date.parseDate(t)}}},FAU:o,IS:{name:"issn",parse:function(e){return e.replace(/\s*\(.*/,"")}},LA:{name:"language",parse:function(e){return m.Utils.normalizeLanguage(e)}},LID:n,AID:n,CN:o},l=e.split(/(?=PMID-|OWN\s+-\s+ERIC)/);for(r=0;r<l.length;r++){var c={},u=l[r].split(/\r?\n(?=[A-Z])/);for(a=0;a<u.length;a++){var d=u[a].substring(0,5).replace(/(\s?\s?\s?)-/,""),p=s[d];if(p){var h=u[a].substring(6);if(m.Utils.isString(p))"AUID"===d?c.author&&(c.author[c.author.length-1].orcid=h.replace("ORCID:","").trim()):"PT"===d?(h.match(/Article/i)||h.match(/Editorial/i)?c[p]="PP_ARTICLE":h.match(/Book Chapter/i)?c[p]="PP_BOOK_CHAPTER":h.match(/Book/i)?c[p]="PP_BOOK":h.match(/Preprint/i)&&(c[p]="PP_PREPRINT"),h.match(/Review/i)&&(c.kind="Review"),h.match(/Research/i)&&(c.kind="Research Article")):"OT"===d?c[p]?c[p]=c[p]+"; "+h.replace("*",""):c[p]=h.replace("*",""):c[p]=this.cleanString(h);else if(m.Utils.isObject(p))if("author"===p.name)c.author||(c.author=[]),c.author.push(p.parse(h));else if(p&&p.parse){var g=p.parse(h);g&&c[p.name]&&"issn"===p.name&&g!==c.issn?c.issn_alt=g:"DEP"===d&&g&&c[p.name]?c.published=g:g&&!c[p.name]&&(m.Utils.isString(g)&&(g=this.cleanString(g)),c[p.name]=g)}}}Object.keys(c).length>0&&(c&&!c.pubtype&&(c.pubtype="PP_ARTICLE"),c&&"PP_BOOK"===c.pubtype&&!c.title&&c.booktitle&&(c.title=c.booktitle,delete c.booktitle),i.push(c))}return i},cleanString:function(e){return e.match(/^'/)&&e.match(/'\.$/)&&(e=e.replace(/^'/,"").replace(/'\.$/,"")),e.replace(/\s\s+/g," ").trim()}}),m.format.PubMedNBIB=new m.format._PubMedNBIB,m.format._ResearchGate=m.format.AbstractReader.extend({doRead:function(e){var t;return t=this._readHTML(e),m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t=m.format.HTML.doRead(e)[0],r=$("<div>"+e+"</div>"),a=r.find('span[data-testid="research-meta-type"]').text().replace(/\n/g,""),i=r.find("div.publication-meta-secondary").text().replace(/\n/g,"");if("Article"===a)t.pubtype="PP_ARTICLE";else if("Book"==a)t.pubtype="PP_BOOK";else if("Preprint"==a)t.pubtype="PP_PREPRINT";else if("Conference Paper"==a)t.pubtype="PP_CONFERENCE_PAPER";else if("Chapter"==a)t.pubtype="PP_BOOK_CHAPTER";else if("Technical Report"==a&&(t.pubtype="PP_REPORT",i.indexOf("Report number:")>-1)){var n=i.substring(i.indexOf("Report number:"),i.length),o=n.indexOf(",")>-1?n.indexOf(","):n.length,s=n.substring(n.indexOf(":")+2,o);t.number=s}"PP_ARTICLE"==t.pubtype?t.journal=r.find('meta[property="citation_journal_title"]').attr("content"):(t.pubtype||"").match(/PP_BOOK/)?(t.booktitle=r.find('meta[property="citation_inbook_title"]').attr("content"),t.isbn=r.find('meta[property="citation_isbn"]').attr("content")):"PP_CONFERENCE_PAPER"===t.pubtype&&(t.booktitle=r.find('meta[property="citation_conference_title"]').attr("content"));var l=r.find('div[itemprop="description"]');return l&&l.length&&(t.abstract=l.text()),t},getName:function(){return"ResearchGate"}}),m.format.ResearchGate=new m.format._ResearchGate,m.format._References=m.format.AbstractReader.extend({debug:!0,buildReferenceExtractor:function(e,t,r){var a=this,i=t.split(/\s+/),n=1,o={},s=[];void 0===r&&(r={authorParseParams:{familyNameFirst:!0,commasWithinNames:!1}}),i.forEach((function(e){var t=e.replace(/_/g,"");if(a.patterns[t]){var r=a.patterns[t],i=!1;r.match(/\(/)&&(i=!0),i&&(o[t]=n++),s.push(r)}else s.push(t)}));var l=new RegExp(s.join("\\s?"),"g");return{name:e,captureMap:o,regexp:l,params:r,getCount:function(e){for(var t=0;null!==this.regexp.exec(e);)t++;return t},getRefs:function(e,t){for(var r=[],a=null;null!==(a=this.regexp.exec(e));){var i=this.getData(a,t);r.push(i)}return r},getData:function(e,t){var r={};r._origText=e[0],r._extractor=this.name;var a=m.Utils.apply(this.params.authorParseParams,t.authorParseParams);for(var i in this.captureMap)if(!i.match(/^(NO|VOL)$/)){var n=e[this.captureMap[i]];n=m.Utils.strip(n);var o=i;switch(i){case"authors":o="author",n.indexOf("NCBI Google Scholar")>=0&&(n=n.substring(n.indexOf("NCBI Google Scholar")+19)),n=n.replace(/^\s*\d+\.\s*/g,""),n=m.library.Author.parseAuthorList(n,a);break;case"yearParens":o="year";break;case"issueParens":o="issue";break;case"pagesSingle":o="pages"}r[o]=n}return r.pubtype="PP_ARTICLE",r}}},patterns:{any:"(.*)",year:"(\\d{4}[a-z]?)",yearParens:"\\((\\s?\\d{4}[a-z]?\\s?)\\)",colon:":",semicolon:";",period:"\\.",seperator:"[\\.;,:\\|]",stop:"[\\.\\?\\!:]",journal:"([^\\d\\|]+)",volume:"(\\d+)",VOL:"([Vv]olume|VOLUME|VOL|[Vv]ol)\\.?",NO:"([Ii]ssue|ISSUE|[Nn]umber|NUMBER|NO|[Nn]o)\\.?",month:"(Jan|January|Feb|February|Mar|March|Apr|April|May|June?|July?|Aug|August|Sep|September|Oct|October|Nov|Novemer|Dec|December)\\.?",PP:"p{1,2}\\.?",issue:"(\\d+)",issueParens:"\\((\\d+)\\)",pages:"(\\d+[^\\/,]{1,3}\\d+|e\\d+)",pagesSingle:"([RrEe]\\d+|\\d+)",title:"([^\\.]*?)",authors:"([\\w\xc4-\xff,\\.\\; \\n-]+?)"},addExtractor:function(e,t,r){this.extractors.push(this.buildReferenceExtractor(e,t,r))},getExtractors:function(){return this._extractors?this._extractors:(this.extractors=[],this.addExtractor("PLOS","_authors_ _yearParens_ _title_ _stop_ _journal_ _volume_ _stop_ _pages_ _stop_"),this.addExtractor("BMC","_authors_ _colon_ _title_ _period_ _journal_ _year_ , _volume_ _issueParens_ _colon_ _pages_ _stop_",{authorParseParams:{familyNameFirst:!0}}),this.addExtractor("BMC2","_authors_ _colon_ _title_ _period_ _journal_ _year_ , _volume_ _colon_ _pages_ _stop_",{authorParseParams:{familyNameFirst:!0}}),this.addExtractor("Highwire","_authors_ _yearParens_ _title_ _period_ _journal_ _volume_ _colon_ _pages_ _stop_",{authorParseParams:{familyNameFirst:!0,commasWithinNames:!1}}),this.addExtractor("HighwireWithCommas","_authors_ _yearParens_ _title_ _period_ _journal_ _volume_ _colon_ _pages_ _stop_",{authorParseParams:{familyNameFirst:!0,commasWithinNames:!0}}),this.addExtractor("MBE","_authors_ _year_ _period_ _title_ _period_ _journal_ _volume_ _colon_ _pages_ _stop_",{authorParseParams:{familyNameFirst:!0,commasWithinNames:!0}}),this.addExtractor("NAR","_authors_ _period_ _title_ _period_ _journal_ _year_ _semicolon_ _volume_ _colon_ _pages_ _stop_",{authorParseParams:{familyNameFirst:!0,commasWithinNames:!1}}),this.extractors)},doRead:function(e,t){var r=this.getExtractors();return this.readPubsFromText(e,r,t)},getDefaultParams:function(){return{removeNewlines:!0,collapseWhitespace:!0,extractor:void 0}},readPubsFromText:function(e,t,r){!m.Utils.isArray(e)&&m.Utils.isString(e)&&(e=[e]);var a=this.getDefaultParams();r=m.Utils.apply(a,r);for(var i=0;i<e.length;i++){var n=e[i];!0===r.removeNewlines&&(n=n.replace(/\n/g,"")),!0===r.collapseWhitespace&&(n=n.replace(/\s+/g," ")),e[i]=n}if(void 0!==r.extractors){var o=m.Array.mapBoolean(r.extractors);t=m.Array.filter(t,(function(e){return!0===o[e.name]}))}for(i=0;i<t.length;i++){var s=t[i];this.c.log("applying extractor",s.name,"to",e.length,"strings");for(var l=[],c=0;c<e.length;c++)l=l.concat(s.getRefs(e[c],r));if(this.c.log("  got ",l.length,"refs"),this.refsLookGood(l))return l}return[]},refsLookGood:function(e){if(0==e.length)return!1;if(e.length>300)return!1;var t=0,r=0,a=0;e.forEach((function(e){e.title||t++,(!e.author||e.author.length<1)&&r++;for(var i=e.author,n=0;n<i.length;n++){var o=i[n],s=null!=o.first,l=null!=o.last;s&&l||a++}}));var i=e.length/2;return t>i||r>i?(console.log("  refs look bad due to missing title and/or authors"),console.log(m.pp(e)),!1):!(a>i)||(console.log("  refs look bad due to single-word authors"),console.log(m.pp(e)),!1)}}),m.format.References=new m.format._References,m.format._RefWorks=m.format.AbstractReader.extend({_fieldKeys:{A1:{default:"author","Book, Edited":"editor"},A2:{default:"editor","Book, Edited":"series_editor","Case/Court Decisions":"journal","Video/DVD":"series_editor",Patent:"assignee"},A3:{default:"series_editor","Case/Court Decisions":"series","Video/DVD":"editor"},A4:"translator",A5:"contributor",A6:null,AB:"abstract",AD:"affiliation",AN:null,AV:null,CL:null,CN:"call_number",CR:null,DB:"database",DO:"doi",DS:null,ED:{default:"edition",Patent:"class",Map:"series"},FD:"month",ID:null,IP:null,IS:{default:"issue",Patent:"patent_number","Laws/Statutes":"session","Bills/Resolutions":"session","Book, Section":"chapter"},JF:{default:"journalfull","Video/DVD":"series",Report:"institution","Conference Proceedings":"booktitle","Book, Section":"booktitle"},JO:{default:"journal",Report:"institution","Conference Proceedings":"booktitle"},K1:"keywords",LA:"language",LK:"url",LL:null,NO:"note",OL:null,OP:"endpage",OT:"original_title",PA:"note",PB:{default:"publisher","Case/Court Decisions":"jurisdiction","Laws/Statutes":"jurisdiction",Patent:"international_class",Artwork:"institution"},PMCID:"pmc",PMID:"pmid",PP:{default:"address",Patent:"issuing_authority"},RD:null,RT:"pubtype",SF:null,SL:null,SN:"issn",SP:"startpage",SR:null,ST:"titleshort",T1:"title",T2:{default:"booktitle","Book, Whole":"series","Music Score":"series",Monograph:"series","Magazine Article":"series","Conference Proceedings":"conference","Book, Edited":"series"},T3:null,U10:null,U11:null,U12:null,U13:null,U14:null,U15:null,U1:null,U2:null,U3:null,U4:null,U5:null,U6:null,U7:null,U8:null,U9:null,UL:"url",VO:{default:"volume","Video/DVD":"medium",Patent:"application_number",Map:"scale","Laws/Statutes":"section","Bills/Resolutions":"section","Computer Program":"version",Artwork:"medium"},WP:null,WT:"booktitle",WV:"version",YR:"year"},_formattedFields:["title","booktitle","abstract","note","original_title","titleshort"],doRead:function(e){if(e&&m.Utils.isString(e)&&e.length){var t=[];if(e.match(/<reference>/)){var r=this.getXMLParser(e),a=this._getBlocksXML(r);t=this._parse(a)}else{a=this._getBlocks(e);t=this._parse(a)}return t}return[]},_getBlocksXML:function(e){var t=this,r=[];return $(e).find("reference").each((function(e,a){var i={};Object.keys(t._fieldKeys).forEach((function(e){var t=$(a).find(e.toLowerCase());if(t&&t.length>0)for(var r=0;r<t.length;r++){var n=m.Utils.normalizeString($(t[r]).text());e in i||(i[e]=[]),i[e].push(n)}})),i&&i.RT&&r.push(i)})),r},_getBlocks:function(e){for(var t=[],r=e.split(/[\r\n]+/),a=new RegExp("^("+Object.keys(this._fieldKeys).join("|")+")\\s+","i"),i={},n=0;n<r.length;n++){var o=r[n].replace(/\r/g,""),s=o.match(a);if(s&&s[1]){var l=s[1];"RT"===l&&(Object.keys(i).length>0&&t.push(m.Utils.clone(i)),i={});var c=o.replace(/^[A-Z\d]+\s+/,"").trim();l in i||(i[l]=[]),i[l].push(c)}}return t.push(m.Utils.clone(i)),t},_parse:function(e){var t=this,r=[];return e.forEach((function(e){var a={url:[]},i=e.RT;if(Object.keys(e).forEach((function(r){var n=e[r],o=t._fieldKeys[r];o&&(m.Utils.isObject(o)&&(o=o[i]||o.default),n.forEach((function(e){if("pubtype"===o){var r=m.library.PublicationTypes.getInputTypeForPub(e,"refworks");a.pubtype=r.pubtype,r.kind&&(a.kind=r.kind)}else if(["author","editor","contributor","translator","series_editor"].indexOf(o)>-1){a[o]||(a[o]=[]);var i={};e.indexOf(",")<0&&(i={familyNameFirst:!1});var n=m.library.Author.parseAuthor(e,i);(n.last||n.collective)&&a[o].push(n)}else if("keywords"===o)if(a.keywords||(a.keywords=[]),e.indexOf(" -- ")){var s=e.split(" -- ");s&&s.length&&(a.keywords=a.keywords.concat(s))}else a.keywords.push(e);else if("issn"===o)if("PP_BOOK"===a.pubtype||"PP_BOOK_CHAPTER"===a.pubtype){var l=m.Utils.extractISBNs(e,{convert:!0,unique:!0});l&&(a.isbn=l)}else{var c=m.library.Publication.checkValidityOfISSN(e);""!==c&&(a.issn=c)}else"url"===o?a.url.push(e):"endpage"===o?a.startpage&&a.startpage!==e&&(a[o]=e):"note"===o?(a.note||(a.note=""),a.note+=t._replaceStringFormatting(e)):t._formattedFields.indexOf(o)>=0?a[o]=t._replaceStringFormatting(e):a[o]=e})))})),a.edition&&m.Utils.isUrlLike(a.edition)&&(a.url.push(a.edition),delete a.edition),a.language&&(a.language=m.Utils.normalizeLanguage(a.language)),a.doi){var n=m.library.Publication.extractDoi(a.doi);n&&(a.doi=n)}a.pubtype&&(m.library.Publication.removeNonPubtypeSpecificFields(a),r.push(m.Utils.clone(a)))})),r},_replaceStringFormatting:function(e){return e.replace(/0RW1S34RfeSDcfkexd09rT0/g,"<b>").replace(/1RW1S34RfeSDcfkexd09rT0/g,"</b>").replace(/0RW1S34RfeSDcfkexd09rT1/g,"").replace(/1RW1S34RfeSDcfkexd09rT1/g,"").replace(/0RW1S34RfeSDcfkexd09rT2/g,"<i>").replace(/1RW1S34RfeSDcfkexd09rT2/g,"</i>").replace(/0RW1S34RfeSDcfkexd09rT3/g,"<sup>").replace(/1RW1S34RfeSDcfkexd09rT3/g,"</sup>").replace(/0RW1S34RfeSDcfkexd09rT4/g,"<sub>").replace(/1RW1S34RfeSDcfkexd09rT4/g,"</sub>")},getName:function(){return"RefWorks"}}),m.format.RefWorks=new m.format._RefWorks,m.format._Ris=m.format.AbstractReader.extend({mapOut:{},hierarchy:["T1","TI","ST","CT","BT","T3","A1","AU","A3","A2","A4","ED","ET","SE","IS","CP","SP","EP","PG","AD","CY","VL","AB","N2","PB","KW","PY","DA","Y1","DO","DOI","ID","SN","JF","JO","JA","UR","L1","L2","L4","RN","NV","OP","N1","N2","C1","C2","C3","C4","C5","C6","C7","C8","M1","M2","M3","L3","U2","IB","RT","BN"],getName:function(){return"RIS"},doRead:function(e,t){return void 0===t&&(t={}),this._readRis(e,t)},_extractRis:function(e){for(var t="",r=e.split(/\n/),a=!1,i=0;i<r.length;i++)if(r[i].match(/^TY\s\s-\s/)&&(a=!0),a){r[i].match(/^\s*<\/body>/)&&(a=!1);var n=r[i].replace(/\s*(<p>|<br>|<\/a>)+\s*$/i,"");t+=(n=n.replace(/<A HREF="([^"]+)">/,""))+"\n"}return t},_readRis:function(e,t){void 0===e&&(e=""),e.match(/^\s*<!doctype html/)&&(e=this._extractRis(e));for(var r=e.split(/[\r\n]+/),a=[],i=[],n="",o=0;o<r.length;o++)r[o]=r[o].replace(/\t/g," "),r[o].match(/^\s+..\s\s-\s/)&&(r[o]=r[o].replace(/^\s+/,"")),r[o]=r[o].replace(/\s+$/,""),r[o].match(/^ER\s+-\s*/)?(a.push(n),i.push(a),a=[],n=""):r[o].match(/^([A-Z\d]{2}|DOI)\s+-\s*/)?(""==n||a.push(n),n=r[o]):r[o].match(/\S/)&&(n=n.replace(/\s+$/,""),r[o]=r[o].replace(/^\s+/,""),n+=" "+r[o]);""!=n&&(a.push(n),i.push(a));var s=[];for(o=0;o<i.length;o++){o%10==0&&this.fire("progress",{progress:o/i.length,totalCount:i.length});try{var l=i[o],c=this.handleEntry(l,t);c&&s.push(c)}catch(e){m.Utils.isFunction(m.log)&&m.log({type:"exception",subtype:"Parsing",msg:"Caught error when parsing RIS: "+e.message})}}return s},handleEntry:function(e,t){var r,a,i,n,o={};for(r=0;r<e.length;r++)e[r]=e[r].replace(/\u2028/g," "),n=void 0,i=void 0,(a=e[r].match(/^([A-Z\d]{2}|DOI)\s+\-\s(.+)/))&&3===a.length&&(i=a[1],"null"===(n=a[2])&&(n=void 0)),void 0!==n&&""!=(n=n.replace(/^\s+/,""))&&void 0!==i&&(o[i]||(o[i]=[]),o[i].push(n));if(!(Object.keys(o).length<=1)){o.PY&&o.Y2&&o.PY[0]&&o.Y2[0]&&o.PY[0].match(/^\d{4}$/)&&o.Y2[0].match(/^[A-Z\.]+$/i)&&(o.PY[0]=o.Y2[0]+" "+o.PY[0],delete o.Y2),o.A1&&o.AU&&o.A1[0]&&o.AU[0]&&o.A1[0]===o.AU[0]&&delete o.A1,o.T2&&o.JO&&o.T2[0]&&o.JO[0]&&o.T2[0]===o.JO[0]&&delete o.T2,o.T2&&o.JF&&o.T2[0]&&o.JF[0]&&o.T2[0]===o.JF[0]&&delete o.T2,o.T2&&o.JA&&o.T2[0]&&o.JA[0]&&o.T2[0]===o.JA[0]&&delete o.T2,o.EP&&(o.SP&&o.SP[0]&&o.EP[0]&&(o.SP[0]+="-"+o.EP[0]),delete o.EP);var s={pubtype:"PP_MISC"},l={T1:!1};if(o.RT&&!o.TY&&("Journal Article"===o.RT[0]?o.TY=["JOUR"]:"Book"===o.RT[0]&&(o.TY=["BOOK"])),"TY"in o||(o.TY=["JOUR"]),o.TY&&o.TY.length>0){if(o.TY[0]=o.TY[0].toUpperCase(),"CONF"==o.TY[0]&&o.BT&&!o.T2&&(o.TY[0]="CPAPER",o.T2=o.BT,delete o.BT),"ELEC"==o.TY[0])if(o.SN&&o.SN.length)if(o.SN[0].match(/^\s*\d{4}-[\dX]{4}/))o.TY[0]="JOUR";else m.Utils.extractISBNs(o.SN[0]).length>0&&(o.TY[0]="BOOK");var c=m.library.PublicationTypes.getInputTypeForPub(o.TY,"ris");s.pubtype=c.pubtype,c.kind&&(s.kind=c.kind)}var u=m.library.PublicationFields.getInputMapForPubType(s.pubtype,"ris");o.TY&&"CONF"==o.TY&&(u.T2="conference",u.T3="series",u.A2="editor",u.A3="series_editor",u.DA="conference_date"),t&&t.parseIDs&&(u.ID="_risID",u.BN="_risBN");for(var d={},p=0;p<this.hierarchy.length;p++){if(void 0!==o[R=this.hierarchy[p]])if(void 0!==(I=u[R])){if(o[R]){"T1"==R&&(l.T1=!0);for(var h=0;h<o[R].length;h++)if(L=o[R][h],"author"===I||"editor"===I||"series_editor"===I||"translator"===I){I in s||(s[I]=[]);var g=(L=(L=L.replace(/,\s*$/,"")).replace(/,,/g,",")).split(/,\s*/);if(g.length>2)if(g[2]&&g[2].match(/Sen|Jr|V|IV|III|3rd|II|2nd/))s[I].push({last:g[0],first:g[1],jr:g[2]});else if(L.match(/\|/)){g=L.split(/\|/);for(var f=0;f<g.length;f++){var b={};b=m.library.Author.parseAuthor(g[f],{familyNameFirst:!1}),s[I].push(b)}}else{var y=m.library.Author.parseAuthorList(L,{delimiter:",",familyNameFirst:!1});s[I]=s[I].concat(y)}else if(2==g.length){b={};b=m.library.Author.parseAuthor(L,{familyNameFirst:!1}),s[I].push(b)}else s[I].push({collective:L})}else if("keywords"==I)s.keywords||(s.keywords=[]),s.keywords.push(L);else if("published"==I||"filed"==I||"conference_date"==I||"accessed"==I){this.scorePubDate(s,I);var v=m.library.Date.parseDate(L),_=0;v.year&&(_+=3),v.month&&(_+=2),v.day&&(_+=1),_>this.scorePubDate(s,I)&&(I in s||(s[I]={}),v.year&&(s[I].year=v.year),v.month&&(s[I].month=v.month),v.day&&(s[I].day=v.day),v.literal&&(s[I].literal=v.literal))}else if("doi"==I){if(L.match(/^https?:\/\/(dx\.|)doi\.org/)||L.match(/^\d\d\.\d{4,5}\/\S+/))s[I]=L;else if(L.match(/^doi:?\s*(.+)/i)){L.replace(/^doi:?\s*/i,"");s[I]=L}}else if("pmid"==I)L.match(/PMID:\s*(\d+)/i)&&(s[I]=RegExp.$1);else if("genre"==I)s[I]=L,L.match(/(PHD|doctor)/i)?s.kind="Ph.D. Thesis":L.match(/(master|MSc)/i)?s.kind="Masters Thesis":L.match(/(Bachelor|BSc)/i)&&(s.kind="Bachelor's Thesis");else if("note"==I)s.note||(s.note=[]),s[I].push(L);else if("address"==I)"PP_BOOK"===s.pubtype&&s.kind&&"Proceedings"==s.kind?s.conference_location=L:s[I]=L;else if("issn"==I){if(L.match(/\d\d\d\d\-?\d\d\d[\dX]/)){for(var w=L.split(/[\s;\(\)]+/),P={},S=0;S<w.length;S++){var C=m.library.Publication.checkValidityOfISSN(w[S]);""!=C&&(P[C]=1)}b=[];for(var S in P)P[S]&&b.push(S);s.issn=b.join(";")}}else if("isbn"==I)for(var A,E=m.Utils.extractISBNs(L,{convert:!0,unique:!0,normalize:!0});A=E.shift();)s.isbn?s.isbn_alt||(s.isbn_alt=A):s.isbn=A;else if("url"==I)if(s.url||(s.url=[]),L.match(/file:\/\//i)||L.match(/\..{3,4}$/i)&&!L.match(/^(https?:\/\/|www\.|ftp:\/\/)/i)){if(L.match(/%/))try{L=decodeURIComponent(L)}catch(e){try{L=decodeURI(L)}catch(e){m.Utils.isFunction(m.log)&&m.log({type:"error",subtype:"Error decoding URI component in RIS import",msg:"An RIS entry contained a URL with encoded chars, but could not be decoded",fieldValue:L})}}"external_pdf_filename"in s||(s.external_pdf_filename=[]),m.Utils.isString(L)&&L.split(/\s*internal-pdf:\/\//).forEach((function(e){e.length>1&&e.match(/[A-Z\d]/i)&&s.external_pdf_filename.push(e)}))}else if(L.match(/&amp;/))s.url.push(L);else if(L.match(/\;/)){for(var T=L.split(/\;/),k=!0,x=0;x<T.length;x++)m.Utils.isUrlLike(T[x])||(k=!1);k?s.url=s.url.concat(T):s.url.push(L)}else(L=(L=(L=L.replace(/(.*)((?:https?|ftp):\/\/\S+)/,"$2")).replace(/^\s+/,"")).replace(/(\S+)([\t\r\n\s].*)/,"$1"))&&L.match(/^(http|ftp)/)?s.url.push(L):(L.match(/www\.\w+\.\w+/)||L.match(/^\w+\.\w+/))&&s.url.push("http://"+L);else s[I]||(s[I]=L)}}else d[R]=o[R]}for(var R in"external_pdf_filename"in s&&(s.external_pdf_filename=m.Utils.joinExternalPDFFilenames(s.external_pdf_filename)),s.keywords&&(s.keywords=s.keywords.join("; ")),s.note&&(s.note=s.note.join("\n")),"PP_BOOK"===s.pubtype&&s.kind&&"Proceedings"===s.kind&&s.title&&l.T1&&(s.pubtype="PP_CONFERENCE_PAPER",s.num_pages&&(s.pages=s.num_pages,delete s.num_pages)),"PP_BOOK"!==s.pubtype||s.title||d.BT&&d.BT[0]&&(s.title=d.BT[0]),o)if(void 0!==o[R])for(h=0;h<o[R].length;h++){var I,L=o[R][h];if("T2"==R)(I=u[R])&&("PP_BOOK"!==s.pubtype||s.title?"PP_CONFERENCE_PAPER"!==s.pubtype||s.booktitle?"PP_PATENT"!==s.pubtype||s.journal?s[I]||(s[I]=L):s.journal=L:s.booktitle=L:s.title=L);else"N1"!=R&&"N2"!=R||(L.match(/^http:\/\/dx\.doi\.org/)||L.match(/^\d\d\.\d\d\d\d\/\S+/)?s.doi||(s.doi=L):L.split(/\s+/).length>7&&(s.abstract||(s.abstract=L)))}return s.title&&-1!=s.title.indexOf("}$")&&(s.title=m.Utils.convertInlineLatexToHtml(s.title)),s}},doWrite:function(e,t){m.Utils.isArray(e)||(e=[e]),t||(t={}),"gdrive_config"in t||(t.gdrive_config={});for(var r="",a=["AU","A2","A3","A4","AD","TI","T2","JF","T3","J2","ET","VL","IS","SP","PY","DA","Y2","PB","CY","AB","DP","SN","DO","M1","M2","M3","C1","C2","C3","C4","C5","C6","C7","C8","UR","KW","N1","L1","LB"],i=0;i<e.length;i++){var n=e[i];(n.labelsNamed||n.foldersNamed)&&(void 0!==n.keywords&&null!==n.keywords||(n.keywords=""),n.labelsNamed&&m.Utils.isArray(n.labelsNamed)&&(n.keywords+=";"+n.labelsNamed.join(";")),n.foldersNamed&&m.Utils.isArray(n.foldersNamed)&&(n.keywords+=";"+n.foldersNamed.join(";")),n.keywords=n.keywords.replace(/^\s*;\s*/,""),""===n.keywords&&delete n.keywords);var o=m.library.PublicationTypes.getOutputTypeForPub(n,"ris"),s=m.library.PublicationFields.getOutputMapForPubType(n.pubtype,"ris");o||(o="MISC"),r+="TY  - "+o+"\n";for(var l=0;l<a.length;l++){var c=a[l];if("PY"===c)n.published&&n.published.year&&(r+=c+"  - "+n.published.year+"\n");else if("TI"===c||"T2"===c){if(n[s[c]]){var u=m.String.interconvertString(n[s[c]],{format:"nomarkup"});u=this._wrapText(u,74);for(var d=0;d<u.length;d++){r+=(0==d?c+"  - ":"      ")+u[d]+"\n"}}}else if("JF"===c){if(n.journalfull&&"PP_ARTICLE"===n.pubtype)r+=c+"  - "+(u=m.String.interconvertString(n.journalfull,{format:"nomarkup"}))+"\n"}else if("DA"===c)n.published&&n.published.year&&(r+=c+"  - "+n.published.year,n.published.month&&(r+="/"+n.published.month,n.published.day&&(r+="/"+n.published.day)),r+="\n");else if("Y2"===c||"M1"===c&&"accessed"==s[c])n.accessed&&n.accessed.year&&(r+=c+"  - "+n.accessed.year,n.accessed.month&&(r+="/"+n.accessed.month,n.accessed.day&&(r+="/"+n.accessed.day)),r+="\n");else if("C2"===c&&"filed"===s.C2)n.filed&&n.filed.year&&(r+=c+"  - "+n.filed.year,n.filed.month&&(r+="/"+n.filed.month,n.filed.day&&(r+="/"+n.filed.day)),r+="\n");else if("UR"===c){if(n.url)for(d=0;d<n.url.length;d++)r+=c+"  - "+n.url[d]+"\n"}else if("L1"===c){if(n.attachments)for(d=0;d<n.attachments.length;d++){var p=m.library.Attachment.getFullPathFilename(n,n.attachments[d],t.collections,t.gdrive_config);n.attachments[d].article_pdf?r+=c+"  - "+p+"\n":r+="L4  - "+p+"\n"}}else if(n[s[c]])if("AU"===c||"A2"===c||"A4"===c||"A3"===c)if("A2"===c&&"PAT"===o)r+=c+"  - "+n[s[c]]+"\n";else if("A3"!==c||"RPRT"!==o&&"GOVDOC"!==o)for(d=0;d<n[s[c]].length;d++)r+=c+"  - "+m.library.Author.toRis(n[s[c]][d])+"\n";else r+=c+"  - "+n[s[c]]+"\n";else if("KW"===c){var h=n[s[c]].split(/;\s*/);for(d=0;d<h.length;d++)h[d].length>0&&(r+=c+"  - "+h[d]+"\n")}else for(u=this._wrapText(n[s[c]],74),d=0;d<u.length;d++){r+=(0==d?c+"  - ":"      ")+u[d]+"\n"}}r+="ER  - \n",i<e.length-1&&(r+="\n")}return r},_wrapText:function(e,t){if(!e)return"";if(m.Utils.isArray(e)){var r="";e.forEach((function(e){"last"in e?(r=e.last,"first"in e&&(r+=", "+e.first)):"collective"in e&&(r=e.collective)})),e=r}else m.Utils.isString(e)||(e=e.toString());for(var a=e.split(/\s+/),i=[],n=(r=[],0);n<a.length;n++)a[n].length>=t||r.join(" ").length+1+a[n].length>t?(i.push(r.join(" ")),(r=[]).push(a[n])):r.push(a[n]);return i.push(r.join(" ")),i},scorePubDate:function(e,t){var r=0;return e[t]&&(e[t].year&&(r+=3),e[t].month&&(r+=2),e[t].day&&(r+=1)),r}}),m.format.Ris=new m.format._Ris,m.format._RSS=m.format.AbstractReader.extend({mapIn:{volume:"volume","number,issue":"issue","startingPage,startPage":"startpage","endingPage,endPage":"endpage",publisher:"publisher",link:"url",description:"abstract",content:"abstract",summary:"abstract",creator:"author",date:"date",title:"title",identifier:"identifier",pubDate:"date",issued:"date",published:"date",guid:"identifier",id:"identifier",doi:"identifier",origLink:"url","author,Author,authors":"author2",coverDate:"date",updated:"date",placeOfPublication:"address",edition:"edition",lccn:"lccn",language:"language",extent:"num_pages",rights:"copyright"},hierarchy:["title","creator","description","content","volume","number,issue","startingPage,startPage","endingPage,endPage","publisher","placeOfPublication","issued","date","link","origLink","identifier","pubDate","published","edition","guid","id","doi","author,Author,authors","language","lccn","extent","coverDate","updated","summary","rights"],getName:function(){return"RSS"},doRead:function(e){var t,r=[],a=this;"string"==typeof e&&(e=(e=e.replace(/(<)(\w+:)(\w+)/g,"$1$3")).replace(/(<\/)(\w+:)(\w+)/g,"$1$3"),t=this.getXMLParser(e));var i=a._getChannelInfo(t),n=[];return c()?n=$(t).find("item, entry, record"):0==(n=t.find("item, entry, record")).length&&t[0]&&"entry"==t[0].name&&(n=$xmlNodeJs(t[0])),n.each((function(e,t){c()||$xmlNodeJs(t).find("dc").length&&(t=$xmlNodeJs($xmlNodeJs(t).find("dc")[0]));var i={pubtype:"PP_MISC",url:[],author:[],author2:[]};a.hierarchy.forEach((function(e){var r=a.mapIn[e];if(c())$(t).find(e).each((function(t,n){if("link"==e){var o=$(n).attr("href");o&&o.match(/^(http|ftp)/)&&i.url.push(o)}var s;s=$(n).find("name").length?$(n).find("name").text():$(n).text(),i=a._processText(s,r,i)}));else if($xmlNodeJs(t).children(e).length)for(var n=0;n<$xmlNodeJs(t).find(e).length;n++){if(e.toLowerCase().indexOf("link")>-1){var o=$xmlNodeJs(t).children(e)[n].attribs.href;void 0===o&&$xmlNodeJs(t).children(e)[n].next&&$xmlNodeJs(t).children(e)[n].next.data&&(o=$xmlNodeJs(t).children(e)[n].next.data),o&&o.match(/^(http|ftp)/)&&i.url.push(o)}$xmlNodeJs(t).children(e)[n].children&&$xmlNodeJs(t).children(e)[n].children[0]&&"comment"==$xmlNodeJs(t).children(e)[n].children[0].type&&$xmlNodeJs(t).children(e)[n].children[0].data?(s=$xmlNodeJs(t).children(e)[n].children[0].data).indexOf("[CDATA[")>-1&&((s=s.replace("[CDATA[","")).indexOf("[")>-1&&(s=s.substring(0,s.indexOf("["))),s.indexOf("]")>-1&&(s=s.substring(0,s.indexOf("]")))):s=$xmlNodeJs($xmlNodeJs(t).children(e)[n]).text(),s&&(i=a._processText(s,r,i))}else for(n=0;n<$xmlNodeJs(t)[0].children.length;n++){var s;if($xmlNodeJs(t)[0].children[n].name&&$xmlNodeJs(t)[0].children[n].name.match(e.toLowerCase()))(s=$xmlNodeJs($xmlNodeJs(t)[0].children[n]).text())&&(i=a._processText(s,r,i))}})),r.push(i)})),a._screenAbstract(r,i),r.forEach((function(e){e.author2.length>e.author.length&&(e.author=m.Utils.clone(e.author2)),delete e.author2})),a._cleanPubs(r,i),r},_processText:function(e,t,r){if(e&&e.length>0)if("url"!==t&&"identifier"!==t&&(e=(e=e.replace(/https:\S+/g,"")).replace(/http:\S+/g,"")),e=(e=e.replace(/^\s+/,"").replace(/\s+$/,"")).replace(/\s+/g," "),"identifier"==t){if(e.match(/10\.\d{4,5}\//)&&!e.match(/^http/i))r.doi||(r.doi=e);else if(e.match(/^https?:\/\/.+doi\.org\/(10\.\d+.+)/))r.doi||(r.doi=RegExp.$1);else if(e.match(/^https?:\/\/.+\/.+/i))r.url.push(e);else if(e.match(/urn:ISBN:/)){var a=m.Utils.extractISBNs(e,{convert:!0,unique:!0});a[0]&&(r.isbn=a[0]),a[1]&&(r.isbn_alt=a[1])}}else if("date"==t){var i=m.library.Date.parseDate(e);!r.year&&i.year&&(r.year=i.year,i.month&&(r.month=i.month),i.day&&(r.day=i.day))}else if("url"==t)(e=e.replace(/^HTTP/,"http")).match(/^(http|ftp)/)&&r.url.push(e);else if("num_pages"==t)e.match(/(\d+)\s*p\./)?r[t]=RegExp.$1:e.match(/^\d+$/)&&(r[t]=e);else if("author"==t||"author2"==t){var n=0;if(e.match(/(.+)(\s+et\s+al\.?\s*)$/)&&(n=1,e=RegExp.$1),!e.match(/(,|;|&|\sand\s)/)||e.match(/^[^,]+,\s+[^,]+$/)||e.match(/^[^,]+,\s+[^,]+\s+[^,]+$/)){var o=m.library.Author.parseAuthor(e,{familyNameFirst:!1});r[t].push(o)}else m.library.Author.parseAuthorList(e,{multiple:!0,auto:!0}).forEach((function(e){r[t].push(e)}));n&&r[t].push({collective:"others"})}else r[t]||(r[t]=e);return r.language&&(r.language=m.Utils.normalizeLanguage(r.language)),r},_screenAbstract:function(e,t){e.forEach((function(e){if(e.abstract){var r,a=e.abstract;if(a.match(/Source:<\/b>([^,]+), Volume (\d+), Issue (\d+)/)&&(e.journal||(e.journal=RegExp.$1),e.volume||(e.volume=RegExp.$2),e.issue||(e.issue=RegExp.$3)),a.match(/^(Journal[^>]+Volume[^>]+<br)/))(r=m.library.BibliographicData.parse(RegExp.$1)).journal&&(e.journal=r.journal),r.volume&&(e.volume=r.volume),r.issue&&(e.issue=r.issue),r.pages&&(e.pages=r.pages),r.year&&(e.year=r.year);if(a.match(/Author\(s\):([^<]+)<\/br>/)?0==e.author.length&&m.library.Author.parseAuthorList(RegExp.$1,{multiple:!0,auto:!0}).forEach((function(t){e.author.push(t)})):a.match(/^<p>[Bb]y\s+([^<]+)<\/p>/)&&0==e.author.length&&m.library.Author.parseAuthorList(RegExp.$1,{multiple:!0,auto:!0}).forEach((function(t){e.author.push(t)})),a.match(/pubDate>([^<]+)<\/pubDate/)){var i=m.library.Date.parseDate(RegExp.$1);i.year&&(e.year=i.year),i.month&&(e.month=i.month),i.day&&(e.day=i.day)}if(t.copyright&&t.copyright.match(/Karger/))if(a.match(/<br\s\/>(.+)/))(r=m.library.BibliographicData.parse(RegExp.$1)).journal&&(e.journal=r.journal),r.volume&&(e.volume=r.volume),r.issue&&(e.issue=r.issue),r.pages&&(e.pages=r.pages),r.year&&(e.year=r.year)}}))},_getChannelInfo:function(e){var t={},r=$(e);return r.find("publicationName").each((function(e,r){if(0==e){var a=$(r)[0],i="parentElement"in a?a.parentElement.nodeName:a.parent.name;i&&i.match(/channel/)&&(t.publicationName=$(r).text())}})),r.find("channel > title").each((function(e,r){0==e&&(t.title=$(r).text())})),r.find("title").each((function(e,r){if(0==e&&!t.title){var a=$(r)[0],i="parentElement"in a?a.parentElement.nodeName:a.parent.name;i&&"feed"==i.toLowerCase()&&(t.title=$(r).text())}})),r.find("channel > issn").each((function(e,r){0==e&&(t.issn=$(r).text())})),r.find("channel > eIssn").each((function(e,r){0==e&&(t.eissn=$(r).text())})),r.find("channel > volume").each((function(e,r){0==e&&(t.volume=$(r).text())})),r.find("channel > number").each((function(e,r){0==e&&(t.issue=$(r).text())})),r.find("channel > pubDate").each((function(e,r){var a=$(r).text();t.date=m.library.Date.parseDate(a)})),r.find("channel > copyright").each((function(e,r){0==e&&(t.copyright=$(r).text())})),t},_cleanPubs:function(e,t){e.forEach((function(e){e.title&&e.journal&&e.journal==e.title&&delete e.journal,e.journal||(t.publicationName?e.journal=t.publicationName:t.title&&(t.title.match(/Latest Results for\s+(.+)/)||t.title.match(/ScienceDirect Publication:\s*(.+)/)||t.title.match(/(.+)- new TOC\s*$/)||t.title.match(/(.+)\s+Current Issue$/)||t.title.match(/New content is available for\s+(.+)$/)||t.title.match(/(.+): (Latest|New) Articles/)||t.title.match(/(.+)\s*[-:]\s*Table of Contents$/)?e.journal=RegExp.$1:e.journal=t.title,e.journal=e.journal.replace(/\s*[:-]\s*$/,""))),!e.issn&&t.issn&&(e.issn=t.issn),!e.issn_alt&&t.eissn&&(e.issn_alt=t.eissn),!e.volume&&t.volume&&(e.volume=t.volume),!e.issue&&t.issue&&(e.issue=t.issue),!e.year&&t.date&&t.date.year&&(e.year=t.date.year),!e.month&&t.date&&t.date.month&&(e.month=t.date.month),e.title&&(e.title=e.title.replace(/\s+\[[A-Z]+\]$/,"")),(e.volume||e.journal)&&(e.pubtype="PP_ARTICLE"),e.isbn&&(e.pubtype="PP_BOOK")}))}}),m.format.RSS=new m.format._RSS,m.format._SemanticScholar=m.format.AbstractReader.extend({getName:function(){return"Semantic Scholar"},doRead:function(e){if(!e)return[];e=m.Utils.isString(e)?m.Utils.decode(e):[e],m.Utils.isArray(e)||(e=[e]);var t=this._readSemanticScholarItems(e);return t.forEach((function(e){m.library.Publication.autoClean(e)})),t},_readSemanticScholarItems:function(e){var t=[];return e.forEach((function(e){var r={pubtype:"PP_ARTICLE"};e.title&&(r.title=e.title),e.doi&&(r.doi=e.doi),e.arxivId&&(r.arxivid=e.arxivId),e.url&&(r.url=[e.url]),e.venue&&(r.journal=e.venue),e.authors&&(r.author||(r.author=[]),e.authors.forEach((function(e){var t=m.library.Author.parseAuthor(e.name,{familyNameFirst:!1});r.author.push(t)}))),e.year&&(r.published={year:e.year.toString()}),t.push(r)})),t}}),m.format.SemanticScholar=new m.format._SemanticScholar,m.format._SIRSI=m.format.AbstractReader.extend({doRead:function(e){var t=this._readHTML(e);return m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t,r,a,i,n={url:[],pubtype:"PP_BOOK",keywords:[],authors:[],editors:[],titleField:""},o=!1,s=$(e).find("#detail_marc_record dl dd"),l=$(e).find("#detail_marc_record dl dt");if(s.length>0?o=!0:(s=$(e).find("tr td.viewmarctags"),l=$(e).find("tr th.viewmarctags"),s.length>0&&(o=!0)),o||(s=$(e).find("#detail_item_information dl dd")),o&&s.length>0&&s.length==l.length)for(var c=0;c<s.length;c++)a=$(l[c]).text().replace(/\n/g," "),a=m.Utils.normalizeString(a).replace(/:.*/,"").toUpperCase(),i=$(s[c]).text().replace(/\n/g," "),i=m.Utils.normalizeString(i),n=this.parseKeyValue(a,i,n);else if(s.length>0)for(c=0;c<s.length;c++)if($(s[c]).length)for(d=0;d<$(s[c]).length;d++){var u=null;"className"in(w=$(s[c])[0])?u=w.className:w.attribs&&"class"in w.attribs&&(u=w.attribs.class),u&&$(w).text()&&(a=u,a=m.Utils.normalizeString(a).replace(/:.*/,"").toUpperCase(),i=$(w).text().trim().replace(/\n/g," "),i=m.Utils.normalizeString(i),n=this.parseKeyValue(a,i,n))}var d,p=$(e).find("ul.detail_page dl");if(p&&p.length>0)for(c=0;c<p.length;c++){var h,g=$(p[c]).find("dd.publisher");if(g.length&&!n.publisher&&(n.publisher=$(g[0]).text()),(t=$(p[c]).find("dd.publishing_date")).length)(h=$(t[0]).text().trim().match(/(\d{4})/))&&2==h.length&&((r={}).year=h[1],n.published=r);else if((t=$(p[c]).find("dd.period_date")).length)(h=$(t[0]).text().trim().match(/(\d{4})/))&&2==h.length&&((r={}).year=h[1],n.published=r);var f=$(p[c]).find("dd.isbn");if(f.length)for(var b,y=m.Utils.extractISBNs($(f[0]).text(),{convert:!0,unique:!0});b=y.shift();)n.isbn||(n.isbn=b),n.isbn_alt||(n.isbn_alt=b);var v,_=$(p[c]).find("dd input");if(_.length>0)"name"in _[0]&&"input"!==_[0].name?v=_[0].name:"attribs"in _[0]&&(v=_[0].attribs.name),"permalink"==v&&("value"in _[0]?n.url=[_[0].value]:"attribs"in _[0]&&(n.url=[_[0].attribs.value]))}if((p=$(e).find("div.displayElementText"))&&p.length>0)for(c=0;c<p.length;c++)if($(p[c]).length)for(d=0;d<$(p[c]).length;d++){var w,P;"className"in(w=$(p[c])[d])?P=w.className:"attribs"in w&&(P=w.attribs.class),P&&$(w).text()&&(P=P.replace("displayElementText ",""),n=this.parseKeyValue(P,$(w).text().trim(),n))}(t=$(e).find("div.PUBDATE_value")).length&&((h=$(t[0]).text().trim().match(/(\d{4})/))&&2==h.length&&((r={}).year=h[1],n.published=r));(t=$(e).find("div.PUBDATE")).length&&((h=$(t[0]).text().trim().match(/(\d{4})/))&&2==h.length&&((r={}).year=h[1],n.published=r));if(n.authors.length&&(n.author=this.parseAuthors(m.Array.unique(n.authors))),n.editors.length&&(n.editor=this.parseAuthors(m.Array.unique(n.editors))),delete n.editors,delete n.authors,n.author&&!n.editor&&n.titleField.indexOf("edited")>=0){var S=!1;for(c=0;c<n.author.length;c++)-1==n.titleField.indexOf(n.author[c].last)&&(S=!0);S||(n.editor=n.author,delete n.author)}return delete n.titleField,n.publisher&&(n.publisher=m.Utils.normalizeString(n.publisher.replace(/\s*:\s*$/,""))),n.address&&(n.address=m.Utils.normalizeString(n.address).replace(/^(\[)(.+)(\])$/,"$2")),n.language&&(n.language=m.Utils.normalizeLanguage(n.language)),n},parseKeyValue:function(e,t,r){if("TITLE"==(e=e.toUpperCase().replace(/\_/g," ").replace(/\s+/g," ").replace("TEXT-P","").trim())||"INITIAL TITLE SRCH"==e){if(!r.title){r.titleField=t;var a=t.replace(/\/\s+edited.*/,"");(a=a.replace(/ \/.*/,"")).indexOf("[videorecording]")>=0&&(a=a.replace(" [videorecording]",""),r.pubtype="PP_VIDEO"),a.indexOf("[DVD]")>=0&&(a=a.replace(" [DVD]",""),r.pubtype="PP_VIDEO"),a=a.replace(" [electronic resource]",""),r.title=a}}else if("PERSONAL AUTHOR"==e||"ADDED AUTHOR"==e||"ADDED PERSONAL AUTH"==e||"OTHER AUTHOR/EDITOR"==e||"AUTHOR"==e||"ADDED AUTHOR-UCA"==e||"INITIAL AUTHOR SRCH"==e){if(-1==t.indexOf(" collection")){var i=(i=t.replace(/\/\s+editor.*/,"")).replace(/\/\s+author.*/,"");t.indexOf("editor")>=0?r.editors.push(i):r.authors.push(i)}}else if("PUBLISHER"==e)r.publisher||(","==t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),r.publisher=t);else if("PUBLICATION INFO"==e||"PUBLICATION"==e||"PUBLICATION NOTE"==e||"PUBLISHED"==e){var n=t;t.indexOf(":")>=0&&(n=t.split(":")[1],r.address=t.split(":")[0].trim());for(var o,s=n.split(","),l=0;l<s.length;l++)if(s[l].match(/\d{4}/)){if(!r.published){var c=s[l].match(/(\d{4})/);c&&2==c.length&&(r.published={year:c[1]})}}else l>0?o+=", "+s[l].trim():o=s[l].trim();o&&","==o.charAt(o.length-1)&&(o=o.substring(0,o.length-1)),o&&(r.publisher=o)}else if("SUBJECT"==e||"CRANFIELD SUBJECT"==e||"SUBJECT TERM"==e)-1===r.keywords.indexOf(t)&&(t=t.replace(/\s*\.\s*$/,""),r.keywords.push(t));else if("ISBN"==e||"ISBN UCA"==e||"ISBN/PRICE"==e)r.isbn||-1!=t.indexOf("invalid")||(r.isbn=t.split(" ")[0]);else if("LCCN"==e)r.lccn=t;else if("EDITION"==e)r.edition=t;else if("SUMMARY"==e||"BIBSUMMARY"==e||"ABSTRACT"==e)r.abstract=t;else if("CORPORATE AUTHOR"==e||"ADDED CORPORATE AUTH"==e||"ADDED CORPORATE AUTHOR"==e)r.institution=t;else if("LANGUAGE"==e)r.language=t;else if("PERIOD DATE"==e||"PUBLISHING DATE"==e){var u=t.match(/(\d{4})/);u&&2==u.length&&(r.published={year:u[1]})}else if("GENRE TERM"==e)r.genre=t.replace(/\.$/g,""),"Documentary films."==t&&(r.pubtype="PP_VIDEO");else if("JOURNAL TITLE"==e)r.journal=t,r.pubtype="PP_ARTICLE";else if("CITATION"==e){var d=m.library.BibliographicInferer.parse(t);if(d.published&&d.published.year){var p={year:d.published.year};d.published.month&&(p.month=d.published.month),d.published.day&&(p.day=d.published.day),r.published||(r.published=p)}d.volume&&!r.volume&&(r.volume=d.volume),d.issue&&!r.issue&&(r.issue=d.issue),d.number&&!r.number&&(r.number=d.number),d.pages&&!r.pages&&(r.pages=d.pages)}else"SERIES TITLE"===e&&(r.series=t);return r},parseAuthors:function(e){for(var t=[],r=0;r<e.length;r++){e[r]=e[r].replace(/[\+\*\[\(\d].*$/g,""),e[r]=e[r].replace(/\s*(MD|PhD|MSc)\s*,?\s*/g,""),e[r]=e[r].replace(/[0-9]{4}-[0-9]{4}/g,""),e[r]=e[r].replace(/[0-9]{4}-/g,"");var a=e[r].split(/,\s*/);a.length>=2&&t.push({last:a[0],first:a[1]})}return t},getName:function(){return"SIRSI"}}),m.format.SIRSI=new m.format._SIRSI,m.format._TEI=m.format.AbstractReader.extend({doRead:function(e){var t;if("string"==typeof e)t=this.getXMLParser(e);else{if("object"!=typeof e)return[];t=e}var r=this._readXML(t);return m.library.Publication.autoClean(r),[r]},_processAuthors:function(e){var t=/[^\p{L}\p{Mn}\p{Pd}'\s]+/gu,r=[],a=[],i=[];if($(e).find("forename").each((function(e,a){r.push($(a).text().replace(t,""))})),$(e).find("surname").each((function(e,r){a.push($(r).text().replace(t,""))})),$(e).find("genName").each((function(e,t){i.push($(t).text())})),r.length>0&&a.length>0){var n={};if(n.first=r.join(" "),n.last=a.join(" ").replace(/[\\^].*/,""),i.length>0&&(n.jr=i[0]),!n.last.match(/[@]/))return n}return null},_readXML:function(e){var t=this,r={author:[],url:[],pubtype:"PP_ARTICLE"},a=$(e),i="";a.find("fileDesc titleStmt title").each((function(e,t){"main"===$(t).attr("type")&&(i=$(t).text())&&i.length>2&&(r.title=i)})),r.title||(i=a.find("biblStruct analytic title").text())&&i.length>2&&(r.title=i),a.find("biblStruct analytic author persName").each((function(e,a){var i=t._processAuthors(a);null!==i&&r.author.push(i)})),0===r.author.length&&a.find("biblStruct monogr author persName").each((function(e,a){var i=t._processAuthors(a);null!==i&&r.author.push(i)}));var n=a.find("biblStruct monogr editor persName");if(n&&n.length>0)r.editor=[],n.each((function(e,a){var i=t._processAuthors(a);null!==i&&r.editor.push(i)}));else if((n=a.find("biblStruct monogr editor"))&&n.length>0){var o=m.library.Author.parseAuthorList($(n).text(),{auto:!0});o&&o.length>0&&(r.editor=o)}return(i=a.find("profileDesc abstract").text())&&i.length>25&&(r.abstract=i),a.find("biblStruct idno").each((function(e,t){if("DOI"===$(t).attr("type"))(i=$(t).text())&&i.match(/^10\.\d+\/.+/)&&(r.doi=i);else if("PMCID"===$(t).attr("type"))(i=$(t).text())&&i.match(/^PMC/)&&(r.pmc=i);else if("PMID"===$(t).attr("type"))(i=$(t).text())&&i.match(/^\d+/)&&(r.pmid=i);else if("ISSN"===$(t).attr("type")){var a=m.library.Publication.checkValidityOfISSN($(t).text());""!==a&&(r.issn=a)}})),a.find("analytic ptr").each((function(e,t){var a=$(t).attr("target");a&&a.match(/^https?:\/\/.+\/.+/)&&r.url.push(a)})),a.find("publicationStmt date").each((function(e,t){if("published"===$(t).attr("type")){var a=$(t).attr("when");a&&4===(a=a.replace(/-.+/,"")).length&&(r.published={year:a})}})),"published"in r||a.find("biblStruct monogr imprint date").each((function(e,t){if("published"===$(t).attr("type")){var a=$(t).attr("when");a&&4===(a=a.replace(/-.+/,"")).length&&(r.published={year:a})}})),a.find("biblStruct monogr title").each((function(e,t){"j"===$(t).attr("level")?r.journal=$(t).text():"m"===$(t).attr("level")&&(r.title?(r.booktitle=$(t).text(),r.pubtype="PP_BOOK_CHAPTER"):(r.title=$(t).text(),r.pubtype="PP_BOOK"))})),a.find("biblStruct monogr imprint biblScope").each((function(e,t){"volume"===$(t).attr("unit")?r.volume=$(t).text():"issue"===$(t).attr("unit")?r.issue=$(t).text():"page"===$(t).attr("unit")&&$(t).attr("from")&&$(t).attr("to")&&(r.pages=$(t).attr("from")+"-"+$(t).attr("to"))})),(i=a.find("biblStruct monogr imprint pubPlace").text())&&i.length>1&&(r.address=i),(i=a.find("biblStruct monogr meeting address").text())&&i.length>1&&!r.address&&(r.address=i),(i=a.find("biblStruct monogr imprint publisher").text())&&i.length>1&&(r.publisher=i),r.editor&&r.editor.length>0&&r.journal&&"PP_ARTICLE"===r.pubtype&&(r.pubtype="PP_BOOK_CHAPTER",r.booktitle=r.journal,delete r.journal),r.booktitle&&(r.booktitle=r.booktitle.replace(/^in:?\s+/i,"")),"PP_BOOK_CHAPTER"===r.pubtype&&r.booktitle&&r.booktitle.match(/(Volume|Issue|Supplement)/i)&&!r.publisher&&!r.address&&(r.pubtype="PP_ARTICLE",delete r.booktitle),"PP_BOOK_CHAPTER"===r.pubtype&&r.booktitle&&!r.publisher&&!r.address&&r.volume&&(r.pubtype="PP_ARTICLE",r.journal=r.booktitle,delete r.booktitle),"PP_BOOK"!==r.pubtype||r.publisher||r.address||!r.volume&&!r.pages||(r.pubtype="PP_ARTICLE"),r},getName:function(){return"TEI"}}),m.format.TEI=new m.format._TEI,m.format._Unixref=m.format.AbstractReader.extend({parsingRules:{title:["journal_article > titles title","conference_paper > titles title","content_item[component_type=chapter] > titles title","content_item[component_type=reference_entry] > titles title","book_series_metadata > titles title","dissertation > titles title","report-paper titles title","dataset titles title","component titles title","standard_metadata > titles title","posted_content > titles title"],subtitle:["journal_article > titles subtitle","conference_paper > titles subtitle","content_item[component_type=chapter] > titles subtitle","content_item[component_type=reference_entry] > titles subtitle","book_series_metadata > titles subtitle","dissertation > titles subtitle","report-paper titles subtitle","dataset titles subtitle"],abstract:["journal_article description","conference_paper description","content_item[component_type=chapter] description","book_series_metadata description","dissertation description","report-paper description","dataset description","posted_content abstract"],series:["series_metadata > titles title","series_title"],booktitle:["book book_metadata > titles title","proceedings_title","book_series_metadata > titles title"],conference:["conference event_metadata conference_name"],conference_location:["conference event_metadata conference_location"],conference_date:["conference event_metadata conference_date"],startpage:["first_page"],endpage:["last_page"],volume:["volume"],issue:["journal_issue issue"],genre:["dissertation degree"],edition:["book_metadata edition_number","report-paper_metadata edition_number"],journal:["journal_metadata abbrev_title","journal_metadata full_title","database database_metadata titles title","posted_content > group_title"],journalfull:["journal_metadata full_title"],publisher:["publisher publisher_name"],address:["publisher publisher_place","dissertation institution_place"],institution:["institution > institution_name"],author:["journal_article > contributors *[contributor_role]","conference_paper > contributors *[contributor_role]","chapter_contributors > contributors *[contributor_role]","content_item[component_type=chapter] > contributors *[contributor_role]","dissertation *[contributor_role]","report-paper contributors *[contributor_role]","dataset *[contributor_role]","component *[contributor_role]","standard *[contributor_role]","posted_content > contributors *[contributor_role]"],book_contributors:["book book_metadata > contributors *[contributor_role]"],series_contributors:["book book_series_metadata series_metadata > contributors *[contributor_role]"],bookseries_contributors:["book book_series_metadata > contributors *[contributor_role]"],url:["journal_article doi_data resource","conference_paper doi_data resource","book content_item resource","book_metadata doi_data resource","book_series_metadata doi_data resource","sa_component component_list component doi_data resource","dissertation doi_data resource","report-paper doi_data resource","dataset doi_data resource","component doi_data resource","standard doi_data resource"],number:['report-paper item_number[item_number_type="Report Number"]','report-paper item_number[item_number_type="article-number"]','posted_content item_number[item_number_type="pisa"]'],year:["journal_article publication_date[media_type=print] year","journal_article publication_date[media_type=online] year","journal_article publication_date year","conference_paper publication_date[media_type=print] year","conference_paper publication_date[media_type=online] year","conference_paper publication_date year","book_metadata publication_date[media_type=print] year","book_metadata publication_date[media_type=online] year","book_metadata publication_date year","book_series_metadata publication_date[media_type=print] year","book_series_metadata publication_date[media_type=online] year","book_series_metadata publication_date year","dissertation approval_date year","report-paper publication_date[media_type=print] year","report-paper publication_date[media_type=online] year","report-paper publication_date year","dataset publication_date year","component publication_date year","standard approval_date year","posted_content posted_date year"],month:["journal_article publication_date[media_type=print] month","journal_article publication_date[media_type=online] month","journal_article publication_date month","conference_paper publication_date[media_type=print] month","conference_paper publication_date[media_type=online] month","conference_paper publication_date month","book_metadata publication_date[media_type=print] month","book_metadata publication_date[media_type=online] month","book_metadata publication_date month","book_series_metadata publication_date[media_type=print] month","book_series_metadata publication_date[media_type=online] month","dissertation approval_date month","report-paper publication_date[media_type=print] month","report-paper publication_date[media_type=online] month","report-paper publication_date month","dataset publication_date month","component publication_date month","standard approval_date month","posted_content posted_date month"],day:["journal_article publication_date[media_type=print] day","journal_article publication_date[media_type=online] day","journal_article publication_date day","conference_paper publication_date[media_type=print] day","conference_paper publication_date[media_type=online] day","conference_paper publication_date day","book_metadata publication_date[media_type=print] day","book_metadata publication_date[media_type=online] day","book_metadata publication_date day","book_series_metadata publication_date[media_type=print] day","book_series_metadata publication_date[media_type=online] day","book_series_metadata publication_date day","dissertation approval_date day","report-paper publication_date[media_type=print] day","report-paper publication_date[media_type=online] day","report-paper publication_date day","dataset publication_date day","component publication_date day","standard approval_date day","posted_content posted_date day"],issn:["issn"],isbn:["isbn"],doi:["conference_paper doi_data doi","journal_article doi_data doi","book content_item doi_data doi","book_metadata doi_data doi","sa_component component_list component doi_data doi","dissertation doi_data doi","report-paper doi_data doi","book_series_metadata doi_data doi","dataset doi_data doi","component doi_data doi","standard doi_data doi"]},doRead:function(e){if("string"==typeof e){var t=this.getXMLParser(e),r=this._readUnixref(t);return m.library.Publication.autoClean(r),[r]}if("object"==typeof e){r=this._readUnixref(e);return m.library.Publication.autoClean(r),[r]}return[]},isUnixref:function(e){var t;"string"==typeof e?t=this.getXMLParser(e):"object"==typeof e&&(t=e);var r=!1;return t&&$(t).find("doi_record").length>0&&(r=!0),r},_readUnixref:function(e){var t={author:[],editor:[],series_editor:[],url:[],bookurl:[],issn:[],isbn:[],book_contributors:[],bookseries_contributors:[],series_contributors:[]};for(var r in this.parsingRules)for(var a=0;a<this.parsingRules[r].length;a++){var i=$(e).find(this.parsingRules[r][a]);if(i&&i[0])if("author"==r||"editor"==r||r.match(/contributors/))for(var n=0;n<i.length;n++){var o=this._processAuthor(i[n]);"book_contributors"===r?t.book_contributors.push(o):"bookseries_contributors"===r?t.bookseries_contributors.push(o):"series_contributors"===r?t.series_contributors.push(o):o.role&&"editor"==o.role?t.editor.push(o):t.author.push(o)}else if("url"==r){var s=this.parsingRules[r][a].match(/(book_metadata|book_series_metadata)/)?"bookurl":"url";for(n=0;n<i.length;n++)$(i[n]).text().match(/^http/)&&t[s].push($(i[n]).text())}else if("isbn"==r||"issn"==r)for(n=0;n<i.length;n++)t[r].push($(i[n]).text());else if("conference_date"==r){if(this._getAttribute(i[0],"start_year")&&this._getAttribute(i[0],"end_year")){var l=["","/","","/","","-","","/","","/",""];this._getAttribute(i[0],"start_day")&&(l[0]=this._getAttribute(i[0],"start_day")),this._getAttribute(i[0],"start_month")&&(l[2]=this._getAttribute(i[0],"start_month")),this._getAttribute(i[0],"end_day")&&(l[6]=this._getAttribute(i[0],"end_day")),this._getAttribute(i[0],"end_month")&&(l[8]=this._getAttribute(i[0],"end_month")),l[4]=this._getAttribute(i[0],"start_year"),l[10]=this._getAttribute(i[0],"end_year"),t[r]={literal:l.join("")}}}else t[r]||(t[r]=$(i[0]).text())}t.pubtype="PP_MISC";var c={journal:"PP_ARTICLE",conference_paper:"PP_CONFERENCE_PAPER",book:"PP_BOOK","report-paper":"PP_REPORT",dissertation:"PP_THESIS",dataset:"PP_DATASET",component:"PP_DATASET",standard:"PP_STANDARD","posted_content[type=preprint]":"PP_PREPRINT"};for(var u in c)c.hasOwnProperty(u)&&$(e).find(u).length>0&&(t.pubtype=c[u]);if("PP_THESIS"==t.pubtype&&(t.kind="Ph.D. Thesis",t.institution&&(t.school=t.institution,delete t.institution)),"PP_BOOK"==t.pubtype&&($(e).find("content_item[component_type=chapter]").length>0&&(t.pubtype="PP_BOOK_CHAPTER"),$(e).find("content_item[component_type=reference_entry]").length>0&&(t.pubtype="PP_BOOK_CHAPTER")),"PP_BOOK_CHAPTER"==t.pubtype)if(t.book_contributors.length>0)for(n=0;n<t.book_contributors.length;n++)t.editor.push(t.book_contributors[n]);else{if(t.bookseries_contributors.length>0)for(n=0;n<t.bookseries_contributors.length;n++)t.editor.push(t.bookseries_contributors[n]);if(t.series_contributors.length>0)for(n=0;n<t.series_contributors.length;n++)t.series_editor.push(t.series_contributors[n])}if("PP_BOOK"===t.pubtype){if(!t.title&&t.booktitle&&(t.title=t.booktitle,delete t.booktitle),t.book_contributors.length>0)for(n=0;n<t.book_contributors.length;n++)"author"==t.book_contributors[n].role&&t.author.push(t.book_contributors[n]),"editor"==t.book_contributors[n].role&&t.editor.push(t.book_contributors[n]);else if(t.bookseries_contributors.length>0)for(n=0;n<t.bookseries_contributors.length;n++)"author"==t.bookseries_contributors[n].role&&t.author.push(t.bookseries_contributors[n]),"editor"==t.bookseries_contributors[n].role&&t.editor.push(t.bookseries_contributors[n]);if(t.series_contributors.length>0)for(n=0;n<t.series_contributors.length;n++)t.series_editor.push(t.series_contributors[n]);t.url=t.url.concat(t.bookurl)}t.subtitle&&(t.title?t.title.toLowerCase().indexOf(t.subtitle.toLowerCase())<0&&(t.title=t.title.replace(/\s*:\s*$/,""),t.title=t.title+": "+t.subtitle):t.title=t.subtitle,delete t.subtitle),t.title&&(t.title=t.title.replace(/\s*<\/title>\s*$/,""),t.title=t.title.replace(/^\s*<title>\s*/,""));for(n=0;n<t.author.length;n++)t.author[n].role&&delete t.author[n].role;for(n=0;n<t.editor.length;n++)t.editor[n].role&&delete t.editor[n].role;return delete t.book_contributors,delete t.bookseries_contributors,delete t.series_contributors,delete t.bookurl,t.title||t.doi&&(t.title=t.doi,t.pubtype="PP_MISC"),t.series_editor||delete t.series_editor,t},_processAuthor:function(e){var t={first:void 0,last:void 0,collective:void 0,jr:void 0};if("organization"==e.nodeName||"organization"==e.name)t.collective=$(e).text();else{var r=$(e).find("given_name");r&&r[0]&&(t.first=$(r[0]).text());var a=$(e).find("surname");a&&a[0]&&(t.last=$(a[0]).text());var i=$(e).find("suffix");i&&i[0]&&(t.jr=$(i[0]).text())}if(t.last&&t.first&&1==t.last.length&&t.first.length>1){var n=t.first;t.first=t.last,t.last=n}return t.role=this._getAttribute(e,"contributor_role"),t},getName:function(){return"Unixref"}}),m.format.Unixref=new m.format._Unixref,m.format._UpToDate=m.format.AbstractReader.extend({doRead:function(e){var t=this._readHTML(e);return m.library.Publication.autoClean(t),[t]},_readHTML:function(e){for(var t={pubtype:"PP_ARTICLE"},r=($("<div>"+e+"</div>"),$(e).find("#fullAbstract dt")),a=0;a<r.length;a++){var i=$(r[a]).text().trim(),n=$(r[a]).next().text().trim();if("PMID"==i)t.pmid=n;else if("TI"==i)t.title=n;else if("AU"==i)t.author=m.library.Author.parseAuthorList(n,{auto:!0});else if("SO"==i){var o=m.library.BibliographicData.parse(n);o.journal&&(t.journal=o.journal),o.issue&&(t.issue=o.issue),o.volume&&(t.volume=o.volume),o.pages&&(t.pages=o.pages),o.year&&(t.year=o.year)}else""==i&&n.length>100&&(t.abstract?t.abstract+=" "+n:t.abstract=n)}if(!t.title){var s,l;(l=$(e).find("div#topicTitle"))&&(t.title=$(l).first().text()),t.title||(l=$(e).find("h1"))&&(t.title=$(l).first().text()),t.pubtype="PP_BOOK_CHAPTER",t.booktitle="UpToDate",t.publisher="UpToDate",t.address="Waltham, MA",(r=$(e).find("#topicContributors dt"))&&r[0]||(r=$(e).find("#prosContributors dt"));for(a=0;a<r.length;a++){var c=$(r[a]).text().trim(),u=(n=$(r[a]).next().text().trim(),"author");c.indexOf("Editor")>-1&&(u="editor");var d=m.Utils.normalizeString(n);d=d.replace(/,.*/,""),u in t||(t[u]=[]),t[u].push(m.library.Author.parseAuthor(d,{familyNameFirst:!1}))}(l=$(e).find("#literatureReviewDate"))&&(s=(s=m.Utils.normalizeString($(l).text())).replace(/.+updated:/,"").replace(/\.\s*$/,""),t.published=m.library.Date.parseDate(s))}return t.journal&&(t.journal=t.journal.replace(/\.$/,"")),t},normalizeStr:function(e){var t="";return e&&(t=e.replace(/^[\n\t\r\s]+/,"").replace(/[\n\t\r\s]+$/,"").replace(/[\t\r\n\s]+/g," ")),t},getName:function(){return"UpToDate"}}),m.format.UpToDate=new m.format._UpToDate,m.format._XMP=m.format.AbstractReader.extend({readBasicPdfInfo:function(e){if("string"==typeof e){var t=this.getXMLParser(e),r={source:{}},a=$(t).filterNode("dc:title");a[0]&&(r.source.pdf_title=this.trim($(a[0]).text()));var i=$(t).filterNode("dc:description");return i[0]&&(r.source.pdf_description=this.trim($(i[0]).text())),r}return null},doRead:function(e){var t;if("string"==typeof e)t=this.getXMLParser(e);else{if("object"!=typeof e)return[];t=e}var r=this._readXMP(t);return m.library.Publication.autoClean(r),[r]},trim:function(e){return e=(e=e.replace(/^[\n\s]+/g,"")).replace(/[\n\s]+$/g,"")},_setPubFieldFromXml:function(e,t,r,a){var i=$(r).filterNode(a);if(i[0]){var n=$(i[0]).text().replace(/\s+$/,"").replace(/^\s+/,"");n&&(e[t]=n)}else if(r._metadata)(i=r._metadata[a]||r._metadata[a.toLowerCase()])&&(e[t]=i);else{var o=$(r).filterNode("rdf:Description");if(o[0]){var s=$(o[0]).attr(a)||null;s&&(e[t]=s)}}},_parseCommaOrSemiColonSeperatedAuthorNames:function(e,t){var r="string"==typeof e?e:"";r=(r=(r=r.replace(/\s/," ")).replace(/\sand\s/gi,",")).split(/[;,]/);for(var a=0;a<r.length;a++)t.author.push(m.library.Author.parseAuthor(r[a].trim(),{familyNameFirst:!1}))},_readXMP:function(e){var t={author:[],pubtype:"PP_ARTICLE",url:[]};if(this._setPubFieldFromXml(t,"doi",e,"prism:doi"),t.doi||this._setPubFieldFromXml(t,"doi",e,"pdfx:WPS-ARTICLEDOI"),t.doi||this._setPubFieldFromXml(t,"doi",e,"crossmark:DOI"),t.doi||this._setPubFieldFromXml(t,"doi",e,"dc:identifier"),t.doi||this._setPubFieldFromXml(t,"doi",e,"pdfx:doi"),t.doi||this._setPubFieldFromXml(t,"doi",e,"dg:DOI"),t.doi){var r=m.library.Publication.extractDoi(t.doi);r?t.doi=r:(t.doi.match(/^https?:\/\/.+/)&&!t.doi.match(/doi\.org/)&&t.url.push(t.doi),delete t.doi)}if(this._setPubFieldFromXml(t,"issn",e,"prism:issn"),!t.issn){this._setPubFieldFromXml(t,"issn",e,"pdfx:WPS-JOURNALDOI");var a=(t.issn||"").match(/10\.[\d+]{4,5}\/\(ISSN\)([-\d]*)/);a&&a[1]&&(t.issn=a[1]),t.issn||this._setPubFieldFromXml(t,"issn",e,"pdfx:ISSN")}if(""==t.issn&&delete t.issn,this._setPubFieldFromXml(t,"issn_alt",e,"prism:eIssn"),t.issn_alt||this._setPubFieldFromXml(t,"issn_alt",e,"pdfx:eISSN"),""==t.issn_alt&&delete t.issn_alt,this._setPubFieldFromXml(t,"volume",e,"prism:volume"),this._setPubFieldFromXml(t,"issue",e,"prism:issueidentifier"),t.issue||this._setPubFieldFromXml(t,"issue",e,"prism:number"),this._setPubFieldFromXml(t,"journal",e,"prism:publicationName"),this._setPubFieldFromXml(t,"startpage",e,"prism:startingPage"),this._setPubFieldFromXml(t,"endpage",e,"prism:endingPage"),this._setPubFieldFromXml(t,"pub_date",e,"prism:publicationDate"),t.pub_date){var i=m.library.Date.parseDate(t.pub_date);t.year=i.year,t.month=i.month,t.day=i.day}else if(this._setPubFieldFromXml(t,"pub_date",e,"prism:coverDisplayDate"),t.pub_date){i=m.library.Date.parseDate(t.pub_date);t.year=i.year}if(delete t.pub_date,this._setPubFieldFromXml(t,"title",e,"dc:title"),t.title&&(t.title=t.title.replace(/&amp;/g,"&"),t.title=$("<p/>").html(t.title).text()),this._setPubFieldFromXml(t,"publisher",e,"dc:publisher"),e._metadata)e._metadata["dc:creator"]&&(e._metadata["dc:creator"].match(/[,;]/)?this._parseCommaOrSemiColonSeperatedAuthorNames(e._metadata["dc:creator"],t):t.author=m.library.Author.parseAuthor(e._metadata["dc:creator"],{familyNameFirst:!1}));else{var n=$(e).filterNode("dc:creator").filterNode("rdf:li");if(n[0]||(n=$(e).filterNode("dc:contributor").filterNode("rdf:li")),n[0])if(1==n.length&&$(n[0]).text().match(/[;,]/))this._parseCommaOrSemiColonSeperatedAuthorNames($(n[0]).text(),t);else for(var o=0;o<n.length;o++)t.author.push(m.library.Author.parseAuthor($(n[o]).text(),{familyNameFirst:!1}))}return t},getName:function(){return"XMP"}}),m.format.XMP=new m.format._XMP,m.format._Zotero=m.format.AbstractReader.extend({getName:function(){return"Zotero JSON"},doRead:function(e){var t=this;if(e){if(m.Utils.isArray(e)){var r=[];return e.forEach((function(e){var a=t._readZoteroJSON(e);r.push(a)})),r}var a=m.Utils.decode($(e).filterNode("content").text());return a?[t._readZoteroJSON(a)]:[]}return[]},_readZoteroJSON:function(e){var t,r=this,a={url:[],zotero_tags:[]},i=r.jsonGetPubtypeAndKind(e.itemType);a.pubtype=i.pubtype,i.kind&&(a.kind=i.kind);var n=r.jsonMapToPaperpileFields(e,a.pubtype);for(t in n)if(0!==n[t].length){var o=n[t][0],s=r.jsonIninitalizeValue(t);if("published"!==(t=t.replace(/\..+/,""))&&"filed"!==t||!o)if("zotero_tags"===t){s[t]=[];for(var l=0;l<o.length;l++)o[l].type&&1==o[l].type||s[t].push(o[l].tag)}else"creators"===t?(s={},o.forEach((function(e){if(e.creatorType){var t="author";"editor"===e.creatorType&&(t="editor"),"translator"===e.creatorType&&(t="translator"),"castMember"===e.creatorType&&(t="editor"),"producer"===e.creatorType&&(t="series_editor"),"recipient"===e.creatorType&&(t="editor"),t in s||(s[t]=[]);var r={};e.name?r.collective=e.name:(r.first=e.firstName,r.last=e.lastName),m.library.Author.autoClean(r),s[t].push(r)}}))):"issn"===t?s=r.jsonCheckISSN(o):"isbn"===t?s=r.jsonCheckISBN(o):r.jsonSetValue(t,s,o);else s[t]=m.library.Date.parseDate(o),m.Utils.isObject(s[t])&&delete s[t].unparsed;r.jsonAssignValuesToPub(s,a)}return a}}),m.format.Zotero=new m.format._Zotero,m.format._WoK=m.format.AbstractReader.extend({map:{PUBLISHER:["EDITORIAL","EDITOR","\u0410\u0414\u0420\u0415\u0421\u0410"],VOLUME:["VOLUMEN","\u0422\u041e\u041c"],ISSUE:["N\xdaMERO","EDI\xc7\xc3O","\u0412\u042b\u041f\u0423\u0421\u041a"],PAGES:["P\xc1GINAS","\u0421\u0422\u0420."],PUBLISHED:["FECHA DE PUBLICACI\xd3N","PUBLICADO","\u041e\u041f\u0423\u0411\u041b\u0418\u041a\u041e\u0412\u0410\u041d\u041e"],"DOCUMENT TYPE":["TIPO DE DOCUMENTO","\u0422\u0418\u041f \u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422\u0410"],BY:["POR","\u0410\u0412\u0422\u041e\u0420"],"EDITED BY":[],LANGUAGE:["IDIOMA","\u042f\u0417\u042b\u041a"]},doRead:function(e){var t=this._readHTML(e);return m.library.Publication.autoClean(t),[t]},_readHTML:function(e){var t,r={url:[],pubtype:"PP_BOOK",keywords:[],authors:[],editors:[]};if((t=$(e).find(".title"))&&t.length>0&&(r.title=$(t[0]).text()),(t=$(e).find(".sourceTitle"))&&t.length>0){var a=$(t[0]).text();r.journal=m.String.toTitleCase(m.Utils.normalizeString(a))}headings=$(e).find(".title3");for(var i=0;i<headings.length;i++)"Abstract"==$(headings[i]).text()&&(r.abstract=$(headings[i]).next().text(),i=headings.length);fields=$(e).find(".FR_field");for(var n=0;n<fields.length;n++){var o,s,l=$(fields[n]).children();s="";for(i=0;i<l.length;i++){var c=$(l[i]);c.hasClass("FR_label")?o=c.text():o&&(s.length?s+=":::"+c.text():s=c.text())}s||(s=(s=$(fields[n]).text()).replace(o,"")),o&&(o=o.replace(/\n/g," "),o=m.Utils.normalizeString(o).replace(/:.*/,"").toUpperCase());var u=this.getKey(o);"BY"!=u&&"EDITED BY"!=u||(s=(s=$(fields[n]).text()).replace(/^[^:]+:/g,"")),o&&(s=s.replace(/\n/g," "),s=m.Utils.normalizeString(s),r=this.parseKeyValue(o,s,r))}r.authors.length&&(r.author=this.parseAuthors(r.authors)),r.editors.length&&(r.editor=this.parseAuthors(r.editors)),delete r.editors,delete r.authors;var d=!1;if("PP_BOOK_CHAPTER"==r.pubtype&&(d=!0),"PP_CONFERENCE_PAPER"==r.pubtype&&r.isbn&&(d=!0),d&&r.journal&&(r.booktitle=r.journal,delete r.journal),"publisher"in r){pubString=m.String.toTitleCase(r.publisher),pubString.indexOf(",")>-1?(r.publisher=pubString.substring(0,pubString.indexOf(",")),r.address=pubString.substring(pubString.indexOf(",")+2,pubString.length)):r.publisher=pubString,publisherArray=r.publisher.split(","),locationString="";for(var p=0;p<publisherArray.length;p++)0===p?r.publisher=m.String.toTitleCase(publisherArray[p]):locationString+=r.publisher[p];locationString.length&&(r.address=m.String.toTitleCase(locationString))}return r.language&&(r.language=m.Utils.normalizeLanguage(r.language)),r},getKey:function(e){var t=e;for(var r in this.map)this.map[r].indexOf(e)>-1&&(t=r);return t},parseKeyValue:function(e,t,r){for(;e.indexOf("_")>=0;)e=e.replace("_"," ");if("BY"==(e=this.getKey(e))&&(r.authors=t.split(";")),"EDITED BY"==e)r.editors=t.split(";");else if("BOOK SERIES"==e)r.series=t;else if("VOLUME"==e)r.volume=t;else if("ISSUE"==e)r.issue=t;else if("PAGES"==e)r.pages=t;else if("PUBLISHED"==e){if((n=t.match(/(\d{4})/))&&2==n.length){var a={};a.year=n[1],r.published=a}}else if("PUBLISHER"==e)r.publisher=t;else if("DOCUMENT TYPE"==e)r.pubtype="Book"==t?"PP_BOOK":"Article"==t?"PP_ARTICLE":"Proceedings Paper"==t?"PP_CONFERENCE_PAPER":"Book Chapter"==t?"PP_BOOK_CHAPTER":"News Item"==t?"PP_NEWS_ARTICLE":"Meeting Abstract"==t?"conference"in r?"PP_CONFERENCE_PAPER":"PP_MISC":"PP_ARTICLE";else if("LANGUAGE"==e)r.language=t;else if("ISBN"==e){var i=m.Utils.extractISBNs(t,{convert:!0,unique:!0});i[0]&&(r.isbn=i[0]),i[1]&&(r.isbn_alt=i[1])}else if("ISSN"==e)r.issn=t;else if("EISSN"==e)r.issn_alt=t;else if("DOI"==e)r.doi=t;else if("PUBMED ID"==e)r.pmid=t;else if("AUTHOR KEYWORDS"==e)r.keywords.length||(r.keywords=t.split(":::"));else if("KEYWORDS PLUS"==e)r.keywords.length||(r.keywords=t.split(":::"));else if("CONFERENCE"==e)r.conference=t;else if("LOCATION"==e)"conference"in r&&(r.conference_location=t);else if("DATE"==e){var n;if("conference"in r)if((n=t.match(/(\d{4})/))&&2==n.length){var o={};o.year=n[1],o.literal=t,r.conference_date=o}}return r},parseAuthors:function(e){for(var t=[],r=0;r<e.length;r++){e[r]=e[r].replace(/.*\(/,""),e[r]=e[r].replace(/\).*/,"");var a=e[r].split(/,\s*/);a.length>=2?t.push({last:a[0],first:a[1]}):"[Anonymous]"==e&&t.push({collective:"Anonymous"})}return t},getName:function(){return"WoK"}}),m.format.WoK=new m.format._WoK,m.format._WorldCat=m.format.AbstractReader.extend({doRead:function(e){var t=null,r=[];try{t=JSON.parse(e),r=this._readJSON(t)}catch(t){r=this._readHTML(e)}return r},_readJSON:function(e){for(var t=[],r=0;r<e.briefRecords.length;r+=1){var a=e.briefRecords[r],i={};if(a.generalFormat&&"artchap"===a.generalFormat.toLowerCase()?(i.pubtype="PP_BOOK_CHAPTER",a.specificFormat&&"artcl"===a.specificFormat.toLowerCase()&&(i.pubtype="PP_ARTICLE")):a.generalFormat&&"encyc"===a.generalFormat.toLowerCase()?i.pubtype="PP_ENCYCLOPEDIA_ARTICLE":(i.pubtype="PP_BOOK",a.specificFormat&&"thsis"===a.specificFormat.toLowerCase()&&(i.pubtype="PP_THESIS")),a.title&&m.Utils.isString(a.title)&&(i.title=a.title.trim()),a.isbn13&&m.Utils.isString(a.isbn13)&&(i.isbn=a.isbn13),a.publicationDate&&m.Utils.isString(a.publicationDate)&&(i.published=m.library.Date.parseDate(a.publicationDate.replace(/[()\[\]<>\xa9c]/g,""))),a.abstract&&m.Utils.isString(a.abstract)&&(i.abstract=a.abstract.replace(/^\[/,"").replace(/\]$/,"").trim()),a.summary&&m.Utils.isString(a.summary)&&!i.abstract&&(i.abstract=a.summary.replace(/^\[/,"").replace(/\]$/,"").trim()),a.publisher&&m.Utils.isString(a.publisher)&&(i.publisher=a.publisher.replace(/^\[/,"").replace(/\]$/,"").trim()),a.publicationPlace&&m.Utils.isString(a.publicationPlace)&&(i.address=a.publicationPlace.replace(/^\[/,"").replace(/\]$/,"").trim()),a.catalogingLanguage&&m.Utils.isString(a.catalogingLanguage)&&(i.language=m.Utils.normalizeLanguage(a.catalogingLanguage)),a.doi&&m.Utils.isString(a.doi)&&(i.doi=a.doi),a.sourceIssn&&m.Utils.isString(a.sourceIssn)&&""!==m.library.Publication.checkValidityOfISSN(a.sourceIssn)&&(i.issn=a.sourceIssn),a.publication&&m.Utils.isString(a.publication)){var n=a.publication.split(/,/);"PP_ARTICLE"===i.pubtype&&n&&n.length>1?(i.journalfull=n[0].trim(),4===n.length&&(i.volume=n[1].trim(),i.pages=n[3].trim())):"PP_BOOK_CHAPTER"===i.pubtype&&(i.booktitle=n[0].trim())}if(a.contributors&&m.Utils.isArray(a.contributors))for(var o=0;o<a.contributors.length;o+=1){var s=a.contributors[o]&&a.contributors[o].firstName&&a.contributors[o].firstName.text||"",l=a.contributors[o]&&a.contributors[o].secondName&&a.contributors[o].secondName.text||"",c={};if(s&&l)c={first:s,last:l};else if(s||l){var u=s||l;c=m.library.Author.parseAuthor(u,{familyNameFirst:!1})}else a.contributors[o].nonPersonName&&(c={collective:a.contributors[o].nonPersonName.text});var d="author",p=a.contributors[o].relatorCodes&&a.contributors[o].relatorCodes[0];"edt"===p?d="editor":"trl"===p&&(d="translator"),i[d]||(i[d]=[]),i[d].push(c)}t.push(i)}return t},_readHTML:function(e){var t=[],r=e.match(/<span class="Z3988" title="[^"]+">/g);r&&r.forEach((function(e){var r=m.format.ContextObject.doRead(e.replace(/(.+title=")([^"]+)(".+)/,"$2"));r&&r[0]&&t.push(r[0])}));var a=$(e).find("td.result");if(a&&a.length===t.length)for(var i=0;i<a.length;i+=1){var n=[];$(a[i]).find("div.author").text().replace(/^\s*by\s+/,"").split(/;+/).forEach((function(e){e=e.replace(/,.*/,"");var t=m.library.Author.parseAuthor(e,{familyNameFirst:!1});(t.last||t.collective)&&n.push(t)})),n.length>0&&(t[i].author?n.length>t[i].author.length&&(t[i].author=n):t[i].author=n)}return t},getName:function(){return"WorldCat"}}),m.format.WorldCat=new m.format._WorldCat,m.format._Tests=m.Class.extend({getTests:function(){return this._tests||(this._tests=[{target:"Ris",test_description:"Authors names are all pooled in one line",file:"tests_ris/file001.ris",pubtype:"PP_ARTICLE",title:"Stromal cell-derived factor-1\u03b1-directed chemoattraction of transiently CXCR4-overexpressing bone marrow stromal cells into functionalized three-dimensional biomimetic scaffolds","author.0.last":"Thieme","author.1.last":"Ryser",volume:"15",issue:"4",publisher:"Mary Ann Liebert, Inc.",journalfull:"Tissue Engineering: Part C","url.0":"http://www.liebertonline.com/doi/abs/10.1089/ten.tec.2008.0556",pages:"687","published.year":"2009",journal:"Tissue Engineering: Part C",doi:"10.1089/ten.tec.2008.0556"},{target:"Ris",test_description:"standard journal article with abstract",file:"tests_ris/file002.ris",pubtype:"PP_ARTICLE",abstract:"The penetration of US national security by foreign agents as well as American citizens is a historical and current reality that's a persistent and increasing phenomenon. Surveys, such as the e-crime watch survey, reveal that current or former employees and contractors are the second greatest cybersecurity threat, exceeded only by hackers, and that the number of security incidents has increased geometrically in recent years. The insider threat is manifested when human behavior departs from compliance with established policies, regardless of whether it results from malice or a disregard for security policies. In this article, we focus on the need for effective training to raise staff awareness about insider threats and the need for organizations to adopt a more effective approach to identifying potential risks and then taking proactive steps to mitigate them.",journal:"IEEE Security and Privacy",issue:"1",title:"Combating the Inside Cyber Threat",volume:"6",pages:"61-64","published.year":"2008","author.0.last":"Greitzer","author.1.last":"Moore"},{target:"Ris",test_description:"standard book entry",file:"tests_ris/file003.ris",pubtype:"PP_BOOK",address:"New York, NY, USA",publisher:"Penguin Classics",title:"The Odyssey","published.year":"2003","author.0.collective":"Homer"},{target:"Ris",test_description:"standard book entry with ISBN",file:"tests_ris/file004.ris",pubtype:"PP_BOOK",address:"New York, NY, USA",isbn:"9780375507458",publisher:"Random House",title:"Spy: The Inside Story of How the FBI's Robert Hanssen Betrayed America","author.0.last":"Wise"},{target:"Ris",test_description:"conference paper",file:"tests_ris/file005.ris",pubtype:"PP_CONFERENCE_PAPER",abstract:"Insider Threat has become one of the most important types of attacks to identify and combat for both government and commercial organizations in recent years. The irreversible financial and security damages that can result from this type of threat have placed Insider Threat among the most important problems in cybersecurity [1]. The complexity of the problem is mainly due to the fact that the attacker is a legitimate user of the system, which makes it very difficult to draw a clear line between legitimate and malicious actions. This paper presents a multi-perspective approach for detection of insider threats in typical enterprise networks. In this approach, multiple detection engines monitor network activities from different perspectives and use the aggregate information to adjust their detection sensitivities. Experimental results from our studies show that this approach results in reduced false alarm probability as well as an increased ability to detect attacks by colluding insiders.",address:"Los Alamitos, CA, USA",publisher:"IEEE Computer Society",title:"A Multi-Perspective Approach to Insider Threat Detection",journal:"Proceedings of the 2011 Military Communications Conference",pages:"1164-1169","published.year":"2011","author.0.last":"Raissi-Dehkordi","author.1.last":"Carr"},{target:"Ris",test_description:"general entry - misc",file:"tests_ris/file006.ris",pubtype:"PP_MISC",title:"Implementation of $K$-ary Viruses in Python","published.year":"2009","author.0.last":"Desnos"},{target:"Ris",test_description:"report",file:"tests_ris/file007.ris",pubtype:"PP_REPORT",title:"Better Design, Better Elections","published.year":"2012","url.0":"http://www.brennancenter.org/page/-/Democracy/VRE/Better_Design_Better_Elections.pdf","author.0.last":"Norden","author.1.last":"Quesenbery","author.2.last":"Kimball"},{target:"Ris",test_description:"article type: unpublished",file:"tests_ris/file008.ris",pubtype:"PP_UNPUBLISHED",abstract:"The 1997 re-identification of Massachusetts Governor William ...The complete story of ...",title:"The `Re-Identification' of Governor William Weld's Medical Information: A Critical Re-Examination of Health Data Identification Risks and Privacy Protections, Then and Now","url.0":"http://ssrn.com/abstract=2076397","author.0.last":"Barth-Jones","published.year":"2012"},{target:"Ris",test_description:"article type: webiste",file:"tests_ris/file009.ris",pubtype:"PP_WEBSITE",abstract:"Secretary of State Debra Bowen conducted ...",title:"Top-to-Bottom Review","url.0":"http://www.sos.ca.gov/voting-systems/oversight/top-to-bottom-review.htm","published.year":"2007"},{target:"Ris",test_description:"another book entry",file:"tests_ris/file010.ris",pubtype:"PP_BOOK",address:"Sebastopol, CA, USA",isbn:"9780596510336",publisher:"O'Reilly and Associates",title:"Version Control with Subversion","published.year":"2008","author.0.last":"Pilato","author.1.last":"Collins-Sussman","author.2.last":"Fitzpatrick"},{target:"Ris",test_description:"PhD thesis",file:"tests_ris/file011.ris",pubtype:"PP_THESIS",abstract:"In this thesis, we detail an approach to ...",address:"Cambridge, MA, USA",title:"Was the Patient Cured? Understanding Semantic Categories and Their Relationships in Patient Records","author.0.last":"Sibanda","published.year":"2006"},{target:"Ris",test_description:"article type: manual",file:"tests_ris/file012.ris",pubtype:"PP_MISC",address:"Santa Clara, CA, USA",issue:"Order Number 253668-033US",title:"Intel 64 and IA-32 Architectures Software Developer's Manual Volume 3A: System Programming Guide, Part 1","url.0":"http://www.intel.com/Assets/PDF/manual/253668.pdf","published.year":"2009"},{target:"Ris",test_description:"Master thesis",file:"tests_ris/file013.ris",pubtype:"PP_THESIS",abstract:"The Domain Name System (DNS) is ... This thesis describes problems ...",address:"West Lafayette, IN 47904",title:"Addressing Weaknesses in the Domain Name System Protocol","url.0":"http://ftp.cerias.purdue.edu/pub/doc/network/schuba-DNS-msthesis.ps.Z","published.year":"1993","author.0.last":"Schuba"},{target:"Ris",test_description:"book chapter",file:"tests_ris/file014.ris",pubtype:"PP_BOOK_CHAPTER",address:"Piscataway, NJ, USA",isbn:"9780470544327",publisher:"IEEE Press",title:"Stream Ciphers","url.0":"http://ieeexplore.ieee.org/xpl/ebooks/bookPdfWithBanner.jsp?fileName=5265909.pdf&bkn=5265879",journal:"Contemporary Cryptology: The Science of Information Integrity","author.0.last":"Rueppel","editor.0.last":"Simmons",pages:"65-134","published.year":"1992"},{target:"Ris",test_description:"",file:"tests_ris/file015.ris",pubtype:"PP_MISC",abstract:"Recently there has been much interest in ...",address:"Berkeley, CA, USA",publisher:"USENIX Association",title:"On the Security of UNIX",volume:"2",journal:"UNIX Programmer's Manual","published.year":"1978","author.0.last":"Ritchie"},{target:"Ris",test_description:"Thesis",file:"tests_ris/file016.ris",pubtype:"PP_THESIS",title:"Acting Processes in Contemporary British Verbatim Theatre",abstract:"This thesis is the first investigation to ...","published.year":"2010","author.0.last":"Cantrell"},{target:"Ris",test_description:"article with abstract and keywords",file:"tests_ris/file017.ris",pubtype:"PP_ARTICLE",title:"Not 'Going There' - Limits to the Professionalisation of our Emotional Lives",abstract:"This article takes as its ...",keywords:"emotions talk; therapeutic professionals; cultural beliefs; privacy boundaries; need",doi:"10.1111/j.1467-9566.2010.01269.x",journal:"Sociology of Health & Illness",journalfull:"Sociology of Health & Illness",issn:"0141-9889",issue:"1",volume:"33","published.year":"2011","url.0":"http://dx.doi.org/10.1111/j.1467-9566.2010.01269.x",pages:"130-144","author.0.last":"Brownlie"}]),this._tests}}),m.format.Tests=new m.format._Tests}).call(this,r(78)(e),r(24))}]);