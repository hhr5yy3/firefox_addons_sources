!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):e.vkbeautify=s()}(this,(function(){"use strict";function e(e){let s="    ";s=isNaN(parseInt(e))?e:" ".repeat(e);const t=["\n"];for(let e=0;e<100;e++)t.push(t[e]+s);return t}function s(){this.step="\t",this.shift=e(this.step)}return s.prototype.xml=function(s,t){const n=s.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),r=n.length,c=t?e(t):this.shift;let i=!1,a=0,o="";for(let e=0;e<r;e++)n[e].search(/<!/)>-1?(o+=c[a]+n[e],i=!0,(n[e].search(/-->/)>-1||n[e].search(/\]>/)>-1||n[e].search(/!DOCTYPE/)>-1)&&(i=!1)):n[e].search(/-->/)>-1||n[e].search(/\]>/)>-1?(o+=n[e],i=!1):/^<\w/.exec(n[e-1])&&/^<\/\w/.exec(n[e])&&/^<[\w:\-\.\,]+/.exec(n[e-1])==/^<\/[\w:\-\.\,]+/.exec(n[e])[0].replace("/","")?(o+=n[e],i||a--):n[e].search(/<\w/)>-1&&-1==n[e].search(/<\//)&&-1==n[e].search(/\/>/)?o=o+=i?n[e]:c[a++]+n[e]:n[e].search(/<\w/)>-1&&n[e].search(/<\//)>-1?o=o+=i?n[e]:c[a]+n[e]:n[e].search(/<\//)>-1?o=o+=i?n[e]:c[--a]+n[e]:n[e].search(/\/>/)>-1?o=o+=i?n[e]:c[a]+n[e]:n[e].search(/<\?/)>-1||n[e].search(/xmlns\:/)>-1||n[e].search(/xmlns\=/)>-1?o+=c[a]+n[e]:o+=n[e];return"\n"==o[0]?o.slice(1):o},s.prototype.json=function(e,s){return s=s||this.step,"string"==typeof e?JSON.stringify(JSON.parse(e),null,s):"object"==typeof e?JSON.stringify(e,null,s):e},new s}));