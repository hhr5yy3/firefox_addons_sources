const ClassWebAccessibleFido2=function(){"use strict";const e=void 0!==window.PublicKeyCredential;let t=null,n=null,r={},o={};function a(e){if(e.origin===window.location.origin&&e.data.hasOwnProperty("event")&&e.data.hasOwnProperty("data"))switch(e.data.event){case"navigator-credentials-get-response":!function(e){if(!o.hasOwnProperty(e.eventId))return;if(e.error){if(console.log(e.error),e.error.hasOwnProperty("errorType")&&new Set(["BYPASS_PSONO"]).has(e.error.errorType)){const t=o[e.eventId].options;return o[e.eventId].resolve(n(t))}return void o[e.eventId].reject(new DOMException("The operation either timed out or was not allowed.","AbortError"))}const t={...e.credential,rawId:c(e.credential.rawId),response:{...e.credential.response,clientDataJSON:c(e.credential.response.clientDataJSON),authenticatorData:c(e.credential.response.authenticatorData),signature:c(e.credential.response.signature),userHandle:c(e.credential.response.userHandle)},getClientExtensionResults:function(){return{}}};Object.setPrototypeOf(t.response,AuthenticatorAssertionResponse.prototype),Object.setPrototypeOf(t,PublicKeyCredential.prototype),o[e.eventId].resolve(t)}(e.data.data);break;case"navigator-credentials-create-response":!function(e){if(!r.hasOwnProperty(e.eventId))return;if(e.error){if(console.log(e.error),e.error.hasOwnProperty("errorType")&&new Set(["BYPASS_PSONO","PASSKEY_DISABLED"]).has(e.error.errorType)){const n=r[e.eventId].options;return r[e.eventId].resolve(t(n))}return void r[e.eventId].reject(new DOMException("The operation either timed out or was not allowed.","AbortError"))}const n={...e.credential,rawId:c(e.credential.rawId),response:{...e.credential.response,clientDataJSON:c(e.credential.response.clientDataJSON),attestationObject:c(e.credential.response.attestationObject),getAuthenticatorData:()=>c(e.credential.response.authenticatorData),getPublicKey:()=>c(e.credential.response.publicKey),getPublicKeyAlgorithm:()=>e.credential.response.publicKeyAlgorithm,getTransports:()=>e.credential.response.transports},getClientExtensionResults:function(){return{}}};Object.setPrototypeOf(n.response,AuthenticatorAttestationResponse.prototype),Object.setPrototypeOf(n,PublicKeyCredential.prototype),r[e.eventId].resolve(n)}(e.data.data)}}function i(e){const t=[];for(let n=0;n<e.length;n++)t.push("0123456789abcdef"[e[n]>>4&15]),t.push("0123456789abcdef"[15&e[n]]);return t.join("")}function s(e){return function(e){let t="";const n=new Uint8Array(e);for(let e=0;e<n.byteLength;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)}(e).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}function c(e){return function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r.buffer}(e.replace(/-/g,"+").replace(/_/g,"/"))}function l(n){let o=!1;return n&&n.publicKey&&n.publicKey.authenticatorSelection&&n.publicKey.authenticatorSelection.authenticatorAttachment&&"platform"===n.publicKey.authenticatorSelection.authenticatorAttachment&&(o=!0),o&&e?t(n):new Promise((function(e,t){const o=i(window.crypto.getRandomValues(new Uint8Array(16)));r[o]={options:n,resolve:e,reject:t},window.postMessage({event:"navigator-credentials-create",data:{options:{publicKey:{...n.publicKey,challenge:s(n.publicKey.challenge),excludeCredentials:n.publicKey.excludeCredentials?n.publicKey.excludeCredentials.map((e=>({id:s(e.id),transports:e.transports,type:e.type}))):n.publicKey.excludeCredentials,user:{...n.publicKey.user,id:s(n.publicKey.user.id)}}},origin:window.location.origin,eventId:o}},window.location.origin)}))}function d(e){return new Promise((function(t,n){const r=i(window.crypto.getRandomValues(new Uint8Array(16)));o[r]={options:e,resolve:t,reject:n},window.postMessage({event:"navigator-credentials-get",data:{options:{mediation:e.hasOwnProperty("mediation")?e.mediation:void 0,publicKey:{...e.publicKey,challenge:s(e.publicKey.challenge),allowCredentials:e.publicKey.allowCredentials?e.publicKey.allowCredentials.map((e=>({...e,id:s(e.id)}))):[]}},origin:window.location.origin,eventId:r}},window.location.origin)}))}!function(){navigator&&navigator.credentials&&navigator.credentials.create&&(t=navigator.credentials.create.bind(navigator.credentials),navigator.credentials.create=l);navigator&&navigator.credentials&&navigator.credentials.get&&(n=navigator.credentials.get.bind(navigator.credentials),navigator.credentials.get=d);window.addEventListener("message",a)}()};