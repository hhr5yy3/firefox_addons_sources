!function(){"use strict";function e(e,t,n,r){return new(n||(n=Promise))((function(t,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,a)}s((r=r.apply(e,[])).next())}))}function t(e){return this instanceof t?(this.v=e,this):new t(e)}function n(e){function t(t){n[t]=e[t]&&function(n){return new Promise((function(r,o){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,o,(n=e[t](n)).done,n.value)}))}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)}function r(e){return Boolean(e)&&"object"==typeof e&&"name"in e&&"message"in e&&"stack"in e}function o(e){return Array.isArray(e)}function i(e){return"boolean"==typeof e}function a(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function c(e){return"string"==typeof e}function d(e){return void 0===e}function u(e){try{return new RegExp(e),!0}catch{return!1}}function l(e){if(!c(e))return!1;for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n>=7&&n<=13||27===n||127===n)return!1}return!0}function p(e){return h(e)||_(e)}function f(e){return d(e)||function(e){return"bigint"==typeof e}(e)}function m(e){return d(e)||a(e)}function h(e){return d(e)||i(e)}function y(e){return d(e)||c(e)}function g(e){return d(e)||_(e)}function S(e){return s(e)&&"Optional"===e[wt]}function b(e){return D(e,"Array")&&"array"===e.type&&y(e.$id)&&_(e.items)&&m(e.minItems)&&m(e.maxItems)&&h(e.uniqueItems)&&g(e.contains)&&m(e.minContains)&&m(e.maxContains)}function w(e){return D(e,"Integer")&&"integer"===e.type&&y(e.$id)&&m(e.exclusiveMaximum)&&m(e.exclusiveMinimum)&&m(e.maximum)&&m(e.minimum)&&m(e.multipleOf)}function I(e){return s(e)&&Object.entries(e).every((([e,t])=>l(e)&&_(t)))}function E(e){return D(e,"Intersect")&&(!c(e.type)||"object"===e.type)&&o(e.allOf)&&e.allOf.every((e=>_(e)&&!U(e)))&&y(e.type)&&(h(e.unevaluatedProperties)||g(e.unevaluatedProperties))&&y(e.$id)}function D(e,t){return s(e)&&Et in e&&e[Et]===t}function A(e){return D(e,"Literal")&&y(e.$id)&&function(e){return i(e)||a(e)||c(e)}(e.const)}function T(e){return D(e,"MappedKey")&&o(e.keys)&&e.keys.every((e=>a(e)||c(e)))}function v(e){return D(e,"MappedResult")&&I(e.properties)}function x(e){return D(e,"Never")&&s(e.not)&&0===Object.getOwnPropertyNames(e.not).length}function O(e){return D(e,"Number")&&"number"===e.type&&y(e.$id)&&m(e.exclusiveMaximum)&&m(e.exclusiveMinimum)&&m(e.maximum)&&m(e.minimum)&&m(e.multipleOf)}function P(e){return D(e,"Object")&&"object"===e.type&&y(e.$id)&&I(e.properties)&&p(e.additionalProperties)&&m(e.minProperties)&&m(e.maxProperties)}function k(e){return D(e,"Record")&&"object"===e.type&&y(e.$id)&&p(e.additionalProperties)&&s(e.patternProperties)&&(e=>{const t=Object.getOwnPropertyNames(e.patternProperties);return 1===t.length&&u(t[0])&&s(e.patternProperties)&&_(e.patternProperties[t[0]])})(e)}function R(e){return D(e,"RegExp")&&y(e.$id)&&c(e.source)&&c(e.flags)}function C(e){return D(e,"String")&&"string"===e.type&&y(e.$id)&&m(e.minLength)&&m(e.maxLength)&&function(e){return d(e)||c(e)&&l(e)&&u(e)}(e.pattern)&&function(e){return d(e)||c(e)&&l(e)}(e.format)}function M(e){return D(e,"TemplateLiteral")&&"string"===e.type&&c(e.pattern)&&"^"===e.pattern[0]&&"$"===e.pattern[e.pattern.length-1]}function U(e){return s(e)&&bt in e}function N(e){return D(e,"Tuple")&&"array"===e.type&&y(e.$id)&&a(e.minItems)&&a(e.maxItems)&&e.minItems===e.maxItems&&(d(e.items)&&d(e.additionalItems)&&0===e.minItems||o(e.items)&&e.items.every((e=>_(e))))}function B(e){return D(e,"Union")&&y(e.$id)&&s(e)&&o(e.anyOf)&&e.anyOf.every((e=>_(e)))}function _(e){return s(e)&&(function(e){return D(e,"Any")&&y(e.$id)}(e)||b(e)||function(e){return D(e,"Boolean")&&"boolean"===e.type&&y(e.$id)}(e)||function(e){return D(e,"BigInt")&&"bigint"===e.type&&y(e.$id)&&f(e.exclusiveMaximum)&&f(e.exclusiveMinimum)&&f(e.maximum)&&f(e.minimum)&&f(e.multipleOf)}(e)||function(e){return D(e,"AsyncIterator")&&"AsyncIterator"===e.type&&y(e.$id)&&_(e.items)}(e)||function(e){return D(e,"Constructor")&&"Constructor"===e.type&&y(e.$id)&&o(e.parameters)&&e.parameters.every((e=>_(e)))&&_(e.returns)}(e)||function(e){return D(e,"Date")&&"Date"===e.type&&y(e.$id)&&m(e.exclusiveMaximumTimestamp)&&m(e.exclusiveMinimumTimestamp)&&m(e.maximumTimestamp)&&m(e.minimumTimestamp)&&m(e.multipleOfTimestamp)}(e)||function(e){return D(e,"Function")&&"Function"===e.type&&y(e.$id)&&o(e.parameters)&&e.parameters.every((e=>_(e)))&&_(e.returns)}(e)||w(e)||E(e)||function(e){return D(e,"Iterator")&&"Iterator"===e.type&&y(e.$id)&&_(e.items)}(e)||A(e)||T(e)||v(e)||x(e)||function(e){return D(e,"Not")&&_(e.not)}(e)||function(e){return D(e,"Null")&&"null"===e.type&&y(e.$id)}(e)||O(e)||P(e)||function(e){return D(e,"Promise")&&"Promise"===e.type&&y(e.$id)&&_(e.item)}(e)||k(e)||function(e){return D(e,"Ref")&&y(e.$id)&&c(e.$ref)}(e)||R(e)||C(e)||function(e){return D(e,"Symbol")&&"symbol"===e.type&&y(e.$id)}(e)||M(e)||function(e){return D(e,"This")&&y(e.$id)&&c(e.$ref)}(e)||N(e)||function(e){return D(e,"Undefined")&&"undefined"===e.type&&y(e.$id)}(e)||B(e)||function(e){return D(e,"Uint8Array")&&"Uint8Array"===e.type&&y(e.$id)&&m(e.minByteLength)&&m(e.maxByteLength)}(e)||function(e){return D(e,"Unknown")&&y(e.$id)}(e)||function(e){return D(e,"Unsafe")}(e)||function(e){return D(e,"Void")&&"void"===e.type&&y(e.$id)}(e)||function(e){return s(e)&&Et in e&&c(e[Et])&&!vt.includes(e[Et])}(e))}function q(e){return o(e)?function(e){return e.map((e=>q(e)))}(e):function(e){return e instanceof globalThis.Date}(e)?function(e){return new Date(e.getTime())}(e):function(e){return e instanceof globalThis.Uint8Array}(e)?function(e){return new Uint8Array(e)}(e):function(e){return e instanceof globalThis.RegExp}(e)?function(e){return new RegExp(e.source,e.flags)}(e):s(e)?function(e){return{...Object.getOwnPropertyNames(e).reduce(((t,n)=>({...t,[n]:q(e[n])})),{}),...Object.getOwnPropertySymbols(e).reduce(((t,n)=>({...t,[n]:q(e[n])})),{})}}(e):e}function L(e){return e.map((e=>F(e)))}function F(e,t={}){return{...(n=e,q(n)),...t};var n}function j(e,t={}){return{...t,[Et]:"Array",type:"array",items:F(e)}}function z(e,t){return t.reduce(((e,t)=>function(e,t){const{[t]:n,...r}=e;return r}(e,t)),e)}function $(e={}){return{...e,[Et]:"Never",not:{}}}function Y(e){return{[Et]:"MappedResult",properties:e}}function V(e,t){return{...t,[Et]:"Union",anyOf:L(e)}}function X(e){return e.map((e=>S(e)?function(e){return z(e,[wt])}(e):e))}function H(e,t={}){return 0===e.length?$(t):1===e.length?F(e[0],t):function(e,t){return function(e){return e.some((e=>S(e)))}(e)?ge(V(X(e),t)):V(X(e),t)}(e,t)}function K(e,t={}){return 0===e.length?$(t):1===e.length?F(e[0],t):V(e,t)}function J(e,t,n){return e[t]===n&&92!==e.charCodeAt(t-1)}function G(e,t){return J(e,t,"(")}function W(e,t){return J(e,t,")")}function Q(e,t){return J(e,t,"|")}function Z(e){return function(e){if(!G(e,0)||!W(e,e.length-1))return!1;let t=0;for(let n=0;n<e.length;n++)if(G(e,n)&&(t+=1),W(e,n)&&(t-=1),0===t&&n!==e.length-1)return!1;return!0}(e)?Z(function(e){return e.slice(1,e.length-1)}(e)):function(e){let t=0;for(let n=0;n<e.length;n++)if(G(e,n)&&(t+=1),W(e,n)&&(t-=1),Q(e,n)&&0===t)return!0;return!1}(e)?function(e){let[t,n]=[0,0];const r=[];for(let o=0;o<e.length;o++)if(G(e,o)&&(t+=1),W(e,o)&&(t-=1),Q(e,o)&&0===t){const t=e.slice(n,o);t.length>0&&r.push(Z(t)),n=o+1}const o=e.slice(n);return o.length>0&&r.push(Z(o)),0===r.length?{type:"const",const:""}:1===r.length?r[0]:{type:"or",expr:r}}(e):function(e){for(let t=0;t<e.length;t++)if(G(e,t))return!0;return!1}(e)?function(e){function t(e,t){if(!G(e,t))throw new xt("TemplateLiteralParser: Index must point to open parens");let n=0;for(let r=t;r<e.length;r++)if(G(e,r)&&(n+=1),W(e,r)&&(n-=1),0===n)return[t,r];throw new xt("TemplateLiteralParser: Unclosed group parens in expression")}function n(e,t){for(let n=t;n<e.length;n++)if(G(e,n))return[t,n];return[t,e.length]}const r=[];for(let o=0;o<e.length;o++)if(G(e,o)){const[n,i]=t(e,o),a=e.slice(n,i+1);r.push(Z(a)),o=i}else{const[t,i]=n(e,o),a=e.slice(t,i);a.length>0&&r.push(Z(a)),o=i-1}return 0===r.length?{type:"const",const:""}:1===r.length?r[0]:{type:"and",expr:r}}(e):{type:"const",const:e}}function ee(e){return Z(e.slice(1,e.length-1))}function te(e){return!function(e){return"or"===e.type&&2===e.expr.length&&"const"===e.expr[0].type&&"0"===e.expr[0].const&&"const"===e.expr[1].type&&"[1-9][0-9]*"===e.expr[1].const}(e)&&!function(e){return"const"===e.type&&".*"===e.const}(e)&&(!!function(e){return"or"===e.type&&2===e.expr.length&&"const"===e.expr[0].type&&"true"===e.expr[0].const&&"const"===e.expr[1].type&&"false"===e.expr[1].const}(e)||("and"===e.type||"or"===e.type?e.expr.every((e=>te(e))):"const"===e.type||(()=>{throw new Ot("Unknown expression type")})()))}function*ne(e){if(1===e.length)return yield*e[0];for(const t of e[0])for(const n of ne(e.slice(1)))yield`${t}${n}`}function*re(e){return yield*ne(e.expr.map((e=>[...oe(e)])))}function*oe(e){return"and"===e.type?yield*re(e):"or"===e.type?yield*function*(e){for(const t of e.expr)yield*oe(t)}(e):"const"===e.type?yield*function*(e){return yield e.const}(e):(()=>{throw new Pt("Unknown expression")})()}function ie(e,t={}){return{...t,[Et]:"Literal",const:e,type:typeof e}}function ae(e={}){return{...e,[Et]:"Boolean",type:"boolean"}}function se(e={}){return{...e,[Et]:"Number",type:"number"}}function ce(e={}){return{...e,[Et]:"String",type:"string"}}function de(e){return function(e){const t=ee(e.pattern);return te(t)?[...oe(t)]:[]}(e).map((e=>e.toString()))}function ue(e){return e.reduce(((e,t)=>[...e,...pe(t)]),[])}function le(e){return[e.toString()]}function pe(e){return[...new Set(M(e)?de(e):B(e)?ue(e.anyOf):A(e)?le(e.const):O(e)||w(e)?["[number]"]:[])]}function fe(e,t){return e.map((e=>me(e,t)))}function me(e,t){return E(e)?function(e,t){return we(function(e){return e.filter((e=>!x(e)))}(fe(e,t)))}(e.allOf,t):B(e)?function(e,t){return H(fe(e,t))}(e.anyOf,t):N(e)?function(e,t){return t in e?e[t]:"[number]"===t?H(e):$()}(e.items??[],t):b(e)?function(e,t){return"[number]"===t?e:$()}(e.items,t):P(e)?function(e,t){return t in e?e[t]:$()}(e.properties,t):$()}function he(e,t){return t.map((t=>me(e,t)))}function ye(e,t={}){const[n,r,o]=[!1,e.length,e.length];return e.length>0?{...t,[Et]:"Tuple",type:"array",items:L(e),additionalItems:n,minItems:r,maxItems:o}:{...t,[Et]:"Tuple",type:"array",minItems:r,maxItems:o}}function ge(e,t){const n=t??!0;return v(e)?function(e,t){const n=function(e,t){return function(e,t){return globalThis.Object.getOwnPropertyNames(e).reduce(((n,r)=>({...n,[r]:ge(e[r],t)})),{})}(e.properties,t)}(e,t);return Y(n)}(e,n):function(e,t){return!1===t?function(e){return z(F(e),[wt])}(e):function(e){return{...F(e),[wt]:"Optional"}}(e)}(e,n)}function Se(e,t){const n=e.every((e=>P(e))),r=_(t.unevaluatedProperties)?{unevaluatedProperties:F(t.unevaluatedProperties)}:{};return!1===t.unevaluatedProperties||_(t.unevaluatedProperties)||n?{...t,...r,[Et]:"Intersect",type:"object",allOf:L(e)}:{...t,...r,[Et]:"Intersect",allOf:L(e)}}function be(e){return e.map((e=>S(e)?function(e){return z(e,[wt])}(e):e))}function we(e,t={}){if(0===e.length)return $(t);if(1===e.length)return F(e[0],t);if(e.some((e=>U(e))))throw new Error("Cannot intersect transform types");return function(e,t){return function(e){return e.every((e=>S(e)))}(e)?ge(Se(be(e),t)):Se(be(e),t)}(e,t)}function Ie(e,t={}){if(0===e.length)return $(t);if(1===e.length)return F(e[0],t);if(e.some((e=>U(e))))throw new Error("Cannot intersect transform types");return Se(e,t)}function Ee(e){return e.reduce(((e,t)=>[...e,De(t)]),[])}function De(e){return E(e)?function(e){const t=function(e){return e.reduce(((e,t)=>[...e,...t]),[])}(Ee(e));return t}(e.allOf):B(e)?function(e){const t=function(e){return 1===e.length?e[0]:e.length>1?function(e,t){return e.reduce(((e,t)=>function(e,t){return e.filter((e=>t.includes(e)))}(e,t)),t)}(e.slice(1),e[0]):[]}(Ee(e));return t}(e.anyOf):N(e)?function(e){return e.map(((e,t)=>t.toString()))}(e.items??[]):b(e)?(e.items,["[number]"]):P(e)?function(e){return globalThis.Object.getOwnPropertyNames(e)}(e.properties):k(e)?(e.patternProperties,[]):[]}function Ae(e,t){return e.reduce(((e,n)=>function(e){return e.filter((e=>!x(e)))}([...e,...he(n,[t])])),[])}function Te(e,t={}){const n=function(e,t){return t.reduce(((t,n)=>({...t,[n]:we(Ae(e,n))})),{})}(e,function(e){return e.reduce(((e,t)=>function(e){return[...new Set(e)]}([...e,...De(t)])),[])}(e));return kt(n,t)}function ve(e={}){return{...e,[Et]:"Null",type:"null"}}function xe(e={}){return{...e,[Et]:"Unknown"}}function Oe(e,t={}){if(d(e))throw new Error("Enum undefined or empty");const n=globalThis.Object.getOwnPropertyNames(e).filter((e=>isNaN(e))).map((t=>e[t]));return K([...new Set(n)].map((e=>ie(e))),{...t,[It]:"Enum"})}function Pe(e,t){return E(e)?Ie(function(e,t){return e.map((e=>Pe(e,t)))}(e.allOf,t)):B(e)?K(function(e,t){return e.map((e=>Pe(e,t)))}(e.anyOf,t)):P(e)?kt(function(e,t){return t.reduce(((e,t)=>function(e,t){const{[t]:n,...r}=e;return r}(e,t)),e)}(e.properties,t)):kt({})}function ke(e,t,n={}){if(T(t))return function(e,t,n){const r=function(e,t,n){return function(e,t,n){return t.reduce(((t,r)=>({...t,...Re(e,r,n)})),{})}(e,t.keys,n)}(e,t,n);return Y(r)}(e,t,n);if(v(e))return function(e,t,n){return Y(function(e,t,n){return function(e,t,n){return globalThis.Object.getOwnPropertyNames(e).reduce(((r,o)=>({...r,[o]:ke(e[o],t,n)})),{})}(e.properties,t,n)}(e,t,n))}(e,t,n);const r=_(t)?pe(t):t;return{...z(e,[bt,"$id","required"]),...F(Pe(e,r),n)}}function Re(e,t,n){return{[t]:ke(e,[t],n)}}function Ce(e,t){return E(e)?Ie(function(e,t){return e.map((e=>Ce(e,t)))}(e.allOf,t)):B(e)?K(function(e,t){return e.map((e=>Ce(e,t)))}(e.anyOf,t)):P(e)?kt(function(e,t){return t.reduce(((t,n)=>n in e?{...t,[n]:e[n]}:t),{})}(e.properties,t)):kt({})}function Me(e,t,n={}){if(T(t))return function(e,t,n){const r=function(e,t,n){return function(e,t,n){return t.reduce(((t,r)=>({...t,...Ue(e,r,n)})),{})}(e,t.keys,n)}(e,t,n);return Y(r)}(e,t,n);if(v(e))return function(e,t,n){return Y(function(e,t,n){return function(e,t,n){return globalThis.Object.getOwnPropertyNames(e).reduce(((r,o)=>({...r,[o]:Me(e[o],t,n)})),{})}(e.properties,t,n)}(e,t,n))}(e,t,n);const r=_(t)?pe(t):t;return{...z(e,[bt,"$id","required"]),...F(Ce(e,r),n)}}function Ue(e,t,n){return{[t]:Me(e,[t],n)}}function Ne(e,t,n){return{...n,[Et]:"Record",type:"object",patternProperties:{[e]:F(t)}}}function Be(e,t,n){const r=e.reduce(((e,n)=>({...e,[n]:F(t)})),{});return kt(r,{...n,[It]:"Record"})}function _e(e,t,n={}){return B(e)?function(e,t,n){return Be(pe(K(e)),t,n)}(e.anyOf,t,n):M(e)?function(e,t,n){return te(ee(e.pattern))?Be(pe(e),t,n):Ne(e.pattern,t,n)}(e,t,n):A(e)?function(e,t,n){return Be([e.toString()],t,n)}(e.const,t,n):w(e)||O(e)?function(e,t,n){return Ne(Dt,t,n)}(0,t,n):R(e)?function(e,t,n){return Ne(e.source,t,n)}(e,t,n):C(e)?function(e,t,n){return Ne(d(e.pattern)?At:e.pattern,t,n)}(e,t,n):$(n)}function qe(e){return new Rt(e)}var Le={withStackTrace:!1},Fe=(e,t,n=Le)=>({data:t.isOk()?{type:"Ok",value:t.value}:{type:"Err",value:t.error},message:e,stack:n.withStackTrace?(new Error).stack:void 0}),je=class r{constructor(e){this._promise=e}static fromSafePromise(e){const t=e.then((e=>new We(e)));return new r(t)}static fromPromise(e,t){const n=e.then((e=>new We(e))).catch((e=>new Qe(t(e))));return new r(n)}static fromThrowable(t,n){return(...o)=>new r((()=>e(this,0,void 0,(function*(){try{return new We(yield t(...o))}catch(e){return new Qe(n?n(e):e)}})))())}static combine(e){return Xe(e)}static combineWithAllErrors(e){return Ke(e)}map(t){return new r(this._promise.then((n=>e(this,0,void 0,(function*(){return n.isErr()?new Qe(n.error):new We(yield t(n.value))})))))}mapErr(t){return new r(this._promise.then((n=>e(this,0,void 0,(function*(){return n.isOk()?new We(n.value):new Qe(yield t(n.error))})))))}andThen(e){return new r(this._promise.then((t=>{if(t.isErr())return new Qe(t.error);const n=e(t.value);return n instanceof r?n._promise:n})))}orElse(t){return new r(this._promise.then((n=>e(this,0,void 0,(function*(){return n.isErr()?t(n.error):new We(n.value)})))))}match(e,t){return this._promise.then((n=>n.match(e,t)))}unwrapOr(e){return this._promise.then((t=>t.unwrapOr(e)))}safeUnwrap(){return function(e,n,r){function o(e){u[e]&&(d[e]=function(t){return new Promise((function(n,r){l.push([e,t,n,r])>1||i(e,t)}))})}function i(e,n){try{(r=u[e](n)).value instanceof t?Promise.resolve(r.value.v).then(a,s):c(l[0][2],r)}catch(e){c(l[0][3],e)}var r}function a(e){i("next",e)}function s(e){i("throw",e)}function c(e,t){e(t),l.shift(),l.length&&i(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,u=r.apply(e,n||[]),l=[];return d={},o("next"),o("throw"),o("return"),d[Symbol.asyncIterator]=function(){return this},d}(this,arguments,(function*(){return yield t(yield t(yield*function(e){function n(n,i){r[n]=e[n]?function(r){return(o=!o)?{value:t(e[n](r)),done:"return"===n}:i?i(r):r}:i}var r,o;return r={},n("next"),n("throw",(function(e){throw e})),n("return"),r[Symbol.iterator]=function(){return this},r}(n(yield t(this._promise.then((e=>e.safeUnwrap())))))))}))}then(e,t){return this._promise.then(e,t)}},ze=e=>new je(Promise.resolve(new Qe(e)));je.fromPromise,je.fromSafePromise,je.fromThrowable;var $e,Ye,Ve=e=>{let t=Je([]);for(const n of e){if(n.isErr()){t=Ge(n.error);break}t.map((e=>e.push(n.value)))}return t},Xe=e=>je.fromSafePromise(Promise.all(e)).andThen(Ve),He=e=>{let t=Je([]);for(const n of e)n.isErr()&&t.isErr()?t.error.push(n.error):n.isErr()&&t.isOk()?t=Ge([n.error]):n.isOk()&&t.isOk()&&t.value.push(n.value);return t},Ke=e=>je.fromSafePromise(Promise.all(e)).andThen(He);(Ye=$e||($e={})).fromThrowable=function(e,t){return(...n)=>{try{const t=e(...n);return Je(t)}catch(e){return Ge(t?t(e):e)}}},Ye.combine=function(e){return Ve(e)},Ye.combineWithAllErrors=function(e){return He(e)};var Je=e=>new We(e),Ge=e=>new Qe(e),We=class{constructor(e){this.value=e}isOk(){return!0}isErr(){return!this.isOk()}map(e){return Je(e(this.value))}mapErr(e){return Je(this.value)}andThen(e){return e(this.value)}orElse(e){return Je(this.value)}asyncAndThen(e){return e(this.value)}asyncMap(e){return je.fromSafePromise(e(this.value))}unwrapOr(e){return this.value}match(e,t){return e(this.value)}safeUnwrap(){const e=this.value;return function*(){return e}()}_unsafeUnwrap(e){return this.value}_unsafeUnwrapErr(e){throw Fe("Called `_unsafeUnwrapErr` on an Ok",this,e)}},Qe=class{constructor(e){this.error=e}isOk(){return!1}isErr(){return!this.isOk()}map(e){return Ge(this.error)}mapErr(e){return Ge(e(this.error))}andThen(e){return Ge(this.error)}orElse(e){return e(this.error)}asyncAndThen(e){return ze(this.error)}asyncMap(e){return ze(this.error)}unwrapOr(e){return e}match(e,t){return t(this.error)}safeUnwrap(){const e=this.error;return function*(){throw yield Ge(e),new Error("Do not use this generator out of `safeTry`")}()}_unsafeUnwrap(e){throw Fe("Called `_unsafeUnwrap` on an Err",this,e)}_unsafeUnwrapErr(e){return this.error}};$e.fromThrowable;var Ze,et,tt={ArrayBuffer:globalThis.ArrayBuffer,Blob:globalThis.Blob,DataView:globalThis.DataView,Document:globalThis.Document,FormData:globalThis.FormData,Headers:globalThis.Headers,Node:globalThis.Node,ReadableStream:globalThis.ReadableStream,Request:globalThis.Request,Response:globalThis.Response,TextDecoder:globalThis.TextDecoder,TextEncoder:globalThis.TextEncoder,URL:globalThis.URL,URLSearchParams:globalThis.URLSearchParams,XMLHttpRequest:globalThis.XMLHttpRequest,Date:globalThis.Date,Promise:globalThis.Promise,document:globalThis.document,location:globalThis.location,self:globalThis.self,top:globalThis.top,addEventListener:globalThis.addEventListener?.bind(globalThis),clearInterval:globalThis.clearInterval?.bind(globalThis),clearTimeout:globalThis.clearTimeout?.bind(globalThis),fetch:globalThis.fetch?.bind(globalThis),getComputedStyle:globalThis.getComputedStyle?.bind(globalThis),removeEventListener:globalThis.removeEventListener?.bind(globalThis),setInterval:globalThis.setInterval?.bind(globalThis),setTimeout:globalThis.setTimeout?.bind(globalThis)},nt=250,rt=e=>e,ot=e=>e,it=(e,t,n,r,o,i)=>{const{deserialize:a=ot,onError:s}=r,c=(()=>{try{return a(e)}catch(e){if(!s)return;const t=e instanceof Error?e:new Error("Unknown error in deserializing message.");s(t)}})();if("object"!=typeof(d=c)||null===d||!("bridgeId"in d))return;var d;if(c.namespace!==r.namespace)return;if(!new Set(o).has(c.type))return;const u=n(t);var l;if("object"==typeof(l=u)&&null!==l&&!Array.isArray(l))return(async()=>{try{if("request"===c.type)return await(async(e,t,n,r,o)=>{const{serialize:i=rt,postMessage:a}=n,s=await(async(e,t,n)=>{const r=e[t];if("function"!=typeof r)return Ge(new Error(`Bridge method call (${t}) not found.`));try{const e=await r.apply(null,n);return e instanceof Qe?Ge(e.error):Je(e instanceof We?e.value:e)}catch(e){return e instanceof Error?Ge(e):Ge(new Error(`Bridge method call (${t}) failed with a non-error.`))}})(r,e.method,e.args),c=i({type:"response",bridgeId:e.bridgeId,error:s.isErr()?s.error:void 0,result:s.isOk()?s.value:void 0,messageId:e.messageId,namespace:e.namespace});return o&&a(c,t),c})(c,t,r,u,i);if("response"===c.type)return await(async(e,t)=>{const{messageId:n,error:r,result:o}=e,i=t?.get(n);i&&(tt.clearTimeout(i.timeoutId),r?i.reject(r):i.resolve(o),t?.delete(n))})(c,i)}catch(e){if(!r.onError)return;const t=e instanceof Error?e:new Error("Unknown error in handling message for bridge.");r.onError(t)}})();r.onError?.(new Error("Bridge is supposed to handle a message but the function factory didn't return a record."))},at=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),""),st=(e,t)=>{return n=(n,r)=>je.fromPromise((async(e,t,n,r)=>{const{timeoutMs:o=nt}=n,{message:i}=await(async(e,t,{serialize:n=rt,postMessage:r,namespace:o})=>{if("string"!=typeof e)throw new Error("Property must be a string");const i={type:"request",method:e,args:t,bridgeId:at(),messageId:at(),namespace:o};return{message:i,response:await r(n(i))}})(e,t,n);return new Promise(((e,t)=>{const n=tt.setTimeout((()=>{t(new Error("Timeout")),r.delete(i.messageId)}),o);r.set(i.messageId,{resolve:e,reject:t,timeoutId:n})}))})(n,r,e,t),(e=>e instanceof Error?e:new Error("Unknown error"))),new Proxy({},{get:(e,t)=>(...e)=>n(t,e)});var n},ct=class{storage=new Map;get=e=>this.storage.get(e);set=(e,t)=>{this.storage.set(e,t)};delete=e=>{this.storage.delete(e)}},dt=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map((e=>[e.name,e])),ut=new Map(dt),lt=class e extends Error{name="NonError";constructor(t){super(e._prepareSuperMessage(t))}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}},pt=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],ft=new WeakSet,mt=e=>ut.get(e)??Error,ht=({from:e,seen:t,to:n,forceEnumerable:o,maxDepth:i,depth:a,useToJSON:s,serialize:c})=>{if(n||(n=Array.isArray(e)?[]:!c&&r(e)?new(mt(e.name)):{}),t.push(e),a>=i)return n;if(s&&"function"==typeof e.toJSON&&!ft.has(e))return(e=>{ft.add(e);const t=e.toJSON();return ft.delete(e),t})(e);const d=e=>ht({from:e,seen:[...t],forceEnumerable:o,maxDepth:i,depth:a,useToJSON:s,serialize:c});for(const[r,o]of Object.entries(e))if(o&&o instanceof Uint8Array&&"Buffer"===o.constructor.name)n[r]="[object Buffer]";else if(null===o||"object"!=typeof o||"function"!=typeof o.pipe){if("function"!=typeof o)if(o&&"object"==typeof o)t.includes(e[r])?n[r]="[Circular]":(a++,n[r]=d(e[r]));else try{n[r]=o}catch{}}else n[r]="[object Stream]";for(const{property:t,enumerable:i}of pt)void 0!==e[t]&&null!==e[t]&&Object.defineProperty(n,t,{value:r(e[t])?d(e[t]):e[t],enumerable:!!o||i,configurable:!0,writable:!0});return n},yt=e=>null===e?null:r(e)?function(e,t={}){const{maxDepth:n=Number.POSITIVE_INFINITY,useToJSON:r=!0}=t;return"object"==typeof e&&null!==e?ht({from:e,seen:[],forceEnumerable:!0,maxDepth:n,depth:0,useToJSON:r,serialize:!0}):"function"==typeof e?`[Function: ${e.name||"anonymous"}]`:e}(e):Array.isArray(e)?e.map(yt):"object"==typeof e?Object.fromEntries(Object.entries(e).map((([e,t])=>[e,yt(t)]))):e,gt=e=>null===e?null:r(e)?function(e,t={}){const{maxDepth:n=Number.POSITIVE_INFINITY}=t;if(e instanceof Error)return e;if(function(e){return Boolean(e)&&"object"==typeof e&&"message"in e&&!Array.isArray(e)}(e)){const t=mt(e.name);return ht({from:e,seen:[],to:new t,maxDepth:n,depth:0,serialize:!1})}return new lt(e)}(e):Array.isArray(e)?e.map(gt):"object"==typeof e?Object.fromEntries(Object.entries(e).map((([e,t])=>[e,gt(t)]))):e,St=class{constructor(e,t){this.pendingRequestStorage=e,this.namespace=t}useParentFrame=e=>{const t=tt.top;if(null===t)throw new Error("Parent frame not found.");return st({...e,postMessage:e=>t.postMessage(e,"*"),deserialize:gt,serialize:yt,namespace:this.namespace},this.pendingRequestStorage)}},bt=Symbol.for("TypeBox.Transform"),wt=Symbol.for("TypeBox.Optional"),It=Symbol.for("TypeBox.Hint"),Et=Symbol.for("TypeBox.Kind"),Dt="^(0|[1-9][0-9]*)$",At="^(.*)$",Tt=class extends Error{constructor(e){super(e)}},vt=["Any","Array","AsyncIterator","BigInt","Boolean","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"],xt=class extends Tt{},Ot=class extends Tt{},Pt=class extends Tt{},kt=function(e,t={}){const n=globalThis.Object.getOwnPropertyNames(e),r=n.filter((t=>S(e[t]))),o=n.filter((e=>!r.includes(e))),i=_(t.additionalProperties)?{additionalProperties:F(t.additionalProperties)}:{},a=n.reduce(((t,n)=>({...t,[n]:F(e[n])})),{});return o.length>0?{...t,...i,[Et]:"Object",type:"object",properties:a,required:o}:{...t,...i,[Et]:"Object",type:"object",properties:a}};(et=Ze||(Ze={}))[et.Union=0]="Union",et[et.True=1]="True",et[et.False=2]="False";var Rt=class{schema;constructor(e){this.schema=e}Decode(e){return new Ct(this.schema,e)}},Ct=class{schema;decode;constructor(e,t){this.schema=e,this.decode=t}EncodeTransform(e,t){const n={Encode:n=>t[bt].Encode(e(n)),Decode:e=>this.decode(t[bt].Decode(e))};return{...t,[bt]:n}}EncodeSchema(e,t){const n={Decode:this.decode,Encode:e};return{...t,[bt]:n}}Encode(e){const t=F(this.schema);return U(t)?this.EncodeTransform(e,t):this.EncodeSchema(e,t)}};kt({sessionId:ge(ce()),netloc:ce(),pathname:ce(),simpleDom:ce(),isShopify:ae(),version:ge(ie("1"))}),kt({cartTotal:se()});var Mt,Ut=K([ie("1"),ie("n")]),Nt=((Mt=Nt||{})[Mt.CLICK=0]="CLICK",Mt[Mt.CLICK_TEXT=1]="CLICK_TEXT",Mt[Mt.CAPTURE=2]="CAPTURE",Mt[Mt.INPUT_COUPON=3]="INPUT_COUPON",Mt[Mt.COMPLETE=4]="COMPLETE",Mt[Mt.PAGE_PREPARATION_COMPLETE=5]="PAGE_PREPARATION_COMPLETE",Mt);Oe(Nt);var Bt,_t=((Bt=_t||{})[Bt.XPATH=0]="XPATH",Bt[Bt.SELECTOR=1]="SELECTOR",Bt),qt=Oe(_t),Lt=kt({task:ie(0),nodeId:ce(),id:ce(),value:K([ce(),j(ce())]),cacheType:qt,elementString:ce()}),Ft=kt({task:ie(1),textValue:ce(),id:ce()}),jt=kt({task:ie(2),id:ce()}),zt=kt({task:ie(3),nodeId:ce(),id:ce(),value:K([ce(),j(ce())]),cacheType:qt}),$t=K([Lt,Ft,jt,zt,kt({task:ie(4),id:ce()}),kt({task:ie(5),id:ce()})]),Yt=ke($t,["value","elementString","cacheType"]);kt({sessionId:ge(ce()),netloc:ce(),pathname:ce(),simpleDom:ce(),couponOrder:Ut,isShopify:ae(),runId:ce(),couponCode:ce(),version:ge(ie("1"))}),kt({action:Yt,runId:ce()}),kt({sessionId:ge(ce()),netloc:ce(),pathname:ce(),simpleDom:ce(),couponOrder:Ut,isShopify:ae(),couponCode:ce(),version:ge(ie("1"))}),kt({action:Yt,runId:ce()}),kt({cartTotalSelector:ce(),revealSelector:ce(),inputSelector:ce(),applySelector:ce()}),kt({netloc:ce(),pathname:ce(),simpleDom:ce(),isShopify:ae()}),kt({inputNodeId:ce(),applyNodeId:ce()});var Vt,Xt,Ht=((Vt=Ht||{})[Vt.CLICK=0]="CLICK",Vt[Vt.INPUT=1]="INPUT",Vt[Vt.COMPLETE=2]="COMPLETE",Vt),Kt=kt({type:ie(0),nodeId:ce()}),Jt=((Xt=Jt||{})[Xt.CARD_NUMBER=0]="CARD_NUMBER",Xt[Xt.CARD_CVV=1]="CARD_CVV",Xt[Xt.CARD_NAME_FIRSTNAME_LASTNAME=2]="CARD_NAME_FIRSTNAME_LASTNAME",Xt[Xt.CARD_NAME_FIRSTNAME=3]="CARD_NAME_FIRSTNAME",Xt[Xt.CARD_NAME_LASTNAME=4]="CARD_NAME_LASTNAME",Xt[Xt.CARD_EXPIRY_MMYY=5]="CARD_EXPIRY_MMYY",Xt[Xt.CARD_EXPIRY_MM=6]="CARD_EXPIRY_MM",Xt[Xt.CARD_EXPIRY_YY=7]="CARD_EXPIRY_YY",Xt[Xt.CARD_EXPIRY_MMYYYY=8]="CARD_EXPIRY_MMYYYY",Xt[Xt.CARD_EXPIRY_YYYY=9]="CARD_EXPIRY_YYYY",Xt),Gt=Oe(Jt),Wt=K([Kt,kt({type:ie(1),nodeId:ce(),token:Gt}),kt({type:ie(2)})]);kt({netloc:ce(),pathname:ce(),dom:ce(),isShopify:ae(),runId:ge(ce())}),kt({actions:j(Wt),runId:ce()}),kt({id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),name:ce(),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),idForRetailerActivation:ce(),isInternal:ae(),isUGCCaptureEnabled:ae()});var Qt=kt({hash:ce(),id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),organizationId:ce(),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))});kt({id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),organizationId:ce(),userAgent:K([ge(ce()),ve()]),sdkUserId:ce(),sdkVersion:ce(),caaVersion:se()});var Zt=kt({id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),hostname:ce(),pathname:ce(),actions:j(xe()),currentTaskType:K([ge(ce()),ve()]),taskSequence:j(ce()),hashSequence:j(ce()),couponOrder:K([ge(ce()),ve()]),isSuccessful:ae(),sessionId:K([ge(ce()),ve()])});kt({id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),hostname:ce(),pathname:ce(),regionHash:ce(),regionSelectors:j(ce()),actions:j(xe()),taskType:ce(),isShopify:ae(),disabled:ae(),lastUsedAt:K([ge(qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),ve()]),version:se()});var en=kt({id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),rootDomain:ce(),domain:ce(),hostname:ce(),disabled:ae(),autoCrpDetectionDisabled:ae()}),tn=kt({id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),websiteId:ce(),hostnameMatch:ce(),pathnameMatch:K([ge(ce()),ve()]),queryMatch:K([ge(xe()),ve()]),urlRegexMatch:K([ge(ce()),ve()]),pathnameRegex:K([ge(ce()),ve()]),elementMatchSelectors:j(ce()),promotedRealtimeCouponPageId:K([ge(ce()),ve()]),isAutoApplyEnabled:ae(),disabled:ae(),isGeneratedElementMatchSelector:ae()});kt({id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),websiteId:ce(),hostname:ce(),pathname:ce(),pathnameRegex:K([ge(ce()),ve()]),query:K([ge(xe()),ve()]),couponDetailId:K([ge(ce()),ve()]),isCouponPage:ae(),disabled:ae()});var nn=kt({id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),elementMatchSelectors:j(ce()),isAutoApplyEnabled:ae()});kt({id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),hostname:ce(),pathname:ce(),regionHash:ce(),regionSelectors:j(ce()),values:j(ce()),isShopify:ae(),disabled:ae(),usageCount:se()}),kt({id:ce(),inNetworkId:ce(),affiliateUrl:K([ge(ce()),ve()]),name:ce(),networkId:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),logo:K([ge(ce()),ve()])});var rn=kt({id:ce(),strackrNetworkId:ce(),networkName:ce(),strackrId:ce(),name:ce(),inNetworkLogo:K([ge(ce()),ve()]),website:ce(),active:ae(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),inNetworkAffiliateUrl:ce(),expectedCommissionPercentage:se(),maximumCommissionFeeAbsolutePercentage:se(),commissionFeePercentage:se(),inNetworkId:ce(),featured:ae(),countries:j(ce()),nonPercentageDeal:K([ge(ce()),ve()]),category:K([ge(ce()),ve()]),overrideLogo:K([ge(ce()),ve()]),termsAndExclusions:K([ge(ce()),ve()]),overrideAffiliateUrl:K([ge(ce()),ve()])});kt({id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),retailerId:ce(),organizationId:ce(),overrideActive:ae(),rankingOverride:K([ge(se()),ve()])}),kt({shortId:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),retailerId:ce(),organizationId:ce(),urlUsed:ce(),userAgent:K([ge(ce()),ve()]),passbackUid:ce(),passbackData:K([ge(ce()),ve()]),expectedCashbackPercentageAtActivation:se(),expectedCommissionPercentageAtActivation:se(),maximumCommissionFeeAbsolutePercentageAtActivation:se(),commissionFeePercentageAtActivation:se()});var on=kt({id:ce(),strackrId:ce(),inNetworkId:ce(),strackrNetworkId:ce(),retailerId:K([ge(ce()),ve()]),inNetworkOrderId:K([ge(ce()),ve()]),country:ce(),activatedAt:K([ge(qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),ve()]),clickedAt:K([ge(qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),ve()]),soldAt:K([ge(qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),ve()]),retailerActivationShortId:K([ge(ce()),ve()]),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),organizationId:K([ge(ce()),ve()]),passbackUid:K([ge(ce()),ve()]),passbackData:K([ge(ce()),ve()]),cashbackOfferActivationShortId:K([ge(ce()),ve()]),couponActivationShortId:K([ge(ce()),ve()]),promotionActivationShortId:K([ge(ce()),ve()]),currencyCode:ce(),orderValue:se(),commission:se(),commissionPercentage:se(),cashback:se(),cashbackPercentage:se(),expectedCommissionPercentage:K([ge(se()),ve()]),expectedCashbackPercentage:K([ge(se()),ve()]),maximumCommissionFeeAbsolutePercentage:se(),commissionFeePercentage:se()});kt({id:ce(),strackrId:ce(),inNetworkId:ce(),strackrNetworkId:ce(),retailerId:K([ge(ce()),ve()]),inNetworkOrderId:K([ge(ce()),ve()]),country:ce(),activatedAt:K([ge(qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),ve()]),clickedAt:K([ge(qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),ve()]),soldAt:K([ge(qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),ve()]),retailerActivationShortId:K([ge(ce()),ve()]),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),organizationId:K([ge(ce()),ve()]),passbackUid:K([ge(ce()),ve()]),passbackData:K([ge(ce()),ve()]),transactionId:ce(),currencyCode:ce(),orderValue:se(),commission:se(),commissionPercentage:se(),cashback:se(),cashbackPercentage:se(),expectedCommissionPercentage:K([ge(se()),ve()]),expectedCashbackPercentage:K([ge(se()),ve()]),maximumCommissionFeeAbsolutePercentage:se(),commissionFeePercentage:se()}),kt({id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),code:ce(),organizationId:ce(),hostname:ce(),pathname:ce(),isShopify:ae()}),kt({id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),hostname:ce(),pathname:ce(),classificationConfidence:K([ge(se()),ve()]),hasCouponSupport:K([ge(ae()),ve()]),hasCouponSupportConfidence:K([ge(se()),ve()]),lastVisitedAt:K([ge(qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),ve()]),visitCount:se(),websiteId:ce()}),kt({id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),pageId:ce(),selector:ce(),lastUsedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))});var an=kt({id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),hostname:ce(),requestHostname:ce(),requestPathnameRegex:K([ge(ce()),ve()])});kt({featured:ae(),hostname:ce(),id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),logo:K([ge(ce()),ve()]),name:ce(),overrideLogo:K([ge(ce()),ve()]),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),url:ce()}),kt({affiliateUrl:ce(),id:ce(),inNetworkId:ce(),inNetworkLogo:K([ge(ce()),ve()]),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),name:ce(),networkId:ce(),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))});var sn=kt({active:ae(),category:K([ge(ce()),ve()]),commissionFeePercentage:se(),countries:j(ce()),description:K([ge(ce()),ve()]),expectedCommissionPercentage:se(),featured:ae(),id:ce(),inNetworkAffiliateUrl:ce(),inNetworkId:ce(),inProviderId:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),maximumCommissionFeeAbsolutePercentage:se(),maximumFixedCommissionFee:K([ge(se()),ve()]),networkId:ce(),networkName:ce(),overrideAffiliateUrl:K([ge(ce()),ve()]),retailerId:ce(),termsAndExclusions:K([ge(ce()),ve()]),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))});kt({cashbackOfferId:ce(),id:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),organizationId:ce(),overrideActive:ae(),rankingOverride:K([ge(se()),ve()]),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))}),kt({cashbackOfferId:ce(),commissionFeePercentageAtActivation:se(),expectedCashbackPercentageAtActivation:se(),expectedCommissionPercentageAtActivation:se(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),maximumCommissionFeeAbsolutePercentageAtActivation:se(),organizationId:ce(),passbackData:K([ge(ce()),ve()]),passbackUid:ce(),shortId:ce(),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),urlUsed:ce(),userAgent:K([ge(ce()),ve()])});var cn=kt({active:ae(),code:ce(),description:ce(),descriptionOverride:K([ge(ce()),ve()]),endDate:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),id:ce(),inNetworkAffiliateUrl:ce(),inNetworkId:ce(),inProviderId:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),networkId:ce(),networkName:ce(),retailerId:ce(),startDate:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))});kt({couponId:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),organizationId:ce(),passbackData:K([ge(ce()),ve()]),passbackUid:ce(),shortId:ce(),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),urlUsed:ce(),userAgent:K([ge(ce()),ve()])}),kt({active:ae(),deepLink:ce(),description:ce(),descriptionOverride:K([ge(ce()),ve()]),endDate:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),id:ce(),inNetworkAffiliateUrl:ce(),inNetworkId:ce(),inProviderId:ce(),insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),networkId:ce(),networkName:ce(),retailerId:ce(),startDate:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))}),kt({insertedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),organizationId:ce(),passbackData:K([ge(ce()),ve()]),passbackUid:ce(),promotionId:ce(),shortId:ce(),updatedAt:qe(ce()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),urlUsed:ce(),userAgent:K([ge(ce()),ve()])});var dn=(e,t)=>{let n=Object.entries(t).filter((e=>void 0!==e[1]));for(let[t,r]of n){let n=e.properties[t];n&&(e.properties[t]={...n,...r})}},un=Te([Me(sn,["id","featured","countries","maximumFixedCommissionFee","description","category","termsAndExclusions"]),kt({cashbackPercentage:se(),logo:ge(ce()),url:ce(),name:ce()})]);dn(un,{cashbackPercentage:{description:"The percentage of cashback the retailer offers. In decimal form.",examples:[.14]},category:{description:"The category of the cashback offer.",examples:["Electronics"]},countries:{description:"The countries the retailer's cashback offer is available. Format: `ISO 3166-1 alpha-2 code`",examples:[["CA","US"],["CA"]]},featured:{description:"Indicates if the retailer's cashback offer is featured by Sleek for an outstanding deal.",examples:[!0,!1]},id:{description:"The ID of the retailer's cashback offer. Format: `UUID RFC 4122`",examples:["e8400e53-078f-4641-97e2-5c397401c0f0"]},logo:{description:"URL of the retailer's logo.",examples:["https://example.com/logo.png"]},name:{description:"The name of the cashback offer's retailer.",examples:["BestBuy"]},maximumFixedCommissionFee:{description:"The fixed cashback the retailer's offer. If null, the retailer offers a percentage.",examples:[75,null]},description:{description:"The description of the fixed cashback offer.",examples:["$75.00 cashback on all orders.","Get up to $75.00 cashback on all orders over $500.",null]},termsAndExclusions:{description:"The terms and exclusions of the cashback offer.",examples:["Excludes all Apple products","Minimum purchase of $50.00 required."]},url:{description:"The url of the retailer's website.",examples:["https://www.bestbuy.com"]}});var ln=e=>kt({data:j(e),cursor:ge(ce({description:"The ID of the next item in the list. Defined if there are more items to fetch. Pass this as the `cursor` query parameter to fetch the next page. Format: `UUID RFC 4122`",title:"Cursor",examples:["21171097-94a2-4ad9-bfe7-6bb84704dd83","dd329acc-6ee6-46af-8c8e-a4ceb2e3cf60","b2ad0802-e632-4edd-b074-8112e3d065c5"]}))});ln(un);var pn=Me(an,["requestHostname","requestPathnameRegex"]),fn=(e=>(e[e.XmlHttpRequest=0]="XmlHttpRequest",e[e.Fetch=1]="Fetch",e))(fn||{}),mn=kt({stringifiedBody:ge(ce()),didBodyExceedMaxSize:ae(),headers:ge(j(ye([ce(),ce()]))),method:ce(),requestType:Oe(fn),url:ce()}),hn=kt({stringifiedBody:ge(ce()),didBodyExceedMaxSize:ae(),statusCode:ge(se()),headers:ge(j(ye([ce(),ce()])))}),yn=kt({request:mn,response:hn}),gn=kt({cartTotalBefore:se(),cartTotalAfter:se(),codeValue:ce(),requestResponsePairs:j(yn)});kt({pageUrl:ce(),couponTrappedNetworkRequests:j(gn)}),kt({status:ie("ok")}),j(pn);var Sn=Me(nn,["elementMatchSelectors","isAutoApplyEnabled"]);kt({url:ce(),cleanDom:ce(),title:ce()}),kt({data:K([ve(),ge(Sn)])}),kt({id:ce()}),kt({sdkUserId:ce(),sdkVersion:ce(),url:ge(ce()),isShopify:ge(ae())});var bn=K([ce(),se(),ae(),ve()]),wn=_e(ce(),bn);j(kt({eventId:ge(ce()),event:ce(),distinctId:ce(),timestamp:ce(),properties:wn,additionalProperties:ge(ce()),dataSink:ge(ce())})),kt({status:ie("ok")});var In=Te([Me(rn,["id","name","website","featured","countries","nonPercentageDeal","category","termsAndExclusions"]),kt({cashbackPercentage:se(),logo:ge(ce())})]);dn(In,{cashbackPercentage:{description:"The percentage of cashback the retailer offers. In decimal form.",examples:[.14]},category:{description:"The category of the retailer.",examples:["Electronics"]},countries:{description:"The countries the retailer operates in. Format: `ISO 3166-1 alpha-2 code`",examples:[["CA","US"],["CA"]]},featured:{description:"Indicates if the retailer is featured by Sleek for an outstanding deal.",examples:[!0,!1]},id:{description:"The ID of the retailer. Format: `UUID RFC 4122`",examples:["e8400e53-078f-4641-97e2-5c397401c0f0"]},logo:{description:"URL of the retailers logo.",examples:["https://example.com/logo.png"]},name:{description:"The name of the retailer.",examples:["BestBuy"]},nonPercentageDeal:{description:"Indicates if the retailer offers a non-percentage deal.",examples:["Free shipping","Buy one get one free"]},termsAndExclusions:{description:"The terms and exclusions of the deal with the retailer.",examples:["Excludes all Apple products","Minimum purchase of $50.00 required."]},website:{description:"The website of the retailer.",examples:["https://www.bestbuy.com"]}}),ln(In),_e(ce(),K([ce(),ve()]));var En=Me(tn,["hostnameMatch","pathnameMatch","urlRegexMatch","pathnameRegex","elementMatchSelectors","isAutoApplyEnabled","queryMatch"]);kt({data:K([ve(),ge(j(En))])});var Dn=Te([Me(on,["id","country","clickedAt","soldAt","updatedAt","currencyCode","orderValue","cashback"]),kt({retailerId:ce(),activatedAt:ce(),passbackUid:ce(),passbackData:ge(ce()),status:K([ie("PENDING"),ie("DECLINED"),ie("CONFIRMED")])})]);dn(Dn,{id:{description:"The unique identifier for the transaction. Format: `UUID RFC 4122`",examples:["4812f869-dd9a-48e2-8dae-1658cb4569bf"]},country:{description:"The country where the transaction was made. Format: `ISO 3166-1 alpha-2 code`",examples:["US"]},clickedAt:{description:"The date and time the user clicked on the link. Format: `ISO 8601`",examples:["2021-09-01T12:00:00"]},soldAt:{description:"The date and time the user made the purchase. Format: `ISO 8601`",examples:["2021-09-01T12:00:00"]},updatedAt:{description:"The date and time the transaction was last updated. Format: `ISO 8601`",examples:["2021-09-01T12:00:00"]},currencyCode:{description:"The currency code of the transaction. Format: `ISO 4217`",examples:["USD"]},orderValue:{description:"The total value of the order.",examples:[112.4]},cashback:{description:"The cashback amount.",examples:[23.14]},retailerId:{description:"The unique identifier for the retailer. Format: `UUID RFC 4122`",examples:["acaee670-0430-47b6-b661-ea3bcc993fb3"]},activatedAt:{description:"The date and time the deal was activated. Format: `ISO 8601`",examples:["2021-09-01T12:00:00"]},passbackUid:{description:"The unique identifier that was given during retailer activation.",examples:["your_uid_here"]},passbackData:{description:"The data field that was given during retailer activation.",examples:["your_data_here"]},status:{description:"The status of the transaction.",examples:["CONFIRMED"]}}),ln(Dn),j(kt({code:ce(),hostname:ce(),pathname:ce(),isShopify:ae()})),kt({status:ie("ok")}),ke(Qt,["id","insertedAt","updatedAt"]);var An=K([ie("REVEAL_INPUT"),ie("REVEAL_APPLY"),ie("REMOVE_COUPON"),ie("INPUT_COUPON"),ie("APPLY_COUPON"),ie("CLOSE_DIALOG")]),Tn=ke($t,["nodeId"]),vn=Te([ke(Zt,["actions","currentTaskType"]),kt({actions:j(Tn),currentTaskType:K([An,ve()])})]);ke(vn,["id","insertedAt","updatedAt"]),j(kt({retailerName:ce(),retailerUrl:ce(),retailerLogo:K([ce(),ve()]),coupons:se()})),kt({task:ge(An),couponAction:ge($t)}),Me(cn,["code","id","title","startDate","endDate","url","retailerId"]),Te([Me(en,["rootDomain","autoCrpDetectionDisabled","domain","hostname"])]);var xn=e=>e instanceof tt.Headers?Array.from(e.entries()):Array.isArray(e)?[...e]:Object.entries(e).map((([e,t])=>[e,String(t)])),On=e=>e?.method??"GET",Pn=e=>new tt.URL(e instanceof tt.URL?e.href:kn(e)?e.url:e,tt.location.href).href,kn=e=>e instanceof tt.Request,Rn=Symbol.for("s_xhr"),Cn=(e,t)=>new Proxy(e,{construct:(e,n)=>{const r=Reflect.construct(e,n);Object.defineProperty(r,Rn,{value:Rn,writable:!1,enumerable:!1,configurable:!1});const o=at();let i,a;const s=[];let c;const d=()=>{const e=[];for(const t of r.getAllResponseHeaders().split("\n")){const[n,r]=t.split(":");n&&r&&e.push([n.trim(),r.trim()])}const n=r.response;let i;var a;("string"==typeof(a=n)||a instanceof tt.ArrayBuffer||a instanceof tt.Blob||a instanceof tt.Document||a instanceof tt.ReadableStream||"object"==typeof a||null===a)&&(i=n),((e,n)=>{try{const r={body:n.body,headers:n.headers,statusCode:n.statusCode};t.onResponse(e,r)}catch{}})(o,{headers:e,statusCode:r.status,body:i}),(e=>{try{t.onComplete(e)}catch{}})(o)};return r.setRequestHeader=new Proxy(r.setRequestHeader,{apply:(e,t,n)=>{const r=n[0],o=n[1];return"string"==typeof r&&"string"==typeof o&&s.push([r,o]),Reflect.apply(e,t,n)}}),r.open=new Proxy(r.open,{apply:(e,t,n)=>{const r=n[0];"string"==typeof r&&(c=r);const o=n[1];return o instanceof tt.URL?i=new tt.URL(o.href,tt.location.href).href:"string"==typeof o&&(i=new tt.URL(o,tt.location.href).href),Reflect.apply(e,t,n)}}),r.send=new Proxy(r.send,{apply:(e,n,u)=>{const l=u[0];var p;("string"==typeof(p=l)||p instanceof tt.ArrayBuffer||p instanceof tt.Blob||p instanceof tt.Document||p instanceof tt.DataView||p instanceof tt.FormData||p instanceof tt.URLSearchParams||"object"==typeof p||null===p)&&(a=l);const f=Reflect.apply(e,n,u);return i&&c&&((e,n)=>{try{const r={body:n.body,headers:n.headers,method:n.method,requestId:e,requestType:fn.XmlHttpRequest,url:n.url};t.onRequestStart(r)}catch{}})(o,{url:i,method:c,body:a,headers:s}),4===r.readyState&&d(),f}}),r.addEventListener("loadend",(()=>d())),r}}),Mn=e=>(new tt.TextEncoder).encode(e).length,Un=async(e,t=256e3)=>{if("string"==typeof e)return Mn(e)>t?{stringifiedBody:void 0,didBodyExceedMaxSize:!0}:{stringifiedBody:e,didBodyExceedMaxSize:!1};if(e instanceof tt.Document)return{stringifiedBody:"Document",didBodyExceedMaxSize:!1};if(e instanceof tt.Blob)return e.size>t?{stringifiedBody:void 0,didBodyExceedMaxSize:!0}:{stringifiedBody:await e.text(),didBodyExceedMaxSize:!1};if(e instanceof tt.ArrayBuffer)return e.byteLength>t?{stringifiedBody:void 0,didBodyExceedMaxSize:!0}:{stringifiedBody:(new tt.TextDecoder).decode(e),didBodyExceedMaxSize:!1};if(e instanceof tt.FormData){let n=0;const r={};return e.forEach(((e,t)=>{"string"==typeof e?n+=Mn(e):e instanceof tt.Blob&&(n+=e.size),r[t]=e})),n>t?{stringifiedBody:void 0,didBodyExceedMaxSize:!0}:{stringifiedBody:JSON.stringify(r),didBodyExceedMaxSize:!1}}if(e instanceof tt.URLSearchParams){const n=e.toString();return Mn(n)>t?{stringifiedBody:void 0,didBodyExceedMaxSize:!0}:{stringifiedBody:n,didBodyExceedMaxSize:!1}}if(e instanceof tt.ReadableStream){if(e.locked)return{stringifiedBody:void 0,didBodyExceedMaxSize:!1};const n=e.getReader();let r="",o=0;const i=new tt.TextDecoder;let a=!1;for(;!a;){const{value:e,done:s}=await n.read();if(a=s,e){if(o+=e.byteLength,o>t)return n.releaseLock(),{stringifiedBody:void 0,didBodyExceedMaxSize:!0};r+=i.decode(e,{stream:!0})}}return n.releaseLock(),{stringifiedBody:r,didBodyExceedMaxSize:!1}}const n=(e=>{try{return JSON.stringify(e)}catch{return}})(e);return void 0===n?{stringifiedBody:void 0,didBodyExceedMaxSize:!1}:Mn(n)>t?{stringifiedBody:void 0,didBodyExceedMaxSize:!0}:{stringifiedBody:n,didBodyExceedMaxSize:!1}},Nn=Symbol.for("SLEEK_TPM"),Bn=Object.getOwnPropertySymbols(window);new Set(Bn).has(Nn)||(new class{trackedTrappedRequestPayloads=new Map;networkTrapEnabled=!1;tpmPendingRequestStorage=new ct;tpmFrameControllerBridge=new St(this.tpmPendingRequestStorage,"tpm-2-fc");constructor(){var e,t,n,r;e=e=>{tt.addEventListener("message",(t=>{e(t.data,t)}))},t=()=>this,n={postMessage:(e,t)=>{t.source?.postMessage(e,{targetOrigin:t.origin})},deserialize:gt,serialize:yt,namespace:"fc-2-tpm"},r=this.tpmPendingRequestStorage,e(((e,o)=>it(e,o,t,n,["request"],r))),this.overrideFetch(),this.overrideXhr(),tt.setInterval((async()=>{(new tt.XMLHttpRequest)[Rn]!==Rn&&this.overrideXhr()}),1e3)}startTrappingNetwork=()=>{this.networkTrapEnabled=!0};stopTrappingNetwork=()=>{this.networkTrapEnabled=!1};isTrappingNetwork=()=>this.networkTrapEnabled;checkConnection=()=>!0;waitForRequestsComplete=async(e=[])=>{await new Promise((t=>{let n;const r=tt.setInterval((()=>{Array.from(this.trackedTrappedRequestPayloads.values()).some((t=>{return n=t.url,!e.some((e=>n.includes(e.requestHostname)));var n}))?(tt.clearTimeout(n),n=void 0):n||(n=tt.setTimeout((()=>{tt.clearInterval(r),t()}),500))}),100);tt.setTimeout((()=>{tt.clearInterval(r),tt.clearTimeout(n),t()}),1e4)}))};overrideFetch=()=>{var e,t;tt.fetch=(e=tt.fetch,t={onRequestStart:this.handleRequest,onResponse:this.handleResponse,onComplete:this.handleRequestComplete},new Proxy(e,{apply:async(e,n,r)=>{const o=at(),i=r[0],a=r[1];(e=>e instanceof tt.Request||e instanceof tt.URL||"string"==typeof e)(i)&&(void 0===a||(e=>"object"==typeof e&&null!==e)(a))&&((e,n,r)=>{try{const o={headers:kn(n)?xn(n.headers):xn(r?.headers??{}),method:kn(n)?n.method:On(r),requestId:e,requestType:fn.Fetch,url:Pn(n),body:kn(n)?n?.body:r?.body};t.onRequestStart(o)}catch{}})(o,i,a);try{const i=await Reflect.apply(e,n,r);return i instanceof tt.Response&&((e,n)=>{try{const r={headers:xn(n.headers),statusCode:n.status,body:n.body};t.onResponse(e,r)}catch{}})(o,i.clone()),i}finally{(e=>{try{t.onComplete(e)}catch{}})(o)}}}))};overrideXhr=()=>{tt.XMLHttpRequest=Cn(tt.XMLHttpRequest,{onRequestStart:this.handleRequest,onResponse:this.handleResponse,onComplete:this.handleRequestComplete})};handleRequest=async e=>{this.networkTrapEnabled&&this.trackedTrappedRequestPayloads.set(e.requestId,e)};handleResponse=(e,t)=>{if(!this.networkTrapEnabled)return;const n=this.trackedTrappedRequestPayloads.get(e);n&&this.processRequestResponsePayload(n,t)};handleRequestComplete=e=>{this.trackedTrappedRequestPayloads.delete(e)};processRequestResponsePayload=async(e,t)=>{const n=await Un(e.body),r={stringifiedBody:n.stringifiedBody,didBodyExceedMaxSize:n.didBodyExceedMaxSize,headers:e.headers,method:e.method,requestType:e.requestType,url:e.url},o=await Un(t.body),i={stringifiedBody:o.stringifiedBody,didBodyExceedMaxSize:o.didBodyExceedMaxSize,statusCode:t.statusCode,headers:t.headers};this.tpmFrameControllerBridge.useParentFrame().handleTrappedRequestResponsePair({request:r,response:i})}},Object.defineProperty(window,Nn,{value:!0}))}();