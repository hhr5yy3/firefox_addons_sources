import{r as i}from"./cplx-M4JPizzD.js";import{$ as m}from"./cplx-BbAh7E-i.js";import{u as d,g as s}from"./cplx-CWPpH3dB.js";import{D as b}from"./cplx-Cdcyb6EG.js";import{E as p}from"./cplx-CVsLL7Ku.js";import{b as u}from"./cplx-BqwXc_LR.js";import"./cplx-BpeHHEix.js";import"./cplx-DEt7CUyc.js";import"./cplx-CejnDNPm.js";import"./cplx-AFeO3sEC.js";import"./cplx-2ekRUlSR.js";import"./cplx-CIDXzIHh.js";import"./cplx-CzQHx1MX.js";import"./cplx-CvSOQQlQ.js";import"./cplx-Bzmv935M.js";import"./cplx-Bey00KRS.js";import"./cplx-DC-QQLj-.js";import"./cplx-B814hFp-.js";import"./cplx-wwbq-DDb.js";import"./cplx-CZMWhpfy.js";import"./cplx-SsoyhRxE.js";import"./cplx-DewpVJ-0.js";import"./cplx-B42KOvrD.js";import"./cplx-km2FGkQ4.js";import"./cplx-Mn-h5XDX.js";import"./cplx-Cqfmi6PF.js";import"./cplx-DSnlyBAv.js";import"./cplx-CXGk_GMP.js";import"./cplx-CCS6eJc0.js";import"./cplx-B19A3gYQ.js";import"./cplx-CCGYIZQf.js";import"./cplx-DD6dUv5H.js";import"./cplx-Dy60Fcq0.js";import"./cplx-CgmVhoKz.js";import"./cplx-hUtawQMb.js";import"./cplx-BsCYqTWz.js";import"./cplx-D37zsf-y.js";const x="[data-cplx-component=message-block][data-index] [data-cplx-component=message-block-query]+div>div:last-child .mt-sm.flex{justify-content:flex-end}[data-cplx-component=message-block][data-index] [data-cplx-component=message-block-query]+div>div:last-child .mt-sm.flex .-ml-sm.flex button div svg+div{display:none}[data-cplx-component=message-block][data-index] [data-cplx-component=message-block-query]+div>div:last-child .mt-sm.flex button:has([data-icon=share]),[data-cplx-component=message-block][data-index] [data-cplx-component=message-block-query]+div>div:last-child .mt-sm.flex button:has([data-icon=thumbs-down]),[data-cplx-component=message-block][data-index] [data-cplx-component=message-block-query]+div>div:last-child .mt-sm.flex button:has([data-icon=thumbs-up]){display:none}",g=".duration-250.fill-mode-both>.absolute.left-0.right-0.top-0:has(.group\\/item.md\\:h-full):has(svg[data-icon=copilot]) .mb-xs.-mx-xs.px-xs.border-b{display:none}.duration-250.fill-mode-both>.absolute.left-0.right-0.top-0:has(.group\\/item.md\\:h-full):has(svg[data-icon=copilot]) .group\\/item.md\\:h-full .whitespace-pre-wrap{display:none}.duration-250.fill-mode-both>.absolute.left-0.right-0.top-0:has(.group\\/item.md\\:h-full):has(svg[data-icon=copilot]) .group\\/item.md\\:h-full .px-xs.py-two.inline-flex{display:none}",h="[data-cplx-component=message-block][data-index] [data-cplx-component=message-block-query]+div>div.border-borderMain\\/50{isolation:isolate;display:flex;flex-direction:column}[data-cplx-component=message-block][data-index] [data-cplx-component=message-block-query]+div>div.border-borderMain\\/50 [data-cplx-component=message-block-bottom-bar]{position:sticky;top:var(--navbar-height);order:-1;z-index:1;margin-bottom:2rem;margin-top:0;border-bottom-width:1px;border-style:dashed;border-color:oklch(var(--border) / .5);--tw-bg-opacity: 1;background-color:oklch(var(--background) / var(--tw-bg-opacity, 1));padding:.5rem}[data-cplx-component=message-block][data-index] [data-cplx-component=message-block-query]+div>div.border-borderMain\\/50 [data-cplx-component=message-block-bottom-bar] button{border-radius:calc(var(--radius) - 2px)}[data-cplx-component=message-block][data-index] [data-cplx-component=message-block-query]+div>div.border-borderMain\\/50 [data-cplx-component=message-block-bottom-bar].stuck{border-style:solid;box-shadow:0 16px 16px -16px #0000004d}";function f(){const o=d(e=>e.threadComponents.messageBlocks);return i.useMemo(()=>o?o.map(e=>{const t=e.$wrapper.find(b.THREAD.MESSAGE.BOTTOM_BAR);return t.length?t[0]:null}):[],[o])}function v(){var l;const o=(l=p.getCachedSync())==null?void 0:l.plugins["thread:betterMessageToolbars"].sticky,e=i.useRef(null),t=d(a=>a.threadComponents.navbarHeight),n=f();i.useEffect(()=>{if(!o||t==null)return;const a=new IntersectionObserver(r=>{r.forEach(c=>{m(c.target).toggleClass("stuck",!c.isIntersecting)})},{threshold:1,rootMargin:`-${t+10}px 0px 0px 0px`});return e.current=a,n.filter(r=>r!==null).forEach(r=>a.observe(r)),()=>a.disconnect()},[o,n,t])}function ro(){const o=p.getCachedSync(),{isMobile:e}=u();return v(),s({id:"cplx-better-message-toolbars-sticky",css:h,inject:o==null?void 0:o.plugins["thread:betterMessageToolbars"].sticky}),s({id:"cplx-better-message-toolbars-simplify-rewrite-dropdown",css:g,inject:(o==null?void 0:o.plugins["thread:betterMessageToolbars"].simplifyRewriteDropdown)&&!e}),s({id:"cplx-better-message-toolbars-hide-unnecessary-buttons",css:x,inject:o==null?void 0:o.plugins["thread:betterMessageToolbars"].hideUnnecessaryButtons}),null}export{ro as default};
