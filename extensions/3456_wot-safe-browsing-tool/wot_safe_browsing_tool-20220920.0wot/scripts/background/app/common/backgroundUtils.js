var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e};const getCurrentTab=()=>new Promise(e=>{try{webextApi.tabs.query({active:!0,currentWindow:!0},r=>{if(!r)return e({});const t=r[0];e(t||{})})}catch(r){e({})}}),addCategoryDescription=e=>{try{const r=IDS_TO_WOT_TAGS[e.id];return r?_extends({},e,{description:r}):null}catch(e){return null}},migrations=[e=>{if(e.reminders){e.reminders.GMAIL_PROTECTION&&(e.reminders[SCHEDULER_TYPES.EMAIL_PROTECTION]=e.reminders.GMAIL_PROTECTION);const r=3;e.reminders[SCHEDULER_TYPES.EMAIL_PROTECTION]<0&&(e.emailProtection={timesShown:r})}}],shouldOverrideCompletely=e=>{if(null===e)return!0;const r=typeof e;return!!["number","boolean","string","undefined"].includes(r)||"object"===r&&!Object.keys(e).length},mergeState=(e,r)=>{if(!e)return r;migrations.forEach(r=>{r(e)});const t=Object.keys(r);for(const n of t){const t=e[n];if(!(null!=t))continue;const o=r[n];shouldOverrideCompletely(o)?r[n]=t:Array.isArray(o)&&Array.isArray(t)?r[n]=t:"object"==typeof o&&"object"==typeof t&&(r[n]=mergeState(e[n],r[n]))}return r};