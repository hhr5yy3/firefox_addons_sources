(()=>{"use strict";var e,t={216:(e,t,o)=>{var n=o(757);let i;function a(e){let t=parseInt(n.Z.getValue("zoom_login_req_option_tabid"));if(!isNaN(t))if(1===e){n.Z.removeValue("zoom_login_req_option_tabid");let o=parseInt(n.Z.getValue("zoom_popup_tabpage_tabid"));n.Z.removeValue("zoom_popup_tabpage_tabid"),browser.tabs.remove(o,(function(){browser.runtime.lastError}));let i=n.Z.getValue("zoom_login_req_need_reload");browser.tabs.update(t,{active:!0},(function(o){if(!browser.runtime.lastError)if(i)browser.tabs.reload(t);else{let o={type:"authenticationSigninResult",state:e};browser.tabs.sendMessage(t,o)}})),n.Z.removeValue("zoom_login_req_need_reload")}else{let e=parseInt(n.Z.getValue("zoom_popup_tabpage_tabid"));browser.tabs.update(e,{active:!0},(function(e){browser.runtime.lastError||alert("Login failed. Please try again.")}))}}function s(e,t,o){i&&i.postMessage({error:!0,errorMsg:e,syncState:t,noReviveSchedule:!!o})}browser.runtime.onMessage.addListener((function(e,t,o){var i,r,l,u,p=n.Z.getZoomData(),c=!1,f=!1;if(p&&(p.assistants&&(i=p.assistants),p.forcelogin&&(r=p.forcelogin),p.trackfields&&(l=p.trackfields),p.audiopac&&(u=p.audiopac),p.option_freeuser&&(c=!!p.option_freeuser&&n.Z.hasZoomRqToken()),p.scheduleDefaultLockOption&&(f="true"===p.scheduleDefaultLockOption.usePMISchedule_locked)),"getZoomToken"==e.type){let e=n.Z.getZoomZakRequestToken();if(e){let{inputManualPwd:t,voidable:a}=n.Z.checkNeedPasswordForPopup(),s=!!n.Z.getValue("zoom_config_fixed_popup");if(!s){let{pwEnable:e,wrEnable:t,authEnable:o,updateAuthOptionItem:i}=n.Z.getSecurityResult(),a=n.Z.getSecurity(),r=!1;if(n.Z.getWrOp()){let t=n.Z.getWaitingRoom2Result(void 0,e,o);try{t=JSON.parse(t),t.enable&&"manu"===t.type&&(r=!0)}catch(e){}}else r=t;!a.security3c1||e||r||o||(s=!0)}o({baseurl:n.Z.getUserBaseUrl(),token:e,fte:n.Z.getValue("zoom_config_fte"),showSetting:s,inputManualPwd:t,pwdVoidable:a,showDomainInput:r&&r.domain_login,hasAssistants:i&&i.length>0,requireTracking:l&&l.length>0,hasPac:!(!u||!u.option_pac_enable),schedulePmiLock:f,trackfields:l,zoom_config_pmi_saved_pwd:n.Z.getPmiSavedPwd(),zoom_config_pmi:Boolean(n.Z.getValue("zoom_config_pmi")),meetingPwdSettingsMap:n.Z.getMeetingPwdSettingsMap(),iSFreeAccount:p&&p.iSFreeAccount,embedPasscode:p&&p.embedPasscode})}else n.Z.popupLogin()}else if("supportPAC"==e.type)o({hasPac:!(!u||!u.option_pac_enable)});else if("validateAltHost"==e.type){if(n.Z.hasZoomRqToken())return n.Z.validAlternateHost(e.althosts,(function(e){o(e)}),(function(e){201!==e.errorCode&&212!==e.errorCode||(e.errorMessage="Your Zoom FireFox Extension session has expired. Please login again."),o(e)})),!0;n.Z.popupLogin()}else if("checkUserType"==e.type)o({freeUser:c});else if("checkShowFree40MinsTip"==e.type)o({showFree40MinsTip:p&&p.showFree40MinsTip,isPaidAccount:p&&p.isPaidAccount});else if("isNoMeetingLicenseUser"==e.type)o({noLicenseUser:p&&p.no_meeting_license_user});else if("queryZmId"==e.type)n.Z.getMeetingMp(e.calendarId,(function(e){o(e)}),(function(e){o(e)}));else if("getMeetingTrashUrl"==e.type){n.Z.checkSyncFoVersionOrTime();let e=n.Z.getZoomData();if(e){let t=e.meetingTrashUrl,i="",a=n.Z.getUserBaseUrl();t&&("string"===n.Z.type(t)&&"/"===t[0]&&(t=t.slice(1)),i=a+t),o({meetingTrashUrl:i,zoomBaseUrl:a})}else o("")}else if("getReadyToSchedule"==e.type)o({readyToSchedule:n.Z.getReadyToSchedule()});else if("passLoginSession"==e.type)n.Z._ssologin(e.info.url,"","",(function(){browser.tabs.query({},(function(e){e.length>1?browser.tabs.remove(parseInt(n.Z.getValue("zoom_oauth_tabid")),(function(){browser.runtime.lastError})):browser.tabs.update(parseInt(n.Z.getValue("zoom_oauth_tabid")),{url:"about:blank"},(function(){browser.runtime.lastError}))})),n.Z.saveValue("zoom_auth_type",2),n.Z.saveZoomSSOValidDate(new Date),browser.runtime.sendMessage({type:"passLoginSessionResult"},(function(e){})),a(1)}),(function(e){browser.tabs.query({},(function(e){e.length>1?browser.tabs.remove(parseInt(n.Z.getValue("zoom_oauth_tabid")),(function(){browser.runtime.lastError})):browser.tabs.update(parseInt(n.Z.getValue("zoom_oauth_tabid")),{url:"about:blank"},(function(){browser.runtime.lastError}))})),a(2)}));else if("quickschedule"==e.type){if(n.Z.hasZoomRqToken()){let t=!!n.Z.getValue("zoom_config_pmi"),{pwEnable:i,wrEnable:a,authEnable:r,updateAuthOptionItem:l}=n.Z.getSecurityResult(),u=n.Z.getSecurity(),p=!1;if(n.Z.getWrOp()){let e=n.Z.getWaitingRoom2Result(void 0,i,r);try{e=JSON.parse(e),e.enable&&"manu"===e.type&&(p=!0)}catch(e){}}else p=a;if(u.security3c1&&!i&&!p&&!r)return void o({resetpwd:!0});if(i&&t){let t=n.Z.getPmiSavedPwd();if(!t&&!p&&u.security3c1)return void o({resetpwd:!0});e.info.securityRes={pwd:t}}return n.Z._scheduleMeeting(!0,e.info,(function(e){o(e)}),(function(e){if(201==e.errorCode||212==e.errorCode)s("login###again");else{s(e.errorMessage||"Schedule meeting failed. Please try again.",e.syncState,e.noReviveSchedule)}o(e||{})})),!0}n.Z.popupLogin(),o({})}else if("isSupportWb"==e.type)n.Z.hasZoomRqToken()?o({support:p?.whiteboard?.support,hasLogin:!0,baseUrl:n.Z.getUserBaseUrl(),allowPreloadWb:n.Z.getAllowPreloadWb()}):o({});else if("getWbToken"==e.type){if(n.Z.hasZoomRqToken())return n.Z.getWbToken((function(e){o({token:e})}),(function(){o({token:""})})),!0;o({token:""})}else if("getWbDetail"==e.type){if(n.Z.hasZoomRqToken())return n.Z.getWbDetail(e.data.docId,e.data.token,!1,(function(e){o(e)}),(function(){o({})})),!0;o({})}else if("updateWb"==e.type){if(n.Z.hasZoomRqToken())return n.Z.editWb(e.info,(function(){o({})}),(function(){o({})})),!0}else if("deleteWb"==e.type){if(n.Z.hasZoomRqToken())return n.Z.deleteWb(e.info,(function(){o({type:"deleteWbSuccess"})}),(function(){o({type:"deleteWbFail"})})),!0;o({type:"deleteWbFail"})}else if("getUserEmail"==e.type)n.Z.hasZoomRqToken()?o({email:p?.email||""}):o({email:""});else if("callPopupLogin"==e.type)n.Z.popupLogin();else if("getWorkspaceData"==e.type)n.Z.hasZoomRqToken()?o({hasLogin:!0,zak:n.Z.getZoomZakRequestToken(),haveShownWsTips:n.Z.getHaveShownWsTips(),...n.Z.getWorkspaceData()}):o({});else if("getWorkspaceToken"==e.type){if(n.Z.hasZoomRqToken())return n.Z.getWorkspaceToken().done((function(e){e?.success&&e?.data?.accessToken&&o({token:e.data}),n.Z.getWorkspaceTokenXhr=null})).fail((function(){n.Z.getWorkspaceTokenXhr=null})),!0}else if("getReservedRooms"==e.type){if(n.Z.hasZoomRqToken()){const t=e.info,i=!1;return n.Z.getReservedRooms(t.token,t.eventId,i,(function(e){o(e)})),!0}}else if("saveWorkspace"==e.type){if(n.Z.hasZoomRqToken()){const t=e.info,i=!1;return n.Z.saveWorkspace(t.token,t.data,i,(function(e){o(e)})),!0}}else if("checkReservedRooms"==e.type){if(n.Z.hasZoomRqToken()){const t=e.info,i=!1;return n.Z.checkReservedRooms(t.token,t.data,i,(function(e){o(e)})),!0}}else if("getWorkspaceFileToken"==e.type){if(n.Z.hasZoomRqToken())return n.Z.getWorkspaceFileToken().done((function(e){e?.success&&e?.data&&o({fileToken:e.data}),n.Z.getWorkspaceFileTokenXhr=null})).fail((function(){n.Z.getWorkspaceFileTokenXhr=null})),!0}else if("getWorkspaceRoomImg"==e.type){if(n.Z.hasZoomRqToken())return n.Z.getWorkspaceRoomImg(e.info.url,e.info.fileToken,!1,(function(e){o(e)})),!0}else if("setHaveShownWsTips"==e.type)n.Z.hasZoomRqToken()&&n.Z.setHaveShownWsTips(e.value);else if("getEmailConsistencyCheckData"==e.type)n.Z.hasZoomRqToken()?o({hasLogin:!0,enableEmailConsistencyCheck:p?.enableEmailConsistencyCheck||!1,email:p?.email||""}):o({hasLogin:!1});else if("forceLogoutExtension"==e.type)n.Z.logout((function(){browser.tabs.query({active:!0,currentWindow:!0},(function(e){try{browser.tabs.sendMessage(e[0].id,{type:"logout"},(function(e){}))}catch(e){}}))}));else if("getAttachmentSupportData"==e.type)n.Z.hasZoomRqToken()?o({whiteboardsSupport:p?.whiteboard?.support,hasLogin:!0,baseUrl:n.Z.getUserBaseUrl(),allowPreloadWb:n.Z.getAllowPreloadWb(),...n.Z.getDocsData()}):o({hasLogin:!1});else if("getDocsNak"==e.type){if(n.Z.hasZoomRqToken())return n.Z.getDocsNak()?.done((function(e){e?.status&&e.result?o({docsNak:e.result}):o({}),n.Z.getDocsNakXhr=null}))?.fail((function(){n.Z.getDocsNakXhr=null,o({})})),!0;o({})}else if("getDocsDetail"==e.type){if(n.Z.hasZoomRqToken())return n.Z.getDocsDetail(e.nak,e.data,!1,(function(e){o(e)})),!0;o({})}else if("editAttachment"===e.type){if(n.Z.hasZoomRqToken())return n.Z.editAttachment(e.info,(function(e){o(e)})),!0;o({})}})),browser.runtime.onConnect.addListener((function(e){i=e,e.onMessage.addListener((function(t){if("schedule"==t.type)n.Z.getZoomZakRequestToken()?n.Z.scheduleMeeting(t.info,(function(t){n.Z.saveValue("zoom_config_fte",!1),e.postMessage({type:"schedule",meeting:t.result})}),(function(e){if(201==e.errorCode||212==e.errorCode)s("login###again");else{s(e.errorMessage||"Schedule meeting failed. Please try again.",e.syncState,e.noReviveSchedule)}})):n.Z.popupLogin();else if("schedulepac"==t.type){n.Z.hasZoomRqToken()?n.Z.schedulePACMeeting(t.info,(function(t){e.postMessage({type:"schedule",meeting:t.result})}),(function(e){201==e.errorCode||212==e.errorCode?s("login###again"):s(e.errorCode+" : Schedule meeting failed. Please try again.")})):n.Z.popupLogin()}else if("update"==t.type){n.Z.hasZoomRqToken()&&n.Z.editMeeting(t.info,(function(o){t.info?.isNewSchedule&&function(){let e=n.Z.getZoomData();if(e?.showBiSyncPopup&&!n.Z.getValue("dontShowBiSyncPopup")){let e=n.Z.getValue("showBiSyncPopupDate"),t=(new Date).getDate().toString();if(e!==t)return n.Z.saveValue("showBiSyncPopupDate",t),!0}return!1}()&&e.postMessage({type:"showBiSyncPopup"})}),(function(e){}))}else if("delete"==t.type){n.Z.hasZoomRqToken()&&n.Z.deleteMeeting(t.info,(function(t){e.postMessage({type:"delSuccess",meeting:t.result})}),(function(e){}))}else if("icon_delete"==t.type){n.Z.hasZoomRqToken()?n.Z.deleteMeeting(t.info,(function(t){e.postMessage({type:"iconDeleteSuccess",meeting:t.result})}),(function(t){e.postMessage({type:"iconDeleteFailed",showMsg:t.showMsg})})):n.Z.popupLogin()}else if("deleteonly"==t.type){n.Z.hasZoomRqToken()&&n.Z.deleteMeeting(t.info,(function(e){}),(function(e){}))}else if("loadZoomOptions"==t.type)e.postMessage({type:"updateZmOptions",zmOpt:n.Z.getZoomSetting()});else if("saveOptionsAndSchedule"==t.type)if(n.Z.hasZoomRqToken()){let o=t.info.securityRes;delete t.info.securityRes;let i=t.info.allowDenyRes;delete t.info.allowDenyRes;let a=t.info.templateRes;delete t.info.templateRes;let r=t.info.enable_alternative_host_edit_poll;delete t.info.enable_alternative_host_edit_poll;let l=t.info.focusModeValue;delete t.info.focusModeValue;let u=t.info.record_id;delete t.info.record_id;let p=n.Z.clone(t.info.waiting_room_new),c=t.info.qa;delete t.info.qa;let f=t.info.enablePMC;delete t.info.enablePMC;let d=t.info.enableAutoAddExternalUser;delete t.info.enableAutoAddExternalUser;let g=t.info.allowAutoAddMeetingParticipants;delete t.info.allowAutoAddMeetingParticipants;let Z=t.info.enableInterpretation;delete t.info.enableInterpretation;let m=t.info.interpretation;delete t.info.interpretation;let h=t.info.enable_auto_start_meeting_summary;delete t.info.enable_auto_start_meeting_summary;let y=t.info.enable_auto_start_meeting_query;delete t.info.enable_auto_start_meeting_query,n.Z.updateZoomSetting(t.info,(function(){n.Z.updateSecurity(o),n.Z.updateAllowDeny(i),n.Z.updateAllowAlternativeHostEditPoll(r),n.Z.updateFocusMode(l),n.Z.updateAutoRec(u),n.Z.updateWaitingRoom2(p),n.Z.updateQa(c),n.Z.updateMeetingSummary(h),n.Z.updateMeetingQuery(y),t.info.securityRes=o,t.info.allowDenyRes=i,t.info.templateRes=a,t.info.enable_alternative_host_edit_poll=r,t.info.focusModeValue=l,t.info.record_id=u,t.info.waiting_room_new=p,t.info.qa=c,t.info.enablePMC=f,t.info.enableAutoAddExternalUser=d,t.info.allowAutoAddMeetingParticipants=g,t.info.enableInterpretation=Z,t.info.interpretation=m,t.info.enable_auto_start_meeting_summary=h,t.info.enable_auto_start_meeting_query=y,n.Z.scheduleMeeting(t.info,(function(t){n.Z.saveValue("zoom_config_fte",!1),e.postMessage({type:"schedule",meeting:t.result})}),(function(e){s(e.errorMessage||"Schedule meeting failed. Please try again.",e.syncState)}),(function(){s("login###again")}))}),(function(e){s(e.errorMessage||"Schedule meeting failed. Please try again.")}),(function(){s("login###again")}))}else n.Z.popupLogin();else if("saveOptionsAndQuickSchedule"==t.type)if(n.Z.hasZoomRqToken())if(t.info.changepwd){let o=n.Z.getSecurity(),i=t.info.securityRes.pwd;i&&""!=i&&(o.pmi.passcode.value=i,n.Z.setSecurity(o)),n.Z.scheduleMeeting(t.info,(function(t){e.postMessage({type:"schedule",meeting:t.result})}),(function(e){s(e.errorMessage||"Schedule meeting failed. Please try again.",e.syncState,e.noReviveSchedule)}))}else n.Z.updateSettingForQuick(t.info,(function(){n.Z.scheduleMeeting(t.info,(function(t){e.postMessage({type:"schedule",meeting:t.result})}),(function(e){s(e.errorMessage||"Schedule meeting failed. Please try again.",e.syncState)}))}));else n.Z.popupLogin();else if("sync"==t.type)n.Z.toSync(),t.info?.updateWbLastUsedTime&&n.Z.updateWbLastUsedTime(),t.info?.updateDocsLastUsedTime&&n.Z.updateDocsLastUsedTime();else if("saveNewCalendarEvent"==t.type)n.Z.createMeetingMp(t.info,(function(){}),(function(){}));else if("removeCalendarEvent"==t.type)n.Z.removeMeetingMp(t.info,(function(t){e.postMessage({type:"delSuccess",meeting:t.result})}),(function(){}));else if("updateTimeAndTimezone"==t.type)n.Z.updateMeetingTimeAndTimezone(t.info,(function(){}),(function(t){3161==t?.errorCode&&e.postMessage({type:"updateTimeAndTimezoneFailed",errorMsg:t.errorMessage})}));else if("saveInvitee"==t.type)n.Z.saveInvitee(t.info,(function(){}),(function(){}));else if("remoteCheckPwd"==t.type)t.info.pwd&&n.Z.remoteCheckPassword(t.info.pwd).done((function(o){201==o.errorCode||212==o.errorCode?n.Z.popupLogin(!0):e.postMessage({type:"remoteCheckPwdResult",exception:!1,info:{res:o.status,msg:o.errorMessage,errortype:1,channel:t.info.channel}})})).fail((function(){e.postMessage({type:"remoteCheckPwdResult",exception:!0,info:{channel:t.info.channel}})}));else if("viewTemplateDetail"==t.type){let e=t.info.templateId;if(e){let t=n.Z.getAdminTemplateDetailUrl(e);browser.tabs.create({url:t})}}else"callPopupLogin"==t.type?n.Z.popupLogin():"saveDontShowBiSyncPopup"==t.type&&n.Z.hasZoomRqToken()&&(n.Z.saveValue("dontShowBiSyncPopup",!0),n.Z.saveDontShowBiSyncPopup())}))}))},979:()=>{}},o={};function n(e){var i=o[e];if(void 0!==i)return i.exports;var a=o[e]={exports:{}};return t[e].call(a.exports,a,a.exports,n),a.exports}n.m=t,e=[],n.O=(t,o,i,a)=>{if(!o){var s=1/0;for(p=0;p<e.length;p++){for(var[o,i,a]=e[p],r=!0,l=0;l<o.length;l++)(!1&a||s>=a)&&Object.keys(n.O).every((e=>n.O[e](o[l])))?o.splice(l--,1):(r=!1,a<s&&(s=a));if(r){e.splice(p--,1);var u=i();void 0!==u&&(t=u)}}return t}a=a||0;for(var p=e.length;p>0&&e[p-1][2]>a;p--)e[p]=e[p-1];e[p]=[o,i,a]},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.j=352,(()=>{var e={352:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var i,a,[s,r,l]=o,u=0;if(s.some((t=>0!==e[t]))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(l)var p=l(n)}for(t&&t(o);u<s.length;u++)a=s[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(p)},o=self.webpackChunkfirefox=self.webpackChunkfirefox||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var i=n.O(void 0,[647,493],(()=>n(216)));i=n.O(i)})();