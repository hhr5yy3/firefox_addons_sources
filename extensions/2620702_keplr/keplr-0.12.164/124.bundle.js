"use strict";(self.webpackChunk_keplr_wallet_extension=self.webpackChunk_keplr_wallet_extension||[]).push([[124],{28646:(e,t,n)=>{n.d(t,{Z:()=>g});var r=n(97790),a=n(96067),i=n(48246),s=n(91288),o=n(10423),c=n(48834).Buffer,d=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))};const l=[{vendorId:i.An}],u=()=>{const{hid:e}=navigator;if(!e)throw new o.PS("navigator.hid is not supported","HIDNotSupported");return e};function h(){return d(this,void 0,void 0,(function*(){const e=yield u().requestDevice({filters:l});return Array.isArray(e)?e:[e]}))}function p(){return d(this,void 0,void 0,(function*(){return(yield u().getDevices()).filter((e=>e.vendorId===i.An))}))}class f extends r.ZP{constructor(e){super(),this.channel=Math.floor(65535*Math.random()),this.packetSize=64,this.inputs=[],this.read=()=>this.inputs.length?Promise.resolve(this.inputs.shift()):new Promise((e=>{this.inputCallback=e})),this.onInputReport=e=>{const t=c.from(e.data.buffer);this.inputCallback?(this.inputCallback(t),this.inputCallback=null):this.inputs.push(t)},this._disconnectEmitted=!1,this._emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))},this.exchange=e=>d(this,void 0,void 0,(function*(){return yield this.exchangeAtomicImpl((()=>d(this,void 0,void 0,(function*(){const{channel:t,packetSize:n}=this;(0,s.cM)("apdu","=> "+e.toString("hex"));const r=(0,a.Z)(t,n),i=r.makeBlocks(e);for(let e=0;e<i.length;e++)yield this.device.sendReport(0,i[e]);let o,c;for(;!(o=r.getReducedResult(c));){const e=yield this.read();c=r.reduceResponse(c,e)}return(0,s.cM)("apdu","<= "+o.toString("hex")),o})))).catch((e=>{if(e&&e.message&&e.message.includes("write"))throw this._emitDisconnect(e),new o.vs(e.message);throw e}))})),this.device=e,this.deviceModel="number"==typeof e.productId?(0,i.Ht)(e.productId):void 0,e.addEventListener("inputreport",this.onInputReport)}static request(){return d(this,void 0,void 0,(function*(){const[e]=yield h();return f.open(e)}))}static openConnected(){return d(this,void 0,void 0,(function*(){const e=yield p();return 0===e.length?null:f.open(e[0])}))}static open(e){return d(this,void 0,void 0,(function*(){yield e.open();const t=new f(e),n=r=>{e===r.device&&(u().removeEventListener("disconnect",n),t._emitDisconnect(new o.qX))};return u().addEventListener("disconnect",n),t}))}close(){return d(this,void 0,void 0,(function*(){yield this.exchangeBusyPromise,this.device.removeEventListener("inputreport",this.onInputReport),yield this.device.close()}))}setScrambleKey(){}}f.isSupported=()=>Promise.resolve(!(!window.navigator||!window.navigator.hid)),f.list=p,f.listen=e=>{let t=!1;return function(){return d(this,void 0,void 0,(function*(){const e=yield p();return e.length>0?e[0]:(yield h())[0]}))}().then((n=>{if(n){if(!t){const t="number"==typeof n.productId?(0,i.Ht)(n.productId):void 0;e.next({type:"add",descriptor:n,deviceModel:t}),e.complete()}}else e.error(new o.FB("Access denied to use Ledger device"))}),(t=>{e.error(new o.FB(t.message))})),{unsubscribe:function(){t=!0}}};const g=f},19981:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(97790),a=n(9064),i=n(21036),s=n(91288),o=n(10423),c=n(62607),d=n(48834).Buffer,l=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))};class u extends r.ZP{constructor(e,t){super(),this.channel=Math.floor(65535*Math.random()),this.packetSize=64,this._disconnectEmitted=!1,this._emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))},this.device=e,this.interfaceNumber=t,this.deviceModel=(0,i.Ht)(e.productId)}static request(){return l(this,void 0,void 0,(function*(){const e=yield(0,c.PC)();return u.open(e)}))}static openConnected(){return l(this,void 0,void 0,(function*(){const e=yield(0,c.yz)();return 0===e.length?null:u.open(e[0])}))}static open(e){return l(this,void 0,void 0,(function*(){yield e.open(),null===e.configuration&&(yield e.selectConfiguration(1)),yield p(e);const t=e.configurations[0].interfaces.find((({alternates:e})=>e.some((e=>255===e.interfaceClass))));if(!t)throw new o.$u("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");const n=t.interfaceNumber;try{yield e.claimInterface(n)}catch(t){throw yield e.close(),new o.$u(t.message)}const r=new u(e,n),a=t=>{e===t.device&&(navigator.usb.removeEventListener("disconnect",a),r._emitDisconnect(new o.qX))};return navigator.usb.addEventListener("disconnect",a),r}))}close(){return l(this,void 0,void 0,(function*(){yield this.exchangeBusyPromise,yield this.device.releaseInterface(this.interfaceNumber),yield p(this.device),yield this.device.close()}))}exchange(e){return l(this,void 0,void 0,(function*(){return yield this.exchangeAtomicImpl((()=>l(this,void 0,void 0,(function*(){const{channel:t,packetSize:n}=this;(0,s.cM)("apdu","=> "+e.toString("hex"));const r=(0,a.Z)(t,n),i=r.makeBlocks(e);for(let e=0;e<i.length;e++)yield this.device.transferOut(3,i[e]);let o,c;for(;!(o=r.getReducedResult(c));){const e=yield this.device.transferIn(3,n),t=d.from(e.data.buffer);c=r.reduceResponse(c,t)}return(0,s.cM)("apdu","<= "+o.toString("hex")),o})))).catch((e=>{if(e&&e.message&&e.message.includes("disconnected"))throw this._emitDisconnect(e),new o.vs(e.message);throw e}))}))}setScrambleKey(){}}u.isSupported=c.Gb,u.list=c.yz,u.listen=e=>{let t=!1;return(0,c.DC)().then((n=>{if(!t){const t=(0,i.Ht)(n.productId);e.next({type:"add",descriptor:n,deviceModel:t}),e.complete()}}),(t=>{window.DOMException&&t instanceof window.DOMException&&18===t.code?e.error(new o.um(t.message)):e.error(new o.FB(t.message))})),{unsubscribe:function(){t=!0}}};const h=u;function p(e){return l(this,void 0,void 0,(function*(){try{yield e.reset()}catch(e){console.warn(e)}}))}},77257:(e,t,n)=>{n.d(t,{Pi:()=>s.P}),n(20580);var r=n(72615),a=n(40626),i=(n(30571),n(66065)),s=n(49839);n(22081),n(2784),n(92363),n(97432),(0,a.z0)(r.m),i.O.finalizeAllImmediately},47790:(e,t,n)=>{n.d(t,{A:()=>r.A}),n(31755);var r=n(47918)},66674:(e,t,n)=>{n(2784)},96780:(e,t,n)=>{n(2784)},63167:(e,t,n)=>{n.d(t,{BX:()=>r.BX,CK:()=>r.CK});var r=n(58650)},91637:(e,t,n)=>{n.d(t,{u:()=>h});var r=n(2784),a=n(63167),i=n(28316),s=n(75868),o=n(66769),c=n(71346),d=n.n(c),l=n(74290);const u=(0,s.animated)(l.Z),h=({isOpen:e,close:t,align:n,maxHeight:c,onCloseTransitionEnd:d,forceNotUseSimplebar:l,forceNotOverflowAuto:u,disableBackdrop:h,children:f})=>{const g=(0,a.BX)(e),[y,m]=(0,r.useState)(e);(0,r.useLayoutEffect)((()=>{e&&m(!0)}),[e]);const _=e||y,b=(0,r.useRef)(null),E=(0,r.useMemo)((()=>_?(b.current||(b.current=g.registerRootElement()),g.getRootElement(b.current)):(b.current&&(g.releaseRootElement(b.current),b.current=null),null)),[_]);(0,r.useEffect)((()=>()=>{b.current&&(g.releaseRootElement(b.current),b.current=null)}),[]);const A=(0,s.useSpringValue)(e?1:0,{config:o.a});return E&&(e||y)?i.createPortal(r.createElement("div",null,r.createElement(p,{transition:A,isOpen:e,close:t,align:n,maxHeight:c,onCloseTransitionEnd:()=>{m(!1),d&&d()},forceNotUseSimplebar:l,forceNotOverflowAuto:u,disableBackdrop:h},f)),E):null},p=({children:e,transition:t,align:n,maxHeight:a,isOpen:i,close:o,onCloseTransitionEnd:c,forceNotUseSimplebar:l,forceNotOverflowAuto:h,disableBackdrop:p})=>{const f=(0,r.useRef)(c);f.current=c,(0,r.useLayoutEffect)((()=>{i?t.start(1):t.start(0,{onRest:f.current})}),[t,i]);const g=(0,r.useRef)(null);return r.createElement(s.animated.div,{style:Object.assign(Object.assign({position:"absolute",top:0,bottom:0,left:0,right:0},(()=>{if("left"!==n&&"right"!==n)return{display:"flex",flexDirection:"column",justifyContent:"center"===n?"center":"flex-end"}})()),{pointerEvents:p?"none":"auto",backgroundColor:p?"rgba(0,0,0,0)":t.to((e=>d()("#000000").alpha(.55*e).string()))}),onClick:e=>{e.preventDefault(),p?g.current&&g.current!==e.target&&g.current.contains(e.target)&&e.stopPropagation():(e.stopPropagation(),g.current&&g.current!==e.target&&g.current.contains(e.target)||i&&o())}},((e,t,a)=>"left"===n||"right"===n||l?r.createElement(s.animated.div,{ref:e,style:t},a):r.createElement(u,{scrollableNodeProps:{ref:e},style:t},a))(g,Object.assign({maxHeight:"left"!==n&&"right"!==n?a||"85vh":void 0,overflow:h?void 0:"auto",pointerEvents:"auto",position:"absolute",left:0,right:0},"left"===n?{top:0,bottom:0,transform:t.to((e=>`translateX(${-100*(1-e)}%)`))}:"right"===n?{top:0,bottom:0,transform:t.to((e=>`translateX(${100*(1-e)}%)`))}:{bottom:"center"===n?t.to((e=>50*e+"%")):"auto",transform:"center"===n?t.to((e=>`translateY(${50+50*(1-e)}%)`)):t.to((e=>`translateY(${100*(1-e)}%)`))}),e))}},90879:(e,t,n)=>{n.d(t,{p:()=>i});var r=n(42178),a=n(25300);const i=(0,r.default)(a.i)`
  font-weight: 400;
  font-size: 0.875rem;
`},40602:(e,t,n)=>{n.d(t,{et:()=>r}),n(14002),n(28646),n(19981),n(47722),n(80471),n(34298),n(48834).Buffer;const r="m/2645'/1195502025'/1148870696'/0'/0'/0"},35150:(e,t,n)=>{n.d(t,{VZ:()=>r.V,ZL:()=>a.Z,nW:()=>i.n});var r=n(93043),a=n(52977),i=(n(76948),n(61139),n(90820))},64259:(e,t,n)=>{n.d(t,{H:()=>s});var r=n(50318),a=n(19981),i=n(28646);const s={tryAppOpen:(e,t)=>{return n=void 0,s=void 0,c=function*(){let n=!1;try{const a=yield(0,r.getAppInfo)(e);"No errors"===a.error_message&&a.app_name===t&&(n=!0)}catch(e){console.log(e)}try{if(!n){yield r.CosmosApp.openApp(e,t);const n=25;let s=0;for(;s<n;){e=e instanceof i.Z?yield i.Z.create():yield a.Z.create();const n=yield(0,r.getAppInfo)(e);if("No errors"===n.error_message&&n.app_name===t)break;s++,yield new Promise((e=>setTimeout(e,200)))}}}catch(e){}return e},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function a(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}i((c=c.apply(n,s||[])).next())}));var n,s,o,c}}},34298:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(40409),t),a(n(91166),t),a(n(47577),t)},80471:(e,t,n)=>{n.d(t,{K:()=>a.KW,g:()=>d});var r=n(16210),a=n(33924),i=n(76037),s=n(72355),o=n(48834).Buffer,c=Object.defineProperty;class d{constructor(e){if(((e,t,n)=>{((e,t,n)=>{t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)})(this,"transport"),this.transport=e,!e)throw new Error("Transport has not been defined")}async sendApdu(e=a.N5.GET_VERSION,t=0,n=0,r=new Uint8Array(0)){return this.transport.send(a.Ds,e,t,n,o.from(r),[a.KW.NoError,a.KW.BadCla,a.KW.BadIns,a.KW.InvalidP1P2,a.KW.UserRejected]).then((e=>{const t=e.subarray(-2),n=256*t[0]+t[1];let r=(0,a.T9)(n);return{data:e.subarray(0,-2),returnCode:n,errorMessage:r}}))}async getAppVersion(){const e=await this.sendApdu(a.N5.GET_VERSION);return{returnCode:e.returnCode,errorMessage:e.errorMessage,major:e.data[0],minor:e.data[1],patch:e.data[2]}}async getPubKey(e,t=!0){const n=(0,r.Mi)(e);try{const e=await this.sendApdu(a.N5.GET_PUB_KEY,t?1:0,0,n);return{publicKey:e.data.slice(1,65),returnCode:e.returnCode,errorMessage:e.errorMessage}}catch{return console.warn("Caught error"),{publicKey:new Uint8Array(0),returnCode:a.KW.ExecutionError,errorMessage:(0,a.T9)(a.KW.ExecutionError)}}}async getStarkKey(e,t=!0){const{publicKey:n,errorMessage:r,returnCode:i}=await this.getPubKey(e,t);return i!==a.KW.NoError?{starkKey:n,returnCode:i,errorMessage:r}:{starkKey:n.slice(0,32),returnCode:i,errorMessage:r}}async signHash(e,t){const n=(0,r.Mi)(e),i=function(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(e.substring(n,n+2),16));return Uint8Array.from(t)}(function(e){let t=e.replace(/^0x0*/,"");if(t.length>a.dI)throw"invalid hash length";return t="0".repeat(1+a.dI-t.length).concat(t),t}(t));try{let e=await this.sendApdu(a.N5.SIGN_HASH,0,0,n);return e=await this.sendApdu(a.N5.SIGN_HASH,1,0,i),e.returnCode!==a.KW.NoError?{returnCode:e.returnCode,errorMessage:(0,a.T9)(e.returnCode),r:new Uint8Array(0),s:new Uint8Array(0),v:0}:{returnCode:e.returnCode,errorMessage:e.errorMessage,r:e.data.subarray(1,33),s:e.data.subarray(33,65),v:e.data[65]}}catch{return{returnCode:a.KW.ExecutionError,errorMessage:(0,a.T9)(a.KW.ExecutionError),r:new Uint8Array(0),s:new Uint8Array(0),v:0}}}async signTx(e,t,n){await this.sendApdu(a.N5.SIGN_TX,0,0,(0,r.Mi)(e));const s=(0,r.Md)(n.accountAddress),o=(0,r.Md)(n.tip),c=(0,r.Md)(n.chainId),d=(0,r.Md)(n.nonce),l=(0,r.Md)(this.encodeDataAvailabilityMode(n.nonceDataAvailabilityMode,n.feeDataAvailabilityMode)),{l1_gas:u,l2_gas:h}=this.encodeResourceBounds(n.resourceBounds);let p=new Uint8Array([...s.toArray("be",32),...o.toArray("be",32),...u.toArray("be",32),...h.toArray("be",32),...c.toArray("be",32),...d.toArray("be",32),...l.toArray("be",32)]);await this.sendApdu(a.N5.SIGN_TX,1,0,p),await this.sendApdu(a.N5.SIGN_TX,2,0,new Uint8Array(0)),await this.sendApdu(a.N5.SIGN_TX,3,0,new Uint8Array(0));let f=(0,r.Md)(t.length);p=new Uint8Array([...f.toArray("be",32)]),await this.sendApdu(a.N5.SIGN_TX,4,0,p);let g,y={returnCode:a.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0};for(const e of t){const t=i.lx.toCalldata(e.calldata);let n=new Uint8Array(32*(2+t.length));(0,r.Md)(e.contractAddress).toArray("be",32).forEach(((e,t)=>n[t]=e)),(0,r.Md)(i.vp.getSelectorFromName(e.entrypoint)).toArray("be",32).forEach(((e,t)=>n[32+t]=e)),t.forEach(((e,t)=>{(0,r.Md)(e).toArray("be",32).forEach(((e,r)=>n[64+32*t+r]=e))}));let s=[];for(let e=0;e<n.length;e+=224)s.push(n.slice(e,e+224));if(s.length>1){if(g=await this.sendApdu(a.N5.SIGN_TX,5,0,s[0]),g.returnCode!==a.KW.NoError)return y;for(const e of s.slice(1))if(g=await this.sendApdu(a.N5.SIGN_TX,5,1,e),g.returnCode!==a.KW.NoError)return y}else if(g=await this.sendApdu(a.N5.SIGN_TX,5,0,s[0]),g.returnCode!==a.KW.NoError)return y;if(g=await this.sendApdu(a.N5.SIGN_TX,5,2,new Uint8Array(0)),g.returnCode!==a.KW.NoError)return y}return(null==g?void 0:g.returnCode)===a.KW.NoError?{returnCode:g.returnCode,errorMessage:g.errorMessage,h:g.data.subarray(0,32),r:g.data.subarray(33,65),s:g.data.subarray(65,97),v:g.data[97]}:y}async signTxV1(e,t,n){await this.sendApdu(a.N5.SIGN_TX_V1,0,0,(0,r.Mi)(e));const s=(0,r.Md)(n.accountAddress),o=(0,r.Md)(n.max_fee),c=(0,r.Md)(n.chainId),d=(0,r.Md)(n.nonce);let l=new Uint8Array([...s.toArray("be",32),...o.toArray("be",32),...c.toArray("be",32),...d.toArray("be",32)]);await this.sendApdu(a.N5.SIGN_TX_V1,1,0,l);let u=(0,r.Md)(t.length);l=new Uint8Array([...u.toArray("be",32)]),await this.sendApdu(a.N5.SIGN_TX_V1,2,0,l);let h,p={returnCode:a.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0};for(const e of t){const t=i.lx.toCalldata(e.calldata);let n=new Uint8Array(32*(2+t.length));(0,r.Md)(e.contractAddress).toArray("be",32).forEach(((e,t)=>n[t]=e)),(0,r.Md)(i.vp.getSelectorFromName(e.entrypoint)).toArray("be",32).forEach(((e,t)=>n[32+t]=e)),t.forEach(((e,t)=>{(0,r.Md)(e).toArray("be",32).forEach(((e,r)=>n[64+32*t+r]=e))}));let s=[];for(let e=0;e<n.length;e+=224)s.push(n.slice(e,e+224));if(s.length>1){if(h=await this.sendApdu(a.N5.SIGN_TX_V1,3,0,s[0]),h.returnCode!==a.KW.NoError)return p;for(const e of s.slice(1))if(h=await this.sendApdu(a.N5.SIGN_TX_V1,3,1,e),h.returnCode!==a.KW.NoError)return p}else if(h=await this.sendApdu(a.N5.SIGN_TX_V1,3,0,s[0]),h.returnCode!==a.KW.NoError)return p;if(h=await this.sendApdu(a.N5.SIGN_TX_V1,3,2,new Uint8Array(0)),h.returnCode!==a.KW.NoError)return p}return(null==h?void 0:h.returnCode)===a.KW.NoError?{returnCode:h.returnCode,errorMessage:h.errorMessage,h:h.data.subarray(0,32),r:h.data.subarray(33,65),s:h.data.subarray(65,97),v:h.data[97]}:p}async signDeployAccount(e,t){await this.sendApdu(a.N5.DEPLOY_ACCOUNT,0,0,(0,r.Mi)(e));const n=(0,r.Md)(t.contractAddress),i=(0,r.Md)(t.chainId),s=(0,r.Md)(t.nonce),o=(0,r.Md)(this.encodeDataAvailabilityMode(t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode)),c=(0,r.Md)(t.class_hash),d=(0,r.Md)(t.contract_address_salt);let l=new Uint8Array([...n.toArray("be",32),...i.toArray("be",32),...s.toArray("be",32),...o.toArray("be",32),...c.toArray("be",32),...d.toArray("be",32)]);await this.sendApdu(a.N5.DEPLOY_ACCOUNT,1,0,l);const u=(0,r.Md)(t.tip),{l1_gas:h,l2_gas:p}=this.encodeResourceBounds(t.resourceBounds);l=new Uint8Array([...u.toArray("be",32),...h.toArray("be",32),...p.toArray("be",32)]),await this.sendApdu(a.N5.DEPLOY_ACCOUNT,2,0,l),await this.sendApdu(a.N5.DEPLOY_ACCOUNT,3,0,new Uint8Array(0));let f=(0,r.Md)(t.constructor_calldata.length);l=new Uint8Array([...f.toArray("be",32)]),await this.sendApdu(a.N5.DEPLOY_ACCOUNT,4,0,l);let g,y={returnCode:a.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0},m=new Uint8Array(32*t.constructor_calldata.length);t.constructor_calldata.forEach(((e,t)=>{(0,r.Md)(e).toArray("be",32).forEach(((e,n)=>m[32*t+n]=e))}));let _=[];for(let e=0;e<m.length;e+=224)_.push(m.slice(e,e+224));for(const e of _)if(g=await this.sendApdu(a.N5.DEPLOY_ACCOUNT,5,0,e),g.returnCode!==a.KW.NoError)return y;return(null==g?void 0:g.returnCode)===a.KW.NoError?{returnCode:g.returnCode,errorMessage:g.errorMessage,h:g.data.subarray(0,32),r:g.data.subarray(33,65),s:g.data.subarray(65,97),v:g.data[97]}:y}async signDeployAccountV1(e,t){await this.sendApdu(a.N5.DEPLOY_ACCOUNT_V1,0,0,(0,r.Mi)(e));const n=(0,r.Md)(t.contractAddress),i=(0,r.Md)(t.class_hash),s=(0,r.Md)(t.contract_address_salt),o=(0,r.Md)(t.chainId),c=(0,r.Md)(t.nonce);let d=new Uint8Array([...n.toArray("be",32),...i.toArray("be",32),...s.toArray("be",32),...o.toArray("be",32),...c.toArray("be",32)]);await this.sendApdu(a.N5.DEPLOY_ACCOUNT_V1,1,0,d);const l=(0,r.Md)(t.max_fee);d=new Uint8Array([...l.toArray("be",32)]),await this.sendApdu(a.N5.DEPLOY_ACCOUNT_V1,2,0,d);let u=(0,r.Md)(t.constructor_calldata.length);d=new Uint8Array([...u.toArray("be",32)]),await this.sendApdu(a.N5.DEPLOY_ACCOUNT_V1,3,0,d);let h,p={returnCode:a.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0},f=new Uint8Array(32*t.constructor_calldata.length);t.constructor_calldata.forEach(((e,t)=>{(0,r.Md)(e).toArray("be",32).forEach(((e,n)=>f[32*t+n]=e))}));let g=[];for(let e=0;e<f.length;e+=224)g.push(f.slice(e,e+224));for(const e of g)if(h=await this.sendApdu(a.N5.DEPLOY_ACCOUNT_V1,4,0,e),h.returnCode!==a.KW.NoError)return p;return(null==h?void 0:h.returnCode)===a.KW.NoError?{returnCode:h.returnCode,errorMessage:h.errorMessage,h:h.data.subarray(0,32),r:h.data.subarray(33,65),s:h.data.subarray(65,97),v:h.data[97]}:p}async signMessage(e,t,n){const r=i.AT.getMessageHash(t,n);return this.signHash(e,r)}encodeResourceBounds(e){const t=BigInt(64),n=BigInt(128),a=t+n,s=BigInt(i.lC.encodeShortString("L1_GAS")),o=BigInt(i.lC.encodeShortString("L2_GAS")),c=(s<<a)+(BigInt(e.l1_gas.max_amount)<<n)+BigInt(e.l1_gas.max_price_per_unit),d=(o<<a)+(BigInt(e.l2_gas.max_amount)<<n)+BigInt(e.l2_gas.max_price_per_unit);return{l1_gas:(0,r.Md)(c),l2_gas:(0,r.Md)(d)}}encodeDataAvailabilityMode(e,t){const n=BigInt(32),r=e===s.h.L1?0:1,a=t===s.h.L1?0:1;return(BigInt(r)<<n)+BigInt(a)}}},14002:(e,t,n)=>{var r=n(73812),a=n(38388),i=n(95253),s=n(17271),o=n(48796),c=n(96649),d=n(64905),l=n(20368),u=n(89629),h=n(49595),p=n(72664),f=n(25959),g=n(48147),y=n(89307),m=n(96252),_=(n(49705),Object.defineProperty),b=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyNames,A=Object.prototype.hasOwnProperty,v=(e,t)=>{for(var n in t)_(e,n,{get:t[n],enumerable:!0})},w=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of E(t))A.call(e,a)||a===n||_(e,a,{get:()=>t[a],enumerable:!(r=b(t,a))||r.enumerable});return e};v({},{ADDR_BOUND:()=>oe,API_VERSION:()=>ae,BaseUrl:()=>he,FeeMarginPercentage:()=>ye,IS_BROWSER:()=>H,MASK_250:()=>re,MAX_STORAGE_ITEM_SIZE:()=>se,NetworkName:()=>pe,PRIME:()=>ie,RANGE_FELT:()=>de,RANGE_I128:()=>le,RANGE_U128:()=>ue,RPC_DEFAULT_VERSION:()=>_e,RPC_NODES:()=>be,StarknetChainId:()=>fe,TEXT_TO_FELT_MAX_LEN:()=>te,TRANSACTION_VERSION:()=>T.ETransactionVersion,TransactionHashPrefix:()=>ge,UDC:()=>me,ZERO:()=>ne});var T={};v(T,{JRPC:()=>k,RPCSPEC06:()=>I,RPCSPEC07:()=>r});var k={},I={};v(I,{EBlockTag:()=>P,EDAMode:()=>V,EDataAvailabilityMode:()=>M,ESimulationFlag:()=>x,ETransactionExecutionStatus:()=>B,ETransactionFinalityStatus:()=>O,ETransactionStatus:()=>D,ETransactionType:()=>N,ETransactionVersion:()=>R,ETransactionVersion2:()=>L,ETransactionVersion3:()=>$,Errors:()=>C,SPEC:()=>S});var C={},S={},N=(e=>(e.DECLARE="DECLARE",e.DEPLOY="DEPLOY",e.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",e.INVOKE="INVOKE",e.L1_HANDLER="L1_HANDLER",e))(N||{}),x=(e=>(e.SKIP_VALIDATE="SKIP_VALIDATE",e.SKIP_FEE_CHARGE="SKIP_FEE_CHARGE",e))(x||{}),D=(e=>(e.RECEIVED="RECEIVED",e.REJECTED="REJECTED",e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e))(D||{}),O=(e=>(e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e))(O||{}),B=(e=>(e.SUCCEEDED="SUCCEEDED",e.REVERTED="REVERTED",e))(B||{}),P=(e=>(e.PENDING="pending",e.LATEST="latest",e))(P||{}),M=(e=>(e.L1="L1",e.L2="L2",e))(M||{}),V=(e=>(e[e.L1=0]="L1",e[e.L2=1]="L2",e))(V||{}),R=(e=>(e.V0="0x0",e.V1="0x1",e.V2="0x2",e.V3="0x3",e.F0="0x100000000000000000000000000000000",e.F1="0x100000000000000000000000000000001",e.F2="0x100000000000000000000000000000002",e.F3="0x100000000000000000000000000000003",e))(R||{}),L=(e=>(e.V0="0x0",e.V1="0x1",e.V2="0x2",e.F0="0x100000000000000000000000000000000",e.F1="0x100000000000000000000000000000001",e.F2="0x100000000000000000000000000000002",e))(L||{}),$=(e=>(e.V3="0x3",e.F3="0x100000000000000000000000000000003",e))($||{});w(T,r,"default"),v({},{IS_BROWSER:()=>H,addHexPrefix:()=>X,arrayBufferToString:()=>F,atobUniversal:()=>W,btoaUniversal:()=>G,buf2hex:()=>Y,calcByteLength:()=>Z,padLeft:()=>z,pascalToSnake:()=>ee,removeHexPrefix:()=>q,sanitizeBytes:()=>J,sanitizeHex:()=>Q,stringToArrayBuffer:()=>K,utf8ToArray:()=>j});var H="undefined"!=typeof window,U="0";function F(e){return new Uint8Array(e).reduce(((e,t)=>e+String.fromCharCode(t)),"")}function j(e){return(new TextEncoder).encode(e)}function K(e){return j(e)}function W(e){return i.US.decode(e)}function G(e){return i.US.encode(new Uint8Array(e))}function Y(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}function q(e){return e.replace(/^0x/i,"")}function X(e){return`0x${q(e)}`}function z(e,t,n=U){return function(e,t,n,r=U){const a=t-e.length;let i=e;if(a>0){const t=r.repeat(a);i=n?t+e:e+t}return i}(e,t,!0,n)}function Z(e,t=8){const{length:n}=e,r=n%t;return r?(n-r)/t*t+t:n}function J(e,t=8,n=U){return z(e,Z(e,t),n)}function Q(e){return(e=J(e=q(e),2))&&(e=X(e)),e}var ee=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e,te=31,ne=0n,re=2n**250n-1n,ae=ne,ie=2n**251n+17n*2n**192n+1n,se=256n,oe=2n**251n-se,ce=(e,t)=>({min:e,max:t}),de=ce(ne,ie-1n),le=ce(-(2n**127n),2n**127n-1n),ue=ce(ne,2n**128n-1n),he=(e=>(e.SN_MAIN="https://alpha-mainnet.starknet.io",e.SN_SEPOLIA="https://alpha-sepolia.starknet.io",e))(he||{}),pe=(e=>(e.SN_MAIN="SN_MAIN",e.SN_SEPOLIA="SN_SEPOLIA",e))(pe||{}),fe=(e=>(e.SN_MAIN="0x534e5f4d41494e",e.SN_SEPOLIA="0x534e5f5345504f4c4941",e))(fe||{}),ge=(e=>(e.DECLARE="0x6465636c617265",e.DEPLOY="0x6465706c6f79",e.DEPLOY_ACCOUNT="0x6465706c6f795f6163636f756e74",e.INVOKE="0x696e766f6b65",e.L1_HANDLER="0x6c315f68616e646c6572",e))(ge||{}),ye=(e=>(e[e.L1_BOUND_MAX_AMOUNT=50]="L1_BOUND_MAX_AMOUNT",e[e.L1_BOUND_MAX_PRICE_PER_UNIT=50]="L1_BOUND_MAX_PRICE_PER_UNIT",e[e.MAX_FEE=50]="MAX_FEE",e))(ye||{}),me={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},_e="v0_7",be={SN_MAIN:[`https://starknet-mainnet.public.blastapi.io/rpc/${_e}`,`https://free-rpc.nethermind.io/mainnet-juno/${_e}`],SN_SEPOLIA:[`https://starknet-sepolia.public.blastapi.io/rpc/${_e}`,`https://free-rpc.nethermind.io/sepolia-juno/${_e}`]},Ee={};v(Ee,{RpcChannel:()=>Jr});var Ae=class extends Error{name;constructor(e){super(e),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(e,t){const{setPrototypeOf:n}=Object;n?n(e,t):e.__proto__=t}(this,new.target.prototype),function(e,t=e.constructor){const{captureStackTrace:n}=Error;n&&n(e,t)}(this)}},ve=class extends Ae{};v({},{BlockStatus:()=>De,BlockTag:()=>Oe,EntryPointType:()=>Ie,Literal:()=>ke,RPC:()=>T,TransactionExecutionStatus:()=>xe,TransactionFinalityStatus:()=>Ne,TransactionStatus:()=>Se,TransactionType:()=>Ce,TypedDataRevision:()=>c.P,Uint:()=>Te,ValidateType:()=>we});var we=(e=>(e.DEPLOY="DEPLOY",e.CALL="CALL",e.INVOKE="INVOKE",e))(we||{}),Te=(e=>(e.u8="core::integer::u8",e.u16="core::integer::u16",e.u32="core::integer::u32",e.u64="core::integer::u64",e.u128="core::integer::u128",e.u256="core::integer::u256",e.u512="core::integer::u512",e))(Te||{}),ke=(e=>(e.ClassHash="core::starknet::class_hash::ClassHash",e.ContractAddress="core::starknet::contract_address::ContractAddress",e.Secp256k1Point="core::starknet::secp256k1::Secp256k1Point",e))(ke||{}),Ie=(e=>(e.EXTERNAL="EXTERNAL",e.L1_HANDLER="L1_HANDLER",e.CONSTRUCTOR="CONSTRUCTOR",e))(Ie||{}),Ce=(e=>(e.DECLARE="DECLARE",e.DEPLOY="DEPLOY",e.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",e.INVOKE="INVOKE_FUNCTION",e))(Ce||{}),Se=(e=>(e.NOT_RECEIVED="NOT_RECEIVED",e.RECEIVED="RECEIVED",e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e.REJECTED="REJECTED",e.REVERTED="REVERTED",e))(Se||{}),Ne=(e=>(e.NOT_RECEIVED="NOT_RECEIVED",e.RECEIVED="RECEIVED",e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e))(Ne||{}),xe=(e=>(e.REJECTED="REJECTED",e.REVERTED="REVERTED",e.SUCCEEDED="SUCCEEDED",e))(xe||{}),De=(e=>(e.PENDING="PENDING",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.REJECTED="REJECTED",e))(De||{}),Oe=(e=>(e.PENDING="pending",e.LATEST="latest",e))(Oe||{});function Be(e,t){if(!e)throw new Error(t||"Assertion failure")}function Pe(e){return/^0x[0-9a-f]*$/i.test(e)}function Me(e){return BigInt(e)}function Ve(e){return"bigint"==typeof e}function Re(e){return X(Me(e).toString(16))}v({},{addPercent:()=>Ze,assertInRange:()=>Fe,bigNumberishArrayToDecimalStringArray:()=>je,bigNumberishArrayToHexadecimalStringArray:()=>Ke,cleanHex:()=>Ue,getDecimalString:()=>Ge,getHexString:()=>Ye,getHexStringArray:()=>qe,hexToBytes:()=>ze,hexToDecimalString:()=>He,isBigInt:()=>Ve,isBoolean:()=>Qe,isHex:()=>Pe,isNumber:()=>Je,isStringWholeNumber:()=>We,toBigInt:()=>Me,toCairoBool:()=>Xe,toHex:()=>Re,toHexString:()=>Le,toStorageKey:()=>$e});var Le=Re;function $e(e){return X(Me(e).toString(16).padStart(64,"0"))}function He(e){return BigInt(X(e)).toString(10)}function Ue(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function Fe(e,t,n,r=""){const a=""===r?"invalid length":`invalid ${r} length`,i=BigInt(e),s=BigInt(t),o=BigInt(n);Be(i>=s&&i<=o,`Message not signable, ${a}.`)}function je(e){return e.map((e=>Me(e).toString(10)))}function Ke(e){return e.map((e=>Re(e)))}function We(e){return/^\d+$/.test(e)}function Ge(e){if(Pe(e))return He(e);if(We(e))return e;throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function Ye(e){if(Pe(e))return e;if(We(e))return Le(e);throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function qe(e){return e.map(Ye)}function Xe(e){return(+e).toString()}function ze(e){if(!Pe(e))throw new Error(`${e} needs to be a hex-string`);let t=q(e);return t.length%2!=0&&(t=`0${t}`),(0,s.hexToBytes)(t)}function Ze(e,t){const n=BigInt(e);return n+n*BigInt(t)/100n}function Je(e){return"number"==typeof e}function Qe(e){return"boolean"==typeof e}function et(e){const t=q(Re(BigInt(e))),n=t.length%2==0?t:`0${t}`;return X((0,d.keccak)(ze(X(n))).toString(16))}function tt(e){const t=BigInt(function(e){return X((0,d.keccak)(j(e)).toString(16))}(e));return t&re}function nt(e){return Re(tt(e))}function rt(e){return Pe(e)?e:We(e)?Le(e):nt(e)}function at(e){return/^[\x00-\x7F]*$/.test(e)}function it(e){return e.length<=te}function st(e){return/^[0-9]*$/i.test(e)}function ot(e){return"string"==typeof e}function ct(e){return ot(e)&&!Pe(e)&&!We(e)}v({},{getSelector:()=>rt,getSelectorFromName:()=>nt,keccakBn:()=>et,starknetKeccak:()=>tt}),v({},{decodeShortString:()=>pt,encodeShortString:()=>ht,isASCII:()=>at,isDecimalString:()=>st,isLongText:()=>lt,isShortString:()=>it,isShortText:()=>dt,isString:()=>ot,isText:()=>ct,splitLongString:()=>ut});var dt=e=>ct(e)&&it(e),lt=e=>ct(e)&&!it(e);function ut(e){const t=RegExp(`[^]{1,${te}}`,"g");return e.match(t)||[]}function ht(e){if(!at(e))throw new Error(`${e} is not an ASCII string`);if(!it(e))throw new Error(`${e} is too long`);return X(e.replace(/./g,(e=>e.charCodeAt(0).toString(16))))}function pt(e){if(!at(e))throw new Error(`${e} is not an ASCII string`);if(Pe(e))return q(e).replace(/.{2}/g,(e=>String.fromCharCode(parseInt(e,16))));if(st(e))return pt("0X".concat(BigInt(e).toString(16)));throw new Error(`${e} is not Hex or decimal`)}function ft(e){const t=0n===BigInt(e.pending_word)?"":pt(Re(e.pending_word));return e.data.reduce(((e,t)=>e+(0n===BigInt(t)?"":pt(Re(t)))),"")+t}function gt(e){const t=ut(e),n=t[t.length-1],r=t.map(ht),[a,i]=void 0===n||31===n.length?["0x00",0]:[r.pop(),n.length];return{data:0===r.length?[]:r,pending_word:a,pending_word_len:i}}v({},{byteArrayFromString:()=>gt,stringFromByteArray:()=>ft});function yt(e){if(Ve(e)||Number.isInteger(e))return e.toString();if(ot(e)){if(Pe(e))return BigInt(e).toString();if(ct(e)){if(!it(e))throw new Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(ht(e)).toString()}if(We(e))return e}if(Qe(e))return""+ +e;throw new Error(`${e} can't be computed by felt()`)}v({},{felt:()=>tn,getAbiContractVersion:()=>Zt,getArrayType:()=>qt,isCairo1Abi:()=>Xt,isCairo1Type:()=>Yt,isLen:()=>Nt,isTypeArray:()=>Dt,isTypeBool:()=>Ut,isTypeByteArray:()=>Wt,isTypeBytes31:()=>Kt,isTypeContractAddress:()=>Ft,isTypeEnum:()=>Mt,isTypeEthAddress:()=>jt,isTypeFelt:()=>xt,isTypeLiteral:()=>Ht,isTypeNamedTuple:()=>Bt,isTypeNonZero:()=>zt,isTypeOption:()=>Vt,isTypeResult:()=>Rt,isTypeSecp256k1Point:()=>Gt,isTypeStruct:()=>Pt,isTypeTuple:()=>Ot,isTypeUint:()=>Lt,isTypeUint256:()=>$t,tuple:()=>en,uint256:()=>Jt,uint512:()=>Qt});var mt=(1n<<128n)-1n,_t=(1n<<256n)-1n,bt=0n,Et=340282366920938463463374607431768211455n,At=340282366920938463463374607431768211455n,vt=0n,wt=0n,Tt=class e{low;high;static abiSelector="core::integer::u256";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"low"in t[0]&&"high"in t[0]){const n=e.validateProps(t[0].low,t[0].high);this.low=n.low,this.high=n.high}else if(1===t.length){const n=e.validate(t[0]);this.low=n&mt,this.high=n>>128n}else{if(2!==t.length)throw Error("Incorrect constructor parameters");{const n=e.validateProps(t[0],t[1]);this.low=n.low,this.high=n.high}}}static validate(e){const t=BigInt(e);if(t<bt)throw Error("bigNumberish is smaller than UINT_256_MIN");if(t>_t)throw new Error("bigNumberish is bigger than UINT_256_MAX");return t}static validateProps(e,t){const n=BigInt(e),r=BigInt(t);if(n<vt||n>Et)throw new Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(r<wt||r>At)throw new Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:n,high:r}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:X(this.low.toString(16)),high:X(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[yt(this.low),yt(this.high)]}},kt=(1n<<512n)-1n,It=0n,Ct=0n,St=class e{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){const n=e.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(1===t.length){const n=e.validate(t[0]);this.limb0=n&mt,this.limb1=(n&mt<<128n)>>128n,this.limb2=(n&mt<<256n)>>256n,this.limb3=n>>384n}else{if(4!==t.length)throw Error("Incorrect Uint512 constructor parameters");{const n=e.validateProps(t[0],t[1],t[2],t[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}}}static validate(e){const t=BigInt(e);if(t<It)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(t>kt)throw Error("bigNumberish is bigger than UINT_512_MAX.");return t}static validateProps(e,t,n,r){const a=BigInt(e),i=BigInt(t),s=BigInt(n),o=BigInt(r);return[a,i,s,o].forEach(((e,t)=>{if(e<Ct||e>mt)throw Error(`limb${t} is not in the range of a u128 number`)})),{limb0:a,limb1:i,limb2:s,limb3:o}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:X(this.limb0.toString(16)),limb1:X(this.limb1.toString(16)),limb2:X(this.limb2.toString(16)),limb3:X(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[yt(this.limb0),yt(this.limb1),yt(this.limb2),yt(this.limb3)]}},Nt=e=>/_len$/.test(e),xt=e=>"felt"===e||"core::felt252"===e,Dt=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),Ot=e=>/^\(.*\)$/i.test(e),Bt=e=>/\(.*\)/i.test(e)&&e.includes(":"),Pt=(e,t)=>e in t,Mt=(e,t)=>e in t,Vt=e=>e.startsWith("core::option::Option::"),Rt=e=>e.startsWith("core::result::Result::"),Lt=e=>Object.values(Te).includes(e),$t=e=>Tt.isAbiType(e),Ht=e=>Object.values(ke).includes(e),Ut=e=>"core::bool"===e,Ft=e=>"core::starknet::contract_address::ContractAddress"===e,jt=e=>"core::starknet::eth_address::EthAddress"===e,Kt=e=>"core::bytes_31::bytes31"===e,Wt=e=>"core::byte_array::ByteArray"===e,Gt=e=>"core::starknet::secp256k1::Secp256k1Point"===e,Yt=e=>e.includes("::"),qt=e=>Yt(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function Xt(e){const{cairo:t}=Zt(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function zt(e){return e.startsWith("core::zeroable::NonZero::")}function Zt(e){if(e.find((e=>"interface"===e.type)))return{cairo:"1",compiler:"2"};const t=e.find((e=>"function"===e.type&&(e.inputs.length||e.outputs.length)));if(!t)return{cairo:void 0,compiler:void 0};const n=t.inputs.length?t.inputs:t.outputs;return Yt(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var Jt=e=>new Tt(e).toUint256DecimalString(),Qt=e=>new St(e).toUint512DecimalString(),en=(...e)=>({...e});function tn(e){return yt(e)}var nn=class{variant;constructor(e){const t=Object.values(e);if(0===t.length)throw new Error("This Enum must have at least 1 variant");if(1!==t.filter((e=>void 0!==e)).length)throw new Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){const e=Object.entries(this.variant).find((e=>void 0!==e[1]));if(void 0!==e)return e[1]}activeVariant(){const e=Object.entries(this.variant).find((e=>void 0!==e[1]));return void 0===e?"":e[0]}},rn=(e=>(e[e.Some=0]="Some",e[e.None=1]="None",e))(rn||{}),an=class{Some;None;constructor(e,t){if(!(e in rn))throw new Error("Wrong variant : should be CairoOptionVariant.Some or .None.");if(0===e){if(void 0===t)throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){if(!this.None)return this.Some}isSome(){return!(void 0===this.Some)}isNone(){return!0===this.None}},sn=(e=>(e[e.Ok=0]="Ok",e[e.Err=1]="Err",e))(sn||{}),on=class{Ok;Err;constructor(e,t){if(!(e in sn))throw new Error("Wrong variant : should be CairoResultVariant.Ok or .Err.");0===e?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(void 0!==this.Ok)return this.Ok;if(void 0!==this.Err)return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!(void 0===this.Ok)}isErr(){return!(void 0===this.Err)}},cn=(e,t,n)=>{if(!Ve(e[n]))throw new Error(`Data and formatter mismatch on ${n}:${t[n]}, expected response data ${n}:${e[n]} to be BN instead it is ${typeof e[n]}`)};function dn(e,t,n){return Object.entries(e).reduce(((r,[a,i])=>{const s=n??t[a];if(!(a in t)&&!n)return r[a]=i,r;if("string"===s){if(Array.isArray(e[a])){const t=dn(e[a],e[a].map((e=>s)));return r[a]=Object.values(t).join(""),r}return cn(e,t,a),r[a]=pt(i),r}if("number"===s)return cn(e,t,a),r[a]=Number(i),r;if("function"==typeof s)return r[a]=s(i),r;if(Array.isArray(s)){const t=dn(e[a],s,s[0]);return r[a]=Object.values(t),r}return"object"==typeof s?(r[a]=dn(e[a],s),r):(((e,t,n)=>{throw new Error(`Unhandled formatter type on ${n}:${t[n]} for data ${n}:${e[n]}`)})(e,t,a),r)}),{})}function ln(e,t,n){return"constructor"===e&&!n&&!t.length}function un(e,t,n){for(let r=0,a=0;r<e.length;r++)if(e[r]===t)a++;else if(e[r]===n&&0==--a)return r;return Number.POSITIVE_INFINITY}function hn(e){return Yt(e)?function(e){const t=e.slice(1,-1),n=[];let r,a=0;for(;a<t.length;){switch(!0){case"("===t[a]:r=a+un(t.slice(a),"(",")")+1;break;case t.startsWith("core::result::Result::<",a)||t.startsWith("core::array::Array::<",a)||t.startsWith("core::option::Option::<",a):r=a+un(t.slice(a),"<",">")+1;break;default:{const e=t.indexOf(",",a);r=-1!==e?e:Number.POSITIVE_INFINITY}}n.push(t.slice(a,r)),a=r+2}return n}(e):function(e){const t=e.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=function(e){if(!e.includes("("))return{subTuple:[],result:e};const t=[];let n="",r=0;for(;r<e.length;){if("("===e[r]){let a=1;const i=r;for(r++;a;)")"===e[r]&&a--,"("===e[r]&&a++,r++;t.push(e.substring(i,r)),n+=" ",r--}else n+=e[r];r++}return{subTuple:t,result:n}}(t);let a=r.split(",").map((e=>n.length?e.replace(" ",n.shift()):e));return Bt(e)&&(a=a.reduce(((e,t)=>e.concat(function(e){const t=e.substring(0,e.indexOf(":"));return{name:t,type:e.substring(t.length+1)}}(t))),[])),a}(e)}function pn(e,t){switch(!0){case Tt.isAbiType(e):return new Tt(t).toApiRequest();case St.isAbiType(e):return new St(t).toApiRequest();case Kt(e):return ht(t.toString());case Gt(e):{const e=q(Re(t)).padStart(128,"0"),n=Jt(X(e.slice(-64))),r=Jt(X(e.slice(0,-64)));return[tn(r.low),tn(r.high),tn(n.low),tn(n.high)]}default:return tn(t)}}function fn(e,t,n,r){if(void 0===e)throw Error(`Missing parameter for type ${t}`);if(Array.isArray(e)){const a=[];a.push(tn(e.length));const i=qt(t);return e.reduce(((e,t)=>e.concat(fn(t,i,n,r))),a)}if(n[t]&&n[t].members.length){if(Tt.isAbiType(t))return new Tt(e).toApiRequest();if(St.isAbiType(t))return new St(e).toApiRequest();if("core::starknet::eth_address::EthAddress"===t)return pn(t,e);if("core::byte_array::ByteArray"===t)return function(e){const t=gt(e);return[t.data.length.toString(),...t.data.map((e=>e.toString())),t.pending_word.toString(),t.pending_word_len.toString()]}(e);const{members:a}=n[t],i=e;return a.reduce(((e,t)=>e.concat(fn(i[t.name],t.type,n,r))),[])}if(Ot(t)){const a=function(e,t){const n=hn(t),r=Object.values(e);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.\n      provided: ${r} \n      expected: ${n}`);return n.map(((e,t)=>({element:r[t],type:e.type??e})))}(e,t);return a.reduce(((e,t)=>{const a=fn(t.element,t.type,n,r);return e.concat(a)}),[])}if(Tt.isAbiType(t))return new Tt(e).toApiRequest();if(St.isAbiType(t))return new St(e).toApiRequest();if(Mt(t,r)){const{variants:a}=r[t];if(Vt(t)){const t=e;if(t.isSome()){const e=a.find((e=>"Some"===e.name));if(void 0===e)throw Error("Error in abi : Option has no 'Some' variant.");const i=e.type;if("()"===i)return(0).toString();const s=fn(t.unwrap(),i,n,r);return Array.isArray(s)?[(0).toString(),...s]:[(0).toString(),s]}return 1..toString()}if(Rt(t)){const t=e;if(t.isOk()){const e=a.find((e=>"Ok"===e.name));if(void 0===e)throw Error("Error in abi : Result has no 'Ok' variant.");const i=e.type;if("()"===i)return(0).toString();const s=fn(t.unwrap(),i,n,r);return Array.isArray(s)?[(0).toString(),...s]:[(0).toString(),s]}const i=a.find((e=>"Err"===e.name));if(void 0===i)throw Error("Error in abi : Result has no 'Err' variant.");const s=i.type;if("()"===s)return 1..toString();const o=fn(t.unwrap(),s,n,r);return Array.isArray(o)?[1..toString(),...o]:[1..toString(),o]}const i=e,s=i.activeVariant(),o=a.find((e=>e.name===s));if(void 0===o)throw Error(`Not find in abi : Enum has no '${s}' variant.`);const c=o.type,d=a.findIndex((e=>e.name===s));if("()"===c)return d.toString();const l=fn(i.unwrap(),c,n,r);return Array.isArray(l)?[d.toString(),...l]:[d.toString(),l]}if(zt(t))return pn(qt(t),e);if("object"==typeof e)throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return pn(t,e)}function gn(e,t){let n;switch(!0){case Ut(e):return n=t.next().value,Boolean(BigInt(n));case Tt.isAbiType(e):const r=t.next().value,a=t.next().value;return new Tt(r,a).toBigInt();case St.isAbiType(e):const i=t.next().value,s=t.next().value,o=t.next().value,c=t.next().value;return new St(i,s,o,c).toBigInt();case"core::starknet::eth_address::EthAddress"===e:return n=t.next().value,BigInt(n);case"core::bytes_31::bytes31"===e:return n=t.next().value,pt(n);case Gt(e):const d=q(t.next().value).padStart(32,"0"),l=q(t.next().value).padStart(32,"0"),u=q(t.next().value).padStart(32,"0"),h=q(t.next().value).padStart(32,"0");return BigInt(X(l+d+h+u));default:return n=t.next().value,BigInt(n)}}function yn(e,t,n,r){if("()"===t.type)return{};if(Tt.isAbiType(t.type)){const t=e.next().value,n=e.next().value;return new Tt(t,n).toBigInt()}if(St.isAbiType(t.type)){const t=e.next().value,n=e.next().value,r=e.next().value,a=e.next().value;return new St(t,n,r,a).toBigInt()}if(Wt(t.type)){const t=[],n=BigInt(e.next().value);for(;t.length<n;)t.push(Re(e.next().value));return ft({data:t,pending_word:Re(e.next().value),pending_word_len:BigInt(e.next().value)})}if(Dt(t.type)){const a=[],i={name:"",type:qt(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(yn(e,i,n,r));return a}if(zt(t.type)){const a={name:"",type:qt(t.type)};return yn(e,a,n,r)}if(n&&t.type in n&&n[t.type])return"core::starknet::eth_address::EthAddress"===t.type?gn(t.type,e):n[t.type].members.reduce(((t,a)=>(t[a.name]=yn(e,a,n,r),t)),{});if(r&&t.type in r&&r[t.type]){const a=Number(e.next().value),i=r[t.type].variants.reduce(((t,i,s)=>s===a?(t[i.name]=yn(e,{name:"",type:i.type},n,r),t):(t[i.name]=void 0,t)),{});if(t.type.startsWith("core::option::Option")){const e=0===a?i.Some:void 0;return new an(a,e)}if(t.type.startsWith("core::result::Result")){let e;return e=0===a?i.Ok:i.Err,new on(a,e)}return new nn(i)}if(Ot(t.type))return hn(t.type).reduce(((t,a,i)=>{const s=a?.name?a.name:i,o={name:s,type:a?.type?a.type:a};return t[s]=yn(e,o,n,r),t}),{});if(Dt(t.type)){const a=[],i={name:"",type:qt(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(yn(e,i,n,r));return a}return gn(t.type,e)}function mn(e,t,n,r,a){const{name:i,type:s}=t;let o;switch(!0){case Nt(i):return o=e.next().value,BigInt(o);case n&&s in n||Ot(s):case r&&Mt(s,r):return yn(e,t,n,r);case Dt(s):if(Yt(s))return yn(e,t,n,r);const c=[];if(a&&a[`${i}_len`]){const s=a[`${i}_len`];for(;c.length<s;)c.push(yn(e,{name:i,type:t.type.replace("*","")},n,r))}return c;case zt(s):return yn(e,t,n,r);default:return gn(s,e)}}var _n=(e,t)=>{if(Be(ot(e)||Je(e)||Ve(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),ot(e)&&!Pe(e))return;const n=BigInt(e.toString(10));Be(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},bn=(e,t)=>{let n;switch(Je(e)&&Be(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is to large to be typed as Number use (BigInt or String)"),Be(ot(e)||Je(e)||Ve(e)||"object"==typeof e&&"low"in e&&"high"in e||"object"==typeof e&&["limb0","limb1","limb2","limb3"].every((t=>t in e)),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`),t.type){case"core::integer::u256":n=new Tt(e).toBigInt();break;case"core::integer::u512":n=new St(e).toBigInt();break;default:n=Me(e)}switch(t.type){case"core::integer::u8":Be(n>=0n&&n<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case"core::integer::u16":Be(n>=0n&&n<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case"core::integer::u32":Be(n>=0n&&n<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case"core::integer::u64":Be(n>=0n&&n<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case"core::integer::u128":Be(n>=0n&&n<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case"core::integer::u256":Be(n>=0n&&n<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} 0 - 2^256-1`);break;case"core::integer::u512":Be(St.is(n),`Validate: arg ${t.name} is ${t.type} 0 - 2^512-1`);break;case"core::starknet::class_hash::ClassHash":case"core::starknet::contract_address::ContractAddress":Be(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case"core::starknet::secp256k1::Secp256k1Point":Be(n>=0n&&n<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`)}},En=(e,t)=>{Be(Qe(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},An=(e,t,n)=>{if("core::integer::u256"!==t.type&&"core::integer::u512"!==t.type)if("core::starknet::eth_address::EthAddress"!==t.type)Be("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as js object (not array)`),n[t.type].members.forEach((({name:n})=>{Be(Object.keys(e).includes(n),`Validate: arg ${t.name} should have a property ${n}`)}));else{Be("object"!=typeof e,`EthAddress type is waiting a BigNumberish. Got ${e}`);const n=BigInt(e.toString(10));Be(n>=0n&&n<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`)}else bn(e,t)},vn=(e,t)=>{Be("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),r=[...Object.getOwnPropertyNames(e),...n];if(!(Vt(t.type)&&r.includes("isSome")&&r.includes("isNone")||Rt(t.type)&&r.includes("isOk")&&r.includes("isErr")||r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received ${e}, is not an Enum.`)},wn=(e,t)=>{Be("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},Tn=(e,t,n,r)=>{const a=qt(t.type);if(!xt(a)||!lt(e))switch(Be(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),!0){case xt(a):e.forEach((e=>_n(e,t)));break;case Ot(a):e.forEach((e=>wn(e,{name:t.name,type:a})));break;case Dt(a):e.forEach((e=>Tn(e,{name:"",type:a},n,r)));break;case Pt(a,n):e.forEach((e=>An(e,{name:t.name,type:a},n)));break;case Mt(a,r):e.forEach((e=>vn(e,{name:t.name,type:a})));break;case Lt(a)||Ht(a):e.forEach((e=>bn(e,{name:"",type:a})));break;case Ut(a):e.forEach((e=>En(e,t)));break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${e}`)}};function kn(e,t,n,r){e.inputs.reduce(((e,a)=>{const i=t[e];switch(!0){case Nt(a.name):return e;case xt(a.type):_n(i,a);break;case Kt(a.type):((e,t)=>{Be(ot(e),`Validate: arg ${t.name} should be a string.`),Be(e.length<32,`Validate: arg ${t.name} cairo typed ${t.type} should be a string of less than 32 characters.`)})(i,a);break;case Lt(a.type)||Ht(a.type):bn(i,a);break;case Ut(a.type):En(i,a);break;case Wt(a.type):((e,t)=>{Be(ot(e),`Validate: arg ${t.name} should be a string.`)})(i,a);break;case Dt(a.type):Tn(i,a,n,r);break;case Pt(a.type,n):An(i,a,n);break;case Mt(a.type,r):vn(i,a);break;case Ot(a.type):wn(i,a);break;case zt(a.type):((e,t)=>{const n=qt(t.type);switch(Be(Lt(n)&&n!==St.abiSelector||xt(n),`Validate: ${t.name} type is not authorized for NonZero type.`),!0){case xt(n):_n(e,t),Be(BigInt(e.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case Lt(n):bn(e,{name:"",type:n}),"core::integer::u256"===t.type?Be(new Tt(e).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):Be(Me(e)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${e}`)}})(i,a);break;default:throw new Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value ${i}`)}return e+1}),0)}var In=class e{abi;parser;structs;enums;constructor(t){this.structs=e.getAbiStruct(t),this.enums=e.getAbiEnum(t),this.parser=function(e){const t=function(e){return e.find((e=>"interface"===e.type))?2:Xt(e)?1:0}(e);if(0===t||1===t)return new class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.reduce(((e,t)=>Nt(t.name)?e:e+1),0)}getMethod(e){return this.abi.find((t=>t.name===e))}getLegacyFormat(){return this.abi}}(e);if(2===t)return new class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.length}getMethod(e){return this.abi.find((e=>"interface"===e.type)).items.find((t=>t.name===e))}getLegacyFormat(){return this.abi.flatMap((e=>"interface"===e.type?e.items:e))}}(e);throw Error(`Unsupported ABI version ${t}`)}(t),this.abi=this.parser.getLegacyFormat()}validate(e,t,n=[]){"DEPLOY"!==e&&Be(this.abi.filter((t=>{if("function"!==t.type)return!1;const n="view"===t.stateMutability||"view"===t.state_mutability;return"INVOKE"===e?!n:n})).map((e=>e.name)).includes(t),("INVOKE"===e?"invocable":"viewable")+" method not found in abi");const r=this.abi.find((n=>"DEPLOY"===e?n.name===t&&"constructor"===n.type:n.name===t&&"function"===n.type));if(ln(t,n,r))return;const a=this.parser.methodInputsLength(r);if(n.length!==a)throw Error(`Invalid number of arguments, expected ${a} arguments, but got ${n.length}`);kn(r,n,this.structs,this.enums)}compile(e,t){const n=this.abi.find((t=>t.name===e));if(ln(e,t,n))return[];let r;if(Array.isArray(t))r=t;else{const e=function(e,t,n,r){const a=(e,t)=>{if(Dt(t))return function(e,t){const n=qt(t);return ot(e)?e:e.map((e=>a(e,n)))}(e,t);if(Mt(t,r)){const n=r[t];return s(e,n)}if(Ot(t))return function(e,t){const n=hn(t).reduce(((t,n,r)=>{const i=Object.keys(e),s=n?.type?n.type:n;return o=a(e[i[r]],s),Object.defineProperty(t,r.toString(),{enumerable:!0,value:o??e[i[r]]}),t;var o}),{});return n}(e,t);if(jt(t))return e;if(zt(t))return e;if(Wt(t))return e;if(Gt(t))return e;if(Tt.isAbiType(t)){const n=e;if("object"!=typeof n)return n;if(!("low"in n)||!("high"in n))throw Error(`Your object includes the property : ${t}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:n.low,high:n.high}}if(St.isAbiType(t)){const n=e;if("object"!=typeof n)return n;if(!["limb0","limb1","limb2","limb3"].every((e=>e in n)))throw Error(`Your object includes the property : ${t}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:n.limb0,limb1:n.limb1,limb2:n.limb2,limb3:n.limb3}}if(Pt(t,n)){const r=n[t].members;return i(e,r)}return e},i=(e,t)=>t.reduce(((t,n)=>{if("undefined"===e[n.name]&&(Yt(n.type)||!Nt(n.name)))throw Error(`Your object needs a property with key : ${n.name} .`);var r;return r=a(e[n.name],n.type),Object.defineProperty(t,n.name,{enumerable:!0,value:r??e[n.name]}),t}),{}),s=(e,t)=>{if(Rt(t.name)){const n=e,r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),i=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return n.isOk()?new on(0,a(e.unwrap(),r)):new on(1,a(e.unwrap(),i))}if(Vt(t.name)){const n=e,r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return n.isSome()?new an(0,a(n.unwrap(),r)):new an(1,{})}const n=e,r=Object.entries(n.variant).map((e=>{if(void 0===e[1])return e;const r=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===r?e:[e[0],a(n.unwrap(),r)]}));return new nn(Object.fromEntries(r))};return t.reduce(((t,n)=>{return Nt(n.name)&&!Yt(n.type)||(r=a(e[n.name],n.type),Object.defineProperty(t,n.name,{enumerable:!0,value:r})),t;var r}),{})}(t,n.inputs,this.structs,this.enums);r=Object.values(e),kn(n,r,this.structs,this.enums)}const a=r[Symbol.iterator](),i=n.inputs.reduce(((e,t)=>Nt(t.name)&&!Yt(t.type)?e:e.concat(function(e,t,n,r){const{name:a,type:i}=t;let{value:s}=e.next();switch(!0){case Dt(i):if(!Array.isArray(s)&&!ct(s))throw Error(`ABI expected parameter ${a} to be array or long string, got ${s}`);return ot(s)&&(s=ut(s)),fn(s,t.type,n,r);case zt(i):return pn(qt(i),s);case"core::starknet::eth_address::EthAddress"===i:return pn(i,s);case Pt(i,n)||Ot(i)||Tt.isAbiType(i)||Tt.isAbiType(i):case Mt(i,r):return fn(s,i,n,r);default:return pn(i,s)}}(a,t,this.structs,this.enums))),[]);return Object.defineProperty(i,"__compiled__",{enumerable:!1,writable:!1,value:!0}),i}static compile(e){const t=e=>{const t=(e,n=".")=>{const r=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(r).flatMap((([e,a])=>{let i=a;"entrypoint"===e?i=nt(i):lt(i)&&(i=gt(i));const s=Array.isArray(r)&&"0"===e?"$$len":e;if(Ve(i))return[[`${n}${s}`,tn(i)]];if(Object(i)===i){const e=Object.getOwnPropertyNames(Object.getPrototypeOf(i)),r=[...Object.getOwnPropertyNames(i),...e];if(r.includes("isSome")&&r.includes("isNone")){const e=i,r=e.isSome()?0:1;return e.isSome()?t({0:r,1:e.unwrap()},`${n}${s}.`):[[`${n}${s}`,tn(r)]]}if(r.includes("isOk")&&r.includes("isErr")){const e=i,r=e.isOk()?0:1;return t({0:r,1:e.unwrap()},`${n}${s}.`)}if(r.includes("variant")&&r.includes("activeVariant")){const e=i,r=e.activeVariant(),a=Object.keys(e.variant).findIndex((e=>e===r));return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[[`${n}${s}`,tn(a)]]:t({0:a,1:e.unwrap()},`${n}${s}.`)}return t(i,`${n}${s}.`)}return[[`${n}${s}`,tn(i)]]}))};return Object.fromEntries(t(e))};let n;if(Array.isArray(e)){const r=t({...e});n=Object.values(r)}else{const r=t(e);n=Object.values(r)}return Object.defineProperty(n,"__compiled__",{enumerable:!1,writable:!1,value:!0}),n}parse(e,t){const{outputs:n}=this.abi.find((t=>t.name===e)),r=t.flat()[Symbol.iterator](),a=n.flat().reduce(((e,t,n)=>{const a=t.name??n;return e[a]=mn(r,t,this.structs,this.enums,e),e[a]&&e[`${a}_len`]&&delete e[`${a}_len`],e}),{});return 1===Object.keys(a).length&&0 in a?a[0]:a}format(e,t,n){return dn(this.parse(e,t),n)}static getAbiStruct(e){return e.filter((e=>"struct"===e.type)).reduce(((e,t)=>({...e,[t.name]:t})),{})}static getAbiEnum(e){const t=e.filter((e=>"enum"===e.type)).reduce(((e,t)=>({...e,[t.name]:t})),{});return delete t["core::bool"],t}static toCalldata(t=[]){return e.compile(t)}static toHex(t=[]){return e.compile(t).map((e=>Re(e)))}decodeParameters(e,t){const n=Array.isArray(e)?e:[e],r=t.flat()[Symbol.iterator](),a=n.map((e=>mn(r,{name:"",type:e},this.structs,this.enums)));return 1===a.length?a[0]:a}};function Cn(e){return[...e,e.length].reduce(((e,t)=>d.pedersen(Me(e),Me(t))),0).toString()}function Sn(e,t,n,r,a,i,s,o=[]){const c=Cn(a);return Cn([e,t,n,r,c,i,s,...o])}function Nn(e,t,n,r,a,i,s){return Sn("0x6465636c617265",n,t,0,[e],r,a,[i,...s?[s]:[]])}function xn(e,t,n,r,a,i,s,o){return Sn("0x6465706c6f795f6163636f756e74",a,e,0,[t,r,...n],i,s,[o])}function Dn(e,t,n,r,a,i){return Sn("0x696e766f6b65",t,e,0,n,r,a,[i])}v({},{calculateContractAddressFromHash:()=>rr,calculateDeclareTransactionHash:()=>Wn,calculateDeployAccountTransactionHash:()=>Gn,calculateInvokeTransactionHash:()=>Kn,computeCompiledClassHash:()=>lr,computeContractClassHash:()=>pr,computeHashOnElements:()=>er,computeHintedClassHash:()=>sr,computeLegacyContractClassHash:()=>or,computePedersenHash:()=>Jn,computePedersenHashOnElements:()=>tr,computePoseidonHash:()=>Qn,computePoseidonHashOnElements:()=>nr,computeSierraContractClassHash:()=>hr,formatSpaces:()=>ir,getSelector:()=>rt,getSelectorFromName:()=>nt,hashByteCodeSegments:()=>dr,keccakBn:()=>et,poseidon:()=>l,starknetKeccak:()=>tt}),v({},{calculateDeclareTransactionHash:()=>Nn,calculateDeployAccountTransactionHash:()=>xn,calculateTransactionHash:()=>Dn,calculateTransactionHashCommon:()=>Sn,computeHashOnElements:()=>Cn}),v({},{starkCurve:()=>d,weierstrass:()=>u}),v({},{calculateDeclareTransactionHash:()=>Fn,calculateDeployAccountTransactionHash:()=>Un,calculateInvokeTransactionHash:()=>jn,calculateTransactionHashCommon:()=>Hn,hashDAMode:()=>Ln,hashFeeField:()=>$n});var On=e=>e.map((e=>BigInt(e))),Bn=32n,Pn=128n,Mn=64n+Pn,Vn=BigInt(ht("L1_GAS")),Rn=BigInt(ht("L2_GAS"));function Ln(e,t){return(BigInt(e)<<Bn)+BigInt(t)}function $n(e,t){const n=(Vn<<Mn)+(BigInt(t.l1_gas.max_amount)<<Pn)+BigInt(t.l1_gas.max_price_per_unit),r=(Rn<<Mn)+(BigInt(t.l2_gas.max_amount)<<Pn)+BigInt(t.l2_gas.max_price_per_unit);return(0,d.poseidonHashMany)([BigInt(e),n,r])}function Hn(e,t,n,r,a,i,s,o,c,l,u=[]){const h=$n(i,l),p=Ln(o,c),f=On([e,t,n,h,(0,d.poseidonHashMany)(On(s)),r,a,p,...On(u)]);return Re((0,d.poseidonHashMany)(f))}function Un(e,t,n,r,a,i,s,o,c,l,u,h){return Hn("0x6465706c6f795f6163636f756e74",a,e,i,s,u,h,o,c,l,[(0,d.poseidonHashMany)(On(n)),t,r])}function Fn(e,t,n,r,a,i,s,o,c,l,u,h){return Hn("0x6465636c617265",r,n,a,i,u,On(h),o,c,l,[(0,d.poseidonHashMany)(On(s)),e,t])}function jn(e,t,n,r,a,i,s,o,c,l,u){return Hn("0x696e766f6b65",t,e,r,a,l,u,s,o,c,[(0,d.poseidonHashMany)(On(i)),(0,d.poseidonHashMany)(On(n))])}function Kn(e){return function(e){return[T.ETransactionVersion.V3,T.ETransactionVersion.F3].includes(e.version)}(e)?jn(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):Dn(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function Wn(e){return function(e){return[T.ETransactionVersion.V3,T.ETransactionVersion.F3].includes(e.version)}(e)?Fn(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):Nn(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function Gn(e){return function(e){return[T.ETransactionVersion.V3,T.ETransactionVersion.F3].includes(e.version)}(e)?Un(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):xn(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}v({},{parse:()=>qn,parseAlwaysAsBig:()=>Xn,stringify:()=>zn,stringifyAlwaysAsBig:()=>Zn});var Yn=e=>{if(!h.U(e))return parseFloat(e);const t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},qn=e=>h.Qc(String(e),void 0,Yn),Xn=e=>h.Qc(String(e),void 0,h.A7),zn=(e,t,n,r)=>h.Pz(e,t,n,r),Zn=zn;function Jn(e,t){return d.pedersen(BigInt(e),BigInt(t))}function Qn(e,t){return Re(d.poseidonHash(BigInt(e),BigInt(t)))}function er(e){return[...e,e.length].reduce(((e,t)=>d.pedersen(BigInt(e),BigInt(t))),0).toString()}var tr=er;function nr(e){return Re((0,d.poseidonHashMany)(e.map((e=>BigInt(e)))))}function rr(e,t,n,r){const a=er(In.compile(n)),i=er([tn("0x535441524b4e45545f434f4e54524143545f41444452455353"),r,e,t,a]);return Re(BigInt(i)%oe)}function ar(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function ir(e){let t=!1;const n=[];for(const r of e)'"'===r&&0==(n.length>0&&"\\"===n.slice(-1)[0])&&(t=!t),t?n.push(r):n.push(":"===r?": ":","===r?", ":r);return n.join("")}function sr(e){const{abi:t,program:n}=e,r=ir(zn({abi:t,program:n},ar));return X(d.keccak(j(r)).toString(16))}function or(e){const t=ot(e)?qn(e):e,n=Re(ae),r=er(t.entry_points_by_type.EXTERNAL.flatMap((e=>[e.selector,e.offset]))),a=er(t.entry_points_by_type.L1_HANDLER.flatMap((e=>[e.selector,e.offset]))),i=er(t.entry_points_by_type.CONSTRUCTOR.flatMap((e=>[e.selector,e.offset]))),s=er(t.program.builtins.map((e=>ht(e)))),o=sr(t),c=er(t.program.data);return er([n,r,a,i,s,o,c])}function cr(e){const t=e.flatMap((e=>{return[BigInt(e.selector),BigInt(e.offset),(t=e.builtins,(0,d.poseidonHashMany)(t.flatMap((e=>BigInt(ht(e))))))];var t}));return(0,d.poseidonHashMany)(t)}function dr(e){const t=e.bytecode.map((e=>BigInt(e))),n=e.bytecode_segment_lengths??[];let r=0;const a=n.flatMap((e=>{const n=t.slice(r,r+=e);return[BigInt(e),(0,d.poseidonHashMany)(n)]}));return 1n+(0,d.poseidonHashMany)(a)}function lr(e){const t=BigInt(ht("COMPILED_CLASS_V1")),n=cr(e.entry_points_by_type.EXTERNAL),r=cr(e.entry_points_by_type.L1_HANDLER),a=cr(e.entry_points_by_type.CONSTRUCTOR),i=e.bytecode_segment_lengths?dr(e):(0,d.poseidonHashMany)(e.bytecode.map((e=>BigInt(e))));return Re((0,d.poseidonHashMany)([t,n,r,a,i]))}function ur(e){const t=e.flatMap((e=>[BigInt(e.selector),BigInt(e.function_idx)]));return(0,d.poseidonHashMany)(t)}function hr(e){const t=BigInt(ht("CONTRACT_CLASS_V0.1.0")),n=ur(e.entry_points_by_type.EXTERNAL),r=ur(e.entry_points_by_type.L1_HANDLER),a=ur(e.entry_points_by_type.CONSTRUCTOR),i=function(e){const t=ir(zn(e.abi,null));return BigInt(X(d.keccak(j(t)).toString(16)))}(e),s=(0,d.poseidonHashMany)(e.sierra_program.map((e=>BigInt(e))));return Re((0,d.poseidonHashMany)([t,n,r,a,i,s]))}function pr(e){const t=ot(e)?qn(e):e;return"sierra_program"in t?hr(t):or(t)}function fr(e){const t=ot(e)?e:zn(e);return G((0,p.iv)(t))}function gr(e){if(Array.isArray(e))return e;const t=F((0,p.ec)(W(e)));return qn(t)}function yr(){const e=d.utils.randomPrivateKey();return(0,d.getStarkKey)(e)}function mr(e){return X(e).toLowerCase()}function _r(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map((e=>Re(e)));try{const{r:t,s:n}=e;return[Re(t),Re(n)]}catch(e){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function br(e){return je(_r(e))}function Er(e){return Ke(_r(e))}function Ar(e,t=50){return Ze(e,t)}function vr(e,t=50,n=50){if(Ve(e))return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}};if(void 0===e.gas_consumed||void 0===e.gas_price)throw Error("estimateFeeToBounds: estimate is undefined");return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:void 0!==e.data_gas_consumed&&void 0!==e.data_gas_price?Re(Ze(BigInt(e.overall_fee)/BigInt(e.gas_price),t)):Re(Ze(e.gas_consumed,t)),max_price_per_unit:Re(Ze(e.gas_price,n))}}}function wr(e){if(e===T.EDataAvailabilityMode.L1)return T.EDAMode.L1;if(e===T.EDataAvailabilityMode.L2)return T.EDAMode.L2;throw Error("EDAM conversion")}function Tr(e,t){const n=t?Re(t):void 0,r=Re(e);if(t&&!Object.values(T.ETransactionVersion).includes(n))throw Error(`providedVersion ${t} is not ETransactionVersion`);if(!Object.values(T.ETransactionVersion).includes(r))throw Error(`defaultVersion ${e} is not ETransactionVersion`);return t?n:r}function kr(e){if(!e)return;const t=Re(e);if(t===T.ETransactionVersion.V0)return T.ETransactionVersion.F0;if(t===T.ETransactionVersion.V1)return T.ETransactionVersion.F1;if(t===T.ETransactionVersion.V2)return T.ETransactionVersion.F2;if(t===T.ETransactionVersion.V3)return T.ETransactionVersion.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function Ir(e){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||T.EDataAvailabilityMode.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||T.EDataAvailabilityMode.L1,resourceBounds:e.resourceBounds??vr(ne)}}function Cr(e){return e===T.ETransactionVersion.F2?T.ETransactionVersion.F1:e===T.ETransactionVersion.V2?T.ETransactionVersion.V1:e}function Sr(e){return"sierra_program"in(ot(e)?qn(e):e)}function Nr(){return Q(Y(f.kA.utils.randomPrivateKey()))}function xr(e){Fe(e,ne,2n**160n-1n,"Ethereum Address ");const t=X(q(Re(e)).padStart(40,"0"));return Be(Boolean(t.match(/^(0x)?[0-9a-f]{40}$/)),"Invalid Ethereum Address Format"),t}v({},{compressProgram:()=>fr,decompressProgram:()=>gr,estimateFeeToBounds:()=>vr,estimatedFeeToMaxFee:()=>Ar,formatSignature:()=>_r,intDAM:()=>wr,makeAddress:()=>mr,randomAddress:()=>yr,reduceV2:()=>Cr,signatureToDecimalArray:()=>br,signatureToHexArray:()=>Er,toFeeVersion:()=>kr,toTransactionVersion:()=>Tr,v3Details:()=>Ir}),v({},{ethRandomPrivateKey:()=>Nr,validateAndParseEthAddress:()=>xr});var Dr="undefined"!=typeof window&&window.fetch||"undefined"!=typeof global&&(0,g.Z)(global.fetch)||y;function Or(e){return new Promise((t=>{setTimeout(t,e)}))}function Br(e){const t={...e};return delete t.sierra_program_debug_info,t.abi=ir(zn(e.abi)),t.sierra_program=ir(zn(e.sierra_program)),t.sierra_program=fr(t.sierra_program),t}function Pr(e){const t=ot(e)?qn(e):e;return Sr(e)?Br(t):{...t,..."program"in t&&{program:fr(t.program)}}}v({},{Block:()=>Rr,createSierraContractClass:()=>Br,getDefaultNodeUrl:()=>Mr,isPendingBlock:()=>Hr,isPendingStateUpdate:()=>Fr,isPendingTransaction:()=>Ur,isV3Tx:()=>Lr,isVersion:()=>$r,parseContract:()=>Pr,validBlockTags:()=>Vr,wait:()=>Or});var Mr=(e,t=!1)=>{t||console.warn("Using default public node url, please provide nodeUrl in provider options!");const n=be[e??"SN_SEPOLIA"];return n[Math.floor(Math.random()*n.length)]},Vr=Object.values(Oe),Rr=class{hash=null;number=null;tag=null;setIdentifier(e){if(ot(e))if(st(e))this.number=parseInt(e,10);else if(Pe(e))this.hash=e;else{if(!Vr.includes(e))throw TypeError(`Block identifier unmanaged: ${e}`);this.tag=e}else Ve(e)?this.hash=Re(e):Je(e)?this.number=e:this.tag="pending";if(Je(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(e){this.setIdentifier(e)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}valueOf=()=>this.number;toString=()=>this.hash};function Lr(e){const t=e.version?Re(e.version):T.ETransactionVersion.V3;return t===T.ETransactionVersion.V3||t===T.ETransactionVersion.F3}function $r(e,t){const[n,r]=e.split("."),[a,i]=t.split(".");return n===a&&r===i}function Hr(e){return"PENDING"===e.status}function Ur(e){return!("block_hash"in e)}function Fr(e){return!("block_hash"in e)}v({},{buildUDCCall:()=>Xr,fromCallsToExecuteCalldata:()=>Kr,fromCallsToExecuteCalldataWithNonce:()=>Wr,fromCallsToExecuteCalldata_cairo1:()=>Yr,getExecuteCalldata:()=>qr,getVersionsByType:()=>zr,transformCallsToMulticallArrays:()=>jr,transformCallsToMulticallArrays_cairo1:()=>Gr});var jr=e=>{const t=[],n=[];return e.forEach((e=>{const r=In.compile(e.calldata||[]);t.push({to:Me(e.contractAddress).toString(10),selector:Me(nt(e.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:r.length.toString()}),n.push(...r)})),{callArray:t,calldata:In.compile({calldata:n})}},Kr=e=>{const{callArray:t,calldata:n}=jr(e);return[...In.compile({callArray:t}),...n]},Wr=(e,t)=>[...Kr(e),Me(t).toString()],Gr=e=>e.map((e=>({to:Me(e.contractAddress).toString(10),selector:Me(nt(e.entrypoint)).toString(10),calldata:In.compile(e.calldata||[])}))),Yr=e=>{const t=e.map((e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:In.compile(e.calldata)})));return In.compile({orderCalls:t})},qr=(e,t="0")=>"1"===t?Yr(e):Kr(e);function Xr(e,t){const n=[].concat(e).map((e=>{const{classHash:n,salt:r,unique:a=!0,constructorCalldata:i=[]}=e,s=In.compile(i),o=r??yr();return{call:{contractAddress:me.ADDRESS,entrypoint:me.ENTRYPOINT,calldata:[n,o,Xe(a),s.length,...s]},address:rr(a?d.pedersen(t,o):o,n,s,a?me.ADDRESS:0)}}));return{calls:n.map((e=>e.call)),addresses:n.map((e=>e.address))}}function zr(e){return"fee"===e?{v1:T.ETransactionVersion.F1,v2:T.ETransactionVersion.F2,v3:T.ETransactionVersion.F3}:{v1:T.ETransactionVersion.V1,v2:T.ETransactionVersion.V2,v3:T.ETransactionVersion.V3}}var Zr={"Content-Type":"application/json"},Jr=class{nodeUrl;headers;retries;requestId;blockIdentifier;chainId;specVersion;waitMode;constructor(e){const{nodeUrl:t,retries:n,headers:r,blockIdentifier:a,chainId:i,specVersion:s,waitMode:o}=e||{};Object.values(pe).includes(t)?this.nodeUrl=Mr(t,e?.default):this.nodeUrl=t||Mr(void 0,e?.default),this.retries=n||200,this.headers={...Zr,...r},this.blockIdentifier=a||"pending",this.chainId=i,this.specVersion=s,this.waitMode=o||!1,this.requestId=0}setChainId(e){this.chainId=e}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return Dr(this.nodeUrl,{method:"POST",body:zn(r),headers:this.headers})}errorHandler(e,t,n,r){if(n){const{code:r,message:a,data:i}=n;throw new ve(`RPC: ${e} with params ${zn(t,null,2)}\n\n        ${r}: ${a}: ${zn(i)}`)}if(r instanceof ve)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{const n=await this.fetch(e,t,this.requestId+=1),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}async getSpecVersion(){return this.specVersion??=await this.fetchEndpoint("starknet_specVersion"),this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){const n=Re(e),r=new Rr(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new Rr(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new Rr(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new Rr(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new Rr(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new Rr(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=Re(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const n=new Rr(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){const t=Re(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=Re(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=Re(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:a=!0}=t,i=new Rr(n).identifier,s=[];return r&&s.push(I.ESimulationFlag.SKIP_VALIDATE),a&&s.push(I.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map((e=>this.buildTransaction(e))),simulation_flags:s})}async waitForTransaction(e,t){const n=Re(e);let{retries:r}=this,a=!1,i=!1;const s=t?.retryInterval??5e3,o=t?.errorStates??[I.ETransactionStatus.REJECTED],c=t?.successStates??[I.ETransactionExecutionStatus.SUCCEEDED,I.ETransactionStatus.ACCEPTED_ON_L2,I.ETransactionStatus.ACCEPTED_ON_L1];let d;for(;!a;){await Or(s);try{d=await this.getTransactionStatus(n);const e=d.execution_status,t=d.finality_status;if(!t)throw new Error("waiting for transaction status");if(o.includes(e)||o.includes(t)){const n=`${e}: ${t}`,r=new Error(n);throw r.response=d,i=!0,r}(c.includes(e)||c.includes(t))&&(a=!0)}catch(e){if(e instanceof Error&&i)throw e;if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let l=null;for(;null===l;){try{l=await this.getTransactionReceipt(n)}catch(e){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Or(s)}return l}getStorageAt(e,t,n=this.blockIdentifier){const r=Re(e),a=$e(t),i=new Rr(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){const n=Re(e),r=new Rr(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){const n=Re(e),r=new Rr(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){const n=Re(e),r=new Rr(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}){const r=new Rr(t).identifier;let a={};return $r("0.5",await this.getSpecVersion())||(a={simulation_flags:n?[I.ESimulationFlag.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map((e=>this.buildTransaction(e,"fee"))),block_id:r,...a})}async invoke(e,t){let n;return n=Lr(t)?this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:I.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:In.toHex(e.calldata),version:I.ETransactionVersion.V3,signature:Er(e.signature),nonce:Re(t.nonce),resource_bounds:t.resourceBounds,tip:Re(t.tip),paymaster_data:t.paymasterData.map((e=>Re(e))),account_deployment_data:t.accountDeploymentData.map((e=>Re(e))),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:In.toHex(e.calldata),type:I.ETransactionType.INVOKE,max_fee:Re(t.maxFee||0),version:I.ETransactionVersion.V1,signature:Er(e.signature),nonce:Re(t.nonce)}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},a){let i;if(Sr(e)||Lr(a))if(Sr(e)&&!Lr(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:I.ETransactionType.DECLARE,contract_class:{sierra_program:gr(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:r||"",version:I.ETransactionVersion.V2,max_fee:Re(a.maxFee||0),signature:Er(t),sender_address:n,nonce:Re(a.nonce)}});else{if(!Sr(e)||!Lr(a))throw Error("declare unspotted parameters");i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:I.ETransactionType.DECLARE,sender_address:n,compiled_class_hash:r||"",version:I.ETransactionVersion.V3,signature:Er(t),nonce:Re(a.nonce),contract_class:{sierra_program:gr(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:a.resourceBounds,tip:Re(a.tip),paymaster_data:a.paymasterData.map((e=>Re(e))),account_deployment_data:a.accountDeploymentData.map((e=>Re(e))),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}})}else i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:I.ETransactionType.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:I.ETransactionVersion.V1,max_fee:Re(a.maxFee||0),signature:Er(t),sender_address:n,nonce:Re(a.nonce)}});return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},a){let i;return i=Lr(a)?this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:I.ETransactionType.DEPLOY_ACCOUNT,version:I.ETransactionVersion.V3,signature:Er(r),nonce:Re(a.nonce),contract_address_salt:Re(n||0),constructor_calldata:In.toHex(t||[]),class_hash:Re(e),resource_bounds:a.resourceBounds,tip:Re(a.tip),paymaster_data:a.paymasterData.map((e=>Re(e))),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:In.toHex(t||[]),class_hash:Re(e),contract_address_salt:Re(n||0),type:I.ETransactionType.DEPLOY_ACCOUNT,max_fee:Re(a.maxFee||0),version:I.ETransactionVersion.V1,signature:Er(r),nonce:Re(a.nonce)}}),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){const n=new Rr(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:nt(e.entrypoint),calldata:In.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:a,payload:i}=e,s={from_address:xr(n),to_address:Re(r),entry_point_selector:rt(a),payload:qe(i)},o=new Rr(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const n=zr(t);let r;if(r=Lr(e)?{signature:Er(e.signature),nonce:Re(e.nonce),resource_bounds:e.resourceBounds,tip:Re(e.tip),paymaster_data:e.paymasterData.map((e=>Re(e))),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map((e=>Re(e)))}:{signature:Er(e.signature),nonce:Re(e.nonce),max_fee:Re(e.maxFee||0)},"INVOKE_FUNCTION"===e.type)return{type:I.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:In.toHex(e.calldata),version:Re(e.version||n.v3),...r};if("DECLARE"===e.type)return Sr(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:gr(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:Re(e.version||n.v3),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:Re(e.version||n.v1),...r};if("DEPLOY_ACCOUNT"===e.type){const{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:In.toHex(e.constructorCalldata||[]),class_hash:Re(e.classHash),contract_address_salt:Re(e.addressSalt||0),version:Re(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}};v({},{RpcChannel:()=>ea});var Qr={"Content-Type":"application/json"},ea=class{nodeUrl;headers;retries;requestId;blockIdentifier;chainId;specVersion;transactionRetryIntervalFallback;waitMode;constructor(e){const{nodeUrl:t,retries:n,headers:r,blockIdentifier:a,chainId:i,specVersion:s,waitMode:o,transactionRetryIntervalFallback:c}=e||{};Object.values(pe).includes(t)?this.nodeUrl=Mr(t,e?.default):this.nodeUrl=t||Mr(void 0,e?.default),this.retries=n||200,this.headers={...Qr,...r},this.blockIdentifier=a||"pending",this.chainId=i,this.specVersion=s,this.waitMode=o||!1,this.requestId=0,this.transactionRetryIntervalFallback=c}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return Dr(this.nodeUrl,{method:"POST",body:zn(r),headers:this.headers})}errorHandler(e,t,n,r){if(n){const{code:r,message:a,data:i}=n;throw new ve(`RPC: ${e} with params ${zn(t,null,2)}\n \n        ${r}: ${a}: ${zn(i)}`)}if(r instanceof ve)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{const n=await this.fetch(e,t,this.requestId+=1),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}async getSpecVersion(){return this.specVersion??=await this.fetchEndpoint("starknet_specVersion"),this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){const n=Re(e),r=new Rr(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new Rr(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new Rr(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){const t=new Rr(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new Rr(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new Rr(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new Rr(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=Re(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const n=new Rr(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){const t=Re(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=Re(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=Re(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=t,s=new Rr(n).identifier,o=[];return r&&o.push(a.gZ.SKIP_VALIDATE),i&&o.push(a.gZ.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:e.map((e=>this.buildTransaction(e))),simulation_flags:o})}async waitForTransaction(e,t){const n=Re(e);let{retries:r}=this,i=!1,s=!1;const o=t?.retryInterval??this.transactionRetryIntervalDefault,c=t?.errorStates??[a.zO.REJECTED],d=t?.successStates??[a.y5.SUCCEEDED,a.zO.ACCEPTED_ON_L2,a.zO.ACCEPTED_ON_L1];let l;for(;!i;){await Or(o);try{l=await this.getTransactionStatus(n);const e=l.execution_status,t=l.finality_status;if(!t)throw new Error("waiting for transaction status");if(c.includes(e)||c.includes(t)){const n=`${e}: ${t}`,r=new Error(n);throw r.response=l,s=!0,r}(d.includes(e)||d.includes(t))&&(i=!0)}catch(e){if(e instanceof Error&&s)throw e;if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let u=null;for(;null===u;){try{u=await this.getTransactionReceipt(n)}catch(e){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Or(o)}return u}getStorageAt(e,t,n=this.blockIdentifier){const r=Re(e),a=$e(t),i=new Rr(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){const n=Re(e),r=new Rr(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){const n=Re(e),r=new Rr(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){const n=Re(e),r=new Rr(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}){const r=new Rr(t).identifier;let i={};return $r("0.5",await this.getSpecVersion())||(i={simulation_flags:n?[a.gZ.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map((e=>this.buildTransaction(e,"fee"))),block_id:r,...i})}async invoke(e,t){let n;return n=Lr(t)?this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:a.xz.INVOKE,sender_address:e.contractAddress,calldata:In.toHex(e.calldata),version:a.sF.V3,signature:Er(e.signature),nonce:Re(t.nonce),resource_bounds:t.resourceBounds,tip:Re(t.tip),paymaster_data:t.paymasterData.map((e=>Re(e))),account_deployment_data:t.accountDeploymentData.map((e=>Re(e))),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:In.toHex(e.calldata),type:a.xz.INVOKE,max_fee:Re(t.maxFee||0),version:a.sF.V1,signature:Er(e.signature),nonce:Re(t.nonce)}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},i){let s;if(Sr(e)||Lr(i))if(Sr(e)&&!Lr(i))s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:a.xz.DECLARE,contract_class:{sierra_program:gr(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:r||"",version:a.sF.V2,max_fee:Re(i.maxFee||0),signature:Er(t),sender_address:n,nonce:Re(i.nonce)}});else{if(!Sr(e)||!Lr(i))throw Error("declare unspotted parameters");s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:a.xz.DECLARE,sender_address:n,compiled_class_hash:r||"",version:a.sF.V3,signature:Er(t),nonce:Re(i.nonce),contract_class:{sierra_program:gr(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:i.resourceBounds,tip:Re(i.tip),paymaster_data:i.paymasterData.map((e=>Re(e))),account_deployment_data:i.accountDeploymentData.map((e=>Re(e))),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}})}else s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:a.xz.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:a.sF.V1,max_fee:Re(i.maxFee||0),signature:Er(t),sender_address:n,nonce:Re(i.nonce)}});return this.waitMode?this.waitForTransaction((await s).transaction_hash):s}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},i){let s;return s=Lr(i)?this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:a.xz.DEPLOY_ACCOUNT,version:a.sF.V3,signature:Er(r),nonce:Re(i.nonce),contract_address_salt:Re(n||0),constructor_calldata:In.toHex(t||[]),class_hash:Re(e),resource_bounds:i.resourceBounds,tip:Re(i.tip),paymaster_data:i.paymasterData.map((e=>Re(e))),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:In.toHex(t||[]),class_hash:Re(e),contract_address_salt:Re(n||0),type:a.xz.DEPLOY_ACCOUNT,max_fee:Re(i.maxFee||0),version:a.sF.V1,signature:Er(r),nonce:Re(i.nonce)}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}callContract(e,t=this.blockIdentifier){const n=new Rr(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:nt(e.entrypoint),calldata:In.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:a,payload:i}=e,s={from_address:xr(n),to_address:Re(r),entry_point_selector:rt(a),payload:qe(i)},o=new Rr(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const n=zr(t);let r;if(r=Lr(e)?{signature:Er(e.signature),nonce:Re(e.nonce),resource_bounds:e.resourceBounds,tip:Re(e.tip),paymaster_data:e.paymasterData.map((e=>Re(e))),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map((e=>Re(e)))}:{signature:Er(e.signature),nonce:Re(e.nonce),max_fee:Re(e.maxFee||0)},"INVOKE_FUNCTION"===e.type)return{type:a.xz.INVOKE,sender_address:e.contractAddress,calldata:In.toHex(e.calldata),version:Re(e.version||n.v3),...r};if("DECLARE"===e.type)return Sr(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:gr(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:Re(e.version||n.v3),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:Re(e.version||n.v1),...r};if("DEPLOY_ACCOUNT"===e.type){const{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:In.toHex(e.constructorCalldata||[]),class_hash:Re(e.classHash),contract_address_salt:Re(e.addressSalt||0),version:Re(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},ta=class{margin;constructor(e){this.margin=e}estimatedFeeToMaxFee(e){return Ar(e,this.margin?.maxFee)}estimateFeeToBounds(e){return vr(e,this.margin?.l1BoundMaxAmount,this.margin?.l1BoundMaxPricePerUnit)}parseGetBlockResponse(e){return{status:"PENDING",...e}}parseTransactionReceipt(e){return"actual_fee"in e&&ot(e.actual_fee)?{...e,actual_fee:{amount:e.actual_fee,unit:"FRI"}}:e}parseFeeEstimateResponse(e){const t=e[0];return{overall_fee:Me(t.overall_fee),gas_consumed:Me(t.gas_consumed),gas_price:Me(t.gas_price),unit:t.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t),data_gas_consumed:t.data_gas_consumed?Me(t.data_gas_consumed):0n,data_gas_price:t.data_gas_price?Me(t.data_gas_price):0n}}parseFeeEstimateBulkResponse(e){return e.map((e=>({overall_fee:Me(e.overall_fee),gas_consumed:Me(e.gas_consumed),gas_price:Me(e.gas_price),unit:e.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(e.overall_fee),resourceBounds:this.estimateFeeToBounds(e),data_gas_consumed:e.data_gas_consumed?Me(e.data_gas_consumed):0n,data_gas_price:e.data_gas_price?Me(e.data_gas_price):0n})))}parseSimulateTransactionResponse(e){return e.map((e=>({...e,suggestedMaxFee:this.estimatedFeeToMaxFee(e.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(e.fee_estimation)})))}parseContractClassResponse(e){return{...e,abi:ot(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}},na=class e{statusReceipt;value;constructor(t){[this.statusReceipt,this.value]=e.isSuccess(t)?["success",t]:e.isReverted(t)?["reverted",t]:e.isRejected(t)?["rejected",t]:["error",new Error("Unknown response type")];for(const[e]of Object.entries(this))Object.defineProperty(this,e,{enumerable:!1});for(const[e,n]of Object.entries(t))Object.defineProperty(this,e,{enumerable:!0,writable:!1,value:n})}match(e){return this.statusReceipt in e?e[this.statusReceipt](this.value):e._()}isSuccess(){return"success"===this.statusReceipt}isReverted(){return"reverted"===this.statusReceipt}isRejected(){return"rejected"===this.statusReceipt}isError(){return"error"===this.statusReceipt}static isSuccess(e){return"SUCCEEDED"===e.execution_status}static isReverted(e){return"REVERTED"===e.execution_status}static isRejected(e){return"REJECTED"===e.status}},ra=class{responseParser;channel;constructor(e){e&&"channel"in e?(this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new ta):(this.channel=new ea({...e,waitMode:!1}),this.responseParser=new ta(e?.feeMarginPercentage))}fetch(e,t,n=0){return this.channel.fetch(e,t,n)}async getChainId(){return this.channel.getChainId()}async getSpecVersion(){return this.channel.getSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e="pending",t=5e3){if("latest"===e)return;const n=await this.getBlockNumber(),r="pending"===e?n+1:Number(Re(e));if(r<=n)return;const{retries:a}=this.channel;let i=a,s=!1;for(;!s;)if(await this.getBlockNumber()===r?s=!0:await Or(t),i-=1,i<=0)throw new Error(`waitForBlock() timed-out after ${a} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){const t=await this.channel.getTransactionByHash(e);Be("L1_HANDLER"===t.type,"This L2 transaction is not a L1 message.");const{calldata:n,contract_address:r,entry_point_selector:a,nonce:i}=t,c=X([n[0],r,i,a,n.length-1,...n.slice(1)].reduce(((e,t)=>e+q(Re(t)).padStart(64,"0")),""));return X((0,s.ci)((0,o.fr)(ze(c))))}async getBlockWithReceipts(e){if(this.channel instanceof Ee.RpcChannel)throw new ve("Unsupported method for RPC version");return this.channel.getBlockWithReceipts(e)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getPendingTransactions(){const{transactions:e}=await this.getBlockWithTxHashes("pending").then(this.responseParser.parseGetBlockResponse);return Promise.all(e.map((e=>this.getTransactionByHash(e))))}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){const t=await this.channel.getTransactionReceipt(e),n=this.responseParser.parseTransactionReceipt(t);return new na(n)}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then((e=>this.responseParser.parseSimulateTransactionResponse(e)))}async waitForTransaction(e,t){const n=await this.channel.waitForTransaction(e,t);return new na(n)}async getStorageAt(e,t,n){return this.channel.getStorageAt(e,t,n)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let a;if(e)a=await this.getClassAt(e,n);else{if(!t)throw Error("getContractVersion require contractAddress or classHash");a=await this.getClass(t,n)}return Sr(a)?r?{cairo:"1",compiler:Zt(a.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getEstimateFee(e,t,n,r){return this.getInvokeEstimateFee(e,t,n,r)}async getInvokeEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:"INVOKE_FUNCTION",...e,...t}],{blockIdentifier:n,skipValidate:r}).then((e=>this.responseParser.parseFeeEstimateResponse(e)))}async getDeclareEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:"DECLARE",...e,...t}],{blockIdentifier:n,skipValidate:r}).then((e=>this.responseParser.parseFeeEstimateResponse(e)))}async getDeployAccountEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:"DEPLOY_ACCOUNT",...e,...t}],{blockIdentifier:n,skipValidate:r}).then((e=>this.responseParser.parseFeeEstimateResponse(e)))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then((e=>this.responseParser.parseFeeEstimateBulkResponse(e)))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}};v({},{StarknetIdContract:()=>pa,StarknetIdIdentityContract:()=>ga,StarknetIdMulticallContract:()=>ma,StarknetIdPfpContract:()=>Aa,StarknetIdPopContract:()=>wa,StarknetIdVerifierContract:()=>ba,dynamicCallData:()=>Ca,dynamicFelt:()=>Ia,execution:()=>ka,getStarknetIdContract:()=>fa,getStarknetIdIdentityContract:()=>ya,getStarknetIdMulticallContract:()=>_a,getStarknetIdPfpContract:()=>va,getStarknetIdPopContract:()=>Ta,getStarknetIdVerifierContract:()=>Ea,useDecoded:()=>ua,useEncoded:()=>ha});var aa="abcdefghijklmnopqrstuvwxyz0123456789-",ia=BigInt(aa.length+1),sa="",oa=BigInt(aa.length),ca=BigInt(sa.length),da=BigInt(sa.length+1);function la(e){let t=0;for(;e.endsWith(sa[sa.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function ua(e){let t="";return e.forEach((e=>{for(;e!==ne;){const n=e%ia;if(e/=ia,n===BigInt(aa.length)){const n=e/da;if(n===ne){const r=e%da;e=n,t+=r===ne?aa[0]:sa[Number(r)-1]}else t+=sa[Number(e%ca)],e/=ca}else t+=aa[Number(n)]}const[n,r]=la(t);r&&(t=n+(r%2==0?sa[sa.length-1].repeat(r/2-1)+sa[0]+aa[1]:sa[sa.length-1].repeat((r-1)/2+1))),t+="."})),t?t.concat("stark"):t}function ha(e){let t=BigInt(0),n=BigInt(1);if(e.endsWith(sa[0]+aa[1])){const[t,n]=la(e.substring(0,e.length-2));e=t+sa[sa.length-1].repeat(2*(n+1))}else{const[t,n]=la(e);n&&(e=t+sa[sa.length-1].repeat(1+2*(n-1)))}for(let r=0;r<e.length;r+=1){const a=e[r],i=aa.indexOf(a),s=BigInt(aa.indexOf(a));if(-1!==i)r===e.length-1&&e[r]===aa[0]?(t+=n*oa,n*=ia,n*=ia):(t+=n*s,n*=ia);else if(-1!==sa.indexOf(a)){t+=n*oa,n*=ia;const i=(r===e.length-1?1:0)+sa.indexOf(a);t+=n*BigInt(i),n*=ca}}return t}var pa=(e=>(e.MAINNET="0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",e.TESTNET_SEPOLIA="0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474",e))(pa||{});function fa(e){switch(e){case"0x534e5f4d41494e":return"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678";case"0x534e5f5345504f4c4941":return"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474";default:throw new Error("Starknet.id is not yet deployed on this network")}}var ga=(e=>(e.MAINNET="0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",e.TESTNET_SEPOLIA="0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda",e))(ga||{});function ya(e){switch(e){case"0x534e5f4d41494e":return"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af";case"0x534e5f5345504f4c4941":return"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda";default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var ma="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function _a(e){switch(e){case"0x534e5f4d41494e":case"0x534e5f5345504f4c4941":return ma;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var ba=(e=>(e.MAINNET="0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",e.TESTNET_SEPOLIA="0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566",e))(ba||{});function Ea(e){switch(e){case"0x534e5f4d41494e":return"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf";case"0x534e5f5345504f4c4941":return"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566";default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var Aa=(e=>(e.MAINNET="0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",e.TESTNET_SEPOLIA="0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02",e))(Aa||{});function va(e){switch(e){case"0x534e5f4d41494e":return"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7";case"0x534e5f5345504f4c4941":return"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02";default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var wa=(e=>(e.MAINNET="0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",e.TESTNET_SEPOLIA="0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a",e))(wa||{});function Ta(e){switch(e){case"0x534e5f4d41494e":return"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4";case"0x534e5f5345504f4c4941":return"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a";default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function ka(e,t=void 0,n=void 0){return new nn({Static:e,IfEqual:t?en(t[0],t[1],t[2]):void 0,IfNotEqual:n?en(n[0],n[1],n[2]):void 0})}function Ia(e,t=void 0){return new nn({Hardcoded:e,Reference:t?en(t[0],t[1]):void 0})}function Ca(e,t=void 0,n=void 0){return new nn({Hardcoded:e,Reference:t?en(t[0],t[1]):void 0,ArrayReference:n?en(n[0],n[1]):void 0})}(0,m.Mixin)(ra,class e{async getStarkName(t,n){return e.getStarkName(this,t,n)}async getAddressFromStarkName(t,n){return e.getAddressFromStarkName(this,t,n)}async getStarkProfile(t,n,r,a,i,s,o){return e.getStarkProfile(this,t,n,r,a,i,s,o)}static async getStarkName(e,t,n){const r=await e.getChainId(),a=n??fa(r);try{const n=ua((await e.callContract({contractAddress:a,entrypoint:"address_to_domain",calldata:In.compile({address:t,hint:[]})})).map((e=>BigInt(e))).slice(1));if(!n)throw Error("Starkname not found");return n}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}static async getAddressFromStarkName(e,t,n){const r=await e.getChainId(),a=n??fa(r);try{const n=t.replace(".stark","").split(".").map((e=>ha(e).toString(10)));return(await e.callContract({contractAddress:a,entrypoint:"domain_to_address",calldata:In.compile({domain:n,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(e,t,n,r,a,i,s,o){const c=await e.getChainId(),d=n??fa(c),l=r??ya(c),u=a??Ea(c),h=i??va(c),p=s??Ta(c),f=o??_a(c);try{const n=[{execution:ka({}),to:Ca(d),selector:Ca(nt("address_to_domain")),calldata:[Ca(t),Ca("0")]},{execution:ka({}),to:Ia(d),selector:Ia(nt("domain_to_id")),calldata:[Ca(void 0,void 0,[0,0])]},{execution:ka({}),to:Ia(l),selector:Ia(nt("get_verifier_data")),calldata:[Ca(void 0,[1,0]),Ca(ht("twitter")),Ca(u),Ca("0")]},{execution:ka({}),to:Ia(l),selector:Ia(nt("get_verifier_data")),calldata:[Ca(void 0,[1,0]),Ca(ht("github")),Ca(u),Ca("0")]},{execution:ka({}),to:Ia(l),selector:Ia(nt("get_verifier_data")),calldata:[Ca(void 0,[1,0]),Ca(ht("discord")),Ca(u),Ca("0")]},{execution:ka({}),to:Ia(l),selector:Ia(nt("get_verifier_data")),calldata:[Ca(void 0,[1,0]),Ca(ht("proof_of_personhood")),Ca(p),Ca("0")]},{execution:ka({}),to:Ia(l),selector:Ia(nt("get_verifier_data")),calldata:[Ca(void 0,[1,0]),Ca(ht("nft_pp_contract")),Ca(h),Ca("0")]},{execution:ka({}),to:Ia(l),selector:Ia(nt("get_extended_verifier_data")),calldata:[Ca(void 0,[1,0]),Ca(ht("nft_pp_id")),Ca("2"),Ca(h),Ca("0")]},{execution:ka(void 0,void 0,[6,0,0]),to:Ia(void 0,[6,0]),selector:Ia(nt("tokenURI")),calldata:[Ca(void 0,[7,1]),Ca(void 0,[7,2])]}],r=await e.callContract({contractAddress:f,entrypoint:"aggregate",calldata:In.compile({calls:n})});if(Array.isArray(r)){const e=parseInt(r[0],16),t=[];let n=1;for(let a=0;a<e&&n<r.length;a+=1){const e=parseInt(r[n],16);n+=1;const a=r.slice(n,n+e);t.push(a),n+=e}const a=ua(t[0].slice(1).map((e=>BigInt(e)))),i="0x0"!==t[2][0]?BigInt(t[2][0]).toString():void 0,s="0x0"!==t[3][0]?BigInt(t[3][0]).toString():void 0,o="0x0"!==t[4][0]?BigInt(t[4][0]).toString():void 0,c="0x1"===t[5][0];return{name:a,twitter:i,github:s,discord:o,proofOfPersonhood:c,profilePicture:("0x9"===r[0]?t[8].slice(1).map((e=>pt(e))).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(t[1][0]).toString()}`}}throw Error("Error while calling aggregate function")}catch(e){if(e instanceof Error)throw e;throw Error("Could not get user stark profile data from address")}}}),new ra({default:!0}),v({},{TypedDataRevision:()=>c.P,encodeData:()=>Ua,encodeType:()=>La,encodeValue:()=>Ha,getDependencies:()=>Ra,getMessageHash:()=>ja,getStructHash:()=>Fa,getTypeHash:()=>$a,isMerkleTreeType:()=>Va,prepareSelector:()=>Ma}),v({},{MerkleTree:()=>Sa,proofMerklePath:()=>Na});var Sa=class e{leaves;branches=[];root;hashMethod;constructor(e,t=Jn){this.hashMethod=t,this.leaves=e,this.root=this.build(e)}build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);const n=[];for(let r=0;r<t.length;r+=2)r+1===t.length?n.push(e.hash(t[r],"0x0",this.hashMethod)):n.push(e.hash(t[r],t[r+1],this.hashMethod));return this.build(n)}static hash(e,t,n=Jn){const[r,a]=[BigInt(e),BigInt(t)].sort(((e,t)=>e>=t?1:-1));return n(r,a)}getProof(t,n=this.leaves,r=[]){const a=n.indexOf(t);if(-1===a)throw new Error("leaf not found");if(1===n.length)return r;const i=a%2==0,s=(i?n[a+1]:n[a-1])??"0x0",o=[...r,s],c=this.leaves.length===n.length?-1:this.branches.findIndex((e=>e.length===n.length)),d=this.branches[c+1]??[this.root];return this.getProof(e.hash(i?t:s,i?s:t,this.hashMethod),d,o)}};function Na(e,t,n,r=Jn){if(0===n.length)return e===t;const[a,...i]=n;return Na(e,Sa.hash(t,a,r),i,r)}var xa={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},Da={[c.P.ACTIVE]:{domain:"StarknetDomain",hashMethod:nr,hashMerkleMethod:Qn,escapeTypeString:e=>`"${e}"`,presetTypes:xa},[c.P.LEGACY]:{domain:"StarkNetDomain",hashMethod:tr,hashMerkleMethod:Jn,escapeTypeString:e=>e,presetTypes:{}}};function Oa(e,t,{min:n,max:r}){const a=BigInt(e);Be(a>=n&&a<=r,`${a} (${t}) is out of bounds [${n}, ${r}]`)}function Ba({types:e,domain:t}){return Da[c.P.ACTIVE].domain in e&&t.revision===c.P.ACTIVE?c.P.ACTIVE:Da[c.P.LEGACY].domain in e&&(t.revision??c.P.LEGACY)===c.P.LEGACY?c.P.LEGACY:void 0}function Pa(e){try{return Re(e)}catch(t){if(ot(e))return Re(ht(e));throw new Error(`Invalid BigNumberish: ${e}`)}}function Ma(e){return Pe(e)?e:nt(e)}function Va(e){return"merkletree"===e.type}function Ra(e,t,n=[],r="",a=c.P.LEGACY){return"*"===t[t.length-1]?t=t.slice(0,-1):a===c.P.ACTIVE&&("enum"===t?t=r:t.match(/^\(.*\)$/)&&(t=t.slice(1,-1))),n.includes(t)||!e[t]?n:[t,...e[t].reduce(((t,n)=>[...t,...Ra(e,n.type,t,n.contains,a).filter((e=>!t.includes(e)))]),[])]}function La(e,t,n=c.P.LEGACY){const r=n===c.P.ACTIVE?{...e,...Da[n].presetTypes}:e,[a,...i]=Ra(r,t,void 0,void 0,n),s=a?[a,...i.sort()]:[],o=Da[n].escapeTypeString;return s.map((e=>{const t=r[e].map((e=>{const t="enum"===e.type&&n===c.P.ACTIVE?e.contains:e.type,r=t.match(/^\(.*\)$/)?`(${t.slice(1,-1).split(",").map((e=>e?o(e):e)).join(",")})`:o(t);return`${o(e.name)}:${r}`}));return`${o(e)}(${t})`})).join("")}function $a(e,t,n=c.P.LEGACY){return nt(La(e,t,n))}function Ha(e,t,n,r={},a=c.P.LEGACY){if(e[t])return[t,Fa(e,t,n,a)];if(Da[a].presetTypes[t])return[t,Fa(Da[a].presetTypes,t,n,a)];if(t.endsWith("*")){const r=n.map((n=>Ha(e,t.slice(0,-1),n,void 0,a)[1]));return[t,Da[a].hashMethod(r)]}switch(t){case"enum":if(a===c.P.ACTIVE){const[i,s]=Object.entries(n)[0],o=e[r.parent][0],c=e[o.contains],d=c.find((e=>e.name===i)),l=c.indexOf(d),u=d.type.slice(1,-1).split(",").map(((t,n)=>{if(!t)return t;const r=s[n];return Ha(e,t,r,void 0,a)[1]}));return[t,Da[a].hashMethod([l,...u])]}return[t,Pa(n)];case"merkletree":{const t=function(e,t){if(t.parent&&t.key){const n=e[t.parent].find((e=>e.name===t.key));if(!Va(n))throw new Error(`${t.key} is not a merkle tree`);if(n.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return n.contains}return"raw"}(e,r),i=n.map((n=>Ha(e,t,n,void 0,a)[1])),{root:s}=new Sa(i,Da[a].hashMerkleMethod);return["felt",s]}case"selector":return["felt",Ma(n)];case"string":if(a===c.P.ACTIVE){const e=gt(n),r=[e.data.length,...e.data,e.pending_word,e.pending_word_len];return[t,Da[a].hashMethod(r)]}return[t,Pa(n)];case"i128":if(a===c.P.ACTIVE){const e=BigInt(n);return Oa(e,t,le),[t,Pa(e<0n?ie+e:e)]}return[t,Pa(n)];case"timestamp":case"u128":return a===c.P.ACTIVE&&Oa(n,t,ue),[t,Pa(n)];case"felt":case"shortstring":return a===c.P.ACTIVE&&Oa(Pa(n),t,de),[t,Pa(n)];case"ClassHash":case"ContractAddress":return a===c.P.ACTIVE&&Oa(n,t,de),[t,Pa(n)];case"bool":return a===c.P.ACTIVE&&Be("boolean"==typeof n,`Type mismatch for ${t} ${n}`),[t,Pa(n)];default:if(a===c.P.ACTIVE)throw new Error(`Unsupported type: ${t}`);return[t,Pa(n)]}}function Ua(e,t,n,r=c.P.LEGACY){const a=e[t]??Da[r].presetTypes[t],[i,s]=a.reduce((([a,i],s)=>{if(void 0===n[s.name]||null===n[s.name]&&"enum"!==s.type)throw new Error(`Cannot encode data: missing data for '${s.name}'`);const o=n[s.name],c={parent:t,key:s.name},[d,l]=Ha(e,s.type,o,c,r);return[[...a,d],[...i,l]]}),[["felt"],[$a(e,t,r)]]);return[i,s]}function Fa(e,t,n,r=c.P.LEGACY){return Da[r].hashMethod(Ua(e,t,n,r)[1])}function ja(e,t){if(!function(e){const t=e;return Boolean(t.message&&t.primaryType&&t.types&&Ba(t))}(e))throw new Error("Typed data does not match JSON schema");const n=Ba(e),{domain:r,hashMethod:a}=Da[n];return a([ht("StarkNet Message"),Fa(e.types,r,e.domain,n),t,Fa(e.types,e.primaryType,e.message,n)])}function Ka(e){return new Tt(e).toBigInt()}function Wa(e){return Tt.is(e)}function Ga(e){return new Tt(e).toUint256HexString()}function Ya(e){return"event"===e.type}function qa(e){const t=e.filter((e=>Ya(e)&&"struct"===e.kind)),n=e.filter((e=>Ya(e)&&"enum"===e.kind));return t.reduce(((e,t)=>{let r=[],{name:a}=t,i=!1;const s=e=>e.type===a;for(;;){const e=n.find((e=>e.variants.some(s)));if(void 0===e)break;const t=e.variants.find(s);r.unshift(t.name),"flat"===t.kind&&(i=!0),a=e.name}if(0===r.length)throw new Error("inconsistency in ABI events definition.");i&&(r=[r[r.length-1]]);const o=r.pop();let c={[X(d.keccak(j(o)).toString(16))]:t};for(;r.length>0;)c={[X(d.keccak(j(r.pop())).toString(16))]:c};return c={...c},Za(e,c)}),{})}function Xa(e){return Xt(e)?qa(e):function(e){return e.filter((e=>"event"===e.type)).reduce(((e,t)=>{const n=t.name,r={...t};return r.name=n,{...e,[X(d.keccak(j(n)).toString(16))]:r}}),{})}(e)}function za(e){return e&&"object"==typeof e&&!Array.isArray(e)}function Za(e,t){const n={...e};return za(e)&&za(t)&&Object.keys(t).forEach((r=>{za(t[r])?r in e?n[r]=Za(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})})),n}function Ja(e,t,n,r){return e.flat().reduce(((e,a)=>{let i=t[a.keys.shift()??0];if(!i)return e;for(;!i.name;){const e=a.keys.shift();Be(!!e,'Not enough data in "key" property of this event.'),i=i[e]}const s={};s[i.name]={};const o=a.keys[Symbol.iterator](),c=a.data[Symbol.iterator](),d=i.members?.filter((e=>"key"===e.kind))||i.keys,l=i.members?.filter((e=>"data"===e.kind))||i.data;return d.forEach((e=>{s[i.name][e.name]=mn(o,e,n,r,s[i.name])})),l.forEach((e=>{s[i.name][e.name]=mn(c,e,n,r,s[i.name])})),e.push(s),e}),[])}function Qa(e){if(!e.events)throw new Error("UDC emitted event is empty");const t=e.events.find((e=>Ue(e.from_address)===Ue(me.ADDRESS)))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}function ei(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function ti(e){return e.request({type:"wallet_getPermissions"})}function ni(e,t){return e.request({type:"wallet_watchAsset",params:t})}function ri(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function ai(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function ii(e){return e.request({type:"wallet_requestChainId"})}function si(e){return e.request({type:"wallet_deploymentData"})}function oi(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function ci(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function di(e,t){return e.request({type:"wallet_signTypedData",params:t})}function li(e){return e.request({type:"wallet_supportedSpecs"})}function ui(e,t){e.on("accountsChanged",t)}function hi(e,t){e.on("networkChanged",t)}v({},{UINT_128_MAX:()=>mt,UINT_256_MAX:()=>_t,bnToUint256:()=>Ga,isUint256:()=>Wa,uint256ToBN:()=>Ka}),v({},{getAbiEvents:()=>Xa,isAbiEvent:()=>Ya,isObject:()=>za,parseEvents:()=>Ja,parseUDCEvent:()=>Qa}),v({},{addDeclareTransaction:()=>ci,addInvokeTransaction:()=>oi,addStarknetChain:()=>ri,deploymentData:()=>si,getPermissions:()=>ti,onAccountChange:()=>ui,onNetworkChanged:()=>hi,requestAccounts:()=>ei,requestChainId:()=>ii,signMessage:()=>di,supportedSpecs:()=>li,switchStarknetChain:()=>ai,watchAsset:()=>ni})}}]);