var Gi=r=>{throw TypeError(r)};var Vi=(r,e,t)=>e.has(r)||Gi("Cannot "+t);var Xs=(r,e,t)=>(Vi(r,e,"read from private field"),t?t.call(r):e.get(r)),Ji=(r,e,t)=>e.has(r)?Gi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),xn=(r,e,t,n)=>(Vi(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);import{l as Zo,m as el,n as tl,o as rl}from"./shared-C3NPy9VQ.js";const nl="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(nl);const Oi=1,Pi=2,$a=4,sl=8,il=16,al=1,ol=2,ll=4,cl=8,ul=16,dl=1,hl=2,fl=4,gl=1,_l=2,de=Symbol(),Ra="http://www.w3.org/2000/svg",Ia=!1;function pl(r){console.warn("legacy_recursive_reactive_block")}var zr=Array.isArray,Ci=Array.from,vl=Object.defineProperty,Qt=Object.getOwnPropertyDescriptor,La=Object.getOwnPropertyDescriptors,ml=Object.prototype,yl=Array.prototype,Fn=Object.getPrototypeOf;function bl(r){return typeof r=="function"}const ne=()=>{};function wl(r){return typeof(r==null?void 0:r.then)=="function"}function Xh(r){return r()}function Da(r){for(var e=0;e<r.length;e++)r[e]()}const qe=2,Ua=4,Gr=8,Jn=16,xe=32,Vr=64,ct=128,qn=256,fe=512,We=1024,lr=2048,Fe=4096,cr=8192,Na=16384,ur=32768,Al=65536,Sl=1<<18,Ma=1<<19,Tt=Symbol("$state"),kl=Symbol("");function Ba(r){return r===this.v}function ji(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function $i(r){return!ji(r,this.v)}function Tl(r){throw new Error("effect_in_teardown")}function xl(){throw new Error("effect_in_unowned_derived")}function El(r){throw new Error("effect_orphan")}function Ol(){throw new Error("effect_update_depth_exceeded")}function Pl(r){throw new Error("props_invalid_value")}function Cl(){throw new Error("state_descriptors_fixed")}function jl(){throw new Error("state_prototype_fixed")}function $l(){throw new Error("state_unsafe_local_read")}function Rl(){throw new Error("state_unsafe_mutation")}function ae(r){return{f:0,v:r,reactions:null,equals:Ba,version:0}}function Il(r){return Ll(ae(r))}function Br(r,e=!1){var n;const t=ae(r);return e||(t.equals=$i),G!==null&&G.l!==null&&((n=G.l).s??(n.s=[])).push(t),t}function Ll(r){return W!==null&&W.f&qe&&(Ce===null?Hl([r]):Ce.push(r)),r}function re(r,e){return W!==null&&Qn()&&W.f&(qe|Jn)&&(Ce===null||!Ce.includes(r))&&Rl(),Xt(r,e)}function Xt(r,e){return r.equals(e)||(r.v=e,r.version=ro(),Fa(r,We),Qn()&&U!==null&&U.f&fe&&!(U.f&xe)&&(ie!==null&&ie.includes(r)?(Ee(U,We),Zn(U)):ot===null?zl([r]):ot.push(r))),e}function Fa(r,e){var t=r.reactions;if(t!==null)for(var n=Qn(),s=t.length,i=0;i<s;i++){var a=t[i],l=a.f;l&We||!n&&a===U||(Ee(a,e),l&(fe|ct)&&(l&qe?Fa(a,lr):Zn(a)))}}function Be(r){var e=qe|We;U===null?e|=ct:U.f|=Ma;const t={children:null,ctx:G,deps:null,equals:Ba,f:e,fn:r,reactions:null,v:null,version:0,parent:U};if(W!==null&&W.f&qe){var n=W;(n.children??(n.children=[])).push(t)}return t}function Dl(r){const e=Be(r);return e.equals=$i,e}function qa(r){var e=r.children;if(e!==null){r.children=null;for(var t=0;t<e.length;t+=1){var n=e[t];n.f&qe?Ri(n):Ke(n)}}}function Wa(r){var e,t=U;ge(r.parent);try{qa(r),e=no(r)}finally{ge(t)}return e}function Ka(r){var e=Wa(r),t=(Vt||r.f&ct)&&r.deps!==null?lr:fe;Ee(r,t),r.equals(e)||(r.v=e,r.version=ro())}function Ri(r){qa(r),qr(r,0),Ee(r,cr),r.v=r.children=r.deps=r.ctx=r.reactions=null}function Ha(r){U===null&&W===null&&El(),W!==null&&W.f&ct&&xl(),Di&&Tl()}function Ul(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function dr(r,e,t,n=!0){var s=(r&Vr)!==0,i=U,a={ctx:G,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:r|We,first:null,fn:e,last:null,next:null,parent:s?null:i,prev:null,teardown:null,transitions:null,version:0};if(t){var l=Zt;try{Yi(!0),Xn(a),a.f|=Na}catch(u){throw Ke(a),u}finally{Yi(l)}}else e!==null&&Zn(a);var c=t&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&Ma)===0;if(!c&&!s&&n&&(i!==null&&Ul(a,i),W!==null&&W.f&qe)){var d=W;(d.children??(d.children=[])).push(a)}return a}function Zh(){return W===null?!1:(W.f&ct)===0}function za(r){const e=dr(Gr,null,!1);return Ee(e,fe),e.teardown=r,e}function Nl(r){Ha();var e=U!==null&&(U.f&xe)!==0&&G!==null&&!G.m;if(e){var t=G;(t.e??(t.e=[])).push({fn:r,effect:U,reaction:W})}else{var n=Jr(r);return n}}function Ml(r){return Ha(),Fl(r)}function Bl(r){const e=dr(Vr,r,!0);return()=>{Ke(e)}}function Jr(r){return dr(Ua,r,!1)}function Fl(r){return dr(Gr,r,!0)}function Yn(r){return xt(r)}function xt(r,e=0){return dr(Gr|Jn|e,r,!0)}function Te(r,e=!0){return dr(Gr|xe,r,!0,e)}function Ga(r){var e=r.teardown;if(e!==null){const t=Di,n=W;Qi(!0),me(null);try{e.call(null)}finally{Qi(t),me(n)}}}function Va(r){var e=r.deriveds;if(e!==null){r.deriveds=null;for(var t=0;t<e.length;t+=1)Ri(e[t])}}function Ja(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var n=t.next;Ke(t,e),t=n}}function ql(r){for(var e=r.first;e!==null;){var t=e.next;e.f&xe||Ke(e),e=t}}function Ke(r,e=!0){var t=!1;if((e||r.f&Sl)&&r.nodes_start!==null){for(var n=r.nodes_start,s=r.nodes_end;n!==null;){var i=n===s?null:es(n);n.remove(),n=i}t=!0}Va(r),Ja(r,e&&!t),qr(r,0),Ee(r,cr);var a=r.transitions;if(a!==null)for(const c of a)c.stop();Ga(r);var l=r.parent;l!==null&&l.first!==null&&Ya(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.parent=r.fn=r.nodes_start=r.nodes_end=null}function Ya(r){var e=r.parent,t=r.prev,n=r.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===r&&(e.first=n),e.last===r&&(e.last=t))}function it(r,e){var t=[];Ii(r,t,!0),Qa(t,()=>{Ke(r),e&&e()})}function Qa(r,e){var t=r.length;if(t>0){var n=()=>--t||e();for(var s of r)s.out(n)}else e()}function Ii(r,e,t){if(!(r.f&Fe)){if(r.f^=Fe,r.transitions!==null)for(const a of r.transitions)(a.is_global||t)&&e.push(a);for(var n=r.first;n!==null;){var s=n.next,i=(n.f&ur)!==0||(n.f&xe)!==0;Ii(n,e,i?t:!1),n=s}}}function at(r){Xa(r,!0)}function Xa(r,e){if(r.f&Fe){r.f^=Fe,Yr(r)&&Xn(r);for(var t=r.first;t!==null;){var n=t.next,s=(t.f&ur)!==0||(t.f&xe)!==0;Xa(t,s?e:!1),t=n}if(r.transitions!==null)for(const i of r.transitions)(i.is_global||e)&&i.in()}}let Wn=!1,hi=[];function Za(){Wn=!1;const r=hi.slice();hi=[],Da(r)}function hr(r){Wn||(Wn=!0,queueMicrotask(Za)),hi.push(r)}function Wl(){Wn&&Za()}function Li(r){throw new Error("lifecycle_outside_component")}const eo=0,Kl=1;let Nn=eo,Fr=!1,Zt=!1,Di=!1;function Yi(r){Zt=r}function Qi(r){Di=r}let kt=[],er=0;let W=null;function me(r){W=r}let U=null;function ge(r){U=r}let Ce=null;function Hl(r){Ce=r}let ie=null,_e=0,ot=null;function zl(r){ot=r}let to=0,Vt=!1,G=null;function Xi(r){G=r}function ro(){return++to}function Qn(){return G!==null&&G.l===null}function Yr(r){var a,l;var e=r.f;if(e&We)return!0;if(e&lr){var t=r.deps,n=(e&ct)!==0;if(t!==null){var s;if(e&qn){for(s=0;s<t.length;s++)((a=t[s]).reactions??(a.reactions=[])).push(r);r.f^=qn}for(s=0;s<t.length;s++){var i=t[s];if(Yr(i)&&Ka(i),n&&U!==null&&!Vt&&!((l=i==null?void 0:i.reactions)!=null&&l.includes(r))&&(i.reactions??(i.reactions=[])).push(r),i.version>r.version)return!0}}n||Ee(r,fe)}return!1}function Gl(r,e,t){throw r}function no(r){var _;var e=ie,t=_e,n=ot,s=W,i=Vt,a=Ce,l=G,c=r.f;ie=null,_e=0,ot=null,W=c&(xe|Vr)?null:r,Vt=!Zt&&(c&ct)!==0,Ce=null,G=r.ctx;try{var d=(0,r.fn)(),u=r.deps;if(ie!==null){var g;if(qr(r,_e),u!==null&&_e>0)for(u.length=_e+ie.length,g=0;g<ie.length;g++)u[_e+g]=ie[g];else r.deps=u=ie;if(!Vt)for(g=_e;g<u.length;g++)((_=u[g]).reactions??(_.reactions=[])).push(r)}else u!==null&&_e<u.length&&(qr(r,_e),u.length=_e);return d}finally{ie=e,_e=t,ot=n,W=s,Vt=i,Ce=a,G=l}}function Vl(r,e){let t=e.reactions;if(t!==null){var n=t.indexOf(r);if(n!==-1){var s=t.length-1;s===0?t=e.reactions=null:(t[n]=t[s],t.pop())}}t===null&&e.f&qe&&(ie===null||!ie.includes(e))&&(Ee(e,lr),e.f&(ct|qn)||(e.f^=qn),qr(e,0))}function qr(r,e){var t=r.deps;if(t!==null)for(var n=e;n<t.length;n++)Vl(r,t[n])}function Xn(r){var e=r.f;if(!(e&cr)){Ee(r,fe);var t=U;U=r;try{Va(r),e&Jn?ql(r):Ja(r),Ga(r);var n=no(r);r.teardown=typeof n=="function"?n:null,r.version=to}catch(s){Gl(s)}finally{U=t}}}function so(){er>1e3&&(er=0,Ol()),er++}function io(r){var e=r.length;if(e!==0){so();var t=Zt;Zt=!0;try{for(var n=0;n<e;n++){var s=r[n];s.f&fe||(s.f^=fe);var i=[];ao(s,i),Jl(i)}}finally{Zt=t}}}function Jl(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var n=r[t];!(n.f&(cr|Fe))&&Yr(n)&&(Xn(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?Ya(n):n.fn=null))}}function Yl(){if(Fr=!1,er>1001)return;const r=kt;kt=[],io(r),Fr||(er=0)}function Zn(r){Nn===eo&&(Fr||(Fr=!0,queueMicrotask(Yl)));for(var e=r;e.parent!==null;){e=e.parent;var t=e.f;if(t&(Vr|xe)){if(!(t&fe))return;e.f^=fe}}kt.push(e)}function ao(r,e){var t=r.first,n=[];e:for(;t!==null;){var s=t.f,i=(s&xe)!==0,a=i&&(s&fe)!==0;if(!a&&!(s&Fe))if(s&Gr){i?t.f^=fe:Yr(t)&&Xn(t);var l=t.first;if(l!==null){t=l;continue}}else s&Ua&&n.push(t);var c=t.next;if(c===null){let g=t.parent;for(;g!==null;){if(r===g)break e;var d=g.next;if(d!==null){t=d;continue e}g=g.parent}}t=c}for(var u=0;u<n.length;u++)l=n[u],e.push(l),ao(l,e)}function Ui(r){var e=Nn,t=kt;try{so();const s=[];Nn=Kl,kt=s,Fr=!1,io(t);var n=r==null?void 0:r();return Wl(),(kt.length>0||s.length>0)&&Ui(),er=0,n}finally{Nn=e,kt=t}}async function ef(){await Promise.resolve(),Ui()}function te(r){var l;var e=r.f,t=(e&qe)!==0;if(t&&e&cr){var n=Wa(r);return Ri(r),n}if(W!==null){Ce!==null&&Ce.includes(r)&&$l();var s=W.deps;ie===null&&s!==null&&s[_e]===r?_e++:ie===null?ie=[r]:ie.push(r),ot!==null&&U!==null&&U.f&fe&&!(U.f&xe)&&ot.includes(r)&&(Ee(U,We),Zn(U))}else if(t&&r.deps===null){var i=r,a=i.parent;a!==null&&!((l=a.deriveds)!=null&&l.includes(i))&&(a.deriveds??(a.deriveds=[])).push(i)}return t&&(i=r,Yr(i)&&Ka(i)),r.v}function Wr(r){const e=W;try{return W=null,r()}finally{W=e}}const Ql=~(We|lr|fe);function Ee(r,e){r.f=r.f&Ql|e}function Qr(r,e=!1,t){G={p:G,c:null,e:null,m:!1,s:r,x:null,l:null},e||(G.l={s:null,u:null,r1:[],r2:ae(!1)})}function Xr(r){const e=G;if(e!==null){const a=e.e;if(a!==null){var t=U,n=W;e.e=null;try{for(var s=0;s<a.length;s++){var i=a[s];ge(i.effect),me(i.reaction),Jr(i.fn)}}finally{ge(t),me(n)}}G=e.p,e.m=!0}return{}}function tf(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(Tt in r)fi(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&Tt in t&&fi(t)}}}function fi(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let n in r)try{fi(r[n],e)}catch{}const t=Fn(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=La(t);for(let s in n){const i=n[s].get;if(i)try{i.call(r)}catch{}}}}}function Gt(r,e=null,t){if(typeof r!="object"||r===null||Tt in r)return r;const n=Fn(r);if(n!==ml&&n!==yl)return r;var s=new Map,i=zr(r),a=ae(0);i&&s.set("length",ae(r.length));var l;return new Proxy(r,{defineProperty(c,d,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Cl();var g=s.get(d);return g===void 0?(g=ae(u.value),s.set(d,g)):re(g,Gt(u.value,l)),!0},deleteProperty(c,d){var u=s.get(d);if(u===void 0)d in c&&s.set(d,ae(de));else{if(i&&typeof d=="string"){var g=s.get("length"),_=Number(d);Number.isInteger(_)&&_<g.v&&re(g,_)}re(u,de),Zi(a)}return!0},get(c,d,u){var m;if(d===Tt)return r;var g=s.get(d),_=d in c;if(g===void 0&&(!_||(m=Qt(c,d))!=null&&m.writable)&&(g=ae(Gt(_?c[d]:de,l)),s.set(d,g)),g!==void 0){var v=te(g);return v===de?void 0:v}return Reflect.get(c,d,u)},getOwnPropertyDescriptor(c,d){var u=Reflect.getOwnPropertyDescriptor(c,d);if(u&&"value"in u){var g=s.get(d);g&&(u.value=te(g))}else if(u===void 0){var _=s.get(d),v=_==null?void 0:_.v;if(_!==void 0&&v!==de)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(c,d){var v;if(d===Tt)return!0;var u=s.get(d),g=u!==void 0&&u.v!==de||Reflect.has(c,d);if(u!==void 0||U!==null&&(!g||(v=Qt(c,d))!=null&&v.writable)){u===void 0&&(u=ae(g?Gt(c[d],l):de),s.set(d,u));var _=te(u);if(_===de)return!1}return g},set(c,d,u,g){var T;var _=s.get(d),v=d in c;if(i&&d==="length")for(var m=u;m<_.v;m+=1){var y=s.get(m+"");y!==void 0?re(y,de):m in c&&(y=ae(de),s.set(m+"",y))}_===void 0?(!v||(T=Qt(c,d))!=null&&T.writable)&&(_=ae(void 0),re(_,Gt(u,l)),s.set(d,_)):(v=_.v!==de,re(_,Gt(u,l)));var w=Reflect.getOwnPropertyDescriptor(c,d);if(w!=null&&w.set&&w.set.call(g,u),!v){if(i&&typeof d=="string"){var b=s.get("length"),A=Number(d);Number.isInteger(A)&&A>=b.v&&re(b,A+1)}Zi(a)}return!0},ownKeys(c){te(a);var d=Reflect.ownKeys(c).filter(_=>{var v=s.get(_);return v===void 0||v.v!==de});for(var[u,g]of s)g.v!==de&&!(u in c)&&d.push(u);return d},setPrototypeOf(){jl()}})}function Zi(r,e=1){re(r,r.v+e)}function ea(r){return r!==null&&typeof r=="object"&&Tt in r?r[Tt]:r}function Xl(r,e){return Object.is(ea(r),ea(e))}var ta,oo,lo;function Zl(){if(ta===void 0){ta=window;var r=Element.prototype,e=Node.prototype;oo=Qt(e,"firstChild").get,lo=Qt(e,"nextSibling").get,r.__click=void 0,r.__className="",r.__attributes=null,r.__styles=null,r.__e=void 0,Text.prototype.__t=void 0}}function Zr(r=""){return document.createTextNode(r)}function sr(r){return oo.call(r)}function es(r){return lo.call(r)}function Kr(r,e){return sr(r)}function Jt(r,e){{var t=sr(r);return t instanceof Comment&&t.data===""?es(t):t}}function rf(r,e=1,t=!1){let n=r;for(;e--;)n=es(n);return n}function ec(r){r.textContent=""}let co=!1;const uo=new Set,gi=new Set;function _i(r,e,t,n){function s(i){if(n.capture||$r.call(e,i),!i.cancelBubble){var a=W,l=U;me(null),ge(null);try{return t.call(this,i)}finally{me(a),ge(l)}}}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?hr(()=>{e.addEventListener(r,s,n)}):e.addEventListener(r,s,n),s}function nf(r,e,t,n,s){var i={capture:n,passive:s},a=_i(r,e,t,i);(e===document.body||e===window||e===document)&&za(()=>{e.removeEventListener(r,a,i)})}function tc(r){for(var e=0;e<r.length;e++)uo.add(r[e]);for(var t of gi)t(r)}function $r(r){var A;var e=this,t=e.ownerDocument,n=r.type,s=((A=r.composedPath)==null?void 0:A.call(r))||[],i=s[0]||r.target,a=0,l=r.__root;if(l){var c=s.indexOf(l);if(c!==-1&&(e===document||e===window)){r.__root=e;return}var d=s.indexOf(e);if(d===-1)return;c<=d&&(a=c)}if(i=s[a]||r.target,i!==e){vl(r,"currentTarget",{configurable:!0,get(){return i||t}});var u=W,g=U;me(null),ge(null);try{for(var _,v=[];i!==null;){var m=i.assignedSlot||i.parentNode||i.host||null;try{var y=i["__"+n];if(y!==void 0&&!i.disabled)if(zr(y)){var[w,...b]=y;w.apply(i,[r,...b])}else y.call(i,r)}catch(T){_?v.push(T):_=T}if(r.cancelBubble||m===e||m===null)break;i=m}if(_){for(let T of v)queueMicrotask(()=>{throw T});throw _}}finally{r.__root=e,delete r.currentTarget,me(u),ge(g)}}}function ho(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function ir(r,e){var t=U;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function He(r,e){var t=(e&gl)!==0,n=(e&_l)!==0,s,i=!r.startsWith("<!>");return()=>{s===void 0&&(s=ho(i?r:"<!>"+r),t||(s=sr(s)));var a=n?document.importNode(s,!0):s.cloneNode(!0);if(t){var l=sr(a),c=a.lastChild;ir(l,c)}else ir(a,a);return a}}function sf(r,e,t="svg"){var n=!r.startsWith("<!>"),s=`<${t}>${n?r:"<!>"+r}</${t}>`,i;return()=>{if(!i){var a=ho(s),l=sr(a);i=sr(l)}var c=i.cloneNode(!0);return ir(c,c),c}}function af(r=""){{var e=Zr(r+"");return ir(e,e),e}}function Yt(){var r=document.createDocumentFragment(),e=document.createComment(""),t=Zr();return r.append(e,t),ir(e,t),r}function oe(r,e){r!==null&&r.before(e)}function rc(r){return r.endsWith("capture")&&r!=="gotpointercapture"&&r!=="lostpointercapture"}const nc=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function sc(r){return nc.includes(r)}const ic={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"};function ac(r){return r=r.toLowerCase(),ic[r]??r}const oc=["touchstart","touchmove"];function lc(r){return oc.includes(r)}let Kn=!0;function ra(r){Kn=r}function of(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t==null?"":t+"")}function lf(r,e){return cc(r,e)}const qt=new Map;function cc(r,{target:e,anchor:t,props:n={},events:s,context:i,intro:a=!0}){Zl();var l=new Set,c=g=>{for(var _=0;_<g.length;_++){var v=g[_];if(!l.has(v)){l.add(v);var m=lc(v);e.addEventListener(v,$r,{passive:m});var y=qt.get(v);y===void 0?(document.addEventListener(v,$r,{passive:m}),qt.set(v,1)):qt.set(v,y+1)}}};c(Ci(uo)),gi.add(c);var d=void 0,u=Bl(()=>{var g=t??e.appendChild(Zr());return Te(()=>{if(i){Qr({});var _=G;_.c=i}s&&(n.$$events=s),Kn=a,d=r(g,n)||{},Kn=!0,i&&Xr()}),()=>{var m;for(var _ of l){e.removeEventListener(_,$r);var v=qt.get(_);--v===0?(document.removeEventListener(_,$r),qt.delete(_)):qt.set(_,v)}gi.delete(c),na.delete(d),g!==t&&((m=g.parentNode)==null||m.removeChild(g))}});return na.set(d,u),d}let na=new WeakMap;const Zs=0,En=1,ei=2;function cf(r,e,t,n,s){var i=r,a=Qn(),l=G,c,d,u,g,_=(a?ae:Br)(void 0),v=(a?ae:Br)(void 0),m=!1;function y(b,A){m=!0,A&&(ge(w),me(w),Xi(l)),b===Zs&&t&&(d?at(d):d=Te(()=>t(i))),b===En&&n&&(u?at(u):u=Te(()=>n(i,_))),b===ei&&s&&(g?at(g):g=Te(()=>s(i,v))),b!==Zs&&d&&it(d,()=>d=null),b!==En&&u&&it(u,()=>u=null),b!==ei&&g&&it(g,()=>g=null),A&&(Xi(null),me(null),ge(null),Ui())}var w=xt(()=>{if(c!==(c=e())){if(wl(c)){var b=c;m=!1,b.then(A=>{b===c&&(Xt(_,A),y(En,!0))},A=>{if(b===c)throw Xt(v,A),y(ei,!0),v.v}),hr(()=>{m||y(Zs,!0)})}else Xt(_,c),y(En,!1);return()=>c=null}})}function Mn(r,e,t,n=null,s=!1){var i=r,a=null,l=null,c=null,d=s?ur:0;xt(()=>{c!==(c=!!e())&&(c?(a?at(a):a=Te(()=>t(i)),l&&it(l,()=>{l=null})):(l?at(l):n&&(l=Te(()=>n(i))),a&&it(a,()=>{a=null})))},d)}function uc(r,e,t){var n=r,s=de,i;xt(()=>{ji(s,s=e())&&(i&&it(i),i=Te(()=>t(n)))})}let tr=null;function sa(r){tr=r}function uf(r,e){return e}function dc(r,e,t,n){for(var s=[],i=e.length,a=0;a<i;a++)Ii(e[a].e,s,!0);var l=i>0&&s.length===0&&t!==null;if(l){var c=t.parentNode;ec(c),c.append(t),n.clear(),et(r,e[0].prev,e[i-1].next)}Qa(s,()=>{for(var d=0;d<i;d++){var u=e[d];l||(n.delete(u.k),et(r,u.prev,u.next)),Ke(u.e,!l)}})}function df(r,e,t,n,s,i=null){var a=r,l={flags:e,items:new Map,first:null},c=(e&$a)!==0;if(c){var d=r;a=d.appendChild(Zr())}var u=null,g=!1;xt(()=>{var _=t(),v=zr(_)?_:_==null?[]:Ci(_),m=v.length;g&&m===0||(g=m===0,hc(v,l,a,s,e,n),i!==null&&(m===0?u?at(u):u=Te(()=>i(a)):u!==null&&it(u,()=>{u=null})),t())})}function hc(r,e,t,n,s,i){var Y,Q,P,V;var a=(s&sl)!==0,l=(s&(Oi|Pi))!==0,c=r.length,d=e.items,u=e.first,g=u,_,v=null,m,y=[],w=[],b,A,T,E;if(a)for(E=0;E<c;E+=1)b=r[E],A=i(b,E),T=d.get(A),T!==void 0&&((Y=T.a)==null||Y.measure(),(m??(m=new Set)).add(T));for(E=0;E<c;E+=1){if(b=r[E],A=i(b,E),T=d.get(A),T===void 0){var j=g?g.e.nodes_start:t;v=gc(j,e,v,v===null?e.first:v.next,b,A,E,n,s),d.set(A,v),y=[],w=[],g=v.next;continue}if(l&&fc(T,b,E,s),T.e.f&Fe&&(at(T.e),a&&((Q=T.a)==null||Q.unfix(),(m??(m=new Set)).delete(T))),T!==g){if(_!==void 0&&_.has(T)){if(y.length<w.length){var J=w[0],$;v=J.prev;var k=y[0],x=y[y.length-1];for($=0;$<y.length;$+=1)ia(y[$],J,t);for($=0;$<w.length;$+=1)_.delete(w[$]);et(e,k.prev,x.next),et(e,v,k),et(e,x,J),g=J,v=x,E-=1,y=[],w=[]}else _.delete(T),ia(T,g,t),et(e,T.prev,T.next),et(e,T,v===null?e.first:v.next),et(e,v,T),v=T;continue}for(y=[],w=[];g!==null&&g.k!==A;)g.e.f&Fe||(_??(_=new Set)).add(g),w.push(g),g=g.next;if(g===null)continue;T=g}y.push(T),v=T,g=T.next}if(g!==null||_!==void 0){for(var C=_===void 0?[]:Ci(_);g!==null;)g.e.f&Fe||C.push(g),g=g.next;var I=C.length;if(I>0){var H=s&$a&&c===0?t:null;if(a){for(E=0;E<I;E+=1)(P=C[E].a)==null||P.measure();for(E=0;E<I;E+=1)(V=C[E].a)==null||V.fix()}dc(e,C,H,d)}}a&&hr(()=>{var K;if(m!==void 0)for(T of m)(K=T.a)==null||K.apply()}),U.first=e.first&&e.first.e,U.last=v&&v.e}function fc(r,e,t,n){n&Oi&&Xt(r.v,e),n&Pi?Xt(r.i,t):r.i=t}function gc(r,e,t,n,s,i,a,l,c){var d=tr;try{var u=(c&Oi)!==0,g=(c&il)===0,_=u?g?Br(s):ae(s):s,v=c&Pi?ae(a):a,m={i:v,v:_,k:i,a:null,e:null,prev:t,next:n};return tr=m,m.e=Te(()=>l(r,_,v),co),m.e.prev=t&&t.e,m.e.next=n&&n.e,t===null?e.first=m:(t.next=m,t.e.next=m.e),n!==null&&(n.prev=m,n.e.prev=m.e),m}finally{tr=d}}function ia(r,e,t){for(var n=r.next?r.next.e.nodes_start:t,s=e?e.e.nodes_start:t,i=r.e.nodes_start;i!==n;){var a=es(i);s.before(i),i=a}}function et(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Ni(r,e,...t){var n=r,s=ne,i;xt(()=>{s!==(s=e())&&(i&&(Ke(i),i=null),i=Te(()=>s(n,...t)))},ur)}function _c(r,e,t,n,s,i){var a,l,c=null,d=r,u,g=tr;xt(()=>{const _=e()||null;var v=_==="svg"?Ra:null;if(_!==a){var m=tr;sa(g),u&&(_===null?it(u,()=>{u=null,l=null}):_===l?at(u):(Ke(u),ra(!1))),_&&_!==l&&(u=Te(()=>{if(c=v?document.createElementNS(v,_):document.createElement(_),ir(c,c),n){var y=c.appendChild(Zr());n(c,y)}U.nodes_end=c,d.before(c)})),a=_,a&&(l=a),ra(!0),sa(m)}},ur)}function pc(r,e){if(e){const t=document.body;r.autofocus=!0,hr(()=>{document.activeElement===t&&r.focus()})}}let aa=!1;function vc(){aa||(aa=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(const t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function fo(r,e,t,n){var s=r.__attributes??(r.__attributes={});s[e]!==(s[e]=t)&&(e==="style"&&"__styles"in r&&(r.__styles={}),e==="loading"&&(r[kl]=t),t==null?r.removeAttribute(e):typeof t!="string"&&_o(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function go(r,e,t,n,s=!1,i=!1,a=!1){var l=e||{},c=r.tagName==="OPTION";for(var d in e)d in t||(t[d]=null);var u=_o(r),g=r.__attributes??(r.__attributes={}),_=[];for(const b in t){let A=t[b];if(c&&b==="value"&&A==null){r.value=r.__value="",l[b]=A;continue}var v=l[b];if(A!==v){l[b]=A;var m=b[0]+b[1];if(m!=="$$"){if(m==="on"){const T={},E="$$"+b;let j=b.slice(2);var y=sc(j);if(rc(j)&&(j=j.slice(0,-7),T.capture=!0),!y&&v){if(A!=null)continue;r.removeEventListener(j,l[E],T),l[E]=null}if(A!=null)if(y)r[`__${j}`]=A,tc([j]);else{let J=function($){l[b].call(this,$)};e?l[E]=_i(j,r,J,T):_.push([b,A,()=>l[E]=_i(j,r,J,T)])}}else if(b==="style"&&A!=null)r.style.cssText=A+"";else if(b==="autofocus")pc(r,!!A);else if(b==="__value"||b==="value"&&A!=null)r.value=r[b]=r.__value=A;else{var w=b;s||(w=ac(w)),A==null&&!i?(g[b]=null,r.removeAttribute(b)):u.includes(w)&&(i||typeof A!="string")?r[w]=A:typeof A!="function"&&fo(r,w,A)}b==="style"&&"__styles"in r&&(r.__styles={})}}}return e||hr(()=>{if(r.isConnected)for(const[b,A,T]of _)l[b]===A&&T()}),l}var oa=new Map;function _o(r){var e=oa.get(r.nodeName);if(e)return e;oa.set(r.nodeName,e=[]);for(var t,n=Fn(r),s=Element.prototype;s!==n;){t=La(n);for(var i in t)t[i].set&&e.push(i);n=Fn(n)}return e}function po(r,e){var t=r.__className,n=mc(e);(t!==n||co)&&(e==null?r.removeAttribute("class"):r.className=n,r.__className=n)}function mc(r){return r??""}const yc=requestAnimationFrame,bc=()=>performance.now(),st={tick:r=>yc(r),now:()=>bc(),tasks:new Set};function vo(r){st.tasks.forEach(e=>{e.c(r)||(st.tasks.delete(e),e.f())}),st.tasks.size!==0&&st.tick(vo)}function wc(r){let e;return st.tasks.size===0&&st.tick(vo),{promise:new Promise(t=>{st.tasks.add(e={c:r,f:t})}),abort(){st.tasks.delete(e)}}}function On(r,e){r.dispatchEvent(new CustomEvent(e))}function Ac(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function la(r){const e={},t=r.split(";");for(const n of t){const[s,i]=n.split(":");if(!s||i===void 0)break;const a=Ac(s.trim());e[a]=i.trim()}return e}const Sc=r=>r;function hf(r,e,t,n){var s=(r&dl)!==0,i=(r&hl)!==0,a=s&&i,l=(r&fl)!==0,c=a?"both":s?"in":"out",d,u=e.inert,g,_;function v(){var A=W,T=U;me(null),ge(null);try{return d??(d=t()(e,(n==null?void 0:n())??{},{direction:c}))}finally{me(A),ge(T)}}var m={is_global:l,in(){var A;if(e.inert=u,!s){_==null||_.abort(),(A=_==null?void 0:_.reset)==null||A.call(_);return}i||g==null||g.abort(),On(e,"introstart"),g=pi(e,v(),_,1,()=>{On(e,"introend"),g==null||g.abort(),g=d=void 0})},out(A){if(!i){A==null||A(),d=void 0;return}e.inert=!0,On(e,"outrostart"),_=pi(e,v(),g,0,()=>{On(e,"outroend"),A==null||A()})},stop:()=>{g==null||g.abort(),_==null||_.abort()}},y=U;if((y.transitions??(y.transitions=[])).push(m),s&&Kn){var w=l;if(!w){for(var b=y.parent;b&&b.f&ur;)for(;(b=b.parent)&&!(b.f&Jn););w=!b||(b.f&Na)!==0}w&&Jr(()=>{Wr(()=>m.in())})}}function pi(r,e,t,n,s){var i=n===1;if(bl(e)){var a,l=!1;return hr(()=>{if(!l){var w=e({direction:i?"in":"out"});a=pi(r,w,t,n,s)}}),{abort:()=>{l=!0,a==null||a.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return s(),{abort:ne,deactivate:ne,reset:ne,t:()=>n};const{delay:c=0,css:d,tick:u,easing:g=Sc}=e;var _=[];if(i&&t===void 0&&(u&&u(0,1),d)){var v=la(d(0,1));_.push(v,v)}var m=()=>1-n,y=r.animate(_,{duration:c});return y.onfinish=()=>{var w=(t==null?void 0:t.t())??1-n;t==null||t.abort();var b=n-w,A=e.duration*Math.abs(b),T=[];if(A>0){if(d)for(var E=Math.ceil(A/16.666666666666668),j=0;j<=E;j+=1){var J=w+b*g(j/E),$=d(J,1-J);T.push(la($))}m=()=>{var k=y.currentTime;return w+b*g(k/A)},u&&wc(()=>{if(y.playState!=="running")return!1;var k=m();return u(k,1-k),!0})}y=r.animate(T,{duration:A,fill:"forwards"}),y.onfinish=()=>{m=()=>n,u==null||u(n,1-n),s()}},{abort:()=>{y&&(y.cancel(),y.effect=null,y.onfinish=ne)},deactivate:()=>{s=ne},reset:()=>{n===0&&(u==null||u(1,0))},t:()=>m()}}function kc(r,e,t,n=t){r.addEventListener(e,t);const s=r.__on_r;s?r.__on_r=()=>{s(),n()}:r.__on_r=n,vc()}function mo(r,e,t){if(r.multiple)return Ec(r,e);for(var n of r.options){var s=Ir(n);if(Xl(s,e)){n.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function Tc(r,e){Jr(()=>{var t=new MutationObserver(()=>{var n=r.__value;mo(r,n)});return t.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function xc(r,e,t=e){var n=!0;kc(r,"change",()=>{var s;if(r.multiple)s=[].map.call(r.querySelectorAll(":checked"),Ir);else{var i=r.querySelector(":checked");s=i&&Ir(i)}t(s)}),Jr(()=>{var s=e();if(mo(r,s,n),n&&s===void 0){var i=r.querySelector(":checked");i!==null&&(s=Ir(i),t(s))}r.__value=s,n=!1}),Tc(r)}function Ec(r,e){for(var t of r.options)t.selected=~e.indexOf(Ir(t))}function Ir(r){return"__value"in r?r.__value:r.value}function Oc(r){return function(...e){var t=e[0];return t.stopPropagation(),r==null?void 0:r.apply(this,e)}}function ff(r){G===null&&Li(),G.l!==null?jc(G).m.push(r):Nl(()=>{const e=Wr(r);if(typeof e=="function")return e})}function Pc(r,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:n})}function Cc(){const r=G;return r===null&&Li(),(e,t,n)=>{var i;const s=(i=r.s.$$events)==null?void 0:i[e];if(s){const a=zr(s)?s.slice():[s],l=Pc(e,t,n);for(const c of a)c.call(r.x,l);return!l.defaultPrevented}return!0}}function jc(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}function Mi(r,e,t){if(r==null)return e(void 0),t&&t(void 0),ne;const n=Wr(()=>r.subscribe(e,t));return n.unsubscribe?()=>n.unsubscribe():n}let Pn=!1;function ti(r,e,t){const n=t[e]??(t[e]={store:null,source:Br(void 0),unsubscribe:ne});if(n.store!==r)if(n.unsubscribe(),n.store=r??null,r==null)n.source.v=void 0,n.unsubscribe=ne;else{var s=!0;n.unsubscribe=Mi(r,i=>{s?n.source.v=i:re(n.source,i)}),s=!1}return te(n.source)}function $c(){const r={};return za(()=>{for(var e in r)r[e].unsubscribe()}),r}function gf(r,e,t){return r.set(t),e}function Rc(r){var e=Pn;try{return Pn=!1,[r(),Pn]}finally{Pn=e}}const Ic={get(r,e){if(!r.exclude.includes(e))return r.props[e]},set(r,e){return!1},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function yo(r,e,t){return new Proxy({props:r,exclude:e},Ic)}function ca(r){for(var e=U,t=U;e!==null&&!(e.f&(xe|Vr));)e=e.parent;try{return ge(e),r()}finally{ge(t)}}function Z(r,e,t,n){var J;var s=(t&al)!==0,i=(t&ol)!==0,a=(t&cl)!==0,l=(t&ul)!==0,c=!1,d;a?[d,c]=Rc(()=>r[e]):d=r[e];var u=(J=Qt(r,e))==null?void 0:J.set,g=n,_=!0,v=!1,m=()=>(v=!0,_&&(_=!1,l?g=Wr(n):g=n),g);d===void 0&&n!==void 0&&(u&&i&&Pl(),d=m(),u&&u(d));var y;if(i)y=()=>{var $=r[e];return $===void 0?m():(_=!0,v=!1,$)};else{var w=ca(()=>(s?Be:Dl)(()=>r[e]));w.f|=Al,y=()=>{var $=te(w);return $!==void 0&&(g=void 0),$===void 0?g:$}}if(!(t&ll))return y;if(u){var b=r.$$legacy;return function($,k){return arguments.length>0?((!i||!k||b||c)&&u(k?y():$),$):y()}}var A=!1,T=!1,E=Br(d),j=ca(()=>Be(()=>{var $=y(),k=te(E),x=W;return A||$===void 0&&x.f&cr?(A=!1,T=!0,k):(T=!1,E.v=$)}));return s||(j.equals=$i),function($,k){if(arguments.length>0){const x=k?te(j):i&&a?Gt($):$;return j.equals(x)||(A=!0,re(E,x),v&&g!==void 0&&(g=x),Wr(()=>te(j))),$}return te(j)}}function Lc(r){Ml(()=>{r();var e=U;e.f&We&&(pl(),Ee(e,lr))})}function _f(...r){return function(e){const{stopImmediatePropagation:t}=e;let n=!1;e.stopImmediatePropagation=()=>{n=!0,t.call(e)};const s=[];for(const i of r){try{i==null||i.call(this,e)}catch(a){s.push(a)}if(n)break}for(let i of s)queueMicrotask(()=>{throw i})}}function pf(){const r=G;return r===null&&Li(),e=>t=>{var s;const n=(s=r.s.$$events)==null?void 0:s[e];if(n){const i=zr(n)?n.slice():[n];for(const a of i)a.call(r.x,t);return!t.defaultPrevented}return!0}}var Dc=He("<div></div>");function Uc(r,e){Qr(e,!0);let t=Z(e,"height",3,"64px"),n=Z(e,"width",3,"64px"),s=Z(e,"thickness",3,"8px"),i=Z(e,"color",3,"rgb(var(--kr-color-text-tertiary))");var a=Dc();Yn(()=>{po(a,`loader ${e.class??""} svelte-132bf27`),fo(a,"style",`width: ${n()}; height: ${t()}; border-width: ${s()}; border-color: ${i()}`)}),oe(r,a),Xr()}var Nc=He('<div flex="" justify-center="" items-center=""><!></div>');function vf(r,e){Qr(e,!0);let t=Z(e,"tag",3,"button"),n=Z(e,"type",3,"button"),s=Z(e,"disabled",3,!1),i=Z(e,"tooltip",3,null),a=Z(e,"href",3,null),l=Z(e,"openInNewTab",3,!1),c=Z(e,"active",3,!1),d=Z(e,"color",3,"orange"),u=Z(e,"loading",3,!1),g=Z(e,"dense",3,!1),_=Z(e,"blurOnClick",3,!1),v=yo(e,["$$slots","$$events","$$legacy","tag","type","disabled","tooltip","href","openInNewTab","active","color","loading","dense","blurOnClick","children"]),m=Be(()=>s()||u()),y=Be(()=>te(m)&&t()!=="button"?"pointer-events-none c-warm-gray-400 hover:bg-opacity-0 cursor-not-allowed":"hover:bg-opacity-20"),w=Il(void 0),b=Cc(),A=Be(()=>c()?"bg-orange bg-opacity-10":"bg-transparent"),T=Be(()=>g()?"px-2 py-1":"px-3 py-2");Lc(()=>{switch(d()){case"lime":re(w,"c-lime hover:bg-lime");break;case"green":re(w,"c-green hover:bg-green");break;case"sky":re(w,"c-sky hover:bg-sky");break;case"red":re(w,"c-red hover:bg-red");break;case"nocolor":re(w,"c-text-primary hover:bg-gray dark:hover:bg-white dark:hover:bg-opacity-10");break;case"nocolor-inverted":re(w,"c-background-primary hover:bg-gray dark:hover:bg-white dark:hover:bg-opacity-10");break;case"orange":re(w,"c-orange hover:bg-orange");break}});function E($){b("click"),_()&&document.activeElement&&document.activeElement.blur()}var j=Yt(),J=Jt(j);_c(J,t,!1,($,k)=>{let x;Yn(()=>x=go($,x,{...v,onclick:Oc(E),disabled:te(m),type:n(),href:a(),target:l()?"_blank":null,"display-inline-block":!0,"decoration-none":!0,"text-sm":!0,"font-semibold":!0,"font-sans":!0,rounded:!0,"b-none":!0,"font-500":!0,"cursor-pointer":!0,"transition-opacity":!0,class:`${te(y)} ${te(T)} ${te(w)} ${te(A)} ${e.class} disabled:c-warm-gray-400 disabled:hover:bg-opacity-0 disabled:cursor-not-allowed`,role:"button",tabindex:"0",title:i()},void 0,$.namespaceURI===Ra,$.nodeName.includes("-")));var C=Yt(),I=Jt(C);uc(I,u,H=>{var Y=Yt(),Q=Jt(Y);Mn(Q,u,P=>{var V=Nc(),K=Kr(V);Uc(K,{width:"12px",height:"12px",thickness:"2px"}),oe(P,V)},P=>{var V=Yt(),K=Jt(V);Ni(K,()=>e.children??ne),oe(P,V)}),oe(H,Y)}),oe(k,C)}),oe(r,j),Xr()}const Wt=[];function Mc(r,e){return{subscribe:Et(r,e).subscribe}}function Et(r,e=ne){let t=null;const n=new Set;function s(l){if(ji(r,l)&&(r=l,t)){const c=!Wt.length;for(const d of n)d[1](),Wt.push(d,r);if(c){for(let d=0;d<Wt.length;d+=2)Wt[d][0](Wt[d+1]);Wt.length=0}}}function i(l){s(l(r))}function a(l,c=ne){const d=[l,c];return n.add(d),n.size===1&&(t=e(s,i)||ne),l(r),()=>{n.delete(d),n.size===0&&t&&(t(),t=null)}}return{set:s,update:i,subscribe:a}}function bo(r,e,t){const n=!Array.isArray(r),s=n?[r]:r;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return Mc(t,(a,l)=>{let c=!1;const d=[];let u=0,g=ne;const _=()=>{if(u)return;g();const m=e(n?d[0]:d,a,l);i?a(m):g=typeof m=="function"?m:ne},v=s.map((m,y)=>Mi(m,w=>{d[y]=w,u&=~(1<<y),c&&_()},()=>{u|=1<<y}));return c=!0,_(),function(){Da(v),g(),c=!1}})}function rr(r){let e;return Mi(r,t=>e=t)(),e}const Bc="modulepreload",Fc=function(r){return"/"+r},ua={},ar=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=Fc(c),c in ua)return;ua[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":Bc,d||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),d)return new Promise((_,v)=>{g.addEventListener("load",_),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},qc=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>ar(async()=>{const{default:n}=await Promise.resolve().then(()=>fr);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class Bi extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Wc extends Bi{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Kc extends Bi{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Hc extends Bi{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var vi;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(vi||(vi={}));var zc=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(g){a(g)}}function c(u){try{d(n.throw(u))}catch(g){a(g)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};class Gc{constructor(e,{headers:t={},customFetch:n,region:s=vi.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=qc(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return zc(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=t;let l={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(m=>{throw new Wc(m)}),g=u.headers.get("x-relay-error");if(g&&g==="true")throw new Kc(u);if(!u.ok)throw new Hc(u);let _=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return _==="application/json"?v=yield u.json():_==="application/octet-stream"?v=yield u.blob():_==="text/event-stream"?v=u:_==="multipart/form-data"?v=yield u.formData():v=yield u.text(),{data:v,error:null}}catch(s){return{data:null,error:s}}})}}var X=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wo(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Vc(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),t}var he={},Fi={},ts={},en={},rs={},ns={},Jc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},or=Jc();const Yc=or.fetch,Ao=or.fetch.bind(or),So=or.Headers,Qc=or.Request,Xc=or.Response,fr=Object.freeze(Object.defineProperty({__proto__:null,Headers:So,Request:Qc,Response:Xc,default:Ao,fetch:Yc},Symbol.toStringTag,{value:"Module"})),Zc=Vc(fr);var ss={};Object.defineProperty(ss,"__esModule",{value:!0});class eu extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}ss.default=eu;var ko=X&&X.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ns,"__esModule",{value:!0});const tu=ko(Zc),ru=ko(ss);let nu=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=tu.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let d=null,u=null,g=null,_=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=b:u=JSON.parse(b))}const y=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),w=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&w&&w.length>1&&(g=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,g=null,_=406,v="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await i.text();try{d=JSON.parse(y),Array.isArray(d)&&i.status===404&&(u=[],d=null,_=200,v="OK")}catch{i.status===404&&y===""?(_=204,v="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,_=200,v="OK"),d&&this.shouldThrowOnError)throw new ru.default(d)}return{error:d,data:u,count:g,status:_,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}};ns.default=nu;var su=X&&X.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rs,"__esModule",{value:!0});const iu=su(ns);let au=class extends iu.default{select(e){let t=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${d}"; options=${c};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};rs.default=au;var ou=X&&X.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(en,"__esModule",{value:!0});const lu=ou(rs);let cu=class extends lu.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};en.default=cu;var uu=X&&X.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ts,"__esModule",{value:!0});const Cr=uu(en);let du=class{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new Cr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Cr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Cr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new Cr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Cr.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ts.default=du;var is={},as={};Object.defineProperty(as,"__esModule",{value:!0});as.version=void 0;as.version="0.0.0-automated";Object.defineProperty(is,"__esModule",{value:!0});is.DEFAULT_HEADERS=void 0;const hu=as;is.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${hu.version}`};var To=X&&X.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fi,"__esModule",{value:!0});const fu=To(ts),gu=To(en),_u=is;let pu=class xo{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},_u.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new fu.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new xo(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:s=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${e}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(t).filter(([u,g])=>g!==void 0).map(([u,g])=>[u,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([u,g])=>{l.searchParams.append(u,g)})):(a="POST",c=t);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new gu.default({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Fi.default=pu;var gr=X&&X.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(he,"__esModule",{value:!0});he.PostgrestError=he.PostgrestBuilder=he.PostgrestTransformBuilder=he.PostgrestFilterBuilder=he.PostgrestQueryBuilder=he.PostgrestClient=void 0;const Eo=gr(Fi);he.PostgrestClient=Eo.default;const Oo=gr(ts);he.PostgrestQueryBuilder=Oo.default;const Po=gr(en);he.PostgrestFilterBuilder=Po.default;const Co=gr(rs);he.PostgrestTransformBuilder=Co.default;const jo=gr(ns);he.PostgrestBuilder=jo.default;const $o=gr(ss);he.PostgrestError=$o.default;var vu=he.default={PostgrestClient:Eo.default,PostgrestQueryBuilder:Oo.default,PostgrestFilterBuilder:Po.default,PostgrestTransformBuilder:Co.default,PostgrestBuilder:jo.default,PostgrestError:$o.default};const{PostgrestClient:mu,PostgrestQueryBuilder:Af,PostgrestFilterBuilder:Sf,PostgrestTransformBuilder:kf,PostgrestBuilder:Tf}=vu,yu="2.10.9",bu={"X-Client-Info":`realtime-js/${yu}`},wu="1.0.0",Ro=1e4,Au=1e3;var nr;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(nr||(nr={}));var pe;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(pe||(pe={}));var ke;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(ke||(ke={}));var mi;(function(r){r.websocket="websocket"})(mi||(mi={}));var St;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(St||(St={}));class Su{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(e.slice(a,a+s));a=a+s;const c=n.decode(e.slice(a,a+i));a=a+i;const d=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Io{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var z;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(z||(z={}));const da=(r,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,a)=>(i[a]=ku(a,r,e,s),i),{})},ku=(r,e,t,n)=>{const s=e.find(l=>l.name===r),i=s==null?void 0:s.type,a=t[r];return i&&!n.includes(i)?Lo(i,a):yi(a)},Lo=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Ou(e,t)}switch(r){case z.bool:return Tu(e);case z.float4:case z.float8:case z.int2:case z.int4:case z.int8:case z.numeric:case z.oid:return xu(e);case z.json:case z.jsonb:return Eu(e);case z.timestamp:return Pu(e);case z.abstime:case z.date:case z.daterange:case z.int4range:case z.int8range:case z.money:case z.reltime:case z.text:case z.time:case z.timestamptz:case z.timetz:case z.tsrange:case z.tstzrange:return yi(e);default:return yi(e)}},yi=r=>r,Tu=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},xu=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Eu=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Ou=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let i;const a=r.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Lo(e,l))}return r},Pu=r=>typeof r=="string"?r.replace(" ","T"):r,Do=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ri{constructor(e,t,n={},s=Ro){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ha;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(ha||(ha={}));class Lr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Lr.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=Lr.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Lr.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const i=this.cloneDeep(e),a=this.transformState(t),l={},c={};return this.map(i,(d,u)=>{a[d]||(c[d]=u)}),this.map(a,(d,u)=>{const g=i[d];if(g){const _=u.map(w=>w.presence_ref),v=g.map(w=>w.presence_ref),m=u.filter(w=>v.indexOf(w.presence_ref)<0),y=g.filter(w=>_.indexOf(w.presence_ref)<0);m.length>0&&(l[d]=m),y.length>0&&(c[d]=y)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(e,t,n,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const g=e[l].map(v=>v.presence_ref),_=u.filter(v=>g.indexOf(v.presence_ref)<0);e[l].unshift(..._)}n(l,u,c)}),this.map(a,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(g=>g.presence_ref);d=d.filter(g=>u.indexOf(g.presence_ref)<0),e[l]=d,s(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return"metas"in s?t[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fa;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(fa||(fa={}));var ga;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(ga||(ga={}));var _a;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(_a||(_a={}));class qi{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=pe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ri(this,ke.join,this.params,this.timeout),this.rejoinTimer=new Io(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ke.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Lr(this),this.broadcastEndpointURL=Do(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const c={},d={broadcast:i,presence:a,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:u})=>{var g;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const _=this.bindings.postgres_changes,v=(g=_==null?void 0:_.length)!==null&&g!==void 0?g:0,m=[];for(let y=0;y<v;y++){const w=_[y],{filter:{event:b,schema:A,table:T,filter:E}}=w,j=u&&u[y];if(j&&j.event===b&&j.schema===A&&j.table===T&&j.filter===E)m.push(Object.assign(Object.assign({},w),{id:j.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ke.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new ri(this,ke.leave,{},e);s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ri(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,i;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=ke;if(n&&[l,c,d,u].indexOf(a)>=0&&n!==this._joinRef())return;let _=this._onMessage(a,t,n);if(t&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var m,y,w;return((m=v.filter)===null||m===void 0?void 0:m.event)==="*"||((w=(y=v.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(v=>v.callback(_,n)):(i=this.bindings[a])===null||i===void 0||i.filter(v=>{var m,y,w,b,A,T;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in v){const E=v.id,j=(m=v.filter)===null||m===void 0?void 0:m.event;return E&&((y=t.ids)===null||y===void 0?void 0:y.includes(E))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const E=(A=(b=v==null?void 0:v.filter)===null||b===void 0?void 0:b.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return E==="*"||E===((T=t==null?void 0:t.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===a}).map(v=>{if(typeof _=="object"&&"ids"in _){const m=_.data,{schema:y,table:w,commit_timestamp:b,type:A,errors:T}=m;_=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:b,eventType:A,new:{},old:{},errors:T}),this._getPayloadRecords(m))}v.callback(_,n)})}_isClosed(){return this.state===pe.closed}_isJoined(){return this.state===pe.joined}_isJoining(){return this.state===pe.joining}_isLeaving(){return this.state===pe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&qi.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ke.close,{},e)}_onError(e){this._on(ke.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=da(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=da(e.columns,e.old_record)),t}}const Cu=()=>{},ju=typeof WebSocket<"u",$u=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ru{constructor(e,t){var n;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=bu,this.params={},this.timeout=Ro,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Cu,this.conn=null,this.sendBuffer=[],this.serializer=new Su,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>ar(async()=>{const{default:c}=await Promise.resolve().then(()=>fr);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${e}/${mi.websocket}`,this.httpEndpoint=Do(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessToken=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Io(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(ju){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Iu(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),ar(async()=>{const{default:e}=await import("./browser-BE-n_jYD.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case nr.connecting:return St.Connecting;case nr.open:return St.Open;case nr.closing:return St.Closing;default:return St.Closed}}isConnected(){return this.connectionState()===St.Open}channel(e,t={config:{}}){const n=new qi(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:i}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){if(e){let t=null;try{t=JSON.parse(atob(e.split(".")[1]))}catch{}if(t&&t.exp&&!(Math.floor(Date.now()/1e3)-t.exp<0)){this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${t.exp}`);return}}this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(ke.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:wu}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:s,payload:i,ref:a}=t;(a&&a===this.pendingHeartbeatRef||s===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${a&&"("+a+")"||""}`,i),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ke.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Au,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([$u],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class Iu{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=nr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Wi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ee(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Lu extends Wi{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class bi extends Wi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Du=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(g){a(g)}}function c(u){try{d(n.throw(u))}catch(g){a(g)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};const Uo=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>ar(async()=>{const{default:n}=await Promise.resolve().then(()=>fr);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Uu=()=>Du(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ar(()=>Promise.resolve().then(()=>fr),void 0)).Response:Response}),wi=r=>{if(Array.isArray(r))return r.map(t=>wi(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=wi(n)}),e};var Ot=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(g){a(g)}}function c(u){try{d(n.throw(u))}catch(g){a(g)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};const ni=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Nu=(r,e,t)=>Ot(void 0,void 0,void 0,function*(){const n=yield Uu();r instanceof n&&!(t!=null&&t.noResolveJson)?r.json().then(s=>{e(new Lu(ni(s),r.status||500))}).catch(s=>{e(new bi(ni(s),s))}):e(new bi(ni(r),r))}),Mu=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),t))};function tn(r,e,t,n,s,i){return Ot(this,void 0,void 0,function*(){return new Promise((a,l)=>{r(t,Mu(e,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>Nu(c,l,n))})})}function Hn(r,e,t,n){return Ot(this,void 0,void 0,function*(){return tn(r,"GET",e,t,n)})}function tt(r,e,t,n,s){return Ot(this,void 0,void 0,function*(){return tn(r,"POST",e,n,s,t)})}function Bu(r,e,t,n,s){return Ot(this,void 0,void 0,function*(){return tn(r,"PUT",e,n,s,t)})}function Fu(r,e,t,n){return Ot(this,void 0,void 0,function*(){return tn(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function No(r,e,t,n,s){return Ot(this,void 0,void 0,function*(){return tn(r,"DELETE",e,n,s,t)})}var ue=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(g){a(g)}}function c(u){try{d(n.throw(u))}catch(g){a(g)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};const qu={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pa={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Wu{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Uo(s)}uploadOrUpdate(e,t,n,s){return ue(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},pa),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const d=this._removeEmptyFolders(t),u=this._getFinalPath(d),g=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),_=yield g.json();return g.ok?{data:{path:d,id:_.Id,fullPath:_.Key},error:null}:{data:null,error:_}}catch(i){if(ee(i))return{data:null,error:i};throw i}})}upload(e,t,n){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return ue(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:pa.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const g=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),_=yield g.json();return g.ok?{data:{path:i,fullPath:_.Key},error:null}:{data:null,error:_}}catch(c){if(ee(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return ue(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield tt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Wi("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}})}update(e,t,n){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return ue(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}})}copy(e,t,n){return ue(this,void 0,void 0,function*(){try{return{data:{path:(yield tt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return ue(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield tt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return ue(this,void 0,void 0,function*(){try{const s=yield tt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}})}download(e,t){return ue(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Hn(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ee(l))return{data:null,error:l};throw l}})}info(e){return ue(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield Hn(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:wi(n),error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}})}exists(e){return ue(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Fu(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ee(n)&&n instanceof bi){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&s.push(c);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return ue(this,void 0,void 0,function*(){try{return{data:yield No(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ee(t))return{data:null,error:t};throw t}})}list(e,t,n){return ue(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},qu),t),{prefix:e||""});return{data:yield tt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ku="2.7.1",Hu={"X-Client-Info":`storage-js/${Ku}`};var Kt=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(g){a(g)}}function c(u){try{d(n.throw(u))}catch(g){a(g)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};class zu{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Hu),t),this.fetch=Uo(n)}listBuckets(){return Kt(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ee(e))return{data:null,error:e};throw e}})}getBucket(e){return Kt(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ee(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Kt(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Kt(this,void 0,void 0,function*(){try{return{data:yield Bu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Kt(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ee(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Kt(this,void 0,void 0,function*(){try{return{data:yield No(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ee(t))return{data:null,error:t};throw t}})}}class Gu extends zu{constructor(e,t={},n){super(e,t,n)}from(e){return new Wu(this.url,this.headers,e,this.fetch)}}const Vu="2.47.2";let Rr="";typeof Deno<"u"?Rr="deno":typeof document<"u"?Rr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rr="react-native":Rr="node";const Ju={"X-Client-Info":`supabase-js-${Rr}/${Vu}`},Yu={headers:Ju},Qu={schema:"public"},Xu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Zu={};var ed=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(g){a(g)}}function c(u){try{d(n.throw(u))}catch(g){a(g)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};const td=r=>{let e;return r?e=r:typeof fetch>"u"?e=Ao:e=fetch,(...t)=>e(...t)},rd=()=>typeof Headers>"u"?So:Headers,nd=(r,e,t)=>{const n=td(t),s=rd();return(i,a)=>ed(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:r;let d=new s(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",r),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},a),{headers:d}))})};var sd=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(g){a(g)}}function c(u){try{d(n.throw(u))}catch(g){a(g)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};function id(r){return r.replace(/\/$/,"")}function ad(r,e){const{db:t,auth:n,realtime:s,global:i}=r,{db:a,auth:l,realtime:c,global:d}=e,u={db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},d),i),accessToken:()=>sd(this,void 0,void 0,function*(){return""})};return r.accessToken?u.accessToken=r.accessToken:delete u.accessToken,u}const Mo="2.66.1",od="http://localhost:9999",ld="supabase.auth.token",cd={"X-Client-Info":`gotrue-js/${Mo}`},va=10,Ai="X-Supabase-Api-Version",Bo={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function ud(r){return Math.round(Date.now()/1e3)+r}function dd(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Se=()=>typeof document<"u",wt={tested:!1,writable:!1},Dr=()=>{if(!Se())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wt.tested)return wt.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),wt.tested=!0,wt.writable=!0}catch{wt.tested=!0,wt.writable=!1}return wt.writable};function si(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((n,s)=>{e[s]=n}),e}const Fo=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>ar(async()=>{const{default:n}=await Promise.resolve().then(()=>fr);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},hd=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",qo=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Cn=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},jn=async(r,e)=>{await r.removeItem(e)};function fd(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,s,i,a,l,c,d,u=0;for(r=r.replace("-","+").replace("_","/");u<r.length;)a=e.indexOf(r.charAt(u++)),l=e.indexOf(r.charAt(u++)),c=e.indexOf(r.charAt(u++)),d=e.indexOf(r.charAt(u++)),n=a<<2|l>>4,s=(l&15)<<4|c>>2,i=(c&3)<<6|d,t=t+String.fromCharCode(n),c!=64&&s!=0&&(t=t+String.fromCharCode(s)),d!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class os{constructor(){this.promise=new os.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}os.promiseConstructor=Promise;function ma(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(fd(n))}async function gd(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function _d(r,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await r(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function pd(r){return("0"+r.toString(16)).substr(-2)}function vd(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,pd).join("")}async function md(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function yd(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bd(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await md(r);return yd(t)}async function Ht(r,e,t=!1){const n=vd();let s=n;t&&(s+="/PASSWORD_RECOVERY"),await qo(r,`${e}-code-verifier`,s);const i=await bd(n);return[i,n===i?"plain":"s256"]}const wd=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ad(r){const e=r.headers.get(Ai);if(!e||!e.match(wd))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Ki extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function R(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Sd extends Ki{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function kd(r){return R(r)&&r.name==="AuthApiError"}class Wo extends Ki{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Pt extends Ki{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class Xe extends Pt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Td(r){return R(r)&&r.name==="AuthSessionMissingError"}class ii extends Pt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $n extends Pt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Rn extends Pt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function xd(r){return R(r)&&r.name==="AuthImplicitGrantRedirectError"}class ya extends Pt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Si extends Pt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ai(r){return R(r)&&r.name==="AuthRetryableFetchError"}class ba extends Pt{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}var Ed=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const At=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Od=[502,503,504];async function wa(r){var e;if(!hd(r))throw new Si(At(r),0);if(Od.includes(r.status))throw new Si(At(r),r.status);let t;try{t=await r.json()}catch(i){throw new Wo(At(i),i)}let n;const s=Ad(r);if(s&&s.getTime()>=Bo["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new ba(At(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Xe}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new ba(At(t),r.status,t.weak_password.reasons);throw new Sd(At(t),r.status||500,n)}const Pd=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};async function B(r,e,t,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Ai]||(i[Ai]=Bo["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Cd(r,e,t+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Cd(r,e,t,n,s,i){const a=Pd(e,n,s,i);let l;try{l=await r(t,Object.assign({},a))}catch(c){throw console.error(c),new Si(At(c),0)}if(l.ok||await wa(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await wa(c)}}function Ze(r){var e;let t=null;Id(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=ud(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function Aa(r){const e=Ze(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function rt(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function jd(r){return{data:r,error:null}}function $d(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i}=r,a=Ed(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function Rd(r){return r}function Id(r){return r.access_token&&r.refresh_token&&r.expires_in}var Ld=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};class Dd{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Fo(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await B(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(R(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await B(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:rt})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Ld(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:$d,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(R(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await B(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:rt})}catch(t){if(R(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,i,a,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Rd});if(u.error)throw u.error;const g=await u.json(),_=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,v=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(m.split(";")[1].split("=")[1]);d[`${w}Page`]=y}),d.total=parseInt(_)),{data:Object.assign(Object.assign({},g),d),error:null}}catch(d){if(R(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await B(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:rt})}catch(t){if(R(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await B(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:rt})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await B(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:rt})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await B(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:n}}catch(t){if(R(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await B(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(R(t))return{data:null,error:t};throw t}}}const Ud={getItem:r=>Dr()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Dr()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Dr()&&globalThis.localStorage.removeItem(r)}};function Sa(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function Nd(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const zt={debug:!!(globalThis&&Dr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ko extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Md extends Ko{}async function Bd(r,e,t){zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),zt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,s.name);try{return await t()}finally{zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,s.name)}}else{if(e===0)throw zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Md(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(zt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}Nd();const Fd={url:od,storageKey:ld,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cd,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},jr=30*1e3,ka=3;async function Ta(r,e,t){return await t()}class Hr{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Hr.nextInstanceID,Hr.nextInstanceID+=1,this.instanceID>0&&Se()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Fd),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Dd({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Fo(s.fetch),this.lock=s.lock||Ta,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Se()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Bd:this.lock=Ta,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Dr()?this.storage=Ud:(this.memoryStorage={},this.storage=Sa(this.memoryStorage)):(this.memoryStorage={},this.storage=Sa(this.memoryStorage)),Se()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Mo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Se()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:s}=await this._getSessionFromURL(t);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),xd(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return R(t)?{error:t}:{error:new Wo("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ze}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(R(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,s;try{let i;if("email"in e){const{email:u,password:g,options:_}=e;let v=null,m=null;this.flowType==="pkce"&&([v,m]=await Ht(this.storage,this.storageKey)),i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:u,password:g,data:(t=_==null?void 0:_.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:v,code_challenge_method:m},xform:Ze})}else if("phone"in e){const{phone:u,password:g,options:_}=e;i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:g,data:(n=_==null?void 0:_.data)!==null&&n!==void 0?n:{},channel:(s=_==null?void 0:_.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Ze})}else throw new $n("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(R(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:l}=e;t=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Aa})}else if("phone"in e){const{phone:i,password:a,options:l}=e;t=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Aa})}else throw new $n("You must provide either an email or phone number and a password");const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ii}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(t){if(R(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Cn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(t??"").split("/");try{const{data:i,error:a}=await B(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ze});if(await jn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ii}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(R(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:i,nonce:a}=e,l=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ze}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ii}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(R(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,i,a;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ht(this.storage,this.storageKey));const{error:g}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new $n("You must provide either an email or phone number.")}catch(l){if(R(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,n;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ze});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,d=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(R(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Ht(this.storage,this.storageKey)),await B(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:jd})}catch(i){if(R(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Xe;const{error:s}=await B(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(R(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:a}=await B(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:a,error:l}=await B(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new $n("You must provide either an email or phone number and a type")}catch(t){if(R(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Cn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:rt}):await this._useSession(async t=>{var n,s,i;const{data:a,error:l}=t;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xe}:await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:rt})})}catch(t){if(R(t))return Td(t)&&(await this._removeSession(),await jn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Xe;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Ht(this.storage,this.storageKey));const{data:d,error:u}=await B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:rt});if(u)throw u;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return ma(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Xe;const t=Date.now()/1e3;let n=t,s=!0,i=null;const a=ma(e.access_token);if(a.exp&&(n=a.exp,s=n<=t),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(R(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:a,error:l}=t;if(l)throw l;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Xe;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(R(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!Se())throw new Rn("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Rn("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new ya("Not a valid PKCE flow url.");const t=si(window.location.href);if(e){if(!t.code)throw new ya("No code detected.");const{data:A,error:T}=await this._exchangeCodeForSession(t.code);if(T)throw T;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:A.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new Rn(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!a||!d)throw new Rn("No session defined in URL");const u=Math.round(Date.now()/1e3),g=parseInt(l);let _=u+g;c&&(_=parseInt(c));const v=_-u;v*1e3<=jr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${g}s`);const m=_-g;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,_,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,_,u);const{data:y,error:w}=await this._getUser(i);if(w)throw w;const b={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:g,expires_at:_,refresh_token:a,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:t.type},error:null}}catch(t){if(R(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=si(window.location.href);return!!(Se()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=si(window.location.href),t=await Cn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{error:i};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(kd(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await jn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=dd(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ht(this.storage,this.storageKey,!0));try{return await B(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(R(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(R(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async i=>{var a,l,c,d,u;const{data:g,error:_}=i;if(_)throw _;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await B(this.fetch,"GET",v,{headers:this.headers,jwt:(u=(d=g.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Se()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(R(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:a}=t;if(a)throw a;return await B(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(R(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await _d(async s=>(s>0&&await gd(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ze})),(s,i)=>{const a=200*Math.pow(2,s);return i&&ai(i)&&Date.now()+a-n<jr})}catch(n){if(this._debug(t,"error",n),R(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Se()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Cn(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<s+va;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${va}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),ai(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Xe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new os;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Xe;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),R(i)){const a={session:null,error:i};return ai(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await qo(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await jn(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Se()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),jr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/jr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${jr}ms, refresh threshold is ${ka} ticks`),s<=ka&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ko)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Se()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Ht(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await B(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(R(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await B(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(R(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:l}=await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(t){if(R(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(R(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}}Hr.nextInstanceID=0;const qd=Hr;class Wd extends qd{constructor(e){super(e)}}var Kd=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(g){a(g)}}function c(u){try{d(n.throw(u))}catch(g){a(g)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(r,e||[])).next())})};class Hd{constructor(e,t,n){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=id(e);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:Qu,realtime:Zu,auth:Object.assign(Object.assign({},Xu),{storageKey:c}),global:Yu},u=ad(n??{},d);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(g,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=u.auth)!==null&&a!==void 0?a:{},this.headers,u.global.fetch),this.fetch=nd(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},u.realtime)),this.rest=new mu(`${l}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Gc(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Gu(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Kd(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:i,flowType:a,lock:l,debug:c},d,u){var g;const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Wd({url:this.authUrl,headers:Object.assign(Object.assign({},_),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:a,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:(g="Authorization"in this.headers)!==null&&g!==void 0?g:!1})}_initRealtimeClient(e){return new Ru(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const zd=(r,e,t)=>new Hd(r,e,t);var Ho={exports:{}};(function(r,e){(function(t,n){n(r)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:X,function(t){var n,s;if(!((s=(n=globalThis.chrome)==null?void 0:n.runtime)!=null&&s.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const i="The message port closed before a response was received.",a=l=>{const c={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(c).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class d extends WeakMap{constructor(x,C=void 0){super(C),this.createItem=x}get(x){return this.has(x)||this.set(x,this.createItem(x)),super.get(x)}}const u=k=>k&&typeof k=="object"&&typeof k.then=="function",g=(k,x)=>(...C)=>{l.runtime.lastError?k.reject(new Error(l.runtime.lastError.message)):x.singleCallbackArg||C.length<=1&&x.singleCallbackArg!==!1?k.resolve(C[0]):k.resolve(C)},_=k=>k==1?"argument":"arguments",v=(k,x)=>function(I,...H){if(H.length<x.minArgs)throw new Error(`Expected at least ${x.minArgs} ${_(x.minArgs)} for ${k}(), got ${H.length}`);if(H.length>x.maxArgs)throw new Error(`Expected at most ${x.maxArgs} ${_(x.maxArgs)} for ${k}(), got ${H.length}`);return new Promise((Y,Q)=>{if(x.fallbackToNoCallback)try{I[k](...H,g({resolve:Y,reject:Q},x))}catch(P){console.warn(`${k} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,P),I[k](...H),x.fallbackToNoCallback=!1,x.noCallback=!0,Y()}else x.noCallback?(I[k](...H),Y()):I[k](...H,g({resolve:Y,reject:Q},x))})},m=(k,x,C)=>new Proxy(x,{apply(I,H,Y){return C.call(H,k,...Y)}});let y=Function.call.bind(Object.prototype.hasOwnProperty);const w=(k,x={},C={})=>{let I=Object.create(null),H={has(Q,P){return P in k||P in I},get(Q,P,V){if(P in I)return I[P];if(!(P in k))return;let K=k[P];if(typeof K=="function")if(typeof x[P]=="function")K=m(k,k[P],x[P]);else if(y(C,P)){let Oe=v(P,C[P]);K=m(k,k[P],Oe)}else K=K.bind(k);else if(typeof K=="object"&&K!==null&&(y(x,P)||y(C,P)))K=w(K,x[P],C[P]);else if(y(C,"*"))K=w(K,x[P],C["*"]);else return Object.defineProperty(I,P,{configurable:!0,enumerable:!0,get(){return k[P]},set(Oe){k[P]=Oe}}),K;return I[P]=K,K},set(Q,P,V,K){return P in I?I[P]=V:k[P]=V,!0},defineProperty(Q,P,V){return Reflect.defineProperty(I,P,V)},deleteProperty(Q,P){return Reflect.deleteProperty(I,P)}},Y=Object.create(k);return new Proxy(Y,H)},b=k=>({addListener(x,C,...I){x.addListener(k.get(C),...I)},hasListener(x,C){return x.hasListener(k.get(C))},removeListener(x,C){x.removeListener(k.get(C))}}),A=new d(k=>typeof k!="function"?k:function(C){const I=w(C,{},{getContent:{minArgs:0,maxArgs:0}});k(I)}),T=new d(k=>typeof k!="function"?k:function(C,I,H){let Y=!1,Q,P=new Promise(je=>{Q=function(L){Y=!0,je(L)}}),V;try{V=k(C,I,Q)}catch(je){V=Promise.reject(je)}const K=V!==!0&&u(V);if(V!==!0&&!K&&!Y)return!1;const Oe=je=>{je.then(L=>{H(L)},L=>{let ut;L&&(L instanceof Error||typeof L.message=="string")?ut=L.message:ut="An unexpected error occurred",H({__mozWebExtensionPolyfillReject__:!0,message:ut})}).catch(L=>{console.error("Failed to send onMessage rejected reply",L)})};return Oe(K?V:P),!0}),E=({reject:k,resolve:x},C)=>{l.runtime.lastError?l.runtime.lastError.message===i?x():k(new Error(l.runtime.lastError.message)):C&&C.__mozWebExtensionPolyfillReject__?k(new Error(C.message)):x(C)},j=(k,x,C,...I)=>{if(I.length<x.minArgs)throw new Error(`Expected at least ${x.minArgs} ${_(x.minArgs)} for ${k}(), got ${I.length}`);if(I.length>x.maxArgs)throw new Error(`Expected at most ${x.maxArgs} ${_(x.maxArgs)} for ${k}(), got ${I.length}`);return new Promise((H,Y)=>{const Q=E.bind(null,{resolve:H,reject:Y});I.push(Q),C.sendMessage(...I)})},J={devtools:{network:{onRequestFinished:b(A)}},runtime:{onMessage:b(T),onMessageExternal:b(T),sendMessage:j.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:j.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},$={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return c.privacy={network:{"*":$},services:{"*":$},websites:{"*":$}},w(l,J,c)};t.exports=a(chrome)}else t.exports=globalThis.browser})})(Ho);var le=Ho.exports;function Gd(r){let e=!1,t=[];const{update:n,subscribe:s,set:i}=Et(null);return r().then(a=>{i(a),e=!0,t.forEach(l=>l())}),{isReady:e,awaitReady:()=>new Promise(a=>{e?a():t.push(a)}),subscribe:s,set:a=>{e&&i(a)},update:n}}const Vd=Jd("https://supa.kimchi-reader.app","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhid2FvdHdkbnpoeXlpcGFnZmx5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2NzQyOTU3MjIsImV4cCI6MTk4OTg3MTcyMn0.854OCkYcRf1tygGiEAd1nAdHO9rfJjlALq7s1WwX3Xw");function Jd(r,e){return zd(r,e,{auth:{storage:{async getItem(t){return(await le.storage.local.get([t]))[t]},async setItem(t,n){await le.storage.local.set({[t]:n})},async removeItem(t){await le.storage.local.remove([t])}}}})}async function Yd(){let r=await rr(zo).auth.getSession();Go.set(r.data.session)}async function xf(){var r;return await Yd(),(r=rr(Go))==null?void 0:r.access_token}const zo=Et(Vd),Go=Gd(async()=>(await rr(zo).auth.getSession()).data.session),Qd="kimchi-reader",Xd="Kimchi Reader",Zd="A reader for korean learner",eh="0.11.4",th="module",rh={preinstall:"npx only-allow pnpm","dev:firefox":"npm run clear && cross-env APP_ENV=dev TARGET_BROWSER=firefox run-p dev::manifest dev::web dev::content dev::background","dev:chrome":"npm run clear && cross-env APP_ENV=dev TARGET_BROWSER=chrome run-p dev::manifest dev::web dev::content dev::background","dev::manifest":"esno scripts/prepare.ts","dev::web":"vite build","dev::content":"cross-env NODE_ENV=development npm run build::content","dev::background":"cross-env NODE_ENV=development npm run build::background","lint:extension":"web-ext lint --source-dir ./dist","build:firefox":"cross-env APP_ENV=prod TARGET_BROWSER=firefox run-s clear build::web build::content build::background build::manifest lint:extension build::extension","build:chrome":"cross-env APP_ENV=prod TARGET_BROWSER=chrome run-s clear build::web build::content build::background build::manifest build::extension","build::manifest":"esno scripts/manifest.ts","build::web":"vite build","build::content":"vite build --config vite.config.content.ts --mode development","build::background":"vite build --config vite.config.background.ts","build::extension":"web-ext build --source-dir ./dist --overwrite-dest","start:firefox":"web-ext run --source-dir ./dist --firefox --start-url https://audioclip.naver.com/channels/57/clips/1#chapter","start:chrome":"web-ext run --source-dir ./dist --target chromium --start-url https://audioclip.naver.com/channels/57/clips/1#chapter","start:chrome-bin":"web-ext run --source-dir ./dist --target chromium --chromium-binary=/usr/bin/google-chrome-stable --start-url https://audioclip.naver.com/channels/57/clips/1#chapter","start:firefox-android":"web-ext run -t firefox-android --adb-device 1867a578 --firefox-apk org.mozilla.fenix -s ./dist",clear:"rimraf dist"},nh={"@floating-ui/dom":"^1.6.3","@iconify-json/mdi":"^1.1.52","@iconify-json/mingcute":"^1.1.17","@supabase/supabase-js":"^2.47.2","@sveltejs/vite-plugin-svelte":"^4.0.0","@types/chrome":"^0.0.237","@types/fs-extra":"^11.0.1","@types/webextension-polyfill":"^0.10.0","@unocss/core":"^0.63.6","@unocss/extractor-svelte":"^0.63.6","@unocss/preset-attributify":"^0.63.6","@unocss/preset-icons":"^0.63.6","@unocss/preset-rem-to-px":"^0.63.6","@unocss/preset-uno":"^0.63.6",chokidar:"^3.5.3",common:"workspace:*","cross-env":"^7.0.3",dotenv:"^16.3.1",esno:"^0.16.3","fs-extra":"^11.1.1",krdict:"workspace:*","npm-run-all":"^4.1.5",rimraf:"^5.0.1",svelte:"^5.0.0","svelte-preprocess":"^6.0.0",typescript:"^5.5.0",unocss:"^0.63.6",vite:"^5.4.4","vite-plugin-static-copy":"^2.2.0","web-ext":"^8.3.0","webextension-polyfill":"^0.10.0","@zerodevx/svelte-toast":"^0.9.6","lodash.uniqwith":"^4.5.0","@types/lodash.uniqwith":"^4.5.9","lodash.isequal":"^4.5.0","@types/lodash.isequal":"^4.5.8","lodash.clonedeep":"^4.5.0","@types/lodash.clonedeep":"^4.5.9","lodash.merge":"^4.6.2","@types/lodash.merge":"^4.6.9","svelte-resize-observer-action":"^0.0.3",idb:"^7.1.1"},Ef={name:Qd,displayName:Xd,description:Zd,version:eh,type:th,private:"true",scripts:rh,devDependencies:nh};function In(){return/Android.*Firefox/.test(navigator.userAgent)}const sh=r=>r;function Vo(r){const e=r-1;return e*e*e+1}function Of(r,{delay:e=0,duration:t=400,easing:n=sh}={}){const s=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:n,css:i=>`opacity: ${i*s}`}}function Pf(r,{delay:e=0,duration:t=400,easing:n=Vo,axis:s="y"}={}){const i=getComputedStyle(r),a=+i.opacity,l=s==="y"?"height":"width",c=parseFloat(i[l]),d=s==="y"?["top","bottom"]:["left","right"],u=d.map(b=>`${b[0].toUpperCase()}${b.slice(1)}`),g=parseFloat(i[`padding${u[0]}`]),_=parseFloat(i[`padding${u[1]}`]),v=parseFloat(i[`margin${u[0]}`]),m=parseFloat(i[`margin${u[1]}`]),y=parseFloat(i[`border${u[0]}Width`]),w=parseFloat(i[`border${u[1]}Width`]);return{delay:e,duration:t,easing:n,css:b=>`overflow: hidden;opacity: ${Math.min(b*20,1)*a};${l}: ${b*c}px;padding-${d[0]}: ${b*g}px;padding-${d[1]}: ${b*_}px;margin-${d[0]}: ${b*v}px;margin-${d[1]}: ${b*m}px;border-${d[0]}-width: ${b*y}px;border-${d[1]}-width: ${b*w}px;`}}function Cf(r,{delay:e=0,duration:t=400,easing:n=Vo,start:s=0,opacity:i=0}={}){const a=getComputedStyle(r),l=+a.opacity,c=a.transform==="none"?"":a.transform,d=1-s,u=l*(1-i);return{delay:e,duration:t,easing:n,css:(g,_)=>`
			transform: ${c} scale(${1-d*_});
			opacity: ${l-u*_}
		`}}var ih=He('<div font-medium="" flex="" items-center="" bg-opacity-10="" rounded="" text-xs=""><!></div>');function Ln(r,e){Qr(e,!0);let t=Z(e,"color",3,"warm-gray"),n=Z(e,"dense",3,!1),s=Be(()=>n()?"py-0.5 px-2":"py-4px px-2");var i=ih(),a=Kr(i);Ni(a,()=>e.children??ne),Yn(()=>po(i,`${te(s)} bg-${t()} c-${t()} ${e.class}`)),oe(r,i),Xr()}const Ur=Et(null),Nr=Et(null),Mr=Et(null);bo([Ur,Nr,Mr],([r,e,t])=>r===!1&&(e===null||!e)&&(t===null||!t));let Dn=null;async function jf(r,e){let t;try{if(!(e!=null&&e.access_token)){Ur.set(!1);return}const s=e.access_token.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");t=JSON.parse(atob(s)).user_metadata;const i=(t==null?void 0:t.subscription_end)>Date.now(),a=(t==null?void 0:t.subscription_end)>new Date().getTime()+864e5*7;if(Ur.set(i),i&&a){Nr.set(!1),Mr.set(!0);return}const{data:l}=await r.from("subscriptions").select("period_end, sub_type").order("period_end",{ascending:!1}).limit(1).maybeSingle();if(!l)return Nr.set(!1),Mr.set(!0),null;let c=new Date(l.period_end).getTime()>Date.now();Nr.set(l.sub_type==="trial"),Mr.set(!c&&l.sub_type==="trial"),c||ah(r),c&&!i&&await r.auth.refreshSession()}catch(n){console.warn("Failed to load isSubscribed",n),Ur.set(!1)}}function ah(r){Dn||(Dn=r.channel("public:subscriptions").on("postgres_changes",{event:"INSERT",schema:"public",table:"subscriptions"},async e=>{await r.auth.refreshSession(),await r.removeChannel(Dn),Dn=null}).subscribe())}var oh=He('<div class="i-mingcute-check-fill" mr-2=""></div> <span>Subscription Active</span>',1),lh=He('<div class="i-mingcute-check-fill" mr-2=""></div> <span>Trial Active</span>',1),ch=He('<div class="i-mdi-cancel" mr-2=""></div> <span>Subscription Expired</span>',1),uh=He('<div class="i-mdi-cancel" mr-2=""></div> <span>No Active Subscription</span>',1),dh=He('<div flex="" flex-col="" select-none=""><div mx-auto=""><!></div></div>');function $f(r){const e=$c(),t=()=>ti(Ur,"$isSubscribed",e),n=()=>ti(Nr,"$isTrial",e),s=()=>ti(Mr,"$isTrialExpired",e);var i=dh(),a=Kr(i),l=Kr(a);Mn(l,()=>t()&&!n(),c=>{Ln(c,{color:"green",children:(d,u)=>{var g=oh();oe(d,g)},$$slots:{default:!0}})},c=>{var d=Yt(),u=Jt(d);Mn(u,()=>t()&&n(),g=>{Ln(g,{color:"sky",children:(_,v)=>{var m=lh();oe(_,m)},$$slots:{default:!0}})},g=>{var _=Yt(),v=Jt(_);Mn(v,()=>!t()&&s(),m=>{Ln(m,{color:"yellow",children:(y,w)=>{var b=ch();oe(y,b)},$$slots:{default:!0}})},m=>{Ln(m,{children:(y,w)=>{var b=uh();oe(y,b)},$$slots:{default:!0}})},!0),oe(g,_)},!0),oe(c,d)}),oe(r,i)}var zn={exports:{}};zn.exports;(function(r,e){var t=200,n="__lodash_hash_undefined__",s=800,i=16,a=9007199254740991,l="[object Arguments]",c="[object Array]",d="[object AsyncFunction]",u="[object Boolean]",g="[object Date]",_="[object Error]",v="[object Function]",m="[object GeneratorFunction]",y="[object Map]",w="[object Number]",b="[object Null]",A="[object Object]",T="[object Proxy]",E="[object RegExp]",j="[object Set]",J="[object String]",$="[object Undefined]",k="[object WeakMap]",x="[object ArrayBuffer]",C="[object DataView]",I="[object Float32Array]",H="[object Float64Array]",Y="[object Int8Array]",Q="[object Int16Array]",P="[object Int32Array]",V="[object Uint8Array]",K="[object Uint8ClampedArray]",Oe="[object Uint16Array]",je="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,ut=/^\[object .+?Constructor\]$/,ls=/^(?:0|[1-9]\d*)$/,M={};M[I]=M[H]=M[Y]=M[Q]=M[P]=M[V]=M[K]=M[Oe]=M[je]=!0,M[l]=M[c]=M[x]=M[u]=M[C]=M[g]=M[_]=M[v]=M[y]=M[w]=M[A]=M[E]=M[j]=M[J]=M[k]=!1;var _r=typeof X=="object"&&X&&X.Object===Object&&X,nn=typeof self=="object"&&self&&self.Object===Object&&self,dt=_r||nn||Function("return this")(),sn=e&&!e.nodeType&&e,ht=sn&&!0&&r&&!r.nodeType&&r,an=ht&&ht.exports===sn,pr=an&&_r.process,vr=function(){try{var o=ht&&ht.require&&ht.require("util").types;return o||pr&&pr.binding&&pr.binding("util")}catch{}}(),on=vr&&vr.isTypedArray;function cs(o,h,p){switch(p.length){case 0:return o.call(h);case 1:return o.call(h,p[0]);case 2:return o.call(h,p[0],p[1]);case 3:return o.call(h,p[0],p[1],p[2])}return o.apply(h,p)}function ln(o,h){for(var p=-1,S=Array(o);++p<o;)S[p]=h(p);return S}function cn(o){return function(h){return o(h)}}function mr(o,h){return o==null?void 0:o[h]}function un(o,h){return function(p){return o(h(p))}}var us=Array.prototype,ds=Function.prototype,$e=Object.prototype,ft=dt["__core-js_shared__"],gt=ds.toString,ye=$e.hasOwnProperty,be=function(){var o=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),_t=$e.toString,hs=gt.call(Object),dn=RegExp("^"+gt.call(ye).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pt=an?dt.Buffer:void 0,yr=dt.Symbol,hn=dt.Uint8Array;pt&&pt.allocUnsafe;var fn=un(Object.getPrototypeOf,Object),gn=Object.create,fs=$e.propertyIsEnumerable,_n=us.splice,Re=yr?yr.toStringTag:void 0,jt=function(){try{var o=kr(Object,"defineProperty");return o({},"",{}),o}catch{}}(),br=pt?pt.isBuffer:void 0,ze=Math.max,wr=Date.now,$t=kr(dt,"Map"),Ie=kr(Object,"create"),vt=function(){function o(){}return function(h){if(!Me(h))return{};if(gn)return gn(h);o.prototype=h;var p=new o;return o.prototype=void 0,p}}();function Le(o){var h=-1,p=o==null?0:o.length;for(this.clear();++h<p;){var S=o[h];this.set(S[0],S[1])}}function gs(){this.__data__=Ie?Ie(null):{},this.size=0}function _s(o){var h=this.has(o)&&delete this.__data__[o];return this.size-=h?1:0,h}function ps(o){var h=this.__data__;if(Ie){var p=h[o];return p===n?void 0:p}return ye.call(h,o)?h[o]:void 0}function vs(o){var h=this.__data__;return Ie?h[o]!==void 0:ye.call(h,o)}function pn(o,h){var p=this.__data__;return this.size+=this.has(o)?0:1,p[o]=Ie&&h===void 0?n:h,this}Le.prototype.clear=gs,Le.prototype.delete=_s,Le.prototype.get=ps,Le.prototype.has=vs,Le.prototype.set=pn;function ve(o){var h=-1,p=o==null?0:o.length;for(this.clear();++h<p;){var S=o[h];this.set(S[0],S[1])}}function De(){this.__data__=[],this.size=0}function ms(o){var h=this.__data__,p=Rt(h,o);if(p<0)return!1;var S=h.length-1;return p==S?h.pop():_n.call(h,p,1),--this.size,!0}function ys(o){var h=this.__data__,p=Rt(h,o);return p<0?void 0:h[p][1]}function bs(o){return Rt(this.__data__,o)>-1}function ws(o,h){var p=this.__data__,S=Rt(p,o);return S<0?(++this.size,p.push([o,h])):p[S][1]=h,this}ve.prototype.clear=De,ve.prototype.delete=ms,ve.prototype.get=ys,ve.prototype.has=bs,ve.prototype.set=ws;function Ge(o){var h=-1,p=o==null?0:o.length;for(this.clear();++h<p;){var S=o[h];this.set(S[0],S[1])}}function we(){this.size=0,this.__data__={hash:new Le,map:new($t||ve),string:new Le}}function As(o){var h=Ut(this,o).delete(o);return this.size-=h?1:0,h}function Ss(o){return Ut(this,o).get(o)}function ks(o){return Ut(this,o).has(o)}function Ts(o,h){var p=Ut(this,o),S=p.size;return p.set(o,h),this.size+=p.size==S?0:1,this}Ge.prototype.clear=we,Ge.prototype.delete=As,Ge.prototype.get=Ss,Ge.prototype.has=ks,Ge.prototype.set=Ts;function Ve(o){var h=this.__data__=new ve(o);this.size=h.size}function Je(){this.__data__=new ve,this.size=0}function xs(o){var h=this.__data__,p=h.delete(o);return this.size=h.size,p}function Es(o){return this.__data__.get(o)}function Os(o){return this.__data__.has(o)}function Ps(o,h){var p=this.__data__;if(p instanceof ve){var S=p.__data__;if(!$t||S.length<t-1)return S.push([o,h]),this.size=++p.size,this;p=this.__data__=new Ge(S)}return p.set(o,h),this.size=p.size,this}Ve.prototype.clear=Je,Ve.prototype.delete=xs,Ve.prototype.get=Es,Ve.prototype.has=Os,Ve.prototype.set=Ps;function Cs(o,h){var p=Ae(o),S=!p&&Bt(o),O=!p&&!S&&wn(o),N=!p&&!S&&!O&&Sn(o),D=p||S||O||N,F=D?ln(o.length,String):[],q=F.length;for(var ce in o)D&&(ce=="length"||O&&(ce=="offset"||ce=="parent")||N&&(ce=="buffer"||ce=="byteLength"||ce=="byteOffset")||Tr(ce,q))||F.push(ce);return F}function Pe(o,h,p){(p!==void 0&&!Mt(o[h],p)||p===void 0&&!(h in o))&&Ar(o,h,p)}function js(o,h,p){var S=o[h];(!(ye.call(o,h)&&Mt(S,p))||p===void 0&&!(h in o))&&Ar(o,h,p)}function Rt(o,h){for(var p=o.length;p--;)if(Mt(o[p][0],h))return p;return-1}function Ar(o,h,p){h=="__proto__"&&jt?jt(o,h,{configurable:!0,enumerable:!0,value:p,writable:!0}):o[h]=p}var $s=qs();function It(o){return o==null?o===void 0?$:b:Re&&Re in Object(o)?Ws(o):Ne(o)}function vn(o){return yt(o)&&It(o)==l}function mn(o){if(!Me(o)||Nt(o))return!1;var h=mt(o)?dn:ut;return h.test(Ys(o))}function Lt(o){return yt(o)&&Or(o.length)&&!!M[It(o)]}function Rs(o){if(!Me(o))return yn(o);var h=Ue(o),p=[];for(var S in o)S=="constructor"&&(h||!ye.call(o,S))||p.push(S);return p}function Dt(o,h,p,S,O){o!==h&&$s(h,function(N,D){if(O||(O=new Ve),Me(N))Is(o,h,D,p,Dt,S,O);else{var F=S?S(xr(o,D),N,D+"",o,h,O):void 0;F===void 0&&(F=N),Pe(o,D,F)}},kn)}function Is(o,h,p,S,O,N,D){var F=xr(o,p),q=xr(h,p),ce=D.get(q);if(ce){Pe(o,p,ce);return}var se=N?N(F,q,p+"",o,h,D):void 0,Ye=se===void 0;if(Ye){var bt=Ae(q),Qe=!bt&&wn(q),zi=!bt&&!Qe&&Sn(q);se=q,bt||Qe||zi?Ae(F)?se=F:bn(F)?se=Sr(F):Qe?(Ye=!1,se=Us(q)):zi?(Ye=!1,se=Ms(q)):se=[]:An(q)||Bt(q)?(se=F,Bt(F)?se=Ft(F):(!Me(F)||mt(F))&&(se=Ks(q))):Ye=!1}Ye&&(D.set(q,se),O(se,q,S,N,D),D.delete(q)),Pe(o,p,se)}function Ls(o,h){return Vs(Gs(o,h,Tn),o+"")}var Ds=jt?function(o,h){return jt(o,"toString",{configurable:!0,enumerable:!1,value:Qs(h),writable:!0})}:Tn;function Us(o,h){return o.slice()}function Ns(o){var h=new o.constructor(o.byteLength);return new hn(h).set(new hn(o)),h}function Ms(o,h){var p=Ns(o.buffer);return new o.constructor(p,o.byteOffset,o.length)}function Sr(o,h){var p=-1,S=o.length;for(h||(h=Array(S));++p<S;)h[p]=o[p];return h}function Bs(o,h,p,S){var O=!p;p||(p={});for(var N=-1,D=h.length;++N<D;){var F=h[N],q=void 0;q===void 0&&(q=o[F]),O?Ar(p,F,q):js(p,F,q)}return p}function Fs(o){return Ls(function(h,p){var S=-1,O=p.length,N=O>1?p[O-1]:void 0,D=O>2?p[2]:void 0;for(N=o.length>3&&typeof N=="function"?(O--,N):void 0,D&&Hs(p[0],p[1],D)&&(N=O<3?void 0:N,O=1),h=Object(h);++S<O;){var F=p[S];F&&o(h,F,S,N)}return h})}function qs(o){return function(h,p,S){for(var O=-1,N=Object(h),D=S(h),F=D.length;F--;){var q=D[++O];if(p(N[q],q,N)===!1)break}return h}}function Ut(o,h){var p=o.__data__;return zs(h)?p[typeof h=="string"?"string":"hash"]:p.map}function kr(o,h){var p=mr(o,h);return mn(p)?p:void 0}function Ws(o){var h=ye.call(o,Re),p=o[Re];try{o[Re]=void 0;var S=!0}catch{}var O=_t.call(o);return S&&(h?o[Re]=p:delete o[Re]),O}function Ks(o){return typeof o.constructor=="function"&&!Ue(o)?vt(fn(o)):{}}function Tr(o,h){var p=typeof o;return h=h??a,!!h&&(p=="number"||p!="symbol"&&ls.test(o))&&o>-1&&o%1==0&&o<h}function Hs(o,h,p){if(!Me(p))return!1;var S=typeof h;return(S=="number"?Er(p)&&Tr(h,p.length):S=="string"&&h in p)?Mt(p[h],o):!1}function zs(o){var h=typeof o;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?o!=="__proto__":o===null}function Nt(o){return!!be&&be in o}function Ue(o){var h=o&&o.constructor,p=typeof h=="function"&&h.prototype||$e;return o===p}function yn(o){var h=[];if(o!=null)for(var p in Object(o))h.push(p);return h}function Ne(o){return _t.call(o)}function Gs(o,h,p){return h=ze(h===void 0?o.length-1:h,0),function(){for(var S=arguments,O=-1,N=ze(S.length-h,0),D=Array(N);++O<N;)D[O]=S[h+O];O=-1;for(var F=Array(h+1);++O<h;)F[O]=S[O];return F[h]=p(D),cs(o,this,F)}}function xr(o,h){if(!(h==="constructor"&&typeof o[h]=="function")&&h!="__proto__")return o[h]}var Vs=Js(Ds);function Js(o){var h=0,p=0;return function(){var S=wr(),O=i-(S-p);if(p=S,O>0){if(++h>=s)return arguments[0]}else h=0;return o.apply(void 0,arguments)}}function Ys(o){if(o!=null){try{return gt.call(o)}catch{}try{return o+""}catch{}}return""}function Mt(o,h){return o===h||o!==o&&h!==h}var Bt=vn(function(){return arguments}())?vn:function(o){return yt(o)&&ye.call(o,"callee")&&!fs.call(o,"callee")},Ae=Array.isArray;function Er(o){return o!=null&&Or(o.length)&&!mt(o)}function bn(o){return yt(o)&&Er(o)}var wn=br||f;function mt(o){if(!Me(o))return!1;var h=It(o);return h==v||h==m||h==d||h==T}function Or(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=a}function Me(o){var h=typeof o;return o!=null&&(h=="object"||h=="function")}function yt(o){return o!=null&&typeof o=="object"}function An(o){if(!yt(o)||It(o)!=A)return!1;var h=fn(o);if(h===null)return!0;var p=ye.call(h,"constructor")&&h.constructor;return typeof p=="function"&&p instanceof p&&gt.call(p)==hs}var Sn=on?cn(on):Lt;function Ft(o){return Bs(o,kn(o))}function kn(o){return Er(o)?Cs(o):Rs(o)}var Pr=Fs(function(o,h,p){Dt(o,h,p)});function Qs(o){return function(){return o}}function Tn(o){return o}function f(){return!1}r.exports=Pr})(zn,zn.exports);var hh=zn.exports;const xa=wo(hh);var Gn={exports:{}};Gn.exports;(function(r,e){var t=200,n="__lodash_hash_undefined__",s=9007199254740991,i="[object Arguments]",a="[object Array]",l="[object Boolean]",c="[object Date]",d="[object Error]",u="[object Function]",g="[object GeneratorFunction]",_="[object Map]",v="[object Number]",m="[object Object]",y="[object Promise]",w="[object RegExp]",b="[object Set]",A="[object String]",T="[object Symbol]",E="[object WeakMap]",j="[object ArrayBuffer]",J="[object DataView]",$="[object Float32Array]",k="[object Float64Array]",x="[object Int8Array]",C="[object Int16Array]",I="[object Int32Array]",H="[object Uint8Array]",Y="[object Uint8ClampedArray]",Q="[object Uint16Array]",P="[object Uint32Array]",V=/[\\^$.*+?()[\]{}|]/g,K=/\w*$/,Oe=/^\[object .+?Constructor\]$/,je=/^(?:0|[1-9]\d*)$/,L={};L[i]=L[a]=L[j]=L[J]=L[l]=L[c]=L[$]=L[k]=L[x]=L[C]=L[I]=L[_]=L[v]=L[m]=L[w]=L[b]=L[A]=L[T]=L[H]=L[Y]=L[Q]=L[P]=!0,L[d]=L[u]=L[E]=!1;var ut=typeof X=="object"&&X&&X.Object===Object&&X,ls=typeof self=="object"&&self&&self.Object===Object&&self,M=ut||ls||Function("return this")(),_r=e&&!e.nodeType&&e,nn=_r&&!0&&r&&!r.nodeType&&r,dt=nn&&nn.exports===_r;function sn(f,o){return f.set(o[0],o[1]),f}function ht(f,o){return f.add(o),f}function an(f,o){for(var h=-1,p=f?f.length:0;++h<p&&o(f[h],h,f)!==!1;);return f}function pr(f,o){for(var h=-1,p=o.length,S=f.length;++h<p;)f[S+h]=o[h];return f}function vr(f,o,h,p){for(var S=-1,O=f?f.length:0;++S<O;)h=o(h,f[S],S,f);return h}function on(f,o){for(var h=-1,p=Array(f);++h<f;)p[h]=o(h);return p}function cs(f,o){return f==null?void 0:f[o]}function ln(f){var o=!1;if(f!=null&&typeof f.toString!="function")try{o=!!(f+"")}catch{}return o}function cn(f){var o=-1,h=Array(f.size);return f.forEach(function(p,S){h[++o]=[S,p]}),h}function mr(f,o){return function(h){return f(o(h))}}function un(f){var o=-1,h=Array(f.size);return f.forEach(function(p){h[++o]=p}),h}var us=Array.prototype,ds=Function.prototype,$e=Object.prototype,ft=M["__core-js_shared__"],gt=function(){var f=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),ye=ds.toString,be=$e.hasOwnProperty,_t=$e.toString,hs=RegExp("^"+ye.call(be).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dn=dt?M.Buffer:void 0,pt=M.Symbol,yr=M.Uint8Array,hn=mr(Object.getPrototypeOf,Object),fn=Object.create,gn=$e.propertyIsEnumerable,fs=us.splice,_n=Object.getOwnPropertySymbols,Re=dn?dn.isBuffer:void 0,jt=mr(Object.keys,Object),br=Ue(M,"DataView"),ze=Ue(M,"Map"),wr=Ue(M,"Promise"),$t=Ue(M,"Set"),Ie=Ue(M,"WeakMap"),vt=Ue(Object,"create"),Le=Ae(br),gs=Ae(ze),_s=Ae(wr),ps=Ae($t),vs=Ae(Ie),pn=pt?pt.prototype:void 0,ve=pn?pn.valueOf:void 0;function De(f){var o=-1,h=f?f.length:0;for(this.clear();++o<h;){var p=f[o];this.set(p[0],p[1])}}function ms(){this.__data__=vt?vt(null):{}}function ys(f){return this.has(f)&&delete this.__data__[f]}function bs(f){var o=this.__data__;if(vt){var h=o[f];return h===n?void 0:h}return be.call(o,f)?o[f]:void 0}function ws(f){var o=this.__data__;return vt?o[f]!==void 0:be.call(o,f)}function Ge(f,o){var h=this.__data__;return h[f]=vt&&o===void 0?n:o,this}De.prototype.clear=ms,De.prototype.delete=ys,De.prototype.get=bs,De.prototype.has=ws,De.prototype.set=Ge;function we(f){var o=-1,h=f?f.length:0;for(this.clear();++o<h;){var p=f[o];this.set(p[0],p[1])}}function As(){this.__data__=[]}function Ss(f){var o=this.__data__,h=Lt(o,f);if(h<0)return!1;var p=o.length-1;return h==p?o.pop():fs.call(o,h,1),!0}function ks(f){var o=this.__data__,h=Lt(o,f);return h<0?void 0:o[h][1]}function Ts(f){return Lt(this.__data__,f)>-1}function Ve(f,o){var h=this.__data__,p=Lt(h,f);return p<0?h.push([f,o]):h[p][1]=o,this}we.prototype.clear=As,we.prototype.delete=Ss,we.prototype.get=ks,we.prototype.has=Ts,we.prototype.set=Ve;function Je(f){var o=-1,h=f?f.length:0;for(this.clear();++o<h;){var p=f[o];this.set(p[0],p[1])}}function xs(){this.__data__={hash:new De,map:new(ze||we),string:new De}}function Es(f){return Nt(this,f).delete(f)}function Os(f){return Nt(this,f).get(f)}function Ps(f){return Nt(this,f).has(f)}function Cs(f,o){return Nt(this,f).set(f,o),this}Je.prototype.clear=xs,Je.prototype.delete=Es,Je.prototype.get=Os,Je.prototype.has=Ps,Je.prototype.set=Cs;function Pe(f){this.__data__=new we(f)}function js(){this.__data__=new we}function Rt(f){return this.__data__.delete(f)}function Ar(f){return this.__data__.get(f)}function $s(f){return this.__data__.has(f)}function It(f,o){var h=this.__data__;if(h instanceof we){var p=h.__data__;if(!ze||p.length<t-1)return p.push([f,o]),this;h=this.__data__=new Je(p)}return h.set(f,o),this}Pe.prototype.clear=js,Pe.prototype.delete=Rt,Pe.prototype.get=Ar,Pe.prototype.has=$s,Pe.prototype.set=It;function vn(f,o){var h=mt(f)||wn(f)?on(f.length,String):[],p=h.length,S=!!p;for(var O in f)be.call(f,O)&&!(S&&(O=="length"||Js(O,p)))&&h.push(O);return h}function mn(f,o,h){var p=f[o];(!(be.call(f,o)&&bn(p,h))||h===void 0&&!(o in f))&&(f[o]=h)}function Lt(f,o){for(var h=f.length;h--;)if(bn(f[h][0],o))return h;return-1}function Rs(f,o){return f&&Tr(o,Pr(o),f)}function Dt(f,o,h,p,S,O,N){var D;if(p&&(D=O?p(f,S,O,N):p(f)),D!==void 0)return D;if(!Ft(f))return f;var F=mt(f);if(F){if(D=Gs(f),!o)return Ks(f,D)}else{var q=Ne(f),ce=q==u||q==g;if(yt(f))return Ms(f,o);if(q==m||q==i||ce&&!O){if(ln(f))return O?f:{};if(D=xr(ce?{}:f),!o)return Hs(f,Rs(D,f))}else{if(!L[q])return O?f:{};D=Vs(f,q,Dt,o)}}N||(N=new Pe);var se=N.get(f);if(se)return se;if(N.set(f,D),!F)var Ye=h?zs(f):Pr(f);return an(Ye||f,function(bt,Qe){Ye&&(Qe=bt,bt=f[Qe]),mn(D,Qe,Dt(bt,o,h,p,Qe,f,N))}),D}function Is(f){return Ft(f)?fn(f):{}}function Ls(f,o,h){var p=o(f);return mt(f)?p:pr(p,h(f))}function Ds(f){return _t.call(f)}function Us(f){if(!Ft(f)||Mt(f))return!1;var o=An(f)||ln(f)?hs:Oe;return o.test(Ae(f))}function Ns(f){if(!Bt(f))return jt(f);var o=[];for(var h in Object(f))be.call(f,h)&&h!="constructor"&&o.push(h);return o}function Ms(f,o){if(o)return f.slice();var h=new f.constructor(f.length);return f.copy(h),h}function Sr(f){var o=new f.constructor(f.byteLength);return new yr(o).set(new yr(f)),o}function Bs(f,o){var h=o?Sr(f.buffer):f.buffer;return new f.constructor(h,f.byteOffset,f.byteLength)}function Fs(f,o,h){var p=o?h(cn(f),!0):cn(f);return vr(p,sn,new f.constructor)}function qs(f){var o=new f.constructor(f.source,K.exec(f));return o.lastIndex=f.lastIndex,o}function Ut(f,o,h){var p=o?h(un(f),!0):un(f);return vr(p,ht,new f.constructor)}function kr(f){return ve?Object(ve.call(f)):{}}function Ws(f,o){var h=o?Sr(f.buffer):f.buffer;return new f.constructor(h,f.byteOffset,f.length)}function Ks(f,o){var h=-1,p=f.length;for(o||(o=Array(p));++h<p;)o[h]=f[h];return o}function Tr(f,o,h,p){h||(h={});for(var S=-1,O=o.length;++S<O;){var N=o[S],D=void 0;mn(h,N,D===void 0?f[N]:D)}return h}function Hs(f,o){return Tr(f,yn(f),o)}function zs(f){return Ls(f,Pr,yn)}function Nt(f,o){var h=f.__data__;return Ys(o)?h[typeof o=="string"?"string":"hash"]:h.map}function Ue(f,o){var h=cs(f,o);return Us(h)?h:void 0}var yn=_n?mr(_n,Object):Qs,Ne=Ds;(br&&Ne(new br(new ArrayBuffer(1)))!=J||ze&&Ne(new ze)!=_||wr&&Ne(wr.resolve())!=y||$t&&Ne(new $t)!=b||Ie&&Ne(new Ie)!=E)&&(Ne=function(f){var o=_t.call(f),h=o==m?f.constructor:void 0,p=h?Ae(h):void 0;if(p)switch(p){case Le:return J;case gs:return _;case _s:return y;case ps:return b;case vs:return E}return o});function Gs(f){var o=f.length,h=f.constructor(o);return o&&typeof f[0]=="string"&&be.call(f,"index")&&(h.index=f.index,h.input=f.input),h}function xr(f){return typeof f.constructor=="function"&&!Bt(f)?Is(hn(f)):{}}function Vs(f,o,h,p){var S=f.constructor;switch(o){case j:return Sr(f);case l:case c:return new S(+f);case J:return Bs(f,p);case $:case k:case x:case C:case I:case H:case Y:case Q:case P:return Ws(f,p);case _:return Fs(f,p,h);case v:case A:return new S(f);case w:return qs(f);case b:return Ut(f,p,h);case T:return kr(f)}}function Js(f,o){return o=o??s,!!o&&(typeof f=="number"||je.test(f))&&f>-1&&f%1==0&&f<o}function Ys(f){var o=typeof f;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?f!=="__proto__":f===null}function Mt(f){return!!gt&&gt in f}function Bt(f){var o=f&&f.constructor,h=typeof o=="function"&&o.prototype||$e;return f===h}function Ae(f){if(f!=null){try{return ye.call(f)}catch{}try{return f+""}catch{}}return""}function Er(f){return Dt(f,!0,!0)}function bn(f,o){return f===o||f!==f&&o!==o}function wn(f){return Me(f)&&be.call(f,"callee")&&(!gn.call(f,"callee")||_t.call(f)==i)}var mt=Array.isArray;function Or(f){return f!=null&&Sn(f.length)&&!An(f)}function Me(f){return kn(f)&&Or(f)}var yt=Re||Tn;function An(f){var o=Ft(f)?_t.call(f):"";return o==u||o==g}function Sn(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=s}function Ft(f){var o=typeof f;return!!f&&(o=="object"||o=="function")}function kn(f){return!!f&&typeof f=="object"}function Pr(f){return Or(f)?vn(f):Ns(f)}function Qs(){return[]}function Tn(){return!1}r.exports=Er})(Gn,Gn.exports);var fh=Gn.exports;const Ea=wo(fh),Vn={},Bn={};chrome.storage.onChanged.addListener((r,e)=>{Object.entries(r).forEach(([t,n])=>{var s;(s=Vn[t])==null||s.forEach(i=>i(n.newValue)),t in Vn&&(Bn[t]=n.newValue)})});var nt;class Ct{constructor(e,t){Ji(this,nt,!1);this.key=e,this.defaultValue=t}get isReady(){return Xs(this,nt)}set(e){Xs(this,nt)&&chrome.storage.local.set({[this.key]:e})}async asyncSet(e){await chrome.storage.local.set({[this.key]:e})}async asyncGet(){return(await chrome.storage.local.get(this.key))[this.key]??this.defaultValue}async asyncGetWithMergeDefaultValue(){return xa(Ea(this.defaultValue),(await chrome.storage.local.get(this.key))[this.key])}subscribe(e){const t=Vn[this.key]??(Vn[this.key]=[]);return t.push(e),xn(this,nt,!1),this.key in Bn?(e(Bn[this.key]),xn(this,nt,!0)):(e(this.defaultValue),chrome.storage.local.get(this.key).then(n=>{let s=xa(Ea(this.defaultValue),n[this.key]);e(s),Bn[this.key]=s,xn(this,nt,!0)})),()=>t.splice(t.indexOf(e),1)}update(e){chrome.storage.local.get(this.key,t=>{let n=t[this.key];n===void 0&&(n=this.defaultValue);const s=e(n);this.set(s)})}async asyncUpdate(e){await new Promise(t=>{chrome.storage.local.get(this.key,n=>{let s=n[this.key];s===void 0&&(s=this.defaultValue);const i=e(s);this.asyncSet(i).then(()=>{t()})})})}}nt=new WeakMap;const gh={preferredDictionary:"kr_dict",showHanja:!0,collapseDefinitionInKrDict:!1,prefillLayout:{KrDict:"{korean_lemma} = {english_word}: {english_definition}",StdDict:"{korean_lemma} = {korean_definition}",Hanja:"<span c-orange>{hanja}</span> ({hangul}) {korean} {english}"},autoExpand:{composition:!1,composite:!1},mining:{showSwitchDictionaryBtn:!1,showAppendDefinitionBtn:!1,addBrOnEachSubtitleLine:!0,addMarkerOnFocusWord:!0,addMarkerOnExtendedSelection:!0},freq:{showKimchiWordFreq:!1,showKrdictStars:!0},hanja:{showHangul:!0,showKorean:!0,showEnglish:!0,showGrading:!0},zoom:1};var Jo=(r=>(r[r.ShowAsSeen=0]="ShowAsSeen",r[r.KnownFirst=1]="KnownFirst",r))(Jo||{});function _h(r,e,t){const s=r.flatMap(mh).map(e);return r.some(a=>"Name"in a.word_type)&&s.push(2),ph(s,t)}function ph(r,e){const t=r.reduce(vh,null)??0;let n;switch(e){case 0:n=t===2||t===3;break;case 1:n=t===2||t===3||t===1&&r.includes(2);break}return{status:t,alwaysShowUnderline:!n}}function vh(r,e){return r===null?e:e===3?r:r===e?e:1}function mh(r){if("Two"in r.word_type)return[r.word.substring(0,r.word_type.Two.split_at),r.word.substring(r.word_type.Two.split_at)];if("One"in r.word_type)return r.word;if("Name"in r.word_type)return[]}function yh(r){return r.flatMap(e=>"Two"in e.word_type?[e.word.substring(0,e.word_type.Two.split_at),e.word.substring(e.word_type.Two.split_at)]:e.word)}var bh=(r=>(r.no_change="no_change",r[r.unknown=0]="unknown",r[r.seen=1]="seen",r[r.known=2]="known",r))(bh||{});const wh={mixedStatus:Jo.KnownFirst,autoStatusAfterMining:1,underlineWords:"normal",define1TAs:"unknown-only"},Ah="settings:colors",Sh="settings:subtitle-font-size",kh="settings:dictionaries",Th="settings:word-status",xh="settings:shortcuts",Eh="settings:recs-overlay",Oh={backgroundPrimaryColor:"#0f0f0f",backgroundSecondaryColor:"#181818",textPrimaryColor:"#e5e5e5",textSecondaryColor:"#c4c4c4",textTertiaryColor:"#737373",orange:"#fb923c",red:"#f87171",green:"#4ade80",yellow:"#fAcc15",blue:"#0ea5e9",wordHighlightKnown:"#84cc16",wordHighlightSeen:"#fb923c",wordHighlightUnknown:"#f87171",wordHighlightHidden:"#6b7280"},Ph={fontSize:In()?16:30,lineHeight:In()?18:36,fontName:"nanum-square-neo",fontColor:"#e5e5e5",backgroundColor:"#0f0f0f",backgroundOpacity:"medium",radius:2,paddingX:16,paddingY:8,transitionSpeedMs:150,removeBracket:!1,autoOpenSubtitleBrowser:!1,autoParseVideoSubs:!1,excludeAutoGenSubsOnAutoParse:!0,pauseOnHover:!1,unpauseOnHoverExit:!1,defaultBottomMargin:0,defaultSubtitleVisibility:"visible",defaultStopMode:"none",removeNewlines:!1,strokeWidth:0,strokeColor:"#000000",secondary:{fontSize:In()?12:18,lineHeight:In()?14:20,defaultLanguageCode:"",paddingX:8,paddingY:8,blurry:!0,fillEmptyWithDash:!1}},Ch={videoPlayer:{previousSubtitle:{ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,key:"ArrowLeft"},nextSubtitle:{ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,key:"ArrowRight"},repeatCurrentSubtitle:{ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,key:"ArrowDown"},hideSubtitle:{ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,key:"h"},toggleSubtitlesBrowser:{ctrlKey:!0,shiftKey:!1,altKey:!0,metaKey:!1,key:"b"}},page:{openVideoSettings:null,openVideoStats:null,openPageStats:null}},jh={yt:{showThumbnailComprehension:!0,showThumbnailComplexityScore:!1,showOnVideoPage:!0,showOnChannelPage:!0}},Rf=new Ct(Ah,Oh),If=new Ct(Sh,Ph),Lf=new Ct(kh,gh),$h=new Ct(Th,wh),Df=new Ct(xh,Ch),Uf=new Ct(Eh,jh);var Rh=He("<select><!></select>");function Nf(r,e){Qr(e,!0);let t=Z(e,"value",15,""),n=Z(e,"dense",3,!1),s=yo(e,["$$slots","$$events","$$legacy","value","dense","onChange","children"]),i=Be(()=>n()?"px-2 py-1":"px-4 py-2");var a=Rh(),l=u=>{var g;return(g=e.onChange)==null?void 0:g.call(e,u.target.value)};let c;var d=Kr(a);Ni(d,()=>e.children??ne),Yn(()=>c=go(a,c,{...s,onchange:l,"c-text-primary":!0,"border-text-tertiary":!0,"b-opacity-25":!0,"b-3":!0,"border-solid":!0,"transition-150":!0,"bg-background-primary":!0,"outline-none":!0,rounded:!0,class:`${te(i)??""} focus:border-orange ${e.class??""}`})),xc(a,t),oe(r,a),Xr()}function oi(...r){console.log("%cKimchi","background: #fb923c; color: #000; padding: 3px; border-radius: 5px;",...r)}const Ih=(r,e)=>e.some(t=>r instanceof t);let Oa,Pa;function Lh(){return Oa||(Oa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Dh(){return Pa||(Pa=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yo=new WeakMap,ki=new WeakMap,Qo=new WeakMap,li=new WeakMap,Hi=new WeakMap;function Uh(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",i),r.removeEventListener("error",a)},i=()=>{t(lt(r.result)),s()},a=()=>{n(r.error),s()};r.addEventListener("success",i),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Yo.set(t,r)}).catch(()=>{}),Hi.set(e,r),e}function Nh(r){if(ki.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",i),r.removeEventListener("error",a),r.removeEventListener("abort",a)},i=()=>{t(),s()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",i),r.addEventListener("error",a),r.addEventListener("abort",a)});ki.set(r,e)}let Ti={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return ki.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Qo.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return lt(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Mh(r){Ti=r(Ti)}function Bh(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(ci(this),e,...t);return Qo.set(n,e.sort?e.sort():[e]),lt(n)}:Dh().includes(r)?function(...e){return r.apply(ci(this),e),lt(Yo.get(this))}:function(...e){return lt(r.apply(ci(this),e))}}function Fh(r){return typeof r=="function"?Bh(r):(r instanceof IDBTransaction&&Nh(r),Ih(r,Lh())?new Proxy(r,Ti):r)}function lt(r){if(r instanceof IDBRequest)return Uh(r);if(li.has(r))return li.get(r);const e=Fh(r);return e!==r&&(li.set(r,e),Hi.set(e,r)),e}const ci=r=>Hi.get(r);function qh(r,e,{blocked:t,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(r,e),l=lt(a);return n&&a.addEventListener("upgradeneeded",c=>{n(lt(a.result),c.oldVersion,c.newVersion,lt(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Wh=["get","getKey","getAll","getAllKeys","count"],Kh=["put","add","delete","clear"],ui=new Map;function Ca(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ui.get(e))return ui.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=Kh.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||Wh.includes(t)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return n&&(d=d.index(l.shift())),(await Promise.all([d[t](...l),s&&c.done]))[0]};return ui.set(e,i),i}Mh(r=>({...r,get:(e,t,n)=>Ca(e,t)||r.get(e,t,n),has:(e,t)=>!!Ca(e,t)||r.has(e,t)}));const xi="metadata:height",Ei="metadata:last-word-status-check",Hh="metadata:current-user-id";async function Mf(){let r=await le.storage.local.get(null);return Object.entries(r).filter(([e,t])=>e.startsWith("metadata:"))}async function Bf(){return(await le.storage.local.get([Ei]))[Ei]??0}async function Ff(r){await le.storage.local.set({[Ei]:r})}async function qf(){let r=await le.storage.local.get([xi]);return new Date(r[xi]??0).toISOString()}async function Wf(r){await le.storage.local.set({[xi]:r})}async function Kf(r){await le.storage.local.set({[Hh]:r})}let Un=null;async function rn(){if(!chrome.tabs)throw new Error("This function should never be called from a context script");return Un||(Un=await qh("words",1,{upgrade(r){r.createObjectStore("statuses"),r.createObjectStore("offlineStatuses")}}),Un)}async function zh(){const e=(await rn()).transaction("statuses","readonly").store,t=await e.getAllKeys(),n=await e.getAll(),s={};for(let i=0;i<t.length;i++)s[t[i]]=n[i];return s}async function Hf(r){const t=(await rn()).transaction("statuses","readwrite");await Promise.all([...Object.entries(r).map(([n,s])=>t.store.put(s,n)),t.done])}async function Gh(){let e=await(await rn()).transaction("offlineStatuses").store.openCursor();const t={};for(;e;)t[e.key]=e.value.status,e=await e.continue();return t}async function zf(){const r=await le.storage.local.get(null),e=Object.keys(r).filter(s=>s.startsWith("metadata:"));await le.storage.local.remove(e);const n=(await rn()).transaction(["statuses","offlineStatuses"],"readwrite");await n.objectStore("statuses").clear(),await n.objectStore("offlineStatuses").clear()}async function Vh(r,e){const t=await rn(),n=new Date().getTime(),s=await t.get("statuses",r),i=await t.get("offlineStatuses",r);i?i.status!==e&&(s===e?await t.delete("offlineStatuses",r):await t.put("offlineStatuses",{status:e,date:n},r)):s!==e&&await t.put("offlineStatuses",{status:e,date:n},r)}async function ja(r,e){let t=await $h.asyncGetWithMergeDefaultValue();for(const n of Array.from(document.querySelectorAll("[data-kr-word]")))try{if(n.closest("#kr-subtitle-displayer"))continue;const s=JSON.parse(n.getAttribute("data-kr-word")??"{}");if(!yh(s.word_reduction).includes(r))continue;const a=_h(s.word_reduction,Xo.get,t.mixedStatus);n.setAttribute("data-kr-word-status",a.status.toString()),t.underlineWords!=="never"&&(a.alwaysShowUnderline||t.underlineWords==="always")?n.setAttribute("data-kr-always-show-underline",""):n.removeAttribute("data-kr-always-show-underline")}catch(s){console.warn("Failed to change the status",s)}}const Xo=Jh();function Jh(){const r=Et({});let e=!1,t=[],n=0,s=!1;const i="metadata:local:status:latest-date",a=new Ct(i,{timestampMs:0});async function l(){let u=Date.now();return await a.asyncSet({timestampMs:u}),u}const c=performance.now();di().then(async([u,g])=>{n=(await a.asyncGet()).timestampMs;for(const[_,v]of Object.entries(g))u[_]=v;r.set(u),e=!0,t.forEach(_=>_()),oi("Loaded all local statuses in",performance.now()-c,"ms")});const d={isReady:e,subscribe:r.subscribe,get(u){return rr(r)[u]??0},async updateWordStatus(u,g){if(!e)return;r.update(v=>(v[u]=g,v)),!chrome.tabs?(await le.runtime.sendMessage({type:Zo,lemma:u,status:g}),await ja(u)):await Vh(u,g),n=await l(),await le.runtime.sendMessage({type:el})},async forceReload(){return e=!1,await di().then(([u,g])=>{for(const[_,v]of Object.entries(g))u[_]=v;r.set(u),e=!0})},awaitReady:()=>new Promise(u=>{e?u():t.push(u)}),reloadStoreIfNeeded:async()=>{if(!s)return;s=!1;const u=performance.now(),g=!chrome.tabs,_=g&&document&&!!(document.querySelector("[data-kr-word]")||document.querySelector("#kr-subtitle-displayer"));let v={};if(g&&(v=rr(r)),await di().then(([m,y])=>{for(const[w,b]of Object.entries(y))m[w]=b;r.set(m)}),g&&_){const m=rr(r);let y=Object.entries(m),w=y.filter(([b,A])=>v[b]!==A).length;if(w>50){oi("More than 50 statuses to refresh, reloading tab"),window.location.reload();return}for(const[b,A]of y)v[b]!==A&&ja(b);oi("CrossTab update - found",w,"statuses to refresh in",performance.now()-u,"ms")}},async signalWordStatusUpdate(){return await l()}};return a.subscribe(async()=>{let u=(await a.asyncGet()).timestampMs;if(n===u)return;s=!0,!chrome.tabs||await d.reloadStoreIfNeeded()}),d}function di(){return chrome.tabs?Promise.all([zh(),Gh()]):Promise.all([le.runtime.sendMessage({type:tl}),le.runtime.sendMessage({type:rl})])}const Gf=bo(Xo,r=>{let e=0,t=0,n=0,s=0;for(const i of Object.values(r))i===0&&e++,i===1&&n++,i===2&&t++,i===3&&s++;return{unknown:e,known:t,seen:n,hidden:s}});function Vf(r){if(!r)return null;const e=parseInt(r.replace("#",""),16),t=e>>16&255,n=e>>8&255,s=e&255;return`${t} ${n} ${s}`}export{rr as $,_f as A,oe as B,Xr as C,He as D,yo as E,Ni as F,ne as G,Kr as H,Lc as I,re as J,Yt as K,Jt as L,_c as M,Ra as N,uc as O,Mn as P,Uc as Q,Il as R,Tt as S,rf as T,fo as U,of as V,vf as W,Gt as X,af as Y,Zh as Z,ef as _,Te as a,ae as a0,$c as a1,Ef as a2,Yd as a3,ti as a4,zo as a5,In as a6,tc as a7,df as a8,po as a9,Ph as aA,gh as aB,wh as aC,Ch as aD,jh as aE,xf as aF,Gf as aG,Bf as aH,qf as aI,Xo as aJ,Hf as aK,Wf as aL,Ff as aM,zf as aN,Kf as aO,Mf as aP,Gh as aQ,jf as aR,le as aS,cf as aT,Vf as aU,lf as aV,Xd as aW,Ur as aX,uf as aa,hf as ab,nf as ac,Of as ad,eh as ae,$f as af,Go as ag,X as ah,wo as ai,gf as aj,Rf as ak,Nf as al,Lf as am,$h as an,Jo as ao,Pf as ap,sf as aq,If as ar,Cf as as,ff as at,bh as au,oi as av,Df as aw,Uf as ax,Ea as ay,Oh as az,xt as b,ho as c,ir as d,Ke as e,Jr as f,sr as g,Ml as h,Qn as i,Da as j,Nl as k,kc as l,Xh as m,te as n,G as o,tf as p,hr as q,Fl as r,Be as s,Qr as t,Wr as u,pf as v,Z as w,Cc as x,Yn as y,go as z};
