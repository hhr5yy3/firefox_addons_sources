var bing=function(){"use strict";var ze=Object.defineProperty;var we=x=>{throw TypeError(x)};var Ge=(x,v,I)=>v in x?ze(x,v,{enumerable:!0,configurable:!0,writable:!0,value:I}):x[v]=I;var ce=(x,v,I)=>Ge(x,typeof v!="symbol"?v+"":v,I),le=(x,v,I)=>v.has(x)||we("Cannot "+I);var K=(x,v,I)=>(le(x,v,"read from private field"),I?I.call(x):v.get(x)),W=(x,v,I)=>v.has(x)?we("Cannot add the same private member more than once"):v instanceof WeakSet?v.add(x):v.set(x,I),xe=(x,v,I,O)=>(le(x,v,"write to private field"),O?O.call(x,I):v.set(x,I),I),ee=(x,v,I)=>(le(x,v,"access private method"),I);var J,q,X,F,ve,me;function x(t){return t}var v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function I(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var O={exports:{}};(function(t,e){(function(r,s){s(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:v,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const s="The message port closed before a response was received.",u=m=>{const b={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(b).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class E extends WeakMap{constructor(o,A=void 0){super(A),this.createItem=o}get(o){return this.has(o)||this.set(o,this.createItem(o)),super.get(o)}}const P=l=>l&&typeof l=="object"&&typeof l.then=="function",M=(l,o)=>(...A)=>{m.runtime.lastError?l.reject(new Error(m.runtime.lastError.message)):o.singleCallbackArg||A.length<=1&&o.singleCallbackArg!==!1?l.resolve(A[0]):l.resolve(A)},p=l=>l==1?"argument":"arguments",C=(l,o)=>function(g,...w){if(w.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${p(o.minArgs)} for ${l}(), got ${w.length}`);if(w.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${p(o.maxArgs)} for ${l}(), got ${w.length}`);return new Promise((_,S)=>{if(o.fallbackToNoCallback)try{g[l](...w,M({resolve:_,reject:S},o))}catch(d){console.warn(`${l} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,d),g[l](...w),o.fallbackToNoCallback=!1,o.noCallback=!0,_()}else o.noCallback?(g[l](...w),_()):g[l](...w,M({resolve:_,reject:S},o))})},j=(l,o,A)=>new Proxy(o,{apply(g,w,_){return A.call(w,l,..._)}});let U=Function.call.bind(Object.prototype.hasOwnProperty);const a=(l,o={},A={})=>{let g=Object.create(null),w={has(S,d){return d in l||d in g},get(S,d,k){if(d in g)return g[d];if(!(d in l))return;let D=l[d];if(typeof D=="function")if(typeof o[d]=="function")D=j(l,l[d],o[d]);else if(U(A,d)){let N=C(d,A[d]);D=j(l,l[d],N)}else D=D.bind(l);else if(typeof D=="object"&&D!==null&&(U(o,d)||U(A,d)))D=a(D,o[d],A[d]);else if(U(A,"*"))D=a(D,o[d],A["*"]);else return Object.defineProperty(g,d,{configurable:!0,enumerable:!0,get(){return l[d]},set(N){l[d]=N}}),D;return g[d]=D,D},set(S,d,k,D){return d in g?g[d]=k:l[d]=k,!0},defineProperty(S,d,k){return Reflect.defineProperty(g,d,k)},deleteProperty(S,d){return Reflect.deleteProperty(g,d)}},_=Object.create(l);return new Proxy(_,w)},n=l=>({addListener(o,A,...g){o.addListener(l.get(A),...g)},hasListener(o,A){return o.hasListener(l.get(A))},removeListener(o,A){o.removeListener(l.get(A))}}),i=new E(l=>typeof l!="function"?l:function(A){const g=a(A,{},{getContent:{minArgs:0,maxArgs:0}});l(g)}),c=new E(l=>typeof l!="function"?l:function(A,g,w){let _=!1,S,d=new Promise(L=>{S=function(R){_=!0,L(R)}}),k;try{k=l(A,g,S)}catch(L){k=Promise.reject(L)}const D=k!==!0&&P(k);if(k!==!0&&!D&&!_)return!1;const N=L=>{L.then(R=>{w(R)},R=>{let oe;R&&(R instanceof Error||typeof R.message=="string")?oe=R.message:oe="An unexpected error occurred",w({__mozWebExtensionPolyfillReject__:!0,message:oe})}).catch(R=>{console.error("Failed to send onMessage rejected reply",R)})};return N(D?k:d),!0}),f=({reject:l,resolve:o},A)=>{m.runtime.lastError?m.runtime.lastError.message===s?o():l(new Error(m.runtime.lastError.message)):A&&A.__mozWebExtensionPolyfillReject__?l(new Error(A.message)):o(A)},h=(l,o,A,...g)=>{if(g.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${p(o.minArgs)} for ${l}(), got ${g.length}`);if(g.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${p(o.maxArgs)} for ${l}(), got ${g.length}`);return new Promise((w,_)=>{const S=f.bind(null,{resolve:w,reject:_});g.push(S),A.sendMessage(...g)})},T={devtools:{network:{onRequestFinished:n(i)}},runtime:{onMessage:n(c),onMessageExternal:n(c),sendMessage:h.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:h.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},y={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return b.privacy={network:{"*":y},services:{"*":y},websites:{"*":y}},a(m,T,b)};r.exports=u(chrome)}})})(O);var ye=O.exports;const $=I(ye);var ge=Object.prototype.hasOwnProperty;function re(t,e){var r,s;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((s=t.length)===e.length)for(;s--&&re(t[s],e[s]););return s===-1}if(!r||typeof t=="object"){s=0;for(r in t)if(ge.call(t,r)&&++s&&!ge.call(e,r)||!(r in e)||!re(t[r],e[r]))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}function B(t,...e){}const z={debug:(...t)=>B(console.debug,...t),log:(...t)=>B(console.log,...t),warn:(...t)=>B(console.warn,...t),error:(...t)=>B(console.error,...t)};function pe(t){return Array.isArray(t)?t:[t]}const Ee=new Error("request for lock canceled");var De=function(t,e,r,s){function u(m){return m instanceof r?m:new r(function(b){b(m)})}return new(r||(r=Promise))(function(m,b){function E(p){try{M(s.next(p))}catch(C){b(C)}}function P(p){try{M(s.throw(p))}catch(C){b(C)}}function M(p){p.done?m(p.value):u(p.value).then(E,P)}M((s=s.apply(t,e||[])).next())})};class _e{constructor(e,r=Ee){this._value=e,this._cancelError=r,this._queue=[],this._weightedWaiters=[]}acquire(e=1,r=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((s,u)=>{const m={resolve:s,reject:u,weight:e,priority:r},b=ue(this._queue,E=>r<=E.priority);b===-1&&e<=this._value?this._dispatchItem(m):this._queue.splice(b+1,0,m)})}runExclusive(e){return De(this,arguments,void 0,function*(r,s=1,u=0){const[m,b]=yield this.acquire(s,u);try{return yield r(m)}finally{b()}})}waitForUnlock(e=1,r=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,r)?Promise.resolve():new Promise(s=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),Ie(this._weightedWaiters[e-1],{resolve:s,priority:r})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){const r=this._value;this._value-=e.weight,e.resolve([r,this._newReleaser(e.weight)])}_newReleaser(e){let r=!1;return()=>{r||(r=!0,this.release(e))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let e=this._value;e>0;e--){const r=this._weightedWaiters[e-1];r&&(r.forEach(s=>s.resolve()),this._weightedWaiters[e-1]=[])}else{const e=this._queue[0].priority;for(let r=this._value;r>0;r--){const s=this._weightedWaiters[r-1];if(!s)continue;const u=s.findIndex(m=>m.priority<=e);(u===-1?s:s.splice(0,u)).forEach(m=>m.resolve())}}}_couldLockImmediately(e,r){return(this._queue.length===0||this._queue[0].priority<r)&&e<=this._value}}function Ie(t,e){const r=ue(t,s=>e.priority<=s.priority);t.splice(r+1,0,e)}function ue(t,e){for(let r=t.length-1;r>=0;r--)if(e(t[r]))return r;return-1}var Se=function(t,e,r,s){function u(m){return m instanceof r?m:new r(function(b){b(m)})}return new(r||(r=Promise))(function(m,b){function E(p){try{M(s.next(p))}catch(C){b(C)}}function P(p){try{M(s.throw(p))}catch(C){b(C)}}function M(p){p.done?m(p.value):u(p.value).then(E,P)}M((s=s.apply(t,e||[])).next())})};class ke{constructor(e){this._semaphore=new _e(1,e)}acquire(){return Se(this,arguments,void 0,function*(e=0){const[,r]=yield this._semaphore.acquire(1,e);return r})}runExclusive(e,r=0){return this._semaphore.runExclusive(()=>e(),1,r)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const te=Te();function Te(){const t={local:G("local"),session:G("session"),sync:G("sync"),managed:G("managed")},e=a=>{const n=t[a];if(n==null){const i=Object.keys(t).join(", ");throw Error(`Invalid area "${a}". Options: ${i}`)}return n},r=a=>{const n=a.indexOf(":"),i=a.substring(0,n),c=a.substring(n+1);if(c==null)throw Error(`Storage key should be in the form of "area:key", but received "${a}"`);return{driverArea:i,driverKey:c,driver:e(i)}},s=a=>a+"$",u=(a,n)=>a??n??null,m=a=>typeof a=="object"&&!Array.isArray(a)?a:{},b=async(a,n,i)=>{const c=await a.getItem(n);return u(c,(i==null?void 0:i.fallback)??(i==null?void 0:i.defaultValue))},E=async(a,n)=>{const i=s(n),c=await a.getItem(i);return m(c)},P=async(a,n,i)=>{await a.setItem(n,i??null)},M=async(a,n,i)=>{const c=s(n),h={...m(await a.getItem(c))};Object.entries(i).forEach(([T,y])=>{y==null?delete h[T]:h[T]=y}),await a.setItem(c,h)},p=async(a,n,i)=>{if(await a.removeItem(n),i!=null&&i.removeMeta){const c=s(n);await a.removeItem(c)}},C=async(a,n,i)=>{const c=s(n);if(i==null)await a.removeItem(c);else{const f=m(await a.getItem(c));pe(i).forEach(h=>delete f[h]),await a.setItem(c,f)}},j=(a,n,i)=>a.watch(n,i);return{getItem:async(a,n)=>{const{driver:i,driverKey:c}=r(a);return await b(i,c,n)},getItems:async a=>{const n=new Map,i=new Map;return a.forEach(f=>{let h,T;typeof f=="string"?h=f:(h=f.key,T=f.options);const{driverArea:y,driverKey:l}=r(h),o=n.get(y)??[];n.set(y,o.concat(l)),i.set(h,T)}),(await Promise.all(Array.from(n.entries()).map(async([f,h])=>(await t[f].getItems(h)).map(y=>{const l=`${f}:${y.key}`,o=i.get(l),A=u(y.value,(o==null?void 0:o.fallback)??(o==null?void 0:o.defaultValue));return{key:l,value:A}})))).flat()},getMeta:async a=>{const{driver:n,driverKey:i}=r(a);return await E(n,i)},setItem:async(a,n)=>{const{driver:i,driverKey:c}=r(a);await P(i,c,n)},setItems:async a=>{const n=new Map;a.forEach(({key:i,value:c})=>{const{driverArea:f,driverKey:h}=r(i),T=n.get(f)??[];n.set(f,T.concat({key:h,value:c}))}),await Promise.all(Array.from(n.entries()).map(async([i,c])=>{await e(i).setItems(c)}))},setMeta:async(a,n)=>{const{driver:i,driverKey:c}=r(a);await M(i,c,n)},removeItem:async(a,n)=>{const{driver:i,driverKey:c}=r(a);await p(i,c,n)},removeItems:async a=>{const n=new Map;a.forEach(i=>{let c,f;typeof i=="string"?c=i:(c=i.key,f=i.options);const{driverArea:h,driverKey:T}=r(c),y=n.get(h)??[];y.push(T),f!=null&&f.removeMeta&&y.push(s(T)),n.set(h,y)}),await Promise.all(Array.from(n.entries()).map(async([i,c])=>{await e(i).removeItems(c)}))},removeMeta:async(a,n)=>{const{driver:i,driverKey:c}=r(a);await C(i,c,n)},snapshot:async(a,n)=>{var f;const c=await e(a).snapshot();return(f=n==null?void 0:n.excludeKeys)==null||f.forEach(h=>{delete c[h],delete c[s(h)]}),c},restoreSnapshot:async(a,n)=>{await e(a).restoreSnapshot(n)},watch:(a,n)=>{const{driver:i,driverKey:c}=r(a);return j(i,c,n)},unwatch(){Object.values(t).forEach(a=>{a.unwatch()})},defineItem:(a,n)=>{const{driver:i,driverKey:c}=r(a),{version:f=1,migrations:h={}}=n??{};if(f<1)throw Error("Storage item version cannot be less than 1. Initial versions should be set to 1, not 0.");const T=async()=>{var D;const g=s(c),[{value:w},{value:_}]=await i.getItems([c,g]);if(w==null)return;const S=(_==null?void 0:_.v)??1;if(S>f)throw Error(`Version downgrade detected (v${S} -> v${f}) for "${a}"`);z.debug(`Running storage migration for ${a}: v${S} -> v${f}`);const d=Array.from({length:f-S},(N,L)=>S+L+1);let k=w;for(const N of d)k=await((D=h==null?void 0:h[N])==null?void 0:D.call(h,k))??k;await i.setItems([{key:c,value:k},{key:g,value:{..._,v:f}}]),z.debug(`Storage migration completed for ${a} v${f}`,{migratedValue:k})},y=(n==null?void 0:n.migrations)==null?Promise.resolve():T().catch(g=>{z.error(`Migration failed for ${a}`,g)}),l=new ke,o=()=>(n==null?void 0:n.fallback)??(n==null?void 0:n.defaultValue)??null,A=()=>l.runExclusive(async()=>{const g=await i.getItem(c);if(g!=null||(n==null?void 0:n.init)==null)return g;const w=await n.init();return await i.setItem(c,w),w});return y.then(A),{get defaultValue(){return o()},get fallback(){return o()},getValue:async()=>(await y,n!=null&&n.init?await A():await b(i,c,n)),getMeta:async()=>(await y,await E(i,c)),setValue:async g=>(await y,await P(i,c,g)),setMeta:async g=>(await y,await M(i,c,g)),removeValue:async g=>(await y,await p(i,c,g)),removeMeta:async g=>(await y,await C(i,c,g)),watch:g=>j(i,c,(w,_)=>g(w??o(),_??o())),migrate:T}}}}function G(t){const e=()=>{if($.runtime==null)throw Error(["'wxt/storage' must be loaded in a web extension environment",`
 - If thrown during a build, see https://github.com/wxt-dev/wxt/issues/371`,` - If thrown during tests, mock 'wxt/browser' correctly. See https://wxt.dev/guide/go-further/testing.html
`].join(`
`));if($.storage==null)throw Error("You must add the 'storage' permission to your manifest to use 'wxt/storage'");const s=$.storage[t];if(s==null)throw Error(`"browser.storage.${t}" is undefined`);return s},r=new Set;return{getItem:async s=>(await e().get(s))[s],getItems:async s=>{const u=await e().get(s);return s.map(m=>({key:m,value:u[m]??null}))},setItem:async(s,u)=>{u==null?await e().remove(s):await e().set({[s]:u})},setItems:async s=>{const u=s.reduce((m,{key:b,value:E})=>(m[b]=E,m),{});await e().set(u)},removeItem:async s=>{await e().remove(s)},removeItems:async s=>{await e().remove(s)},snapshot:async()=>await e().get(),restoreSnapshot:async s=>{await e().set(s)},watch(s,u){const m=b=>{const E=b[s];E!=null&&(re(E.newValue,E.oldValue)||u(E.newValue??null,E.oldValue??null))};return e().onChanged.addListener(m),r.add(m),()=>{e().onChanged.removeListener(m),r.delete(m)}},unwatch(){r.forEach(s=>{e().onChanged.removeListener(s)}),r.clear()}}}let se;function Me(t,e){se={debug:(...r)=>{e(t,"DEBUG",r)},info:(...r)=>{e(t,"INFO",r)},warn:(...r)=>{e(t,"WARN",r)},error:(...r)=>{e(t,"ERROR",r)}}}function Ce(t,e,r){$.runtime.sendMessage(void 0,{event:"pix:log",context:t,level:e,args:r}).catch(console.error)}function Re(t){Me(t,Ce)}function Ne(t){const e=new MutationObserver(r=>{r.forEach(s=>{s.addedNodes.forEach(u=>{u instanceof Element&&t(u)})})});return Object.assign(e,{observeChildren:r=>{e.observe(r,{childList:!0,subtree:!0})}})}function $e(t,e){let r=t.closest(e);if(!r)for(let s=Ae(t);s!==void 0&&(r=s.closest(e),!r);s=Ae(s));r??(r=t),r.style.pointerEvents="none",r.style.userSelect="none",r.style.filter="blur(0.5rem)"}function Ae(t){for(;t.parentNode;)t=t.parentNode;return t instanceof ShadowRoot?t.host:void 0}const Pe=[{baseDomain:"128mots.com"},{baseDomain:"besse.perso.univ-pau.fr"},{baseDomain:"brainly.in"},{baseDomain:"brainly.ro"},{baseDomain:"commentouvrir.com"},{baseDomain:"dictionary.tn"},{baseDomain:"diogn.fr"},{baseDomain:"docplayer.fr"},{baseDomain:"ecs.softec.com.py"},{baseDomain:"ekladata.com"},{baseDomain:"elibrary.tips"},{baseDomain:"eliteanswers.in"},{baseDomain:"es.educaplay.com"},{baseDomain:"evalquiz.com"},{baseDomain:"exocorriges.com"},{baseDomain:"fdj.home.blog"},{baseDomain:"fdjhome.files.wordpress.com"},{baseDomain:"foforum.fr"},{baseDomain:"forum.mathforu.com"},{baseDomain:"forums.commentcamarche.net"},{baseDomain:"fr.alamal-news.com"},{baseDomain:"frederic-junier.org"},{baseDomain:"fr.franceasks.com"},{baseDomain:"fr.quora.com"},{baseDomain:"fr.scribd.com"},{baseDomain:"labs.inquest.net"},{baseDomain:"la-pix.fr"},{baseDomain:"leblogduwebmaster.fr"},{baseDomain:"lecoindusenior.fr"},{baseDomain:"lesoutrali.com"},{baseDomain:"lewebpedagogique.com"},{baseDomain:"new.hi7ob.com"},{baseDomain:"nosdevoirs.fr"},{baseDomain:"quizizz.com"},{baseDomain:"quiz-let.com"},{baseDomain:"quizlet.com"},{baseDomain:"reso-avenirs.onisep.fr"},{baseDomain:"sciences-ingenieur.genevoix-signoret-vinci.fr"},{baseDomain:"socialgrep.com"},{baseDomain:"troyprep.uncommonschools.org"},{baseDomain:"truyenhinhcapsongthu.net"},{baseDomain:"view.genial.ly"},{baseDomain:"arue.pf"},{baseDomain:"askabox.fr"},{baseDomain:"brainscape.com"},{baseDomain:"calameo.com"},{baseDomain:"cjoint.com"},{baseDomain:"coin-des-animateurs.com"},{baseDomain:"commentformaterunpc.com"},{baseDomain:"e-bahut.com"},{baseDomain:"gauthmath.com"},{baseDomain:"jeuxvideo.com"},{baseDomain:"jz0ralalm.com"},{baseDomain:"marocpolis.net"},{baseDomain:"maths-forum.com"},{baseDomain:"onlinecv.fr"},{baseDomain:"pix-data.com"},{baseDomain:"presentation-cv-simple.com"},{baseDomain:"prof-tc.fr"},{baseDomain:"reddit.com"},{baseDomain:"reponserapide.com"},{baseDomain:"secu-ordi.com"},{baseDomain:"studocu.com"},{baseDomain:"technozerrifi.com"},{baseDomain:"xn--pixrponse-e4a.com"},{baseDomain:"ystor.org"},{baseDomain:"chatgpt.com"},{baseDomain:"copilot.microsoft.com"},{baseDomain:"gemini.google.com"},{baseDomain:"you.com"},{baseDomain:"huggingface.co"},{hostname:"mail.google.com"},{hostname:"messagerie.orange.fr"},{hostname:"webmail.free.fr"},{baseDomain:"discord.com"},{baseDomain:"instagram.com"},{hostname:"messenger.com"},{baseDomain:"whatsapp.com"},{baseDomain:"web.telegram.org"},{baseDomain:"snapchat.com"},{baseDomain:"chatbotgpt.fr"},{baseDomain:"chatbotgpt.fr"},{baseDomain:"openai.com"}];let ne;function de(t){try{const e=new URL(t);return ne.some(r=>r(e))}catch{return!1}}async function Fe({storage:t,onChange:e}){ne=(await t.getItem("local:forbiddenUrls")??Pe).map(s=>fe(s)),t.watch("local:forbiddenUrls",s=>{s&&(ne=s.map(u=>fe(u)),e==null||e())})}function fe(t){if("baseDomain"in t){const e=new RegExp(`^(.*\\.)?${t.baseDomain.replace(/\./g,"\\.")}`);return r=>e.test(r.hostname)}if("hostname"in t)return e=>e.hostname===t.hostname;throw new TypeError("unknown forbidden URL type")}async function Le(){return te.getItem("local:activated")}function qe(t){return te.watch("local:activated",t)}const Oe=["cib-serp","cib-conversation","cib-chat-turn","cib-message-group","cib-message","cib-shared","cib-message-attributions","cib-attribution-item"].join(", "),Ve=["li","cib-message"].join(", ");let Y;const je={matches:["https://*.bing.com/*"],main(){Re("bing.content"),Y=Ne(H),(async()=>{await Fe({storage:te,onChange:()=>{H(document.body)}}),he(await Le())})().catch(t=>{se.error("Erreur d’initialisation",t)}),qe(he)}};function he(t){t?(H(document.body),Y.observeChildren(document.body)):Y.disconnect()}function H(t){t instanceof Element&&t.shadowRoot&&(t=t.shadowRoot,Y.observeChildren(t)),Ue(t).forEach(r=>{se.info(`Floutage d’un élément contenant un lien vers ${r.url}`),$e(r.node,Ve)}),t.querySelectorAll(Oe).forEach(H)}function Ue(t){return[...Array.from(t.querySelectorAll("a")).filter(e=>de(e.href)).map(e=>({node:e,url:e.href})),...Array.from(t.querySelectorAll("cite")).filter(e=>{let r=e.textContent;return r?(/^https?:\/\//.test(r)||(r="https://"+r),de(r)):!1}).map(e=>({node:e,url:e.textContent}))]}const Ke={BASE_URL:"/",BROWSER:"firefox",CHROME:!1,COMMAND:"build",DEV:!1,EDGE:!1,ENTRYPOINT:"bing",FIREFOX:!0,MANIFEST_VERSION:2,MODE:"production",OPERA:!1,PROD:!0,SAFARI:!1,SSR:!1,VITE_CJS_IGNORE_WARNING:"true",VITE_REVISION:"3a23e6465af3ad22426cfa4c7e04907477a45c36"},Q=class Q extends Event{constructor(e,r){super(Q.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=r}};ce(Q,"EVENT_NAME",be("wxt:locationchange"));let ae=Q;function be(t){var r;const e=typeof Ke>"u"?"build":"bing";return`${(r=$==null?void 0:$.runtime)==null?void 0:r.id}:${e}:${t}`}function We(t){let e,r;return{run(){e==null&&(r=new URL(location.href),e=t.setInterval(()=>{let s=new URL(location.href);s.href!==r.href&&(window.dispatchEvent(new ae(s,r)),r=s)},1e3))}}}const V=class V{constructor(e,r){W(this,F);W(this,J,window.self===window.top);W(this,q);W(this,X,We(this));this.contentScriptName=e,this.options=r,xe(this,q,new AbortController),K(this,J)?(ee(this,F,me).call(this,{ignoreFirstEvent:!0}),ee(this,F,ve).call(this)):ee(this,F,me).call(this)}get signal(){return K(this,q).signal}abort(e){return K(this,q).abort(e)}get isInvalid(){return $.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,r){const s=setInterval(()=>{this.isValid&&e()},r);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(e,r){const s=setTimeout(()=>{this.isValid&&e()},r);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(e){const r=requestAnimationFrame((...s)=>{this.isValid&&e(...s)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(e,r){const s=requestIdleCallback((...u)=>{this.signal.aborted||e(...u)},r);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(e,r,s,u){var m;r==="wxt:locationchange"&&this.isValid&&K(this,X).run(),(m=e.addEventListener)==null||m.call(e,r.startsWith("wxt:")?be(r):r,s,{...u,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),z.debug(`Content script "${this.contentScriptName}" context invalidated`)}};J=new WeakMap,q=new WeakMap,X=new WeakMap,F=new WeakSet,ve=function(){window.postMessage({type:V.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")},me=function(e){let r=!0;const s=u=>{var m,b;if(((m=u.data)==null?void 0:m.type)===V.SCRIPT_STARTED_MESSAGE_TYPE&&((b=u.data)==null?void 0:b.contentScriptName)===this.contentScriptName){const E=r;if(r=!1,E&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))},ce(V,"SCRIPT_STARTED_MESSAGE_TYPE","wxt:content-script-started");let ie=V;function Qe(){}function Z(t,...e){}const Be={debug:(...t)=>Z(console.debug,...t),log:(...t)=>Z(console.log,...t),warn:(...t)=>Z(console.warn,...t),error:(...t)=>Z(console.error,...t)};return(async()=>{try{const{main:t,...e}=je,r=new ie("bing",e);return await t(r)}catch(t){throw Be.error('The content script "bing" crashed on startup!',t),t}})()}();
bing;
