function getCompareUrl(url){try{if(!url)return url;url.startsWith("http://")||url.startsWith("https://")||(url="https://"+url);var a=window.document.createElement("a"),hostname=(a.href=url,a.host);return hostname&&-1!==url.indexOf(hostname)?-1<url.indexOf("login.microsoftonline.com")?"login.live.com":hostname:url}catch(ex){return log("exception getCompareUrl",ex),null}}function getEndpointParts(url){let webClientUrl=url,endpointPart="";var apiSplit=url.split("/api"),apiSplit=(2===apiSplit.length&&(endpointPart="/api",webClientUrl=apiSplit[0]),url.split(":11016"));return 2===apiSplit.length&&(endpointPart=":11016",webClientUrl=apiSplit[0]),{webClientUrl:webClientUrl,endpointPart:endpointPart}}function debounce(func,timeoutsMap,timeoutId,delay){timeoutsMap.has(timeoutId)&&(clearTimeout(timeoutsMap.get(timeoutId)),timeoutsMap.delete(timeoutId)),timeoutsMap.set(timeoutId,setTimeout(()=>{func(),timeoutsMap.delete(timeoutId)},delay))}const InputType={Username:"username",Password:"password",Otp:"otp"};class FilledFieldInfo{constructor(){this.dataList=[]}addData(inputType,filled){if(!Object.values(InputType).includes(inputType))throw new Error("Invalid InputType");this.dataList.push({inputType:inputType,filled:filled})}getAllData(){return this.dataList}getDataByInputType(inputType){return this.dataList.filter(data=>data.inputType===inputType)}getFilledData(){return this.dataList.filter(data=>data.filled)}setInputTypeFilled(inputType){this.dataList.forEach(data=>{data.inputType===inputType&&(data.filled=!0)})}getUnfilledData(){return this.dataList.filter(data=>!data.filled)}isCompleted(){return this.dataList.filter(data=>data.inputType!=InputType.Username).every(data=>data.filled)}isCompletedAfterFillingInputTypes(inputTypes){return this.dataList.filter(data=>!inputTypes.includes(data.inputType)).every(data=>data.filled)}doesInputTypeNeedToBeFilled(inputType){return this.dataList.filter(data=>data.inputType===inputType).some(data=>!data.filled)}wasInputTypeFilled(inputType){return this.dataList.filter(data=>data.inputType===inputType).some(data=>data.filled)}}class PerformanceObservation{constructor(highCpuUsageDetectedAction){this.timeframe=5e3,this.thresholdCpuUsage=.15,this.treshold=this.thresholdCpuUsage*this.timeframe,this.executionTimes=[],this.intervalId=null,this.alreadyWarned=!1,this.logCpuUsage=!1,this.highCpuUsageDetectedAction=highCpuUsageDetectedAction,this.firstStartTime=null,this.timeFrameHasPassed=!1}startMonitoring(){this.intervalId=setInterval(()=>{const now=performance.now();this.executionTimes=this.executionTimes.filter(entry=>now-entry.timestamp<=this.timeframe);let totalExecutionTime=this.executionTimes.reduce((acc,entry)=>acc+entry.time,0);var cpuUsagePercent;totalExecutionTime>this.timeframe&&(totalExecutionTime=this.timeframe),this.logCpuUsage&&console.log(`CPU usage detected: ${totalExecutionTime/this.timeframe*100}%`),!this.timeFrameHasPassed&&this.firstStartTime&&now-this.firstStartTime>=this.timeframe&&(this.timeFrameHasPassed=!0),this.timeFrameHasPassed&&totalExecutionTime>this.treshold&&!this.alreadyWarned&&(cpuUsagePercent=totalExecutionTime/this.timeframe*100,this.highCpuUsageDetected(cpuUsagePercent),this.alreadyWarned=!0)},1e3)}stopMonitoring(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}recordExecutionTime(startTime){this.firstStartTime||(this.firstStartTime=startTime);var endTime=performance.now();this.executionTimes.push({time:endTime-startTime,timestamp:endTime})}highCpuUsageDetected(cpuUsagePercent){if(console.warn(`High CPU usage detected: ${cpuUsagePercent}%`),this.highCpuUsageDetectedAction)try{this.highCpuUsageDetectedAction()}catch(err){}}setLogCpuUsage(logCpuUsage){this.logCpuUsage=logCpuUsage}resetWarning(){this.alreadyWarned=!1,this.timeFrameHasPassed=!1,this.firstStartTime=null}}