import{d as be,i as s,c as _,s as h,a as g,t as k,b as F,e as O,o as Ae,f as v,g as l,S,F as Bt,h as d,j as Rt,M as Lt,E as Ot,k as Ut,B as Et,l as Ye,m as V,n as je,p as P,q as Dt,$ as q,r as Ke,u as De,v as Mt,w as Z,x as p,y as Ie,z as Xe,A as Je,P as Me,C as We,D as Qe,G as Ze,R as Wt,H as Ft,W as Nt,I as pe,J as jt,K as zt,L as ze,N as G,O as Ht,Q as z,T as Gt,U as fe,V as se,X as Kt,Y as Vt,Z as E,_ as Te,a0 as xe,a1 as qt,a2 as Ce,a3 as et,a4 as tt,a5 as nt,a6 as Yt,a7 as j,a8 as rt,a9 as it,aa as lt,ab as Fe,ac as Xt,ad as Ve,ae as Jt,af as Qt,ag as Zt,ah as pt,ai as Pe,aj as Be,ak as en,al as tn,am as nn,an as rn,ao as ln,ap as on,aq as an,ar as _e,as as me,at as cn,au as ot,av as at,aw as ct,ax as ut,ay as st,az as dt,aA as un,aB as sn,aC as dn}from"./context-menu-D_6OpWHq.js";const vn=k('<svg width=0 height=0><clipPath clipPathUnits=objectBoundingBox><path d="M 0, 0.5 C 0, 0.03 0.03, 0 0.5, 0 S 1, 0.03 1, 0.5 0.97, 1 0.5, 1 0, 0.97 0, 0.5">'),gn=k("<a>");function vt(e){return(()=>{const t=vn(),n=t.firstChild;return _(()=>h(n,"id",e.id)),t})()}function R(){return CSS.supports("-webkit-touch-callout","none")}async function $n(e){try{const t=await F.tabs.query({active:!0});F.tabs.create({url:e,index:t[0].index+1})}catch{F.tabs.create({url:e})}}function K(e){return(()=>{const t=gn();return t.$$click=n=>{n.preventDefault(),$n(e.href)},s(t,()=>e.children),_(n=>{const r=e.href,i=e.title,c=e.title,o=e.class;return r!==n._v$&&h(t,"href",n._v$=r),i!==n._v$2&&h(t,"title",n._v$2=i),c!==n._v$3&&h(t,"aria-label",n._v$3=c),o!==n._v$4&&g(t,n._v$4=o),n},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})()}const bn=/<a.*?href="([^"]+)".*?>([^<]+)<\/a>/;function gt(e){const[t,n]=O([]);return Ae(()=>{let r=v(e.messageName,e.substitutions);const i=5;let c=0;for(;r&&(c++,!(c>i));){const o=r.match(bn);if(!o){n(b=>[...b,r]);break}const[a,u,f]=o;n(b=>[...b,r.slice(0,o.index),[u,f]]),r=r.slice((o.index??0)+a.length)}}),l(Bt,{get each(){return t()},children:r=>l(S,{when:typeof r!="string",fallback:r,get children(){return l(K,{get href(){return r[0]},get children(){return r[1]}})}})})}be(["click"]);const fn=k("<div><h1></h1><p></p><p></p><p><span> ");function _n(){return(()=>{const e=fn(),t=e.firstChild,n=t.nextSibling,r=n.nextSibling,i=r.nextSibling,c=i.firstChild,o=c.firstChild;return s(e,l(Rt,{get class(){return d.bigIcon}}),t),s(t,()=>v("unsupportedWebsiteHeader")),s(n,()=>v("unsupportedWebsiteDesc")),s(r,()=>v("unsupportedWebsiteUpdateNote")),s(c,()=>v("unsupportedWebsiteDesc2"),o),s(i,l(K,{href:"https://cloud.google.com/docs/chrome-enterprise/policies/?policy=ExtensionSettings",get children(){return v("learnMoreLabel")}}),null),_(()=>g(e,d.alertPopup)),e})()}const hn=k("<div><h1></h1><details><summary></summary><p></p><p>");function $t(){return(()=>{const e=hn(),t=e.firstChild,n=t.nextSibling,r=n.firstChild,i=r.nextSibling,c=i.nextSibling;return s(e,l(Lt,{get class(){return d.bigIcon}}),t),s(t,()=>v("getStartedHeader")),s(r,l(Ot,{get class(){return d.expandVector}}),null),s(r,()=>v("getStartedSubheader"),null),s(i,()=>v("getStartedSiteChanged")),s(c,l(gt,{messageName:"getStartedSubmitIssue"})),_(o=>{const a=d.alertPopup,u=d.alreadyPlaying;return a!==o._v$&&g(e,o._v$=a),u!==o._v$2&&g(n,o._v$2=u),o},{_v$:void 0,_v$2:void 0}),e})()}class mn{constructor(){this.storage=Ut(Et),this.isReady=this.init()}async setupDefaultBlocklist(){let t=await this.storage.getLocking();t||(t={}),await this.storage.setLocking(t)}async init(){return await this.setupDefaultBlocklist(),!0}async addToBlocklist(t,n){if(!n)return;await this.isReady;const r=await this.storage.getLocking(),i=n.getArtist(),c=n.getTrack();if(!r||!i||!c){this.storage.unlock();return}switch(r[i]||(r[i]={tracks:{},albums:{}}),t){case"artist":{r[i].disabled=!0;break}case"album":{const o=n.getAlbum(),a=n.getAlbumArtist()||i;if(!o){this.storage.unlock();return}r[a]||(r[a]={tracks:{},albums:{}}),r[a].albums[o]=!0;break}case"track":{r[i].tracks[c]=!0;break}}await this.storage.setLocking(r)}async removeFromBlocklist(t,n){var o,a,u;if(!n)return;const r=n.getArtist(),i=n.getTrack();if(!r||!i)return;const c=await this.storage.getLocking();if(!c){this.storage.unlock();return}switch(t){case"artist":{(o=c[r])==null||delete o.disabled;break}case"album":{const f=n.getAlbumArtist()||r,b=n.getAlbum();if(!b)return;(a=c[f])==null||delete a.albums[b];break}case"track":{(u=c[r])==null||delete u.tracks[i];break}}await this.storage.setLocking(c)}async getBlockedTypes(t){var u;const n={artist:!1,album:!1,track:!1};if(!t)return n;await this.isReady;const r=await this.storage.get(),i=t.getArtist(),c=t.getTrack();if(!r||!i||!r[i]||!c)return n;r[i].disabled&&(n.artist=!0),r[i].tracks[c]&&(n.track=!0);const o=t.getAlbumArtist()||i,a=t.getAlbum();return!a||!((u=r[o])!=null&&u.albums[a])||(n.album=!0),n}async hasBlockedTag(t){const n=await this.getBlockedTypes(t);return n.artist||n.album||n.track}}const kn=k("<div><h1></h1><p>");function yn(){return(()=>{const e=kn(),t=e.firstChild,n=t.nextSibling;return s(e,l(Ye,{get class(){return d.bigIcon}}),t),s(t,()=>v("disabledSiteHeader")),s(n,()=>v("disabledSiteDesc")),s(e,l(K,{get href(){return F.runtime.getURL("src/ui/options/index.html?p=connectors")},get class(){return`${V.button} ${V.centered}`},get children(){return[l(je,{}),P(()=>v("disabledSiteButton"))]}}),null),_(()=>g(e,d.alertPopup)),e})()}const Sn=k("<div><h1></h1><p>");function wn(){return(()=>{const e=Sn(),t=e.firstChild,n=t.nextSibling;return s(e,l(Dt,{get class(){return d.bigIcon}}),t),s(t,()=>v("serviceErrorHeader")),s(n,l(gt,{messageName:"serviceErrorDesc"})),s(e,l(K,{get href(){return F.runtime.getURL("src/ui/options/index.html?p=accounts")},get class(){return`${V.button} ${V.centered}`},get children(){return[l(je,{}),P(()=>v("disabledSiteButton"))]}}),null),_(()=>g(e,d.alertPopup)),e})()}const An=k('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 512 512"><path d="M225.8 367.1l-18.8-51s-30.5 34-76.2 34c-40.5 0-69.2-35.2-69.2-91.5 0-72.1 36.4-97.9 72.1-97.9 66.5 0 74.8 53.3 100.9 134.9 18.8 56.9 54 102.6 155.4 102.6 72.7 0 122-22.3 122-80.9 0-72.9-62.7-80.6-115-92.1-25.8-5.9-33.4-16.4-33.4-34 0-19.9 15.8-31.7 41.6-31.7 28.2 0 43.4 10.6 45.7 35.8l58.6-7c-4.7-52.8-41.1-74.5-100.9-74.5-52.8 0-104.4 19.9-104.4 83.9 0 39.9 19.4 65.1 68 76.8 44.9 10.6 79.8 13.8 79.8 45.7 0 21.7-21.1 30.5-61 30.5-59.2 0-83.9-31.1-97.9-73.9-32-96.8-43.6-163-161.3-163C45.7 113.8 0 168.3 0 261c0 89.1 45.7 137.2 127.9 137.2 66.2 0 97.9-31.1 97.9-31.1z">'),In=()=>An(),Ne=Symbol("store-raw"),Q=Symbol("store-node"),H=Symbol("store-has"),bt=Symbol("store-self");function ft(e){let t=e[q];if(!t&&(Object.defineProperty(e,q,{value:t=new Proxy(e,Cn)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,c=n.length;i<c;i++){const o=n[i];r[o].get&&Object.defineProperty(e,o,{enumerable:r[o].enumerable,get:r[o].get.bind(t)})}}return t}function ke(e){let t;return e!=null&&typeof e=="object"&&(e[q]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function de(e,t=new Set){let n,r,i,c;if(n=e!=null&&e[Ne])return n;if(!ke(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,a=e.length;o<a;o++)i=e[o],(r=de(i,t))!==i&&(e[o]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let u=0,f=o.length;u<f;u++)c=o[u],!a[c].get&&(i=e[c],(r=de(i,t))!==i&&(e[c]=r))}return e}function ye(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function ve(e,t,n){if(e[t])return e[t];const[r,i]=O(n,{equals:!1,internal:!0});return r.$=i,e[t]=r}function Tn(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===q||t===Q||(delete n.value,delete n.writable,n.get=()=>e[q][t]),n}function _t(e){De()&&ve(ye(e,Q),bt)()}function xn(e){return _t(e),Reflect.ownKeys(e)}const Cn={get(e,t,n){if(t===Ne)return e;if(t===q)return n;if(t===Ke)return _t(e),n;const r=ye(e,Q),i=r[t];let c=i?i():e[t];if(t===Q||t===H||t==="__proto__")return c;if(!i){const o=Object.getOwnPropertyDescriptor(e,t);De()&&(typeof c!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(c=ve(r,t,c)())}return ke(c)?ft(c):c},has(e,t){return t===Ne||t===q||t===Ke||t===Q||t===H||t==="__proto__"?!0:(De()&&ve(ye(e,H),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:xn,getOwnPropertyDescriptor:Tn};function Se(e,t,n,r=!1){if(!r&&e[t]===n)return;const i=e[t],c=e.length;n===void 0?(delete e[t],e[H]&&e[H][t]&&i!==void 0&&e[H][t].$()):(e[t]=n,e[H]&&e[H][t]&&i===void 0&&e[H][t].$());let o=ye(e,Q),a;if((a=ve(o,t,i))&&a.$(()=>n),Array.isArray(e)&&e.length!==c){for(let u=e.length;u<c;u++)(a=o[u])&&a.$();(a=ve(o,"length",c))&&a.$(e.length)}(a=o[bt])&&a.$()}function ht(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];Se(e,i,t[i])}}function Pn(e,t){if(typeof t=="function"&&(t=t(e)),t=de(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const i=t[n];e[n]!==i&&Se(e,n,i)}Se(e,"length",r)}else ht(e,t)}function ue(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();const o=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let u=0;u<r.length;u++)ue(e,[r[u]].concat(t),n);return}else if(a&&o==="function"){for(let u=0;u<e.length;u++)r(e[u],u)&&ue(e,[u].concat(t),n);return}else if(a&&o==="object"){const{from:u=0,to:f=e.length-1,by:b=1}=r;for(let m=u;m<=f;m+=b)ue(e,[m].concat(t),n);return}else if(t.length>1){ue(e[r],t,[r].concat(n));return}i=e[r],n=[r].concat(n)}let c=t[0];typeof c=="function"&&(c=c(i,n),c===i)||r===void 0&&c==null||(c=de(c),r===void 0||ke(i)&&ke(c)&&!Array.isArray(c)?ht(i,c):Se(e,r,c))}function Re(...[e,t]){const n=de(e||{}),r=Array.isArray(n),i=ft(n);function c(...o){Mt(()=>{r&&o.length===1?Pn(n,o[0]):ue(n,o)})}return[i,c]}const Bn=k("<div><span></span><span></span><span></span><span>"),mt=k("<div>"),Rn=k("<div role=group><span>"),Le=k("<span>"),kt=k("<button>"),Ln=k("<fieldset><legend>"),On=k("<div role=group>"),He=k("<label>"),Un=k("<div><input type=text>"),En=k("<input type=text>"),Dn=k("<div><button>"),Mn=k("<output>"),Wn=k("<div><div><button>"),Fn=k("<label><input type=checkbox>"),[we,Nn]=Re({track:null,artist:null,album:null,albumArtist:null}),[yt,jn]=Re({track:null,artist:null,album:null,albumArtist:null}),[zn,qe]=Re({track:"",artist:"",album:"",albumArtist:""}),[ge,Hn]=Re({isRegexDisabled:!0,isCaseInsensitive:!0,isGlobal:!1}),$e=new mn;function Gn(e){const t=P(()=>e.clonedSong),[n]=Z(()=>$e.getBlockedTypes(t())),[r,i]=O(0),[c,o]=O();return p(()=>{var a;(a=c())==null||a.style.setProperty("--max-cell-width",`${r()}px`)}),(()=>{const a=mt();return Ie(o,a),a.$$keydown=u=>{u.key==="Enter"&&!u.isComposing&&Ge(e.tab)},s(a,l(S,{get when(){return R()},get children(){return l(St,{})}}),null),s(a,l(S,{get when(){return!R()},get children(){const u=Bn(),f=u.firstChild,b=f.nextSibling,m=b.nextSibling,A=m.nextSibling;return s(b,()=>v("infoSearchLabel")),s(m,()=>v("infoReplaceLabel")),s(A,()=>v("infoPreviewLabel")),_(T=>{const N=d.entryWrapper,I=d.searchLabel,C=d.replaceLabel,w=d.previewLabel;return N!==T._v$&&g(u,T._v$=N),I!==T._v$2&&g(b,T._v$2=I),C!==T._v$3&&g(m,T._v$3=C),w!==T._v$4&&g(A,T._v$4=w),T},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),u}}),null),s(a,l(he,{blockedTypes:n,get tabId(){var u;return(u=e.tab())==null?void 0:u.tabId},setMaxCellWidth:i,get clonedSong(){return e.clonedSong},type:"track",UnblockIcon:()=>l(Xe,{}),BlockIcon:()=>l(Je,{})}),null),s(a,l(he,{blockedTypes:n,get tabId(){var u;return(u=e.tab())==null?void 0:u.tabId},setMaxCellWidth:i,get clonedSong(){return e.clonedSong},type:"artist",UnblockIcon:()=>l(Me,{}),BlockIcon:()=>l(We,{})}),null),s(a,l(he,{blockedTypes:n,get tabId(){var u;return(u=e.tab())==null?void 0:u.tabId},setMaxCellWidth:i,get clonedSong(){return e.clonedSong},type:"album",UnblockIcon:()=>l(Qe,{}),BlockIcon:()=>l(Ze,{})}),null),s(a,l(he,{blockedTypes:n,get tabId(){var u;return(u=e.tab())==null?void 0:u.tabId},setMaxCellWidth:i,get clonedSong(){return e.clonedSong},type:"albumArtist",UnblockIcon:()=>l(Me,{}),BlockIcon:()=>l(We,{})}),null),s(a,l(Jn,{blockedTypes:n,get tab(){return e.tab},get clonedSong(){return e.clonedSong}}),null),_(()=>g(a,d.regexContainer)),a})()}function St(){return(()=>{const e=Rn(),t=e.firstChild;return s(t,()=>v("optionsOptions")),s(e,l(Ee,{i18nTitle:"infoUseRegex",icon:Wt,isInverted:!0,flag:"isRegexDisabled"}),null),s(e,l(Ee,{i18nTitle:"infoMatchCase",icon:Ft,isInverted:!0,flag:"isCaseInsensitive"}),null),s(e,l(Ee,{i18nTitle:"infoMatchWholeTag",icon:Nt,isInverted:!0,flag:"isGlobal"}),null),_(n=>{const r=d.regexFlagsWrapper,i=v("optionsOptions");return r!==n._v$5&&g(e,n._v$5=r),i!==n._v$6&&h(e,"aria-label",n._v$6=i),n},{_v$5:void 0,_v$6:void 0}),e})()}function he(e){Ae(()=>{qe({[e.type]:pe(e.clonedSong,e.type)})}),p(()=>{qe(()=>jt({search:we,replace:yt,...ze(ge)},zt(e.clonedSong)))});const[t,n]=O();return p(()=>{var i;const r=((i=t())==null?void 0:i.clientWidth)??0;e.setMaxCellWidth(c=>Math.max(c,r))}),l(Vn,{get blockedTypes(){return e.blockedTypes},get tabId(){return e.tabId},get clonedSong(){return e.clonedSong},get UnblockIcon(){return e.UnblockIcon},get BlockIcon(){return e.BlockIcon},get type(){return e.type},get children(){return[l(S,{get when(){return!R()},get children(){const r=Le();return Ie(n,r),s(r,()=>v(`info${G(e.type)}Label`)),_(()=>g(r,d.entryLabel)),r}}),l(qn,{get type(){return e.type},get clonedSong(){return e.clonedSong}}),l(Yn,{get type(){return e.type}}),l(Xn,{get type(){return e.type}})]}})}function Kn(e){const t=P(()=>e.type==="albumArtist"?"artist":e.type);return l(S,{get when(){return e.blockedTypes()},children:n=>(()=>{const r=kt();return r.$$click=()=>{const i=e.tabId;n()[t()]?$e.removeFromBlocklist(t(),e.clonedSong).then(()=>E(i??-1,{type:"reprocessSong",payload:void 0})):$e.addToBlocklist(t(),e.clonedSong).then(()=>E(i??-1,{type:"reprocessSong",payload:void 0}))},s(r,l(S,{get when(){return n()[t()]},get fallback(){return[l(e.BlockIcon,{}),P(()=>v(`infoBlock${G(t())}`))]},get children(){return[l(e.UnblockIcon,{}),P(()=>v(`infoUnblock${G(t())}`))]}})),_(i=>{const c=V.button,o=v(n()[t()]?`infoUnblock${G(t())}`:`infoBlock${G(t())}`);return c!==i._v$7&&g(r,i._v$7=c),o!==i._v$8&&h(r,"title",i._v$8=o),i},{_v$7:void 0,_v$8:void 0}),r})()})}function Vn(e){return l(S,{get when(){return R()},get fallback(){return(()=>{const t=On();return s(t,()=>e.children),_(n=>{const r=d.entryWrapper,i=v(`info${G(e.type)}Label`);return r!==n._v$11&&g(t,n._v$11=r),i!==n._v$12&&h(t,"aria-label",n._v$12=i),n},{_v$11:void 0,_v$12:void 0}),t})()},get children(){const t=Ln(),n=t.firstChild;return s(n,()=>v(`info${G(e.type)}Label`)),s(t,()=>e.children,null),s(t,l(Kn,{get blockedTypes(){return e.blockedTypes},get tabId(){return e.tabId},get clonedSong(){return e.clonedSong},get UnblockIcon(){return e.UnblockIcon},get BlockIcon(){return e.BlockIcon},get type(){return e.type}}),null),_(r=>{const i=d.entryWrapper,c=d.entryWrapperLegend;return i!==r._v$9&&g(t,r._v$9=i),c!==r._v$10&&g(n,r._v$10=c),r},{_v$9:void 0,_v$10:void 0}),t}})}function qn(e){return(()=>{const t=Un(),n=t.firstChild;return s(t,l(S,{get when(){return R()},get children(){const r=He();return s(r,()=>v("infoSearchLabel")),_(i=>{const c=`${e.type}SearchInput`,o=d.iosSearchLabel;return c!==i._v$13&&h(r,"for",i._v$13=c),o!==i._v$14&&g(r,i._v$14=o),i},{_v$13:void 0,_v$14:void 0}),r}}),n),n.$$input=r=>Nn({[e.type]:r.currentTarget.value||null}),s(t,l(se,{get fallback(){return l(Ht,{get class(){return`${d.regexFieldItem} ${d.regexFailure}`}})},get children(){return[l(z,{get when(){return!we[e.type]},get children(){return[]}}),l(z,{get when(){return Gt(we[e.type],pe(e.clonedSong,e.type),ze(ge))},get children(){return l(fe,{get class(){return`${d.regexFieldItem} ${d.regexSuccess}`}})}})]}}),null),_(r=>{const i=d.regexFieldWrapper,c=`${e.type}SearchInput`,o=d.regexFieldInput,a=v("infoSearchLabel");return i!==r._v$15&&g(t,r._v$15=i),c!==r._v$16&&h(n,"id",r._v$16=c),o!==r._v$17&&g(n,r._v$17=o),a!==r._v$18&&h(n,"title",r._v$18=a),r},{_v$15:void 0,_v$16:void 0,_v$17:void 0,_v$18:void 0}),t})()}function Yn(e){const[t,n]=O(!1),[r,i]=O("");return p(()=>{jn({[e.type]:t()?"":r()||null})}),(()=>{const c=Dn(),o=c.firstChild;return s(c,l(se,{get children(){return[l(z,{get when(){return t()},get children(){const a=Le();return s(a,()=>v("infoDeleteLabel")),a}}),l(z,{get when(){return!t()},get children(){return[l(S,{get when(){return R()},get children(){const a=He();return s(a,()=>v("infoReplaceLabel")),_(u=>{const f=`${e.type}ReplaceInput`,b=d.iosReplaceLabel;return f!==u._v$19&&h(a,"for",u._v$19=f),b!==u._v$20&&g(a,u._v$20=b),u},{_v$19:void 0,_v$20:void 0}),a}}),(()=>{const a=En();return a.$$input=u=>i(u.currentTarget.value),_(u=>{const f=`${e.type}ReplaceInput`,b=d.regexFieldInput,m=v("infoReplaceLabel");return f!==u._v$21&&h(a,"id",u._v$21=f),b!==u._v$22&&g(a,u._v$22=b),m!==u._v$23&&h(a,"title",u._v$23=m),u},{_v$21:void 0,_v$22:void 0,_v$23:void 0}),a})()]}})]}}),o),o.$$click=()=>n(a=>!a),s(o,l(S,{get when(){return t()},get fallback(){return l(Kt,{})},get children(){return l(Vt,{})}})),_(a=>{const u=d.regexFieldWrapper,f=`${d.regexFieldItem} ${d.button}`,b=t()?v("infoReplaceLabel"):v("infoDeleteLabel");return u!==a._v$24&&g(c,a._v$24=u),f!==a._v$25&&g(o,a._v$25=f),b!==a._v$26&&h(o,"title",a._v$26=b),a},{_v$24:void 0,_v$25:void 0,_v$26:void 0}),c})()}function Xn(e){return[l(S,{get when(){return R()},get children(){const t=He();return s(t,()=>v("infoPreviewLabel")),_(n=>{const r=`${e.type}PreviewOutput`,i=d.iosPreviewLabel;return r!==n._v$27&&h(t,"for",n._v$27=r),i!==n._v$28&&g(t,n._v$28=i),n},{_v$27:void 0,_v$28:void 0}),t}}),(()=>{const t=Mn();return s(t,()=>zn[e.type]),_(n=>{const r=`${e.type}PreviewOutput`,i=v("infoPreviewLabel");return r!==n._v$29&&h(t,"id",n._v$29=r),i!==n._v$30&&h(t,"title",n._v$30=i),n},{_v$29:void 0,_v$30:void 0}),t})()]}function Jn(e){return(()=>{const t=mt();return s(t,l(S,{get when(){var n;return(n=e.clonedSong)==null?void 0:n.flags.isCorrectedByUser},get children(){const n=Le();return s(n,()=>v("infoEditedWarning")),_(()=>g(n,d.editWarning)),n}}),null),s(t,l(S,{get when(){return!R()},get children(){return[l(St,{}),(()=>{const n=Wn(),r=n.firstChild,i=r.firstChild;return i.$$click=()=>void Ge(e.tab),s(i,l(fe,{})),s(r,l(S,{get when(){return e.blockedTypes()},children:c=>[l(Ue,{get isBlocked(){return c().artist},type:"artist",get tabId(){var o;return(o=e.tab())==null?void 0:o.tabId},get clonedSong(){return e.clonedSong},UnblockIcon:()=>l(Me,{}),BlockIcon:()=>l(We,{})}),l(S,{get when(){var o;return(o=e.clonedSong)==null?void 0:o.getAlbum()},get children(){return l(Ue,{get isBlocked(){return c().album},type:"album",get tabId(){var o;return(o=e.tab())==null?void 0:o.tabId},get clonedSong(){return e.clonedSong},UnblockIcon:()=>l(Qe,{}),BlockIcon:()=>l(Ze,{})})}}),l(Ue,{get isBlocked(){return c().track},type:"track",get tabId(){var o;return(o=e.tab())==null?void 0:o.tabId},get clonedSong(){return e.clonedSong},UnblockIcon:()=>l(Xe,{}),BlockIcon:()=>l(Je,{})})]}),null),_(c=>{const o=d.regexFooterButtons,a=d.controlButtons,u=d.controlButton,f=v("infoSubmitTitle");return o!==c._v$31&&g(n,c._v$31=o),a!==c._v$32&&g(r,c._v$32=a),u!==c._v$33&&g(i,c._v$33=u),f!==c._v$34&&h(i,"title",c._v$34=f),c},{_v$31:void 0,_v$32:void 0,_v$33:void 0,_v$34:void 0}),n})()]}}),null),_(()=>g(t,d.regexFooter)),t})()}function Ue(e){return(()=>{const t=kt();return t.$$click=()=>{const n=e.tabId;e.isBlocked?$e.removeFromBlocklist(e.type,e.clonedSong).then(()=>E(n??-1,{type:"reprocessSong",payload:void 0})):$e.addToBlocklist(e.type,e.clonedSong).then(()=>E(n??-1,{type:"reprocessSong",payload:void 0}))},s(t,l(S,{get when(){return e.isBlocked},get fallback(){return l(e.BlockIcon,{})},get children(){return l(e.UnblockIcon,{})}})),_(n=>{const r=d.controlButton,i=v(e.isBlocked?`infoUnblock${G(e.type)}`:`infoBlock${G(e.type)}`);return r!==n._v$35&&g(t,n._v$35=r),i!==n._v$36&&h(t,"title",n._v$36=i),n},{_v$35:void 0,_v$36:void 0}),t})()}function Qn(e){const[t]=Z(Te),n=P(()=>{const r=[{namei18n:"infoSubmitTitleShort",icon:fe,action:()=>void Ge(e.tab)}];if(!t.loading){const i=t();i&&r.push(i)}return r});return l(xe,{get items(){return n()}})}async function Ge(e){var t;await qt.saveRegexEdit({search:we,replace:yt,...ze(ge)}),E(((t=e())==null?void 0:t.tabId)??-1,{type:"reprocessSong",payload:void 0})}function Ee(e){return(()=>{const t=Fn(),n=t.firstChild;return n.addEventListener("change",()=>Hn(r=>({[e.flag]:!r[e.flag]}))),s(t,l(e.icon,{}),null),s(t,l(S,{get when(){return R()},get children(){const r=Le();return s(r,()=>v(e.i18nTitle)),_(()=>g(r,d.regexToggleLabel)),r}}),null),_(r=>{const i=v(e.i18nTitle),c=d.regexToggleWrapper,o=d.regexToggleInput;return i!==r._v$37&&h(t,"title",r._v$37=i),c!==r._v$38&&g(t,r._v$38=c),o!==r._v$39&&g(n,r._v$39=o),r},{_v$37:void 0,_v$38:void 0,_v$39:void 0}),_(()=>n.checked=e.isInverted?!ge[e.flag]:ge[e.flag]),t})()}be(["keydown","click","input"]);const Zn=k("<div><img>"),pn=k("<div><button></button><button></button><button>"),er=k("<div><input type=text><input type=text><input type=text><input type=text>"),tr=k("<div>");function wt(e){const t=P(()=>{const I=e.tab();if(!I)return;const C=I.song;if(C)return new Ce(C,I.tabId)}),[n,r]=O(""),[i,c]=O(""),[o,a]=O(""),[u,f]=O(""),[b,m]=O(!1);let A;function T(){!A||A.scrollWidth<10||(document.body.style.width=`${A.scrollWidth}px`)}const N=new ResizeObserver(T);return Ae(()=>{var C;if(r(t().getTrack()??""),c(t().getArtist()??""),a(t().getAlbum()??""),f(t().getAlbumArtist()??""),E(((C=e.tab())==null?void 0:C.tabId)??-1,{type:"setEditState",payload:!0}),!A)return;A.scrollWidth>10&&(document.body.style.width=`${A.scrollWidth}px`),N.observe(A);const I=setInterval(()=>{var w;E(((w=e.tab())==null?void 0:w.tabId)??-1,{type:"setEditState",payload:!0})},1e3);return()=>{clearInterval(I)}}),et(()=>{var I;E(((I=e.tab())==null?void 0:I.tabId)??-1,{type:"setEditState",payload:!1}),N.disconnect(),document.body.style.width="auto"}),[l(S,{get when(){return R()},get children(){return l(se,{get children(){return[l(z,{get when(){return b()},get children(){return l(Qn,{get tab(){return e.tab}})}}),l(z,{get when(){return!b()},get children(){return l(nr,{get tab(){return e.tab},get clonedSong(){return t()},setIsRegex:m,track:n,artist:i,album:o,albumArtist:u})}})]}})}}),(()=>{const I=tr(),C=A;return typeof C=="function"?Ie(C,I):A=I,s(I,l(se,{get children(){return[l(z,{get when(){return b()},get children(){return l(Gn,{get clonedSong(){return t()},get tab(){return e.tab}})}}),l(z,{get when(){return!b()},get children(){return[l(K,{get class(){return d.coverArtWrapper},get href(){var w;return((w=t())==null?void 0:w.getTrackArt())??F.runtime.getURL("img/cover_art_default.png")},get title(){return v("infoOpenAlbumArt")},get children(){return[(()=>{const w=Zn(),D=w.firstChild;return _(x=>{var B,U;const M=d.coverArtBackground,W=`url(${((B=t())==null?void 0:B.getTrackArt())??F.runtime.getURL("img/cover_art_default.png")})`,$=d.coverArt,L=((U=t())==null?void 0:U.getTrackArt())??F.runtime.getURL("img/cover_art_default.png");return M!==x._v$&&g(w,x._v$=M),W!==x._v$2&&((x._v$2=W)!=null?w.style.setProperty("background-image",W):w.style.removeProperty("background-image")),$!==x._v$3&&g(D,x._v$3=$),L!==x._v$4&&h(D,"src",x._v$4=L),x},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),w})(),l(vt,{id:"coverArtClip"})]}}),(()=>{const w=er(),D=w.firstChild,x=D.nextSibling,M=x.nextSibling,W=M.nextSibling;return w.$$keydown=$=>{$.key==="Enter"&&!$.isComposing&&X(e.tab,t(),{artist:i(),track:n(),album:o()||null,albumArtist:u()||null})},D.$$input=$=>{r($.currentTarget.value)},x.$$input=$=>{c($.currentTarget.value)},M.$$input=$=>{a($.currentTarget.value)},W.$$input=$=>{f($.currentTarget.value)},s(w,l(S,{get when(){return!R()},get children(){const $=pn(),L=$.firstChild,B=L.nextSibling,U=B.nextSibling;return L.$$click=()=>{X(e.tab,t(),{artist:i(),track:n(),album:o()||null,albumArtist:u()||null})},s(L,l(fe,{})),B.$$keydown=y=>{y.key==="Enter"&&(y.stopImmediatePropagation(),X(e.tab,t(),{artist:n(),track:i(),album:o()||null,albumArtist:u()||null}))},B.$$click=()=>{X(e.tab,t(),{artist:n(),track:i(),album:o()||null,albumArtist:u()||null})},s(B,l(tt,{})),U.$$keydown=y=>{y.key==="Enter"&&(y.stopImmediatePropagation(),m(!0))},U.$$click=()=>m(!0),s(U,l(nt,{})),_(y=>{const ee=d.controlButtons,te=d.controlButton,ne=!n()||!i(),re=!n()||!i()?v("infoSubmitUnableTitle"):v("infoSubmitTitle"),ie=d.controlButton,le=!n()||!i(),oe=!n()||!i()?v("infoSwapUnableTitle"):v("infoSwapTitle"),ae=d.controlButton,ce=v("infoRegexTitle");return ee!==y._v$5&&g($,y._v$5=ee),te!==y._v$6&&g(L,y._v$6=te),ne!==y._v$7&&(L.disabled=y._v$7=ne),re!==y._v$8&&h(L,"title",y._v$8=re),ie!==y._v$9&&g(B,y._v$9=ie),le!==y._v$10&&(B.disabled=y._v$10=le),oe!==y._v$11&&h(B,"title",y._v$11=oe),ae!==y._v$12&&g(U,y._v$12=ae),ce!==y._v$13&&h(U,"title",y._v$13=ce),y},{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0,_v$12:void 0,_v$13:void 0}),$}}),null),_($=>{const L=d.songDetails,B=d.editField,U=v("infoTrackPlaceholder"),y=v("infoTrackPlaceholder"),ee=d.editField,te=v("infoArtistPlaceholder"),ne=v("infoArtistPlaceholder"),re=d.editField,ie=v("infoAlbumPlaceholder"),le=v("infoAlbumPlaceholder"),oe=d.editField,ae=v("infoAlbumArtistPlaceholder"),ce=v("infoAlbumArtistPlaceholder");return L!==$._v$14&&g(w,$._v$14=L),B!==$._v$15&&g(D,$._v$15=B),U!==$._v$16&&h(D,"title",$._v$16=U),y!==$._v$17&&h(D,"placeholder",$._v$17=y),ee!==$._v$18&&g(x,$._v$18=ee),te!==$._v$19&&h(x,"title",$._v$19=te),ne!==$._v$20&&h(x,"placeholder",$._v$20=ne),re!==$._v$21&&g(M,$._v$21=re),ie!==$._v$22&&h(M,"title",$._v$22=ie),le!==$._v$23&&h(M,"placeholder",$._v$23=le),oe!==$._v$24&&g(W,$._v$24=oe),ae!==$._v$25&&h(W,"title",$._v$25=ae),ce!==$._v$26&&h(W,"placeholder",$._v$26=ce),$},{_v$14:void 0,_v$15:void 0,_v$16:void 0,_v$17:void 0,_v$18:void 0,_v$19:void 0,_v$20:void 0,_v$21:void 0,_v$22:void 0,_v$23:void 0,_v$24:void 0,_v$25:void 0,_v$26:void 0}),_(()=>{var $;return D.value=(($=t())==null?void 0:$.getTrack())??""}),_(()=>{var $;return x.value=(($=t())==null?void 0:$.getArtist())??""}),_(()=>{var $;return M.value=(($=t())==null?void 0:$.getAlbum())??""}),_(()=>{var $;return W.value=(($=t())==null?void 0:$.getAlbumArtist())??""}),w})()]}})]}})),_(()=>g(I,d.nowPlayingPopup)),I})()]}function nr(e){const[t]=Z(Te),n=P(()=>{const r=[{namei18n:!e.track()||!e.artist()?"infoSubmitUnableTitleShort":"infoSubmitTitleShort",icon:fe,action:()=>void X(e.tab,e.clonedSong,{artist:e.artist(),track:e.track(),album:e.album()||null,albumArtist:e.albumArtist()||null})},{namei18n:!e.track()||!e.artist()?"infoSwapUnableTitleShort":"infoSwapTitleShort",icon:tt,action:()=>void X(e.tab,e.clonedSong,{artist:e.track(),track:e.artist(),album:e.album()||null,albumArtist:e.albumArtist()||null})},{namei18n:"infoRegexTitleShort",icon:nt,action:()=>e.setIsRegex(!0)}];if(!t.loading){const i=t();i&&r.push(i)}return r});return l(xe,{get items(){return n()}})}async function X(e,t,n){var r;t&&(await Yt.saveSongInfo(t,n),E(((r=e())==null?void 0:r.tabId)??-1,{type:"reprocessSong",payload:void 0}))}be(["keydown","input","click"]);const rr=k("<div><img>"),At=k("<div>"),It=k("<button>"),ir=k("<div><span>"),lr=k("<div><button></button><button></button><button><span></span><span>");function Y(e){const[t,n]=O(!1),r=P(()=>{const a=e.tab();if(!a)return null;const u=a.song;return u?new Ce(u,a.tabId):null});let i;function c(){!i||i.scrollWidth<10||(document.body.style.width=`${i.scrollWidth}px`)}const o=new ResizeObserver(c);return Ae(()=>{i&&o.observe(i)}),et(()=>{o.disconnect(),document.body.style.width="auto"}),p(()=>{if(t())o.disconnect();else{if(!i)return;o.disconnect(),o.observe(i),i.scrollWidth>10&&(document.body.style.width=`${i.scrollWidth}px`)}}),l(se,{get fallback(){return l($t,{})},get children(){return[l(z,{get when(){return t()},get children(){return l(wt,{get tab(){return e.tab}})}}),l(z,{get when(){return r()},get children(){return[l(S,{get when(){return R()},get children(){return l(or,{song:r,get tab(){return e.tab},setIsEditing:n})}}),(()=>{const a=At(),u=i;return typeof u=="function"?Ie(u,a):i=a,s(a,l(J,{get class(){return d.coverArtWrapper},get href(){var f;return((f=r())==null?void 0:f.getTrackArt())??F.runtime.getURL("img/cover_art_default.png")},get title(){return v("infoOpenAlbumArt")},get children(){return[(()=>{const f=rr(),b=f.firstChild;return _(m=>{var C,w;const A=d.coverArtBackground,T=`url(${((C=r())==null?void 0:C.getTrackArt())??F.runtime.getURL("img/cover_art_default.png")})`,N=d.coverArt,I=((w=r())==null?void 0:w.getTrackArt())??F.runtime.getURL("img/cover_art_default.png");return A!==m._v$&&g(f,m._v$=A),T!==m._v$2&&((m._v$2=T)!=null?f.style.setProperty("background-image",T):f.style.removeProperty("background-image")),N!==m._v$3&&g(b,m._v$3=N),I!==m._v$4&&h(b,"src",m._v$4=I),m},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),f})(),l(vt,{id:"coverArtClip"})]}}),null),s(a,l(ar,{song:r,get tab(){return e.tab},setIsEditing:n}),null),_(()=>g(a,d.nowPlayingPopup)),a})()]}})]}})}function or(e){const[t]=Z(Te),n=P(()=>{var i,c,o;const r=[{namei18n:((i=e.tab())==null?void 0:i.permanentMode)===j?"infoEditTitleShort":"infoEditUnableTitleShort",icon:rt,action:()=>e.setIsEditing(!0)}];if((c=e.song())!=null&&c.flags.isCorrectedByUser&&r.push({namei18n:((o=e.tab())==null?void 0:o.permanentMode)===j?"infoRevertTitleShort":"infoRevertUnableTitleShort",icon:it,action:()=>Ct(e.tab)}),r.push({namei18n:Tt(e.tab,!0),icon:lt,action:()=>xt(e.tab)}),!t.loading){const a=t();a&&r.push(a)}return r});return l(xe,{get items(){return n()}})}function ar(e){return(()=>{const t=At();return s(t,l(ur,{get song(){return e.song}}),null),s(t,l(S,{get when(){return R()},get children(){return l(cr,{get song(){return e.song},get tab(){return e.tab}})}}),null),s(t,l(sr,{get song(){return e.song}}),null),s(t,l(S,{get when(){return!R()},get children(){return l(dr,{get song(){return e.song},get tab(){return e.tab},get setIsEditing(){return e.setIsEditing}})}}),null),_(()=>g(t,d.songDetails)),t})()}function cr(e){return(()=>{const t=It();return t.$$click=()=>Pt(e.tab,e.song),s(t,l(Fe,{})),_(n=>{var c,o;const r=`${d.iosLoveButton}${(c=e.song())!=null&&c.metadata.userloved?` ${d.active}`:""}`,i=(o=e.song())!=null&&o.metadata.userloved?v("infoUnlove"):v("infoLove");return r!==n._v$5&&g(t,n._v$5=r),i!==n._v$6&&h(t,"title",n._v$6=i),n},{_v$5:void 0,_v$6:void 0}),t})()}function ur(e){return[l(J,{get class(){return d.bold},get href(){var t,n;return Xt((t=e.song())==null?void 0:t.getArtist(),(n=e.song())==null?void 0:n.getTrack())},get title(){var t;return v("infoViewTrackPage",((t=e.song())==null?void 0:t.getTrack())??"")},get children(){var t;return(t=e.song())==null?void 0:t.getTrack()}}),l(J,{get href(){var t;return Ve((t=e.song())==null?void 0:t.getArtist())},get title(){var t;return v("infoViewArtistPage",((t=e.song())==null?void 0:t.getArtist())??"")},get children(){var t;return(t=e.song())==null?void 0:t.getArtist()}}),l(J,{get href(){var t,n,r;return Jt(((t=e.song())==null?void 0:t.getAlbumArtist())||((n=e.song())==null?void 0:n.getArtist()),(r=e.song())==null?void 0:r.getAlbum())},get title(){var t;return v("infoViewAlbumPage",((t=e.song())==null?void 0:t.getAlbum())??"")},get children(){var t;return(t=e.song())==null?void 0:t.getAlbum()}}),l(J,{get href(){var t;return Ve((t=e.song())==null?void 0:t.getAlbumArtist())},get title(){var t;return v("infoViewArtistPage",((t=e.song())==null?void 0:t.getAlbumArtist())??"")},get children(){var t;return(t=e.song())==null?void 0:t.getAlbumArtist()}})]}function sr(e){var r;const[t,n]=O();return(r=Qt.getScrobblerByLabel("Last.fm"))==null||r.getSession().then(n),(()=>{const i=ir(),c=i.firstChild;return s(i,l(J,{get class(){return`${d.playCount} ${d.label}`},get href(){var o,a,u;return Zt((o=t())==null?void 0:o.sessionName,(a=e.song())==null?void 0:a.getArtist(),(u=e.song())==null?void 0:u.getTrack())},get title(){var o;return v("infoYourScrobbles",(((o=e.song())==null?void 0:o.metadata.userPlayCount)||0).toString())},get children(){return[l(In,{}),P(()=>{var o;return((o=e.song())==null?void 0:o.metadata.userPlayCount)||0})]}}),c),s(c,()=>{var o;return(o=e.song())==null?void 0:o.connector.label}),_(o=>{const a=d.playDetails,u=d.label;return a!==o._v$7&&g(i,o._v$7=a),u!==o._v$8&&g(c,o._v$8=u),o},{_v$7:void 0,_v$8:void 0}),i})()}function dr(e){return(()=>{const t=lr(),n=t.firstChild,r=n.nextSibling,i=r.nextSibling,c=i.firstChild,o=c.nextSibling;return n.$$click=()=>e.setIsEditing(!0),s(n,l(rt,{})),s(t,l(S,{get when(){var a;return(a=e.song())==null?void 0:a.flags.isCorrectedByUser},get children(){const a=It();return a.$$click=()=>Ct(e.tab),s(a,l(it,{})),_(u=>{var A,T;const f=d.controlButton,b=((A=e.tab())==null?void 0:A.permanentMode)!==j,m=((T=e.tab())==null?void 0:T.permanentMode)===j?v("infoRevertTitle"):v("infoRevertUnableTitle");return f!==u._v$9&&g(a,u._v$9=f),b!==u._v$10&&(a.disabled=u._v$10=b),m!==u._v$11&&h(a,"title",u._v$11=m),u},{_v$9:void 0,_v$10:void 0,_v$11:void 0}),a}}),r),r.$$click=()=>xt(e.tab),s(r,l(lt,{})),i.$$click=()=>Pt(e.tab,e.song),s(c,l(Fe,{})),s(o,l(S,{get when(){var a;return(a=e.song())==null?void 0:a.metadata.userloved},get fallback(){return l(Fe,{})},get children(){return l(pt,{})}})),_(a=>{var x,M,W,$,L,B,U;const u=d.controlButtons,f=d.controlButton,b=((x=e.tab())==null?void 0:x.permanentMode)!==j,m=((M=e.tab())==null?void 0:M.permanentMode)===j?v("infoEditTitle"):v("infoEditUnableTitle"),A=`${d.controlButton}${((W=e.tab())==null?void 0:W.permanentMode)!==Pe?` ${d.hiddenDisabled}`:""}${(($=e.tab())==null?void 0:$.permanentMode)===Be?` ${d.active}`:""}`,T=((L=e.tab())==null?void 0:L.permanentMode)!==j,N=v(Tt(e.tab,!1)),I=`${d.controlButton}${(B=e.song())!=null&&B.metadata.userloved?` ${d.active}`:""}`,C=(U=e.song())!=null&&U.metadata.userloved?v("infoUnlove"):v("infoLove"),w=d.nonHover,D=d.hover;return u!==a._v$12&&g(t,a._v$12=u),f!==a._v$13&&g(n,a._v$13=f),b!==a._v$14&&(n.disabled=a._v$14=b),m!==a._v$15&&h(n,"title",a._v$15=m),A!==a._v$16&&g(r,a._v$16=A),T!==a._v$17&&(r.disabled=a._v$17=T),N!==a._v$18&&h(r,"title",a._v$18=N),I!==a._v$19&&g(i,a._v$19=I),C!==a._v$20&&h(i,"title",a._v$20=C),w!==a._v$21&&g(c,a._v$21=w),D!==a._v$22&&g(o,a._v$22=D),a},{_v$12:void 0,_v$13:void 0,_v$14:void 0,_v$15:void 0,_v$16:void 0,_v$17:void 0,_v$18:void 0,_v$19:void 0,_v$20:void 0,_v$21:void 0,_v$22:void 0}),t})()}function J(e){return l(K,{get class(){return`${e.class} ${d.notRedAnchor}`},get href(){return e.href},get title(){return e.title},get children(){return e.children}})}function Tt(e,t){var r;let n="infoSkipUnableTitle";switch((r=e())==null?void 0:r.permanentMode){case j:n="infoSkipTitle";break;case Be:n="infoSkippedTitle";break;case Pe:n="infoSkipUnableTitle";break}return t?`${n}Short`:n}function xt(e){var t;E(((t=e())==null?void 0:t.tabId)||-1,{type:"skipCurrentSong",payload:void 0})}function Ct(e){var t;E(((t=e())==null?void 0:t.tabId)??-1,{type:"resetData",payload:void 0})}function Pt(e,t){var n,r;E(((n=e())==null?void 0:n.tabId)??-1,{type:"toggleLove",payload:{isLoved:!((r=t())!=null&&r.metadata.userloved),shouldShowNotification:!1}})}be(["click"]);const vr=k("<div><h1></h1><p></p><p></p><p></p><button>");function gr(e){const[t,n]=O(!1),r=P(()=>{const i=e.tab();if(!i)return null;const c=i.song;return c?new Ce(c,i.tabId):null});return l(S,{get when(){return!t()},get children(){const i=vr(),c=i.firstChild,o=c.nextSibling,a=o.nextSibling,u=a.nextSibling,f=u.nextSibling;return s(i,l(Ye,{get class(){return d.bigIcon}}),c),s(c,()=>v("disallowedHeader")),s(o,()=>{var b,m;return v("disallowedDesc1",[((b=r())==null?void 0:b.getArtist())??"???",((m=r())==null?void 0:m.getTrack())??"???"])}),s(a,()=>{var b;return v(`disallowedDesc${(b=r())==null?void 0:b.parsed.scrobblingDisallowedReason}`)}),s(u,()=>v("disallowedDesc3")),f.$$click=()=>{var b;n(!0),E(((b=e.tab())==null?void 0:b.tabId)??-1,{type:"forceScrobbleSong",payload:void 0})},s(f,l(en,{}),null),s(f,()=>v("disallowedButton"),null),_(b=>{const m=d.widePopup,A=`${V.button} ${V.centered}`;return m!==b._v$&&g(i,b._v$=m),A!==b._v$2&&g(f,b._v$2=A),b},{_v$:void 0,_v$2:void 0}),i}})}be(["click"]);const $r=k("<div><h1></h1><p>");function br(e){const t=P(()=>{var r;const n=(r=e.tab())==null?void 0:r.song;if(n)return new Ce(n,-1)});return(()=>{const n=$r(),r=n.firstChild,i=r.nextSibling;return s(n,l(tn,{get class(){return d.bigIcon}}),r),s(r,()=>v("ignoredHeader")),s(i,()=>{var c,o;return v("ignoredDesc",[((c=t())==null?void 0:c.getArtist())??"????",((o=t())==null?void 0:o.getTrack())??"????"])}),s(n,l(K,{href:"https://support.last.fm/t/track-filter-list-unknown-scrobbles/776",get title(){return v("ignoredDescReadMore")},get children(){return v("ignoredDescReadMore")}}),null),_(()=>g(n,d.alertPopup)),n})()}const fr=[ot,at,me],_r=[j,Be,ct,Pe,me,ut,st,dt];function hr(){const[e,t]=Z(ln),[n,{refetch:r}]=Z(Te);p(()=>{e(),r()});const i=P(()=>{if(!n.loading){const o=n();if(o)return[o]}return[]});on(an({type:"currentTab",fn:o=>{t.mutate(o)}}));const c={[un]:()=>l($t,{}),[ot]:()=>l(yn,{}),[at]:()=>l(wn,{}),[j]:()=>l(Y,{tab:e}),[ct]:()=>l(Y,{tab:e}),[Be]:()=>l(Y,{tab:e}),[Pe]:()=>l(Y,{tab:e}),[st]:()=>l(Y,{tab:e}),[dt]:()=>l(Y,{tab:e}),[sn]:()=>l(gr,{tab:e}),[ut]:()=>l(wt,{tab:e}),[_e]:()=>l(_n,{}),[dn]:()=>l(br,{tab:e}),[me]:()=>[]};return[l(S,{get when(){return P(()=>{var o;return!_r.includes(((o=e())==null?void 0:o.mode)??_e)})()&&R()},get children(){return l(xe,{get items(){return i()}})}}),l(cn,{get component(){var o;return c[e.loading?me:((o=e())==null?void 0:o.mode)??_e]}}),l(S,{get when(){return P(()=>{var o;return!fr.includes(((o=e())==null?void 0:o.mode)??_e)})()&&!R()},get children(){return l(K,{get href(){return F.runtime.getURL("src/ui/options/index.html")},get class(){return d.settingsIcon},get title(){return v("disabledSiteButton")},get children(){return l(je,{})}})}})]}const mr=document.body,Oe=document.createElement("div");Oe.id="root";Oe.classList.add(d.root);mr.appendChild(Oe);nn(hr,Oe);rn();
