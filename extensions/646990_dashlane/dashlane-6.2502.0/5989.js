"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[5989],{42521:(e,t,a)=>{a.d(t,{Jh:()=>r,UE:()=>n,ZP:()=>o});var s=a(96832),l=a(26849);const n=(0,l.compose)(l.not,l.isEmpty,l.trim,(0,l.defaultTo)("")),i=/.+@.+\..+/,r=e=>i.test(e.trim());class o extends s.Component{constructor(e){super(e),this.setInternalState=e=>{this.setState({internal:{...this.state.internal,...e}})},this.setUpdatedValues=e=>{const{signalEditedValues:t,onValuesUpdated:a}=this.props,s={...this.state.values,...e};this.setState({values:s},(()=>{t&&t(this.hasFormBeenEdited()),a&&a(s)}))},this.handleChange=(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.");const a=e?.target?{[e.target.dataset.name]:e.target.value}:{[t]:e};this.setUpdatedValues(a)},this.handleChanges=e=>{this.setUpdatedValues(e)},this.validateValues=e=>{if(0===Object.keys(e).length)return!0;const t=(0,l.reduce)(((t,a)=>(t[a]=e[a]?(0,l.compose)(l.not,e[a]):()=>!1,t)),{},Object.keys(this.state.values)),a=(0,l.evolve)(t,this.state.values);return this.setState({errors:a}),(0,l.all)((0,l.equals)(!1),(0,l.values)(a))},this.hasFormBeenEdited=()=>!(0,l.equals)(this.state.values,this.props.currentValues),this.getValues=()=>this.state.values;const t=Object.keys(e.currentValues).reduce(((e,t)=>(e[t]=!1,e)),{});this.state={internal:{},values:e.currentValues,errors:t}}componentDidUpdate(e){(0,l.equals)(this.props.currentValues,e.currentValues)||this.setState({values:this.props.currentValues})}}},75989:(e,t,a)=>{a.r(t),a.d(t,{EmailAddPanel:()=>d}),a(96832);var s=a(22983),l=a(39431),n=a(46257),i=a(53748),r=a(15446),o=a(68593);const d=(0,i.B)({iconType:r.Tu.email,vaultItemType:l.U.Email,renderForm:(e,t,a,l)=>{const i={emailAddress:"",itemName:"",spaceId:l,type:s.V.Perso};return(0,o.tZ)(n._,{lee:e,currentValues:i,signalEditedValues:a,ref:t})}})},46257:(e,t,a)=>{a.d(t,{_:()=>h});var s=a(26849),l=a(22983),n=a(61468),i=a(77063),r=a(42521),o=a(67406),d=a(68037),u=a(68593);class h extends r.ZP{isFormValid(){return this.validateValues({emailAddress:r.Jh})}render(){var e,t;const a=this.props.lee.translate.namespace("webapp_personal_info_edition_email_"),{shouldShowFrozenStateDialog:i}=this.context,r=[{label:a("perso_type"),value:l.V.Perso},{label:a("pro_type"),value:l.V.Pro}],h=null!=(e=(0,s.find)((0,s.propEq)("value",this.state.values.type),r))?e:(0,s.head)(r);return(0,u.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,u.BX)(d.u,{title:a("content_card_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,u.tZ)(n.qo,{type:"email",required:!0,label:a("email_label"),placeholder:a("placeholder_no_email"),"data-name":"emailAddress",value:this.state.values.emailAddress,error:this.state.errors.emailAddress,onChange:this.handleChange,readOnly:!!i}),(0,u.tZ)(n.mg,{label:a("type_label"),placeholder:h.label,"data-name":"type",value:h.value,onChange:e=>{this.handleChange(e,"type")},readOnly:!!i,children:r.map((e=>(0,u.tZ)(n.$m,{value:e.value,children:e.label},e.value)))})]}),(0,u.BX)(d.u,{title:a("content_card_organization_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,u.tZ)(n.qo,{label:a("name_label"),placeholder:a("placeholder_no_emailName"),"data-name":"itemName",value:this.state.values.itemName,onChange:this.handleChange,readOnly:!!i}),(0,u.tZ)(o.M,{isUsingNewDesign:!0,labelSx:o.e,spaceId:null!=(t=this.state.values.spaceId)?t:"",onChange:e=>this.handleChange(e,"spaceId"),disabled:!!i})]})]})}}h.contextType=i.CQ},53748:(e,t,a)=>{a.d(t,{B:()=>_});var s=a(96832),l=a(48062),n=a(14900),i=a(8180),r=a(25792),o=a(39431),d=a(92077),u=a(39649),h=a(86498),c=a(88203),p=a(45272),m=a(77063),g=a(63520),v=a(15446),V=a(18462),y=a(68593);function _(e){const{renderForm:t,vaultItemType:a,iconType:_}=e;return({lee:e})=>{const{translate:b}=(0,c.Z)(),{routes:f}=(0,d.Xo)(),C=(0,h.V)(),{createVaultItem:I}=(0,i.u)(r.L),P=(0,s.useRef)(null),{openDialog:w,shouldShowFrozenStateDialog:E}=(0,m.Ub)(),[x,S]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e={[o.U.Address]:l.PageView.ItemAddressCreate,[o.U.Company]:l.PageView.ItemCompanyCreate,[o.U.Email]:l.PageView.ItemEmailCreate,[o.U.Identity]:l.PageView.ItemIdentityCreate,[o.U.Phone]:l.PageView.ItemPhoneCreate,[o.U.Website]:l.PageView.ItemWebsiteCreate};(0,p.Nc)(e[a])}),[]),(0,s.useEffect)((()=>{E&&w()}),[E]);const U=()=>{(0,p.Nc)(l.PageView.ItemPersonalInfoList),(0,d.uX)(f.userPersonalInfo)},Z=(0,u.B)(e.globalState),B=(0,y.tZ)(v.ZP,{iconSize:v.Jh.headerEditPanelIcon,iconType:_}),N=(0,V.gV)(b,a);return(0,y.tZ)(g.zI,{isUsingNewDesign:!0,isViewingExistingItem:!1,itemHasBeenEdited:x,onNavigateOut:U,onSubmit:async()=>{Boolean(P.current?.isFormValid())&&(await(async()=>{const e=P.current?.getValues();e&&"success"!==(await I({vaultItemType:a,content:e})).tag&&C.showAlert(b("_common_generic_error"),n.BLW.ERROR)})(),U())},formId:"add_personalinfo_panel",header:(0,y.tZ)(g.V9,{icon:B,title:N}),children:t(e,P,(()=>S(!0)),Z)})}}},22983:(e,t,a)=>{a.d(t,{V:()=>s});var s=function(e){return e.Perso="PERSO",e.Pro="PRO",e.NoType="NO_TYPE",e}({})}}]);