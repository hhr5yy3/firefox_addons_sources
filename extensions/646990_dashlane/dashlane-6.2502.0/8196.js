"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[8196],{28196:(e,t,i)=>{i.r(t),i.d(t,{CollectionView:()=>se});var n=i(96832),l=i(15192),o=i(48062),a=i(48038),s=i(80936),c=i(45272),r=i(92077),d=i(19122),h=i(28264),p=i(62735),u=i(58780),g=i(88795),_=i(61278),Z=i(97227),S=i(95727),w=i(16019),m=i(61468),b=i(33360),D=i(51276),C=i(45106),I=i(27895),v=i(68593);const O=(0,v.BX)(v.HY,{children:[(0,v.tZ)(C.D,{}),(0,v.tZ)(I.E,{})]});var f=i(27637),y=i(88203),T=i(55357),A=i(68014);const x=e=>{const{translate:t}=(0,y.Z)(),{canDelete:i,role:n}=(0,T.n)(e.id);return(0,v.tZ)(m.u,{content:(0,v.tZ)(A.V,{tooltipTitle:t("webapp_collection_action_disabled_editor_title"),tooltipDescription:t("webapp_collection_action_disabled_editor_description")}),passThrough:n!==f.Yt.Editor,wrapTrigger:!0,children:(0,v.tZ)(m.hP,{label:t("collections_delete_button_text"),leadingIcon:"ActionDeleteOutlined",isDestructive:!0,disabled:!i,onSelect:()=>e.setIsDeleteDialogOpen(!0),children:t("collections_delete_button_text")})})};var k=i(77063);const V=e=>{const{translate:t}=(0,y.Z)(),{canEdit:i}=(0,T.n)(e.id),{openDialog:n,shouldShowFrozenStateDialog:l}=(0,k.Ub)(),{role:a}=(0,T.n)(e.id);return(0,v.tZ)(m.u,{content:(0,v.tZ)(A.V,{tooltipTitle:t("webapp_collection_action_disabled_editor_title"),tooltipDescription:t("webapp_collection_action_disabled_editor_description")}),passThrough:a!==f.Yt.Editor,wrapTrigger:!0,location:"left",children:(0,v.tZ)(m.hP,{label:t("_common_action_edit"),leadingIcon:"ActionEditOutlined",onSelect:()=>{l?n():((0,c.Nc)(o.PageView.CollectionEdit),e.setIsEditDialogOpen(!0))},disabled:!i,children:t("_common_action_edit")})})},E=({id:e,setIsSharedAccessDialogOpen:t})=>{const{translate:i}=(0,y.Z)();return(0,v.tZ)(m.hP,{label:i("webapp_sharing_collection_access_dialog_title"),leadingIcon:"SharedOutlined",onSelect:()=>{(0,c.Kz)(new o.UserSharingStartEvent({sharingFlowType:o.SharingFlowType.CollectionSharing,collectionId:e,origin:o.Origin.CollectionDetailView})),t(!0)},children:i("webapp_sharing_collection_access_dialog_title")})};var N,P=i(59973),B=i(99822),L=i(53133),z=i(75864),X=i(26642),F=i(67678),M=i(85281),R=i(60345),Y=i(80343);const U=({id:e})=>{var t;const i=(0,M.G)(),n=(0,P.k)(),[l,a]=(0,L.A)(e),{role:s,canShare:r,sharingDisabledReason:d}=(0,T.n)(e),{openDialog:h,closeDialog:p}=(0,F.R)(),{translate:u}=(0,y.Z)(),{isStarterTeam:g,isAdmin:_}=(0,Z.Te)(),S=g&&!_&&s===f.Yt.Manager,{secureNotes:w}=(0,Y.y)(),b=w.some((e=>e.attachments?.length)),D=!S&&!r||a!==L.z.Complete||b,C=(0,A.S)(d)?.title,I=(0,A.S)(d)?.description;return(0,v.tZ)(m.u,{content:(0,v.tZ)(A.V,{tooltipTitle:C?u(C):"",tooltipDescription:I?u(I):""}),passThrough:!D||!C&&!I,wrapTrigger:!0,children:(0,v.tZ)(R.x,{onClick:()=>{if((0,c.Kz)(new o.UserSharingStartEvent({sharingFlowType:o.SharingFlowType.CollectionSharing,collectionId:e,origin:o.Origin.CollectionDetailView})),n){const t=!i&&a===L.z.Complete&&l?(0,B.wu)(e):(0,B.H4)(e);h((0,v.tZ)(z.Z,{sharing:t,onDismiss:p,origin:o.Origin.CollectionDetailView}))}else h(t||(t=(0,v.tZ)(X.z,{closeDialog:p})))},icon:N||(N=(0,v.tZ)(m.JO,{name:"ActionShareOutlined"})),disabled:D,children:u("_common_action_share")})})};var H,J,q=i(80742),K=i(40577);const W=({isShared:e=!1,isPersonalSpaceDisabled:t,vaultItemsIds:i,...l})=>{const[o,a]=(0,n.useState)(!1),[s,c]=(0,n.useState)(!1),[r,d]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),u=(0,K.o)("sharingVault_web_bulkaddtocollection_dev"),{translate:g}=(0,y.Z)();return(0,v.tZ)(D.h,{sx:{marginRight:"16px"},startWidgets:(0,v.tZ)(b.b,{isShared:e,spaceId:t?void 0:l.spaceId,children:(0,v.tZ)(m.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l.name})}),endWidget:(0,v.BX)(v.HY,{children:[u&&(0,v.tZ)(m.zx,{icon:H||(H=(0,v.tZ)(m.JO,{name:"ActionAddOutlined"})),layout:"iconLeading",onClick:()=>p(!0),children:g("webapp_collection_bulk_action_add_items")}),l?.spaceId?(0,v.tZ)(U,{id:l.id}):null,(0,v.BX)(m.h_,{align:"end",children:[J||(J=(0,v.tZ)(m.sB,{"aria-label":"More",icon:"ActionMoreOutlined",layout:"iconOnly",mood:"neutral",intensity:"quiet",id:"collection-action-more"})),(0,v.BX)(m.Nv,{children:[e?(0,v.tZ)(E,{id:l.id,setIsSharedAccessDialogOpen:a}):null,(0,v.tZ)(V,{setIsEditDialogOpen:c,...l}),(0,v.tZ)(x,{id:l.id,setIsDeleteDialogOpen:d})]})]}),O,(0,v.tZ)(q.Zy,{isOpen:o,onClose:()=>a(!1),id:l.id}),(0,v.tZ)(q.mu,{isOpen:s,onClose:()=>c(!1),isShared:e,...l}),(0,v.tZ)(q.AN,{isOpen:r,onClose:()=>d(!1),isShared:e,id:l.id,name:l.name,setIsSharedAccessDialogOpen:a}),(0,v.tZ)(_.B,{children:(0,v.tZ)(q.jJ,{isOpen:h,onClose:()=>p(!1),collectionName:l.name,spaceId:l.spaceId,isSharedCollection:e,collectionId:l.id,vaulItemsInCollection:i})},String(h))]})})};var j=i(58862),G=i(86929),$=i(29315);const Q=()=>{const{translate:e}=(0,y.Z)();return(0,v.tZ)($.x,{title:e("webapp_collections_empty_view_title"),description:e("webapp_collections_empty_view_description"),illustrationLightSrc:j,illustrationDarkSrc:G,children:(0,v.tZ)(m.zx,{icon:"ActionAddOutlined",layout:"iconLeading",children:e("webapp_collection_bulk_action_add_items")})})};var ee=i(35202),te=i(9503);const ie=({isNotesViewDisplayed:e,setTab:t})=>{const{secureNotes:i}=(0,Y.y)(),l=(0,g.h)();return(0,n.useEffect)((()=>(!l&&i?.length>0?t(w.f.SecureNotes):l&&!i?.length&&t(w.f.Passwords),()=>{t(w.f.Passwords)})),[l,i]),!i?.length||!l&&i.length>0?null:(0,v.tZ)(te.n,{isNotesViewDisplayed:e,setTab:t})};var ne,le,oe,ae=i(73501);const se=()=>{var e;const{routes:t}=(0,r.Xo)(),i=`{${(0,l.UO)().collectionId}}`,{currentSpaceId:m}=(0,d.fV)(),{collections:b,sharedCollections:D,isCollectionsLoading:C,updateActiveCollection:I}=(0,S.bA)(),{canShareCollection:O,hasSharingCollectionPaywall:f,isAdmin:y}=(0,Z.Te)(),T=(0,s.I)(),[A,x]=(0,n.useState)(w.f.Passwords);if((0,n.useEffect)((()=>((0,c.Nc)(o.PageView.CollectionDetails),()=>I(null))),[]),C||T.status!==a.rq.Success)return null;const k=(e=>t=>t.id===e)(i),V=null!=(e=b.find(k))?e:D.find(k);if(!V||null!==m&&V.spaceId!==m)return(0,v.tZ)(l.l_,{to:t.userCredentials});I(V);const{vaultItems:E,...N}=V;return(0,v.tZ)(p.Z,{ids:E.map((e=>e.id)),children:(0,v.tZ)(u.v,{children:(0,v.BX)(Y.c,{ids:E.map((e=>e.id)),children:[f&&y?(0,v.tZ)(Z.Li,{canShareCollection:O,sx:{margin:"24px"},clickOrigin:O?o.ClickOrigin.CollectionsSharingStarterLimitCloseToBeReachedMain:o.ClickOrigin.CollectionsSharingStarterLimitReachedMain}):null,(0,v.tZ)(ae.I,{header:(0,v.tZ)(W,{isPersonalSpaceDisabled:T.isDisabled,vaultItemsIds:E.map((e=>e.id)),...N}),children:E.length>0?(0,v.tZ)(g.x,{children:(0,v.BX)(_.B,{children:[(0,v.tZ)(ie,{isNotesViewDisplayed:A===w.f.SecureNotes,setTab:x}),A===w.f.SecureNotes?(0,v.tZ)("div",{sx:{marginLeft:"42px",height:"100%",overflow:"hidden",position:"relative"},children:ne||(ne=(0,v.tZ)(ee.E,{withLayout:!1}))}):le||(le=(0,v.tZ)(h.k,{withLayout:!1}))]})}):oe||(oe=(0,v.tZ)(Q,{}))})]})})})}}}]);