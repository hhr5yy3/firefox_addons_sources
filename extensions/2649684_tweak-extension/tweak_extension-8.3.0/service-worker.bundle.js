(()=>{var e={4690:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PADDLE=t.PADDLE_ENV_PRODUCTION=t.PADDLE_ENV_SANDBOX=t.ACTIVATION_PONG_EVENT=t.ACTIVATION_PING_EVENT=t.EXT_TO_WEB_EVENT_NAME=t.CROSS_SCRIPT_EVENT_NAME=t.EXT_SCRIPT_ID=void 0,t.EXT_SCRIPT_ID="__tweak_browser_extension_intercept_script__",t.CROSS_SCRIPT_EVENT_NAME="TweakGenericForwardEvent",t.EXT_TO_WEB_EVENT_NAME="TweakWebForwardEvent",t.ACTIVATION_PING_EVENT="TPA",t.ACTIVATION_PONG_EVENT="TPA_PONG",t.PADDLE_ENV_SANDBOX="sdx",t.PADDLE_ENV_PRODUCTION="prd",t.PADDLE={[t.PADDLE_ENV_SANDBOX]:{vendorId:4115,products:{premium:21169,premium_annual:39072}},[t.PADDLE_ENV_PRODUCTION]:{vendorId:138412,products:{premium:765754,premium_annual:802861}}}},5976:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TweakApiHttpClient=t.ServerJSONError=void 0;const s=a(o(1247));class c extends Error{constructor(e){super(e)}}t.ServerJSONError=c;t.TweakApiHttpClient=class{constructor(e){this.config=e}getStatus(e){return this.doFetch(s.TweakApiBlueprints.status,e)}postAuth(e,t){const o=this.parseBody(e);return this.doFetch(s.TweakApiBlueprints.auth,Object.assign(Object.assign({},t),{method:"POST",body:o}))}postActivatePlan(e,t){const o=this.parseBody(e);return this.doFetch(s.TweakApiBlueprints.activatePlan,Object.assign(Object.assign({},t),{method:"POST",body:o}))}postCheckPlan(e,t){const o=this.parseBody(e);return this.doFetch(s.TweakApiBlueprints.checkPlan,Object.assign(Object.assign({},t),{method:"POST",body:o}))}parseBody(e){try{return JSON.stringify(e)}catch(e){throw e}}doFetch(e,t){const o=this.buildHeaders(null==t?void 0:t.headers),n=e?`${this.config.baseUrl}${e}`:null;return null==n?Promise.reject(new Error("invalid URL")):fetch(n,Object.assign(Object.assign({},t),{headers:o})).then((e=>i(this,void 0,void 0,(function*(){const t=yield e.json();if(e.status>=400&&e.status<=599)throw new c(JSON.stringify(t));return t})))).catch((e=>{throw e}))}buildHeaders(e){return Object.assign(Object.assign({},e),{"content-type":"application/json","x-doge":this.buildNonce(),"x-nonce":`${Date.now()}`})}buildNonce(){try{return btoa(`${this.config.apiClientSecret}:${Date.now()}`)}catch(e){return""}}}},5498:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.withResilience=t.BZC=t.Types=t.ServerJSONError=t.TweakApiHttpClient=void 0;var i=o(5976);Object.defineProperty(t,"TweakApiHttpClient",{enumerable:!0,get:function(){return i.TweakApiHttpClient}}),Object.defineProperty(t,"ServerJSONError",{enumerable:!0,get:function(){return i.ServerJSONError}}),t.Types=a(o(1247)),t.BZC=a(o(4690));var s=o(4084);Object.defineProperty(t,"withResilience",{enumerable:!0,get:function(){return s.withResilience}})},4084:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.withResilience=void 0;function n(e){return o(this,void 0,void 0,(function*(){return yield new Promise((t=>{setTimeout((()=>{t()}),e)}))}))}function r(e,t){const o=Math.ceil(e),n=Math.floor(t);return Math.floor(Math.random()*(n-o)+o)}t.withResilience=function(e,t){var a;return o(this,void 0,void 0,(function*(){let o,i;for(let s=0;s<t.retries;s++)try{o=yield e(),i=void 0;break}catch(e){i=e;const o=null!==(a=null==t?void 0:t.retryInterval)&&void 0!==a?a:r(1e3,5e3);yield n(o)}if(i)throw i;return o}))}},1247:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AuthType=t.PlanStatus=t.Plan=t.Status=t.TweakApiBlueprints=void 0,function(e){e.status="/api/status",e.auth="/api/auth",e.activatePlan="/api/activate-plan",e.checkPlan="/api/check-plan"}(t.TweakApiBlueprints||(t.TweakApiBlueprints={})),function(e){e.Serving="serving",e.Down="down"}(t.Status||(t.Status={})),function(e){e.Free="x0",e.Premium="x1",e.Unknown="n/a"}(t.Plan||(t.Plan={})),function(e){e.Active="y0",e.PastDue="y1",e.Paused="y2",e.Trialing="y3",e.Deleted="y4"}(t.PlanStatus||(t.PlanStatus={})),function(e){e.GitHub="gh",e.Google="alpha"}(t.AuthType||(t.AuthType={}))},6961:(e,t,o)=>{var n,r=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function r(e,t){if(!n[e]){n[e]={};for(var o=0;o<e.length;o++)n[e][e.charAt(o)]=o}return n[e][t]}var a={compressToBase64:function(e){if(null==e)return"";var o=a._compress(e,6,(function(e){return t.charAt(e)}));switch(o.length%4){default:case 0:return o;case 1:return o+"===";case 2:return o+"==";case 3:return o+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:a._decompress(e.length,32,(function(o){return r(t,e.charAt(o))}))},compressToUTF16:function(t){return null==t?"":a._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:a._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=a.compress(e),o=new Uint8Array(2*t.length),n=0,r=t.length;n<r;n++){var i=t.charCodeAt(n);o[2*n]=i>>>8,o[2*n+1]=i%256}return o},decompressFromUint8Array:function(t){if(null==t)return a.decompress(t);for(var o=new Array(t.length/2),n=0,r=o.length;n<r;n++)o[n]=256*t[2*n]+t[2*n+1];var i=[];return o.forEach((function(t){i.push(e(t))})),a.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":a._compress(e,6,(function(e){return o.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),a._decompress(e.length,32,(function(t){return r(o,e.charAt(t))})))},compress:function(t){return a._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,o){if(null==e)return"";var n,r,a,i={},s={},c="",l="",_="",u=2,d=3,p=2,h=[],m=0,E=0;for(a=0;a<e.length;a+=1)if(c=e.charAt(a),Object.prototype.hasOwnProperty.call(i,c)||(i[c]=d++,s[c]=!0),l=_+c,Object.prototype.hasOwnProperty.call(i,l))_=l;else{if(Object.prototype.hasOwnProperty.call(s,_)){if(_.charCodeAt(0)<256){for(n=0;n<p;n++)m<<=1,E==t-1?(E=0,h.push(o(m)),m=0):E++;for(r=_.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&r,E==t-1?(E=0,h.push(o(m)),m=0):E++,r>>=1}else{for(r=1,n=0;n<p;n++)m=m<<1|r,E==t-1?(E=0,h.push(o(m)),m=0):E++,r=0;for(r=_.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&r,E==t-1?(E=0,h.push(o(m)),m=0):E++,r>>=1}0==--u&&(u=Math.pow(2,p),p++),delete s[_]}else for(r=i[_],n=0;n<p;n++)m=m<<1|1&r,E==t-1?(E=0,h.push(o(m)),m=0):E++,r>>=1;0==--u&&(u=Math.pow(2,p),p++),i[l]=d++,_=String(c)}if(""!==_){if(Object.prototype.hasOwnProperty.call(s,_)){if(_.charCodeAt(0)<256){for(n=0;n<p;n++)m<<=1,E==t-1?(E=0,h.push(o(m)),m=0):E++;for(r=_.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&r,E==t-1?(E=0,h.push(o(m)),m=0):E++,r>>=1}else{for(r=1,n=0;n<p;n++)m=m<<1|r,E==t-1?(E=0,h.push(o(m)),m=0):E++,r=0;for(r=_.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&r,E==t-1?(E=0,h.push(o(m)),m=0):E++,r>>=1}0==--u&&(u=Math.pow(2,p),p++),delete s[_]}else for(r=i[_],n=0;n<p;n++)m=m<<1|1&r,E==t-1?(E=0,h.push(o(m)),m=0):E++,r>>=1;0==--u&&(u=Math.pow(2,p),p++)}for(r=2,n=0;n<p;n++)m=m<<1|1&r,E==t-1?(E=0,h.push(o(m)),m=0):E++,r>>=1;for(;;){if(m<<=1,E==t-1){h.push(o(m));break}E++}return h.join("")},decompress:function(e){return null==e?"":""==e?null:a._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,o,n){var r,a,i,s,c,l,_,u=[],d=4,p=4,h=3,m="",E=[],f={val:n(0),position:o,index:1};for(r=0;r<3;r+=1)u[r]=r;for(i=0,c=Math.pow(2,2),l=1;l!=c;)s=f.val&f.position,f.position>>=1,0==f.position&&(f.position=o,f.val=n(f.index++)),i|=(s>0?1:0)*l,l<<=1;switch(i){case 0:for(i=0,c=Math.pow(2,8),l=1;l!=c;)s=f.val&f.position,f.position>>=1,0==f.position&&(f.position=o,f.val=n(f.index++)),i|=(s>0?1:0)*l,l<<=1;_=e(i);break;case 1:for(i=0,c=Math.pow(2,16),l=1;l!=c;)s=f.val&f.position,f.position>>=1,0==f.position&&(f.position=o,f.val=n(f.index++)),i|=(s>0?1:0)*l,l<<=1;_=e(i);break;case 2:return""}for(u[3]=_,a=_,E.push(_);;){if(f.index>t)return"";for(i=0,c=Math.pow(2,h),l=1;l!=c;)s=f.val&f.position,f.position>>=1,0==f.position&&(f.position=o,f.val=n(f.index++)),i|=(s>0?1:0)*l,l<<=1;switch(_=i){case 0:for(i=0,c=Math.pow(2,8),l=1;l!=c;)s=f.val&f.position,f.position>>=1,0==f.position&&(f.position=o,f.val=n(f.index++)),i|=(s>0?1:0)*l,l<<=1;u[p++]=e(i),_=p-1,d--;break;case 1:for(i=0,c=Math.pow(2,16),l=1;l!=c;)s=f.val&f.position,f.position>>=1,0==f.position&&(f.position=o,f.val=n(f.index++)),i|=(s>0?1:0)*l,l<<=1;u[p++]=e(i),_=p-1,d--;break;case 2:return E.join("")}if(0==d&&(d=Math.pow(2,h),h++),u[_])m=u[_];else{if(_!==p)return null;m=a+a.charAt(0)}E.push(m),u[p++]=a+m.charAt(0),a=m,0==--d&&(d=Math.pow(2,h),h++)}}};return a}();void 0===(n=function(){return r}.call(t,o,t,e))||(e.exports=n)}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{o.p,o.p,o.p,o.p,o.p,o.p;const e="chrome",t="firefox",n="FIREFOX".toLowerCase();function r(e={}){if(chrome.runtime.lastError){let t;if(chrome.runtime.lastError&&chrome.runtime.lastError.message){t=chrome.runtime.lastError.message;let o=t;if(o.includes("Could not establish connection. Receiving end does not exist"))return void 0;e&&e.msg&&e.msg.type&&(o=`${o}: ${e.msg.type}`)}0}}function a(e){chrome.runtime.onMessage.addListener(((...t)=>(e(...t),!0)))}const i={[e]:a,[t]:a}[n];function s(e,t,o,n){const a={type:e,payload:t};chrome.tabs.query({currentWindow:!0,active:!0},(e=>{const t=e[0];try{chrome.tabs.sendMessage(t.id,a,o,(()=>{r({activeTab:t,msg:a,options:o}),n&&n()}))}catch(e){0}}))}const c={[e]:s,[t]:s}[n];const l={[e]:function(e,t){chrome.action.setIcon(e,t)},[t]:function(e,t){try{browser.browserAction.setIcon(e,t)}catch(e){0}}}[n];const _={[e]:function(e,t=(()=>{})){chrome.action.setBadgeText(e,t)},[t]:function(e,t=(()=>{})){browser.browserAction.setBadgeText(e,t)}}[n];function u(e=(()=>{})){chrome.tabs.onActivated.addListener(e)}const d={[e]:u,[t]:u}[n];const p={[e]:function(e=(()=>{})){try{chrome.tabs.onUpdated.addListener(e)}catch(e){0}},[t]:function(e=(()=>{})){try{browser.tabs.onUpdated.addListener(e)}catch(e){0}}}[n];function h(e=(()=>{})){chrome.tabs.onRemoved.addListener(e)}const m={[e]:h,[t]:h}[n];function E(e={currentWindow:!0,active:!0},t=(()=>{})){chrome.tabs.query(e,t)}const f={[e]:E,[t]:E}[n];function T({url:e=""}){if(e)try{chrome.tabs.create({url:e})}catch(e){0}}const g={[e]:T,[t]:T}[n];function b(e,t=(()=>{})){if(e)try{chrome.runtime.setUninstallURL(e,t)}catch(e){0}}const y={[e]:b,[t]:b}[n];function A(e){if(e&&"function"==typeof e)try{chrome.runtime.onInstalled.addListener(e)}catch(e){0}}const v={[e]:A,[t]:A}[n];const O={[e]:function(e){if(e&&"function"==typeof e)try{chrome.commands.onCommand.addListener(e)}catch(e){0}},[t]:function(e){if(e&&"function"==typeof e)try{browser.commands.onCommand.addListener(e)}catch(e){0}}}[n];const w={[e]:function(e){try{if(!e)return;return chrome.tabs.get(e)}catch(e){0}},[t]:function(e){try{if(!e)return;return browser.tabs.get(e)}catch(e){0}}}[n];function S(){return new Promise((e=>{f({currentWindow:!0,active:!0},(t=>{const o=t&&t[0]&&t[0].id;e(o||null)}))}))}var N,C=new Uint8Array(16);function P(){if(!N&&!(N="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return N(C)}const x=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const I=function(e){return"string"==typeof e&&x.test(e)};for(var R=[],L=0;L<256;++L)R.push((L+256).toString(16).substr(1));const k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(R[e[t+0]]+R[e[t+1]]+R[e[t+2]]+R[e[t+3]]+"-"+R[e[t+4]]+R[e[t+5]]+"-"+R[e[t+6]]+R[e[t+7]]+"-"+R[e[t+8]]+R[e[t+9]]+"-"+R[e[t+10]]+R[e[t+11]]+R[e[t+12]]+R[e[t+13]]+R[e[t+14]]+R[e[t+15]]).toLowerCase();if(!I(o))throw TypeError("Stringified UUID is invalid");return o};var D,U,M=0,H=0;const G=function(e,t,o){var n=t&&o||0,r=t||new Array(16),a=(e=e||{}).node||D,i=void 0!==e.clockseq?e.clockseq:U;if(null==a||null==i){var s=e.random||(e.rng||P)();null==a&&(a=D=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==i&&(i=U=16383&(s[6]<<8|s[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:H+1,_=c-M+(l-H)/1e4;if(_<0&&void 0===e.clockseq&&(i=i+1&16383),(_<0||c>M)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");M=c,H=l,U=i;var u=(1e4*(268435455&(c+=122192928e5))+l)%4294967296;r[n++]=u>>>24&255,r[n++]=u>>>16&255,r[n++]=u>>>8&255,r[n++]=255&u;var d=c/4294967296*1e4&268435455;r[n++]=d>>>8&255,r[n++]=255&d,r[n++]=d>>>24&15|16,r[n++]=d>>>16&255,r[n++]=i>>>8|128,r[n++]=255&i;for(var p=0;p<6;++p)r[n+p]=a[p];return t||k(r)};var $=o(5498);const F=[{code:100,text:"Continue"},{code:101,text:"Switching Protocols"},{code:103,text:"Early Hints"},{code:200,text:"OK"},{code:201,text:"Created"},{code:202,text:"Accepted"},{code:203,text:"Non-Authoritative Information"},{code:204,text:"No Content"},{code:205,text:"Reset Content"},{code:206,text:"Partial Content"},{code:300,text:"Multiple Choices"},{code:301,text:"Moved Permanently"},{code:302,text:"Found"},{code:303,text:"See Other"},{code:304,text:"Not Modified"},{code:307,text:"Temporary Redirect"},{code:308,text:"Permanent Redirect"},{code:400,text:"Bad Request"},{code:401,text:"Unauthorized"},{code:402,text:"Payment Required"},{code:403,text:"Forbidden"},{code:404,text:"Not Found"},{code:405,text:"Method Not Allowed"},{code:406,text:"Not Acceptable"},{code:407,text:"Proxy Authentication Required"},{code:408,text:"Request Timeout"},{code:409,text:"Conflict"},{code:410,text:"Gone"},{code:411,text:"Length Required"},{code:412,text:"Precondition Failed"},{code:413,text:"Payload Too Large"},{code:414,text:"URI Too Long"},{code:415,text:"Unsupported Media Type"},{code:416,text:"Range Not Satisfiable"},{code:417,text:"Expectation Failed"},{code:418,text:"I'm a teapot"},{code:422,text:"Unprocessable Entity"},{code:425,text:"Too Early"},{code:426,text:"Upgrade Required"},{code:428,text:"Precondition Required"},{code:429,text:"Too Many Requests"},{code:431,text:"Request Header Fields Too Large"},{code:451,text:"Unavailable For Legal Reasons"},{code:500,text:"Internal Server Error"},{code:501,text:"Not Implemented"},{code:502,text:"Bad Gateway"},{code:503,text:"Service Unavailable"},{code:504,text:"Gateway Timeout"},{code:505,text:"HTTP Version Not Supported"},{code:506,text:"Variant Also Negotiates"},{code:507,text:"Insufficient Storage"},{code:508,text:"Loop Detected"},{code:510,text:"Not Extended"},{code:511,text:"Network Authentication Required"}],q="application/json; charset=utf-8",B=$.BZC.EXT_SCRIPT_ID;class j extends Error{constructor(...e){super(...e),this.name="ImportInvalidTweakCollectionsFormatError",this.message="format detection failed due to malformed/invalid tweak collections"}}class V extends Error{constructor(...e){super(...e),this.name="ImportInvalidTweakVariablesFormatError",this.message="format detection failed due to malformed/invalid tweak variables"}}class Y extends Error{constructor(...e){super(...e),this.name="ImportInvalidTweakDataFormatError",this.message="format detection failed due to malformed/invalid data"}}class K extends Error{constructor(...e){super(...e),this.name="ImportInvalidJSONError"}}class W extends Error{constructor(...e){super(...e),this.name="FailedToSaveInBrowserStorageError"}}const X=F,Q=new Map(F.map((({code:e,text:t})=>[e,t]))),J=[{id:G(),header:"Content-Type",value:q,active:!0}],z=new RegExp("[a-zA-Z][a-zA-Z_0-9]*","g"),Z={free:$.Types.Plan.Free,premium:$.Types.Plan.Premium},ee=[$.Types.PlanStatus.Trialing,$.Types.PlanStatus.Active];let te="https://tweak-extension.com";const oe={MOUNT_ARTIFICIAL_DELAY:100,START_ICON:"icon-tweak-start.png",STOP_ICON:"icon-tweak-stop.png",URL_MAX_LEN:3e3,DEFAULT_RESPONSE_CONTENT_TYPE:q,DEFAULT_HEADERS:J,DEFAULT_HTTP_METHOD:"GET",DEFAULT_REQUEST_HOOK_FUNCTION:"return { method, url, body, headers };",DEFAULT_RESPONSE_HOOK_FUNCTION:"return response;",AVAILABLE_LODASH_FUNCTIONS:["isEqual","merge","pick"],AVAILABLE_LODASH_FUNCTIONS_COMPLETION:{isEqual:"_.isEqual(value, other)",merge:"_.merge(target, source)",pick:"_.pick(object, [paths])"},RESPONSE_HOOK_CONTEXT_VARIABLES:["response","url","method","body","vars","chance"],VARIABLE_NAME_RGX:z,INTERCEPTION_POLICIES:{MOCK:{NAME:"Mock server",KEY:"MOCK",DESCRIPTION:"It will bypass the original request, and tweak will simply act as a mock.",LABEL:"Mock"},PATCH:{NAME:"Patch original request",KEY:"PATCH",DESCRIPTION:'Once this policy is active, tweak will keep its original logic, it will call the server and then apply the configuration changes on top of the server"s response.',LABEL:"Modify"}},REQUEST_PAYLOAD_MATCH_POLICY:{EXACT:"EXACT",PARTIAL:"PARTIAL"},RC_MORE_OPTIONS_ACTIONS:{DELETE:"delete",DUPLICATE:"duplicate",MOVE_TO_TOP:"move_to_top",MOVE_TO_BOTTOM:"move_to_bottom",MOVE_TO_COLLECTION:"move_to_collection"},WAIT_TIME_TO_CLEAR_SNACK_MSG:1e4,WAIT_TIME_TO_CLEAR_SNACK_MSG_SHORT:5e3,MAX_ERROR_MESSAGES_QUEUE_SIZE:3,SCRIPT_ID:B,ImportInvalidTweakCollectionsFormatError:j,ImportInvalidTweakVariablesFormatError:V,ImportInvalidTweakDataFormatError:Y,FailedToSaveInBrowserStorageError:W,ImportInvalidJSONError:K,HTTP_METHOD_OPTIONS:["*","POST","GET","PUT","CONNECT","OPTIONS","PATCH","DELETE","HEAD","TRACE"],STATUS_CODES_OPTIONS:X,STATUS_CODE_MAP:Q,DEFAULT_STATUS:"200",DEFAULT_STATUS_TEXT:"OK",CONTENT_TYPES_OPTIONS:["application/javascript","application/json","application/xhtml+xml","text/css","text/csv","text/html","text/javascript","text/plain","audio/aac","application/x-abiword","application/x-freearc","video/x-msvideo","application/vnd.amazon.ebook","application/octet-stream","image/bmp","application/x-bzip","application/x-bzip2","application/x-csh","application/msword","application/vnd.ms-fontobject","application/epub+zip","application/gzip","image/gif","image/vnd.microsoft.icon","text/calendar","application/java-archive","image/jpeg","application/ld+json","audio/midi","audio/mpeg","video/mpeg","application/vnd.apple.installer+xml","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.text","audio/ogg","video/ogg","application/ogg","audio/opus","font/otf","image/png","application/pdf","application/x-httpd-php","application/vnd.rar","application/rtf","application/x-sh","image/svg+xml","application/x-shockwave-flash","application/x-tar","image/tiff","video/mp2t","font/ttf","application/vnd.visio","audio/wav","audio/webm","video/webm","image/webp","font/woff","font/woff2","application/vnd.ms-excel","text/xml","application/vnd.mozilla.xul+xml","application/zip","audio/3gpp","audio/3gpp2","application/x-7z-compressed"],TWEAK_INPUT_ACCEPT_ATTRIBUTE:".json",TOOLBAR_MORE_ACTIONS:{EXPORT:"export",IMPORT:"import",CLEAR_CACHE:"clear_cache",OPEN_AUTO_ENABLED_SITES_PANEL:"open_auto_enabled_sites_panel"},BROWSERS:{CHROME:"CHROME",FIREFOX:"FIREFOX"},BROWSER_NAMES:{CHROME:"Chrome",FIREFOX:"Firefox"},STORE_LINKS:{CHROME:"https://chrome.google.com/webstore/detail/tweak/feahianecghpnipmhphmfgmpdodhcapi",FIREFOX:"https://addons.mozilla.org/en-US/firefox/addon/tweak-extension/"},GOALS_STATUS:{LACKING:0,ACHIEVED:1,LOGGED:2},THEME_LINK_ID:"tweak-css-theme-id",THEME_COMMON_FILE_PREFIX:"tweak-smui",LAST_THEME_LINK_TAG_HREF:"tweak-smui-dark.css",THEMES:{light:"light",dark:"dark"},PLANS:Z,RULE_LIMITS:{free:12,premium:200},PAGES:{autoEnabledSites:"auto_enabled_sites",main:"main",variables:"variables"},AUTOCOMPLETE_MAGIC_STATUS_FILTER_LABEL:"status:",AUTOCOMPLETE_MAGIC_METHOD_FILTER_LABEL:"method:",AUTOCOMPLETE_MAGIC_REQ_PAYLOAD_FILTER_LABEL:"rp:",EXPERIMENTS:{},PLAN_DOWNGRADED:"downgrade",ALL_PAID_PLANS:[Z.premium],ALL_VALID_PLAN_STATUS:ee,WEBSITE_BLUEPRINTS:{INTRO:`${te}/docs/intro`,CHANGELOG:`${te}/changelog`,PRICING:`${te}/pricing`,SIGN_IN:`${te}/subscription?intent=ap`,DEBUGGING:`${te}/docs/debug-request`,MOCK_MODIFY:`${te}/docs/rule/mock-vs-modify`,RESPONSE_PAYLOAD:`${te}/docs/rule/response-payload`,REQUEST_PAYLOAD:`${te}/docs/rule/request-payload`,HTTP_HEADERS:`${te}/docs/rule/http-headers`,REQUEST_HOOK:`${te}/docs/rule/request-hook`,RESPONSE_HOOK:`${te}/docs/rule/javascript-snippet`,VARIABLES:`${te}/docs/variables`,COLLECTIONS:`${te}/docs/collections`,AUTO_ENABLED_SITES:`${te}/docs/settings/auto-enabled-sites`},MAX_COLLECTION_NAME_LENGTH:32,MAX_NUMBER_OF_COLLECTIONS:50};let ne,re,ae,ie,se,ce,le,_e,ue,de;{const e=()=>{};ae=e,ie=e,se=e,ce=e,le=e,_e=e,ue=e,de=e,ne=Object.freeze({}),re=Object.freeze({REQUEST_TOGGLE_SWITCH:e,RUN_STOP_BUTTON_CLICKED:e,TOGGLE_LOGPOINT:e,HEADERS_TAB:e,SELECT_HTTP_METHOD:e,SELECT_RESPONSE_STATUS:e,TOGGLE_REQ_P_EXACT_MATCH:e,CHANGE_TWEAK_PLAN:e,CHANGE_INTERCEPTION_MODE:e,REQUEST_AUTOCOMPLETE_TOGGLE:e,ADD_HEADER:e,DELETE_ALL_HEADERS:e,DELETE_SINGLE_HEADER:e,UPDATE_CONTENT_TYPE_HEADER:e,EXTERNAL_TWEAK_INSTALL:e,EXTERNAL_TWEAK_UPDATE:e,EXTERNAL_TWEAK_REFRESH:e,NUMBER_OF_CONFIGURATIONS:e,TOGGLE_DARK_MODE:e})}const pe="tweak-browser-extension-data",he="tweak-browser-extension.background-requests";function me(e,t=pe){return new Promise((function(o,n){try{const r={[t]:e};chrome.storage.local.set(r,(function(){const e=chrome.runtime.lastError;if(e&&e.message)return"QUOTA_BYTES quota exceeded"===e.message&&ae({hitType:ne.TYPE_EVENT,eventCategory:ne.CATEGORY_GLOBAL,eventAction:ne.ACTION_AUTO,eventLabel:re.QUOTA_BYTES_EXCEEDED}),void n(new Error(e.message));o(!0)}))}catch(e){n(e)}}))}function Ee(e=pe){return new Promise((function(t,o){try{chrome.storage.local.get([e],(function(o){const n=chrome.runtime.lastError;n&&n.message&&n.message;const r=o&&o[e]?o[e]:null;t(r)}))}catch(e){o(e)}}))}const fe=!1;let Te;function ge(e){try{Te?be(Te,e):Ee().catch((()=>{})).then((t=>{if(t){const{analyticsClientId:e}=t;Te=e}be(Te,e)}))}catch(e){0}}function be(e,{hitType:t,eventCategory:o,eventAction:n,eventLabel:r}){try{return void 0}catch(e){fe}}const ye={snack_delete_rc_confirmation:({name:e},t)=>`Rule "${e?t.ellipsis(e,30):"unknown"}" deleted`,snack_duplication_rc_confirmation:({name:e},t)=>`Duplicated rule "${e?t.ellipsis(e,30):"unknown"}"`,snack_btn_video:"video",snack_title:"Dismiss",empty_state_message_first_line:"Ohhh... nothing here, but me!",empty_state_message_second_line_piece_1:"Create a rule by clicking the",empty_state_message_second_line_piece_2:"button",empty_state_message_third_line_piece_1:"or click",empty_state_message_third_line_piece_2:"to import existing ones",empty_state_message_third_line_cta:"here",empty_state_img_alt:"empty state image",empty_state_img_loading_alt:"loading state image",hits_limit_of_rcs_in_extension:({limit:e})=>`You've reached the maximum of ${e} rules. Upgrade to add more rules.`,storage_generic_error:"Something went wrong while saving your changes.",storage_limit_error:"You cannot store more than 5MB of data in the extension. Recent rules might not have been saved.",hits_limit_of_rcs_in_extension_via_import:({limit:e,n:t})=>`Only ${t} rule${t>1?"s":""} imported. ${e} rules limit reached. Upgrade to import more rules.`,plus_btn_title:"Create a new rule",extension_toggle_running_title:({on:e})=>(e?"Disable":"Enable")+" extension",collapse_all_rows:"Collapse all rows",variables_title:"Variables",variables_name_title:"Name",variables_value_title:"Value",variables_placeholder_name:"name",variables_placeholder_value:"value",variables_footer_note:"You can define variables to reference across all your rules.",smart_autocomplete_title:({active:e})=>(e?"Disable":"Enable")+" request autocompletion",smart_autocomplete_activate_msg:"From now on, requests triggered on this browser tab are searchable in the URL field",smart_autocomplete_deactivate_msg:"You can no longer search for requests in the URL field",smart_autocomplete_fallback_msg:'{ "response": "We ran into issues parsing this response" }',delete_all_data:"Delete all",generic_delete_data_modal_title:"⚠️ Clear data",delete_all_modal_content:"Are you sure you want to delete all the rules? All the background cache will be cleared. To search requests in the URL field please re-trigger them in this browser tab.",delete_all_modal_content_all_collections:"Are you sure you want to <b>delete all the collections and rules in the extension</b>? All the background cache will be cleared. To search requests in the URL field please re-trigger them in this browser tab.",delete_all_modal_content_single_collection:({name:e})=>`Are you sure you want to delete the collection <b>"${e}"</b> and all its rules? All the background cache will be cleared. To search requests in the URL field please re-trigger them in this browser tab.`,delete_all_data_success:"All clear!",delete_all_data_failure:"Oops! Something went wrong, please try again later.",modal_action_no:"No",modal_action_yes:"Yes",more_options_title:"More options",more_options_import_success:"Import successful",more_options_import:"Import",more_options_import_error:({fileName:e})=>`Oops, an error occurred while uploading your file <b>${e}</b>. Please try again.`,more_options_import_generic_error:()=>"Oops, something went wrong while processing your file. Please try again.",more_options_import_error_invalid_data:({fileName:e})=>`Oops, looks like your file <b>${e}</b> has invalid or missing data. Please amend your file and try again.`,more_options_import_error_invalid_json:({fileName:e})=>`Oops, looks like your file <b>${e}</b> contains invalid JSON. Please amend your file and try again.`,more_options_export:"Export",more_options_export_error:"Something went wrong. Please try to export again later.",more_options_export_success:({fileName:e})=>`${e} exported successfully!`,more_options_clear_cache:"Clear cache",more_options_clear_cache_success:"Extension cache cleared.",more_options_auto_enabled_sites:"Enabled sites",import_box_description_html:()=>"You can import a <b>.json</b> file with tweak rules. They will appear in the extension once the upload is successful.",import_box_title:()=>"tweak extension import",import_box_choose_btn_text:()=>"Choose a file",lsm_upgrade:"Upgrade",lsm_sign_in:"Sign in",lsm_update_sub:"Manage subscription",lsm_cancel_sub:"Cancel subscription",lsm_sign_out:"Sign out",lsm_ext_link_text_docs:"Docs",lsm_ext_link_review:"Rate extension",lsm_ext_link_tweak_version:({version:e})=>`v${e}`,lsm_theme:"Theme",lsm_tweak_logo_alt:"official tweak logo",lsm_footer:()=>"Made with ❤️ by Tweak Technologies",lsm_feedback_cta:"Give feedback",lsm_feedback_info:"Hey! We want to hear from you. Help us improve tweak 📣",lsm_discount_cta:"Upgrade now",lsm_discount_info:"Do you think tweak can't get better than this? <br>Use the coupon <b>TWEAKPOWERUSER</b> at checkout for a lifetime 50% off on your subscription.<br><small><i>(Limited to the first 50 subscribers)</i></small>",rc_field_label:"Label",rc_field_delay:"Delay by (ms)",rc_debugging:"Debugging",rc_mode:"Rule",rc_more_options_delete:"Delete",rc_more_options_move_to_top:"Move to top",rc_more_options_move_to_bottom:"Move to bottom",rc_more_options_duplicate:"Duplicate",rc_move_to_collection:"Move to collection",rc_http_method:"HTTP Method",rc_http_method_opened:"scroll for more",rc_http_method_wildcard:"* (any)",rc_http_status:"Status code",rc_http_status_forward:"Forward status",rc_http_status_title:"Status code will fallback to 200 if left empty",rc_http_status_title_patch:"A valid status code will override the original response status code. Leave 0 to forward the original response status code.",rc_url_match_expression:"URL",rc_regex_explained:({on:e})=>(e?"Disable":"Enable")+" use of regular expression",rc_url_match_expression_bad_regex_error:"Oops! That's an invalid regular expression",rc_tooltip_http_method_badge:({method:e})=>"*"===e?"matching all HTTP methods":`matching HTTP method ${e}`,rc_tooltip_request_interception_counter:({requestCount:e})=>`${e} ${1===e?"request":"requests"} intercepted`,rc_tooltip_request_last_interception_time:({ts:e},t)=>t.time(e),rc_tooltip_generic_disabled_info:"Click first ▶ to enable the extension",rc_invalid_regular_expression_provided:({regex:e,configName:t})=>`Invalid regular expression "${e}" for "${t}".`,rc_config_name_copy_duplication:({name:e})=>`${e} (copy)`,rc_bad_input_in_editor:({configName:e})=>"It seems we could not parse your payload "+(e?`for rule ${e}`:""),rc_bad_json_upon_interception:({configName:e})=>`Something went wrong, the response payload for rule "${e||"unknown"}" is invalid.`,rc_logpoint:({on:e})=>(e?"Disable":"Enable")+" enhanced logpoint",rc_logpoint_footer:"to get rich logs in the devtools console",rc_breakpoint:({on:e})=>(e?"Disable":"Enable")+" breakpoint",rc_breakpoint_footer:"needs devtools opened",rc_editor_menu_response:"Response",rc_editor_tab_response_title:"Response payload",rc_editor_tab_response_title_forward:"Forward response",rc_editor_tab_request_hook_title:"Request hook",rc_editor_tab_response_hook_title:"Response hook",rc_editor_tab_request_title:"Request payload",rc_editor_tab_response_headers_title:"Response headers",rc_editor_tab_request_headers_title:"Request headers",rc_editor_tab_response_footnote:"Write here your response mock.",rc_editor_tab_response_footnote_patch:"Write here your response mock. Leave empty to forward original HTTP response.",rc_editor_tab_request_footnote:({isExactMatchingEnabled:e})=>`Ensure payload matches <b>${e?"exactly":"partially"}</b> the request payload.`,rc_editor_tab_request_footnote_patch:({isExactMatchingEnabled:e})=>`Ensure <i>"Filter by"</i> matches <b>${e?"exactly":"partially"}</b> the request payload. In <i>"Replace by"</i> optionally specify payload to send in request.`,rc_request_hook_footnote:"Here you can modify outgoing data of your request (e.g. request body or URL) with custom JavaScript.",rc_response_hook_footnote:"Here you can complement or generate from scratch your response payload with custom JavaScript.",rc_response_hook_footnote_patch:"Here you can modify the original response with custom JavaScript.",rc_subheading_filter_by:"Filter by",rc_subheading_replace_by:"Replace by",rc_headers_col_key:"Key",rc_headers_col_value:"Value",editable_table_add_title:"Add new header",editable_table_delete_all_title:"Delete all",rc_response_headers_footer:"Configure the <b>response headers</b> in this table.",rc_request_headers_footer:"Configure the <b>request headers</b> in this table.",rc_failed_to_parse_user_provided_payload:({url:e},t)=>`The request to "${t.ellipsis(e,50)}" was intercepted, but we detected a malformed payload. If it was intended, please ignore this warning.`,rc_forbidden_header_name:"This is a forbidden header name. A forbidden header name is the name of any HTTP header that cannot be modified programmatically.",rc_editor_format_code:"Format",rc_editor_copy_to_clipboard_title:"Copy content to the clipboard",rc_editor_disable_exact_matching:"Disable request payload exact matching",rc_editor_enable_exact_matching:"Enable request payload exact matching",rc_copy_to_clipboard_success:"Copied to clipboard",rc_copy_to_clipboard_error:"Copy to clipboard failed",rc_hint_cta:"Discover more",xhr_interceptor_failed_to_send:({url:e})=>`Something went wrong with a XMLHttpRequest to the url: ${e||"n/a"}.`,request_rating_modal_title:()=>"Enjoying tweak?",request_rating_modal_message:({browser:e})=>`Share some ❤️ with the team by adding a review in the ${e} Store`,request_rating_modal_cta:()=>"Write a review",request_rating_modal_dismiss:()=>"Skip",setting_toggle_dark_mode:({on:e})=>"Lights "+(e?"on":"off"),extension_updated_message:({version:e})=>`Extension updated to new version ${e}!`,see_changelog_button:"See changelog",settings_title:"Settings",enable_experiments:"Experiments",enable_experiments_description:"Here you manage experimental features. These are not stable yet, and might have side-effects in the website once enabled. <b>For consistent behavior please ensure:</b><ul><li>You close and reopen the browser tab where tweak was running</li><li>You reload the extension (<i>closing and reopening the popup should suffice for most cases</i>)</li></ul>",breakpoint_toast_message:({url:e,method:t},o)=>`👋 tweak extension is stopping here to debug ${t?t.toUpperCase():""} ${o.ellipsis(e,50)}. Press "Step Out" to continue`,response_hook_exec_failure:({name:e,errorDetail:t},o)=>`Error while executing a response hook${e?` ${o.ellipsis(e,50)}`:""}${t?`: "${t}"`:""}`,request_hook_exec_failure:({name:e,errorDetail:t},o)=>`Error while executing a request hook${e?` ${o.ellipsis(e,50)}`:""}${t?`: "${t}"`:""}`,plan_activation_successful:"Your plan has been upgraded successfully!",plan_activation_error:"It seems something went wrong while activating you plan. Please reach out to support@tweak-extension.com",sign_out_modal_title:"Are you sure you want to sign out?",sign_out_modal_message_1:"You might loose some rules that use exclusive features of this plan. To save a copy of your rules",click_here_cta:"click here",plan_premium:"Premium",plan_trial_ends_in_x_days:({n:e})=>0===e?"Your trial ends today":`Your free trial ends in ${e} days`,plan_downgrade_title:"Howdy! You are being signed out",plan_downgrade_message:"You can keep a security copy of your rules so you can upload them later once you sign in again, to do so please",plan_downgrade_message_1:"Why is this happening? Your session might have expired or your plan downgraded. If you are not able to sign in again, please contact support@tweak-extension.com",monaco_lodash_detail_merge:"_.merge(target, source) - merges source object into target object | lodash",monaco_lodash_detail_isequal:"_.isEqual(value, other) - deep compares the two values | lodash",monaco_lodash_detail_pick:"_.pick(object, [paths]) - creates an object with picked object properties | lodash",monaco_context_detail_response:"response data for the intercepted request",monaco_context_detail_url:"URL of intercepted request",monaco_context_detail_method:"HTTP method of intercepted request",monaco_context_detail_body:"body of intercepted request",monaco_context_detail_vars:"user defined tweak variables",monaco_context_detail_chance:"chance.js instance to generate random data",collection_tooltip_active:({count:e,active:t})=>t?`${t} of ${e} rules active`:`${e} rules`,collections_title:"Collections",collections_global_import:"Import all",collections_global_export:"Export all",collections_global_open:"Open all",collections_global_close:"Close all",collections_global_delete:"Delete all",collections_single_open:"Open",collections_single_rename:"Rename",collections_single_export:"Export",collections_single_delete:"Delete",collections_single_rules_enable_all:"Enable all rules",collections_single_rules_disable_all:"Disable all rules",collection_moved_success:({name:e})=>`Rule moved to collection "${e??"n/a"}"`,collection_move_modal_title:"Where to?",collections_new_name:({n:e})=>e?`New collection (${e})`:"New collection",collections_tab_close_others:"Close all others",aes_new_site_matching_active_tab:"We've enabled the extension because your current web page matches a site on your list.",aes_deleted_site_matching_active_tab:"We've disabled the extension because your current web page matches a site removed from your list.",aes_description:"Specify sites where tweak runs the extension automatically by default.",aes_input_field_label:"🌐 Web site",aes_empty_state_message:"No sites to display. Add your first auto-enabled site above. Want to learn more?"};const Ae={ellipsis:function(e,t){return e&&e.length?e.length>t?`${e.slice(0,t)}...`:e:"..."},time:function(e){if(!e)return"";try{const t=new Date(e),o=t.toDateString(),n=new Date,r=o===n.toDateString()?function(e){const t=e.getMinutes(),o=`${t>9?"":"0"}${t}`,n=e.getSeconds(),r=`${n>9?"":"0"}${n}`;return`${e.getHours()}:${o}:${r}.${e.getMilliseconds()}`}(t):t.toLocaleString();return"Invalid Date"!==r?r:""}catch(e){return""}}};function ve(e,t={}){if(ye[e])try{const o=ye[e];if("string"==typeof o)return o;if("function"==typeof o)return o(t,Ae)}catch(e){0}else 0;return""}function Oe(e,t,o){return"array"===o?Object.prototype.hasOwnProperty.call(e,t)&&Object.prototype.hasOwnProperty.call(e[t],"length"):Object.prototype.hasOwnProperty.call(e,t)&&typeof e[t]===o}function we(e){return t=>!Object.prototype.hasOwnProperty.call(t,e)||Oe(t,e,"boolean")}function Se(e){return t=>!Object.prototype.hasOwnProperty.call(t,e)||Oe(t,e,"string")}Se("outgoingRequestPayload"),we("isBreakpointEnabled"),we("isLogpointEnabled"),Se("responseHook"),Se("requestHook"),Se("collectionId");Ne("id"),Ne("name");function Ne(e){return t=>!Object.prototype.hasOwnProperty.call(t,e)||Oe(t,e,"string")}function Ce(e,{min:t=50,max:o=1200}={min:50,max:1200}){const n=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}(t,o);return new Promise((t=>{setTimeout((()=>{try{t(e())}catch(e){0,t(null)}}),n)}))}const Pe=new $.TweakApiHttpClient({apiClientSecret:"PJ8I1GRLBARNGIJ7AN80WMTPMNIZ43E4H",logPrefix:"TWEAK :: ",baseUrl:"https://tweakcloudplatform.com"});var xe=o(6961);const Ie=new Set;function Re(e){const t=function(e){switch(e.method){case"POST":case"PUT":case"PATCH":{let t="";try{t=e.requestPayload.slice(0,200)}catch(e){t=""}return`${e.requestURL};${e.method};${t}`}default:return`${e.requestURL};${e.method}`}}(e);var o;Ie.has(t)||(Ie.add(t),(o=e.responsePayload,new Promise(((e,t)=>{try{e(xe.compressToEncodedURIComponent(o))}catch(e){t(e)}}))).catch((e=>{Ie.delete(t)})).then((async o=>{const n={...e,id:t,responsePayload:o};try{let e=await Ee(he)??[];e.length>1e3&&(e=e.slice(1));me([...e,n],he)}catch(e){0}})).catch((e=>{Ie.delete(t)})))}function Le(){try{Ie.clear(),function(e=pe){new Promise((function(t,o){try{chrome.storage.local.remove([e],(function(){t(!0)}))}catch(e){o(!1)}}))}(he)}catch(e){0}}const ke=!1,De=!1,Ue=!1;function Me(e){e&&e.type&&e.text&&Ee().catch((e=>{ke})).then((t=>{try{const{messagesQueue:o}=t;if(!!!o.find((t=>t.text===e.text))){return me({...t,messagesQueue:[...o,e]}).catch((e=>{ke}))}}catch(e){0}})).catch((e=>{de(e,"background",ge)}))}function He(){try{Le()}catch(e){de(e,"background",ge)}}function Ge(){Me({type:"ERROR",text:ve("plan_activation_error")}),_({text:"*"}),ge({hitType:ne.TYPE_EVENT,eventCategory:ne.CATEGORY_GLOBAL,eventAction:ne.ACTION_UNK,eventLabel:re.SUBSCRIPTION_ACTIVATION_FAILED})}let $e={__TWEAK_BOOTSTRAP_FINISHED__:async function(){try{const e=await S();try{const t=await Ee();if(!t)return;const{requestAutocompleteTabId:o}=t;let n=o===e?"ON":"OFF";Ue,c("TOGGLE_TWEAK_BACKGROUND_REQUEST_STASHING",[n,"system"])}catch(e){de(e,"background",ge)}}catch(e){de(e,"background",ge)}},INCREMENT_REQUEST_COUNT:function(e,t=1,o){const{id:n,appliedTemplating:r}=e;return Ce((()=>Ee().then((e=>{if(!e)return;const{configurations:a,numberOfInterceptions:i}=e,s=a[n];if(!s)return void 0;const c=s.requestCount+t,l={...a,[n]:{...s,requestCount:c,lastInterceptionTimestamp:o}},u=i>999999999999?0:i+t;ge({hitType:ne.TYPE_EVENT,eventCategory:ne.CATEGORY_RC,eventAction:ne.ACTION_AUTO,eventLabel:re.REQUEST_INTERCEPTED_EXTENSION_CLOSED});try{ce(s,ge),le(s,ge),ue(s,ge),s&&s.plan===oe.PLANS.premium&&_e(s,r,ge),s&&s.plan===oe.PLANS.premium&&s.responseHookFn!==oe.DEFAULT_RESPONSE_HOOK_FUNCTION&&ge({hitType:ne.TYPE_EVENT,eventCategory:ne.CATEGORY_RC,eventAction:ne.ACTION_AUTO,eventLabel:re.REQUEST_INTERCEPTED_RESPONSE_HOOK_DETECTED}),s&&s.plan===oe.PLANS.premium&&s.interceptionPolicy===oe.INTERCEPTION_POLICIES.PATCH.KEY&&ge({hitType:ne.TYPE_EVENT,eventCategory:ne.CATEGORY_RC,eventAction:ne.ACTION_AUTO,eventLabel:re.REQUEST_INTERCEPTED_POLICY_MODIFY})}catch(e){}return me({...e,configurations:l,numberOfInterceptions:u}).then((e=>{if(!e)return;const t=function(e=[]){if(!e)return"";const t=Object.values(e).reduce(((e,t)=>e+t.requestCount),0);return 0===t?"":t>99?"99+":`${t}`}(l);_({text:t})}))}))))},TWEAK_GENERIC_MESSAGE:Me,TPA:async function(e,t,o,n){if(!navigator.onLine)return;let r,a,i,s,l,u;try{r=atob(t),a=atob(n),new Date(Number(atob(o)))}catch(e){return void de(e,"bad activation attempt",ge)}if(r&&a&&oe.ALL_PAID_PLANS.includes(a)){try{const t=Ue?{"x-application-tpi":"active"}:{};De;const o=await(0,$.withResilience)((()=>Pe.postCheckPlan({plan:a,token:e,sid:r},{headers:t})),{retries:3});if(!o?.data?.nextPaymentDate||!oe.ALL_VALID_PLAN_STATUS.includes(o?.data?.status))return;i=o.data.nextPaymentDate,s=o.data.status,l=o.data?.updateSubscriptionUrl||null,u=o.data?.cancelSubscriptionUrl||null}catch(e){return de(e,"background activation",ge),void Ge()}try{const t=await Ee(),o={token:e,sid:r,lastUpdatedTimestamp:Date.now(),nextPaymentDate:i,planStatus:s,updateSubUrl:l,cancelSubUrl:u};await me({...t,plan:a,user:o}),c($.BZC.ACTIVATION_PONG_EVENT,[!0]),Me({type:"PARTY",text:ve("plan_activation_successful")}),_({text:"*"}),ge({hitType:ne.TYPE_EVENT,eventCategory:ne.CATEGORY_GLOBAL,eventAction:ne.ACTION_UNK,eventLabel:re.SUBSCRIPTION_ACTIVATION_SUCCESS})}catch(e){de(e,"background activation",ge),Ge()}}},PLAN_CHECK:async function(e){if(navigator.onLine)try{const{plan:t,token:o,sid:n}=e,r=Ue?{"x-application-tpi":"active"}:{};De;const a=(0,$.withResilience)((()=>Pe.postCheckPlan({plan:t,token:o,sid:n},{headers:r})),{retries:3}),i=Ee(),[s,c]=await Promise.all([a,i]),l=s?.data?.nextPaymentDate,_=s?.data?.status||c?.user?.planStatus,u=s?.data?.updateSubscriptionUrl||c?.user?.updateSubUrl,d=s?.data?.cancelSubscriptionUrl||c?.user?.cancelSubUrl;let p=null;oe.ALL_VALID_PLAN_STATUS.includes(_)||(p=oe.PLAN_DOWNGRADED,ge({hitType:ne.TYPE_EVENT,eventCategory:ne.CATEGORY_GLOBAL,eventAction:ne.ACTION_UNK,eventLabel:re.BACKGROUND_PLAN_DOWNGRADE}));const h={...c.user,lastUpdatedTimestamp:Date.now(),nextPaymentDate:l,planStatus:_,updateSubUrl:u,cancelSubUrl:d,planDowngraded:p};await me({...c,user:h})}catch(e){return void de(e,"background plan check",ge)}},STASH_REQUESTS:async function(e){if(e&&e.length)try{for(const t of e)Re(t)}catch(e){de(e,"background",ge)}},CLEAR_ALL_DATA:He,TOGGLE_TWEAK_BACKGROUND_REQUEST_STASHING:He};try{i((async function(e,t,o){if(!e.data||!e.data.type||!e.data.payload)return;const{type:n,payload:r}=e.data;if($e[n]){$e[n](...r);try{o({response:"ok"})}catch(e){}return!0}}))}catch(e){ke}function Fe(e){if(!e||!e.tabId)return;const{tabId:t}=e;return t?Ee().then((async e=>{if(!e)return;const{activeTabId:o,isExtensionActive:n,wasExtensionActiveBeforeLeaveTab:r,autoEnabledSites:a,plan:i}=e;let s=n,_=!1;if(t&&i===oe.PLANS.premium)try{const e=(await w(t))?.url;if(e)for(const t of a)if(e.includes(t)){s=!0,_=!0;try{l({path:oe.STOP_ICON})}catch(e){de(e,"background",ge)}break}}catch(e){ke}if(!_)if(o===t){const e=r?oe.STOP_ICON:oe.START_ICON;s=r;try{l({path:e})}catch(e){de(e,"background",ge)}}else{s=!1;try{l({path:oe.START_ICON})}catch(e){de(e,"background",ge)}}me({...e,isExtensionActive:s}).catch((e=>{ke})).then((()=>{try{s&&_&&c("START_ALL_INTERCEPTIONS",[])}catch(e){ke}}))})).catch((e=>{de(e,"background",ge)})):void 0}d(Fe),p((e=>{Fe({tabId:e})}));{try{m((function(e){Ee().then((t=>{if(!t)return;let{isExtensionActive:o,wasExtensionActiveBeforeLeaveTab:n,activeTabId:r,requestAutocompleteTabId:a}=t;r===e&&(o=!1,n=!1,r=-1),a===e&&(a=null),me({...t,isExtensionActive:o,wasExtensionActiveBeforeLeaveTab:n,activeTabId:r,requestAutocompleteTabId:a}).catch((()=>{}))}))}))}catch(e){ke}const e="https://tweak-extension.com/uninstalltschussy07vv9cd6c4",t="https://tweak-extension.com/docs/intro";try{y(e)}catch(e){ke}try{v((e=>{const o=e&&e.reason,n=e&&e.previousVersion;let r=()=>{};switch(o){case"update":if(n&&"8.3.0"!==n){try{Me({type:"PARTY",text:ve("extension_updated_message",{version:"8.3.0"})})}catch(e){de(e,"background",ge)}r=re.EXTERNAL_TWEAK_UPDATE}break;case"install":try{g({url:t})}catch(e){de(e,"background",ge)}r=re.EXTERNAL_TWEAK_INSTALL}n&&"8.3.0"===n?ge({hitType:ne.TYPE_EVENT,eventCategory:ne.CATEGORY_EXTERNAL,eventAction:ne.ACTION_CHROME_EXT,eventLabel:re.EXTERNAL_TWEAK_REFRESH("8.3.0")}):r&&"function"==typeof r&&ge({hitType:ne.TYPE_EVENT,eventCategory:ne.CATEGORY_EXTERNAL,eventAction:ne.ACTION_CHROME_EXT,eventLabel:r("8.3.0")})}))}catch(e){ke}}try{O((async e=>{if("toggle-tweak-enabled-state"===e)return async function(){try{const e=await Ee(),{isExtensionActive:t}=e,o=!t,[n,r]=o?["START_ALL_INTERCEPTIONS",oe.STOP_ICON]:["STOP_ALL_INTERCEPTIONS",oe.START_ICON];let a=-1;if(o)try{a=await S()}catch(e){de(e,"background",ge),a=-1}return me({...e,wasExtensionActiveBeforeLeaveTab:o,isExtensionActive:o,activeTabId:a}).then((()=>{l({path:r}),c(n,[]);const e=`${re.RUN_STOP_BUTTON_CLICKED(t)} (shortcut)`;ge({hitType:ne.TYPE_EVENT,eventCategory:ne.CATEGORY_GLOBAL,eventAction:ne.ACTION_CLICK,eventLabel:e})})).catch((e=>{de(e,"background",ge)}))}catch(e){de(e,"background",ge)}}()}))}catch(e){de(e,"background",ge)}})()})();