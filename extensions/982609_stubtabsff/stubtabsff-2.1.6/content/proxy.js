// Copyright (c) Zanger LLC. All rights reserved.

(function(){var injected=false;browser.runtime.onMessage.addListener(function(message,sender,reply){if(message.type=="SetProxyPrompt"){if(!injected){injectModal(message.current,message.min,message.max);}
var modal=document.getElementById("stubTabsSetProxyModal");var input=document.getElementById("stubTabsSetProxyNumber");modal.style.display="block";input.focus();input.select();}});function injectModal(current,min,max){var node=document.createElement("div");node.classList.add("stubtabs-duplicate");var t='<div class="stubtabs-duplicate-modal" id="stubTabsSetProxyModal">';t+='<div class="stubtabs-duplicate-modal-content">';t+='<span class="stubtabs-duplicate-close" id="stubTabsSetProxyClose">&times;</span>';t+='<br>';t+='<img src="https://www.stubtabs.com/wp-content/uploads/2017/09/st_yellow.ico" style="float:left;height:32px;width:32px">';t+='<span style="font-weight:700;font-size:20px;line-height:32px">';t+='&nbsp;&nbsp;Set Tab Proxy';t+='</span>';t+='<br><br>';t+='Proxy number to assign to this tab:';t+='<input class="stubtabs-duplicate-number" type="number" id="stubTabsSetProxyNumber" value="'+current+'" min="'+min+'" max="'+max+'">';t+='<br><br>';t+='(Ctrl+Shift+F)<input class="stubtabs-duplicate-button" type="button" value="Set Proxy" id="stubTabsSetProxyOk">';t+='<br><br>';t+='</div>';t+='</div>';node.innerHTML=t;document.body.appendChild(node);var modal=document.getElementById("stubTabsSetProxyModal");var span=document.getElementById("stubTabsSetProxyClose");var input=document.getElementById("stubTabsSetProxyNumber");input.addEventListener("keyup",function(event){event.preventDefault();if(event.keyCode===13){document.getElementById("stubTabsSetProxyOk").click();}});span.onclick=function(){modal.style.display="none";};modal.onclick=function(event){if(event.target==modal){modal.style.display="none";}};var button=document.getElementById("stubTabsSetProxyOk");button.addEventListener("click",function(event){var num=document.getElementById("stubTabsSetProxyNumber").value;browser.runtime.sendMessage({'type':"SetProxy",'proxy':num});modal.style.display="none";});injected=true;}})();