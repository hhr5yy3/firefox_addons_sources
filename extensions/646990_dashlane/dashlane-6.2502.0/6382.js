(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[6382],{78892:(e,t,n)=>{"use strict";n.d(t,{p:()=>B});var i=n(96832),o=n(95727),a=n(32519),l=n(48062),s=n(51031),r=n(45272),c=n(18108),d=n(81701),_=n(80936),u=n(68593);const p=(0,i.createContext)({}),h=(0,i.createContext)({}),m=({children:e,vaultItem:t,isAddCollectionDisabled:n,signalEditedValues:a,setHasOpenedDialogs:m,setCollectionsToUpdate:f})=>{const{vaultItemId:b,spaceId:I}=t,g=(0,c.E)(),[C,S]=(0,i.useState)(""),[T,E]=(0,i.useState)(!1),{allCollections:O}=(0,o.bA)(),x=(0,_.I)(),N=x.status===s.rq.Success&&x.isDisabled,[y,v]=(0,i.useState)((()=>""===b?[]:O.flatMap((e=>e.vaultItems.some((e=>e.id===b))?{...e,initiallyExisting:!0,hasBeenDeleted:!1}:[])))),w=(e=>""!==e&&(g.status===s.rq.Success&&g.data.length>0?g?.data:[]).some((t=>t.teamId===e)))(I)?I:"",Z=(0,i.useMemo)((()=>y.filter((e=>!e.hasBeenDeleted))),[y]),D=(0,i.useMemo)((()=>O.filter((e=>!Z.some((t=>t.id===e.id))))),[O,Z]),R=e=>{const t=e(y);f?.(t),v(t)},A={setInput:S,setIsInputVisible:E,onSubmit:(e=C,t)=>{if((e=e.trim()).length<=0)return;const n=y.findIndex((t=>t.name===e&&(N||w===t.spaceId)));if(-1===n)R((n=>{var i;const o=[...n],a=O.find((t=>t.name===e&&(N||t.spaceId===w)));return o.push({id:null!=(i=a?.id)?i:"",name:e,spaceId:w,isShared:a?.isShared,vaultItems:[],initiallyExisting:!1,hasBeenDeleted:!1,itemPermission:t}),(0,d.p)(o)}));else{const e=y[n];e.initiallyExisting&&e.hasBeenDeleted&&R((e=>{const t=[...e];return t[n].hasBeenDeleted=!1,t}))}a?.(!0),S("")},onDelete:e=>{const t=y.findIndex((t=>t.name===e));if(-1===t)return;const n=y[t];R((e=>{const i=[...e];return n.initiallyExisting?i[t].hasBeenDeleted=!0:i.splice(t,1),i})),(0,r.Nc)(l.PageView.CollectionDelete),a?.(!0)},clearVaultItemCollections:()=>R((e=>e.flatMap((e=>e.initiallyExisting?{...e,hasBeenDeleted:!0}:[]))))};return(0,u.tZ)(p.Provider,{value:{input:C,itemSpaceId:w,isInputVisible:T,filteredCollections:D,vaultItemCollections:y,vaultItemCollectionsToDisplay:Z,setHasOpenedDialogs:m,vaultItem:t,isAddCollectionDisabled:n},children:(0,u.tZ)(h.Provider,{value:A,children:e})})},f=()=>(0,i.useContext)(p),b=()=>(0,i.useContext)(h);var I,g=n(61468),C=n(65455),S=n(13252),T=n(88203),E=n(67678),O=n(33918),x=n(71951),N=n(30894),y=n(68819),v=n(24507);const w=({id:e,hasCollections:t,setHasOpenedDialogs:n,isDisabled:o=!1,isItemMPProtected:l})=>{var s;const{openProtectedItemsUnlocker:r}=(0,N.tY)(),{translate:c}=(0,T.Z)(),d=(0,i.useRef)(null),{isInputVisible:_,itemSpaceId:p,filteredCollections:h,input:m,vaultItem:w}=f(),{vaultItemTitle:Z,vaultItemId:D}=w,R=(0,v.k)(C.X,"getPermissionForItem",{itemId:D}),A=R.data?.capabilities.canShare,{openDialog:P,closeDialog:L}=(0,E.R)(),{setInput:k,setIsInputVisible:B,onSubmit:U}=b(),M=(e,t)=>{U(t,e),L(),n?.(!1),d.current?.focus()},F=()=>{L(),n?.(!1)};return _?(0,u.tZ)(a.x5,{collections:h,id:e,input:m,inputRef:d,spaceId:p,selectionAsDropdown:!0,onSubmit:t=>{const i=h.find((e=>e.name===t&&e.spaceId===p)),o=()=>{i?.isShared&&!A?(P(s||(s=(0,u.tZ)(x.Q,{onClose:F}))),n?.(!0)):i?.isShared?(P((0,u.tZ)(O.B,{onSubmit:M,onClose:F,itemTitle:Z,collectionName:i.name})),n?.(!0)):M(S.y3.Admin,t)};if(l)return r({action:y.P.Copy,itemType:y.R.Password,showNeverAskOption:!0,credentialId:e,successCallback:o});o()},setInput:k,onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||window.setTimeout((()=>{B(!1)}),100)}}):(0,u.tZ)(g.zx,{onClick:()=>B(!0),layout:"iconLeading",intensity:"supershy",disabled:o,mood:"neutral",icon:I||(I=(0,u.tZ)(g.JO,{name:"ActionAddOutlined"})),children:c(t?"webapp_collections_input_placeholder_add_another":"webapp_collections_input_placeholder_add_new")})},Z=e=>(0,u.tZ)("div",{sx:{flex:"1",display:"flex",flexDirection:"column"},...e});var D,R=n(51728);const A=({hasMultipleCollections:e,...t})=>{const{vaultItem:n}=f(),i=(0,R.b)(n.spaceId),{translate:o}=(0,T.Z)();return(0,u.tZ)("label",{sx:{display:"flex",width:"149px",justifyContent:"flex-end",fontWeight:"600",textAlign:"right"},...t,children:(0,u.BX)("span",{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[i&&(0,u.BX)(u.HY,{children:[`${i}`,D||(D=(0,u.tZ)("br",{}))]}),o(e?"webapp_credentials_header_row_category":"webapp_credential_edition_field_category")]})})},P=e=>(0,u.tZ)("div",{sx:{display:"flex",flexDirection:"row"},...e}),L="collectionsFieldId",k=(0,i.forwardRef)((({hasLabel:e=!0,isItemMPProtected:t},n)=>{const{vaultItemCollections:o,vaultItemCollectionsToDisplay:l,isAddCollectionDisabled:s,setHasOpenedDialogs:r}=f(),{onDelete:c,clearVaultItemCollections:d}=b(),_=l?.length>0;return(0,i.useImperativeHandle)(n,(()=>({getVaultItemCollections:()=>o,clearVaultItemCollections:d}))),(0,u.BX)(P,{sx:{gap:"24px",alignItems:!_&&"center"},children:[e?(0,u.tZ)(A,{hasMultipleCollections:l?.length>1,htmlFor:L,sx:{marginTop:_&&"15px"}}):null,(0,u.BX)(Z,{sx:{..._&&{gap:"8px",marginTop:"10px"}},children:[(0,u.tZ)(a.zT,{sx:{marginLeft:"16px"},collectionListItems:l.map((e=>(0,u.tZ)(a.cF,{children:(0,u.tZ)(a.KH,{onDismiss:()=>c(e.name),isShared:e.isShared,children:e.name})},`collections_field_li_${e.name}`)))}),(0,u.tZ)(w,{id:L,hasCollections:_,setHasOpenedDialogs:r,isDisabled:s,isItemMPProtected:t})]})]})})),B=(0,i.forwardRef)((({vaultItem:e,isAddCollectionDisabled:t,signalEditedValues:n,setHasOpenedDialogs:i,hasLabel:a,isItemMPProtected:l,setCollectionsToUpdate:s},r)=>{const{isCollectionsLoading:c}=(0,o.bA)();return c?null:(0,u.tZ)(m,{vaultItem:e,signalEditedValues:n,setHasOpenedDialogs:i,isAddCollectionDisabled:t,setCollectionsToUpdate:s,children:(0,u.tZ)(k,{ref:r,hasLabel:a,isItemMPProtected:l})})}))},20684:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var i=n(5465);const o=async e=>await i.C.clearSecureFileState(null!=e?e:"")},86541:(e,t,n)=>{"use strict";n.d(t,{SecureNoteTabs:()=>i});let i=function(e){return e[e.CONTENT=0]="CONTENT",e[e.DOCUMENT_STORAGE=1]="DOCUMENT_STORAGE",e[e.MORE_OPTIONS=2]="MORE_OPTIONS",e[e.SHARED_ACCESS=3]="SHARED_ACCESS",e}({})},30743:(e,t,n)=>{"use strict";n.d(t,{h:()=>Z});var i=n(96832),o=n(83849),a=n.n(o),l=n(65580);var s,r,c=n(15567),d=n.n(c),_=n(2730),u=n.n(_),p=n(68593);const h=312,m="info";class f extends i.Component{constructor(e){super(e),this.showTooltip=()=>{this.setState({isTooltipVisible:!0})},this.hideTooltip=()=>{this.setState({isTooltipVisible:!1})},this.renderIcon=()=>{const{type:e=m}=this.props;switch(e){case"info":return s||(s=(0,p.tZ)(u(),{}));case"question":return r||(r=(0,p.tZ)(d(),{}));default:(0,l.U)(e)}return null},this.state={isTooltipVisible:!1}}render(){const{iconClassNames:e=[],maxWidth:t=h,children:n}=this.props,i=this.renderIcon();return(0,p.BX)("div",{className:"container--nIJjYvifKn",onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip,children:[(0,p.tZ)("div",{className:a()("iconContainer--Qd32ya5v0T",...e),children:i}),(0,p.BX)("div",{className:a()("tooltipContainer--Yos9HnS8si",{"tooltipDisplayed--ibyWhutbpT":this.state.isTooltipVisible}),style:{maxWidth:`${t}px`},children:[n,(0,p.tZ)("div",{className:"triangle--n9NwQgxSAc"})]})]})}}var b=n(86541),I=n(68819),g=n(30894),C=n(63520),S=n(73630),T=n(88203);const E=({title:e,disabled:t=!1,onChange:n})=>{const{translate:i}=(0,T.Z)(),o=i("webapp_secure_notes_addition_field_placeholder_no_title");return(0,p.tZ)(S.Z,{sx:{display:"block",width:"100%"},tooltipText:e||o,children:(0,p.tZ)("input",{sx:{color:"ds.text.neutral.catchy",backgroundColor:"transparent",border:"none",fontSize:"24px",lineHeight:"30px",fontWeight:"600",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",width:"100%",fontFamily:"'GT Walsheim Pro', 'Helvetica', 'Arial', 'sans-serif'","&:focus":{outline:"none",border:"none"}},placeholder:o,value:e||"",disabled:t,onChange:n})})};var O=n(3045),x=n(18504);const{CONTENT:N,DOCUMENT_STORAGE:y,MORE_OPTIONS:v,SHARED_ACCESS:w}=b.SecureNoteTabs,Z=({attachmentsCount:e,setActiveTab:t,backgroundColor:n,disabled:i,displayDocumentStorage:o,displaySharedAccess:a,displayMoreOptions:l,isSecured:s,recipientsCount:r,title:c,setTitle:d})=>{const{translate:_}=(0,T.Z)(),{areProtectedItemsUnlocked:u,openProtectedItemsUnlocker:h}=(0,O.t)(),m=[{id:"tab-note-detail",contentId:"content-note-detail",title:_("webapp_secure_notes_edition_field_tab_title_details"),onSelect:()=>t(N)}],b=()=>{!u&&s?((0,g.jF)(),h({itemType:I.R.SecureNoteSetting,successCallback:()=>t(y)})):t(y)};if(a&&m.push({id:"tab-shared-access",contentId:"content-shared-access",title:`${_("webapp_secure_notes_edition_field_tab_title_shared_access")} (${r})`,onSelect:()=>t(w)}),o){const t=(0,p.tZ)(f,{children:(0,p.tZ)("p",{children:_("webapp_secure_notes_edition_field_tab_title_attachments_tooltips")})}),n=e?` (${e})`:"";m.push({id:"tab-document-storage",contentId:"content-document-storage",title:`${_("webapp_secure_notes_edition_field_tab_title_attachments")}${n}`,onSelect:b,tabIconElement:t})}return l&&m.push({id:"tab-more-options",contentId:"content-more-options",title:_("webapp_secure_notes_edition_field_tab_title_options"),onSelect:()=>t(v)}),(0,p.tZ)(C.V9,{icon:(0,p.tZ)(x.G,{noteColor:n,size:"xlarge"}),title:(0,p.tZ)(E,{title:c,disabled:i,onChange:e=>d(e.target.value)}),tabs:m})}},32021:(e,t,n)=>{"use strict";n.d(t,{T:()=>K});var i=n(55139),o=n(77377),a=n(22061),l=n(86541),s=n(96832),r=n(61468),c=n(88203),d=n(68593);const _=({isMaxSizeReached:e,currentSize:t,maxSize:n=z})=>{const{translate:i}=(0,c.Z)(),o=e?i("webapp_secure_notes_edition_field_text_content_over_limit",{overLimit:t.toLocaleString(),maxSize:n.toLocaleString()}):`${t.toLocaleString()} /${n.toLocaleString()} ${i("webapp_secure_notes_edition_field_text_content_size")}`;return(0,d.tZ)(r.nv,{textStyle:"ds.body.helper.regular",color:e?"ds.text.danger.quiet":"ds.text.neutral.quiet",sx:{fontSize:"11px",textAlign:"left"},children:o})};var u=n(67406);const p=["BLUE","GRAY","PURPLE","PINK","RED","BROWN","GREEN","ORANGE","YELLOW"];var h=n(30894),m=n(68819),f=n(5961),b=n.n(f),I=n(77270);let g=function(e){return e.BOLD="bold",e.CODE="code",e.ITALIC="italic",e.LINK="link",e.SUBSUBTITLE="subsubtitle",e.SUBTITLE="subtitle",e.TITLE="title",e}({});const C=e=>(t,n)=>{var i;const{formatPrefix:o,cursorOffsetStart:a,cursorOffsetEnd:l}=e,s=null!=(i=e.formatSuffix)?i:"",{start:r,end:c}=n,d=t.slice(r,c),_=((e,t,n)=>{const i=!n||e.endsWith(n);return e.startsWith(t)&&i})(d,o,s),u=((e,t,n,i)=>e.start===e.end?(e.start=e.start+n,e.end=e.end+n,e):(e.end=t?e.end-n-i:e.end+n+i,e))(n,_,a,l);return _?{updatedContent:[t.slice(0,r),t.slice(r+o.length,c-s.length),t.slice(c)].join(""),updatedSelectionRange:u}:{updatedContent:[t.slice(0,r),o,d,s,t.slice(c)].join(""),updatedSelectionRange:u}},S={[g.TITLE]:{icon:(0,d.tZ)(r.JO,{name:"FormattingHeading1Outlined"}),label:"Heading",format:C({formatPrefix:"# ",cursorOffsetStart:2,cursorOffsetEnd:0})},[g.SUBTITLE]:{icon:(0,d.tZ)(r.JO,{name:"FormattingHeading2Outlined"}),label:"Subheading",format:C({formatPrefix:"## ",cursorOffsetStart:3,cursorOffsetEnd:0})},[g.SUBSUBTITLE]:{icon:(0,d.tZ)(r.JO,{name:"FormattingHeading3Outlined"}),label:"Subsubheading",format:C({formatPrefix:"### ",cursorOffsetStart:4,cursorOffsetEnd:0})},[g.BOLD]:{icon:(0,d.tZ)(r.JO,{name:"FormattingBoldOutlined"}),label:"Bold",format:C({formatPrefix:"**",formatSuffix:"**",cursorOffsetStart:2,cursorOffsetEnd:2})},[g.ITALIC]:{icon:(0,d.tZ)(r.JO,{name:"FormattingItalicOutlined"}),label:"Italic",format:C({formatPrefix:"_",formatSuffix:"_",cursorOffsetStart:1,cursorOffsetEnd:1})},[g.CODE]:{icon:(0,d.tZ)(r.JO,{name:"FormattingCodeOutlined"}),label:"Code",format:C({formatPrefix:"`",formatSuffix:"`",cursorOffsetStart:1,cursorOffsetEnd:1})},[g.LINK]:{icon:(0,d.tZ)(r.JO,{name:"LinkOutlined"}),label:"Link",format:(e,t)=>{const{start:n,end:i}=t,o=e.slice(n,i),a=((e,t,n)=>(e.start===e.end?(e.start=e.start+1,e.end=e.end+1):(e.start=e.end+3,e.end=e.end+6),e))(t);return{updatedContent:[e.slice(0,n),"[",o,"](url)",e.slice(i)].join(""),updatedSelectionRange:a}}}},T="webapp_secure_notes_content_markdown_preview",E=({fieldRef:e,content:t,isPreviewing:n,setContent:i,setIsPreviewing:o})=>{const{translate:a}=(0,c.Z)(),l=n=>()=>{var o,a;const l=S[n].format,{updatedContent:s,updatedSelectionRange:r}=l(t,{start:null!=(o=e.current?.selectionStart)?o:0,end:null!=(a=e.current?.selectionEnd)?a:0});i(s),setTimeout((()=>{e.current&&(e.current.focus(),e.current.selectionStart=r.start,e.current.selectionEnd=r.end)}),200)};return(0,d.BX)("div",{sx:{display:"flex",height:"50px",justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",marginTop:"16px",backgroundColor:"ds.background.alternate",borderRadius:"8px"},children:[(0,d.tZ)("div",{sx:{gap:"4px"},children:Object.keys(S).map((e=>(0,d.tZ)(r.zx,{mood:"neutral",intensity:"supershy",layout:"iconOnly",icon:S[e].icon,onClick:l(e),disabled:n,"aria-label":S[e].label,title:S[e].label,name:S[e].label},e)))}),t?(0,d.tZ)("div",{sx:{padding:"8px 10px"},children:(0,d.tZ)(r.zx,{"aria-label":a(T),onClick:()=>o(!n),layout:"iconTrailing",intensity:"quiet",size:"small",mood:"neutral",icon:n?"ActionHideFilled":"ActionRevealFilled",children:a(T)})}):null]})},O=e=>e.replace(/\n/gi,"&nbsp; \n");var x=n(82207),N=n(79432),y=n(33988),v=n(54350);const w=i.w.SupportMarkdownInSecureNotes,Z="webapp_secure_notes_form_content_label",D="webapp_secure_note_edition_action_show_note_content",R="webapp_secure_note_edition_action_hide_note_content",A="webapp_secure_note_edition_action_copy_note_content",P=({fieldRef:e,value:t,title:n,isSecured:i,placeholder:o,disabled:a,readonly:l,isEditing:_,setContent:u,spaceId:p})=>{const[f,g]=(0,s.useState)(!1),{translate:C}=(0,c.Z)(),S=(0,I._)(),T=(0,y.F)(),{isMPLessUser:P}=(0,v.Z)(),L=!T&&!P,{areProtectedItemsUnlocked:k,openProtectedItemsUnlocker:B}=(0,h.tY)(),{logCopiedSecureNoteContent:U,logRevealSecureNoteContent:M}=(0,N.D)(),F=Boolean(t.length),H=Boolean(p),G=Boolean(S.data?.[w]),[z,V]=(0,s.useState)(""===t),X=i&&!k,Y=(0,s.useCallback)(((e,t)=>new Promise(((n,i)=>{if(e||!X||!L)return t(),n();B({action:h.P7.Show,itemType:m.R.SecureNote,successCallback:()=>(t(),n()),cancelCallback:i})}))),[X,B]),W=()=>{i&&n&&H&&!z&&M(n),V((e=>!e))},$=()=>{Y(z,W).catch((()=>{V(!1)}))};return(0,d.tZ)("div",{sx:{display:"flex",flex:"1 1",whiteSpace:"pre-wrap",wordWrap:"break-word",cursor:"text"},children:G?(0,d.BX)("div",{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[!a&&(0,d.tZ)(E,{content:t,setContent:u,fieldRef:e,isPreviewing:f,setIsPreviewing:e=>g(e)}),f?(0,d.tZ)("div",{className:"markdown--ARo1hBXSLa",children:(0,d.tZ)(b(),{source:O(t),softBreak:"br"})}):(0,d.tZ)(r.Kx,{label:C(Z),ref:e,name:n,className:"textarea--Ix1kh7fRYF",sx:{width:"100%",padding:"10px 0px"},placeholder:o,value:!z&&F&&i?"••••••••":t,disabled:a,readOnly:!z&&F&&i||l,onChange:e=>{u(e.target.value)},actions:[...i?[(0,d.tZ)(r.zx,{layout:"iconOnly",icon:z?"ActionHideOutlined":"ActionRevealOutlined",mood:"brand",intensity:"supershy",sx:{marginRight:"16px"},onClick:$,"aria-label":C(z?R:D),tooltip:C(z?R:D)},"secure-note-content-visibility")]:[],...F?[(0,d.tZ)(x.m,{data:t,checkProtected:()=>X,copyLabel:C(A),itemType:m.R.SecureNote,tooltipLocation:"right"},"copy-secure-note-content")]:[]]})]}):(0,d.tZ)(r.Kx,{label:C(Z),ref:e,name:n,sx:{width:"100%",padding:"10px 0px"},placeholder:o,readOnly:!z&&F&&i||l,onChange:e=>u(e.target.value),value:!z&&F&&i?"••••••••":t,actions:[...i?[(0,d.tZ)(r.zx,{layout:"iconOnly",icon:z?"ActionHideOutlined":"ActionRevealOutlined",mood:"brand",intensity:"supershy",sx:{marginRight:"16px"},onClick:$,"aria-label":C(z?R:D),tooltip:C(z?R:D)},"secure-note-content-visibility")]:[],...F?[(0,d.tZ)(x.m,{data:t,checkProtected:()=>X,copyLabel:C(A),itemType:m.R.SecureNote,tooltipLocation:"right",onCopy:()=>{_&&n&&H&&U(n)}},"copy-secure-note-content")]:[]]})})},L=({title:e,content:t,isSecured:n,setContent:i,canEdit:o,readonly:a,isEditing:l,spaceId:r})=>{const{translate:_}=(0,c.Z)(),u=(0,s.useRef)(null);return(0,d.tZ)(P,{title:e,fieldRef:u,placeholder:_(a?"webapp_secure_notes_edition_disabled_label":"webapp_secure_notes_addition_field_placeholder_no_content"),isSecured:n,value:t,readonly:a||!o,setContent:i,isEditing:l,spaceId:r})};var k=n(78892),B=n(68037),U=n(74434);var M=n(77063);const F={NO_CATEGORY:"webapp_secure_notes_addition_no_category",PERSONAL_SPACE:"webapp_form_field_personal_space",INFO_BOX_ATTACHMENTS:"webapp_secure_notes_infobox_has_attachments",INFO_BOX_SHARED:"webapp_secure_notes_infobox_shared",SECURITY_LABEL:"webapp_secure_notes_addition_field_tab_option_security_label",CONTENT_NOTE_DETAILS:"webapp_secure_notes_form_content_note_details",CONTENT_NOTE_DETAILS_TITLE:"webapp_secure_notes_form_content_note_details_title",CONTENT_ITEM_ORGANIZATION:"webapp_secure_notes_form_content_item_organization",CONTENT_ITEM_ORGANIZATION_FORCED_CATEGORIZATION:"webapp_credential_edition_field_force_categorized",CONTENT_ITEM_ORGANIZATION_COLOR:"webapp_secure_notes_form_content_item_organization_color",CONTENT_PREFERENCES:"webapp_secure_notes_form_content_preferences",SECURITY_TITLE:"webapp_secure_notes_addition_field_tab_option_security_title",SECURITY_DESCRIPTION:"webapp_secure_notes_addition_field_tab_option_security_description",CHANGE_SECURED_SETTING_ON:"webapp_secure_notes_edition_unlocker_on_success",CHANGE_SECURED_SETTING_OFF:"webapp_secure_notes_edition_unlocker_off_success",COLORS:{BLUE:"webapp_secure_notes_addition_field_type_option_blue",BROWN:"webapp_secure_notes_addition_field_type_option_brown",GRAY:"webapp_secure_notes_addition_field_type_option_gray",GREEN:"webapp_secure_notes_addition_field_type_option_green",ORANGE:"webapp_secure_notes_addition_field_type_option_orange",PINK:"webapp_secure_notes_addition_field_type_option_pink",PURPLE:"webapp_secure_notes_addition_field_type_option_purple",RED:"webapp_secure_notes_addition_field_type_option_red",YELLOW:"webapp_secure_notes_addition_field_type_option_yellow"}},H={title:"webapp_secure_notes_edition_unlocker_title_on",subtitle:"webapp_secure_notes_edition_unlocker_description_on"},G={title:"webapp_secure_notes_edition_unlocker_title_off",subtitle:"webapp_secure_notes_edition_unlocker_description_off"},z=1e4,V=({title:e,color:t,spaceId:n,content:i,isSecured:o,isNewItem:a,isShared:l,canEdit:f,isDisabled:b,isDisableSecureNotesFFActive:I,hasAttachment:g,data:C,onModifyData:S,onCollectionsToUpdate:T,onSpaceIdChange:E,onTitleChange:O,onContentChange:x,onColorChange:N,onIsSubmitDisabled:w,onIsSecuredChange:Z,setHasDialogsOpenedByChildren:D})=>{const[R,A]=(0,s.useState)(!1),{translate:P}=(0,c.Z)(),{showToast:V}=(0,r.pm)(),X=(0,y.F)(),{isMPLessUser:Y}=(0,v.Z)(),W=(0,s.useRef)(null),{areProtectedItemsUnlocked:$,openProtectedItemsUnlocker:J}=(0,h.tY)(),K=W.current?.getVaultItemCollections(),{shouldShowFrozenStateDialog:j}=(0,M.Ub)(),q=!X&&!Y,Q=!!C.id,ee=(te=p.reduce(((e,t)=>(e[t]=P(F.COLORS[t]),e)),{}),ne=p,oe=t,ie=(0,d.tZ)("span",{className:"icon--eBGJiUqyZ5",style:{backgroundColor:(0,U.N)(oe)}}),ne.filter((e=>te[e])).map((e=>({icon:ie,label:`${te[e]}`,value:e}))));var te,ne,ie,oe;const ae=e=>{Z(e),V({description:P(e?F.CHANGE_SECURED_SETTING_ON:F.CHANGE_SECURED_SETTING_OFF),closeActionLabel:P("_common_dialog_dismiss_button")})},le=Boolean(K?.some((e=>e.isShared)))||!f||b||l;return(0,s.useEffect)((()=>{i.length>z&&!R?(A(!0),w(!0)):i.length<z&&R&&(A(!1),w(!1))}),[i.length,R,w]),(0,d.BX)(d.HY,{children:[(l||g)&&(0,d.tZ)(r.ke,{mood:"neutral",size:"small",title:P(l?F.INFO_BOX_SHARED:F.INFO_BOX_ATTACHMENTS),sx:{margin:"10px 0px"}}),(0,d.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,d.BX)(B.u,{title:P(F.CONTENT_NOTE_DETAILS),children:[(0,d.tZ)(r.qo,{label:P(F.CONTENT_NOTE_DETAILS_TITLE),value:e,readOnly:b||l&&!f,onChange:e=>O(e.target.value)}),(0,d.tZ)(L,{title:e,content:i,isSecured:o,setContent:x,canEdit:f,readonly:b||I,isEditing:Q,spaceId:n}),(0,d.tZ)(_,{isMaxSizeReached:R,currentSize:i.length})]}),(0,d.BX)(B.u,{title:P(F.CONTENT_ITEM_ORGANIZATION),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,d.tZ)(r.mg,{value:t,"data-name":"colorSelect",label:P(F.CONTENT_ITEM_ORGANIZATION_COLOR),onChange:N,readOnly:b,children:ee.map((e=>(0,d.tZ)(r.$m,{value:e.value,children:e.label},e.value)))}),(0,d.tZ)(r.u,{wrapTrigger:!0,content:P(F.CONTENT_ITEM_ORGANIZATION_FORCED_CATEGORIZATION,{space:n}),passThrough:!le,children:(0,d.tZ)(u.M,{spaceId:null!=n?n:"",disabled:le,onChange:e=>{n!==e&&(E(e),W.current?.clearVaultItemCollections())},defaultSpaceId:null!=n?n:"",isUsingNewDesign:!0})}),(0,d.tZ)(k.p,{hasLabel:!1,vaultItem:{spaceId:null!=n?n:"",vaultItemId:C.id,vaultItemTitle:e},ref:W,signalEditedValues:S,isAddCollectionDisabled:!!j||g,setHasOpenedDialogs:D,setCollectionsToUpdate:T})]}),q?(0,d.tZ)(B.u,{title:P(F.CONTENT_PREFERENCES),children:(0,d.tZ)(r.XZ,{id:"securityToggle",label:P(F.SECURITY_TITLE),description:P(F.SECURITY_DESCRIPTION),checked:o,onChange:()=>{const e=!o;$||a?ae(e):((0,h.jF)(),J({itemType:m.R.SecureNoteSetting,options:{fieldsKeys:e?H:G,translated:!1},successCallback:()=>ae(e)}))}})}):null]})]})};var X=n(53294),Y=n(48062);const{CONTENT:W,DOCUMENT_STORAGE:$,SHARED_ACCESS:J}=l.SecureNoteTabs,K=({activeTab:e,data:t,content:n,handleFileInfoDetached:l,hasAttachment:s,canChangeRoles:r,canEdit:c,isShared:_,isUploading:u,isDisabled:p,onModifyData:h,onModalDisplayStateChange:m,setHasDialogsOpenedByChildren:f,...b})=>{const I=(0,o.w)(i.w.DisableSecureNotes);return(0,d.BX)(d.HY,{children:[(0,d.tZ)("div",{"aria-labelledby":"tab-note-detail",id:"content-note-detail",children:e===W&&(0,d.tZ)(V,{data:t,content:n,isNewItem:!1,canEdit:c,isShared:_,isDisabled:p,isDisableSecureNotesFFActive:I,hasAttachment:s,onModifyData:h,setHasDialogsOpenedByChildren:f,...b})}),e===J&&(0,d.tZ)("div",{"aria-labelledby":"tab-shared-access",id:"content-shared-access",children:(0,d.tZ)(a.u,{canChangeRoles:r,id:t.id})}),e===$&&(0,d.tZ)("div",{"aria-labelledby":"tab-document-storage",id:"content-document-storage",children:(0,d.tZ)(X.P,{attachments:t.attachments,additionalProps:{itemId:t.id,itemType:Y.ItemType.SecureNote,handleFileInfoDetached:e=>{l(e)},onModalDisplayStateChange:m,isUploading:u}})})]})}},85163:(e,t,n)=>{"use strict";n.d(t,{Q:()=>_});var i=n(8180),o=n(66468),a=n(13252),l=n(46525),s=n(86342),r=n(30309);const c=e=>!e.initiallyExisting&&!e.hasBeenDeleted,d=e=>e.initiallyExisting&&!e.hasBeenDeleted,_=()=>{const{createCollection:e,updateCollection:t}=(0,i.u)(l.v),{addItemsToCollections:n,removeItemFromCollections:_}=(0,i.u)(o.a);return{addNoteToCollections:async(i,o)=>{const l=[],u=[];for(const n of o){var p;d(n)||(n.isShared?c(n)?l.push({collectionId:n.id,permission:null!=(p=n.itemPermission)?p:a.y3.Limited}):u.push(n.id):(n.vaultItems=[{id:i,type:r.dJ.KWSecureNote}],n.id?await t({id:n.id,collection:n,operationType:n.hasBeenDeleted?s.C.SUBSTRACT_VAULT_ITEMS:s.C.APPEND_VAULT_ITEMS}):await e({content:n})))}l.length&&await n({collectionPermissions:l,itemIds:[i],shouldSkipSync:u.length>0}),u.length&&await _({collectionIds:u,itemId:i})}}}},2730:(e,t,n)=>{var i=n(96832);function o(e){return i.createElement("svg",e,i.createElement("g",{fill:"none",fillRule:"evenodd"},[i.createElement("path",{className:"tooltip-modern-icon-stroke",d:"M.5 8.5a8 8 0 1 1 16 0 8 8 0 0 1-16 0zm8-1v5",key:0}),i.createElement("path",{className:"tooltip-modern-icon-fill",d:"M9.5 4.5a1 1 0 1 0-2 0 1 1 0 1 0 2 0",key:1})]))}o.defaultProps={width:"17",height:"17"},e.exports=o,o.default=o},15567:(e,t,n)=>{var i=n(96832);function o(e){return i.createElement("svg",e,i.createElement("path",{d:"M6.547 7.25c0-1 1-2 2.5-2s2.5.75 2.5 2c0 1-.5 1.5-1.5 2.25s-1 1.25-1 1.75m-8.5-1.5a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Zm9 4a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",className:"tooltip-modern-icon-stroke"}))}o.defaultProps={width:"17",height:"17",viewBox:"0 0 19 19",fill:"none"},e.exports=o,o.default=o}}]);