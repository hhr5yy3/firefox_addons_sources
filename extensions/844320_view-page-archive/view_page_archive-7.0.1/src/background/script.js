(()=>{var e,t,n={4143:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var i=new a(r,s||e,o),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],i]:e._events[c].push(i):(e._events[c]=i,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function i(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),i.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},i.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,s=r.length,o=new Array(s);a<s;a++)o[a]=r[a].fn;return o},i.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,t,r,a,s,o){var i=n?n+e:e;if(!this._events[i])return!1;var c,u,l=this._events[i],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,a),!0;case 5:return l.fn.call(l.context,t,r,a,s),!0;case 6:return l.fn.call(l.context,t,r,a,s,o),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,a);break;default:if(!c)for(f=1,c=new Array(d-1);f<d;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},i.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},i.prototype.removeListener=function(e,t,r,a){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var i=this._events[s];if(i.fn)i.fn!==t||a&&!i.once||r&&i.context!==r||o(this,s);else{for(var c=0,u=[],l=i.length;c<l;c++)(i[c].fn!==t||a&&!i[c].once||r&&i[c].context!==r)&&u.push(i[c]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=n,i.EventEmitter=i,e.exports=i},7450:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s}),n(9849),n(1167);const r="Support event pages",a="20211228050445_support_event_pages";async function s(){const e={},{engines:t,disabledEngines:n,searchCount:r}=await browser.storage.local.get(["engines","disabledEngines","searchCount"]),s=["sogou","naver","exalead","webcite"];return e.engines=t.filter((function(e){return!s.includes(e)})),e.disabledEngines=n.filter((function(e){return!s.includes(e)})),e.taskRegistry={lastTaskStart:0,tabs:{},tasks:{}},e.storageRegistry={},e.lastStorageCleanup=0,e.lastEngineAccessCheck=0,e.setContextMenuEvent=0,e.searchModeContextMenu="tab",e.searchModeAction="tab",e.useCount=r,await browser.storage.local.remove(["searchCount","openNewTab"]),e.storageVersion=a,browser.storage.local.set(e)}},6894:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Add showEngineIcons",a="20220102035029_add_showengineicons";async function s(){const e={showEngineIcons:!0};return e.storageVersion=a,browser.storage.local.set(e)}},6556:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s}),n(9849),n(1167);const r="Add search engines",a="20220102051642_add_search_engines";async function s(){const e={},{engines:t,disabledEngines:n}=await browser.storage.local.get(["engines","disabledEngines"]),r=["baidu","qihoo"];return e.engines=t.filter((function(e){return!r.includes(e)})),e.disabledEngines=n.filter((function(e){return!r.includes(e)})),e.engines=e.engines.concat(["baidu","yahoo","qihoo","mailru"]),e.disabledEngines.push("mailru"),e.storageVersion=a,browser.storage.local.set(e)}},8704:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Add openCurrentDoc",a="20220114113759_add_opencurrentdoc";async function s(){const e={openCurrentDocAction:!0,openCurrentDocContextMenu:!0};return e.storageVersion=a,browser.storage.local.set(e)}},6456:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>a,revision:()=>s,upgrade:()=>o});var r=n(8618);const a="Add theme support",s="20221220055629_add_theme_support";async function o(){const e={appTheme:"auto",showContribPage:!0,contribPageLastAutoOpen:0,pinActionToolbarOpenCurrentDoc:!0,pinActionToolbarOptions:!1,pinActionToolbarContribute:!0},{installTime:t}=await browser.storage.local.get("installTime");return e.installTime=(0,r.I4)(t),e.storageVersion=s,browser.storage.local.set(e)}},6769:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s}),n(9849),n(1167);const r="Remove search engines",a="20230201232239_remove_search_engines";async function s(){const e={},{engines:t,disabledEngines:n}=await browser.storage.local.get(["engines","disabledEngines"]),r=["baidu","qihoo","yahooJp","mailru"],s=["gigablast","megalodon"];return e.engines=t.filter((function(e){return!r.includes(e)})),e.disabledEngines=n.filter((function(e){return!r.includes(e)&&!s.includes(e)})),e.storageVersion=a,browser.storage.local.set(e)}},9381:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s}),n(9849),n(1167);const r="Remove Gigablast",a="20230703074609_remove_gigablast";async function s(){const e={},{engines:t,disabledEngines:n}=await browser.storage.local.get(["engines","disabledEngines"]),r=["gigablast"];return e.engines=t.filter((function(e){return!r.includes(e)})),e.disabledEngines=n.filter((function(e){return!r.includes(e)})),e.storageVersion=a,browser.storage.local.set(e)}},802:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Remove openCurrentDocAction",a="20230704125533_remove_opencurrentdocaction";async function s(){const e={};return await browser.storage.local.remove("openCurrentDocAction"),e.storageVersion=a,browser.storage.local.set(e)}},6463:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Add Perma.cc",a="20230713165504_add_perma.cc";async function s(){const e={},{engines:t}=await browser.storage.local.get("engines");return t.splice(t.indexOf("megalodon"),0,"permacc"),e.engines=t,e.storageVersion=a,browser.storage.local.set(e)}},366:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Add Ghostarchive",a="20230715152710_add_ghostarchive";async function s(){const e={},{engines:t,disabledEngines:n}=await browser.storage.local.get(["engines","disabledEngines"]),r=["ghostarchive"];return e.engines=t.concat(r),e.disabledEngines=n.concat(r),e.storageVersion=a,browser.storage.local.set(e)}},1456:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Add WebCite",a="20230718120215_add_webcite";async function s(){const e={},{engines:t,disabledEngines:n}=await browser.storage.local.get(["engines","disabledEngines"]),r=["webcite"];return e.engines=t.concat(r),e.disabledEngines=n.concat(r),e.storageVersion=a,browser.storage.local.set(e)}},3159:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Add appVersion",a="20240514170322_add_appversion";async function s(){const e={appVersion:"",menuItems:[],privateMenuItems:[]};return e.storageVersion=a,browser.storage.local.set(e)}},38:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Add menuChangeEvent",a="20240619180111_add_menuchangeevent";async function s(){const e={menuChangeEvent:0,privateMenuChangeEvent:0};return await browser.storage.local.remove("setContextMenuEvent"),e.storageVersion=a,browser.storage.local.set(e)}},5373:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s}),n(9849),n(1167);const r="Remove search engines",a="20240928183956_remove_search_engines";async function s(e){const t={},{engines:n,disabledEngines:r}=await browser.storage.local.get(["engines","disabledEngines"]),s=["google","googleText","yahoo"],o=[];return e.install&&o.push("ghostarchive","webcite"),t.engines=n.filter((function(e){return!s.includes(e)})),t.disabledEngines=r.filter((function(e){return!s.includes(e)&&!o.includes(e)})),t.storageVersion=a,browser.storage.local.set(t)}},128:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s}),n(9849),n(1167);const r="Remove Bing",a="20241213110403_remove_bing";async function s(){const e={},{engines:t,disabledEngines:n}=await browser.storage.local.get(["engines","disabledEngines"]),r=["bing"],s=["memento"];return e.engines=t.filter((function(e){return!r.includes(e)})),e.disabledEngines=n.filter((function(e){return!r.includes(e)&&!s.includes(e)})),e.storageVersion=a,browser.storage.local.set(e)}},9796:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Initial version",a="SJltHx2rW";async function s(){const e={engines:["archiveOrg","google","googleText","bing","yandex","archiveIs","memento","webcite","exalead","gigablast","sogou","qihoo","baidu","naver","yahooJp","megalodon"],disabledEngines:["googleText","memento","webcite","exalead","gigablast","qihoo","baidu","naver","yahooJp","megalodon"],showInContextMenu:"link",searchAllEnginesContextMenu:"sub",searchAllEnginesAction:"sub",showPageAction:!0,openNewTab:!0,tabInBackgound:!1};return e.storageVersion=a,browser.storage.local.set(e)}},6313:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Add installTime, searchCount and contribPageLastOpen",a="SkhmnNhMG";async function s(){const e={};return e.installTime=(new Date).getTime(),e.searchCount=0,e.contribPageLastOpen=0,e.storageVersion=a,browser.storage.local.set(e)}},1774:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Set showPageAction to false",a="rJXbW1ZHmM";async function s(){const e={showPageAction:!1};return e.storageVersion=a,browser.storage.local.set(e)}},8289:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Add archiveOrgAll and archiveIsAll",a="yjRtkzy";async function s(){const e={},{engines:t,disabledEngines:n}=await browser.storage.local.get(["engines","disabledEngines"]);return t.splice(t.indexOf("archiveOrg")+1,0,"archiveOrgAll"),t.splice(t.indexOf("archiveIs")+1,0,"archiveIsAll"),e.engines=t,e.disabledEngines=n.concat(["archiveOrgAll","archiveIsAll"]),e.storageVersion=a,browser.storage.local.set(e)}},211:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Initial version",a="20240514122825_initial_version";async function s(){const e={platformInfo:null,menuChangeEvent:0,privateMenuChangeEvent:0,tabRevisions:[]};return e.storageVersion=a,browser.storage.session.set(e)}},786:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>f,Hu:()=>s,XL:()=>i,eK:()=>d});var r=n(8618),a=n(4729);async function s({area:e="local"}={}){try{return await browser.storage[e].get(""),!0}catch(e){return!1}}const o={local:!1,session:!1,sync:!1};async function i({area:e="local"}={}){if(o[e])return!0;{const{storageVersion:t}=await browser.storage[e].get("storageVersion");if(t&&t===a.QB[e])return o[e]=!0,!0}return!1}async function c({area:e="local"}={}){if(!o[e])return new Promise(((t,n)=>{let r;const a=async function(){await i({area:e})?(self.clearTimeout(s),t()):r?n(new Error(`Storage (${e}) is not ready`)):self.setTimeout(a,30)},s=self.setTimeout((function(){r=!0}),6e4);a()}))}function u(e,t,{encode:n=!0}={}){return n?`${t}${(0,r.Zr)(e)}`:(0,r.ag)(e.replace(new RegExp(`^${t}`),""))}function l(e,t,{encode:n=!0}={}){if("string"==typeof e)return u(e,t,{encode:n});if(Array.isArray(e)){const r=[];for(const a of e)r.push(u(a,t,{encode:n}));return r}{const r={};for(const[a,s]of Object.entries(e))r[u(a,t,{encode:n})]=s;return r}}function d(e,t){return t?.active?l(e,t.name,{encode:!0}):e}const f={get:async function(e=null,{area:t="local",context:n=null}={}){return await c({area:t}),function(e,t){return t?.active?l(e,t.name,{encode:!1}):e}(await browser.storage[t].get(d(e,n)),n)},set:async function(e,{area:t="local",context:n=null}={}){return await c({area:t}),browser.storage[t].set(d(e,n))},remove:async function(e,{area:t="local",context:n=null}={}){return await c({area:t}),browser.storage[t].remove(d(e,n))},clear:async function({area:e="local"}={}){return await c({area:e}),browser.storage[e].clear()}}},8618:(e,t,n)=>{"use strict";n.d(t,{Fr:()=>h,HG:()=>i,I4:()=>m,JU:()=>x,Jh:()=>_,T6:()=>v,Zr:()=>y,aI:()=>c,ag:()=>I,bY:()=>u,e6:()=>l,hw:()=>b,kL:()=>d,m0:()=>g,q4:()=>o,uo:()=>p,wT:()=>w}),n(6831);var r=n(3236),a=n(786),s=(n(4719),n(4729));function o(e,t){return browser.i18n.getMessage(e,t)}async function i({files:e=null,func:t=null,args:n=null,tabId:r=null,frameIds:a=[0],allFrames:o=!1,world:i="ISOLATED",injectImmediately:c=!0,unwrapResults:u=!0,code:l=""}){if(s.tn){const l={target:{tabId:r},world:i};o?l.target.allFrames=!0:l.target.frameIds=a,e?l.files=e:(l.func=t,n&&(l.args=n)),"safari"!==s.Dm&&(l.injectImmediately=c);const d=await browser.scripting.executeScript(l);return u?d.map((e=>e.result)):d}{const t={frameId:a[0]};return e?t.file=e[0]:t.code=l,c&&(t.runAt="document_start"),browser.tabs.executeScript(r,t)}}async function c({url:e="",token:t="",index:n=null,active:r=!0,openerTabId:a=null,getTab:o=!1}={}){e||(e=u(t));const i={url:e,active:r};null!==n&&(i.index=n),null!==a&&(i.openerTabId=a);let c=await browser.tabs.create(i);if(o){if("samsung"===s.Dm){let t=1;for(;t<=500&&(!c||c.url!==e);)[c]=await browser.tabs.query({lastFocusedWindow:!0,url:e}),await A(20),t+=1}return c}}function u(e){return e||(e=(0,r.A)()),`${browser.runtime.getURL("/src/tab/index.html")}?id=${e}`}async function l(){const[e]=await browser.tabs.query({lastFocusedWindow:!0,active:!0});return e}async function d({tab:e,tabId:t=null}={}){if(e||null===t||(e=await browser.tabs.get(t).catch((e=>null))),e&&e.id!==browser.tabs.TAB_ID_NONE)return!0}let f;async function p(){if(!self.location.href.startsWith(browser.runtime.getURL("/src/background/")))return browser.runtime.sendMessage({id:"getPlatform"});let{os:e,arch:t}=await async function(){if(f)return f;if(s.tn)({platformInfo:f}=await a.Ay.get("platformInfo",{area:"session"}));else try{f=JSON.parse(window.sessionStorage.getItem("platformInfo"))}catch(e){}if(!f){let e,t;if("samsung"===s.Dm?(e="android",t=""):"safari"===s.Dm?({os:e,arch:t}=await browser.runtime.sendNativeMessage("application.id",{id:"getPlatformInfo"})):({os:e,arch:t}=await browser.runtime.getPlatformInfo()),f={os:e,arch:t},s.tn)await a.Ay.set({platformInfo:f},{area:"session"});else try{window.sessionStorage.setItem("platformInfo",JSON.stringify(f))}catch(e){}}return f}();"win"===e?e="windows":"mac"===e&&(e="macos"),["x86-32","i386"].includes(t)?t="386":["x86-64","x86_64"].includes(t)?t="amd64":t.startsWith("arm")&&(t="arm");const n="windows"===e,r="macos"===e,o="linux"===e,i="android"===e,c="ios"===e,u="ipados"===e,l=["android","ios","ipados"].includes(e),d="chrome"===s.Dm,p=["chrome","edge"].includes(s.Dm)&&/\sedg(?:e|a|ios)?\//i.test(navigator.userAgent),g="firefox"===s.Dm,h=["chrome","opera"].includes(s.Dm)&&/\sopr\//i.test(navigator.userAgent),v="safari"===s.Dm,m="samsung"===s.Dm;return{os:e,arch:t,targetEnv:s.Dm,isWindows:n,isMacos:r,isLinux:o,isAndroid:i,isIos:c,isIpados:u,isMobile:l,isChrome:d,isEdge:p,isFirefox:g,isOpera:h,isSafari:v,isSamsung:m}}async function g(){return(await p()).isAndroid}async function h(){return(await p()).isMobile}function v(){return window.matchMedia("(prefers-color-scheme: dark)")}function m(e){return e||(e=Date.now()),e-e%864e5}function w(){try{const{hostname:e}=new URL(browser.runtime.getURL("/src/background/script.js"));return e}catch(e){}return null}function b(e,t){return Math.floor(Math.random()*(t-e+1))+e}function y(e,{locale:t="en-US"}={}){return e.replace(/^\p{CWU}/u,(e=>e.toLocaleUpperCase(t)))}function I(e,{locale:t="en-US"}={}){return e.replace(/^\p{CWL}/u,(e=>e.toLocaleLowerCase(t)))}function _(e,t){const n=function(e,{content:t=null}={}){return e=`${e}Store`,self[e]||(self[e]=t||{}),self[e]}("run");if(!n[e])return n[e]=!0,!t||t()}async function x(e,t,{timeout:n=6e4}={}){const r=[e];return n&&r.push({signal:AbortSignal.timeout(n)}),navigator.locks.request(...r,t)}function A(e){return new Promise((t=>self.setTimeout(t,e)))}},4729:(e,t,n)=>{"use strict";n.d(t,{CU:()=>o,Dm:()=>r,QB:()=>s,ZY:()=>a,tn:()=>i});const r="firefox",a=!0,s={local:"20241213110403_remove_bing",session:"20240514122825_initial_version"},o="7.0.1",i=!1},4719:(e,t,n)=>{"use strict";n.d(t,{y:()=>a});const r={makeDocumentVisible:function(e){let t=document.visibilityState;document.addEventListener(e,(function(e){t=e.detail}),{capture:!0});let n=0;function r(e){e.preventDefault(),e.stopImmediatePropagation()}window.requestAnimationFrame=new Proxy(window.requestAnimationFrame,{apply(e,r,a){if("visible"===t)return Reflect.apply(e,r,a);{const e=Date.now(),t=Math.max(0,16-(e-n));return n=e+t,window.setTimeout((function(){a[0](performance.now())}),t)}}}),window.cancelAnimationFrame=new Proxy(window.cancelAnimationFrame,{apply(e,n,r){if("visible"===t)return Reflect.apply(e,n,r);window.clearTimeout(r[0])}}),Object.defineProperty(document,"visibilityState",{get:()=>"visible"}),Object.defineProperty(document,"hidden",{get:()=>!1}),Document.prototype.hasFocus=function(){return!0},window.addEventListener("pagehide",r,{capture:!0}),window.addEventListener("blur",r,{capture:!0}),document.dispatchEvent(new Event("visibilitychange")),window.dispatchEvent(new PageTransitionEvent("pageshow")),window.dispatchEvent(new FocusEvent("focus"))},yandexServiceObserver:function(e){let t;const n=function(){window.Ya?.reactBus?.emit?(window.clearTimeout(r),document.dispatchEvent(new Event(e))):t||window.setTimeout(n,200)},r=window.setTimeout((function(){t=!0}),6e4);n()}};function a(e){return r[e]}},7249:(e,t,n)=>{var r={"./local/20211228050445_support_event_pages.js":7450,"./local/20220102035029_add_showengineicons.js":6894,"./local/20220102051642_add_search_engines.js":6556,"./local/20220114113759_add_opencurrentdoc.js":8704,"./local/20221220055629_add_theme_support.js":6456,"./local/20230201232239_remove_search_engines.js":6769,"./local/20230703074609_remove_gigablast.js":9381,"./local/20230704125533_remove_opencurrentdocaction.js":802,"./local/20230713165504_add_perma.cc.js":6463,"./local/20230715152710_add_ghostarchive.js":366,"./local/20230718120215_add_webcite.js":1456,"./local/20240514170322_add_appversion.js":3159,"./local/20240619180111_add_menuchangeevent.js":38,"./local/20240928183956_remove_search_engines.js":5373,"./local/20241213110403_remove_bing.js":128,"./local/SJltHx2rW.js":9796,"./local/SkhmnNhMG.js":6313,"./local/rJXbW1ZHmM.js":1774,"./local/yjRtkzy.js":8289,"./session/20240514122825_initial_version.js":211};function a(e){return s(e).then(n)}function s(e){return Promise.resolve().then((()=>{if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}))}a.keys=()=>Object.keys(r),a.resolve=s,a.id=7249,e.exports=a},2365:(e,t,n)=>{"use strict";var r=n(9200),a=n(7938),s=TypeError;e.exports=function(e){if(r(e))return e;throw new s(a(e)+" is not a function")}},602:(e,t,n)=>{"use strict";var r=n(2430),a=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw new a("Incorrect invocation")}},4398:(e,t,n)=>{"use strict";var r=n(9131),a=String,s=TypeError;e.exports=function(e){if(r(e))return e;throw new s(a(e)+" is not an object")}},6134:(e,t,n)=>{"use strict";var r=n(4360),a=n(8479),s=n(7457),o=function(e){return function(t,n,o){var i=r(t),c=s(i);if(0===c)return!e&&-1;var u,l=a(o,c);if(e&&n!=n){for(;c>l;)if((u=i[l++])!=u)return!0}else for(;c>l;l++)if((e||l in i)&&i[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},1512:(e,t,n)=>{"use strict";var r=n(4398),a=n(9400);e.exports=function(e,t,n,s){try{return s?t(r(n)[0],n[1]):t(n)}catch(t){a(e,"throw",t)}}},5589:(e,t,n)=>{"use strict";var r=n(7133),a=r({}.toString),s=r("".slice);e.exports=function(e){return s(a(e),8,-1)}},3650:(e,t,n)=>{"use strict";var r=n(917),a=n(9200),s=n(5589),o=n(4702)("toStringTag"),i=Object,c="Arguments"===s(function(){return arguments}());e.exports=r?s:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=i(e),o))?n:c?s(t):"Object"===(r=s(t))&&a(t.callee)?"Arguments":r}},4085:(e,t,n)=>{"use strict";var r=n(9158),a=n(4540),s=n(2428),o=n(4446);e.exports=function(e,t,n){for(var i=a(t),c=o.f,u=s.f,l=0;l<i.length;l++){var d=i[l];r(e,d)||n&&r(n,d)||c(e,d,u(t,d))}}},6308:(e,t,n)=>{"use strict";var r=n(942);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},7236:e=>{"use strict";e.exports=function(e,t){return{value:e,done:t}}},5044:(e,t,n)=>{"use strict";var r=n(6857),a=n(4446),s=n(2007);e.exports=r?function(e,t,n){return a.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},2007:e=>{"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},5909:(e,t,n)=>{"use strict";var r=n(6857),a=n(4446),s=n(2007);e.exports=function(e,t,n){r?a.f(e,t,s(0,n)):e[t]=n}},3129:(e,t,n)=>{"use strict";var r=n(4174),a=n(4446);e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),a.f(e,t,n)}},8521:(e,t,n)=>{"use strict";var r=n(9200),a=n(4446),s=n(4174),o=n(8466);e.exports=function(e,t,n,i){i||(i={});var c=i.enumerable,u=void 0!==i.name?i.name:t;if(r(n)&&s(n,u,i),i.global)c?e[t]=n:o(t,n);else{try{i.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=n:a.f(e,t,{value:n,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return e}},3948:(e,t,n)=>{"use strict";var r=n(8521);e.exports=function(e,t,n){for(var a in t)r(e,a,t[a],n);return e}},8466:(e,t,n)=>{"use strict";var r=n(8793),a=Object.defineProperty;e.exports=function(e,t){try{a(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},6857:(e,t,n)=>{"use strict";var r=n(942);e.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},1466:(e,t,n)=>{"use strict";var r=n(8793),a=n(9131),s=r.document,o=a(s)&&a(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},2030:e=>{"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},824:(e,t,n)=>{"use strict";var r=n(8793).navigator,a=r&&r.userAgent;e.exports=a?String(a):""},9140:(e,t,n)=>{"use strict";var r,a,s=n(8793),o=n(824),i=s.process,c=s.Deno,u=i&&i.versions||c&&c.version,l=u&&u.v8;l&&(a=(r=l.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!a&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(a=+r[1]),e.exports=a},3353:(e,t,n)=>{"use strict";var r=n(8793),a=n(2428).f,s=n(5044),o=n(8521),i=n(8466),c=n(4085),u=n(7453);e.exports=function(e,t){var n,l,d,f,p,g=e.target,h=e.global,v=e.stat;if(n=h?r:v?r[g]||i(g,{}):r[g]&&r[g].prototype)for(l in t){if(f=t[l],d=e.dontCallGetSet?(p=a(n,l))&&p.value:n[l],!u(h?l:g+(v?".":"#")+l,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(e.sham||d&&d.sham)&&s(f,"sham",!0),o(n,l,f,e)}}},942:e=>{"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},5457:(e,t,n)=>{"use strict";var r=n(527),a=n(2365),s=n(7315),o=r(r.bind);e.exports=function(e,t){return a(e),void 0===t?e:s?o(e,t):function(){return e.apply(t,arguments)}}},7315:(e,t,n)=>{"use strict";var r=n(942);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},492:(e,t,n)=>{"use strict";var r=n(7315),a=Function.prototype.call;e.exports=r?a.bind(a):function(){return a.apply(a,arguments)}},7403:(e,t,n)=>{"use strict";var r=n(6857),a=n(9158),s=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,i=a(s,"name"),c=i&&"something"===function(){}.name,u=i&&(!r||r&&o(s,"name").configurable);e.exports={EXISTS:i,PROPER:c,CONFIGURABLE:u}},527:(e,t,n)=>{"use strict";var r=n(5589),a=n(7133);e.exports=function(e){if("Function"===r(e))return a(e)}},7133:(e,t,n)=>{"use strict";var r=n(7315),a=Function.prototype,s=a.call,o=r&&a.bind.bind(s,s);e.exports=r?o:function(e){return function(){return s.apply(e,arguments)}}},848:(e,t,n)=>{"use strict";var r=n(8793),a=n(9200);e.exports=function(e,t){return arguments.length<2?(n=r[e],a(n)?n:void 0):r[e]&&r[e][t];var n}},5134:e=>{"use strict";e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},590:(e,t,n)=>{"use strict";var r=n(3650),a=n(9325),s=n(2178),o=n(488),i=n(4702)("iterator");e.exports=function(e){if(!s(e))return a(e,i)||a(e,"@@iterator")||o[r(e)]}},1778:(e,t,n)=>{"use strict";var r=n(492),a=n(2365),s=n(4398),o=n(7938),i=n(590),c=TypeError;e.exports=function(e,t){var n=arguments.length<2?i(e):t;if(a(n))return s(r(n,e));throw new c(o(e)+" is not iterable")}},9325:(e,t,n)=>{"use strict";var r=n(2365),a=n(2178);e.exports=function(e,t){var n=e[t];return a(n)?void 0:r(n)}},8793:function(e,t,n){"use strict";var r=function(e){return e&&e.Math===Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9158:(e,t,n)=>{"use strict";var r=n(7133),a=n(9272),s=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(a(e),t)}},640:e=>{"use strict";e.exports={}},4510:(e,t,n)=>{"use strict";var r=n(848);e.exports=r("document","documentElement")},5842:(e,t,n)=>{"use strict";var r=n(6857),a=n(942),s=n(1466);e.exports=!r&&!a((function(){return 7!==Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},8060:(e,t,n)=>{"use strict";var r=n(7133),a=n(942),s=n(5589),o=Object,i=r("".split);e.exports=a((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"===s(e)?i(e,""):o(e)}:o},7217:(e,t,n)=>{"use strict";var r=n(7133),a=n(9200),s=n(5210),o=r(Function.toString);a(s.inspectSource)||(s.inspectSource=function(e){return o(e)}),e.exports=s.inspectSource},1514:(e,t,n)=>{"use strict";var r,a,s,o=n(3125),i=n(8793),c=n(9131),u=n(5044),l=n(9158),d=n(5210),f=n(2316),p=n(640),g="Object already initialized",h=i.TypeError,v=i.WeakMap;if(o||d.state){var m=d.state||(d.state=new v);m.get=m.get,m.has=m.has,m.set=m.set,r=function(e,t){if(m.has(e))throw new h(g);return t.facade=e,m.set(e,t),t},a=function(e){return m.get(e)||{}},s=function(e){return m.has(e)}}else{var w=f("state");p[w]=!0,r=function(e,t){if(l(e,w))throw new h(g);return t.facade=e,u(e,w,t),t},a=function(e){return l(e,w)?e[w]:{}},s=function(e){return l(e,w)}}e.exports={set:r,get:a,has:s,enforce:function(e){return s(e)?a(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=a(t)).type!==e)throw new h("Incompatible receiver, "+e+" required");return n}}}},6:(e,t,n)=>{"use strict";var r=n(4702),a=n(488),s=r("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||o[s]===e)}},9200:e=>{"use strict";var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},7453:(e,t,n)=>{"use strict";var r=n(942),a=n(9200),s=/#|\.prototype\./,o=function(e,t){var n=c[i(e)];return n===l||n!==u&&(a(t)?r(t):!!t)},i=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},c=o.data={},u=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},2178:e=>{"use strict";e.exports=function(e){return null==e}},9131:(e,t,n)=>{"use strict";var r=n(9200);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},1818:e=>{"use strict";e.exports=!1},460:(e,t,n)=>{"use strict";var r=n(848),a=n(9200),s=n(2430),o=n(6253),i=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return a(t)&&s(t.prototype,i(e))}},3973:(e,t,n)=>{"use strict";var r=n(5457),a=n(492),s=n(4398),o=n(7938),i=n(6),c=n(7457),u=n(2430),l=n(1778),d=n(590),f=n(9400),p=TypeError,g=function(e,t){this.stopped=e,this.result=t},h=g.prototype;e.exports=function(e,t,n){var v,m,w,b,y,I,_,x=n&&n.that,A=!(!n||!n.AS_ENTRIES),T=!(!n||!n.IS_RECORD),O=!(!n||!n.IS_ITERATOR),E=!(!n||!n.INTERRUPTED),S=r(t,x),C=function(e){return v&&f(v,"normal",e),new g(!0,e)},k=function(e){return A?(s(e),E?S(e[0],e[1],C):S(e[0],e[1])):E?S(e,C):S(e)};if(T)v=e.iterator;else if(O)v=e;else{if(!(m=d(e)))throw new p(o(e)+" is not iterable");if(i(m)){for(w=0,b=c(e);b>w;w++)if((y=k(e[w]))&&u(h,y))return y;return new g(!1)}v=l(e,m)}for(I=T?e.next:v.next;!(_=a(I,v)).done;){try{y=k(_.value)}catch(e){f(v,"throw",e)}if("object"==typeof y&&y&&u(h,y))return y}return new g(!1)}},9400:(e,t,n)=>{"use strict";var r=n(492),a=n(4398),s=n(9325);e.exports=function(e,t,n){var o,i;a(e);try{if(!(o=s(e,"return"))){if("throw"===t)throw n;return n}o=r(o,e)}catch(e){i=!0,o=e}if("throw"===t)throw n;if(i)throw o;return a(o),n}},7399:(e,t,n)=>{"use strict";var r=n(492),a=n(2909),s=n(5044),o=n(3948),i=n(4702),c=n(1514),u=n(9325),l=n(1982).IteratorPrototype,d=n(7236),f=n(9400),p=i("toStringTag"),g="IteratorHelper",h="WrapForValidIterator",v=c.set,m=function(e){var t=c.getterFor(e?h:g);return o(a(l),{next:function(){var n=t(this);if(e)return n.nextHandler();try{var r=n.done?void 0:n.nextHandler();return d(r,n.done)}catch(e){throw n.done=!0,e}},return:function(){var n=t(this),a=n.iterator;if(n.done=!0,e){var s=u(a,"return");return s?r(s,a):d(void 0,!0)}if(n.inner)try{f(n.inner.iterator,"normal")}catch(e){return f(a,"throw",e)}return a&&f(a,"normal"),d(void 0,!0)}})},w=m(!0),b=m(!1);s(b,p,"Iterator Helper"),e.exports=function(e,t){var n=function(n,r){r?(r.iterator=n.iterator,r.next=n.next):r=n,r.type=t?h:g,r.nextHandler=e,r.counter=0,r.done=!1,v(this,r)};return n.prototype=t?w:b,n}},2154:(e,t,n)=>{"use strict";var r=n(492),a=n(2365),s=n(4398),o=n(5134),i=n(7399),c=n(1512),u=i((function(){var e=this.iterator,t=s(r(this.next,e));if(!(this.done=!!t.done))return c(e,this.mapper,[t.value,this.counter++],!0)}));e.exports=function(e){return s(this),a(e),new u(o(this),{mapper:e})}},1982:(e,t,n)=>{"use strict";var r,a,s,o=n(942),i=n(9200),c=n(9131),u=n(2909),l=n(5270),d=n(8521),f=n(4702),p=n(1818),g=f("iterator"),h=!1;[].keys&&("next"in(s=[].keys())?(a=l(l(s)))!==Object.prototype&&(r=a):h=!0),!c(r)||o((function(){var e={};return r[g].call(e)!==e}))?r={}:p&&(r=u(r)),i(r[g])||d(r,g,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},488:e=>{"use strict";e.exports={}},7457:(e,t,n)=>{"use strict";var r=n(2695);e.exports=function(e){return r(e.length)}},4174:(e,t,n)=>{"use strict";var r=n(7133),a=n(942),s=n(9200),o=n(9158),i=n(6857),c=n(7403).CONFIGURABLE,u=n(7217),l=n(1514),d=l.enforce,f=l.get,p=String,g=Object.defineProperty,h=r("".slice),v=r("".replace),m=r([].join),w=i&&!a((function(){return 8!==g((function(){}),"length",{value:8}).length})),b=String(String).split("String"),y=e.exports=function(e,t,n){"Symbol("===h(p(t),0,7)&&(t="["+v(p(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!o(e,"name")||c&&e.name!==t)&&(i?g(e,"name",{value:t,configurable:!0}):e.name=t),w&&n&&o(n,"arity")&&e.length!==n.arity&&g(e,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?i&&g(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=d(e);return o(r,"source")||(r.source=m(b,"string"==typeof t?t:"")),e};Function.prototype.toString=y((function(){return s(this)&&f(this).source||u(this)}),"toString")},8226:e=>{"use strict";var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},2909:(e,t,n)=>{"use strict";var r,a=n(4398),s=n(2066),o=n(2030),i=n(640),c=n(4510),u=n(1466),l=n(2316),d="prototype",f="script",p=l("IE_PROTO"),g=function(){},h=function(e){return"<"+f+">"+e+"</"+f+">"},v=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;m="undefined"!=typeof document?document.domain&&r?v(r):(t=u("iframe"),n="java"+f+":",t.style.display="none",c.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F):v(r);for(var a=o.length;a--;)delete m[d][o[a]];return m()};i[p]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(g[d]=a(e),n=new g,g[d]=null,n[p]=e):n=m(),void 0===t?n:s.f(n,t)}},2066:(e,t,n)=>{"use strict";var r=n(6857),a=n(335),s=n(4446),o=n(4398),i=n(4360),c=n(3733);t.f=r&&!a?Object.defineProperties:function(e,t){o(e);for(var n,r=i(t),a=c(t),u=a.length,l=0;u>l;)s.f(e,n=a[l++],r[n]);return e}},4446:(e,t,n)=>{"use strict";var r=n(6857),a=n(5842),s=n(335),o=n(4398),i=n(2548),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",f="configurable",p="writable";t.f=r?s?function(e,t,n){if(o(e),t=i(t),o(n),"function"==typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var r=l(e,t);r&&r[p]&&(e[t]=n.value,n={configurable:f in n?n[f]:r[f],enumerable:d in n?n[d]:r[d],writable:!1})}return u(e,t,n)}:u:function(e,t,n){if(o(e),t=i(t),o(n),a)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},2428:(e,t,n)=>{"use strict";var r=n(6857),a=n(492),s=n(6732),o=n(2007),i=n(4360),c=n(2548),u=n(9158),l=n(5842),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=i(e),t=c(t),l)try{return d(e,t)}catch(e){}if(u(e,t))return o(!a(s.f,e,t),e[t])}},5809:(e,t,n)=>{"use strict";var r=n(8959),a=n(2030).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},1264:(e,t)=>{"use strict";t.f=Object.getOwnPropertySymbols},5270:(e,t,n)=>{"use strict";var r=n(9158),a=n(9200),s=n(9272),o=n(2316),i=n(6308),c=o("IE_PROTO"),u=Object,l=u.prototype;e.exports=i?u.getPrototypeOf:function(e){var t=s(e);if(r(t,c))return t[c];var n=t.constructor;return a(n)&&t instanceof n?n.prototype:t instanceof u?l:null}},2430:(e,t,n)=>{"use strict";var r=n(7133);e.exports=r({}.isPrototypeOf)},8959:(e,t,n)=>{"use strict";var r=n(7133),a=n(9158),s=n(4360),o=n(6134).indexOf,i=n(640),c=r([].push);e.exports=function(e,t){var n,r=s(e),u=0,l=[];for(n in r)!a(i,n)&&a(r,n)&&c(l,n);for(;t.length>u;)a(r,n=t[u++])&&(~o(l,n)||c(l,n));return l}},3733:(e,t,n)=>{"use strict";var r=n(8959),a=n(2030);e.exports=Object.keys||function(e){return r(e,a)}},6732:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);t.f=a?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},1427:(e,t,n)=>{"use strict";var r=n(492),a=n(9200),s=n(9131),o=TypeError;e.exports=function(e,t){var n,i;if("string"===t&&a(n=e.toString)&&!s(i=r(n,e)))return i;if(a(n=e.valueOf)&&!s(i=r(n,e)))return i;if("string"!==t&&a(n=e.toString)&&!s(i=r(n,e)))return i;throw new o("Can't convert object to primitive value")}},4540:(e,t,n)=>{"use strict";var r=n(848),a=n(7133),s=n(5809),o=n(1264),i=n(4398),c=a([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=s.f(i(e)),n=o.f;return n?c(t,n(e)):t}},3977:(e,t,n)=>{"use strict";var r=n(2178),a=TypeError;e.exports=function(e){if(r(e))throw new a("Can't call method on "+e);return e}},2316:(e,t,n)=>{"use strict";var r=n(6014),a=n(685),s=r("keys");e.exports=function(e){return s[e]||(s[e]=a(e))}},5210:(e,t,n)=>{"use strict";var r=n(1818),a=n(8793),s=n(8466),o="__core-js_shared__",i=e.exports=a[o]||s(o,{});(i.versions||(i.versions=[])).push({version:"3.39.0",mode:r?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6014:(e,t,n)=>{"use strict";var r=n(5210);e.exports=function(e,t){return r[e]||(r[e]=t||{})}},260:(e,t,n)=>{"use strict";var r=n(9140),a=n(942),s=n(8793).String;e.exports=!!Object.getOwnPropertySymbols&&!a((function(){var e=Symbol("symbol detection");return!s(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},8479:(e,t,n)=>{"use strict";var r=n(4932),a=Math.max,s=Math.min;e.exports=function(e,t){var n=r(e);return n<0?a(n+t,0):s(n,t)}},4360:(e,t,n)=>{"use strict";var r=n(8060),a=n(3977);e.exports=function(e){return r(a(e))}},4932:(e,t,n)=>{"use strict";var r=n(8226);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},2695:(e,t,n)=>{"use strict";var r=n(4932),a=Math.min;e.exports=function(e){var t=r(e);return t>0?a(t,9007199254740991):0}},9272:(e,t,n)=>{"use strict";var r=n(3977),a=Object;e.exports=function(e){return a(r(e))}},9422:(e,t,n)=>{"use strict";var r=n(492),a=n(9131),s=n(460),o=n(9325),i=n(1427),c=n(4702),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!a(e)||s(e))return e;var n,c=o(e,l);if(c){if(void 0===t&&(t="default"),n=r(c,e,t),!a(n)||s(n))return n;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),i(e,t)}},2548:(e,t,n)=>{"use strict";var r=n(9422),a=n(460);e.exports=function(e){var t=r(e,"string");return a(t)?t:t+""}},917:(e,t,n)=>{"use strict";var r={};r[n(4702)("toStringTag")]="z",e.exports="[object z]"===String(r)},7938:e=>{"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},685:(e,t,n)=>{"use strict";var r=n(7133),a=0,s=Math.random(),o=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++a+s,36)}},6253:(e,t,n)=>{"use strict";var r=n(260);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},335:(e,t,n)=>{"use strict";var r=n(6857),a=n(942);e.exports=r&&a((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},3125:(e,t,n)=>{"use strict";var r=n(8793),a=n(9200),s=r.WeakMap;e.exports=a(s)&&/native code/.test(String(s))},4702:(e,t,n)=>{"use strict";var r=n(8793),a=n(6014),s=n(9158),o=n(685),i=n(260),c=n(6253),u=r.Symbol,l=a("wks"),d=c?u.for||u:u&&u.withoutSetter||o;e.exports=function(e){return s(l,e)||(l[e]=i&&s(u,e)?u[e]:d("Symbol."+e)),l[e]}},2306:(e,t,n)=>{"use strict";var r=n(3353),a=n(8793),s=n(602),o=n(4398),i=n(9200),c=n(5270),u=n(3129),l=n(5909),d=n(942),f=n(9158),p=n(4702),g=n(1982).IteratorPrototype,h=n(6857),v=n(1818),m="constructor",w="Iterator",b=p("toStringTag"),y=TypeError,I=a[w],_=v||!i(I)||I.prototype!==g||!d((function(){I({})})),x=function(){if(s(this,g),c(this)===g)throw new y("Abstract class Iterator not directly constructable")},A=function(e,t){h?u(g,e,{configurable:!0,get:function(){return t},set:function(t){if(o(this),this===g)throw new y("You can't redefine this property");f(this,e)?this[e]=t:l(this,e,t)}}):g[e]=t};f(g,b)||A(b,w),!_&&f(g,m)&&g[m]!==Object||A(m,x),x.prototype=g,r({global:!0,constructor:!0,forced:_},{Iterator:x})},7374:(e,t,n)=>{"use strict";var r=n(3353),a=n(492),s=n(2365),o=n(4398),i=n(5134),c=n(7399),u=n(1512),l=n(1818),d=c((function(){for(var e,t,n=this.iterator,r=this.predicate,s=this.next;;){if(e=o(a(s,n)),this.done=!!e.done)return;if(t=e.value,u(n,r,[t,this.counter++],!0))return t}}));r({target:"Iterator",proto:!0,real:!0,forced:l},{filter:function(e){return o(this),s(e),new d(i(this),{predicate:e})}})},2099:(e,t,n)=>{"use strict";var r=n(3353),a=n(3973),s=n(2365),o=n(4398),i=n(5134);r({target:"Iterator",proto:!0,real:!0},{forEach:function(e){o(this),s(e);var t=i(this),n=0;a(t,(function(t){e(t,n++)}),{IS_RECORD:!0})}})},3640:(e,t,n)=>{"use strict";var r=n(3353),a=n(2154);r({target:"Iterator",proto:!0,real:!0,forced:n(1818)},{map:a})},9849:(e,t,n)=>{"use strict";n(2306)},1167:(e,t,n)=>{"use strict";n(7374)},6658:(e,t,n)=>{"use strict";n(2099)},6831:(e,t,n)=>{"use strict";n(3640)},541:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)}},3677:(e,t,n)=>{"use strict";let r;n.d(t,{A:()=>s});const a=new Uint8Array(16);function s(){if(!r){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r=crypto.getRandomValues.bind(crypto)}return r(a)}},6541:(e,t,n)=>{"use strict";n.d(t,{k:()=>a});const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function a(e,t=0){return(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}},3236:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(541),a=n(3677),s=n(6541);const o=function(e,t,n){if(r.A.randomUUID&&!t&&!e)return r.A.randomUUID();const o=(e=e||{}).random||(e.rng||a.A)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return(0,s.k)(o)}},8977:e=>{"use strict";e.exports=JSON.parse('{"revisions":{"local":["SJltHx2rW","SkhmnNhMG","rJXbW1ZHmM","yjRtkzy","20211228050445_support_event_pages","20220102035029_add_showengineicons","20220102051642_add_search_engines","20220114113759_add_opencurrentdoc","20221220055629_add_theme_support","20230201232239_remove_search_engines","20230703074609_remove_gigablast","20230704125533_remove_opencurrentdocaction","20230713165504_add_perma.cc","20230715152710_add_ghostarchive","20230718120215_add_webcite","20240514170322_add_appversion","20240619180111_add_menuchangeevent","20240928183956_remove_search_engines","20241213110403_remove_bing"],"session":["20240514122825_initial_version"]}}')}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={exports:{}};return n[e].call(s.exports,s,s.exports,a),s.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var s=Object.create(null);a.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var i=2&r&&n;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,a.d(s,o),s},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";a(9849),a(1167),a(6831);var e=a(3236),t=a(4143);class n extends Error{constructor(e){super(e),this.name="TimeoutError"}}class r extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const s=e=>void 0===globalThis.DOMException?new r(e):new DOMException(e),o=e=>{const t=void 0===e.reason?s("This operation was aborted."):e.reason;return t instanceof Error?t:s(t)};class i{#e=[];enqueue(e,t){const n={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&this.#e[this.size-1].priority>=t.priority)return void this.#e.push(n);const r=function(e,t){let n=0,r=e.length;for(;r>0;){const s=Math.trunc(r/2);let o=n+s;a=e[o],t.priority-a.priority<=0?(n=++o,r-=s+1):r=s}var a;return n}(this.#e,n);this.#e.splice(r,0,n)}dequeue(){const e=this.#e.shift();return e?.run}filter(e){return this.#e.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this.#e.length}}class c extends t{#t;#n;#r=0;#a;#s;#o=0;#i;#c;#e;#u;#l=0;#d;#f;#p;timeout;constructor(e){if(super(),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:i,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#t=e.carryoverConcurrencyCount,this.#n=e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,this.#a=e.intervalCap,this.#s=e.interval,this.#e=new e.queueClass,this.#u=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#p=!0===e.throwOnTimeout,this.#f=!1===e.autoStart}get#g(){return this.#n||this.#r<this.#a}get#h(){return this.#l<this.#d}#v(){this.#l--,this.#m(),this.emit("next")}#w(){this.#b(),this.#y(),this.#c=void 0}get#I(){const e=Date.now();if(void 0===this.#i){const t=this.#o-e;if(!(t<0))return void 0===this.#c&&(this.#c=setTimeout((()=>{this.#w()}),t)),!0;this.#r=this.#t?this.#l:0}return!1}#m(){if(0===this.#e.size)return this.#i&&clearInterval(this.#i),this.#i=void 0,this.emit("empty"),0===this.#l&&this.emit("idle"),!1;if(!this.#f){const e=!this.#I;if(this.#g&&this.#h){const t=this.#e.dequeue();return!!t&&(this.emit("active"),t(),e&&this.#y(),!0)}}return!1}#y(){this.#n||void 0!==this.#i||(this.#i=setInterval((()=>{this.#b()}),this.#s),this.#o=Date.now()+this.#s)}#b(){0===this.#r&&0===this.#l&&this.#i&&(clearInterval(this.#i),this.#i=void 0),this.#r=this.#t?this.#l:0,this.#_()}#_(){for(;this.#m(););}get concurrency(){return this.#d}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#d=e,this.#_()}async#x(e){return new Promise(((t,n)=>{e.addEventListener("abort",(()=>{n(e.reason)}),{once:!0})}))}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:this.#p,...t},new Promise(((r,a)=>{this.#e.enqueue((async()=>{this.#l++,this.#r++;try{t.signal?.throwIfAborted();let a=e({signal:t.signal});t.timeout&&(a=function(e,t){const{milliseconds:r,fallback:a,message:s,customTimers:i={setTimeout,clearTimeout}}=t;let c;const u=new Promise(((u,l)=>{if("number"!=typeof r||1!==Math.sign(r))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(t.signal){const{signal:n}=t;n.aborted&&l(o(n));const r=()=>{l(o(n))};n.addEventListener("abort",r,{once:!0}),e.finally((()=>{n.removeEventListener("abort",r)}))}if(r===Number.POSITIVE_INFINITY)return void e.then(u,l);const d=new n;c=i.setTimeout.call(void 0,(()=>{if(a)try{u(a())}catch(e){l(e)}else"function"==typeof e.cancel&&e.cancel(),!1===s?u():s instanceof Error?l(s):(d.message=s??`Promise timed out after ${r} milliseconds`,l(d))}),r),(async()=>{try{u(await e)}catch(e){l(e)}})()})).finally((()=>{u.clear()}));return u.clear=()=>{i.clearTimeout.call(void 0,c),c=void 0},u}(Promise.resolve(a),{milliseconds:t.timeout})),t.signal&&(a=Promise.race([a,this.#x(t.signal)]));const s=await a;r(s),this.emit("completed",s)}catch(e){if(e instanceof n&&!t.throwOnTimeout)return void r();a(e),this.emit("error",e)}finally{this.#v()}}),t),this.emit("add"),this.#m()}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this.#f?(this.#f=!1,this.#_(),this):this}pause(){this.#f=!0}clear(){this.#e=new this.#u}async onEmpty(){0!==this.#e.size&&await this.#A("empty")}async onSizeLessThan(e){this.#e.size<e||await this.#A("next",(()=>this.#e.size<e))}async onIdle(){0===this.#l&&0===this.#e.size||await this.#A("idle")}async#A(e,t){return new Promise((n=>{const r=()=>{t&&!t()||(this.off(e,r),n())};this.on(e,r)}))}get size(){return this.#e.size}sizeBy(e){return this.#e.filter(e).length}get pending(){return this.#l}get isPaused(){return this.#f}}const u=function(e,t){return e===t||e!=e&&t!=t},l="object"==typeof global&&global&&global.Object===Object&&global;var d="object"==typeof self&&self&&self.Object===Object&&self;const f=l||d||Function("return this")(),p=f.Symbol;var g=Object.prototype,h=g.hasOwnProperty,v=g.toString,m=p?p.toStringTag:void 0;var w=Object.prototype.toString;var b=p?p.toStringTag:void 0;const y=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":b&&b in Object(e)?function(e){var t=h.call(e,m),n=e[m];try{e[m]=void 0;var r=!0}catch(e){}var a=v.call(e);return r&&(t?e[m]=n:delete e[m]),a}(e):function(e){return w.call(e)}(e)},I=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},_=function(e){if(!I(e))return!1;var t=y(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},x=function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!_(e)};var A=/^(?:0|[1-9]\d*)$/;const T=function(e,t,n){if(!I(n))return!1;var r=typeof t;return!!("number"==r?x(n)&&function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&A.test(e))&&e>-1&&e%1==0&&e<t}(t,n.length):"string"==r&&t in n)&&u(n[t],e)};var O=/\s/;var E=/^\s+/;const S=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&O.test(e.charAt(t)););return t}(e)+1).replace(E,""):e},C=function(e){return null!=e&&"object"==typeof e};var k=/^[-+]0x[0-9a-f]+$/i,j=/^0b[01]+$/i,P=/^0o[0-7]+$/i,R=parseInt;const q=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||C(e)&&"[object Symbol]"==y(e)}(e))return NaN;if(I(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=I(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=S(e);var n=j.test(e);return n||P.test(e)?R(e.slice(2),n?2:8):k.test(e)?NaN:+e};var D=1/0;const M=function(e){var t=function(e){return e?(e=q(e))===D||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0},L=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&T(e,t,n)?(t=0,n=r):(t=null==t?0:M(t),n=void 0===n?r:M(n)),function(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(a);++r<a;)s[r]=e[r+t];return s}(e,t,n)):[]},U=function(e){return e!=e},N=function(e,t,n){return t==t?function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n,r){for(var a=e.length,s=n+(r?1:-1);r?s--:++s<a;)if(t(e[s],s,e))return s;return-1}(e,U,n)};var $=Math.max;const F=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:M(n);return a<0&&(a=$(r+a,0)),N(e,t,a)};var V=a(786);async function z({area:e="local",data:t=null,silent:n=!1}={}){const r={getAvailableRevisions:async({area:e}={})=>(await Promise.resolve().then(a.t.bind(a,8977,19))).revisions[e],getCurrentRevision:async({area:e}={})=>(await browser.storage[e].get("storageVersion")).storageVersion,getRevision:async({area:e,revision:t}={})=>a(7249)(`./${e}/${t}.js`)};return"local"===e&&await async function(){if(await(0,V.Hu)({area:"sync"})){const{storageVersion:e}=await browser.storage.sync.get("storageVersion");if(e&&e.length<14){const{storageVersion:e}=await browser.storage.local.get("storageVersion");if(!e||e.length<14){const e=await browser.storage.sync.get(null);await browser.storage.local.clear(),await browser.storage.local.set(e),await browser.storage.sync.clear()}}}}(),async function(e,{area:t="local",data:n=null,silent:r=!1}={}){return async function(e,{area:t="local",data:n=null,silent:r=!1}={}){const a=await e.getAvailableRevisions({area:t}),s=await e.getCurrentRevision({area:t}),o=(c=null==(i=a)?0:i.length)?i[c-1]:void 0;var i,c;if(s===o)return;const u=L(a,F(a,s)+1,F(a,o)+1);r||console.log(`Migrating storage (${t}): ${s} => ${o}`);for(const a of u){const s=await e.getRevision({area:t,revision:a});r||console.log(`Applying revision (${t}): ${s.revision} - ${s.message}`),await s.upgrade(n)}}(e,{area:t,data:n,silent:r})}(r,{area:e,data:t,silent:n})}a(6658);const H=f["__core-js_shared__"];var G,W=(G=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"";var B=Function.prototype.toString;var J=/^\[object .+?Constructor\]$/,K=Function.prototype,Y=Object.prototype,X=K.toString,Q=Y.hasOwnProperty,Z=RegExp("^"+X.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const ee=function(e){return!(!I(e)||(t=e,W&&W in t))&&(_(e)?Z:J).test(function(e){if(null!=e){try{return B.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t},te=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ee(n)?n:void 0},ne=te(Object,"create");var re=Object.prototype.hasOwnProperty;var ae=Object.prototype.hasOwnProperty;function se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}se.prototype.clear=function(){this.__data__=ne?ne(null):{},this.size=0},se.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},se.prototype.get=function(e){var t=this.__data__;if(ne){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return re.call(t,e)?t[e]:void 0},se.prototype.has=function(e){var t=this.__data__;return ne?void 0!==t[e]:ae.call(t,e)},se.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ne&&void 0===t?"__lodash_hash_undefined__":t,this};const oe=se,ie=function(e,t){for(var n=e.length;n--;)if(u(e[n][0],t))return n;return-1};var ce=Array.prototype.splice;function ue(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ue.prototype.clear=function(){this.__data__=[],this.size=0},ue.prototype.delete=function(e){var t=this.__data__,n=ie(t,e);return!(n<0||(n==t.length-1?t.pop():ce.call(t,n,1),--this.size,0))},ue.prototype.get=function(e){var t=this.__data__,n=ie(t,e);return n<0?void 0:t[n][1]},ue.prototype.has=function(e){return ie(this.__data__,e)>-1},ue.prototype.set=function(e,t){var n=this.__data__,r=ie(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const le=ue,de=te(f,"Map"),fe=function(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map};function pe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pe.prototype.clear=function(){this.size=0,this.__data__={hash:new oe,map:new(de||le),string:new oe}},pe.prototype.delete=function(e){var t=fe(this,e).delete(e);return this.size-=t?1:0,t},pe.prototype.get=function(e){return fe(this,e).get(e)},pe.prototype.has=function(e){return fe(this,e).has(e)},pe.prototype.set=function(e,t){var n=fe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};const ge=pe;function he(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ge;++t<n;)this.add(e[t])}he.prototype.add=he.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},he.prototype.has=function(e){return this.__data__.has(e)};const ve=he,me=function(e,t){return!(null==e||!e.length)&&N(e,t,0)>-1},we=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1},be=function(e,t){return e.has(t)},ye=function(e,t,n,r){var a,s=-1,o=me,i=!0,c=e.length,u=[],l=t.length;if(!c)return u;n&&(t=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}(t,(a=n,function(e){return a(e)}))),r?(o=we,i=!1):t.length>=200&&(o=be,i=!1,t=new ve(t));e:for(;++s<c;){var d=e[s],f=null==n?d:n(d);if(d=r||0!==d?d:0,i&&f==f){for(var p=l;p--;)if(t[p]===f)continue e;u.push(d)}else o(t,f,r)||u.push(d)}return u},Ie=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e},_e=function(e){return C(e)&&"[object Arguments]"==y(e)};var xe=Object.prototype,Ae=xe.hasOwnProperty,Te=xe.propertyIsEnumerable;const Oe=_e(function(){return arguments}())?_e:function(e){return C(e)&&Ae.call(e,"callee")&&!Te.call(e,"callee")},Ee=Array.isArray;var Se=p?p.isConcatSpreadable:void 0;const Ce=function(e){return Ee(e)||Oe(e)||!!(Se&&e&&e[Se])},ke=function e(t,n,r,a,s){var o=-1,i=t.length;for(r||(r=Ce),s||(s=[]);++o<i;){var c=t[o];n>0&&r(c)?n>1?e(c,n-1,r,a,s):Ie(s,c):a||(s[s.length]=c)}return s},je=function(e){return e};var Pe=Math.max;const Re=function(){try{var e=te(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),qe=Re?function(e,t){return Re(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:je;var De=Date.now;const Me=(Le=qe,Ue=0,Ne=0,function(){var e=De(),t=16-(e-Ne);if(Ne=e,t>0){if(++Ue>=800)return arguments[0]}else Ue=0;return Le.apply(void 0,arguments)});var Le,Ue,Ne;const $e=function(e){return C(e)&&x(e)};var Fe=function(e){return Me(function(e,t,n){return t=Pe(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=Pe(r.length-t,0),o=Array(s);++a<s;)o[a]=r[t+a];a=-1;for(var i=Array(t+1);++a<t;)i[a]=r[a];return i[t]=n(o),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,i)}}(e,void 0,je),e+"")}((function(e,t){return $e(e)?ye(e,ke(t,1,$e,!0)):[]}));const Ve=Fe;var ze=a(8618),He=a(4729);const Ge=["engines","disabledEngines","showInContextMenu","searchAllEnginesContextMenu","searchAllEnginesAction","showPageAction","tabInBackgound","searchModeAction","searchModeContextMenu","showEngineIcons","openCurrentDocContextMenu","appTheme","showContribPage","pinActionToolbarOpenCurrentDoc","pinActionToolbarOptions","pinActionToolbarContribute"],We={archiveOrg:{target:"https://web.archive.org/web/{url}"},archiveOrgAll:{target:"https://web.archive.org/web/*/{url}"},yandex:{target:"https://www.yandex.com/",isExec:!0},archiveIs:{target:"https://archive.is/newest/{url}"},archiveIsAll:{target:"https://archive.is/{url}"},memento:{target:"http://timetravel.mementoweb.org/memento/{date}/{url}"},megalodon:{target:"https://megalodon.jp/?url={url}",isExec:!0},permacc:{target:browser.runtime.getURL("/src/search/index.html")+"?id={id}",isTaskId:!0},ghostarchive:{target:"https://ghostarchive.org/search?term={url}",isExec:!0},webcite:{target:"https://webcitation.org/query?url={url}&date={date}"}},Be={archiveOrgAll:"archiveOrg",archiveIsAll:"archiveIs"},Je={archiveOrg:["dark"],archiveIs:["dark"],webcite:["dark"]},Ke=["ghostarchive"],Ye=[400,403,404,408,410,429,451,500,502,503,504,444,450,509,530,598,520,521,522,523,524,525,526,527],Xe={archiveOrg:["web.archive.org"],archiveIs:["archive.is","archive.today","archive.ph","archive.vn","archive.fo","archive.li","archive.md","archiveiya74codqgiixo33q62qlrqtkgmcitqx5u2oeqnmn5bpcbiyd.onion"],yandex:["yandexwebcache.net"],permacc:["perma.cc","rejouer.perma.cc"],megalodon:["megalodon.jp"],ghostarchive:["ghostarchive.org"],webcite:["webcitation.org"]},Qe={archiveOrg:["web.archive.org"],archiveIs:["archive.is","archive.today","archive.ph","archive.vn","archive.fo","archive.li","archive.md","archiveiya74codqgiixo33q62qlrqtkgmcitqx5u2oeqnmn5bpcbiyd.onion"],permacc:["rejouer.perma.cc"],megalodon:["megalodon.jp"],ghostarchive:["ghostarchive.org"]},Ze={archiveOrg:/^https?:\/\/web\.archive\.org\/web\/[0-9]+\/(.*)/i,archiveIs:/^https?:\/\/(?:archive\.(?:is|today|ph|vn|fo|li|md)|archiveiya74codqgiixo33q62qlrqtkgmcitqx5u2oeqnmn5bpcbiyd.onion)\/o\/.*?\/(.*)/i,permacc:/^https:\/\/rejouer\.perma\.cc\/(?:.*)\/mp_\/(.*)/i,megalodon:/https?:\/\/megalodon\.jp\/(?:\d+-)+\d+\/(.*)/i,ghostarchive:/^https:\/\/ghostarchive\.org\/(?:.*)\/mp_\/(.*)/i};async function et(e){return void 0===e&&(e=await V.Ay.get(["engines","disabledEngines"])),Ve(e.engines,e.disabledEngines)}async function tt({message:e,messageId:t,title:n,type:r="info",timeout:a=0}={}){if(n||(n=(0,ze.q4)("extensionName")),t&&(e=(0,ze.q4)(t)),"safari"===He.Dm)return browser.runtime.sendNativeMessage("application.id",{id:"notification",message:e});{const t=await browser.notifications.create(`wa-notification-${r}`,{type:"basic",title:n,message:e,iconUrl:"/src/assets/icons/app/icon-64.png"});return a&&self.setTimeout((()=>{browser.notifications.clear(t)}),a),t}}async function nt({activeTab:e=!1}={}){const t=[];if(e){const e=await(0,ze.e6)();e&&t.push(e)}else t.push(...await browser.tabs.query({url:["http://*/*","https://*/*"],windowType:"normal"}));for(const e of t)(0,ze.HG)({files:["/src/base/script.js"],tabId:e.id,allFrames:!1})}async function rt({url:e="",setOpenerTab:t=!0,getTab:n=!1,activeTab:r=null}={}){r||(r=await(0,ze.e6)());const a={url:e,index:r.index+1,active:!0,getTab:n};return t&&(a.openerTabId=await async function({tab:e,tabId:t=null}={}){return e||null===t||(e=await browser.tabs.get(t).catch((e=>null))),await(0,ze.kL)({tab:e})&&!(await(0,ze.uo)()).isMobile?e.id:null}({tab:r})),(0,ze.aI)(a)}let at,st=0;async function ot({action:e="auto",activeTab:t=null,showContribPage:n=!0}={}){if(await async function({valueChange:e=1,maxUseCount:t=1/0,minInterval:n=0}={}){if(Date.now()-st>=n){st=Date.now();const{useCount:n}=await V.Ay.get("useCount");n<t?await V.Ay.set({useCount:n+e}):n>t&&await V.Ay.set({useCount:t})}}({valueChange:1,maxUseCount:1e3}),n)return async function({minUseCount:e=0,minInstallDays:t=0,minLastOpenDays:n=0,minLastAutoOpenDays:r=0,action:a="auto",activeTab:s=null}={}){if(He.ZY){const o=await V.Ay.get(["showContribPage","useCount","installTime","contribPageLastOpen","contribPageLastAutoOpen"]),i=(0,ze.I4)();if(o.showContribPage&&o.useCount>=e&&i-o.installTime>=864e5*t&&i-o.contribPageLastOpen>=864e5*n&&i-o.contribPageLastAutoOpen>=864e5*r)return await V.Ay.set({contribPageLastOpen:i,contribPageLastAutoOpen:i}),async function({action:e="",updateStats:t=!0,getTab:n=!1,activeTab:r=null}={}){t&&await V.Ay.set({contribPageLastOpen:(0,ze.I4)()});let a=browser.runtime.getURL("/src/contribute/index.html");return e&&(a=`${a}?action=${e}`),rt({url:a,getTab:n,activeTab:r})}({action:a,updateStats:!1,activeTab:s,getTab:!0})}}({minUseCount:10,minInstallDays:14,minLastOpenDays:14,minLastAutoOpenDays:365,activeTab:t,action:e})}function it({count:e=1,reserved:t=!1}={}){const n=[];let r,a;for(t?(r=1,a=1e8):(r=100000001,a=["firefox","safari"].includes(He.Dm)?Number.MAX_SAFE_INTEGER:2147483647);;){const t=(0,ze.hw)(r,a);if(n.includes(t)||n.push(t),n.length===e)break}return n}function ct(e,{variant:t=""}={}){let n=e=Be[e]||e;return t&&Je[e]?.includes(t)&&(n+=`-${t}`),Ke.includes(e)?{16:`src/assets/icons/engines/${n}-16.png`,32:`src/assets/icons/engines/${n}-32.png`}:{16:`src/assets/icons/engines/${n}.svg`}}function ut(e){try{if(e.length>2048)return;const t=new URL(e);if(/^(?:https?|ftp):$/i.test(t.protocol))return!0}catch(e){}}var lt=a(4719);function dt(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function ft(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=dt(n);return(e,n)=>r.then((r=>n(r.transaction(t,e).objectStore(t))))}let pt;function gt(){return pt||(pt=ft("keyval-store","keyval")),pt}function ht(e,t,n=gt()){return n("readwrite",(n=>(n.put(t,e),dt(n.transaction))))}const vt=new c({concurrency:1}),mt=new c({concurrency:1}),wt=new class{constructor(){this.idbStore=null,this.memoryStore=null}initStore({area:e="",force:t=!1}={}){"indexeddb"===e?this.idbStore&&!t||(this.idbStore=ft("keyval-store","keyval")):"memory"===e&&(this.memoryStore||(this.memoryStore={}))}handleError(e,{area:t=""}={}){if("indexeddb"!==t||!e?.message?.includes("connection is closing"))throw e;console.log("IndexedDB error:",e.message),this.initStore({area:t,force:!0})}async get(e,{area:t=""}={}){if(this.initStore({area:t}),"indexeddb"===t)try{return await function(e,t=gt()){return t("readonly",(t=>dt(t.get(e))))}(e,this.idbStore)}catch(e){this.handleError(e,{area:t})}else{if("local"===t)return(await V.Ay.get(e))[e];if("memory"===t)return this.memoryStore[e]}}async set(e,t,{area:n=""}={}){if(this.initStore({area:n}),"indexeddb"===n)try{await ht(e,t,this.idbStore)}catch(r){this.handleError(r,{area:n}),await ht(e,t,this.idbStore)}else"local"===n?await V.Ay.set({[e]:t}):"memory"===n&&(this.memoryStore[e]=t)}async remove(e,{area:t=""}={}){if(this.initStore({area:t}),"indexeddb"===t)try{await function(e,t=gt()){return t("readwrite",(t=>(t.delete(e),dt(t.transaction))))}(e,this.idbStore)}catch(e){this.handleError(e,{area:t})}else"local"===t?await V.Ay.remove(e):"memory"===t&&delete this.memoryStore[e]}};function bt(e){return{metadataKey:`metadata_${e}`,dataKey:`data_${e}`}}async function yt({storageId:e,metadata:t=!1,data:n=!1,area:r="local"}={}){const{metadataKey:a,dataKey:s}=bt(e);return t&&({value:t}=await wt.get(a,{area:"local"})||{}),n&&({value:n}=await wt.get(s,{area:r})||{}),{metadata:t,data:n}}async function It({storageId:e,metadata:t=null,data:n=null,area:r="local"}={}){const{metadataKey:a,dataKey:s}=bt(e);null!==t&&await wt.set(a,{value:t},{area:"local"}),null!==n&&await wt.set(s,{value:n},{area:r})}async function _t({storageId:e,metadata:t=!1,data:n=!1,area:r="local"}={}){const{metadataKey:a,dataKey:s}=bt(e);t&&await wt.remove(a,{area:"local"}),n&&await wt.remove(s,{area:r})}async function xt({storageId:e,registry:t=!0}={}){const{metadata:n}=await yt({storageId:e,metadata:!0});if(n){await _t({storageId:e,data:!0,area:n.area});for(const e of n.alarms)await browser.alarms.clear(e);await _t({storageId:e,metadata:!0}),t&&(n.isTask&&await async function({taskId:e}={}){await mt.add((async function(){const{taskRegistry:t}=await V.Ay.get("taskRegistry"),n=t.tasks[e];if(n){const r=t.tabs[n.tabId];r&&r.taskId===e&&delete t.tabs[n.tabId]}delete t.tasks[e],await V.Ay.set({taskRegistry:t})}))}({taskId:e}),await async function({storageId:e}={}){await mt.add((async function(){const{storageRegistry:t}=await V.Ay.get("storageRegistry");delete t[e],await V.Ay.set({storageRegistry:t})}))}({storageId:e}))}}async function At({storageId:e}={}){await vt.add((async function(){const{metadata:t}=await yt({storageId:e,metadata:!0});t&&t.receipts&&(t.receipts.received+=1,t.receipts.received<t.receipts.expected?await It({storageId:e,metadata:t}):await xt({storageId:e}))}))}const Tt={addStorageItem:async function(t,{token:n="",receipts:r=null,expiryTime:a=0,area:s="local",isTask:o=!1}={}){const i=n||(0,e.A)(),c=Date.now(),u={area:s,addTime:c,receipts:r,alarms:[],isTask:o};if(a){const e=`delete-storage-item_${i}`;browser.alarms.create(e,{delayInMinutes:a}),u.alarms.push(e)}return await async function({storageId:e,addTime:t}={}){await mt.add((async function(){const{storageRegistry:n}=await V.Ay.get("storageRegistry");n[e]={addTime:t},await V.Ay.set({storageRegistry:n})}))}({storageId:i,addTime:c}),await It({storageId:i,metadata:u,data:t,area:s}),i},getStorageItem:async function({storageId:e,saveReceipt:t=!1}={}){const{metadata:n}=await yt({storageId:e,metadata:!0});if(n){const{data:r}=await yt({storageId:e,data:!0,area:n.area});if(r)return t&&await At({storageId:e}),r}},deleteStorageItem:xt,saveStorageItemReceipt:At,addTaskRegistryItem:async function({taskId:e,tabId:t}={}){await mt.add((async function(){const{taskRegistry:n}=await V.Ay.get("taskRegistry"),r=Date.now();n.lastTaskStart=r,n.tabs[t]={taskId:e},n.tasks[e]={tabId:t,addTime:r},await V.Ay.set({taskRegistry:n})}))},getTaskRegistryItem:async function({taskId:e,tabId:t}={}){const{taskRegistry:n}=await V.Ay.get("taskRegistry");if(t){let e=n.tabs[t];if(!e&&["safari"].includes(He.Dm)){const r=await async function(e){return(0,ze.JU)("tab_revisions",(async()=>{const{tabRevisions:t}=await V.Ay.get("tabRevisions",{area:"session"});for(const n of t)if(n.includes(e))return n;return null}))}(t);if(r)for(const t of r)if(e=n.tabs[t],e)break}if(e)return{taskId:e.taskId,...n.tasks[e.taskId]}}else if(e){const t=n.tasks[e];if(t)return{taskId:e,...t}}},cleanupRegistry:async function(){await mt.add((async function(){const{lastStorageCleanup:e}=await V.Ay.get("lastStorageCleanup");if(Date.now()-e>864e5){const{taskRegistry:e}=await V.Ay.get("taskRegistry");for(const[t,n]of Object.entries(e.tasks))if(Date.now()-n.addTime>36e5){const r=e.tabs[n.tabId];r&&r.taskId===t&&delete e.tabs[n.tabId],delete e.tasks[t]}await V.Ay.set({taskRegistry:e});const{storageRegistry:t}=await V.Ay.get("storageRegistry");for(const[e,n]of Object.entries(t))Date.now()-n.addTime>36e5&&(await xt({storageId:e,registry:!1}),delete t[e]);await V.Ay.set({storageRegistry:t,lastStorageCleanup:Date.now()})}}))}},Ot=new c({concurrency:1});async function Et(e,t){if(He.tn){const n=it();await browser.declarativeNetRequest.updateSessionRules({removeRuleIds:n,addRules:[{id:n[0],action:{type:"modifyHeaders",requestHeaders:[{header:"User-Agent",operation:"set",value:t}]},condition:{tabIds:[e],resourceTypes:["font","image","main_frame","media","ping","script","stylesheet","sub_frame","websocket","xmlhttprequest","other"]}}]})}else{const n=function(e){for(const n of e.requestHeaders)if("user-agent"===n.name.toLowerCase()){n.value=t;break}return{requestHeaders:e.requestHeaders}};browser.webRequest.onBeforeSendHeaders.addListener(n,{urls:["http://*/*","https://*/*"],tabId:e},["blocking","requestHeaders"])}}async function St(e){return new Promise(((t,n)=>{let r;r=browser.contextMenus.create(e,(function(){browser.runtime.lastError&&n(browser.runtime.lastError),t(r)}))}))}async function Ct(e,{throwError:t=!1}={}){try{await browser.contextMenus.remove(e)}catch(e){if(t)throw e}}async function kt(){const e={name:"private",active:browser.extension.inIncognitoContext},{menuItems:t}=await V.Ay.get("menuItems",{context:e});for(const e of t)await Ct(e);const{showInContextMenu:n}=await V.Ay.get("showInContextMenu"),r="false"!==n?await async function(){const e=await(0,ze.uo)(),t=await V.Ay.get(Ge),n=["link"];"all"===t.showInContextMenu&&(n.push("audio","editable","frame","image","selection","video"),e.isFirefox&&n.push("password"),e.isAndroid||n.push("page"));const r=e.isFirefox&&t.showEngineIcons;let a;r&&(a=await async function(e){return e||({appTheme:e}=await V.Ay.get("appTheme")),"auto"===e&&(e=(0,ze.T6)().matches?"dark":"light"),e}(t.appTheme));const s=!e.isSamsung&&t.searchAllEnginesContextMenu,o=await et(t),i=[];if(1===o.length){const e=o[0];i.push(await Pt({id:`search_${o[0]}_1`,title:(0,ze.q4)("mainMenuItemTitle_engine",(0,ze.q4)(`menuItemTitle_${e}`)),contexts:n}))}else if(o.length>1&&"main"===s)i.push(await Pt({id:"search_allEngines_1",title:(0,ze.q4)("mainMenuItemTitle_allEngines"),contexts:n}));else if(o.length>1){if(t.openCurrentDocContextMenu){const t=Object.values(Xe).map((e=>e.map((e=>`*://${e}/*`)))).flat(),r=Object.values(Qe).map((e=>e.map((e=>`*://${e}/*`)))).flat();i.push(await Pt({id:"openCurrentDoc_1",title:(0,ze.q4)("menuItemTitle_openCurrentDoc"),contexts:n,documentUrlPatterns:t,targetUrlPatterns:r})),e.isSamsung||i.push(await Pt({id:"sep_1",contexts:n,type:"separator",documentUrlPatterns:t,targetUrlPatterns:r}))}"sub"===s&&(i.push(await Pt({id:"search_allEngines_1",title:(0,ze.q4)("menuItemTitle_allEngines"),contexts:n,icons:r&&ct("allEngines",{variant:a})})),e.isSamsung||i.push(await Pt({id:"sep_2",contexts:n,type:"separator"})));for(const e of o){const t=(0,ze.q4)(`menuItemTitle_${e}`),s=r&&ct(e,{variant:a});i.push(await Pt({id:`search_${e}_1`,title:t,contexts:n,icons:s}))}}return i}():[];await V.Ay.set({menuItems:r.map((e=>e.id))},{context:e});try{for(const e of r)await St(e)}catch(e){await async function(){await browser.contextMenus.removeAll()}();for(const e of r)await St(e);throw(0,ze.Jh)("createMenuError")&&await jt(),e}}async function jt(){["chrome","edge","opera"].includes(He.Dm)&&await V.Ay.set({menuChangeEvent:Date.now()},{area:He.tn?"session":"local",context:{name:"private",active:!browser.extension.inIncognitoContext}})}async function Pt({id:e,title:t="",contexts:n,parent:r,type:a="normal",documentUrlPatterns:s,targetUrlPatterns:o,icons:i}){const c={id:e,title:t,contexts:n,parentId:r,type:a};return browser.extension.inIncognitoContext&&(c.id+="_private"),s&&(c.documentUrlPatterns=s),o&&(c.targetUrlPatterns=o),i&&(c.icons=i),c}async function Rt(e){const t={sessionOrigin:"",sessionType:"search",searchMode:"",sourceTabId:-1,sourceTabIndex:-1,sourceFrameId:-1,engineGroup:"",engines:[],options:{}};if(t.options=await V.Ay.get(Ge),e.options&&(Object.assign(t.options,e.options),delete e.options),e.engine){if("allEngines"===e.engine){const e=await et(t.options);t.engineGroup="allEngines",t.engines=e}else t.engines.push(e.engine);delete e.engine}return Object.assign(t,e),t.searchMode||(t.searchMode="action"===t.sessionOrigin?t.options.searchModeAction:t.options.searchModeContextMenu),t}async function qt(e,t){["chrome","opera"].includes(He.Dm)&&async function(){if(/ opr\//i.test(navigator.userAgent)){const{lastEngineAccessCheck:e}=await V.Ay.get("lastEngineAccessCheck");if(Date.now()-e>6048e5){await V.Ay.set({lastEngineAccessCheck:Date.now()});const e="https://www.google.com/generate_204";let t=!1;if(He.tn){const n=it({reserved:!0});await browser.declarativeNetRequest.updateSessionRules({removeRuleIds:n,addRules:[{id:n[0],action:{type:"redirect",redirect:{transform:{path:""}}},condition:{urlFilter:e,initiatorDomains:[(0,ze.wT)()],resourceTypes:["xmlhttprequest"]}}]});const r=await fetch(e,{redirect:"manual",credentials:"omit"}).catch((e=>null));r&&"opaqueredirect"===r.type&&(t=!0),await browser.declarativeNetRequest.updateSessionRules({removeRuleIds:n})}else await new Promise((n=>{function r(){return t=!0,a(),{cancel:!0}}const a=function(){self.clearTimeout(s),browser.webRequest.onBeforeRequest.removeListener(r),n()},s=self.setTimeout(a,3e3);browser.webRequest.onBeforeRequest.addListener(r,{urls:[e],types:["xmlhttprequest"]},["blocking"]),fetch(e).catch((e=>null))}));t||await tt({messageId:"error_noSearchEngineAccess"})}}}(),Array.isArray(t)||(t=[t]);const n=await browser.tabs.get(e.sourceTabId);e.sourceTabIndex=n.index;let r=!0;for(const n of t)await Dt(e,n,r),r=!1}async function Dt(e,t,n=!0){if(!ut(t.docUrl))return void await tt({messageId:"error_invalidPageUrl"});let r,a=n;if(n){const t=await ot();t&&(r=t.id,e.sourceTabIndex=t.index,a=!1)}a=!e.options.tabInBackgound&&a;const s=await async function(e){const t=[];for(const n of e){const e=We[n].isExec,r=We[n].isTaskId;t.push({engine:n,isExec:e,isTaskId:r,sendsReceipt:e||r})}return t}(e.engines),o=s.filter((e=>e.sendsReceipt));let i;o.length&&(i=await Tt.addStorageItem(t,{receipts:{expected:o.length,received:0},expiryTime:10,area:"indexeddb"}));for(const n of s)e.sourceTabIndex+=1,await Mt(e,n,t,i,a),a=!1;await(0,ze.m0)()&&r&&await browser.tabs.update(r,{active:!0})}async function Mt(t,n,r,a,s){let o;n.sendsReceipt&&(o=await Tt.addStorageItem({session:t,search:n,docId:a},{receipts:{expected:1,received:0},expiryTime:10,isTask:!0}));const i=(0,e.A)(),c="samsung"===He.Dm?(0,e.A)():"",u=await async function(e,t,n,r){const a=t.engine;let s=We[a].target;t.isTaskId&&(s=s.replace("{id}",r));let o=n.docUrl;if(["archiveOrg","archiveOrgAll"].includes(t.engine)&&(o=function(e){const t=new URL(e);return t.hash&&(t.hash=""),t.toString()}(o)),["archiveOrg","archiveOrgAll","archiveIs","archiveIsAll","memento"].includes(a)||(o=encodeURIComponent(o)),"memento"===a){const e=new Date;e.setUTCMinutes(e.getUTCMinutes()-1),s=s.replace("{date}",e.toISOString().split(".")[0].replace(/[-T:]/g,""))}else"webcite"===a&&(s=s.replace("{date}",(new Date).toISOString().split("T")[0]));return s=s.replace(/{url}/g,o),s}(0,n,r,o),l=[],d=await async function(e){if(await(0,ze.Fr)()&&["yandex"].includes(e))return"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"}(n.engine);d&&l.push({id:"setUserAgent",tabUrl:u,userAgent:d,beaconToken:c}),n.sendsReceipt&&l.push({id:"addTask",taskId:o});const f={tabUrl:c?(0,ze.bY)(c):u,keepHistory:!1};l.length&&(f.setupSteps=l),await Tt.addStorageItem(f,{receipts:{expected:1,received:0},expiryTime:1,token:i}),c&&await Tt.addStorageItem({tabUrl:u,keepHistory:!1},{receipts:{expected:1,received:0},expiryTime:1,token:c}),await(0,ze.aI)({token:i,index:t.sourceTabIndex,active:s})}async function Lt({tabId:e,tabUrl:t,userAgent:n,beaconToken:r}={}){if("samsung"===He.Dm){function a(e){s(),Et(e.tabId,n)}const s=function(){window.clearTimeout(o),browser.webRequest.onBeforeRequest.removeListener(a)},o=window.setTimeout(s,1e4);browser.webRequest.onBeforeRequest.addListener(a,{urls:[(0,ze.bY)(r)],types:["main_frame"]},["blocking"])}else await Et(e,n)}async function Ut({linkUrl:e}={}){if(e){let t;for(const[n,r]of Object.entries(Ze)){const n=e.match(r);if(n){t=n[1].trim();break}}if(ut(t))return rt({url:t});await tt({messageId:"error_currentDocUrlNotFound"})}else{const e=await(0,ze.e6)();await async function({tabId:e,frameId:t=0,module:n,insert:r=!1}={}){try{const[a]=await(0,ze.HG)({func:e=>self.runStore?.[`${e}Module`],args:[n],code:`self.runStore?.['${n}Module']`,tabId:e,frameIds:[t]});if(!a&&r&&await(0,ze.HG)({files:[`/src/${n}/script.js`],tabId:e,frameIds:[t]}),a||r)return!0}catch(e){console.log(e)}return!1}({tabId:e.id,module:"tools",insert:!0})?await(0,ze.HG)({func:()=>self.openCurrentDoc(),code:"self.openCurrentDoc()",tabId:e.id}):await tt({messageId:"error_scriptsNotAllowed"})}}async function Nt(e,t){qt(e,{docUrl:t})}async function $t(e){"samsung"===He.Dm&&await(0,ze.kL)({tab:e})&&(e=await browser.tabs.get(e.id));const t=await Rt({sessionOrigin:"action",sourceTabId:e.id,sourceTabIndex:e.index});if("url"===t.searchMode)return void await tt({messageId:await(0,ze.Fr)()?"error_invalidSearchModeMobile_url":"error_invalidSearchMode_url"});const n=await et(t.options);n.length?("main"===t.options.searchAllEnginesAction&&n.length>1?(t.engineGroup="allEngines",t.engines=n):t.engines.push(n[0]),Nt(t,e.url)):await tt({messageId:"error_allEnginesDisabled"})}async function Ft(){await kt(),await jt()}async function Vt(){const e=await V.Ay.get(["engines","disabledEngines","searchAllEnginesAction"]),t=await et(e),n=He.tn?browser.action:browser.browserAction;return 1===t.length?(n.setTitle({title:(0,ze.q4)("actionTitle_engine",(0,ze.q4)(`engineName_${t[0]}`))}),void n.setPopup({popup:""})):"main"===e.searchAllEnginesAction&&t.length>1?(n.setTitle({title:(0,ze.q4)("actionTitle_allEngines")}),void n.setPopup({popup:""})):(n.setTitle({title:(0,ze.q4)("extensionName")}),void(0===t.length?n.setPopup({popup:""}):n.setPopup({popup:"/src/action/index.html"})))}async function zt(e){await async function(e){const t=await V.Ay.get(["engines","disabledEngines","searchAllEnginesAction"]),n=await et(t),r=browser.pageAction.onClicked.hasListener($t);return 1===n.length?(r||browser.pageAction.onClicked.addListener($t),browser.pageAction.setTitle({tabId:e,title:(0,ze.q4)("actionTitle_engine",(0,ze.q4)(`engineName_${n[0]}`))}),void browser.pageAction.setPopup({tabId:e,popup:""})):"main"===t.searchAllEnginesAction&&n.length>1?(r||browser.pageAction.onClicked.addListener($t),browser.pageAction.setTitle({tabId:e,title:(0,ze.q4)("actionTitle_allEngines")}),void browser.pageAction.setPopup({tabId:e,popup:""})):(browser.pageAction.setTitle({tabId:e,title:(0,ze.q4)("extensionName")}),void(0===n.length?(r||browser.pageAction.onClicked.addListener($t),browser.pageAction.setPopup({tabId:e,popup:""})):(r&&browser.pageAction.onClicked.removeListener($t),browser.pageAction.setPopup({tabId:e,popup:"/src/action/index.html"}))))}(e),await browser.pageAction.show(e)}async function Ht(e){Ye.includes(e.statusCode)&&await zt(e.tabId)}async function Gt(e){await zt(e.tabId)}async function Wt(){const{showPageAction:e}=await V.Ay.get("showPageAction"),t=browser.webRequest.onCompleted.hasListener(Ht);if(e){if(!t){const e={types:["main_frame"],urls:["http://*/*","https://*/*"]};browser.webRequest.onCompleted.addListener(Ht,e),browser.webRequest.onErrorOccurred.addListener(Gt,e)}}else t&&(browser.webRequest.onCompleted.removeListener(Ht),browser.webRequest.onErrorOccurred.removeListener(Gt))}async function Bt(){const e=[Vt];await async function(){if(await(0,ze.m0)()){if("samsung"===He.Dm)return!0}else if(browser.contextMenus)return!0;return!1}()&&e.push(Ft),"firefox"!==He.Dm||await(0,ze.m0)()||e.push(Wt),await Ot.addAll(e)}async function Jt({event:e=""}={}){const t=await async function({event:e=""}={}){at||(at=async function(){const e={install:!1,update:!1,session:!1,setupInstance:!1,setupSession:!1},{storageVersion:t,appVersion:n}=await browser.storage.local.get(["storageVersion","appVersion"]);return t||(e.install=!0),t===He.QB.local&&n===He.CU||(e.update=!0),He.tn&&await async function(){const e=browser.extension.inIncognitoContext,t=e?"privateSession":"session",n=(await browser.storage.session.get(t))[t];if(n||await browser.storage.session.set({[t]:!0}),e)try{if(!await self.caches.has(t))return await self.caches.open(t),!0}catch(e){return!0}if(!n)return!0}()&&(e.session=!0),(e.install||e.update)&&(e.setupInstance=!0),!e.session&&He.tn||(e.setupSession=!0),e}(),at.events=[]),e&&at.events.push(e);const t=await at;return at.events.includes("install")&&(t.setupInstance=!0),at.events.includes("startup")&&(t.setupSession=!0),t}({event:e});t.setupInstance&&await(0,ze.Jh)("setupInstance",(async()=>{await(0,V.XL)()||await z({data:t}),["chrome","edge","opera","samsung"].includes(He.Dm)&&await nt(),t.update&&await async function(){await V.Ay.set({appVersion:He.CU})}()})),t.setupSession&&await(0,ze.Jh)("setupSession",(async()=>{He.tn&&!await(0,V.XL)({area:"session"})&&await z({area:"session",silent:!0}),["samsung"].includes(He.Dm)&&!t.setupInstance&&await nt({activeTab:!0}),await Bt(),await Tt.cleanupRegistry()}))}browser.contextMenus&&browser.contextMenus.onClicked.addListener((async function(e,t){"samsung"===He.Dm&&await(0,ze.kL)({tab:t})&&(t=await browser.tabs.get(t.id));const[n,r]=e.menuItemId.split("_");if("openCurrentDoc"===n)return void await Ut({linkUrl:e.linkUrl});const a={sessionOrigin:"context",sessionType:n,sourceTabId:t.id,sourceTabIndex:t.index,sourceFrameId:void 0!==e.frameId?e.frameId:0};"search"===n&&(a.engine=r),qt(await Rt(a),{docUrl:e.linkUrl||e.pageUrl})})),He.tn?browser.action.onClicked.addListener($t):browser.browserAction.onClicked.addListener($t),browser.runtime.onMessage.addListener((function(e,t,n){return function(e,t){return"safari"===He.Dm?(e.then((function(e){void 0===e&&(e=null),t(e)})),!0):e}(async function(e,t){if(t.url!==self.location.href)if("samsung"===He.Dm&&(/^internet-extension:\/\/.*\/src\/action\/index.html/.test(t.tab?.url)&&(t.tab=null),await(0,ze.kL)({tab:t.tab})&&(t.tab=await browser.tabs.get(t.tab.id))),"actionPopupSubmit"===e.id&&async function(e,t){const n=await(0,ze.e6)();Nt(await Rt({sessionOrigin:"action",sourceTabId:n.id,sourceTabIndex:n.index,engine:e}),t||n.url)}(e.engine,e.docUrl),"openCurrentDoc"===e.id)Ut();else if("notification"===e.id)tt({message:e.message,messageId:e.messageId,title:e.title,type:e.type});else{if("getPlatform"===e.id)return(0,ze.uo)();if("storageRequest"===e.id){const n=await Tt.getStorageItem({storageId:e.storageId,saveReceipt:e.saveReceipt});if(n){if(e.asyncResponse)return Promise.resolve(n);browser.tabs.sendMessage(t.tab.id,{id:"storageResponse",storageItem:n},{frameId:t.frameId})}}else if("storageReceipt"===e.id)for(const t of e.storageIds)await Tt.saveStorageItemReceipt({storageId:t});else if("taskRequest"===e.id){const e=await Tt.getTaskRegistryItem({tabId:t.tab.id});if(e&&Date.now()-e.addTime<6e5){const n=await Tt.getStorageItem({storageId:e.taskId});n&&n.search.isExec&&async function(e,t,n){await(0,ze.HG)({func:e=>self.taskId=e,args:[n],code:`self.taskId = '${n}'`,tabId:e}),await(0,ze.HG)({files:["/src/commons-engine/script.js"],tabId:e}),await(0,ze.HG)({files:[`/src/engines/${t}/script.js`],tabId:e})}(t.tab.id,n.search.engine,e.taskId)}}else if("optionChange"===e.id)await async function(){await Bt()}();else if("showPage"===e.id)await rt({url:e.url});else{if("setupTab"===e.id)return async function(e,t){const n={};for(const r of t)"setUserAgent"===r.id?(await Lt({tabId:e.tab.id,tabUrl:r.tabUrl,userAgent:r.userAgent,beaconToken:r.beaconToken}),n[r.id]=""):"addTask"===r.id&&(await Tt.addTaskRegistryItem({taskId:r.taskId,tabId:e.tab.id}),n[r.id]="");return n}(t,e.steps);if("executeScript"===e.id){const n=e.params;return e.setSenderTabId&&(n.tabId=t.tab.id),e.setSenderFrameId&&(n.frameIds=[t.frameId]),n.func&&(n.func=(0,lt.y)(n.func)),(0,ze.HG)(n)}}}}(e,t),n)})),browser.storage.onChanged.addListener((async function(e,t){if(await(0,V.XL)({area:He.tn?"session":"local"})){const t=(0,V.eK)("menuChangeEvent",{name:"private",active:browser.extension.inIncognitoContext});e[t]?.newValue&&await Ot.add(kt)}})),browser.alarms.onAlarm.addListener((async function({name:e}){if(e.startsWith("delete-storage-item")){const[t,n]=e.split("_");await Tt.deleteStorageItem({storageId:n})}})),browser.runtime.onInstalled.addListener((async function(e){["install","update"].includes(e.reason)&&await Jt({event:"install"})})),browser.runtime.onStartup.addListener((async function(){await Jt({event:"startup"})})),["safari"].includes(He.Dm)&&browser.tabs.onReplaced.addListener((async function(e,t){await async function({addedTabId:e,removedTabId:t}={}){return(0,ze.JU)("tab_revisions",(async()=>{const{tabRevisions:n}=await V.Ay.get("tabRevisions",{area:"session"});let r=!1;for(const a of n)if(a.includes(t)){a.push(e),r=!0;break}r||n.push([t,e]),await V.Ay.set({tabRevisions:n},{area:"session"})}))}({addedTabId:e,removedTabId:t})})),Jt()})()})();