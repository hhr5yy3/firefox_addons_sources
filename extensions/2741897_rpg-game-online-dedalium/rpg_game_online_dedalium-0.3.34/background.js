/*! For license information please see background.js.LICENSE.txt */
!function(){var e={537:function(e){function r(e){this.message=e}r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,s=0,a=0,i="";o=t.charAt(a++);~o&&(n=s%4?64*n+o:o,s++%4)?i+=String.fromCharCode(255&n>>(-2*s&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return i}},229:function(e,r,t){var n=t(537);e.exports=function(e){var r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(n(e).replace(/(.)/g,(function(e,r){var t=r.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t})))}(r)}catch(e){return n(r)}}},857:function(e,r,t){"use strict";var n=t(229);function o(e){this.message=e}o.prototype=new Error,o.prototype.name="InvalidTokenError",e.exports=function(e,r){if("string"!=typeof e)throw new o("Invalid token specified");var t=!0===(r=r||{}).header?0:1;try{return JSON.parse(n(e.split(".")[t]))}catch(e){throw new o("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=o},921:function(e,r){var t,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,t=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const r="The message port closed before a response was received.",t=e=>{const t={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(t).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(e,r=void 0){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const o=(r,t)=>(...n)=>{e.runtime.lastError?r.reject(new Error(e.runtime.lastError.message)):t.singleCallbackArg||n.length<=1&&!1!==t.singleCallbackArg?r.resolve(n[0]):r.resolve(n)},s=e=>1==e?"argument":"arguments",a=(e,r,t)=>new Proxy(r,{apply(r,n,o){return t.call(n,e,...o)}});let i=Function.call.bind(Object.prototype.hasOwnProperty);const c=(e,r={},t={})=>{let n=Object.create(null),g={has(r,t){return t in e||t in n},get(g,l,m){if(l in n)return n[l];if(!(l in e))return;let u=e[l];if("function"==typeof u)if("function"==typeof r[l])u=a(e,e[l],r[l]);else if(i(t,l)){let r=((e,r)=>function(t,...n){if(n.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${s(r.minArgs)} for ${e}(), got ${n.length}`);if(n.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${s(r.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((s,a)=>{if(r.fallbackToNoCallback)try{t[e](...n,o({resolve:s,reject:a},r))}catch(o){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),t[e](...n),r.fallbackToNoCallback=!1,r.noCallback=!0,s()}else r.noCallback?(t[e](...n),s()):t[e](...n,o({resolve:s,reject:a},r))}))})(l,t[l]);u=a(e,e[l],r)}else u=u.bind(e);else if("object"==typeof u&&null!==u&&(i(r,l)||i(t,l)))u=c(u,r[l],t[l]);else{if(!i(t,"*"))return Object.defineProperty(n,l,{configurable:!0,enumerable:!0,get(){return e[l]},set(r){e[l]=r}}),u;u=c(u,r[l],t["*"])}return n[l]=u,u},set(r,t,o,s){return t in n?n[t]=o:e[t]=o,!0},defineProperty(e,r,t){return Reflect.defineProperty(n,r,t)},deleteProperty(e,r){return Reflect.deleteProperty(n,r)}},l=Object.create(e);return new Proxy(l,g)},g=e=>({addListener(r,t,...n){r.addListener(e.get(t),...n)},hasListener(r,t){return r.hasListener(e.get(t))},removeListener(r,t){r.removeListener(e.get(t))}}),l=new n((e=>"function"!=typeof e?e:function(r){const t=c(r,{},{getContent:{minArgs:0,maxArgs:0}});e(t)})),m=new n((e=>"function"!=typeof e?e:function(r,t,n){let o,s,a=!1,i=new Promise((e=>{o=function(r){a=!0,e(r)}}));try{s=e(r,t,o)}catch(e){s=Promise.reject(e)}const c=!0!==s&&((g=s)&&"object"==typeof g&&"function"==typeof g.then);var g;if(!0!==s&&!c&&!a)return!1;return(c?s:i).then((e=>{n(e)}),(e=>{let r;r=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:r})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0})),u=({reject:t,resolve:n},o)=>{e.runtime.lastError?e.runtime.lastError.message===r?n():t(new Error(e.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?t(new Error(o.message)):n(o)},A=(e,r,t,...n)=>{if(n.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${s(r.minArgs)} for ${e}(), got ${n.length}`);if(n.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${s(r.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((e,r)=>{const o=u.bind(null,{resolve:e,reject:r});n.push(o),t.sendMessage(...n)}))},f={devtools:{network:{onRequestFinished:g(l)}},runtime:{onMessage:g(m),onMessageExternal:g(m),sendMessage:A.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:A.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},p={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return t.privacy={network:{"*":p},services:{"*":p},websites:{"*":p}},c(e,f,t)};e.exports=t(chrome)}else e.exports=globalThis.browser},void 0===(n=t.apply(r,[e]))||(e.exports=n)},697:function(e,r,t){var n=t(906).default;function o(){"use strict";e.exports=o=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var r,t={},s=Object.prototype,a=s.hasOwnProperty,i=Object.defineProperty||function(e,r,t){e[r]=t.value},c="function"==typeof Symbol?Symbol:{},g=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",m=c.toStringTag||"@@toStringTag";function u(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[r]}try{u({},"")}catch(r){u=function(e,r,t){return e[r]=t}}function A(e,r,t,n){var o=r&&r.prototype instanceof b?r:b,s=Object.create(o.prototype),a=new S(n||[]);return i(s,"_invoke",{value:_(e,t,a)}),s}function f(e,r,t){try{return{type:"normal",arg:e.call(r,t)}}catch(e){return{type:"throw",arg:e}}}t.wrap=A;var p="suspendedStart",d="suspendedYield",h="executing",x="completed",v={};function b(){}function y(){}function w(){}var k={};u(k,g,(function(){return this}));var E=Object.getPrototypeOf,T=E&&E(E(N([])));T&&T!==s&&a.call(T,g)&&(k=T);var C=w.prototype=b.prototype=Object.create(k);function L(e){["next","throw","return"].forEach((function(r){u(e,r,(function(e){return this._invoke(r,e)}))}))}function P(e,r){function t(o,s,i,c){var g=f(e[o],e,s);if("throw"!==g.type){var l=g.arg,m=l.value;return m&&"object"==n(m)&&a.call(m,"__await")?r.resolve(m.__await).then((function(e){t("next",e,i,c)}),(function(e){t("throw",e,i,c)})):r.resolve(m).then((function(e){l.value=e,i(l)}),(function(e){return t("throw",e,i,c)}))}c(g.arg)}var o;i(this,"_invoke",{value:function(e,n){function s(){return new r((function(r,o){t(e,n,r,o)}))}return o=o?o.then(s,s):s()}})}function _(e,t,n){var o=p;return function(s,a){if(o===h)throw Error("Generator is already running");if(o===x){if("throw"===s)throw a;return{value:r,done:!0}}for(n.method=s,n.arg=a;;){var i=n.delegate;if(i){var c=j(i,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=x,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var g=f(e,t,n);if("normal"===g.type){if(o=n.done?x:d,g.arg===v)continue;return{value:g.arg,done:n.done}}"throw"===g.type&&(o=x,n.method="throw",n.arg=g.arg)}}}function j(e,t){var n=t.method,o=e.iterator[n];if(o===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=r,j(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var s=f(o,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,v;var a=s.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,v):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function I(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function O(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(e){if(e||""===e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function t(){for(;++o<e.length;)if(a.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return s.next=s}}throw new TypeError(n(e)+" is not iterable")}return y.prototype=w,i(C,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:y,configurable:!0}),y.displayName=u(w,m,"GeneratorFunction"),t.isGeneratorFunction=function(e){var r="function"==typeof e&&e.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,m,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},L(P.prototype),u(P.prototype,l,(function(){return this})),t.AsyncIterator=P,t.async=function(e,r,n,o,s){void 0===s&&(s=Promise);var a=new P(A(e,r,n,o),s);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},L(C),u(C,m,"Generator"),u(C,g,(function(){return this})),u(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var r=Object(e),t=[];for(var n in r)t.push(n);return t.reverse(),function e(){for(;t.length;){var n=t.pop();if(n in r)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return i.type="throw",i.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var c=a.call(s,"catchLoc"),g=a.call(s,"finallyLoc");if(c&&g){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!g)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,r){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=r,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(s)},complete:function(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),v},finish:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),O(t),v}},catch:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.tryLoc===e){var n=t.completion;if("throw"===n.type){var o=n.arg;O(t)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),v}},t}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},906:function(e){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},196:function(e,r,t){var n=t(697)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var s=r[n]={exports:{}};return e[n].call(s.exports,s,s.exports,t),s.exports}t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,{a:r}),r},t.d=function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},function(){"use strict";function e(e,r,t,n,o,s,a){try{var i=e[s](a),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,o)}function r(r){return function(){var t=this,n=arguments;return new Promise((function(o,s){var a=r.apply(t,n);function i(r){e(a,o,s,i,c,"next",r)}function c(r){e(a,o,s,i,c,"throw",r)}i(void 0)}))}}var n,o,s=t(196),a=t.n(s),i=t(921),c=t.n(i),g=t(857),l=t.n(g),m=t(921),u={getAll:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m.cookies.getAll(Object.assign({url:e},r))},get:function(e,r){return m.cookies.get(Object.assign({url:e,name:r}))},remove:function(e,r){return new Promise((function(t,n){m.cookies.remove({url:e,name:r}).then((function(){m.runtime.lastError?(console.log("error deleting cookie ".concat(r,": ")+m.runtime.lastError.message),n(new Error("error deleting cookie ".concat(r,": ")+m.runtime.lastError.message))):t(r)}))}))},set:function(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(o,s){n=Object.assign({url:e,name:r,value:t,domain:null,path:"/",secure:!0,httpOnly:!1,sameSite:"no_restriction",expirationDate:2054553823},n),m.cookies.set(n).then((function(){m.runtime.lastError?(console.log("error setting cookie ".concat(r,": ")+m.runtime.lastError.message),s(new Error("error setting cookie ".concat(r,": ")+m.runtime.lastError.message))):o(r)}))}))}};function A(e){return f.apply(this,arguments)}function f(){return(f=r(a().mark((function e(r){var t,n,o,s,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r.action,e.next="forceUpdate"===e.t0?3:"getUser"===e.t0?5:"getCredentials"===e.t0?8:"setCredentials"===e.t0?11:"removeCredentials"===e.t0?14:"updateIconGather"===e.t0?17:"updateIconPaused"===e.t0?20:"updateIconPlay"===e.t0?23:"nativeNotification"===e.t0?26:"updateIconLoggedOut"===e.t0?28:"playAudio"===e.t0?30:"setCookie"===e.t0?35:"getCookie"===e.t0?38:39;break;case 3:try{c().runtime.requestUpdateCheck()}catch(e){}return e.abrupt("break",40);case 5:return e.next=7,x();case 7:case 10:case 13:case 16:return e.abrupt("return",e.sent);case 8:return e.next=10,p();case 11:return e.next=13,d(r.params);case 14:return e.next=16,h();case 17:return c().browserAction.setIcon({path:"icons/icon_gather.png"}),setTimeout((function(){c().browserAction.setIcon({path:"icons/icon_128.png"})}),3500),e.abrupt("break",40);case 20:if(r.notify)try{c().notifications.create("dedalium-paused-".concat(Date.now()),{title:"PAUSED",message:"Dedalium was paused",iconUrl:"icons/icon_white.png",type:"basic"})}catch(e){}return c().browserAction.setIcon({path:"icons/icon_white.png"}),e.abrupt("break",40);case 23:if(r.notify)try{c().notifications.create("dedalium-resume-".concat(Date.now()),{title:"RESUMED",message:"Dedalium was resumed",iconUrl:"icons/icon_128.png",type:"basic"})}catch(e){}return c().browserAction.setIcon({path:"1"===r.pendingNotifications?"icons/icon_not.png":"icons/icon_128.png"}),e.abrupt("break",40);case 26:try{n="dedalium-notifications-".concat(Date.now()),o=r.notificationData.link,null!==(t=r.notificationData)&&void 0!==t&&t.id&&!r.notificationData.text.includes("NOTIFICATIONS")?(c().notifications.create(n,{title:"DEDALIUM",message:r.notificationData.text,iconUrl:"icons/icon_3d.png",type:"basic"}),c().notifications.onClicked.addListener((function(e){e===n&&(c().tabs.create({url:o}),c().notifications.clear(n))}))):(c().notifications.create(n,{title:"DEDALIUM",message:"You have pending notifications",iconUrl:"icons/icon_not.png",type:"basic"}),c().notifications.onClicked.addListener((function(e){e===n&&(c().tabs.create({url:o}),c().notifications.clear(n))})))}catch(e){}return e.abrupt("break",40);case 28:return c().browserAction.setIcon({path:"icons/icon_out.png"}),e.abrupt("break",40);case 30:return s=new Audio(r.params.src),i=void 0!==r.params.volume?r.params.volume/10:.2,s.volume=i,s.play(),e.abrupt("break",40);case 35:return e.next=37,u.set("https://dedalium.com",r.name,"1",r.options);case 37:return e.abrupt("break",40);case 38:return e.abrupt("return",u.get("https://dedalium.com",r.name));case 39:return e.abrupt("return","unrecognized action");case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.browser=t(921),c().runtime.onConnect.addListener((function(e){})),null===(n=c().browserAction)||void 0===n||null===(o=n.onClicked)||void 0===o||o.addListener((function(){A({action:"updateIconPlay"})})),c().runtime.onMessage.addListener((function(e,r,t){e.popupOpen&&A({action:"updateIconPlay"})})),c().runtime.onInstalled.addListener((function(e){"install"===e.reason&&x().then((function(e){var r=null!==e?"/after_install/":"/boarding/?utm_source=extension-after-install";c().tabs.create({url:"https://dedalium.com"+r})})).catch((function(){c().tabs.create({url:"https://dedalium.com/after_install/"})})),c().runtime.setUninstallURL("https://dedalium.com/goodbye/")})),c().runtime.onMessage.addListener(function(){var e=r(a().mark((function e(r,t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(r).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()),c().cookies&&c().cookies.onChanged&&c().cookies.onChanged.addListener((function(e){var r,t,n,o,s;"https://dedalium.com".includes(null===(r=e.cookie)||void 0===r?void 0:r.domain)&&"evicted"===e.cause&&e.removed&&("userToken"===(null===(t=e.cookie)||void 0===t?void 0:t.name)||"refreshToken"===(null===(n=e.cookie)||void 0===n?void 0:n.name))&&u.set("https://dedalium.com",null===(o=e.cookie)||void 0===o?void 0:o.name,null===(s=e.cookie)||void 0===s?void 0:s.value)}));var p=function(){var e=r(a().mark((function e(){var r,t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getAll("https://dedalium.com");case 2:if(r=e.sent,t=r.find((function(e){return"userToken"===e.name})),n=r.find((function(e){return"refreshToken"===e.name})),t&&n){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",{userToken:t.value,refreshToken:n.value});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=r(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.userToken||!r.refreshToken){e.next=6;break}return e.next=3,Promise.all([u.set("https://dedalium.com","userToken",r.userToken),u.set("https://dedalium.com","refreshToken",r.refreshToken)]);case 3:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),h=function(){var e=r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([u.remove("https://dedalium.com","userToken"),u.remove("https://dedalium.com","refreshToken")]));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=r(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",l()(r.userToken));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}()}();
//# sourceMappingURL=background.js.map