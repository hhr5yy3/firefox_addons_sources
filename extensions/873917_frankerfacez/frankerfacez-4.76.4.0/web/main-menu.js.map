{"version":3,"file":"main-menu.js","mappings":"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AAA,yFAClFA,CAAK;AAAA,qBACzEkB,CAAK;AAAA,EACxB,CACA,MACC,KAAK,WAAW,OAAO,uBAAuB,CAChD,CAEA,WAAWhO,EAAM,CAChB,KAAK,YAAYA,EAAK,OAASA,EAAK,MAAM,WAAW,CACtD,CAEA,aAAc,CACb,KAAK,YAAY,CAClB,CACD,EAxFgD,oBAAjC,IAAM2mB,GAAN,GCwCf,MAAMC,MAAgB,aACrB,OACA,QACD,EAEMC,MAAY,aACjB,MACA,UACA,QACD,EAEMC,MAAgB,aACrB,wBACA,6BACA,kBACA,iBACA,gBACA,qBACA,sBACA,qBACA,kBACD,EAEMC,GAAoB,CACzB,UACA,SACA,aACA,mBACA,2BACA,UACA,qBACA,mBACA,WACA,gBACA,UACA,YACA,eACA,YACA,WACA,YACA,eACD,EAEMC,MAAa,aAClB,UACA,mBACA,aACA,mBACA,2BACA,UACA,qBACA,mBACA,WACA,gBACA,UACA,YACA,eACA,YACA,eACA,iBACA,kBACA,sBACA,mBACA,kCACA,qBACA,UACA,cACA,QACA,WACA,YACA,OACA,SACA,SACA,OACA,gBACA,WACA,cACA,YACA,aACA,iBACA,qBACA,qBACA,sBACA,oBACA,wBACA,uBACA,uBACA,sBACA,iCACA,uBACA,gCACA,wBACA,WACA,sBACA,kBACA,kBACA,kBACA,kBACD,EAGMC,GAAa,CAClB,YACA,YACA,gBACA,OACD,EAGMC,GAAuB,CAC5B,cAAiB,cACjB,wBAA2B,2BAC3B,6BAAgC,kBAChC,kBAAqB,iBACtB,EAEMC,GAAgB,CACrB,mBAAsB,sBACtB,cAAiB,kBACjB,aAAgB,iBAChB,cAAiB,kBACjB,gBAAmB,mBACnB,uBAA0B,2BAC1B,YAAe,eACf,qBAAwB,wBACxB,KAAQ,OACR,eAAkB,mBAClB,qBAAwB,yBACxB,oBAAuB,wBACvB,kBAAqB,sBACrB,iBAAoB,sBACpB,iBAAoB,qBACpB,eAAkB,mBAClB,uBAA0B,6BAC1B,gBAAmB,oBACnB,sBAAyB,2BACzB,QAAW,WACX,WAAc,cACd,mBAAsB,uBACtB,eAAkB,mBAClB,sBAAyB,2BACzB,WAAc,aACf,EAEMC,GAAuB,CAAC,EAGxBC,GAAqB,CAC1B,sBACD,EAGqB,GAAN,MAAM,WAAiB,SAAO,CAC5C,eAAezrB,EAAM,CACpB,MAAM,GAAGA,CAAI,EAEb,KAAK,cAAgB,GAErB,KAAK,iBAAmB,IAAI,IAC5B,KAAK,aAAe,CAAC,EAErB,KAAK,OAAS,IAAI,gBAClB,KAAK,eAAiB,IAAI,gBAE1B,KAAK,OAAO,UAAU,EACtB,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,aAAa,EAEzB,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,aAAa,EACzB,KAAK,OAAO,WAAW,EACvB,KAAK,OAAO,gBAAgB,EAC5B,KAAK,OAAO,iBAAiB,EAC7B,KAAK,OAAO,cAAc,EAG1B,KAAK,OAAO,MAAM,EAElB,KAAK,OAAO0U,CAAQ,EACpB,KAAK,OAAOkG,CAAQ,EACpB,KAAK,OAAOa,CAAY,EACxB,KAAK,OAAO4K,EAAS,EACrB,KAAK,OAAOyE,EAAK,EACjB,KAAK,OAAOC,EAAW,EAEvB,KAAK,gBAAkB,KAAK,KAAK,OAChC,mBACAlkB,GAAKA,EAAE,OAAO,aAAY,OAAIA,EAAE,MAAO,eAAe,MAAK,OAAIA,EAAE,MAAO,iBAAiB,EACzF,IAAS,WACV,EAEA,KAAK,YAAc,KAAK,KAAK,OAC5B,eACAA,GAAKA,EAAE,MAAQA,EAAE,QAAUA,EAAE,MAAM,qBACnC,IAAS,WACV,EAEA,KAAK,WAAa,KAAK,KAAK,OAC3B,cACAA,GAAKA,EAAE,gBAAkBA,EAAE,sBAAwBA,EAAE,cACrD,IAAS,WACV,EAEA,KAAK,eAAiB,KAAK,KAAK,OAC/B,kBACAA,GAAKA,EAAE,sBAAwBA,EAAE,oBAAsBA,EAAE,oBACzD,IAAS,WACV,EAEA,KAAK,aAAe,KAAK,KAAK,OAC7B,gBACAA,GAAKA,EAAE,wBAA0BA,EAAE,qBACnC,IAAS,WACV,EAEA,KAAK,cAAgB,KAAK,KAAK,OAC9B,iBACAA,GAAKA,EAAE,kBAAoBA,EAAE,iBAC7B,IAAS,WACV,EAEA,KAAK,oBAAsB,KAAK,KAAK,OACpC,wBACAA,GAAKA,EAAE,mBAAqBA,EAAE,qBAC9B,IAAS,WACV,EAEA,KAAK,aAAe,IAAI,IAExB,KAAK,eAAiB,KAAK,KAAK,OAC/B,kBACAA,GAAKA,EAAE,iBAAmBA,EAAE,eAC5B,IAAS,WACV,EAEA,KAAK,cAAgB,KAAK,KAAK,OAC9B,iBACAA,GAAKA,EAAE,SAAWA,EAAE,mBAAqBA,EAAE,YAC3C,IAAS,WACV,EAEA,KAAK,cAAgB,KAAK,KAAK,OAC9B,iBACAA,GAAKA,EAAE,iBAAmBA,EAAE,mBAAqBA,EAAE,IACnD,IAAS,WACV,EAEA,KAAK,gBAAkB,KAAK,KAAK,OAChC,mBACAA,GAAKA,EAAE,wBAA0BA,EAAE,UAAS,OAAIA,EAAE,MAAO,UAAU,EACnE,IAAS,WACV,EAEA,KAAK,aAAe,KAAK,KAAK,OAC7B,gBACAA,GAAKA,EAAE,YAAcA,EAAE,aAAeA,EAAE,4BACxC,IAAS,WACV,EAEA,KAAK,kBAAoB,KAAK,KAAK,OAClC,sBACAA,GAAKA,EAAE,UAAYA,EAAE,SAAWA,EAAE,OAASA,EAAE,MAAM,qBACnD,IAAS,WACV,EAEA,KAAK,qBAAuB,KAAK,KAAK,OACrC,yBACAA,GAAKA,EAAE,mBAAqBA,EAAE,kBAAiB,OAAIA,EAAG,YAAY,EAClE,IAAS,WACV,EAEA,KAAK,WAAa,KAAK,KAAK,OAC3B,cACAA,GAAKA,EAAE,YAAc,QAAaA,EAAE,YAAc,OAClD,IAAS,WACV,EAEA,KAAK,WAAa,KAAK,KAAK,OAC3B,cACAA,GAAKA,EAAE,eAAiBA,EAAE,gBAC1B,IAAS,WACV,EAIA,KAAK,SAAS,IAAI,mBAAoB,CACrC,QAAS,GACT,GAAI,CACH,KAAM,qCACN,MAAO,yDACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,8BAA+B,CAChD,QAAS,GACT,GAAI,CACH,KAAM,2CACN,MAAO,kBACP,YAAa,8RACb,UAAW,qBACX,KAAM,CACL,CAAC,MAAO,GAAO,MAAO,UAAU,EAChC,CAAC,MAAO,EAAG,MAAO,eAAe,EACjC,CAAC,MAAO,EAAG,MAAO,QAAQ,CAC3B,CACD,CACD,CAAC,EAED,KAAK,SAAS,IAAI,wBAAyB,CAC1C,QAAS,KACT,SAAU,CAAC,iCAAiC,EAC5C,QAAQ5G,EAAKC,EAAK,CACjB,OAAKA,GAAO,KACJ,CAAEA,EACL,EAAAD,EAAI,IAAI,iCAAiC,CAG/C,EACA,GAAI,CACH,KAAM,iCACN,MAAO,sCACP,UAAW,oBACX,WAAY,EACb,CACD,CAAC,EAED,KAAK,SAAS,MAAM,kBAAmB,CACtC,KAAM,2BACN,UAAW,cACX,QAAS,IAAM,KACf,WAAY,EACb,CAAC,EAED,KAAK,SAAS,IAAI,kCAAmC,CACpD,QAAS,CAAC,EACV,KAAM,cACN,eAAgB,GAChB,QAAS,CAACA,EAAKC,IAAQ,CACtB,MAAMO,EAAM,IAAI,IACfirB,EAAW,KAAK,eAAiBH,GAClC,UAAUI,KAAKzrB,EACTyrB,GAAG,GAAKD,EAASC,EAAE,CAAC,GAAK,CAAEH,GAAqB,SAASG,EAAE,CAAC,GAChElrB,EAAI,IAAIirB,EAASC,EAAE,CAAC,CAAC,EAEvB,OAAOlrB,CACR,EAEA,GAAI,CACH,KAAM,4SACN,UAAW,gBACX,KAAM,IAAM,OACV,KAAK,KAAK,aAAa,EACvB,OAAOgB,GAAO,CAAE+pB,GAAqB,SAAS/pB,CAAG,CAAC,EAClD,KAAK,CACR,CACD,CAAC,EAED,KAAK,SAAS,IAAI,+BAAgC,CACjD,QAAS,CAAC,EACV,KAAM,cACN,eAAgB,GAChB,QAAQxB,EAAKC,EAAK,CACjB,MAAMO,EAAM,IAAI,IAChB,UAAUkrB,KAAKzrB,EACTyrB,GAAG,GAAK,CAAER,GAAkB,SAASQ,EAAE,CAAC,GAC5ClrB,EAAI,IAAIkrB,EAAE,CAAC,EAEb,OAAOlrB,CACR,EAEA,GAAI,CACH,KAAM,0TACN,UAAW,gBACX,KAAM,IAAM,OACV,KAAK,KAAK,UAAU,EACpB,OAAOgB,GAAO,CAAE0pB,GAAkB,SAAS1pB,CAAG,GAAK,CAAE,QAAQ,KAAKA,CAAG,CAAC,EACtE,KAAK,CACR,CACD,CAAC,EAED,KAAK,SAAS,IAAI,qBAAsB,CACvC,QAAS,EACT,GAAI,CACH,KAAM,+BACN,MAAO,QACP,YAAa,uRACb,UAAW,qBACX,KAAM,CACL,CAAC,MAAO,EAAG,MAAO,UAAU,EAC5B,CAAC,MAAO,EAAG,MAAO,kBAAkB,EACpC,CAAC,MAAO,EAAG,MAAO,cAAc,CACjC,CACD,CACD,CAAC,EAED,KAAK,SAAS,IAAI,4BAA6B,CAC9C,QAAS,GACT,GAAI,CACH,KAAM,8BACN,MAAO,mCACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,uBAAwB,CACzC,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,sDACP,UAAW,oBACX,YAAa,0GACd,CACD,CAAC,EAED,KAAK,SAAS,IAAI,iCAAkC,CACnD,QAAS,CAAC,EACV,KAAM,cACN,eAAgB,GAChB,GAAI,CACH,KAAM,mIACN,UAAW,cACX,MAAO,EACR,CACD,CAAC,EAED,KAAK,SAAS,IAAI,0CAA2C,CAC5D,SAAU,CAAC,gCAAgC,EAC3C,OAAQ,eACR,QAAQxB,EAAK,CACZ,MAAMC,EAAMD,EAAI,IAAI,gCAAgC,EACpD,GAAK,CAAEC,GAAO,CAAEA,EAAI,OACnB,OAAO,KAER,MAAMO,EAAM,CAAC,EAEb,UAAUwnB,KAAQ/nB,EAAK,CACtB,MAAM0E,EAAIqjB,EAAK,EACf,IAAI0D,EAAI1D,EAAK,EAERrjB,IAAM,OACV+mB,KAAI,iBAAcA,CAAC,EAEV/mB,IAAM,QACf+mB,KAAI,gBAAaA,CAAC,GAEd,GAAEA,GAAK,CAAEA,EAAE,SAGhBlrB,EAAI,KAAKkrB,CAAC,CACX,CAEA,OAAKlrB,EAAI,OACD,IAAI,OAAO,OAAOA,EAAI,KAAK,GAAG,CAAC,KAAM,IAAI,EAE1C,IACR,CACD,CAAC,EAED,KAAK,SAAS,IAAI,iCAAkC,CACnD,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,sDACP,UAAW,oBACX,YAAa,kIACd,CACD,CAAC,EAED,KAAK,SAAS,IAAI,wBAAyB,CAC1C,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,oEACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,2BAA4B,CAC7C,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,2DACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,uBAAwB,CACzC,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,iEACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,8BAA+B,CAChD,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,+EACP,UAAW,oBACX,YAAa,8KACd,CACD,CAAC,EAED,KAAK,SAAS,IAAI,0BAA2B,CAC5C,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,gDACP,UAAW,mBACZ,CACD,CAAC,EAYD,KAAK,SAAS,IAAI,2BAA4B,CAC7C,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,sFACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,8BAA+B,CAChD,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,iDACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,qBAAsB,CACvC,QAAS,GACT,GAAI,CACH,KAAM,6BACN,MAAO,sDACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,qBAAsB,CACvC,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,uCACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,0BAA2B,CAC5C,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,6CACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,qBAAsB,CACvC,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,0EACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,4BAA6B,CAC9C,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,2CACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,8BAA+B,CAChD,QAAS,EACT,GAAI,CACH,KAAM,sCACN,MAAO,2EACP,UAAW,qBACX,KAAM,CACL,CAAC,MAAO,EAAG,MAAO,UAAU,EAC5B,CAAC,MAAO,EAAG,MAAO,cAAc,EAChC,CAAC,MAAO,EAAG,MAAO,WAAW,CAC9B,CACD,CACD,CAAC,EAED,KAAK,SAAS,IAAI,4BAA6B,CAC9C,QAAS,GACT,GAAI,CACH,KAAM,mCACN,MAAO,yDACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,0BAA2B,CAC5C,QAAS,GACT,GAAI,CACH,KAAM,mCACN,MAAO,8CACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,2BAA4B,CAC7C,QAAS,GACT,SAAU,CAAC,0BAA0B,EACrC,QAAQR,EAAKC,EAAK,CACjB,OAAKD,EAAI,IAAI,0BAA0B,EAC/B,GAEDC,CACR,EACA,GAAI,CACH,KAAM,oCACN,MAAO,uEACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,2BAA4B,CAC7C,QAAS,GACT,GAAI,CACH,KAAM,oCACN,MAAO,qCACP,UAAW,oBACX,WAAY,EACb,CACD,CAAC,EAED,KAAK,SAAS,IAAI,0BAA2B,CAC5C,QAAS,GACT,GAAI,CACH,KAAM,2BACN,MAAO,6BACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,kBAAmB,CACpC,QAAS,GACT,GAAI,CACH,KAAM,6BACN,MAAO,sDACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,yBAA0B,CAC3C,QAAS,KACT,GAAI,CACH,KAAM,mCACN,MAAO,aACP,UAAW,qBACX,YAAa,+MACb,KAAM,CACL,CAAC,MAAO,KAAM,MAAO,WAAW,EAChC,CAAC,MAAO,EAAG,MAAO,QAAQ,EAC1B,CAAC,MAAO,EAAG,MAAO,cAAc,EAChC,CAAC,MAAO,EAAG,MAAO,QAAQ,CAC3B,CACD,CACD,CAAC,EAED,KAAK,SAAS,IAAI,oCAAqC,CACtD,QAAS,GACT,GAAI,CACH,KAAM,mCACN,UAAW,oBACX,MAAO,wFACR,CACD,CAAC,EAED,KAAK,SAAS,IAAI,aAAc,CAC/B,QAAS,KACT,GAAI,CACH,KAAM,6CACN,MAAO,QACP,YAAa,0GACb,UAAW,mBACX,QAAQA,EAAK,CAEZ,OADAA,EAAM,SAASA,EAAK,EAAE,EACjB,MAAMA,CAAG,GAAK,CAAE,SAASA,CAAG,GAAKA,GAAO,EACrC,KAEDA,CACR,CACD,CACD,CAAC,EAED,KAAK,SAAS,IAAI,uBAAwB,CACzC,SAAU,CAAC,aAAc,6BAA6B,EACtD,QAAQD,EAAK,CACZ,MAAMC,EAAMD,EAAI,IAAI,YAAY,EAChC,OAAOC,IAAeD,EAAI,IAAI,6BAA6B,GAAK,IACjE,CACD,CAAC,EAED,KAAK,SAAS,IAAI,iBAAkB,CACnC,SAAU,CAAC,aAAc,iCAAkC,sBAAsB,EACjF,QAAQA,EAAK,CACZ,MAAK,CAAEA,EAAI,IAAI,gCAAgC,GAAKA,EAAI,IAAI,sBAAsB,EAC1E,GAEDA,EAAI,IAAI,YAAY,GAAK,IACjC,CACD,CAAC,EAED,KAAK,SAAS,IAAI,wBAAyB,CAC1C,SAAU,CAAC,gBAAgB,EAC3B,QAAS,KACT,QAAQA,EAAKC,EAAK,CACjB,OAAKA,GAGED,EAAI,IAAI,gBAAgB,CAChC,EAEA,GAAI,CACH,KAAM,iCACN,MAAO,sBACP,YAAa;AAAA;AAAA,+IACb,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,yBAA0B,CAC3C,SAAU,CAAC,gBAAgB,EAC3B,QAAS,KACT,QAAQA,EAAKC,EAAK,CACjB,OAAKA,GAGED,EAAI,IAAI,gBAAgB,CAChC,EAEA,GAAI,CACH,KAAM,uCACN,MAAO,kEACP,YAAa,2GACb,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,yBAA0B,CAC3C,QAAS,GACT,GAAI,CACH,KAAM,yCACN,MAAO,yDACP,YAAa,uRACb,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,oBAAqB,CACtC,QAAS,GACT,GAAI,CACH,KAAM,wCACN,MAAO,kEACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,wBAAyB,CAC1C,QAAS,GACT,GAAI,CACH,KAAM,kCACN,MAAO,iCACP,YAAa,uFACb,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,0BAA2B,CAC5C,QAAS,EACT,GAAI,CACH,KAAM,iCACN,MAAO,kBACP,UAAW,qBACX,YAAa,mLACb,KAAM,CACL,CAAC,MAAO,EAAG,MAAO,gBAAgB,EAClC,CAAC,MAAO,EAAG,MAAO,uDAAuD,EACzE,CAAC,MAAO,EAAG,MAAO,iDAAkD,CACrE,CACD,CACD,CAAC,EAED,KAAK,SAAS,IAAI,iBAAkB,CACnC,QAAS,EACT,GAAI,CACH,KAAM,qCACN,MAAO,uBACP,UAAW,qBACX,YAAa,yHACb,KAAM,CACL,CAAC,MAAO,EAAG,MAAO,gBAAgB,EAClC,CAAC,MAAO,EAAG,MAAO,4BAA4B,EAC9C,CAAC,MAAO,EAAG,MAAO,cAAc,EAChC,CAAC,MAAO,EAAG,MAAO,aAAa,CAChC,CACD,CACD,CAAC,EAED,KAAK,SAAS,IAAI,oBAAqB,CACtC,QAAS,GACT,GAAI,CACH,KAAM,qCACN,MAAO,uEACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,wBAAyB,CAC1C,QAAS,IACT,GAAI,CACH,KAAM,qCACN,MAAO,uBACP,UAAW,qBACX,KAAM,CACL,CAAC,MAAO,IAAM,MAAO,UAAU,EAC/B,CAAC,MAAO,GAAI,MAAO,cAAc,EACjC,CAAC,MAAO,GAAI,MAAO,cAAc,EACjC,CAAC,MAAO,GAAI,MAAO,cAAc,EACjC,CAAC,MAAO,EAAG,MAAO,aAAa,EAC/B,CAAC,MAAO,EAAG,MAAO,QAAQ,CAC3B,EACA,YAAa;AAAA,0CACd,CACD,CAAC,EAED,KAAK,SAAS,IAAI,mCAAoC,CACrD,QAAS,GACT,GAAI,CACH,KAAM,qCACN,MAAO,mDACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,uBAAwB,CACzC,QAAS,GACT,GAAI,CACH,KAAM,kCACN,MAAO,oDACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,qBAAsB,CACvC,QAAS,GACT,GAAI,CACH,KAAM,kCACN,MAAO,+BACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,qBAAsB,CACvC,QAAS,EACT,GAAI,CACH,KAAM,kCACN,MAAO,aACP,UAAW,qBACX,KAAM,CACL,CAAC,MAAO,EAAG,MAAO,UAAU,EAC5B,CAAC,MAAO,EAAG,MAAO,wBAAwB,EAC1C,CAAC,MAAO,EAAG,MAAO,sBAAsB,EACxC,CAAC,MAAO,EAAG,MAAO,4BAA4B,EAC9C,CAAC,MAAO,EAAG,MAAO,uBAAuB,CAC1C,CACD,CACD,CAAC,EAED,KAAK,SAAS,IAAI,2BAA4B,CAC7C,QAAS,GACT,GAAI,CACH,KAAM,6BACN,MAAO,8DACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,4BAA6B,CAC9C,QAAS,GACT,GAAI,CACH,KAAM,6BACN,MAAO,6EACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,yBAA0B,CAC3C,QAAS,GACT,GAAI,CACH,KAAM,6BACN,MAAO,iEACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,uCAAwC,CACzD,QAAS,GACT,GAAI,CACH,KAAM,6BACN,MAAO,2DACP,UAAW,mBACZ,CACD,CAAC,CACF,CAEA,IAAI,aAAc,CACjB,UAAUmE,KAAQ,KAAK,eAAe,UACrC,GAAKA,GAAQA,EAAK,YACjB,OAAOA,EAET,OAAO,IACR,CAGA,cAAe,CACd,MAAMwnB,EAAU,KAAK,KAAK,QAAQ,IAAI,eAAe,EACpDtX,EAAO,KAAK,KAAK,QAAQ,IAAI,sBAAsB,EACnDuX,EAAW,KAAK,KAAK,QAAQ,IAAI,0BAA0B,EAC3DhgB,EAAI,KAAK,OACTigB,EAAK,KAAK,eAEX,IAAIC,EAAYH,EACfI,EAAa,QAAM,KAAK,QACvB,KAAK,KAAK,QAAQ,IAAI,6BAA6B,GACnD,KAAK,KAAK,QAAQ,IAAI,wBAAwB,CAC/C,EAEIA,IACJD,EAAYC,EAAW,OAAO,EAAE,EAAI,IAErCA,EAAaD,EAAY,UAAY,UAErC,IAAIE,EAAY,CAAEF,EACjBG,EAAY,QAAM,KAAK,QACtB,KAAK,KAAK,QAAQ,IAAI,uBAAuB,GAC7C,KAAK,KAAK,QAAQ,IAAI,kBAAkB,CACzC,EAEIA,IACJD,EAAYC,EAAU,OAAO,EAAE,EAAI,IAEpCA,EAAYD,EAAY,UAAY,UAIpCpgB,EAAE,MAAQmgB,EACVngB,EAAE,KAAOyI,EACTzI,EAAE,SAAWggB,EAEbC,EAAG,MAAQI,EACXJ,EAAG,KAAOxX,EACVwX,EAAG,SAAWD,EAEd,KAAK,UAAU,cAAc,EAE7B,KAAK,iBAAiB,EACtB,KAAK,KAAK,gBAAgB,CAC3B,CAGA,eAAgB,CACR,KAAK,qBACX,KAAK,mBAAqB,sBAAsB,IAAM,KAAK,eAAe,CAAC,EAC7E,CAEA,gBAAiB,CAChB,qBAAqB,KAAK,kBAAkB,EAC5C,KAAK,mBAAqB,KAE1B,MAAMpkB,EAAQ,KAAK,KAAK,QAAQ,IAAI,sBAAsB,EACzD0kB,EAAc,KAAK,KAAK,QAAQ,IAAI,mBAAmB,EACvDC,EAAoB,KAAK,KAAK,QAAQ,IAAI,yBAAyB,EACnEC,EAAU,KAAK,KAAK,QAAQ,IAAI,qBAAqB,EACrDC,EAAO,KAAK,KAAK,QAAQ,IAAI,gBAAgB,EAC7CC,EAAkB,KAAK,KAAK,QAAQ,IAAI,4BAA4B,EACpEC,EAAK,KAAK,MAAO,GAAG,GAAMF,CAAI,EAEzBG,EAAoB,KAAK,MAAML,GAAqB,EAAE,EAAE,EAC7DM,EAAuBN,EAAoBK,EAE5C,IAAIE,EAAO,KAAK,KAAK,QAAQ,IAAI,kBAAkB,GAAK,UACxD,KAAM,CAACjmB,EAAWC,CAAQ,KAAI,MAAQgmB,CAAI,EAC1CA,EAAOjmB,EAEF,KAAK,gBACT,KAAK,eAAe,EAErB,KAAK,eAAiBC,EAEjBgmB,EAAK,QAAQ,GAAG,IAAM,IAAMA,EAAK,QAAQ,GAAG,IAAM,IAAMA,EAAK,QAAQ,GAAG,IAAM,IAAMA,EAAK,QAAQ,GAAG,IAAM,KAC9GA,EAAO,IAAIA,CAAI,KAEXN,EACJ,KAAK,WAAW,IAAI,UAAW,mCAAmCA,EAAQ,EAAE,MAAM,EAElF,KAAK,WAAW,OAAO,SAAS,EAEjC,KAAK,WAAW,YAAY,oBAAqB,GAAGF,EAAY,EAAE,KAAK,EACvE,KAAK,WAAW,YAAY,0BAA2B,GAAGM,EAAkB,EAAE,KAAK,EACnF,KAAK,WAAW,YAAY,6BAA8B,GAAGC,EAAqB,EAAE,KAAK,EACzF,KAAK,WAAW,YAAY,iBAAkB,GAAGJ,EAAK,EAAE,KAAK,EAC7D,KAAK,WAAW,YAAY,mBAAoB,GAAGE,EAAG,EAAE,KAAK,EAC7D,KAAK,WAAW,YAAY,mBAAoBG,CAAI,EACpD,KAAK,WAAW,YAAY,aAAc,GAAGllB,EAAM,EAAE,KAAK,EAC1D,KAAK,WAAW,YAAY,sBAAuB,GAAG,CAACA,EAAM,EAAE,KAAK,EAEpE,KAAK,WAAW,OAAO,YAAa6kB,IAAS,IAAMK,IAAS,SAAS,EACrE,KAAK,WAAW,OAAO,aAAc,KAAK,SAAS,IAAI,gBAAgB,CAAC,EACxE,KAAK,WAAW,OAAO,wBAAyB,KAAK,SAAS,IAAI,sBAAsB,CAAC,EAEzF,KAAK,WAAW,OAAO,yBAA0BJ,IAAoB,CAAC,EACtE,KAAK,WAAW,OAAO,2BAA4BA,IAAoB,CAAC,EAExE,KAAK,KAAK,kBAAkB,EAC5B,KAAK,KAAK,wBAAwB,EAClC,KAAK,KAAK,oBAAoB,CAC/B,CAEA,mBAAoB,CACnB,MAAMjY,EAAO,KAAK,KAAK,QAAQ,IAAI,oBAAoB,EAEvD,KAAK,WAAW,OAAO,eAAgBA,EAAO,CAAC,EAC/C,KAAK,WAAW,OAAO,kBAAmBA,IAAS,CAAC,EACpD,KAAK,WAAW,OAAO,wBAAyBA,IAAS,CAAC,EAC1D,KAAK,WAAW,OAAO,oBAAqBA,IAAS,CAAC,CACvD,CAEA,kBAAmB,CAClB,MAAM4S,EAAU,KAAK,KAAK,QAAQ,IAAI,mCAAmC,EACzE,KAAK,WAAW,OAAO,qBAAsB,KAAK,KAAK,QAAQ,IAAI,iCAAiC,CAAC,EAErG,MAAM3P,EAAY,KAAK,KAAK,QAAQ,IAAI,8BAA8B,EACjEA,GACJ,KAAK,WAAW,OAAO,kBAAmB,EAAK,EAC/C,KAAK,WAAW,OAAO,sBAAuB,EAAK,EAEnD,KAAK,WAAW,OAAO,yBAA0B,EAAI,EACrD,KAAK,WAAW,YAAY,qBAAsB,KAAK,eAAe,QAAQA,CAAS,CAAC,IAGxF,KAAK,WAAW,OAAO,yBAA0B,EAAK,EACtD,KAAK,WAAW,OAAO,kBAAmB2P,CAAO,EACjD,KAAK,WAAW,OAAO,sBAAuBA,GAAW,KAAK,KAAK,QAAQ,IAAI,sBAAsB,CAAC,EAExG,CAGA,iBAAiB9iB,EAAM,CACtB,MAAMD,EAAOC,GAAM,UAClBrD,EAAOqD,GAAM,UAETD,EACJ,KAAK,WAAW,IAAI,cAAe;AAAA;AAAA;AAAA;AAAA,0BAIZA,EAAK,GAAG;AAAA,qBACb,YAAM,kBAAkBA,EAAK,GAAG,eAAeA,EAAK,KAAK,eAAeA,EAAK,KAAK;AAAA,EACrG,EAEC,KAAK,WAAW,OAAO,aAAa,EAErC,KAAK,WAAapD,GAAQ,IAC3B,CAGA,MAAM,WAAY,CACjB,GAAK,KAAK,aACT,OAED,MAAM6rB,EAAK,MAAM,KAAK,UAAU,WAAW,YAAY,EACtDC,EAAW,MAAM,KAAK,UAAU,WAAW,eAAe,EAQ3D,GANA,KAAK,cAAgBA,GAAYtB,GACjC,KAAK,cAAgBqB,GAAI,SAAW1B,GACpC,KAAK,WAAa0B,GAAI,MAAQxB,GAC9B,KAAK,cAAgBwB,GAAI,SAAW5B,GACpC,KAAK,UAAY4B,GAAI,KAAO3B,GAEvB,CAAE2B,EACN,OAEIC,GACJ,KAAK,KAAK,QAAQ,OAAO,iCAAiC,EAE3D,KAAK,aAAe,GACpB,MAAMC,EAAU,CAAC,KAEV,yBAAsB,KAAK,cAAevB,EAAa,GAC7DuB,EAAQ,KAAK,eAAe,KAEtB,yBAAsB,KAAK,cAAe5B,EAAa,GAC7D4B,EAAQ,KAAK,eAAe,KAEtB,yBAAsB,KAAK,WAAY1B,EAAU,GACvD0B,EAAQ,KAAK,YAAY,KAEnB,yBAAsB,KAAK,cAAe9B,EAAa,GAC7D8B,EAAQ,KAAK,eAAe,KAEtB,yBAAsB,KAAK,UAAW7B,EAAS,GACrD6B,EAAQ,KAAK,WAAW,EAEpBA,EAAQ,QACZ,KAAK,IAAI,KAAK,+DAAgEA,EAAQ,KAAK,GAAG,CAAC,CACjG,CAGA,uBAAwB,CACvB,KAAK,iBAAmB,KAAK,KAAK,QAAQ,IAAI,uBAAuB,CACtE,CAkBA,UAAW,CACV,KAAK,GAAG,wBAAyB,KAAK,SAAS,EAC/C,KAAK,GAAG,wBAAyB,KAAK,aAAa,EACnD,KAAK,UAAU,EACf,KAAK,cAAc,EAEnB,KAAK,KAAK,QAAQ,GAAG,6BAA8B,KAAK,eAAgB,IAAI,EAC5E,KAAK,KAAK,QAAQ,GAAG,0CAA2C,KAAK,eAAgB,IAAI,EACzF,KAAK,KAAK,QAAQ,GAAG,oCAAqC,KAAK,eAAgB,IAAI,EACnF,KAAK,KAAK,QAAQ,GAAG,kCAAmC,IAAM,KAAK,aAAa,YAAY,CAAC,EAC7F,KAAK,KAAK,QAAQ,GAAG,mCAAoC,IAAM,CAC9D,KAAK,aAAa,YAAY,EAC9B,KAAK,kBAAkB,YAAY,CACpC,CAAC,EACD,KAAK,KAAK,QAAQ,GAAG,yBAA0B,IAAM,CACpD,KAAK,aAAa,YAAY,CAC/B,CAAC,EAED,KAAK,KAAK,QAAQ,GAAG,kCAAmC,KAAK,gBAAiB,IAAI,EAClF,KAAK,KAAK,QAAQ,GAAG,gCAAiC,KAAK,gBAAiB,IAAI,EAChF,KAAK,KAAK,QAAQ,GAAG,6BAA8B,KAAK,gBAAiB,IAAI,EAC7E,KAAK,KAAK,QAAQ,GAAG,kCAAmC,KAAK,gBAAiB,IAAI,EAClF,KAAK,KAAK,QAAQ,GAAG,6BAA8B,KAAK,gBAAiB,IAAI,EAC7E,KAAK,KAAK,QAAQ,GAAG,sCAAuC,KAAK,gBAAiB,IAAI,EACtF,KAAK,KAAK,QAAQ,GAAG,sCAAuC,KAAK,gBAAiB,IAAI,EACtF,KAAK,KAAK,QAAQ,GAAG,mCAAoC,KAAK,gBAAiB,IAAI,EAEnF,KAAK,KAAK,QAAQ,GAAG,gCAAiC,KAAK,sBAAuB,IAAI,EAEtF,KAAK,KAAK,QAAQ,GAAG,+BAAgC,IAAM,CAC1D,KAAK,cAAc,YAAY,CAChC,CAAC,EAED,KAAK,KAAK,QAAQ,GAAG,gCAAiC,IAAM,KAAK,WAAW,YAAY,EAAG,IAAI,EAC/F,KAAK,KAAK,QAAQ,GAAG,+BAAgC,KAAK,cAAe,IAAI,EAC7E,KAAK,SAAS,aAAa,GAAG,yBAA0B,KAAK,cAAe,IAAI,EAChF,KAAK,KAAK,QAAQ,GAAG,4BAA6B,KAAK,cAAe,IAAI,EAC1E,KAAK,KAAK,QAAQ,GAAG,kCAAmC,KAAK,cAAe,IAAI,EAChF,KAAK,KAAK,QAAQ,GAAG,yBAA0B,KAAK,cAAe,IAAI,EACvE,KAAK,KAAK,QAAQ,GAAG,8BAA+B,KAAK,cAAe,IAAI,EAC5E,KAAK,KAAK,QAAQ,GAAG,2BAA4B,KAAK,cAAe,IAAI,EACzE,KAAK,KAAK,QAAQ,GAAG,qCAAsC,KAAK,cAAe,IAAI,EACnF,KAAK,KAAK,QAAQ,GAAG,+BAAgC,KAAK,aAAc,IAAI,EAC5E,KAAK,KAAK,QAAQ,GAAG,mCAAoC,KAAK,aAAc,IAAI,EAChF,KAAK,KAAK,QAAQ,GAAG,wBAAyB,KAAK,aAAc,IAAI,EACrE,KAAK,KAAK,QAAQ,GAAG,iCAAkC,KAAK,aAAc,IAAI,EAC9E,KAAK,KAAK,QAAQ,GAAG,sCAAuC,KAAK,aAAc,IAAI,EACnF,KAAK,KAAK,QAAQ,GAAG,2BAA4B,KAAK,aAAc,IAAI,EACxE,KAAK,KAAK,QAAQ,GAAG,gCAAiC,KAAK,aAAc,IAAI,EAC7E,KAAK,KAAK,QAAQ,GAAG,6BAA8B,KAAK,kBAAmB,IAAI,EAC/E,KAAK,KAAK,QAAQ,GAAG,4CAA6C,KAAK,iBAAkB,IAAI,EAC7F,KAAK,KAAK,QAAQ,GAAG,0CAA2C,KAAK,iBAAkB,IAAI,EAC3F,KAAK,KAAK,QAAQ,GAAG,uCAAwC,KAAK,iBAAkB,IAAI,EACxF,KAAK,KAAK,QAAQ,GAAG,0BAA2B5sB,GAAO,CACjDA,IACJ,KAAK,qBAAqB,EAC1B,KAAK,qBAAqB,EAE5B,EAAG,IAAI,EAEP,KAAK,KAAK,QAAQ,GAAG,oCAAqC,IAAM,CAC/D,KAAK,qBAAqB,YAAY,EACtC,KAAK,eAAe,CACrB,EAAG,IAAI,EAEP,KAAK,KAAK,QAAQ,WAAW,iBAAkBA,GAAO,CACrD,KAAK,WAAW,OAAO,YAAaA,EAAM,CAAC,EAC3C,KAAK,gBAAgB,CACtB,CAAC,EAED,KAAK,KAAK,QAAQ,WAAW,yBAA0B,IACtD,KAAK,gBAAgB,CAAC,EAEvB,KAAK,KAAK,QAAQ,WAAW,2BAA4BA,GACxD,KAAK,WAAW,WAAW,gBAAiB,CAAEA,CAAG,CAAC,EAEnD,KAAK,KAAK,QAAQ,WAAW,2BAA4BA,GACxD,KAAK,WAAW,WAAW,cAAe,CAAEA,CAAG,CAAC,EAEjD,KAAK,KAAK,QAAQ,WAAW,4BAA6BA,GACzD,KAAK,WAAW,WAAW,wBAAyB,CAACA,CAAG,CAAC,EAE1D,KAAK,KAAK,QAAQ,WAAW,yBAA0BA,GACtD,KAAK,WAAW,WAAW,iBAAkB,CAAEA,CAAG,CAAC,EAEpD,KAAK,KAAK,QAAQ,WAAW,qBAAsBA,GAClD,KAAK,WAAW,OAAO,eAAgBA,CAAG,CAAC,EAE5C,KAAK,KAAK,QAAQ,WAAW,iBAAkBA,GAC9C,KAAK,WAAW,OAAO,YAAa,CAACA,CAAG,CAAC,EAE1C,KAAK,KAAK,QAAQ,GAAG,gCAAiC,IACrD,KAAK,gBAAgB,YAAY,CAAC,EAEnC,KAAK,KAAK,QAAQ,WAAW,+BAAgCA,GAAO,CACnE,KAAK,WAAW,OAAO,sBAAuBA,IAAQ,GAAKA,IAAQ,CAAC,EACpE,KAAK,WAAW,OAAO,oBAAqBA,EAAM,CAAC,CACpD,CAAC,EAED,KAAK,KAAK,QAAQ,WAAW,oCAAqCA,GACjE,KAAK,WAAW,OAAO,qBAAsBA,CAAG,CAAC,EAElD,KAAK,KAAK,QAAQ,WAAW,+BAAgCA,GAC5D,KAAK,WAAW,OAAO,uBAAwB,CAAEA,CAAG,CAAC,EAEtD,KAAK,KAAK,QAAQ,WAAW,iCAAkCA,GAC9D,KAAK,WAAW,WAAW,uBAAwBA,CAAG,CAAC,EAExD,KAAK,KAAK,QAAQ,WAAW,uBAAwBA,GAAO,CAC3D,KAAK,WAAW,OAAO,YAAaA,CAAG,EACvC,KAAK,iBAAiB,CACvB,CAAC,EAED,KAAK,KAAK,QAAQ,WAAW,uCAAwCA,GACpE,KAAK,WAAW,WAAW,uBAAwB,CAAEA,CAAG,CAAC,EAE1D,KAAK,sBAAsB,EAC3B,KAAK,cAAc,EACnB,KAAK,aAAa,EAClB,KAAK,kBAAkB,EAGvB,KAAK,GAAG,yBAA0B,CAACwW,EAAcC,EAAiBC,EAAeC,IAAa,CAC7F,GAAK,CAAEH,EACN,OAED,MAAMqW,EAAU,IAAI,IAAIlW,EAAS,IAAI,GAAK,EAAE,SAAS,EAAE,CAAC,EAExD,UAAUzS,KAAQ,KAAK,WAAW,UAAW,CAC5C,UAAUyK,KAAOzK,EAAK,OAAQ,CAC7B,MAAM4oB,EAASne,GAAK,GACf,CAAEme,GAAUD,EAAQ,IAAIC,CAAM,GAAK,CAAEne,EAAI,mBAG9Cke,EAAQ,IAAIC,CAAM,EAClBnW,EAAS,KAAK,CACb,QAAShI,EACT,UAAW,KACX,OAAQ,IAAM,IACf,CAAC,EACF,CAEA,UAAUjO,KAAOwD,EAAK,qBAAsB,CAC3C,MAAMyK,EAAMjO,GAAK,MAChBosB,EAASne,GAAK,GACV,CAAEme,GAAUD,EAAQ,IAAIC,CAAM,GAAK,CAAEne,EAAI,mBAG9Cke,EAAQ,IAAIC,CAAM,EAClBnW,EAAS,KAAK,CACb,QAAShI,EACT,UAAW,KACX,OAAQ,IAAM,IACf,CAAC,EACF,CACD,CACD,CAAC,EAED,KAAK,GAAG,wBAAyBlK,GAAK,CACrCA,EAAE,SAAS,KAAK,CACf,KAAM,YACN,YAAa,2BACb,gBAAiB,EACjB,UAAW,cACZ,CAAC,CACF,CAAC,EAED,KAAK,GAAG,wBAAyBA,GAAK,CACrC,MAAMkK,EAAMlK,EAAE,QACbP,EAAOO,EAAE,MAEH,kBAAkB,KAAKkK,CAAG,IAGjClK,EAAE,eAAe,EAEVP,EAAK,QAAQ,WAMnBA,EAAK,WAAW,CACf,KAAMQ,EAAE,WAAW,OACnB,QAASA,EAAE,KAAK,EAAE,iBAAkB,qCAAqC,CAC1E,CAAC,EAEDR,EAAK,OAAO,UAAU,GAVtBA,EAAK,WAAW,CACf,KAAMQ,EAAE,WAAW,OACnB,QAASA,EAAE,KAAK,EAAE,wBAAyB,2CAA2C,CACvF,CAAC,EASH,CAAC,EA6BD,KAAK,eAAe,GAAG,QAAS,KAAK,mBAAoB,IAAI,EAC7D,KAAK,eAAe,GAAG,SAAU,KAAK,YAAa,IAAI,EACvD,KAAK,eAAe,MAAM,CAACL,EAAKC,IAAc,CAC7C,UAAUJ,KAAQI,EACjB,KAAK,mBAAmBJ,CAAI,CAC9B,CAAC,EAED,KAAK,cAAc,GAAG,QAAS,KAAK,gBAAiB,IAAI,EACzD,KAAK,cAAc,GAAG,SAAU,KAAK,gBAAiB,IAAI,EAC1D,KAAK,cAAc,MAAM,IAAM,KAAK,qBAAqB,CAAC,EAE1D,KAAK,cAAc,GAAG,QAAS,KAAK,gBAAiB,IAAI,EACzD,KAAK,cAAc,GAAG,SAAU,KAAK,gBAAiB,IAAI,EAC1D,KAAK,cAAc,MAAM,IAAM,KAAK,qBAAqB,CAAC,EAE1D,MAAMQ,EAAI,KAEV,KAAK,WAAW,GAAG,QAAS,KAAK,iBAAkB,IAAI,EACvD,KAAK,WAAW,GAAG,SAAU,KAAK,iBAAkB,IAAI,EACxD,KAAK,WAAW,GAAG,UAAW,IAAM,KAAK,iBAAiB,IAAI,CAAC,EAC/D,KAAK,WAAW,MAAM,IAAM,KAAK,iBAAiB,KAAK,WAAW,KAAK,CAAC,EAExE,KAAK,gBAAgB,MAAML,GAAO,CACjC,MAAMkM,EAAalM,EAAI,UAAU,OACjCA,EAAI,UAAU,OAAS,UAAW,CACjC,OAAOK,EAAE,KAAK,QAAQ,IAAI,uBAAuB,EAG1C6L,EAAW,KAAK,IAAI,EAFnB,IAGT,EAEA,KAAK,gBAAgB,YAAY,CAClC,CAAC,EAED,KAAK,WAAW,MAAMlM,GAAO,CAC5B,MAAMkM,EAAalM,EAAI,UAAU,OACjCA,EAAI,UAAU,OAAS,UAAW,CACjC,OAAOK,EAAE,KAAK,QAAQ,IAAI,uBAAuB,EAG1C6L,EAAW,KAAK,IAAI,EAFnB,IAGT,EAEA,KAAK,WAAW,YAAY,CAC7B,CAAC,EAED,KAAK,qBAAqB,MAAMlM,GAAO,CACtC,MAAMkM,EAAalM,EAAI,UAAU,OACjCA,EAAI,UAAU,OAAS,UAAW,CACjC,GAAI,CACH,GAAK,CAAEK,EAAE,KAAK,QAAQ,IAAI,2BAA2B,EACpD,OAAO,IACT,OAAQrE,EAAK,CACZqE,EAAE,IAAI,QAAQrE,CAAG,EACjBqE,EAAE,IAAI,MAAMrE,CAAG,CAChB,CAEA,OAAOkQ,EAAW,KAAK,IAAI,CAC5B,EAEA,KAAK,qBAAqB,YAAY,CACvC,CAAC,EAED,KAAK,aAAa,MAAMlM,GAAO,CAC9B,MAAMkM,EAAalM,EAAI,UAAU,OAEjCA,EAAI,UAAU,OAAS,UAAW,CACjC,GAAI,CACH,GAAK,CAAEK,EAAE,KAAK,QAAQ,IAAI,yBAAyB,EAClD,OAAO,KAER,MAAMqoB,EAAS,KAAK,MAAM,eACzBC,EAAW,KAAK,MAAM,YAEhBtoB,EAAE,KAAK,QAAQ,IAAI,0BAA0B,IACnD,KAAK,MAAM,eAAiB,CAAC,GAEvBA,EAAE,KAAK,QAAQ,IAAI,gBAAgB,IACzC,KAAK,MAAM,YAAc,IAE1B,MAAMnE,EAAMgQ,EAAW,KAAK,IAAI,EAEhC,YAAK,MAAM,eAAiBwc,EAC5B,KAAK,MAAM,YAAcC,EAClBzsB,CAER,OAAQF,EAAK,CACZqE,EAAE,IAAI,QAAQrE,CAAG,EACjBqE,EAAE,IAAI,MAAMrE,CAAG,CAChB,CAEA,OAAOkQ,EAAW,KAAK,IAAI,CAC5B,EAEA,KAAK,aAAa,YAAY,CAC/B,CAAC,EAED,KAAK,kBAAkB,MAAMlM,GAAO,CACnCA,EAAI,UAAU,YAAc,UAAW,CACtC,MAAO,CAAE,KAAK,MAAM,QAAU,CAAE,KAAK,OAAO,OAAS,KAAK,SAAS,GAAK,IACzE,EAEA,MAAMkM,EAAalM,EAAI,UAAU,OACjCA,EAAI,UAAU,OAAS,UAAW,CACjC,GAAI,CAQH,GAPK,KAAK,YAAY,GAAK,CAAE,KAAK,YAAcK,EAAE,KAAK,QAAQ,IAAI,0BAA0B,IAC5F,KAAK,WAAa,WAAW,IAAM,CAClC,KAAK,WAAa,KACb,KAAK,SAAW,KAAK,YAAY,GACrC,KAAK,QAAQ,CACf,EAAG,IAAO,KAAK,MAAM,KAAK,OAAO,EAAI,GAAI,CAAC,GAEtC,CAAEA,EAAE,KAAK,QAAQ,IAAI,0BAA0B,EACnD,OAAO,IAET,OAAQrE,EAAK,CACZqE,EAAE,IAAI,QAAQrE,CAAG,EACjBqE,EAAE,IAAI,MAAMrE,CAAG,CAChB,CAEA,OAAOkQ,EAAW,KAAK,IAAI,CAC5B,EAEA,KAAK,kBAAkB,YAAY,CACpC,CAAC,EAED,KAAK,eAAe,GAAG,QAAS,KAAK,YAAa,IAAI,EACtD,KAAK,eAAe,GAAG,UAAW,KAAK,cAAe,IAAI,EAE1D,KAAK,eAAe,GAAG,SAAU,KAAK,YAAa,IAAI,EAEvD,KAAK,YAAY,MAAM,CAAClM,EAAKC,IAAc,CAC1C,KAAK,gBAAgBD,CAAG,EAExB,UAAUH,KAAQI,EAAW,CAC5BJ,EAAK,OAAO,OAAO,UAAU,EAE7BA,EAAK,YAAY,EAEjB,MAAM0N,EAAU1N,EAAK,cACpBgB,EAAQhB,EAAK,QAAQ,SAAS,eAAe,IAAI0N,CAAO,EAAE,GAAG,UAEzD1M,GACJ,KAAK,gBAAgBA,CAAK,EAE3BhB,EAAK,kBAAkB,EAEvBA,EAAK,MAAM,qBAAqB,CAC/B,YAAaA,EAAK,YAClB,UAAWA,CACZ,CAAC,CACF,CACD,CAAC,EAED,KAAK,WAAW,MAAM,CAACG,EAAKC,IAAc,CACzC,KAAK,eAAeD,CAAG,EAEvB,UAAUH,KAAQI,EAAW,CAC5B,MAAM0O,EAAU9O,EAAK,MAAM,kBACtB8O,GACJA,EAAQ,qBAAqB9O,EAAK,aAAa,EAEhDA,EAAK,YAAY,EAEZ8O,GACJA,EAAQ,kBAAkB9O,EAAK,aAAa,EAgB7CA,EAAK,MAAM,oBAAoB,CAC9B,iBAAkBA,EAAK,iBACvB,oBAAqBA,EAAK,oBAC1B,eAAgBA,EAAK,eACrB,YAAaA,EAAK,YAClB,wBAAyBA,EAAK,wBAC9B,4BAA6BA,EAAK,4BAClC,SAAUA,EAAK,SACf,UAAWA,EAAK,UAChB,aAAcA,EAAK,aACnB,UAAWA,EAAK,UAChB,WAAYA,EAAK,WACjB,UAAWA,CACZ,CAAC,CACF,CACD,CAAC,EAED,KAAK,oBAAoB,GAAG,QAAS,KAAK,iBAAkB,IAAI,EAChE,KAAK,oBAAoB,GAAG,SAAU,KAAK,iBAAkB,IAAI,EACjE,KAAK,oBAAoB,GAAG,UAAW,KAAK,mBAAoB,IAAI,EAEpE,KAAK,oBAAoB,MAAM,CAACG,EAAKC,IAAc,CAClD,UAAUJ,KAAQI,EACjB,KAAK,iBAAiBJ,CAAI,CAC5B,CAAC,EAED,KAAK,eAAe,MAAM,CAACG,EAAKC,IAAc,CAC7C,MAAMI,EAAI,KACTkO,EAAYvO,EAAI,UAAU,kBAC1BkM,EAAalM,EAAI,UAAU,OAI5BA,EAAI,UAAU,kBAAoB,SAAShE,EAAKwS,EAAM,CAErD,MAAMC,EAAO,KAAK,MAAM,YAAc,EAMtC,GALKA,EAAO,MACX,KAAK,SAAS,CAAC,WAAYA,EAAO,CAAC,CAAC,EACpCpO,EAAE,IAAI,KAAK,oBAAqBrE,EAAKwS,EAAMC,CAAI,GAG3CF,EACJ,OAAOA,EAAU,KAAK,KAAMvS,EAAKwS,CAAI,CACvC,EAEAxO,EAAI,UAAU,OAAS,UAAW,CACjC,GAAK,KAAK,MAAM,WAAa,EAAI,CAChC,MAAMqO,EAAQhO,EAAE,KAAK,SAAS,EAC7BiO,EAAgBD,GAASA,EAAM,cAEhC,OAAOC,EAGAA,EAAc,MAAO,CAC3B,UAAW,kKACZ,EAAG,qCAAqC,EAJhC,IAMT,CAEA,OAAOpC,EAAW,KAAK,IAAI,CAC5B,EAEA,UAAUrM,KAAQI,EACjB,KAAK,YAAYJ,CAAI,CACvB,CAAC,EAED,KAAK,aAAa,GAAG,QAAS,KAAK,gBAAiB,IAAI,EACxD,KAAK,aAAa,GAAG,UAAW,KAAK,kBAAmB,IAAI,EAC5D,KAAK,aAAa,GAAG,SAAU,KAAK,gBAAiB,IAAI,EAEzD,KAAK,aAAa,MAAM,CAACG,EAAKC,IAAc,CAC3C,UAAUJ,KAAQI,EACjB,KAAK,gBAAgBJ,CAAI,CAC3B,CAAC,EAED,KAAK,cAAc,GAAG,QAAS,KAAK,iBAAkB,IAAI,EAC1D,KAAK,cAAc,GAAG,UAAW,KAAK,mBAAoB,IAAI,EAC9D,KAAK,cAAc,GAAG,SAAU,KAAK,iBAAkB,IAAI,EAE3D,KAAK,gBAAgB,MAAM,CAACG,EAAKC,IAAc,CAC9C,MAAMI,EAAI,KACT6L,EAAalM,EAAI,UAAU,OAE5BA,EAAI,UAAU,OAAS,UAAW,CACjC,GAAI,CACH,GAAKK,EAAE,oBAAsB,CAC5B,MAAMgO,EAAQhO,EAAE,KAAK,SAAS,EAC7BnE,EAAMgQ,EAAW,KAAK,IAAI,EAC1B5H,EAAQpI,GAAK,OAAO,SAErB,OAAK,MAAM,QAAQoI,CAAK,GACvBA,EAAM,KAAK+J,EAAM,cAAchO,EAAE,mBAAmB,CAAC,EAE/CnE,CACR,CACD,MAAa,CAEb,CAEA,OAAOgQ,EAAW,KAAK,IAAI,CAC5B,EAEA,UAAUrM,KAAQI,EACjBJ,EAAK,YAAY,CACnB,CAAC,EAED,KAAK,cAAc,MAAM,CAACG,EAAKC,IAAc,CAC5C,MAAMI,EAAI,KACT6L,EAAalM,EAAI,UAAU,OAC3BuO,EAAYvO,EAAI,UAAU,kBAE3BA,EAAI,UAAU,UAAY,UAAW,CACpC,GAAKK,EAAE,KAAK,QAAQ,IAAI,sBAAsB,EAC7C,OAAO6L,EAAW,KAAK,IAAI,EAE5B,MAAMyU,EAAK,KAAK,MAAM,aACtB,KAAK,MAAM,aAAe,KAC1B,IAAI7D,EAEJ,GAAI,CACHA,EAAS5Q,EAAW,KAAK,IAAI,CAC9B,OAAQlQ,EAAK,CACZ,WAAK,MAAM,aAAe2kB,EACpB3kB,CACP,CAEA,YAAK,MAAM,aAAe2kB,EACnB7D,CACR,EAEA9c,EAAI,UAAU,OAAS,UAAW,CACjC,GAAI,CACH,GAAKK,EAAE,sBAAwB,CAC9B,MAAMgO,EAAQhO,EAAE,KAAK,SAAS,EAC7BnE,EAAM,KAAK,UAAU,EACrBoI,EAAQpI,GAAK,OAAO,UAAU,OAAO,SAEtC,OAAKmS,GAAS,MAAM,QAAQ/J,CAAK,GAChCA,EAAM,KAAK+J,EAAM,cAAchO,EAAE,qBAAqB,CAAC,EAEjDnE,CACR,CAED,MAAa,CAEb,CAEA,OAAO,KAAK,UAAU,CACvB,EAIA8D,EAAI,UAAU,kBAAoB,SAAShE,EAAKwS,EAAM,CAErD,MAAMC,EAAO,KAAK,MAAM,YAAc,EAMtC,GALKA,EAAO,MACX,KAAK,SAAS,CAAC,WAAYA,EAAO,CAAC,CAAC,EACpCpO,EAAE,IAAI,KAAK,8BAA+BrE,EAAKwS,EAAMC,CAAI,GAGrDF,EACJ,OAAOA,EAAU,KAAK,KAAMvS,EAAKwS,CAAI,CACvC,EAGA,UAAU3O,KAAQI,EACjB,KAAK,iBAAiBJ,CAAI,CAC5B,CAAC,EAED,KAAK,QAAQ,GAAG,kBAAmBjE,GAAS,CAC3C,GAAKA,EAAM,SAAW,+BAAiC,KAAK,iBAC3D,OAED,GAAKA,EAAM,SAAW,yBAA2B,CAChD,KAAK,IAAI,MAAM,cAAeA,CAAK,EACnC,MACD,CAEA,MAAMgtB,EAAU,KAAK,YAAY,MAChC3d,EAAUrP,EAAM,QAChBE,EAAOmP,GAAS,MAAM,WAIvB,GAHK,CAAEA,GAAW,CAAE2d,GAAW3d,EAAQ,OAAS,mBAAqB2d,EAAQ,MAAM,WAAa9sB,GAAM,YAGjGA,EAAK,WACT,OAED,MAAM0V,EAAS1V,EAAK,QAAQ,OAAM,OAAIA,EAAK,OAAO,GAAI8sB,EAAQ,MAAM,SAAS,EAC7E,GAAOpX,GAGF,CAAE,KAAK,KAAK,QAAQ,IAAI,8BAA8B,EAAE,IAAI,qBAAqB,EAAI,CACzF,MAAMlH,EAAM,CACX,GAAIxO,EAAK,GACT,KAAM,KAAK,WAAW,QACtB,SAAU,SACV,WAAY0V,EACZ,wBAAsB,MAAoBA,CAAM,EAChD,aAAc,CAAC,EACf,KAAM,CACL,GAAI1V,EAAK,KAAK,GACd,MAAOA,EAAK,KAAK,MACjB,YAAaA,EAAK,KAAK,YACxB,EACA,UAAW,IAAI,KAAKmP,EAAQ,KAAK,WAAanP,EAAK,WAAW,EAAE,QAAQ,CACzE,EAEA8sB,EAAQ,4BAA4B,CAAC,EAAGte,CAAG,CAC5C,CAGD,CAAC,CACF,CAGA,kBAAkBmK,EAAM,CACvB,GAAK,CAAEA,EACN,OAEDA,EAAOsS,GAAqBtS,CAAI,GAAKA,EAAK,QAAQ,KAAM,GAAG,EAE3D,MAAMoU,EAAM,KAAK,eAAiB7B,GACjC8B,EAAU,KAAK,KAAK,QAAQ,IAAI,iCAAiC,EAoBlE,MAlBK,GAAAA,GAAWA,EAAQ,IAAIrU,CAAI,GAG3BA,IAASoU,EAAI,wBACjB,CAAE,KAAK,KAAK,QAAQ,IAAI,2BAA2B,GAI/CpU,IAASoU,EAAI,eACjB,CAAE,KAAK,KAAK,QAAQ,IAAI,oBAAoB,GAIxCpU,IAAS,mBACb,CAAE,KAAK,KAAK,QAAQ,IAAI,2BAA2B,GAI/CA,IAAS,6BACb,CAAE,EAAE,KAAK,QAAQ,IAAI,wBAAwB,EAK/C,CAGA,gBAAiB,CAChB,KAAK,qBAAqB,EAC1B,KAAK,qBAAqB,CAC3B,CAGA,sBAAuB,CACtB,UAAU5U,KAAQ,KAAK,cAAc,UACpC,KAAK,gBAAgBA,CAAI,CAC3B,CAEA,gBAAgBA,EAAM,CACrB,MAAMqN,EAAQrN,EAAK,MAClBjE,EAAQsR,GAAO,MACfuH,EAAO7Y,GAAO,KAKV,KAAK,kBAAkB6Y,CAAI,IAC1B5U,EAAK,MAAM,OACfA,EAAK,MAAM,EAEXA,EAAK,KAAK,GAIP4U,IAAS,eAAiB,CAAEvH,EAAM,QAAU,KAAK,KAAK,QAAQ,IAAI,iBAAiB,GAAK,CAAErN,EAAK,cACnG,KAAK,IAAI,KAAK,sCAAsC,EACpDA,EAAK,YAAc,GACnBA,EAAK,IAAI,GAIL4U,IAAS,QACb,KAAK,cAAc5U,CAAI,CACzB,CAEA,sBAAuB,CACtB,UAAUA,KAAQ,KAAK,cAAc,UACpC,KAAK,gBAAgBA,CAAI,CAC3B,CAEA,gBAAgBA,EAAM,CAErB,GAAKA,EAAK,MAAM,SACf,OAED,MAAMkpB,EAAmBlpB,EAAK,OAAO,OAAO,SAAS,iBACpDjE,EAAQmtB,GAAkB,OAASlpB,EAAK,OAAO,MAC/C4U,EAAO7Y,GAAO,KAKf,GAAK,KAAK,kBAAkB6Y,CAAI,GAAK,KAAK,kBAAkB5U,EAAK,OAAO,OAAO,YAAY,EAAI,CAC9FA,EAAK,SAAS,CAAC,SAAU,EAAI,CAAC,EAC9B,MACD,CAGA,GAAK4U,IAAS,eAAiB,KAAK,KAAK,QAAQ,IAAI,iBAAiB,GAAK,CAAE5U,EAAK,YAAc,CAC/F,MAAMmpB,EAAQD,GAAkB,MAC3BC,IACJ,KAAK,IAAI,KAAK,sCAAsC,EACpDnpB,EAAK,YAAc,GACdA,EAAK,wBACTA,EAAK,wBAAwBmpB,CAAK,EAAE,EAEpCA,EAAM,EAET,CAGKvU,IAAS,QACb,KAAK,cAAc5U,CAAI,CACzB,CAGA,cAAcA,EAAM,CAInB,IAHcA,EAAK,OAAO,OAAO,SAAS,kBAAkB,OAASA,EAAK,OAAO,QAClE,OAED,QAAUA,EAAK,eAAiB,CAAE,KAAK,KAAK,QAAQ,IAAI,yBAAyB,EAC9F,OAGDA,EAAK,cAAgB,GAGN,KAAK,QAAQ,MAAM,EAAE,aACnC,+DACA,KAAK,KAAK,YAAYA,CAAI,EAC1B,GACD,EAEO,KAAKwC,GAAO,CAClBxC,EAAK,cAAgB,GAMhB4U,GAHS5U,EAAK,OAAO,OAAO,SAAS,kBAAkB,OAASA,EAAK,OAAO,QAClE,OAED,QAAU,CAAE,KAAK,KAAK,QAAQ,IAAI,yBAAyB,IAGzEwC,EAAI,MAAM,CAEX,CAAC,EAAE,MAAM,IAAM,CACdxC,EAAK,cAAgB,EACtB,CAAC,CACF,CAGA,mBAAmBA,EAAM,CACxB,GAAKA,EAAK,aACT,OAAO,KAAK,YAAYA,CAAI,EAE7BA,EAAK,aAAe,GAEpB,MAAMQ,EAAI,KACT4oB,EAAkBppB,EAAK,eAExBA,EAAK,eAAiB,SAASjE,KAAUH,EAAM,CAC9C,MAAMytB,EAAUrpB,EAAK,OAASA,EAAK,MAAM,MAAQA,EAAK,MAAM,KAAK,GACjE,OAAKjE,GAASA,EAAM,MAAQstB,GAC3B7oB,EAAE,aAAa,IAAI6oB,CAAO,EAEpBD,EAAgB,KAAK,KAAMrtB,EAAO,GAAGH,CAAI,CACjD,EAEA,KAAK,YAAYoE,CAAI,CACtB,CAEA,YAAYA,EAAM,CACZA,EAAK,eAGVA,EAAK,aAAe,WAAW,IAAM,CAGpC,GAFAA,EAAK,aAAe,KAEfA,EAAK,OAASA,EAAK,MAAM,MAAQ,CAAEA,EAAK,eAAiBA,EAAK,qBAAuB,CACzF,MAAM4F,EAAK5F,EAAK,MAAM,KAAK,GAC3B,GAAK,KAAK,aAAa,IAAI4F,CAAE,EAC5B,OAED,IAAI0jB,EAAQ,KAAK,SAAS,IAAI,2BAA2B,EAEzD,GAAK,CAAEA,EAAQ,CACd,MAAML,EAAU,KAAK,SAAS,IAAI,yCAAyC,EAI3E,GAHKA,IAAajpB,EAAK,MAAM,KAAK,aAAeipB,EAAQ,KAAKjpB,EAAK,MAAM,KAAK,WAAW,GAAOA,EAAK,MAAM,KAAK,mBAAqBipB,EAAQ,KAAKjpB,EAAK,MAAM,KAAK,iBAAiB,KAClLspB,EAAQ,IAEJ,CAAEA,EACN,MACF,CAEA,KAAK,IAAI,KAAK,8BAA+B1jB,CAAE,EAC/C5F,EAAK,gBAAgB,CACtB,CACD,CAAC,EACF,CAEA,iBAAkB,CACjB,MAAMupB,EAAS,KAAK,KAAK,QAAQ,IAAI,gBAAgB,EACpDzG,EAAU,KAAK,KAAK,QAAQ,IAAI,wBAAwB,EAEzD,KAAK,WAAW,OAAO,iBAAkBA,GAAW,CAAEyG,CAAM,EAC5D,KAAK,WAAW,OAAO,oBAAqBzG,GAAWyG,CAAM,CAC9D,CAEA,iBAAkB,CACjB,MAAM7W,EAAQ,CACb,mBAAsB,KAAK,KAAK,QAAQ,IAAI,uBAAuB,EACnE,UAAa,KAAK,KAAK,QAAQ,IAAI,gBAAgB,EACnD,WAAc,KAAK,KAAK,QAAQ,IAAI,yBAAyB,EAC7D,WAAc,KAAK,KAAK,QAAQ,IAAI,yBAAyB,EAC7D,KAAQ,KAAK,KAAK,QAAQ,IAAI,oBAAoB,EAClD,YAAe,KAAK,KAAK,QAAQ,IAAI,6BAA6B,EAClE,oBAAqB,KAAK,KAAK,QAAQ,IAAI,oBAAoB,EAC/D,YAAe,KAAK,KAAK,QAAQ,IAAI,0BAA0B,CAChE,EAEM8W,EAAa,KAAK,iBAAiB,WACzC,GAAO,MAAM,QAAQA,CAAU,EAG/B,UAAUtO,KAASsO,EAAY,CAC9B,GAAK,CAAEtO,GAAS,CAAEA,EAAM,OAAS,CAAEA,EAAM,GACxC,SAED,MAAMtG,EAAOsG,EAAM,MAAM,KACpBtG,MAAQ,OAAIlC,EAAOkC,CAAI,GAAK,CAAElC,EAAMkC,CAAI,IAK5C,KAAK,IAAI,KAAK,iCAAkCA,EAAM,IAAKsG,EAAM,EAAE,EACnE,KAAK,mBAAmB,CACvB,KAAM,mBACN,GAAIA,EAAM,EACX,CAAC,GAGEtG,IAAS,qBACZsG,EAAM,MAAM,aAAe,2DAC3B,KAAK,KAAK,QAAQ,IAAI,6BAA6B,IAEnD,KAAK,IAAI,KAAK,iCAAkCtG,EAAM,IAAKsG,EAAM,EAAE,EACnE,KAAK,mBAAmB,CACvB,KAAM,mBACN,GAAIA,EAAM,EACX,CAAC,EAGH,CACD,CAEA,eAAgB,CACf,MAAMuO,EAAQ,KAAK,cACfA,GAAO,eAAe,OAAO,MAAQ,KAAK,kBAAkBA,EAAM,cAAc,MAAM,IAAI,GAC7FA,EAAM,aAAa,EAEhBA,GAAO,WAAW,CAAC,GAAG,OAAO,MAAQ,KAAK,kBAAkBA,EAAM,SAAS,CAAC,EAAE,MAAM,IAAI,GAC3FA,EAAM,iBAAiBA,EAAM,SAAS,CAAC,EAAE,MAAM,IAAI,CACrD,CAEA,eAAgB,CACf,GAAK,KAAK,uBAAyB,KAAK,oBACvC,MAAO,GAER,MAAMjpB,EAAI,KACTgO,EAAQ,KAAK,KAAK,SAAS,EAC3BC,EAAgBD,GAAO,cACvBkb,EAAW,KAAK,UAAU,UAAU,gBAAgB,EACpDC,EAAa,KAAK,UAAU,UAAU,cAAc,EAErD,OAAOlb,GAGF,CAAE,KAAK,qBAAuBkb,IAClC,KAAK,oBAAsB,UAAW,CACrC,MAAMF,EAAQjb,EAAM,WAAWmb,EAAW,KAAK,EAE/CnpB,OAAAA,EAAE,cAAgBipB,EAClBjpB,EAAE,cAAc,EACT,IACR,EAEA,KAAK,gBAAgB,YAAY,GAG7B,CAAE,KAAK,uBAAyBkpB,IACpC,KAAK,sBAAwB,UAAW,CACvC,MAAMD,EAAQjb,EAAM,WAAWkb,EAAS,KAAK,EAC5CE,EAAWpb,EAAM,WAAWkb,EAAS,QAAQ,EAE9ClpB,OAAAA,EAAE,gBAAkBipB,EACpBjpB,EAAE,mBAAqBopB,EAEvBppB,EAAE,gBAAgB,EAEX,IACR,EAEA,KAAK,cAAc,YAAY,GAGzB,IA9BC,EA+BT,CAGA,gBAAgBQ,EAAO,CACtB,MAAM0a,EAAY,KAAK,KAAK,QAAQ,IAAI,oBAAoB,GAAK,CAAC,KAC7D,eAAY1a,EAAO0a,CAAS,IAGjC,KAAK,KAAK,QAAQ,cAAc,CAC/B,WAAY1a,CACb,CAAC,EAED,KAAK,MAAM,YAAY,EACxB,CAGA,iBAAkB,CACX,KAAK,eACV,KAAK,aAAe,WAAW,IAAM,KAAK,iBAAiB,EAAG,CAAC,EACjE,CAEA,kBAAmB,CACb,KAAK,cACT,aAAa,KAAK,YAAY,EAC/B,KAAK,aAAe,KAEpB,KAAK,IAAI,KAAK,sDAAsD,EACpE,MAAMhB,EAAO,KAAK,cAAc,MAC3BA,GACJ,KAAK,iBAAiBA,EAAMA,EAAK,KAAK,CACxC,CAGA,eAAeG,EAAK,CACnB,GAAKA,EAAI,UAAU,cAClB,OAED,MAAMK,EAAI,KACTqpB,EAAY1pB,EAAI,UAAU,MAC1B2pB,EAAY3pB,EAAI,UAAU,iBAC1B4pB,EAAY5pB,EAAI,UAAU,kBAE3BA,EAAI,UAAU,YAAc,UAAW,CACtC,GAAK,KAAK,eACT,OAED,KAAK,eAAiB,GAEtB,MAAMH,EAAO,KACZgqB,EAAahqB,EAAK,cAClBiqB,EAAUjqB,EAAK,MAAM,oBAEtBA,EAAK,MAAM,oBAAsB,SAASkqB,EAAK,CAC9C,OAAKA,IACJA,EAAI,UAAYlqB,GAEViqB,EAAQC,CAAG,CACnB,EAEAlqB,EAAK,cAAgB,SAASyK,EAAK,CAClC,GAAKA,EACJ,GAAI,CACH,MAAMiI,EAAQlS,EAAE,YAAc,CAAC,EAC9B2pB,EAAY3pB,EAAE,WAAa,CAAC,EAS7B,GARiBA,EAAE,KAAK,QAAQ,IAAI,8BAA8B,EAE/C,IAAIkS,EAAMjI,EAAI,IAAI,CAAC,GAGjCA,EAAI,OAASiI,EAAM,qBAAuB,IAAE,MAAgBjI,EAAI,MAAM,GAGtEA,EAAI,OAASiI,EAAM,YAAc,CAAElS,EAAE,KAAK,QAAQ,IAAI,wBAAwB,EAClF,OAED,GAAKiK,EAAI,OAASiI,EAAM,QAAU,CACjC,MAAM1J,EAAIxI,EAAE,KAAK,mBAAmBiK,CAAG,EACtC7J,EAAOZ,EAAK,gBAAkBA,EAAK,gBAAgB,EAEpD,IAAIyT,EAAUzK,EAAE,OAASA,EAAE,OAASA,EAAE,OAASpI,GAAM,OAAO,UACxD0Q,EAAOtI,EAAE,UAAYA,EAAE,UAAYA,EAAE,UAAYA,EAAE,QAAUA,EAAE,QAAQ,MAAM,CAAC,EAAIpI,GAAM,OAAO,aAEnG,GAAK,CAAE0Q,GAAQmC,EAAU,CACxB,MAAMvX,GAAIsE,EAAE,KAAK,QAAQiT,EAAS,KAAM,EAAI,EACvCvX,IAAKA,GAAE,QACXoV,EAAOtI,EAAE,UAAY9M,GAAE,MACzB,CAEA,GAAK,CAAEuX,GAAWnC,EAAO,CACxB,MAAMpV,GAAIsE,EAAE,KAAK,QAAQ,KAAM8Q,EAAM,EAAI,EACpCpV,IAAKA,GAAE,KACXuX,EAAUzK,EAAE,OAAS9M,GAAE,GACzB,CAEA,MAAM2W,EAAIrS,EAAE,KAAK,QAAQ,EAOzB,GANKqS,GAAKjS,IACTiS,EAAE,UAAYjS,EAAK,MAAM,uBACzBiS,EAAE,MAAQjS,EAAK,MAAM,SAGtBoI,EAAE,WAAaA,EAAE,YAAcxI,EAAE,KAAK,gBAAgBwI,EAAG6J,EAAG,EAAI,EAC3D7J,EAAE,YACN,OAED,GAAKxI,EAAE,aAAa,sBAAsB,EAAI,CAC7C,MAAMzE,GAAQyE,EAAE,UAAU,CACzB,QAASwI,EACT,KAAAhJ,EACA,QAASsR,EACT,UAAWmC,CACZ,CAAC,EAGD,GADAjT,EAAE,KAAK,uBAAwBzE,EAAK,EAC/BA,GAAM,kBAAoBiN,EAAE,YAChC,MACF,CAED,SAGeyB,EAAI,OAASiI,EAAM,YAIjC,GAHAlS,EAAE,KAAK,gBAAiBiK,EAAI,eAAgBA,EAAI,UAAWA,EAAI,gBAAiBA,CAAG,EAG9E,CAAEzK,EAAK,MAAM,uBAAyB,CAC1C,MAAM4U,EAAOnK,EAAI,eAChB3K,EAAS2K,EAAI,UAGd,IAAI2f,EAaJ,GAZKxV,IAASuV,EAAU,IACvBC,EAAM,MACGxV,IAASuV,EAAU,QAC5BC,EAAM,UACGxV,IAASuV,EAAU,SAC5BC,EAAM,UAEFA,IACJ3f,EAAI,qBAAuB2f,GAIvB,CAAEpqB,EAAK,eAAe,IAAIF,CAAM,GAAK8U,IAASuV,EAAU,OAAS,CACrEnqB,EAAK,gBACJ,CACCA,EAAK,OACLA,EAAK,qBAAqB,IAAIO,GAAKA,EAAE,KAAK,CAC3C,EACAT,EACA2K,CACD,EAEAzK,EAAK,qBAAqB,KAAK,CAC9B,MAAOyK,EACP,KAAM,KAAK,IAAI,EACf,YAAa,EACd,CAAC,EAED,MACD,CACD,OAiGcA,EAAI,OAASiI,EAAM,QAC5BlS,EAAE,KAAK,QAAQ,IAAI,6BAA6B,EACpDiK,EAAM,CACL,KAAMiI,EAAM,KACZ,QAASlS,EAAE,KAAK,EAAE,oBAAqB,sDAAsD,CAC9F,EAEAA,EAAE,KAAK,kBAAmBiK,CAAG,EAGhC,OAAQtO,EAAK,CACZqE,EAAE,IAAI,MAAM,+BAAgCrE,CAAG,EAC/CqE,EAAE,IAAI,QAAQrE,EAAK,CAAC,MAAO,CAAC,IAAAsO,CAAG,CAAC,CAAC,CAClC,CAGD,OAAOuf,EAAW,KAAKhqB,EAAMyK,CAAG,CACjC,EA0DAzK,EAAK,UAAY,SAASqqB,EAAQ,CAC5BrqB,EAAK,SAAWqqB,IAGrBrqB,EAAK,OAASqqB,EACPA,IACNrqB,EAAK,iBAAmB,KAAK,IAAIA,EAAK,OAAO,OAAQQ,EAAE,KAAK,QAAQ,IAAI,wBAAwB,CAAC,EAC1FR,EAAK,MAAM,cACjBA,EAAK,kBAAkB,GAE1B,EAEAA,EAAK,UAAY,UAAW,CAC3B,GAAK,CAAEA,EAAK,aAAa,EACxB,OAED,MAAMmkB,EAAM,KAAK,IAAInkB,EAAK,OAAO,OAAQA,EAAK,iBAAmB,EAAE,EAClEkkB,EAAQ,KAAK,IAAI,EAAGC,EAAM3jB,EAAE,KAAK,QAAQ,IAAI,wBAAwB,CAAC,EAEvER,EAAK,MAAMA,EAAK,OAAO,OAASkkB,CAAK,EACrClkB,EAAK,iBAAmBmkB,EAAMD,EACvBlkB,EAAK,MAAM,cACjBA,EAAK,kBAAkB,CACzB,EAEAA,EAAK,WAAa,UAAW,CAC5B,GAAK,CAAEA,EAAK,aAAa,EACxB,OAED,MAAMsqB,EAAW9pB,EAAE,KAAK,QAAQ,IAAI,wBAAwB,EAE5DR,EAAK,MAAMsqB,CAAQ,EACnBtqB,EAAK,iBAAmB,KAAK,IAAIsqB,EAAUtqB,EAAK,OAAO,MAAM,EACtDA,EAAK,MAAM,cACjBA,EAAK,kBAAkB,CACzB,EAEAA,EAAK,YAAc,UAAW,CAC7B,OAAOA,EAAK,OAAO,MAAM,EAAGA,EAAK,kBAAoBA,EAAK,WAAa,EAAE,CAC1E,CACD,EAEAG,EAAI,UAAU,kBAAoB,UAAW,CAC5C,GAAI,CACH,KAAK,YAAY,CAClB,OAAQhE,EAAK,CACZqE,EAAE,IAAI,MAAM,kDAAmDrE,CAAG,CACnE,CAEA,OAAO4tB,EAAU,KAAK,IAAI,CAC3B,EAEA5pB,EAAI,UAAU,MAAQ,SAASoqB,EAAO,CACrC,GAAI,CACEA,GAAS,OACbA,EAAQ,GAET,MAAMD,EAAW9pB,EAAE,KAAK,QAAQ,IAAI,wBAAwB,EAI5D,GAHK,CAAE,KAAK,SAAS,GAAK+pB,EAAQD,IACjCC,EAAQD,GAEJC,GAAS,EACb,KAAK,UAAY,EACjB,KAAK,OAAS,CAAC,EACf,KAAK,qBAAuB,CAAC,EAC7B,KAAK,OAAS,OAER,CACN,MAAMC,EAAS,KAAK,OACnBhC,EAAKhoB,EAAE,YAAcwmB,GACrBlnB,EAAS0qB,EAAO,OAASD,EAE1B,GAAKzqB,EAAS,EAAI,CACjB,IAAI2qB,EAAU,EAAGC,EACjB,QAAQ5rB,EAAE,EAAGA,EAAIgB,EAAQhB,IACnB0rB,EAAO1rB,CAAC,GAAK,CAAEmoB,GAAW,SAASuB,EAAGgC,EAAO1rB,CAAC,EAAE,IAAI,CAAC,IACzD2rB,IACAC,EAAO5rB,GAKT,KAAK,OAAS0rB,EAAO,MAAMC,EAAU,IAAM,EAAI,KAAK,IAAI3qB,EAAS,EAAG4qB,CAAI,EAAI5qB,CAAM,EAClF,KAAK,UAAY0qB,EAAO,OAASD,CAElC,MACC,KAAK,UAAY,EACjB,KAAK,OAAS,KAAK,OAAO,MAAM,CAAC,EAG7B,KAAK,QAAU,KAAK,OAAO,QAAU,KACzC,KAAK,UAAU,EAAK,CACtB,CACD,OAAQpuB,EAAK,CACZqE,OAAAA,EAAE,IAAI,MAAM,sBAAuBrE,CAAG,EAC/B0tB,EAAU,KAAK,KAAMU,CAAK,CAClC,CACD,EAEApqB,EAAI,UAAU,gBAAkB,UAAW,CAC1C,GAAK,KAAK,eACT,OAAO,KAAK,eAEb,MAAMuJ,EAAM,KAAK,IAAI,EACrB,GAAKA,GAAO,KAAK,oBAAsB,GAAK,IAAO,CAClD,KAAK,mBAAqBA,EAC1B,MAAMjF,EAAQjE,EAAE,oBAAoB,MACpC,GAAKiE,GAAO,OAAO,kBAAkB,YAAc,KAClD,OAAO,KAAK,eAAiBA,CAC/B,CACD,EAEAtE,EAAI,UAAU,iBAAmB,UAAW,CAC3C,GAAI,CACH,MAAM9D,EAAM,CAAC,EACZmsB,EAAKhoB,EAAE,YAAcwmB,GACrBtd,EAAM,KAAK,IAAI,EACfihB,EAAYnqB,EAAE,KAAK,QAAQ,IAAI,YAAY,EAC3CoqB,EAAQD,IAAc,GAAK,KAAK,cAAgBA,EAChD3G,EAAQta,EAAMkhB,EACdC,EAAc,KAAK,oCAAsC,KAAK,OAAS,KAAK,MAAM,mCAClFC,EAAY,KAAK,aAAa,EAC9BT,EAAS,KAAK,SAAS,EACvBC,EAAW9pB,EAAE,KAAK,QAAQ,IAAI,wBAAwB,EACtDuqB,EAAYvqB,EAAE,KAAK,QAAQ,IAAI,+BAA+B,EAE9DwqB,EAAaxqB,EAAE,aAAa,qBAAqB,EAElD,IAAI4f,GAAQ,EACX6K,GAAW,KAAK,iBAChBjQ,GAAU,GACVjf,EAED,UAAU0O,KAAO,KAAK,qBACrB,GAAKA,EAAI,MAAQuZ,GAAS,CAAEvZ,EAAI,YAAc,CAC7C,GAAKsgB,IAAc,IAAMA,EAAY,GAAK,CAAEF,IAAgB,KAAK,YAAYpgB,EAAI,KAAK,GAAKA,EAAI,MAAM,QACpG,SAED,GAAKugB,EAAa,CACjB,GAAOjvB,EAoBNA,EAAM,OAAO,MApBC,CACdA,EAAQyE,EAAE,UAAU,CACnB,KAAM,KACN,QAAS,OACT,UAAW,OACX,QAAS,MACV,CAAC,EAED,MAAMI,GAAO,KAAK,gBAAkB,KAAK,gBAAgB,EACxD6S,GAAU7S,IAAQA,GAAK,MAAM,UAI9B,GAFA7E,EAAM,UAAY0X,GAEbA,GAAU,CACd,MAAMvX,GAAIsE,EAAE,KAAK,QAAQiT,GAAS,KAAM,EAAI,EACvCvX,IAAKA,GAAE,QACXH,EAAM,QAAUG,GAAE,MACpB,CAED,CAKA,GAFAH,EAAM,QAAU0O,EAAI,MACpBjK,EAAE,KAAK,sBAAuBzE,CAAK,EAC9BA,EAAM,kBAAoB0O,EAAI,MAAM,YACxC,QACF,CAEA,MAAMigB,GAAO,KAAK,OAAO,KAAK,OAAO,OAAS,CAAC,EAC9C9V,GAAO8V,IAAM,KAGb,CAAE,KAAK,MAAM,6BACZ,CAAE,KAAK,MAAM,oBACb9V,KAAS4T,EAAG,WACZ/d,EAAI,MAAM,OAAS+d,EAAG,WACtB,KAAK,OAAO,KAAKjoB,IAAKA,GAAE,OAASioB,EAAG,oBAAoB,GAEzD,KAAK,OAAO,KAAK,CAChB,KAAMA,EAAG,qBACT,GAAI,wBACL,CAAC,EAWF,KAAK,OAAO,KAAK/d,EAAI,KAAK,EAC1BuQ,GAAU,GAEH,KAAK,SACN,KAAK,OAAO,OAASsP,EACzBlK,KAEA6K,KAGH,MACC5uB,EAAI,KAAKoO,CAAG,EAGd,KAAK,qBAAuBpO,EACvB2e,KACJ,KAAK,MAAM,KAAK,IAAI,IAAK,KAAK,OAAO,OAASoF,EAAK,CAAC,EAC7CA,KAAU,GAAK6K,KAAa,KAAK,kBAAoBH,IAAc,KAAK,aAAa,GAAKT,IAAW,KAAK,SAAS,IACzH,KAAK,iBAAmBY,GACjB,KAAK,MAAM,cACjB,KAAK,kBAAkB,IAIrB,KAAK,uBACT,KAAK,sBAAsB,CAE7B,OAAQ9uB,EAAK,CACZqE,OAAAA,EAAE,IAAI,MAAM,uBAAwBrE,CAAG,EAChC2tB,EAAU,KAAK,IAAI,CAC3B,CACD,CACD,CAGA,UAAUxY,EAAMlG,EAAS,CACxB,GAAK,CAAEkG,EACN,MAAO,GAEHA,EAAK,WAAW,GAAG,IACvBA,EAAOA,EAAK,MAAM,CAAC,GAEpBA,EAAOA,EAAK,YAAY,EAExB,UAAUtR,KAAQ,KAAK,YAAY,UAClC,GAAKsR,IAAS,KAAOtR,EAAK,MAAM,aAAa,YAAY,IAAMsR,EAAO,CACrE,GAAK,OAAOlG,GAAY,SACvBpL,EAAK,WAAW,CACf,MAAO,KAAK,YAAcgnB,IAAY,OACtC,QAAA5b,CACD,CAAC,MACG,CACJ,MAAMiC,EAAQrN,EAAK,MAClB8M,EAAQO,EAAM,aACdzH,EAAKyH,EAAM,UAEPjC,EAAQ,cACD,KAAM,MAEhB,KAAQ,GAGVpL,EAAK,WAAW,CACf,MAAO,KAAK,YAAcgnB,IAAY,QACtC,QAAS,IAAIla,CAAK,GAClB,OAAQlH,EACR,UAAWkH,EACX,GAAI,iBAAc,gBAAa,CAAC,GAChC,SAAU,SACV,eAAgB,GAChB,SAAU1B,EACV,QAAS,KACT,aAAc,CAAC,EACf,UAAW,KAAK,IAAI,EACpB,KAAM,CACL,OAAQxF,EACR,UAAWkH,CACZ,CACD,CAAC,CACF,CAEA,MAAO,EACR,CAGD,MAAO,EACR,CAGA,YAAYwE,EAAMlG,EAAS,CAC1B,MAAM2d,EAAU,KAAK,YAAY,MAEjC,GAAK,CAAEA,GAAW,CAAEzX,EACnB,OAAO,KAKR,GAHKA,EAAK,WAAW,GAAG,IACvBA,EAAOA,EAAK,MAAM,CAAC,GAEfA,EAAK,YAAY,IAAMyX,EAAQ,MAAM,aAAa,YAAY,EAClE,OAAOA,EAAQ,OAAO,YAAYzX,EAAMlG,CAAO,EAEhD2d,EAAQ,YAAY3d,CAAO,CAC5B,CAGA,gBAAgB8G,EAAS,CACjBA,EAAQ,OAGVA,EAAQ,SAGbA,EAAQ,OAAS,WAAW,IAAM,sBAAsB,IAAM,CAC7DA,EAAQ,OAAS,KACZA,EAAQ,MACZA,EAAQ,KAAK,YAAY,CAC3B,CAAC,EAAG,GAAG,GACR,CAGA,gBAAgB/R,EAAK,CACpB,MAAMK,EAAI,KACTupB,EAAY5pB,EAAI,UAAU,kBAC1B+qB,EAAc/qB,EAAI,UAAU,kBAE7BA,EAAI,UAAU,cAAgB,GAE9BA,EAAI,UAAU,YAAc,UAAW,CACtC,GAAK,KAAK,eACT,OAED,KAAK,eAAiB,GAEtB,MAAMH,EAAO,KACZmrB,EAAW,KAAK,YAChBC,EAAa,MAAIxvB,IAASoE,EAAK,WAAW,GAAGpE,CAAI,EAApC,cACbyvB,EAAc,GAAC5gB,EAAKzH,IAAUhD,EAAK,YAAYyK,EAAKzH,CAAK,EAA3C,eAEfhD,EAAK,YAAc,SAASyK,EAAKzH,EAAO,CAGvC,GAFAyH,EAAMA,EAAI,QAAQ,OAAQ,GAAG,EAExBA,EAAI,WAAW,OAAO,EAAI,CAC9BA,EAAMA,EAAI,MAAM,CAAC,EAAE,KAAK,EACxB,MAAME,EAAMF,EAAI,QAAQ,GAAG,EAC3B,IAAI6gB,EACC3gB,IAAQ,IACZ2gB,EAAS7gB,EACTA,EAAM,KAEN6gB,EAAS7gB,EAAI,MAAM,EAAGE,CAAG,EACzBF,EAAMA,EAAI,MAAME,EAAM,CAAC,EAAE,UAAU,GAGpC,MAAM5O,EAAQyE,EAAE,UAAU,CACzB,QAAS8qB,EACT,QAAS7gB,EACT,MAAAzH,EACA,QAASxC,EAAE,KAAK,QAChB,QAASR,EAAK,MAAM,aACpB,MAAOA,EACP,WAAAorB,EACA,YAAAC,CACD,CAAC,EAEKngB,EAAQ,oBAAoBogB,CAAM,GAGxC,OAFa9qB,EAAE,UAAU0K,CAAK,GAEd,OAAS,EACxB1K,EAAE,KAAK0K,EAAOnP,CAAK,EAEnBiE,EAAK,WAAW,CACf,KAAMQ,EAAE,WAAW,OACnB,QAASA,EAAE,KAAK,EAAE,2BAA4B,iCAAkC,CAAC,OAAA8qB,CAAM,CAAC,CACzF,CAAC,EAEK,EACR,CAEA,MAAMvvB,EAAQyE,EAAE,UAAU,CACzB,QAASiK,EACT,MAAAzH,EACA,QAASxC,EAAE,KAAK,QAChB,QAASR,EAAK,MAAM,aACpB,MAAOA,EACP,WAAAorB,EACA,YAAAC,CACD,CAAC,EAID,GAFA7qB,EAAE,KAAK,wBAAyBzE,CAAK,EAEhCA,CAAAA,EAAM,iBAGX,OAAOovB,EAAS,KAAK,KAAMpvB,EAAM,QAASA,EAAM,KAAK,CACtD,CACD,EAGAoE,EAAI,UAAU,kBAAoB,UAAW,CAC5C,GAAI,CACH,KAAK,YAAY,CAClB,OAAQhE,EAAK,CACZqE,EAAE,IAAI,MAAM,mDAAoDrE,CAAG,CACpE,CAEA,OAAO4tB,EAAU,KAAK,IAAI,CAC3B,EAGA5pB,EAAI,UAAU,kBAAoB,YAAYvE,EAAM,CACnD,GAAK,CAAE,KAAK,UAAY,CACvB,MAAMkD,EAAI,KAEV,UAAUzB,KAAOgqB,GAAoB,CACpC,MAAMkE,EAAW,KAAKluB,CAAG,EACpBkuB,IACJ,KAAKluB,CAAG,EAAI,SAASkD,GAAGC,GAAG,CAC1B1B,EAAE,SAAWyB,GACb,MAAMwH,GAAMwjB,EAAS,KAAKzsB,EAAGyB,GAAGC,EAAC,EACjC,OAAA1B,EAAE,SAAW,KACNiJ,EACR,EACF,CAEA,MAAMyjB,EAAe,KAAK,oBAC1B,KAAK,oBAAsB,SAASjrB,EAAG,CAEtC,OAAOirB,EAAa,KAAK,KAAMjrB,CAAC,CACjC,EAGA,MAAMkrB,EAAU,KAAK,oBACrB,KAAK,oBAAsB,SAASlrB,EAAG,CACtC,GAAI,CACH,GAAKC,EAAE,KAAK,QAAQ,IAAI,8BAA8B,EAAE,IAAI,cAAc,EACzE,OAED,GAAKA,EAAE,kBAAoBA,EAAE,KAAK,QAAQ,IAAI,kBAAkB,EAC/D,OAAOirB,EAAQ,KAAK3sB,EAAGyB,CAAC,EAEzB,GAAKC,EAAE,KAAK,QAAQ,IAAI,gBAAgB,EAAI,EAC3C,OAEDD,EAAE,KAAO,GACT,MAAMlE,EAAMyC,EAAE,eAAe,CAAC,QAASyB,CAAC,CAAC,EACzC,OAAAlE,EAAI,SAAW,QACfA,EAAI,WAAakE,EAAE,UACnBlE,EAAI,WAAakE,EAAE,WACnBlE,EAAI,SAAWyC,EAAE,YAAcA,EAAE,YAAYyB,EAAE,QAAQ,EAAI,KAC3DlE,EAAI,SAAWkE,EAAE,QACjBlE,EAAI,UAAYkE,EAAE,gBAAgB,mBAAqB,CACtD,MAAOA,EAAE,eAAe,mBACxB,OAAQA,EAAE,eAAe,gBAC1B,EAAI,KAEGzB,EAAE,4BAA4ByB,EAAGlE,CAAG,CAE5C,OAAQF,EAAK,CACZqE,OAAAA,EAAE,IAAI,QAAQrE,EAAK,CAAC,MAAOoE,CAAC,CAAC,EACtBkrB,EAAQ,KAAK3sB,EAAGyB,CAAC,CACzB,CACD,EAEA,MAAMmb,EAAY,KAAK,iBACvB,KAAK,iBAAmB,SAASnb,EAAG,CACnC,GAAI,CACH,MAAMmN,EAAUnN,EAAE,QACjBqL,GAAUpL,EAAE,KAAK,QAAQ,IAAI,iBAAiB,EAE1CkN,IAAYA,IAAY9B,IAAW8B,IAAY,IAAI9B,EAAO,KAC9DpL,EAAE,gBAAgBD,EAAE,KAAK,CAE3B,OAAQpE,EAAK,CACZqE,EAAE,IAAI,QAAQrE,EAAK,CAAC,MAAOoE,CAAC,CAAC,CAC9B,CAEA,OAAOmb,EAAU,KAAK5c,EAAGyB,CAAC,CAC3B,EAEA,MAAMmrB,EAAa,KAAK,kBACxB,KAAK,kBAAoB,SAASnrB,EAAG,CACpC,GAAI,CACH,MAAMnD,EAAUoD,EAAE,KAAK,QAAQ,IAAI,yBAAyB,EAC5D,GAAKpD,IAAY,EAAI,CAEpB,GAAKmD,EAAE,iBAAmBnD,IAAY,EACrC,OAED,MAAMf,GAAMyC,EAAE,eAAeyB,CAAC,EAC9B,OAAAlE,GAAI,SAAW,OACfA,GAAI,WAAakE,EAAE,WACnBlE,GAAI,YAAckE,EAAE,OACpBlE,GAAI,sBAAwBkE,EAAE,iBAC9BlE,GAAI,cAAgBkE,EAAE,SACtBlE,GAAI,cAAgBkE,EAAE,SACtBlE,GAAI,WAAakE,EAAE,MAEdA,EAAE,kBAENlE,GAAI,QAAU,GACdA,GAAI,YAAc,GAClBA,GAAI,aAAe,CAAC,EACpBkE,EAAE,QAAQ,KAAO,IAKXzB,EAAE,4BAA4ByB,EAAGlE,EAAG,CAC5C,CAED,OAAQF,EAAK,CACZqE,EAAE,IAAI,QAAQrE,EAAK,CAAC,MAAOoE,CAAC,CAAC,CAC9B,CAEA,OAAOmrB,EAAW,KAAK5sB,EAAGyB,CAAC,CAC5B,EAEA,MAAMorB,EAAY,KAAK,sBACvB,KAAK,sBAAwB,SAASprB,EAAG,CACxC,GAAI,CACH,GAAKC,EAAE,KAAK,QAAQ,IAAI,8BAA8B,EAAE,IAAI,gBAAgB,EAC3E,OAED,GAAKA,EAAE,kBAAoBA,EAAE,KAAK,QAAQ,IAAI,kBAAkB,EAC/D,OAAOmrB,EAAU,KAAK7sB,EAAGyB,CAAC,EAE3B,GAAKC,EAAE,KAAK,QAAQ,IAAI,gBAAgB,EAAI,GAAK,CAAED,EAAE,KACpD,OAED,MAAMlE,EAAMyC,EAAE,eAAe,CAAC,QAASyB,CAAC,CAAC,EACzC,OAAAlE,EAAI,SAAW,QACfA,EAAI,WAAakE,EAAE,WACnBlE,EAAI,WAAakE,EAAE,UACnBlE,EAAI,SAAWyC,EAAE,YAAcA,EAAE,YAAYyB,EAAE,QAAQ,EAAI,KAC3DlE,EAAI,eAAiBkE,EAAE,kBAAoB,EAC3ClE,EAAI,WAAakE,EAAE,cAAgB,EACnClE,EAAI,iBAAmBkE,EAAE,wBACzBlE,EAAI,WAAakE,EAAE,OACnBlE,EAAI,SAAWkE,EAAE,QACjBlE,EAAI,UAAYkE,EAAE,gBAAgB,mBAAqB,CACtD,MAAOA,EAAE,eAAe,mBACxB,OAAQA,EAAE,eAAe,gBAC1B,EAAI,KAIGzB,EAAE,4BAA4ByB,EAAGlE,CAAG,CAE5C,OAAQF,EAAK,CACZqE,OAAAA,EAAE,IAAI,QAAQrE,EAAK,CAAC,MAAOoE,CAAC,CAAC,EACtBorB,EAAU,KAAK7sB,EAAGyB,CAAC,CAC3B,CACD,EAEA,MAAMqrB,EAAY,KAAK,cAAgB,CAAC,EAElCC,EAAc,KAAK,wBACzB,KAAK,wBAA0B,SAAStrB,EAAG,CAC1C,GAAI,CACH,GAAKC,EAAE,KAAK,QAAQ,IAAI,8BAA8B,EAAE,IAAI,SAAS,EACpE,OAED,GAAKA,EAAE,kBAAoBA,EAAE,KAAK,QAAQ,IAAI,kBAAkB,EAC/D,OAAOqrB,EAAY,KAAK/sB,EAAGyB,CAAC,EAE7B,MAAMlD,EAAM,GAAGkD,EAAE,OAAO,IAAIA,EAAE,KAAK,MAAM,GACxC2R,GAAU0Z,EAAUvuB,CAAG,EAExB,GAAK6U,GACJ,GAAKA,GAAQ,QAAU,KAAK,IAAI,EAC/B0Z,EAAUvuB,CAAG,EAAI,SACX,CACN6U,GAAQ,WAAW,KAAK,CACvB,GAAI3R,EAAE,YACN,MAAOA,EAAE,eACT,YAAaA,EAAE,aAChB,CAAC,EAEG2R,GAAQ,WAAW,QAAUA,GAAQ,OACxC0Z,EAAUvuB,CAAG,EAAI,MAEb6U,GAAQ,MACZ1R,EAAE,gBAAgB0R,EAAO,EAE1B,MACD,CAGD3R,EAAE,KAAO,GACT,MAAMlE,GAAMyC,EAAE,eAAe,CAAC,QAASyB,CAAC,CAAC,EACzC,OAAAlE,GAAI,SAAW,WACfA,GAAI,WAAakE,EAAE,WACnBlE,GAAI,cAAgB,CACnB,GAAIkE,EAAE,YACN,MAAOA,EAAE,eACT,YAAaA,EAAE,aAChB,EACAlE,GAAI,WAAakE,EAAE,UACnBlE,GAAI,SAAWyC,EAAE,YAAcA,EAAE,YAAYyB,EAAE,QAAQ,EAAI,KAC3DlE,GAAI,WAAakE,EAAE,WACnBlE,GAAI,SAAWkE,EAAE,QACjBlE,GAAI,UAAYkE,EAAE,YAGXzB,EAAE,4BAA4ByB,EAAGlE,EAAG,CAE5C,OAAQF,EAAK,CACZqE,OAAAA,EAAE,IAAI,QAAQrE,EAAK,CAAC,MAAOoE,CAAC,CAAC,EACtBsrB,EAAY,KAAK/sB,EAAGyB,CAAC,CAC7B,CACD,EAEA,MAAMurB,EAAqB,KAAK,6BAChC,KAAK,6BAA+B,SAASvrB,EAAG,CAC/C,GAAI,CACH,GAAKC,EAAE,iBACN,OAAOsrB,EAAmB,KAAK,KAAMvrB,CAAC,EAEvC,GAAKC,EAAE,KAAK,QAAQ,IAAI,8BAA8B,EAAE,IAAI,uBAAuB,EAAI,CACtF,MAAMnE,EAAMyC,EAAE,eAAeyB,CAAC,EAC9B,OAAAlE,EAAI,WAAakE,EAAE,WACZzB,EAAE,4BAA4ByB,EAAGlE,CAAG,CAC5C,CAED,OAAQF,EAAK,CACZqE,EAAE,IAAI,QAAQrE,EAAK,CAAC,MAAOoE,CAAC,CAAC,EAC7BC,EAAE,IAAI,MAAMrE,CAAG,CAChB,CAEA,OAAO2vB,EAAmB,KAAK,KAAMvrB,CAAC,CACvC,EAEA,MAAMwrB,EAAkB,KAAK,4BAC7B,KAAK,4BAA8B,SAASxrB,EAAG,CAC9C,GAAI,CACH,GAAKC,EAAE,KAAK,QAAQ,IAAI,8BAA8B,EAAE,IAAI,aAAa,EACxE,OAED,GAAKA,EAAE,kBAAoBA,EAAE,KAAK,QAAQ,IAAI,kBAAkB,EAC/D,OAAOurB,EAAgB,KAAKjtB,EAAGyB,CAAC,EAEjC,MAAMlD,EAAM,GAAGkD,EAAE,OAAO,QACvB2R,GAAU0Z,EAAUvuB,CAAG,EAExB,GAAK6U,GACJ,GAAKA,GAAQ,QAAU,KAAK,IAAI,EAC/B0Z,EAAUvuB,CAAG,EAAI,SACb,CACJ6U,GAAQ,WAAW,KAAK,CACvB,GAAI3R,EAAE,YACN,MAAOA,EAAE,eACT,YAAaA,EAAE,aAChB,CAAC,EAEG2R,GAAQ,WAAW,QAAUA,GAAQ,OACxC0Z,EAAUvuB,CAAG,EAAI,MAEb6U,GAAQ,MACZ1R,EAAE,gBAAgB0R,EAAO,EAE1B,MACD,CAGD3R,EAAE,KAAO,GACT,MAAMlE,GAAMyC,EAAE,eAAe,CAAC,QAASyB,CAAC,CAAC,EACzC,OAAAlE,GAAI,SAAW,WACfA,GAAI,WAAakE,EAAE,WACnBlE,GAAI,WAAakE,EAAE,UACnBlE,GAAI,SAAWyC,EAAE,YAAcA,EAAE,YAAYyB,EAAE,QAAQ,EAAI,KAC3DlE,GAAI,SAAW,GACfA,GAAI,cAAgB,CACnB,GAAIkE,EAAE,YACN,MAAOA,EAAE,eACT,YAAaA,EAAE,aAChB,EACAlE,GAAI,WAAakE,EAAE,WACnBlE,GAAI,SAAWkE,EAAE,QACjBlE,GAAI,UAAYkE,EAAE,YAGXzB,EAAE,4BAA4ByB,EAAGlE,EAAG,CAE5C,OAAQF,EAAK,CACZqE,OAAAA,EAAE,IAAI,QAAQrE,EAAK,CAAC,MAAOoE,CAAC,CAAC,EACtBwrB,EAAgB,KAAKjtB,EAAGyB,CAAC,CACjC,CACD,EAEA,MAAMyrB,EAAiB,KAAK,+BAC5B,KAAK,+BAAiC,SAASzrB,EAAG,CACjD,GAAI,CACH,GAAKC,EAAE,KAAK,QAAQ,IAAI,8BAA8B,EAAE,IAAI,gBAAgB,EAC3E,OAED,GAAKA,EAAE,kBAAoBA,EAAE,KAAK,QAAQ,IAAI,kBAAkB,EAC/D,OAAOwrB,EAAe,KAAKltB,EAAGyB,CAAC,EAEhC,IAAI2R,EAAU,KACd,GAAK3R,EAAE,cAAgBC,EAAE,KAAK,QAAQ,IAAI,uBAAuB,EAAI,CACpE,MAAMnD,GAAM,GAAGkD,EAAE,OAAO,IAAIA,EAAE,KAAK,MAAM,GACzC2R,EAAU0Z,EAAUvuB,EAAG,EAAI,CAC1B,WAAY,CAAC,EACb,KAAMkD,EAAE,cACR,QAAS,KAAK,IAAI,EAAI,GACvB,CACD,CAEAA,EAAE,KAAO,GACT,MAAMlE,GAAMyC,EAAE,eAAe,CAAC,QAASyB,CAAC,CAAC,EACzC,OAAAlE,GAAI,SAAW,cACfA,GAAI,WAAakE,EAAE,WACnBlE,GAAI,WAAakE,EAAE,UACnBlE,GAAI,SAAWyC,EAAE,YAAcA,EAAE,YAAYyB,EAAE,QAAQ,EAAI,KAC3DlE,GAAI,QAAU6V,EACd7V,GAAI,SAAWkE,EAAE,KACjBlE,GAAI,UAAYkE,EAAE,cAClBlE,GAAI,UAAYkE,EAAE,YAGXzB,EAAE,4BAA4ByB,EAAGlE,EAAG,CAE5C,OAAQF,EAAK,CACZqE,OAAAA,EAAE,IAAI,QAAQrE,EAAK,CAAC,MAAOoE,CAAC,CAAC,EACtByrB,EAAe,KAAKltB,EAAGyB,CAAC,CAChC,CACD,EAEA,MAAM0rB,EAAqB,KAAK,mCAChC,KAAK,mCAAqC,SAAS1rB,EAAG,CACrD,GAAI,CACH,GAAKC,EAAE,KAAK,QAAQ,IAAI,8BAA8B,EAAE,IAAI,oBAAoB,EAC/E,OAED,GAAKA,EAAE,kBAAoBA,EAAE,KAAK,QAAQ,IAAI,kBAAkB,EAC/D,OAAOyrB,EAAmB,KAAKntB,EAAGyB,CAAC,EAEpC,IAAI2R,EAAU,KACd,GAAK3R,EAAE,cAAgBC,EAAE,KAAK,QAAQ,IAAI,uBAAuB,EAAI,CACpE,MAAMnD,GAAM,GAAGkD,EAAE,OAAO,QACxB2R,EAAU0Z,EAAUvuB,EAAG,EAAI,CAC1B,WAAY,CAAC,EACb,KAAMkD,EAAE,cACR,QAAS,KAAK,IAAI,EAAI,GACvB,CACD,CAEAA,EAAE,KAAO,GACT,MAAMlE,GAAMyC,EAAE,eAAe,CAAC,QAASyB,CAAC,CAAC,EACzC,OAAAlE,GAAI,SAAW,cACfA,GAAI,WAAakE,EAAE,WACnBlE,GAAI,SAAW,GACfA,GAAI,QAAU6V,EACd7V,GAAI,SAAWkE,EAAE,KACjBlE,GAAI,UAAYkE,EAAE,cAClBlE,GAAI,UAAYkE,EAAE,YAGXzB,EAAE,4BAA4ByB,EAAGlE,EAAG,CAE5C,OAAQF,EAAK,CACZqE,OAAAA,EAAE,IAAI,QAAQrE,EAAK,CAAC,MAAOoE,CAAC,CAAC,EACtB0rB,EAAmB,KAAKntB,EAAGyB,CAAC,CACpC,CACD,EAEA,MAAM2rB,GAAa,KAAK,cACxB,KAAK,cAAgB,SAAS3rB,EAAG,CAChC,GAAI,CACH,GAAKC,EAAE,KAAK,QAAQ,IAAI,8BAA8B,EAAE,IAAI,QAAQ,EACnE,OAED,GAAKA,EAAE,iBACN,OAAO0rB,GAAW,KAAKptB,EAAGyB,CAAC,EAE5B,MAAMlE,EAAMyC,EAAE,eAAeyB,CAAC,EAC9B,OAAAlE,EAAI,WAAakE,EAAE,WACnBlE,EAAI,SAAW,SACfA,EAAI,OAASkE,EAAE,KAERzB,EAAE,4BAA4ByB,EAAGlE,CAAG,CAE5C,OAAQF,EAAK,CACZqE,OAAAA,EAAE,IAAI,QAAQrE,EAAK,CAAC,MAAOoE,CAAC,CAAC,EACtB2rB,GAAW,KAAKptB,EAAGyB,CAAC,CAC5B,CACD,EAEA,MAAM4rB,GAAa,KAAK,2BACxB,KAAK,2BAA6B,SAAS5rB,EAAG,CAC7C,GAAI,CACH,GAAKC,EAAE,KAAK,QAAQ,IAAI,8BAA8B,EAAE,IAAI,qBAAqB,EAChF,OAED,GAAKA,EAAE,iBACN,OAAO2rB,GAAW,KAAKrtB,EAAGyB,CAAC,EAE5B,MAAMoR,EAASpR,EAAE,aAAY,OAAIA,EAAE,SAAUzB,EAAE,MAAM,SAAS,EAC9D,GAAK6S,EAAS,CACb,MAAMtV,GAAMyC,EAAE,eAAeyB,CAAC,EAE9B,OAAKC,EAAE,KAAK,QAAQ,IAAI,sBAAsB,MAAK,MAAgBmR,CAAM,GAAKpR,EAAE,YACxEzB,EAAE,4BAA4ByB,EAAG,CACvC,KAAMC,EAAE,WAAW,oBACnB,GAAInE,GAAI,GACR,YAAaA,GAAI,KAAK,gBACtB,MAAOA,GAAI,KAAK,UAChB,OAAAsV,EACA,QAAStV,GACT,OAAQA,GAAI,KAAK,OACjB,YAAakE,EAAE,YACf,WAAYA,EAAE,UACf,CAAC,GAEDlE,GAAI,iBAAmBkE,EAAE,YACzBlE,GAAI,WAAakE,EAAE,WACnBlE,GAAI,SAAW,SACfA,GAAI,WAAasV,EACjBtV,GAAI,wBAAuB,MAAoBsV,CAAM,EAE9C7S,EAAE,4BAA4ByB,EAAGlE,EAAG,EAE7C,CAED,OAAQF,EAAK,CACZqE,EAAE,IAAI,MAAMrE,CAAG,EACfqE,EAAE,IAAI,QAAQrE,EAAK,CAAC,MAAOoE,CAAC,CAAC,CAC9B,CAEA,OAAO4rB,GAAW,KAAKrtB,EAAGyB,CAAC,CAC5B,EAcA,MAAM6rB,GAAU,KAAK,WACrB,KAAK,WAAa,SAAS7rB,EAAG,CAC7B,MAAMgrB,EAAWzsB,EAAE,SACnB,OAAKysB,GAAY,CAAEhrB,EAAE,aACbzB,EAAE,4BAA4BysB,EAAUhrB,CAAC,EAE1C6rB,GAAQ,KAAKttB,EAAGyB,CAAC,CACzB,EAEA,KAAK,UAAY,EAClB,CAEA,OAAO2qB,EAAY,MAAM,KAAM,GAAGtvB,CAAI,CACvC,EAEAuE,EAAI,UAAU,4BAA8B,SAASorB,EAAUngB,EAAS,CACvE,MAAMihB,EAAejhB,EASrB,GARAA,EAAQ,aAAe,IAIlBA,EAAQ,OAAS5K,EAAE,WAAW,qBAAuB4K,EAAQ,OAAS5K,EAAE,WAAW,uBAA0B4K,EAAQ,SAAS,KAAOA,EAAQ,SAAS,oBAC1JA,EAAUA,EAAQ,SAGdmgB,EAAS,QAAU,CACvB,IAAIpN,EAAO/S,EAAQ,QAAUmgB,EAAS,QAAQ,YAAY,EAI1D,GAHKpN,EAAK,WAAW,GAAG,IACvBA,EAAOA,EAAK,MAAM,CAAC,GAEfA,IAAS,KAAK,MAAM,aAAa,YAAY,EACjD,OAED/S,EAAQ,UAAY+S,CACrB,CAKA,GAHA/S,EAAQ,cAAgBA,EAAQ,YAAcmgB,EAAS,SAAS,YAAc,GAC9EngB,EAAQ,cAAgBmgB,EAAS,SAAS,oBAAsB,GAE3DA,EAAS,QAAU,CACvB,MAAMnmB,EAAOmmB,EAAS,QAAQ,KAC7Be,EAAQf,EAAS,QAAQ,MAI1B,GAHKnmB,IACJgG,EAAQ,OAAShG,EAAK,QAElBknB,GAAS,KAAK,qBAAuB,CACzC,MAAMC,EAAY,KAAK,MAAM,wBAA0B/rB,EAAE,KAAK,QAAQ,IAAI,yBAAyB,EAC9F+rB,IACJ,KAAK,MAAM,uBAAyB,IACrCnhB,EAAQ,MAAQ,KAAK,qBAAqBkhB,CAAK,EAC1CC,IACJ,KAAK,MAAM,uBAAyB,GACtC,EAEI,CAAEnhB,EAAQ,SAAW,OAAOA,EAAQ,SAAY,YAC9C,OAAOmgB,EAAS,QAAW,SAC/BngB,EAAQ,QAAUmgB,EAAS,OAE3BngB,EAAQ,QAAUmgB,EAAS,QAAQ,KAEtC,CAEA,KAAK,WAAWc,CAAY,CAC7B,CACD,CAYA,QAAQ5nB,EAAO4I,EAAO,CAIrB,GAHOA,IACNA,EAAQ5I,EAAM,OAEV,CAAE4I,EAAM,UACZ,OAAO,KAER,MAAMiE,EAAO7M,EAAM,UAAY,KAAK,KAAK,QAAQ4I,EAAM,UAAWA,EAAM,cAAgBA,EAAM,aAAa,YAAY,EAAG,GAAO,EAAI,EACrI,OAAAiE,EAAK,IAAI7M,CAAK,EACP6M,CACR,CAGA,WAAW7M,EAAO,CACVA,EAAM,YAGbA,EAAM,UAAU,MAAMA,CAAK,EAC3BA,EAAM,UAAY,KACnB,CAOA,YAAY+nB,EAAMnf,EAAO,CACnBmf,EAAK,aACTA,EAAK,WAAW,cAAgBA,GAE1Bnf,IACNA,EAAQmf,EAAK,OAEP,KAAK,QAAQA,EAAMnf,CAAK,IAG/B,KAAK,qBAAqBmf,EAAMnf,EAAM,UAAU,EAIhD,KAAK,SAAS,cAAc,CAC3B,UAAWA,EAAM,uBACjB,WAAYA,EAAM,QACnB,CAAC,GAEIA,EAAM,YAAcA,EAAM,WAC9B,KAAK,SAAS,cAAc,CAC3B,QAASA,EAAM,cAAgBA,EAAM,aAAa,YAAY,EAC9D,UAAWA,EAAM,SAClB,CAAC,EAEF,KAAK,KAAK,QAAQ,cAAc,CAC/B,UAAWA,EAAM,uBACjB,QAASA,EAAM,cAAgBA,EAAM,aAAa,YAAY,EAC9D,UAAWA,EAAM,SAIlB,CAAC,EACF,CAGA,cAAcmf,EAAM,CACdA,EAAK,YAAcA,EAAK,WAAW,gBAAkB,OACzDA,EAAK,WAAW,cAAgB,OAE5BA,EAAK,MAAM,YAAcA,EAAK,MAAM,WACxC,KAAK,SAAS,cAAc,CAC3B,QAAS,KACT,UAAW,IACZ,CAAC,EAEF,KAAK,SAAS,cAAc,CAC3B,UAAW,GACX,WAAY,EACb,CAAC,EAED,KAAK,KAAK,QAAQ,cAAc,CAC/B,UAAW,GACX,QAAS,KACT,UAAW,IACZ,CAAC,EAED,KAAK,WAAWA,CAAI,CACrB,CAGA,YAAYA,EAAMnf,EAAO,CAIxB,GAHKmf,EAAK,aACTA,EAAK,WAAW,cAAgBA,GAE5B,CAAEA,EAAK,WAAanf,EAAM,WAAamf,EAAK,UAAU,GAAK,CAC/D,KAAK,WAAWA,CAAI,EACfA,EAAK,cACT,KAAK,YAAYA,CAAI,EACtB,MACD,CAEKnf,EAAM,aAAemf,EAAK,MAAM,YACpC,KAAK,qBAAqBA,EAAMA,EAAK,MAAM,UAAU,EAItD,IAAI1f,EAAQ0f,EAAK,MAAM,aAClB1f,IACJA,EAAQA,EAAM,YAAY,IAEtB0f,EAAK,MAAM,YAAcA,EAAK,MAAM,WACxC,KAAK,SAAS,cAAc,CAC3B,QAAS1f,EACT,UAAW0f,EAAK,MAAM,SACvB,CAAC,EAEF,KAAK,SAAS,cAAc,CAC3B,UAAWA,EAAK,MAAM,uBACtB,WAAYA,EAAK,MAAM,QACxB,CAAC,EAED,KAAK,KAAK,QAAQ,cAAc,CAC/B,UAAWA,EAAK,MAAM,uBACtB,QAAS1f,EACT,UAAW0f,EAAK,MAAM,SAIvB,CAAC,CACF,CAGA,qBAAqBA,EAAMC,EAAQ,CAClC,MAAMnb,EAAOkb,EAAK,UAClB,GAAK,CAAElb,EACN,OAID,IAAIob,EAAW,KACf,GAAKD,GAAU,MAAM,QAAQA,EAAO,cAAc,EAAI,CACrDC,EAAW,IAAI,IACf,UAAU1X,KAAUyX,EAAO,eACrBzX,GAAUA,EAAO,QACrB0X,EAAS,IAAI1X,EAAO,MAAM,CAC7B,CAEM,CAAE,KAAK,eAAiB,CAAE0X,MAAa,cAAW,KAAK,cAAeA,CAAQ,IAGpF,KAAK,cAAgBA,EAErBpb,EAAK,iBAAiBqb,GAAiBF,CAAM,CAAC,EAC9C,KAAK,UAAU,iBAAiB,EAEjC,CAOA,iBAAiBzsB,EAAM,CACtB,MAAMwqB,EAASxqB,EAAK,MAAM,iBACrBwqB,GAAUA,EAAO,WAAaA,EAAO,UAAU,iBAAmBxqB,IACtEwqB,EAAO,UAAU,eAAiBxqB,EACpC,CAEA,iBAAiBA,EAAMqN,EAAO,CAC7B,MAAMmd,EAASnd,EAAM,iBACpBuf,EAAa5sB,EAAK,MAAM,iBAEpBwqB,IAAWoC,IAGXpC,GAAUA,EAAO,WAAaA,EAAO,UAAU,iBAAmBxqB,IACtEwqB,EAAO,UAAU,eAAiB,MAE9BoC,GAAcA,EAAW,WAAaA,EAAW,UAAU,iBAAmB5sB,IAClFwqB,EAAO,UAAU,eAAiBxqB,GACpC,CAEA,mBAAmBA,EAAM,CACxB,MAAMwqB,EAASxqB,EAAK,MAAM,iBACrBwqB,GAAUA,EAAO,WAAaA,EAAO,UAAU,iBAAmBxqB,IACtEwqB,EAAO,UAAU,eAAiB,KACpC,CAOA,gBAAgB5pB,EAAMyM,EAAO,CACrBA,IACNA,EAAQzM,EAAK,OAId,KAAK,0BAA0BA,EAAMyM,GAAO,yBAAyB,CACtE,CAGA,0BAA0BzM,EAAM3E,EAAM,CAGrC,GAFAA,IAAAA,EAAS2E,EAAK,MAAM,2BAEfA,EAAK,qBAAuB3E,EAChC,OAED,KAAK,iBAAmB2E,EAAK,mBAAqB3E,EAClD,KAAK,aAAe2E,EAAK,kBAAoBA,EAAK,mBAAqB,CAAC,EAExE,MAAMisB,EAAa,IAAI,IAAI,OAAO,KAAKjsB,EAAK,iBAAiB,CAAC,EAC9D,IAAIksB,EAAiB,GAErB,GAAI7wB,GAAQ,KACX,SAAU,CAACwX,EAASsZ,CAAE,IAAK9wB,EAAK,QAAQ,EAAG,CAC1C4wB,EAAW,OAAOpZ,CAAO,EAEzB,IAAInC,EAAO1Q,EAAK,kBAAkB6S,CAAO,EAClCnC,IAENA,EAAO,KAAK,KAAK,QAAQmC,EAASsZ,EAAG,KAAK,EAC1Czb,EAAK,IAAI1Q,CAAI,EACbA,EAAK,kBAAkB6S,CAAO,EAAInC,GAInC,MAAM0F,EAAK+V,EAAG,QAAQ,cAItB,IAAIxC,EAAQ,EACZ,GAAIvT,EACH,UAAUkE,KAASlE,EAAG,OAAO,EAC5B,UAAUjO,KAAKmS,EAAM,OAAO,EAC3BqP,IAKEjZ,EAAK,WAAW,IAAMiZ,IAC1BuC,EAAiB,GACjBxb,EAAK,aAAa0F,CAAE,EAEtB,CAGD,UAAUvD,KAAWoZ,EAAY,CAChC,MAAMvb,EAAO1Q,EAAK,kBAAkB6S,CAAO,EACtCnC,GACJA,EAAK,MAAM1Q,CAAI,EAEhB0Q,EAAK,YAAY,EACjB,OAAO1Q,EAAK,kBAAkB6S,CAAO,CACtC,CAEA,MAAMuZ,EAAS,OAAO,KAAKpsB,EAAK,iBAAiB,EAEjD,UAAU0Q,KAAQ,OAAO,OAAO1Q,EAAK,iBAAiB,EACrD0Q,EAAK,WAAW0b,CAAM,EAIlBA,EAAO,OAAS,GAAK,KAAK,SAAS,SAAS,IAAI,oBAAoB,IAAM,IAC9E,KAAK,SAAS,SAAS,IAAI,qBAAsB,CAAC,EAClD,KAAK,UAAU,IAAK,CACnB,KAAM,iBACN,QAAS,KAAK,KAAK,EAAE,2BAA4B,0MAA0M,CAC5P,CAAC,GAGGF,GACJ,KAAK,UAAU,iBAAiB,CAClC,CAEA,kBAAkBlsB,EAAM,CAEvB,GAAIA,EAAK,kBACR,UAAU0Q,KAAQ,OAAO,OAAO1Q,EAAK,iBAAiB,EACrD0Q,EAAK,MAAM1Q,CAAI,EAEjBA,EAAK,kBAAoB,KACzBA,EAAK,mBAAqB,KAC1B,KAAK,iBAAmB,IAAI,IAC5B,KAAK,aAAe,CAAC,CACtB,CAEA,gBAAgBA,EAAMyM,EAAO,CAC5B,KAAK,0BAA0BzM,EAAMyM,GAAO,yBAAyB,CACtE,CAOA,IAAI,qBAAsB,CACzB,MAAM7D,EAAQ,KAAK,OAAO,aAC1B,OAAO,IAAS,cAAc,SAASA,CAAK,GAAK,IAAS,gBAAgB,SAASA,CAAK,CACzF,CAEA,iBAAiB5I,EAAMyM,EAAO,CAI7B,GAHOA,IACNA,EAAQzM,EAAK,OAET,EAAE,KAAK,QAAQA,EAAMyM,CAAK,IAG/B,KAAK,qBAAqBzM,EAAMyM,EAAM,UAAU,EAE3CA,EAAM,iBAAiB,OAC3B,KAAK,KAAK,OAAO,mBAAmBA,EAAM,gBAAgB,MAAM,EACxDA,EAAM,MAAM,QACpB,KAAK,KAAK,OAAO,mBAAmBA,EAAM,KAAK,MAAM,EAEjDA,EAAM,MAAO,CACjB,GAAK,KAAK,oBAAqB,CAC9B,MAAMW,EAAQX,EAAM,KAAK,MAAM,gBAC/B,KAAK,QAAQ,cAAc,EAAE,mBAAmBW,CAAK,EAErD,KAAK,SAAS,cAAc,CAC3B,QAASX,EAAM,aACf,UAAWA,EAAM,UACjB,aAAcW,CACf,CAAC,CACF,CAEA,KAAK,iBAAiBpN,EAAMyM,EAAM,KAAK,MAAQA,EAAM,KAAK,KAAK,eAAe,EAC9E,KAAK,gBAAgBzM,EAAMyM,EAAM,SAAS,CAC3C,CACD,CAGA,mBAAmBzM,EAAM,CACnB,KAAK,sBACT,KAAK,QAAQ,cAAc,EAAE,mBAAmB,EAEhD,KAAK,SAAS,cAAc,CAC3B,QAAS,KACT,UAAW,KACX,aAAc,IACf,CAAC,GAGF,KAAK,WAAWA,CAAI,CACrB,CAGA,iBAAiBA,EAAMyM,EAAO,CAG7B,GAAK,CAAEzM,EAAK,WAAayM,EAAM,WAAazM,EAAK,UAAU,GAAK,CAC/D,KAAK,WAAWA,CAAI,EACfA,EAAK,cACT,KAAK,iBAAiBA,EAAMyM,CAAK,EAClC,MACD,CAKA,GAHKA,EAAM,aAAezM,EAAK,MAAM,YACpC,KAAK,qBAAqBA,EAAMyM,EAAM,UAAU,EAE5CA,EAAM,MAAQ,IAAS,cAAc,SAAS,KAAK,OAAO,YAAY,EAAI,CAC9E,MAAMW,EAAQX,EAAM,KAAK,MAAM,gBAC/B,KAAK,QAAQ,cAAc,EAAE,mBAAmBW,CAAK,EAErD,KAAK,SAAS,cAAc,CAC3B,QAASX,EAAM,aACf,UAAWA,EAAM,UACjB,aAAcW,CACf,CAAC,CACF,CAMA,MAAMzG,EAAK8F,EAAM,MAAM,MAAM,iBAAmB,CAAC,EAChD4f,EAAMrsB,EAAK,MAAM,MAAM,MAAM,iBAAmB,CAAC,EAE5CssB,EAAK7f,EAAM,iBAAiB,QAAU,CAAC,EAC5C8f,EAAMvsB,EAAK,MAAM,iBAAiB,QAAU,CAAC,GAWzC,KAAK,KAAK,OAAO,oBAAoB,IAAMssB,EAAG,QAAUA,EAAG,SAAWC,EAAI,SAC9E,KAAK,KAAK,OAAO,mBAAmBD,CAAE,GAElCtsB,EAAK,UAAU,WAAW,IAAM2G,EAAG,QAAUA,EAAG,SAAW0lB,EAAI,SACnE,KAAK,iBAAiBrsB,EAAM2G,CAAE,EAE/B,KAAK,gBAAgB3G,EAAMyM,EAAM,SAAS,CAC3C,CAEA,cAAczM,EAAM,CACnB,MAAM0Q,EAAO1Q,EAAK,UAClB,OAAO0Q,EAGAA,EAAK,UAAU,EAFd,EAGT,CAEA,iBAAiB1Q,EAAMgW,EAAQ,CAC9B,MAAMtF,EAAO1Q,EAAK,UACX0Q,IAGPA,EAAK,aAAasF,CAAM,EACxB,KAAK,UAAU,iBAAiB,EAEjC,CAEA,gBAAgBhW,EAAMwsB,EAAO,CAC5B,MAAM9b,EAAO1Q,EAAK,UACX0Q,IAGPA,EAAK,MAAQ8b,EACd,CACD,EA//G6C,iBAA9B,IAAMC,GAAN,GAsgHR,SAASV,GAAiBF,GAAQ,CACxC,GAAK,CAAEA,GACN,OAED,MAAMpwB,EAAM,CAAC,EACZ4Z,EAAUwW,GAAO,eACjBa,EAAc,CAAC,EAEhB,GAAK,MAAM,QAAQb,GAAO,KAAK,EAC9B,UAAU1a,KAAQ0a,GAAO,MACxBa,EAAYvb,EAAK,IAAI,EAAIA,EAAK,MAEhC,UAAU1U,KAAO4Y,EAChB,MAAK,OAAIA,EAAS5Y,CAAG,EAAI,CACxB,MAAM2X,EAASiB,EAAQ5Y,CAAG,EACzBkwB,EAAUlxB,EAAIgB,CAAG,EAAI,CACpB,GAAI2X,EAAO,GACX,OAAQA,EAAO,OACf,MAAO,CAAC,CACT,EAED,GAAKyX,IAAQ,SACZ,UAAU1a,KAAQiD,EAAO,aAAc,CACtC,MAAMwY,EAAS,CAAC,EAEhB,UAAUC,IAAS,CAAC,QAAS,MAAM,EAAG,CACrC,MAAMC,EAASF,EAAOC,CAAK,EAAID,EAAOC,CAAK,GAAK,CAAC,EAChDE,EAAOD,EAAO,OAASA,EAAO,QAAU,CAAC,EACzCjT,EAAWiT,EAAO,SAAWA,EAAO,UAAY,CAAC,EAElD,UAAUE,IAAS,CAAC,EAAG,EAAG,CAAC,EAE1BD,EAAKC,CAAK,EAAInB,GAAO,SAASzX,EAAO,OAAQyY,EAAO,SAAU1b,EAAK,KAAM6b,EAAO,KAAK,EAGrFnT,EAASmT,CAAK,EAAInB,GAAO,SAASzX,EAAO,OAAQyY,EAAO,WAAY1b,EAAK,KAAM6b,EAAO,KAAK,CAE7F,CAEAL,EAAQ,MAAM,KAAK,CAClB,OAAQxb,EAAK,KACb,MAAOA,EAAK,OAASub,EAAYvb,EAAK,IAAI,GAAK,UAC/C,GAAIA,EAAK,GACT,OAAAyb,CACD,CAAC,CACF,SAEWxY,EAAO,aAAa,CAAC,GAAG,OACnC,UAAUjD,KAAQiD,EAAO,aAAc,CACtC,MAAMwY,EAAS,CAAC,EAEhB,UAAUK,KAAM9b,EAAK,OAAQ,CAC5B,MAAM2b,EAASF,EAAOK,EAAG,KAAK,EAAIL,EAAOK,EAAG,KAAK,GAAK,CAAC,EACtDC,EAAKD,EAAG,WAAa,WAAa,SAClCvK,EAAOoK,EAAOI,CAAE,EAAIJ,EAAOI,CAAE,GAAK,CAAC,EAEpCxK,EAAKuK,EAAG,QAAQ,EAAIA,EAAG,GACxB,CAEAN,EAAQ,MAAM,KAAK,CAClB,OAAQxb,EAAK,KACb,MAAOA,EAAK,OAASub,EAAYvb,EAAK,IAAI,GAAK,UAC/C,GAAIA,EAAK,GACT,OAAAyb,CACD,CAAC,CACF,CAEF,CAED,OAAOnxB,CACR,CAtEgB,EAAAswB,GAAA,mB,8FC9sHT,SAASoB,EAAmBpc,EAAQ,CAC1C,OAAOA,EAAO,cAAgB,MAC/B,CAFgB,EAAAoc,EAAA,sBAIT,SAASC,EAAkBrc,EAAQ,CACzC,OAAOA,GAAQ,aAAe,gCAC/B,CAFgB,EAAAqc,EAAA,qBAIT,SAASC,EAAetc,EAAQ,CACtC,OAAOA,GAAQ,aAAe,6BAC/B,CAFgB,EAAAsc,EAAA,kBAIT,SAASC,EAAoBvc,EAAQ,CAC3C,OAAOqc,EAAkBrc,CAAM,GAAKA,EAAO,OAAS,0BACrD,CAFgB,EAAAuc,EAAA,uBAIT,SAASC,EAAmBxc,EAAQ,CAC1C,OAAOA,IAAWA,EAAO,OAAO,WAAW,QAAQ,GAClDA,EAAO,QAAQ,WAAW,QAAQ,EACpC,CAHgB,EAAAwc,EAAA,sBAKT,SAASC,EAAgBzc,EAAQ,CACvC,OAAOA,GAAQ,OAAS,uBACzB,CAFgB,EAAAyc,EAAA,mBAIT,SAASC,EAAc1c,EAAQ,CACrC,MAAMD,EAAUqc,EAAmBpc,CAAM,EACzC,OAAKqc,EAAkBrc,CAAM,EACrBD,EACHC,EAAO,UAAYA,EAAO,gBAC1BA,EAAO,MAAQA,EAAO,YAEpBD,EACJC,EAAO,SACPA,EAAO,IACX,CAVgB,EAAA0c,EAAA,iBAYT,SAASC,EAAe3c,EAAQ,CACtC,OAAKqc,EAAkBrc,CAAM,EACrBA,EAAO,iBAAmBA,EAAO,uBAElCA,EAAO,eACf,CALgB,EAAA2c,EAAA,kBAOT,SAASC,EAAe5c,EAAQ6c,EAAM,CAC5C,GAAKP,EAAetc,CAAM,EACzB,OAAOA,EAAO,MAEf,OAAOA,EAAO,KAAM,CACnB,IAAK,wBACJ,OAAO6c,EAAK,EAAE,uBAAwB,iBAAiB,EACxD,IAAK,2BACJ,OAAOA,EAAK,EAAE,0BAA2B,sBAAsB,EAChE,IAAK,iCACJ,OAAOA,EAAK,EAAE,yBAA0B,iCAAiC,EAC1E,IAAK,0BACJ,OAAOA,EAAK,EAAE,2BAA4B,2BAA2B,EACtE,IAAK,0BACJ,OAAOA,EAAK,EAAE,2BAA4B,2BAA2B,EACtE,IAAK,mCACJ,OAAOA,EAAK,EAAE,2BAA4B,uBAAuB,EAClE,QACC,OAAOA,EAAK,EAAE,qBAAsB,QAAQ,CAC9C,CACD,CApBgB,EAAAD,EAAA,iB,sFChCD,MAAM,EAAN,MAAM,UAAwB,mCAAM,KAAC,CACnD,eAAe3yB,EAAM,CACpB,MAAM,GAAGA,CAAI,EAEb,KAAK,cAAgB,GAErB,KAAK,OAAO,UAAU,EACtB,KAAK,OAAO,WAAW,EACvB,KAAK,OAAO,aAAa,CAC1B,CAEA,UAAW,CACV,KAAK,cAAc,CACpB,CAEA,MAAM,eAAgB,CACrB,MAAMiB,EAAK,MAAM,KAAK,cAAc,EACpC,GAAK,CAAEA,EACN,OAAO,KAAK,IAAI,KAAK,uDAAuD,EAE7EA,EAAG,oBAAoB,eAAgB,IAAM,CAG5C,MAAM+D,EAAO,KAAK,KAAK,cAAc,MACpCyM,EAAQzM,GAAQA,EAAK,MAEtB,GAAK,CAAEyM,EACN,OAED,MAAMiO,EAAO,KAAK,OAAO,QAAQjO,EAAM,OAAQA,EAAM,iBAAkBA,EAAM,UAAWA,EAAM,YAAY,EACzGmf,EAAO,KAAK,QAAQ,MAAM,EAC1BlJ,GAAQkJ,GAAM,SAAW,KAAK,WAAW,MAAM,sBAAsB,EAAI,EACzErS,EAAS,CAAC,EAEX,UAAUoB,KAAOD,EAChB,GAAK,GAAEC,GAAO,CAAEA,EAAI,SAGpB,UAAU4H,KAAY5H,EAAI,OACzB,MAAK,OAAIA,EAAI,OAAQ4H,CAAQ,EAAI,CAChC,MAAM7J,EAAQiC,EAAI,OAAO4H,CAAQ,EACjC,GAAK7J,EAAM,OACV,SAEDa,EAAO,KAAK,CACX,KAAMb,EAAM,KACZ,IAAKgK,GAAQhK,EAAM,WAAW,CAAC,GAAKA,EAAM,KAAK,CAAC,EAChD,QAAS,GAAGiC,EAAI,QAAU,cAAc,IAAIA,EAAI,KAAK,GACrD,MAAOA,EAAI,MAAQ,2CACpB,CAAC,CACF,EAGF,OAAOpB,CACR,CAAC,CACF,CAEA,MAAM,cAAcyQ,EAAQ,EAAG,CAC9B,OAAK,OAAO,WAAa,UAAU,oBAC3B,UAEHA,GAAS,IACN,MAER,QAAM,SAAM,GAAG,EACR,KAAK,cAAcA,EAAQ,GAAG,EACtC,CACD,EAnEoD,uBAArC,IAAM6D,EAAN,C,6GCDf,MAAMxvB,EAAkB,SAAS,cAAc,MAAM,EAE/CyvB,EAAU,CAGf,WAAY,qBACZ,mBAAoB,8BACpB,oBAAqB,uHAErB,eAAgB,4BAChB,sBAAuB,uCACvB,2BAA4B,6IAC5B,wBAAyB,8BACzB,sBAAuB,sCACvB,oBAAqB,2CAErB,uBAAwB,mCACxB,uBAAwB,gEAExB,eAAgB,kBAChB,gBAAiB,2DAEjB,UAAa,sBAEb,qBAAsB,2GAEtB,aAAc,mPACd,mBAAoB,sXACpB,cAAe,wDAEf,mBAAoB,8CACpB,mBAAoB,iGAEpB,eAAgB,2IAChB,SAAY,kGAEZ,eAAgB,oPAChB,gBAAiB,uDACjB,eAAgB,yDAChB,mBAAoB,oGACpB,YAAe,6BAEf,gBAAiB,2BAEjB,mBAAoB,iCAEpB,eAAgB,uDAEhB,cAAe,uDACf,wBAAyB,4FACzB,iBAAkB,mIACnB,EAGqB,EAAN,MAAM,UAAkB,mCAAM,KAAC,CAC7C,eAAe9yB,EAAM,CACpB,MAAM,GAAGA,CAAI,EAEb,KAAK,cAAgB,GAErB,KAAK,OAAO,UAAU,EAEtB,KAAK,MAAQ,IAAI,eACjB,KAAK,OAAS,CAAC,EACf,KAAK,cAAgB,GAErB,KAAK,OAAS,CAAC,EAIf,KAAK,SAAS,IAAI,6BAA8B,CAC/C,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,yCACP,UAAW,mBACZ,EACA,QAASE,GAAO,KAAK,WAAW,oBAAqBA,CAAG,CACzD,CAAC,EAED,KAAK,SAAS,IAAI,6BAA8B,CAC/C,SAAU,CAAC,kBAAkB,EAC7B,QAAS,KACT,QAAQD,EAAKC,EAAK,CACjB,OAAOA,GAAcD,EAAI,IAAI,kBAAkB,CAChD,EACA,QAASC,GAAO,KAAK,OAAO,sBAAuBA,CAAG,EACtD,GAAI,CACH,KAAM,+BACN,MAAO,qCACP,YAAa,iHACb,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,4BAA6B,CAC9C,SAAU,CAAC,iBAAiB,EAC5B,QAAS,KACT,QAAQD,EAAKC,EAAK,CACjB,OAAOA,GAAcD,EAAI,IAAI,iBAAiB,IAAM,CACrD,EACA,QAASC,GAAO,KAAK,OAAO,qBAAsBA,CAAG,EACrD,GAAI,CACH,KAAM,+BACN,MAAO,sCACP,YAAa,kHACb,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,sBAAuB,CACxC,SAAU,CAAC,yBAA0B,uBAAwB,sBAAuB,iBAAkB,sBAAsB,EAC5H,QAAQD,EAAK,CACZ,OAAKA,EAAI,IAAI,sBAAsB,EAC3B,GAEDA,EAAI,IAAI,wBAAwB,GAAKA,EAAI,IAAI,sBAAsB,GAAKA,EAAI,IAAI,qBAAqB,GAAKA,EAAI,IAAI,gBAAgB,CAC1I,EACA,QAASC,GAAO,CACVA,EACJ,KAAK,OAAO,kBAAmB,EAAI,EAC1B,CAAEA,GAAO,CAAE,KAAK,iBACzB,KAAK,eAAiB,sBAAsB,IAAM,CACjD,KAAK,eAAiB,KACf,KAAK,SAAS,IAAI,qBAAqB,GAC7C,KAAK,OAAO,kBAAmB,EAAK,CACtC,CAAC,GAEF,KAAK,OAAO,WAAYA,CAAG,EAC3B,KAAK,KAAK,wBAAwB,EAClC,KAAK,KAAK,oBAAoB,CAC/B,CACD,CAAC,EAED,KAAK,SAAS,IAAI,+BAAgC,CACjD,QAAS,GACT,GAAI,CACH,KAAM,yCACN,MAAO,eACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,uBAAwB,CACzC,QAAS,EACT,SAAU,CAAC,qBAAqB,EAChC,QAAQD,EAAKC,EAAK,CACjB,OAAKA,IAAQ,EACL,CAAED,EAAI,IAAI,qBAAqB,EAEhCC,CACR,EAEA,GAAI,CACH,KAAM,GACN,KAAM,yCACN,MAAO,0BAEP,UAAW,qBACX,KAAM,CACL,CAAC,MAAO,EAAG,MAAO,OAAO,EACzB,CAAC,MAAO,EAAG,MAAO,QAAQ,EAC1B,CAAC,MAAO,EAAG,MAAO,kBAAkB,CACrC,CACD,EAEA,QAASA,GAAO,CACf,KAAK,OAAO,gBAAiB,CAACA,CAAG,EACjC,KAAK,KAAK,oBAAoB,CAC/B,CACD,CAAC,EAED,KAAK,SAAS,IAAI,+BAAgC,CACjD,QAAS,GACT,GAAI,CACH,KAAM,yCACN,MAAO,2BACP,UAAW,mBACZ,EACA,QAASA,GAAO,KAAK,WAAW,mBAAoBA,CAAG,CACxD,CAAC,EAED,KAAK,SAAS,IAAI,+BAAgC,CACjD,QAAS,GACT,GAAI,CACH,KAAM,yCACN,MAAO,0BACP,UAAW,mBACZ,EACA,QAASA,GAAO,KAAK,OAAO,wBAAyB,CAACA,CAAG,CAC1D,CAAC,EAED,KAAK,SAAS,IAAI,oCAAqC,CACtD,QAAS,EACT,GAAI,CACH,KAAM,yCACN,MAAO,yCACP,UAAW,qBACX,KAAM,CACL,CAAC,MAAO,EAAG,MAAO,OAAO,EACzB,CAAC,MAAO,EAAG,MAAO,QAAQ,EAC1B,CAAC,MAAO,EAAG,MAAO,8BAA8B,CACjD,CACD,EACA,QAASA,GAAO,CACf,KAAK,WAAW,oBAAqBA,IAAQ,CAAC,EAC9C,KAAK,WAAW,2BAA4BA,IAAQ,CAAC,CACtD,CACD,CAAC,EAED,KAAK,SAAS,IAAI,+BAAgC,CACjD,QAAS,EACT,GAAI,CACH,KAAM,yCACN,MAAO,yBACP,UAAW,qBACX,KAAM,CACL,CAAC,MAAO,EAAG,MAAO,OAAO,EACzB,CAAC,MAAO,EAAG,MAAO,QAAQ,EAC1B,CAAC,MAAO,EAAG,MAAO,8BAA8B,CACjD,CACD,EACA,QAASA,GAAO,CACf,KAAK,WAAW,eAAgBA,IAAQ,CAAC,EACzC,KAAK,WAAW,sBAAuBA,IAAQ,CAAC,CACjD,CACD,CAAC,EAYD,KAAK,SAAS,IAAI,+BAAgC,CACjD,QAAS,GACT,GAAI,CACH,KAAM,yCACN,MAAO,wBACP,UAAW,mBACZ,EACA,QAASA,GAAO,KAAK,WAAW,wBAAyBA,CAAG,CAC7D,CAAC,EAED,KAAK,SAAS,IAAI,8BAA+B,CAChD,QAAS,EACT,GAAI,CACH,KAAM,yCACN,MAAO,iBACP,UAAW,qBACX,KAAM,CACL,CAAC,MAAO,EAAG,MAAO,gBAAgB,EAClC,CAAC,MAAO,EAAG,MAAO,UAAU,EAC5B,CAAC,MAAO,EAAG,MAAO,qBAAqB,CACxC,CACD,EACA,QAASA,GAAO,CACf,KAAK,WAAW,sBAAuBA,IAAQ,CAAC,EAChD,KAAK,OAAO,qBAAsBA,IAAQ,CAAC,CAC5C,CACD,CAAC,EAED,KAAK,SAAS,IAAI,uBAAwB,CACzC,QAAS,GACT,SAAU,CAAC,sBAAsB,EACjC,QAAQD,EAAKC,EAAK,CACjB,OAAOD,EAAI,IAAI,sBAAsB,EAAI,GAAQC,CAClD,EACA,GAAI,CACH,KAAM,yCACN,MAAO,gBACP,YAAa,gEAEb,UAAW,mBACZ,EACA,QAASA,GAAO,CACf,KAAK,OAAO,gBAAiBA,CAAG,EAChC,KAAK,KAAK,oBAAoB,CAC/B,CACD,CAAC,EAED,KAAK,SAAS,IAAI,4BAA6B,CAC9C,SAAU,CAAC,4BAA6B,sBAAsB,EAC9D,QAAS,GACT,QAAQD,EAAKC,EAAK,CACjB,OAAKD,EAAI,IAAI,sBAAsB,EAC3B,GAEDA,EAAI,IAAI,2BAA2B,EACzC,GAAOC,CACT,EACA,GAAI,CACH,KAAM,wCACN,MAAO,sBACP,YAAa,qEAEb,UAAW,mBACZ,EACA,QAASA,GAAO,CACf,KAAK,OAAO,qBAAsBA,CAAG,EACrC,KAAK,KAAK,oBAAoB,CAC/B,CACD,CAAC,EAED,KAAK,SAAS,IAAI,4BAA6B,CAC9C,SAAU,CAAC,wBAAwB,EACnC,QAAS,GACT,QAAQD,EAAKC,EAAK,CACjB,OAAOD,EAAI,IAAI,wBAAwB,EAAIC,EAAM,EAClD,EACA,GAAI,CACH,KAAM,wCACN,MAAO,0DACP,UAAW,mBACZ,EACA,QAASA,GAAO,CACf,KAAK,OAAO,cAAeA,CAAG,EAC9B,KAAK,KAAK,oBAAoB,CAC/B,CACD,CAAC,EAED,KAAK,SAAS,IAAI,mBAAoB,CACrC,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,+CACP,UAAW,mBACZ,CACD,CAAC,EAeD,KAAK,SAAS,IAAI,mBAAoB,CACrC,QAAS,GACT,GAAI,CACH,KAAM,wCACN,MAAO,2CACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,sBAAuB,CACxC,QAAS,GACT,GAAI,CACH,KAAM,wCACN,MAAO,0BACP,UAAW,mBACZ,EACA,QAASA,GAAO,KAAK,WAAW,eAAgB,CAACA,CAAG,CACrD,CAAC,EAED,KAAK,SAAS,IAAI,4BAA6B,CAC9C,QAAS,GACT,GAAI,CACH,KAAM,wCACN,MAAO,iCACP,UAAW,mBACZ,EACA,QAASA,GAAO,KAAK,WAAW,gBAAiBA,CAAG,CACrD,CAAC,EAID,KAAK,SAAS,IAAI,gBAAiB,CAClC,QAAS,GACT,GAAI,CACH,KAAM,6BACN,MAAO,mBACP,UAAW,mBACZ,EACA,QAASA,GAAO,CACf,KAAK,WAAW,WAAY,CAACA,CAAG,EAChC,KAAK,KAAK,oBAAoB,CAC/B,CACD,CAAC,EAED,KAAK,SAAS,IAAI,wBAAyB,CAC1C,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,gEACP,UAAW,mBACZ,EACA,QAASA,GAAO,KAAK,WAAW,mBAAoB,CAAEA,CAAG,CAC1D,CAAC,EAED,KAAK,SAAS,IAAI,iBAAkB,CACnC,QAAS,GACT,GAAI,CACH,MAAO,GACP,KAAM,yCACN,MAAO,eACP,YAAa,uFACb,UAAW,mBACZ,EACA,QAASA,GAAO,KAAK,OAAO,YAAa,CAACA,CAAG,CAC9C,CAAC,EAID,KAAK,SAAS,IAAI,4BAA6B,CAC9C,QAAS,GACT,GAAI,CACH,KAAM,kCACN,MAAO,gCACP,YAAa,iEACb,UAAW,mBACZ,EACA,QAASA,GAAO,KAAK,WAAW,cAAe,CAAEA,CAAG,CACrD,CAAC,EAED,KAAK,SAAS,IAAI,2BAA4B,CAC7C,QAAS,GACT,GAAI,CACH,KAAM,8BACN,MAAO,cACP,YAAa,6PACb,UAAW,oBACX,KAAM,OAAM,MAAa,CAC1B,EACA,QAAS,IAAM,KAAK,WAAW,CAChC,CAAC,EAED,KAAK,SAAS,IAAI,wBAAyB,CAC1C,QAAS,GACT,GAAI,CACH,KAAM,kCACN,MAAO,4BACP,UAAW,mBACZ,EACA,QAASA,GAAO,KAAK,OAAO,uBAAwBA,CAAG,CACxD,CAAC,EAED,KAAK,SAAS,IAAI,8BAA+B,CAChD,SAAU,CAAC,oBAAoB,EAC/B,QAAQD,EAAKC,EAAK,CACjB,OAAQD,EAAI,IAAI,oBAAoB,IAAM,QAAUA,EAAI,IAAI,oBAAoB,IAAM,YAAeC,EAAM,EAC5G,EACA,QAAS,GACT,GAAI,CACH,KAAM,kCACN,MAAO,mDACP,UAAW,mBACZ,EACA,QAASA,GAAO,KAAK,WAAW,mBAAoBA,CAAG,CACxD,CAAC,EAED,KAAK,SAAS,IAAI,wBAAyB,CAC1C,QAAS,GACT,GAAI,CACH,KAAM,kCACN,MAAO,qCACP,UAAW,mBACZ,EACA,QAASA,GAAO,KAAK,OAAO,iBAAkB,CAACA,CAAG,CACnD,CAAC,CAYF,CAEA,UAAW,CACV,KAAK,WAAW,oBAAqB,KAAK,SAAS,IAAI,4BAA4B,CAAC,EACpF,KAAK,WAAW,mBAAoB,KAAK,SAAS,IAAI,8BAA8B,CAAC,EACrF,KAAK,OAAO,qBAAsB,KAAK,SAAS,IAAI,2BAA2B,CAAC,EAChF,KAAK,OAAO,sBAAuB,KAAK,SAAS,IAAI,4BAA4B,CAAC,EAClF,KAAK,OAAO,WAAY,KAAK,SAAS,IAAI,qBAAqB,CAAC,EAChE,KAAK,OAAO,gBAAiB,KAAK,SAAS,IAAI,sBAAsB,CAAC,EACtE,KAAK,OAAO,qBAAsB,KAAK,SAAS,IAAI,2BAA2B,CAAC,EAChF,KAAK,OAAO,cAAe,KAAK,SAAS,IAAI,2BAA2B,CAAC,EAEzE,KAAK,OAAO,wBAAyB,CAAE,KAAK,SAAS,IAAI,8BAA8B,CAAC,EACxF,KAAK,OAAO,gBAAiB,CAAC,KAAK,SAAS,IAAI,sBAAsB,CAAC,EAEvE,KAAK,WAAW,wBAAyB,KAAK,SAAS,IAAI,8BAA8B,CAAC,EAC1F,KAAK,WAAW,gBAAiB,KAAK,SAAS,IAAI,2BAA2B,CAAC,EAC/E,KAAK,WAAW,eAAgB,CAAC,KAAK,SAAS,IAAI,qBAAqB,CAAC,EAEzE,KAAK,OAAO,uBAAwB,KAAK,SAAS,IAAI,uBAAuB,CAAC,EAE9E,KAAK,WAAW,mBAAoB,CAAE,KAAK,SAAS,IAAI,uBAAuB,CAAC,EAEhF,KAAK,OAAO,iBAAkB,CAAE,KAAK,SAAS,IAAI,uBAAuB,CAAC,EAE1E,KAAK,WAAW,mBAAoB,KAAK,SAAS,IAAI,6BAA6B,CAAC,EAEpF,MAAM6yB,EAAS,KAAK,SAAS,IAAI,6BAA6B,EAC9D,KAAK,WAAW,sBAAuBA,IAAW,CAAC,EACnD,KAAK,OAAO,qBAAsBA,IAAW,CAAC,EAE9C,MAAMC,EAAO,KAAK,SAAS,IAAI,mCAAmC,EAClE,KAAK,WAAW,oBAAqBA,IAAS,CAAC,EAC/C,KAAK,WAAW,2BAA4BA,IAAS,CAAC,EAEtD,MAAMC,EAAU,KAAK,SAAS,IAAI,8BAA8B,EAChE,KAAK,WAAW,eAAgBA,IAAY,CAAC,EAC7C,KAAK,WAAW,sBAAuBA,IAAY,CAAC,EAEpD,KAAK,WAAW,WAAY,CAAC,KAAK,SAAS,IAAI,eAAe,CAAC,EAC/D,KAAK,WAAW,cAAe,CAAE,KAAK,SAAS,IAAI,2BAA2B,CAAC,EAE/E,KAAK,SAAS,WAAW,mBAAoB/yB,GAAO,KAAK,WAAW,YAAa,CAACA,CAAG,CAAC,EACtF,KAAK,SAAS,WAAW,+BAAgCA,GAAO,KAAK,WAAW,eAAgBA,CAAG,CAAC,EAEpG,KAAK,WAAW,EAChB,KAAK,aAAa,EAElB,KAAK,KAAK,wBAAwB,EAClC,KAAK,KAAK,oBAAoB,CAC/B,CAEA,cAAe,CACd,sBAAsB,IAAM,KAAK,KAAK,wBAAwB,CAAC,CAChE,CAEA,YAAa,CACZ,IAAIysB,EAAO,KAAK,SAAS,IAAI,0BAA0B,EACvD,GAAKA,GAAQA,EAAK,OAAS,CAC1B,KAAM,CAACjmB,EAAWC,CAAQ,KAAI,MAAQgmB,CAAI,EAc1C,GAbAA,EAAOjmB,EAEF,KAAK,gBACT,KAAK,eAAe,EAErB,KAAK,eAAiBC,EAEjBgmB,EAAK,QAAQ,GAAG,IAAM,IAAMA,EAAK,QAAQ,GAAG,IAAM,IAAMA,EAAK,QAAQ,GAAG,IAAM,IAAMA,EAAK,QAAQ,GAAG,IAAM,KAC9GA,EAAO,IAAIA,CAAI,KAEhBtpB,EAAgB,MAAM,WAAa,GACnCA,EAAgB,MAAM,WAAaspB,EAE9BtpB,EAAgB,MAAM,WAAa,CACvC,KAAK,YAAY,cAAespB,CAAI,EACpC,KAAK,OAAO,cAAe,EAAI,EAC/B,MACD,CACD,CAEA,KAAK,OAAO,cAAe,EAAK,EAChC,KAAK,eAAe,aAAa,CAClC,CAEA,WAAWlrB,EAAKvB,EAAK,CACpB,MAAMsL,EAAI,SAAS/J,CAAG,GACtB,GAAK,CAAEvB,EAAM,CACZ,KAAK,MAAM,OAAOsL,CAAC,EACnB,MACD,CAEA,GAAK,IAAE,OAAIsnB,EAASrxB,CAAG,EACtB,MAAM,IAAI,MAAM,0BAA0BA,CAAG,GAAG,EAEjD,KAAK,MAAM,IAAI+J,EAAG,GAAGsnB,EAAQrxB,CAAG,CAAC,+BAA+B,CACjE,CAGA,OAAOA,EAAKvB,EAAK,CAChBA,EAAM,CAAC,CAAEA,GACH,KAAK,OAAOuB,CAAG,GAAK,MAAWvB,IAGrC,KAAK,OAAOuB,CAAG,EAAIvB,EACnB,KAAK,OAAOuB,CAAG,EAChB,CAEA,OAAOA,EAAK,CAEX,GAAK,CADO,KAAK,OAAOA,CAAG,EACd,CACP,KAAK,OACT,KAAK,MAAM,OAAOA,CAAG,EACtB,MACD,CAEA,GAAK,MAAK,MAAM,IAAIA,CAAG,EAGvB,IAAK,CAAE,KAAK,cACX,OAAO,KAAK,gBAAgB,EAAE,KAAK,IAAM,KAAK,OAAOA,CAAG,CAAC,EAE1D,GAAK,IAAE,OAAI,KAAK,OAAQA,CAAG,EAAI,CAC9B,KAAK,IAAI,KAAK,uBAAuBA,CAAG,gBAAgB,EACxD,MACD,CAEA,KAAK,MAAM,IAAIA,EAAK,KAAK,OAAOA,CAAG,CAAC,EACrC,CAGA,IAAIA,EAAKvB,EAAK,CAAE,OAAO,KAAK,MAAM,IAAIuB,EAAKvB,CAAG,CAAE,CAChD,OAAOuB,EAAK,CAAE,OAAO,KAAK,MAAM,OAAOA,CAAG,CAAE,CAE5C,YAAYA,EAAKvB,EAAKgzB,EAAQ,OAAQ,CACrC,KAAK,MAAM,IAAI,QAAQzxB,CAAG,GAAI,GAAGyxB,CAAK,YAAYzxB,CAAG,KAAKvB,CAAG,KAAK,CACnE,CAEA,eAAeuB,EAAK,CAAE,KAAK,MAAM,OAAO,QAAQA,CAAG,EAAE,CAAE,CAGvD,iBAAkB,CACjB,GAAK,MAAK,cAGV,OAAO,IAAI,QAAQ,MAAMnB,GAAK,CAC7B,MAAMM,GAAO,MAAM,iCAAiE,QACpF,UAAUa,KAAOb,EAAI,KAAK,EAAG,CAC5B,MAAM4K,EAAI/J,EAAI,MAAM,EAAGA,EAAI,QAAUA,EAAI,SAAS,OAAO,EAAI,EAAI,EAAE,EACnE,KAAK,OAAO+J,CAAC,EAAI5K,EAAIa,CAAG,EAAE,OAC3B,CAEA,KAAK,KAAK,oBAAoB,EAE9B,KAAK,cAAgB,GACrBnB,EAAE,CACH,CAAC,CACF,CACD,EAzkB8C,iBAA/B,IAAM6yB,EAAN,C,kGCtDA,MAAM,EAAN,MAAM,UAAkB,mCAAM,KAAC,CAC7C,eAAenzB,EAAM,CACpB,MAAM,GAAGA,CAAI,EAEb,KAAK,cAAgB,GAErB,KAAK,OAAO,UAAU,EACtB,KAAK,OAAO,WAAW,EACvB,KAAK,OAAO,cAAc,EAE1B,KAAK,kBAAoB,KAAK,KAAK,OAClC,iBACA6G,GAAKA,EAAE,SAAWA,EAAE,UAAYA,EAAE,OAAO,KACzC,IAAS,eACV,EAEA,KAAK,gBAAkB,KAAK,KAAK,OAChC,mBACAA,GAAKA,EAAE,OAAO,WAAaA,EAAE,MAAM,iBAAgB,OAAIA,EAAE,MAAO,eAAe,EAC/E,IAAS,eACV,CACD,CAEA,UAAW,CACV,KAAK,gBAAgB,GAAG,QAAS,KAAK,eAAgB,IAAI,EAC1D,KAAK,gBAAgB,GAAG,SAAU,KAAK,eAAgB,IAAI,EAC3D,KAAK,gBAAgB,GAAG,UAAW,KAAK,eAAgB,IAAI,EAC5D,KAAK,gBAAgB,MAAM,CAACtC,EAAKC,IAAc,CAC9C,UAAUJ,KAAQI,EACjB,KAAK,eAAeJ,CAAI,CAC1B,CAAC,EAED,KAAK,kBAAkB,GAAG,QAAS,KAAK,gBAAiB,IAAI,EAC7D,KAAK,kBAAkB,GAAG,SAAU,KAAK,gBAAiB,IAAI,EAC9D,KAAK,kBAAkB,GAAG,UAAW,KAAK,gBAAiB,IAAI,EAC/D,KAAK,kBAAkB,MAAM,CAACG,EAAKC,IAAc,CAChD,UAAUJ,KAAQI,EACjB,KAAK,gBAAgBJ,CAAI,CAC3B,CAAC,CACF,CAEA,eAAeA,EAAM,CACpB,KAAK,SAAS,cAAc,CAC3B,WAAS,OAAI,qBAAsBA,CAAI,EACvC,aAAW,OAAI,kBAAmBA,CAAI,CAEvC,CAAC,CACF,CAEA,gBAAiB,CAChB,KAAK,SAAS,cAAc,CAC3B,QAAS,KACT,UAAW,IAEZ,CAAC,CACF,CAEA,gBAAgBA,EAAM,CACrB,MAAM/D,EAAO+D,EAAK,OAAO,MAAM,MAAM,kBACpC2N,EAAO1R,GAAM,KAEd,KAAK,SAAS,cAAc,CAC3B,SAAU0R,GAAM,KAChB,WAAYA,GAAM,GAClB,MAAO1R,GAAM,KACd,CAAC,CACF,CAEA,iBAAkB,CACjB,KAAK,SAAS,cAAc,CAC3B,SAAU,KACV,WAAY,KACZ,MAAO,IACR,CAAC,CACF,CACD,EA3E8C,iBAA/B,IAAM+yB,EAAN,C,qJCAA,MAAM,EAAN,MAAM,UAAa,SAAO,CACxC,eAAepzB,EAAM,CACpB,MAAM,GAAGA,CAAI,EAEb,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,WAAW,EACvB,KAAK,OAAO,aAAa,EAEzB,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,UAAU,EAEtB,KAAK,WAAa,KAAK,KAAK,OAC3B,cACA6G,GAAKA,EAAE,OAASA,EAAE,MAAM,MAAQA,EAAE,gBAAkBA,EAAE,yBACtD,CAAC,iBAAkB,gBAAiB,kBAAmB,iBAAkB,kBAAkB,CAC5F,EAEA,KAAK,SAAS,MAAM,+BAAgC,CACnD,KAAM,wQACN,UAAW,mBACX,QAAS,CAAC,EACV,WAAY,IAAM,KAAK,OAAO,YAAY,CAC3C,CAAC,EAED,KAAK,SAAS,MAAM,mCAAoC,CACvD,KAAM,8CACN,UAAW,mBACX,QAAS,CAAC,EACV,WAAY,IAAM,KAAK,OAAO,YAAY,CAC3C,CAAC,CACF,CAEA,UAAW,CACV,KAAK,WAAW,GAAG,QAAS,KAAK,iBAAkB,IAAI,EACvD,KAAK,WAAW,GAAG,SAAU,KAAK,iBAAkB,IAAI,EACxD,KAAK,WAAW,GAAG,UAAW,IAAM,CACnC,KAAK,SAAS,cAAc,CAC3B,SAAU,KACV,WAAY,IACb,CAAC,CACF,CAAC,EAED,KAAK,SAAS,SAAS,GAAG,UAAWpF,GAAO,CAC3C,GAAKA,IAAQ,gCAAkCA,IAAQ,mCAAqC,CAC3F,KAAK,OAAO,YAAY,EAExB,UAAU2C,KAAQ,KAAK,WAAW,UACjC,KAAK,iBAAiBA,CAAI,CAC5B,CACD,CAAC,EAED,KAAK,WAAW,MAAM,CAACG,EAAKC,IAAc,CACzC,UAAUJ,KAAQI,EACjB,KAAK,iBAAiBJ,CAAI,CAC5B,CAAC,EAED,KAAK,GAAG,oBAAqBwJ,GAAS,CAChCA,GAASA,EAAM,OAAS,kBAC5B,KAAK,iBAAiB,CACxB,CAAC,CACF,CAGA,iBAAiBxJ,EAAM,CACtB,GAAKA,IAAS,OAAY,CACzB,UAAUA,KAAQ,KAAK,WAAW,UACjC,KAAK,iBAAiBA,CAAI,EAE3B,MACD,CAEA,KAAK,cAAcA,CAAI,EAEvB,MAAMivB,EAAWjvB,GAAM,OAAO,MAAM,KAEpC,KAAK,SAAS,cAAc,CAC3B,SAAUivB,GAAU,KACpB,WAAYA,GAAU,EACvB,CAAC,CACF,CAGA,cAAcjvB,EAAM,CACnB,MAAMP,EAAY,KAAK,KAAK,aAAaO,CAAI,EAC7C,MAAK,OAAI,YAAaA,EAAK,KAAK,GAAK,MAAQ,CAAEP,GAAa,CAAEA,EAAU,cACvE,OAED,MAAMyvB,EAAczvB,EAAU,cAAc,wBAAwB,EAC/DyvB,GACJA,EAAY,OAAO,EAEpB,MAAMC,EAAU1vB,EAAU,cAAc,+CAA+C,EACvF,GAAK,CAAE0vB,EACN,OAED,IAAIC,EAAWC,EACdC,EAAYC,EAEb,MAAM5hB,KAAO,OAAI,iBAAkB3N,EAAK,KAAK,GAAKA,EAAK,MAAM,cAC5DwvB,EAAe,MAAM,CACpB,MAAMC,EAAgB,KAAK,SAAS,SAAS,IAAI,+BAAgC,CAAC,CAAC,EAClFxG,EAAUwG,EAAc,SAAS9hB,CAAI,EAEtCyhB,EAAU,UAAU,OAAO,SAAUnG,CAAO,EAC5CoG,EAAY,YAAcpG,EACzB,KAAK,KAAK,EAAE,oBAAqB,SAAS,EAC1C,KAAK,KAAK,EAAE,kBAAmB,OAAO,CACxC,EARe,gBASfyG,EAAgB,MAAM,CACrB,MAAMC,EAAe,KAAK,SAAS,SAAS,IAAI,mCAAoC,CAAC,CAAC,EACrFvW,EAASuW,EAAa,SAAShiB,CAAI,EAEpC2hB,EAAW,UAAU,OAAO,SAAUlW,CAAM,EAC5CmW,EAAa,YAAcnW,EAC1B,KAAK,KAAK,EAAE,4BAA6B,iBAAiB,EAC1D,KAAK,KAAK,EAAE,4BAA6B,iBAAiB,CAC5D,EARgB,iBAUjBgW,KAAa,iBAAC,UACb,MAAM,iDACN,QAAS,KAAK,qBAAqB,+BAAgCzhB,EAAM6hB,CAAY,GAEpFH,KAAc,iBAAC,QAAK,MAAM,iBAAkB,EAC9C,EAEAG,EAAa,EAEbF,KAAc,iBAAC,UACd,MAAM,2CACN,QAAS,KAAK,qBAAqB,mCAAoC3hB,EAAM+hB,CAAa,GAEzFH,KAAe,iBAAC,QAAK,MAAM,iBAAkB,EAC/C,EAEAG,EAAc,EAEdP,EAAQ,eAAY,iBAAC,OAAI,MAAM,mCAC7BC,EACAE,CACF,CAAM,CACP,CAEA,qBAAqBlyB,EAASuQ,EAAMiiB,EAAa,CAChD,OAAOrvB,GAAK,CACXA,EAAE,eAAe,EACjB,MAAMsvB,EAAS,KAAK,SAAS,SAAS,IAAIzyB,CAAO,GAAK,CAAC,EACtDuN,EAAMklB,EAAO,QAAQliB,CAAI,EAErBhD,IAAQ,GACZklB,EAAO,KAAKliB,CAAI,EAEhBkiB,EAAO,OAAOllB,EAAK,CAAC,EAErB,KAAK,SAAS,SAAS,IAAIvN,EAASyyB,CAAM,EAC1C,KAAK,OAAO,YAAY,EACxBD,EAAY,CACb,CACD,CACD,EA9JyC,YAA1B,IAAME,EAAN,ECER,MAAMC,GAAiB,CAACxvB,EAAG,CAAC,KAClCA,EAAEA,EAAE,eAAiB,CAAC,EAAI,iBAC1BA,EAAEA,EAAE,kBAAoB,CAAC,EAAI,oBAC7BA,EAAEA,EAAE,wBAA0B,CAAC,EAAI,0BAC5BA,IACL,EAEUyvB,EAAgB,CAC5B,oBACA,WACA,aACA,qBACA,eACA,gBACD,EAEA,SAASC,EAAYh0B,EAAMqwB,EAAO,CAIjC,OAHKrwB,EAAK,CAAC,EAAE,QACZA,EAAK,CAAC,EAAE,QAAK,qBAAkBA,EAAK,CAAC,EAAE,KAAK,GAAG,CAAC,CAAC,EAE3CA,EAAK,CAAC,EAAE,OAGR,IAAI,OAAOA,EAAK,CAAC,EAAE,KAAK,GAAG,EAAGqwB,CAAK,EAFlC,IAGT,CARS,EAAA2D,EAAA,eAYT,MAAMC,EAAa,CAAC,aAAc,MAAO,gBAAiB,sBAAuB,eAAgB,gBAAiB,iBAAkB,iBAAkB,kBAAmB,UAAW,eAAgB,cAAe,YAAY,EAG1M,EAAN,MAAM,UAAkB,SAAO,CAC7C,eAAet0B,EAAM,CACpB,MAAM,GAAGA,CAAI,EAEb,KAAK,cAAgB,GAErB,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,gBAAgB,EAC5B,KAAK,OAAO,WAAW,EACvB,KAAK,OAAO,aAAa,EACzB,KAAK,OAAO,iBAAiB,EAC7B,KAAK,OAAO,kBAAkB,EAE9B,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,UAAU,EAEtB,KAAK,OAAOk0B,CAAI,EAEhB,KAAK,cAAgB,KAAK,UAAU,OACnC,iBACA,iRACAI,EAAY,KAAM,EAAG,CACtB,EAEA,KAAK,wBAA0B,KAAK,UAAU,OAC7C,4BACA,yDACAA,EAAY,KAAM,EAAG,CACtB,EAEA,KAAK,kBAAoB,KAAK,UAAU,OACvC,sBAAuB,wBACvBA,EAAY,KAAM,EAAG,CACtB,EAEA,KAAK,eAAiB,KAAK,KAAK,OAC/B,kBACAztB,GAAKA,EAAE,kBAAoBA,EAAE,OAASA,EAAE,MAAM,MAC9CytB,CACD,EAEA,KAAK,gBAAkB,KAAK,KAAK,OAChC,mBACAztB,GAAKA,EAAE,mBAAqBA,EAAE,mBAAqBA,EAAE,sBAAwBA,EAAE,aAC/EytB,CACD,EAEA,KAAK,SAAS,IAAI,yBAA0B,CAC3C,QAAS,EAET,GAAI,CACH,KAAM,kEACN,MAAO,eACP,UAAW,qBACX,KAAM,IAEN,KAAM,CACL,CAAC,MAAO,EAAG,MAAO,eAAe,EACjC,CAAC,MAAO,EAAG,MAAO,8BAA8B,EAChD,CAAC,MAAO,EAAG,MAAO,YAAY,EAC9B,CAAC,MAAO,EAAG,MAAO,sBAAsB,CACzC,CACD,EAEA,QAASp0B,GAAO,CACf,KAAK,WAAW,OAAO,cAAeA,EAAM,CAAC,EAC7C,KAAK,WAAW,OAAO,iBAAkBA,IAAQ,GAAKA,IAAQ,CAAC,CAChE,CACD,CAAC,EAED,KAAK,SAAS,IAAI,iCAAkC,CACnD,QAAS,GAET,GAAI,CACH,KAAM,qCACN,MAAO,2CACP,UAAW,oBACX,cAAe,IAAM,CAAC,WAAY,WAAW,CAC9C,CACD,CAAC,EAED,KAAK,SAAS,IAAI,0BAA2B,CAC5C,QAAS,GAET,GAAI,CACH,KAAM,mDACN,MAAO,wCACP,UAAW,oBACX,KAAM,GACP,EAEA,QAASA,GAAO,KAAK,WAAW,OAAO,aAAcA,CAAG,CACzD,CAAC,EAGD,KAAK,SAAS,IAAI,mBAAoB,CACrC,QAAS,EAET,GAAI,CACH,KAAM,qCACN,MAAO,gBACP,YAAa,kDACb,UAAW,qBAEX,KAAM,CACL,CAAC,MAAO,EAAG,MAAO,UAAU,EAC5B,CAAC,MAAO,EAAG,MAAO,SAAS,EAC3B,CAAC,MAAO,EAAG,MAAO,wBAAwB,CAC3C,CACD,EAEA,QAAS,IAAM,KAAK,YAAY,CACjC,CAAC,EAED,KAAK,SAAS,IAAI,uBAAwB,CACzC,QAAS,GAET,GAAI,CACH,KAAM,qCACN,MAAO,0CACP,UAAW,mBACZ,EAEA,QAAS,IAAM,KAAK,YAAY,CACjC,CAAC,EAeD,KAAK,SAAS,IAAI,sBAAuB,CACxC,QAAS,GACT,GAAI,CACH,KAAM,qCACN,MAAO,4DACP,UAAW,mBACZ,EAEA,QAASyB,GAAS,KAAK,WAAW,WAAW,eAAgBA,CAAK,CACnE,CAAC,EAED,KAAK,SAAS,IAAI,0BAA2B,CAC5C,QAAS,GAET,GAAI,CACH,KAAM,qCACN,MAAO,iDACP,UAAW,mBACZ,EAEA,QAAS,IAAM,KAAK,YAAY,CACjC,CAAC,EAGD,KAAK,SAAS,IAAI,0BAA2B,CAC5C,QAAS,GAET,GAAI,CACH,KAAM,qCACN,MAAO,uCACP,UAAW,mBACZ,EAEA,QAAS,IAAM,KAAK,YAAY,CACjC,CAAC,EAED,KAAK,SAAS,IAAI,6BAA8B,CAC/C,QAAS,GACT,GAAI,CACH,KAAM,sCACN,MAAO,sEACP,UAAW,mBACZ,EAEA,QAAS,IAAM,KAAK,eAAe,YAAY,CAChD,CAAC,EAGD,KAAK,SAAS,IAAI,wBAAyB,CAC1C,QAAS,CAAC,EACV,KAAM,cACN,eAAgB,GAChB,GAAI,CACH,KAAM,4CACN,UAAW,cACX,MAAO,EACR,CACD,CAAC,EAED,KAAK,SAAS,IAAI,iCAAkC,CACnD,SAAU,CAAC,uBAAuB,EAClC,OAAQ,eACR,QAAQ1B,EAAK,CACZ,MAAMC,EAAMD,EAAI,IAAI,uBAAuB,EAC3C,GAAK,CAAEC,GAAO,CAAEA,EAAI,OACnB,OAAO,KAER,MAAMO,EAAM,CAAC,CAAC,EAAG,CAAC,CAAC,EAEnB,UAAUwnB,KAAQ/nB,EAAK,CACtB,MAAM0E,EAAIqjB,EAAK,EACf,IAAI0D,EAAI1D,EAAK,EAERrjB,IAAM,OACV+mB,KAAI,iBAAcA,CAAC,EAEV/mB,IAAM,QACf+mB,KAAI,gBAAaA,CAAC,GAEd,GAAEA,GAAK,CAAEA,EAAE,SAGhBlrB,EAAIwnB,EAAK,EAAI,EAAI,CAAC,EAAE,KAAK0D,CAAC,CAC3B,CAEA,MAAO,CACNlrB,EAAI,CAAC,EAAE,OACJ,IAAI,OAAO,OAAOA,EAAI,CAAC,EAAE,KAAK,GAAG,CAAC,IAAI,EACtC,KACHA,EAAI,CAAC,EAAE,OACJ,IAAI,OAAO,OAAOA,EAAI,CAAC,EAAE,KAAK,GAAG,CAAC,KAAM,GAAG,EAC3C,IACJ,CACD,EAEA,QAAS,IAAM,KAAK,YAAY,CACjC,CAAC,EAED,KAAK,SAAS,IAAI,yBAA0B,CAC3C,QAAS,CAAC,EACV,KAAM,cACN,eAAgB,GAChB,GAAI,CACH,KAAM,yCACN,UAAW,aACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,kCAAmC,CACpD,SAAU,CAAC,wBAAwB,EACnC,OAAQ,eACR,QAAQR,EAAK,CACZ,MAAMC,EAAMD,EAAI,IAAI,wBAAwB,EAC5C,GAAK,CAAEC,GAAO,CAAEA,EAAI,OACnB,OAAO,KAER,MAAMO,EAAM,CACX,CACC,CAAC,EAAG,CAAC,CACN,EACA,CACC,CAAC,EAAG,CAAC,CACN,CACD,EAEA,UAAUwnB,KAAQ/nB,EAAK,CACtB,MAAM0E,EAAIqjB,EAAK,EACf,IAAI0D,EAAI1D,EAAK,EAERrjB,IAAM,OACV+mB,KAAI,iBAAcA,CAAC,EAEV/mB,IAAM,QACf+mB,KAAI,gBAAaA,CAAC,GAEd,GAAEA,GAAK,CAAEA,EAAE,SAGhBlrB,EAAIwnB,EAAK,EAAI,EAAI,CAAC,EAAEA,EAAK,EAAI,EAAI,CAAC,EAAE,KAAK0D,CAAC,CAC3C,CAEA,MAAO,CACN0I,EAAY5zB,EAAI,CAAC,EAAG,GAAG,EACvB4zB,EAAY5zB,EAAI,CAAC,EAAG,IAAI,CACzB,CACD,EAEA,QAAS,IAAM,KAAK,YAAY,CACjC,CAAC,EAED,KAAK,SAAS,IAAI,yBAA0B,CAC3C,QAAS,CAAC,EACV,KAAM,oBACN,eAAgB,GAChB,GAAI,CACH,KAAM,uCACN,UAAW,iBACZ,EACA,QAAS,IAAM,KAAK,YAAY,CACjC,CAAC,EAGD,KAAK,SAAS,IAAI,wBAAyB,CAC1C,QAAS,CAAC,EACV,KAAM,cACN,eAAgB,GAChB,GAAI,CACH,KAAM,mDACN,UAAW,aACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,iCAAkC,CACnD,SAAU,CAAC,uBAAuB,EAClC,OAAQ,eACR,QAAQR,EAAK,CACZ,MAAMC,EAAMD,EAAI,IAAI,uBAAuB,EAC3C,GAAK,CAAEC,GAAO,CAAEA,EAAI,OACnB,OAAO,KAER,MAAMO,EAAM,CACX,CACC,CAAC,EAAG,CAAC,CACN,EACA,CACC,CAAC,EAAG,CAAC,CACN,CACD,EAEA,UAAUwnB,KAAQ/nB,EAAK,CACtB,MAAM0E,EAAIqjB,EAAK,EACf,IAAI0D,EAAI1D,EAAK,EAERrjB,IAAM,OACV+mB,KAAI,iBAAcA,CAAC,EAEV/mB,IAAM,QACf+mB,KAAI,gBAAaA,CAAC,GAEd,GAAEA,GAAK,CAAEA,EAAE,SAGhBlrB,EAAIwnB,EAAK,EAAI,EAAI,CAAC,EAAEA,EAAK,EAAI,EAAI,CAAC,EAAE,KAAK0D,CAAC,CAC3C,CAEA,MAAO,CACN0I,EAAY5zB,EAAI,CAAC,EAAG,GAAG,EACvB4zB,EAAY5zB,EAAI,CAAC,EAAG,IAAI,CACzB,CACD,EAEA,QAAS,IAAM,KAAK,YAAY,CACjC,CAAC,EAED,KAAK,SAAS,IAAI,sBAAuB,CACxC,QAAS,CAAC,EACV,KAAM,oBACN,eAAgB,GAChB,GAAI,CACH,KAAM,iDACN,UAAW,iBACZ,EACA,QAAS,IAAM,KAAK,YAAY,CACjC,CAAC,EAED,KAAK,SAAS,IAAI,uBAAwB,CACzC,QAAS,GACT,GAAI,CACH,KAAM,qCACN,MAAO,yEACP,YAAa,8VACb,UAAW,mBACZ,EACA,QAAS,IAAM,KAAK,YAAY,CACjC,CAAC,EAED,KAAK,SAAS,IAAI,wBAAyB,CAC1C,QAAS,CAAC,EACV,KAAM,cACN,eAAgB,GAChB,QAAQR,EAAKC,EAAK,CACjB,MAAMO,EAAM,IAAI,IAChB,UAAUkrB,KAAKzrB,EAAK,CACnB,IAAI+nB,EAAO0D,GAAG,EACT1D,IAAS,mBACbA,EAAO,kBACHA,GACJxnB,EAAI,IAAIwnB,CAAI,CACd,CAEA,OAAOxnB,CACR,EAEA,GAAI,CACH,KAAM,wCACN,UAAW,gBACX,KAAM,IAAM,CAAC,GAAG2zB,CAAa,EAC3B,KAAK,CACR,EAEA,QAAS,IAAM,KAAK,YAAY,CACjC,CAAC,EAED,KAAK,SAAS,IAAI,uBAAwB,CACzC,QAAS,CAAC,EACV,KAAM,cACN,eAAgB,GAChB,QAAQn0B,EAAKC,EAAK,CACjB,MAAMO,EAAM,IAAI,IAChB,UAAUkrB,KAAKzrB,EACTyrB,GAAG,GACPlrB,EAAI,IAAIkrB,EAAE,CAAC,EAEb,OAAOlrB,CACR,EAEA,GAAI,CACH,KAAM,kDACN,UAAW,gBACX,KAAM,IAAM,CAAC,GAAG2zB,CAAa,EAC3B,KAAK,CACR,EACA,QAAS,IAAM,KAAK,YAAY,CACjC,CAAC,EAwBD,KAAK,SAAS,IAAI,yBAA0B,CAC3C,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,wBACP,UAAW,qBACX,KAAM,CACL,CACC,MAAO,GACP,MAAO,UACR,EACA,CACC,MAAO,YACP,MAAO,qBACR,EACA,CACC,MAAO,eACP,MAAO,uBACR,EACA,CACC,MAAO,mBACP,MAAO,uBACR,EACA,CACC,MAAO,SACP,MAAO,kBACR,CACD,CACD,EACA,QAAS,IAAM,KAAK,cAAc,CACnC,CAAC,EAED,KAAK,WAAa,KAAK,WAAW,KAAK,IAAI,CAC5C,CAGA,UAAW,CACV,KAAK,WAAW,WAAW,gBAAiB,KAAK,SAAS,IAAI,gCAAgC,IAAM,CAAC,EACrG,KAAK,WAAW,WAAW,eAAgB,KAAK,SAAS,IAAI,qBAAqB,CAAC,EACnF,KAAK,WAAW,OAAO,aAAc,KAAK,SAAS,IAAI,yBAAyB,CAAC,EACjF,KAAK,SAAS,WAAW,iCAAkCl0B,GAAO,KAAK,WAAW,OAAO,uBAAwBA,CAAG,CAAC,EAErH,MAAMq0B,EAAO,KAAK,SAAS,IAAI,wBAAwB,EAEvD,KAAK,WAAW,OAAO,cAAeA,EAAO,CAAC,EAC9C,KAAK,WAAW,OAAO,iBAAkBA,IAAS,GAAKA,IAAS,CAAC,EAEjE,KAAK,GAAG,cAAe,IAAM,KAAK,YAAY,CAAC,EAE/C,KAAK,wBAAwB,GAAG,QAAS,KAAK,cAAe,IAAI,EACjE,KAAK,wBAAwB,GAAG,SAAU,KAAK,cAAe,IAAI,EAClE,KAAK,wBAAwB,GAAG,UAAW,KAAK,aAAc,IAAI,EAClE,KAAK,wBAAwB,KAAK7xB,GAAM,KAAK,cAAcA,CAAE,CAAC,EAE9D,KAAK,cAAc,GAAG,QAAS,KAAK,WAAY,IAAI,EACpD,KAAK,cAAc,GAAG,SAAU,KAAK,WAAY,IAAI,EACrD,KAAK,cAAc,GAAG,UAAW,KAAK,UAAW,IAAI,EACrD,KAAK,cAAc,KAAKA,GAAM,KAAK,WAAWA,CAAE,CAAC,EAEjD,KAAK,kBAAkB,GAAG,QAAS,KAAK,eAAgB,IAAI,EAC5D,KAAK,kBAAkB,GAAG,SAAU,KAAK,eAAgB,IAAI,EAE7D,KAAK,kBAAkB,KAAKA,GAAM,KAAK,eAAeA,CAAE,CAAC,EAEzD,KAAK,gBAAgB,GAAG,QAAS,KAAK,cAAe,IAAI,EACzD,KAAK,gBAAgB,MAAM,IAAM,KAAK,cAAc,CAAC,EAErD,MAAMkC,EAAI,KAEV,KAAK,eAAe,MAAML,GAAO,CAChC,MAAMiwB,EAAoBjwB,EAAI,UAAU,iBACxCA,EAAI,UAAU,iBAAmB,SAASsL,KAAS7P,EAAM,CACxD,GAAI,CACH,IAAI+R,EAMJ,GALKlC,EAAK,aAAe,OACxBkC,EAAOlC,EAAK,KACHA,EAAK,OACdkC,EAAOlC,EAAK,KAAK,MAEbkC,GAAQnN,EAAE,SAAS,SAAS,IAAI,+BAAgC,CAAC,CAAC,EAAE,SAASmN,CAAI,EACrF,MAAO,EAET,OAAQxR,EAAK,CACZqE,EAAE,IAAI,QAAQrE,CAAG,EACjBqE,EAAE,IAAI,MAAMrE,CAAG,CAChB,CAEA,OAAOi0B,EAAkB,KAAK,KAAM3kB,EAAM,GAAG7P,CAAI,CAClD,EAEA,MAAMyQ,EAAalM,EAAI,UAAU,OACjCA,EAAI,UAAU,OAAS,UAAW,CACjC,GAAI,CACH,GAAKK,EAAE,SAAS,IAAI,4BAA4B,MACnC,OAAI,wBAAyB,IAAI,IAChC,sBACZ,OAAO,IAGV,OAAQrE,EAAK,CACZqE,EAAE,IAAI,QAAQrE,CAAG,CAClB,CAEA,OAAOkQ,EAAW,KAAK,IAAI,CAC5B,EAEA,KAAK,eAAe,YAAY,CACjC,CAAC,CACF,CAEA,cAAcrM,EAAM,CACnB,GAAK,CAAEA,EAAO,CACb,UAAUA,KAAQ,KAAK,gBAAgB,UACtC,KAAK,cAAcA,CAAI,EACxB,MACD,CAEA,MAAMkQ,EAAO,KAAK,SAAS,IAAI,wBAAwB,EACvD,GAAK,CAAEA,GAAQA,IAASlQ,EAAK,OAAO,aACnC,OAED,MAAMmN,EAAOnN,EAAK,kBAAkBkQ,EAAM,GAAOlQ,EAAK,KAAK,EACpDmN,GAAM,OAAO,SAKfA,EAAK,MAAM,SACfA,EAAK,MAAM,QAAQ,EAGpB,KAAK,OAAO,QAAQ,KAAKA,EAAK,MAAM,MAAM,EAC3C,CAEA,eAAe7O,EAAI,CAClB,MAAML,EAAQ,KAAK,KAAK,iBAAiBK,CAAE,EAC3C,GAAK,CAAEL,EACN,OAED,MAAMoP,EAAQpP,EAAM,QAAQ,cAC5B,GAAK,CAAEoP,GAAO,eAAe,SAC5B,OAED,MAAMM,EAAON,EAAM,cAAc,SAChCgjB,EAAOhjB,EAAM,cAAc,KAE5B,IAAIijB,EAAU,GAEd,GAAK,MAAM,QAAQD,CAAI,EAAI,CAC1B,MAAME,EAAW,KAAK,SAAS,IAAI,yBAA0B,CAAC,CAAC,EAC/D,GAAKA,EAAS,QACb,UAAUpb,KAAOkb,EAChB,GAAKlb,GAAK,IAAMob,EAAS,SAASpb,EAAI,EAAE,EAAI,CAC3Cmb,EAAU,GACV,KACD,EAGH,CAEA,MAAME,EAAcF,GAAW,KAAK,SAAS,SAAS,IAAI,+BAAgC,CAAC,CAAC,EAAE,SAAS3iB,CAAI,EAE3G,IAAI8iB,EAAiBnyB,EAAG,QAAQ,iBAAiB,EAC1CmyB,IACNA,EAAiBnyB,GAEbmyB,EAAe,iBAAiB,yCAAyC,EAAE,OAAS,GACxFA,EAAe,UAAU,OAAO,UAAWD,CAAW,CACxD,CAEA,aAAc,CACb,KAAK,cAAc,KAAKlyB,GAAM,KAAK,WAAWA,CAAE,CAAC,EACjD,KAAK,wBAAwB,KAAKA,GAAM,KAAK,cAAcA,CAAE,CAAC,EAC9D,KAAK,kBAAkB,KAAKA,GAAM,KAAK,eAAeA,CAAE,CAAC,EACzD,KAAK,eAAe,YAAY,EAEhC,KAAK,KAAK,eAAe,CAC1B,CAEA,UAAUA,EAAIoyB,EAAU,GAAO,CAC9B,KAAK,YAAYpyB,CAAE,EACnB,KAAK,WAAWA,CAAE,EAElB,MAAMsC,EAAO,KAAK,sBAAsBtC,EAAIoyB,CAAO,EAC9C9vB,GACJA,EAAK,OAAO,EAEbtC,EAAG,eAAiB,IACrB,CAEA,aAAaA,EAAI,CAChB,OAAO,KAAK,UAAUA,EAAI,EAAI,CAC/B,CAEA,WAAWA,EAAI,CACd,MAAMN,EAAS,KAAK,KAAK,iBAAiBM,EAAImE,GAAKA,EAAE,eAAe,YAAY,EAChF,GAAK,CAAEzE,EACN,OAED,MAAMqP,EAAQrP,EAAO,cACrB,OAAO,KAAK,YAAYM,EAAI,GAAO+O,EAAOA,EAAM,aAAa,CAC9D,CAEA,cAAc/O,EAAI,CACjB,MAAMN,EAAS,KAAK,KAAK,iBAAiBM,EAAImE,GAAKA,EAAE,eAAe,MAAM,SAAS,EACnF,GAAK,CAAEzE,EACN,OAED,MAAMqP,EAAQrP,EAAO,cACpB6lB,EAAOxW,EAAM,KAEd,OAAO,KAAK,YAAY/O,EAAI,GAAMulB,EAAMxW,EAAM,QAAQ,CACvD,CAEA,YAAY/O,EAAIoyB,EAAS7M,EAAM8M,EAAU,CACxC,MAAMhjB,EAAOkW,EAAK,cAAgBA,EAAK,WAAa8M,GAAU,MAAQA,GAAU,cAAgBA,GAAU,SACzGN,EAAOxM,EAAK,MAAQA,EAAK,cAAc,aAElC+M,EAAa,KAAK,SAAS,IAAI,sBAAsB,EAC1DC,EAAa,KAAK,SAAS,IAAI,sBAAsB,EACrDC,EAAa,KAAK,SAAS,IAAI,uBAAwB,CAAC,CAAC,EACzDC,EAAc,KAAK,SAAS,IAAI,wBAAyB,CAAC,CAAC,EAC3DC,EAAeF,EAAW,KAAO,GAAKC,EAAY,KAAO,EACzDE,EAAYJ,GAAcG,EAEtB1yB,EAAG,aAAe,QAAa2yB,IACnC3yB,EAAG,WAAa,KAGXulB,EAAK,MAAQA,EAAK,OAAS,QAG/BvlB,EAAG,WAAa,CAAC,EAENulB,EAAK,OAASA,EAAK,OAAS,SAGvCvlB,EAAG,WAAa,CAAC,EAKjB,KAAK,YAAY,eAAeulB,EAAK,UAAWA,EAAK,UAAY,KAAOA,EAAK,YAAY,EAAE,KAAK5nB,IAAQ,CACvGqC,EAAG,WAAarC,IAAQ,CAAC,EACzBy0B,EACG,KAAK,cAAcpyB,CAAE,EACrB,KAAK,WAAWA,CAAE,CACtB,CAAC,GAIH,IAAIgyB,EAAU,GACbY,EAAW,GAEZ,GAAK,MAAM,QAAQb,CAAI,EAAI,CAC1B,MAAME,GAAW,KAAK,SAAS,IAAI,yBAA0B,CAAC,CAAC,EAC9DY,GAAY,KAAK,SAAS,IAAI,sBAAuB,CAAC,CAAC,EAExD,GAAKZ,GAAS,QAAUY,GAAU,OACjC,UAAUhc,KAAOkb,EAAM,CACtB,GAAKlb,GAAK,KAAO,CAChB,MAAMic,EAAQjc,EAAI,KAAK,YAAY,EAC9Bob,GAAS,SAASa,CAAK,IAC3Bd,EAAU,IACNa,GAAU,SAASC,CAAK,IAC5BF,EAAW,GACb,CACA,IAAMZ,GAAW,CAAEC,GAAS,UAAYW,GAAY,CAAEC,GAAU,QAC/D,KACF,CAEF,CAEA,IAAIE,GAAcH,EAKlB,GAJKN,GAAcI,GAAgB1yB,EAAG,YAAc,OACnD+yB,GAAc,IACRA,KACNA,GAAc,KAAK,SAAS,SAAS,IAAI,mCAAoC,CAAC,CAAC,EAAE,SAAS1jB,CAAI,GAC1F,CAAE0jB,IAAeP,EAAW,MAAQxyB,EAAG,YAC3C,UAAUgzB,MAAQhzB,EAAG,WACpB,GAAKgzB,IAAM,IAAMR,EAAW,IAAIQ,GAAK,EAAE,EAAI,CAC1CD,GAAc,GACd,KACD,EAEF,GAAK,CAAEA,GAAc,CACpB,MAAME,GAAU,KAAK,SAAS,IAAI,gCAAgC,EAC7DA,KACCA,GAAQ,CAAC,IACbA,GAAQ,CAAC,EAAE,UAAY,IACnBA,GAAQ,CAAC,IACbA,GAAQ,CAAC,EAAE,UAAY,KAElBA,GAAQ,CAAC,GAAKA,GAAQ,CAAC,EAAE,KAAK1N,EAAK,KAAK,GAAS0N,GAAQ,CAAC,GAAKA,GAAQ,CAAC,EAAE,KAAK1N,EAAK,KAAK,KAC9FwN,GAAc,IAEjB,CAEA,MAAMzc,GAAOiP,EAAK,MAAQA,EAAK,WAE/BvlB,EAAG,UAAU,OAAO,qBAAsB+yB,EAAW,EACrD/yB,EAAG,QAAQ,QAAUsW,GAErB,IAAI4b,GAAc,GAClB,GAAKF,EACJE,GAAc,WACL5b,KAAS,SAAW,KAAK,SAAS,IAAI,yBAAyB,EACxE4b,GAAc,WACL3M,EAAK,SAAW,MAAQA,EAAK,UAAYkM,EAAc,gBAAkB,KAAK,SAAS,SAAS,IAAI,+BAAgC,CAAC,CAAC,EAAE,SAASpiB,CAAI,EAC9J6iB,GAAc,YACJ3M,EAAK,aAAeA,EAAK,aAAe,mBAAqBA,EAAK,aAAe,aAAeA,EAAK,aAAe,cAAgB,KAAK,SAAS,IAAI,yBAAyB,EACzL2M,GAAc,OACV,CACJ,GAAKO,EAAY,MAAQzyB,EAAG,YAC3B,UAAUgzB,MAAQhzB,EAAG,WACpB,GAAKgzB,IAAM,IAAMP,EAAY,IAAIO,GAAK,EAAE,EAAI,CAC3Cd,GAAc,GACd,KACD,EAGF,GAAK,CAAEA,GAAc,CACpB,MAAMe,GAAU,KAAK,SAAS,IAAI,gCAAgC,EAC7DA,KACCA,GAAQ,CAAC,IACbA,GAAQ,CAAC,EAAE,UAAY,IACnBA,GAAQ,CAAC,IACbA,GAAQ,CAAC,EAAE,UAAY,KAElBA,GAAQ,CAAC,GAAKA,GAAQ,CAAC,EAAE,KAAK1N,EAAK,YAAY,GAAS0N,GAAQ,CAAC,GAAKA,GAAQ,CAAC,EAAE,KAAK1N,EAAK,YAAY,KAC5G2M,GAAc,IAEjB,CAEA,GAAK,CAAEA,GAAc,CACpB,MAAMe,GAAU,KAAK,SAAS,IAAI,iCAAiC,EAC9DA,KACCA,GAAQ,CAAC,IACbA,GAAQ,CAAC,EAAE,UAAY,IACnBA,GAAQ,CAAC,IACbA,GAAQ,CAAC,EAAE,UAAY,KAElBA,GAAQ,CAAC,GAAKA,GAAQ,CAAC,EAAE,KAAK1N,EAAK,KAAK,GAAS0N,GAAQ,CAAC,GAAKA,GAAQ,CAAC,EAAE,KAAK1N,EAAK,KAAK,KAC9F2M,GAAc,IAEjB,CACD,CAEA,IAAIC,GAAiBnyB,EAAG,QAAQ,iBAAiB,EAC1CmyB,KACNA,GAAiBnyB,GAEbmyB,GAAe,iBAAiB,4CAA4C,EAAE,OAAS,GAC3FA,GAAe,UAAU,OAAO,UAAWD,EAAW,EAEvD,KAAK,aAAalyB,EAAIulB,EAAM6M,CAAO,EACnC,KAAK,YAAYpyB,EAAIoyB,CAAO,CAC7B,CAEA,YAAYpyB,EAAIoyB,EAAU,GAAO,CAChC,GAAK,CAAE,SAAS,SAASpyB,CAAE,EAC1B,OAAO,KAAK,WAAWA,CAAE,EAI1B,GAAK,CAFW,KAAK,SAAS,IAAI,sBAAsB,GAEtC,CAAEA,EAAG,YAAY,OAClC,OAAO,KAAK,WAAWA,CAAE,EAE1B,MAAMmB,EAAY,KAAK,sBAAsBnB,EAAI,GAAMoyB,CAAO,EAC9D,GAAK,CAAEjxB,EACN,OAAO,KAAK,WAAWnB,CAAE,EAEnBA,EAAG,aAQEA,EAAG,SAASA,EAAG,YAAY,GACtCmB,EAAU,YAAYnB,EAAG,YAAY,EARrCmB,EAAU,YAAYnB,EAAG,gBAAgB,iBAAC,OAAI,MAAM,yEACnD,iBAAC,OAAI,MAAM,0FACV,iBAAC,UAAO,MAAM,YAAa,EAC5B,EACCA,EAAG,gBAAe,iBAAC,OAAI,MAAM,qFAAsF,EACrH,CAAO,EAKRA,EAAG,aAAa,YAAc,KAAK,KAAK,EAAE,yBAA0B,8CAA8C,EAC/G;AAAA;AAAA,EACAA,EAAG,WAAW,IAAIuI,GAAKA,EAAE,aAAa,EAAE,KAAK;AAAA,CAAI,CACrD,CAEA,WAAWvI,EAAI,CACTA,EAAG,eACPA,EAAG,aAAa,OAAO,EACvBA,EAAG,aAAe,KAClBA,EAAG,aAAe,KAEpB,CAGA,sBAAsBA,EAAIkzB,EAAgB,GAAMd,EAAU,GAAO,CAChE,IAAI9vB,EAAOtC,EAAG,gBAAkBA,EAAG,cAAc,gBAAgB,EACjE,GAAKsC,GAAQ,CAAE4wB,EACd,OAAO5wB,EAER,IAAInB,EAAYixB,EACbpyB,EAAG,cAAc,sBAAsB,EACvCA,EAAG,cAAc,kDAAkD,EAGtE,OAFKmB,GAAaixB,IACjBjxB,EAAYA,EAAU,eAAe,eAC/BA,GAGPmB,KAAQ,iBAAC,OACR,qBAAmB,qBACnB,MAAM,kGACP,EACAtC,EAAG,eAAiBsC,EAEpBnB,EAAU,YAAYmB,CAAI,EACnBA,GATC,IAUT,CAGA,aAAatC,EAAI+O,EAAOqjB,EAAU,GAAO,CACxC,GAAK,CAAE,SAAS,SAASpyB,CAAE,EAC1B,OAAO,KAAK,YAAYA,CAAE,EAE3B,MAAMlB,EAAU,KAAK,SAAS,IAAI,kBAAkB,EACnDqC,EAAY,KAAK,sBAAsBnB,EAAIlB,EAAU,EAAGszB,CAAO,EAKhE,GAAK,CAAEjxB,GAAarC,IAAY,GAAKiQ,EAAM,WAAaA,EAAM,oBAAsBA,EAAM,OAAS,UAAYA,EAAM,OAAS,QAC7H,OAAO,KAAK,YAAY/O,CAAE,EAE3B,IAAImzB,EAAapkB,EAAM,UAEhBokB,IACDnzB,EAAG,kBAAoB,SAC3BA,EAAG,gBAAkB,KACrB,KAAK,YAAY,cAAc,KAAM+O,EAAM,YAAY,EAAE,KAAKpR,GAAQ,CACrEqC,EAAG,gBAAkBrC,EACrB,KAAK,aAAaqC,EAAI+O,EAAOqjB,CAAO,CACrC,CAAC,GAGFe,EAAanzB,EAAG,iBAAiB,WAGlC,MAAMozB,EAAWD,GAAc,IAAI,KAAKA,CAAU,EACjDE,EAASD,GAAY,KAAK,OAAO,KAAK,IAAI,EAAIA,GAAY,GAAI,GAAK,EAEpE,GAAKC,EAAS,EACb,OAAO,KAAK,YAAYrzB,CAAE,EAE3B,MAAMszB,KAAU,sBAAmBD,EAAQ,GAAO,GAAO,GAAOv0B,IAAY,CAAC,EA0B7E,GAxBOkB,EAAG,gBACTA,EAAG,cAAgBmB,EAAU,cAAc,qBAAqB,GAE1DnB,EAAG,cAgBEA,EAAG,SAASA,EAAG,aAAa,GACvCmB,EAAU,YAAYnB,EAAG,aAAa,EAhBtCmB,EAAU,YAAYnB,EAAG,iBACxB,iBAAC,OAAI,MAAM,+DACV,iBAAC,OAAI,MAAM,0FACV,iBAAC,OAAI,MAAM,6BACV,iBAAC,UAAO,MAAM,aAAc,EAC7B,EACCA,EAAG,mBAAkB,iBAAC,QAAE,CAC1B,KACA,iBAAC,OAAI,MAAM,mEACT,KAAK,KAAK,EAAE,0BAA2B,eAAe,EACtDA,EAAG,iBAAgB,iBAAC,OAAI,MAAM,YAAa,EAC7C,CACD,CACA,EAKKA,EAAG,kBACTA,EAAG,gBAAkBA,EAAG,cAAc,cAAc,GAAG,GACnD,CAAEA,EAAG,gBACT,OAAO,KAAK,YAAYA,CAAE,EAI3B,GAFOA,EAAG,gBACTA,EAAG,cAAgBA,EAAG,cAAc,cAAc,uBAAuB,GACrE,CAAEA,EAAG,cACT,OAAO,KAAK,YAAYA,CAAE,EAEpBA,EAAG,mBACTA,EAAG,iBAAmB,YAAY,KAAK,aAAa,KAAK,KAAMA,EAAI+O,EAAOqjB,CAAO,EAAG,GAAI,GAEzFpyB,EAAG,gBAAgB,YAAcszB,EAE5BtzB,EAAG,sBAAwBmzB,IAC/BnzB,EAAG,cAAc,YAAc,KAAK,KAAK,EACxC,wBACA,2BACA,CAAC,MAAOozB,CAAQ,CACjB,EAEApzB,EAAG,oBAAsBmzB,EAE3B,CAGA,YAAYzxB,EAAM,CACZA,EAAK,mBACT,cAAcA,EAAK,gBAAgB,EACnCA,EAAK,iBAAmB,MAGpBA,EAAK,gBACTA,EAAK,cAAc,OAAO,EAC1BA,EAAK,cAAgB,KACrBA,EAAK,gBAAkB,KACvBA,EAAK,cAAgB,KACrBA,EAAK,oBAAsB,KAE7B,CAGA,WAAWjE,EAAO4U,EAAK,CAItB,GAHA5U,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EAEjB,CAAE4U,EAAM,CACZ,MAAM7Q,EAAS/D,EAAM,cAErB,GAAK+D,EAAS,CACb,MAAMgB,EAAKhB,EAAO,QACbgB,GAAMA,EAAG,KACb6P,EAAM7P,EAAG,KAEAhB,EAAO,OAChB6Q,EAAM7Q,EAAO,KACf,CACD,CAEK6Q,GACJ,KAAK,OAAO,QAAQ,KAAKA,CAAG,CAC9B,CAGA,gBAAgB5U,EAAOqJ,EAAMysB,EAAa,KAAM,CAC/C91B,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EAEjB81B,GACJA,EAAW91B,EAAOqJ,CAAI,EAEvB,KAAK,OAAO,SAAS,OAAQ,CAAE,SAAUA,CAAK,CAAC,CAChD,CACD,EAt+B8C,iBAA/B,IAAM0sB,EAAN,C,kGClCf,MAAMC,EAAkB,0BAAC,OAAQ,QAAS,aAAc,YAAa,cAAe,aAAc,mBAAoB,cAAe,iBAAkB,gBAAgB,EAAC,KAClKC,EAAiB,0BAAC,SAAU,aAAc,WAAW,EAAC,KAEvC,EAAN,MAAM,UAAe,mCAAM,KAAC,CAC1C,eAAep2B,EAAM,CACpB,MAAM,GAAGA,CAAI,EAEb,KAAK,cAAgB,GAErB,KAAK,OAAO,UAAU,EACtB,KAAK,OAAO,WAAW,EACvB,KAAK,OAAO,iBAAiB,EAC7B,KAAK,OAAO,gBAAgB,EAY5B,KAAK,eAAiB,KAAK,KAAK,OAC/B,kBACA6G,GAAKA,EAAE,uBAAyBA,EAAE,eAAiBA,EAAE,MAAM,QAC5D,EAEA,KAAK,QAAU,KAAK,UAAU,OAC7B,UACA,qBACA,KACA,CAAC,WAAY,GAAM,QAAS,EAAI,EAAG,CACpC,EAOA,KAAK,SAAS,IAAI,mBAAoB,CACrC,QAAS,GACT,GAAI,CACH,KAAM,+BACN,MAAO,6DACP,YAAa,6HACb,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,kBAAmB,CACpC,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,uBACP,YAAa,yGACb,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,yBAA0B,CAC3C,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,gDACP,UAAW,mBACZ,EACA,QAAS3G,GAAO,SAAS,KAAK,UAAU,OAAO,uBAAwBA,CAAG,CAC3E,CAAC,EAED,KAAK,SAAS,IAAI,4BAA6B,CAC9C,QAAS,KACT,GAAI,CACH,KAAM,iCACN,MAAO,0BACP,YAAa,yFACb,UAAW,mBACX,QAAQA,EAAK,CAEZ,OADAA,EAAM,WAAWA,EAAK,EAAE,EACnB,MAAMA,CAAG,GAAK,CAAE,SAASA,CAAG,GAAKA,GAAO,EACrC,KAEDA,CACR,CACD,CACD,CAAC,EAED,KAAK,SAAS,IAAI,2BAA4B,CAC7C,QAAS,GACT,SAAU,CAAC,qBAAqB,EAChC,QAAQD,EAAKC,EAAK,CACjB,OAAOD,EAAI,IAAI,qBAAqB,EAG7BC,EAFC,EAGT,EACA,GAAI,CACH,KAAM,iCACN,MAAO,qCACP,YAAa,2MACb,UAAW,mBACZ,CAED,CAAC,EAED,KAAK,SAAS,IAAI,sBAAuB,CACxC,SAAU,CAAC,kBAAmB,4BAA6B,qBAAsB,eAAgB,sBAAsB,EACvH,QAAQD,EAAK,CACZ,GAAKA,EAAI,IAAI,sBAAsB,EAClC,MAAO,GAER,MAAMqsB,EAAOrsB,EAAI,IAAI,cAAc,EACnC,MAAK,CAAEqsB,GAAQ,CAAErsB,EAAI,IAAI,iBAAiB,GAAK,CAAEk2B,EAAgB,SAASl2B,EAAI,IAAI,oBAAoB,CAAC,EAC/F,GAEMqsB,EAAK,MAAQA,EAAK,QAChBrsB,EAAI,IAAI,2BAA2B,CACpD,EACA,QAAS,IAAM,KAAK,mBAAmB,CACxC,CAAC,EAED,KAAK,SAAS,IAAI,yBAA0B,CAC3C,SAAU,CAAC,sBAAuB,gCAAgC,EAClE,QAAQA,EAAK,CACZ,OAAOA,EAAI,IAAI,qBAAqB,GAAKA,EAAI,IAAI,gCAAgC,CAClF,CAED,CAAC,EAED,KAAK,SAAS,IAAI,8BAA+B,CAChD,SAAU,CAAC,yBAA0B,sBAAsB,EAC3D,QAAQA,EAAK,CACZ,OAAOA,EAAI,IAAI,wBAAwB,GAAKA,EAAI,IAAI,sBAAsB,CAC3E,CAED,CAAC,EAED,KAAK,SAAS,IAAI,2BAA4B,CAC7C,SAAU,CAAC,yBAA0B,yBAAyB,EAC9D,QAAQA,EAAK,CACZ,OAAOA,EAAI,IAAI,wBAAwB,GAAKA,EAAI,IAAI,yBAAyB,CAC9E,CAED,CAAC,EAED,KAAK,SAAS,IAAI,+BAAgC,CACjD,SAAU,CAAC,2BAA4B,wBAAwB,EAC/D,QAAQA,EAAK,CACZ,OAAOA,EAAI,IAAI,0BAA0B,GAAK,CAAEA,EAAI,IAAI,wBAAwB,CACjF,CAED,CAAC,EAED,KAAK,SAAS,IAAI,yBAA0B,CAC3C,SAAU,CAAC,gCAAiC,oBAAoB,EAChE,QAAQA,EAAK,CACZ,OAAKA,EAAI,IAAI,oBAAoB,EACzB,GACDA,EAAI,IAAI,+BAA+B,CAC/C,CACD,CAAC,EAED,KAAK,SAAS,IAAI,4BAA6B,CAC9C,SAAU,CAAC,sBAAuB,+BAAgC,6BAA6B,EAC/F,SAAU,CAET,MAAO,EACR,EACA,QAAS,IAAM,KAAK,mBAAmB,CACxC,CAAC,EAED,KAAK,SAAS,IAAI,+BAAgC,CACjD,SAAU,CAAC,sBAAuB,oBAA4C,yBAA0B,6BAA8B,gBAAiB,2BAA2B,EAClL,QAAQA,EAAK,CACZ,IAAI4b,EAAS,EACb,OAAK5b,EAAI,IAAI,wBAAwB,GAC/BA,EAAI,IAAI,2BAA2B,IACvC4b,GAAU,GAEN5b,EAAI,IAAI,eAAe,GAAK,CAAEA,EAAI,IAAI,4BAA4B,IACtE4b,GAAU,KAGXA,EAAS5b,EAAI,IAAI,2BAA2B,EAAI,EAAI,EAC/CA,EAAI,IAAI,eAAe,IAC3B4b,GAAU,GAEN5b,EAAI,IAAI,mBAAmB,IAC/B4b,GAAU,GAEXA,GAAU5b,EAAI,IAAI,qBAAqB,EAAI,EAAI,GAMzC4b,CACR,CAGD,CAAC,EAED,KAAK,SAAS,IAAI,8BAA+B,CAChD,QAAS,CAAC,uBAAwB,yBAA0B,4BAA4B,EACxF,QAAQ5b,EAAK,CACZ,MAAK,CAAEA,EAAI,IAAI,sBAAsB,GAAKA,EAAI,IAAI,wBAAwB,EAClE,EAEDA,EAAI,IAAI,4BAA4B,EAAI,GAAK,CACrD,CAGD,CAAC,EAED,KAAK,SAAS,IAAI,oBAAqB,CACtC,QAAS,CAAC,oBAAoB,EAC9B,QAAQA,EAAK,CACZ,OAAOm2B,EAAe,SAASn2B,EAAI,IAAI,oBAAoB,CAAC,CAC7D,CACD,CAAC,CACF,CAEA,UAAW,CACV,SAAS,KAAK,UAAU,OAAO,uBAAwB,KAAK,SAAS,IAAI,wBAAwB,CAAC,EAElG,KAAK,GAAG,cAAe,KAAK,eAAgB,IAAI,EAChD,KAAK,GAAG,UAAW,KAAK,aAAc,IAAI,EAE1C,KAAK,SAAS,WAAW,2BAA4BC,GAAO,KAAK,WAAW,OAAO,gBAAiBA,CAAG,CAAC,EACxG,KAAK,SAAS,WAAW,yBAA0BA,GAAO,KAAK,WAAW,OAAO,WAAYA,CAAG,CAAC,EACjG,KAAK,SAAS,WAAW,8BAA+BA,GAAO,KAAK,WAAW,OAAO,mBAAoBA,CAAG,CAAC,EAC9G,KAAK,SAAS,WAAW,2BAA4BA,GAAO,KAAK,WAAW,OAAO,oBAAqBA,CAAG,CAAC,EAC5G,KAAK,SAAS,WAAW,+BAAgCA,GAAO,KAAK,WAAW,OAAO,wBAAyBA,CAAG,CAAC,EAEpH,KAAK,SAAS,WAAW,8BAA+BA,GAAO,KAAK,WAAW,YAAY,uBAAwB,GAAGA,CAAG,KAAK,CAAC,EAC/H,KAAK,SAAS,WAAW,+BAAgCA,GAAO,KAAK,WAAW,YAAY,wBAAyB,GAAGA,CAAG,KAAK,CAAC,EAUjI,KAAK,GAAG,8BAA+B,IAAM,CAC5C,KAAK,QAAQ,KAAKwC,GAAM,KAAK,eAAeA,CAAE,CAAC,CAGhD,CAAC,EAED,KAAK,eAAe,MAAM,IAAM,CAC1B,KAAK,gBACT,KAAK,cAAgB,GACrB,KAAK,aAAa,EAEpB,CAAC,EAED,KAAK,QAAQ,GAAG,QAAS,KAAK,cAAe,IAAI,EACjD,KAAK,QAAQ,GAAG,SAAU,KAAK,cAAe,IAAI,EAClD,KAAK,QAAQ,KAAKA,GAAM,KAAK,cAAcA,CAAE,CAAC,CAsD/C,CAEA,cAAe,CACT,KAAK,gBAGV,KAAK,cAAgB,WAAW,IAAM,KAAK,cAAc,EAAG,aAAa,IAAM,GAAG,EACnF,CAEA,eAAgB,CAIf,GAHA,aAAa,KAAK,aAAa,EAC/B,KAAK,cAAgB,KAEhB,CAAE,KAAK,eAAe,UAAU,KACpC,KAAK,cAAgB,OACjB,CACJ,UAAU0B,KAAQ,KAAK,eAAe,UACrCA,GAAM,WAAW,EAIlB,KAAK,KAAK,wBAAwB,CACnC,CACD,CAEA,IAAI,YAAa,CAChB,OAAO,KAAK,SAAS,IAAI,mBAAmB,CAC7C,CAEA,cAAc1B,EAAI,CACVA,IAGAA,EAAG,cACTA,EAAG,eAAc,YAAS,IAAM,sBAAsB,IAAM,KAAK,eAAeA,CAAE,CAAC,EAAG,IAAM,CAAC,GAE9FA,EAAG,YAAY,EAChB,CAEA,eAAeA,EAAI,CAClB,GAAK,CAAEA,EACN,OAED,MAAM2zB,EAAQ3zB,EAAG,iBAAiB,gBAAgB,EACjDmxB,EAAgB,KAAK,SAAS,SAAS,IAAI,+BAAgC,CAAC,CAAC,EAE9E,UAAUyC,KAAQD,EAAO,CACxB,MAAMh0B,EAAQ,KAAK,KAAK,iBAAiBi0B,CAAI,EAC5C7kB,EAAQpP,GAAO,QAAQ,QAAQ,cAC/Bk0B,EAAS9kB,GAAO,eAAe,OAAO,OACtC+kB,EAAQD,GAAQ,OAAS,QACzBxkB,EAAOwkB,GAAQ,MAAM,YACrBE,EAAUhlB,GAAO,SAAW,GAE7B,IAAImjB,EAAc,GAGlB,GAFK7iB,GAAQ8hB,EAAc,SAAS9hB,CAAI,IACvC6iB,EAAc,IACVnjB,GAAO,YAAc,KAAK,SAAS,IAAI,yBAAyB,EACpEmjB,EAAc,OACV,CACJ,GAAK,CAAEA,EAAc,CACpB,MAAMe,EAAU,KAAK,SAAS,IAAI,gCAAgC,EAC5DzkB,EAAQO,GAAO,UAChBkkB,GAAWzkB,IACVykB,EAAQ,CAAC,IACbA,EAAQ,CAAC,EAAE,UAAY,IACnBA,EAAQ,CAAC,IACbA,EAAQ,CAAC,EAAE,UAAY,KAClBA,EAAQ,CAAC,GAAKA,EAAQ,CAAC,EAAE,KAAKzkB,CAAK,GAAOykB,EAAQ,CAAC,GAAKA,EAAQ,CAAC,EAAE,KAAKzkB,CAAK,KAClF0jB,EAAc,IAEjB,CAEA,GAAK,CAAEA,EAAa,CACnB,MAAMe,EAAU,KAAK,SAAS,IAAI,iCAAiC,EAC7D3jB,EAAQukB,GAAQ,aAAa,mBAAmB,MACjDZ,GAAW3jB,IACV2jB,EAAQ,CAAC,IACbA,EAAQ,CAAC,EAAE,UAAY,IACnBA,EAAQ,CAAC,IACbA,EAAQ,CAAC,EAAE,UAAY,KAClBA,EAAQ,CAAC,GAAKA,EAAQ,CAAC,EAAE,KAAK3jB,CAAK,GAAO2jB,EAAQ,CAAC,GAAKA,EAAQ,CAAC,EAAE,KAAK3jB,CAAK,KAClF4iB,EAAc,IAEjB,CACD,CAEA0B,EAAK,UAAU,OAAO,2BAA4BE,CAAK,EACvDF,EAAK,UAAU,OAAO,6BAA8BG,CAAO,EAC3DH,EAAK,UAAU,OAAO,UAAW1B,CAAW,CAC7C,CACD,CAkBA,gBAAiB,CAEjB,CAEA,oBAAqB,CAErB,CACD,EA5a2C,cAA5B,IAAM8B,EAAN,C,uHCCA,MAAM,EAAN,MAAM,UAAmB,mCAAM,KAAC,CAC9C,eAAe12B,EAAM,CACpB,MAAM,GAAGA,CAAI,EAEb,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,UAAU,EACtB,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,WAAW,EACvB,KAAK,OAAO,gBAAgB,EAG5B,KAAK,YAAc,KAAK,YAAY,KAAK,IAAI,EAC7C,KAAK,cAAgB,KAAK,cAAc,KAAK,IAAI,EAEjD,KAAK,cAAgB,GACrB,KAAK,cAAgB,KACrB,KAAK,YAAc,GACnB,KAAK,kBAAoB,GACzB,KAAK,cAAgB,EACrB,KAAK,SAAW,GAChB,KAAK,OAAS,CAAC,EAEf,KAAK,SAAS,IAAI,wBAAyB,CAC1C,QAAS,GACT,GAAI,CACH,KAAM,wCACN,MAAO,+GACP,UAAW,mBACZ,EACA,QAAS,IAAM,KAAK,OAAO,CAC5B,CAAC,EAED,KAAK,OAAS,KAAK,KAAK,OACvB,eACA6G,GAAKA,EAAE,SAAWA,EAAE,YAAcA,EAAE,aACpC,CAAC,UAAU,CACZ,EAQA,KAAK,YAAc,KAAK,UAAU,OACjC,eAAgB,6DAChB,IAAS,gBACT,CAAC,WAAY,EAAI,EAAG,CACrB,EAEA,KAAK,OAAS,KAAK,KAAK,OACvB,UACAA,GAAKA,EAAE,2BAA6BA,EAAE,sBACvC,EAEA,KAAK,SAAW,KAAK,KAAK,OACzB,gBACAA,GAAKA,EAAE,eAAiBA,EAAE,OAASA,EAAE,MAAM,QAC3C,CAAC,OAAO,CACT,EAEA,KAAK,gBAAkB,KAAK,KAAK,OAChC,mBACAA,GAAKA,EAAE,iBAAmBA,EAAE,oBAAsBA,EAAE,uBACpD,CAAC,gBAAgB,CAClB,CACD,CAEA,IAAI,SAAU,CACb,OAAO,KAAK,QACb,CAEA,IAAI,QAAQ3G,EAAK,CACXA,IAAQ,KAAK,WAGlB,KAAK,SAAWA,EAChB,KAAK,OAAO,EACb,CAEA,IAAI,cAAe,CAClB,OAAO,KAAK,aACb,CAEA,IAAI,aAAaA,EAAK,CAChBA,IAAQ,KAAK,gBAGlB,KAAK,cAAgBA,EACrB,KAAK,OAAO,EACb,CAEA,IAAI,SAAU,CACb,OAAO,KAAK,SAAS,IAAI,uBAAuB,GAAK,KAAK,cAAgB,CAC3E,CAEA,IAAI,kBAAmB,CACtB,OAAO,KAAK,iBACb,CAEA,IAAI,iBAAiBA,EAAK,CACzB,KAAK,kBAAoB,GACzB,KAAK,OAAO,CACb,CAEA,IAAI,YAAa,CAChB,OAAO,KAAK,WACb,CAEA,IAAI,aAAc,CACjB,OAAO,KAAK,KAAK,YAAc,GAAK,KAAK,KAAK,gBAAkB,CACjE,CAEA,IAAI,WAAWA,EAAK,CACdA,GAAO,CAAE,KAAK,cAClB,KAAK,kBAAoB,IAE1B,KAAK,YAAcA,EACnB,KAAK,OAAO,CACb,CAEA,IAAI,MAAO,CACV,OAAO,KAAK,aACb,CAEA,IAAI,KAAKA,EAAK,CACb,KAAK,cAAgBA,EACrB,KAAK,OAAO,CACb,CAEA,YAAa,CACZ,MAAMA,EAAM,KAAK,cACjB,OAAK,OAAOA,GAAQ,SACZ,KAAK,KAAK,aAAaA,CAAG,EAE7BA,GAAO,MAAQ,KAAK,QACjB,KAAK,KAAK,aAAa,KAAK,aAAa,EAE1CA,CACR,CAEA,iBAAkB,CACjB,GAAK,KAAK,WACT,OAAO,KAER,GAAK,KAAK,SAAS,iBAClB,SAAO,iBAAC,UAAO,MAAM,WAAY,GAElC,GAAK,KAAK,YACT,OAAO,KAAK,KAAK,aAAa,KAAK,KAAK,YAAc,KAAK,KAAK,eAAe,EAEhF,MAAMy2B,EAAS,KAAK,QAAQ,QAAQ,EAEpC,OAAK,SAASA,EAAO,QACb,KAAK,KAAK,EAAE,uBAAwB,KAAK,EAE5C,SAAS,CAAEA,EAAO,QACf,KAAK,KAAK,EAAE,4BAA6B,OAAO,EAEnD,CAAE,SAASA,EAAO,QACf,KAAK,KAAK,EAAE,6BAA8B,OAAO,EAElD,IACR,CAEA,cAAe,CACd,sBAAsB,IAAM,KAAK,cAAc,CAAC,CACjD,CAEA,eAAgB,CACf,UAAUvyB,KAAQ,KAAK,OAAO,UAC7B,KAAK,kBAAkBA,CAAI,EAE5B,UAAUA,KAAQ,KAAK,SAAS,UAC/B,KAAK,kBAAkBA,CAAI,EAE5B,UAAUA,KAAQ,KAAK,gBAAgB,UACtC,KAAK,kBAAkBA,CAAI,EAK5B,UAAU1B,KAAM,KAAK,YAAY,UAChC,KAAK,kBAAkB,KAAMA,EAAI,EAAI,EAEtC,UAAU0B,KAAQ,KAAK,OAAO,UAC7B,KAAK,kBAAkBA,CAAI,CAC7B,CAEA,QAAS,CACR,sBAAsB,IAAM,KAAK,QAAQ,CAAC,CAC3C,CAEA,SAAU,CACT,UAAUA,KAAQ,KAAK,OAAO,UAC7B,KAAK,aAAaA,CAAI,EAEvB,UAAUA,KAAQ,KAAK,SAAS,UAC/B,KAAK,aAAaA,CAAI,EAEvB,UAAUA,KAAQ,KAAK,gBAAgB,UACtC,KAAK,aAAaA,CAAI,EAKvB,UAAU1B,KAAM,KAAK,YAAY,UAChC,KAAK,aAAa,KAAMA,EAAI,EAAI,EAEjC,UAAU0B,KAAQ,KAAK,OAAO,UAC7B,KAAK,aAAaA,CAAI,CACxB,CAGA,UAAW,CACV,KAAK,OAAO,MAAM,IAAM,KAAK,OAAO,CAAC,EACrC,KAAK,OAAO,GAAG,QAAS,KAAK,aAAc,IAAI,EAC/C,KAAK,OAAO,GAAG,SAAU,KAAK,aAAc,IAAI,EAEhD,KAAK,SAAS,MAAM,IAAM,KAAK,OAAO,CAAC,EACvC,KAAK,SAAS,GAAG,QAAS,KAAK,aAAc,IAAI,EACjD,KAAK,SAAS,GAAG,SAAU,KAAK,aAAc,IAAI,EAElD,KAAK,gBAAgB,MAAM,IAAM,KAAK,OAAO,CAAC,EAC9C,KAAK,gBAAgB,GAAG,QAAS,KAAK,aAAc,IAAI,EACxD,KAAK,gBAAgB,GAAG,SAAU,KAAK,aAAc,IAAI,EAMzD,KAAK,YAAY,GAAG,QAAS1B,GAAM,KAAK,aAAa,KAAMA,EAAI,EAAI,CAAC,EACpE,KAAK,YAAY,GAAG,SAAUA,GAAM,KAAK,aAAa,KAAMA,EAAI,EAAI,CAAC,EACrE,KAAK,YAAY,KAAKA,GAAM,KAAK,aAAa,KAAMA,EAAI,EAAI,CAAC,EAE7D,KAAK,OAAO,MAAM,IAAM,KAAK,OAAO,CAAC,EACrC,KAAK,OAAO,GAAG,QAAS,KAAK,aAAc,IAAI,EAC/C,KAAK,OAAO,GAAG,SAAU,KAAK,aAAc,IAAI,EAEhD,KAAK,GAAG,WAAY,IAAM,KAAK,iBAAmB,EAAK,EAEvD,KAAK,KAAK,WAAY,KAAK,QAAQ,EAEnC,KAAK,GAAG,mBAAoB,KAAK,MAAM,EACvC,KAAK,GAAG,uBAAwB,KAAK,MAAM,EAC3C,KAAK,GAAG,cAAe,KAAK,MAAM,EAClC,KAAK,GAAG,qBAAsB,KAAK,MAAM,EAEzC,KAAK,KAAK,0BAA2B,IAAM,CAC1C,KAAK,SACJ,kCACA,4OACA,kBACA,EACD,EACA,KAAK,OAAO,CACb,CAAC,EAED,KAAK,GAAG,2BAA4B,IAAM,CACzC,KAAK,SAAS,2BACb,oGACD,EACA,KAAK,OAAO,CACb,CAAC,CACF,CAGA,SAASkwB,EAAMhhB,EAAMzN,EAAO,kBAAmByyB,EAAe,GAAO,CACpE,KAAK,SAAS,CACb,KAAAzyB,EACA,UAAWyuB,EACX,KAAAhhB,EACA,SAAUglB,CACX,CAAC,CACF,CAGA,SAASv2B,EAAM,CAId,GAAKA,EAAK,UAEJ,IADM,KAAM,EAEhB,SAAO,KAAQ,EAAE,KAAK,IAAM,KAAK,SAASA,CAAI,CAAC,EAGjD,KAAK,OAAO,KAAKA,CAAI,EAEhB,OAAK,OAAO,OAAS,IAG1B,KAAK,aAAa,CACnB,CAGA,aAAc,CACb,MAAMw2B,EAAS,KAAK,IAAI,EAAG,KAAK,OAAO,MAAM,EAC5C/oB,EAAM,YAAY,IAAI,EAEvB,KAAK,eAAiB,GAEtB,QAAQ,EAAE,EAAG,EAAI+oB,EAAQ,IAAK,CAC7B,MAAMC,EAAQ,KAAK,OAAO,CAAC,EAC3B,GAAK,CAAEA,GAAS,CAAEA,EAAM,QACvB,SAEIA,EAAM,SACV,aAAaA,EAAM,MAAM,EACzBA,EAAM,OAAS,MAGhB,MAAMC,EAAUjpB,EAAMgpB,EAAM,QAC3BE,EAAYF,EAAM,QAAUC,EAE7BD,EAAM,UAAYE,EAClBF,EAAM,WAAa,IAAME,EAAYF,EAAM,QAEtCA,EAAM,IACVA,EAAM,GAAG,YAAY,KAAK,YAAYA,CAAK,CAAC,CAC9C,CACD,CAGA,eAAgB,CACf,MAAMD,EAAS,KAAK,IAAI,EAAG,KAAK,OAAO,MAAM,EAC5C/oB,EAAM,YAAY,IAAI,EACvB,KAAK,eAAiB,GAEtB,QAAQ,EAAE,EAAG,EAAI+oB,EAAQ,IAAK,CAC7B,MAAMC,EAAQ,KAAK,OAAO,CAAC,EAC3B,GAAK,GAAEA,GAAS,CAAEA,EAAM,SAGxB,IAAKA,EAAM,UAAY,CACtB,MAAMC,EAAUD,EAAM,QAAUA,EAAM,UACtCA,EAAM,QAAUhpB,EAAMipB,CACvB,CAEKD,EAAM,IACVA,EAAM,GAAG,YAAY,KAAK,YAAYA,CAAK,CAAC,EAC9C,CACD,CAGA,cAAe,CACd,MAAMD,EAAS,KAAK,IAAI,EAAG,KAAK,OAAO,MAAM,EAC7C,GAAK,CAAEA,EACN,OAAO,KAER,MAAMp2B,EAAM,CAAC,EACb,QAAQ,EAAE,EAAG,EAAIo2B,EAAQ,IACxBp2B,EAAI,KAAK,KAAK,YAAY,KAAK,OAAO,CAAC,CAAC,CAAC,EAG1C,OAAOA,CACR,CAGA,YAAYJ,EAAM,CACVA,EAAK,UACXA,EAAK,QAAU,IAAM,CACfA,EAAK,SACT,aAAaA,EAAK,MAAM,EACxBA,EAAK,OAAS,MAGfA,EAAK,GAAK,KAEV,MAAM0O,EAAM,KAAK,OAAO,QAAQ1O,CAAI,EAC/B0O,IAAQ,KACZ,KAAK,OAAO,OAAOA,EAAK,CAAC,EAClB,KAAK,OAAO,SAClB,KAAK,eAAiB,IAEvB,KAAK,aAAa,EAEpB,GAED,IAAIkoB,EAAe,KACnB,MAAMC,EAAK72B,EAAK,YAAW,KAAM,EAAI,KACrC,GAAKA,EAAK,UAAY,CAAE62B,EACvB,OAAO,KAER,GAAK72B,EAAK,QAAU,CACnB,MAAMyN,EAAM,YAAY,IAAI,EACrBzN,EAAK,UACXA,EAAK,QAAUyN,GAEhB,MAAMipB,EAAUjpB,EAAMzN,EAAK,QAC1B22B,EAAY32B,EAAK,QAAU02B,EAC5B,IAAII,EAEC,KAAK,eACTA,EAAa92B,EAAK,WAEPA,EAAK,SAChBA,EAAK,OAAS,WAAWA,EAAK,QAAS22B,CAAS,GAE5CG,GAAc,OAClBA,EAAa92B,EAAK,WAAa,IAAM22B,EAAY32B,EAAK,SAEvD42B,KAAgB,iBAAC,OAAI,MAAM,oEAC1B,iBAAC,OACA,MAAM,yHACN,KAAK,cACL,gBAAeE,EACf,gBAAc,IACd,gBAAc,UAEd,iBAAC,OACA,MAAO,yGACP,gBAAc,4BACd,MAAO,CACN,MAAO,GAAGA,CAAU,IACpB,qBAAsB,GAAGH,EAAY,GAAI,GAC1C,EACA,CACF,CACD,CACD,CAEA,OAAA32B,EAAK,MAAM,iBAAC,OAAI,MAAO,kDAAkD,KAAK,eAAiB,qBAAuB,EAAE,OACvH,iBAAC,OAAI,MAAM,uGACV,iBAAC,OAAI,MAAM,gCACTA,EAAK,OACL,OAAOA,EAAK,MAAS,YACpB,iBAAC,UAAO,MAAO,4BAA4BA,EAAK,IAAI,GAAI,EACxDA,EAAK,MAELA,EAAK,OAASA,EAAK,OAAO,KAAK,KAAMA,CAAI,EAAI,KAC5CA,EAAK,OAASA,EAAK,QAAS,iBAAC,OAAI,MAAM,kBACvCA,EAAK,SAAS,iBAAC,UAAO,MAAM,yCAC3BA,EAAK,WAAa,KAAK,KAAK,MAAMA,EAAK,WAAYA,EAAK,MAAOA,CAAI,EAAIA,EAAK,KAC/E,EAAa,KACXA,EAAK,QAAQ,iBAAC,QAAK,MAAO,GAAGA,EAAK,MAAQ,kBAAoB,EAAE,GAAI,MAAO,CAAC,cAAeA,EAAK,KAAK,GACpGA,EAAK,YAAW,iBAAC,QAAK,wBAAyB,CAAC,UAAQ,KAAM,EAAE,OAAOA,EAAK,UAAY,KAAK,KAAK,EAAEA,EAAK,UAAWA,EAAK,KAAMA,CAAI,EAAIA,EAAK,IAAI,CAAE,EAAG,EAAK,KAC1JA,EAAK,SAAW,KAAQA,EAAK,UAAY,KAAK,KAAK,MAAMA,EAAK,UAAWA,EAAK,KAAMA,CAAI,EAAIA,EAAK,IACpG,EAAW,IACZ,EAAU,KACR,CAAEA,EAAK,eAAe,iBAAC,UACxB,MAAM,kEACN,QAASA,EAAK,YAEd,iBAAC,QAAK,MAAM,2BACX,iBAAC,UAAO,MAAM,cAAe,EAC9B,CACD,CACD,EACC42B,CACF,CACD,EAEO52B,EAAK,EACb,CAGA,kBAAkB+D,EAAMP,EAAWuzB,EAAa,CAC/C,MAAMC,GAAYjzB,GAAQP,GAAW,cACrC,GAAKwzB,EAAW,CACfA,EAAS,UAAY,MACrB,eAAYA,EAAU,KAAK,aAAa,EAAG,GAAO,EAAI,EACtD,MACD,CAEA,KAAK,aAAajzB,EAAMP,EAAWuzB,CAAW,CAC/C,CAGA,aAAahzB,EAAMP,EAAWuzB,EAAa,CAC1C,MAAMllB,EAAO,KAAK,KAAK,aAAa9N,CAAI,EACxC,IAAIkzB,EAAW,GAEdC,EAAS,GAiCV,GA/BO1zB,IACNA,EAAYqO,GAAQA,EAAK,cAAc,gBAAgB,GAEjDrO,IACDqO,GAAQA,EAAK,UAAU,SAAS,iCAAiC,EACrErO,EAAYqO,EAEZrO,EAAYqO,GAAQA,EAAK,cAAc,kCAAkC,EAErErO,IACJyzB,EAAW,KAGR,CAAEzzB,GAAaO,EAAK,kBACxBP,EAAY,KAAK,KAAK,WAAWO,EAAMyC,GAAKA,EAAE,WAAaA,EAAE,UAAU,SAAS,+BAA+B,CAAC,EAC3GhD,IACJyzB,EAAW,KAGR,CAAEzzB,GAAaO,EAAK,kBACxBP,EAAYqO,GAAQA,EAAK,cAAc,8EAA8E,EAChHrO,IACJuzB,EAAc,KAGX,CAAEvzB,GAAaO,EAAK,eACxBP,EAAYqO,GAAQA,EAAK,cAAc,gCAAgC,EAClErO,IACJ0zB,EAAS,KAGN,CAAE1zB,EACN,OAED,GAAK,CAAEyzB,GAAY,CAAEC,GAAU,CAAEH,EAAc,CAC9C,IAAII,EAAa,KACjB,GAAI,CACHA,EAAa3zB,EAAU,cAAc,6CAA6C,CACnF,MAAa,CAA8C,CAEtD2zB,EACJ3zB,EAAY2zB,EAEZ3zB,EAAYA,EAAU,gBACxB,CAEA,IAAI+C,EAAKlE,EAAKmB,EAAU,cAAc,cAAc,EAC/CnB,GACJA,EAAG,OAAO,EAEX,MAAMi0B,EAAS,KAAK,QAAQ,QAAQ,EACnCc,EAAS,KAAK,aAAa,EAC3BC,EAAO,KAAK,WAAW,EACvBC,EAAa,KAAK,gBAAgB,EAqFnC,GAnFAj1B,KAAM,iBAAC,OACN,MAAO,eAAe60B,EAAS,4CAA8C,mFAAmFH,EAAc,uBAAyB,YAAY,EAAE,OAErN,iBAAC,OAAI,MAAM,wDACTxwB,KAAO,iBAAC,UACR,MAAO,kUAAkU,KAAK,QAAU,WAAa,EAAE,GACvW,QAASjC,GAAK,KAAK,YAAYA,EAAGiC,CAAG,EACrC,cAAejC,GAAK,KAAK,cAAcA,EAAGiC,CAAG,MAE7C,iBAAC,OAAI,MAAM,mDACV,iBAAC,QAAK,MAAM,2BACX,iBAAC,UAAO,MAAM,gBAAiB,EAChC,CACD,CACD,EACC,KAAK,cAAc,iBAAC,OAAI,MAAO,oDAAoD2wB,EAAS,gDAAkD,kDAAkD,OAChM,iBAAC,OAAI,MAAM,2FACV,iBAAC,OAAI,MAAM,oCACV,iBAAC,OAAI,MAAM,kBACR,KAAK,MAAM,KAAO,KAAK,KAAK,EAAE,KAAK,MAAM,KAAM,KAAK,MAAM,IAAI,EAAI,KAAK,MAAM,IAChF,EACC,KAAK,MAAM,UAAY,QAAQ,iBAAC,UAChC,MAAM,kEACN,QAAS,IAAM,KAAK,MAAQ,SAE5B,iBAAC,QAAK,MAAM,2BACX,iBAAC,UAAO,MAAM,cAAe,EAC9B,CACD,CACD,CACD,CACD,KACA,iBAAC,OAAI,MAAO,kBAAkBA,EAAS,gDAAkD,kDAAkD,IACzI,KAAK,KAAK,EAAE,mBAAoB,6BAA6B,EAC7D,KAAK,eAAe,iBAAC,OAAI,MAAM,aAC9B,KAAK,KAAK,EAAE,+BAAgC,yDAAyD,CACvG,EACC,KAAK,SAAS,qBAAqB,iBAAC,OAAI,MAAM,aAC7C,KAAK,KAAK,MAAM,+BAAgC,kFAAmF,CACnI,SAAO,iBAAC,QAAK,MAAM,iBAAgB,kBAAgB,CACpD,CAAC,CACF,EACC,KAAK,cAAgB,MAAM,iBAAC,OAAI,MAAM,aACrC,KAAK,KAAK,EAAE,4BAA6B,4EAA6E,CAAC,MAAO,KAAK,aAAa,CAAC,CACnJ,EACC,KAAK,gBAAgB,iBAAC,OAAI,MAAM,aAC/B,KAAK,KAAK,EAAE,2BAA4B,8IAA+I,CACvL,MAAO,KAAK,KAAK,YACjB,QAAS,KAAK,KAAK,eACpB,CAAC,CACF,EACC,YAAU,iBAAC,OAAI,MAAM,aACpB,KAAK,KAAK,EAAE,iCAAkC,oDAAoD,CACpG,EACCZ,EAAO,YAAY,iBAAC,OAAI,MAAM,aAC7B,KAAK,KAAK,EAAE,kCAAmC,8DAA8D,CAC/G,CACD,CACD,GACEvyB,GAAQP,GAAW,iBAAiB,iBAAC,OACtC,MAAO,6CAA6C0zB,EAAS,gDAAkD,kDAAkD,GACjK,aAAc,KAAK,YACnB,aAAc,KAAK,eAElBE,CACF,EACC,KAAK,eAAe,iBAAC,OAAI,MAAM,uCAC/B,iBAAC,OAAI,MAAO,WAAW,KAAK,iBAAmB,wBAA0B,EAAE,OAC1E,iBAAC,UAAO,MAAM,iBAAkB,EACjC,CACD,EACCE,MAAe,iBAAC,OAAI,MAAM,uCAC1B,iBAAC,OAAI,MAAM,WACTA,CACF,CACD,EACCD,MAAS,iBAAC,OAAI,MAAM,iCACpB,iBAAC,OAAI,MAAM,WACTA,CACF,CACD,CACD,EAEKH,EACJ1zB,EAAU,aAAanB,EAAImB,EAAU,iBAAiB,MAClD,CACJ,IAAI+zB,EAAS/zB,EAAU,iBAClB+zB,GAAUA,EAAO,UAAU,SAAS,iBAAiB,IACzDA,EAASA,EAAO,wBAEZA,EACJ/zB,EAAU,aAAanB,EAAIk1B,CAAM,EAEjC/zB,EAAU,YAAYnB,CAAE,CAC1B,CAEK,KAAK,WACT,KAAK,cAAc,KAAMkE,CAAG,CAC9B,CAEA,YAAYzG,EAAOyG,EAAK,CACvB,GAAKzG,EAAM,SACV,OAAK,SAASA,EAAM,QACZ,sBAAsB,IAAM,KAAK,KAAK,OAAO,CAAC,EAE/C,KAAK,QAAQ,WAAW,EAAE,WAAW,EAG7C,KAAK,KAAK,WAAYA,EAAOyG,CAAG,CACjC,CAEA,iBAAiB7E,EAAS,CACzB,MAAM81B,EAAO,KAAK,SAAS,aAAa,WAAW91B,CAAO,EAC1D,SAAQ,iBAAC,UAAO,MAAO,sBAAsB81B,EAAO,WAAa91B,EAAQ,QAAU,cAAgB,cAAc,GAAI,CACtH,CAEA,gBAAgBA,EAAS,CACxB,OAAOA,EAAQ,QAGV,KAAK,SAAS,aAAa,WAAWA,CAAO,EAC1C,KAAK,KAAK,EAAE,0BAA2B,qCAAqC,EAE7E,KAAK,KAAK,EAAE,kCAAmC,yDAAyD,EALvG,KAAK,KAAK,EAAE,4BAA6B,2BAA2B,CAM7E,CAEA,cAAc5B,EAAOyG,EAAK,CACzB,GAAKzG,EAAQ,CACZ,GAAKA,EAAM,UAAYA,EAAM,QAC5B,OAEDA,EAAM,eAAe,CACtB,CAEA,MAAM0D,EAAY+C,EAAI,cAAc,cACnC2wB,EAAS1zB,EAAU,UAAU,SAAS,qBAAqB,EAC5D,IAAI5D,EAAM4D,EAAU,cAAc,oBAAoB,EACtD,GAAK5D,EACJ,GAAKA,EAAI,aACRA,EAAI,aAAa,MAEjB,QAGF,MAAM63B,EAAU,MAAM,CACrB,KAAK,UAAY,GAEZ73B,EAAI,cACRA,EAAI,aAAa,QAAQ,EAE1BA,EAAI,OAAO,CACZ,EAPgB,WASV83B,EAAW,CAAC,EAElB,UAAUh2B,KAAW,KAAK,SAAS,WAAY,CAC9C,MAAMi2B,KAAU,iBAAC,UAChB,MAAM,kRACN,aAAY,KAAK,gBAAgBj2B,CAAO,EACxC,QAAS4C,GAAK,CACb5C,EAAQ,QAAU,CAAEA,EAAQ,WAE5B,eAAYi2B,EAAQ,KAAK,iBAAiBj2B,CAAO,CAAC,EAClDi2B,EAAO,QAAQ,MAAQ,KAAK,gBAAgBj2B,CAAO,EAE9Ci2B,EAAO,cAAiB,UAC5BA,EAAO,aAAgB,SAAS,EAEjC,KAAK,KAAK,kBAAkB,EAE5BrzB,EAAE,eAAe,EACjBA,EAAE,gBAAgB,CACnB,GAEE,KAAK,iBAAiB5C,CAAO,CAChC,EAEMk2B,EAAWl2B,EAAQ,eAAiBA,EAAQ,UAAY,GAAGA,EAAQ,QAAQ,eAEjFg2B,EAAS,QAAK,iBAAC,OAAI,MAAM,wDACvBC,KACD,iBAAC,cACA,iBAAC,UAAKj2B,EAAQ,SAAW,KAAK,KAAK,EAAEA,EAAQ,SAAUA,EAAQ,KAAMA,CAAO,EAAIA,EAAQ,KAAOA,EAAQ,cAAc,iBAAC,OACrH,MAAM,0GAEN,iBAAC,OAAI,MAAM,oEACR,KAAK,KAAK,EAAE,6BAA8B,4BAA4B,CACzE,CACD,CAAQ,EACPA,EAAQ,gBAAgB,iBAAC,OAAI,MAAM,eACjCk2B,EAAW,KAAK,KAAK,EAAEA,EAAUl2B,EAAQ,YAAaA,CAAO,EAAIA,EAAQ,WAC5E,CACD,CACD,CAAM,CACP,CAGA9B,KAAO,iBAAC,OAAI,MAAO,4BAA4Bs3B,EAAS,sCAAwC,wCAAwC,OACvI,iBAAC,OAAI,MAAO,6DACX,iBAAC,OAAI,MAAM,mFACV,iBAAC,OAAI,MAAM,oGACV,iBAAC,OAAI,MAAM,qGACV,iBAAC,OAAI,MAAM,2DACV,iBAAC,UACA,MAAM,4NACN,WAAY,IAAM,CAAC,KAAK,KAAK,mBAAmB,EAAGO,EAAQ,CAAC,MAE5D,iBAAC,QAAK,MAAM,2BACX,iBAAC,UAAO,MAAM,eAAgB,EAC/B,CACD,KACA,iBAAC,OAAI,MAAM,kEACR,KAAK,KAAK,EAAE,0BAA2B,kCAAkC,CAC5E,CACD,CACD,KACA,iBAAC,OAAI,MAAM,4FACV,iBAAC,MAAG,MAAM,6CACP,KAAK,KAAK,EAAE,4BAA6B,UAAU,CACtD,CACD,KACA,iBAAC,OAAI,MAAM,sGACV,iBAAC,OAAI,MAAM,2DACV,iBAAC,UACA,MAAM,4NACN,QAASnzB,GAAK,CAAC,KAAK,aAAaA,EAAGiC,CAAG,EAAGkxB,EAAQ,CAAC,MAEnD,iBAAC,QAAK,MAAM,2BACX,iBAAC,UAAO,MAAM,WAAY,EAC3B,CACD,KACA,iBAAC,OAAI,MAAM,oEACR,KAAK,KAAK,EAAE,6BAA8B,WAAW,CACxD,CACD,CACD,KACA,iBAAC,OAAI,MAAM,sGACV,iBAAC,UACA,MAAM,wOACN,QAASA,CAAA,KAET,iBAAC,QAAK,MAAM,2BACX,iBAAC,UAAO,MAAM,cAAe,EAC9B,CACD,CACD,CACD,KACA,iBAAC,OAAI,MAAM,yFAAyF,iBAAc,IAChHC,CACF,CACD,CACD,CACD,EAEA93B,EAAI,aAAe63B,EACnB73B,EAAI,aAAe,IAAI,eAAaA,EAAK63B,CAAO,EAChDj0B,EAAU,YAAY5D,CAAG,EAEzB,KAAK,UAAY,EAClB,CAGA,aAAaE,EAAOyG,EAAK,CACxB,MAAMsxB,EAAO,KAAK,QAAQ,WAAW,EAC9BA,IAGPA,EAAK,YAAY,0BAA0B,EACtC,CAAAA,EAAK,SAGV,KAAK,KAAK,WAAY/3B,EAAOyG,CAAG,EACjC,CAGA,SAASzG,EAAOyG,EAAK4U,EAAM,CAC1B,MAAM0c,EAAO,KAAK,QAAQ,WAAW,EAC9BA,IAGF1c,GACJ0c,EAAK,YAAY1c,CAAI,EACjB,CAAA0c,EAAK,UAGV,KAAK,QAAU,GAEfA,EAAK,OAAO/3B,CAAK,EAAE,KAAK,IAAM,CAC7B,KAAK,QAAU,EAEhB,CAAC,EAAE,MAAMI,GAAO,CACf,KAAK,IAAI,QAAQA,CAAG,EACpB,KAAK,IAAI,MAAM,4BAA6BA,CAAG,EAE/C,KAAK,SACJ,yBACA,kFACD,EAEA,KAAK,QAAU,GACf,KAAK,KAAK,WAAY,KAAK,QAAQ,CACpC,CAAC,GACF,CAEA,WAAY,CACX,KAAK,IAAI,cAAe,KAAK,MAAM,EACnC,KAAK,IAAI,WAAY,KAAK,QAAQ,CACnC,CACD,EAt0B+C,kBAAhC,IAAM43B,EAAN,C,uFCJA,MAAM,EAAN,MAAM,UAAgB,mCAAM,KAAC,CAC3C,eAAen4B,EAAM,CACpB,MAAM,GAAGA,CAAI,EAEb,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,UAAU,EACtB,KAAK,OAAO,cAAc,EAC1B,KAAK,OAAO,iBAAiB,EAC7B,KAAK,OAAO,WAAW,EACvB,KAAK,OAAO,gBAAgB,EAC5B,KAAK,OAAO,aAAa,EACzB,KAAK,OAAO,kBAAkB,EAC9B,KAAK,OAAO,UAAU,EACtB,KAAK,OAAO,QAAQ,EACpB,KAAK,OAAO,QAAQ,EAEpB,KAAK,cAAgB,GAErB,KAAK,cAAgB,KACrB,KAAK,gBAAkB,KACvB,KAAK,WAAa,KAElB,KAAK,KAAO,KAAK,UAAU,OAC1B,gBAAiB,wBACjB,CAAC,UAAU,EACX,CAAC,WAAY,EAAI,EAAG,CACrB,EAEA,KAAK,WAAa,KAAK,UAAU,OAChC,eAAgB,yDAChB,CAAC,UAAU,EACX,CAAC,WAAY,GAAM,QAAS,EAAI,EAAG,EAAG,IAAO,EAC9C,EAEA,KAAK,aAAY,YAAS,KAAK,UAAW,GAAG,EAC7C,KAAK,YAAW,YAAS,KAAK,SAAU,GAAG,CAC5C,CAEA,UAAW,CACV,KAAK,KAAK,GAAG,QAAS,KAAK,WAAY,IAAI,EAC3C,KAAK,KAAK,GAAG,SAAU,KAAK,WAAY,IAAI,EAC5C,KAAK,KAAK,GAAG,UAAW,KAAK,WAAY,IAAI,EAC7C,KAAK,KAAK,KAAK0C,GAAM,KAAK,WAAWA,CAAE,CAAC,EAExC,KAAK,WAAW,GAAG,QAAS,KAAK,UAAW,IAAI,EAChD,KAAK,WAAW,GAAG,SAAU,KAAK,UAAW,IAAI,EACjD,KAAK,WAAW,GAAG,UAAW,KAAK,UAAW,IAAI,EAClD,KAAK,WAAW,KAAKA,GAAM,KAAK,UAAUA,CAAE,CAAC,EAE7C,KAAK,OAAO,GAAG,SAAU,KAAK,gBAAiB,IAAI,EACnD,KAAK,gBAAgB,CACtB,CAEA,mBAAmBsH,EAAIkH,EAAO,CACxB,KAAK,gBAAkBA,GAAS,KAAK,aAAelH,IAGpD,KAAK,aACT,KAAK,OAAO,YAAY,KAAM,UAAU,KAAK,UAAU,EAAE,EACzD,KAAK,WAAa,MAGd,KAAK,gBACT,KAAK,OAAO,YAAY,KAAM,WAAW,KAAK,aAAa,EAAE,EAC7D,KAAK,cAAgB,MAGjBA,IACJ,KAAK,OAAO,UAAU,KAAM,UAAUA,CAAE,EAAE,EAC1C,KAAK,WAAaA,GAGdkH,IACJ,KAAK,OAAO,UAAU,KAAM,WAAWA,CAAK,EAAE,EAC9C,KAAK,cAAgBA,GAEvB,CAEA,iBAAkB,CACZ,KAAK,OAAO,eAAiB,aACjC,KAAK,QAAQ,mBAAmB,KAAK,aAAa,EAClD,KAAK,UAAU,EAEjB,CAEA,UAAW,CACV,KAAK,WAAW,MAAM,CACvB,CAEA,WAAY,CACX,KAAK,KAAK,KAAKxO,GAAM,KAAK,WAAWA,CAAE,CAAC,CACzC,CAEA,WAAWA,EAAI,CACd,MAAMwP,EAAO,KAAK,KAAK,iBAAiBxP,CAAE,EAE1C,IAAIoP,EAAU,KAAMjC,EAAOqC,EAAMC,EAAI,EAAG,EACxC,KAAMtC,GAAQ,MAAQiC,GAAW,MAAQK,EAAI,IAAI,CAChD,IAAI/M,EAAQyK,EAAK,cAEjB,IADA,EAAI,EACEzK,GAAS,MAAQ0M,GAAW,MAAQ,EAAI,IAC7CA,EAAU1M,GAAO,eAAe,SAAS,QAAQ,MAAM,MACtDA,GAAO,eAAe,SAAS,cAAc,KAE9CA,EAAQA,GAAO,KACf,IAEDyK,EAAOA,GAAM,MACbsC,GACD,CAEKL,GAAS,GACR,KAAK,YAAcA,EAAQ,KAC/B,KAAK,WAAaA,EAAQ,GAC1B,KAAK,gBAAkBA,EACvB,KAAK,cAAgB,KACrB,KAAK,mBAAmBA,EAAQ,GAAIA,EAAQ,KAAK,EAEjD,KAAK,gBAAgBpP,EAAIoP,EAAQ,EAAE,EAAE,KAAKM,GAAS,CAC7C,KAAK,YAAcN,EAAQ,KAGhC,KAAK,cAAgBM,EACrB,KAAK,QAAQ,mBAAmBA,CAAK,EACrC,KAAK,SAAS,cAAc,CAC3B,aAAcA,CACf,CAAC,EAEF,CAAC,EAAE,MAAM,IAAM,CACT,KAAK,YAAcN,EAAQ,KAGhC,KAAK,cAAgB,KACrB,KAAK,QAAQ,mBAAmB,EAChC,KAAK,SAAS,cAAc,CAC3B,aAAc,IACf,CAAC,EACF,CAAC,EAED,KAAK,SAAS,cAAc,CAC3B,QAASA,EAAQ,MACjB,UAAWA,EAAQ,EACpB,CAAC,GAGF,KAAK,WAAW,CAElB,CAEA,gBAAgBpP,EAAIkH,EAAY0I,EAAY,CAC3C,MAAMzI,EAAQnH,EAAG,iBAAmBA,EAAG,kBAAoB,CAAC,EAC5D,OAAKkH,IAAeC,EAAM,YACpB,KAAK,IAAI,EAAIA,EAAM,MAAQ,IAC1ByI,EACGzI,EAAM,KACP,QAAQ,QAAQA,EAAM,IAAI,EAI5B,IAAI,QAAQ,MAAO,EAAGE,IAAM,CAClC,GAAKF,EAAM,SAAW,CACrBA,EAAM,SAAS,KAAK,CAAC,EAAGE,CAAC,CAAC,EAC1B,MACD,CAEAF,EAAM,WAAaD,EACnBC,EAAM,SAAW,CAAC,CAAC,EAAEE,CAAC,CAAC,EACvB,IAAI1J,EAAME,EAEV,GAAI,CACHF,EAAO,MAAM,KAAK,YAAY,gBAAgBuJ,CAAU,CACzD,OAAQK,EAAO,CACd5J,EAAO,KACPE,EAAM0J,CACP,CAEA,MAAMC,EAAUL,EAAM,SAGtB,GAFAA,EAAM,SAAW,KAEZA,EAAM,aAAeD,EAAa,CACtCrJ,EAAM,IAAI,MAAM,UAAU,EAC1BsJ,EAAM,WAAa,KACnBA,EAAM,KAAO,KACbA,EAAM,MAAQ,EACd,UAAUM,KAAQD,EACjBC,EAAK,CAAC,EAAE5J,CAAG,EAEZ,MACD,CAEAsJ,EAAM,KAAOxJ,EACbwJ,EAAM,MAAQ,KAAK,IAAI,EAEvB,UAAUM,KAAQD,EACjB3J,EAAM4J,EAAK,CAAC,EAAE5J,CAAG,EAAI4J,EAAK,CAAC,EAAE9J,CAAI,CACnC,CAAC,CACF,CAEA,YAAa,CACZ,KAAK,WAAa,KAClB,KAAK,gBAAkB,KACvB,KAAK,cAAgB,KACrB,KAAK,mBAAmB,EACxB,KAAK,QAAQ,mBAAmB,EAChC,KAAK,SAAS,cAAc,CAC3B,QAAS,KACT,UAAW,KACX,aAAc,IACf,CAAC,CACF,CAEA,UAAUqC,EAAI,CACb,MAAMmB,EAAYnB,EAAG,QAAQ,qCAAqC,EACjEwP,EAAOrO,GAAa,KAAK,KAAK,iBAAiBA,CAAS,EAEzD,IAAIiO,EAAU,KAAM1M,EAAQ8M,GAAM,QAAQ,cAAe,EAAI,EAC7D,KAAM9M,GAAS,MAAQ0M,GAAW,MAAQ,EAAI,IAC7CA,EAAU1M,GAAO,eAAe,SAAS,QAAQ,MAAM,SACtDA,GAAO,eAAe,SAAS,cAAc,QAC9CA,EAAQA,GAAO,KACf,IAGD,MAAMgzB,EAAQtmB,GAAS,cACtBE,EAAQomB,GAAO,MACfrmB,EAAOqmB,GAAO,KAsBf,GAhBK,KAAK,gBAAkBtmB,GAAS,KACpC,KAAK,eAAiBA,GAAS,GAC/B,KAAK,oBAAsBA,IAGvBE,GAAStP,EAAG,eAAiBqP,GAAM,IAAMrP,EAAG,gBAChDA,EAAG,cAAgBsP,EACnBtP,EAAG,aAAeqP,GAAM,GAExB,KAAK,SAAS,cAAc,CAC3B,SAAUA,GAAM,KAChB,WAAYA,GAAM,GAClB,MAAAC,CACD,CAAC,GAGGnO,EAAY,CAChB,GAAK,CAAEA,EAAU,UAAY,CAC5B,MAAMc,EAAId,EAAU,UAAYA,EAAU,cAAc,mCAAmC,EACtFc,GACJA,EAAE,UAAU,IAAI,eAAe,CACjC,CAEA,KAAK,eAAed,CAAS,CAC9B,CACD,CAEA,UAAUnB,EAAI,CACb,KAAK,SAAS,cAAc,CAC3B,SAAU,KACV,WAAY,KACZ,MAAO,IACR,CAAC,EAED,MAAMmB,EAAYnB,EAAG,QAAQ,qCAAqC,EAClE,GAAOmB,EAOP,IAJKA,EAAU,WACdA,EAAU,UAAU,UAAU,OAAO,eAAe,EAErDA,EAAU,UAAY,KACjBA,EAAU,iBAAmB,CACjC,UAAU3D,KAAO,OAAO,OAAO2D,EAAU,gBAAgB,EACxD,aAAa3D,CAAG,EAEjB2D,EAAU,iBAAmB,IAC9B,CAEAA,EAAU,YAAc,KACzB,CAEA,eAAenB,EAAI6G,EAAM,CACxB,MAAMvE,EAAOtC,EAAG,UACfoP,EAAU,KAAK,oBAUhB,GAAK,CAAE9M,GAAQ,CAAE,SAAS,SAASA,CAAI,EAAI,CAC1C,KAAK,SAAS,EACd,MACD,CAEA,GAAK,CAAE8M,GAAS,GACf,OAEMvI,EAEK,MAAM,QAAQA,CAAI,IAC7BA,EAAO,CAACA,CAAI,GAFZA,EAAO,KAAK,SAAS,KAItB,MAAME,EAAS/G,EAAG,iBAAmBA,EAAG,kBAAoB,CAAC,EAC5DgH,EAAa,EAAAjI,GAAO,KAAK,eAAeiB,EAAIjB,CAAG,EAAlC,cACbpB,EAAO,CACN,QAAS,CACR,GAAIyR,EAAQ,GACZ,MAAOA,EAAQ,MACf,aAAcA,EAAQ,WACvB,EACA,GAAApP,EACA,eAAgB,IAAM,EACtB,qBAAsB,IAAM,KAC5B,YAAa,IAAM,KACnB,eAAgB,IAAM,IACvB,EAED,UAAUjB,KAAO8H,EACX,KAAK,SAAS,YAAY9H,CAAG,EAAE,SACnC,KAAK,SAAS,aAAaA,EAAKpB,EAAM2E,EAAMyE,EAAQC,CAAU,CAEjE,CAED,EAzU4C,eAA7B,IAAM2uB,EAAN,C,gGCFR,MAAMC,EAAgB,0BAC5B,aAAc,OAAQ,QAAS,aAAc,YAAa,cAC1D,aAAc,mBAAoB,cAAe,iBACjD,iBAAkB,OAAQ,QAAS,iBAAkB,sBACrD,WAAY,WACb,EAAC,KAOoB,EAAN,MAAM,UAAe,6BAAU,KAAC,CAC9C,eAAet4B,EAAM,CACpB,MAAM,GAAGA,CAAI,EAEb,KAAK,cAAgB,GAGrB,KAAK,OAAO,aAAa,EACzB,KAAK,OAAO,UAAU,EAetB,KAAK,WAAa,KAAK,KAAK,OAC3B,cACA6G,GAAKA,EAAE,iBAAmBA,EAAE,WAAaA,EAAE,OAASA,EAAE,MAAM,KAC5DyxB,CACD,EAEA,KAAK,OAAS,KAAK,KAAK,OACvB,kBACAzxB,GAAKA,EAAE,iBAAmBA,EAAE,OAAO,cAAgBA,EAAE,OAAO,oBAC5DyxB,CACD,EAEA,KAAK,YAAc,KAAK,KAAK,OAC5B,eACAzxB,GAAKA,EAAE,mBAAqBA,EAAE,OAASA,EAAE,MAAM,qBAC/C,CAAC,OAAQ,YAAa,QAAS,aAAc,WAAW,CACzD,EAEA,KAAK,aAAe,KAAK,KAAK,OAC7B,gBACAA,GAAKA,EAAE,QAAUA,EAAE,2BACnByxB,CACD,CACD,CAGA,kBAAmB,CAClB,GAAK,CAAE,KAAK,OAAS,CACpB,MAAM51B,EAAK,SAAS,cAAc,uBAAuB,EACzD,KAAK,OAAS,KAAK,KAAK,WACvBA,EACAmE,GAAKA,EAAE,eAAe,wBACtB,EACD,CACD,CAEK,KAAK,QACT,KAAK,OAAO,cAAc,wBAAwB,CACpD,CAGA,kBAAmB,CAClB,MAAM,iBAAiB,EAEvB,KAAK,SAAS,IAAI,uBAAwB,CACzC,QAAS,GACT,GAAI,CACH,KAAM,+BACN,MAAO,qDACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,6BAA8B,CAC/C,QAAS,GACT,SAAU,CAAC,eAAe,EAC1B,QAAQ5G,EAAKC,EAAK,CACjB,OAAOD,EAAI,IAAI,eAAe,EAGvBC,EAFC,EAGT,EAEA,GAAI,CACH,KAAM,mCACN,MAAO,8CACP,UAAW,mBACZ,EACA,QAASA,GAAO,KAAK,WAAW,OAAO,sBAAuBA,CAAG,CAClE,CAAC,EAED,KAAK,SAAS,IAAI,0BAA2B,CAC5C,QAAS,GACT,SAAU,CAAC,qBAAsB,wBAAwB,EACzD,QAAQD,EAAKC,EAAK,CACjB,MAAK,CAAED,EAAI,IAAI,wBAAwB,GAAKA,EAAI,IAAI,oBAAoB,IAAM,QACtE,GACDC,CACR,EACA,GAAI,CACH,KAAM,mCACN,MAAO,8CACP,UAAW,mBACZ,EAEA,QAASA,GAAO,KAAK,WAAW,OAAO,mBAAoBA,CAAG,CAC/D,CAAC,EAED,KAAK,SAAS,IAAI,4BAA6B,CAC9C,QAAS,GACT,GAAI,CACH,KAAM,mCACN,MAAO,2DACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,8BAA+B,CAChD,QAAS,GACT,GAAI,CACH,KAAM,iCACN,MAAO,2DACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,wBAAyB,CAC1C,QAAS,GACT,GAAI,CACH,KAAM,kCACN,MAAO,qBACP,YAAa,4GACb,UAAW,mBACZ,EACA,QAASA,GAAO,CACf,KAAK,WAAW,WAAW,mBAAoBA,CAAG,EAClD,KAAK,iBAAiB,CACvB,CACD,CAAC,CAeF,CAGA,MAAM,UAAW,CAChB,MAAM,MAAM,SAAS,EAErB,KAAK,WAAW,OAAO,sBAAuB,KAAK,SAAS,IAAI,4BAA4B,CAAC,EAC7F,KAAK,WAAW,OAAO,mBAAoB,KAAK,SAAS,IAAI,yBAAyB,CAAC,EACvF,KAAK,WAAW,WAAW,mBAAoB,KAAK,SAAS,IAAI,uBAAuB,CAAC,EAGzF,KAAK,GAAG,cAAe,KAAK,iBAAkB,IAAI,EAElD,KAAK,GAAG,kBAAmB,KAAK,cAAe,IAAI,EAEnD,KAAK,YAAY,GAAG,QAASkE,GAAQ,CACpCA,EAAK,mBAAqB,KAAK,IAAI,EACnC,KAAK,eAAeA,CAAI,CACzB,CAAC,EACD,KAAK,YAAY,GAAG,SAAU,KAAK,eAAgB,IAAI,EACvD,KAAK,YAAY,MAAM,CAACG,EAAKC,IAAc,CAC1C,MAAMsJ,EAAM,KAAK,IAAI,EACrB,UAAU1J,KAAQI,EACjBJ,EAAK,mBAAqB0J,EAC1B,KAAK,eAAe1J,CAAI,CAE1B,CAAC,EAED,KAAK,aAAa,GAAG,QAAS,KAAK,cAAe,IAAI,EACtD,KAAK,aAAa,GAAG,SAAU,KAAK,cAAe,IAAI,CACxD,CAEA,eAAgB,CACR,KAAK,SAAS,IAAI,6BAA6B,GAGtD,KAAK,OAAO,aAAa,mEAAoE,SAAS,kBAAmB,GAAI,EAC3H,KAAK1B,GAAMA,EAAG,MAAM,CAAC,CACxB,CAEA,oBAAqB,CACpB,OAAO,KAAK,SAAS,IAAI,oBAAoB,GAC3C,CAAE,KAAK,SAAS,IAAI,sBAAsB,GAAK,KAAK,OAAO,SAAS,OAAS,YAChF,CAGA,cAAc0B,EAAM,CAiBpB,CAGA,SAAU,CACT,OAAO,KAAK,WAAW,KACxB,CAGA,eAAeA,EAAM,CACbA,EAAK,qBACXA,EAAK,mBAAqB,WAAW,IAAM,CAC1CA,EAAK,mBAAqB,KAErB,GAAE,KAAK,SAAS,IAAI,2BAA2B,GAAK,CAAEA,EAAK,eAG3D,KAAK,OAAO,eAAiB,SAG7BA,EAAK,MAAM,iBAAmBA,EAAK,MAAM,qBAAuBA,EAAK,MAAM,oBAG3E,KAAK,IAAI,GAAKA,EAAK,oBAAqB,GAAK,KAG7CA,EAAK,MAAM,sBACfA,EAAK,MAAM,qBAAqB,EAClC,EAAG,GAAG,EACR,CAUA,kBAAmB,CAEnB,CAEA,oBAAqB,CACpB,KAAK,SAAS,cAAc,CAC3B,UAAW,KAAK,WACjB,CAAC,CACF,CAEA,IAAI,aAAc,CAEjB,MAAO,EACR,CACD,EA/Q+C,cAAhC,IAAMm0B,EAAN,C,kGCpBf,QAAe,IAA0B,uBCanCC,EAAa,CAAC,UAAW,QAAS,OAAO,EAEzCC,EAAS,CACd,KAAO,MAAQ,MAAQ,MAAQ,IAAM,KAAO,KAAO,MACnD,EACA,IAAM,KAAO,KAAO,KAAO,IAAM,IAClC,EAEMC,EAAe,kCACpBC,EAAkB,mCAGbC,EAAgB,CAKrB,KAAM,CAAC,EAAI,CAAC,mBAAmB,GAAG,oBAAoB,EAAE,wBAAwB,EAAE,0BAA0B,EAAE,oBAAoB,EAAE,2BAA2B,EAAE,0BAA0B,EAAE,0BAA0B,EAAE,mCAAmC,EAAE,oCAAoC,EAAE,kCAAkC,EAAE,kBAAkB,EAAE,sBAAsB,EAAE,yBAAyB,EAAE,mBAAmB,EAAE,wBAAwB,EAAE,oCAAoC,GAAG,2BAA2B,EAAE,mCAAmC,EAAE,mBAAmB,EAAE,uCAAuC,EAAE,6BAA6B,EAAE,wBAAwB,GAAG,0CAA0C,EAAE,2CAA2C,EAAE,yCAAyC,EAAE,4BAA4B,EAAE,mCAAmC,GAAG,qBAAqB,EAAE,eAAe,EAAE,gBAAgB,EAAE,uBAAuB,EAAE,sBAAsB,EAAE,sBAAsB,EAAE,gCAAgC,GAAG,8BAA8B,GAAG,qBAAqB,GAAG,+BAA+B,GAAG,sBAAsB,GAAG,+BAA+B,EAAE,oBAAoB,GAAG,mBAAmB,GAAG,mBAAmB,GAAG,wBAAwB,GAAG,sBAAsB,GAAG,0BAA0B,GAAG,aAAa,EAAE,0BAA0B,KAAK,YAAY,GAAG,mBAAmB,GAAG,kBAAkB,GAAG,kBAAkB,GAAG,oBAAoB,GAAG,2BAA2B,GAAG,0BAA0B,GAAG,0BAA0B,GAAG,kBAAkB,GAAG,2BAA2B,GAAG,eAAe,EAAE,mBAAmB,EAAE,EAAE,EAAI,CAAC,gBAAgB,CAAC,EAAE,aAAa,EAAE,EAAE,eAAe,CAAC,EAAE,aAAa,EAAE,EAAE,MAAQ,CAAC,EAAE,mBAAmB,EAAE,EAAE,cAAc,CAAC,EAAE,iBAAiB,EAAE,EAAE,qBAAqB,CAAC,EAAE,aAAa,EAAE,EAAE,YAAY,CAAC,GAAG,kBAAkB,EAAE,CAAC,CAAC,EACh2D,MAAO,CAAC,EAAI,CAAC,oBAAoB,EAAE,wBAAwB,EAAE,0BAA0B,EAAE,oBAAoB,EAAE,2BAA2B,EAAE,0BAA0B,EAAE,0BAA0B,EAAE,mCAAmC,EAAE,oCAAoC,EAAE,kCAAkC,EAAE,kBAAkB,EAAE,sBAAsB,EAAE,yBAAyB,EAAE,mBAAmB,GAAG,wBAAwB,EAAE,oCAAoC,EAAE,2BAA2B,EAAE,mCAAmC,EAAE,mBAAmB,EAAE,uCAAuC,EAAE,6BAA6B,EAAE,wBAAwB,EAAE,0CAA0C,GAAG,2CAA2C,GAAG,yCAAyC,GAAG,4BAA4B,GAAG,qBAAqB,EAAE,mCAAmC,GAAG,eAAe,EAAE,gBAAgB,EAAE,uBAAuB,EAAE,sBAAsB,EAAE,sBAAsB,EAAE,gCAAgC,EAAE,8BAA8B,EAAE,qBAAqB,EAAE,+BAA+B,EAAE,sBAAsB,EAAE,+BAA+B,GAAG,oBAAoB,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,wBAAwB,EAAE,sBAAsB,EAAE,0BAA0B,GAAG,aAAa,EAAE,0BAA0B,KAAK,YAAY,EAAE,mBAAmB,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,oBAAoB,EAAE,2BAA2B,GAAG,0BAA0B,GAAG,0BAA0B,GAAG,kBAAkB,EAAE,2BAA2B,EAAE,eAAe,EAAE,mBAAmB,EAAE,qBAAqB,EAAE,yBAAyB,KAAK,yBAAyB,IAAI,EAAE,EAAI,CAAC,gBAAgB,CAAC,EAAE,aAAa,EAAE,EAAE,eAAe,CAAC,EAAE,aAAa,EAAE,EAAE,MAAQ,CAAC,EAAE,mBAAmB,EAAE,EAAE,cAAc,CAAC,GAAG,iBAAiB,EAAE,EAAE,qBAAqB,CAAC,EAAE,eAAe,EAAE,EAAE,YAAY,CAAC,EAAE,kBAAkB,EAAE,CAAC,CAAC,EACl5D,YAAa,CAAC,EAAI,CAAC,eAAe,GAAG,OAAS,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,mBAAmB,CAAC,EAAE,EAAI,CAAC,CAAC,EAChK,aAAc,CAAC,EAAI,CAAC,eAAe,GAAG,OAAS,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,mBAAmB,CAAC,EAAE,EAAI,CAAC,CAAC,CAClK,EAGqB,EAAN,MAAM,UAAoB,SAAO,CAC/C,eAAe54B,EAAM,CACpB,MAAM,GAAGA,CAAI,EACb,KAAK,OAAO,UAAU,EAEtB,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,WAAW,EACvB,KAAK,OAAO,iBAAiB,EAC7B,KAAK,OAAO,aAAa,EAEzB,KAAK,cAAgB,GAKrB,KAAK,SAAS,IAAI,6BAA8B,CAC/C,QAAS,KACT,SAAU,CAAC,2BAA4B,6BAA6B,EACpE,QAAQC,EAAKC,EAAK,CACjB,OAAKA,IAAQ,KACPD,EAAI,IAAI,6BAA6B,EAClC,GACDA,EAAI,IAAI,0BAA0B,GAAK,GAExCC,CACR,EACA,GAAI,CACH,KAAM,+BACN,MAAO,0CACP,YAAa,wJACb,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,8BAA+B,CAChD,QAAS,GACT,GAAI,CACH,KAAM,+BACN,MAAO,0CACP,UAAW,oBACX,YAAa,sLACd,EACA,QAAS,IAAM,KAAK,UAAU,CAC/B,CAAC,EAED,KAAK,SAAS,IAAI,0BAA2B,CAC5C,QAAS,GACT,GAAI,CACH,KAAM,6CACN,MAAO,0BACP,UAAW,oBACX,YAAa,sOACd,EACA,QAAS,IAAM,KAAK,UAAU,CAC/B,CAAC,EAED,KAAK,SAAS,IAAI,0BAA2B,CAC5C,QAAS,GACT,GAAI,CACH,KAAM,+BACN,MAAO,gDACP,UAAW,mBACZ,EACA,QAAS,IAAM,KAAK,UAAU,CAC/B,CAAC,EAID,KAAK,SAAS,IAAI,kBAAmB,CACpC,QAAS,GACT,QAAQD,EAAKC,EAAK,CACjB,GAAK,OAAOA,GAAQ,SACnB,GAAI,CACHA,EAAM,WAAWA,CAAG,CACrB,MAAa,CAAEA,EAAM,IAAM,CAE5B,OAAK,CAAEA,GAAOA,EAAM,GAAK,MAAMA,CAAG,GAAK,CAAE,SAASA,CAAG,GAAKA,EAAM,MAC/DA,EAAM,IAEAA,CACR,EACA,GAAI,CACH,KAAM,2CACN,MAAO,YACP,YAAa,yKACb,UAAW,mBACX,KAAM,QACP,EACA,QAAS,IAAM,KAAK,WAAW,CAChC,CAAC,EAKD,KAAK,SAAS,IAAI,yBAA0B,CAC3C,QAAS,GACT,GAAI,CACH,KAAM,uOACN,MAAO,aACP,YAAa,8HACb,UAAW,oBACX,KAAM,EACN,MAAO,EACR,EACA,QAAS,IAAM,KAAK,UAAU,CAC/B,CAAC,EAED,KAAK,SAAS,IAAI,mBAAoB,CACrC,QAAS,GACT,GAAI,CACH,KAAM,+BACN,MAAO,OACP,YAAa,0GACb,UAAW,oBACX,KAAM,CACP,EACA,QAAS,IAAM,KAAK,UAAU,CAC/B,CAAC,EAED,KAAK,SAAS,IAAI,qBAAsB,CACvC,QAAS,GACT,GAAI,CACH,KAAM,+BACN,MAAO,SACP,YAAa,oDACb,UAAW,oBACX,MAAO,GACP,KAAM,CACP,EACA,QAAS,IAAM,KAAK,UAAU,CAC/B,CAAC,EAED,KAAK,SAAS,IAAI,iCAAkC,CACnD,QAAS,GACT,GAAI,CACH,KAAM,+BACN,MAAO,qBACP,YAAa,6GACb,UAAW,oBACX,MAAO,GACP,KAAM,EACP,EACA,QAAS,IAAM,KAAK,UAAU,CAC/B,CAAC,EAED,KAAK,SAAS,IAAI,2BAA4B,CAC7C,QAAS,GACT,GAAI,CACH,KAAM,+BACN,MAAO,eACP,UAAW,oBACX,KAAM,EACP,EACA,QAAS,IAAM,KAAK,UAAU,CAC/B,CAAC,EAGD,KAAK,SAAS,IAAI,8BAA+B,CAChD,QAAS,GACT,GAAI,CACH,KAAM,gDACN,MAAO,aACP,UAAW,oBACX,KAAM,EACN,MAAO,EACR,EACA,QAAS,IAAM,KAAK,UAAU,CAC/B,CAAC,EAED,KAAK,SAAS,IAAI,wBAAyB,CAC1C,QAAS,GACT,GAAI,CACH,KAAM,oCACN,MAAO,OACP,YAAa,0GACb,UAAW,oBACX,KAAM,CACP,EACA,QAAS,IAAM,KAAK,UAAU,CAC/B,CAAC,EAED,KAAK,SAAS,IAAI,0BAA2B,CAC5C,QAAS,GACT,GAAI,CACH,KAAM,oCACN,MAAO,SACP,YAAa,oDACb,UAAW,oBACX,MAAO,GACP,KAAM,CACP,EACA,QAAS,IAAM,KAAK,UAAU,CAC/B,CAAC,EAED,KAAK,SAAS,IAAI,iBAAkB,CACnC,SAAU,CAAC,oBAAoB,EAC/B,QAAQD,EAAK,CACZ,MAAO,CAAEu4B,EAAW,SAASv4B,EAAI,IAAI,oBAAoB,CAAC,CAC3D,CACD,CAAC,EAED,KAAK,SAAS,IAAI,gBAAiB,CAClC,SAAU,CAAC,qBAAsB,iBAAkB,mBAAoB,gCAAiC,qBAAsB,yBAAyB,EACvJ,QAAQA,EAAK,CACZ,MAAM2f,EAAQ3f,EAAI,IAAI,qBAAqB,EAC3C,OAAK2f,IAGA3f,EAAI,IAAI,oBAAoB,IAAM,cAC9BA,EAAI,IAAI,yBAAyB,GAAG,IAAI,SAAS,MAAM,EAEzDA,EAAI,IAAI,+BAA+B,GAAMA,EAAI,IAAI,gBAAgB,GAAKA,EAAI,IAAI,kBAAkB,IAAM,EAClH,EACA,QAAS,IAAM,KAAK,UAAU,CAC/B,CAAC,EAED,KAAK,SAAS,IAAI,sBAAuB,CACxC,SAAU,CAAC,eAAe,EAC1B,QAAQA,EAAK,CACZ,MAAO,CAAEA,EAAI,IAAI,eAAe,CACjC,CACD,CAAC,EAED,KAAK,OAAS,KACd,KAAK,YAAc,IACpB,CAGA,YAAa,CACZ,IAAIqsB,EAAO,KAAK,SAAS,IAAI,iBAAiB,EAM9C,GALK,OAAOA,GAAS,UAAY,YAAY,KAAKA,CAAI,EACrDA,EAAO,WAAWA,CAAI,EACb,OAAOA,GAAS,WACzBA,EAAO,MAEH,CAAEA,GAAQ,MAAMA,CAAI,GAAK,CAAE,SAASA,CAAI,GAAKA,EAAO,GAAKA,IAAS,GAAK,CAC3E,KAAK,WAAW,OAAO,WAAW,EAClC,MACD,CAEAA,EAAOA,EAAO,GAEd,KAAK,WAAW,IAAI,YAAa;AAAA,kBAChB,GAAG,GAAMA,CAAI;AAAA,kBACb,GAAG,GAAMA,CAAI;AAAA,kBACb,GAAG,GAAMA,CAAI;AAAA,kBACb,GAAG,GAAMA,CAAI;AAAA,kBACb,GAAG,GAAMA,CAAI;AAAA,kBACdA,CAAI;AAAA,kBACH,GAAG,GAAMA,CAAI;AAAA,kBACb,GAAG,GAAMA,CAAI;AAAA,qBACXA,CAAI;AAAA;AAAA,CAExB,CACA,CAGA,2BAA2Bla,EAAO,CACjC,MAAMymB,EAAOzmB,EAAM,OAAO,EACzB0mB,EAAOD,EAAK,EACZE,EAAOD,EAAO,GAEf,OAAO,KAAK,uBAAuB1mB,CAAK,EAAI,KAAK,iBAAiB,QAAM,KAAK,QAAQ2mB,EAAO,OAAS,MAAM,CAAC,CAC7G,CAGA,uBAAuB3mB,EAAO,CAC7B,MAAMymB,EAAOzmB,EAAM,OAAO,EACzB0mB,EAAOD,EAAK,EACZE,EAAOD,EAAO,GAEf,MAAO,CACN,2BAA2B1mB,EAAM,MAAM,CAAC,IACxC,kCAAkCA,EAAM,MAAM,CAAC,IAC/C,2BAA2BymB,EAAK,GAAGC,GAAQC,EAAO,IAAO,KAAM,EAAE,MAAM,CAAC,IACxE,0BAA0BF,EAAK,GAAGC,GAAQC,EAAO,GAAM,IAAK,EAAE,MAAM,CAAC,IACrE,wDACA,4BAA4BF,EAAK,GAAGC,GAAQC,EAAO,IAAO,KAAM,EAAE,MAAM,CAAC,GAC1E,EAAE,KAAK,EAAE,CACV,CAGA,iBAAiB3mB,EAAO,CAClBA,EAAM,EAAI,KACdA,EAAQA,EAAM,GAAG,EAAG,GAErB,MAAM4mB,EAAQ5mB,EAAM,EAEpB,MAAO,CACN,qBAAqBA,EAAM,MAAM,CAAC,IAClC,sBAAsBA,EAAM,MAAM,CAAC,IACnC,sBAAsBA,EAAM,MAAM,CAAC,IACnC,+BAA+BA,EAAM,GAAG4mB,EAAQ,EAAG,EAAE,MAAM,CAAC,IAC5D,oBAAoB5mB,EAAM,GAAG4mB,EAAQ,EAAG,EAAE,MAAM,CAAC,IACjD,sBAAsB5mB,EAAM,GAAG4mB,EAAQ,EAAG,EAAE,MAAM,CAAC,GACpD,EAAE,KAAK,EAAE,CACV,CAGA,mBAAmB5mB,EAAO2mB,EAAM,CAC1B3mB,EAAM,EAAI,IACdA,EAAQA,EAAM,GAAG,CAAC,GAEnB,MAAMymB,EAAOzmB,EAAM,OAAO,EACzB0mB,EAAOD,EAAK,EAEPI,EAASR,EAAO,IAAIxtB,GACpBA,IAAM,EACHmH,EAAM,MAAM,EAEbymB,EAAK,GAAGC,EAAO7tB,CAAC,EAAE,MAAM,CAC/B,EAEKxK,EAAM,CAAC,EACZy4B,EAAa,CAAC,EAEf,QAAQh2B,EAAE,EAAGA,EAAI+1B,EAAO,OAAQ/1B,IAC/BzC,EAAI,KAAK,sBAAsByC,EAAE,CAAC,IAAI+1B,EAAO/1B,CAAC,CAAC,GAAG,EAEnD,IAAIjB,EAAS82B,EAAOH,EAAc,KAAOA,EAAc,MAEvD,SAAU,CAACn3B,EAAIvB,CAAG,IAAK,OAAO,QAAQ+B,EAAO,CAAC,EACxC,OAAO/B,GAAQ,UAGpBO,EAAI,KAAK,WAAWgB,CAAG,IAAIw3B,EAAO/4B,EAAI,CAAC,CAAC,GAAG,EAG5C+B,EAAS82B,EAAOH,EAAc,YAAcA,EAAc,aAE1D,SAAU,CAACn3B,EAAIvB,CAAG,IAAK,OAAO,QAAQ+B,EAAO,CAAC,EACxC,OAAO/B,GAAQ,UAGpBg5B,EAAW,KAAK,WAAWz3B,CAAG,IAAIw3B,EAAO/4B,EAAI,CAAC,CAAC,cAAc,EAG9D,MAAO,CAACO,EAAI,KAAK,EAAE,EAAGy4B,EAAW,KAAK,EAAE,CAAC,CAC1C,CAGA,WAAY,CAeX,GAZK,KAAK,SAAS,IAAI,6BAA6B,EACnD,KAAK,WAAW,IAAI,OAAQP,CAAe,EAE3C,KAAK,WAAW,OAAO,MAAM,EAEzB,KAAK,SAAS,IAAI,yBAAyB,EAC/C,KAAK,WAAW,IAAI,SAAUD,CAAY,EAE1C,KAAK,WAAW,OAAO,QAAQ,EAEhC,KAAK,WAAW,YAAY,eAAgB,0BAA0B,EAEjE,CAAE,KAAK,SAAS,IAAI,gBAAgB,EAAI,CAC5C,KAAK,iBAAiB,EAAK,EAC3B,KAAK,mBAAmB,EAAI,EAC5B,KAAK,WAAW,OAAO,QAAQ,EAC/B,MACD,CAEA,IAAIK,EAAO,KAAK,SAAS,IAAI,eAAe,EAC5C,MAAMpsB,EAAO,CAAC,EAAGwsB,EAAc,CAAC,EAE1BC,EAAa,QAAM,KAAK,QAAQ,KAAK,SAAS,IAAI,wBAAwB,CAAC,EACjF,GAAKA,EAAa,CACjBA,EAAW,EAAI,EAGf,MAAMP,GAAOO,EAAW,OAAO,EAE/BL,EADQF,GAAK,EACC,GAGd,GAAI,CACH,MAAMlpB,GAAQ,KAAK,QAAQ,MAAM,EAAE,MAClCkiB,GAAQliB,GAAM,SAAS,EAAE,GAAG,MAC5B0pB,EAAeN,EAAO,EAAI,EAEvBlH,KAAUwH,GACb1pB,GAAM,SAAS,CACd,KAAM,wBACN,MAAO0pB,CACR,CAAC,CACH,OAAQ94B,GAAK,CACZ,KAAK,IAAI,QAAQ,2DAA4DA,EAAG,CACjF,CAEAoM,EAAK,KAAK,KAAK,uBAAuBksB,EAAI,CAAC,EAGtCE,IACJpsB,EAAK,KAAK,8CAA8C,EACxDA,EAAK,KAAK,gEAAgE,EAC1EA,EAAK,KAAK,iEAAiE,EAC3EA,EAAK,KAAK,+DAA+D,EACzEA,EAAK,KAAK,gEAAgE,EAE5E,CAEA,IAAIiF,EAAO,QAAM,KAAK,QAAQ,KAAK,SAAS,IAAI,kBAAkB,CAAC,EAC9D,CAAEA,GAAQwnB,IACdxnB,EAAO,QAAM,KAAK,QAAQmnB,EAAO,OAAS,MAAM,GAC5CnnB,GACJjF,EAAK,KAAK,KAAK,iBAAiBiF,CAAI,CAAC,EAGjCmnB,GAAQ,KAAK,SAAS,IAAI,yBAAyB,GACvDpsB,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wDAW2C,EAItD,MAAM2sB,EAAS,QAAM,KAAK,QAAQ,KAAK,SAAS,IAAI,oBAAoB,CAAC,EAEzE,GADA,KAAK,mBAAmB,CAAEA,CAAM,EAC3BA,EAAS,CACb,MAAMj5B,GAAO,KAAK,mBAAmBi5B,EAAQP,CAAI,EACjDpsB,EAAK,KAAKtM,GAAK,CAAC,CAAC,EACjB84B,EAAY,KAAK94B,GAAK,CAAC,CAAC,CACzB,CAGA,IAAIk5B,EAAa,QAAM,KAAK,QAAQ,KAAK,SAAS,IAAI,gCAAgC,CAAC,EACtFC,EACI,CAAED,GAAcH,IACpBG,EAAa,QAAM,KAAK,QAAQR,EAAO,OAAS,MAAM,GAElDQ,GACJ5sB,EAAK,KAAK,+BAA+B4sB,EAAW,MAAM,CAAC,GAAG,EAK9DC,EAHaD,EAAW,OAAO,EAClB,EAES,IAEtBC,EAAe,CAAET,EAElB,IAAIU,EAAe,QAAM,KAAK,QAAQ,KAAK,SAAS,IAAI,0BAA0B,CAAC,EACnF,MAAMC,EAAcD,GAAgBF,EAIpC,GAHOE,IACNA,EAAe,QAAM,KAAK,QAAQD,EAAe,OAAS,MAAM,GAE5DC,EAAe,CACdC,GACJ/sB,EAAK,KAAK,yBAAyB8sB,EAAa,MAAM,CAAC,GAAG,EAE3D,MAAMZ,GAAOY,EAAa,OAAO,EAChCT,GAAQH,GAAK,EAEdlsB,EAAK,KAAK,6BAA6BksB,GAAK,GAAGG,GAAQ,EAAG,EAAE,MAAM,CAAC,GAAG,EACtErsB,EAAK,KAAK,+BAA+BksB,GAAK,GAAGG,GAAQ,EAAG,EAAE,MAAM,CAAC,GAAG,CACzE,CAIA,MAAMW,EAAY,CAAC,EAClBC,EAAkB,QAAM,KAAK,QAAQ,KAAK,SAAS,IAAI,6BAA6B,CAAC,EACtF,IAAI7N,EAAYgN,EAChB,GAAKa,EAAkB,CACtBA,EAAgB,EAAI,EACpB,MAAMf,GAAOe,EAAgB,OAAO,EAEpC7N,EADQ8M,GAAK,EACM,GAEnBc,EAAU,KAAK,KAAK,uBAAuBd,EAAI,CAAC,CACjD,CAEA,IAAI3M,EAAY,QAAM,KAAK,QAAQ,KAAK,SAAS,IAAI,uBAAuB,CAAC,EACxE,CAAEA,GAAa0N,IACnB1N,EAAY,QAAM,KAAK,QAAQH,EAAY,OAAS,MAAM,GACtDG,GACJyN,EAAU,KAAK,KAAK,iBAAiBzN,CAAS,CAAC,EAIhD,MAAM2N,EAAc,QAAM,KAAK,QAAQ,KAAK,SAAS,IAAI,yBAAyB,CAAC,EAClFC,GAAmB,CAAC,EAErB,GAAKD,EAAc,CAClB,MAAMx5B,GAAO,KAAK,mBAAmBw5B,EAAa9N,CAAS,EAC3D4N,EAAU,KAAKt5B,GAAK,CAAC,CAAC,EACtBy5B,GAAiB,KAAKz5B,GAAK,CAAC,CAAC,CAC9B,CAEKs5B,EAAU,OACd,KAAK,WAAW,IAAI,cAAe,0DAA0DA,EAAU,KAAK;AAAA,CAAI,CAAC,8FAA8FG,GAAiB,KAAK;AAAA,CAAI,CAAC,GAAG,EAE7O,KAAK,WAAW,OAAO,aAAa,EAErC,KAAK,iBAAiBH,EAAU,QAAUhtB,EAAK,MAAM,EAErD,MAAMnK,GAAWu2B,EAAO,GAAK,2DAExBpsB,EAAK,OACT,KAAK,WAAW,IAAI,SAAU,4DAA4DnK,EAAQ,KAAKmK,EAAK,KAAK;AAAA,CAAI,CAAC,+FAA+FwsB,EAAY,KAAK;AAAA,CAAI,CAAC,GAAG,EAE9O,KAAK,WAAW,OAAO,QAAQ,CACjC,CAEA,mBAAmBY,EAAQ,CAC1B,GAAKA,EAAS,CACb,MAAMptB,EAAO,CAAC,EACd,QAAQzJ,EAAE,EAAGA,EAAI,GAAIA,IACpByJ,EAAK,KAAK,sBAAsBzJ,EAAE,CAAC,8BAA8BA,EAAE,CAAC,IAAI,EAEzE,KAAK,WAAW,IAAI,gBAAiB,SAASyJ,EAAK,KAAK;AAAA,CAAI,CAAC,GAAG,CACjE,MACC,KAAK,WAAW,OAAO,eAAe,CACxC,CAEA,iBAAiBotB,EAAQ,CACxB,GAAO,KAAK,aASL,GAAK,CAAEA,EAAS,CACtB,KAAK,YAAY,OAAO,EACxB,MACD,MAZ0B,CACzB,GAAK,CAAEA,EACN,OAED,KAAK,eAAc,iBAAc,OAAQ,CACxC,IAAK,aACL,KAAM,WACN,KAAM,CACP,CAAC,CACF,CAKO,SAAS,KAAK,SAAS,KAAK,WAAW,GAC7C,SAAS,KAAK,YAAY,KAAK,WAAW,CAC5C,CAEA,UAAW,CAEV,IAAIC,EACJ,GAAI,CACHA,EAAa,OAAO,WAAW,yBAAyB,GAAG,OAC5D,MAAa,CAAc,CAE3B,KAAK,SAAS,cAAc,CAC3B,mBAAoBA,GAAc,EACnC,CAAC,EAED,KAAK,SAAS,WAAW,6BAA8B95B,GAAO,CAC7D,KAAK,WAAW,OAAO,YAAaA,CAAG,CACxC,CAAC,EAED,KAAK,UAAU,EACf,KAAK,WAAW,CACjB,CACD,EA/iBgD,mBAAjC,IAAM+5B,EAAN,C,0JCvBf,MAAMC,EAAY,sFACZ1kB,EAAY,CACjB,IAAM,EACN,IAAM,EACN,IAAM,CACP,EAEA,SAAS2kB,EAAcC,EAAO,CAC7B,GAAI,CACE,WAAW,KAAKA,CAAK,IACzBA,EAAQ,SAASA,EAAO,EAAE,EAC5B,MAAa,CAAc,CAE3B,OAAK,OAAOA,GAAU,UAAY,MAAMA,CAAK,GAAK,CAAE,SAASA,CAAK,KACjEA,EAAQ,GAEFA,CACR,CAVS,EAAAD,EAAA,iBAaM,MAAM,EAAN,MAAM,UAAsB,mCAAM,KAAC,CACjD,eAAen6B,EAAM,CACpB,MAAM,GAAGA,CAAI,EAEb,KAAK,cAAgB,GAErB,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,UAAU,EAEtB,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,aAAa,EACzB,KAAK,OAAO,WAAW,EAEvB,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,aAAa,EACzB,KAAK,OAAO,gBAAgB,EAC5B,KAAK,SAAS,YAAa,WAAW,EACtC,KAAK,OAAO,kCAAkC,EAE9C,KAAK,oBAAsB,KAAK,KAAK,OACpC,wBACA6G,GAAKA,EAAE,SAAWA,EAAE,WAAaA,EAAE,OAAO,SAC1C,CAAC,aAAc,YAAa,OAAO,CACpC,EAQA,KAAK,cAAgB,KAAK,KAAK,OAC9B,kBACAA,GAAKA,EAAE,yBAA2BA,EAAE,OAAO,eAC3C,CAAC,aAAc,YAAa,OAAO,CACpC,EAIA,KAAK,SAAS,IAAI,6BAA8B,CAC/C,QAAS,GACT,GAAI,CACH,KAAM,sCACN,MAAO,8CACP,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,SAAS,IAAI,0BAA2B,CAC5C,QAAS,GACT,GAAI,CACH,KAAM,0KACN,MAAO,mDACP,YAAa,iIACb,UAAW,mBACZ,CACD,CAAC,EAED,KAAK,YAAc,IACpB,CAGA,MAAM,UAAW,C,MAChB,KAAK,KAAK,QAAQ,GAAG,kCAAmC,KAAK,cAAe,IAAI,EAChF,KAAK,KAAK,QAAQ,GAAG,qCAAsC,KAAK,cAAe,IAAI,EACnF,KAAK,GAAG,yBAA0BmD,GAAM,KAAK,kBAAkBA,EAAI,KAAM,GAAO,EAAK,EAAG,IAAI,EAC5F,KAAK,GAAG,4BAA6B,KAAK,kBAAmB,IAAI,EACjE,KAAK,GAAG,mBAAoB,KAAK,eAAgB,IAAI,EACrD,KAAK,GAAG,oBAAqB,KAAK,YAAa,IAAI,EACnD,KAAK,GAAG,sBAAuB,KAAK,cAAe,IAAI,EACvD,KAAK,GAAG,0BAA2B,KAAK,iBAAkB,IAAI,EAC9D,KAAK,GAAG,0BAA2B,KAAK,iBAAkB,IAAI,EAC9D,KAAK,GAAG,cAAe,KAAK,cAAe,IAAI,EAC/C,KAAK,GAAG,6BAA8B,KAAK,aAAc,IAAI,EAE7D,UAAUxI,KAAW,oBACpB,KAAK,KAAK,QAAQ,GAAG,WAAWA,CAAO,GAAI,KAAK,cAAe,IAAI,EAEpE,UAAUA,KAAW,wBACpB,KAAK,KAAK,QAAQ,GAAG,WAAWA,CAAO,GAAI,KAAK,iBAAkB,IAAI,EAEvE,UAAUA,KAAW,wBACpB,KAAK,KAAK,QAAQ,GAAG,WAAWA,CAAO,GAAI,KAAK,iBAAkB,IAAI,EAEvE,KAAK,GAAG,oBAAqB,CAACkV,EAAcC,EAAiBC,EAAeC,IAAa,CACxF,GAAKD,EACJ,UAAUxS,KAAQ,KAAK,cAAc,UAAW,CAC/C,MAAMi2B,EAAUj2B,EAAK,MAAM,eACpBi2B,EAAQ,SAAS,cAGxBxjB,EAAS,KAAK,CACb,QAASwjB,EAAQ,QAAQ,aACzB,UAAWj2B,EACX,OAAQ,IAAMA,EAAK,YAAY,CAChC,CAAC,CACF,CACF,CAAC,EAED,KAAK,oBAAoB,GAAG,QAAS,KAAK,YAAa,IAAI,EAC3D,KAAK,oBAAoB,GAAG,UAAW,KAAK,cAAe,IAAI,EAC/D,KAAK,oBAAoB,GAAG,gBAAiB,KAAK,YAAa,IAAI,EAEnE,KAAK,oBAAoB,MAAM,CAACG,EAAKC,IAAc,CAClD,UAAUJ,KAAQI,EACjB,KAAK,YAAYJ,CAAI,CAEvB,CAAC,EAED,MAAMQ,EAAI,KACTgO,EAAQ,MAAM,KAAK,KAAK,UAAU,EACnC,GAAK,CAAEA,EACN,OAED,MAAMC,EAAgBD,EAAM,cAC3BsE,EAAiB,KAAK,cAAgB,KAAK,aAAa,YAEzD,KAAK,eAAgB,gBAA+BtE,EAAM,SAAU,CACnE,YAAYnB,EAAO,CAClB,MAAMA,CAAK,EAEX,KAAK,UAAY,IAAM,CACtB,KAAK,MAAM,eAAe,CACzB,WAAY,KAAK,MAAM,QAAQ,QAAQ,UACvC,cAAe,KAAK,MAAM,QAAQ,QAAQ,UAC1C,QAAS,KAAK,MAAM,QAAQ,OAC7B,CAAC,CACF,EAEA,KAAK,gBAAkB,IAAM,CAC5B,KAAK,MAAM,qBAAqB,KAAK,MAAM,QAAQ,OAAO,CAC3D,EAEA,KAAK,OAAS,IAAM,CACnB,KAAK,MAAM,cAAc,EACzB,KAAK,SAAS,CACb,MAAO,EACR,CAAC,CACF,EAEA,KAAK,QAAU,IAAM,CACpB,KAAK,SAAS,CACb,MAAO,EACR,CAAC,CACF,EAEA,KAAK,MAAQ,CACZ,MAAO,EACR,CACD,CAEA,QAAS,CAEP,OAAO,IAcT,CACD,EAnDoE,wBAA/C,GAqDrB,KAAK,cAAc,MAAMlN,GAAO,CAC/B,MAAMkM,EAAalM,EAAI,UAAU,OAEjCA,EAAI,UAAU,iBAAmB,SAASsK,EAAKyrB,EAAO,CACrD,MAAMnjB,EAAYtI,EAAI,UACrBuI,EAAeD,EAAYvS,EAAE,KAAK,QAAQ,IAAI,eAAe,EAAI,EACjEyS,EAAgBD,GAAgB,EAChCE,EAAeF,IAAiB,GAAKA,IAAiB,EACtD5N,EAAOqF,EAAI,KACX0I,EAAY3S,EAAE,UAAU,SAAS4E,EAAK,EAAE,GAAKA,EAAK,MAClD4I,EAAQxN,EAAE,UAAU,OAAO,QAAQ2S,CAAS,EAE5CN,GAAIrS,EAAE,KAAK,QAAQ,EAEfqS,KACJA,GAAE,UAAY,KAAK,MAAM,uBACzBA,GAAE,MAAQA,GAAE,OAASA,GAAE,MAAM,SAG9B,IAAIsjB,GAEJ,GAAK1rB,EAAI,aAAe,GAAO,CAC9B,MAAMoB,GAASpB,EAAI,QAAU,CAAC,EAE9B,GADUoB,GAAO,QAAQ,IACT,QAAU,CACzB,MAAMzO,GAAUoD,EAAE,KAAK,QAAQ,IAAI,gBAAgB,EAElD41B,GAAaL,EAAclqB,GAAO,kBAAkB,CAAC,EACrDwqB,GAAoBN,EAAclqB,GAAO,6BAA6B,CAAC,EACvEgG,GAASwkB,IAAqBD,GAK/B,GAHA51B,EAAE,IAAI,KAAK,wBAAyBpD,GAAS,UAAWyU,GAAQ,cAAewkB,GAAmB,OAAQD,EAAU,EACpH51B,EAAE,IAAI,KAAK,aAAcqL,EAAM,EAE1BzO,KAAY,GAAMyU,GAAS,GAAKzU,GAAU,EAAK,CACnD,MAAMk5B,GAAQP,EAAclqB,GAAO,+BAA+B,CAAC,IAAM,EACxEiG,GAAOjG,GAAO,oBAAoB,EAClC0qB,GAAQzkB,KAAS,QACjBC,GAAOX,EAAUU,EAAI,GAAK,EAE3BtR,EAAE,IAAI,KAAK,YAAa81B,GAAO,QAASxkB,GAAM,QAASC,EAAI,EAE3DokB,GAAa31B,EAAE,KAAK,MAAM,gBAAiB,6BAA8B,CACxE,KAAM,EAAC,QAAK,MAAM,4BAA4B4E,EAAK,WAAY,EAC/D,KAAMmxB,GACL/1B,EAAE,KAAK,EAAE,wBAAyB,mBAAmB,EACrDA,EAAE,KAAK,EAAE,gBAAiB,iBAAkB,CAAC,KAAAuR,EAAI,CAAC,CACpD,CAAC,EAEIukB,IAASF,GAAa,EAC1BD,GAAW,KAAK31B,EAAE,KAAK,EACtB,6BACA,kGACA,CACC,WAAY61B,GACZ,OAAQD,EACT,CACD,CAAC,EACQvkB,GAAS,GAClBskB,GAAW,KAAK31B,EAAE,KAAK,EACtB,kBACA,gDACA,CACC,MAAOqR,EACR,CACD,CAAC,CACH,CACD,CAED,MAAYpH,EAAI,aACf0rB,GAAa1rB,EAAI,YAElB,MAAM8G,GAAS9G,EAAI,WAAaA,EAAI,YAAcjK,EAAE,KAAK,gBAAgBiK,EAAKoI,EAAC,EAC9EyC,GAAexC,GAAkBtS,EAAE,KAAK,iBAAiB+Q,GAAQ9G,CAAG,EAE/DiJ,GAAalT,EAAE,KAAK,WAAW4E,EAAMqJ,CAAa,EAClD4E,GAAgB7S,EAAE,UAAU,QAAQ4E,EAAK,EAAE,EAEjD,IAAIqQ,EAAahL,EAAI,eAChBgL,aAAsB,IAC1BA,EAAa,CAAC,GAAGA,CAAU,EAAE,KAAK,GAAG,EAC5B,MAAM,QAAQA,CAAU,IACjCA,EAAaA,EAAW,KAAK,GAAG,GAEjC,MAAME,EAAa,CAClB,UAAW,yCAAyCtC,GAAgB,4DAA8D,EAAE,IAAIoC,GAAc,EAAE,GACxJ,qBAAsB,0BACtB,KAAM,IAAIrQ,EAAK,KAAK,GACpB,IAAK,sBACL,OAAQ,SACR,MAAO,CAAE,MAAA4I,CAAM,CAChB,EAEKvD,EAAI,gBACR,OAAO,OAAOkL,EAAYlL,EAAI,cAAc,EAExCA,EAAI,gBACR,OAAO,OAAOkL,EAAW,MAAOlL,EAAI,cAAc,EAEnD,MAAM+rB,EAAY/nB,EAAc,IAAKkH,EAAYtC,GAAgB,CAChE5E,EAAc,OAAQ,CACrB,UAAW,2BACZ,EAAG4E,EAAa,EAChB5E,EAAc,MAAO,CACpB,UAAW,kEACZ,EAAGiF,EAAU,CACd,EAAIA,EAAU,EAEd,IAAIrX,GAAO,EAAC,OAAI,MAAM,iBAAiB,eAAcoO,EAAI,OAAQ,YAAWA,EAAI,UAAW,eAAcrF,EAAK,GAAI,YAAWA,EAAK,OACjI,EAAC,QAAK,MAAM,8BACX5E,EAAE,KAAK,OAAO,OAAOiK,EAAKgE,CAAa,CACvC,EACA+nB,EACD,EAAC,OAAI,qBAAmB,2BAA2B,MAAM,iCACxD,EAAC,YAAMzjB,EAAY,IAAM,IAAK,EAC9B,EAAC,QACA,MAAO,WAAWE,EAAgB,sCAAwC,EAAE,GAC5E,MAAO,CAAC,MAAOC,EAAelF,EAAQ,IAAI,GAExCxN,EAAE,KAAK,aAAa+Q,GAAQ9C,CAAa,CAC5C,EACC6G,IAAgB7G,EAAcqE,EAAgBwC,EAAY,CAC5D,CACD,EAEA,OAAK6gB,KACJ95B,GAAO,EAAC,OAAI,MAAM,kBACjB,EAAC,OAAI,MAAM,2BACV,EAAC,WAAK85B,EAAW,CAClB,EACC95B,EACF,GAEO,EAAC,OAAI,MAAM,8DAChBA,GACA65B,EAAS,EAAC11B,EAAE,cAAF,CACX,QAAS01B,EACT,uBAAwB,KAAK,MAAM,uBACnC,iBAAkB,KAAK,MAAM,iBAC7B,eAAgB,KAAK,MAAM,eAC3B,qBAAsB,KAAK,MAAM,qBACjC,cAAe,KAAK,MAAM,cAC1B,aAAc,KAAK,oBACpB,EAAM,IACP,CACD,EAEA/1B,EAAI,UAAU,kBAAoB,SAASsK,EAAK,CAC/C,OAAOA,EAAI,iBACVA,EAAI,eAAiB,IAAM,KAAK,oBAAoBA,EAAI,KAAK,KAAK,GAE3D,EAAC,OAAI,MAAM,4CAClB,EAAC,UAAO,MAAM,4BAA4B,qBAAmB,sBAAsB,QAASA,EAAI,gBAC/F,EAAC,QAAK,MAAM,2BAA4BjK,EAAE,KAAK,EAAE,mBAAoB,OAAO,CAAG,CAChF,EACA,EAAC,QAAK,MAAM,mFAAkF,UACzFA,EAAE,KAAK,EAAE,kBAAmB,uBAAwB,CACvD,KAAMiK,EAAI,SACX,CAAC,EACD,EAAC,OAAI,MAAM,iEAAiE,KAAK,WAC9EjK,EAAE,KAAK,eAAeiK,EAAI,UAAW,MAAM,CAC9C,CACD,CACD,CACD,EAEAtK,EAAI,UAAU,OAAS,UAAW,CACjC,GAAI,CAGH,GAFA,KAAK,aAAe,GAEf,KAAK,OAAO,eAAiB,CAAEK,EAAE,KAAK,QAAQ,IAAI,yBAAyB,EAC/E,OAAO6L,EAAW,KAAK,IAAI,EAE5B,MAAM4pB,EAAU,KAAK,MAAM,eAC1BxrB,EAAMjK,EAAE,mBAAmBy1B,EAAQ,QAASA,EAAQ,MAAM,EAC1DQ,EAAe,KAAK,iBAAiBhsB,EAAKwrB,CAAO,EACjDS,EAAkB,KAAK,MAAM,eAAiB,CAAEl2B,EAAE,KAAK,QAAQ,IAAI,4BAA4B,EAE/FmU,EAASlK,EAAI,WAAaA,EAAI,cAAgBjK,EAAE,UAAU,eAAe,QAAQiK,EAAI,aAAa,EAAI,KAEvG,GAAKA,EAAI,YACR,OAAO,KAER,MAAMksB,EAAY,CAAEhiB,GAAUlK,EAAI,WAAajK,EAAE,KAAK,QAAQ,IAAI,6BAA6B,EAE/F,OAAQ,EAAC,OACR,qBAAmB,iBACnB,MAAO,8FAA8FiK,EAAI,OAAS,uCAAyC,EAAE,GAAGA,EAAI,UAAY,oCAAsC,EAAE,GAAGksB,EAAY,0CAA4C,EAAE,GAAGlsB,EAAI,UAAY,iBAAmB,EAAE,GAAGkK,EAAS,oBAAsB,EAAE,GACjW,MAAO,CAAC,gBAAiBA,CAAM,GAE9B+hB,GAAoB,EAAC,OAAI,qBAAmB,oBAAoB,MAAM,+DACtE,EAAC,OAAI,MAAM,cACV,EAAC,OAAI,MAAM,wDACV,EAAC,UAAO,MAAM,mHAAmH,QAAS,KAAK,yBAC9I,EAAC,OAAI,MAAM,cACV,EAAC,KAAE,MAAM,qBAAkB,kBAAeT,EAAQ,QAAQ,aAAa,CAAE,CAC1E,CACD,EACA,EAAC,OAAI,MAAM,+DAA+D,KAAK,WAC7Ez1B,EAAE,KAAK,EAAE,kBAAmB,eAAe,CAC7C,CACD,CACD,CACD,EACA,EAAC,OAAI,MAAM,iBACRi2B,EACA,KAAK,MAAM,kBAAoB,KAAK,kBAAkBhsB,CAAG,EACzDwrB,EAAQ,SAAWA,EAAQ,QAAQ,OAAS,GAAM,EAAC,OAAI,MAAM,8DAC5DA,EAAQ,QAAQ,aAAgB,EAAC,OAAI,MAAM,kDAC5C,EAAC,UAAO,MAAM,2CAA2C,QAAS,KAAK,+BACtE,EAAC,QAAK,MAAM,kBAAkB,gBAAc,kBAC3Cz1B,EAAE,KAAK,EAAE,uBAAwB,sBAAsB,CACvD,CACF,CACD,EACA,EAAC,UACAy1B,EAAQ,QAAQ,IAAIC,GAAU,EAAC,MAAG,IAAKA,EAAM,SAAWA,EAAM,QAAQ,GAAI,MAAM,cAC7E,KAAK,iBAAiB11B,EAAE,mBAAmB01B,EAAM,QAASA,EAAM,MAAM,EAAGA,CAAK,EAC9E,KAAK,MAAM,kBAAoB,KAAK,kBAAkBzrB,CAAG,CAC5D,CAAM,CACN,CACF,CACD,CACD,CAED,OAAQtO,EAAK,CACZqE,OAAAA,EAAE,IAAI,MAAM,yBAA0BrE,CAAG,EAClCkQ,EAAW,KAAK,IAAI,CAC5B,CACD,EAIA,WAAW,IAAM,KAAK,cAAc,YAAY,CAAC,CAClD,CAAC,CACF,CAGA,aAAc,CACb,OAAO,KAAK,aAAa,CAC1B,CAEA,eAAgB,CACf,KAAK,cAAc,YAAY,CAChC,CAEA,kBAAmB,CAClB,OAAO,KAAK,aAAa,GAAM,EAAK,CACrC,CAEA,kBAAmB,CAClB,OAAO,KAAK,aAAa,GAAO,EAAI,CACrC,CAEA,aAAaiK,EAAe,GAAMC,EAAe,GAAM,CACtD,UAAUvW,KAAQ,KAAK,cAAc,UAAW,CAC/C,MAAMi2B,EAAUj2B,EAAK,MAAM,eAC3B,GAAOi2B,EAAQ,UAGfA,EAAQ,QAAQ,aAAe,KAE1B,MAAM,QAAQA,EAAQ,OAAO,GACjC,UAAUC,KAASD,EAAQ,QACrBC,EAAM,UACVA,EAAM,QAAQ,aAAe,KACjC,CAEA,KAAK,cAAc,YAAY,CAChC,CAGA,kBAAkBtwB,EAAIkH,EAAO,CAC5B,UAAU9M,KAAQ,KAAK,cAAc,UAAW,CAC/C,MAAMi2B,EAAUj2B,EAAK,MAAM,eAC3B,GAAK,CAAEi2B,EAAQ,QACd,SAED,MAAMW,EAASX,EAAQ,OAClBW,IAAYhxB,GAAMA,GAAMgxB,EAAO,IAAQ9pB,GAASA,GAAS8pB,EAAO,QACpEX,EAAQ,QAAQ,aAAe,KAC/Bj2B,EAAK,YAAY,EAEnB,CACD,CAGA,eAAe4F,EAAI0Q,EAAe,GAAMC,EAAe,KAAM,CACvDA,GAAgB,OACpBA,EAAeD,GAEhB,UAAUtW,KAAQ,KAAK,cAAc,UAAW,CAC/C,MAAMi2B,EAAUj2B,EAAK,MAAM,eAC3B,GAAOi2B,EAAQ,SAGVA,EAAQ,SAAS,KAAOrwB,EAAK,EAE5B0Q,GAAgBC,KACpB0f,EAAQ,QAAQ,aAAe,MAEhCj2B,EAAK,YAAY,EACjB,MACD,CACD,CACD,CAGA,cAAe,CACd,UAAUA,KAAQ,KAAK,cAAc,UAAW,CAC/C,MAAMi2B,EAAUj2B,EAAK,MAAM,eAC1ByK,EAAMwrB,GAAS,SAAS,aACxB1kB,EAAS9G,GAAK,WAEf,GAAK8G,EACJ,UAAU8E,KAAS9E,EACb8E,EAAM,OAAS,SAAWA,EAAM,gBACpC,KAAK,OAAO,aAAaA,EAAM,cAAc,CAEjD,CACD,CAOA,mBAAmBwgB,EAASD,EAAQ,CACnC,GAAKC,EAAQ,aACZ,OAAOA,EAAQ,aAEhB,MAAMvlB,EAAO,KAAK,aAAe,KAAK,KAAK,QAAQulB,EAAQ,UAAW,KAAM,GAAM,EAAI,EACrFhrB,EAASgrB,EAAQ,QAAQ,iBACzBjO,EAAS/c,GAAUA,EAAO,QAAQ,EAE7BxP,EAAMw6B,EAAQ,aAAe,CAClC,GAAIA,EAAQ,GACZ,KAAM,CACL,MAAOA,EAAQ,QAAQ,UACvB,GAAID,EAAO,GACX,MAAOA,EAAO,KACd,YAAaA,EAAO,YACpB,OAAQA,EAAO,MAAQA,EAAO,aAAeA,EAAO,YAAY,KAAK,EAAE,YAAY,IAAMA,EAAO,KAChG,KAAMA,EAAO,IACd,EACA,UAAWtlB,GAAQA,EAAK,MACxB,OAAQA,GAAQA,EAAK,IAAMulB,EAAQ,UACnC,WAAY,KAAK,KAAK,OAAO,UAAUD,EAAO,GAAIA,EAAO,MAAOtlB,GAAM,GAAIA,GAAM,KAAK,EACrF,OAAQulB,EAAQ,WAChB,aAAcA,EAAQ,QAAQ,OAC9B,UAAWA,EAAQ,QAAQ,SAC3B,aAAcA,EAAQ,YACtB,UAAWA,EAAQ,UACnB,YAAa,QACb,OAAQjO,IAAW,OAASA,IAAW,QACvC,UAAWA,IAAW,sBACtB,OAAA/c,CACD,EAKA,GAAK,MAAM,QAAQxP,EAAI,YAAY,GAAKA,EAAI,aAAa,QAAUusB,IAAW,QAAU,CACvF,IAAI3X,EAAU5U,EAAI,aAAa,CAAC,EAAE,QAClC,GAAK,OAAO4U,GAAY,SAAW,CAClC,MAAM3I,EAAQwtB,EAAU,KAAK7kB,CAAO,EAC/B3I,IACJ2I,EAAUA,EAAQ,MAAM3I,EAAM,CAAC,EAAE,MAAM,EAAE,SAAS,EAC7C2I,EAAQ,SACZ5U,EAAI,aAAa,CAAC,EAAE,YAAc4U,EAClC5U,EAAI,WAAa,IAGpB,CACD,CAGA,YAAK,KAAK,kBAAkBA,CAAG,EAExBA,CACR,CAOA,QAAQoI,EAAO4I,EAAO,CACdA,IACNA,EAAQ5I,EAAM,OAEf,MAAMiJ,KAAU,OAAI,mBAAoBL,CAAK,EAC7C,GAAK,CAAEK,GAAW,CAAEA,EAAQ,GAC3B,OAAO,KAER,MAAM4D,EAAO7M,EAAM,UAAY,KAAK,KAAK,QAAQiJ,EAAQ,GAAIA,EAAQ,OAASA,EAAQ,MAAM,YAAY,EAAG,GAAO,EAAI,EACtH,OAAA4D,EAAK,IAAI7M,CAAK,EACP6M,CACR,CAGA,WAAW7M,EAAO,CACVA,EAAM,YAGbA,EAAM,UAAU,MAAMA,CAAK,EAC3BA,EAAM,UAAY,KACnB,CAOA,YAAY+nB,EAAMnf,EAAO,CACjBA,IACNA,EAAQmf,EAAK,OAEP,KAAK,QAAQA,EAAMnf,CAAK,IAG/B,KAAK,YAAcmf,EAAK,UACxB,KAAK,KAAK,OAAO,sBAAmB,OAAI,cAAenf,CAAK,CAAC,EAE7D,KAAK,iBAAiBmf,KAAM,OAAI,mCAAoCnf,CAAK,CAAC,EAC1E,KAAK,qBAAqBmf,EAAMnf,EAAM,UAAU,EACjD,CAGA,YAAYmf,EAAMnf,EAAO,CACxB,MAAK,OAAI,sBAAuBA,CAAK,OAAM,OAAI,sBAAuBmf,EAAK,KAAK,EAAI,CACnF,KAAK,WAAWA,CAAI,EACpB,KAAK,YAAYA,EAAMnf,CAAK,EAC5B,MACD,CAEA,MAAMypB,KAAa,OAAI,cAAezpB,CAAK,EAC1C0pB,KAAa,OAAI,cAAevK,EAAK,KAAK,EAE1CwK,KAAkB,OAAI,mCAAoC3pB,CAAK,EAC/D4pB,KAAkB,OAAI,mCAAoCzK,EAAK,KAAK,EAEhEsK,IAAeC,GACnB,KAAK,KAAK,OAAO,mBAAmBD,CAAU,EAE1CE,IAAoBC,GACxB,KAAK,iBAAiBzK,EAAMwK,CAAe,EAEvC3pB,EAAM,aAAemf,EAAK,MAAM,YACpC,KAAK,qBAAqBA,EAAMnf,EAAM,UAAU,EAEjD,MAAMK,KAAU,OAAI,mBAAoBL,CAAK,EAE7C,KAAK,SAAS,cAAc,CAC3B,UAAWA,EAAM,sBAClB,CAAC,EAED,KAAK,KAAK,QAAQ,cAAc,CAC/B,UAAWA,EAAM,uBACjB,QAASK,EAAUA,EAAQ,MAAQ,KACnC,UAAWA,EAAUA,EAAQ,GAAK,IACnC,CAAC,CACF,CAGA,cAAc8e,EAAM,CACf,KAAK,cAAgBA,EAAK,YAC7B,KAAK,YAAc,MAEpB,KAAK,WAAWA,CAAI,CACrB,CAGA,iBAAiBA,EAAM5V,EAAQ,CAC9B,MAAMtF,EAAOkb,EAAK,UACXlb,GAGPA,EAAK,aAAasF,CAAM,CACzB,CAGA,qBAAqB4V,EAAMC,EAAQ,CAClC,MAAMnb,EAAOkb,EAAK,UACXlb,GAGPA,EAAK,oBAAiB,oBAAiBmb,CAAM,CAAC,CAC/C,CACD,EAnpBkD,qBAAnC,IAAMyK,EAAN,C,6ICIR,MAAM,EAAN,MAAM,UAAoB,qBAAQ,KAAC,CACzC,YAAYj7B,EAAM,CACjB,MAAMA,CAAI,EAEV,KAAK,SAAW,EACjB,CAEA,aAAc,CACb,YAAK,SAAW,GACT,IACR,CACD,EAX0C,mBAAnC,IAAMk7B,EAAN,EAcA,MAAM,EAAN,MAAM,UAAiB,gBAAK,KAAC,CACnC,YAAYh7B,EAAK,CAChB,MAAM,GAAGA,EAAI,OAAO,eAAeA,EAAI,SAAS,EAAE,CACnD,CACD,EAJoC,gBAA7B,IAAMi7B,EAAN,EAOQ,MAAM,EAAN,MAAM,UAAe,oBAAM,KAAC,CAC1C,eAAex7B,EAAM,CACpB,MAAM,GAAGA,CAAI,EAEb,KAAK,UAAY,CAAC,EAClB,KAAK,eAAiB,CAAC,EAEvB,KAAK,OAAO,QAAQ,CACrB,CAEA,IAAI,UAAW,CACd,GAAK,KAAK,WACT,OAAO,KAAK,WAEb,MAAMy7B,EAAY,KAAK,QAAQ,gBAAgB,EAG/C,OAFW,KAAK,WAAaA,GAAW,YAAY,aAAa,CAGlE,CAEA,UAAW,CAEV,IAAIvsB,EAAS,KAAK,OAElB,GAAK,CAAEA,EAAS,CACf,MAAMgD,EAAO,KAAK,KAAK,MAIvB,GADAhD,GAFQgD,GAAQA,EAAK,YAEN,OAAO,OACjBA,GAAQ,CAAEhD,EAAS,CACvB,IAAIhM,EAAE,EAAG2M,EAAOqC,EAChB,KAAO,CAAEhD,GAAQ,cAAgBW,GAAQ3M,IAAM,IAC9CgM,EAASW,GAAM,eAAe,OAC9BA,EAAOA,GAAM,MAGd,GAAK,CAAEX,EAAS,CACf,MAAMwsB,EAAO,KAAK,KAAK,WAAW,KAAM70B,GAAKA,EAAE,OAAO,QAAQ,aAAc,GAAG,EAC1E60B,IACJxsB,EAASwsB,EAAK,MAAM,OACtB,CACD,CAEA,KAAK,OAASxsB,CACf,CAEA,GAAK,CAAEA,EACN,OAAO,IAAI,QAAQ,IAAM,KAAK,SAAS,EAAG,EAAE,EAG7C,GAAK,CAAE,KAAK,OAAO,MAAQ,CAAE,KAAK,OAAO,cAAgB,CAAE,KAAK,OAAO,aAAa,KAAO,CAC1F,KAAK,IAAI,MAAM,mEAAmE,EAClF,MACD,CAEA,KAAK,kBAAoB,GAEzB,MAAMtK,EAAI,KACT+2B,EAAQ,KAAK,OAAO,aAAa,YAAY,UAC7CC,EAAaD,EAAM,sBAqCpB,GAnCAA,EAAM,sBAAwB,SAASE,EAAOC,EAAa,GAAM,CAChE,MAAMr7B,EAAMm7B,EAAW,KAAK,KAAMC,EAAOC,CAAU,EACnD,GAAKr7B,GAAOA,EAAI,QACf,GAAI,CACH,GAAI,CACH,MAAMs7B,EAAOF,EAAM,cAAc,EAChC/5B,EAAO+5B,EAAM,QACd,KAAK,UAAU,SAAS,EAAE,KAAK,CAC9B,MAAO/5B,EAAK,MACZ,UAAWA,EAAK,UAChB,eAAgBi6B,EAAOA,EAAK,KAAO,OACnC,WAAAD,CACD,CAAC,CAEF,OAAQv7B,EAAK,CAEZ,GAAKA,EAAI,SAAS,EAAE,SAAS,kBAAkB,GAAKs7B,EAAM,YAAc,CAAEA,EAAM,WAAW,SAAW,CAAEA,EAAM,WACxG,KAAK,IAAI,GAAKA,EAAM,iBAAmB,IAAM,KAAS,CAC1D,MAAMG,KAAW,OAAI,mCAAoCH,CAAK,EAC7D96B,EAAOi7B,GAAYA,EAAS,OAAS,OAASA,EAAS,MAAQ,IAAIH,EAAM,OAAO,GAEjFj3B,EAAE,IAAI,KAAK,iDAAkD7D,CAAI,EACjE86B,EAAM,gBAAkB,KAAK,IAAI,EACjCA,EAAM,QAAQ,CACf,CAEF,CAED,OAAQt7B,EAAK,CACZqE,EAAE,IAAI,QAAQrE,CAAG,CAClB,CAED,OAAOE,CACR,EAEK,KAAK,OAAO,aAAa,WAAa,CAC1C,MAAMw7B,EAAc,KAAK,OAAO,aAAa,WAAW,UACxD,KAAK,kBAAoB,GACzB,KAAK,OAAO,aAAa,WAAW,UAAY,SAASt3B,EAAG,CAC3D,MAAMC,EAAI,KAAK,MAAMD,EAAE,OAAO,EAC9B,OAAKC,GAAKA,EAAE,cAAgBD,EAAE,cAC7BC,EAAE,YAAcD,EAAE,aAEZs3B,EAAY,KAAK,KAAMt3B,CAAC,CAChC,CACD,CAEA,MAAMu3B,EAAa,KAAK,WAAa,KAAK,OAAO,KAAK,YAEtD,KAAK,KAAO,IAAIA,EAAW,CAACC,EAAWC,IAAY,CAClD,GAAK,CAAE,KAAK,QACX,OAAOA,EAAQD,CAAS,EAEzB,IAAIn7B,EAAOm7B,EAAU,UACd,OAAO,KAAKn7B,CAAI,EAAE,SACxBA,EAAO,QAER,GAAI,CAGE,KAAK,mBACT,KAAK,gBAAgBm7B,CAAS,CAEhC,OAAQ57B,EAAK,CACZ,YAAK,IAAI,QAAQA,EAAK,CACrB,KAAM,CACL,UAAW47B,EAAU,aACtB,EACA,MAAO,CACN,UAAWn7B,CACZ,CACD,CAAC,EACD,KAAK,IAAI,MAAM,2BAA4BT,EAAK47B,CAAS,EAClDC,EAAQD,CAAS,CACzB,CAEA,OAAOC,EAAQD,CAAS,EAAE,IAAI9a,GAAU,CAClCA,EAAO,YAAcA,EAAO,WAAW,gBAAkB8a,EAAU,eACvE,KAAK,IAAI,MAAM,CACd,MAAO,OACP,SAAU,MACV,QAAS,GAAGA,EAAU,aAAa,KAAK9a,EAAO,YAAcA,EAAO,WAAW,sBAAwB,IAAI,MAC3G,KAAM,CACL,UAAWrgB,CACZ,CACD,CAAC,EAEF,GAAI,CACH,KAAK,iBAAiBqgB,CAAM,CAC7B,OAAQ9gB,EAAK,CACZ,KAAK,IAAI,QAAQA,EAAK,CACrB,KAAM,CACL,UAAW47B,EAAU,aACtB,EACA,MAAO,CACN,UAAWn7B,CACZ,CACD,CAAC,EACD,KAAK,IAAI,MAAM,4BAA6BT,EAAK8gB,CAAM,CACxD,CAEA,OAAOA,CACR,CAAC,CACF,CAAC,EAED,KAAK,SAAW,KAAK,OAAO,KAC5B,KAAK,YAAc,KAAK,OAAO,aAAa,KAG5C,KAAK,OAAO,KAAO6a,EAAW,KAAK,CAClC,KAAK,KACL,KAAK,QACN,CAAC,EAED,KAAK,OAAO,aAAa,KAAOA,EAAW,KAAK,CAC/C,KAAK,KACL,KAAK,WACN,CAAC,CAUF,CAGA,WAAY,CAEX,KAAK,OAAS,KAAK,QAAU,KAAK,WAAa,KAAK,SAAW,KAAK,aAAe,KAAK,YAAc,IACvG,CAGA,gBAAgBG,EAAS,CACxB,MAAMF,EAAYE,EAAQ,cACzB1d,EAAY,KAAK,UAAUwd,CAAS,EACpCh8B,EAAQ,YAAYg8B,CAAS,GAC7BG,EAAgB,KAAK,aAAan8B,CAAK,EAExC,GAAK,CAAEwe,GAAa,CAAE2d,EACrB,OAED,MAAMC,EAAK,KAAK,OAAO,aACtBC,EAASD,GAAMA,EAAG,eAClBE,EAAYF,GAAMA,EAAG,QACrB/U,EAASgV,GAAUA,EAAOL,CAAS,EACnCnyB,EAAK,MAAM,QAAQwd,CAAM,EAAIA,EAAO,CAAC,EAAIA,EACzCqU,EAAQY,GAAaA,EAAU,IAAIzyB,CAAE,EAEtC,GAAK2U,EACJ,UAAU7S,KAAO6S,EACX,OAAO7S,GAAQ,WACnBA,EAAIuwB,CAAO,EACFvwB,EAAI,CAAC,GACd,KAAK,cAAcuwB,EAASvwB,EAAI,CAAC,CAAC,EAIrC,IAAI4wB,EAAW,CAAC,CAAE/d,EAElB,GAAK2d,EAAgB,CACpB,MAAM33B,EAAI,IAAI42B,EAAY,CACzB,UAAAY,EACA,QAAAE,CACD,CAAC,EAED,KAAK,KAAKl8B,EAAOwE,CAAC,EACbA,EAAE,WACN+3B,EAAW,GACb,CAEA,GAAKA,EAAW,CAIf,MAAMC,EAAI,KAAK,OAAO,aAAa,WAAW,MAAM3yB,CAAE,EACrD4yB,EAAK,KAAK,UAAY,KAAK,SAASP,EAAQ,KAAK,EAE7CM,IACCC,GACJD,EAAE,YAAcC,EAChBP,EAAQ,MAAM,IAAI,OAAO,KAAOO,EAChCP,EAAQ,MAAM,IAAI,IAAMO,EAAG,OAEtBf,IACJA,EAAM,SAAWQ,EAAQ,MACpBR,EAAM,iBAAmBA,EAAM,gBAAgB,UACnDA,EAAM,gBAAgB,QAAQ,MAAQQ,EAAQ,UAIhD,KAAK,IAAI,KAAK,sDAAuDF,CAAS,EAC9E,KAAK,OAAO,aAAa,WAAW,MAAMnyB,CAAE,EAAI,MAEnD,CACD,CAEA,iBAAiB6yB,EAAU,CAC1B,GAAK,CAAEA,EAAS,WACf,OAED,MAAMV,EAAYU,EAAS,WAAW,cACrCle,EAAY,KAAK,eAAewd,CAAS,EAE1C,GAAKxd,EACJ,UAAU7S,KAAO6S,EAChB7S,EAAI+wB,CAAQ,EAEd,KAAK,KAAK,aAAaV,CAAS,GAAIU,EAAS,IAAI,CAClD,CAGA,cAAcR,EAASS,EAAU,CAChCT,EAAQ,SAAQ,WAAMA,EAAQ,MAAOS,CAAQ,CAC9C,CAGA,iBAAiBX,EAAWW,EAAUC,EAAI,GAAM,CAC/C,GAAK,OAAOD,GAAa,WAAa,CACrC,GAAK,CAAEC,EACN,MAAM,IAAI,MAAM,kCAAkC,EAUnDD,EAAW,CAACA,EAAUA,CAAQ,CAC/B,EAEaC,EACT,KAAK,UAAUZ,CAAS,EAAI,KAAK,UAAUA,CAAS,GAAK,CAAC,EAC1D,KAAK,eAAeA,CAAS,EAAI,KAAK,eAAeA,CAAS,GAAK,CAAC,GAEnE,KAAKW,CAAQ,CACnB,CAEA,mBAAmBX,EAAWW,EAAUC,EAAI,GAAM,CACjD,MAAMzvB,EAAOyvB,EAAM,KAAK,UAAUZ,CAAS,EAAI,KAAK,eAAeA,CAAS,EAC5E,GAAO7uB,EAGP,IAAK,OAAOwvB,GAAa,WACxB,MAAM,IAAI,MAAM,qCAAqC,EAEtD,QAAQ55B,EAAE,EAAGA,EAAIoK,EAAK,OAAQpK,IAAK,CAClC,MAAM4I,EAAMwB,EAAKpK,CAAC,EAClB,GAAK,OAAO4I,GAAQ,WAAaA,IAAQgxB,EAAWhxB,EAAI,CAAC,IAAMgxB,EAAW,CACzExvB,EAAK,OAAOpK,EAAG,CAAC,EAChB,MACD,CACD,EACD,CAOA,SAASi5B,EAAW,CACnB,MAAMM,EAAY,KAAK,OAAO,cAAc,QAE5C,GAAOA,EAGP,UAAUv8B,KAAOu8B,EAAU,OAAO,EAAG,CACpC,MAAMlL,EAAMrxB,GAAK,gBACjB,GAAKqxB,GAAK,YAAc4K,EACvB,OAAO5K,CACT,CACD,CAGA,aAAa4K,EAAW,CACvB,MAAMN,EAAQ,KAAK,SAASM,CAAS,EAChC,CAAEN,GAAS,CAAEA,EAAM,YAAcA,EAAM,WAAW,OAGvDA,EAAM,QAAQ,CACf,CAGA,YAAYM,EAAW5wB,EAAWyjB,EAAQ,IAAKgO,EAAa,KAAQ,CACnE,MAAMnB,EAAQ,KAAK,SAASM,CAAS,EAErC,GAAKN,EAAQ,CACZ,MAAMxa,EAASwa,EAAM,WACrB,IAAIoB,EACG5b,EAEGA,EAAO,QAChB4b,EAAS,GACA,OAAO1xB,GAAc,WAC9B0xB,EAAS1xB,EAAU8V,CAAM,EAEzB4b,KAAS,OAAI1xB,EAAW8V,CAAM,IAAM,OANpC4b,EAAS,GAQL,CAAEA,GAAU,KAAK,IAAI,GAAKpB,EAAM,iBAAmB,IAAMmB,IAC7DnB,EAAM,gBAAkB,KAAK,IAAI,EAIjCA,EAAM,QAAQ,MAAQ,OAAO,OAAO,CAAC,EAAGA,EAAM,QAAQ,KAAK,EAEtD7M,IAAU,EACd6M,EAAM,QAAQ,EACL7M,EAAQ,GACjB,WAAW,IAAM,CAEhB6M,EAAM,QAAQ,CACf,EAAG7M,CAAK,EAEX,CAEA,OAAO6M,CACR,CAGA,aAAaM,EAAW5wB,EAAWyjB,EAAQ,IAAKgO,EAAa,KAAQ,CACpE,MAAMnB,EAAQ,KAAK,SAASM,CAAS,EACpC9a,EAASwa,GAASA,EAAM,WAEzB,GAAK,CAAEA,EACN,OAED,IAAIp7B,EAEJ,GAAK,EAAA4gB,IACC,OAAO9V,GAAc,WACzB9K,EAAM8K,EAAU8V,CAAM,EAEtB5gB,KAAM,OAAI8K,EAAW8V,CAAM,EAEvBA,EAAO,UAIb,OAAK5gB,IAAQ,QAAa,KAAK,IAAI,GAAKo7B,EAAM,iBAAmB,IAAMmB,IACtEnB,EAAM,gBAAkB,KAAK,IAAI,EAIjCA,EAAM,QAAQ,MAAQ,OAAO,OAAO,CAAC,EAAGA,EAAM,QAAQ,KAAK,EAEtD7M,IAAU,EACd6M,EAAM,QAAQ,EACL7M,EAAQ,GACjB,WAAW,IAAM6M,EAAM,QAAQ,EAAG7M,CAAK,GAGlCvuB,CACR,CAED,EApa2C,cAA5B,IAAMy8B,EAAN,C,sECvDf,IAAIC,EAAIC,EAAMlzB,EACVmzB,EAEJ,SAASC,GAAS,CACjB,OAAKH,EACG,QAAQ,QAAQA,CAAE,EAEnB,IAAI,QAAQ,CAAC,EAAEpzB,IAAM,CAC3B,GAAKG,EACJ,OAAOA,EAAQ,KAAK,CAAC,EAAEH,CAAC,CAAC,EAE1BG,EAAU,CAAC,CAAC,EAAEH,CAAC,CAAC,EAEhB,QAAQ,IAAI,CACX,qCACA,oCACD,CAAC,EAAE,KAAKiB,GAAW,CAClBmyB,EAAKnyB,EAAQ,CAAC,GAAG,QACjBoyB,EAAOpyB,EAAQ,CAAC,GAAG,QAEnB,MAAMuyB,EAASrzB,EACfA,EAAU,KAEV,UAAUC,KAAQozB,EACjBpzB,EAAK,CAAC,EAAEgzB,CAAE,CAEZ,CAAC,EAAE,MAAM58B,GAAO,CACf,MAAMg9B,EAASrzB,EACfA,EAAU,KAEV,UAAUC,KAAQozB,EACjBpzB,EAAK,CAAC,EAAE5J,CAAG,CACb,CAAC,CACF,CAAC,CACF,CA/BS,EAAA+8B,EAAA,UAkCT,SAASE,EAActG,EAAI,CAC1B,MAAMuG,EAAiBvG,EAAG,SAAS,MAAM,WAAa,KAAK,cAE3DA,EAAG,SAAS,MAAM,UAAY,SAASvhB,EAAQ5G,EAAK2uB,EAASC,EAAKC,EAAM,CACvE,MAAMnjB,EAAQ9E,EAAO5G,CAAG,EACxB,GAAK0L,GAASA,EAAM,OAAS,aAAe,MAAM,QAAQA,EAAM,KAAK,EAAI,CACxE,IAAIojB,EACJ,UAAUC,KAAQrjB,EAAM,MACvB,GAAKqjB,EAAK,CAAC,IAAM,OAAS,CACzBD,EAAOC,EAAK,CAAC,EACb,KACD,CAGD,GAAKD,EAAK,WAAW,GAAG,EAAI,CAC3B,IAAI9W,EAEJ,GAAK8W,IAAS,IAAM,CAEnB,IAAI36B,EAAI6L,EAAM,EACVpC,EAAO,CAAC,EAEZ,KAAMzJ,EAAIyS,EAAO,QAAQ,CACxB,MAAMooB,EAAMpoB,EAAOzS,CAAC,EACnB8V,EAAO+kB,GAAK,KACb,GAAK/kB,IAAS,OACbrM,EAAK,KAAKoxB,CAAG,UACJ/kB,IAAS,aAClB,MAED9V,GACD,CAEAyJ,EAAOA,EAAK,IAAI1B,GAAKA,EAAE,OAAO,EAAE,KAAK,EAAE,EAEvC8b,KADa,KAAWpa,CAAI,EAChB,IAAI1B,GAAKA,EAAE,GAAG,EAAE,KAAK,GAAG,CACrC,MACC8b,EAAO8W,EAAK,MAAM,CAAC,EAEpB,GAAK9W,GAAQA,EAAK,OAAS,CAC1B,UAAU+W,KAAQrjB,EAAM,MACvB,GAAKqjB,EAAK,CAAC,IAAM,QAAU,CAC1BA,EAAK,CAAC,EAAIA,EAAK,CAAC,EAAE,QAAQ,eAAgB,EAAE,EAC5C,KACD,CAGDrjB,EAAM,MAAM,KAAK,CAChB,qBACAsM,CACD,CAAC,EACDtM,EAAM,MAAM,KAAK,CAChB,UACA,uEACD,CAAC,CACF,CACD,CACD,CAEA,OAAOgjB,EAAe9nB,EAAQ5G,EAAK2uB,EAASC,EAAKC,CAAI,CACtD,CACD,CA7DS,EAAAJ,EAAA,iBA+DTA,EAAc,cAAgB,SAAS7nB,EAAQ5G,EAAK2uB,EAASC,EAAKC,EAAM,CACvE,OAAOA,EAAK,YAAYjoB,EAAQ5G,EAAK2uB,CAAO,CAC7C,EAEe,eAAeM,GAAU,CACvC,GAAK,CAAEX,EAAM,CACZ,MAAMF,EAAK,MAAMG,EAAO,EACxB,GAAK,CAAEH,EACN,OAAO,KAER,MAAMjG,EAAKmG,EAAM,IAAIF,EAAG,CACvB,KAAM,GACN,QAAS,EACV,CAAC,EAEDjG,EAAG,IAAIsG,CAAa,EACpBtG,EAAG,IAAIkG,EAAM,CACZ,MAAO,CACN,MAAO,cACP,OAAQ,SACR,IAAK,WACL,oBAAqB,MACtB,CACD,CAAC,CACF,CAEA,OAAOC,CACR,CAvB8B,EAAAW,EAAA,WAyBvB,SAASC,EAAMC,EAAU,CAC/B,GAAKb,EACJ,OAAOA,EAEHa,GACJF,EAAQ,EAAE,KAAK9G,GAAMgH,EAAShH,CAAE,CAAC,CACnC,CANgB,EAAA+G,EAAA,Q,4ECxFD,MAAM,EAAN,MAAM,UAAiB,mCAAM,KAAC,CAc5C,YAAYl9B,EAAeqB,EAAwB,CAClD,MAAMrB,EAAMqB,CAAM,EAZnB,cAA4B,KAC5B,UAAiB,KACjB,UAAa,KAYZ,KAAK,cAAgB,GAErB,KAAK,OAAO,UAAU,EACtB,KAAK,OAAO,WAAW,EACvB,KAAK,OAAO,MAAM,EAElB,KAAK,kBAAoB,KAAK,KAAK,OAClC,qBACAyE,GACEA,EAAmB,OAAO,WAC1BA,EAAmB,MAAM,MAC5B,EAEA,KAAK,uBAAyB,KAAK,KAAK,OACvC,2BACAA,GACEA,EAAwB,OAAO,MAC/BA,EAAwB,OAAO,SAC/BA,EAAwB,OAAO,UAC/BA,EAAwB,uBAC3B,EAEA,KAAK,UAAY,IAAI,GAEtB,CAEA,UAAW,CACV,KAAK,SAAS,WAAW,wBAAyB3G,GAAO,CACxD,KAAK,OAAO,4BAA6BA,CAAG,CAC7C,CAAC,EAED,KAAK,SAAS,WAAW,mBAAoBA,GAAO,CACnD,KAAK,OAAO,gCAAiCA,CAAG,CACjD,CAAC,EAED,KAAK,uBAAuB,MAAM,CAACqE,EAAKC,IAAc,CACrD,KAAK,IAAI,MAAM,yCAAyC,EAExD,MAAMI,EAAI,KACT+2B,EAAQp3B,EAAI,UACZkM,EAAakrB,EAAM,OAEpBA,EAAM,OAAS,UAAW,CACzB,GAAI,CACH,MAAM3iB,EAAO,KAAK,MAAM,KACxB,GAAKpU,EAAE,UAAU,IAAIoU,CAAI,GAAK,CAAEpU,EAAE,aAAaoU,CAAI,EAClD,OAAO,IACT,OAAQzY,EAAK,CAEZ,QAAQ,MAAMA,CAAG,CAClB,CAEA,OAAOkQ,EAAW,KAAK,IAAI,CAC5B,EAEA,KAAK,uBAAuB,gBAAgB,CAC7C,CAAC,EAED,KAAK,kBAAkB,MAAM,CAAClM,EAAKC,IAAc,CAChD,KAAK,IAAI,MAAM,mCAAmC,EAElD,MAAMI,EAAI,KACT+2B,EAAQp3B,EAAI,UACZkM,EAAakrB,EAAM,OAEpBA,EAAM,OAAS,UAAW,CACzB,GAAI,CACH,MAAM3iB,EAAO,KAAK,MAAM,UACxB,GAAKpU,EAAE,UAAU,IAAIoU,CAAI,GAAK,KAAK,MAAQ,CAC1C,IAAImlB,EAAM,KAAK,MAAM,UACrB,GAAK,OAAOA,GAAQ,YAAc,CAAGA,EAAY,WAAa,CAC7D,MAAMvrB,EAAQhO,EAAE,KAAK,SAAS,EAC7BiO,EAAgBD,GAASA,EAAM,cAEhC,GAAKC,EAAgB,CACpB,GAAK,CAAGsrB,EAAY,WAAa,CAEhC,IAASC,EAAT,WAAoB3sB,EAAY,CAC/B,OAAK7M,EAAE,aAAay5B,EAAG,MAAM,SAAS,EAC9BxrB,EAAcsrB,EAAK1sB,CAAK,EACzB,IACR,EAJA,cADA,MAAM4sB,EAAK,KAOXD,EAAW,WAAa,GACxBA,EAAW,YAAc,cAAc,KAAK,MAAM,SAAS,IAC1DD,EAAY,WAAaC,CAC3B,CAEA,KAAK,MAAM,UAAaD,EAAY,UACrC,CACD,CACD,CACD,OAAQ59B,EAAK,CAEZ,QAAQ,MAAMA,CAAG,CAClB,CAEA,OAAOkQ,EAAW,KAAK,IAAI,CAC5B,EAEA,KAAK,kBAAkB,gBAAgB,CACxC,CAAC,CACF,CAEA,OAAO0tB,EAAa/4B,EAAwB,KAAM,CACjD,MAAMk5B,EAAW,KAAK,UAAU,IAAIH,CAAG,GAAK,GAEvC/4B,GAAS,KACbA,EAAQ,CAAEk5B,EAEVl5B,EAAQ,CAAC,CAAEA,EAEPA,IAAUk5B,IACd,KAAK,UAAU,IAAIH,EAAK/4B,CAAK,EAC7B,KAAK,OAAO+4B,CAAG,EAEjB,CAEA,OAAOA,EAAa,CACnB,UAAU/5B,KAAQ,KAAK,kBAAkB,UAAW,CACnD,MAAM4U,EAAO5U,EAAK,OAAO,UACpB4U,GAAQA,IAASmlB,GACrB/5B,EAAK,YAAY,CACnB,CAEA,UAAUA,KAAQ,KAAK,uBAAuB,UAAW,CACxD,MAAMrD,EAAOqD,EAAK,OAAO,KACpBrD,GAAQA,IAASo9B,GACrB/5B,EAAK,YAAY,CACnB,CACD,CAEA,aAAa+5B,EAAa,CACzB,OAAO,KAAK,UAAU,IAAIA,CAAG,GAAK,EACnC,CAED,EAzJ6C,gBAA9B,IAAMI,EAAN,C,uFCPA,MAAM,EAAN,MAAM,UAAkB,mCAAM,KAAC,CAU7C,YAAYx9B,EAAeqB,EAAwB,CAClD,MAAMrB,EAAMqB,CAAM,EARnB,UAA2B,KAC3B,UAAa,KACb,cAA4B,KAQ3B,KAAK,cAAgB,GAErB,KAAK,OAAO,MAAM,EAClB,KAAK,OAAO,UAAU,EACtB,KAAK,OAAO,WAAW,EAEvB,KAAK,SAAS,IAAI,0BAA2B,CAC5C,QAAS,GAET,GAAI,CACH,KAAM,qCACN,MAAO,sBACP,YAAa,8FACb,UAAW,mBACZ,EAEA,QAAS,IAAM,KAAK,UAAU,YAAY,CAC3C,CAAC,EAED,KAAK,UAAY,KAAK,KAAK,OAC1B,aACAyE,GACEA,EAAoB,qBACpBA,EAAoB,aACtB,CAAC,OAAQ,YAAa,aAAc,YAAa,QAAS,cAAe,aAAc,mBAAoB,cAAe,iBAAkB,gBAAgB,CAC7J,CACD,CAEA,UAAW,CACV,KAAK,SAAS,GAAG,gCAAiC,IACjD,KAAK,UAAU,YAAY,CAAC,EAE7B,KAAK,UAAU,MAAM,CAACtC,EAAKC,IAAc,CACxC,UAAUJ,KAAQI,EACjB,KAAK,gBAAgBJ,CAAI,CAC3B,CAAC,EAED,KAAK,UAAU,GAAG,QAAS,KAAK,gBAAiB,IAAI,EACrD,KAAK,UAAU,GAAG,SAAU,KAAK,gBAAiB,IAAI,CACvD,CAGA,gBAAgBA,EAAqB,CACpC,MAAMP,EAAY,KAAK,KAAK,aAA0BO,CAAI,EACzDwC,EAAM/C,GAAW,cAAc,0CAA0C,EAC1E,GAAK,CAAE+C,EACN,OAED,MAAM6K,EAAQrN,EAAK,MAClB/D,EAAOoR,EAAM,MAAQA,EAAM,KAAK,KAChCmsB,EAAOv9B,GAAQA,EAAK,KACpBm+B,EAAc,KAAK,SAAS,IAAI,yBAAyB,GAAKZ,GAAQA,EAAK,mBAAqB,CAAEA,EAAK,oBAEvGz5B,EAAOyC,EAAI,cAAc,iBAAiB,EAE3C,GAAK43B,GAAe,CAAEr6B,EACrByC,EAAI,gBAAa,iBAAC,QAAK,MAAM,2DAC5B,iBAAC,UACA,MAAM,0BACN,aAAY,KAAK,KAAK,EAAE,mBAAoB,gDAAgD,EAC7F,CACD,EAASA,EAAI,iBAAiB,EAE9BA,EAAI,eAAY,iBAAC,QAAK,MAAM,iBAAkB,EAAE,UAErC,CAAE43B,GAAer6B,EAAO,CACnCA,EAAK,OAAO,EACZ,MAAMs6B,EAAO73B,EAAI,cAAc,kBAAkB,EAC5C63B,GACJA,EAAK,OAAO,CACd,CACD,CACD,EArF8C,iBAA/B,IAAMC,EAAN,C,qIClCR,SAASC,EAAQ1X,EAAW0V,EAAW/3B,EAAW,CAGxD,OAFKA,EAAI,IAAIA,GAAK,GACbA,EAAI,IAAIA,GAAK,GACbA,EAAI,EAAE,EACHqiB,GAAK0V,EAAE1V,GAAK,EAAIriB,EACnBA,EAAI,EAAE,EACH+3B,EACH/3B,EAAI,EAAE,EACHqiB,GAAK0V,EAAE1V,IAAM,EAAE,EAAIriB,GAAK,EACzBqiB,CACR,CAVgB,EAAA0X,EAAA,WAYT,SAASC,EAAW9sB,EAAiB,CAM3C,OAAQA,GAAW,OAAWA,EAAU,MAAQ,KAAK,KAAKA,EAAU,MAAS,MAAO,GAAG,CACxF,CAPgB,EAAA8sB,EAAA,cAST,SAASC,EAAW/sB,EAAiB,CAK3C,OAAQA,GAAW,SAAaA,EAAU,MAAQ,KAAK,IAAI,MAAQA,EAAS,EAAE,GAAG,EAAI,IACtF,CANgB,EAAA+sB,EAAA,cAuBhB,MAAM,EAAN,MAAM,CAA+B,CAOpC,YAAYv+B,EAAWw+B,EAAW3jB,EAAWtJ,EAAY,CACxD,KAAK,EAAIvR,GAAK,EACd,KAAK,EAAIw+B,GAAK,EACd,KAAK,EAAI3jB,GAAK,EACd,KAAK,EAAItJ,GAAK,CACf,CAEA,GAAGktB,EAA0BC,EAAc,GAAgB,CAC1D,OAAKD,aAAiB,EACd,KAAK,IAAMA,EAAM,GAAK,KAAK,IAAMA,EAAM,GAAK,KAAK,IAAMA,EAAM,IAAMC,GAAe,KAAK,IAAMD,EAAM,GACpGA,EAAQ,KAAK,GAAGA,EAAM,OAAO,EAAGC,CAAW,EAAI,EACvD,CAMA,GAAG1+B,EAAW,CAAE,OAAO,IAAI,EAAUA,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACjE,GAAGw+B,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAGA,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACjE,GAAG3jB,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAG,KAAK,EAAGA,EAAG,KAAK,CAAC,CAAG,CACjE,GAAGtJ,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAG,KAAK,EAAG,KAAK,EAAGA,CAAC,CAAG,CAMjE,OAAO,SAAS9Q,EAAc,CAC7B,MAAMd,EAAMg/B,EAAM,WAAW,EAC7Bh/B,EAAI,UAAU,EAAG,EAAG,EAAG,CAAC,EACxBA,EAAI,UAAYc,EAChBd,EAAI,SAAS,EAAG,EAAG,EAAG,CAAC,EACvB,MAAMI,EAAOJ,EAAI,aAAa,EAAG,EAAG,EAAG,CAAC,EACxC,OAAKI,GAAM,MAAM,SAAW,EACpB,KAED,IAAI,EAAUA,EAAK,KAAK,CAAC,EAAGA,EAAK,KAAK,CAAC,EAAGA,EAAK,KAAK,CAAC,EAAGA,EAAK,KAAK,CAAC,EAAI,GAAG,CAClF,CAEA,OAAO,QAAQ8G,EAAe,CAE7B,OADAA,EAAQA,GAASA,EAAM,KAAK,EACrBA,GAAO,OAGTA,EAAM,OAAO,CAAC,IAAM,IACjB,EAAU,QAAQA,CAAK,EA0CxB,EAAU,SAASA,CAAK,EA7CvB,IA8CT,CAEA,OAAO,QAAQA,EAAe,CACxBA,EAAM,OAAO,CAAC,IAAM,MACxBA,EAAQA,EAAM,MAAM,CAAC,GAEtB,IAAIvG,EACAo4B,EAAgB,IAEpB,OAAK7xB,EAAM,SAAW,GACrB6xB,EAAQ,SAAS7xB,EAAM,CAAC,EAAG,EAAE,EAAI,GACjCA,EAAQA,EAAM,MAAM,EAAG,CAAC,GACbA,EAAM,SAAW,IAC5B6xB,EAAQ,SAAS7xB,EAAM,MAAM,CAAC,EAAG,EAAE,EACnCA,EAAQA,EAAM,MAAM,EAAG,CAAC,GAGpBA,EAAM,SAAW,EACrBvG,GACG,SAASuG,EAAM,CAAC,EAAG,EAAE,EAAI,IAAO,KAChC,SAASA,EAAM,CAAC,EAAG,EAAE,EAAI,IAAO,GAClC,SAASA,EAAM,CAAC,EAAG,EAAE,EAAI,GAG1BvG,EAAM,SAASuG,EAAO,EAAE,EAElB,IAAI,EACTvG,GAAO,GACPA,GAAO,EAAI,IACXA,EAAM,IACPo4B,EAAQ,GACT,CACD,CAEA,OAAO,SAAS,EAAWlvB,EAAW6hB,EAAW9Z,EAAY,CAC5D,IAAIvR,EAAWw+B,EAAW3jB,EAE1B,MAAMjY,EAAI,KAAK,MAAM,EAAI,CAAC,EACzB6G,EAAI,EAAI,EAAI7G,EACZ+jB,GAAI0E,GAAK,EAAI7hB,GACb6yB,GAAIhR,GAAK,EAAI5hB,EAAID,GACjBlF,GAAI+mB,GAAK,GAAK,EAAI5hB,GAAKD,GAExB,OAAO5G,EAAI,EAAG,CACb,IAAK,GAAG5C,EAAIqrB,EAAGmT,EAAIl6B,GAAGuW,EAAI8L,GAAG,MAC7B,IAAK,GAAG3mB,EAAIq8B,GAAGmC,EAAInT,EAAGxQ,EAAI8L,GAAG,MAC7B,IAAK,GAAG3mB,EAAI2mB,GAAG6X,EAAInT,EAAGxQ,EAAIvW,GAAG,MAC7B,IAAK,GAAGtE,EAAI2mB,GAAG6X,EAAInC,GAAGxhB,EAAIwQ,EAAG,MAC7B,IAAK,GAAGrrB,EAAIsE,GAAGk6B,EAAI7X,GAAG9L,EAAIwQ,EAAG,MAC7B,QACCrrB,EAAIqrB,EAAGmT,EAAI7X,GAAG9L,EAAIwhB,EACpB,CAEA,OAAO,IAAI,EACV,KAAK,MAAM,KAAK,IAAI,KAAK,IAAI,EAAGr8B,EAAE,GAAG,EAAG,GAAG,CAAC,EAC5C,KAAK,MAAM,KAAK,IAAI,KAAK,IAAI,EAAGw+B,EAAE,GAAG,EAAG,GAAG,CAAC,EAC5C,KAAK,MAAM,KAAK,IAAI,KAAK,IAAI,EAAG3jB,EAAE,GAAG,EAAG,GAAG,CAAC,EAC5CtJ,IAAM,OAAY,EAAIA,CACvB,CACD,CAEA,OAAO,SAAS,EAAW/H,EAAWo1B,EAAWrtB,EAAY,CAC5D,GAAK/H,IAAM,EAAI,CACd,MAAM6hB,EAAI,KAAK,MAAM,KAAK,IAAI,KAAK,IAAI,EAAG,IAAIuT,CAAC,EAAG,GAAG,CAAC,EACtD,OAAO,IAAI,EAAUvT,EAAGA,EAAGA,EAAG9Z,IAAM,OAAY,EAAIA,CAAC,CACtD,CAEA,MAAM8qB,EAAIuC,EAAI,GAAMA,GAAK,EAAIp1B,GAAKo1B,EAAIp1B,EAAIo1B,EAAIp1B,EAC7Cmd,EAAI,EAAIiY,EAAIvC,EAEb,OAAO,IAAI,EACV,KAAK,MAAM,KAAK,IAAI,KAAK,IAAI,EAAG,IAAMgC,EAAQ1X,EAAG0V,EAAG,EAAI,EAAE,CAAC,CAAC,EAAG,GAAG,CAAC,EACnE,KAAK,MAAM,KAAK,IAAI,KAAK,IAAI,EAAG,IAAMgC,EAAQ1X,EAAG0V,EAAG,CAAC,CAAC,EAAG,GAAG,CAAC,EAC7D,KAAK,MAAM,KAAK,IAAI,KAAK,IAAI,EAAG,IAAMgC,EAAQ1X,EAAG0V,EAAG,EAAI,EAAE,CAAC,CAAC,EAAG,GAAG,CAAC,EACnE9qB,IAAM,OAAY,EAAIA,CACvB,CACD,CAEA,OAAO,SAAS5G,EAAWk0B,EAAW,EAAWttB,EAAY,CAC5D,MAAMutB,EAAK,SAAWn0B,EAAI,QAAWk0B,EAAI,QAAW,EACnDE,EAAI,SAAYp0B,EAAI,SAAWk0B,EAAI,QAAW,EAC9CG,EAAK,QAAWr0B,EAAI,QAAWk0B,EAAI,SAAW,EAG/C,OAAO,IAAI,EACV,KAAK,IAAI,EAAG,KAAK,IAAI,IAAK,IAAMN,EAAWO,CAAC,CAAC,CAAC,EAC9C,KAAK,IAAI,EAAG,KAAK,IAAI,IAAK,IAAMP,EAAWQ,CAAC,CAAC,CAAC,EAC9C,KAAK,IAAI,EAAG,KAAK,IAAI,IAAK,IAAMR,EAAWS,CAAC,CAAC,CAAC,EAC9CztB,IAAM,OAAY,EAAIA,CACvB,CACD,CAOA,OAAQ,CACP,OAAK,KAAK,IAAM,EACR,QAAQ,KAAK,CAAC,IAAI,KAAK,CAAC,IAAI,KAAK,CAAC,IAAI,KAAK,CAAC,IAC7C,KAAK,MAAM,CACnB,CAEA,OAAQ,CAEP,MAAO,MADQ,KAAK,MAAM,KAAK,CAAC,GAAK,KAAO,KAAK,MAAM,KAAK,CAAC,GAAK,GAAK,KAAK,MAAM,KAAK,CAAC,GACvE,SAAS,EAAE,EAAE,SAAS,EAAG,GAAG,CAAC,EAC/C,CAGA,QAAS,CAAE,OAAO,IAAM,CACxB,QAAS,CAAE,OAAO0tB,EAAU,SAAS,KAAK,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACtE,QAAS,CAAE,OAAOC,EAAU,SAAS,KAAK,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACtE,QAAS,CAAE,OAAOC,EAAU,SAAS,KAAK,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACtE,QAAS,CAAE,OAAO,KAAK,OAAO,EAAE,OAAO,CAAG,CAM1C,OAAQ,CACP,OAAS,KAAQ,KAAK,EAAO,KAAQ,KAAK,EAAO,KAAQ,KAAK,GAAM,GACrE,CAEA,WAAY,CACX,MAAMn/B,EAAIs+B,EAAW,KAAK,EAAI,GAAG,EAChCE,EAAIF,EAAW,KAAK,EAAI,GAAG,EAC3BzjB,EAAIyjB,EAAW,KAAK,EAAI,GAAG,EAE5B,MAAQ,OAASt+B,EAAM,MAASw+B,EAAM,MAAS3jB,CAChD,CAGA,SAASlV,EAAiB,CACzB,OAAAA,EAAS,OAAOA,GAAW,SAAWA,EAAS,EAC/CA,EAAS,KAAK,MAAM,KAAOA,EAAS,IAAI,EAEjC,IAAI,EACV,KAAK,IAAI,EAAG,KAAK,IAAI,IAAK,KAAK,EAAIA,CAAM,CAAC,EAC1C,KAAK,IAAI,EAAG,KAAK,IAAI,IAAK,KAAK,EAAIA,CAAM,CAAC,EAC1C,KAAK,IAAI,EAAG,KAAK,IAAI,IAAK,KAAK,EAAIA,CAAM,CAAC,EAC1C,KAAK,CACN,CACD,CAEA,UAAU+S,EAA0B,CACnC,IAAI0mB,EACJ,GAAK,OAAO1mB,GAAS,SACpB,GAAKimB,EAAM,UAAU,eAAejmB,CAAI,EACvC0mB,EAAMT,EAAM,UAAUjmB,CAAI,MAE1B,OAAM,IAAI,MAAM,oBAAoB,OAErC0mB,EAAM1mB,EAEP,MAAM2mB,EAAQD,EAAI,CAAC,EAAGE,EAAQF,EAAI,CAAC,EAAGG,EAAQH,EAAI,CAAC,EAClDI,EAAQJ,EAAI,CAAC,EAAGK,EAAQL,EAAI,CAAC,EAAGM,EAAQN,EAAI,CAAC,EAC7CO,EAAQP,EAAI,CAAC,EAAGQ,GAAQR,EAAI,CAAC,EAAGS,GAAQT,EAAI,CAAC,EAKxCU,GAAK,QAAU,KAAK,EAAM,QAAU,KAAK,EAAM,QAAU,KAAK,EACnEC,GAAK,QAAU,KAAK,EAAM,QAAU,KAAK,EAAM,QAAU,KAAK,EAC9DC,GAAK,SAAY,KAAK,EAAM,QAAW,KAAK,EAAM,QAAU,KAAK,EAG5DpB,GAAKS,EAAQS,GAAMR,EAAQS,GAAMR,EAAQS,GAC9ClzB,EAAK0yB,EAAQM,GAAML,EAAQM,GAAML,EAAQM,GACzCx2B,EAAKm2B,EAAQG,GAAMF,GAAQG,GAAMF,GAAQG,GAG1C,IAAIlB,EAAK,YAAeF,GAAM,YAAe9xB,EAAM,WAActD,EAChEu1B,GAAK,aAAgBH,GAAM,YAAe9xB,EAAM,YAAetD,EAC/Dw1B,GAAK,eAAkBJ,GAAM,cAAiB9xB,EAAM,WAActD,EAGnEs1B,EAAI,KAAK,EAAIA,EACbC,GAAI,KAAK,EAAIA,GACbC,GAAI,KAAK,EAAIA,GAGb,MAAMiB,GAAM,EAAMnB,EAAM,EAAMC,GAAM,EAAMC,GACzCkB,GAAM,GAAMpB,EAAM,EAAMC,GAAM,EAAMC,GACpCmB,GAAM,GAAMrB,EAAM,EAAMC,GAAM,EAAMC,GAGrC,OAAAF,EAAI,KAAK,IAAI,KAAK,IAAI,EAAGmB,GAAK,KAAK,CAAC,EAAG,GAAG,EAC1ClB,GAAI,KAAK,IAAI,KAAK,IAAI,EAAGmB,GAAK,KAAK,CAAC,EAAG,GAAG,EAC1ClB,GAAI,KAAK,IAAI,KAAK,IAAI,EAAGmB,GAAK,KAAK,CAAC,EAAG,GAAG,EAEnC,IAAI,EAAUrB,EAAGC,GAAGC,GAAG,KAAK,CAAC,CACrC,CAED,EA/RqC,iBAArC,IAAMoB,EAAN,EAkSA,MAAM,EAAN,MAAM,CAA+B,CAOpC,YAAY,EAAW52B,EAAW6hB,EAAW9Z,EAAY,CACxD,KAAK,EAAI,GAAK,EACd,KAAK,EAAI/H,GAAK,EACd,KAAK,EAAI6hB,GAAK,EACd,KAAK,EAAI9Z,GAAK,CACf,CAEA,GAAGktB,EAA0BC,EAAc,GAAgB,CAC1D,OAAKD,aAAiB,EACd,KAAK,IAAMA,EAAM,GAAK,KAAK,IAAMA,EAAM,GAAK,KAAK,IAAMA,EAAM,IAAMC,GAAe,KAAK,IAAMD,EAAM,GACpGA,EAAQ,KAAK,GAAGA,EAAM,OAAO,EAAGC,CAAW,EAAI,EACvD,CAMA,GAAG,EAAW,CAAE,OAAO,IAAI,EAAU,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACjE,GAAGl1B,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAGA,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACjE,GAAG6hB,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAG,KAAK,EAAGA,EAAG,KAAK,CAAC,CAAG,CACjE,GAAG9Z,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAG,KAAK,EAAG,KAAK,EAAGA,CAAC,CAAG,CAMjE,OAAO,SAASvR,EAAWw+B,EAAW3jB,EAAWtJ,EAAY,CAC5DvR,GAAK,IAAKw+B,GAAK,IAAK3jB,GAAK,IAEzB,MAAM7W,EAAM,KAAK,IAAIhE,EAAGw+B,EAAG3jB,CAAC,EAC3B9W,EAAM,KAAK,IAAI/D,EAAGw+B,EAAG3jB,CAAC,EACtBhY,EAAI,KAAK,IAAI,KAAK,IAAI,EAAGmB,EAAMD,CAAG,EAAG,CAAC,EAEtCyF,EAAIxF,IAAQ,EAAI,EAAInB,EAAImB,EACxBqnB,EAAIrnB,EAEL,IAAIsjB,GAEJ,GAAKzkB,IAAM,EACVykB,GAAI,MACA,CACJ,OAAOtjB,EAAK,CACX,KAAKhE,EACJsnB,IAAKkX,EAAI3jB,GAAKhY,GAAK27B,EAAI3jB,EAAI,EAAI,GAC/B,MACD,KAAK2jB,EACJlX,IAAKzM,EAAI7a,GAAK6C,EAAI,EAClB,MACD,QACCykB,IAAKtnB,EAAIw+B,GAAK37B,EAAI,CACpB,CACAykB,IAAK,CACN,CAEA,OAAO,IAAI,EACVA,GACA9d,EACA6hB,EACA9Z,IAAM,OAAY,EAAIA,CACvB,CACD,CAMA,OAAQ,CAAE,OAAO,KAAK,OAAO,EAAE,MAAM,CAAG,CACxC,OAAQ,CAAE,OAAO,KAAK,OAAO,EAAE,MAAM,CAAG,CAExC,QAAS,CAAE,OAAO6uB,EAAU,SAAS,KAAK,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACtE,QAAS,CAAE,OAAO,IAAM,CACxB,QAAS,CAAE,OAAO,KAAK,OAAO,EAAE,OAAO,CAAG,CAC1C,QAAS,CAAE,OAAO,KAAK,OAAO,EAAE,OAAO,CAAG,CAC1C,QAAS,CAAE,OAAO,KAAK,OAAO,EAAE,OAAO,CAAG,CAE3C,EAlFqC,iBAArC,IAAMnB,EAAN,EAqFA,MAAM,EAAN,MAAM,CAA+B,CAOpC,YAAY,EAAWz1B,EAAWo1B,EAAWrtB,EAAY,CACxD,KAAK,EAAI,GAAK,EACd,KAAK,EAAI/H,GAAK,EACd,KAAK,EAAIo1B,GAAK,EACd,KAAK,EAAIrtB,GAAK,CACf,CAEA,GAAGktB,EAA0BC,EAAc,GAAgB,CAC1D,OAAKD,aAAiB,EACd,KAAK,IAAMA,EAAM,GAAK,KAAK,IAAMA,EAAM,GAAK,KAAK,IAAMA,EAAM,IAAMC,GAAe,KAAK,IAAMD,EAAM,GACpGA,EAAQ,KAAK,GAAGA,EAAM,OAAO,EAAGC,CAAW,EAAI,EACvD,CAMA,GAAG,EAAW,CAAE,OAAO,IAAI,EAAU,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACjE,GAAGl1B,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAGA,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACjE,GAAGo1B,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAG,KAAK,EAAGA,EAAG,KAAK,CAAC,CAAG,CACjE,GAAGrtB,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAG,KAAK,EAAG,KAAK,EAAGA,CAAC,CAAG,CAMjE,OAAO,SAASvR,EAAWw+B,EAAW3jB,EAAWtJ,EAAY,CAC5DvR,GAAK,IAAKw+B,GAAK,IAAK3jB,GAAK,IAEzB,MAAM7W,EAAM,KAAK,IAAIhE,EAAEw+B,EAAE3jB,CAAC,EACzB9W,EAAM,KAAK,IAAI/D,EAAEw+B,EAAE3jB,CAAC,EAEpB+jB,EAAI,KAAK,IAAI,KAAK,IAAI,GAAI56B,EAAID,GAAO,CAAC,EAAG,CAAC,EAC1ClB,EAAI,KAAK,IAAI,KAAK,IAAI,EAAGmB,EAAMD,CAAG,EAAG,CAAC,EAEvC,IAAIujB,EAAG9d,GAEP,GAAK3G,IAAM,EACVykB,EAAI9d,GAAI,MACJ,CAEJ,OADAA,GAAIo1B,EAAI,GAAM/7B,GAAK,EAAImB,EAAMD,GAAOlB,GAAKmB,EAAMD,GACxCC,EAAK,CACX,KAAKhE,EACJsnB,GAAKkX,EAAI3jB,GAAKhY,GAAK27B,EAAI3jB,EAAI,EAAI,GAC/B,MACD,KAAK2jB,EACJlX,GAAKzM,EAAI7a,GAAK6C,EAAI,EAClB,MACD,QACCykB,GAAKtnB,EAAIw+B,GAAK37B,EAAI,CACpB,CACAykB,GAAK,CACN,CAEA,OAAO,IAAI,EAAUA,EAAG9d,GAAGo1B,EAAGrtB,IAAM,OAAY,EAAIA,CAAC,CACtD,CAOA,OAAQ,CACP,MAAMA,EAAI,KAAK,EACf,MAAO,MAAMA,IAAM,EAAI,IAAM,EAAE,IAAI,KAAK,MAAM,KAAK,EAAE,GAAG,CAAC,IAAI,KAAK,MAAM,KAAK,EAAE,GAAG,CAAC,KAAK,KAAK,MAAM,KAAK,EAAE,GAAG,CAAC,IAAIA,IAAM,EAAI,IAAI,KAAK,CAAC,GAAK,EAAE,GAC9I,CAEA,OAAQ,CAAE,OAAO,KAAK,OAAO,EAAE,MAAM,CAAG,CAExC,QAAS,CAAE,OAAO6uB,EAAU,SAAS,KAAK,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACtE,QAAS,CAAE,OAAO,IAAM,CACxB,QAAS,CAAE,OAAO,KAAK,OAAO,EAAE,OAAO,CAAG,CAC1C,QAAS,CAAE,OAAO,KAAK,OAAO,EAAE,OAAO,CAAG,CAC1C,QAAS,CAAE,OAAO,KAAK,OAAO,EAAE,OAAO,CAAG,CAM1C,gBAAgBx8B,EAAgB,CAC/B,IAAI4F,EAAI,KAAK,EACZzF,EAAM,EACNC,EAAM,EAEPwF,GAAK,KAAK,IAAI,KAAK,EAAI,GAAM,CAAC,KAAK,EAAI,KAAK,EAAI,EAAG,CAAC,EAAI,EAExD,IAAI3G,GAAKmB,EAAMD,GAAO,EACrBs8B,EAAMt8B,EAAMlB,EAEb,KAAOA,EAAI,EAAE,MAAOA,GAAK,EAAGw9B,EAAMt8B,EAAMlB,EACrBu9B,EAAU,SAAS,KAAK,EAAG52B,EAAG62B,EAAK,CAAC,EAAE,UAAU,EAClDz8B,EACfI,EAAMq8B,EAENt8B,EAAMs8B,EAIR,OAAO,IAAI,EAAU,KAAK,EAAG72B,EAAG62B,EAAK,KAAK,CAAC,CAC5C,CAGD,EA7GqC,iBAArC,IAAMnB,EAAN,EAgHA,MAAM,GAAN,OAAqC,CAOpC,YAAYv0B,EAAWk0B,EAAW,EAAWttB,EAAY,CACxD,KAAK,EAAI5G,GAAK,EACd,KAAK,EAAIk0B,GAAK,EACd,KAAK,EAAI,GAAK,EACd,KAAK,EAAIttB,GAAK,CACf,CAEA,GAAGktB,EAAmBC,EAAc,GAAgB,CACnD,OAAKD,aAAiB,EACd,KAAK,IAAMA,EAAM,GAAK,KAAK,IAAMA,EAAM,GAAK,KAAK,IAAMA,EAAM,IAAMC,GAAe,KAAK,IAAMD,EAAM,GACpGA,EAAQ,KAAK,GAAGA,EAAM,OAAO,EAAGC,CAAW,EAAI,EACvD,CAMA,GAAG/zB,EAAW,CAAE,OAAO,IAAI,EAAUA,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACjE,GAAGk0B,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAGA,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACjE,GAAGyB,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAG,KAAK,EAAGA,EAAG,KAAK,CAAC,CAAG,CACjE,GAAG/uB,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAG,KAAK,EAAG,KAAK,EAAGA,CAAC,CAAG,CAUjE,OAAO,SAASvR,EAAWw+B,EAAW3jB,EAAWtJ,EAAY,CAC5D,MAAMutB,EAAIR,EAAWt+B,EAAI,GAAG,EAC3B++B,EAAIT,EAAWE,EAAI,GAAG,EACtBQ,EAAIV,EAAWzjB,EAAI,GAAG,EAEvB,OAAO,IAAI,EACV,QAAWikB,EAAI,OAAWC,EAAI,QAAWC,EACzC,QAAWF,EAAI,OAAWC,EAAI,QAAWC,EACzC,QAAWF,EAAI,QAAWC,EAAI,QAAWC,EACzCztB,IAAM,OAAY,EAAIA,CACvB,CACD,CAEA,OAAO,SAASqtB,EAAWjoB,EAAW0U,EAAWqN,EAAgB,CAChE,MAAM6H,EAAmB,GAAK,EAAU,MAAM,EAAI,GAAK,EAAU,MAAM,EAAI,EAAI,EAAU,MAAM,GAC9FC,EAAc,EAAI,EAAU,MAAM,EAAID,EACtCE,EAAc,EAAI,EAAU,MAAM,EAAIF,EAGjCG,EAAK9B,EAAI,EAAK,KAAK,KAAKA,EAAI,IAAM,IAAK,CAAC,EAAIA,EAAI,EAAU,MAC/DrtB,EAAI,EAAE,GAAO,GAAKqtB,GAAMjoB,EAAI,GAAKioB,EAAI4B,GAAgB,GACrD3lB,GAAI,GAAK6lB,EACTn1B,GAAI,GAAG,EACP1I,GAAI69B,GAAO,GAAK9B,GAAMvT,EAAI,GAAKuT,EAAI6B,GAAgB,GAEnDE,IAAK99B,GAAIgY,KAAMtJ,EAAIhG,IACnBq1B,GAAID,GAAIpvB,EAAIsJ,GAEb,OAAO,IAAI,EAAU8lB,GAAGD,EAAGE,GAAGlI,IAAU,OAAY,EAAIA,CAAK,CAC9D,CAMA,OAAQ,CAAE,OAAO,KAAK,OAAO,EAAE,MAAM,CAAG,CACxC,OAAQ,CAAE,OAAO,KAAK,OAAO,EAAE,MAAM,CAAG,CAExC,QAAS,CAAE,OAAO0H,EAAU,SAAS,KAAK,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACtE,QAAS,CAAE,OAAO,KAAK,OAAO,EAAE,OAAO,CAAG,CAC1C,QAAS,CAAE,OAAO,KAAK,OAAO,EAAE,OAAO,CAAG,CAC1C,QAAS,CAAE,OAAO,IAAM,CACxB,QAAS,CAAE,OAAOS,EAAU,SAAS,KAAK,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACvE,EAhFqC,mBAArC,GAAM,EAiCE,QAAU,KAAK,IAAI,EAAI,GAAI,CAAC,EAjC9B,EAkCE,MAAQ,KAAK,IAAI,GAAK,EAAG,CAAC,EAlC5B,EAmCE,MAAQ,KAnChB,IAAM1B,EAAN,EAmFAA,EAAU,MAAQ,IAAIiB,EAAU,IAAI,IAAI,IAAI,CAAC,EAAE,OAAO,EAGtD,MAAM,EAAN,MAAM,CAA+B,CAOpC,YAAYxB,EAAWjoB,EAAW0U,EAAW9Z,EAAY,CACxD,KAAK,EAAIqtB,GAAK,EACd,KAAK,EAAIjoB,GAAK,EACd,KAAK,EAAI0U,GAAK,EACd,KAAK,EAAI9Z,GAAK,CACf,CAEA,GAAGktB,EAA0BC,EAAc,GAAgB,CAC1D,OAAKD,aAAiB,EACd,KAAK,IAAMA,EAAM,GAAK,KAAK,IAAMA,EAAM,GAAK,KAAK,IAAMA,EAAM,IAAMC,GAAe,KAAK,IAAMD,EAAM,GACpGA,EAAQ,KAAK,GAAGA,EAAM,OAAO,EAAGC,CAAW,EAAI,EACvD,CAMA,GAAGE,EAAW,CAAE,OAAO,IAAI,EAAUA,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACjE,GAAGjoB,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAGA,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACjE,GAAG0U,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAG,KAAK,EAAGA,EAAG,KAAK,CAAC,CAAG,CACjE,GAAG9Z,EAAW,CAAE,OAAO,IAAI,EAAU,KAAK,EAAG,KAAK,EAAG,KAAK,EAAGA,CAAC,CAAG,CAMjE,OAAO,SAASovB,EAAWD,EAAWE,EAAWrvB,EAAY,CAC5D,MAAMgvB,EAAmB,GAAKpB,EAAU,MAAM,EAAI,GAAKA,EAAU,MAAM,EAAI,EAAIA,EAAU,MAAM,GAC9FqB,EAAc,EAAIrB,EAAU,MAAM,EAAIoB,EACtCE,EAAc,EAAItB,EAAU,MAAM,EAAIoB,EAEtCO,EAASJ,EAAIvB,EAAU,MAAM,EAE9B,IAAI4B,EAAgBJ,EAAI,GAAKD,EAAI,EAAIE,EACjCG,IAAiB,IACpBA,EAAe,GAGhB,MAAMC,GAAc,EAAID,EAEvBE,GAAS,EAAIN,EAAIK,GACjBE,GAAS,EAAIR,EAAIM,GAEjBlB,GAAKgB,EAAS3B,EAAU,QAAW,IAAM,KAAK,IAAI2B,EAAQ,EAAE,CAAC,EAAI,GAAK3B,EAAU,MAAQ2B,EACxFnqB,GAAI,GAAKmpB,IAAKmB,GAAST,GACvBnV,GAAI,GAAKyU,IAAKoB,GAAST,GAExB,OAAO,IAAI,EAAUX,GAAGnpB,GAAG0U,GAAG9Z,IAAM,OAAY,EAAIA,CAAC,CACtD,CAMA,OAAQ,CAAE,OAAO,KAAK,OAAO,EAAE,MAAM,CAAG,CACxC,OAAQ,CAAE,OAAO,KAAK,OAAO,EAAE,MAAM,CAAG,CAExC,QAAS,CAAE,OAAO,KAAK,OAAO,EAAE,OAAO,CAAG,CAC1C,QAAS,CAAE,OAAO,KAAK,OAAO,EAAE,OAAO,CAAG,CAC1C,QAAS,CAAE,OAAO,KAAK,OAAO,EAAE,OAAO,CAAG,CAC1C,QAAS,CAAE,OAAO4tB,EAAU,SAAS,KAAK,EAAG,KAAK,EAAG,KAAK,EAAG,KAAK,CAAC,CAAG,CACtE,QAAS,CAAE,OAAO,IAAK,CAExB,EAtEqC,iBAArC,IAAM0B,EAAN,EA8FO,MAAMlC,EAAmB,CAC/B,UAAW,CACV,UAAW,CACV,EAAK,QAAS,SACd,EAAK,EAAU,EACf,EAAK,EAAU,CAChB,EACA,YAAa,CACZ,EAAU,EAAK,EACf,QAAU,EAAK,QACf,EAAU,EAAK,CAChB,EACA,UAAW,CACV,EAAW,EAAU,EACrB,EAAW,EAAU,EACrB,SAAW,QAAU,CACtB,CACD,EAEA,WAAY,CACX,OAAOA,EAAM,UACZA,EAAM,QAAU,SAAS,cAAc,QAAQ,GACzCA,EAAM,OACd,EACA,WAAY,KACJA,EAAM,WACZA,EAAM,SAAWA,EAAM,UAAU,EAAE,WAAW,IAAI,GAC5CA,EAAM,UAGd,KAAMyB,EACN,KAAMnB,EACN,KAAMC,EACN,KAAMC,EACN,KAAM0B,EAEN,QAAQh6B,EAAe,CACtB,OAAOu5B,EAAU,QAAQv5B,CAAK,CAC/B,CACD,EAGa,EAAN,MAAM,CAAc,CAY1B,YAAYsV,EAAO,UAAWnI,EAAO,EAAGuX,EAAW,IAAK,CANxD,KAAQ,MAAiB,GACzB,KAAQ,OAA8B,IAAI,IAE1C,KAAQ,KAAe,EACvB,KAAQ,MAAgB,EAGvB,KAAK,UAAYA,EACjB,KAAK,MAAQpP,EACb,KAAK,MAAQnI,EAEb,KAAK,gBAAgB,CACtB,CAEA,IAAI,UAAW,CAAE,OAAO,KAAK,SAAU,CACvC,IAAI,SAASpU,EAAK,CAAE,KAAK,UAAYA,EAAK,KAAK,gBAAgB,CAAE,CAEjE,IAAI,MAAO,CAAE,OAAO,KAAK,KAAM,CAC/B,IAAI,KAAKA,EAAK,CAAE,KAAK,MAAQA,EAAK,KAAK,gBAAgB,CAAE,CAEzD,IAAI,MAAO,CAAE,OAAO,KAAK,KAAM,CAE/B,IAAI,MAAO,CAAE,OAAO,KAAK,KAAM,CAC/B,IAAI,KAAKA,EAAK,CAAE,KAAK,MAAQA,EAAK,KAAK,gBAAgB,CAAE,CAGzD,iBAAkB,CACjB,KAAK,OAAS,IAAI,IAElB,MAAMuc,EAAOikB,EAAU,QAAQ,KAAK,KAAK,EACzC,GAAK,CAAEjkB,EACN,MAAM,IAAI,MAAM,oBAAoB,EAErC,MAAMglB,EAAMhlB,EAAK,UAAU,GACnB,KAAK,MAAQglB,EAAM,KAG1B,KAAK,KAAO,IAAIhC,EACf,EACC,KAAK,WAAahjB,EAAK,OAAO,EAAE,EAAI,KAAQ,IAC7C,EACA,CACD,EAAE,OAAO,EAAE,EAEX,KAAK,MAAQ,KAAK,WAAaA,EAAK,UAAU,EAAI,KAAQ,MAG1D,KAAK,KAAO,IAAIgjB,EACf,GACChjB,EAAK,OAAO,EAAE,EAAI,KAAQ,KAAK,UAAY,IAC5C,EACA,CACD,EAAE,OAAO,EAAE,EAEX,KAAK,OAASA,EAAK,UAAU,EAAI,KAAQ,KAAK,UAAY,IAE5D,CAEA,QAAQrK,EAA2BsvB,EAAe,GAAO,CACxD,GAAK,CAAEtvB,EACN,OAAO,KAER,GAAK,KAAK,QAAU,GACnB,MAAO,GAKR,GAHK,OAAOA,GAAU,WACrBA,EAAQA,EAAM,MAAM,GAEhB,KAAK,QAAU,EACnB,OAAOA,EAER,GAAK,KAAK,OAAO,IAAIA,CAAK,EACzB,OAAO,KAAK,OAAO,IAAIA,CAAK,EAE7B,IAAIuvB,EAEJ,GAAI,CACHA,EAAMjB,EAAU,QAAQtuB,CAAK,CAC9B,OAAQ7R,EAAK,CACZ,GAAKmhC,EACJ,MAAMnhC,EAEP,OAAO,IACR,CAEA,GAAK,CAAEohC,EACN,OAAO,KAER,GAAK,KAAK,QAAU,EAAI,CAEvB,MAAM7I,EAAO6I,EAAI,UAAU,GAEtB,KAAK,MAAQ7I,EAAO,KAAK,MAAQA,EAAO,KAAK,SACjD6I,EAAMA,EAAI,OAAO,EAAE,gBAAgB,KAAK,KAAK,EAAE,OAAO,EAExD,SAAY,KAAK,QAAU,EAAI,CAE9B,MAAMC,EAAMD,EAAI,OAAO,GAClB,KAAK,MAAQC,EAAI,EAAI,KAAK,KAAOA,EAAI,EAAI,KAAK,QAClDD,EAAMC,EAAI,GAAG,KAAK,IAAI,EAAE,OAAO,EAEjC,SAAY,KAAK,QAAU,EAE1B,GAAK,KAAK,MACT,KAAQD,EAAI,MAAM,EAAI,IAAM,CAC3B,MAAME,EAAMF,EAAI,OAAO,EACvBA,EAAME,EAAI,GAAG,KAAK,IAAI,KAAK,IAAI,EAAG,GAAM,GAAMA,EAAI,CAAC,EAAG,CAAC,CAAC,EAAE,OAAO,CAClE,KAGA,MAAQF,EAAI,MAAM,GAAK,IAAM,CAC5B,MAAME,EAAMF,EAAI,OAAO,EACvBA,EAAME,EAAI,GAAG,KAAK,IAAI,KAAK,IAAI,EAAG,GAAMA,EAAI,CAAC,EAAG,CAAC,CAAC,EAAE,OAAO,CAC5D,SAEU,KAAK,QAAU,EAAI,CAE9B,IAAI3+B,EAAI,EACR,GAAK,KAAK,MACT,KAAQy+B,EAAI,UAAU,EAAI,KAAQz+B,IAAM,KACvCy+B,EAAMA,EAAI,SAAS,MAGpB,MAAQA,EAAI,UAAU,EAAI,IAAOz+B,IAAM,KACtCy+B,EAAMA,EAAI,SAAS,EAAE,CACxB,CAEA,MAAMlhC,EAAMkhC,EAAI,MAAM,EACtB,YAAK,OAAO,IAAIvvB,EAAO3R,CAAG,EACnBA,CACR,CACD,EAzI2B,qBAApB,IAAMqhC,EAAN,C,8FCjtBQ,MAAM,EAAN,MAAM,UAAmB,mCAAM,KAAkC,CAmB/E,YAAY/gC,EAAeqB,EAAwB,CAClD,MAAMrB,EAAMqB,CAAM,EAjBnB,UAAa,KAkBZ,KAAK,OAAO,QAAQ,EAEpB,KAAK,SAAW,CAAC,EAEjB,KAAK,OAAS,CAAC,EACf,KAAK,YAAc,CAAC,EACpB,KAAK,QAAU,KACf,KAAK,aAAe,KACpB,KAAK,cAAgB,KACrB,KAAK,MAAQ,KACb,KAAK,SAAW,IACjB,CAGA,UAAkC,CACjC,MAAMyG,EAAQ,KAAK,KAAK,WAAW,KAAMhC,GAAKA,EAAE,OAASA,EAAE,MAAM,OAAO,EACvEsJ,EAAU,KAAK,QAAUtH,GAASA,EAAM,OAASA,EAAM,MAAM,QAE9D,GAAK,CAAEsH,EACN,SAAO,SAAM,EAAE,EAAE,KAAK,IAAM,KAAK,SAAS,CAAC,EAE5CA,EAAQ,OAAO4xB,GAAY,CACrB,KAAK,SACT,KAAK,YAAYA,CAAQ,CAC3B,CAAC,EAED,KAAK,YAAY5xB,EAAQ,QAAQ,CAClC,CAEA,SAASvC,EAAOvN,EAAMyB,EAAMsD,EAAO,CAClC,KAAK,QAAQ,KAAK,KAAK,OAAOwI,EAAOvN,EAAMyB,CAAI,EAAGsD,CAAK,CACxD,CAEQ,YAAY28B,EAAU,CAC7B,KAAK,IAAI,MAAM,eAAgBA,CAAQ,EACvC,MAAMrG,EAAO,OAAO,SAAS,KAC5B3U,EAAOgb,EAAS,SAChBxX,EAASwX,EAAS,OAClB38B,EAAQ28B,EAAS,MAEbhb,IAAS,KAAK,UAAY2U,IAAS,KAAK,QAAUnR,IAAW,KAAK,WAAU,eAAYnlB,EAAO,KAAK,aAAa,IAGtH,KAAK,aAAe,KAAK,SACzB,KAAK,WAAa,KAAK,OACvB,KAAK,WAAa,KAAK,OACvB,KAAK,UAAY,KAAK,cAEtB,KAAK,SAAW2hB,EAChB,KAAK,OAASwD,EACd,KAAK,OAASmR,EACd,KAAK,cAAgBt2B,EAErB,KAAK,WAAW,EACjB,CAEQ,YAAa,CACpB,MAAM2hB,EAAO,KAAK,SACjB2U,EAAO,KAAK,OAEb,KAAK,UAAY,KAAK,QACtB,KAAK,SAAW,KAAK,aACrB,KAAK,UAAY,KAAK,MAEtB,UAAU9tB,KAAS,KAAK,SAAU,CACjC,GAAKA,EAAM,QAAUA,EAAM,SAAW8tB,EACrC,SAED,MAAMhvB,EAAQkB,EAAM,MAAM,KAAKmZ,CAAI,EACnC,GAAKra,IAAU,CAAEkB,EAAM,UAAYA,EAAM,SAAS,KAAK,aAAa,GAAK,CACxE,KAAK,IAAI,MAAM,iBAAkBA,EAAOlB,CAAK,EAC7C,KAAK,QAAUkB,EACf,KAAK,aAAeA,EAAM,KAC1B,KAAK,MAAQlB,EACb,KAAK,KAAK,SAAUkB,EAAOlB,CAAK,EAChC,MACD,CACD,CAEA,KAAK,QAAU,KAAK,aAAe,KAAK,MAAQ,KAChD,KAAK,KAAK,SAAU,KAAM,IAAI,CAC/B,CAEA,OAAOkB,EAAOvN,EAAMyB,KAAS9B,EAAM,CAClC,MAAMM,EAAI,KAAK,OAAOsN,CAAK,EAC3B,GAAK,CAAEtN,EACN,MAAM,IAAI,MAAM,yBAAyBsN,CAAK,GAAG,EAElD,GAAK,OAAOvN,GAAS,SAAW,CAC/B,MAAM2hC,EAAQ,CAAC3hC,EAAMyB,EAAM,GAAG9B,CAAI,EAClCK,EAAO,CAAC,EAER,IAAI6C,EAAI,EACR,UAAU++B,KAAQ3hC,EAAE,MACnB,GAAK2hC,GAAQA,EAAK,OACjB5hC,EAAK4hC,EAAK,IAAI,EAAID,EAAM9+B,CAAC,EACzBA,IACKA,GAAK8+B,EAAM,QACf,KAGJ,CAEA,OAAO1hC,EAAE,IAAID,EAAMyB,CAAI,CACxB,CAEA,SAASf,EAAc,CACtB,OAAO,KAAK,OAAOA,CAAI,CACxB,CAEA,WAAY,CACX,OAAO,KAAK,MACb,CAEA,eAAgB,CACf,UAAU6M,KAAS,OAAO,KAAK,KAAK,UAAU,CAAC,EAC9C,KAAK,aAAaA,CAAK,EAExB,OAAO,KAAK,WACb,CAEA,aAAaA,EAAe,CAC3B,OAAO,KAAK,YAAYA,CAAK,IAC5B,KAAK,YAAYA,CAAK,EAAIA,EACxB,QAAQ,gBAAiB,CAACT,EAAG+0B,IAC7B,cAAcA,EAAO,kBAAkB,CAAC,EAAE,EAC1C,QAAQ,gBAAiB,CAAC/0B,EAAGg1B,EAAQD,IACrC,GAAGC,EAAS,IAAM,EAAE,GAAGD,EAAO,kBAAkB,CAAC,EAAE,GAE/C,KAAK,YAAYt0B,CAAK,CAC9B,CAEA,UAAUA,EAAwC7M,EAAec,EAAmB,GAAM,CACzF,GAAK,OAAO+L,GAAU,SAAW,CAChC,UAAUnM,KAAOmM,KACX,OAAIA,EAAOnM,CAAG,GAClB,KAAK,UAAUA,EAAKmM,EAAMnM,CAAG,EAAG,EAAK,EAElCI,GACJ,KAAK,KAAK,sBAAsB,EACjC,MACD,CAEKd,IACJ,KAAK,YAAY6M,CAAK,EAAI7M,EAErBc,GACJ,KAAK,KAAK,sBAAsB,EAEnC,CAEA,MAAMd,EAAMgmB,EAAMqb,EAAS,KAAMC,EAAW,KAAMxgC,EAAU,GAAM,CACjE,GAAK,OAAOd,GAAS,SAAW,CAC/BqhC,EAASrb,EACT,UAAUtlB,KAAOV,KACX,OAAIA,EAAMU,CAAG,GACjB,KAAK,MAAMA,EAAKV,EAAKU,CAAG,EAAG2gC,EAAQC,EAAU,EAAK,EAE/CxgC,IACJ,KAAK,SAAS,KAAK,CAACgQ,EAAEsJ,IAAMA,EAAE,MAAQtJ,EAAE,KAAK,EACxC,KAAK,UACT,KAAK,WAAW,EACjB,KAAK,KAAK,iBAAiB,GAG5B,MACD,CAEA,MAAMmwB,KAAQ,SAAMjb,CAAI,EACvBub,EAAQN,EAAM,OAAO,CAACO,EAAOriC,IAAQqiC,GACpC,OAAOriC,GAAQ,SACdA,EAAI,MAAM,GAAG,EAAE,OAAS,EACxB,GACC,CAAC,EACJ0N,EAAQ,KAAK,OAAO7M,CAAI,EAAI,CAC3B,KAAAA,EACA,MAAAihC,EACA,MAAAM,EACA,OAAAF,EACA,SAAAC,EACA,SAAO,kBAAeL,CAAK,EAC3B,OAAK,oBAAiBA,CAAK,CAC5B,EAED,KAAK,SAAS,KAAKp0B,CAAK,EACnB/L,IACJ,KAAK,SAAS,KAAK,CAACgQ,EAAEsJ,IAAMA,EAAE,MAAQtJ,EAAE,KAAK,EACxC,KAAK,UACT,KAAK,WAAW,EACjB,KAAK,KAAK,iBAAiB,EAE7B,CACD,EArNgF,kBAAjE,IAAM2wB,EAAN,C,0ECLA,MAAM,EAAN,MAAM,UAAa,oBAAM,KAA0B,CAoBjE,YAAYzhC,EAAeqB,EAAwB,CAClD,MAAMrB,EAAMqB,CAAM,EAZnB,KAAQ,OAAwB,KAc/B,KAAK,UAAY,IAAI,IACrB,KAAK,eAAiB,IAAI,IAC1B,KAAK,UAAY,KACjB,KAAK,SAAW,CAAC,EACjB,KAAK,cAAgB,IACtB,CAGA,MAAM,SAAShC,EAAM,EAAkB,CAE/B,KAAK,eACX,KAAK,aAAe,MAAO,KAAK,OAAe,aAAa,KAAK,UAAY,YAAY,GAE1F,IAAI8R,EAAO,KAAK,cAAc,oBAI9B,GAHKA,GAAM,eAAe,UACzBA,EAAOA,GAAM,eAETA,GAAM,QAAU,CACpB,KAAK,WAAaA,EAClB,KAAK,MAAQA,GAAM,SAAS,MAC5B,MACD,CAEA,GAAK,KAAK,cAAgB,CAAEA,EAAO,CAClC,IAAIzQ,EAAM,EAAK,aAAa,KAAK,aAAc,kBAAkB,EACjE,GAAKA,EAAM,CACV,KAAK,WAAa,KAClB,KAAK,MAAQ,KAAK,aAAaA,CAAG,EAClC,MACD,CACD,CAGC,GAAKrB,EAAQ,IACZ,MAAM,IAAI,MAAM,uCAAuC,EAExD,YAAK,aAAe,KACb,IAAI,QAAcE,GACxB,WAAWA,EAAG,EAAE,CAAC,EAAE,KAAK,IAAM,KAAK,SAASF,EAAM,CAAC,CAAC,CAQvD,CAGA,WAAY,CACX,KAAK,WAAa,KAAK,aAAe,KAAK,MAAQ,KAAK,SAAW,IACpE,CAGA,OAAO,aAAayP,EAAYb,EAAuC,CACtE,UAAUvN,KAAOoO,EAChB,GAAKb,EAASvN,EAAI,WAAW,GAAGuN,CAAM,GAAG,EAAKvN,EAAI,WAAW,0BAA0B,GAAKA,EAAI,WAAW,eAAe,EACzH,OAAOA,EACT,OAAO,IACR,CAOA,YAAY0F,EAAkB,CAC7B,MAAK,CAAEA,GAAS,KAAK,MACb,KAAK,MACHA,aAAiB,KACnB,KAAK,iBAAiBA,CAAK,EACxBA,GAA0B,gBAC5BA,EAAyB,gBACvBA,GAA0B,oBAC5BA,EAAyB,oBACxBA,GAEH,IACR,CAEA,iBAAiB0I,EAAY,CAG5B,OAFO,KAAK,WACX,KAAK,SAAW,EAAK,aAAaA,CAAI,GAChC,KAAK,SAGLA,EAAK,KAAK,QAAQ,GACxBA,EAAK,qBAAqB,eAAe,SACzCA,EAAK,qBAAqB,SAAW,KAJ9B,IAKT,CAEA,SAAS1I,EAAkB,CAC1B,OAAAA,EAAQ,KAAK,YAAYA,CAAK,EACvBA,GAAO,QAAU,IACzB,CAEA,cACCA,EACAs7B,EAAY,IACZC,EAAiB,GAChB,CACD,OAAO,KAAK,aACXv7B,EACAN,GAAKA,aAAa,KAClB47B,EACA,EACAC,CACD,CACD,CAEA,aACCv7B,EACAs7B,EAAY,IACZC,EAAiB,GAChB,CACD,OAAO,KAAK,WACXv7B,EACAN,GAAKA,aAAa,KAClB47B,EACA,EACAC,CACD,CACD,CAEA,YACCv7B,EACAs7B,EAAY,IACX,CACD,OAAO,KAAK,aAAoBt7B,EAAOs7B,CAAS,CACjD,CAIA,UAAUt7B,EAAkB,CAC3B,OAAO,KAAK,SAASA,CAAK,CAC3B,CAEA,cAAcA,EAAkB,CAE/B,OADa,KAAK,YAAYA,CAAK,GACtB,OAAS,IACvB,CAEA,YAAYA,EAAkB,CAC7B,MAAM0I,EAAO,KAAK,YAAY1I,CAAK,EACnC,GAAK,CAAE0I,EACN,MAAO,CAAC,EAET,MAAMsD,EAAW,CAAC,EAClB,IAAI+H,EAAQrL,EAAK,MACjB,KAAMqL,GACL/H,EAAS,KAAK+H,CAAK,EACnBA,EAAQA,EAAM,QAGf,OAAO/H,CACR,CAEA,aACChM,EACAw7B,EACAF,EAAY,GACZG,EAAQ,EACRF,EAAiB,GACF,CACf,GAAKE,EAAQH,EACZ,OAAO,KAER,MAAM5yB,EAAO,KAAK,YAAY1I,CAAK,EAGnC,GAAK,CAAE0I,EACN,OAAO,KAER,GAAK,OAAO8yB,GAAa,SAAW,CACnC,MAAMj1B,EAAU,KAAK,UAAU,IAAIi1B,CAAQ,EAC3C,GAAK,CAAEj1B,EACN,MAAM,IAAI,MAAM,iBAAiB,EAElC,GAAK,CAAEA,EAAQ,MACd,OAAO,KAERi1B,EAAW,EAAA97B,GAAKA,GAAKA,EAAE,cAAgB6G,EAAQ,MAApC,WACZ,CAEA,MAAMtJ,EAAOyL,EAAK,UAClB,GAAKzL,GAAQu+B,EAASv+B,EAAayL,CAAI,EACtC,OAAOzL,EAWR,GAAKyL,EAAK,OAAS,CAClB,MAAMwR,EAAS,KAAK,aAAoBxR,EAAK,OAAQ8yB,EAAUF,EAAWG,EAAM,EAAGF,CAAc,EACjG,GAAKrhB,EACJ,OAAOA,CACT,CAGA,GAAKqhB,GAAmBt+B,GAAc,cAAgB,CACrD,MAAMhC,EAAUgC,EAAa,eAAe,cAC3Cy+B,EAAczgC,GAAU,KAAK,iBAAiBA,CAAM,EAErD,GAAKygC,EAAc,CAClB,MAAMxhB,EAAS,KAAK,aAAoBwhB,EAAaF,EAAUF,EAAWG,EAAM,EAAGF,CAAc,EACjG,GAAKrhB,EACJ,OAAOA,CACT,CACD,CAEA,OAAO,IACR,CAEA,iBACCla,EACAw7B,EACAF,EAAY,GACZG,EAAQ,EACRF,EAAiB,GACF,CACf,GAAKE,EAAQH,EACZ,OAAO,KAER,MAAM5yB,EAAO,KAAK,YAAY1I,CAAK,EAGnC,GAAK,CAAE0I,EACN,OAAO,KAER,GAAK8yB,EAAS9yB,CAAI,EACjB,OAAOA,EAER,GAAKA,EAAK,OAAS,CAClB,MAAMwR,EAAS,KAAK,iBAAwBxR,EAAK,OAAQ8yB,EAAUF,EAAWG,EAAM,EAAGF,CAAc,EACrG,GAAKrhB,EACJ,OAAOA,CACT,CAGA,MAAMjd,EAAOyL,EAAK,UAClB,GAAK6yB,GAAmBt+B,GAAc,cAAgB,CACrD,MAAMhC,EAAUgC,EAAa,eAAe,cAC3Cy+B,EAAczgC,GAAU,KAAK,iBAAiBA,CAAM,EAErD,GAAKygC,EAAc,CAClB,MAAMxhB,EAAS,KAAK,iBAAwBwhB,EAAaF,EAAUF,EAAWG,EAAM,EAAGF,CAAc,EACrG,GAAKrhB,EACJ,OAAOA,CACT,CACD,CAEA,OAAO,IACR,CAEA,WACCla,EACAw7B,EACAF,EAAY,GACZG,EAAQ,EACRF,EAAiB,GACF,CACf,GAAKE,EAAQH,EACZ,OAAO,KAER,MAAM5yB,EAAO,KAAK,YAAY1I,CAAK,EAGnC,GAAK,CAAE0I,EACN,OAAO,KAER,GAAK8yB,EAAS9yB,CAAI,EACjB,OAAOA,EAGR,GAAKA,EAAmC,cACvCA,EAAK,WAAW,aAEhB,OAAO,KAER,IAAIqL,EAAQrL,EAAK,MACjB,KAAMqL,GAAO,CACZ,MAAMmG,EAAS,KAAK,WAAkBnG,EAAOynB,EAAUF,EAAWG,EAAM,EAAGF,CAAc,EACzF,GAAKrhB,EACJ,OAAOA,EACRnG,EAAQA,EAAM,OACf,CAEA,MAAM9W,EAAOyL,EAAK,UAClB,GAAK6yB,GAAmBt+B,GAAc,OAAO,KAAO,CACnD,MAAM8N,EAAQ9N,EAAa,MAAM,KAAK,oBACtC,GAAK8N,EAAO,CACX,IAAIgJ,EAAQhJ,EAAK,eAAe,SAAWA,EAAK,QAChD,KAAMgJ,GAAO,CACZ,MAAMmG,EAAS,KAAK,WAAkBnG,EAAOynB,EAAUF,EAAWG,EAAM,EAAGF,CAAc,EACzF,GAAKrhB,EACJ,OAAOA,EAERnG,EAAQA,EAAM,OACf,CACD,CACD,CAEA,OAAO,IACR,CA0CA,WAGC/T,EACAw7B,EACAF,EAAoB,GACpBG,EAAgB,EAChBF,EAA0B,GAC1Bh3B,EAC4B,CAC5B,MAAMmE,EAAO,KAAK,YAAY1I,CAAK,EAKnC,GAJKuE,GAAS,EAAGA,aAAiB,OACjCA,EAAQ,IAAI,KAGR,CAAEmE,GAAQ+yB,EAAQH,EACtB,OAAO/2B,GAAgB,KAExB,GAAK,OAAOi3B,GAAa,SAAW,CACnC,MAAMj1B,EAAU,KAAK,UAAU,IAAIi1B,CAAQ,EAC3C,GAAK,CAAEj1B,EACN,MAAM,IAAI,MAAM,iBAAiB,EAElC,GAAK,CAAEA,EAAQ,MACd,OAAOhC,GAAgB,KAExBi3B,EAAW,EAAA97B,GAAKA,GAAKA,EAAE,cAAgB6G,EAAQ,MAApC,WACZ,CAEA,MAAMtJ,EAAOyL,EAAK,UAClB,GAAKzL,GAAQu+B,EAASv+B,EAAayL,CAAI,EACtC,GAAKnE,EACJA,EAAM,IAAItH,CAAa,MAEvB,QAAOA,EAIT,GAAKyL,EAAmC,cACvCA,EAAK,WAAW,aAEhB,OAAOnE,GAAgB,KAExB,IAAIwP,EAAQrL,EAAK,MACjB,KAAMqL,GAAO,CACZ,MAAMmG,EAAS,KAAK,WAAkBnG,EAAOynB,EAAUF,EAAWG,EAAM,EAAGF,EAAgBh3B,CAAY,EACvG,GAAK2V,GAAU,CAAE3V,EAChB,OAAO2V,EACRnG,EAAQA,EAAM,OACf,CAEA,GAAKwnB,GAAmBt+B,GAAc,OAAO,KAAO,CACnD,MAAM8N,EAAQ9N,EAAa,MAAM,KAAK,oBACtC,GAAK8N,EAAO,CACX,IAAIgJ,EAAQhJ,EAAK,eAAe,SAAWA,EAAK,QAChD,KAAMgJ,GAAO,CACZ,MAAMmG,EAAS,KAAK,WAAkBnG,EAAOynB,EAAUF,EAAWG,EAAM,EAAGF,EAAgBh3B,CAAY,EACvG,GAAK2V,GAAU,CAAE3V,EAChB,OAAO2V,EAERnG,EAAQA,EAAM,OACf,CACD,CACD,CAEA,OAAOxP,GAAgB,IACxB,CAGA,gBACCvE,EACAw7B,EACAF,EAAY,GACZK,EAAe,GACfC,EAAQ,GACRH,EAAM,EACNF,EAAe,GACd,CACD,MAAMn0B,EAAU,IAAI,IACpB,IAAIy0B,EAAqB,GAAC5+B,EAAMyL,IAAS,CAAEtB,EAAQ,IAAInK,CAAa,GAAKu+B,EAASv+B,EAAayL,CAAI,EAA1E,QAEzB,OAAY,CACX,MAAMnD,EAAQq2B,EACb,KAAK,aAAa57B,EAAO67B,EAAMP,EAAWG,EAAOF,CAAc,EAC/D,KAAK,WAAWv7B,EAAO67B,EAAMP,EAAWG,EAAOF,CAAc,EAE9D,GAAK,CAAEh2B,EACN,MAED,GAAKo2B,GAAgB,CAAEv0B,EAAQ,KAAO,CACrC,MAAMuK,EAAQpM,EAAM,YACpBs2B,EAAO,GAAC5+B,EAAMyL,IAAS,CAAEtB,EAAQ,IAAInK,CAAa,GAAMA,aAAgB0U,GAAU6pB,EAASv+B,EAAayL,CAAI,EAArG,OACR,CAEAtB,EAAQ,IAAI7B,CAAc,CAC3B,CAEA,OAAO6B,CACR,CAGA,UACCpH,EACA87B,EACAR,EAAY,GACZG,EAAQ,EACRviC,EASW,KACXqiC,EAAiB,GAChB,CACD,MAAM7yB,EAAO,KAAK,YAAY1I,CAAK,EAanC,GAXO9G,IACNA,EAAO,CACN,KAAM,IAAI,IACV,QAAS4iC,EAAU,IAAI,IAAM,IAAI,EACjC,IAAKA,EAAU,IAAI,KAAO,CACzB,IAAK,KAAM,UAAW,IAAI,IAAK,MAAO,IACvC,EAAE,EACF,UAAWL,CACZ,GAGI,CAAE/yB,GAAQ+yB,EAAQH,EACtB,OAAOpiC,EAAK,IAERuiC,EAAQviC,EAAK,YACjBA,EAAK,UAAYuiC,GAElB,MAAMx+B,EAAOyL,EAAK,UAClB,GAAKzL,EAAO,CACX,MAAMG,EAAMH,EAAK,YAChB2K,EAAM1O,EAAK,QAAQ,QAAQkE,CAAG,EAE/B,GAAKwK,IAAQ,GACZ1O,EAAK,IAAI0O,CAAG,EAAE,UAAU,IAAI3K,CAAI,UAEvB,CAAE/D,EAAK,KAAK,IAAIkE,CAAG,EAAI,CAChC,IAAIrB,EAAI+/B,EAAU,OAClB,KAAM//B,KAAM,GACX,GAAK+/B,EAAU//B,CAAC,EAAEkB,EAAMyL,CAAI,EAAI,CAC/BxP,EAAK,QAAQ6C,CAAC,EAAI7C,EAAK,IAAI6C,CAAC,EAAE,IAAMqB,EACpClE,EAAK,IAAI6C,CAAC,EAAE,UAAU,IAAIkB,CAAI,EAC9B/D,EAAK,IAAI6C,CAAC,EAAE,MAAQ0/B,EACpB,KACD,CAEDviC,EAAK,KAAK,IAAIkE,CAAG,CAClB,CACD,CAGA,GAAKsL,EAAmC,cACvCA,EAAK,WAAW,aAEhB,OAAOxP,EAAK,IAEb,IAAI6a,EAAQrL,EAAK,MACjB,KAAMqL,GACL,KAAK,UAAUA,EAAO+nB,EAAWR,EAAWG,EAAM,EAAGviC,EAAMqiC,CAAc,EACzExnB,EAAQA,EAAM,QAGf,GAAKwnB,GAAmBt+B,GAAc,OAAO,KAAO,CACnD,MAAM8N,EAAQ9N,EAAa,MAAM,KAAK,oBACtC,GAAK8N,EAAO,CACX,IAAIgJ,EAAQhJ,EAAK,eAAiBA,EAAK,cAAc,SAAWA,EAAK,QACrE,KAAMgJ,GACL,KAAK,UAAUA,EAAO+nB,EAAWR,EAAWG,EAAM,EAAGviC,EAAMqiC,CAAc,EACzExnB,EAAQA,EAAM,OAEhB,CACD,CAEA,OAAO7a,EAAK,GACb,CAOA,MAAMuN,EAAe,CACpB,KAAK,OAASA,EACd,KAAK,mBAAmB,CACzB,CAGA,oBAAqB,CACpB,MAAMG,EAAoB,KAAK,cAAgB,CAAC,EAC/Cm1B,EAAsB,KAAK,cAAgB,CAAC,EAC5Ct1B,EAAQ,KAAK,OAEd,GAAK,KAAK,SACT,UAAUiD,KAAU,KAAK,SAEnBA,EAAO,SAAW,IAAS,CAAEA,EAAO,WAGpC,CAAEjD,GAAS,CAAEiD,EAAO,QAAQ,QAAUA,EAAO,OAAO,SAASjD,CAAK,KACtEG,EAAG,KAAK8C,CAAM,EACdqyB,EAAI,KAAKryB,EAAO,QAAQ,GAIpB,KAAK,cAAc,OAEd,KAAK,gBAChB,KAAK,cAAc,EAFnB,KAAK,aAAa,CAGpB,CAGA,OACCpP,EACAkhC,EACAn1B,EAAkC,KACjC,CACD,GAAK,KAAK,UAAU,IAAI/L,CAAG,EAC1B,OAAO,KAAK,UAAU,IAAIA,CAAG,EAE9B,GAAK,CAAEkhC,EACN,MAAM,IAAI,MAAM,iDAAiD,EAElE,MAAMj1B,EAAU,IAAIy1B,EAAmB1hC,EAAKkhC,EAAiBn1B,EAAQ,IAAI,EACzE,KAAK,UAAU,IAAI/L,EAAKiM,CAAO,EAE/B,MAAMrN,EAAO,KAAK,MACf,KAAK,UAAU,KAAK,MAAO,CAACsiC,CAAe,EAAG,GAAI,EAAE,CAAC,EACrD,KAEH,OAAKtiC,GAAM,KACVqN,EAAQ,KAAKrN,EAAK,IAAKA,EAAK,SAAuB,EACnD,KAAK,eAAe,IAAIA,EAAK,IAAKqN,CAAO,GAE9BF,IAAW,KACtB,KAAK,SAAS,KAAKE,CAAO,EAC1B,KAAK,mBAAmB,GAGlBA,CACR,CAGA,KACCjM,EACA8C,EACC,CACD,IAAImJ,EAQJ,GAPK,KAAK,UAAU,IAAIjM,CAAG,EAC1BiM,EAAU,KAAK,UAAU,IAAIjM,CAAG,GAEhCiM,EAAU,IAAIy1B,EAAY1hC,EAAK,KAAM,KAAM,IAAI,EAC/C,KAAK,UAAU,IAAIA,EAAKiM,CAAO,GAG3BnJ,EAAM,CACV,GAAKmJ,EAAQ,OAASA,EAAQ,SAC7B,MAAM,IAAI,MAAM,6DAA6D,EAE9EA,EAAQ,KAAKnJ,EAAK,IAAI,GAAG,EACzB,KAAK,eAAe,IAAIA,EAAKmJ,CAAO,CACrC,CAEA,OAAOA,CACR,CAGA,cAAcuY,EAAiE,KAAM,CACpF,GAAO,KAAK,cAGZ,CAAO,MAAM,QAAQA,CAAK,IACzBA,EAAQ,CAACA,CAAK,GAEf,QAAQ9e,KAAS8e,EAAO,CACvB,GAAK,CAAE,KAAK,cAAc,QAAU,CAAE,KAAK,cAC1C,MAED,IAAIpW,EAAyB,KAW7B,GAVK,CAAE1I,GAAS,KAAK,MACpB0I,EAAO,KAAK,MACH1I,aAAiB,KAC1B0I,EAAO,KAAK,iBAAiB1I,CAAK,EACxBA,GAA0B,gBACpC0I,EAAQ1I,EAAyB,gBACvBA,GAA0B,sBACpC0I,EAAQ1I,EAAyB,qBAG9B,CAAE0I,GACJA,EAAmC,cACpCA,EAAK,WAAW,aAEhB,SAED,MAAMxP,EAAO,KAAK,UACjBwP,EAAM,KAAK,cAAe,GAC3B,EAEA,IAAI3M,EAAI7C,EAAK,OACb,KAAM6C,KAAM,GACX,GAAK7C,EAAK6C,CAAC,EAAE,IAAM,CAClB,MAAMC,EAAI9C,EAAK6C,CAAC,EACfykB,EAAI,KAAK,cAAc,OAAOzkB,EAAG,CAAC,EAAE,CAAC,EAEtC,KAAK,cAAc,OAAOA,EAAG,CAAC,EAE9B,MAAM6L,EAAM,KAAK,SAAS,QAAQ4Y,CAAC,EAC9B5Y,IAAQ,IACZ,KAAK,SAAS,OAAOA,EAAK,CAAC,EAE5B,KAAK,IAAI,MAAM,oBAAoB4Y,EAAE,IAAI,cAAcxkB,EAAE,KAAK,EAAE,EAChEwkB,EAAE,KAAKxkB,EAAE,IAAKA,EAAE,SAAgC,CACjD,CAEF,CAEO,KAAK,cAAc,QACzB,KAAK,aAAa,EACpB,CAGA,eAAgB,CACf,KAAK,IAAI,KAAK,8BAA8B,EAC5C,KAAK,eAAiB,YAAY,IAAM,KAAK,cAAc,EAAG,GAAG,EAE1D,KAAK,YACX,KAAK,UAAY,IAAI,iBAAiB+K,GACrC,KAAK,cAAcA,EAAU,IAAIjD,GAAKA,EAAE,MAAM,CAAC,CAChD,GAED,KAAK,UAAU,QAAQ,SAAS,KAAM,CACrC,UAAW,GACX,QAAS,EACV,CAAC,CACF,CAGA,cAAe,CACd,KAAK,IAAI,KAAK,4BAA4B,EAErC,KAAK,WACT,KAAK,UAAU,WAAW,EAEtB,KAAK,gBACT,cAAc,KAAK,cAAc,EAElC,KAAK,cAAgB,KACrB,KAAK,cAAgB,KACrB,KAAK,eAAiB,IACvB,CACD,EA5tBkE,YAAnD,IAAMm4B,EAAN,EAyuBf,MAAMC,EAAiD,CACtD,aAAc,4BACd,MAAO,oBACP,OAAQ,SACR,gBAAiB,mCACjB,gBAAiB,wBACjB,cAAe,6BACf,OAAQ,qBACR,QAAS,sBACV,EAqBa,EAAN,MAAM,UAAmE,yBAAY,KAAuB,CAWlH,YAAYtiC,EAAc4hC,EAAsCn1B,EAAiC81B,EAAY,CAC5G,MAAM,EAEN,KAAK,KAAOviC,EACZ,KAAK,SAAW4hC,EAChB,KAAK,KAAOW,EAEZ,KAAK,UAAY,IAAI,IACrB,KAAK,OAAS91B,GAAU,CAAC,EAEzB,KAAK,SAAW,IAAI,IACpB,KAAK,OAAS,IAEf,CAEA,IAAI,OAAQ,CAAE,OAAO,KAAK,MAAQ,CAElC,IAAI,OAAQ,CACX,OAAO,KAAK,QAAQ,EAAE,CAAC,CACxB,CAEU,kBAA6B,CACtC,MAAM/M,EAAM,MAAM,iBAAiB,EAEnC,UAAUN,KAASM,EAAK,CACvB,MAAMgB,EAAM4hC,EAAOljC,CAAK,EACxB,GAAKsB,EACJ,GAAI,CACH,KAAK,QAAQA,CAAoC,CAClD,MAAa,CAAmB,CAClC,CAEA,OAAOhB,CACR,CAEA,SAAU,CACT,OAAO,MAAM,KAAK,KAAK,SAAS,CACjC,CAEA,MACCoP,EAAiD,KACjD4yB,EAAY,IACX,CACD,GAAK,KAAK,QAAU,CAAE,KAAK,SAC1B,OAED,MAAMj+B,EAAY,KAAK,KAAK,gBAAuBqL,EAAM,KAAK,SAAiB4yB,CAAS,EACxF,GAAKj+B,EAAU,KAAO,CACrB,MAAM++B,EAAQ,MAAM,KAAK/+B,CAAS,EAClC,KAAK,KAAK++B,EAAM,CAAC,EAAE,YAAoBA,CAAK,CAC7C,CACD,CAEA,MAAMn4B,EAA8D,CAC9D,KAAK,OACTA,EAAG,KAAK,OAAQ,KAAK,SAAS,EAE9B,KAAK,KAAK,MAAOA,CAAE,CACrB,CAEA,KAAKA,EAA2B,CAC/B,UAAUhH,KAAQ,KAAK,UACtBgH,EAAGhH,CAAI,CACT,CAEA,gBACCyL,EAAiD,KACjD4yB,EAAY,IACX,CACD,GAAK,CAAE,KAAK,OACX,OAED,MAAMj+B,EAAY,KAAK,KAAK,gBAC3BqL,EACAhJ,GAAKA,EAAE,cAAgB,KAAK,OAC5B47B,CACD,EAEA,UAAUr+B,KAAQI,EACjBJ,EAAK,aAAe,GACpB,KAAK,UAAU,IAAIA,CAAI,CAEzB,CAEA,KAAKG,EAAuBC,EAA4B,CACvD,GAAK,KAAK,OACT,MAAM,IAAI,MAAM,sBAAsB,EAEvC,KAAK,OAASD,EACbA,EAAY,aAAe,KAE5B,MAAMK,EAAI,KACT4+B,EAAa,KAAK,UAClB7H,EAAQp3B,EAAI,UACZk/B,EAAU9H,EAAM,0BAChB+H,EAAY/H,EAAM,qBAElBgI,EAAQhI,EAAM,0BAA4B8H,EACzC,YAAyBzjC,EAA+D,CACvF,YAAK,aAAe,GACpBwjC,EAAW,IAAI,IAAI,EACnB5+B,EAAE,KAAK,aAAc,KAAM,GAAG5E,CAAI,EAC3ByjC,EAAQ,MAAM,KAAMzjC,CAAI,CAChC,EACA,YAAyBA,EAA+D,CACvF,KAAK,aAAe,GACpBwjC,EAAW,IAAI,IAAI,EACnB5+B,EAAE,KAAK,aAAc,KAAM,GAAG5E,CAAI,CACnC,EAED4jC,EAAUjI,EAAM,qBAAuB+H,EACtC,YAAyB1jC,EAA0D,CAClF4E,OAAAA,EAAE,KAAK,UAAW,KAAM,GAAG5E,CAAI,EAC/BwjC,EAAW,OAAO,IAAI,EACtB,KAAK,aAAe,GACbE,EAAU,MAAM,KAAM1jC,CAAI,CAClC,EACA,YAAyBA,EAA0D,CAClF4E,EAAE,KAAK,UAAW,KAAM,GAAG5E,CAAI,EAC/BwjC,EAAW,OAAO,IAAI,EACtB,KAAK,aAAe,EACrB,EAEF,KAAK,SAAS,IAAI,4BAA6B,CAACG,EAAOF,CAAO,CAAC,EAC/D,KAAK,SAAS,IAAI,uBAAwB,CAACG,EAASF,CAAS,CAAC,EAE9D,UAAUvjC,KAAS,KAAK,OAAO,EAC9B,KAAK,WAAWA,CAAK,EAEtB,GAAKqE,EACJ,UAAUJ,KAAQI,EAGjBJ,EAAK,aAAe,GACpBo/B,EAAW,IAAIp/B,CAAI,EAGrB,KAAK,KAAK,MAAOG,EAAKi/B,CAAU,CACjC,CAEQ,KAAKh/B,EAA4B,CACxC,UAAUJ,KAAQI,EACjB,KAAK,UAAU,IAAIJ,CAAI,CACzB,CAGQ,WAAWjE,EAAe,CACjC,MAAMsB,EAAM4hC,EAAOljC,CAA4B,EAC1C,CAAE,KAAK,QAAU,CAAEsB,GAAO,KAAK,SAAS,IAAIA,CAAG,GAGpD,KAAK,MAAMtB,EAAOsB,CAAoC,CACvD,CAEQ,MAAwBtB,EAAUsB,EAAoC,CAC7E,GAAK,KAAK,SAAS,IAAIA,CAAG,GAAK,CAAE,KAAK,OACrC,OAED,MAAMmD,EAAI,KACT+2B,EAAQ,KAAK,OAAO,UACpBhM,EAAWgM,EAAMl6B,CAAG,EAEpB2J,EAAMuwB,EAAcl6B,CAAG,EAAIkuB,EAC1B,YAAyB3vB,EAAqC,CAC7D,OAAO,KAAK,eACX,KAAK,aAAe,GACpB4E,EAAE,UAAU,IAAI,IAAI,EACpBA,EAAE,KAAK,aAAc,IAAI,GAG1BA,EAAE,KAAKzE,EAAc,KAAM,GAAGH,CAAI,EAC3B2vB,EAAS,MAAM,KAAM3vB,CAAI,CACjC,EAEAyB,IAAQ,wBACP,YAAyBzB,EAAqC,CAC7D,OAAO,KAAK,eACX,KAAK,aAAe,GACpB4E,EAAE,UAAU,IAAI,IAAI,EACpBA,EAAE,KAAK,aAAc,IAAI,GAG1BA,EAAE,KAAKzE,EAAc,KAAM,GAAGH,CAAI,EAC3B,EACR,EAEA,YAAyBA,EAAqC,CACtD,KAAK,eACX,KAAK,aAAe,GACpB4E,EAAE,UAAU,IAAI,IAAI,EACpBA,EAAE,KAAK,aAAc,IAAI,GAG1BA,EAAE,KAAKzE,EAAc,KAAM,GAAGH,CAAI,CACnC,EAEH,KAAK,SAAS,IAAIyB,EAAK,CAAC2J,EAAIukB,CAAQ,CAAC,CACtC,CAEQ,QAAQluB,EAAoC,CACnD,MAAM0I,EAAO,KAAK,SAAS,IAAI1I,CAAG,EAClC,GAAK,CAAE0I,GAAQ,CAAE,KAAK,OACrB,OAED,MAAMwxB,EAAQ,KAAK,OAAO,UACzB,CAACvwB,EAAIukB,CAAQ,EAAIxlB,EAElB,GAAKwxB,EAAMl6B,CAAG,IAAM2J,EACnB,MAAM,IAAI,MAAM,wCAAwC,EAEzDuwB,EAAMl6B,CAAG,EAAIkuB,EACb,KAAK,SAAS,OAAOluB,CAAG,CACzB,CAGA,aAAc,CACb,UAAU2C,KAAQ,KAAK,UACtB,GAAI,CACHA,EAAK,YAAY,EACjB,KAAK,KAAK,KAAK,kBAAmB,KAAK,KAAMA,CAAI,CAElD,OAAQ7D,EAAK,CACPA,aAAe,OACnB,KAAK,KAAK,IAAI,QAAQA,EAAK,CAC1B,KAAM,CACL,aAAc,KAAK,IACpB,CACD,CAAC,EAEF,KAAK,KAAK,IAAI,MAAM,gEAAgE,KAAK,IAAI,GAAIA,CAAG,CACrG,CACF,CAGA,GACCJ,EACAiL,EACAnL,EACA4jC,EACAC,EAAmB,GAClB,CACD,YAAK,WAAW3jC,CAAK,EACd,MAAM,GAAGA,EAAOiL,EAAInL,EAAK4jC,EAAUC,CAAO,CAClD,CAGA,KACC3jC,EACAiL,EACAnL,EACA4jC,EACAC,EAAmB,GAClB,CACD,YAAK,WAAW3jC,CAAK,EACd,MAAM,KAAKA,EAAOiL,EAAInL,EAAK4jC,EAAUC,CAAO,CACpD,CAEA,KACC3jC,EACA4jC,EACA34B,EACAnL,EACA4jC,EACAC,EAAmB,GAClB,CACD,YAAK,WAAW3jC,CAAK,EACd,MAAM,KAAKA,EAAO4jC,EAAK34B,EAAInL,EAAK4jC,EAAUC,CAAO,CACzD,CAEA,QACC3jC,EACAF,EACA4jC,EACAC,EAAmB,GAClB,CACD,YAAK,WAAW3jC,CAAK,EACd,MAAM,QAAQA,EAAOF,EAAK4jC,EAAUC,CAAO,CACnD,CACD,EAjSmH,mBAA5G,IAAMX,EAAN,C,+HC3xBP,IAAIa,EAAS,IAEN,SAASC,GAAiB,CAChC,OAAOD,GACR,CAFgB,EAAAC,EAAA,kBA4BT,MAAM,GAAN,gBAAqB,cAA2B,CAiBtD,YAAYx1B,EAAoCivB,EAAkC,CAAC,EAAG,CACrF,MAAM,EAEN,KAAK,UAAY,CAChB,UAAW,EAAO,UAClB,UAAW,EAAO,UAClB,OAAQ,EAAO,QAChB,EAEKA,EAAQ,YACZ,KAAK,UAAY,OAAO,OAAO,KAAK,UAAWA,EAAQ,SAAS,GAEjE,KAAK,WAAaA,EAAQ,WAAa,GACvC,KAAK,WAAaA,EAAQ,WAAa,GAEvC,KAAK,QAAUA,EAAQ,SAAW,GAElC,KAAK,SAAW,KAChB,KAAK,SAAW,GAEX,OAAOjvB,GAAY,WACvB,KAAK,QAAUA,EAEf,KAAK,QAAUA,CACjB,CAMA,IAAI,WAAY,CACf,OAAO,KAAK,YAAc,KAAK,UAChC,CAEA,IAAI,UAAUvO,EAAK,CAClBA,EAAM,EAAQA,EACTA,IAAQ,KAAK,aAGb,KAAK,SACT,KAAK,WAAW,EAEhB,KAAK,WAAaA,EACpB,CAEA,IAAI,SAAU,CACb,OAAO,KAAK,QACb,CAEA,IAAI,QAAQA,EAAK,CAChBA,EAAM,EAAQA,EACTA,IAAQ,KAAK,UAGlB,KAAK,cAAc,CACpB,CAEA,IAAI,WAAY,CACf,OAAO,KAAK,UACb,CAEA,IAAI,UAAUA,EAAK,CAClB,GAAK,KAAK,SACT,MAAM,IAAI,MAAM,uDAAuD,EAExE,KAAK,WAAaA,CACnB,CAEA,IAAI,SAAU,CACb,OAAO,KAAK,QACb,CAEA,IAAI,QAAQA,EAAK,CAChB,GAAK,KAAK,SACT,MAAM,IAAI,MAAM,mDAAmD,EAEpE,GAAK,EAAEA,aAAe,MACrB,MAAM,IAAI,MAAM,qCAAqC,EAEtD,KAAK,SAAWA,CACjB,CAEA,MAAO,CACN,KAAK,QAAU,EAChB,CAEA,MAAO,CACN,KAAK,QAAU,EAChB,CAEA,UAAW,CACV,KAAK,UAAY,EAClB,CAEA,SAAU,CACT,KAAK,UAAY,EAClB,CAOA,cAAe,CACd,OAAO,SAAS,cACf,KAAK,WAAa,KAAK,UAAU,UAChC,KAAK,WAAa,KAAK,UAAU,UAChC,KAAK,UAAU,MAClB,CACD,CAEA,cAAcC,EAAoB,CACjC,GAAKA,GAASA,EAAM,SAAW,EAC9B,OAED,MAAM+jC,EAAY,KAAK,UACtBC,EAAU,KAAK,SAAW,CAAE,KAAK,SACjCtgC,EAAY,KAAK,aAAa,EAK/B,GAHKqgC,GAAargC,GACjBA,EAAU,UAAU,OAAO,iBAAkBsgC,CAAO,EAEhD,CAAEA,EAAU,CACX,KAAK,UACT,KAAK,SAAS,OAAO,EAEtB,KAAK,KAAK,MAAM,EAEX,KAAK,UACT,KAAK,SAAW,MAEjB,MACD,CAEA,GAAOtgC,EAGP,IAAK,KAAK,QAAU,CACnB,MAAMnB,EAAK,KAAK,QAAQ,EACxB,GAAKA,aAAc,QAAU,CAC5BA,EAAG,KAAKiC,GAAK,CACZ,KAAK,SAAWA,EACX,KAAK,QACTd,EAAU,aAAac,EAAGd,EAAU,UAAU,EAE9CA,EAAU,YAAYc,CAAC,EACxB,KAAK,KAAK,MAAM,CACjB,CAAC,EAAE,MAAMpE,GAAO,CACf,KAAK,KAAK,QAASA,CAAG,CACvB,CAAC,EAED,MAED,MACC,KAAK,SAAWmC,CAClB,CAEO,KAAK,WAGP,KAAK,QACTmB,EAAU,aAAa,KAAK,SAAUA,EAAU,UAAU,EAE1DA,EAAU,YAAY,KAAK,QAAQ,EAEpC,KAAK,KAAK,MAAM,GACjB,CAEA,WAAW1D,EAAoB,CAC9B,GAAK,CAAE,KAAK,UAAYA,GAASA,EAAM,SAAW,GAAK,CAAE,KAAK,SAC7D,OAED,KAAK,WAAa,CAAC,KAAK,WAExB,MAAM+jC,EAAY,KAAK,UACtBrgC,EAAY,KAAK,aAAa,EAC9BugC,EAAgB,KAAK,SAAS,cAE1BvgC,IAAcugC,IAGdF,EACCrgC,GACJA,EAAU,UAAU,IAAI,gBAAgB,EAC9BugC,GACXA,EAAc,UAAU,OAAO,gBAAgB,EAEhD,KAAK,SAAS,OAAO,EAChBvgC,IACC,KAAK,QACTA,EAAU,aAAa,KAAK,SAAUA,EAAU,UAAU,EAE1DA,EAAU,YAAY,KAAK,QAAQ,GAGrC,KAAK,KAAK,QAAQ,EACnB,CACD,EAtNuD,gBAAhD,GAAM,EAEL,UAAY,IAAK,iBAFZ,EAGL,UAAY,IAAK,iBAHZ,EAIL,SAAW,IAAK,gBAJjB,IAAMwgC,EAAN,EAyNP,QAAeA,C,uRC7Pf,MAAMC,EAAQ,WACb,SAAU,iBAAkB,YAAa,SAAU,QAAS,MAAO,QACnE,eAAgB,YAAa,WAAY,UAAW,SAAU,WAC9D,YAAa,UAAW,UAAW,OAAQ,QAAS,OAAQ,WAC5D,QAAS,OAAQ,UAAW,UAAW,kBAAmB,cAC1D,WAAY,SAAU,cAAe,OAAQ,SAAU,WACvD,UAAW,QAAS,MAAO,UAAW,WAAY,YAClD,WAAY,UAAW,MAAO,OAAQ,aAAc,UAAW,SAC/D,SAAU,OAAQ,OAAQ,WAAY,aAAc,OAAQ,KAC5D,YAAa,QAAS,WAAY,UAAW,OAAQ,QAAS,OAC9D,WAAY,OAAQ,OAAQ,MAAO,WAAY,MAAO,YACtD,YAAa,QAAS,SAAU,MAAO,WAAY,OACnD,aAAc,OAAQ,UAAW,UAAW,OAAQ,cAAe,SACnE,UAAW,aAAc,WAAY,MAAO,WAAY,WAAY,OACpE,UAAW,UAAW,QAAS,SAAU,WAAY,WAAY,QACjE,OAAQ,QAAS,OAAQ,OAAQ,aAAc,MAAO,SAAU,UAChE,SAAU,QAAS,OAAQ,QAAS,UAAW,WAAY,SAC3D,QAAS,OAAQ,SAAU,QAAS,QAAS,MAC9C,EAAC,KAEKC,EAAgB,WACrB,WAAY,WAAY,MACzB,EAAC,KAGK/8B,EAAQ,SAAS,YAAY,EAEnC,SAASg9B,EAAUzjC,EAAc,CAChC,OAAOA,EAAK,QAAQ,UAAWqM,GAAKA,EAAE,CAAC,EAAE,YAAY,CAAC,CACvD,CAFS,EAAAo3B,EAAA,aAQF,SAASC,EAAGC,EAAkB1rB,EAAc2rB,EAAqDjH,EAA6C,CACpJ,OAAOgH,EAAI,iBAAiB1rB,EAAM2rB,EAAUjH,CAAO,CACpD,CAFgB,EAAA+G,EAAA,MAQT,SAASG,EAAIF,EAAkB1rB,EAAc2rB,EAAqDjH,EAA0C,CAClJ,OAAOgH,EAAI,oBAAoB1rB,EAAM2rB,EAAUjH,CAAO,CACvD,CAFgB,EAAAkH,EAAA,OAyBT,SAASC,EACf1d,EACAwb,EACAC,EAAgB,GAChB5yB,EAAkB,EAClB80B,EACe,CACf,GAAK,CAAEA,EACNA,EAAU,IAAI,YACLA,EAAQ,IAAI3d,CAAI,EACzB,OAAO,KAER,GAAKwb,EAASxb,CAAI,EACjB,OAAOA,EAER,GAAKnX,GAAW4yB,EACf,OAAO,KAIR,GAFAkC,EAAQ,IAAI3d,CAAI,EAEXA,GAAM,OAAO,SACjB,GAAK,MAAM,QAAQA,EAAK,MAAM,QAAQ,GACrC,UAAUjM,MAASiM,EAAK,MAAM,SAC7B,GAAOjM,GAGP,GAAK,MAAM,QAAQA,EAAK,EACvB,UAAUnR,MAAKmR,GAAO,CACrB,MAAMza,GAAMokC,EAAkB96B,GAAG44B,EAAUC,EAAO5yB,EAAU,EAAG80B,CAAO,EACtE,GAAKrkC,GACJ,OAAOA,EACT,KACM,CACN,MAAMA,GAAMokC,EAAkB3pB,GAAgBynB,EAAUC,EAAO5yB,EAAU,EAAG80B,CAAO,EACnF,GAAKrkC,GACJ,OAAOA,EACT,MAEK,CACN,MAAMA,GAAMokC,EAAkB1d,EAAK,MAAM,SAAmBwb,EAAUC,EAAO5yB,EAAU,EAAG80B,CAAO,EACjG,GAAKrkC,GACJ,OAAOA,EACT,CAGD,OAAO,IACR,CA9CgB,EAAAokC,EAAA,qBAwFT,SAAShyB,EAAc0G,EAAa9H,KAAgB0B,EAAsC,CAChG,MAAMzQ,EAAK,SAAS,cAAc6W,CAAG,EAOrC,GALKpG,EAAS,SAAW,EACxBA,EAAW,KACFA,EAAS,SAAW,IAC7BA,EAAWA,EAAS,CAAC,GAEjB,OAAO1B,GAAU,SACrB/O,EAAG,UAAY+O,UACNA,GACT,UAAUhQ,KAAOgQ,EAChB,MAAK,OAAIA,EAAOhQ,CAAG,EAAI,CACtB,MAAMsjC,GAAKtjC,EAAI,YAAY,EAC1BujC,GAAOvzB,EAAMhQ,CAAG,EAEjB,GAAKsjC,KAAO,QACX,GAAK,OAAOC,IAAS,SACpBtiC,EAAG,MAAM,QAAUsiC,WACVA,IAAQ,OAAOA,IAAS,SACjC,SAAU,CAACvjC,GAAKvB,EAAG,IAAK,OAAO,QAAQ8kC,EAAI,KACrC,OAAItiC,EAAG,MAAOjB,EAAG,MAAK,OAAI,OAAO,eAAeiB,EAAG,KAAK,EAAGjB,EAAG,EACjEiB,EAAG,MAAcjB,EAAG,EAAIvB,GAEzBwC,EAAG,MAAM,YAAYjB,GAAKujC,GAAKvjC,EAAG,CAAC,OAE5B,SAASujC,IAAQ,MAC1B,QAAQ,KAAK,0BAA2BA,EAAI,UAElCD,KAAO,UAClB,GAAKC,IAAQ,OAAOA,IAAS,SAC5B,UAAUx5B,MAAKw5B,MACT,OAAIA,GAAMx5B,EAAC,IACf9I,EAAG,QAAQ8hC,EAAUh5B,EAAC,CAAC,EAAIw5B,GAAKx5B,EAAC,QACxB,SAASw5B,IAAQ,MAC5B,QAAQ,KAAK,4BAA6BA,EAAI,OAEpCvjC,IAAQ,0BAEdujC,IAAQA,GAAK,SACjBtiC,EAAG,UAAYsiC,GAAK,QAEVD,GAAG,WAAW,IAAI,EAC7BriC,EAAG,iBAAiBqiC,GAAG,MAAM,CAAC,EAAGC,EAAI,EAE5BD,GAAG,WAAW,OAAO,EAC9BriC,EAAG,QAAQ8hC,EAAUO,GAAG,MAAM,CAAC,CAAC,CAAC,EAAIC,GAE5BT,EAAc,SAASQ,EAAE,EAC7BC,IAAQA,KAAS,SACrBtiC,EAAG,aAAajB,EAAKujC,EAAI,EAEfD,GAAG,WAAW,OAAO,GAAKT,EAAM,SAASS,EAAE,EACtDriC,EAAG,aAAajB,EAAKujC,EAAI,EAGxBtiC,EAAWjB,CAAG,EAAIujC,EACrB,EAEF,OAAK7xB,GACJ8xB,EAAYviC,EAAIyQ,CAAQ,EAElBzQ,CACR,CA/DgB,EAAAmQ,EAAA,iBA6ET,SAASoyB,EACfx2B,EACA0E,EACA+xB,EAAuB,GACvBC,EAAoB,GACnB,CAID,GAHID,GACH,OAAO,aAAa,IAAI,EAAE,IAAI,KAAK,iFAAiF,EAEjH/xB,aAAoB,KACjBgyB,IACL12B,EAAQ,UAAY,IAErBA,EAAQ,YAAY0E,CAAQ,UAEjB,MAAM,QAAQA,CAAQ,EAAI,CAC/BgyB,IACL12B,EAAQ,UAAY,IAErB,UAAUyM,KAAS/H,EAClB,GAAI+H,aAAiB,KACpBzM,EAAQ,YAAYyM,CAAK,UACjB,MAAM,QAAQA,CAAK,EAC3B+pB,EAAYx2B,EAASyM,EAAOgqB,EAAa,EAAI,UACrChqB,EAAO,CACf,MAAMhb,GAAM,OAAOgb,GAAU,SAAWA,EAAQ,OAAOA,CAAK,EAM5DzM,EAAQ,YAAY,SAAS,eAAevO,EAAG,CAAC,CACjD,CAEF,SAAWiT,EAAU,CACpB,MAAMjT,EAAM,OAAOiT,GAAa,SAAWA,EAAW,OAAOA,CAAQ,EAKrE1E,EAAQ,YAAY,SAAS,eAAevO,CAAG,CAAC,CACjD,CACD,CA1CgB,EAAA+kC,EAAA,eAoDT,SAASG,EAAgB32B,EAAsBswB,EAAav8B,EAAmB,CACrF,KAAMiM,GAAS,CACd,GAAKA,EAAQ,SAASswB,CAAK,EAC1B,MAAO,GAERtwB,EAAUA,EAAQ,cACbjM,IACJiM,EAAUA,aAAmB,QAC1BA,EAAQ,QAAQjM,CAAQ,EACxB,KACL,CAEA,MAAO,EACR,CAbgB,EAAA4iC,EAAA,mBA0BT,SAASC,EAASC,EAAqBC,EAAmB,CAChE,OAAO,IAAI,QAA8B5iC,GAAW,CACnD,MAAMwE,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,KAAO,OACbA,EAAM,OAASm+B,EACfn+B,EAAM,SAAWo+B,EAEjB,IAAIC,EAAW,GAgBfr+B,EAAM,SAAW,IAAM,CAEtB,GAAK,CAAEq+B,EAAW,CACjBA,EAAW,GACX,MAAMC,GAAQ,MAAM,KAAKt+B,EAAM,OAAS,CAAC,CAAC,EAC1CxE,EAAQ4iC,EAAWE,GAAQA,GAAM,CAAC,CAAC,CACpC,CACD,EAEAt+B,EAAM,MAAM,CACb,CAAC,CACF,CAlCgB,EAAAk+B,EAAA,YA0CT,SAASK,EAASC,EAAYC,EAAW,QAAS,CACxD,OAAO,IAAI,QAAQ,CAACjjC,EAASC,IAAW,CACvC,MAAMijC,EAAS,IAAI,WACnBA,EAAO,WAAWF,EAAMC,CAAQ,EAChCC,EAAO,OAAS,IAAMljC,EAAQkjC,EAAO,MAAM,EAC3CA,EAAO,QAAUlhC,IAAK/B,EAAO+B,EAAC,CAC/B,CAAC,CACF,CAPgB,EAAA+gC,EAAA,YAUhB,MAAMhjC,EAAK,SAAS,cAAc,MAAM,EAYjC,SAASojC,EAASl0B,EAAc,CACtClP,EAAG,YAAckP,EACjB,MAAMnR,EAAMiC,EAAG,UAEf,OAAAA,EAAG,YAAc,GACVjC,CACR,CANgB,EAAAqlC,EAAA,YAShB,IAAIrzB,EAAU,EAEP,MAAM,EAAN,MAAM,CAAa,CAMzB,YAAYzI,EAAa,CACxB,KAAK,GAAKA,GAAMyI,IAEhB,KAAK,QAAU,CAAC,EAEhB,KAAK,OAASI,EAAc,QAAS,CACpC,KAAM,WACN,GAAI,uBAAuB,KAAK,EAAE,EACnC,CAAC,EAED,SAAS,KAAK,YAAY,KAAK,MAAM,CACtC,CAEA,SAAU,CACJ,KAAK,QACT,KAAK,OAAO,OAAO,EAIpB,KAAK,QAAU,KACf,KAAK,OAAS,IACf,CAEA,OAAQ,CACP,KAAK,QAAU,CAAC,EAChB,KAAK,OAAO,UAAY,EACzB,CAEA,IAAIpR,EAAa,CAChB,MAAMskC,EAAQ,KAAK,QAAQtkC,CAAG,EAC9B,GAAKskC,EACJ,OAAOA,EAAM,WAEf,CAEA,IAAItkC,EAAa,CAChB,MAAO,CAAC,CAAE,KAAK,QAAQA,CAAG,CAC3B,CAEA,IAAIA,EAAaE,EAAeie,EAAiB,GAAO,CACvD,MAAMmmB,EAAQ,KAAK,QAAQtkC,CAAG,EAC9B,GAAKskC,EAAQ,CACZ,GAAK,CAAEnmB,GAASmmB,EAAM,cAAgBpkC,EACrC,OAEDokC,EAAM,YAAcpkC,CACrB,MACC,KAAK,OAAO,YAAY,KAAK,QAAQF,CAAG,EAAI,SAAS,eAAeE,CAAK,CAAC,CAC5E,CAEA,OAAOF,EAAa,CACnB,MAAMskC,EAAQ,KAAK,QAAQtkC,CAAG,EACzBskC,IACC,KAAK,OAAO,SAASA,CAAK,GAC9B,KAAK,OAAO,YAAYA,CAAK,EAE9B,KAAK,QAAQtkC,CAAG,EAAI,KAEtB,CACD,EAjE0B,oBAAnB,IAAMukC,EAAN,EAoEA,MAAM,EAAN,MAAM,CAAa,CAMzB,YAAYv3B,EAAsByvB,EAAyC,CAC1E,KAAK,GAAKzvB,EACV,KAAK,GAAKyvB,EAEV,KAAK,IAAM,KAAK,YAAY,KAAK,IAAI,EACrC,SAAS,gBAAgB,iBAAiB,QAAS,KAAK,GAAG,CAC5D,CAEA,SAAU,CACJ,KAAK,KACT,SAAS,gBAAgB,oBAAoB,QAAS,KAAK,GAAG,EAE/D,KAAK,GAAK,KAAK,GAAK,KAAK,IAAM,IAChC,CAEA,YAAY/9B,EAAmB,CACzB,KAAK,IAAM,KAAK,IAAM,CAAE,KAAK,GAAG,SAASA,EAAM,MAAc,GACjE,KAAK,GAAGA,CAAK,CACf,CAED,EA1B0B,oBAAnB,IAAM8lC,EAAN,EA2CA,SAASC,EAAcC,EAAaC,EAAS,GAAOxD,EAAQ,EAAGH,EAAY,GAAY,CAC7F,IAAI4D,EAAS,GAAIC,GAAe,GAMhC,GALKF,IACJC,EAAS,OAAO,OAAOzD,EAAQ,CAAC,EAChC0D,GAAe,OAAO,OAAO1D,CAAK,GAG9BA,EAAQH,EACZ,MAAO,0DAER,GAAI0D,GAAU,KACb,MAAO,wCAAwCvD,CAAK,gBAErD,GAAK,OAAOuD,GAAW,UAAY,OAAOA,GAAW,UACpD,MAAO,wCAAwCvD,CAAK,KAAKuD,CAAM,UAEhE,GAAK,OAAOA,GAAW,SACtB,MAAO,qCAAqCvD,CAAK,KAAKkD,EAAS,KAAK,UAAUK,CAAM,CAAC,CAAC,UAEvF,GAAK,MAAM,QAAQA,CAAM,EACxB,MAAO,yCAAyCvD,CAAK,cACjDuD,EAAO,OAAS,EAClBA,EAAO,IAAIl7B,KAAMm7B,EAAS;AAAA,EAAKE,EAAY,GAAK,IAAMJ,EAAcj7B,GAAGm7B,EAAQxD,EAAQ,EAAGH,CAAS,CAAC,EAAE,KAAK,wCAAwCG,CAAK,aAAa,GAClKwD,EAAS;AAAA,EAAKC,CAAM,GAAK,IACzB,IACF,0CAA0CzD,CAAK,aAEnD,MAAMniC,GAAM,CAAC,EAEb,SAAU,CAACgB,GAAKvB,EAAG,IAAK,OAAO,QAAQimC,CAAM,EACvC1lC,GAAI,OAAS,GACjBA,GAAI,KAAK,wCAAwCmiC,CAAK,aAAa,EAE/DwD,GACJ3lC,GAAI,KAAK;AAAA,EAAK6lC,EAAY,EAAE,EAC7B7lC,GAAI,KAAK,wCAAwCmiC,CAAK,KAAKkD,EAAS,KAAK,UAAUrkC,EAAG,CAAC,CAAC,mDAAmDmhC,CAAK,aAAa,EAC7JniC,GAAI,KAAKylC,EAAchmC,GAAKkmC,EAAQxD,EAAQ,EAAGH,CAAS,CAAC,EAG1D,MAAO,yCAAyCG,CAAK,aAAaniC,GAAI,KAAK,EAAE,CAAC,GAAGA,GAAI,QAAU2lC,EAAS;AAAA,EAAKC,CAAM,GAAK,EAAE,0CAA0CzD,CAAK,YAC1K,CAxCgB,EAAAsD,EAAA,gB,yECtfhB,QAAe,IAA0B,mBCEnCK,EAAc,CACnB,UACA,QACA,cACA,UACA,YACA,SACA,eACA,SACA,QACA,sBACA,iBACA,SACA,eACA,kBACA,UACA,WACA,cACA,kBACA,eACD,EAEaC,EAAc,SAAS,OAAO,MACxCD,EAAY,OAAO5Z,GAAQ,SAAS,MAAM,MAAM,QAAQA,CAAI,EAAE,CAAC,EAAE,KAAK,EACtE4Z,EAAY,KAAK,EAKdE,EAAe,CACpB,SACA,YACA,eACA,OACA,aACA,mBACA,kBACA,SACA,UACA,YACA,cACA,UACA,SACA,eACA,SACA,UACA,cACA,mBACA,OACA,QACA,QACA,eACA,YACA,cACA,eACA,QACA,YACA,WACA,gBACA,eACA,YACA,aACA,eACA,OACD,EAEMC,EAAgB,IAAI,IACpBC,EAAsB,IAAI,IAEhC,SAASC,EAAeja,EAAc,CACrC,GAAKga,EAAoB,IAAIha,CAAI,EAChC,OAED,MAAM5rB,EAAO,mBAAmB4rB,CAAI,EAE9Bpb,KAAO,iBAAc,OAAQ,CAClC,GAAI,YAAYxQ,CAAI,GACpB,IAAK,aACL,KAAM,4CAA4CA,CAAI,EACvD,CAAC,EAED4lC,EAAoB,IAAIha,EAAMpb,CAAI,EAClC,SAAS,KAAK,YAAYA,CAAI,CAC/B,CAdS,EAAAq1B,EAAA,kBAgBT,SAASC,EAAiBla,EAAc,CACvC,MAAMpb,EAAOo1B,EAAoB,IAAIha,CAAI,EAClCpb,IAGPo1B,EAAoB,OAAOha,CAAI,EAC/Bpb,EAAK,OAAO,EACb,CAPS,EAAAs1B,EAAA,oBAYT,MAAMC,EAAW,CAChB,eACA,mBACA,kBACD,EAIA,IAAIC,EAAW,EACXC,EAAkC,KAEtC,SAASC,GAAmB,CACtBD,IAGLA,KAAU,iBAAc,OAAQ,CAC/B,GAAI,wBACJ,IAAK,aACL,KAAM,WACN,KAAM,CACP,CAAC,EAED,SAAS,KAAK,YAAYA,CAAO,EAClC,CAZS,EAAAC,EAAA,oBAeT,SAASC,GAAqB,CACtBF,IAGPA,EAAQ,OAAO,EACfA,EAAU,KACX,CANS,EAAAE,EAAA,sBA+BF,SAASC,GAA6C,CAC5D,MAAM1mC,EAAoC,CACzC,CAAC,MAAO,GAAI,SAAU,uBAAwB,MAAO,SAAS,EAC9D,CAAC,UAAW,GAAM,SAAU,uBAAwB,MAAO,gBAAgB,CAC5E,EAEA,UAAUksB,KAAQ6Z,EACjB/lC,EAAI,KAAK,CAAC,MAAOksB,EAAM,MAAOA,CAAI,CAAC,EAEpClsB,EAAI,KAAK,CACR,UAAW,GAAM,SAAU,wBAAyB,MAAO,gBAC5D,CAAC,EAED,UAAUksB,KAAQma,EACjBrmC,EAAI,KAAK,CAAC,MAAOksB,EAAM,MAAOA,CAAI,CAAC,EAEpClsB,EAAI,KAAK,CACR,UAAW,GAAM,SAAU,sBAAuB,MAAO,cAC1D,CAAC,EAED,UAAUksB,KAAQ8Z,EACjBhmC,EAAI,KAAK,CAAC,MAAO,UAAUksB,CAAI,GAAI,MAAOA,CAAI,CAAC,EAEhD,OAAOlsB,CACR,CAxBgB,EAAA0mC,EAAA,gBA2BT,SAASC,EAAQza,EAA6C,CACpE,GAAK,CAAEA,EACN,MAAO,CAACA,EAAM,IAAI,EAEnB,GAAKma,EAAS,SAASna,CAAI,EAAI,CAC9Boa,IACKA,IAAa,GACjBE,EAAiB,EAElB,IAAII,EAAW,GAUf,MAAO,CAAC1a,EATS,MAAM,CACf0a,IACNA,EAAW,GACXN,IACOA,GACNG,EAAmB,EAEtB,EAPiB,WASK,CACvB,CAEA,GAAKva,EAAK,WAAW,SAAS,EAAI,CACjC,MAAM5rB,EAAO4rB,EAAK,MAAM,CAAC,EACxBgC,GAAS+X,EAAc,IAAI3lC,CAAI,GAAK,GAAK,EAE1C2lC,EAAc,IAAI3lC,EAAM4tB,CAAK,EACxBA,IAAU,GACdiY,EAAe7lC,CAAI,EAEpB,IAAIsmC,EAAW,GAcf,MAAO,CAACtmC,EAbS,MAAM,CACtB,GAAK,CAAEsmC,EAAW,CACjBA,EAAW,GACX,MAAM1Y,GAAS+X,EAAc,IAAI3lC,CAAI,GAAK,GAAK,EAC1C4tB,EAAQ,EACZ+X,EAAc,IAAI3lC,EAAM4tB,CAAK,GAE7B+X,EAAc,OAAO3lC,CAAI,EACzB8lC,EAAiB9lC,CAAI,EAEvB,CACD,EAXiB,WAaK,CACvB,CAEA,MAAO,CAAC4rB,EAAM,IAAI,CACnB,CAhDgB,EAAAya,EAAA,U,gGC9KT,MAAME,EAAyD,CACrE,SAAU,CAACz1B,EAAiBsJ,KACtBtJ,EAAE,aAAesJ,EAAE,YACtBtJ,EAAU,YAAc01B,EAAU11B,EAAE,YAAiCsJ,EAAE,WAAkB,EACjFA,EAAE,cACVtJ,EAAU,YAAcsJ,EAAE,aAErBtJ,GAGR,MAAO,CAACA,EAAcsJ,KAChBtJ,EAAE,OAAS,CAAEsJ,EAAE,MAAQA,EAAE,KAAK,QAAUtJ,EAAE,KAAK,SAM/CA,EAAE,cAAgBsJ,EAAE,aACvBtJ,EAAU,aAAe21B,EAAM31B,EAAE,aAAcsJ,EAAE,YAAY,EACrDA,EAAE,eACVtJ,EAAU,aAAesJ,EAAE,eAEtBtJ,GAGR,oBAAqB,CAACA,EAA4BsJ,KAC5CtJ,EAAE,YAAcsJ,EAAE,YAMlBtJ,EAAE,cAAgBsJ,EAAE,aACvBtJ,EAAU,aAAe21B,EAAM31B,EAAE,aAAcsJ,EAAE,YAAY,EACrDA,EAAE,eACVtJ,EAAU,aAAesJ,EAAE,eAEtBtJ,GAGR,mBAAoB,CAACA,EAA2BsJ,KAC1CtJ,EAAE,eAAiBsJ,EAAE,gBACpBtJ,EAAE,cAAc,OAASsJ,EAAE,cAAc,MAGzCtJ,EAAE,cAAc,KAAK,OAASsJ,EAAE,cAAc,KAAK,SAMpDtJ,EAAE,cAAgBsJ,EAAE,aACvBtJ,EAAU,aAAe21B,EAAM31B,EAAE,aAAcsJ,EAAE,YAAY,EACrDA,EAAE,eACVtJ,EAAU,aAAesJ,EAAE,eAEtBtJ,GAGR,aAAc,CAACA,EAAqBsJ,KAC9BtJ,EAAE,YAAcsJ,EAAE,WACtBtJ,EAAE,WAAa01B,EAAU11B,EAAE,WAA+BsJ,EAAE,UAAiB,EACpEA,EAAE,aACXtJ,EAAE,WAAasJ,EAAE,YAEXtJ,EAET,EAGO,SAAS01B,EAAU11B,EAAUsJ,EAAU,CAC7C,IAAIssB,EAAgB,GACpB,MAAMC,EAA+B,CAAC,EACtC,UAAUzf,KAAQpW,EACZ,CAAEoW,GAAQ,CAAEA,EAAK,MAAQA,EAAK,KAAK,OAAS,SAG5CA,EAAK,YACTwf,EAAgB,IAEjBC,EAAQzf,EAAK,KAAK,KAAK,EAAIA,GAG5B,UAAUA,KAAQ9M,EAAG,CACpB,GAAK,CAAE8M,GAAQ,CAAEA,EAAK,MAAQA,EAAK,KAAK,OAAS,OAChD,SAED,MAAMlnB,EAAOknB,EAAK,KAAK,MACtBlZ,EAAM24B,EAAQ3mC,CAAI,EAAI8Q,EAAE,QAAQ61B,EAAQ3mC,CAAI,CAAC,EAAI,GAElD,GAAKgO,IAAQ,GAAK,CACjB,GAAK8C,EAAE9C,CAAG,EAAE,WAAakZ,EAAK,WAAapW,EAAE9C,CAAG,EAAE,YAAckZ,EAAK,UACpE,SAEDpW,EAAE9C,CAAG,EAAIy4B,EAAM31B,EAAE9C,CAAG,EAAGkZ,CAAI,EACtBpW,EAAE9C,CAAG,EAAE,YACX04B,EAAgB,GAElB,KAAO,CACN,GAAKA,GAAiBxf,EAAK,UAC1B,SAEDpW,EAAE,KAAKoW,CAAI,CACZ,CACD,CAEA,OAAOpW,CACR,CArCgB,EAAA01B,EAAA,aAwCD,SAASC,EAAM31B,EAAQsJ,EAAQ,CAC7C,OAAKtJ,EAAE,OAASsJ,EAAE,KACVtJ,EAEHy1B,EAAcz1B,EAAE,IAAI,EACjBy1B,EAAcz1B,EAAE,IAAI,EAAEA,EAAGsJ,CAAC,EAE3BtJ,CACR,CARwB,EAAA21B,EAAA,Q,wJCtHjB,SAASG,EAAUC,EAAqB,EAAG,CACjD,MAAM95B,EAAM,KAAK,MAAM,KAAK,IAAI,EAAI,GAAI,EACxC,OAAOA,EAAOA,EAAM85B,CACrB,CAHgB,EAAAD,EAAA,aAKT,SAASE,EACf9Q,EACA+Q,EACAC,EACAC,EACAC,EACC,CACD,MAAMC,EAAUnR,EAAU,GAC1B,IAAIoR,EAAU,KAAK,MAAMpR,EAAU,EAAE,EACpCqR,EAAQ,KAAK,MAAMD,EAAU,EAAE,EAC/BE,EAAO,GAIR,GAFAF,EAAUA,EAAU,GAEfL,EAAgB,CACpB,MAAMQ,EAAY,KAAK,MAAMF,EAAQ,EAAE,EAEvC,GADAA,EAAQA,EAAQ,GACXL,GAAaO,EAAY,EAC7B,MAAO,GAAGD,CAAI,QAEfA,EAAOC,EAAY,EAAI,GAAGA,CAAS,UAAY,EAChD,CAEA,MAAMC,EAAcP,IAAa,IAASK,GAAM,OAAS,GAAKD,EAAQ,EAEtE,MAAO,GAAGC,CAAI,GACbE,EAAa,GAAGF,GAAQD,EAAQ,GAAK,IAAM,EAAE,GAAGA,CAAK,IAAM,EAC5D,GAAGG,GAAcJ,EAAU,GAAK,IAAM,EAAE,GAAGA,CAAO,GACjDF,EAAa,GAAK,IAAIC,EAAU,GAAK,IAAM,EAAE,GAAGA,CAAO,EAAE,EAC3D,CA7BgB,EAAAL,EAAA,sBAgCT,SAASW,EAAeN,EAAiB,CAC/C,IAAIC,EAAU,KAAK,MAAMD,EAAU,EAAE,EACrC,MAAME,EAAQ,KAAK,MAAMD,EAAU,EAAE,EAErC,OAAAA,GAAW,GACXD,GAAW,GAEJ,GAAGE,EAAQ,EAAI,GAAGA,CAAK,IAAID,EAAU,GAAK,IAAM,EAAE,GAAK,EAAE,GAAGA,CAAO,IAAID,EAAU,GAAK,IAAM,EAAE,GAAGA,CAAO,EAChH,CARgB,EAAAM,EAAA,kBAWT,SAASC,EAAgB1R,EAAiB,CAChD,MAAMmR,EAAUnR,EAAU,GAC1B,IAAIoR,EAAU,KAAK,MAAMpR,EAAU,EAAE,EACjCqR,EAAQ,KAAK,MAAMD,EAAU,EAAE,EACnC,MAAME,EAAO,KAAK,MAAMD,EAAQ,EAAE,EAElC,OAAAD,EAAUA,EAAU,GACpBC,EAAQA,EAAQ,GAET,GAAGC,EAAO,EAAI,GAAGA,CAAI,IAAM,EAAE,GAAGD,EAAQ,EAAI,GAAGA,CAAK,IAAM,EAAE,GAAGD,EAAU,EAAI,GAAGA,CAAO,IAAM,EAAE,GAAGD,EAAU,EAAI,GAAGA,CAAO,IAAM,EAAE,EAC1I,CAVgB,EAAAO,EAAA,mBAaT,SAASC,EAAe3R,EAAiB,CAC/C,MAAMmR,EAAUnR,EAAU,GAC1B,IAAIoR,EAAU,KAAK,MAAMpR,EAAU,EAAE,EACrC,MAAMqR,EAAQ,KAAK,MAAMD,EAAU,EAAE,EAErC,OAAAA,EAAUA,EAAU,GAEb,GAAGC,EAAQ,EAAI,GAAGA,CAAK,IAAM,EAAE,GAAGD,EAAU,EAAI,GAAGA,CAAO,IAAM,EAAE,GAAGD,EAAU,EAAI,GAAGA,CAAO,IAAM,EAAE,EAC7G,CARgB,EAAAQ,EAAA,iB,uFC3BD,MAAM,EAAN,MAAM,UAAmB,oBAAM,KAAC,CAmB9C,YAAY3nC,EAAeqB,EAAwB,CAClD,MAAMrB,EAAMqB,CAAM,EAlBnB,YAAiB,KACjB,UAAsB,KAmBrB,KAAK,KAAO,KAAK,OAEjB,KAAK,OAAO,aAAa,EAEzB,KAAK,kBAAoB,IAAI,IAC7B,KAAK,qBAAuB,IAAI,IAEhC,KAAK,oBAAsB,IAAI,IAC/B,KAAK,uBAAyB,IAAI,IAElC,KAAK,kBAAoB,IAAI,IAC7B,KAAK,qBAAuB,IAAI,IAEhC,KAAK,UAAY,IAAI,IACrB,KAAK,cAAgB,IAAI,IAIzB,KAAK,gBAAe,YAAS,KAAK,aAAc,EAAE,CACnD,CAEA,YACCy5B,EACA8M,EACAjL,EACC,CACD,IAAI70B,EACJ,MAAK,CAAE8/B,GAAa,CAAEjL,GAAW,UAAW7B,GAASA,EAAM,MAC1DhzB,EAAQgzB,GAERhzB,EAAQ,CACP,MAAAgzB,EACA,UAAA8M,CACD,EAEKjL,IACJ70B,EAAQ,OAAO,OAAOA,EAAO60B,CAAO,IAG/B,KAAK,OAAO,OAAO,MAAM70B,CAAK,CACtC,CAEA,OACC+/B,EACAD,EACAjL,EACC,CACD,IAAI70B,EACJ,MAAK,CAAE8/B,GAAa,CAAEjL,GAAW,aAAckL,GAAYA,EAAS,SACnE//B,EAAQ+/B,GAER//B,EAAQ,CACP,SAAA+/B,EACA,UAAAD,CACD,EAEKjL,IACJ70B,EAAQ,OAAO,OAAOA,EAAO60B,CAAO,IAG/B,KAAK,OAAO,OAAO,OAAO70B,CAAK,CACvC,CAEA,IAAI,cAAe,CAClB,MAAMuH,EAAU,KAAK,KAAK,WAAW,EACrC,OAAOA,GAAWA,EAAQ,cAAgB,IAC3C,CAEA,IAAI,QAAS,CACZ,MAAMA,EAAU,KAAK,KAAK,WAAW,EACrC,OAAOA,GAAWA,EAAQ,QAAU,OACrC,CAOA,MAAM,WAAY,CAEjB,MAAM/P,EAAO,MAAM,KAAK,YACvB,MAAM,oCACP,EAEA,SAAO,OAAI,cAAeA,CAAI,CAC/B,CAgBA,MAAM,sBACLw7B,EACAzT,EAAgB,GAChBpC,EAAwB,KACvB,CACD,MAAM3lB,EAAO,MAAM,KAAK,YACvB,MAAM,qCACN,CACC,MAAAw7B,EACA,MAAAzT,EACA,OAAApC,CACD,CACD,EAEM6iB,KAAQ,OAAI,yCAA0CxoC,CAAI,GAAK,CAAC,EACrEyoC,EAASjN,EAAM,YAAY,EAE5B,OAAK,MAAM,QAAQgN,CAAK,GACvBA,EAAM,KAAK,CAACh3B,EAAEsJ,IAAM,CACnB,MAAM4tB,EAAUl3B,IAAMA,EAAE,MAAM,cAAc,IAAMi3B,GAAUj3B,GAAG,aAAa,cAAc,IAAMi3B,GAC/FE,EAAUn3B,IAAMsJ,EAAE,MAAM,cAAc,IAAM2tB,GAAU3tB,GAAG,aAAa,cAAc,IAAM2tB,GAE3F,OAAKC,GAAW,CAAEC,EAAiB,GAC9B,CAAED,GAAWC,EAAiB,EAC5B,CACR,CAAC,EAEK,CACN,UAAQ,OAAI,2CAA4C3oC,CAAI,EAC5D,MAAAwoC,EACA,SAAU,IAAE,OAAI,6CAA8CxoC,CAAI,EAClE,SAAO,OAAI,mCAAoCA,CAAI,GAAK,CACzD,CACD,CAgBA,MAAM,YAAY2J,EAAIjJ,EAAM,CAC3B,MAAMV,EAAO,MAAM,KAAK,YACvB,MAAM,qCACN,CAAE,GAAA2J,EAAI,KAAAjJ,CAAK,CACZ,EAEA,SAAO,OAAI,YAAaV,CAAI,CAC7B,CAOA,MAAM,kBACLuJ,EACAq/B,EACC,CACDr/B,EAAa,OAAOA,CAAU,EAE9B,MAAMvJ,EAAO,MAAM,KAAK,OAAO,CAC9B,SAAU,MAAM,oCAChB,UAAW,CACV,MAAO,CACN,UAAWuJ,EACX,UAAWq/B,CACZ,CACD,CACD,CAAC,EAEKlpC,KAAO,OAAI,sCAAuCM,CAAI,EAE5D,GAAKN,IAAS,wBACb,MAAM,IAAI,oBACT,gDACA,mCACD,EAED,GAAKA,IAAS,sBACb,MAAM,IAAI,oBACT,2DACA,qCACA,OAAI,wCAAyCM,CAAI,CAClD,EAED,GAAKN,IAAS,UACb,MAAM,IAAI,oBACT,gDACA,uBACD,EAED,MAAO,EACR,CAgBA,MAAM,iBAAiB87B,EAAOzT,EAAQ,GAAIpC,EAAS,KAAM,CACxD,MAAM3lB,EAAO,MAAM,KAAK,YACvB,MAAM,oCACN,CACC,MAAAw7B,EACA,MAAAzT,EACA,OAAApC,CACD,CACD,EAEM6iB,KAAQ,OAAI,oCAAqCxoC,CAAI,GAAK,CAAC,EAChEyoC,EAASjN,EAAM,YAAY,EAE5B,OAAK,MAAM,QAAQgN,CAAK,GACvBA,EAAM,KAAK,CAACh3B,EAAEsJ,IAAM,CACnB,MAAM4tB,EAAUl3B,IAAMA,EAAE,OAAO,cAAc,IAAMi3B,GAAUj3B,GAAG,aAAa,cAAc,IAAMi3B,GAChGE,EAAUn3B,IAAMsJ,EAAE,OAAO,cAAc,IAAM2tB,GAAU3tB,GAAG,aAAa,cAAc,IAAM2tB,GAE5F,OAAKC,GAAW,CAAEC,EAAiB,GAC9B,CAAED,GAAWC,EAAiB,EAC5B,CACR,CAAC,EAEK,CACN,UAAQ,OAAI,sCAAuC3oC,CAAI,EACvD,MAAAwoC,EACA,SAAU,IAAE,OAAI,wCAAyCxoC,CAAI,EAC7D,SAAO,OAAI,8BAA+BA,CAAI,GAAK,CACpD,CACD,CAgBA,MAAM,QAAQ2J,EAAIkH,EAAO,CACxB,MAAM7Q,EAAO,MAAM,KAAK,YACvB,MAAM,oCACN,CAAE,GAAA2J,EAAI,MAAAkH,CAAM,CACb,EAEA,SAAO,OAAI,YAAa7Q,CAAI,CAC7B,CAgBA,MAAM,YAAY2J,EAAIkH,EAAO,CAC5B,MAAM7Q,EAAO,MAAM,KAAK,YACvB,MAAM,qCACN,CAAE,GAAA2J,EAAI,MAAAkH,CAAM,CACb,EAEA,SAAO,OAAI,mCAAoC7Q,CAAI,CACpD,CAgBA,MAAM,YAAY2J,EAAIkH,EAAO,CAC5B,MAAM7Q,EAAO,MAAM,KAAK,YACvB,MAAM,qCACN,CAAE,GAAA2J,EAAI,MAAAkH,CAAM,CACb,EAEA,SAAO,OAAI,iBAAkB7Q,CAAI,CAClC,CAGA,MAAM,gBAAgB2J,EAAIkH,EAAO,CAChC,MAAM7Q,EAAO,MAAM,KAAK,YACvB,MAAM,qCACN,CAAE,GAAA2J,EAAI,MAAAkH,CAAM,CACb,EAEA,SAAO,OAAI,0BAA2B7Q,CAAI,CAC3C,CAGA,MAAM,WAAWuJ,EAAYs/B,EAAwB,GAAO,CAC3Dt/B,EAAa,OAAOA,CAAU,EAC9Bs/B,EAAwB,CAAC,CAAEA,EAE3B,MAAM7oC,EAAO,MAAM,KAAK,OAAO,CAC9B,SAAU,MAAM,qCAChB,UAAW,CACV,MAAO,CACN,SAAUuJ,EACV,qBAAsBs/B,CACvB,CACD,CACD,CAAC,EAED,QAAQ,IAAI,SAAU7oC,CAAI,EAC1B,MAAME,KAAM,OAAI,wBAAyBF,CAAI,EAC7C,GAAKE,GAAK,KACT,MAAM,IAAI,MAAMA,EAAI,IAAI,EAEzB,SAAO,OAAI,yBAA0BF,CAAI,CAC1C,CAGA,MAAM,aAAauJ,EAAYs/B,EAAwB,GAAO,CAC7Dt/B,EAAa,OAAOA,CAAU,EAC9Bs/B,EAAwB,CAAC,CAAEA,EAE3B,MAAM7oC,EAAO,MAAM,KAAK,OAAO,CAC9B,SAAU,MAAM,qCAChB,UAAW,CACV,MAAO,CACN,SAAUuJ,CACX,CACD,CACD,CAAC,EAED,eAAQ,IAAI,SAAUvJ,CAAI,KACnB,OAAI,2BAA4BA,CAAI,CAC5C,CAiBA,MAAM,iBAAiB2J,EAAIkH,EAAO,CACjC,MAAM7Q,EAAO,MAAM,KAAK,YACvB,MAAM,qCACN,CAAE,GAAA2J,EAAI,MAAAkH,CAAM,CACb,EAEA,SAAO,OAAI,0BAA2B7Q,CAAI,CAC3C,CAYA,aAAa2J,EAAIkH,EAAO,CACvB,OAAO,IAAI,QAAQ,CAACpH,EAAGC,IAAM,CACvBC,EACC,KAAK,kBAAkB,IAAIA,CAAE,EACjC,KAAK,kBAAkB,IAAIA,CAAE,EAAE,KAAK,CAACF,EAAEC,CAAC,CAAC,EAEzC,KAAK,kBAAkB,IAAIC,EAAI,CAAC,CAACF,EAAEC,CAAC,CAAC,CAAC,EAC5BmH,EACN,KAAK,qBAAqB,IAAIA,CAAK,EACvC,KAAK,qBAAqB,IAAIA,CAAK,EAAE,KAAK,CAACpH,EAAEC,CAAC,CAAC,EAE/C,KAAK,qBAAqB,IAAImH,EAAO,CAAC,CAACpH,EAAEC,CAAC,CAAC,CAAC,EAE7CA,EAAE,kCAAkC,EAE9B,KAAK,gBACX,KAAK,WAAW,CAClB,CAAC,CACF,CAEA,MAAM,YAAa,CAClB,GAAK,KAAK,eACT,OAED,KAAK,eAAiB,GAGtB,MAAMgC,EAAM,CAAC,GAAG,KAAK,kBAAkB,KAAK,CAAC,EAAE,MAAM,EAAG,EAAE,EACzDirB,EAAY,GAAKjrB,EAAI,OACrBo9B,EAASnS,EAAY,EAAI,CAAC,GAAG,KAAK,qBAAqB,KAAK,CAAC,EAAE,MAAM,EAAGA,CAAS,EAAI,CAAC,EAEvF,IAAI/Q,EAEJ,GAAI,CACH,MAAM5lB,EAAO,MAAM,KAAK,YAAY,CACnC,MAAO,MAAM,qCACb,UAAW,CACV,IAAK0L,EAAI,OAASA,EAAM,KACxB,OAAQo9B,EAAO,OAASA,EAAS,IAClC,CACD,CAAC,EAEDljB,KAAQ,OAAI,aAAc5lB,CAAI,CAE/B,OAAQE,EAAK,CACZ,UAAUyJ,KAAM+B,EAAK,CACpB,MAAMq9B,EAAW,KAAK,kBAAkB,IAAIp/B,CAAE,EAC9C,KAAK,kBAAkB,OAAOA,CAAE,EAEhC,UAAUG,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE5J,CAAG,CACb,CAEA,UAAU2Q,KAASi4B,EAAQ,CAC1B,MAAMC,EAAW,KAAK,qBAAqB,IAAIl4B,CAAK,EACpD,KAAK,qBAAqB,OAAOA,CAAK,EAEtC,UAAU/G,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE5J,CAAG,CACb,CAEA,MACD,CAEA,MAAM8oC,EAAS,IAAI,IAAIt9B,CAAG,EACzBu9B,EAAY,IAAI,IAAIH,CAAM,EAE3B,GAAK,MAAM,QAAQljB,CAAK,EACvB,UAAUpW,KAAQoW,EAAO,CACxB,GAAK,CAAEpW,GAAQ,CAAEA,EAAK,GACrB,SAEDw5B,EAAO,OAAOx5B,EAAK,EAAE,EACrBy5B,EAAU,OAAOz5B,EAAK,KAAK,EAE3B,IAAIu5B,EAAW,KAAK,kBAAkB,IAAIv5B,EAAK,EAAE,EACjD,GAAKu5B,EAAW,CACf,KAAK,kBAAkB,OAAOv5B,EAAK,EAAE,EACrC,UAAU1F,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE0F,CAAI,CACd,CAGA,GADAu5B,EAAW,KAAK,qBAAqB,IAAIv5B,EAAK,KAAK,EAC9Cu5B,EAAW,CACf,KAAK,qBAAqB,OAAOv5B,EAAK,KAAK,EAC3C,UAAU1F,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE0F,CAAI,CACd,CACD,CAED,UAAU7F,KAAMq/B,EAAQ,CACvB,MAAMD,EAAW,KAAK,kBAAkB,IAAIp/B,CAAE,EAC9C,GAAKo/B,EAAW,CACf,KAAK,kBAAkB,OAAOp/B,CAAE,EAChC,UAAUG,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE,IAAI,CACd,CACD,CAEA,UAAU+G,KAASo4B,EAAW,CAC7B,MAAMF,EAAW,KAAK,qBAAqB,IAAIl4B,CAAK,EACpD,GAAKk4B,EAAW,CACf,KAAK,qBAAqB,OAAOl4B,CAAK,EACtC,UAAU/G,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE,IAAI,CACd,CACD,CAEA,KAAK,eAAiB,IAEjB,KAAK,kBAAkB,MAAQ,KAAK,qBAAqB,OAC7D,KAAK,WAAW,CAClB,CAqBA,MAAM,eAAeH,EAAIkH,EAAO,CAC/B,MAAM7Q,EAAO,MAAM,KAAK,YAAY,CACnC,MAAO,MAAM,qCACb,UAAW,CACV,GAAA2J,EACA,MAAAkH,CACD,CACD,CAAC,EAED,SAAO,OAAI,mCAAoC7Q,CAAI,CACpD,CAGA,MAAM,gBAAgB2J,EAAIkH,EAAO,CAChC,MAAM7Q,EAAO,MAAM,KAAK,YAAY,CACnC,MAAO,MAAM,qCACb,UAAW,CACV,GAAA2J,EACA,MAAAkH,CACD,CACD,CAAC,EAED,SAAO,OAAI,4BAA6B7Q,CAAI,CAC7C,CAoBA,MAAM,QAAQkpC,EAAS,CACtB,MAAMlpC,EAAO,MAAM,KAAK,YAAY,CACnC,MAAO,MAAM,qCACb,UAAW,CACV,GAAIkpC,CACL,CACD,CAAC,EAED,SAAO,OAAI,YAAalpC,CAAI,CAC7B,CAsBA,MAAM,WAAWuJ,EAAYoI,EAAOw3B,EAAS9L,EAAU,CAAC,EAAG,CAC1D,GAAK,OAAO1rB,GAAU,SACrB,MAAM,IAAI,UAAU,sBAAsB,EAE3C,GAAK,CAAE,MAAM,QAAQw3B,CAAO,GAAKA,EAAQ,KAAKv+B,GAAK,OAAOA,GAAM,QAAQ,EACvE,MAAM,IAAI,UAAU,kCAAkC,EAEvD,IAAI0B,EAAO+wB,EAAQ,MAAQ,EAC1Br0B,EAAWq0B,EAAQ,UAAY,IAC3B,OAAO/wB,GAAS,UAAYA,EAAO,KACvCA,EAAO,IACH,OAAOtD,GAAa,UAAYA,EAAW,KAC/CA,EAAW,IAEZ,MAAMhJ,EAAO,MAAM,KAAK,OAAO,CAC9B,SAAU,MAAM,qCAChB,UAAW,CACV,MAAO,CACN,SAAUsM,EACV,WAAYA,EAAO,EACnB,QAAS68B,EAAQ,IAAIv+B,IAAM,CAAC,MAAOA,CAAC,EAAE,EACtC,gBAAiB5B,EACjB,QAAS,GAAGO,CAAU,GACtB,qBAAsB8zB,EAAQ,sBAAwB,GACtD,eAAgBA,EAAQ,gBAAkB,GAC1C,MAAA1rB,CACD,CACD,CACD,CAAC,EAED,SAAO,OAAI,uBAAwB3R,CAAI,CACxC,CAeA,MAAM,YAAYkpC,EAAS,CAC1B,MAAMlpC,EAAO,MAAM,KAAK,OAAO,CAC9B,SAAU,MAAM,qCAChB,UAAW,CACV,GAAIkpC,CACL,CACD,CAAC,EAED,SAAO,OAAI,wBAAyBlpC,CAAI,CACzC,CAeA,MAAM,cAAckpC,EAAS,CAC5B,MAAMlpC,EAAO,MAAM,KAAK,OAAO,CAC9B,SAAU,MAAM,qCAChB,UAAW,CACV,GAAIkpC,CACL,CACD,CAAC,EAED,SAAO,OAAI,0BAA2BlpC,CAAI,CAC3C,CAoBA,cAAc2J,EAAIkH,EAAO,CACxB,OAAO,IAAI,QAAQ,CAACpH,EAAGC,IAAM,CACvBC,EACC,KAAK,oBAAoB,IAAIA,CAAE,EACnC,KAAK,oBAAoB,IAAIA,CAAE,EAAE,KAAK,CAACF,EAAGC,CAAC,CAAC,EAE5C,KAAK,oBAAoB,IAAIC,EAAI,CAAC,CAACF,EAAGC,CAAC,CAAC,CAAC,EAC/BmH,EACN,KAAK,uBAAuB,IAAIA,CAAK,EACzC,KAAK,uBAAuB,IAAIA,CAAK,EAAE,KAAK,CAACpH,EAAGC,CAAC,CAAC,EAElD,KAAK,uBAAuB,IAAImH,EAAO,CAAC,CAACpH,EAAGC,CAAC,CAAC,CAAC,EAEhDA,EAAE,kCAAkC,EAE9B,KAAK,kBACX,KAAK,aAAa,CACpB,CAAC,CACF,CAEA,MAAM,cAAe,CACpB,GAAK,KAAK,iBACT,OAED,KAAK,iBAAmB,GAGxB,MAAMgC,EAAM,CAAC,GAAG,KAAK,oBAAoB,KAAK,CAAC,EAAE,MAAM,EAAG,EAAE,EAC3DirB,EAAY,GAAKjrB,EAAI,OACrBo9B,EAASnS,EAAY,EAAI,CAAC,GAAG,KAAK,uBAAuB,KAAK,CAAC,EAAE,MAAM,EAAGA,CAAS,EAAI,CAAC,EAEzF,IAAI/Q,EAEJ,GAAI,CACH,MAAM5lB,EAAO,MAAM,KAAK,YAAY,CACnC,MAAO,MAAM,qCACb,UAAW,CACV,IAAK0L,EAAI,OAASA,EAAM,KACxB,OAAQo9B,EAAO,OAASA,EAAS,IAClC,CACD,CAAC,EAEDljB,KAAQ,OAAI,aAAc5lB,CAAI,CAE/B,OAAQE,EAAK,CACZ,UAAUyJ,KAAM+B,EAAK,CACpB,MAAMq9B,EAAW,KAAK,oBAAoB,IAAIp/B,CAAE,EAChD,KAAK,oBAAoB,OAAOA,CAAE,EAElC,UAAUG,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE5J,CAAG,CACb,CAEA,UAAU2Q,KAASi4B,EAAQ,CAC1B,MAAMC,EAAW,KAAK,uBAAuB,IAAIl4B,CAAK,EACtD,KAAK,uBAAuB,OAAOA,CAAK,EAExC,UAAU/G,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE5J,CAAG,CACb,CAEA,MACD,CAEA,MAAM8oC,EAAS,IAAI,IAAIt9B,CAAG,EACzBu9B,EAAY,IAAI,IAAIH,CAAM,EAE3B,GAAK,MAAM,QAAQljB,CAAK,EACvB,UAAUpW,KAAQoW,EAAO,CACxB,GAAK,CAAEpW,GAAQ,CAAEA,EAAK,GACrB,SAEDw5B,EAAO,OAAOx5B,EAAK,EAAE,EACrBy5B,EAAU,OAAOz5B,EAAK,KAAK,EAE3B,IAAIu5B,EAAW,KAAK,oBAAoB,IAAIv5B,EAAK,EAAE,EACnD,GAAKu5B,EAAW,CACf,KAAK,oBAAoB,OAAOv5B,EAAK,EAAE,EACvC,UAAU1F,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE0F,EAAK,MAAM,CACrB,CAGA,GADAu5B,EAAW,KAAK,uBAAuB,IAAIv5B,EAAK,KAAK,EAChDu5B,EAAW,CACf,KAAK,uBAAuB,OAAOv5B,EAAK,KAAK,EAC7C,UAAU1F,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE0F,EAAK,MAAM,CACrB,CACD,CAED,UAAU7F,KAAMq/B,EAAQ,CACvB,MAAMD,EAAW,KAAK,oBAAoB,IAAIp/B,CAAE,EAChD,GAAKo/B,EAAW,CACf,KAAK,oBAAoB,OAAOp/B,CAAE,EAClC,UAAUG,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE,IAAI,CACd,CACD,CAEA,UAAU+G,KAASo4B,EAAW,CAC7B,MAAMF,EAAW,KAAK,uBAAuB,IAAIl4B,CAAK,EACtD,GAAKk4B,EAAW,CACf,KAAK,uBAAuB,OAAOl4B,CAAK,EACxC,UAAU/G,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE,IAAI,CACd,CACD,CAEA,KAAK,iBAAmB,IAEnB,KAAK,oBAAoB,MAAQ,KAAK,uBAAuB,OACjE,KAAK,aAAa,CACpB,CAeA,eAAeH,EAA4BkH,EAAuB,CACjE,OAAO,IAAI,QAAQ,CAACpH,EAAGC,IAAM,CAI5B,GAHK,OAAOC,GAAO,WAClBA,EAAK,GAAGA,CAAE,IAENA,EAAK,CACT,MAAMs0B,EAAW,KAAK,kBAAkB,IAAIt0B,CAAE,EACzCs0B,EACJA,EAAS,KAAK,CAACx0B,EAAEC,CAAC,CAAC,EAEnB,KAAK,kBAAkB,IAAIC,EAAI,CAAC,CAACF,EAAEC,CAAC,CAAC,CAAC,CAExC,SAAYmH,EAAQ,CACnB,MAAMotB,EAAW,KAAK,qBAAqB,IAAIptB,CAAK,EAC/CotB,EACJA,EAAS,KAAK,CAACx0B,EAAEC,CAAC,CAAC,EAEnB,KAAK,qBAAqB,IAAImH,EAAO,CAAC,CAACpH,EAAEC,CAAC,CAAC,CAAC,CAE9C,MACCA,EAAE,kCAAkC,EAE9B,KAAK,gBACX,KAAK,iBAAiB,CACxB,CAAC,CACF,CAEA,MAAM,kBAAmB,CACxB,GAAK,KAAK,eACT,OAED,KAAK,eAAiB,GAGtB,MAAMgC,EAAM,CAAC,GAAG,KAAK,kBAAkB,KAAK,CAAC,EAAE,MAAM,EAAG,EAAE,EACzDirB,EAAY,GAAKjrB,EAAI,OACrBo9B,EAASnS,EAAY,EAAI,CAAC,GAAG,KAAK,qBAAqB,KAAK,CAAC,EAAE,MAAM,EAAGA,CAAS,EAAI,CAAC,EAEvF,IAAI/Q,EAEJ,GAAI,CACH,MAAM5lB,EAAO,MAAM,KAAK,YAAY,CACnC,MAAO,MAAM,oCACb,UAAW,CACV,IAAK0L,EAAI,OAASA,EAAM,KACxB,OAAQo9B,EAAO,OAASA,EAAS,IAClC,CACD,CAAC,EAEDljB,KAAQ,OAAI,aAAc5lB,CAAI,CAE/B,OAAQE,EAAK,CACZ,UAAUyJ,KAAM+B,EAAK,CACpB,MAAMq9B,EAAW,KAAK,kBAAkB,IAAIp/B,CAAE,EAE9C,GAAKo/B,EAAW,CACf,KAAK,kBAAkB,OAAOp/B,CAAE,EAEhC,UAAUG,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE5J,CAAG,CACb,CACD,CAEA,UAAU2Q,KAASi4B,EAAQ,CAC1B,MAAMC,EAAW,KAAK,qBAAqB,IAAIl4B,CAAK,EAEpD,GAAKk4B,EAAW,CACf,KAAK,qBAAqB,OAAOl4B,CAAK,EAEtC,UAAU/G,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE5J,CAAG,CACb,CACD,CAEA,MACD,CAEA,MAAM8oC,EAAS,IAAI,IAAIt9B,CAAG,EACzBu9B,EAAY,IAAI,IAAIH,CAAM,EAE3B,GAAK,MAAM,QAAQljB,CAAK,EACvB,UAAUpW,KAAQoW,EAAO,CACxB,GAAK,CAAEpW,GAAQ,CAAEA,EAAK,GACrB,SAEDw5B,EAAO,OAAOx5B,EAAK,EAAE,EACrBy5B,EAAU,OAAOz5B,EAAK,KAAK,EAE3B,IAAIu5B,EAAW,KAAK,kBAAkB,IAAIv5B,EAAK,EAAE,EACjD,GAAKu5B,EAAW,CACf,KAAK,kBAAkB,OAAOv5B,EAAK,EAAE,EACrC,UAAU1F,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE0F,EAAK,QAAQ,2BAA2B,CAClD,CAGA,GADAu5B,EAAW,KAAK,qBAAqB,IAAIv5B,EAAK,KAAK,EAC9Cu5B,EAAW,CACf,KAAK,qBAAqB,OAAOv5B,EAAK,KAAK,EAC3C,UAAU1F,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE0F,EAAK,QAAQ,2BAA2B,CAClD,CACD,CAED,UAAU7F,KAAMq/B,EAAQ,CACvB,MAAMD,EAAW,KAAK,kBAAkB,IAAIp/B,CAAE,EAC9C,GAAKo/B,EAAW,CACf,KAAK,kBAAkB,OAAOp/B,CAAE,EAChC,UAAUG,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE,IAAI,CACd,CACD,CAEA,UAAU+G,KAASo4B,EAAW,CAC7B,MAAMF,EAAW,KAAK,qBAAqB,IAAIl4B,CAAK,EACpD,GAAKk4B,EAAW,CACf,KAAK,qBAAqB,OAAOl4B,CAAK,EACtC,UAAU/G,KAAQi/B,EACjBj/B,EAAK,CAAC,EAAE,IAAI,CACd,CACD,CAEA,KAAK,eAAiB,IAEjB,KAAK,kBAAkB,MAAQ,KAAK,qBAAqB,OAC7D,KAAK,iBAAiB,CACxB,CAoBA,MAAM,gBAAgB0xB,EAAe,CASpC,MAAM4N,GARO,MAAM,KAAK,YAAY,CACnC,MAAO,MAAM,qCACb,UAAW,CACV,MAAA5N,EACA,MAAO,GACR,CACD,CAAC,IAEmB,MAAM,oBAAoB,MAC9C,GAAK,CAAE,MAAM,QAAQ4N,CAAK,GAAK,CAAEA,EAAM,OACtC,MAAO,CAAC,EAET,MAAMhpC,EAAM,CAAC,EACb,UAAUipC,KAAQD,EAAO,CACxB,MAAMlwB,EAAMmwB,GAAM,MAAM,QACnBnwB,GACJ9Y,EAAI,KAAK8Y,CAAG,CACd,CAEA,OAAO9Y,CACR,CACD,EAjgC+C,kBAAhC,IAAMkpC,EAAN,C,YClCX,IAAI10B,EAAM,CAAC,KAAO,WAAW,YAAc,CAAC,CAAC,KAAO,sBAAsB,UAAY,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,yBAAyB,EAAE,oBAAsB,CAAC,CAAC,KAAO,qBAAqB,SAAW,CAAC,KAAO,WAAW,KAAO,CAAC,KAAO,OAAO,MAAQ,OAAO,CAAC,EAAE,KAAO,CAAC,KAAO,YAAY,KAAO,CAAC,KAAO,OAAO,MAAQ,KAAK,CAAC,EAAE,WAAa,CAAC,CAAC,EAAE,CAAC,KAAO,qBAAqB,SAAW,CAAC,KAAO,WAAW,KAAO,CAAC,KAAO,OAAO,MAAQ,OAAO,CAAC,EAAE,KAAO,CAAC,KAAO,YAAY,KAAO,CAAC,KAAO,OAAO,MAAQ,QAAQ,CAAC,EAAE,WAAa,CAAC,CAAC,EAAE,CAAC,KAAO,qBAAqB,SAAW,CAAC,KAAO,WAAW,KAAO,CAAC,KAAO,OAAO,MAAQ,UAAU,CAAC,EAAE,KAAO,CAAC,KAAO,cAAc,KAAO,CAAC,KAAO,YAAY,KAAO,CAAC,KAAO,OAAO,MAAQ,kCAAkC,CAAC,CAAC,EAAE,WAAa,CAAC,CAAC,CAAC,EAAE,WAAa,CAAC,EAAE,aAAe,CAAC,KAAO,eAAe,WAAa,CAAC,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,aAAa,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,EAAE,aAAe,CAAC,KAAO,eAAe,WAAa,CAAC,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,IAAI,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,CAAC,EAAE,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,sBAAsB,EAAE,UAAY,CAAC,CAAC,KAAO,WAAW,KAAO,CAAC,KAAO,OAAO,MAAQ,OAAO,EAAE,MAAQ,CAAC,KAAO,WAAW,KAAO,CAAC,KAAO,OAAO,MAAQ,OAAO,CAAC,CAAC,EAAE,CAAC,KAAO,WAAW,KAAO,CAAC,KAAO,OAAO,MAAQ,OAAO,EAAE,MAAQ,CAAC,KAAO,WAAW,KAAO,CAAC,KAAO,OAAO,MAAQ,OAAO,CAAC,CAAC,EAAE,CAAC,KAAO,WAAW,KAAO,CAAC,KAAO,OAAO,MAAQ,UAAU,EAAE,MAAQ,CAAC,KAAO,WAAW,KAAO,CAAC,KAAO,OAAO,MAAQ,UAAU,CAAC,CAAC,CAAC,EAAE,WAAa,CAAC,EAAE,aAAe,CAAC,KAAO,eAAe,WAAa,CAAC,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,UAAU,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,EAAE,aAAe,CAAC,KAAO,eAAe,WAAa,CAAC,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,aAAa,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,OAAO,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,EAAE,aAAe,CAAC,KAAO,eAAe,WAAa,CAAC,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,QAAQ,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,CAAC,EAAE,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,MAAM,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,EAAE,aAAe,CAAC,KAAO,eAAe,WAAa,CAAC,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,IAAI,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,CAAC,EAAE,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,MAAM,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,EAAE,aAAe,CAAC,KAAO,eAAe,WAAa,CAAC,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,QAAQ,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,oBAAoB,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,CAAC,EAAE,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,QAAQ,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,CAAC,EAAE,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,UAAU,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,CAAC,EAAE,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,SAAS,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,EAAE,aAAe,CAAC,KAAO,eAAe,WAAa,CAAC,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,IAAI,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,CAAC,EAAE,CAAC,KAAO,QAAQ,KAAO,CAAC,KAAO,OAAO,MAAQ,YAAY,EAAE,UAAY,CAAC,EAAE,WAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAM,CAAC,MAAQ,EAAE,IAAM,GAAG,CAAC,EAC/lGA,EAAI,IAAI,OAAS,CAAC,KAAO,2SAA2S,KAAO,kBAAkB,eAAiB,CAAC,KAAO,EAAE,OAAS,CAAC,CAAC,EAGnY,IAAIvU,EAAQ,CAAC,EACb,SAASkpC,EAAOC,EAAM,CACpB,OAAOA,EAAK,OACV,SAASC,EAAK,CACZ,GAAIA,EAAI,OAAS,qBAAsB,MAAO,GAC9C,IAAI/oC,EAAO+oC,EAAI,KAAK,MACpB,OAAIppC,EAAMK,CAAI,EACL,IAEPL,EAAMK,CAAI,EAAI,GACP,GAEX,CACF,CACF,CAbS,EAAA6oC,EAAA,UAiBT,SAASG,EAA0Bl6B,EAAMm6B,EAAM,CAC7C,GAAIn6B,EAAK,OAAS,iBAChBm6B,EAAK,IAAIn6B,EAAK,KAAK,KAAK,UACfA,EAAK,OAAS,qBAAsB,CAC7C,IAAImJ,EAAOnJ,EAAK,KACZmJ,EAAK,OAAS,aAChBgxB,EAAK,IAAIhxB,EAAK,KAAK,KAAK,CAE5B,CAEInJ,EAAK,cACPA,EAAK,aAAa,WAAW,QAAQ,SAASiZ,EAAW,CACvDihB,EAA0BjhB,EAAWkhB,CAAI,CAC3C,CAAC,EAGCn6B,EAAK,qBACPA,EAAK,oBAAoB,QAAQ,SAASi6B,EAAK,CAC7CC,EAA0BD,EAAKE,CAAI,CACrC,CAAC,EAGCn6B,EAAK,aACPA,EAAK,YAAY,QAAQ,SAASi6B,EAAK,CACrCC,EAA0BD,EAAKE,CAAI,CACrC,CAAC,CAEL,CA3BS,EAAAD,EAAA,6BA6BT,IAAIE,EAAiB,CAAC,EACrB,YAA6B,CAC5Bh1B,EAAI,YAAY,QAAQ,SAAS60B,EAAK,CACpC,GAAIA,EAAI,KAAM,CACZ,IAAIE,EAAO,IAAI,IACfD,EAA0BD,EAAKE,CAAI,EACnCC,EAAeH,EAAI,KAAK,KAAK,EAAIE,CACnC,CACF,CAAC,CACH,EARC,qBAQE,EAEH,SAASE,EAAcj1B,EAAKlU,EAAM,CAChC,QAASmC,EAAI,EAAGA,EAAI+R,EAAI,YAAY,OAAQ/R,IAAK,CAC/C,IAAIuL,EAAUwG,EAAI,YAAY/R,CAAC,EAC/B,GAAIuL,EAAQ,MAAQA,EAAQ,KAAK,OAAS1N,EACxC,OAAO0N,CAEX,CACF,CAPS,EAAAy7B,EAAA,iBAST,SAASC,EAASl1B,EAAKm1B,EAAe,CAEpC,IAAIC,EAAS,CACX,KAAMp1B,EAAI,KACV,YAAa,CAACi1B,EAAcj1B,EAAKm1B,CAAa,CAAC,CACjD,EACIn1B,EAAI,eAAe,KAAK,IAC1Bo1B,EAAO,IAAMp1B,EAAI,KAKnB,IAAIq1B,EAASL,EAAeG,CAAa,GAAK,IAAI,IAC9CG,EAAU,IAAI,IACdC,EAAU,IAAI,IAOlB,IAJAF,EAAO,QAAQ,SAASG,EAAS,CAC/BD,EAAQ,IAAIC,CAAO,CACrB,CAAC,EAEMD,EAAQ,KAAO,GAAG,CACvB,IAAIE,EAAWF,EACfA,EAAU,IAAI,IAEdE,EAAS,QAAQ,SAASD,EAAS,CACjC,GAAI,CAACF,EAAQ,IAAIE,CAAO,EAAG,CACzBF,EAAQ,IAAIE,CAAO,EACnB,IAAIE,EAAYV,EAAeQ,CAAO,GAAK,IAAI,IAC/CE,EAAU,QAAQ,SAASC,EAAU,CACnCJ,EAAQ,IAAII,CAAQ,CACtB,CAAC,CACH,CACF,CAAC,CACH,CAEA,OAAAL,EAAQ,QAAQ,SAASE,EAAS,CAChC,IAAII,EAAKX,EAAcj1B,EAAKw1B,CAAO,EAC/BI,GACFR,EAAO,YAAY,KAAKQ,CAAE,CAE9B,CAAC,EAEMR,CACT,CA5CS,EAAAF,EAAA,YA8CTj+B,EAAO,QAAU+I,EAEb/I,EAAO,QAAP,wBAA4Ci+B,EAASl1B,EAAK,yBAAyB,C,6DCxH3F,IAAI61B,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAACA,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,aAAa,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,gBAAgB,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,eAAe,MAAOF,EAAI,MAAM,OAAQ,WAAW,eAAe,UAAU,CAAC,KAAO,EAAI,CAAC,CAAC,EAAE,YAAY,iGAAiG,MAAM,CAAC,GAAK,aAAa,EAAE,SAAS,CAAC,MAASA,EAAI,MAAM,MAAO,EAAE,GAAG,CAAC,MAAQ,CAAC,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,MAAO,SAAUG,EAAO,OAAO,MAAM,KAAK,CAAC,CAAC,EAAE,SAASA,EAAO,CAAC,OAAOH,EAAI,MAAM,QAASA,EAAI,KAAK,CAAC,CAAC,EAAE,KAAO,SAASG,EAAO,CAAC,OAAOH,EAAI,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAA30B,UACTI,EAAkB,CAAC,ECDgW,QCmBxW,CACd,MAAO,CAAC,QAAS,UAAU,CAC5B,E,eCdIC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAACA,EAAG,MAAM,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,QAAQ,CAAC,YAAY,aAAa,MAAM,CAAC,IAAM,aAAeF,EAAI,EAAE,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,cAAc,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,eAAe,EAAE,CAACA,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,QAAS,WAAW,eAAe,CAAC,EAAE,YAAY,iGAAiG,MAAM,CAAC,GAAK,aAAeA,EAAI,GAAG,YAAcA,EAAI,SAAS,OAAO,EAAE,SAAS,CAAC,MAASA,EAAI,MAAM,OAAQ,EAAE,GAAG,CAAC,MAAQ,CAAC,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,MAAO,UAAWG,EAAO,OAAO,KAAK,CAAC,EAAE,SAASA,EAAO,CAAC,OAAOH,EAAI,MAAM,QAASA,EAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,8BAA+B,CAAC,KAAMA,EAAI,IAAI,CAAC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,+BAAgC,CAAC,KAAMA,EAAI,IAAI,CAAC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,cAAc,EAAE,CAACA,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,MAAO,WAAW,aAAa,CAAC,EAAE,YAAY,sBAAsB,MAAM,CAAC,GAAK,cAAgBA,EAAI,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAU,MAAM,QAAQA,EAAI,MAAM,KAAK,EAAEA,EAAI,GAAGA,EAAI,MAAM,MAAM,IAAI,EAAE,GAAIA,EAAI,MAAM,KAAM,EAAE,GAAG,CAAC,OAAS,CAAC,SAASG,EAAO,CAAC,IAAIG,EAAIN,EAAI,MAAM,MAAMO,EAAKJ,EAAO,OAAOK,EAAI,EAAAD,EAAK,QAAuB,GAAG,MAAM,QAAQD,CAAG,EAAE,CAAC,IAAIG,EAAI,KAAKC,EAAIV,EAAI,GAAGM,EAAIG,CAAG,EAAKF,EAAK,QAASG,EAAI,GAAIV,EAAI,KAAKA,EAAI,MAAO,QAASM,EAAI,OAAO,CAACG,CAAG,CAAC,CAAC,EAAQC,EAAI,IAAKV,EAAI,KAAKA,EAAI,MAAO,QAASM,EAAI,MAAM,EAAEI,CAAG,EAAE,OAAOJ,EAAI,MAAMI,EAAI,CAAC,CAAC,CAAC,CAAG,MAAMV,EAAI,KAAKA,EAAI,MAAO,QAASQ,CAAG,CAAE,EAAE,SAASL,EAAO,CAAC,OAAOH,EAAI,MAAM,QAASA,EAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,cAAgBF,EAAI,EAAE,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,+DAA+D,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,QAAQ,CAAC,YAAY,aAAa,MAAM,CAAC,IAAM,oBAAsBF,EAAI,EAAE,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,gBAAgB,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,eAAe,EAAE,CAACA,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,OAAQ,WAAW,cAAc,CAAC,EAAE,YAAY,iGAAiG,MAAM,CAAC,GAAK,oBAAsBA,EAAI,GAAG,YAAcA,EAAI,SAAS,QAAU,EAAE,EAAE,SAAS,CAAC,MAASA,EAAI,MAAM,MAAO,EAAE,GAAG,CAAC,MAAQ,CAAC,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,MAAO,SAAUG,EAAO,OAAO,KAAK,CAAC,EAAE,SAASA,EAAO,CAAC,OAAOH,EAAI,MAAM,QAASA,EAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,qCAAsC,sHAAsH,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,2CAA4C,0GAA0G,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAlkH,UACTI,EAAkB,CAAC,ECqEvB,IAAI14B,EAAU,ECtE0W,QDwEzW,CACd,MAAO,CAAC,QAAS,WAAY,OAAQ,MAAM,EAE3C,MAAO,CACN,MAAO,CACN,GAAIA,GACL,CACD,CACD,E,eEzEI24B,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAACA,EAAG,MAAM,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,QAAQ,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,MAAM,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,cAAc,CAAC,YAAY,gBAAgB,MAAM,CAAC,MAAQF,EAAI,MAAM,IAAI,EAAE,GAAG,CAAC,MAAQA,EAAI,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,WAAW,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,OAAO,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,KAAM,WAAW,YAAY,CAAC,EAAE,YAAY,iGAAiG,MAAM,CAAC,GAAK,WAAW,EAAE,SAAS,CAAC,MAASA,EAAI,MAAM,IAAK,EAAE,GAAG,CAAC,MAAQ,CAAC,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,MAAO,OAAQG,EAAO,OAAO,KAAK,CAAC,EAAE,SAASA,EAAO,CAAC,OAAOH,EAAI,MAAM,QAASA,EAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAA1gC,UACTI,EAAkB,CAAC,ECDkW,QC8B1W,CACd,MAAO,CAAC,OAAO,EAEf,QAAS,CACR,OAAOjrC,EAAK,CACX,KAAK,MAAM,KAAOA,EAClB,KAAK,MAAM,QAAS,KAAK,KAAK,CAC/B,CACD,CACD,E,eChCIkrC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,QAAQ,CAAC,YAAY,aAAa,MAAM,CAAC,IAAM,aAAa,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,QAAQ,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,eAAe,EAAE,CAACA,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,OAAQ,WAAW,cAAc,CAAC,EAAE,YAAY,iGAAiG,MAAM,CAAC,GAAK,cAAc,YAAcA,EAAI,SAAS,MAAM,EAAE,SAAS,CAAC,MAASA,EAAI,MAAM,MAAO,EAAE,GAAG,CAAC,MAAQ,CAAC,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,MAAO,SAAUG,EAAO,OAAO,KAAK,CAAC,EAAE,SAASA,EAAO,CAAC,OAAOH,EAAI,MAAM,QAASA,EAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,8BAA+B,CAAC,KAAMA,EAAI,IAAI,CAAC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,+BAAgC,CAAC,KAAMA,EAAI,IAAI,CAAC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAnrC,UACTI,EAAkB,CAAC,ECDiW,QC4BzW,CACd,MAAO,CAAC,QAAS,WAAY,OAAQ,MAAM,CAC5C,E,eCvBIC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,QAAQ,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,wBAAyB,OAAO,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,eAAe,CAAC,YAAY,gBAAgB,MAAM,CAAC,MAAQF,EAAI,GAAG,EAAE,GAAG,CAAC,MAAQA,EAAI,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAA3W,UACTI,EAAkB,CAAC,ECDkW,QCgB1W,CACd,MAAO,CAAC,OAAO,EAEf,MAAO,CACN,MAAO,CACN,IAAK,KAAK,KACX,CACD,EAEA,MAAO,CACN,OAAQ,CACP,KAAK,IAAM,KAAK,KACjB,CACD,EAEA,QAAS,CACR,OAAOjrC,EAAK,CACX,KAAK,IAAMA,EACX,KAAK,MAAM,QAAS,KAAK,GAAG,CAC7B,CACD,CACD,E,eC9BIkrC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,4DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,QAAQ,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,MAAM,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,cAAc,CAAC,YAAY,gBAAgB,MAAM,CAAC,MAAQF,EAAI,MAAM,IAAI,EAAE,GAAG,CAAC,MAAQA,EAAI,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAA/W,UACTI,EAAkB,CAAC,ECDiW,QCgBzW,CACd,MAAO,CAAC,OAAO,EAEf,QAAS,CACR,OAAOjrC,EAAK,CACX,KAAK,MAAM,KAAOA,EAClB,KAAK,MAAM,QAAS,KAAK,KAAK,CAC/B,CACD,CACD,E,eClBIkrC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,YAAY,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,KAAK,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,MAAO,WAAW,aAAa,CAAC,EAAE,YAAY,iGAAiG,MAAM,CAAC,GAAK,YAAY,EAAE,SAAS,CAAC,MAASA,EAAI,MAAM,KAAM,EAAE,GAAG,CAAC,MAAQ,CAAC,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,MAAO,QAASG,EAAO,OAAO,KAAK,CAAC,EAAE,SAASA,EAAO,CAAC,OAAOH,EAAI,MAAM,QAASA,EAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAhtB,UACTI,EAAkB,CAAC,ECDkW,QCiB1W,CACd,MAAO,CAAC,OAAO,CAChB,E,eCZIC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAACA,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,cAAc,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,SAAS,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,eAAe,MAAOF,EAAI,MAAM,KAAM,WAAW,aAAa,UAAU,CAAC,KAAO,EAAI,CAAC,CAAC,EAAE,YAAY,4GAA4G,MAAM,CAAC,GAAK,cAAc,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAC,OAAOH,EAAI,MAAM,QAASA,EAAI,KAAK,CAAC,EAAE,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAAS,EAAE,CAAC,OAAO,EAAE,QAAQ,CAAC,EAAE,IAAI,SAAS,EAAE,CAAC,IAAIhrC,EAAM,WAAY,EAAI,EAAE,OAAS,EAAE,MAAM,OAAOA,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,MAAO,OAAQG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEX,EAAI,GAAIA,EAAI,SAAU,SAAShpC,EAAQ,CAAC,OAAOkpC,EAAG,SAAS,CAAC,IAAIlpC,EAAQ,MAAM,SAAS,CAAC,MAAQA,EAAQ,KAAK,CAAC,EAAE,CAACgpC,EAAI,GAAGA,EAAI,GAAGhpC,EAAQ,SAAWgpC,EAAI,EAAEhpC,EAAQ,SAAUA,EAAQ,IAAI,EAAIA,EAAQ,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAApnC,UACTopC,EAAkB,CAAC,ECDoW,QCyB5W,CACd,MAAO,CAAC,QAAS,UAAU,EAE3B,MAAO,CACN,MAAM9vB,EAAM,OAAO,aAAa,IAAI,EACnCzK,EAAWyK,GAAK,QAAQ,UAAU,EAClC0c,EAAWnnB,GAAU,WAEtB,MAAO,CACN,SAAUmnB,EAAWA,EAAS,IAAI4T,IAAS,CAC1C,MAAOA,EAAK,KACZ,KAAMA,EAAK,KACX,SAAUA,EAAK,QAChB,EAAE,EAAI,CAAC,CACR,CACD,CACD,E,eClCIP,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,WAAW,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,OAAO,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,KAAM,WAAW,YAAY,CAAC,EAAE,YAAY,iGAAiG,MAAM,CAAC,GAAK,WAAW,EAAE,SAAS,CAAC,MAASA,EAAI,MAAM,IAAK,EAAE,GAAG,CAAC,MAAQ,CAAC,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,MAAO,OAAQG,EAAO,OAAO,KAAK,CAAC,EAAE,SAASA,EAAO,CAAC,OAAOH,EAAI,MAAM,QAASA,EAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAA7sB,UACTI,EAAkB,CAAC,ECDiW,QCiBzW,CACd,MAAO,CAAC,OAAO,CAChB,E,eCZIC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAACA,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,eAAe,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,UAAU,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,cAAe,WAAW,qBAAqB,CAAC,EAAE,YAAY,iGAAiG,MAAM,CAAC,GAAK,gBAAgB,YAAcA,EAAI,SAAS,SAAS,KAAO,MAAM,EAAE,SAAS,CAAC,MAASA,EAAI,MAAM,aAAc,EAAE,GAAG,CAAC,MAAQ,CAAC,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,MAAO,gBAAiBG,EAAO,OAAO,KAAK,CAAC,EAAE,SAASA,EAAO,CAAC,OAAOH,EAAI,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,aAAa,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,gBAAgB,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,eAAe,MAAOF,EAAI,MAAM,OAAQ,WAAW,eAAe,UAAU,CAAC,KAAO,EAAI,CAAC,CAAC,EAAE,YAAY,iGAAiG,MAAM,CAAC,GAAK,aAAa,EAAE,SAAS,CAAC,MAASA,EAAI,MAAM,MAAO,EAAE,GAAG,CAAC,MAAQ,CAAC,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,MAAO,SAAUG,EAAO,OAAO,MAAM,KAAK,CAAC,CAAC,EAAE,SAASA,EAAO,CAAC,OAAOH,EAAI,MAAM,QAASA,EAAI,KAAK,CAAC,CAAC,EAAE,KAAO,SAASG,EAAO,CAAC,OAAOH,EAAI,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAA1iD,UACTI,EAAkB,CAAC,ECiCvB,MAAMS,EAAY,uBACjBC,EAAc,CACb,EAAG,GACH,EAAG,KACH,EAAG,MACH,GAAI,MAAQ,GACZ,EAAG,CACJ,EAED,SAASC,EAAkBC,EAAK,CAC/B,IAAI7D,EAAU,EACVx7B,EAEJ,KAAMA,EAAQk/B,EAAU,KAAKG,CAAG,GAAG,CAClC,MAAM7rC,EAAM,SAASwM,EAAM,CAAC,EAAG,EAAE,EAChCs/B,GAAQt/B,EAAM,CAAC,GAAK,KAAK,YAAY,EACrCu/B,EAAaJ,EAAYG,CAAI,GAAK,EAEnC,GAAK,MAAM9rC,CAAG,EACb,MAAO,KAERgoC,GAAWhoC,EAAM+rC,CAClB,CAEA,OAAO/D,CACR,CAhBS,EAAA4D,EAAA,qBC3CkX,QD8D5W,CACd,MAAO,CAAC,QAAS,UAAU,EAE3B,SAAU,CACJ,KAAK,MAAM,eAAiB,OAChC,KAAK,MAAM,cAAgB,KAAK,MAAM,SACxC,EAEA,QAAS,CACR,QAAS,CACR,KAAK,MAAM,SAAWA,EAAkB,KAAK,MAAM,aAAa,EAChE,KAAK,MAAM,QAAS,KAAK,KAAK,CAC/B,CACD,CACD,E,eErEIV,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,QAAQ,CAAC,YAAY,aAAa,MAAM,CAAC,IAAM,UAAU,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,KAAK,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,eAAe,EAAE,CAACA,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,IAAK,WAAW,WAAW,CAAC,EAAE,YAAY,iGAAiG,MAAM,CAAC,GAAK,WAAW,YAAcA,EAAI,SAAS,GAAG,EAAE,SAAS,CAAC,MAASA,EAAI,MAAM,GAAI,EAAE,GAAG,CAAC,MAAQ,CAAC,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,MAAO,MAAOG,EAAO,OAAO,KAAK,CAAC,EAAE,SAASA,EAAO,CAAC,OAAOH,EAAI,MAAM,QAASA,EAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,8BAA+B,CAAC,KAAMA,EAAI,IAAI,CAAC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,+BAAgC,CAAC,KAAMA,EAAI,IAAI,CAAC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAxpC,UACTI,EAAkB,CAAC,ECDgW,QC4BxW,CACd,MAAO,CAAC,QAAS,WAAY,OAAQ,MAAM,CAC5C,E,eCvBIC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,4DClBzB,IAAIN,EAAS,WAAUE,EAAGD,EAAK,CAAC,IAAIE,EAAGF,EAAI,GAAG,OAAOE,EAAG,OAAO,CAAC,MAAMF,EAAI,MAAM,KAAK,KAAK,MAAO,CAAC,MAAMA,EAAI,MAAM,KAAK,CAAE,EAAE,CAACA,EAAI,GAAGA,EAAI,GAAGA,EAAI,MAAM,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,EAApJ,UACTI,EAAkB,CAAC,E,WCAnBe,EAAS,CAAC,EAKVd,KAAY,KACdc,EACApB,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DCjBzB,IAAIN,EAAS,WAAUE,EAAGD,EAAK,CAAC,IAAIE,EAAGF,EAAI,GAAG,OAAOE,EAAG,SAAS,CAAC,YAAY,iBAAiB,EAAE,CAACA,EAAG,MAAM,CAAC,MAAM,CAAC,IAAMF,EAAI,MAAM,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAnI,UACTI,EAAkB,CAAC,E,WCAnBe,EAAS,CAAC,EAKVd,KAAY,KACdc,EACApB,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DCjBzB,IAAIN,EAAS,WAAUE,EAAGD,EAAK,CAAC,IAAIE,EAAGF,EAAI,GAAG,OAAOE,EAAG,SAAS,CAAC,MAAO,IAAMF,EAAI,MAAM,KAAK,MAAM,kBAAmB,MAAO,CAAC,MAAMA,EAAI,MAAM,KAAK,CAAE,CAAC,CAAC,EAA3I,UACTI,EAAkB,CAAC,E,WCAnBe,EAAS,CAAC,EAKVd,KAAY,KACdc,EACApB,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DCjBzB,IAAIN,EAAS,WAAUE,EAAGD,EAAK,CAAC,IAAIE,EAAGF,EAAI,GAAG,OAAOE,EAAG,SAAS,CAAC,YAAY,iBAAiB,EAAE,CAACA,EAAG,MAAM,CAAC,MAAM,CAAC,IAAMF,EAAI,MAAM,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAArI,UACTI,EAAkB,CAAC,E,WCAnBe,EAAS,CAAC,EAKVd,KAAY,KACdc,EACApB,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DCjBzB,IAAIN,EAAS,WAAUE,EAAGD,EAAK,CAAC,IAAIE,EAAGF,EAAI,GAAG,OAAOE,EAAG,OAAO,CAAC,MAAO,CAAC,MAAOF,EAAI,MAAM,KAAK,CAAE,EAAE,CAACA,EAAI,GAAGA,EAAI,GAAGA,EAAI,MAAM,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,EAA3H,UACTI,EAAkB,CAAC,E,WCAnBe,EAAS,CAAC,EAKVd,KAAY,KACdc,EACApB,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DCjBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,kHAAkH,EAAE,CAACF,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAAIF,EAAI,QAAyWA,EAAI,QAAS,CAACE,EAAG,WAAW,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,KAAM,WAAW,MAAM,CAAC,EAAE,IAAI,OAAO,YAAY,qGAAqG,MAAM,CAAC,SAAW,EAAE,EAAE,SAAS,CAAC,MAASA,EAAI,IAAK,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAC,OAAOA,EAAO,OAAO,OAAO,CAAC,EAAE,MAAQ,SAASA,EAAO,CAAIA,EAAO,OAAO,YAAqBH,EAAI,KAAKG,EAAO,OAAO,MAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAACD,EAAG,UAAU,CAACA,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,YAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,SAAS,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,gBAAgB,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,WAAW,QAAS,WAAW,8BAA8B,CAAC,EAAE,YAAY,iGAAiG,SAAS,CAAC,MAASA,EAAI,UAAU,WAAW,OAAQ,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,UAAU,WAAY,UAAWG,EAAO,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEH,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,eAAe,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,MAAM,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,WAAW,KAAM,WAAW,2BAA2B,CAAC,EAAE,IAAI,gBAAgB,YAAY,4GAA4G,MAAM,CAAC,GAAK,eAAe,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,UAAU,WAAY,OAAQG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEX,EAAI,GAAIA,EAAI,KAAK,UAAW,SAASzqC,EAAEmB,EAAI,CAAC,OAAQspC,EAAI,iBAAiBtpC,CAAG,EAAGwpC,EAAG,SAAS,CAAC,IAAAxpC,EAAQ,SAAS,CAAC,MAAQA,CAAG,CAAC,EAAE,CAACspC,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGzqC,EAAE,WAAayqC,EAAI,EAAEzqC,EAAE,WAAYA,EAAE,MAAOA,CAAC,EAAIA,EAAE,KAAK,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEyqC,EAAI,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,UAAYA,EAAI,SAAS,QAASE,EAAG,MAAM,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,QAAQ,CAAC,YAAY,aAAa,MAAM,CAAC,IAAM,OAAO,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,wBAAyB,OAAO,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,eAAe,EAAE,CAACA,EAAG,eAAe,CAAC,MAAM,CAAC,SAAW,EAAI,EAAE,MAAM,CAAC,MAAOF,EAAI,UAAU,WAAW,MAAO,SAAS,SAAUS,EAAK,CAACT,EAAI,KAAKA,EAAI,UAAU,WAAY,QAASS,CAAG,CAAC,EAAE,WAAW,4BAA4B,CAAC,CAAC,EAAET,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,6FAA6F,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAGF,EAAI,SAAS,OAAO,CAAC,IAAI,YAAY,MAAM,CAAC,MAAOA,EAAI,UAAU,WAAY,SAAS,SAAUS,EAAK,CAACT,EAAI,KAAKA,EAAI,UAAW,aAAcS,CAAG,CAAC,EAAE,WAAW,sBAAsB,CAAC,CAAC,EAAET,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,iBAAkBE,EAAGF,EAAI,iBAAiB,CAAC,IAAI,YAAY,MAAM,CAAC,MAAOA,EAAI,UAAU,WAAY,SAAS,SAAUS,EAAK,CAACT,EAAI,KAAKA,EAAI,UAAW,aAAcS,CAAG,CAAC,EAAE,WAAW,sBAAsB,CAAC,CAAC,EAAET,EAAI,GAAG,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,UAAU,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,YAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,SAAS,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,mCAAoC,WAAW,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,QAAQ,IAAK,WAAW,uBAAuB,CAAC,EAAE,YAAY,4GAA4G,MAAM,CAAC,GAAK,SAAS,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,UAAU,QAAS,MAAOG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAACT,EAAG,SAAS,CAAC,MAAM,CAAC,SAAW,EAAE,EAAE,SAAS,CAAC,MAAQ,MAAS,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAI,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAK,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,UAAWE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,eAAe,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,yCAA0C,WAAW,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,QAAQ,UAAW,WAAW,6BAA6B,CAAC,EAAE,YAAY,4GAA4G,MAAM,CAAC,GAAK,eAAe,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,UAAU,QAAS,YAAaG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAACT,EAAG,SAAS,CAAC,MAAM,CAAC,SAAW,EAAE,EAAE,SAAS,CAAC,MAAQ,MAAS,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAI,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,kBAAmB,SAAS,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAK,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,cAAeE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,eAAe,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,yCAA0C,gBAAgB,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,QAAQ,UAAW,WAAW,6BAA6B,CAAC,EAAE,YAAY,4GAA4G,MAAM,CAAC,GAAK,eAAe,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,UAAU,QAAS,YAAaG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAACT,EAAG,SAAS,CAAC,MAAM,CAAC,SAAW,EAAE,EAAE,SAAS,CAAC,MAAQ,MAAS,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAI,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAK,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,YAAaE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,aAAa,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,uCAAwC,iBAAiB,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,QAAQ,QAAS,WAAW,2BAA2B,CAAC,EAAE,YAAY,4GAA4G,MAAM,CAAC,GAAK,aAAa,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,UAAU,QAAS,UAAWG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAACT,EAAG,SAAS,CAAC,MAAM,CAAC,SAAW,EAAE,EAAE,SAAS,CAAC,MAAQ,MAAS,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAI,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAK,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,WAAW,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,0CAA2C,iBAAiB,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,QAAQ,UAAW,WAAW,6BAA6B,CAAC,EAAE,YAAY,4GAA4G,MAAM,CAAC,GAAK,WAAW,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,UAAU,QAAS,YAAaG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAACT,EAAG,SAAS,CAAC,MAAM,CAAC,SAAW,EAAE,EAAE,SAAS,CAAC,MAAQ,MAAS,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAI,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAK,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,UAAU,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,oCAAqC,WAAW,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,QAAQ,SAAU,WAAW,4BAA4B,CAAC,EAAE,YAAY,4GAA4G,MAAM,CAAC,GAAK,UAAU,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,UAAU,QAAS,WAAYG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAACT,EAAG,SAAS,CAAC,MAAM,CAAC,SAAW,EAAE,EAAE,SAAS,CAAC,MAAQ,MAAS,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAI,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAK,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,aAAa,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,uCAAwC,oBAAoB,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,QAAQ,cAAe,WAAW,iCAAiC,CAAC,EAAE,YAAY,4GAA4G,MAAM,CAAC,GAAK,UAAU,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,UAAU,QAAS,gBAAiBG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAACT,EAAG,SAAS,CAAC,MAAM,CAAC,SAAW,EAAE,EAAE,SAAS,CAAC,MAAQ,MAAS,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAI,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAK,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,UAAU,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,oCAAqC,WAAW,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,QAAQ,SAAU,WAAW,4BAA4B,CAAC,EAAE,YAAY,4GAA4G,MAAM,CAAC,GAAK,UAAU,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,UAAU,QAAS,WAAYG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAACT,EAAG,SAAS,CAAC,MAAM,CAAC,SAAW,EAAE,EAAE,SAAS,CAAC,MAAQ,MAAS,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAI,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAK,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,SAAS,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,mCAAoC,UAAU,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,QAAQ,QAAS,WAAW,2BAA2B,CAAC,EAAE,YAAY,4GAA4G,MAAM,CAAC,GAAK,SAAS,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,UAAU,QAAS,UAAWG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAACT,EAAG,SAAS,CAAC,MAAM,CAAC,SAAW,EAAE,EAAE,SAAS,CAAC,MAAQ,MAAS,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAI,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,EAAK,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,cAAeE,EAAG,MAAM,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,eAAe,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,wCAAyC,WAAW,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAACA,EAAG,MAAM,CAAC,YAAY,qBAAqB,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,WAAW,YAAY,sBAAsB,MAAM,CAAC,GAAK,YAAcF,EAAI,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUA,EAAI,UAAU,QAAQ,KAAO,CAAC,EAAE,GAAG,CAAC,OAASA,EAAI,YAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,YAAcF,EAAI,EAAE,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,YAAyBA,EAAI,GAAGA,EAAI,EAAE,mBAAoB,MAAM,CAAC,EAAE;AAAA,UAAsB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,YAAY,YAAY,sBAAsB,MAAM,CAAC,GAAK,aAAeF,EAAI,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUA,EAAI,UAAU,QAAQ,KAAO,CAAC,EAAE,GAAG,CAAC,OAASA,EAAI,YAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,aAAeF,EAAI,EAAE,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,YAAyBA,EAAI,GAAGA,EAAI,EAAE,oBAAqB,OAAO,CAAC,EAAE;AAAA,UAAsB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,UAAU,YAAY,sBAAsB,MAAM,CAAC,GAAK,WAAaF,EAAI,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUA,EAAI,UAAU,QAAQ,KAAO,CAAC,EAAE,GAAG,CAAC,OAASA,EAAI,YAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,WAAaF,EAAI,EAAE,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,YAAyBA,EAAI,GAAGA,EAAI,EAAE,kBAAmB,KAAK,CAAC,EAAE;AAAA,UAAsB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,WAAW,YAAY,sBAAsB,MAAM,CAAC,GAAK,YAAcF,EAAI,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUA,EAAI,UAAU,QAAQ,KAAO,CAAC,EAAE,GAAG,CAAC,OAASA,EAAI,YAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,YAAcF,EAAI,EAAE,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,YAAyBA,EAAI,GAAGA,EAAI,EAAE,mBAAoB,MAAM,CAAC,EAAE;AAAA,UAAsB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,mBAAoBE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,YAAY,YAAY,sBAAsB,MAAM,CAAC,GAAK,aAAeF,EAAI,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUA,EAAI,UAAU,QAAQ,KAAK,EAAE,GAAG,CAAC,OAASA,EAAI,YAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,aAAeF,EAAI,EAAE,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,YAAyBA,EAAI,GAAGA,EAAI,EAAE,oBAAqB,OAAO,CAAC,EAAE;AAAA,UAAsB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,UAAU,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,aAAa,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,MAAM,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,OAAQ,WAAW,kBAAkB,CAAC,EAAE,YAAY,4GAA4G,MAAM,CAAC,GAAK,aAAa,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,UAAW,SAAUG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEX,EAAI,GAAIA,EAAI,KAAK,QAAS,SAASl5B,EAAEpQ,EAAI,CAAC,OAAOwpC,EAAG,SAAS,CAAC,IAAAxpC,EAAQ,SAAS,CAAC,MAAQA,CAAG,CAAC,EAAE,CAACspC,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAEl5B,EAAE,YAAe,gBAAkBpQ,EAAMoQ,EAAE,MAAOA,CAAC,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEk5B,EAAI,GAAG,GAAG,EAAGA,EAAI,YAAcA,EAAI,WAAW,OAAQE,EAAGF,EAAI,WAAW,OAAO,CAAC,IAAI,YAAY,MAAM,CAAC,MAAQA,EAAI,UAAU,QAAQ,SAAWA,EAAI,WAAW,SAAS,KAAOA,EAAI,KAAK,KAAOA,EAAI,IAAI,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAC,OAAOH,EAAI,eAAeG,CAAM,CAAC,CAAC,CAAC,CAAC,EAAEH,EAAI,GAAG,CAAC,EAAE,CAAC,CAAC,EAAl1mB,CAACE,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,KAAK,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,aAAa,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,WAAW,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,0BAA0B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,kBAAmB,CAAC,KAAMA,EAAI,UAAU,CAAC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAs/lB,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,WAAYE,EAAG,MAAM,CAAC,YAAY,0FAA0F,EAAE,CAACA,EAAG,iBAAiB,CAAC,MAAM,CAAC,IAAMF,EAAI,aAAaA,EAAI,OAAO,EAAE,gBAAgBA,EAAI,KAAK,MAAM,UAAYA,EAAI,KAAK,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,mHAAmH,EAAE,CAAEF,EAAI,QAAS,CAACE,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,QAAU,EAAK,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAW,CAAEA,EAAI,QAAS,CAACE,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQF,EAAI,IAAI,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQF,EAAI,MAAM,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQF,EAAI,WAAW,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,oBAAqB,MAAM,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,EAAGA,EAAI,UAAY,CAAEA,EAAI,QAAS,CAACE,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,MAAM,SAAUA,EAAI,MAAM,CAAC,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,SAAW,EAAK,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,EAAKA,EAAI,QAAifA,EAAI,GAAG,EAA/e,CAAEA,EAAI,QAASE,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQF,EAAI,IAAI,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,SAAW,EAAI,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAU,EAAE,CAAC,CAAC,CAAC,CAAC,EAArksB,UACTI,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,sFAAsF,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,E,WCqe1Q,IAAIjhC,EAAK,ECte6W,QDwevW,CACd,MAAO,CAAC,SAAU,SAAU,OAAQ,SAAU,YAAa,mBAAoB,UAAW,YAAa,gBAAgB,EAEvH,MAAO,CACN,MAAO,CACN,GAAIA,IACJ,QAAS,GACT,SAAU,GACV,QAAS,GACT,UAAW,IACZ,CACD,EAEA,SAAU,CACT,MAAO,CACN,OAAO,KAAK,UAAU,KAAK,OAAO,CACnC,EAEA,SAAU,CACT,OAAK,KAAK,QACF,KAAK,UAEN,KAAK,OAAO,CACpB,EAEA,aAAc,CACb,OAAO,KAAK,SAAW,KAAK,QAAQ,SAAS,SAAS,CACvD,EAEA,eAAgB,CACf,OAAO,KAAK,SAAW,KAAK,QAAQ,SAAS,WAAW,CACzD,EAEA,UAAW,CACV,OAAO,KAAK,SAAW,KAAK,QAAQ,SAAS,WAAW,CACzD,EAEA,eAAgB,CACf,OAAO,KAAK,SACb,EAEA,oBAAqB,CACpB,OAAO,KAAK,iBAAmB,EAChC,EAEA,MAAO,CACN,MAAMvJ,EAAM,CAAC,EAEb,OAAAA,EAAI,KAAK,aAAa,EACtBA,EAAI,KAAK,iBAAiB,EAC1BA,EAAI,KAAK,OAAO,EAChBA,EAAI,KAAK,OAAO,EAChBA,EAAI,KAAK,WAAW,EACpBA,EAAI,KAAK,SAAS,EAClBA,EAAI,KAAK,oBAAoB,EAC7BA,EAAI,KAAK,WAAW,EAEbA,EAAI,KAAK,IAAI,CACrB,EAEA,MAAO,CACN,MAAMA,EAAM,CAAC,EACZR,EAAM,KAAK,SAAW,CAAC,EAExB,OAAKA,EAAI,SAAS,MAAM,IACvBQ,EAAI,KAAK,YAAY,EACrBA,EAAI,KAAK,kBAAkB,EAC3BA,EAAI,KAAK,SAAS,EAClBA,EAAI,KAAK,WAAW,GAGhBR,EAAI,SAAS,MAAM,IACvBQ,EAAI,KAAK,YAAY,EACrBA,EAAI,KAAK,SAAS,GAGdR,EAAI,SAAS,SAAS,IAC1BQ,EAAI,KAAK,YAAY,EACrBA,EAAI,KAAK,cAAc,GAGjBA,EAAI,IAAIwK,GAAK,KAAKA,CAAC,IAAI,EAAE,KAAK,IAAI,CAC1C,EAEA,UAAW,CACV,OAAO,KAAK,YAAc,KAAK,KAAK,UAAU,KAAK,QAAQ,WAAW,IAAI,CAC3E,EAEA,YAAa,CACZ,OAAO,KAAK,SAAW,KAAK,KAAK,QAAQ,KAAK,QAAQ,MAAM,CAC7D,EAEA,SAAU,CACT,OAAO,KAAK,OAAO,GAAK,MAAQ,CAAE,KAAK,OAAO,EAAE,IACjD,EAEA,YAAa,CACZ,OAAO,KAAK,SAAW,KAAK,QAAQ,UACrC,EAEA,OAAQ,CACP,GAAK,KAAK,OAAO,IAAM,UACtB,OAAO,KAAK,EAAE,sBAAuB,mBAAmB,EAEzD,GAAK,KAAK,OAAO,IAAM,OACtB,OAAO,KAAK,EAAE,2BAA4B,gBAAgB,KAEjD,CAAE,KAAK,QAChB,OAAO,KAAK,EAAE,kBAAmB,eAAe,EAEjD,MAAM+N,EAAO,KAAK,QAAQ,KAE1B,GAAKA,IAAS,WACb,OAAO,KAAK,EAAE,mBAAoB,UAAU,KAEnCA,IAAS,cAClB,OAAO,KAAK,EAAE,sBAAuB,eAAe,KAE3CA,IAAS,QAClB,OAAO,KAAK,EAAE,gBAAiB,OAAO,EAEvC,MAAM8wB,EAAM,KAAK,KAAK,QAAQ,KAAK,QAAQ,MAAM,EACjD,GAAK,CAAEA,EACN,OAAO,KAAK,EAAE,0BAA2B,gCAAiC,KAAK,OAAO,EAEvF,GAAKA,EAAI,MAAQ,CAChB,MAAMzpC,EAAO,KAAK,QAAQ,EACzBI,KAAM,cAAWqpC,EAAI,MAAO,KAAMzpC,EAAMypC,CAAG,EAC5C,IAAIlX,KAAO,cAAWkX,EAAI,WAAY,KAAMzpC,EAAMypC,CAAG,EAIrD,GAHKlX,IAAS,SACbA,EAAO,gBAAgB,KAAK,QAAQ,MAAM,IAEtCnyB,GAAOmyB,EACX,OAAO,KAAK,EAAEA,EAAMnyB,EAAKJ,CAAI,KACpBI,EACT,OAAOA,CACT,CAEA,OAAO,KAAK,EAAE,2BAA4B,mBAAoB,KAAK,OAAO,CAE3E,EAEA,aAAc,CACb,GAAK,KAAK,OAAO,IAAM,UACtB,OAAO,KAAK,EAAE,2BAA4B,qFAAqF,EAEhI,GAAK,KAAK,OAAO,IAAM,OACtB,OAAO,KAAK,EAAE,gCAAiC,+HAA+H,EAE/K,MAAMuY,EAAO,KAAK,SAAW,KAAK,QAAQ,KAE1C,GAAKA,IAAS,WACb,OAAO,KAAK,EAAE,wBAAyB,+CAA+C,KAE7EA,IAAS,cAClB,OAAO,KAAK,EAAE,2BAA4B,kEAAkE,KAEnGA,IAAS,QAClB,OAAO,KAAK,EAAE,qBAAsB,iFAAiF,EAEtH,MAAM8wB,EAAM,KAAK,SAAW,KAAK,KAAK,QAAQ,KAAK,QAAQ,MAAM,EACjE,GAAK,CAAEA,GAAO,CAAEA,EAAI,YACnB,OAAO,KAER,MAAMzpC,EAAO,KAAK,QAAQ,EACzBI,KAAM,cAAWqpC,EAAI,YAAa,KAAMzpC,EAAMypC,CAAG,EAClD,IAAIlX,KAAO,cAAWkX,EAAI,iBAAkB,KAAMzpC,EAAMypC,CAAG,EAI3D,OAHKlX,IAAS,SACbA,EAAO,gBAAgB,KAAK,QAAQ,MAAM,SAEtCnyB,GAAOmyB,EACJ,KAAK,EAAEA,EAAMnyB,EAAKJ,CAAI,EACpBI,GAGH,IACR,EAEA,YAAa,CACZ,GAAK,CAAE,KAAK,SAAW,CAAE,KAAK,QAAQ,WACrC,OAED,MAAM2rC,EAAO,KAAK,QAAQ,SAAW,CAAC,EACrC3rC,EAAM,CAAC,EAER,GAAK2rC,EAAK,QACT,OAAO,KAAK,EAAE,gCAAiC,OAAO,EA2DvD,GAzDKA,EAAK,YAAc,GACvB3rC,EAAI,KAAK,KAAK,EAAE,oCAAqC,qBAAqB,CAAC,EAElE2rC,EAAK,YAAc,IAC5B3rC,EAAI,KAAK,KAAK,EAAE,sCAAuC,yBAAyB,CAAC,EAE7E2rC,EAAK,MAAQ,GACjB3rC,EAAI,KAAK,KAAK,EAAE,8BAA+B,gBAAgB,CAAC,EAEvD2rC,EAAK,MAAQ,IACtB3rC,EAAI,KAAK,KAAK,EAAE,gCAAiC,oBAAoB,CAAC,EAElE2rC,EAAK,YAAc,GACvB3rC,EAAI,KAAK,KAAK,EAAE,oCAAqC,0BAA0B,CAAC,EAEvE2rC,EAAK,YAAc,IAC5B3rC,EAAI,KAAK,KAAK,EAAE,wCAAyC,2BAA2B,CAAC,EAEjF2rC,EAAK,QAAU,GACnB3rC,EAAI,KAAK,KAAK,EAAE,gCAAiC,YAAY,CAAC,EAErD2rC,EAAK,QAAU,IACxB3rC,EAAI,KAAK,KAAK,EAAE,kCAAmC,gBAAgB,CAAC,EAEhE2rC,EAAK,UAAY,GACrB3rC,EAAI,KAAK,KAAK,EAAE,kCAAmC,oBAAoB,CAAC,EAE/D2rC,EAAK,UAAY,IAC1B3rC,EAAI,KAAK,KAAK,EAAE,oCAAqC,wBAAwB,CAAC,EAE1E,KAAK,WACJ2rC,EAAK,YAAc,GACvB3rC,EAAI,KAAK,KAAK,EAAE,qCAAsC,sBAAsB,CAAC,EACpE2rC,EAAK,YAAc,IAC5B3rC,EAAI,KAAK,KAAK,EAAE,mCAAoC,0BAA0B,CAAC,EAE3E2rC,EAAK,WAAa,GACtB3rC,EAAI,KAAK,KAAK,EAAE,+BAAgC,gBAAgB,CAAC,EACxD2rC,EAAK,WAAa,IAC3B3rC,EAAI,KAAK,KAAK,EAAE,kCAAmC,oBAAoB,CAAC,EAEpE2rC,EAAK,WAAa,GACtB3rC,EAAI,KAAK,KAAK,EAAE,+BAAgC,gBAAgB,CAAC,EACxD2rC,EAAK,WAAa,IAC3B3rC,EAAI,KAAK,KAAK,EAAE,kCAAmC,oBAAoB,CAAC,EAEpE2rC,EAAK,UAAY,GACrB3rC,EAAI,KAAK,KAAK,EAAE,8BAA+B,eAAe,CAAC,EACtD2rC,EAAK,UAAY,IAC1B3rC,EAAI,KAAK,KAAK,EAAE,iCAAkC,mBAAmB,CAAC,EAElE2rC,EAAK,gBAAkB,GAC3B3rC,EAAI,KAAK,KAAK,EAAE,oCAAqC,0BAA0B,CAAC,EACvE2rC,EAAK,gBAAkB,IAChC3rC,EAAI,KAAK,KAAK,EAAE,uCAAwC,8BAA8B,CAAC,GAGpF2rC,EAAK,KAAO,CAChB,MAAMC,EAAU,CAAC,EACZD,EAAK,KAAO,GAChBC,EAAQ,KAAK,KAAK,EAAE,mBAAoB,MAAM,CAAC,EAC3CD,EAAK,KAAO,GAChBC,EAAQ,KAAK,KAAK,EAAE,oBAAqB,OAAO,CAAC,EAC7CD,EAAK,KAAO,GAChBC,EAAQ,KAAK,KAAK,EAAE,kBAAmB,KAAK,CAAC,EACzCD,EAAK,KAAO,GAChBC,EAAQ,KAAK,KAAK,EAAE,mBAAoB,MAAM,CAAC,EAE3CA,EAAQ,QACZ5rC,EAAI,KAAK,KAAK,EAAE,mCAAoC,4DAA6D,CAChH,SAAU4rC,EAAQ,KAAK,KAAK,EAC5B,KAAMA,EAAQ,MACf,CAAC,CAAC,CACJ,CAKA,OAHK,KAAK,oBAAsBD,EAAK,OACpC3rC,EAAI,KAAK,KAAK,EAAE,gCAAiC,eAAe,CAAC,EAE3DA,EAAI,OAGJA,EAAI,KAAK,IAAI,EAFZ,KAAK,EAAE,iCAAkC,QAAQ,CAG1D,CACD,EAEA,QAAS,CACR,eAAeP,EAAK,CACnB,UAAUuB,KAAOvB,EAChB,MAAK,OAAIA,EAAKuB,CAAG,EAAI,CACpB,MAAMkqB,EAAIzrB,EAAIuB,CAAG,EACZ,OAAOkqB,GAAM,UAAY,CAAEA,EAAE,QACjC,OAAOzrB,EAAIuB,CAAG,CAChB,CAED,KAAK,UAAU,QAAUvB,CAC1B,EAEA,cAAe,CACd,GAAK,CAAE,KAAK,QACX,OAED,IAAIgD,EAAI,EACH,KAAK,MAAM,SAAS,UACxBA,GAAK,GACD,KAAK,MAAM,UAAU,UACzBA,GAAK,GACD,KAAK,MAAM,QAAQ,UACvBA,GAAK,GACD,KAAK,MAAM,SAAS,UACxBA,GAAK,GAEN,KAAK,UAAU,QAAQ,KAAOA,EAEzB,KAAK,qBACT,KAAK,UAAU,QAAQ,MAAQ,KAAK,MAAM,UAAU,QACtD,EAEA,MAAO,CACC,KAAK,UAGZ,KAAK,QAAU,GACf,KAAK,aAAY,aAAU,KAAK,OAAO,CAAC,EAEjC,KAAK,UAAU,UACrB,KAAK,UAAU,QAAU,CAAC,GAEpB,KAAK,UAAU,UACrB,KAAK,UAAU,QAAU,CAAC,GAEpB,KAAK,UAAU,aACrB,KAAK,UAAU,WAAa,CAAC,GAC/B,EAEA,MAAO,CACN,KAAK,MAAM,OAAQ,KAAK,SAAS,EACjC,KAAK,OAAO,CACb,EAEA,aAAc,CACb,KAAK,QAAU,GACf,sBAAsB,IAAM,CAC3B,KAAK,MAAM,KAAK,MAAM,CACvB,CAAC,CACF,EAEA,QAAS,CACR,KAAK,QAAU,GACf,KAAK,QAAU,GACf,KAAK,UAAY,IAClB,EAEA,aAAa7C,EAAM,CAClB,IAAIisC,EAAKjsC,EAAK,WACd,GAAIisC,GAAI,OAAS,UAAW,CAC3B,MAAM35B,EAAM,KAAK,WAChB0I,EAAM,KAAK,OAAO,OAAO,EACzBhB,EAAUgB,GAAOA,EAAI,QAAQ,cAAc,EAEtC5a,EAAM4Z,GAAW1H,GAAK,mBAAqBA,EAAI,kBACnD,KAAK0H,KAAS,aAAUiyB,CAAE,EAAGjsC,EAAM,KAAM,KAAM,KAAM,IAAI,EAC3D,GAAKI,EACJ,OAAO,OAAO,OAAO,CAAC,EAAGJ,EAAM,CAAC,WAAYI,CAAG,CAAC,CAClD,CAEA,OAAOJ,CACR,EAEA,iBAAiBoB,EAAK,CACrB,OAAIA,IAAQ,UACJ,GAED,KAAK,YAAY,gBACzB,EAEA,SAAU,CACT,MAAMqoC,EAAM,KAAK,SAAW,KAAK,KAAK,QAAQ,KAAK,QAAQ,MAAM,EACjE,GAAOA,EAGP,OAAO,OAAO,OAAO,CAAC,EAAG,KAAK,QAAS,CACtC,QAAS,OAAO,OAAO,CAAC,EAAGA,GAAOA,EAAI,SAAU,KAAK,QAAQ,OAAO,CACrE,CAAC,CACF,CACD,CAED,E,eEv1BIsB,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,uDAAuD,MAAM,CAAC,cAAeF,EAAI,QAAS,WAAYA,EAAI,IAAK,QAAWA,EAAI,OAASA,EAAI,MAAM,OAAS,CAAC,EAAE,MAAM,CAAC,cAAcA,EAAI,IAAI,OAAO,eAAeA,EAAI,IAAI,QAAU,KAAK,UAAUA,EAAI,IAAI,OAAO,EAAI,KAAK,WAAWA,EAAI,IAAI,WAAW,QAAQ,oBAAoB,QAAQ,CAAC,EAAE,CAAEA,EAAI,UAAYA,EAAI,SAAS,UAAWE,EAAGF,EAAI,SAAS,UAAU,CAAC,IAAI,YAAY,MAAM,CAAC,KAAOA,EAAI,IAAI,WAAW,MAAQA,EAAI,KAAK,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,CAAC,EAA9kB,UACTI,EAAkB,CAAC,ECDgW,QCoBxW,CACd,MAAO,CAAC,MAAO,gBAAiB,UAAW,MAAO,WAAW,EAE7D,SAAU,CACT,OAAQ,CACP,OAAO,KAAK,aAAgB,KAAK,IAAI,WAAW,KAAK,CACtD,EAEA,UAAW,CACV,OAAO,KAAK,UAAU,KAAK,IAAI,WAAW,IAAI,CAC/C,CACD,CACD,E,eCzBIC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,mCAAmC,EAAE,CAAEF,EAAI,OAAQE,EAAG,MAAM,CAAC,YAAY,4DAA4D,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,qEAAqE,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,yDAAyD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,KAAK,QAAQ,CAAC,CAAC,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,SAAS,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,MAAOE,EAAG,MAAM,CAAC,YAAY,yCAAyC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,yCAAyC,EAAE,CAACA,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,eAAgB,WAAW,gBAAgB,CAAC,EAAE,YAAY,sBAAsB,MAAM,CAAC,GAAK,iBAAiB,KAAO,UAAU,EAAE,SAAS,CAAC,QAAU,MAAM,QAAQA,EAAI,cAAc,EAAEA,EAAI,GAAGA,EAAI,eAAe,IAAI,EAAE,GAAIA,EAAI,cAAe,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIG,EAAIN,EAAI,eAAeO,EAAKJ,EAAO,OAAOK,EAAI,EAAAD,EAAK,QAAuB,GAAG,MAAM,QAAQD,CAAG,EAAE,CAAC,IAAIG,EAAI,KAAKC,EAAIV,EAAI,GAAGM,EAAIG,CAAG,EAAKF,EAAK,QAASG,EAAI,IAAIV,EAAI,eAAeM,EAAI,OAAO,CAACG,CAAG,CAAC,GAAQC,EAAI,KAAKV,EAAI,eAAeM,EAAI,MAAM,EAAEI,CAAG,EAAE,OAAOJ,EAAI,MAAMI,EAAI,CAAC,CAAC,EAAG,MAAMV,EAAI,eAAeQ,CAAI,CAAC,CAAC,CAAC,EAAER,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,gBAAgB,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,+BAA+B,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,QAAS,WAAW,SAAS,CAAC,EAAE,YAAY,8FAA8F,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAAS,EAAE,CAAC,OAAO,EAAE,QAAQ,CAAC,EAAE,IAAI,SAAS,EAAE,CAAC,IAAIhrC,EAAM,WAAY,EAAI,EAAE,OAAS,EAAE,MAAM,OAAOA,CAAG,CAAC,EAAG6qC,EAAI,QAAQG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,EAAE,CAACT,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,CAAC,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,kBAAmB,eAAe,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,CAAC,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,oBAAqB,kBAAkB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ,CAAC,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,oBAAqB,kBAAkB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAKA,EAAI,MAAmHE,EAAG,MAAMF,EAAI,GAAIA,EAAI,eAAgB,SAASwB,EAAM,CAAC,OAAOtB,EAAG,QAAQ,CAAC,IAAIsB,EAAM,GAAG,MAAM,CAAC,GAAKA,EAAM,GAAG,MAAQA,EAAM,KAAOxB,EAAI,KAAK,QAAUA,EAAI,OAAO,EAAE,GAAG,CAAC,SAAWA,EAAI,SAAS,cAAcA,EAAI,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAA1UE,EAAG,MAAM,CAAC,YAAY,yBAAyB,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,gCAAgC,CAAC,CAAC,CAAC,EAAkOF,EAAI,GAAG,GAAG,EAAGA,EAAI,OAASA,EAAI,eAAe,SAAWA,EAAI,cAAc,OAAQE,EAAG,MAAM,CAAC,YAAY,yBAAyB,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,mBAAoB,sFAAuF,CAC9uG,QAASA,EAAI,eAAe,OAC5B,MAAOA,EAAI,cAAc,MAC1B,CAAC,CAAC,EAAE;AAAA,GAAQ,EAAGA,EAAI,OAAQ,CAACA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,gGAAgG,CAAC,EAAE;AAAA,GAAQ,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,iBAAkBE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,WAAW,CAAC,CAAC,KAAK,eAAe,QAAQ,iBAAiB,MAAOF,EAAI,cAAe,WAAW,eAAe,CAAC,EAAE,YAAY,aAAa,EAAE,CAACE,EAAG,SAAS,CAAC,YAAY,sCAAsC,GAAG,CAAC,MAAQF,EAAI,cAAc,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,qBAAsB,iBAAiB,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,cAAeE,EAAG,UAAU,CAAC,MAAM,CAAC,MAAQ,mBAAmB,IAAM,WAAW,KAAO,IAAI,CAAC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,SAAS,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,yTAAyT,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,WAAW,YAAY,uFAAuF,MAAM,CAAC,YAAcF,EAAI,EAAE,oBAAqB,WAAW,CAAC,EAAE,GAAG,CAAC,QAAU,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,QAAQ,GAAGA,EAAO,IAAI,OAAO,EAAW,KAAcH,EAAI,YAAY,MAAM,KAAM,SAAS,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,uBAAuB,GAAG,CAAC,MAAQF,EAAI,WAAW,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,UAAqBA,EAAI,GAAGA,EAAI,EAAE,cAAe,KAAK,CAAC,EAAE;AAAA,QAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAH/+D,UAITI,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC,ECJyJ,QC8HpW,CACd,MAAO,CAAC,OAAQ,UAAW,QAAQ,EAEnC,MAAO,CACN,MAAO,CACN,MAAO,KAAK,KAAK,QAAQ,EACzB,OAAQ,KAAK,KAAK,iBAAiB,EACnC,SAAU,CAAC,EACX,eAAgB,GAChB,QAAS,EACT,cAAe,EAChB,CACD,EAEA,SAAU,CACT,kBAAmB,CAClB,OAAO,KAAK,eAAe,SAAW,KAAK,cAAc,MAC1D,EAEA,gBAAiB,CAChB,OAAO,KAAK,cAAc,OAAOsB,GAAS,KAAK,WAAWA,CAAK,CAAC,CACjE,EAEA,eAAgB,CACf,OAAO,KAAK,cAAc,OAAOA,GAAS,CAAEA,EAAM,QAAQ,CAC3D,EAEA,eAAgB,CACf,MAAM5V,EAAS,KAAK,KAAK,UAAU,EAEnC,OAAAA,EAAO,KAAK,CAAC9kB,EAAGsJ,IAAM,CACrB,GAAK,KAAK,UAAY,EAAI,CACzB,GAAKtJ,EAAE,QAAUsJ,EAAE,QAAU,MAAO,GACpC,GAAKA,EAAE,QAAUtJ,EAAE,QAAU,MAAO,EAErC,SAAY,KAAK,UAAY,EAAI,CAChC,GAAKA,EAAE,QAAUsJ,EAAE,QAAU,MAAO,GACpC,GAAKA,EAAE,QAAUtJ,EAAE,QAAU,MAAO,EACrC,CAEA,GAAKA,EAAE,KAAOsJ,EAAE,KAAO,MAAO,GAC9B,GAAKA,EAAE,KAAOtJ,EAAE,KAAO,MAAO,GAE9B,MAAMsK,GAAOtK,EAAE,MAAQA,EAAE,IAAI,YAAY,EACxCuK,GAAOjB,EAAE,MAAQA,EAAE,IAAI,YAAY,EAEpC,OAAKgB,EAAMC,EAAa,GACnBA,EAAMD,EAAa,EACjB,CACR,CAAC,EAEMwa,CACR,CACD,EAEA,SAAU,CACT,KAAK,KAAK,GAAG,SAAU,KAAK,QAAS,IAAI,EACzC,KAAK,KAAK,GAAG,SAAU,KAAK,QAAS,IAAI,EACzC,KAAK,KAAK,GAAG,mBAAoB,KAAK,SAAU,IAAI,CACrD,EAEA,WAAY,CACX,KAAK,KAAK,IAAI,SAAU,KAAK,QAAS,IAAI,EAC1C,KAAK,KAAK,IAAI,SAAU,KAAK,QAAS,IAAI,EAC1C,KAAK,KAAK,IAAI,mBAAoB,KAAK,SAAU,IAAI,CACtD,EAEA,QAAS,CACR,aAAc,CACb,IAAIh1B,EAAQ,KAAK,MAAM,SAAS,MAIhC,GAHKA,IACJA,EAAQA,EAAM,KAAK,EAAE,YAAY,GAE7BA,GAASA,EAAM,OACnB,UAAU4qC,KAAS,KAAK,KAAK,UAAU,EACjCA,EAAM,WAAaA,EAAM,KAAO5qC,GAAU4qC,EAAM,YAAcA,EAAM,WAAW,YAAY,IAAM5qC,GAAW4qC,EAAM,MAAQA,EAAM,KAAK,YAAY,IAAM5qC,IAC3J,KAAK,SAAS,KAAK4qC,EAAM,EAAE,EAE9B,KAAK,MAAM,SAAS,MAAQ,GAC5B,KAAK,cAAc,CACpB,EAEA,eAAgB,CACf,KAAK,cAAgB,EACtB,EAEA,gBAAiB,CAChB,KAAK,cAAgB,CAAE,KAAK,aAC7B,EAEA,WAAWA,EAAO,CAEjB,MAAMrlB,EAAU,KAAK,KAAK,eAAeqlB,EAAM,EAAE,EAOjD,MANK,EAAAA,EAAM,UAAY,CAAErlB,GAAW,CAAE,KAAK,SAAS,SAASqlB,EAAM,EAAE,GAGhE,KAAK,gBAAkB,CAAErlB,GAGzB,KAAK,QACJ,KAAK,OAAO,QACX,CAAEqlB,EAAM,cAAgB,CAAEA,EAAM,aAAa,SAAS,KAAK,OAAO,KAAK,GAM/E,EAEA,SAAU,CACT,KAAK,aAAa,CACnB,EAEA,SAAU,CACT,KAAK,MAAQ,EACd,EAEA,UAAW,CACV,KAAK,OAAS,EACf,EAEA,YAAYvsC,EAAM,CACjB,KAAK,MAAM,WAAY,GAAGA,CAAI,CAC/B,EAEA,cAAcA,EAAM,CACnB,KAAK,MAAM,cAAe,GAAGA,CAAI,CAClC,CACD,CACD,E,eCxPIorC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,+HAA+H,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,mEAAmE,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,mDAAmD,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,WAAW,MAAM,CAAC,IAAMF,EAAI,IAAI,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,UAAWE,EAAG,MAAM,CAAC,YAAY,qBAAqB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,kBAAmB,WAAW,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,qBAAqB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,UAAU,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAGA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,uCAAuC,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,SAAS,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,MAAM,IAAKE,EAAG,MAAM,CAAC,YAAY,qBAAqB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,YAAa,WAAW,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,MAAM,SAAUE,EAAG,MAAM,CAAC,YAAY,qBAAqB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,UAAU,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,KAAK,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,MAAM,UAAYA,EAAI,EAAEA,EAAI,MAAM,UAAWA,EAAI,MAAM,IAAI,EAAIA,EAAI,MAAM,IAAI,EAAE;AAAA,KAAY,EAAGA,EAAI,MAAM,KAAOA,EAAI,MAAM,SAAWE,EAAG,OAAO,CAAC,YAAY,gCAAgC,EAAE,CAACF,EAAI,GAAG;AAAA,QAAgBA,EAAI,GAAGA,EAAI,MAAM,EAAE,EAAE;AAAA,KAAa,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,MAAM,OAAQE,EAAG,OAAO,CAAC,YAAY,yBAAyB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,eAAgB,eAAgB,CAC5wD,OAAQA,EAAI,MAAM,YAAcA,EAAI,EAAEA,EAAI,MAAM,YAAaA,EAAI,MAAM,MAAM,EAAIA,EAAI,MAAM,MAC5F,CAAC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,WAAYE,EAAG,OAAO,CAAC,YAAY,yBAAyB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,mBAAoB,2BAA4B,CAC3L,WAAYA,EAAI,UACjB,CAAC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAASE,EAAG,OAAO,CAAC,YAAY,yBAAyB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,oBAAqB,CAAC,QAASA,EAAI,OAAO,CAAC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,MAAM,SAAWA,EAAI,MAAM,SAAWA,EAAI,MAAM,QAASE,EAAG,OAAO,CAAC,YAAY,sCAAsC,MAAM,CAAC,aAAaF,EAAI,UAAUA,EAAI,MAAM,OAAO,CAAC,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,4BAA6B,CAAC,KAAMA,EAAI,MAAM,OAAO,CAAC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,MAAM,QAASE,EAAG,OAAO,CAAC,YAAY,sCAAsC,MAAM,CAAC,aAAaF,EAAI,UAAUA,EAAI,MAAM,OAAO,CAAC,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,uBAAwB,CAAC,KAAMA,EAAI,MAAM,OAAO,CAAC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,gBAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,WAAYE,EAAG,IAAI,CAAC,YAAY,kBAAkB,MAAM,CAAC,KAAO,GAAG,EAAE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAAA,EAAO,eAAe,EAASH,EAAI,OAAO,MAAM,KAAM,SAAS,CAAC,CAAC,CAAC,EAAE,CAAEA,EAAI,SAAU,CAACA,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,kBAAmB,aAAa,CAAC,CAAC,CAAC,EAAE,CAACA,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,kBAAmB,aAAa,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAAEF,EAAI,QAAS,CAAEA,EAAI,SAAUE,EAAG,SAAS,CAAC,YAAY,uFAAuF,MAAM,CAAC,SAAW,EAAE,CAAC,EAAE,CAACF,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,SAAS,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,8DAA8D,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,gFAAgF,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,EAAEE,EAAG,SAAS,CAAC,YAAY,0CAA0C,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,KAAK,aAAaA,EAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,SAAS,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,MAAM,KAAOA,EAAI,WAAYE,EAAG,SAAS,CAAC,YAAY,yCAAyC,MAAM,CAAC,sBAAuBF,EAAI,SAAS,EAAE,MAAM,CAAC,SAAWA,EAAI,SAAS,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAC,OAAOH,EAAI,YAAY,CAAC,CAAC,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,eAAgB,QAAQ,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,MAAM,SAAUE,EAAG,SAAS,CAAC,YAAY,yCAAyC,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,aAAa,CAAC,CAAC,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,UAAU,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAACE,EAAG,SAAS,CAAC,YAAY,yCAAyC,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,KAAK,YAAYA,EAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,eAAgB,QAAQ,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAKA,EAAI,SAAoQA,EAAI,GAAG,EAAjQE,EAAG,SAAS,CAAC,YAAY,yCAAyC,GAAG,CAAC,MAAQF,EAAI,aAAa,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,kBAAmB,WAAW,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAGA,EAAI,MAAM,QAASE,EAAG,IAAI,CAAC,YAAY,2EAA2E,MAAM,CAAC,KAAOF,EAAI,MAAM,QAAQ,MAAQA,EAAI,MAAM,QAAQ,oBAAoB,OAAO,OAAS,SAAS,IAAM,UAAU,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,SAAS,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAJxxH,UAKTI,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,aAAa,CAAC,CAAC,CAAC,CAAC,EAAE,UAAY,CAAC,IAAIF,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,aAAa,CAAC,CAAC,CAAC,CAAC,EAAE,UAAY,CAAC,IAAIF,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,iBAAiB,CAAC,CAAC,CAAC,CAAC,EAAE,UAAY,CAAC,IAAIF,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,UAAY,CAAC,IAAIF,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,gBAAgB,CAAC,CAAC,CAAC,CAAC,EAAE,UAAY,CAAC,IAAIF,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,gBAAgB,CAAC,CAAC,CAAC,CAAC,EAAE,UAAY,CAAC,IAAIF,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,ECLn/B,QCsL/V,CACd,MAAO,CAAC,KAAM,QAAS,OAAQ,SAAS,EAExC,MAAO,CACN,MAAO,CACN,QAAS,KAAK,KAAK,eAAe,KAAK,EAAE,EACzC,WAAY,KAAK,MAAM,KAAO,KAAK,KAAK,eAAe,KAAK,EAAE,EAC9D,UAAW,GACX,SAAU,KAAK,KAAK,gBAAgB,KAAK,EAAE,EAC3C,QAAS,KAAK,KAAK,WAAW,KAAK,EAAE,EACrC,SAAU,EACX,CACD,EAEA,SAAU,CACT,MAAO,CACN,OAAO,KAAK,MAAM,MAAQ,8CAC3B,EAEA,aAAc,CACb,OAAK,KAAK,MAAM,iBACR,KAAK,EAAE,KAAK,MAAM,iBAAkB,KAAK,MAAM,WAAW,EAExD,KAAK,MAAM,YACb,KAAK,MAAM,YAEZ,KAAK,EAAE,gBAAiB,mBAAmB,CACnD,EAEA,YAAa,CACZ,OAAK,KAAK,MAAM,gBACR,KAAK,EAAE,KAAK,MAAM,gBAAiB,KAAK,MAAM,UAAU,EAEzD,KAAK,MAAM,UACnB,EAEA,OAAQ,CACP,OAAO,KAAK,YAAY,MAAM,IAAI,CACnC,EAEA,YAAa,CACZ,OAAO,KAAK,MAAM,OAAS,CAC5B,EAEA,YAAa,CACZ,OAAO,KAAK,MAAM,CAAC,CACpB,EAEA,kBAAmB,CAClB,OAAK,KAAK,SACF,KAAK,YACN,KAAK,UACb,CACD,EAEA,SAAU,CACT,KAAK,KAAK,GAAG,cAAe,KAAK,kBAAmB,IAAI,EACxD,KAAK,KAAK,GAAG,SAAU,KAAK,gBAAiB,IAAI,EACjD,KAAK,KAAK,GAAG,SAAU,KAAK,gBAAiB,IAAI,EACjD,KAAK,KAAK,GAAG,iBAAkB,KAAK,UAAW,IAAI,EACnD,KAAK,KAAK,GAAG,kBAAmB,KAAK,WAAY,IAAI,CACtD,EAEA,WAAY,CACX,KAAK,KAAK,IAAI,cAAe,KAAK,kBAAmB,IAAI,EACzD,KAAK,KAAK,IAAI,SAAU,KAAK,gBAAiB,IAAI,EAClD,KAAK,KAAK,IAAI,SAAU,KAAK,gBAAiB,IAAI,EAClD,KAAK,KAAK,IAAI,iBAAkB,KAAK,UAAW,IAAI,EACpD,KAAK,KAAK,IAAI,kBAAmB,KAAK,WAAY,IAAI,CACvD,EAEA,QAAS,CACR,iBAAkB,CACjB,KAAK,SAAW,KAAK,KAAK,gBAAgB,KAAK,EAAE,EACjD,KAAK,QAAU,KAAK,KAAK,WAAW,KAAK,EAAE,CAC5C,EAEA,mBAAoB,CACd,KAAK,MAAM,iBACf,KAAK,YAAc,KAAK,EAAE,KAAK,MAAM,iBAAkB,KAAK,MAAM,WAAW,EAE7E,KAAK,YAAc,KAAK,MAAM,YAE/B,MAAMl0B,EAAQ,KAAK,YAAY,MAAM,IAAI,EAEzC,KAAK,WAAaA,EAAM,OAAS,EACjC,KAAK,WAAaA,EAAM,CAAC,CAC1B,EAEA,UAAU/M,EAAI,CACRA,IAAO,KAAK,KAChB,KAAK,QAAU,IAEhB,KAAK,QAAU,KAAK,KAAK,WAAW,KAAK,EAAE,CAC5C,EAEA,WAAWA,EAAI,CACTA,IAAO,KAAK,KAChB,KAAK,QAAU,GACjB,EAEA,QAAS,CACR,KAAK,SAAW,CAAE,KAAK,QACxB,EAEA,cAAe,CACd,GAAK,OAAO,KAAK,MAAM,UAAa,SAAW,CAC9C,KAAK,MAAM,WAAY,KAAK,MAAM,QAAQ,EAC1C,MACD,CAEA,MAAMwiC,EAAO,CAAC,WAAW,KAAK,EAAE,EAAE,EAC7B,KAAK,MAAM,YACfA,EAAK,KAAK,WAAW,KAAK,MAAM,WAAW,YAAY,CAAC,EAAE,EACtD,KAAK,MAAM,MACfA,EAAK,KAAK,WAAW,KAAK,MAAM,KAAK,YAAY,CAAC,EAAE,EAErD,KAAK,MAAM,WAAY,GAAGA,CAAI,CAC/B,EAEA,eAAgB,CACf,MAAMA,EAAO,CAAC,qBAAqB,KAAK,EAAE,EAAE,EACvC,KAAK,MAAM,YACfA,EAAK,KAAK,qBAAqB,KAAK,MAAM,WAAW,YAAY,CAAC,EAAE,EAChE,KAAK,MAAM,MACfA,EAAK,KAAK,qBAAqB,KAAK,MAAM,KAAK,YAAY,CAAC,EAAE,EAE/D,KAAK,MAAM,WAAY,GAAGA,CAAI,CAC/B,EAEA,aAAc,CACb,KAAK,UAAY,GACjB,KAAK,KAAK,YAAY,KAAK,EAAE,EAC3B,KAAK,IAAM,CACX,KAAK,UAAY,GACjB,KAAK,WAAa,KAAK,KAAK,eAAe,KAAK,EAAE,CACnD,CAAC,EACA,MAAMjsC,GAAO,CACb,QAAQ,MAAMA,CAAG,EACjB,KAAK,UAAY,EAClB,CAAC,CACH,CACD,CACD,E,eC9TI6qC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,kCAAkC,EAAE,CAAEF,EAAI,UAAWE,EAAG,MAAM,CAAC,YAAY,gCAAgC,EAAE,CAAEF,EAAI,UAAWE,EAAG,MAAM,CAACA,EAAG,SAAS,CAAC,YAAY,gCAAgC,MAAM,CAAC,SAAW,EAAE,CAAC,EAAE,CAACF,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,cAAc,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAGA,EAAI,IAAKE,EAAG,MAAM,CAACA,EAAG,QAAQ,CAAC,IAAI,UAAU,YAAY,wEAAwE,MAAM,CAAC,KAAO,OAAO,SAAW,EAAE,EAAE,SAAS,CAAC,MAAQF,EAAI,GAAG,EAAE,GAAG,CAAC,QAAUA,EAAI,SAAS,CAAC,CAAC,CAAC,CAAC,EAAEE,EAAG,MAAM,CAACA,EAAG,SAAS,CAAC,YAAY,YAAY,GAAG,CAAC,MAAQF,EAAI,MAAM,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,oBAAqB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,kFAAkF,EAAE,CAAEF,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,iBAAiB,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,gCAAgC,CAAC,CAAC,CAAC,EAAEA,EAAG,OAAO,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAnsC,UACTI,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,oBAAoB,CAAC,CAAC,CAAC,CAAC,EAAE,UAAY,CAAC,IAAIF,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,ECDjD,QCmDpW,CACd,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,UAAW,GACX,IAAK,KAEL,QAAS,GACT,KAAM,IACP,CACD,EAEA,SAAU,CACT,WAAY,CACX,MAAO,CAAE,KAAK,SAAW,KAAK,IAC/B,CACD,EAEA,SAAU,CACT,KAAK,QAAQ,EAEb,MAAMhrC,EAAM,KAAK,QAAQ,QACzB,UAAUwB,KAAO,KAAK,KAAK,MAC1BxB,EAAI,GAAG,WAAWwB,CAAG,GAAI,KAAK,QAAS,IAAI,CAC7C,EAEA,WAAY,CACX,MAAMxB,EAAM,KAAK,QAAQ,QACzB,UAAUwB,KAAO,KAAK,KAAK,MAC1BxB,EAAI,IAAI,WAAWwB,CAAG,GAAI,KAAK,QAAS,IAAI,CAC9C,EAEA,QAAS,CACR,WAAY,CACN,KAAK,OAAS,KAAK,MAAM,SAC7B,KAAK,MAAM,QAAQ,OAAO,CAC5B,EAEA,MAAM,QAAS,CACd,GAAK,KAAK,WAAa,KAAK,KAAO,KAAK,MAAQ,KAC/C,OAED,KAAK,UAAY,GACjB,MAAMo7B,EAAW,MAAM,MAAM,gCAAiC,CAC7D,OAAQ,MACR,KAAM,KAAK,IACZ,CAAC,EAEMA,EAAS,KACf,KAAK,UAAY,GACjB,KAAK,IAAM,sBAGZ,KAAK,IAAM,MAAMA,EAAS,KAAK,EAC1B,KAAK,IAAI,WAAW,SAAS,IACjC,KAAK,IAAM,WAAW,KAAK,IAAI,MAAM,CAAC,CAAC,IAExC,KAAK,UAAY,EAClB,EAEA,MAAM,SAAU,CACf,KAAK,UAAY,GACjB,KAAK,IAAM,KACX,KAAK,QAAU,GACf,KAAK,KAAO,MAAM,KAAK,KAAK,KAAK,EACjC,KAAK,QAAU,EAChB,CACD,CACD,E,eCjHIuO,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,gCAAgC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,+BAAgC,yLAAyL,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,mEAAmE,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sBAAsB,GAAG,CAAC,MAAQF,EAAI,MAAM,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,qCAAsC,aAAa,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sBAAsB,GAAG,CAAC,MAAQF,EAAI,OAAO,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,wCAAyC,gBAAgB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,MAAOE,EAAG,MAAM,CAAC,YAAY,kEAAkE,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,+BAAgC,4CAA4C,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,WAAYE,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,UAAU,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,kEAAkE,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,OAAO,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAA3lD,UACTI,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,gBAAgB,CAAC,CAAC,CAAC,CAAC,EAAE,UAAY,CAAC,IAAIF,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,E,sBCDnC,QCoDxW,CACd,MAAO,CAAC,MAAM,EAEd,MAAO,CACN,MAAO,CACN,WAAY,KACZ,MAAO,GACP,QAAS,IACV,CACD,EAEA,QAAS,CACR,MAAM,QAAS,CACd,KAAK,MAAQ,GACb,KAAK,QAAU,KAEf,IAAItF,EACJ,GAAI,CAEHA,EAAO,MADU,KAAK,KAAK,OAAO,EAAE,QAAQ,UAAU,EAChC,mBAAmB,CAE1C,MAAa,CACZ,KAAK,WAAa,KAAK,EAAE,oCAAqC,yCAAyC,EACvG,KAAK,MAAQ,GACb,MACD,CAEA,GAAI,IACH,UAAOA,EAAMA,EAAK,IAAI,CACvB,MAAa,CACZ,KAAK,WAAa,KAAK,EAAE,oCAAqC,iBAAiB,CAChF,CACD,EAEA,MAAM,SAAU,CACf,KAAK,MAAQ,GACb,KAAK,QAAU,KAEf,IAAIA,EACJ,GAAI,CAEH,GADAA,EAAO,QAAM,YAAS,kCAAkC,EACnD,CAAEA,EACN,MAEF,MAAa,CACZ,KAAK,WAAa,KAAK,EAAE,oCAAqC,sBAAsB,EACpF,KAAK,MAAQ,GACb,MACD,CAGA,GAAKA,EAAK,KAAK,YAAY,EAAE,SAAS,KAAK,EAC1C,OAAO,KAAK,WAAWA,CAAI,EAE5B,IAAInuB,EACJ,GAAI,CACHA,EAAW,QAAM,YAASmuB,CAAI,CAC/B,MAAa,CACZ,KAAK,WAAa,KAAK,EAAE,oCAAqC,sBAAsB,EACpF,KAAK,MAAQ,GACb,MACD,CAEA,IAAItlC,EACJ,GAAI,CACHA,EAAO,KAAK,MAAMmX,CAAQ,CAC3B,MAAa,CACZ,KAAK,WAAa,KAAK,EAAE,oCAAqC,+BAA+B,EAC7F,KAAK,MAAQ,GACb,MACD,CAEA,GAAK,CAAEnX,GAAQA,EAAK,UAAY,EAAI,CACnC,KAAK,WAAa,KAAK,EAAE,kCAAmC,8FAA8F,EAC1J,KAAK,MAAQ,GACb,MACD,CAEA,GAAKA,EAAK,OAAS,OAAS,CAC3B,KAAK,WAAa,KAAK,EAAE,kCAAmC,uEAAuE,EACnI,KAAK,MAAQ,GACb,MACD,CAEA,MAAMuQ,EAAW,KAAK,KAAK,OAAO,EAAE,QAAQ,UAAU,EACrDrP,EAAWqP,EAAS,SAErB,MAAMrP,EAAS,WAAW,EAE1BA,EAAS,MAAM,EACf,IAAI2B,EAAI,EACR,UAAUzB,KAAO,OAAO,KAAKpB,EAAK,MAAM,EAAG,CAC1C,MAAMH,EAAMG,EAAK,OAAOoB,CAAG,EAC3BF,EAAS,IAAIE,EAAKvB,CAAG,EACrBqB,EAAS,KAAK,UAAWE,EAAKvB,EAAK,EAAK,EACxCgD,GACD,CAEA,KAAK,QAAU,KAAK,EAAE,kCAAmC,qEAAsE,CAC9H,MAAOA,CACR,CAAC,CACF,EAEA,MAAM,WAAWyiC,EAAM,CACtB,MAAM8G,GAAS,MAAM,qCAA+C,QACpE,IAAItlC,EAAOulC,EAAOrsC,EAElB,GAAI,CACH8G,EAAQ,MAAO,IAAIslC,EAAM,EAAE,UAAU9G,CAAI,EAEzC+G,EAAQ,MAAMvlC,EAAM,KAAK,YAAY,EAAE,MAAM,MAAM,EACnD9G,EAAO,MAAM8G,EAAM,KAAK,eAAe,EAAE,MAAM,MAAM,CAEtD,MAAa,CACZ,KAAK,WAAa,KAAK,EAAE,mCAAoC,8BAA8B,EAC3F,KAAK,MAAQ,EACd,CAEA,GAAI,CACHulC,EAAQ,KAAK,MAAMA,CAAK,EACxBrsC,EAAO,KAAK,MAAMA,CAAI,CACvB,MAAa,CACZ,KAAK,WAAa,KAAK,EAAE,oCAAqC,+BAA+B,EAC7F,KAAK,MAAQ,GACb,MACD,CAEA,GAAK,CAAEA,GAAQA,EAAK,UAAY,EAAI,CACnC,KAAK,WAAa,KAAK,EAAE,kCAAmC,8FAA8F,EAC1J,KAAK,MAAQ,GACb,MACD,CAEA,GAAKA,EAAK,OAAS,OAAS,CAC3B,KAAK,WAAa,KAAK,EAAE,kCAAmC,uEAAuE,EACnI,KAAK,MAAQ,GACb,MACD,CAEA,MAAMuQ,EAAW,KAAK,KAAK,OAAO,EAAE,QAAQ,UAAU,EACtD,MAAMA,EAAS,cAAc,EAC7B,MAAMrP,EAAWqP,EAAS,SAG1B,GAFA,MAAMrP,EAAS,WAAW,EAErB,OAAO,KAAKmrC,CAAK,EAAE,QAAU,CAAEnrC,EAAS,cAAgB,CAC5D,KAAK,WAAa,KAAK,EAAE,oCAAqC,+JAA+J,EAC7N,KAAK,MAAQ,GACb,MACD,CAGA,MAAMorC,EAAe,CAAC,EAEtB,SAAU,CAACC,EAAUvsC,CAAI,IAAK,OAAO,QAAQqsC,CAAK,EAAG,CACpD,IAAIG,EACCxsC,EAAK,OAAS,QAClBwsC,EAAO,MAAM1lC,EAAM,KAAK,SAASylC,CAAQ,EAAE,EAAE,MAAM,MAAM,EACzDC,EAAO,IAAI,KAAK,CAACA,CAAI,EAAGxsC,EAAK,KAAM,CAAC,aAAcA,EAAK,SAAU,KAAMA,EAAK,IAAI,CAAC,GACtEA,EAAK,OAAS,OACzBwsC,EAAO,MAAM1lC,EAAM,KAAK,SAASylC,CAAQ,EAAE,EAAE,MAAM,MAAM,EAChDvsC,EAAK,OAAS,KACvBwsC,EAAO,MAAM1lC,EAAM,KAAK,SAASylC,CAAQ,EAAE,EAAE,MAAM,aAAa,EACvDvsC,EAAK,OAAS,MACvBwsC,EAAO,MAAM1lC,EAAM,KAAK,SAASylC,CAAQ,EAAE,EAAE,MAAM,YAAY,GAE/D,KAAK,WAAa,KAAK,EAAE,sCAAuC,gEAAiEvsC,CAAI,EACrI,KAAK,MAAQ,IAGdssC,EAAatsC,EAAK,GAAG,EAAIwsC,CAC1B,CAIA,IAAI1xB,EAAI,EACR,MAAM5Z,EAAS,WAAW,EAE1B,SAAU,CAACE,EAAKorC,CAAI,IAAK,OAAO,QAAQF,CAAY,EACnD,MAAMprC,EAAS,QAAQE,EAAKorC,CAAI,EAChC1xB,IAID5Z,EAAS,MAAM,EACf,MAAMA,EAAS,MAAM,EACrB,IAAI2B,EAAI,EACR,UAAUzB,KAAO,OAAO,KAAKpB,EAAK,MAAM,EAAG,CAC1C,MAAMH,EAAMG,EAAK,OAAOoB,CAAG,EAC3BF,EAAS,IAAIE,EAAKvB,CAAG,EACrBqB,EAAS,KAAK,UAAWE,EAAKvB,EAAK,EAAK,EACxCgD,GACD,CAEA,MAAM3B,EAAS,MAAM,EAErB,KAAK,QAAU,KAAK,EAAE,sCAAuC,qGAAsG,CAClK,MAAO2B,EACP,MAAOiY,CACR,CAAC,CACF,CACD,CACD,E,eCtPIiwB,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,qCAAqC,EAAE,CAACA,EAAG,oBAAoB,CAAC,MAAM,CAAC,KAAOF,EAAI,aAAa,OAASA,EAAI,KAAK,QAAUA,EAAI,KAAK,QAAQ,SAAWA,EAAI,KAAK,SAAS,UAAYA,EAAI,KAAK,UAAU,OAAS,EAAI,EAAE,GAAG,CAAC,KAAOA,EAAI,QAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAG,CAAEA,EAAI,IAAI,QAAUA,EAAI,IAAI,SAAW,GAAKA,EAAI,eAAgBE,EAAG,MAAM,CAAC,YAAY,oFAAoF,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,sCAAsC,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEE,EAAG,KAAK,CAAC,YAAY,2BAA2B,EAAEF,EAAI,GAAIA,EAAI,MAAO,SAAS7hB,EAAK,CAAC,OAAO+hB,EAAG,oBAAoB,CAAC,IAAI/hB,EAAK,GAAG,MAAM,CAAC,KAAOA,EAAK,EAAE,OAAS6hB,EAAI,KAAK,QAAUA,EAAI,KAAK,QAAQ,SAAWA,EAAI,KAAK,SAAS,UAAYA,EAAI,KAAK,SAAS,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,OAAOH,EAAI,OAAO7hB,CAAI,CAAC,EAAE,KAAO,SAASgiB,EAAO,CAAC,OAAOH,EAAI,KAAK7hB,EAAMgiB,CAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAA1/B,UACTC,EAAkB,CAAC,E,sBCkCvB,IAAI14B,EAAU,ECnC6W,QDqC5W,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,aAAc,CACb,EAAG,GACH,EAAG,GACH,EAAG,EACH,OAAQ,EACT,CACD,CACD,EAEA,SAAU,CACT,gBAAiB,CAChB,UAAUvS,KAAO,KAAK,IACrB,GAAKA,EAAI,IAAM,UACd,MAAO,GAET,MAAO,EACR,EAEA,OAAQ,CACP,MAAMO,EAAM,CAAC,EAEb,GAAK,MAAM,QAAQ,KAAK,GAAG,EAC1B,UAAUyoB,KAAQ,KAAK,IACjBA,GAAQA,EAAK,OACV,OAAIA,EAAK,EAAG,GAAG,IACrBA,EAAK,EAAE,EAAI,IAGRA,GAAQA,EAAK,IAAM,WACvBzoB,EAAI,KAAKyoB,CAAI,EAGhB,OAAK,KAAK,KAAK,UAAY,KAAK,KAAK,UACpCzoB,EAAI,KAAK,CAACoR,EAAEsJ,IAAM,CACjB,GAAKtJ,EAAE,GAAKsJ,EAAE,EAAI,CACjB,GAAK,KAAK,KAAK,SAAW,CACzB,GAAKtJ,EAAE,EAAE,EAAIsJ,EAAE,EAAE,EAAI,MAAO,GAC5B,GAAKtJ,EAAE,EAAE,EAAIsJ,EAAE,EAAE,EAAI,MAAO,EAC7B,CACA,GAAK,KAAK,KAAK,QAAU,CACxB,GAAK,CAAEtJ,EAAE,EAAE,GAAKsJ,EAAE,EAAE,EAAI,MAAO,GAC/B,GAAKtJ,EAAE,EAAE,GAAK,CAAEsJ,EAAE,EAAE,EAAI,MAAO,EAChC,CACD,CACA,MAAO,EACR,CAAC,EAGK1a,CACR,EAEA,KAAM,CACL,OAAO,KAAK,UAGL,KAAK,MAAM,IAAIwK,IACrBA,EAAE,GAAKA,EAAE,IAAM,GAAG,KAAK,IAAI,CAAC,IAAI,KAAK,OAAO,CAAC,IAAIwH,GAAS,GACnDxH,EACP,EALO,CAAC,CAMV,CACD,EAEA,QAAS,CACR,SAASie,EAAM,CACd,GAAK,CAAEA,EAAK,EACX,OAED,MAAM4jB,EAAO,MAAM,KAAK,KAAK,GAAG,EAChCA,EAAK,KAAK,CAAC,EAAG5jB,CAAI,CAAC,EACnB,KAAK,OAAI,aAAU4jB,CAAI,CAAC,CACzB,EAEA,OAAO5sC,EAAK,CACX,MAAM4sC,EAAO,MAAM,KAAK,KAAK,GAAG,EAC/B/9B,EAAM+9B,EAAK,QAAQ5sC,CAAG,EAElB6O,IAAQ,KACZ+9B,EAAK,OAAO/9B,EAAK,CAAC,EACb+9B,EAAK,OACT,KAAK,OAAI,aAAUA,CAAI,CAAC,EAExB,KAAK,MAAM,EAEd,EAEA,KAAK5sC,EAAK6sC,EAAS,CAClB7sC,EAAI,EAAI6sC,EACR,KAAK,OAAI,aAAU,KAAK,GAAG,CAAC,CAC7B,CACD,CACD,E,eE9HI3B,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,wEAAwE,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAAEF,EAAI,SAAWA,EAAI,QAAQ,MAAOE,EAAG,MAAM,CAAC,YAAY,wBAAwB,MAAO,CAAC,gBAAiBF,EAAI,QAAQ,OAAS,IAAI,EAAG,MAAM,CAAC,IAAMA,EAAI,QAAQ,KAAK,CAAC,CAAC,EAAEE,EAAG,MAAM,CAAC,YAAY,uBAAuB,CAAC,CAAC,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAAE,CAAEF,EAAI,SAAW,CAAEA,EAAI,QAASE,EAAG,KAAK,CAAC,YAAY,eAAe,EAAE,CAACA,EAAG,MAAM,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAG,CAAEA,EAAI,SAAWA,EAAI,QAASE,EAAG,KAAK,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,QAAQ,IAAI,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAASE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,EAAG,WAAW,aAAa,CAAC,EAAE,YAAY,yHAAyH,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,UAAW,IAAKG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAEX,EAAI,OAAQE,EAAG,SAAS,CAAC,MAAM,CAAC,MAAQ,EAAE,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,0BAA0B,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,OAAQ,SAASpoB,EAAQ,CAAC,OAAOsoB,EAAG,WAAW,CAAC,IAAItoB,EAAQ,MAAM,MAAM,CAAC,MAAQA,EAAQ,KAAK,CAAC,EAAEooB,EAAI,GAAIpoB,EAAQ,OAAQ,SAAS1H,EAAM,CAAC,OAAOgwB,EAAG,SAAS,CAAC,IAAIhwB,EAAM,GAAG,SAAS,CAAC,MAAQA,EAAM,EAAE,CAAC,EAAE,CAAC8vB,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAG9vB,EAAM,IAAI,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE8vB,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,6BAA6B,EAAE,CAAEF,EAAI,QAASE,EAAG,eAAe,CAAC,MAAM,CAAC,SAAW,GAAK,aAAa,GAAM,QAAUF,EAAI,EAAE,0BAA2B,OAAO,CAAC,EAAE,MAAM,CAAC,MAAOA,EAAI,UAAU,EAAG,SAAS,SAAUS,EAAK,CAACT,EAAI,KAAKA,EAAI,UAAW,IAAKS,CAAG,CAAC,EAAE,WAAW,aAAa,CAAC,CAAC,EAAGT,EAAI,KAAK,EAAGE,EAAG,MAAM,CAAC,YAAY,yDAAyD,EAAE,CAACA,EAAG,SAAS,CAAC,MAAQ,qBAAwBF,EAAI,KAAK,CAAI,EAAE,CAACA,EAAI,GAAG;AAAA;AAAA,KAAyB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,OAAO,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,yDAAyD,MAAMF,EAAI,QAAU,aAAe,YAAY,EAAE,CAAIA,EAAI,QAAiDE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,iBAAiB,MAAOF,EAAI,UAAU,EAAG,WAAW,cAAc,UAAU,CAAC,OAAS,EAAI,CAAC,CAAC,EAAE,YAAY,qGAAqG,YAAY,CAAC,MAAQ,MAAM,EAAE,MAAM,CAAC,KAAO,SAAS,KAAO,GAAG,EAAE,SAAS,CAAC,MAASA,EAAI,UAAU,CAAE,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,UAAW,IAAKA,EAAI,GAAGG,EAAO,OAAO,KAAK,CAAC,CAAC,EAAE,KAAO,SAASA,EAAO,CAAC,OAAOH,EAAI,aAAa,CAAC,CAAC,CAAC,CAAC,EAA5jBE,EAAG,OAAO,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,KAAK,CAAC,CAAC,CAAC,CAAC,EAAwhBA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,UAAU,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,YAAcA,EAAI,SAAWA,EAAI,QAAQ,QAASE,EAAG,MAAM,CAAC,YAAY,yHAAyH,EAAE,CAAEF,EAAI,QAASE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,OAAQ,WAAW,kBAAkB,CAAC,EAAE,YAAY,0CAA0C,MAAM,CAAC,GAAK,UAAYA,EAAI,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAU,MAAM,QAAQA,EAAI,UAAU,MAAM,EAAEA,EAAI,GAAGA,EAAI,UAAU,OAAO,IAAI,EAAE,GAAIA,EAAI,UAAU,MAAO,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIG,EAAIN,EAAI,UAAU,OAAOO,EAAKJ,EAAO,OAAOK,EAAI,EAAAD,EAAK,QAAuB,GAAG,MAAM,QAAQD,CAAG,EAAE,CAAC,IAAIG,EAAI,KAAKC,EAAIV,EAAI,GAAGM,EAAIG,CAAG,EAAKF,EAAK,QAASG,EAAI,GAAIV,EAAI,KAAKA,EAAI,UAAW,SAAUM,EAAI,OAAO,CAACG,CAAG,CAAC,CAAC,EAAQC,EAAI,IAAKV,EAAI,KAAKA,EAAI,UAAW,SAAUM,EAAI,MAAM,EAAEI,CAAG,EAAE,OAAOJ,EAAI,MAAMI,EAAI,CAAC,CAAC,CAAC,CAAG,MAAMV,EAAI,KAAKA,EAAI,UAAW,SAAUQ,CAAG,CAAE,CAAC,CAAC,CAAC,EAAER,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAASE,EAAG,QAAQ,CAAC,YAAY,0CAA0C,MAAM,CAAC,IAAM,UAAYF,EAAI,EAAE,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,wBAAwB,CAAC,CAAC,CAAC,EAAGF,EAAI,KAAK,OAAQE,EAAG,OAAO,CAAC,YAAY,uBAAuB,CAAC,EAAEF,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,qCAAqC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,OAAQE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,YAAY,MAAM,CAAEF,EAAI,OAAS,sBAAsB,MAAM,CAAC,SAAW,CAAEA,EAAI,KAAK,EAAE,GAAG,CAAC,MAAQA,EAAI,IAAI,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,KAAK,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAGA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sDAAsD,MAAM,CAAEF,EAAI,OAAS,sBAAsB,MAAM,CAAC,SAAW,CAAEA,EAAI,KAAK,EAAE,GAAG,CAAC,MAAQA,EAAI,IAAI,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQF,EAAI,MAAM,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,MAAM,SAAUA,EAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,SAAW,EAAK,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQF,EAAI,IAAI,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,2BAA2B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,SAAW,EAAI,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAA9lP,UACTI,EAAkB,CAAC,E,WCsMvB,IAAInhC,EAAK,ECvMiX,QDyM3W,CACd,MAAO,CACN,OAAQ,MACR,KAAM,OACN,QAAS,CACR,KAAM,QACN,QAAS,EACV,EACA,SAAU,CACT,KAAM,QACN,QAAS,EACV,EACA,UAAW,CACV,KAAM,QACN,QAAS,EACV,EACA,OAAQ,CACP,KAAM,QACN,QAAS,EACV,CACD,EAEA,MAAO,CACN,MAAMgjC,EAAU,cAAchjC,GAAI,GAElC,OAAK,KAAK,OACF,CACN,GAAIgjC,EACJ,SAAU,GACV,QAAS,GACT,aAAW,aAAU,KAAK,IAAI,CAC/B,EAEM,CACN,GAAIA,EACJ,SAAU,GACV,QAAS,GACT,UAAW,IACZ,CACD,EAEA,SAAU,CACT,OAAQ,CACP,OAAO,KAAK,QAAQ,GAAK,KAAK,QAAQ,IAAM,EAC7C,EAEA,SAAU,CACT,OAAO,KAAK,QAAU,KAAK,UAAY,KAAK,IAC7C,EAEA,SAAU,CACT,GAAK,CAAE,KAAK,QAAU,CAAE,KAAK,SAAW,CAAE,KAAK,QAAQ,EACtD,OAAO,KAER,MAAMrhB,EAAI,KAAK,QAAQ,EAEvB,UAAUhJ,KAAW,KAAK,OACzB,GAAK,GAAEA,GAAW,CAAEA,EAAQ,SAG5B,UAAU1H,KAAS0H,EAAQ,OAC1B,GAAK1H,EAAM,KAAO0Q,EACjB,OAAO1Q,EAGV,OAAO,IACR,CACD,EAEA,QAAS,CACR,MAAO,CACN,KAAK,QAAU,GACf,KAAK,UAAY,OAAO,OAAO,CAAC,OAAQ,EAAK,KAAG,aAAU,KAAK,IAAI,CAAC,CACrE,EAEA,cAAe,CACT,KAAK,UACT,KAAK,UAAU,OAAS,CAAE,KAAK,UAAU,OAC3C,EAEA,QAAS,CACH,KAAK,OACT,KAAK,aAAY,aAAU,KAAK,IAAI,GAEpC,KAAK,QAAU,GACf,KAAK,UAAY,KAEnB,EAEA,MAAO,CACD,KAAK,UAAY,KAAK,UAAU,IAC/B,OAAO,KAAK,UAAU,GAAM,SAChC,KAAK,UAAU,EAAI,KAAK,MAAM,KAAK,UAAU,CAAC,EAE9C,KAAK,UAAU,EAAI,GAGhB,KAAK,OACT,KAAK,MAAM,OAAQ,KAAK,SAAS,EAClC,KAAK,OAAO,CACb,CACD,CACD,E,eExSImwB,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,kCAAkC,EAAE,CAAEF,EAAI,QAAUA,EAAI,SAAWA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,4DAA4D,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,YAAY,CAAC,EAAEF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,+EAA+E,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,0BAA0B,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,oEAAoE,MAAM,CAAC,sBAAuB,CAAEF,EAAI,SAAS,EAAE,MAAM,CAAC,SAAW,CAAEA,EAAI,SAAS,EAAE,GAAG,CAAC,MAAQA,EAAI,KAAK,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,oBAAqB,sBAAsB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,OAAQ,SAASkC,EAAI,CAAC,OAAOhC,EAAG,UAAU,CAAC,IAAIgC,EAAI,MAAM,YAAY,iCAAiC,EAAE,CAAEA,EAAI,GAAIhC,EAAG,SAAS,CAAC,YAAY,wDAAwD,MAAM,CAAC,QAASF,EAAI,aAAakC,EAAI,EAAE,CAAC,CAAC,EAAE,CAAChC,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,GAAKgC,EAAI,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUlC,EAAI,aAAakC,EAAI,EAAE,CAAC,EAAE,GAAG,CAAC,MAAQ,SAAS/B,EAAO,CAAC,OAAOH,EAAI,SAASkC,EAAI,GAAI/B,CAAM,CAAC,CAAC,CAAC,CAAC,EAAEH,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAMgC,EAAI,EAAE,CAAC,EAAE,CAAChC,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGkC,EAAI,KAAK,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAElC,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,mBAAmB,EAAE,CAAIF,EAAI,aAAakC,EAAI,EAAE,EAAoZlC,EAAI,GAAG,EAAxZE,EAAG,SAAS,CAAC,YAAY,iEAAiE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,MAAMkC,EAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAChC,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,kBAAkB,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAU,CAAC,CAAC,CAAC,EAAEE,EAAG,SAAS,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGkC,EAAI,KAAK,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAElC,EAAI,GAAG,GAAG,EAAG,CAAEkC,EAAI,IAAMlC,EAAI,aAAakC,EAAI,EAAE,EAAGhC,EAAG,KAAK,CAAC,YAAY,kEAAkE,EAAEF,EAAI,GAAIkC,EAAI,OAAQ,SAAS/pC,EAAE,CAAC,OAAO+nC,EAAG,KAAK,CAAC,IAAI/nC,EAAE,GAAG,YAAY,yLAAyL,MAAM,CAAC,QAAS6nC,EAAI,aAAa7nC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC+nC,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,GAAK/nC,EAAE,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAU6nC,EAAI,aAAa7nC,EAAE,EAAE,CAAC,EAAE,GAAG,CAAC,MAAQ,SAASgoC,EAAO,CAAC,OAAOH,EAAI,SAAS7nC,EAAE,GAAIgoC,CAAM,CAAC,CAAC,CAAC,CAAC,EAAEH,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,kEAAkE,MAAM,CAAC,IAAM/nC,EAAE,EAAE,CAAC,EAAE,CAAC+nC,EAAG,MAAM,CAAC,YAAY,mBAAmB,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,qDAAqD,MAAO,CAAC,gBAAiB/nC,EAAE,MAAO,gBAAiBA,EAAE,UAAW,CAAE,CAAC,EAAE6nC,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAG7nC,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE6nC,EAAI,GAAG,GAAG,EAAG7nC,EAAE,WAAaA,EAAE,iBAAmBA,EAAE,SAAS,OAAS,GAAI+nC,EAAG,UAAU,CAAC,YAAY,YAAY,EAAEF,EAAI,GAAI7nC,EAAE,SAAU,SAASyoB,EAAE,CAAC,OAAOsf,EAAG,OAAO,CAAC,IAAK,SAAY/nC,EAAE,GAAM,IAAOyoB,EAAE,QAAU,YAAY,wBAAwB,MAAO,CAAC,gBAAiBzoB,EAAE,MAAO,gBAAiByoB,EAAE,UAAU,EAAG,MAAM,CAAC,MAAQA,EAAE,KAAK,oBAAoB,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEof,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,oEAAoE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,MAAM7nC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC+nC,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,WAAuBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,kBAAkB,CAAC,EAAE;AAAA,SAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEE,EAAG,MAAM,CAAC,YAAY,yDAAyD,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,wBAAyB,yEAA0E,CACzhI,MAAOkC,EAAI,OAAO,MACnB,CAAC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAFb,UAGT9B,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,E,sBCiIvN,SAASiC,EAAWrE,EAAO,CAC1B,OAAOA,EAAM,KAAK,CAACh3B,EAAGsJ,IAAM,CAC3B,MAAMgyB,EAAKt7B,EAAE,KAAK,YAAY,EAC7Bu7B,EAAKjyB,EAAE,KAAK,YAAY,EAEzB,OAAKgyB,EAAKC,EAAY,GACjBD,EAAKC,EAAY,EACf,CACR,CAAC,CACF,CATS,EAAAF,EAAA,cCpIgX,QD+I1W,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,OAAQ,CAAC,CACV,CACD,EAEA,SAAU,CACT,KAAK,aAAa,CACnB,EAEA,QAAS,CACR,cAAe,CACd,MAAMlyB,EAAS,KAAK,KAAK,UAAU,IAAM,KAAK,aAAa,CAAC,EAC5D,UAAU2H,KAAW3H,EACpB2H,EAAQ,OAASuqB,EAAWvqB,EAAQ,MAAM,EAG3C,KAAK,OAAS3H,CACf,EAEA,aAAahR,EAAI,CAChB,MAAO,CAAE,KAAK,MAAMA,CAAE,CACvB,EAEA,aAAaA,EAAI,CAChB,MAAO,IAAE,OAAI,KAAK,MAAOA,CAAE,CAC5B,EAEA,SAASA,EAAI7J,EAAO,CACnB,MAAMktC,EAAUltC,EAAM,OACrB4sC,EAAU,CAAC,CAAC/iC,CAAE,EAAG,CAAEqjC,EAAQ,OAAO,EAEnC,KAAK,IAAI,OAAO,OAAO,CAAC,EAAG,KAAK,MAAON,CAAO,CAAC,CAChD,EAEA,MAAM/iC,EAAI,CACT,MAAM9J,EAAM,OAAO,OAAO,CAAC,EAAG,KAAK,KAAK,EACxC,OAAOA,EAAI8J,CAAE,EAEN,OAAO,KAAK9J,CAAG,EAAE,OAGvB,KAAK,IAAIA,CAAG,EAFZ,KAAK,MAAM,CAGb,CACD,CACD,E,eEzLIkrC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,cAAc,CAAC,MAAM,CAAC,KAAOF,EAAI,aAAa,QAAUA,EAAI,KAAK,QAAQ,UAAYA,EAAI,KAAK,UAAU,MAAQA,EAAI,KAAK,MAAM,UAAYA,EAAI,KAAK,UAAU,SAAWA,EAAI,KAAK,SAAS,OAAS,EAAI,EAAE,GAAG,CAAC,KAAOA,EAAI,QAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAG,CAAEA,EAAI,IAAI,QAAUA,EAAI,IAAI,SAAW,GAAKA,EAAI,eAAgBE,EAAG,MAAM,CAAC,YAAY,oFAAoF,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,sCAAsC,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEE,EAAG,KAAK,CAAC,YAAY,2BAA2B,EAAEF,EAAI,GAAIA,EAAI,MAAO,SAAS7hB,EAAK,CAAC,OAAO+hB,EAAG,cAAc,CAAC,IAAI/hB,EAAK,GAAG,MAAM,CAAC,KAAOA,EAAK,EAAE,QAAU6hB,EAAI,KAAK,QAAQ,UAAYA,EAAI,KAAK,UAAU,MAAQA,EAAI,KAAK,MAAM,UAAYA,EAAI,KAAK,UAAU,SAAWA,EAAI,KAAK,QAAQ,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,OAAOH,EAAI,OAAO7hB,CAAI,CAAC,EAAE,KAAO,SAASgiB,EAAO,CAAC,OAAOH,EAAI,KAAK7hB,EAAMgiB,CAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAA/iC,UACTC,EAAkB,CAAC,E,sBCoCvB,IAAI14B,EAAU,ECrCsW,QDuCrW,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,aAAc,CACb,EAAG,GACH,EAAG,OACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,EACH,OAAQ,EACT,CACD,CACD,EAEA,SAAU,CACT,gBAAiB,CAChB,UAAUvS,KAAO,KAAK,IACrB,GAAKA,EAAI,IAAM,UACd,MAAO,GAET,MAAO,EACR,EAEA,OAAQ,CACP,MAAMO,EAAM,CAAC,EAEb,GAAK,MAAM,QAAQ,KAAK,GAAG,EAC1B,UAAUyoB,KAAQ,KAAK,IACjBA,GAAQA,EAAK,OACV,OAAIA,EAAK,EAAG,GAAG,IACrBA,EAAK,EAAE,EAAIA,EAAK,EAAE,IAAM,UAElB,OAAIA,EAAK,EAAG,GAAG,IACrBA,EAAK,EAAE,EAAI,OAEL,OAAIA,EAAK,EAAG,GAAG,IACrBA,EAAK,EAAE,EAAI,GAEPA,EAAK,EAAE,IAAM,QACjBA,EAAK,EAAE,EAAI,UAGRA,GAAQA,EAAK,IAAM,WACvBzoB,EAAI,KAAKyoB,CAAI,EAGhB,OAAAzoB,EAAI,KAAK,CAACoR,EAAEsJ,IAAM,CACjB,GAAKtJ,EAAE,GAAKsJ,EAAE,EAAI,CACjB,GAAK,KAAK,KAAK,UAAY,CAC1B,GAAK,CAAEtJ,EAAE,EAAE,QAAUsJ,EAAE,EAAE,OAAS,MAAO,GACzC,GAAKtJ,EAAE,EAAE,QAAU,CAAEsJ,EAAE,EAAE,OAAS,MAAO,EAC1C,CACA,GAAK,KAAK,KAAK,SAAW,CACzB,GAAKtJ,EAAE,EAAE,EAAIsJ,EAAE,EAAE,EAAI,MAAO,GAC5B,GAAKtJ,EAAE,EAAE,EAAIsJ,EAAE,EAAE,EAAI,MAAO,EAC7B,CACA,GAAK,KAAK,KAAK,QAAU,CACxB,GAAK,CAAEtJ,EAAE,EAAE,GAAKsJ,EAAE,EAAE,EAAI,MAAO,GAC/B,GAAKtJ,EAAE,EAAE,GAAK,CAAEsJ,EAAE,EAAE,EAAI,MAAO,EAChC,CACA,GAAK,KAAK,KAAK,UAAY,CAC1B,GAAK,CAAEtJ,EAAE,EAAE,GAAKsJ,EAAE,EAAE,EAAI,MAAO,GAC/B,GAAKtJ,EAAE,EAAE,GAAK,CAAEsJ,EAAE,EAAE,EAAI,MAAO,EAChC,CACA,GAAK,KAAK,KAAK,OAAS,GAAO,CAC9B,GAAK,CAAEtJ,EAAE,EAAE,GAAKsJ,EAAE,EAAE,EAAI,MAAO,GAC/B,GAAKtJ,EAAE,EAAE,GAAK,CAAEsJ,EAAE,EAAE,EAAI,MAAO,EAChC,CACD,CACA,MAAO,EACR,CAAC,EAEM1a,CACR,EAEA,KAAM,CACL,OAAO,KAAK,UAGL,KAAK,MAAM,IAAIwK,IACrBA,EAAE,GAAKA,EAAE,IAAM,GAAG,KAAK,IAAI,CAAC,IAAI,KAAK,OAAO,CAAC,IAAIwH,GAAS,GACnDxH,EACP,EALO,CAAC,CAMV,CACD,EAEA,QAAS,CACR,SAASie,EAAM,CACd,GAAK,CAAEA,EAAK,EACX,OAED,MAAM4jB,EAAO,MAAM,KAAK,KAAK,GAAG,EAChCA,EAAK,KAAK,CAAC,EAAG5jB,CAAI,CAAC,EACnB,KAAK,OAAI,aAAU4jB,CAAI,CAAC,CACzB,EAEA,OAAO5sC,EAAK,CACX,MAAM4sC,EAAO,MAAM,KAAK,KAAK,GAAG,EAC/B/9B,EAAM+9B,EAAK,QAAQ5sC,CAAG,EAElB6O,IAAQ,KACZ+9B,EAAK,OAAO/9B,EAAK,CAAC,EACb+9B,EAAK,OACT,KAAK,OAAI,aAAUA,CAAI,CAAC,EAExB,KAAK,MAAM,EAEd,EAEA,KAAK5sC,EAAK6sC,EAAS,CAClB7sC,EAAI,EAAI6sC,EACR,KAAK,OAAI,aAAU,KAAK,GAAG,CAAC,CAC7B,CACD,CACD,E,eEvJI3B,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,6BAA6B,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,wEAAwE,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAAIF,EAAI,QAA0EA,EAAI,GAAG,EAAxEE,EAAG,KAAK,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,QAAQ,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAASE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,EAAG,WAAW,aAAa,CAAC,EAAE,YAAY,yHAAyH,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,UAAW,IAAKG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAEX,EAAI,OAAQE,EAAG,SAAS,CAAC,MAAM,CAAC,MAAQ,EAAE,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,0BAA0B,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,MAAO,SAAS/xB,EAAK,CAAC,OAAOiyB,EAAG,SAAS,CAAC,IAAIjyB,EAAK,SAAS,CAAC,MAAQA,CAAI,CAAC,EAAE,CAAC+xB,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAG/xB,CAAI,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE+xB,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,OAAQE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,YAAY,MAAM,CAAEF,EAAI,OAAS,sBAAsB,MAAM,CAAC,SAAW,CAAEA,EAAI,KAAK,EAAE,GAAG,CAAC,MAAQA,EAAI,IAAI,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,KAAK,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,MAAM,SAAUA,EAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,SAAW,EAAK,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,SAAW,EAAI,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAjzF,UACTI,EAAkB,CAAC,E,WCiEvB,IAAInhC,EAAK,EClEmX,QDoE7W,CACd,MAAO,CACN,MAAO,MACP,KAAM,OACN,QAAS,CACR,KAAM,QACN,QAAS,EACV,EACA,UAAW,CACV,KAAM,QACN,QAAS,EACV,EACA,OAAQ,CACP,KAAM,QACN,QAAS,EACV,CACD,EAEA,MAAO,CACN,OAAK,KAAK,OACF,CACN,UAAWA,IACX,SAAU,GACV,QAAS,GACT,aAAW,aAAU,KAAK,IAAI,CAC/B,EAEM,CACN,UAAWA,IACX,SAAU,GACV,QAAS,GACT,UAAW,IACZ,CACD,EAEA,SAAU,CACT,OAAQ,CACP,OAAO,KAAK,QAAQ,GAAK,KAAK,QAAQ,IAAM,EAC7C,EAEA,SAAU,CACT,OAAO,KAAK,QAAU,KAAK,UAAY,KAAK,IAC7C,CACD,EAEA,QAAS,CACR,QAAS,CACH,KAAK,OACT,KAAK,aAAY,aAAU,KAAK,IAAI,GAEpC,KAAK,QAAU,GACf,KAAK,UAAY,KAEnB,EAEA,MAAO,CACN,KAAK,MAAM,OAAQ,KAAK,SAAS,EACjC,KAAK,OAAO,CACb,CACD,CACD,E,eEzHIohC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,gCAAgC,EAAE,CAACA,EAAG,sBAAsB,CAAC,MAAM,CAAC,KAAOF,EAAI,aAAa,MAAQA,EAAI,KAAK,OAAS,EAAI,EAAE,GAAG,CAAC,KAAOA,EAAI,QAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAG,CAAEA,EAAI,IAAI,QAAUA,EAAI,IAAI,SAAW,GAAKA,EAAI,eAAgBE,EAAG,MAAM,CAAC,YAAY,oFAAoF,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,sCAAsC,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEE,EAAG,KAAK,CAAC,YAAY,2BAA2B,EAAEF,EAAI,GAAIA,EAAI,MAAO,SAAS7hB,EAAK,CAAC,OAAO+hB,EAAG,sBAAsB,CAAC,IAAI/hB,EAAK,GAAG,MAAM,CAAC,KAAOA,EAAK,EAAE,MAAQ6hB,EAAI,IAAI,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,OAAOH,EAAI,OAAO7hB,CAAI,CAAC,EAAE,KAAO,SAASgiB,EAAO,CAAC,OAAOH,EAAI,KAAK7hB,EAAMgiB,CAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAz0B,UACTC,EAAkB,CAAC,E,sBC4BvB,IAAI14B,EAAU,EC7BwW,QD+BvW,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,aAAc,CACb,EAAG,EACJ,CACD,CACD,EAEA,SAAU,CACT,gBAAiB,CAChB,UAAUvS,KAAO,KAAK,IACrB,GAAKA,EAAI,IAAM,UACd,MAAO,GAET,MAAO,EACR,EAEA,OAAQ,CACP,MAAMO,EAAM,CAAC,EAEb,GAAK,MAAM,QAAQ,KAAK,GAAG,EAC1B,UAAUyoB,KAAQ,KAAK,IACjBA,GAAQA,EAAK,IAAM,WACvBzoB,EAAI,KAAKyoB,CAAI,EAEhB,OAAOzoB,CACR,EAEA,KAAM,CACL,OAAO,KAAK,UAGL,KAAK,MAAM,IAAIwK,IACrBA,EAAE,GAAKA,EAAE,IAAM,GAAG,KAAK,IAAI,CAAC,IAAI,KAAK,OAAO,CAAC,IAAIwH,GAAS,GACnDxH,EACP,EALO,CAAC,CAMV,CACD,EAEA,QAAS,CACR,SAASie,EAAM,CACd,GAAK,CAAEA,EAAK,EACX,OAED,MAAM4jB,EAAO,MAAM,KAAK,KAAK,GAAG,EAChCA,EAAK,KAAK,CAAC,EAAG5jB,CAAI,CAAC,EACnB,KAAK,OAAI,aAAU4jB,CAAI,CAAC,CACzB,EAEA,OAAO5sC,EAAK,CACX,MAAM4sC,EAAO,MAAM,KAAK,KAAK,GAAG,EAC/B/9B,EAAM+9B,EAAK,QAAQ5sC,CAAG,EAElB6O,IAAQ,KACZ+9B,EAAK,OAAO/9B,EAAK,CAAC,EACb+9B,EAAK,OACT,KAAK,OAAI,aAAUA,CAAI,CAAC,EAExB,KAAK,MAAM,EAEd,EAEA,KAAK5sC,EAAK6sC,EAAS,CAClB7sC,EAAI,EAAI6sC,EACR,KAAK,OAAI,aAAU,KAAK,GAAG,CAAC,CAC7B,CACD,CACD,E,eE/FI3B,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,sCAAsC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,iBAAiB,EAAE,CAAEF,EAAI,MAAOE,EAAG,KAAK,CAAC,YAAY,mEAAmE,EAAE,CAAEF,EAAI,MAAM,KAAME,EAAG,SAAS,CAAC,YAAY,2CAA2C,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,oCAAoC,MAAM,CAAC,IAAMF,EAAI,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,qCAAsC,mBAAoB,CACjkB,KAAMA,EAAI,MAAM,IACjB,CAAC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAGA,EAAI,OAAQE,EAAG,KAAK,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,kCAAmC,mBAAmB,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEE,EAAG,KAAK,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,WAAW,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAMA,EAAI,OAA6gDA,EAAI,GAAG,EAA5gDE,EAAG,MAAM,CAAC,YAAY,yCAAyC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,oDAAoD,EAAE,CAACA,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,aAAc,WAAW,cAAc,CAAC,EAAE,IAAI,eAAe,YAAY,sBAAsB,MAAM,CAAC,GAAK,eAAe,KAAO,UAAU,EAAE,SAAS,CAAC,QAAU,MAAM,QAAQA,EAAI,YAAY,EAAEA,EAAI,GAAGA,EAAI,aAAa,IAAI,EAAE,GAAIA,EAAI,YAAa,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIG,EAAIN,EAAI,aAAaO,EAAKJ,EAAO,OAAOK,EAAI,EAAAD,EAAK,QAAuB,GAAG,MAAM,QAAQD,CAAG,EAAE,CAAC,IAAIG,EAAI,KAAKC,EAAIV,EAAI,GAAGM,EAAIG,CAAG,EAAKF,EAAK,QAASG,EAAI,IAAIV,EAAI,aAAaM,EAAI,OAAO,CAACG,CAAG,CAAC,GAAQC,EAAI,KAAKV,EAAI,aAAaM,EAAI,MAAM,EAAEI,CAAG,EAAE,OAAOJ,EAAI,MAAMI,EAAI,CAAC,CAAC,EAAG,MAAMV,EAAI,aAAaQ,CAAI,CAAC,CAAC,CAAC,EAAER,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,cAAc,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,mCAAoC,gCAAgC,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,sGAAsG,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,oCAAqC,+NAA+N,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAEE,EAAG,KAAKF,EAAI,GAAIA,EAAI,QAAS,SAASuC,EAAO,CAAC,OAAOrC,EAAG,KAAK,CAAC,IAAIqC,EAAO,IAAI,YAAY,WAAW,EAAE,CAACrC,EAAG,MAAM,CAAC,YAAY,sDAAsD,EAAE,CAAE,CAAEF,EAAI,QAAUuC,EAAO,OAAQrC,EAAG,MAAM,CAAC,YAAY,qBAAqB,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,iBAAiB,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGuC,EAAO,KAAMrC,EAAG,SAAS,CAAC,YAAY,2CAA2C,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,oCAAoC,MAAM,CAAC,IAAMqC,EAAO,IAAI,CAAC,CAAC,CAAC,CAAC,EAAEvC,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGuC,EAAO,OAASA,EAAO,UAAWrC,EAAG,IAAI,CAAC,YAAY,4CAA4C,MAAM,CAAC,KAAO,GAAG,EAAE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAAA,EAAO,eAAe,EAASH,EAAI,SAASuC,EAAO,SAAS,CAAC,CAAC,CAAC,EAAE,CAACvC,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGuC,EAAO,KAAK,EAAE;AAAA,KAAY,CAAC,CAAC,EAAGA,EAAO,MAAOrC,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGuC,EAAO,KAAK,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEvC,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGuC,EAAO,QAASrC,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAGA,EAAI,GAAGuC,EAAO,OAAO,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEvC,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGuC,EAAO,OAAQrC,EAAG,MAAM,CAAC,YAAY,YAAY,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,uCAAuC,MAAM,CAAC,OAAS,yBAAyB,QAAU,YAAY,EAAE,YAAYF,EAAI,GAAG,CAAC,CAAC,IAAI,OAAO,GAAG,UAAU,CAAC,MAAO,CAAEuC,EAAO,OAAO,SAAUrC,EAAG,IAAI,CAAC,YAAY,yFAAyF,MAAM,CAAC,KAAOqC,EAAO,OAAO,SAAS,OAAS,SAAS,IAAM,sBAAsB,oBAAoB,MAAM,CAAC,EAAE,CAAEA,EAAO,OAAO,WAAYrC,EAAG,SAAS,CAAC,YAAY,2CAA2C,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,6DAA6D,MAAM,CAAC,IAAMqC,EAAO,OAAO,UAAU,CAAC,CAAC,CAAC,CAAC,EAAEvC,EAAI,GAAG,EAAEA,EAAI,GAAG;AAAA,UAAqBA,EAAI,GAAGuC,EAAO,OAAO,KAAK,EAAE;AAAA,QAAkB,CAAC,CAAC,EAAErC,EAAG,SAAS,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,UAAqBA,EAAI,GAAGuC,EAAO,OAAO,OAASA,EAAO,OAAO,IAAI,EAAE;AAAA,QAAkB,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,EAAI,CAAC,EAAE,KAAK,EAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEvC,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGuC,EAAO,KAAMrC,EAAG,MAAM,CAAC,YAAY,gCAAgC,EAAE,CAACF,EAAI,GAAG;AAAA,OAAe,EAAEE,EAAG,IAAI,CAAC,YAAY,yCAAyC,MAAM,CAAC,KAAOqC,EAAO,KAAK,OAAS,SAAS,IAAM,sBAAsB,oBAAoB,MAAM,CAAC,EAAE,CAACvC,EAAI,GAAGA,EAAI,GAAGuC,EAAO,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEvC,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGuC,EAAO,KAAMrC,EAAG,OAAO,CAAC,YAAY,gDAAgD,MAAM,CAAC,SAAWqC,EAAO,IAAI,CAAC,EAAE,CAACvC,EAAI,GAAG,IAAIA,EAAI,GAAGA,EAAI,WAAWuC,EAAO,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,EAAEvC,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,WAAW,CAAC,MAAM,CAAC,OAASqC,EAAO,OAAO,CAAC,CAAC,EAAEvC,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIuC,EAAO,SAAU,SAAShuB,EAAM,CAAC,OAAO2rB,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,SAAS,CAACF,EAAI,GAAGA,EAAI,GAAGzrB,EAAM,GAAG,CAAC,CAAC,CAAC,EAAEyrB,EAAI,GAAG,GAAG,EAAEE,EAAG,WAAW,CAAC,MAAM,CAAC,OAAS3rB,EAAM,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEyrB,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,yBAAyB,EAAE,CAAEF,EAAI,MAAOE,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,gDAAgD,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAGA,EAAI,QAASE,EAAG,KAAK,CAAC,YAAY,gCAAgC,CAAC,EAAKF,EAAI,KAA4HE,EAAG,SAAS,CAAC,YAAY,YAAY,GAAG,CAAC,MAAQF,EAAI,SAAS,CAAC,EAAE,CAACE,EAAG,MAAM,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,WAAW,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAtTE,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,oCAAoC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,CAAmM,CAAC,CAAC,CAAC,CAAC,EAFlxK,UAGTI,EAAkB,CAAC,E,WCoJvB,MAAMoC,EAAc,iDACnBC,EAAgB,kBAChBC,EAAe,2BACfC,EAAc,kBAGf,SAASC,EAAQ/7B,EAAMg8B,EAAM,CAC5B,OAAAh8B,EAAOA,EAAK,QAAQ47B,EAAe,CAACrgC,EAAGoE,IAC/B,MAAMA,CAAI,GACjB,EAEMK,EAAK,QAAQ87B,EAAa,CAACvgC,EAAG0gC,EAAOC,IACpC,GAAGD,CAAK,KAAKC,CAAM,qCAAqCF,CAAI,WAAWE,CAAM,GACpF,CACF,CARS,EAAAH,EAAA,WC7JyW,QDwKnW,CACd,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,MAAO,GACP,MAAO,KAAK,KAAK,MACjB,OAAQ,KAAK,KAAK,OAClB,aAAc,GACd,QAAS,GACT,KAAM,GACN,QAAS,CAAC,CACX,CACD,EAEA,SAAU,CACT,SAAU,CACT,OAAO,MAAQ,KAEf,MAAMltC,EAAM,CAAC,EACZk2B,EAAS,KAAK,OAAS,KAAK,KAAK,OAAO,EAAE,QAAQ,QAAQ,EAAI,KAC9DoX,EAAa,KAAK,EAAE,8BAA+B,sBAAsB,EAE1E,UAAUT,KAAU,KAAK,QAAS,CACjC,MAAMnmC,EAAQmmC,EAAO,OAAO,QAC5B,IAAIt7B,EAAQ+7B,EACXC,EAAY,KACZ7pC,EAAO,KACP8pC,EAAU,KACVjT,EAAS,KACTkT,EAAW,CAAC,EACZ/4B,EAAc,CAAC,EAEhB,GAAK,eAAe,KAAKhO,CAAK,GAAK,CAAE,KAAK,WACzC,SAED,MAAM4P,EAAQ5P,EAAM,MAAM,OAAO,EAChCihB,EAAQrR,EAAM,MAAM,EACpBrK,GAAQ0b,EAAQmlB,EAAY,KAAKnlB,CAAK,EAAI,KAErC+lB,GAAO,IAAI,KAAKb,EAAO,OAAO,OAAO,IAAI,EAC9CjuB,GAASiuB,EAAO,MAAQ,OAAO,aAAa,aAAa,OACzDc,GAAcr3B,EAAM,QAAUrK,GAE/B,GAAK,CAAE,KAAK,YAAc,CAAE0hC,GAC3B,SAED,IAAIC,GAAW,KAOf,GALK3hC,KACJsF,EAAQtF,GAAM,CAAC,EACfuhC,EAAUvhC,GAAM,CAAC,GAGb0hC,GACJ,UAAUp3B,KAAQD,EAAO,CACxB,MAAMu3B,EAAUt3B,EAAK,KAAK,EAC1B,GAAK,CAAEs3B,EAAQ,OAAS,CAClB,CAAED,IAAYl5B,EAAY,QAC9BA,EAAY,KAAK6B,CAAI,EACtB,QACD,CAEA,MAAM5J,GAAIqgC,EAAa,KAAKa,CAAO,EACnC,GAAK,CAAElhC,GACCihC,GAGNA,GAAS,KAAKC,CAAO,EAFrBn5B,EAAY,KAAK6B,CAAI,MAIhB,CACN,MAAM2L,GAAUurB,EAAS9gC,GAAE,CAAC,CAAC,EAAI8gC,EAAS9gC,GAAE,CAAC,CAAC,GAAK,CAAC,EACpDihC,GAAW,CAACjhC,GAAE,CAAC,CAAC,EAChBuV,GAAQ,KAAK0rB,EAAQ,CACtB,CACD,MAGAt3B,EAAM,QAAQqR,CAAK,EACnBjT,EAAc4B,EAGf,IAAIvH,GAAU2F,EAAY,KAAK;AAAA,CAAI,EAAE,KAAK,EAE1C,MAAMo5B,EAAW,CAAC,EAElB,SAAU,CAAC9sC,EAAKvB,CAAG,IAAK,OAAO,QAAQguC,CAAQ,EAAG,CACjD,GAAK,CAAEhuC,GAAK,OACX,SAED,MAAMsuC,GAAMtuC,EAAI,IAAI+K,IAAK,KAAKA,GAAE,KAAK,GAAG,CAAC,EAAE,EAAE,KAAK;AAAA,CAAI,EAAE,KAAK,EAE7DsjC,EAAS,KAAK,CACb,IAAA9sC,EACA,MAAOksC,EAAQa,GAAK,KAAK,OAAS,UAAY,cAAc,CAC7D,CAAC,CACF,CAEA,GAAK,KAAK,SACTxT,EAASsS,EAAO,OAEXt7B,GAAQ,CACZ,MAAMy8B,EAASz8B,EAAM,YAAY,EAEjC,GAAK2kB,GAAQ,QACZ,UAAU4V,KAAS,OAAO,OAAO5V,EAAO,MAAM,EAC7C,GAAK4V,EAAM,YAAcA,EAAM,WAAW,YAAY,IAAMkC,GAC1DlC,EAAM,MAAQA,EAAM,KAAK,YAAY,IAAMkC,GAC3ClC,EAAM,IAAMA,EAAM,GAAG,YAAY,IAAMkC,EACvC,CACDtqC,EAAOooC,EAAM,KAEbyB,EAAY,CAAC,qBAAqBzB,EAAM,EAAE,EAAE,EACvCA,EAAM,YACVyB,EAAU,KAAK,qBAAqBzB,EAAM,WAAW,YAAY,CAAC,EAAE,EAChEA,EAAM,MACVyB,EAAU,KAAK,qBAAqBzB,EAAM,KAAK,YAAY,CAAC,EAAE,EAE/D,KACD,EAIKpoC,IACNA,EAAO,+CACT,CAGI,KAAK,QACTA,EAAO,KACP6N,EAAQ,MAGTvR,EAAI,KAAK,CACR,KAAA0D,EACA,MAAA6N,EACA,UAAAg8B,EACA,QAAAC,EACA,OAAAjT,EACA,QAAAxrB,GACA,SAAA++B,EACA,OAAAlvB,GACA,KAAMiuB,EAAO,KAAOA,EAAO,IAAI,MAAM,EAAE,CAAC,EACxC,KAAMA,EAAO,SACb,IAAKA,EAAO,IACZ,KAAAa,EACD,CAAC,CACF,CAEA,OAAO1tC,CACR,CACD,EAEA,SAAU,CACT,KAAK,WAAa,IAAI,IACtB,KAAK,UAAU,CAChB,EAEA,QAAS,CACR,SAASiuC,EAAK,CACR,MAAM,QAAQA,CAAG,GACrB,KAAK,MAAM,WAAY,GAAGA,CAAG,CAC/B,EAEA,WAAW/sC,EAAO,CACjB,GAAK,CAAEA,EACN,MAAO,GAER,MAAMwsC,EAAOxsC,aAAiB,KAAOA,EAAQ,IAAI,KAAKA,CAAK,EAC1DgtC,EAAQ,IAAI,KAGb,OAFYR,EAAK,aAAa,IAAMQ,EAAM,aAAa,EAG/C,KAAK,MAAMR,CAAI,EAEhB,KAAK,MAAMA,CAAI,CACvB,EAEA,MAAM,WAAY,CACjB,MAAMS,EAAc,KAAK,QAAQ,KAAK,QAAQ,OAAS,CAAC,EACvDC,EAAQD,MAAe,OAAI,qBAAsBA,CAAW,EAE7D,KAAK,QAAU,GAEf,MAAM75B,EAAM,IAAI,IAAI,6CAA6C,KAAK,OAAS,UAAY,cAAc,UAAU,EAC9G85B,GACJ95B,EAAI,aAAa,OAAO,QAAS85B,CAAK,EAElC,KAAK,OACT95B,EAAI,aAAa,OAAO,OAAQ,OAAO,KAAK,MAAM,EAAE,EAAE,EAEvD,GAAI,CACH,MAAM+5B,EAAO,MAAM,MAAM/5B,CAAG,EAC3B1U,EAAOyuC,EAAK,GAAK,MAAMA,EAAK,KAAK,EAAI,KAEtC,GAAK,CAAEzuC,GAAQ,CAAE,MAAM,QAAQA,CAAI,EAAI,CACtC,KAAK,KAAO,GACZ,MACD,CAEA,IAAImkB,EAAQ,GAEZ,UAAU8oB,KAAUjtC,EACd,KAAK,WAAW,IAAIitC,EAAO,GAAG,IAGnC,KAAK,WAAW,IAAIA,EAAO,GAAG,EAC9B,KAAK,QAAQ,KAAKA,CAAM,EACxB9oB,EAAQ,IAGFA,IACN,KAAK,KAAO,IAEb,KAAK,QAAU,EAEhB,MAAa,CACZ,KAAK,MAAQ,EACd,CACD,CACD,CACD,E,eE9XI4mB,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,qDAAqD,EAAE,CAAEF,EAAI,QAAUA,EAAI,SAAWA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,4DAA4D,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,YAAY,CAAC,EAAEF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,+EAA+E,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,GAAIA,EAAI,KAAK,YAAeA,EAAI,WAAaA,EAAI,KAAK,aAAe,KAAWA,EAAI,QAAQ,YAAc,GAAOE,EAAG,MAAM,CAAC,YAAY,4DAA4D,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,YAAY,CAAC,EAAEF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,kKAAkK,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,wDAAwD,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,UAAU,CAAC,EAAE;AAAA;AAAA,IAAY,EAAEE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,SAAS,YAAY,sBAAsB,MAAM,CAAC,GAAK,SAAS,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,YAAY,EAAE,GAAG,CAAC,OAASA,EAAI,SAAS,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,QAAQ,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,cAAc,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,aAAa,YAAY,sBAAsB,MAAM,CAAC,GAAK,aAAa,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,UAAU,EAAE,GAAG,CAAC,OAASA,EAAI,SAAS,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,YAAY,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,kCAAmC,iBAAiB,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,UAAWE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,iBAAiB,YAAY,sBAAsB,MAAM,CAAC,GAAK,iBAAiB,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,cAAc,EAAE,GAAG,CAAC,OAASA,EAAI,SAAS,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,gBAAgB,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,oCAAqC,gBAAgB,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,YAAY,YAAY,sBAAsB,MAAM,CAAC,GAAK,YAAY,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,SAAS,EAAE,GAAG,CAAC,OAASA,EAAI,SAAS,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,WAAW,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,+BAAgC,WAAW,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,aAAa,YAAY,sBAAsB,MAAM,CAAC,GAAK,aAAa,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,UAAU,EAAE,GAAG,CAAC,OAASA,EAAI,SAAS,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,YAAY,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,qCAAsC,YAAY,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,YAAY,YAAY,sBAAsB,MAAM,CAAC,GAAK,YAAY,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,SAAS,EAAE,GAAG,CAAC,OAASA,EAAI,SAAS,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,WAAW,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,+BAAgC,WAAW,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,iBAAiB,YAAY,sBAAsB,MAAM,CAAC,GAAK,iBAAiB,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,cAAc,EAAE,GAAG,CAAC,OAASA,EAAI,SAAS,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,gBAAgB,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,oCAAqC,gBAAgB,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,WAAW,YAAY,sBAAsB,MAAM,CAAC,GAAK,WAAW,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,QAAQ,EAAE,GAAG,CAAC,OAASA,EAAI,SAAS,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,UAAU,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,UAAU,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,WAAW,YAAY,sBAAsB,MAAM,CAAC,GAAK,WAAW,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,QAAQ,EAAE,GAAG,CAAC,OAASA,EAAI,SAAS,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,UAAU,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,UAAU,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,4BAA4B,MAAM,CAAC,YAAY,KAAK,UAAUF,EAAI,WAAW,EAAE,YAAY,KAAK,UAAUA,EAAI,WAAW,EAAE,eAAe,KAAK,UAAUA,EAAI,cAAc,EAAE,cAAc,WAAW,CAAC,EAAE,CAAIA,EAAI,QAAQ,OAA8LA,EAAI,GAAG,EAA7LE,EAAG,MAAM,CAAC,YAAY,yDAAyD,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,oBAAoB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,QAAS,SAAS1wB,EAAQtL,EAAI,CAAC,OAAOk8B,EAAG,MAAM,CAAC,IAAIl8B,EAAI,YAAY,yDAAyD,EAAE,CAACg8B,EAAI,GAAI1wB,EAAS,SAAS1H,EAAI,CAAC,MAAO,CAAEA,EAAI,OAAS,QAASs4B,EAAG,MAAM,CAAC,IAAIt4B,EAAI,GAAG,YAAY,gBAAgB,CAAC,EAAGA,EAAI,OAAS,cAAes4B,EAAG,MAAM,CAAC,IAAIt4B,EAAI,GAAG,YAAY,WAAW,CAAC,EAAEs4B,EAAG,iBAAiB,CAAC,IAAIt4B,EAAI,GAAG,MAAM,CAAC,IAAMo4B,EAAI,aAAap4B,EAAI,CAAC,EAAE,gBAAgBo4B,EAAI,MAAM,UAAYA,EAAI,KAAK,UAAU,QAAU,OAAO,IAAM,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,0CAA0C,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,gCAAgC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAKA,EAAI,YAAshFA,EAAI,GAAG,EAAhhFE,EAAG,MAAM,CAAC,WAAW,CAAC,CAAC,KAAK,eAAe,QAAQ,iBAAiB,MAAOF,EAAI,SAAU,WAAW,UAAU,CAAC,EAAE,YAAY,aAAa,EAAE,CAACE,EAAG,SAAS,CAAC,YAAY,sCAAsC,GAAG,CAAC,MAAQF,EAAI,SAAS,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAG,UAAU,CAAC,MAAM,CAAC,MAAQ,mBAAmB,IAAM,aAAa,KAAOF,EAAI,YAAc,KAAO,IAAI,CAAC,EAAE,CAACE,EAAG,YAAY,CAAC,MAAM,CAAC,QAAU,WAAW,CAAC,EAAE,CAAEF,EAAI,YAAaE,EAAG,MAAM,CAAC,YAAY,SAAS,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,QAAQ,YAAY,uFAAuF,MAAM,CAAC,YAAcF,EAAI,EAAE,0BAA2B,QAAQ,CAAC,EAAE,GAAG,CAAC,QAAU,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,QAAQ,GAAGA,EAAO,IAAI,OAAO,EAAW,KAAcH,EAAI,YAAY,MAAM,KAAM,SAAS,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,uBAAuB,GAAG,CAAC,MAAQF,EAAI,WAAW,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,WAAuBA,EAAI,GAAGA,EAAI,EAAE,cAAe,KAAK,CAAC,EAAE;AAAA,SAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEE,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,0GAA0G,GAAG,CAAC,MAAQF,EAAI,YAAY,CAAC,EAAE,CAACE,EAAG,MAAM,CAAC,YAAY,oDAAoD,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,0BAA0B,EAAE,CAACF,EAAI,GAAG;AAAA,WAAuBA,EAAI,GAAGA,EAAI,EAAE,qBAAsB,YAAY,CAAC,EAAE;AAAA,SAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,QAAS,SAASgE,EAAOhgC,EAAI,CAAC,MAAO,CAAEggC,EAAO,QAAS9D,EAAG,MAAM,CAAC,IAAIl8B,EAAI,YAAY,qBAAqB,CAAC,EAAEk8B,EAAG,SAAS,CAAC,IAAIl8B,EAAI,YAAY,0GAA0G,MAAM,CAAC,SAAWggC,EAAO,QAAQ,EAAE,GAAG,CAAC,MAAQ,SAAS7D,EAAO,CAAC,OAAOH,EAAI,IAAIgE,EAAO,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC9D,EAAG,MAAM,CAAC,YAAY,oDAAoD,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,0BAA0B,EAAE,CAACF,EAAI,GAAG;AAAA,YAAyBA,EAAI,GAAGgE,EAAO,WAAahE,EAAI,EAAEgE,EAAO,WAAYA,EAAO,MAAOA,CAAM,EAAIA,EAAO,KAAK,EAAE;AAAA,UAAsB,CAAC,CAAC,EAAEhE,EAAI,GAAG,GAAG,EAAGgE,EAAO,WAAY9D,EAAG,iBAAiB,CAAC,MAAM,CAAC,IAAMF,EAAI,aAAagE,CAAM,EAAE,gBAAgBhE,EAAI,MAAM,UAAYA,EAAI,KAAK,SAAS,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAG,CAAEA,EAAI,aAAeA,EAAI,eAAe,OAAQE,EAAG,SAAS,CAAC,YAAY,gEAAgE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,YAAc,EAAI,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,qBAAsB,YAAY,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,uCAAuC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,YAAaE,EAAG,SAAS,CAAC,YAAY,gEAAgE,GAAG,CAAC,MAAQF,EAAI,OAAO,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,qBAAsB,YAAY,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,uCAAuC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,YAAaE,EAAG,SAAS,CAAC,YAAY,gEAAgE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,YAAc,EAAK,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAG,CAAEA,EAAI,eAAe,QAAUA,EAAI,YAAaE,EAAG,SAAS,CAAC,YAAY,gEAAgE,GAAG,CAAC,MAAQF,EAAI,QAAQ,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,cAAc,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,kCAAmC,iDAAiD,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,IAAI,OAAO,YAAY,kBAAkB,EAAE,CAAIF,EAAI,IAAI,OAAoyBA,EAAI,GAAG,EAAnyBE,EAAG,MAAM,CAAC,YAAY,wEAAwE,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,wCAAwC,CAAC,EAAE;AAAA;AAAA,IAAY,EAAEE,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQF,EAAI,OAAO,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,iCAAkC,gBAAgB,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,kEAAkE,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,sCAAuC,qEAAqE,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,IAAK,SAASp4B,EAAI,CAAC,OAAOs4B,EAAG,UAAU,CAAC,IAAIt4B,EAAI,EAAE,EAAE,CAACs4B,EAAG,gBAAgB,CAAC,MAAM,CAAC,OAASt4B,EAAI,KAAOo4B,EAAI,KAAK,OAASA,EAAI,KAAK,OAAO,UAAYA,EAAI,UAAU,QAAUA,EAAI,KAAK,QAAQ,iBAAmBA,EAAI,KAAK,wBAAwB,OAASA,EAAI,QAAQ,UAAYA,EAAI,KAAK,UAAU,eAAiBA,EAAI,KAAK,cAAc,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,OAAOH,EAAI,OAAOp4B,CAAG,CAAC,EAAE,KAAO,SAASu4B,EAAO,CAAC,OAAOH,EAAI,KAAKp4B,EAAKu4B,CAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAx7Y,UACTC,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,wCAAwC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,E,iCC2Y1N,IAAIx4B,EAAU,EC5YuW,QD+YtW,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,aAAc,GACd,eAAgB,GAEhB,WAAY,GACZ,UAAW,GACX,UAAW,GACX,eAAgB,GAChB,SAAU,GAEV,SAAU,GACV,WAAY,GACZ,SAAU,GAEV,YAAa,GACb,SAAU,GACV,YAAa,EACd,CACD,EAEA,SAAU,CACT,gBAAiB,CAChB,UAAUvS,KAAO,KAAK,IACrB,GAAKA,EAAI,IAAM,UACd,MAAO,GAET,MAAO,EACR,EAEA,SAAU,CACT,UAAUA,KAAO,KAAK,IACrB,GAAKA,EAAI,IAAM,OACd,MAAO,GAET,MAAO,EACR,EAEA,aAAc,CACb,OAAO,KAAK,SAAW,CACtB,YAAa,aACb,MAAO,aACP,GAAI,SACJ,MAAO,SACR,EAAI,IACL,EAEA,aAAc,CACb,OAAO,KAAK,SAAW,CACtB,YAAa,eACb,MAAO,eACP,GAAI,QACL,EAAI,IACL,EAEA,gBAAiB,CAChB,OAAO,KAAK,QAAU,CACrB,GAAI,uCACJ,KAAM,oCACP,EAAI,IACL,EAEA,WAAY,CACX,OAAO,KAAK,KAAK,WAAa,KAAK,KAAK,MACzC,EAEA,aAAc,CACb,OAAO,KAAK,eAAiB,KAAK,cAAc,MACjD,EAEA,UAAW,CACV,OAAO,KAAK,KAAK,SAAW,KAAK,KAAK,QAAQ,SAAS,MAAM,CAC9D,EAEA,UAAW,CACV,OAAO,KAAK,KAAK,SAAW,KAAK,KAAK,QAAQ,SAAS,MAAM,CAC9D,EAEA,UAAW,CACV,OAAO,KAAK,KAAK,SAAW,KAAK,KAAK,QAAQ,SAAS,WAAW,CACnE,EAEA,SAAU,CACT,OAAO,KAAK,KAAK,SAAW,KAAK,KAAK,QAAQ,SAAS,SAAS,CACjE,EAEA,SAAU,CACT,MAAMO,EAAM,CAAC,EACZuuC,EAAW,KAAK,KAAK,SAAW,CAAC,EAElCvuC,EAAI,KAAK,CACR,SAAU,KAAK,eAEf,MAAO,oBACP,WAAY,sBACZ,MAAO,CAAC,EAAG,SAAS,CACrB,CAAC,EAEM,KAAK,KAAK,SAChBA,EAAI,KAAK,CACR,MAAO,WACP,WAAY,mBACZ,MAAO,CACN,EAAG,CAAC,KAAM,UAAU,CACrB,CACD,CAAC,EAEDA,EAAI,KAAK,CACR,MAAO,gBACP,WAAY,sBACZ,MAAO,CACN,EAAG,CAAC,KAAM,aAAa,CACxB,CACD,CAAC,EAEDA,EAAI,KAAK,CACR,MAAO,oBACP,WAAY,gBACZ,MAAO,CACN,EAAG,CAAC,KAAM,OAAO,CAClB,CACD,CAAC,GAGFA,EAAI,KAAK,CAAC,QAAS,EAAI,CAAC,EAExB,UAAUgB,KAAO,KAAK,KAAK,QAAS,CACnC,MAAMkR,EAAM,KAAK,KAAK,QAAQlR,CAAG,EACjC,GAAKkR,GAAOA,EAAI,QAAU,CACzB,GAAKA,EAAI,iBAAmB,CAC3B,IAAIs8B,EAAO,GACX,UAAUhvC,KAAO0S,EAAI,iBACpB,GAAK,CAAEq8B,EAAS,SAAS/uC,CAAG,EAAI,CAC/BgvC,EAAO,GACP,KACD,CAED,GAAK,CAAEA,EACN,QACF,CAEA,UAAUF,KAAUp8B,EAAI,QAClB,OAAOA,EAAI,OAAU,UAAY,CAAEo8B,EAAO,OAG/CtuC,EAAI,KAAK,OAAO,OAAO,CACtB,OAAQgB,EACR,MAAOkR,EAAI,MACX,WAAYA,EAAI,YAAc,gBAAgBlR,CAAG,GACjD,MAAO,CACN,EAAG,OAAO,OAAO,CAChB,OAAQA,CACT,EAAGstC,CAAM,CACV,CACD,EAAGA,CAAM,CAAC,CAEZ,CACD,CAEA,OAAOtuC,CACR,EAEA,SAAU,CACT,MAAMA,EAAM,CAAC,EACb,IAAIuP,EAAU,CAAC,EAEf,GAAK,KAAK,IACT,UAAU9P,KAAO,KAAK,IAAK,CAC1B,GAAK,CAAEA,EAAI,EACV,SAED,MAAM8Y,EAAO9Y,EAAI,EAAE,KACd8Y,IAAS,YACbvY,EAAI,KAAKuP,CAAO,EAChBA,EAAU,CAAC,GAEAgJ,IAAS,SAAWA,IAAS,cACxChJ,EAAQ,KAAK9P,EAAI,CAAC,EAEP,KAAK,cAAcA,EAAI,CAAC,GACnC8P,EAAQ,KAAK9P,CAAG,CAClB,CAED,OAAK8P,EAAQ,QACZvP,EAAI,KAAKuP,CAAO,EAEVvP,CACR,EAEA,gBAAiB,CAChB,OAAO,KAAK,IAAI,OAAOwK,GAAKA,EAAE,IAAM,MAAM,CAC3C,EAEA,KAAM,CACL,OAAO,KAAK,UAGL,KAAK,MAAM,IAAIA,IACrBA,EAAE,GAAKA,EAAE,IAAM,GAAG,KAAK,IAAI,CAAC,IAAI,KAAK,OAAO,CAAC,IAAIwH,GAAS,GACnDxH,EACP,EALO,CAAC,CAMV,CACD,EAEA,SAAU,CACT,KAAK,UAAY,KAAS,OAAO,KAAK,MAAM,KAAM,CACjD,UAAW,UACX,OAAQ,SAER,SAAU9K,GAAS,CAClB,GAAKA,EAAM,WAAaA,EAAM,SAC7B,OAED,MAAM4sC,EAAU,MAAM,KAAK,KAAK,GAAG,EACnCA,EAAQ,OAAO5sC,EAAM,SAAU,EAAG,GAAG4sC,EAAQ,OAAO5sC,EAAM,SAAU,CAAC,CAAC,EAEtE,KAAK,IAAI4sC,CAAO,CACjB,CACD,CAAC,CACF,EAEA,eAAgB,CACV,KAAK,WACT,KAAK,UAAU,QAAQ,EAExB,KAAK,UAAY,IAClB,EAEA,QAAS,CACR,SAAU,CACT,KAAK,YAAc,GACnB,KAAK,MAAM,CACZ,EAEA,UAAW,CACV,KAAK,SAAW,GAChB,KAAK,YAAc,EACpB,EAEA,WAAY,CACX,KAAK,SAAW,CAAE,KAAK,SACvB,KAAK,YAAc,EACpB,EAEA,cAAe,CACd,KAAK,SAAW,GAChB,KAAK,YAAc,GACnB,sBAAsB,IAAM,CAC3B,KAAK,MAAM,MAAM,MAAM,CACxB,CAAC,CACF,EAEA,aAAc,CACb,IAAIprC,EAAQ,KAAK,MAAM,MAAM,MAG7B,GAFA,KAAK,SAAS,EAETA,EAAQ,CACZ,GAAI,CACHA,EAAQ,KAAK,MAAMA,CAAK,CACzB,OAAQpB,EAAK,CACZ,MAAMA,CAAG,EACT,MACD,CAEOoB,EAAM,aACZA,EAAM,WAAa,CAAC,GAEdA,EAAM,WAAW,OACvBA,EAAM,WAAW,KAAO,QAEpBA,EAAM,WAAW,OAAS,QAAU,CAAEA,EAAM,WAAW,OAC3DA,EAAM,WAAW,KAAO,KAEpBA,EAAM,WAAW,OAAS,QAAU,CAAEA,EAAM,WAAW,OAC3DA,EAAM,WAAW,KAAO,YAElBA,EAAM,UACZA,EAAM,QAAU,CAAC,GAEXA,EAAM,SACZA,EAAM,OAAS,QAEhB,KAAK,IAAI,CAAC,EAAGA,CAAK,CAAC,CACpB,CACD,EAEA,UAAW,CACV,KAAK,OAAI,aAAU,KAAK,aAAa,CAAC,CACvC,EAEA,SAAU,CACT,MAAMmrC,EAAO,MAAM,KAAK,KAAK,GAAG,EAC7BA,EAAK,OAAS,IAGjBA,EAAK,KAAK,CACT,EAAG,MACJ,CAAC,EAED,KAAK,OAAI,aAAUA,CAAI,CAAC,EACzB,EAEA,IAAI5sC,EAAK,CACR,MAAM4sC,EAAO,MAAM,KAAK,KAAK,GAAG,EAGhC,IAAI5pC,EAAI4pC,EAAK,OACb,KAAM5pC,KACD4pC,EAAK5pC,CAAC,GAAG,IAAM,QAClB4pC,EAAK,OAAO5pC,EAAG,CAAC,EAGlB4pC,EAAK,KAAK5sC,CAAG,EACb,KAAK,OAAI,aAAU4sC,CAAI,CAAC,EACxB,KAAK,SAAW,EACjB,EAEA,OAAO5sC,EAAK,CACX,MAAM4sC,EAAO,MAAM,KAAK,KAAK,GAAG,EAC/B/9B,EAAM+9B,EAAK,QAAQ5sC,CAAG,EAElB6O,IAAQ,KACZ+9B,EAAK,OAAO/9B,EAAK,CAAC,EACb+9B,EAAK,OACT,KAAK,IAAIA,CAAI,EAEb,KAAK,MAAM,EAEd,EAEA,KAAK5sC,EAAK6sC,EAAS,CAClB7sC,EAAI,EAAI6sC,EACR,KAAK,OAAI,aAAU,KAAK,GAAG,CAAC,CAC7B,EAEA,WAAY,CACX,KAAK,SAAW,KAAK,MAAM,SAAS,QACpC,KAAK,aAAe,KAAK,MAAM,OAAO,QACtC,KAAK,SAAW,GAChB,KAAK,eAAiB,KAAK,WAAa,KAAK,MAAM,eAAe,QAClE,KAAK,WAAa,KAAK,SAAW,KAAK,MAAM,WAAW,QAExD,KAAK,WAAa,KAAK,UAAY,KAAK,MAAM,WAAW,QACzD,KAAK,UAAY,KAAK,UAAY,KAAK,MAAM,UAAU,QACvD,KAAK,UAAY,KAAK,UAAY,KAAK,MAAM,UAAU,QACvD,KAAK,eAAiB,KAAK,UAAY,KAAK,MAAM,eAAe,QACjE,KAAK,SAAW,KAAK,UAAY,KAAK,MAAM,SAAS,OACtD,EAEA,cAAc3zB,EAAQ,CACrB,GAAK,CAAEA,EAAO,WACb,MAAO,GAER,MAAMgzB,EAAOhzB,EAAO,QACpB,MAAK,CAAEgzB,GAAQ,KAAK,SACZ,GAEH,EAAAA,EAAK,SAGLA,EAAK,KAAO,MAAQA,EAAK,MAAQ,KAAK,cAGtCA,EAAK,WAAa,MAAQA,EAAK,YAAc,KAAK,gBAGlDA,EAAK,OAAS,MAAQA,EAAK,QAAU,KAAK,UAG1CA,EAAK,SAAW,MAAQA,EAAK,UAAY,KAAK,YAG9C,KAAK,WACJA,EAAK,WAAa,MAAQA,EAAK,YAAc,KAAK,YAGlDA,EAAK,UAAY,MAAQA,EAAK,WAAa,KAAK,WAGhDA,EAAK,UAAY,MAAQA,EAAK,WAAa,KAAK,WAGhDA,EAAK,SAAW,MAAQA,EAAK,UAAY,KAAK,UAG9CA,EAAK,eAAiB,MAAQA,EAAK,gBAAkB,KAAK,gBAKjE,EAEA,aAAa/rC,EAAM,CAClB,IAAIisC,EAAKjsC,EAAK,WACd,GAAIisC,GAAI,OAAS,UAAW,CAC3B,MAAM35B,EAAM,KAAK,KAAK,QAAQtS,EAAK,MAAM,EACxCgb,EAAM,KAAK,QAAQ,OAAO,EAC1BhB,EAAUgB,GAAOA,EAAI,QAAQ,cAAc,EAEtC5a,EAAM4Z,GAAW1H,GAAK,mBAAqBA,EAAI,kBACnD,KAAK0H,KAAS,aAAUiyB,CAAE,EAAGjsC,EAAM,KAAK,eAAgB,KAAK,YAAa,KAAK,YAAa,KAAK,cAAc,EACjH,GAAKI,EACJ,OAAO,OAAO,OAAO,CAAC,EAAGJ,EAAM,CAAC,WAAYI,CAAG,CAAC,CAClD,CAEA,OAAOJ,CACR,EAEA,MAAM8G,EAAO,CACZ,OAAOA,GAGA,KAAK,KAAK,MAAMA,CAAK,CAC7B,CACD,CACD,E,eE3yBIikC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,0CAA0C,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,mGAAmG,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAKA,EAAI,MAAoeA,EAAI,GAAG,EAApeE,EAAG,SAAS,CAAC,YAAY,gEAAgE,GAAG,CAAC,MAAQF,EAAI,KAAK,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,qBAAsB,YAAY,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,uCAAuC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAGA,EAAI,MAAOE,EAAG,SAAS,CAAC,YAAY,gEAAgE,GAAG,CAAC,MAAQF,EAAI,QAAQ,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,cAAc,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,kCAAmC,iDAAiD,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,gBAAgB,CAAC,MAAM,CAAC,OAASF,EAAI,eAAe,OAAS,EAAI,EAAE,GAAG,CAAC,KAAOA,EAAI,UAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,MAAOE,EAAG,MAAM,CAAC,YAAY,oFAAoF,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,wCAAwC,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEE,EAAG,KAAK,CAAC,YAAY,2BAA2B,EAAEF,EAAI,GAAIA,EAAI,QAAS,SAASx2B,EAAO,CAAC,OAAO02B,EAAG,gBAAgB,CAAC,IAAI12B,EAAO,GAAG,MAAM,CAAC,OAASA,EAAO,CAAC,EAAE,GAAG,CAAC,OAAS,SAAS22B,EAAO,CAAC,OAAOH,EAAI,OAAOx2B,CAAM,CAAC,EAAE,KAAO,SAAS22B,EAAO,CAAC,OAAOH,EAAI,KAAKx2B,EAAQ22B,CAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAA7jE,UACTC,EAAkB,CAAC,E,sBCuDvB,IAAI14B,EAAU,ECxDuW,QD0DtW,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,eAAgB,CACf,KAAM,EACP,CACD,CACD,EAEA,SAAU,CACT,OAAQ,CACP,MAAO,CAAE,KAAK,IAAI,QAAU,KAAK,IAAI,SAAW,GAAK,KAAK,cAC3D,EAEA,SAAU,CACT,MAAMhS,EAAM,CAAC,EACb,GAAK,MAAM,QAAQ,KAAK,GAAG,EAC1B,UAAU8T,KAAU,KAAK,IACnBA,EAAO,IAAM,WACjB9T,EAAI,KAAK8T,CAAM,EAElB,OAAO9T,CACR,EAEA,gBAAiB,CAChB,UAAUP,KAAO,KAAK,IACrB,GAAKA,EAAI,IAAM,UACd,MAAO,GAET,MAAO,EACR,EAEA,KAAM,CACL,OAAO,KAAK,UAGL,KAAK,MAAM,IAAI+K,IACrBA,EAAE,GAAKA,EAAE,IAAM,GAAG,KAAK,IAAI,CAAC,IAAI,KAAK,OAAO,CAAC,IAAIwH,GAAS,GACnDxH,EACP,EALO,CAAC,CAMV,CACD,EAEA,QAAS,CACR,UAAW,CACV,KAAK,OAAI,aAAU,KAAK,aAAa,CAAC,CACvC,EAEA,WAAWsJ,EAAQ,CAClB,GAAK,CAAEA,EACN,OAED,OAAOA,EAAO,KAEd,MAAMu4B,EAAO,MAAM,KAAK,KAAK,GAAG,EAChCA,EAAK,KAAK,CAAC,EAAGv4B,CAAM,CAAC,EACrB,KAAK,OAAI,aAAUu4B,CAAI,CAAC,CACzB,EAEA,OAAO5sC,EAAK,CACX,MAAM4sC,EAAO,MAAM,KAAK,KAAK,GAAG,EAC/B/9B,EAAM+9B,EAAK,QAAQ5sC,CAAG,EAElB6O,IAAQ,KACZ+9B,EAAK,OAAO/9B,EAAK,CAAC,EACb+9B,EAAK,OACT,KAAK,OAAI,aAAUA,CAAI,CAAC,EAExB,KAAK,MAAM,EAEd,EAEA,KAAK5sC,EAAK6sC,EAAS,CAClB,OAAOA,EAAQ,KACf7sC,EAAI,EAAI6sC,EAER,KAAK,OAAI,aAAU,KAAK,GAAG,CAAC,CAC7B,CACD,CACD,E,eErII3B,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAQD,EAAI,KAAME,EAAG,MAAM,CAACA,EAAG,MAAM,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,kBAAmB,UAAU,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,YAAY,CAAC,MAAM,CAAC,KAAOF,EAAI,KAAK,IAAMA,EAAI,IAAI,cAAc,EAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAvU,UACTI,EAAkB,CAAC,E,WCgBvB,MAAM+D,EAAS,CACd,mCACA,mCACA,6CACD,ECrB0X,EDuB3W,CACd,WAAY,CACX,YAAa,UACE,MAAM,iCACP,QAAQ,iBAAiB,EAAE,OAE1C,EAEA,MAAO,CAAC,UAAW,MAAM,EAEzB,MAAO,CACN,IAAIn6B,KAAM,cAAW,KAAK,KAAK,MAAM,IAAK,KAAM,KAAK,KAAM,KAAK,OAAO,EAChEA,IACNA,EAAMm6B,EAAO,KAAK,MAAM,KAAK,OAAO,EAAIA,EAAO,MAAM,CAAC,GAEvD,MAAMz0B,EAAQ,CACZ,KAAM,OACN,WAAY,GACZ,QAAS,GACT,IAAA1F,EACA,KAAMA,CACP,EAEA6b,EAAO,KAAK,KAAK,MAAM,QAAQ,EAEhC,IAAIvwB,EAAO,KACX,GAAKuwB,EAAK,kBACT,UAAUrvB,KAAYqvB,EAAK,iBAC1B,GAAKrvB,EAAS,KAAK,KAAKqvB,EAAMnW,EAAO1F,CAAG,EAAI,CAC3C1U,EAAOkB,EAAS,QAAQ,KAAKqvB,EAAMnW,CAAK,EACxC,KACD,EAIF,MAAO,CACN,KAAApa,EACA,IAAA0U,CACD,CACD,CAED,E,eEzDIq2B,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,4DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAAEF,EAAI,QAAQ,UAAWE,EAAG,MAAM,CAAC,YAAY,4DAA4D,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,4BAA4B,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAE,sCAAuC,+HAA+H,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,QAAQ,CAAC,YAAY,aAAa,MAAM,CAAC,IAAM,UAAU,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,cAAc,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+CAA+C,EAAE,CAACA,EAAG,SAAS,CAAC,IAAI,WAAW,YAAY,4IAA4I,MAAM,CAAC,GAAK,UAAU,EAAE,GAAG,CAAC,OAASF,EAAI,cAAc,CAAC,EAAE,CAACE,EAAG,SAAS,CAAC,MAAM,CAAC,MAAQ,QAAQ,EAAE,SAAS,CAAC,SAAWF,EAAI,SAAS,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,QAAS,SAASoE,EAAOpgC,EAAI,CAAC,OAAOk8B,EAAG,SAAS,CAAC,IAAIl8B,EAAI,SAAS,CAAC,SAAWogC,EAAO,OAASpE,EAAI,SAAWoE,EAAO,QAAUpE,EAAI,MAAM,MAAQh8B,CAAG,CAAC,EAAE,CAACg8B,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGoE,EAAO,IAAI,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEpE,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,IAAI,QAAQ,YAAY,iEAAiE,GAAG,CAAC,KAAOF,EAAI,cAAc,MAAQA,EAAI,eAAe,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,WAAW,CAAC,IAAI,UAAU,YAAY,0IAA0I,MAAM,CAAC,KAAO,IAAI,EAAE,GAAG,CAAC,KAAOF,EAAI,cAAc,MAAQA,EAAI,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,yCAAyC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,aAAa,YAAY,sBAAsB,MAAM,CAAC,GAAK,aAAa,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,UAAU,EAAE,GAAG,CAAC,OAASA,EAAI,OAAO,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,YAAY,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,+BAAgC,oBAAoB,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sCAAsC,GAAG,CAAC,MAAQF,EAAI,WAAW,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,cAAc,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,yEAAyE,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,eAAe,YAAY,sBAAsB,MAAM,CAAC,GAAK,eAAe,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,YAAY,EAAE,GAAG,CAAC,OAASA,EAAI,OAAO,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,cAAc,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iCAAkC,cAAc,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,iBAAiB,YAAY,sBAAsB,MAAM,CAAC,GAAK,iBAAiB,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,cAAc,EAAE,GAAG,CAAC,OAASA,EAAI,OAAO,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,gBAAgB,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,mCAAoC,gBAAgB,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,iBAAiB,YAAY,sBAAsB,MAAM,CAAC,GAAK,iBAAiB,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,cAAc,EAAE,GAAG,CAAC,OAASA,EAAI,OAAO,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,gBAAgB,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,mCAAoC,gBAAgB,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sCAAsC,GAAG,CAAC,MAAQF,EAAI,QAAQ,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,WAAW,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,IAAK,SAAS9iB,EAAK,CAAC,OAAOgjB,EAAG,MAAM,CAAC,IAAIhjB,EAAK,IAAI,YAAY,wGAAwG,MAAM,CAAC,uBAAwBA,EAAK,OAAQ,wBAAyB,CAACA,EAAK,MAAM,CAAC,EAAE,CAACgjB,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,MAAM9iB,EAAK,UAAW,UAAU,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAE8iB,EAAI,GAAG,GAAG,EAAG9iB,EAAK,OAAQgjB,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,mCAAmC,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAG9iB,EAAK,KAAK,CAAC,CAAC,CAAC,EAAE8iB,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,SAAS,CAAC,UAAYF,EAAI,GAAGA,EAAI,cAAc9iB,EAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAGA,EAAK,KAAMgjB,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAAEhjB,EAAK,KAAMgjB,EAAG,MAAM,CAAC,YAAY,cAAc,EAAE,CAACF,EAAI,GAAG;AAAA,MAAa,EAAEA,EAAI,GAAI9iB,EAAK,KAAM,SAAS1O,EAAI9X,EAAI,CAAC,MAAO,CAACwpC,EAAG,OAAO,CAAC,YAAY,aAAa,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGtpC,CAAG,CAAC,CAAC,CAAC,EAAEspC,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,mBAAmB,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGxxB,CAAG,CAAC,CAAC,CAAC,EAAEwxB,EAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAAEhjB,EAAK,OAAQ,CAAC8iB,EAAI,GAAG,GAAG,EAAG9iB,EAAK,KAAMgjB,EAAG,OAAO,CAAC,YAAY,cAAc,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAG9iB,EAAK,IAAI,CAAC,CAAC,CAAC,EAAE8iB,EAAI,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,gBAAgB,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAG9iB,EAAK,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE8iB,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAG9iB,EAAK,OAAO,CAAC,CAAC,CAAC,EAAE8iB,EAAI,GAAG,GAAG,EAAG9iB,EAAK,QAAS,CAAC8iB,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAG9iB,EAAK,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE8iB,EAAI,GAAG,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAG9iB,EAAK,WAAYgjB,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACF,EAAI,GAAI9iB,EAAK,OAAQ,SAASmnB,EAAK,CAAC,OAAOnE,EAAG,OAAO,CAAC,YAAY,eAAe,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGqE,CAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAErE,EAAI,GAAG;AAAA,MAAa,EAAEE,EAAG,OAAO,CAAC,YAAY,eAAe,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAG9iB,EAAK,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE8iB,EAAI,GAAG,CAAC,CAAC,EAAEE,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAG9iB,EAAK,IAAI,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAE8iB,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,6FAA6F,EAAE,CAAEhjB,EAAK,MAAQA,EAAK,OAAQgjB,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,WAAW9iB,CAAI,CAAC,CAAC,CAAC,EAAE,CAACgjB,EAAG,OAAO,CAAC,YAAY,iCAAiC,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,SAAS9iB,CAAI,CAAC,CAAC,CAAC,EAAE,CAACgjB,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,oBAAqB,MAAM,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAjkO,UACTI,EAAkB,CAAC,E,oFC4MjBkE,EAAkB,CACvB,OACA,OACA,MACA,KACD,EAEA,IAAIC,EAAiB,CACpB,CACC,KAAQ,OACR,KAAQ,qBACT,CACD,EAEIC,EAAqB,GC3N2V,QD6NrW,CACd,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAMnqC,EAAQ,OAAO,QAAQ,MACvBoqC,KAAU,aAAUF,CAAc,EAClC9/B,EAAUpK,GAAO,gBAAkBoqC,EAAQ,CAAC,EAAE,KAC9ClgC,EAAQlK,GAAO,cAAgBoqC,EAAQ,CAAC,EAAE,OAAS,GAezD,MAAO,CACN,WAAY,GAEZ,QAAAA,EACA,UAjBe,GAkBf,QAAAhgC,EACA,MAAAF,EAEA,WAAYlK,GAAO,eAAiB,GACpC,eAAgBA,GAAO,gBAAkB,GACzC,aAAcA,GAAO,aAAe,GACpC,eAAgBA,GAAO,eAAiB,GAExC,IAAK,CAAC,EACN,KAAM,CACP,CACD,EAEA,MAAO,CACN,SAAU,CACF,KAAK,YACX,KAAK,MAAM,QAAQ,MAAQ,KAAK,QAClC,EAEA,OAAQ,CACA,KAAK,YACX,KAAK,MAAM,MAAM,MAAQ,KAAK,MAChC,EAEA,cAAe,CACT,KAAK,aACT,KAAK,WAAW,EAEhB,KAAK,aAAa,CACpB,EAEA,gBAAiB,CACX,KAAK,eACT,KAAK,aAAa,EAElB,KAAK,eAAe,CACtB,CACD,EAEA,SAAU,CACT,KAAK,YAAY,EAEjB,KAAK,KAAO,KAAK,KAAK,QAAQ,EAE9B,KAAK,OAAS,KAAK,KAAK,YAAY,OAAO,OAC3C,KAAK,WAAa,CAAC,CAAC,KAAK,OAEpB,KAAK,cACT,KAAK,WAAW,EAEZ,KAAK,gBACT,KAAK,aAAa,CACpB,EAEA,eAAgB,CACf,KAAK,aAAa,EAClB,KAAK,eAAe,EAEpB,KAAK,OAAS,KACd,KAAK,KAAO,IACb,EAEA,SAAU,CACT,KAAK,MAAM,QAAQ,MAAQ,KAAK,QAChC,KAAK,MAAM,MAAM,MAAQ,KAAK,KAC/B,EAEA,QAAS,CACR,cAAc+gC,EAAQC,EAAQ,CAC7B,SAAO,iBAAcD,EAAQC,CAAM,CACpC,EAGA,MAAM,aAAc,CACnB,GAAKmJ,EACJ,OAED,MAAMtb,EAAS,MAAM,MAAM,QAAQ,EAAU,GAAG,QAAM,0CAAuC,aAAU,CAAC,EAAE,EAAE,KAAK3zB,GAAKA,EAAE,GAAKA,EAAE,KAAK,EAAI,IAAI,EAC5I,GAAK,MAAM,QAAQ2zB,CAAM,GAAKA,EAAO,OAAS,EAAI,CACjDsb,EAAqB,GAErB,UAAUtnB,KAAQgM,EACVhM,EAAK,QACXA,EAAK,MAAQ,IACT,MAAM,QAAQA,EAAK,IAAI,EAC3BA,EAAK,KAAOA,EAAK,KAAK,KAAK;AAAA;AAAA,CAAM,EACxB,OAAOA,EAAK,MAAS,WAC9BA,EAAK,KAAO,KAAK,UAAUA,EAAK,KAAM,KAAM,CAAC,GAG/CqnB,EAAiBrb,EACjB,KAAK,WAAU,aAAUA,CAAM,EAE/B,IAAIwb,EAAY,GAChB,UAAUxnB,KAAQ,KAAK,QACtB,GAAIA,EAAK,OAAS,KAAK,SAAWA,EAAK,QAAU,KAAK,MAAO,CAC5DwnB,EAAY,GACZ,KACD,CAGD,KAAK,UAAYA,CAClB,CACD,EAGA,YAAa,CAKZ,GAJK,KAAK,gBAIL,CAAE,KAAK,aACX,KAAK,OAAS,KAAK,KAAK,YAAY,OAAO,OAC3C,KAAK,WAAa,CAAC,CAAC,KAAK,OAEpB,CAAE,KAAK,YACX,OAIF,MAAMC,EAAO,KAAK,OAAO,WAElBA,EAAK,qBACXA,EAAK,mBAAqBA,EAAK,iBAEhCA,EAAK,gBAAkBvvC,GAAS,CAC/B,GAAI,CACH,KAAK,WAAWA,CAAK,CACtB,MAAa,CAEb,CAEA,OAAOuvC,EAAK,mBAAmBvvC,CAAK,CACrC,EAEKuvC,EAAK,KACTA,EAAK,GAAG,UAAYA,EAAK,iBAE1B,KAAK,OAAO,yBAAyB,EAErC,KAAK,eAAiB,EACvB,EAEA,cAAe,CACd,GAAK,CAAE,KAAK,eACX,OAED,MAAMA,EAAO,KAAK,OAAO,WAEzBA,EAAK,gBAAkBA,EAAK,mBAEvBA,EAAK,KACTA,EAAK,GAAG,UAAYA,EAAK,iBAE1B,KAAK,OAAO,yBAAyB,EAErC,KAAK,eAAiB,EACvB,EAEA,WAAWvvC,EAAO,CACjB,UAAUS,KAAOT,EAAM,KAAK,MAAM,QAAQ,EAAG,CAC5C,MAAM0O,EAAM,KAAK,UAAUjO,CAAG,EAC9B,GAAKiO,EAAM,CAIV,GAHK,KAAK,gBAAkBA,EAAI,UAAY,WAGvCwgC,EAAgB,SAASxgC,EAAI,OAAO,EACxC,SAED,KAAK,OAAOA,CAAG,CAChB,CACD,CACD,EAEA,UAAUjO,EAAK,CACd,MAAMiO,EAAM,KAAK,OAAO,OAAO,IAAIjO,CAAG,EACtCiO,EAAI,KAAO,GAEN,OAAO,KAAKA,EAAI,IAAI,EAAE,SAAW,IACrCA,EAAI,KAAO,MAEPA,EAAI,OAAO,OAAS,GAAKA,EAAI,OAAO,CAAC,EAAE,WAAW,GAAG,IACzDA,EAAI,QAAUA,EAAI,OAAO,MAAM,EAAE,MAAM,CAAC,GAEpCA,EAAI,OAAO,OAAS,IACxBA,EAAI,WAAaA,EAAI,OAAO,IAAI,GAEjC,MAAME,EAAMF,EAAI,OAASA,EAAI,OAAO,QAAQ,GAAG,EAAI,GAEnD,OAAKE,IAAQ,GACZF,EAAI,KAAO,MAEXA,EAAI,KAAOA,EAAI,OAAO,OAAO,EAAGE,CAAG,EACnCF,EAAI,OAASA,EAAI,OAAO,OAAOE,CAAG,GAG5BF,CACR,EAGA,cAAe,CACT,KAAK,mBAGV,KAAK,KAAK,GAAG,8BAA+B,KAAK,aAAc,IAAI,EACnE,KAAK,OAAO,2BAA2B,EAEvC,KAAK,iBAAmB,GACzB,EAEA,gBAAiB,CACT,KAAK,mBAGZ,KAAK,KAAK,IAAI,8BAA+B,KAAK,aAAc,IAAI,EACpE,KAAK,OAAO,2BAA2B,EAEvC,KAAK,iBAAmB,GACzB,EAEA,aAAa1O,EAAO,CAEdA,EAAM,SAAW,wBAGtB,KAAK,OAAO,CACX,OAAQ,GACR,MAAOA,EAAM,MACb,QAAM,aAAUA,EAAM,OAAO,CAC9B,CAAC,CACF,EAIA,WAAY,CACX,GAAI,CACH,OAAO,QAAQ,aAAa,CAC3B,GAAG,OAAO,QAAQ,MAClB,cAAe,KAAK,WACpB,eAAgB,KAAK,QACrB,YAAa,KAAK,aAClB,cAAe,KAAK,eACpB,eAAgB,KAAK,cACtB,EAAG,SAAS,KAAK,CAElB,MAAa,CAEb,CACD,EAIA,gBAAiB,CAChB,MAAM4O,EAAM,KAAK,MAAM,SAAS,MAC/BkZ,EAAO,KAAK,QAAQlZ,CAAG,EAEnBA,IAAQ,UAAYkZ,GAAM,MAC9B,KAAK,QAAUA,EAAK,KACpB,KAAK,MAAQA,EAAK,OAAS,GAC3B,KAAK,UAAY,IAEjB,KAAK,UAAY,EACnB,EAEA,eAAgB,CACf,MAAMtmB,EAAQ,KAAK,MAAM,QAAQ,MAChC2N,EAAQ,KAAK,MAAM,MAAM,MAE1B,IAAImgC,EAAY,GAChB,UAAUxnB,KAAQ,KAAK,QACtB,GAAIA,EAAK,OAAStmB,GAASsmB,EAAK,QAAU3Y,EAAO,CAChDmgC,EAAY,GACZ,KACD,CAGD,KAAK,UAAYA,EACZ,KAAK,YACT,KAAK,MAAQngC,EACb,KAAK,QAAU3N,EAEjB,EAEA,iBAAkB,CACjB,KAAK,cAAc,CACpB,EAEA,SAAU,CACT,KAAK,WAAa,KAAK,MAAM,WAAW,QACxC,KAAK,aAAe,KAAK,MAAM,aAAa,QAC5C,KAAK,eAAiB,KAAK,MAAM,eAAe,QAChD,KAAK,eAAiB,KAAK,MAAM,eAAe,QAEhD,KAAK,UAAU,CAChB,EAIA,OAAOkN,EAAK,CACN,OAAOA,GAAQ,WACnBA,EAAM,CACL,KAAMA,CACP,GAEDA,EAAI,UAAY,KAAK,IAAI,EACzBA,EAAI,IAAM,KAAK,OAEf,KAAK,IAAI,QAAQA,CAAG,EACpB,MAAMzH,EAAQ,KAAK,IAAI,OAAS,IAC3BA,EAAQ,GACZ,KAAK,IAAI,OAAO,IAAKA,CAAK,CAC5B,EAEA,UAAW,CACV,KAAK,IAAM,CAAC,EACZ,KAAK,OAAO,cAAc,CAC3B,EAIA,SAAS6gB,EAAM,CACd,IAAItmB,EACCsmB,EAAK,IACTtmB,EAAQsmB,EAAK,IACJA,EAAK,KACdtmB,EAAQsmB,EAAK,KAEbtmB,EAAQsmB,EAEJ,OAAOtmB,GAAU,WACrBA,EAAQ,KAAK,UAAUA,CAAK,GAE7B,UAAU,UAAU,UAAUA,CAAK,CACpC,EAEA,aAAc,CAEb,GAAK,KAAK,MAAM,KAAK,EAAE,OAAS,EAAI,CACnC,IAAItB,EACJ,GAAI,CACHA,EAAO,KAAK,MAAM,KAAK,OAAO,CAC/B,OAAQE,EAAK,CACZ,QAAQ,MAAMA,CAAG,EACjB,MAAM,0BAA0B,EAChC,MACD,CAEA,KAAK,WAAW,CACf,OAAQ,GACR,MAAO,KAAK,MACZ,KAAAF,CACD,CAAC,EAED,MACD,CAEA,MAAMsvC,EAAO,CAAC,EACR3N,EAAQ,KAAK,QAAQ,MAAM,QAAQ,EAEzC,UAAUC,KAAQD,EACjB,GAAI,CACEC,GAAQA,EAAK,OAAS,GAC1B0N,EAAK,KAAK,KAAK,UAAU1N,CAAI,CAAC,CAEhC,OAAS1hC,EAAK,CACb,QAAQ,MAAMA,CAAG,EACjB,MAAM,0BAA0B,EAChC,MACD,CAGD,UAAUsO,KAAO8gC,EAChB,KAAK,WAAW9gC,CAAG,CACrB,EAEA,WAAWoZ,EAAM,CAChB,GAAKA,EAAK,OAAS,CAClB,MAAMnW,EAAU,KAAK,KAAK,YAAY,OAAO,OAAO,UACnDtI,EAAO,KAAK,KAAK,QAAQ,MAAM,EAAE,QAAQ,EAErC,KAAK,aACTye,EAAK,MAAQA,EAAK,MAAM,QAAQ,cAAenW,CAAO,EACtDmW,EAAK,MAAQA,EAAK,MAAM,QAAQ,WAAYze,EAAK,EAAE,GAKpD,KAAK,KAAK,QAAQ,cAAc,EAAE,gBAAgBye,EAAK,MAAOA,EAAK,IAAI,CACxE,CAEA,GAAKA,EAAK,KAAO,CAEhB,MAAMxnB,EAAM,CAAC,EACPw4B,EAAS,CAAC,EAEhB,GAAKhR,EAAK,KAAO,CAChBxnB,EAAI,KAAK,GAAG,EACZw4B,EAAO,KAAK,MAAM,EAElB,SAAU,CAACx3B,EAAKvB,CAAG,IAAK,OAAO,QAAQ+nB,EAAK,IAAI,EAAG,CAClD,IAAI0D,EAAIzrB,EAIHuB,IAAQ,MAAQ,KAAK,aACzBkqB,KAAI,gBAAa,GAElBlrB,EAAI,KAAKgB,CAAG,EACZhB,EAAI,KAAK,GAAG,EACZA,EAAI,KAAK,GAAGkrB,CAAC,EAAE,EACflrB,EAAI,KAAK,GAAG,EACZw4B,EAAO,KAAK,QAAQ,EACpBA,EAAO,KAAK,MAAM,EAClBA,EAAO,KAAK,OAAO,EACnBA,EAAO,KAAK,MAAM,CACnB,CACD,EAEKhR,EAAK,MAAQA,EAAK,UACjBxnB,EAAI,SACRA,EAAI,KAAK,GAAG,EACZw4B,EAAO,KAAK,EAAE,GAGfx4B,EAAI,KAAK,GAAG,EACZw4B,EAAO,KAAK,MAAM,EACdhR,EAAK,OACRxnB,EAAI,KAAKwnB,EAAK,IAAI,EAClBgR,EAAO,KAAK,OAAO,GAEhBhR,EAAK,SACRxnB,EAAI,KAAKwnB,EAAK,MAAM,EACpBgR,EAAO,KAAK,MAAM,IAIfx4B,EAAI,SACRA,EAAI,KAAK,GAAG,EACZw4B,EAAO,KAAK,EAAE,GAGfx4B,EAAI,KAAKwnB,EAAK,OAAO,EACrBgR,EAAO,KAAK,QAAQ,EAIfhR,EAAK,UACTxnB,EAAI,KAAK,IAAI,EACbw4B,EAAO,KAAK,MAAM,EAClBx4B,EAAI,KAAK,KAAK,WAAa,KAAK,KAAK,YAAY,OAAO,OAAO,cAAgBwnB,EAAK,QAAUA,EAAK,OAAO,EAC1GgR,EAAO,KAAK,OAAO,GAGpB,UAAUmW,KAAQnnB,EAAK,OACtBxnB,EAAI,KAAK,IAAI2uC,CAAI,EAAE,EACnBnW,EAAO,KAAK,SAAS,EAGjBhR,EAAK,aACTxnB,EAAI,KAAK,IAAI,EACbw4B,EAAO,KAAK,MAAM,EAClBx4B,EAAI,KAAKwnB,EAAK,UAAU,EACxBgR,EAAO,KAAK,SAAS,GAGtB,MAAMpqB,EAAMpO,EAAI,KAAK,EAAE,EACtBivC,EAAO,KAAK,OAAO,WACnBx8B,EAAUw8B,EAAK,oBAAsBA,EAAK,gBAErCE,EAAUnvC,EAAI,KAAK,IAAI,EAC5BovC,EAAa5W,EAAO,IAAIhuB,GAAKA,GAAG,OAAS,UAAUA,CAAC,IAAM,EAAE,EAE7D,KAAK,KAAK,IAAI,WAAW,6BAA6B2kC,CAAO,GAAIC,CAAU,EAE3E38B,EAAQ,KAAKw8B,EAAM,CAClB,KAAM7gC,CACP,CAAC,CACF,CAED,CAED,CAED,E,eEptBIu8B,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,GAAOA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,yCAAyC,CAAC,EAAE;AAAA,EAAM,EAAEE,EAAG,IAAI,CAAC,YAAY,cAAc,MAAM,CAAC,KAAOF,EAAI,IAAI,WAAWA,EAAI,IAAI,oBAAoB,OAAO,qBAAqB,OAAO,eAAe,QAAQ,IAAM,sBAAsB,OAAS,QAAQ,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,GAAG,EAAE;AAAA,EAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAA5d,UACTI,EAAkB,CAAC,ECmBvB,MAAM+D,EAAS,CACd,6CACD,ECtB6X,EDwB9W,CACd,MAAO,CAAC,UAAW,MAAM,EAEzB,MAAO,CAGN,MAAO,CACN,IAHWA,EAAO,KAAK,MAAM,KAAK,OAAO,EAAIA,EAAO,MAAM,CAAC,CAI5D,CACD,CAED,E,eE5BI9D,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,4DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,gCAAgC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,4DAA4D,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,wBAAyB,gCAAgC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAE,gCAAiC,oFAAoF,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAKA,EAAI,QAA4tDA,EAAI,GAAG,EAA1tDE,EAAG,MAAM,CAACA,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,sDAAsD,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,WAAW,EAAEF,EAAI,GAAIA,EAAI,MAAO,SAAS/xB,EAAKvX,EAAI,CAAC,OAAOwpC,EAAG,MAAM,CAAC,IAAAxpC,EAAQ,YAAY,qCAAqC,EAAE,CAACwpC,EAAG,QAAQ,CAAC,IAAIxpC,EAAI,SAAS,GAAK,YAAY,sBAAsB,MAAM,CAAC,GAAKA,EAAI,KAAO,UAAU,CAAC,CAAC,EAAEspC,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAMxpC,CAAG,CAAC,EAAE,CAACwpC,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAG,qBAAuBtpC,EAAMuX,EAAK,OAASvX,CAAG,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEspC,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,2CAA2C,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAE,uBAAwB,+EAAgF,CAAC,KAAMA,EAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,QAAS,WAAW,SAAS,CAAC,EAAE,YAAY,iFAAiF,MAAM,CAAC,KAAO,OAAO,eAAiB,MAAM,YAAc,KAAK,EAAE,SAAS,CAAC,MAASA,EAAI,OAAQ,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAIA,EAAO,OAAO,YAAqBH,EAAI,QAAQG,EAAO,OAAO,MAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEH,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,2CAA2C,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,YAAY,MAAM,CAAC,sBAAuB,CAAEF,EAAI,OAAO,EAAE,GAAG,CAAC,MAAQA,EAAI,KAAK,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,eAAe,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAWA,EAAI,QAASE,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,wBAAyB,mCAAmC,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAW,CAAEA,EAAI,QAASE,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,qBAAsB,+GAA+G,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAAxqF,UACTI,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,E,WCDiK,QCiFxW,CACd,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CAIN,MAAO,CACN,MAJW,KAAK,QAAQ,OAAO,EAChB,QAAQ,UAAU,EAGjB,cAAc,EAC9B,QAAS,GACT,QAAM,eAAY,CAAC,EAEnB,QAAS,GACT,QAAS,GAET,QAAS,IACV,CACD,EAEA,SAAU,CACT,SAAU,CACT,OAAO,KAAK,OAAS,KAAK,OAC3B,CACD,EAEA,QAAS,CACR,MAAM,OAAQ,CACb,GAAK,CAAE,KAAK,QACX,OAED,KAAK,QAAU,GACf,KAAK,QAAU,GAEf,MAAM5vB,EAAM,KAAK,QAAQ,OAAO,EAC/BzK,EAAWyK,EAAI,QAAQ,UAAU,EACjC9Z,EAAWqP,EAAS,SAErB,SAAU,CAACnP,EAAKuX,CAAI,IAAK,OAAO,QAAQ,KAAK,KAAK,EACjD,GAAO,KAAK,MAAMvX,CAAG,IAAI,CAAC,GAAG,QAG7B,GAAKuX,EAAK,MACT,MAAMA,EAAK,MAAM,KAAK,KAAMzX,EAAUqP,CAAQ,MAC1C,CACJ,IAAIrH,KAAO,cAAWyP,EAAK,KAAM,KAAMzX,EAAUqP,CAAQ,EAIzD,GAHKrH,aAAgB,UACpBA,EAAO,MAAMA,GAET,MAAM,QAAQA,CAAI,EACtB,UAAU9H,KAAO8H,EAChBhI,EAAS,OAAOE,CAAG,CACtB,CAGD,KAAK,QAAU,EAChB,CACD,CACD,E,eCnII2pC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,6CAA6C,EAAE,CAAEF,EAAI,QAAUA,EAAI,SAAWA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,4DAA4D,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,YAAY,CAAC,EAAEF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,+EAA+E,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,IAAI,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,iNAAiN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,0CAA0C,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,0CAA0C,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,IAAI,OAAQE,EAAG,SAAS,CAAC,YAAY,gEAAgE,GAAG,CAAC,MAAQF,EAAI,KAAK,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,iDAAiD,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,IAAI,OAAO,YAAY,kBAAkB,EAAE,CAAIF,EAAI,IAAI,OAAwfA,EAAI,GAAG,EAAvfE,EAAG,MAAM,CAAC,YAAY,wEAAwE,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,2CAA2C,CAAC,EAAE;AAAA;AAAA,IAAY,EAAEE,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQF,EAAI,aAAa,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,gBAAgB,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,IAAK,SAASxpC,EAAS,CAAC,OAAO0pC,EAAG,UAAU,CAAC,IAAI1pC,EAAS,EAAE,EAAE,CAAC0pC,EAAG,MAAM,CAAC,YAAY,wIAAwI,EAAE,CAACF,EAAI,GAAG,EAAE,EAAI,EAAEA,EAAI,GAAG,GAAG,EAAGxpC,EAAS,UAAW0pC,EAAG,SAAS,CAAC,YAAY,2BAA2B,MAAM1pC,EAAS,SAAS,CAAC,EAAGA,EAAS,KAAM0pC,EAAG,MAAM,CAAC,YAAY,oEAAoE,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,WAAW,MAAM,CAAC,IAAM1pC,EAAS,IAAI,CAAC,CAAC,CAAC,CAAC,EAAEwpC,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAI1pC,EAAS,KAA2H0pC,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAGxpC,EAAS,SACl2FwpC,EAAI,EAAExpC,EAAS,SAAUA,EAAS,KAAMA,CAAQ,EAChDA,EAAS,IAAI,CAAC,CAAC,CAAC,EAF6rF0pC,EAAG,KAAK,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,iBAAkBxpC,CAAQ,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAE9yFwpC,EAAI,GAAG,GAAG,EAAGxpC,EAAS,YAAa0pC,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGxpC,EAAS,cAAgBwpC,EAAI,EAAExpC,EAAS,cAAeA,EAAS,YAAaA,CAAQ,EAAIA,EAAS,WAAW,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEwpC,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAFjP,UAGTI,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,sFAAsF,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,E,iCCkF1Q,IAAIx4B,EAAU,ECrF2W,QDuF1W,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CAEP,CACD,EAEA,SAAU,CACT,KAAM,CACL,GAAK,CAAE,KAAK,UACX,MAAO,CAAC,EAET,MAAMq9B,EAAU,IAAI,IAAI,KAAK,KAAK,KAAK,CAAC,EAClCrvC,EAAM,KAAK,MAAM,IAAIuJ,GAAM,CAChC8lC,EAAQ,OAAO9lC,CAAE,EACjB,MAAM3J,EAAO,KAAK,KAAK,IAAI2J,CAAE,EAC7B,OAAO3J,GAEJ,CAAC,GAAA2J,CAAE,CACP,CAAC,EAED,UAAUvI,KAAOquC,EAAS,CACzB,MAAMzvC,EAAO,KAAK,KAAK,IAAIoB,CAAG,EAC9BhB,EAAI,KAAKJ,CAAI,CACd,CAEA,OAAOI,CACR,CACD,EAEA,SAAU,CACT,KAAK,UAAY,KAAS,OAAO,KAAK,MAAM,KAAM,CACjD,UAAW,UACX,OAAQ,SAER,SAAUN,GAAS,CAClB,GAAKA,EAAM,WAAaA,EAAM,SAC7B,OAED,MAAM4sC,EAAU,MAAM,KAAK,KAAK,GAAG,EACnCA,EAAQ,OAAO5sC,EAAM,SAAU,EAAG,GAAG4sC,EAAQ,OAAO5sC,EAAM,SAAU,CAAC,CAAC,EACtE,KAAK,SAAS4sC,CAAO,CACtB,CACD,CAAC,CACF,EAEA,eAAgB,CACV,KAAK,WACT,KAAK,UAAU,QAAQ,EAExB,KAAK,UAAY,IAClB,EAEA,QAAS,CACR,SAAS5lC,EAAO,CACXA,GAAO,OAAS,EACnB,KAAK,IAAIA,EAAM,IAAI8D,GAAKA,EAAE,EAAE,CAAC,EAE7B,KAAK,MAAM,CACb,EAEA,eAAgB,CACf,KAAK,IAAI,CAAC,GAAG,KAAK,KAAK,KAAK,CAAC,CAAC,CAC/B,CACD,CAED,E,eErJImgC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,6BAA6B,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,kKAAkK,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,yCAAyC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,gCAAiC,kBAAmB,CAAC,GAAIA,EAAI,SAAS,CAAC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,IAAI,cAAc,YAAY,8FAA8F,GAAG,CAAC,OAASF,EAAI,MAAM,CAAC,EAAE,CAACE,EAAG,SAAS,CAAC,SAAS,CAAC,SAAWF,EAAI,UAAY,CAAC,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gCAAiC,eAAe,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,SAAWF,EAAI,UAAY,CAAC,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,kCAAmC,iBAAiB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,yCAAyC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,0BAA0B,EAAE,CAACA,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,OAAQ,WAAW,QAAQ,CAAC,EAAE,IAAI,SAAS,YAAY,sBAAsB,MAAM,CAAC,GAAK,SAAS,KAAO,UAAU,EAAE,SAAS,CAAC,QAAU,MAAM,QAAQA,EAAI,MAAM,EAAEA,EAAI,GAAGA,EAAI,OAAO,IAAI,EAAE,GAAIA,EAAI,MAAO,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIG,EAAIN,EAAI,OAAOO,EAAKJ,EAAO,OAAOK,EAAI,EAAAD,EAAK,QAAuB,GAAG,MAAM,QAAQD,CAAG,EAAE,CAAC,IAAIG,EAAI,KAAKC,EAAIV,EAAI,GAAGM,EAAIG,CAAG,EAAKF,EAAK,QAASG,EAAI,IAAIV,EAAI,OAAOM,EAAI,OAAO,CAACG,CAAG,CAAC,GAAQC,EAAI,KAAKV,EAAI,OAAOM,EAAI,MAAM,EAAEI,CAAG,EAAE,OAAOJ,EAAI,MAAMI,EAAI,CAAC,CAAC,EAAG,MAAMV,EAAI,OAAOQ,CAAI,CAAC,CAAC,CAAC,EAAER,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,QAAQ,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,kCAAmC,6BAA6B,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,KAAK,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,0BAA0B,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,OAAQE,EAAG,OAAO,CAAC,YAAY,wDAAwD,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,+CAAgD,CACv/E,QAASA,EAAI,YAAY,OACzB,MAAOA,EAAI,WAAW,MACvB,CAAC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,sBAAsB,EAAE,CAACF,EAAI,GAAIA,EAAI,YAAa,SAASztB,EAAI,CAC5H,IAAI7b,EAAM6b,EAAI,IACVyyB,EAAMzyB,EAAI,IACjB,OAAO2tB,EAAG,UAAU,CAAC,IAAAxpC,EAAQ,MAAM,CAAC,WAAWA,CAAG,CAAC,EAAE,CAACwpC,EAAG,MAAM,CAAC,YAAY,sGAAsG,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACA,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAGgF,EAAI,KAAOA,EAAI,KAAOtuC,CAAG,CAAC,CAAC,CAAC,EAAEspC,EAAI,GAAG,GAAG,EAAGgF,EAAI,YAAa9E,EAAG,MAAM,CAAC,YAAY,aAAa,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGgF,EAAI,WAAW,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEhF,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+CAA+C,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,8FAA8F,MAAM,CAAC,WAAWxpC,CAAG,EAAE,GAAG,CAAC,OAAS,SAASypC,EAAO,CAAC,OAAOH,EAAI,SAASG,CAAM,CAAC,CAAC,CAAC,EAAEH,EAAI,GAAIgF,EAAI,OAAQ,SAAS7sC,EAAE6L,EAAI,CAAC,OAAOk8B,EAAG,SAAS,CAAC,IAAIl8B,EAAI,SAAS,CAAC,SAAW7L,EAAE,QAAU6sC,EAAI,KAAK,CAAC,EAAE,CAAChF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,+CAAgD7nC,CAAC,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE6nC,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,iEAAiE,MAAM,CAAC,sBAAuB8E,EAAI,OAAO,EAAE,MAAM,CAAC,SAAWA,EAAI,OAAO,EAAE,GAAG,CAAC,MAAQ,SAAS7E,EAAO,CAAC,OAAOH,EAAI,MAAMtpC,CAAG,CAAC,CAAC,CAAC,EAAE,CAACwpC,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,kBAAkB,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAK,OAAO,KAAKA,EAAI,QAAQ,EAAE,OAAkIA,EAAI,YAAY,OAAuIA,EAAI,GAAG,EAAtIE,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,kCAAmC,oCAAoC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAA/QE,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,mCAAmC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,CAAoK,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,KAAK,CAAC,YAAY,qBAAqB,EAAE,CAACA,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,oBAAoB,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,oBAAsBA,EAAI,OAAQE,EAAG,OAAO,CAAC,YAAY,wDAAwD,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,+CAAgD,CACrpE,QAASA,EAAI,eAAe,OAC5B,MAAOA,EAAI,cAAc,MAC1B,CAAC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,mBAAoBE,EAAG,UAAU,CAACA,EAAG,MAAM,CAAC,YAAY,4DAA4D,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,8BAA8B,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAE,8BAA+B,4ZAA8Z,CAAC,KAAMA,EAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,OAAO,YAAY,uHAAuH,MAAM,CAAC,KAAO,OAAO,eAAiB,MAAM,YAAc,KAAK,EAAE,GAAG,CAAC,QAAU,SAASC,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,QAAQ,GAAGA,EAAO,IAAI,OAAO,EAAW,KAAcH,EAAI,UAAU,MAAM,KAAM,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEE,EAAG,UAAU,CAACA,EAAG,MAAM,CAAC,YAAY,sBAAsB,EAAE,CAACF,EAAI,GAAIA,EAAI,eAAgB,SAASztB,EAAI,CACv3C,IAAI7b,EAAM6b,EAAI,IACVyyB,EAAMzyB,EAAI,IACjB,OAAO2tB,EAAG,UAAU,CAAC,IAAAxpC,EAAQ,MAAM,CAAC,WAAWA,CAAG,CAAC,EAAE,CAACwpC,EAAG,MAAM,CAAC,YAAY,4GAA4G,MAAM,CAAC,KAAM8E,EAAI,MAAM,CAAC,EAAE,CAAEhF,EAAI,OAAQE,EAAG,MAAM,CAAC,YAAY,gFAAgF,EAAE,CAAE8E,EAAI,OAAQ9E,EAAG,MAAM,CAAC,YAAY,uDAAuD,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gEAAgE,EAAE,CAACF,EAAI,GAAG;AAAA,UAAqBA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,4BAA4B,CAAC,EAAE;AAAA,QAAkB,CAAC,CAAC,CAAC,CAAC,EAAEE,EAAG,MAAM,CAAC,YAAY,2DAA2D,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gEAAgE,EAAE,CAACF,EAAI,GAAG;AAAA,UAAqBA,EAAI,GAAGA,EAAI,EAAE,+BAAgC,gCAAgC,CAAC,EAAE;AAAA,QAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACA,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAGgF,EAAI,IAAI,CAAC,CAAC,CAAC,EAAEhF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,aAAa,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGgF,EAAI,SAAS,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,EAAEhF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+CAA+C,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,8FAA8F,MAAM,CAAC,WAAWxpC,CAAG,EAAE,GAAG,CAAC,OAAS,SAASypC,EAAO,CAAC,OAAOH,EAAI,eAAeG,CAAM,CAAC,CAAC,CAAC,EAAE,CAAE6E,EAAI,QAAU,KAAM9E,EAAG,SAAS,CAAC,SAAS,CAAC,SAAW8E,EAAI,OAAO,CAAC,EAAE,CAAChF,EAAI,GAAG;AAAA,UAAqBA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,OAAO,CAAC,EAAE;AAAA,QAAkB,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIgF,EAAI,OAAQ,SAAS7sC,EAAE6L,EAAI,CAAC,OAAOk8B,EAAG,SAAS,CAAC,IAAIl8B,EAAI,SAAS,CAAC,SAAW7L,EAAE,QAAU6sC,EAAI,KAAK,CAAC,EAAE,CAAChF,EAAI,GAAG;AAAA,UAAqBA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,+CAAgD7nC,CAAC,CAAC,EAAE;AAAA,QAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE6nC,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,iEAAiE,MAAM,CAAC,sBAAuB8E,EAAI,OAAO,EAAE,MAAM,CAAC,SAAWA,EAAI,OAAO,EAAE,GAAG,CAAC,MAAQ,SAAS7E,EAAO,CAAC,OAAOH,EAAI,YAAYtpC,CAAG,CAAC,CAAC,CAAC,EAAE,CAACwpC,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,UAAqBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,kBAAkB,CAAC,EAAE;AAAA,QAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAK,OAAO,KAAKA,EAAI,WAAW,EAAE,OAAsIA,EAAI,eAAe,OAA2IA,EAAI,GAAG,EAA1IE,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,kCAAmC,oCAAoC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAA1RE,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,mCAAmC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAA2K,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAZnsF,UAaTI,EAAkB,CAAC,E,WC6MvB,SAAS58B,EAAQwhC,EAAK7vB,EAAQ,CAC7B,OAAQ6vB,EAAI,KAAOA,EAAI,IAAI,YAAY,EAAE,SAAS7vB,CAAM,GACrD6vB,EAAI,MACHA,EAAI,IAAI,MAAQA,EAAI,IAAI,KAAK,YAAY,EAAE,SAAS7vB,CAAM,GAC1D6vB,EAAI,IAAI,aAAeA,EAAI,IAAI,YAAY,YAAY,EAAE,SAAS7vB,CAAM,EAE7E,CANS,EAAA3R,EAAA,WAQT,MAAMyhC,EAAQ,CACb,cACA,aACA,UACA,yBACD,ECvOoX,EDyOrW,CACd,MAAO,CAAC,OAAQ,QAAQ,EAExB,MAAO,CACN,MAAO,CACN,QAAM,eAAYA,CAAK,EACvB,mBAAoB,KAAK,KAAK,UAAU,EACxC,QAAS,EACT,OAAQ,GACR,UAAW,KAAK,KAAK,UAAU,EAC/B,SAAU,KAAK,KAAK,SAAS,EAC7B,YAAa,KAAK,KAAK,YAAY,CACpC,CACD,EAEA,SAAU,CACT,YAAa,CACZ,OAAO,KAAK,OAAO,KAAK,QAAQ,CACjC,EAEA,aAAc,CACb,IAAIvvC,EAAM,KAAK,WAEf,OAAK,KAAK,QAAQ,QACjBA,EAAMA,EAAI,OAAOwK,GAAKsD,EAAQtD,EAAG,KAAK,OAAO,KAAK,CAAC,GAE/C,KAAK,QAAQ,OAAS,KAAK,OAAO,MAAM,IAAI,UAAU,IAC1DxK,EAAMA,EAAI,OAAOwK,GAAK,KAAK,KAAK,YAAYA,EAAE,GAAG,CAAC,GAE5CxK,CACR,EAEA,eAAgB,CACf,OAAO,KAAK,OAAO,KAAK,WAAW,CACpC,EAEA,gBAAiB,CAChB,IAAIA,EAAM,KAAK,cAEf,OAAK,KAAK,QAAQ,QACjBA,EAAMA,EAAI,OAAOwK,GAAKsD,EAAQtD,EAAG,KAAK,OAAO,KAAK,CAAC,GAE/C,KAAK,QAAQ,OAAS,KAAK,OAAO,MAAM,IAAI,UAAU,IAC1DxK,EAAMA,EAAI,OAAOwK,GAAK,KAAK,KAAK,kBAAkBA,EAAE,GAAG,CAAC,GAElDxK,CACR,CACD,EAEA,SAAU,CACT,UAAUgB,KAAO,KAAK,SACrB,MAAK,OAAI,KAAK,SAAUA,CAAG,EAAI,CAC9B,MAAMsuC,EAAM,KAAK,SAAStuC,CAAG,EAC7B,KAAK,KAAKsuC,EAAK,QAAS,KAAK,KAAK,cAActuC,CAAG,CAAC,EACpD,KAAK,KAAKsuC,EAAK,UAAW,CAAE,KAAK,KAAK,YAAYtuC,CAAG,CAAC,EAEtDsuC,EAAI,MAAQA,EAAI,OAAO,OAAO,CAACl+B,EAAEsJ,IAAMtJ,EAAIsJ,EAAE,OAAQ,CAAC,EACtD,KAAK,gBAAgB40B,CAAG,CAEzB,CAED,UAAUtuC,KAAO,KAAK,YACrB,MAAK,OAAI,KAAK,YAAaA,CAAG,EAAI,CACjC,MAAMsuC,EAAM,KAAK,YAAYtuC,CAAG,EAChC,KAAK,KAAKsuC,EAAK,QAAS,KAAK,KAAK,oBAAoBtuC,CAAG,CAAC,EAC1D,KAAK,KAAKsuC,EAAK,UAAW,CAAE,KAAK,KAAK,kBAAkBtuC,CAAG,CAAC,EAE5DsuC,EAAI,OAAS,KAAK,KAAK,sBAAsBtuC,CAAG,EAChDsuC,EAAI,UAAY,MAAMA,EAAI,CAAC,WAAW,KAAK,KAAK,cAAcA,EAAI,CAAC,CAAC,GACpEA,EAAI,MAAQA,EAAI,OAAO,OAAO,CAACl+B,EAAEsJ,IAAMtJ,EAAIsJ,EAAE,OAAQ,CAAC,EACtD,KAAK,gBAAgB40B,CAAG,CACzB,CAED,KAAK,KAAK,GAAG,WAAY,KAAK,aAAc,IAAI,EAChD,KAAK,KAAK,GAAG,kBAAmB,KAAK,mBAAoB,IAAI,CAC9D,EAEA,eAAgB,CACf,KAAK,KAAK,IAAI,WAAY,KAAK,aAAc,IAAI,EACjD,KAAK,KAAK,IAAI,kBAAmB,KAAK,mBAAoB,IAAI,CAC/D,EAEA,QAAS,CACR,WAAY,CACN,KAAK,MAAM,KAAK,QAAU,KAAK,OAGpC,KAAK,mBAAqB,GAC1B,KAAK,KAAK,OAAO,EAClB,EAEA,gBAAgBA,EAAK,CACpB,IAAIE,EACJ,UAAUC,KAASH,EAAI,OACtB,GAAKG,EAAM,QAAUH,EAAI,MAAQ,CAChCE,EAASC,EAAM,OAASH,EAAI,MAC5B,KACD,CAED,KAAK,KAAKA,EAAK,SAAUE,CAAM,CAChC,EAEA,OAAO5vC,EAAM,CACZ,MAAMI,EAAM,CAAC,EACb,SAAU,CAAC+K,EAAEmgB,CAAC,IAAK,OAAO,QAAQtrB,CAAI,EAChC,CAAE,KAAK,QAAUsrB,EAAE,SAAW,IAGnClrB,EAAI,KAAK,CAAC,IAAK+K,EAAG,IAAKmgB,CAAC,CAAC,EAK1B,OAAAlrB,EAAI,KAAK,CAACoR,EAAEsJ,IAAM,CACjB,MAAMg1B,EAAQt+B,EAAE,IAAI,OACnBu+B,EAAQj1B,EAAE,IAAI,OAEf,GAAKg1B,GAAS,CAAEC,EAAQ,MAAO,GAC/B,GAAK,CAAED,GAASC,EAAQ,MAAO,GAE/B,GAAK,KAAK,UAAY,EAAI,CACzB,MAAMC,EAAMx+B,EAAE,IAAI,OACjBy+B,EAAMn1B,EAAE,IAAI,OAEb,GAAKk1B,EAAMC,EAAM,MAAO,GACxB,GAAKD,EAAMC,EAAM,MAAO,EACzB,CAEA,MAAMn0B,EAAMtK,EAAE,IAAI,MAAM,YAAY,GAAKA,EAAE,KAAK,YAAY,EAC3DuK,EAAMjB,EAAE,IAAI,MAAM,YAAY,GAAKA,EAAE,KAAK,YAAY,EAEvD,OAAKgB,EAAMC,EAAa,GACnBD,EAAMC,EAAa,EAEjB,CACR,CAAC,EAEM3b,CACR,EAEA,MAAMgB,EAAK,CACV,KAAK,KAAK,eAAeA,CAAG,EAC5B,MAAMsuC,EAAM,KAAK,SAAStuC,CAAG,EACxBsuC,IACJA,EAAI,QAAU,CAAE,KAAK,KAAK,YAAYtuC,CAAG,EAC3C,EAEA,YAAYA,EAAK,CAChB,KAAK,KAAK,qBAAqBA,CAAG,EAClC,MAAMsuC,EAAM,KAAK,YAAYtuC,CAAG,EAC3BsuC,IACJA,EAAI,QAAU,CAAE,KAAK,KAAK,kBAAkBtuC,CAAG,EACjD,EAEA,QAAS,CACR,KAAK,QAAU,KAAK,MAAM,YAAY,aACvC,EAEA,SAAStB,EAAO,CACf,MAAMuC,EAAKvC,EAAM,OAChB4O,EAAMrM,EAAG,cACTjB,EAAMiB,EAAG,QAAQ,IAEZqtC,EAAM,KAAK,SAAStuC,CAAG,EAC5B8uC,EAASR,GAAOA,EAAI,OACpBzwB,EAAQixB,GAAUA,EAAOxhC,CAAG,EAExBuQ,GACJ,KAAK,KAAK,YAAY7d,EAAK6d,EAAM,KAAK,CACxC,EAEA,eAAenf,EAAO,CACrB,MAAMuC,EAAKvC,EAAM,OAChB4O,EAAMrM,EAAG,cACTjB,EAAMiB,EAAG,QAAQ,IAEZqtC,EAAM,KAAK,YAAYtuC,CAAG,EAC/B4R,EAAS08B,EAAI,OAAS,EAAI,EAC1BQ,EAASR,GAAOA,EAAI,OACpBzwB,EAAQixB,GAAUA,EAAOxhC,EAAMsE,CAAM,EAEjCiM,GACJ,KAAK,KAAK,kBAAkB7d,EAAK6d,EAAM,KAAK,CAC9C,EAEA,aAAa7d,EAAKE,EAAO,CACxB,MAAMouC,EAAM,KAAK,SAAStuC,CAAG,EACxBsuC,IACJA,EAAI,MAAQpuC,EACZouC,EAAI,QAAU,CAAE,KAAK,KAAK,YAAYtuC,CAAG,EACzC,KAAK,gBAAgBsuC,CAAG,EAE1B,EAEA,mBAAmBtuC,EAAKE,EAAO,CAC9B,MAAMouC,EAAM,KAAK,YAAYtuC,CAAG,EAC3BsuC,IACJA,EAAI,MAAQpuC,EACZouC,EAAI,QAAU,CAAE,KAAK,KAAK,kBAAkBtuC,CAAG,EAC/C,KAAK,gBAAgBsuC,CAAG,EAE1B,CACD,CACD,E,eE7aI3E,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,gCAAgC,EAAE,CAACA,EAAG,MAAM,CAAC,IAAI,OAAO,YAAY,gBAAgB,EAAE,CAAE,CAAEF,EAAI,SAAW,CAAEA,EAAI,QAAQ,OAAQE,EAAG,UAAU,CAAC,YAAY,qEAAqE,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,wBAAyB,cAAc,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,QAAS,SAASyF,EAAK,CAAC,OAAOvF,EAAG,qBAAqB,CAAC,IAAIuF,EAAK,GAAG,MAAM,CAAC,MAAQA,EAAK,SAAWzF,EAAI,SAAS,QAAUA,EAAI,QAAQ,QAAUA,EAAI,QAAQ,QAAUA,EAAI,QAAQ,UAAUyF,EAAK,EAAE,EAAE,GAAG,CAAC,MAAQ,SAAStF,EAAO,CAAC,OAAOH,EAAI,WAAWyF,EAAK,GAAItF,CAAM,CAAC,EAAE,OAAS,SAASA,EAAO,CAAC,OAAOH,EAAI,WAAWyF,EAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEzF,EAAI,GAAG,GAAG,EAAGA,EAAI,QAAWA,EAAI,WAAa,GAAKA,EAAI,WAAaE,EAAG,MAAM,CAAC,YAAY,yCAAyC,EAAE,CAACF,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sBAAsB,GAAG,CAAC,MAAQF,EAAI,OAAO,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,KAAK,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAGA,EAAI,WAAYE,EAAG,SAAS,CAAC,YAAY,wDAAwD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,OAAS,EAAI,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,cAAc,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAAx6C,UACTI,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,SAAS,CAAC,IAAI,UAAU,YAAY,uFAAuF,EAAEF,EAAI,GAAIA,EAAI,QAAS,SAAS7qB,EAAOze,EAAI,CAAC,OAAOwpC,EAAG,SAAS,CAAC,IAAAxpC,EAAQ,SAAS,CAAC,MAAQA,CAAG,CAAC,EAAE,CAACspC,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE7qB,EAAO,KAAMA,EAAO,KAAK,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,E,iCCDnC,QC4DvW,CACd,MAAO,CACN,MAAO,MACP,QAAS,OACT,SAAU,CACT,KAAM,QACN,QAAS,EACV,EACA,SAAU,CACT,KAAM,OACN,SAAU,GACV,QAAS,CACV,EACA,QAAS,CACR,KAAM,QACN,SAAU,GACV,QAAS,EACV,EACA,QAAS,CACR,KAAM,OACN,SAAU,EACX,CACD,EAEA,MAAO,CACN,MAAO,CACN,OAAQ,GACR,UAAW,GACX,QAAS,KAAK,UAAU,CACzB,CACD,EAEA,SAAU,CACT,YAAa,CACZ,OAAK,KAAK,SACF,GACD,CAAE,KAAK,UAAa,KAAK,QAAQ,OAAS,KAAK,QACvD,CACD,EAEA,MAAO,CACN,OAAQ,CACP,KAAK,UAAY,GACjB,KAAK,QAAU,KAAK,UAAU,CAC/B,EAEA,QAAS,CACR,SAAU,CACJ,CAAE,KAAK,WAAa,CAAE,KAAK,UAC/B,KAAK,MAAM,QAAS,KAAK,OAAO,EACjC,KAAK,UAAY,EAClB,EACA,KAAM,EACP,CACD,EAEA,SAAU,CACT,KAAK,SAAW,KAAS,OAAO,KAAK,MAAM,KAAM,CAChD,UAAW,UACX,OAAQ,0BACR,cAAe,IACf,MAAO,CACN,KAAM,oBACN,IAAK,CAACuwB,EAAIC,EAAMC,IACV,GAAE,KAAK,YAIPA,GAAWA,EAAQ,UAAYA,EAAQ,SAASF,EAAG,EAAE,GAKrD,IAAE,mBAAgBA,EAAG,GAAIC,EAAK,GAAI,iBAAiB,EAK1D,EAEA,QAAS,CAACrwC,EAAMqC,IAAO,CACtB,MAAM8tC,EAAO,KAAK,QAAQ9tC,EAAG,QAAQ,EAAE,EAClC8tC,GACJnwC,EAAK,QAAQ,OAAQ,KAAK,UAAUmwC,CAAI,CAAC,CAE3C,EAEA,MAAOrwC,GAAS,CACf,GAAK,KAAK,SAAW,CACpBA,EAAM,eAAe,EACrB,MACD,CAEA,GAAK,CAAE,KAAK,WAAa,CACxBA,EAAM,eAAe,EACrB,MACD,CAEA,IAAIqwC,EACJ,GAAI,CACHA,EAAO,KAAK,MAAMrwC,EAAM,cAAc,aAAa,QAAQ,MAAM,CAAC,CACnE,MAAa,CACZA,EAAM,eAAe,EACrB,MACD,CAEA,KAAK,QAAQ,OAAOA,EAAM,kBAAmB,EAAGqwC,CAAI,CACrD,EAEA,SAAUrwC,GAAS,CAClB,GAAK,KAAK,SAAW,CACpBA,EAAM,eAAe,EACrB,MACD,CAEA,IAAIqwC,EACJ,GAAI,CACHA,EAAO,KAAK,MAAMrwC,EAAM,cAAc,aAAa,QAAQ,MAAM,CAAC,CACnE,MAAa,CACZA,EAAM,eAAe,EACrB,MACD,CAEA,KAAK,WAAWqwC,EAAK,EAAE,CACxB,EAEA,SAAUrwC,GAAS,CACb,KAAK,UAGLA,EAAM,WAAaA,EAAM,UAG9B,KAAK,QAAQ,OAAOA,EAAM,SAAU,EAAG,GAAG,KAAK,QAAQ,OAAOA,EAAM,SAAU,CAAC,CAAC,CACjF,CACD,CAAC,CACF,EAEA,eAAgB,CACV,KAAK,WACT,KAAK,SAAS,QAAQ,EACtB,KAAK,SAAW,KAElB,EAEA,QAAS,CACR,QAAQ6J,EAAIse,EAAO,CAIlB,GAHOA,IACNA,EAAQ,KAAK,SAET,CAAE,MAAM,QAAQA,CAAK,EACzB,OAAO,KAER,QAAQplB,EAAE,EAAGA,EAAIolB,EAAM,OAAQplB,IAAK,CACnC,MAAMstC,EAAOloB,EAAMplB,CAAC,EACpB,GAAOstC,GACN,GACSA,EAAK,KAAOxmC,EACrB,OAAOwmC,MAFP,UAID,MAAMx3B,EAAO,KAAK,QAAQw3B,EAAK,IAAI,EACnC,GAAKx3B,GAAQA,EAAK,WAAa,CAC9B,MAAMvY,EAAM,KAAK,QAAQuJ,EAAIwmC,EAAK,IAAI,EACtC,GAAK/vC,EACJ,OAAOA,CACT,CACD,CAEA,OAAO,IACR,EAEA,SAAU,CACT,GAAK,KAAK,SACT,OAED,KAAK,OAAS,GAEd,MAAMgB,EAAM,KAAK,MAAM,QAAQ,MAC9BuX,EAAO,KAAK,QAAQvX,CAAG,EAExB,GAAK,CAAEA,EACN,OAED,MAAMhB,EAAM,CACX,MAAI,gBAAa,EACjB,KAAMgB,EACN,QAAM,cAAWuX,EAAK,QAASA,CAAI,CACpC,EAEA,KAAK,QAAQ,KAAKvY,CAAG,CACtB,EAEA,WAAWuJ,EAAI3J,EAAM,CACpB,GAAK,MAAK,UAGV,QAAQ6C,EAAE,EAAGA,EAAI,KAAK,QAAQ,OAAQA,IACrC,GAAK,KAAK,QAAQA,CAAC,EAAE,KAAO8G,EAAK,CAChC,KAAK,QAAQ9G,CAAC,EAAI,OAAO,OAAO,KAAK,QAAQA,CAAC,EAAG7C,CAAI,EACrD,MACD,EAEF,EAEA,WAAW2J,EAAI,CACd,GAAK,MAAK,UAGV,QAAQ9G,EAAE,EAAGA,EAAI,KAAK,QAAQ,OAAQA,IACrC,GAAK,KAAK,QAAQA,CAAC,EAAE,KAAO8G,EAAK,CAChC,KAAK,QAAQ,OAAO9G,EAAG,CAAC,EACxB,MACD,EAEF,EAEA,WAAY,CACX,OAAO,MAAM,QAAQ,KAAK,KAAK,KAGxB,aAAU,KAAK,KAAK,EAAE,IAAIstC,IACzBA,EAAK,KACXA,EAAK,MAAK,gBAAa,GAEjBA,EACP,EAPO,CAAC,CAQV,CACD,CACD,E,eCzRIpF,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,8HAA8H,EAAE,CAACF,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAKA,EAAI,UAAgTE,EAAGF,EAAI,UAAU,CAAC,IAAI,YAAY,MAAM,CAAC,KAAOA,EAAI,KAAK,QAAUA,EAAI,QAAQ,QAAUA,EAAI,QAAQ,QAAUA,EAAI,OAAO,EAAE,MAAM,CAAC,MAAOA,EAAI,QAAS,SAAS,SAAUS,EAAK,CAACT,EAAI,QAAQS,CAAG,EAAE,WAAW,SAAS,CAAC,CAAC,EAA5fP,EAAG,MAAM,CAAC,YAAY,mEAAmE,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,4FAA6F,CAAC,KAAMA,EAAI,SAAWA,EAAI,QAAQ,IAAI,CAAC,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAA2NA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAWA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,wHAAwH,EAAE,CAACA,EAAG,SAAS,CAAC,MAAM,CAACF,EAAI,OAAS,WAAa,cAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+DAA+D,EAAE,CAAEF,EAAI,OAAQE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,oBAAoB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,2BAA2B,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,0GAA0G,MAAM,CAACF,EAAI,QAAU,GAAK,WAAW,CAAC,EAAE,CAAE,CAAEA,EAAI,SAAWA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,0IAA0I,EAAE,CAACA,EAAG,SAAS,CAAC,MAAM,CAACF,EAAI,OAAS,WAAa,cAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+DAA+D,EAAE,CAAEF,EAAI,OAAQE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,oBAAoB,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,2BAA2B,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAU,CAACE,EAAG,SAAS,CAAC,YAAY,kEAAkE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,SAAW,EAAK,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+DAA+D,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,kEAAkE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,MAAM,QAAQ,CAAC,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+DAA+D,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAACE,EAAG,SAAS,CAAC,YAAY,kEAAkE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,SAAW,EAAI,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+DAA+D,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAzzG,UACTI,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,uEAAuE,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,E,WCDkI,QCgF5W,CACd,MAAO,CACN,MAAO,OACP,QAAS,OACT,QAAS,CACR,KAAM,OACN,SAAU,EACX,EACA,QAAS,CACR,KAAM,QACN,SAAU,GACV,QAAS,EACV,CACD,EAEA,MAAO,CACN,MAAO,CACN,WAAS,aAAU,KAAK,KAAK,EAC7B,OAAQ,KACR,SAAU,EACX,CACD,EAEA,SAAU,CACT,QAAS,CACR,OAAO,KAAK,SAAW,KAAK,QAAU,KAAK,OAAO,KAAK,OAAO,CAC/D,EAEA,MAAO,CACN,OAAO,KAAK,QAAQ,KAAK,SAAW,KAAK,QAAQ,IAAI,CACtD,EAEA,WAAY,CACX,OAAO,KAAK,MAAQ,KAAK,KAAK,MAC/B,EAEA,SAAU,CACT,MAAO,CAAE,KAAK,WAAc,KAAK,MAAQ,CAAE,KAAK,KAAK,IACtD,CACD,EAEA,MAAO,CACN,QAAS,CACR,SAAU,CACT,KAAK,OAAS,KAAK,KAAK,WAAW,KAAK,QAAQ,KAAM,KAAK,OAAO,EAClE,KAAK,MAAM,QAAS,KAAK,OAAO,CACjC,EACA,KAAM,EACP,CACD,EAEA,SAAU,CACT,KAAK,OAAS,KAAK,MAAQ,KAAK,KAAK,WAAW,KAAK,SAAW,KAAK,QAAQ,KAAM,KAAK,OAAO,CAChG,CACD,E,eC/HIG,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,OAAO,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,qCAAqC,EAAE,CAAEF,EAAI,OAAS,OAAQE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,MAAMA,EAAI,IAAKA,EAAI,KAAK,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAGA,EAAI,OAAS,OAAQE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,MAAMA,EAAI,IAAKA,EAAI,KAAK,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,UAAUA,EAAI,IAAKA,EAAI,KAAK,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAhgB,UACTI,EAAkB,CAAC,ECDgW,QCkBxW,CACd,MAAO,CAAC,UAAW,OAAQ,OAAO,EAElC,MAAO,CACN,MAAO,CACN,KAAM,KAAK,KAAK,MAAM,KACtB,IAAK,IACN,CACD,EAEA,SAAU,CACT,KAAK,IAAM,IAAI,KACf,KAAK,MAAQ,YAAY,IAAM,KAAK,IAAM,IAAI,KAAM,GAAI,CACzD,EAEA,eAAgB,CACf,cAAc,KAAK,KAAK,EACxB,KAAK,MAAQ,IACd,CAED,E,eC/BIC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,4BAA4B,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,wEAAwE,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAACA,EAAG,eAAe,CAAC,YAAY,iBAAiB,MAAM,CAAC,WAAW,YAAcF,EAAI,GAAG,MAAQA,EAAI,gBAAgB,mBAAmB,GAAK,kBAAkB,EAAK,EAAE,YAAYA,EAAI,GAAG,CAAC,CAAC,IAAI,UAAU,GAAG,SAAS6F,EAAK,CAAC,MAAO,CAAC3F,EAAG,MAAM,CAAC,YAAY,sBAAsB,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,qBAAqB,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,0DAA0D,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,uEAAuE,EAAE,CAACA,EAAG,SAAS,CAAC,MAAM,CAAC,MAAQ,EAAE,IAAI,CAAC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,WAAW,MAAM,CAAC,IAAM2F,EAAK,KAAK,YAAY,IAAMA,EAAK,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE7F,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,6CAA6C,EAAE,CAACA,EAAG,IAAI,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,WAAuBA,EAAI,GAAG6F,EAAK,KAAK,WAAW,EAAE;AAAA,SAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,MAAO7F,EAAI,OAAQ,SAAS,SAAUS,EAAK,CAACT,EAAI,OAAOS,CAAG,EAAE,WAAW,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAAET,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,YAAY,GAAG,CAAC,MAAQF,EAAI,GAAG,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,KAAK,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAG,CAAEA,EAAI,OAAS,CAAEA,EAAI,MAAM,OAAQE,EAAG,MAAM,CAAC,YAAY,oFAAoF,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,mBAAoB,UAAU,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEE,EAAG,KAAK,CAAC,YAAY,2BAA2B,EAAEF,EAAI,GAAIA,EAAI,MAAO,SAAS7nC,EAAE,CAAC,OAAO+nC,EAAG,KAAK,CAAC,IAAI/nC,EAAE,YAAY,iGAAiG,EAAE,CAAC+nC,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAAEF,EAAI,SAAUE,EAAG,IAAI,CAAC,YAAY,WAAW,MAAM,CAAC,KAAQ,mBAAqB/nC,CAAE,EAAE,GAAG,CAAC,MAAQ,SAASgoC,EAAO,CAAC,OAAAA,EAAO,eAAe,EAASH,EAAI,WAAW7nC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC6nC,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAG7nC,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,EAAE+nC,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAG7nC,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAE6nC,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,OAAO7nC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC+nC,EAAG,OAAO,CAAC,YAAY,6BAA6B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAzoF,UACTI,EAAkB,CAAC,E,sBCmFvB,IAAI14B,EAAU,ECpF2W,QDsF1W,CACd,OAAQ,CAAC,GAAa,EACtB,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,GAAIA,IACJ,OAAQ,GACR,SAAU,EACX,CACD,EAEA,SAAU,CACT,MAAM4I,EAAM,KAAK,QAAQ,OAAO,EAEhC,KAAK,OAASA,EAAI,QAAQ,kBAAkB,EAC5C,KAAK,OAASA,EAAI,QAAQ,aAAa,EAEvC,KAAK,SAAW,CAAEA,EAAI,QAAQ,WAAW,EAAE,SAC5C,EAEA,QAAS,CACR,KAAM,CACL,GAAK,CAAE,KAAK,QAAQ,OACnB,OAED,MAAM4Y,EAAS,MAAM,KAAK,KAAK,KAAK,EAC/BA,EAAO,SAAS,KAAK,MAAM,IAGhCA,EAAO,KAAK,KAAK,MAAM,EACvB,KAAK,IAAIA,CAAM,EAChB,EAEA,OAAOhM,EAAM,CACZ,MAAMgM,EAAS,MAAM,KAAK,KAAK,KAAK,EACnCllB,EAAMklB,EAAO,QAAQhM,CAAI,EAErBlZ,IAAQ,KAGRklB,EAAO,SAAW,EACtB,KAAK,MAAM,GAEXA,EAAO,OAAOllB,EAAK,CAAC,EACpB,KAAK,IAAIklB,CAAM,GAEjB,EAEA,WAAW,EAAG,CACb,KAAK,OAAO,SAAS,iBAAkB,CAAC,SAAU,CAAC,CAAC,CACrD,EAEA,MAAM,gBAAgB4H,EAAO,CAC5B,GAAK,CAAE,KAAK,OACX,MAAO,CAAC,EAET,MAAMx7B,EAAO,MAAM,KAAK,OAAO,sBAAsBw7B,CAAK,EAC1D,MAAK,CAAEx7B,GAAQ,CAAEA,EAAK,MACd,CAAC,KAEF,aAAUA,EAAK,KAAK,CAC5B,CACD,CACD,E,eE/II+qC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,QAAQ,CAAC,YAAY,aAAa,MAAM,CAAC,IAAM,UAAU,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,QAAQ,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iDAAiD,EAAE,CAACA,EAAG,SAAS,CAAC,IAAI,WAAW,YAAY,4IAA4I,MAAM,CAAC,GAAK,UAAU,EAAE,GAAG,CAAC,OAASF,EAAI,cAAc,CAAC,EAAEA,EAAI,GAAIA,EAAI,QAAS,SAASlP,EAAM9sB,EAAI,CAAC,OAAOk8B,EAAG,SAAS,CAAC,IAAIpP,EAAM,KAAK,SAAS,CAAC,SAAWkP,EAAI,UAAYlP,EAAM,MAAQ9sB,CAAG,CAAC,EAAE,CAACg8B,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGlP,EAAM,IAAI,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEkP,EAAI,GAAG,GAAG,EAAGA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,qBAAqB,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,4FAA4F,EAAE,CAACA,EAAG,OAAO,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,QAAQ,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAWA,EAAI,QAAQ,UAAWE,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,MAAM,CAAC,SAAS,CAAC,UAAYF,EAAI,GAAGA,EAAI,cAAcA,EAAI,QAAQ,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAWA,EAAI,QAAQ,OAAQE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,4FAA4F,EAAE,CAACA,EAAG,OAAO,CAAC,SAAS,CAAC,UAAYF,EAAI,GAAGA,EAAI,cAAcA,EAAI,QAAQ,OAAQ,EAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAAvkD,UACTI,EAAkB,CAAC,E,sBC8CvB,MAAM0F,EAAW,CAChB,OACA,cACA,KACD,EAEA,EAAe,CACd,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,WAAY,GACZ,YAAa,GACb,SAAU,CAAC,EACX,QAAS,IACV,CACD,EAEA,SAAU,CACT,SAAU,CACT,MAAMC,EAAU,OAAO,OAAO,KAAK,QAAQ,EAC3C,OAAAA,EAAQ,KAAK,CAACj/B,EAAEsJ,IAAMtJ,EAAE,KAAK,cAAcsJ,EAAE,IAAI,CAAC,EAC3C21B,CACR,CACD,EAEA,SAAU,CACT,KAAK,IAAM,KAAK,KAAK,OAAO,EAE5B,KAAK,OAAS,KAAK,IAAI,QAAQ,aAAa,GAAG,OAC/C,KAAK,WAAa,CAAC,CAAE,KAAK,OAE1B,KAAK,QAAU,KAAK,IAAI,QAAQ,gBAAgB,GAAG,UAAU,aAAa,EAC1E,KAAK,YAAc,CAAC,CAAE,KAAK,OAC5B,EAEA,eAAgB,CACf,KAAK,OAAS,KACd,KAAK,IAAM,KACX,KAAK,WAAa,EACnB,EAEA,SAAU,CACT,KAAK,cAAc,CACpB,EAEA,QAAS,CACR,eAAgB,CACf,GAAK,CAAE,KAAK,OACX,OAED,MAAMC,EAAM,KAAK,OAAO,cAAc,QAEtC,GAAK,GAAEA,GAAO,CAAEA,EAAI,QAGpB,WAAUlV,KAASkV,EAAI,OAAO,EAAG,CAChC,GAAK,CAAElV,GAAO,SACb,SAED,IAAI96B,EAAOiwC,EAAsBnV,EAAM,QAAQ,EAExC96B,IACNA,EAAO86B,EAAM,iBAAiB,WAExB,KAAK,SAAS96B,CAAI,GACxB,KAAK,KAAK,KAAK,SAAUA,EAAM,CAC9B,GAAI86B,EAAM,QACV,KAAA96B,EACA,OAAQ,KAAK,WAAW86B,EAAM,QAAQ,EACtC,UAAW,KACX,OAAQ,IACT,CAAC,EAEF,KAAK,SAAS96B,CAAI,EAAE,aAAY,aAAU86B,EAAM,iBAAiB,MAAM,WAAaA,EAAM,iBAAiB,SAAS,EACpH,KAAK,SAAS96B,CAAI,EAAE,UAAS,aAAU86B,EAAM,iBAAiB,YAAY,MAAQA,EAAM,iBAAiB,MAAM,QAAQ,MAAQ,IAAI,CACpI,CAEO,KAAK,UACX,KAAK,QAAU,OAAO,OAAO,KAAK,OAAO,EAAE,CAAC,GAC9C,EAEA,cAAcsK,EAAQC,EAAQ,CAC7B,SAAO,iBAAcD,EAAQC,CAAM,CACpC,EAEA,WAAWnxB,EAAK,CACf,GAAK,KAAK,QACT,GAAI,CACH,OAAO,KAAK,QAAQA,CAAG,CACxB,OAAQ1U,EAAK,CACZ,KAAK,IAAI,IAAI,KAAK,yCAA0CA,CAAG,CAChE,CAED,OAAO0U,EAAI,KAAK,QAAQ,IACzB,EAEA,gBAAiB,CAChB,MAAMlG,EAAM,KAAK,MAAM,SAAS,MAC/BkZ,EAAO,KAAK,QAAQlZ,CAAG,EAExB,KAAK,QAAUkZ,CAChB,CACD,CACD,EAEA,SAAS+oB,EAAsB/7B,EAAK,CACnC,MAAM1L,EAAO,OAAO,KAAK0L,CAAG,EAAE,OAAOxT,GAAO,CAAEovC,EAAS,SAASpvC,CAAG,CAAC,EACpE,GAAK8H,EAAK,SAAW,EACpB,OAAOA,EAAK,CAAC,CACf,CAJS,EAAAynC,EAAA,yBCzJ+W,QAAe,E,eCOnY5F,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,kCAAkC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,iBAAiB,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA;AAAA,IAAgC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,eAAe,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,8BAA8B,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,UAAU,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAE,aAAcA,EAAI,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,OAAQE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,oBAAqB,cAAc,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,oDAAqD,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,OAAQ,SAASjqB,EAAI,CAAC,OAAOmqB,EAAG,MAAM,CAAC,IAAInqB,EAAI,IAAI,YAAY,YAAY,EAAE,CAACmqB,EAAG,IAAI,CAAC,YAAY,YAAY,MAAM,CAAC,KAAO,GAAG,EAAE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAAA,EAAO,eAAe,EAASH,EAAI,KAAK,YAAYjqB,EAAI,GAAG,CAAC,CAAC,CAAC,EAAEiqB,EAAI,GAAIjqB,EAAI,OAAQ,SAASmwB,EAAGliC,EAAI,CAAC,OAAOk8B,EAAG,OAAO,CAAC,IAAIl8B,CAAG,EAAE,CAACg8B,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGkG,EAAG,KAAOlG,EAAI,EAAEkG,EAAG,KAAMA,EAAG,KAAK,EAAIA,EAAG,KAAK,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAElG,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIjqB,EAAI,QAAS,SAASxB,EAAM,CAAC,OAAO2rB,EAAG,MAAM,CAAC,IAAI3rB,EAAM,IAAI,YAAY,WAAW,EAAE,CAACyrB,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGzrB,EAAM,KAAOyrB,EAAI,EAAEzrB,EAAM,KAAMA,EAAM,KAAK,EAAIA,EAAM,KAAK,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEyrB,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,OAAQE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,qBAAsB,iBAAiB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAE,0BAA2B,yHAA0H,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,OAAQ,SAASwB,EAAM,CAAC,OAAOtB,EAAG,MAAM,CAAC,IAAIsB,EAAM,IAAI,YAAY,0CAA0C,EAAE,CAACtB,EAAG,MAAM,CAAC,YAAY,mDAAmD,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,WAAW,MAAM,CAAC,IAAMsB,EAAM,IAAI,CAAC,CAAC,CAAC,CAAC,EAAExB,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAEsB,EAAM,SAAWA,EAAM,SAAUtB,EAAG,IAAI,CAAC,YAAY,8BAA8B,MAAM,CAAC,KAAO,GAAG,EAAE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAAA,EAAO,eAAe,EAASH,EAAI,KAAK,YAAYwB,EAAM,QAAQ,CAAC,CAAC,CAAC,EAAE,CAACxB,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGwB,EAAM,UAAYxB,EAAI,EAAEwB,EAAM,UAAWA,EAAM,IAAI,EAAIA,EAAM,IAAI,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEtB,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGwB,EAAM,UAAYxB,EAAI,EAAEwB,EAAM,UAAWA,EAAM,IAAI,EAAIA,EAAM,IAAI,EAAE;AAAA,MAAc,CAAC,CAAC,EAAExB,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,eAAe,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,oBAAqBwB,CAAK,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAExB,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,4BAA6B,CAAC,KAAMwB,EAAM,OAAO,CAAC,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAExB,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,WAAYE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,aAAa,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAE,sBAAuB,iGAAiG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,WAAY,SAASwB,EAAM,CAAC,OAAOtB,EAAG,MAAM,CAAC,IAAIsB,EAAM,IAAI,YAAY,0CAA0C,EAAE,CAACtB,EAAG,MAAM,CAAC,YAAY,mDAAmD,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,WAAW,MAAM,CAAC,IAAMsB,EAAM,IAAI,CAAC,CAAC,CAAC,CAAC,EAAExB,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAEsB,EAAM,SAAWA,EAAM,SAAUtB,EAAG,IAAI,CAAC,YAAY,8BAA8B,MAAM,CAAC,KAAO,GAAG,EAAE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAAA,EAAO,eAAe,EAASH,EAAI,KAAK,YAAYwB,EAAM,QAAQ,CAAC,CAAC,CAAC,EAAE,CAACxB,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGwB,EAAM,UAAYxB,EAAI,EAAEwB,EAAM,UAAWA,EAAM,IAAI,EAAIA,EAAM,IAAI,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEtB,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGwB,EAAM,UAAYxB,EAAI,EAAEwB,EAAM,UAAWA,EAAM,IAAI,EAAIA,EAAM,IAAI,EAAE;AAAA,MAAc,CAAC,CAAC,EAAExB,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,eAAe,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,oBAAqBwB,CAAK,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAExB,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,4BAA6B,CAAC,KAAMwB,EAAM,OAAO,CAAC,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAExB,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,yCAAyC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,mBAAmB,EAAE,CAACA,EAAG,IAAI,CAAC,YAAY,iEAAiE,MAAM,CAAC,aAAaF,EAAI,EAAE,eAAgB,sBAAsB,EAAE,KAAO,gCAAgC,OAAS,SAAS,IAAM,UAAU,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,IAAI,CAAC,YAAY,qEAAqE,MAAM,CAAC,aAAaF,EAAI,EAAE,eAAgB,SAAS,EAAE,KAAO,6BAA6B,OAAS,SAAS,IAAM,qBAAqB,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,IAAI,CAAC,YAAY,0DAA0D,MAAM,CAAC,aAAaF,EAAI,EAAE,cAAe,QAAQ,EAAE,KAAO,+CAA+C,OAAS,SAAS,IAAM,qBAAqB,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,YAAY,CAAC,MAAM,CAAC,IAAM,oEAAoE,QAAUF,EAAI,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAA9pL,UACTI,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,0BAA0B,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,+BAA+B,CAAC,CAAC,CAAC,CAAC,EAAE,UAAY,CAAC,IAAIF,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,8BAA8B,CAAC,CAAC,CAAC,CAAC,EAAE,UAAY,CAAC,IAAIF,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,0BAA0B,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,6BAA6B,CAAC,CAAC,CAAC,CAAC,CAAC,E,iCCDlP,QC0NnW,CACd,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,GAAI,EACJ,MAAO,GACP,OAAQ,KACR,WAAY,KACZ,OAAQ,KAAK,KAAK,UAAU,CAE7B,CACD,EAEA,SAAU,CACT,KAAK,aAAa,EAClB,KAAK,YAAY,EACjB,KAAK,QAAQ,QAAQ,GAAG,wBAAyB,KAAK,YAAa,IAAI,EAEvE,MAAM5vB,EAAM,KAAK,QAAQ,OAAO,EAChCA,EAAI,GAAG,0BAA2B,KAAK,aAAc,IAAI,EACzDA,EAAI,GAAG,qBAAsB,KAAK,aAAc,IAAI,CACrD,EAEA,eAAgB,CACf,KAAK,QAAQ,QAAQ,IAAI,wBAAyB,KAAK,YAAa,IAAI,EAExE,MAAMA,EAAM,KAAK,QAAQ,OAAO,EAChCA,EAAI,IAAI,0BAA2B,KAAK,aAAc,IAAI,EAC1DA,EAAI,IAAI,qBAAsB,KAAK,aAAc,IAAI,CACtD,EAcA,QAAS,CACR,cAAe,CACd,KAAK,OAAS,KAAK,KAAK,UAAU,CACnC,EAEA,cAAe,CACd,MAAMA,EAAM,KAAK,QAAQ,OAAO,EAC/B61B,EAAe71B,EAAI,QAAQ,QAAQ,EACnCsb,EAASua,GAAc,OAElBzwC,EAAM,CAAC,EACZ0wC,EAAU,CAAC,EACXC,EAAW,KAAK,IAAI,EAAK,MAAQ,EAAI,IAEtC,GAAKza,EACJ,SAAU,CAACl1B,EAAK8qC,CAAK,IAAK,OAAO,QAAQ5V,CAAM,EAAG,CACjD,MAAMzP,EAAUgqB,EAAa,eAAezvC,CAAG,EAC9C4vC,EAAS9E,EAAM,SAAWA,EAAM,SAAW6E,EAC3CE,EAAapqB,GAAWqlB,EAAM,SAAWA,EAAM,SAAW6E,EAE3D,GAAK,CAAEE,GAAc,EAAGD,GAAU,CAAEnqB,GAAW,CAAEqlB,EAAM,UACtD,SAED,MAAMgF,EAAO,CACZ,IAAA9vC,EACA,QAAAylB,EACA,KAAMqlB,EAAM,KACZ,KAAMA,EAAM,KACZ,UAAWA,EAAM,UACjB,QAASA,EAAM,QACf,SAAUA,EAAM,SAChB,QAASA,EAAM,OAChB,EAEK8E,GACJF,EAAQ,KAAKI,CAAI,EAEbD,GACJ7wC,EAAI,KAAK8wC,CAAI,CACf,CAED9wC,EAAI,KAAK,CAACoR,EAAEsJ,IAAMA,EAAE,QAAUtJ,EAAE,OAAO,EACvCs/B,EAAQ,KAAK,CAACt/B,EAAEsJ,IAAMA,EAAE,QAAUtJ,EAAE,OAAO,EAE3C,KAAK,OAASpR,EAAI,OAASA,EAAM,KACjC,KAAK,WAAa0wC,EAAQ,OAASA,EAAU,IAC9C,EAEA,aAAc,CACb,KAAK,MAAQ,KAAK,QAAQ,QAAQ,IAAI,eAAe,EAAI,OAAS,OACnE,CACD,CACD,E,eCnTI/F,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAACA,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAE,gBAAiBA,EAAI,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,YAAY,GAAG,CAAC,MAAQF,EAAI,IAAI,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,eAAgB,yBAAyB,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAA1a,UACTI,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,E,WCDyJ,QCwBnW,CACd,MAAO,CACN,MAAO,CACN,GAAI,CACL,CACD,EAEA,QAAS,CACR,MAAO,CACN,OAAO,aAAa,IAAI,EAAE,QAAQ,MAAM,EAAE,OAAO,CAClD,CACD,CACD,E,eC7BIG,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,6BAA6B,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,QAAQ,CAAC,YAAY,aAAa,MAAM,CAAC,IAAM,UAAU,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,UAAU,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,SAAS,CAAC,IAAI,WAAW,YAAY,4IAA4I,MAAM,CAAC,GAAK,UAAU,EAAE,GAAG,CAAC,OAASF,EAAI,cAAc,CAAC,EAAE,CAACE,EAAG,SAAS,CAAC,MAAM,CAAC,MAAQ,QAAQ,EAAE,SAAS,CAAC,SAAWF,EAAI,SAAS,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,QAAQ,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,SAAU,SAASyG,EAAK,CAAC,OAAOvG,EAAG,WAAW,CAAC,IAAIuG,EAAK,IAAI,MAAM,CAAC,MAAQA,EAAK,GAAG,CAAC,EAAEzG,EAAI,GAAIyG,EAAK,MAAO,SAAStuC,EAAE,CAAC,OAAO+nC,EAAG,SAAS,CAAC,IAAI/nC,EAAE,IAAI,SAAS,CAAC,SAAWA,EAAE,MAAQ6nC,EAAI,QAAQ,MAAQ7nC,EAAE,GAAG,CAAC,EAAE,CAAC6nC,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAG7nC,EAAE,MAAUA,EAAE,MAAS,KAAQA,EAAE,IAAO,IAAOA,EAAE,GAAG,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE6nC,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,IAAI,OAAO,YAAY,qIAAqI,GAAG,CAAC,KAAOF,EAAI,WAAW,MAAQA,EAAI,YAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,+DAA+D,MAAMF,EAAI,kBAAoB,sBAAsB,MAAM,CAAC,SAAWA,EAAI,gBAAgB,EAAE,GAAG,CAAC,MAAQA,EAAI,cAAc,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iCAAiC,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,SAAS,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,yCAAyC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,cAAc,YAAY,sBAAsB,MAAM,CAAC,GAAK,cAAc,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,WAAW,EAAE,GAAG,CAAC,OAASA,EAAI,OAAO,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,aAAa,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,kCAAmC,aAAa,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,eAAe,YAAY,sBAAsB,MAAM,CAAC,GAAK,eAAe,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,YAAY,EAAE,GAAG,CAAC,OAASA,EAAI,OAAO,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,cAAc,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,mCAAoC,YAAY,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sCAAsC,MAAMF,EAAI,YAAc,sBAAsB,MAAM,CAAC,SAAWA,EAAI,UAAU,EAAE,GAAG,CAAC,MAAQA,EAAI,OAAO,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iCAAiC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,SAAS,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,QAAQ,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,WAAW,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,yBAAyB,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,gBAAgB,YAAY,sBAAsB,MAAM,CAAC,GAAK,gBAAgB,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,aAAa,EAAE,GAAG,CAAC,OAASA,EAAI,SAAS,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,eAAe,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,oCAAqC,eAAe,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,kCAAkC,EAAE,CAAEF,EAAI,IAAKE,EAAG,IAAI,CAAC,IAAI,OAAO,YAAY,cAAc,MAAM,CAAC,KAAOF,EAAI,IAAI,WAAWA,EAAI,IAAI,oBAAoB,OAAO,qBAAqB,OAAO,kBAAkBA,EAAI,cAAgB,OAAS,QAAQ,mBAAmBA,EAAI,YAAc,OAAS,QAAQ,oBAAoBA,EAAI,aAAe,OAAS,QAAQ,eAAe,QAAQ,IAAM,sBAAsB,OAAS,QAAQ,EAAE,GAAG,CAAC,MAAQA,EAAI,WAAW,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAG,UAAUA,EAAI,GAAG,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,QAAQ,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,YAAY,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,kCAAkC,EAAE,CAAEF,EAAI,UAAWE,EAAG,YAAY,CAAC,MAAM,CAAC,KAAOF,EAAI,UAAU,IAAMA,EAAI,IAAI,YAAY,GAAM,aAAa,GAAM,cAAcA,EAAI,YAAY,eAAeA,EAAI,aAAa,OAASA,EAAI,MAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,QAAQ,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,gCAAiC,WAAW,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,kCAAkC,EAAE,CAAEF,EAAI,UAAWE,EAAG,YAAY,CAAC,MAAM,CAAC,KAAOF,EAAI,UAAU,IAAMA,EAAI,IAAI,YAAY,GAAK,aAAa,GAAM,cAAcA,EAAI,YAAY,eAAeA,EAAI,aAAa,OAASA,EAAI,MAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,QAAQ,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,iCAAkC,YAAY,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,kCAAkC,EAAE,CAAEF,EAAI,UAAWE,EAAG,YAAY,CAAC,MAAM,CAAC,KAAOF,EAAI,UAAU,IAAMA,EAAI,IAAI,aAAa,GAAK,cAAcA,EAAI,YAAY,eAAeA,EAAI,aAAa,OAASA,EAAI,MAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,QAAQ,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,iCAAkC,YAAY,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,QAAQA,EAAI,MAAM,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,QAAQ,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,UAAU,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,sDAAsD,EAAE,CAAEF,EAAI,IAAKE,EAAG,MAAM,CAAC,YAAY,kFAAkF,EAAE,CAAEF,EAAI,YAAaE,EAAG,MAAM,CAAC,YAAY,iBAAiB,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,gCAAgC,CAAC,CAAC,CAAC,EAAG,OAAOF,EAAI,UAAa,SAAUE,EAAG,OAAO,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,QAAQ,CAAC,CAAC,CAAC,EAAEE,EAAG,OAAO,CAAC,SAAS,CAAC,UAAYF,EAAI,GAAGA,EAAI,cAAcA,EAAI,SAAU,EAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAhtN,UACTI,EAAkB,CAAC,E,iCCkOvB,MAAMsG,EAAa,CAClB,mCACA,wCACA,kFACA,oEACA,6BACA,8CACA,wBACA,+CACA,mCACA,8DACA,sEACA,sCACA,yCACA,8CACD,EClPoX,EDoPrW,CACd,WAAY,CACX,YAAa,UACE,MAAM,iCACP,QAAQ,iBAAiB,EAAE,OAE1C,EAEA,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAMrsC,EAAQ,OAAO,QAAQ,MAC7B,IAAI2P,EAAM3P,GAAO,WACV2P,IACNA,KAAM,eAAY08B,CAAU,GAE7B,MAAMC,EAAQ,KAAK,eAAeD,EAAW,IAAIxmC,IAAM,CAAC,IAAKA,CAAC,EAAE,EAAG8J,CAAG,EAEtE,MAAO,CACN,QAASA,EACT,SAAU28B,EAAM,CAAC,EACjB,iBAAkB,GAClB,UAAWA,EAAM,CAAC,EAClB,UAAW,KACX,YAAa,GACb,WAAY,GACZ,SAAU,KACV,OAAQ,EAER,YAAatsC,GAAO,cAAgB,GACpC,aAAcA,GAAO,eAAiB,GACtC,cAAeA,GAAO,YAAc,GAEpC,OAAQ,CACP,KAAM,IAAIpF,IAAS,KAAK,KAAK,QAAQ,EAAE,KAAK,GAAGA,CAAI,EACnD,GAAI,IAAIA,IAAS,KAAK,KAAK,QAAQ,EAAE,GAAG,GAAGA,CAAI,EAC/C,IAAK,IAAIA,IAAS,KAAK,KAAK,QAAQ,EAAE,IAAI,GAAGA,CAAI,CAClD,CACD,CACD,EAEA,SAAU,CACT,KAAM,CACL,GAAI,CACH,OAAO,IAAI,IAAI,KAAK,OAAO,EAAE,SAAS,CACvC,MAAa,CACZ,OAAO,IACR,CACD,CACD,EAEA,MAAO,CACN,SAAU,CACF,KAAK,YACX,KAAK,MAAM,KAAK,MAAQ,KAAK,QAC/B,EAEA,KAAM,CAIL,GAHA,KAAK,YAAY,EACjB,KAAK,UAAU,EAEV,KAAK,cAAgB,CACzB,MAAMuR,EAAO,KAAK,MAAM,KACxB,GAAK,CAAEA,GAAQ,CAAE,KAAK,KACrB,OAED,MAAMogC,EAAO,KAAK,KAAK,QAAQ,UAAU,GAAG,KAC5C,GAAK,CAAEA,EACN,OAEDA,EAAK,MAAMpgC,CAAI,EACf,WAAW,IAAMogC,EAAK,OAAOpgC,CAAI,EAAG,GAAG,CACxC,CACD,EAEA,WAAY,CACX,KAAK,WAAW,CACjB,EAEA,eAAgB,CACf,MAAMA,EAAO,KAAK,MAAM,KACxB,GAAK,CAAEA,GAAQ,CAAE,KAAK,KACrB,OAED,MAAMogC,EAAO,KAAK,KAAK,QAAQ,UAAU,GAAG,KACrCA,IAGF,KAAK,cACTA,EAAK,OAAOpgC,CAAI,EAEhBogC,EAAK,MAAMpgC,CAAI,EAEjB,CACD,EAEA,SAAU,CACT,KAAK,KAAO,KAAK,KAAK,QAAQ,EAC9B,KAAK,SAAW,KAAK,KAAK,QAAQ,UAAU,EAE5C,KAAK,aAAY,YAAS,KAAK,QAAS,IAAM,EAAI,EAClD,KAAK,eAAc,YAAS,KAAK,YAAa,GAAG,EACjD,KAAK,cAAa,YAAS,KAAK,WAAY,GAAG,EAC/C,KAAK,gBAAe,YAAS,KAAK,aAAc,GAAG,EACnD,KAAK,kBAAiB,YAAS,KAAK,eAAgB,GAAG,EACvD,KAAK,qBAAoB,YAAS,KAAK,kBAAmB,GAAG,EAE7D,KAAK,KAAK,GAAG,4BAA6B,KAAK,gBAAiB,IAAI,EACpE,KAAK,SAAS,GAAG,sCAAuC,KAAK,eAAgB,IAAI,EACjF,KAAK,eAAe,EACpB,KAAK,kBAAkB,CACxB,EAEA,SAAU,CAMT,GALA,KAAK,YAAY,EAEjB,KAAK,MAAM,KAAK,MAAQ,KAAK,QAGxB,KAAK,cAAgB,CACzB,MAAMA,EAAO,KAAK,MAAM,KACxB,GAAK,CAAEA,GAAQ,CAAE,KAAK,KACrB,OAED,MAAMogC,EAAO,KAAK,KAAK,QAAQ,UAAU,GAAG,KAC5C,GAAK,CAAEA,EACN,OAEDA,EAAK,OAAOpgC,CAAI,CACjB,CACD,EAEA,eAAgB,CACX,KAAK,KACR,KAAK,GAAG,MAAM,EACd,KAAK,GAAK,MAGX,KAAK,KAAK,IAAI,4BAA6B,KAAK,gBAAiB,IAAI,EACrE,KAAK,SAAS,IAAI,sCAAuC,KAAK,eAAgB,IAAI,EAClF,KAAK,KAAO,KACZ,KAAK,SAAW,IACjB,EAEA,QAAS,CACR,YAAYpR,EAAO,CAClB,OAAO,KAAK,KAAK,gBAAgBA,CAAK,CACvC,EAEA,gBAAiB,CAChB,KAAK,kBAAkB,EACvB,KAAK,eAAe,CACrB,EAEA,mBAAoB,CACnB,MAAMoB,EAAW,KAAK,SAAS,IAAI,4BAA4B,EAC/D,GAAK,CAAEA,EAAS,QAAU,CACpB,KAAK,KACT,KAAK,GAAG,MAAM,EACd,KAAK,GAAK,MAGX,KAAK,WAAa,GAClB,MACD,CAEK,KAAK,KAGV,KAAK,GAAK,IAAI,YAAY,GAAGA,EAAS,KAAK,MAAM,EACjD,KAAK,GAAG,iBAAiB,QAAS,IAAM,CACvC,KAAK,WAAa,EACnB,CAAC,EACD,KAAK,GAAG,iBAAiB,UAAW,IAAM,CACpC,KAAK,aACT,KAAK,WAAa,GAClB,KAAK,UAAU,EAEjB,CAAC,EACF,EAEA,WAAY,CACX,GAAI,CACH,OAAO,QAAQ,aAAa,CAC3B,GAAG,OAAO,QAAQ,MAClB,WAAY,KAAK,QACjB,aAAc,KAAK,YACnB,cAAe,KAAK,aACpB,WAAY,KAAK,aAClB,EAAG,SAAS,KAAK,CAElB,MAAa,CAEb,CACD,EAEA,eAAeqwC,EAAU78B,EAAK,CAC7B,MAAMtU,EAAM,CAAC,EACZoxC,EAAY,CAAC,EAET98B,IAAQ,SACZA,EAAM,KAAK,SAEZ,IAAI06B,EAAY,GAEhB,UAAUqC,KAAWF,EAAU,CAC9B,MAAMG,EAAWD,EAAQ,UAAY,UACrC,IAAIN,EAAOK,EAAUE,CAAQ,EACtBP,IACNA,EAAOK,EAAUE,CAAQ,EAAI,CAAC,EAC9BtxC,EAAI,KAAK,CACR,IAAKsxC,EACL,MAAOP,CACR,CAAC,GAGGz8B,IAAQ+8B,EAAQ,MACpBrC,EAAY,IAEb+B,EAAK,KAAKM,CAAO,CAClB,CAEA,OAAArxC,EAAI,KAAK,CAACoR,EAAEsJ,IAAMtJ,EAAE,IAAI,cAAcsJ,EAAE,GAAG,CAAC,EAErC,CAAC1a,EAAKgvC,CAAS,CACvB,EAEA,MAAM,gBAAiB,CACtB,GAAK,KAAK,iBACT,OAED,KAAK,iBAAmB,GACxB,IAAIluC,EAAW,KAAK,SAAS,IAAI,4BAA4B,EAAE,MAC1DA,IAAa,mBACjBA,EAAW,kBAAgB,KAAK,OAEjC,IAAIqwC,EACJ,GAAI,CACHA,GAAY,QAAM,WAAQ,MAAM,GAAGrwC,CAAQ,WAAW,EAAG,IAAK,EAAE,KAAKutC,GAAQA,EAAK,GAAKA,EAAK,KAAK,EAAI,IAAI,GAAG,QAC7G,OAAQvuC,EAAK,CACZ,QAAQ,MAAMA,CAAG,CAClB,CAEOqxC,IACNA,EAAW,CAAC,GAEb,MAAMI,EAAOJ,EAAS,IAAI3mC,GAAKA,EAAE,GAAG,EACpC,UAAU8J,KAAO08B,EACTO,EAAK,SAASj9B,CAAG,GACvB68B,EAAS,KAAK,CACb,IAAA78B,EACA,SAAU,QACX,CAAC,EAEH,MAAMtU,EAAM,KAAK,eAAemxC,CAAQ,EAExC,KAAK,SAAWnxC,EAAI,CAAC,EACrB,KAAK,UAAYA,EAAI,CAAC,EACtB,KAAK,iBAAmB,EACzB,EAEA,gBAAgBsU,EAAK,EACf,CAAEA,GAAQA,GAAOA,IAAQ,KAAK,MAClC,KAAK,WAAW,CAClB,EAEA,MAAM,YAAa,CAGlB,GAFA,KAAK,SAAW,OAChB,KAAK,OAAS,EACT,CAAE,KAAK,UAAY,CACvB,KAAK,YAAc,GACnB,MACD,CAEA,KAAK,YAAc,GACnB,GAAI,CACH,MAAM1U,EAAO,MAAM,KAAK,KAAK,cAAc,KAAK,GAAG,EACnD,KAAK,SAAWA,EAChB,KAAK,OAAS,KAAK,UAAUA,CAAI,EAAE,MACpC,OAAQE,EAAK,CACZ,KAAK,SAAW;AAAA;AAAA,EAAYA,EAAI,SAAS,CAAC,EAC3C,CACA,KAAK,YAAc,EACpB,EAEA,aAAc,CACb,GAAK,CAAE,KAAK,IACX,OAAO,KAAK,UAAY,KAEzB,MAAMka,EAAQ,CACb,KAAM,OACN,WAAY,GACZ,QAAS,GACT,IAAK,KAAK,IACV,KAAM,KAAK,GACZ,EAEA,KAAK,UAAY,KAAK,KAAK,eAAe,KAAK,QAAQ,KAAK,KAAK,KAAMA,CAAK,CAC7E,EAEA,SAAU,CACT,KAAK,KAAK,eAAe,KAAK,GAAG,CAClC,EAEA,gBAAiB,CAChB,MAAMw3B,EAAY,KAAK,MAAM,SAAS,MAEjCA,GAAaA,IAAc,UAC/B,KAAK,QAAUA,EACf,KAAK,UAAY,IAEjB,KAAK,UAAY,EACnB,EAEA,YAAa,CACZ,MAAMtwC,EAAQ,KAAK,MAAM,KAAK,MAC9B,IAAIuwC,EAAS,GACb,UAAU3wC,KAAY,KAAK,SAAU,CACpC,UAAUwT,KAAOxT,EAAS,MACzB,GAAKwT,IAAQpT,EAAQ,CACpBuwC,EAAS,GACT,KACD,CAGD,GAAK,CAAEA,EACN,KACF,CAEA,KAAK,UAAYA,EACZ,KAAK,YACT,KAAK,QAAU,KAAK,MAAM,KAAK,MACjC,EAEA,cAAe,CACd,KAAK,WAAW,CACjB,EAEA,SAAU,CACT,KAAK,YAAc,KAAK,MAAM,YAAY,QAC1C,KAAK,aAAe,KAAK,MAAM,aAAa,QAE5C,KAAK,UAAU,CAChB,EAEA,WAAY,CACX,KAAK,cAAgB,KAAK,MAAM,cAAc,QAE9C,KAAK,UAAU,CAChB,EAEA,cAAc/L,EAAQC,EAAQ,CAC7B,SAAO,iBAAcD,EAAQC,CAAM,CACpC,CACD,CAED,E,eEjlBIgF,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,4DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,6HAA6H,MAAM,CAAE,UAAWF,EAAI,WAAaA,EAAI,UAAW,UAAWA,EAAI,UAAW,MAAOA,EAAI,KAAM,EAAE,MAAO,CAAC,OAAQA,EAAI,CAAC,EAAG,GAAG,CAAC,QAAUA,EAAI,QAAQ,MAAQA,EAAI,OAAO,CAAC,EAAE,CAACE,EAAG,SAAS,CAAC,IAAI,SAAS,YAAY,kFAAkF,GAAG,CAAC,SAAW,SAASC,EAAO,CAAC,OAAOH,EAAI,YAAYG,CAAM,CAAC,CAAC,CAAC,EAAE,CAACD,EAAG,KAAK,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA;AAAA,GAA4B,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,0BAA0B,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,iBAAiB,EAAE,CAACA,EAAG,QAAQ,CAAC,YAAY,qBAAqB,MAAM,CAAC,IAAM,sBAAsB,CAAC,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,mBAAoB,iBAAiB,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,aAAa,EAAE,CAACF,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAO,WAAW,OAAO,CAAC,EAAE,YAAY,yGAAyG,MAAM,CAAC,GAAK,uBAAuB,YAAcA,EAAI,EAAE,mBAAoB,iBAAiB,EAAE,KAAO,SAAS,eAAiB,MAAM,YAAc,MAAM,aAAe,MAAM,WAAa,OAAO,EAAE,SAAS,CAAC,MAASA,EAAI,KAAM,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAIA,EAAO,OAAO,YAAqBH,EAAI,MAAMG,EAAO,OAAO,MAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEH,EAAI,GAAG,GAAG,EAAG,CAACA,EAAI,WAAa,CAACA,EAAI,UAAWE,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,MAAQ,CAAEA,EAAI,KAAK,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,sBAAsB,EAAE,CAACA,EAAG,SAAS,CAAC,MAAMF,EAAI,MAAQ,gBAAkB,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAIA,EAAI,UAAwVA,EAAI,GAAG,EAApVE,EAAG,SAAS,CAAC,YAAY,kEAAkE,GAAG,CAAC,MAAQF,EAAI,MAAM,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,kEAAkE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,mBAAoB,+BAA+B,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAIA,EAAI,UAAoPA,EAAI,GAAG,EAAhPE,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQF,EAAI,MAAM,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,sBAAsB,EAAE,CAACA,EAAG,SAAS,CAAC,MAAM,CAAC,wBAAyB,CAACF,EAAI,UAAW,uBAAwBA,EAAI,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAIA,EAAI,UAAqGA,EAAI,GAAG,EAAjGE,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQF,EAAI,KAAK,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,CAAC,CAAC,CAAU,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,UAAU,CAAC,YAAY,oFAAoF,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,0HAA0H,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,qBAAqB,EAAE,CAACA,EAAG,mBAAmB,CAAC,MAAM,CAAC,QAAUF,EAAI,OAAO,EAAE,GAAG,CAAC,SAAWA,EAAI,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,oFAAoF,EAAE,CAACA,EAAG,YAAY,CAAC,MAAM,CAAC,QAAU,sDAAsD,CAAC,EAAE,CAAEF,EAAI,WAAYE,EAAG,SAAS,CAAC,YAAY,qBAAqB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,6CAA6C,GAAG,CAAC,MAAQF,EAAI,OAAO,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,UAAqBA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,eAAe,CAAC,EAAE;AAAA,QAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,YAAY,CAAC,MAAM,CAAC,eAAeF,EAAI,YAAY,MAAQA,EAAI,IAAI,OAASA,EAAI,OAAO,QAAUA,EAAI,OAAO,EAAE,GAAG,CAAC,cAAcA,EAAI,WAAW,YAAYA,EAAI,SAAS,gBAAgBA,EAAI,aAAa,SAAWA,EAAI,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,mCAAmC,EAAE,CAACA,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,oBAAqB,oBAAqB,CAAC,QAASA,EAAI,QAAQ,SAAS,CAAC,CAAC,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iBAAiB,EAAE,CAAEF,EAAI,QAAQ,OAAQE,EAAG,IAAI,CAAC,YAAY,6BAA6B,MAAM,CAAC,KAAQ,2DAA8DF,EAAI,QAAQ,OAAS,OAAS,SAAS,IAAM,qBAAqB,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,QAAQ,OAAO,MAAM,EAAE,CAAC,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,QAAQ,IAAI,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,YAAY,CAAC,MAAM,CAAC,QAAU,gBAAgB,CAAC,EAAE,CAAEF,EAAI,YAAaE,EAAG,YAAY,CAAC,IAAI,OAAO,MAAM,CAAC,QAAUF,EAAI,QAAQ,KAAOA,EAAI,YAAY,OAASA,EAAI,OAAO,WAAWA,EAAI,OAAO,EAAE,GAAG,CAAC,cAAcA,EAAI,WAAW,YAAYA,EAAI,SAAS,SAAWA,EAAI,QAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAppJ,UACTI,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,oJAAoJ,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,cAAc,CAAC,CAAC,CAAC,CAAC,EAAE,UAAY,CAAC,IAAIF,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,sBAAsB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,gBAAgB,CAAC,CAAC,CAAC,CAAC,EAAE,UAAY,CAAC,IAAIF,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,sBAAsB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,E,+BCkI3qB,MAAMkH,EAAc,CACnB,UACD,ECrIkX,EDuInW,CACd,MAAO,CACN,MAAM1xC,EAAM,KAAK,OAAO,KAExB,OAAAA,EAAI,KAAI,kBAAe,EAEhBA,CACR,EAEA,SAAU,CACT,QAAS,CACR,IAAIo7B,EAAQ,KAAK,MAAM,YAAY,EAE/BnL,EAAQ,IAAI,IAiBhB,OAhBAmL,EAAQA,EAAM,QAAQ,4BAA6B,CAACnvB,EAAOgpB,EAAMjN,IAC3D0pB,EAAY,SAASzc,CAAI,GAC7BhF,EAAM,IAAIgF,CAAI,EACP,IAGDhpB,CACP,EAEDmvB,EAAQA,EAAM,KAAK,EACZA,EAAM,SACZA,EAAQ,MAEFnL,EAAM,OACZA,EAAQ,MAEJ,CAAEmL,GAAS,CAAEnL,EACV,KAED,CACN,MAAAA,EACA,MAAAmL,CACD,CACD,CACD,EAEA,MAAO,CACN,WAAY,CACX,KAAK,WAAW,CACjB,CACD,EAEA,SAAU,CACT,KAAK,QAAQ,QAAQ,UAAU,CAChC,EAEA,WAAY,CACX,KAAK,QAAQ,QAAQ,aAAa,CACnC,EAEA,SAAU,CACT,KAAK,WAAW,EAEhB,KAAK,WAAa,KAAK,aAAa,KAAK,IAAI,EAC7C,OAAO,iBAAiB,SAAU,KAAK,UAAU,CAClD,EAEA,eAAgB,CACf,KAAK,YAAY,EAEZ,KAAK,aACT,OAAO,oBAAoB,SAAU,KAAK,UAAU,EACpD,KAAK,WAAa,KAEpB,EAEA,QAAS,CACR,SAAU,CACT,KAAK,YAAY,KAAK,GAAG,EACzB,KAAK,WAAa,EACnB,EAEA,YAAY17B,EAAO,CACbA,EAAM,SAAW,KAAK,MAAM,QAGjC,KAAK,OAAOA,CAAK,CAClB,EAEA,eAAgB,CACf,MAAM4iB,EAAS,KAAK,MAAM,SAAS,MAClCqvB,EAAc,KAAK,QAAQ,SAASrvB,CAAM,EAEtCqvB,IACJ,KAAK,QAAQ,eAAiBA,EAChC,EAEA,WAAWnqB,EAAM,CAChB,GAAK,KAAK,MAAM,MAAQ,KAAK,MAAM,KAAK,gBAClC,KAAK,MAAM,KAAK,eAAe,KAAK,YAAaA,CAAI,IAAM,GAC/D,OAKF,GAFA,KAAK,SAASA,CAAI,EAEbA,EAAK,SACT,OAAO,KAAK,SAAS,MAAM,QAAQA,EAAK,QAAQ,EAAIA,EAAK,SAAWA,EAAK,SAAS,MAAM,KAAK,CAAC,EAE/F,KAAK,YAAcA,EACnB,KAAK,aAAe,GAEpB,IAAIlT,EACC,KAAK,YACTA,EAAM,IAAI,IAAI,SAAS,IAAI,EAC3BA,EAAI,aAAa,IAAI,eAAgBkT,EAAK,QAAQ,EAClDlT,EAAMA,EAAI,SAAS,GAGpB,GAAI,CACH,OAAO,QAAQ,aAAa,CAC3B,GAAG,OAAO,QAAQ,MAClB,MAAOkT,EAAK,QACb,EAAG,SAAS,MAAOlT,CAAG,CACvB,MAAa,CAEb,CAEA,IAAI/E,EAAUiY,EACd,KAAMjY,EAAUA,EAAQ,QACvBA,EAAQ,SAAW,EACrB,EAEA,YAAa,CACP,KAAK,UACT,KAAK,YAAY,EAEjB,KAAK,WAAW,CAClB,EAEA,aAAc,CACR,KAAK,WACT,KAAK,SAAS,QAAQ,EACtB,KAAK,SAAW,KAElB,EAEA,YAAa,CACZ,KAAK,UAAU,IAAM,CACb,KAAK,YACX,KAAK,SAAW,IAAS,KAAK,IAAK,CAClC,OAAQ,KAAK,IAAI,cAAc,QAAQ,EACvC,gBAAiB,GACjB,UAAW,GACX,YAAa,IAAM,KAAK,QAAQ,EAChC,aAAc,IAAM,KAAK,QAAQ,EACjC,SAAS7P,EAAO,CACf,OAAOA,EAAM,OAAO,QAAQ,QAAQ,GAAK,IAC1C,CACD,CAAC,EACH,CAAC,CACF,EAEA,SAAU,CACF,KAAK,YACX,KAAK,KAAI,kBAAe,EAC1B,EAEA,cAAe,CACT,KAAK,UACT,KAAK,SAAS,OAAO,CACvB,EAEA,YAAYoJ,EAAM,CACjB,IAAI0e,EACJ,UAAUxmB,KAAO8H,EAEhB,GADA0e,EAAO,KAAK,QAAQxmB,CAAG,EAClBwmB,EACJ,MAGF,MAAMoqB,EAAO,CAAC,EAEd,KAAMpqB,GAAQA,EAAK,MACbA,EAAK,KAAOA,EAAK,QAAQ,MAC7BoqB,EAAK,KAAK,CAACpqB,EAAK,OAAQA,EAAK,OAAO,KAAK,QAAQA,CAAI,CAAC,CAAC,EAExDA,EAAOA,EAAK,OAGb,GAAOA,GAGF,OAAK,MAAM,MAAQ,KAAK,MAAM,KAAK,gBAClC,KAAK,MAAM,KAAK,eAAe,KAAK,YAAaA,CAAI,IAAM,IAQjE,IAJA,KAAK,WAAWA,CAAI,EAIfoqB,EAAK,OAAS,CAClB,MAAM1lC,EAAO,MAAM,CAClB,MAAM2lC,EAASD,EAAK,IAAI,EACnBC,IAAS,CAAC,GAAG,YACjBA,EAAO,CAAC,EAAE,WAAW,OAAOA,EAAO,CAAC,CAAC,EAEjCD,EAAK,QACT,KAAK,UAAU1lC,CAAI,CACrB,EAPa,QASb,KAAK,UAAUA,CAAI,CACpB,CAEA,KAAK,UAAU,IAAM,CACpB,MAAMjK,EAAK,KAAK,IAAI,cAAc,gCAAgCulB,EAAK,QAAQ,IAAI,EAC9EvlB,GACJA,EAAG,eAAe,CACpB,CAAC,EACF,CACD,CACD,E,eEvVI0oC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAAEF,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,yBAAyB,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,gCAAgC,CAAC,CAAC,CAAC,EAAEA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAG,QAAUA,EAAI,IAAMA,EAAI,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAA/U,UACTI,EAAkB,CAAC,ECDyV,QCWjW,CACd,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CAGN,MAAO,CACN,IAHW,KAAK,KAAK,IAIrB,QAAS,GACT,GAAI,IACL,CACD,EAEA,SAAU,CACT,KAAK,KAAK,CACX,EAEA,QAAS,CACR,MAAM,MAAO,CACZ,KAAK,IAAM,MAAM,SAAyC,KAAM,KAAK,GAAG,KAAK,GAAG,QAChF,KAAK,QAAU,EAChB,CACD,CACD,E,eC3BIC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAQD,EAAI,KAAK,SAAUE,EAAG,MAAM,CAAC,MAAMF,EAAI,OAAO,EAAE,CAAIA,EAAI,KAAK,UAAkIA,EAAI,GAAG,EAA9HE,EAAG,SAAS,CAAC,YAAY,gBAAgB,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAEA,EAAI,KAAK,SAAUA,EAAI,KAAK,KAAK,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,YAAaE,EAAG,UAAU,CAAC,YAAY,yBAAyB,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAEA,EAAI,KAAK,cAAeA,EAAI,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,gBAAiB,SAAS,EAAE,CAAC,OAAOE,EAAG,MAAM,CAAC,IAAI,EAAE,SAAS,MAAM,CAAC,qBAAsBF,EAAI,SAAW,CAAEA,EAAI,WAAW,CAAC,CAAC,CAAC,EAAE,CAACE,EAAG,EAAE,UAAU,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUF,EAAI,QAAQ,KAAO,EAAE,OAASA,EAAI,MAAM,EAAE,GAAG,CAAC,SAAWA,EAAI,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,CAAC,EAA5vB,UACTI,EAAkB,CAAC,ECDgW,QC4BxW,CACd,MAAO,CAAC,OAAQ,UAAW,QAAQ,EAEnC,SAAU,CACT,SAAU,CACT,OAAO,KAAK,WAAW,KAAK,IAAI,CACjC,EAEA,iBAAkB,CACjB,MAAK,CAAE,KAAK,MAAQ,CAAE,KAAK,KAAK,SACxB,CAAC,EAEF,KAAK,QAAQ,aAGb,KAAK,KAAK,SAAS,OAAOljB,GAAQ,KAAK,WAAWA,CAAI,CAAC,EAFtD,KAAK,KAAK,QAGnB,EAEA,SAAU,CACT,MAAO,CACN,sBACA,KAAK,KAAK,SAAW,YAAc,aACpC,CACD,CACD,EAEA,QAAS,CACR,YAAYjoB,EAAM,CACjB,KAAK,MAAM,WAAY,GAAGA,CAAI,CAC/B,EAEA,WAAWioB,EAAMsqB,EAAa,GAAO,CACpC,GAAK,CAAE,KAAK,QAAUtqB,EAAK,UAC1B,MAAO,GAER,GAAK,KAAK,OAAO,OACX,KAAK,OAAO,MAAM,IAAI,UAAU,EAAI,CAExC,GAAK,CAAEsqB,GACN,UAAU9wC,IAAO,CAAC,OAAQ,WAAY,OAAO,EAC5C,GAAKwmB,EAAKxmB,CAAG,GACZ,UAAUoH,KAASof,EAAKxmB,CAAG,EAC1B,GAAK,KAAK,WAAWoH,CAAK,EACzB,MAAO,IAGZ,GAAK,CAAEof,EAAK,SAAW,CAAE,KAAK,QAAQ,eAAe,IAAIA,EAAK,OAAO,EACpE,MAAO,EACT,CAGD,MAAK,OAAK,OAAO,QACX,CAAEA,EAAK,cAAgB,CAAEA,EAAK,aAAa,SAAS,KAAK,OAAO,KAAK,GAK5E,CACD,CACD,E,eChFImjB,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAIA,EAAI,YAAa,SAAS,EAAE,CAAC,OAAOE,EAAG,OAAO,CAAC,IAAI,EAAE,QAAQ,EAAE,CAAE,IAAMF,EAAI,KAAME,EAAG,IAAI,CAAC,MAAM,CAAC,KAAO,GAAG,EAAE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAAA,EAAO,eAAe,EAASH,EAAI,MAAM,cAAe,EAAG,EAAK,CAAC,CAAC,CAAC,EAAE,CAACA,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,EAAE,SAAU,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAG,IAAMA,EAAI,KAAME,EAAG,SAAS,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,EAAE,SAAU,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAG,IAAMA,EAAI,KAAM,CAACA,EAAI,GAAG,OAAI,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,aAAcE,EAAG,OAAO,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG,QAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,KAAK,aAAc,SAAS,EAAE,CAAC,MAAO,CAAE,EAAE,MAAQ,EAAE,KAAK,WAAW,GAAG,EAAGE,EAAG,IAAI,CAAC,YAAY,aAAa,MAAM,CAAC,KAAO,GAAG,EAAE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACA,EAAO,eAAe,EAAEH,EAAI,MAAM,WAAY,EAAE,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAACA,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,EAAE,SAAU,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,EAAG,EAAE,KAAME,EAAG,aAAa,CAAC,YAAY,aAAa,MAAM,CAAC,KAAO,EAAE,KAAK,MAAQ,EAAE,KAAK,CAAC,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,EAAE,SAAU,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,EAAG,EAAE,SAAUE,EAAG,IAAI,CAAC,YAAY,aAAa,MAAM,CAAC,KAAO,GAAG,EAAE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAAA,EAAO,eAAe,EAASH,EAAI,SAAS,MAAM,OAAQ,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,CAACA,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,EAAE,SAAU,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,EAAG,EAAE,OAAQE,EAAG,IAAI,CAAC,YAAY,aAAa,MAAM,CAAC,KAAO,GAAG,EAAE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAAA,EAAO,eAAe,EAASH,EAAI,MAAM,cAAe,EAAE,OAAQ,EAAK,CAAC,CAAC,CAAC,EAAE,CAACA,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,EAAE,SAAU,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAAQ,eAAe,WAAaA,EAAI,KAAK,kBAAoB,GAAOE,EAAG,UAAU,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,kDAAkD,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,4BAA4B,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,yCACrgE,iMACD,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,2CAC5D,2GACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,GAAI,CAAEA,EAAI,QAAQ,eAAe,MAAQ,CAAEA,EAAI,QAAQ,eAAe,UAAYA,EAAI,KAAK,kBAAoB,GAAOE,EAAG,UAAU,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,kDAAkD,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,6BAA6B,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAKA,EAAI,QAAQ,eAAe,QAC3WE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,wCAC1J,2JACuD,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAH4ZE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,wCAC9gB,6FAA6F,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAErC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAAQ,eAAe,KAAO,CAAEA,EAAI,QAAQ,eAAe,eAAiBA,EAAI,KAAK,kBAAoB,GAAOE,EAAG,UAAU,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,kDAAkD,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,yCAAyC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gCACvjB,+IAA+I,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAAQ,WAAYE,EAAG,UAAU,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,kDAAkD,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,+BAA+B,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG;AAAA;AAAA,KAAaA,EAAI,GAAGA,EAAI,EAAE,6BACzgB,yEAAyE,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,YAAaE,EAAG,UAAU,CAAC,YAAY,uBAAuB,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAEA,EAAI,KAAK,eAAmBA,EAAI,KAAK,SAAY,eAAiBA,EAAI,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAG,CAAEA,EAAI,KAAK,UAAY,CAAEA,EAAI,KAAK,SAAS,QAAUA,EAAI,KAAK,kBAAmB,CAACE,EAAG,KAAK,CAAC,YAAY,uBAAuB,EAAEF,EAAI,GAAIA,EAAI,aAAc,SAAS,EAAE,CAAC,OAAOE,EAAG,KAAK,CAAC,IAAI,EAAE,SAAS,YAAY,YAAY,MAAM,CAAC,qBAAsB,CAAEF,EAAI,WAAW,CAAC,CAAC,CAAC,EAAE,CAACE,EAAG,IAAI,CAAC,MAAM,CAAC,KAAO,GAAG,EAAE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,MAAM,cAAe,EAAG,EAAK,CAAC,CAAC,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,EAAE,SAAU,EAAE,KAAK,CAAC,EAAE;AAAA,MAAc,EAAGA,EAAI,OAAQE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,EAAG,EAAE,OAAQE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,gBAAiB,SAAS,EAAE,CAAC,OAAOE,EAAG,MAAM,CAAC,IAAI,EAAE,SAAS,MAAM,CAAC,qBAAsB,CAAEF,EAAI,WAAW,CAAC,CAAC,CAAC,EAAE,CAACE,EAAG,EAAE,UAAU,CAAC,IAAI,WAAW,SAAS,GAAK,IAAI,YAAY,MAAM,CAAC,QAAUF,EAAI,QAAQ,KAAO,EAAE,WAAWA,EAAI,QAAQ,OAASA,EAAI,MAAM,EAAE,GAAG,CAAC,cAAcA,EAAI,WAAW,YAAYA,EAAI,SAAS,SAAWA,EAAI,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EATl2C,UAUTI,EAAkB,CAAC,ECV2V,QCuJnW,CACd,MAAO,CAAC,OAAQ,UAAW,SAAU,SAAS,EAE9C,SAAU,CACT,aAAc,CACb,MAAM1qC,EAAM,CAAC,EACb,IAAIuP,EAAU,KAAK,KACnB,KAAMA,GACLvP,EAAI,QAAQuP,CAAO,EACnBA,EAAUA,EAAQ,OAGnB,OAAOvP,CACR,EAEA,cAAe,CACd,MAAK,CAAE,KAAK,MAAQ,CAAE,KAAK,KAAK,MACxB,CAAC,EAEF,KAAK,QAAQ,aAGb,KAAK,KAAK,MAAM,OAAOwnB,GAAQ,KAAK,WAAWA,CAAI,CAAC,EAFnD,KAAK,KAAK,KAGnB,EAEA,iBAAkB,CACjB,MAAK,CAAE,KAAK,MAAQ,CAAE,KAAK,KAAK,SACxB,CAAC,EAEF,KAAK,QAAQ,aAGb,KAAK,KAAK,SAAS,OAAOA,GAAQ,KAAK,WAAWA,CAAI,CAAC,EAFtD,KAAK,KAAK,QAGnB,CACD,EAEA,QAAS,CACR,WAAWA,EAAMsqB,EAAa,GAAO,CACpC,GAAK,CAAE,KAAK,QAAUtqB,EAAK,UAC1B,MAAO,GAER,GAAK,KAAK,OAAO,OACX,KAAK,OAAO,MAAM,IAAI,UAAU,EAAI,CAExC,GAAK,CAAEsqB,GACN,UAAU9wC,IAAO,CAAC,OAAQ,WAAY,OAAO,EAC5C,GAAKwmB,EAAKxmB,CAAG,GACZ,UAAUoH,KAASof,EAAKxmB,CAAG,EAC1B,GAAK,KAAK,WAAWoH,CAAK,EACzB,MAAO,IAGZ,GAAK,CAAEof,EAAK,SAAW,CAAE,KAAK,QAAQ,eAAe,IAAIA,EAAK,OAAO,EACpE,MAAO,EACT,CAGD,MAAK,OAAK,OAAO,QACX,CAAEA,EAAK,cAAgB,CAAEA,EAAK,aAAa,SAAS,KAAK,OAAO,KAAK,GAK5E,EAEA,aAAaA,EAAM1E,EAAM,CAIxB,GAHK,CAAE,KAAK,QAAU,CAAE0E,GAGnB1E,GAAQA,EAAK,IAAI0E,CAAI,EACzB,MAAO,GAED1E,IACNA,EAAO,IAAI,KAEZA,EAAK,IAAI0E,CAAI,EAEb,IAAI0G,EAAQ,EAEZ,UAAUltB,IAAO,CAAC,OAAQ,WAAY,OAAO,EAC5C,GAAKwmB,EAAKxmB,CAAG,EACZ,UAAUoH,KAASof,EAAKxmB,CAAG,EAC1BktB,GAAS,KAAK,aAAa9lB,EAAO0a,CAAI,EAEzC,OAAK0E,EAAK,SAAW,KAAK,WAAWA,EAAM,EAAI,GAC9C0G,IAEMA,CACR,EAEA,SAAS1G,EAAM,CACd,KAAK,MAAM,YAAaA,CAAI,CAC7B,EAEA,WAAWA,EAAM,CAChB,KAAK,MAAM,cAAeA,CAAI,CAC/B,EAEA,YAAYjoB,EAAM,CACjB,KAAK,MAAM,WAAY,GAAGA,CAAI,CAC/B,EAEA,eAAegQ,EAASwiC,EAAU,CACjC,GAAK,KAAK,MAAM,UACf,UAAUt3B,KAAS,KAAK,MAAM,SAC7B,GAAKA,GAASA,EAAM,eAAiB,CACpC,MAAMhQ,EAAMgQ,EAAM,eAAelL,EAASwiC,CAAQ,EAClD,GAAKtnC,IAAQ,OACZ,OAAOA,CACT,EACH,CACD,CACD,E,eChQIkgC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAQD,EAAI,MAAOE,EAAG,KAAK,CAAC,YAAY,iBAAiB,MAAM,CAAC,KAAO,CAACF,EAAI,KAAO,QAAU,MAAM,EAAE,SAAWA,EAAI,QAAQ,EAAE,GAAG,CAAC,MAAQ,CAAC,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,KAAK,GAAGA,EAAO,IAAI,CAAC,KAAK,SAAS,CAAC,EAAW,KAAcH,EAAI,SAAS,MAAM,KAAM,SAAS,CAAC,EAAE,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,OAAO,GAAGA,EAAO,IAAI,CAAC,OAAO,WAAW,CAAC,EAAW,KAAcH,EAAI,SAAS,MAAM,KAAM,SAAS,CAAC,EAAE,SAASG,EAAO,CAAkH,MAA9G,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,OAAO,GAAGA,EAAO,IAAI,CAAC,OAAO,WAAW,CAAC,GAAqB,WAAYA,GAAUA,EAAO,SAAW,EAAW,KAAcH,EAAI,UAAU,MAAM,KAAM,SAAS,CAAC,EAAE,SAASG,EAAO,CAAqH,MAAjH,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,QAAQ,GAAGA,EAAO,IAAI,CAAC,QAAQ,YAAY,CAAC,GAAqB,WAAYA,GAAUA,EAAO,SAAW,EAAW,KAAcH,EAAI,UAAU,MAAM,KAAM,SAAS,CAAC,EAAE,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,IAAI,OAAUA,EAAO,IAAI,MAAS,EAAW,KAAcH,EAAI,UAAU,MAAM,KAAM,SAAS,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAIA,EAAI,UAAW,SAAS9iB,EAAK,CAAC,OAAOgjB,EAAG,KAAK,CAAC,IAAIhjB,EAAK,SAAS,MAAM,CAAE8iB,EAAI,cAAgB9iB,GAAQA,EAAK,eAAiB8iB,EAAI,gBAAgB9iB,CAAI,EAAK,SAAW,EAAE,EAAE,MAAM,CAAC,WAAWA,EAAK,SAAS,KAAO,cAAc,CAAC,EAAE,CAACgjB,EAAG,MAAM,CAAC,YAAY,mFAAmF,MAAM,CAAC,gBAAgBhjB,EAAK,SAAS,gBAAgB8iB,EAAI,cAAgB9iB,EAAK,KAAO,UAAU,EAAE,GAAG,CAAC,MAAQ,SAASijB,EAAO,CAAC,OAAOH,EAAI,UAAU9iB,CAAI,CAAC,CAAC,CAAC,EAAE,CAACgjB,EAAG,OAAO,CAAC,YAAY,QAAQ,MAAM,CAC5sDhjB,EAAK,OAAS,CAAEA,EAAK,cAAiB,GAAK,iBAC5CA,EAAK,SAAW,iBAAmB,iBACpC,EAAE,MAAM,CAAC,KAAO,cAAc,CAAC,CAAC,EAAE8iB,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,gBAAgB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE9iB,EAAK,SAAUA,EAAK,KAAK,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAE8iB,EAAI,GAAG,GAAG,EAAGA,EAAI,OAAQE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,aAAa9iB,CAAI,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAGA,EAAK,KAAMgjB,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAG9iB,EAAK,cAAgB8iB,EAAI,EAAE9iB,EAAK,cAAeA,EAAK,IAAI,EAAIA,EAAK,IAAI,EAAE;AAAA,IAAU,CAAC,CAAC,EAAGA,EAAK,OAAQgjB,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAG9iB,EAAK,MAAM,EAAE;AAAA,IAAU,CAAC,CAAC,EAAE8iB,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAG9iB,EAAK,OAASA,EAAK,UAAY,CAAEA,EAAK,cAAegjB,EAAG,YAAY,CAAC,MAAM,CAAC,KAAOhjB,EAAK,eAAe8iB,EAAI,YAAY,MAAQ9iB,EAAK,MAAM,QAAU8iB,EAAI,QAAQ,OAASA,EAAI,MAAM,EAAE,GAAG,CAAC,cAAc,SAAU7nC,EAAG,CAAE,OAAO6nC,EAAI,MAAM,cAAe7nC,CAAC,CAAG,EAAE,YAAY,SAAUA,EAAG,CAAE,OAAO6nC,EAAI,MAAM,YAAa7nC,CAAC,CAAG,EAAE,gBAAgB,SAAUA,EAAG,CAAE,OAAO6nC,EAAI,MAAM,gBAAiB7nC,CAAC,CAAG,CAAC,CAAC,CAAC,EAAE6nC,EAAI,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,CAAC,EAH7gC,UAITI,EAAkB,CAAC,EC4DvB,SAASsH,EAAgB5iC,EAAM,CAC9B,OAAKA,EAAK,UAAYA,EAAK,MACnB4iC,EAAgB5iC,EAAK,MAAMA,EAAK,MAAM,OAAS,CAAC,CAAC,EAElDA,CACR,CALS,EAAA4iC,EAAA,mBAQT,SAASC,EAAgB7iC,EAAM8iC,EAAO,CACrC,MAAM9J,EAAQh5B,EAAK,OAASA,EAAK,OAAO,MAAQ8iC,EAC/C5jC,EAAM85B,EAAM,QAAQh5B,CAAI,EAEzB,OAAKg5B,EAAM95B,EAAM,CAAC,EACV85B,EAAM95B,EAAI,CAAC,EAEdc,EAAK,OACF6iC,EAAgB7iC,EAAK,OAAQ8iC,CAAK,EAEnC,IACR,CAXS,EAAAD,EAAA,mBAcT,SAASE,EAAgB/iC,EAAMgjC,EAAK,CAOnC,GANOhjC,EAAK,WACXA,EAAK,SAAW,GACXgjC,GACJA,EAAI,MAAM,gBAAiBhjC,CAAI,GAG5BA,EAAK,MACT,UAAUoY,KAAQpY,EAAK,MACtB+iC,EAAgB3qB,EAAM4qB,CAAG,CAC5B,CAVS,EAAAD,EAAA,mBCtFyW,QDmGnW,CACd,MAAO,CAAC,OAAQ,QAAS,cAAe,SAAU,SAAS,EAE3D,SAAU,CACT,UAAW,CACV,OAAO,KAAK,KAAO,OAAY,CAChC,EAEA,WAAY,CACX,OAAO,KAAK,MAAM,OAAO3qB,GAAQ,KAAK,WAAWA,CAAI,CAAC,CACvD,CACD,EAEA,QAAS,CACR,WAAWA,EAAMsqB,EAAa,GAAO,CACpC,GAAK,CAAE,KAAK,QAAU,KAAK,gBAAgBtqB,CAAI,EAC9C,MAAO,GAER,GAAK,KAAK,OAAO,OACX,KAAK,OAAO,MAAM,IAAI,UAAU,EAAI,CAExC,GAAK,CAAEsqB,GACN,UAAU9wC,IAAO,CAAC,OAAQ,WAAY,OAAO,EAC5C,GAAKwmB,EAAKxmB,CAAG,GACZ,UAAUoH,KAASof,EAAKxmB,CAAG,EAC1B,GAAK,KAAK,WAAWoH,CAAK,EACzB,MAAO,IAGZ,GAAK,CAAEof,EAAK,SAAW,CAAE,KAAK,QAAQ,eAAe,IAAIA,EAAK,OAAO,EACpE,MAAO,EACT,CAGD,MAAK,OAAK,OAAO,QACX,CAAEA,EAAK,cAAgB,CAAEA,EAAK,aAAa,SAAS,KAAK,OAAO,KAAK,GAK5E,EAEA,aAAaA,EAAM1E,EAAM,CAIxB,GAHK,CAAE,KAAK,QAAU,CAAE0E,GAGnB1E,GAAQA,EAAK,IAAI0E,CAAI,EACzB,MAAO,GAED1E,IACNA,EAAO,IAAI,KAEZA,EAAK,IAAI0E,CAAI,EAEb,IAAI0G,EAAQ,EAEZ,UAAUltB,IAAO,CAAC,OAAQ,WAAY,OAAO,EAC5C,GAAKwmB,EAAKxmB,CAAG,EACZ,UAAUoH,KAASof,EAAKxmB,CAAG,EAC1BktB,GAAS,KAAK,aAAa9lB,EAAO0a,CAAI,EAEzC,OAAK0E,EAAK,SAAW,KAAK,WAAWA,EAAM,EAAI,GAC9C0G,IAEMA,CACR,EAEA,gBAAgB1G,EAAM,CACrB,IAAI/kB,EAAI,KAAK,YACb,KAAQA,GAAI,CACX,GAAK+kB,IAAS/kB,EACb,MAAO,GAERA,EAAIA,EAAE,MACP,CAEA,MAAO,EACR,EAEA,UAAU+kB,EAAM,CACRA,EAAK,SAEF,KAAK,cAAgBA,IAC9BA,EAAK,SAAW,IAFhBA,EAAK,SAAW,GAIjB,KAAK,MAAM,gBAAiBA,CAAI,EAChC,KAAK,MAAM,cAAeA,CAAI,CAC/B,EAEA,WAAY,CACX,UAAUA,KAAQ,KAAK,MACtB2qB,EAAgB3qB,EAAM,IAAI,CAC5B,EAEA,UAAW,CACV,GAAK,KAAK,KAAO,OAEjB,MAAM,EAAI,KAAK,YACd4gB,EAAQ,EAAE,OAAS,EAAE,OAAO,MAAQ,KAAK,MACzC95B,EAAM85B,EAAM,QAAQ,CAAC,EAEjB95B,EAAM,EACV,KAAK,MAAM,cAAe0jC,EAAgB5J,EAAM95B,EAAI,CAAC,CAAC,CAAC,EAE9C,EAAE,QACX,KAAK,MAAM,cAAe,EAAE,MAAM,CACpC,EAEA,UAAW,CACV,GAAK,KAAK,KAAO,OAEjB,MAAM,EAAI,KAAK,YACf,IAAI7K,EAEC,EAAE,UAAY,EAAE,MACpBA,EAAS,EAAE,MAAM,CAAC,EAGlBA,EAASwuC,EAAgB,EAAG,KAAK,KAAK,EAElCxuC,GACJ,KAAK,MAAM,cAAeA,CAAM,CAClC,EAEA,WAAY,CACX,GAAK,KAAK,KAAO,OAEjB,MAAM,EAAI,KAAK,YAEV,EAAE,UAAY,EAAE,OACpB,EAAE,SAAW,GACb,KAAK,MAAM,gBAAiB,CAAC,GAClB,EAAE,QACb,KAAK,MAAM,cAAe,EAAE,MAAM,CACpC,EAEA,WAAY,CACX,GAAK,KAAK,KAAO,OAEjB,MAAM,EAAI,KAAK,YACV,EAAE,UAAY,EAAE,MACpB,KAAK,MAAM,cAAe,EAAE,MAAM,CAAC,CAAC,GAEpC,EAAE,SAAW,GACb,KAAK,MAAM,gBAAiB,CAAC,GAGzB,MAAM,SACV0uC,EAAgB,KAAK,YAAa,IAAI,CACxC,CACD,CACD,E,eEnPIxH,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAACA,EAAG,MAAM,CAACF,EAAI,GAAGA,EAAI,GAAG,KAAK,UAAUA,EAAI,OAAQ,KAAM,GAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAjK,UACTI,EAAkB,CAAC,E,WCD6V,QCUrW,CACd,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,UAAQ,aAAU,KAAK,KAAK,UAAU,CAAC,CACxC,CACD,EAEA,SAAU,CACT,cAAe,CACd,MAAMhrC,EAAQ,KAAK,OAAO,CAAC,EAC3B,OAAOA,EAAQA,EAAM,GAAK,CAC3B,CACD,EAEA,SAAU,CACT,KAAK,QAAU,KAAK,QAAQ,KAAK,IAAI,EACrC,KAAK,KAAK,YAAY,KAAK,OAAO,CACnC,EAEA,WAAY,CACX,KAAK,QAAU,KACf,KAAK,KAAK,YAAY,IAAI,CAC3B,EAEA,QAAS,CACR,QAAQA,EAAO,CACd,KAAK,OAAO,QAAK,aAAUA,CAAK,CAAC,CAClC,CACD,CACD,E,eClCIirC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,4DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,qBAAqB,EAAE,CAAEF,EAAI,YAAaE,EAAG,UAAU,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,kDAAkD,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,4BAA4B,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,yCACjf,iMACD,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,2CAC5D,2GACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,mDAAmD,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,4BAA4B,MAAM,CAAC,sBAAuBF,EAAI,WAAW,EAAE,MAAM,CAAC,SAAWA,EAAI,WAAW,EAAE,GAAG,CAAC,MAAQA,EAAI,IAAI,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sCAAsC,MAAM,CAAC,sBAAuBF,EAAI,KAAK,SAAWA,EAAI,QAAQ,SAAS,OAAS,CAAC,EAAE,MAAM,CAAC,SAAWA,EAAI,KAAK,SAAWA,EAAI,QAAQ,SAAS,OAAS,CAAC,EAAE,GAAG,CAAC,MAAQA,EAAI,GAAG,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sCAAsC,MAAM,CAAC,sBAAuB,CAAEF,EAAI,SAAS,EAAE,MAAM,CAAC,SAAW,CAAEA,EAAI,SAAS,EAAE,GAAG,CAAC,MAAQA,EAAI,QAAQ,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,gCAAgC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,aAAcE,EAAG,MAAM,CAAC,YAAY,+FAA+F,EAAE,CAACA,EAAG,UAAU,CAAC,YAAY,gBAAgB,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,+BAAgC,4CAA4C,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,qBAAsBE,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,oBAAoB,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,kEAAkE,GAAG,CAAC,MAAQF,EAAI,WAAW,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,eAAgBE,EAAG,MAAM,CAAC,YAAY,+FAA+F,EAAE,CAACA,EAAG,UAAU,CAAC,YAAY,gBAAgB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,cAAc,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,kEAAkE,GAAG,CAAC,MAAQF,EAAI,WAAW,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,SAAS,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,gDAAiD,SAAS,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,oCAAoC,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,iBAAiB,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,6CAA8C,MAAM,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,KAAM,WAAW,MAAM,CAAC,EAAE,IAAI,OAAO,YAAY,sFAAsF,MAAM,CAAC,GAAK,kBAAkB,SAAWA,EAAI,WAAW,EAAE,SAAS,CAAC,MAASA,EAAI,IAAK,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAIA,EAAO,OAAO,YAAqBH,EAAI,KAAKG,EAAO,OAAO,MAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEH,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,oCAAoC,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,wBAAwB,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,6CAA8C,aAAa,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,WAAW,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,KAAM,WAAW,MAAM,CAAC,EAAE,IAAI,OAAO,YAAY,sFAAsF,MAAM,CAAC,GAAK,yBAAyB,SAAWA,EAAI,WAAW,EAAE,SAAS,CAAC,MAASA,EAAI,IAAK,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAIA,EAAO,OAAO,YAAqBH,EAAI,KAAKG,EAAO,OAAO,MAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEH,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,aAAa,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,mBAAmB,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,+CAAgD,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,aAAa,CAAC,IAAI,SAAS,MAAM,CAAC,GAAK,oBAAoB,SAAWF,EAAI,WAAW,EAAE,MAAM,CAAC,MAAOA,EAAI,OAAQ,SAAS,SAAUS,EAAK,CAACT,EAAI,OAAOS,CAAG,EAAE,WAAW,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAAET,EAAI,GAAG,GAAG,EAAEE,EAAG,UAAU,CAAC,YAAY,4BAA4B,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAE,+CAAgD;AAAA;AAAA,+EAA8K,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,IAAKE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,SAAS,CAACA,EAAG,SAAS,CAAC,YAAY,2CAA2C,CAAC,EAAEF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,gDAAiD,mBAAmB,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,UAAU,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,4DAClrK,kQAAmQ,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,oCAAoC,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,gBAAgB,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,4CAA6C,YAAY,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sFAAsF,MAAM,CAAC,GAAK,iBAAiB,SAAW,EAAE,EAAE,SAAS,CAAC,MAAQF,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,4CAA4C,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,SAAS,YAAY,sBAAsB,MAAM,CAAC,GAAK,oBAAoB,SAAWF,EAAI,YAAY,KAAO,UAAU,EAAE,SAAS,CAAC,QAAU,CAAEA,EAAI,KAAK,EAAE,GAAG,CAAC,OAASA,EAAI,aAAa,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,mBAAmB,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,+CAAgD,oCAAoC,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,SAAS,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,8CAA+C,OAAO,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,UAAU,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,0DACrkD,yQAAyQ,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,gBAAgB,CAAC,MAAM,CAAC,QAAUF,EAAI,QAAQ,SAAWA,EAAI,YAAY,QAAUA,EAAI,aAAa,QAAU,EAAI,EAAE,MAAM,CAAC,MAAOA,EAAI,MAAO,SAAS,SAAUS,EAAK,CAACT,EAAI,MAAMS,CAAG,EAAE,WAAW,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAN9e,UAOTL,EAAkB,CAAC,E,sBCPgW,QCsNxW,CACd,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAMv6B,EAAW,KAAK,QAAQ,OAAO,EAAE,QAAQ,UAAU,EAEzD,MAAO,CACN,WAAS,aAAUA,EAAS,OAAO,EAEnC,SAAU,KACV,SAAU,KACV,UAAW,KACX,WAAY,KACZ,UAAW,KAEX,KAAM,KACN,KAAM,KACN,OAAQ,KACR,IAAK,KACL,MAAO,KACP,QAAS,GAET,MAAO,KACP,aAAc,KAEd,aAAc,GACd,qBAAsB,KACtB,eAAgB,IACjB,CACD,EAEA,SAAU,CACT,aAAc,CACb,OAAO,KAAK,KAAK,SAAS,WAAa,EACxC,EAEA,WAAY,CACX,OAAO,KAAK,KAAK,SAAW,IAC7B,CACD,EAEA,MAAO,CACN,MAAO,CACD,KAAK,OAAS,KAAK,WACvB,KAAK,QAAU,GACjB,EAEA,MAAO,CACD,KAAK,OAAS,KAAK,WACvB,KAAK,QAAU,GACjB,EAEA,QAAS,CACH,KAAK,SAAW,KAAK,aACzB,KAAK,QAAU,GACjB,EAEA,OAAQ,CACF,KAAK,QAAU,KAAK,YACxB,KAAK,QAAU,GACjB,EAEA,MAAO,CACN,SAAU,IACF,eAAY,KAAK,MAAO,KAAK,SAAS,IAC5C,KAAK,QAAU,GACjB,EACA,KAAM,EACP,CACD,EAEA,SAAU,CACT,KAAK,QAAQ,QAAQ,GAAG,kBAAmB,KAAK,cAAe,IAAI,EACnE,KAAK,cAAc,EACnB,KAAK,OAAO,CACb,EAEA,eAAgB,CACf,KAAK,QAAQ,QAAQ,IAAI,kBAAmB,KAAK,cAAe,IAAI,CACrE,EAEA,QAAS,CACR,eAAgB,CACf,KAAK,MAAQ,CAAE,KAAK,MAAM,OAAO,OAClC,EAEA,aAAc,CACb,KAAK,aAAe,GACpB,KAAK,qBAAuB,KAC5B,KAAK,eAAiB,IACvB,EAEA,UAAW,CACV,KAAK,YAAY,EAEjB,IAAIi8B,EACJ,GAAI,CACH,MAAMxsC,EAAO,KAAK,KAAK,QAAQ,UAAU,EACzCwsC,EAAO,IAAI,KAAK,CAAC,KAAK,UAAUxsC,CAAI,CAAC,EAAG,CAAC,KAAM,gCAAgC,CAAC,CACjF,MAAa,CACZ,KAAK,aAAe,GACpB,KAAK,qBAAuB,KAAK,EAAE,oCAAqC,yCAAyC,EACjH,MACD,CAEA,GAAI,IACH,UAAOwsC,EAAM,iBAAiB,KAAK,IAAI,OAAO,CAC/C,MAAa,CACZ,KAAK,aAAe,GACpB,KAAK,qBAAuB,KAAK,EAAE,oCAAqC,iBAAiB,CAC1F,CACD,EAEA,QAAS,CACR,MAAM9qC,EAAU,KAAK,KAAK,QAE1B,KAAK,SAAW,KAAK,KAAOA,EAC3BA,EAAQ,SACP,KAAK,EAAEA,EAAQ,SAAUA,EAAQ,MAAOA,CAAO,EAC/CA,EAAQ,MACT,kBAED,KAAK,SAAW,KAAK,KAAOA,EAC3BA,EAAQ,cACP,KAAK,EAAEA,EAAQ,cAAeA,EAAQ,YAAaA,CAAO,EAC1DA,EAAQ,YACT,GAED,KAAK,WAAa,KAAK,OAASA,EAAUA,EAAQ,OAAS,KAC3D,KAAK,UAAY,KAAK,MAAQA,KAAU,aAAUA,EAAQ,OAAO,EAAI,CAAC,EACtE,KAAK,QAAU,KAAK,IAAMA,EAAUA,EAAQ,IAAM,KAClD,KAAK,UAAY,KAAK,MAAQA,EAAUA,EAAQ,cAAgB,KAChE,KAAK,QAAU,CAAEA,CAClB,EAEA,KAAM,CACL,GAAK,KAAK,KAAK,SAAW,KAAK,QAAU,CACxC,GAAK,CAAE,QAAQ,KAAK,EACnB,+BACA,oEACD,CAAC,EACA,OAEI,KAAK,KAAK,SACd,KAAK,QAAQ,cAAc,KAAK,KAAK,OAAO,CAC9C,CAEA,KAAK,QAAU,GACf,KAAK,MAAM,WAAY,0BAA0B,CAClD,EAEA,MAAO,CACN,GAAK,CAAE,KAAK,KAAK,QAChB,KAAK,KAAK,QAAU,KAAK,QAAQ,cAAc,CAC9C,KAAM,KAAK,KACX,YAAa,KAAK,KAClB,QAAS,KAAK,MACd,OAAQ,KAAK,OACb,cAAe,KAAK,KACrB,CAAC,UAEU,KAAK,QAAU,CAC1B,MAAM+qB,EAAU,CACf,KAAM,KAAK,KACX,YAAa,KAAK,KAClB,QAAS,KAAK,MACd,OAAQ,KAAK,OACb,cAAe,KAAK,KACrB,EAGK,KAAK,OAAS,KAAK,WACvBA,EAAQ,SAAW,QAEf,KAAK,OAAS,KAAK,WACvBA,EAAQ,cAAgB,QAEzB,KAAK,KAAK,QAAQ,OAAOA,CAAO,CACjC,CAEA,KAAK,QAAU,GACf,KAAK,MAAM,WAAY,0BAA0B,CAClD,EAEA,eAAgB,CACf,KAAK,aAAe,KAAK,QAAQ,QAAQ,OAC1C,EAEA,gBAAiB,CAChB,GAAK,KAAK,QACT,OAAO,QACN,KAAK,EACJ,uBACA,sEACD,CAAC,CACJ,CACD,CAED,E,eCrZIse,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,wDAAwD,EAAE,CAAEF,EAAI,QAAQ,UAAWE,EAAG,UAAU,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,kDAAkD,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,gCAAgC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG;AAAA;AAAA,KAAaA,EAAI,GAAGA,EAAI,EAAE,yCAC7e,qHAAqH,CAAC,EAAE;AAAA;AAAA,IAAY,EAAGA,EAAI,QAAQ,UAAWE,EAAG,MAAM,CAAC,YAAY,yCAAyC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,oDAAoD,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,UAAU,YAAY,sBAAsB,MAAM,CAAC,GAAK,UAAU,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUF,EAAI,QAAQ,OAAO,EAAE,GAAG,CAAC,OAASA,EAAI,YAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,SAAS,CAAC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,iCAAkC,gCAAiC,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,qGAAqG,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,iCAAkC,uKAAuK,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,0CAA0C,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,wBAAyB,yCAAyC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sCAAsC,MAAM,CAAC,sBAAuBF,EAAI,SAAS,EAAE,MAAM,CAAC,SAAWA,EAAI,SAAS,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAC,OAAOH,EAAI,KAAK,CAAC,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,aAAa,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,WAAW,CAAC,CAAC,KAAK,eAAe,QAAQ,iBAAiB,MAAOF,EAAI,UAAW,WAAW,WAAW,CAAC,EAAE,YAAY,aAAa,EAAE,CAACE,EAAG,SAAS,CAAC,YAAY,sCAAsC,MAAM,CAAC,sBAAuBF,EAAI,SAAS,EAAE,MAAM,CAAC,SAAWA,EAAI,SAAS,EAAE,GAAG,CAAC,MAAQA,EAAI,UAAU,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,cAAS,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,UAAWE,EAAG,UAAU,CAAC,MAAM,CAAC,MAAQ,mBAAmB,IAAM,aAAa,KAAOF,EAAI,aAAe,KAAO,IAAI,CAAC,EAAE,CAACE,EAAG,YAAY,CAAC,YAAY,WAAW,EAAE,CAAEF,EAAI,aAAcE,EAAG,MAAM,CAAC,YAAY,SAAS,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,QAAQ,YAAY,uFAAuF,MAAM,CAAC,YAAcF,EAAI,EAAE,wBAAyB,OAAO,CAAC,EAAE,GAAG,CAAC,QAAU,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,QAAQ,GAAGA,EAAO,IAAI,OAAO,EAAW,KAAcH,EAAI,YAAY,MAAM,KAAM,SAAS,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,uBAAuB,GAAG,CAAC,MAAQF,EAAI,WAAW,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,WAAuBA,EAAI,GAAGA,EAAI,EAAE,oBAAqB,QAAQ,CAAC,EAAE;AAAA,SAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEE,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,0GAA0G,GAAG,CAAC,MAAQF,EAAI,YAAY,CAAC,EAAE,CAACE,EAAG,MAAM,CAAC,YAAY,oDAAoD,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,+CAA+C,EAAE,CAACF,EAAI,GAAG;AAAA,WAAuBA,EAAI,GAAGA,EAAI,EAAE,qBAAsB,UAAU,CAAC,EAAE;AAAA,SAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,0GAA0G,GAAG,CAAC,MAAQF,EAAI,QAAQ,CAAC,EAAE,CAACE,EAAG,MAAM,CAAC,YAAY,oDAAoD,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,uCAAuC,EAAE,CAACF,EAAI,GAAG;AAAA,WAAuBA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,WAAW,CAAC,EAAE;AAAA,SAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,aAAcE,EAAG,MAAM,CAAC,YAAY,+FAA+F,EAAE,CAACA,EAAG,UAAU,CAAC,YAAY,gBAAgB,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,+BAAgC,4CAA4C,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,qBAAsBE,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,oBAAoB,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,kEAAkE,GAAG,CAAC,MAAQF,EAAI,WAAW,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,eAAgBE,EAAG,MAAM,CAAC,YAAY,+FAA+F,EAAE,CAACA,EAAG,UAAU,CAAC,YAAY,gBAAgB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,cAAc,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,gBAAiBE,EAAG,SAAS,CAAC,YAAY,kEAAkE,GAAG,CAAC,MAAQF,EAAI,WAAW,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,gBAAiBE,EAAG,MAAM,CAAC,YAAY,+FAA+F,EAAE,CAACA,EAAG,UAAU,CAAC,YAAY,gBAAgB,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,cAAc,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,sCAAuC,oCAAoC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,gBAAiB,SAAShpC,EAAQgN,EAAI,CAAC,OAAOk8B,EAAG,SAAS,CAAC,IAAIl8B,EAAI,YAAY,4IAA4I,GAAG,CAAC,MAAQ,SAASm8B,EAAO,CAAC,OAAOH,EAAI,cAAchpC,CAAO,CAAC,CAAC,CAAC,EAAE,CAACkpC,EAAG,OAAO,CAAC,YAAY,mCAAmC,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGhpC,EAAQ,SAAWgpC,EAAI,EAAEhpC,EAAQ,SAAUA,EAAQ,IAAI,EAAIA,EAAQ,IAAI,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEgpC,EAAI,GAAG,GAAG,EAAGhpC,EAAQ,YAAakpC,EAAG,MAAM,CAAC,YAAY,gEAAgE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGhpC,EAAQ,cAAgBgpC,EAAI,EAAEhpC,EAAQ,cAAeA,EAAQ,WAAW,EAAIA,EAAQ,WAAW,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEgpC,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,kEAAkE,GAAG,CAAC,MAAQF,EAAI,WAAW,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,eAAgBE,EAAG,MAAM,CAAC,YAAY,+FAA+F,EAAE,CAACA,EAAG,UAAU,CAAC,YAAY,gBAAgB,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,yCAA0C,+GAA+G,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sGAAsG,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,cAAc,EAAI,CAAC,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,4CAA4C,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,qCAAsC,+BAA+B,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sGAAsG,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,cAAc,EAAK,CAAC,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,gDAAgD,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,sCAAuC,gCAAgC,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,kEAAkE,GAAG,CAAC,MAAQF,EAAI,WAAW,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,OAAO,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,IAAI,OAAO,YAAY,mBAAmB,EAAEF,EAAI,GAAIA,EAAI,QAAQ,SAAU,SAAS9jB,EAAE,CAAC,OAAOgkB,EAAG,UAAU,CAAC,IAAIhkB,EAAE,GAAG,MAAM,CAAC,eAAeA,EAAE,EAAE,CAAC,EAAE,CAACgkB,EAAG,MAAM,CAAC,YAAY,oHAAoH,MAAM,CAAC,KAAMhkB,EAAE,IAAI,EAAE,MAAM,CAAC,SAAW,GAAG,CAAC,EAAE,CAAC8jB,EAAI,GAAG,EAAE,EAAI,EAAEA,EAAI,GAAG,GAAG,EAAG9jB,EAAE,UAAWgkB,EAAG,MAAM,CAAC,YAAY,+GAA+G,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,mBAAmB,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gEAAgE,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,4BAA4B,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAG9jB,EAAE,IAAKgkB,EAAG,MAAM,CAAC,YAAY,+GAA+G,EAAE,CAACA,EAAG,OAAO,CAAC,MAAO,wBAA0BhkB,EAAE,cAAgB,sBAAwB,GAAI,CAAC,EAAE8jB,EAAI,GAAG,GAAG,EAAK9jB,EAAE,cAA8V8jB,EAAI,GAAG,EAAtVE,EAAG,MAAM,CAAC,YAAY,gEAAgE,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,gEAAgE,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAG9jB,EAAE,GAAG,EAAE;AAAA,MAAc,CAAC,CAAC,CAAU,CAAC,EAAE8jB,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACA,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAG9jB,EAAE,SAAW8jB,EAAI,EAAE9jB,EAAE,SAAUA,EAAE,MAAOA,CAAC,EAAIA,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE8jB,EAAI,GAAG,GAAG,EAAG9jB,EAAE,YAAagkB,EAAG,MAAM,CAAC,YAAY,aAAa,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAG9jB,EAAE,cAAgB8jB,EAAI,EAAE9jB,EAAE,cAAeA,EAAE,YAAaA,CAAC,EAAIA,EAAE,WAAW,EAAE;AAAA,MAAc,CAAC,CAAC,EAAE8jB,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gDAAgD,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,KAAK9jB,CAAC,CAAC,CAAC,CAAC,EAAE,CAACgkB,EAAG,OAAO,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,oBAAqB,WAAW,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gFAAgF,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,OAAO9jB,CAAC,CAAC,CAAC,CAAC,EAAE,CAACgkB,EAAG,MAAM,CAAC,YAAY,2DAA2D,MAAM,CACl2V,WAAYhkB,EAAE,KACd,eAAgB,CAAEA,EAAE,QACpB,cAAeA,EAAE,SAAW,CAAEA,EAAE,IACjC,CAAC,EAAE,CAACgkB,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAAEhkB,EAAE,KAAMgkB,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,WAAuBA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,qCAAqC,CAAC,EAAE;AAAA,SAAoB,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAK9jB,EAAE,QAAkJ8jB,EAAI,GAAG,EAAhJE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,WAAuBA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,2BAA2B,CAAC,EAAE;AAAA,SAAoB,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAG9jB,EAAE,SAAW,CAAEA,EAAE,KAAMgkB,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,WAAuBA,EAAI,GAAGA,EAAI,EAAE,kCAAmC,yDAAyD,CAAC,EAAE;AAAA,SAAoB,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EALnpB,UAMTI,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,wCAAwC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,gBAAgB,CAAC,CAAC,CAAC,CAAC,EAAE,UAAY,CAAC,IAAIF,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,uFAAuF,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,E,4CCNvF,QCyTzW,CACd,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,UAAW,GACX,aAAc,GAEd,UAAW,GACX,aAAc,GACd,gBAAiB,GACjB,qBAAsB,KACtB,eAAgB,KAChB,gBAAiB,KACjB,eAAgB,IACjB,CACD,EAEA,SAAU,CACT,KAAK,UAAY,KAAS,OAAO,KAAK,MAAM,KAAM,CACjD,UAAW,UACX,OAAQ,SAER,SAAU9qC,GAAS,CAClB,MAAM6J,EAAK7J,EAAM,KAAK,QAAQ,QAC7B4B,EAAU,KAAK,QAAQ,aAAaiI,CAAE,EAElCjI,GACJA,EAAQ,KAAK5B,EAAM,QAAQ,CAC7B,CACD,CAAC,CACF,EAEA,eAAgB,CACV,KAAK,WACT,KAAK,UAAU,QAAQ,EAExB,KAAK,UAAY,IAClB,EAEA,QAAS,CACR,WAAY,CACX,KAAK,UAAY,GACjB,KAAK,aAAe,EACrB,EAEA,YAAa,CACZ,KAAK,UAAY,CAAE,KAAK,UACxB,KAAK,aAAe,EACrB,EAEA,cAAe,CACd,KAAK,UAAY,GACjB,KAAK,aAAe,GACpB,sBAAsB,IAAM,CAC3B,KAAK,MAAM,MAAM,MAAM,CACxB,CAAC,CACF,EAEA,cAAe,CACd,MAAMD,EAAM,KAAK,MAAM,QAAQ,QAC/B,KAAK,QAAQ,WAAWA,CAAG,CAC5B,EAEA,KAAK6B,EAAS,CACb,MAAMkmB,EAAO,CACZ,SAAU,wCACV,IAAK,eAEL,gBAAiB,GAEjB,MAAO,eACP,SAAU,gDACV,OAAQ,KAAK,KAAK,OAElB,SAAU,CAAC,CACV,KAAM,GACN,QAAAlmB,EACA,UAAW,gBACZ,CAAC,CACF,EAEAkmB,EAAK,SAAS,CAAC,EAAE,OAASA,EAC1B,KAAK,MAAM,cAAeA,CAAI,CAC/B,EAEA,OAAOlmB,EAAS,CACfA,EAAQ,OAAO,CAChB,EAEA,aAAc,CACb,KAAK,UAAY,GACjB,KAAK,WAAa,KAClB,KAAK,aAAe,GACpB,KAAK,gBAAkB,GACvB,KAAK,qBAAuB,KAC5B,KAAK,eAAiB,KACtB,KAAK,gBAAkB,KACvB,KAAK,eAAiB,KACtB,KAAK,oBAAsB,KAC3B,KAAK,YAAc,IACpB,EAEA,MAAM,aAAc,CACnB,MAAMgT,EAAM,KAAK,MAAM,MAAM,MAE7B,KAAK,UAAU,EACf,KAAK,YAAY,EACjB,KAAK,WAAaA,EAClB,KAAK,UAAY,GACjB,KAAK,gBAAkB,GAEvB,KAAK,eAAiB,KAAK,EAAE,sCAAuC,YAAY,EAEhF,IAAI1U,EACJ,GAAI,CACH,MAAMw8B,EAAW,MAAM,MAAM9nB,CAAG,EAChC,GAAK,CAAE8nB,EAAS,GACf,MAAM,IAAI,MAEXx8B,EAAO,MAAMw8B,EAAS,KAAK,CAE5B,MAAa,CACZ,KAAK,eAAiB,KACtB,KAAK,aAAe,GACpB,KAAK,qBAAuB,KAAK,EAAE,oCAAqC,4CAA4C,EACpH,MACD,CAEA,KAAK,eAAiB,KACtB,KAAK,WAAWx8B,CAAI,CACrB,EAEA,MAAM,UAAW,CAChB,KAAK,UAAU,EACf,KAAK,YAAY,EACjB,KAAK,UAAY,GAEjB,IAAIslC,EAAMnuB,EACV,GAAI,CAEH,GADAmuB,EAAO,QAAM,YAAS,kCAAkC,EACnD,CAAEA,EAAO,CACb,KAAK,YAAY,EACjB,MACD,CAGA,GAAKA,EAAK,KAAK,YAAY,EAAE,SAAS,KAAK,EAAI,CAC9C,MAAM8G,GAAS,MAAM,qCAA+C,QAGpEj1B,EAAW,MAFJ,MAAO,IAAIi1B,EAAM,EAAE,UAAU9G,CAAI,GAEnB,KAAK,eAAe,EAAE,MAAM,MAAM,CAExD,MACCnuB,EAAW,QAAM,YAASmuB,CAAI,CAEhC,MAAa,CACZ,KAAK,aAAe,GACpB,KAAK,qBAAuB,KAAK,EAAE,oCAAqC,sBAAsB,EAC9F,MACD,CAEA,IAAItlC,EACJ,GAAI,CACHA,EAAO,KAAK,MAAMmX,CAAQ,CAC3B,MAAa,CACZ,KAAK,aAAe,GACpB,KAAK,qBAAuB,KAAK,EAAE,oCAAqC,+BAA+B,EACvG,MACD,CAEA,KAAK,WAAWnX,CAAI,CACrB,EAEA,WAAWA,EAAM,CAChB,GAAKA,GAAQA,EAAK,OAAS,OAAS,CACnC,IAAI03B,EAAW13B,EAAK,QAAUA,EAAK,OAAO,SAO1C,GANK03B,IAAa,SACjBA,EAAW,CACV,IAAgB,WAChB,IAAgB,OACjB,GAEI,MAAM,QAAQA,CAAQ,EAAI,CAC9B,KAAK,YAAc13B,EACnB,KAAK,mBAAkB,aAAU03B,CAAQ,EACzC,MAED,MACC,KAAK,eAAiB,OAAO,KAAK13B,EAAK,MAAM,CAG/C,SAAYA,GAAQA,EAAK,OAAS,WAC5BA,EAAK,SAAWA,EAAK,OAAS,CAClC,KAAK,cAAcA,EAAK,QAASA,EAAK,MAAM,EAC5C,MACD,CAGD,KAAK,aAAe,GACpB,KAAK,qBAAuB,KAAK,EAAE,uCAAwC,2DAA2D,CACvI,EAEA,cAAcyyC,EAAczyC,EAAM,CAC5B,KAAK,YAAc,CAAEyyC,EAAa,MACtCA,EAAa,IAAM,KAAK,YAEzB,KAAK,eAAiBA,EACtB,KAAK,oBAAsBzyC,EAEtB,CAAAyyC,EAAa,KAGlB,KAAK,cAAc,EAAK,CACzB,EAEA,cAAcC,EAAe,GAAO,CACnC,MAAMD,EAAe,KAAK,eACzBzyC,EAAO,KAAK,oBAEP2J,EAAK8oC,EAAa,GACxB,OAAOA,EAAa,GACbC,GACN,OAAOD,EAAa,IAErB,MAAMnH,EAAO,KAAK,QAAQ,cAAcmH,CAAY,EAEpDnH,EAAK,OAAO,CACX,SAAU,OACV,cAAe,OACf,YAAa,GAAGA,EAAK,YAAcA,EAAK,YAAc;AAAA,EAAO,EAAE,GAAG,KAAK,EAAE,qCAAsC,8BAA+B,CAAC,IAAK,IAAI,IAAI,CAAC,CAAC,EAC/J,CAAC,EAED,IAAIzoC,EAAI,EAER,GAAO7C,EAaN,SAAU,CAACoB,EAAKE,CAAK,IAAK,OAAO,QAAQtB,CAAI,EAC5CsrC,EAAK,IAAIlqC,EAAKE,CAAK,EACnBuB,QAfY,CACb,MAAM+wB,EAAS,KAAK,aAAe,KAAK,YAAY,OACnDjlB,EAAS,KAAKhF,CAAE,IAEjB,GAAKiqB,EACJ,SAAU,CAACxyB,EAAKE,CAAK,IAAK,OAAO,QAAQsyB,CAAM,EACzCxyB,EAAI,WAAWuN,CAAM,IACzB28B,EAAK,IAAIlqC,EAAI,OAAOuN,EAAO,MAAM,EAAGrN,CAAK,EACzCuB,IAIJ,CAMA,KAAK,YAAY,EAEjB,KAAK,eAAiB,KAAK,EAAE,kCAAmC,gHAAiH,CAChL,KAAMyoC,EAAK,SAAW,KAAK,EAAEA,EAAK,SAAUA,EAAK,KAAK,EAAIA,EAAK,MAC/D,MAAOzoC,CACR,CAAC,CACF,CACD,CACD,E,eCvjBIkoC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,mCAAmC,EAAE,CAACA,EAAG,MAAM,CAAC,IAAI,SAAS,YAAY,+HAA+H,MAAM,CAAC,OAAQF,EAAI,MAAM,EAAE,MAAM,CAAC,SAAW,GAAG,EAAE,GAAG,CAAC,MAAQ,CAAC,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,KAAK,GAAGA,EAAO,IAAI,CAAC,KAAK,SAAS,CAAC,EAAW,MAAOA,EAAO,gBAAgB,EAAEA,EAAO,eAAe,EAASH,EAAI,UAAU,MAAM,KAAM,SAAS,EAAC,EAAE,SAASG,EAAO,CAAkH,MAA9G,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,OAAO,GAAGA,EAAO,IAAI,CAAC,OAAO,WAAW,CAAC,GAAqB,WAAYA,GAAUA,EAAO,SAAW,EAAW,MAAOA,EAAO,gBAAgB,EAAEA,EAAO,eAAe,EAASH,EAAI,UAAU,MAAM,KAAM,SAAS,EAAC,EAAE,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,OAAO,GAAGA,EAAO,IAAI,CAAC,OAAO,WAAW,CAAC,EAAW,MAAOA,EAAO,gBAAgB,EAAEA,EAAO,eAAe,EAASH,EAAI,UAAU,MAAM,KAAM,SAAS,EAAC,EAAE,SAASG,EAAO,CAAqH,MAAjH,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,QAAQ,GAAGA,EAAO,IAAI,CAAC,QAAQ,YAAY,CAAC,GAAqB,WAAYA,GAAUA,EAAO,SAAW,EAAW,MAAOA,EAAO,gBAAgB,EAAEA,EAAO,eAAe,EAASH,EAAI,UAAU,MAAM,KAAM,SAAS,EAAC,EAAE,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,QAAQ,GAAGA,EAAO,IAAI,OAAO,EAAW,KAAcH,EAAI,UAAU,MAAM,KAAM,SAAS,CAAC,EAAE,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,QAAQ,GAAGA,EAAO,IAAI,CAAC,IAAI,UAAU,CAAC,EAAW,KAAcH,EAAI,UAAU,MAAM,KAAM,SAAS,CAAC,CAAC,EAAE,MAAQA,EAAI,WAAW,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,QAAQ,eAAe,SAAWA,EAAI,EAAEA,EAAI,QAAQ,eAAe,SAAUA,EAAI,QAAQ,eAAe,MAAOA,EAAI,QAAQ,cAAc,EAAIA,EAAI,QAAQ,eAAe,KAAK,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,OAAQE,EAAG,MAAM,CAAC,WAAW,CAAC,CAAC,KAAK,eAAe,QAAQ,iBAAiB,MAAOF,EAAI,KAAM,WAAW,MAAM,CAAC,EAAE,YAAY,qFAAqF,EAAE,CAACE,EAAG,MAAM,CAAC,YAAY,uDAAuD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,SAAS,OAAUA,EAAO,IAAI,MAAS,EAAW,KAAcH,EAAI,UAAU,MAAM,KAAM,SAAS,CAAC,EAAE,QAAUA,EAAI,MAAM,SAAWA,EAAI,IAAI,CAAC,EAAE,CAACE,EAAG,MAAM,CAAC,IAAI,WAAW,YAAY,8BAA8B,MAAM,CAAC,iBAAiB,EAAE,CAAC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,0BAA0B,EAAE,CAACA,EAAG,MAAM,CAAC,IAAI,QAAQ,YAAY,mBAAmB,EAAEF,EAAI,GAAIA,EAAI,QAAQ,SAAU,SAAS9jB,EAAE,CAAC,OAAOgkB,EAAG,MAAM,CAAC,IAAIhkB,EAAE,GAAG,YAAY,0EAA0E,MAAM,CAC7yF,KAAMA,EAAE,KACR,QAASA,IAAM8jB,EAAI,QAAQ,cAC5B,EAAE,MAAM,CAAC,SAAW,GAAG,EAAE,GAAG,CAAC,QAAU,CAAC,SAASG,EAAO,CAAC,GAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,KAAK,GAAGA,EAAO,IAAI,CAAC,KAAK,SAAS,CAAC,EAAI,OAAO,KAAOA,EAAO,gBAAgB,EAAEA,EAAO,eAAe,CAAE,EAAE,SAASA,EAAO,CAAC,GAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,OAAO,GAAGA,EAAO,IAAI,CAAC,OAAO,WAAW,CAAC,EAAI,OAAO,KAAOA,EAAO,gBAAgB,EAAEA,EAAO,eAAe,CAAE,EAAE,SAASA,EAAO,CAAC,GAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,UAAU,OAAUA,EAAO,IAAI,MAAS,EAAI,OAAO,KAAOA,EAAO,gBAAgB,EAAEA,EAAO,eAAe,CAAE,EAAE,SAASA,EAAO,CAAC,GAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,YAAY,OAAUA,EAAO,IAAI,MAAS,EAAI,OAAO,KAAOA,EAAO,gBAAgB,EAAEA,EAAO,eAAe,CAAE,CAAC,EAAE,MAAQ,CAAC,SAASA,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,KAAK,GAAGA,EAAO,IAAI,CAAC,KAAK,SAAS,CAAC,EAAW,MAAOA,EAAO,gBAAgB,EAASH,EAAI,SAAS,MAAM,KAAM,SAAS,EAAC,EAAE,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,OAAO,GAAGA,EAAO,IAAI,CAAC,OAAO,WAAW,CAAC,EAAW,MAAOA,EAAO,gBAAgB,EAASH,EAAI,SAAS,MAAM,KAAM,SAAS,EAAC,EAAE,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,OAAO,OAAUA,EAAO,IAAI,MAAS,EAAW,KAAcH,EAAI,UAAU,MAAM,KAAM,SAAS,CAAC,EAAE,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,MAAM,OAAUA,EAAO,IAAI,MAAS,EAAW,KAAcH,EAAI,SAAS,MAAM,KAAM,SAAS,CAAC,EAAE,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,UAAU,OAAUA,EAAO,IAAI,MAAS,EAAW,MAAOA,EAAO,gBAAgB,EAASH,EAAI,SAAS,MAAM,KAAM,SAAS,EAAC,EAAE,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,YAAY,OAAUA,EAAO,IAAI,MAAS,EAAW,MAAOA,EAAO,gBAAgB,EAASH,EAAI,SAAS,MAAM,KAAM,SAAS,EAAC,EAAE,SAASG,EAAO,CAAC,MAAG,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAGH,EAAI,GAAGG,EAAO,QAAQ,QAAQ,GAAGA,EAAO,IAAI,OAAO,EAAW,KAAcH,EAAI,cAAc9jB,CAAC,CAAC,CAAC,EAAE,MAAQ,SAASikB,EAAO,CAAC,OAAOH,EAAI,cAAc9jB,CAAC,CAAC,CAAC,CAAC,EAAE,CAACgkB,EAAG,MAAM,CAAC,YAAY,qCAAqC,EAAE,CAAEhkB,EAAE,UAAWgkB,EAAG,MAAM,CAAC,YAAY,gFAAgF,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,YAAyBA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,4BAA4B,CAAC,EAAE;AAAA,UAAsB,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAG9jB,EAAE,IAAKgkB,EAAG,MAAM,CAAC,MAAO,qFAAuFhkB,EAAE,cAAgB,sBAAwB,GAAI,EAAE,CAAIA,EAAE,cAAwP8jB,EAAI,GAAG,EAAhPE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,YAAyBA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,yCAAyC,CAAC,EAAE;AAAA,UAAsB,CAAC,CAAC,CAAU,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAK9jB,EAAE,QAA2U8jB,EAAI,GAAG,EAAzUE,EAAG,MAAM,CAAC,YAAY,2EAA2E,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,YAAyBA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,2BAA2B,CAAC,EAAE;AAAA,UAAsB,CAAC,CAAC,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAG9jB,EAAE,KAAMgkB,EAAG,MAAM,CAAC,YAAY,uEAAuE,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,YAAyBA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,qCAAqC,CAAC,EAAE;AAAA,UAAsB,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAG9jB,EAAE,SAAW8jB,EAAI,EAAE9jB,EAAE,SAAUA,EAAE,MAAOA,CAAC,EAAIA,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE8jB,EAAI,GAAG,GAAG,EAAG9jB,EAAE,YAAagkB,EAAG,MAAM,CAAC,YAAY,aAAa,EAAE,CAACF,EAAI,GAAG;AAAA,UAAqBA,EAAI,GAAG9jB,EAAE,cAAgB8jB,EAAI,EAAE9jB,EAAE,cAAeA,EAAE,YAAaA,CAAC,EAAIA,EAAE,WAAW,EAAE;AAAA,QAAkB,CAAC,CAAC,EAAE8jB,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,sCAAsC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,4BAA4B,GAAG,CAAC,MAAQF,EAAI,aAAa,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,WAAW,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAH1tI,UAITI,EAAkB,CAAC,EC0GvB,MAAM6H,EAAU,MAAM,UAAU,QC9GyV,EDgH1W,CACd,MAAO,CAAC,SAAS,EAEjB,MAAO,CACN,MAAO,CACN,OAAQ,EACT,CACD,EAEA,MAAO,CACN,QAAS,CACJ,KAAK,QACR,KAAK,UAAU,IAAM,KAAK,eAAe,CAAC,CAC5C,CACD,EAEA,QAAS,CACR,gBAAiB,CAChB,MAAM5/B,EAAW,KAAK,MAAM,SACxB,CAACA,GAAY,CAAE,OAAO,cAAgBA,EAAS,WAGnD,IAAI,aAAaA,EAAU,aAAa,aAAaA,CAAQ,CAAC,CAC/D,EAEA,eAAgB,CACf,KAAK,KAAK,EACV,KAAK,MAAM,WAAY,0BAA0B,CAClD,EAEA,OAAQ,CACP,KAAK,SAAW,EACjB,EAEA,MAAO,CACN,KAAK,SAAW,GACT,KAAK,cACX,KAAK,YAAc,WAAW,IAAM,CACnC,KAAK,YAAc,KACd,CAAE,KAAK,UAAY,SAAS,SAAS,GACzC,KAAK,KAAK,CACZ,EAAG,EAAE,EACP,EAGA,MAAO,CACN,KAAK,OAAS,EACf,EAEA,MAAO,CACC,KAAK,SACX,KAAK,OAAS,GAChB,EAEA,aAAc,CACR,KAAK,OACT,KAAK,KAAK,EAEV,KAAK,KAAK,CACZ,EAGA,WAAY,CACX,KAAK,KAAK,EACV,KAAK,MAAM,OAAO,MAAM,CACzB,EAEA,WAAY,CACX,KAAK,KAAK,EACV,KAAK,UAAU,IAAM,KAAK,MAAM,MAAM,cAAc,UAAU,EAAE,MAAM,CAAC,CACxE,EAEA,SAASzO,EAAG,CACX,MAAMjC,EAAKiC,EAAE,OAAO,gBACfjC,IACJ,KAAK,OAAOA,CAAE,EACdA,EAAG,MAAM,EAEX,EAEA,SAASiC,EAAG,CACX,MAAMjC,EAAKiC,EAAE,OAAO,YACfjC,IACJ,KAAK,OAAOA,CAAE,EACdA,EAAG,MAAM,EAEX,EAEA,WAAY,CACX,MAAMA,EAAK,KAAK,MAAM,MAAM,kBACvBA,IACJ,KAAK,OAAOA,CAAE,EACdA,EAAG,MAAM,EAEX,EAEA,SAASiC,EAAG,CACX,KAAK,OAAOquC,EAAQ,KAAK,KAAK,MAAM,MAAM,SAAUruC,EAAE,MAAM,EAAI,CAAC,CAClE,EAEA,SAASA,EAAG,CACX,KAAK,OAAOquC,EAAQ,KAAK,KAAK,MAAM,MAAM,SAAUruC,EAAE,MAAM,EAAI,CAAC,CAClE,EAEA,OAAOoK,EAAK,CACX,MAAMkkC,EAAO,KAAK,MAAM,MAAM,SAC7BvwC,EAAKuwC,EAAKlkC,GAAO,EAAI,EAAI,KAAK,IAAIA,EAAKkkC,EAAK,OAAS,CAAC,CAAC,EAEnDvwC,IACJ,KAAK,OAAOA,CAAE,EACdA,EAAG,MAAM,EAEX,EAEA,UAAW,CACV,MAAMA,EAAK,KAAK,MAAM,MAAM,iBACvBA,IACJ,KAAK,OAAOA,CAAE,EACdA,EAAG,MAAM,EAEX,EAEA,OAAOA,EAAI,CACV,MAAM0Q,EAAW,KAAK,MAAM,MAAM,cAEjC8/B,EAAMxwC,EAAG,UACTywC,EAASzwC,EAAG,aAAewwC,EAI3Bl/B,EAAaZ,EAAS,UACtBggC,EAAgBhgC,EAAS,aAAe,SAASA,EAAS,MAAM,cAAgB,EAAG,EAAE,EAAIY,EAErFk/B,EAAMl/B,EACVZ,EAAS,SAAS,EAAG8/B,EAAMl/B,CAAU,EAE5Bm/B,EAASC,GAClBhgC,EAAS,SAAS,EAAG+/B,EAASC,CAAa,CAC7C,EAEA,cAAcrxC,EAAS,CACtB,KAAK,QAAQ,eAAiBA,EAE9B,GAAI,CACH,OAAO,QAAQ,aAAa,CAC3B,GAAG,OAAO,QAAQ,MAClB,OAAQA,EAAQ,EACjB,EAAG,SAAS,KAAK,CAClB,OAAQxB,EAAK,CAEZ,QAAQ,MAAMA,CAAG,CAClB,CAEA,KAAK,UAAU,CAChB,CACD,CACD,E,eErQI6qC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,4DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,0BAA0B,EAAE,CAAEF,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,wEAAwE,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,qCAAsC,uBAAwB,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAE,oCAAqC,+LAAgM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,wEAAwE,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,aAAa,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAE,6BAA8B,qMAAqM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,UAAU,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAE,yBAA0B,qQAAsQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,aAAa,EAAEF,EAAI,GAAIA,EAAI,UAAW,SAAS7qC,EAAI,CAAC,OAAO+qC,EAAG,MAAM,CAAC,IAAI/qC,EAAI,IAAI,YAAY,mCAAmC,EAAE,CAAC+qC,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,SAAU,WAAW,UAAU,CAAC,EAAE,YAAY,mBAAmB,MAAM,CAAC,GAAK,qBAAuB7qC,EAAI,IAAI,KAAO,oBAAoB,KAAO,OAAO,EAAE,SAAS,CAAC,MAAQA,EAAI,IAAI,QAAU6qC,EAAI,GAAGA,EAAI,SAAS7qC,EAAI,GAAG,CAAC,EAAE,GAAG,CAAC,OAAS,SAASgrC,EAAO,CAACH,EAAI,SAAS7qC,EAAI,GAAG,CAAC,CAAC,CAAC,EAAE6qC,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,4BAA4B,MAAM,CAAC,IAAM,qBAAuB/qC,EAAI,GAAG,CAAC,EAAE,CAAC+qC,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,MAAM,CAACA,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE7qC,EAAI,SAAUA,EAAI,KAAK,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAE6qC,EAAI,GAAG,GAAG,EAAG7qC,EAAI,MAAQ6qC,EAAI,QAASE,EAAG,OAAO,CAAC,YAAY,yBAAyB,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,WAAW,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAG7qC,EAAI,SAAU+qC,EAAG,OAAO,CAAC,YAAY,yBAAyB,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,YAAY,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAG7qC,EAAI,UAAW+qC,EAAG,OAAO,CAAC,YAAY,yBAAyB,EAAE,CAACF,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,wBAAwB,CAAC,EAAE;AAAA,OAAgB,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAG7qC,EAAI,YAAa+qC,EAAG,UAAU,CAAC,YAAY,iBAAiB,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAE7qC,EAAI,cAAeA,EAAI,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE6qC,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,uBAAuB,EAAE,CAAEF,EAAI,YAAaE,EAAG,MAAM,CAAC,YAAY,4CAA4C,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,WAAW,YAAY,sBAAsB,MAAM,CAAC,GAAK,WAAW,QAAU,GAAG,KAAO,UAAU,CAAC,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,UAAU,CAAC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,+CAA+C,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,YAAaE,EAAG,UAAU,CAAC,YAAY,6BAA6B,YAAY,CAAC,eAAe,QAAQ,CAAC,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAE,iCAAkC,sFAAuF,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEE,EAAG,MAAM,CAAC,YAAY,gCAAgC,YAAY,CAAC,eAAe,QAAQ,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,+BAAgC,uIAAuI,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,sDAAsD,EAAE,CAACA,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,OAAQ,WAAW,QAAQ,CAAC,EAAE,IAAI,SAAS,YAAY,sBAAsB,MAAM,CAAC,GAAK,SAAS,KAAO,UAAU,EAAE,SAAS,CAAC,QAAU,MAAM,QAAQA,EAAI,MAAM,EAAEA,EAAI,GAAGA,EAAI,OAAO,IAAI,EAAE,GAAIA,EAAI,MAAO,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIG,EAAIN,EAAI,OAAOO,EAAKJ,EAAO,OAAOK,EAAI,EAAAD,EAAK,QAAuB,GAAG,MAAM,QAAQD,CAAG,EAAE,CAAC,IAAIG,EAAI,KAAKC,EAAIV,EAAI,GAAGM,EAAIG,CAAG,EAAKF,EAAK,QAASG,EAAI,IAAIV,EAAI,OAAOM,EAAI,OAAO,CAACG,CAAG,CAAC,GAAQC,EAAI,KAAKV,EAAI,OAAOM,EAAI,MAAM,EAAEI,CAAG,EAAE,OAAOJ,EAAI,MAAMI,EAAI,CAAC,CAAC,EAAG,MAAMV,EAAI,OAAOQ,CAAI,CAAC,CAAC,CAAC,EAAER,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,QAAQ,CAAC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,uBAAuB,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sBAAsB,MAAM,CAAC,sBAAuB,CAAEF,EAAI,OAAO,EAAE,GAAG,CAAC,MAAQA,EAAI,MAAM,CAAC,EAAE,CAACA,EAAI,GAAG,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,kBAAkB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAA18K,UACTI,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,OAAO,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,ECD0J,QCyGlW,CACd,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAM5vB,EAAM,KAAK,QAAQ,OAAO,EAC/BzK,EAAWyK,EAAI,QAAQ,UAAU,EACjCg4B,EAAY,CAAC,EACbC,EAAY,CAAC,EAEd,SAAU,CAAC7xC,EAAKvB,CAAG,IAAK,OAAO,QAAQ0Q,EAAS,aAAa,CAAC,EAAG,CAChE,MAAM4gC,EAAO,CACZ,IAAA/vC,EACA,SAAUvB,EAAI,UAAY,EAC1B,SAAU,KACV,UAAWA,EAAI,cACf,UAAWA,EAAI,cACf,SAAU,oBAAoBuB,CAAG,SACjC,MAAOvB,EAAI,OAASuB,EACpB,cAAevB,EAAI,YAAc,oBAAoBuB,CAAG,QAAU,KAClE,YAAavB,EAAI,WAClB,EAEAozC,EAAU7xC,CAAG,EAAIvB,EAAI,cAEhBA,EAAI,UAAU,GAClB,QAAQ,QAAQA,EAAI,WAAW,CAAC,EAAE,KAAKyrB,GAAK,CAC3C6lB,EAAK,SAAW7lB,CACjB,CAAC,EAEF0nB,EAAU,KAAK7B,CAAI,CACpB,CAEA6B,EAAU,KAAK,CAACxhC,EAAEsJ,IAAMA,EAAE,SAAWtJ,EAAE,QAAQ,EAE/C,MAAM7B,EAAUY,EAAS,kBAAkB,EAE3C,MAAO,CACN,OAAQ,GACR,QAAS,OAAO,SAAS,OAAS,gBAClC,UAAAyiC,EACA,UAAAC,EACA,QAAAtjC,EACA,SAAUA,CACX,CACD,EAEA,SAAU,CACT,SAAU,CACT,OAAO,KAAK,WAAa,KAAK,SAAW,KAAK,MAC/C,EAEA,aAAc,CACb,OAAO,KAAK,UAAU,KAAK,QAAQ,GAAK,KAAK,UAAU,KAAK,OAAO,CACpE,CACD,EAEA,QAAS,CACR,QAAS,CACR,GAAK,CAAE,KAAK,QACX,OAEW,KAAK,QAAQ,OAAO,EAChB,QAAQ,UAAU,EAEzB,eAAe,KAAK,SAAU,KAAK,MAAM,SAAS,OAAO,CACnE,CACD,CACD,E,eCrKIo7B,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,aAAa,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,wEAAwE,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAAIF,EAAI,QAAoGE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,KAAM,WAAW,gBAAgB,CAAC,EAAE,YAAY,6GAA6G,MAAM,CAAC,YAAcA,EAAI,OAASA,EAAI,EAAE,kCAAmC,kBAAkB,EAAIA,EAAI,UAAU,KAAK,KAAO,OAAO,eAAiB,MAAM,YAAc,KAAK,EAAE,SAAS,CAAC,MAASA,EAAI,UAAU,IAAK,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,UAAW,OAAQG,EAAO,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC,EAArpBD,EAAG,KAAK,CAAC,YAAY,eAAe,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,KAAK,EAAE;AAAA,IAAU,CAAC,CAAC,CAA6jB,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,OAAQE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,YAAY,GAAG,CAAC,MAAQF,EAAI,IAAI,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,cAAe,KAAK,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAGA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQF,EAAI,IAAI,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQF,EAAI,MAAM,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,MAAM,SAAUA,EAAI,MAAM,CAAC,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,SAAW,EAAK,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQF,EAAI,IAAI,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,2BAA2B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,SAAW,EAAI,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAt+G,UACTI,EAAkB,CAAC,E,WCyEvB,IAAInhC,EAAK,EC1E6W,QD4EvW,CACd,MAAO,CACN,OAAQ,OACR,OAAQ,CACP,KAAM,QACN,QAAS,EACV,CACD,EAEA,MAAO,CACN,OAAK,KAAK,OACF,CACN,UAAWA,IACX,SAAU,GACV,QAAS,GACT,aAAW,aAAU,KAAK,MAAM,CACjC,EAEM,CACN,UAAWA,IACX,SAAU,GACV,QAAS,GACT,UAAW,IACZ,CACD,EAEA,SAAU,CACT,SAAU,CACT,OAAO,KAAK,QAAU,KAAK,UAAY,KAAK,MAC7C,EAEA,OAAQ,CACP,OAAK,OAAO,KAAK,QAAQ,MAAS,SAC1B,KAAK,EAAE,KAAK,QAAQ,KAAM,KAAK,QAAQ,IAAI,EAE5C,KAAK,QAAQ,IACrB,CACD,EAEA,QAAS,CACR,MAAO,CACN,KAAK,QAAU,GACf,KAAK,aAAY,aAAU,KAAK,MAAM,CACvC,EAEA,cAAe,CACT,KAAK,UACT,KAAK,UAAU,OAAS,CAAE,KAAK,UAAU,OAC3C,EAEA,QAAS,CACH,KAAK,OACT,KAAK,aAAY,aAAU,KAAK,MAAM,GAGtC,KAAK,QAAU,GACf,KAAK,UAAY,KAEnB,EAEA,MAAO,CACN,KAAK,MAAM,OAAQ,KAAK,SAAS,EACjC,KAAK,OAAO,CACb,CACD,CACD,E,eEtIIohC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAQD,EAAI,KAAME,EAAG,MAAMF,EAAI,GAAIA,EAAI,KAAM,SAASzrB,EAAMvQ,EAAI,CAAC,OAAOk8B,EAAG,YAAY,CAAC,IAAIl8B,EAAI,YAAY,YAAY,MAAM,CAAC,KAAOuQ,CAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEyrB,EAAI,GAAG,CAAC,EAAxO,UACTI,EAAkB,CAAC,E,WCD2V,QCenW,CACd,WAAY,CACX,YAAa,UACE,MAAM,iCACP,QAAQ,iBAAiB,EAAE,OAE1C,EAEA,MAAO,CAAC,UAAW,KAAK,EAExB,MAAO,CACN,MAAO,CACN,QAAS,GACT,MAAO,KACP,KAAM,IACP,CACD,EAEA,SAAU,CACT,KAAK,YAAY,CAClB,EAEA,QAAS,CACR,MAAM,aAAc,CACnB,GAAK,KAAK,QACT,OAED,KAAK,QAAU,GACf,KAAK,MAAQ,KACb,KAAK,KAAO,KAEZ,MAAMva,EAAO,KAAK,QAAQ,OAAO,EAAE,QAAQ,MAAM,EAChD7b,EAAM,KAAK,IAEZ,GAAK,CAAEA,EAAM,CACZ,KAAK,QAAU,GACf,KAAK,MAAQ,KACb,KAAK,KAAO,CAAC,EACb,MACD,CAEA,IAAI1U,EACJ,GAAI,CACHA,EAAO,MAAMuwB,EAAK,cAAc7b,EAAK,GAAO,EAAK,CAClD,OAAQxU,EAAK,CACZ,KAAK,QAAU,GACf,KAAK,MAAQA,EACb,MACD,CAEA,GAAK,CAAEF,GAAM,EAAI,CAChB,KAAK,MAAQ,oBACb,KAAK,QAAU,GACf,MACD,CAEOA,EAAK,OACXA,EAAO,CAAC,KAAM,CAACA,CAAI,CAAC,GAErB,KAAK,KAAOA,EAAK,KAAK,IAAIif,IACzBA,EAAM,YAAc,GACpBA,EAAM,aAAe,GAEd,CACN,QAAS,IAAMA,CAChB,EACA,EAED,KAAK,QAAU,EAChB,CACD,CACD,E,eC/EI8rB,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,4BAA4B,MAAM,CAAC,SAAUF,EAAI,YAAa,QAASA,EAAI,SAAS,CAAC,EAAE,CAACE,EAAG,MAAM,CAAC,YAAY,4CAA4C,EAAE,CAACA,EAAG,QAAQ,CAAC,IAAI,UAAU,YAAY,sBAAsB,MAAM,CAAC,GAAKF,EAAI,KAAK,SAAS,SAAWA,EAAI,WAAW,KAAO,UAAU,EAAE,SAAS,CAAC,QAAUA,EAAI,KAAK,EAAE,GAAG,CAAC,OAASA,EAAI,QAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAMF,EAAI,KAAK,QAAQ,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,KAAK,SAAWA,EAAI,EAAEA,EAAI,KAAK,SAAUA,EAAI,KAAK,KAAK,EAAIA,EAAI,KAAK,KAAK,EAAE;AAAA,KAAY,EAAGA,EAAI,OAAQE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,cAAe,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,QAASE,EAAGF,EAAI,KAAK,QAAQ,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUA,EAAI,QAAQ,KAAOA,EAAI,KAAK,MAAQA,EAAI,KAAK,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAAUA,EAAI,SAAWA,EAAI,QAASE,EAAG,SAAS,CAAC,YAAY,uCAAuC,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,QAAQ,eAAiBA,EAAI,MAAM,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iCAAiC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,aAAa,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,mBAAmB,EAAE,CAAEF,EAAI,UAAWE,EAAG,SAAS,CAAC,YAAY,iEAAiE,MAAM,CAAC,sBAAuBF,EAAI,UAAU,EAAE,MAAM,CAAC,SAAWA,EAAI,UAAU,EAAE,GAAG,CAAC,MAAQA,EAAI,KAAK,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,kBAAkB,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,YAAaE,EAAG,UAAU,CAAC,YAAY,kBAAkB,YAAY,CAAC,eAAe,QAAQ,CAAC,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAEA,EAAI,KAAK,eAAmBA,EAAI,KAAK,SAAY,eAAiBA,EAAI,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,MAAOE,EAAG,UAAU,CAAC,YAAY,CAAC,eAAe,QAAQ,CAAC,EAAE,CAACA,EAAGF,EAAI,KAAK,MAAM,UAAU,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUA,EAAI,QAAQ,KAAOA,EAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAAtuE,UACTI,EAAkB,CAAC,E,WCDmW,QCgF3W,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,OAAQ,CACF,KAAK,MAAM,UACf,KAAK,MAAM,QAAQ,cAAgB,KAAK,OAAS,KACnD,CACD,EAEA,SAAU,CACJ,KAAK,MAAM,UACf,KAAK,MAAM,QAAQ,cAAgB,KAAK,OAAS,KACnD,EAEA,QAAS,CACR,UAAW,CACV,KAAK,IAAI,KAAK,MAAM,QAAQ,OAAO,CACpC,CACD,CACD,E,eC9FIC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,6BAA6B,MAAM,CAAC,SAAUF,EAAI,YAAa,QAASA,EAAI,SAAS,CAAC,EAAE,CAACE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAMF,EAAI,KAAK,QAAQ,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,KAAK,SAAWA,EAAI,EAAEA,EAAI,KAAK,SAAUA,EAAI,KAAK,KAAK,EAAIA,EAAI,KAAK,KAAK,EAAE;AAAA,IAAU,EAAGA,EAAI,OAAQE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,cAAe,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,eAAe,CAAC,IAAI,UAAU,YAAY,WAAW,MAAM,CAAC,GAAKF,EAAI,KAAK,SAAS,SAAWA,EAAI,WAAW,MAAQA,EAAI,MAAM,UAAUA,EAAI,OAAO,SAAW,GAAK,MAAQA,EAAI,KAAK,EAAE,GAAG,CAAC,MAAQA,EAAI,OAAO,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,QAASE,EAAGF,EAAI,KAAK,QAAQ,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUA,EAAI,QAAQ,KAAOA,EAAI,KAAK,MAAQA,EAAI,KAAK,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAAUA,EAAI,SAAWA,EAAI,QAASE,EAAG,SAAS,CAAC,YAAY,uCAAuC,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,QAAQ,eAAiBA,EAAI,MAAM,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iCAAiC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,aAAa,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,UAAWE,EAAG,SAAS,CAAC,YAAY,iEAAiE,MAAM,CAAC,sBAAuBF,EAAI,UAAU,EAAE,MAAM,CAAC,SAAWA,EAAI,UAAU,EAAE,GAAG,CAAC,MAAQA,EAAI,KAAK,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,kBAAkB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,YAAaE,EAAG,UAAU,CAAC,YAAY,iBAAiB,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAEA,EAAI,KAAK,eAAmBA,EAAI,KAAK,SAAY,eAAiBA,EAAI,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,MAAOE,EAAG,UAAU,CAACA,EAAGF,EAAI,KAAK,MAAM,UAAU,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUA,EAAI,QAAQ,KAAOA,EAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAA/hE,UACTI,EAAkB,CAAC,E,sBCDmW,QCwE3W,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,SAAU,CACT,OAAQ,CACP,OAAO,KAAK,MAGL,KAAK,MAFJ,EAGT,EAEA,QAAS,CACR,OAAK,KAAK,KAAK,QAAU,KACjB,KAAK,KAAK,OAEX,EACR,EAEA,OAAQ,CACP,OAAK,KAAK,KAAK,OAAS,KAChB,KAAK,KAAK,MAEX,EACR,CACD,EAEA,SAAU,CAGT,KAAK,WAAU,YAAS,KAAK,QAAS,GAAG,CAC1C,EAEA,QAAS,CACR,QAAQxpC,EAAO,CACd,KAAK,IAAIA,GAAS,EAAE,CACrB,CACD,CACD,E,eCvGIypC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,8BAA8B,MAAM,CAAC,SAAUF,EAAI,YAAa,QAASA,EAAI,SAAS,CAAC,EAAE,CAACE,EAAG,MAAM,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,QAAQ,CAAC,YAAY,aAAa,MAAM,CAAC,IAAMF,EAAI,KAAK,QAAQ,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,KAAK,SAAWA,EAAI,EAAEA,EAAI,KAAK,SAAUA,EAAI,KAAK,KAAK,EAAIA,EAAI,KAAK,KAAK,EAAE;AAAA,IAAU,EAAGA,EAAI,OAAQE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,cAAe,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iCAAiC,EAAE,CAACA,EAAG,SAAS,CAAC,IAAI,UAAU,YAAY,8HAA8H,MAAM,CAAC,GAAKF,EAAI,KAAK,SAAS,SAAWA,EAAI,UAAU,EAAE,GAAG,CAAC,OAASA,EAAI,QAAQ,CAAC,EAAE,CAACA,EAAI,GAAIA,EAAI,YAAa,SAAS7nC,EAAE,CAAC,MAAO,CAAEA,EAAE,QAAS+nC,EAAG,WAAW,CAAC,IAAI/nC,EAAE,IAAI,MAAM,CAAC,SAAWA,EAAE,SAAS,MAAQA,EAAE,SAAW6nC,EAAI,EAAE7nC,EAAE,SAAUA,EAAE,MAAOA,CAAC,EAAIA,EAAE,KAAK,CAAC,EAAE6nC,EAAI,GAAI7nC,EAAE,QAAS,SAASiP,EAAE,CAAC,OAAO84B,EAAG,SAAS,CAAC,IAAI94B,EAAE,MAAM,SAAS,CAAC,SAAWA,EAAE,QAAU44B,EAAI,MAAM,MAAQ54B,EAAE,CAAC,CAAC,EAAE,CAAC44B,EAAI,GAAG;AAAA,SAAmBA,EAAI,GAAG54B,EAAE,SAAW44B,EAAI,EAAE54B,EAAE,SAAUA,EAAE,MAAOA,CAAC,EAAIA,EAAE,KAAK,EAAE;AAAA,OAAgB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE84B,EAAG,SAAS,CAAC,IAAI/nC,EAAE,MAAM,SAAS,CAAC,SAAWA,EAAE,QAAU6nC,EAAI,MAAM,MAAQ7nC,EAAE,CAAC,CAAC,EAAE,CAAC6nC,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAG7nC,EAAE,SAAW6nC,EAAI,EAAE7nC,EAAE,SAAUA,EAAE,MAAOA,CAAC,EAAIA,EAAE,KAAK,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE6nC,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,SAAS,CAAC,SAAWF,EAAI,QAAQ,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,IAAI,OAAO,YAAY,qIAAqI,MAAM,CAAC,SAAWF,EAAI,YAAc,CAAEA,EAAI,QAAQ,EAAE,SAAS,CAAC,MAAQA,EAAI,KAAK,EAAE,GAAG,CAAC,OAASA,EAAI,YAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,QAASE,EAAGF,EAAI,KAAK,QAAQ,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUA,EAAI,QAAQ,KAAOA,EAAI,KAAK,MAAQA,EAAI,KAAK,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAAUA,EAAI,SAAWA,EAAI,QAASE,EAAG,SAAS,CAAC,YAAY,kDAAkD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,QAAQ,eAAiBA,EAAI,MAAM,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iCAAiC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,aAAa,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,UAAWE,EAAG,SAAS,CAAC,YAAY,4EAA4E,MAAM,CAAC,sBAAuBF,EAAI,UAAU,EAAE,MAAM,CAAC,SAAWA,EAAI,UAAU,EAAE,GAAG,CAAC,MAAQA,EAAI,KAAK,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,kBAAkB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,OAASA,EAAI,KAAK,MAAM,WAAaA,EAAI,KAAK,MAAM,OAAQE,EAAG,UAAU,CAACA,EAAGF,EAAI,KAAK,MAAM,UAAU,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUA,EAAI,QAAQ,KAAOA,EAAI,KAAK,MAAQA,EAAI,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,YAAaE,EAAG,UAAU,CAAC,YAAY,iBAAiB,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAEA,EAAI,KAAK,eAAmBA,EAAI,KAAK,SAAY,eAAiBA,EAAI,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,OAASA,EAAI,KAAK,MAAM,WAAa,CAAEA,EAAI,KAAK,MAAM,OAAQE,EAAG,UAAU,CAACA,EAAGF,EAAI,KAAK,MAAM,UAAU,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUA,EAAI,QAAQ,KAAOA,EAAI,KAAK,MAAQA,EAAI,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAA3+G,UACTI,EAAkB,CAAC,E,WCDmW,QC4G3W,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,SAAU,EACX,CACD,EAEA,SAAU,CACT,aAAc,CACb,MAAM1qC,EAAM,CAAC,EACb,IAAI8yC,EAAgB,KAChB,EAAI,EAER,UAAUj0B,KAAS,KAAK,KAClBA,EAAM,WACVi0B,EAAgB,CACf,IAAKj0B,EAAM,KAAO,EAClB,QAAS,CAAC,EACV,SAAUA,EAAM,SAChB,MAAOA,EAAM,MACb,SAAUA,EAAM,QACjB,EAEA7e,EAAI,KAAK8yC,CAAa,GAEXA,GAAiB,KAC5BA,EAAc,QAAQ,KAAK,OAAO,OAAO,CAAC,EAAG,CAAC,EAAGj0B,CAAK,CAAC,EAEvD7e,EAAI,KAAK,OAAO,OAAO,CAAC,EAAG,CAAC,EAAG6e,CAAK,CAAC,EAEtC,IAGD,OAAO7e,CACR,CACD,EAEA,MAAO,CACN,MAAMP,EAAK,CACV,UAAU+nB,KAAQ,KAAK,KACtB,GAAKA,EAAK,QAAU/nB,EACnB,OAEF,KAAK,SAAW,EACjB,EAEA,WAAY,CACJ,KAAK,YACX,KAAK,SAAW,GAClB,CACD,EAEA,QAAS,CACR,UAAW,CACV,MAAM6O,EAAM,KAAK,MAAM,QAAQ,MAC9BkjC,EAAY,KAAK,KAAKljC,CAAG,EAErBkjC,GACJ,KAAK,IAAIA,EAAU,KAAK,EACxB,KAAK,SAAW,IAEhB,KAAK,SAAW,EAClB,EAEA,cAAe,CACd,MAAMtwC,EAAQ,KAAK,MAAM,KAAK,MACzBA,GAAS,MACb,KAAK,IAAIA,CAAK,CAChB,CACD,CACD,E,eC9KIypC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,sDAAsD,EAAE,CAAEF,EAAI,QAAUA,EAAI,SAAWA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,4DAA4D,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,YAAY,CAAC,EAAEF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,+EAA+E,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,0CAA0C,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,gCAAgC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAG,CAAEA,EAAI,aAAeA,EAAI,MAAM,OAAQE,EAAG,SAAS,CAAC,YAAY,gEAAgE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,YAAc,EAAI,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,qBAAsB,YAAY,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,uCAAuC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,YAAaE,EAAG,SAAS,CAAC,YAAY,gEAAgE,GAAG,CAAC,MAAQF,EAAI,OAAO,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,qBAAsB,YAAY,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,4BAA6B,uCAAuC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,YAAaE,EAAG,SAAS,CAAC,YAAY,gEAAgE,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,YAAc,EAAK,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAG,CAAEA,EAAI,MAAM,QAAUA,EAAI,YAAaE,EAAG,SAAS,CAAC,YAAY,gEAAgE,GAAG,CAAC,MAAQF,EAAI,QAAQ,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,cAAc,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,OAAO,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,iCAAkC,gDAAgD,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,gBAAgB,CAAC,MAAM,CAAC,MAAQF,EAAI,MAAM,QAAUA,EAAI,QAAQ,QAAUA,EAAI,aAAa,QAAUA,EAAI,OAAO,EAAE,GAAG,CAAC,MAAQA,EAAI,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAApxF,UACTI,EAAkB,CAAC,E,sBCDuW,QCgF/W,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,QAAS,KAAK,KAAK,KAAK,EACxB,YAAa,GACb,aAAc,KAAK,KAAK,aAAe,KAAK,KAAK,aAAa,EAAI,CAAC,CACpE,CACD,EAEA,SAAU,CACT,aAAc,CACb,OAAO,KAAK,eAAiB,KAAK,cAAc,MACjD,EAEA,SAAU,CACT,OAAO,KAAK,KAAK,SAAW,EAC7B,EAEA,OAAQ,CACP,MAAK,CAAE,KAAK,WAAa,CAAE,MAAM,QAAQ,KAAK,KAAK,EAC3C,CAAC,EAEF,KAAK,MAAM,OAAOlgC,GAAKA,GAAG,CAAC,EAAE,IAAIA,GAAKA,EAAE,CAAC,CACjD,CACD,EAEA,QAAS,CACR,SAAU,CACT,KAAK,YAAc,GACnB,KAAK,MAAM,CACZ,EAEA,UAAW,CACV,KAAK,OAAI,aAAU,KAAK,aAAa,CAAC,CACvC,EAEA,QAAQ5K,EAAM,CACb,MAAMH,KAAM,aAAUG,CAAI,EAAE,IAAI4K,IAAM,CAAC,EAAGA,CAAC,EAAE,EACzC/K,EAAI,QAAU,GACjBA,EAAI,KAAK,CAAC,EAAG,MAAM,CAAC,EACrB,KAAK,IAAIA,CAAG,CACb,CACD,CAED,E,eCxHIkrC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,gCAAgC,MAAM,CAAC,SAAUF,EAAI,YAAa,QAASA,EAAI,SAAS,CAAC,EAAE,CAACE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAMF,EAAI,KAAK,QAAQ,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,KAAK,SAAWA,EAAI,EAAEA,EAAI,KAAK,SAAUA,EAAI,KAAK,KAAK,EAAIA,EAAI,KAAK,KAAK,EAAE;AAAA,IAAU,EAAGA,EAAI,OAAQE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,cAAe,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,aAAa,CAAC,IAAI,UAAU,YAAY,WAAW,MAAM,CAAC,GAAKF,EAAI,KAAK,SAAS,SAAWA,EAAI,WAAW,MAAQA,EAAI,KAAK,EAAE,GAAG,CAAC,MAAQA,EAAI,OAAO,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,QAASE,EAAGF,EAAI,KAAK,QAAQ,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUA,EAAI,QAAQ,KAAOA,EAAI,KAAK,MAAQA,EAAI,KAAK,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAAUA,EAAI,SAAWA,EAAI,QAASE,EAAG,SAAS,CAAC,YAAY,uCAAuC,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,QAAQ,eAAiBA,EAAI,MAAM,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iCAAiC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,aAAa,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,UAAWE,EAAG,SAAS,CAAC,YAAY,iEAAiE,MAAM,CAAC,sBAAuBF,EAAI,UAAU,EAAE,MAAM,CAAC,SAAWA,EAAI,UAAU,EAAE,GAAG,CAAC,MAAQA,EAAI,KAAK,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,kBAAkB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,YAAaE,EAAG,UAAU,CAAC,YAAY,iBAAiB,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAEA,EAAI,KAAK,eAAmBA,EAAI,KAAK,SAAY,eAAiBA,EAAI,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,MAAOE,EAAG,UAAU,CAACA,EAAGF,EAAI,KAAK,MAAM,UAAU,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUA,EAAI,QAAQ,KAAOA,EAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAAz+D,UACTI,EAAkB,CAAC,E,WCDgW,QCoExW,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,QAAS,CACR,QAAQxpC,EAAO,CACd,KAAK,IAAIA,CAAK,CACf,CACD,CACD,E,eCtEIypC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,SAAS,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,KAAK,SAAWA,EAAI,EAAEA,EAAI,KAAK,SAAUA,EAAI,KAAK,KAAK,EAAIA,EAAI,KAAK,KAAK,EAAE;AAAA,GAAQ,EAAGA,EAAI,OAAQE,EAAG,OAAO,CAAC,YAAY,UAAU,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,cAAe,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,YAAaE,EAAG,UAAU,CAAC,YAAY,iBAAiB,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAEA,EAAI,KAAK,eAAmBA,EAAI,KAAK,SAAY,eAAiBA,EAAI,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,MAAOE,EAAG,UAAU,CAACA,EAAGF,EAAI,KAAK,MAAM,UAAU,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUA,EAAI,QAAQ,KAAOA,EAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,KAAM,SAAS7nC,EAAE6L,EAAI,CAAC,OAAOk8B,EAAG,MAAM,CAAC,IAAIl8B,EAAI,YAAY,WAAW,EAAE,CAACk8B,EAAG,QAAQ,CAAC,YAAY,mBAAmB,MAAM,CAAC,GAAKF,EAAI,KAAK,SAAWh8B,EAAI,KAAOg8B,EAAI,KAAK,SAAS,KAAO,OAAO,EAAE,SAAS,CAAC,MAAQ7nC,EAAE,KAAK,CAAC,CAAC,EAAE6nC,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,8BAA8B,MAAM,CAAC,IAAMF,EAAI,KAAK,SAAWh8B,CAAG,CAAC,EAAE,CAACg8B,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE7nC,EAAE,SAAUA,EAAE,MAAOA,CAAC,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAA5nC,UACTioC,EAAkB,CAAC,E,WCDuW,QCoC/W,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,CAC1B,E,eChCIC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,8BAA8B,MAAM,CAAC,SAAUF,EAAI,YAAa,QAASA,EAAI,SAAS,CAAC,EAAE,CAACE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,YAAY,aAAa,MAAM,CAAC,IAAMF,EAAI,KAAK,QAAQ,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,KAAK,SAAWA,EAAI,EAAEA,EAAI,KAAK,SAAUA,EAAI,KAAK,KAAK,EAAIA,EAAI,KAAK,KAAK,EAAE;AAAA,IAAU,EAAGA,EAAI,OAAQE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,cAAe,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,IAAI,UAAU,YAAY,4FAA4F,MAAM,CAAC,GAAKF,EAAI,KAAK,SAAS,SAAWA,EAAI,WAAW,SAAWA,EAAI,KAAK,UAAY,GAAM,KAAOA,EAAI,KAAK,MAAQ,CAAC,EAAE,GAAG,CAAC,OAASA,EAAI,QAAQ,CAAC,EAAE,CAACA,EAAI,GAAIA,EAAI,YAAa,SAAS7nC,EAAE,CAAC,MAAO,CAAEA,EAAE,QAAS+nC,EAAG,WAAW,CAAC,IAAI/nC,EAAE,IAAI,MAAM,CAAC,SAAWA,EAAE,SAAS,MAAQA,EAAE,SAAW6nC,EAAI,EAAE7nC,EAAE,SAAUA,EAAE,MAAOA,CAAC,EAAIA,EAAE,KAAK,CAAC,EAAE6nC,EAAI,GAAI7nC,EAAE,QAAS,SAASiP,EAAE,CAAC,OAAO84B,EAAG,SAAS,CAAC,IAAI94B,EAAE,MAAM,SAAS,CAAC,SAAW44B,EAAI,KAAK,SAAY,MAAM,QAAQA,EAAI,KAAK,GAAKA,EAAI,MAAM,SAAS54B,EAAE,KAAK,EAAKA,EAAE,QAAU44B,EAAI,MAAM,MAAQ54B,EAAE,CAAC,CAAC,EAAE,CAAC44B,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAG54B,EAAE,SAAW44B,EAAI,EAAE54B,EAAE,SAAUA,EAAE,MAAOA,CAAC,EAAIA,EAAE,KAAK,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE84B,EAAG,SAAS,CAAC,IAAI/nC,EAAE,MAAM,SAAS,CAAC,SAAW6nC,EAAI,KAAK,SAAY,MAAM,QAAQA,EAAI,KAAK,GAAKA,EAAI,MAAM,SAAS7nC,EAAE,KAAK,EAAKA,EAAE,QAAU6nC,EAAI,MAAM,MAAQ7nC,EAAE,CAAC,CAAC,EAAE,CAAC6nC,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAG7nC,EAAE,SAAW6nC,EAAI,EAAE7nC,EAAE,SAAUA,EAAE,MAAOA,CAAC,EAAIA,EAAE,KAAK,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE6nC,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,QAASE,EAAGF,EAAI,KAAK,QAAQ,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUA,EAAI,QAAQ,KAAOA,EAAI,KAAK,MAAQA,EAAI,KAAK,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAAUA,EAAI,SAAWA,EAAI,QAASE,EAAG,SAAS,CAAC,YAAY,uCAAuC,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,QAAQ,eAAiBA,EAAI,MAAM,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iCAAiC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,aAAa,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,UAAWE,EAAG,SAAS,CAAC,YAAY,iEAAiE,MAAM,CAAC,sBAAuBF,EAAI,UAAU,EAAE,MAAM,CAAC,SAAWA,EAAI,UAAU,EAAE,GAAG,CAAC,MAAQA,EAAI,KAAK,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,kBAAkB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,YAAaE,EAAG,UAAU,CAAC,YAAY,iBAAiB,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAEA,EAAI,KAAK,eAAmBA,EAAI,KAAK,SAAY,eAAiBA,EAAI,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,MAAOE,EAAG,UAAU,CAACA,EAAGF,EAAI,KAAK,MAAM,UAAU,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUA,EAAI,QAAQ,KAAOA,EAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAA72F,UACTI,EAAkB,CAAC,E,WCDoW,QC8F5W,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,SAAU,CACT,aAAc,CACb,MAAM1qC,EAAM,CAAC,EACb,IAAI8yC,EAAgB,KAChB,EAAI,EAER,UAAUj0B,KAAS,KAAK,KAClBA,EAAM,WACVi0B,EAAgB,CACf,IAAKj0B,EAAM,KAAO,EAClB,QAAS,CAAC,EACV,SAAUA,EAAM,SAChB,MAAOA,EAAM,MACb,SAAUA,EAAM,QACjB,EAEA7e,EAAI,KAAK8yC,CAAa,GAEXA,GAAiB,KAC5BA,EAAc,QAAQ,KAAK,OAAO,OAAO,CAAC,EAAG,CAAC,EAAGj0B,CAAK,CAAC,EAEvD7e,EAAI,KAAK,OAAO,OAAO,CAAC,EAAG,CAAC,EAAG6e,CAAK,CAAC,EAEtC,IAGD,OAAO7e,CACR,CACD,EAEA,QAAS,CACR,UAAW,CACV,GAAK,KAAK,KAAK,SAAW,CACzB,MAAMooC,EAAQ,KAAK,MAAM,QAAQ,gBAChCpoC,EAAM,CAAC,EAER,QAAQyC,EAAE,EAAGA,EAAI2lC,EAAM,OAAQ3lC,IAAK,CACnC,MAAMtC,EAAM,KAAK,KAAKioC,EAAM3lC,CAAC,EAAE,KAAK,EAC/BtC,GACJH,EAAI,KAAKG,EAAI,KAAK,CACpB,CAEA,KAAK,IAAIH,CAAG,EACZ,MACD,CAEA,MAAMsO,EAAM,KAAK,MAAM,QAAQ,MAC9BkjC,EAAY,KAAK,KAAKljC,CAAG,EAErBkjC,GACJ,KAAK,IAAIA,EAAU,KAAK,CAC1B,CACD,CACD,E,eChJI7G,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,WAAUE,EAAGD,EAAK,CAAC,IAAIE,EAAGF,EAAI,GAAG,OAAOE,EAAG,MAAM,CAAC,MAAO,CAAC,UAAWF,EAAI,MAAM,KAAK,GAAG,CAAE,CAAC,CAAC,EAA3F,UACTI,EAAkB,CAAC,E,WCAnBe,EAAS,CAAC,EAKVd,KAAY,KACdc,EACApB,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DCjBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,4BAA4B,MAAM,CAAC,SAAUF,EAAI,YAAa,QAASA,EAAI,SAAS,CAAC,EAAE,CAACE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAMF,EAAI,KAAK,QAAQ,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,KAAK,SAAWA,EAAI,EAAEA,EAAI,KAAK,SAAUA,EAAI,KAAK,KAAK,EAAIA,EAAI,KAAK,KAAK,EAAE;AAAA,IAAU,EAAGA,EAAI,OAAQE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,cAAe,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,IAAI,UAAU,YAAY,iFAAiF,MAAM,CAAC,mBAAoB,CAAEF,EAAI,OAAO,EAAE,MAAM,CAAC,GAAKA,EAAI,KAAK,SAAS,KAAOA,EAAI,KAAK,YAAcA,EAAI,YAAY,SAAWA,EAAI,UAAU,EAAE,SAAS,CAAC,MAAQA,EAAI,KAAK,EAAE,GAAG,CAAC,OAASA,EAAI,QAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,QAASE,EAAGF,EAAI,KAAK,QAAQ,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUA,EAAI,QAAQ,KAAOA,EAAI,KAAK,MAAQA,EAAI,KAAK,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAAUA,EAAI,SAAWA,EAAI,QAASE,EAAG,SAAS,CAAC,YAAY,uCAAuC,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,QAAQ,eAAiBA,EAAI,MAAM,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iCAAiC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,aAAa,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,UAAWE,EAAG,SAAS,CAAC,YAAY,iEAAiE,MAAM,CAAC,sBAAuBF,EAAI,UAAU,EAAE,MAAM,CAAC,SAAWA,EAAI,UAAU,EAAE,GAAG,CAAC,MAAQA,EAAI,KAAK,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,kBAAkB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,YAAaE,EAAG,UAAU,CAAC,YAAY,iBAAiB,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAAEA,EAAI,KAAK,eAAmBA,EAAI,KAAK,SAAY,eAAiBA,EAAI,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAK,MAAOE,EAAG,UAAU,CAACA,EAAGF,EAAI,KAAK,MAAM,UAAU,CAAC,IAAI,YAAY,MAAM,CAAC,QAAUA,EAAI,QAAQ,KAAOA,EAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAA3oE,UACTI,EAAkB,CAAC,E,WCDkW,QCsE1W,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,SAAU,CACT,MAAO,CACN,OAAO,KAAK,KAAK,MAAQ,MAC1B,EAEA,aAAc,CACb,OAAO,KAAK,KAAK,aAAe,KAAK,aACtC,CACD,EAEA,QAAS,CACR,UAAW,CACV,MAAMxpC,EAAQ,KAAK,MAAM,QAAQ,MAC5BA,GAAS,MACb,KAAK,IAAIA,CAAK,CAChB,CACD,CACD,E,eCpFIypC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,oBAAoB,MAAMF,EAAI,OAAO,EAAE,CAAEA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,0BAA0B,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,gCAAgC,CAAC,CAAC,CAAC,EAAEA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAA7T,UACTI,EAAkB,CAAC,E,WCD8V,QCatW,CACd,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,IAAIqI,KAAU,cAAW,KAAK,KAAK,QAAS,KAAM,KAAK,KAAM,KAAK,OAAO,EACpEA,aAAmB,SACvBA,EAAQ,KAAKA,GAAW,CACvB,KAAK,QAAUA,CAChB,CAAC,EAAE,MAAMjzC,GAAO,CACf,QAAQ,MAAM,+BAAgCA,CAAG,EACjD,KAAK,QAAU,EAChB,CAAC,EAEDizC,EAAU,IAEGA,IACbA,EAAU,IAEX,MAAMvxC,KAAS,cAAW,KAAK,KAAK,QAAS,KAAM,KAAK,KAAM,KAAK,OAAO,EAC1E,OAAOA,aAAkB,SAOzBA,EAAO,KAAKoT,GAAW,CACtB,KAAK,QAAUA,EACf,KAAK,QAAU,EAChB,CAAC,EAAE,MAAM9U,GAAO,CACf,QAAQ,MAAM,+BAAgCA,CAAG,EACjD,KAAK,QAAU,GACf,KAAK,QAAU,KAAK,EAAE,gBAAiB,oBAAoB,CAC5D,CAAC,EAEM,CACN,QAAS,GACT,QAAS,KACT,QAAAizC,CACD,GAnBQ,CACN,QAAS,GACT,QAASvxC,EACT,QAAAuxC,CACD,CAgBF,CAED,E,eChDIpI,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAIF,EAAI,KAAikBA,EAAI,GAAG,EAAlkBE,EAAG,MAAM,CAAC,YAAY,sBAAsB,EAAEF,EAAI,GAAIA,EAAI,YAAa,SAASh4B,EAAK,CAAC,OAAOk4B,EAAG,MAAM,CAAC,IAAIl4B,EAAK,IAAI,YAAY,uIAAuI,EAAE,CAACk4B,EAAG,IAAI,CAAC,YAAY,+BAA+B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,IAAIh4B,EAAK,IAAKA,EAAK,MAAM,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEg4B,EAAI,GAAG,GAAG,EAAEE,EAAG,IAAI,CAAC,YAAY,gCAAgC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGh4B,EAAK,SAAWg4B,EAAI,EAAEh4B,EAAK,SAAUA,EAAK,KAAK,EAAIA,EAAK,KAAK,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAWg4B,EAAI,GAAG,GAAG,EAAKA,EAAI,KAA6rBA,EAAI,GAAG,EAA9rBE,EAAG,MAAM,CAAC,YAAY,4CAA4C,EAAEF,EAAI,GAAIA,EAAI,YAAa,SAASh4B,EAAK,CAAC,OAAOk4B,EAAG,MAAM,CAAC,IAAIl4B,EAAK,IAAI,YAAY,wIAAwI,MAAMA,EAAK,MAAQ,cAAgB,GAAG,GAAG,CAAC,MAAQ,SAASm4B,EAAO,CAAC,OAAOH,EAAI,QAAQh4B,EAAMm4B,CAAM,CAAC,CAAC,CAAC,EAAE,CAACD,EAAG,IAAI,CAAC,YAAY,+BAA+B,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,IAAIh4B,EAAK,IAAKA,EAAK,MAAM,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEg4B,EAAI,GAAG,GAAG,EAAEE,EAAG,IAAI,CAAC,YAAY,gCAAgC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGh4B,EAAK,SAAWg4B,EAAI,EAAEh4B,EAAK,SAAUA,EAAK,KAAK,EAAIA,EAAK,KAAK,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAWg4B,EAAI,GAAG,GAAG,EAAGA,EAAI,KAAME,EAAG,SAAS,CAAC,YAAY,sCAAsC,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,KAAO,IAAI,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,gBAAiB,MAAM,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,MAAQ,WAAYE,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAAC,YAAY,6CAA6C,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,SAAS,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,oBAAqB,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQF,EAAI,GAAIA,EAAI,aAAc,SAASzrB,EAAM,CAAC,OAAO2rB,EAAG,KAAK,CAAC,IAAI3rB,EAAM,CAAC,CAAC,EAAE,CAAC2rB,EAAG,KAAK,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGzrB,EAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEyrB,EAAI,GAAG,GAAG,EAAEE,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,QAAQzrB,EAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEyrB,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,MAAQ,WAAYE,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAAC,YAAY,6CAA6C,EAAE,CAACA,EAAG,KAAK,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,SAAS,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,EAAE,oBAAqB,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQF,EAAI,GAAIA,EAAI,aAAc,SAASzrB,EAAM,CAAC,OAAO2rB,EAAG,KAAK,CAAC,IAAI3rB,EAAM,CAAC,CAAC,EAAE,CAAC2rB,EAAG,KAAK,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGzrB,EAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEyrB,EAAI,GAAG,GAAG,EAAEE,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,QAAQzrB,EAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEyrB,EAAI,GAAG,CAAC,CAAC,CAAC,EAAlsF,UACTI,EAAkB,CAAC,E,WC2EvB,MAAMsI,EAAc,CACnB,CACC,IAAK,QACL,MAAO,OACR,EACA,CACC,IAAK,SACL,MAAO,QACR,EACA,CACC,IAAK,sBACL,MAAO,eACR,EACA,CACC,IAAK,SACL,MAAO,QACR,EACA,CACC,IAAK,OACL,MAAO,OACP,OAAOvzC,EAAK,CACX,OAAKA,GAAO,KACJ,KAED,GAAG,KAAK,MAAMA,CAAG,CAAC,KAC1B,CACD,EACA,CACC,IAAK,cACL,MAAO,cACP,OAAOA,EAAK,CACX,OAAKA,GAAO,KACJ,KAED,GAAG,KAAK,MAAMA,CAAG,CAAC,KAC1B,CACD,EACA,CACC,IAAK,aACL,MAAO,aACP,OAAOA,EAAK,CACX,OAAKA,GAAO,KACJ,KAEDA,EAAI,YAAY,CACxB,CACD,EACA,CACC,IAAK,cACL,MAAO,cACP,OAAOA,EAAK,CACX,OAAKA,GAAO,KACJ,KAEDA,EAAI,YAAY,CACxB,CACD,CACD,EAEA,SAASwzC,EAAaxzC,EAAK,CAC1B,OAAOA,GAAO,KAAO,KAAO,KAAK,QAAQA,CAAG,CAC7C,CAFS,EAAAwzC,EAAA,gBAIT,MAAMC,EAAc,CACnB,CACC,IAAK,0BACL,MAAO,oBACP,OAAQD,CACT,EACA,CACC,IAAK,qBACL,MAAO,eACP,OAAQA,CACT,EACA,CACC,IAAK,uBACL,MAAO,WACP,OAAQ,CACP,KAAK,KAAO,UACb,EACA,OAAQA,CACT,EACA,CACC,IAAK,uBACL,MAAO,WACP,OAAQA,CACT,EACA,CACC,IAAK,iBACL,MAAO,kBACP,OAAQ,CACP,KAAK,KAAO,UACb,EACA,OAAOxzC,EAAK,CACX,OAAKA,GAAO,KACJ,KAED,OAAO,KAAKA,CAAG,EAAE,MACzB,CACD,CACD,EChLoX,EDkLrW,CACd,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,UAAW,GACX,WAAY,GACZ,OAAQ,KACR,KAAM,KACN,WAAY,IAAI,KAChB,YAAa,KACb,MAAO,KACP,OAAQ,KACR,KAAM,IACP,CACD,EAEA,SAAU,CACT,aAAc,CACb,MAAMO,EAAM,CAAC,EACb,UAAUsS,KAAQ0gC,EAAa,CAC9B,MAAMlC,EAAO,OAAO,OAAO,CAAC,EAAGx+B,CAAI,EAC5Bw+B,EAAK,WACXA,EAAK,SAAW,eAAeA,EAAK,GAAG,IAExC9wC,EAAI,KAAK8wC,CAAI,CACd,CAEA,OAAO9wC,CACR,EAEA,aAAc,CACb,MAAMA,EAAM,CAAC,EACb,UAAUsS,KAAQ4gC,EAAa,CAC9B,MAAMpC,EAAO,OAAO,OAAO,CAAC,EAAGx+B,CAAI,EAC5Bw+B,EAAK,WACXA,EAAK,SAAW,eAAeA,EAAK,GAAG,IAExC9wC,EAAI,KAAK8wC,CAAI,CACd,CAEA,OAAO9wC,CACR,EAEA,cAAe,CACd,GAAK,CAAE,KAAK,OAAO,SAClB,MAAO,CAAC,EAET,MAAMA,EAAM,OAAO,QAAQ,KAAK,MAAM,QAAQ,EAC9C,OAAAA,EAAI,KAAK,CAACoR,EAAEsJ,IAAMA,EAAE,CAAC,EAAItJ,EAAE,CAAC,CAAC,EACtBpR,CACR,EAEA,cAAe,CACd,GAAK,CAAE,KAAK,OAAO,SAClB,MAAO,CAAC,EAET,MAAMA,EAAM,OAAO,QAAQ,KAAK,MAAM,QAAQ,EAC9C,OAAAA,EAAI,KAAK,CAACoR,EAAEsJ,IAAMA,EAAE,CAAC,EAAItJ,EAAE,CAAC,CAAC,EACtBpR,CACR,EAEA,OAAQ,CACP,OAAK,KAAK,UACF,KAAK,EAAE,wBAAyB,WAAW,EACzC,KAAK,WACP,KAAK,EAAE,yBAA0B,YAAY,EAE9C,KAAK,EAAE,2BAA4B,cAAc,CACzD,EAEA,aAAc,CACb,OAAK,KAAK,aAAe,MAAQ,KAAK,YAAc,KAC5C,KAED,IAAI,KAAK,KAAK,WAAW,QAAQ,EAAI,KAAK,WAAW,CAC7D,CACD,EAEA,SAAU,CACT,KAAK,cAAgB,YAAY,KAAK,WAAW,KAAK,IAAI,EAAG,GAAI,EACjE,KAAK,cAAgB,YAAY,KAAK,WAAW,KAAK,IAAI,EAAG,GAAI,EAEjE,KAAK,WAAW,EAChB,KAAK,OAAO,EAEZ,MAAMmzC,EAAS,KAAK,KAAK,UAAU,EAEnCA,EAAO,GAAG,QAAS,KAAK,OAAQ,IAAI,EACpCA,EAAO,GAAG,cAAe,KAAK,OAAQ,IAAI,EAC1CA,EAAO,GAAG,aAAc,KAAK,OAAQ,IAAI,EACzCA,EAAO,GAAG,UAAW,KAAK,OAAQ,IAAI,EACtCA,EAAO,GAAG,gBAAiB,KAAK,OAAQ,IAAI,CAC7C,EAEA,WAAY,CACX,cAAc,KAAK,aAAa,EAChC,cAAc,KAAK,aAAa,EAEhC,KAAK,cAAgB,KACrB,KAAK,cAAgB,KAErB,MAAMA,EAAS,KAAK,KAAK,UAAU,EAEnCA,EAAO,IAAI,QAAS,KAAK,OAAQ,IAAI,EACrCA,EAAO,IAAI,cAAe,KAAK,OAAQ,IAAI,EAC3CA,EAAO,IAAI,aAAc,KAAK,OAAQ,IAAI,EAC1CA,EAAO,IAAI,UAAW,KAAK,OAAQ,IAAI,EACvCA,EAAO,IAAI,gBAAiB,KAAK,OAAQ,IAAI,CAC9C,EAEA,QAAS,CACR,QAAQ7gC,EAAMpO,EAAG,CACXoO,EAAK,OACTA,EAAK,MAAM,KAAK,KAAMpO,CAAC,CACzB,EAEA,IAAIlD,EAAKoyC,EAAK,CACb,IAAI3zC,KAAM,OAAIuB,EAAK,IAAI,EAIvB,OAHKoyC,IACJ3zC,EAAM2zC,EAAI,KAAK,KAAM3zC,CAAG,GAEpBA,GACG,KAGT,EAEA,YAAa,CACG,KAAK,KAAK,UAAU,EAC5B,KAAK,EAAI,EAEhB,KAAK,WAAa,IAAI,IACvB,EAEA,MAAM,YAAa,CAClB,GAAK,KAAK,cACT,OAED,KAAK,cAAgB,GAErB,MAAM0zC,EAAS,KAAK,KAAK,UAAU,EACnC,KAAK,MAAQA,EAAO,UAAa,MAAMA,EAAO,KAAK,mBAAmB,EAAK,KAC3E,KAAK,cAAgB,EACtB,EAEA,QAAS,CACR,MAAMA,EAAS,KAAK,KAAK,UAAU,EAEnC,KAAK,UAAYA,EAAO,UACxB,KAAK,WAAaA,EAAO,WACzB,KAAK,OAASA,EAAO,MACrB,KAAK,KAAO,KAAK,UAAYA,EAAO,WAAa,KACjD,KAAK,YAAc,KAAK,UAAYA,EAAO,YAAc,KACzD,KAAK,OAASA,EAAO,QAAQ,QAAU,CACxC,CACD,CAED,E,eEzUIxI,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,2BAA2B,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,wEAAwE,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAACA,EAAG,eAAe,CAAC,YAAY,iBAAiB,MAAM,CAAC,WAAW,OAASF,EAAI,GAAG,MAAQA,EAAI,UAAU,mBAAmB,GAAK,kBAAkB,EAAK,EAAE,YAAYA,EAAI,GAAG,CAAC,CAAC,IAAI,UAAU,GAAG,SAAS6F,EAAK,CAAiB,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,MAAO7F,EAAI,OAAQ,SAAS,SAAUS,EAAK,CAACT,EAAI,OAAOS,CAAG,EAAE,WAAW,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAAET,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,YAAY,GAAG,CAAC,MAAQF,EAAI,GAAG,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,KAAK,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAG,CAAEA,EAAI,OAAS,CAAEA,EAAI,MAAM,OAAQE,EAAG,MAAM,CAAC,YAAY,oFAAoF,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,mBAAoB,UAAU,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEE,EAAG,KAAK,CAAC,YAAY,2BAA2B,EAAEF,EAAI,GAAIA,EAAI,MAAO,SAAS7nC,EAAE,CAAC,OAAO+nC,EAAG,KAAK,CAAC,IAAI/nC,EAAE,YAAY,iGAAiG,EAAE,CAAC+nC,EAAG,MAAM,CAAC,YAAY,2BAA2B,EAAE,CAAEF,EAAI,SAAUE,EAAG,IAAI,CAAC,YAAY,WAAW,MAAM,CAAC,KAAQ,uBAAyB/nC,CAAE,EAAE,GAAG,CAAC,MAAQ,SAASgoC,EAAO,CAAC,OAAAA,EAAO,eAAe,EAASH,EAAI,WAAW7nC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC6nC,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAG7nC,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,EAAE+nC,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAG7nC,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAE6nC,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,OAAO7nC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC+nC,EAAG,OAAO,CAAC,YAAY,6BAA6B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAA5hE,UACTI,EAAkB,CAAC,E,sBC8DvB,IAAI14B,EAAU,EC/D0W,QDiEzW,CACd,OAAQ,CAAC,GAAY,EACrB,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAO,CACN,GAAIA,IACJ,OAAQ,GACR,SAAU,EACX,CACD,EAEA,SAAU,CACT,MAAM4I,EAAM,KAAK,QAAQ,OAAO,EAEhC,KAAK,OAASA,EAAI,QAAQ,kBAAkB,EAC5C,KAAK,OAASA,EAAI,QAAQ,aAAa,EAEvC,KAAK,SAAW,GAAO;AACxB,EAEA,QAAS,CACR,KAAM,CACL,GAAK,CAAE,KAAK,QAAQ,OACnB,OAED,MAAMy4B,EAAS,KAAK,OAAO,YAAY,EAEjC7f,EAAS,MAAM,KAAK,KAAK,KAAK,EAC/BA,EAAO,SAAS6f,CAAM,IAG3B7f,EAAO,KAAK6f,CAAM,EAClB,KAAK,IAAI7f,CAAM,EAChB,EAEA,OAAOhM,EAAM,CACZ,MAAMgM,EAAS,MAAM,KAAK,KAAK,KAAK,EACnCllB,EAAMklB,EAAO,QAAQhM,CAAI,EAErBlZ,IAAQ,KAGRklB,EAAO,SAAW,EACtB,KAAK,MAAM,GAEXA,EAAO,OAAOllB,EAAK,CAAC,EACpB,KAAK,IAAIklB,CAAM,GAEjB,EAEA,WAAW,EAAG,CAEd,EAEA,MAAM,UAAU4H,EAAO,CACtB,GAAK,CAAE,KAAK,OACX,MAAO,CAAC,EAET,MAAMx7B,EAAO,MAAM,KAAK,OAAO,gBAAgBw7B,CAAK,EACpD,OAAO,MAAM,QAAQx7B,CAAI,EAGlBA,EAAK,IAAI4K,IAAM,CAAC,KAAMA,CAAC,EAAE,EAFxB,CAAC,CAGV,CACD,CACD,E,eE5HImgC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,sEAAsE,EAAE,CAAIF,EAAI,SAA0WA,EAAI,GAAG,EAAvWE,EAAG,MAAM,CAAC,YAAY,kDAAkD,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,iCAAiC,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gEAAgE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,iCAAiC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAKA,EAAI,QAAiZA,EAAI,GAAG,EAA/YE,EAAG,MAAM,CAAC,YAAY,kDAAkD,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,gCAAgC,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gEAAgE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,0EAA0E,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAWA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gBAAgB,EAAE,CAAIF,EAAI,QAAyFE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,EAAG,WAAW,aAAa,CAAC,EAAE,YAAY,6GAA6G,MAAM,CAAC,YAAcA,EAAI,OAASA,EAAI,EAAE,gCAAiC,gBAAgB,EAAIA,EAAI,UAAU,EAAE,KAAO,OAAO,eAAiB,MAAM,YAAc,KAAK,EAAE,SAAS,CAAC,MAASA,EAAI,UAAU,CAAE,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,UAAW,IAAKG,EAAO,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC,EAAvnBD,EAAG,KAAK,CAAC,YAAY,eAAe,EAAE,CAACA,EAAG,MAAM,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAA0iB,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,6BAA6B,EAAE,CAAIF,EAAI,QAAoDE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,EAAG,WAAW,aAAa,CAAC,EAAE,YAAY,gHAAgH,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,UAAW,IAAKG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAACT,EAAG,SAAS,CAAC,MAAM,CAAC,MAAQ,MAAM,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,MAAM,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,MAAM,CAAC,MAAQ,MAAM,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,MAAM,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,MAAM,CAAC,MAAQ,KAAK,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,OAAO,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAA98BE,EAAG,OAAO,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,SAAS,CAAC,CAAC,CAAC,CAAs6B,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,6BAA6B,EAAE,CAAEF,EAAI,QAASE,EAAG,eAAe,CAAC,MAAM,CAAC,SAAW,GAAK,aAAa,GAAM,QAAUF,EAAI,EAAE,0BAA2B,OAAO,CAAC,EAAE,MAAM,CAAC,MAAOA,EAAI,UAAU,EAAG,SAAS,SAAUS,EAAK,CAACT,EAAI,KAAKA,EAAI,UAAW,IAAKS,CAAG,CAAC,EAAE,WAAW,aAAa,CAAC,CAAC,EAAGT,EAAI,KAAK,EAAGE,EAAG,MAAM,CAAC,YAAY,yDAAyD,EAAE,CAACA,EAAG,SAAS,CAAC,MAAQ,qBAAwBF,EAAI,KAAK,CAAI,EAAE,CAACA,EAAI,GAAG;AAAA;AAAA,KAAyB,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,OAAO,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,yDAAyD,MAAMF,EAAI,QAAU,aAAe,YAAY,EAAE,CAAIA,EAAI,QAAiDE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,iBAAiB,MAAOF,EAAI,UAAU,EAAG,WAAW,cAAc,UAAU,CAAC,OAAS,EAAI,CAAC,CAAC,EAAE,YAAY,qGAAqG,YAAY,CAAC,MAAQ,MAAM,EAAE,MAAM,CAAC,KAAO,SAAS,KAAO,GAAG,EAAE,SAAS,CAAC,MAASA,EAAI,UAAU,CAAE,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,UAAW,IAAKA,EAAI,GAAGG,EAAO,OAAO,KAAK,CAAC,CAAC,EAAE,KAAO,SAASA,EAAO,CAAC,OAAOH,EAAI,aAAa,CAAC,CAAC,CAAC,CAAC,EAA5jBE,EAAG,OAAO,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,KAAK,CAAC,CAAC,CAAC,CAAC,EAAwhBA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,8BAA+B,UAAU,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,SAAWA,EAAI,QAAQ,EAAGE,EAAG,MAAM,CAAC,YAAY,yHAAyH,EAAE,CAAEF,EAAI,QAASE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,EAAG,WAAW,aAAa,CAAC,EAAE,YAAY,0CAA0C,MAAM,CAAC,GAAK,aAAeA,EAAI,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAU,MAAM,QAAQA,EAAI,UAAU,CAAC,EAAEA,EAAI,GAAGA,EAAI,UAAU,EAAE,IAAI,EAAE,GAAIA,EAAI,UAAU,CAAE,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIG,EAAIN,EAAI,UAAU,EAAEO,EAAKJ,EAAO,OAAOK,EAAI,EAAAD,EAAK,QAAuB,GAAG,MAAM,QAAQD,CAAG,EAAE,CAAC,IAAIG,EAAI,KAAKC,EAAIV,EAAI,GAAGM,EAAIG,CAAG,EAAKF,EAAK,QAASG,EAAI,GAAIV,EAAI,KAAKA,EAAI,UAAW,IAAKM,EAAI,OAAO,CAACG,CAAG,CAAC,CAAC,EAAQC,EAAI,IAAKV,EAAI,KAAKA,EAAI,UAAW,IAAKM,EAAI,MAAM,EAAEI,CAAG,EAAE,OAAOJ,EAAI,MAAMI,EAAI,CAAC,CAAC,CAAC,CAAG,MAAMV,EAAI,KAAKA,EAAI,UAAW,IAAKQ,CAAG,CAAE,CAAC,CAAC,CAAC,EAAER,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAASE,EAAG,QAAQ,CAAC,YAAY,0CAA0C,MAAM,CAAC,IAAM,aAAeF,EAAI,EAAE,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,IAAI,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAGA,EAAI,QAAQ,EAAGE,EAAG,MAAM,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,IAAI,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,+BAAgC,gBAAgB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAAUA,EAAI,SAAWA,EAAI,QAAQ,GAAIE,EAAG,MAAM,CAAC,YAAY,yHAAyH,EAAE,CAAEF,EAAI,QAASE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,EAAG,WAAW,aAAa,CAAC,EAAE,YAAY,0CAA0C,MAAM,CAAC,GAAK,QAAUA,EAAI,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAU,MAAM,QAAQA,EAAI,UAAU,CAAC,EAAEA,EAAI,GAAGA,EAAI,UAAU,EAAE,IAAI,EAAE,GAAIA,EAAI,UAAU,CAAE,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIG,EAAIN,EAAI,UAAU,EAAEO,EAAKJ,EAAO,OAAOK,EAAI,EAAAD,EAAK,QAAuB,GAAG,MAAM,QAAQD,CAAG,EAAE,CAAC,IAAIG,EAAI,KAAKC,EAAIV,EAAI,GAAGM,EAAIG,CAAG,EAAKF,EAAK,QAASG,EAAI,GAAIV,EAAI,KAAKA,EAAI,UAAW,IAAKM,EAAI,OAAO,CAACG,CAAG,CAAC,CAAC,EAAQC,EAAI,IAAKV,EAAI,KAAKA,EAAI,UAAW,IAAKM,EAAI,MAAM,EAAEI,CAAG,EAAE,OAAOJ,EAAI,MAAMI,EAAI,CAAC,CAAC,CAAC,CAAG,MAAMV,EAAI,KAAKA,EAAI,UAAW,IAAKQ,CAAG,CAAE,CAAC,CAAC,CAAC,EAAER,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAASE,EAAG,QAAQ,CAAC,YAAY,0CAA0C,MAAM,CAAC,IAAM,QAAUF,EAAI,EAAE,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,KAAK,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAGA,EAAI,QAAQ,EAAGE,EAAG,MAAM,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,4BAA4B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,KAAK,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,mBAAmB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,YAAcA,EAAI,SAAWA,EAAI,QAAQ,GAAIE,EAAG,MAAM,CAAC,YAAY,yHAAyH,EAAE,CAAEF,EAAI,QAASE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,EAAG,WAAW,aAAa,CAAC,EAAE,YAAY,0CAA0C,MAAM,CAAC,GAAK,aAAeA,EAAI,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAU,MAAM,QAAQA,EAAI,UAAU,CAAC,EAAEA,EAAI,GAAGA,EAAI,UAAU,EAAE,IAAI,EAAE,GAAIA,EAAI,UAAU,CAAE,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIG,EAAIN,EAAI,UAAU,EAAEO,EAAKJ,EAAO,OAAOK,EAAI,EAAAD,EAAK,QAAuB,GAAG,MAAM,QAAQD,CAAG,EAAE,CAAC,IAAIG,EAAI,KAAKC,EAAIV,EAAI,GAAGM,EAAIG,CAAG,EAAKF,EAAK,QAASG,EAAI,GAAIV,EAAI,KAAKA,EAAI,UAAW,IAAKM,EAAI,OAAO,CAACG,CAAG,CAAC,CAAC,EAAQC,EAAI,IAAKV,EAAI,KAAKA,EAAI,UAAW,IAAKM,EAAI,MAAM,EAAEI,CAAG,EAAE,OAAOJ,EAAI,MAAMI,EAAI,CAAC,CAAC,CAAC,CAAG,MAAMV,EAAI,KAAKA,EAAI,UAAW,IAAKQ,CAAG,CAAE,CAAC,CAAC,CAAC,EAAER,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAASE,EAAG,QAAQ,CAAC,YAAY,0CAA0C,MAAM,CAAC,IAAM,aAAeF,EAAI,EAAE,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,KAAK,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAGA,EAAI,QAAQ,EAAGE,EAAG,MAAM,CAAC,YAAY,uCAAuC,EAAE,CAACA,EAAG,OAAO,CAAC,YAAY,2BAA2B,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,KAAK,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACA,EAAG,WAAW,CAAC,MAAM,CAAC,OAASF,EAAI,EAC1/R,+BACA;AAAA;AAAA,sEACD,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,YAAcA,EAAI,SAAWA,EAAI,QAAQ,QAASE,EAAG,MAAM,CAAC,YAAY,yHAAyH,EAAE,CAAEF,EAAI,QAASE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,UAAU,OAAQ,WAAW,kBAAkB,CAAC,EAAE,YAAY,0CAA0C,MAAM,CAAC,GAAK,UAAYA,EAAI,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAU,MAAM,QAAQA,EAAI,UAAU,MAAM,EAAEA,EAAI,GAAGA,EAAI,UAAU,OAAO,IAAI,EAAE,GAAIA,EAAI,UAAU,MAAO,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIG,EAAIN,EAAI,UAAU,OAAOO,EAAKJ,EAAO,OAAOK,EAAI,EAAAD,EAAK,QAAuB,GAAG,MAAM,QAAQD,CAAG,EAAE,CAAC,IAAIG,EAAI,KAAKC,EAAIV,EAAI,GAAGM,EAAIG,CAAG,EAAKF,EAAK,QAASG,EAAI,GAAIV,EAAI,KAAKA,EAAI,UAAW,SAAUM,EAAI,OAAO,CAACG,CAAG,CAAC,CAAC,EAAQC,EAAI,IAAKV,EAAI,KAAKA,EAAI,UAAW,SAAUM,EAAI,MAAM,EAAEI,CAAG,EAAE,OAAOJ,EAAI,MAAMI,EAAI,CAAC,CAAC,CAAC,CAAG,MAAMV,EAAI,KAAKA,EAAI,UAAW,SAAUQ,CAAG,CAAE,CAAC,CAAC,CAAC,EAAER,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,QAASE,EAAG,QAAQ,CAAC,YAAY,0CAA0C,MAAM,CAAC,IAAM,UAAYF,EAAI,EAAE,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,wBAAwB,CAAC,CAAC,CAAC,EAAGF,EAAI,KAAK,OAAQE,EAAG,OAAO,CAAC,YAAY,uBAAuB,CAAC,EAAEF,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,qCAAqC,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,OAAQE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,YAAY,GAAG,CAAC,MAAQF,EAAI,IAAI,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,KAAK,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAGA,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQF,EAAI,IAAI,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQF,EAAI,MAAM,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAGA,EAAI,SAAUE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAAC,OAAOH,EAAI,MAAM,SAAUA,EAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,SAAW,EAAK,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,8BAA8B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEE,EAAG,MAAM,CAAC,YAAY,kBAAkB,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQF,EAAI,IAAI,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,2BAA2B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,eAAgB,MAAM,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,YAAY,sDAAsD,GAAG,CAAC,MAAQ,SAASC,EAAO,CAACH,EAAI,SAAW,EAAI,CAAC,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,6BAA6B,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGA,EAAI,EAAE,iBAAkB,QAAQ,CAAC,EAAE;AAAA,KAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAHv+H,UAITI,EAAkB,CAAC,E,+BCmQvB,IAAInhC,EAAK,ECvQ2W,QDyQrW,CACd,MAAO,CACN,KAAM,OACN,UAAW,CACV,KAAM,QACN,QAAS,EACV,EACA,SAAU,CACT,KAAM,QACN,QAAS,EACV,EACA,MAAO,CACN,KAAM,QACN,QAAS,EACV,EACA,QAAS,CACR,KAAM,QACN,QAAS,EACV,EACA,UAAW,CACV,KAAM,QACN,QAAS,EACV,EACA,OAAQ,CACP,KAAM,QACN,QAAS,EACV,CACD,EAEA,MAAO,CACN,MAAMgjC,EAAU,QAAQhjC,GAAI,GAE5B,OAAK,KAAK,OACF,CACN,GAAIgjC,EACJ,SAAU,GACV,QAAS,GACT,aAAW,aAAU,KAAK,IAAI,CAC/B,EAEM,CACN,GAAIA,EACJ,SAAU,GACV,QAAS,GACT,UAAW,IACZ,CACD,EAEA,SAAU,CACT,SAAU,CACT,OAAO,KAAK,QAAU,KAAK,UAAY,KAAK,IAC7C,EAEA,UAAW,CACV,MAAM3sC,EAAO,KAAK,QACjBuE,EAAIvE,EAAK,EAEV,IAAIsrB,EAAItrB,EAAK,EAERuE,IAAM,OACV+mB,KAAI,gBAAaA,CAAC,EAET/mB,IAAM,SACf+mB,KAAI,iBAAcA,CAAC,GAEpB,GAAI,CACH,WAAI,OAAOA,CAAC,EACL,EACR,MAAa,CACZ,MAAO,EACR,CACD,EAEA,SAAU,CACT,MAAMtrB,EAAO,KAAK,QACjBuE,EAAIvE,EAAK,EAEV,IAAIsrB,EAAItrB,EAAK,EAEb,OAAKuE,IAAM,OACV+mB,KAAI,gBAAaA,CAAC,EAET/mB,IAAM,SACf+mB,KAAI,iBAAcA,CAAC,GAEb,IAAOA,CAAC,CAChB,EAEA,WAAY,CACX,MAAM/mB,EAAI,KAAK,MAAQ,KAAK,KAAK,EACjC,OAAKA,IAAM,OACH,KAAK,EAAE,0BAA2B,MAAM,EAEtCA,IAAM,MACR,KAAK,EAAE,yBAA0B,OAAO,EAEtCA,IAAM,OACR,KAAK,EAAE,0BAA2B,MAAM,EAEtCA,IAAM,QACR,KAAK,EAAE,gCAAiC,cAAc,EAEvD,KAAK,EAAE,kBAAmB,eAAe,CACjD,CACD,EAEA,QAAS,CACR,MAAO,CACN,KAAK,QAAU,GACf,KAAK,UAAY,OAAO,OAAO,CAAC,OAAQ,EAAK,KAAG,aAAU,KAAK,IAAI,CAAC,CACrE,EAEA,cAAe,CACT,KAAK,UACT,KAAK,UAAU,OAAS,CAAE,KAAK,UAAU,OAC3C,EAEA,QAAS,CACH,KAAK,OACT,KAAK,aAAY,aAAU,KAAK,IAAI,GAGpC,KAAK,QAAU,GACf,KAAK,UAAY,KAEnB,EAEA,MAAO,CACD,KAAK,UAAY,KAAK,UAAU,IAC/B,OAAO,KAAK,UAAU,GAAM,SAChC,KAAK,UAAU,EAAI,KAAK,MAAM,KAAK,UAAU,CAAC,EAE9C,KAAK,UAAU,EAAI,GAGrB,KAAK,MAAM,OAAQ,KAAK,SAAS,EACjC,KAAK,OAAO,CACb,CACD,CACD,E,eE7YIwmC,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,4DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,8BAA8B,EAAE,CAACA,EAAG,KAAK,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,GAAG,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,WAAW,CAAC,YAAY,aAAa,MAAM,CAAC,OAASF,EAAI,QAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAGA,EAAI,YAAaE,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,uBAAwB,yCAAyC,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAE,CAACE,EAAG,SAAS,CAAC,YAAY,uBAAuB,GAAG,CAAC,MAAQF,EAAI,MAAM,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,UAAU,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAKA,EAAI,SAA0OE,EAAG,MAAM,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,8FAA+F,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAjZE,EAAG,SAAS,CAAC,YAAY,qCAAqC,GAAG,CAAC,MAAQF,EAAI,MAAM,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,sBAAuB,kBAAkB,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAoL,CAAC,EAAE,CAAC,CAAC,EAA7/B,UACTI,EAAkB,CAAC,E,sBCoCvB,IAAI14B,EAAU,ECrCsW,QDuCrW,CACd,OAAQ,CAAC,GAAa,EACtB,MAAO,CAAC,OAAQ,SAAS,EAEzB,MAAO,CACN,MAAMme,EAAO,KAAK,KAAK,QAAQ,EAE/B,MAAO,CACN,GAAIne,IAEJ,SAAUme,EAAOA,EAAK,iBAAiB,KAAK,KAAK,IAAI,EAAI,GAEzD,IAAK,KAAK,KAAK,IAChB,CACD,EAEA,SAAU,CACT,YAAa,CACZ,OAAK,KAAK,KAAK,YACP,KAAK,EAAE,KAAK,KAAK,YAAa,KAAK,KAAK,MAAM,EAC5C,KAAK,KAAK,OACZ,KAAK,KAAK,OAEX,KAAK,EAAE,qBAAsB,qCAAqC,CAC1E,EAEA,UAAW,CACV,OAAK,KAAK,KAAK,WACP,KAAK,EAAE,KAAK,KAAK,WAAY,KAAK,KAAK,KAAK,EAC7C,KAAK,KAAK,KAClB,EAEA,aAAc,CACb,OAAO,MAAM,QAAQ,KAAK,KAAK,GAAK,KAAK,MAAM,SAAS,KAAK,GAAG,CACjE,CACD,EAEA,QAAS,CACR,QAAS,CACR,MAAM1wB,EAAM,MAAM,QAAQ,KAAK,KAAK,EAAI,CAAC,GAAG,KAAK,KAAK,EAAI,CAAC,EAC3DA,EAAI,KAAK,KAAK,GAAG,EACjB,KAAK,IAAIA,CAAG,CACb,EAEA,QAAS,CACR,GAAK,KAAK,SACT,OAED,MAAM0wB,EAAO,KAAK,KAAK,QAAQ,EACxBA,IAGP,KAAK,SAAW,GAChBA,EAAK,aAAa,KAAK,GAAG,EAC3B,CACD,CAED,E,eEzFIwa,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,kEAAkE,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,uDAAuD,EAAE,CAACA,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,KAAM,WAAW,YAAY,CAAC,EAAE,YAAY,sBAAsB,MAAM,CAAC,GAAK,WAAaA,EAAI,MAAM,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAU,MAAM,QAAQA,EAAI,MAAM,IAAI,EAAEA,EAAI,GAAGA,EAAI,MAAM,KAAK,IAAI,EAAE,GAAIA,EAAI,MAAM,IAAK,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIG,EAAIN,EAAI,MAAM,KAAKO,EAAKJ,EAAO,OAAOK,EAAI,EAAAD,EAAK,QAAuB,GAAG,MAAM,QAAQD,CAAG,EAAE,CAAC,IAAIG,EAAI,KAAKC,EAAIV,EAAI,GAAGM,EAAIG,CAAG,EAAKF,EAAK,QAASG,EAAI,GAAIV,EAAI,KAAKA,EAAI,MAAO,OAAQM,EAAI,OAAO,CAACG,CAAG,CAAC,CAAC,EAAQC,EAAI,IAAKV,EAAI,KAAKA,EAAI,MAAO,OAAQM,EAAI,MAAM,EAAEI,CAAG,EAAE,OAAOJ,EAAI,MAAMI,EAAI,CAAC,CAAC,CAAC,CAAG,MAAMV,EAAI,KAAKA,EAAI,MAAO,OAAQQ,CAAG,CAAE,CAAC,CAAC,CAAC,EAAER,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,sBAAsB,MAAM,CAAC,IAAM,WAAaF,EAAI,MAAM,EAAE,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAEA,EAAI,KAAK,KAAMA,EAAI,KAAK,KAAK,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAjnC,UACTI,EAAkB,CAAC,ECmBvB,IAAI14B,EAAU,ECpBiW,QDsBhW,CACd,MAAO,CAAC,QAAS,OAAQ,UAAW,SAAS,EAE7C,MAAO,CACN,MAAO,CACN,GAAIA,GACL,CACD,CACD,E,eEvBI24B,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,oCAAoC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,YAAcF,EAAI,EAAE,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAEA,EAAI,KAAK,KAAMA,EAAI,KAAK,KAAK,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,oDAAoD,EAAE,CAACA,EAAG,SAAS,CAAC,MAAM,CAAC,MAAQ,EAAE,IAAI,CAAC,EAAE,CAAEF,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,2BAA2B,MAAM,CAAC,IAAMF,EAAI,QAAQ,aAAeA,EAAI,QAAQ,KAAK,IAAMA,EAAI,QAAQ,SAAS,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,eAAe,CAAC,YAAY,iBAAiB,MAAM,CAAC,WAAW,YAAcF,EAAI,GAAG,MAAQA,EAAI,gBAAgB,MAAQA,EAAI,OAAO,mBAAmB,GAAK,kBAAkB,EAAK,EAAE,GAAG,CAAC,SAAWA,EAAI,UAAU,EAAE,YAAYA,EAAI,GAAG,CAAC,CAAC,IAAI,UAAU,GAAG,SAAS6F,EAAK,CAAC,MAAO,CAAC3F,EAAG,oBAAoB,CAAC,MAAM,CAAC,KAAO2F,EAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAA38B,UACTzF,EAAkB,CAAC,E,WCqCvB,IAAI14B,EAAU,ECtC6V,QDwC5V,CACd,MAAO,CAAC,QAAS,OAAQ,UAAW,SAAS,EAE7C,MAAO,CACN,MAAO,CACN,GAAIA,IACJ,QAAS,KACT,UAAW,IACZ,CACD,EAEA,SAAU,CACT,QAAS,CACR,OAAO,KAAK,SAAW,KAAK,QAAQ,aAAe,KAAK,MAAM,KAAK,IACpE,CACD,EAEA,MAAO,CACN,MAAO,CACN,SAAU,CACT,KAAK,cAAc,CACpB,EACA,KAAM,EACP,CACD,EAEA,SAAU,CACT,MAAM4I,EAAM,aAAa,IAAI,EAC7B,KAAK,OAASA,EAAI,QAAQ,kBAAkB,EAC5C,KAAK,iBAAgB,YAAS,KAAK,cAAe,EAAE,CACrD,EAEA,eAAgB,CACf,KAAK,cAAgB,IACtB,EAEA,SAAU,CACT,KAAK,cAAc,CACpB,EAEA,QAAS,CACR,MAAM,eAAgB,CAOrB,GANK,CAAE,KAAK,QAAU,KAAK,YAAc,KAAK,MAAM,KAAK,KAGzD,KAAK,QAAU,KACf,KAAK,UAAY,KAAK,MAAM,KAAK,GAE5B,CAAE,KAAK,WACX,OAED,MAAMhb,EAAO,MAAM,KAAK,OAAO,YAAY,KAAK,SAAS,EACpDA,EACJ,KAAK,WAAU,aAAUA,CAAI,EAE7B,KAAK,QAAU,IACjB,EAEA,MAAM,gBAAgBw7B,EAAO,CAC5B,GAAK,CAAE,KAAK,OACX,MAAO,CAAC,EAET,MAAMx7B,EAAO,MAAM,KAAK,OAAO,sBAAsBw7B,CAAK,EAC1D,MAAK,CAAEx7B,GAAQ,CAAEA,EAAK,MACd,CAAC,KAEF,aAAUA,EAAK,KAAK,CAC5B,EAEA,WAAW4nB,EAAM,CAChB,KAAK,QAAUA,EACf,KAAK,MAAM,KAAK,KAAOA,GAAM,MAAQ,KACrC,KAAK,MAAM,KAAK,GAAKA,GAAM,IAAM,KACjC,KAAK,MAAM,KAAK,UAAYA,GAAM,WAAa,IAChD,CACD,CACD,E,eE7GImjB,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,oCAAoC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,WAAaF,EAAI,EAAE,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAEA,EAAI,KAAK,KAAMA,EAAI,KAAK,KAAK,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,gCAAgC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,6CAA6C,EAAE,CAAEF,EAAI,QAASE,EAAG,MAAM,CAAC,YAAY,2BAA2B,MAAM,CAAC,IAAMF,EAAI,QAAQ,YAAY,IAAMA,EAAI,QAAQ,eAAe,CAAC,CAAC,EAAEA,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,eAAe,CAAC,YAAY,iBAAiB,MAAM,CAAC,WAAW,WAAaF,EAAI,GAAG,MAAQA,EAAI,WAAW,MAAQA,EAAI,OAAO,mBAAmB,GAAK,kBAAkB,EAAK,EAAE,GAAG,CAAC,SAAWA,EAAI,UAAU,EAAE,YAAYA,EAAI,GAAG,CAAC,CAAC,IAAI,UAAU,GAAG,SAAS6F,EAAK,CAAC,MAAO,CAAC3F,EAAG,oBAAoB,CAAC,MAAM,CAAC,KAAO2F,EAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAA7/B,UACTzF,EAAkB,CAAC,E,WCuCvB,IAAI14B,EAAU,ECxC4V,QD0C3V,CACd,MAAO,CAAC,QAAS,OAAQ,UAAW,SAAS,EAE7C,MAAO,CACN,MAAO,CACN,GAAIA,IACJ,QAAS,KACT,UAAW,IACZ,CACD,EAEA,SAAU,CACT,QAAS,CACR,OAAO,KAAK,SAAW,KAAK,QAAQ,aAAe,KAAK,MAAM,KAAK,KACpE,CACD,EAEA,MAAO,CACN,MAAO,CACN,SAAU,CACT,KAAK,UAAU,CAChB,EACA,KAAM,EACP,CACD,EAEA,SAAU,CACT,MAAM4I,EAAM,aAAa,IAAI,EAC7B,KAAK,OAASA,EAAI,QAAQ,kBAAkB,EAC5C,KAAK,aAAY,YAAS,KAAK,UAAW,EAAE,CAC7C,EAEA,eAAgB,CACf,KAAK,UAAY,IAClB,EAEA,SAAU,CACT,KAAK,UAAU,CAChB,EAEA,QAAS,CACR,MAAM,WAAY,CAOjB,GANK,CAAE,KAAK,QAAU,KAAK,YAAc,KAAK,MAAM,KAAK,KAGzD,KAAK,QAAU,KACf,KAAK,UAAY,KAAK,MAAM,KAAK,GAE5B,CAAE,KAAK,WACX,OAED,MAAMhb,EAAO,MAAM,KAAK,OAAO,QAAQ,KAAK,SAAS,EAChDA,EACJ,KAAK,WAAU,aAAUA,CAAI,EAE7B,KAAK,QAAU,IACjB,EAEA,MAAM,WAAWw7B,EAAO,CACvB,GAAK,CAAE,KAAK,OACX,MAAO,CAAC,EAET,MAAMx7B,EAAO,MAAM,KAAK,OAAO,iBAAiBw7B,CAAK,EACrD,MAAK,CAAEx7B,GAAQ,CAAEA,EAAK,MACd,CAAC,KAEF,aAAUA,EAAK,KAAK,CAC5B,EAEA,WAAW4nB,EAAM,CAChB,KAAK,QAAUA,EACf,KAAK,MAAM,KAAK,MAAQA,GAAQA,EAAK,OAAS,KAC9C,KAAK,MAAM,KAAK,GAAKA,GAAQA,EAAK,IAAM,IACzC,CACD,CACD,E,eE9GImjB,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,oCAAoC,EAAE,CAACA,EAAG,MAAM,CAACA,EAAG,SAAS,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAEA,EAAI,KAAK,KAAMA,EAAI,KAAK,KAAK,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,gBAAgB,CAAC,YAAY,iBAAiB,MAAM,CAAC,QAAUF,EAAI,QAAQ,QAAUA,EAAI,QAAQ,YAAYA,EAAI,KAAK,QAAQ,EAAE,MAAM,CAAC,MAAOA,EAAI,MAAM,KAAK,CAAC,EAAG,SAAS,SAAUS,EAAK,CAACT,EAAI,KAAKA,EAAI,MAAM,KAAM,EAAGS,CAAG,CAAC,EAAE,WAAW,eAAe,CAAC,CAAC,CAAC,EAAE,CAAC,EAAET,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,mCAAmC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gFAAgF,EAAE,CAACA,EAAG,SAAS,CAAC,MAAM,CAACF,EAAI,OAAS,WAAa,cAAc,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gEAAgE,EAAE,CAAEF,EAAI,OAAQE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,sDAAsD,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,2DAA2D,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,MAAM,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,gBAAgB,CAAC,YAAY,iBAAiB,MAAM,CAAC,QAAUF,EAAI,QAAQ,QAAUA,EAAI,QAAQ,YAAYA,EAAI,KAAK,QAAQ,EAAE,MAAM,CAAC,MAAOA,EAAI,MAAM,KAAK,CAAC,EAAG,SAAS,SAAUS,EAAK,CAACT,EAAI,KAAKA,EAAI,MAAM,KAAM,EAAGS,CAAG,CAAC,EAAE,WAAW,eAAe,CAAC,CAAC,CAAC,EAAE,CAAC,EAAET,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,mCAAmC,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,gFAAgF,EAAE,CAACA,EAAG,SAAS,CAAC,MAAM,CAACF,EAAI,OAAS,eAAiB,UAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gEAAgE,EAAE,CAAEF,EAAI,OAAQE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,0DAA0D,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,EAAEE,EAAG,OAAO,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,uDAAuD,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,yBAA0B,MAAM,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,gBAAgB,CAAC,YAAY,iBAAiB,MAAM,CAAC,QAAUF,EAAI,QAAQ,QAAUA,EAAI,QAAQ,YAAYA,EAAI,KAAK,QAAQ,EAAE,MAAM,CAAC,MAAOA,EAAI,MAAM,KAAK,CAAC,EAAG,SAAS,SAAUS,EAAK,CAACT,EAAI,KAAKA,EAAI,MAAM,KAAM,EAAGS,CAAG,CAAC,EAAE,WAAW,eAAe,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAA/uF,UACTL,EAAkB,CAAC,E,WC2EvB,IAAI14B,EAAU,EC5EuV,QD8EtV,CACd,MAAO,CAAC,QAAS,OAAQ,UAAW,SAAS,EAE7C,MAAO,CACN,MAAO,CACN,GAAIA,GACL,CACD,EAEA,SAAU,CACT,QAAS,CACR,SAAO,gBAAa,KAAK,MAAM,KAAK,CAAC,EAAG,KAAK,OAAO,CACrD,EAEA,QAAS,CACR,OAAO,KAAK,QAAU,KAAK,OAAO,KAAK,OAAO,CAC/C,CACD,CACD,E,eEzFI24B,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,oCAAoC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,SAAWF,EAAI,EAAE,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAEA,EAAI,KAAK,KAAMA,EAAI,KAAK,KAAK,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,SAAU,WAAW,UAAU,CAAC,EAAE,YAAY,kGAAkG,MAAM,CAAC,GAAK,SAAWA,EAAI,EAAE,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,SAASG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,EAAE,CAACX,EAAI,GAAIA,EAAI,SAAU,SAASgJ,EAAIhlC,EAAI,CAAC,MAAO,CAACk8B,EAAG,SAAS,CAAC,SAAS,CAAC,MAAQ8I,CAAG,CAAC,EAAE,CAAChJ,EAAI,GAAG;AAAA,OAAeA,EAAI,GAAGh8B,EAAM,CAAC,EAAE,KAAKg8B,EAAI,GAAGgJ,EAAI,KAAK,EAAE,KAAKhJ,EAAI,GAAGgJ,EAAI,KAAK,EAAE,OAAIhJ,EAAI,GAAGgJ,EAAI,MAAM,EAAE;AAAA,KAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEhJ,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iBAAiB,EAAE,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAE,+BAAgC,+GAA+G,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAzyC,UACTI,EAAkB,CAAC,E,WC4BvB,IAAI14B,EAAU,EC7B4V,QD+B3V,CACd,MAAO,CAAC,QAAS,OAAQ,UAAW,SAAS,EAE7C,MAAO,CACN,MAAO,CACN,GAAIA,IACJ,aAAc,GACd,SAAU,CAAC,EACX,MAAO,GACP,SAAU,IACX,CACD,EAEA,SAAU,CACT,KAAK,eAAe,CACrB,EAEA,MAAO,CACN,UAAW,CACV,GAAK,CAAE,KAAK,OAAS,CAAE,KAAK,SAC3B,OAED,MAAMpS,EAAO,KAAK,MAAM,KAAO,KAAK,MAAM,MAAQ,CAAC,EAEnDA,EAAK,MAAQ,KAAK,SAAS,MAC3BA,EAAK,MAAQ,KAAK,SAAS,QAAQ,KAAK,QAAQ,EAChDA,EAAK,IAAM,KAAK,SAAS,IACzBA,EAAK,KAAO,KAAK,SAAS,KAC1BA,EAAK,MAAQ,KAAK,SAAS,MAC3BA,EAAK,OAAS,KAAK,SAAS,MAC7B,CACD,EAEA,QAAS,CACR,MAAM,gBAAiB,CACtB,IAAIA,EACJ,GAAI,CACHA,EAAO,MAAM,OAAO,iBAAiB,CACtC,OAAQE,EAAK,CACZ,QAAQ,MAAM,+BAAgCA,CAAG,EACjD,KAAK,aAAe,GACpB,KAAK,SAAW,CAAC,EACjB,MACD,CAEA,KAAK,SAAW,CAAC,EACjB,UAAUwzC,KAAO1zC,EAAK,QACrB,KAAK,SAAS,KAAK,CAClB,IAAK0zC,EAAI,IACT,KAAMA,EAAI,KACV,MAAOA,EAAI,MACX,MAAOA,EAAI,MACX,OAAQA,EAAI,MACb,CAAC,EAGG,KAAK,MAAM,OACf,KAAK,YAAW,eAAY,KAAK,SAAU,KAAK,MAAM,IAAI,GAE3D,KAAK,MAAQ,GAEN,KAAK,WACX,KAAK,SAAW,KAAK,SAAS,CAAC,EACjC,CACD,CACD,E,eEzFI3I,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,4DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,oCAAoC,EAAE,CAACA,EAAG,SAAS,CAACF,EAAI,GAAG;AAAA,IAASA,EAAI,GAAGA,EAAI,EAAEA,EAAI,KAAK,KAAMA,EAAI,KAAK,KAAK,CAAC,EAAE;AAAA,EAAM,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,gBAAgB,CAAC,MAAM,CAAC,QAAUF,EAAI,QAAQ,QAAUA,EAAI,QAAQ,YAAYA,EAAI,KAAK,QAAQ,EAAE,MAAM,CAAC,MAAOA,EAAI,MAAM,KAAM,SAAS,SAAUS,EAAK,CAACT,EAAI,KAAKA,EAAI,MAAO,OAAQS,CAAG,CAAC,EAAE,WAAW,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAjd,UACTL,EAAkB,CAAC,ECgBvB,IAAI14B,EAAU,ECjB2V,QDmB1V,CACd,MAAO,CAAC,QAAS,OAAQ,UAAW,SAAS,EAE7C,MAAO,CACN,MAAO,CACN,GAAIA,GACL,CACD,CACD,E,eEpBI24B,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,oCAAoC,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,QAAUF,EAAI,EAAE,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAEA,EAAI,KAAK,KAAMA,EAAI,KAAK,KAAK,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,KAAK,MAAO,WAAW,kBAAkB,CAAC,EAAE,YAAY,kGAAkG,MAAM,CAAC,GAAK,QAAUA,EAAI,EAAE,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,MAAM,KAAM,QAASG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEX,EAAI,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,wBAAwB,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,YAAY,EAAE,CAACA,EAAG,SAAS,CAAC,MAAM,CAAC,OAAS,0BAA0B,QAAU,YAAY,EAAE,YAAYF,EAAI,GAAG,CAAC,CAAC,IAAI,MAAM,GAAG,UAAU,CAAC,MAAO,CAACE,EAAG,OAAO,CAAC,YAAY,eAAe,EAAE,CAACF,EAAI,GAAGA,EAAI,GAAGA,EAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,EAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEA,EAAI,GAAIA,EAAI,MAAO,SAAS9I,EAAK,CAAC,OAAOgJ,EAAG,MAAM,CAAC,IAAIhJ,EAAK,IAAI,YAAY,0CAA0C,EAAE,CAACgJ,EAAG,QAAQ,CAAC,MAAM,CAAC,IAAM,QAAUF,EAAI,GAAK,SAAW9I,EAAK,GAAG,CAAC,EAAE,CAAC8I,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE9I,EAAK,KAAMA,EAAK,KAAK,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAE8I,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,KAAK,OAAO9I,EAAK,GAAG,EAAG,WAAW,6BAA6B,CAAC,EAAE,YAAY,iGAAiG,MAAM,CAAC,GAAK,QAAU8I,EAAI,GAAK,SAAW9I,EAAK,GAAG,EAAE,SAAS,CAAC,MAAS8I,EAAI,MAAM,KAAK,OAAO9I,EAAK,GAAG,CAAE,EAAE,GAAG,CAAC,MAAQ,SAASiJ,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,MAAM,KAAK,OAAQ9I,EAAK,IAAKiJ,EAAO,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAA19D,UACTC,EAAkB,CAAC,UAAY,CAAC,IAAIJ,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOD,EAAI,GAAIA,EAAI,OAAQ,SAAS59B,EAAE1L,EAAI,CAAC,OAAOwpC,EAAG,SAAS,CAAC,IAAAxpC,EAAQ,SAAS,CAAC,MAAQA,CAAG,CAAC,EAAE,CAACspC,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,QAAQtpC,CAAG,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,E,WCyDhQ,IAAIgR,EAAU,EC1DyV,QD4DxV,CACd,MAAO,CAAC,QAAS,OAAQ,UAAW,SAAS,EAE7C,MAAO,CACN,MAAO,CACN,GAAIA,IACJ,OAAQ,CAAC,EACT,YAAa,CAAC,CACf,CACD,EAEA,SAAU,CACT,OAAQ,CACP,OAAO,KAAK,OAAO,KAAK,MAAM,KAAK,KAAK,CACzC,EAEA,KAAM,CACL,GAAK,CAAE,KAAK,MACX,OAAO,KAER,MAAMuvB,EAAQ,CAAC,EAEf,UAAUC,KAAQ,KAAK,MAAO,CAC7B,MAAMtgC,EAAQ,KAAK,MAAM,KAAK,OAAOsgC,EAAK,GAAG,EAC7CD,EAAMC,EAAK,GAAG,EAAItgC,GAAS,IAAIsgC,EAAK,GAAG,GAAGA,EAAK,SAAW,IAAM,EAAE,GACnE,CAEA,GAAI,CACH,OAAO,UAAU,IAAI,IAAI,KAAK,MAAM,IAAID,CAAK,EAAG,KAAK,MAAM,OAAS,WAAW,KAAK,MAAM,MAAM,GAAK,QAAQ,CAAC,CAC/G,MAAa,CACZ,MAAO,wBACR,CACD,EAEA,OAAQ,CACP,MAAMvhC,EAAM,CAAC,EACb,GAAK,CAAE,KAAK,OAAS,CAAE,KAAK,MAAM,MACjC,OAAOA,EAER,UAAUwhC,KAAQ,KAAK,MAAM,MAC5B,GAAK,OAAOA,GAAS,SAAW,CAC/B,MAAMlhC,EAAOkhC,EAAK,KAAK,QAAQ,kBAAmB,CAAC90B,EAAGpD,EAAGD,IAAM,GAAGC,CAAC,IAAID,CAAC,EAAE,EAE1ErJ,EAAI,KAAK,CACR,IAAKwhC,EAAK,KACV,KAAM,8BAA8B,KAAK,MAAM,IAAI,IAAIA,EAAK,IAAI,GAChE,MAAOlhC,EAAK,CAAC,EAAE,kBAAkB,EAAIA,EAAK,OAAO,CAAC,EAClD,SAAUkhC,EAAK,QAChB,CAAC,CACF,CAGD,OAAOxhC,CACR,CACD,EAEA,MAAO,CACN,MAAO,CACN,SAAU,CAEV,EACA,KAAM,EACP,CACD,EAEA,SAAU,CACT,MAAM4a,EAAM,aAAa,IAAI,EAC5B24B,EAAS,KAAK,OAAS34B,GAAOA,EAAI,QAAQ,aAAa,EAExD,KAAK,UAAS,aAAU24B,EAAO,UAAU,CAAC,EAC1C,KAAK,eAAc,aAAUA,EAAO,cAAc,CAAC,CACpD,EAEA,QAAS,CACR,QAAQpmC,EAAO,CACd,MAAMqmC,EAAW,8BAA8BrmC,CAAK,GAC9CoE,EAAQ,KAAK,YAAYpE,CAAK,EAAI,KAAK,YAAYA,CAAK,GAAKA,EAAM,QACxE,gBACA,CAACT,EAAGg1B,EAAQD,IAAW,GAAGC,EAAS,IAAM,EAAE,GAAGD,EAAO,kBAAkB,CAAC,EACzE,EAEA,OAAO,KAAK,EAAE+R,EAAUjiC,CAAK,CAC9B,CACD,CACD,E,eEzIIo5B,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,4DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,kEAAkE,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,+BAA+B,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAEA,EAAI,KAAK,KAAMA,EAAI,KAAK,KAAK,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,YAAY,MAAM,CAAC,IAAM,cAAgBF,EAAI,EAAE,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,6BAA8B,QAAQ,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,KAAK,CAAC,EAAG,WAAW,eAAe,CAAC,EAAE,YAAY,qHAAqH,MAAM,CAAC,GAAK,cAAgBA,EAAI,GAAG,KAAO,MAAM,EAAE,SAAS,CAAC,MAASA,EAAI,MAAM,KAAK,CAAC,CAAE,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,MAAM,KAAM,EAAGG,EAAO,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEH,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,YAAY,MAAM,CAAC,IAAM,YAAcF,EAAI,EAAE,CAAC,EAAE,CAACA,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,MAAM,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,KAAK,CAAC,EAAG,WAAW,eAAe,CAAC,EAAE,YAAY,qHAAqH,MAAM,CAAC,GAAK,YAAcA,EAAI,GAAG,KAAO,MAAM,EAAE,SAAS,CAAC,MAASA,EAAI,MAAM,KAAK,CAAC,CAAE,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,MAAM,KAAM,EAAGG,EAAO,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAApkD,UACTC,EAAkB,CAAC,ECiCvB,IAAI14B,EAAU,EClCyV,QDoCxV,CACd,MAAO,CAAC,QAAS,OAAQ,UAAW,SAAS,EAE7C,MAAO,CACN,MAAO,CACN,GAAIA,GACL,CACD,CACD,E,eErCI24B,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,6DClBzB,IAAIN,EAAS,YAAY,CAAC,IAAIC,EAAI,KAASC,EAAGD,EAAI,eAAmBE,EAAGF,EAAI,MAAM,IAAIC,EAAG,OAAOC,EAAG,UAAU,CAAC,YAAY,kEAAkE,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,8CAA8C,EAAE,CAACA,EAAG,MAAM,CAAC,YAAY,WAAW,EAAE,CAACF,EAAI,GAAG;AAAA,KAAWA,EAAI,GAAGA,EAAI,EAAEA,EAAI,KAAK,KAAMA,EAAI,KAAK,KAAK,CAAC,EAAE;AAAA,GAAQ,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAKA,EAAI,SAA8WA,EAAI,QAA+aA,EAAI,GAAG,EAA7aE,EAAG,MAAM,CAAC,YAAY,kDAAkD,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,iCAAiC,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gEAAgE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,qCAAsC,+FAA+F,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAArxBE,EAAG,MAAM,CAAC,YAAY,kDAAkD,EAAE,CAACA,EAAG,SAAS,CAAC,YAAY,iCAAiC,CAAC,EAAEF,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,gEAAgE,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,qCAAsC,0BAA0B,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAicA,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,KAAK,MAAO,WAAW,kBAAkB,CAAC,EAAE,YAAY,iGAAiG,MAAM,CAAC,GAAK,SAAWA,EAAI,GAAG,KAAO,OAAO,eAAiB,MAAM,YAAc,KAAK,EAAE,SAAS,CAAC,MAASA,EAAI,MAAM,KAAK,KAAM,EAAE,GAAG,CAAC,MAAQ,SAASG,EAAO,CAAIA,EAAO,OAAO,WAAqBH,EAAI,KAAKA,EAAI,MAAM,KAAM,QAASG,EAAO,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEH,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,KAAK,KAAM,WAAW,iBAAiB,CAAC,EAAE,YAAY,gHAAgH,MAAM,CAAC,GAAK,QAAUA,EAAI,EAAE,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIQ,EAAgB,MAAM,UAAU,OAAO,KAAKR,EAAO,OAAO,QAAQ,SAASiB,EAAE,CAAC,OAAOA,EAAE,QAAQ,CAAC,EAAE,IAAI,SAASA,EAAE,CAAC,IAAIjsC,EAAM,WAAYisC,EAAIA,EAAE,OAASA,EAAE,MAAM,OAAOjsC,CAAG,CAAC,EAAG6qC,EAAI,KAAKA,EAAI,MAAM,KAAM,OAAQG,EAAO,OAAO,SAAWQ,EAAgBA,EAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAACT,EAAG,SAAS,CAAC,MAAM,CAAC,MAAQ,MAAM,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,MAAM,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,MAAM,CAAC,MAAQ,MAAM,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,0BAA2B,MAAM,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,SAAS,CAAC,MAAM,CAAC,MAAQ,KAAK,CAAC,EAAE,CAACF,EAAI,GAAG;AAAA,MAAaA,EAAI,GAAGA,EAAI,EAAE,2BAA4B,OAAO,CAAC,EAAE;AAAA,IAAU,CAAC,CAAC,CAAC,CAAC,EAAEA,EAAI,GAAG,GAAG,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACA,EAAG,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAOF,EAAI,MAAM,KAAK,UAAW,WAAW,sBAAsB,CAAC,EAAE,YAAY,0CAA0C,MAAM,CAAC,GAAK,aAAeA,EAAI,GAAG,KAAO,UAAU,EAAE,SAAS,CAAC,QAAU,MAAM,QAAQA,EAAI,MAAM,KAAK,SAAS,EAAEA,EAAI,GAAGA,EAAI,MAAM,KAAK,UAAU,IAAI,EAAE,GAAIA,EAAI,MAAM,KAAK,SAAU,EAAE,GAAG,CAAC,OAAS,SAASG,EAAO,CAAC,IAAIG,EAAIN,EAAI,MAAM,KAAK,UAAUO,EAAKJ,EAAO,OAAOK,EAAI,EAAAD,EAAK,QAAuB,GAAG,MAAM,QAAQD,CAAG,EAAE,CAAC,IAAIG,EAAI,KAAKC,EAAIV,EAAI,GAAGM,EAAIG,CAAG,EAAKF,EAAK,QAASG,EAAI,GAAIV,EAAI,KAAKA,EAAI,MAAM,KAAM,YAAaM,EAAI,OAAO,CAACG,CAAG,CAAC,CAAC,EAAQC,EAAI,IAAKV,EAAI,KAAKA,EAAI,MAAM,KAAM,YAAaM,EAAI,MAAM,EAAEI,CAAG,EAAE,OAAOJ,EAAI,MAAMI,EAAI,CAAC,CAAC,CAAC,CAAG,MAAMV,EAAI,KAAKA,EAAI,MAAM,KAAM,YAAaQ,CAAG,CAAE,CAAC,CAAC,CAAC,EAAER,EAAI,GAAG,GAAG,EAAEE,EAAG,QAAQ,CAAC,YAAY,gFAAgF,MAAM,CAAC,IAAM,aAAeF,EAAI,EAAE,CAAC,EAAE,CAACE,EAAG,OAAO,CAAC,YAAY,YAAY,EAAE,CAACF,EAAI,GAAG;AAAA;AAAA,MAA4B,EAAEE,EAAG,MAAM,CAAC,YAAY,iEAAiE,EAAE,CAACF,EAAI,GAAG;AAAA,QAAiBA,EAAI,GAAGA,EAAI,EAAE,kCAAmC,gBAAgB,CAAC,EAAE;AAAA,MAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAz3H,UACTI,EAAkB,CAAC,E,+BCsEvB,IAAI14B,EAAU,ECvE0V,QDyEzV,CACd,MAAO,CAAC,QAAS,OAAQ,UAAW,SAAS,EAE7C,MAAO,CACN,MAAO,CACN,GAAIA,GACL,CACD,EAEA,SAAU,CACT,OAAQ,CACP,MAAM6B,EAAO,KAAK,MAAM,KAAK,KAC7B,IAAIqX,EAAI,KAAK,MAAM,KAAK,MAExB,OAAKrX,IAAS,OACbqX,KAAI,gBAAaA,CAAC,EACTrX,IAAS,SAClBqX,KAAI,iBAAcA,CAAC,GAEbA,CACR,EAEA,UAAW,CACV,GAAI,CACH,WAAI,OAAO,KAAK,MAAO,IAAI,KAAK,MAAM,KAAK,UAAY,GAAK,GAAG,EAAE,EAC1D,EACR,MAAa,CACZ,MAAO,EACR,CACD,EAEA,SAAU,CACT,OAAO,IAAO,KAAK,KAAK,CACzB,CACD,CACD,E,eErGIyf,KAAY,KACd,EACAN,EACAK,EACA,GACA,KACA,KACA,IAEF,EAEA,QAAeC,EAAU,O,kBClBzB,IAAI2F,EAAM,CACT,sBAAuB,MACvB,uBAAwB,MACxB,mBAAoB,MACpB,cAAe,MACf,mBAAoB,MACpB,uBAAwB,MACxB,2BAA4B,MAC5B,0BAA2B,MAC3B,yBAA0B,MAC1B,oBAAqB,MACrB,4BAA6B,MAC7B,sBAAuB,MACvB,kBAAmB,MACnB,qBAAsB,MACtB,qBAAsB,MACtB,0BAA2B,MAC3B,oBAAqB,KACrB,6BAA8B,MAC9B,uBAAwB,KACxB,yBAA0B,MAC1B,oBAAqB,MACrB,sBAAuB,MACvB,2BAA4B,MAC5B,uBAAwB,MACxB,yBAA0B,MAC1B,wBAAyB,MACzB,kBAAmB,MACnB,kBAAmB,MACnB,oBAAqB,MACrB,kBAAmB,KACnB,gBAAiB,MACjB,uBAAwB,MACxB,kBAAmB,MACnB,kBAAmB,MACnB,oBAAqB,MACrB,uBAAwB,KACxB,wBAAyB,MACzB,yBAA0B,MAC1B,iBAAkB,KAClB,sBAAuB,MACvB,kBAAmB,MACnB,0BAA2B,MAC3B,0BAA2B,MAC3B,0BAA2B,MAC3B,8BAA+B,MAC/B,uBAAwB,MACxB,8BAA+B,MAC/B,2BAA4B,MAC5B,uBAAwB,MACxB,yBAA0B,MAC1B,qBAAsB,MACtB,oBAAqB,MACrB,wBAAyB,MACzB,oBAAqB,MACrB,oBAAqB,IACtB,EAGA,SAASmD,EAAepnC,EAAK,CAC5B,IAAI9C,EAAKmqC,EAAsBrnC,CAAG,EAClC,OAAOsnC,EAAoBpqC,CAAE,CAC9B,CAHS,EAAAkqC,EAAA,kBAIT,SAASC,EAAsBrnC,EAAK,CACnC,GAAG,CAACsnC,EAAoB,EAAErD,EAAKjkC,CAAG,EAAG,CACpC,IAAInI,EAAI,IAAI,MAAM,uBAAyBmI,EAAM,GAAG,EACpD,MAAAnI,EAAE,KAAO,mBACHA,CACP,CACA,OAAOosC,EAAIjkC,CAAG,CACf,CAPS,EAAAqnC,EAAA,yBAQTD,EAAe,KAAO,YAA8B,CACnD,OAAO,OAAO,KAAKnD,CAAG,CACvB,EAFsB,sBAGtBmD,EAAe,QAAUC,EACzBjoC,EAAO,QAAUgoC,EACjBA,EAAe,GAAK,K,kBC5EpB,IAAInD,EAAM,CACT,WAAY,CACX,MACA,IACD,EACA,gBAAiB,CAChB,MACA,IACD,EACA,YAAa,CACZ,KACD,EACA,YAAa,CACZ,KACD,EACA,aAAc,CACb,MACA,GACD,EACA,mBAAoB,CACnB,MACA,IACD,CACD,EACA,SAASsD,EAAoBvnC,EAAK,CACjC,GAAG,CAACsnC,EAAoB,EAAErD,EAAKjkC,CAAG,EACjC,OAAO,QAAQ,QAAQ,EAAE,KAAK,IAAM,CACnC,IAAInI,EAAI,IAAI,MAAM,uBAAyBmI,EAAM,GAAG,EACpD,MAAAnI,EAAE,KAAO,mBACHA,CACP,CAAC,EAGF,IAAIoH,EAAMglC,EAAIjkC,CAAG,EAAG9C,EAAK+B,EAAI,CAAC,EAC9B,OAAO,QAAQ,IAAIA,EAAI,MAAM,CAAC,EAAE,IAAIqoC,EAAoB,CAAC,CAAC,EAAE,KAAK,IACzDA,EAAoB,EAAEpqC,EAAI,EAAM,CACvC,CACF,CAbS,EAAAqqC,EAAA,uBAcTA,EAAoB,KAAO,IAAO,OAAO,KAAKtD,CAAG,EACjDsD,EAAoB,GAAK,MACzBnoC,EAAO,QAAUmoC,C,kBCxCjB,IAAItD,EAAM,CACT,mBAAoB,MACpB,mBAAoB,MACpB,gBAAiB,MACjB,kBAAmB,KACnB,yBAA0B,KAC1B,wBAAyB,MACzB,iBAAkB,MAClB,wBAAyB,MACzB,cAAe,MACf,iBAAkB,MAClB,oBAAqB,MACrB,iBAAkB,MAClB,eAAgB,MAChB,mBAAoB,MACpB,mBAAoB,MACpB,yBAA0B,IAC3B,EAGA,SAASmD,EAAepnC,EAAK,CAC5B,IAAI9C,EAAKmqC,EAAsBrnC,CAAG,EAClC,OAAOsnC,EAAoBpqC,CAAE,CAC9B,CAHS,EAAAkqC,EAAA,kBAIT,SAASC,EAAsBrnC,EAAK,CACnC,GAAG,CAACsnC,EAAoB,EAAErD,EAAKjkC,CAAG,EAAG,CACpC,IAAInI,EAAI,IAAI,MAAM,uBAAyBmI,EAAM,GAAG,EACpD,MAAAnI,EAAE,KAAO,mBACHA,CACP,CACA,OAAOosC,EAAIjkC,CAAG,CACf,CAPS,EAAAqnC,EAAA,yBAQTD,EAAe,KAAO,YAA8B,CACnD,OAAO,OAAO,KAAKnD,CAAG,CACvB,EAFsB,sBAGtBmD,EAAe,QAAUC,EACzBjoC,EAAO,QAAUgoC,EACjBA,EAAe,GAAK,K","sources":["webpack://frankerfacez/./src/modules/chat/emoji.js","webpack://frankerfacez/./src/modules/main_menu/components.js","webpack://frankerfacez/./src/modules/main_menu/provider-mixin.js","webpack://frankerfacez/./src/modules/main_menu/setting-mixin.js","webpack://frankerfacez/./src/sites/base.js","webpack://frankerfacez/./src/sites/shared/player.jsx","webpack://frankerfacez/./src/utilities/compat/webmunch.js","webpack://frankerfacez/./src/utilities/compat/elemental.ts","webpack://frankerfacez/./src/utilities/compat/subpump.ts","webpack://frankerfacez/./src/sites/twitch-twilight/styles/main.scss","webpack://frankerfacez/./src/sites/twitch-twilight/index.js","webpack://frankerfacez/./src/sites/twitch-twilight/modules/bits_button.js","webpack://frankerfacez/./src/sites/twitch-twilight/modules/bttv_compat.js","webpack://frankerfacez/./src/sites/twitch-twilight/modules/channel.jsx","webpack://frankerfacez/./src/sites/twitch-twilight/modules/chat/scroller.js","webpack://frankerfacez/./src/sites/twitch-twilight/modules/chat/rich_content.jsx","webpack://frankerfacez/./src/sites/twitch-twilight/modules/chat/line.js","webpack://frankerfacez/./src/sites/twitch-twilight/modules/chat/settings_menu.jsx","webpack://frankerfacez/./src/sites/twitch-twilight/modules/chat/emote_menu.jsx","webpack://frankerfacez/./src/sites/twitch-twilight/modules/chat/input.jsx","webpack://frankerfacez/./src/sites/twitch-twilight/modules/chat/viewer_card.jsx","webpack://frankerfacez/./src/sites/twitch-twilight/modules/chat/index.js","webpack://frankerfacez/./src/sites/twitch-twilight/modules/chat/points.js","webpack://frankerfacez/./src/sites/twitch-twilight/modules/compat_emote_menu.js","webpack://frankerfacez/./src/sites/twitch-twilight/modules/css_tweaks/index.js","webpack://frankerfacez/./src/sites/twitch-twilight/modules/dashboard.js","webpack://frankerfacez/./src/sites/twitch-twilight/modules/directory/game.jsx","webpack://frankerfacez/./src/sites/twitch-twilight/modules/directory/index.jsx","webpack://frankerfacez/./src/sites/twitch-twilight/modules/layout.js","webpack://frankerfacez/./src/sites/twitch-twilight/modules/menu_button.jsx","webpack://frankerfacez/./src/sites/twitch-twilight/modules/mod-view.jsx","webpack://frankerfacez/./src/sites/twitch-twilight/modules/player.jsx","webpack://frankerfacez/./src/sites/twitch-twilight/styles/color_normalizer.scss","webpack://frankerfacez/./src/sites/twitch-twilight/modules/theme/index.js","webpack://frankerfacez/./src/sites/twitch-twilight/modules/video_chat/index.jsx","webpack://frankerfacez/./src/utilities/compat/apollo.js","webpack://frankerfacez/./src/utilities/markdown.js","webpack://frankerfacez/./src/sites/twitch-twilight/modules/loadable.tsx","webpack://frankerfacez/./src/sites/twitch-twilight/modules/sub_button.tsx","webpack://frankerfacez/./src/utilities/color.ts","webpack://frankerfacez/./src/utilities/compat/fine-router.ts","webpack://frankerfacez/./src/utilities/compat/fine.ts","webpack://frankerfacez/./src/utilities/dialog.ts","webpack://frankerfacez/./src/utilities/dom.ts","webpack://frankerfacez/./styles/opendyslexic.scss","webpack://frankerfacez/./src/utilities/fonts.ts","webpack://frankerfacez/./src/utilities/graphql.ts","webpack://frankerfacez/./src/utilities/time.ts","webpack://frankerfacez/./src/utilities/twitch-data.ts","webpack://frankerfacez/./src/sites/twitch-twilight/modules/chat/sub_status.gql","webpack://frankerfacez/./src/modules/chat/actions/components/edit-ban.vue?367f","webpack://frankerfacez/./src/modules/chat/actions/components/edit-ban.vue?9660","webpack://frankerfacez/./src/modules/chat/actions/components/edit-ban.vue","webpack://frankerfacez/./src/modules/chat/actions/components/edit-ban.vue?e676","webpack://frankerfacez/./src/modules/chat/actions/components/edit-chat.vue?cd0f","webpack://frankerfacez/./src/modules/chat/actions/components/edit-chat.vue","webpack://frankerfacez/./src/modules/chat/actions/components/edit-chat.vue?dd6a","webpack://frankerfacez/./src/modules/chat/actions/components/edit-chat.vue?c189","webpack://frankerfacez/./src/modules/chat/actions/components/edit-combo.vue?f579","webpack://frankerfacez/./src/modules/chat/actions/components/edit-combo.vue?81a9","webpack://frankerfacez/./src/modules/chat/actions/components/edit-combo.vue","webpack://frankerfacez/./src/modules/chat/actions/components/edit-combo.vue?a5a1","webpack://frankerfacez/./src/modules/chat/actions/components/edit-copy.vue?5a82","webpack://frankerfacez/./src/modules/chat/actions/components/edit-copy.vue?638d","webpack://frankerfacez/./src/modules/chat/actions/components/edit-copy.vue","webpack://frankerfacez/./src/modules/chat/actions/components/edit-copy.vue?f710","webpack://frankerfacez/./src/modules/chat/actions/components/edit-emote.vue?1572","webpack://frankerfacez/./src/modules/chat/actions/components/edit-emote.vue?6032","webpack://frankerfacez/./src/modules/chat/actions/components/edit-emote.vue","webpack://frankerfacez/./src/modules/chat/actions/components/edit-emote.vue?2706","webpack://frankerfacez/./src/modules/chat/actions/components/edit-icon.vue?77dc","webpack://frankerfacez/./src/modules/chat/actions/components/edit-icon.vue?9927","webpack://frankerfacez/./src/modules/chat/actions/components/edit-icon.vue","webpack://frankerfacez/./src/modules/chat/actions/components/edit-icon.vue?d3be","webpack://frankerfacez/./src/modules/chat/actions/components/edit-image.vue?aa9b","webpack://frankerfacez/./src/modules/chat/actions/components/edit-image.vue?2eea","webpack://frankerfacez/./src/modules/chat/actions/components/edit-image.vue","webpack://frankerfacez/./src/modules/chat/actions/components/edit-image.vue?65cb","webpack://frankerfacez/./src/modules/chat/actions/components/edit-profile.vue?b04d","webpack://frankerfacez/./src/modules/chat/actions/components/edit-profile.vue?24eb","webpack://frankerfacez/./src/modules/chat/actions/components/edit-profile.vue","webpack://frankerfacez/./src/modules/chat/actions/components/edit-profile.vue?a752","webpack://frankerfacez/./src/modules/chat/actions/components/edit-text.vue?75fc","webpack://frankerfacez/./src/modules/chat/actions/components/edit-text.vue?9b6d","webpack://frankerfacez/./src/modules/chat/actions/components/edit-text.vue","webpack://frankerfacez/./src/modules/chat/actions/components/edit-text.vue?619d","webpack://frankerfacez/./src/modules/chat/actions/components/edit-timeout.vue?934e","webpack://frankerfacez/./src/modules/chat/actions/components/edit-timeout.vue","webpack://frankerfacez/./src/modules/chat/actions/components/edit-timeout.vue?f942","webpack://frankerfacez/./src/modules/chat/actions/components/edit-timeout.vue?7029","webpack://frankerfacez/./src/modules/chat/actions/components/edit-url.vue?db46","webpack://frankerfacez/./src/modules/chat/actions/components/edit-url.vue?8a64","webpack://frankerfacez/./src/modules/chat/actions/components/edit-url.vue","webpack://frankerfacez/./src/modules/chat/actions/components/edit-url.vue?97ec","webpack://frankerfacez/./src/modules/chat/actions/components/preview-combo.vue?aef1","webpack://frankerfacez/./src/modules/chat/actions/components/preview-combo.vue","webpack://frankerfacez/./src/modules/chat/actions/components/preview-emote.vue?88e0","webpack://frankerfacez/./src/modules/chat/actions/components/preview-emote.vue","webpack://frankerfacez/./src/modules/chat/actions/components/preview-icon.vue?2919","webpack://frankerfacez/./src/modules/chat/actions/components/preview-icon.vue","webpack://frankerfacez/./src/modules/chat/actions/components/preview-image.vue?47a8","webpack://frankerfacez/./src/modules/chat/actions/components/preview-image.vue","webpack://frankerfacez/./src/modules/chat/actions/components/preview-text.vue?ced9","webpack://frankerfacez/./src/modules/chat/actions/components/preview-text.vue","webpack://frankerfacez/./src/modules/main_menu/components/action-editor.vue?0034","webpack://frankerfacez/./src/modules/main_menu/components/action-editor.vue","webpack://frankerfacez/./src/modules/main_menu/components/action-editor.vue?9bf1","webpack://frankerfacez/./src/modules/main_menu/components/action-editor.vue?a5da","webpack://frankerfacez/./src/modules/main_menu/components/action-preview.vue?9df4","webpack://frankerfacez/./src/modules/main_menu/components/action-preview.vue?9a7d","webpack://frankerfacez/./src/modules/main_menu/components/action-preview.vue","webpack://frankerfacez/./src/modules/main_menu/components/action-preview.vue?99a2","webpack://frankerfacez/./src/modules/main_menu/components/addon-list.vue?5d0a","webpack://frankerfacez/./src/modules/main_menu/components/addon-list.vue?901f","webpack://frankerfacez/./src/modules/main_menu/components/addon-list.vue","webpack://frankerfacez/./src/modules/main_menu/components/addon-list.vue?5843","webpack://frankerfacez/./src/modules/main_menu/components/addon.vue?3709","webpack://frankerfacez/./src/modules/main_menu/components/addon.vue?c44f","webpack://frankerfacez/./src/modules/main_menu/components/addon.vue","webpack://frankerfacez/./src/modules/main_menu/components/addon.vue?323f","webpack://frankerfacez/./src/modules/main_menu/components/async-text.vue?b940","webpack://frankerfacez/./src/modules/main_menu/components/async-text.vue?8442","webpack://frankerfacez/./src/modules/main_menu/components/async-text.vue","webpack://frankerfacez/./src/modules/main_menu/components/async-text.vue?bc3d","webpack://frankerfacez/./src/modules/main_menu/components/backup-restore.vue?dc27","webpack://frankerfacez/./src/modules/main_menu/components/backup-restore.vue?4cbc","webpack://frankerfacez/./src/modules/main_menu/components/backup-restore.vue","webpack://frankerfacez/./src/modules/main_menu/components/backup-restore.vue?1c0a","webpack://frankerfacez/./src/modules/main_menu/components/badge-highlighting.vue?5d3f","webpack://frankerfacez/./src/modules/main_menu/components/badge-highlighting.vue","webpack://frankerfacez/./src/modules/main_menu/components/badge-highlighting.vue?4fdd","webpack://frankerfacez/./src/modules/main_menu/components/badge-highlighting.vue?8ba3","webpack://frankerfacez/./src/modules/main_menu/components/badge-term-editor.vue?86c0","webpack://frankerfacez/./src/modules/main_menu/components/badge-term-editor.vue","webpack://frankerfacez/./src/modules/main_menu/components/badge-term-editor.vue?5992","webpack://frankerfacez/./src/modules/main_menu/components/badge-term-editor.vue?e7cb","webpack://frankerfacez/./src/modules/main_menu/components/badge-visibility.vue?86e3","webpack://frankerfacez/./src/modules/main_menu/components/badge-visibility.vue","webpack://frankerfacez/./src/modules/main_menu/components/badge-visibility.vue?3c1b","webpack://frankerfacez/./src/modules/main_menu/components/badge-visibility.vue?9894","webpack://frankerfacez/./src/modules/main_menu/components/basic-terms.vue?1748","webpack://frankerfacez/./src/modules/main_menu/components/basic-terms.vue","webpack://frankerfacez/./src/modules/main_menu/components/basic-terms.vue?4e8e","webpack://frankerfacez/./src/modules/main_menu/components/basic-terms.vue?2641","webpack://frankerfacez/./src/modules/main_menu/components/blocked-type-editor.vue?8b1e","webpack://frankerfacez/./src/modules/main_menu/components/blocked-type-editor.vue","webpack://frankerfacez/./src/modules/main_menu/components/blocked-type-editor.vue?8ae9","webpack://frankerfacez/./src/modules/main_menu/components/blocked-type-editor.vue?ead8","webpack://frankerfacez/./src/modules/main_menu/components/blocked-types.vue?563d","webpack://frankerfacez/./src/modules/main_menu/components/blocked-types.vue","webpack://frankerfacez/./src/modules/main_menu/components/blocked-types.vue?e09a","webpack://frankerfacez/./src/modules/main_menu/components/blocked-types.vue?9934","webpack://frankerfacez/./src/modules/main_menu/components/changelog.vue?9e1b","webpack://frankerfacez/./src/modules/main_menu/components/changelog.vue","webpack://frankerfacez/./src/modules/main_menu/components/changelog.vue?cef3","webpack://frankerfacez/./src/modules/main_menu/components/changelog.vue?fa7d","webpack://frankerfacez/./src/modules/main_menu/components/chat-actions.vue?bf99","webpack://frankerfacez/./src/modules/main_menu/components/chat-actions.vue","webpack://frankerfacez/./src/modules/main_menu/components/chat-actions.vue?732a","webpack://frankerfacez/./src/modules/main_menu/components/chat-actions.vue?1539","webpack://frankerfacez/./src/modules/main_menu/components/chat-reasons.vue?bf1b","webpack://frankerfacez/./src/modules/main_menu/components/chat-reasons.vue","webpack://frankerfacez/./src/modules/main_menu/components/chat-reasons.vue?dbf4","webpack://frankerfacez/./src/modules/main_menu/components/chat-reasons.vue?bc5c","webpack://frankerfacez/./src/modules/main_menu/components/chat-rich-example.vue?774c","webpack://frankerfacez/./src/modules/main_menu/components/chat-rich-example.vue","webpack://frankerfacez/./src/modules/main_menu/components/chat-rich-example.vue?3a52","webpack://frankerfacez/./src/modules/main_menu/components/chat-rich-example.vue?bea9","webpack://frankerfacez/./src/modules/main_menu/components/chat-tester.vue?f05c","webpack://frankerfacez/./src/modules/main_menu/components/chat-tester.vue","webpack://frankerfacez/./src/modules/main_menu/components/chat-tester.vue?5b6c","webpack://frankerfacez/./src/modules/main_menu/components/chat-tester.vue?b60e","webpack://frankerfacez/./src/modules/main_menu/components/chat-tooltip-example.vue?e21e","webpack://frankerfacez/./src/modules/main_menu/components/chat-tooltip-example.vue","webpack://frankerfacez/./src/modules/main_menu/components/chat-tooltip-example.vue?9d44","webpack://frankerfacez/./src/modules/main_menu/components/chat-tooltip-example.vue?18ed","webpack://frankerfacez/./src/modules/main_menu/components/clear-settings.vue?5768","webpack://frankerfacez/./src/modules/main_menu/components/clear-settings.vue?ea75","webpack://frankerfacez/./src/modules/main_menu/components/clear-settings.vue","webpack://frankerfacez/./src/modules/main_menu/components/clear-settings.vue?4edc","webpack://frankerfacez/./src/modules/main_menu/components/emote-priorities.vue?4063","webpack://frankerfacez/./src/modules/main_menu/components/emote-priorities.vue","webpack://frankerfacez/./src/modules/main_menu/components/emote-priorities.vue?e0f5","webpack://frankerfacez/./src/modules/main_menu/components/emote-priorities.vue?1a11","webpack://frankerfacez/./src/modules/main_menu/components/experiments.vue?7c37","webpack://frankerfacez/./src/modules/main_menu/components/experiments.vue","webpack://frankerfacez/./src/modules/main_menu/components/experiments.vue?c225","webpack://frankerfacez/./src/modules/main_menu/components/experiments.vue?0694","webpack://frankerfacez/./src/modules/main_menu/components/filter-editor.vue?fce0","webpack://frankerfacez/./src/modules/main_menu/components/filter-editor.vue?7d79","webpack://frankerfacez/./src/modules/main_menu/components/filter-editor.vue","webpack://frankerfacez/./src/modules/main_menu/components/filter-editor.vue?ad9c","webpack://frankerfacez/./src/modules/main_menu/components/filter-rule-editor.vue?2c97","webpack://frankerfacez/./src/modules/main_menu/components/filter-rule-editor.vue?1868","webpack://frankerfacez/./src/modules/main_menu/components/filter-rule-editor.vue","webpack://frankerfacez/./src/modules/main_menu/components/filter-rule-editor.vue?1719","webpack://frankerfacez/./src/modules/main_menu/components/format-preview.vue?b67b","webpack://frankerfacez/./src/modules/main_menu/components/format-preview.vue?b3e3","webpack://frankerfacez/./src/modules/main_menu/components/format-preview.vue","webpack://frankerfacez/./src/modules/main_menu/components/format-preview.vue?b931","webpack://frankerfacez/./src/modules/main_menu/components/game-list-editor.vue?2dd0","webpack://frankerfacez/./src/modules/main_menu/components/game-list-editor.vue","webpack://frankerfacez/./src/modules/main_menu/components/game-list-editor.vue?0aad","webpack://frankerfacez/./src/modules/main_menu/components/game-list-editor.vue?546a","webpack://frankerfacez/./src/modules/main_menu/components/graphql-inspect.vue?bd70","webpack://frankerfacez/./src/modules/main_menu/components/graphql-inspect.vue","webpack://frankerfacez/./src/modules/main_menu/components/graphql-inspect.vue?2c46","webpack://frankerfacez/./src/modules/main_menu/components/graphql-inspect.vue?208d","webpack://frankerfacez/./src/modules/main_menu/components/home-page.vue?68ea","webpack://frankerfacez/./src/modules/main_menu/components/home-page.vue?6929","webpack://frankerfacez/./src/modules/main_menu/components/home-page.vue","webpack://frankerfacez/./src/modules/main_menu/components/home-page.vue?dfbc","webpack://frankerfacez/./src/modules/main_menu/components/i18n-open.vue?810e","webpack://frankerfacez/./src/modules/main_menu/components/i18n-open.vue?3a07","webpack://frankerfacez/./src/modules/main_menu/components/i18n-open.vue","webpack://frankerfacez/./src/modules/main_menu/components/i18n-open.vue?803c","webpack://frankerfacez/./src/modules/main_menu/components/link-tester.vue?c403","webpack://frankerfacez/./src/modules/main_menu/components/link-tester.vue","webpack://frankerfacez/./src/modules/main_menu/components/link-tester.vue?0d5e","webpack://frankerfacez/./src/modules/main_menu/components/link-tester.vue?3b11","webpack://frankerfacez/./src/modules/main_menu/components/main-menu.vue?bd6d","webpack://frankerfacez/./src/modules/main_menu/components/main-menu.vue","webpack://frankerfacez/./src/modules/main_menu/components/main-menu.vue?f688","webpack://frankerfacez/./src/modules/main_menu/components/main-menu.vue?cc31","webpack://frankerfacez/./src/modules/main_menu/components/md-page.vue?b5e1","webpack://frankerfacez/./src/modules/main_menu/components/md-page.vue?d99e","webpack://frankerfacez/./src/modules/main_menu/components/md-page.vue","webpack://frankerfacez/./src/modules/main_menu/components/md-page.vue?e9ad","webpack://frankerfacez/./src/modules/main_menu/components/menu-container.vue?6f7a","webpack://frankerfacez/./src/modules/main_menu/components/menu-container.vue?d6d9","webpack://frankerfacez/./src/modules/main_menu/components/menu-container.vue","webpack://frankerfacez/./src/modules/main_menu/components/menu-container.vue?610d","webpack://frankerfacez/./src/modules/main_menu/components/menu-page.vue?07f2","webpack://frankerfacez/./src/modules/main_menu/components/menu-page.vue?6ab9","webpack://frankerfacez/./src/modules/main_menu/components/menu-page.vue","webpack://frankerfacez/./src/modules/main_menu/components/menu-page.vue?d9d2","webpack://frankerfacez/./src/modules/main_menu/components/menu-tree.vue?74a6","webpack://frankerfacez/./src/modules/main_menu/components/menu-tree.vue","webpack://frankerfacez/./src/modules/main_menu/components/menu-tree.vue?cf61","webpack://frankerfacez/./src/modules/main_menu/components/menu-tree.vue?21a2","webpack://frankerfacez/./src/modules/main_menu/components/performance.vue?1125","webpack://frankerfacez/./src/modules/main_menu/components/performance.vue?8763","webpack://frankerfacez/./src/modules/main_menu/components/performance.vue","webpack://frankerfacez/./src/modules/main_menu/components/performance.vue?3000","webpack://frankerfacez/./src/modules/main_menu/components/profile-editor.vue?9176","webpack://frankerfacez/./src/modules/main_menu/components/profile-editor.vue?c036","webpack://frankerfacez/./src/modules/main_menu/components/profile-editor.vue","webpack://frankerfacez/./src/modules/main_menu/components/profile-editor.vue?e982","webpack://frankerfacez/./src/modules/main_menu/components/profile-manager.vue?2802","webpack://frankerfacez/./src/modules/main_menu/components/profile-manager.vue?1cd2","webpack://frankerfacez/./src/modules/main_menu/components/profile-manager.vue","webpack://frankerfacez/./src/modules/main_menu/components/profile-manager.vue?86c5","webpack://frankerfacez/./src/modules/main_menu/components/profile-selector.vue?571f","webpack://frankerfacez/./src/modules/main_menu/components/profile-selector.vue","webpack://frankerfacez/./src/modules/main_menu/components/profile-selector.vue?9f4f","webpack://frankerfacez/./src/modules/main_menu/components/profile-selector.vue?34da","webpack://frankerfacez/./src/modules/main_menu/components/provider.vue?7e87","webpack://frankerfacez/./src/modules/main_menu/components/provider.vue?ee7e","webpack://frankerfacez/./src/modules/main_menu/components/provider.vue","webpack://frankerfacez/./src/modules/main_menu/components/provider.vue?76eb","webpack://frankerfacez/./src/modules/main_menu/components/reason-editor.vue?d048","webpack://frankerfacez/./src/modules/main_menu/components/reason-editor.vue","webpack://frankerfacez/./src/modules/main_menu/components/reason-editor.vue?6100","webpack://frankerfacez/./src/modules/main_menu/components/reason-editor.vue?fb98","webpack://frankerfacez/./src/modules/main_menu/components/rich-feed.vue?cc4c","webpack://frankerfacez/./src/modules/main_menu/components/rich-feed.vue?634d","webpack://frankerfacez/./src/modules/main_menu/components/rich-feed.vue","webpack://frankerfacez/./src/modules/main_menu/components/rich-feed.vue?70aa","webpack://frankerfacez/./src/modules/main_menu/components/setting-check-box.vue?94ef","webpack://frankerfacez/./src/modules/main_menu/components/setting-check-box.vue?a038","webpack://frankerfacez/./src/modules/main_menu/components/setting-check-box.vue","webpack://frankerfacez/./src/modules/main_menu/components/setting-check-box.vue?8bc7","webpack://frankerfacez/./src/modules/main_menu/components/setting-color-box.vue?9cdb","webpack://frankerfacez/./src/modules/main_menu/components/setting-color-box.vue?700a","webpack://frankerfacez/./src/modules/main_menu/components/setting-color-box.vue","webpack://frankerfacez/./src/modules/main_menu/components/setting-color-box.vue?fc51","webpack://frankerfacez/./src/modules/main_menu/components/setting-combo-box.vue?5d2e","webpack://frankerfacez/./src/modules/main_menu/components/setting-combo-box.vue?60ce","webpack://frankerfacez/./src/modules/main_menu/components/setting-combo-box.vue","webpack://frankerfacez/./src/modules/main_menu/components/setting-combo-box.vue?a44d","webpack://frankerfacez/./src/modules/main_menu/components/setting-filter-editor.vue?befc","webpack://frankerfacez/./src/modules/main_menu/components/setting-filter-editor.vue?06d7","webpack://frankerfacez/./src/modules/main_menu/components/setting-filter-editor.vue","webpack://frankerfacez/./src/modules/main_menu/components/setting-filter-editor.vue?f163","webpack://frankerfacez/./src/modules/main_menu/components/setting-hotkey.vue?29ae","webpack://frankerfacez/./src/modules/main_menu/components/setting-hotkey.vue?0886","webpack://frankerfacez/./src/modules/main_menu/components/setting-hotkey.vue","webpack://frankerfacez/./src/modules/main_menu/components/setting-hotkey.vue?863d","webpack://frankerfacez/./src/modules/main_menu/components/setting-radio-buttons.vue?bb0a","webpack://frankerfacez/./src/modules/main_menu/components/setting-radio-buttons.vue?9a1e","webpack://frankerfacez/./src/modules/main_menu/components/setting-radio-buttons.vue","webpack://frankerfacez/./src/modules/main_menu/components/setting-radio-buttons.vue?4443","webpack://frankerfacez/./src/modules/main_menu/components/setting-select-box.vue?49c4","webpack://frankerfacez/./src/modules/main_menu/components/setting-select-box.vue?0f62","webpack://frankerfacez/./src/modules/main_menu/components/setting-select-box.vue","webpack://frankerfacez/./src/modules/main_menu/components/setting-select-box.vue?c7d4","webpack://frankerfacez/./src/modules/main_menu/components/setting-spacer.vue?6fd3","webpack://frankerfacez/./src/modules/main_menu/components/setting-spacer.vue","webpack://frankerfacez/./src/modules/main_menu/components/setting-text-box.vue?bef1","webpack://frankerfacez/./src/modules/main_menu/components/setting-text-box.vue?20c9","webpack://frankerfacez/./src/modules/main_menu/components/setting-text-box.vue","webpack://frankerfacez/./src/modules/main_menu/components/setting-text-box.vue?5b0c","webpack://frankerfacez/./src/modules/main_menu/components/setting-text.vue?1433","webpack://frankerfacez/./src/modules/main_menu/components/setting-text.vue?618e","webpack://frankerfacez/./src/modules/main_menu/components/setting-text.vue","webpack://frankerfacez/./src/modules/main_menu/components/setting-text.vue?913b","webpack://frankerfacez/./src/modules/main_menu/components/socket-info.vue?0282","webpack://frankerfacez/./src/modules/main_menu/components/socket-info.vue","webpack://frankerfacez/./src/modules/main_menu/components/socket-info.vue?d901","webpack://frankerfacez/./src/modules/main_menu/components/socket-info.vue?b7fd","webpack://frankerfacez/./src/modules/main_menu/components/tag-list-editor.vue?d666","webpack://frankerfacez/./src/modules/main_menu/components/tag-list-editor.vue","webpack://frankerfacez/./src/modules/main_menu/components/tag-list-editor.vue?9e50","webpack://frankerfacez/./src/modules/main_menu/components/tag-list-editor.vue?7899","webpack://frankerfacez/./src/modules/main_menu/components/term-editor.vue?9121","webpack://frankerfacez/./src/modules/main_menu/components/term-editor.vue","webpack://frankerfacez/./src/modules/main_menu/components/term-editor.vue?f41c","webpack://frankerfacez/./src/modules/main_menu/components/term-editor.vue?640f","webpack://frankerfacez/./src/modules/main_menu/components/tooltip-tos.vue?9b89","webpack://frankerfacez/./src/modules/main_menu/components/tooltip-tos.vue","webpack://frankerfacez/./src/modules/main_menu/components/tooltip-tos.vue?db79","webpack://frankerfacez/./src/modules/main_menu/components/tooltip-tos.vue?479b","webpack://frankerfacez/./src/settings/components/basic-toggle.vue?393f","webpack://frankerfacez/./src/settings/components/basic-toggle.vue","webpack://frankerfacez/./src/settings/components/basic-toggle.vue?fe95","webpack://frankerfacez/./src/settings/components/basic-toggle.vue?58ca","webpack://frankerfacez/./src/settings/components/category.vue?1fb9","webpack://frankerfacez/./src/settings/components/category.vue","webpack://frankerfacez/./src/settings/components/category.vue?e7c3","webpack://frankerfacez/./src/settings/components/category.vue?9a76","webpack://frankerfacez/./src/settings/components/channel.vue?3e78","webpack://frankerfacez/./src/settings/components/channel.vue","webpack://frankerfacez/./src/settings/components/channel.vue?0c82","webpack://frankerfacez/./src/settings/components/channel.vue?4726","webpack://frankerfacez/./src/settings/components/if.vue?c787","webpack://frankerfacez/./src/settings/components/if.vue","webpack://frankerfacez/./src/settings/components/if.vue?7daf","webpack://frankerfacez/./src/settings/components/if.vue?a63b","webpack://frankerfacez/./src/settings/components/monitor.vue?cddf","webpack://frankerfacez/./src/settings/components/monitor.vue","webpack://frankerfacez/./src/settings/components/monitor.vue?b5f6","webpack://frankerfacez/./src/settings/components/monitor.vue?f40b","webpack://frankerfacez/./src/settings/components/nested.vue?496b","webpack://frankerfacez/./src/settings/components/nested.vue","webpack://frankerfacez/./src/settings/components/nested.vue?3dcb","webpack://frankerfacez/./src/settings/components/nested.vue?5ccb","webpack://frankerfacez/./src/settings/components/page.vue?c124","webpack://frankerfacez/./src/settings/components/page.vue","webpack://frankerfacez/./src/settings/components/page.vue?5344","webpack://frankerfacez/./src/settings/components/page.vue?7241","webpack://frankerfacez/./src/settings/components/time.vue?a7e1","webpack://frankerfacez/./src/settings/components/time.vue","webpack://frankerfacez/./src/settings/components/time.vue?cef7","webpack://frankerfacez/./src/settings/components/time.vue?cc58","webpack://frankerfacez/./src/settings/components/title.vue?d275","webpack://frankerfacez/./src/settings/components/title.vue","webpack://frankerfacez/./src/settings/components/title.vue?3832","webpack://frankerfacez/./src/settings/components/title.vue?fa24","webpack://frankerfacez/./src/modules/main_menu/components/ sync nonrecursive \\.vue$","webpack://frankerfacez/./src/modules/main_menu/ lazy ^\\.\\/.*\\.md$ chunkName: menu-md namespace object","webpack://frankerfacez/./src/sites/twitch-twilight/modules/ sync ("],"sourcesContent":["'use strict';\n\n// ============================================================================\n// Emoji Handling\n// ============================================================================\n\nimport Module from 'utilities/module';\nimport {SERVER} from 'utilities/constants';\nimport {has} from 'utilities/object';\nimport { getBuster } from 'utilities/time';\n\nimport splitter from 'emoji-regex/es2015/index';\n\n\n/*export const SIZES = {\n\tapple: [64, 160],\n\temojione: [64],\n\tfacebook: [64, 96],\n\tgoogle: [64, 136],\n\tmessenger: [64, 128],\n\ttwitter: [64, 72]\n}*/\n\nexport const HIDDEN_CATEGORIES = [\n\t'component'\n];\n\nexport const CATEGORIES = {\n\t'smileys-emotion': 'Smileys & Emotions',\n\t'people-body': 'People',\n\t'component': 'Components',\n\t'animals-nature': 'Animals & Nature',\n\t'food-drink': 'Food & Drink',\n\t'travel-places': 'Travel & Places',\n\t'activities': 'Activities',\n\t'objects': 'Objects',\n\t'symbols': 'Symbols',\n\t'flags': 'Flags'\n};\n\nexport const CATEGORY_SORT = Object.keys(CATEGORIES);\n\nexport const SKIN_TONES = {\n\t1: '1f3fb',\n\t2: '1f3fc',\n\t3: '1f3fd',\n\t4: '1f3fe',\n\t5: '1f3ff'\n};\n\nlet enable_replace_joiner = true;\n\nlet joiner;\ntry {\n\tjoiner = new RegExp('(?<!\\\\u{E0002})\\\\u{E0002}', 'gu');\n} catch(err) {\n\tenable_replace_joiner = false;\n\tjoiner = null;\n}\n\nexport const JOINER_REPLACEMENT = joiner; // /(?<!\\u{E0002})\\u{E0002}/gu;\nexport const ZWD_REPLACEMENT = /\\u{200D}/gu;\nexport const EMOJI_JOINER = '\\u{E0002}';\n\nexport const IMAGE_PATHS = {\n\tgoogle: 'noto',\n\ttwitter: 'twemoji',\n\topen: 'openmoji',\n\tblob: 'blob'\n};\n\n\nexport function codepoint_to_emoji(cp) {\n\tlet code = typeof cp === 'number' ? cp : parseInt(cp, 16);\n\tif ( code < 0x10000 )\n\t\treturn String.fromCharCode(code);\n\n\tcode -= 0x10000;\n\treturn String.fromCharCode(\n\t\t0xD800 + (code >> 10),\n\t\t0xDC00 + (code & 0x3FF)\n\t);\n}\n\n\nexport default class Emoji extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('..emotes');\n\t\tthis.inject('settings');\n\n\t\tif (enable_replace_joiner)\n\t\t\tthis.settings.add('chat.emoji.replace-joiner', {\n\t\t\t\tdefault: 1,\n\t\t\t\tprocess(ctx, val) {\n\t\t\t\t\tif ( val === 2 )\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\treturn val;\n\t\t\t\t},\n\t\t\t\tui: {\n\t\t\t\t\tpath: 'Chat > Behavior >> Emoji',\n\t\t\t\t\ttitle: 'Emoji Joiner Workaround',\n\t\t\t\t\tdescription: 'This feature is intended to allow the use of combined emoji in supported clients. This is required due to a bug in TMI that strips ZWJ characters from chat messages. [Visit the original issue](https://github.com/FrankerFaceZ/FrankerFaceZ/issues/1147) for more details.',\n\t\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{value: 0, title: 'Disabled'},\n\t\t\t\t\t\t{value: 1, title: 'Display Only'},\n\t\t\t\t\t\t{value: 3, title: 'Display and Send'}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t});\n\t\telse {\n\t\t\tthis.log.warn('This browser does not support regexp lookbehind. The \"Emoji Joiner Workaround\" feature will be disabled.');\n\n\t\t\tthis.settings.add('chat.emoji.replace-joiner', {\n\t\t\t\tprocess() { return 0 }\n\t\t\t});\n\t\t}\n\n\t\tthis.settings.add('chat.emoji.style', {\n\t\t\tdefault: 'twitter',\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( val != 0 && ! IMAGE_PATHS[val] )\n\t\t\t\t\treturn 'twitter';\n\t\t\t\treturn val;\n\t\t\t},\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Emoji',\n\t\t\t\ttitle: 'Emoji Style',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 'twitter', title: 'Twitter (Twemoji)'},\n\t\t\t\t\t{value: 'google', title: 'Google (Noto)'},\n\t\t\t\t\t{value: 'blob', title: 'Blob'},\n\t\t\t\t\t{value: 'open', title: 'OpenMoji'},\n\t\t\t\t\t{value: 0, title: 'Native'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\t// For some reason, splitter is a function.\n\t\tthis.splitter = splitter();\n\n\t\tthis.categories = CATEGORIES;\n\n\t\tthis.emoji = {};\n\t\tthis.names = {};\n\t\tthis.chars = new Map;\n\t}\n\n\tonEnable() {\n\t\tthis.on('chat:pre-send-message', event => {\n\t\t\tif (event.context.get('chat.emoji.replace-joiner') < 2)\n\t\t\t\treturn;\n\n\t\t\tevent.message = event.message.replace(ZWD_REPLACEMENT, EMOJI_JOINER);\n\t\t});\n\n\t\tthis.loadEmojiData();\n\t}\n\n\tasync loadEmojiData(tries = 0) {\n\t\tlet data;\n\t\ttry {\n\t\t\tdata = await fetch(`${SERVER}/script/emoji/v3.2.json?_${getBuster(60)}`).then(r =>\n\t\t\t\tr.ok ? r.json() : null\n\t\t\t);\n\n\t\t} catch(err) {\n\t\t\ttries++;\n\t\t\tif ( tries < 10 )\n\t\t\t\treturn setTimeout(() => this.loadEmojiData(tries), 500 * tries);\n\n\t\t\tthis.log.error('Error loading emoji data.', err);\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( ! data )\n\t\t\treturn false;\n\n\t\tconst cats = data.c,\n\t\t\tout = {},\n\t\t\tnames = {},\n\t\t\tchars = new Map;\n\n\t\tfor(const raw of data.e) {\n\t\t\tconst emoji = Object.assign(hydrate_emoji(raw.slice(4)), {\n\t\t\t\tcategory: cats[raw[0]],\n\t\t\t\tsort: raw[1],\n\t\t\t\tnames: raw[2],\n\t\t\t\tname: raw[3]\n\t\t\t});\n\n\t\t\tif ( ! Array.isArray(emoji.names) )\n\t\t\t\temoji.names = [emoji.names];\n\n\t\t\tif ( ! emoji.name )\n\t\t\t\temoji.name = emoji.names[0].replace(/_/g, ' ');\n\n\t\t\tout[emoji.code] = emoji;\n\t\t\tchars.set(emoji.raw, [emoji.code, null]);\n\t\t\tfor(const name of emoji.names)\n\t\t\t\tnames[name] = emoji.code;\n\n\t\t\t// Variations\n\t\t\tif ( raw[7] ) {\n\t\t\t\tconst vars = emoji.variants = {};\n\t\t\t\tfor(const r of raw[7]) {\n\t\t\t\t\tif ( Array.isArray(r[3]) || ! r[3] ) {\n\t\t\t\t\t\t// The tone picker doesn't support multiple tones\n\t\t\t\t\t\t// for a single emoji. Just make this variation a\n\t\t\t\t\t\t// new emoji.\n\t\t\t\t\t\tconst em = Object.assign(hydrate_emoji(r), {\n\t\t\t\t\t\t\tcategory: cats[raw[0]],\n\t\t\t\t\t\t\tsort: raw[1],\n\t\t\t\t\t\t\tnames: r[5],\n\t\t\t\t\t\t\thidden: true\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif ( ! Array.isArray(em.names) )\n\t\t\t\t\t\t\tem.names = [em.names];\n\n\t\t\t\t\t\tem.name = em.names[0].replace(/_/g, ' ');\n\n\t\t\t\t\t\tout[em.code] = em;\n\t\t\t\t\t\tchars.set(em.raw, [em.code, null]);\n\t\t\t\t\t\tfor(const name of em.names)\n\t\t\t\t\t\t\tnames[name] = em.code;\n\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// We just have a normal tone. We need to look\n\t\t\t\t\t// up the modifier and use it.\n\t\t\t\t\tconst tone = SKIN_TONES[r[3]];\n\t\t\t\t\tif ( ! tone ) {\n\t\t\t\t\t\tconsole.warn('Unknown tone:', r[3], r, emoji);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst vari = Object.assign(hydrate_emoji(r), {\n\t\t\t\t\t\tkey: tone\n\t\t\t\t\t});\n\n\t\t\t\t\tvars[tone] = vari;\n\t\t\t\t\tchars.set(vari.raw, [emoji.code, vari.key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.emoji = out;\n\t\tthis.names = names;\n\t\tthis.chars = chars;\n\n\t\tthis.log.info(`Loaded data about ${Object.keys(out).length} emoji.`);\n\t\tthis.emit(':populated');\n\t\treturn true;\n\t}\n\n\tgetFullImage(image, style) {\n\t\tif ( ! style )\n\t\t\tstyle = this.parent.context.get('chat.emoji.style');\n\n\t\tif ( ! has(IMAGE_PATHS, style) )\n\t\t\tstyle = 'twitter';\n\n\t\treturn `${SERVER}/static/emoji/images/${IMAGE_PATHS[style]}/${image}`;\n\n\t\t/*if ( ! has(SIZES, style) )\n\t\t\tstyle = 'twitter';\n\n\t\treturn `${SERVER}/static/emoji/img-${style}-${SIZES[style][0]}/${image}`;*/\n\t}\n\n\tgetFullImageSet(image, style) {\n\t\tif ( ! style )\n\t\t\tstyle = this.parent.context.get('chat.emoji.style');\n\n\t\tif ( ! has(IMAGE_PATHS, style) )\n\t\t\tstyle = 'twitter';\n\n\t\treturn `${SERVER}/static/emoji/images/${IMAGE_PATHS[style]}/${image} 72w`;\n\n\t\t/*if ( ! has(SIZES, style) )\n\t\t\tstyle = 'twitter';\n\n\t\treturn SIZES[style].map(w =>\n\t\t\t`${SERVER}/static/emoji/img-${style}-${w}/${image} ${w}w`\n\t\t).join(', ');*/\n\t}\n}\n\n\nfunction hydrate_emoji(data) {\n\tlet code = data[0];\n\tif ( data[4] === 0 )\n\t\tcode = `${code}-fe0f`;\n\n\treturn {\n\t\tcode,\n\t\timage: `${data[0]}.png`,\n\t\traw: code.split('-').map(codepoint_to_emoji).join(''),\n\t\tsheet_x: data[1][0],\n\t\tsheet_y: data[1][1],\n\n\t\thas: {\n\t\t\tgoogle: !!(0b1000 & data[2]),\n\t\t\tblob: !!(0b0100 & data[2]) || !!(0b1000 & data[2]), // Blob falls back to Noto\n\t\t\ttwitter: !!(0b0010 & data[2]),\n\t\t\topen: !!(0b0001 & data[2])\n\t\t}\n\t};\n}","'use strict';\n\nexport default require.context('./components', false, /\\.vue$/);","'use strict';\n\nimport {deep_copy} from 'utilities/object';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tvalue: undefined,\n\t\t\thas_value: false,\n\n\t\t\tprovider_key: this.item.override_setting ?? this.item.setting,\n\n\t\t\t_unseen: false\n\t\t}\n\t},\n\n\tcreated() {\n\t\tconst provider = this.context.provider,\n\t\t\tsetting = this.provider_key;\n\n\t\tprovider.on('changed', this._providerChange, this);\n\n\t\tthis.has_value = provider.has(setting);\n\t\tif ( this.has_value )\n\t\t\tthis.value = deep_copy(provider.get(setting));\n\t\telse\n\t\t\tthis.value = this.default_value;\n\n\t\tif ( this.item.unseen ) {\n\t\t\tthis._unseen = true;\n\t\t\tthis.item.unseen = 0;\n\t\t}\n\t},\n\n\tdestroyed() {\n\t\tconst provider = this.context.provider;\n\n\t\tprovider.off('changed', this._providerChange, this);\n\n\t\tthis.value = undefined;\n\t\tthis.has_value = false;\n\t},\n\n\tcomputed: {\n\t\tdata() {\n\t\t\tconst data = this.item.data;\n\t\t\tif ( typeof data === 'function' )\n\t\t\t\treturn data(this.value);\n\n\t\t\treturn data;\n\t\t},\n\n\t\tunseen() {\n\t\t\treturn this._unseen || this.item.unseen > 0;\n\t\t},\n\n\t\tdefault_value() {\n\t\t\tif ( typeof this.item.default === 'function' )\n\t\t\t\treturn this.item.default(this.context);\n\n\t\t\treturn deep_copy(this.item.default);\n\t\t},\n\n\t\tisValid() {\n\t\t\treturn this.isDefault || this.validate(this.value)\n\t\t},\n\n\t\tisDefault() {\n\t\t\treturn ! this.has_value\n\t\t}\n\t},\n\n\tmethods: {\n\t\t_providerChange(key, val, deleted) {\n\t\t\tif ( key !== this.provider_key )\n\t\t\t\treturn;\n\n\t\t\tif ( deleted ) {\n\t\t\t\tthis.has_value = false;\n\t\t\t\tthis.value = this.default_value;\n\t\t\t} else {\n\t\t\t\tthis.has_value = true;\n\t\t\t\tthis.value = deep_copy(val);\n\t\t\t}\n\t\t},\n\n\t\tvalidate(value) {\n\t\t\tlet validate = this.item.validator;\n\t\t\tif ( ! validate && typeof this.item.process === 'string' )\n\t\t\t\tvalidate = this.context.getValidator(`process_${this.item.process}`);\n\t\t\tif ( validate ) {\n\t\t\t\tif ( typeof validate !== 'function' )\n\t\t\t\t\tvalidate = this.context.getValidator(validate);\n\t\t\t\tif ( typeof validate === 'function' )\n\t\t\t\t\treturn validate(value, this.item, this);\n\t\t\t\telse\n\t\t\t\t\tthrow new Error(`Invalid Validator for ${this.provider_key}`);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tset(value) {\n\t\t\tconst provider = this.context.provider,\n\t\t\t\tsetting = this.provider_key;\n\n\t\t\t// TODO: Run validation.\n\n\t\t\tlet process = this.item.process;\n\t\t\tif ( process ) {\n\t\t\t\tif ( typeof process !== 'function' )\n\t\t\t\t\tprocess = this.context.getProcessor(process);\n\t\t\t\tif ( typeof process === 'function' )\n\t\t\t\t\tvalue = process(value, this.default_value, this.item, this);\n\t\t\t\telse\n\t\t\t\t\tthrow new Error(`Invalid processor for ${setting}`);\n\t\t\t}\n\n\t\t\tprovider.set(setting, value);\n\t\t\tthis.has_value = true;\n\t\t\tthis.value = deep_copy(value);\n\n\t\t\tif ( this.item.onUIChange )\n\t\t\t\tthis.item.onUIChange(this.value, this);\n\t\t},\n\n\t\tclear() {\n\t\t\tconst provider = this.context.provider,\n\t\t\t\tsetting = this.provider_key;\n\n\t\t\tprovider.delete(setting);\n\t\t\tthis.value = this.default_value;\n\t\t\tthis.has_value = false;\n\n\t\t\tif ( this.item.onUIChange )\n\t\t\t\tthis.item.onUIChange(this.value, this);\n\t\t}\n\t}\n}\n","'use strict';\n\nimport {deep_copy} from 'utilities/object';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tvalue: undefined,\n\t\t\thas_value: false,\n\t\t\tprofile: null,\n\n\t\t\t_unseen: false,\n\t\t\tsource: null,\n\t\t\tsource_value: undefined,\n\t\t}\n\t},\n\n\tcreated() {\n\t\tconst ctx = this.context.context,\n\t\t\tsetting = this.item.setting;\n\n\t\tctx._add_user();\n\n\t\tthis._update_profile();\n\t\tthis._uses_changed(ctx.uses(setting));\n\n\t\tif ( this.item.unseen ) {\n\t\t\tthis._unseen = true;\n\t\t\tthis.item.unseen = 0;\n\t\t}\n\n\t\tctx.on(`uses_changed:${setting}`, this._uses_changed, this);\n\t},\n\n\tdestroyed() {\n\t\tconst ctx = this.context.context,\n\t\t\tsetting = this.item.setting;\n\n\t\tif ( this.profile )\n\t\t\tthis.profile.off('changed', this._setting_changed, this);\n\n\t\tif ( this.source )\n\t\t\tthis.source.off('changed', this._source_setting_changed, this);\n\n\t\tctx.off(`uses_changed:${setting}`, this._uses_changed, this);\n\n\t\tthis.value = undefined;\n\t\tthis.has_value = false;\n\t\tthis.profile = null;\n\n\t\tthis.source_value = undefined;\n\t\tthis.source = null;\n\n\t\tctx._remove_user();\n\t},\n\n\twatch: {\n\t\t'context.currentProfile'() {\n\t\t\tthis._update_profile();\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tdata() {\n\t\t\tconst data = this.item.data;\n\t\t\tif ( typeof data === 'function' )\n\t\t\t\treturn data(this.profile, this.value);\n\n\t\t\treturn data;\n\t\t},\n\n\t\tunseen() {\n\t\t\treturn this._unseen || this.item.unseen > 0\n\t\t},\n\n\t\tdefault_value() {\n\t\t\tif ( typeof this.item.default === 'function' )\n\t\t\t\treturn this.item.default(this.context.context);\n\n\t\t\treturn deep_copy(this.item.default);\n\t\t},\n\n\t\tisInherited() {\n\t\t\treturn ! this.has_value && this.source && this.sourceOrder > this.profileOrder;\n\t\t},\n\n\t\tisDefault() {\n\t\t\treturn ! this.has_value && ! this.source\n\t\t},\n\n\t\tisOverridden() {\n\t\t\treturn this.source && this.sourceOrder < this.profileOrder;\n\t\t},\n\n\t\tisValid() {\n\t\t\treturn this.isDefault || this.validate(this.value);\n\t\t},\n\n\t\tisReadOnly() {\n\t\t\treturn this.profile && this.profile.ephemeral\n\t\t},\n\n\t\tsourceOrder() {\n\t\t\treturn this.source ? this.source.order : Infinity\n\t\t},\n\n\t\tprofileOrder() {\n\t\t\treturn this.profile ? this.profile.order : Infinity\n\t\t},\n\n\t\tsourceTitle() {\n\t\t\tif ( this.source )\n\t\t\t\treturn this.source.i18n_key ?\n\t\t\t\t\tthis.t(this.source.i18n_key, this.source.title, this.source) :\n\t\t\t\t\tthis.source.title;\n\t\t},\n\n\t\tsourceDisplay() {\n\t\t\tconst opts = {\n\t\t\t\ttitle: this.sourceTitle\n\t\t\t};\n\n\t\t\tif ( this.isInherited )\n\t\t\t\treturn this.t('setting.inherited-from', 'Inherited From: {title}', opts);\n\t\t\telse if ( this.isOverridden )\n\t\t\t\treturn this.t('setting.overridden-by', 'Overridden By: {title}', opts);\n\t\t}\n\t},\n\n\tmethods: {\n\t\t_update_profile() {\n\t\t\tif ( this.profile )\n\t\t\t\tthis.profile.off('changed', this._setting_changed, this);\n\n\t\t\tconst profile = this.profile = this.context.currentProfile,\n\t\t\t\tsetting = this.item.setting;\n\n\t\t\tprofile.on('changed', this._setting_changed, this);\n\n\t\t\tthis.has_value = profile.has(setting);\n\t\t\tthis.value = this.has_value ?\n\t\t\t\tdeep_copy(profile.get(setting)) :\n\t\t\t\tthis.isInherited ?\n\t\t\t\t\tthis.source_value :\n\t\t\t\t\tthis.default_value;\n\t\t},\n\n\t\t_setting_changed(key, value, deleted) {\n\t\t\tif ( key !== this.item.setting )\n\t\t\t\treturn;\n\n\t\t\tthis.has_value = deleted !== true;\n\t\t\tthis.value = this.has_value ?\n\t\t\t\tdeep_copy(value) :\n\t\t\t\tthis.isInherited ?\n\t\t\t\t\tthis.source_value :\n\t\t\t\t\tthis.default_value;\n\t\t},\n\n\t\t_source_setting_changed(key, value, deleted) {\n\t\t\tif ( key !== this.item.setting )\n\t\t\t\treturn;\n\n\t\t\tthis.source_value = deep_copy(value);\n\t\t\tif ( this.isInherited )\n\t\t\t\tthis.value = deleted ? this.default_value : value;\n\t\t},\n\n\t\t_uses_changed(uses) {\n\t\t\tif ( this._uses_cb )\n\t\t\t\tclearTimeout(this._uses_cb);\n\n\t\t\t// We don't do this immediately because this code will be\n\t\t\t// running inside a \"changed\" event handler and unregistering\n\t\t\t// our listener will throw a concurrent modification exception.\n\t\t\tthis._uses_cb = setTimeout(() => {\n\t\t\t\tif ( this.source )\n\t\t\t\t\tthis.source.off('changed', this._source_setting_changed, this);\n\n\t\t\t\t// We primarily only care about the main source.\n\t\t\t\tuses = uses ? uses[0] : null;\n\n\t\t\t\tconst source = this.source = uses == null ? null : this.context.profile_keys[uses],\n\t\t\t\t\tsetting = this.item.setting;\n\n\t\t\t\tif ( source ) {\n\t\t\t\t\tsource.on('changed', this._source_setting_changed, this);\n\t\t\t\t\tthis.source_value = deep_copy(source.get(setting));\n\n\t\t\t\t} else\n\t\t\t\t\tthis.source_value = undefined;\n\n\t\t\t\tthis.has_value = this.profile && this.profile.has(this.item.setting);\n\t\t\t\tif ( ! this.has_value )\n\t\t\t\t\tthis.value = this.isInherited ? this.source_value : this.default_value;\n\t\t\t}, 0);\n\t\t},\n\n\t\tvalidate(value) {\n\t\t\tlet validate = this.item.validator;\n\t\t\tif ( ! validate && typeof this.item.process === 'string' )\n\t\t\t\tvalidate = this.context.getValidator(`process_${this.item.process}`);\n\t\t\tif ( validate ) {\n\t\t\t\tif ( typeof validate !== 'function' )\n\t\t\t\t\tvalidate = this.context.getValidator(validate);\n\t\t\t\tif ( typeof validate === 'function' )\n\t\t\t\t\treturn validate(value, this.item, this);\n\t\t\t\telse\n\t\t\t\t\tthrow new Error(`Invalid Validator for ${this.item.setting}`);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tset(value) {\n\t\t\t// TODO: Run validation.\n\t\t\tif ( this.isReadOnly )\n\t\t\t\treturn;\n\n\t\t\tlet process = this.item.process;\n\t\t\tif ( process ) {\n\t\t\t\tif ( typeof process !== 'function' )\n\t\t\t\t\tprocess = this.context.getProcessor(process);\n\t\t\t\tif ( typeof process === 'function' )\n\t\t\t\t\tvalue = process(value, this.default_value, this.item, this);\n\t\t\t\telse\n\t\t\t\t\tthrow new Error(`Invalid processor for ${this.item.setting}`);\n\t\t\t}\n\n\t\t\tthis.profile.set(this.item.setting, value);\n\n\t\t\tif ( this.item.onUIChange )\n\t\t\t\tthis.item.onUIChange(value, this);\n\t\t},\n\n\t\tclear() {\n\t\t\tif ( this.isReadOnly )\n\t\t\t\treturn;\n\n\t\t\tthis.profile.delete(this.item.setting);\n\n\t\t\tif ( this.item.onUIChange )\n\t\t\t\tthis.item.onUIChange(this.value, this);\n\t\t}\n\t}\n}","'use strict';\n\nimport Module, { GenericModule } from 'utilities/module';\n\nlet last_site = 0;\nlet last_call = 0;\n\nexport default class BaseSite extends Module {\n\n\tconstructor(name, parent) {\n\t\tsuper(name, parent);\n\t\tthis._id = `_ffz$${last_site++}`;\n\n\t\t//this.inject('settings');\n\n\t\tthis.log.info(`Using: ${this.constructor.name}`);\n\t}\n\n\n\t// ========================================================================\n\t// DOM Manipulation\n\t// ========================================================================\n\n\tgetReact() {\n\t\tif ( this._react )\n\t\t\treturn this._react;\n\n\t\tlet react;\n\t\ttry {\n\t\t\treact = this.getCore?.()?.intl?.react;\n\t\t} catch(err) { /* no-op */ }\n\n\t\tif ( react?.Component && react.createElement )\n\t\t\treturn this._react = react;\n\n\t\treact = this.resolve('site.web_munch')?.getModule?.('react');\n\t\tif ( react?.Component && react.createElement )\n\t\t\treturn this._react = react;\n\t}\n\n\tgetReactDom() {\n\t\tif ( this._reactDom )\n\t\t\treturn this._reactDom;\n\n\t\tlet reactDom = this.resolve('site.web_munch')?.getModule?.('react-dom');\n\t\tif ( reactDom?.createPortal )\n\t\t\treturn this._reactDom = reactDom;\n\t}\n\n\tfindReact() {\n\t\tconst react = this.getReact();\n\t\tif ( react )\n\t\t\treturn Promise.resolve(react);\n\n\t\tconst munch = this.resolve('site.web_munch');\n\t\tif ( munch )\n\t\t\treturn munch.findModule('react');\n\n\t\treturn this.waitFor('site.web_munch:registered')\n\t\t\t.then(() => this.findReact());\n\t}\n\n\tawaitElement(selector, parent, timeout = 60000) {\n\t\tif ( ! parent )\n\t\t\tparent = document.documentElement;\n\n\t\tconst el = parent.querySelector(selector);\n\t\tif ( el )\n\t\t\treturn Promise.resolve(el);\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst observer_name = `${this._id}$observer`,\n\t\t\t\tdata = parent[observer_name],\n\t\t\t\tcall_id = last_call++,\n\n\t\t\t\ttimer = timeout && setTimeout(() => {\n\t\t\t\t\tconst data = parent[observer_name];\n\t\t\t\t\tif ( ! data )\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tconst [observer, selectors] = data;\n\n\t\t\t\t\tfor(let i=0; i < selectors.length; i++) {\n\t\t\t\t\t\tconst d = selectors[i];\n\t\t\t\t\t\tif ( d[0] === call_id ) {\n\t\t\t\t\t\t\tselectors.splice(i, 1);\n\t\t\t\t\t\t\td[3]('Timed out');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! selectors.length ) {\n\t\t\t\t\t\tobserver.disconnect();\n\t\t\t\t\t\tparent[observer_name] = null;\n\t\t\t\t\t}\n\t\t\t\t}, timeout);\n\n\t\t\tif ( data ) {\n\t\t\t\tdata[1].push([call_id, selector, resolve, reject, timer]);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\tconst data = parent[observer_name];\n\t\t\t\tif ( ! data ) {\n\t\t\t\t\tobserver.disconnect();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst selectors = data[1];\n\t\t\t\tfor(let i=0; i < selectors.length; i++) {\n\t\t\t\t\tconst d = selectors[i];\n\t\t\t\t\tconst el = parent.querySelector(d[1]);\n\t\t\t\t\tif ( el ) {\n\t\t\t\t\t\tselectors.splice(i, 1);\n\t\t\t\t\t\ti--;\n\n\t\t\t\t\t\tif ( d[4] )\n\t\t\t\t\t\t\tclearTimeout(d[4]);\n\n\t\t\t\t\t\td[2](el);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( ! selectors.length ) {\n\t\t\t\t\tobserver.disconnect();\n\t\t\t\t\tparent[observer_name] = null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tparent[observer_name] = [observer, [[call_id, selector, resolve, reject, timer]]];\n\t\t\tobserver.observe(parent, {\n\t\t\t\tchildList: true,\n\t\t\t\tattributes: true,\n\t\t\t\tcharacterData: true,\n\t\t\t\tsubtree: true\n\t\t\t});\n\t\t});\n\t}\n}\n","'use strict';\n\n// ============================================================================\n// Twitch Player -- Shared Code\n// ============================================================================\n\nimport Module from 'utilities/module';\n\nimport {createElement, on, off} from 'utilities/dom';\nimport {isValidShortcut, debounce, has} from 'utilities/object';\nimport { getFontsList, useFont } from 'utilities/fonts';\n\nconst STYLE_VALIDATOR = createElement('span');\n\nconst LEFT_CONTROLS = '.video-player__default-player .player-controls__left-control-group';\nconst RIGHT_CONTROLS = '.video-player__default-player .player-controls__right-control-group';\n\nconst HAS_COMPRESSOR = window.AudioContext && window.DynamicsCompressorNode != null,\n\tHAS_GAIN = HAS_COMPRESSOR && window.GainNode != null;\n\nconst SCROLL_I18N = 'setting.entry.player.volume-scroll.values',\n\tSCROLL_OPTIONS = [\n\t\t{value: false, title: 'Disabled', i18n_key: `${SCROLL_I18N}.false`},\n\t\t{value: true, title: 'Enabled', i18n_key: `${SCROLL_I18N}.true`},\n\t\t{value: 2, title: 'Enabled with Right-Click', i18n_key: `${SCROLL_I18N}.2`},\n\t\t{value: 3, title: 'Enabled with Alt', i18n_key: `${SCROLL_I18N}.3`},\n\t\t{value: 4, title: 'Enabled with Alt + Right-Click', i18n_key: `${SCROLL_I18N}.4`},\n\t\t{value: 5, title: 'Enabled with Shift', i18n_key: `${SCROLL_I18N}.5`},\n\t\t{value: 6, title: 'Enabled with Shift + Right-Click', i18n_key: `${SCROLL_I18N}.6`},\n\t\t{value: 7, title: 'Enabled with Ctrl', i18n_key: `${SCROLL_I18N}.7`},\n\t\t{value: 8, title: 'Enabled with Ctrl + Right-Click', i18n_key: `${SCROLL_I18N}.8`}\n\t];\n\nfunction getNativeClipButton(container) {\n\treturn container.querySelector('button[aria-label*=\"alt+x\"]') ??\n\tcontainer.querySelector('button[aria-label]:has(path[d=\"M8 9H6v2h2V9zm1 0h2v2H9V9zm5 0h-2v2h2V9z\"]');\n}\n\nfunction wantsRMB(setting) {\n\treturn setting === 2 || setting === 4 || setting === 6 || setting === 8;\n}\n\nfunction matchesEvent(setting, event, has_rmb) {\n\tif ( wantsRMB(setting) && event.button !== 2 && ! has_rmb )\n\t\treturn false;\n\n\tif ( ! event.altKey && (setting === 3 || setting === 4) )\n\t\treturn false;\n\n\tif ( ! event.shiftKey && (setting === 5 || setting === 6) )\n\t\treturn false;\n\n\tif ( ! event.ctrlKey && (setting === 7 || setting === 8) )\n\t\treturn false;\n\n\treturn true;\n}\n\nfunction rotateButton(event) {\n\tconst target = event.currentTarget,\n\t\ticon = target && target.querySelector('figure');\n\tif ( ! icon || icon.classList.contains('ffz-i-t-reset-clicked') )\n\t\treturn;\n\n\ticon.classList.toggle('ffz-i-t-reset', false);\n\ticon.classList.toggle('ffz-i-t-reset-clicked', true);\n\n\tsetTimeout(() => {\n\t\ticon.classList.toggle('ffz-i-t-reset', true);\n\t\ticon.classList.toggle('ffz-i-t-reset-clicked', false);\n\t}, 500);\n}\n\nexport default class PlayerBase extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('i18n');\n\t\tthis.inject('settings');\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site.css_tweaks');\n\n\t\tthis.onShortcut = this.onShortcut.bind(this);\n\n\t\tthis.LEFT_CONTROLS = LEFT_CONTROLS;\n\t\tthis.RIGHT_CONTROLS = RIGHT_CONTROLS;\n\n\t\tthis.registerSettings();\n\t}\n\n\tregisterSettings() {\n\t\tthis.settings.add('player.embed-metadata', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Embed and Popout',\n\t\t\t\ttitle: 'Show metadata when mousing over the player.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('player.cast-button.hide', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Appearance',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\ttitle: 'Hide the Cast button.',\n\t\t\t},\n\n\t\t\tchanged: val => this.css_tweaks.toggleHide('player-cast', val)\n\t\t});\n\n\t\tthis.settings.add('player.clip-button.hide-native', {\n\t\t\tdefault: null,\n\t\t\trequires: ['player.clip-button.custom'],\n\t\t\tprocess: (ctx, val) => val ?? ctx.get('player.clip-button.custom'),\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Appearance',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\ttitle: 'Hide the native Clip button.',\n\t\t\t\tdescription: 'By default, this is enabled when using the setting to add a custom Clip button.'\n\t\t\t},\n\n\t\t\tchanged: val => this.css_tweaks.toggle('player-hide-native-clip', val)\n\t\t});\n\n\t\tthis.settings.add('player.clip-button.custom', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Appearance',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\ttitle: 'Display a custom Clip button.',\n\t\t\t\tdescription: 'Add a custom Clip button to the player that better fits the style of the other buttons.'\n\t\t\t},\n\t\t\tchanged: () => {\n\t\t\t\tfor(const inst of this.Player.instances)\n\t\t\t\t\tthis.addClipButton(inst);\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('player.fade-pause-buffer', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Playback',\n\t\t\t\ttitle: 'Fade the player when paused or buffering to make the UI easier to see.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: val => this.css_tweaks.toggle('player-fade-paused', val)\n\t\t});\n\n\t\tthis.settings.add('player.disable-content-warnings', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> General',\n\t\t\t\ttitle: 'Do not display content warnings.',\n\t\t\t\tdescription: 'When this is enabled, FFZ will automatically skip content warnings. This feature is intended for use by adults only.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: () => {\n\t\t\t\tfor(const inst of this.Player.instances)\n\t\t\t\t\tthis.skipContentWarnings(inst);\n\t\t\t}\n\t\t});\n\n\t\tif ( HAS_COMPRESSOR ) {\n\t\t\tthis.settings.add('player.compressor.enable', {\n\t\t\t\tdefault: true,\n\t\t\t\tui: {\n\t\t\t\t\tpath: 'Player > Compressor @{\"description\": \"These settings control optional dynamic range compression for the player, a form of audio processing that reduces the volume of loud sounds and amplifies quiet sounds, thus normalizing or compressing the volume. This uses a [DynamicsCompressorNode](https://developer.mozilla.org/en-US/docs/Web/API/DynamicsCompressorNode) from the Web Audio API behind the scenes if you want to learn more.\"} >> General',\n\t\t\t\t\ttitle: 'Enable the audio compressor and add an `Audio Compressor` button to the player controls.',\n\t\t\t\t\tsort: -1000,\n\t\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t\t},\n\n\t\t\t\tchanged: () => {\n\t\t\t\t\tfor(const inst of this.Player.instances)\n\t\t\t\t\t\tthis.addCompressorButton(inst);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.settings.add('player.compressor.default', {\n\t\t\t\tdefault: false,\n\t\t\t\tui: {\n\t\t\t\t\tpath: 'Player > Compressor >> General',\n\t\t\t\t\ttitle: 'Enable the compressor by default.',\n\t\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t\t},\n\n\t\t\t\tchanged: () => {\n\t\t\t\t\tfor(const inst of this.Player.instances)\n\t\t\t\t\t\tthis.compressPlayer(inst);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.settings.add('player.compressor.force-legacy', {\n\t\t\t\tdefault: false,\n\t\t\t\tui: {\n\t\t\t\t\tpath: 'Player > Compressor >> Advanced',\n\t\t\t\t\ttitle: 'Force use of legacy browser API.',\n\t\t\t\t\tdescription: 'This setting forces FrankerFaceZ to attempt to use an older browser API to create the compressor. Please reset your player after changing this setting.',\n\t\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\t\tforce_seen: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.settings.add('player.compressor.shortcut', {\n\t\t\t\tdefault: null,\n\t\t\t\trequires: ['player.compressor.enable'],\n\t\t\t\tprocess(ctx, val) {\n\t\t\t\t\tif ( ! ctx.get('player.compressor.enable') )\n\t\t\t\t\t\treturn null;\n\t\t\t\t\treturn val;\n\t\t\t\t},\n\t\t\t\tui: {\n\t\t\t\t\tpath: 'Player > Compressor >> General',\n\t\t\t\t\ttitle: 'Shortcut Key',\n\t\t\t\t\tdescription: 'This key sequence can be used to toggle the compressor.',\n\t\t\t\t\tcomponent: 'setting-hotkey'\n\t\t\t\t},\n\t\t\t\tchanged: () => {\n\t\t\t\t\tthis.updateShortcut();\n\t\t\t\t\tfor(const inst of this.Player.instances)\n\t\t\t\t\t\tthis.addCompressorButton(inst);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif ( HAS_GAIN ) {\n\t\t\t\tthis.settings.add('player.gain.enable', {\n\t\t\t\t\tdefault: false,\n\t\t\t\t\tui: {\n\t\t\t\t\t\tsort: -1,\n\t\t\t\t\t\tpath: 'Player > Compressor >> Gain Control @{\"sort\": 50, \"description\": \"Gain Control gives you extra control over the output volume when using the Compressor by letting you adjust the volume after the compressor runs, while the built-in volume slider takes affect before the compressor. This uses a simple [GainNode](https://developer.mozilla.org/en-US/docs/Web/API/GainNode) from the Web Audio API, connected in sequence after the DynamicsCompressorNode the Compressor uses.\"}',\n\t\t\t\t\t\ttitle: 'Enable gain control when the audio compressor is enabled.',\n\t\t\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t\t\t},\n\n\t\t\t\t\tchanged: () => {\n\t\t\t\t\t\tfor(const inst of this.Player.instances)\n\t\t\t\t\t\t\tthis.compressPlayer(inst);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.settings.add('player.gain.no-volume', {\n\t\t\t\t\tdefault: false,\n\t\t\t\t\trequires: ['player.gain.enable'],\n\t\t\t\t\tprocess(ctx, val) {\n\t\t\t\t\t\tif ( ! ctx.get('player.gain.enable') )\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\treturn val;\n\t\t\t\t\t},\n\n\t\t\t\t\tui: {\n\t\t\t\t\t\tpath: 'Player > Compressor >> Gain Control',\n\t\t\t\t\t\ttitle: 'Force built-in volume to 100% when the audio compressor is enabled.',\n\t\t\t\t\t\tdescription: 'With this enabled, the built-in volume will be hidden and the Gain Control will be the only way to change volume.',\n\t\t\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t\t\t},\n\n\t\t\t\t\tchanged: val => {\n\t\t\t\t\t\tthis.css_tweaks.toggleHide('player-gain-volume', val);\n\t\t\t\t\t\tfor(const inst of this.Player.instances)\n\t\t\t\t\t\t\tthis.updateGainVolume(inst);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.settings.add('player.gain.scroll', {\n\t\t\t\t\tdefault: false,\n\t\t\t\t\tui: {\n\t\t\t\t\t\tpath: 'Player > Compressor >> Gain Control',\n\t\t\t\t\t\ttitle: 'Scroll Adjust',\n\t\t\t\t\t\tdescription: 'Adjust the gain by scrolling with the mouse wheel. This setting takes precedence over adjusting the volume by scrolling. *This setting will not work properly on streams with visible extensions when mouse interaction with extensions is allowed.*',\n\t\t\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\t\t\tdata: SCROLL_OPTIONS\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.settings.add('player.gain.default', {\n\t\t\t\t\tdefault: 100,\n\t\t\t\t\trequires: ['player.gain.min', 'player.gain.max'],\n\t\t\t\t\tprocess(ctx, val) {\n\t\t\t\t\t\tconst min = ctx.get('player.gain.min'),\n\t\t\t\t\t\t\tmax = ctx.get('player.gain.max');\n\n\t\t\t\t\t\tval /= 100;\n\n\t\t\t\t\t\tif ( val < min )\n\t\t\t\t\t\t\tval = min;\n\t\t\t\t\t\tif ( val > max )\n\t\t\t\t\t\t\tval = max;\n\n\t\t\t\t\t\treturn val;\n\t\t\t\t\t},\n\t\t\t\t\tui: {\n\t\t\t\t\t\tpath: 'Player > Compressor >> Gain Control',\n\t\t\t\t\t\ttitle: 'Default Value',\n\t\t\t\t\t\tcomponent: 'setting-text-box',\n\t\t\t\t\t\tdescription: 'The default value for gain control, when gain control is enabled. 100% means no change in volume.',\n\t\t\t\t\t\tprocess: 'to_int',\n\t\t\t\t\t\tbounds: [0, true]\n\t\t\t\t\t},\n\n\t\t\t\t\tchanged: () => this.updateGains()\n\t\t\t\t});\n\n\t\t\t\tthis.settings.add('player.gain.min', {\n\t\t\t\t\tdefault: 0,\n\t\t\t\t\tprocess: (ctx, val) => val / 100,\n\t\t\t\t\tui: {\n\t\t\t\t\t\tpath: 'Player > Compressor >> Gain Control',\n\t\t\t\t\t\ttitle: 'Minimum',\n\t\t\t\t\t\tcomponent: 'setting-text-box',\n\t\t\t\t\t\tdescription: '**Range:** 0 ~ 100\\n\\nThe minimum allowed value for gain control. 0% is effectively muted.',\n\t\t\t\t\t\tprocess: 'to_int',\n\t\t\t\t\t\tbounds: [0, true, 100, true]\n\t\t\t\t\t},\n\n\t\t\t\t\tchanged: () => this.updateGains()\n\t\t\t\t});\n\n\t\t\t\tthis.settings.add('player.gain.max', {\n\t\t\t\t\tdefault: 200,\n\t\t\t\t\tprocess: (ctx, val) => val / 100,\n\t\t\t\t\tui: {\n\t\t\t\t\t\tpath: 'Player > Compressor >> Gain Control',\n\t\t\t\t\t\ttitle: 'Maximum',\n\t\t\t\t\t\tcomponent: 'setting-text-box',\n\t\t\t\t\t\tdescription: '**Range:** 100 ~ 1000\\n\\nThe maximum allowed value for gain control. 100% is no change. 200% is double the volume.',\n\t\t\t\t\t\tprocess: 'to_int',\n\t\t\t\t\t\tbounds: [100, true, 1000, true]\n\t\t\t\t\t},\n\n\t\t\t\t\tchanged: () => this.updateGains()\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.settings.add('player.compressor.threshold', {\n\t\t\t\tdefault: -50,\n\t\t\t\tui: {\n\t\t\t\t\tpath: 'Player > Compressor >> Advanced @{\"sort\": 1000}',\n\t\t\t\t\ttitle: 'Threshold',\n\t\t\t\t\tsort: 0,\n\t\t\t\t\tdescription: '**Range:** -100 ~ 0\\n\\nThe decibel value above which the compression will start taking effect.',\n\t\t\t\t\tcomponent: 'setting-text-box',\n\t\t\t\t\tprocess: 'to_int',\n\t\t\t\t\tbounds: [-100, true, 0, true]\n\t\t\t\t},\n\n\t\t\t\tchanged: () => this.updateCompressors()\n\t\t\t});\n\n\t\t\tthis.settings.add('player.compressor.knee', {\n\t\t\t\tdefault: 40,\n\t\t\t\tui: {\n\t\t\t\t\tpath: 'Player > Compressor >> Advanced',\n\t\t\t\t\ttitle: 'Knee',\n\t\t\t\t\tsort: 5,\n\t\t\t\t\tdescription: '**Range:** 0 ~ 40\\n\\nA decibel value representing the range above the threshold where the curve smoothly transitions to the compressed portion.',\n\t\t\t\t\tcomponent: 'setting-text-box',\n\t\t\t\t\tprocess: 'to_int',\n\t\t\t\t\tbounds: [0, true, 40, true]\n\t\t\t\t},\n\n\t\t\t\tchanged: () => this.updateCompressors()\n\t\t\t});\n\n\t\t\tthis.settings.add('player.compressor.ratio', {\n\t\t\t\tdefault: 12,\n\t\t\t\tui: {\n\t\t\t\t\tpath: 'Player > Compressor >> Advanced',\n\t\t\t\t\ttitle: 'Ratio',\n\t\t\t\t\tsort: 10,\n\t\t\t\t\tdescription: '**Range:** 0 ~ 20\\n\\nThe amount of change, in dB, needed in the input for a 1 dB change in the output.',\n\t\t\t\t\tcomponent: 'setting-text-box',\n\t\t\t\t\tprocess: 'to_int',\n\t\t\t\t\tbounds: [0, true, 20, true]\n\t\t\t\t},\n\n\t\t\t\tchanged: () => this.updateCompressors()\n\t\t\t});\n\n\t\t\tthis.settings.add('player.compressor.attack', {\n\t\t\t\tdefault: 0,\n\t\t\t\tui: {\n\t\t\t\t\tpath: 'Player > Compressor >> Advanced',\n\t\t\t\t\ttitle: 'Attack',\n\t\t\t\t\tsort: 15,\n\t\t\t\t\tdescription: '**Range:** 0 ~ 1\\n\\nThe amount of time, in seconds, required to reduce the gain by 10 dB.',\n\t\t\t\t\tcomponent: 'setting-text-box',\n\t\t\t\t\tprocess: 'to_float',\n\t\t\t\t\tbounds: [0, true, 1, true]\n\t\t\t\t},\n\n\t\t\t\tchanged: () => this.updateCompressors()\n\t\t\t});\n\n\t\t\tthis.settings.add('player.compressor.release', {\n\t\t\t\tdefault: 0.25,\n\t\t\t\tui: {\n\t\t\t\t\tpath: 'Player > Compressor >> Advanced',\n\t\t\t\t\ttitle: 'Release',\n\t\t\t\t\tsort: 20,\n\t\t\t\t\tdescription: '**Range:** 0 ~ 1\\nThe amount of time, in seconds, required to increase the gain by 10 dB.',\n\t\t\t\t\tcomponent: 'setting-text-box',\n\t\t\t\t\tprocess: 'to_float',\n\t\t\t\t\tbounds: [0, true, 1, true]\n\t\t\t\t},\n\n\t\t\t\tchanged: () => this.updateCompressors()\n\t\t\t});\n\t\t}\n\n\t\tthis.settings.add('player.allow-catchup', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General @{\"sort\": -1000} >> General',\n\t\t\t\ttitle: 'Allow the player to speed up to reduce delay.',\n\t\t\t\tdescription: 'Twitch, by default, will apply a minor speed up to live video when you have a large delay to the broadcaster in order to catch back up with the live broadcast. This may result in audio distortion. Disable this to prevent the automatic speed changes.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: () => this.updatePlaybackRates()\n\t\t});\n\n\t\tthis.settings.add('player.mute-click', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Volume',\n\t\t\t\ttitle: 'Mute or unmute the player by middle-clicking.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('player.volume-scroll', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Volume',\n\t\t\t\ttitle: 'Adjust volume by scrolling with the mouse wheel.',\n\t\t\t\tdescription: '*This setting will not work properly on streams with visible extensions when mouse interaction with extensions is allowed.*',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: SCROLL_OPTIONS\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('player.button.reset', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> General',\n\t\t\t\ttitle: 'Add a `Reset Player` button to the player controls.',\n\t\t\t\tdescription: \"Double-clicking the Reset Player button attempts to reset the Twitch player's internal state, fixing playback issues without a full page refresh.\",\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: () => {\n\t\t\t\tfor(const inst of this.Player.instances)\n\t\t\t\t\tthis.addResetButton(inst);\n\t\t\t}\n\t\t});\n\n\t\tif ( document.pictureInPictureEnabled )\n\t\t\tthis.settings.add('player.button.pip', {\n\t\t\t\tdefault: true,\n\t\t\t\tui: {\n\t\t\t\t\tpath: 'Player > General >> General',\n\t\t\t\t\ttitle: 'Add a `Picture-in-Picture` button to the player controls.',\n\t\t\t\t\tdescription: \"Clicking the PiP button attempts to toggle Picture-in-Picture mode for the player's video.\",\n\t\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t\t},\n\t\t\t\tchanged: () => {\n\t\t\t\t\tfor(const inst of this.Player.instances)\n\t\t\t\t\t\tthis.addPiPButton(inst);\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis.settings.add('player.volume-scroll-steps', {\n\t\t\tdefault: 0.1,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Volume',\n\t\t\t\ttitle: 'Volume scroll amount',\n\t\t\t\tdescription: 'How much the volume level is changed per individual scroll input.',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0.1, title: '10%'},\n\t\t\t\t\t{value: 0.05, title: '5%'},\n\t\t\t\t\t{value: 0.02, title: '2%'},\n\t\t\t\t\t{value: 0.01, title: '1%'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('player.captions.font-size', {\n\t\t\tdefault: '',\n\t\t\tui: {\n\t\t\t\tpath: 'Player > Closed Captioning >> Font',\n\t\t\t\ttitle: 'Font Size',\n\t\t\t\tdescription: 'How large should captions be. This can be a percentage, such as `10%`, or a pixel value, such as `50px`.',\n\t\t\t\tcomponent: 'setting-text-box'\n\t\t\t},\n\t\t\tchanged: () => this.updateCaptionsCSS()\n\t\t});\n\n\t\tthis.settings.add('player.captions.font-family', {\n\t\t\tdefault: '',\n\t\t\tui: {\n\t\t\t\tpath: 'Player > Closed Captioning >> Font',\n\t\t\t\ttitle: 'Font Family',\n\t\t\t\tdescription: 'Override the font used for displaying Closed Captions.',\n\t\t\t\tcomponent: 'setting-combo-box',\n\t\t\t\tdata: () => getFontsList()\n\t\t\t},\n\t\t\tchanged: () => this.updateCaptionsCSS()\n\t\t});\n\n\t\t/*this.settings.add('player.captions.custom-position', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > Closed Captioning >> Position',\n\t\t\t\tsort: -1,\n\t\t\t\ttitle: 'Enable overriding the position and alignment of closed captions.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: () => this.updateCaptionsCSS()\n\t\t});\n\n\t\tthis.settings.add('player.captions.vertical', {\n\t\t\tdefault: '10%',\n\t\t\tui: {\n\t\t\t\tpath: 'Player > Closed Captioning >> Position',\n\t\t\t\ttitle: 'Vertical Position',\n\t\t\t\tcomponent: 'setting-text-box',\n\t\t\t\tdescription: 'Override the position for Closed Captions. This can be a percentage, such as `10%`, or a pixel value, such as `50px`.'\n\t\t\t},\n\t\t\tchanged: () => this.updateCaptionsCSS()\n\t\t});\n\n\t\tthis.settings.add('player.captions.horizontal', {\n\t\t\tdefault: '50%',\n\t\t\tui: {\n\t\t\t\tpath: 'Player > Closed Captioning >> Position',\n\t\t\t\ttitle: 'Horizontal Position',\n\t\t\t\tcomponent: 'setting-text-box',\n\t\t\t\tdescription: 'Override the position for Closed Captions. This can be a percentage, such as `10%`, or a pixel value, such as `50px`.'\n\t\t\t},\n\t\t\tchanged: () => this.updateCaptionsCSS()\n\t\t});\n\n\t\tthis.settings.add('player.captions.alignment', {\n\t\t\tdefault: 32,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > Closed Captioning >> Position',\n\t\t\t\ttitle: 'Alignment',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 11, title: 'Top Left'},\n\t\t\t\t\t{value: 12, title: 'Top Center'},\n\t\t\t\t\t{value: 13, title: 'Top Right'},\n\t\t\t\t\t{value: 21, title: 'Middle Left'},\n\t\t\t\t\t{value: 22, title: 'Middle Center'},\n\t\t\t\t\t{value: 23, title: 'Middle Right'},\n\t\t\t\t\t{value: 31, title: 'Bottom Left'},\n\t\t\t\t\t{value: 32, title: 'Bottom Center'},\n\t\t\t\t\t{value: 33, title: 'Bottom Right'}\n\t\t\t\t]\n\t\t\t},\n\t\t\tchanged: () => this.updateCaptionsCSS()\n\t\t});*/\n\n\t\tthis.settings.add('player.ext-hide', {\n\t\t\tdefault: 0,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Extensions',\n\t\t\t\ttitle: 'Show Overlay Extensions',\n\t\t\t\tdescription: '**Note**: This feature does not prevent extensions from loading. Hidden extensions are merely invisible. Hiding extensions with this feature will not improve your security. To prevent extensions from loading entirely, we recommend using the [Disable Twitch Extensions browser extension](https://twitch-tools.rootonline.de/disable_twitch_extensions.php) by CommanderRoot.',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 2, title: 'Never'},\n\t\t\t\t\t{value: 1, title: 'With Controls'},\n\t\t\t\t\t{value: 0, title: 'Always'}\n\t\t\t\t]\n\t\t\t},\n\t\t\tchanged: val => this.updateHideExtensions(val)\n\t\t});\n\n\t\tthis.settings.add('player.ext-interaction', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Extensions',\n\t\t\t\ttitle: 'Allow mouse interaction with overlay extensions.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.css_tweaks.toggle('player-ext-mouse', !val)\n\t\t})\n\n\t\tthis.settings.add('player.no-autoplay', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Playback',\n\t\t\t\ttitle: 'Do not automatically start playing videos or streams.',\n\t\t\t\tdescription: 'Note: This feature does not apply when navigating directly from channel to channel.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('player.vod.autoplay', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Playback',\n\t\t\t\ttitle: 'Auto-play the next recommended video after a video finishes.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('player.volume-always-shown', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Volume',\n\t\t\t\ttitle: 'Keep the volume slider expanded at all times.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.css_tweaks.toggle('player-volume', val)\n\t\t});\n\n\t\tthis.settings.add('player.hide-mouse', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> General',\n\t\t\t\ttitle: \"Hide mouse when controls aren't visible.\",\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.css_tweaks.toggle('player-hide-mouse', val)\n\t\t});\n\n\t\tthis.settings.add('player.single-click-pause', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Playback',\n\t\t\t\ttitle: \"Pause/Unpause the player by clicking.\",\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\t}\n\n\tasync onEnable() {\n\t\tawait this.settings.awaitProvider();\n\t\tawait this.settings.provider.awaitReady();\n\n\t\tthis.css_tweaks.toggleHide('player-cast', this.settings.get('player.cast-button.hide'));\n\t\tthis.css_tweaks.toggleHide('player-gain-volume', this.settings.get('player.gain.no-volume'));\n\t\tthis.css_tweaks.toggle('player-hide-native-clip', this.settings.get('player.clip-button.hide-native'));\n\t\tthis.css_tweaks.toggle('player-volume', this.settings.get('player.volume-always-shown'));\n\t\tthis.css_tweaks.toggle('player-ext-mouse', !this.settings.get('player.ext-interaction'));\n\t\tthis.css_tweaks.toggle('player-hide-mouse', this.settings.get('player.hide-mouse'));\n\t\tthis.css_tweaks.toggle('player-fade-paused', this.settings.get('player.fade-pause-buffer'));\n\n\t\tthis.installVisibilityHook();\n\t\tthis.updateHideExtensions();\n\t\tthis.updateCaptionsCSS();\n\t\tthis.updateShortcut();\n\n\t\tthis.on(':reset', this.resetAllPlayers, this);\n\n\t\tthis.Player.ready((cls, instances) => {\n\t\t\tthis.modifyPlayerClass(cls);\n\n\t\t\tfor(const inst of instances) {\n\t\t\t\tconst events = inst.props?.playerEvents;\n\t\t\t\tif ( events ) {\n\t\t\t\t\toff(events, 'Playing', inst.setPlayerActive);\n\t\t\t\t\toff(events, 'PlayerSeekCompleted', inst.setPlayerActive);\n\t\t\t\t}\n\n\t\t\t\tinst.ffzMaybeRemoveNativeListeners();\n\t\t\t\tinst.maybeAttachDomEventListeners();\n\t\t\t\tinst.ffzScheduleState();\n\n\t\t\t\tif ( events ) {\n\t\t\t\t\ton(events, 'Playing', inst.setPlayerActive);\n\t\t\t\t\ton(events, 'PlayerSeekCompleted', inst.setPlayerActive);\n\t\t\t\t}\n\n\t\t\t\tthis.updateGUI(inst);\n\t\t\t\tthis.compressPlayer(inst);\n\t\t\t\tthis.updatePlaybackRate(inst);\n\t\t\t}\n\t\t});\n\n\t\tthis.Player.on('mount', inst => {\n\t\t\tthis.updateGUI(inst);\n\t\t\tthis.compressPlayer(inst);\n\t\t\tthis.updatePlaybackRate(inst);\n\t\t});\n\t\tthis.Player.on('update', inst => {\n\t\t\tthis.updateGUI(inst);\n\t\t\tthis.compressPlayer(inst);\n\t\t\tthis.updatePlaybackRate(inst);\n\t\t});\n\n\t\tthis.Player.on('unmount', inst => {\n\t\t\tinst.ffzUninstall();\n\t\t});\n\n\t\tthis.on('i18n:update', () => {\n\t\t\tfor(const inst of this.Player.instances) {\n\t\t\t\tthis.updateGUI(inst);\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateShortcut() {\n\t\tconst Mousetrap = this.Mousetrap = this.Mousetrap || this.resolve('site.web_munch')?.getModule?.('mousetrap') || window.Mousetrap;\n\t\tif ( ! Mousetrap || ! Mousetrap.bind )\n\t\t\treturn;\n\n\t\tif ( this._shortcut_bound ) {\n\t\t\tMousetrap.unbind(this._shortcut_bound);\n\t\t\tthis._shortcut_bound = null;\n\t\t}\n\n\t\tconst key = this.settings.get('player.compressor.shortcut');\n\t\tif ( HAS_COMPRESSOR && key && isValidShortcut(key) ) {\n\t\t\tMousetrap.bind(key, this.onShortcut);\n\t\t\tthis._shortcut_bound = key;\n\t\t}\n\t}\n\n\n\tonShortcut(e) {\n\t\tfor(const inst of this.Player.instances)\n\t\t\tthis.compressPlayer(inst, e);\n\t}\n\n\n\tmodifyPlayerClass(cls) {\n\t\tconst t = this,\n\t\t\told_attach = cls.prototype.maybeAttachDomEventListeners;\n\n\t\tcls.prototype.ffzInstall = function() {\n\t\t\tif ( this._ffz_installed )\n\t\t\t\treturn;\n\n\t\t\tthis._ffz_installed = true;\n\n\t\t\t//if ( ! this._ffzUpdateVolume )\n\t\t\t//\tthis._ffzUpdateVolume = debounce(this.ffzUpdateVolume.bind(this));\n\n\t\t\tif ( ! this._ffzUpdateState )\n\t\t\t\tthis._ffzUpdateState = this.ffzUpdateState.bind(this);\n\n\t\t\tif ( ! this._ffzErrorReset )\n\t\t\t\tthis._ffzErrorReset = t.addErrorResetButton.bind(t, this);\n\n\t\t\tif ( ! this._ffzReady )\n\t\t\t\tthis._ffzReady = this.ffzReady.bind(this);\n\n\t\t\tconst inst = this,\n\t\t\t\told_active = this.setPlayerActive,\n\t\t\t\told_inactive = this.setPlayerInactive;\n\n\t\t\tthis.setPlayerActive = function() {\n\t\t\t\tinst.ffzScheduleState();\n\t\t\t\treturn old_active.call(inst);\n\t\t\t}\n\n\t\t\tthis.setPlayerInactive = function() {\n\t\t\t\tinst.ffzScheduleState();\n\t\t\t\treturn old_inactive.call(inst);\n\t\t\t}\n\n\t\t\tthis.ffzOnEnded = () => {\n\t\t\t\tif ( t.settings.get('player.vod.autoplay') )\n\t\t\t\t\treturn;\n\n\t\t\t\tt.parent.awaitElement(\n\t\t\t\t\t'.autoplay-vod__content-container button',\n\t\t\t\t\tthis.props.containerRef || t.fine.getChildNode(this),\n\t\t\t\t\t1000\n\t\t\t\t).then(el => el.click());\n\t\t\t}\n\n\t\t\tconst events = this.props.playerEvents;\n\t\t\tif ( events ) {\n\t\t\t\ton(events, 'Buffering', this._ffzUpdateState);\n\t\t\t\ton(events, 'Playing', this._ffzUpdateState);\n\t\t\t\ton(events, 'PlayerError', this._ffzUpdateState);\n\t\t\t\ton(events, 'PlayerError', this._ffzErrorReset);\n\t\t\t\ton(events, 'Ended', this._ffzUpdateState);\n\t\t\t\ton(events, 'Ended', this.ffzOnEnded);\n\t\t\t\ton(events, 'Ready', this._ffzReady);\n\t\t\t\ton(events, 'Idle', this._ffzUpdateState);\n\t\t\t}\n\n\t\t\tthis.ffzStopAutoplay();\n\t\t}\n\n\t\t/*cls.prototype.ffzUpdateVolume = function() {\n\t\t\tif ( document.hidden )\n\t\t\t\treturn;\n\n\t\t\tconst player = this.props.mediaPlayerInstance,\n\t\t\t\tvideo = player?.mediaSinkManager?.video || player?.core?.mediaSinkManager?.video;\n\t\t\tif ( video ) {\n\t\t\t\tconst volume = video.volume,\n\t\t\t\t\tmuted = player.isMuted();\n\t\t\t\tif ( ! video.muted && player.getVolume() !== volume ) {\n\t\t\t\t\tplayer.setVolume(volume);\n\t\t\t\t\tplayer.setMuted(muted);\n\t\t\t\t}\n\t\t\t}\n\t\t}*/\n\n\t\tcls.prototype.ffzUninstall = function() {\n\t\t\tif ( this._ffz_state_raf )\n\t\t\t\tcancelAnimationFrame(this._ffz_state_raf);\n\n\t\t\tconst events = this.props.playerEvents;\n\t\t\tif ( events && this._ffzUpdateState ) {\n\t\t\t\toff(events, 'Playing', this._ffzUpdateState);\n\t\t\t\toff(events, 'PlayerError', this._ffzUpdateState);\n\t\t\t\toff(events, 'PlayerError', this._ffzErrorReset);\n\t\t\t\toff(events, 'Ended', this._ffzUpdateState);\n\t\t\t\toff(events, 'Ended', this.ffzOnEnded);\n\t\t\t\toff(events, 'Ready', this._ffzReady);\n\t\t\t\toff(events, 'Idle', this._ffzUpdateState);\n\t\t\t}\n\n\t\t\tthis.ffzRemoveListeners();\n\n\t\t\tthis._ffz_state_raf = null;\n\t\t\tthis._ffzUpdateState = null;\n\t\t\tthis._ffzErrorReset = null;\n\t\t\tthis._ffzReady = null;\n\t\t\tthis.ffzOnEnded = null;\n\t\t}\n\n\t\tcls.prototype.ffzReady = function() {\n\t\t\tconst cont = this.props.containerRef;\n\t\t\tif ( ! cont )\n\t\t\t\treturn;\n\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tconst icons = cont.querySelectorAll('.ffz--player-reset figure');\n\t\t\t\tfor(const icon of icons) {\n\t\t\t\t\tif ( icon._ffz_unspin )\n\t\t\t\t\t\tclearTimeout(icon._ffz_unspin);\n\n\t\t\t\t\ticon.classList.toggle('loading', false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tcls.prototype.ffzStopAutoplay = function() {\n\t\t\tif ( t.shouldStopAutoplay(this) )\n\t\t\t\tt.stopPlayer(this.props.mediaPlayerInstance, this.props.playerEvents, this);\n\t\t}\n\n\t\tcls.prototype.ffzScheduleState = function() {\n\t\t\tif ( ! this._ffzUpdateState )\n\t\t\t\tthis._ffzUpdateState = this.ffzUpdateState.bind(this);\n\n\t\t\tif ( ! this._ffz_state_raf )\n\t\t\t\tthis._ffz_state_raf = requestAnimationFrame(this._ffzUpdateState);\n\t\t}\n\n\t\tcls.prototype.ffzUpdateState = function() {\n\t\t\tthis._ffz_state_raf = null;\n\t\t\tconst cont = this.props.containerRef;\n\t\t\tif ( ! cont )\n\t\t\t\treturn;\n\n\t\t\tconst ds = cont.dataset;\n\t\t\tds.controls = this.state?.active || false;\n\n\t\t\tlet player = this.props.mediaPlayerInstance;\n\t\t\tif ( ! player )\n\t\t\t\treturn;\n\n\t\t\tif ( player.core )\n\t\t\t\tplayer = player.core;\n\n\t\t\tconst state = player.state?.state,\n\t\t\t\tvideo = player.mediaSinkManager?.video;\n\n\t\t\tif ( state === 'Playing' ) {\n\t\t\t\tif ( video?._ffz_maybe_compress ) {\n\t\t\t\t\tvideo._ffz_maybe_compress = false;\n\t\t\t\t\tt.compressPlayer(this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( video && video._ffz_compressed != null )\n\t\t\t\tds.compressed = video._ffz_compressed;\n\n\t\t\tds.ended = state === 'Ended';\n\t\t\tds.paused = state === 'Idle';\n\t\t\tds.buffering = state === 'Buffering';\n\t\t}\n\n\t\tcls.prototype.ffzAttachListeners = function() {\n\t\t\tconst cont = this.props.containerRef;\n\t\t\tif ( ! cont || this._ffz_listeners )\n\t\t\t\treturn;\n\n\t\t\tthis._ffz_listeners = true;\n\t\t\tif ( ! this._ffz_scroll_handler )\n\t\t\t\tthis._ffz_scroll_handler = this.ffzScrollHandler.bind(this);\n\n\t\t\tif ( ! this._ffz_click_handler )\n\t\t\t\tthis._ffz_click_handler = this.ffzClickHandler.bind(this);\n\n\t\t\tif ( ! this._ffz_dblclick_handler )\n\t\t\t\tthis._ffz_dblclick_handler = this.ffzDblClickHandler.bind(this);\n\n\t\t\tif ( ! this._ffz_menu_handler )\n\t\t\t\tthis._ffz_menu_handler = this.ffzMenuHandler.bind(this);\n\n\t\t\ton(cont, 'wheel', this._ffz_scroll_handler);\n\t\t\ton(cont, 'dblclick', this._ffz_dblclick_handler);\n\t\t\ton(cont, 'mousedown', this._ffz_click_handler);\n\t\t\ton(cont, 'contextmenu', this._ffz_menu_handler);\n\t\t}\n\n\t\tcls.prototype.ffzRemoveListeners = function() {\n\t\t\tconst cont = this.props.containerRef;\n\t\t\tif ( ! cont || ! this._ffz_listeners )\n\t\t\t\treturn;\n\n\t\t\tif ( this._ffz_scroll_handler ) {\n\t\t\t\toff(cont, 'wheel', this._ffz_scroll_handler);\n\t\t\t\tthis._ffz_scroll_handler = null;\n\t\t\t}\n\n\t\t\tif ( this._ffz_click_handler ) {\n\t\t\t\toff(cont, 'mousedown', this._ffz_click_handler);\n\t\t\t\tthis._ffz_click_handler = null;\n\t\t\t}\n\n\t\t\tif ( this._ffz_menu_handler ) {\n\t\t\t\toff(cont, 'contextmenu', this._ffz_menu_handler);\n\t\t\t\tthis._ffz_menu_handler = null;\n\t\t\t}\n\n\t\t\tif ( this._ffz_dblclick_handler ) {\n\t\t\t\toff(cont, 'dblclick', this._ffz_dblclick_handler);\n\t\t\t\tthis._ffz_dblclick_handler = null;\n\t\t\t}\n\n\t\t\tthis._ffz_listeners = false;\n\t\t}\n\n\t\tcls.prototype.ffzDelayPause = function() {\n\t\t\tif ( this._ffz_pause_timer )\n\t\t\t\tclearTimeout(this._ffz_pause_timer);\n\n\t\t\tconst player = this.props?.mediaPlayerInstance;\n\t\t\tif (! player.isPaused())\n\t\t\t\tthis._ffz_pause_timer = setTimeout(() => {\n\t\t\t\t\tconst player = this.props?.mediaPlayerInstance;\n\t\t\t\t\tif (!player.isPaused())\n\t\t\t\t\t\tplayer.pause();\n\t\t\t\t}, 500);\n\t\t}\n\n\t\tcls.prototype.ffzDblClickHandler = function(event) {\n\t\t\tif ( ! event )\n\t\t\t\treturn;\n\n\t\t\tif ( this._ffz_pause_timer )\n\t\t\t\tclearTimeout(this._ffz_pause_timer);\n\t\t}\n\n\t\tcls.prototype.ffzClickHandler = function(event) {\n\t\t\tif ( ! event )\n\t\t\t\treturn;\n\n\t\t\tconst vol_scroll = t.settings.get('player.volume-scroll'),\n\t\t\t\tgain_scroll = t.settings.get('player.gain.scroll'),\n\t\t\t\tclick_pause = t.settings.get('player.single-click-pause'),\n\n\t\t\t\twants_rmb = wantsRMB(vol_scroll) || wantsRMB(gain_scroll);\n\n\t\t\t// Left Click\n\t\t\tif (click_pause && event.button === 0) {\n\t\t\t\tif (! event.target || ! event.target.classList.contains('click-handler'))\n\t\t\t\t\treturn;\n\n\t\t\t\tthis.ffzDelayPause();\n\t\t\t}\n\n\t\t\t// Right Click\n\t\t\tif ( wants_rmb && event.button === 2 ) {\n\t\t\t\tthis.ffz_rmb = true;\n\t\t\t\tthis.ffz_scrolled = false;\n\t\t\t}\n\n\t\t\t// Middle Click\n\t\t\tif ( ! t.settings.get('player.mute-click') || event.button !== 1 )\n\t\t\t\treturn;\n\n\t\t\tconst player = this.props?.mediaPlayerInstance;\n\t\t\tif ( ! player?.isMuted )\n\t\t\t\treturn;\n\n\t\t\tconst muted = ! player.isMuted();\n\t\t\tplayer.setMuted(muted);\n\t\t\tlocalStorage.setItem('video-muted', JSON.stringify({default: muted}));\n\t\t\tevent.preventDefault();\n\t\t\treturn false;\n\t\t}\n\n\t\tcls.prototype.ffzMenuHandler = function(event) {\n\t\t\tthis.ffz_rmb = false;\n\t\t\tif ( this.ffz_scrolled ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t}\n\n\t\tcls.prototype.ffzScrollHandler = function(event) {\n\t\t\tconst vol_scroll = t.settings.get('player.volume-scroll'),\n\t\t\t\tgain_scroll = t.settings.get('player.gain.scroll'),\n\t\t\t\tno_vol = t.settings.get('player.gain.no-volume'),\n\n\t\t\t\tmatches_gain = gain_scroll && matchesEvent(gain_scroll, event, this.ffz_rmb),\n\t\t\t\tmatches_vol = vol_scroll && matchesEvent(vol_scroll, event, this.ffz_rmb);\n\n\t\t\tif ( ! matches_gain && ! matches_vol )\n\t\t\t\treturn;\n\n\t\t\tconst delta = event.wheelDelta || -(event.deltaY || event.detail || 0),\n\t\t\t\tplayer = this.props?.mediaPlayerInstance,\n\t\t\t\tvideo = player?.mediaSinkManager?.video || player?.core?.mediaSinkManager?.video,\n\t\t\t\thas_gain = video?._ffz_compressed && video?._ffz_gain != null,\n\t\t\t\tdoing_gain = has_gain && matches_gain;\n\n\t\t\tif ( ! player?.getVolume )\n\t\t\t\treturn;\n\n\t\t\tif ( doing_gain ? wantsRMB(gain_scroll) : wantsRMB(vol_scroll) )\n\t\t\t\tthis.ffz_scrolled = true;\n\n\t\t\tconst amount = t.settings.get('player.volume-scroll-steps');\n\n\t\t\tif ( doing_gain ) {\n\t\t\t\tlet value = video._ffz_gain_value;\n\t\t\t\tif ( value == null )\n\t\t\t\t\tvalue = t.settings.get('player.gain.default');\n\n\t\t\t\tconst min = t.settings.get('player.gain.min'),\n\t\t\t\t\tmax = t.settings.get('player.gain.max');\n\n\t\t\t\tif ( delta > 0 )\n\t\t\t\t\tvalue += amount;\n\t\t\t\telse\n\t\t\t\t\tvalue -= amount;\n\n\t\t\t\tif ( value < min )\n\t\t\t\t\tvalue = min;\n\t\t\t\tif ( value > max )\n\t\t\t\t\tvalue = max;\n\n\t\t\t\tvideo._ffz_gain_value = value;\n\n\t\t\t\tif ( no_vol && value !== 0 ) {\n\t\t\t\t\tplayer.setMuted(false);\n\t\t\t\t\tlocalStorage.setItem('video-muted', JSON.stringify({default: false}));\n\t\t\t\t}\n\n\t\t\t\tt.updateGain(this);\n\n\t\t\t} else if ( matches_vol && ! (video._ffz_compressed && no_vol) ) {\n\t\t\t\tconst old_volume = video?.volume ?? player.getVolume(),\n\t\t\t\t\tvolume = Math.max(0, Math.min(1, old_volume + (delta > 0 ? amount : -amount)));\n\n\t\t\t\tplayer.setVolume(volume);\n\t\t\t\tlocalStorage.volume = volume;\n\n\t\t\t\tif ( volume !== 0 ) {\n\t\t\t\t\tplayer.setMuted(false);\n\t\t\t\t\tlocalStorage.setItem('video-muted', JSON.stringify({default: false}));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\t\t\treturn false;\n\t\t}\n\n\t\tcls.prototype.ffzMaybeRemoveNativeListeners = function() {\n\t\t\tconst cont = this.props.containerRef;\n\t\t\tif ( cont && this.listenersAttached ) {\n\t\t\t\toff(cont, 'mouseleave', this.setPlayerInactive);\n\t\t\t\toff(cont, 'mouseenter', this.setPlayerActive);\n\t\t\t\toff(cont, 'mousemove', this.onMouseMove);\n\t\t\t\tthis.listenersAttached = false;\n\t\t\t}\n\t\t}\n\n\t\tcls.prototype.maybeAttachDomEventListeners = function() {\n\t\t\ttry {\n\t\t\t\tthis.ffzInstall();\n\t\t\t\tthis.ffzAttachListeners();\n\t\t\t} catch(err) {\n\t\t\t\tt.log.error('Error attaching event listener.', err);\n\t\t\t}\n\n\t\t\treturn old_attach.call(this);\n\t\t}\n\t}\n\n\tshouldStopAutoplay() { // eslint-disable-line class-methods-use-this\n\t\treturn false;\n\t}\n\n\tinstallVisibilityHook() {\n\t\tif ( ! document.pictureInPictureEnabled ) {\n\t\t\tthis.log.info('Skipping visibility hooks. Picture-in-Picture is not available.');\n\t\t\treturn;\n\t\t}\n\n\t\tconst t = this;\n\n\t\tdocument.addEventListener('fullscreenchange', () => {\n\t\t\tconst fs = document.fullscreenElement,\n\t\t\t\tpip = document.pictureInPictureElement;\n\n\t\t\tif ( fs && pip && (fs === pip || fs.contains(pip)) )\n\t\t\t\tdocument.exitPictureInPicture();\n\n\t\t\t// Update the UI since we can't enter PiP from Fullscreen\n\t\t\tfor(const inst of this.Player.instances)\n\t\t\t\tthis.addPiPButton(inst);\n\t\t});\n\n\t\ttry {\n\t\t\tObject.defineProperty(document, 'hidden', {\n\t\t\t\tconfigurable: true,\n\t\t\t\tget() {\n\t\t\t\t\t// If Picture in Picture is active, then we should not\n\t\t\t\t\t// drop quality. Therefore, we need to trick Twitch\n\t\t\t\t\t// into thinking the document is still active.\n\t\t\t\t\tif ( document.pictureInPictureElement != null )\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\tif ( t.settings.get('player.force-visible') )\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\treturn document.visibilityState === 'hidden';\n\t\t\t\t}\n\t\t\t});\n\n\t\t} catch(err) {\n\t\t\tthis.log.warn('Unable to install document visibility hook.', err);\n\t\t}\n\t}\n\n\tstopPlayer(player, events, inst) {\n\t\tif ( player && player.pause && (player.getState?.() || player.core?.getState?.()) === 'Playing' )\n\t\t\tplayer.pause();\n\t\telse if ( events && ! events._ffz_stopping ) {\n\t\t\tevents._ffz_stopping = true;\n\n\t\t\tconst immediatePause = () => {\n\t\t\t\tif ( inst.props.mediaPlayerInstance?.pause ) {\n\t\t\t\t\tinst.props.mediaPlayerInstance.pause();\n\t\t\t\t\toff(events, 'Playing', immediatePause);\n\t\t\t\t\tevents._ffz_stopping = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.log.info('Unable to immediately pause. Listening for playing event.');\n\t\t\ton(events, 'Playing', immediatePause);\n\t\t}\n\t}\n\n\tupdateCaptionsCSS() {\n\t\t// Font\n\t\tconst font_out = [];\n\n\t\tconst font_size = this.settings.get('player.captions.font-size');\n\t\tlet font_family = this.settings.get('player.captions.font-family');\n\n\t\tif ( font_family && font_family.length ) {\n\t\t\tconst [processed, unloader] = useFont(font_family);\n\t\t\tfont_family = processed;\n\n\t\t\tif ( this._font_unloader )\n\t\t\t\tthis._font_unloader();\n\n\t\t\tthis._font_unloader = unloader;\n\n\t\t\tif ( font_family.indexOf(' ') !== -1 && font_family.indexOf(',') === -1 && font_family.indexOf('\"') === -1 && font_family.indexOf(\"'\") === -1 )\n\t\t\t\tfont_family = `\"${font_family}\"`;\n\n\t\t\tSTYLE_VALIDATOR.style.fontFamily = '';\n\t\t\tSTYLE_VALIDATOR.style.fontFamily = font_family;\n\n\t\t\tif ( STYLE_VALIDATOR.style.fontFamily )\n\t\t\t\tfont_out.push(`font-family: ${STYLE_VALIDATOR.style.fontFamily} !important;`);\n\t\t}\n\n\t\tSTYLE_VALIDATOR.style.fontSize = '';\n\t\tSTYLE_VALIDATOR.style.fontSize = font_size;\n\n\t\tif ( STYLE_VALIDATOR.style.fontSize )\n\t\t\tfont_out.push(`font-size: ${STYLE_VALIDATOR.style.fontSize} !important;`);\n\n\t\tif ( font_out.length )\n\t\t\tthis.css_tweaks.set('captions-font', `.player-captions-container__caption-line {\n\t${font_out.join('\\n\\t')}\n}`)\n\t\telse\n\t\t\tthis.css_tweaks.delete('captions-font');\n\n\t\t// Position\n\t\t/*const enabled = this.settings.get('player.captions.custom-position'),\n\t\t\tvertical = this.settings.get('player.captions.vertical'),\n\t\t\thorizontal = this.settings.get('player.captions.horizontal'),\n\t\t\talignment = this.settings.get('player.captions.alignment');\n\n\t\tif ( ! enabled ) {\n\t\t\tthis.css_tweaks.delete('captions-position');\n\t\t\treturn;\n\t\t}\n\n\t\tconst out = [], align_out = [],\n\t\t\talign_horizontal = alignment % 10,\n\t\t\talign_vertical = Math.floor(alignment / 10);\n\n\t\tlet custom_top = false,\n\t\t\tcustom_left = false;\n\n\t\tSTYLE_VALIDATOR.style.top = '';\n\t\tSTYLE_VALIDATOR.style.top = vertical;\n\t\tif ( STYLE_VALIDATOR.style.top ) {\n\t\t\tout.push(`${align_vertical === 3 ? 'bottom' : 'top'}: ${STYLE_VALIDATOR.style.top} !important;`)\n\t\t\tout.push(`${align_vertical === 3 ? 'top' : 'bottom'}: unset !important;`);\n\t\t\tcustom_top = true;\n\t\t}\n\n\t\tSTYLE_VALIDATOR.style.top = '';\n\t\tSTYLE_VALIDATOR.style.top = horizontal;\n\t\tif ( STYLE_VALIDATOR.style.top ) {\n\t\t\tif ( align_horizontal === 1 )\n\t\t\t\talign_out.push(`align-items: flex-start !important;`);\n\t\t\telse if ( align_horizontal === 3 )\n\t\t\t\talign_out.push(`align-items: flex-end !important;`);\n\n\t\t\tout.push(`${align_horizontal === 3 ? 'right' : 'left'}: ${STYLE_VALIDATOR.style.top} !important;`);\n\t\t\tout.push(`${align_horizontal === 3 ? 'left' : 'right'}: unset !important;`);\n\t\t\tcustom_left = true;\n\t\t}\n\n\t\tif ( align_horizontal !== 2 )\n\t\t\tout.push(`width: unset !important;`);\n\n\t\tout.push(`transform: translate(${(!custom_left || align_horizontal === 2) ? '-50%' : '0'}, ${(!custom_top || align_vertical === 2) ? '-50%' : '0'})`);\n\n\t\tthis.css_tweaks.set('captions-position', `.player-captions-container {\n\t${out.join('\\n\\t')};\n}${align_out.length ? `.player-captions-container__caption-window {\n\t${align_out.join('\\n\\t')}\n}` : ''}`);*/\n\t}\n\n\tupdateHideExtensions(val) {\n\t\tif ( val === undefined )\n\t\t\tval = this.settings.get('player.ext-hide');\n\n\t\tthis.css_tweaks.toggleHide('player-ext-hover', val === 1);\n\t\tthis.css_tweaks.toggleHide('player-ext', val === 2);\n\t}\n\n\tskipContentWarnings(inst) {\n\t\tif ( ! this.settings.get('player.disable-content-warnings') )\n\t\t\treturn;\n\n\t\tconst cont = this.fine.getHostNode(inst),\n\t\t\tbtn = cont && cont.querySelector('button[data-a-target=\"content-classification-gate-overlay-start-watching-button\"]');\n\n\t\tif ( btn )\n\t\t\tbtn.click();\n\t}\n\n\tupdateGUI(inst) {\n\t\tthis.skipContentWarnings(inst);\n\t\tthis.addPiPButton(inst);\n\t\tthis.addResetButton(inst);\n\t\tthis.addClipButton(inst);\n\t\tthis.addCompressorButton(inst, false);\n\t\tthis.addGainSlider(inst, false);\n\t\tthis.addMetadata(inst);\n\n\t\t//if ( inst._ffzUpdateVolume )\n\t\t//\tinst._ffzUpdateVolume();\n\n\t\tthis.emit(':update-gui', inst);\n\t}\n\n\tareControlsDisabled(inst) {\n\t\tif ( ! inst._ffz_control_state )\n\t\t\tthis.findControlState(inst);\n\n\t\tif ( inst._ffz_control_state )\n\t\t\treturn inst._ffz_control_state.props.disableControls;\n\n\t\treturn false;\n\t}\n\n\tfindControlState(inst) {\n\t\tif ( ! inst._ffz_control_state )\n\t\t\tinst._ffz_control_state = this.fine.searchTree(inst, n => n.props && has(n.props, 'disableControls'), 200);\n\t}\n\n\taddGainSlider(inst, visible_only, tries = 0) {\n\t\tconst outer = inst.props.containerRef || this.fine.getChildNode(inst),\n\t\t\tvideo = inst.props.mediaPlayerInstance?.mediaSinkManager?.video || inst.props.mediaPlayerInstance?.core?.mediaSinkManager?.video,\n\t\t\tcontainer = outer && outer.querySelector(LEFT_CONTROLS);\n\t\tlet gain = video != null && video._ffz_compressed && video._ffz_gain;\n\n\t\tif ( this.areControlsDisabled(inst) )\n\t\t\tgain = null;\n\n\t\tif ( ! container ) {\n\t\t\tif ( video && ! gain )\n\t\t\t\treturn;\n\n\t\t\tif ( tries < 5 )\n\t\t\t\treturn setTimeout(this.addGainSlider.bind(this, inst, visible_only, (tries || 0) + 1), 250);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst min = this.settings.get('player.gain.min'),\n\t\t\tmax = this.settings.get('player.gain.max');\n\n\t\tif ( min >= max || max <= min )\n\t\t\tgain = null;\n\n\t\tlet tip, tipcont, input, extra, fill, cont = container.querySelector('.ffz--player-gain');\n\t\tif ( ! gain ) {\n\t\t\tif ( cont )\n\t\t\t\tcont.remove();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! cont ) {\n\t\t\tconst on_change = () => {\n\t\t\t\tlet value = input.value / 100;\n\n\t\t\t\tconst min = this.settings.get('player.gain.min'),\n\t\t\t\t\tmax = this.settings.get('player.gain.max');\n\n\t\t\t\tif ( value < min )\n\t\t\t\t\tvalue = min;\n\t\t\t\tif ( value > max )\n\t\t\t\t\tvalue = max;\n\n\t\t\t\tif ( value == video._ffz_gain_value )\n\t\t\t\t\treturn;\n\n\t\t\t\tconst player = inst.props.mediaPlayerInstance,\n\t\t\t\t\tcore = player.core || player;\n\n\t\t\t\tif ( ! this.areControlsDisabled(inst) && value > 0 && this.settings.get('player.gain.no-volume') && core?.isMuted?.() ) {\n\t\t\t\t\tcore.setMuted(false);\n\t\t\t\t\tlocalStorage.setItem('video-muted', JSON.stringify({default: false}));\n\t\t\t\t}\n\n\t\t\t\tvideo._ffz_gain_value = value;\n\t\t\t\tgain.gain.value = value;\n\n\t\t\t\tconst range = max - min,\n\t\t\t\t\twidth = (value - min) / range;\n\n\t\t\t\tfill.style.width = `${width * 100}%`;\n\t\t\t\textra.textContent = `${Math.round(value * 100)}%`;\n\t\t\t};\n\n\t\t\tcont = (<div class=\"ffz--player-gain volume-slider__slider-container tw-relative ffz-il-tooltip__container\">\n\t\t\t\t<div class=\"tw-align-items-center tw-flex tw-full-height\">\n\t\t\t\t\t<label class=\"tw-hide-accessible\">{this.i18n.t('player.gain.label','Gain Control')}</label>\n\t\t\t\t\t<div class=\"tw-flex tw-full-width tw-relative tw-z-above\">\n\t\t\t\t\t\t{input = (<input\n\t\t\t\t\t\t\tclass=\"ffz-range ffz-range--overlay\"\n\t\t\t\t\t\t\ttype=\"range\"\n\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\tmax=\"100\"\n\t\t\t\t\t\t\tstep=\"1\"\n\t\t\t\t\t\t\tdata-a-target=\"player-gain-slider\"\n\t\t\t\t\t\t\tvalue=\"100\"\n\t\t\t\t\t\t/>)}\n\t\t\t\t\t\t<div class=\"tw-absolute tw-border-radius-large tw-bottom-0 tw-flex tw-flex-column tw-full-width tw-justify-content-center ffz-range__fill ffz-range__fill--overlay tw-top-0 tw-z-below\">\n\t\t\t\t\t\t\t<div class=\"tw-border-radius-large ffz-range__fill-container\">\n\t\t\t\t\t\t\t\t{fill = (<div\n\t\t\t\t\t\t\t\t\tclass=\"tw-border-radius-large ffz-range__fill-value ffz--gain-value\"\n\t\t\t\t\t\t\t\t\tdata-test-selector=\"ffz-range__fill-value-selector\"\n\t\t\t\t\t\t\t\t/>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{tipcont = (<div class=\"ffz-il-tooltip ffz-il-tooltip--align-center ffz-il-tooltip--up\" role=\"tooltip\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{tip = (<div class=\"ffz--p-tip\" />)}\n\t\t\t\t\t\t{extra = (<div class=\"tw-regular ffz--p-value\" />)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>)}\n\t\t\t</div>);\n\n\t\t\t/*input.addEventListener('contextmenu', e => {\n\t\t\t\tvideo._ffz_gain_value = null;\n\t\t\t\tthis.updateGain(inst);\n\t\t\t\te.preventDefault();\n\t\t\t});*/\n\t\t\tinput.addEventListener('input', on_change);\n\t\t\tcontainer.appendChild(cont);\n\n\t\t} else if ( visible_only )\n\t\t\treturn;\n\t\telse {\n\t\t\tinput = cont.querySelector('input');\n\t\t\tfill = cont.querySelector('.ffz--gain-value');\n\t\t\ttipcont = cont.querySelector('.ffz-il-tooltip');\n\t\t\ttip = cont.querySelector('.ffz-il-tooltip .ffz--p-tip');\n\t\t\textra = cont.querySelector('.ffz-il-tooltip .ffz--p-value');\n\t\t}\n\n\t\tlet value = video._ffz_gain_value;\n\t\tif ( value == null )\n\t\t\tvalue = this.settings.get('player.gain.default');\n\n\t\tinput.min = min * 100;\n\t\tinput.max = max * 100;\n\t\tinput.value = value * 100;\n\n\t\tconst range = max - min,\n\t\t\twidth = (value - min) / range;\n\n\t\tfill.style.width = `${width * 100}%`;\n\n\t\ttip.textContent = this.i18n.t('player.gain.label', 'Gain Control');\n\t\textra.textContent = `${Math.round(value * 100)}%`;\n\t}\n\n\taddCompressorButton(inst, visible_only, tries = 0) {\n\t\tconst outer = inst.props.containerRef || this.fine.getChildNode(inst),\n\t\t\tvideo = inst.props.mediaPlayerInstance?.mediaSinkManager?.video || inst.props.mediaPlayerInstance?.core?.mediaSinkManager?.video,\n\t\t\tcontainer = outer && outer.querySelector(LEFT_CONTROLS),\n\t\t\thas_comp = HAS_COMPRESSOR && video != null && this.settings.get('player.compressor.enable');\n\n\t\tif ( ! container ) {\n\t\t\tif ( ! has_comp )\n\t\t\t\treturn;\n\n\t\t\tif ( tries < 5 )\n\t\t\t\treturn setTimeout(this.addCompressorButton.bind(this, inst, visible_only, (tries || 0) + 1), 250);\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet icon, tip, extra, btn, cont = container.querySelector('.ffz--player-comp');\n\t\tif ( ! has_comp || this.areControlsDisabled(inst) ) {\n\t\t\tif ( cont )\n\t\t\t\tcont.remove();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! cont ) {\n\t\t\tcont = (<div class=\"ffz--player-comp tw-inline-flex tw-relative ffz-il-tooltip__container\">\n\t\t\t\t{btn = (<button\n\t\t\t\t\tclass=\"tw-align-items-center tw-align-middle tw-border-bottom-left-radius-medium tw-border-bottom-right-radius-medium tw-border-top-left-radius-medium tw-border-top-right-radius-medium tw-button-icon tw-button-icon--overlay ffz-core-button ffz-core-button--border ffz-core-button--overlay tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tdata-a-target=\"ffz-player-comp-button\"\n\t\t\t\t\tonClick={this.compressPlayer.bind(this, inst)} // eslint-disable-line react/jsx-no-bind\n\t\t\t\t>\n\t\t\t\t\t<div class=\"tw-align-items-center tw-flex tw-flex-grow-0\">\n\t\t\t\t\t\t<div class=\"tw-button-icon__icon\">\n\t\t\t\t\t\t\t{icon = (<figure class=\"ffz-player-icon\" />)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</button>)}\n\t\t\t\t<div class=\"ffz-il-tooltip ffz-il-tooltip--align-left ffz-il-tooltip--up\" role=\"tooltip\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{tip = (<div class=\"ffz--p-tip\" />)}\n\t\t\t\t\t\t{extra = (<div class=\"ffz--p-extra tw-pd-t-05 ffz--tooltip-explain\" />)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>);\n\n\t\t\tcontainer.appendChild(cont);\n\t\t} else if ( visible_only )\n\t\t\treturn;\n\t\telse {\n\t\t\ticon = cont.querySelector('figure');\n\t\t\tbtn = cont.querySelector('button');\n\t\t\ttip = cont.querySelector('.ffz-il-tooltip .ffz--p-tip');\n\t\t\textra = cont.querySelector('.ffz-il-tooltip .ffz--p-extra');\n\t\t}\n\n\t\tconst comp_active = video._ffz_compressed,\n\t\t\tcan_apply = this.canCompress(inst);\n\t\tlet label = can_apply ?\n\t\t\tcomp_active ?\n\t\t\t\tthis.i18n.t('player.comp_button.off', 'Disable Audio Compressor') :\n\t\t\t\tthis.i18n.t('player.comp_button.on', 'Audio Compressor')\n\t\t\t: this.i18n.t('player.comp_button.disabled', 'Audio Compressor cannot be enabled when viewing Clips.');\n\n\t\textra.textContent = this.i18n.t('player.comp_button.help', 'See the FFZ Control Center for details. If audio breaks, please reset the player.');\n\n\t\tif ( can_apply && this._shortcut_bound )\n\t\t\tlabel = `${label} (${this._shortcut_bound})`;\n\n\t\ticon.classList.toggle('ffz-i-comp-on', comp_active);\n\t\ticon.classList.toggle('ffz-i-comp-off', ! comp_active);\n\t\tbtn.disabled = ! can_apply;\n\n\t\tbtn.setAttribute('aria-label', label);\n\t\ttip.textContent = label;\n\t}\n\n\treplaceVideoElement(player, video) {\n\t\tconst new_vid = createElement('video'),\n\t\t\tvol = video?._ffz_pregain_volume ?? video?.volume ?? player.getVolume(),\n\t\t\tmuted = player.isMuted();\n\n\t\tnew_vid._ffz_gain_value = video._ffz_gain_value;\n\t\tnew_vid._ffz_state = video._ffz_state;\n\t\tnew_vid._ffz_toggled = video._ffz_toggled;\n\t\tnew_vid._ffz_maybe_compress = video._ffz_compressed;\n\t\tnew_vid.volume = vol;\n\t\tif ( muted )\n\t\t\tnew_vid.muted = true;\n\t\tnew_vid.playsInline = true;\n\n\t\tthis.installPlaybackRate(new_vid);\n\t\tvideo.replaceWith(new_vid);\n\t\tplayer.attachHTMLVideoElement(new_vid);\n\t\treturn new_vid;\n\t}\n\n\thookPlayerLoad(player) {\n\t\tif ( ! player || player._ffz_load )\n\t\t\treturn;\n\n\t\tplayer._ffz_load = player.load;\n\n\t\tplayer.load = (...args) => {\n\t\t\ttry {\n\t\t\t\tconst video = player.getHTMLVideoElement();\n\t\t\t\tif ( video?._ffz_compressor && player.attachHTMLVideoElement ) {\n\t\t\t\t\tthis.log.info('Recreating video element due to player load with compressor installed.');\n\t\t\t\t\tthis.replaceVideoElement(player, video);\n\t\t\t\t}\n\t\t\t} catch(err) {\n\t\t\t\tt.log.error('Error while handling player load.', err);\n\t\t\t}\n\n\t\t\treturn player._ffz_load(...args);\n\t\t}\n\t}\n\n\tcompressPlayer(inst, e) {\n\t\tconst player = inst.props.mediaPlayerInstance,\n\t\t\tcore = player.core || player,\n\t\t\tvideo = core?.mediaSinkManager?.video;\n\n\t\tif ( ! video || ! HAS_COMPRESSOR )\n\t\t\treturn;\n\n\t\t// Backup the player load method.\n\t\tthis.hookPlayerLoad(player);\n\n\t\t// Backup and replace the setSrc method.\n\t\tif ( ! inst._ffz_setSrc ) {\n\t\t\tinst._ffz_setSrc = inst.setSrc;\n\t\t\tinst.setSrc = async function(...args) {\n\t\t\t\tconsole.log('setSrc', args);\n\t\t\t\tconst vid = inst.props.mediaPlayerInstance?.core?.mediaSinkManager?.video;\n\t\t\t\tif ( vid && vid._ffz_compressor )\n\t\t\t\t\tawait this.resetPlayer(inst);\n\t\t\t\treturn inst._ffz_setSrc(...args);\n\t\t\t}\n\t\t}\n\n\t\t// Backup the setVolume method.\n\t\tif ( ! core._ffz_setVolume ) {\n\t\t\tcore._ffz_setVolume = core.setVolume;\n\t\t\tcore._ffz_fakeVolume = () => {};\n\t\t}\n\n\t\tvideo._ffz_maybe_compress = false;\n\t\tconst compressed = video._ffz_compressed || false;\n\t\tlet wanted = video._ffz_toggled ? video._ffz_state : this.settings.get('player.compressor.default');\n\t\tif ( e != null ) {\n\t\t\te.preventDefault();\n\t\t\tvideo._ffz_toggled = true;\n\t\t\twanted = ! video._ffz_compressed;\n\t\t\tvideo._ffz_state = wanted;\n\t\t}\n\n\t\tif ( ! video._ffz_compressor ) {\n\t\t\tif ( ! wanted )\n\t\t\t\treturn;\n\n\t\t\tthis.createCompressor(inst, video);\n\n\t\t} else if ( ! video._ffz_comp_reset && ! this.canCompress(inst) ) {\n\t\t\tvideo._ffz_comp_reset = true;\n\t\t\tthis.resetPlayer(inst);\n\t\t\treturn;\n\t\t}\n\n\t\tlet gain = video._ffz_gain;\n\t\tconst want_gain = HAS_GAIN && this.settings.get('player.gain.enable'),\n\t\t\thas_gain = gain != null;\n\n\t\tif ( ((wanted == compressed) || (e == null && video._ffz_toggled)) && has_gain == want_gain )\n\t\t\treturn;\n\n\t\tconst ctx = video._ffz_context,\n\t\t\tcomp = video._ffz_compressor,\n\t\t\tsrc = video._ffz_source;\n\n\t\tif ( ! ctx || ! comp || ! src )\n\t\t\treturn;\n\n\t\tif ( want_gain && ! gain ) {\n\t\t\tlet value = video._ffz_gain_value;\n\t\t\tif ( value == null )\n\t\t\t\tvalue = this.settings.get('player.gain.default');\n\n\t\t\ttry {\n\t\t\t\tif (this.settings.get('player.compressor.force-legacy'))\n\t\t\t\t\tthrow new Error();\n\n\t\t\t\tgain = video._ffz_gain = new GainNode(ctx, {\n\t\t\t\t\tgain: value\n\t\t\t\t});\n\n\t\t\t} catch(err) {\n\t\t\t\tthis.log.info('Unable to use new GainNode. Falling back to old method.');\n\t\t\t\tgain = video._ffz_gain = ctx.createGain();\n\t\t\t\tgain.gain.value = value;\n\t\t\t}\n\n\t\t\tcomp.connect(gain);\n\n\t\t\tif ( compressed ) {\n\t\t\t\tcomp.disconnect(ctx.destination);\n\t\t\t\tgain.connect(ctx.destination);\n\t\t\t}\n\n\t\t} else if ( ! want_gain && gain ) {\n\t\t\tcomp.disconnect(gain);\n\t\t\tif ( compressed ) {\n\t\t\t\tgain.disconnect(ctx.destination);\n\t\t\t\tcomp.connect(ctx.destination);\n\t\t\t}\n\n\t\t\tgain = video._ffz_gain = null;\n\t\t}\n\n\t\tif ( wanted != compressed ) {\n\t\t\tif ( wanted ) {\n\t\t\t\tsrc.disconnect(ctx.destination);\n\t\t\t\tsrc.connect(comp);\n\t\t\t\tif ( gain ) {\n\t\t\t\t\tgain.connect(ctx.destination);\n\t\t\t\t\tif ( this.settings.get('player.gain.no-volume') ) {\n\t\t\t\t\t\tvideo._ffz_pregain_volume = core.getVolume();\n\t\t\t\t\t\tcore._ffz_setVolume(1);\n\t\t\t\t\t\tcore.setVolume = core._ffz_fakeVolume;\n\t\t\t\t\t}\n\n\t\t\t\t} else\n\t\t\t\t\tcomp.connect(ctx.destination);\n\t\t\t} else {\n\t\t\t\tsrc.disconnect(comp);\n\t\t\t\tif ( gain ) {\n\t\t\t\t\tgain.disconnect(ctx.destination);\n\t\t\t\t\tif ( video._ffz_pregain_volume != null ) {\n\t\t\t\t\t\tcore._ffz_setVolume(video._ffz_pregain_volume);\n\t\t\t\t\t\tcore.setVolume = core._ffz_setVolume;\n\t\t\t\t\t\tvideo._ffz_pregain_volume = null;\n\t\t\t\t\t}\n\n\t\t\t\t} else\n\t\t\t\t\tcomp.disconnect(ctx.destination);\n\t\t\t\tsrc.connect(ctx.destination);\n\t\t\t}\n\t\t}\n\n\t\tif ( inst.props.containerRef )\n\t\t\tinst.props.containerRef.dataset.compressed = wanted;\n\n\t\tvideo._ffz_compressed = wanted;\n\t\tthis.addCompressorButton(inst);\n\t\tthis.addGainSlider(inst);\n\t}\n\n\tupdateGainVolume(inst) {\n\t\tconst player = inst.props.mediaPlayerInstance,\n\t\t\tcore = player.core || player,\n\t\t\tvideo = core?.mediaSinkManager?.video;\n\n\t\tif ( ! video || ! video._ffz_compressed )\n\t\t\treturn;\n\n\t\tconst setting = this.settings.get('player.gain.no-volume');\n\n\t\tif ( setting && video._ffz_pregain_volume == null ) {\n\t\t\tvideo._ffz_pregain_volume = core.getVolume();\n\t\t\tcore._ffz_setVolume(1);\n\t\t\tcore.setVolume = core._ffz_fakeVolume;\n\n\t\t} else if ( ! setting && video._ffz_pregain_volume != null ) {\n\t\t\tcore._ffz_setVolume(video._ffz_pregain_volume);\n\t\t\tcore.setVolume = core._ffz_setVolume;\n\t\t\tvideo._ffz_pregain_volume = null;\n\t\t}\n\t}\n\n\tcanCompress(inst) { // eslint-disable-line class-methods-use-this\n\t\tif ( ! HAS_COMPRESSOR )\n\t\t\treturn false;\n\n\t\tconst player = inst.props?.mediaPlayerInstance;\n\t\tif ( player == null )\n\t\t\treturn false;\n\n\t\tconst video = player.mediaSinkManager?.video || player.core?.mediaSinkManager?.video;\n\t\tif ( ! video )\n\t\t\treturn false;\n\n\t\tif ( ! video.src && ! video.srcObject )\n\t\t\treturn false;\n\n\t\tif ( video.src ) {\n\t\t\tconst url = new URL(video.src);\n\t\t\tif ( url.protocol !== 'blob:' )\n\t\t\t\treturn false;\n\t\t}\n\n\t\t// TODO: Validation for srcObject (if we need it)\n\n\t\treturn true;\n\t}\n\n\tcreateCompressor(inst, video, ctx) {\n\t\tif ( ! this.canCompress(inst) )\n\t\t\treturn;\n\n\t\tlet comp = video._ffz_compressor;\n\t\tif ( ! comp ) {\n\t\t\tctx = ctx || new AudioContext();\n\t\t\tif ( ctx.state === 'suspended' ) {\n\t\t\t\tlet timer;\n\t\t\t\tconst evt = () => {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\tctx.removeEventListener('statechange', evt);\n\t\t\t\t\tif (ctx.state === 'suspended') {\n\t\t\t\t\t\tthis.log.debug('Aborting due to browser auto-play policy.');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.createCompressor(inst, video, ctx);\n\t\t\t\t}\n\n\t\t\t\tthis.log.debug('Attempting to resume suspended AudioContext.');\n\t\t\t\ttimer = setTimeout(evt, 100);\n\t\t\t\ttry {\n\t\t\t\t\tctx.addEventListener('statechange', evt);\n\t\t\t\t\tctx.resume();\n\t\t\t\t} catch(err) { }\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvideo._ffz_context = ctx;\n\t\t\tlet src;\n\t\t\ttry {\n\t\t\t\tif (this.settings.get('player.compressor.force-legacy'))\n\t\t\t\t\tthrow new Error();\n\n\t\t\t\tsrc = video._ffz_source = new MediaElementAudioSourceNode(ctx, {\n\t\t\t\t\tmediaElement: video\n\t\t\t\t});\n\t\t\t} catch(err) {\n\t\t\t\tthis.log.info('Unable to use new MediaElementAudioSourceNode. Falling back to old method.');\n\t\t\t\tsrc = video._ffz_source = ctx.createMediaElementSource(video);\n\t\t\t}\n\n\t\t\tsrc.connect(ctx.destination);\n\n\t\t\ttry {\n\t\t\t\tif (this.settings.get('player.compressor.force-legacy'))\n\t\t\t\t\tthrow new Error();\n\n\t\t\t\tcomp = video._ffz_compressor = new DynamicsCompressorNode(ctx);\n\t\t\t} catch (err) {\n\t\t\t\tthis.log.info('Unable to use new DynamicsCompressorNode. Falling back to old method.');\n\t\t\t\tcomp = video._ffz_compressor = ctx.createDynamicsCompressor();\n\t\t\t}\n\n\t\t\tif ( this.settings.get('player.gain.enable') ) {\n\t\t\t\tlet gain;\n\t\t\t\tlet value = video._ffz_gain_value;\n\t\t\t\tif ( value == null )\n\t\t\t\t\tvalue = this.settings.get('player.gain.default');\n\n\t\t\t\ttry {\n\t\t\t\t\tif (this.settings.get('player.compressor.force-legacy'))\n\t\t\t\t\t\tthrow new Error();\n\n\t\t\t\t\tgain = video._ffz_gain = new GainNode(ctx, {\n\t\t\t\t\t\tgain: value\n\t\t\t\t\t});\n\n\t\t\t\t} catch(err) {\n\t\t\t\t\tthis.log.info('Unable to use new GainNode. Falling back to old method.');\n\t\t\t\t\tgain = video._ffz_gain = ctx.createGain();\n\t\t\t\t\tgain.gain.value = value;\n\t\t\t\t}\n\n\t\t\t\tcomp.connect(gain);\n\t\t\t}\n\n\t\t\tvideo._ffz_compressed = false;\n\t\t}\n\n\t\tthis.updateCompressor(null, comp);\n\t}\n\n\tupdateGains() {\n\t\tfor(const inst of this.Player.instances)\n\t\t\tthis.updateGain(inst);\n\t}\n\n\tupdateGain(inst, gain, video, update_gui = true) {\n\t\tif ( ! video )\n\t\t\tvideo = inst.props.mediaPlayerInstance?.mediaSinkManager?.video ||\n\t\t\t\tinst.props.mediaPlayerInstance?.core?.mediaSinkManager?.video;\n\n\t\tif ( gain == null )\n\t\t\tgain = video?._ffz_gain;\n\n\t\tif ( ! video || ! gain )\n\t\t\treturn;\n\n\t\tlet value = video._ffz_gain_value;\n\t\tif ( value == null )\n\t\t\tvalue = this.settings.get('player.gain.default');\n\n\t\tgain.gain.value = value;\n\t\tif ( update_gui )\n\t\t\tthis.addGainSlider(inst);\n\t}\n\n\tupdateCompressors() {\n\t\tfor(const inst of this.Player.instances)\n\t\t\tthis.updateCompressor(inst);\n\t}\n\n\tupdateCompressor(inst, comp) {\n\t\tif ( comp == null ) {\n\t\t\tconst video = inst.props.mediaPlayerInstance?.mediaSinkManager?.video ||\n\t\t\t\tinst.props.mediaPlayerInstance?.core?.mediaSinkManager?.video;\n\t\t\tcomp = video?._ffz_compressor;\n\t\t}\n\n\t\tif ( ! comp )\n\t\t\treturn;\n\n\t\tcomp.threshold.value = this.settings.get('player.compressor.threshold');\n\t\tcomp.knee.value = this.settings.get('player.compressor.knee');\n\t\tcomp.ratio.value = this.settings.get('player.compressor.ratio');\n\t\tcomp.attack.value = this.settings.get('player.compressor.attack');\n\t\tcomp.release.value = this.settings.get('player.compressor.release');\n\t}\n\n\tupdatePlaybackRates() {\n\t\tfor(const inst of this.Player.instances)\n\t\t\tthis.updatePlaybackRate(inst);\n\t}\n\n\tupdatePlaybackRate(inst) {\n\t\tconst video = inst.props.mediaPlayerInstance?.mediaSinkManager?.video ||\n\t\t\tinst.props.mediaPlayerInstance?.core?.mediaSinkManager?.video;\n\n\t\tif ( ! video.setFFZPlaybackRate )\n\t\t\tthis.installPlaybackRate(video);\n\n\t\tvideo.setFFZPlaybackRate(video.playbackRate);\n\t}\n\n\tinstallPlaybackRate(video) {\n\t\tif ( video.setFFZPlaybackRate )\n\t\t\treturn;\n\n\t\tlet pbrate = video.playbackRate;\n\n\t\tconst t = this,\n\t\t\tinstallProperty = () => {\n\t\t\t\tif ( t.settings.get('player.allow-catchup') )\n\t\t\t\t\treturn;\n\n\t\t\t\tObject.defineProperty(video, 'playbackRate', {\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tget() {\n\t\t\t\t\t\treturn pbrate;\n\t\t\t\t\t},\n\t\t\t\t\tset(val) {\n\t\t\t\t\t\tif ( val === 1 || val < 1 || val >= 1.1 )\n\t\t\t\t\t\t\tvideo.setFFZPlaybackRate(val);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\tvideo.setFFZPlaybackRate = rate => {\n\t\t\tdelete video.playbackRate;\n\t\t\tpbrate = rate;\n\t\t\tvideo.playbackRate = rate;\n\t\t\tinstallProperty();\n\t\t};\n\t}\n\n\n\taddPiPButton(inst, tries = 0) {\n\t\tconst outer = inst.props.containerRef || this.fine.getChildNode(inst),\n\t\t\tvideo = inst.props.mediaPlayerInstance?.mediaSinkManager?.video || inst.props.mediaPlayerInstance?.core?.mediaSinkManager?.video,\n\t\t\tis_fs = video && document.fullscreenElement && document.fullscreenElement.contains(video),\n\t\t\tcontainer = outer && outer.querySelector(RIGHT_CONTROLS),\n\t\t\thas_pip = document.pictureInPictureEnabled && this.settings.get('player.button.pip');\n\n\t\tif ( ! container ) {\n\t\t\tif ( ! has_pip )\n\t\t\t\treturn;\n\n\t\t\tif ( tries < 5 )\n\t\t\t\treturn setTimeout(this.addPiPButton.bind(this, inst, (tries || 0) + 1), 250);\n\n\t\t\treturn; // this.log.warn('Unable to find container element for PiP button.');\n\t\t}\n\n\t\tlet icon, tip, btn, cont = container.querySelector('.ffz--player-pip');\n\t\tif ( ! has_pip ) {\n\t\t\tif ( cont )\n\t\t\t\tcont.remove();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! cont ) {\n\t\t\tcont = (<div class=\"ffz--player-pip tw-inline-flex tw-relative ffz-il-tooltip__container\">\n\t\t\t\t{btn = (<button\n\t\t\t\t\tclass=\"tw-align-items-center tw-align-middle tw-border-bottom-left-radius-medium tw-border-bottom-right-radius-medium tw-border-top-left-radius-medium tw-border-top-right-radius-medium tw-button-icon tw-button-icon--overlay ffz-core-button ffz-core-button--border ffz-core-button--overlay tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tdata-a-target=\"ffz-player-pip-button\"\n\t\t\t\t\tonClick={this.pipPlayer.bind(this, inst)} // eslint-disable-line react/jsx-no-bind\n\t\t\t\t>\n\t\t\t\t\t<div class=\"tw-align-items-center tw-flex tw-flex-grow-0\">\n\t\t\t\t\t\t<div class=\"tw-button-icon__icon\">\n\t\t\t\t\t\t\t{icon = (<figure class=\"ffz-player-icon\" />)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</button>)}\n\t\t\t\t{tip = (<div class=\"ffz-il-tooltip ffz-il-tooltip--align-right ffz-il-tooltip--up\" role=\"tooltip\" />)}\n\t\t\t</div>);\n\n\t\t\tconst thing = container.querySelector('button[data-a-target=\"player-theatre-mode-button\"]') ||\n\t\t\t\t//container.querySelector('div:not(:has(.tw-tooltip)) button:not([data-a-target])') ||\n\t\t\t\tcontainer.querySelector('button[aria-label*=\"Theat\"]') ||\n\t\t\t\tcontainer.querySelector('button[data-a-target=\"player-fullscreen-button\"]');\n\n\t\t\tif ( thing ) {\n\t\t\t\tcontainer.insertBefore(cont, thing.parentElement);\n\t\t\t} else\n\t\t\t\tcontainer.appendChild(cont);\n\n\t\t} else {\n\t\t\ticon = cont.querySelector('figure');\n\t\t\tbtn = cont.querySelector('button');\n\t\t\ttip = cont.querySelector('.ffz-il-tooltip');\n\t\t}\n\n\t\tconst pip_active = !!document.pictureInPictureElement,\n\t\t\tpip_swap = false, //pip_active && document.pictureInPictureElement !== video,\n\t\t\tlabel = is_fs ?\n\t\t\t\tthis.i18n.t('player.pip_button.fs', 'Cannot use Picture-in-Picture when Fullscreen')\n\t\t\t\t: pip_swap ?\n\t\t\t\t\tthis.i18n.t('player.pip_button.swap', 'Switch Picture-in-Picture')\n\t\t\t\t\t: pip_active ?\n\t\t\t\t\t\tthis.i18n.t('player.pip_button.off', 'Exit Picture-in-Picture')\n\t\t\t\t\t\t: this.i18n.t('player.pip_button', 'Picture-in-Picture');\n\n\t\ticon.classList.toggle('ffz-i-t-pip-inactive', ! pip_active || pip_swap);\n\t\ticon.classList.toggle('ffz-i-t-pip-active', pip_active && ! pip_swap);\n\n\t\tbtn.setAttribute('aria-label', label);\n\t\ttip.textContent = label;\n\t}\n\n\n\tpipPlayer(inst, e) {\n\t\tconst video = inst.props.mediaPlayerInstance?.mediaSinkManager?.video ||\n\t\t\tinst.props.mediaPlayerInstance?.core?.mediaSinkManager?.video;\n\t\tif ( ! video || ! document.pictureInPictureEnabled )\n\t\t\treturn;\n\n\t\tif ( e )\n\t\t\te.preventDefault();\n\n\t\tif ( document.fullscreenElement && document.fullscreenElement.contains(video) )\n\t\t\treturn;\n\n\t\tif ( ! video._ffz_pip_enter ) {\n\t\t\tvideo.addEventListener('enterpictureinpicture', video._ffz_pip_enter = () => {\n\t\t\t\tthis.addPiPButton(inst);\n\t\t\t});\n\n\t\t\tvideo.addEventListener('leavepictureinpicture', video._ffz_pip_exit = () => {\n\t\t\t\tthis.addPiPButton(inst);\n\t\t\t});\n\t\t}\n\n\t\t//const is_this = document.pictureInPictureElement === video;\n\t\tif ( document.pictureInPictureElement )\n\t\t\tdocument.exitPictureInPicture();\n\t\telse\n\t\t//if ( ! is_this )\n\t\t\tvideo.requestPictureInPicture();\n\t}\n\n\taddClipButton(inst, tries = 0) {\n\t\tconst outer = inst.props.containerRef || this.fine.getChildNode(inst),\n\t\t\tcontainer = outer && outer.querySelector(RIGHT_CONTROLS),\n\t\t\thas_clip_button = this.settings.get('player.clip-button.custom');\n\n\t\tif ( ! container ) {\n\t\t\tif ( ! has_clip_button )\n\t\t\t\treturn;\n\n\t\t\tif ( tries < 5 )\n\t\t\t\treturn setTimeout(this.addClipButton.bind(this, inst, (tries || 0) + 1), 250);\n\n\t\t\treturn; // this.log.warn('Unable to find container element for Clip button.');\n\t\t}\n\n\t\tlet tip, btn, cont = container.querySelector('.ffz--player-clip');\n\t\tif ( ! has_clip_button ) {\n\t\t\tif ( cont )\n\t\t\t\tcont.remove();\n\t\t\treturn;\n\t\t}\n\n\t\tif (! container.ffz_native_clip || ! container.contains(container.ffz_native_clip) )\n\t\t\tcontainer.ffz_native_clip = getNativeClipButton(container);\n\n\t\tif ( ! cont ) {\n\t\t\t// We need the native clip button, so we can dispatch a click.\n\t\t\tconst on_click = e => {\n\t\t\t\tconst native = getNativeClipButton(container);\n\t\t\t\tif (native)\n\t\t\t\t\tnative.click();\n\t\t\t}\n\n\t\t\tcont = (<div class=\"ffz--player-clip tw-inline-flex tw-relative ffz-il-tooltip__container\">\n\t\t\t\t{btn = (<button\n\t\t\t\t\tclass=\"tw-align-items-center tw-align-middle tw-border-bottom-left-radius-medium tw-border-bottom-right-radius-medium tw-border-top-left-radius-medium tw-border-top-right-radius-medium tw-button-icon tw-button-icon--overlay ffz-core-button ffz-core-button--border ffz-core-button--overlay tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tdata-a-target=\"ffz-player-clip-button\"\n\t\t\t\t\tonClick={on_click}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"tw-align-items-center tw-flex tw-flex-grow-0\">\n\t\t\t\t\t\t<div class=\"tw-button-icon__icon\">\n\t\t\t\t\t\t\t<figure class=\"ffz-player-icon ffz-i-clip\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</button>)}\n\t\t\t\t{tip = (<div class=\"ffz-il-tooltip ffz-il-tooltip--align-right ffz-il-tooltip--up\" role=\"tooltip\" />)}\n\t\t\t</div>);\n\n\t\t\tconst thing = container.querySelector('.ffz--player-reset button') ||\n\t\t\t\tcontainer.querySelector('.ffz--player-pip button') ||\n\t\t\t\tcontainer.querySelector('button[data-a-target=\"player-theatre-mode-button\"]') ||\n\t\t\t\t//container.querySelector('div:not(:has(.tw-tooltip)) button:not([data-a-target])') ||\n\t\t\t\tcontainer.querySelector('button[aria-label*=\"Theat\"]') ||\n\t\t\t\tcontainer.querySelector('button[data-a-target=\"player-fullscreen-button\"]');\n\n\t\t\tif ( thing ) {\n\t\t\t\tcontainer.insertBefore(cont, thing.parentElement);\n\t\t\t} else\n\t\t\t\tcontainer.appendChild(cont);\n\n\t\t} else {\n\t\t\tbtn = cont.querySelector('button');\n\t\t\ttip = cont.querySelector('.ffz-il-tooltip');\n\t\t}\n\n\t\tconst native = container.ffz_native_clip,\n\t\t\tdisabled = native\n\t\t\t\t? (native.disabled || native.ariaDisabled === 'true')\n\t\t\t\t: false;\n\n\t\tbtn.disabled = disabled;\n\t\tbtn.setAttribute('aria-label',\n\t\t\ttip.textContent = disabled\n\t\t\t\t? (native.ariaLabel || this.i18n.t(\n\t\t\t\t\t'player.clip-button.disabled',\n\t\t\t\t\t'Clips are Disabled'\n\t\t\t\t))\n\t\t\t\t: this.i18n.t(\n\t\t\t\t\t'player.clip-button',\n\t\t\t\t\t'Clip (Alt+X)'\n\t\t\t\t));\n\t}\n\n\tclickClip(inst, e) {\n\t\tconsole.log('clicked clip', inst, e);\n\t}\n\n\n\taddResetButton(inst, tries = 0) {\n\t\tconst outer = inst.props.containerRef || this.fine.getChildNode(inst),\n\t\t\tcontainer = outer && outer.querySelector(RIGHT_CONTROLS),\n\t\t\thas_reset = this.settings.get('player.button.reset');\n\n\t\tif ( ! container ) {\n\t\t\tif ( ! has_reset )\n\t\t\t\treturn;\n\n\t\t\tif ( tries < 5 )\n\t\t\t\treturn setTimeout(this.addResetButton.bind(this, inst, (tries || 0) + 1), 250);\n\n\t\t\treturn; // this.log.warn('Unable to find container element for Reset button.');\n\t\t}\n\n\t\tlet tip, btn, cont = container.querySelector('.ffz--player-reset');\n\t\tif ( ! has_reset ) {\n\t\t\tif ( cont )\n\t\t\t\tcont.remove();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! cont ) {\n\t\t\tcont = (<div class=\"ffz--player-reset tw-inline-flex tw-relative ffz-il-tooltip__container\">\n\t\t\t\t{btn = (<button\n\t\t\t\t\tclass=\"tw-align-items-center tw-align-middle tw-border-bottom-left-radius-medium tw-border-bottom-right-radius-medium tw-border-top-left-radius-medium tw-border-top-right-radius-medium tw-button-icon tw-button-icon--overlay ffz-core-button ffz-core-button--border ffz-core-button--overlay tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tdata-a-target=\"ffz-player-reset-button\"\n\t\t\t\t\tonClick={rotateButton}\n\t\t\t\t\tonDblClick={this.resetPlayer.bind(this, inst)} // eslint-disable-line react/jsx-no-bind\n\t\t\t\t>\n\t\t\t\t\t<div class=\"tw-align-items-center tw-flex tw-flex-grow-0\">\n\t\t\t\t\t\t<div class=\"tw-button-icon__icon\">\n\t\t\t\t\t\t\t<figure class=\"ffz-player-icon ffz-i-t-reset\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</button>)}\n\t\t\t\t{tip = (<div class=\"ffz-il-tooltip ffz-il-tooltip--align-right ffz-il-tooltip--up\" role=\"tooltip\" />)}\n\t\t\t</div>);\n\n\t\t\tconst thing = container.querySelector('.ffz--player-pip button') ||\n\t\t\t\tcontainer.querySelector('button[data-a-target=\"player-theatre-mode-button\"]') ||\n\t\t\t\t//container.querySelector('div:not(:has(.tw-tooltip)) button:not([data-a-target])') ||\n\t\t\t\tcontainer.querySelector('button[aria-label*=\"Theat\"]') ||\n\t\t\t\tcontainer.querySelector('button[data-a-target=\"player-fullscreen-button\"]');\n\n\t\t\tif ( thing ) {\n\t\t\t\tcontainer.insertBefore(cont, thing.parentElement);\n\t\t\t} else\n\t\t\t\tcontainer.appendChild(cont);\n\n\t\t} else {\n\t\t\tbtn = cont.querySelector('button');\n\t\t\ttip = cont.querySelector('.ffz-il-tooltip');\n\t\t}\n\n\t\tbtn.setAttribute('aria-label',\n\t\t\ttip.textContent = this.i18n.t(\n\t\t\t\t'player.reset_button',\n\t\t\t\t'Reset Player (Double-Click)'\n\t\t\t));\n\t}\n\n\n\taddErrorResetButton(inst, tries = 0) {\n\t\tconst outer = inst.props.containerRef || this.fine.getChildNode(inst),\n\t\t\tcontainer = outer && outer.querySelector('.content-overlay-gate'),\n\t\t\thas_reset = this.settings.get('player.button.reset');\n\n\t\tif ( ! container ) {\n\t\t\tif ( ! has_reset )\n\t\t\t\treturn;\n\n\t\t\tif ( tries < 2 )\n\t\t\t\tthis.parent.awaitElement(\n\t\t\t\t\t'.autoplay-vod__content-container button',\n\t\t\t\t\tthis.props.containerRef || t.fine.getChildNode(this),\n\t\t\t\t\t1000\n\t\t\t\t).then(() => {\n\t\t\t\t\tthis.addErrorResetButton(inst, (tries || 0) + 1);\n\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.log.warn('Unable to find container element for Error Reset button.');\n\t\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet tip, btn, cont = container.querySelector('.ffz--player-reset');\n\t\tif ( ! has_reset ) {\n\t\t\tif ( cont )\n\t\t\t\tcont.remove();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! cont ) {\n\t\t\tcont = (<div class=\"ffz--player-reset tw-absolute tw-bottom-0 tw-right-0 ffz-il-tooltip__container tw-mg-1\">\n\t\t\t\t{btn = (<button\n\t\t\t\t\tclass=\"tw-align-items-center tw-align-middle tw-border-bottom-left-radius-medium tw-border-bottom-right-radius-medium tw-border-top-left-radius-medium tw-border-top-right-radius-medium tw-button-icon tw-button-icon--overlay ffz-core-button ffz-core-button--border ffz-core-button--overlay tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tdata-a-target=\"ffz-player-reset-button\"\n\t\t\t\t\tonClick={rotateButton}\n\t\t\t\t\tonDblClick={this.resetPlayer.bind(this, inst)} // eslint-disable-line react/jsx-no-bind\n\t\t\t\t>\n\t\t\t\t\t<div class=\"tw-align-items-center tw-flex tw-flex-grow-0\">\n\t\t\t\t\t\t<div class=\"tw-button-icon__icon\">\n\t\t\t\t\t\t\t<figure class=\"ffz-player-icon ffz-i-t-reset\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</button>)}\n\t\t\t\t{tip = (<div class=\"ffz-il-tooltip ffz-il-tooltip--align-right ffz-il-tooltip--up\" role=\"tooltip\" />)}\n\t\t\t</div>);\n\n\t\t\tcontainer.appendChild(cont);\n\n\t\t} else {\n\t\t\tbtn = cont.querySelector('button');\n\t\t\ttip = cont.querySelector('.ffz-il-tooltip');\n\t\t}\n\n\t\tbtn.setAttribute('aria-label',\n\t\t\ttip.textContent = this.i18n.t(\n\t\t\t\t'player.reset_button',\n\t\t\t\t'Double-Click to Reset Player'\n\t\t\t));\n\t}\n\n\n\tresetAllPlayers() {\n\t\tfor(const inst of this.Player.instances)\n\t\t\tthis.resetPlayer(inst);\n\t}\n\n\n\tasync resetPlayer(inst, e) {\n\t\tconst player = inst ? ((inst.mediaSinkManager || inst.core?.mediaSinkManager) ? inst : inst?.props?.mediaPlayerInstance) : null;\n\n\t\tif ( e ) {\n\t\t\te.preventDefault();\n\t\t\tconst target = e.currentTarget,\n\t\t\t\ticon = target && target.querySelector('figure');\n\n\t\t\tif ( icon ) {\n\t\t\t\tif ( icon.classList.contains('loading') )\n\t\t\t\t\treturn;\n\n\t\t\t\ticon.classList.toggle('ffz-i-t-reset', true);\n\t\t\t\ticon.classList.toggle('ffz-i-t-reset-clicked', false);\n\n\t\t\t\ticon.classList.toggle('loading', true);\n\t\t\t\ticon._ffz_unspin = setTimeout(() => {\n\t\t\t\t\ticon._ffz_unspin = null;\n\t\t\t\t\ticon.classList.toggle('loading', false);\n\t\t\t\t}, 10000);\n\t\t\t}\n\t\t}\n\n\t\t// Are we dealing with a VOD?\n\t\tconst duration = player.getDuration?.() ?? Infinity;\n\t\tlet position = -1;\n\n\t\tconst core = player.core || player;\n\t\tif ( core._ffz_setVolume )\n\t\t\tcore.setVolume = core._ffz_setVolume;\n\n\t\tif ( isFinite(duration) && ! isNaN(duration) && duration > 0 )\n\t\t\tposition = player.getPosition();\n\n\t\tconst video = player.mediaSinkManager?.video || player.core?.mediaSinkManager?.video;\n\t\tif ( video?._ffz_compressor && player.attachHTMLVideoElement ) {\n\t\t\tconst new_vid = this.replaceVideoElement(player, video);\n\t\t\tnew_vid._ffz_maybe_compress = true;\n\t\t}\n\n\t\tthis.PlayerSource.check();\n\t\tfor(const inst of this.PlayerSource.instances) {\n\t\t\tif ( ! player || player === inst.props?.mediaPlayerInstance )\n\t\t\t\tawait inst.setSrc({isNewMediaPlayerInstance: false});\n\t\t}\n\n\t\tif ( position > 0 )\n\t\t\tsetTimeout(() => player.seekTo(position), 250);\n\t}\n\n\taddMetadata(inst) {\n\t\tif ( ! this.metadata )\n\t\t\treturn;\n\n\t\tif ( ! inst._ffz_md_update )\n\t\t\tinst._ffz_md_update = debounce(() => requestAnimationFrame(() => this._updateMetadata(inst)), 1000, 2);\n\n\t\tinst._ffz_md_update();\n\t}\n\n\twantsMetadata() { // eslint-disable-line class-methods-use-this\n\t\treturn false;\n\t}\n\n\t_updateMetadata(inst) {\n\t\tif ( inst._ffz_cont && ! document.contains(inst._ffz_cont) )\n\t\t\tinst._ffz_cont = null;\n\n\t\tconst wanted = this.wantsMetadata(inst);\n\n\t\tif ( ! inst._ffz_cont ) {\n\t\t\tif ( ! wanted )\n\t\t\t\treturn;\n\n\t\t\tconst outer = inst.props.containerRef || this.fine.getChildNode(inst),\n\t\t\t\tcontainer = outer && outer.querySelector(RIGHT_CONTROLS);\n\n\t\t\tif ( ! container )\n\t\t\t\treturn;\n\n\t\t\tinst._ffz_cont = (<div class=\"ffz--player-meta-tray\" />);\n\t\t\tcontainer.insertBefore(inst._ffz_cont, container.firstElementChild);\n\t\t}\n\n\t\tif ( ! wanted ) {\n\t\t\tinst._ffz_cont.remove();\n\t\t\tinst._ffz_cont = null;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.updateMetadata(inst);\n\t}\n\n\tupdateMetadata(inst, keys) {\n\t\tconst cont = inst._ffz_cont;\n\t\tif ( ! cont || ! document.contains(cont) )\n\t\t\treturn;\n\n\t\tif ( ! keys )\n\t\t\tkeys = this.metadata.keys;\n\t\telse if ( ! Array.isArray(keys) )\n\t\t\tkeys = [keys];\n\n\t\tconst source = this.getData(),\n\t\t\tuser = source?.props?.data?.user;\n\n\t\tconst timers = inst._ffz_meta_timers = inst._ffz_meta_timers || {},\n\t\t\trefresh_fn = key => this.updateMetadata(inst, key),\n\t\t\tdata = {\n\t\t\t\tchannel: {\n\t\t\t\t\tid: user?.id,\n\t\t\t\t\tlogin: source?.props?.channelLogin,\n\t\t\t\t\tdisplay_name: user?.displayName,\n\t\t\t\t\tlive: user?.stream?.id != null,\n\t\t\t\t\tlive_since: user?.stream?.createdAt\n\t\t\t\t},\n\t\t\t\tinst,\n\t\t\t\tsource,\n\t\t\t\tgetViewerCount: () => 0,\n\t\t\t\tgetUserSelfImmediate: () => null,\n\t\t\t\tgetUserSelf: () => null,\n\t\t\t\tgetBroadcastID: () => user?.id ? this.getBroadcastID(inst, user.id) : null\n\t\t\t};\n\n\t\tfor(const key of keys)\n\t\t\tthis.metadata.renderPlayer(key, data, cont, timers, refresh_fn);\n\t}\n\n\n\tgetUptime(inst) {\n\t\t// TODO: Support multiple instances.\n\t\tconst source = this.getData(),\n\t\t\tuser = source?.props?.data?.user;\n\n\t\tlet created = user?.stream?.createdAt;\n\n\t\tif ( ! created )\n\t\t\treturn null;\n\n\t\tif ( !(created instanceof Date) )\n\t\t\tcreated = new Date(created);\n\n\t\tconst now = Date.now();\n\n\t\treturn (now - created.getTime()) / 1000;\n\t}\n\n\n\tgetBroadcastID(inst, channel_id) {\n\t\tif ( ! this.twitch_data )\n\t\t\treturn Promise.resolve(null);\n\n\t\tconst cache = inst._ffz_bcast_cache = inst._ffz_bcast_cache || {};\n\t\tif ( channel_id === cache.channel_id ) {\n\t\t\tif ( Date.now() - cache.saved < 60000 )\n\t\t\t\treturn Promise.resolve(cache.broadcast_id);\n\t\t}\n\n\t\treturn new Promise(async (s, f) => {\n\t\t\tif ( cache.updating ) {\n\t\t\t\tcache.updating.push([s, f]);\n\t\t\t\treturn ;\n\t\t\t}\n\n\t\t\tcache.channel_id = channel_id;\n\t\t\tcache.updating = [[s,f]];\n\t\t\tlet id, err;\n\n\t\t\ttry {\n\t\t\t\tid = await this.twitch_data.getBroadcastID(channel_id);\n\t\t\t} catch(error) {\n\t\t\t\tid = null;\n\t\t\t\terr = error;\n\t\t\t}\n\n\t\t\tconst waiters = cache.updating;\n\t\t\tcache.updating = null;\n\n\t\t\tif ( cache.channel_id !== channel_id ) {\n\t\t\t\terr = new Error('Outdated');\n\t\t\t\tcache.channel_id = null;\n\t\t\t\tcache.broadcast_id = null;\n\t\t\t\tcache.saved = 0;\n\t\t\t\tfor(const pair of waiters)\n\t\t\t\t\tpair[1](err);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcache.broadcast_id = id;\n\t\t\tcache.saved = Date.now();\n\n\t\t\tfor(const pair of waiters)\n\t\t\t\terr ? pair[1](err) : pair[0](id);\n\t\t});\n\t}\n\n\n\tget playerUI() {\n\t\tconst container = this.fine.searchTree(this.Player.first, n => n.props && n.props.uiContext, 150);\n\t\treturn container?.props?.uiContext;\n\t}\n\n\tget current() {\n\t\tfor(const inst of this.Player.instances)\n\t\t\tif ( inst?.props?.mediaPlayerInstance )\n\t\t\t\treturn inst.props.mediaPlayerInstance;\n\n\t\treturn null;\n\t}\n}\n","'use strict';\n\n// ============================================================================\n// WebMunch\n// It consumes webpack.\n// ============================================================================\n\nimport Module from 'utilities/module';\nimport {has, generateUUID} from 'utilities/object';\nimport { DEBUG } from 'utilities/constants';\n\n\nconst Requires = Symbol('FFZRequires');\n\nconst regex_cache = {};\n\nfunction getRequireRegex(name) {\n\tif ( ! regex_cache[name] )\n\t\tregex_cache[name] = new RegExp(`\\\\b(?<!\\\\.)${name}\\\\(([0-9e_+]+)\\\\)`, 'g');\n\n\treturn regex_cache[name];\n}\n\nconst NAMES = [\n\t'webpackJsonp',\n\t'webpackChunktwitch_twilight',\n\t'webpackChunktwitch_sunlight',\n\t'webpackJsonp_N_E'\n];\n\nconst HARD_MODULES = [\n\t[0, 'vendor'],\n\t[1, 'core']\n];\n\nlet last_muncher = 0;\n\nexport default class WebMunch extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis._id = `_ffz$${last_muncher++}`;\n\t\tthis._rid = 0;\n\t\tthis._original_loader = null;\n\t\tthis._known_rules = {};\n\t\tthis._require = null;\n\t\tthis._chunk_names = {};\n\t\tthis._mod_cache = {};\n\n\t\tthis._checked_module = {};\n\t\tthis._required_ids = new Set;\n\t\tthis._known_ids = new Set;\n\n\t\tthis.Requires = Requires;\n\t\tthis.v4 = null;\n\n\t\tthis.hookLoader();\n\t\tthis.hookRequire();\n\t}\n\n\n\t// ========================================================================\n\t// Loaded Modules\n\t// ========================================================================\n\n\twaitForLoader() {\n\t\tif ( this._original_loader )\n\t\t\treturn Promise.resolve();\n\n\t\tconst waiters = this._load_waiters = this._load_waiters || [];\n\t\treturn new Promise((s,f) => waiters.push([s,f]));\n\t}\n\n\t_resolveLoadWait(errored) {\n\t\tconst waiters = this._load_waiters;\n\t\tthis._load_waiters = null;\n\n\t\tif ( waiters )\n\t\t\tfor(const pair of waiters)\n\t\t\t\tpair[errored ? 1 : 0]();\n\t}\n\n\thookLoader(attempts = 0) {\n\t\tif ( this._original_loader )\n\t\t\treturn this.log.warn('Attempted to call hookLoader twice.');\n\n\t\tlet name;\n\t\tfor(const n of NAMES)\n\t\t\tif ( window[n] ) {\n\t\t\t\tname = n;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\tif ( ! name ) {\n\t\t\tif ( attempts > 240 ) {\n\t\t\t\tthis.log.error(\"Unable to find webpack's loader after one minute.\");\n\n\t\t\t\ttry {\n\t\t\t\t\tconst possibilities = [];\n\t\t\t\t\tfor(const key of Object.keys(window))\n\t\t\t\t\t\tif ( has(window, key) && typeof key === 'string' && /webpack/i.test(key) && ! /ffz/i.test(key) )\n\t\t\t\t\t\t\tpossibilities.push(key);\n\n\t\t\t\t\tif ( possibilities.length )\n\t\t\t\t\t\tthis.log.info('Possible Matches: ', possibilities.join(', '));\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.log.info('No possible matches found.');\n\n\t\t\t\t} catch(err) { /* no-op */ }\n\n\t\t\t\tthis._resolveLoadWait(true);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn setTimeout(this.hookLoader.bind(this, attempts + 1), 250);\n\t\t}\n\n\t\tconst thing = window[name];\n\n\t\tif ( typeof thing === 'function' ) {\n\t\t\t// v3\n\t\t\tthis.v4 = false;\n\t\t\tthis._original_loader = thing;\n\n\t\t\ttry {\n\t\t\t\twindow[name] = this.webpackJsonpv3.bind(this);\n\t\t\t} catch(err) {\n\t\t\t\tthis.log.warn('Unable to wrap webpackJsonp due to write protection.');\n\t\t\t\tthis._resolveLoadWait(true);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t} else if ( Array.isArray(thing) ) {\n\t\t\t// v4\n\t\t\tthis.v4 = true;\n\t\t\tthis._original_store = thing;\n\t\t\tthis._original_loader = thing.push;\n\n\t\t\t// Wrap all existing modules in case any of them haven't been required yet.\n\t\t\tfor(const chunk of thing)\n\t\t\t\tif ( chunk && chunk[1] )\n\t\t\t\t\tthis.processModulesV4(chunk[1], true);\n\n\t\t\ttry {\n\t\t\t\tthing.push = this.webpackJsonpv4.bind(this);\n\t\t\t} catch(err) {\n\t\t\t\tthis.log.warn('Unable to wrap webpackJsonp (v4) due to write protection.');\n\t\t\t\tthis._resolveLoadWait(true);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t} else {\n\t\t\tthis.log.error('webpackJsonp is of an unknown value. Unable to wrap.');\n\t\t\tthis._resolveLoadWait(true);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._resolveLoadWait();\n\t\tthis.log.info(`Found and wrapped webpack's loader after ${(attempts||0)*250}ms.`);\n\t}\n\n\n\twebpackJsonpv3(chunk_ids, modules) {\n\t\tconst names = chunk_ids.map(x => this._chunk_names[x] || x).join(', ');\n\t\tthis.log.verbose(`Twitch Chunk Loaded: ${chunk_ids} (${names})`);\n\t\tthis.log.verbose(`Modules: ${Object.keys(modules)}`);\n\n\t\tconst res = this._original_loader.apply(window, arguments); // eslint-disable-line prefer-rest-params\n\n\t\tthis.emit(':loaded', chunk_ids, names, modules);\n\n\t\treturn res;\n\t}\n\n\n\t_resolveRequire(require) {\n\t\tif ( this._require )\n\t\t\treturn;\n\n\t\tthis._require = require;\n\t\tif ( this._resolve_require ) {\n\t\t\tfor(const fn of this._resolve_require)\n\t\t\t\tfn(require);\n\n\t\t\tthis._resolve_require = null;\n\t\t}\n\t}\n\n\n\tprocessModulesV4(modules) {\n\t\tconst t = this;\n\n\t\tfor(const [mod_id, original_module] of Object.entries(modules)) {\n\t\t\tthis._known_ids.add(mod_id);\n\n\t\t\t/*modules[mod_id] = function(module, exports, require, ...args) {\n\t\t\t\tif ( ! t._require && typeof require === 'function' ) {\n\t\t\t\t\tt.log.debug(`require() grabbed from invocation of module ${mod_id}`);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tt._resolveRequire(require);\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tt.log.error('An error occurred running require callbacks.', err);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn original_module.call(this, module, exports, require, ...args);\n\t\t\t}\n\n\t\t\tmodules[mod_id].original = original_module;*/\n\t\t}\n\t}\n\n\n\twebpackJsonpv4(data) {\n\t\tconst chunk_ids = data[0],\n\t\t\tmodules = data[1],\n\t\t\tnames = Array.isArray(chunk_ids) && chunk_ids.map(x => this._chunk_names[x] || x);\n\n\t\tthis.log.verbose(`Twitch Chunk Loaded: ${chunk_ids} (${names.join(', ')})`);\n\t\tthis.log.verbose(`Modules: ${Object.keys(modules)}`);\n\n\t\tif ( modules )\n\t\t\tthis.processModulesV4(modules, false);\n\n\t\tfor(const [key,val] of Object.entries(this._checked_module)) {\n\t\t\tif (val == true)\n\t\t\t\tthis._checked_module[key] = null;\n\t\t}\n\n\t\t//this._checked_module = {};\n\t\tconst res = this._original_loader.apply(this._original_store, arguments); // eslint-disable-line prefer-rest-params\n\t\tthis.emit(':loaded', chunk_ids, names, modules);\n\t\treturn res;\n\t}\n\n\n\t// ========================================================================\n\t// Finding Modules\n\t// ========================================================================\n\n\tknown(key, predicate) {\n\t\tif ( typeof key === 'object' ) {\n\t\t\tfor(const k in key)\n\t\t\t\tif ( has(key, k) )\n\t\t\t\t\tthis.known(k, key[k]);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._known_rules[key] = predicate;\n\t}\n\n\n\tasync findModule(key, predicate) {\n\t\tif ( ! this._require )\n\t\t\tawait this.getRequire();\n\n\t\treturn this.getModule(key, predicate);\n\t}\n\n\n\tfindDeep(chunks, predicate, multi = true) {\n\t\tif ( chunks && ! Array.isArray(chunks) )\n\t\t\tchunks = [chunks];\n\n\t\tif ( ! this._require || ! this.v4 || ! this._original_store )\n\t\t\treturn new Error('We do not have webpack');\n\n\t\tconst out = [],\n\t\t\tnames = this._chunk_names;\n\t\tfor(const [cs, modules] of this._original_store) {\n\t\t\tif ( chunks ) {\n\t\t\t\tlet matched = false;\n\t\t\t\tfor(const c of cs) {\n\t\t\t\t\tif ( chunks.includes(c) || chunks.includes(`${c}`) || (names[c] && chunks.includes(names[c])) ) {\n\t\t\t\t\t\tmatched = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( ! matched )\n\t\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor(const id of Object.keys(modules)) {\n\t\t\t\ttry {\n\t\t\t\t\tconst mod = this._require(id);\n\t\t\t\t\tfor(const key in mod)\n\t\t\t\t\t\tif ( mod[key] && predicate(mod[key], mod, key) ) {\n\t\t\t\t\t\t\tthis.log.info(`Found in key \"${key}\" of module \"${id}\" (${this.chunkNameForModule(id)})`);\n\t\t\t\t\t\t\tif ( ! multi )\n\t\t\t\t\t\t\t\treturn mod;\n\t\t\t\t\t\t\tout.push(mod);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t} catch(err) {\n\t\t\t\t\tthis.log.warn('Exception while deep scanning webpack.', err);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( out.length )\n\t\t\treturn out;\n\n\t\tthis.log.info('Unable to find deep scan target.');\n\t\treturn null;\n\t}\n\n\n\tgetModule(key, predicate) {\n\t\tif ( typeof key === 'function' ) {\n\t\t\tpredicate = key;\n\t\t\tkey = null;\n\t\t}\n\n\t\tif ( key && this._mod_cache[key] )\n\t\t\treturn this._mod_cache[key];\n\n\t\tconst require = this._require;\n\t\tif ( ! require )\n\t\t\treturn null;\n\n\t\tif ( ! predicate )\n\t\t\tpredicate = this._known_rules[key];\n\n\t\tif ( ! predicate )\n\t\t\tthrow new Error(`no known predicate for locating ${key}`);\n\n\t\tif ( require.c )\n\t\t\treturn this._oldGetModule(key, predicate, require);\n\n\t\tif ( require.m )\n\t\t\treturn this._newGetModule(key, predicate, require);\n\t}\n\n\t_chunksForModule(id) {\n\t\tif ( ! this.v4 )\n\t\t\treturn null;\n\n\t\tif ( ! this._original_store )\n\t\t\treturn null;\n\n\t\tconst out = new Set;\n\n\t\tfor(const [chunks, modules] of this._original_store) {\n\t\t\tif ( modules[id] ) {\n\t\t\t\tfor(const chunk of chunks)\n\t\t\t\t\tout.add(chunk);\n\t\t\t}\n\t\t}\n\n\t\treturn [...out];\n\t}\n\n\tchunkNameForModule(id) {\n\t\tconst chunks = this._chunksForModule(id);\n\t\tif ( ! chunks )\n\t\t\treturn null;\n\n\t\tfor(const chunk of chunks) {\n\t\t\tconst name = this._chunk_names[chunk];\n\t\t\tif ( name )\n\t\t\t\treturn name;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tchunkNamesForModule(id) {\n\t\tconst chunks = this._chunksForModule(id);\n\t\tif ( ! chunks )\n\t\t\treturn null;\n\n\t\treturn chunks.map(id => this._chunk_names[id] || id);\n\t}\n\n\n\t_oldGetModule(key, predicate, require) {\n\t\tif ( ! require || ! require.c )\n\t\t\treturn null;\n\n\t\tlet ids;\n\t\tif ( this._original_store && predicate.chunks && this._chunk_names && Object.keys(this._chunk_names).length ) {\n\t\t\tconst chunk_pred = typeof predicate.chunks === 'function';\n\t\t\tif ( ! chunk_pred && ! Array.isArray(predicate.chunks) )\n\t\t\t\tpredicate.chunks = [predicate.chunks];\n\n\t\t\tconst chunks = predicate.chunks,\n\t\t\t\tnames = this._chunk_names;\n\n\t\t\tids = [];\n\t\t\tfor(const [cs, modules] of this._original_store) {\n\t\t\t\tlet matched = false;\n\t\t\t\tfor(const c of cs) {\n\t\t\t\t\tif ( chunk_pred ? chunks(names[c], c) : (chunks.includes(c) || chunks.includes(String(c)) || (names[c] && chunks.includes(names[c]))) ) {\n\t\t\t\t\t\tmatched = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( matched )\n\t\t\t\t\tids = [...ids, ...Object.keys(modules)];\n\t\t\t}\n\n\t\t\tids = new Set(ids);\n\t\t} else\n\t\t\tids = Object.keys(require.c);\n\n\t\tlet checked = 0;\n\t\tfor(const k of ids)\n\t\t\tif ( has(require.c, k) ) {\n\t\t\t\tchecked++;\n\t\t\t\tconst module = require.c[k],\n\t\t\t\t\tmod = module && module.exports;\n\n\t\t\t\tif ( mod ) {\n\t\t\t\t\tconst ret = predicate(mod);\n\t\t\t\t\tif ( ret ) {\n\t\t\t\t\t\tthis.log.debug(`[Old] Located module \"${key}\" in module ${k}${DEBUG ? ` (${this.chunkNameForModule(k)})` : ''} after ${checked} tries`);\n\t\t\t\t\t\tconst out = predicate.use_result ? ret : mod;\n\t\t\t\t\t\tif ( key )\n\t\t\t\t\t\t\tthis._mod_cache[key] = out;\n\t\t\t\t\t\treturn out;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\tthis.log.debug(`[Old] Unable to locate module \"${key}\" despite checking ${checked} modules`);\n\t\treturn null;\n\t}\n\n\t_newGetModule(key, predicate, require) {\n\t\tif ( ! require )\n\t\t\treturn null;\n\n\t\tlet ids = this._known_ids;\n\t\tif ( this._original_store && predicate.chunks && this._chunk_names && Object.keys(this._chunk_names).length ) {\n\t\t\tconst chunk_pred = typeof predicate.chunks === 'function';\n\t\t\tif ( ! chunk_pred && ! Array.isArray(predicate.chunks) )\n\t\t\t\tpredicate.chunks = [predicate.chunks];\n\n\t\t\tconst chunks = predicate.chunks,\n\t\t\t\tnames = this._chunk_names;\n\n\t\t\tids = [];\n\t\t\tfor(const [cs, modules] of this._original_store) {\n\t\t\t\tlet matched = false;\n\t\t\t\tfor(const c of cs) {\n\t\t\t\t\tif ( chunk_pred ? chunks(names[c], c) : (chunks.includes(c) || chunks.includes(String(c)) || (names[c] && chunks.includes(names[c]))) ) {\n\t\t\t\t\t\tmatched = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( matched )\n\t\t\t\t\tids = [...ids, ...Object.keys(modules)];\n\t\t\t}\n\n\t\t\tids = new Set(ids);\n\t\t}\n\n\t\tlet checked = 0;\n\t\tfor(const id of ids) {\n\t\t\ttry {\n\t\t\t\tchecked++;\n\n\t\t\t\t// If we have not previously required this module, check to see\n\t\t\t\t// if we CAN require this module. We want to avoid requiring a\n\t\t\t\t// module that doesn't yet have a constructor because that will\n\t\t\t\t// break webpack's internal state.\n\t\t\t\tif ( ! this._required_ids.has(id) ) {\n\t\t\t\t\tlet check = this._checked_module[id];\n\t\t\t\t\tif ( check == null )\n\t\t\t\t\t\tcheck = this._checkModule(id);\n\n\t\t\t\t\tif ( check )\n\t\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis._required_ids.add(id);\n\n\t\t\t\tif ( ! require.m[id] )\n\t\t\t\t\tthis.log.warn('Tried requiring module that isn\\'t loaded', id);\n\n\t\t\t\tconst mod = require(id);\n\t\t\t\tif ( mod ) {\n\t\t\t\t\tconst ret = predicate(mod);\n\t\t\t\t\tif ( ret ) {\n\t\t\t\t\t\tthis.log.debug(`Located module \"${key}\" in module ${id}${DEBUG ? ` (${this.chunkNameForModule(id)})` : ''} after ${checked} tries`);\n\t\t\t\t\t\tconst out = predicate.use_result ? ret : mod;\n\t\t\t\t\t\tif ( key )\n\t\t\t\t\t\t\tthis._mod_cache[key] = out;\n\t\t\t\t\t\treturn out;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch(err) {\n\t\t\t\tthis.log.warn('Unexpected error trying to find module', err);\n\t\t\t}\n\t\t}\n\n\t\tthis.log.debug(`Unable to locate module \"${key}\" despite checking ${checked} modules`);\n\t\treturn null;\n\t}\n\n\n\t_checkModule(id, checked = null) {\n\t\tif (checked) {\n\t\t\tif (checked.has(id))\n\t\t\t\treturn (this._checked_module[id] ?? false);\n\n\t\t\tchecked.add(id);\n\t\t}\n\n\t\tlet fn = this._require?.m?.[id];\n\t\tif ( fn ) {\n\t\t\tif ( fn.original )\n\t\t\t\tfn = fn.original;\n\n\t\t\tlet reqs = fn[Requires],\n\t\t\t\tbanned = false;\n\n\t\t\tif ( reqs == null ) {\n\t\t\t\tconst str = fn.toString(),\n\t\t\t\t\tname_match = /^function\\([^,)]+,[^,)]+,([^,)]+)/.exec(str);\n\n\t\t\t\tif ( name_match ) {\n\t\t\t\t\tconst regex = getRequireRegex(name_match[1]);\n\t\t\t\t\treqs = fn[Requires] = new Set;\n\n\t\t\t\t\tregex.lastIndex = 0;\n\t\t\t\t\tlet match;\n\n\t\t\t\t\t// Here, we check all the modules this module depends on\n\t\t\t\t\t// so that we don't require a module with missing requirements\n\t\t\t\t\t// because webpack sucks.\n\t\t\t\t\twhile((match = regex.exec(str))) {\n\t\t\t\t\t\tlet mod_id = match[1];\n\t\t\t\t\t\tif ( mod_id === 'e' )\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t// Modules are all numbers, but some are written in e notation.\n\t\t\t\t\t\t// We need to correct that for string comparison.\n\t\t\t\t\t\tif ( /^\\d+e\\d+$/.test(mod_id) ) {\n\t\t\t\t\t\t\tconst bits = mod_id.split('e');\n\t\t\t\t\t\t\tmod_id = `${parseInt(bits[0], 10) * (10 ** parseInt(bits[1], 10))}`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treqs.add(mod_id);\n\n\t\t\t\t\t\tif ( ! banned && ! this._require.m[mod_id] ) {\n\t\t\t\t\t\t\tthis.log.verbose(`Unable to load module ${id} due to missing dependency ${mod_id}`);\n\t\t\t\t\t\t\tbanned = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else\n\t\t\t\t\tfn[Requires] = false;\n\n\t\t\t} else if ( reqs ) {\n\t\t\t\tfor(const mod_id of reqs)\n\t\t\t\t\tif ( ! this._require.m[mod_id] ) {\n\t\t\t\t\t\tbanned = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ! banned && reqs ) {\n\t\t\t\tif ( ! checked ) {\n\t\t\t\t\tchecked = new Set();\n\t\t\t\t\tchecked.add(id);\n\t\t\t\t}\n\n\t\t\t\tfor(const mod_id of reqs) {\n\t\t\t\t\tlet val = this._checked_module[mod_id];\n\t\t\t\t\tif (val == null && ! checked.has(mod_id))\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tval = this._checkModule(mod_id, checked);\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\tthis.log.verbose(`Recursion error checking module ${id} (${mod_id})`);\n\t\t\t\t\t\t\tval = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\tthis.log.verbose(`Unable to load module ${id} due to unable to load dependency ${mod_id}`);\n\t\t\t\t\t\tbanned = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this._checked_module[id] = banned;\n\t\t}\n\n\t\treturn this._checked_module[id] = true;\n\t}\n\n\n\t// ========================================================================\n\t// Grabbing Require\n\t// ========================================================================\n\n\tgetRequire(limit = 0) {\n\t\tif ( this._require )\n\t\t\treturn Promise.resolve(this._require);\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet fn = this._original_loader;\n\t\t\tif ( ! fn ) {\n\t\t\t\tif ( limit > 500 )\n\t\t\t\t\treject(new Error('unable to find webpackJsonp'));\n\n\t\t\t\treturn setTimeout(() => this.getRequire(limit++).then(resolve), 250);\n\t\t\t}\n\n\t\t\tif ( this.v4 )\n\t\t\t\tfn = fn.bind(this._original_store);\n\n\t\t\t// Inject a fake module and use that to grab require.\n\t\t\tconst id = `ffz-loader$${generateUUID()}`;\n\t\t\tfn([\n\t\t\t\t[id],\n\t\t\t\t{\n\t\t\t\t\t[id]: (module, exports, __webpack_require__) => {\n\t\t\t\t\t\tresolve(this._require = __webpack_require__);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\treq => req(id)\n\t\t\t]);\n\t\t})\n\t}\n\n\tasync hookRequire() {\n\t\tconst start_time = performance.now(),\n\t\t\trequire = await this.getRequire(),\n\t\t\ttime = performance.now() - start_time;\n\n\t\tthis.log.info(`require() grabbed in ${time.toFixed(5)}ms.`);\n\n\t\tconst loader = require.e && require.e.toString();\n\t\tlet modules;\n\t\tif ( loader && loader.indexOf('Loading chunk') !== -1 ) {\n\t\t\tconst data = this.v4 ? /assets\\/\"\\+\\(?({1:.*?})/.exec(loader) : /({0:.*?})/.exec(loader);\n\t\t\tif ( data )\n\t\t\t\ttry {\n\t\t\t\t\tmodules = JSON.parse(data[1].replace(/(\\d+):/g, '\"$1\":'))\n\t\t\t\t} catch(err) { } // eslint-disable-line no-empty\n\n\t\t} else if ( require.u ) {\n\t\t\tconst builder = require.u.toString(),\n\t\t\t\tmatch = /assets\\/\"\\+\\(?({\\d+:.*?})/.exec(builder),\n\t\t\t\tdata = match ? match[1].replace(/([\\de]+):/g, (_, m) => {\n\t\t\t\t\tif ( /^\\d+e\\d+$/.test(m) ) {\n\t\t\t\t\t\tconst bits = m.split('e');\n\t\t\t\t\t\tm = parseInt(bits[0], 10) * (10 ** parseInt(bits[1], 10));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn `\"${m}\":`;\n\t\t\t\t}) : null;\n\n\t\t\tif ( data )\n\t\t\t\ttry {\n\t\t\t\t\tmodules = JSON.parse(data);\n\t\t\t\t} catch(err) { console.log(data); console.log(err) /* no-op */ }\n\t\t}\n\n\t\tif ( modules ) {\n\t\t\t// Ensure that vendor and core have names.\n\t\t\tif ( this._original_store ) {\n\t\t\t\tfor(const [pos, name] of HARD_MODULES) {\n\t\t\t\t\tconst mods = this._original_store[pos]?.[0];\n\t\t\t\t\tif ( Array.isArray(mods) )\n\t\t\t\t\t\tfor(const id of mods)\n\t\t\t\t\t\t\tif ( typeof id !== 'object' && ! modules[id] )\n\t\t\t\t\t\t\t\tmodules[id] = name;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._chunk_names = modules;\n\t\t\tthis.log.debug(`Loaded names for ${Object.keys(modules).length} chunks from require().`)\n\t\t} else\n\t\t\tthis.log.warn(`Unable to find chunk names in require().`);\n\t}\n\n}\n\nWebMunch.Requires = Requires;\n","'use strict';\n\n// ============================================================================\n// Elemental\n// It finds elements.\n// ============================================================================\n\nimport {EventEmitter} from 'utilities/events';\nimport Module, { GenericModule } from 'utilities/module';\n\ndeclare module 'utilities/types' {\n\tinterface ModuleMap {\n\t\t'site.elemental': Elemental;\n\t}\n}\n\nexport default class Elemental extends Module<'site.elemental'> {\n\n\tprivate _wrappers: Map<string, ElementalWrapper<any>>;\n\tprivate _observer: MutationObserver | null;\n\tprivate _watching: Set<ElementalWrapper<any>>;\n\tprivate _live_watching: ElementalWrapper<any>[] | null;\n\tprivate _route?: string | null;\n\tprivate _timer?: number | null;\n\n\tprivate _timeout?: ReturnType<typeof setTimeout> | null;\n\tprivate _clean_all?: ReturnType<typeof requestAnimationFrame> | null;\n\n\tconstructor(name?: string, parent?: GenericModule) {\n\t\tsuper(name, parent);\n\n\t\tthis._pruneLive = this._pruneLive.bind(this);\n\n\t\tthis._wrappers = new Map;\n\n\t\tthis._observer = null;\n\t\tthis._watching = new Set;\n\t\tthis._live_watching = null;\n\t}\n\n\t/** @internal */\n\tonDisable() {\n\t\tthis._stopWatching();\n\t}\n\n\n\tdefine<TElement extends HTMLElement = HTMLElement>(\n\t\tkey: string,\n\t\tselector: string,\n\t\troutes?: string[] | false | null,\n\t\topts: MutationObserverInit | null = null,\n\t\tlimit = 0,\n\t\ttimeout = 5000,\n\t\tremove = true\n\t) {\n\t\tif ( this._wrappers.has(key) )\n\t\t\treturn this._wrappers.get(key) as ElementalWrapper<TElement>;\n\n\t\tif ( ! selector || typeof selector !== 'string' || ! selector.length )\n\t\t\tthrow new Error('cannot find definition and no selector provided');\n\n\t\tconst wrapper = new ElementalWrapper<TElement>(key, selector, routes, opts, limit, timeout, remove, this);\n\t\tthis._wrappers.set(key, wrapper);\n\n\t\treturn wrapper;\n\t}\n\n\n\troute(route: string | null) {\n\t\tthis._route = route;\n\t\tthis._timer = Date.now();\n\t\tthis._updateLiveWatching();\n\t\tthis.checkAll();\n\t\tthis.cleanAll();\n\t}\n\n\n\tcleanAll() {\n\t\tif ( this._clean_all )\n\t\t\tcancelAnimationFrame(this._clean_all);\n\n\t\tthis._clean_all = requestAnimationFrame(() => {\n\t\t\tthis._clean_all = null;\n\t\t\tfor(const wrapper of this._wrappers.values())\n\t\t\t\twrapper.clean();\n\t\t});\n\t}\n\n\n\tcheckAll() {\n\t\tif ( this._watching )\n\t\t\tfor(const watcher of this._watching)\n\t\t\t\twatcher.check();\n\t}\n\n\n\tupdateTimeout() {\n\t\tthis._timer = Date.now();\n\t\tthis._updateLiveWatching();\n\t\tthis.checkAll();\n\t}\n\n\n\tprivate _isActive(watcher: ElementalWrapper<any>, now: number) {\n\t\tif ( watcher.routes === false )\n\t\t\treturn false;\n\n\t\tif ( this._route && watcher.routes.length && ! watcher.routes.includes(this._route) )\n\t\t\treturn false;\n\n\t\tif ( watcher.timeout > 0 && (now - (this._timer as number)) > watcher.timeout )\n\t\t\treturn false;\n\n\t\treturn true;\n\t}\n\n\n\tprivate _updateLiveWatching() {\n\t\tif ( this._timeout ) {\n\t\t\tclearTimeout(this._timeout);\n\t\t\tthis._timeout = null;\n\t\t}\n\n\t\tconst lw: ElementalWrapper<any>[] = this._live_watching = [],\n\t\t\tnow = Date.now();\n\t\tlet min_timeout = Number.POSITIVE_INFINITY;\n\n\t\tif ( this._watching )\n\t\t\tfor(const watcher of this._watching)\n\t\t\t\tif ( this._isActive(watcher, now) ) {\n\t\t\t\t\tif ( watcher.timeout > 0 && watcher.timeout < min_timeout )\n\t\t\t\t\t\tmin_timeout = watcher.timeout;\n\n\t\t\t\t\tlw.push(watcher);\n\t\t\t\t}\n\n\t\tif ( isFinite(min_timeout) )\n\t\t\tthis._timeout = setTimeout(this._pruneLive, min_timeout);\n\n\t\tif ( ! lw.length )\n\t\t\tthis._stopWatching();\n\t\telse if ( ! this._observer )\n\t\t\tthis._startWatching();\n\t}\n\n\tprivate _pruneLive() {\n\t\tthis._updateLiveWatching();\n\t}\n\n\tprivate _checkWatchers(muts: Node[]) {\n\t\tif ( this._live_watching )\n\t\t\tfor(const watcher of this._live_watching)\n\t\t\t\twatcher.checkElements(muts as Element[]);\n\t}\n\n\tprivate _startWatching() {\n\t\tif ( ! this._observer && this._live_watching && this._live_watching.length ) {\n\t\t\tthis.log.info('Installing MutationObserver.');\n\n\t\t\tthis._observer = new MutationObserver(mutations => this._checkWatchers(mutations.map(x => x.target)));\n\t\t\tthis._observer.observe(document.body, {\n\t\t\t\tchildList: true,\n\t\t\t\tsubtree: true\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate _stopWatching() {\n\t\tif ( this._observer ) {\n\t\t\tthis.log.info('Stopping MutationObserver.');\n\t\t\tthis._observer.disconnect();\n\t\t}\n\n\t\tif ( this._timeout ) {\n\t\t\tclearTimeout(this._timeout);\n\t\t\tthis._timeout = null;\n\t\t}\n\n\t\tthis._live_watching = null;\n\t\tthis._observer = null;\n\t}\n\n\n\tlisten(inst: ElementalWrapper<any>, ensure_live = true) {\n\t\tif ( this._watching.has(inst) )\n\t\t\treturn;\n\n\t\tif ( ensure_live )\n\t\t\tthis._timer = Date.now();\n\n\t\tthis._watching.add(inst);\n\t\tthis._updateLiveWatching();\n\t}\n\n\tunlisten(inst: ElementalWrapper<any>) {\n\t\tif ( ! this._watching.has(inst) )\n\t\t\treturn;\n\n\t\tthis._watching.delete(inst);\n\t\tthis._updateLiveWatching();\n\t}\n}\n\n\nlet elemental_id = 0;\n\ntype ElementalParam = `_ffz$elemental$${number}`;\ntype ElementalRemoveParam = `_ffz$elemental_remove$${number}`;\n\ndeclare global {\n\tinterface HTMLElement {\n\t\t[key: ElementalParam]: MutationObserver | null;\n\t\t[key: ElementalRemoveParam]: MutationObserver | null;\n\t}\n}\n\ntype ElementalWrapperEvents<TElement extends HTMLElement> = {\n\tmount: [element: TElement];\n\tunmount: [element: TElement];\n\tmutate: [element: TElement, mutations: MutationRecord[]];\n}\n\nexport class ElementalWrapper<\n\tTElement extends HTMLElement = HTMLElement\n> extends EventEmitter<ElementalWrapperEvents<TElement>> {\n\n\treadonly id: number;\n\treadonly name: string;\n\treadonly selector: string;\n\treadonly routes: string[] | false;\n\treadonly opts: MutationObserverInit | null;\n\treadonly limit: number;\n\treadonly timeout: number;\n\treadonly check_removal: boolean;\n\tcount: number;\n\treadonly instances: Set<TElement>;\n\treadonly elemental: Elemental;\n\n\treadonly param: ElementalParam;\n\treadonly remove_param: ElementalRemoveParam;\n\n\tprivate _stimer?: ReturnType<typeof setTimeout> | null;\n\n\tconstructor(\n\t\tname: string,\n\t\tselector: string,\n\t\troutes: string[] | false | undefined | null,\n\t\topts: MutationObserverInit | null,\n\t\tlimit: number,\n\t\ttimeout: number,\n\t\tremove: boolean,\n\t\telemental: Elemental\n\t) {\n\t\tsuper();\n\n\t\tthis.id = elemental_id++;\n\t\tthis.param = `_ffz$elemental$${this.id}`;\n\t\tthis.remove_param = `_ffz$elemental_remove$${this.id}`;\n\n\t\tthis._schedule = this._schedule.bind(this);\n\n\t\tthis.name = name;\n\t\tthis.selector = selector;\n\t\tthis.routes = routes ?? [];\n\t\tthis.opts = opts;\n\t\tthis.limit = limit;\n\t\tthis.timeout = timeout;\n\t\tthis.check_removal = remove;\n\n\t\tif ( this.opts && ! this.opts.childList && ! this.opts.attributes && ! this.opts.characterData )\n\t\t\tthis.opts.attributes = true;\n\n\t\tthis.count = 0;\n\t\tthis.instances = new Set;\n\t\tthis.elemental = elemental;\n\n\t\tthis.check();\n\t\tthis.schedule();\n\t}\n\n\tget atLimit() {\n\t\treturn this.limit > 0 && this.count >= this.limit;\n\t}\n\n\tclean() {\n\t\tconst instances = Array.from(this.instances);\n\t\tfor(const el of instances) {\n\t\t\tif ( ! document.contains(el) )\n\t\t\t\tthis.remove(el);\n\t\t}\n\t}\n\n\tschedule() {\n\t\tif ( ! this._stimer )\n\t\t\tthis._stimer = setTimeout(this._schedule, 0);\n\t}\n\n\t_schedule() {\n\t\tif ( this._stimer )\n\t\t\tclearTimeout(this._stimer);\n\t\tthis._stimer = null;\n\n\t\tif ( this.limit === 0 || this.count < this.limit )\n\t\t\tthis.elemental.listen(this);\n\t\telse\n\t\t\tthis.elemental.unlisten(this);\n\t}\n\n\tcheck() {\n\t\tconst matches = document.querySelectorAll<TElement>(this.selector);\n\t\t// TypeScript is stupid and thinks NodeListOf<Element> doesn't have an iterator\n\t\tfor(const el of matches as unknown as Iterable<TElement>)\n\t\t\tthis.add(el);\n\t}\n\n\tcheckElements(els: Iterable<Element>) {\n\t\tif ( this.atLimit )\n\t\t\treturn this.schedule();\n\n\t\tfor(const el of els) {\n\t\t\tconst matches = el.querySelectorAll<TElement>(this.selector);\n\t\t\tfor(const match of matches as unknown as Iterable<TElement>)\n\t\t\t\tthis.add(match);\n\n\t\t\tif ( this.atLimit )\n\t\t\t\treturn;\n\t\t}\n\t}\n\n\tget first() {\n\t\tfor(const el of this.instances)\n\t\t\treturn el;\n\n\t\treturn null;\n\t}\n\n\ttoArray() {\n\t\treturn Array.from(this.instances);\n\t}\n\n\teach(fn: (element: TElement) => void) {\n\t\tfor(const el of this.instances)\n\t\t\tfn(el);\n\t}\n\n\tadd(element: TElement) {\n\t\tif ( this.instances.has(element) )\n\t\t\treturn;\n\n\t\tthis.instances.add(element);\n\t\tthis.count++;\n\n\t\tif ( this.check_removal && element.parentNode ) {\n\t\t\tconst remove_check = new MutationObserver(() => {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tif ( ! document.contains(element) )\n\t\t\t\t\t\tthis.remove(element);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tremove_check.observe(element.parentNode, {childList: true});\n\t\t\t(element as HTMLElement)[this.remove_param] = remove_check;\n\t\t}\n\n\t\tif ( this.opts ) {\n\t\t\tconst observer = new MutationObserver(muts => {\n\t\t\t\tif ( ! document.contains(element) ) {\n\t\t\t\t\tthis.remove(element);\n\t\t\t\t} else if ( ! this.__running.size )\n\t\t\t\t\tthis.emit('mutate', element, muts);\n\t\t\t});\n\n\t\t\tobserver.observe(element, this.opts);\n\t\t\t(element as HTMLElement)[this.param] = observer;\n\t\t}\n\n\t\tthis.schedule();\n\t\tthis.emit('mount', element);\n\t}\n\n\tremove(element: TElement) {\n\t\tconst observer = element[this.param];\n\t\tif ( observer ) {\n\t\t\tobserver.disconnect();\n\t\t\t(element as HTMLElement)[this.param] = null;\n\t\t}\n\n\t\tconst remove_check = element[this.remove_param];\n\t\tif ( remove_check ) {\n\t\t\tremove_check.disconnect();\n\t\t\t(element as HTMLElement)[this.remove_param] = null;\n\t\t}\n\n\t\tif ( ! this.instances.has(element) )\n\t\t\treturn;\n\n\t\tthis.instances.delete(element);\n\t\tthis.count--;\n\n\t\tthis.schedule();\n\t\tthis.emit('unmount', element);\n\t}\n}\n","'use strict';\n\n// ============================================================================\n// Subpump\n// It controls Twitch PubSub.\n// ============================================================================\n\nimport Module, { GenericModule } from 'utilities/module';\nimport { FFZEvent } from 'utilities/events';\n\ndeclare global {\n\tinterface Window {\n\t\t__twitch_pubsub_client: TwitchPubSubClient | null | undefined;\n\t\t//__Twitch__pubsubInstances: any;\n\t}\n}\n\ndeclare module 'utilities/types' {\n\tinterface ModuleEventMap {\n\t\t'site.subpump': SubpumpEvents;\n\t}\n\tinterface ModuleMap {\n\t\t'site.subpump': Subpump;\n\t}\n}\n\n\n\n/**\n * This is a rough map of the parts of Twitch's PubSub client that we\n * care about for our purposes.\n */\ntype TwitchPubSubClient = {\n\n\tconnection: {\n\t\tremoveAllListeners(topic: string): void;\n\t\taddListener(topic: string, listener: (event: any) => void): void;\n\t}\n\n\ttopicListeners?: {\n\t\t_events?: Record<string, any>;\n\t}\n\n\tonMessage(event: TwitchPubSubMessageEvent): any;\n\n\tlisten(opts: { topic: string }, listener: (event: any) => void, ...args: any[]): void;\n\tunlisten(topic: string, listener: (event: any) => void, ...args: any[]): void;\n\n\tffz_original_listen?: (opts: { topic: string }, listener: (event: any) => void, ...args: any[]) => void;\n\tffz_original_unlisten?: (topic: string, listener: (event: any) => void, ...args: any[]) => void;\n\n\tsimulateMessage(topic: string, message: string): void;\n\n}\n\ntype TwitchPubSubMessageEvent = {\n\ttype: string;\n\tdata?: {\n\t\ttopic: string;\n\t\tmessage: string;\n\t}\n}\n\n\n\nexport type RawPubSubEventData = {\n\tprefix: string;\n\ttrail: string;\n\tevent: {\n\t\ttopic: string;\n\t\tmessage: string;\n\t}\n}\n\n\nexport class PubSubEvent<TMessage = any> extends FFZEvent<RawPubSubEventData> {\n\n\t_obj?: TMessage;\n\t_changed: boolean;\n\n\t// This is assigned in super()\n\tprefix: string;\n\ttrail: string;\n\tevent: {\n\t\ttopic: string;\n\t\tmessage: string;\n\t};\n\n\tconstructor(data: RawPubSubEventData) {\n\t\tsuper(data);\n\n\t\tthis._obj = undefined;\n\t\tthis._changed = false;\n\t}\n\n\tmarkChanged() {\n\t\tthis._changed = true;\n\t}\n\n\tget topic() {\n\t\treturn this.event.topic;\n\t}\n\n\tget message(): TMessage {\n\t\tif ( this._obj === undefined )\n\t\t\tthis._obj = JSON.parse(this.event.message) ?? null;\n\n\t\treturn this._obj as TMessage;\n\t}\n\n\tset message(val) {\n\t\tthis._obj = val;\n\t\tthis._changed = true;\n\t}\n\n}\n\n\nexport type SubpumpEvents = {\n\t/** A message was received via Twitch's PubSub connection. */\n\t':pubsub-message': [event: PubSubEvent];\n\t/** Twitch subscribed to a new topic. */\n\t':add-topic': [topic: string];\n\t/** Twitch unsubscribed from a topic. */\n\t':remove-topic': [topic: string];\n}\n\n\nexport default class Subpump extends Module<'site.subpump', SubpumpEvents> {\n\n\tinstance?: TwitchPubSubClient | null;\n\n\tconstructor(name?: string, parent?: GenericModule) {\n\t\tsuper(name, parent);\n\t\tthis.instance = null;\n\t}\n\n\tonEnable(tries = 0) {\n\t\tconst instance = window.__twitch_pubsub_client;\n\t\t\t//instances = window.__Twitch__pubsubInstances;\n\n\t\tif ( ! instance ) { //} && ! instances ) {\n\t\t\tif ( tries > 10 )\n\t\t\t\tthis.log.warn('Unable to find PubSub.');\n\t\t\telse\n\t\t\t\tnew Promise(r => setTimeout(r, 50)).then(() => this.onEnable(tries + 1));\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( instance ) {\n\t\t\tthis.instance = instance;\n\t\t\tthis.hookClient(instance);\n\t\t}\n\n\t\t/*\n\t\telse if ( instances ) {\n\t\t\tfor(const val of Object.values(instances))\n\t\t\t\tif ( val?._client ) {\n\t\t\t\t\tif ( this.instance ) {\n\t\t\t\t\t\tthis.log.warn('Multiple PubSub instances detected. Things might act weird.');\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.instance = val;\n\t\t\t\t\tthis.hookOldClient(val._client);\n\t\t\t\t}\n\t\t}\n\t\t*/\n\n\t\tif ( ! this.instance )\n\t\t\tthis.log.warn('Unable to find a PubSub instance.');\n\t}\n\n\thandleMessage(msg: TwitchPubSubMessageEvent) {\n\t\ttry {\n\t\t\tif ( msg.type === 'MESSAGE' && msg.data?.topic ) {\n\t\t\t\tconst raw_topic = msg.data.topic,\n\t\t\t\t\tidx = raw_topic.indexOf('.'),\n\t\t\t\t\tprefix = idx === -1 ? raw_topic : raw_topic.slice(0, idx),\n\t\t\t\t\ttrail = idx === -1 ? '' : raw_topic.slice(idx + 1);\n\n\t\t\t\tconst event = new PubSubEvent({\n\t\t\t\t\tprefix,\n\t\t\t\t\ttrail,\n\t\t\t\t\tevent: msg.data\n\t\t\t\t});\n\n\t\t\t\tthis.emit(':pubsub-message', event);\n\t\t\t\tif ( event.defaultPrevented )\n\t\t\t\t\treturn true;\n\n\t\t\t\tif ( event._changed )\n\t\t\t\t\tmsg.data.message = JSON.stringify(event._obj);\n\t\t\t}\n\n\t\t} catch(err) {\n\t\t\tthis.log.error('Error processing PubSub event.', err);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\thookClient(client: TwitchPubSubClient) {\n\t\tconst t = this,\n\t\t\torig_message = client.onMessage;\n\n\t\t//this.is_old = false;\n\n\t\tclient.connection.removeAllListeners('message');\n\n\t\tclient.onMessage = function(e) {\n\t\t\tif ( t.handleMessage(e) )\n\t\t\t\treturn;\n\n\t\t\treturn orig_message.call(this, e);\n\t\t}\n\n\t\tclient.connection.addListener('message', client.onMessage);\n\n\t\tconst orig_on = client.listen,\n\t\t\torig_off = client.unlisten;\n\n\t\tclient.ffz_original_listen = orig_on;\n\t\tclient.ffz_original_unlisten = orig_off;\n\n\t\tclient.listen = function(opts, fn, ...args) {\n\t\t\tconst topic = opts.topic,\n\t\t\t\thas_topic = topic && !! client.topicListeners?._events?.[topic],\n\t\t\t\tout = orig_on.call(this, opts, fn, ...args);\n\n\t\t\tif ( topic && ! has_topic )\n\t\t\t\tt.emit(':add-topic', topic);\n\n\t\t\treturn out;\n\t\t}\n\n\t\tclient.unlisten = function(topic, fn, ...args) {\n\t\t\tconst has_topic = !! client.topicListeners?._events?.[topic],\n\t\t\t\tout = orig_off.call(this, topic, fn, ...args);\n\n\t\t\tif ( has_topic && ! client.topicListeners?._events?.[topic] )\n\t\t\t\tt.emit(':remove-topic', topic);\n\n\t\t\treturn out;\n\t\t}\n\t}\n\n\tsimulateMessage(topic: string, message: any) {\n\t\tif ( ! this.instance )\n\t\t\tthrow new Error('No PubSub instance available');\n\n\t\t/*if ( this.is_old ) {\n\t\t\tconst listens = this.instance._client?._listens;\n\t\t\tlistens._trigger(topic, JSON.stringify(message));\n\t\t} else {*/\n\t\tthis.instance.simulateMessage(topic, JSON.stringify(message));\n\t\t//}\n\t}\n\n\tget topics() {\n\t\tconst events = this.instance?.topicListeners?._events;\n\t\t/*if ( this.is_old )\n\t\t\tevents = this.instance?._client?._listens._events;\n\t\telse\n\t\t\tevents = this.instance?.topicListeners?._events;*/\n\n\t\tif ( ! events )\n\t\t\treturn [];\n\n\t\treturn Object.keys(events);\n\t}\n\n}\n","export default __webpack_public_path__ + \"main.css\";","'use strict';\n\n// ============================================================================\n// Site Support: Twitch Twilight\n// ============================================================================\n\nimport BaseSite from '../base';\n\nimport WebMunch from 'utilities/compat/webmunch';\nimport Elemental from 'utilities/compat/elemental';\nimport Fine from 'utilities/compat/fine';\nimport FineRouter from 'utilities/compat/fine-router';\nimport Apollo from 'utilities/compat/apollo';\nimport TwitchData from 'utilities/twitch-data';\nimport Subpump from 'utilities/compat/subpump';\n\n//import Switchboard from './switchboard';\n\nimport {createElement} from 'utilities/dom';\nimport {has} from 'utilities/object';\n\nimport MAIN_URL from 'site/styles/main.scss';\n\n\n// ============================================================================\n// The Site\n// ============================================================================\n\nexport default class Twilight extends BaseSite {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject(WebMunch);\n\t\tthis.inject(Fine);\n\t\tthis.inject(Elemental);\n\t\tthis.inject('router', FineRouter);\n\t\tthis.inject(Apollo, false);\n\t\tthis.inject(TwitchData);\n\t\t//this.inject(Switchboard);\n\t\tthis.inject(Subpump);\n\n\t\tthis._dom_updates = [];\n\t}\n\n\tasync populateModules() {\n\t\tconst ctx = await require.context('site/modules', true, /(?:^(?:\\.\\/)?[^/]+|index)\\.[jt]sx?$/);\n\t\tconst modules = await this.loadFromContext(ctx, this.log);\n\t\tthis.log.info(`Loaded descriptions of ${Object.keys(modules).length} modules.`);\n\t}\n\n\tasync onLoad() {\n\t\tawait this.populateModules();\n\n\t\tthis.web_munch.known(Twilight.KNOWN_MODULES);\n\n\t\tthis.router.route(Twilight.ROUTES);\n\t\tthis.router.routeName(Twilight.ROUTE_NAMES);\n\n\t\tthis.router.route('user', '/:userName', null, state => state?.channelView !== 'Home');\n\t\tthis.router.route('user-home', '/:userName', null, state => state?.channelView === 'Home');\n\n\t\tthis.router.route(Twilight.DASH_ROUTES, 'dashboard.twitch.tv');\n\t\tthis.router.route(Twilight.PLAYER_ROUTES, 'player.twitch.tv');\n\t\tthis.router.route(Twilight.CLIP_ROUTES, 'clips.twitch.tv');\n\t}\n\n\tonEnable() {\n\t\tthis.settings = this.resolve('settings');\n\n\t\tthis.web_munch.findModule('simplebar').then(sb => {\n\t\t\tif (! window.ffzSimplebar && sb )\n\t\t\t\twindow.ffzSimplebar = sb;\n\t\t}).catch(() => {});\n\n\t\tconst thing = this.fine.searchNode(null, n => n?.pendingProps?.store?.getState),\n\t\t\tstore = this.store = thing?.pendingProps?.store;\n\n\t\tif ( ! store )\n\t\t\treturn new Promise(r => setTimeout(r, 50)).then(() => this.onEnable());\n\n\t\t// Event Bridge\n\t\tthis.on(':dom-update', (...args) => {\n\t\t\tthis._dom_updates.push(args);\n\t\t\tif ( ! this._dom_frame )\n\t\t\t\tthis._dom_frame = requestAnimationFrame(() => {\n\t\t\t\t\tconst updates = this._dom_updates,\n\t\t\t\t\t\tcore = this.resolve('core');\n\t\t\t\t\tthis._dom_updates = [];\n\t\t\t\t\tthis._dom_frame = null;\n\n\t\t\t\t\tfor(const [key, inst] of updates) {\n\t\t\t\t\t\tconst node = this.fine.getChildNode(inst);\n\t\t\t\t\t\tcore.emit('core:dom-update', key, node, inst);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t});\n\n\t\t// Window Size\n\t\tconst update_size = () => this.settings.updateContext({\n\t\t\tsize: {\n\t\t\t\theight: window.innerHeight,\n\t\t\t\twidth: window.innerWidth\n\t\t\t}\n\t\t});\n\n\t\twindow.addEventListener('resize', update_size);\n\t\tupdate_size();\n\n\t\tconst update_fullscreen = () => {\n\t\t\tthis.settings.updateContext({\n\t\t\t\tfullscreen: !! document.fullscreenElement\n\t\t\t});\n\t\t\tthis.emit(':fullscreen');\n\t\t}\n\n\t\tdocument.addEventListener('fullscreenchange', update_fullscreen);\n\t\tthis.settings.updateContext({\n\t\t\tfullscreen: !! document.fullscreenElement\n\t\t});\n\n\t\t// Share Context\n\t\tstore.subscribe(() => this.updateContext());\n\t\tthis.updateContext();\n\n\t\tthis.router.on(':route', (route, match) => {\n\t\t\tthis.log.info('Navigation', route && route.name, match && match[0]);\n\t\t\tthis.fine.route(route && route.name);\n\t\t\tthis.elemental.route(route && route.name);\n\t\t\tthis.settings.updateContext({\n\t\t\t\troute,\n\t\t\t\troute_data: match\n\t\t\t});\n\t\t});\n\n\t\tconst current = this.router.current;\n\t\tthis.fine.route(current && current.name);\n\t\tthis.elemental.route(current && current.name);\n\t\tthis.settings.updateContext({\n\t\t\troute: current,\n\t\t\troute_data: this.router.match\n\t\t});\n\n\t\tdocument.head.appendChild(createElement('link', {\n\t\t\thref: MAIN_URL,\n\t\t\trel: 'stylesheet',\n\t\t\ttype: 'text/css',\n\t\t\tcrossOrigin: 'anonymous'\n\t\t}));\n\n\t\t// Check for ?ffz-settings in page and open the\n\t\t// settings window in exclusive mode.\n\t\tconst params = new URL(window.location).searchParams;\n\t\tif ( params ) {\n\t\t\tif ( params.has('ffz-settings') )\n\t\t\t\tthis.resolve('main_menu').openExclusive();\n\n\t\t\tif ( params.has('ffz-translate') ) {\n\t\t\t\tconst translation = this.resolve('translation_ui');\n\t\t\t\ttranslation.dialog.exclusive = true;\n\t\t\t\ttranslation.enable();\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateContext() {\n\t\ttry {\n\t\t\tconst state = this.store.getState(),\n\t\t\t\thistory = this.router && this.router.history;\n\n\t\t\tthis.settings.updateContext({\n\t\t\t\tlocation: history && history.location,\n\t\t\t\tui: state && state.ui,\n\t\t\t\tsession: state && state.session,\n\t\t\t\tchat: state && state.chat\n\t\t\t});\n\t\t} catch(err) {\n\t\t\tthis.log.error('Error updating context.', err);\n\t\t}\n\t}\n\n\tgetSession() {\n\t\tconst state = this.store && this.store.getState();\n\t\treturn state && state.session;\n\t}\n\n\tgetUser() {\n\t\tif ( this._user )\n\t\t\treturn this._user;\n\n\t\tconst session = this.getSession();\n\t\treturn this._user = session && session.user;\n\t}\n\n\tgetCore() {\n\t\tif ( ! this._core )\n\t\t\tthis._core = this.web_munch.getModule('core');\n\n\t\treturn this._core;\n\t}\n}\n\n\nconst CALCULATE_BITS = '_calculateChangedBits';\n\nTwilight.KNOWN_MODULES = {\n\tsimplebar: n => n.globalObserver && n.initDOMLoadedElements,\n\treact: n => n.Component && n.createElement,\n\t'react-dom': n => n.createRoot && n.createPortal,\n\tcore: n => {\n\t\tif ( n.x2?.experiments && n.x2.intl )\n\t\t\treturn n.x2;\n\t\tif ( n['$6']?.experiments )\n\t\t\treturn n['$6'];\n\t\tif ( n.p?.experiments )\n\t\t\treturn n.p;\n\t\tif ( n.o?.experiments )\n\t\t\treturn n.o;\n\t\tif ( n.q?.experiments )\n\t\t\treturn n.q;\n\t},\n\tcookie: n => n && n.set && n.get && n.getJSON && n.withConverter,\n\t'extension-service': n => n.extensionService,\n\t'callout-types': n => {\n\t\tif ( n.o?.ClipLiveNudge && n.o?.Drop && n.o?.ShareResub )\n\t\t\treturn n.o;\n\t},\n\t'chat-types': n => {\n\t\tif ( has(n.ZW, 'Message') && has(n.ZW, 'RoomMods') )\n\t\t\treturn {\n\t\t\t\tautomod: n.sq,\n\t\t\t\tchat: n.ZW,\n\t\t\t\tmessage: n.IF,\n\t\t\t\tmod: n.RB\n\t\t\t};\n\n\t\tif ( has(n.b, 'Message') && has(n.b, 'RoomMods') )\n\t\t\treturn {\n\t\t\t\tautomod: n.a,\n\t\t\t\tchat: n.b,\n\t\t\t\tmessage: n.c,\n\t\t\t\tmod: n.e\n\t\t\t};\n\n\t\tif ( has(n.SJ, 'Message') && has(n.SJ, 'RoomMods') )\n\t\t\treturn {\n\t\t\t\tautomod: n.mT,\n\t\t\t\tchat: n.SJ,\n\t\t\t\tmessage: n.Ay,\n\t\t\t\tmod: n.Aw\n\t\t\t};\n\t},\n\t'gql-printer': n => {\n\t\tif ( n === window )\n\t\t\treturn;\n\n\t\tif ( n.print && n.print.toString().includes('.visit') )\n\t\t\treturn n.print;\n\n\t\tif ( n.S && n.S.toString().includes('.visit') )\n\t\t\treturn n.S;\n\t},\n\t'user-report': n => n['Z']?.displayName === 'Loadable(ReportUserModal)' && n['Z'],\n\t'sub-form': n => typeof n.T === 'function' && String(n.T).includes('CheckoutModal') && n.T,\n\tmousetrap: n => n.bindGlobal && n.unbind && n.handleKey,\n\t'algolia-search': n => {\n\t\tif ( n.a?.prototype?.queryTopResults && n.a.prototype.queryForType )\n\t\t\treturn n.a;\n\t\tif ( n.w9?.prototype?.queryTopResults && n.w9.prototype.queryForType )\n\t\t\treturn n.w9;\n\t},\n\tcalloutstack: n => {\n\t\tif ( has(n.at?._currentValue, 'callouts') && typeof n.at._currentValue.pinCallout === 'function' )\n\t\t\treturn {\n\t\t\t\tstack: n.at\n\t\t\t};\n\t},\n\thighlightstack: n => {\n\t\tif ( has(n['g$']?._currentValue, 'highlights') && typeof n.SP?._currentValue === 'function' )\n\t\t\treturn {\n\t\t\t\tstack: n['g$'],\n\t\t\t\tdispatch: n.SP\n\t\t\t};\n\n\t\tif ( has(n.b, CALCULATE_BITS) && has(n.c, CALCULATE_BITS) )\n\t\t\treturn {\n\t\t\t\tstack: n.b,\n\t\t\t\tdispatch: n.c\n\t\t\t};\n\n\t\tif ( has(n.fQ, CALCULATE_BITS) && has(n.vJ, CALCULATE_BITS) )\n\t\t\treturn {\n\t\t\t\tstack: n.fQ,\n\t\t\t\tdispatch: n.vJ\n\t\t\t};\n\n\t\tif ( has(n.fQ?._currentValue, 'highlights') && typeof n.vJ?._currentValue === 'function' )\n\t\t\treturn {\n\t\t\t\tstack: n.fQ,\n\t\t\t\tdispatch: n.vJ\n\t\t\t};\n\t}\n}\n\n//const VEND_CHUNK = n => ! n || n.includes('vendor');\nconst VEND_CORE = n => ! n || n.includes('vendor') || n.includes('core');\n\nTwilight.KNOWN_MODULES.core.use_result = true;\nTwilight.KNOWN_MODULES.core.skip_cache = true;\n//Twilight.KNOWN_MODULES.core.chunks = 'core';\n\nTwilight.KNOWN_MODULES.simplebar.chunks = VEND_CORE;\nTwilight.KNOWN_MODULES.react.chunks = VEND_CORE;\nTwilight.KNOWN_MODULES.cookie.chunks = VEND_CORE;\n\nTwilight.KNOWN_MODULES['gql-printer'].use_result = true;\nTwilight.KNOWN_MODULES['gql-printer'].chunks = VEND_CORE;\n\nTwilight.KNOWN_MODULES.mousetrap.chunks = VEND_CORE;\n\nconst CHAT_CHUNK = n => ! n || n.includes('chat');\n\nTwilight.KNOWN_MODULES['callout-types'].use_result = true;\nTwilight.KNOWN_MODULES['chat-types'].use_result = true;\nTwilight.KNOWN_MODULES['chat-types'].chunks = CHAT_CHUNK;\nTwilight.KNOWN_MODULES['calloutstack'].use_result = true;\nTwilight.KNOWN_MODULES['highlightstack'].use_result = true;\nTwilight.KNOWN_MODULES['highlightstack'].chunks = CHAT_CHUNK;\n\nTwilight.KNOWN_MODULES['algolia-search'].use_result = true;\nTwilight.KNOWN_MODULES['algolia-search'].chunks = 'core';\n\nTwilight.KNOWN_MODULES['user-report'].use_result = true;\nTwilight.KNOWN_MODULES['user-report'].chunks = n => ! n || n.includes('core') || n.includes('common');\n\nTwilight.KNOWN_MODULES['sub-form'].use_result = true;\nTwilight.KNOWN_MODULES['sub-form'].chunks = 'core';\n\n\nTwilight.POPOUT_ROUTES = [\n\t'embed-chat',\n\t'popout',\n\t'dash-popout-chat',\n\t'mod-popout-chat'\n];\n\n\nTwilight.CHAT_ROUTES = [\n\t'collection',\n\t'popout',\n\t'dash-chat',\n\t'video',\n\t'user-video',\n\t'user-home',\n\t'user-clip',\n\t'user-videos',\n\t'user-clips',\n\t'user-events',\n\t'user-followers',\n\t'user-following',\n\t'user',\n\t'dash',\n\t'embed-chat',\n\t'squad',\n\t'command-center',\n\t'dash-stream-manager',\n\t'dash-popout-chat',\n\t'mod-view',\n\t'mod-popout-chat'\n];\n\n\nTwilight.ROUTE_NAMES = {\n\t'dir': 'Browse',\n\t'dir-following': 'Following',\n\t'dir-all': 'Browse Live Channels',\n\t'dash': 'Dashboard',\n\t'popout': 'Popout Chat',\n\t'dash-popout-chat': 'Dashboard Popout Chat',\n\t'user-video': 'Channel Video',\n\t'popout-player': 'Popout/Embed Player'\n};\n\n\nTwilight.SUNLIGHT_ROUTES = [\n\t'dash-stream-manager',\n\t'dash-channel-analytics',\n\t'dash-stream-summary',\n\t'dash-achievements',\n\t'dash-roles',\n\t'dash-activity',\n\t'dash-channel-points',\n\t'dash-video-producer',\n\t'dash-edit-video',\n\t'dash-collections',\n\t'dash-edit-collection',\n\t'dash-clips',\n\t'dash-settings-moderation',\n\t'dash-settings-channel',\n\t'dash-settings-revenue',\n\t'dash-extensions',\n\t'dash-streaming-tools'\n];\n\n\nTwilight.PLAYER_ROUTES = {\n\t'popout-player': '/'\n};\n\nTwilight.CLIP_ROUTES = {\n\t'clip-page': '/:slug'\n};\n\n\nTwilight.DASH_ROUTES = {\n\t'dash-stream-manager': '/u/:userName/stream-manager',\n\t'dash-channel-analytics': '/u/:userName/channel-analytics',\n\t'dash-stream-summary': '/u/:userName/stream-summary',\n\t'dash-achievements': '/u/:userName/achievements',\n\t'dash-roles': '/u/:userName/community/roles',\n\t'dash-activity': '/u/:userName/community/activity',\n\t'dash-channel-points': '/u/:userName/community/channel-points',\n\t'dash-video-producer': '/u/:userName/content/video-producer',\n\t'dash-edit-video': '/u/:userName/content/video-producer/edit/:videoID',\n\t'dash-collections': '/u/:userName/content/collections',\n\t'dash-edit-collection': '/u/:userName/content/collections/:collectionID',\n\t'dash-clips': '/u/:userName/content/clips',\n\t'dash-settings-moderation': '/u/:userName/settings/moderation',\n\t'dash-settings-channel': '/u/:userName/settings/channel',\n\t'dash-settings-revenue': '/u/:userName/settings/revenue',\n\t'dash-extensions': '/u/:userName/extensions',\n\t'dash-streaming-tools': '/u/:userName/broadcast',\n\t'dash-popout-chat': '/popout/u/:userName/stream-manager/chat',\n};\n\nTwilight.ROUTES = {\n\t'front-page': '/',\n\t'collection': '/directory/collection/:collectionID',\n\t'dir': '/directory',\n\t'dir-gaming': '/directory/gaming',\n\t'dir-irl': '/directory/irl',\n\t'dir-music': '/directory/music',\n\t'dir-creative': '/directory/creative',\n\t'dir-esports': '/directory/esports',\n\t//'dir-community': '/communities/:communityName',\n\t//'dir-community-index': '/directory/communities',\n\t//'dir-creative': '/directory/creative',\n\t'dir-following': '/directory/following/:category?',\n\t'dir-game-index': '/directory/category/:gameName',\n\t'dir-game-clips': '/directory/category/:gameName/clips',\n\t'dir-game-videos': '/directory/category/:gameName/videos/:filter',\n\t//'dir-game-details': '/directory/game/:gameName/details',\n\t'dir-all': '/directory/all/:filter?',\n\t//'dir-category': '/directory/:category?',\n\t'dash': '/:userName/dashboard/:live?',\n\t//'dash-automod': '/:userName/dashboard/settings/automod',\n\t'event': '/event/:eventName',\n\t'popout': '/popout/:userName/chat',\n\t//'dash-chat': '/popout/:userName/dashboard/live/chat',\n\t'video': '/videos/:videoID',\n\t'user-video': '/:userName/video/:videoID',\n\t'user-videos': '/:userName/videos/:filter?',\n\t'user-clips': '/:userName/clips',\n\t'user-clip': '/:userName/clip/:clipID',\n\t'user-collections': '/:userName/collections',\n\t'user-events': '/:userName/events',\n\t'user-followers': '/:userName/followers',\n\t'user-following': '/:userName/following',\n\t'product': '/products/:productName',\n\t'prime': '/prime',\n\t'turbo': '/turbo',\n\t'search': '/search',\n\t//'user': '/:userName',\n\t'squad': '/:userName/squad',\n\t'command-center': '/:userName/commandcenter',\n\t'embed-chat': '/embed/:userName/chat',\n\t'mod-view': '/moderator/:userName',\n\t'mod-popout-chat': '/popout/moderator/:userName/chat'\n};\n\n\nTwilight.DIALOG_EXCLUSIVE = '.moderation-root,.sunlight-root,.twilight-main,.twilight-minimal-root>div,#root>div>.tw-full-height,.clips-root,#root';\nTwilight.DIALOG_MAXIMIZED = '.moderation-view-page > div[data-highlight-selector=\"main-grid\"],.sunlight-page,.twilight-main,.twilight-minimal-root,#root .dashboard-side-nav+.tw-full-height,.clips-root>.tw-full-height .scrollable-area,.teams-page-body__outer-container .scrollable-area';\nTwilight.DIALOG_SELECTOR = '.moderation-root,.sunlight-root,#root,.twilight-minimal-root>.tw-full-height,.clips-root>.tw-full-height .scrollable-area';\n","'use strict';\n\n// ============================================================================\n// Bits Button\n// ============================================================================\n\nimport Module from 'utilities/module';\n\n\nexport default class BitsButton extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.should_enable = true;\n\n\t\tthis.inject('settings');\n\t\tthis.inject('site.fine');\n\n\t\tthis.settings.add('layout.display-bits-button', {\n\t\t\trequires: ['chat.bits.show'],\n\t\t\tdefault: null,\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( val != null )\n\t\t\t\t\treturn val;\n\n\t\t\t\treturn ctx.get('chat.bits.show')\n\t\t\t},\n\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Top Navigation',\n\t\t\t\ttitle: 'Show the Get Bits button.',\n\t\t\t\tdescription: 'By default, this inherits its value from [Chat > Bits and Cheering > Display Bits](~chat.bits_and_cheering)',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: () => this.BitsButton.forceUpdate()\n\t\t});\n\n\t\tthis.BitsButton = this.fine.define(\n\t\t\t'bits-button',\n\t\t\tn => n.toggleBalloon && n.toggleShowTutorial\n\t\t);\n\t}\n\n\tonEnable() {\n\t\tthis.BitsButton.ready(cls => {\n\t\t\tconst t = this,\n\t\t\t\told_render = cls.prototype.render;\n\n\t\t\tcls.prototype.render = function() {\n\t\t\t\tif ( ! t.settings.get('layout.display-bits-button') )\n\t\t\t\t\treturn null;\n\n\t\t\t\treturn old_render.call(this);\n\t\t\t}\n\n\t\t\tthis.BitsButton.forceUpdate();\n\t\t})\n\t}\n}","'use strict';\n\nimport { sleep } from 'src/utilities/object';\n// ============================================================================\n// BetterTTV Compatibility\n// ============================================================================\n\nimport Module from 'utilities/module';\n\nconst CHAT_EVENTS = [\n\t'chat-input'\n];\n\nexport default class BTTVCompat extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('settings');\n\n\t\tthis.should_enable = true;\n\t}\n\n\tonEnable() {\n\t\tthis.on('core:dom-update', this.handleDomUpdate, this);\n\n\t\tthis.hookSettings();\n\t}\n\n\tawaitSettings(tries = 0) {\n\t\tif ( ! window.BetterTTV?.settings ) {\n\t\t\tif ( tries > 100 )\n\t\t\t\treturn Promise.reject();\n\t\t\treturn sleep(50).then(() => this.awaitSettings(tries + 1));\n\t\t}\n\n\t\treturn window.BetterTTV.settings;\n\t}\n\n\tasync hookSettings() {\n\t\tconst settings = await this.awaitSettings(),\n\t\t\twaiter = () => this.updateContext(settings);\n\n\t\tsettings.on('changed.clickTwitchEmotes', waiter);\n\t\tsettings.on('changed.bttvGIFEmotes', waiter);\n\t\twaiter();\n\n\t\tif ( settings.get('ffzEmotes') ) {\n\t\t\tif ( this.settings.provider.get('bttv-ffz-notice') )\n\t\t\t\treturn;\n\n\t\t\tconst button = this.resolve('site.menu_button');\n\t\t\tif ( button ) {\n\t\t\t\tbutton.addToast({\n\t\t\t\t\ticon: 'ffz-i-zreknarf',\n\t\t\t\t\ttext_i18n: 'compat.bttv.emotes-on',\n\t\t\t\t\ttext: 'You have \"FrankerFaceZ Emotes\" turned on in BetterTTV\\'s settings, but you also have FrankerFaceZ installed. Please disable \"FrankerFaceZ Emotes\" in BetterTTV\\'s settings. It isn\\'t necessary.'\n\t\t\t\t});\n\t\t\t\tthis.settings.provider.set('bttv-ffz-notice', true);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateContext(settings) {\n\t\tthis.settings.updateContext({\n\t\t\tbttv: {\n\t\t\t\tloaded: true,\n\t\t\t\temote_menu: settings.get('clickTwitchEmotes'),\n\t\t\t\tgifs: settings.get('bttvGIFEmotes')\n\t\t\t}\n\t\t});\n\t}\n\n\thandleDomUpdate(key) {\n\t\tif ( ! window.BetterTTV?.watcher?.emitLoad )\n\t\t\treturn;\n\n\t\tif ( ! CHAT_EVENTS.includes(key) )\n\t\t\treturn;\n\n\t\tthis.log.info('Sending chat reload event to BetterTTV.');\n\t\ttry {\n\t\t\twindow.BetterTTV.watcher.emitLoad('chat');\n\t\t} catch(err) {\n\t\t\tthis.log.error('An error occurred with BetterTTV:', err);\n\t\t}\n\t}\n}","'use strict';\n\n// ============================================================================\n// Channel\n// ============================================================================\n\nimport Module from 'utilities/module';\nimport { Color } from 'utilities/color';\nimport {debounce} from 'utilities/object';\nimport { createElement, setChildren } from 'utilities/dom';\n\n\nconst USER_PAGES = ['user', 'user-home', 'user-about', 'video', 'user-video', 'user-clip', 'user-videos', 'user-clips', 'user-collections', 'user-events', 'user-followers', 'user-following'];\n\nexport default class Channel extends Module {\n\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.should_enable = true;\n\n\t\tthis.inject('i18n');\n\t\tthis.inject('settings');\n\t\tthis.inject('site.apollo');\n\t\tthis.inject('site.css_tweaks');\n\t\tthis.inject('site.elemental');\n\t\tthis.inject('site.subpump');\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site.router');\n\t\tthis.inject('site.twitch_data');\n\t\tthis.inject('metadata');\n\t\tthis.inject('socket');\n\t\tthis.inject('pubsub');\n\n\t\tthis.settings.add('channel.auto-click-off-featured', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Behavior >> General',\n\t\t\t\ttitle: 'Automatically un-check \"Featured Clips Only\" when viewing a channel\\'s clips.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('channel.panel-tips', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Behavior >> Panels',\n\t\t\t\ttitle: 'Display rich tool-tips for links in channel panels.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: val => {\n\t\t\t\tthis.updatePanelTips();\n\t\t\t\tthis.css_tweaks.toggle('panel-links', val);\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('channel.auto-skip-trailer', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Behavior >> General',\n\t\t\t\ttitle: 'Automatically skip channel trailers.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: val => {\n\t\t\t\tif ( val )\n\t\t\t\t\tthis.ChannelTrailer.each(el => this.maybeSkipTrailer(el));\n\t\t\t}\n\t\t})\n\n\t\tthis.settings.add('channel.auto-click-chat', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Behavior >> General',\n\t\t\t\ttitle: 'Automatically open chat when opening an offline channel page.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('channel.extra-links', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Appearance >> General',\n\t\t\t\ttitle: 'Add extra links to live channel pages, next to the streamer\\'s name.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: () => this.updateLinks()\n\t\t});\n\n\t\t/*this.settings.add('channel.hosting.enable', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Behavior >> Hosting',\n\t\t\t\ttitle: 'Enable Channel Hosting',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => ! val && this.InfoBar.each(el => this.updateBar(el))\n\t\t});*/\n\n\t\tthis.ChannelPanels = this.fine.define(\n\t\t\t'channel-panels',\n\t\t\tn => n.layoutMasonry && n.updatePanelOrder && n.onExtensionPoppedOut,\n\t\t\tUSER_PAGES\n\t\t);\n\n\n\t\tthis.ChannelTrailer = this.elemental.define(\n\t\t\t'channel-trailer', '.channel-trailer-player__wrapper',\n\t\t\tUSER_PAGES,\n\t\t\t{attributes: true}, 1\n\t\t);\n\n\n\t\tthis.ChannelRoot = this.elemental.define(\n\t\t\t'channel-root', '.channel-root',\n\t\t\tUSER_PAGES,\n\t\t\t{attributes: true}, 1\n\t\t);\n\n\t\tthis.InfoBar = this.elemental.define(\n\t\t\t'channel-info-bar', '#live-channel-stream-information', //.channel-info-content',\n\t\t\tUSER_PAGES,\n\t\t\t{childNodes: true, subtree: true}, 1\n\t\t);\n\n\t\t/*const strip_host = resp => {\n\t\t\tif ( this.settings.get('channel.hosting.enable') )\n\t\t\t\treturn;\n\n\t\t\tconst user = resp?.data?.user;\n\t\t\tif ( user )\n\t\t\t\tuser.hosting = null;\n\n\t\t\tconst userOrError = resp?.data?.userOrError;\n\t\t\tif ( userOrError )\n\t\t\t\tuserOrError.hosting = null;\n\t\t};\n\n\t\tthis.apollo.registerModifier('UseHosting', strip_host, false);\n\t\tthis.apollo.registerModifier('PlayerTrackingContextQuery', strip_host, false);*/\n\t}\n\n\tonEnable() {\n\t\tthis.updateChannelColor();\n\n\t\tthis.css_tweaks.toggle('panel-links', this.settings.get('channel.panel-tips'));\n\n\t\tthis.on('i18n:update', this.updateLinks, this);\n\n\t\tthis.ChannelTrailer.on('mount', this.maybeSkipTrailer, this);\n\t\tthis.ChannelTrailer.on('update', this.maybeSkipTrailer, this);\n\t\tthis.ChannelTrailer.each(el => this.maybeSkipTrailer(el));\n\n\t\tthis.ChannelPanels.on('mount', this.updatePanelTips, this);\n\t\tthis.ChannelPanels.on('update', this.updatePanelTips, this);\n\t\tthis.ChannelPanels.on('unmount', this.removePanelTips, this);\n\t\tthis.ChannelPanels.ready((cls, instances) => {\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.updatePanelTips(inst);\n\t\t});\n\n\t\tthis.ChannelRoot.on('mount', this.updateRoot, this);\n\t\tthis.ChannelRoot.on('mutate', this.updateRoot, this);\n\t\tthis.ChannelRoot.on('unmount', this.removeRoot, this);\n\t\tthis.ChannelRoot.each(el => this.updateRoot(el));\n\n\t\tthis.InfoBar.on('mount', this.updateBar, this);\n\t\tthis.InfoBar.on('mutate', this.updateBar, this);\n\t\tthis.InfoBar.on('unmount', this.removeBar, this);\n\t\tthis.InfoBar.each(el => this.updateBar(el));\n\n\t\t//this.subpump.on(':pubsub-message', this.onPubSub, this);\n\n\t\tthis.router.on(':route', this.checkNavigation, this);\n\t\tthis.checkNavigation();\n\t}\n\n\tmaybeSkipTrailer(el) {\n\t\tif ( ! this.settings.get('channel.auto-skip-trailer') )\n\t\t\treturn;\n\n\t\tconst inst = this.fine.searchParent(el, n => n.props && n.props.onDismiss);\n\t\tif ( inst ) {\n\t\t\tthis.log.info('Automatically skipping channel trailer.');\n\t\t\tinst.props.onDismiss();\n\t\t}\n\t}\n\n\tupdatePanelTips(inst) {\n\t\tif ( ! inst ) {\n\t\t\tfor(const inst of this.ChannelPanels.instances) {\n\t\t\t\tif ( inst )\n\t\t\t\t\tthis.updatePanelTips(inst);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst el = this.fine.getChildNode(inst);\n\t\tif ( ! el || ! this.settings.get('channel.panel-tips') )\n\t\t\treturn this.removePanelTips(inst);\n\n\t\tif ( inst._ffz_tips && inst._ffz_tip_el !== el )\n\t\t\tthis.removePanelTips(inst);\n\n\t\tif ( ! inst._ffz_tips ) {\n\t\t\tconst tt = this.resolve('tooltips');\n\t\t\tif ( tt ) {\n\t\t\t\tinst._ffz_tips = tt._createInstance(el, 'tw-link', 'link', tt.getRoot());\n\t\t\t\tinst._ffz_tip_el = el;\n\t\t\t}\n\t\t}\n\t}\n\n\tremovePanelTips(inst) { // eslint-disable-line class-methods-use-this\n\t\tif ( inst?._ffz_tips ) {\n\t\t\tinst._ffz_tips.destroy();\n\t\t\tinst._ffz_tips = null;\n\t\t\tinst._ffz_tip_el = null;\n\t\t}\n\t}\n\n\tcheckFeaturedClips() {\n\t\tif ( this.router.current_name !== 'user-clips' && this.router.current_name !== 'user-videos' )\n\t\t\treturn;\n\n\t\tif ( this._featured_waiting || ! this.settings.get('channel.auto-click-off-featured') )\n\t\t\treturn;\n\n\t\tthis._featured_waiting = this.parent.awaitElement('input#featured-clips-toggle').then(el => {\n\t\t\tif ( el.checked )\n\t\t\t\tel.click();\n\n\t\t\tthis._featured_waiting = false;\n\t\t}).catch(() => {\n\t\t\tthis._featured_waiting = false;\n\t\t});\n\t}\n\n\tcheckNavigation() {\n\t\tthis.checkFeaturedClips();\n\n\t\tif ( ! this.settings.get('channel.auto-click-chat') || this.router.current_name !== 'user-home' )\n\t\t\treturn;\n\n\t\tif ( this.router.old_location === this.router.location )\n\t\t\treturn;\n\n\t\tthis.router.history.replace(this.router.location, {channelView: 'Watch'});\n\t}\n\n\tupdateLinks() {\n\t\tfor(const el of this.InfoBar.instances) {\n\t\t\tel._ffz_link_login = null;\n\t\t\tthis.updateBar(el);\n\t\t}\n\t}\n\n\tupdateSubscription(id, login) {\n\t\tif ( this._subbed_login === login && this._subbed_id === id )\n\t\t\treturn;\n\n\t\tif ( this._subbed_id ) {\n\t\t\tthis.pubsub.unsubscribe(this, `twitch/${this._subbed_id}`);\n\t\t\tthis._subbed_id = null;\n\t\t}\n\n\t\tif ( this._subbed_login ) {\n\t\t\tthis.socket.unsubscribe(this, `channel.${this._subbed_login}`);\n\t\t\tthis._subbed_login = null;\n\t\t}\n\n\t\tif ( id ) {\n\t\t\tthis.pubsub.subscribe(this, `twitch/${id}`);\n\t\t\tthis._subbed_id = id;\n\t\t}\n\n\t\tif ( login ) {\n\t\t\tthis.socket.subscribe(this, `channel.${login}`);\n\t\t\tthis._subbed_login = login;\n\t\t}\n\t}\n\n\tupdateBar(el) {\n\t\t// TODO: Run a data check to abort early if nothing has changed before updating metadata\n\t\t// thus avoiding a potential loop from mutations.\n\t\tif ( ! el._ffz_update )\n\t\t\tel._ffz_update = debounce(() => requestAnimationFrame(() => this._updateBar(el)), 1000, 2);\n\n\t\tel._ffz_update();\n\t}\n\n\t_updateBar(el) {\n\t\tif ( el._ffz_cont && ! document.contains(el._ffz_cont) ) {\n\t\t\tel._ffz_cont.classList.remove('ffz--meta-tray');\n\t\t\tel._ffz_cont = null;\n\t\t}\n\n\t\tconst want_links = this.settings.get('channel.extra-links');\n\n\t\tif ( el._ffz_links && (! document.contains(el._ffz_links) || ! want_links)) {\n\t\t\tel._ffz_links.remove();\n\t\t\tel._ffz_links = null;\n\t\t\tel._ffz_link_login = null;\n\t\t}\n\n\t\tlet nvc = el.querySelector('.ffz--native-viewers-container');\n\t\tif ( ! nvc ) {\n\t\t\tlet i = 0,\n\t\t\t\tvel = el.querySelector('p[data-a-target=\"animated-channel-viewers-count\"]');\n\t\t\twhile(vel && vel != el && i < 5) {\n\t\t\t\tif ( vel.querySelector('svg') ) {\n\t\t\t\t\tvel.classList.add('ffz--native-viewers-container');\n\t\t\t\t\tnvc = vel;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tvel = vel.parentElement;\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\n\t\tif ( ! el._ffz_cont ) {\n\t\t\tlet report = el.querySelector(`.report-button,button[data-test-selector=\"video-options-button\"],button[data-test-selector=\"clip-options-button\"],button[data-a-target=\"report-button-more-button\"]`);\n\t\t\tif (!report && nvc)\n\t\t\t\treport = nvc.parentElement;\n\t\t\tlet cont = report && (\n\t\t\t\treport.closest('.tw-flex-wrap.tw-justify-content-end') ||\n\t\t\t\treport.closest('.tw-justify-content-end')\n\t\t\t);\n\n\t\t\tif ( ! cont && report ) {\n\t\t\t\tcont = report.parentElement?.parentElement;\n\t\t\t\tif ( cont && cont.parentElement?.childElementCount === 2 && report.dataset.aTarget !== 'report-button-more-button' )\n\t\t\t\t\tcont = cont.parentElement.firstElementChild;\n\t\t\t}\n\n\t\t\tif ( cont && el.contains(cont) ) {\n\t\t\t\tel._ffz_cont = cont;\n\t\t\t\tcont.classList.add('ffz--meta-tray');\n\n\t\t\t} else\n\t\t\t\tel._ffz_cont = null;\n\t\t}\n\n\t\tif ( ! el._ffz_links && want_links ) {\n\t\t\tconst link = el.querySelector('a .tw-title'),\n\t\t\t\tanchor = link && link.closest('a'),\n\t\t\t\tcont = anchor && anchor.closest('div');\n\n\t\t\tif ( cont && el.contains(cont) ) {\n\t\t\t\tel._ffz_links = <div class=\"ffz--links tw-mg-l-1\"></div>;\n\t\t\t\tcont.appendChild(el._ffz_links);\n\t\t\t}\n\t\t}\n\n\t\tconst react = this.fine.getReactInstance(el);\n\t\tlet props = react?.child?.memoizedProps;\n\t\tif ( ! props?.channelLogin )\n\t\t\tprops = props?.children?.props;\n\n\t\tconst watching = props?.watchPartyProps?.isShowingWatchPartyInMain;\n\t\tthis.settings.updateContext({\n\t\t\tisWatchParty: watching\n\t\t});\n\n\t\tif ( ! el._ffz_cont || ! props?.channelID ) {\n\t\t\tthis.updateSubscription(null, null);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( el._ffz_links && props.channelLogin !== el._ffz_link_login  ) {\n\t\t\tconst login = el._ffz_link_login = props.channelLogin;\n\t\t\tif ( login ) {\n\t\t\t\tconst make_link = (link, text) => {\n\t\t\t\t\tconst a = <a href={link} class=\"tw-c-text-alt-2 tw-interactive tw-pd-x-1 tw-font-size-5\">{text}</a>;\n\t\t\t\t\ta.addEventListener('click', event => {\n\t\t\t\t\t\tif ( event.ctrlKey || event.shiftKey || event.altKey )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tconst history = this.router.history;\n\t\t\t\t\t\tif ( history ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\thistory.push(link);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn a;\n\t\t\t\t}\n\n\t\t\t\tif ( el._ffz_links.closest('.home-header-sticky') )\n\t\t\t\t\tel._ffz_links.innerHTML = '';\n\t\t\t\telse\n\t\t\t\t\tsetChildren(el._ffz_links, [\n\t\t\t\t\t\tmake_link(`/${login}/schedule`, this.i18n.t('channel.links.schedule', 'Schedule')),\n\t\t\t\t\t\tmake_link(`/${login}/videos`, this.i18n.t('channel.links.videos', 'Videos')),\n\t\t\t\t\t\tmake_link(`/${login}/clips`, this.i18n.t('channel.links.clips', 'Clips'))\n\t\t\t\t\t]);\n\n\t\t\t} else\n\t\t\t\tel._ffz_links.innerHTML = '';\n\t\t}\n\n\t\t// This is awful, but it works.\n\t\tlet channel = null;\n\t\tthis.fine.searchNode(react, node => {\n\t\t\tlet state = node?.memoizedState, i = 0;\n\t\t\twhile(state != null && channel == null && i < 50 ) {\n\t\t\t\tchannel = state?.memoizedState?.current?.result?.data?.user ??\n\t\t\t\t\tstate?.memoizedState?.current?.previousData?.user;\n\n\t\t\t\tif ( !channel?.lastBroadcast?.game )\n\t\t\t\t\tchannel = null;\n\n\t\t\t\tif ( ! channel )\n\t\t\t\t\tstate = state?.next;\n\t\t\t\ti++;\n\t\t\t}\n\t\t\treturn channel != null;\n\t\t});\n\n\t\tconst game = channel?.lastBroadcast?.game,\n\t\t\ttitle = channel?.lastBroadcast?.title;\n\n\t\tif (game?.id !== el._ffz_game_cache || title !== el._ffz_title_cache)\n\t\t\tthis.settings.updateContext({\n\t\t\t\tcategory: game?.displayName,\n\t\t\t\tcategoryID: game?.id,\n\t\t\t\ttitle\n\t\t\t});\n\n\t\t// TODO: See if we can read this data directly from Apollo's cache.\n\t\t// Also, test how it works with videos and clips.\n\t\t/*const raw_game = el.querySelector('a[data-a-target=\"stream-game-link\"]')?.textContent;\n\t\tif ( ! el._ffz_game_cache_updating && el._ffz_game_cache !== raw_game ) {\n\t\t\tel._ffz_game_cache_updating = true;\n\t\t\tel._ffz_game_cache = raw_game;\n\n\t\t\tthis.twitch_data.getUserGame(props.channelID, props.channelLogin).then(game => {\n\t\t\t\tel._ffz_game_cache_updating = false;\n\t\t\t\tthis.settings.updateContext({\n\t\t\t\t\tcategory: game?.displayName,\n\t\t\t\t\tcategoryID: game?.id\n\t\t\t\t})\n\t\t\t}).catch(() => {\n\t\t\t\tel._ffz_game_cache_updating = false;\n\t\t\t});\n\t\t}\n\n\t\tconst other_props = react.child.child?.child?.child?.child?.child?.child?.child?.child?.child?.memoizedProps,\n\t\t\ttitle = other_props?.title;\n\n\t\tif ( title !== el._ffz_title_cache ) {\n\t\t\tel._ffz_title_cache = title;\n\t\t\tthis.settings.updateContext({\n\t\t\t\ttitle\n\t\t\t});\n\t\t}*/\n\n\t\t//if ( ! this.settings.get('channel.hosting.enable') && props.hostLogin )\n\t\t//\tthis.setHost(props.channelID, props.channelLogin, null, null);\n\n\t\tthis.updateSubscription(props.channelID, props.channelLogin);\n\t\tthis.updateMetadata(el);\n\n\t\tthis.emit(':update-bar', el, props, channel);\n\t}\n\n\tremoveBar(el) {\n\t\tthis.updateSubscription(null, null);\n\n\t\tif ( el._ffz_cont )\n\t\t\tel._ffz_cont.classList.remove('ffz--meta-tray');\n\n\t\tel._ffz_cont = null;\n\t\tif ( el._ffz_meta_timers ) {\n\t\t\tfor(const val of Object.values(el._ffz_meta_timers))\n\t\t\t\tclearTimeout(val);\n\n\t\t\tel._ffz_meta_timers = null;\n\t\t}\n\n\t\tel._ffz_update = null;\n\t}\n\n\tupdateMetadata(el, keys) {\n\t\tconst cont = el._ffz_cont,\n\t\t\treact = this.fine.getReactInstance(el);\n\t\tlet props = react?.memoizedProps?.children?.props;\n\t\tif ( props && ! props.channelID )\n\t\t\tprops = props.children?.props;\n\n\t\tif ( ! cont || ! document.contains(cont) || ! props || ! props.channelID )\n\t\t\treturn;\n\n\t\tif ( ! keys )\n\t\t\tkeys = this.metadata.keys;\n\t\telse if ( ! Array.isArray(keys) )\n\t\t\tkeys = [keys];\n\n\t\tconst timers = el._ffz_meta_timers = el._ffz_meta_timers || {},\n\t\t\trefresh_fn = key => this.updateMetadata(el, key),\n\t\t\tdata = {\n\t\t\t\tchannel: {\n\t\t\t\t\tid: props.channelID,\n\t\t\t\t\tlogin: props.channelLogin,\n\t\t\t\t\tdisplay_name: props.displayName,\n\t\t\t\t\tlive: props.isLive && ! props.videoID && ! props.clipSlug,\n\t\t\t\t\tvideo: !!(props.videoID || props.clipSlug),\n\t\t\t\t\tlive_since: props.liveSince\n\t\t\t\t},\n\t\t\t\tprops,\n\t\t\t\t/*hosted: {\n\t\t\t\t\tlogin: props.hostLogin,\n\t\t\t\t\tdisplay_name: props.hostDisplayName\n\t\t\t\t},*/\n\t\t\t\tel,\n\t\t\t\tgetViewerCount: () => {\n\t\t\t\t\tconst thing = cont.querySelector('p[data-a-target=\"animated-channel-viewers-count\"]'),\n\t\t\t\t\t\tr = thing && this.fine.getReactInstance(thing),\n\t\t\t\t\t\tc = r?.memoizedProps?.children;\n\n\t\t\t\t\t// Sometimes, on early loads, the animated element\n\t\t\t\t\t// is actually a static string.\n\t\t\t\t\tif ( typeof c === 'string' && /^[0-9,.]+$/.test(c) ) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst val = parseInt(c.replace(/,/, ''), 10);\n\t\t\t\t\t\t\tif ( ! isNaN(val) && isFinite(val) && val > 0 )\n\t\t\t\t\t\t\t\treturn val;\n\t\t\t\t\t\t} catch(err) { /* no-op */ }\n\t\t\t\t\t}\n\n\t\t\t\t\tconst p = c?.props;\n\t\t\t\t\tif ( p && p.value != null )\n\t\t\t\t\t\treturn p.value;\n\n\t\t\t\t\treturn 0;\n\t\t\t\t},\n\t\t\t\tgetUserSelfImmediate: cb => {\n\t\t\t\t\tconst ret = this.getUserSelf(el, props.channelID, true);\n\t\t\t\t\tif ( ret && ret.then ) {\n\t\t\t\t\t\tret.then(cb);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn ret;\n\t\t\t\t},\n\t\t\t\tgetUserSelf: () => this.getUserSelf(el, props.channelID),\n\t\t\t\tgetBroadcastID: () => this.getBroadcastID(el, props.channelID)\n\t\t\t};\n\n\t\tfor(const key of keys)\n\t\t\tthis.metadata.renderLegacy(key, data, cont, timers, refresh_fn);\n\t}\n\n\n\tupdateRoot(el) {\n\t\tconst root = this.fine.getReactInstance(el);\n\n\t\tlet channel = null, node = root, j=0, i=0;\n\t\twhile(node != null && channel == null && j < 10) {\n\t\t\tlet state = node?.memoizedState;\n\t\t\ti=0;\n\t\t\twhile(state != null && channel == null && i < 50) {\n\t\t\t\tchannel = state?.memoizedState?.current?.result?.data?.userOrError ??\n\t\t\t\t\tstate?.memoizedState?.current?.previousData?.userOrError;\n\n\t\t\t\tif ( ! channel )\n\t\t\t\t\tstate = state?.next;\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tnode = node?.return;\n\t\t\tj++;\n\t\t}\n\n\t\tif ( channel && channel.id ) {\n\t\t\tthis.updateChannelColor(channel.primaryColorHex);\n\n\t\t\tthis.settings.updateContext({\n\t\t\t\tchannel: channel.login,\n\t\t\t\tchannelID: channel.id,\n\t\t\t\tchannelColor: channel.primaryColorHex\n\t\t\t});\n\n\t\t} else\n\t\t\tthis.removeRoot();\n\t}\n\n\tremoveRoot() {\n\t\tthis.updateChannelColor();\n\t\tthis.settings.updateContext({\n\t\t\tchannel: null,\n\t\t\tchannelID: null,\n\t\t\tchannelColor: null\n\t\t});\n\t}\n\n\tupdateChannelColor(color) {\n\t\tlet parsed = color && Color.RGBA.fromHex(color);\n\t\tif ( ! parsed )\n\t\t\tparsed = Color.RGBA.fromHex('9147FF');\n\n\t\tif ( parsed ) {\n\t\t\tthis.css_tweaks.setVariable('channel-color', parsed.toCSS());\n\t\t\tthis.css_tweaks.setVariable('channel-color-20', parsed._a(0.2).toCSS());\n\t\t\tthis.css_tweaks.setVariable('channel-color-30', parsed._a(0.3).toCSS());\n\t\t} else {\n\t\t\tthis.css_tweaks.deleteVariable('channel-color');\n\t\t\tthis.css_tweaks.deleteVariable('channel-color-20');\n\t\t\tthis.css_tweaks.deleteVariable('channel-color-30');\n\t\t}\n\t}\n\n\tgetUserSelf(el, channel_id, no_promise) {\n\t\tconst cache = el._ffz_self_cache = el._ffz_self_cache || {};\n\t\tif ( channel_id === cache.channel_id ) {\n\t\t\tif ( Date.now() - cache.saved < 60000 ) {\n\t\t\t\tif ( no_promise )\n\t\t\t\t\treturn cache.data;\n\t\t\t\treturn Promise.resolve(cache.data);\n\t\t\t}\n\t\t}\n\n\t\treturn new Promise(async (s, f) => {\n\t\t\tif ( cache.updating ) {\n\t\t\t\tcache.updating.push([s, f]);\n\t\t\t\treturn ;\n\t\t\t}\n\n\t\t\tcache.channel_id = channel_id;\n\t\t\tcache.updating = [[s,f]];\n\t\t\tlet data, err;\n\n\t\t\ttry {\n\t\t\t\tdata = await this.twitch_data.getUserSelf(channel_id);\n\t\t\t} catch(error) {\n\t\t\t\tdata = null;\n\t\t\t\terr = error;\n\t\t\t}\n\n\t\t\tconst waiters = cache.updating;\n\t\t\tcache.updating = null;\n\n\t\t\tif ( cache.channel_id !== channel_id ) {\n\t\t\t\terr = new Error('Outdated');\n\t\t\t\tcache.channel_id = null;\n\t\t\t\tcache.data = null;\n\t\t\t\tcache.saved = 0;\n\t\t\t\tfor(const pair of waiters)\n\t\t\t\t\tpair[1](err);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcache.data = data;\n\t\t\tcache.saved = Date.now();\n\n\t\t\tfor(const pair of waiters)\n\t\t\t\terr ? pair[1](err) : pair[0](data);\n\t\t});\n\t}\n\n\tgetBroadcastID(el, channel_id) {\n\t\tconst cache = el._ffz_bcast_cache = el._ffz_bcast_cache || {};\n\t\tif ( channel_id === cache.channel_id ) {\n\t\t\tif ( Date.now() - cache.saved < 60000 )\n\t\t\t\treturn Promise.resolve(cache.broadcast_id);\n\t\t}\n\n\t\treturn new Promise(async (s, f) => {\n\t\t\tif ( cache.updating ) {\n\t\t\t\tcache.updating.push([s, f]);\n\t\t\t\treturn ;\n\t\t\t}\n\n\t\t\tcache.channel_id = channel_id;\n\t\t\tcache.updating = [[s,f]];\n\t\t\tlet id, err;\n\n\t\t\ttry {\n\t\t\t\tid = await this.twitch_data.getBroadcastID(channel_id);\n\t\t\t} catch(error) {\n\t\t\t\tid = null;\n\t\t\t\terr = error;\n\t\t\t}\n\n\t\t\tconst waiters = cache.updating;\n\t\t\tcache.updating = null;\n\n\t\t\tif ( cache.channel_id !== channel_id ) {\n\t\t\t\terr = new Error('Outdated');\n\t\t\t\tcache.channel_id = null;\n\t\t\t\tcache.broadcast_id = null;\n\t\t\t\tcache.saved = 0;\n\t\t\t\tfor(const pair of waiters)\n\t\t\t\t\tpair[1](err);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcache.broadcast_id = id;\n\t\t\tcache.saved = Date.now();\n\n\t\t\tfor(const pair of waiters)\n\t\t\t\terr ? pair[1](err) : pair[0](id);\n\t\t});\n\t}\n}\n","'use strict';\n\n// ============================================================================\n// Chat Scroller\n// ============================================================================\n\nimport Twilight from 'site';\nimport Module from 'utilities/module';\n\nconst SCROLL_EVENTS = [\n\t'touchmove',\n\t'scroll',\n\t'wheel',\n\t'mousewheel',\n\t'DOMMouseScroll'\n];\n\nlet last_id = 0;\n\nexport default class Scroller extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('settings');\n\t\tthis.inject('i18n');\n\t\tthis.inject('chat');\n\t\tthis.inject('site');\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site.web_munch');\n\n\t\tthis.ChatScroller = this.fine.define(\n\t\t\t'chat-scroller',\n\t\t\tn => n.saveScrollRef && n.handleScrollEvent && ! n.renderLines && n.resume,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.settings.add('chat.scroller.freeze', {\n\t\t\tdefault: 0,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Behavior >> Scrolling',\n\t\t\t\ttitle: 'Pause Chat Scrolling',\n\t\t\t\tdescription: 'Automatically stop chat from scrolling when moving the mouse over it or holding a key.\\n\\n**Note:** Scrolling up in chat will always prevent automatic scrolling, regardless of this setting.',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Use Twitch Setting'},\n\t\t\t\t\t{value: 1, title: 'On Hover'},\n\t\t\t\t\t{value: 2, title: 'When Ctrl is Held'},\n\t\t\t\t\t{value: 3, title: 'When Meta is Held'},\n\t\t\t\t\t{value: 4, title: 'When Alt is Held'},\n\t\t\t\t\t{value: 5, title: 'When Shift is Held'},\n\t\t\t\t\t{value: 6, title: 'Ctrl or Hover'},\n\t\t\t\t\t{value: 7, title: 'Meta or Hover'},\n\t\t\t\t\t{value: 8, title: 'Alt or Hover'},\n\t\t\t\t\t{value: 9, title: 'Shift or Hover'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.scroller.freeze-requires-hover', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Behavior >> Scrolling',\n\t\t\t\ttitle: 'Require the mouse to be over chat to freeze with a hotkey.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.scroller.hover-delay', {\n\t\t\tdefault: 750,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Behavior >> Scrolling',\n\t\t\t\ttitle: 'Hover Timeout',\n\t\t\t\tdescription: 'Chat will only remain frozen due to mouse hovering for this long after the mouse stops moving.',\n\t\t\t\tcomponent: 'setting-combo-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 250, title: '0.25 Seconds'},\n\t\t\t\t\t{value: 500, title: '0.50 Seconds'},\n\t\t\t\t\t{value: 750, title: '0.75 Seconds'},\n\t\t\t\t\t{value: 1000, title: '1 Second'},\n\t\t\t\t\t{value: 2500, title: '2.5 Seconds'},\n\t\t\t\t\t{value: 5000, title: '5 Seconds'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.scroller.smooth-scroll', {\n\t\t\tdefault: 0,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Behavior >> Scrolling',\n\t\t\t\ttitle: 'Smooth Scrolling',\n\t\t\t\tdescription: '**Note:** This may not behave well depending on your browser. Disable this if you encounter issues.\\n\\nSmoothly slide new chat messages into view. Speed will increase as necessary to keep up with chat.',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Disabled'},\n\t\t\t\t\t{value: 1, title: 'Slow'},\n\t\t\t\t\t{value: 2, title: 'Medium'},\n\t\t\t\t\t{value: 3, title: 'Fast'},\n\t\t\t\t\t{value: 4, title: 'Very Fast'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateUseKeys() {\n\t\tconst old_use = this.use_keys;\n\t\tthis.use_keys = false;\n\t\tfor(const act of this.chat.context.get('chat.actions.inline'))\n\t\t\tif ( act && act.display && act.display.keys ) {\n\t\t\t\tthis.use_keys = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\tfor(const act of this.chat.context.get('chat.actions.hover'))\n\t\t\tif ( act && act.display && act.display.keys ) {\n\t\t\t\tthis.use_keys = true;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\tif ( this.use_keys !== old_use ) {\n\t\t\tfor(const inst of this.ChatScroller.instances)\n\t\t\t\tinst && inst.ffzUpdateKeys && inst.ffzUpdateKeys();\n\t\t}\n\t}\n\n\tasync onEnable() {\n\t\tthis.on('i18n:update', () => this.ChatScroller.forceUpdate());\n\n\t\tthis.chat.context.on('changed:chat.actions.inline', this.updateUseKeys, this);\n\t\tthis.updateUseKeys();\n\n\t\tthis.pause_hover = this.chat.context.get('chat.scroller.freeze-requires-hover');\n\t\tthis.chat.context.on('changed:chat.scroller.freeze-requires-hover', val => {\n\t\t\tthis.pause_hover = val;\n\n\t\t\tfor(const inst of this.ChatScroller.instances)\n\t\t\t\tinst.ffzMaybeUnpause();\n\t\t})\n\n\t\tthis.pause_delay = this.chat.context.get('chat.scroller.hover-delay');\n\t\tthis.chat.context.on('changed:chat.scroller.hover-delay', val => {\n\t\t\tthis.pause_delay = val;\n\n\t\t\tfor(const inst of this.ChatScroller.instances)\n\t\t\t\tinst.ffzMaybeUnpause();\n\t\t})\n\n\t\tthis.pause = this.chat.context.get('chat.scroller.freeze');\n\t\tthis.chat.context.on('changed:chat.scroller.freeze', val => {\n\t\t\tthis.pause = val;\n\n\t\t\tfor(const inst of this.ChatScroller.instances)\n\t\t\t\tinst.ffzMaybeUnpause();\n\t\t});\n\n\t\tthis.smooth_scroll = this.chat.context.get('chat.scroller.smooth-scroll');\n\t\tthis.chat.context.on('changed:chat.scroller.smooth-scroll', val => {\n\t\t\tthis.smooth_scroll = val;\n\n\t\t\tfor(const inst of this.ChatScroller.instances)\n\t\t\t\tinst.ffzSetSmoothScroll(val);\n\t\t});\n\n\t\tconst t = this,\n\t\t\tReact = await this.site.findReact(),\n\t\t\tcreateElement = React?.createElement;\n\n\t\tif ( ! createElement )\n\t\t\treturn t.log.warn(`Unable to get React.`);\n\n\t\tthis.ChatScroller.ready((cls, instances) => {\n\t\t\tconst old_catch = cls.prototype.componentDidCatch,\n\t\t\t\told_render = cls.prototype.render;\n\n\t\t\t// Try catching errors. With any luck, maybe we can\n\t\t\t// recover from the error when we re-build?\n\t\t\tcls.prototype.componentDidCatch = function(err, info) {\n\t\t\t\t// Don't log infinitely if stuff gets super screwed up.\n\t\t\t\tconst errs = this.state.ffz_errors || 0;\n\t\t\t\tif ( errs < 100 ) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tffz_errors: errs + 1,\n\t\t\t\t\t\tffz_total_errors: (this.state.ffz_total_errors||0) + 1\n\t\t\t\t\t});\n\n\t\t\t\t\tt.log.capture(err, {extra: info});\n\t\t\t\t\tt.log.info('Error within Chat', err, info, errs);\n\t\t\t\t}\n\n\t\t\t\tif ( old_catch )\n\t\t\t\t\treturn old_catch.call(this, err, info);\n\t\t\t}\n\n\t\t\tcls.prototype.ffzZeroErrors = function() {\n\t\t\t\tthis.setState({ffz_errors: 0});\n\t\t\t}\n\n\t\t\tcls.prototype.render = function() {\n\t\t\t\tif ( this.state.ffz_errors > 0 ) {\n\t\t\t\t\tlet timer;\n\t\t\t\t\tconst auto = this.state.ffz_total_errors < 10,\n\t\t\t\t\t\thandler = () => {\n\t\t\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\t\t\tthis.ffzZeroErrors();\n\t\t\t\t\t\t}\n\n\t\t\t\t\tif ( auto )\n\t\t\t\t\t\ttimer = setTimeout(handler, 250);\n\n\t\t\t\t\tif ( ! createElement )\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\treturn createElement('div', {\n\t\t\t\t\t\tclassName: 'tw-border-l tw-c-background-alt-2 tw-c-text-base tw-full-width tw-full-height tw-align-items-center tw-flex tw-flex-column tw-justify-content-center tw-relative'\n\t\t\t\t\t}, [\n\t\t\t\t\t\tcreateElement('div', {className: 'tw-mg-b-1'}, 'There was an error displaying chat.'),\n\t\t\t\t\t\t! auto && createElement('button', {\n\t\t\t\t\t\t\tclassName: 'tw-button',\n\t\t\t\t\t\t\tonClick: handler\n\t\t\t\t\t\t}, createElement('span', {className: 'tw-button__text'}, 'Try Again'))\n\t\t\t\t\t]);\n\n\t\t\t\t} else {\n\t\t\t\t\tconst out = old_render.call(this);\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst children = out?.props?.children?.props?.children,\n\t\t\t\t\t\t\tchild = children?.[2];\n\n\t\t\t\t\t\tif ( child?.type?.displayName === 'ChatPausedFooter' )\n\t\t\t\t\t\t\tchildren[2] = this.ffzRenderFooter();\n\t\t\t\t\t} catch(err) { /* no-op */ }\n\n\t\t\t\t\treturn out;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcls.prototype.ffzInstallCleaner = function() {\n\t\t\t\tif ( this._ffz_cleaner )\n\t\t\t\t\treturn;\n\n\t\t\t\tthis._ffz_cleaner = this.ffzOnClean.bind(this);\n\t\t\t\tthis._ffz_clean_timer = setInterval(this._ffz_cleaner, 60_000);\n\t\t\t}\n\n\t\t\tcls.prototype.ffzOnClean = function() {\n\t\t\t\tconst el = t.fine.getChildNode(this);\n\t\t\t\tif (!el)\n\t\t\t\t\treturn this.ffzRemoveCleaner();\n\n\t\t\t\trequestAnimationFrame(() => t.cleanMessages(el.querySelector('.chat-scrollable-area__message-container')));\n\t\t\t}\n\n\t\t\tcls.prototype.ffzRemoveCleaner = function() {\n\t\t\t\tif ( this._ffz_clean_timer )\n\t\t\t\t\tclearInterval(this._ffz_clean_timer);\n\n\t\t\t\tthis._ffz_clean_timer = this._ffz_cleaner = null;\n\t\t\t}\n\n\t\t\tcls.prototype.ffzInstallHandler = function() {\n\t\t\t\tif ( this._ffz_installed )\n\t\t\t\t\treturn;\n\n\t\t\t\tthis._ffz_installed = true;\n\t\t\t\tconst inst = this;\n\n\t\t\t\tinst.ffz_oldScrollEvent = inst.handleScrollEvent;\n\t\t\t\tinst.ffz_oldScroll = inst.scrollToBottom;\n\n\t\t\t\tinst.ffz_acting = false;\n\t\t\t\tinst.ffz_outside = true;\n\t\t\t\tinst._ffz_accessor = `_ffz_contains_${last_id++}`;\n\n\t\t\t\tt.on('tooltips:hover', this.ffzTooltipHover, this);\n\t\t\t\tt.on('tooltips:leave', this.ffzTooltipLeave, this);\n\n\t\t\t\tinst.scrollToBottom = function() {\n\t\t\t\t\tif ( inst._ffz_scroll_request )\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tinst._ffz_scroll_request = requestAnimationFrame(inst._scrollToBottom);\n\t\t\t\t}\n\n\t\t\t\tinst._scrollToBottom = function() {\n\t\t\t\t\tinst._ffz_scroll_request = null;\n\t\t\t\t\t//inst._ffz_snapshot = null;\n\t\t\t\t\tif ( ! inst.state.isPaused ) {\n\t\t\t\t\t\tif ( inst.ffz_smooth_scroll && ! inst._ffz_one_fast_scroll )\n\t\t\t\t\t\t\tinst.ffzSmoothScroll();\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tinst._ffz_one_fast_scroll = false;\n\t\t\t\t\t\t\tinst.ffz_oldScroll();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tinst.handleScrollEvent = function(event) {\n\t\t\t\t\tif ( ! inst.scrollRef?.scrollContent )\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tif ( !(event.which > 0 || event.type === 'mousewheel' || event.type === 'wheel' || event.type === 'touchmove') )\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// How far are we scrolled up?\n\t\t\t\t\tconst scroller = inst.scrollRef.scrollContent,\n\t\t\t\t\t\toffset = scroller.scrollHeight - scroller.scrollTop - scroller.offsetHeight,\n\t\t\t\t\t\tscrolled_up = offset > 10;\n\n\t\t\t\t\tif ( scrolled_up !== inst.state.ffz_scrolled_up )\n\t\t\t\t\t\tinst.setState({ffz_scrolled_up: scrolled_up});\n\n\t\t\t\t\tif ( inst.state.isPaused && scrolled_up )\n\t\t\t\t\t\tinst.setLoadMoreEnabled(true);\n\n\t\t\t\t\tif ( inst.state.isPaused && ! scrolled_up )\n\t\t\t\t\t\tinst.ffzMaybeUnpause();\n\t\t\t\t\telse if ( ! inst.state.isPaused && scrolled_up )\n\t\t\t\t\t\tinst.pause();\n\t\t\t\t}\n\n\t\t\t\tconst old_resume = inst.resume;\n\n\t\t\t\tinst.ffzFastResume = function() {\n\t\t\t\t\tinst._ffz_one_fast_scroll = true;\n\t\t\t\t\tinst.resume();\n\t\t\t\t}\n\n\t\t\t\tinst.resume = function() {\n\t\t\t\t\tinst.setState({ffz_scrolled_up: false});\n\t\t\t\t\told_resume.call(this);\n\t\t\t\t}\n\n\t\t\t\t// Event Registration\n\n\t\t\t\tconst Mousetrap = t.web_munch.getModule('mousetrap') || window.Mousetrap;\n\t\t\t\tif ( Mousetrap != null ) {\n\t\t\t\t\tMousetrap.unbind('alt', 'keydown');\n\t\t\t\t\tMousetrap.unbind('alt', 'keyup');\n\t\t\t\t}\n\n\t\t\t\tinst.ffzHandleKey = inst.ffzHandleKey.bind(inst);\n\t\t\t\twindow.addEventListener('keydown', inst.ffzHandleKey);\n\t\t\t\twindow.addEventListener('keyup', inst.ffzHandleKey);\n\n\t\t\t\tinst.hoverPause = inst.ffzMouseMove.bind(inst);\n\t\t\t\tinst.hoverResume = inst.ffzMouseLeave.bind(inst);\n\n\t\t\t\tconst node = t.fine.getChildNode(inst);\n\t\t\t\tif ( node )\n\t\t\t\t\tnode.addEventListener('mousemove', inst.hoverPause);\n\n\t\t\t\tconst scroller = this.scrollRef?.scrollContent;\n\t\t\t\tif ( scroller ) {\n\t\t\t\t\tfor(const event of SCROLL_EVENTS) {\n\t\t\t\t\t\tscroller.removeEventListener(event, inst.ffz_oldScrollEvent);\n\t\t\t\t\t\tscroller.addEventListener(event, inst.handleScrollEvent);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// We need to refresh the element to make sure it's using the correct\n\t\t\t\t// event handlers for mouse enter / leave.\n\t\t\t\tinst.forceUpdate();\n\t\t\t\tt.emit('site:dom-update', 'chat-scroller', inst);\n\t\t\t}\n\n\t\t\tcls.prototype.ffzSmoothScroll = function() {\n\t\t\t\tif ( this._ffz_smooth_animation )\n\t\t\t\t\tcancelAnimationFrame(this._ffz_smooth_animation);\n\n\t\t\t\tthis.ffz_is_smooth_scrolling = true;\n\n\t\t\t\t// Step setting value is # pixels to scroll per 10ms.\n\t\t\t\t// 1 is pretty slow, 2 medium, 3 fast, 4 very fast.\n\t\t\t\tlet step = this.ffz_smooth_scroll,\n\t\t\t\t\told_time = performance.now();\n\n\t\t\t\tconst scroll_content = this.scrollRef?.scrollContent;\n\t\t\t\tif ( ! scroll_content )\n\t\t\t\t\treturn;\n\n\t\t\t\tconst target_top = scroll_content.scrollHeight - scroll_content.clientHeight,\n\t\t\t\t\tdifference = target_top - scroll_content.scrollTop;\n\n\t\t\t\t// If we are falling behind speed us up\n\t\t\t\tif ( difference > scroll_content.clientHeight ) {\n\t\t\t\t\t// we are a full scroll away, just jump there\n\t\t\t\t\tstep = difference;\n\n\t\t\t\t} else if ( difference > 200 ) {\n\t\t\t\t\t// we are starting to fall behind, speed it up a bit\n\t\t\t\t\tstep += step * Math.floor(difference / 200);\n\t\t\t\t}\n\n\t\t\t\tconst smoothAnimation = () => {\n\t\t\t\t\tif ( this.state.isPaused )\n\t\t\t\t\t\treturn this.ffz_is_smooth_scrolling = false;\n\n\t\t\t\t\t// See how much time has passed to get a step based off the delta\n\t\t\t\t\tconst current_time = performance.now(),\n\t\t\t\t\t\tdelta = current_time - old_time,\n\t\t\t\t\t\tcurrent_step = step * (delta / 10);\n\n\t\t\t\t\t// we need to move at least one full pixel for scrollTop to do anything in this delta.\n\t\t\t\t\tif ( current_step >= 1 ) {\n\t\t\t\t\t\tconst scroll_top = scroll_content.scrollTop,\n\t\t\t\t\t\t\tnext_top = scroll_top + current_step,\n\t\t\t\t\t\t\ttarget_top = scroll_content.scrollHeight - scroll_content.clientHeight;\n\n\t\t\t\t\t\told_time = current_time;\n\t\t\t\t\t\tif ( next_top < target_top ) {\n\t\t\t\t\t\t\tscroll_content.scrollTop = scroll_top + current_step;\n\t\t\t\t\t\t\tthis._ffz_smooth_animation = requestAnimationFrame(smoothAnimation);\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// We've reached the bottom.\n\t\t\t\t\t\t\tscroll_content.scrollTop = target_top;\n\t\t\t\t\t\t\tthis.ffz_is_smooth_scrolling = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// The frame happened so quick since last update that we haven't moved a full pixel.\n\t\t\t\t\t\t// Just wait.\n\t\t\t\t\t\tthis._ffz_smooth_animation = requestAnimationFrame(smoothAnimation);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsmoothAnimation();\n\t\t\t}\n\n\t\t\tcls.prototype.ffzSetSmoothScroll = function(value) {\n\t\t\t\tthis.ffz_smooth_scroll = value;\n\t\t\t\tthis.ffzMaybeUnpause();\n\t\t\t}\n\n\t\t\t// Event Handling\n\n\t\t\tcls.prototype.ffzReadKeysFromEvent = function(event) {\n\t\t\t\tif ( event.altKey === this.ffz_alt &&\n\t\t\t\t\t\tevent.shiftKey === this.ffz_shift &&\n\t\t\t\t\t\tevent.ctrlKey === this.ffz_ctrl &&\n\t\t\t\t\t\tevent.metaKey === this.ffz_meta )\n\t\t\t\t\treturn false;\n\n\t\t\t\tthis.ffz_alt = event.altKey;\n\t\t\t\tthis.ffz_shift = event.shiftKey;\n\t\t\t\tthis.ffz_ctrl = event.ctrlKey;\n\t\t\t\tthis.ffz_meta = event.metaKey;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tcls.prototype.ffzHandleKey = function(event) {\n\t\t\t\tif ( ! this.ffzReadKeysFromEvent(event) )\n\t\t\t\t\treturn;\n\n\t\t\t\tthis.ffzUpdateKeyTags();\n\n\t\t\t\tif ( (t.pause_hover && this.ffz_outside) || this.ffzGetMode() < 2 )\n\t\t\t\t\treturn;\n\n\t\t\t\tconst should_pause = this.ffzShouldBePaused(),\n\t\t\t\t\tchanged = should_pause !== this.state.isPaused;\n\n\t\t\t\tif ( changed )\n\t\t\t\t\tif ( should_pause ) {\n\t\t\t\t\t\tthis.pause();\n\t\t\t\t\t\tif ( ! this.state.ffz_scrolled_up )\n\t\t\t\t\t\t\tthis.setLoadMoreEnabled(false);\n\t\t\t\t\t} else\n\t\t\t\t\t\tthis.resume();\n\t\t\t}\n\n\t\t\tcls.prototype.ffzInstallHoverTimer = function() {\n\t\t\t\tif ( this._ffz_hover_timer )\n\t\t\t\t\treturn;\n\n\t\t\t\tthis._ffz_hover_timer = setInterval(() => {\n\t\t\t\t\tif ( this.state.isPaused && this.ffzShouldBePaused() )\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tthis.ffzMaybeUnpause();\n\t\t\t\t}, 50);\n\t\t\t}\n\n\t\t\tcls.prototype.ffzMouseMove = function(event) {\n\t\t\t\tthis.ffz_last_move = Date.now();\n\t\t\t\tconst was_outside = this.ffz_outside;\n\t\t\t\tthis.ffz_outside = false;\n\n\t\t\t\tif ( this._ffz_outside_timer ) {\n\t\t\t\t\tclearTimeout(this._ffz_outside_timer);\n\t\t\t\t\tthis._ffz_outside_timer = null;\n\t\t\t\t}\n\n\t\t\t\tconst keys_updated = this.ffzReadKeysFromEvent(event);\n\n\t\t\t\t// If nothing changed, stop processing.\n\t\t\t\tif ( ! keys_updated && event.screenX === this.ffz_sx && event.screenY === this.ffz_sy ) {\n\t\t\t\t\tif ( was_outside )\n\t\t\t\t\t\tthis.ffzUpdateKeyTags();\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.ffz_sx = event.screenX;\n\t\t\t\tthis.ffz_sy = event.screenY;\n\n\t\t\t\tif ( keys_updated || was_outside )\n\t\t\t\t\tthis.ffzUpdateKeyTags();\n\n\t\t\t\tconst should_pause = this.ffzShouldBePaused(),\n\t\t\t\t\tchanged = should_pause !== this.state.isPaused;\n\n\t\t\t\tif ( changed )\n\t\t\t\t\tif ( should_pause ) {\n\t\t\t\t\t\tthis.pause();\n\t\t\t\t\t\tthis.ffzInstallHoverTimer();\n\t\t\t\t\t\tif ( ! this.state.ffz_scrolled_up )\n\t\t\t\t\t\t\tthis.setLoadMoreEnabled(false);\n\n\t\t\t\t\t} else\n\t\t\t\t\t\tthis.resume();\n\t\t\t}\n\n\t\t\tcls.prototype.ffzMouseLeave = function() {\n\t\t\t\tthis.ffz_outside = true;\n\t\t\t\tif ( this._ffz_outside_timer )\n\t\t\t\t\tclearTimeout(this._ffz_outside_timer);\n\n\t\t\t\tthis._ffz_outside_timer = setTimeout(() => this.ffzMaybeUnpause(), 64);\n\t\t\t\tthis.ffzUpdateKeyTags();\n\t\t\t}\n\n\t\t\tcls.prototype.ffzTooltipHover = function(target, tip, event) {\n\t\t\t\tif ( target[this._ffz_accessor] == null ) {\n\t\t\t\t\tconst scroller = this.scrollRef?.scrollContent;\n\t\t\t\t\ttarget[this._ffz_accessor] = scroller ? scroller.contains(target) : false;\n\t\t\t\t}\n\n\t\t\t\tif ( target[this._ffz_accessor] )\n\t\t\t\t\tthis.ffzMouseMove(event);\n\t\t\t}\n\n\t\t\tcls.prototype.ffzTooltipLeave = function(target) {\n\t\t\t\tif ( this.ffz_outside )\n\t\t\t\t\treturn;\n\n\t\t\t\tif ( target[this._ffz_accessor] == null ) {\n\t\t\t\t\tconst scroller = this.scrollRef?.scrollContent;\n\t\t\t\t\ttarget[this._ffz_accessor] = scroller ? scroller.contains(target) : false;\n\t\t\t\t}\n\n\t\t\t\tif ( target[this._ffz_accessor] )\n\t\t\t\t\tthis.ffzMouseLeave();\n\t\t\t}\n\n\t\t\t// Keyboard Stuff\n\n\t\t\tcls.prototype.ffzUpdateActing = function() {\n\t\t\t\tif ( ! this._ffz_key_frame_acting )\n\t\t\t\t\tthis._ffz_key_frame_acting = requestAnimationFrame(() => this.ffz_updateActing());\n\t\t\t}\n\n\t\t\tcls.prototype.ffz_updateActing = function() {\n\t\t\t\tthis._ffz_key_frame_acting = null;\n\n\t\t\t\tif ( ! this.scrollRef?.root )\n\t\t\t\t\treturn;\n\n\t\t\t\tthis.scrollRef.root.dataset.acting = this.ffz_acting;\n\t\t\t}\n\n\t\t\tcls.prototype.ffzUpdateKeyTags = function() {\n\t\t\t\tif ( ! this._ffz_key_frame )\n\t\t\t\t\tthis._ffz_key_frame = requestAnimationFrame(() => this.ffz_updateKeyTags());\n\t\t\t}\n\n\t\t\tcls.prototype.ffz_updateKeyTags = function() {\n\t\t\t\tthis._ffz_key_frame = null;\n\n\t\t\t\tif ( ! t.use_keys && this.ffz_use_keys === t.use_keys )\n\t\t\t\t\treturn;\n\n\t\t\t\tif ( ! this.scrollRef?.root )\n\t\t\t\t\treturn;\n\n\t\t\t\tthis.ffz_use_keys = t.use_keys;\n\t\t\t\tthis.scrollRef.root.classList.toggle('ffz--keys', t.use_keys);\n\n\t\t\t\tconst ds = this.scrollRef.root.dataset;\n\n\t\t\t\tif ( ! t.use_keys ) {\n\t\t\t\t\tdelete ds.alt;\n\t\t\t\t\tdelete ds.ctrl;\n\t\t\t\t\tdelete ds.shift;\n\t\t\t\t\tdelete ds.meta;\n\n\t\t\t\t} else {\n\t\t\t\t\tds.alt = ! this.ffz_outside && this.ffz_alt;\n\t\t\t\t\tds.ctrl = ! this.ffz_outside && this.ffz_ctrl;\n\t\t\t\t\tds.shift = ! this.ffz_outside && this.ffz_shift;\n\t\t\t\t\tds.meta = ! this.ffz_outside && this.ffz_meta;\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\t// Pause Stuff\n\n\t\t\tcls.prototype.ffzShouldBePaused = function(since) {\n\t\t\t\t// We may not have moved the mouse. If that's the case,\n\t\t\t\t// since should be zero.\n\t\t\t\tif ( since == null )\n\t\t\t\t\tsince = Date.now() - (this.ffz_last_move ?? Date.now());\n\n\t\t\t\tif ( this.state.ffz_scrolled_up )\n\t\t\t\t\treturn true;\n\n\t\t\t\tconst mode = this.ffzGetMode(),\n\t\t\t\t\trequire_hover = t.pause_hover;\n\n\t\t\t\treturn (! require_hover || ! this.ffz_outside) && (\n\t\t\t\t\t(this.ffz_acting) ||\n\t\t\t\t\t(this.ffz_ctrl  && (mode === 2 || mode === 6)) ||\n\t\t\t\t\t(this.ffz_meta  && (mode === 3 || mode === 7)) ||\n\t\t\t\t\t(this.ffz_alt   && (mode === 4 || mode === 8)) ||\n\t\t\t\t\t(this.ffz_shift && (mode === 5 || mode === 9)) ||\n\t\t\t\t\t(! this.ffz_outside && since < t.pause_delay && (mode === 1 || mode > 5))\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tcls.prototype.ffzGetMode = function() {\n\t\t\t\tlet mode = t.pause;\n\t\t\t\tif ( mode === 0 && ! this.props.mouseoverPausingDisabled ) {\n\t\t\t\t\tconst setting = this.props.pauseSetting;\n\t\t\t\t\tif ( setting === 'MOUSEOVER_ALTKEY' )\n\t\t\t\t\t\tmode = 8;\n\t\t\t\t\telse if ( setting === 'MOUSEOVER' )\n\t\t\t\t\t\tmode = 1;\n\t\t\t\t\telse if ( setting === 'ALTKEY' )\n\t\t\t\t\t\tmode = 4;\n\t\t\t\t}\n\n\t\t\t\treturn mode;\n\t\t\t}\n\n\t\t\tcls.prototype.ffzMaybeUnpause = function() {\n\t\t\t\tif ( this.state.isPaused && ! this._ffz_unpause_frame )\n\t\t\t\t\tthis._ffz_unpause_frame = requestAnimationFrame(() => {\n\t\t\t\t\t\tthis._ffz_unpause_frame = null;\n\t\t\t\t\t\tif ( this.state.isPaused && ! this.ffzShouldBePaused() )\n\t\t\t\t\t\t\tthis.resume();\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tcls.prototype.ffzRenderFooter = function() {\n\t\t\t\tlet msg, cls = '';\n\t\t\t\tif ( this.state.ffz_scrolled_up )\n\t\t\t\t\tmsg = t.i18n.t('chat.messages-below', 'Chat Paused Due to Scroll');\n\t\t\t\telse if ( this.state.isPaused ) {\n\t\t\t\t\tconst f = this.ffzGetMode(),\n\t\t\t\t\t\treason = this.ffz_acting ? t.i18n.t('chat.acting', 'Taking Action') :\n\t\t\t\t\t\t\tf === 2 ? t.i18n.t('key.ctrl', 'Ctrl Key') :\n\t\t\t\t\t\t\t\tf === 3 ? t.i18n.t('key.meta', 'Meta Key') :\n\t\t\t\t\t\t\t\t\tf === 4 ? t.i18n.t('key.alt', 'Alt Key') :\n\t\t\t\t\t\t\t\t\t\tf === 5 ? t.i18n.t('key.shift', 'Shift Key') :\n\t\t\t\t\t\t\t\t\t\t\tf === 6 ? t.i18n.t('key.ctrl_mouse', 'Ctrl or Mouse') :\n\t\t\t\t\t\t\t\t\t\t\t\tf === 7 ? t.i18n.t('key.meta_mouse', 'Meta or Mouse') :\n\t\t\t\t\t\t\t\t\t\t\t\t\tf === 8 ? t.i18n.t('key.alt_mouse', 'Alt or Mouse') :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tf === 9 ? t.i18n.t('key.shift_mouse', 'Shift or Mouse') :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tt.i18n.t('key.mouse', 'Mouse Movement');\n\n\t\t\t\t\tmsg = t.i18n.t('chat.paused', 'Chat Paused Due to {reason}', {reason});\n\t\t\t\t\tcls = 'ffz--freeze-indicator';\n\n\t\t\t\t} else\n\t\t\t\t\treturn createElement('div', {\n\t\t\t\t\t\tclassName: `chat-scroll-footer__placeholder tw-flex tw-justify-content-center tw-relative ${cls}`\n\t\t\t\t\t}, null);\n\n\t\t\t\treturn createElement('div', {\n\t\t\t\t\tclassName: `chat-scroll-footer__placeholder tw-flex tw-justify-content-center tw-relative ${cls}`\n\t\t\t\t}, createElement('div', {\n\t\t\t\t\tclassName: 'tw-absolute tw-border-radius-medium tw-bottom-0 tw-c-background-overlay tw-c-text-overlay tw-mg-b-1'\n\t\t\t\t}, createElement('button', {\n\t\t\t\t\tclassName: 'tw-align-items-center tw-align-middle tw-border-bottom-left-radius-medium tw-border-bottom-right-radius-medium tw-border-top-left-radius-medium tw-border-top-right-radius-medium ffz-core-button ffz-core-button--overlay ffz-core-button--text tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative',\n\t\t\t\t\t'data-a-target': 'chat-list-footer',\n\t\t\t\t\tonClick: this.ffzFastResume\n\t\t\t\t}, createElement('div', {\n\t\t\t\t\tclassName: 'tw-align-items-center ffz-core-button-label tw-flex tw-flex-grow-0'\n\t\t\t\t}, createElement('div', {\n\t\t\t\t\tclassName: 'tw-flex-grow-0'\n\t\t\t\t}, msg)))));\n\t\t\t}\n\n\t\t\t// Do the thing~\n\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.onMount(inst);\n\t\t});\n\n\t\tthis.ChatScroller.on('mount', this.onMount, this);\n\t\tthis.ChatScroller.on('unmount', this.onUnmount, this);\n\t}\n\n\n\tonMount(inst) {\n\t\tinst.ffzSetSmoothScroll(this.smooth_scroll);\n\t\tinst.ffzInstallHandler();\n\t\tinst.ffzInstallCleaner();\n\t}\n\n\tonUnmount(inst) { // eslint-disable-line class-methods-use-this\n\t\tthis.off('tooltips:hover', inst.ffzTooltipHover, inst);\n\t\tthis.off('tooltips:leave', inst.ffzTooltipLeave, inst);\n\n\t\tif ( inst._ffz_hover_timer ) {\n\t\t\tclearInterval(inst._ffz_hover_timer);\n\t\t\tinst._ffz_hover_timer = null;\n\t\t}\n\n\t\tif ( inst._ffz_outside_timer ) {\n\t\t\tclearTimeout(inst._ffz_outside_timer);\n\t\t\tinst._ffz_outside_timer = null;\n\t\t}\n\n\t\tinst.ffzRemoveCleaner();\n\n\t\twindow.removeEventListener('keydown', inst.ffzHandleKey);\n\t\twindow.removeEventListener('keyup', inst.ffzHandleKey);\n\t}\n\n\n\tcleanMessages(el) {\n\t\tconst react = ffz.site.fine.getReactInstance(el);\n\n\t\t// Make sure we have the right thing.\n\t\tif (!react || !Array.isArray(react.child?.memoizedProps))\n\t\t\treturn;\n\n\t\t// Find the first real child\n\t\tlet node = null,\n\t\t\tr = react.child,\n\t\t\ti = 0;\n\t\twhile(r && i < 10) {\n\t\t\tif (r.stateNode instanceof HTMLDivElement) {\n\t\t\t\tnode = r.stateNode;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tr = r.child;\n\t\t\ti++;\n\t\t}\n\n\t\tif (!node || node.parentElement !== el)\n\t\t\treturn;\n\n\t\tlet to_remove = node.previousElementSibling;\n\t\ti = 0;\n\n\t\twhile(to_remove) {\n\t\t\tconst removable = to_remove;\n\t\t\tto_remove = to_remove.previousElementSibling;\n\t\t\tremovable.remove();\n\t\t\ti++;\n\t\t}\n\n\t\tif (i > 0)\n\t\t\tthis.log.debug(`Removed ${i} dead chat lines from`, el);\n\t}\n\n\n}\n","'use strict';\n\n// ============================================================================\n// RichContent Component\n// ============================================================================\n\nimport Module from 'utilities/module';\nimport {timeout, has} from 'utilities/object';\n\nconst ERROR_IMAGE = 'https://static-cdn.jtvnw.net/emoticons/v1/58765/2.0';\n\nexport default class RichContent extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('chat');\n\t\tthis.inject('i18n');\n\t\tthis.inject('site');\n\n\t\tthis.RichContent = null;\n\t\tthis.has_tokenizer = false;\n\t}\n\n\tasync loadTokenizer() {\n\t\tif ( this.has_tokenizer )\n\t\t\treturn;\n\n\t\tthis.tokenizer = await import(/* webpackChunkName: 'rich_tokens' */ 'utilities/rich_tokens');\n\t\tthis.has_tokenizer = true;\n\t\treturn this.tokenizer;\n\t}\n\n\tasync onEnable() {\n\t\tconst t = this,\n\t\t\tReact = await this.site.findReact();\n\t\tif ( ! React )\n\t\t\treturn;\n\n\t\tconst createElement = React.createElement;\n\n\t\tthis.RichContent = class RichContent extends React.Component {\n\t\t\tconstructor(props) {\n\t\t\t\tsuper(props);\n\n\t\t\t\tthis.state = {\n\t\t\t\t\tloaded: false,\n\t\t\t\t\terror: false,\n\t\t\t\t\thas_tokenizer: t.has_tokenizer\n\t\t\t\t}\n\n\t\t\t\tif ( ! t.has_tokenizer )\n\t\t\t\t\tt.loadTokenizer().then(() => this.setState({...this.state, has_tokenizer: true}));\n\t\t\t}\n\n\t\t\tasync load(refresh = false) {\n\t\t\t\tthis.clearRefresh();\n\n\t\t\t\ttry {\n\t\t\t\t\tlet data = this.props.getData(refresh);\n\t\t\t\t\tif ( data instanceof Promise ) {\n\t\t\t\t\t\tconst to_wait = has(this.props, 'timeout') ? this.props.timeout : 1000;\n\t\t\t\t\t\tif ( to_wait )\n\t\t\t\t\t\t\tdata = await timeout(data, to_wait);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tdata = await data;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! data )\n\t\t\t\t\t\tdata = {\n\t\t\t\t\t\t\terror: {type: 'i18n', key: 'card.empty', phrase: 'No data was returned.'}\n\t\t\t\t\t\t}\n\n\t\t\t\t\tif ( data.error )\n\t\t\t\t\t\tdata = {\n\t\t\t\t\t\t\tshort: {\n\t\t\t\t\t\t\t\ttype: 'header',\n\t\t\t\t\t\t\t\timage: {type: 'image', url: ERROR_IMAGE},\n\t\t\t\t\t\t\t\ttitle: {type: 'i18n', key: 'card.error', phrase: 'An error occurred.'},\n\t\t\t\t\t\t\t\tsubtitle: data.error\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\tif ( data.refresh ) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tthis.clearRefresh();\n\n\t\t\t\t\t\t\tconst then = new Date(data.refresh).getTime(),\n\t\t\t\t\t\t\t\tdelta = then - Date.now();\n\n\t\t\t\t\t\t\tif ( delta > 0 )\n\t\t\t\t\t\t\t\tthis._refresh_timer = setTimeout(() => this.load(true), delta + (100 * Math.floor(Math.random() * 100)));\n\n\t\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\t\t/* no op */\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.setState(Object.assign({\n\t\t\t\t\t\tloaded: true,\n\t\t\t\t\t\turl: this.props.url,\n\t\t\t\t\t}, data));\n\n\t\t\t\t} catch(err) {\n\t\t\t\t\tif ( err.message !== 'timeout' )\n\t\t\t\t\t\tt.log.capture(err);\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\thas_tokenizer: t.has_tokenizer,\n\t\t\t\t\t\tloaded: true,\n\t\t\t\t\t\turl: this.props.url,\n\t\t\t\t\t\tshort: {\n\t\t\t\t\t\t\ttype: 'header',\n\t\t\t\t\t\t\timage: {type: 'image', url: ERROR_IMAGE},\n\t\t\t\t\t\t\ttitle: {type: 'i18n', key: 'card.error', phrase: 'An error occurred.'},\n\t\t\t\t\t\t\tsubtitle: String(err)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tclearRefresh() {\n\t\t\t\tif ( this._refresh_timer ) {\n\t\t\t\t\tclearTimeout(this._refresh_timer);\n\t\t\t\t\tthis._refresh_timer = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheckReload(url) {\n\t\t\t\tif ( ! url || (url && this.props.url === url) )\n\t\t\t\t\tthis.reload();\n\t\t\t}\n\n\t\t\treload(refresh = false) {\n\t\t\t\tthis.clearRefresh();\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tloaded: false,\n\t\t\t\t\terror: false,\n\t\t\t\t\thas_tokenizer: t.has_tokenizer\n\t\t\t\t}, () => this.load(refresh));\n\t\t\t}\n\n\t\t\tcomponentDidMount() {\n\t\t\t\tt.on('chat:update-link-resolver', this.checkReload, this);\n\n\t\t\t\tthis.load();\n\t\t\t}\n\n\t\t\tcomponentWillUnmount() {\n\t\t\t\tt.off('chat:update-link-resolver', this.checkReload, this);\n\t\t\t\tthis.clearRefresh();\n\t\t\t}\n\n\t\t\trenderCard() {\n\t\t\t\tif ( this.props.renderBody )\n\t\t\t\t\treturn this.props.renderBody(this.state, this, createElement);\n\n\t\t\t\treturn [\n\t\t\t\t\tthis.renderUnsafe(),\n\t\t\t\t\tthis.renderBody()\n\t\t\t\t];\n\t\t\t}\n\n\t\t\trenderUnsafe() {\n\t\t\t\tif ( ! this.state.unsafe )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst reasons = Array.from(new Set(this.state.urls.map(url => url.flags).flat())).join(', ').toLowerCase();\n\n\t\t\t\treturn (<div\n\t\t\t\t\tclass=\"ffz--corner-flag ffz--corner-flag__warn ffz-tooltip ffz-tooltip--no-mouse\"\n\t\t\t\t\tdata-title={t.i18n.t('tooltip.link-unsafe', 'Caution: This URL is has been flagged as potentially harmful by: {reasons}', {reasons})}\n\t\t\t\t>\n\t\t\t\t\t<figure class=\"ffz-i-attention\" />\n\t\t\t\t</div>);\n\t\t\t}\n\n\t\t\trenderBody() {\n\t\t\t\tlet doc;\n\t\t\t\tif ( this.props.force_full === true || (this.props.force_full !== false && this.props.want_full && this.state.full) )\n\t\t\t\t\tdoc = this.state.full;\n\t\t\t\tif ( this.props.force_mid === true || (this.props.force_mid !== false && this.props.want_mid && this.state.mid) )\n\t\t\t\t\tdoc = this.state.mid;\n\t\t\t\telse\n\t\t\t\t\tdoc = this.state.short;\n\n\t\t\t\tif ( t.has_tokenizer && this.state.v && this.state.v > t.tokenizer.VERSION)\n\t\t\t\t\tdoc = null;\n\n\t\t\t\t//const doc = (this.props.force_full ? this.state.full : null) ?? (this.props.force_mid ? this.state.mid : null) ?? this.state.short;\n\t\t\t\tif ( t.has_tokenizer && this.state.loaded && doc ) {\n\t\t\t\t\treturn (<div class=\"ffz-card-rich tw-full-width tw-overflow-hidden tw-flex tw-flex-column\">\n\t\t\t\t\t\t{t.tokenizer.renderTokens(doc, createElement, {\n\t\t\t\t\t\t\tvue: false,\n\t\t\t\t\t\t\ttList: (...args) => t.i18n.tList(...args),\n\t\t\t\t\t\t\ti18n: t.i18n,\n\n\t\t\t\t\t\t\tlast_player: 0,\n\t\t\t\t\t\t\tplayer_state: this.state.player_state,\n\n\t\t\t\t\t\t\ttogglePlayer: id => {\n\t\t\t\t\t\t\t\tconst player_state = this.state.player_state ?? {};\n\t\t\t\t\t\t\t\tplayer_state[id] = ! player_state[id];\n\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\tplayer_state\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\tlink_click_handler: t.chat.handleLinkClick,\n\n\t\t\t\t\t\t\tfragments: this.state.fragments,\n\t\t\t\t\t\t\ti18n_prefix: this.state.i18n_prefix,\n\n\t\t\t\t\t\t\tallow_media: t.chat.context.get('tooltip.link-images'),\n\t\t\t\t\t\t\tallow_unsafe: t.chat.context.get('tooltip.link-nsfw-images')\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>);\n\n\t\t\t\t} else\n\t\t\t\t\treturn this.renderBasic();\n\t\t\t}\n\n\t\t\trenderBasic() {\n\t\t\t\tlet title, description;\n\t\t\t\tif ( this.state.error ) {\n\t\t\t\t\ttitle = t.i18n.t('card.error', 'An error occurred.');\n\t\t\t\t\tdescription = this.state.error;\n\n\t\t\t\t} else if ( this.state.loaded && this.state.has_tokenizer ) {\n\t\t\t\t\ttitle = this.state.title;\n\t\t\t\t\tdescription = this.state.description;\n\t\t\t\t} else {\n\t\t\t\t\tdescription = t.i18n.t('card.loading', 'Loading...');\n\t\t\t\t}\n\n\t\t\t\tif ( ! title && ! description )\n\t\t\t\t\tdescription = t.i18n.t('card.empty', 'No data was returned.');\n\n\t\t\t\tdescription = description ? description.split(/\\n+/).slice(0,2).map(desc =>\n\t\t\t\t\t<div class=\"tw-c-text-alt-2 tw-ellipsis tw-mg-x-05\" title={desc}>{desc}</div>\n\t\t\t\t) : [];\n\n\t\t\t\treturn [\n\t\t\t\t\t<div class=\"ffz--header-image\" />,\n\t\t\t\t\t(<div class=\"ffz--card-text tw-full-width tw-overflow-hidden tw-flex tw-flex-column tw-justify-content-center\">\n\t\t\t\t\t\t{title && <div class=\"chat-card__title tw-ellipsis tw-mg-x-05\"><span class=\"tw-strong\" title={title}>{title}</span></div>}\n\t\t\t\t\t\t{description}\n\t\t\t\t\t</div>)\n\t\t\t\t];\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\tlet content = <div class=\"tw-flex tw-flex-nowrap tw-pd-05\">{this.renderCard()}</div>;\n\t\t\t\tconst tooltip = this.props.card_tooltip && this.state.full && ! this.props.force_full;\n\t\t\t\tif ( this.state.url ) {\n\t\t\t\t\tcontent = (<a\n\t\t\t\t\t\tclass={`${tooltip ? 'ffz-tooltip ' : ''}${this.state.accent ? 'ffz-accent-card ' : ''}${this.state.error ? '': 'ffz-interactable--hover-enabled '}tw-block tw-border-radius-medium tw-full-width ffz-interactable ffz-interactable--default tw-interactive`}\n\t\t\t\t\t\tdata-tooltip-type=\"link\"\n\t\t\t\t\t\tdata-url={this.state.url}\n\t\t\t\t\t\tdata-is-mail={false}\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noreferrer noopener\"\n\t\t\t\t\t\thref={this.state.url}\n\t\t\t\t\t\tonClick={t.chat.handleLinkClick}\n\t\t\t\t\t>\n\t\t\t\t\t\t{content}\n\t\t\t\t\t</a>);\n\t\t\t\t}\n\n\t\t\t\treturn (<div\n\t\t\t\t\tclass={`tw-border-radius-medium tw-elevation-1 ffz--chat-card tw-relative${this.state.unsafe ? ' ffz--unsafe' : ''}`}\n\t\t\t\t\tstyle={{'--ffz-color-accent': this.state.accent || null}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"tw-border-radius-medium tw-c-background-alt tw-flex tw-full-width\">\n\t\t\t\t\t\t{content}\n\t\t\t\t\t</div>\n\t\t\t\t</div>);\n\t\t\t}\n\t\t}\n\t}\n}","'use strict';\n\n// ============================================================================\n// Chat Line\n// ============================================================================\n\nimport Twilight from 'site';\nimport Module from 'utilities/module';\n\nimport RichContent from './rich_content';\nimport { has } from 'utilities/object';\nimport { KEYS, RERENDER_SETTINGS, UPDATE_BADGE_SETTINGS, UPDATE_TOKEN_SETTINGS } from 'utilities/constants';\nimport { print_duration } from 'utilities/time';\n\nimport { getRewardTitle, getRewardCost, isGiantEmoteReward, doesRewardCostBits, isMessageEffect } from './points';\nimport awaitMD, {getMD} from 'utilities/markdown';\n\nconst SUB_TIERS = {\n\t1000: 1,\n\t2000: 2,\n\t3000: 3\n};\n\n\nexport default class ChatLine extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('settings');\n\t\tthis.inject('i18n');\n\t\tthis.inject('chat');\n\t\tthis.inject('site');\n\t\tthis.inject('site.fine');\n\t\tthis.inject(RichContent);\n\t\tthis.inject('experiments');\n\n\t\tthis.inject('chat.actions');\n\t\tthis.inject('chat.overrides');\n\t\tthis.inject('chat.emotes');\n\n\t\tthis.line_types = {};\n\n\t\tthis.line_types.unknown = {\n\t\t\trenderNotice: (msg, current_user, room, inst, e) => {\n\t\t\t\treturn `Unknown message type: ${msg.ffz_type}`\n\t\t\t}\n\t\t};\n\n\t\tthis.line_types.notice = {\n\t\t\trenderNotice: (msg, current_user, room, inst, e) => {\n\t\t\t\tconst data = msg.ffz_data;\n\t\t\t\tlet content = this.line_types.notice.renderContent(msg, current_user, room, inst, e);\n\n\t\t\t\tif ( ! data.icon )\n\t\t\t\t\treturn content;\n\n\t\t\t\tif ( typeof content === 'string' )\n\t\t\t\t\tcontent = e('span', {}, content);\n\n\t\t\t\tif ( typeof data.icon === 'function' ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tcontent.ffz_icon = data.icon(data, inst, e);\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tthis.log.capture(err);\n\t\t\t\t\t\tthis.log.error('Error using custom renderer for notice:', err);\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( data.icon instanceof URL )\n\t\t\t\t\tcontent.ffz_icon = e('img', {\n\t\t\t\t\t\tclassName: 'ffz-notice-icon tw-mg-r-05',\n\t\t\t\t\t\tsrc: data.icon.toString()\n\t\t\t\t\t});\n\n\t\t\t\telse\n\t\t\t\t\tcontent.ffz_icon = e('span', {\n\t\t\t\t\t\tclassName: `${data.icon} tw-mg-r-05`\n\t\t\t\t\t});\n\n\t\t\t\treturn content;\n\t\t\t},\n\n\t\t\trenderContent: (msg, current_user, room, inst, e) => {\n\t\t\t\tconst data = msg.ffz_data;\n\t\t\t\tif ( data.renderer )\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn data.renderer(data, inst, e);\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tthis.log.capture(err);\n\t\t\t\t\t\tthis.log.error('Error using custom renderer for notice:', err);\n\t\t\t\t\t\treturn `Error rendering notice.`\n\t\t\t\t\t}\n\n\t\t\t\tconst text = data.i18n ? this.i18n.t(data.i18n, data.messgae, data) : data.message;\n\n\t\t\t\tif ( data.markdown ) {\n\t\t\t\t\tconst md = getMD();\n\t\t\t\t\tif ( ! md ) {\n\t\t\t\t\t\tawaitMD().then(() => inst.forceUpdate());\n\t\t\t\t\t\treturn 'Loading...';\n\t\t\t\t\t}\n\n\t\t\t\t\treturn e('span', {\n\t\t\t\t\t\tdangerouslySetInnerHTML: {\n\t\t\t\t\t\t\t__html: getMD().renderInline(text)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif ( data.tokenize ) {\n\t\t\t\t\tconst tokens = data.ffz_tokens = data.ffz_tokens || this.chat.tokenizeMessage({\n\t\t\t\t\t\tbadges: {},\n\t\t\t\t\t\tmessage: text,\n\t\t\t\t\t\tid: msg.id,\n\t\t\t\t\t\tuser: msg.user,\n\t\t\t\t\t\troomLogin: msg.roomLogin,\n\t\t\t\t\t\troomID: msg.roomID\n\t\t\t\t\t});\n\n\t\t\t\t\treturn this.chat.renderTokens(tokens, e);\n\t\t\t\t}\n\n\t\t\t\treturn text;\n\t\t\t}\n\t\t};\n\n\t\tthis.line_types.hype = {\n\t\t\trenderNotice: (msg, current_user, room, inst, e) => {\n\t\t\t\tconst setting = this.chat.context.get('chat.hype.message-style');\n\t\t\t\tif ( setting === 0 )\n\t\t\t\t\treturn null;\n\n\t\t\t\t// We need to get the message's tokens to see if it has a message or not.\n\t\t\t\tconst user = msg.user,\n\t\t\t\t\ttokens = msg.ffz_tokens = msg.ffz_tokens || this.chat.tokenizeMessage(msg, current_user),\n\t\t\t\t\thas_message = tokens.length > 0;\n\n\t\t\t\tlet amount = msg.hype_amount;\n\t\t\t\tconst digits = msg.hype_exponent ?? 0;\n\t\t\t\tif ( digits > 0 )\n\t\t\t\t\tamount /= Math.pow(10, digits);\n\n\t\t\t\ttry {\n\t\t\t\t\t// TODO: Cache formatter?\n\t\t\t\t\tconst fmt = new Intl.NumberFormat(navigator.languages, {\n\t\t\t\t\t\tstyle: 'currency',\n\t\t\t\t\t\tcurrency: msg.hype_currency,\n\t\t\t\t\t\tcompactDisplay: 'short',\n\t\t\t\t\t\tminimumFractionDigits: digits,\n\t\t\t\t\t\tmaximumFractionDigits: digits\n\t\t\t\t\t});\n\n\t\t\t\t\tamount = fmt.format(amount);\n\n\t\t\t\t} catch(err) {\n\t\t\t\t\tamount = `${msg.hype_currency} ${amount}`;\n\t\t\t\t}\n\n\t\t\t\tif (! has_message)\n\t\t\t\t\treturn this.i18n.tList('chat.hype-chat.user', '{user} sent a Hype Chat for {amount}!', {\n\t\t\t\t\t\tamount,\n\t\t\t\t\t\tuser: e('span', {\n\t\t\t\t\t\t\trole: 'button',\n\t\t\t\t\t\t\tclassName: 'chatter-name',\n\t\t\t\t\t\t\tonClick: inst.ffz_user_click_handler,\n\t\t\t\t\t\t\tonContextMenu: this.actions.handleUserContext\n\t\t\t\t\t\t}, e('span', {\n\t\t\t\t\t\t\tclassName: 'tw-c-text-base tw-strong'\n\t\t\t\t\t\t}, user.displayName))\n\t\t\t\t\t});\n\n\t\t\t\treturn this.i18n.tList(\n\t\t\t\t\t'chat.hype-chat',\n\t\t\t\t\t'Sent a Hype Chat for {amount}!',\n\t\t\t\t\t{\n\t\t\t\t\t\tamount\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}\n\t\t};\n\n\t\tthis.line_types.cheer = {\n\t\t\trenderNotice: (msg, current_user, room, inst, e) => {\n\t\t\t\treturn this.i18n.tList(\n\t\t\t\t\t'chat.bits-message',\n\t\t\t\t\t'Cheered {count, plural, one {# Bit} other {# Bits}}',\n\t\t\t\t\t{\n\t\t\t\t\t\tcount: msg.bits || 0\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\n\t\tthis.line_types.points = {\n\t\t\tgetClass: (msg) => {\n\t\t\t\tconst highlight = msg.ffz_reward_highlight && this.chat.context.get('chat.points.allow-highlight') === 2;\n\n\t\t\t\treturn `ffz--points-line tw-pd-l-1 tw-pd-r-2 ${highlight ? 'ffz-custom-color ffz--points-highlight' : ''}`;\n\t\t\t},\n\n\t\t\trenderNotice: (msg, current_user, room, inst, e) => {\n\t\t\t\tif ( ! msg.ffz_reward )\n\t\t\t\t\treturn null;\n\n\t\t\t\t// We need to get the message's tokens to see if it has a message or not.\n\t\t\t\tconst user = msg.user,\n\t\t\t\t\tis_bits = doesRewardCostBits(msg.ffz_reward),\n\t\t\t\t\ttokens = msg.ffz_tokens = msg.ffz_tokens || this.chat.tokenizeMessage(msg, current_user),\n\t\t\t\t\thas_message = tokens.length > 0;\n\n\t\t\t\t// Elements for the reward and cost with nice formatting.\n\t\t\t\tconst reward = e('span', {className: 'ffz--points-reward'}, getRewardTitle(msg.ffz_reward, this.i18n)),\n\t\t\t\t\tcost = e('span', {className: 'ffz--points-cost'}, [\n\t\t\t\t\t\te('span', {className: is_bits ? 'ffz-i-bits' : 'ffz--points-icon'}),\n\t\t\t\t\t\tthis.i18n.formatNumber(getRewardCost(msg.ffz_reward))\n\t\t\t\t\t]);\n\n\t\t\t\tif (! has_message)\n\t\t\t\t\treturn this.i18n.tList('chat.points.user-redeemed', '{user} redeemed {reward} {cost}', {\n\t\t\t\t\t\treward, cost,\n\t\t\t\t\t\tuser: e('span', {\n\t\t\t\t\t\t\trole: 'button',\n\t\t\t\t\t\t\tclassName: 'chatter-name',\n\t\t\t\t\t\t\tonClick: inst.ffz_user_click_handler,\n\t\t\t\t\t\t\tonContextMenu: this.actions.handleUserContext\n\t\t\t\t\t\t}, e('span', {\n\t\t\t\t\t\t\tclassName: 'tw-c-text-base tw-strong'\n\t\t\t\t\t\t}, user.displayName))\n\t\t\t\t\t});\n\n\t\t\t\treturn this.i18n.tList('chat.points.redeemed', 'Redeemed {reward} {cost}', {reward, cost});\n\t\t\t}\n\t\t};\n\n\t\tthis.line_types.resub = {\n\t\t\tgetClass: () => `ffz--subscribe-line tw-pd-r-2`,\n\n\t\t\trenderNotice: (msg, current_user, room, inst, e) => {\n\t\t\t\tconst months = msg.sub_cumulative || msg.sub_months,\n\t\t\t\t\tsetting = this.chat.context.get('chat.subs.show');\n\n\t\t\t\tlet has_message;\n\t\t\t\tif (setting === 1 && months > 1) {\n\t\t\t\t\tconst tokens = msg.ffz_tokens = msg.ffz_tokens || this.chat.tokenizeMessage(msg, current_user);\n\t\t\t\t\thas_message = tokens.length > 0;\n\t\t\t\t}\n\n\t\t\t\tif ( !(setting === 3 || (setting === 1 && has_message && months > 1) || (setting === 2 && months > 1)) )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst user = msg.user,\n\t\t\t\t\tplan = msg.sub_plan || {},\n\t\t\t\t\ttier = SUB_TIERS[plan.plan] || 1,\n\t\t\t\t\tmulti = msg.sub_multi,\n\n\t\t\t\t\thas_multi = (multi?.count ?? 0) > 1 && multi.tenure === 0;\n\n\t\t\t\tconst sub_msg = this.i18n.tList(\n\t\t\t\t\t`chat.sub.main${has_multi ? '-multi' : ''}`,\n\t\t\t\t\t`{user} subscribed {plan}${has_multi ? ' for {multi, plural, one {# month} other {# months}} in advance' : ''}. `,\n\t\t\t\t\t{\n\t\t\t\t\t\tuser: e('span', {\n\t\t\t\t\t\t\trole: 'button',\n\t\t\t\t\t\t\tclassName: 'chatter-name',\n\t\t\t\t\t\t\tonClick: inst.ffz_user_click_handler,\n\t\t\t\t\t\t\tonContextMenu: this.actions.handleUserContext\n\t\t\t\t\t\t}, e('span', {\n\t\t\t\t\t\t\tclassName: 'tw-c-text-base tw-strong'\n\t\t\t\t\t\t}, user.displayName)),\n\t\t\t\t\t\tplan: plan.prime ?\n\t\t\t\t\t\t\tthis.i18n.t('chat.sub.twitch-prime', 'with Prime Gaming') :\n\t\t\t\t\t\t\tthis.i18n.t('chat.sub.plan', 'at Tier {tier}', {tier}),\n\t\t\t\t\t\tmulti: has_multi\n\t\t\t\t\t\t\t? multi.count\n\t\t\t\t\t\t\t: 1\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tif ( msg.sub_share_streak && msg.sub_streak > 1 ) {\n\t\t\t\t\tsub_msg.push(this.i18n.t(\n\t\t\t\t\t\t'chat.sub.cumulative-months',\n\t\t\t\t\t\t\"They've subscribed for {cumulative,number} months, currently on a {streak,number} month streak!\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcumulative: msg.sub_cumulative,\n\t\t\t\t\t\t\tstreak: msg.sub_streak\n\t\t\t\t\t\t}\n\t\t\t\t\t));\n\n\t\t\t\t} else if ( months > 1 ) {\n\t\t\t\t\tsub_msg.push(this.i18n.t(\n\t\t\t\t\t\t'chat.sub.months',\n\t\t\t\t\t\t\"They've subscribed for {count,number} months!\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcount: months\n\t\t\t\t\t\t}\n\t\t\t\t\t));\n\t\t\t\t}\n\n\t\t\t\tif ( ! this.chat.context.get('chat.subs.compact') )\n\t\t\t\t\tsub_msg.ffz_icon = e('span', {\n\t\t\t\t\t\tclassName: `ffz-i-${plan.prime ? 'crown' : 'star'} tw-mg-r-05`\n\t\t\t\t\t});\n\n\t\t\t\treturn sub_msg;\n\t\t\t}\n\t\t};\n\n\t\tthis.line_types.ritual = {\n\t\t\tgetClass: () => `ffz--ritual-line tw-pd-r-2`,\n\n\t\t\trenderNotice: (msg, current_user, room, inst, e) => {\n\t\t\t\tconst user = msg.user;\n\n\t\t\t\tif ( msg.ritual === 'new_chatter' ) {\n\t\t\t\t\treturn this.i18n.tList('chat.ritual', '{user} is new here. Say hello!', {\n\t\t\t\t\t\tuser: e('span', {\n\t\t\t\t\t\t\trole: 'button',\n\t\t\t\t\t\t\tclassName: 'chatter-name',\n\t\t\t\t\t\t\tonClick: inst.ffz_user_click_handler,\n\t\t\t\t\t\t\tonContextMenu: this.actions.handleUserContext\n\t\t\t\t\t\t}, e('span', {\n\t\t\t\t\t\t\tclassName: 'tw-c-text-base tw-strong'\n\t\t\t\t\t\t}, user.displayName))\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.line_types.sub_gift = {\n\t\t\tgetClass: () => 'ffz--subscribe-line',\n\n\t\t\trenderNotice: (msg, current_user, room, inst, e) => {\n\t\t\t\tconst user = msg.user,\n\n\t\t\t\t\tplan = msg.sub_plan || {},\n\t\t\t\t\tmonths = msg.sub_months || 1,\n\t\t\t\t\ttier = SUB_TIERS[plan.plan] || 1;\n\n\t\t\t\tlet sub_msg;\n\n\t\t\t\tconst bits = {\n\t\t\t\t\tmonths,\n\t\t\t\t\tuser: (msg.sub_anon || user.username === 'ananonymousgifter') ?\n\t\t\t\t\t\tthis.i18n.t('chat.sub.anonymous-gifter', 'An anonymous gifter') :\n\t\t\t\t\t\te('span', {\n\t\t\t\t\t\t\trole: 'button',\n\t\t\t\t\t\t\tclassName: 'chatter-name',\n\t\t\t\t\t\t\tonClick: inst.ffz_user_click_handler,\n\t\t\t\t\t\t\tonContextMenu: this.actions.handleUserContext\n\t\t\t\t\t\t}, e('span', {\n\t\t\t\t\t\t\tclassName: 'tw-c-text-base tw-strong'\n\t\t\t\t\t\t}, user.displayName)),\n\t\t\t\t\tplan: plan.plan === 'custom' ? '' :\n\t\t\t\t\t\tthis.i18n.t('chat.sub.gift-plan', 'Tier {tier}', {tier}),\n\t\t\t\t\trecipient: e('span', {\n\t\t\t\t\t\trole: 'button',\n\t\t\t\t\t\tclassName: 'chatter-name',\n\t\t\t\t\t\tonClick: inst.ffz_user_click_handler,\n\t\t\t\t\t\t'data-user': JSON.stringify(msg.sub_recipient)\n\t\t\t\t\t}, e('span', {\n\t\t\t\t\t\tclassName: 'tw-c-text-base tw-strong'\n\t\t\t\t\t}, msg.sub_recipient.displayName))\n\t\t\t\t};\n\n\t\t\t\tif ( months <= 1 )\n\t\t\t\t\tsub_msg = this.i18n.tList('chat.sub.mystery', '{user} gifted a {plan} Sub to {recipient}! ', bits);\n\t\t\t\telse\n\t\t\t\t\tsub_msg = this.i18n.tList('chat.sub.gift-months', '{user} gifted {months, plural, one {# month} other {# months}} of {plan} Sub to {recipient}!', bits);\n\n\t\t\t\tif ( msg.sub_total === 1 )\n\t\t\t\t\tsub_msg.push(this.i18n.t('chat.sub.gift-first', \"It's their first time gifting a Sub in the channel!\"));\n\t\t\t\telse if ( msg.sub_total > 1 )\n\t\t\t\t\tsub_msg.push(this.i18n.t('chat.sub.gift-total', \"They've gifted {count,number} Subs in the channel!\", {\n\t\t\t\t\t\tcount: msg.sub_total\n\t\t\t\t\t}));\n\n\t\t\t\tif ( ! this.chat.context.get('chat.subs.compact') )\n\t\t\t\t\tsub_msg.ffz_icon = e('span', {\n\t\t\t\t\t\tclassName: `ffz-i-${plan.prime ? 'crown' : 'star'} tw-mg-r-05`\n\t\t\t\t\t});\n\n\t\t\t\treturn sub_msg;\n\t\t\t}\n\t\t}\n\n\t\tthis.line_types.sub_mystery = {\n\n\t\t\tgetClass: () => 'ffz--subscribe-line',\n\n\t\t\trenderNotice: (msg, user, room, inst, e) => {\n\t\t\t\tconst mystery = msg.mystery;\n\t\t\t\tif ( mystery )\n\t\t\t\t\tmystery.line = inst;\n\n\t\t\t\tconst sub_msg = this.i18n.tList('chat.sub.gift', \"{user} is gifting {count, plural, one {# Tier {tier} Sub} other {# Tier {tier} Subs}} to {channel}'s community! \", {\n\t\t\t\t\tuser: (msg.sub_anon || msg.user.username === 'ananonymousgifter') ?\n\t\t\t\t\t\tthis.i18n.t('chat.sub.anonymous-gifter', 'An anonymous gifter') :\n\t\t\t\t\t\te('span', {\n\t\t\t\t\t\t\trole: 'button',\n\t\t\t\t\t\t\tclassName: 'chatter-name',\n\t\t\t\t\t\t\tonClick: inst.ffz_user_click_handler,\n\t\t\t\t\t\t\tonContextMenu: this.actions.handleUserContext\n\t\t\t\t\t\t}, e('span', {\n\t\t\t\t\t\t\tclassName: 'tw-c-text-base tw-strong'\n\t\t\t\t\t\t}, msg.user.displayName)),\n\t\t\t\t\tcount: msg.sub_count,\n\t\t\t\t\ttier: SUB_TIERS[msg.sub_plan] || 1,\n\t\t\t\t\tchannel: msg.roomLogin\n\t\t\t\t});\n\n\t\t\t\tif ( msg.sub_total === 1 )\n\t\t\t\t\tsub_msg.push(this.i18n.t('chat.sub.gift-first', \"It's their first time gifting a Sub in the channel!\"));\n\t\t\t\telse if ( msg.sub_total > 1 )\n\t\t\t\t\tsub_msg.push(this.i18n.t('chat.sub.gift-total', \"They've gifted {count} Subs in the channel!\", {\n\t\t\t\t\t\tcount: msg.sub_total\n\t\t\t\t\t}));\n\n\t\t\t\tif ( ! inst.ffz_click_expand )\n\t\t\t\t\tinst.ffz_click_expand = () => {\n\t\t\t\t\t\tinst.setState({\n\t\t\t\t\t\t\tffz_expanded: ! inst.state.ffz_expanded\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\tconst expanded = this.chat.context.get('chat.subs.merge-gifts-visibility') ?\n\t\t\t\t\t! inst.state.ffz_expanded : inst.state.ffz_expanded;\n\n\t\t\t\tlet sub_list = null;\n\t\t\t\tif( expanded && mystery && mystery.recipients && mystery.recipients.length > 0 ) {\n\t\t\t\t\tconst the_list = [];\n\t\t\t\t\tfor(const x of mystery.recipients) {\n\t\t\t\t\t\tif ( the_list.length )\n\t\t\t\t\t\t\tthe_list.push(', ');\n\n\t\t\t\t\t\tthe_list.push(e('span', {\n\t\t\t\t\t\t\trole: 'button',\n\t\t\t\t\t\t\tclassName: 'ffz--giftee-name',\n\t\t\t\t\t\t\tonClick: inst.ffz_user_click_handler,\n\t\t\t\t\t\t\t'data-user': JSON.stringify(x)\n\t\t\t\t\t\t}, e('span', {\n\t\t\t\t\t\t\tclassName: 'tw-c-text-base tw-strong'\n\t\t\t\t\t\t}, x.displayName)));\n\t\t\t\t\t}\n\n\t\t\t\t\tsub_list = e('div', {\n\t\t\t\t\t\tclassName: 'tw-mg-t-05 tw-border-t tw-pd-t-05 tw-c-text-alt-2'\n\t\t\t\t\t}, the_list);\n\t\t\t\t}\n\n\t\t\t\tconst target = [\n\t\t\t\t\tsub_msg\n\t\t\t\t];\n\n\t\t\t\tif ( mystery )\n\t\t\t\t\ttarget.push(e('span', {\n\t\t\t\t\t\tclassName: `tw-pd-l-05 tw-font-size-4 ffz-i-${expanded ? 'down' : 'right'}-dir`\n\t\t\t\t\t}));\n\n\t\t\t\tconst out = [\n\t\t\t\t\te('div', {\n\t\t\t\t\t\tclassName: 'tw-full-width tw-c-text-alt-2',\n\t\t\t\t\t\tonClick: inst.ffz_click_expand\n\t\t\t\t\t}, target),\n\t\t\t\t\tsub_list\n\t\t\t\t];\n\n\t\t\t\tif ( ! this.chat.context.get('chat.subs.compact') )\n\t\t\t\t\tout.ffz_icon = e('span', {\n\t\t\t\t\t\tclassName: `ffz-i-star${msg.sub_anon ? '-empty' : ''} tw-mg-r-05`\n\t\t\t\t\t});\n\n\t\t\t\tout.ffz_target = target;\n\t\t\t\treturn out;\n\t\t\t}\n\t\t};\n\n\t\tthis.ChatLine = this.fine.define(\n\t\t\t'chat-line',\n\t\t\tn => n.renderMessageBody && n.props && ! n.onExtensionNameClick && !has(n.props, 'hasModPermissions'),\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.ExtensionLine = this.fine.define(\n\t\t\t'extension-line',\n\t\t\tn => n.renderMessageBody && n.onExtensionNameClick,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.WhisperLine = this.fine.define(\n\t\t\t'whisper-line',\n\t\t\tn => n.props && n.props.message && has(n.props, 'reportOutgoingWhisperRendered')\n\t\t)\n\t}\n\n\tasync onEnable() {\n\t\tthis.on('chat.overrides:changed', id => this.updateLinesByUser(id, null, false, false), this);\n\t\tthis.on('chat:update-lines-by-user', this.updateLinesByUser, this);\n\t\tthis.on('chat:update-line', this.updateLineById, this);\n\t\tthis.on('chat:update-lines', this.updateLines, this);\n\t\tthis.on('chat:rerender-lines', this.rerenderLines, this);\n\t\tthis.on('chat:update-line-tokens', this.updateLineTokens, this);\n\t\tthis.on('chat:update-line-badges', this.updateLineBadges, this);\n\t\tthis.on('i18n:update', this.rerenderLines, this);\n\t\tthis.on('chat.emotes:update-effects', this.checkEffects, this);\n\n\t\tthis.can_reprocess = true;\n\n\t\tthis.on('chat:reload-data', () => this.can_reprocess = true);\n\t\tthis.on('chat:room-add', () => this.can_reprocess = true);\n\n\t\tthis.on('load_tracker:complete:chat-data', () => {\n\t\t\tconst val = this.chat.context.get('chat.update-when-loaded');\n\t\t\tif ( ! val || ! this.can_reprocess )\n\t\t\t\treturn;\n\n\t\t\tthis.can_reprocess = false;\n\t\t\tthis.log.info('Reprocessing chat lines due to data loads.');\n\t\t\tthis.updateLines();\n\t\t});\n\n\t\tfor(const setting of RERENDER_SETTINGS)\n\t\t\tthis.chat.context.on(`changed:${setting}`, this.rerenderLines, this);\n\n\t\tfor(const setting of UPDATE_TOKEN_SETTINGS)\n\t\t\tthis.chat.context.on(`changed:${setting}`, this.updateLineTokens, this);\n\n\t\tfor(const setting of UPDATE_BADGE_SETTINGS)\n\t\t\tthis.chat.context.on(`changed:${setting}`, this.updateLineBadges, this);\n\n\t\tthis.chat.context.on('changed:tooltip.link-images', this.maybeUpdateLines, this);\n\t\tthis.chat.context.on('changed:tooltip.link-nsfw-images', this.maybeUpdateLines, this);\n\n\t\tthis.on('chat:get-messages', (include_chat, include_whisper, include_video, messages) => {\n\t\t\tif ( include_chat ) {\n\t\t\t\tfor(const inst of this.ChatLine.instances) {\n\t\t\t\t\tconst msg = inst.props.message;\n\t\t\t\t\tif ( msg )\n\t\t\t\t\t\tmessages.push({\n\t\t\t\t\t\t\tmessage: msg,\n\t\t\t\t\t\t\t_instance: inst,\n\t\t\t\t\t\t\tupdate: () => inst.forceUpdate()\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfor(const inst of this.ExtensionLine.instances) {\n\t\t\t\t\tconst msg = inst.props.message;\n\t\t\t\t\tif ( msg )\n\t\t\t\t\t\tmessages.push({\n\t\t\t\t\t\t\tmessage: msg,\n\t\t\t\t\t\t\t_instance: inst,\n\t\t\t\t\t\t\tupdate: () => inst.forceUpdate()\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( include_whisper )\n\t\t\t\tfor(const inst of this.WhisperLine.instances) {\n\t\t\t\t\tconst msg = inst.props.message;\n\t\t\t\t\tif ( msg && msg._ffz_message )\n\t\t\t\t\t\tmessages.push({\n\t\t\t\t\t\t\tmessage: msg._ffz_message,\n\t\t\t\t\t\t\t_instance: inst,\n\t\t\t\t\t\t\tupdate: () => inst.forceUpdate()\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t});\n\n\t\tthis.on('chat:get-tab-commands', e => {\n\t\t\tif ( this.experiments.getTwitchAssignmentByName('chat_replies') === 'control' )\n\t\t\t\treturn;\n\n\t\t\te.commands.push({\n\t\t\t\tname: 'reply',\n\t\t\t\tdescription: 'Reply to a user\\'s last message.',\n\t\t\t\tpermissionLevel: 0,\n\t\t\t\tffz_group: 'FrankerFaceZ',\n\t\t\t\tcommandArgs: [\n\t\t\t\t\t{name: 'username', isRequired: true},\n\t\t\t\t\t{name: 'message', isRequired: false}\n\t\t\t\t]\n\t\t\t})\n\t\t});\n\n\t\tthis.on('chat:pre-send-message', e => {\n\t\t\tif ( this.experiments.getTwitchAssignmentByName('chat_replies') === 'control' )\n\t\t\t\treturn;\n\n\t\t\tconst msg = e.message,\n\t\t\t\ttypes = this.parent.chat_types || {};\n\n\t\t\tlet user, message;\n\t\t\tif ( /^\\/reply ?/i.test(msg) )\n\t\t\t\tuser = msg.slice(7).trim();\n\t\t\telse\n\t\t\t\treturn;\n\n\t\t\te.preventDefault();\n\n\t\t\tconst idx = user.indexOf(' ');\n\t\t\tif ( idx !== -1 ) {\n\t\t\t\tmessage = user.slice(idx + 1);\n\t\t\t\tuser = user.slice(0, idx);\n\t\t\t}\n\n\t\t\tif ( user.startsWith('@') )\n\t\t\t\tuser = user.slice(1);\n\n\t\t\tif ( user && user.length ) {\n\t\t\t\tuser = user.toLowerCase();\n\n\t\t\t\tconst lines = Array.from(this.ChatLine.instances);\n\t\t\t\tlet i = lines.length;\n\t\t\t\twhile(i--) {\n\t\t\t\t\tconst line = lines[i],\n\t\t\t\t\t\tmsg = line?.props?.message,\n\t\t\t\t\t\tu = msg?.user;\n\n\t\t\t\t\tif ( ! u )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif ( u.login === user || u.displayName?.toLowerCase?.() === user ) {\n\t\t\t\t\t\tif ( message ) {\n\t\t\t\t\t\t\te.sendMessage(message, {\n\t\t\t\t\t\t\t\treply: {\n\t\t\t\t\t\t\t\t\tparentDeleted: msg.deleted || false,\n\t\t\t\t\t\t\t\t\tparentDisplayName: u.displayName,\n\t\t\t\t\t\t\t\t\tparentMessageBody: msg.message,\n\t\t\t\t\t\t\t\t\tparentMsgId: msg.id,\n\t\t\t\t\t\t\t\t\tparentUid: u.id,\n\t\t\t\t\t\t\t\t\tparentUserLogin: u.login\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\trequestAnimationFrame(() => line.ffzOpenReply());\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\te.addMessage({\n\t\t\t\ttype: types.Notice,\n\t\t\t\tmessage: this.i18n.t('chat.reply.bad-user', 'Invalid user or no known message to reply to.')\n\t\t\t});\n\t\t});\n\n\t\tconst t = this,\n\t\t\tReact = await this.site.findReact();\n\t\tif ( ! React )\n\t\t\treturn;\n\n\t\tconst e = React.createElement,\n\t\t\tFFZRichContent = this.rich_content && this.rich_content.RichContent;\n\n\n\t\tthis.WhisperLine.ready(cls => {\n\t\t\tconst old_render = cls.prototype.render;\n\n\t\t\tcls.prototype.render = function() {\n\t\t\t\tthis._ffz_no_scan = true;\n\n\t\t\t\tif ( ! this.props.message || ! this.props.message.content || ! this.props.message.from )\n\t\t\t\t\treturn old_render.call(this);\n\n\t\t\t\ttry {\n\t\t\t\t\tconst msg = t.chat.standardizeWhisper(this.props.message),\n\n\t\t\t\t\t\tis_action = msg.is_action,\n\t\t\t\t\t\taction_style = is_action ? t.chat.context.get('chat.me-style') : 0,\n\t\t\t\t\t\taction_italic = action_style >= 2,\n\t\t\t\t\t\taction_color = action_style === 1 || action_style === 3,\n\t\t\t\t\t\tuser = msg.user,\n\t\t\t\t\t\traw_color = t.overrides.getColor(user.id) || user.color,\n\t\t\t\t\t\tcolor = t.parent.colors.process(raw_color),\n\n\t\t\t\t\t\ttokens = msg.ffz_tokens = msg.ffz_tokens || t.chat.tokenizeMessage(msg, null),\n\t\t\t\t\t\tcontents = t.chat.renderTokens(tokens, e),\n\n\t\t\t\t\t\toverride_name = t.overrides.getName(user.id);\n\n\t\t\t\t\treturn e('div', {className: 'thread-message__message'},\n\t\t\t\t\t\te('div', {className: 'tw-pd-x-1 tw-pd-y-05'}, [\n\t\t\t\t\t\t\te('span', {\n\t\t\t\t\t\t\t\tclassName: `thread-message__message--user-name notranslate${override_name ? ' ffz--name-override' : ''}`,\n\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\tcolor\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, override_name || user.displayName),\n\t\t\t\t\t\t\te('span', null, is_action ? ' ' : ': '),\n\t\t\t\t\t\t\te('span', {\n\t\t\t\t\t\t\t\tclassName: `message${action_italic ? ' chat-line__message-body--italicized' : ''}`,\n\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\tcolor: action_color && color\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, contents)\n\t\t\t\t\t\t])\n\t\t\t\t\t);\n\n\t\t\t\t} catch(err) {\n\t\t\t\t\tt.log.error(err);\n\t\t\t\t\tt.log.capture(err, {\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tprops: this.props\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn old_render.call(this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do this after a short delay to hopefully reduce the chance of React\n\t\t\t// freaking out on us.\n\t\t\tsetTimeout(() => this.WhisperLine.forceUpdate());\n\t\t});\n\n\t\tthis.ChatLine.ready(cls => {\n\t\t\tconst old_render = cls.prototype.render;\n\n\t\t\tcls.prototype.shouldComponentUpdate = function(props, state) {\n\t\t\t\tconst show = state && state.alwaysShowMessage || ! props.message.deleted,\n\t\t\t\t\told_show = this._ffz_show;\n\n\t\t\t\t// We can't just compare props.message.deleted to this.props.message.deleted\n\t\t\t\t// because the message object is the same object. So, store the old show\n\t\t\t\t// state for later reference.\n\t\t\t\tthis._ffz_show = show;\n\n\t\t\t\treturn show !== old_show ||\n\t\t\t\t\t(state && this.state && (state.ffz_expanded !== this.state.ffz_expanded)) ||\n\t\t\t\t\t//state.renderDebug !== this.state.renderDebug ||\n\t\t\t\t\tprops.deletedMessageDisplay !== this.props.deletedMessageDisplay ||\n\t\t\t\t\tprops.deletedCount !== this.props.deletedCount ||\n\t\t\t\t\tprops.message !== this.props.message ||\n\t\t\t\t\tprops.isCurrentUserModerator !== this.props.isCurrentUserModerator ||\n\t\t\t\t\tprops.showModerationIcons !== this.props.showModerationIcons ||\n\t\t\t\t\tprops.showTimestamps !== this.props.showTimestamps ||\n\t\t\t\t\t(props.pinnedMessage?.message?.id === props.message?.id) !== (this.props.pinnedMessage?.message?.id === this.props.message?.id);\n\t\t\t}\n\n\t\t\tcls.prototype.ffzOpenReply = function() {\n\t\t\t\tif ( this.onMessageClick ) {\n\t\t\t\t\treturn this.onMessageClick();\n\t\t\t\t}\n\n\t\t\t\tif ( this.props.reply ) {\n\t\t\t\t\tthis.setOPCardTray(this.props.reply);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( this.props.hasReply ) {\n\t\t\t\t\tconst msg = this.props.message;\n\t\t\t\t\tif (msg?.user) {\n\t\t\t\t\t\tthis.setOPCardTray({\n\t\t\t\t\t\t\tparentMsgId: msg.id,\n\t\t\t\t\t\t\tparentUid: msg.user.userID,\n\t\t\t\t\t\t\tparentUserLogin: msg.user.userLogin,\n\t\t\t\t\t\t\tparentDeleted: msg.deleted,\n\t\t\t\t\t\t\tparentDisplayName: msg.user.userDisplayName,\n\t\t\t\t\t\t\tparentMessageBody: msg.messageBody\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tconst old_render_author = this.renderMessageAuthor;\n\t\t\t\tthis.renderMessageAuthor = () => this.ffzReplyAuthor();\n\n\t\t\t\tconst tokens = this.props.message?.ffz_tokens;\n\t\t\t\tif ( ! tokens )\n\t\t\t\t\treturn;\n\n\t\t\t\tthis.setMessageTray(this.props.message, t.chat.renderTokens(tokens, e));\n\n\t\t\t\tthis.renderMessageAuthor = old_render_author;\n\t\t\t}\n\n\t\t\tcls.prototype.ffzReplyAuthor = function() {\n\t\t\t\tconst msg = t.chat.standardizeMessage(this.props.message),\n\t\t\t\t\tuser = msg.user,\n\t\t\t\t\traw_color = t.overrides.getColor(user.id) || user.color,\n\t\t\t\t\tcolor = t.parent.colors.process(raw_color);\n\n\t\t\t\tlet room = msg.roomLogin ? msg.roomLogin : msg.channel ? msg.channel.slice(1) : undefined,\n\t\t\t\t\troom_id = msg.roomId ? msg.roomId : this.props.channelID;\n\n\t\t\t\tif ( ! room && room_id ) {\n\t\t\t\t\tconst r = t.chat.getRoom(room_id, null, true);\n\t\t\t\t\tif ( r && r.login )\n\t\t\t\t\t\troom = msg.roomLogin = r.login;\n\t\t\t\t}\n\n\t\t\t\tif ( ! room_id && room ) {\n\t\t\t\t\tconst r = t.chat.getRoom(null, room_id, true);\n\t\t\t\t\tif ( r && r.id )\n\t\t\t\t\t\troom_id = msg.roomId = r.id;\n\t\t\t\t}\n\n\t\t\t\tconst user_block = t.chat.formatUser(user, e);\n\t\t\t\tconst override_name = t.overrides.getName(user.id);\n\n\t\t\t\treturn e('span', {\n\t\t\t\t\t'data-room-id': room_id,\n\t\t\t\t\t'data-room': room,\n\t\t\t\t\t'data-user-id': user.userID,\n\t\t\t\t\t'data-user': user.userLogin && user.userLogin.toLowerCase()\n\t\t\t\t}, [\n\t\t\t\t\t//t.actions.renderInline(msg, this.props.showModerationIcons, u, r, e),\n\t\t\t\t\te('span', {\n\t\t\t\t\t\tclassName: 'chat-line__message--badges'\n\t\t\t\t\t}, t.chat.badges.render(msg, e)),\n\t\t\t\t\te('span', {\n\t\t\t\t\t\tclassName: `chat-line__username notranslate${override_name ? ' ffz--name-override tw-relative ffz-il-tooltip__container' : ''}`,\n\t\t\t\t\t\trole: 'button',\n\t\t\t\t\t\tstyle: { color },\n\t\t\t\t\t\tonClick: this.ffz_user_click_handler,\n\t\t\t\t\t\tonContextMenu: t.actions.handleUserContext\n\t\t\t\t\t}, override_name ? [\n\t\t\t\t\t\te('span', {\n\t\t\t\t\t\t\tclassName: 'chat-author__display-name'\n\t\t\t\t\t\t}, override_name),\n\t\t\t\t\t\te('div', {\n\t\t\t\t\t\t\tclassName: 'ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-center'\n\t\t\t\t\t\t}, user_block)\n\t\t\t\t\t] : user_block)\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\tcls.prototype.ffzRenderSharedChatPill = function() {\n\t\t\t\tlet style = t.chat.context.get('chat.shared-chat.style');\n\t\t\t\tif ( style == null )\n\t\t\t\t\tstyle = this.props.isCurrentUserModerator ? 2 : 0;\n\t\t\t\tif ( style === 0 )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst msg = this.props.message,\n\t\t\t\t\tsource_id = msg.sourceRoomID,\n\t\t\t\t\tsource = source_id && this.props.sharedChatDataByChannelID?.get(source_id),\n\t\t\t\t\tin_source = ! source || source_id === (msg.roomId ?? this.props.channelID);\n\n\t\t\t\tif ( ! source )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst title = t.i18n.t('chat.sent-from-source', 'Sent from {source}', {source: source.displayName ?? source.login});\n\n\t\t\t\tif ( style === 1 )\n\t\t\t\t\treturn e('span', {\n\t\t\t\t\t\tclassName: `ffz-pill ffz-tooltip tw-mg-r-05 ${in_source ? 'ffz-pill--brand' : ''}`,\n\t\t\t\t\t\t'data-title': title\n\t\t\t\t\t}, `${source.displayName ?? source.login}`);\n\n\t\t\t\tif ( style === 2 )\n\t\t\t\t\treturn e('figure', {\n\t\t\t\t\t\tclassName: `ffz-tooltip ffz-tooltip--no-mouse ffz-shared-chat-badge ffz-avatar tw-border-radius-rounded ${in_source ? 'ffz-shared-chat-badge--active' : ''} tw-mg-r-05`,\n\t\t\t\t\t\t'data-title': t.i18n.t('chat.sent-from-source', 'Sent from {source}', {source: source.displayName}),\n\t\t\t\t\t}, e('img', {\n\t\t\t\t\t\tclassName: 'tw-block tw-border-radius-rounded tw-image',\n\t\t\t\t\t\tsrc: source.profileImageURL,\n\t\t\t\t\t\talt: source.displayName\n\t\t\t\t\t}));\n\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tcls.prototype.ffzNewRender = function() { try {\n\t\t\t\tthis._ffz_no_scan = true;\n\n\t\t\t\tconst msg = t.chat.standardizeMessage(this.props.message),\n\t\t\t\t\toverride_mode = t.chat.context.get('chat.filtering.display-deleted');\n\n\t\t\t\t// Before anything else, check to see if the deleted message view is set\n\t\t\t\t// to BRIEF and the message is deleted. In that case we can exit very\n\t\t\t\t// early.\n\t\t\t\tlet mod_mode = this.props.deletedMessageDisplay;\n\t\t\t\tif ( override_mode )\n\t\t\t\t\tmod_mode = override_mode;\n\t\t\t\telse if ( ! this.props.isCurrentUserModerator && mod_mode === 'DETAILED' )\n\t\t\t\t\tmod_mode = 'LEGACY';\n\n\t\t\t\tif ( mod_mode === 'BRIEF' && msg.deleted ) {\n\t\t\t\t\tconst deleted_count = this.props.deletedCount;\n\t\t\t\t\tif ( deleted_count == null )\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\treturn e(\n\t\t\t\t\t\t'div', {\n\t\t\t\t\t\t\tclassName: 'chat-line__status'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tt.i18n.t('chat.deleted-messages', `{count,plural,\none {One message was deleted by a moderator.}\nother {# messages were deleted by a moderator.}\n}`, {\n\t\t\t\t\t\t\tcount: deleted_count\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// First, we need to handle Shared Chat.\n\t\t\t\tconst source_id = msg.sourceRoomID,\n\t\t\t\t\tsource = source_id && this.props.sharedChatDataByChannelID?.get(source_id);\n\n\t\t\t\t// Get the current room id and login. We might need to look these up.\n\t\t\t\tlet room = msg.roomLogin ? msg.roomLogin : msg.channel ? msg.channel.slice(1) : undefined,\n\t\t\t\t\troom_id = msg.roomId ? msg.roomId : this.props.channelID;\n\n\t\t\t\tif ( ! room && room_id ) {\n\t\t\t\t\tconst r = t.chat.getRoom(room_id, null, true);\n\t\t\t\t\tif ( r && r.login )\n\t\t\t\t\t\troom = msg.roomLogin = r.login;\n\t\t\t\t}\n\n\t\t\t\tif ( ! room_id && room ) {\n\t\t\t\t\tconst r = t.chat.getRoom(null, room, true);\n\t\t\t\t\tif ( r && r.id )\n\t\t\t\t\t\troom_id = msg.roomId = r.id;\n\t\t\t\t}\n\n\t\t\t\t// Construct the current room and current user objects.\n\t\t\t\tconst current_user = t.site.getUser(),\n\t\t\t\t\tcurrent_room = {id: room_id, login: room};\n\n\t\t\t\tconst is_in_source = ! source || source_id === room_id,\n\t\t\t\t\tsource_room = is_in_source\n\t\t\t\t\t\t? current_room\n\t\t\t\t\t\t: {id: source_id, login: source.login};\n\n\t\t\t\tconst reply_mode = t.chat.context.get('chat.replies.style'),\n\t\t\t\t\thas_replies = this.props && !!(this.props.hasReply || this.props.reply || ! this.props.replyRestrictedReason),\n\t\t\t\t\tcan_replies = has_replies && msg.message && ! msg.deleted && ! this.props.disableReplyClick,\n\t\t\t\t\tcan_reply = can_replies && (has_replies || (current_user && current_user.login !== msg.user?.login));\n\n\t\t\t\tif ( current_user ) {\n\t\t\t\t\tcurrent_user.moderator = this.props.isCurrentUserModerator;\n\t\t\t\t\tcurrent_user.staff = this.props.isCurrentUserStaff;\n\t\t\t\t\tcurrent_user.reply_mode = reply_mode;\n\t\t\t\t\tcurrent_user.can_reply = can_reply;\n\t\t\t\t}\n\n\t\t\t\t// Set up our click handlers as necessary.\n\t\t\t\tif ( ! this.ffz_open_reply )\n\t\t\t\t\tthis.ffz_open_reply = this.ffzOpenReply.bind(this);\n\n\t\t\t\tif ( ! this.ffz_user_click_handler ) {\n\t\t\t\t\tif ( this.props.onUsernameClick )\n\t\t\t\t\t\tthis.ffz_user_click_handler = event => {\n\t\t\t\t\t\t\tif ( this.isKeyboardEvent(event) && event.keyCode !== KEYS.Space && event.keyCode !== KEYS.Enter )\n\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\tconst target = event.currentTarget,\n\t\t\t\t\t\t\t\tds = target && target.dataset;\n\t\t\t\t\t\t\tlet target_user = msg.user;\n\n\t\t\t\t\t\t\tif ( ds && ds.user ) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\ttarget_user = JSON.parse(ds.user);\n\t\t\t\t\t\t\t\t} catch(err) { /* nothing~! */ }\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst fe = t.makeEvent({\n\t\t\t\t\t\t\t\tinst: this,\n\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t\tmessage: msg,\n\t\t\t\t\t\t\t\tuser: target_user,\n\t\t\t\t\t\t\t\troom: current_room,\n\t\t\t\t\t\t\t\tsource: source_room\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tt.emit('chat:user-click', fe);\n\n\t\t\t\t\t\t\tif ( fe.defaultPrevented )\n\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\tthis.props.onUsernameClick(target_user.login, 'chat_message', msg.id, target.getBoundingClientRect().bottom);\n\t\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.ffz_user_click_handler = this.openViewerCard || this.usernameClickHandler; //event => event.ctrlKey ? this.usernameClickHandler(event) : t.viewer_cards.openCard(r, user, event);\n\t\t\t\t}\n\n\t\t\t\tlet notice;\n\t\t\t\tlet klass;\n\t\t\t\tlet bg_css = null;\n\n\t\t\t\t// Do we have a special renderer?\n\t\t\t\tlet type = msg.ffz_type && t.line_types[msg.ffz_type];\n\t\t\t\tif ( ! type && msg.bits > 0 && t.chat.context.get('chat.bits.cheer-notice') )\n\t\t\t\t\ttype = t.line_types.cheer;\n\n\t\t\t\tif ( ! type && msg.ffz_type )\n\t\t\t\t\ttype = t.line_types.unknown;\n\n\t\t\t\tif ( type ) {\n\t\t\t\t\tif ( type.render )\n\t\t\t\t\t\treturn type.render(msg, current_user, current_room, this, e);\n\n\t\t\t\t\tif ( type.renderNotice )\n\t\t\t\t\t\tnotice = type.renderNotice(msg, current_user, current_room, this, e);\n\n\t\t\t\t\tif ( type.getClass )\n\t\t\t\t\t\tklass = type.getClass(msg, current_user, current_room, this, e);\n\t\t\t\t}\n\n\t\t\t\t// Render the line.\n\t\t\t\tconst user = msg.user,\n\t\t\t\t\tanim_hover = t.chat.context.get('chat.emotes.animated') === 2;\n\n\t\t\t\t// Cache the lower login\n\t\t\t\tif ( user && ! user.lowerLogin && user.userLogin )\n\t\t\t\t\tuser.lowerLogin = user.userLogin.toLowerCase();\n\n\t\t\t\t// Ensure we have a string for klass.\n\t\t\t\tklass = klass || '';\n\n\t\t\t\t// RENDERING: Start~\n\n\t\t\t\t// First, check how we should handle a deleted message.\n\t\t\t\tlet show;\n\t\t\t\tlet deleted;\n\t\t\t\tlet mod_action = null;\n\n\t\t\t\tif ( mod_mode === 'BRIEF' ) {\n\t\t\t\t\t// We already handle msg.deleted for BRIEF earlier than this.\n\t\t\t\t\tshow = true;\n\t\t\t\t\tdeleted = false;\n\n\t\t\t\t} else if ( mod_mode === 'DETAILED' ) {\n\t\t\t\t\tshow = true;\n\t\t\t\t\tdeleted = msg.deleted;\n\n\t\t\t\t} else {\n\t\t\t\t\tshow = this.state?.alwaysShowMessage || ! msg.deleted;\n\t\t\t\t\tdeleted = false;\n\t\t\t\t}\n\n\t\t\t\tif ( msg.deleted ) {\n\t\t\t\t\tconst show_mode = t.chat.context.get('chat.filtering.display-mod-action');\n\t\t\t\t\tif ( show_mode === 2 || (show_mode === 1 && mod_mode === 'DETAILED') ) {\n\t\t\t\t\t\tconst action = msg.modActionType;\n\t\t\t\t\t\tif ( action === 'timeout' )\n\t\t\t\t\t\t\tmod_action = t.i18n.t('chat.mod-action.timeout',\n\t\t\t\t\t\t\t\t'{duration} Timeout'\n\t\t\t\t\t\t\t\t, {\n\t\t\t\t\t\t\t\t\tduration: print_duration(msg.duration || 1)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\telse if ( action === 'ban' )\n\t\t\t\t\t\t\tmod_action = t.i18n.t('chat.mod-action.ban', 'Banned');\n\t\t\t\t\t\telse if ( action === 'delete' || ! action )\n\t\t\t\t\t\t\tmod_action = t.i18n.t('chat.mod-action.delete', 'Deleted');\n\n\t\t\t\t\t\tif ( mod_action && msg.modLogin )\n\t\t\t\t\t\t\tmod_action = t.i18n.t('chat.mod-action.by', '{action} by {login}', {\n\t\t\t\t\t\t\t\tlogin: msg.modLogin,\n\t\t\t\t\t\t\t\taction: mod_action\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif ( mod_action )\n\t\t\t\t\t\t\tmod_action = e('span', {\n\t\t\t\t\t\t\t\tclassName: 'tw-pd-l-05',\n\t\t\t\t\t\t\t\t'data-test-selector': 'chat-deleted-message-attribution'\n\t\t\t\t\t\t\t}, `(${mod_action})`);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Are we listing highlight reasons?\n\t\t\t\tlet highlight_tags = null;\n\t\t\t\tconst hl_position = t.chat.context.get('chat.filtering.show-reasons');\n\n\t\t\t\tif ( msg.highlights?.size && hl_position ) {\n\t\t\t\t\thighlight_tags = [];\n\n\t\t\t\t\tfor(const tag of msg.highlights) {\n\t\t\t\t\t\tconst reason = t.chat._hl_reasons[tag];\n\t\t\t\t\t\tlet label,\n\t\t\t\t\t\t\ttooltip;\n\n\t\t\t\t\t\tif ( reason ) {\n\t\t\t\t\t\t\ttooltip = reason.i18n_key\n\t\t\t\t\t\t\t\t? t.i18n.t(reason.i18n_key, reason.title)\n\t\t\t\t\t\t\t\t: reason.title;\n\n\t\t\t\t\t\t\tlabel = reason.i18n_label\n\t\t\t\t\t\t\t\t? t.i18n.t(reason.i18n_label, reason.label)\n\t\t\t\t\t\t\t\t: reason.label;\n\n\t\t\t\t\t\t\tif ( label === tooltip )\n\t\t\t\t\t\t\t\ttooltip = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( ! label )\n\t\t\t\t\t\t\tlabel = tag;\n\n\t\t\t\t\t\thighlight_tags.push(e('span', {\n\t\t\t\t\t\t\tclassName: `ffz-pill ffz-highlight-tag${reason ? ' ffz-tooltip' : ''}`,\n\t\t\t\t\t\t\t'data-title': tooltip\n\t\t\t\t\t\t}, label));\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( highlight_tags.length > 0 )\n\t\t\t\t\t\thighlight_tags = e('span', {\n\t\t\t\t\t\t\tclassName: `ffz-highlight-tags ${\n\t\t\t\t\t\t\t\thl_position === 1\n\t\t\t\t\t\t\t\t\t? 'ffz-highlight-tags__above'\n\t\t\t\t\t\t\t\t\t: 'tw-mg-r-05'\n\t\t\t\t\t\t\t\t}`\n\t\t\t\t\t\t}, highlight_tags);\n\t\t\t\t\telse\n\t\t\t\t\t\thighlight_tags = null;\n\t\t\t\t}\n\n\t\t\t\t// Check to see if we have message content to render.\n\t\t\t\tconst tokens = msg.ffz_tokens = msg.ffz_tokens || t.chat.tokenizeMessage(msg, current_user),\n\t\t\t\t\thas_message = tokens.length > 0 || ! notice;\n\n\t\t\t\tlet message;\n\n\t\t\t\tif ( has_message ) {\n\t\t\t\t\t// Let's calculate some remaining values that we need.\n\t\t\t\t\tconst reply_tokens = (reply_mode === 2 || (reply_mode === 1 && this.props.repliesAppearancePreference && this.props.repliesAppearancePreference !== 'expanded'))\n\t\t\t\t\t\t? (msg.ffz_reply = msg.ffz_reply || t.chat.tokenizeReply(this.props.reply))\n\t\t\t\t\t\t: null;\n\n\t\t\t\t\tconst is_action = t.parent.message_types && t.parent.message_types.Action === msg.messageType,\n\t\t\t\t\t\tis_giant_emote = this.props.isLastEmoteGigantified || isGiantEmoteReward(msg.ffz_reward),\n\n\t\t\t\t\t\taction_style = is_action ? t.chat.context.get('chat.me-style') : 0,\n\t\t\t\t\t\taction_italic = action_style >= 2,\n\t\t\t\t\t\taction_color = action_style === 1 || action_style === 3;\n\n\t\t\t\t\tconst raw_color = t.overrides.getColor(user.id) || user.color,\n\t\t\t\t\t\tcolor = t.parent.colors.process(raw_color);\n\n\t\t\t\t\tconst rich_content = show && FFZRichContent && t.chat.pluckRichContent(tokens, msg),\n\t\t\t\t\t\tgiant_emote = is_giant_emote && t.chat.pluckLastEmote(tokens, msg);\n\n\t\t\t\t\t// First, render the user block.\n\t\t\t\t\tconst username = t.chat.formatUser(user, e),\n\t\t\t\t\t\toverride_name = t.overrides.getName(user.id);\n\n\t\t\t\t\tlet user_class = msg.ffz_user_class;\n\t\t\t\t\tif ( user_class instanceof Set )\n\t\t\t\t\t\tuser_class = [...user_class].join(' ');\n\t\t\t\t\telse if ( Array.isArray(user_class) )\n\t\t\t\t\t\tuser_class = user_class.join(' ');\n\n\t\t\t\t\tconst want_source_tip = source && t.chat.context.get('chat.shared-chat.username-tooltip');\n\n\t\t\t\t\tconst user_props = {\n\t\t\t\t\t\tclassName: `chat-line__username notranslate${override_name ? ' ffz--name-override' : ''}${(override_name || want_source_tip) ? ' tw-relative ffz-il-tooltip__container' : ''} ${user_class ?? ''}`,\n\t\t\t\t\t\trole: 'button',\n\t\t\t\t\t\tstyle: { color },\n\t\t\t\t\t\tonClick: this.ffz_user_click_handler,\n\t\t\t\t\t\tonContextMenu: t.actions.handleUserContext\n\t\t\t\t\t};\n\n\t\t\t\t\tif ( msg.ffz_user_props )\n\t\t\t\t\t\tObject.assign(user_props, msg.ffz_user_props);\n\n\t\t\t\t\tif ( msg.ffz_user_style )\n\t\t\t\t\t\tObject.assign(user_props.style, msg.ffz_user_style);\n\n\t\t\t\t\tconst user_block = e(\n\t\t\t\t\t\t'span',\n\t\t\t\t\t\tuser_props,\n\t\t\t\t\t\toverride_name\n\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\te('span', {\n\t\t\t\t\t\t\t\t\tclassName: 'chat-author__display-name'\n\t\t\t\t\t\t\t\t}, override_name),\n\t\t\t\t\t\t\t\te('div', {\n\t\t\t\t\t\t\t\t\tclassName: 'ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-center'\n\t\t\t\t\t\t\t\t}, [\n\t\t\t\t\t\t\t\t\tusername,\n\t\t\t\t\t\t\t\t\twant_source_tip\n\t\t\t\t\t\t\t\t\t\t? e('div', {\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'tw-font-size-8 tw-mg-t-05'\n\t\t\t\t\t\t\t\t\t\t}, t.i18n.t('chat.sent-from-source', 'Sent from {source}', {source: source.displayName ?? source.login}))\n\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t: want_source_tip\n\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\tusername,\n\t\t\t\t\t\t\t\t\te('span', {\n\t\t\t\t\t\t\t\t\t\tclassName: 'ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-center'\n\t\t\t\t\t\t\t\t\t}, t.i18n.t('chat.sent-from-source', 'Sent from {source}', {source: source.displayName ?? source.login}))\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t: username\n\t\t\t\t\t);\n\n\t\t\t\t\t// The timestamp.\n\t\t\t\t\tconst timestamp = (this.props.showTimestamps || this.props.isHistorical)\n\t\t\t\t\t\t? e('span', { className: 'chat-line__timestamp' }, t.chat.formatTime(msg.timestamp))\n\t\t\t\t\t\t: null;\n\n\t\t\t\t\t// The reply token for FFZ style.\n\t\t\t\t\tconst reply_token = show && has_replies && reply_tokens\n\t\t\t\t\t\t? t.chat.renderTokens(reply_tokens, e)\n\t\t\t\t\t\t: null;\n\n\t\t\t\t\t// Check for a Twitch-style points highlight.\n\t\t\t\t\tconst twitch_highlight = msg.ffz_reward_highlight && t.chat.context.get('chat.points.allow-highlight') === 1;\n\n\t\t\t\t\t// The reply element for Twitch style.\n\t\t\t\t\tconst twitch_reply = reply_mode === 1 && this.props.reply && this.props.repliesAppearancePreference && this.props.repliesAppearancePreference === 'expanded'\n\t\t\t\t\t\t? this.renderReplyLine()\n\t\t\t\t\t\t: null;\n\n\t\t\t\t\t// Now assemble the pieces.\n\t\t\t\t\tmessage = [\n\t\t\t\t\t\ttwitch_reply,\n\n\t\t\t\t\t\tsource ? this.ffzRenderSharedChatPill() : null,\n\n\t\t\t\t\t\t// The preamble\n\t\t\t\t\t\ttimestamp,\n\t\t\t\t\t\tmsg.ffz_no_actions ? null : t.actions.renderInline(msg, this.props.showModerationIcons, current_user, current_room, e, this),\n\t\t\t\t\t\tthis.renderInlineHighlight ? this.renderInlineHighlight() : null,\n\t\t\t\t\t\thl_position === 2 ? highlight_tags : null,\n\n\t\t\t\t\t\t// Badges\n\t\t\t\t\t\te('span', {\n\t\t\t\t\t\t\tclassName: 'chat-line__message--badges'\n\t\t\t\t\t\t}, t.chat.badges.render(msg, e)),\n\n\t\t\t\t\t\t// User\n\t\t\t\t\t\tuser_block,\n\n\t\t\t\t\t\t// The separator\n\t\t\t\t\t\te('span', {'aria-hidden': true}, is_action ? ' ' : ': '),\n\n\t\t\t\t\t\t// Reply Token\n\t\t\t\t\t\treply_token,\n\n\t\t\t\t\t\t// Message\n\t\t\t\t\t\tshow\n\t\t\t\t\t\t\t? e(\n\t\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tclassName: `message ${action_italic ? 'chat-line__message-body--italicized' : ''} ${twitch_highlight ? 'chat-line__message-body--highlighted' : ''}`,\n\t\t\t\t\t\t\t\t\tstyle: action_color ? { color} : null\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tt.chat.renderTokens(\n\t\t\t\t\t\t\t\t\ttokens, e, (reply_mode !== 0 && has_replies) ? this.props.reply : null\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: e(\n\t\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tclassName: 'chat-line__message--deleted'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\te('a', {\n\t\t\t\t\t\t\t\t\thref: '',\n\t\t\t\t\t\t\t\t\tonClick: this.alwaysShowMessage\n\t\t\t\t\t\t\t\t}, t.i18n.t('chat.message-deleted', '<message deleted>'))\n\t\t\t\t\t\t\t),\n\n\t\t\t\t\t\t// Moderation Action\n\t\t\t\t\t\tmod_action,\n\n\t\t\t\t\t\t// Rich Content\n\t\t\t\t\t\trich_content\n\t\t\t\t\t\t\t? e(FFZRichContent, rich_content)\n\t\t\t\t\t\t\t: null,\n\n\t\t\t\t\t\t// Giant Emote\n\t\t\t\t\t\tgiant_emote\n\t\t\t\t\t\t\t? e('div', {className: 'chat-line__message--ffz-giant-emote'}, t.chat.renderGiantEmote(giant_emote, e))\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\t// Is there a notice?\n\t\t\t\tlet out;\n\n\t\t\t\tif ( notice ) {\n\t\t\t\t\tconst is_raw = Array.isArray(notice.ffz_target);\n\n\t\t\t\t\tif ( ! message ) {\n\t\t\t\t\t\tconst want_ts = t.chat.context.get('chat.extra-timestamps'),\n\t\t\t\t\t\t\ttimestamp = want_ts && (this.props.showTimestamps || this.props.isHistorical)\n\t\t\t\t\t\t\t\t? e('span', { className: 'chat-line__timestamp' }, t.chat.formatTime(msg.timestamp))\n\t\t\t\t\t\t\t\t: null;\n\n\t\t\t\t\t\tconst actions = msg.ffz_no_actions ? null : t.actions.renderInline(msg, this.props.showModerationIcons, current_user, current_room, e, this);\n\n\t\t\t\t\t\tif ( is_raw ) {\n\t\t\t\t\t\t\tnotice.ffz_target.unshift(\n\t\t\t\t\t\t\t\tsource ? this.ffzRenderSharedChatPill() : null,\n\t\t\t\t\t\t\t\tnotice.ffz_icon ?? null,\n\t\t\t\t\t\t\t\ttimestamp,\n\t\t\t\t\t\t\t\tactions,\n\t\t\t\t\t\t\t\thl_position === 2 ? highlight_tags : null\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tnotice = [\n\t\t\t\t\t\t\t\tsource ? this.ffzRenderSharedChatPill() : null,\n\t\t\t\t\t\t\t\tnotice.ffz_icon ?? null,\n\t\t\t\t\t\t\t\ttimestamp,\n\t\t\t\t\t\t\t\tactions,\n\t\t\t\t\t\t\t\thl_position === 2 ? highlight_tags : null,\n\t\t\t\t\t\t\t\tnotice\n\t\t\t\t\t\t\t];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( is_raw ) {\n\t\t\t\t\t\t\tif ( notice.ffz_icon )\n\t\t\t\t\t\t\t\tnotice.ffz_target.unshift(notice.ffz_icon);\n\n\t\t\t\t\t\t} else if ( notice.ffz_icon )\n\t\t\t\t\t\t\tnotice = [\n\t\t\t\t\t\t\t\tnotice.ffz_icon,\n\t\t\t\t\t\t\t\tnotice,\n\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\tmessage = e(\n\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tclassName: 'chat-line--inline chat-line__message',\n\t\t\t\t\t\t\t\t'data-room-id': source_room?.id ?? msg.roomId ?? current_room.id,\n\t\t\t\t\t\t\t\t'data-room': source_room?.login ?? msg.roomLogin,\n\t\t\t\t\t\t\t\t'data-user-id': user?.userID,\n\t\t\t\t\t\t\t\t'data-user': user?.lowerLogin,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmessage\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tklass = `${klass} ffz-notice-line user-notice-line tw-pd-y-05`;\n\n\t\t\t\t\tif ( ! is_raw )\n\t\t\t\t\t\tnotice = e('div', {\n\t\t\t\t\t\t\tclassName: 'tw-c-text-alt-2'\n\t\t\t\t\t\t}, notice);\n\n\t\t\t\t\tif ( highlight_tags && hl_position === 1 ) {\n\t\t\t\t\t\tout = [highlight_tags, notice, message ?? null];\n\t\t\t\t\t} else if ( message )\n\t\t\t\t\t\tout = [notice, message];\n\t\t\t\t\telse\n\t\t\t\t\t\tout = notice;\n\n\t\t\t\t} else {\n\t\t\t\t\tklass = `${klass} chat-line__message`;\n\t\t\t\t\tif ( highlight_tags && hl_position === 1 )\n\t\t\t\t\t\tout = [highlight_tags, message];\n\t\t\t\t\telse\n\t\t\t\t\t\tout = message;\n\t\t\t\t}\n\n\t\t\t\t// Check for hover actions, as those require we wrap the output in a few extra elements.\n\t\t\t\tconst hover_actions = (user && msg.id && ! msg.ffz_no_actions)\n\t\t\t\t\t? t.actions.renderHover(msg, this.props.showModerationIcons, current_user, current_room, e, this)\n\t\t\t\t\t: null;\n\n\t\t\t\tif ( hover_actions ) {\n\t\t\t\t\tklass = `${klass} tw-relative`;\n\n\t\t\t\t\tout = [\n\t\t\t\t\t\te('div', {\n\t\t\t\t\t\t\tclassName: 'chat-line__message-highlight tw-absolute tw-border-radius-medium tw-top-0 tw-bottom-0 tw-right-0 tw-left-0',\n\t\t\t\t\t\t\t'data-test-selector': 'chat-message-highlight'\n\t\t\t\t\t\t}),\n\t\t\t\t\t\te('div', {\n\t\t\t\t\t\t\tclassName: 'chat-line__message-container tw-relative'\n\t\t\t\t\t\t}, out),\n\t\t\t\t\t\thover_actions\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\t// If we don't have an override background color, try to assign\n\t\t\t\t// a value based on the mention.\n\t\t\t\tif (bg_css == null)\n\t\t\t\t\tbg_css = msg.mentioned && msg.mention_color\n\t\t\t\t\t\t? t.parent.inverse_colors.process(msg.mention_color)\n\t\t\t\t\t\t: null;\n\n\t\t\t\t// Now, return the final chat line color.\n\t\t\t\treturn e('div', {\n\t\t\t\t\tclassName: `${klass}${deleted ? ' ffz--deleted-message' : ''}${msg.mentioned ? ' ffz-mentioned' : ''}${bg_css ? ' ffz-custom-color' : ''}`,\n\t\t\t\t\tstyle: {backgroundColor: bg_css},\n\t\t\t\t\t'data-room-id': source_room?.id ?? msg.roomId ?? current_room.id,\n\t\t\t\t\t'data-room': source_room?.login ?? msg.roomLogin,\n\t\t\t\t\t'data-user-id': user?.userID,\n\t\t\t\t\t'data-user': user?.lowerLogin,\n\t\t\t\t\tonMouseOver: anim_hover ? t.chat.emotes.animHover : null,\n\t\t\t\t\tonMouseOut: anim_hover ? t.chat.emotes.animLeave : null\n\t\t\t\t}, out);\n\n\t\t\t} catch(err) {\n\t\t\t\tt.log.error(err);\n\t\t\t\tt.log.capture(err, {\n\t\t\t\t\textra: {\n\t\t\t\t\t\tprops: this.props\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\ttry {\n\t\t\t\t\tconsole.log('trying old 1');\n\t\t\t\t\treturn old_render.call(this);\n\t\t\t\t} catch(e2) {\n\t\t\t\t\tt.log.error('An error in Twitch shit.', e2);\n\t\t\t\t\tt.log.capture(e2, {\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tprops: this.props\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn 'An error occurred rendering this chat line.';\n\t\t\t\t}\n\t\t\t} };\n\n\t\t\tcls.prototype.render = cls.prototype.ffzNewRender;\n\n\t\t\t// Do this after a short delay to hopefully reduce the chance of React\n\t\t\t// freaking out on us.\n\t\t\tsetTimeout(() => this.ChatLine.forceUpdate());\n\t\t});\n\n\t\tthis.ExtensionLine.ready(cls => {\n\t\t\tconst old_render = cls.prototype.render;\n\n\t\t\tcls.prototype.render = function() { try {\n\t\t\t\tthis._ffz_no_scan = true;\n\n\t\t\t\tif ( ! this.props.installedExtensions )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst msg = t.chat.standardizeMessage(this.props.message),\n\t\t\t\t\text = msg && msg.extension;\n\t\t\t\tif( ! ext )\n\t\t\t\t\treturn null;\n\n\t\t\t\tif ( ! this.props.installedExtensions.some(val => {\n\t\t\t\t\tconst e = val.extension;\n\t\t\t\t\treturn e && (e.clientId || e.clientID) === (ext.clientId || ext.clientID) && e.version === ext.version;\n\t\t\t\t}) )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst color = t.parent.colors.process(ext.chatColor);\n\t\t\t\tlet room = msg.roomLogin ? msg.roomLogin : msg.channel ? msg.channel.slice(1) : undefined;\n\t\t\t\tif ( ! room && this.props.channelID ) {\n\t\t\t\t\tconst r = t.chat.getRoom(this.props.channelID, null, true);\n\t\t\t\t\tif ( r && r.login )\n\t\t\t\t\t\troom = msg.roomLogin = r.login;\n\t\t\t\t}\n\n\t\t\t\tconst u = t.site.getUser(),\n\t\t\t\t\tr = {id: this.props.channelID, login: room},\n\n\t\t\t\t\ttokens = msg.ffz_tokens = msg.ffz_tokens || t.chat.tokenizeMessage(msg, u),\n\t\t\t\t\trich_content = FFZRichContent && t.chat.pluckRichContent(tokens, msg),\n\t\t\t\t\tbg_css = msg.mentioned && msg.mention_color ? t.parent.inverse_colors.process(msg.mention_color) : null;\n\n\t\t\t\tif ( ! tokens.length )\n\t\t\t\t\treturn null;\n\n\t\t\t\treturn e('div', {\n\t\t\t\t\tclassName: `chat-line__message${msg.mentioned ? ' ffz-mentioned' : ''}${bg_css ? ' ffz-custom-color' : ''}`,\n\t\t\t\t\tstyle: {backgroundColor: bg_css},\n\t\t\t\t\t'data-room-id': r.id,\n\t\t\t\t\t'data-room': r.login,\n\t\t\t\t\t'data-extension': ext.clientID\n\t\t\t\t}, [\n\t\t\t\t\tthis.props.showTimestamps && e('span', {\n\t\t\t\t\t\tclassName: 'chat-line__timestamp'\n\t\t\t\t\t}, t.chat.formatTime(msg.timestamp)),\n\t\t\t\t\te('span', {\n\t\t\t\t\t\tclassName: 'chat-line__message--badges'\n\t\t\t\t\t}, t.chat.badges.render(msg, e)),\n\t\t\t\t\te('span', {\n\t\t\t\t\t\tclassName: 'chat-line__username notranslate',\n\t\t\t\t\t\trole: 'button',\n\t\t\t\t\t\tstyle: { color },\n\t\t\t\t\t\tonClick: this.onExtensionNameClick\n\t\t\t\t\t}, e('span', {\n\t\t\t\t\t\tclassName: 'chat-author__display-name'\n\t\t\t\t\t}, ext.displayName)),\n\t\t\t\t\te('span', null, ': '),\n\t\t\t\t\te('span', {\n\t\t\t\t\t\tclassName: 'message'\n\t\t\t\t\t}, t.chat.renderTokens(tokens, e)),\n\t\t\t\t\trich_content && e(FFZRichContent, rich_content)\n\t\t\t\t]);\n\n\t\t\t} catch(err) {\n\t\t\t\tt.log.info(err);\n\t\t\t\tt.log.capture(err, {\n\t\t\t\t\textra: {\n\t\t\t\t\t\tprops: this.props\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn old_render.call(this);\n\t\t\t} }\n\n\t\t\t// Do this after a short delay to hopefully reduce the chance of React\n\t\t\t// freaking out on us.\n\t\t\tsetTimeout(() => this.ExtensionLine.forceUpdate());\n\t\t})\n\t}\n\n\n\tcheckEffects() {\n\t\tfor(const inst of this.ChatLine.instances) {\n\t\t\tconst msg = inst.props.message,\n\t\t\t\ttokens = msg?.ffz_tokens;\n\n\t\t\tif ( tokens )\n\t\t\t\tfor(const token of tokens) {\n\t\t\t\t\tif ( token.type === 'emote' && token.modifier_flags )\n\t\t\t\t\t\tthis.emotes.ensureEffect(token.modifier_flags);\n\t\t\t\t}\n\t\t}\n\n\t\tfor(const inst of this.WhisperLine.instances) {\n\t\t\tconst msg = inst.props.message?._ffz_message,\n\t\t\t\ttokens = msg?.ffz_tokens;\n\n\t\t\tif ( tokens )\n\t\t\t\tfor(const token of tokens) {\n\t\t\t\t\tif ( token.type === 'emote' && token.modifier_flags )\n\t\t\t\t\t\tthis.emotes.ensureEffect(token.modifier_flags);\n\t\t\t\t}\n\t\t}\n\t}\n\n\tupdateLineById(id, clear_tokens = true, clear_badges = null) {\n\t\tif ( clear_badges == null )\n\t\t\tclear_badges = clear_tokens;\n\n\t\tfor(const inst of this.ChatLine.instances) {\n\t\t\tconst msg = inst.props.message;\n\t\t\tif ( msg?.id === id ) {\n\t\t\t\tif ( clear_badges )\n\t\t\t\t\tmsg.ffz_badges = msg.ffz_badge_cache = null;\n\n\t\t\t\tif ( clear_tokens ) {\n\t\t\t\t\tmsg.ffz_tokens = null;\n\t\t\t\t\tmsg.ffz_reply = null;\n\t\t\t\t\tmsg.highlights = msg.mentioned = msg.mention_color = msg.color_priority = null;\n\t\t\t\t}\n\n\t\t\t\tinst.forceUpdate();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor(const inst of this.WhisperLine.instances) {\n\t\t\tconst msg = inst.props.message?._ffz_message;\n\t\t\tif ( msg?.id === id ) {\n\t\t\t\t// TODO: Better support for clear_tokens and clear_badges\n\t\t\t\tif ( clear_badges || clear_tokens )\n\t\t\t\t\tmsg._ffz_message = null;\n\n\t\t\t\tinst.forceUpdate();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateLinesByUser(id, login, clear_tokens = true, clear_badges = true) {\n\t\tfor(const inst of this.ChatLine.instances) {\n\t\t\tconst msg = inst.props.message,\n\t\t\t\tuser = msg?.user;\n\t\t\tif ( user && ((id && id == user.id) || (login && login == user.login)) ) {\n\t\t\t\tif ( clear_badges )\n\t\t\t\t\tmsg.ffz_badges = msg.ffz_badge_cache = null;\n\n\t\t\t\tif ( clear_tokens ) {\n\t\t\t\t\tmsg.ffz_tokens = null;\n\t\t\t\t\tmsg.ffz_reply = null;\n\t\t\t\t\tmsg.highlights = msg.mentioned = msg.mention_color = msg.color_priority = null;\n\t\t\t\t}\n\n\t\t\t\tinst.forceUpdate();\n\t\t\t}\n\t\t}\n\n\t\tfor(const inst of this.WhisperLine.instances) {\n\t\t\tconst msg = inst.props.message?._ffz_message,\n\t\t\t\tuser = msg?.user;\n\t\t\tif ( user && ((id && id == user.id) || (login && login == user.login)) ) {\n\t\t\t\tmsg._ffz_message = null;\n\t\t\t\tinst.forceUpdate();\n\t\t\t}\n\t\t}\n\t}\n\n\n\tmaybeUpdateLines() {\n\t\tif ( this.chat.context.get('chat.rich.all-links') )\n\t\t\tthis.updateLines();\n\t}\n\n\tupdateLines() {\n\t\treturn this._updateLines();\n\t}\n\n\trerenderLines() {\n\t\treturn this._updateLines(false, false);\n\t}\n\n\tupdateLineTokens() {\n\t\treturn this._updateLines(true, false);\n\t}\n\n\tupdateLineBadges() {\n\t\treturn this._updateLines(false, true);\n\t}\n\n\t_updateLines(clear_tokens = true, clear_badges = true) {\n\t\tfor(const inst of this.ChatLine.instances) {\n\t\t\tconst msg = inst.props.message;\n\t\t\tif ( msg ) {\n\t\t\t\tif ( clear_badges )\n\t\t\t\t\tmsg.ffz_badge_cache = msg.ffz_badges = null;\n\n\t\t\t\tif ( clear_tokens ) {\n\t\t\t\t\tmsg.ffz_tokens = null;\n\t\t\t\t\tmsg.ffz_reply = null;\n\t\t\t\t\tmsg.highlights = msg.mentioned = msg.mention_color = msg.mention_priority = msg.clear_priority = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor(const inst of this.ExtensionLine.instances) {\n\t\t\tconst msg = inst.props.message;\n\t\t\tif ( msg ) {\n\t\t\t\tif ( clear_badges )\n\t\t\t\t\tmsg.ffz_badge_cache = msg.ffz_badges = null;\n\n\t\t\t\tif ( clear_tokens ) {\n\t\t\t\t\tmsg.ffz_tokens = null;\n\t\t\t\t\tmsg.ffz_reply = null;\n\t\t\t\t\tmsg.highlights = msg.mentioned = msg.mention_color = msg.mention_priority = msg.clear_priority = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor(const inst of this.WhisperLine.instances) {\n\t\t\tconst msg = inst.props.message;\n\t\t\tif ( msg && msg._ffz_message )\n\t\t\t\tmsg._ffz_message = null;\n\t\t}\n\n\t\tthis.ChatLine.forceUpdate();\n\t\tthis.ExtensionLine.forceUpdate();\n\t\tthis.WhisperLine.forceUpdate();\n\n\t\tthis.emit('chat:updated-lines');\n\t}\n}\n","'use strict';\n\n// ============================================================================\n// Chat Settings Menu\n// ============================================================================\n\nimport Twilight from 'site';\nimport Module from 'utilities/module';\nimport {createElement} from 'utilities/dom';\nimport { FFZEvent } from 'src/utilities/events';\n\nexport default class SettingsMenu extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('settings');\n\t\tthis.inject('i18n');\n\t\tthis.inject('chat');\n\t\tthis.inject('chat.badges');\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site');\n\t\tthis.inject('site.css_tweaks');\n\n\t\tthis.settings.add('chat.input.hide-identity', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Input >> Appearance',\n\t\t\t\ttitle: 'Display \"Chat Identity\" in the chat settings menu rather than the input box.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.SettingsMenu = this.fine.define(\n\t\t\t'chat-settings',\n\t\t\tn => n.renderUniversalOptions && n.onBadgesChanged,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\t/*this.ChatIdentityContainer = this.fine.define(\n\t\t\t'chat-identity-container',\n\t\t\tn => n.hideChatIdentityMenu && n.toggleBalloonRef,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);*/\n\t}\n\n\tasync onEnable() {\n\t\tthis.on('i18n:update', () => this.SettingsMenu.forceUpdate());\n\t\tthis.chat.context.on('changed:chat.scroller.freeze', () => this.SettingsMenu.forceUpdate());\n\t\tthis.chat.context.on('changed:chat.input.hide-identity', val => {\n\t\t\tthis.css_tweaks.toggle('hide-chat-identity', val);\n\t\t\tthis.SettingsMenu.forceUpdate();\n\t\t});\n\n\t\tthis.css_tweaks.toggle('hide-chat-identity', this.chat.context.get('chat.input.hide-identity'));\n\n\t\tconst t = this,\n\t\t\tReact = await this.site.findReact();\n\t\tif ( ! React )\n\t\t\treturn;\n\n\t\tconst createElement = React.createElement;\n\n\t\tthis.SettingsMenu.ready(cls => {\n\t\t\tconst old_render = cls.prototype.render,\n\t\t\t\told_universal = cls.prototype.renderUniversalOptions;\n\n\t\t\tcls.prototype.renderUniversalOptions = function() {\n\t\t\t\tconst val = old_universal.call(this);\n\n\t\t\t\tif ( ! this.ffzSettingsClick )\n\t\t\t\t\tthis.ffzSettingsClick = e => t.click(this, e);\n\n\t\t\t\tif ( ! this.ffzPauseClick )\n\t\t\t\t\tthis.ffzPauseClick = () => this.setState({ffzPauseMenu: ! this.state.ffzPauseMenu});\n\n\t\t\t\tval.props.children.push(<div class=\"tw-full-width tw-relative\">\n\t\t\t\t\t<button class=\"tw-block tw-border-radius-medium tw-full-width ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive\" onClick={this.ffzSettingsClick}>\n\t\t\t\t\t\t<div class=\"tw-align-items-center tw-flex tw-pd-05 tw-relative\">\n\t\t\t\t\t\t\t<div class=\"tw-flex-grow-1\">\n\t\t\t\t\t\t\t\t{t.i18n.t('site.menu_button', 'FrankerFaceZ Control Center')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t\t{t.cant_window && <div class=\"tw-mg-t-05 tw-c-text-alt-2\">\n\t\t\t\t\t\t<span class=\"ffz-i-attention\">\n\t\t\t\t\t\t\t{t.i18n.t('popup.error', 'We tried opening a pop-up window and could not. Make sure to allow pop-ups from Twitch.')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>}\n\t\t\t\t</div>);\n\n\t\t\t\t/*const f = t.chat.context.get('chat.scroller.freeze'),\n\t\t\t\t\treason = f === 2 ? t.i18n.t('key.ctrl', 'Ctrl Key') :\n\t\t\t\t\t\tf === 3 ? t.i18n.t('key.meta', 'Meta Key') :\n\t\t\t\t\t\t\tf === 4 ? t.i18n.t('key.alt', 'Alt Key') :\n\t\t\t\t\t\t\t\tf === 5 ? t.i18n.t('key.shift', 'Shift Key') :\n\t\t\t\t\t\t\t\t\tf === 6 ? t.i18n.t('key.ctrl_mouse', 'Ctrl or Mouse') :\n\t\t\t\t\t\t\t\t\t\tf === 7 ? t.i18n.t('key.meta_mouse', 'Meta or Mouse') :\n\t\t\t\t\t\t\t\t\t\t\tf === 8 ? t.i18n.t('key.alt_mouse', 'Alt or Mouse') :\n\t\t\t\t\t\t\t\t\t\t\t\tf === 9 ? t.i18n.t('key.shift_mouse', 'Shift or Mouse') :\n\t\t\t\t\t\t\t\t\t\t\t\t\tt.i18n.t('key.hover', 'Hover');\n\n\n\t\t\t\tval.props.children.push(<div class=\"tw-full-width tw-relative\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"tw-block tw-border-radius-medium tw-full-width ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive\"\n\t\t\t\t\t\tonClick={this.ffzPauseClick}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"tw-align-items-center tw-flex tw-pd-05 tw-relative\">\n\t\t\t\t\t\t\t<div class=\"tw-flex-grow-1\">\n\t\t\t\t\t\t\t\t{t.i18n.t('chat.settings.pause', 'Pause Chat')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"tw-mg-l-1 tw-pd-x-05\">{reason}</div>\n\t\t\t\t\t\t\t<figure class=\"tw-svg ffz-i-right-dir\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t</div>);*/\n\n\t\t\t\treturn val;\n\t\t\t}\n\n\t\t\tcls.prototype.ffzRenderIdentity = function() {\n\t\t\t\tif ( ! this.state || ! this.props || this.state.moderatorMode || this.state.chatAppearance || this.state.chatPause || this.state.followerMode || this.state.recentRaids || this.state.repliesAppearance || this.state.slowMode || this.props.isShowingChatFilterSettings || this.props.isShowingDeletedMessageDisplaySettings || ! this.props.isLoggedIn )\n\t\t\t\t\treturn null;\n\n\t\t\t\tif ( ! t.chat.context.get('chat.input.hide-identity') )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst user = this.props.data?.currentUser,\n\t\t\t\t\traw_badges = this.props.data?.user?.self?.displayBadges;\n\n\t\t\t\tif ( ! user || ! user.login || ! Array.isArray(raw_badges) )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst is_intl = user.login && user.displayName && user.displayName.trim().toLowerCase() !== user.login,\n\t\t\t\t\tcolor = t.parent.colors.process(user.chatColor),\n\t\t\t\t\tbadges = {};\n\n\t\t\t\tfor(const badge of raw_badges) {\n\t\t\t\t\tif ( badge?.setID && badge.version )\n\t\t\t\t\t\tbadges[badge.setID] = badge.version;\n\t\t\t\t}\n\n\t\t\t\tif ( ! this._ffzIdentityClick )\n\t\t\t\t\tthis._ffzIdentityClick = () => {\n\t\t\t\t\t\tdocument.querySelector('button[data-a-target=\"chat-badge-carousel-badge-icon\"]').click();\n\t\t\t\t\t\tthis.props.onCloseSettings();\n\t\t\t\t\t}\n\n\t\t\t\tconst msg = {\n\t\t\t\t\tuser,\n\t\t\t\t\tbadges,\n\t\t\t\t\tffz_badges: t.badges.getBadges(user.id, user.login, this.props.channelID, this.props.channelLogin),\n\t\t\t\t\troomID: this.props.channelID,\n\t\t\t\t\troomLogin: this.props.channelLogin\n\t\t\t\t};\n\n\t\t\t\tthis._ffzIdentityMsg = msg;\n\n\t\t\t\treturn (<div class=\"ffz-identity\">\n\t\t\t\t\t<div class=\"tw-mg-y-05 tw-pd-x-05\">\n\t\t\t\t\t\t<p class=\"tw-c-text-alt-2 tw-font-size-6 tw-strong tw-upcase\">\n\t\t\t\t\t\t\t{ t.i18n.t('chat.identity-menu', 'Chat Identity') }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tw-full-width tw-relative\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"tw-block tw-border-radius-medium tw-full-width ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive\"\n\t\t\t\t\t\t\tonClick={this._ffzIdentityClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"tw-align-items-center tw-flex tw-pd-05 tw-relative\">\n\t\t\t\t\t\t\t\t<div class=\"tw-flex-grow-1\">\n\t\t\t\t\t\t\t\t\t<span class=\"ffz--editor-name\">\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ffz--editor-badges\"\n\t\t\t\t\t\t\t\t\t\t\tdata-room-id={this.props.channelID}\n\t\t\t\t\t\t\t\t\t\t\tdata-room={this.props.channelLogin}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{t.badges.render(msg, createElement, true, true)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t<span class=\"tw-strong notranslate\" style={{color}}>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"name-display__name\">{ user.displayName || user.login}</span>\n\t\t\t\t\t\t\t\t\t\t\t{is_intl && <span class=\"intl-name\"> ({user.login}) </span>}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"tw-align-items-center tw-flex tw-flex-shrink-0 tw-mg-l-05\">\n\t\t\t\t\t\t\t\t\t<figure class=\"ffz-i-right-open\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>);\n\t\t\t}\n\n\t\t\tcls.prototype.render = function() {\n\t\t\t\tconst out = old_render.call(this);\n\n\t\t\t\ttry {\n\t\t\t\t\tconst children = out?.props?.children?.props?.children?.props?.children?.[1]?.props?.children?.props?.children;\n\t\t\t\t\t//const children = out?.props?.children?.props?.children?.[1]?.props?.children?.props?.children;\n\t\t\t\t\tif ( Array.isArray(children) ) {\n\t\t\t\t\t\tconst extra = this.ffzRenderIdentity();\n\t\t\t\t\t\tif ( extra )\n\t\t\t\t\t\t\tchildren.unshift(extra);\n\t\t\t\t\t}\n\n\t\t\t\t} catch(err) {\n\t\t\t\t\tt.log.error('Error rendering chat settings menu.', err);\n\t\t\t\t}\n\n\t\t\t\treturn out;\n\t\t\t}\n\n\t\t\tthis.SettingsMenu.forceUpdate();\n\t\t});\n\n\t\tthis.SettingsMenu.on('update', this.updateSettingsMenu, this);\n\n\t\tthis.SettingsMenu.on('unmount', inst => {\n\t\t\tinst.ffzSettingsClick = null;\n\t\t});\n\t}\n\n\tupdateSettingsMenu(inst) {\n\t\tconst el = this.fine.getChildNode(inst);\n\t\tif ( ! el || ! document.contains(el) )\n\t\t\treturn;\n\n\t\tlet cont;\n\n\t\tif ( inst.props?.editAppearance ) {\n\t\t\tthis.registerBadgePicker();\n\t\t\tconst name = el.querySelector('span[data-a-target=\"edit-display-name\"]');\n\t\t\tcont = name && name.closest('.tw-mg-t-1');\n\n\t\t} else\n\t\t\tcont = el.querySelector('.name-display > div:not([data-test-selector=\"edit-appearance-button\"])');\n\n\t\tif ( ! cont || ! el.contains(cont) )\n\t\t\treturn;\n\n\t\tconst user = inst.props?.data?.currentUser,\n\t\t\traw_badges = inst.props?.data?.user?.self?.displayBadges;\n\n\t\tif ( ! user || ! user.login || ! Array.isArray(raw_badges) )\n\t\t\treturn;\n\n\t\tconst is_intl = user.login && user.displayName && user.displayName.trim().toLowerCase() !== user.login,\n\t\t\tcolor = this.parent.colors.process(user.chatColor),\n\t\t\tbadges = {};\n\n\t\tfor(const child of cont.children) {\n\t\t\tif ( ! child?.classList )\n\t\t\t\tcontinue;\n\t\t\tif ( child.classList.contains('ffz--editor-name') )\n\t\t\t\tchild.remove();\n\t\t\telse\n\t\t\t\tchild.classList.add('tw-hide');\n\t\t}\n\n\t\tfor(const badge of raw_badges) {\n\t\t\tif ( badge?.setID && badge.version )\n\t\t\t\tbadges[badge.setID] = badge.version;\n\t\t}\n\n\t\tcont.appendChild(createElement('span', {className: 'ffz--editor-name'}, [\n\t\t\tcreateElement('span', {\n\t\t\t\tclassName: 'ffz--editor-badges',\n\t\t\t\t'data-room-id': inst.props.channelID,\n\t\t\t\t'data-room-login': inst.props.channelLogin\n\t\t\t}, this.badges.render({\n\t\t\t\tuser,\n\t\t\t\tbadges,\n\t\t\t\tffz_badges: this.badges.getBadges(user.id, user.login, inst.props.channelID, inst.props.channelLogin),\n\t\t\t\troomID: inst.props.channelID,\n\t\t\t\troomLogin: inst.props.channelLogin\n\t\t\t}, createElement, true, true)),\n\n\t\t\t<span class=\"tw-strong notranslate\" style={{color}}>\n\t\t\t\t<span class=\"name-display__name\">{user.displayName || user.login}</span>\n\t\t\t\t{is_intl && <span class=\"intl-name\"> ({user.login})</span>}\n\t\t\t</span>\n\t\t]));\n\t}\n\n\n\tregisterBadgePicker() {\n\t\tif ( this.BadgePicker )\n\t\t\treturn;\n\n\t\tthis.BadgePicker = this.fine.define(\n\t\t\t'badge-picker',\n\t\t\tn => n.onGlobalBadgeClicked && n.onGlobalBadgeKeyPress,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.BadgePicker.on('mount', this.updateBadgePicker, this);\n\t\tthis.BadgePicker.on('update', this.updateBadgePicker, this);\n\n\t\tthis.BadgePicker.ready((cls, instances) => {\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.updateBadgePicker(inst);\n\t\t});\n\t}\n\n\tupdateBadgePicker(inst) {\n\t\tconst el = this.fine.getChildNode(inst);\n\t\tif ( ! el ) {\n\t\t\t// This element doesn't populate right away. React is weird.\n\t\t\tif ( inst.props?.data?.loading === false && ! inst._ffz_try_again )\n\t\t\t\tinst._ffz_try_again = requestAnimationFrame(() =>\n\t\t\t\t\tthis.updateBadgePicker(inst));\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst cont = el.querySelector('.tw-flex-column');\n\t\tif ( ! cont )\n\t\t\treturn;\n\n\t\tconst badges = this.badges.getBadges(inst.props.userID, inst.props.userLogin);\n\t\tlet badge;\n\n\t\tfor(const b of badges) {\n\t\t\tconst bd = this.badges.badges[b?.id];\n\t\t\tif ( bd && ! bd.addon )\n\t\t\t\tbadge = bd;\n\t\t}\n\n\t\tconst ffz = cont.querySelector('.ffz--badge-selector');\n\t\tif ( ffz ) {\n\t\t\tif ( ! badge )\n\t\t\t\tffz.remove();\n\t\t\treturn;\n\n\t\t} else if ( ! badge )\n\t\t\treturn;\n\n\t\tconst out = (<div class=\"ffz--badge-selector tw-border-b tw-mg-b-1\">\n\t\t\t<div class=\"tw-mg-y-05 tw-pd-x-05\">\n\t\t\t\t<p class=\"tw-c-text-alt-2 tw-font-size-6 tw-strong tw-upcase\">\n\t\t\t\t\t{ this.i18n.t('chat.ffz-badge.title', 'FrankerFaceZ Badge') }\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<p class=\"tw-mg-b-05 tw-pd-x-05\">\n\t\t\t\t\t{ this.i18n.tList(\n\t\t\t\t\t\t'chat.ffz-badge.about',\n\t\t\t\t\t\t'This badge appears globally for users with FrankerFaceZ. Please visit the {website} to change this badge.',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twebsite: (<a href=\"https://www.frankerfacez.com/subscribe\" class=\"ffz-link\" rel=\"noopener noreferrer\" target=\"_blank\">\n\t\t\t\t\t\t\t\t{this.i18n.t('chat.ffz-badge.site-link', 'FrankerFaceZ website')}\n\t\t\t\t\t\t\t</a>)\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div role=\"radiogroup\" class=\"tw-align-items-center tw-flex tw-flex-wrap tw-mg-b-05 tw-mg-t-05 tw-pd-x-05\">\n\t\t\t\t<div class=\"tw-mg-r-1 tw-mg-y-05\">\n\t\t\t\t\t<div class=\"tw-inline-flex\">\n\t\t\t\t\t\t<div class=\"edit-appearance__badge-chooser edit-appearance__badge-chooser--selected tw-border-radius-small\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\talt={badge.title}\n\t\t\t\t\t\t\t\tsrc={badge.urls[2]}\n\t\t\t\t\t\t\t\tsrcset={`${badge.urls[2]} 1x, ${badge.urls[4]} 2x`}\n\t\t\t\t\t\t\t\tstyle={{backgroundColor: badge.color || 'transparent'}}\n\t\t\t\t\t\t\t\trole=\"radio\"\n\t\t\t\t\t\t\t\taria-checked=\"true\"\n\t\t\t\t\t\t\t\tclass=\"tw-full-height tw-full-width\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>);\n\n\t\tconst after = cont.querySelector('[data-test-selector=\"global-badges-test-selector\"]')?.nextElementSibling;\n\t\tif ( after )\n\t\t\tcont.insertBefore(out, after);\n\t\telse\n\t\t\tcont.appendChild(out);\n\t}\n\n\n\tcloseMenu(inst) {\n\t\tconst super_parent = this.fine.searchParent(inst, n => n.setChatInputRef && n.setAutocompleteInputRef, 100),\n\t\t\tparent = super_parent && this.fine.searchTree(super_parent, n => n.props && n.props.isSettingsOpen && n.onClickSettings);\n\n\t\tif ( parent )\n\t\t\tparent.onClickSettings();\n\t}\n\n\tclick(inst, event) {\n\t\tconst target = event.currentTarget,\n\t\t\tpage = target && target.dataset && target.dataset.page;\n\n\t\tconst evt = new FFZEvent({\n\t\t\titem: page,\n\t\t\tevent,\n\t\t\terrored: false\n\t\t});\n\n\t\tthis.emit('main_menu:open', evt);\n\t\tif ( evt.errored ) {\n\t\t\tthis.cant_window = true;\n\t\t\tthis.SettingsMenu.forceUpdate();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.closeMenu(inst);\n\t}\n\n\t/*old_click(inst, event) {\n\t\t// If we're on a page with minimal root, we want to open settings\n\t\t// in a popout as we're almost certainly within Popout Chat.\n\t\tconst layout = this.resolve('site.layout');\n\t\tif ( (layout && layout.is_minimal) || (event && (event.ctrlKey || event.shiftKey)) ) {\n\t\t\tconst win = window.open(\n\t\t\t\t'https://twitch.tv/popout/frankerfacez/chat?ffz-settings',\n\t\t\t\t'_blank',\n\t\t\t\t'resizable=yes,scrollbars=yes,width=850,height=600'\n\t\t\t);\n\n\t\t\tif ( win )\n\t\t\t\twin.focus();\n\t\t\telse {\n\t\t\t\tthis.cant_window = true;\n\t\t\t\tthis.SettingsMenu.forceUpdate();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t} else {\n\t\t\tconst target = event.currentTarget,\n\t\t\t\tpage = target && target.dataset && target.dataset.page,\n\t\t\t\tmenu = this.resolve('main_menu');\n\n\t\t\tif ( menu ) {\n\t\t\t\tif ( page )\n\t\t\t\t\tmenu.requestPage(page);\n\t\t\t\tif ( menu.showing )\n\t\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.emit('site.menu_button:clicked');\n\t\t}\n\n\t\tthis.closeMenu(inst);\n\t}*/\n}\n","'use strict';\n\n// ============================================================================\n// Chat Emote Menu\n// ============================================================================\n\nimport {has, get, once, maybe_call, set_equals, getTwitchEmoteURL, getTwitchEmoteSrcSet, deep_equals} from 'utilities/object';\nimport {TWITCH_GLOBAL_SETS, EmoteTypes, TWITCH_POINTS_SETS, TWITCH_PRIME_SETS, WEBKIT_CSS as WEBKIT, IS_OSX, KNOWN_CODES, REPLACEMENT_BASE, REPLACEMENTS, KEYS} from 'utilities/constants';\nimport {HIDDEN_CATEGORIES, CATEGORIES, CATEGORY_SORT, IMAGE_PATHS} from 'src/modules/chat/emoji';\nimport {ClickOutside} from 'utilities/dom';\n\nimport Twilight from 'site';\nimport Module from 'utilities/module';\n\nimport SUB_STATUS from './sub_status.gql';\nimport { FFZEvent } from 'src/utilities/events';\n//import Tooltip from 'src/utilities/tooltip';\n\nconst TIERS = {\n\t1000: 'Tier 1',\n\t2000: 'Tier 2',\n\t3000: 'Tier 3'\n};\n\nconst TONE_EMOJI = [\n\t'the_horns',\n\t'raised_back_of_hand',\n\t'ok_hand',\n\t'+1',\n\t'clap',\n\t'fist',\n\t'pinched_fingers',\n\t'wave',\n\t'pinch',\n\t'victory',\n\t'love_you_gesture'\n];\n\n\nfunction scrollIntoView(el, container) {\n\tif ( ! container )\n\t\tcontainer = el.closest('.simplebar-scroll-content') ?? el.parentElement;\n\n\tconst height = container.offsetHeight,\n\t\tel_height = el.offsetHeight,\n\t\tel_top = el.offsetTop;\n\n\tif ( el_height >= height ) {\n\t\tcontainer.scrollTop = el_top;\n\t\treturn;\n\t}\n\n\tconst pos = el_top + (el_height / 2) - (height / 2);\n\tcontainer.scrollTop = pos;\n}\n\n\nfunction maybe_date(val) {\n\tif ( ! val )\n\t\treturn val;\n\n\ttry {\n\t\treturn new Date(val);\n\t} catch(err) {\n\t\treturn null;\n\t}\n}\n\n\nconst COLLATOR = window?.Intl?.Collator && new Intl.Collator(undefined, {numeric: true});\n\n\nconst EMOTE_SORTERS = [\n\tfunction id_asc(a, b) {\n\t\tif ( COLLATOR )\n\t\t\treturn COLLATOR.compare(a.id, b.id);\n\n\t\tif ( a.id < b.id ) return -1;\n\t\tif ( a.id > b.id ) return 1;\n\t\treturn 0;\n\t},\n\tfunction id_desc(a, b) {\n\t\tif ( COLLATOR )\n\t\t\treturn COLLATOR.compare(b.id, a.id);\n\n\t\tif ( a.id > b.id ) return -1;\n\t\tif ( a.id < b.id ) return 1;\n\t\treturn 0;\n\t},\n\tfunction name_asc(a, b) {\n\t\tconst a_n = a.name.toLowerCase(),\n\t\t\tb_n = b.name.toLowerCase();\n\n\t\tif ( a_n < b_n ) return -1;\n\t\tif ( a_n > b_n ) return 1;\n\n\t\tif ( COLLATOR )\n\t\t\treturn COLLATOR.compare(a.id, b.id);\n\n\t\tif ( a.id < b.id ) return -1;\n\t\tif ( a.id > b.id ) return 1;\n\t\treturn 0;\n\t},\n\tfunction name_desc(a, b) {\n\t\tconst a_n = a.name.toLowerCase(),\n\t\t\tb_n = b.name.toLowerCase();\n\n\t\tif ( a_n > b_n ) return -1;\n\t\tif ( a_n < b_n ) return 1;\n\n\t\tif ( COLLATOR )\n\t\t\treturn COLLATOR.compare(b.id, a.id);\n\n\t\tif ( a.id > b.id ) return -1;\n\t\tif ( a.id < b.id ) return 1;\n\t\treturn 0;\n\t},\n\tfunction native_asc(a, b) {\n\t\tif ( a.order != null || b.order != null ) {\n\t\t\tif ( a.order && b.order == null ) return -1;\n\t\t\tif ( b.order && a.order == null ) return 1;\n\n\t\t\tif ( a.order < b.order ) return -1;\n\t\t\tif ( a.order > b.order ) return 1;\n\t\t}\n\n\t\tif ( COLLATOR )\n\t\t\treturn COLLATOR.compare(a.id, b.id);\n\n\t\tif ( a.id < b.id ) return -1;\n\t\tif ( a.id > b.id ) return 1;\n\t\treturn 0;\n\t},\n\tfunction native_desc(a, b) {\n\t\tif ( a.order != null || b.order != null ) {\n\t\t\tif ( a.order && b.order == null ) return 1;\n\t\t\tif ( b.order && a.order == null ) return -1;\n\n\t\t\tif ( a.order < b.order ) return 1;\n\t\t\tif ( a.order > b.order ) return -1;\n\t\t}\n\n\t\tif ( COLLATOR )\n\t\t\treturn COLLATOR.compare(a.id, b.id);\n\n\t\tif ( a.id < b.id ) return 1;\n\t\tif ( a.id > b.id ) return -1;\n\t\treturn 0;\n\t}\n];\n\n\nfunction sort_sets(a, b) {\n\tconst a_sk = a.sort_key,\n\t\tb_sk = b.sort_key;\n\n\tif ( a_sk < b_sk ) return -1;\n\tif ( b_sk < a_sk ) return 1;\n\n\tconst a_n = a.title.toLowerCase(),\n\t\tb_n = b.title.toLowerCase();\n\n\tif ( a_n < b_n ) return -1;\n\tif ( b_n < a_n ) return 1;\n\treturn 0;\n}\n\n\nexport default class EmoteMenu extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('staging');\n\t\tthis.inject('settings');\n\t\tthis.inject('i18n');\n\t\tthis.inject('chat');\n\t\tthis.inject('chat.badges');\n\t\tthis.inject('chat.emotes');\n\t\tthis.inject('chat.emoji');\n\n\t\tthis.inject('site');\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site.apollo');\n\t\tthis.inject('site.css_tweaks');\n\n\t\tthis.SUB_STATUS = SUB_STATUS;\n\n\t\tthis.settings.add('chat.emote-menu.shortcut', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> General',\n\t\t\t\ttitle: 'Use Ctrl+E to open the Emote Menu.',\n\t\t\t\tdescription: 'When enabled and you press Ctrl+E with the chat input focused, the emote menu will open.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.modifiers', {\n\t\t\tdefault: 0,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> General',\n\t\t\t\ttitle: 'Emote Modifiers',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Disabled'},\n\t\t\t\t\t{value: 1, title: 'In-Line'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.clear-search', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> General',\n\t\t\t\ttitle: 'Reset search when closing the Emote Menu.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.enabled', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> General',\n\t\t\t\ttitle: 'Use the FrankerFaceZ Emote Menu.',\n\t\t\t\tdescription: 'The FFZ emote menu replaces the built-in Twitch emote menu and provides enhanced functionality.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: () => this.EmoteMenu.forceUpdate()\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.icon', {\n\t\t\trequires: ['chat.emote-menu.enabled', 'context.bttv.emote_menu'],\n\t\t\tdefault: false,\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( ! ctx.get('chat.emote-menu.enabled') )\n\t\t\t\t\treturn false;\n\n\t\t\t\treturn ctx.get('context.bttv.emote_menu') || val;\n\t\t\t},\n\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> Appearance',\n\t\t\t\ttitle: 'Replace the emote menu icon with the FFZ icon for that classic feel.',\n\t\t\t\tdescription: '**Note:** This setting may be forcibly enabled if other emote menus are detected, to ensure you can visually identify the FFZ Emote Menu.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.show-quick-nav', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> Appearance',\n\t\t\t\ttitle: 'Show a quick navigation bar along the side of the menu.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.tall', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> Appearance',\n\t\t\t\ttitle: 'Use extra height for the emote menu.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.show-heading', {\n\t\t\tdefault: 1,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> Appearance',\n\t\t\t\ttitle: 'Show Headers',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Never'},\n\t\t\t\t\t{value: 1, title: 'Always'},\n\t\t\t\t\t{value: 2, title: 'When Not Searching'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.show-search', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> Appearance',\n\t\t\t\ttitle: 'Show the search box.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.reduced-padding', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> Appearance',\n\t\t\t\ttitle: 'Use reduced padding.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\n\t\tthis.settings.add('chat.emote-menu.default-tab', {\n\t\t\tdefault: 'channel',\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> General',\n\t\t\t\ttitle: 'Default Tab',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 'fav', title: 'Favorites'},\n\t\t\t\t\t{value: 'channel', title: 'Channel'},\n\t\t\t\t\t{value: 'effect', title: 'Emote Effects'},\n\t\t\t\t\t{value: 'all', title: 'My Emotes'},\n\t\t\t\t\t{value: 'emoji', title: 'Emoji'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.effect-tab', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> General',\n\t\t\t\ttitle: 'Display Emote Effects in their own tab.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.tooltips', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> Appearance',\n\t\t\t\ttitle: 'Display emote preview tool-tips in the FFZ Emote Menu.',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\tdescription: 'You may wish to disable this for performance reasons.'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.show-emoji', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> General',\n\t\t\t\ttitle: 'Display emoji in the emote menu.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\n\t\tthis.settings.add('chat.emote-menu.combine-tabs', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> General',\n\t\t\t\ttitle: 'Display all emotes on one tab.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.stay-loaded', {\n\t\t\trequires: ['chat.emote-menu.combine-tabs'],\n\t\t\tdefault: null,\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( val == null )\n\t\t\t\t\tval = ctx.get('chat.emote-menu.combine-tabs');\n\t\t\t\treturn val;\n\t\t\t},\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> General',\n\t\t\t\ttitle: 'Stay loaded after opening.',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\tdescription: `This causes the emote menu to stay in the DOM even when it's not visible. Enabling this may help the site perform better when opening the menu if it's slow. By default, this setting is enabled when using \\`Display all emotes on one tab.\\``\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.sort-emotes', {\n\t\t\tdefault: 4,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> Sorting',\n\t\t\t\ttitle: 'Sort Emotes By',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 4, title: 'Native Order, Ascending'},\n\t\t\t\t\t{value: 5, title: 'Native Order, Descending'},\n\t\t\t\t\t{value: 0, title: 'Order Added (ID), Ascending'},\n\t\t\t\t\t{value: 1, title: 'Order Added (ID), Descending'},\n\t\t\t\t\t{value: 2, title: 'Name, Ascending'},\n\t\t\t\t\t{value: 3, title: 'Name, Descending'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.emote-menu.sort-tiers-last', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Emote Menu >> Sorting',\n\t\t\t\ttitle: 'List emotes from higher sub tiers last.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\n\t\tthis.EmoteMenu = this.fine.define(\n\t\t\t'chat-emote-menu',\n\t\t\tn => n.getAllEmoteSets && n.getSortedChannelEmotes && n.props?.emotePickerSource,\n\t\t\t//n => n.subscriptionProductHasEmotes,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t)\n\n\n\t\tthis.MenuWrapper = this.fine.wrap('ffz-emote-menu');\n\t\t//this.MenuSection = this.fine.wrap('ffz-menu-section');\n\t\t//this.MenuEmote = this.fine.wrap('ffz-menu-emote');\n\t}\n\n\tasync onEnable() {\n\t\tthis.on('i18n:update', () => this.EmoteMenu.forceUpdate());\n\t\tthis.on('chat.emotes:update-default-sets', this.maybeUpdate, this);\n\t\tthis.on('chat.emotes:update-user-sets', this.maybeUpdate, this);\n\t\tthis.on('chat.emotes:update-room-sets', this.maybeUpdate, this);\n\t\tthis.on('chat.emotes:loaded', this.maybeUpdate, this);\n\t\tthis.on('chat.emotes:change-favorite', this.maybeUpdate, this);\n\t\tthis.on('chat.emotes:change-hidden', this.maybeUpdate, this);\n\t\tthis.on('chat.emoji:populated', this.maybeUpdate, this);\n\n\t\tthis.chat.context.on('changed:chat.emote-menu.enabled', () =>\n\t\t\tthis.EmoteMenu.forceUpdate());\n\n\t\tconst rebuild = () => {\n\t\t\tfor(const inst of this.MenuWrapper.instances)\n\t\t\t\tinst.rebuildData();\n\t\t}\n\n\t\tthis.chat.context.on('changed:chat.emotes.enabled', rebuild);\n\t\tthis.chat.context.on('changed:chat.emote-menu.modifiers', rebuild);\n\t\tthis.chat.context.on('changed:chat.emote-menu.show-emoji', rebuild);\n\t\tthis.chat.context.on('changed:chat.emote-menu.tooltips', rebuild);\n\t\tthis.chat.context.on('changed:chat.fix-bad-emotes', rebuild);\n\t\tthis.chat.context.on('changed:chat.emote-menu.effect-tab', rebuild);\n\t\tthis.chat.context.on('changed:chat.emote-menu.sort-emotes', rebuild);\n\t\tthis.chat.context.on('changed:chat.emote-menu.sort-tiers-last', rebuild);\n\n\t\tthis.chat.context.on('changed:chat.emoji.style', this.updateEmojiVariables, this);\n\n\t\tthis.chat.context.getChanges('chat.emote-menu.icon', val =>\n\t\t\tthis.css_tweaks.toggle('emote-menu', val));\n\n\t\tthis.updateEmojiVariables();\n\n\t\tthis.css_tweaks.setVariable('emoji-menu--sheet', `//cdn.frankerfacez.com/static/emoji/images/sheet-twemoji-36.png`);\n\t\tthis.css_tweaks.setVariable('emoji-menu--count', 58);\n\t\tthis.css_tweaks.setVariable('emoji-menu--size', 36);\n\n\t\tconst t = this,\n\t\t\tReact = await this.site.findReact(),\n\t\t\tcreateElement = React && React.createElement;\n\n\t\tif ( ! createElement )\n\t\t\treturn t.log.warn('Unable to get React.');\n\n\t\tthis.defineClasses();\n\n\n\t\tthis.EmoteMenu.ready(cls => {\n\t\t\tconst old_render = cls.prototype.render;\n\n\t\t\tcls.prototype.render = function() {\n\t\t\t\tthis._ffz_no_scan = false;\n\n\t\t\t\tif ( ! this.props ||\n\t\t\t\t\t this.props.emotePickerSource === 'bits-rewards' ||\n\t\t\t\t\t ! has(this.props, 'channelID') ||\n\t\t\t\t\t ! t.chat.context.get('chat.emote-menu.enabled')\n\t\t\t\t) {\n\t\t\t\t\treturn old_render.call(this);\n\t\t\t\t}\n\n\t\t\t\treturn (<t.MenuErrorWrapper visible={this.props.visible}>\n\t\t\t\t\t<t.MenuComponent\n\t\t\t\t\t\tsource={this.props.emotePickerSource}\n\t\t\t\t\t\tvisible={this.props.visible}\n\t\t\t\t\t\ttoggleVisibility={this.props.toggleVisibility}\n\t\t\t\t\t\tchannel_data={this.props.channelData}\n\t\t\t\t\t\temote_data={this.props.emoteSetsData}\n\t\t\t\t\t\tuser_id={this.props.currentUserID}\n\t\t\t\t\t\tchannel_id={this.props.channelID}\n\t\t\t\t\t\tloading={this.props.channelData?.loading || this.props.emoteSetsData?.loading}\n\t\t\t\t\t\terror={this.props.channelData?.error || this.props.emoteSetsData?.error}\n\t\t\t\t\t\tonClickToken={this.props.onClickToken}\n\t\t\t\t\t/>\n\t\t\t\t</t.MenuErrorWrapper>)\n\t\t\t}\n\n\t\t\tthis.EmoteMenu.forceUpdate();\n\t\t})\n\t}\n\n\tupdateEmojiVariables() {\n\n\t\tconst style = this.chat.context.get('chat.emoji.style') || 'twitter',\n\t\t\tbase = `//cdn.frankerfacez.com/static/emoji/images/sheet-${IMAGE_PATHS[style] || 'twemoji'}-`;\n\n\t\tconst emoji_size = this.emoji_size = 36,\n\t\t\tsheet_count = this.emoji_sheet_count = 58,\n\t\t\tsheet_size = this.emoji_sheet_size = sheet_count * (emoji_size + 2),\n\t\t\tsheet_pct = this.emoji_sheet_pct = 100 * sheet_size / emoji_size;\n\n\t\tthis.emoji_sheet_remain = sheet_size - emoji_size;\n\n\t\tthis.css_tweaks.set('emoji-menu', `.ffz--emoji-tone-picker__emoji,.emote-picker__emoji .emote-picker__emote-figure {\n\tbackground-size: ${sheet_pct}% ${sheet_pct}%;\n\tbackground-image: url(\"${base}36.png\");\n\tbackground-image: ${WEBKIT}image-set(\n\t\turl(\"${base}18.png\") 0.5x,\n\t\turl(\"${base}36.png\") 1x,\n\t\turl(\"${base}72.png\") 2x\n\t);\n}`);\n\t}\n\n\tmaybeUpdate() {\n\t\tif ( ! this.chat.context.get('chat.emote-menu.enabled') )\n\t\t\treturn;\n\n\t\tfor(const inst of this.MenuWrapper.instances)\n\t\t\tinst.rebuildData();\n\t}\n\n\n\tdefineClasses() {\n\t\tconst t = this,\n\t\t\tstorage = this.settings.provider,\n\t\t\tReact = this.site.getReact(),\n\t\t\tcreateElement = React && React.createElement;\n\n\t\tthis.EmojiTonePicker = class FFZEmojiTonePicker extends React.Component {\n\t\t\tconstructor(props) {\n\t\t\t\tsuper(props);\n\n\t\t\t\tthis.onClick = () => this.setState({open: ! this.state.open});\n\t\t\t\tthis.onMouseEnter = () => this.state.open || this.setState({emoji: this.pickRandomEmoji()});\n\t\t\t\tthis.onClickOutside = () => this.state.open && this.setState({open: false});\n\n\t\t\t\tthis.clickTone = event => {\n\t\t\t\t\tthis.props.pickTone(event.currentTarget.dataset.tone);\n\t\t\t\t\tthis.setState({open: false});\n\t\t\t\t}\n\n\t\t\t\tthis.element = null;\n\t\t\t\tthis.saveRef = element => this.element = element;\n\n\t\t\t\tthis.state = {\n\t\t\t\t\topen: false,\n\t\t\t\t\temoji: this.pickRandomEmoji(),\n\t\t\t\t\ttone: null\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcomponentDidMount() {\n\t\t\t\tif ( this.element )\n\t\t\t\t\tthis._clicker = new ClickOutside(this.element, this.onClickOutside);\n\t\t\t}\n\n\t\t\tcomponentWillUnmount() {\n\t\t\t\tif ( this._clicker ) {\n\t\t\t\t\tthis._clicker.destroy();\n\t\t\t\t\tthis._clicker = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpickRandomEmoji() { // eslint-disable-line class-methods-use-this\n\t\t\t\tconst possibilities = this.props.choices,\n\t\t\t\t\tpick = Math.floor(Math.random() * possibilities.length);\n\n\t\t\t\treturn possibilities[pick];\n\t\t\t}\n\n\t\t\trenderTone(data, tone) {\n\t\t\t\tif ( ! data )\n\t\t\t\t\treturn null;\n\n\t\t\t\treturn (<button\n\t\t\t\t\tkey={data.code}\n\t\t\t\t\tdata-tone={tone}\n\t\t\t\t\tclass=\"tw-interactive tw-block tw-full-width ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive tw-pd-y-05 tw-pd-x-2\"\n\t\t\t\t\tonClick={this.clickTone}\n\t\t\t\t>\n\t\t\t\t\t{this.renderEmoji(data)}\n\t\t\t\t</button>)\n\t\t\t}\n\n\t\t\trenderToneMenu() {\n\t\t\t\tif ( ! this.state.open )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst emoji = this.state.emoji;\n\t\t\t\tif ( ! emoji || ! emoji.variants )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst tones = Object.entries(emoji.variants).map(([tone, emoji]) => this.renderTone(emoji, tone));\n\n\t\t\t\treturn (<div class=\"tw-absolute ffz-balloon ffz-il-tooltip--up ffz-il-tooltip--align-right ffz-balloon tw-block\">\n\t\t\t\t\t<div class=\"tw-border-b tw-border-l tw-border-r tw-border-t tw-border-radius-medium tw-c-background-base tw-elevation-1\">\n\t\t\t\t\t\t{this.renderTone(emoji, null)}\n\t\t\t\t\t\t{tones}\n\t\t\t\t\t</div>\n\t\t\t\t</div>);\n\t\t\t}\n\n\t\t\trenderEmoji(data) { // eslint-disable-line class-methods-use-this\n\t\t\t\tif ( ! data )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst emoji_x = (data.sheet_x * (t.emoji_size + 2)) + 1,\n\t\t\t\t\temoji_y = (data.sheet_y * (t.emoji_size + 2)) + 1,\n\n\t\t\t\t\tx_pct = 100 * emoji_x / t.emoji_sheet_remain,\n\t\t\t\t\ty_pct = 100 * emoji_y / t.emoji_sheet_remain;\n\n\t\t\t\treturn (<figure\n\t\t\t\t\tclass=\"ffz--emoji-tone-picker__emoji\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundPosition: `${x_pct}% ${y_pct}%`\n\t\t\t\t\t}}\n\t\t\t\t/>)\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\tconst emoji = this.state.emoji,\n\t\t\t\t\ttone = this.props.tone,\n\t\t\t\t\ttoned = tone && emoji.variants[tone];\n\n\t\t\t\treturn (<div ref={this.saveRef} class=\"ffz--emoji-tone-picker tw-relative tw-mg-l-1\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"tw-interactive tw-button tw-button--dropmenu ffz-button--hollow\"\n\t\t\t\t\t\tonClick={this.onClick}\n\t\t\t\t\t\tonMouseEnter={this.onMouseEnter}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"tw-button__text\">\n\t\t\t\t\t\t\t{this.renderEmoji(toned || emoji)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"tw-button__icon tw-button__icon--right\">\n\t\t\t\t\t\t\t<figure class=\"ffz-i-down-dir\" />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t{this.renderToneMenu()}\n\t\t\t\t</div>)\n\t\t\t}\n\t\t}\n\n\t\tthis.MenuSection = class FFZMenuSection extends React.Component {\n\t\t\tconstructor(props) {\n\t\t\t\tsuper(props);\n\n\t\t\t\tthis.ref = null;\n\t\t\t\tthis.saveRef = ref => {\n\t\t\t\t\tif ( this.ref )\n\t\t\t\t\t\tthis.props.stopObserving(this.ref);\n\n\t\t\t\t\tthis.ref = ref;\n\t\t\t\t\tif ( ref )\n\t\t\t\t\t\tthis.props.startObserving(this.ref, this);\n\t\t\t\t}\n\n\t\t\t\tconst collapsed = storage.get('emote-menu.collapsed'),\n\t\t\t\t\thidden = storage.get('emote-menu.hidden-sets');\n\n\t\t\t\tthis.state = {\n\t\t\t\t\tactive: false,\n\t\t\t\t\tactiveEmote: -1,\n\t\t\t\t\thidden: hidden && props.data && hidden.includes(props.data.hide_key || props.data.key),\n\t\t\t\t\tcollapsed: collapsed && props.data && collapsed.includes(props.data.key),\n\t\t\t\t\tintersecting: window.IntersectionObserver ? false : true\n\t\t\t\t}\n\n\t\t\t\tthis.keyHeading = this.keyHeading.bind(this);\n\t\t\t\tthis.clickHeading = this.clickHeading.bind(this);\n\t\t\t\tthis.clickEmote = this.clickEmote.bind(this);\n\n\t\t\t\tthis.mouseEnter = () => this.state.intersecting || this.setState({intersecting: true});\n\n\t\t\t\tthis.onMouseEnter = this.onMouseEnter.bind(this);\n\t\t\t\tthis.onMouseLeave = this.onMouseLeave.bind(this);\n\t\t\t}\n\n\t\t\tcomponentDidMount() {\n\t\t\t\tthis.props.addSection(this);\n\n\t\t\t\tif ( this.ref )\n\t\t\t\t\tthis.props.startObserving(this.ref, this);\n\t\t\t}\n\n\t\t\tcomponentWillUnmount() {\n\t\t\t\tthis.props.removeSection(this);\n\n\t\t\t\tif ( this.ref )\n\t\t\t\t\tthis.props.stopObserving(this.ref);\n\t\t\t}\n\n\t\t\tkeyInteract(code) { // eslint-disable-line\n\t\t\t\t/* no-op */\n\t\t\t}\n\n\t\t\tclickEmote(event) {\n\t\t\t\tif ( this.props.visibility_control ) {\n\t\t\t\t\tconst ds = event.currentTarget.dataset;\n\t\t\t\t\tlet source, id = ds.id;\n\n\t\t\t\t\tif ( ds.provider === 'twitch' )\n\t\t\t\t\t\tsource = 'twitch';\n\t\t\t\t\telse if ( ds.provider === 'ffz' ) {\n\t\t\t\t\t\tconst emote_set = t.emotes.emote_sets[ds.set],\n\t\t\t\t\t\t\temote = emote_set && emote_set.emotes[id];\n\n\t\t\t\t\t\tif ( ! emote )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tsource = emote_set.source || 'ffz';\n\t\t\t\t\t\tid = emote.id;\n\n\t\t\t\t\t} else\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tt.emotes.toggleHidden(source, id);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( t.emotes.handleClick(event, true) )\n\t\t\t\t\treturn;\n\n\t\t\t\t// Check for magic.\n\t\t\t\tlet prefix = '', postfix = '';\n\t\t\t\tconst effects = event.currentTarget.dataset.effects,\n\t\t\t\t\tis_prefix = event.currentTarget.dataset.effectPrefix === 'true';\n\t\t\t\tif ( effects?.length > 0 && effects != '0' && t.emotes.target_emote ) {\n\t\t\t\t\tif ( is_prefix )\n\t\t\t\t\t\tpostfix = ` ${t.emotes.target_emote.name}`;\n\t\t\t\t\telse\n\t\t\t\t\t\tprefix = `${t.emotes.target_emote.name} `;\n\t\t\t\t}\n\n\t\t\t\tthis.props.onClickToken(`${prefix}${event.currentTarget.dataset.name}${postfix}`);\n\t\t\t}\n\n\t\t\tkeyHeading(event) {\n\t\t\t\tif ( event.keyCode === KEYS.Enter || event.keyCode === KEYS.Space )\n\t\t\t\t\tthis.clickHeading();\n\t\t\t}\n\n\t\t\tclickHeading() {\n\t\t\t\tif ( this.props.visibility_control ) {\n\t\t\t\t\tconst hidden = storage.get('emote-menu.hidden-sets') || [],\n\t\t\t\t\t\tkey = this.props.data.hide_key || this.props.data.key,\n\t\t\t\t\t\tidx = hidden.indexOf(key);\n\n\t\t\t\t\tif ( key === 'twitch-current-channel' )\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tif ( idx === -1 ) {\n\t\t\t\t\t\thidden.push(key);\n\t\t\t\t\t\tthis.setState({hidden: true});\n\t\t\t\t\t} else {\n\t\t\t\t\t\thidden.splice(idx, 1);\n\t\t\t\t\t\tthis.setState({hidden: false});\n\t\t\t\t\t}\n\n\t\t\t\t\tstorage.set('emote-menu.hidden-sets', hidden);\n\t\t\t\t\tt.emit('chat.emotes:change-set-hidden', key);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( this.props.filtered )\n\t\t\t\t\treturn;\n\n\t\t\t\tconst collapsed = storage.get('emote-menu.collapsed') || [],\n\t\t\t\t\tval = ! this.state.collapsed,\n\t\t\t\t\tkey = this.props.data.key,\n\t\t\t\t\tidx = collapsed.indexOf(key);\n\n\t\t\t\tthis.setState({collapsed: val});\n\n\t\t\t\tif ( val && idx === -1 )\n\t\t\t\t\tcollapsed.push(key);\n\t\t\t\telse if ( ! val && idx !== -1 )\n\t\t\t\t\tcollapsed.splice(idx, 1);\n\t\t\t\telse\n\t\t\t\t\treturn;\n\n\t\t\t\tstorage.set('emote-menu.collapsed', collapsed);\n\t\t\t}\n\n\t\t\tonMouseEnter(event) {\n\t\t\t\tconst set_id = event.currentTarget.dataset.setId;\n\t\t\t\tthis.setState({unlocked: set_id});\n\t\t\t}\n\n\t\t\tonMouseLeave() {\n\t\t\t\tthis.setState({unlocked: null});\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\tconst data = this.props.data,\n\t\t\t\t\tfiltered = this.props.filtered,\n\t\t\t\t\tvisibility = this.props.visibility_control;\n\n\t\t\t\tlet show_heading = ! (data.is_favorites && ! this.props.combineTabs) && this.props.showHeading;\n\t\t\t\tif ( show_heading === 2 )\n\t\t\t\t\tshow_heading = ! filtered;\n\t\t\t\telse\n\t\t\t\t\tshow_heading = !! show_heading;\n\n\t\t\t\tif ( visibility )\n\t\t\t\t\tshow_heading = true;\n\n\t\t\t\tconst hidden = visibility ? this.state.hidden : false,\n\t\t\t\t\tcollapsed = visibility ? hidden : (show_heading && ! filtered && this.state.collapsed);\n\n\t\t\t\tif ( ! data )\n\t\t\t\t\treturn null;\n\n\t\t\t\tlet image;\n\t\t\t\tif ( data.image )\n\t\t\t\t\timage = (<img class={`ffz--menu-badge${data.image_large ? ' ffz--menu-badge__large' : ''}`} src={data.image} srcSet={data.image_set} />);\n\t\t\t\telse\n\t\t\t\t\timage = (<figure class={`ffz--menu-badge ffz-i-${data.icon || 'zreknarf'}`} />);\n\n\t\t\t\tlet calendar;\n\n\t\t\t\tconst renews = data.renews && data.renews.getTime(),\n\t\t\t\t\tends = data.ends && data.ends.getTime();\n\n\t\t\t\tif ( renews > 0 ) {\n\t\t\t\t\tcalendar = {\n\t\t\t\t\t\ticon: 'calendar',\n\t\t\t\t\t\tmessage: t.i18n.t('emote-menu.sub-renews', 'This sub renews {seconds,humantime}.', {seconds: renews})\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( ends ) {\n\t\t\t\t\tif ( data.prime )\n\t\t\t\t\t\tcalendar = {\n\t\t\t\t\t\t\ticon: 'crown',\n\t\t\t\t\t\t\tmessage: t.i18n.t('emote-menu.sub-prime', 'This is your free sub with Prime Gaming.\\nIt ends {seconds,humantime}.', {seconds: ends})\n\t\t\t\t\t\t}\n\t\t\t\t\telse if ( data.gift )\n\t\t\t\t\t\tcalendar = {\n\t\t\t\t\t\t\ticon: 'gift',\n\t\t\t\t\t\t\tmessage: t.i18n.t('emote-menu.sub-gift-ends', 'This gifted sub ends {seconds,humantime}.', {seconds: ends})\n\t\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tcalendar = {\n\t\t\t\t\t\t\ticon: 'calendar-empty',\n\t\t\t\t\t\t\tmessage: t.i18n.t('emote-menu.sub-ends', 'This sub ends {seconds,humantime}.', {seconds: ends})\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet source = data.source_i18n ? t.i18n.t(data.source_i18n, data.source) : data.source;\n\t\t\t\tif ( source == null )\n\t\t\t\t\tsource = 'FFZ';\n\n\t\t\t\treturn (<section ref={this.saveRef} data-key={data.key} class={filtered ? 'filtered' : ''} onMouseEnter={this.mouseEnter}>\n\t\t\t\t\t{show_heading ? (<heading tabindex=\"0\" class=\"tw-pd-1 tw-border-b tw-flex tw-flex-nowrap\" onKeyDown={this.keyHeading} onClick={this.clickHeading}>\n\t\t\t\t\t\t{image}\n\t\t\t\t\t\t<div class=\"tw-pd-l-05\">\n\t\t\t\t\t\t\t{(data.i18n ? t.i18n.t(data.i18n, data.title) : data.title) || t.i18n.t('emote-menu.unknown', 'Unknown Source')}\n\t\t\t\t\t\t\t{! visibility && calendar && (<span\n\t\t\t\t\t\t\t\tclass={`tw-mg-x-05 ffz--expiry-info ffz-tooltip ffz-i-${calendar.icon}`}\n\t\t\t\t\t\t\t\tdata-tooltip-type=\"html\"\n\t\t\t\t\t\t\t\tdata-title={calendar.message}\n\t\t\t\t\t\t\t/>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tw-flex-grow-1\" />\n\t\t\t\t\t\t<span class={!visibility && data.channel_source ? 'ffz-tooltip' : ''} data-title={data.channel_source}>{\n\t\t\t\t\t\t\tvisibility ?\n\t\t\t\t\t\t\t\t(hidden ?\n\t\t\t\t\t\t\t\t\tt.i18n.t('emote-menu.visibility.hidden', 'Hidden') :\n\t\t\t\t\t\t\t\t\tt.i18n.t('emote-menu.visibility.visible', 'Visible') )\n\t\t\t\t\t\t\t\t: source\n\t\t\t\t\t\t}</span>\n\t\t\t\t\t\t{(visibility ? false : filtered) ? '' : <figure class={`tw-pd-l-05 ffz-i-${collapsed ? 'left' : 'down'}-dir`} />}\n\t\t\t\t\t</heading>) : null}\n\t\t\t\t\t{collapsed || this.renderBody(show_heading)}\n\t\t\t\t</section>)\n\t\t\t}\n\n\t\t\trenderBody(show_sources) {\n\t\t\t\tconst data = this.props.data,\n\t\t\t\t\tfiltered = this.props.filtered,\n\t\t\t\t\tlock = data.locks && data.locks[this.state.unlocked],\n\n\t\t\t\t\temotes = data.filtered_emotes && data.filtered_emotes.map(emote => {\n\t\t\t\t\t\tif ( filtered && emote.locked )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tconst locked = emote.locked && (! lock || ! lock.emotes.has(emote.id)),\n\t\t\t\t\t\t\temote_lock = locked && data.locks && data.locks[emote.set_id];\n\t\t\t\t\t\tlet sellout = '';\n\n\t\t\t\t\t\tif ( emote_lock ) {\n\t\t\t\t\t\t\tif ( emote_lock.id === 'subwoofer' ) {\n\t\t\t\t\t\t\t\tsellout = t.i18n.t('emote-menu.emote-subwoofer', 'Become an FFZ Subwoofer to unlock this emote.');\n\t\t\t\t\t\t\t} else if ( emote_lock.id === 'cheer' ) {\n\t\t\t\t\t\t\t\tsellout = t.i18n.t('emote-menu.emote-cheer', 'Cheer an additional {bits_remaining, plural, one {# bit} other {# bits}} to unlock this emote.', emote_lock);\n\t\t\t\t\t\t\t} else if ( emote_lock.id === 'follower' ) {\n\t\t\t\t\t\t\t\tsellout = t.i18n.t('emote-menu.emote-follower', 'Follow {user} to unlock this emote in their channel.', emote_lock);\n\t\t\t\t\t\t\t} else if ( data.all_locked )\n\t\t\t\t\t\t\t\tsellout = t.i18n.t('emote-menu.emote-sub', 'Subscribe for {price} to unlock this emote.', emote_lock);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tsellout = t.i18n.t('emote-menu.emote-up', 'Upgrade your sub to {price} to unlock this emote.', emote_lock);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this.renderEmote(\n\t\t\t\t\t\t\temote,\n\t\t\t\t\t\t\tlocked,\n\t\t\t\t\t\t\tshow_sources,\n\t\t\t\t\t\t\tsellout\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\treturn (<div class=\"tw-pd-1 tw-border-b tw-c-background-alt tw-align-center\">\n\t\t\t\t\t{emotes}\n\t\t\t\t\t{! this.props.visibility_control && !filtered && this.renderSellout()}\n\t\t\t\t</div>)\n\t\t\t}\n\n\t\t\trenderEmote(emote, locked, source, sellout) {\n\t\t\t\tif ( ! this.state.intersecting )\n\t\t\t\t\treturn <span key={emote.id} class=\"emote-picker__placeholder\" style={{width: `${emote.width||28}px`, height: `${emote.height||28}px`}} />;\n\n\t\t\t\tconst visibility = this.props.visibility_control,\n\t\t\t\t\tmodifiers = this.props.emote_modifiers[emote.id],\n\t\t\t\t\thas_modifiers = Array.isArray(modifiers) && modifiers.length > 0,\n\t\t\t\t\t//has_menu = has_modifiers && this.state.open_menu == emote.id,\n\t\t\t\t\tanimated = this.props.animated,\n\t\t\t\t\thidden = visibility && emote.hidden,\n\n\t\t\t\t\ttt = t.chat.context.get('chat.emote-menu.tooltips');\n\n\t\t\t\tlet src, srcSet;\n\t\t\t\tif ( animated && emote.animSrc ) {\n\t\t\t\t\tsrc = emote.animSrc;\n\t\t\t\t\tsrcSet = emote.animSrcSet;\n\t\t\t\t} else {\n\t\t\t\t\tsrc = emote.src;\n\t\t\t\t\tsrcSet = emote.srcSet;\n\t\t\t\t}\n\n\t\t\t\treturn (<button\n\t\t\t\t\tkey={emote.id}\n\t\t\t\t\tclass={`${tt ? 'ffz-tooltip ' : ''}emote-picker__emote-link${!visibility && locked ? ' locked' : ''}${hidden ? ' emote-hidden' : ''}`}\n\t\t\t\t\tdata-tooltip-type=\"emote\"\n\t\t\t\t\tdata-provider={emote.provider}\n\t\t\t\t\tdata-id={emote.id}\n\t\t\t\t\tdata-set={emote.set_id}\n\t\t\t\t\tdata-code={emote.code}\n\t\t\t\t\tdata-modifiers={modifiers}\n\t\t\t\t\tdata-effects={emote.effects}\n\t\t\t\t\tdata-effect-prefix={emote.effect_prefix}\n\t\t\t\t\tdata-variant={emote.variant}\n\t\t\t\t\tdata-no-source={source}\n\t\t\t\t\tdata-name={emote.name}\n\t\t\t\t\taria-label={emote.name}\n\t\t\t\t\tdata-locked={emote.locked}\n\t\t\t\t\tdata-sellout={sellout}\n\t\t\t\t\tonClick={(this.props.visibility_control || !emote.locked) && this.clickEmote}\n\t\t\t\t>\n\t\t\t\t\t<figure class=\"emote-picker__emote-figure\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclass={`emote-picker__emote-image${emote.emoji ? ' ffz-emoji' : ''}`}\n\t\t\t\t\t\t\tsrc={src}\n\t\t\t\t\t\t\tsrcSet={srcSet}\n\t\t\t\t\t\t\talt={emote.name}\n\t\t\t\t\t\t\theight={emote.height ? `${emote.height}px` : null}\n\t\t\t\t\t\t\twidth={emote.width ? `${emote.width}px` : null}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</figure>\n\t\t\t\t\t{! visibility && has_modifiers && <div class=\"emote-button__options\" />}\n\t\t\t\t\t{! visibility && emote.favorite && <figure class=\"ffz--favorite ffz-i-star\" />}\n\t\t\t\t\t{! visibility && locked && <figure class={`ffz-i-${emote.lock_icon || 'lock'}`} />}\n\t\t\t\t\t{hidden && <figure class=\"ffz-i-eye-off\" />}\n\t\t\t\t</button>)\n\t\t\t}\n\n\t\t\trenderSellout() {\n\t\t\t\tconst data = this.props.data;\n\n\t\t\t\tif ( ! data.all_locked || ! data.locks )\n\t\t\t\t\treturn null;\n\n\t\t\t\tlet lock = data.locks[this.state.unlocked],\n\t\t\t\t\tlocks = Object.values(data.locks).filter(x => x.id !== 'cheer'),\n\t\t\t\t\thas_ffz = locks.filter(x => x.is_ffz).length > 0;\n\n\t\t\t\tif ( ! lock && data.locks.length === 1 )\n\t\t\t\t\tlock = data.locks[0];\n\n\t\t\t\tif ( ! locks.length )\n\t\t\t\t\treturn null;\n\n\t\t\t\treturn (<div class=\"tw-mg-1 tw-border-t tw-pd-t-1 tw-mg-b-0\">\n\t\t\t\t\t{has_ffz\n\t\t\t\t\t\t? t.i18n.t('emote-menu.ffz-unlock', 'This feature is available to FFZ Subwoofers.')\n\t\t\t\t\t\t: (lock\n\t\t\t\t\t\t\t? t.i18n.t('emote-menu.sub-unlock', 'Subscribe for {price} to unlock {count, plural, one {# emote} other {# emotes}}', {price: lock.price, count: lock.emotes.size})\n\t\t\t\t\t\t\t: t.i18n.t('emote-menu.sub-basic', 'Subscribe to unlock some emotes')\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\t{has_ffz && this.props.ffz_sub_data?.has_free_sub\n\t\t\t\t\t\t? <div class=\"tw-pd-y-1\">{t.i18n.t('emote-menu.free-sub.about', 'As thanks for supporting us in the past, you can get one month of FFZ Subwoofer for free.')}</div>\n\t\t\t\t\t\t: null}\n\t\t\t\t\t<div class=\"ffz--sub-buttons tw-mg-t-05\">\n\t\t\t\t\t\t{locks.map(lock => lock.hide_button ? null : (<a\n\t\t\t\t\t\t\tkey={lock.price}\n\t\t\t\t\t\t\tclass=\"tw-button tw-border-radius-none\"\n\t\t\t\t\t\t\thref={lock.url}\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\tdata-set-id={lock.set_id}\n\t\t\t\t\t\t\tonMouseEnter={this.onMouseEnter}\n\t\t\t\t\t\t\tonMouseLeave={this.onMouseLeave}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"tw-button__text\">\n\t\t\t\t\t\t\t\t{has_ffz && this.props.ffz_sub_data?.has_free_sub\n\t\t\t\t\t\t\t\t\t? t.i18n.t('emote-menu.free-sub', 'Use My Free Month')\n\t\t\t\t\t\t\t\t\t: lock.price\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</a>))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>)\n\t\t\t}\n\t\t}\n\n\t\tthis.fine.wrap('ffz-menu-section', this.MenuSection);\n\n\t\tthis.EmojiSection = class FFZMenuEmojiSection extends this.MenuSection {\n\t\t\trenderEmote(emote, locked, source, sellout) {\n\t\t\t\tconst emoji_x = (emote.x * (t.emoji_size + 2)) + 1,\n\t\t\t\t\temoji_y = (emote.y * (t.emoji_size + 2)) + 1,\n\n\t\t\t\t\tx_pct = 100 * emoji_x / t.emoji_sheet_remain,\n\t\t\t\t\ty_pct = 100 * emoji_y / t.emoji_sheet_remain,\n\n\t\t\t\t\ttt = t.chat.context.get('chat.emote-menu.tooltips');\n\n\t\t\t\treturn (<button\n\t\t\t\t\tkey={emote.id}\n\t\t\t\t\tclass={`${tt ? 'ffz-tooltip ' : ''}emote-picker__emote-link${locked ? ' locked' : ''}${emote.emoji ? ' emote-picker__emoji' : ''}`}\n\t\t\t\t\tdata-tooltip-type=\"emote\"\n\t\t\t\t\tdata-provider={emote.provider}\n\t\t\t\t\tdata-id={emote.id}\n\t\t\t\t\tdata-set={emote.set_id}\n\t\t\t\t\tdata-code={emote.code}\n\t\t\t\t\tdata-variant={emote.variant}\n\t\t\t\t\tdata-no-source={source}\n\t\t\t\t\tdata-name={emote.name}\n\t\t\t\t\taria-label={emote.name}\n\t\t\t\t\tdata-locked={emote.locked}\n\t\t\t\t\tdata-sellout={sellout}\n\t\t\t\t\tonClick={!emote.locked && this.clickEmote}\n\t\t\t\t>\n\t\t\t\t\t<figure\n\t\t\t\t\t\tclass=\"emote-picker__emote-figure\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tbackgroundPosition: `${x_pct}% ${y_pct}%`,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t{emote.favorite && <figure class=\"ffz--favorite ffz-i-star\" />}\n\t\t\t\t\t{locked && <figure class={`ffz-i-${emote.lock_icon || 'lock'}`} />}\n\t\t\t\t</button>)\n\t\t\t}\n\t\t}\n\n\t\tlet timer;\n\t\tconst doClear = () => requestAnimationFrame(() => this.emit('tooltips:cleanup')),\n\t\t\tclearTooltips = () => {\n\t\t\t\tclearTimeout(timer);\n\t\t\t\tsetTimeout(doClear, 100);\n\t\t\t};\n\n\t\tthis.MenuErrorWrapper = class FFZEmoteMenuErrorWrapper extends React.Component {\n\t\t\tconstructor(props) {\n\t\t\t\tsuper(props);\n\t\t\t\tthis.state = {errored: false, error: null};\n\t\t\t}\n\n\t\t\tstatic getDerivedStateFromError(error) {\n\t\t\t\treturn {\n\t\t\t\t\terrored: true,\n\t\t\t\t\terror\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcomponentDidCatch(error) { // eslint-disable-line class-methods-use-this\n\t\t\t\tt.log.capture(error);\n\t\t\t\tt.log.error('Error rendering the FFZ Emote Menu.');\n\t\t\t\tthis.setState({\n\t\t\t\t\terrored: true,\n\t\t\t\t\terror\n\t\t\t\t});\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\tif ( this.state.errored ) {\n\t\t\t\t\tif ( ! this.props.visible )\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\tconst padding = t.chat.context.get('chat.emote-menu.reduced-padding');\n\n\t\t\t\t\treturn (<div\n\t\t\t\t\t\tclass={`ffz-balloon ffz-balloon--md ffz-il-tooltip--up ffz-il-tooltip--align-right tw-block tw-absolute ffz--emote-picker${padding ? ' reduced-padding' : ''}`}\n\t\t\t\t\t\tdata-a-target=\"emote-picker\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"tw-border tw-elevation-1 tw-border-radius-small tw-c-background-base\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"emote-picker__tab-content scrollable-area\"\n\t\t\t\t\t\t\t\tdata-test-selector=\"scrollable-area-wrapper\"\n\t\t\t\t\t\t\t\tdata-simplebar\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"tw-align-center tw-pd-1\">\n\t\t\t\t\t\t\t\t\t<div class=\"tw-mg-b-1\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"tw-mg-2\">\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"//cdn.frankerfacez.com/emoticon/26608/2\"\n\t\t\t\t\t\t\t\t\t\t\t\tsrcSet=\"//cdn.frankerfacez.com/emoticon/26608/2 1x, //cdn.frankerfacez.com/emoticon/26608/4 2x\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{t.i18n.t('emote-menu.error', 'There was an error rendering this menu.')}\n\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t{t.settings.get('reports.error.enable') ?\n\t\t\t\t\t\t\t\t\t\t\tt.i18n.t('emote-menu.error-report', 'An error report has been automatically submitted.')\n\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t<div class=\"tw-mg-t-05 tw-border-t-1 tw-pd-t-05\">\n\t\t\t\t\t\t\t\t\t\t\t{t.i18n.t('emote-menu.disable', 'As a temporary workaround, try disabling the FFZ Emote Menu in the FFZ Control Center.') }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>);\n\t\t\t\t}\n\n\t\t\t\treturn this.props.children;\n\t\t\t}\n\t\t}\n\n\t\tthis.MenuComponent = class FFZEmoteMenuComponent extends React.Component {\n\t\t\tconstructor(props) {\n\t\t\t\tsuper(props);\n\n\t\t\t\tthis.nav_ref = null;\n\t\t\t\tthis.saveNavRef = ref => {\n\t\t\t\t\tthis.nav_ref = ref;\n\t\t\t\t}\n\n\t\t\t\tthis.ref = null;\n\t\t\t\tthis.saveScrollRef = ref => {\n\t\t\t\t\tthis.ref = ref;\n\t\t\t\t\tthis.createObserver();\n\t\t\t\t}\n\n\t\t\t\tthis.sections = [];\n\t\t\t\tthis.activeSection = -1;\n\n\t\t\t\tthis.state = {\n\t\t\t\t\ttab: null,\n\t\t\t\t\tactive_nav: null,\n\t\t\t\t\tstayLoaded: t.chat.context.get('chat.emote-menu.stay-loaded'),\n\t\t\t\t\tquickNav: t.chat.context.get('chat.emote-menu.show-quick-nav'),\n\t\t\t\t\tanimated: t.chat.context.get('chat.emotes.animated'),\n\t\t\t\t\tshowHeading: t.chat.context.get('chat.emote-menu.show-heading'),\n\t\t\t\t\ttall: t.chat.context.get('chat.emote-menu.tall'),\n\t\t\t\t\treducedPadding: t.chat.context.get('chat.emote-menu.reduced-padding'),\n\t\t\t\t\tcombineTabs: t.chat.context.get('chat.emote-menu.combine-tabs'),\n\t\t\t\t\tshowSearch: t.chat.context.get('chat.emote-menu.show-search'),\n\t\t\t\t\tclearSearch: t.chat.context.get('chat.emote-menu.clear-search'),\n\t\t\t\t\thasNewEffects: false,\n\t\t\t\t\tunlockedEffects: t.settings.provider.get('unlocked-effects', []),\n\t\t\t\t\ttone: t.settings.provider.get('emoji-tone', null)\n\t\t\t\t}\n\n\t\t\t\tif ( props.visible ) {\n\t\t\t\t\tthis.loadData();\n\t\t\t\t\tif ( this.state.wants_plan_info )\n\t\t\t\t\t\tthis.loadFFZPlanData();\n\t\t\t\t\tif ( this.state.wants_resub_info )\n\t\t\t\t\t\tthis.loadFFZSubData();\n\t\t\t\t}\n\n\t\t\t\tthis.rebuildData();\n\n\t\t\t\tthis.observing = new Map;\n\n\t\t\t\tthis.addSection = inst => {\n\t\t\t\t\tif ( ! this.sections.includes(inst) )\n\t\t\t\t\t\tthis.sections.push(inst);\n\t\t\t\t}\n\n\t\t\t\tthis.removeSection = inst => {\n\t\t\t\t\tconst idx = this.sections.indexOf(inst);\n\t\t\t\t\tif ( idx !== -1 ) {\n\t\t\t\t\t\tthis.sections.splice(idx);\n\t\t\t\t\t\tif ( idx === this.activeSection )\n\t\t\t\t\t\t\tthis.activeSection = -1;\n\t\t\t\t\t\telse if ( idx < this.activeSection )\n\t\t\t\t\t\t\tthis.activeSection--;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.startObserving = this.startObserving.bind(this);\n\t\t\t\tthis.stopObserving = this.stopObserving.bind(this);\n\t\t\t\tthis.handleObserve = this.handleObserve.bind(this);\n\t\t\t\tthis.pickTone = this.pickTone.bind(this);\n\t\t\t\tthis.clickTab = this.clickTab.bind(this);\n\t\t\t\tthis.clickSideNav = this.clickSideNav.bind(this);\n\t\t\t\t//this.clickRefresh = this.clickRefresh.bind(this);\n\t\t\t\tthis.handleFilterChange = this.handleFilterChange.bind(this);\n\t\t\t\tthis.handleKeyDown = this.handleKeyDown.bind(this);\n\t\t\t\tthis.toggleVisibilityControl = this.toggleVisibilityControl.bind(this);\n\t\t\t}\n\n\t\t\tcreateObserver() {\n\t\t\t\tif ( this.observer ) {\n\t\t\t\t\tif ( this._observed === this.ref )\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tthis.observer.disconnect();\n\t\t\t\t\tthis.observer = this._observed = null;\n\t\t\t\t}\n\n\t\t\t\tif ( ! this.ref || ! window.IntersectionObserver )\n\t\t\t\t\treturn;\n\n\t\t\t\tthis._observed = this.ref;\n\t\t\t\tthis.observer = new IntersectionObserver(this.handleObserve, {\n\t\t\t\t\troot: this.ref,\n\t\t\t\t\trootMargin: '50px 0px',\n\t\t\t\t\tthreshold: 0.01\n\t\t\t\t});\n\n\t\t\t\tfor(const element of this.observing.keys())\n\t\t\t\t\tthis.observer.observe(element);\n\n\t\t\t\tthis.observeSoon();\n\t\t\t}\n\n\t\t\tobserveSoon() {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tif ( this.observer )\n\t\t\t\t\t\tthis.handleObserve(this.observer.takeRecords());\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdestroyObserver() {\n\t\t\t\tif ( ! this.observer )\n\t\t\t\t\treturn;\n\n\t\t\t\tthis.observer.disconnect();\n\t\t\t\tthis.observer = this._observed = null;\n\t\t\t}\n\n\t\t\tscrollNavIntoView() {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tconst el = this.nav_ref?.querySelector?.(`button[data-key=\"${this.state.active_nav}\"]`);\n\t\t\t\t\tif ( el )\n\t\t\t\t\t\tscrollIntoView(el);\n\t\t\t\t\t\t//el.scrollIntoView({block: 'nearest', inline: 'start'});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thandleObserve(event) {\n\t\t\t\tlet changed = false,\n\t\t\t\t\tactive = this.state.active_nav;\n\n\t\t\t\tfor(const entry of event) {\n\t\t\t\t\tconst inst = this.observing.get(entry.target),\n\t\t\t\t\t\tintersecting = entry.isIntersecting;\n\t\t\t\t\tif ( ! inst || inst.state.intersecting === intersecting )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tchanged = true;\n\t\t\t\t\tinst.setState({intersecting});\n\n\t\t\t\t\tif ( intersecting )\n\t\t\t\t\t\tactive = inst.props?.data?.key;\n\t\t\t\t}\n\n\t\t\t\tif ( changed ) {\n\t\t\t\t\trequestAnimationFrame(clearTooltips);\n\n\t\t\t\t\tif ( ! this.lock_active && active !== this.state.active_nav )\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tactive_nav: active\n\t\t\t\t\t\t}, () => this.scrollNavIntoView());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstartObserving(element, inst) {\n\t\t\t\tconst old_inst = this.observing.get(element);\n\t\t\t\tif ( inst === old_inst )\n\t\t\t\t\treturn;\n\n\t\t\t\tif ( old_inst )\n\t\t\t\t\tthis.stopObserving(element);\n\n\t\t\t\tthis.observing.set(element, inst);\n\t\t\t\tif ( this.observer )\n\t\t\t\t\tthis.observer.observe(element);\n\n\t\t\t\tthis.observeSoon();\n\t\t\t}\n\n\t\t\tstopObserving(element) {\n\t\t\t\tif ( ! this.observing.has(element) )\n\t\t\t\t\treturn;\n\n\t\t\t\tthis.observing.delete(element);\n\t\t\t\tif ( this.observer )\n\t\t\t\t\tthis.observer.unobserve(element);\n\t\t\t}\n\n\t\t\tcomponentDidMount() {\n\t\t\t\tif ( this.ref )\n\t\t\t\t\tthis.createObserver();\n\n\t\t\t\tt.chat.context.on('changed:chat.emotes.animated', this.updateSettingState, this);\n\t\t\t\tt.chat.context.on('changed:chat.emote-menu.stay-loaded', this.updateSettingState, this);\n\t\t\t\tt.chat.context.on('changed:chat.emote-menu.show-quick-nav', this.updateSettingState, this);\n\t\t\t\tt.chat.context.on('changed:chat.emote-menu.reduced-padding', this.updateSettingState, this);\n\t\t\t\tt.chat.context.on('changed:chat.emote-menu.show-heading', this.updateSettingState, this);\n\t\t\t\tt.chat.context.on('changed:chat.emote-menu.combine-tabs', this.updateSettingState, this);\n\t\t\t\tt.chat.context.on('changed:chat.emote-menu.show-search', this.updateSettingState, this);\n\t\t\t\tt.chat.context.on('changed:chat.emote-menu.clear-search', this.updateSettingState, this);\n\t\t\t\tt.chat.context.on('changed:chat.emote-menu.tall', this.updateSettingState, this);\n\n\t\t\t\twindow.ffz_menu = this;\n\t\t\t}\n\n\t\t\tcomponentWillUnmount() {\n\t\t\t\tthis.destroyObserver();\n\n\t\t\t\tt.chat.context.off('changed:chat.emotes.animated', this.updateSettingState, this);\n\t\t\t\tt.chat.context.off('changed:chat.emote-menu.stay-loaded', this.updateSettingState, this);\n\t\t\t\tt.chat.context.off('changed:chat.emote-menu.show-quick-nav', this.updateSettingState, this);\n\t\t\t\tt.chat.context.off('changed:chat.emote-menu.show-heading', this.updateSettingState, this);\n\t\t\t\tt.chat.context.off('changed:chat.emote-menu.reduced-padding', this.updateSettingState, this);\n\t\t\t\tt.chat.context.off('changed:chat.emote-menu.combine-tabs', this.updateSettingState, this);\n\t\t\t\tt.chat.context.off('changed:chat.emote-menu.show-search', this.updateSettingState, this);\n\t\t\t\tt.chat.context.off('changed:chat.emote-menu.clear-search', this.updateSettingState, this);\n\t\t\t\tt.chat.context.off('changed:chat.emote-menu.tall', this.updateSettingState, this);\n\n\t\t\t\tif ( window.ffz_menu === this )\n\t\t\t\t\twindow.ffz_menu = null;\n\t\t\t}\n\n\t\t\tupdateSettingState() {\n\t\t\t\tthis.setState({\n\t\t\t\t\tstayLoaded: t.chat.context.get('chat.emote-menu.stay-loaded'),\n\t\t\t\t\tquickNav: t.chat.context.get('chat.emote-menu.show-quick-nav'),\n\t\t\t\t\tanimated: t.chat.context.get('chat.emotes.animated'),\n\t\t\t\t\tshowHeading: t.chat.context.get('chat.emote-menu.show-heading'),\n\t\t\t\t\treducedPadding: t.chat.context.get('chat.emote-menu.reduced-padding'),\n\t\t\t\t\tcombineTabs: t.chat.context.get('chat.emote-menu.combine-tabs'),\n\t\t\t\t\tshowSearch: t.chat.context.get('chat.emote-menu.show-search'),\n\t\t\t\t\tclearSearch: t.chat.context.get('chat.emote-menu.clear-search'),\n\t\t\t\t\ttall: t.chat.context.get('chat.emote-menu.tall')\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tseeEffects() {\n\t\t\t\tif ( this.state.hasNewEffects ) {\n\t\t\t\t\tt.settings.provider.set('unlocked-effects', this.state.unlockedEffects);\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\thasNewEffects: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpickTone(tone) {\n\t\t\t\ttone = tone || null;\n\t\t\t\tt.settings.provider.set('emoji-tone', tone);\n\n\t\t\t\tthis.setState(this.filterState(\n\t\t\t\t\tthis.state.filter,\n\t\t\t\t\tthis.buildEmoji(\n\t\t\t\t\t\tObject.assign({}, this.state, {tone})\n\t\t\t\t\t)\n\t\t\t\t));\n\t\t\t}\n\n\t\t\tclickSideNav(event) {\n\t\t\t\tconst key = event.currentTarget.dataset.key;\n\t\t\t\tconst el = this.ref?.querySelector?.(`section[data-key=\"${key}\"]`);\n\t\t\t\tif ( el ) {\n\t\t\t\t\tthis.lock_active = true;\n\t\t\t\t\tscrollIntoView(el);\n\t\t\t\t\t//el.scrollIntoView({block: 'nearest', inline: 'start'});\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tactive_nav: key\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(() => this.lock_active = false, 250);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tclickTab(event) {\n\t\t\t\tconst tab = event.currentTarget.dataset.tab;\n\n\t\t\t\tif ( tab === 'effect' )\n\t\t\t\t\tthis.seeEffects();\n\n\t\t\t\tif ( this.state.combineTabs ) {\n\t\t\t\t\tlet sets;\n\t\t\t\t\tswitch(tab) {\n\t\t\t\t\t\tcase 'fav':\n\t\t\t\t\t\t\tsets = this.state.filtered_fav_sets;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'channel':\n\t\t\t\t\t\t\tsets = this.state.filtered_channel_sets;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'effect':\n\t\t\t\t\t\t\tsets = this.state.filtered_effect_sets;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'emoji':\n\t\t\t\t\t\t\tsets = this.state.filtered_emoji_sets;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'all':\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tsets = this.state.filtered_all_sets;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst set = sets && sets[0],\n\t\t\t\t\t\tel = set && this.ref?.querySelector?.(`section[data-key=\"${set.key}\"]`);\n\n\t\t\t\t\tif ( el )\n\t\t\t\t\t\tscrollIntoView(el);\n\t\t\t\t\t\t//el.scrollIntoView({block: 'nearest', inline: 'start'});\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.setState({\n\t\t\t\t\ttab\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tclickSettings(event) { // eslint-disable-line class-methods-use-this\n\t\t\t\tconst evt = new FFZEvent({\n\t\t\t\t\titem: 'chat.emote_menu',\n\t\t\t\t\tevent,\n\t\t\t\t\terrored: false\n\t\t\t\t});\n\n\t\t\t\tt.emit('main_menu:open', evt);\n\n\t\t\t\t/*const layout = t.resolve('site.layout');\n\t\t\t\tif ( (layout && layout.is_minimal) || (event && (event.ctrlKey || event.shiftKey)) ) {\n\t\t\t\t\tconst win = window.open(\n\t\t\t\t\t\t'https://twitch.tv/popout/frankerfacez/chat?ffz-settings',\n\t\t\t\t\t\t'_blank',\n\t\t\t\t\t\t'resizable=yes,scrollbars=yes,width=850,height=600'\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( win )\n\t\t\t\t\t\twin.focus();\n\n\t\t\t\t} else {\n\t\t\t\t\tconst menu = t.resolve('main_menu');\n\n\t\t\t\t\tif ( menu ) {\n\t\t\t\t\t\tmenu.requestPage('chat.emote_menu');\n\t\t\t\t\t\tif ( menu.showing )\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tt.emit('site.menu_button:clicked');\n\t\t\t\t}*/\n\t\t\t}\n\n\t\t\t/*clickRefresh(event) {\n\t\t\t\tconst target = event.currentTarget,\n\t\t\t\t\ttt = target && target._ffz_tooltip;\n\n\t\t\t\tif ( tt && tt.hide )\n\t\t\t\t\ttt.hide();\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tloading: true\n\t\t\t\t}, async () => {\n\t\t\t\t\tconst props = this.props,\n\t\t\t\t\t\tpromises = [],\n\t\t\t\t\t\temote_data = props.emote_data,\n\t\t\t\t\t\tchannel_data = props.channel_data;\n\n\t\t\t\t\tif ( emote_data )\n\t\t\t\t\t\tpromises.push(emote_data.refetch())\n\n\t\t\t\t\tif ( channel_data )\n\t\t\t\t\t\tpromises.push(channel_data.refetch());\n\n\t\t\t\t\tawait Promise.all(promises);\n\n\t\t\t\t\tconst es = props.emote_data && props.emote_data.emoteSets,\n\t\t\t\t\t\tsets = es && es.length ? new Set(es.map(x => parseInt(x.id, 10))) : new Set;\n\n\t\t\t\t\tconst data = await t.getData(sets, true);\n\t\t\t\t\tthis.setState(this.filterState(this.state.filter, this.buildState(\n\t\t\t\t\t\tthis.props,\n\t\t\t\t\t\tObject.assign({}, this.state, {set_sets: sets, set_data: data, loading: false})\n\t\t\t\t\t)));\n\t\t\t\t});\n\t\t\t}*/\n\n\t\t\ttoggleVisibilityControl() {\n\t\t\t\tthis.setState(this.filterState(this.state.filter, this.state, ! this.state.visibility_control));\n\t\t\t}\n\n\t\t\thandleFilterChange(event) {\n\t\t\t\tthis.setState(this.filterState(event.target.value, this.state));\n\t\t\t}\n\n\t\t\thandleKeyDown(event) {\n\t\t\t\tconst code = event.keyCode;\n\t\t\t\tif ( code === KEYS.Escape )\n\t\t\t\t\tthis.props.toggleVisibility();\n\t\t\t\telse\n\t\t\t\t\treturn;\n\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\n\t\t\tloadData(force = false, props, state) {\n\t\t\t\tstate = state || this.state;\n\t\t\t\tif ( ! state )\n\t\t\t\t\treturn false;\n\n\t\t\t\tprops = props || this.props;\n\n\t\t\t\tconst emote_sets = props.emote_data && props.emote_data.emoteSets,\n\t\t\t\t\tsets = Array.isArray(emote_sets) ? new Set(emote_sets.map(x => x.id)) : new Set;\n\n\t\t\t\tforce = force || (state.set_data && ! set_equals(state.set_sets, sets));\n\n\t\t\t\tif ( state.set_data && ! force )\n\t\t\t\t\treturn false;\n\n\t\t\t\tthis.setState({loading: true}, () => {\n\t\t\t\t\tt.getData(sets, force).then(d => {\n\t\t\t\t\t\tthis.setState(this.filterState(this.state.filter, this.buildState(\n\t\t\t\t\t\t\tthis.props,\n\t\t\t\t\t\t\tObject.assign({}, this.state, {set_sets: sets, set_data: d, loading: false})\n\t\t\t\t\t\t)));\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tloadFFZPlanData(force = false, props, state) {\n\t\t\t\tstate = state || this.state;\n\t\t\t\tif ( ! state || state.ffz_plan_loading )\n\t\t\t\t\treturn false;\n\n\t\t\t\tif ( state.ffz_sub_data && ! force )\n\t\t\t\t\treturn false;\n\n\t\t\t\tthis.setState({ffz_plan_loading: true}, () => {\n\t\t\t\t\tt.getFFZSubPrices().then(d => {\n\t\t\t\t\t\tthis.setState(this.filterState(this.state.filter, this.buildState(\n\t\t\t\t\t\t\tthis.props,\n\t\t\t\t\t\t\tObject.assign({}, this.state, {ffz_plan_data: d, ffz_plan_loading: false})\n\t\t\t\t\t\t)));\n\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tloadFFZSubData(force = false, props, state) {\n\t\t\t\tstate = state || this.state;\n\t\t\t\tif ( ! state || state.ffz_loading )\n\t\t\t\t\treturn false;\n\n\t\t\t\tif ( state.ffz_sub_data && ! force )\n\t\t\t\t\treturn false;\n\n\t\t\t\tthis.setState({ffz_loading: true}, () => {\n\t\t\t\t\tt.getFFZSubData().then(d => {\n\t\t\t\t\t\tthis.setState(this.filterState(this.state.filter, this.buildState(\n\t\t\t\t\t\t\tthis.props,\n\t\t\t\t\t\t\tObject.assign({}, this.state, {ffz_sub_data: d, ffz_loading: false})\n\t\t\t\t\t\t)));\n\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tfilterState(input, old_state, visibility_control) {\n\t\t\t\tconst state = Object.assign({}, old_state);\n\n\t\t\t\tif ( visibility_control != null )\n\t\t\t\t\tstate.visibility_control = visibility_control;\n\t\t\t\telse\n\t\t\t\t\tvisibility_control = state.visibility_control;\n\n\t\t\t\tstate.filter = input;\n\t\t\t\tstate.filtered = input && input.length > 0 && input !== ':' || false;\n\n\t\t\t\tstate.filtered_channel_sets = this.filterSets(input, state.channel_sets, visibility_control);\n\t\t\t\tstate.filtered_effect_sets = this.filterSets(input, state.effect_sets, visibility_control);\n\t\t\t\tstate.filtered_all_sets = this.filterSets(input, state.all_sets, visibility_control);\n\t\t\t\tstate.filtered_fav_sets = this.filterSets(input, state.fav_sets, visibility_control);\n\t\t\t\tstate.filtered_emoji_sets = this.filterSets(input, state.emoji_sets, visibility_control);\n\n\t\t\t\tstate.has_effect_tab = state.filtered_effect_sets.length > 0;\n\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tfilterSets(input, sets, visibility_control) {\n\t\t\t\tconst out = [];\n\t\t\t\tif ( ! sets || ! sets.length )\n\t\t\t\t\treturn out;\n\n\t\t\t\tconst filtering = input && input.length > 0 && input !== ':',\n\t\t\t\t\thidden_sets = storage.get('emote-menu.hidden-sets') || [];\n\n\t\t\t\tfor(const emote_set of sets) {\n\t\t\t\t\tif ( ! visibility_control && hidden_sets.includes(emote_set.key) )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tconst filtered = emote_set.filtered_emotes = emote_set.emotes.filter(emote => {\n\t\t\t\t\t\tif ( ! visibility_control && emote.hidden )\n\t\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t\treturn ! filtering || (! emote.locked && this.doesEmoteMatch(input, emote))\n\t\t\t\t\t});\n\n\t\t\t\t\tif ( filtered.length )\n\t\t\t\t\t\tout.push(emote_set);\n\t\t\t\t}\n\n\t\t\t\treturn out;\n\t\t\t}\n\n\t\t\tdoesEmoteMatch(filter, emote) { //eslint-disable-line class-methods-use-this\n\t\t\t\tif ( ! filter || ! filter.length )\n\t\t\t\t\treturn true;\n\n\t\t\t\tconst emote_name = emote.search || emote.name,\n\t\t\t\t\temote_lower = emote_name.toLowerCase(),\n\t\t\t\t\tterm_lower = filter.toLowerCase(),\n\t\t\t\t\thas_colon = filter.startsWith(':'),\n\t\t\t\t\tterm_trail = term_lower.slice(1);\n\n\t\t\t\tif ( Array.isArray(emote.extra) ) {\n\t\t\t\t\tlet i = emote.extra.length;\n\t\t\t\t\twhile(i--) {\n\t\t\t\t\t\tif ( ! has_colon && emote.extra[i].includes(term_lower) )\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\telse if ( has_colon && emote.extra[i].startsWith(term_trail) )\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( ! has_colon )\n\t\t\t\t\treturn emote_lower.includes(term_lower);\n\n\t\t\t\tif ( emote_lower.startsWith(term_trail) )\n\t\t\t\t\treturn true;\n\n\t\t\t\tconst idx = emote_name.indexOf(filter.charAt(1).toUpperCase());\n\t\t\t\tif ( idx !== -1 )\n\t\t\t\t\treturn emote_lower.slice(idx+1).startsWith(term_lower.slice(2));\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\n\t\t\tbuildEmoji(old_state) { // eslint-disable-line class-methods-use-this\n\t\t\t\tconst state = Object.assign({}, old_state),\n\n\t\t\t\t\tsets = state.emoji_sets = [],\n\t\t\t\t\temoji_favorites = t.emotes.getFavorites('emoji'),\n\t\t\t\t\tfavorites = state.favorites = (state.favorites || []).filter(x => ! x.emoji),\n\n\t\t\t\t\ttone = state.tone = state.tone || null,\n\t\t\t\t\ttone_choices = state.tone_emoji = [],\n\t\t\t\t\tcategories = {};\n\n\t\t\t\tif ( t.chat.context.get('chat.emote-menu.show-emoji') ) {\n\t\t\t\t\tlet style = t.chat.context.get('chat.emoji.style') || 'twitter';\n\t\t\t\t\tif ( ! IMAGE_PATHS[style] )\n\t\t\t\t\t\tstyle = 'twitter';\n\n\t\t\t\t\tfor(const emoji of Object.values(t.emoji.emoji)) {\n\t\t\t\t\t\tif ( ! emoji || ! emoji.has[style] || HIDDEN_CATEGORIES.includes(emoji.category) )\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tif ( emoji.variants ) {\n\t\t\t\t\t\t\tfor(const name of emoji.names)\n\t\t\t\t\t\t\t\tif ( TONE_EMOJI.includes(name) ) {\n\t\t\t\t\t\t\t\t\ttone_choices.push(emoji);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst is_fav = emoji_favorites.includes(emoji.code),\n\t\t\t\t\t\t\ttoned = emoji.variants && emoji.variants[tone],\n\t\t\t\t\t\t\thas_tone = toned && toned.has[style],\n\t\t\t\t\t\t\tsource = has_tone ? toned : emoji;\n\n\t\t\t\t\t\tlet cat = categories[emoji.category];\n\t\t\t\t\t\tif ( ! cat ) {\n\t\t\t\t\t\t\tcat = categories[emoji.category] = [];\n\n\t\t\t\t\t\t\tsets.push({\n\t\t\t\t\t\t\t\tkey: `emoji-${emoji.category}`,\n\t\t\t\t\t\t\t\tsort_key: CATEGORY_SORT.indexOf(emoji.category),\n\t\t\t\t\t\t\t\temoji: true,\n\t\t\t\t\t\t\t\timage: t.emoji.getFullImage(source.image),\n\t\t\t\t\t\t\t\ti18n: `emoji.category.${emoji.category.toSnakeCase()}`,\n\t\t\t\t\t\t\t\ttitle: CATEGORIES[emoji.category] || emoji.category,\n\t\t\t\t\t\t\t\tsrc: 'emoji',\n\t\t\t\t\t\t\t\tsource: 'Emoji',\n\t\t\t\t\t\t\t\tsource_i18n: 'emote-menu.emoji',\n\t\t\t\t\t\t\t\temotes: cat\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst em = {\n\t\t\t\t\t\t\tprovider: 'emoji',\n\t\t\t\t\t\t\tid: emoji.sort,\n\t\t\t\t\t\t\temoji: true,\n\t\t\t\t\t\t\tcode: emoji.code,\n\t\t\t\t\t\t\tname: source.raw,\n\t\t\t\t\t\t\tvariant: has_tone && tone,\n\t\t\t\t\t\t\thidden: emoji.hidden,\n\n\t\t\t\t\t\t\tsearch: emoji.names[0],\n\t\t\t\t\t\t\textra: emoji.names.length > 1 ? emoji.names.map(x => x.toLowerCase()) : null,\n\n\t\t\t\t\t\t\theight: 18,\n\t\t\t\t\t\t\twidth: 18,\n\n\t\t\t\t\t\t\tx: source.sheet_x,\n\t\t\t\t\t\t\ty: source.sheet_y,\n\n\t\t\t\t\t\t\tfavorite: is_fav,\n\n\t\t\t\t\t\t\tsrc: t.emoji.getFullImage(source.image),\n\t\t\t\t\t\t\tsrcSet: t.emoji.getFullImageSet(source.image)\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tcat.push(em);\n\n\t\t\t\t\t\tif ( is_fav )\n\t\t\t\t\t\t\tfavorites.push(em);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstate.has_emoji_tab = sets.length > 0;\n\n\t\t\t\tstate.fav_sets = [{\n\t\t\t\t\tkey: 'favorites',\n\n\t\t\t\t\ttitle: 'Favorites',\n\t\t\t\t\ti18n: 'emote-menu.favorites',\n\t\t\t\t\ticon: 'star',\n\t\t\t\t\tsource: '',\n\n\t\t\t\t\tis_favorites: true,\n\t\t\t\t\temotes: favorites\n\t\t\t\t}];\n\n\t\t\t\t// We use this sorter because we don't want things grouped by sets.\n\t\t\t\tfavorites.sort(this.getSorter());\n\t\t\t\tsets.sort(sort_sets);\n\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tgetAllSets() {\n\t\t\t\treturn [\n\t\t\t\t\t...(this.state.channel_sets || []),\n\t\t\t\t\t...(this.state.effect_sets || []),\n\t\t\t\t\t...(this.state.all_sets || [])\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tgetSorter() { // eslint-disable-line class-methods-use-this\n\t\t\t\treturn EMOTE_SORTERS[t.chat.context.get('chat.emote-menu.sort-emotes')] || EMOTE_SORTERS[0] || (() => 0);\n\t\t\t}\n\n\t\t\tbuildState(props, old_state) {\n\t\t\t\tconst state = Object.assign({}, old_state),\n\n\t\t\t\t\tdata = state.set_data || {},\n\t\t\t\t\tmodifiers = state.emote_modifiers = {},\n\t\t\t\t\tchannel = state.channel_sets = [],\n\t\t\t\t\tall = state.all_sets = [],\n\t\t\t\t\teffects = state.effect_sets = [],\n\t\t\t\t\tfavorites = state.favorites = [];\n\n\t\t\t\t// If we're still loading, don't set any data.\n\t\t\t\tif ( props.loading || props.error || state.loading )\n\t\t\t\t\treturn state;\n\n\t\t\t\t// If we start loading because the sets we have\n\t\t\t\t// don't match, don't set any data either.\n\t\t\t\tif ( state.set_data && this.loadData(false, props, state) )\n\t\t\t\t\treturn state;\n\n\t\t\t\t// Sorters\n\t\t\t\tconst sorter = this.getSorter(),\n\t\t\t\t\tsort_tiers = t.chat.context.get('chat.emote-menu.sort-tiers-last'),\n\t\t\t\t\tsort_emotes = (a,b) => {\n\t\t\t\t\t\tif ( a.misc || b.misc )\n\t\t\t\t\t\t\treturn sorter(a,b);\n\n\t\t\t\t\t\tif ( ! a.locked && b.locked ) return -1;\n\t\t\t\t\t\tif ( a.locked && ! b.locked ) return 1;\n\n\t\t\t\t\t\tif ( sort_tiers || a.locked || b.locked ) {\n\t\t\t\t\t\t\tif ( a.bits || b.bits ) {\n\t\t\t\t\t\t\t\tif ( ! b.bits )\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\telse if ( ! a.bits )\n\t\t\t\t\t\t\t\t\treturn -1;\n\n\t\t\t\t\t\t\t\tconst a_val = a.bit_value || 0,\n\t\t\t\t\t\t\t\t\tb_val = b.bit_value || 0;\n\n\t\t\t\t\t\t\t\tif ( COLLATOR ) {\n\t\t\t\t\t\t\t\t\tconst result = COLLATOR.compare(a_val, b_val);\n\t\t\t\t\t\t\t\t\tif ( result != 0 )\n\t\t\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif ( a_val < b_val ) return -1;\n\t\t\t\t\t\t\t\t\tif ( a_val > b_val ) return 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif ( COLLATOR ) {\n\t\t\t\t\t\t\t\t\tconst result = COLLATOR.compare(a.set_id, b.set_id);\n\t\t\t\t\t\t\t\t\tif ( result != 0 )\n\t\t\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif ( a.set_id < b.set_id ) return -1;\n\t\t\t\t\t\t\t\t\tif ( a.set_id > b.set_id ) return 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn sorter(a,b);\n\t\t\t\t\t}\n\n\n\t\t\t\t// Before anything, identify the follower sets.\n\t\t\t\tconst user = props.channel_data && props.channel_data.user,\n\t\t\t\t\tproducts = user && user.subscriptionProducts,\n\t\t\t\t\tlocal_sets = user && props.channel_data?.channel?.localEmoteSets,\n\t\t\t\t\tis_following = user && user.self?.follower != null,\n\t\t\t\t\tfollower_locked = ! is_following && (props.user_id && user?.id != props.user_id),\n\t\t\t\t\tbits = user?.cheer?.badgeTierEmotes;\n\n\t\t\t\tconst follower_sets = new Set();\n\t\t\t\tif ( Array.isArray(local_sets) )\n\t\t\t\t\tfor(const local of local_sets)\n\t\t\t\t\t\tif ( local?.id )\n\t\t\t\t\t\t\tfollower_sets.add(local.id);\n\n\t\t\t\t// Start with the All tab. Some data calculated for\n\t\t\t\t// all is re-used for the Channel tab.\n\n\t\t\t\tconst emote_sets = props.emote_data && props.emote_data.emoteSets,\n\t\t\t\t\temote_map = props.emote_data && props.emote_data.emoteMap,\n\t\t\t\t\ttwitch_favorites = t.emotes.getFavorites('twitch'),\n\t\t\t\t\ttwitch_hidden = t.emotes.getHidden('twitch'),\n\t\t\t\t\ttwitch_seen = new Set,\n\n\t\t\t\t\tbits_unlocked = [],\n\n\t\t\t\t\t//twitch_seen_favorites = new Set,\n\n\t\t\t\t\tgrouped_sets = {},\n\t\t\t\t\tset_ids = new Set;\n\n\t\t\t\tif ( Array.isArray(emote_sets) )\n\t\t\t\t\tfor(const emote_set of emote_sets) {\n\t\t\t\t\t\tif ( ! emote_set || ! Array.isArray(emote_set.emotes) )\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tconst set_id = emote_set.id,\n\t\t\t\t\t\t\tint_id = parseInt(set_id, 10),\n\t\t\t\t\t\t\towner = emote_set.owner,\n\t\t\t\t\t\t\tis_follower = follower_sets.has(set_id),\n\t\t\t\t\t\t\tis_bits = ! is_follower && int_id > 5e8,\n\t\t\t\t\t\t\tis_points = TWITCH_POINTS_SETS.includes(int_id) || owner?.login === 'channel_points',\n\t\t\t\t\t\t\tchan = is_follower ? user : is_points ? null : owner,\n\t\t\t\t\t\t\tset_data = data[set_id],\n\t\t\t\t\t\t\tis_current_bits = is_bits && owner && owner.id == user?.id;\n\n\t\t\t\t\t\t/*if ( chan )\n\t\t\t\t\t\t\tt.emotes.setTwitchSetChannel(set_id, {\n\t\t\t\t\t\t\t\ts_id: set_id,\n\t\t\t\t\t\t\t\tc_id: chan.id,\n\t\t\t\t\t\t\t\tc_name: chan.login,\n\t\t\t\t\t\t\t\tc_title: chan.displayName\n\t\t\t\t\t\t\t});*/\n\n\t\t\t\t\t\tset_ids.add(set_id);\n\n\t\t\t\t\t\tlet key = `twitch-set-${set_id}`,\n\t\t\t\t\t\t\tsort_key = 0,\n\t\t\t\t\t\t\ticon = 'twitch',\n\t\t\t\t\t\t\ttitle = chan && (chan.displayName || chan.login);\n\n\t\t\t\t\t\tif ( title ) {\n\t\t\t\t\t\t\tkey = `twitch-${chan?.id}`;\n\n\t\t\t\t\t\t\tif ( is_follower )\n\t\t\t\t\t\t\t\tt.emotes.setTwitchSetChannel(set_id, {\n\t\t\t\t\t\t\t\t\tid: set_id,\n\t\t\t\t\t\t\t\t\ttype: EmoteTypes.Follower,\n\t\t\t\t\t\t\t\t\towner: {\n\t\t\t\t\t\t\t\t\t\tid: chan.id,\n\t\t\t\t\t\t\t\t\t\tlogin: chan.login,\n\t\t\t\t\t\t\t\t\t\tdisplayName: chan.displayName\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\telse if ( is_bits )\n\t\t\t\t\t\t\t\tt.emotes.setTwitchSetChannel(set_id, {\n\t\t\t\t\t\t\t\t\tid: set_id,\n\t\t\t\t\t\t\t\t\ttype: EmoteTypes.BitsTier,\n\t\t\t\t\t\t\t\t\towner: {\n\t\t\t\t\t\t\t\t\t\tid: chan.id,\n\t\t\t\t\t\t\t\t\t\tlogin: chan.login,\n\t\t\t\t\t\t\t\t\t\tdisplayName: chan.displayName\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tt.emotes.setTwitchSetChannel(set_id, {\n\t\t\t\t\t\t\t\t\tid: set_id,\n\t\t\t\t\t\t\t\t\ttype: EmoteTypes.Subscription,\n\t\t\t\t\t\t\t\t\towner: {\n\t\t\t\t\t\t\t\t\t\tid: chan.id,\n\t\t\t\t\t\t\t\t\t\tlogin: chan.login,\n\t\t\t\t\t\t\t\t\t\tdisplayName: chan.displayName\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t} else if ( ! chan ) {\n\t\t\t\t\t\t\tif ( is_points ) {\n\t\t\t\t\t\t\t\ttitle = t.i18n.t('emote-menu.points', 'Unlocked with Points');\n\t\t\t\t\t\t\t\tkey = 'twitch-points';\n\t\t\t\t\t\t\t\ticon = 'channel-points';\n\t\t\t\t\t\t\t\tsort_key = 45;\n\n\t\t\t\t\t\t\t\t/*t.emotes.setTwitchSetChannel(set_id, {\n\t\t\t\t\t\t\t\t\tid: set_id,\n\t\t\t\t\t\t\t\t\ttype: EmoteTypes.ChannelPoints,\n\t\t\t\t\t\t\t\t\towner: null\n\t\t\t\t\t\t\t\t});*/\n\n\t\t\t\t\t\t\t} else if ( TWITCH_GLOBAL_SETS.includes(int_id) ) {\n\t\t\t\t\t\t\t\ttitle = t.i18n.t('emote-menu.global', 'Global Emotes');\n\t\t\t\t\t\t\t\tkey = 'twitch-global';\n\t\t\t\t\t\t\t\tsort_key = 100;\n\n\t\t\t\t\t\t\t\tt.emotes.setTwitchSetChannel(set_id, {\n\t\t\t\t\t\t\t\t\tid: set_id,\n\t\t\t\t\t\t\t\t\ttype: EmoteTypes.Global,\n\t\t\t\t\t\t\t\t\towner: null\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t} else if ( TWITCH_PRIME_SETS.includes(int_id) ) {\n\t\t\t\t\t\t\t\ttitle = t.i18n.t('emote_menu.prime', 'Prime');\n\t\t\t\t\t\t\t\tkey = 'twitch-prime';\n\t\t\t\t\t\t\t\ticon = 'crown';\n\t\t\t\t\t\t\t\tsort_key = 75;\n\n\t\t\t\t\t\t\t\tt.emotes.setTwitchSetChannel(set_id, {\n\t\t\t\t\t\t\t\t\tid: set_id,\n\t\t\t\t\t\t\t\t\ttype: EmoteTypes.Prime,\n\t\t\t\t\t\t\t\t\towner: null\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttitle = t.i18n.t('emote-menu.misc', 'Miscellaneous');\n\t\t\t\t\t\t\t\tkey = 'twitch-misc';\n\t\t\t\t\t\t\t\ticon = 'inventory';\n\t\t\t\t\t\t\t\tsort_key = 50;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\ttitle = t.i18n.t('emote-menu.unknown-set', 'Set #{set_id}', {set_id})\n\n\t\t\t\t\t\t// Do not display follower emotes the user does not have.\n\t\t\t\t\t\tif ( is_follower )\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tlet section, emotes;\n\n\t\t\t\t\t\tif ( grouped_sets[key] ) {\n\t\t\t\t\t\t\tsection = grouped_sets[key];\n\t\t\t\t\t\t\temotes = section.emotes;\n\n\t\t\t\t\t\t\tif ( set_data && section.bad ) {\n\t\t\t\t\t\t\t\tsection.bad = false;\n\t\t\t\t\t\t\t\tsection.renews = set_data.renews;\n\t\t\t\t\t\t\t\tsection.ends = set_data.ends;\n\t\t\t\t\t\t\t\tsection.prime = set_data.prime;\n\t\t\t\t\t\t\t\tsection.gift = set_data.gift;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\temotes = [];\n\t\t\t\t\t\t\tsection = grouped_sets[key] = {\n\t\t\t\t\t\t\t\tsort_key,\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\timage: chan?.profileImageURL,\n\t\t\t\t\t\t\t\timage_large: true,\n\t\t\t\t\t\t\t\ticon,\n\t\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\t\tsource: t.i18n.t('emote-menu.twitch', 'Twitch'),\n\t\t\t\t\t\t\t\temotes,\n\t\t\t\t\t\t\t\trenews: set_data?.renews,\n\t\t\t\t\t\t\t\tends: set_data?.ends,\n\t\t\t\t\t\t\t\tprime: set_data?.prime,\n\t\t\t\t\t\t\t\tgift: set_data?.gift\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( ! set_data )\n\t\t\t\t\t\t\t\tsection.bad = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet order = 0;\n\n\t\t\t\t\t\tfor(const emote of emote_set.emotes) {\n\t\t\t\t\t\t\t// Validate emotes, because apparently Twitch is handing\n\t\t\t\t\t\t\t// out bad emote data.\n\t\t\t\t\t\t\tif ( ! emote || ! emote.id || ! emote.token )\n\t\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t\tconst id = emote.id,\n\t\t\t\t\t\t\t\tname = KNOWN_CODES[emote.token] || emote.token,\n\t\t\t\t\t\t\t\tmapped = emote_map && emote_map[name];\n\n\t\t\t\t\t\t\tif ( ! is_points )\n\t\t\t\t\t\t\t\tt.emotes.setTwitchEmoteSet(id, set_id);\n\n\t\t\t\t\t\t\t//if ( Array.isArray(emote.modifiers) && emote.modifiers.length )\n\t\t\t\t\t\t\t//\tmodifiers[id] = emote.modifiers.map(x => x.code);\n\n\t\t\t\t\t\t\tconst modes = [''];\n\t\t\t\t\t\t\tif ( Array.isArray(emote.modifiers) && emote.modifiers.length ) {\n\t\t\t\t\t\t\t\tif ( t.chat.context.get('chat.emote-menu.modifiers') === 1 )\n\t\t\t\t\t\t\t\t\tfor(const mod of emote.modifiers)\n\t\t\t\t\t\t\t\t\t\tmodes.push(`_${mod.code}`);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tfor(const mode of modes) {\n\t\t\t\t\t\t\t\tconst new_id = `${id}${mode}`,\n\t\t\t\t\t\t\t\t\tnew_name = `${name}${mode}`,\n\t\t\t\t\t\t\t\t\tis_fav = twitch_favorites.includes(new_id),\n\t\t\t\t\t\t\t\t\toverridden = mapped && mapped.id != new_id,\n\t\t\t\t\t\t\t\t\treplacement = REPLACEMENTS[new_id];\n\n\t\t\t\t\t\t\t\tlet src, srcSet, animSrc, animSrcSet;\n\n\t\t\t\t\t\t\t\tif ( replacement && t.chat.context.get('chat.fix-bad-emotes') )\n\t\t\t\t\t\t\t\t\tsrc = `${REPLACEMENT_BASE}${replacement}`;\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tsrc = getTwitchEmoteURL(new_id, 1, false);\n\t\t\t\t\t\t\t\t\tsrcSet = getTwitchEmoteSrcSet(new_id, false);\n\n\t\t\t\t\t\t\t\t\tanimSrc = getTwitchEmoteURL(new_id, 1, true);\n\t\t\t\t\t\t\t\t\tanimSrcSet = getTwitchEmoteSrcSet(new_id, true);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst em = {\n\t\t\t\t\t\t\t\t\tprovider: 'twitch',\n\t\t\t\t\t\t\t\t\tid: new_id,\n\t\t\t\t\t\t\t\t\tset_id,\n\t\t\t\t\t\t\t\t\tname: new_name,\n\t\t\t\t\t\t\t\t\tsrc,\n\t\t\t\t\t\t\t\t\tsrcSet,\n\t\t\t\t\t\t\t\t\tanimSrc,\n\t\t\t\t\t\t\t\t\tanimSrcSet,\n\t\t\t\t\t\t\t\t\torder: order++,\n\t\t\t\t\t\t\t\t\toverridden: overridden ? mapped.id : null,\n\t\t\t\t\t\t\t\t\tmisc: ! chan,\n\t\t\t\t\t\t\t\t\tbits: is_bits,\n\t\t\t\t\t\t\t\t\thidden: twitch_hidden.includes(new_id),\n\t\t\t\t\t\t\t\t\tfavorite: is_fav\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\temotes.push(em);\n\n\t\t\t\t\t\t\t\tif ( is_current_bits )\n\t\t\t\t\t\t\t\t\tbits_unlocked.push(em);\n\n\t\t\t\t\t\t\t\tif ( is_fav && ! twitch_seen.has(new_id) )\n\t\t\t\t\t\t\t\t\tfavorites.push(em);\n\n\t\t\t\t\t\t\t\ttwitch_seen.add(new_id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( emotes.length ) {\n\t\t\t\t\t\t\temotes.sort(sort_emotes);\n\n\t\t\t\t\t\t\tif ( ! all.includes(section) )\n\t\t\t\t\t\t\t\tall.push(section);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t// Now we handle the current Channel's emotes.\n\n\t\t\t\tif ( Array.isArray(local_sets) || Array.isArray(products) || Array.isArray(bits) ) {\n\t\t\t\t\tconst badge = t.badges.getTwitchBadge('subscriber', '0', user.id, user.login),\n\t\t\t\t\t\temotes = [],\n\t\t\t\t\t\tunlockable_emotes = new Set,\n\t\t\t\t\t\tlocks = {},\n\t\t\t\t\t\tsection = {\n\t\t\t\t\t\t\tsort_key: -10,\n\t\t\t\t\t\t\tkey: `twitch-current-channel`,\n\t\t\t\t\t\t\thide_key: `twitch-${user.id}`,\n\t\t\t\t\t\t\timage: badge && badge.image1x,\n\t\t\t\t\t\t\timage_set: badge && `${badge.image1x} 1x, ${badge.image2x} 2x, ${badge.image4x} 4x`,\n\t\t\t\t\t\t\ticon: 'twitch',\n\t\t\t\t\t\t\ttitle: t.i18n.t('emote-menu.main-set', 'Channel Emotes'),\n\t\t\t\t\t\t\tsource: t.i18n.t('emote-menu.twitch', 'Twitch'),\n\t\t\t\t\t\t\temotes,\n\t\t\t\t\t\t\tlocks,\n\t\t\t\t\t\t\tall_locked: true\n\t\t\t\t\t\t};\n\n\t\t\t\t\tif ( Array.isArray(local_sets) ) {\n\t\t\t\t\t\tfor(const local of local_sets) {\n\t\t\t\t\t\t\tif ( ! local || ! Array.isArray(local.emotes) )\n\t\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t\tconst set_id = local.id;\n\n\t\t\t\t\t\t\tlet lock_set;\n\n\t\t\t\t\t\t\t// If we're not following, we can't use the emote\n\t\t\t\t\t\t\t// so lock it.\n\t\t\t\t\t\t\tif ( follower_locked )\n\t\t\t\t\t\t\t\tlocks[set_id] = {\n\t\t\t\t\t\t\t\t\tset_id,\n\t\t\t\t\t\t\t\t\tid: 'follower',\n\t\t\t\t\t\t\t\t\tuser: user?.displayName || user?.login,\n\t\t\t\t\t\t\t\t\thide_button: true,\n\t\t\t\t\t\t\t\t\temotes: lock_set = new Set()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/*else\n\t\t\t\t\t\t\t\tsection.all_locked = false;*/\n\n\t\t\t\t\t\t\tlet order = 0;\n\t\t\t\t\t\t\tfor(const emote of local.emotes) {\n\t\t\t\t\t\t\t\tif ( ! emote || ! emote.id || ! emote.token )\n\t\t\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t\t\tconst id = emote.id,\n\t\t\t\t\t\t\t\t\tname = KNOWN_CODES[emote.token] || emote.token,\n\t\t\t\t\t\t\t\t\tseen = twitch_seen.has(id),\n\t\t\t\t\t\t\t\t\tis_fav = twitch_favorites.includes(id);\n\n\t\t\t\t\t\t\t\tconst em = {\n\t\t\t\t\t\t\t\t\tprovider: 'twitch',\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tset_id,\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\torder: order++,\n\t\t\t\t\t\t\t\t\tsrc: getTwitchEmoteURL(id, 1, false),\n\t\t\t\t\t\t\t\t\tsrcSet: getTwitchEmoteSrcSet(id, false),\n\t\t\t\t\t\t\t\t\tanimSrc: getTwitchEmoteURL(id, 1, true),\n\t\t\t\t\t\t\t\t\tanimSrcSet: getTwitchEmoteSrcSet(id, true),\n\t\t\t\t\t\t\t\t\tfavorite: is_fav,\n\t\t\t\t\t\t\t\t\thidden: twitch_hidden.includes(id),\n\t\t\t\t\t\t\t\t\tlocked: follower_locked,\n\t\t\t\t\t\t\t\t\tlock_icon: 'heart'\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\temotes.push(em);\n\n\t\t\t\t\t\t\t\tif ( is_fav && ! seen )\n\t\t\t\t\t\t\t\t\tfavorites.push(em);\n\n\t\t\t\t\t\t\t\ttwitch_seen.add(id);\n\n\t\t\t\t\t\t\t\tif ( lock_set )\n\t\t\t\t\t\t\t\t\tlock_set.add(id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( Array.isArray(products) ) {\n\t\t\t\t\t\tfor(const product of products) {\n\t\t\t\t\t\t\tif ( ! product || ! Array.isArray(product.emotes) )\n\t\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t\tconst set_id = product.emoteSetID,\n\t\t\t\t\t\t\t\tset_data = data[set_id],\n\t\t\t\t\t\t\t\tlocked = ! set_ids.has(set_id);\n\n\t\t\t\t\t\t\tlet lock_set;\n\n\t\t\t\t\t\t\tif ( set_data ) {\n\t\t\t\t\t\t\t\tsection.renews = set_data.renews;\n\t\t\t\t\t\t\t\tsection.ends = set_data.ends;\n\t\t\t\t\t\t\t\tsection.prime = set_data.prime;\n\t\t\t\t\t\t\t\tsection.gift = set_data.gift && set_data.gift.isGift;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// If the channel is locked, store data about that in the\n\t\t\t\t\t\t\t// section so we can show appropriate UI to let people\n\t\t\t\t\t\t\t// subscribe. Also include all the already known emotes\n\t\t\t\t\t\t\t// in the list of emotes this product unlocks.\n\t\t\t\t\t\t\tif ( locked )\n\t\t\t\t\t\t\t\tlocks[set_id] = {\n\t\t\t\t\t\t\t\t\tset_id,\n\t\t\t\t\t\t\t\t\tid: product.id,\n\t\t\t\t\t\t\t\t\tprice: product.price || TIERS[product.tier],\n\t\t\t\t\t\t\t\t\turl: product.url,\n\t\t\t\t\t\t\t\t\temotes: lock_set = new Set(unlockable_emotes)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tsection.all_locked = false;\n\n\t\t\t\t\t\t\tlet order = 0;\n\n\t\t\t\t\t\t\tfor(const emote of product.emotes) {\n\t\t\t\t\t\t\t\t// Validate emotes, because apparently Twitch is handing\n\t\t\t\t\t\t\t\t// out bad emote data.\n\t\t\t\t\t\t\t\tif ( ! emote || ! emote.id || ! emote.token )\n\t\t\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t\t\tconst id = emote.id,\n\t\t\t\t\t\t\t\t\tname = KNOWN_CODES[emote.token] || emote.token,\n\t\t\t\t\t\t\t\t\tseen = twitch_seen.has(id),\n\t\t\t\t\t\t\t\t\tis_fav = twitch_favorites.includes(id);\n\n\t\t\t\t\t\t\t\tconst em = {\n\t\t\t\t\t\t\t\t\tprovider: 'twitch',\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tset_id,\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\torder: order++,\n\t\t\t\t\t\t\t\t\tlocked: locked && ! seen,\n\t\t\t\t\t\t\t\t\tsrc: getTwitchEmoteURL(id, 1, false),\n\t\t\t\t\t\t\t\t\tsrcSet: getTwitchEmoteSrcSet(id, false),\n\t\t\t\t\t\t\t\t\tanimSrc: getTwitchEmoteURL(id, 1, true),\n\t\t\t\t\t\t\t\t\tanimSrcSet: getTwitchEmoteSrcSet(id, true),\n\t\t\t\t\t\t\t\t\tfavorite: is_fav,\n\t\t\t\t\t\t\t\t\thidden: twitch_hidden.includes(id)\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\temotes.push(em);\n\n\t\t\t\t\t\t\t\tif ( ! locked && is_fav && ! seen )\n\t\t\t\t\t\t\t\t\tfavorites.push(em);\n\n\t\t\t\t\t\t\t\ttwitch_seen.add(id);\n\n\t\t\t\t\t\t\t\tif ( lock_set ) {\n\t\t\t\t\t\t\t\t\tunlockable_emotes.add(id);\n\t\t\t\t\t\t\t\t\tlock_set.add(id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst seen_bits = new Set;\n\n\t\t\t\t\tif ( Array.isArray(bits) ) {\n\t\t\t\t\t\tlet order;\n\t\t\t\t\t\tfor(const emote of bits) {\n\t\t\t\t\t\t\tif ( ! emote || ! emote.id || ! emote.bitsBadgeTierSummary )\n\t\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t\tconst id = emote.id,\n\t\t\t\t\t\t\t\tset_id = emote.setID,\n\t\t\t\t\t\t\t\tsummary = emote.bitsBadgeTierSummary,\n\t\t\t\t\t\t\t\tlocked = ! twitch_seen.has(id) && ! summary.self?.isUnlocked;\n\n\t\t\t\t\t\t\t// If the emote isn't unlocked, store data about that in the\n\t\t\t\t\t\t\t// section so we can show appropriate UI to let people know\n\t\t\t\t\t\t\t// that the emote isn't unlocked.\n\t\t\t\t\t\t\tif ( locked )\n\t\t\t\t\t\t\t\tlocks[set_id] = {\n\t\t\t\t\t\t\t\t\tset_id,\n\t\t\t\t\t\t\t\t\tid: 'cheer',\n\t\t\t\t\t\t\t\t\tprice: null,\n\t\t\t\t\t\t\t\t\tbits: summary.threshold,\n\t\t\t\t\t\t\t\t\tbits_remaining: summary.self?.numberOfBitsUntilUnlock ?? summary.threshold,\n\t\t\t\t\t\t\t\t\temotes: new Set([emote.id])\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst is_fav = twitch_favorites.includes(id);\n\n\t\t\t\t\t\t\t/*if ( Array.isArray(emote.modifiers) && emote.modifiers.length )\n\t\t\t\t\t\t\t\tmodifiers[id] = emote.modifiers;*/\n\n\t\t\t\t\t\t\tconst em = {\n\t\t\t\t\t\t\t\tprovider: 'twitch',\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tset_id,\n\t\t\t\t\t\t\t\tname: emote.token,\n\t\t\t\t\t\t\t\tlocked,\n\t\t\t\t\t\t\t\torder: order++,\n\t\t\t\t\t\t\t\tsrc: getTwitchEmoteURL(id, 1, false),\n\t\t\t\t\t\t\t\tsrcSet: getTwitchEmoteSrcSet(id, false),\n\t\t\t\t\t\t\t\tanimSrc: getTwitchEmoteURL(id, 1, true),\n\t\t\t\t\t\t\t\tanimSrcSet: getTwitchEmoteSrcSet(id, true),\n\t\t\t\t\t\t\t\tbits: true,\n\t\t\t\t\t\t\t\tbit_value: summary.threshold,\n\t\t\t\t\t\t\t\tfavorite: is_fav,\n\t\t\t\t\t\t\t\thidden: twitch_hidden.includes(id)\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\temotes.push(em);\n\n\t\t\t\t\t\t\tif ( ! locked && is_fav && ! twitch_seen.has(id) )\n\t\t\t\t\t\t\t\tfavorites.push(em);\n\n\t\t\t\t\t\t\tseen_bits.add(id);\n\t\t\t\t\t\t\ttwitch_seen.add(id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( bits_unlocked.length ) {\n\t\t\t\t\t\tfor(const emote of bits_unlocked) {\n\t\t\t\t\t\t\tif ( seen_bits.has(emote.id) )\n\t\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t\temotes.push(emote);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( emotes.length ) {\n\t\t\t\t\t\temotes.sort(sort_emotes);\n\t\t\t\t\t\tchannel.push(section);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet wants_resub_info = false,\n\t\t\t\t\twants_plan_info = false,\n\t\t\t\t\thas_new_effects = false;\n\n\t\t\t\tconst unlocked_effects = [...t.settings.provider.get('unlocked-effects', [])];\n\n\t\t\t\t// Finally, emotes added by FrankerFaceZ.\n\t\t\t\tif ( t.chat.context.get('chat.emotes.enabled') > 1 ) {\n\t\t\t\t\tconst me = t.site.getUser();\n\n\t\t\t\t\tconst use_effect_tab = t.chat.context.get('chat.emote-menu.effect-tab');\n\n\t\t\t\t\tconst ffz_room = t.emotes.getRoomSetsWithSources(me?.id, me?.login, props.channel_id, null),\n\t\t\t\t\t\tffz_subs = t.emotes.getSubSetsWithSources(),\n\t\t\t\t\t\tffz_global = t.emotes.getGlobalSetsWithSources(me?.id, me?.login),\n\t\t\t\t\t\tseen_sets = new Set(),\n\t\t\t\t\t\tseen_favorites = {};\n\n\t\t\t\t\tlet grouped_sets = {};\n\n\t\t\t\t\tfor(const [emote_set, provider, source_id] of ffz_room) {\n\t\t\t\t\t\tif ( seen_sets.has(emote_set) )\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tseen_sets.add(emote_set);\n\n\t\t\t\t\t\tconst section = this.processFFZSet(emote_set, provider, favorites, seen_favorites, grouped_sets, false, undefined, source_id, props.channel_id);\n\t\t\t\t\t\tif ( section ) {\n\t\t\t\t\t\t\tsection.emotes.sort(sort_emotes);\n\n\t\t\t\t\t\t\tif ( ! channel.includes(section) )\n\t\t\t\t\t\t\t\tchannel.push(section);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tgrouped_sets = {};\n\n\t\t\t\t\tconst global_set_ids = ffz_global.map(x => x?.[0]?.id);\n\n\t\t\t\t\tfor(const [emote_set, provider] of ffz_subs) {\n\t\t\t\t\t\tif ( seen_sets.has(emote_set) )\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tseen_sets.add(emote_set);\n\n\t\t\t\t\t\tconst locked = ! global_set_ids.includes(emote_set.id);\n\n\t\t\t\t\t\twants_resub_info = true;\n\n\t\t\t\t\t\tconst section = this.processFFZSet(emote_set, provider, favorites, seen_favorites, grouped_sets, locked, state);\n\t\t\t\t\t\tif ( section ) {\n\t\t\t\t\t\t\tsection.emotes.sort(sort_emotes);\n\n\t\t\t\t\t\t\tif ( use_effect_tab && ! effects.includes(section) && section.has_effects ) {\n\t\t\t\t\t\t\t\thas_new_effects = this.checkNewEffects(section.emotes, unlocked_effects) || has_new_effects;\n\t\t\t\t\t\t\t\teffects.push(section);\n\t\t\t\t\t\t\t} else if ( ! all.includes(section) )\n\t\t\t\t\t\t\t\tall.push(section);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tgrouped_sets = {};\n\n\t\t\t\t\tfor(const [emote_set, provider] of ffz_global) {\n\t\t\t\t\t\tif ( seen_sets.has(emote_set) )\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tseen_sets.add(emote_set);\n\n\t\t\t\t\t\tconst section = this.processFFZSet(emote_set, provider, favorites, seen_favorites, grouped_sets);\n\t\t\t\t\t\tif ( section ) {\n\t\t\t\t\t\t\tsection.emotes.sort(sort_emotes);\n\n\t\t\t\t\t\t\tif ( use_effect_tab && ! effects.includes(section) && section.has_effects ) {\n\t\t\t\t\t\t\t\thas_new_effects = this.checkNewEffects(section.emotes, unlocked_effects) || has_new_effects;\n\t\t\t\t\t\t\t\teffects.push(section);\n\n\t\t\t\t\t\t\t} else if ( ! all.includes(section) )\n\t\t\t\t\t\t\t\tall.push(section);\n\n\t\t\t\t\t\t\tif ( ! channel.includes(section) && maybe_call(section.force_global, this, emote_set, props.channel_data && props.channel_data.user, me) )\n\t\t\t\t\t\t\t\tchannel.push(section);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Load FFZ sub data.\n\t\t\t\tstate.wants_resub_info = wants_resub_info;\n\t\t\t\tstate.wants_plan_info = wants_plan_info;\n\n\t\t\t\tif ( this.props.visible ) {\n\t\t\t\t\tif ( state.tab === 'effects' )\n\t\t\t\t\t\thas_new_effects = false;\n\n\t\t\t\t\tif ( wants_plan_info )\n\t\t\t\t\t\tthis.loadFFZPlanData();\n\t\t\t\t\tif ( wants_resub_info )\n\t\t\t\t\t\tthis.loadFFZSubData();\n\t\t\t\t}\n\n\t\t\t\t// Sort Sets\n\t\t\t\tchannel.sort(sort_sets);\n\t\t\t\teffects.sort(sort_sets);\n\t\t\t\tall.sort(sort_sets);\n\n\t\t\t\tstate.has_channel_tab = channel.length > 0;\n\t\t\t\tstate.has_effect_tab = effects.length > 0;\n\t\t\t\tstate.hasNewEffects = effects.length > 0 && has_new_effects;\n\t\t\t\tstate.unlockedEffects = unlocked_effects;\n\n\t\t\t\treturn this.buildEmoji(state);\n\t\t\t}\n\n\n\t\t\tcheckNewEffects(emotes, unlocked) {\n\t\t\t\tlet added = false;\n\t\t\t\tfor(const emote of emotes) {\n\t\t\t\t\tif ( emote && ! emote.locked && emote.id && emote.provider === 'ffz' && ! unlocked.includes(emote.id) ) {\n\t\t\t\t\t\tadded = true;\n\t\t\t\t\t\tunlocked.push(emote.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn added;\n\t\t\t}\n\n\n\t\t\tprocessFFZSet(emote_set, provider, favorites, seen_favorites, grouped_sets, locked = false, state, source_id, host_id = null) { // eslint-disable-line class-methods-use-this\n\t\t\t\tif ( ! emote_set || ! emote_set.emotes )\n\t\t\t\t\treturn null;\n\n\t\t\t\tlet source_name;\n\t\t\t\tif ( source_id ) {\n\t\t\t\t\tconst room = t.parent.shared_room_data?.get(source_id);\n\t\t\t\t\tsource_name = room?.displayName ?? room?.login;\n\t\t\t\t}\n\n\t\t\t\tconst fav_key = emote_set.source || 'ffz',\n\t\t\t\t\tknown_favs = t.emotes.getFavorites(fav_key),\n\t\t\t\t\tknown_hidden = t.emotes.getHidden(fav_key),\n\t\t\t\t\tseen_favs = seen_favorites[fav_key] = seen_favorites[fav_key] || new Set;\n\n\t\t\t\tconst key = `${emote_set.merge_source || fav_key}-${emote_set.merge_id || emote_set.id}`,\n\t\t\t\t\tpdata = t.emotes.providers.get(provider),\n\t\t\t\t\tsource = pdata && pdata.menu_name ?\n\t\t\t\t\t\t(pdata.menu_i18n_key ?\n\t\t\t\t\t\t\tt.i18n.t(pdata.menu_i18n_key, pdata.menu_name, pdata) :\n\t\t\t\t\t\t\tpdata.menu_name) :\n\t\t\t\t\t\temote_set.source || 'FFZ',\n\n\t\t\t\t\ttitle = (provider === 'ffz-main' || emote_set.title_is_channel)\n\t\t\t\t\t\t? source_name\n\t\t\t\t\t\t\t\t? t.i18n.t('emote-menu.source-set', '{channel}\\'s Emotes', {channel: source_name})\n\t\t\t\t\t\t\t\t: t.i18n.t('emote-menu.main-set', 'Channel Emotes')\n\t\t\t\t\t\t: (emote_set.title || t.i18n.t('emote-menu.unknown-set', `Set #{set_id}`, {set_id: emote_set.id}));\n\n\t\t\t\tlet sort_key = pdata && pdata.sort_key || emote_set.sort;\n\t\t\t\tif ( sort_key == null )\n\t\t\t\t\tsort_key = emote_set.title.toLowerCase().includes('global')\n\t\t\t\t\t\t? 100\n\t\t\t\t\t\t: 0;\n\n\t\t\t\t// Shared Chat emote sets always come after.\n\t\t\t\tif (source_id && source_id !== host_id)\n\t\t\t\t\tsort_key += 50;\n\n\t\t\t\tlet section, emotes, locks;\n\n\t\t\t\tif ( grouped_sets[key] ) {\n\t\t\t\t\tsection = grouped_sets[key];\n\t\t\t\t\temotes = section.emotes;\n\n\t\t\t\t\tif ( key === `${fav_key}-${emote_set.id}` )\n\t\t\t\t\t\tObject.assign(section, {\n\t\t\t\t\t\t\tsort_key,\n\t\t\t\t\t\t\timage: emote_set.icon,\n\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\tsource,\n\t\t\t\t\t\t\tchannel_source: source_name,\n\t\t\t\t\t\t\tforce_global: emote_set.force_global\n\t\t\t\t\t\t});\n\n\t\t\t\t} else {\n\t\t\t\t\temotes = [];\n\t\t\t\t\tsection = grouped_sets[key] = {\n\t\t\t\t\t\tsort_key,\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\timage: emote_set.icon,\n\t\t\t\t\t\ticon: 'zreknarf',\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t\tsource,\n\t\t\t\t\t\tchannel_source: source_name,\n\t\t\t\t\t\temotes,\n\t\t\t\t\t\tforce_global: emote_set.force_global,\n\t\t\t\t\t\tall_locked: true\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Try to get resub info.\n\t\t\t\tconst resub = (state || this.state)?.ffz_sub_data?.sets?.[emote_set.id];\n\t\t\t\tif ( resub ) {\n\t\t\t\t\tsection.renews = resub.next_bill_date;\n\t\t\t\t\tsection.ends = resub.expires_at;\n\t\t\t\t}\n\n\t\t\t\tif ( locked ) {\n\t\t\t\t\tsection.locks = section.locks || {};\n\t\t\t\t\tsection.locks[emote_set.id] = {\n\t\t\t\t\t\tset_id: emote_set.id,\n\t\t\t\t\t\tid: 'subwoofer',\n\t\t\t\t\t\tis_ffz: true,\n\t\t\t\t\t\tprice: 'More Info',\n\t\t\t\t\t\turl: 'https://www.frankerfacez.com/subscribe',\n\t\t\t\t\t\temotes: locks = new Set()\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t\tsection.all_locked = false;\n\n\t\t\t\tfor(const emote of Object.values(emote_set.emotes))\n\t\t\t\t\tif ( ! emote.hidden ) {\n\t\t\t\t\t\tconst is_fav = known_favs.includes(emote.id),\n\t\t\t\t\t\t\tem = {\n\t\t\t\t\t\t\t\tprovider: 'ffz',\n\t\t\t\t\t\t\t\tid: emote.id,\n\t\t\t\t\t\t\t\tset_id: emote_set.id,\n\t\t\t\t\t\t\t\tsrc: emote.src,\n\t\t\t\t\t\t\t\tsrcSet: emote.srcSet,\n\t\t\t\t\t\t\t\tanimSrc: emote.animSrc,\n\t\t\t\t\t\t\t\tanimSrcSet: emote.animSrcSet,\n\t\t\t\t\t\t\t\teffects: emote.modifier ? emote.modifier_flags : 0,\n\t\t\t\t\t\t\t\teffect_prefix: emote.modifier ? emote.modifier_prefix : false,\n\t\t\t\t\t\t\t\tname: emote.name,\n\t\t\t\t\t\t\t\tfavorite: is_fav,\n\t\t\t\t\t\t\t\tlocked: locked,\n\t\t\t\t\t\t\t\thidden: known_hidden.includes(emote.id),\n\t\t\t\t\t\t\t\theight: emote.height,\n\t\t\t\t\t\t\t\twidth: emote.width\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\temotes.push(em);\n\n\t\t\t\t\t\tif ( ! locked && is_fav && ! seen_favs.has(emote.id) ) {\n\t\t\t\t\t\t\tfavorites.push(em);\n\t\t\t\t\t\t\tseen_favs.add(emote.id);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( locked )\n\t\t\t\t\t\t\tlocks.add(emote.id);\n\n\t\t\t\t\t\tif ( emote.modifier && emote.modifier_flags )\n\t\t\t\t\t\t\tsection.has_effects = true;\n\t\t\t\t\t}\n\n\t\t\t\tif ( emotes.length )\n\t\t\t\t\treturn section;\n\t\t\t}\n\n\n\t\t\trebuildData() {\n\t\t\t\tconst state = this.buildState(this.props, this.state);\n\t\t\t\tthis.setState(this.filterState(state.filter, state));\n\t\t\t}\n\n\n\t\t\tcomponentDidUpdate(old_props) {\n\t\t\t\tif ( this.props.visible && ! old_props.visible ) {\n\t\t\t\t\tthis.loadData();\n\n\t\t\t\t\tif ( this.state.wants_plan_info )\n\t\t\t\t\t\tthis.loadFFZPlanData();\n\t\t\t\t\tif ( this.state.wants_resub_info )\n\t\t\t\t\t\tthis.loadFFZSubData();\n\t\t\t\t}\n\n\t\t\t\tif ( ! this.props.visible && old_props.visible ) {\n\t\t\t\t\tif ( this.state.clearSearch ) {\n\t\t\t\t\t\tthis.setState(this.filterState('', this.state));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst cd = this.props.channel_data,\n\t\t\t\t\told_cd = old_props.channel_data,\n\t\t\t\t\tcd_diff = cd?.user !== old_cd?.user || cd?.channel !== old_cd?.channel,\n\n\t\t\t\t\t// emote_data is rebuilt by Twitch a lot so we can't\n\t\t\t\t\t// rely on object equality. Use a deep equality check. It's\n\t\t\t\t\t// going to be slower, but it's still faster than rebuilding\n\t\t\t\t\t// our entire data structure when nothing actually changed.\n\t\t\t\t\ted = this.props.emote_data,\n\t\t\t\t\told_ed = old_props.emote_data,\n\t\t\t\t\ted_diff = ! deep_equals(ed?.emoteSets, old_ed?.emoteSets) ||\n\t\t\t\t\t\t! deep_equals(ed?.emoteMap, old_ed?.emoteMap);\n\n\t\t\t\tif ( cd_diff || ed_diff ||\n\t\t\t\t\t\tthis.props.user_id !== old_props.user_id ||\n\t\t\t\t\t\tthis.props.channel_id !== old_props.channel_id ||\n\t\t\t\t\t\tthis.props.loading !== old_props.loading ||\n\t\t\t\t\t\tthis.props.error !== old_props.error ) {\n\t\t\t\t\tt.log.debug('Updating emote menu data. cd', cd_diff, ', ed', ed_diff);\n\t\t\t\t\tthis.rebuildData();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trenderError() {\n\t\t\t\treturn (<div class=\"tw-align-center tw-pd-1\">\n\t\t\t\t\t<div class=\"tw-mg-b-1\">\n\t\t\t\t\t\t<div class=\"tw-mg-2\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc=\"//cdn.frankerfacez.com/emoticon/26608/2\"\n\t\t\t\t\t\t\t\tsrcSet=\"//cdn.frankerfacez.com/emoticon/26608/2 1x, //cdn.frankerfacez.com/emoticon/26608/4 2x\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{t.i18n.t('emote-menu.error', 'There was an error rendering this menu.')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<button class=\"tw-button\" onClick={this.forceUpdate}>\n\t\t\t\t\t\t<span class=\"tw-button__text\">\n\t\t\t\t\t\t\t{t.i18n.t('error.try-again', 'Try Again')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>)\n\t\t\t}\n\n\t\t\trenderEmpty() { // eslint-disable-line class-methods-use-this\n\t\t\t\treturn (<div class=\"tw-align-center tw-pd-1\">\n\t\t\t\t\t<div class=\"tw-mg-2\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"//cdn.frankerfacez.com/emoticon/26608/2\"\n\t\t\t\t\t\t\tsrcSet=\"//cdn.frankerfacez.com/emoticon/26608/2 1x, //cdn.frankerfacez.com/emoticon/26608/4 2x\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.state.filtered ?\n\t\t\t\t\t\tt.i18n.t('emote-menu.empty-search', 'There are no matching emotes.') :\n\t\t\t\t\t\tthis.state.tab === 'fav' ?\n\t\t\t\t\t\t\tt.i18n.t('emote-menu.empty-favs', \"You don't have any favorite emotes. To favorite an emote, find it and {hotkey}-Click it.\", {hotkey: IS_OSX ? '' : 'Ctrl'}) :\n\t\t\t\t\t\t\tt.i18n.t('emote-menu.empty', \"There's nothing here.\")}\n\t\t\t\t</div>)\n\t\t\t}\n\n\t\t\trenderLoading() { // eslint-disable-line class-methods-use-this\n\t\t\t\treturn (<div class=\"tw-align-center tw-pd-1\">\n\t\t\t\t\t<h1 class=\"tw-mg-5 ffz-i-zreknarf loading\" />\n\t\t\t\t\t{t.i18n.t('emote-menu.loading', 'Loading...')}\n\t\t\t\t</div>)\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\tif ( ! this.props.visible && (! this.state.stayLoaded || ! this.loadedOnce) )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst loading = this.state.loading || this.props.loading,\n\t\t\t\t\tpadding = this.state.reducedPadding, //t.chat.context.get('chat.emote-menu.reduced-padding'),\n\t\t\t\t\tno_tabs = this.state.combineTabs; //t.chat.context.get('chat.emote-menu.combine-tabs');\n\n\t\t\t\tif ( ! loading )\n\t\t\t\t\tthis.loadedOnce = true;\n\n\t\t\t\tlet tab, sets, is_emoji, is_favs, is_effect;\n\n\t\t\t\tif ( no_tabs ) {\n\t\t\t\t\tsets = [\n\t\t\t\t\t\tthis.state.filtered_fav_sets,\n\t\t\t\t\t\tthis.state.filtered_channel_sets,\n\t\t\t\t\t\tthis.state.filtered_effect_sets,\n\t\t\t\t\t\tthis.state.filtered_all_sets,\n\t\t\t\t\t\tthis.state.filtered_emoji_sets\n\t\t\t\t\t].flat();\n\n\t\t\t\t} else {\n\t\t\t\t\ttab = this.state.tab || t.chat.context.get('chat.emote-menu.default-tab');\n\t\t\t\t\tif ( (tab === 'effect' && ! this.state.has_effect_tab) || (tab === 'channel' && ! this.state.has_channel_tab) || (tab === 'emoji' && ! this.state.has_emoji_tab) )\n\t\t\t\t\t\ttab = 'all';\n\n\t\t\t\t\tis_emoji = tab === 'emoji';\n\t\t\t\t\tis_favs = tab === 'fav';\n\t\t\t\t\tis_effect = tab === 'effect';\n\n\t\t\t\t\tswitch(tab) {\n\t\t\t\t\t\tcase 'fav':\n\t\t\t\t\t\t\tsets = this.state.filtered_fav_sets;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'channel':\n\t\t\t\t\t\t\tsets = this.state.filtered_channel_sets;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'effect':\n\t\t\t\t\t\t\tsets = this.state.filtered_effect_sets;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'emoji':\n\t\t\t\t\t\t\tsets = this.state.filtered_emoji_sets;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'all':\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tsets = this.state.filtered_all_sets;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst visibility = this.state.visibility_control,\n\t\t\t\t\twhisper = this.props.source === 'whisper';\n\n\t\t\t\treturn (<div class={`tw-block${this.props.visible ? '' : ' tw-hide'}`} style={{display: this.props.visible ? null : 'none !important'}}>\n\t\t\t\t\t<div class=\"tw-absolute ffz-attached ffz-attached--right ffz-attached--up\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass={`ffz-balloon ffz-balloon--auto tw-inline-block tw-border-radius-large tw-c-background-base tw-c-text-inherit tw-elevation-2 ffz--emote-picker${this.state.tall ? ' ffz--emote-picker__tall' : ''}${padding ? ' reduced-padding' : ''}`}\n\t\t\t\t\t\t\tdata-a-target=\"emote-picker\"\n\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class={`emote-picker${whisper ? '__whisper' : ''}`}>\n\t\t\t\t\t\t\t\t<div class=\"tw-flex\">\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass={`emote-picker__tab-content${whisper ? '-whisper' : ''} tw-full-width scrollable-area scrollable-area--suppress-scroll-x`}\n\t\t\t\t\t\t\t\t\t\tdata-test-selector=\"scrollable-area-wrapper\"\n\t\t\t\t\t\t\t\t\t\tdata-simplebar\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div ref={this.saveScrollRef} class=\"simplebar-scroll-content\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"simplebar-content\">\n\t\t\t\t\t\t\t\t\t\t\t\t{loading && this.renderLoading()}\n\t\t\t\t\t\t\t\t\t\t\t\t{!loading && sets && sets.map((data,idx) => data && (! visibility || (! data.emoji && ! data.is_favorites)) && createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata.emoji ? t.EmojiSection : t.MenuSection,\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey: data.key,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tidx,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tffz_sub_data: this.state.ffz_sub_data,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\temote_modifiers: this.state.emote_modifiers,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimated: this.state.animated,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcombineTabs: this.state.combineTabs,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowHeading: this.state.showHeading,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfiltered: this.state.filtered,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisibility_control: visibility,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClickToken: this.props.onClickToken,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taddSection: this.addSection,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tremoveSection: this.removeSection,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstartObserving: this.startObserving,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstopObserving: this.stopObserving\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t{! loading && (! sets || ! sets.length) && this.renderEmpty()}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{(! loading && this.state.quickNav && ! is_favs) && (<div class={`emote-picker__nav_content${whisper ? '-whisper' : ''} tw-block tw-border-radius-none tw-c-background-alt-2`}>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass={`emote-picker__nav-content-overflow${whisper ? '-whisper' : ''} scrollable-area scrollable-area--suppress-scroll-x`}\n\t\t\t\t\t\t\t\t\t\t\tdata-test-selector=\"scrollable-area-wrapper\"\n\t\t\t\t\t\t\t\t\t\t\tdata-simplebar\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div ref={this.saveNavRef} class=\"simplebar-scroll-content\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"simplebar-content\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{!loading && sets && sets.map(data => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( ! data || (visibility && (data.is_favorites || data.emoji)) )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst active = this.state.active_nav === data.key;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={data.key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass={`${active ? 'emote-picker-tab-item-wrapper__active ' : ''}${padding ? 'tw-mg-y-05' : 'tw-mg-y-1'} tw-c-text-inherit tw-interactable ffz-interactive ffz-interactable--hover-enabled ffz-interactable--default tw-block tw-full-width ffz-tooltip ffz-tooltip--no-mouse`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-key={data.key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-title={`${data.i18n ? t.i18n.t(data.i18n, data.title) : data.title}\\n${data.source_i18n ? t.i18n.t(data.source_i18n, data.source) : data.source}${data.channel_source ? ` (${data.channel_source})` : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-tooltip-side=\"left\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.clickSideNav}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class={`tw-align-items-center tw-flex tw-justify-content-center ${padding ? '' : 'tw-pd-x-05 '}tw-pd-y-05${active ? ' emote-picker-tab-item-avatar__active tw-c-text-link' : ''}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{data.image ? <figure class=\"ffz-avatar ffz-avatar--size-20\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"tw-block tw-border-radius-rounded tw-img tw-image-avatar\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={data.image}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrcSet={data.image_set}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</figure> : <figure class={`ffz-emote-picker--nav-icon ffz-i-${data.icon || 'zreknarf'}`} />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>);\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{no_tabs && <div class=\"tw-mg-y-1 tw-mg-x-05 tw-border-t\" />}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{no_tabs && (<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"tw-mg-y-1 tw-c-text-inherit tw-interactable ffz-interactive ffz-interactable--hover-enabled ffz-interactable--default tw-block tw-full-width ffz-tooltip ffz-tooltip--no-mouse\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-title={t.i18n.t('emote-menu.settings', 'Open Settings')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-tooltip-side=\"left\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.clickSettings}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class={`tw-align-items-center tw-flex tw-justify-content-center ${padding ? '' : 'tw-pd-x-05 '}tw-pd-y-05`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class=\"ffz-emote-picker--nav-icon ffz-i-cog\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"emote-picker__controls-container tw-relative\">\n\t\t\t\t\t\t\t\t\t{(is_emoji || this.state.showSearch) && (<div class=\"tw-border-t tw-pd-1\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"tw-flex\">\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"tw-block tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t\t\t\t\t\tis_emoji ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tt.i18n.t('emote-menu.search-emoji', 'Search for Emoji') :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tt.i18n.t('emote-menu.search', 'Search for Emotes')\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.filter}\n\t\t\t\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\t\t\t\tautoCapitalize=\"off\"\n\t\t\t\t\t\t\t\t\t\t\t\tautoCorrect=\"off\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleFilterChange}\n\t\t\t\t\t\t\t\t\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t{(no_tabs || is_emoji) && ! visibility && this.state.has_emoji_tab && <t.EmojiTonePicker\n\t\t\t\t\t\t\t\t\t\t\t\ttone={this.state.tone}\n\t\t\t\t\t\t\t\t\t\t\t\tchoices={this.state.tone_emoji}\n\t\t\t\t\t\t\t\t\t\t\t\tpickTone={this.pickTone}\n\t\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\t\t\t{(no_tabs || ! is_emoji) && <div class=\"tw-relative ffz-il-tooltip__container tw-mg-l-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass={`tw-align-items-center tw-align-middle tw-border-bottom-left-radius-medium tw-border-bottom-right-radius-medium tw-border-top-left-radius-medium tw-border-top-right-radius-medium tw-button-icon--primary ffz-core-button tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative${this.state.visibility_control ? ' ffz-core-button--primary' : ' tw-button-icon'}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.toggleVisibilityControl}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"tw-button-icon__icon tw-mg-x-05\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class={this.state.visibility_control ? 'ffz-i-eye-off' : 'ffz-i-eye'} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ffz-il-tooltip ffz-il-tooltip--up ffz-il-tooltip--align-right\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.visibility_control ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tt.i18n.t('emote-menu.toggle-hide.on', 'Exit Emote Visibility Control') :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tt.i18n.t('emote-menu.toggle-hide.off', 'Emote Visibility Control')\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"tw-mg-t-1 ffz--tooltip-explain\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t.i18n.t('emote-menu.toggle-hide.info', 'Emote Visibility Control allows you to hide emotes from your emote menu, either individually or by set. With Emote Visibility Control enabled, just click an emote to hide or unhide it. Please note that you will still see the emotes in chat if someone uses them, but they won\\'t appear in your emote menu.')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t\t\t\t{(no_tabs && this.state.quickNav) ? null : (<div class=\"emote-picker__tab-nav-container tw-flex tw-border-t tw-c-background-alt\">\n\t\t\t\t\t\t\t\t\t\t{! visibility && <div class={`emote-picker-tab-item${tab === 'fav' ? ' emote-picker-tab-item--active' : ''} tw-relative`}>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass={`ffz-tooltip tw-block tw-full-width ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive${tab === 'fav' ? ' ffz-interactable--selected' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"emote-picker__fav\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-tab=\"fav\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-tooltip-type=\"html\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-title={t.i18n.t('emote-menu.favorites', 'Favorites')}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.clickTab}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"tw-inline-flex tw-pd-x-1 tw-pd-y-05 tw-font-size-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class=\"ffz-i-star\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{this.state.has_channel_tab && <div class={`emote-picker-tab-item${tab === 'channel' ? ' emote-picker-tab-item--active' : ''} tw-relative`}>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass={`ffz-tooltip tw-block tw-full-width ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive${tab === 'channel' ? ' ffz-interactable--selected' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"emote-picker__channel\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-tab=\"channel\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-tooltip-type=\"html\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-title={t.i18n.t('emote-menu.channel', 'Channel')}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.clickTab}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"tw-inline-flex tw-pd-x-1 tw-pd-y-05 tw-font-size-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class=\"ffz-i-camera\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{this.state.has_effect_tab && <div class={`emote-picker-tab-item${tab === 'effect' ? ' emote-picker-tab-item--active' : ''} tw-relative`}>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass={`ffz-tooltip tw-block tw-full-width ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive${tab === 'effect' ? ' ffz-interactable--selected' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"emote-picker__effect\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-tab=\"effect\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-tooltip-type=\"html\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-title={t.i18n.t('emote-menu.effects', 'Emote Effects')}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.clickTab}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.hasNewEffects && (<div class=\"ffz-new-indicator\" />)}\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"tw-inline-flex tw-pd-x-1 tw-pd-y-05 tw-font-size-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class=\"ffz-i-fx\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t<div class={`emote-picker-tab-item${tab === 'all' ? ' emote-picker-tab-item--active' : ''} tw-relative`}>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass={`ffz-tooltip tw-block tw-full-width ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive${tab === 'all' ? ' ffz-interactable--selected' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"emote-picker__all\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-tab=\"all\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-tooltip-type=\"html\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-title={t.i18n.t('emote-menu.my-emotes', 'My Emotes')}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.clickTab}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"tw-inline-flex tw-pd-x-1 tw-pd-y-05 tw-font-size-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class=\"ffz-i-channels\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{! visibility && this.state.has_emoji_tab && <div class={`emote-picker-tab-item${tab === 'emoji' ? ' emote-picker-tab-item--active' : ''} tw-relative`}>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass={`ffz-tooltip tw-block tw-full-width ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive${tab === 'emoji' ? ' ffz-interactable--selected' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"emote-picker__emoji\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-tab=\"emoji\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-tooltip-type=\"html\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-title={t.i18n.t('emote-menu.emoji', 'Emoji')}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.clickTab}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"tw-inline-flex tw-pd-x-1 tw-pd-y-05 tw-font-size-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class=\"ffz-i-smile\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t<div class=\"tw-flex-grow-1\" />\n\t\t\t\t\t\t\t\t\t\t<div class=\"emote-picker-tab-item tw-relative\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ffz-tooltip tw-block tw-full-width ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-tooltip-type=\"html\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-title={t.i18n.t('emote-menu.settings', 'Open Settings')}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.clickSettings}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"tw-inline-flex tw-pd-x-1 tw-pd-y-05 tw-font-size-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class=\"ffz-i-cog\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>);\n\t\t\t}\n\t\t}\n\n\t\tthis.fine.wrap('ffz-emote-menu', this.MenuComponent);\n\t}\n\n\n\tasync getFFZSubPrices() {\n\t\tlet result;\n\t\ttry {\n\t\t\tresult = await fetch(`${this.staging.api}/payment/plans`)\n\t\t\t\t.then(r => r.ok ? r.json() : null);\n\t\t} catch(err) {\n\t\t\tthis.log.error('Unable to load subscription prices from server.', err);\n\t\t\tresult = null;\n\t\t}\n\n\t\t// We only care about:\n\t\t// 1. What collections are granted by the available plan.\n\t\t// 2. How much they cost.\n\n\t\tconst out = {\n\t\t\tsets: {}\n\t\t};\n\n\t\tfor(const plan of Object.values(result.plans)) {\n\t\t\tif ( ! Array.isArray(plan.temporary_collections) )\n\t\t\t\tcontinue;\n\n\t\t\tlet prices;\n\t\t\tfor(const gw_plan of Object.values(result.gateway_plans)) {\n\t\t\t\tif ( gw_plan.plan_id === plan.id && gw_plan.months === 1 ) {\n\t\t\t\t\tprices = gw_plan.prices;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( prices )\n\t\t\t\tfor(const set_id of plan.temporary_collections) {\n\t\t\t\t\tout.sets[set_id] = {\n\t\t\t\t\t\tplan_id: plan.id,\n\t\t\t\t\t\tprices\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\treturn out;\n\t}\n\n\n\tasync getFFZSubData() {\n\t\tconst me = this.resolve('site').getUser();\n\t\tif ( ! me )\n\t\t\treturn null;\n\n\t\tconst token = await this.resolve('socket').getBareAPIToken();\n\t\tif ( ! token )\n\t\t\treturn null;\n\n\t\tlet result;\n\t\ttry {\n\t\t\tresult = await fetch(`${this.staging.api}/v2/subscription/status?include=plan`, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${token}`\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then(r => r.ok ? r.json() : null);\n\t\t} catch(err) {\n\t\t\tthis.log.error('Unable to load subscription status from server.', err);\n\t\t\tresult = null;\n\t\t}\n\n\t\t// We only care about:\n\t\t// 1. If the user has a free sub available\n\t\t// 2. What collections can expire/renew\n\t\t// 3. When they expire/renew\n\n\t\tif ( ! result )\n\t\t\treturn {error: true};\n\n\t\tconst out = {\n\t\t\thas_free_sub: result.user?.bonus_month_eligible ?? false,\n\t\t\tsets: {}\n\t\t};\n\n\t\tif ( result.user?.active_subs )\n\t\t\tfor(const entry of Object.values(result.user.active_subs)) {\n\t\t\t\tconst plan = result.plans?.[entry.id];\n\t\t\t\tif ( Array.isArray(plan?.temporary_collections) ) {\n\t\t\t\t\tfor(const set_id of plan.temporary_collections)\n\t\t\t\t\t\tout.sets[set_id] = {\n\t\t\t\t\t\t\tplan_id: entry.id,\n\t\t\t\t\t\t\texpires_at: entry.expires_at\n\t\t\t\t\t\t\t\t? new Date(entry.expires_at)\n\t\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\t\tnext_bill_date: entry.next_bill_date\n\t\t\t\t\t\t\t\t? new Date(entry.next_bill_date)\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\treturn out;\n\t}\n\n\n\tasync getData(sets, force, cursor = null, nodes = []) {\n\t\tif ( this._data ) {\n\t\t\tif ( ! force && set_equals(sets, this._data_sets) )\n\t\t\t\treturn this._data;\n\t\t\telse {\n\t\t\t\tthis._data = null;\n\t\t\t\tthis._data_sets = null;\n\t\t\t}\n\t\t}\n\n\t\tlet data;\n\t\ttry {\n\t\t\tdata = await this.apollo.client.query({\n\t\t\t\tquery: SUB_STATUS,\n\t\t\t\tvariables: {\n\t\t\t\t\tfirst: 75,\n\t\t\t\t\tafter: cursor,\n\t\t\t\t\tcriteria: {\n\t\t\t\t\t\tfilter: 'ALL'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfetchPolicy: force ? 'network-only' : 'cache-first'\n\t\t\t});\n\n\t\t} catch(err) {\n\t\t\tthis.log.warn('Error fetching additional emote menu data.', err);\n\t\t\treturn this._data = null;\n\t\t}\n\n\t\tconst out = {},\n\t\t\tcurr_nodes = get('data.currentUser.subscriptionBenefits.edges.@each.node', data),\n\t\t\thas_next_page = get('data.currentUser.subscriptionBenefits.pageInfo.hasNextPage', data),\n\t\t\tcurr_cursor = get('data.currentUser.subscriptionBenefits.edges.@last.cursor', data);\n\n\t\tnodes = nodes.concat(curr_nodes);\n\n\t\tif (has_next_page) {\n\t\t\treturn this.getData(sets, force, curr_cursor, nodes);\n\t\t}\n\n\t\tif ( nodes && nodes.length )\n\t\t\tfor(const node of nodes) {\n\t\t\t\tconst product = node && node.product,\n\t\t\t\t\tset_id = product && product.emoteSetID;\n\n\t\t\t\tif ( ! set_id )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tout[set_id] = {\n\t\t\t\t\tends: maybe_date(node.endsAt),\n\t\t\t\t\trenews: maybe_date(node.renewsAt),\n\t\t\t\t\tprime: node.purchasedWithPrime,\n\t\t\t\t\tset_id,\n\t\t\t\t\ttype: product.type,\n\t\t\t\t\tgift: node.gift?.isGift\n\t\t\t\t};\n\t\t\t}\n\n\t\tthis._data_sets = sets;\n\t\treturn this._data = out;\n\t}\n}\n\n\nEmoteMenu.getData = once(EmoteMenu.getData);\nEmoteMenu.getFFZSubData = once(EmoteMenu.getFFZSubData);\nEmoteMenu.getFFZSubPrices = once(EmoteMenu.getFFZSubPrices);\n","'use strict';\n\n// ============================================================================\n// RichContent Component\n// ============================================================================\n\nimport Module from 'utilities/module';\nimport { findReactFragment } from 'utilities/dom';\n\nimport { SourcedSet, getTwitchEmoteSrcSet } from 'utilities/object';\nimport { TWITCH_POINTS_SETS, TWITCH_GLOBAL_SETS, TWITCH_PRIME_SETS, KNOWN_CODES, REPLACEMENTS, REPLACEMENT_BASE, KEYS } from 'utilities/constants';\n\nimport Twilight from 'site';\n\n\n// Prefer using these statically-allocated collators to String.localeCompare\nconst locale = Intl.Collator();\nconst localeCaseInsensitive = Intl.Collator(undefined, {sensitivity: 'accent'});\n\n// Describes how an emote matches against a given input\n// Higher values represent a more exact match\nconst NO_MATCH = 0;\nconst MATCH_ANY = 1;\nconst NON_PREFIX_MATCH = 2;\nconst CASE_INSENSITIVE_PREFIX_MATCH = 3;\nconst EXACT_PREFIX_MATCH = 4;\n\nfunction getNodeText(node) {\n\tif ( ! node )\n\t\treturn '';\n\n\tif ( node.type === 'emote' )\n\t\treturn node.emoteName;\n\n\tif ( node.type === 'text' )\n\t\treturn node.text;\n\n\tif ( Array.isArray(node.children) )\n\t\treturn node.children.map(getNodeText).join('');\n\n\treturn '';\n}\n\nfunction getNodeOffset(nodes, path) {\n\tlet offset = 0, pidx = 0, n = nodes;\n\n\twhile(pidx < path.length) {\n\t\tconst p = path[pidx];\n\n\t\tfor(let i = 0; i < p; i++)\n\t\t\toffset += getNodeText(n[i]).length;\n\n\t\tn = Array.isArray(n[p]) ? n[p] : n[p]?.children;\n\t\tpidx++;\n\t}\n\n\treturn offset;\n}\n\nexport default class Input extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('chat');\n\t\tthis.inject('chat.actions');\n\t\tthis.inject('chat.emotes');\n\t\tthis.inject('chat.emoji');\n\t\tthis.inject('i18n');\n\t\tthis.inject('settings');\n\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site');\n\n\t\t// Settings\n\n\t\tthis.settings.add('chat.hype.display-input', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Hype Chat >> Input',\n\t\t\t\ttitle: 'Allow the Hype Chat button to appear in the chat input element.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.inline-preview.enabled', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Input >> Appearance',\n\t\t\t\ttitle: 'Display in-line previews of FrankerFaceZ emotes when entering a chat message.',\n\t\t\t\tdescription: '**Note:** This feature is temperamental. It may not display all emotes, and emote effects and overlay emotes are not displayed correctly. Once this setting has been enabled, it cannot be reasonably disabled and will remain active until you refresh the page.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.mru.enabled', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Input >> Recent Messages',\n\t\t\t\ttitle: 'Allow pressing up and down to recall previously sent chat messages.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.tab-complete.ffz-emotes', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Input >> Tab Completion',\n\t\t\t\ttitle: 'Allow tab-completion of FrankerFaceZ emotes.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.tab-complete.emoji', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Input >> Tab Completion',\n\t\t\t\ttitle: 'Allow tab-completion of emoji.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.tab-complete.emotes-without-colon', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Input >> Tab Completion',\n\t\t\t\ttitle: 'Allow tab-completion of emotes without typing a colon. (:)',\n\t\t\t\tdescription: 'This will prevent the tab-completion of usernames without the @ prefix.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.tab-complete.limit-results', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Input >> Tab Completion',\n\t\t\t\ttitle: 'Limit tab-completion results to 25.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.tab-complete.prioritize-favorites', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Input >> Tab Completion',\n\t\t\t\ttitle: 'Prioritize favorite emotes at the top.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.tab-complete.prioritize-prefix-matches', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Input >> Tab Completion',\n\t\t\t\ttitle: 'Prioritize emotes that start with user input.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.tab-complete.matching', {\n\t\t\tdefault: 1,\n\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Input >> Tab Completion',\n\t\t\t\ttitle: 'Emote Matching Type',\n\t\t\t\tdescription: '1: `ppa` would match `Kappa`\\n\\n' +\n\t\t\t\t\t'2: `sip` would match `cohhSip` but not `Gossip`\\n\\n' +\n\t\t\t\t\t'3: `pasta` would match `pastaThat` but not `HoldThat`',\n\n\t\t\t\tcomponent: 'setting-select-box',\n\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 1, title: '1: Anything (Twitch style)'},\n\t\t\t\t\t{value: 2, title: '2: Non-Prefix (Old FFZ style)'},\n\t\t\t\t\t{value: 3, title: '3: Exact (Case-Insensitive)'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\n\t\t// Components\n\n\t\tthis.ChatInput = this.fine.define(\n\t\t\t'chat-input',\n\t\t\tn => n && n.setLocalChatInputRef && n.setLocalAutocompleteInputRef,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.EmoteSuggestions = this.fine.define(\n\t\t\t'tab-emote-suggestions',\n\t\t\tn => n && n.getMatches && n.autocompleteType === 'emote',\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\n\t\tthis.MentionSuggestions = this.fine.define(\n\t\t\t'tab-mention-suggestions',\n\t\t\tn => n && n.getMentions && n.renderMention,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.CommandSuggestions = this.fine.define(\n\t\t\t'tab-cmd-suggestions',\n\t\t\tn => n && n.getMatches && n.doesCommandMatchTerm,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\t// Implement Twitch's unfinished emote usage object for prioritizing sorting\n\t\tthis.EmoteUsageCount = {\n\t\t\tTriHard: 196568036,\n\t\t\tKappa: 192158118,\n\t\t\t'4Head': 155758710,\n\t\t\tPogChamp: 151485090,\n\t\t\tcmonBruh: 146352878,\n\t\t\tBibleThump: 56472964,\n\t\t\tWutFace: 45069031,\n\t\t\tKreygasm: 41387580,\n\t\t\tDansGame: 38097659,\n\t\t\tSMOrc: 34734484,\n\t\t\tKappaPride: 34262839,\n\t\t\tVoHiYo: 27886434,\n\t\t\tSwiftRage: 24561900,\n\t\t\tResidentSleeper: 24438298,\n\t\t\tEleGiggle: 19891526,\n\t\t\tFailFish: 19118343,\n\t\t\tNotLikeThis: 18802905,\n\t\t\tKeepo: 18351415,\n\t\t\tBabyRage: 18220906,\n\t\t\tMingLee: 18026207,\n\t\t\tHeyGuys: 14851569,\n\t\t\tANELE: 14648986,\n\t\t\tPJSalt: 14438861\n\t\t};\n\t}\n\n\tasync onEnable() {\n\t\tthis.chat.context.on('changed:chat.hype.display-input', () => this.ChatInput.forceUpdate());\n\t\tthis.chat.context.on('changed:chat.actions.room', () => this.ChatInput.forceUpdate());\n\t\tthis.chat.context.on('changed:chat.actions.room-above', () => this.ChatInput.forceUpdate());\n\t\tthis.chat.context.on('changed:chat.tab-complete.emotes-without-colon', enabled => {\n\t\t\tfor (const inst of this.EmoteSuggestions.instances)\n\t\t\t\tinst.canBeTriggeredByTab = enabled;\n\n\t\t\tfor (const inst of this.MentionSuggestions.instances)\n\t\t\t\tinst.canBeTriggeredByTab = !enabled;\n\t\t});\n\n\t\tthis.use_previews = this.chat.context.get('chat.inline-preview.enabled');\n\n\t\tthis.chat.context.on('changed:chat.inline-preview.enabled', val => {\n\t\t\tif ( this.use_previews )\n\t\t\t\treturn;\n\n\t\t\tthis.use_previews = val;\n\t\t\tif ( val )\n\t\t\t\tfor(const inst of this.ChatInput.instances) {\n\t\t\t\t\tthis.installPreviewObserver(inst);\n\t\t\t\t\tinst.ffzInjectEmotes();\n\t\t\t\t\tinst.forceUpdate();\n\t\t\t\t\tthis.emit('site:dom-update', 'chat-input', inst);\n\t\t\t\t}\n\t\t});\n\n\t\tconst React = await this.site.findReact(),\n\t\t\tcreateElement = React && React.createElement;\n\n\t\tif ( ! createElement )\n\t\t\treturn this.log.warn('Unable to get React.');\n\n\t\tconst t = this;\n\n\t\tthis.ChatInput.ready((cls, instances) => {\n\t\t\tconst old_render = cls.prototype.render;\n\n\t\t\tcls.prototype.render = function() {\n\t\t\t\tconst out = old_render.call(this);\n\n\t\t\t\ttry {\n\t\t\t\t\tconst hide_hype = ! t.chat.context.get('chat.hype.display-input');\n\t\t\t\t\tif ( hide_hype ) {\n\t\t\t\t\t\tconst frag = findReactFragment(out, n => n.key === 'paidPinnedMessage');\n\t\t\t\t\t\tif ( frag )\n\t\t\t\t\t\t\tfrag.type = () => null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst above = t.chat.context.get('chat.actions.room-above'),\n\t\t\t\t\t\tstate = t.chat.context.get('context.chat_state') || {},\n\t\t\t\t\t\tcontainer = above ? findReactFragment(out, n => n.props && Array.isArray(n.props.children))  : findReactFragment(out, n => n.props && n.props.className === 'chat-input__buttons-container');\n\t\t\t\t\tif ( ! container || ! container.props || ! container.props.children )\n\t\t\t\t\t\treturn out;\n\n\t\t\t\t\tconst props = this.props;\n\t\t\t\t\tif ( ! props || ! props.channelID )\n\t\t\t\t\t\treturn out;\n\n\t\t\t\t\tconst u = props.sessionUser ? {\n\t\t\t\t\t\t\tid: props.sessionUser.id,\n\t\t\t\t\t\t\tlogin: props.sessionUser.login,\n\t\t\t\t\t\t\tdisplayName: props.sessionUser.displayName,\n\t\t\t\t\t\t\tmod: props.isCurrentUserModerator,\n\t\t\t\t\t\t\tstaff: props.isStaff\n\t\t\t\t\t\t} : null,\n\t\t\t\t\t\tr = {\n\t\t\t\t\t\t\tid: props.channelID,\n\t\t\t\t\t\t\tlogin: props.channelLogin,\n\t\t\t\t\t\t\tdisplayName: props.channelDisplayName,\n\t\t\t\t\t\t\temoteOnly: props.emoteOnlyMode,\n\t\t\t\t\t\t\tslowMode: props.slowMode,\n\t\t\t\t\t\t\tslowDuration: props.slowModeDuration,\n\t\t\t\t\t\t\tsubsMode: props.subsOnlyMode,\n\t\t\t\t\t\t\tr9kMode: state.r9k,\n\t\t\t\t\t\t\tfollowersOnly: state.followersOnly,\n\t\t\t\t\t\t\tfollowersDuration: state.followersOnlyRequirement\n\t\t\t\t\t\t}\n\n\t\t\t\t\tconst actions = t.actions.renderRoom(t.chat.context.get('context.chat.showModIcons'), u, r, above, createElement);\n\t\t\t\t\tif ( above )\n\t\t\t\t\t\tcontainer.props.children.unshift(actions || null);\n\t\t\t\t\telse\n\t\t\t\t\t\tcontainer.props.children.splice(1, 0, actions || null);\n\n\t\t\t\t} catch(err) {\n\t\t\t\t\tt.log.error(err);\n\t\t\t\t\tt.log.capture(err);\n\t\t\t\t}\n\n\t\t\t\treturn out;\n\t\t\t}\n\n\t\t\tfor(const inst of instances) {\n\t\t\t\tinst.forceUpdate();\n\t\t\t\tthis.emit('site:dom-update', 'chat-input', inst);\n\t\t\t\tthis.updateEmoteCompletion(inst);\n\t\t\t\tthis.overrideChatInput(inst);\n\t\t\t\tinst.ffzInjectEmotes();\n\t\t\t\tthis.installPreviewObserver(inst);\n\t\t\t}\n\t\t});\n\n\t\tthis.EmoteSuggestions.ready((cls, instances) => {\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.overrideEmoteMatcher(inst);\n\t\t});\n\n\t\tthis.MentionSuggestions.ready((cls, instances) => {\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.overrideMentionMatcher(inst);\n\t\t});\n\n\t\tthis.CommandSuggestions.ready((cls, instances) => {\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.overrideCommandMatcher(inst);\n\t\t});\n\n\t\tthis.ChatInput.on('update', this.updateEmoteCompletion, this);\n\t\tthis.ChatInput.on('mount', this.overrideChatInput, this);\n\n\t\tthis.ChatInput.on('mount', this.installPreviewObserver, this);\n\t\tthis.ChatInput.on('unmount', this.removePreviewObserver, this);\n\n\t\tthis.EmoteSuggestions.on('mount', this.overrideEmoteMatcher, this);\n\t\tthis.MentionSuggestions.on('mount', this.overrideMentionMatcher, this);\n\t\tthis.CommandSuggestions.on('mount', this.overrideCommandMatcher, this);\n\n\t\tthis.chat.context.on('changed:chat.emotes.animated', this.uncacheTabCompletion, this);\n\t\tthis.chat.context.on('changed:chat.emotes.enabled', this.uncacheTabCompletion, this);\n\t\tthis.chat.context.on('changed:chat.tab-complete.matching', this.uncacheTabCompletion, this);\n\t\tthis.on('chat.emotes:change-hidden', this.uncacheTabCompletion, this);\n\t\tthis.on('chat.emotes:change-set-hidden', this.uncacheTabCompletion, this);\n\t\tthis.on('chat.emotes:change-favorite', this.uncacheTabCompletion, this);\n\t\tthis.on('chat.emotes:update-default-sets', this.uncacheTabCompletion, this);\n\t\tthis.on('chat.emotes:update-user-sets', this.uncacheTabCompletion, this);\n\t\tthis.on('chat.emotes:update-room-sets', this.uncacheTabCompletion, this);\n\t\tthis.on('site.css_tweaks:update-chat-css', this.resizeInput, this);\n\t}\n\n\tuncacheTabCompletion() {\n\t\tfor(const inst of this.EmoteSuggestions.instances) {\n\t\t\tinst.ffz_ffz_cache = null;\n\t\t\tinst.ffz_twitch_cache = null;\n\t\t}\n\n\t\tif ( this.use_previews )\n\t\t\tfor(const inst of this.ChatInput.instances) {\n\t\t\t\tinst.ffzInjectEmotes();\n\t\t\t\tinst.forceUpdate();\n\t\t\t\tthis.emit('site:dom-update', 'chat-input', inst);\n\t\t\t}\n\t}\n\n\tupdateInput() {\n\t\tfor(const inst of this.ChatInput.instances) {\n\t\t\tif ( inst ) {\n\t\t\t\tinst.forceUpdate();\n\t\t\t\tthis.emit('site:dom-update', 'chat-input', inst);\n\t\t\t}\n\t\t}\n\t}\n\n\tresizeInput() {\n\t\tif ( this._resize_waiter )\n\t\t\tcancelAnimationFrame(this._resize_waiter);\n\n\t\tthis._resize_waiter = requestAnimationFrame(() => this._resizeInput())\n\t}\n\n\t_resizeInput() {\n\t\tthis._resize_waiter = null;\n\t\tfor (const chat_input of this.ChatInput.instances)\n\t\t\tchat_input.resizeInput();\n\t}\n\n\n\tinstallPreviewObserver(inst) {\n\t\tif ( inst._ffz_preview_observer || ! window.MutationObserver )\n\t\t\treturn;\n\n\t\tif ( ! this.use_previews )\n\t\t\treturn;\n\n\t\tconst el = this.fine.getHostNode(inst),\n\t\t\ttarget = el && el.querySelector('.chat-input__textarea');\n\t\tif ( ! target )\n\t\t\treturn;\n\n\t\tinst._ffz_preview_observer = new MutationObserver(mutations => {\n\t\t\tfor(const mut of mutations) {\n\t\t\t\t//if ( mut.target instanceof Element )\n\t\t\t\t//\tthis.checkForPreviews(inst, mut.target);\n\n\t\t\t\tfor(const node of mut.addedNodes) {\n\t\t\t\t\tif ( node instanceof Element )\n\t\t\t\t\t\tthis.checkForPreviews(inst, node);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tinst._ffz_preview_observer.observe(target, {\n\t\t\tchildList: true,\n\t\t\tsubtree: true,\n\t\t\t//attributeFilter: ['src']\n\t\t});\n\t}\n\n\tcheckForPreviews(inst, node) {\n\t\t// We can't find the tooltip element directly (without digging into React tree at least)\n\t\t// So instead just find the relevant images in the document. This shouldn't happen TOO\n\t\t// frequently, with any luck, so the performance impact should be small.\n\t\tif ( node.querySelector?.('span[data-a-target=\"chat-input-emote-preview\"]') ) {\n\t\t\tfor(const target of document.querySelectorAll('.tw-tooltip-layer img.chat-line__message--emote')) {\n\t\t\t\tif ( target && target.src.startsWith('https://static-cdn.jtvnw.net/emoticons/v2/__FFZ__') )\n\t\t\t\t\tthis.updatePreview(inst, target);\n\t\t\t}\n\t\t}\n\n\t\t// This no longer works because they removed aria-describedby\n\t\t/*for(const el of node.querySelectorAll?.('span[data-a-target=\"chat-input-emote-preview\"][aria-describedby]') ?? []) {\n\t\t\tconst cont = document.getElementById(el.getAttribute('aria-describedby')),\n\t\t\t\ttarget = cont && cont.querySelector('img.chat-line__message--emote');\n\n\t\t\tif ( target && target.src.startsWith('https://static-cdn.jtvnw.net/emoticons/v2/__FFZ__') )\n\t\t\t\tthis.updatePreview(inst, target);\n\t\t}*/\n\n\t\tfor(const target of node.querySelectorAll?.('img.chat-line__message--emote')) {\n\t\t\tif ( target && (target.dataset.ffzId || target.src.startsWith('https://static-cdn.jtvnw.net/emoticons/v2/__FFZ__')) )\n\t\t\t\tthis.updatePreview(inst, target);\n\t\t}\n\t}\n\n\tupdatePreview(inst, target) {\n\t\tlet set_id = target.dataset.ffzSet,\n\t\t\temote_id = target.dataset.ffzId;\n\n\t\tif ( ! emote_id ) {\n\t\t\tconst idx = target.src.indexOf('__FFZ__', 49),\n\t\t\t\traw_id = target.src.slice(49, idx);\n\n\t\t\tconst raw_idx = raw_id.indexOf('::');\n\t\t\tif ( raw_idx === -1 )\n\t\t\t\treturn;\n\n\t\t\tset_id = raw_id.slice(0, raw_idx);\n\t\t\temote_id = raw_id.slice(raw_idx + 2);\n\n\t\t\ttarget.dataset.ffzSet = set_id;\n\t\t\ttarget.dataset.ffzId = emote_id;\n\t\t}\n\n\t\tconst emote_set = this.emotes.emote_sets[set_id],\n\t\t\temote = emote_set?.emotes?.[emote_id];\n\n\t\tif ( ! emote )\n\t\t\treturn;\n\n\t\tconst anim = this.chat.context.get('chat.emotes.animated') > 0;\n\n\t\ttarget.src = (anim ? emote.animSrc : null) ?? emote.src;\n\t\ttarget.srcset = (anim ? emote.animSrcSet : null) ?? emote.srcSet;\n\n\t\tconst w = `${emote.width}px`;\n\t\tconst h = `${emote.height}px`;\n\n\t\ttarget.style.width = w;\n\t\ttarget.style.height = h;\n\n\t\t// Find the parent.\n\t\tconst cont = target.closest('.chat-image__container');\n\t\tif ( cont ) {\n\t\t\tcont.style.width = w;\n\t\t\tcont.style.height = h;\n\n\t\t\tconst outer = cont.closest('.chat-line__message--emote-button');\n\t\t\tif ( outer ) {\n\t\t\t\touter.style.width = w;\n\t\t\t\touter.style.height = h;\n\n\t\t\t\tif ( ! outer._ffz_click_handler ) {\n\t\t\t\t\touter._ffz_click_handler = this.previewClick.bind(this, emote.id, emote_set.id, emote.name);\n\t\t\t\t\touter.addEventListener('click', outer._ffz_click_handler);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpreviewClick(id, set, name, evt) {\n\t\tconst fe = this.makeEvent({\n\t\t\tprovider: 'ffz',\n\t\t\tid,\n\t\t\tset,\n\t\t\tname,\n\t\t\tsource: evt\n\t\t});\n\n\t\tthis.emit('chat.emotes:click', fe);\n\t\tif ( ! fe.defaultPrevented )\n\t\t\treturn;\n\n\t\tevt.preventDefault();\n\t\tevt.stopImmediatePropagation();\n\t}\n\n\tremovePreviewObserver(inst) {\n\t\tif ( inst._ffz_preview_observer ) {\n\t\t\tinst._ffz_preview_observer.disconnect();\n\t\t\tinst._ffz_preview_observer = null;\n\t\t}\n\t}\n\n\n\tupdateEmoteCompletion(inst, child) {\n\t\tif ( ! child )\n\t\t\tchild = this.fine.searchTree(inst, 'tab-emote-suggestions', 50);\n\t\tif ( ! child )\n\t\t\treturn;\n\n\t\tchild._ffz_user = inst.props.sessionUser;\n\t\tchild._ffz_channel_id = inst.props.channelID;\n\t\tchild._ffz_channel_login = inst.props.channelLogin;\n\t}\n\n\toverrideChatInput(inst) {\n\t\tif ( inst._ffz_override )\n\t\t\treturn;\n\n\t\tconst t = this;\n\n\t\tconst originalOnKeyDown = inst.onKeyDown,\n\t\t\toriginalOnMessageSend = inst.onMessageSend,\n\t\t\told_resize = inst.resizeInput;\n\n\t\tconst old_componentDidUpdate = inst.componentDidUpdate;\n\n\t\tinst.ffzInjectEmotes = function() {\n\t\t\tconst idx = this.props.emotes.findIndex(item => item?.id === 'FrankerFaceZWasHere'),\n\t\t\t\tdata = t.createFakeEmoteSet(inst);\n\n\t\t\tif ( idx === -1 && data )\n\t\t\t\tthis.props.emotes.push(data);\n\t\t\telse if ( idx !== -1 && data )\n\t\t\t\tthis.props.emotes.splice(idx, 1, data);\n\t\t\telse if ( idx !== -1 && ! data )\n\t\t\t\tthis.props.emotes.splice(idx, 1);\n\t\t\telse\n\t\t\t\treturn;\n\n\t\t\t// TODO: Somehow update other React state to deal with our\n\t\t\t// injected changes. Making a shallow copy of the array\n\t\t\t// runs too frequently.\n\t\t}\n\n\t\tinst.componentDidUpdate = function(props, ...args) {\n\t\t\ttry {\n\t\t\t\tif ( props.emotes !== this.props.emotes && Array.isArray(this.props.emotes) )\n\t\t\t\t\tinst.ffzInjectEmotes();\n\n\t\t\t} catch(err) {\n\t\t\t\tt.log.error('Error updating emote autocompletion data.', err);\n\t\t\t}\n\n\t\t\tif ( old_componentDidUpdate )\n\t\t\t\told_componentDidUpdate.call(this, props, ...args);\n\t\t}\n\n\t\tinst.resizeInput = function(msg, ...args) {\n\t\t\ttry {\n\t\t\t\tif ( msg ) {\n\t\t\t\t\tif ( inst.chatInputRef instanceof Element ) {\n\t\t\t\t\t\tconst style = getComputedStyle(inst.chatInputRef),\n\t\t\t\t\t\t\theight = style && parseFloat(style.lineHeight || 18) || 18,\n\t\t\t\t\t\t\tt = height * 1 + 20.5,\n\t\t\t\t\t\t\ti = Math.ceil((inst.chatInputRef.scrollHeight - t) / height),\n\t\t\t\t\t\t\ta = Math.min(1 + i, 4);\n\n\t\t\t\t\t\tinst.setState({\n\t\t\t\t\t\t\tnumInputRows: a\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t\tinst.setState({\n\t\t\t\t\t\tnumInputRows: 1\n\t\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tt.log.error('Error in resizeInput', err);\n\t\t\t\treturn old_resize.call(this, msg, ...args);\n\t\t\t}\n\t\t}\n\n\t\tinst.messageHistory = [];\n\t\tinst.tempInput = '';\n\t\tinst.messageHistoryPos = -1;\n\n\t\tinst.ffzGetValue = function() {\n\t\t\tif ( inst.chatInputRef && typeof inst.chatInputRef.value === 'string' )\n\t\t\t\treturn inst.chatInputRef.value;\n\n\t\t\tif ( inst.state.value && typeof inst.state.value === 'string' )\n\t\t\t\treturn inst.state.value;\n\n\t\t\treturn '';\n\t\t}\n\n\t\tinst.ffzGetSelection = function() {\n\t\t\tif ( typeof inst.chatInputRef?.selectionEnd === 'number' ) {\n\t\t\t\treturn [inst.chatInputRef.selectionStart, inst.chatInputRef.selectionEnd]\n\t\t\t}\n\n\t\t\tif ( inst.chatInputRef?.state?.slateEditor ) {\n\t\t\t\tconst editor = inst.chatInputRef.state.slateEditor,\n\t\t\t\t\tsel = editor.selection,\n\t\t\t\t\tnodes = editor.children;\n\n\t\t\t\tif ( ! sel?.anchor?.path || ! sel?.focus?.path )\n\t\t\t\t\treturn [0,0];\n\n\t\t\t\tconst first = getNodeOffset(nodes, sel.anchor.path) + sel.anchor.offset,\n\t\t\t\t\tsecond = getNodeOffset(nodes, sel.focus.path) + sel.focus.offset;\n\n\t\t\t\tif ( first < second )\n\t\t\t\t\treturn [first, second];\n\t\t\t\telse\n\t\t\t\t\treturn [second, first];\n\t\t\t}\n\n\t\t\treturn [0,0];\n\t\t}\n\n\t\tinst.ffzSetSelection = function(start, end) {\n\t\t\tif ( inst.chatInputRef?.setSelectionRange )\n\t\t\t\tinst.chatInputRef.setSelectionRange(start, end);\n\t\t}\n\n\t\tinst.onKeyDown = function(event) {\n\t\t\ttry {\n\t\t\t\tconst code = event.charCode || event.keyCode;\n\n\t\t\t\tif ( inst.onEmotePickerToggle && t.chat.context.get('chat.emote-menu.shortcut') && event.key === 'e' && event.ctrlKey && ! event.altKey && ! event.shiftKey ) {\n\t\t\t\t\tinst.onEmotePickerToggle();\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst val = inst.ffzGetValue();\n\n\t\t\t\tif ( inst.autocompleteInputRef && inst.chatInputRef && t.chat.context.get('chat.mru.enabled') && ! event.shiftKey && ! event.ctrlKey && ! event.altKey ) {\n\t\t\t\t\tconst sel = inst.ffzGetSelection();\n\n\t\t\t\t\t// Arrow Up\n\t\t\t\t\tif ( code === 38 && sel[0] === 0 && sel[1] === 0 ) {\n\t\t\t\t\t\tif ( ! inst.messageHistory.length )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( val && inst.messageHistoryPos === -1 )\n\t\t\t\t\t\t\tinst.tempInput = val;\n\n\t\t\t\t\t\tif ( inst.messageHistoryPos < inst.messageHistory.length - 1 ) {\n\t\t\t\t\t\t\tinst.messageHistoryPos++;\n\t\t\t\t\t\t\tinst.autocompleteInputRef.setValue(inst.messageHistory[inst.messageHistoryPos]);\n\t\t\t\t\t\t\tinst.ffzSetSelection(0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// Arrow Down\n\t\t\t\t\t} else if ( code === 40 && sel[0] >= val.length && sel[1] === sel[0] ) {\n\t\t\t\t\t\tif ( ! inst.messageHistory.length )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( inst.messageHistoryPos > 0 ) {\n\t\t\t\t\t\t\tinst.messageHistoryPos--;\n\t\t\t\t\t\t\tinst.autocompleteInputRef.setValue(inst.messageHistory[inst.messageHistoryPos]);\n\t\t\t\t\t\t\tinst.ffzSetSelection(inst.messageHistory[inst.messageHistoryPos].length);\n\n\t\t\t\t\t\t} else if ( inst.messageHistoryPos === 0 ) {\n\t\t\t\t\t\t\tinst.autocompleteInputRef.setValue(inst.tempInput);\n\t\t\t\t\t\t\tinst.ffzSetSelection(inst.tempInput.length);\n\t\t\t\t\t\t\tinst.messageHistoryPos = -1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Let users close stuff with Escape.\n\t\t\t\tif ( code === KEYS.Escape && ! event.shiftKey && ! event.ctrlKey && ! event.altKey ) {\n\t\t\t\t\tif ( inst.props.isShowingEmotePicker )\n\t\t\t\t\t\tinst.props.closeEmotePicker();\n\t\t\t\t\telse if ( inst.props.tray && (! inst.state.value || ! inst.state.value.length) )\n\t\t\t\t\t\tinst.props.clearTray();\n\t\t\t\t}\n\n\t\t\t} catch(err) {\n\t\t\t\tt.log.capture(err);\n\t\t\t\tt.log.error(err);\n\t\t\t}\n\n\t\t\toriginalOnKeyDown.call(this, event);\n\t\t}\n\n\t\tinst.onMessageSend = function(event) {\n\t\t\ttry {\n\t\t\t\tif ( t.chat.context.get('chat.mru.enabled') ) {\n\t\t\t\t\tconst val = inst.ffzGetValue();\n\t\t\t\t\tif (val && val.length) {\n\t\t\t\t\t\tif (! inst.messageHistory.length || inst.messageHistory[0] !== val) {\n\t\t\t\t\t\t\tinst.messageHistory.unshift(val);\n\t\t\t\t\t\t\tinst.messageHistory = inst.messageHistory.slice(0, 20);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tinst.messageHistoryPos = -1;\n\t\t\t\t\tinst.tempInput = '';\n\t\t\t\t}\n\n\t\t\t} catch(err) {\n\t\t\t\tt.log.capture(err);\n\t\t\t\tt.log.error(err);\n\t\t\t}\n\n\t\t\toriginalOnMessageSend.call(this, event);\n\t\t}\n\t}\n\n\n\toverrideMentionMatcher(inst) {\n\t\tinst.canBeTriggeredByTab = !this.chat.context.get('chat.tab-complete.emotes-without-colon');\n\t}\n\n\n\toverrideCommandMatcher(inst) {\n\t\tif ( inst._ffz_override )\n\t\t\treturn;\n\n\t\tinst._ffz_override = true;\n\t\tinst.oldCommands = inst.getCommands;\n\t\tinst.oldMatches = inst.getMatches;\n\t\tinst.oldReplacement = inst.determineReplacement;\n\n\t\tconst t = this;\n\n\t\tinst.getMatches = function(input, unknown, index) {\n\t\t\ttry {\n\t\t\t\treturn index === 0 && t.chat.CommandPrefixes.includes(input[0])\n\t\t\t\t\t? inst.getCommands(input) : null;\n\n\t\t\t} catch(err) {\n\t\t\t\tt.log.error('Error getting matches from command handler.', err);\n\t\t\t\treturn inst.oldCommands(input, unknown, index);\n\t\t\t}\n\t\t}\n\n\t\tinst.getCommands = function(input) { try {\n\t\t\tconst commands = inst.props.getCommands(inst.props.permissionLevel, {\n\t\t\t\tisEditor: inst.props.isCurrentUserEditor\n\t\t\t});\n\n\t\t\t// Get the parent-input so we can do stuff.\n\t\t\tconst parent = t.fine.searchParent(inst,\n\t\t\t\tn => n?.props?.channelID && n?.props?.setTray, 50);\n\n\t\t\tconst event = t.makeEvent({\n\t\t\t\tinput,\n\t\t\t\tpermissionLevel: inst.props.permissionLevel,\n\t\t\t\tisEditor: inst.props.isCurrentUserEditor,\n\t\t\t\tcommands,\n\n\t\t\t\t// Extra details, if we managed to find our parent.\n\t\t\t\t__input: parent,\n\t\t\t\tchannel: parent ? {\n\t\t\t\t\tid: parent.props.channelID,\n\t\t\t\t\tlogin: parent.props.channelLogin\n\t\t\t\t} : null\n\t\t\t});\n\n\t\t\tt.emit('chat:get-tab-commands', event);\n\n\t\t\tif ( ! commands || ! commands.length )\n\t\t\t\treturn null;\n\n\t\t\t// Trim off the starting /\n\t\t\tconst prefix = input[0],\n\t\t\t\ti = input.slice(1);\n\n\t\t\tconst sorted = commands\n\t\t\t\t.filter(cmd => prefix === (cmd.prefix ?? '/') && inst.doesCommandMatchTerm(cmd, i))\n\t\t\t\t.sort(inst.sortCommands);\n\n\t\t\tconst out = [];\n\t\t\tfor(const cmd of sorted) {\n\t\t\t\tconst arg = cmd.commandArgs?.[0];\n\t\t\t\tlet selection;\n\t\t\t\tif ( arg?.isRequired )\n\t\t\t\t\tselection = `[${arg.name}]`;\n\n\t\t\t\tout.push({\n\t\t\t\t\tcurrent: input,\n\t\t\t\t\treplacement: inst.determineReplacement(cmd),\n\t\t\t\t\tdescription: cmd.description,\n\t\t\t\t\telement: inst.renderCommandSuggestion(cmd, i),\n\t\t\t\t\tgroup: cmd.ffz_group ?\n\t\t\t\t\t\t(Array.isArray(cmd.ffz_group) ? t.i18n.t(...cmd.ffz_group) : cmd.ffz_group)\n\t\t\t\t\t\t: inst.determineGroup(cmd),\n\t\t\t\t\tselection\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// If we're working with a non-/ prefix, and have no items,\n\t\t\t// return null so we don't display ANY UI.\n\t\t\tif ( prefix !== '/' && ! out.length )\n\t\t\t\treturn null;\n\t\t\treturn out;\n\n\t\t} catch(err) {\n\t\t\tconsole.error(err);\n\t\t\treturn inst.oldCommands(input);\n\t\t} }\n\n\t\tinst.determineReplacement = function(cmd) {\n\t\t\tconst out = inst.oldReplacement(cmd);\n\t\t\tif ( (cmd.prefix ?? '/') !== '/' && out.startsWith('/') )\n\t\t\t\treturn cmd.prefix + out.slice(1);\n\t\t\treturn out;\n\t\t}\n\n\t\tconst React = this.site.getReact(),\n\t\t\tcreateElement = React?.createElement;\n\n\t\tif ( createElement )\n\t\t\tinst.renderCommandSuggestion = function(cmd, input) {\n\t\t\t\tconst args = Array.isArray(cmd?.commandArgs)\n\t\t\t\t\t? cmd.commandArgs.map(arg => (<div class={`tw-mg-r-05${arg.isRequired ? '' : ' tw-c-text-alt'}`}>[{arg.name}]</div>))\n\t\t\t\t\t: null;\n\n\t\t\t\treturn (<div class=\"tw-pd-05\">\n\t\t\t\t\t<div class=\"tw-flex\">\n\t\t\t\t\t\t<div class=\"tw-mg-r-05\">\n\t\t\t\t\t\t\t<span>{ cmd.prefix ?? '/' }</span>\n\t\t\t\t\t\t\t<span class=\"tw-semibold\">{ cmd.name }</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{args}\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class=\"tw-c-text-alt-2 tw-font-size-7\">{ cmd.description }</p>\n\t\t\t\t</div>);\n\t\t\t}\n\t}\n\n\n\tcreateFakeEmoteSet(inst) {\n\t\tif ( ! this.use_previews )\n\t\t\treturn null;\n\n\t\tif ( ! inst._ffz_channel_login ) {\n\t\t\tconst parent = this.fine.searchParent(inst, 'chat-input', 50);\n\t\t\tif ( parent )\n\t\t\t\tthis.updateEmoteCompletion(parent, inst);\n\t\t}\n\n\t\tconst user = inst._ffz_user,\n\t\t\tchannel_id = inst._ffz_channel_id,\n\t\t\tchannel_login = inst._ffz_channel_login;\n\n\t\tif ( ! channel_login )\n\t\t\treturn null;\n\n\t\tconst sets = this.emotes.getSets(user?.id, user?.login, channel_id, channel_login);\n\t\tif ( ! sets || ! sets.length )\n\t\t\treturn null;\n\n\t\tconst out = [],\n\t\t\tadded_emotes = new Set;\n\n\t\tfor(const set of sets) {\n\t\t\tif ( ! set || ! set.emotes )\n\t\t\t\tcontinue;\n\n\t\t\tconst source = set.source || 'ffz';\n\n\t\t\tfor(const emote of Object.values(set.emotes)) {\n\t\t\t\tif ( ! emote || ! emote.id || ! emote.name || added_emotes.has(emote.name) )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tadded_emotes.add(emote.name);\n\n\t\t\t\tout.push({\n\t\t\t\t\tid: `__FFZ__${set.id}::${emote.id}__FFZ__`,\n\t\t\t\t\tmodifiers: null,\n\t\t\t\t\tsetID: 'FrankerFaceZWasHere',\n\t\t\t\t\ttoken: emote.name\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\t__typename: 'EmoteSet',\n\t\t\temotes: out,\n\t\t\tid: 'FrankerFaceZWasHere',\n\t\t\towner: null\n\t\t}\n\t}\n\n\n\toverrideEmoteMatcher(inst) {\n\t\tif ( inst._ffz_override )\n\t\t\treturn;\n\n\t\tconst t = this;\n\n\t\tinst.canBeTriggeredByTab = this.chat.context.get('chat.tab-complete.emotes-without-colon');\n\n\t\tinst.getMatches = function(input, pressedTab) {\n\t\t\treturn pressedTab\n\t\t\t\t? input.length < 2 ? null : inst.getMatchedEmotes(input)\n\t\t\t\t: input.startsWith(':') ? input.length < 3 ? null : inst.getMatchedEmotes(input) : null;\n\t\t}\n\n\t\tinst.doesEmoteMatchTerm = function(emote, term) {\n\t\t\tconst emote_name = emote.name || emote.token;\n\t\t\tif ( ! emote_name )\n\t\t\t\treturn NO_MATCH;\n\n\t\t\tif (emote_name.startsWith(term))\n\t\t\t\treturn EXACT_PREFIX_MATCH;\n\n\t\t\tlet emote_lower = emote.tokenLower;\n\t\t\tif ( ! emote_lower )\n\t\t\t\temote_lower = emote_name.toLowerCase();\n\n\t\t\tconst term_lower = term.toLowerCase();\n\t\t\tif (emote_lower.startsWith(term_lower))\n\t\t\t\treturn CASE_INSENSITIVE_PREFIX_MATCH;\n\n\t\t\tconst idx = emote_name.indexOf(term.charAt(0).toUpperCase());\n\t\t\tif (idx !== -1 && emote_lower.slice(idx + 1).startsWith(term_lower.slice(1)))\n\t\t\t\treturn NON_PREFIX_MATCH;\n\n\t\t\tif (emote_lower.includes(term_lower))\n\t\t\t\treturn MATCH_ANY;\n\n\t\t\treturn NO_MATCH;\n\t\t}\n\n\t\tinst.getMatchedEmotes = function(input) {\n\t\t\tconst setting = t.chat.context.get('chat.emotes.enabled');\n\t\t\tconst limitResults = t.chat.context.get('chat.tab-complete.limit-results');\n\t\t\tlet results = setting ? t.getTwitchEmoteSuggestions(input, this) : [];\n\n\t\t\tif ( setting > 1 && t.chat.context.get('chat.tab-complete.ffz-emotes') ) {\n\t\t\t\tconst ffz_emotes = t.getEmoteSuggestions(input, this);\n\t\t\t\tif ( Array.isArray(ffz_emotes) && ffz_emotes.length )\n\t\t\t\t\tresults = results.concat(ffz_emotes);\n\t\t\t}\n\n\t\t\tif ( t.chat.context.get('chat.tab-complete.emoji') ) {\n\t\t\t\tconst emoji = t.getEmojiSuggestions(input, this);\n\t\t\t\tif ( Array.isArray(emoji) && emoji.length )\n\t\t\t\t\tresults = Array.isArray(results) ? results.concat(emoji) : emoji;\n\t\t\t}\n\n\t\t\tresults = t.sortEmotes(results);\n\t\t\treturn limitResults && results.length > 25 ? results.slice(0, 25) : results;\n\t\t}\n\n\t\tconst React = this.site.getReact(),\n\t\t\tcreateElement = React?.createElement;\n\n\t\tinst.renderFFZEmojiSuggestion = function(data) {\n\t\t\treturn (<React.Fragment>\n\t\t\t\t<div class=\"tw-relative tw-flex-shrink-0 tw-pd-05\" title={data.token} favorite={data.favorite}>\n\t\t\t\t\t<img\n\t\t\t\t\t\tclass=\"emote-autocomplete-provider__image ffz-emoji\"\n\t\t\t\t\t\tsrc={data.src}\n\t\t\t\t\t\tsrcSet={data.srcset}\n\t\t\t\t\t/>\n\t\t\t\t\t{data.favorite && <figure class=\"ffz--favorite ffz-i-star\" />}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tw-ellipsis\" title={data.token}>\n\t\t\t\t\t{data.token}\n\t\t\t\t</div>\n\t\t\t</React.Fragment>);\n\t\t}\n\n\t\tinst.renderEmoteSuggestion = function(emote) {\n\t\t\treturn (<React.Fragment>\n\t\t\t\t<div class=\"tw-relative tw-flex-shrink-0 tw-pd-05\" title={emote.token} favorite={emote.favorite}>\n\t\t\t\t\t<img\n\t\t\t\t\t\tclass=\"emote-autocomplete-provider__image\"\n\t\t\t\t\t\tsrcSet={emote.srcSet}\n\t\t\t\t\t/>\n\t\t\t\t\t{emote.favorite && <figure class=\"ffz--favorite ffz-i-star\" />}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tw-ellipsis\" title={emote.token}>\n\t\t\t\t\t{emote.token}\n\t\t\t\t</div>\n\t\t\t</React.Fragment>);\n\t\t}\n\t}\n\n\n\t// eslint-disable-next-line class-methods-use-this\n\tsortEmotes(emotes) {\n\t\tconst preferFavorites = this.chat.context.get('chat.tab-complete.prioritize-favorites');\n\t\tconst canBeTriggeredByTab = this.chat.context.get('chat.tab-complete.emotes-without-colon');\n\t\tconst prioritizePrefixMatches = this.chat.context.get('chat.tab-complete.prioritize-prefix-matches');\n\n\t\treturn emotes.sort((a, b) => {\n\t\t\tconst aStr = a.matched || a.replacement;\n\t\t\tconst bStr = b.matched || b.replacement;\n\n\t\t\t// Prefer favorites over non-favorites, if enabled\n\t\t\tif (preferFavorites && (a.favorite ^ b.favorite))\n\t\t\t\treturn 0 - a.favorite + b.favorite;\n\n\t\t\tif (prioritizePrefixMatches) {\n\t\t\t\t// Prefer emoji over emotes if tab-complete is enabled, disprefer them otherwise\n\t\t\t\tconst aIsEmoji = !!a.matched;\n\t\t\t\tconst bIsEmoji = !!b.matched;\n\t\t\t\tif (aIsEmoji ^ bIsEmoji) {\n\t\t\t\t\tif (canBeTriggeredByTab) return 0 - aIsEmoji + bIsEmoji;\n\t\t\t\t\telse return 0 - bIsEmoji + aIsEmoji;\n\t\t\t\t}\n\n\t\t\t\t// Prefer case-sensitive prefix matches\n\t\t\t\tconst aStartsWithInput = (a.match_type === EXACT_PREFIX_MATCH);\n\t\t\t\tconst bStartsWithInput = (b.match_type === EXACT_PREFIX_MATCH);\n\t\t\t\tif (aStartsWithInput && bStartsWithInput)\n\t\t\t\t\treturn locale.compare(aStr, bStr);\n\t\t\t\telse if (aStartsWithInput) return -1;\n\t\t\t\telse if (bStartsWithInput) return 1;\n\n\t\t\t\t// Else prefer case-insensitive prefix matches\n\t\t\t\tconst aStartsWithInputCI = (a.match_type === CASE_INSENSITIVE_PREFIX_MATCH);\n\t\t\t\tconst bStartsWithInputCI = (b.match_type === CASE_INSENSITIVE_PREFIX_MATCH);\n\t\t\t\tif (aStartsWithInputCI && bStartsWithInputCI)\n\t\t\t\t\treturn localeCaseInsensitive.compare(aStr, bStr);\n\t\t\t\telse if (aStartsWithInputCI) return -1;\n\t\t\t\telse if (bStartsWithInputCI) return 1;\n\n\t\t\t\t// Else alphabetize\n\t\t\t\treturn locale.compare(aStr, bStr);\n\t\t\t}\n\n\t\t\t// Keep unsorted order for non-favorite items if prefix matching is not enabled.\n\t\t\treturn 0;\n\t\t});\n\t}\n\n\n\tbuildTwitchCache(emotes) {\n\t\tif ( ! Array.isArray(emotes) )\n\t\t\treturn {emotes: [], length: 0};\n\n\t\tconst out = [],\n\t\t\tseen = new Set,\n\t\t\tanim = this.chat.context.get('chat.emotes.animated') > 0,\n\t\t\thidden_sets = this.settings.provider.get('emote-menu.hidden-sets'),\n\t\t\thas_hidden = Array.isArray(hidden_sets) && hidden_sets.length > 0,\n\t\t\thidden_emotes = this.emotes.getHidden('twitch'),\n\t\t\tfavorites = this.emotes.getFavorites('twitch');\n\n\t\tfor(const set of emotes) {\n\t\t\tconst int_id = parseInt(set.id, 10),\n\t\t\t\towner = set.owner,\n\t\t\t\tis_points = TWITCH_POINTS_SETS.includes(int_id) || owner?.login === 'channel_points',\n\t\t\t\tchannel = is_points ? null : owner;\n\n\t\t\t// Skip this set.\n\t\t\tif ( set.id === 'FrankerFaceZWasHere' )\n\t\t\t\tcontinue;\n\n\t\t\tlet key = `twitch-set-${set.id}`;\n\t\t\tlet extra = null;\n\n\t\t\tif ( channel?.login ) {\n\t\t\t\tkey = `twitch-${channel.id}`;\n\t\t\t\textra = channel.displayName || channel.login;\n\n\t\t\t} else if ( is_points )\n\t\t\t\tkey = 'twitch-points';\n\t\t\telse if ( TWITCH_GLOBAL_SETS.includes(int_id) )\n\t\t\t\tkey = 'twitch-global';\n\t\t\telse if ( TWITCH_PRIME_SETS.includes(int_id) )\n\t\t\t\tkey = 'twitch-prime';\n\t\t\telse\n\t\t\t\tkey = 'twitch-misc';\n\n\t\t\tif ( has_hidden && hidden_sets.includes(key) )\n\t\t\t\tcontinue;\n\n\t\t\tfor(const emote of set.emotes) {\n\t\t\t\tif ( ! emote || ! emote.id || hidden_emotes.includes(emote.id) )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tconst id = emote.id,\n\t\t\t\t\ttoken = KNOWN_CODES[emote.token] || emote.token;\n\n\t\t\t\tif ( ! token || seen.has(token) )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tseen.add(token);\n\n\t\t\t\tconst replacement = REPLACEMENTS[id];\n\t\t\t\tlet srcSet;\n\n\t\t\t\tif ( replacement && this.chat.context.get('chat.fix-bad-emotes') ) {\n\t\t\t\t\tsrcSet = `${REPLACEMENT_BASE}${replacement} 1x`;\n\t\t\t\t} else\n\t\t\t\t\tsrcSet = getTwitchEmoteSrcSet(id, anim);\n\n\t\t\t\tout.push({\n\t\t\t\t\tid,\n\t\t\t\t\tsource: key,\n\t\t\t\t\textra,\n\t\t\t\t\tsetID: set.id,\n\t\t\t\t\ttoken,\n\t\t\t\t\ttokenLower: token.toLowerCase(),\n\t\t\t\t\tsrcSet,\n\t\t\t\t\tfavorite: favorites.includes(id)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\temotes: out,\n\t\t\tlength: emotes.length\n\t\t}\n\t}\n\n\n\tgetTwitchEmoteSuggestions(input, inst) {\n\t\tif ( inst.ffz_twitch_cache?.length !== inst.props.emotes?.length )\n\t\t\tinst.ffz_twitch_cache = this.buildTwitchCache(inst.props.emotes);\n\n\t\tconst emoteMatchingType = this.chat.context.get('chat.tab-complete.matching');\n\n\t\tconst emotes = inst.ffz_twitch_cache.emotes;\n\n\t\tif ( ! emotes.length )\n\t\t\treturn [];\n\n\t\tconst results_usage = [],\n\t\t\tresults_starting = [],\n\t\t\tresults_other = [],\n\n\t\t\tsearch = input.startsWith(':') ? input.slice(1) : input;\n\n\t\tfor(const emote of emotes) {\n\t\t\tconst match_type = inst.doesEmoteMatchTerm(emote, search);\n\t\t\tif (match_type < emoteMatchingType)\n\t\t\t\t\tcontinue;\n\n\t\t\tconst element = {\n\t\t\t\tcurrent: input,\n\t\t\t\temote,\n\t\t\t\treplacement: emote.token,\n\t\t\t\telement: inst.renderEmoteSuggestion(emote),\n\t\t\t\tfavorite: emote.favorite,\n\t\t\t\tcount: this.EmoteUsageCount[emote.token] || 0,\n\t\t\t\tmatch_type\n\t\t\t};\n\n\t\t\tif (match_type < emoteMatchingType)\n\t\t\t\tcontinue;\n\n\t\t\tif ( element.count > 0 )\n\t\t\t\tresults_usage.push(element);\n\t\t\telse if ( match_type > NON_PREFIX_MATCH )\n\t\t\t\tresults_starting.push(element);\n\t\t\telse\n\t\t\t\tresults_other.push(element);\n\t\t}\n\n\t\tresults_usage.sort((a,b) => b.count - a.count);\n\t\tresults_starting.sort((a,b) => locale.compare(a.replacement, b.replacement));\n\t\tresults_other.sort((a,b) => locale.compare(a.replacement, b.replacement));\n\n\t\treturn results_usage.concat(results_starting).concat(results_other);\n\t}\n\n\n\tgetEmojiSuggestions(input, inst) {\n\t\tif (!input.startsWith(':')) {\n\t\t\treturn [];\n\t\t}\n\n\t\tlet search = input.slice(1).toLowerCase();\n\t\tconst style = this.chat.context.get('chat.emoji.style'),\n\t\t\ttone = this.settings.provider.get('emoji-tone', null),\n\t\t\tfavorites = this.emotes.getFavorites('emoji'),\n\t\t\tresults = [],\n\t\t\thas_colon = search.endsWith(':');\n\n\t\tif ( has_colon )\n\t\t\tsearch = search.slice(0,-1);\n\n\t\tconst included = new Set;\n\n\t\tfor(const name in this.emoji.names)\n\t\t\tif ( has_colon ? name === search : name.startsWith(search) ) {\n\t\t\t\tconst emoji = this.emoji.emoji[this.emoji.names[name]],\n\t\t\t\t\ttoned = emoji.variants && emoji.variants[tone],\n\t\t\t\t\tsource = toned || emoji;\n\n\t\t\t\tif ( emoji && (style === 0 || source.has[style]) && ! included.has(source.raw) ) {\n\t\t\t\t\tincluded.add(source.raw);\n\n\t\t\t\t\tconst srcSet = this.emoji.getFullImageSet(source.image, style);\n\t\t\t\t\tconst matched = `:${name}:`;\n\n\t\t\t\t\tconst favorite = favorites.includes(emoji.code);\n\t\t\t\t\tresults.push({\n\t\t\t\t\t\tcurrent: input,\n\t\t\t\t\t\temoji: source,\n\t\t\t\t\t\tmatched,\n\t\t\t\t\t\tsrcSet,\n\t\t\t\t\t\treplacement: source.raw,\n\t\t\t\t\t\telement: inst.renderFFZEmojiSuggestion({\n\t\t\t\t\t\t\ttoken: matched,\n\t\t\t\t\t\t\tid: `emoji-${emoji.code}`,\n\t\t\t\t\t\t\tsrc: this.emoji.getFullImage(source.image, style),\n\t\t\t\t\t\t\tsrcSet,\n\t\t\t\t\t\t\tfavorite\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tfavorite\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\treturn results;\n\t}\n\n\n\tbuildFFZCache(user_id, user_login, channel_id, channel_login) {\n\t\tconst sets = this.emotes.getSets(user_id, user_login, channel_id, channel_login);\n\t\tif ( ! sets || ! sets.length )\n\t\t\treturn {emotes: [], length: 0, user_id, user_login, channel_id, channel_login};\n\n\t\tconst out = [],\n\t\t\tanim = this.chat.context.get('chat.emotes.animated') > 0,\n\t\t\thidden_sets = this.settings.provider.get('emote-menu.hidden-sets'),\n\t\t\thas_hidden = Array.isArray(hidden_sets) && hidden_sets.length > 0,\n\t\t\tadded_emotes = new Set;\n\n\t\tfor(const set of sets) {\n\t\t\tif ( ! set || ! set.emotes )\n\t\t\t\tcontinue;\n\n\t\t\tconst source = set.source || 'ffz',\n\t\t\t\tsource_line = set.source_line || (`${set.source || 'FFZ'} ${set.title || 'Global'}`),\n\t\t\t\tkey = `${set.merge_source || source}-${set.merge_id || set.id}`;\n\n\t\t\tif ( has_hidden && hidden_sets.includes(key) )\n\t\t\t\tcontinue;\n\n\t\t\tconst hidden_emotes = this.emotes.getHidden(source),\n\t\t\t\tfavorites = this.emotes.getFavorites(source);\n\n\t\t\tfor(const emote of Object.values(set.emotes)) {\n\t\t\t\tif ( ! emote || ! emote.id || emote.hidden || hidden_emotes.includes(emote.id) || added_emotes.has(emote.name) )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tif ( ! emote.name )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tadded_emotes.add(emote.name);\n\n\t\t\t\tout.push({\n\t\t\t\t\tid: `${source}-${emote.id}`,\n\t\t\t\t\tsource,\n\t\t\t\t\textra: source_line,\n\t\t\t\t\ttoken: emote.name,\n\t\t\t\t\ttokenLower: emote.name.toLowerCase(),\n\t\t\t\t\tsrcSet: anim && emote.animSrcSet || emote.srcSet,\n\t\t\t\t\tfavorite: favorites.includes(emote.id)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\temotes: out,\n\t\t\tlength: sets.length\n\t\t}\n\t}\n\n\n\tgetEmoteSuggestions(input, inst) {\n\t\tif ( ! inst._ffz_channel_login ) {\n\t\t\tconst parent = this.fine.searchParent(inst, 'chat-input', 50);\n\t\t\tif ( parent )\n\t\t\t\tthis.updateEmoteCompletion(parent, inst);\n\t\t}\n\n\t\tconst emoteMatchingType = this.chat.context.get('chat.tab-complete.matching');\n\n\t\tconst user = inst._ffz_user,\n\t\t\tchannel_id = inst._ffz_channel_id,\n\t\t\tchannel_login = inst._ffz_channel_login;\n\n\t\tif ( ! channel_login )\n\t\t\treturn [];\n\n\t\tlet cache = inst.ffz_ffz_cache;\n\t\tif ( ! cache || cache.user_id !== user?.id || cache.user_login !== user?.login || cache.channel_id !== channel_id || cache.channel_login !== channel_login )\n\t\t\tcache = inst.ffz_ffz_cache = this.buildFFZCache(user?.id, user?.login, channel_id, channel_login);\n\n\t\tconst emotes = cache.emotes;\n\t\tif ( ! emotes.length )\n\t\t\treturn [];\n\n\t\tconst search = input.startsWith(':') ? input.slice(1) : input,\n\t\t\tresults = [];\n\n\t\tfor(const emote of emotes) {\n\t\t\tconst match_type = inst.doesEmoteMatchTerm(emote, search)\n\t\t\tif (match_type < emoteMatchingType)\n\t\t\t\tcontinue;\n\n\t\t\tresults.push({\n\t\t\t\tcurrent: input,\n\t\t\t\temote,\n\t\t\t\treplacement: emote.token,\n\t\t\t\telement: inst.renderEmoteSuggestion(emote),\n\t\t\t\tfavorite: emote.favorite,\n\t\t\t\tcount: 0, // TODO: Count stuff?\n\t\t\t\tmatch_type\n\t\t\t});\n\t\t}\n\n\t\treturn results;\n\n\t\t/*for(const set of sets) {\n\t\t\tif ( ! set || ! set.emotes )\n\t\t\t\tcontinue;\n\n\t\t\tconst\n\n\t\t\tif ( set && set.emotes )\n\t\t\t\tfor(const emote of Object.values(set.emotes))\n\t\t\t\t\tif ( inst.doesEmoteMatchTerm(emote, search) && !added_emotes.has(emote.name) && ! this.emotes.isHidden(set.source || 'ffz', emote.id) ) {\n\t\t\t\t\t\tconst favorite = this.emotes.isFavorite(set.source || 'ffz', emote.id);\n\t\t\t\t\t\tresults.push({\n\t\t\t\t\t\t\tcurrent: input,\n\t\t\t\t\t\t\treplacement: emote.name,\n\t\t\t\t\t\t\telement: inst.renderEmoteSuggestion({\n\t\t\t\t\t\t\t\ttoken: emote.name,\n\t\t\t\t\t\t\t\tid: `${set.source}-${emote.id}`,\n\t\t\t\t\t\t\t\tsrcSet: emote.srcSet,\n\t\t\t\t\t\t\t\tfavorite\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tfavorite\n\t\t\t\t\t\t});\n\t\t\t\t\t\tadded_emotes.add(emote.name);\n\t\t\t\t\t}\n\t\t}\n\n\t\treturn results;*/\n\t}\n\n\tgetInput() {\n\t\tfor(const inst of this.ChatInput.instances) {\n\t\t\tif ( ! inst.autocompleteInputRef || ! inst.state )\n\t\t\t\tcontinue;\n\n\t\t\tif ( inst.state.value )\n\t\t\t\treturn inst.state.value;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpasteMessage(room, message) {\n\t\tfor(const inst of this.ChatInput.instances) {\n\t\t\tif ( inst?.props?.channelLogin !== room )\n\t\t\t\tcontinue;\n\n\t\t\tif ( ! inst.autocompleteInputRef || ! inst.state )\n\t\t\t\treturn;\n\n\t\t\tif ( inst.state.value )\n\t\t\t\tmessage = `${inst.state.value} ${message}`;\n\n\t\t\tinst.autocompleteInputRef.setValue(message);\n\t\t\tinst.autocompleteInputRef.componentRef?.focus?.();\n\t\t}\n\t}\n}\n","'use strict';\n\nimport Module from 'utilities/module';\n\n// ============================================================================\n// Vanilla Viewer Cards\n// ============================================================================\n\nexport default class ViewerCards extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('chat');\n\t\tthis.inject('settings');\n\t\tthis.inject('site.css_tweaks');\n\t\tthis.inject('site.fine');\n\n\t\tthis.last_login = null;\n\n\t\tthis.settings.add('chat.viewer-cards.highlight-chat', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Viewer Cards >> Appearance',\n\t\t\t\ttitle: 'Highlight messages from users with open viewer cards.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.viewer-cards.color', {\n\t\t\tdefault: '',\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Viewer Cards >> Appearance',\n\t\t\t\ttitle: 'Highlight Color',\n\t\t\t\tcomponent: 'setting-color-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.viewer-cards.use-color', {\n\t\t\trequires: ['chat.viewer-cards.highlight-chat', 'chat.viewer-cards.color'],\n\t\t\tprocess(ctx) {\n\t\t\t\tif ( ctx.get('chat.viewer-cards.highlight-chat') )\n\t\t\t\t\treturn ctx.get('chat.viewer-cards.color');\n\t\t\t}\n\t\t})\n\n\t\tthis.ViewerCard = this.fine.define(\n\t\t\t'chat-viewer-card',\n\t\t\tn => n.props?.targetLogin && n.props?.hideViewerCard\n\t\t);\n\t}\n\n\tonEnable() {\n\t\tthis.chat.context.on('changed:chat.viewer-cards.highlight-chat', this.refreshStyle, this);\n\t\tthis.chat.context.on('changed:chat.viewer-cards.color', this.refreshStyle, this);\n\t\tthis.on('..:update-colors', this.refreshStyle, this);\n\n\t\tthis.ViewerCard.on('mount', this.updateCard, this);\n\t\tthis.ViewerCard.on('update', this.updateCard, this);\n\t\tthis.ViewerCard.on('unmount', this.unmountCard, this);\n\t}\n\n\trefreshStyle() {\n\t\tthis.updateStyle(this.last_login);\n\t}\n\n\tupdateStyle(login) {\n\t\t// Make sure we're dealing with lower-case logins.\n\t\tif ( typeof login === 'string' )\n\t\t\tlogin = login.toLowerCase();\n\n\t\tthis.last_login = login;\n\t\tif ( login && this.chat.context.get('chat.viewer-cards.highlight-chat') ) {\n\t\t\tlet color = this.chat.context.get('chat.viewer-cards.color');\n\t\t\tif ( color && color.length )\n\t\t\t\tcolor = this.parent.inverse_colors.process(color);\n\t\t\telse if ( this.chat.context.get('theme.is-dark') )\n\t\t\t\tcolor = 'rgba(0,80,255,0.2)';\n\t\t\telse\n\t\t\t\tcolor = 'rgba(128,170,255,0.2)';\n\n\t\t\tthis.css_tweaks.set('viewer-card-highlight', `\nbody .chat-room .chat-scrollable-area__message-container > div:nth-child(1n+0) > .chat-line__message:not(.chat-line--inline):not(.something-nonexistent)[data-user=\"${login}\"],\nbody .chat-room .chat-line__message:not(.chat-line--inline):nth-child(1n+0)[data-user=\"${login}\"] {\n\tbackground-color: ${color} !important;\n}`);\n\t\t} else\n\t\t\tthis.css_tweaks.delete('viewer-card-highlight');\n\t}\n\n\tupdateCard(inst) {\n\t\tthis.updateStyle(inst.props && inst.props.targetLogin);\n\t}\n\n\tunmountCard() {\n\t\tthis.updateStyle();\n\t}\n}\n","'use strict';\n\n// ============================================================================\n// Chat Hooks\n// ============================================================================\n\nimport {Color, ColorAdjuster} from 'utilities/color';\nimport {get, has, make_enum, shallow_object_equals, set_equals, deep_equals, glob_to_regex, escape_regex, generateUUID} from 'utilities/object';\nimport {WEBKIT_CSS as WEBKIT} from 'utilities/constants';\n\nimport {useFont} from 'utilities/fonts';\nimport awaitMD, { getMD } from 'utilities/markdown';\nimport Module from 'utilities/module';\n\nimport Twilight from 'site';\n\nimport Scroller from './scroller';\nimport ChatLine from './line';\nimport SettingsMenu from './settings_menu';\nimport EmoteMenu from './emote_menu';\nimport Input from './input';\nimport ViewerCards from './viewer_card';\nimport { isHighlightedReward, isMessageEffect } from './points';\n\n\n/*const REGEX_EMOTES = {\n\t'B-?\\\\)': ['B)', 'B-)'],\n\t'R-?\\\\)': ['R)', 'R-)'],\n\t'[oO](_|\\\\.)[oO]': ['o_o', 'O_o', 'o_O', 'O_O', 'o.o', 'O.o', 'o.O', 'O.O'],\n\t'\\\\&gt\\\\;\\\\(': ['>('],\n\t'\\\\&lt\\\\;3': ['<3'],\n\t'\\\\:-?(o|O)': [':o', ':O', ':-o', ':-O'],\n\t'\\\\:-?(p|P)': [':p', ':P', ':-p', ':-P'],\n\t'\\\\:-?D': [':D', ':-D'],\n\t'\\\\:-?[\\\\\\\\/]': [':/', ':-/', ':\\\\', ':-\\\\'],\n\t'\\\\:-?[z|Z|\\\\|]': [':z', ':Z', ':|', ':-z', ':-Z', ':-|'],\n\t'\\\\:-?\\\\(': [':(', ':-('],\n\t'\\\\:-?\\\\)': [':)', ':-)'],\n\t'\\\\;-?(p|P)': [';p', ';P', ';-p', ';-P'],\n\t'\\\\;-?\\\\)': [';)', ';-)'],\n\t'#-?[\\\\\\\\/]': ['#/', '#-/', '#//', '#-//'],\n\t':-?(?:7|L)': [':7', ':L', ':-7', ':-L'],\n\t'\\\\&lt\\\\;\\\\]': ['<]'],\n\t'\\\\:-?(S|s)': [':s', ':S', ':-s', ':-S'],\n\t'\\\\:\\\\&gt\\\\;': [':>']\n};*/\n\n\nconst MESSAGE_TYPES = make_enum(\n\t'Post',\n\t'Action'\n);\n\nconst MOD_TYPES = make_enum(\n\t'Ban',\n\t'Timeout',\n\t'Delete'\n);\n\nconst AUTOMOD_TYPES = make_enum(\n\t'MessageRejectedPrompt',\n\t'CheerMessageRejectedPrompt',\n\t'MessageRejected',\n\t'MessageAllowed',\n\t'MessageDenied',\n\t'CheerMessageDenied',\n\t'CheerMessageTimeout',\n\t'MessageModApproved',\n\t'MessageModDenied'\n);\n\nconst UNBLOCKABLE_TYPES = [\n\t'Message',\n\t'Notice',\n\t'Moderation',\n\t'ModerationAction',\n\t'TargetedModerationAction',\n\t'AutoMod',\n\t'SubscriberOnlyMode',\n\t'FollowerOnlyMode',\n\t'SlowMode',\n\t'EmoteOnlyMode',\n\t'R9KMode',\n\t'Connected',\n\t'Disconnected',\n\t'Reconnect',\n\t'RoomMods',\n\t'RoomState',\n\t'BadgesUpdated'\n]\n\nconst CHAT_TYPES = make_enum(\n\t'Message',\n\t'ExtensionMessage',\n\t'Moderation',\n\t'ModerationAction',\n\t'TargetedModerationAction',\n\t'AutoMod',\n\t'SubscriberOnlyMode',\n\t'FollowerOnlyMode',\n\t'SlowMode',\n\t'EmoteOnlyMode',\n\t'R9KMode',\n\t'Connected',\n\t'Disconnected',\n\t'Reconnect',\n\t'Subscription',\n\t'Resubscription',\n\t'GiftPaidUpgrade',\n\t'AnonGiftPaidUpgrade',\n\t'PrimePaidUpgrade',\n\t'PrimeCommunityGiftReceivedEvent',\n\t'ExtendSubscription',\n\t'SubGift',\n\t'AnonSubGift',\n\t'Clear',\n\t'RoomMods',\n\t'RoomState',\n\t'Raid',\n\t'Unraid',\n\t'Notice',\n\t'Info',\n\t'BadgesUpdated',\n\t'Purchase',\n\t'BitsCharity',\n\t'CrateGift',\n\t'RewardGift',\n\t'SubMysteryGift',\n\t'AnonSubMysteryGift',\n\t'StandardPayForward',\n\t'CommunityPayForward',\n\t'FirstCheerMessage',\n\t'FirstMessageHighlight',\n\t'BitsBadgeTierMessage',\n\t'InlinePrivateCallout',\n\t'ChannelPointsReward',\n\t'CommunityChallengeContribution',\n\t'LiveMessageSeparator',\n\t'RestrictedLowTrustUserMessage',\n\t'CommunityIntroduction',\n\t'Shoutout',\n\t'AnnouncementMessage',\n\t'CharityDonation',\n\t'MessageIdUpdate',\n\t'ViewerMilestone',\n\t'GigantifiedEmote'\n);\n\n\nconst NULL_TYPES = [\n\t'Reconnect',\n\t'RoomState',\n\t'BadgesUpdated',\n\t'Clear'\n];\n\n\nconst INLINE_CALLOUT_TYPES = {\n\t'pinned_re_sub': 'share-resub',\n\t'community_points_reward': 'community-points-rewards',\n\t'clip_live_nudge_chat_trigger': 'clip-live-nudge',\n\t'cheer_badge_grant': 'bits-badge-tier'\n};\n\nconst CALLOUT_TYPES = {\n\t\"AppointedModerator\": \"appointed-moderator\",\n\t\"BitsBadgeTier\": \"bits-badge-tier\",\n\t\"BitsPowerUps\": \"bits-power-ups\",\n\t\"ClipLiveNudge\": \"clip-live-nudge\",\n\t\"CommunityMoment\": \"community-moment\",\n\t\"CommunityPointsRewards\": \"community-points-rewards\",\n\t\"CosmicAbyss\": \"cosmic-abyss\",\n\t\"CreatorAnniversaries\": \"creator-anniversaries\",\n\t\"Drop\": \"drop\",\n\t\"EarnedSubBadge\": \"earned-sub-badge\",\n\t\"FavoritedGuestCollab\": \"favorited-guest-collab\",\n\t\"GiftBadgeExpiration\": \"gift-badge-expiration\",\n\t\"GiftBadgeRestored\": \"gift-badge-restored\",\n\t\"GiftBundleUpSell\": \"gift-bundle-up-sell\",\n\t\"HypeTrainRewards\": \"hype-train-rewards\",\n\t\"LapsedBitsUser\": \"lapsed-bits-user\",\n\t\"PartnerPlusUpSellNudge\": \"partner-plus-up-sell-nudge\",\n\t\"ReplyByKeyboard\": \"reply-by-keyboard\",\n\t\"RequestToJoinAccepted\": \"request-to-join-accepted\",\n\t\"STPromo\": \"st-promo\",\n\t\"ShareResub\": \"share-resub\",\n\t\"SubtemberPromoBits\": \"subtember-promo-bits\",\n\t\"ThankSubGifter\": \"thank-sub-gifter\",\n\t\"TurnOffAnimatedEmotes\": \"turn-off-animated-emotes\",\n\t\"WalletDrop\": \"wallet-drop\"\n};\n\nconst UNBLOCKABLE_CALLOUTS = [];\n\n\nconst MISBEHAVING_EVENTS = [\n\t'onBadgesUpdatedEvent',\n];\n\n\nexport default class ChatHook extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.should_enable = true;\n\n\t\tthis.shared_room_data = new Map;\n\t\tthis.shared_rooms = {};\n\n\t\tthis.colors = new ColorAdjuster;\n\t\tthis.inverse_colors = new ColorAdjuster;\n\n\t\tthis.inject('settings');\n\t\tthis.inject('i18n');\n\t\tthis.inject('experiments');\n\n\t\tthis.inject('site');\n\t\tthis.inject('site.router');\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site.web_munch');\n\t\tthis.inject('site.css_tweaks');\n\t\tthis.inject('site.subpump');\n\t\t//this.inject('site.loadable');\n\n\t\tthis.inject('chat');\n\n\t\tthis.inject(Scroller);\n\t\tthis.inject(ChatLine);\n\t\tthis.inject(SettingsMenu);\n\t\tthis.inject(EmoteMenu);\n\t\tthis.inject(Input);\n\t\tthis.inject(ViewerCards);\n\n\t\tthis.ChatLeaderboard = this.fine.define(\n\t\t\t'chat-leaderboard',\n\t\t\tn => n.props?.topItems && has(n.props, 'forceMiniView') && has(n.props, 'leaderboardType'),\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.ChatService = this.fine.define(\n\t\t\t'chat-service',\n\t\t\tn => n.join && n.client && n.props.setChatConnectionAPI,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.ChatBuffer = this.fine.define(\n\t\t\t'chat-buffer',\n\t\t\tn => n.updateHandlers && n.delayedMessageBuffer && n.handleMessage,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.ChatController = this.fine.define(\n\t\t\t'chat-controller',\n\t\t\tn => n.parseOutgoingMessage && n.onRoomStateUpdated && n.renderNotifications,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.ChatRenderer = this.fine.define(\n\t\t\t'chat-renderer',\n\t\t\tn => n.mapMessagesToChatLines && n.reportChatRenderSent,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.ChatContainer = this.fine.define(\n\t\t\t'chat-container',\n\t\t\tn => n.closeViewersList && n.onChatInputFocus,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.ChatBufferConnector = this.fine.define(\n\t\t\t'chat-buffer-connector',\n\t\t\tn => n.clearBufferHandle && n.syncBufferedMessages,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.joined_raids = new Set;\n\n\t\tthis.RaidController = this.fine.define(\n\t\t\t'raid-controller',\n\t\t\tn => n.handleLeaveRaid && n.handleJoinRaid,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.InlineCallout = this.fine.define(\n\t\t\t'inline-callout',\n\t\t\tn => n.showCTA && n.toggleContextMenu && n.actionClick,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.PinnedCallout = this.fine.define(\n\t\t\t'pinned-callout',\n\t\t\tn => n.getCalloutTitle && n.buildCalloutProps && n.pin,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.CalloutSelector = this.fine.define(\n\t\t\t'callout-selector',\n\t\t\tn => n.selectCalloutComponent && n.props && has(n.props, 'callouts'),\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.PointsButton = this.fine.define(\n\t\t\t'points-button',\n\t\t\tn => n.renderIcon && n.renderFlame && n.handleIconAnimationComplete,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.PointsClaimButton = this.fine.define(\n\t\t\t'points-claim-button',\n\t\t\tn => n.getClaim && n.onClick && n.props && n.props.claimCommunityPoints,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.CommunityChestBanner = this.fine.define(\n\t\t\t'community-chest-banner',\n\t\t\tn => n.getLastGifterText && n.getBannerText && has(n, 'finalCount'),\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.PointsInfo = this.fine.define(\n\t\t\t'points-info',\n\t\t\tn => n.pointIcon !== undefined && n.pointName !== undefined,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\tthis.GiftBanner = this.fine.define(\n\t\t\t'gift-banner',\n\t\t\tn => n.getBannerText && n.onGiftMoreClick,\n\t\t\tTwilight.CHAT_ROUTES\n\t\t);\n\n\t\t// Settings\n\n\t\tthis.settings.add('chat.subs.native', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Subscriptions',\n\t\t\t\ttitle: 'Display subscription notices using Twitch\\'s native UI.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.filtering.show-reasons', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Filtering > General >> Appearance',\n\t\t\t\ttitle: 'Display Reasons',\n\t\t\t\tdescription: 'If this is enabled, the reasons a given message was highlighted will be displayed alongside the message. This is a simple display. Enable the debugging option below in Behavior for more details, but be aware that the debugging option has a slight performance impact compared to this.',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: false, title: 'Disabled'},\n\t\t\t\t\t{value: 1, title: 'Above Message'},\n\t\t\t\t\t{value: 2, title: 'Inline'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.disable-handling', {\n\t\t\tdefault: null,\n\t\t\trequires: ['context.disable-chat-processing'],\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( val != null )\n\t\t\t\t\treturn ! val;\n\t\t\t\tif ( ctx.get('context.disable-chat-processing') )\n\t\t\t\t\treturn true;\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tui: {\n\t\t\t\tpath: 'Debugging > Chat >> Processing',\n\t\t\t\ttitle: 'Enable processing of chat messages.',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\tforce_seen: true\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.addUI('debug.chat-test', {\n\t\t\tpath: 'Debugging > Chat >> Chat',\n\t\t\tcomponent: 'chat-tester',\n\t\t\tgetChat: () => this,\n\t\t\tforce_seen: true\n\t\t});\n\n\t\tthis.settings.add('chat.filtering.blocked-callouts', {\n\t\t\tdefault: [],\n\t\t\ttype: 'array_merge',\n\t\t\talways_inherit: true,\n\t\t\tprocess: (ctx, val) => {\n\t\t\t\tconst out = new Set,\n\t\t\t\t\ttype_map = this.callout_types ?? CALLOUT_TYPES;\n\t\t\t\tfor(const v of val)\n\t\t\t\t\tif ( v?.v && type_map[v.v] && ! UNBLOCKABLE_CALLOUTS.includes(v.v) )\n\t\t\t\t\t\tout.add(type_map[v.v]);\n\n\t\t\t\treturn out;\n\t\t\t},\n\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Filtering > Block >> Callout Types @{\"description\":\"This filter allows you to remove callouts of specific types from Twitch chat. Callouts are special messages that can be pinned to the bottom of chat and often have associated actions, like claiming a drop or sharing your resubscription.\"}',\n\t\t\t\tcomponent: 'blocked-types',\n\t\t\t\tdata: () => Object\n\t\t\t\t\t.keys(this.callout_types)\n\t\t\t\t\t.filter(key => ! UNBLOCKABLE_CALLOUTS.includes(key))\n\t\t\t\t\t.sort()\n\t\t\t}\n\t\t})\n\n\t\tthis.settings.add('chat.filtering.blocked-types', {\n\t\t\tdefault: [],\n\t\t\ttype: 'array_merge',\n\t\t\talways_inherit: true,\n\t\t\tprocess(ctx, val) {\n\t\t\t\tconst out = new Set;\n\t\t\t\tfor(const v of val)\n\t\t\t\t\tif ( v?.v && ! UNBLOCKABLE_TYPES.includes(v.v) )\n\t\t\t\t\t\tout.add(v.v);\n\n\t\t\t\treturn out;\n\t\t\t},\n\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Filtering > Block >> Message Types @{\"description\":\"This filter allows you to remove all messages of a certain type from Twitch chat. It can be used to filter system messages, such as Hosts or Raids. Some types, such as moderation actions, cannot be blocked to prevent chat functionality from breaking.\"}',\n\t\t\t\tcomponent: 'blocked-types',\n\t\t\t\tdata: () => Object\n\t\t\t\t\t.keys(this.chat_types)\n\t\t\t\t\t.filter(key => ! UNBLOCKABLE_TYPES.includes(key) && ! /^\\d+$/.test(key))\n\t\t\t\t\t.sort()\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.replies.style', {\n\t\t\tdefault: 1,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Replies',\n\t\t\t\ttitle: 'Style',\n\t\t\t\tdescription: `Twitch's default style adds a floating button to the right and displays a notice above messages that are replies. FrankerFaceZ uses an In-Line Chat Action (that can be removed in [Chat > Actions > In-Line](~chat.actions.in_line)) and uses an in-line mention to denote replies.`,\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Disabled'},\n\t\t\t\t\t{value: 1, title: 'Twitch (Default)'},\n\t\t\t\t\t{value: 2, title: 'FrankerFaceZ'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('channel.raids.no-autojoin', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Behavior >> Raids',\n\t\t\t\ttitle: 'Do not automatically join raids.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.powerup.effects', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Community',\n\t\t\t\ttitle: 'Allow \"Message Effects\" messages to appear in chat.',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\tdescription: '*Note*: Only affects messages sent after you change this setting. You can use your own chat for testing.'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('channel.raids.blocked-channels', {\n\t\t\tdefault: [],\n\t\t\ttype: 'array_merge',\n\t\t\talways_inherit: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Behavior >> Raids: Blocked Channels @{\"description\": \"You will not automatically join raids to channels listed here.\"}',\n\t\t\t\tcomponent: 'basic-terms',\n\t\t\t\twords: false\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('__filter:channel.raids.blocked-channels', {\n\t\t\trequires: ['channel.raids.blocked-channels'],\n\t\t\tequals: 'requirements',\n\t\t\tprocess(ctx) {\n\t\t\t\tconst val = ctx.get('channel.raids.blocked-channels');\n\t\t\t\tif ( ! val || ! val.length )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst out = [];\n\n\t\t\t\tfor(const item of val) {\n\t\t\t\t\tconst t = item.t;\n\t\t\t\t\tlet v = item.v;\n\n\t\t\t\t\tif ( t === 'glob' )\n\t\t\t\t\t\tv = glob_to_regex(v);\n\n\t\t\t\t\telse if ( t !== 'raw' )\n\t\t\t\t\t\tv = escape_regex(v);\n\n\t\t\t\t\tif ( ! v || ! v.length )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tout.push(v);\n\t\t\t\t}\n\n\t\t\t\tif ( out.length )\n\t\t\t\t\treturn new RegExp(`^(?:${out.join('|')})$`, 'gi');\n\n\t\t\t\treturn null;\n\t\t\t}\n\t\t})\n\n\t\tthis.settings.add('chat.hide-community-highlights', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Community',\n\t\t\t\ttitle: 'Hide all Community Highlights from the top of chat.',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\tdescription: 'Community Highlights are polls, community gift subs, etc. that float over the top of chat temporarily with no way to close them.'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.subs.gift-banner', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Community',\n\t\t\t\ttitle: 'Display a banner at the top of chat when a mass gift sub happens.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.banners.last-events', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Community',\n\t\t\t\ttitle: 'Allow the Support Activity Feed to be displayed in chat.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.banners.charity', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Community',\n\t\t\t\ttitle: 'Allow the charity fundraiser progress to be displayed in chat.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.banners.hide-appleplus', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Community',\n\t\t\t\ttitle: 'Hide the drop notification for getting AppleTV+ when you buy a subscription.',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\tdescription: '**Note:** Normally, I wouldn\\'t add something that directly affects an advertisement like this, but Twitch broke the \"Don\\'t show again\" checkbox, so it\\'s up to us to fix it.'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.banners.hype-train', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Community',\n\t\t\t\ttitle: 'Allow the Hype Train to be displayed in chat.',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t}\n\t\t});\n\n\t\t/*this.settings.add('chat.banners.kappa-train', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Community',\n\t\t\t\ttitle: 'Attempt to always display the Golden Kappa Train, even if other Hype Trains are hidden.',\n\t\t\t\tdescription: '**Note**: This setting is currently theoretical and may not work, or may cause non-Kappa hype trains to appear. Due to the infrequent nature of hype trains, and especially the golden kappa hype train, it is very hard to test.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});*/\n\n\t\tthis.settings.add('chat.banners.shared-chat', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Shared Chat >> Behavior',\n\t\t\t\ttitle: 'Allow the Shared Chat notice to be displayed in chat when a Shared Chat is enabled.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.banners.pinned-message', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Community',\n\t\t\t\ttitle: 'Allow Pinned Messages to be displayed in chat.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.banners.drops', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Drops >> Appearance',\n\t\t\t\ttitle: 'Allow messages about Drops to be displayed in chat.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.banners.polls', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Community',\n\t\t\t\ttitle: 'Allow Polls to be displayed in chat.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.banners.prediction', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Community',\n\t\t\t\ttitle: 'Allow Predictions to be displayed in chat.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.callouts.clip', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Community',\n\t\t\t\ttitle: 'Allow the \\\"Chat seems active.\\\" clip suggestion to be displayed in chat.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.community-chest.show', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Community',\n\t\t\t\ttitle: 'Display the Community Gift Chest banner.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.points.allow-highlight', {\n\t\t\tdefault: 2,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Channel Points >> Appearance',\n\t\t\t\ttitle: 'Highlight the message in chat when someone redeems Highlight My Message.',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Disabled'},\n\t\t\t\t\t{value: 1, title: 'Twitch Style'},\n\t\t\t\t\t{value: 2, title: 'FFZ Style'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.points.show-callouts', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Channel Points >> General',\n\t\t\t\ttitle: 'Display messages in chat about Channel Points rewards.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.points.show-button', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Channel Points >> General',\n\t\t\t\ttitle: 'Display Channel Points button beneath chat.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.points.show-rewards', {\n\t\t\tdefault: true,\n\t\t\trequires: ['layout.portrait-min-chat'],\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( ctx.get('layout.portrait-min-chat') )\n\t\t\t\t\treturn false;\n\n\t\t\t\treturn val;\n\t\t\t},\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Channel Points >> Behavior',\n\t\t\t\ttitle: 'Allow available rewards to appear next to the Channel Points button.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.points.auto-rewards', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Channel Points >> Behavior',\n\t\t\t\ttitle: 'Automatically claim bonus rewards.',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\tforce_seen: true\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.drops.auto-rewards', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Drops >> Behavior',\n\t\t\t\ttitle: 'Automatically claim drops.',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.pin-resubs', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Behavior >> General',\n\t\t\t\ttitle: 'Automatically pin re-subscription messages in chat.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.shared-chat.style', {\n\t\t\tdefault: null,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Shared Chat >> Appearance',\n\t\t\t\ttitle: 'Pill Style',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdescription: 'This controls the appearance of the pill at the left-side of chat messages when a message is part of a Shared Chat. By default, this is Avatar for moderators and broadcasters and Hidden for everyone else.',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: null, title: 'Automatic'},\n\t\t\t\t\t{value: 0, title: 'Hidden'},\n\t\t\t\t\t{value: 1, title: 'Channel Name'},\n\t\t\t\t\t{value: 2, title: 'Avatar'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.shared-chat.username-tooltip', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Shared Chat >> Appearance',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\ttitle: 'Display the source channel of a chat message when hovering over the poster\\'s username.',\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.width', {\n\t\t\tdefault: null,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> General @{\"sort\": -1}',\n\t\t\t\ttitle: 'Width',\n\t\t\t\tdescription: \"How wide chat should be, in pixels. This may be affected by your browser's zoom and font size settings.\",\n\t\t\t\tcomponent: 'setting-text-box',\n\t\t\t\tprocess(val) {\n\t\t\t\t\tval = parseInt(val, 10);\n\t\t\t\t\tif ( isNaN(val) || ! isFinite(val) || val <= 0 )\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\treturn val;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.effective-width', {\n\t\t\trequires: ['chat.width', 'context.ui.rightColumnWidth'],\n\t\t\tprocess(ctx) {\n\t\t\t\tconst val = ctx.get('chat.width');\n\t\t\t\treturn val == null ? (ctx.get('context.ui.rightColumnWidth') || 340) : val;\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.use-width', {\n\t\t\trequires: ['chat.width', 'context.ui.rightColumnExpanded', 'context.isWatchParty'],\n\t\t\tprocess(ctx) {\n\t\t\t\tif ( ! ctx.get('context.ui.rightColumnExpanded') || ctx.get('context.isWatchParty') )\n\t\t\t\t\treturn false;\n\n\t\t\t\treturn ctx.get('chat.width') != null;\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.bits.show-pinned', {\n\t\t\trequires: ['chat.bits.show'],\n\t\t\tdefault: null,\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( val != null )\n\t\t\t\t\treturn val;\n\n\t\t\t\treturn ctx.get('chat.bits.show')\n\t\t\t},\n\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Community',\n\t\t\t\ttitle: 'Display Leaderboard',\n\t\t\t\tdescription: 'The leaderboard shows the top cheerers and sub gifters in a channel.\\n\\nBy default due to a previous implementation, this inherits its value from [Chat > Bits and Cheering > Display Bits](~chat.bits_and_cheering).',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.bits.show-rewards', {\n\t\t\trequires: ['chat.bits.show'],\n\t\t\tdefault: null,\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( val != null )\n\t\t\t\t\treturn val;\n\n\t\t\t\treturn ctx.get('chat.bits.show')\n\t\t\t},\n\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Bits and Cheering >> Behavior',\n\t\t\t\ttitle: 'Display messages when a cheer shares rewards to people in chat.',\n\t\t\t\tdescription: 'By default, this inherits its value from Display Bits. This setting only affects newly arrived messages.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.bits.cheer-notice', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Bits and Cheering >> Appearance',\n\t\t\t\ttitle: 'Display a notice on chat messages that include cheers.',\n\t\t\t\tdescription: 'This feature is intended to prevent possible confusion from chatters using emotes to fake cheers in messages. When enabled, messages that contain real cheers will display a message above them, similar to how resubscription messages or point redemptions with messages function.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.rituals.show', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Filtering > General >> Rituals',\n\t\t\t\ttitle: 'Display ritual messages such as \"User is new here! Say Hello!\".',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.extra-timestamps', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Chat Lines',\n\t\t\t\ttitle: 'Display timestamps on notices.',\n\t\t\t\tdescription: 'When enabled, timestamps will be displayed on point redemptions, subscriptions, etc.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.hype.message-style', {\n\t\t\tdefault: 1,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Hype Chat >> Appearance',\n\t\t\t\ttitle: 'Hype Chat Style',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdescription: '**Note**: Hype Chats that include messages will always have their messages displayed, regardless of setting. Changes made to this setting may not affect existing chat messages.',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Do Not Display'},\n\t\t\t\t\t{value: 1, title: 'Standard Twitch (Large, Colored, Limited FFZ Support)'},\n\t\t\t\t\t{value: 2, title: 'Minimal (Marked with System Message, No Colors)' }\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.subs.show', {\n\t\t\tdefault: 3,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Subscriptions',\n\t\t\t\ttitle: 'Display Subs in Chat',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdescription: '**Note**: Messages sent with re-subs will always be displayed. This only controls the special \"X subscribed!\" message.',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Do Not Display'},\n\t\t\t\t\t{value: 1, title: 'Re-Subs with Messages Only'},\n\t\t\t\t\t{value: 2, title: 'Re-Subs Only'},\n\t\t\t\t\t{value: 3, title: 'Display All'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.subs.compact', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Subscriptions',\n\t\t\t\ttitle: 'Display subscription notices in a more compact (classic style) form.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.subs.merge-gifts', {\n\t\t\tdefault: 1000,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Subscriptions',\n\t\t\t\ttitle: 'Merge Mass Sub Gifts',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 1000, title: 'Disabled'},\n\t\t\t\t\t{value: 50, title: 'More than 50'},\n\t\t\t\t\t{value: 20, title: 'More than 20'},\n\t\t\t\t\t{value: 10, title: 'More than 10'},\n\t\t\t\t\t{value: 5, title: 'More than 5'},\n\t\t\t\t\t{value: 0, title: 'Always'}\n\t\t\t\t],\n\t\t\t\tdescription: 'Merge mass gift subscriptions into a single message, depending on the quantity.\\n**Note:** Only affects newly gifted subs.'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.subs.merge-gifts-visibility', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Subscriptions',\n\t\t\t\ttitle: 'Expand merged mass sub gift messages by default.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.lines.alternate', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Chat Lines',\n\t\t\t\ttitle: 'Display lines with alternating background colors.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.lines.padding', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Chat Lines',\n\t\t\t\ttitle: 'Reduce padding around lines.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.lines.borders', {\n\t\t\tdefault: 0,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Appearance >> Chat Lines',\n\t\t\t\ttitle: 'Separators',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Disabled'},\n\t\t\t\t\t{value: 1, title: 'Basic Line (1px Solid)'},\n\t\t\t\t\t{value: 2, title: '3D Line (2px Groove)'},\n\t\t\t\t\t{value: 3, title: '3D Line (2px Groove Inset)'},\n\t\t\t\t\t{value: 4, title: 'Wide Line (2px Solid)'}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.input.show-mod-view', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Input >> Appearance',\n\t\t\t\ttitle: 'Allow the \"Mod View\" button to appear in relevant channels.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.input.show-highlight', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Input >> Appearance',\n\t\t\t\ttitle: 'Allow the \"Chat Highlight Settings\" button to appear in relevant channels.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.input.show-shield', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Input >> Appearance',\n\t\t\t\ttitle: 'Allow the \"Shield Mode\" button to appear in relevant channels.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.input.show-elevate-your-message', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Input >> Appearance',\n\t\t\t\ttitle: 'Allow the \"Elevate Your Message\" button to be displayed.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\t}\n\n\tget currentChat() {\n\t\tfor(const inst of this.ChatController.instances)\n\t\t\tif ( inst && inst.chatService )\n\t\t\t\treturn inst;\n\n\t\treturn null;\n\t}\n\n\n\tupdateColors() {\n\t\tconst is_dark = this.chat.context.get('theme.is-dark'),\n\t\t\tmode = this.chat.context.get('chat.adjustment-mode'),\n\t\t\tcontrast = this.chat.context.get('chat.adjustment-contrast'),\n\t\t\tc = this.colors,\n\t\t\tic = this.inverse_colors;\n\n\t\tlet chat_dark = is_dark,\n\t\t\tchat_color = Color.RGBA.fromCSS(\n\t\t\t\tthis.chat.context.get('theme.color.chat-background') ||\n\t\t\t\tthis.chat.context.get('theme.color.background')\n\t\t\t);\n\n\t\tif ( chat_color )\n\t\t\tchat_dark = chat_color.toHSLA().l < 0.5;\n\n\t\tchat_color = chat_dark ? '#191919' : '#E0E0E0';\n\n\t\tlet text_dark = ! chat_dark,\n\t\t\tchat_text = Color.RGBA.fromCSS(\n\t\t\t\tthis.chat.context.get('theme.color.chat-text') ||\n\t\t\t\tthis.chat.context.get('theme.color.text')\n\t\t\t);\n\n\t\tif ( chat_text )\n\t\t\ttext_dark = chat_text.toHSLA().l < 0.5;\n\n\t\tchat_text = text_dark ? '#19171c' : '#dad8de';\n\n\t\t// TODO: Get the background color from the theme system.\n\t\t// Updated: Use the lightest/darkest colors from alternating rows for better readibility.\n\t\tc._base = chat_color; // is_dark ? '#191919' : '#e0e0e0'; //#0e0c13' : '#faf9fa';\n\t\tc.mode = mode;\n\t\tc.contrast = contrast;\n\n\t\tic._base = chat_text; // is_dark ? '#dad8de' : '#19171c';\n\t\tic.mode = mode;\n\t\tic.contrast = contrast;\n\n\t\tthis.chat_line.rerenderLines();\n\t\t//this.updateChatLines();\n\t\tthis.updateMentionCSS();\n\t\tthis.emit(':update-colors');\n\t}\n\n\n\tupdateChatCSS() {\n\t\tif ( ! this._update_css_waiter )\n\t\t\tthis._update_css_waiter = requestAnimationFrame(() => this._updateChatCSS());\n\t}\n\n\t_updateChatCSS() {\n\t\tcancelAnimationFrame(this._update_css_waiter);\n\t\tthis._update_css_waiter = null;\n\n\t\tconst width = this.chat.context.get('chat.effective-width'),\n\t\t\taction_size = this.chat.context.get('chat.actions.size'),\n\t\t\thover_action_size = this.chat.context.get('chat.actions.hover-size'),\n\t\t\tts_size = this.chat.context.get('chat.timestamp-size'),\n\t\t\tsize = this.chat.context.get('chat.font-size'),\n\t\t\temote_alignment = this.chat.context.get('chat.lines.emote-alignment'),\n\t\t\tlh = Math.round((20/12) * size);\n\n\t\tconst hover_action_icon = Math.round(hover_action_size * (2/3)),\n\t\t\thover_action_padding = hover_action_size - hover_action_icon;\n\n\t\tlet font = this.chat.context.get('chat.font-family') || 'inherit';\n\t\tconst [processed, unloader] = useFont(font);\n\t\tfont = processed;\n\n\t\tif ( this._font_unloader )\n\t\t\tthis._font_unloader();\n\n\t\tthis._font_unloader = unloader;\n\n\t\tif ( font.indexOf(' ') !== -1 && font.indexOf(',') === -1 && font.indexOf('\"') === -1 && font.indexOf(\"'\") === -1 )\n\t\t\tfont = `\"${font}\"`;\n\n\t\tif ( ts_size )\n\t\t\tthis.css_tweaks.set('ts-size', `.chat-line__timestamp{font-size:${ts_size/10}rem}`);\n\t\telse\n\t\t\tthis.css_tweaks.delete('ts-size');\n\n\t\tthis.css_tweaks.setVariable('chat-actions-size', `${action_size/10}rem`);\n\t\tthis.css_tweaks.setVariable('chat-actions-hover-size', `${hover_action_icon/10}rem`);\n\t\tthis.css_tweaks.setVariable('chat-actions-hover-padding', `${hover_action_padding/20}rem`);\n\t\tthis.css_tweaks.setVariable('chat-font-size', `${size/10}rem`);\n\t\tthis.css_tweaks.setVariable('chat-line-height', `${lh/10}rem`);\n\t\tthis.css_tweaks.setVariable('chat-font-family', font);\n\t\tthis.css_tweaks.setVariable('chat-width', `${width/10}rem`);\n\t\tthis.css_tweaks.setVariable('negative-chat-width', `${-width/10}rem`);\n\n\t\tthis.css_tweaks.toggle('chat-font', size !== 13 || font !== 'inherit');\n\t\tthis.css_tweaks.toggle('chat-width', this.settings.get('chat.use-width'));\n\t\tthis.css_tweaks.toggle('chat-fix--watch-party', this.settings.get('context.isWatchParty'));\n\n\t\tthis.css_tweaks.toggle('emote-alignment-padded', emote_alignment === 1);\n\t\tthis.css_tweaks.toggle('emote-alignment-baseline', emote_alignment === 2);\n\n\t\tthis.emit(':update-chat-css');\n\t\tthis.emit('site.player:fix-player');\n\t\tthis.emit('site.layout:resize');\n\t}\n\n\tupdateLineBorders() {\n\t\tconst mode = this.chat.context.get('chat.lines.borders');\n\n\t\tthis.css_tweaks.toggle('chat-borders', mode > 0);\n\t\tthis.css_tweaks.toggle('chat-borders-3d', mode === 2);\n\t\tthis.css_tweaks.toggle('chat-borders-3d-inset', mode === 3);\n\t\tthis.css_tweaks.toggle('chat-borders-wide', mode === 4);\n\t}\n\n\tupdateMentionCSS() {\n\t\tconst enabled = this.chat.context.get('chat.filtering.highlight-mentions');\n\t\tthis.css_tweaks.toggle('chat-mention-token', this.chat.context.get('chat.filtering.highlight-tokens'));\n\n\t\tconst raw_color = this.chat.context.get('chat.filtering.mention-color');\n\t\tif ( raw_color ) {\n\t\t\tthis.css_tweaks.toggle('chat-mention-bg', false);\n\t\t\tthis.css_tweaks.toggle('chat-mention-bg-alt', false);\n\n\t\t\tthis.css_tweaks.toggle('chat-mention-bg-custom', true);\n\t\t\tthis.css_tweaks.setVariable('chat-mention-color', this.inverse_colors.process(raw_color));\n\n\t\t} else {\n\t\t\tthis.css_tweaks.toggle('chat-mention-bg-custom', false);\n\t\t\tthis.css_tweaks.toggle('chat-mention-bg', enabled);\n\t\t\tthis.css_tweaks.toggle('chat-mention-bg-alt', enabled && this.chat.context.get('chat.lines.alternate'));\n\t\t}\n\t}\n\n\n\tupdatePointsInfo(inst) {\n\t\tconst icon = inst?.pointIcon,\n\t\t\tname = inst?.pointName;\n\n\t\tif ( icon ) {\n\t\t\tthis.css_tweaks.set('points-icon', `.ffz--points-icon:before { display: none }\n.ffz--points-icon:after {\n\tdisplay: inline-block;\n\tmargin: 0 0.5rem -0.6rem;\n\tbackground-image: url(\"${icon.url}\");\n\tbackground-image: ${WEBKIT}image-set(url(\"${icon.url}\") 1x, url(\"${icon.url2x}\") 2x, url(\"${icon.url4x}\") 4x);\n}`);\n\t\t} else\n\t\t\tthis.css_tweaks.delete('points-icon');\n\n\t\tthis.point_name = name || null;\n\t}\n\n\n\tasync grabTypes() {\n\t\tif ( this.types_loaded )\n\t\t\treturn;\n\n\t\tconst ct = await this.web_munch.findModule('chat-types'),\n\t\t\tcallouts = await this.web_munch.findModule('callout-types');\n\n\t\tthis.callout_types = callouts || CALLOUT_TYPES;\n\t\tthis.automod_types = ct?.automod || AUTOMOD_TYPES;\n\t\tthis.chat_types = ct?.chat || CHAT_TYPES;\n\t\tthis.message_types = ct?.message || MESSAGE_TYPES;\n\t\tthis.mod_types = ct?.mod || MOD_TYPES;\n\n\t\tif ( ! ct )\n\t\t\treturn;\n\n\t\tif ( callouts )\n\t\t\tthis.chat.context.update('chat.filtering.blocked-callouts');\n\n\t\tthis.types_loaded = true;\n\t\tconst changes = [];\n\n\t\tif ( ! shallow_object_equals(this.callout_types, CALLOUT_TYPES) )\n\t\t\tchanges.push('CALLOUT_TYPES');\n\n\t\tif ( ! shallow_object_equals(this.automod_types, AUTOMOD_TYPES) )\n\t\t\tchanges.push('AUTOMOD_TYPES');\n\n\t\tif ( ! shallow_object_equals(this.chat_types, CHAT_TYPES) )\n\t\t\tchanges.push('CHAT_TYPES');\n\n\t\tif ( ! shallow_object_equals(this.message_types, MESSAGE_TYPES) )\n\t\t\tchanges.push('MESSAGE_TYPES');\n\n\t\tif ( ! shallow_object_equals(this.mod_types, MOD_TYPES) )\n\t\t\tchanges.push('MOD_TYPES');\n\n\t\tif ( changes.length )\n\t\t\tthis.log.info('Chat Types have changed from static mappings for categories:', changes.join(' '));\n\t}\n\n\n\tupdateDisableHandling() {\n\t\tthis.disable_handling = this.chat.context.get('chat.disable-handling');\n\t}\n\n\n\t/*setChatPortal(node) {\n\t\tif ( ! node )\n\t\t\tnode = null;\n\n\t\tif ( node === this.chat_portal )\n\t\t\treturn;\n\n\t\tif ( node && !(node instanceof HTMLElement) )\n\t\t\tthrow new Error('Tried to set invalid chat portal, must be null or HTMLElement');\n\n\t\tthis.chat_portal = node;\n\t\tthis.loadable.ErrorBoundaryComponent.forceUpdate();\n\t}*/\n\n\n\tonEnable() {\n\t\tthis.on('site.web_munch:loaded', this.grabTypes);\n\t\tthis.on('site.web_munch:loaded', this.defineClasses);\n\t\tthis.grabTypes();\n\t\tthis.defineClasses();\n\n\t\tthis.chat.context.on('changed:chat.callouts.clip', this.updateCallouts, this);\n\t\tthis.chat.context.on('changed:chat.filtering.blocked-callouts', this.updateCallouts, this);\n\t\tthis.chat.context.on('changed:chat.points.show-callouts', this.updateCallouts, this);\n\t\tthis.chat.context.on('changed:chat.points.show-button', () => this.PointsButton.forceUpdate());\n\t\tthis.chat.context.on('changed:chat.points.show-rewards', () => {\n\t\t\tthis.PointsButton.forceUpdate();\n\t\t\tthis.PointsClaimButton.forceUpdate();\n\t\t});\n\t\tthis.chat.context.on('changed:chat.bits.show', () => {\n\t\t\tthis.PointsButton.forceUpdate();\n\t\t});\n\n\t\tthis.chat.context.on('changed:chat.banners.hype-train', this.cleanHighlights, this);\n\t\tthis.chat.context.on('changed:chat.subs.gift-banner', this.cleanHighlights, this);\n\t\tthis.chat.context.on('changed:chat.banners.polls', this.cleanHighlights, this);\n\t\tthis.chat.context.on('changed:chat.banners.prediction', this.cleanHighlights, this);\n\t\tthis.chat.context.on('changed:chat.banners.drops', this.cleanHighlights, this);\n\t\tthis.chat.context.on('changed:chat.banners.pinned-message', this.cleanHighlights, this);\n\t\tthis.chat.context.on('changed:chat.banners.hide-appleplus', this.cleanHighlights, this);\n\t\tthis.chat.context.on('changed:chat.banners.shared-chat', this.cleanHighlights, this);\n\n\t\tthis.chat.context.on('changed:chat.disable-handling', this.updateDisableHandling, this);\n\n\t\tthis.chat.context.on('changed:chat.banners.charity', () => {\n\t\t\tthis.ChatContainer.forceUpdate();\n\t\t});\n\n\t\tthis.chat.context.on('changed:chat.subs.gift-banner', () => this.GiftBanner.forceUpdate(), this);\n\t\tthis.chat.context.on('changed:chat.effective-width', this.updateChatCSS, this);\n\t\tthis.settings.main_context.on('changed:chat.use-width', this.updateChatCSS, this);\n\t\tthis.chat.context.on('changed:chat.actions.size', this.updateChatCSS, this);\n\t\tthis.chat.context.on('changed:chat.actions.hover-size', this.updateChatCSS, this);\n\t\tthis.chat.context.on('changed:chat.font-size', this.updateChatCSS, this);\n\t\tthis.chat.context.on('changed:chat.timestamp-size', this.updateChatCSS, this);\n\t\tthis.chat.context.on('changed:chat.font-family', this.updateChatCSS, this);\n\t\tthis.chat.context.on('changed:chat.lines.emote-alignment', this.updateChatCSS, this);\n\t\tthis.chat.context.on('changed:chat.adjustment-mode', this.updateColors, this);\n\t\tthis.chat.context.on('changed:chat.adjustment-contrast', this.updateColors, this);\n\t\tthis.chat.context.on('changed:theme.is-dark', this.updateColors, this);\n\t\tthis.chat.context.on('changed:theme.color.background', this.updateColors, this);\n\t\tthis.chat.context.on('changed:theme.color.chat-background', this.updateColors, this);\n\t\tthis.chat.context.on('changed:theme.color.text', this.updateColors, this);\n\t\tthis.chat.context.on('changed:theme.color.chat-text', this.updateColors, this);\n\t\tthis.chat.context.on('changed:chat.lines.borders', this.updateLineBorders, this);\n\t\tthis.chat.context.on('changed:chat.filtering.highlight-mentions', this.updateMentionCSS, this);\n\t\tthis.chat.context.on('changed:chat.filtering.highlight-tokens', this.updateMentionCSS, this);\n\t\tthis.chat.context.on('changed:chat.filtering.mention-color', this.updateMentionCSS, this);\n\t\tthis.chat.context.on('changed:chat.pin-resubs', val => {\n\t\t\tif ( val ) {\n\t\t\t\tthis.updateInlineCallouts();\n\t\t\t\tthis.updatePinnedCallouts();\n\t\t\t}\n\t\t}, this);\n\n\t\tthis.chat.context.on('changed:chat.community-chest.show', () => {\n\t\t\tthis.CommunityChestBanner.forceUpdate();\n\t\t\tthis.updateCallouts();\n\t\t}, this);\n\n\t\tthis.chat.context.getChanges('chat.emotes.2x', val => {\n\t\t\tthis.css_tweaks.toggle('big-emoji', val > 1);\n\t\t\tthis.toggleEmoteJail();\n\t\t});\n\n\t\tthis.chat.context.getChanges('chat.emotes.limit-size', () =>\n\t\t\tthis.toggleEmoteJail());\n\n\t\tthis.chat.context.getChanges('chat.banners.last-events', val =>\n\t\t\tthis.css_tweaks.toggleHide('last-x-events', ! val));\n\n\t\tthis.chat.context.getChanges('chat.input.show-mod-view', val =>\n\t\t\tthis.css_tweaks.toggleHide('ci-mod-view', ! val));\n\n\t\tthis.chat.context.getChanges('chat.input.show-highlight', val =>\n\t\t\tthis.css_tweaks.toggleHide('ci-highlight-settings', !val));\n\n\t\tthis.chat.context.getChanges('chat.input.show-shield', val =>\n\t\t\tthis.css_tweaks.toggleHide('ci-shield-mode', ! val));\n\n\t\tthis.chat.context.getChanges('chat.lines.padding', val =>\n\t\t\tthis.css_tweaks.toggle('chat-padding', val));\n\n\t\tthis.chat.context.getChanges('chat.bits.show', val =>\n\t\t\tthis.css_tweaks.toggle('hide-bits', !val));\n\n\t\tthis.chat.context.on('changed:chat.bits.show-pinned', () =>\n\t\t\tthis.ChatLeaderboard.forceUpdate());\n\n\t\tthis.chat.context.getChanges('chat.filtering.deleted-style', val => {\n\t\t\tthis.css_tweaks.toggle('chat-deleted-strike', val === 1 || val === 2);\n\t\t\tthis.css_tweaks.toggle('chat-deleted-fade', val < 2);\n\t\t});\n\n\t\tthis.chat.context.getChanges('chat.filtering.clickable-mentions', val =>\n\t\t\tthis.css_tweaks.toggle('clickable-mentions', val));\n\n\t\tthis.chat.context.getChanges('chat.filtering.bold-mentions', val =>\n\t\t\tthis.css_tweaks.toggle('chat-mention-no-bold', ! val));\n\n\t\tthis.chat.context.getChanges('chat.hide-community-highlights', val =>\n\t\t\tthis.css_tweaks.toggleHide('community-highlights', val));\n\n\t\tthis.chat.context.getChanges('chat.lines.alternate', val => {\n\t\t\tthis.css_tweaks.toggle('chat-rows', val);\n\t\t\tthis.updateMentionCSS();\n\t\t});\n\n\t\tthis.chat.context.getChanges('chat.input.show-elevate-your-message', val =>\n\t\t\tthis.css_tweaks.toggleHide('elevate-your-message', ! val));\n\n\t\tthis.updateDisableHandling();\n\t\tthis.updateChatCSS();\n\t\tthis.updateColors();\n\t\tthis.updateLineBorders();\n\t\t//this.updateMentionCSS();\n\n\t\tthis.on('chat:get-messages-late', (include_chat, include_whisper, include_video, messages) => {\n\t\t\tif ( ! include_chat )\n\t\t\t\treturn;\n\n\t\t\tconst msg_ids = new Set(messages.map(x => x.message?.id));\n\n\t\t\tfor(const inst of this.ChatBuffer.instances) {\n\t\t\t\tfor(const msg of inst.buffer) {\n\t\t\t\t\tconst msg_id = msg?.id;\n\t\t\t\t\tif ( ! msg_id || msg_ids.has(msg_id) || ! msg.ffz_standardized )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tmsg_ids.add(msg_id);\n\t\t\t\t\tmessages.push({\n\t\t\t\t\t\tmessage: msg,\n\t\t\t\t\t\t_instance: null,\n\t\t\t\t\t\tupdate: () => null\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfor(const raw of inst.delayedMessageBuffer) {\n\t\t\t\t\tconst msg = raw?.event,\n\t\t\t\t\t\tmsg_id = msg?.id;\n\t\t\t\t\tif ( ! msg_id || msg_ids.has(msg_id) || ! msg.ffz_standardized )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tmsg_ids.add(msg_id);\n\t\t\t\t\tmessages.push({\n\t\t\t\t\t\tmessage: msg,\n\t\t\t\t\t\t_instance: null,\n\t\t\t\t\t\tupdate: () => null\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.on('chat:get-tab-commands', e => {\n\t\t\te.commands.push({\n\t\t\t\tname: 'reconnect',\n\t\t\t\tdescription: 'Force chat to reconnect.',\n\t\t\t\tpermissionLevel: 0,\n\t\t\t\tffz_group: 'FrankerFaceZ'\n\t\t\t})\n\t\t});\n\n\t\tthis.on('chat:pre-send-message', e => {\n\t\t\tconst msg = e.message,\n\t\t\t\tinst = e._inst;\n\n\t\t\tif ( ! /^\\/reconnect ?/i.test(msg) )\n\t\t\t\treturn;\n\n\t\t\te.preventDefault();\n\n\t\t\tif ( ! inst.client?.reconnect )\n\t\t\t\tinst.addMessage({\n\t\t\t\t\ttype: t.chat_types.Notice,\n\t\t\t\t\tmessage: t.i18n.t('chat.reconnect.unable', 'FFZ is unable to force chat to reconnect.')\n\t\t\t\t});\n\t\t\telse {\n\t\t\t\tinst.addMessage({\n\t\t\t\t\ttype: t.chat_types.Notice,\n\t\t\t\t\tmessage: t.i18n.t('chat.reconnect', 'FFZ is forcing chat to reconnect...')\n\t\t\t\t});\n\n\t\t\t\tinst.client.reconnect();\n\t\t\t}\n\t\t});\n\n\t\t/*this.loadable.ErrorBoundaryComponent.ready(cls => {\n\t\t\tconst t = this,\n\t\t\t\tproto = cls.prototype,\n\t\t\t\told_render = proto.render;\n\n\t\t\tproto.render = function() {\n\t\t\t\ttry {\n\t\t\t\t\tconst type = this.props.name;\n\t\t\t\t\tif ( type === 'ChatLive' && t.chat_portal ) {\n\t\t\t\t\t\tconst ReactDOM = t.site.getReactDom(),\n\t\t\t\t\t\t\tcreatePortal = ReactDOM?.createPortal;\n\n\t\t\t\t\t\tif ( createPortal ) {\n\t\t\t\t\t\t\tconst out = old_render.call(this);\n\t\t\t\t\t\t\tconsole.log('creating portal', out);\n\t\t\t\t\t\t\treturn createPortal(out, t.chat_portal, 'ffz-chat-portal');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} catch(err) {\n\t\t\t\t\t/* no-op * /\n\t\t\t\t}\n\n\t\t\t\treturn old_render.call(this);\n\t\t\t}\n\t\t});*/\n\n\t\tthis.RaidController.on('mount', this.wrapRaidController, this);\n\t\tthis.RaidController.on('update', this.noAutoRaids, this);\n\t\tthis.RaidController.ready((cls, instances) => {\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.wrapRaidController(inst);\n\t\t});\n\n\t\tthis.InlineCallout.on('mount', this.onInlineCallout, this);\n\t\tthis.InlineCallout.on('update', this.onInlineCallout, this);\n\t\tthis.InlineCallout.ready(() => this.updateInlineCallouts());\n\n\t\tthis.PinnedCallout.on('mount', this.onPinnedCallout, this);\n\t\tthis.PinnedCallout.on('update', this.onPinnedCallout, this);\n\t\tthis.PinnedCallout.ready(() => this.updatePinnedCallouts());\n\n\t\tconst t = this;\n\n\t\tthis.PointsInfo.on('mount', this.updatePointsInfo, this);\n\t\tthis.PointsInfo.on('update', this.updatePointsInfo, this);\n\t\tthis.PointsInfo.on('unmount', () => this.updatePointsInfo(null));\n\t\tthis.PointsInfo.ready(() => this.updatePointsInfo(this.PointsInfo.first));\n\n\t\tthis.ChatLeaderboard.ready(cls => {\n\t\t\tconst old_render = cls.prototype.render;\n\t\t\tcls.prototype.render = function() {\n\t\t\t\tif ( ! t.chat.context.get('chat.bits.show-pinned') )\n\t\t\t\t\treturn null;\n\n\t\t\t\treturn old_render.call(this);\n\t\t\t}\n\n\t\t\tthis.ChatLeaderboard.forceUpdate();\n\t\t});\n\n\t\tthis.GiftBanner.ready(cls => {\n\t\t\tconst old_render = cls.prototype.render;\n\t\t\tcls.prototype.render = function() {\n\t\t\t\tif ( ! t.chat.context.get('chat.subs.gift-banner') )\n\t\t\t\t\treturn null;\n\n\t\t\t\treturn old_render.call(this);\n\t\t\t}\n\n\t\t\tthis.GiftBanner.forceUpdate();\n\t\t});\n\n\t\tthis.CommunityChestBanner.ready(cls => {\n\t\t\tconst old_render = cls.prototype.render;\n\t\t\tcls.prototype.render = function() {\n\t\t\t\ttry {\n\t\t\t\t\tif ( ! t.chat.context.get('chat.community-chest.show') )\n\t\t\t\t\t\treturn null;\n\t\t\t\t} catch(err) {\n\t\t\t\t\tt.log.capture(err);\n\t\t\t\t\tt.log.error(err);\n\t\t\t\t}\n\n\t\t\t\treturn old_render.call(this);\n\t\t\t};\n\n\t\t\tthis.CommunityChestBanner.forceUpdate();\n\t\t});\n\n\t\tthis.PointsButton.ready(cls => {\n\t\t\tconst old_render = cls.prototype.render;\n\n\t\t\tcls.prototype.render = function() {\n\t\t\t\ttry {\n\t\t\t\t\tif ( ! t.chat.context.get('chat.points.show-button') )\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\tconst old_aq = this.state.animationQueue,\n\t\t\t\t\t\told_bits = this.props.bitsEnabled;\n\n\t\t\t\t\tif ( ! t.chat.context.get('chat.points.show-rewards') )\n\t\t\t\t\t\tthis.state.animationQueue = [];\n\n\t\t\t\t\tif ( ! t.chat.context.get('chat.bits.show') )\n\t\t\t\t\t\tthis.props.bitsEnabled = false;\n\n\t\t\t\t\tconst out = old_render.call(this);\n\n\t\t\t\t\tthis.state.animationQueue = old_aq;\n\t\t\t\t\tthis.props.bitsEnabled = old_bits;\n\t\t\t\t\treturn out;\n\n\t\t\t\t} catch(err) {\n\t\t\t\t\tt.log.capture(err);\n\t\t\t\t\tt.log.error(err);\n\t\t\t\t}\n\n\t\t\t\treturn old_render.call(this);\n\t\t\t}\n\n\t\t\tthis.PointsButton.forceUpdate();\n\t\t});\n\n\t\tthis.PointsClaimButton.ready(cls => {\n\t\t\tcls.prototype.ffzHasOffer = function() {\n\t\t\t\treturn ! this.props.hidden && ! this.state?.error && this.getClaim() != null;\n\t\t\t};\n\n\t\t\tconst old_render = cls.prototype.render;\n\t\t\tcls.prototype.render = function() {\n\t\t\t\ttry {\n\t\t\t\t\tif ( this.ffzHasOffer() && ! this._ffz_timer && t.chat.context.get('chat.points.auto-rewards') )\n\t\t\t\t\t\tthis._ffz_timer = setTimeout(() => {\n\t\t\t\t\t\t\tthis._ffz_timer = null;\n\t\t\t\t\t\t\tif ( this.onClick && this.ffzHasOffer() )\n\t\t\t\t\t\t\t\tthis.onClick();\n\t\t\t\t\t\t}, 1000 + Math.floor(Math.random() * 5000));\n\n\t\t\t\t\tif ( ! t.chat.context.get('chat.points.show-rewards') )\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t} catch(err) {\n\t\t\t\t\tt.log.capture(err);\n\t\t\t\t\tt.log.error(err);\n\t\t\t\t}\n\n\t\t\t\treturn old_render.call(this);\n\t\t\t}\n\n\t\t\tthis.PointsClaimButton.forceUpdate();\n\t\t});\n\n\t\tthis.ChatController.on('mount', this.chatMounted, this);\n\t\tthis.ChatController.on('unmount', this.chatUnmounted, this);\n\t\t//this.ChatController.on('receive-props', this.chatUpdated, this);\n\t\tthis.ChatController.on('update', this.chatUpdated, this);\n\n\t\tthis.ChatService.ready((cls, instances) => {\n\t\t\tthis.wrapChatService(cls);\n\n\t\t\tfor(const inst of instances) {\n\t\t\t\tinst.client.events.removeAll();\n\n\t\t\t\tinst._ffzInstall();\n\n\t\t\t\tconst channel = inst.joinedChannel,\n\t\t\t\t\tstate = inst.client?.session?.channelstate?.[`#${channel}`]?.roomState;\n\n\t\t\t\tif ( state )\n\t\t\t\t\tthis.updateChatState(state);\n\n\t\t\t\tinst.addEventListeners();\n\n\t\t\t\tinst.props.setChatConnectionAPI({\n\t\t\t\t\tsendMessage: inst.sendMessage,\n\t\t\t\t\t_ffz_inst: inst\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.ChatBuffer.ready((cls, instances) => {\n\t\t\tthis.wrapChatBuffer(cls);\n\n\t\t\tfor(const inst of instances) {\n\t\t\t\tconst handler = inst.props.messageHandlerAPI;\n\t\t\t\tif ( handler )\n\t\t\t\t\thandler.removeMessageHandler(inst.handleMessage);\n\n\t\t\t\tinst._ffzInstall();\n\n\t\t\t\tif ( handler )\n\t\t\t\t\thandler.addMessageHandler(inst.handleMessage);\n\n\t\t\t\t// We grab this from the chat client now.\n\t\t\t\t/*if ( Array.isArray(inst.buffer) ) {\n\t\t\t\t\tlet i = inst.buffer.length;\n\t\t\t\t\tconst ct = this.chat_types || CHAT_TYPES;\n\n\t\t\t\t\twhile(i--) {\n\t\t\t\t\t\tconst msg = inst.buffer[i];\n\t\t\t\t\t\tif ( msg && msg.type === ct.RoomState && msg.state ) {\n\t\t\t\t\t\t\tthis.updateChatState(msg.state);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}*/\n\n\t\t\t\tinst.props.setMessageBufferAPI({\n\t\t\t\t\taddUpdateHandler: inst.addUpdateHandler,\n\t\t\t\t\tremoveUpdateHandler: inst.removeUpdateHandler,\n\t\t\t\t\tgetUnreadCount: inst.getUnreadCount,\n\t\t\t\t\tgetMessages: inst.getMessages,\n\t\t\t\t\tgetMessagesForHighlight: inst.getMessagesForHighlight,\n\t\t\t\t\tgetMessagesForAllHighlights: inst.getMessagesForAllHighlights,\n\t\t\t\t\tisPaused: inst.isPaused,\n\t\t\t\t\tsetPaused: inst.setPaused,\n\t\t\t\t\thasNewerLeft: inst.hasNewerLeft,\n\t\t\t\t\tloadNewer: inst.loadNewer,\n\t\t\t\t\tloadNewest: inst.loadNewest,\n\t\t\t\t\t_ffz_inst: inst\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.ChatBufferConnector.on('mount', this.connectorMounted, this);\n\t\tthis.ChatBufferConnector.on('update', this.connectorUpdated, this);\n\t\tthis.ChatBufferConnector.on('unmount', this.connectorUnmounted, this);\n\n\t\tthis.ChatBufferConnector.ready((cls, instances) => {\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.connectorMounted(inst);\n\t\t});\n\n\t\tthis.ChatController.ready((cls, instances) => {\n\t\t\tconst t = this,\n\t\t\t\told_catch = cls.prototype.componentDidCatch,\n\t\t\t\told_render = cls.prototype.render;\n\n\t\t\t// Try catching errors. With any luck, maybe we can\n\t\t\t// recover from the error when we re-build?\n\t\t\tcls.prototype.componentDidCatch = function(err, info) {\n\t\t\t\t// Don't log infinitely if stuff gets super screwed up.\n\t\t\t\tconst errs = this.state.ffz_errors || 0;\n\t\t\t\tif ( errs < 100 ) {\n\t\t\t\t\tthis.setState({ffz_errors: errs + 1});\n\t\t\t\t\tt.log.info('Error within Chat', err, info, errs);\n\t\t\t\t}\n\n\t\t\t\tif ( old_catch )\n\t\t\t\t\treturn old_catch.call(this, err, info);\n\t\t\t}\n\n\t\t\tcls.prototype.render = function() {\n\t\t\t\tif ( this.state.ffz_errors > 0 ) {\n\t\t\t\t\tconst React = t.site.getReact(),\n\t\t\t\t\t\tcreateElement = React && React.createElement;\n\n\t\t\t\t\tif ( ! createElement )\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\treturn createElement('div', {\n\t\t\t\t\t\tclassName: 'tw-border-l tw-c-background-alt-2 tw-c-text-base tw-full-width tw-full-height tw-align-items-center tw-flex tw-flex-column tw-justify-content-center tw-relative'\n\t\t\t\t\t}, 'There was an error displaying chat.');\n\n\t\t\t\t}\n\n\t\t\t\treturn old_render.call(this);\n\t\t\t}\n\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.chatMounted(inst);\n\t\t});\n\n\t\tthis.ChatRenderer.on('mount', this.rendererMounted, this);\n\t\tthis.ChatRenderer.on('unmount', this.rendererUnmounted, this);\n\t\tthis.ChatRenderer.on('update', this.rendererUpdated, this);\n\n\t\tthis.ChatRenderer.ready((cls, instances) => {\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.rendererMounted(inst);\n\t\t})\n\n\t\tthis.ChatContainer.on('mount', this.containerMounted, this);\n\t\tthis.ChatContainer.on('unmount', this.containerUnmounted, this); //removeRoom, this);\n\t\tthis.ChatContainer.on('update', this.containerUpdated, this);\n\n\t\tthis.CalloutSelector.ready((cls, instances) => {\n\t\t\tconst t = this,\n\t\t\t\told_render = cls.prototype.render;\n\n\t\t\tcls.prototype.render = function() {\n\t\t\t\ttry {\n\t\t\t\t\tif ( t.CalloutStackHandler ) {\n\t\t\t\t\t\tconst React = t.site.getReact(),\n\t\t\t\t\t\t\tout = old_render.call(this),\n\t\t\t\t\t\t\tthing = out?.props?.children;\n\n\t\t\t\t\t\tif ( Array.isArray(thing) )\n\t\t\t\t\t\t\tthing.push(React.createElement(t.CalloutStackHandler));\n\n\t\t\t\t\t\treturn out;\n\t\t\t\t\t}\n\t\t\t\t} catch(err) {\n\t\t\t\t\t/* no-op */\n\t\t\t\t}\n\n\t\t\t\treturn old_render.call(this);\n\t\t\t}\n\n\t\t\tfor(const inst of instances)\n\t\t\t\tinst.forceUpdate();\n\t\t});\n\n\t\tthis.ChatContainer.ready((cls, instances) => {\n\t\t\tconst t = this,\n\t\t\t\told_render = cls.prototype.render,\n\t\t\t\told_catch = cls.prototype.componentDidCatch;\n\n\t\t\tcls.prototype.ffzRender = function() {\n\t\t\t\tif ( t.chat.context.get('chat.banners.charity') )\n\t\t\t\t\treturn old_render.call(this);\n\n\t\t\t\tconst cd = this.props.campaignData;\n\t\t\t\tthis.props.campaignData = null;\n\t\t\t\tlet result;\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = old_render.call(this);\n\t\t\t\t} catch(err) {\n\t\t\t\t\tthis.props.campaignData = cd;\n\t\t\t\t\tthrow err;\n\t\t\t\t}\n\n\t\t\t\tthis.props.campaignData = cd;\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tcls.prototype.render = function() {\n\t\t\t\ttry {\n\t\t\t\t\tif ( t.CommunityStackHandler ) {\n\t\t\t\t\t\tconst React = t.site.getReact(),\n\t\t\t\t\t\t\tout = this.ffzRender(),\n\t\t\t\t\t\t\tthing = out?.props?.children?.props?.children;\n\n\t\t\t\t\t\tif ( React && Array.isArray(thing) )\n\t\t\t\t\t\t\tthing.push(React.createElement(t.CommunityStackHandler));\n\n\t\t\t\t\t\treturn out;\n\t\t\t\t\t}\n\n\t\t\t\t} catch(err) {\n\t\t\t\t\t// No op\n\t\t\t\t}\n\n\t\t\t\treturn this.ffzRender();\n\t\t\t}\n\n\t\t\t// Try catching errors. With any luck, maybe we can\n\t\t\t// recover from the error when we re-build?\n\t\t\tcls.prototype.componentDidCatch = function(err, info) {\n\t\t\t\t// Don't log infinitely if stuff gets super screwed up.\n\t\t\t\tconst errs = this.state.ffz_errors || 0;\n\t\t\t\tif ( errs < 100 ) {\n\t\t\t\t\tthis.setState({ffz_errors: errs + 1});\n\t\t\t\t\tt.log.info('Error within Chat Container', err, info, errs);\n\t\t\t\t}\n\n\t\t\t\tif ( old_catch )\n\t\t\t\t\treturn old_catch.call(this, err, info);\n\t\t\t}\n\n\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.containerMounted(inst);\n\t\t});\n\n\t\tthis.subpump.on(':pubsub-message', event => {\n\t\t\tif ( event.prefix !== 'community-points-channel-v1' || this.disable_handling )\n\t\t\t\treturn;\n\n\t\t\tif ( event.prefix === 'pinned-chat-updates-v1' ) {\n\t\t\t\tthis.log.debug('Pinned Chat', event);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst service = this.ChatService.first,\n\t\t\t\tmessage = event.message,\n\t\t\t\tdata = message?.data?.redemption;\n\t\t\tif ( ! message || ! service || message.type !== 'reward-redeemed' || service.props.channelID != data?.channel_id )\n\t\t\t\treturn;\n\n\t\t\tif ( data.user_input )\n\t\t\t\treturn;\n\n\t\t\tconst reward = data.reward?.id && get(data.reward.id, service.props.rewardMap);\n\t\t\tif ( ! reward )\n\t\t\t\treturn;\n\n\t\t\tif ( ! this.chat.context.get('chat.filtering.blocked-types').has('ChannelPointsReward') ) {\n\t\t\t\tconst msg = {\n\t\t\t\t\tid: data.id,\n\t\t\t\t\ttype: this.chat_types.Message,\n\t\t\t\t\tffz_type: 'points',\n\t\t\t\t\tffz_reward: reward,\n\t\t\t\t\tffz_reward_highlight: isHighlightedReward(reward),\n\t\t\t\t\tmessageParts: [],\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tid: data.user.id,\n\t\t\t\t\t\tlogin: data.user.login,\n\t\t\t\t\t\tdisplayName: data.user.display_name\n\t\t\t\t\t},\n\t\t\t\t\ttimestamp: new Date(message.data.timestamp || data.redeemed_at).getTime()\n\t\t\t\t};\n\n\t\t\t\tservice.postMessageToCurrentChannel({}, msg);\n\t\t\t}\n\n\t\t\t//event.preventDefault();\n\t\t});\n\t}\n\n\n\tshouldHideCallout(type) {\n\t\tif ( ! type )\n\t\t\treturn;\n\n\t\ttype = INLINE_CALLOUT_TYPES[type] ?? type.replace(/_/g, '-');\n\n\t\tconst ctm = this.callout_types ?? CALLOUT_TYPES,\n\t\t\tblocked = this.chat.context.get('chat.filtering.blocked-callouts');\n\n\t\tif ( blocked && blocked.has(type) )\n\t\t\treturn true;\n\n\t\tif ( type === ctm.CommunityPointsRewards &&\n\t\t\t! this.chat.context.get('chat.points.show-callouts')\n\t\t)\n\t\t\treturn true;\n\n\t\tif ( type === ctm.ClipLiveNudge &&\n\t\t\t! this.chat.context.get('chat.callouts.clip')\n\t\t)\n\t\t\treturn true;\n\n\t\tif ( type === 'prime_gift_bomb' &&\n\t\t\t! this.chat.context.get('chat.community-chest.show')\n\t\t)\n\t\t\treturn true;\n\n\t\tif ( type === 'megacheer_emote_recipient' &&\n\t\t\t! t.chat.context.get('chat.bits.show-rewards')\n\t\t)\n\t\t\treturn true;\n\n\t\treturn false;\n\t}\n\n\n\tupdateCallouts() {\n\t\tthis.updatePinnedCallouts();\n\t\tthis.updateInlineCallouts();\n\t}\n\n\n\tupdatePinnedCallouts() {\n\t\tfor(const inst of this.PinnedCallout.instances)\n\t\t\tthis.onPinnedCallout(inst);\n\t}\n\n\tonPinnedCallout(inst) {\n\t\tconst props = inst.props,\n\t\t\tevent = props?.event,\n\t\t\ttype = event?.type;\n\n\t\t//console.warn('pinned-callout', type, event, inst);\n\n\t\t// Hidden callouts\n\t\tif ( this.shouldHideCallout(type) ) {\n\t\t\tif ( inst.props.pinned )\n\t\t\t\tinst.unpin();\n\t\t\telse\n\t\t\t\tinst.hide();\n\t\t}\n\n\t\t// Auto-pin resubs\n\t\tif ( type === 'share-resub' && ! props.pinned && this.chat.context.get('chat.pin-resubs') && ! inst._ffz_pinned ) {\n\t\t\tthis.log.info('Automatically pinning re-sub notice.');\n\t\t\tinst._ffz_pinned = true;\n\t\t\tinst.pin();\n\t\t}\n\n\t\t// Auto-claim drops\n\t\tif ( type === 'drop' )\n\t\t\tthis.autoClickDrop(inst);\n\t}\n\n\tupdateInlineCallouts() {\n\t\tfor(const inst of this.InlineCallout.instances)\n\t\t\tthis.onInlineCallout(inst);\n\t}\n\n\tonInlineCallout(inst) {\n\t\t// Skip hidden inline callouts.\n\t\tif ( inst.state.isHidden )\n\t\t\treturn;\n\n\t\tconst contextMenuProps = inst.props?.event?.callout?.contextMenuProps,\n\t\t\tevent = contextMenuProps?.event ?? inst.props?.event,\n\t\t\ttype = event?.type;\n\n\t\t//console.warn('inline-callout', type, event, inst);\n\n\t\t// Hidden callouts\n\t\tif ( this.shouldHideCallout(type) || this.shouldHideCallout(inst.props?.event?.trackingType) ) {\n\t\t\tinst.setState({isHidden: true});\n\t\t\treturn;\n\t\t}\n\n\t\t// Auto-pin resubs\n\t\tif ( type === 'share-resub' && this.chat.context.get('chat.pin-resubs') && ! inst._ffz_pinned ) {\n\t\t\tconst onPin = contextMenuProps?.onPin;\n\t\t\tif ( onPin ) {\n\t\t\t\tthis.log.info('Automatically pinning re-sub notice.');\n\t\t\t\tinst._ffz_pinned = true;\n\t\t\t\tif ( inst.hideOnContextMenuAction )\n\t\t\t\t\tinst.hideOnContextMenuAction(onPin)();\n\t\t\t\telse\n\t\t\t\t\tonPin();\n\t\t\t}\n\t\t}\n\n\t\t// Auto-claim drops\n\t\tif ( type === 'drop' )\n\t\t\tthis.autoClickDrop(inst);\n\t}\n\n\n\tautoClickDrop(inst) {\n\t\tconst event = inst.props?.event?.callout?.contextMenuProps?.event ?? inst.props?.event,\n\t\t\ttype = event?.type;\n\n\t\tif ( type !== 'drop' || inst._ffz_clicking || ! this.chat.context.get(\"chat.drops.auto-rewards\") )\n\t\t\treturn;\n\n\t\t//console.warn('autoClickDrop', event, inst);\n\t\tinst._ffz_clicking = true;\n\n\t\t// Wait for the button to be added to the DOM.\n\t\tconst waiter = this.resolve('site').awaitElement(\n\t\t\t'button[data-a-target=\"chat-private-callout__primary-button\"]',\n\t\t\tthis.fine.getHostNode(inst),\n\t\t\t10000\n\t\t);\n\n\t\twaiter.then(btn => {\n\t\t\tinst._ffz_clicking = false;\n\n\t\t\t// Check AGAIN because time has passed.\n\t\t\tconst event = inst.props?.event?.callout?.contextMenuProps?.event ?? inst.props?.event,\n\t\t\t\ttype = event?.type;\n\n\t\t\tif ( type !== 'drop' || ! this.chat.context.get(\"chat.drops.auto-rewards\") )\n\t\t\t\treturn;\n\n\t\t\tbtn.click();\n\n\t\t}).catch(() => {\n\t\t\tinst._ffz_clicking = false;\n\t\t});\n\t}\n\n\n\twrapRaidController(inst) {\n\t\tif ( inst._ffz_wrapped )\n\t\t\treturn this.noAutoRaids(inst);\n\n\t\tinst._ffz_wrapped = true;\n\n\t\tconst t = this,\n\t\t\told_handle_join = inst.handleJoinRaid;\n\n\t\tinst.handleJoinRaid = function(event, ...args) {\n\t\t\tconst raid_id = inst.props && inst.props.raid && inst.props.raid.id;\n\t\t\tif ( event && event.type && raid_id )\n\t\t\t\tt.joined_raids.add(raid_id);\n\n\t\t\treturn old_handle_join.call(this, event, ...args);\n\t\t}\n\n\t\tthis.noAutoRaids(inst);\n\t}\n\n\tnoAutoRaids(inst) {\n\t\tif ( inst._ffz_no_raid )\n\t\t\treturn;\n\n\t\tinst._ffz_no_raid = setTimeout(() => {\n\t\t\tinst._ffz_no_raid = null;\n\n\t\t\tif ( inst.props && inst.props.raid && ! inst.isRaidCreator && inst.hasJoinedCurrentRaid ) {\n\t\t\t\tconst id = inst.props.raid.id;\n\t\t\t\tif ( this.joined_raids.has(id) )\n\t\t\t\t\treturn;\n\n\t\t\t\tlet leave = this.settings.get('channel.raids.no-autojoin');\n\n\t\t\t\tif ( ! leave ) {\n\t\t\t\t\tconst blocked = this.settings.get('__filter:channel.raids.blocked-channels');\n\t\t\t\t\tif ( blocked && ((inst.props.raid.targetLogin && blocked.test(inst.props.raid.targetLogin)) || (inst.props.raid.targetDisplayName && blocked.test(inst.props.raid.targetDisplayName))) )\n\t\t\t\t\t\tleave = true;\n\n\t\t\t\t\tif ( ! leave )\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.log.info('Automatically leaving raid:', id);\n\t\t\t\tinst.handleLeaveRaid();\n\t\t\t}\n\t\t});\n\t}\n\n\ttoggleEmoteJail() {\n\t\tconst bigger = this.chat.context.get('chat.emotes.2x'),\n\t\t\tenabled = this.chat.context.get('chat.emotes.limit-size');\n\n\t\tthis.css_tweaks.toggle('big-emote-jail', enabled && ! bigger);\n\t\tthis.css_tweaks.toggle('bigger-emote-jail', enabled && bigger);\n\t}\n\n\tcleanHighlights() {\n\t\tconst types = {\n\t\t\t'community_sub_gift': this.chat.context.get('chat.subs.gift-banner'),\n\t\t\t'megacheer': this.chat.context.get('chat.bits.show'),\n\t\t\t'hype_train': this.chat.context.get('chat.banners.hype-train'),\n\t\t\t'prediction': this.chat.context.get('chat.banners.prediction'),\n\t\t\t'poll': this.chat.context.get('chat.banners.polls'),\n\t\t\t'pinned_chat': this.chat.context.get('chat.banners.pinned-message'),\n\t\t\t'mw-drop-available': this.chat.context.get('chat.banners.drops'),\n\t\t\t'shared_chat': this.chat.context.get('chat.banners.shared-chat')\n\t\t};\n\n\t\tconst highlights = this.community_stack?.highlights;\n\t\tif ( ! Array.isArray(highlights) )\n\t\t\treturn;\n\n\t\tfor(const entry of highlights) {\n\t\t\tif ( ! entry || ! entry.event || ! entry.id )\n\t\t\t\tcontinue;\n\n\t\t\tconst type = entry.event.type;\n\t\t\tif ( type && has(types, type) && ! types[type] ) {\n\t\t\t\t// Attempt to allow Golden Kappa hype trains?\n\t\t\t\t//if ( type === 'hype_train' && entry.event.typeDetails === '0' && this.chat.context.get('chat.banners.kappa-train') )\n\t\t\t\t//\tcontinue;\n\n\t\t\t\tthis.log.info('Removing community highlight: ', type, '#', entry.id);\n\t\t\t\tthis.community_dispatch({\n\t\t\t\t\ttype: 'remove-highlight',\n\t\t\t\t\tid: entry.id\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (type === 'mw-drop-available' &&\n\t\t\t\tentry.event.detailsURL === 'https://blog.twitch.tv/2024/07/26/sub-and-get-apple-tv/' &&\n\t\t\t\tthis.chat.context.get('chat.banners.hide-appleplus')\n\t\t\t) {\n\t\t\t\tthis.log.info('Removing community highlight: ', type, '#', entry.id);\n\t\t\t\tthis.community_dispatch({\n\t\t\t\t\ttype: 'remove-highlight',\n\t\t\t\t\tid: entry.id\n\t\t\t\t});\n\t\t\t}\n\n\t\t}\n\t}\n\n\tcleanCallouts() {\n\t\tconst stack = this.callout_stack;\n\t\tif (stack?.pinnedCallout?.event?.type && this.shouldHideCallout(stack.pinnedCallout.event.type))\n\t\t\tstack.unpinCallout();\n\n\t\tif (stack?.callouts?.[0]?.event?.type && this.shouldHideCallout(stack.callouts[0].event.type))\n\t\t\tstack.clearCalloutType(stack.callouts[0].event.type);\n\t}\n\n\tdefineClasses() {\n\t\tif ( this.CommunityStackHandler && this.CalloutStackHandler )\n\t\t\treturn true;\n\n\t\tconst t = this,\n\t\t\tReact = this.site.getReact(),\n\t\t\tcreateElement = React?.createElement,\n\t\t\tStackMod = this.web_munch.getModule('highlightstack'),\n\t\t\tCalloutMod = this.web_munch.getModule('calloutstack');\n\n\t\tif ( ! createElement )\n\t\t\treturn false;\n\n\t\tif ( ! this.CalloutStackHandler && CalloutMod ) {\n\t\t\tthis.CalloutStackHandler = function() {\n\t\t\t\tconst stack = React.useContext(CalloutMod.stack);\n\n\t\t\t\tt.callout_stack = stack;\n\t\t\t\tt.cleanCallouts();\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tthis.CalloutSelector.forceUpdate();\n\t\t}\n\n\t\tif ( ! this.CommunityStackHandler && StackMod ) {\n\t\t\tthis.CommunityStackHandler = function() {\n\t\t\t\tconst stack = React.useContext(StackMod.stack),\n\t\t\t\t\tdispatch = React.useContext(StackMod.dispatch);\n\n\t\t\t\tt.community_stack = stack;\n\t\t\t\tt.community_dispatch = dispatch;\n\n\t\t\t\tt.cleanHighlights();\n\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tthis.ChatContainer.forceUpdate();\n\t\t}\n\n\t\treturn true;\n\t}\n\n\n\tupdateChatState(state) {\n\t\tconst old_state = this.chat.context.get('context.chat_state') || {};\n\t\tif ( deep_equals(state, old_state) )\n\t\t\treturn;\n\n\t\tthis.chat.context.updateContext({\n\t\t\tchat_state: state\n\t\t});\n\n\t\tthis.input.updateInput();\n\t}\n\n\n\ttryUpdateBadges() {\n\t\tif ( !this._badge_timer )\n\t\t\tthis._badge_timer = setTimeout(() => this._tryUpdateBadges(), 0);\n\t}\n\n\t_tryUpdateBadges() {\n\t\tif ( this._badge_timer )\n\t\t\tclearTimeout(this._badge_timer);\n\t\tthis._badge_timer = null;\n\n\t\tthis.log.info('Trying to update badge data from the chat container.');\n\t\tconst inst = this.ChatContainer.first;\n\t\tif ( inst )\n\t\t\tthis.containerUpdated(inst, inst.props);\n\t}\n\n\n\twrapChatBuffer(cls) {\n\t\tif ( cls.prototype._ffz_was_here )\n\t\t\treturn;\n\n\t\tconst t = this,\n\t\t\told_clear = cls.prototype.clear,\n\t\t\told_flush = cls.prototype.flushRawMessages,\n\t\t\told_mount = cls.prototype.componentDidMount;\n\n\t\tcls.prototype._ffzInstall = function() {\n\t\t\tif ( this._ffz_installed )\n\t\t\t\treturn;\n\n\t\t\tthis._ffz_installed = true;\n\n\t\t\tconst inst = this,\n\t\t\t\told_handle = inst.handleMessage,\n\t\t\t\told_set = inst.props.setMessageBufferAPI;\n\n\t\t\tinst.props.setMessageBufferAPI = function(api) {\n\t\t\t\tif ( api )\n\t\t\t\t\tapi._ffz_inst = inst;\n\n\t\t\t\treturn old_set(api);\n\t\t\t}\n\n\t\t\tinst.handleMessage = function(msg) {\n\t\t\t\tif ( msg ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst types = t.chat_types || {},\n\t\t\t\t\t\t\tmod_types = t.mod_types || {},\n\t\t\t\t\t\t\tblocked_types = t.chat.context.get('chat.filtering.blocked-types');\n\n\t\t\t\t\t\tif ( blocked_types.has(types[msg.type]) )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( msg.type === types.ChannelPointsReward && ! isMessageEffect(msg.reward) )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( msg.type === types.RewardGift && ! t.chat.context.get('chat.bits.show-rewards') )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( msg.type === types.Message ) {\n\t\t\t\t\t\t\tconst m = t.chat.standardizeMessage(msg),\n\t\t\t\t\t\t\t\tcont = inst._ffz_connector ?? inst.ffzGetConnector();\n\n\t\t\t\t\t\t\tlet room_id = m.roomID = m.roomID ? m.roomID : cont?.props?.channelID;\n\t\t\t\t\t\t\tlet room = m.roomLogin = m.roomLogin ? m.roomLogin : m.channel ? m.channel.slice(1) : cont?.props?.channelLogin;\n\n\t\t\t\t\t\t\tif ( ! room && room_id ) {\n\t\t\t\t\t\t\t\tconst r = t.chat.getRoom(room_id, null, true);\n\t\t\t\t\t\t\t\tif ( r && r.login )\n\t\t\t\t\t\t\t\t\troom = m.roomLogin = r.login;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( ! room_id && room ) {\n\t\t\t\t\t\t\t\tconst r = t.chat.getRoom(null, room, true);\n\t\t\t\t\t\t\t\tif ( r && r.id )\n\t\t\t\t\t\t\t\t\troom_id = m.roomID = r.id;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst u = t.site.getUser();\n\t\t\t\t\t\t\tif ( u && cont ) {\n\t\t\t\t\t\t\t\tu.moderator = cont.props.isCurrentUserModerator;\n\t\t\t\t\t\t\t\tu.staff = cont.props.isStaff;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tm.ffz_tokens = m.ffz_tokens || t.chat.tokenizeMessage(m, u, true);\n\t\t\t\t\t\t\tif ( m.ffz_removed )\n\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\tif ( t.hasListeners('chat:receive-message') ) {\n\t\t\t\t\t\t\t\tconst event = t.makeEvent({\n\t\t\t\t\t\t\t\t\tmessage: m,\n\t\t\t\t\t\t\t\t\tinst,\n\t\t\t\t\t\t\t\t\tchannel: room,\n\t\t\t\t\t\t\t\t\tchannelID: room_id\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tt.emit('chat:receive-message', event);\n\t\t\t\t\t\t\t\tif ( event.defaultPrevented || m.ffz_removed )\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} /*else if ( msg.type === types.ModerationAction ) {\n\t\t\t\t\t\t\tt.emit('chat:mod-user', msg.moderationActionType, )\n\n\t\t\t\t\t\t} */ else if ( msg.type === types.Moderation ) {\n\t\t\t\t\t\t\tt.emit('chat:mod-user', msg.moderationType, msg.userLogin, msg.targetMessageID, msg);\n\n\t\t\t\t\t\t\t// Special handling\n\t\t\t\t\t\t\tif ( ! inst.props.isCurrentUserModerator ) {\n\t\t\t\t\t\t\t\tconst type = msg.moderationType,\n\t\t\t\t\t\t\t\t\ttarget = msg.userLogin;\n\n\t\t\t\t\t\t\t\t// Whee~\n\t\t\t\t\t\t\t\tlet mat;\n\t\t\t\t\t\t\t\tif ( type === mod_types.Ban )\n\t\t\t\t\t\t\t\t\tmat = 'ban';\n\t\t\t\t\t\t\t\telse if ( type === mod_types.Timeout )\n\t\t\t\t\t\t\t\t\tmat = 'timeout';\n\t\t\t\t\t\t\t\telse if ( type === mod_types.Delete )\n\t\t\t\t\t\t\t\t\tmat = 'delete';\n\n\t\t\t\t\t\t\t\tif ( mat )\n\t\t\t\t\t\t\t\t\tmsg.moderationActionType = mat;\n\n\t\t\t\t\t\t\t\t// Handle moderation events ourself if it's not\n\t\t\t\t\t\t\t\t// a delete, so that we can pass the action info.\n\t\t\t\t\t\t\t\tif ( ! inst.moderatedUsers.has(target) && type !== mod_types.Delete ) {\n\t\t\t\t\t\t\t\t\tinst.moderateBuffers(\n\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\tinst.buffer,\n\t\t\t\t\t\t\t\t\t\t\tinst.delayedMessageBuffer.map(e => e.event)\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\t\t\tmsg\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\tinst.delayedMessageBuffer.push({\n\t\t\t\t\t\t\t\t\t\tevent: msg,\n\t\t\t\t\t\t\t\t\t\ttime: Date.now(),\n\t\t\t\t\t\t\t\t\t\tshouldDelay: false\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} /*else if ( msg.type === types.ModerationAction && false && inst.markUserEventDeleted && inst.unsetModeratedUser ) {\n\t\t\t\t\t\t\tif ( !((! msg.level || ! msg.level.length) && msg.targetUserLogin && msg.targetUserLogin === inst.props.currentUserLogin) ) {\n\t\t\t\t\t\t\t\t//t.log.info('Moderation Action', msg);\n\t\t\t\t\t\t\t\tif ( ! inst.props.isCurrentUserModerator )\n\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\tconst mod_action = msg.moderationActionType;\n\t\t\t\t\t\t\t\tif ( mod_action === 'ban' || mod_action === 'timeout' || mod_action === 'delete' ) {\n\t\t\t\t\t\t\t\t\tconst user = msg.targetUserLogin;\n\t\t\t\t\t\t\t\t\tif ( inst.moderatedUsers.has(user) )\n\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\tconst do_remove = t.chat.context.get('chat.filtering.remove-deleted') === 3;\n\t\t\t\t\t\t\t\t\tif ( do_remove ) {\n\t\t\t\t\t\t\t\t\t\tconst len = inst.buffer.length,\n\t\t\t\t\t\t\t\t\t\t\ttarget_id = msg.messageID;\n\t\t\t\t\t\t\t\t\t\tinst.buffer = inst.buffer.filter(m =>\n\t\t\t\t\t\t\t\t\t\t\tm.type !== types.Message || ! m.user || m.user.userLogin !== user ||\n\t\t\t\t\t\t\t\t\t\t\t(target_id && m.id !== target_id)\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tif ( len !== inst.buffer.length && ! inst.props.isBackground )\n\t\t\t\t\t\t\t\t\t\t\tinst.notifySubscribers();\n\n\t\t\t\t\t\t\t\t\t\tinst.moderateBuffers([\n\t\t\t\t\t\t\t\t\t\t\tinst.delayedMessageBuffer.map(e => e.event)\n\t\t\t\t\t\t\t\t\t\t], user, msg);\n\n\t\t\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\t\t\tinst.moderateBuffers([\n\t\t\t\t\t\t\t\t\t\t\tinst.buffer,\n\t\t\t\t\t\t\t\t\t\t\tinst.delayedMessageBuffer.map(e => e.event)\n\t\t\t\t\t\t\t\t\t\t], user, msg);\n\n\t\t\t\t\t\t\t\t\tinst.delayedMessageBuffer.push({\n\t\t\t\t\t\t\t\t\t\tevent: msg,\n\t\t\t\t\t\t\t\t\t\ttime: Date.now(),\n\t\t\t\t\t\t\t\t\t\tshouldDelay: false\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if ( msg.type === types.Moderation && false && inst.unsetModeratedUser ) {\n\t\t\t\t\t\t\t//t.log.info('Moderation', msg);\n\t\t\t\t\t\t\tif ( inst.props.isCurrentUserModerator )\n\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\tconst user = msg.userLogin;\n\t\t\t\t\t\t\tif ( inst.moderatedUsers.has(user) )\n\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\tconst mod_action = msg.moderationType;\n\t\t\t\t\t\t\tlet new_action;\n\t\t\t\t\t\t\tif ( mod_action === mod_types.Ban )\n\t\t\t\t\t\t\t\tnew_action = 'ban';\n\t\t\t\t\t\t\telse if ( mod_action === mod_types.Delete )\n\t\t\t\t\t\t\t\tnew_action = 'delete';\n\t\t\t\t\t\t\telse if ( mod_action === mod_types.Unban )\n\t\t\t\t\t\t\t\tnew_action = 'unban';\n\t\t\t\t\t\t\telse if ( mod_action === mod_types.Timeout )\n\t\t\t\t\t\t\t\tnew_action = 'timeout';\n\n\t\t\t\t\t\t\tif ( new_action )\n\t\t\t\t\t\t\t\tmsg.moderationActionType = new_action;\n\n\t\t\t\t\t\t\tconst do_remove = t.chat.context.get('chat.filtering.remove-deleted') === 3;\n\t\t\t\t\t\t\tif ( do_remove ) {\n\t\t\t\t\t\t\t\tconst len = inst.buffer.length,\n\t\t\t\t\t\t\t\t\ttarget_id = msg.targetMessageID;\n\t\t\t\t\t\t\t\tinst.buffer = inst.buffer.filter(m =>\n\t\t\t\t\t\t\t\t\tm.type !== types.Message || ! m.user || m.user.userLogin !== user ||\n\t\t\t\t\t\t\t\t\t(target_id && m.id !== target_id)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif ( len !== inst.buffer.length && ! inst.props.isBackground )\n\t\t\t\t\t\t\t\t\tinst.notifySubscribers();\n\n\t\t\t\t\t\t\t\tinst.moderateBuffers([\n\t\t\t\t\t\t\t\t\tinst.delayedMessageBuffer.map(e => e.event)\n\t\t\t\t\t\t\t\t], user, msg);\n\n\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\tinst.moderateBuffers([\n\t\t\t\t\t\t\t\t\tinst.buffer,\n\t\t\t\t\t\t\t\t\tinst.delayedMessageBuffer.map(e => e.event)\n\t\t\t\t\t\t\t\t], user, msg);\n\n\t\t\t\t\t\t\tinst.delayedMessageBuffer.push({\n\t\t\t\t\t\t\t\tevent: msg,\n\t\t\t\t\t\t\t\ttime: Date.now(),\n\t\t\t\t\t\t\t\tshouldDelay: false\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t} */ else if ( msg.type === types.Clear ) {\n\t\t\t\t\t\t\tif ( t.chat.context.get('chat.filtering.ignore-clear') )\n\t\t\t\t\t\t\t\tmsg = {\n\t\t\t\t\t\t\t\t\ttype: types.Info,\n\t\t\t\t\t\t\t\t\tmessage: t.i18n.t('chat.ignore-clear', 'An attempt by a moderator to clear chat was ignored.')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tt.emit('chat:clear-chat', msg);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tt.log.error('Error processing chat event.', err);\n\t\t\t\t\t\tt.log.capture(err, {extra: {msg}});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn old_handle.call(inst, msg);\n\t\t\t}\n\n\t\t\t/*inst.ffzModerateBuffer = function(buffers, event) {\n\t\t\t\tconst mod_types = t.mod_types || {},\n\t\t\t\t\tctypes = t.chat_types || {},\n\t\t\t\t\tmod_type = event.moderationActionType,\n\t\t\t\t\tuser_login = event.targetUserLogin || event.userLogin,\n\t\t\t\t\tmod_login = event.createdByLogin,\n\t\t\t\t\ttarget_id = event.targetMessageID || event.messageID;\n\n\t\t\t\tlet deleted_count = 0, last_msg;\n\n\t\t\t\tconst is_delete = mod_type === mod_types.Delete,\n\t\t\t\t\tupdater = m => {\n\t\t\t\t\t\tif ( m.event )\n\t\t\t\t\t\t\tm = m.event;\n\n\t\t\t\t\t\t/*if ( m.message && m.type in [ctypes.ChannelPointsReward, ctypes.Resubscription, ctypes.Ritual] )\n\t\t\t\t\t\t\tm = m.message;/\n\n\t\t\t\t\t\tif ( m.reply ) {\n\t\t\t\t\t\t\tif ( target_id ? target_id === m.reply.parentMsgId : (user_login && user_login === m.reply.parentUserLogin) )\n\t\t\t\t\t\t\t\tm.reply = {\n\t\t\t\t\t\t\t\t\t...m.reply,\n\t\t\t\t\t\t\t\t\tparentDeleted: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( ! user_login || ! m.user || user_login !== m.user.userLogin || ! m.messageParts )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( ! m || m.deleted )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( target_id && m.id !== target_id )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tm.deleted = true;\n\t\t\t\t\t\tm.banned = mod_type === mod_types.Ban;\n\n\t\t\t\t\t\tlast_msg = m;\n\t\t\t\t\t\tdeleted_count++;\n\n\t\t\t\t\t\tm.modLogin = mod_login;\n\t\t\t\t\t\tm.modActionType = mod_type;\n\t\t\t\t\t\tm.duration = event.duration;\n\t\t\t\t\t};\n\n\t\t\t\tfor(const buffer of buffers)\n\t\t\t\t\tif ( buffer.some(updater) )\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t//t.log.info('Moderate Buffer', mod_type, user_login, mod_login, target_id, deleted_count, last_msg);\n\n\t\t\t\tif ( last_msg )\n\t\t\t\t\tlast_msg.deletedCount = deleted_count;\n\t\t\t}*/\n\n\t\t\tinst.setPaused = function(paused) {\n\t\t\t\tif ( inst.paused === paused )\n\t\t\t\t\treturn;\n\n\t\t\t\tinst.paused = paused;\n\t\t\t\tif ( ! paused ) {\n\t\t\t\t\tinst.slidingWindowEnd = Math.min(inst.buffer.length, t.chat.context.get('chat.scrollback-length'));\n\t\t\t\t\tif ( ! inst.props.isBackground )\n\t\t\t\t\t\tinst.notifySubscribers();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinst.loadNewer = function() {\n\t\t\t\tif ( ! inst.hasNewerLeft() )\n\t\t\t\t\treturn;\n\n\t\t\t\tconst end = Math.min(inst.buffer.length, inst.slidingWindowEnd + 40),\n\t\t\t\t\tstart = Math.max(0, end - t.chat.context.get('chat.scrollback-length'));\n\n\t\t\t\tinst.clear(inst.buffer.length - start);\n\t\t\t\tinst.slidingWindowEnd = end - start;\n\t\t\t\tif ( ! inst.props.isBackground )\n\t\t\t\t\tinst.notifySubscribers();\n\t\t\t}\n\n\t\t\tinst.loadNewest = function() {\n\t\t\t\tif ( ! inst.hasNewerLeft() )\n\t\t\t\t\treturn;\n\n\t\t\t\tconst max_size = t.chat.context.get('chat.scrollback-length');\n\n\t\t\t\tinst.clear(max_size);\n\t\t\t\tinst.slidingWindowEnd = Math.min(max_size, inst.buffer.length);\n\t\t\t\tif ( ! inst.props.isBackground )\n\t\t\t\t\tinst.notifySubscribers();\n\t\t\t}\n\n\t\t\tinst.getMessages = function() {\n\t\t\t\treturn inst.buffer.slice(0, inst.slidingWindowEnd + (inst.ffz_extra || 0));\n\t\t\t}\n\t\t}\n\n\t\tcls.prototype.componentDidMount = function() {\n\t\t\ttry {\n\t\t\t\tthis._ffzInstall();\n\t\t\t} catch(err) {\n\t\t\t\tt.log.error('Error installing FFZ features onto chat buffer.', err);\n\t\t\t}\n\n\t\t\treturn old_mount.call(this);\n\t\t}\n\n\t\tcls.prototype.clear = function(count) {\n\t\t\ttry {\n\t\t\t\tif ( count == null )\n\t\t\t\t\tcount = 0;\n\n\t\t\t\tconst max_size = t.chat.context.get('chat.scrollback-length');\n\t\t\t\tif ( ! this.isPaused() && count > max_size )\n\t\t\t\t\tcount = max_size;\n\n\t\t\t\tif ( count <= 0 ) {\n\t\t\t\t\tthis.ffz_extra = 0;\n\t\t\t\t\tthis.buffer = [];\n\t\t\t\t\tthis.delayedMessageBuffer = [];\n\t\t\t\t\tthis.paused = false;\n\n\t\t\t\t} else {\n\t\t\t\t\tconst buffer = this.buffer,\n\t\t\t\t\t\tct = t.chat_types || CHAT_TYPES,\n\t\t\t\t\t\ttarget = buffer.length - count;\n\n\t\t\t\t\tif ( target > 0 ) {\n\t\t\t\t\t\tlet removed = 0, last;\n\t\t\t\t\t\tfor(let i=0; i < target; i++)\n\t\t\t\t\t\t\tif ( buffer[i] && ! NULL_TYPES.includes(ct[buffer[i].type]) ) {\n\t\t\t\t\t\t\t\tremoved++;\n\t\t\t\t\t\t\t\tlast = i;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// When we remove less then expected, we want to keep track\n\t\t\t\t\t\t// of that so we can return the extra messages from getMessages.\n\t\t\t\t\t\tthis.buffer = buffer.slice(removed % 2 !== 0 ? Math.max(target - 4, last) : target);\n\t\t\t\t\t\tthis.ffz_extra = buffer.length - count;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.ffz_extra = 0;\n\t\t\t\t\t\tthis.buffer = this.buffer.slice(0);\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.paused && this.buffer.length >= 900 )\n\t\t\t\t\t\tthis.setPaused(false);\n\t\t\t\t}\n\t\t\t} catch(err) {\n\t\t\t\tt.log.error('Error running clear', err);\n\t\t\t\treturn old_clear.call(this, count);\n\t\t\t}\n\t\t}\n\n\t\tcls.prototype.ffzGetConnector = function() {\n\t\t\tif ( this._ffz_connector )\n\t\t\t\treturn this._ffz_connector;\n\n\t\t\tconst now = Date.now();\n\t\t\tif ( now - (this._ffz_connect_tried || 0) > 5000 ) {\n\t\t\t\tthis._ffz_connect_tried = now;\n\t\t\t\tconst thing = t.ChatBufferConnector.first;\n\t\t\t\tif ( thing?.props?.messageBufferAPI?._ffz_inst === this )\n\t\t\t\t\treturn this._ffz_connector = thing;\n\t\t\t}\n\t\t}\n\n\t\tcls.prototype.flushRawMessages = function() {\n\t\t\ttry {\n\t\t\t\tconst out = [],\n\t\t\t\t\tct = t.chat_types || CHAT_TYPES,\n\t\t\t\t\tnow = Date.now(),\n\t\t\t\t\traw_delay = t.chat.context.get('chat.delay'),\n\t\t\t\t\tdelay = raw_delay === -1 ? this.delayDuration : raw_delay,\n\t\t\t\t\tfirst = now - delay,\n\t\t\t\t\tsee_deleted = this.shouldSeeBlockedAndDeletedMessages || this.props && this.props.shouldSeeBlockedAndDeletedMessages,\n\t\t\t\t\thas_newer = this.hasNewerLeft(),\n\t\t\t\t\tpaused = this.isPaused(),\n\t\t\t\t\tmax_size = t.chat.context.get('chat.scrollback-length'),\n\t\t\t\t\tdo_remove = t.chat.context.get('chat.filtering.remove-deleted'),\n\n\t\t\t\t\twant_event = t.hasListeners('chat:buffer-message');\n\n\t\t\t\tlet added = 0,\n\t\t\t\t\tbuffered = this.slidingWindowEnd,\n\t\t\t\t\tchanged = false,\n\t\t\t\t\tevent;\n\n\t\t\t\tfor(const msg of this.delayedMessageBuffer) {\n\t\t\t\t\tif ( msg.time <= first || ! msg.shouldDelay ) {\n\t\t\t\t\t\tif ( do_remove !== 0 && (do_remove > 1 || ! see_deleted) && this.isDeletable(msg.event) && msg.event.deleted )\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tif ( want_event ) {\n\t\t\t\t\t\t\tif ( ! event ) {\n\t\t\t\t\t\t\t\tevent = t.makeEvent({\n\t\t\t\t\t\t\t\t\tinst: this,\n\t\t\t\t\t\t\t\t\tchannel: undefined,\n\t\t\t\t\t\t\t\t\tchannelID: undefined,\n\t\t\t\t\t\t\t\t\tmessage: undefined\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tconst cont = this._ffz_connector ?? this.ffzGetConnector(),\n\t\t\t\t\t\t\t\t\troom_id = cont && cont.props.channelID;\n\n\t\t\t\t\t\t\t\tevent.channelID = room_id;\n\n\t\t\t\t\t\t\t\tif ( room_id ) {\n\t\t\t\t\t\t\t\t\tconst r = t.chat.getRoom(room_id, null, true);\n\t\t\t\t\t\t\t\t\tif ( r && r.login )\n\t\t\t\t\t\t\t\t\t\tevent.channel = r.login;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\tevent._reset();\n\n\t\t\t\t\t\t\tevent.message = msg.event;\n\t\t\t\t\t\t\tt.emit('chat:buffer-message', event);\n\t\t\t\t\t\t\tif ( event.defaultPrevented || msg.event.ffz_removed )\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst last = this.buffer[this.buffer.length - 1],\n\t\t\t\t\t\t\ttype = last?.type;\n\n\t\t\t\t\t\tif ( !(\n\t\t\t\t\t\t\t! this.props.isLoadingHistoricalMessages &&\n\t\t\t\t\t\t\t\t! this.props.historicalMessages ||\n\t\t\t\t\t\t\t\ttype !== ct.Connected ||\n\t\t\t\t\t\t\t\tmsg.event.type === ct.Connected ||\n\t\t\t\t\t\t\t\tthis.buffer.find(e => e.type === ct.LiveMessageSeparator)\n\t\t\t\t\t\t) )\n\t\t\t\t\t\t\tthis.buffer.push({\n\t\t\t\t\t\t\t\ttype: ct.LiveMessageSeparator,\n\t\t\t\t\t\t\t\tid: 'live-message-separator'\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t/*if ( type === ct.Connected ) {\n\t\t\t\t\t\t\tconst non_null = this.buffer.filter(x => x && ct[x.type] && ! NULL_TYPES.includes(ct[x.type]));\n\t\t\t\t\t\t\tif ( non_null.length > 1 )\n\t\t\t\t\t\t\t\tthis.buffer.push({\n\t\t\t\t\t\t\t\t\ttype: ct.LiveMessageSeparator,\n\t\t\t\t\t\t\t\t\tid: 'live-message-separator'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}*/\n\n\t\t\t\t\t\tthis.buffer.push(msg.event);\n\t\t\t\t\t\tchanged = true;\n\n\t\t\t\t\t\tif ( ! this.paused ) {\n\t\t\t\t\t\t\tif ( this.buffer.length > max_size )\n\t\t\t\t\t\t\t\tadded++;\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tbuffered++;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else\n\t\t\t\t\t\tout.push(msg);\n\t\t\t\t}\n\n\t\t\t\tthis.delayedMessageBuffer = out;\n\t\t\t\tif ( changed ) {\n\t\t\t\t\tthis.clear(Math.min(900, this.buffer.length - added));\n\t\t\t\t\tif ( !(added === 0 && buffered === this.slidingWindowEnd && has_newer === this.hasNewerLeft() && paused === this.isPaused()) ) {\n\t\t\t\t\t\tthis.slidingWindowEnd = buffered;\n\t\t\t\t\t\tif ( ! this.props.isBackground )\n\t\t\t\t\t\t\tthis.notifySubscribers();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( this.flushHighlightsBuffer )\n\t\t\t\t\tthis.flushHighlightsBuffer();\n\n\t\t\t} catch(err) {\n\t\t\t\tt.log.error('Error running flush.', err);\n\t\t\t\treturn old_flush.call(this);\n\t\t\t}\n\t\t}\n\t}\n\n\n\taddNotice(room, message) {\n\t\tif ( ! room )\n\t\t\treturn false;\n\n\t\tif ( room.startsWith('#') )\n\t\t\troom = room.slice(1);\n\n\t\troom = room.toLowerCase();\n\n\t\tfor(const inst of this.ChatService.instances) {\n\t\t\tif ( room === '*' || inst.props.channelLogin.toLowerCase() === room ) {\n\t\t\t\tif ( typeof message === 'string' )\n\t\t\t\t\tinst.addMessage({\n\t\t\t\t\t\ttype: (this.chat_types ?? CHAT_TYPES).Notice,\n\t\t\t\t\t\tmessage\n\t\t\t\t\t});\n\t\t\t\telse {\n\t\t\t\t\tconst props = inst.props,\n\t\t\t\t\t\tlogin = props.channelLogin,\n\t\t\t\t\t\tid = props.channelID;\n\n\t\t\t\t\tif ( message.markdown ) {\n\t\t\t\t\t\tconst md = getMD();\n\t\t\t\t\t\tif ( ! md )\n\t\t\t\t\t\t\tawaitMD();\n\t\t\t\t\t}\n\n\t\t\t\t\tinst.addMessage({\n\t\t\t\t\t\ttype: (this.chat_types ?? CHAT_TYPES).Message,\n\t\t\t\t\t\tchannel: `#${login}`,\n\t\t\t\t\t\troomID: id,\n\t\t\t\t\t\troomLogin: login,\n\t\t\t\t\t\tid: `ffz_notice_${generateUUID()}`,\n\t\t\t\t\t\tffz_type: 'notice',\n\t\t\t\t\t\tffz_no_actions: true,\n\t\t\t\t\t\tffz_data: message,\n\t\t\t\t\t\tmessage: null,\n\t\t\t\t\t\tmessageParts: [],\n\t\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\tuserID: id,\n\t\t\t\t\t\t\tuserLogin: login\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\n\tsendMessage(room, message) {\n\t\tconst service = this.ChatService.first;\n\n\t\tif ( ! service || ! room )\n\t\t\treturn null;\n\n\t\tif ( room.startsWith('#') )\n\t\t\troom = room.slice(1);\n\n\t\tif ( room.toLowerCase() !== service.props.channelLogin.toLowerCase() )\n\t\t\treturn service.client.sendCommand(room, message);\n\n\t\tservice.sendMessage(message);\n\t}\n\n\n\tscheduleMystery(mystery) { // eslint-disable-line class-methods-use-this\n\t\tif ( ! mystery.line )\n\t\t\treturn;\n\n\t\tif ( mystery._timer )\n\t\t\treturn;\n\n\t\tmystery._timer = setTimeout(() => requestAnimationFrame(() => {\n\t\t\tmystery._timer = null;\n\t\t\tif ( mystery.line )\n\t\t\t\tmystery.line.forceUpdate();\n\t\t}), 250);\n\t}\n\n\n\twrapChatService(cls) {\n\t\tconst t = this,\n\t\t\told_mount = cls.prototype.componentDidMount,\n\t\t\told_handler = cls.prototype.addEventListeners;\n\n\t\tcls.prototype._ffz_was_here = true;\n\n\t\tcls.prototype._ffzInstall = function() {\n\t\t\tif ( this._ffz_installed )\n\t\t\t\treturn;\n\n\t\t\tthis._ffz_installed = true;\n\n\t\t\tconst inst = this,\n\t\t\t\told_send = this.sendMessage,\n\t\t\t\taddMessage = (...args) => inst.addMessage(...args),\n\t\t\t\tsendMessage = (msg, extra) => inst.sendMessage(msg, extra);\n\n\t\t\tinst.sendMessage = function(msg, extra) {\n\t\t\t\tmsg = msg.replace(/\\s+/g, ' ');\n\n\t\t\t\tif ( msg.startsWith('/ffz:') ) {\n\t\t\t\t\tmsg = msg.slice(5).trim();\n\t\t\t\t\tconst idx = msg.indexOf(' ');\n\t\t\t\t\tlet subcmd;\n\t\t\t\t\tif ( idx === -1 ) {\n\t\t\t\t\t\tsubcmd = msg;\n\t\t\t\t\t\tmsg = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsubcmd = msg.slice(0, idx);\n\t\t\t\t\t\tmsg = msg.slice(idx + 1).trimStart();\n\t\t\t\t\t}\n\n\t\t\t\t\tconst event = t.makeEvent({\n\t\t\t\t\t\tcommand: subcmd,\n\t\t\t\t\t\tmessage: msg,\n\t\t\t\t\t\textra,\n\t\t\t\t\t\tcontext: t.chat.context,\n\t\t\t\t\t\tchannel: inst.props.channelLogin,\n\t\t\t\t\t\t_inst: inst,\n\t\t\t\t\t\taddMessage,\n\t\t\t\t\t\tsendMessage\n\t\t\t\t\t});\n\n\t\t\t\t\tconst topic = `chat:ffz-command:${subcmd}`,\n\t\t\t\t\t\tlisteners = t.listeners(topic);\n\n\t\t\t\t\tif ( listeners?.length > 0 )\n\t\t\t\t\t\tt.emit(topic, event);\n\t\t\t\t\telse\n\t\t\t\t\t\tinst.addMessage({\n\t\t\t\t\t\t\ttype: t.chat_types.Notice,\n\t\t\t\t\t\t\tmessage: t.i18n.t('chat.ffz-command.invalid', 'No such command: /ffz:{subcmd}', {subcmd})\n\t\t\t\t\t\t});\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst event = t.makeEvent({\n\t\t\t\t\tmessage: msg,\n\t\t\t\t\textra,\n\t\t\t\t\tcontext: t.chat.context,\n\t\t\t\t\tchannel: inst.props.channelLogin,\n\t\t\t\t\t_inst: inst,\n\t\t\t\t\taddMessage,\n\t\t\t\t\tsendMessage\n\t\t\t\t});\n\n\t\t\t\tt.emit('chat:pre-send-message', event);\n\n\t\t\t\tif ( event.defaultPrevented )\n\t\t\t\t\treturn;\n\n\t\t\t\treturn old_send.call(this, event.message, event.extra);\n\t\t\t}\n\t\t}\n\n\n\t\tcls.prototype.componentDidMount = function() {\n\t\t\ttry {\n\t\t\t\tthis._ffzInstall();\n\t\t\t} catch(err) {\n\t\t\t\tt.log.error('Error installing FFZ features onto chat service.', err);\n\t\t\t}\n\n\t\t\treturn old_mount.call(this);\n\t\t}\n\n\n\t\tcls.prototype.addEventListeners = function(...args) {\n\t\t\tif ( ! this._ffz_init ) {\n\t\t\t\tconst i = this;\n\n\t\t\t\tfor(const key of MISBEHAVING_EVENTS) {\n\t\t\t\t\tconst original = this[key];\n\t\t\t\t\tif ( original )\n\t\t\t\t\t\tthis[key] = function(e, t) {\n\t\t\t\t\t\t\ti._wrapped = e;\n\t\t\t\t\t\t\tconst ret = original.call(i, e, t);\n\t\t\t\t\t\t\ti._wrapped = null;\n\t\t\t\t\t\t\treturn ret;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst old_announce = this.onAnnouncementEvent;\n\t\t\t\tthis.onAnnouncementEvent = function(e) {\n\t\t\t\t\t//console.log('announcement', e);\n\t\t\t\t\treturn old_announce.call(this, e);\n\t\t\t\t}\n\n\n\t\t\t\tconst old_sub = this.onSubscriptionEvent;\n\t\t\t\tthis.onSubscriptionEvent = function(e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif ( t.chat.context.get('chat.filtering.blocked-types').has('Subscription') )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( t.disable_handling || t.chat.context.get('chat.subs.native') )\n\t\t\t\t\t\t\treturn old_sub.call(i, e);\n\n\t\t\t\t\t\tif ( t.chat.context.get('chat.subs.show') < 3 )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\te.body = '';\n\t\t\t\t\t\tconst out = i.convertMessage({message: e});\n\t\t\t\t\t\tout.ffz_type = 'resub';\n\t\t\t\t\t\tout.gift_theme = e.giftTheme;\n\t\t\t\t\t\tout.sharedChat = e.sharedChat;\n\t\t\t\t\t\tout.sub_goal = i.getGoalData ? i.getGoalData(e.goalData) : null;\n\t\t\t\t\t\tout.sub_plan = e.methods;\n\t\t\t\t\t\tout.sub_multi = e.multiMonthData?.multiMonthDuration ? {\n\t\t\t\t\t\t\tcount: e.multiMonthData.multiMonthDuration,\n\t\t\t\t\t\t\ttenure: e.multiMonthData.multiMonthTenure\n\t\t\t\t\t\t} : null;\n\n\t\t\t\t\t\treturn i.postMessageToCurrentChannel(e, out);\n\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tt.log.capture(err, {extra: e});\n\t\t\t\t\t\treturn old_sub.call(i, e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst old_state = this.onRoomStateEvent;\n\t\t\t\tthis.onRoomStateEvent = function(e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst channel = e.channel,\n\t\t\t\t\t\t\tcurrent = t.chat.context.get('context.channel');\n\n\t\t\t\t\t\tif ( channel && (channel === current || channel === `#${current}`) )\n\t\t\t\t\t\t\tt.updateChatState(e.state);\n\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tt.log.capture(err, {extra: e});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn old_state.call(i, e);\n\t\t\t\t}\n\n\t\t\t\tconst old_pinned = this.onPinnedChatEvent;\n\t\t\t\tthis.onPinnedChatEvent = function(e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst setting = t.chat.context.get('chat.hype.message-style');\n\t\t\t\t\t\tif ( setting !== 1 ) {\n\t\t\t\t\t\t\t// Drop messages with no message if we're not displaying them.\n\t\t\t\t\t\t\tif ( e.isSystemMessage && setting === 0 )\n\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\tconst out = i.convertMessage(e);\n\t\t\t\t\t\t\tout.ffz_type = 'hype';\n\t\t\t\t\t\t\tout.sharedChat = e.sharedChat;\n\t\t\t\t\t\t\tout.hype_amount = e.amount;\n\t\t\t\t\t\t\tout.hype_canonical_amount = e.canonical_amount;\n\t\t\t\t\t\t\tout.hype_currency = e.currency;\n\t\t\t\t\t\t\tout.hype_exponent = e.exponent;\n\t\t\t\t\t\t\tout.hype_level = e.level;\n\n\t\t\t\t\t\t\tif ( e.isSystemMessage ) {\n\t\t\t\t\t\t\t\t// Delete the message it comes with.\n\t\t\t\t\t\t\t\tout.message = '';\n\t\t\t\t\t\t\t\tout.messageBody = '';\n\t\t\t\t\t\t\t\tout.messageParts = [];\n\t\t\t\t\t\t\t\te.message.body = '';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//t.log.info('Pinned Event', e, out);\n\n\t\t\t\t\t\t\treturn i.postMessageToCurrentChannel(e, out);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tt.log.capture(err, {extra: e});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn old_pinned.call(i, e);\n\t\t\t\t}\n\n\t\t\t\tconst old_resub = this.onResubscriptionEvent;\n\t\t\t\tthis.onResubscriptionEvent = function(e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif ( t.chat.context.get('chat.filtering.blocked-types').has('Resubscription') )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( t.disable_handling || t.chat.context.get('chat.subs.native')  )\n\t\t\t\t\t\t\treturn old_resub.call(i, e);\n\n\t\t\t\t\t\tif ( t.chat.context.get('chat.subs.show') < 2 && ! e.body )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tconst out = i.convertMessage({message: e});\n\t\t\t\t\t\tout.ffz_type = 'resub';\n\t\t\t\t\t\tout.sharedChat = e.sharedChat;\n\t\t\t\t\t\tout.gift_theme = e.giftTheme;\n\t\t\t\t\t\tout.sub_goal = i.getGoalData ? i.getGoalData(e.goalData) : null;\n\t\t\t\t\t\tout.sub_cumulative = e.cumulativeMonths || 0;\n\t\t\t\t\t\tout.sub_streak = e.streakMonths || 0;\n\t\t\t\t\t\tout.sub_share_streak = e.shouldShareStreakTenure;\n\t\t\t\t\t\tout.sub_months = e.months;\n\t\t\t\t\t\tout.sub_plan = e.methods;\n\t\t\t\t\t\tout.sub_multi = e.multiMonthData?.multiMonthDuration ? {\n\t\t\t\t\t\t\tcount: e.multiMonthData.multiMonthDuration,\n\t\t\t\t\t\t\ttenure: e.multiMonthData.multiMonthTenure\n\t\t\t\t\t\t} : null;\n\n\t\t\t\t\t\t//t.log.info('Resub Event', e, out);\n\n\t\t\t\t\t\treturn i.postMessageToCurrentChannel(e, out);\n\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tt.log.capture(err, {extra: e});\n\t\t\t\t\t\treturn old_resub.call(i, e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst mysteries = this.ffz_mysteries = {};\n\n\t\t\t\tconst old_subgift = this.onSubscriptionGiftEvent;\n\t\t\t\tthis.onSubscriptionGiftEvent = function(e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif ( t.chat.context.get('chat.filtering.blocked-types').has('SubGift') )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( t.disable_handling || t.chat.context.get('chat.subs.native')  )\n\t\t\t\t\t\t\treturn old_subgift.call(i, e);\n\n\t\t\t\t\t\tconst key = `${e.channel}:${e.user.userID}`,\n\t\t\t\t\t\t\tmystery = mysteries[key];\n\n\t\t\t\t\t\tif ( mystery ) {\n\t\t\t\t\t\t\tif ( mystery.expires < Date.now() ) {\n\t\t\t\t\t\t\t\tmysteries[key] = null;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmystery.recipients.push({\n\t\t\t\t\t\t\t\t\tid: e.recipientID,\n\t\t\t\t\t\t\t\t\tlogin: e.recipientLogin,\n\t\t\t\t\t\t\t\t\tdisplayName: e.recipientName\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tif( mystery.recipients.length >= mystery.size )\n\t\t\t\t\t\t\t\t\tmysteries[key] = null;\n\n\t\t\t\t\t\t\t\tif ( mystery.line )\n\t\t\t\t\t\t\t\t\tt.scheduleMystery(mystery);\n\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\te.body = '';\n\t\t\t\t\t\tconst out = i.convertMessage({message: e});\n\t\t\t\t\t\tout.ffz_type = 'sub_gift';\n\t\t\t\t\t\tout.sharedChat = e.sharedChat;\n\t\t\t\t\t\tout.sub_recipient = {\n\t\t\t\t\t\t\tid: e.recipientID,\n\t\t\t\t\t\t\tlogin: e.recipientLogin,\n\t\t\t\t\t\t\tdisplayName: e.recipientName\n\t\t\t\t\t\t};\n\t\t\t\t\t\tout.gift_theme = e.giftTheme;\n\t\t\t\t\t\tout.sub_goal = i.getGoalData ? i.getGoalData(e.goalData) : null;\n\t\t\t\t\t\tout.sub_months = e.giftMonths;\n\t\t\t\t\t\tout.sub_plan = e.methods;\n\t\t\t\t\t\tout.sub_total = e.senderCount;\n\n\t\t\t\t\t\t//t.log.info('Sub Gift', e, out);\n\t\t\t\t\t\treturn i.postMessageToCurrentChannel(e, out);\n\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tt.log.capture(err, {extra: e});\n\t\t\t\t\t\treturn old_subgift.call(i, e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst old_communityintro = this.onCommunityIntroductionEvent;\n\t\t\t\tthis.onCommunityIntroductionEvent = function(e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif ( t.disable_handling )\n\t\t\t\t\t\t\treturn old_communityintro.call(this, e);\n\n\t\t\t\t\t\tif ( t.chat.context.get('chat.filtering.blocked-types').has('CommunityIntroduction') ) {\n\t\t\t\t\t\t\tconst out = i.convertMessage(e);\n\t\t\t\t\t\t\tout.sharedChat = e.sharedChat;\n\t\t\t\t\t\t\treturn i.postMessageToCurrentChannel(e, out);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tt.log.capture(err, {extra: e});\n\t\t\t\t\t\tt.log.error(err);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn old_communityintro.call(this, e);\n\t\t\t\t}\n\n\t\t\t\tconst old_anonsubgift = this.onAnonSubscriptionGiftEvent;\n\t\t\t\tthis.onAnonSubscriptionGiftEvent = function(e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif ( t.chat.context.get('chat.filtering.blocked-types').has('AnonSubGift') )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( t.disable_handling || t.chat.context.get('chat.subs.native')  )\n\t\t\t\t\t\t\treturn old_anonsubgift.call(i, e);\n\n\t\t\t\t\t\tconst key = `${e.channel}:ANON`,\n\t\t\t\t\t\t\tmystery = mysteries[key];\n\n\t\t\t\t\t\tif ( mystery ) {\n\t\t\t\t\t\t\tif ( mystery.expires < Date.now() )\n\t\t\t\t\t\t\t\tmysteries[key] = null;\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tmystery.recipients.push({\n\t\t\t\t\t\t\t\t\tid: e.recipientID,\n\t\t\t\t\t\t\t\t\tlogin: e.recipientLogin,\n\t\t\t\t\t\t\t\t\tdisplayName: e.recipientName\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tif( mystery.recipients.length >= mystery.size )\n\t\t\t\t\t\t\t\t\tmysteries[key] = null;\n\n\t\t\t\t\t\t\t\tif ( mystery.line )\n\t\t\t\t\t\t\t\t\tt.scheduleMystery(mystery);\n\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\te.body = '';\n\t\t\t\t\t\tconst out = i.convertMessage({message: e});\n\t\t\t\t\t\tout.ffz_type = 'sub_gift';\n\t\t\t\t\t\tout.sharedChat = e.sharedChat;\n\t\t\t\t\t\tout.gift_theme = e.giftTheme;\n\t\t\t\t\t\tout.sub_goal = i.getGoalData ? i.getGoalData(e.goalData) : null;\n\t\t\t\t\t\tout.sub_anon = true;\n\t\t\t\t\t\tout.sub_recipient = {\n\t\t\t\t\t\t\tid: e.recipientID,\n\t\t\t\t\t\t\tlogin: e.recipientLogin,\n\t\t\t\t\t\t\tdisplayName: e.recipientName\n\t\t\t\t\t\t};\n\t\t\t\t\t\tout.sub_months = e.giftMonths;\n\t\t\t\t\t\tout.sub_plan = e.methods;\n\t\t\t\t\t\tout.sub_total = e.senderCount;\n\n\t\t\t\t\t\t//t.log.info('Anon Sub Gift', e, out);\n\t\t\t\t\t\treturn i.postMessageToCurrentChannel(e, out);\n\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tt.log.capture(err, {extra: e});\n\t\t\t\t\t\treturn old_anonsubgift.call(i, e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst old_submystery = this.onSubscriptionMysteryGiftEvent;\n\t\t\t\tthis.onSubscriptionMysteryGiftEvent = function(e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif ( t.chat.context.get('chat.filtering.blocked-types').has('SubMysteryGift') )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( t.disable_handling || t.chat.context.get('chat.subs.native')  )\n\t\t\t\t\t\t\treturn old_submystery.call(i, e);\n\n\t\t\t\t\t\tlet mystery = null;\n\t\t\t\t\t\tif ( e.massGiftCount > t.chat.context.get('chat.subs.merge-gifts') ) {\n\t\t\t\t\t\t\tconst key = `${e.channel}:${e.user.userID}`;\n\t\t\t\t\t\t\tmystery = mysteries[key] = {\n\t\t\t\t\t\t\t\trecipients: [],\n\t\t\t\t\t\t\t\tsize: e.massGiftCount,\n\t\t\t\t\t\t\t\texpires: Date.now() + 30000\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\te.body = '';\n\t\t\t\t\t\tconst out = i.convertMessage({message: e});\n\t\t\t\t\t\tout.ffz_type = 'sub_mystery';\n\t\t\t\t\t\tout.sharedChat = e.sharedChat;\n\t\t\t\t\t\tout.gift_theme = e.giftTheme;\n\t\t\t\t\t\tout.sub_goal = i.getGoalData ? i.getGoalData(e.goalData) : null;\n\t\t\t\t\t\tout.mystery = mystery;\n\t\t\t\t\t\tout.sub_plan = e.plan;\n\t\t\t\t\t\tout.sub_count = e.massGiftCount;\n\t\t\t\t\t\tout.sub_total = e.senderCount;\n\n\t\t\t\t\t\t//t.log.info('Sub Mystery', e, out);\n\t\t\t\t\t\treturn i.postMessageToCurrentChannel(e, out);\n\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tt.log.capture(err, {extra: e});\n\t\t\t\t\t\treturn old_submystery.call(i, e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst old_anonsubmystery = this.onAnonSubscriptionMysteryGiftEvent;\n\t\t\t\tthis.onAnonSubscriptionMysteryGiftEvent = function(e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif ( t.chat.context.get('chat.filtering.blocked-types').has('AnonSubMysteryGift') )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( t.disable_handling || t.chat.context.get('chat.subs.native')  )\n\t\t\t\t\t\t\treturn old_anonsubmystery.call(i, e);\n\n\t\t\t\t\t\tlet mystery = null;\n\t\t\t\t\t\tif ( e.massGiftCount > t.chat.context.get('chat.subs.merge-gifts') ) {\n\t\t\t\t\t\t\tconst key = `${e.channel}:ANON`;\n\t\t\t\t\t\t\tmystery = mysteries[key] = {\n\t\t\t\t\t\t\t\trecipients: [],\n\t\t\t\t\t\t\t\tsize: e.massGiftCount,\n\t\t\t\t\t\t\t\texpires: Date.now() + 30000\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\te.body = '';\n\t\t\t\t\t\tconst out = i.convertMessage({message: e});\n\t\t\t\t\t\tout.ffz_type = 'sub_mystery';\n\t\t\t\t\t\tout.sharedChat = e.sharedChat;\n\t\t\t\t\t\tout.sub_anon = true;\n\t\t\t\t\t\tout.mystery = mystery;\n\t\t\t\t\t\tout.sub_plan = e.plan;\n\t\t\t\t\t\tout.sub_count = e.massGiftCount;\n\t\t\t\t\t\tout.sub_total = e.senderCount;\n\n\t\t\t\t\t\t//t.log.info('Anon Sub Mystery', e, out);\n\t\t\t\t\t\treturn i.postMessageToCurrentChannel(e, out);\n\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tt.log.capture(err, {extra: e});\n\t\t\t\t\t\treturn old_anonsubmystery.call(i, e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst old_ritual = this.onRitualEvent;\n\t\t\t\tthis.onRitualEvent = function(e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif ( t.chat.context.get('chat.filtering.blocked-types').has('Ritual') )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( t.disable_handling )\n\t\t\t\t\t\t\treturn old_ritual.call(i, e);\n\n\t\t\t\t\t\tconst out = i.convertMessage(e);\n\t\t\t\t\t\tout.sharedChat = e.sharedChat;\n\t\t\t\t\t\tout.ffz_type = 'ritual';\n\t\t\t\t\t\tout.ritual = e.type;\n\n\t\t\t\t\t\treturn i.postMessageToCurrentChannel(e, out);\n\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tt.log.capture(err, {extra: e});\n\t\t\t\t\t\treturn old_ritual.call(i, e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst old_points = this.onChannelPointsRewardEvent;\n\t\t\t\tthis.onChannelPointsRewardEvent = function(e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif ( t.chat.context.get('chat.filtering.blocked-types').has('ChannelPointsReward') )\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif ( t.disable_handling )\n\t\t\t\t\t\t\treturn old_points.call(i, e);\n\n\t\t\t\t\t\tconst reward = e.rewardID && get(e.rewardID, i.props.rewardMap);\n\t\t\t\t\t\tif ( reward ) {\n\t\t\t\t\t\t\tconst out = i.convertMessage(e);\n\n\t\t\t\t\t\t\tif ( t.chat.context.get('chat.powerup.effects') && isMessageEffect(reward) && e.animationID ) {\n\t\t\t\t\t\t\t\treturn i.postMessageToCurrentChannel(e, {\n\t\t\t\t\t\t\t\t\ttype: t.chat_types.ChannelPointsReward,\n\t\t\t\t\t\t\t\t\tid: out.id,\n\t\t\t\t\t\t\t\t\tdisplayName: out.user.userDisplayName,\n\t\t\t\t\t\t\t\t\tlogin: out.user.userLogin,\n\t\t\t\t\t\t\t\t\treward: reward,\n\t\t\t\t\t\t\t\t\tmessage: out,\n\t\t\t\t\t\t\t\t\tuserID: out.user.userID,\n\t\t\t\t\t\t\t\t\tanimationID: e.animationID,\n\t\t\t\t\t\t\t\t\tsharedChat: e.sharedChat\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tout.ffz_animation_id = e.animationID;\n\t\t\t\t\t\t\t\tout.sharedChat = e.sharedChat;\n\t\t\t\t\t\t\t\tout.ffz_type = 'points';\n\t\t\t\t\t\t\t\tout.ffz_reward = reward;\n\t\t\t\t\t\t\t\tout.ffz_reward_highlight = isHighlightedReward(reward);\n\n\t\t\t\t\t\t\t\treturn i.postMessageToCurrentChannel(e, out);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tt.log.error(err);\n\t\t\t\t\t\tt.log.capture(err, {extra: e});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn old_points.call(i, e);\n\t\t\t\t}\n\n\t\t\t\t/*const old_host = this.onHostingEvent;\n\t\t\t\tthis.onHostingEvent = function (e, _t) {\n\t\t\t\t\tt.emit('tmi:host', e, _t);\n\t\t\t\t\treturn old_host.call(i, e, _t);\n\t\t\t\t}\n\n\t\t\t\tconst old_unhost = this.onUnhostEvent;\n\t\t\t\tthis.onUnhostEvent = function (e, _t) {\n\t\t\t\t\tt.emit('tmi:unhost', e, _t);\n\t\t\t\t\treturn old_unhost.call(i, e, _t);\n\t\t\t\t}*/\n\n\t\t\t\tconst old_add = this.addMessage;\n\t\t\t\tthis.addMessage = function(e) {\n\t\t\t\t\tconst original = i._wrapped;\n\t\t\t\t\tif ( original && ! e._ffz_checked )\n\t\t\t\t\t\treturn i.postMessageToCurrentChannel(original, e);\n\n\t\t\t\t\treturn old_add.call(i, e);\n\t\t\t\t}\n\n\t\t\t\tthis._ffz_init = true;\n\t\t\t}\n\n\t\t\treturn old_handler.apply(this, ...args);\n\t\t}\n\n\t\tcls.prototype.postMessageToCurrentChannel = function(original, message) {\n\t\t\tconst original_msg = message;\n\t\t\tmessage._ffz_checked = true;\n\n\t\t\t// For certain message types, the message is contained within\n\t\t\t// a message sub-object.\n\t\t\tif ( message.type === t.chat_types.ChannelPointsReward || message.type === t.chat_types.CommunityIntroduction || (message.message?.user & message.message?.badgeDynamicData) ) {\n\t\t\t\tmessage = message.message;\n\t\t\t}\n\n\t\t\tif ( original.channel ) {\n\t\t\t\tlet chan = message.channel = original.channel.toLowerCase();\n\t\t\t\tif ( chan.startsWith('#') )\n\t\t\t\t\tchan = chan.slice(1);\n\n\t\t\t\tif ( chan !== this.props.channelLogin.toLowerCase() )\n\t\t\t\t\treturn;\n\n\t\t\t\tmessage.roomLogin = chan;\n\t\t\t}\n\n\t\t\tmessage.ffz_first_msg = message.isFirstMsg || original.message?.isFirstMsg || false;\n\t\t\tmessage.ffz_returning = original.message?.isReturningChatter || false;\n\n\t\t\tif ( original.message ) {\n\t\t\t\tconst user = original.message.user,\n\t\t\t\t\tflags = original.message.flags;\n\t\t\t\tif ( user )\n\t\t\t\t\tmessage.emotes = user.emotes;\n\n\t\t\t\tif ( flags && this.getFilterFlagOptions ) {\n\t\t\t\t\tconst clear_mod = this.props.isCurrentUserModerator && t.chat.context.get('chat.automod.run-as-mod');\n\t\t\t\t\tif ( clear_mod )\n\t\t\t\t\t\tthis.props.isCurrentUserModerator = false;\n\t\t\t\t\tmessage.flags = this.getFilterFlagOptions(flags);\n\t\t\t\t\tif ( clear_mod )\n\t\t\t\t\t\tthis.props.isCurrentUserModerator = true;\n\t\t\t\t}\n\n\t\t\t\tif (! message.message || typeof message.message === 'string') {\n\t\t\t\t\tif ( typeof original.action === 'string' )\n\t\t\t\t\t\tmessage.message = original.action;\n\t\t\t\t\telse\n\t\t\t\t\t\tmessage.message = original.message.body;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.addMessage(original_msg);\n\t\t}\n\t}\n\n\n\t/*updateChatLines() {\n\t\tthis.chat_line.updateLines();\n\t}*/\n\n\n\t// ========================================================================\n\t// Room Handling\n\t// ========================================================================\n\n\taddRoom(thing, props) {\n\t\tif ( ! props )\n\t\t\tprops = thing.props;\n\n\t\tif ( ! props.channelID )\n\t\t\treturn null;\n\n\t\tconst room = thing._ffz_room = this.chat.getRoom(props.channelID, props.channelLogin && props.channelLogin.toLowerCase(), false, true);\n\t\troom.ref(thing);\n\t\treturn room;\n\t}\n\n\n\tremoveRoom(thing) { // eslint-disable-line class-methods-use-this\n\t\tif ( ! thing._ffz_room )\n\t\t\treturn;\n\n\t\tthing._ffz_room.unref(thing);\n\t\tthing._ffz_room = null;\n\t}\n\n\n\t// ========================================================================\n\t// Chat Controller\n\t// ========================================================================\n\n\tchatMounted(chat, props) {\n\t\tif ( chat.chatBuffer )\n\t\t\tchat.chatBuffer.ffzController = chat;\n\n\t\tif ( ! props )\n\t\t\tprops = chat.props;\n\n\t\tif ( ! this.addRoom(chat, props) )\n\t\t\treturn;\n\n\t\tthis.updateRoomBitsConfig(chat, props.bitsConfig);\n\n\t\t// TODO: Check if this is the room for the current channel.\n\n\t\tthis.settings.updateContext({\n\t\t\tmoderator: props.isCurrentUserModerator,\n\t\t\tchatHidden: props.isHidden\n\t\t});\n\n\t\tif ( props.isEmbedded || props.isPopout )\n\t\t\tthis.settings.updateContext({\n\t\t\t\tchannel: props.channelLogin && props.channelLogin.toLowerCase(),\n\t\t\t\tchannelID: props.channelID\n\t\t\t});\n\n\t\tthis.chat.context.updateContext({\n\t\t\tmoderator: props.isCurrentUserModerator,\n\t\t\tchannel: props.channelLogin && props.channelLogin.toLowerCase(),\n\t\t\tchannelID: props.channelID,\n\t\t\t/*ui: {\n\t\t\t\ttheme: props.theme\n\t\t\t}*/\n\t\t});\n\t}\n\n\n\tchatUnmounted(chat) {\n\t\tif ( chat.chatBuffer && chat.chatBuffer.ffzController === this )\n\t\t\tchat.chatBuffer.ffzController = null;\n\n\t\tif ( chat.props.isEmbedded || chat.props.isPopout )\n\t\t\tthis.settings.updateContext({\n\t\t\t\tchannel: null,\n\t\t\t\tchannelID: null\n\t\t\t});\n\n\t\tthis.settings.updateContext({\n\t\t\tmoderator: false,\n\t\t\tchatHidden: false\n\t\t});\n\n\t\tthis.chat.context.updateContext({\n\t\t\tmoderator: false,\n\t\t\tchannel: null,\n\t\t\tchannelID: null\n\t\t});\n\n\t\tthis.removeRoom(chat);\n\t}\n\n\n\tchatUpdated(chat, props) {\n\t\tif ( chat.chatBuffer )\n\t\t\tchat.chatBuffer.ffzController = chat;\n\n\t\tif ( ! chat._ffz_room || props.channelID != chat._ffz_room.id ) {\n\t\t\tthis.removeRoom(chat);\n\t\t\tif ( chat._ffz_mounted )\n\t\t\t\tthis.chatMounted(chat);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( props.bitsConfig !== chat.props.bitsConfig )\n\t\t\tthis.updateRoomBitsConfig(chat, chat.props.bitsConfig);\n\n\t\t// TODO: Check if this is the room for the current channel.\n\n\t\tlet login = chat.props.channelLogin;\n\t\tif ( login )\n\t\t\tlogin = login.toLowerCase();\n\n\t\tif ( chat.props.isEmbedded || chat.props.isPopout )\n\t\t\tthis.settings.updateContext({\n\t\t\t\tchannel: login,\n\t\t\t\tchannelID: chat.props.channelID\n\t\t\t});\n\n\t\tthis.settings.updateContext({\n\t\t\tmoderator: chat.props.isCurrentUserModerator,\n\t\t\tchatHidden: chat.props.isHidden\n\t\t});\n\n\t\tthis.chat.context.updateContext({\n\t\t\tmoderator: chat.props.isCurrentUserModerator,\n\t\t\tchannel: login,\n\t\t\tchannelID: chat.props.channelID,\n\t\t\t/*ui: {\n\t\t\t\ttheme: props.theme\n\t\t\t}*/\n\t\t});\n\t}\n\n\n\tupdateRoomBitsConfig(chat, config) { // eslint-disable-line class-methods-use-this\n\t\tconst room = chat._ffz_room;\n\t\tif ( ! room )\n\t\t\treturn;\n\n\t\t// We have to check that the available cheers haven't changed\n\t\t// to avoid doing too many recalculations.\n\t\tlet new_bits = null;\n\t\tif ( config && Array.isArray(config.orderedActions) ) {\n\t\t\tnew_bits = new Set;\n\t\t\tfor(const action of config.orderedActions)\n\t\t\t\tif ( action && action.prefix )\n\t\t\t\t\tnew_bits.add(action.prefix);\n\t\t}\n\n\t\tif ( (! this._ffz_old_bits && ! new_bits) || set_equals(this._ffz_old_bits, new_bits) )\n\t\t\treturn;\n\n\t\tthis._ffz_old_bits = new_bits;\n\n\t\troom.updateBitsConfig(formatBitsConfig(config));\n\t\tthis.chat_line.updateLineTokens();\n\t\t//this.updateChatLines();\n\t}\n\n\n\t// ========================================================================\n\t// Chat Buffer Connector\n\t// ========================================================================\n\n\tconnectorMounted(inst) { // eslint-disable-line class-methods-use-this\n\t\tconst buffer = inst.props.messageBufferAPI;\n\t\tif ( buffer && buffer._ffz_inst && buffer._ffz_inst._ffz_connector !== inst )\n\t\t\tbuffer._ffz_inst._ffz_connector = inst;\n\t}\n\n\tconnectorUpdated(inst, props) { // eslint-disable-line class-methods-use-this\n\t\tconst buffer = props.messageBufferAPI,\n\t\t\tnew_buffer = inst.props.messageBufferAPI;\n\n\t\tif ( buffer === new_buffer )\n\t\t\treturn;\n\n\t\tif ( buffer && buffer._ffz_inst && buffer._ffz_inst._ffz_connector === inst )\n\t\t\tbuffer._ffz_inst._ffz_connector = null;\n\n\t\tif ( new_buffer && new_buffer._ffz_inst && new_buffer._ffz_inst._ffz_connector !== inst )\n\t\t\tbuffer._ffz_inst._ffz_connector = inst;\n\t}\n\n\tconnectorUnmounted(inst) { // eslint-disable-line class-methods-use-this\n\t\tconst buffer = inst.props.messageBufferAPI;\n\t\tif ( buffer && buffer._ffz_inst && buffer._ffz_inst._ffz_connector === inst )\n\t\t\tbuffer._ffz_inst._ffz_connector = null;\n\t}\n\n\n\t// ========================================================================\n\t// Chat Renderers\n\t// ========================================================================\n\n\trendererMounted(cont, props) {\n\t\tif ( ! props )\n\t\t\tprops = cont.props;\n\n\t\t// We keep our own track of shared rooms, so that we can load/unload\n\t\t// the associated data as relevant.\n\t\tthis.updateRendererSharedChats(cont, props?.sharedChatDataByChannelID);\n\t}\n\n\n\tupdateRendererSharedChats(cont, data) {\n\t\tdata ??= cont.props.sharedChatDataByChannelID;\n\n\t\tif ( cont._ffz_cached_shared === data )\n\t\t\treturn;\n\n\t\tthis.shared_room_data = cont._ffz_cached_shared = data;\n\t\tthis.shared_rooms = cont._ffz_shared_rooms = cont._ffz_shared_rooms || {};\n\n\t\tconst unexpected = new Set(Object.keys(cont._ffz_shared_rooms));\n\t\tlet badges_updated = false;\n\n\t\tif (data != null)\n\t\t\tfor(const [room_id, d2] of data.entries()) {\n\t\t\t\tunexpected.delete(room_id);\n\n\t\t\t\tlet room = cont._ffz_shared_rooms[room_id];\n\t\t\t\tif ( ! room ) {\n\t\t\t\t\t// We need to add the room.\n\t\t\t\t\troom = this.chat.getRoom(room_id, d2.login);\n\t\t\t\t\troom.ref(cont);\n\t\t\t\t\tcont._ffz_shared_rooms[room_id] = room;\n\t\t\t\t}\n\n\t\t\t\t// Check badges.\n\t\t\t\tconst bd = d2.badges?.channelsBySet;\n\n\t\t\t\t// Since we don't have a flat structure, we have to recurse\n\t\t\t\t// a little to get the count.\n\t\t\t\tlet count = 0;\n\t\t\t\tif (bd) {\n\t\t\t\t\tfor(const entry of bd.values()) {\n\t\t\t\t\t\tfor(const _ of entry.values()) {\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( room.badgeCount() !== count ) {\n\t\t\t\t\tbadges_updated = true;\n\t\t\t\t\troom.updateBadges(bd);\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Unref rooms that are no longer shared.\n\t\tfor(const room_id of unexpected) {\n\t\t\tconst room = cont._ffz_shared_rooms[room_id];\n\t\t\tif ( room )\n\t\t\t\troom.unref(cont);\n\n\t\t\troom.unshareChat();\n\t\t\tdelete cont._ffz_shared_rooms[room_id];\n\t\t}\n\n\t\tconst shared = Object.keys(cont._ffz_shared_rooms);\n\n\t\tfor(const room of Object.values(cont._ffz_shared_rooms))\n\t\t\troom.shareChats(shared);\n\n\t\t//this.log.info('!!!!! updated shared chats', cont._ffz_shared_rooms);\n\n\t\tif ( shared.length > 0 && this.settings.provider.get('shared-chat-notice') !== 1 ) {\n\t\t\tthis.settings.provider.set('shared-chat-notice', 1);\n\t\t\tthis.addNotice('*', {\n\t\t\t\ticon: 'ffz-i-zreknarf',\n\t\t\t\tmessage: this.i18n.t('chat.shared-chat.welcome', 'FrankerFaceZ: This is a Shared Chat, a new feature from Twitch to combine multiple stream chats into one. FrankerFaceZ support is early, so some messages might not look correct. Sorry for any trouble!')\n\t\t\t});\n\t\t}\n\n\t\tif ( badges_updated )\n\t\t\tthis.chat_line.updateLineBadges();\n\t}\n\n\trendererUnmounted(cont) {\n\t\t// Unref all shared rooms.\n\t\tif (cont._ffz_shared_rooms)\n\t\t\tfor(const room of Object.values(cont._ffz_shared_rooms))\n\t\t\t\troom.unref(cont);\n\n\t\tcont._ffz_shared_rooms = null;\n\t\tcont._ffz_cached_shared = null;\n\t\tthis.shared_room_data = new Map;\n\t\tthis.shared_rooms = {};\n\t}\n\n\trendererUpdated(cont, props) {\n\t\tthis.updateRendererSharedChats(cont, props?.sharedChatDataByChannelID);\n\t}\n\n\n\t// ========================================================================\n\t// Chat Containers\n\t// ========================================================================\n\n\tget shouldUpdateChannel() {\n\t\tconst route = this.router.current_name;\n\t\treturn Twilight.POPOUT_ROUTES.includes(route) || Twilight.SUNLIGHT_ROUTES.includes(route);\n\t}\n\n\tcontainerMounted(cont, props) {\n\t\tif ( ! props )\n\t\t\tprops = cont.props;\n\n\t\tif ( ! this.addRoom(cont, props) )\n\t\t\treturn;\n\n\t\tthis.updateRoomBitsConfig(cont, props.bitsConfig);\n\n\t\tif ( props.globalBadgeData?.badges )\n\t\t\tthis.chat.badges.updateTwitchBadges(props.globalBadgeData.badges);\n\t\telse if (props.data?.badges )\n\t\t\tthis.chat.badges.updateTwitchBadges(props.data.badges);\n\n\t\tif ( props.data ) {\n\t\t\tif ( this.shouldUpdateChannel ){\n\t\t\t\tconst color = props.data.user?.primaryColorHex;\n\t\t\t\tthis.resolve('site.channel').updateChannelColor(color);\n\n\t\t\t\tthis.settings.updateContext({\n\t\t\t\t\tchannel: props.channelLogin,\n\t\t\t\t\tchannelID: props.channelID,\n\t\t\t\t\tchannelColor: color\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.updateRoomBadges(cont, props.data.user && props.data.user.broadcastBadges);\n\t\t\tthis.updateRoomRules(cont, props.chatRules);\n\t\t}\n\t}\n\n\n\tcontainerUnmounted(cont) {\n\t\tif ( this.shouldUpdateChannel ) {\n\t\t\tthis.resolve('site.channel').updateChannelColor();\n\n\t\t\tthis.settings.updateContext({\n\t\t\t\tchannel: null,\n\t\t\t\tchannelID: null,\n\t\t\t\tchannelColor: null\n\t\t\t});\n\t\t}\n\n\t\tthis.removeRoom(cont);\n\t}\n\n\n\tcontainerUpdated(cont, props) {\n\t\t// If we don't have a room, or if the room ID doesn't match our ID\n\t\t// then we need to just create a new Room because the chat room changed.\n\t\tif ( ! cont._ffz_room || props.channelID != cont._ffz_room.id ) {\n\t\t\tthis.removeRoom(cont);\n\t\t\tif ( cont._ffz_mounted )\n\t\t\t\tthis.containerMounted(cont, props);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( props.bitsConfig !== cont.props.bitsConfig )\n\t\t\tthis.updateRoomBitsConfig(cont, props.bitsConfig);\n\n\t\tif ( props.data && Twilight.POPOUT_ROUTES.includes(this.router.current_name) ) {\n\t\t\tconst color = props.data.user?.primaryColorHex;\n\t\t\tthis.resolve('site.channel').updateChannelColor(color);\n\n\t\t\tthis.settings.updateContext({\n\t\t\t\tchannel: props.channelLogin,\n\t\t\t\tchannelID: props.channelID,\n\t\t\t\tchannelColor: color\n\t\t\t});\n\t\t}\n\n\t\t// Twitch, React, and Apollo are the trifecta of terror so we\n\t\t// can't compare the badgeSets property in any reasonable way.\n\t\t// Instead, just check the lengths to see if they've changed\n\t\t// and hope that badge versions will never change separately.\n\t\tconst cs = props.data?.user?.broadcastBadges ?? [],\n\t\t\tocs = cont.props.data?.user?.broadcastBadges ?? [];\n\n\t\tconst bs = props.globalBadgeData?.badges ?? [],\n\t\t\tobs = cont.props.globalBadgeData?.badges ?? [];\n\n\t\t/*const data = props.data || {},\n\t\t\todata = cont.props.data || {},\n\n\t\t\tbs = data.badges || [],\n\t\t\tobs = odata.badges || [],\n\n\t\t\tcs = data.user && data.user.broadcastBadges || [],\n\t\t\tocs = odata.user && odata.user.broadcastBadges || [];*/\n\n\t\tif ( this.chat.badges.getTwitchBadgeCount() !== bs.length || bs.length !== obs.length )\n\t\t\tthis.chat.badges.updateTwitchBadges(bs);\n\n\t\tif ( cont._ffz_room.badgeCount() !== cs.length || cs.length !== ocs.length )\n\t\t\tthis.updateRoomBadges(cont, cs);\n\n\t\tthis.updateRoomRules(cont, props.chatRules);\n\t}\n\n\thasRoomBadges(cont) { // eslint-disable-line class-methods-use-this\n\t\tconst room = cont._ffz_room;\n\t\tif ( ! room )\n\t\t\treturn false;\n\n\t\treturn room.hasBadges();\n\t}\n\n\tupdateRoomBadges(cont, badges) { // eslint-disable-line class-methods-use-this\n\t\tconst room = cont._ffz_room;\n\t\tif ( ! room )\n\t\t\treturn;\n\n\t\troom.updateBadges(badges);\n\t\tthis.chat_line.updateLineBadges();\n\t\t//this.updateChatLines();\n\t}\n\n\tupdateRoomRules(cont, rules) { // eslint-disable-line class-methods-use-this\n\t\tconst room = cont._ffz_room;\n\t\tif ( ! room )\n\t\t\treturn;\n\n\t\troom.rules = rules;\n\t}\n}\n\n\n// ============================================================================\n// Processing Functions\n// ============================================================================\n\nexport function formatBitsConfig(config) {\n\tif ( ! config )\n\t\treturn;\n\n\tconst out = {},\n\t\tactions = config.indexedActions,\n\t\ttier_colors = {};\n\n\tif ( Array.isArray(config.tiers) )\n\t\tfor(const tier of config.tiers)\n\t\t\ttier_colors[tier.bits] = tier.color;\n\n\tfor(const key in actions)\n\t\tif ( has(actions, key) ) {\n\t\t\tconst action = actions[key],\n\t\t\t\tnew_act = out[key] = {\n\t\t\t\t\tid: action.id,\n\t\t\t\t\tprefix: action.prefix,\n\t\t\t\t\ttiers: []\n\t\t\t\t};\n\n\t\t\tif ( config?.getImage ) {\n\t\t\t\tfor(const tier of action.orderedTiers) {\n\t\t\t\t\tconst images = {};\n\n\t\t\t\t\tfor(const theme of ['light', 'dark']) {\n\t\t\t\t\t\tconst themed = images[theme] = images[theme] || {},\n\t\t\t\t\t\t\tstat = themed.static = themed.static || {},\n\t\t\t\t\t\t\tanimated = themed.animated = themed.animated || {};\n\n\t\t\t\t\t\tfor(const scale of [1, 2, 4]) {\n\t\t\t\t\t\t\t// Static Images\n\t\t\t\t\t\t\tstat[scale] = config.getImage(action.prefix, theme, 'static', tier.bits, scale, 'png');\n\n\t\t\t\t\t\t\t// Animated Images\n\t\t\t\t\t\t\tanimated[scale] = config.getImage(action.prefix, theme, 'animated', tier.bits, scale, 'gif');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tnew_act.tiers.push({\n\t\t\t\t\t\tamount: tier.bits,\n\t\t\t\t\t\tcolor: tier.color || tier_colors[tier.bits] || 'inherit',\n\t\t\t\t\t\tid: tier.id,\n\t\t\t\t\t\timages\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t} else if ( action.orderedTiers[0]?.images ) {\n\t\t\t\tfor(const tier of action.orderedTiers) {\n\t\t\t\t\tconst images = {};\n\n\t\t\t\t\tfor(const im of tier.images) {\n\t\t\t\t\t\tconst themed = images[im.theme] = images[im.theme] || [],\n\t\t\t\t\t\t\tak = im.isAnimated ? 'animated' : 'static',\n\t\t\t\t\t\t\tanim = themed[ak] = themed[ak] || {};\n\n\t\t\t\t\t\tanim[im.dpiScale] = im.url;\n\t\t\t\t\t}\n\n\t\t\t\t\tnew_act.tiers.push({\n\t\t\t\t\t\tamount: tier.bits,\n\t\t\t\t\t\tcolor: tier.color || tier_colors[tier.bits] || 'inherit',\n\t\t\t\t\t\tid: tier.id,\n\t\t\t\t\t\timages\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\treturn out;\n}\n","export function doesRewardCostBits(reward) {\n\treturn reward.pricingType === 'BITS';\n}\n\nexport function isAutomaticReward(reward) {\n\treturn reward?.__typename === 'CommunityPointsAutomaticReward';\n}\n\nexport function isCustomReward(reward) {\n\treturn reward?.__typename === 'CommunityPointsCustomReward';\n}\n\nexport function isHighlightedReward(reward) {\n\treturn isAutomaticReward(reward) && reward.type === 'SEND_HIGHLIGHTED_MESSAGE';\n}\n\nexport function isGiantEmoteReward(reward) {\n\treturn reward && (reward.title?.includes?.('FFZ:GE') ||\n\t\treward.prompt?.includes?.('FFZ:GE'));\n}\n\nexport function isMessageEffect(reward) {\n\treturn reward?.type === 'SEND_ANIMATED_MESSAGE';\n}\n\nexport function getRewardCost(reward) {\n\tconst is_bits = doesRewardCostBits(reward);\n\tif ( isAutomaticReward(reward) )\n\t\treturn is_bits\n\t\t\t? (reward.bitsCost || reward.defaultBitsCost)\n\t\t\t: (reward.cost || reward.defaultCost);\n\n\treturn is_bits\n\t\t? reward.bitsCost\n\t\t: reward.cost;\n}\n\nexport function getRewardColor(reward) {\n\tif ( isAutomaticReward(reward) )\n\t\treturn reward.backgroundColor || reward.defaultBackgroundColor;\n\n\treturn reward.backgroundColor;\n}\n\nexport function getRewardTitle(reward, i18n) {\n\tif ( isCustomReward(reward) )\n\t\treturn reward.title;\n\n\tswitch(reward.type) {\n\t\tcase 'SEND_ANIMATED_MESSAGE':\n\t\t\treturn i18n.t('chat.points.animated', 'Message Effects');\n\t\tcase 'SEND_HIGHLIGHTED_MESSAGE':\n\t\t\treturn i18n.t('chat.points.highlighted', 'Highlight My Message');\n\t\tcase 'SINGLE_MESSAGE_BYPASS_SUB_MODE':\n\t\t\treturn i18n.t('chat.points.bypass-sub', 'Send a Message in Sub-Only Mode');\n\t\tcase 'CHOSEN_SUB_EMOTE_UNLOCK':\n\t\t\treturn i18n.t('chat.points.choose-emote', 'Choose an Emote to Unlock');\n\t\tcase 'RANDOM_SUB_EMOTE_UNLOCK':\n\t\t\treturn i18n.t('chat.points.random-emote', 'Unlock a Random Sub Emote');\n\t\tcase 'CHOSEN_MODIFIED_SUB_EMOTE_UNLOCK':\n\t\t\treturn i18n.t('chat.points.modify-emote', 'Modify a Single Emote');\n\t\tdefault:\n\t\t\treturn i18n.t('chat.points.reward', 'Reward');\n\t}\n}\n","'use strict';\n\n/* global emoteMenu: false */\n\n// ============================================================================\n// Compatibility Layer\n// Emote Menu for Twitch (BTTV Emote Menu)\n// ============================================================================\n\nimport Module from 'utilities/module';\nimport {has, sleep} from 'utilities/object';\n\nexport default class CompatEmoteMenu extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.should_enable = true;\n\n\t\tthis.inject('settings');\n\t\tthis.inject('site.chat');\n\t\tthis.inject('chat.emotes');\n\t}\n\n\tonEnable() {\n\t\tthis.hookEmoteMenu();\n\t}\n\n\tasync hookEmoteMenu() {\n\t\tconst em = await this.findEmoteMenu();\n\t\tif ( ! em )\n\t\t\treturn this.log.info('Emote Menu for Twitch was not found after 60 seconds.');\n\n\t\tem.registerEmoteGetter('FrankerFaceZ', () => {\n\t\t\t// We get literally no information about the current context,\n\t\t\t// so we need to look up everything.\n\t\t\tconst cont = this.chat.ChatContainer.first,\n\t\t\t\tprops = cont && cont.props;\n\n\t\t\tif ( ! props )\n\t\t\t\treturn;\n\n\t\t\tconst sets = this.emotes.getSets(props.userID, props.currentUserLogin, props.channelID, props.channelLogin),\n\t\t\t\tchat = this.resolve('chat'),\n\t\t\t\tanim = (chat?.context || this.settings)?.get?.('chat.emotes.animated') > 0,\n\t\t\t\temotes = [];\n\n\t\t\tfor(const set of sets) {\n\t\t\t\tif ( ! set || ! set.emotes )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tfor(const emote_id in set.emotes)\n\t\t\t\t\tif ( has(set.emotes, emote_id) ) {\n\t\t\t\t\t\tconst emote = set.emotes[emote_id];\n\t\t\t\t\t\tif ( emote.hidden )\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\temotes.push({\n\t\t\t\t\t\t\ttext: emote.name,\n\t\t\t\t\t\t\turl: anim && emote.animated?.[1] || emote.urls[1],\n\t\t\t\t\t\t\tchannel: `${set.source || 'FrankerFaceZ'} ${set.title}`,\n\t\t\t\t\t\t\tbadge: set.icon || '//cdn.frankerfacez.com/script/devicon.png'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn emotes;\n\t\t});\n\t}\n\n\tasync findEmoteMenu(delay = 0) {\n\t\tif ( window.emoteMenu && emoteMenu.registerEmoteGetter )\n\t\t\treturn emoteMenu;\n\n\t\tif ( delay >= 60000 )\n\t\t\treturn null;\n\n\t\tawait sleep(100);\n\t\treturn this.findEmoteMenu(delay + 100);\n\t}\n}","'use strict';\n\n// ============================================================================\n// CSS Tweaks for Twitch Twilight\n// ============================================================================\n\nimport Module from 'utilities/module';\nimport {ManagedStyle} from 'utilities/dom';\nimport {has} from 'utilities/object';\nimport { getFontsList, useFont } from 'utilities/fonts';\n\nconst STYLE_VALIDATOR = document.createElement('span');\n\nconst CLASSES = {\n\t//'unfollow': '.follow-btn__follow-btn--following,.follow-btn--following',\n\t//'top-discover': '.navigation-link[data-a-target=\"discover-link\"]',\n\t'side-nav': '.side-nav,#sideNav',\n\t'side-nav-viewers': '.side-nav-card__live-status',\n\t'side-rec-channels': '.side-nav .recommended-channels,.side-nav .side-nav-section + .side-nav-section:not(.online-friends):not(.bd--shelf)',\n\t//'side-rec-friends': '.side-nav .recommended-friends',\n\t'side-friends': '.side-nav .online-friends',\n\t'side-closed-friends': '.side-nav--collapsed .online-friends',\n\t'side-closed-rec-channels': '.side-nav--collapsed .recommended-channels,.side-nav--collapsed .side-nav-section + .side-nav-section:not(.online-friends):not(.bd--shelf)',\n\t'side-offline-channels': '.ffz--side-nav-card-offline',\n\t'side-rerun-channels': '.side-nav .ffz--side-nav-card-rerun',\n\t'modview-hide-info': '.modview-player-widget__hide-stream-info',\n\n\t'community-highlights': '.community-highlight-stack__card',\n\t'elevate-your-message': '.chat-input__input-icons button[aria-label=\"ElevatedMessage\"]',\n\n\t'prime-offers': '.top-nav__prime',\n\t'discover-luna': '.top-nav__external-link[data-a-target=\"try-presto-link\"]',\n\n\t'subtember': '.subtember-gradient',\n\n\t'player-gain-volume': '.video-player__container[data-compressed=\"true\"] .volume-slider__slider-container:not(.ffz--player-gain)',\n\n\t'player-ext': '.video-player .extension-taskbar,.video-player .extension-container,.video-player .extensions-dock__layout,.video-player .extensions-notifications,.video-player .extensions-video-overlay-size-container,.video-player .extensions-dock__layout',\n\t'player-ext-hover': '.video-player__container[data-controls=\"false\"] .extension-taskbar,.video-player__container[data-controls=\"false\"] .extension-container,.video-player__container[data-controls=\"false\"] .extensions-dock__layout,.video-player__container[data-controls=\"false\"] .extensions-notifications,.video-player__container[data-controls=\"false\"] .extensions-video-overlay-size-container',\n\t'player-cast': '.video-player button:has(.tw-chromecast-button__icon)',\n\n\t'player-event-bar': '.channel-root .live-event-banner-ui__header',\n\t'player-rerun-bar': '.channel-root__player-container div.tw-c-text-overlay:not([data-a-target=\"hosting-ui-header\"])',\n\n\t'pinned-cheer': '.pinned-cheer,.pinned-cheer-v2,.channel-leaderboard,.channel-leaderboard-marquee,div[data-test-selector=\"channel-leaderboard-container\"]',\n\t'whispers': 'body .whispers-open-threads,.tw-core-button[data-a-target=\"whisper-box-button\"],.whispers__pill',\n\n\t'dir-live-ind': `.live-channel-card[data-ffz-type=\"live\"] .tw-channel-status-text-indicator,article[data-ffz-type=\"live\"] .tw-channel-status-text-indicator,.switcher-hopper__scroll-container .tw-tower a[data-ffz-type=\"live\"] .tw-channel-status-text-indicator`,\n\t'profile-hover': '.preview-card .tw-relative:hover .ffz-channel-avatar',\n\t'not-live-bar': 'div[data-test-selector=\"non-live-video-banner-layout\"]',\n\t'channel-live-ind': '.channel-header__user .tw-channel-status-text-indicator,.channel-info-content .tw-halo__indicator',\n\t'celebration': 'body .celebration__overlay',\n\n\t'last-x-events': '.last-x-events_container',\n\n\t'pinned-hype-chat': '.paid-pinned-chat-message-list',\n\n\t'side-stories': '.side-nav__title + div[class*=storiesLeftNavSection]',\n\n\t'ci-mod-view': '.chat-input__buttons-container a[href*=\"/moderator\"]',\n\t'ci-highlight-settings': '.chat-input__buttons-container button[data-highlight-selector=\"chat-highlights-shortcut\"]',\n\t'ci-shield-mode': '.chat-input__buttons-container > div:last-child button[class|=\"ScCoreButton\"]:not([data-highlight-selector]):not([data-a-target])'\n};\n\n\nexport default class CSSTweaks extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.should_enable = true;\n\n\t\tthis.inject('settings');\n\n\t\tthis.style = new ManagedStyle;\n\t\tthis.chunks = {};\n\t\tthis.chunks_loaded = false;\n\n\t\tthis._state = {};\n\n\t\t// Layout\n\n\t\tthis.settings.add('metadata.modview.hide-info', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Metadata >> Mod View',\n\t\t\t\ttitle: 'Hide \"Hide Stream Info Stripe\" button.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.toggleHide('modview-hide-info', val)\n\t\t});\n\n\t\tthis.settings.add('metadata.viewers.no-native', {\n\t\t\trequires: ['metadata.viewers'],\n\t\t\tdefault: null,\n\t\t\tprocess(ctx, val) {\n\t\t\t\treturn val == null ? ctx.get('metadata.viewers') : val\n\t\t\t},\n\t\t\tchanged: val => this.toggle('hide-native-viewers', val),\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Metadata >> Player',\n\t\t\t\ttitle: \"Hide Twitch's native Viewer Count.\",\n\t\t\t\tdescription: \"By default, this is enabled whenever FFZ's own Viewer Count display is enabled to avoid redundant information.\",\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('metadata.uptime.no-native', {\n\t\t\trequires: ['metadata.uptime'],\n\t\t\tdefault: null,\n\t\t\tprocess(ctx, val) {\n\t\t\t\treturn val == null ? ctx.get('metadata.uptime') !== 0 : val\n\t\t\t},\n\t\t\tchanged: val => this.toggle('hide-native-uptime', val),\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Metadata >> Player',\n\t\t\t\ttitle: \"Hide Twitch's native Stream Uptime.\",\n\t\t\t\tdescription: \"By default, this is enabled whenever FFZ's own Stream Uptime display is enabled to avoid redundant information.\",\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('layout.use-chat-fix', {\n\t\t\trequires: ['context.force_chat_fix', 'layout.swap-sidebars', 'layout.use-portrait', 'chat.use-width', 'context.isWatchParty'],\n\t\t\tprocess(ctx) {\n\t\t\t\tif ( ctx.get('context.isWatchParty') )\n\t\t\t\t\treturn false;\n\n\t\t\t\treturn ctx.get('context.force_chat_fix') || ctx.get('layout.swap-sidebars') || ctx.get('layout.use-portrait') || ctx.get('chat.use-width')\n\t\t\t},\n\t\t\tchanged: val => {\n\t\t\t\tif ( val )\n\t\t\t\t\tthis.toggle('chat-no-animate', true);\n\t\t\t\telse if ( ! val && ! this._no_anim_timer )\n\t\t\t\t\tthis._no_anim_timer = requestAnimationFrame(() => {\n\t\t\t\t\t\tthis._no_anim_timer = null;\n\t\t\t\t\t\tif ( ! this.settings.get('layout.use-chat-fix') )\n\t\t\t\t\t\t\tthis.toggle('chat-no-animate', false);\n\t\t\t\t\t});\n\n\t\t\t\tthis.toggle('chat-fix', val);\n\t\t\t\tthis.emit('site.player:fix-player');\n\t\t\t\tthis.emit('site.layout:resize');\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('layout.side-nav.hide-stories', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Side Navigation',\n\t\t\t\ttitle: 'Hide Stories',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('layout.side-nav.show', {\n\t\t\tdefault: 1,\n\t\t\trequires: ['layout.use-portrait'],\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( val === 2 )\n\t\t\t\t\treturn ! ctx.get('layout.use-portrait');\n\n\t\t\t\treturn val;\n\t\t\t},\n\n\t\t\tui: {\n\t\t\t\tsort: -1,\n\t\t\t\tpath: 'Appearance > Layout >> Side Navigation',\n\t\t\t\ttitle: 'Display Side Navigation',\n\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Never'},\n\t\t\t\t\t{value: 1, title: 'Always'},\n\t\t\t\t\t{value: 2, title: 'Hide in Portrait'}\n\t\t\t\t]\n\t\t\t},\n\n\t\t\tchanged: val => {\n\t\t\t\tthis.toggle('hide-side-nav', !val);\n\t\t\t\tthis.emit('site.layout:resize');\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('layout.side-nav.hide-viewers', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Side Navigation',\n\t\t\t\ttitle: 'Hide Channel View Counts',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.toggleHide('side-nav-viewers', val)\n\t\t});\n\n\t\tthis.settings.add('layout.side-nav.show-avatars', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Side Navigation',\n\t\t\t\ttitle: 'Display Channel Avatars',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.toggle('hide-side-nav-avatars', !val)\n\t\t});\n\n\t\tthis.settings.add('layout.side-nav.show-rec-channels', {\n\t\t\tdefault: 1,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Side Navigation',\n\t\t\t\ttitle: 'Display Recommended / Popular Channels',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Never'},\n\t\t\t\t\t{value: 1, title: 'Always'},\n\t\t\t\t\t{value: 2, title: 'When Side Navigation is Open'}\n\t\t\t\t]\n\t\t\t},\n\t\t\tchanged: val => {\n\t\t\t\tthis.toggleHide('side-rec-channels', val === 0);\n\t\t\t\tthis.toggleHide('side-closed-rec-channels', val === 2);\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('layout.side-nav.show-friends', {\n\t\t\tdefault: 1,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Side Navigation',\n\t\t\t\ttitle: 'Display Online Friends',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Never'},\n\t\t\t\t\t{value: 1, title: 'Always'},\n\t\t\t\t\t{value: 2, title: 'When Side Navigation is Open'}\n\t\t\t\t]\n\t\t\t},\n\t\t\tchanged: val => {\n\t\t\t\tthis.toggleHide('side-friends', val === 0);\n\t\t\t\tthis.toggleHide('side-closed-friends', val === 2);\n\t\t\t}\n\t\t});\n\n\t\t/*this.settings.add('layout.side-nav.show-rec-friends', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Side Navigation',\n\t\t\t\ttitle: 'Display Recommended Friends',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.toggleHide('side-rec-friends', !val)\n\t\t});*/\n\n\t\tthis.settings.add('layout.side-nav.hide-offline', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Side Navigation',\n\t\t\t\ttitle: 'Hide Offline Channels',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.toggleHide('side-offline-channels', val)\n\t\t});\n\n\t\tthis.settings.add('layout.side-nav.rerun-style', {\n\t\t\tdefault: 1,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Side Navigation',\n\t\t\t\ttitle: 'Display Reruns',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Do Not Display'},\n\t\t\t\t\t{value: 1, title: 'Normally'},\n\t\t\t\t\t{value: 2, title: 'Faded (33% Opacity)'}\n\t\t\t\t]\n\t\t\t},\n\t\t\tchanged: val => {\n\t\t\t\tthis.toggleHide('side-rerun-channels', val === 0);\n\t\t\t\tthis.toggle('side-rerun-opacity', val === 2);\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('layout.swap-sidebars', {\n\t\t\tdefault: false,\n\t\t\trequires: ['context.isWatchParty'],\n\t\t\tprocess(ctx, val) {\n\t\t\t\treturn ctx.get('context.isWatchParty') ? false : val;\n\t\t\t},\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Side Navigation',\n\t\t\t\ttitle: 'Swap Sidebars',\n\t\t\t\tdescription: 'Swap navigation and chat to the opposite sides of the window.',\n\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => {\n\t\t\t\tthis.toggle('swap-sidebars', val);\n\t\t\t\tthis.emit('site.layout:resize');\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('layout.minimal-navigation', {\n\t\t\trequires: ['layout.theatre-navigation', 'context.isWatchParty'],\n\t\t\tdefault: false,\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( ctx.get('context.isWatchParty') )\n\t\t\t\t\treturn false;\n\n\t\t\t\treturn ctx.get('layout.theatre-navigation') ?\n\t\t\t\t\ttrue : val;\n\t\t\t},\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Top Navigation',\n\t\t\t\ttitle: 'Minimize Navigation',\n\t\t\t\tdescription: \"Slide the site navigation bar up out of view when it isn't in use.\",\n\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => {\n\t\t\t\tthis.toggle('minimal-navigation', val);\n\t\t\t\tthis.emit('site.layout:resize');\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('layout.theatre-navigation', {\n\t\t\trequires: ['layout.is-theater-mode'],\n\t\t\tdefault: false,\n\t\t\tprocess(ctx, val) {\n\t\t\t\treturn ctx.get('layout.is-theater-mode') ? val : false\n\t\t\t},\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Top Navigation',\n\t\t\t\ttitle: 'Show the minimized navigation bar when in theatre mode.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => {\n\t\t\t\tthis.toggle('theatre-nav', val);\n\t\t\t\tthis.emit('site.layout:resize');\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('layout.subtember', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Channel',\n\t\t\t\ttitle: 'Allow the Subtember upsell banner to appear.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\t/*this.settings.add('layout.discover', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Top Navigation',\n\t\t\t\ttitle: 'Show Discover link.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => {\n\t\t\t\tthis.toggleHide('top-discover', !val);\n\t\t\t\tthis.updateTopNav();\n\t\t\t}\n\t\t});*/\n\n\t\tthis.settings.add('layout.turbo-cta', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Top Navigation',\n\t\t\t\ttitle: 'Allow the Twitch Turbo button to appear.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('layout.prime-offers', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Top Navigation',\n\t\t\t\ttitle: 'Show Prime Gaming Loot.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.toggleHide('prime-offers', !val)\n\t\t});\n\n\t\tthis.settings.add('layout.hide-discover-luna', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Top Navigation',\n\t\t\t\ttitle: 'Hide the \"Discover Luna\" link.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.toggleHide('discover-luna', val)\n\t\t});\n\n\t\t// Chat\n\n\t\tthis.settings.add('whispers.show', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Whispers >> General',\n\t\t\t\ttitle: 'Display Whispers',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => {\n\t\t\t\tthis.toggleHide('whispers', !val);\n\t\t\t\tthis.emit('site.layout:resize');\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.hype.show-pinned', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Hype Chat >> Appearance',\n\t\t\t\ttitle: 'Allow Hype Chat messages to appear pinned at the top of chat.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.toggleHide('pinned-hype-chat', ! val)\n\t\t});\n\n\t\tthis.settings.add('chat.bits.show', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\torder: -1,\n\t\t\t\tpath: 'Chat > Bits and Cheering >> Appearance',\n\t\t\t\ttitle: 'Display Bits',\n\t\t\t\tdescription: 'Display UI associated with bits. Note: This will not hide cheering in chat messages.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.toggle('hide-bits', !val)\n\t\t});\n\n\t\t// Other?\n\n\t\tthis.settings.add('channel.show-celebrations', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Appearance >> General',\n\t\t\t\ttitle: 'Allow Celebrations to appear.',\n\t\t\t\tdescription: 'Celebrations are animations that cover the entire Twitch page.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.toggleHide('celebration', ! val)\n\t\t});\n\n\t\tthis.settings.add('layout.theme.global-font', {\n\t\t\tdefault: '',\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Theme >> Fonts',\n\t\t\t\ttitle: 'Font Family',\n\t\t\t\tdescription: 'Override the font used for the entire Twitch website. The old default font was: `\"Helvetica Neue\",Helvetica,Arial,sans-serif`\\n\\nAny font available via [Google Fonts](https://fonts.google.com/) can be loaded by prefixing the font name with `google:`.',\n\t\t\t\tcomponent: 'setting-combo-box',\n\t\t\t\tdata: () => getFontsList()\n\t\t\t},\n\t\t\tchanged: () => this.updateFont()\n\t\t});\n\n\t\tthis.settings.add('channel.hide-unfollow', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Appearance >> General',\n\t\t\t\ttitle: 'Hide the Unfollow button.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.toggle('hide-unfollow-button', val)\n\t\t});\n\n\t\tthis.settings.add('channel.hide-live-indicator', {\n\t\t\trequires: ['context.route.name'],\n\t\t\tprocess(ctx, val) {\n\t\t\t\treturn (ctx.get('context.route.name') === 'user' || ctx.get('context.route.name') === 'user-home') ? val : false\n\t\t\t},\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Appearance >> General',\n\t\t\t\ttitle: 'Hide the \"LIVE\" indicator on live channel pages.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.toggleHide('channel-live-ind', val)\n\t\t});\n\n\t\tthis.settings.add('channel.round-avatars', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Appearance >> General',\n\t\t\t\ttitle: 'Allow avatar images to be rounded.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.toggle('square-avatars', !val)\n\t\t});\n\n\t\t/*this.settings.add('channel.hide-not-live-bar', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Appearance >> General',\n\t\t\t\ttitle: 'Hide the \"Now Live\" bar.',\n\t\t\t\tdescription: 'Hide the bar which appears beneath clips and videos when the streamer is live, telling you they are live.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.toggleHide('not-live-bar', val)\n\t\t});*/\n\t}\n\n\tonEnable() {\n\t\tthis.toggleHide('modview-hide-info', this.settings.get('metadata.modview.hide-info'));\n\t\tthis.toggleHide('side-nav-viewers', this.settings.get('layout.side-nav.hide-viewers'));\n\t\tthis.toggle('hide-native-uptime', this.settings.get('metadata.uptime.no-native'));\n\t\tthis.toggle('hide-native-viewers', this.settings.get('metadata.viewers.no-native'));\n\t\tthis.toggle('chat-fix', this.settings.get('layout.use-chat-fix'));\n\t\tthis.toggle('swap-sidebars', this.settings.get('layout.swap-sidebars'));\n\t\tthis.toggle('minimal-navigation', this.settings.get('layout.minimal-navigation'));\n\t\tthis.toggle('theatre-nav', this.settings.get('layout.theatre-navigation'));\n\n\t\tthis.toggle('hide-side-nav-avatars', ! this.settings.get('layout.side-nav.show-avatars'));\n\t\tthis.toggle('hide-side-nav', !this.settings.get('layout.side-nav.show'));\n\t\t//this.toggleHide('side-rec-friends', !this.settings.get('layout.side-nav.show-rec-friends'));\n\t\tthis.toggleHide('side-offline-channels', this.settings.get('layout.side-nav.hide-offline'));\n\t\tthis.toggleHide('discover-luna', this.settings.get('layout.hide-discover-luna'));\n\t\tthis.toggleHide('prime-offers', !this.settings.get('layout.prime-offers'));\n\t\t//this.toggleHide('top-discover', !this.settings.get('layout.discover'));\n\t\tthis.toggle('hide-unfollow-button', this.settings.get('channel.hide-unfollow'));\n\n\t\tthis.toggleHide('pinned-hype-chat', ! this.settings.get('chat.hype.show-pinned'));\n\n\t\tthis.toggle('square-avatars', ! this.settings.get('channel.round-avatars'));\n\t\t//this.toggleHide('not-live-bar', this.settings.get('channel.hide-not-live-bar'));\n\t\tthis.toggleHide('channel-live-ind', this.settings.get('channel.hide-live-indicator'));\n\n\t\tconst reruns = this.settings.get('layout.side-nav.rerun-style');\n\t\tthis.toggleHide('side-rerun-channels', reruns === 0);\n\t\tthis.toggle('side-rerun-opacity', reruns === 2);\n\n\t\tconst recs = this.settings.get('layout.side-nav.show-rec-channels');\n\t\tthis.toggleHide('side-rec-channels', recs === 0);\n\t\tthis.toggleHide('side-closed-rec-channels', recs === 2);\n\n\t\tconst friends = this.settings.get('layout.side-nav.show-friends');\n\t\tthis.toggleHide('side-friends', friends === 0);\n\t\tthis.toggleHide('side-closed-friends', friends === 2);\n\n\t\tthis.toggleHide('whispers', !this.settings.get('whispers.show'));\n\t\tthis.toggleHide('celebration', ! this.settings.get('channel.show-celebrations'));\n\n\t\tthis.settings.getChanges('layout.subtember', val => this.toggleHide('subtember', !val));\n\t\tthis.settings.getChanges('layout.side-nav.hide-stories', val => this.toggleHide('side-stories', val));\n\n\t\tthis.updateFont();\n\t\tthis.updateTopNav();\n\n\t\tthis.emit('site.player:fix-player');\n\t\tthis.emit('site.layout:resize');\n\t}\n\n\tupdateTopNav() {\n\t\trequestAnimationFrame(() => this.emit('site.layout:update-nav'));\n\t}\n\n\tupdateFont() {\n\t\tlet font = this.settings.get('layout.theme.global-font');\n\t\tif ( font && font.length ) {\n\t\t\tconst [processed, unloader] = useFont(font);\n\t\t\tfont = processed;\n\n\t\t\tif ( this._font_unloader )\n\t\t\t\tthis._font_unloader();\n\n\t\t\tthis._font_unloader = unloader;\n\n\t\t\tif ( font.indexOf(' ') !== -1 && font.indexOf(',') === -1 && font.indexOf('\"') === -1 && font.indexOf(\"'\") === -1 )\n\t\t\t\tfont = `\"${font}\"`;\n\n\t\t\tSTYLE_VALIDATOR.style.fontFamily = '';\n\t\t\tSTYLE_VALIDATOR.style.fontFamily = font;\n\n\t\t\tif ( STYLE_VALIDATOR.style.fontFamily ) {\n\t\t\t\tthis.setVariable('global-font', font);\n\t\t\t\tthis.toggle('global-font', true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.toggle('global-font', false);\n\t\tthis.deleteVariable('global-font');\n\t}\n\n\ttoggleHide(key, val) {\n\t\tconst k = `hide--${key}`;\n\t\tif ( ! val ) {\n\t\t\tthis.style.delete(k);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! has(CLASSES, key) )\n\t\t\tthrow new Error(`cannot find class for \"${key}\"`);\n\n\t\tthis.style.set(k, `${CLASSES[key]} { display: none !important }`);\n\t}\n\n\n\ttoggle(key, val) {\n\t\tval = !! val;\n\t\tif ( (this._state[key] ?? false) === val )\n\t\t\treturn;\n\n\t\tthis._state[key] = val;\n\t\tthis._apply(key);\n\t}\n\n\t_apply(key) {\n\t\tconst val = this._state[key];\n\t\tif ( ! val ) {\n\t\t\tif ( this.style )\n\t\t\t\tthis.style.delete(key);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.style.has(key) )\n\t\t\treturn;\n\n\t\tif ( ! this.chunks_loaded )\n\t\t\treturn this.loadFromContext().then(() => this._apply(key));\n\n\t\tif ( ! has(this.chunks, key) ) {\n\t\t\tthis.log.warn(`Unknown chunk name \"${key}\" for toggle()`);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.style.set(key, this.chunks[key]);\n\t}\n\n\n\tset(key, val) { return this.style.set(key, val) }\n\tdelete(key) { return this.style.delete(key) }\n\n\tsetVariable(key, val, scope = 'body') {\n\t\tthis.style.set(`var--${key}`, `${scope} { --ffz-${key}: ${val}; }`);\n\t}\n\n\tdeleteVariable(key) { this.style.delete(`var--${key}`) }\n\n\n\tloadFromContext() {\n\t\tif ( this.chunks_loaded )\n\t\t\treturn;\n\n\t\treturn new Promise(async r => {\n\t\t\tconst raw = (await import(/* webpackChunkName: \"site-css-tweaks\" */ './styles.js')).default;\n\t\t\tfor(const key of raw.keys()) {\n\t\t\t\tconst k = key.slice(2, key.length - (key.endsWith('.scss') ? 5 : 4));\n\t\t\t\tthis.chunks[k] = raw(key).default;\n\t\t\t}\n\n\t\t\tthis.emit('site.layout:resize');\n\n\t\t\tthis.chunks_loaded = true;\n\t\t\tr();\n\t\t})\n\t}\n}\n","'use strict';\n\n// ============================================================================\n// Dashboard\n// ============================================================================\n\nimport Module from 'utilities/module';\nimport { get, has } from 'utilities/object';\n\nimport Twilight from 'site';\n\nexport default class Dashboard extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.should_enable = true;\n\n\t\tthis.inject('settings');\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site.channel');\n\n\t\tthis.SunlightBroadcast = this.fine.define(\n\t\t\t'sunlight-bcast',\n\t\t\tn => n.getGame && n.getTitle && n.props?.data,\n\t\t\tTwilight.SUNLIGHT_ROUTES\n\t\t);\n\n\t\tthis.SunlightManager = this.fine.define(\n\t\t\t'sunlight-manager',\n\t\t\tn => n.props?.channelID && n.props.channelLogin && has(n.props, 'hostedChannel'),\n\t\t\tTwilight.SUNLIGHT_ROUTES\n\t\t);\n\t}\n\n\tonEnable() {\n\t\tthis.SunlightManager.on('mount', this.updateSunlight, this);\n\t\tthis.SunlightManager.on('update', this.updateSunlight, this);\n\t\tthis.SunlightManager.on('unmount', this.removeSunlight, this);\n\t\tthis.SunlightManager.ready((cls, instances) => {\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.updateSunlight(inst);\n\t\t});\n\n\t\tthis.SunlightBroadcast.on('mount', this.updateBroadcast, this);\n\t\tthis.SunlightBroadcast.on('update', this.updateBroadcast, this);\n\t\tthis.SunlightBroadcast.on('unmount', this.removeBroadcast, this);\n\t\tthis.SunlightBroadcast.ready((cls, instances) => {\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.updateBroadcast(inst);\n\t\t});\n\t}\n\n\tupdateSunlight(inst) {\n\t\tthis.settings.updateContext({\n\t\t\tchannel: get('props.channelLogin', inst),\n\t\t\tchannelID: get('props.channelID', inst),\n\t\t\t//hosting: !! inst.props?.hostedChannel?.id\n\t\t});\n\t}\n\n\tremoveSunlight() {\n\t\tthis.settings.updateContext({\n\t\t\tchannel: null,\n\t\t\tchannelID: null,\n\t\t\t//hosting: false\n\t\t});\n\t}\n\n\tupdateBroadcast(inst) {\n\t\tconst data = inst.props?.data?.user?.broadcastSettings,\n\t\t\tgame = data?.game;\n\n\t\tthis.settings.updateContext({\n\t\t\tcategory: game?.name,\n\t\t\tcategoryID: game?.id,\n\t\t\ttitle: data?.title\n\t\t});\n\t}\n\n\tremoveBroadcast() {\n\t\tthis.settings.updateContext({\n\t\t\tcategory: null,\n\t\t\tcategoryID: null,\n\t\t\ttitle: null\n\t\t});\n\t}\n}","'use strict';\n\n// ============================================================================\n// Directory (Following, for now)\n// ============================================================================\n\nimport Module from 'utilities/module';\nimport {createElement} from 'utilities/dom';\nimport { get } from 'utilities/object';\n\n\nexport default class Game extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('site');\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site.apollo');\n\n\t\tthis.inject('i18n');\n\t\tthis.inject('settings');\n\n\t\tthis.GameHeader = this.fine.define(\n\t\t\t'game-header',\n\t\t\tn => n.props && n.props.data && n.getBannerImage && n.getDirectoryCountAndTags,\n\t\t\t['dir-game-index', 'dir-community', 'dir-game-videos', 'dir-game-clips', 'dir-game-details']\n\t\t);\n\n\t\tthis.settings.addUI('directory.game.blocked-games', {\n\t\t\tpath: 'Directory > Categories @{\"description\": \"Please note that due to limitations in Twitch\\'s website, names here must be formatted exactly as displayed in your client. For best results, you can block or unblock categories directly from directory pages.\"} >> Blocked',\n\t\t\tcomponent: 'game-list-editor',\n\t\t\tdefault: [],\n\t\t\tonUIChange: () => this.parent.updateCards()\n\t\t});\n\n\t\tthis.settings.addUI('directory.game.hidden-thumbnails', {\n\t\t\tpath: 'Directory > Categories >> Hidden Thumbnails',\n\t\t\tcomponent: 'game-list-editor',\n\t\t\tdefault: [],\n\t\t\tonUIChange: () => this.parent.updateCards()\n\t\t});\n\t}\n\n\tonEnable() {\n\t\tthis.GameHeader.on('mount', this.updateGameHeader, this);\n\t\tthis.GameHeader.on('update', this.updateGameHeader, this);\n\t\tthis.GameHeader.on('unmount', () => {\n\t\t\tthis.settings.updateContext({\n\t\t\t\tcategory: null,\n\t\t\t\tcategoryID: null\n\t\t\t})\n\t\t});\n\n\t\tthis.settings.provider.on('changed', key => {\n\t\t\tif ( key === 'directory.game.blocked-games' || key === 'directory.game.hidden-thumbnails' ) {\n\t\t\t\tthis.parent.updateCards();\n\n\t\t\t\tfor(const inst of this.GameHeader.instances)\n\t\t\t\t\tthis.updateGameHeader(inst);\n\t\t\t}\n\t\t});\n\n\t\tthis.GameHeader.ready((cls, instances) => {\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.updateGameHeader(inst);\n\t\t});\n\n\t\tthis.on('site.router:route', route => {\n\t\t\tif ( route && route.name === 'dir-game-index' )\n\t\t\t\tthis.updateGameHeader();\n\t\t})\n\t}\n\n\n\tupdateGameHeader(inst) {\n\t\tif ( inst === undefined ) {\n\t\t\tfor(const inst of this.GameHeader.instances)\n\t\t\t\tthis.updateGameHeader(inst);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.updateButtons(inst);\n\n\t\tconst category = inst?.props?.data?.game;\n\n\t\tthis.settings.updateContext({\n\t\t\tcategory: category?.name,\n\t\t\tcategoryID: category?.id\n\t\t});\n\t}\n\n\n\tupdateButtons(inst) {\n\t\tconst container = this.fine.getChildNode(inst);\n\t\tif ( get('data.game', inst.props) == null || ! container || ! container.querySelector )\n\t\t\treturn;\n\n\t\tconst ffz_buttons = container.querySelector('.ffz-directory-buttons');\n\t\tif ( ffz_buttons )\n\t\t\tffz_buttons.remove();\n\n\t\tconst buttons = container.querySelector('.directory-header-new__info > div > div + div');\n\t\tif ( ! buttons )\n\t\t\treturn;\n\n\t\tlet block_btn, block_label,\n\t\t\thidden_btn, hidden_label;\n\n\t\tconst game = get('data.game.name', inst.props) || inst.props.directoryName,\n\t\t\tupdate_block = () => {\n\t\t\t\tconst blocked_games = this.settings.provider.get('directory.game.blocked-games', []),\n\t\t\t\t\tblocked = blocked_games.includes(game);\n\n\t\t\t\tblock_btn.classList.toggle('active', blocked);\n\t\t\t\tblock_label.textContent = blocked ?\n\t\t\t\t\tthis.i18n.t('directory.unblock', 'Unblock') :\n\t\t\t\t\tthis.i18n.t('directory.block', 'Block');\n\t\t\t},\n\t\t\tupdate_hidden = () => {\n\t\t\t\tconst hidden_games = this.settings.provider.get('directory.game.hidden-thumbnails', []),\n\t\t\t\t\thidden = hidden_games.includes(game);\n\n\t\t\t\thidden_btn.classList.toggle('active', hidden);\n\t\t\t\thidden_label.textContent = hidden ?\n\t\t\t\t\tthis.i18n.t('directory.show-thumbnails', 'Show Thumbnails') :\n\t\t\t\t\tthis.i18n.t('directory.hide-thumbnails', 'Hide Thumbnails');\n\t\t\t};\n\n\t\tblock_btn = (<button\n\t\t\tclass=\"tw-mg-r-1 tw-button ffz-directory-toggle-block\"\n\t\t\tonClick={this.generateClickHandler('directory.game.blocked-games', game, update_block)}\n\t\t>\n\t\t\t{block_label = <span class=\"tw-button__text\" />}\n\t\t</button>);\n\n\t\tupdate_block();\n\n\t\thidden_btn = (<button\n\t\t\tclass=\"tw-button ffz-directory-toggle-thumbnail\"\n\t\t\tonClick={this.generateClickHandler('directory.game.hidden-thumbnails', game, update_hidden)}\n\t\t>\n\t\t\t{hidden_label = <span class=\"tw-button__text\" />}\n\t\t</button>);\n\n\t\tupdate_hidden();\n\n\t\tbuttons.appendChild(<div class=\"tw-mg-t-1 ffz-directory-buttons\">\n\t\t\t{block_btn}\n\t\t\t{hidden_btn}\n\t\t</div>);\n\t}\n\n\tgenerateClickHandler(setting, game, update_func) {\n\t\treturn e => {\n\t\t\te.preventDefault();\n\t\t\tconst values = this.settings.provider.get(setting) || [],\n\t\t\t\tidx = values.indexOf(game);\n\n\t\t\tif ( idx === -1 )\n\t\t\t\tvalues.push(game);\n\t\t\telse\n\t\t\t\tvalues.splice(idx, 1);\n\n\t\t\tthis.settings.provider.set(setting, values);\n\t\t\tthis.parent.updateCards();\n\t\t\tupdate_func();\n\t\t}\n\t}\n}","'use strict';\n\n// ============================================================================\n// Directory\n// ============================================================================\n\nimport Module from 'utilities/module';\nimport {duration_to_string} from 'utilities/time';\nimport {createElement} from 'utilities/dom';\nimport {get, glob_to_regex, escape_regex, addWordSeparators} from 'utilities/object';\n\nimport Game from './game';\n\nexport const CARD_CONTEXTS = ((e ={}) => {\n\te[e.SingleGameList = 1] = 'SingleGameList';\n\te[e.SingleChannelList = 2] = 'SingleChannelList';\n\te[e.MixedGameAndChannelList = 3] = 'MixedGameAndChannelList';\n\treturn e;\n})();\n\nexport const CONTENT_FLAGS = [\n\t'DrugsIntoxication',\n\t'Gambling',\n\t'MatureGame',\n\t'ProfanityVulgarity',\n\t'SexualThemes',\n\t'ViolentGraphic'\n];\n\nfunction formatTerms(data, flags) {\n\tif ( data[0].length )\n\t\tdata[1].push(addWordSeparators(data[0].join('|')));\n\n\tif ( ! data[1].length )\n\t\treturn null;\n\n\treturn new RegExp(data[1].join('|'), flags);\n}\n\n//const CREATIVE_ID = 488191;\n\nconst DIR_ROUTES = ['front-page', 'dir', 'dir-community', 'dir-community-index', 'dir-creative', 'dir-following', 'dir-game-index', 'dir-game-clips', 'dir-game-videos', 'dir-all', 'dir-category', 'user-videos', 'user-clips'];\n\n\nexport default class Directory extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.should_enable = true;\n\n\t\tthis.inject('site');\n\t\tthis.inject('site.elemental');\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site.router');\n\t\tthis.inject('site.css_tweaks');\n\t\tthis.inject('site.twitch_data');\n\n\t\tthis.inject('i18n');\n\t\tthis.inject('settings');\n\n\t\tthis.inject(Game);\n\n\t\tthis.DirectoryCard = this.elemental.define(\n\t\t\t'directory-card',\n\t\t\t`article[data-a-target^=\"video-carousel-card-\"],article[data-a-target^=\"followed-vod-\"],article[data-a-target^=\"card-\"],div[data-a-target^=\"video-tower-card-\"] article,div[data-a-target^=\"clips-card-\"] article,.shelf-card__impression-wrapper article,.tw-tower div article`,\n\t\t\tDIR_ROUTES, null, 0, 0\n\t\t);\n\n\t\tthis.DirectoryExperimentCard = this.elemental.define(\n\t\t\t'directory-experiment-card',\n\t\t\t'.switcher-hopper__scroll-container .tw-tower > div > a',\n\t\t\tDIR_ROUTES, null, 0, 0\n\t\t);\n\n\t\tthis.DirectoryGameCard = this.elemental.define(\n\t\t\t'directory-game-card', '.game-card[data-a-id]',\n\t\t\tDIR_ROUTES, null, 0, 0\n\t\t);\n\n\t\tthis.DirectoryShelf = this.fine.define(\n\t\t\t'directory-shelf',\n\t\t\tn => n.shouldRenderNode && n.props && n.props.shelf,\n\t\t\tDIR_ROUTES\n\t\t);\n\n\t\tthis.DirectorySorter = this.fine.define(\n\t\t\t'directory-sorter',\n\t\t\tn => n.getSortOptionLink && n.getSortOptionText && n.getSortOptionOnClick && n.getFilterIDs,\n\t\t\tDIR_ROUTES\n\t\t);\n\n\t\tthis.settings.add('directory.hidden.style', {\n\t\t\tdefault: 2,\n\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Categories >> Hidden Thumbnail Style @{\"sort\": 100}',\n\t\t\t\ttitle: 'Hidden Style',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tsort: 100,\n\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Replace Image'},\n\t\t\t\t\t{value: 1, title: 'Replace Image and Blur Title'},\n\t\t\t\t\t{value: 2, title: 'Blur Image'},\n\t\t\t\t\t{value: 3, title: 'Blur Image and Title'}\n\t\t\t\t]\n\t\t\t},\n\n\t\t\tchanged: val => {\n\t\t\t\tthis.css_tweaks.toggle('dir-no-blur', val < 2);\n\t\t\t\tthis.css_tweaks.toggle('dir-blur-title', val === 1 || val === 3);\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('directory.hide-costream-border', {\n\t\t\tdefault: false,\n\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Appearance',\n\t\t\t\ttitle: 'Hide border on streams with guest stars.',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\tgetExtraTerms: () => ['costream', 'co-stream']\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('directory.hidden.reveal', {\n\t\t\tdefault: false,\n\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Categories >> Hidden Thumbnail Style',\n\t\t\t\ttitle: 'Reveal hidden entries on mouse hover.',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\tsort: 101\n\t\t\t},\n\n\t\t\tchanged: val => this.css_tweaks.toggle('dir-reveal', val)\n\t\t});\n\n\n\t\tthis.settings.add('directory.uptime', {\n\t\t\tdefault: 1,\n\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Appearance',\n\t\t\t\ttitle: 'Stream Uptime',\n\t\t\t\tdescription: 'Display the stream uptime on the channel cards.',\n\t\t\t\tcomponent: 'setting-select-box',\n\n\t\t\t\tdata: [\n\t\t\t\t\t{value: 0, title: 'Disabled'},\n\t\t\t\t\t{value: 1, title: 'Enabled'},\n\t\t\t\t\t{value: 2, title: 'Enabled (with Seconds)'}\n\t\t\t\t]\n\t\t\t},\n\n\t\t\tchanged: () => this.updateCards()\n\t\t});\n\n\t\tthis.settings.add('directory.show-flags', {\n\t\t\tdefault: false,\n\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Appearance',\n\t\t\t\ttitle: 'Display Content Flags on channel cards.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: () => this.updateCards()\n\t\t});\n\n\t\t/*this.settings.add('directory.show-channel-avatars', {\n\t\t\tdefault: true,\n\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Appearance',\n\t\t\t\ttitle: 'Display channel avatars.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: () => this.updateCards()\n\t\t});*/\n\n\n\t\tthis.settings.add('directory.hide-live', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Appearance',\n\t\t\t\ttitle: 'Do not show the Live indicator on channels that are live.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: value => this.css_tweaks.toggleHide('dir-live-ind', value)\n\t\t});\n\n\t\tthis.settings.add('directory.hide-promoted', {\n\t\t\tdefault: false,\n\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Appearance',\n\t\t\t\ttitle: 'Do not show Promoted streams in the directory.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: () => this.updateCards()\n\t\t});\n\n\n\t\tthis.settings.add('directory.hide-vodcasts', {\n\t\t\tdefault: false,\n\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Appearance',\n\t\t\t\ttitle: 'Do not show reruns in the directory.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: () => this.updateCards()\n\t\t});\n\n\t\tthis.settings.add('directory.hide-recommended', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Following >> Categories',\n\t\t\t\ttitle: 'Do not show `Recommended Live Channels` in the Following Directory.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: () => this.DirectoryShelf.forceUpdate()\n\t\t});\n\n\n\t\tthis.settings.add('directory.block-users', {\n\t\t\tdefault: [],\n\t\t\ttype: 'array_merge',\n\t\t\talways_inherit: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Block by Username',\n\t\t\t\tcomponent: 'basic-terms',\n\t\t\t\twords: false\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('__filter:directory.block-users', {\n\t\t\trequires: ['directory.block-users'],\n\t\t\tequals: 'requirements',\n\t\t\tprocess(ctx) {\n\t\t\t\tconst val = ctx.get('directory.block-users');\n\t\t\t\tif ( ! val || ! val.length )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst out = [[], []];\n\n\t\t\t\tfor(const item of val) {\n\t\t\t\t\tconst t = item.t;\n\t\t\t\t\tlet v = item.v;\n\n\t\t\t\t\tif ( t === 'glob' )\n\t\t\t\t\t\tv = glob_to_regex(v);\n\n\t\t\t\t\telse if ( t !== 'raw' )\n\t\t\t\t\t\tv = escape_regex(v);\n\n\t\t\t\t\tif ( ! v || ! v.length )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tout[item.s ? 0 : 1].push(v);\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\tout[0].length\n\t\t\t\t\t\t? new RegExp(`^(?:${out[0].join('|')})$`)\n\t\t\t\t\t\t: null,\n\t\t\t\t\tout[1].length\n\t\t\t\t\t\t? new RegExp(`^(?:${out[1].join('|')})$`, 'i')\n\t\t\t\t\t\t: null\n\t\t\t\t];\n\t\t\t},\n\n\t\t\tchanged: () => this.updateCards()\n\t\t});\n\n\t\tthis.settings.add('directory.block-titles', {\n\t\t\tdefault: [],\n\t\t\ttype: 'array_merge',\n\t\t\talways_inherit: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Block by Title',\n\t\t\t\tcomponent: 'basic-terms'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('__filter:directory.block-titles', {\n\t\t\trequires: ['directory.block-titles'],\n\t\t\tequals: 'requirements',\n\t\t\tprocess(ctx) {\n\t\t\t\tconst val = ctx.get('directory.block-titles');\n\t\t\t\tif ( ! val || ! val.length )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst out = [\n\t\t\t\t\t[ // sensitive\n\t\t\t\t\t\t[], [] // word\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t[], []\n\t\t\t\t\t]\n\t\t\t\t];\n\n\t\t\t\tfor(const item of val) {\n\t\t\t\t\tconst t = item.t;\n\t\t\t\t\tlet v = item.v;\n\n\t\t\t\t\tif ( t === 'glob' )\n\t\t\t\t\t\tv = glob_to_regex(v);\n\n\t\t\t\t\telse if ( t !== 'raw' )\n\t\t\t\t\t\tv = escape_regex(v);\n\n\t\t\t\t\tif ( ! v || ! v.length )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tout[item.s ? 0 : 1][item.w ? 0 : 1].push(v);\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\tformatTerms(out[0], 'g'),\n\t\t\t\t\tformatTerms(out[1], 'gi')\n\t\t\t\t];\n\t\t\t},\n\n\t\t\tchanged: () => this.updateCards()\n\t\t});\n\n\t\tthis.settings.add('directory.blocked-tags', {\n\t\t\tdefault: [],\n\t\t\ttype: 'basic_array_merge',\n\t\t\talways_inherit: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Block by Tag',\n\t\t\t\tcomponent: 'tag-list-editor'\n\t\t\t},\n\t\t\tchanged: () => this.updateCards()\n\t\t});\n\n\n\t\tthis.settings.add('directory.blur-titles', {\n\t\t\tdefault: [],\n\t\t\ttype: 'array_merge',\n\t\t\talways_inherit: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Hide Thumbnails by Title',\n\t\t\t\tcomponent: 'basic-terms'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('__filter:directory.blur-titles', {\n\t\t\trequires: ['directory.blur-titles'],\n\t\t\tequals: 'requirements',\n\t\t\tprocess(ctx) {\n\t\t\t\tconst val = ctx.get('directory.blur-titles');\n\t\t\t\tif ( ! val || ! val.length )\n\t\t\t\t\treturn null;\n\n\t\t\t\tconst out = [\n\t\t\t\t\t[ // sensitive\n\t\t\t\t\t\t[], [] // word\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t[], []\n\t\t\t\t\t]\n\t\t\t\t];\n\n\t\t\t\tfor(const item of val) {\n\t\t\t\t\tconst t = item.t;\n\t\t\t\t\tlet v = item.v;\n\n\t\t\t\t\tif ( t === 'glob' )\n\t\t\t\t\t\tv = glob_to_regex(v);\n\n\t\t\t\t\telse if ( t !== 'raw' )\n\t\t\t\t\t\tv = escape_regex(v);\n\n\t\t\t\t\tif ( ! v || ! v.length )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tout[item.s ? 0 : 1][item.w ? 0 : 1].push(v);\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\tformatTerms(out[0], 'g'),\n\t\t\t\t\tformatTerms(out[1], 'gi')\n\t\t\t\t];\n\t\t\t},\n\n\t\t\tchanged: () => this.updateCards()\n\t\t});\n\n\t\tthis.settings.add('directory.blur-tags', {\n\t\t\tdefault: [],\n\t\t\ttype: 'basic_array_merge',\n\t\t\talways_inherit: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Hide Thumbnails by Tag',\n\t\t\t\tcomponent: 'tag-list-editor'\n\t\t\t},\n\t\t\tchanged: () => this.updateCards()\n\t\t});\n\n\t\tthis.settings.add('directory.wait-flags', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Appearance',\n\t\t\t\ttitle: 'Hide Thumbnails for all channels until Content Flags have been loaded.',\n\t\t\t\tdescription: 'We need to load content flags with a separate query, so they aren\\'t immediately available to determine if a given stream should be hidden, or have its thumbnail blurred. This setting will blur ALL thumbnails until after we\\'ve finished loading the necessary content flag information, ensuring you don\\'t see a flash of anything you would rather not.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: () => this.updateCards()\n\t\t});\n\n\t\tthis.settings.add('directory.block-flags', {\n\t\t\tdefault: [],\n\t\t\ttype: 'array_merge',\n\t\t\talways_inherit: true,\n\t\t\tprocess(ctx, val) {\n\t\t\t\tconst out = new Set;\n\t\t\t\tfor(const v of val) {\n\t\t\t\t\tlet item = v?.v;\n\t\t\t\t\tif ( item === 'ViolentGrpahic')\n\t\t\t\t\t\titem = 'ViolentGraphic';\n\t\t\t\t\tif ( item )\n\t\t\t\t\t\tout.add(item);\n\t\t\t\t}\n\n\t\t\t\treturn out;\n\t\t\t},\n\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Block by Flag',\n\t\t\t\tcomponent: 'blocked-types',\n\t\t\t\tdata: () => [...CONTENT_FLAGS]\n\t\t\t\t\t.sort()\n\t\t\t},\n\n\t\t\tchanged: () => this.updateCards()\n\t\t});\n\n\t\tthis.settings.add('directory.blur-flags', {\n\t\t\tdefault: [],\n\t\t\ttype: 'array_merge',\n\t\t\talways_inherit: true,\n\t\t\tprocess(ctx, val) {\n\t\t\t\tconst out = new Set;\n\t\t\t\tfor(const v of val)\n\t\t\t\t\tif ( v?.v )\n\t\t\t\t\t\tout.add(v.v);\n\n\t\t\t\treturn out;\n\t\t\t},\n\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Channels >> Hide Thumbnails by Flag',\n\t\t\t\tcomponent: 'blocked-types',\n\t\t\t\tdata: () => [...CONTENT_FLAGS]\n\t\t\t\t\t.sort()\n\t\t\t},\n\t\t\tchanged: () => this.updateCards()\n\t\t});\n\n\t\t/*this.settings.add('directory.hide-viewing-history', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Following >> Categories',\n\t\t\t\ttitle: 'Do not show `Based on your viewing history` in the Following Directory.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: () => this.DirectorySuggestedVideos.forceUpdate()\n\t\t});\n\n\t\tthis.settings.add('directory.hide-latest-videos', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > Following >> Categories',\n\t\t\t\ttitle: 'Do not show `Latest Videos` in the Following Directory.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: () => this.DirectoryLatestVideos.forceUpdate()\n\t\t});*/\n\n\t\tthis.settings.add('directory.default-sort', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Directory > General >> General',\n\t\t\t\ttitle: 'Force Default Sorting',\n\t\t\t\tcomponent: 'setting-select-box',\n\t\t\t\tdata: [\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: false,\n\t\t\t\t\t\ttitle: 'Disabled'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: 'RELEVANCE',\n\t\t\t\t\t\ttitle: 'Recommended For You'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: 'VIEWER_COUNT',\n\t\t\t\t\t\ttitle: 'Viewers (High to Low)'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: 'VIEWER_COUNT_ASC',\n\t\t\t\t\t\ttitle: 'Viewers (Low to High)'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: 'RECENT',\n\t\t\t\t\t\ttitle: 'Recently Started'\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\tchanged: () => this.updateSorting()\n\t\t});\n\n\t\tthis.routeClick = this.routeClick.bind(this);\n\t}\n\n\n\tonEnable() {\n\t\tthis.css_tweaks.toggleHide('profile-hover', this.settings.get('directory.show-channel-avatars') === 2);\n\t\tthis.css_tweaks.toggleHide('dir-live-ind', this.settings.get('directory.hide-live'));\n\t\tthis.css_tweaks.toggle('dir-reveal', this.settings.get('directory.hidden.reveal'));\n\t\tthis.settings.getChanges('directory.hide-costream-border', val => this.css_tweaks.toggle('hide-costream-border', val));\n\n\t\tconst blur = this.settings.get('directory.hidden.style');\n\n\t\tthis.css_tweaks.toggle('dir-no-blur', blur < 2);\n\t\tthis.css_tweaks.toggle('dir-blur-title', blur === 1 || blur === 3);\n\n\t\tthis.on('i18n:update', () => this.updateCards());\n\n\t\tthis.DirectoryExperimentCard.on('mount', this.updateExpCard, this);\n\t\tthis.DirectoryExperimentCard.on('mutate', this.updateExpCard, this);\n\t\tthis.DirectoryExperimentCard.on('unmount', this.clearExpCard, this);\n\t\tthis.DirectoryExperimentCard.each(el => this.updateExpCard(el));\n\n\t\tthis.DirectoryCard.on('mount', this.updateCard, this);\n\t\tthis.DirectoryCard.on('mutate', this.updateCard, this);\n\t\tthis.DirectoryCard.on('unmount', this.clearCard, this);\n\t\tthis.DirectoryCard.each(el => this.updateCard(el));\n\n\t\tthis.DirectoryGameCard.on('mount', this.updateGameCard, this);\n\t\tthis.DirectoryGameCard.on('mutate', this.updateGameCard, this);\n\t\t//this.DirectoryGameCard.on('unmount', this.clearGameCard, this);\n\t\tthis.DirectoryGameCard.each(el => this.updateGameCard(el));\n\n\t\tthis.DirectorySorter.on('mount', this.updateSorting, this);\n\t\tthis.DirectorySorter.ready(() => this.updateSorting());\n\n\t\tconst t = this;\n\n\t\tthis.DirectoryShelf.ready(cls => {\n\t\t\tconst old_should_render = cls.prototype.shouldRenderNode;\n\t\t\tcls.prototype.shouldRenderNode = function(node, ...args) {\n\t\t\t\ttry {\n\t\t\t\t\tlet game;\n\t\t\t\t\tif ( node.__typename === 'Game' )\n\t\t\t\t\t\tgame = node.name;\n\t\t\t\t\telse if ( node.game )\n\t\t\t\t\t\tgame = node.game.name;\n\n\t\t\t\t\tif ( game && t.settings.provider.get('directory.game.blocked-games', []).includes(game) )\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t} catch(err) {\n\t\t\t\t\tt.log.capture(err);\n\t\t\t\t\tt.log.error(err);\n\t\t\t\t}\n\n\t\t\t\treturn old_should_render.call(this, node, ...args);\n\t\t\t}\n\n\t\t\tconst old_render = cls.prototype.render;\n\t\t\tcls.prototype.render = function() {\n\t\t\t\ttry {\n\t\t\t\t\tif ( t.settings.get('directory.hide-recommended') ) {\n\t\t\t\t\t\tconst key = get('props.shelf.title.key', this);\n\t\t\t\t\t\tif ( key === 'live_recs_following' )\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t} catch(err) {\n\t\t\t\t\tt.log.capture(err);\n\t\t\t\t}\n\n\t\t\t\treturn old_render.call(this);\n\t\t\t}\n\n\t\t\tthis.DirectoryShelf.forceUpdate();\n\t\t});\n\t}\n\n\tupdateSorting(inst) {\n\t\tif ( ! inst ) {\n\t\t\tfor(const inst of this.DirectorySorter.instances)\n\t\t\t\tthis.updateSorting(inst);\n\t\t\treturn;\n\t\t}\n\n\t\tconst mode = this.settings.get('directory.default-sort');\n\t\tif ( ! mode || mode === inst.state?.activeOption )\n\t\t\treturn;\n\n\t\tconst link = inst.getSortOptionLink(mode, false, inst.props);\n\t\tif ( ! link?.props?.linkTo )\n\t\t\treturn;\n\n\t\t// Handle the onClick logic. This sets localStorage values\n\t\t// to restore this sort in the future.\n\t\tif ( link.props.onClick )\n\t\t\tlink.props.onClick();\n\n\t\t// And follow the generated link.\n\t\tthis.router.history.push(link.props.linkTo);\n\t}\n\n\tupdateGameCard(el) {\n\t\tconst react = this.fine.getReactInstance(el);\n\t\tif ( ! react )\n\t\t\treturn;\n\n\t\tconst props = react.return?.memoizedProps;\n\t\tif ( ! props?.trackingProps?.category )\n\t\t\treturn;\n\n\t\tconst game = props.trackingProps.category,\n\t\t\ttags = props.tagListProps?.tags;\n\n\t\tlet bad_tag = false;\n\n\t\tif ( Array.isArray(tags) ) {\n\t\t\tconst bad_tags = this.settings.get('directory.blocked-tags', []);\n\t\t\tif ( bad_tags.length ) {\n\t\t\t\tfor(const tag of tags) {\n\t\t\t\t\tif ( tag?.id && bad_tags.includes(tag.id) ) {\n\t\t\t\t\t\tbad_tag = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst should_hide = bad_tag || this.settings.provider.get('directory.game.blocked-games', []).includes(game);\n\n\t\tlet hide_container = el.closest('.tw-tower > div');\n\t\tif ( ! hide_container )\n\t\t\thide_container = el;\n\n\t\tif ( hide_container.querySelectorAll('a[data-a-target=\"tw-box-art-card-link\"]').length < 2 )\n\t\t\thide_container.classList.toggle('tw-hide', should_hide);\n\t}\n\n\tupdateCards() {\n\t\tthis.DirectoryCard.each(el => this.updateCard(el));\n\t\tthis.DirectoryExperimentCard.each(el => this.updateExpCard(el));\n\t\tthis.DirectoryGameCard.each(el => this.updateGameCard(el));\n\t\tthis.DirectoryShelf.forceUpdate();\n\n\t\tthis.emit(':update-cards');\n\t}\n\n\tclearCard(el, for_exp = false) {\n\t\tthis.clearUptime(el);\n\t\tthis.clearFlags(el);\n\n\t\tconst cont = this._getTopRightContainer(el, for_exp);\n\t\tif ( cont )\n\t\t\tcont.remove();\n\n\t\tel._ffz_top_right = null;\n\t}\n\n\tclearExpCard(el) {\n\t\treturn this.clearCard(el, true);\n\t}\n\n\tupdateCard(el) {\n\t\tconst parent = this.fine.searchParentNode(el, n => n.memoizedProps?.channelLogin);\n\t\tif ( ! parent )\n\t\t\treturn;\n\n\t\tconst props = parent.memoizedProps;\n\t\treturn this._updateCard(el, false, props, props.trackingProps);\n\t}\n\n\tupdateExpCard(el) {\n\t\tconst parent = this.fine.searchParentNode(el, n => n.memoizedProps?.item?.channelID);\n\t\tif ( ! parent )\n\t\t\treturn;\n\n\t\tconst props = parent.memoizedProps,\n\t\t\titem = props.item;\n\n\t\treturn this._updateCard(el, true, item, props.tracking);\n\t}\n\n\t_updateCard(el, for_exp, item, tracking) {\n\t\tconst game = item.categoryName || item.gameTitle || tracking?.game || tracking?.categoryName || tracking?.category,\n\t\t\ttags = item.tags ?? item.tagListProps?.freeformTags;\n\n\t\tconst need_flags = this.settings.get('directory.wait-flags'),\n\t\t\tshow_flags = this.settings.get('directory.show-flags'),\n\t\t\tblur_flags = this.settings.get('directory.blur-flags', []),\n\t\t\tblock_flags = this.settings.get('directory.block-flags', []),\n\t\t\tfilter_flags = blur_flags.size > 0 || block_flags.size > 0,\n\t\t\thas_flags = show_flags || filter_flags;\n\n\t\tif ( el._ffz_flags === undefined && has_flags ) {\n\t\t\tel._ffz_flags = null;\n\n\t\t\t// Are we getting a clip, a video, or a stream?\n\t\t\tif ( item.slug || item.type === 'clips' ) {\n\t\t\t\t// Clip\n\t\t\t\t//console.log('need flags for clip', props.slug);\n\t\t\t\tel._ffz_flags = [];\n\n\t\t\t} else if ( item.vodID || item.type === 'videos' ) {\n\t\t\t\t// Video\n\t\t\t\t//console.log('need flags for vod', props.vodID);\n\t\t\t\tel._ffz_flags = [];\n\n\t\t\t} else {\n\t\t\t\t// Stream?\n\t\t\t\t//console.log('need flags for stream', props.channelLogin);\n\t\t\t\tthis.twitch_data.getStreamFlags(item.channelID, item.channelID ? null : item.channelLogin).then(data => {\n\t\t\t\t\tel._ffz_flags = data ?? [];\n\t\t\t\t\tfor_exp\n\t\t\t\t\t\t? this.updateExpCard(el)\n\t\t\t\t\t\t: this.updateCard(el);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tlet bad_tag = false,\n\t\t\tblur_tag = false;\n\n\t\tif ( Array.isArray(tags) ) {\n\t\t\tconst bad_tags = this.settings.get('directory.blocked-tags', []),\n\t\t\t\tblur_tags = this.settings.get('directory.blur-tags', []);\n\n\t\t\tif ( bad_tags.length || blur_tags.length ) {\n\t\t\t\tfor(const tag of tags) {\n\t\t\t\t\tif ( tag?.name ) {\n\t\t\t\t\t\tconst lname = tag.name.toLowerCase();\n\t\t\t\t\t\tif ( bad_tags.includes(lname) )\n\t\t\t\t\t\t\tbad_tag = true;\n\t\t\t\t\t\tif ( blur_tags.includes(lname) )\n\t\t\t\t\t\t\tblur_tag = true;\n\t\t\t\t\t}\n\t\t\t\t\tif ( (bad_tag || ! bad_tags.length) && (blur_tag || ! blur_tags.length) )\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet should_blur = blur_tag;\n\t\tif ( need_flags && filter_flags && el._ffz_flags == null )\n\t\t\tshould_blur = true;\n\t\tif ( ! should_blur )\n\t\t\tshould_blur = this.settings.provider.get('directory.game.hidden-thumbnails', []).includes(game);\n\t\tif ( ! should_blur && blur_flags.size && el._ffz_flags ) {\n\t\t\tfor(const flag of el._ffz_flags)\n\t\t\t\tif ( flag?.id && blur_flags.has(flag.id) ) {\n\t\t\t\t\tshould_blur = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t}\n\t\tif ( ! should_blur ) {\n\t\t\tconst regexes = this.settings.get('__filter:directory.blur-titles');\n\t\t\tif ( regexes ) {\n\t\t\t\tif ( regexes[0] )\n\t\t\t\t\tregexes[0].lastIndex = -1;\n\t\t\t\tif ( regexes[1] )\n\t\t\t\t\tregexes[1].lastIndex = -1;\n\n\t\t\t\tif (( regexes[0] && regexes[0].test(item.title) ) || ( regexes[1] && regexes[1].test(item.title) ))\n\t\t\t\t\tshould_blur = true;\n\t\t\t}\n\t\t}\n\n\t\tconst type = item.type ?? item.streamType;\n\n\t\tel.classList.toggle('ffz-hide-thumbnail', should_blur);\n\t\tel.dataset.ffzType = type;\n\n\t\tlet should_hide = false;\n\t\tif ( bad_tag )\n\t\t\tshould_hide = true;\n\t\telse if ( type === 'rerun' && this.settings.get('directory.hide-vodcasts') )\n\t\t\tshould_hide = true;\n\t\telse if ( item.context != null && item.context !== CARD_CONTEXTS.SingleGameList && this.settings.provider.get('directory.game.blocked-games', []).includes(game) )\n\t\t\tshould_hide = true;\n\t\telse if ( (item.isPromotion || item.sourceType === 'COMMUNITY_BOOST' || item.sourceType === 'PROMOTION' || item.sourceType === 'SPONSORED') && this.settings.get('directory.hide-promoted') )\n\t\t\tshould_hide = true;\n\t\telse {\n\t\t\tif ( block_flags.size && el._ffz_flags ) {\n\t\t\t\tfor(const flag of el._ffz_flags)\n\t\t\t\t\tif ( flag?.id && block_flags.has(flag.id) ) {\n\t\t\t\t\t\tshould_hide = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ! should_hide ) {\n\t\t\t\tconst regexes = this.settings.get('__filter:directory.block-users');\n\t\t\t\tif ( regexes ) {\n\t\t\t\t\tif ( regexes[0] )\n\t\t\t\t\t\tregexes[0].lastIndex = -1;\n\t\t\t\t\tif ( regexes[1] )\n\t\t\t\t\t\tregexes[1].lastIndex = -1;\n\n\t\t\t\t\tif (( regexes[0] && regexes[0].test(item.channelLogin) ) || ( regexes[1] && regexes[1].test(item.channelLogin) ))\n\t\t\t\t\t\tshould_hide = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ! should_hide ) {\n\t\t\t\tconst regexes = this.settings.get('__filter:directory.block-titles');\n\t\t\t\tif ( regexes ) {\n\t\t\t\t\tif ( regexes[0] )\n\t\t\t\t\t\tregexes[0].lastIndex = -1;\n\t\t\t\t\tif ( regexes[1] )\n\t\t\t\t\t\tregexes[1].lastIndex = -1;\n\n\t\t\t\t\tif (( regexes[0] && regexes[0].test(item.title) ) || ( regexes[1] && regexes[1].test(item.title) ))\n\t\t\t\t\t\tshould_hide = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet hide_container = el.closest('.tw-tower > div');\n\t\tif ( ! hide_container )\n\t\t\thide_container = el;\n\n\t\tif ( hide_container.querySelectorAll('.tw-aspect .tw-image:not(.tw-image-avatar)').length < 2 )\n\t\t\thide_container.classList.toggle('tw-hide', should_hide);\n\n\t\tthis.updateUptime(el, item, for_exp);\n\t\tthis.updateFlags(el, for_exp);\n\t}\n\n\tupdateFlags(el, for_exp = false) {\n\t\tif ( ! document.contains(el) )\n\t\t\treturn this.clearFlags(el);\n\n\t\tconst setting = this.settings.get('directory.show-flags');\n\n\t\tif ( ! setting || ! el._ffz_flags?.length )\n\t\t\treturn this.clearFlags(el);\n\n\t\tconst container = this._getTopRightContainer(el, true, for_exp);\n\t\tif ( ! container )\n\t\t\treturn this.clearFlags(el);\n\n\t\tif ( ! el.ffz_flags_el )\n\t\t\tcontainer.appendChild(el.ffz_flags_el = (<div class=\"tw-mg-y-05 ffz-flags-element tw-relative ffz-il-tooltip__container\">\n\t\t\t\t<div class=\"tw-border-radius-small tw-c-background-overlay tw-c-text-overlay tw-flex tw-pd-x-05\">\n\t\t\t\t\t<figure class=\"ffz-i-flag\" />\n\t\t\t\t</div>\n\t\t\t\t{el.ffz_flags_tt = <div class=\"ffz-il-tooltip ffz-il-tooltip--pre ffz-il-tooltip--down ffz-il-tooltip--align-right\" />}\n\t\t\t</div>));\n\n\t\telse if ( ! el.contains(el.ffz_flags_el) )\n\t\t\tcontainer.appendChild(el.ffz_flags_el);\n\n\t\tel.ffz_flags_tt.textContent = this.i18n.t('metadata.flags.tooltip', 'Intended for certain audiences. May contain:')\n\t\t\t+ '\\n\\n'\n\t\t\t+ el._ffz_flags.map(x => x.localizedName).join('\\n');\n\t}\n\n\tclearFlags(el) {\n\t\tif ( el.ffz_flags_el ) {\n\t\t\tel.ffz_flags_el.remove();\n\t\t\tel.ffz_flags_tt = null;\n\t\t\tel.ffz_flags_el = null;\n\t\t}\n\t}\n\n\n\t_getTopRightContainer(el, should_create = true, for_exp = false) {\n\t\tlet cont = el._ffz_top_right ?? el.querySelector('.ffz-top-right');\n\t\tif ( cont || ! should_create )\n\t\t\treturn cont;\n\n\t\tlet container = for_exp\n\t\t\t? el.querySelector('.tw-aspect .tw-image')\n\t\t\t: el.querySelector('a[data-a-target=\"preview-card-image-link\"] > div');\n\t\tif ( container && for_exp )\n\t\t\tcontainer = container.parentElement?.parentElement;\n\t\tif ( ! container )\n\t\t\treturn null;\n\n\t\tcont = (<div\n\t\t\tdata-test-selector=\"top-right-selector\"\n\t\t\tclass=\"tw-absolute tw-mg-1 tw-right-0 tw-top-0 ffz-top-right tw-flex tw-flex-column tw-align-items-end\"\n\t\t/>);\n\t\tel._ffz_top_right = cont;\n\n\t\tcontainer.appendChild(cont);\n\t\treturn cont;\n\t}\n\n\n\tupdateUptime(el, props, for_exp = false) {\n\t\tif ( ! document.contains(el) )\n\t\t\treturn this.clearUptime(el);\n\n\t\tconst setting = this.settings.get('directory.uptime'),\n\t\t\tcontainer = this._getTopRightContainer(el, setting > 0, for_exp);\n\n\t\t//const container = el.querySelector('a[data-a-target=\"preview-card-image-link\"] > div'),\n\t\t//\tsetting = this.settings.get('directory.uptime');\n\n\t\tif ( ! container || setting === 0 || props.viewCount || props.animatedImageProps || props.type === 'videos' || props.type === 'clips' )\n\t\t\treturn this.clearUptime(el);\n\n\t\tlet created_at = props.createdAt;\n\n\t\tif ( ! created_at ) {\n\t\t\tif ( el.ffz_stream_meta === undefined ) {\n\t\t\t\tel.ffz_stream_meta = null;\n\t\t\t\tthis.twitch_data.getStreamMeta(null, props.channelLogin).then(data => {\n\t\t\t\t\tel.ffz_stream_meta = data;\n\t\t\t\t\tthis.updateUptime(el, props, for_exp);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcreated_at = el.ffz_stream_meta?.createdAt;\n\t\t}\n\n\t\tconst up_since = created_at && new Date(created_at),\n\t\t\tuptime = up_since && Math.floor((Date.now() - up_since) / 1000) || 0;\n\n\t\tif ( uptime < 1 )\n\t\t\treturn this.clearUptime(el);\n\n\t\tconst up_text = duration_to_string(uptime, false, false, false, setting === 1);\n\n\t\tif ( ! el.ffz_uptime_el )\n\t\t\tel.ffz_uptime_el = container.querySelector('.ffz-uptime-element');\n\n\t\tif ( ! el.ffz_uptime_el )\n\t\t\tcontainer.appendChild(el.ffz_uptime_el = (\n\t\t\t\t<div class=\"ffz-uptime-element tw-relative ffz-il-tooltip__container\">\n\t\t\t\t\t<div class=\"tw-border-radius-small tw-c-background-overlay tw-c-text-overlay tw-flex tw-pd-x-05\">\n\t\t\t\t\t\t<div class=\"tw-flex tw-c-text-live\">\n\t\t\t\t\t\t\t<figure class=\"ffz-i-clock\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{el.ffz_uptime_span = <p />}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\">\n\t\t\t\t\t\t{this.i18n.t('metadata.uptime.tooltip', 'Stream Uptime')}\n\t\t\t\t\t\t{el.ffz_uptime_tt = <div class=\"tw-pd-t-05\" />}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t));\n\n\t\telse if ( ! el.contains(el.ffz_uptime_el) )\n\t\t\tcontainer.appendChild(el.ffz_uptime_el);\n\n\t\tif ( ! el.ffz_uptime_span )\n\t\t\tel.ffz_uptime_span = el.ffz_uptime_el.querySelector('p');\n\t\tif ( ! el.ffz_uptime_span )\n\t\t\treturn this.clearUptime(el);\n\n\t\tif ( ! el.ffz_uptime_tt )\n\t\t\tel.ffz_uptime_tt = el.ffz_uptime_el.querySelector('.ffz-il-tooltip > div');\n\t\tif ( ! el.ffz_uptime_tt )\n\t\t\treturn this.clearUptime(el);\n\n\t\tif ( ! el.ffz_update_timer )\n\t\t\tel.ffz_update_timer = setInterval(this.updateUptime.bind(this, el, props, for_exp), 1000);\n\n\t\tel.ffz_uptime_span.textContent = up_text;\n\n\t\tif ( el.ffz_last_created_at !== created_at ) {\n\t\t\tel.ffz_uptime_tt.textContent = this.i18n.t(\n\t\t\t\t'metadata.uptime.since',\n\t\t\t\t'(since {since,datetime})',\n\t\t\t\t{since: up_since}\n\t\t\t);\n\n\t\t\tel.ffz_last_created_at = created_at;\n\t\t}\n\t}\n\n\n\tclearUptime(inst) { // eslint-disable-line class-methods-use-this\n\t\tif ( inst.ffz_update_timer ) {\n\t\t\tclearInterval(inst.ffz_update_timer);\n\t\t\tinst.ffz_update_timer = null;\n\t\t}\n\n\t\tif ( inst.ffz_uptime_el ) {\n\t\t\tinst.ffz_uptime_el.remove();\n\t\t\tinst.ffz_uptime_el = null;\n\t\t\tinst.ffz_uptime_span = null;\n\t\t\tinst.ffz_uptime_tt = null;\n\t\t\tinst.ffz_last_created_at = null;\n\t\t}\n\t}\n\n\n\trouteClick(event, url) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( ! url ) {\n\t\t\tconst target = event.currentTarget;\n\n\t\t\tif ( target ) {\n\t\t\t\tconst ds = target.dataset;\n\t\t\t\tif ( ds && ds.href )\n\t\t\t\t\turl = ds.href;\n\n\t\t\t\telse if ( target.href )\n\t\t\t\t\turl = target.href;\n\t\t\t}\n\t\t}\n\n\t\tif ( url )\n\t\t\tthis.router.history.push(url);\n\t}\n\n\n\thijackUserClick(event, user, optionalFn = null) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( optionalFn )\n\t\t\toptionalFn(event, user);\n\n\t\tthis.router.navigate('user', { userName: user });\n\t}\n}\n","'use strict';\n\nimport { IS_FIREFOX } from 'src/utilities/constants';\n// ============================================================================\n// Layout Overrides for Twitch Twilight\n// ============================================================================\n\nimport Module from 'utilities/module';\nimport {debounce, has} from 'utilities/object';\n\nconst PORTRAIT_ROUTES = ['user', 'video', 'user-video', 'user-clip', 'user-videos', 'user-clips', 'user-collections', 'user-events', 'user-followers', 'user-following'];\nconst MINIMAL_ROUTES = ['popout', 'embed-chat', 'dash-chat'];\n\nexport default class Layout extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.should_enable = true;\n\n\t\tthis.inject('settings');\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site.css_tweaks');\n\t\tthis.inject('site.elemental');\n\n\t\t/*this.TopNav = this.fine.define(\n\t\t\t'top-nav',\n\t\t\tn => n.computeStyles && n.navigationLinkSize\n\t\t);*/\n\n\t\t/*this.RightColumn = this.fine.define(\n\t\t\t'tw-rightcolumn',\n\t\t\tn => n.hideOnBreakpoint && n.handleToggleVisibility\n\t\t);*/\n\n\t\tthis.ResizeDetector = this.fine.define(\n\t\t\t'resize-detector',\n\t\t\tn => n.maybeDebounceOnScroll && n.setGrowDivRef && n.props.onResize\n\t\t);\n\n\t\tthis.SideBar = this.elemental.define(\n\t\t\t'sidebar',\n\t\t\t'.side-bar-contents',\n\t\t\tnull,\n\t\t\t{childNodes: true, subtree: true}, 1\n\t\t);\n\n\t\t/*this.SideBarChannels = this.fine.define(\n\t\t\t'nav-cards',\n\t\t\tt => t.getCardSlideInContent && t.props && has(t.props, 'tooltipContent')\n\t\t);*/\n\n\t\tthis.settings.add('clips.layout.big', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Clips',\n\t\t\t\ttitle: 'Allow the player to get larger on `clips.twitch.tv` pages.',\n\t\t\t\tdescription: 'This only affects windows at least 1,200 pixels wide and attempts to make the player and chat replay as large as possible.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('layout.portrait', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Channel',\n\t\t\t\ttitle: 'Enable Portrait Mode',\n\t\t\t\tdescription: 'In Portrait Mode, chat will be displayed beneath the player when the window is taller than it is wide.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('layout.portrait-invert', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Channel',\n\t\t\t\ttitle: 'When in portrait mode, place chat at the top.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => document.body.classList.toggle('ffz--portrait-invert', val)\n\t\t});\n\n\t\tthis.settings.add('layout.portrait-threshold', {\n\t\t\tdefault: 1.25,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Channel',\n\t\t\t\ttitle: 'Portrait Mode Threshold',\n\t\t\t\tdescription: 'This is the Width to Height ratio at which point Portrait Mode will begin to activate.',\n\t\t\t\tcomponent: 'setting-text-box',\n\t\t\t\tprocess(val) {\n\t\t\t\t\tval = parseFloat(val, 10)\n\t\t\t\t\tif ( isNaN(val) || ! isFinite(val) || val <= 0 )\n\t\t\t\t\t\treturn 1.25;\n\n\t\t\t\t\treturn val;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('layout.portrait-min-chat', {\n\t\t\tdefault: false,\n\t\t\trequires: ['layout.use-portrait'],\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( ! ctx.get('layout.use-portrait') )\n\t\t\t\t\treturn false;\n\n\t\t\t\treturn val;\n\t\t\t},\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Channel',\n\t\t\t\ttitle: 'Use compact chat in Portrait Mode.',\n\t\t\t\tdescription: 'When enabled, this minimizes the chat header and places the chat input box in line with the chat buttons in order to present a more compact chat able to display more lines with limited vertical space.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\t//changed: val => this.css_tweaks.toggle('portrait-chat', val)\n\t\t})\n\n\t\tthis.settings.add('layout.use-portrait', {\n\t\t\trequires: ['layout.portrait', 'layout.portrait-threshold', 'context.route.name', 'context.size', 'context.isWatchParty'],\n\t\t\tprocess(ctx) {\n\t\t\t\tif ( ctx.get('context.isWatchParty') )\n\t\t\t\t\treturn false;\n\n\t\t\t\tconst size = ctx.get('context.size');\n\t\t\t\tif ( ! size || ! ctx.get('layout.portrait') || ! PORTRAIT_ROUTES.includes(ctx.get('context.route.name')) )\n\t\t\t\t\treturn false;\n\n\t\t\t\tconst ratio = size.width / size.height;\n\t\t\t\treturn ratio <= ctx.get('layout.portrait-threshold');\n\t\t\t},\n\t\t\tchanged: () => this.updatePortraitMode()\n\t\t});\n\n\t\tthis.settings.add('layout.inject-portrait', {\n\t\t\trequires: ['layout.use-portrait', 'context.ui.rightColumnExpanded'],\n\t\t\tprocess(ctx) {\n\t\t\t\treturn ctx.get('layout.use-portrait') && ctx.get('context.ui.rightColumnExpanded');\n\t\t\t},\n\t\t\t//changed: val => this.css_tweaks.toggle('portrait', val)\n\t\t});\n\n\t\tthis.settings.add('layout.use-portrait-swapped', {\n\t\t\trequires: ['layout.inject-portrait', 'layout.swap-sidebars'],\n\t\t\tprocess(ctx) {\n\t\t\t\treturn ctx.get('layout.inject-portrait') && ctx.get('layout.swap-sidebars')\n\t\t\t},\n\t\t\t//changed: val => this.css_tweaks.toggle('portrait-swapped', val)\n\t\t});\n\n\t\tthis.settings.add('layout.use-portrait-meta', {\n\t\t\trequires: ['layout.inject-portrait', 'player.theatre.metadata'],\n\t\t\tprocess(ctx) {\n\t\t\t\treturn ctx.get('layout.inject-portrait') && ctx.get('player.theatre.metadata')\n\t\t\t},\n\t\t\t//changed: val => this.css_tweaks.toggle('portrait-metadata', val)\n\t\t});\n\n\t\tthis.settings.add('layout.use-portrait-meta-top', {\n\t\t\trequires: ['layout.use-portrait-meta', 'layout.portrait-invert'],\n\t\t\tprocess(ctx) {\n\t\t\t\treturn ctx.get('layout.use-portrait-meta') && ! ctx.get('layout.portrait-invert')\n\t\t\t},\n\t\t\t//changed: val => this.css_tweaks.toggle('portrait-metadata-top', val)\n\t\t});\n\n\t\tthis.settings.add('layout.is-theater-mode', {\n\t\t\trequires: ['context.ui.theatreModeEnabled', 'context.fullscreen'],\n\t\t\tprocess(ctx) {\n\t\t\t\tif ( ctx.get('context.fullscreen') )\n\t\t\t\t\treturn false;\n\t\t\t\treturn ctx.get('context.ui.theatreModeEnabled');\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('layout.show-portrait-chat', {\n\t\t\trequires: ['layout.use-portrait', 'layout.portrait-extra-height', 'layout.portrait-extra-width'],\n\t\t\tprocess() {\n\t\t\t\t// TODO: Calculate this based on the expected player height.\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tchanged: () => this.updatePortraitMode()\n\t\t});\n\n\t\tthis.settings.add('layout.portrait-extra-height', {\n\t\t\trequires: ['context.new_channel', 'context.squad_bar', /*'context.hosting',*/ 'layout.is-theater-mode', 'player.theatre.no-whispers', 'whispers.show', 'layout.minimal-navigation'],\n\t\t\tprocess(ctx) {\n\t\t\t\tlet height = 0;\n\t\t\t\tif ( ctx.get('layout.is-theater-mode') ) {\n\t\t\t\t\tif ( ctx.get('layout.minimal-navigation') )\n\t\t\t\t\t\theight += 1;\n\n\t\t\t\t\tif ( ctx.get('whispers.show') && ! ctx.get('player.theatre.no-whispers') )\n\t\t\t\t\t\theight += 4;\n\n\t\t\t\t} else {\n\t\t\t\t\theight = ctx.get('layout.minimal-navigation') ? 1 : 5;\n\t\t\t\t\tif ( ctx.get('whispers.show') )\n\t\t\t\t\t\theight += 4;\n\n\t\t\t\t\tif ( ctx.get('context.squad_bar') )\n\t\t\t\t\t\theight += 6;\n\n\t\t\t\t\theight += ctx.get('context.new_channel') ? 1 : 5;\n\n\t\t\t\t\t/*if ( ctx.get('context.hosting') )\n\t\t\t\t\t\theight += 4;*/\n\t\t\t\t}\n\n\t\t\t\treturn height;\n\t\t\t},\n\n\t\t\t//changed: val => this.css_tweaks.setVariable('portrait-extra-height', `${val}rem`)\n\t\t})\n\n\t\tthis.settings.add('layout.portrait-extra-width', {\n\t\t\trequire: ['layout.side-nav.show', 'layout.is-theater-mode', 'context.ui.sideNavExpanded'],\n\t\t\tprocess(ctx) {\n\t\t\t\tif ( ! ctx.get('layout.side-nav.show') || ctx.get('layout.is-theater-mode') )\n\t\t\t\t\treturn 0;\n\n\t\t\t\treturn ctx.get('context.ui.sideNavExpanded') ? 24 : 5\n\t\t\t},\n\n\t\t\t//changed: val => this.css_tweaks.setVariable('portrait-extra-width', `${val}rem`)\n\t\t});\n\n\t\tthis.settings.add('layout.is-minimal', {\n\t\t\trequire: ['context.route.name'],\n\t\t\tprocess(ctx) {\n\t\t\t\treturn MINIMAL_ROUTES.includes(ctx.get('context.route.name'));\n\t\t\t}\n\t\t});\n\t}\n\n\tonEnable() {\n\t\tdocument.body.classList.toggle('ffz--portrait-invert', this.settings.get('layout.portrait-invert'));\n\n\t\tthis.on(':update-nav', this.updateNavLinks, this);\n\t\tthis.on(':resize', this.handleResize, this);\n\n\t\tthis.settings.getChanges('layout.portrait-min-chat', val => this.css_tweaks.toggle('portrait-chat', val));\n\t\tthis.settings.getChanges('layout.inject-portrait', val => this.css_tweaks.toggle('portrait', val));\n\t\tthis.settings.getChanges('layout.use-portrait-swapped', val => this.css_tweaks.toggle('portrait-swapped', val));\n\t\tthis.settings.getChanges('layout.use-portrait-meta', val => this.css_tweaks.toggle('portrait-metadata', val));\n\t\tthis.settings.getChanges('layout.use-portrait-meta-top', val => this.css_tweaks.toggle('portrait-metadata-top', val));\n\n\t\tthis.settings.getChanges('layout.portrait-extra-width', val => this.css_tweaks.setVariable('portrait-extra-width', `${val}rem`));\n\t\tthis.settings.getChanges('layout.portrait-extra-height', val => this.css_tweaks.setVariable('portrait-extra-height', `${val}rem`));\n\n\t\t/*this.css_tweaks.toggle('portrait-chat', this.settings.get('layout.portrait-min-chat'));\n\t\tthis.css_tweaks.toggle('portrait', this.settings.get('layout.inject-portrait'));\n\t\tthis.css_tweaks.toggle('portrait-swapped', this.settings.get('layout.use-portrait-swapped'));\n\t\tthis.css_tweaks.toggle('portrait-metadata', this.settings.get('layout.use-portrait-meta'));\n\t\tthis.css_tweaks.toggle('portrait-metadata-top', this.settings.get('layout.use-portrait-meta-top'));\n\t\tthis.css_tweaks.setVariable('portrait-extra-width', `${this.settings.get('layout.portrait-extra-width')}rem`);\n\t\tthis.css_tweaks.setVariable('portrait-extra-height', `${this.settings.get('layout.portrait-extra-height')}rem`);*/\n\n\t\tthis.on('site.directory:update-cards', () => {\n\t\t\tthis.SideBar.each(el => this._updateSidebar(el));\n\t\t\t//for(const inst of this.SideBarChannels.instances)\n\t\t\t//\tthis.updateCardClass(inst);\n\t\t});\n\n\t\tthis.ResizeDetector.ready(() => {\n\t\t\tif ( this._needs_resize ) {\n\t\t\t\tthis._needs_resize = false;\n\t\t\t\tthis.handleResize();\n\t\t\t}\n\t\t});\n\n\t\tthis.SideBar.on('mount', this.updateSidebar, this);\n\t\tthis.SideBar.on('mutate', this.updateSidebar, this);\n\t\tthis.SideBar.each(el => this.updateSidebar(el));\n\n\t\t/*this.SideBarChannels.ready((cls, instances) => {\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.updateCardClass(inst);\n\t\t});\n\n\t\tthis.SideBarChannels.on('mount', this.updateCardClass, this);\n\t\tthis.SideBarChannels.on('update', this.updateCardClass, this);*/\n\n\t\t/*const t = this;\n\t\tthis.RightColumn.ready((cls, instances) => {\n\t\t\tcls.prototype.ffzHideOnBreakpoint = function() {\n\t\t\t\ttry {\n\t\t\t\t\tif ( ! this.containerRef )\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tif ( ! t.settings.get('layout.use-portrait') )\n\t\t\t\t\t\treturn this.oldHideOnBreakpoint ? this.oldHideOnBreakpoint() : null;\n\n\t\t\t\t\tconst should_show = t.settings.get('layout.show-portrait-chat'),\n\t\t\t\t\t\tis_showing = this.props.rightColumnExpandedByBreakpoint;\n\n\t\t\t\t\tif ( should_show && ! is_showing ) {\n\t\t\t\t\t\tthis.containerRef.style.display = '';\n\t\t\t\t\t\tthis.props.expandRightColumnFromBreakpoint();\n\n\t\t\t\t\t} else if ( ! should_show && is_showing ) {\n\t\t\t\t\t\tthis.containerRef.style.display = 'none';\n\t\t\t\t\t\tthis.props.collapseRightColumnFromBreakpoint();\n\t\t\t\t\t}\n\t\t\t\t} catch(err) {\n\t\t\t\t\tif ( this.oldHideOnBreakpoint )\n\t\t\t\t\t\tthis.oldHideOnBreakpoint();\n\n\t\t\t\t\tt.log.capture(err);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcls.prototype.ffzInstall = function() {\n\t\t\t\tif ( this.oldHideOnBreakpoint )\n\t\t\t\t\treturn;\n\n\t\t\t\tthis.oldHideOnBreakpoint = this.hideOnBreakpoint;\n\t\t\t\tthis.hideOnBreakpoint = () => this.ffzHideOnBreakpoint();\n\t\t\t}\n\n\t\t\tfor(const inst of instances) {\n\t\t\t\twindow.removeEventListener('resize', inst.hideOnBreakpoint);\n\t\t\t\tinst.ffzInstall();\n\t\t\t\twindow.addEventListener('resize', inst.hideOnBreakpoint);\n\t\t\t\tinst.hideOnBreakpoint();\n\t\t\t}\n\t\t});*/\n\t}\n\n\thandleResize() {\n\t\tif ( this._resize_timer )\n\t\t\treturn;\n\n\t\tthis._resize_timer = setTimeout(() => this._handleResize(), IS_FIREFOX ? 500 : 100);\n\t}\n\n\t_handleResize() {\n\t\tclearTimeout(this._resize_timer);\n\t\tthis._resize_timer = null;\n\n\t\tif ( ! this.ResizeDetector.instances.size )\n\t\t\tthis._needs_resize = true;\n\t\telse {\n\t\t\tfor(const inst of this.ResizeDetector.instances) {\n\t\t\t\tinst?.onScroll?.();\n\t\t\t\t//inst?.props?.onResize?.();\n\t\t\t}\n\n\t\t\tthis.emit('site.player:fix-player');\n\t\t}\n\t}\n\n\tget is_minimal() {\n\t\treturn this.settings.get('layout.is-minimal')\n\t}\n\n\tupdateSidebar(el) {\n\t\tif ( ! el )\n\t\t\treturn;\n\n\t\tif ( ! el._ffz_update )\n\t\t\tel._ffz_update = debounce(() => requestAnimationFrame(() => this._updateSidebar(el)), 1000, 2);\n\n\t\tel._ffz_update();\n\t}\n\n\t_updateSidebar(el) {\n\t\tif ( ! el )\n\t\t\treturn;\n\n\t\tconst cards = el.querySelectorAll('.side-nav-card'),\n\t\t\tblocked_games = this.settings.provider.get('directory.game.blocked-games', []);\n\n\t\tfor(const card of cards) {\n\t\t\tconst react = this.fine.getReactInstance(card),\n\t\t\t\tprops = react?.return?.return?.memoizedProps,\n\t\t\t\tstream = props?.metadataRight?.props?.stream,\n\t\t\t\trerun = stream?.type === 'rerun' ?? false,\n\t\t\t\tgame = stream?.game?.displayName,\n\t\t\t\toffline = props?.offline ?? false;\n\n\t\t\tlet should_hide = false;\n\t\t\tif ( game && blocked_games.includes(game) )\n\t\t\t\tshould_hide = true;\n\t\t\tif ( props?.isPromoted && this.settings.get('directory.hide-promoted') )\n\t\t\t\tshould_hide = true;\n\t\t\telse {\n\t\t\t\tif ( ! should_hide ) {\n\t\t\t\t\tconst regexes = this.settings.get('__filter:directory.block-users');\n\t\t\t\t\tconst login = props?.userLogin;\n\t\t\t\t\tif ( regexes && login ) {\n\t\t\t\t\t\tif ( regexes[0] )\n\t\t\t\t\t\t\tregexes[0].lastIndex = -1;\n\t\t\t\t\t\tif ( regexes[1] )\n\t\t\t\t\t\t\tregexes[1].lastIndex = -1;\n\t\t\t\t\t\tif ( (regexes[0] && regexes[0].test(login)) || (regexes[1] && regexes[1].test(login)) )\n\t\t\t\t\t\t\tshould_hide = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( ! should_hide) {\n\t\t\t\t\tconst regexes = this.settings.get('__filter:directory.block-titles');\n\t\t\t\t\tconst title = stream?.broadcaster?.broadcastSettings?.title;\n\t\t\t\t\tif ( regexes && title ) {\n\t\t\t\t\t\tif ( regexes[0] )\n\t\t\t\t\t\t\tregexes[0].lastIndex = -1;\n\t\t\t\t\t\tif ( regexes[1] )\n\t\t\t\t\t\t\tregexes[1].lastIndex = -1;\n\t\t\t\t\t\tif ( (regexes[0] && regexes[0].test(title)) || (regexes[1] && regexes[1].test(title)) )\n\t\t\t\t\t\t\tshould_hide = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcard.classList.toggle('ffz--side-nav-card-rerun', rerun);\n\t\t\tcard.classList.toggle('ffz--side-nav-card-offline', offline);\n\t\t\tcard.classList.toggle('tw-hide', should_hide);\n\t\t}\n\t}\n\n\t/*updateCardClass(inst) {\n\t\tconst node = this.fine.getChildNode(inst);\n\n\t\tif ( node ) {\n\t\t\tnode.classList.toggle('ffz--side-nav-card-rerun',\n\t\t\t\tinst.props?.tooltipContent?.props?.streamType === 'rerun'\n\t\t\t);\n\t\t\tnode.classList.toggle('ffz--side-nav-card-offline',\n\t\t\t\tinst.props?.offline === true\n\t\t\t);\n\n\t\t\tconst game = inst.props?.tooltipContent?.props?.gameName || inst.props?.metadataLeft?.props?.activity?.stream?.game?.name || inst.props?.metadataLeft;\n\t\t\tnode.classList.toggle('tw-hide', this.settings.provider.get('directory.game.blocked-games', []).includes(game));\n\t\t}\n\t}*/\n\n\tupdateNavLinks() {\n\n\t}\n\n\tupdatePortraitMode() {\n\n\t}\n}\n","'use strict';\n\n// ============================================================================\n// Menu Button Module\n// ============================================================================\n\nimport {DEBUG} from 'utilities/constants';\nimport Module from 'utilities/module';\nimport {createElement, ClickOutside, setChildren} from 'utilities/dom';\n\nimport Twilight from 'site';\nimport awaitMD, {getMD} from 'utilities/markdown';\n\n\nexport default class MenuButton extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('i18n');\n\t\tthis.inject('settings');\n\t\tthis.inject('site');\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site.elemental');\n\t\t//this.inject('addons');\n\n\t\tthis.pauseToasts = this.pauseToasts.bind(this);\n\t\tthis.unpauseToasts = this.unpauseToasts.bind(this);\n\n\t\tthis.should_enable = true;\n\t\tthis._pill_content = null;\n\t\tthis._has_update = false;\n\t\tthis._important_update = false;\n\t\tthis._new_settings = 0;\n\t\tthis._loading = false;\n\t\tthis.toasts = [];\n\n\t\tthis.settings.add('ffz.show-new-settings', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Layout >> Top Navigation',\n\t\t\t\ttitle: 'Display an indicator on the FFZ Control Center button whenever there are new settings added to FrankerFaceZ.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: () => this.update()\n\t\t});\n\n\t\tthis.ModBar = this.fine.define(\n\t\t\t'mod-view-bar',\n\t\t\tn => n.actions && n.updateRoot && n.childContext,\n\t\t\t['mod-view']\n\t\t);\n\n\t\t/*this.SunlightDash = this.fine.define(\n\t\t\t'sunlight-dash',\n\t\t\tn => n.getIsChannelEditor && n.getIsChannelModerator && n.getIsAdsEnabled && n.getIsSquadStreamsEnabled,\n\t\t\tTwilight.SUNLIGHT_ROUTES\n\t\t);*/\n\n\t\tthis.SunlightNav = this.elemental.define(\n\t\t\t'sunlight-nav', '.sunlight-top-nav > div > div > div > div:last-child > div',\n\t\t\tTwilight.SUNLIGHT_ROUTES,\n\t\t\t{attributes: true}, 1\n\t\t);\n\n\t\tthis.NavBar = this.fine.define(\n\t\t\t'nav-bar',\n\t\t\tn => n.renderOnsiteNotifications && n.renderTwitchPrimeCrown\n\t\t);\n\n\t\tthis.SquadBar = this.fine.define(\n\t\t\t'squad-nav-bar',\n\t\t\tn => n.exitSquadMode && n.props && n.props.squadID,\n\t\t\t['squad']\n\t\t);\n\n\t\tthis.MultiController = this.fine.define(\n\t\t\t'multi-controller',\n\t\t\tn => n.handleAddStream && n.handleRemoveStream && n.getInitialStreamLayout,\n\t\t\t['command-center']\n\t\t);\n\t}\n\n\tget loading() {\n\t\treturn this._loading;\n\t}\n\n\tset loading(val) {\n\t\tif ( val === this._loading )\n\t\t\treturn;\n\n\t\tthis._loading = val;\n\t\tthis.update();\n\t}\n\n\tget new_settings() {\n\t\treturn this._new_settings;\n\t}\n\n\tset new_settings(val) {\n\t\tif ( val === this._new_settings )\n\t\t\treturn;\n\n\t\tthis._new_settings = val;\n\t\tthis.update();\n\t}\n\n\tget has_new() {\n\t\treturn this.settings.get('ffz.show-new-settings') && this._new_settings > 0;\n\t}\n\n\tget important_update() {\n\t\treturn this._important_update;\n\t}\n\n\tset important_update(val) {\n\t\tthis._important_update = false;\n\t\tthis.update();\n\t}\n\n\tget has_update() {\n\t\treturn this._has_update;\n\t}\n\n\tget has_strings() {\n\t\treturn this.i18n.new_strings > 0 || this.i18n.changed_strings > 0;\n\t}\n\n\tset has_update(val) {\n\t\tif ( val && ! this._has_update )\n\t\t\tthis._important_update = true;\n\n\t\tthis._has_update = val;\n\t\tthis.update();\n\t}\n\n\tget pill() {\n\t\treturn this._pill_content;\n\t}\n\n\tset pill(val) {\n\t\tthis._pill_content = val;\n\t\tthis.update();\n\t}\n\n\tformatPill() {\n\t\tconst val = this._pill_content;\n\t\tif ( typeof val === 'number' )\n\t\t\treturn this.i18n.formatNumber(val);\n\n\t\tif ( val == null && this.has_new )\n\t\t\treturn this.i18n.formatNumber(this._new_settings);\n\n\t\treturn val;\n\t}\n\n\tformatExtraPill() {\n\t\tif ( this.has_update )\n\t\t\treturn null;\n\n\t\tif ( this.settings.disable_profiles )\n\t\t\treturn <figure class=\"ffz-i-cog\" />;\n\n\t\tif ( this.has_strings )\n\t\t\treturn this.i18n.formatNumber(this.i18n.new_strings + this.i18n.changed_strings);\n\n\t\tconst addons = this.resolve('addons');\n\n\t\tif ( DEBUG && addons.has_dev )\n\t\t\treturn this.i18n.t('site.menu_button.dev', 'dev');\n\n\t\tif ( DEBUG && ! addons.has_dev )\n\t\t\treturn this.i18n.t('site.menu_button.main-dev', 'm-dev');\n\n\t\tif ( ! DEBUG && addons.has_dev )\n\t\t\treturn this.i18n.t('site.menu_button.addon-dev', 'a-dev');\n\n\t\treturn null;\n\t}\n\n\tupdateToasts() {\n\t\trequestAnimationFrame(() => this._updateToasts());\n\t}\n\n\t_updateToasts() {\n\t\tfor(const inst of this.NavBar.instances)\n\t\t\tthis.updateButtonToast(inst);\n\n\t\tfor(const inst of this.SquadBar.instances)\n\t\t\tthis.updateButtonToast(inst);\n\n\t\tfor(const inst of this.MultiController.instances)\n\t\t\tthis.updateButtonToast(inst);\n\n\t\t//for(const inst of this.SunlightDash.instances)\n\t\t//\tthis.updateButtonToast(inst);\n\n\t\tfor(const el of this.SunlightNav.instances)\n\t\t\tthis.updateButtonToast(null, el, true);\n\n\t\tfor(const inst of this.ModBar.instances)\n\t\t\tthis.updateButtonToast(inst);\n\t}\n\n\tupdate() {\n\t\trequestAnimationFrame(() => this._update());\n\t}\n\n\t_update() {\n\t\tfor(const inst of this.NavBar.instances)\n\t\t\tthis.updateButton(inst);\n\n\t\tfor(const inst of this.SquadBar.instances)\n\t\t\tthis.updateButton(inst);\n\n\t\tfor(const inst of this.MultiController.instances)\n\t\t\tthis.updateButton(inst);\n\n\t\t//for(const inst of this.SunlightDash.instances)\n\t\t//\tthis.updateButton(inst);\n\n\t\tfor(const el of this.SunlightNav.instances)\n\t\t\tthis.updateButton(null, el, true);\n\n\t\tfor(const inst of this.ModBar.instances)\n\t\t\tthis.updateButton(inst);\n\t}\n\n\n\tonEnable() {\n\t\tthis.NavBar.ready(() => this.update());\n\t\tthis.NavBar.on('mount', this.updateButton, this);\n\t\tthis.NavBar.on('update', this.updateButton, this);\n\n\t\tthis.SquadBar.ready(() => this.update());\n\t\tthis.SquadBar.on('mount', this.updateButton, this);\n\t\tthis.SquadBar.on('update', this.updateButton, this);\n\n\t\tthis.MultiController.ready(() => this.update());\n\t\tthis.MultiController.on('mount', this.updateButton, this);\n\t\tthis.MultiController.on('update', this.updateButton, this);\n\n\t\t/*this.SunlightDash.ready(() => this.update());\n\t\tthis.SunlightDash.on('mount', this.updateButton, this);\n\t\tthis.SunlightDash.on('update', this.updateButton, this);*/\n\n\t\tthis.SunlightNav.on('mount', el => this.updateButton(null, el, true));\n\t\tthis.SunlightNav.on('mutate', el => this.updateButton(null, el, true));\n\t\tthis.SunlightNav.each(el => this.updateButton(null, el, true));\n\n\t\tthis.ModBar.ready(() => this.update());\n\t\tthis.ModBar.on('mount', this.updateButton, this);\n\t\tthis.ModBar.on('update', this.updateButton, this);\n\n\t\tthis.on(':clicked', () => this.important_update = false);\n\n\t\tthis.once(':clicked', this.loadMenu);\n\n\t\tthis.on('i18n:new-strings', this.update);\n\t\tthis.on('i18n:changed-strings', this.update);\n\t\tthis.on('i18n:update', this.update);\n\t\tthis.on('addons:data-loaded', this.update);\n\n\t\tthis.once('settings:quota-exceeded', () => {\n\t\t\tthis.addError(\n\t\t\t\t'site.menu_button.quota-exceeded',\n\t\t\t\t'Your local storage space for this website is full, and settings cannot be saved. Please backup your settings and switch to a higher capacity provider in [Data Management > Storage >> Provider](~data_management.storage.tabs.provider).',\n\t\t\t\t'ffz-i-attention',\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tthis.update();\n\t\t});\n\n\t\tthis.on('settings:change-provider', () => {\n\t\t\tthis.addError('site.menu_button.changed',\n\t\t\t\t'The FrankerFaceZ settings provider has changed. Please refresh this tab to avoid strange behavior.'\n\t\t\t);\n\t\t\tthis.update()\n\t\t});\n\t}\n\n\n\taddError(i18n, text, icon = 'ffz-i-attention', use_markdown = false) {\n\t\tthis.addToast({\n\t\t\ticon,\n\t\t\ttext_i18n: i18n,\n\t\t\ttext,\n\t\t\tmarkdown: use_markdown\n\t\t});\n\t}\n\n\n\taddToast(data) {\n\t\t/*if ( ! data.id )\n\t\t\tdata.id = generateUUID();*/\n\n\t\tif ( data.markdown ) {\n\t\t\tconst md = getMD();\n\t\t\tif ( ! md )\n\t\t\t\treturn awaitMD().then(() => this.addToast(data));\n\t\t}\n\n\t\tthis.toasts.push(data);\n\t\t// TODO: Sort by ending time?\n\t\tif ( this.toasts.length > 5 )\n\t\t\treturn;\n\n\t\tthis.updateToasts();\n\t}\n\n\n\tpauseToasts() {\n\t\tconst length = Math.min(5, this.toasts.length),\n\t\t\tnow = performance.now();\n\n\t\tthis._toasts_paused = true;\n\n\t\tfor(let i=0; i < length; i++) {\n\t\t\tconst toast = this.toasts[i];\n\t\t\tif ( ! toast || ! toast.started )\n\t\t\t\tcontinue;\n\n\t\t\tif ( toast._timer ) {\n\t\t\t\tclearTimeout(toast._timer);\n\t\t\t\ttoast._timer = null;\n\t\t\t}\n\n\t\t\tconst elapsed = now - toast.started,\n\t\t\t\tremaining = toast.timeout - elapsed;\n\n\t\t\ttoast.remaining = remaining;\n\t\t\ttoast.percentage = 100 * remaining / toast.timeout;\n\n\t\t\tif ( toast.el )\n\t\t\t\ttoast.el.replaceWith(this.renderToast(toast));\n\t\t}\n\t}\n\n\n\tunpauseToasts() {\n\t\tconst length = Math.min(5, this.toasts.length),\n\t\t\tnow = performance.now();\n\t\tthis._toasts_paused = false;\n\n\t\tfor(let i=0; i < length; i++) {\n\t\t\tconst toast = this.toasts[i];\n\t\t\tif ( ! toast || ! toast.started )\n\t\t\t\tcontinue;\n\n\t\t\tif ( toast.remaining ) {\n\t\t\t\tconst elapsed = toast.timeout - toast.remaining;\n\t\t\t\ttoast.started = now - elapsed;\n\t\t\t}\n\n\t\t\tif ( toast.el )\n\t\t\t\ttoast.el.replaceWith(this.renderToast(toast));\n\t\t}\n\t}\n\n\n\trenderToasts() {\n\t\tconst length = Math.min(5, this.toasts.length);\n\t\tif ( ! length )\n\t\t\treturn null;\n\n\t\tconst out = [];\n\t\tfor(let i=0; i < length; i++) {\n\t\t\tout.push(this.renderToast(this.toasts[i]));\n\t\t}\n\n\t\treturn out;\n\t}\n\n\n\trenderToast(data) {\n\t\tif ( ! data._remove )\n\t\t\tdata._remove = () => {\n\t\t\t\tif ( data._timer ) {\n\t\t\t\t\tclearTimeout(data._timer);\n\t\t\t\t\tdata._timer = null;\n\t\t\t\t}\n\n\t\t\t\tdata.el = null;\n\n\t\t\t\tconst idx = this.toasts.indexOf(data);\n\t\t\t\tif ( idx !== -1 ) {\n\t\t\t\t\tthis.toasts.splice(idx, 1);\n\t\t\t\t\tif ( ! this.toasts.length )\n\t\t\t\t\t\tthis._toasts_paused = false;\n\n\t\t\t\t\tthis.updateToasts();\n\t\t\t\t}\n\t\t\t}\n\n\t\tlet progress_bar = null;\n\t\tconst md = data.markdown ? getMD() : null;\n\t\tif ( data.markdown && ! md )\n\t\t\treturn null;\n\n\t\tif ( data.timeout ) {\n\t\t\tconst now = performance.now();\n\t\t\tif ( ! data.started )\n\t\t\t\tdata.started = now;\n\n\t\t\tconst elapsed = now - data.started,\n\t\t\t\tremaining = data.timeout - elapsed;\n\t\t\tlet percentage;\n\n\t\t\tif ( this._toasts_paused )\n\t\t\t\tpercentage = data.percentage;\n\n\t\t\telse if ( ! data._timer )\n\t\t\t\tdata._timer = setTimeout(data._remove, remaining);\n\n\t\t\tif ( percentage == null )\n\t\t\t\tpercentage = data.percentage = 100 * remaining / data.timeout;\n\n\t\t\tprogress_bar = (<div class=\"ffz-toast--progress tw-absolute tw-overflow-hidden tw-z-below\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"tw-border-radius-rounded ffz-progress-bar ffz-progress-bar--countdown ffz-progress-bar--default ffz-progress-bar--mask\"\n\t\t\t\t\trole=\"progressbar\"\n\t\t\t\t\taria-valuenow={percentage}\n\t\t\t\t\taria-valuemin=\"0\"\n\t\t\t\t\taria-valuemax=\"100\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass={`tw-block tw-border-bottom-left-radius-rounded tw-border-top-left-radius-rounded ffz-progress-bar__fill`}\n\t\t\t\t\t\tdata-a-target=\"tw-progress-bar-animation\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: `${percentage}%`,\n\t\t\t\t\t\t\t'animation-duration': `${remaining / 1000}s`\n\t\t\t\t\t\t}}\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>);\n\t\t}\n\n\t\tdata.el = (<div class={`ffz-toast ffz-balloon ffz-balloon--lg tw-mg-y-1${this._toasts_paused ? ' ffz-toast--paused' : ''}`}>\n\t\t\t<div class=\"tw-pd-1 tw-border-radius-large tw-c-background-base tw-c-text-inherit tw-elevation-4 tw-relative\">\n\t\t\t\t<div class=\"tw-flex tw-align-items-start\">\n\t\t\t\t\t{data.icon && (\n\t\t\t\t\t\ttypeof data.icon === 'string' ?\n\t\t\t\t\t\t\t<figure class={`tw-font-size-3 tw-pd-r-1 ${data.icon}`} /> :\n\t\t\t\t\t\t\tdata.icon\n\t\t\t\t\t)}\n\t\t\t\t\t{ data.render ? data.render.call(this, data) : null }\n\t\t\t\t\t{ (data.title || data.text) ? (<div class=\"tw-flex-grow-1\">\n\t\t\t\t\t\t{ data.title ? (<header class=\"tw-semibold tw-font-size-3 tw-pd-b-05\">\n\t\t\t\t\t\t\t{ data.title_i18n ? this.i18n.tList(data.title_i18n, data.title, data) : data.title}\n\t\t\t\t\t\t</header>) : null }\n\t\t\t\t\t\t{ data.text ? (<span class={`${data.lines ? 'ffz--line-clamp' : ''}`} style={{'--ffz-lines': data.lines}}>\n\t\t\t\t\t\t\t{ data.markdown ? <span dangerouslySetInnerHTML={{__html: getMD().render(data.text_i18n ? this.i18n.t(data.text_i18n, data.text, data) : data.text) }} /> : null}\n\t\t\t\t\t\t\t{ data.markdown ? null : (data.text_i18n ? this.i18n.tList(data.text_i18n, data.text, data) : data.text)}\n\t\t\t\t\t\t</span>) : null }\n\t\t\t\t\t</div>) : null}\n\t\t\t\t\t{ ! data.unclosable && (<button\n\t\t\t\t\t\tclass=\"tw-button-icon tw-mg-l-05 tw-relative ffz-il-tooltip__container\"\n\t\t\t\t\t\tonClick={data._remove}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"tw-button-icon__icon\">\n\t\t\t\t\t\t\t<figure class=\"ffz-i-cancel\" />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>)}\n\t\t\t\t</div>\n\t\t\t\t{progress_bar}\n\t\t\t</div>\n\t\t</div>);\n\n\t\treturn data.el;\n\t}\n\n\n\tupdateButtonToast(inst, container, is_sunlight) {\n\t\tconst toast_el = (inst || container)._ffz_toast_el;\n\t\tif ( toast_el ) {\n\t\t\ttoast_el.innerHTML = '';\n\t\t\tsetChildren(toast_el, this.renderToasts(), false, true);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.updateButton(inst, container, is_sunlight);\n\t}\n\n\n\tupdateButton(inst, container, is_sunlight) {\n\t\tconst root = this.fine.getChildNode(inst);\n\t\tlet is_squad = false,\n\t\t\t//is_sunlight = false,\n\t\t\tis_mod = false;\n\n\t\tif ( ! container )\n\t\t\tcontainer = root && root.querySelector('.top-nav__menu');\n\n\t\tif ( ! container ) {\n\t\t\tif ( root && root.classList.contains('squad-stream-top-bar__container') )\n\t\t\t\tcontainer = root;\n\t\t\telse\n\t\t\t\tcontainer = root && root.querySelector('.squad-stream-top-bar__container');\n\n\t\t\tif ( container )\n\t\t\t\tis_squad = true;\n\t\t}\n\n\t\tif ( ! container && inst.handleAddStream ) {\n\t\t\tcontainer = this.fine.searchTree(inst, n => n.classList && n.classList.contains('multiview-stream-page__header'));\n\t\t\tif ( container )\n\t\t\t\tis_squad = true;\n\t\t}\n\n\t\tif ( ! container && inst.getIsAdsEnabled ) {\n\t\t\tcontainer = root && root.querySelector('.sunlight-top-nav > .tw-flex > .tw-flex > .tw-justify-content-end > .tw-flex');\n\t\t\tif ( container )\n\t\t\t\tis_sunlight = true;\n\t\t}\n\n\t\tif ( ! container && inst.childContext ) {\n\t\t\tcontainer = root && root.querySelector('.modview-dock > div:last-child');\n\t\t\tif ( container )\n\t\t\t\tis_mod = true;\n\t\t}\n\n\t\tif ( ! container )\n\t\t\treturn;\n\n\t\tif ( ! is_squad && ! is_mod && ! is_sunlight ) {\n\t\t\tlet user_stuff = null;\n\t\t\ttry {\n\t\t\t\tuser_stuff = container.querySelector(':scope > .tw-justify-content-end:last-child');\n\t\t\t} catch(err) { /* dumb browsers with no :scope are dumb */ }\n\n\t\t\tif ( user_stuff )\n\t\t\t\tcontainer = user_stuff;\n\t\t\telse\n\t\t\t\tcontainer = container.lastElementChild;\n\t\t}\n\n\t\tlet btn, el = container.querySelector('.ffz-top-nav');\n\t\tif ( el )\n\t\t\tel.remove();\n\n\t\tconst addons = this.resolve('addons'),\n\t\t\ttoasts = this.renderToasts(),\n\t\t\tpill = this.formatPill(),\n\t\t\textra_pill = this.formatExtraPill();\n\n\t\tel = (<div\n\t\t\tclass={`ffz-top-nav ${is_mod ? 'ffz-mod-view-button tw-relative tw-mg-b-1' : `tw-align-self-center tw-flex-grow-0 tw-flex-nowrap tw-flex-shrink-0 tw-relative ${is_sunlight ? 'tw-mg-l-05 tw-mg-r-2' : 'tw-mg-x-05'}`}`}\n\t\t>\n\t\t\t<div class=\"tw-inline-flex tw-relative ffz-il-tooltip__container\">\n\t\t\t\t{btn = (<button\n\t\t\t\t\tclass={`tw-align-items-center tw-align-middle tw-border-bottom-left-radius-medium tw-border-bottom-right-radius-medium tw-border-top-left-radius-medium tw-border-top-right-radius-medium tw-button-icon ffz-core-button ffz-core-button--border tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative${this.loading ? ' loading' : ''}`}\n\t\t\t\t\tonClick={e => this.handleClick(e, btn)} // eslint-disable-line react/jsx-no-bind\n\t\t\t\t\tonContextMenu={e => this.renderContext(e, btn)} // eslint-disable-line react/jsx-no-bind\n\t\t\t\t>\n\t\t\t\t\t<div class=\"tw-align-items-center tw-flex tw-flex-grow-0\">\n\t\t\t\t\t\t<span class=\"tw-button-icon__icon\">\n\t\t\t\t\t\t\t<figure class=\"ffz-i-zreknarf\" />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</button>)}\n\t\t\t\t{this.has_error && (<div class={`tw-absolute ffz-balloon ffz-balloon--lg tw-block ${is_mod ? 'ffz-il-tooltip--up ffz-il-tooltip--align-left' : 'ffz-il-tooltip--down ffz-il-tooltip--align-right'}`}>\n\t\t\t\t\t<div class=\"tw-border-radius-large tw-c-background-base tw-c-text-inherit tw-elevation-4 tw-pd-1\">\n\t\t\t\t\t\t<div class=\"tw-flex tw-align-items-center\">\n\t\t\t\t\t\t\t<div class=\"tw-flex-grow-1\">\n\t\t\t\t\t\t\t\t{ this.error.i18n ? this.i18n.t(this.error.i18n, this.error.text) : this.error.text }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{this.error.permanent ? null : (<button\n\t\t\t\t\t\t\t\tclass=\"tw-button-icon tw-mg-l-05 tw-relative ffz-il-tooltip__container\"\n\t\t\t\t\t\t\t\tonClick={() => this.error = null} // eslint-disable-line react/jsx-no-bind\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"tw-button-icon__icon\">\n\t\t\t\t\t\t\t\t\t<figure class=\"ffz-i-cancel\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</button>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>)}\n\t\t\t\t<div class={`ffz-il-tooltip ${is_mod ? 'ffz-il-tooltip--up ffz-il-tooltip--align-left' : 'ffz-il-tooltip--down ffz-il-tooltip--align-right'}`}>\n\t\t\t\t\t{this.i18n.t('site.menu_button', 'FrankerFaceZ Control Center')}\n\t\t\t\t\t{this.has_update && (<div class=\"tw-mg-t-1\">\n\t\t\t\t\t\t{this.i18n.t('site.menu_button.update-desc', 'There is an update available. Please refresh your page.')}\n\t\t\t\t\t</div>)}\n\t\t\t\t\t{this.settings.disable_profiles && (<div class=\"tw-mg-t-1\">\n\t\t\t\t\t\t{this.i18n.tList('site.menu_button.no-settings', 'Settings are disabled in this tab due to the inclusion of \"{param}\" in the URL.', {\n\t\t\t\t\t\t\tparam: <code class=\"ffz-monospace\">?ffz-no-settings</code>\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>)}\n\t\t\t\t\t{this._new_settings > 0 && (<div class=\"tw-mg-t-1\">\n\t\t\t\t\t\t{this.i18n.t('site.menu_button.new-desc', 'There {count,plural,one {is one new setting} other {are # new settings}}.', {count: this._new_settings})}\n\t\t\t\t\t</div>)}\n\t\t\t\t\t{this.has_strings && (<div class=\"tw-mg-t-1\">\n\t\t\t\t\t\t{this.i18n.t('site.menu_button.strings', 'There {added,plural,one {is # new string} other {are # new strings}} and {changed,plural,one {# changed string} other {# changed strings}}.', {\n\t\t\t\t\t\t\tadded: this.i18n.new_strings,\n\t\t\t\t\t\t\tchanged: this.i18n.changed_strings\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>)}\n\t\t\t\t\t{DEBUG && (<div class=\"tw-mg-t-1\">\n\t\t\t\t\t\t{this.i18n.t('site.menu_button.main-dev-desc', 'You are running a developer build of FrankerFaceZ.')}\n\t\t\t\t\t</div>)}\n\t\t\t\t\t{addons.has_dev && (<div class=\"tw-mg-t-1\">\n\t\t\t\t\t\t{this.i18n.t('site.menu_button.addon-dev-desc', 'You have loaded add-on data from a local development server.')}\n\t\t\t\t\t</div>)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{(inst || container)._ffz_toast_el = (<div\n\t\t\t\tclass={`ffz-toast--container tw-absolute tw-block ${is_mod ? 'ffz-il-tooltip--up ffz-il-tooltip--align-left' : 'ffz-il-tooltip--down ffz-il-tooltip--align-right'}`}\n\t\t\t\tonmouseenter={this.pauseToasts}\n\t\t\t\tonmouseleave={this.unpauseToasts}\n\t\t\t>\n\t\t\t\t{toasts}\n\t\t\t</div>)}\n\t\t\t{this.has_update && (<div class=\"ffz-menu__extra-pill tw-absolute\">\n\t\t\t\t<div class={`tw-pill ${this.important_update ? 'tw-pill--notification' : ''}`}>\n\t\t\t\t\t<figure class=\"ffz-i-arrows-cw\" />\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t\t{extra_pill && (<div class=\"ffz-menu__extra-pill tw-absolute\">\n\t\t\t\t<div class=\"tw-pill\">\n\t\t\t\t\t{extra_pill}\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t\t{pill && (<div class=\"ffz-menu__pill tw-absolute\">\n\t\t\t\t<div class=\"tw-pill\">\n\t\t\t\t\t{pill}\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t</div>);\n\n\t\tif ( is_mod )\n\t\t\tcontainer.insertBefore(el, container.firstElementChild);\n\t\telse {\n\t\t\tlet before = container.lastElementChild;\n\t\t\tif ( before && before.classList.contains('resize-detector') )\n\t\t\t\tbefore = before.previousElementSibling;\n\n\t\t\tif ( before )\n\t\t\t\tcontainer.insertBefore(el, before);\n\t\t\telse\n\t\t\t\tcontainer.appendChild(el);\n\t\t}\n\n\t\tif ( this._ctx_open )\n\t\t\tthis.renderContext(null, btn);\n\t}\n\n\thandleClick(event, btn) {\n\t\tif ( event.shiftKey ) {\n\t\t\tif ( DEBUG && event.ctrlKey )\n\t\t\t\treturn requestAnimationFrame(() => this.i18n.openUI());\n\n\t\t\treturn this.resolve('main_menu').openPopout();\n\t\t}\n\n\t\tthis.emit(':clicked', event, btn);\n\t}\n\n\trenderButtonIcon(profile) {\n\t\tconst live = this.settings.main_context.hasProfile(profile);\n\t\treturn (<figure class={`ffz--profile__icon ${live ? 'ffz-i-ok' : profile.toggled ? 'ffz-i-minus' : 'ffz-i-cancel'}`} />);\n\t}\n\n\trenderButtonTip(profile) {\n\t\tif ( ! profile.toggled )\n\t\t\treturn this.i18n.t('setting.profiles.disabled', 'This profile is disabled.');\n\n\t\tif ( this.settings.main_context.hasProfile(profile) )\n\t\t\treturn this.i18n.t('setting.profiles.active', 'This profile is enabled and active.');\n\n\t\treturn this.i18n.t('setting.profiles.disabled.rules', 'This profile is enabled, but inactive due to its rules.');\n\t}\n\n\trenderContext(event, btn) {\n\t\tif ( event ) {\n\t\t\tif ( event.shiftKey || event.ctrlKey )\n\t\t\t\treturn;\n\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tconst container = btn.parentElement.parentElement,\n\t\t\tis_mod = container.classList.contains('ffz-mod-view-button');\n\t\tlet ctx = container.querySelector('.ffz--menu-context');\n\t\tif ( ctx ) {\n\t\t\tif ( ctx._ffz_destroy )\n\t\t\t\tctx._ffz_destroy();\n\t\t\telse\n\t\t\t\treturn;\n\t\t}\n\n\t\tconst destroy = () => {\n\t\t\tthis._ctx_open = false;\n\n\t\t\tif ( ctx._ffz_outside )\n\t\t\t\tctx._ffz_outside.destroy();\n\n\t\t\tctx.remove();\n\t\t}\n\n\t\tconst profiles = [];\n\n\t\tfor(const profile of this.settings.__profiles) {\n\t\t\tconst toggle = (<button\n\t\t\t\tclass=\"tw-flex-shrink-0 tw-mg-r-1 tw-align-items-center tw-align-middle tw-border-radius-medium tw-button-icon tw-button-icon--secondary ffz-core-button ffz-core-button--border tw-inline-flex tw-interactive tw-justify-content-center tw-relative ffz-tooltip ffz-tooltip--no-mouse\"\n\t\t\t\tdata-title={this.renderButtonTip(profile)}\n\t\t\t\tonClick={e => {  // eslint-disable-line react/jsx-no-bind\n\t\t\t\t\tprofile.toggled = ! profile.toggled;\n\n\t\t\t\t\tsetChildren(toggle, this.renderButtonIcon(profile));\n\t\t\t\t\ttoggle.dataset.title = this.renderButtonTip(profile);\n\n\t\t\t\t\tif ( toggle['_ffz_tooltip']?.rerender )\n\t\t\t\t\t\ttoggle['_ffz_tooltip'].rerender();\n\n\t\t\t\t\tthis.emit('tooltips:cleanup');\n\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{ this.renderButtonIcon(profile) }\n\t\t\t</button>)\n\n\t\t\tconst desc_key = profile.desc_i18n_key || profile.i18n_key && `${profile.i18n_key}.description`;\n\n\t\t\tprofiles.push(<div class=\"tw-relative tw-border-b tw-pd-y-05 tw-pd-x-1 tw-flex\">\n\t\t\t\t{toggle}\n\t\t\t\t<div>\n\t\t\t\t\t<h4>{ profile.i18n_key ? this.i18n.t(profile.i18n_key, profile.name, profile) : profile.name }{profile.ephemeral && (<div\n\t\t\t\t\t\tclass=\"tw-inline tw-mg-l-05 ffz-il-tooltip__container ffz--profile-row__icon ffz-i-user-secret tw-relative\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-center\">\n\t\t\t\t\t\t\t{ this.i18n.t('setting.profiles.ephemeral', 'This profile is ephemeral.') }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>)}</h4>\n\t\t\t\t\t{profile.description && (<div class=\"description\">\n\t\t\t\t\t\t{ desc_key ? this.i18n.t(desc_key, profile.description, profile) : profile.description }\n\t\t\t\t\t</div>)}\n\t\t\t\t</div>\n\t\t\t</div>);\n\t\t}\n\n\n\t\tctx = (<div class={`tw-absolute ffz-attached ${is_mod ? 'ffz-attached--up ffz-attached--left' : 'ffz-attached--down ffz-attached--right'}`}>\n\t\t\t<div class={`ffz-balloon ffz-balloon--lg tw-block ffz--menu-context`}>\n\t\t\t\t<div class=\"tw-border-radius-large tw-c-background-base tw-c-text-inherit tw-elevation-4\">\n\t\t\t\t\t<div class=\"tw-c-text-base tw-elevation-1 tw-flex tw-flex-shrink-0 tw-pd-x-1 tw-pd-y-05 tw-popover-header\">\n\t\t\t\t\t\t<div class=\"tw-flex tw-flex-column tw-justify-content-center tw-mg-l-05 tw-popover-header__icon-slot--left\">\n\t\t\t\t\t\t\t<div class=\"tw-inline-flex tw-relative ffz-il-tooltip__container\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"tw-align-items-center tw-align-middle tw-border-radius-medium tw-button-icon tw-button-icon--secondary ffz-core-button ffz-core-button--border tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden\"\n\t\t\t\t\t\t\t\t\tonDblClick={() => {this.emit('site.player:reset'); destroy()}} // eslint-disable-line react/jsx-no-bind\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"tw-button-icon__icon\">\n\t\t\t\t\t\t\t\t\t\t<figure class=\"ffz-i-t-reset\" />\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<div class=\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-left\">\n\t\t\t\t\t\t\t\t\t{ this.i18n.t('player.reset_button.all', 'Reset All Players (Double-Click)') }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tw-align-items-center tw-flex tw-flex-column tw-flex-grow-1 tw-justify-content-center\">\n\t\t\t\t\t\t\t<h5 class=\"tw-align-center tw-c-text-alt tw-semibold\">\n\t\t\t\t\t\t\t\t{ this.i18n.t('site.menu_button.profiles', 'Profiles') }\n\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tw-flex tw-flex-column tw-justify-content-center tw-mg-l-05 tw-popover-header__icon-slot--right\">\n\t\t\t\t\t\t\t<div class=\"tw-inline-flex tw-relative ffz-il-tooltip__container\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"tw-align-items-center tw-align-middle tw-border-radius-medium tw-button-icon tw-button-icon--secondary ffz-core-button ffz-core-button--border tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden\"\n\t\t\t\t\t\t\t\t\tonClick={e => {this.openSettings(e, btn); destroy()}} // eslint-disable-line react/jsx-no-bind\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"tw-button-icon__icon\">\n\t\t\t\t\t\t\t\t\t\t<figure class=\"ffz-i-cog\" />\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<div class=\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-center\">\n\t\t\t\t\t\t\t\t\t{ this.i18n.t('setting.profiles.configure', 'Configure') }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tw-flex tw-flex-column tw-justify-content-center tw-mg-l-05 tw-popover-header__icon-slot--right\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"tw-align-items-center tw-align-middle tw-border-radius-medium tw-button-icon tw-button-icon--secondary ffz-core-button ffz-core-button--border tw-inline-flex tw-interactive tw-justify-content-center tw-overflow-hidden tw-relative\"\n\t\t\t\t\t\t\t\tonClick={destroy} // eslint-disable-line react/jsx-no-bind\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"tw-button-icon__icon\">\n\t\t\t\t\t\t\t\t\t<figure class=\"ffz-i-cancel\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"center-window__long-scrollable-area scrollable-area scrollable-area--suppress-scroll-x\" data-simplebar>\n\t\t\t\t\t\t{profiles}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>);\n\n\t\tctx._ffz_destroy = destroy;\n\t\tctx._ffz_outside = new ClickOutside(ctx, destroy);\n\t\tcontainer.appendChild(ctx);\n\n\t\tthis._ctx_open = true;\n\t}\n\n\n\topenSettings(event, btn) {\n\t\tconst menu = this.resolve('main_menu');\n\t\tif ( ! menu )\n\t\t\treturn;\n\n\t\tmenu.requestPage('data_management.profiles');\n\t\tif ( menu.showing )\n\t\t\treturn;\n\n\t\tthis.emit(':clicked', event, btn);\n\t}\n\n\n\tloadMenu(event, btn, page) {\n\t\tconst menu = this.resolve('main_menu');\n\t\tif ( ! menu )\n\t\t\treturn;\n\n\t\tif ( page )\n\t\t\tmenu.requestPage(page);\n\t\tif ( menu.showing )\n\t\t\treturn;\n\n\t\tthis.loading = true;\n\n\t\tmenu.enable(event).then(() => {\n\t\t\tthis.loading = false;\n\n\t\t}).catch(err => {\n\t\t\tthis.log.capture(err);\n\t\t\tthis.log.error('Error enabling main menu.', err);\n\n\t\t\tthis.addError(\n\t\t\t\t'site.menu_button.error',\n\t\t\t\t'There was an error loading the FFZ Control Center. Please refresh and try again.'\n\t\t\t);\n\n\t\t\tthis.loading = false;\n\t\t\tthis.once(':clicked', this.loadMenu);\n\t\t});\n\t}\n\n\tonDisable() {\n\t\tthis.off('i18n:update', this.update);\n\t\tthis.off(':clicked', this.loadMenu);\n\t}\n}\n","'use strict';\n\n// ============================================================================\n// Mod View Module\n// ============================================================================\n\nimport Module from 'utilities/module';\nimport {debounce} from 'utilities/object';\n\n\nexport default class ModView extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.inject('i18n');\n\t\tthis.inject('settings');\n\t\tthis.inject('site.channel');\n\t\tthis.inject('site.css_tweaks');\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site.elemental');\n\t\tthis.inject('site.router');\n\t\tthis.inject('site.twitch_data');\n\t\tthis.inject('metadata');\n\t\tthis.inject('socket');\n\t\tthis.inject('pubsub');\n\n\t\tthis.should_enable = true;\n\n\t\tthis._cached_color = null;\n\t\tthis._cached_channel = null;\n\t\tthis._cached_id = null;\n\n\t\tthis.Root = this.elemental.define(\n\t\t\t'mod-view-root', '.moderation-view-page',\n\t\t\t['mod-view'],\n\t\t\t{attributes: true}, 1\n\t\t);\n\n\t\tthis.ModInfoBar = this.elemental.define(\n\t\t\t'mod-info-bar', '.modview-player-widget__stream-info .simplebar-content',\n\t\t\t['mod-view'],\n\t\t\t{childNodes: true, subtree: true}, 1, 30000, false\n\t\t);\n\n\t\tthis.checkRoot = debounce(this.checkRoot, 250);\n\t\tthis.checkBar = debounce(this.checkBar, 250);\n\t}\n\n\tonEnable() {\n\t\tthis.Root.on('mount', this.updateRoot, this);\n\t\tthis.Root.on('mutate', this.updateRoot, this);\n\t\tthis.Root.on('unmount', this.removeRoot, this);\n\t\tthis.Root.each(el => this.updateRoot(el));\n\n\t\tthis.ModInfoBar.on('mount', this.updateBar, this);\n\t\tthis.ModInfoBar.on('mutate', this.updateBar, this);\n\t\tthis.ModInfoBar.on('unmount', this.removeBar, this);\n\t\tthis.ModInfoBar.each(el => this.updateBar(el));\n\n\t\tthis.router.on(':route', this.checkNavigation, this);\n\t\tthis.checkNavigation();\n\t}\n\n\tupdateSubscription(id, login) {\n\t\tif ( this._subbed_login === login && this._subbed_id === id )\n\t\t\treturn;\n\n\t\tif ( this._subbed_id ) {\n\t\t\tthis.pubsub.unsubscribe(this, `twitch/${this._subbed_id}`);\n\t\t\tthis._subbed_id = null;\n\t\t}\n\n\t\tif ( this._subbed_login ) {\n\t\t\tthis.socket.unsubscribe(this, `channel.${this._subbed_login}`);\n\t\t\tthis._subbed_login = null;\n\t\t}\n\n\t\tif ( id ) {\n\t\t\tthis.pubsub.subscribe(this, `twitch/${id}`);\n\t\t\tthis._subbed_id = id;\n\t\t}\n\n\t\tif ( login ) {\n\t\t\tthis.socket.subscribe(this, `channel.${login}`);\n\t\t\tthis._subbed_login = login;\n\t\t}\n\t}\n\n\tcheckNavigation() {\n\t\tif ( this.router.current_name === 'mod-view' ) {\n\t\t\tthis.channel.updateChannelColor(this._cached_color);\n\t\t\tthis.checkRoot();\n\t\t}\n\t}\n\n\tcheckBar() {\n\t\tthis.ModInfoBar.clean();\n\t}\n\n\tcheckRoot() {\n\t\tthis.Root.each(el => this.updateRoot(el));\n\t}\n\n\tupdateRoot(el) {\n\t\tconst root = this.fine.getReactInstance(el);\n\n\t\tlet channel = null, node = root, j = 0, i;\n\t\twhile(node != null && channel == null && j < 10) {\n\t\t\tlet state = node.memoizedState;\n\t\t\ti = 0;\n\t\t\twhile(state != null && channel == null && i < 50) {\n\t\t\t\tchannel = state?.memoizedState?.current?.result?.data?.user ??\n\t\t\t\t\tstate?.memoizedState?.current?.previousData?.user;\n\n\t\t\t\tstate = state?.next;\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tnode = node?.child;\n\t\t\tj++;\n\t\t}\n\n\t\tif ( channel?.id ) {\n\t\t\tif ( this._cached_id != channel.id ) {\n\t\t\t\tthis._cached_id = channel.id;\n\t\t\t\tthis._cached_channel = channel;\n\t\t\t\tthis._cached_color = null;\n\t\t\t\tthis.updateSubscription(channel.id, channel.login);\n\n\t\t\t\tthis.getChannelColor(el, channel.id).then(color => {\n\t\t\t\t\tif ( this._cached_id != channel.id )\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tthis._cached_color = color;\n\t\t\t\t\tthis.channel.updateChannelColor(color);\n\t\t\t\t\tthis.settings.updateContext({\n\t\t\t\t\t\tchannelColor: color\n\t\t\t\t\t});\n\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tif ( this._cached_id != channel.id )\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tthis._cached_color = null;\n\t\t\t\t\tthis.channel.updateChannelColor();\n\t\t\t\t\tthis.settings.updateContext({\n\t\t\t\t\t\tchannelColor: null\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tthis.settings.updateContext({\n\t\t\t\t\tchannel: channel.login,\n\t\t\t\t\tchannelID: channel.id\n\t\t\t\t});\n\t\t\t}\n\t\t} else\n\t\t\tthis.removeRoot();\n\n\t}\n\n\tgetChannelColor(el, channel_id, no_promise) {\n\t\tconst cache = el._ffz_color_cache = el._ffz_color_cache || {};\n\t\tif ( channel_id === cache.channel_id ) {\n\t\t\tif ( Date.now() - cache.saved < 60000 ) {\n\t\t\t\tif ( no_promise )\n\t\t\t\t\treturn cache.data;\n\t\t\t\treturn Promise.resolve(cache.data);\n\t\t\t}\n\t\t}\n\n\t\treturn new Promise(async (s, f) => {\n\t\t\tif ( cache.updating ) {\n\t\t\t\tcache.updating.push([s, f]);\n\t\t\t\treturn ;\n\t\t\t}\n\n\t\t\tcache.channel_id = channel_id;\n\t\t\tcache.updating = [[s,f]];\n\t\t\tlet data, err;\n\n\t\t\ttry {\n\t\t\t\tdata = await this.twitch_data.getChannelColor(channel_id);\n\t\t\t} catch(error) {\n\t\t\t\tdata = null;\n\t\t\t\terr = error;\n\t\t\t}\n\n\t\t\tconst waiters = cache.updating;\n\t\t\tcache.updating = null;\n\n\t\t\tif ( cache.channel_id !== channel_id ) {\n\t\t\t\terr = new Error('Outdated');\n\t\t\t\tcache.channel_id = null;\n\t\t\t\tcache.data = null;\n\t\t\t\tcache.saved = 0;\n\t\t\t\tfor(const pair of waiters)\n\t\t\t\t\tpair[1](err);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcache.data = data;\n\t\t\tcache.saved = Date.now();\n\n\t\t\tfor(const pair of waiters)\n\t\t\t\terr ? pair[1](err) : pair[0](data);\n\t\t});\n\t}\n\n\tremoveRoot() {\n\t\tthis._cached_id = null;\n\t\tthis._cached_channel = null;\n\t\tthis._cached_color = null;\n\t\tthis.updateSubscription();\n\t\tthis.channel.updateChannelColor();\n\t\tthis.settings.updateContext({\n\t\t\tchannel: null,\n\t\t\tchannelID: null,\n\t\t\tchannelColor: null\n\t\t});\n\t}\n\n\tupdateBar(el) {\n\t\tconst container = el.closest('.modview-player-widget__stream-info'),\n\t\t\troot = container && this.fine.getReactInstance(container);\n\n\t\tlet channel = null, state = root?.return?.memoizedState, i = 0;\n\t\twhile(state != null && channel == null && i < 50 ) {\n\t\t\tchannel = state?.memoizedState?.current?.result?.data?.channel ??\n\t\t\t\tstate?.memoizedState?.current?.previousData?.channel;\n\t\t\tstate = state?.next;\n\t\t\ti++;\n\t\t}\n\n\t\tconst bcast = channel?.lastBroadcast,\n\t\t\ttitle = bcast?.title,\n\t\t\tgame = bcast?.game;\n\n\t\t// This doesn't work because hosting in mod view.\n\t\t//if ( channel?.id && channel.id != this._cached_id )\n\t\t//\tthis.checkRoot();\n\n\t\tif ( this._cached_bar_id != channel?.id ) {\n\t\t\tthis._cached_bar_id = channel?.id;\n\t\t\tthis._cached_bar_channel = channel;\n\t\t}\n\n\t\tif ( title != el._cached_title || game?.id != el._cached_game ) {\n\t\t\tel._cached_title = title;\n\t\t\tel._cached_game = game?.id;\n\n\t\t\tthis.settings.updateContext({\n\t\t\t\tcategory: game?.name,\n\t\t\t\tcategoryID: game?.id,\n\t\t\t\ttitle\n\t\t\t});\n\t\t}\n\n\t\tif ( container ) {\n\t\t\tif ( ! container._ffz_cont ) {\n\t\t\t\tconst e = container._ffz_cont = container.querySelector('.modview-player-widget__viewcount');\n\t\t\t\tif ( e )\n\t\t\t\t\te.classList.add('ffz--mod-tray');\n\t\t\t}\n\n\t\t\tthis.updateMetadata(container);\n\t\t}\n\t}\n\n\tremoveBar(el) {\n\t\tthis.settings.updateContext({\n\t\t\tcategory: null,\n\t\t\tcategoryID: null,\n\t\t\ttitle: null\n\t\t});\n\n\t\tconst container = el.closest('.modview-player-widget__stream-info');\n\t\tif ( ! container )\n\t\t\treturn;\n\n\t\tif ( container._ffz_cont )\n\t\t\tcontainer._ffz_cont.classList.remove('ffz--mod-tray');\n\n\t\tcontainer._ffz_cont = null;\n\t\tif ( container._ffz_meta_timers ) {\n\t\t\tfor(const val of Object.values(container._ffz_meta_timers))\n\t\t\t\tclearTimeout(val);\n\n\t\t\tcontainer._ffz_meta_timers = null;\n\t\t}\n\n\t\tcontainer._ffz_update = null;\n\t}\n\n\tupdateMetadata(el, keys) {\n\t\tconst cont = el._ffz_cont,\n\t\t\tchannel = this._cached_bar_channel;\n\t\t\t//root = this.fine.getReactInstance(el);\n\n\t\t/*let channel = null, state = root?.return?.memoizedState, i = 0;\n\t\twhile(state != null && channel == null && i < 50 ) {\n\t\t\tstate = state?.next;\n\t\t\tchannel = state?.memoizedState?.current?.previousData?.result?.data?.channel;\n\t\t\ti++;\n\t\t}*/\n\n\t\tif ( ! cont || ! document.contains(cont) ) {\n\t\t\tthis.checkBar();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! channel?.id )\n\t\t\treturn;\n\n\t\tif ( ! keys )\n\t\t\tkeys = this.metadata.keys;\n\t\telse if ( ! Array.isArray(keys) )\n\t\t\tkeys = [keys];\n\n\t\tconst timers = el._ffz_meta_timers = el._ffz_meta_timers || {},\n\t\t\trefresh_fn = key => this.updateMetadata(el, key),\n\t\t\tdata = {\n\t\t\t\tchannel: {\n\t\t\t\t\tid: channel.id,\n\t\t\t\t\tlogin: channel.login,\n\t\t\t\t\tdisplay_name: channel.displayName\n\t\t\t\t},\n\t\t\t\tel,\n\t\t\t\tgetViewerCount: () => 0,\n\t\t\t\tgetUserSelfImmediate: () => null,\n\t\t\t\tgetUserSelf: () => null,\n\t\t\t\tgetBroadcastID: () => null\n\t\t\t};\n\n\t\tfor(const key of keys)\n\t\t\tif ( this.metadata.definitions[key].modview )\n\t\t\t\tthis.metadata.renderLegacy(key, data, cont, timers, refresh_fn);\n\n\t}\n\n}\n","'use strict';\n\n// ============================================================================\n// Twitch Player\n// ============================================================================\n\nimport PlayerBase from 'src/sites/shared/player';\n\nexport const PLAYER_ROUTES = [\n\t'front-page', 'user', 'video', 'user-video', 'user-clip', 'user-videos',\n\t'user-clips', 'user-collections', 'user-events', 'user-followers',\n\t'user-following', 'dash', 'squad', 'command-center', 'dash-stream-manager',\n\t'mod-view', 'user-home'\n];\n\n/*const HAS_PITCH = (() => {\n\tconst el = createElement('video');\n\treturn el.preservesPitch != null || el.mozPreservesPitch != null\n})();*/\n\nexport default class Player extends PlayerBase {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.should_enable = true;\n\n\t\t// Dependency Injection\n\t\tthis.inject('site.router');\n\t\tthis.inject('metadata');\n\n\t\t// React Components\n\n\t\t/*this.SquadStreamBar = this.fine.define(\n\t\t\t'squad-stream-bar',\n\t\t\tn => n.shouldRenderSquadBanner && n.props && n.props.triggerPlayerReposition,\n\t\t\tPLAYER_ROUTES\n\t\t);*/\n\n\t\t/*this.PersistentPlayer = this.fine.define(\n\t\t\t'persistent-player',\n\t\t\tn => n.state && n.state.playerStyles\n\t\t);*/\n\n\t\tthis.DataSource = this.fine.define(\n\t\t\t'data-source',\n\t\t\tn => n.consentMetadata && n.onPlaying && n.props && n.props.data,\n\t\t\tPLAYER_ROUTES\n\t\t);\n\n\t\tthis.Player = this.fine.define(\n\t\t\t'highwind-player',\n\t\t\tn => n.setPlayerActive && n.props?.playerEvents && n.props?.mediaPlayerInstance,\n\t\t\tPLAYER_ROUTES\n\t\t);\n\n\t\tthis.TheatreHost = this.fine.define(\n\t\t\t'theatre-host',\n\t\t\tn => n.toggleTheatreMode && n.props && n.props.onTheatreModeEnabled,\n\t\t\t['user', 'user-home', 'video', 'user-video', 'user-clip']\n\t\t);\n\n\t\tthis.PlayerSource = this.fine.define(\n\t\t\t'player-source',\n\t\t\tn => n.setSrc && n.setInitialPlaybackSettings,\n\t\t\tPLAYER_ROUTES\n\t\t);\n\t}\n\n\n\trepositionPlayer() {\n\t\tif ( ! this._mover ) {\n\t\t\tconst el = document.querySelector('.channel-root__player');\n\t\t\tthis._mover = this.fine.searchNode(\n\t\t\t\tel,\n\t\t\t\tn => n.memoizedProps?.triggerPlayerReposition,\n\t\t\t\t50\n\t\t\t);\n\t\t}\n\n\t\tif ( this._mover )\n\t\t\tthis._mover.memoizedProps.triggerPlayerReposition();\n\t}\n\n\n\tregisterSettings() {\n\t\tsuper.registerSettings();\n\n\t\tthis.settings.add('player.home.autoplay', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Playback',\n\t\t\t\ttitle: 'Auto-play featured broadcasters on the front page.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t});\n\n\t\tthis.settings.add('player.theatre.no-whispers', {\n\t\t\tdefault: false,\n\t\t\trequires: ['whispers.show'],\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( ! ctx.get('whispers.show') )\n\t\t\t\t\treturn true;\n\n\t\t\t\treturn val;\n\t\t\t},\n\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Theatre Mode',\n\t\t\t\ttitle: 'Hide whispers when Theatre Mode is enabled.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => this.css_tweaks.toggle('theatre-no-whispers', val)\n\t\t});\n\n\t\tthis.settings.add('player.theatre.metadata', {\n\t\t\tdefault: false,\n\t\t\trequires: ['context.route.name', 'layout.is-theater-mode'],\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( ! ctx.get('layout.is-theater-mode') || ctx.get('context.route.name') === 'video' )\n\t\t\t\t\treturn false;\n\t\t\t\treturn val\n\t\t\t},\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Theatre Mode',\n\t\t\t\ttitle: 'Show metadata when mousing over the player.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: val => this.css_tweaks.toggle('theatre-metadata', val)\n\t\t});\n\n\t\tthis.settings.add('player.theatre.auto-enter', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Theatre Mode',\n\t\t\t\ttitle: 'Automatically open Theatre Mode when visiting a channel.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('player.fullscreen.auto-chat', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Player > General >> Fullscreen',\n\t\t\t\ttitle: 'Automatically expand chat when entering fullscreen mode.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('player.hide-event-bar', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Appearance >> General',\n\t\t\t\ttitle: 'Hide the Event Bar',\n\t\t\t\tdescription: 'Hide the Event Bar which appears above the player when there is an ongoing event for the current channel.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => {\n\t\t\t\tthis.css_tweaks.toggleHide('player-event-bar', val);\n\t\t\t\tthis.repositionPlayer();\n\t\t\t}\n\t\t});\n\n\t\t/*this.settings.add('player.hide-rerun-bar', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Appearance >> General',\n\t\t\t\ttitle: 'Hide the Rerun Bar',\n\t\t\t\tdescription: 'Hide the Rerun Bar which appears above the player when the current channel is playing a video rather than live content.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: val => {\n\t\t\t\tthis.css_tweaks.toggleHide('player-rerun-bar', val);\n\t\t\t\tthis.repositionPlayer();\n\t\t\t}\n\t\t});*/\n\t}\n\n\n\tasync onEnable() {\n\t\tawait super.onEnable();\n\n\t\tthis.css_tweaks.toggle('theatre-no-whispers', this.settings.get('player.theatre.no-whispers'));\n\t\tthis.css_tweaks.toggle('theatre-metadata', this.settings.get('player.theatre.metadata'));\n\t\tthis.css_tweaks.toggleHide('player-event-bar', this.settings.get('player.hide-event-bar'));\n\t\t//this.css_tweaks.toggleHide('player-rerun-bar', this.settings.get('player.hide-rerun-bar'));\n\n\t\tthis.on(':fix-player', this.repositionPlayer, this);\n\n\t\tthis.on('site:fullscreen', this.maybeOpenChat, this);\n\n\t\tthis.TheatreHost.on('mount', inst => {\n\t\t\tinst._ffz_theater_start = Date.now();\n\t\t\tthis.tryTheatreMode(inst);\n\t\t});\n\t\tthis.TheatreHost.on('update', this.tryTheatreMode, this);\n\t\tthis.TheatreHost.ready((cls, instances) => {\n\t\t\tconst now = Date.now();\n\t\t\tfor(const inst of instances) {\n\t\t\t\tinst._ffz_theater_start = now;\n\t\t\t\tthis.tryTheatreMode(inst);\n\t\t\t}\n\t\t});\n\n\t\tthis.PlayerSource.on('mount', this.checkCarousel, this);\n\t\tthis.PlayerSource.on('update', this.checkCarousel, this);\n\t}\n\n\tmaybeOpenChat() {\n\t\tif ( ! this.settings.get('player.fullscreen.auto-chat') )\n\t\t\treturn;\n\n\t\tthis.parent.awaitElement('.right-column--collapsed .right-column__toggle-visibility button', document.fullscreenElement, 1000)\n\t\t\t.then(el => el.click());\n\t}\n\n\tshouldStopAutoplay() {\n\t\treturn this.settings.get('player.no-autoplay') ||\n\t\t\t(! this.settings.get('player.home.autoplay') && this.router.current?.name === 'front-page');\n\t}\n\n\n\tcheckCarousel(inst) {\n\t\t/*if ( this.settings.get('channel.hosting.enable') )\n\t\t\treturn;\n\n\t\tif ( inst.props?.playerType === 'channel_home_carousel' ) {\n\t\t\tif ( inst.props.content?.hostChannel === inst._ffz_cached_login )\n\t\t\t\treturn;\n\n\t\t\tinst._ffz_cached_login = inst.props.content?.hostChannel;\n\t\t\tif ( ! inst._ffz_cached_login )\n\t\t\t\treturn;\n\n\t\t\tconst player = inst.props.mediaPlayerInstance,\n\t\t\t\tevents = inst.props.playerEvents;\n\n\t\t\tthis.stopPlayer(player, events, inst);\n\t\t}*/\n\t}\n\n\n\tgetData() {\n\t\treturn this.DataSource.first;\n\t}\n\n\n\ttryTheatreMode(inst) {\n\t\tif ( ! inst._ffz_theater_timer )\n\t\t\tinst._ffz_theater_timer = setTimeout(() => {\n\t\t\t\tinst._ffz_theater_timer = null;\n\n\t\t\t\tif ( ! this.settings.get('player.theatre.auto-enter') || ! inst._ffz_mounted )\n\t\t\t\t\treturn;\n\n\t\t\t\tif ( this.router.current_name !== 'user' )\n\t\t\t\t\treturn;\n\n\t\t\t\tif ( inst.props.channelHomeLive || inst.props.channelHomeCarousel || inst.props.theatreModeEnabled )\n\t\t\t\t\treturn;\n\n\t\t\t\tif ( Date.now() - (inst._ffz_theater_start ||0) > 2000 )\n\t\t\t\t\treturn;\n\n\t\t\t\tif ( inst.props.onTheatreModeEnabled )\n\t\t\t\t\tinst.props.onTheatreModeEnabled();\n\t\t\t}, 250);\n\t}\n\n\n\t/**\n\t * Tries to reposition the player, using a method exposed on the\n\t * Squad Streaming bar.\n\t *\n\t * @memberof Player\n\t * @returns {void}\n\t */\n\trepositionPlayer() {\n\t\t// TODO: New implementation that works.\n\t}\n\n\tupdateSquadContext() {\n\t\tthis.settings.updateContext({\n\t\t\tsquad_bar: this.hasSquadBar\n\t\t});\n\t}\n\n\tget hasSquadBar() {\n\t\t// TODO: New implementation that works.\n\t\treturn false;\n\t}\n}\n","export default __webpack_public_path__ + \"color_normalizer.css\";","'use strict';\n\n// ============================================================================\n// Menu Module\n// ============================================================================\n\nimport Module from 'utilities/module';\nimport {createElement} from 'utilities/dom';\nimport {Color} from 'utilities/color';\n\n//import THEME_CSS from 'site/styles/theme.scss';\nimport NORMALIZER_CSS_URL from 'site/styles/color_normalizer.scss';\n\nconst BAD_ROUTES = ['product', 'prime', 'turbo'];\n\nconst COLORS = [\n\t-0.62, -0.578, -0.539, -0.469, -0.4, -0.32, -0.21, -0.098, // 1-8\n\t0, // 9\n\t0.08, 0.151, 0.212, 0.271, 0.31, 0.351 // 10-15\n];\n\nconst NO_AUTO_DARK = `:root{color-scheme: only light}`,\n\tNO_FORCED_COLOR = `:root{forced-color-adjust: none}`;\n\n\nconst ACCENT_COLORS = {\n\t//dark: {'c':{'accent': 9,'background-accent':8,'background-accent-alt':7,'background-accent-alt-2':6,'background-button':7,'background-button-active':7,'background-button-focus':8,'background-button-hover':8,'background-button-primary-active':7,'background-button-primary-default':9,'background-button-primary-hover':8,'background-graph':2,'background-graph-fill':8,'background-input-checkbox-checked':9,'background-input-checked':8,'background-interactable-active':9,'background-interactable-selected':9,'background-interactable-hover':8,'background-progress-countdown-status':9,'background-progress-status':9,'background-range-fill':9,'background-subscriber-stream-tag-active':4,'background-subscriber-stream-tag-default':4,'background-subscriber-stream-tag-hover':3,'background-toggle-checked':9,/*'background-tooltip':1,*/'background-top-nav':6,'border-brand':9,'border-button':7,'border-button-active':8,'border-button-focus':9,'border-button-hover':8,'border-input-checkbox-checked':9,'border-input-checkbox-focus':9,'border-input-focus':9,'border-interactable-selected':10,'border-subscriber-stream-tag':5,'border-tab-active':11,'border-tab-focus':11,'border-tab-hover':11,'border-toggle-focus':7,'border-toggle-hover':7,'border-whisper-incoming':10,'fill-brand':9,'text-button-text':10,'text-button-text-focus':'o1','text-button-text-hover':'o1','text-link':10,'text-link-active':10,'text-link-focus':10,'text-link-hover':10,'text-link-visited':10,'text-overlay-link-active':13,'text-overlay-link-focus':13,'text-overlay-link-hover':13,'text-tab-active':11,'background-chat':1,'background-chat-alt':3,'background-chat-header':2,'background-modal':3,'text-button-text-active':'o2'/*,'text-tooltip':1*/},'s':{'button-active':[8,'0 0 6px 0',''],'button-focus':[8,'0 0 6px 0',''],'input-focus':[8,'0 0 10px -2px',''],'interactable-focus':[8,'0 0 6px 0',''],'tab-focus':[11,'0 4px 6px -4px',''],'input':[5,'inset 0 0 0 1px','']}},\n\t//light: {'c':{'accent': 9,'background-accent':8,'background-accent-alt':7,'background-accent-alt-2':6,'background-button':7,'background-button-active':7,'background-button-focus':8,'background-button-hover':8,'background-button-primary-active':7,'background-button-primary-default':9,'background-button-primary-hover':8,'background-graph':15,'background-graph-fill':9,'background-input-checkbox-checked':9,'background-input-checked':8,'background-interactable-active':9,'background-interactable-selected':9,'background-interactable-hover':8,'background-progress-countdown-status':8,'background-progress-status':8,'background-range-fill':9,'background-subscriber-stream-tag-active':13,'background-subscriber-stream-tag-default':13,'background-subscriber-stream-tag-hover':14,'background-toggle-checked':9,/*'background-tooltip':1,*/'background-top-nav':7,'border-brand':9,'border-button':7,'border-button-active':8,'border-button-focus':9,'border-button-hover':8,'border-input-checkbox-checked':9,'border-input-checkbox-focus':9,'border-input-focus':9,'border-interactable-selected':9,'border-subscriber-stream-tag':10,'border-tab-active':8,'border-tab-focus':8,'border-tab-hover':8,'border-toggle-focus':8,'border-toggle-hover':8,'border-whisper-incoming':10,'fill-brand':9,'text-button-text':8,'text-button-text-focus':'o1','text-button-text-hover':'o1','text-link':8,'text-link-active':9,'text-link-focus':9,'text-link-hover':9,'text-link-visited':9,'text-overlay-link-active':13,'text-overlay-link-focus':13,'text-overlay-link-hover':13,'text-tab-active':8},'s':{'button-active':[8,'0 0 6px 0',''],'button-focus':[8,'0 0 6px 0',''],'input-focus':[10,'0 0 10px -2px',''],'interactable-focus':[8,'0 0 6px 1px',''],'tab-focus':[8,'0 4px 6px -4px','']}},\n\t//dark: {'c':{'background-accent':8,'background-accent-alt':7,'background-accent-alt-2':6,'background-button':7,'background-button-active':7,'background-button-focus':8,'background-button-hover':8,'background-button-primary-active':7,'background-button-primary-default':9,'background-button-primary-hover':8,'background-graph':2,'background-graph-fill':8,'background-input-checkbox-checked':9,'background-input-checked':8,'background-interactable-selected':9,'background-progress-countdown-status':9,'background-progress-status':9,'background-range-fill':9,'background-subscriber-stream-tag-active':4,'background-subscriber-stream-tag-default':4,'background-subscriber-stream-tag-hover':3,'background-toggle-checked':9,'background-top-nav':6,'border-brand':9,'border-button':7,'border-button-active':8,'border-button-focus':9,'border-button-hover':8,'border-input-checkbox-checked':9,'border-input-checkbox-focus':9,'border-input-focus':9,'border-interactable-selected':10,'border-subscriber-stream-tag':5,'border-tab-active':11,'border-tab-focus':11,'border-tab-hover':11,'border-toggle-focus':7,'border-toggle-hover':7,'border-whisper-incoming':10,'fill-brand':9,'text-button-text':10,'text-button-text-focus':'o1','text-button-text-hover':'o1','text-link':10,'text-link-active':10,'text-link-focus':10,'text-link-hover':10,'text-link-visited':10,'text-overlay-link-active':13,'text-overlay-link-focus':13,'text-overlay-link-hover':13,'text-tab-active':11,'background-chat':1,'background-chat-alt':3,'background-chat-header':2,'background-modal':3,'text-button-text-active':'o2'},'s':{'button-active':[8,'0 0 6px 0',''],'button-focus':[8,'0 0 6px 0',''],'input-focus':[8,'0 0 10px -2px',''],'interactable-focus':[8,'0 0 6px 0',''],'tab-focus':[11,'0 4px 6px -4px',''],'input':[5,'inset 0 0 0 1px','']}},\n\t//light: {'c':{'background-accent':8,'background-accent-alt':7,'background-accent-alt-2':6,'background-button':7,'background-button-active':7,'background-button-focus':8,'background-button-hover':8,'background-button-primary-active':7,'background-button-primary-default':9,'background-button-primary-hover':8,'background-graph':15,'background-graph-fill':9,'background-input-checkbox-checked':9,'background-input-checked':8,'background-interactable-selected':9,'background-progress-countdown-status':8,'background-progress-status':8,'background-range-fill':9,'background-subscriber-stream-tag-active':13,'background-subscriber-stream-tag-default':13,'background-subscriber-stream-tag-hover':14,'background-toggle-checked':9,'background-top-nav':7,'border-brand':9,'border-button':7,'border-button-active':8,'border-button-focus':9,'border-button-hover':8,'border-input-checkbox-checked':9,'border-input-checkbox-focus':9,'border-input-focus':9,'border-interactable-selected':9,'border-subscriber-stream-tag':10,'border-tab-active':8,'border-tab-focus':8,'border-tab-hover':8,'border-toggle-focus':8,'border-toggle-hover':8,'border-whisper-incoming':10,'fill-brand':9,'text-button-text':8,'text-button-text-focus':'o1','text-button-text-hover':'o1','text-link':8,'text-link-active':9,'text-link-focus':9,'text-link-hover':9,'text-link-visited':9,'text-overlay-link-active':13,'text-overlay-link-focus':13,'text-overlay-link-hover':13,'text-tab-active':8},'s':{'button-active':[8,'0 0 6px 0',''],'button-focus':[8,'0 0 6px 0',''],'input-focus':[10,'0 0 10px -2px',''],'interactable-focus':[8,'0 0 6px 1px',''],'tab-focus':[8,'0 4px 6px -4px','']}},\n\tdark: {'c':{'background-brand':11,'background-accent':8,'background-accent-alt':7,'background-accent-alt-2':6,'background-button':7,'background-button-active':7,'background-button-focus':8,'background-button-hover':8,'background-button-primary-active':7,'background-button-primary-default':9,'background-button-primary-hover':8,'background-chat':1,'background-chat-alt':3,'background-chat-header':2,'background-graph':2,'background-graph-fill':8,'background-input-checkbox-checked':10,'background-input-checked':8,'background-interactable-selected':9,'background-modal':3,'background-progress-countdown-status':9,'background-progress-status':9,'background-range-fill':10,'background-subscriber-stream-tag-active':4,'background-subscriber-stream-tag-default':4,'background-subscriber-stream-tag-hover':3,'background-toggle-checked':2,'background-toggle-handle-checked':10,'background-top-nav':6,'border-brand':9,'border-button':7,'border-button-active':8,'border-button-focus':9,'border-button-hover':8,'border-input-checkbox-checked':10,'border-input-checkbox-focus':10,'border-input-focus':10,'border-interactable-selected':10,'border-range-handle':10,'border-subscriber-stream-tag':5,'border-tab-active':11,'border-tab-focus':11,'border-tab-hover':11,'border-toggle-checked':10,'border-toggle-focus':10,'border-whisper-incoming':10,'fill-brand':9,'text-button-text-active':'o2','text-link':10,'text-link-active':10,'text-link-focus':10,'text-link-hover':10,'text-link-visited':10,'text-overlay-link-active':13,'text-overlay-link-focus':13,'text-overlay-link-hover':13,'text-tab-active':11,'text-toggle-checked-icon':10,'text-tooltip':1,'text-button-text':10},'s':{'button-active':[8,' 0 0 6px 0',''],'button-focus':[8,' 0 0 6px 0',''],'input':[5,' inset 0 0 0 1px',''],'input-focus':[8,' 0 0 10px -2px',''],'interactable-focus':[8,' 0 0 6px 0',''],'tab-focus':[11,' 0 4px 6px -4px','']}},\n\tlight: {'c':{'background-accent':8,'background-accent-alt':7,'background-accent-alt-2':6,'background-button':7,'background-button-active':7,'background-button-focus':8,'background-button-hover':8,'background-button-primary-active':7,'background-button-primary-default':9,'background-button-primary-hover':8,'background-chat':1,'background-chat-alt':3,'background-chat-header':2,'background-graph':15,'background-graph-fill':9,'background-input-checkbox-checked':9,'background-input-checked':8,'background-interactable-selected':9,'background-modal':3,'background-progress-countdown-status':8,'background-progress-status':8,'background-range-fill':9,'background-subscriber-stream-tag-active':13,'background-subscriber-stream-tag-default':13,'background-subscriber-stream-tag-hover':14,'background-toggle-checked':15,'background-top-nav':7,'background-toggle-handle-checked':10,'border-brand':9,'border-button':7,'border-button-active':8,'border-button-focus':9,'border-button-hover':8,'border-input-checkbox-checked':9,'border-input-checkbox-focus':9,'border-input-focus':9,'border-interactable-selected':9,'border-range-handle':9,'border-subscriber-stream-tag':10,'border-tab-active':8,'border-tab-focus':8,'border-tab-hover':8,'border-toggle-checked':9,'border-toggle-focus':9,'border-whisper-incoming':10,'fill-brand':9,'text-button-text-active':'o2','text-link':8,'text-link-active':9,'text-link-focus':9,'text-link-hover':9,'text-link-visited':9,'text-overlay-link-active':13,'text-overlay-link-focus':13,'text-overlay-link-hover':13,'text-tab-active':8,'text-toggle-checked-icon':9,'text-tooltip':1,'text-button-text':8,'background-tooltip':1,'text-button-text-focus':'o1','text-button-text-hover':'o1'},'s':{'button-active':[8,' 0 0 6px 0',''],'button-focus':[8,' 0 0 6px 0',''],'input':[5,' inset 0 0 0 1px',''],'input-focus':[10,' 0 0 10px -2px',''],'interactable-focus':[8,' 0 0 6px 1px',''],'tab-focus':[8,' 0 4px 6px -4px','']}},\n\taccent_dark: {'c':{'accent-hover':10,'accent':9,'accent-primary-1':1,'accent-primary-2':5,'accent-primary-3':6,'accent-primary-4':7,'accent-primary-5':8},'s':{}},\n\taccent_light: {'c':{'accent-hover':10,'accent':9,'accent-primary-1':1,'accent-primary-2':5,'accent-primary-3':6,'accent-primary-4':7,'accent-primary-5':8},'s':{}}\n};\n\n\nexport default class ThemeEngine extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\t\tthis.inject('settings');\n\n\t\tthis.inject('site');\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site.css_tweaks');\n\t\tthis.inject('site.router');\n\n\t\tthis.should_enable = true;\n\n\n\t\t// Tweaks\n\n\t\tthis.settings.add('theme.high-contrast-tweaks', {\n\t\t\tdefault: null,\n\t\t\trequires: ['context.is-forced-colors', 'theme.disable-high-contrast'],\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( val === null ) {\n\t\t\t\t\tif ( ctx.get('theme.disable-high-contrast') )\n\t\t\t\t\t\treturn false;\n\t\t\t\t\treturn ctx.get('context.is-forced-colors') ?? false;\n\t\t\t\t}\n\t\t\t\treturn val;\n\t\t\t},\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Theme >> Tweaks',\n\t\t\t\ttitle: 'Enable the use of High Contrast tweaks.',\n\t\t\t\tdescription: 'This loads an additional set of styles when Forced Color / OS High Contrast mode is enabled to ensure page elements are displayed more appropriately.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t});\n\n\t\tthis.settings.add('theme.disable-high-contrast', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Theme >> Tweaks',\n\t\t\t\ttitle: 'Disable Forced Color / OS High Contrast',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\tdescription: 'Enabling this will instruct your browser to not respect your operating system\\'s High Contrast settings when displaying Twitch. You may need to refresh for this to take full effect.'\n\t\t\t},\n\t\t\tchanged: () => this.updateCSS()\n\t\t});\n\n\t\tthis.settings.add('theme.disable-auto-dark', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Theme >> Tweaks @{\"sort\": 10}',\n\t\t\t\ttitle: 'Disable Auto Dark Theme',\n\t\t\t\tcomponent: 'setting-check-box',\n\t\t\t\tdescription: 'Enabling this will attempt to disable a browser\\'s built-in automatic dark theme conversion for websites, which is unnecessary on Twitch and can cause display issues. This may not apply depending on your web browser and settings.'\n\t\t\t},\n\t\t\tchanged: () => this.updateCSS()\n\t\t});\n\n\t\tthis.settings.add('theme.legacy-dark-input', {\n\t\t\tdefault: false,\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Theme >> Tweaks',\n\t\t\t\ttitle: 'Use old input element colors with dark theme.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\t\t\tchanged: () => this.updateCSS()\n\t\t});\n\n\t\t// Font\n\n\t\tthis.settings.add('theme.font.size', {\n\t\t\tdefault: 13,\n\t\t\tprocess(ctx, val) {\n\t\t\t\tif ( typeof val !== 'number' )\n\t\t\t\t\ttry {\n\t\t\t\t\t\tval = parseFloat(val);\n\t\t\t\t\t} catch(err) { val = null; }\n\n\t\t\t\tif ( ! val || val < 1 || isNaN(val) || ! isFinite(val) || val > 25 )\n\t\t\t\t\tval = 13;\n\n\t\t\t\treturn val;\n\t\t\t},\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Theme >> Fonts @{\"sort\": 2}',\n\t\t\t\ttitle: 'Font Size',\n\t\t\t\tdescription: '**Minimum:** `1`, **Maximum:** `25`, *Old Default:* `12`\\n\\nHow large should normal text be, in pixels. This may be affected by your browser\\'s zoom and font settings.',\n\t\t\t\tcomponent: 'setting-text-box',\n\t\t\t\ttype: 'number'\n\t\t\t},\n\t\t\tchanged: () => this.updateFont()\n\t\t});\n\n\n\t\t// Colors\n\n\t\tthis.settings.add('theme.color.background', {\n\t\t\tdefault: '',\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Theme >> Colors @{\"sort\": 0, \"description\": \"This is a quick preview of a new system coming soon to FrankerFaceZ. Expect heavy changes here, including separate Basic and Advanced modes, and better color selection.\"}',\n\t\t\t\ttitle: 'Background',\n\t\t\t\tdescription: 'Try `#0E0C13` for something close to the old dark theme, or `#0E0E0E` for a nice dark gray. Transparent colors not allowed.',\n\t\t\t\tcomponent: 'setting-color-box',\n\t\t\t\tsort: 0,\n\t\t\t\talpha: false\n\t\t\t},\n\t\t\tchanged: () => this.updateCSS()\n\t\t});\n\n\t\tthis.settings.add('theme.color.text', {\n\t\t\tdefault: '',\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Theme >> Colors',\n\t\t\t\ttitle: 'Text',\n\t\t\t\tdescription: 'If not set, this will automatically be set to white or black based on the brightness of the background.',\n\t\t\t\tcomponent: 'setting-color-box',\n\t\t\t\tsort: 1\n\t\t\t},\n\t\t\tchanged: () => this.updateCSS()\n\t\t});\n\n\t\tthis.settings.add('theme.color.accent', {\n\t\t\tdefault: '',\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Theme >> Colors',\n\t\t\t\ttitle: 'Accent',\n\t\t\t\tdescription: 'The accent color is used for buttons, links, etc.',\n\t\t\t\tcomponent: 'setting-color-box',\n\t\t\t\talpha: false,\n\t\t\t\tsort: 2\n\t\t\t},\n\t\t\tchanged: () => this.updateCSS()\n\t\t});\n\n\t\tthis.settings.add('theme.color.tooltip.background', {\n\t\t\tdefault: '',\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Theme >> Colors',\n\t\t\t\ttitle: 'Tooltip Background',\n\t\t\t\tdescription: 'If not set, the tooltip settings will be automatically adjusted based on the brightness of the background.',\n\t\t\t\tcomponent: 'setting-color-box',\n\t\t\t\talpha: true,\n\t\t\t\tsort: 10\n\t\t\t},\n\t\t\tchanged: () => this.updateCSS()\n\t\t});\n\n\t\tthis.settings.add('theme.color.tooltip.text', {\n\t\t\tdefault: '',\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Theme >> Colors',\n\t\t\t\ttitle: 'Tooltip Text',\n\t\t\t\tcomponent: 'setting-color-box',\n\t\t\t\tsort: 11\n\t\t\t},\n\t\t\tchanged: () => this.updateCSS()\n\t\t});\n\n\n\t\tthis.settings.add('theme.color.chat-background', {\n\t\t\tdefault: '',\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Theme >> Chat Colors @{\"sort\":1}',\n\t\t\t\ttitle: 'Background',\n\t\t\t\tcomponent: 'setting-color-box',\n\t\t\t\tsort: 0,\n\t\t\t\talpha: false\n\t\t\t},\n\t\t\tchanged: () => this.updateCSS()\n\t\t});\n\n\t\tthis.settings.add('theme.color.chat-text', {\n\t\t\tdefault: '',\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Theme >> Chat Colors',\n\t\t\t\ttitle: 'Text',\n\t\t\t\tdescription: 'If not set, this will automatically be set to white or black based on the brightness of the background.',\n\t\t\t\tcomponent: 'setting-color-box',\n\t\t\t\tsort: 1\n\t\t\t},\n\t\t\tchanged: () => this.updateCSS()\n\t\t});\n\n\t\tthis.settings.add('theme.color.chat-accent', {\n\t\t\tdefault: '',\n\t\t\tui: {\n\t\t\t\tpath: 'Appearance > Theme >> Chat Colors',\n\t\t\t\ttitle: 'Accent',\n\t\t\t\tdescription: 'The accent color is used for buttons, links, etc.',\n\t\t\t\tcomponent: 'setting-color-box',\n\t\t\t\talpha: false,\n\t\t\t\tsort: 2\n\t\t\t},\n\t\t\tchanged: () => this.updateCSS()\n\t\t});\n\n\t\tthis.settings.add('theme.can-dark', {\n\t\t\trequires: ['context.route.name'],\n\t\t\tprocess(ctx) {\n\t\t\t\treturn ! BAD_ROUTES.includes(ctx.get('context.route.name'))\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('theme.is-dark', {\n\t\t\trequires: ['context.force-dark', 'theme.can-dark', 'context.ui.theme', 'context.ui.theatreModeEnabled', 'context.route.name', 'context.location.search'],\n\t\t\tprocess(ctx) {\n\t\t\t\tconst force = ctx.get('context.force-theme');\n\t\t\t\tif ( force != null )\n\t\t\t\t\treturn force;\n\n\t\t\t\tif ( ctx.get('context.route.name') === 'embed-chat' )\n\t\t\t\t\treturn (ctx.get('context.location.search')||'').includes('dark');\n\n\t\t\t\treturn ctx.get('context.ui.theatreModeEnabled') || (ctx.get('theme.can-dark') && ctx.get('context.ui.theme') === 1);\n\t\t\t},\n\t\t\tchanged: () => this.updateCSS()\n\t\t});\n\n\t\tthis.settings.add('theme.tooltips-dark', {\n\t\t\trequires: ['theme.is-dark'],\n\t\t\tprocess(ctx) {\n\t\t\t\treturn ! ctx.get('theme.is-dark')\n\t\t\t}\n\t\t});\n\n\t\tthis._style = null;\n\t\tthis._normalizer = null;\n\t}\n\n\n\tupdateFont() {\n\t\tlet size = this.settings.get('theme.font.size');\n\t\tif ( typeof size === 'string' && /^[0-9.]+$/.test(size) )\n\t\t\tsize = parseFloat(size);\n\t\telse if ( typeof size !== 'number' )\n\t\t\tsize = null;\n\n\t\tif ( ! size || isNaN(size) || ! isFinite(size) || size < 1 || size === 13 ) {\n\t\t\tthis.css_tweaks.delete('font-size');\n\t\t\treturn;\n\t\t}\n\n\t\tsize = size / 10;\n\n\t\tthis.css_tweaks.set('font-size', `html body {\n\t--font-size-1: ${(54/13) * size}rem;\n\t--font-size-2: ${(36/13) * size}rem;\n\t--font-size-3: ${(24/13) * size}rem;\n\t--font-size-4: ${(18/13) * size}rem;\n\t--font-size-5: ${(14/13) * size}rem;\n\t--font-size-6: ${size}rem;\n\t--font-size-7: ${(12/13) * size}rem;\n\t--font-size-8: ${(12/13) * size}rem;\n\t--font-size-base: ${size}rem;\n}\n`);\n\t}\n\n\n\tgenerateBackgroundTextBlob(color) {\n\t\tconst hsla = color.toHSLA(),\n\t\t\tluma = hsla.l,\n\t\t\tdark = luma < 0.5;\n\n\t\treturn this.generateBackgroundBlob(color) + this.generateTextBlob(Color.RGBA.fromCSS(dark ? '#FFF' : '#000'));\n\t}\n\n\n\tgenerateBackgroundBlob(color) { // eslint-disable-line class-methods-use-this\n\t\tconst hsla = color.toHSLA(),\n\t\t\tluma = hsla.l,\n\t\t\tdark = luma < 0.5;\n\n\t\treturn [\n\t\t\t`--color-background-body:${color.toCSS()};`,\n\t\t\t`--color-background-input-focus:${color.toCSS()};`,\n\t\t\t`--color-background-base:${hsla._l(luma + (dark ? 0.05 : -0.05)).toCSS()};`,\n\t\t\t`--color-background-alt:${hsla._l(luma + (dark ? 0.1 : -0.1)).toCSS()};`,\n\t\t\t`--color-background-float:var(--color-background-alt);`,\n\t\t\t`--color-background-alt-2:${hsla._l(luma + (dark ? 0.15 : -0.15)).toCSS()};`\n\t\t].join('');\n\t}\n\n\n\tgenerateTextBlob(color) { // eslint-disable-line class-methods-use-this\n\t\tif ( color.a < 0.4 )\n\t\t\tcolor = color._a(0.4);\n\n\t\tconst alpha = color.a;\n\n\t\treturn [\n\t\t\t`--color-text-base:${color.toCSS()};`,\n\t\t\t`--color-text-input:${color.toCSS()};`,\n\t\t\t`--color-text-label:${color.toCSS()};`,\n\t\t\t`--color-text-label-optional:${color._a(alpha - 0.4).toCSS()};`,\n\t\t\t`--color-text-alt:${color._a(alpha - 0.2).toCSS()};`,\n\t\t\t`--color-text-alt-2:${color._a(alpha - 0.4).toCSS()};`\n\t\t].join('')\n\t}\n\n\n\tgenerateAccentBlob(color, dark) { // eslint-disable-line class-methods-use-this\n\t\tif ( color.a < 1 )\n\t\t\tcolor = color._a(1);\n\n\t\tconst hsla = color.toHSLA(),\n\t\t\tluma = hsla.l;\n\n\t\tconst colors = COLORS.map(x => {\n\t\t\tif ( x === 0 )\n\t\t\t\treturn color.toCSS();\n\n\t\t\treturn hsla._l(luma + x).toCSS();\n\t\t});\n\n\t\tconst out = [],\n\t\t\taccent_out = [];\n\n\t\tfor(let i=0; i < colors.length; i++)\n\t\t\tout.push(`--ffz-color-accent-${i+1}:${colors[i]};`);\n\n\t\tlet source = dark ? ACCENT_COLORS.dark : ACCENT_COLORS.light;\n\n\t\tfor(const [key,val] of Object.entries(source.c)) {\n\t\t\tif ( typeof val !== 'number' )\n\t\t\t\tcontinue;\n\n\t\t\tout.push(`--color-${key}:${colors[val-1]};`);\n\t\t}\n\n\t\tsource = dark ? ACCENT_COLORS.accent_dark : ACCENT_COLORS.accent_light;\n\n\t\tfor(const [key,val] of Object.entries(source.c)) {\n\t\t\tif ( typeof val !== 'number' )\n\t\t\t\tcontinue;\n\n\t\t\taccent_out.push(`--color-${key}:${colors[val-1]} !important;`);\n\t\t}\n\n\t\treturn [out.join(''), accent_out.join('')];\n\t}\n\n\n\tupdateCSS() {\n\t\t//this.updateOldCSS();\n\n\t\tif ( this.settings.get('theme.disable-high-contrast'))\n\t\t\tthis.css_tweaks.set('nofc', NO_FORCED_COLOR);\n\t\telse\n\t\t\tthis.css_tweaks.delete('nofc');\n\n\t\tif ( this.settings.get('theme.disable-auto-dark') )\n\t\t\tthis.css_tweaks.set('nodark', NO_AUTO_DARK);\n\t\telse\n\t\t\tthis.css_tweaks.delete('nodark');\n\n\t\tthis.css_tweaks.setVariable('border-color', 'var(--color-border-base)');\n\n\t\tif ( ! this.settings.get('theme.can-dark') ) {\n\t\t\tthis.toggleNormalizer(false);\n\t\t\tthis.toggleAccentNormal(true);\n\t\t\tthis.css_tweaks.delete('colors');\n\t\t\treturn;\n\t\t}\n\n\t\tlet dark = this.settings.get('theme.is-dark');\n\t\tconst bits = [], accent_bits = [];\n\n\t\tconst background = Color.RGBA.fromCSS(this.settings.get('theme.color.background'));\n\t\tif ( background ) {\n\t\t\tbackground.a = 1;\n\t\t\t//bits.push(`--color-background-body: ${background.toCSS()};`);\n\n\t\t\tconst hsla = background.toHSLA(),\n\t\t\t\tluma = hsla.l;\n\t\t\tdark = luma < 0.5;\n\n\t\t\t// Make sure the Twitch theme is set correctly.\n\t\t\ttry {\n\t\t\t\tconst store = this.resolve('site').store,\n\t\t\t\t\ttheme = store.getState().ui.theme,\n\t\t\t\t\twanted_theme = dark ? 1 : 0;\n\n\t\t\t\tif( theme !== wanted_theme )\n\t\t\t\t\tstore.dispatch({\n\t\t\t\t\t\ttype: 'core.ui.THEME_CHANGED',\n\t\t\t\t\t\ttheme: wanted_theme\n\t\t\t\t\t});\n\t\t\t} catch(err) {\n\t\t\t\tthis.log.warning('Unable to automatically set the Twitch Dark Theme state.', err);\n\t\t\t}\n\n\t\t\tbits.push(this.generateBackgroundBlob(hsla));\n\n\t\t\t// TODO: Actually calculate these\n\t\t\tif ( dark ) {\n\t\t\t\tbits.push(`--color-border-base: var(--color-opac-gl-2);`);\n\t\t\t\tbits.push(`--color-background-interactable-hover: var(--color-opac-gl-1);`);\n\t\t\t\tbits.push(`--color-background-interactable-active: var(--color-opac-gl-2);`);\n\t\t\t\tbits.push(`--color-background-button-text-hover: var(--color-opac-gl-1);`);\n\t\t\t\tbits.push(`--color-background-button-text-active: var(--color-opac-gl-2);`);\n\t\t\t}\n\t\t}\n\n\t\tlet text = Color.RGBA.fromCSS(this.settings.get('theme.color.text'));\n\t\tif ( ! text && background )\n\t\t\ttext = Color.RGBA.fromCSS(dark ? '#FFF' : '#000');\n\t\tif ( text )\n\t\t\tbits.push(this.generateTextBlob(text));\n\n\t\t// Input elements\n\t\tif ( dark && this.settings.get('theme.legacy-dark-input') ) {\n\t\t\tbits.push(`--color-background-input: var(--color-opac-w-4);\n--color-background-input-overlay: var(--color-opac-b-4);\n--color-background-input-overlay-focus: var(--color-black);\n--color-background-selectable: var(--color-opac-w-3);\n--color-background-selectable-hover: var(--color-opac-w-4);\n--color-border-input: var(--color-opac-w-4);\n--color-border-input-hover: var(--color-opac-w-6);\n--color-border-input-overlay: var(--color-opac-w-6);\n--color-border-input-overlay-hover: var(--color-opac-w-8);\n--color-border-input-checkbox: var(--color-opac-w-10);\n--color-border-selectable: var(--color-opac-w-2);\n--color-border-selectable-hover: var(--color-opac-w-3);`);\n\t\t}\n\n\t\t// Accent\n\t\tconst accent = Color.RGBA.fromCSS(this.settings.get('theme.color.accent'));\n\t\tthis.toggleAccentNormal(! accent);\n\t\tif ( accent ) {\n\t\t\tconst data = this.generateAccentBlob(accent, dark);\n\t\t\tbits.push(data[0]);\n\t\t\taccent_bits.push(data[1]);\n\t\t}\n\n\t\t// Tooltips\n\t\tlet tooltip_bg = Color.RGBA.fromCSS(this.settings.get('theme.color.tooltip.background')),\n\t\t\ttooltip_dark;\n\t\tif ( ! tooltip_bg && background )\n\t\t\ttooltip_bg = Color.RGBA.fromCSS(dark ? '#FFF' : '#000');\n\n\t\tif ( tooltip_bg ) {\n\t\t\tbits.push(`--color-background-tooltip: ${tooltip_bg.toCSS()};`);\n\n\t\t\tconst hsla = tooltip_bg.toHSLA(),\n\t\t\t\tluma = hsla.l;\n\n\t\t\ttooltip_dark = luma < 0.5;\n\t\t} else\n\t\t\ttooltip_dark = ! dark;\n\n\t\tlet tooltip_text = Color.RGBA.fromCSS(this.settings.get('theme.color.tooltip.text'));\n\t\tconst has_tt_text = tooltip_text || tooltip_bg;\n\t\tif ( ! tooltip_text )\n\t\t\ttooltip_text = Color.RGBA.fromCSS(tooltip_dark ? '#FFF' : '#000');\n\n\t\tif ( tooltip_text ) {\n\t\t\tif ( has_tt_text )\n\t\t\t\tbits.push(`--color-text-tooltip: ${tooltip_text.toCSS()};`);\n\n\t\t\tconst hsla = tooltip_text.toHSLA(),\n\t\t\t\talpha = hsla.a;\n\n\t\t\tbits.push(`--color-text-tooltip-alt: ${hsla._a(alpha - 0.2).toCSS()};`);\n\t\t\tbits.push(`--color-text-tooltip-alt-2: ${hsla._a(alpha - 0.4).toCSS()};`);\n\t\t}\n\n\n\t\t// Chat\n\t\tconst chat_bits = [],\n\t\t\tchat_background = Color.RGBA.fromCSS(this.settings.get('theme.color.chat-background'));\n\t\tlet chat_dark = dark;\n\t\tif ( chat_background ) {\n\t\t\tchat_background.a = 1;\n\t\t\tconst hsla = chat_background.toHSLA(),\n\t\t\t\tluma = hsla.l;\n\t\t\tchat_dark = luma < 0.5;\n\n\t\t\tchat_bits.push(this.generateBackgroundBlob(hsla));\n\t\t}\n\n\t\tlet chat_text = Color.RGBA.fromCSS(this.settings.get('theme.color.chat-text'));\n\t\tif ( ! chat_text && chat_background )\n\t\t\tchat_text = Color.RGBA.fromCSS(chat_dark ? '#FFF' : '#000');\n\t\tif ( chat_text )\n\t\t\tchat_bits.push(this.generateTextBlob(chat_text));\n\n\n\t\t// Accent\n\t\tconst chat_accent = Color.RGBA.fromCSS(this.settings.get('theme.color.chat-accent')),\n\t\t\tchat_accent_bits = [];\n\t\t//this.toggleAccentNormal(! accent);\n\t\tif ( chat_accent ) {\n\t\t\tconst data = this.generateAccentBlob(chat_accent, chat_dark);\n\t\t\tchat_bits.push(data[0]);\n\t\t\tchat_accent_bits.push(data[1]);\n\t\t}\n\n\t\tif ( chat_bits.length )\n\t\t\tthis.css_tweaks.set('chat-colors', `.moderation-view-page-widget .stream-chat,.chat-shell {${chat_bits.join('\\n')}}.moderation-view-page-widget .stream-chat .tw-accent-region,.chat-shell .tw-accent-region{${chat_accent_bits.join('\\n')}}`);\n\t\telse\n\t\t\tthis.css_tweaks.delete('chat-colors');\n\n\t\tthis.toggleNormalizer(chat_bits.length || bits.length);\n\n\t\tconst selector = dark ? '' : `:not(.settings-menu-button-component--forced-dark-theme)`;\n\n\t\tif ( bits.length )\n\t\t\tthis.css_tweaks.set('colors', `body,body .tw-root--theme-light,body .tw-root--theme-dark${selector} {${bits.join('\\n')}}.channel-info-content .tw-accent-region,.channel-info-content div[class^=\"ScAccentRegion\"]{${accent_bits.join('\\n')}}`);\n\t\telse\n\t\t\tthis.css_tweaks.delete('colors');\n\t}\n\n\ttoggleAccentNormal(enable) {\n\t\tif ( enable ) {\n\t\t\tconst bits = [];\n\t\t\tfor(let i=0; i < 15; i++)\n\t\t\t\tbits.push(`--ffz-color-accent-${i+1}:var(--color-twitch-purple-${i+1});`);\n\n\t\t\tthis.css_tweaks.set('accent-normal', `body {${bits.join('\\n')}}`);\n\t\t} else\n\t\t\tthis.css_tweaks.delete('accent-normal');\n\t}\n\n\ttoggleNormalizer(enable) {\n\t\tif ( ! this._normalizer ) {\n\t\t\tif ( ! enable )\n\t\t\t\treturn;\n\n\t\t\tthis._normalizer = createElement('link', {\n\t\t\t\trel: 'stylesheet',\n\t\t\t\ttype: 'text/css',\n\t\t\t\thref: NORMALIZER_CSS_URL\n\t\t\t});\n\t\t} else if ( ! enable ) {\n\t\t\tthis._normalizer.remove();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! document.head.contains(this._normalizer) )\n\t\t\tdocument.head.appendChild(this._normalizer)\n\t}\n\n\tonEnable() {\n\t\t// TODO: Detect if this changes?\n\t\tlet has_forced;\n\t\ttry {\n\t\t\thas_forced = window.matchMedia('(forced-colors: active)')?.matches;\n\t\t} catch(err) { /* no-op */ }\n\n\t\tthis.settings.updateContext({\n\t\t\t'is-forced-colors': has_forced ?? false\n\t\t});\n\n\t\tthis.settings.getChanges('theme.high-contrast-tweaks', val => {\n\t\t\tthis.css_tweaks.toggle('hc-tweaks', val);\n\t\t});\n\n\t\tthis.updateCSS();\n\t\tthis.updateFont();\n\t}\n}\n","'use strict';\n\n// ============================================================================\n// Video Chat Hooks\n// ============================================================================\n\nimport {get, has} from 'utilities/object';\nimport {print_duration} from 'utilities/time';\n//import {ClickOutside} from 'utilities/dom';\nimport {formatBitsConfig} from '../chat';\n\nimport Module from 'utilities/module';\nimport { RERENDER_SETTINGS, UPDATE_BADGE_SETTINGS, UPDATE_TOKEN_SETTINGS } from 'src/utilities/constants';\n\nconst SUB_REGEX = /^([^\\s]+) subscribed ([^.]+)\\. They've subscribed for (\\d+) months(?:[^!]+streak)?!/;\nconst SUB_TIERS = {\n\t1000: 1,\n\t2000: 2,\n\t3000: 3\n};\n\nfunction parseParamInt(param) {\n\ttry {\n\t\tif ( /^[\\d-]+$/.test(param) )\n\t\t\tparam = parseInt(param, 10);\n\t} catch(err) { /* no-op */ }\n\n\tif ( typeof param !== 'number' || isNaN(param) || ! isFinite(param) )\n\t\tparam = 0;\n\n\treturn param;\n}\n\n\nexport default class VideoChatHook extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.should_enable = true;\n\n\t\tthis.inject('i18n');\n\t\tthis.inject('settings');\n\n\t\tthis.inject('site');\n\t\tthis.inject('site.router');\n\t\tthis.inject('site.fine');\n\n\t\tthis.inject('chat');\n\t\tthis.inject('chat.emotes');\n\t\tthis.inject('chat.overrides');\n\t\tthis.injectAs('site_chat', 'site.chat');\n\t\tthis.inject('site.chat.chat_line.rich_content');\n\n\t\tthis.VideoChatController = this.fine.define(\n\t\t\t'video-chat-controller',\n\t\t\tn => n.onError && n.videoData && n.props?.comments,\n\t\t\t['user-video', 'user-clip', 'video']\n\t\t);\n\n\t\t/*this.VideoChatMenu = this.fine.define(\n\t\t\t'video-chat-menu',\n\t\t\tn => n.onToggleMenu && n.getContent && n.props && has(n.props, 'isExpandedLayout'),\n\t\t\t['user-video', 'user-clip', 'video']\n\t\t);*/\n\n\t\tthis.VideoChatLine = this.fine.define(\n\t\t\t'video-chat-line',\n\t\t\tn => n.onTimestampClickHandler && n.props?.messageContext,\n\t\t\t['user-video', 'user-clip', 'video']\n\t\t);\n\n\t\t// Settings\n\n\t\tthis.settings.add('chat.video-chat.timestamps', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Chat on Videos >> Appearance',\n\t\t\t\ttitle: 'Display timestamps alongside chat messages.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.settings.add('chat.video-chat.enabled', {\n\t\t\tdefault: true,\n\t\t\tui: {\n\t\t\t\tpath: 'Chat > Chat on Videos @{\"description\": \"This feature is currently in beta. As such, you may experience issues when using FFZ features with Chat on Videos.\"} >> General',\n\t\t\t\ttitle: 'Enable FrankerFaceZ features for Chat on Videos.',\n\t\t\t\tdescription: 'Display FFZ badges, emotes, and other features in Chat on Videos. Moderation features may be unavailable when this is enabled.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t}\n\t\t});\n\n\t\tthis.active_room = null;\n\t}\n\n\n\tasync onEnable() {\n\t\tthis.chat.context.on('changed:chat.video-chat.enabled', this.rerenderLines, this);\n\t\tthis.chat.context.on('changed:chat.video-chat.timestamps', this.rerenderLines, this);\n\t\tthis.on('chat.overrides:changed', id => this.updateLinesByUser(id, null, false, false), this);\n\t\tthis.on('chat:update-lines-by-user', this.updateLinesByUser, this);\n\t\tthis.on('chat:update-line', this.updateLineById, this);\n\t\tthis.on('chat:update-lines', this.updateLines, this);\n\t\tthis.on('chat:rerender-lines', this.rerenderLines, this);\n\t\tthis.on('chat:update-line-tokens', this.updateLineTokens, this);\n\t\tthis.on('chat:update-line-badges', this.updateLineBadges, this);\n\t\tthis.on('i18n:update', this.rerenderLines, this);\n\t\tthis.on('chat.emotes:update-effects', this.checkEffects, this);\n\n\t\tfor(const setting of RERENDER_SETTINGS)\n\t\t\tthis.chat.context.on(`changed:${setting}`, this.rerenderLines, this);\n\n\t\tfor(const setting of UPDATE_TOKEN_SETTINGS)\n\t\t\tthis.chat.context.on(`changed:${setting}`, this.updateLineTokens, this);\n\n\t\tfor(const setting of UPDATE_BADGE_SETTINGS)\n\t\t\tthis.chat.context.on(`changed:${setting}`, this.updateLineBadges, this);\n\n\t\tthis.on('chat:get-messages', (include_chat, include_whisper, include_video, messages) => {\n\t\t\tif ( include_video )\n\t\t\t\tfor(const inst of this.VideoChatLine.instances) {\n\t\t\t\t\tconst context = inst.props.messageContext;\n\t\t\t\t\tif ( ! context.comment?._ffz_message )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tmessages.push({\n\t\t\t\t\t\tmessage: context.comment._ffz_message,\n\t\t\t\t\t\t_instance: inst,\n\t\t\t\t\t\tupdate: () => inst.forceUpdate()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t});\n\n\t\tthis.VideoChatController.on('mount', this.chatMounted, this);\n\t\tthis.VideoChatController.on('unmount', this.chatUnmounted, this);\n\t\tthis.VideoChatController.on('receive-props', this.chatUpdated, this);\n\n\t\tthis.VideoChatController.ready((cls, instances) => {\n\t\t\tfor(const inst of instances) {\n\t\t\t\tthis.chatMounted(inst);\n\t\t\t}\n\t\t});\n\n\t\tconst t = this,\n\t\t\tReact = await this.site.findReact();\n\t\tif ( ! React )\n\t\t\treturn;\n\n\t\tconst createElement = React.createElement,\n\t\t\tFFZRichContent = this.rich_content && this.rich_content.RichContent;\n\n\t\tthis.MenuContainer = class FFZMenuContainer extends React.Component {\n\t\t\tconstructor(props) {\n\t\t\t\tsuper(props);\n\n\t\t\t\tthis.onBanUser = () => {\n\t\t\t\t\tthis.props.onBanUserClick({\n\t\t\t\t\t\tbannedUser: this.props.context.comment.commenter,\n\t\t\t\t\t\ttargetChannel: this.props.context.comment.channelId,\n\t\t\t\t\t\tcomment: this.props.context.comment\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.onDeleteComment = () => {\n\t\t\t\t\tthis.props.onDeleteCommentClick(this.props.context.comment);\n\t\t\t\t}\n\n\t\t\t\tthis.onOpen = () => {\n\t\t\t\t\tthis.props.onDisableSync();\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tforce: true\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.onClose = () => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tforce: false\n\t\t\t\t\t})\n\t\t\t\t};\n\n\t\t\t\tthis.state = {\n\t\t\t\t\tforce: false\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\t//if ( ! t.VideoChatMenu._class )\n\t\t\t\t\treturn null;\n\n\t\t\t\t/*return (<div class={`tw-flex-shrink-0 video-chat__message-menu${this.state.force ? ' video-chat__message-menu--force-visible' : ''}`}>\n\t\t\t\t\t<t.VideoChatMenu._class\n\t\t\t\t\t\tcontext={this.props.context}\n\t\t\t\t\t\tisCurrentUserModerator={this.props.isCurrentUserModerator}\n\t\t\t\t\t\tisExpandedLayout={this.props.isExpandedLayout}\n\t\t\t\t\t\tonBanUserClick={this.onBanUser}\n\t\t\t\t\t\tonClose={this.onClose}\n\t\t\t\t\t\tonDeleteCommentClick={this.onDeleteComment}\n\t\t\t\t\t\tonOpen={this.onOpen}\n\t\t\t\t\t\tonReplyClick={this.props.onReplyClick}\n\t\t\t\t\t/>\n\t\t\t\t</div>);*/\n\t\t\t}\n\t\t}\n\n\t\tthis.VideoChatLine.ready(cls => {\n\t\t\tconst old_render = cls.prototype.render;\n\n\t\t\tcls.prototype.ffzRenderMessage = function(msg, reply) {\n\t\t\t\tconst is_action = msg.is_action,\n\t\t\t\t\taction_style = is_action ? t.chat.context.get('chat.me-style') : 0,\n\t\t\t\t\taction_italic = action_style >= 2,\n\t\t\t\t\taction_color = action_style === 1 || action_style === 3,\n\t\t\t\t\tuser = msg.user,\n\t\t\t\t\traw_color = t.overrides.getColor(user.id) || user.color,\n\t\t\t\t\tcolor = t.site_chat.colors.process(raw_color),\n\n\t\t\t\t\tu = t.site.getUser();\n\n\t\t\t\tif ( u ) {\n\t\t\t\t\tu.moderator = this.props.isCurrentUserModerator;\n\t\t\t\t\tu.staff = u.roles && u.roles.isStaff;\n\t\t\t\t}\n\n\t\t\t\tlet system_msg;\n\n\t\t\t\tif ( msg.system_msg === true ) {\n\t\t\t\t\tconst params = msg.params || {},\n\t\t\t\t\t\tmsg_id = params['msg-id'];\n\t\t\t\t\tif ( msg_id === 'resub' ) {\n\t\t\t\t\t\tconst setting = t.chat.context.get('chat.subs.show'),\n\n\t\t\t\t\t\t\traw_months = parseParamInt(params['msg-param-months']),\n\t\t\t\t\t\t\tcumulative_months = parseParamInt(params['msg-param-cumulative-months']),\n\t\t\t\t\t\t\tmonths = cumulative_months || raw_months;\n\n\t\t\t\t\t\tt.log.info('resub-notice setting:', setting, 'months:', months, 'cumulative:', cumulative_months, 'raw:', raw_months);\n\t\t\t\t\t\tt.log.info('-> params:', params);\n\n\t\t\t\t\t\tif ( setting === 3 || (months > 1 && setting > 0) ) {\n\t\t\t\t\t\t\tconst share = parseParamInt(params['msg-param-should-share-streak']) === 1,\n\t\t\t\t\t\t\t\tplan = params['msg-param-sub-plan'],\n\t\t\t\t\t\t\t\tprime = plan === 'Prime',\n\t\t\t\t\t\t\t\ttier = SUB_TIERS[plan] || 1;\n\n\t\t\t\t\t\t\tt.log.info('-> share:', share, 'plan:', plan, 'tier:', tier);\n\n\t\t\t\t\t\t\tsystem_msg = t.i18n.tList('chat.sub.main', '{user} subscribed {plan}. ', {\n\t\t\t\t\t\t\t\tuser: <span class=\"tw-c-text-base tw-strong\">{user.displayName}</span>,\n\t\t\t\t\t\t\t\tplan: prime ?\n\t\t\t\t\t\t\t\t\tt.i18n.t('chat.sub.twitch-prime', 'with Prime Gaming') :\n\t\t\t\t\t\t\t\t\tt.i18n.t('chat.sub.plan', 'at Tier {tier}', {tier})\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif ( share && raw_months > 1 )\n\t\t\t\t\t\t\t\tsystem_msg.push(t.i18n.t(\n\t\t\t\t\t\t\t\t\t'chat.sub.cumulative-months',\n\t\t\t\t\t\t\t\t\t\"They've subscribed for {cumulative,number} months, currently on a {streak,number} month streak!\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcumulative: cumulative_months,\n\t\t\t\t\t\t\t\t\t\tstreak: raw_months\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t));\n\t\t\t\t\t\t\telse if ( months > 1 )\n\t\t\t\t\t\t\t\tsystem_msg.push(t.i18n.t(\n\t\t\t\t\t\t\t\t\t'chat.sub.months',\n\t\t\t\t\t\t\t\t\t\"They've subscribed for {count,number} months!\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcount: months\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( msg.system_msg )\n\t\t\t\t\tsystem_msg = msg.system_msg;\n\n\t\t\t\tconst tokens = msg.ffz_tokens = msg.ffz_tokens || t.chat.tokenizeMessage(msg, u),\n\t\t\t\t\trich_content = FFZRichContent && t.chat.pluckRichContent(tokens, msg);\n\n\t\t\t\tconst user_block = t.chat.formatUser(user, createElement);\n\t\t\t\tconst override_name = t.overrides.getName(user.id);\n\n\t\t\t\tlet user_class = msg.ffz_user_class;\n\t\t\t\tif ( user_class instanceof Set )\n\t\t\t\t\tuser_class = [...user_class].join(' ');\n\t\t\t\telse if ( Array.isArray(user_class) )\n\t\t\t\t\tuser_class = user_class.join(' ');\n\n\t\t\t\tconst user_props = {\n\t\t\t\t\tclassName: `video-chat__message-author notranslate${override_name ? ' ffz--name-override tw-relative ffz-il-tooltip__container' : ''} ${user_class ?? ''}`,\n\t\t\t\t\t'data-test-selector': 'comment-author-selector',\n\t\t\t\t\thref: `/${user.login}`,\n\t\t\t\t\trel: 'noopener noreferrer',\n\t\t\t\t\ttarget: '_blank',\n\t\t\t\t\tstyle: { color }\n\t\t\t\t};\n\n\t\t\t\tif ( msg.ffz_user_props )\n\t\t\t\t\tObject.assign(user_props, msg.ffz_user_props);\n\n\t\t\t\tif ( msg.ffz_user_style )\n\t\t\t\t\tObject.assign(user_props.style, msg.ffz_user_style);\n\n\t\t\t\tconst user_bits = createElement('a', user_props, override_name ? [\n\t\t\t\t\tcreateElement('span', {\n\t\t\t\t\t\tclassName: 'chat-author__display-name'\n\t\t\t\t\t}, override_name),\n\t\t\t\t\tcreateElement('div', {\n\t\t\t\t\t\tclassName: 'ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-center'\n\t\t\t\t\t}, user_block)\n\t\t\t\t] : user_block);\n\n\t\t\t\tlet out = (<div class=\"tw-flex-grow-1\" data-room-id={msg.roomID} data-room={msg.roomLogin} data-user-id={user.id} data-user={user.login}>\n\t\t\t\t\t<span class=\"chat-line__message--badges\">{\n\t\t\t\t\t\tt.chat.badges.render(msg, createElement)\n\t\t\t\t\t}</span>\n\t\t\t\t\t{user_bits}\n\t\t\t\t\t<div data-test-selector=\"comment-message-selector\" class=\"tw-inline video-chat__message\">\n\t\t\t\t\t\t<span>{is_action ? ' ' : ': '}</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass={`message ${action_italic ? 'chat-line__message-body--italicized' : ''}`}\n\t\t\t\t\t\t\tstyle={{color: action_color ? color : null}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ t.chat.renderTokens(tokens, createElement) }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{rich_content && createElement(FFZRichContent, rich_content)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>);\n\n\t\t\t\tif ( system_msg )\n\t\t\t\t\tout = (<div class=\"tw-flex-grow-1\">\n\t\t\t\t\t\t<div class=\"tw-flex tw-c-text-alt-2\">\n\t\t\t\t\t\t\t<div>{system_msg}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{out}\n\t\t\t\t\t</div>);\n\n\t\t\t\treturn (<div class=\"tw-align-items-start tw-flex tw-flex-nowrap tw-c-text-base\">\n\t\t\t\t\t{ out }\n\t\t\t\t\t{ reply ? (<t.MenuContainer\n\t\t\t\t\t\tcontext={reply}\n\t\t\t\t\t\tisCurrentUserModerator={this.props.isCurrentUserModerator}\n\t\t\t\t\t\tisExpandedLayout={this.props.isExpandedLayout}\n\t\t\t\t\t\tonBanUserClick={this.props.onBanUserClick}\n\t\t\t\t\t\tonDeleteCommentClick={this.props.onDeleteCommentClick}\n\t\t\t\t\t\tonDisableSync={this.props.onDisableSync}\n\t\t\t\t\t\tonReplyClick={this.onReplyClickHandler}\n\t\t\t\t\t/>) : null}\n\t\t\t\t</div>);\n\t\t\t}\n\n\t\t\tcls.prototype.ffzRenderExpanded = function(msg) {\n\t\t\t\tif ( ! msg._reply_handler )\n\t\t\t\t\tmsg._reply_handler = () => this.onReplyClickHandler(msg.user.login);\n\n\t\t\t\treturn (<div class=\"tw-align-items-center tw-flex tw-pd-t-05\">\n\t\t\t\t\t<button class=\"tw-button tw-button--text\" data-test-selector=\"parent-reply-button\" onClick={msg._reply_handler}>\n\t\t\t\t\t\t<span class=\"tw-button__text tw-pd-0\">{ t.i18n.t('video-chat.reply', 'Reply') }</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span class=\"tw-c-text-alt-2 tw-font-size-7 tw-mg-l-05 tw-relative ffz-il-tooltip__container\">\n\t\t\t\t\t\t { t.i18n.t('video-chat.time', '{time,humantime} ago', {\n\t\t\t\t\t\t\ttime: msg.timestamp\n\t\t\t\t\t\t}) }\n\t\t\t\t\t\t<div class=\"ffz-il-tooltip ffz-il-tooltip--align-center ffz-il-tooltip--up\" role=\"tooltip\">\n\t\t\t\t\t\t\t{ t.i18n.formatDateTime(msg.timestamp, 'full') }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</span>\n\t\t\t\t</div>)\n\t\t\t}\n\n\t\t\tcls.prototype.render = function() {\n\t\t\t\ttry {\n\t\t\t\t\tthis._ffz_no_scan = true;\n\n\t\t\t\t\tif ( this.state?.showReplyForm || ! t.chat.context.get('chat.video-chat.enabled') )\n\t\t\t\t\t\treturn old_render.call(this);\n\n\t\t\t\t\tconst context = this.props.messageContext,\n\t\t\t\t\t\tmsg = t.standardizeMessage(context.comment, context.author),\n\t\t\t\t\t\tmain_message = this.ffzRenderMessage(msg, context),\n\t\t\t\t\t\thide_timestamps = this.props.hideTimestamp || ! t.chat.context.get('chat.video-chat.timestamps'),\n\n\t\t\t\t\t\tbg_css = msg.mentioned && msg.mention_color ? t.site_chat.inverse_colors.process(msg.mention_color) : null;\n\n\t\t\t\t\tif ( msg.ffz_removed )\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\tconst highlight = ! bg_css && msg.highlight && t.chat.context.get('chat.points.allow-highlight');\n\n\t\t\t\t\treturn (<div\n\t\t\t\t\t\tdata-test-selector=\"message-layout\"\n\t\t\t\t\t\tclass={`tw-align-items-start tw-flex tw-flex-nowrap tw-full-width tw-pd-l-05 tw-pd-y-05 vod-message${msg.is_sub ? ' ffz-notice-line ffz--subscribe-line' : ''}${msg.highlight ? ' ffz-notice-line ffz--points-line' : ''}${highlight ? ' ffz--points-highlight ffz-custom-color' : ''}${msg.mentioned ? ' ffz-mentioned' : ''}${bg_css ? ' ffz-custom-color' : ''}`}\n\t\t\t\t\t\tstyle={{backgroundColor: bg_css}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{hide_timestamps || (<div data-test-selector=\"message-timestamp\" class=\"tw-align-right tw-flex tw-flex-shrink-0 vod-message__header\">\n\t\t\t\t\t\t\t<div class=\"tw-mg-r-05\">\n\t\t\t\t\t\t\t\t<div class=\"tw-inline-flex tw-relative ffz-il-tooltip__container\">\n\t\t\t\t\t\t\t\t\t<button class=\"tw-block tw-full-width ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive\" onClick={this.onTimestampClickHandler}>\n\t\t\t\t\t\t\t\t\t\t<div class=\"tw-pd-x-05\">\n\t\t\t\t\t\t\t\t\t\t\t<p class=\"tw-font-size-7\">{print_duration(context.comment.contentOffset)}</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<div class=\"ffz-il-tooltip ffz-il-tooltip--align-left ffz-il-tooltip--up\" role=\"tooltip\">\n\t\t\t\t\t\t\t\t\t\t{t.i18n.t('video-chat.jump', 'Jump to Video')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t<div class=\"tw-full-width\">\n\t\t\t\t\t\t\t{ main_message }\n\t\t\t\t\t\t\t{ this.props.isExpandedLayout && this.ffzRenderExpanded(msg) }\n\t\t\t\t\t\t\t{ context.replies && context.replies.length > 0 && (<div class=\"qa-vod-chat-reply tw-mg-l-05 tw-mg-y-05 vod-message__reply\">\n\t\t\t\t\t\t\t\t{ context.comment.moreReplies && (<div class=\"tw-inline-block vod-message__show-more-replies\">\n\t\t\t\t\t\t\t\t\t<button class=\"tw-interactive tw-button tw-button--text\" onClick={this.onLoadMoreRepliesClickHandler}>\n\t\t\t\t\t\t\t\t\t\t<span class=\"tw-button__text\" data-a-target=\"tw-button-text\">{\n\t\t\t\t\t\t\t\t\t\t\tt.i18n.t('video-chat.show-more', 'Show more replies...')\n\t\t\t\t\t\t\t\t\t\t}</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t\t\t<ul>{\n\t\t\t\t\t\t\t\t\tcontext.replies.map(reply => (<li key={reply.comment && reply.comment.id} class=\"tw-mg-l-05\">\n\t\t\t\t\t\t\t\t\t\t{ this.ffzRenderMessage(t.standardizeMessage(reply.comment, reply.author), reply) }\n\t\t\t\t\t\t\t\t\t\t{ this.props.isExpandedLayout && this.ffzRenderExpanded(msg) }\n\t\t\t\t\t\t\t\t\t</li>))\n\t\t\t\t\t\t\t\t}</ul>\n\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>)\n\n\t\t\t\t} catch(err) {\n\t\t\t\t\tt.log.error('Problem rendering Chat', err);\n\t\t\t\t\treturn old_render.call(this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do this after a short delay to hopefully reduce the chance of React\n\t\t\t// freaking out on us.\n\t\t\tsetTimeout(() => this.VideoChatLine.forceUpdate());\n\t\t})\n\t}\n\n\n\tupdateLines() {\n\t\treturn this._updateLines();\n\t}\n\n\trerenderLines() {\n\t\tthis.VideoChatLine.forceUpdate();\n\t}\n\n\tupdateLineTokens() {\n\t\treturn this._updateLines(true, false);\n\t}\n\n\tupdateLineBadges() {\n\t\treturn this._updateLines(false, true);\n\t}\n\n\t_updateLines(clear_tokens = true, clear_badges = true) { // eslint-disable-line no-unused-vars\n\t\tfor(const inst of this.VideoChatLine.instances) {\n\t\t\tconst context = inst.props.messageContext;\n\t\t\tif ( ! context.comment )\n\t\t\t\tcontinue;\n\n\t\t\tcontext.comment._ffz_message = null;\n\n\t\t\tif ( Array.isArray(context.replies) )\n\t\t\t\tfor(const reply of context.replies)\n\t\t\t\t\tif ( reply.comment )\n\t\t\t\t\t\treply.comment._ffz_message = null;\n\t\t}\n\n\t\tthis.VideoChatLine.forceUpdate();\n\t}\n\n\n\tupdateLinesByUser(id, login) {\n\t\tfor(const inst of this.VideoChatLine.instances) {\n\t\t\tconst context = inst.props.messageContext;\n\t\t\tif ( ! context.comment )\n\t\t\t\tcontinue;\n\n\t\t\tconst author = context.author;\n\t\t\tif ( author && ((id && id == author.id) || (login && login == author.name))) {\n\t\t\t\tcontext.comment._ffz_message = null;\n\t\t\t\tinst.forceUpdate();\n\t\t\t}\n\t\t}\n\t}\n\n\n\tupdateLineById(id, clear_tokens = true, clear_badges = null) {\n\t\tif ( clear_badges == null )\n\t\t\tclear_badges = clear_tokens;\n\n\t\tfor(const inst of this.VideoChatLine.instances) {\n\t\t\tconst context = inst.props.messageContext;\n\t\t\tif ( ! context.comment )\n\t\t\t\tcontinue;\n\n\t\t\tif ( context.comment?.id === id ) {\n\t\t\t\t// TODO: Better support for clear_tokens and clear_badges\n\t\t\t\tif ( clear_tokens || clear_badges )\n\t\t\t\t\tcontext.comment._ffz_message = null;\n\n\t\t\t\tinst.forceUpdate();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\n\tcheckEffects() {\n\t\tfor(const inst of this.VideoChatLine.instances) {\n\t\t\tconst context = inst.props.messageContext,\n\t\t\t\tmsg = context?.comment?._ffz_message,\n\t\t\t\ttokens = msg?.ffz_tokens;\n\n\t\t\tif ( tokens )\n\t\t\t\tfor(const token of tokens) {\n\t\t\t\t\tif ( token.type === 'emote' && token.modifier_flags )\n\t\t\t\t\t\tthis.emotes.ensureEffect(token.modifier_flags);\n\t\t\t\t}\n\t\t}\n\t}\n\n\n\t// ========================================================================\n\t// Message Standardization\n\t// ========================================================================\n\n\tstandardizeMessage(comment, author) { // eslint-disable-line class-methods-use-this\n\t\tif ( comment._ffz_message )\n\t\t\treturn comment._ffz_message;\n\n\t\tconst room = this.active_room || this.chat.getRoom(comment.channelId, null, true, true),\n\t\t\tparams = comment.message.userNoticeParams,\n\t\t\tmsg_id = params && params['msg-id'];\n\n\t\tconst out = comment._ffz_message = {\n\t\t\tid: comment.id,\n\t\t\tuser: {\n\t\t\t\tcolor: comment.message.userColor,\n\t\t\t\tid: author.id,\n\t\t\t\tlogin: author.name,\n\t\t\t\tdisplayName: author.displayName,\n\t\t\t\tisIntl: author.name && author.displayName && author.displayName.trim().toLowerCase() !== author.name,\n\t\t\t\ttype: author.type\n\t\t\t},\n\t\t\troomLogin: room && room.login,\n\t\t\troomID: room && room.id || comment.channelId,\n\t\t\tffz_badges: this.chat.badges.getBadges(author.id, author.login, room?.id, room?.login),\n\t\t\tbadges: comment.userBadges,\n\t\t\tmessageParts: comment.message.tokens,\n\t\t\tis_action: comment.message.isAction,\n\t\t\tmore_replies: comment.moreReplies,\n\t\t\ttimestamp: comment.createdAt,\n\t\t\tffz_context: 'video',\n\t\t\tis_sub: msg_id === 'sub' || msg_id === 'resub',\n\t\t\thighlight: msg_id === 'highlighted-message',\n\t\t\tparams\n\t\t};\n\n\t\t// We need to strip the sub message from chat messages\n\t\t// because Twitch is dumb. This might need updating to\n\t\t// handle system messages with different syntax.\n\t\tif ( Array.isArray(out.messageParts) && out.messageParts.length && msg_id === 'resub' ) {\n\t\t\tlet content = out.messageParts[0].content;\n\t\t\tif ( typeof content === 'string' ) {\n\t\t\t\tconst match = SUB_REGEX.exec(content);\n\t\t\t\tif ( match ) {\n\t\t\t\t\tcontent = content.slice(match[0].length).trimLeft();\n\t\t\t\t\tif ( content.length ) {\n\t\t\t\t\t\tout.messageParts[0].ffz_content = content;\n\t\t\t\t\t\tout.system_msg = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\tthis.chat.detokenizeMessage(out);\n\n\t\treturn out;\n\t}\n\n\n\t// ========================================================================\n\t// Room Handling\n\t// ========================================================================\n\n\taddRoom(thing, props) {\n\t\tif ( ! props )\n\t\t\tprops = thing.props;\n\n\t\tconst channel = get('data.video.owner', props);\n\t\tif ( ! channel || ! channel.id )\n\t\t\treturn null;\n\n\t\tconst room = thing._ffz_room = this.chat.getRoom(channel.id, channel.login && channel.login.toLowerCase(), false, true);\n\t\troom.ref(thing);\n\t\treturn room;\n\t}\n\n\n\tremoveRoom(thing) { // eslint-disable-line class-methods-use-this\n\t\tif ( ! thing._ffz_room )\n\t\t\treturn;\n\n\t\tthing._ffz_room.unref(thing);\n\t\tthing._ffz_room = null;\n\t}\n\n\n\t// ========================================================================\n\t// Video Chat Controller\n\t// ========================================================================\n\n\tchatMounted(chat, props) {\n\t\tif ( ! props )\n\t\t\tprops = chat.props;\n\n\t\tif ( ! this.addRoom(chat, props) )\n\t\t\treturn;\n\n\t\tthis.active_room = chat._ffz_room;\n\t\tthis.chat.badges.updateTwitchBadges(get('data.badges', props));\n\n\t\tthis.updateRoomBadges(chat, get('data.video.owner.broadcastBadges', props));\n\t\tthis.updateRoomBitsConfig(chat, props.bitsConfig);\n\t}\n\n\n\tchatUpdated(chat, props) {\n\t\tif ( get('data.video.owner.id', props) !== get('data.video.owner.id', chat.props) ) {\n\t\t\tthis.removeRoom(chat);\n\t\t\tthis.chatMounted(chat, props);\n\t\t\treturn;\n\t\t}\n\n\t\tconst new_badges = get('data.badges', props),\n\t\t\told_badges = get('data.badges', chat.props),\n\n\t\t\tnew_room_badges = get('data.video.owner.broadcastBadges', props),\n\t\t\told_room_badges = get('data.video.owner.broadcastBadges', chat.props);\n\n\t\tif ( new_badges !== old_badges )\n\t\t\tthis.chat.badges.updateTwitchBadges(new_badges);\n\n\t\tif ( new_room_badges !== old_room_badges )\n\t\t\tthis.updateRoomBadges(chat, new_room_badges);\n\n\t\tif ( props.bitsConfig !== chat.props.bitsConfig )\n\t\t\tthis.updateRoomBitsConfig(chat, props.bitsConfig);\n\n\t\tconst channel = get('data.video.owner', props);\n\n\t\tthis.settings.updateContext({\n\t\t\tmoderator: props.isCurrentUserModerator\n\t\t});\n\n\t\tthis.chat.context.updateContext({\n\t\t\tmoderator: props.isCurrentUserModerator,\n\t\t\tchannel: channel ? channel.login : null,\n\t\t\tchannelID: channel ? channel.id : null\n\t\t});\n\t}\n\n\n\tchatUnmounted(chat) {\n\t\tif (this.active_room === chat._ffz_room)\n\t\t\tthis.active_room = null;\n\n\t\tthis.removeRoom(chat);\n\t}\n\n\n\tupdateRoomBadges(chat, badges) { // eslint-disable-line class-methods-use-this\n\t\tconst room = chat._ffz_room;\n\t\tif ( ! room )\n\t\t\treturn;\n\n\t\troom.updateBadges(badges);\n\t}\n\n\n\tupdateRoomBitsConfig(chat, config) { // eslint-disable-line class-methods-use-this\n\t\tconst room = chat._ffz_room;\n\t\tif ( ! room )\n\t\t\treturn;\n\n\t\troom.updateBitsConfig(formatBitsConfig(config));\n\t}\n}\n","'use strict';\n\n// ============================================================================\n// Apollo\n// Legendary Data Access Layer\n// ============================================================================\n\nimport Module from 'utilities/module';\nimport {get} from 'utilities/object';\nimport merge from 'utilities/graphql';\nimport { FFZEvent } from 'utilities/events';\n\n\n/*const BAD_ERRORS = [\n\t'timeout',\n\t'unable to load',\n\t'error internal',\n\t'context deadline exceeded',\n\t'unexpected service response',\n\t'service unavailable',\n\t'404',\n\t'500',\n\t'501',\n\t'502',\n\t'503',\n\t'504',\n\t'Internal Server Error',\n\t'http://',\n\t'https://'\n];\n\nfunction skip_error(err) {\n\tfor(const m of BAD_ERRORS)\n\t\tif ( err.message.includes(m) )\n\t\t\treturn true;\n}*/\n\n\nexport class ApolloEvent extends FFZEvent {\n\tconstructor(data) {\n\t\tsuper(data);\n\n\t\tthis._changed = false;\n\t}\n\n\tmarkChanged() {\n\t\tthis._changed = true;\n\t\treturn this;\n\t}\n}\n\n\nexport class GQLError extends Error {\n\tconstructor(err) {\n\t\tsuper(`${err.message}; Location: ${err.locations}`);\n\t}\n}\n\n\nexport default class Apollo extends Module {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.modifiers = {};\n\t\tthis.post_modifiers = {};\n\n\t\tthis.inject('..fine');\n\t}\n\n\tget gqlPrint() {\n\t\tif ( this._gql_print )\n\t\t\treturn this._gql_print;\n\n\t\tconst web_munch = this.resolve('site.web_munch'),\n\t\t\tprinter = this._gql_print = web_munch?.getModule?.('gql-printer');\n\n\t\treturn printer;\n\t}\n\n\tonEnable() {\n\t\t// TODO: Come up with a better way to await something existing.\n\t\tlet client = this.client;\n\n\t\tif ( ! client ) {\n\t\t\tconst root = this.fine.react,\n\t\t\t\tinst = root && root.stateNode;\n\n\t\t\tclient = inst?.props?.client;\n\t\t\tif ( root && ! client ) {\n\t\t\t\tlet i=0, node = root;\n\t\t\t\twhile( ! client?.queryManager && node && i++ < 20 ) {\n\t\t\t\t\tclient = node?.memoizedProps?.client;\n\t\t\t\t\tnode = node?.child;\n\t\t\t\t}\n\n\t\t\t\tif ( ! client ) {\n\t\t\t\t\tconst host = this.fine.searchTree(null, n => n.props?.client?.queryManager, 500);\n\t\t\t\t\tif ( host )\n\t\t\t\t\t\tclient = host.props.client;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.client = client;\n\t\t}\n\n\t\tif ( ! client )\n\t\t\treturn new Promise(() => this.onEnable(), 50);\n\n\t\t// Register middleware so that we can intercept requests.\n\t\tif ( ! this.client.link || ! this.client.queryManager || ! this.client.queryManager.link ) {\n\t\t\tthis.log.error('Apollo does not have a Link. We are unable to manipulate queries.');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.hooked_query_init = false;\n\n\t\tconst t = this,\n\t\t\tproto = this.client.queryManager.constructor.prototype,\n\t\t\told_qm_get = proto.getCurrentQueryResult;\n\n\t\tproto.getCurrentQueryResult = function(query, optimistic = true) {\n\t\t\tconst out = old_qm_get.call(this, query, optimistic);\n\t\t\tif ( out && out.partial )\n\t\t\t\ttry {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst prev = query.getLastResult(),\n\t\t\t\t\t\t\topts = query.options;\n\t\t\t\t\t\tthis.dataStore.getCache().read({\n\t\t\t\t\t\t\tquery: opts.query,\n\t\t\t\t\t\t\tvariables: opts.variables,\n\t\t\t\t\t\t\tpreviousResult: prev ? prev.data : undefined,\n\t\t\t\t\t\t\toptimistic\n\t\t\t\t\t\t});\n\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\t// If there's a missing field, and we have a lastResult, and lastResult is not loading, and lastResult is not error...\n\t\t\t\t\t\tif ( err.toString().includes(\"Can't find field\") && query.lastResult && ! query.lastResult.loading && ! query.lastError ) {\n\t\t\t\t\t\t\tif ( Date.now() - (query._ffz_last_retry || 0) >= 120000 ) {\n\t\t\t\t\t\t\t\tconst raw_name = get('options.query.definitions.0.name', query),\n\t\t\t\t\t\t\t\t\tname = raw_name && raw_name.kind === 'Name' ? raw_name.value : `#${query.queryId}`;\n\n\t\t\t\t\t\t\t\tt.log.info('Forcing query to refetch due to missing field:', name);\n\t\t\t\t\t\t\t\tquery._ffz_last_retry = Date.now();\n\t\t\t\t\t\t\t\tquery.refetch();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} catch(err) {\n\t\t\t\t\tt.log.capture(err);\n\t\t\t\t}\n\n\t\t\treturn out;\n\t\t}\n\n\t\tif ( this.client.queryManager.queryStore ) {\n\t\t\tconst old_qm_init = this.client.queryManager.queryStore.initQuery;\n\t\t\tthis.hooked_query_init = true;\n\t\t\tthis.client.queryManager.queryStore.initQuery = function(e) {\n\t\t\t\tconst t = this.store[e.queryId];\n\t\t\t\tif ( t && t.queryString !== e.queryString )\n\t\t\t\t\tt.queryString = e.queryString;\n\n\t\t\t\treturn old_qm_init.call(this, e);\n\t\t\t}\n\t\t}\n\n\t\tconst ApolloLink = this.ApolloLink = this.client.link.constructor;\n\n\t\tthis.link = new ApolloLink((operation, forward) => {\n\t\t\tif ( ! this.enabled )\n\t\t\t\treturn forward(operation);\n\n\t\t\tlet vars = operation.variables;\n\t\t\tif ( ! Object.keys(vars).length )\n\t\t\t\tvars = undefined;\n\n\t\t\ttry {\n\t\t\t\t// ONLY do this if we've hooked query init, thus letting us ignore certain issues\n\t\t\t\t// that would cause Twitch to show lovely \"Error loading data\" messages everywhere.\n\t\t\t\tif ( this.hooked_query_init )\n\t\t\t\t\tthis.apolloPreFlight(operation);\n\n\t\t\t} catch(err) {\n\t\t\t\tthis.log.capture(err, {\n\t\t\t\t\ttags: {\n\t\t\t\t\t\toperation: operation.operationName\n\t\t\t\t\t},\n\t\t\t\t\textra: {\n\t\t\t\t\t\tvariables: vars\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.log.error('Error running Pre-Flight', err, operation);\n\t\t\t\treturn forward(operation);\n\t\t\t}\n\n\t\t\treturn forward(operation).map(result => {\n\t\t\t\tif ( result.extensions && result.extensions.operationName === operation.operationName )\n\t\t\t\t\tthis.log.crumb({\n\t\t\t\t\t\tlevel: 'info',\n\t\t\t\t\t\tcategory: 'gql',\n\t\t\t\t\t\tmessage: `${operation.operationName} [${result.extensions && result.extensions.durationMilliseconds || '??'}ms]`,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tvariables: vars,\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\ttry {\n\t\t\t\t\tthis.apolloPostFlight(result);\n\t\t\t\t} catch(err) {\n\t\t\t\t\tthis.log.capture(err, {\n\t\t\t\t\t\ttags: {\n\t\t\t\t\t\t\toperation: operation.operationName\n\t\t\t\t\t\t},\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tvariables: vars\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.log.error('Error running Post-Flight', err, result);\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t});\n\t\t})\n\n\t\tthis.old_link = this.client.link;\n\t\tthis.old_qm_link = this.client.queryManager.link;\n\t\t//this.old_qm_dedup = this.client.queryManager.deduplicator;\n\n\t\tthis.client.link = ApolloLink.from([\n\t\t\tthis.link,\n\t\t\tthis.old_link\n\t\t]);\n\n\t\tthis.client.queryManager.link = ApolloLink.from([\n\t\t\tthis.link,\n\t\t\tthis.old_qm_link\n\t\t]);\n\n\t\t/*this.client.queryManager.deduplicator = ApolloLink.from([\n\t\t\tthis.link,\n\t\t\tthis.old_qm_dedup\n\t\t]);*/\n\n\t\t/*this.client.link = this.link.concat(this.old_link);\n\t\tthis.client.queryManager.link = this.link.concat(this.old_qm_link);\n\t\tthis.client.queryManager.deduplicator = this.link.concat(this.old_qm_dedup);*/\n\t}\n\n\n\tonDisable() {\n\t\t// Remove our references to things.\n\t\tthis.client = this.printer = this._gql_print = this.old_link = this.old_qm_dedup = this.old_qm_link = null;\n\t}\n\n\n\tapolloPreFlight(request) {\n\t\tconst operation = request.operationName,\n\t\t\tmodifiers = this.modifiers[operation],\n\t\t\tevent = `:request.${operation}`,\n\t\t\thas_listeners = this.hasListeners(event);\n\n\t\tif ( ! modifiers && ! has_listeners )\n\t\t\treturn;\n\n\t\tconst qm = this.client.queryManager,\n\t\t\tid_map = qm && qm.queryIdsByName,\n\t\t\tquery_map = qm && qm.queries,\n\t\t\traw_id = id_map && id_map[operation],\n\t\t\tid = Array.isArray(raw_id) ? raw_id[0] : raw_id,\n\t\t\tquery = query_map && query_map.get(id);\n\n\t\tif ( modifiers ) {\n\t\t\tfor(const mod of modifiers) {\n\t\t\t\tif ( typeof mod === 'function' )\n\t\t\t\t\tmod(request);\n\t\t\t\telse if ( mod[1] )\n\t\t\t\t\tthis.applyModifier(request, mod[1]);\n\t\t\t}\n\t\t}\n\n\t\tlet modified = !! modifiers;\n\n\t\tif ( has_listeners ) {\n\t\t\tconst e = new ApolloEvent({\n\t\t\t\toperation,\n\t\t\t\trequest\n\t\t\t});\n\n\t\t\tthis.emit(event, e);\n\t\t\tif ( e._changed )\n\t\t\t\tmodified = true;\n\t\t}\n\n\t\tif ( modified ) {\n\t\t\t// Wipe the old query data. This is obviously not optimal, but Apollo will\n\t\t\t// raise an exception otherwise because the query string doesn't match.\n\n\t\t\tconst q = this.client.queryManager.queryStore.store[id],\n\t\t\t\tqs = this.gqlPrint && this.gqlPrint(request.query);\n\n\t\t\tif ( q )\n\t\t\t\tif ( qs ) {\n\t\t\t\t\tq.queryString = qs;\n\t\t\t\t\trequest.query.loc.source.body = qs;\n\t\t\t\t\trequest.query.loc.end = qs.length;\n\n\t\t\t\t\tif ( query ) {\n\t\t\t\t\t\tquery.document = request.query;\n\t\t\t\t\t\tif ( query.observableQuery && query.observableQuery.options )\n\t\t\t\t\t\t\tquery.observableQuery.options.query = request.query;\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tthis.log.info('Unable to find GQL Print. Clearing store for query:', operation);\n\t\t\t\t\tthis.client.queryManager.queryStore.store[id] = null;\n\t\t\t\t}\n\t\t}\n\t}\n\n\tapolloPostFlight(response) {\n\t\tif ( ! response.extensions )\n\t\t\treturn;\n\n\t\tconst operation = response.extensions.operationName,\n\t\t\tmodifiers = this.post_modifiers[operation];\n\n\t\tif ( modifiers )\n\t\t\tfor(const mod of modifiers)\n\t\t\t\tmod(response);\n\n\t\tthis.emit(`:response.${operation}`, response.data);\n\t}\n\n\n\tapplyModifier(request, modifier) { // eslint-disable-line class-methods-use-this\n\t\trequest.query = merge(request.query, modifier);\n\t}\n\n\n\tregisterModifier(operation, modifier, pre=true) {\n\t\tif ( typeof modifier !== 'function' ) {\n\t\t\tif ( ! pre )\n\t\t\t\tthrow new Error('post modifiers must be functions');\n\n\t\t\t/*let parsed;\n\t\t\ttry {\n\t\t\t\tparsed = this.graphql ? this.graphql.parse(modifier, {noLocation: true}) : null;\n\t\t\t} catch(err) {\n\t\t\t\tthis.log.error(`Error parsing GraphQL statement for \"${operation}\" modifier.`, err);\n\t\t\t\tparsed = false;\n\t\t\t}*/\n\n\t\t\tmodifier = [modifier, modifier]; // parsed];\n\t\t}\n\n\t\tconst mods = pre\n\t\t\t? (this.modifiers[operation] = this.modifiers[operation] || [])\n\t\t\t: (this.post_modifiers[operation] = this.post_modifiers[operation] || []);\n\n\t\tmods.push(modifier);\n\t}\n\n\tunregisterModifier(operation, modifier, pre=true) {\n\t\tconst mods = pre ? this.modifiers[operation] : this.post_modifiers[operation];\n\t\tif ( ! mods )\n\t\t\treturn;\n\n\t\tif ( typeof modifier !== 'function' )\n\t\t\tthrow new Error('graphql modifiers cannot be removed');\n\n\t\tfor(let i=0; i < mods.length; i++) {\n\t\t\tconst mod = mods[i];\n\t\t\tif ( typeof mod === 'function' ? mod === modifier : mod[0] === modifier ) {\n\t\t\t\tmods.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\n\t// ========================================================================\n\t// Querying\n\t// ========================================================================\n\n\tgetQuery(operation) {\n\t\tconst query_map = this.client.queryManager?.queries;\n\n\t\tif ( ! query_map )\n\t\t\treturn;\n\n\t\tfor(const val of query_map.values()) {\n\t\t\tconst obs = val?.observableQuery;\n\t\t\tif ( obs?.queryName === operation )\n\t\t\t\treturn obs;\n\t\t}\n\t}\n\n\n\tmaybeRefetch(operation) {\n\t\tconst query = this.getQuery(operation);\n\t\tif ( ! query || ! query.lastResult || query.lastResult.stale )\n\t\t\treturn;\n\n\t\tquery.refetch();\n\t}\n\n\n\tensureQuery(operation, predicate, delay = 500, retry_wait = 120000) {\n\t\tconst query = this.getQuery(operation);\n\n\t\tif ( query ) {\n\t\t\tconst result = query.lastResult;\n\t\t\tlet passed;\n\t\t\tif ( ! result )\n\t\t\t\tpassed = false;\n\t\t\telse if ( result.loading )\n\t\t\t\tpassed = true;\n\t\t\telse if ( typeof predicate === 'function' )\n\t\t\t\tpassed = predicate(result);\n\t\t\telse\n\t\t\t\tpassed = get(predicate, result) !== undefined;\n\n\t\t\tif ( ! passed && Date.now() - (query._ffz_last_retry || 0) >= retry_wait ) {\n\t\t\t\tquery._ffz_last_retry = Date.now();\n\n\t\t\t\t// Make a shallow clone of the query document to avoid hitting the\n\t\t\t\t// cache in transformDocument.\n\t\t\t\tquery.options.query = Object.assign({}, query.options.query);\n\n\t\t\t\tif ( delay === 0 )\n\t\t\t\t\tquery.refetch();\n\t\t\t\telse if ( delay > 0 )\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t//debugger;\n\t\t\t\t\t\tquery.refetch()\n\t\t\t\t\t}, delay);\n\t\t\t}\n\t\t}\n\n\t\treturn query;\n\t}\n\n\n\tgetFromQuery(operation, predicate, delay = 500, retry_wait = 120000) {\n\t\tconst query = this.getQuery(operation),\n\t\t\tresult = query && query.lastResult;\n\n\t\tif ( ! query )\n\t\t\treturn undefined;\n\n\t\tlet out;\n\n\t\tif ( result ) {\n\t\t\tif ( typeof predicate === 'function' )\n\t\t\t\tout = predicate(result);\n\t\t\telse\n\t\t\t\tout = get(predicate, result)\n\n\t\t\tif ( result.loading )\n\t\t\t\treturn undefined;\n\t\t}\n\n\t\tif ( out === undefined && Date.now() - (query._ffz_last_retry || 0) >= retry_wait ) {\n\t\t\tquery._ffz_last_retry = Date.now();\n\n\t\t\t// Make a shallow clone of the query document to avoid hitting the\n\t\t\t// cache in transformDocument.\n\t\t\tquery.options.query = Object.assign({}, query.options.query);\n\n\t\t\tif ( delay === 0 )\n\t\t\t\tquery.refetch();\n\t\t\telse if ( delay > 0 )\n\t\t\t\tsetTimeout(() => query.refetch(), delay);\n\t\t}\n\n\t\treturn out;\n\t}\n\n}\n","'use strict';\n\nimport {parse as parse_path} from 'utilities/path-parser';\n\nlet MD, MILA, waiters;\nlet _md;\n\nfunction loadMD() {\n\tif ( MD )\n\t\treturn Promise.resolve(MD);\n\n\treturn new Promise((s,f) => {\n\t\tif ( waiters )\n\t\t\treturn waiters.push([s,f]);\n\n\t\twaiters = [[s,f]];\n\n\t\tPromise.all([\n\t\t\timport(/* webpackChunkName: 'markdown' */ 'markdown-it'),\n\t\t\timport(/* webpackChunkName: 'markdown' */ 'markdown-it-link-attributes')\n\t\t]).then(modules => {\n\t\t\tMD = modules[0]?.default;\n\t\t\tMILA = modules[1]?.default;\n\n\t\t\tconst waited = waiters;\n\t\t\twaiters = null;\n\n\t\t\tfor(const pair of waited)\n\t\t\t\tpair[0](MD);\n\n\t\t}).catch(err => {\n\t\t\tconst waited = waiters;\n\t\t\twaiters = null;\n\n\t\t\tfor(const pair of waited)\n\t\t\t\tpair[1](err);\n\t\t});\n\t});\n}\n\n\nfunction SettingsLinks(md) {\n\tconst default_render = md.renderer.rules.link_open || this.defaultRender;\n\n\tmd.renderer.rules.link_open = function(tokens, idx, options, env, self) {\n\t\tconst token = tokens[idx];\n\t\tif ( token && token.type === 'link_open' && Array.isArray(token.attrs) ) {\n\t\t\tlet href;\n\t\t\tfor(const attr of token.attrs) {\n\t\t\t\tif ( attr[0] === 'href' ) {\n\t\t\t\t\thref = attr[1];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( href.startsWith('~') ) {\n\t\t\t\tlet path;\n\n\t\t\t\tif ( href === '~' ) {\n\t\t\t\t\t// We don't have a path, make one from the bits.\n\t\t\t\t\tlet i = idx + 1;\n\t\t\t\t\tlet bits = [];\n\n\t\t\t\t\twhile(i < tokens.length) {\n\t\t\t\t\t\tconst tok = tokens[i],\n\t\t\t\t\t\t\ttype = tok?.type;\n\t\t\t\t\t\tif ( type === 'text' )\n\t\t\t\t\t\t\tbits.push(tok);\n\t\t\t\t\t\telse if ( type === 'link_close' )\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\n\t\t\t\t\tbits = bits.map(x => x.content).join('');\n\t\t\t\t\tconst toks = parse_path(bits);\n\t\t\t\t\tpath = toks.map(x => x.key).join('.');\n\t\t\t\t} else\n\t\t\t\t\tpath = href.slice(1);\n\n\t\t\t\tif ( path && path.length ) {\n\t\t\t\t\tfor(const attr of token.attrs) {\n\t\t\t\t\t\tif ( attr[0] === 'class' ) {\n\t\t\t\t\t\t\tattr[1] = attr[1].replace(/ffz-tooltip/g, '');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\ttoken.attrs.push([\n\t\t\t\t\t\t'data-settings-link',\n\t\t\t\t\t\tpath\n\t\t\t\t\t]);\n\t\t\t\t\ttoken.attrs.push([\n\t\t\t\t\t\t'onclick',\n\t\t\t\t\t\t'FrankerFaceZ.get().resolve(\"main_menu\").mdNavigate(this);return false'\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn default_render(tokens, idx, options, env, self);\n\t}\n}\n\nSettingsLinks.defaultRender = function(tokens, idx, options, env, self) {\n\treturn self.renderToken(tokens, idx, options);\n}\n\nexport default async function awaitMD() {\n\tif ( ! _md ) {\n\t\tconst MD = await loadMD();\n\t\tif ( ! MD )\n\t\t\treturn null;\n\n\t\tconst md = _md = new MD({\n\t\t\thtml: false,\n\t\t\tlinkify: true\n\t\t});\n\n\t\tmd.use(SettingsLinks);\n\t\tmd.use(MILA, {\n\t\t\tattrs: {\n\t\t\t\tclass: 'ffz-tooltip',\n\t\t\t\ttarget: '_blank',\n\t\t\t\trel: 'noopener',\n\t\t\t\t'data-tooltip-type': 'link'\n\t\t\t}\n\t\t});\n\t}\n\n\treturn _md;\n}\n\nexport function getMD(callback) {\n\tif ( _md )\n\t\treturn _md;\n\n\tif ( callback )\n\t\tawaitMD().then(md => callback(md));\n}","'use strict';\n\nimport type SettingsManager from 'root/src/settings';\nimport type { FineWrapper } from 'root/src/utilities/compat/fine';\nimport type Fine from 'root/src/utilities/compat/fine';\nimport type { ReactStateNode } from 'root/src/utilities/compat/react-types';\n\n// ============================================================================\n// Loadable Stuff\n// ============================================================================\n\nimport Module, { GenericModule } from 'utilities/module';\nimport type { AnyFunction } from 'utilities/types';\nimport type Twilight from '..';\n\ndeclare module 'utilities/types' {\n\tinterface ModuleEventMap {\n\n\t}\n\tinterface ModuleMap {\n\t\t'site.loadable': Loadable\n\t}\n\tinterface SettingsTypeMap {\n\t\t'chat.hype.show-pinned': boolean;\n\t\t'layout.turbo-cta': boolean;\n\t}\n}\n\n\ntype LoadableNode = ReactStateNode<{\n\tcomponent: string;\n\tloader: any;\n}, {\n\tComponent?: AnyFunction;\n}>;\n\ntype ErrorBoundaryNode = ReactStateNode<{\n\tname: string;\n\tonError: any;\n\tchildren: any;\n}> & {\n\tonErrorBoundaryTestEmit: any\n}\n\n\nexport default class Loadable extends Module {\n\n\t// Dependencies\n\tsettings: SettingsManager = null as any;\n\tsite: Twilight = null as any;\n\tfine: Fine = null as any;\n\n\t// State\n\toverrides: Map<string, boolean>;\n\n\t// Fine\n\tErrorBoundaryComponent: FineWrapper<ErrorBoundaryNode>;\n\tLoadableComponent: FineWrapper<LoadableNode>;\n\n\tconstructor(name?: string, parent?: GenericModule) {\n\t\tsuper(name, parent);\n\n\t\tthis.should_enable = true;\n\n\t\tthis.inject('settings');\n\t\tthis.inject('site.fine');\n\t\tthis.inject('site');\n\n\t\tthis.LoadableComponent = this.fine.define(\n\t\t\t'loadable-component',\n\t\t\tn =>\n\t\t\t\t(n as LoadableNode).props?.component &&\n\t\t\t\t(n as LoadableNode).props.loader\n\t\t);\n\n\t\tthis.ErrorBoundaryComponent = this.fine.define(\n\t\t\t'error-boundary-component',\n\t\t\tn =>\n\t\t\t\t(n as ErrorBoundaryNode).props?.name &&\n\t\t\t\t(n as ErrorBoundaryNode).props?.onError &&\n\t\t\t\t(n as ErrorBoundaryNode).props?.children &&\n\t\t\t\t(n as ErrorBoundaryNode).onErrorBoundaryTestEmit\n\t\t);\n\n\t\tthis.overrides = new Map();\n\n\t}\n\n\tonEnable() {\n\t\tthis.settings.getChanges('chat.hype.show-pinned', val => {\n\t\t\tthis.toggle('PaidPinnedChatMessageList', val);\n\t\t});\n\n\t\tthis.settings.getChanges('layout.turbo-cta', val => {\n\t\t\tthis.toggle('TopNav__TurboButton_Available', val);\n\t\t});\n\n\t\tthis.ErrorBoundaryComponent.ready((cls, instances) => {\n\t\t\tthis.log.debug('Found Error Boundary component wrapper.');\n\n\t\t\tconst t = this,\n\t\t\t\tproto = cls.prototype as ErrorBoundaryNode,\n\t\t\t\told_render = proto.render;\n\n\t\t\tproto.render = function() {\n\t\t\t\ttry {\n\t\t\t\t\tconst type = this.props.name;\n\t\t\t\t\tif ( t.overrides.has(type) && ! t.shouldRender(type) )\n\t\t\t\t\t\treturn null;\n\t\t\t\t} catch(err) {\n\t\t\t\t\t/* no-op */\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\n\t\t\t\treturn old_render.call(this);\n\t\t\t}\n\n\t\t\tthis.ErrorBoundaryComponent.updateInstances();\n\t\t});\n\n\t\tthis.LoadableComponent.ready((cls, instances) => {\n\t\t\tthis.log.debug('Found Loadable component wrapper.');\n\n\t\t\tconst t = this,\n\t\t\t\tproto = cls.prototype,\n\t\t\t\told_render = proto.render;\n\n\t\t\tproto.render = function() {\n\t\t\t\ttry {\n\t\t\t\t\tconst type = this.props.component;\n\t\t\t\t\tif ( t.overrides.has(type) && this.state ) {\n\t\t\t\t\t\tlet cmp = this.state.Component;\n\t\t\t\t\t\tif ( typeof cmp === 'function' && ! (cmp as any).ffzWrapped ) {\n\t\t\t\t\t\t\tconst React = t.site.getReact(),\n\t\t\t\t\t\t\t\tcreateElement = React && React.createElement;\n\n\t\t\t\t\t\t\tif ( createElement ) {\n\t\t\t\t\t\t\t\tif ( ! (cmp as any).ffzWrapper ) {\n\t\t\t\t\t\t\t\t\tconst th = this;\n\t\t\t\t\t\t\t\t\tfunction FFZWrapper(props: any) {\n\t\t\t\t\t\t\t\t\t\tif ( t.shouldRender(th.props.component) )\n\t\t\t\t\t\t\t\t\t\t\treturn createElement(cmp, props);\n\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tFFZWrapper.ffzWrapped = true;\n\t\t\t\t\t\t\t\t\tFFZWrapper.displayName = `FFZWrapper(${this.props.component})`;\n\t\t\t\t\t\t\t\t\t(cmp as any).ffzWrapper = FFZWrapper;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthis.state.Component = (cmp as any).ffzWrapper;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch(err) {\n\t\t\t\t\t/* no-op */\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\n\t\t\t\treturn old_render.call(this);\n\t\t\t}\n\n\t\t\tthis.LoadableComponent.updateInstances();\n\t\t});\n\t}\n\n\ttoggle(cmp: string, state: boolean | null = null) {\n\t\tconst existing = this.overrides.get(cmp) ?? true;\n\n\t\tif ( state == null )\n\t\t\tstate = ! existing;\n\t\telse\n\t\t\tstate = !! state;\n\n\t\tif ( state !== existing ) {\n\t\t\tthis.overrides.set(cmp, state);\n\t\t\tthis.update(cmp);\n\t\t}\n\t}\n\n\tupdate(cmp: string) {\n\t\tfor(const inst of this.LoadableComponent.instances) {\n\t\t\tconst type = inst.props?.component;\n\t\t\tif ( type && type === cmp )\n\t\t\t\tinst.forceUpdate();\n\t\t}\n\n\t\tfor(const inst of this.ErrorBoundaryComponent.instances) {\n\t\t\tconst name = inst.props?.name;\n\t\t\tif ( name && name === cmp )\n\t\t\t\tinst.forceUpdate();\n\t\t}\n\t}\n\n\tshouldRender(cmp: string) {\n\t\treturn this.overrides.get(cmp) ?? true;\n\t}\n\n}\n","'use strict';\n\n// ============================================================================\n// Sub Button\n// ============================================================================\n\nimport Module, { GenericModule } from 'utilities/module';\nimport {createElement} from 'utilities/dom';\nimport type SettingsManager from 'src/settings';\nimport type TranslationManager from 'src/i18n';\nimport type Fine from 'utilities/compat/fine';\nimport type { FineWrapper } from 'utilities/compat/fine';\nimport type { ReactStateNode } from 'root/src/utilities/compat/react-types';\n\ndeclare module 'utilities/types' {\n\tinterface ModuleMap {\n\t\t'site.sub_button': SubButton;\n\t}\n\tinterface SettingsTypeMap {\n\t\t'layout.swap-sidebars': unknown;\n\t\t'sub-button.prime-notice': boolean;\n\t}\n}\n\ntype SubButtonNode = ReactStateNode<{\n\tdata?: {\n\t\tuser?: {\n\t\t\tself?: {\n\t\t\t\tcanPrimeSubscribe: boolean;\n\t\t\t\tsubscriptionBenefit: unknown;\n\t\t\t}\n\t\t}\n\t}\n}> & {\n\thandleSubMenuAction: any;\n\topenSubModal: any;\n};\n\nexport default class SubButton extends Module {\n\n\t// Dependencies\n\ti18n: TranslationManager = null as any;\n\tfine: Fine = null as any;\n\tsettings: SettingsManager = null as any;\n\n\t// Stuff\n\tSubButton: FineWrapper<SubButtonNode>;\n\n\tconstructor(name?: string, parent?: GenericModule) {\n\t\tsuper(name, parent);\n\n\t\tthis.should_enable = true;\n\n\t\tthis.inject('i18n');\n\t\tthis.inject('settings');\n\t\tthis.inject('site.fine');\n\n\t\tthis.settings.add('sub-button.prime-notice', {\n\t\t\tdefault: true,\n\n\t\t\tui: {\n\t\t\t\tpath: 'Channel > Metadata >> Subscription',\n\t\t\t\ttitle: 'Show Prime Reminder',\n\t\t\t\tdescription: 'Display a crown on subscription buttons when your free channel sub with Prime is available.',\n\t\t\t\tcomponent: 'setting-check-box'\n\t\t\t},\n\n\t\t\tchanged: () => this.SubButton.forceUpdate()\n\t\t});\n\n\t\tthis.SubButton = this.fine.define(\n\t\t\t'sub-button',\n\t\t\tn =>\n\t\t\t\t(n as SubButtonNode).handleSubMenuAction &&\n\t\t\t\t(n as SubButtonNode).openSubModal,\n\t\t\t['user', 'user-home', 'user-video', 'user-clip', 'video', 'user-videos', 'user-clips', 'user-collections', 'user-events', 'user-followers', 'user-following']\n\t\t);\n\t}\n\n\tonEnable() {\n\t\tthis.settings.on(':changed:layout.swap-sidebars', () =>\n\t\t\tthis.SubButton.forceUpdate());\n\n\t\tthis.SubButton.ready((cls, instances) => {\n\t\t\tfor(const inst of instances)\n\t\t\t\tthis.updateSubButton(inst);\n\t\t});\n\n\t\tthis.SubButton.on('mount', this.updateSubButton, this);\n\t\tthis.SubButton.on('update', this.updateSubButton, this);\n\t}\n\n\n\tupdateSubButton(inst: SubButtonNode) {\n\t\tconst container = this.fine.getChildNode<HTMLElement>(inst),\n\t\t\tbtn = container?.querySelector('button[data-a-target=\"subscribe-button\"]');\n\t\tif ( ! btn )\n\t\t\treturn;\n\n\t\tconst props = inst.props,\n\t\t\tdata = props.data && props.data.user,\n\t\t\tself = data && data.self,\n\t\t\tshould_show = this.settings.get('sub-button.prime-notice') && self && self.canPrimeSubscribe && ! self.subscriptionBenefit,\n\n\t\t\ticon = btn.querySelector('.ffz--can-prime');\n\n\t\tif ( should_show && ! icon ) {\n\t\t\tbtn.insertBefore(<span class=\"tw-button__icon tw-button__icon--left ffz--can-prime\">\n\t\t\t\t<figure\n\t\t\t\t\tclass=\"ffz-i-crown ffz-tooltip\"\n\t\t\t\t\tdata-title={this.i18n.t('sub-button.prime', 'Your free channel sub with Prime is available.')}\n\t\t\t\t/>\n\t\t\t</span>, btn.firstElementChild);\n\n\t\t\tbtn.appendChild(<span class=\"ffz--post-prime\" />);\n\n\t\t} else if ( ! should_show && icon ) {\n\t\t\ticon.remove();\n\t\t\tconst post = btn.querySelector('.ffz--post-prime');\n\t\t\tif ( post )\n\t\t\t\tpost.remove();\n\t\t}\n\t}\n}\n","'use strict';\n\nexport type CVDMatrix = [number, number, number, number, number, number, number, number, number];\n\nexport function hue2rgb(p: number, q: number, t: number) {\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1/6 )\n\t\treturn p + (q-p) * 6 * t;\n\tif ( t < 1/2 )\n\t\treturn q;\n\tif ( t < 2/3 )\n\t\treturn p + (q-p) * (2/3 - t) * 6;\n\treturn p;\n}\n\nexport function bit2linear(channel: number) {\n\t// http://www.brucelindbloom.com/Eqn_RGB_to_XYZ.html\n\t// This converts rgb 8bit to rgb linear, lazy because the other algorithm is really really dumb\n\t//return Math.pow(channel, 2.2);\n\n\t// CSS Colors Level 4 says 0.03928, Bruce Lindbloom who cared to write all algos says 0.04045, used bruce because whynawt\n\treturn (channel <= 0.04045) ? channel / 12.92 : Math.pow((channel + 0.055) / 1.055, 2.4);\n}\n\nexport function linear2bit(channel: number) {\n\t// Using lazy conversion in the other direction as well\n\t//return Math.pow(channel, 1/2.2);\n\n\t// I'm honestly not sure about 0.0031308, I've only seen it referenced on Bruce Lindbloom's site\n\treturn (channel <= 0.0031308) ? channel * 12.92 : Math.pow(1.055 * channel, 1/2.4) - 0.055;\n}\n\n\nexport interface BaseColor {\n\teq(other: BaseColor | null | undefined, ignoreAlpha: boolean): boolean;\n\n\ttoCSS(): string;\n\ttoHex(): string;\n\n\ttoRGBA(): RGBAColor;\n\ttoHSVA(): HSVAColor;\n\ttoHSLA(): HSLAColor;\n\ttoXYZA(): XYZAColor;\n\ttoLUVA(): LUVAColor;\n}\n\n\nclass RGBAColor implements BaseColor {\n\n\treadonly r: number;\n\treadonly g: number;\n\treadonly b: number;\n\treadonly a: number;\n\n\tconstructor(r: number, g: number, b: number, a?: number) {\n\t\tthis.r = r || 0;\n\t\tthis.g = g || 0;\n\t\tthis.b = b || 0;\n\t\tthis.a = a || 0;\n\t}\n\n\teq(other?: BaseColor | null, ignoreAlpha = false): boolean {\n\t\tif ( other instanceof RGBAColor )\n\t\t\treturn this.r === other.r && this.g === other.g && this.b === other.b && (ignoreAlpha || this.a === other.a);\n\t\treturn other ? this.eq(other.toRGBA(), ignoreAlpha) : false;\n\t}\n\n\t// ========================================================================\n\t// Updates\n\t// ========================================================================\n\n\t_r(r: number) { return new RGBAColor(r, this.g, this.b, this.a); }\n\t_g(g: number) { return new RGBAColor(this.r, g, this.b, this.a); }\n\t_b(b: number) { return new RGBAColor(this.r, this.g, b, this.a); }\n\t_a(a: number) { return new RGBAColor(this.r, this.g, this.b, a); }\n\n\t// ========================================================================\n\t// Conversion: to RGBA\n\t// ========================================================================\n\n\tstatic fromName(name: string) {\n\t\tconst ctx = Color.getContext();\n\t\tctx.clearRect(0, 0, 1, 1);\n\t\tctx.fillStyle = name;\n\t\tctx.fillRect(0, 0, 1, 1);\n\t\tconst data = ctx.getImageData(0, 0, 1, 1);\n\t\tif ( data?.data?.length !== 4 )\n\t\t\treturn null;\n\n\t\treturn new RGBAColor(data.data[0], data.data[1], data.data[2], data.data[3] / 255);\n\t}\n\n\tstatic fromCSS(input: string) {\n\t\tinput = input && input.trim();\n\t\tif ( ! input?.length )\n\t\t\treturn null;\n\n\t\tif ( input.charAt(0) === '#' )\n\t\t\treturn RGBAColor.fromHex(input);\n\n\t\t// fillStyle can handle rgba() inputs\n\t\t/*const match = /rgba?\\( *(\\d+%?) *, *(\\d+%?) *, *(\\d+%?) *(?:, *([\\d.]+))?\\)/i.exec(input);\n\t\tif ( match ) {\n\t\t\tlet r: number, g: number, b: number, a: number;\n\t\t\tlet rS = match[1],\n\t\t\t\tgS = match[2],\n\t\t\t\tbS = match[3],\n\t\t\t\taS = match[4];\n\n\t\t\tif ( rS.charAt(rS.length-1) === '%' )\n\t\t\t\tr = 255 * (parseInt(rS,10) / 100);\n\t\t\telse\n\t\t\t\tr = parseInt(rS,10);\n\n\t\t\tif ( gS.charAt(gS.length-1) === '%' )\n\t\t\t\tg = 255 * (parseInt(gS,10) / 100);\n\t\t\telse\n\t\t\t\tg = parseInt(gS,10);\n\n\t\t\tif ( bS.charAt(bS.length-1) === '%' )\n\t\t\t\tb = 255 * (parseInt(bS,10) / 100);\n\t\t\telse\n\t\t\t\tb = parseInt(bS,10);\n\n\t\t\tif ( aS )\n\t\t\t\tif ( aS.charAt(aS.length-1) === '%' )\n\t\t\t\t\ta = parseInt(aS,10) / 100;\n\t\t\t\telse\n\t\t\t\t\ta = parseFloat(aS);\n\t\t\telse\n\t\t\t\ta = 1;\n\n\t\t\treturn new RGBAColorA(\n\t\t\t\tMath.min(Math.max(0, r), 255),\n\t\t\t\tMath.min(Math.max(0, g), 255),\n\t\t\t\tMath.min(Math.max(0, b), 255),\n\t\t\t\tMath.min(Math.max(0, a), 1)\n\t\t\t);\n\t\t}*/\n\n\t\treturn RGBAColor.fromName(input);\n\t}\n\n\tstatic fromHex(input: string) {\n\t\tif ( input.charAt(0) === '#' )\n\t\t\tinput = input.slice(1);\n\n\t\tlet raw: number;\n\t\tlet alpha: number = 255;\n\n\t\tif ( input.length === 4 ) {\n\t\t\talpha = parseInt(input[3], 16) * 17;\n\t\t\tinput = input.slice(0, 3);\n\t\t} else if ( input.length === 8 ) {\n\t\t\talpha = parseInt(input.slice(6), 16);\n\t\t\tinput = input.slice(0, 6);\n\t\t}\n\n\t\tif ( input.length === 3 )\n\t\t\traw =\n\t\t\t\t((parseInt(input[0], 16) * 17) << 16) +\n\t\t\t\t((parseInt(input[1], 16) * 17) << 8) +\n\t\t\t\tparseInt(input[2], 16) * 17;\n\n\t\telse\n\t\t\traw = parseInt(input, 16);\n\n\t\treturn new RGBAColor(\n\t\t\t(raw >> 16), // Red\n\t\t\t(raw >> 8 & 0x00FF), // Green\n\t\t\t(raw & 0xFF), // Blue\n\t\t\talpha / 255 // Alpha (scaled from 0 to 1)\n\t\t);\n\t}\n\n\tstatic fromHSVA(h: number, s: number, v: number, a?: number) {\n\t\tlet r: number, g: number, b: number;\n\n\t\tconst i = Math.floor(h * 6),\n\t\t\tf = h * 6 - i,\n\t\t\tp = v * (1 - s),\n\t\t\tq = v * (1 - f * s),\n\t\t\tt = v * (1 - (1 - f) * s);\n\n\t\tswitch(i % 6) {\n\t\t\tcase 0: r = v; g = t; b = p; break;\n\t\t\tcase 1: r = q; g = v; b = p; break;\n\t\t\tcase 2: r = p; g = v; b = t; break;\n\t\t\tcase 3: r = p; g = q; b = v; break;\n\t\t\tcase 4: r = t; g = p; b = v; break;\n\t\t\tdefault: // case 5:\n\t\t\t\tr = v; g = p; b = q;\n\t\t}\n\n\t\treturn new RGBAColor(\n\t\t\tMath.round(Math.min(Math.max(0, r*255), 255)),\n\t\t\tMath.round(Math.min(Math.max(0, g*255), 255)),\n\t\t\tMath.round(Math.min(Math.max(0, b*255), 255)),\n\t\t\ta === undefined ? 1 : a\n\t\t);\n\t}\n\n\tstatic fromHSLA(h: number, s: number, l: number, a?: number) {\n\t\tif ( s === 0 ) {\n\t\t\tconst v = Math.round(Math.min(Math.max(0, 255*l), 255));\n\t\t\treturn new RGBAColor(v, v, v, a === undefined ? 1 : a);\n\t\t}\n\n\t\tconst q = l < 0.5 ? l * (1 + s) : l + s - l * s,\n\t\t\tp = 2 * l - q;\n\n\t\treturn new RGBAColor(\n\t\t\tMath.round(Math.min(Math.max(0, 255 * hue2rgb(p, q, h + 1/3)), 255)),\n\t\t\tMath.round(Math.min(Math.max(0, 255 * hue2rgb(p, q, h)), 255)),\n\t\t\tMath.round(Math.min(Math.max(0, 255 * hue2rgb(p, q, h - 1/3)), 255)),\n\t\t\ta === undefined ? 1 : a\n\t\t);\n\t}\n\n\tstatic fromXYZA(x: number, y: number, z: number, a?: number) {\n\t\tconst R =  3.240479 * x - 1.537150 * y - 0.498535 * z,\n\t\t\tG = -0.969256 * x + 1.875992 * y + 0.041556 * z,\n\t\t\tB =  0.055648 * x - 0.204043 * y + 1.057311 * z;\n\n\t\t// Make sure we end up in a real color space\n\t\treturn new RGBAColor(\n\t\t\tMath.max(0, Math.min(255, 255 * linear2bit(R))),\n\t\t\tMath.max(0, Math.min(255, 255 * linear2bit(G))),\n\t\t\tMath.max(0, Math.min(255, 255 * linear2bit(B))),\n\t\t\ta === undefined ? 1 : a\n\t\t);\n\t}\n\n\t// ========================================================================\n\t// Conversion: from RGBA\n\t// ========================================================================\n\n\t// CSS\n\ttoCSS() {\n\t\tif ( this.a !== 1 )\n\t\t\treturn `rgba(${this.r},${this.g},${this.b},${this.a})`;\n\t\treturn this.toHex();\n\t}\n\n\ttoHex() {\n\t\tconst value = (Math.round(this.r) << 16) + (Math.round(this.g) << 8) + Math.round(this.b);\n\t\treturn `#${value.toString(16).padStart(6, '0')}`;\n\t}\n\n\t// Color Spaces\n\ttoRGBA() { return this; }\n\ttoHSVA() { return HSVAColor.fromRGBA(this.r, this.g, this.b, this.a); }\n\ttoHSLA() { return HSLAColor.fromRGBA(this.r, this.g, this.b, this.a); }\n\ttoXYZA() { return XYZAColor.fromRGBA(this.r, this.g, this.b, this.a); }\n\ttoLUVA() { return this.toXYZA().toLUVA(); }\n\n\t// ========================================================================\n\t// Processing\n\t// ========================================================================\n\n\tget_Y() {\n\t\treturn ((0.299 * this.r) + ( 0.587 * this.g) + ( 0.114 * this.b)) / 255;\n\t}\n\n\tluminance() {\n\t\tconst r = bit2linear(this.r / 255),\n\t\t\tg = bit2linear(this.g / 255),\n\t\t\tb = bit2linear(this.b / 255);\n\n\t\treturn (0.2126 * r) + (0.7152 * g) + (0.0722 * b);\n\t}\n\n\t/** @deprecated This is a horrible function. */\n\tbrighten(amount?: number) {\n\t\tamount = typeof amount === `number` ? amount : 1;\n\t\tamount = Math.round(255 * (amount / 100));\n\n\t\treturn new RGBAColor(\n\t\t\tMath.max(0, Math.min(255, this.r + amount)),\n\t\t\tMath.max(0, Math.min(255, this.g + amount)),\n\t\t\tMath.max(0, Math.min(255, this.b + amount)),\n\t\t\tthis.a\n\t\t);\n\t}\n\n\tdaltonize(type: string | CVDMatrix) {\n\t\tlet cvd: CVDMatrix;\n\t\tif ( typeof type === 'string' ) {\n\t\t\tif ( Color.CVDMatrix.hasOwnProperty(type) )\n\t\t\t\tcvd = Color.CVDMatrix[type];\n\t\t\telse\n\t\t\t\tthrow new Error('Invalid CVD matrix');\n\t\t} else\n\t\t\tcvd = type;\n\n\t\tconst cvd_a = cvd[0], cvd_b = cvd[1], cvd_c = cvd[2],\n\t\t\tcvd_d = cvd[3], cvd_e = cvd[4], cvd_f = cvd[5],\n\t\t\tcvd_g = cvd[6], cvd_h = cvd[7], cvd_i = cvd[8];\n\n\t\t//let L, M, S, l, m, s, R, G, B, RR, GG, BB;\n\n\t\t// RGB to LMS matrix conversion\n\t\tconst L = (17.8824 * this.r) + (43.5161 * this.g) + (4.11935 * this.b),\n\t\t\tM = (3.45565 * this.r) + (27.1554 * this.g) + (3.86714 * this.b),\n\t\t\tS = (0.0299566 * this.r) + (0.184309 * this.g) + (1.46709 * this.b);\n\n\t\t// Simulate color blindness\n\t\tconst l = (cvd_a * L) + (cvd_b * M) + (cvd_c * S),\n\t\t\tm = (cvd_d * L) + (cvd_e * M) + (cvd_f * S),\n\t\t\ts = (cvd_g * L) + (cvd_h * M) + (cvd_i * S);\n\n\t\t// LMS to RGB matrix conversion\n\t\tlet R = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s),\n\t\t\tG = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s),\n\t\t\tB = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);\n\n\t\t// Isolate invisible colors to color vision deficiency (calculate error matrix)\n\t\tR = this.r - R;\n\t\tG = this.g - G;\n\t\tB = this.b - B;\n\n\t\t// Shift colors towards visible spectrum (apply error modifications)\n\t\tconst RR = (0.0 * R) + (0.0 * G) + (0.0 * B),\n\t\t\tGG = (0.7 * R) + (1.0 * G) + (0.0 * B),\n\t\t\tBB = (0.7 * R) + (0.0 * G) + (1.0 * B);\n\n\t\t// Add compensation to original values\n\t\tR = Math.min(Math.max(0, RR + this.r), 255);\n\t\tG = Math.min(Math.max(0, GG + this.g), 255);\n\t\tB = Math.min(Math.max(0, BB + this.b), 255);\n\n\t\treturn new RGBAColor(R, G, B, this.a);\n\t}\n\n}\n\n\nclass HSVAColor implements BaseColor {\n\n\treadonly h: number;\n\treadonly s: number;\n\treadonly v: number;\n\treadonly a: number;\n\n\tconstructor(h: number, s: number, v: number, a?: number) {\n\t\tthis.h = h || 0;\n\t\tthis.s = s || 0;\n\t\tthis.v = v || 0;\n\t\tthis.a = a || 0;\n\t}\n\n\teq(other?: BaseColor | null, ignoreAlpha = false): boolean {\n\t\tif ( other instanceof HSVAColor )\n\t\t\treturn this.h === other.h && this.s === other.s && this.v === other.v && (ignoreAlpha || this.a === other.a);\n\t\treturn other ? this.eq(other.toHSVA(), ignoreAlpha) : false;\n\t}\n\n\t// ========================================================================\n\t// Updates\n\t// ========================================================================\n\n\t_h(h: number) { return new HSVAColor(h, this.s, this.v, this.a); }\n\t_s(s: number) { return new HSVAColor(this.h, s, this.v, this.a); }\n\t_v(v: number) { return new HSVAColor(this.h, this.s, v, this.a); }\n\t_a(a: number) { return new HSVAColor(this.h, this.s, this.v, a); }\n\n\t// ========================================================================\n\t// Conversion: to HSVA\n\t// ========================================================================\n\n\tstatic fromRGBA(r: number, g: number, b: number, a?: number) {\n\t\tr /= 255; g /= 255; b /= 255;\n\n\t\tconst max = Math.max(r, g, b),\n\t\t\tmin = Math.min(r, g, b),\n\t\t\td = Math.min(Math.max(0, max - min), 1),\n\n\t\t\ts = max === 0 ? 0 : d / max,\n\t\t\tv = max;\n\n\t\tlet h;\n\n\t\tif ( d === 0 )\n\t\t\th = 0;\n\t\telse {\n\t\t\tswitch(max) {\n\t\t\t\tcase r:\n\t\t\t\t\th = (g - b) / d + (g < b ? 6 : 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase g:\n\t\t\t\t\th = (b - r) / d + 2;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault: // case b:\n\t\t\t\t\th = (r - g) / d + 4;\n\t\t\t}\n\t\t\th /= 6;\n\t\t}\n\n\t\treturn new HSVAColor(\n\t\t\th,\n\t\t\ts,\n\t\t\tv,\n\t\t\ta === undefined ? 1 : a\n\t\t);\n\t}\n\n\t// ========================================================================\n\t// Conversion: from HSVA\n\t// ========================================================================\n\n\ttoCSS() { return this.toRGBA().toCSS(); }\n\ttoHex() { return this.toRGBA().toHex(); }\n\n\ttoRGBA() { return RGBAColor.fromHSVA(this.h, this.s, this.v, this.a); }\n\ttoHSVA() { return this; }\n\ttoHSLA() { return this.toRGBA().toHSLA(); }\n\ttoXYZA() { return this.toRGBA().toXYZA(); }\n\ttoLUVA() { return this.toRGBA().toLUVA(); }\n\n}\n\n\nclass HSLAColor implements BaseColor {\n\n\treadonly h: number;\n\treadonly s: number;\n\treadonly l: number;\n\treadonly a: number;\n\n\tconstructor(h: number, s: number, l: number, a?: number) {\n\t\tthis.h = h || 0;\n\t\tthis.s = s || 0;\n\t\tthis.l = l || 0;\n\t\tthis.a = a || 0;\n\t}\n\n\teq(other?: BaseColor | null, ignoreAlpha = false): boolean {\n\t\tif ( other instanceof HSLAColor )\n\t\t\treturn this.h === other.h && this.s === other.s && this.l === other.l && (ignoreAlpha || this.a === other.a);\n\t\treturn other ? this.eq(other.toHSLA(), ignoreAlpha) : false;\n\t}\n\n\t// ========================================================================\n\t// Updates\n\t// ========================================================================\n\n\t_h(h: number) { return new HSLAColor(h, this.s, this.l, this.a); }\n\t_s(s: number) { return new HSLAColor(this.h, s, this.l, this.a); }\n\t_l(l: number) { return new HSLAColor(this.h, this.s, l, this.a); }\n\t_a(a: number) { return new HSLAColor(this.h, this.s, this.l, a); }\n\n\t// ========================================================================\n\t// Conversion: to HSLA\n\t// ========================================================================\n\n\tstatic fromRGBA(r: number, g: number, b: number, a?: number) {\n\t\tr /= 255; g /= 255; b /= 255;\n\n\t\tconst max = Math.max(r,g,b),\n\t\t\tmin = Math.min(r,g,b),\n\n\t\t\tl = Math.min(Math.max(0, (max+min) / 2), 1),\n\t\t\td = Math.min(Math.max(0, max - min), 1);\n\n\t\tlet h, s;\n\n\t\tif ( d === 0 )\n\t\t\th = s = 0;\n\t\telse {\n\t\t\ts = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\t\t\tswitch(max) {\n\t\t\t\tcase r:\n\t\t\t\t\th = (g - b) / d + (g < b ? 6 : 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase g:\n\t\t\t\t\th = (b - r) / d + 2;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault: //case b:\n\t\t\t\t\th = (r - g) / d + 4;\n\t\t\t}\n\t\t\th /= 6;\n\t\t}\n\n\t\treturn new HSLAColor(h, s, l, a === undefined ? 1 : a);\n\t}\n\n\n\t// ========================================================================\n\t// Conversion: from HSLA\n\t// ========================================================================\n\n\ttoCSS() {\n\t\tconst a = this.a;\n\t\treturn `hsl${a !== 1 ? 'a' : ''}(${Math.round(this.h*360)},${Math.round(this.s*100)}%,${Math.round(this.l*100)}%${a !== 1 ? `,${this.a}` : ''})`;\n\t}\n\n\ttoHex() { return this.toRGBA().toHex(); }\n\n\ttoRGBA() { return RGBAColor.fromHSLA(this.h, this.s, this.l, this.a); }\n\ttoHSLA() { return this; }\n\ttoHSVA() { return this.toRGBA().toHSVA(); }\n\ttoXYZA() { return this.toRGBA().toXYZA(); }\n\ttoLUVA() { return this.toRGBA().toLUVA(); }\n\n\t// ========================================================================\n\t// Processing\n\t// ========================================================================\n\n\ttargetLuminance(target: number) {\n\t\tlet s = this.s,\n\t\t\tmin = 0,\n\t\t\tmax = 1;\n\n\t\ts *= Math.pow(this.l > 0.5 ? -this.l : this.l - 1, 7) + 1;\n\n\t\tlet d = (max - min) / 2,\n\t\t\tmid = min + d;\n\n\t\tfor (; d > 1/65536; d /= 2, mid = min + d) {\n\t\t\tconst luminance = RGBAColor.fromHSLA(this.h, s, mid, 1).luminance();\n\t\t\tif (luminance > target) {\n\t\t\t\tmax = mid;\n\t\t\t} else {\n\t\t\t\tmin = mid;\n\t\t\t}\n\t\t}\n\n\t\treturn new HSLAColor(this.h, s, mid, this.a);\n\t}\n\n\n}\n\n\nclass XYZAColor implements BaseColor {\n\n\treadonly x: number;\n\treadonly y: number;\n\treadonly z: number;\n\treadonly a: number;\n\n\tconstructor(x: number, y: number, z: number, a?: number) {\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\t\tthis.z = z || 0;\n\t\tthis.a = a || 0;\n\t}\n\n\teq(other?: BaseColor, ignoreAlpha = false): boolean {\n\t\tif ( other instanceof XYZAColor )\n\t\t\treturn this.x === other.x && this.y === other.y && this.z === other.z && (ignoreAlpha || this.a === other.a);\n\t\treturn other ? this.eq(other.toXYZA(), ignoreAlpha) : false;\n\t}\n\n\t// ========================================================================\n\t// Updates\n\t// ========================================================================\n\n\t_x(x: number) { return new XYZAColor(x, this.y, this.z, this.a); }\n\t_y(y: number) { return new XYZAColor(this.x, y, this.z, this.a); }\n\t_z(z: number) { return new XYZAColor(this.x, this.y, z, this.a); }\n\t_a(a: number) { return new XYZAColor(this.x, this.y, this.z, a); }\n\n\t// ========================================================================\n\t// Conversion: to XYZA\n\t// ========================================================================\n\n\tstatic EPSILON = Math.pow(6 / 29, 3);\n\tstatic KAPPA = Math.pow(29 / 3, 3);\n\tstatic WHITE = null as any; // Gotta do this late to avoid an error.\n\n\tstatic fromRGBA(r: number, g: number, b: number, a?: number) {\n\t\tconst R = bit2linear(r / 255),\n\t\t\tG = bit2linear(g / 255),\n\t\t\tB = bit2linear(b / 255);\n\n\t\treturn new XYZAColor(\n\t\t\t0.412453 * R + 0.357580 * G + 0.180423 * B,\n\t\t\t0.212671 * R + 0.715160 * G + 0.072169 * B,\n\t\t\t0.019334 * R + 0.119193 * G + 0.950227 * B,\n\t\t\ta === undefined ? 1 : a\n\t\t);\n\t}\n\n\tstatic fromLUVA(l: number, u: number, v: number, alpha?: number) {\n\t\tconst deltaGammaFactor = 1 / (XYZAColor.WHITE.x + 15 * XYZAColor.WHITE.y + 3 * XYZAColor.WHITE.z),\n\t\t\tuDeltaGamma = 4 * XYZAColor.WHITE.x * deltaGammaFactor,\n\t\t\tvDeltagamma = 9 * XYZAColor.WHITE.y * deltaGammaFactor;\n\n\t\t// XYZAColor.EPSILON * XYZAColor.KAPPA = 8\n\t\tconst Y = (l > 8) ? Math.pow((l + 16) / 116, 3) : l / XYZAColor.KAPPA,\n\t\t\ta = 1/3 * (((52 * l) / (u + 13 * l * uDeltaGamma)) - 1),\n\t\t\tb = -5 * Y,\n\t\t\tc = -1/3,\n\t\t\td = Y * (((39 * l) / (v + 13 * l * vDeltagamma)) - 5),\n\n\t\t\tX = (d - b) / (a - c),\n\t\t\tZ = X * a + b;\n\n\t\treturn new XYZAColor(X, Y, Z, alpha === undefined ? 1 : alpha);\n\t}\n\n\t// ========================================================================\n\t// Conversion: from XYZA\n\t// ========================================================================\n\n\ttoCSS() { return this.toRGBA().toCSS(); }\n\ttoHex() { return this.toRGBA().toHex(); }\n\n\ttoRGBA() { return RGBAColor.fromXYZA(this.x, this.y, this.z, this.a); }\n\ttoHSLA() { return this.toRGBA().toHSLA(); }\n\ttoHSVA() { return this.toRGBA().toHSVA(); }\n\ttoXYZA() { return this; }\n\ttoLUVA() { return LUVAColor.fromXYZA(this.x, this.y, this.z, this.a); }\n}\n\n// Assign this now that XYZAColor exists.\nXYZAColor.WHITE = new RGBAColor(255,255,255,1).toXYZA();\n\n\nclass LUVAColor implements BaseColor {\n\n\treadonly l: number;\n\treadonly u: number;\n\treadonly v: number;\n\treadonly a: number;\n\n\tconstructor(l: number, u: number, v: number, a?: number) {\n\t\tthis.l = l || 0;\n\t\tthis.u = u || 0;\n\t\tthis.v = v || 0;\n\t\tthis.a = a || 0;\n\t}\n\n\teq(other?: BaseColor | null, ignoreAlpha = false): boolean {\n\t\tif ( other instanceof LUVAColor )\n\t\t\treturn this.l === other.l && this.u === other.u && this.v === other.v && (ignoreAlpha || this.a === other.a);\n\t\treturn other ? this.eq(other.toLUVA(), ignoreAlpha) : false;\n\t}\n\n\t// ========================================================================\n\t// Updates\n\t// ========================================================================\n\n\t_l(l: number) { return new LUVAColor(l, this.u, this.v, this.a); }\n\t_u(u: number) { return new LUVAColor(this.l, u, this.v, this.a); }\n\t_v(v: number) { return new LUVAColor(this.l, this.u, v, this.a); }\n\t_a(a: number) { return new LUVAColor(this.l, this.u, this.v, a); }\n\n\t// ========================================================================\n\t// Conversion: to LUVA\n\t// ========================================================================\n\n\tstatic fromXYZA(X: number, Y: number, Z: number, a?: number) {\n\t\tconst deltaGammaFactor = 1 / (XYZAColor.WHITE.x + 15 * XYZAColor.WHITE.y + 3 * XYZAColor.WHITE.z),\n\t\t\tuDeltaGamma = 4 * XYZAColor.WHITE.x * deltaGammaFactor,\n\t\t\tvDeltagamma = 9 * XYZAColor.WHITE.y * deltaGammaFactor,\n\n\t\t\tyGamma = Y / XYZAColor.WHITE.y;\n\n\t\tlet deltaDivider = (X + 15 * Y + 3 * Z);\n\t\tif (deltaDivider === 0) {\n\t\t\tdeltaDivider = 1;\n\t\t}\n\n\t\tconst deltaFactor = 1 / deltaDivider,\n\n\t\t\tuDelta = 4 * X * deltaFactor,\n\t\t\tvDelta = 9 * Y * deltaFactor,\n\n\t\t\tL = (yGamma > XYZAColor.EPSILON) ? 116 * Math.pow(yGamma, 1/3) - 16 : XYZAColor.KAPPA * yGamma,\n\t\t\tu = 13 * L * (uDelta - uDeltaGamma),\n\t\t\tv = 13 * L * (vDelta - vDeltagamma);\n\n\t\treturn new LUVAColor(L, u, v, a === undefined ? 1 : a);\n\t}\n\n\t// ========================================================================\n\t// Conversion: from LUVA\n\t// ========================================================================\n\n\ttoCSS() { return this.toRGBA().toCSS(); }\n\ttoHex() { return this.toRGBA().toHex(); }\n\n\ttoRGBA() { return this.toXYZA().toRGBA(); }\n\ttoHSLA() { return this.toRGBA().toHSLA(); }\n\ttoHSVA() { return this.toRGBA().toHSVA(); }\n\ttoXYZA() { return XYZAColor.fromLUVA(this.l, this.u, this.v, this.a); }\n\ttoLUVA() { return this;}\n\n}\n\n\n\n\ntype ColorType = {\n\t_canvas?: HTMLCanvasElement;\n\t_context?: CanvasRenderingContext2D;\n\n\tgetCanvas(): HTMLCanvasElement;\n\tgetContext(): CanvasRenderingContext2D\n\n\tCVDMatrix: Record<string, CVDMatrix>;\n\n\tRGBA: typeof RGBAColor;\n\tHSVA: typeof HSVAColor;\n\tHSLA: typeof HSLAColor;\n\tXYZA: typeof XYZAColor;\n\tLUVA: typeof LUVAColor;\n\n\tfromCSS(input: string): RGBAColor | null;\n}\n\n\nexport const Color: ColorType = {\n\tCVDMatrix: {\n\t\tprotanope: [ // reds are greatly reduced (1% men)\n\t\t\t0.0, 2.02344, -2.52581,\n\t\t\t0.0, 1.0,      0.0,\n\t\t\t0.0, 0.0,      1.0\n\t\t],\n\t\tdeuteranope: [ // greens are greatly reduced (1% men)\n\t\t\t1.0,      0.0, 0.0,\n\t\t\t0.494207, 0.0, 1.24827,\n\t\t\t0.0,      0.0, 1.0\n\t\t],\n\t\ttritanope: [ // blues are greatly reduced (0.003% population)\n\t\t\t1.0,       0.0,      0.0,\n\t\t\t0.0,       1.0,      0.0,\n\t\t\t-0.395913, 0.801109, 0.0\n\t\t]\n\t},\n\n\tgetCanvas() {\n\t\tif ( ! Color._canvas )\n\t\t\tColor._canvas = document.createElement('canvas');\n\t\treturn Color._canvas;\n\t},\n\tgetContext: () => {\n\t\tif ( ! Color._context )\n\t\t\tColor._context = Color.getCanvas().getContext('2d') as CanvasRenderingContext2D;\n\t\treturn Color._context;\n\t},\n\n\tRGBA: RGBAColor,\n\tHSVA: HSVAColor,\n\tHSLA: HSLAColor,\n\tXYZA: XYZAColor,\n\tLUVA: LUVAColor,\n\n\tfromCSS(input: string) {\n\t\treturn RGBAColor.fromCSS(input);\n\t},\n};\n\n\nexport class ColorAdjuster {\n\n\tprivate _base: string;\n\tprivate _contrast: number;\n\tprivate _mode: number;\n\n\tprivate _dark: boolean = false;\n\tprivate _cache: Map<string, string> = new Map;\n\n\tprivate _luv: number = 0;\n\tprivate _luma: number = 0;\n\n\tconstructor(base = '#232323', mode = 0, contrast = 4.5) {\n\t\tthis._contrast = contrast;\n\t\tthis._base = base;\n\t\tthis._mode = mode;\n\n\t\tthis.rebuildContrast();\n\t}\n\n\tget contrast() { return this._contrast }\n\tset contrast(val) { this._contrast = val; this.rebuildContrast() }\n\n\tget base() { return this._base }\n\tset base(val) { this._base = val; this.rebuildContrast() }\n\n\tget dark() { return this._dark }\n\n\tget mode() { return this._mode }\n\tset mode(val) { this._mode = val; this.rebuildContrast() }\n\n\n\trebuildContrast() {\n\t\tthis._cache = new Map;\n\n\t\tconst base = RGBAColor.fromCSS(this._base);\n\t\tif ( ! base )\n\t\t\tthrow new Error('Invalid base color');\n\n\t\tconst lum = base.luminance(),\n\t\t\tdark = this._dark = lum < 0.5;\n\n\t\tif ( dark ) {\n\t\t\tthis._luv = new XYZAColor(\n\t\t\t\t0,\n\t\t\t\t(this._contrast * (base.toXYZA().y + 0.05) - 0.05),\n\t\t\t\t0,\n\t\t\t\t1\n\t\t\t).toLUVA().l;\n\n\t\t\tthis._luma = this._contrast * (base.luminance() + 0.05) - 0.05;\n\n\t\t} else {\n\t\t\tthis._luv = new XYZAColor(\n\t\t\t\t0,\n\t\t\t\t(base.toXYZA().y + 0.05) / this._contrast - 0.05,\n\t\t\t\t0,\n\t\t\t\t1\n\t\t\t).toLUVA().l;\n\n\t\t\tthis._luma = (base.luminance() + 0.05) / this._contrast - 0.05;\n\t\t}\n\t}\n\n\tprocess(color: BaseColor | string, throw_errors = false) {\n\t\tif ( ! color )\n\t\t\treturn null;\n\n\t\tif ( this._mode === -1 )\n\t\t\treturn '';\n\n\t\tif ( typeof color !== 'string' )\n\t\t\tcolor = color.toCSS();\n\n\t\tif ( this._mode === 0 )\n\t\t\treturn color;\n\n\t\tif ( this._cache.has(color) )\n\t\t\treturn this._cache.get(color);\n\n\t\tlet rgb: RGBAColor;\n\n\t\ttry {\n\t\t\trgb = RGBAColor.fromCSS(color);\n\t\t} catch(err) {\n\t\t\tif ( throw_errors )\n\t\t\t\tthrow err;\n\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( ! rgb )\n\t\t\treturn null;\n\n\t\tif ( this._mode === 1 ) {\n\t\t\t// HSL Luma\n\t\t\tconst luma = rgb.luminance();\n\n\t\t\tif ( this._dark ? luma < this._luma : luma > this._luma )\n\t\t\t\trgb = rgb.toHSLA().targetLuminance(this._luma).toRGBA();\n\n\t\t} else if ( this._mode === 2 ) {\n\t\t\t// LUV\n\t\t\tconst luv = rgb.toLUVA();\n\t\t\tif ( this._dark ? luv.l < this._luv : luv.l > this._luv )\n\t\t\t\trgb = luv._l(this._luv).toRGBA();\n\n\t\t} else if ( this._mode === 3 ) {\n\t\t\t// HSL Loop (aka BTTV Style)\n\t\t\tif ( this._dark )\n\t\t\t\twhile ( rgb.get_Y() < 0.5 ) {\n\t\t\t\t\tconst hsl = rgb.toHSLA();\n\t\t\t\t\trgb = hsl._l(Math.min(Math.max(0, 0.1 + 0.9 * hsl.l), 1)).toRGBA();\n\t\t\t\t}\n\n\t\t\telse\n\t\t\t\twhile ( rgb.get_Y() >= 0.5 ) {\n\t\t\t\t\tconst hsl = rgb.toHSLA();\n\t\t\t\t\trgb = hsl._l(Math.min(Math.max(0, 0.9 * hsl.l), 1)).toRGBA();\n\t\t\t\t}\n\n\t\t} else if ( this._mode === 4 ) {\n\t\t\t// RGB Loop\n\t\t\tlet i = 0;\n\t\t\tif ( this._dark )\n\t\t\t\twhile ( rgb.luminance() < 0.15 && i++ < 127 )\n\t\t\t\t\trgb = rgb.brighten();\n\n\t\t\telse\n\t\t\t\twhile ( rgb.luminance() > 0.3 && i++ < 127 )\n\t\t\t\t\trgb = rgb.brighten(-1);\n\t\t}\n\n\t\tconst out = rgb.toCSS();\n\t\tthis._cache.set(color, out);\n\t\treturn out;\n\t}\n}\n","'use strict';\n\n// ============================================================================\n// Fine Router\n// ============================================================================\n\nimport {parse, tokensToRegExp, tokensToFunction} from 'path-to-regexp';\nimport Module, { GenericModule } from 'utilities/module';\nimport {has, deep_equals, sleep} from 'utilities/object';\nimport type Fine from './fine';\nimport type { OptionalPromise } from 'utilities/types';\n\ndeclare module 'utilities/types' {\n\tinterface ModuleEventMap {\n\t\t'site.router': FineRouterEvents;\n\t}\n\tinterface ModuleMap {\n\t\t'site.router': FineRouter;\n\t}\n}\n\n\ntype FineRouterEvents = {\n\t':updated-route-names': [];\n\t':updated-routes': [];\n\n\t':route': [route: RouteInfo | null, match: unknown];\n};\n\nexport type RouteInfo = {\n\tname: string;\n\tdomain: string | null;\n\n};\n\n\nexport default class FineRouter extends Module<'site.router', FineRouterEvents> {\n\n\t// Dependencies\n\tfine: Fine = null as any;\n\n\t// Storage\n\troutes: Record<string, RouteInfo>;\n\troute_names: Record<string, string>;\n\tprivate __routes: RouteInfo[];\n\n\t// State\n\tcurrent: RouteInfo | null;\n\tcurrent_name: string | null;\n\tcurrent_state: unknown | null;\n\tmatch: unknown | null;\n\tlocation: unknown | null;\n\n\n\n\tconstructor(name?: string, parent?: GenericModule) {\n\t\tsuper(name, parent);\n\t\tthis.inject('..fine');\n\n\t\tthis.__routes = [];\n\n\t\tthis.routes = {};\n\t\tthis.route_names = {};\n\t\tthis.current = null;\n\t\tthis.current_name = null;\n\t\tthis.current_state = null;\n\t\tthis.match = null;\n\t\tthis.location = null;\n\t}\n\n\t/** @internal */\n\tonEnable(): OptionalPromise<void> {\n\t\tconst thing = this.fine.searchTree(null, n => n.props && n.props.history),\n\t\t\thistory = this.history = thing && thing.props && thing.props.history;\n\n\t\tif ( ! history )\n\t\t\treturn sleep(50).then(() => this.onEnable());\n\n\t\thistory.listen(location => {\n\t\t\tif ( this.enabled )\n\t\t\t\tthis._navigateTo(location);\n\t\t});\n\n\t\tthis._navigateTo(history.location);\n\t}\n\n\tnavigate(route, data, opts, state) {\n\t\tthis.history.push(this.getURL(route, data, opts), state);\n\t}\n\n\tprivate _navigateTo(location) {\n\t\tthis.log.debug('New Location', location);\n\t\tconst host = window.location.host,\n\t\t\tpath = location.pathname,\n\t\t\tsearch = location.search,\n\t\t\tstate = location.state;\n\n\t\tif ( path === this.location && host === this.domain && search === this.search && deep_equals(state, this.current_state) )\n\t\t\treturn;\n\n\t\tthis.old_location = this.location;\n\t\tthis.old_search = this.search;\n\t\tthis.old_domain = this.domain;\n\t\tthis.old_state = this.current_state;\n\n\t\tthis.location = path;\n\t\tthis.search = search;\n\t\tthis.domain = host;\n\t\tthis.current_state = state;\n\n\t\tthis._pickRoute();\n\t}\n\n\tprivate _pickRoute() {\n\t\tconst path = this.location,\n\t\t\thost = this.domain;\n\n\t\tthis.old_route = this.current;\n\t\tthis.old_name = this.current_name;\n\t\tthis.old_match = this.match;\n\n\t\tfor(const route of this.__routes) {\n\t\t\tif ( route.domain && route.domain !== host )\n\t\t\t\tcontinue;\n\n\t\t\tconst match = route.regex.exec(path);\n\t\t\tif ( match && (! route.state_fn || route.state_fn(this.current_state)) ) {\n\t\t\t\tthis.log.debug('Matching Route', route, match);\n\t\t\t\tthis.current = route;\n\t\t\t\tthis.current_name = route.name;\n\t\t\t\tthis.match = match;\n\t\t\t\tthis.emit(':route', route, match);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.current = this.current_name = this.match = null;\n\t\tthis.emit(':route', null, null);\n\t}\n\n\tgetURL(route, data, opts, ...args) {\n\t\tconst r = this.routes[route];\n\t\tif ( ! r )\n\t\t\tthrow new Error(`unable to find route \"${route}\"`);\n\n\t\tif ( typeof data !== 'object' ) {\n\t\t\tconst parts = [data, opts, ...args];\n\t\t\tdata = {};\n\n\t\t\tlet i = 0;\n\t\t\tfor(const part of r.parts) {\n\t\t\t\tif ( part && part.name ) {\n\t\t\t\t\tdata[part.name] = parts[i];\n\t\t\t\t\ti++;\n\t\t\t\t\tif ( i >= parts.length )\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn r.url(data, opts);\n\t}\n\n\tgetRoute(name: string) {\n\t\treturn this.routes[name];\n\t}\n\n\tgetRoutes() {\n\t\treturn this.routes;\n\t}\n\n\tgetRouteNames() {\n\t\tfor(const route of Object.keys(this.getRoutes()))\n\t\t\tthis.getRouteName(route);\n\n\t\treturn this.route_names;\n\t}\n\n\tgetRouteName(route: string) {\n\t\tif ( ! this.route_names[route] )\n\t\t\tthis.route_names[route] = route\n\t\t\t\t.replace(/^dash-([a-z])/, (_, letter) =>\n\t\t\t\t\t`Dashboard: ${letter.toLocaleUpperCase()}`)\n\t\t\t\t.replace(/(^|-)([a-z])/g, (_, spacer, letter) =>\n\t\t\t\t\t`${spacer ? ' ' : ''}${letter.toLocaleUpperCase()}`);\n\n\t\treturn this.route_names[route];\n\t}\n\n\trouteName(route: string | Record<string, string>, name?: string, process: boolean = true) {\n\t\tif ( typeof route === 'object' ) {\n\t\t\tfor(const key in route)\n\t\t\t\tif ( has(route, key) )\n\t\t\t\t\tthis.routeName(key, route[key], false);\n\n\t\t\tif ( process )\n\t\t\t\tthis.emit(':updated-route-names');\n\t\t\treturn;\n\t\t}\n\n\t\tif ( name ) {\n\t\t\tthis.route_names[route] = name;\n\n\t\t\tif ( process )\n\t\t\t\tthis.emit(':updated-route-names');\n\t\t}\n\t}\n\n\troute(name, path, domain = null, state_fn = null, process = true) {\n\t\tif ( typeof name === 'object' ) {\n\t\t\tdomain = path;\n\t\t\tfor(const key in name)\n\t\t\t\tif ( has(name, key) )\n\t\t\t\t\tthis.route(key, name[key], domain, state_fn, false);\n\n\t\t\tif ( process ) {\n\t\t\t\tthis.__routes.sort((a,b) => b.score - a.score);\n\t\t\t\tif ( this.location )\n\t\t\t\t\tthis._pickRoute();\n\t\t\t\tthis.emit(':updated-routes');\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst parts = parse(path),\n\t\t\tscore = parts.reduce((total, val) => total + (\n\t\t\t\ttypeof val === 'string' ?\n\t\t\t\t\tval.split('/').length - 1 :\n\t\t\t\t\t0\n\t\t\t), 0),\n\t\t\troute = this.routes[name] = {\n\t\t\t\tname,\n\t\t\t\tparts,\n\t\t\t\tscore,\n\t\t\t\tdomain,\n\t\t\t\tstate_fn,\n\t\t\t\tregex: tokensToRegExp(parts),\n\t\t\t\turl: tokensToFunction(parts)\n\t\t\t}\n\n\t\tthis.__routes.push(route);\n\t\tif ( process ) {\n\t\t\tthis.__routes.sort((a,b) => b.score - a.score);\n\t\t\tif ( this.location )\n\t\t\t\tthis._pickRoute();\n\t\t\tthis.emit(':updated-routes');\n\t\t}\n\t}\n}\n","'use strict';\n\n// ============================================================================\n// Fine Lib\n// It controls React.\n// ============================================================================\n\nimport {EventEmitter, EventListener, NamespacedEventArgs, NamespacedEventKey} from 'utilities/events';\nimport Module, { GenericModule } from 'utilities/module';\nimport type { ReactAccessor, ReactNode, ReactRoot, ReactStateNode } from './react-types';\nimport type { ClassType, ExtractFunctions, MaybeParameters, OptionalArray, RecursivePartial } from 'utilities/types';\n\ndeclare module 'utilities/types' {\n\tinterface ModuleEventMap {\n\t\t'site.fine': FineEvents;\n\t}\n\tinterface ModuleMap {\n\t\t'site.fine': Fine;\n\t}\n}\n\nexport type FineEvents = {\n\t'site:dom-update': [name: string, instance: ReactStateNode];\n};\n\nexport type NodeCriteria = (node: ReactNode) => boolean;\nexport type FineCriteria<TNode extends ReactStateNode = ReactStateNode> =\n\t(stateNode: RecursivePartial<TNode> | Node, node: ReactNode) => boolean;\n\ntype InputNode = Node | ReactNode | ReactStateNode | null;\n\nexport default class Fine extends Module<'site.fine', FineEvents> {\n\n\tselector?: string;\n\troot_element?: HTMLElement | null;\n\n\taccessor?: ReactAccessor | null;\n\treact_root?: ReactRoot | null;\n\treact?: ReactNode | null;\n\n\tprivate _route: string | null = null;\n\tprivate _wrappers: Map<string, FineWrapper<any>>;\n\tprivate _known_classes: Map<unknown, FineWrapper<any>>;\n\tprivate _observer: MutationObserver | null;\n\tprivate _waiting: FineWrapper<any>[];\n\n\tprivate _live_waiting: FineWrapper<any>[] | null;\n\tprivate _waiting_crit?: FineCriteria<any>[] | null;\n\tprivate _waiting_timer?: ReturnType<typeof setInterval> | null;\n\n\t/** @internal */\n\tconstructor(name?: string, parent?: GenericModule) {\n\t\tsuper(name, parent);\n\n\t\tthis._wrappers = new Map;\n\t\tthis._known_classes = new Map;\n\t\tthis._observer = null;\n\t\tthis._waiting = [];\n\t\tthis._live_waiting = null;\n\t}\n\n\t/** @internal */\n\tasync onEnable(tries=0): Promise<void> {\n\t\t// TODO: Move awaitElement to utilities/dom\n\t\tif ( ! this.root_element )\n\t\t\tthis.root_element = await (this.parent as any).awaitElement(this.selector || 'body #root');\n\n\t\tlet root = this.root_element?._reactRootContainer;\n\t\tif ( root?._internalRoot?.current )\n\t\t\troot = root?._internalRoot;\n\n\t\tif ( root?.current ) {\n\t\t\tthis.react_root = root;\n\t\t\tthis.react = root?.current?.child;\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.root_element && ! root ) {\n\t\t\tlet key = Fine.findAccessor(this.root_element, '__reactContainer');\n\t\t\tif ( key ) {\n\t\t\t\tthis.react_root = null;\n\t\t\t\tthis.react = this.root_element[key];\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t//if ( ! this.root_element || ! this.root_element._reactRootContainer ) {\n\t\t\tif ( tries > 500 )\n\t\t\t\tthrow new Error('Unable to find React after 25 seconds');\n\n\t\t\tthis.root_element = null;\n\t\t\treturn new Promise<void>(r =>\n\t\t\t\tsetTimeout(r, 50)).then(() => this.onEnable(tries+1));\n\t\t//}\n\n\t\t/*this.react_root = this.root_element._reactRootContainer;\n\t\tif ( this.react_root._internalRoot && this.react_root._internalRoot.current )\n\t\t\tthis.react_root = this.react_root._internalRoot;\n\n\t\tthis.react = this.react_root.current?.child;*/\n\t}\n\n\t/** @internal */\n\tonDisable() {\n\t\tthis.react_root = this.root_element = this.react = this.accessor = null;\n\t}\n\n\n\tstatic findAccessor(node: Node, prefix?: string): ReactAccessor | null {\n\t\tfor(const key in node)\n\t\t\tif ( prefix ? key.startsWith(`${prefix}$`) : (key.startsWith('__reactInternalInstance$') || key.startsWith('__reactFiber$')) )\n\t\t\t\treturn key as ReactAccessor;\n\t\treturn null;\n\t}\n\n\n\t// ========================================================================\n\t// Low Level Accessors\n\t// ========================================================================\n\n\tresolveNode(input: InputNode) {\n\t\tif ( ! input && this.react )\n\t\t\treturn this.react;\n\t\telse if ( input instanceof Node )\n\t\t\treturn this.getReactInstance(input);\n\t\telse if ( (input as ReactStateNode)?._reactInternals )\n\t\t\treturn (input as ReactStateNode)._reactInternals;\n\t\telse if ( (input as ReactStateNode)?._reactInternalFiber )\n\t\t\treturn (input as ReactStateNode)._reactInternalFiber;\n\t\telse if ( input )\n\t\t\treturn input as ReactNode;\n\t\treturn null;\n\t}\n\n\tgetReactInstance(node: Node) {\n\t\tif ( ! this.accessor )\n\t\t\tthis.accessor = Fine.findAccessor(node);\n\t\tif ( ! this.accessor )\n\t\t\treturn null;\n\n\t\treturn node[this.accessor] ??\n\t\t\tnode._reactRootContainer?._internalRoot?.current ??\n\t\t\tnode._reactRootContainer?.current ?? null;\n\t}\n\n\tgetOwner(input: InputNode) {\n\t\tinput = this.resolveNode(input);\n\t\treturn input?.return ?? null;\n\t}\n\n\tgetParentNode<TNode extends Node = Node>(\n\t\tinput: InputNode,\n\t\tmax_depth = 100,\n\t\ttraverse_roots = false\n\t) {\n\t\treturn this.searchParent<TNode>(\n\t\t\tinput,\n\t\t\tn => n instanceof Node,\n\t\t\tmax_depth,\n\t\t\t0,\n\t\t\ttraverse_roots\n\t\t);\n\t}\n\n\tgetChildNode<TNode extends Node = Node>(\n\t\tinput: InputNode,\n\t\tmax_depth = 100,\n\t\ttraverse_roots = false\n\t) {\n\t\treturn this.searchTree<TNode>(\n\t\t\tinput,\n\t\t\tn => n instanceof Node,\n\t\t\tmax_depth,\n\t\t\t0,\n\t\t\ttraverse_roots\n\t\t);\n\t}\n\n\tgetHostNode<TNode extends Node = Node>(\n\t\tinput: InputNode,\n\t\tmax_depth = 100\n\t) {\n\t\treturn this.getChildNode<TNode>(input, max_depth);\n\t}\n\n\t// TODO: Why does this exist??\n\t/** @deprecated why does this exist? */\n\tgetParent(input: InputNode) {\n\t\treturn this.getOwner(input);\n\t}\n\n\tgetFirstChild(input: InputNode) {\n\t\tconst node = this.resolveNode(input);\n\t\treturn node?.child ?? null;\n\t}\n\n\tgetChildren(input: InputNode) {\n\t\tconst node = this.resolveNode(input);\n\t\tif ( ! node )\n\t\t\treturn [];\n\n\t\tconst children = [];\n\t\tlet child = node.child;\n\t\twhile(child) {\n\t\t\tchildren.push(child);\n\t\t\tchild = child.sibling;\n\t\t}\n\n\t\treturn children;\n\t}\n\n\tsearchParent<TNode>(\n\t\tinput: InputNode,\n\t\tcriteria: string | FineCriteria<TNode extends ReactStateNode ? TNode : ReactStateNode>,\n\t\tmax_depth = 15,\n\t\tdepth = 0,\n\t\ttraverse_roots = true\n\t): TNode | null {\n\t\tif ( depth > max_depth )\n\t\t\treturn null;\n\n\t\tconst node = this.resolveNode(input);\n\n\t\t// If we don't have a node, then stop.\n\t\tif ( ! node )\n\t\t\treturn null;\n\n\t\tif ( typeof criteria === 'string' ) {\n\t\t\tconst wrapper = this._wrappers.get(criteria);\n\t\t\tif ( ! wrapper )\n\t\t\t\tthrow new Error('invalid critera');\n\n\t\t\tif ( ! wrapper.class )\n\t\t\t\treturn null;\n\n\t\t\tcriteria = n => n && n.constructor === wrapper.class;\n\t\t}\n\n\t\tconst inst = node.stateNode;\n\t\tif ( inst && criteria(inst as any, node) )\n\t\t\treturn inst as TNode;\n\n\t\t/*// If the node has opted out of scanning, then don't\n\t\t// Various conditions that could cause a stop.\n\t\tif ( ! node ||\n\t\t\t// Theoretically possible I guess?\n\t\t\t(node as unknown as ReactStateNode)._ffz_no_scan ||\n\t\t\tnode.stateNode?._ffz_no_scan\n\t\t)\n\t\t\treturn null;*/\n\n\t\tif ( node.return ) {\n\t\t\tconst result = this.searchParent<TNode>(node.return, criteria, max_depth, depth+1, traverse_roots);\n\t\t\tif ( result )\n\t\t\t\treturn result as TNode;\n\t\t}\n\n\t\t// Stupid code for traversing up into another React root.\n\t\tif ( traverse_roots && (inst as any)?.containerInfo ) {\n\t\t\tconst parent = (inst as any).containerInfo?.parentElement as Node | undefined,\n\t\t\t\tparent_node = parent && this.getReactInstance(parent);\n\n\t\t\tif ( parent_node ) {\n\t\t\t\tconst result = this.searchParent<TNode>(parent_node, criteria, max_depth, depth+1, traverse_roots);\n\t\t\t\tif ( result )\n\t\t\t\t\treturn result as TNode;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tsearchParentNode<TNode extends ReactNode = ReactNode>(\n\t\tinput: InputNode,\n\t\tcriteria: NodeCriteria,\n\t\tmax_depth = 15,\n\t\tdepth = 0,\n\t\ttraverse_roots = true\n\t): TNode | null {\n\t\tif ( depth > max_depth )\n\t\t\treturn null;\n\n\t\tconst node = this.resolveNode(input);\n\n\t\t// If we don't have a node, then stop.\n\t\tif ( ! node )\n\t\t\treturn null;\n\n\t\tif ( criteria(node) )\n\t\t\treturn node as TNode;\n\n\t\tif ( node.return ) {\n\t\t\tconst result = this.searchParentNode<TNode>(node.return, criteria, max_depth, depth+1, traverse_roots);\n\t\t\tif ( result )\n\t\t\t\treturn result as TNode;\n\t\t}\n\n\t\t// Stupid code for traversing up into another React root.\n\t\tconst inst = node.stateNode;\n\t\tif ( traverse_roots && (inst as any)?.containerInfo ) {\n\t\t\tconst parent = (inst as any).containerInfo?.parentElement as Node | undefined,\n\t\t\t\tparent_node = parent && this.getReactInstance(parent);\n\n\t\t\tif ( parent_node ) {\n\t\t\t\tconst result = this.searchParentNode<TNode>(parent_node, criteria, max_depth, depth+1, traverse_roots);\n\t\t\t\tif ( result )\n\t\t\t\t\treturn result as TNode;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tsearchNode<TNode extends ReactNode = ReactNode>(\n\t\tinput: InputNode,\n\t\tcriteria: NodeCriteria,\n\t\tmax_depth = 15,\n\t\tdepth = 0,\n\t\ttraverse_roots = true\n\t): TNode | null {\n\t\tif ( depth > max_depth )\n\t\t\treturn null;\n\n\t\tconst node = this.resolveNode(input);\n\n\t\t// No node? No result.\n\t\tif ( ! node )\n\t\t\treturn null;\n\n\t\tif ( criteria(node) )\n\t\t\treturn node as TNode;\n\n\t\t// If the node has disabled scanning, don't scan into its children.\n\t\tif ((node as unknown as ReactStateNode)._ffz_no_scan ||\n\t\t\tnode.stateNode?._ffz_no_scan\n\t\t)\n\t\t\treturn null;\n\n\t\tlet child = node.child;\n\t\twhile(child) {\n\t\t\tconst result = this.searchNode<TNode>(child, criteria, max_depth, depth+1, traverse_roots);\n\t\t\tif ( result )\n\t\t\t\treturn result as TNode;\n\t\t\tchild = child.sibling;\n\t\t}\n\n\t\tconst inst = node.stateNode;\n\t\tif ( traverse_roots && (inst as any)?.props?.root ) {\n\t\t\tconst root = (inst as any).props.root._reactRootContainer as ReactRoot;\n\t\t\tif ( root ) {\n\t\t\t\tlet child = root._internalRoot?.current || root.current;\n\t\t\t\twhile(child) {\n\t\t\t\t\tconst result = this.searchNode<TNode>(child, criteria, max_depth, depth+1, traverse_roots);\n\t\t\t\t\tif ( result )\n\t\t\t\t\t\treturn result as TNode;\n\n\t\t\t\t\tchild = child.sibling;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t// TypeScript is great. You can't have optional parameters in overloads.\n\t// So here's some overloads.\n\tsearchTree<TNode>(\n\t\tinput: InputNode,\n\t\tcriteria: FineCriteria<TNode extends ReactStateNode ? TNode : ReactStateNode>\n\t): TNode | null;\n\tsearchTree<TNode>(\n\t\tinput: InputNode,\n\t\tcriteria: FineCriteria<TNode extends ReactStateNode ? TNode : ReactStateNode>,\n\t\tmax_depth: number,\n\t): TNode | null;\n\tsearchTree<TNode>(\n\t\tinput: InputNode,\n\t\tcriteria: FineCriteria<TNode extends ReactStateNode ? TNode : ReactStateNode>,\n\t\tmax_depth: number,\n\t\tdepth: number,\n\t): TNode | null;\n\tsearchTree<TNode>(\n\t\tinput: InputNode,\n\t\tcriteria: FineCriteria<TNode extends ReactStateNode ? TNode : ReactStateNode>,\n\t\tmax_depth: number,\n\t\tdepth: number,\n\t\ttraverse_roots: boolean,\n\t): TNode | null;\n\tsearchTree<TNode>(\n\t\tinput: InputNode,\n\t\tcriteria: FineCriteria<TNode extends ReactStateNode ? TNode : ReactStateNode>,\n\t\tmax_depth: number,\n\t\tdepth: number,\n\t\ttraverse_roots: boolean,\n\t\tmulti?: false\n\t): TNode | null;\n\tsearchTree<TNode>(\n\t\tinput: InputNode,\n\t\tcriteria: FineCriteria<TNode extends ReactStateNode ? TNode : ReactStateNode>,\n\t\tmax_depth: number,\n\t\tdepth: number,\n\t\ttraverse_roots: boolean,\n\t\tmulti: Set<TNode> | true\n\t): Set<TNode>;\n\tsearchTree<\n\t\tTNode\n\t>(\n\t\tinput: InputNode,\n\t\tcriteria: FineCriteria<TNode extends ReactStateNode ? TNode : ReactStateNode>,\n\t\tmax_depth: number = 15,\n\t\tdepth: number = 0,\n\t\ttraverse_roots: boolean = true,\n\t\tmulti?: Set<TNode> | boolean\n\t): TNode | Set<TNode> | null {\n\t\tconst node = this.resolveNode(input);\n\t\tif ( multi && ! (multi instanceof Set) )\n\t\t\tmulti = new Set;\n\n\t\t// No node? Scanned too deep? Stop.\n\t\tif ( ! node || depth > max_depth )\n\t\t\treturn multi ? multi : null;\n\n\t\tif ( typeof criteria === 'string' ) {\n\t\t\tconst wrapper = this._wrappers.get(criteria);\n\t\t\tif ( ! wrapper )\n\t\t\t\tthrow new Error('invalid critera');\n\n\t\t\tif ( ! wrapper.class )\n\t\t\t\treturn multi ? multi : null;\n\n\t\t\tcriteria = n => n && n.constructor === wrapper.class;\n\t\t}\n\n\t\tconst inst = node.stateNode;\n\t\tif ( inst && criteria(inst as any, node) ) {\n\t\t\tif ( multi )\n\t\t\t\tmulti.add(inst as TNode);\n\t\t\telse\n\t\t\t\treturn inst as TNode;\n\t\t}\n\n\t\t// If the node has disabled scanning, don't scan into its children.\n\t\tif ((node as unknown as ReactStateNode)._ffz_no_scan ||\n\t\t\tnode.stateNode?._ffz_no_scan\n\t\t)\n\t\t\treturn multi ? multi : null;\n\n\t\tlet child = node.child;\n\t\twhile(child) {\n\t\t\tconst result = this.searchTree<TNode>(child, criteria, max_depth, depth+1, traverse_roots, multi as any);\n\t\t\tif ( result && ! multi )\n\t\t\t\treturn result as TNode;\n\t\t\tchild = child.sibling;\n\t\t}\n\n\t\tif ( traverse_roots && (inst as any)?.props?.root ) {\n\t\t\tconst root = (inst as any).props.root._reactRootContainer as ReactRoot;\n\t\t\tif ( root ) {\n\t\t\t\tlet child = root._internalRoot?.current || root.current;\n\t\t\t\twhile(child) {\n\t\t\t\t\tconst result = this.searchTree<TNode>(child, criteria, max_depth, depth+1, traverse_roots, multi as any);\n\t\t\t\t\tif ( result && ! multi )\n\t\t\t\t\t\treturn result as TNode;\n\n\t\t\t\t\tchild = child.sibling;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn multi ? multi : null;\n\t}\n\n\n\tfindAllMatching<TNode>(\n\t\tinput: InputNode,\n\t\tcriteria: FineCriteria<TNode extends ReactStateNode ? TNode : ReactStateNode>,\n\t\tmax_depth = 15,\n\t\tsingle_class = true,\n\t\tparents=false,\n\t\tdepth=0,\n\t\ttraverse_roots=true\n\t) {\n\t\tconst matches = new Set<TNode>;\n\t\tlet crit: FineCriteria = (inst, node) => ! matches.has(inst as TNode) && criteria(inst as any, node);\n\n\t\twhile(true) {\n\t\t\tconst match = parents ?\n\t\t\t\tthis.searchParent(input, crit, max_depth, depth, traverse_roots) :\n\t\t\t\tthis.searchTree(input, crit, max_depth, depth, traverse_roots);\n\n\t\t\tif ( ! match )\n\t\t\t\tbreak;\n\n\t\t\tif ( single_class && ! matches.size ) {\n\t\t\t\tconst klass = match.constructor;\n\t\t\t\tcrit = (inst, node) => ! matches.has(inst as TNode) && (inst instanceof klass) && criteria(inst as any, node);\n\t\t\t}\n\n\t\t\tmatches.add(match as TNode);\n\t\t}\n\n\t\treturn matches;\n\t}\n\n\n\tsearchAll(\n\t\tinput: InputNode,\n\t\tcriterias: FineCriteria[],\n\t\tmax_depth = 15,\n\t\tdepth = 0,\n\t\tdata: {\n\t\t\tseen: Set<any>;\n\t\t\tclasses: any[];\n\t\t\tmax_depth: number;\n\t\t\tout: {\n\t\t\t\tcls: any;\n\t\t\t\tinstances: Set<ReactStateNode | Node>;\n\t\t\t\tdepth: number | null;\n\t\t\t}[];\n\t\t} | null = null,\n\t\ttraverse_roots = true\n\t) {\n\t\tconst node = this.resolveNode(input);\n\n\t\tif ( ! data )\n\t\t\tdata = {\n\t\t\t\tseen: new Set,\n\t\t\t\tclasses: criterias.map(() => null),\n\t\t\t\tout: criterias.map(() => ({\n\t\t\t\t\tcls: null, instances: new Set, depth: null\n\t\t\t\t})),\n\t\t\t\tmax_depth: depth\n\t\t\t};\n\n\t\t// No node? Max depth? Bye.\n\t\tif ( ! node || depth > max_depth )\n\t\t\treturn data.out;\n\n\t\tif ( depth > data.max_depth )\n\t\t\tdata.max_depth = depth;\n\n\t\tconst inst = node.stateNode;\n\t\tif ( inst ) {\n\t\t\tconst cls = inst.constructor,\n\t\t\t\tidx = data.classes.indexOf(cls);\n\n\t\t\tif ( idx !== -1 )\n\t\t\t\tdata.out[idx].instances.add(inst);\n\n\t\t\telse if ( ! data.seen.has(cls) ) {\n\t\t\t\tlet i = criterias.length;\n\t\t\t\twhile(i-- > 0)\n\t\t\t\t\tif ( criterias[i](inst, node) ) {\n\t\t\t\t\t\tdata.classes[i] = data.out[i].cls = cls;\n\t\t\t\t\t\tdata.out[i].instances.add(inst);\n\t\t\t\t\t\tdata.out[i].depth = depth;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\tdata.seen.add(cls);\n\t\t\t}\n\t\t}\n\n\t\t// If the node has disabled scanning, don't scan into its children.\n\t\tif ((node as unknown as ReactStateNode)._ffz_no_scan ||\n\t\t\tnode.stateNode?._ffz_no_scan\n\t\t)\n\t\t\treturn data.out;\n\n\t\tlet child = node.child;\n\t\twhile(child) {\n\t\t\tthis.searchAll(child, criterias, max_depth, depth+1, data, traverse_roots);\n\t\t\tchild = child.sibling;\n\t\t}\n\n\t\tif ( traverse_roots && (inst as any)?.props?.root ) {\n\t\t\tconst root = (inst as any).props.root._reactRootContainer as ReactRoot | null;\n\t\t\tif ( root ) {\n\t\t\t\tlet child = root._internalRoot && root._internalRoot.current || root.current;\n\t\t\t\twhile(child) {\n\t\t\t\t\tthis.searchAll(child, criterias, max_depth, depth+1, data, traverse_roots);\n\t\t\t\t\tchild = child.sibling;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn data.out;\n\t}\n\n\n\t// ========================================================================\n\t// Class Wrapping\n\t// ========================================================================\n\n\troute(route: string) {\n\t\tthis._route = route;\n\t\tthis._updateLiveWaiting();\n\t}\n\n\n\t_updateLiveWaiting() {\n\t\tconst lw: FineWrapper[] = this._live_waiting = [],\n\t\t\tcrt: FineCriteria[] = this._waiting_crit = [],\n\t\t\troute = this._route;\n\n\t\tif ( this._waiting )\n\t\t\tfor(const waiter of this._waiting) {\n\t\t\t\t// false means never wait.\n\t\t\t\tif ( waiter.routes === false || ! waiter.criteria )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tif ( ! route || ! waiter.routes?.length || waiter.routes.includes(route) ) {\n\t\t\t\t\tlw.push(waiter);\n\t\t\t\t\tcrt.push(waiter.criteria);\n\t\t\t\t}\n\t\t\t}\n\n\t\tif ( ! this._live_waiting.length )\n\t\t\tthis._stopWaiting();\n\t\telse if ( ! this._waiting_timer )\n\t\t\tthis._startWaiting();\n\t}\n\n\n\tdefine<TNode extends ReactStateNode = ReactStateNode>(\n\t\tkey: string,\n\t\tcriteria: FineCriteria<TNode extends ReactStateNode ? TNode : ReactStateNode>,\n\t\troutes: string[] | false | null = null\n\t) {\n\t\tif ( this._wrappers.has(key) )\n\t\t\treturn this._wrappers.get(key) as FineWrapper<TNode>;\n\n\t\tif ( ! criteria )\n\t\t\tthrow new Error('cannot find definition and no criteria provided');\n\n\t\tconst wrapper = new FineWrapper<TNode>(key, criteria as any, routes, this);\n\t\tthis._wrappers.set(key, wrapper);\n\n\t\tconst data = this.react\n\t\t\t? this.searchAll(this.react, [criteria as any], 1000)[0]\n\t\t\t: null;\n\n\t\tif ( data?.cls ) {\n\t\t\twrapper._set(data.cls, data.instances as Set<TNode>);\n\t\t\tthis._known_classes.set(data.cls, wrapper);\n\n\t\t} else if ( routes !== false ) {\n\t\t\tthis._waiting.push(wrapper);\n\t\t\tthis._updateLiveWaiting();\n\t\t}\n\n\t\treturn wrapper;\n\t}\n\n\n\twrap<TNode extends ReactStateNode = ReactStateNode>(\n\t\tkey: string,\n\t\tcls?: ClassType<TNode>\n\t) {\n\t\tlet wrapper: FineWrapper<TNode>;\n\t\tif ( this._wrappers.has(key) )\n\t\t\twrapper = this._wrappers.get(key) as FineWrapper<TNode>;\n\t\telse {\n\t\t\twrapper = new FineWrapper(key, null, null, this);\n\t\t\tthis._wrappers.set(key, wrapper);\n\t\t}\n\n\t\tif ( cls ) {\n\t\t\tif ( wrapper.class || wrapper.criteria )\n\t\t\t\tthrow new Error('tried setting a class on an already initialized FineWrapper');\n\n\t\t\twrapper._set(cls, new Set);\n\t\t\tthis._known_classes.set(cls, wrapper);\n\t\t}\n\n\t\treturn wrapper;\n\t}\n\n\n\t_checkWaiters(nodes: OptionalArray<Node | ReactNode | ReactStateNode | null> = null) {\n\t\tif ( ! this._live_waiting )\n\t\t\treturn;\n\n\t\tif ( ! Array.isArray(nodes) )\n\t\t\tnodes = [nodes];\n\n\t\tfor(let input of nodes) {\n\t\t\tif ( ! this._live_waiting.length || ! this._waiting_crit )\n\t\t\t\tbreak;\n\n\t\t\tlet node: ReactNode | null = null;\n\t\t\tif ( ! input && this.react )\n\t\t\t\tnode = this.react;\n\t\t\telse if ( input instanceof Node )\n\t\t\t\tnode = this.getReactInstance(input);\n\t\t\telse if ( (input as ReactStateNode)?._reactInternals )\n\t\t\t\tnode = (input as ReactStateNode)._reactInternals;\n\t\t\telse if ( (input as ReactStateNode)?._reactInternalFiber )\n\t\t\t\tnode = (input as ReactStateNode)._reactInternalFiber;\n\n\t\t\t// Sanity check the node.\n\t\t\tif (! node ||\n\t\t\t\t(node as unknown as ReactStateNode)._ffz_no_scan ||\n\t\t\t\tnode.stateNode?._ffz_no_scan\n\t\t\t)\n\t\t\t\tcontinue;\n\n\t\t\tconst data = this.searchAll(\n\t\t\t\tnode, this._waiting_crit, 1000\n\t\t\t);\n\n\t\t\tlet i = data.length;\n\t\t\twhile(i-- > 0) {\n\t\t\t\tif ( data[i].cls ) {\n\t\t\t\t\tconst d = data[i],\n\t\t\t\t\t\tw = this._live_waiting.splice(i, 1)[0];\n\n\t\t\t\t\tthis._waiting_crit.splice(i, 1);\n\n\t\t\t\t\tconst idx = this._waiting.indexOf(w);\n\t\t\t\t\tif ( idx !== -1 )\n\t\t\t\t\t\tthis._waiting.splice(idx, 1);\n\n\t\t\t\t\tthis.log.debug(`Found class for \"${w.name}\" at depth ${d.depth}`);\n\t\t\t\t\tw._set(d.cls, d.instances as Set<ReactStateNode>);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( ! this._live_waiting.length )\n\t\t\tthis._stopWaiting();\n\t}\n\n\n\t_startWaiting() {\n\t\tthis.log.info('Installing MutationObserver.');\n\t\tthis._waiting_timer = setInterval(() => this._checkWaiters(), 500);\n\n\t\tif ( ! this._observer )\n\t\t\tthis._observer = new MutationObserver(mutations =>\n\t\t\t\tthis._checkWaiters(mutations.map(x => x.target))\n\t\t\t);\n\n\t\tthis._observer.observe(document.body, {\n\t\t\tchildList: true,\n\t\t\tsubtree: true\n\t\t});\n\t}\n\n\n\t_stopWaiting() {\n\t\tthis.log.info('Stopping MutationObserver.');\n\n\t\tif ( this._observer )\n\t\t\tthis._observer.disconnect();\n\n\t\tif ( this._waiting_timer )\n\t\t\tclearInterval(this._waiting_timer);\n\n\t\tthis._live_waiting = null;\n\t\tthis._waiting_crit = null;\n\t\tthis._waiting_timer = null;\n\t}\n}\n\n\n// TODO: Extract props and stuff\nexport type ComponentMethods<TNode extends ReactStateNode = ReactStateNode> =\n\tExtractFunctions<TNode, true>;\n\nexport type ComponentMethodArgs<TNode extends ReactStateNode, K extends string> =\n\tK extends keyof ComponentMethods<TNode>\n\t\t? MaybeParameters<ComponentMethods<TNode>[K]>\n\t\t: never[];\n\n\nconst EVENTS: Record<string, keyof ComponentMethods> = {\n\t'will-mount': 'UNSAFE_componentWillMount',\n\tmount: 'componentDidMount',\n\trender: 'render',\n\t'receive-props': 'UNSAFE_componentWillReceiveProps',\n\t'should-update': 'shouldComponentUpdate',\n\t'will-update': 'UNSAFE_componentWillUpdate',\n\tupdate: 'componentDidUpdate',\n\tunmount: 'componentWillUnmount'\n}\n\n\nexport type WrapperEvents<TNode extends ReactStateNode> = {\n\tset: [klass: ClassType<TNode>, instances: Set<TNode>];\n\n\t'will-mount': [instance: TNode, ...args: ComponentMethodArgs<TNode, 'UNSAFE_componentWillMount'>];\n\tmount: [instance: TNode, ...args: ComponentMethodArgs<TNode, 'componentDidMount'>];\n\t'late-mount': [instance: TNode];\n\n\t'receive-props': [instance: TNode, ...args: ComponentMethodArgs<TNode, 'UNSAFE_componentWillReceiveProps'>];\n\t'will-update': [instance: TNode, ...args: ComponentMethodArgs<TNode, 'UNSAFE_componentWillUpdate'>];\n\t'should-update': [instance: TNode, ...args: ComponentMethodArgs<TNode, 'shouldComponentUpdate'>];\n\tupdate: [instance: TNode, ...args: ComponentMethodArgs<TNode, 'componentDidUpdate'>];\n\n\trender: [instance: TNode];\n\n\tunmount: [instance: TNode, ...args: ComponentMethodArgs<TNode, 'componentWillUnmount'>];\n};\n\n\nexport class FineWrapper<TNode extends ReactStateNode = ReactStateNode> extends EventEmitter<WrapperEvents<TNode>> {\n\n\treadonly name: string;\n\treadonly criteria: FineCriteria<TNode> | null;\n\treadonly fine: Fine;\n\treadonly instances: Set<TNode>;\n\treadonly routes: string[] | false;\n\n\tprivate readonly _wrapped: Map<keyof TNode, [any, any]>;\n\tprivate _class: ClassType<TNode> | null;\n\n\tconstructor(name: string, criteria: FineCriteria<TNode> | null, routes: string[] | false | null, fine: Fine) {\n\t\tsuper();\n\n\t\tthis.name = name;\n\t\tthis.criteria = criteria;\n\t\tthis.fine = fine;\n\n\t\tthis.instances = new Set;\n\t\tthis.routes = routes ?? [];\n\n\t\tthis._wrapped = new Map;\n\t\tthis._class = null;\n\n\t}\n\n\tget class() { return this._class; }\n\n\tget first() {\n\t\treturn this.toArray()[0];\n\t}\n\n\tprotected __cleanListeners(): string[] {\n\t\tconst out = super.__cleanListeners();\n\n\t\tfor(const event of out) {\n\t\t\tconst key = EVENTS[event];\n\t\t\tif ( key )\n\t\t\t\ttry {\n\t\t\t\t\tthis._unwrap(key as keyof ComponentMethods<TNode>);\n\t\t\t\t} catch(err) { /* do nothing */ }\n\t\t}\n\n\t\treturn out;\n\t}\n\n\ttoArray() {\n\t\treturn Array.from(this.instances);\n\t}\n\n\tcheck(\n\t\tnode: ReactNode | ReactStateNode | Node | null = null,\n\t\tmax_depth = 1000\n\t) {\n\t\tif ( this._class || ! this.criteria )\n\t\t\treturn;\n\n\t\tconst instances = this.fine.findAllMatching<TNode>(node, this.criteria as any, max_depth);\n\t\tif ( instances.size ) {\n\t\t\tconst insts = Array.from(instances);\n\t\t\tthis._set(insts[0].constructor as any, insts);\n\t\t}\n\t}\n\n\tready(fn: (klass: ClassType<TNode>, instances: Set<TNode>) => void) {\n\t\tif ( this._class )\n\t\t\tfn(this._class, this.instances);\n\t\telse\n\t\t\tthis.once('set', fn);\n\t}\n\n\teach(fn: (inst: TNode) => void) {\n\t\tfor(const inst of this.instances)\n\t\t\tfn(inst);\n\t}\n\n\tupdateInstances(\n\t\tnode: ReactNode | ReactStateNode | Node | null = null,\n\t\tmax_depth = 1000\n\t) {\n\t\tif ( ! this._class )\n\t\t\treturn;\n\n\t\tconst instances = this.fine.findAllMatching<TNode>(\n\t\t\tnode,\n\t\t\tn => n.constructor === this._class,\n\t\t\tmax_depth\n\t\t);\n\n\t\tfor(const inst of instances) {\n\t\t\tinst._ffz_mounted = true;\n\t\t\tthis.instances.add(inst);\n\t\t}\n\t}\n\n\t_set(cls: ClassType<TNode>, instances: Iterable<TNode>) {\n\t\tif ( this._class )\n\t\t\tthrow new Error('already have a class');\n\n\t\tthis._class = cls;\n\t\t(cls as any)._ffz_wrapper = this;\n\n\t\tconst t = this,\n\t\t\t_instances = this.instances,\n\t\t\tproto = cls.prototype,\n\t\t\to_mount = proto.UNSAFE_componentWillMount as (this: TNode, ...args: ComponentMethodArgs<TNode, 'UNSAFE_componentWillMount'>) => any,\n\t\t\to_unmount = proto.componentWillUnmount as (this: TNode, ...args: ComponentMethodArgs<TNode, 'componentWillUnmount'>) => any,\n\n\t\t\tmount = proto.UNSAFE_componentWillMount = o_mount ?\n\t\t\t\tfunction(this: TNode, ...args: ComponentMethodArgs<TNode, 'UNSAFE_componentWillMount'>) {\n\t\t\t\t\tthis._ffz_mounted = true;\n\t\t\t\t\t_instances.add(this);\n\t\t\t\t\tt.emit('will-mount', this, ...args);\n\t\t\t\t\treturn o_mount.apply(this, args);\n\t\t\t\t} :\n\t\t\t\tfunction(this: TNode, ...args: ComponentMethodArgs<TNode, 'UNSAFE_componentWillMount'>) {\n\t\t\t\t\tthis._ffz_mounted = true;\n\t\t\t\t\t_instances.add(this);\n\t\t\t\t\tt.emit('will-mount', this, ...args);\n\t\t\t\t},\n\n\t\t\tunmount = proto.componentWillUnmount = o_unmount ?\n\t\t\t\tfunction(this: TNode, ...args: ComponentMethodArgs<TNode, 'componentWillUnmount'>) {\n\t\t\t\t\tt.emit('unmount', this, ...args);\n\t\t\t\t\t_instances.delete(this);\n\t\t\t\t\tthis._ffz_mounted = false;\n\t\t\t\t\treturn o_unmount.apply(this, args);\n\t\t\t\t} :\n\t\t\t\tfunction(this: TNode, ...args: ComponentMethodArgs<TNode, 'componentWillUnmount'>) {\n\t\t\t\t\tt.emit('unmount', this, ...args);\n\t\t\t\t\t_instances.delete(this);\n\t\t\t\t\tthis._ffz_mounted = false;\n\t\t\t\t};\n\n\t\tthis._wrapped.set('UNSAFE_componentWillMount', [mount, o_mount]);\n\t\tthis._wrapped.set('componentWillUnmount', [unmount, o_unmount]);\n\n\t\tfor(const event of this.events())\n\t\t\tthis._maybeWrap(event);\n\n\t\tif ( instances )\n\t\t\tfor(const inst of instances) {\n\t\t\t\t// How do we check mounted state for fibers?\n\t\t\t\t// Just assume they're mounted for now I guess.\n\t\t\t\tinst._ffz_mounted = true;\n\t\t\t\t_instances.add(inst);\n\t\t\t}\n\n\t\tthis.emit('set', cls, _instances);\n\t}\n\n\tprivate _add(instances: Iterable<TNode>) {\n\t\tfor(const inst of instances)\n\t\t\tthis.instances.add(inst);\n\t}\n\n\n\tprivate _maybeWrap(event: string) {\n\t\tconst key = EVENTS[event as keyof typeof EVENTS];\n\t\tif ( ! this._class || ! key || this._wrapped.has(key) )\n\t\t\treturn;\n\n\t\tthis._wrap(event, key as keyof ComponentMethods<TNode>);\n\t}\n\n\tprivate _wrap<K extends string>(event: K, key: keyof ComponentMethods<TNode>) {\n\t\tif ( this._wrapped.has(key) || ! this._class )\n\t\t\treturn;\n\n\t\tconst t = this,\n\t\t\tproto = this._class.prototype,\n\t\t\toriginal = proto[key] as (this: TNode, ...args: ComponentMethodArgs<TNode, K>) => any,\n\n\t\t\tfn = (proto as any)[key] = original ?\n\t\t\t\tfunction(this: TNode, ...args: ComponentMethodArgs<TNode, K>) {\n\t\t\t\t\tif ( ! this._ffz_mounted ) {\n\t\t\t\t\t\tthis._ffz_mounted = true;\n\t\t\t\t\t\tt.instances.add(this);\n\t\t\t\t\t\tt.emit('late-mount', this);\n\t\t\t\t\t}\n\n\t\t\t\t\tt.emit(event as any, this, ...args);\n\t\t\t\t\treturn original.apply(this, args);\n\t\t\t\t} :\n\n\t\t\t\tkey === 'shouldComponentUpdate' ?\n\t\t\t\t\tfunction(this: TNode, ...args: ComponentMethodArgs<TNode, K>) {\n\t\t\t\t\t\tif ( ! this._ffz_mounted ) {\n\t\t\t\t\t\t\tthis._ffz_mounted = true;\n\t\t\t\t\t\t\tt.instances.add(this);\n\t\t\t\t\t\t\tt.emit('late-mount', this);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tt.emit(event as any, this, ...args);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t:\n\t\t\t\t\tfunction(this: TNode, ...args: ComponentMethodArgs<TNode, K>) {\n\t\t\t\t\t\tif ( ! this._ffz_mounted ) {\n\t\t\t\t\t\t\tthis._ffz_mounted = true;\n\t\t\t\t\t\t\tt.instances.add(this);\n\t\t\t\t\t\t\tt.emit('late-mount', this);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tt.emit(event as any, this, ...args);\n\t\t\t\t\t};\n\n\t\tthis._wrapped.set(key, [fn, original]);\n\t}\n\n\tprivate _unwrap(key: keyof ComponentMethods<TNode>) {\n\t\tconst pair = this._wrapped.get(key);\n\t\tif ( ! pair || ! this._class )\n\t\t\treturn;\n\n\t\tconst proto = this._class.prototype,\n\t\t\t[fn, original] = pair;\n\n\t\tif ( proto[key] !== fn )\n\t\t\tthrow new Error('unable to unwrap -- prototype modified');\n\n\t\tproto[key] = original;\n\t\tthis._wrapped.delete(key);\n\t}\n\n\n\tforceUpdate() {\n\t\tfor(const inst of this.instances)\n\t\t\ttry {\n\t\t\t\tinst.forceUpdate();\n\t\t\t\tthis.fine.emit('site:dom-update', this.name, inst);\n\n\t\t\t} catch(err) {\n\t\t\t\tif ( err instanceof Error )\n\t\t\t\t\tthis.fine.log.capture(err, {\n\t\t\t\t\t\ttags: {\n\t\t\t\t\t\t\tfine_wrapper: this.name\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tthis.fine.log.error(`An error occurred when calling forceUpdate on an instance of ${this.name}`, err);\n\t\t\t}\n\t}\n\n\n\ton<K extends NamespacedEventKey<'', WrapperEvents<TNode>>>(\n\t\tevent: K,\n\t\tfn: EventListener<NamespacedEventArgs<K, '', WrapperEvents<TNode>>>,\n\t\tctx?: any,\n\t\tpriority?: number,\n\t\tprepend: boolean = false\n\t) {\n\t\tthis._maybeWrap(event);\n\t\treturn super.on(event, fn, ctx, priority, prepend);\n\t}\n\n\n\tonce<K extends NamespacedEventKey<'', WrapperEvents<TNode>>>(\n\t\tevent: K,\n\t\tfn: EventListener<NamespacedEventArgs<K, '', WrapperEvents<TNode>>>,\n\t\tctx?: any,\n\t\tpriority?: number,\n\t\tprepend: boolean = false\n\t) {\n\t\tthis._maybeWrap(event);\n\t\treturn super.once(event, fn, ctx, priority, prepend);\n\t}\n\n\tmany<K extends NamespacedEventKey<'', WrapperEvents<TNode>>>(\n\t\tevent: K,\n\t\tttl: number,\n\t\tfn: EventListener<NamespacedEventArgs<K, '', WrapperEvents<TNode>>>,\n\t\tctx?: any,\n\t\tpriority?: number,\n\t\tprepend: boolean = false\n\t) {\n\t\tthis._maybeWrap(event);\n\t\treturn super.many(event, ttl, fn, ctx, priority, prepend);\n\t}\n\n\twaitFor<K extends NamespacedEventKey<'', WrapperEvents<TNode>>>(\n\t\tevent: K,\n\t\tctx?: any,\n\t\tpriority?: number,\n\t\tprepend: boolean = false\n\t) {\n\t\tthis._maybeWrap(event);\n\t\treturn super.waitFor(event, ctx, priority, prepend);\n\t}\n}\n","'use strict';\n\n// ============================================================================\n// Dialog for Vue\n// ============================================================================\n\nimport {EventEmitter} from 'utilities/events';\n\nimport Site from 'site';\n\n\nlet last_z = 9000;\n\nexport function getDialogNextZ() {\n\treturn last_z++;\n}\n\n\nexport type DialogSelectors = {\n\texclusive: string;\n\tmaximized: string;\n\tnormal: string;\n}\n\n\nexport type DialogOptions = {\n\tselectors: DialogSelectors;\n\tmaximized?: boolean;\n\texclusive?: boolean;\n\tprepend?: boolean;\n}\n\n\nexport type DialogEvents = {\n\thide: [],\n\tshow: [],\n\terror: [error: any],\n\tresize: []\n};\n\n\nexport class Dialog extends EventEmitter<DialogEvents> {\n\n\tstatic EXCLUSIVE = Site.DIALOG_EXCLUSIVE;\n\tstatic MAXIMIZED = Site.DIALOG_MAXIMIZED;\n\tstatic SELECTOR = Site.DIALOG_SELECTOR;\n\n\tselectors: DialogSelectors;\n\n\tfactory?: () => Element;\n\t_element?: Element | null;\n\n\t_visible: boolean;\n\t_maximized: boolean;\n\t_exclusive: boolean;\n\tprepend: boolean;\n\n\n\tconstructor(element: Element | (() => Element), options: Partial<DialogOptions> = {}) {\n\t\tsuper();\n\n\t\tthis.selectors = {\n\t\t\texclusive: Dialog.EXCLUSIVE,\n\t\t\tmaximized: Dialog.MAXIMIZED,\n\t\t\tnormal: Dialog.SELECTOR\n\t\t};\n\n\t\tif ( options.selectors )\n\t\t\tthis.selectors = Object.assign(this.selectors, options.selectors);\n\n\t\tthis._maximized = options.maximized || false;\n\t\tthis._exclusive = options.exclusive || false;\n\n\t\tthis.prepend = options.prepend || false;\n\n\t\tthis._element = null;\n\t\tthis._visible = false;\n\n\t\tif ( typeof element === 'function' )\n\t\t\tthis.factory = element;\n\t\telse\n\t\t\tthis.element = element;\n\t}\n\n\t// ========================================================================\n\t// Properties and Utility Methods\n\t// ========================================================================\n\n\tget maximized() {\n\t\treturn this._exclusive || this._maximized;\n\t}\n\n\tset maximized(val) {\n\t\tval = Boolean(val);\n\t\tif ( val === this._maximized )\n\t\t\treturn;\n\n\t\tif ( this._visible )\n\t\t\tthis.toggleSize();\n\t\telse\n\t\t\tthis._maximized = val;\n\t}\n\n\tget visible() {\n\t\treturn this._visible;\n\t}\n\n\tset visible(val) {\n\t\tval = Boolean(val);\n\t\tif ( val === this._visible )\n\t\t\treturn;\n\n\t\tthis.toggleVisible();\n\t}\n\n\tget exclusive() {\n\t\treturn this._exclusive;\n\t}\n\n\tset exclusive(val) {\n\t\tif ( this._visible )\n\t\t\tthrow new Error('cannot set exclusive flag when dialog already visible');\n\n\t\tthis._exclusive = val;\n\t}\n\n\tget element() {\n\t\treturn this._element;\n\t}\n\n\tset element(val) {\n\t\tif ( this._visible )\n\t\t\tthrow new Error('cannot change element when dialog already visible');\n\n\t\tif ( !(val instanceof Node) )\n\t\t\tthrow new Error('element must be an instance of Node');\n\n\t\tthis._element = val;\n\t}\n\n\tshow() {\n\t\tthis.visible = true;\n\t}\n\n\thide() {\n\t\tthis.visible = false;\n\t}\n\n\tmaximize() {\n\t\tthis.maximized = true;\n\t}\n\n\trestore() {\n\t\tthis.maximized = false;\n\t}\n\n\n\t// ========================================================================\n\t// Element Logic\n\t// ========================================================================\n\n\tgetContainer() {\n\t\treturn document.querySelector(\n\t\t\tthis._exclusive ? this.selectors.exclusive :\n\t\t\t\tthis._maximized ? this.selectors.maximized :\n\t\t\t\t\tthis.selectors.normal\n\t\t);\n\t}\n\n\ttoggleVisible(event?: MouseEvent) {\n\t\tif ( event && event.button !== 0 )\n\t\t\treturn;\n\n\t\tconst maximized = this.maximized,\n\t\t\tvisible = this._visible = ! this._visible,\n\t\t\tcontainer = this.getContainer();\n\n\t\tif ( maximized && container )\n\t\t\tcontainer.classList.toggle('ffz-has-dialog', visible);\n\n\t\tif ( ! visible ) {\n\t\t\tif ( this._element )\n\t\t\t\tthis._element.remove();\n\n\t\t\tthis.emit('hide');\n\n\t\t\tif ( this.factory )\n\t\t\t\tthis._element = null;\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! container )\n\t\t\treturn;\n\n\t\tif ( this.factory ) {\n\t\t\tconst el = this.factory();\n\t\t\tif ( el instanceof Promise ) {\n\t\t\t\tel.then(e => {\n\t\t\t\t\tthis._element = e;\n\t\t\t\t\tif ( this.prepend )\n\t\t\t\t\t\tcontainer.insertBefore(e, container.firstChild);\n\t\t\t\t\telse\n\t\t\t\t\t\tcontainer.appendChild(e);\n\t\t\t\t\tthis.emit('show');\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tthis.emit('error', err);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\n\t\t\t} else\n\t\t\t\tthis._element = el;\n\t\t}\n\n\t\tif ( ! this._element )\n\t\t\treturn;\n\n\t\tif ( this.prepend )\n\t\t\tcontainer.insertBefore(this._element, container.firstChild);\n\t\telse\n\t\t\tcontainer.appendChild(this._element);\n\n\t\tthis.emit('show');\n\t}\n\n\ttoggleSize(event?: MouseEvent) {\n\t\tif ( ! this._visible || event && event.button !== 0 || ! this._element )\n\t\t\treturn;\n\n\t\tthis._maximized = !this._maximized;\n\n\t\tconst maximized = this.maximized,\n\t\t\tcontainer = this.getContainer(),\n\t\t\told_container = this._element.parentElement;\n\n\t\tif ( container === old_container )\n\t\t\treturn;\n\n\t\tif ( maximized ) {\n\t\t\tif ( container )\n\t\t\t\tcontainer.classList.add('ffz-has-dialog');\n\t\t} else if ( old_container )\n\t\t\told_container.classList.remove('ffz-has-dialog');\n\n\t\tthis._element.remove();\n\t\tif ( container ) {\n\t\t\tif ( this.prepend )\n\t\t\t\tcontainer.insertBefore(this._element, container.firstChild);\n\t\t\telse\n\t\t\t\tcontainer.appendChild(this._element);\n\t\t}\n\n\t\tthis.emit('resize');\n\t}\n}\n\n// This is necessary for add-ons for now.\nexport default Dialog;\n","\nimport {has} from 'utilities/object';\nimport type { DomFragment } from './types';\nimport { DEBUG } from './constants';\n\nconst ATTRS = [\n\t'accept', 'accept-charset', 'accesskey', 'action', 'align', 'alt', 'async',\n\t'autocomplete', 'autofocus', 'autoplay', 'bgcolor', 'border', 'buffered',\n\t'challenge', 'charset', 'checked', 'cite', 'class', 'code', 'codebase',\n\t'color', 'cols', 'colspan', 'content', 'contenteditable', 'contextmenu',\n\t'controls', 'coords', 'crossorigin', 'data', 'data-*', 'datetime',\n\t'default', 'defer', 'dir', 'dirname', 'download', 'draggable',\n\t'dropzone', 'enctype', 'for', 'form', 'formaction', 'headers', 'height',\n\t'hidden', 'high', 'href', 'hreflang', 'http-equiv', 'icon', 'id',\n\t'integrity', 'ismap', 'itemprop', 'keytype', 'kind', 'label', 'lang',\n\t'language', 'list', 'loop', 'low', 'manifest', 'max', 'maxlength',\n\t'minlength', 'media', 'method', 'min', 'multiple', 'name',\n\t'novalidate', 'open', 'optimum', 'pattern', 'ping', 'placeholder', 'poster',\n\t'preload', 'radiogroup', 'readonly', 'rel', 'required', 'reversed', 'rows',\n\t'rowspan', 'sandbox', 'scope', 'scoped', 'seamless', 'selected', 'shape',\n\t'size', 'sizes', 'slot', 'span', 'spellcheck', 'src', 'srcdoc', 'srclang',\n\t'srcset', 'start', 'step', 'style', 'summary', 'tabindex', 'target',\n\t'title', 'type', 'usemap', 'value', 'width', 'wrap'\n];\n\nconst BOOLEAN_ATTRS = [\n\t'controls', 'autoplay', 'loop'\n];\n\n\nconst range = document.createRange();\n\nfunction camelCase(name: string) {\n\treturn name.replace(/[-_]\\w/g, m => m[1].toUpperCase());\n}\n\n/**\n * A simple helper method for calling {@link EventTarget.addEventListener}\n * @internal\n */\nexport function on(obj: EventTarget, type: string, listener: EventListenerOrEventListenerObject | null, options?: boolean | AddEventListenerOptions) {\n\treturn obj.addEventListener(type, listener, options);\n}\n\n/**\n * A simple helper method for calling {@link EventTarget.removeEventListener}\n * @internal\n */\nexport function off(obj: EventTarget, type: string, listener: EventListenerOrEventListenerObject | null, options?: boolean | EventListenerOptions) {\n\treturn obj.removeEventListener(type, listener, options);\n}\n\n\n// TODO: Better fake React types.\n\ntype SimpleNodeLike = {\n\tprops?: {\n\t\tchildren?: SimpleNodeLike | SimpleNodeLike[]\n\t}\n}\n\n/**\n * Scan a React render tree, attempting to find a matching fragment.\n *\n * @param frag The initial point to start scanning the tree.\n * @param criteria A function that returns true if a fragment matches what\n * we want.\n * @param depth The maximum scanning depth, defaults to 25.\n * @param current For Internal Use. The current scanning depth.\n * @param visited For Internal Use. A Set of all visited fragments, to prevent\n * redundant checks.\n * @returns The matching fragment, or null if one was not found.\n */\nexport function findReactFragment<TNode extends SimpleNodeLike>(\n\tfrag: TNode,\n\tcriteria: (node: TNode) => boolean,\n\tdepth: number = 25,\n\tcurrent: number = 0,\n\tvisited?: Set<any>\n): TNode | null {\n\tif ( ! visited )\n\t\tvisited = new Set;\n\telse if ( visited.has(frag) )\n\t\treturn null;\n\n\tif ( criteria(frag) )\n\t\treturn frag;\n\n\tif ( current >= depth )\n\t\treturn null;\n\n\tvisited.add(frag);\n\n\tif ( frag?.props?.children ) {\n\t\tif ( Array.isArray(frag.props.children) ) {\n\t\t\tfor(const child of frag.props.children) {\n\t\t\t\tif ( ! child )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tif ( Array.isArray(child) ) {\n\t\t\t\t\tfor(const f of child) {\n\t\t\t\t\t\tconst out = findReactFragment(f, criteria, depth, current + 1, visited);\n\t\t\t\t\t\tif ( out )\n\t\t\t\t\t\t\treturn out;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst out = findReactFragment(child as TNode, criteria, depth, current + 1, visited);\n\t\t\t\t\tif ( out )\n\t\t\t\t\t\treturn out;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconst out = findReactFragment(frag.props.children as TNode, criteria, depth, current + 1, visited);\n\t\t\tif ( out )\n\t\t\t\treturn out;\n\t\t}\n\t}\n\n\treturn null;\n}\n\n\n// TODO: Stronger types.\n\n/**\n * This method allows you to create native DOM fragments using the same calling\n * syntax as React's `React.createElement` method. Because of this, we can use\n * JSX for creating native DOM fragments, as well as rendering functions that are\n * interchangable inside of and outside of a React context.\n *\n * @example Create a span containing a figure to render an icon.\n * ```typescript\n * return createElement('span', {\n *     className: 'ffz--icon-holder tw-mg-r-05'\n * }, createElement('figure', {\n *     className: 'ffz-i-zreknarf'\n * }));\n * ```\n *\n * @example Doing the same, but with JSX\n * ```typescript\n * // When using JSX, we still need to make sure createElement is available in\n * // the current context. It can be provided as an argument to a function, or\n * // imported at the top level of the module.\n *\n * import { createElement } from 'utilities/dom';\n * // or... if you're working with add-ons...\n * const { createElement } = FrankerFaceZ.utilities.dom;\n *\n * return (<span class=\"ffz--icon-holder tw-mg-r-05\">\n *     <figure class=\"ffz-i-zreknarf\" />\n * </span>);\n * ```\n *\n * @param tag The name of the tag to be created. Functions are not supported.\n * @param props The properties object.\n * @param children A child or list of children. These should be strings, `null`s,\n * or {@link Node}s that can be assigned as children of a {@link HTMLElement}.\n */\nexport function createElement<K extends keyof HTMLElementTagNameMap>(tag: K, props?: any, ...children: DomFragment[]): HTMLElementTagNameMap[K];\nexport function createElement<K extends keyof HTMLElementDeprecatedTagNameMap>(tag: K, props?: any, ...children: DomFragment[]): HTMLElementDeprecatedTagNameMap[K];\nexport function createElement(tag: string, props?: any, ...children: DomFragment[]): HTMLElement {\n\tconst el = document.createElement(tag);\n\n\tif ( children.length === 0)\n\t\tchildren = null as any;\n\telse if ( children.length === 1 )\n\t\tchildren = children[0] as any;\n\n\tif ( typeof props === 'string' )\n\t\tel.className = props;\n\telse if ( props )\n\t\tfor(const key in props)\n\t\t\tif ( has(props, key) ) {\n\t\t\t\tconst lk = key.toLowerCase(),\n\t\t\t\t\tprop = props[key];\n\n\t\t\t\tif ( lk === 'style' ) {\n\t\t\t\t\tif ( typeof prop === 'string' )\n\t\t\t\t\t\tel.style.cssText = prop;\n\t\t\t\t\telse if ( prop && typeof prop === 'object' )\n\t\t\t\t\t\tfor(const [key, val] of Object.entries(prop)) {\n\t\t\t\t\t\t\tif ( has(el.style, key) || has(Object.getPrototypeOf(el.style), key) )\n\t\t\t\t\t\t\t\t(el.style as any)[key] = val;\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tel.style.setProperty(key, prop[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\telse if ( DEBUG && prop != null )\n\t\t\t\t\t\tconsole.warn('unsupported style value', prop);\n\n\t\t\t\t} else if ( lk === 'dataset' ) {\n\t\t\t\t\tif ( prop && typeof prop === 'object' ) {\n\t\t\t\t\t\tfor(const k in prop)\n\t\t\t\t\t\t\tif ( has(prop, k) )\n\t\t\t\t\t\t\t\tel.dataset[camelCase(k)] = prop[k];\n\t\t\t\t\t} else if ( DEBUG && prop != null )\n\t\t\t\t\t\tconsole.warn('unsupported dataset value', prop);\n\n\t\t\t\t} else if ( key === 'dangerouslySetInnerHTML' ) {\n\t\t\t\t\t// React compatibility is cool. SeemsGood\n\t\t\t\t\tif ( prop && prop.__html )\n\t\t\t\t\t\tel.innerHTML = prop.__html;\n\n\t\t\t\t} else if ( lk.startsWith('on') )\n\t\t\t\t\tel.addEventListener(lk.slice(2), prop);\n\n\t\t\t\telse if ( lk.startsWith('data-') )\n\t\t\t\t\tel.dataset[camelCase(lk.slice(5))] = prop;\n\n\t\t\t\telse if ( BOOLEAN_ATTRS.includes(lk) ) {\n\t\t\t\t\tif ( prop && prop !== 'false' )\n\t\t\t\t\t\tel.setAttribute(key, prop);\n\n\t\t\t\t} else if ( lk.startsWith('aria-') || ATTRS.includes(lk) )\n\t\t\t\t\tel.setAttribute(key, prop);\n\n\t\t\t\telse\n\t\t\t\t\t(el as any)[key] = prop;\n\t\t\t}\n\n\tif ( children )\n\t\tsetChildren(el, children);\n\n\treturn el;\n}\n\n/**\n * Set the children of a {@link HTMLElement}. This is also used internally by\n * the {@link createElement} method.\n *\n * @param element The element to set the children of.\n * @param children The children to add to the element.\n * @param no_sanitize If this is set to true, any provided string values will\n * be treated as HTML rather than text and will not be sanitized. This is\n * NOT recommended.\n * @param no_empty If this is set to true, the element's previous contents\n * will not be discarded before setting the new children.\n */\nexport function setChildren(\n\telement: HTMLElement,\n\tchildren: DomFragment,\n\tno_sanitize: boolean = false,\n\tno_empty: boolean = false\n) {\n\tif (no_sanitize)\n\t\twindow.FrankerFaceZ.get().log.warn('call to setChildren with no_sanitize set to true -- this is no longer supported');\n\n\tif (children instanceof Node ) {\n\t\tif (! no_empty )\n\t\t\telement.innerHTML = '';\n\n\t\telement.appendChild(children);\n\n\t} else if ( Array.isArray(children) ) {\n\t\tif (! no_empty)\n\t\t\telement.innerHTML = '';\n\n\t\tfor(const child of children)\n\t\t\tif (child instanceof Node)\n\t\t\t\telement.appendChild(child);\n\t\t\telse if (Array.isArray(child))\n\t\t\t\tsetChildren(element, child, no_sanitize, true);\n\t\t\telse if (child) {\n\t\t\t\tconst val = typeof child === 'string' ? child : String(child);\n\n\t\t\t\t// We no longer support no_sanitize\n\t\t\t\t//element.appendChild(no_sanitize ?\n\t\t\t\t//\trange.createContextualFragment(val) : document.createTextNode(val));\n\n\t\t\t\telement.appendChild(document.createTextNode(val));\n\t\t\t}\n\n\t} else if (children) {\n\t\tconst val = typeof children === 'string' ? children : String(children);\n\n\t\t// We no longer support no_sanitize\n\t\t//element.appendChild(no_sanitize ?\n\t\t//\trange.createContextualFragment(val) : document.createTextNode(val));\n\t\telement.appendChild(document.createTextNode(val));\n\t}\n}\n\n/**\n * Determine if the two provided Nodes share a parent.\n *\n * @param element The first node.\n * @param other The second node.\n * @param selector A CSS selector to use. If this is set, only consider parents\n * that match the selector.\n */\nexport function hasSharedParent(element: Node | null, other: Node, selector?: string) {\n\twhile(element) {\n\t\tif ( element.contains(other) )\n\t\t\treturn true;\n\n\t\telement = element.parentElement;\n\t\tif ( selector )\n\t\t\telement = element instanceof Element\n\t\t\t\t? element.closest(selector)\n\t\t\t\t: null;\n\t}\n\n\treturn false;\n}\n\n\n/**\n * Display an Open File dialog to the user and return the selected\n * value. This may never return depending on the user agent's\n * behavior and should be used sparingly and never in a heavy\n * context to avoid excess memory usage.\n *\n * @param contentType The content type to filter by when selecting files.\n * @param multiple Whether or not multiple files should be returned.\n * @returns A file or list of files.\n */\nexport function openFile(contentType: string, multiple: boolean) {\n\treturn new Promise<File | File[] | null>(resolve => {\n\t\tconst input = document.createElement('input');\n\t\tinput.type = 'file';\n\t\tinput.accept = contentType;\n\t\tinput.multiple = multiple;\n\n\t\tlet resolved = false;\n\n\t\t// TODO: Investigate this causing issues\n\t\t// for some users.\n\t\t/*const focuser = () => {\n\t\t\toff(window, 'focus', focuser);\n\t\t\tsetTimeout(() => {\n\t\t\t\tif ( ! resolved ) {\n\t\t\t\t\tresolved = true;\n\t\t\t\t\tresolve(multiple ? [] : null);\n\t\t\t\t}\n\t\t\t}, 5000);\n\t\t};\n\n\t\ton(window, 'focus', focuser);*/\n\n\t\tinput.onchange = () => {\n\t\t\t//off(window, 'focus', focuser);\n\t\t\tif ( ! resolved ) {\n\t\t\t\tresolved = true;\n\t\t\t\tconst files = Array.from(input.files ?? []);\n\t\t\t\tresolve(multiple ? files : files[0])\n\t\t\t}\n\t\t}\n\n\t\tinput.click();\n\t});\n}\n\n/**\n * Read the contents of a {@link File} asynchronously.\n *\n * @param file The file to read\n * @param encoding The character encoding to use. Defaults to UTF-8.\n */\nexport function readFile(file: Blob, encoding = 'utf-8') {\n\treturn new Promise((resolve, reject) => {\n\t\tconst reader = new FileReader();\n\t\treader.readAsText(file, encoding);\n\t\treader.onload = () => resolve(reader.result);\n\t\treader.onerror = e => reject(e);\n\t});\n}\n\n\nconst el = document.createElement('span');\n\n/**\n * Sanitize a string, replacing all special HTML characters\n * with entities.\n *\n * Internally, this uses the browser's native DOM library\n * by setting `textContent` on an Element and returning its\n * `innerHTML`.\n *\n * @param text The text to sanitize.\n */\nexport function sanitize(text: string) {\n\tel.textContent = text;\n\tconst out = el.innerHTML;\n\t// Ensure we're not keeping large strings in memory.\n\tel.textContent = '';\n\treturn out;\n}\n\n\nlet last_id = 0;\n\nexport class ManagedStyle {\n\tid: number;\n\n\tprivate _blocks: Record<string, Text | null>;\n\tprivate _style: HTMLStyleElement;\n\n\tconstructor(id?: number) {\n\t\tthis.id = id || last_id++;\n\n\t\tthis._blocks = {};\n\n\t\tthis._style = createElement('style', {\n\t\t\ttype: 'text/css',\n\t\t\tid: `ffz--managed-style--${this.id}`\n\t\t});\n\n\t\tdocument.head.appendChild(this._style);\n\t}\n\n\tdestroy() {\n\t\tif ( this._style )\n\t\t\tthis._style.remove();\n\n\t\t// This is lazy typing, but I don't really care.\n\t\t// Rather do this than put checks in every other bit of code.\n\t\tthis._blocks = null as any;\n\t\tthis._style = null as any;\n\t}\n\n\tclear() {\n\t\tthis._blocks = {};\n\t\tthis._style.innerHTML = '';\n\t}\n\n\tget(key: string) {\n\t\tconst block = this._blocks[key];\n\t\tif ( block )\n\t\t\treturn block.textContent;\n\t\treturn undefined;\n\t}\n\n\thas(key: string) {\n\t\treturn !! this._blocks[key];\n\t}\n\n\tset(key: string, value: string, force: boolean = false) {\n\t\tconst block = this._blocks[key];\n\t\tif ( block ) {\n\t\t\tif ( ! force && block.textContent === value )\n\t\t\t\treturn;\n\n\t\t\tblock.textContent = value;\n\t\t} else\n\t\t\tthis._style.appendChild(this._blocks[key] = document.createTextNode(value));\n\t}\n\n\tdelete(key: string) {\n\t\tconst block = this._blocks[key];\n\t\tif ( block ) {\n\t\t\tif ( this._style.contains(block) )\n\t\t\t\tthis._style.removeChild(block);\n\n\t\t\tthis._blocks[key] = null;\n\t\t}\n\t}\n}\n\n\nexport class ClickOutside {\n\n\tel: HTMLElement | null;\n\tcb: ((event: MouseEvent) => void) | null;\n\t_fn: ((event: MouseEvent) => void) | null;\n\n\tconstructor(element: HTMLElement, callback: ((event: MouseEvent) => void)) {\n\t\tthis.el = element;\n\t\tthis.cb = callback;\n\n\t\tthis._fn = this.handleClick.bind(this);\n\t\tdocument.documentElement.addEventListener('click', this._fn);\n\t}\n\n\tdestroy() {\n\t\tif ( this._fn )\n\t\t\tdocument.documentElement.removeEventListener('click', this._fn);\n\n\t\tthis.cb = this.el = this._fn = null;\n\t}\n\n\thandleClick(event: MouseEvent) {\n\t\tif ( this.cb && this.el && ! this.el.contains(event.target as Node) )\n\t\t\tthis.cb(event);\n\t}\n\n}\n\n\n/**\n * Take an object that can be expressed as JSON and return a string of HTML\n * that can be used to display the object with highlighting and formatting.\n *\n * TODO: Rewrite this method to not use raw HTML.\n *\n * @deprecated You should not depend on this method, as its signature is expected to change.\n *\n * @param object The object to be formatted\n * @param pretty Whether or not to use indentation when rendering the object\n * @param depth The current rendering depth\n * @param max_depth The maximum depth to render, defaults to 30.\n * @returns A string of HTML.\n */\nexport function highlightJson(object: any, pretty = false, depth = 1, max_depth = 30): string {\n\tlet indent = '', indent_inner = '';\n\tif ( pretty ) {\n\t\tindent = '    '.repeat(depth - 1);\n\t\tindent_inner = '    '.repeat(depth);\n\t}\n\n\tif ( depth > max_depth )\n\t\treturn `<span class=\"ffz-ct--obj-literal\">&lt;nested&gt;</span>`;\n\n\tif (object == null)\n\t\treturn `<span class=\"ffz-ct--literal\" depth=\"${depth}\">null</span>`;\n\n\tif ( typeof object === 'number' || typeof object === 'boolean' )\n\t\treturn `<span class=\"ffz-ct--literal\" depth=\"${depth}\">${object}</span>`;\n\n\tif ( typeof object === 'string' )\n\t\treturn `<span class=ffz-ct--string depth=\"${depth}\">${sanitize(JSON.stringify(object))}</span>`;\n\n\tif ( Array.isArray(object) )\n\t\treturn `<span class=\"ffz-ct--obj-open\" depth=\"${depth}\">[</span>`\n\t\t\t+ (object.length > 0 ? (\n\t\t\t\tobject.map(x => (pretty ? `\\n${indent_inner}` : '') + highlightJson(x, pretty, depth + 1, max_depth)).join(`<span class=\"ffz-ct--obj-sep\" depth=\"${depth}\">, </span>`)\n\t\t\t\t+ (pretty ? `\\n${indent}` : '')\n\t\t\t) : '')\n\t\t\t+ `<span class=\"ffz-ct--obj-close\" depth=\"${depth}\">]</span>`;\n\n\tconst out = [];\n\n\tfor(const [key, val] of Object.entries(object)) {\n\t\tif ( out.length > 0 )\n\t\t\tout.push(`<span class=\"ffz-ct--obj-sep\" depth=\"${depth}\">, </span>`);\n\n\t\tif ( pretty )\n\t\t\tout.push(`\\n${indent_inner}`);\n\t\tout.push(`<span class=\"ffz-ct--obj-key\" depth=\"${depth}\">${sanitize(JSON.stringify(key))}</span><span class=\"ffz-ct--obj-key-sep\" depth=\"${depth}\">: </span>`);\n\t\tout.push(highlightJson(val, pretty, depth + 1, max_depth));\n\t}\n\n\treturn `<span class=\"ffz-ct--obj-open\" depth=\"${depth}\">{</span>${out.join('')}${out.length && pretty ? `\\n${indent}` : ''}<span class=\"ffz-ct--obj-close\" depth=\"${depth}\">}</span>`;\n}\n","export default __webpack_public_path__ + \"opendyslexic.css\";","import { createElement } from \"./dom\";\n\nconst KNOWN_FONTS = [\n\t'Roobert', // Twitch Default\n\t'Arial',\n\t'Arial Black',\n\t'Verdana',\n\t'Helvetica',\n\t'Tahoma',\n\t'Trebuchet MS',\n\t'Impact',\n\t'Didot',\n\t'American Typewriter',\n\t'Lucida Console',\n\t'Monaco',\n\t'Bradley Hand',\n\t'Times New Roman',\n\t'Georgia',\n\t'Garamond',\n\t'Courier New',\n\t'Brush Script MT',\n\t'Comic Sans MS',\n];\n\nexport const VALID_FONTS = document.fonts?.check\n\t? KNOWN_FONTS.filter(font => document.fonts.check(`16px ${font}`)).sort()\n\t: KNOWN_FONTS.sort();\n\n\n/* Google Font Handling */\n\nconst GOOGLE_FONTS = [\n\t'Roboto',\n\t'Open Sans',\n\t'Noto Sans JP',\n\t'Lato',\n\t'Montserrat',\n\t'Roboto Condensed',\n\t'Source Sans Pro',\n\t'Oswald',\n\t'Poppins',\n\t'Noto Sans',\n\t'Roboto Mono',\n\t'Raleway',\n\t'Ubuntu',\n\t'Merriweather',\n\t'Nunito',\n\t'PT Sans',\n\t'Roboto Slab',\n\t'Playfair Display',\n\t'Lora',\n\t'Rubik',\n\t'Mukta',\n\t'Noto Sans KR',\n\t'Work Sans',\n\t'Nunito Sans',\n\t'Nanum Gothic',\n\t'Inter',\n\t'Quicksand',\n\t'PT Serif',\n\t'Hind Siliguri',\n\t'Titilium Web',\n\t'Fira Sans',\n\t'Noto Serif',\n\t'Noto Sans TC',\n\t'Karla'\n];\n\nconst LOADED_GOOGLE = new Map<string, number>();\nconst LOADED_GOOGLE_LINKS = new Map<string, HTMLLinkElement>();\n\nfunction loadGoogleFont(font: string) {\n\tif ( LOADED_GOOGLE_LINKS.has(font) )\n\t\treturn;\n\n\tconst name = encodeURIComponent(font);\n\n\tconst link = createElement('link', {\n\t\tid: `ffz-font-${name}`,\n\t\trel: 'stylesheet',\n\t\thref: `https://fonts.googleapis.com/css2?family=${name}`\n\t});\n\n\tLOADED_GOOGLE_LINKS.set(font, link);\n\tdocument.head.appendChild(link);\n}\n\nfunction unloadGoogleFont(font: string) {\n\tconst link = LOADED_GOOGLE_LINKS.get(font);\n\tif ( ! link )\n\t\treturn;\n\n\tLOADED_GOOGLE_LINKS.delete(font);\n\tlink.remove();\n}\n\n\n/* OpenDyslexic Font */\n\nconst OD_FONTS = [\n\t'OpenDyslexic',\n\t'OpenDyslexicAlta',\n\t'OpenDyslexicMono'\n];\n\nimport OD_URL from 'styles/opendyslexic.scss';\n\nlet od_count = 0;\nlet od_link: HTMLLinkElement | null = null;\n\nfunction loadOpenDyslexic() {\n\tif ( od_link )\n\t\treturn;\n\n\tod_link = createElement('link', {\n\t\tid: `ffz-font-opendyslexic`,\n\t\trel: 'stylesheet',\n\t\ttype: 'text/css',\n\t\thref: OD_URL\n\t});\n\n\tdocument.head.appendChild(od_link);\n}\n\n\nfunction unloadOpenDyslexic() {\n\tif ( ! od_link )\n\t\treturn;\n\n\tod_link.remove();\n\tod_link = null;\n}\n\n\n/* Using and Listing Fonts */\n\n// TODO: Move this type somewhere more generic.\ntype SettingSelectOption<TValue> = {\n\tvalue: TValue;\n\n\ttitle: string;\n\ti18n_key?: string;\n\n\tseparator?: boolean;\n}\n\ntype SettingSelectSeparator = {\n\tseparator: true;\n\n\ttitle: string;\n\ti18n_key?: string;\n}\n\ntype SettingSelectEntry<TValue> = SettingSelectOption<TValue> | SettingSelectSeparator;\n\n\nexport function getFontsList(): SettingSelectEntry<string>[] {\n\tconst out: SettingSelectEntry<string>[] = [\n\t\t{value: '', i18n_key: 'setting.font.default', title: 'Default'},\n\t\t{separator: true, i18n_key: 'setting.font.builtin', title: 'Built-in Fonts'},\n\t];\n\n\tfor(const font of VALID_FONTS)\n\t\tout.push({value: font, title: font});\n\n\tout.push({\n\t\tseparator: true, i18n_key: 'setting.font.dyslexic', title: 'Dyslexia Fonts'\n\t});\n\n\tfor(const font of OD_FONTS)\n\t\tout.push({value: font, title: font});\n\n\tout.push({\n\t\tseparator: true, i18n_key: 'setting.font.google', title: 'Google Fonts'\n\t});\n\n\tfor(const font of GOOGLE_FONTS)\n\t\tout.push({value: `google:${font}`, title: font});\n\n\treturn out;\n}\n\n\nexport function useFont(font: string): [string, (() => void) | null] {\n\tif ( ! font )\n\t\treturn [font, null];\n\n\tif ( OD_FONTS.includes(font) ) {\n\t\tod_count++;\n\t\tif ( od_count === 1 )\n\t\t\tloadOpenDyslexic();\n\n\t\tlet unloaded = false;\n\t\tconst unloader = () => {\n\t\t\tif ( ! unloaded ) {\n\t\t\t\tunloaded = true;\n\t\t\t\tod_count--;\n\t\t\t\tif ( ! od_count )\n\t\t\t\t\tunloadOpenDyslexic();\n\t\t\t}\n\t\t}\n\n\t\treturn [font, unloader];\n\t}\n\n\tif ( font.startsWith('google:') ) {\n\t\tconst name = font.slice(7),\n\t\t\tcount = (LOADED_GOOGLE.get(name) ?? 0) + 1;\n\n\t\tLOADED_GOOGLE.set(name, count);\n\t\tif ( count === 1 )\n\t\t\tloadGoogleFont(name);\n\n\t\tlet unloaded = false;\n\t\tconst unloader = () => {\n\t\t\tif ( ! unloaded ) {\n\t\t\t\tunloaded = true;\n\t\t\t\tconst count = (LOADED_GOOGLE.get(name) ?? 0) - 1;\n\t\t\t\tif ( count > 0 ) {\n\t\t\t\t\tLOADED_GOOGLE.set(name, count);\n\t\t\t\t} else {\n\t\t\t\t\tLOADED_GOOGLE.delete(name);\n\t\t\t\t\tunloadGoogleFont(name);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn [name, unloader];\n\t}\n\n\treturn [font, null];\n}","'use strict';\n\nimport type { DefinitionNode, DocumentNode, FieldNode, FragmentDefinitionNode, OperationDefinitionNode, SelectionNode, SelectionSetNode } from 'graphql';\n\n\n// ============================================================================\n// GraphQL Document Manipulation\n// ============================================================================\n\nexport const MERGE_METHODS: Record<string, (a: any, b: any) => any> = {\n\tDocument: (a: DocumentNode, b: DocumentNode) => {\n\t\tif ( a.definitions && b.definitions )\n\t\t\t(a as any).definitions = mergeList(a.definitions as DefinitionNode[], b.definitions as any);\n\t\telse if ( b.definitions )\n\t\t\t(a as any).definitions = b.definitions;\n\n\t\treturn a;\n\t},\n\n\tField: (a: FieldNode, b: FieldNode) => {\n\t\tif ( a.name && (! b.name || b.name.value !== a.name.value) )\n\t\t\treturn a;\n\n\t\t// TODO: arguments\n\t\t// TODO: directives\n\n\t\tif ( a.selectionSet && b.selectionSet )\n\t\t\t(a as any).selectionSet = merge(a.selectionSet, b.selectionSet);\n\t\telse if ( b.selectionSet )\n\t\t\t(a as any).selectionSet = b.selectionSet;\n\n\t\treturn a;\n\t},\n\n\tOperationDefinition: (a: OperationDefinitionNode, b: OperationDefinitionNode) => {\n\t\tif ( a.operation !== b.operation )\n\t\t\treturn a;\n\n\t\t// TODO: variableDefinitions\n\t\t// TODO: directives\n\n\t\tif ( a.selectionSet && b.selectionSet )\n\t\t\t(a as any).selectionSet = merge(a.selectionSet, b.selectionSet);\n\t\telse if ( b.selectionSet )\n\t\t\t(a as any).selectionSet = b.selectionSet;\n\n\t\treturn a;\n\t},\n\n\tFragmentDefinition: (a: FragmentDefinitionNode, b: FragmentDefinitionNode) => {\n\t\tif ( a.typeCondition && b.typeCondition ) {\n\t\t\tif ( a.typeCondition.kind !== b.typeCondition.kind )\n\t\t\t\treturn a;\n\n\t\t\tif ( a.typeCondition.name.value != b.typeCondition.name.value )\n\t\t\t\treturn a;\n\t\t}\n\n\t\t// TODO: directives\n\n\t\tif ( a.selectionSet && b.selectionSet )\n\t\t\t(a as any).selectionSet = merge(a.selectionSet, b.selectionSet);\n\t\telse if ( b.selectionSet )\n\t\t\t(a as any).selectionSet = b.selectionSet;\n\n\t\treturn a;\n\t},\n\n\tSelectionSet: (a: SelectionSetNode, b: SelectionSetNode) => {\n\t\tif ( a.selections && b.selections )\n\t\t\ta.selections = mergeList(a.selections as SelectionNode[], b.selections as any);\n\t\telse if ( b.selections )\n\t\t\ta.selections = b.selections;\n\n\t\treturn a;\n\t}\n}\n\n// TODO: Type safe this\nexport function mergeList(a: any[], b: any[]) {\n\tlet has_operation = false;\n\tconst a_names: Record<string, any> = {};\n\tfor(const item of a) {\n\t\tif ( ! item || ! item.name || item.name.kind !== 'Name' )\n\t\t\tcontinue;\n\n\t\tif ( item.operation )\n\t\t\thas_operation = true;\n\n\t\ta_names[item.name.value] = item;\n\t}\n\n\tfor(const item of b) {\n\t\tif ( ! item || ! item.name || item.name.kind !== 'Name' )\n\t\t\tcontinue;\n\n\t\tconst name = item.name.value,\n\t\t\tidx = a_names[name] ? a.indexOf(a_names[name]) : -1;\n\n\t\tif ( idx !== -1 ) {\n\t\t\tif ( a[idx].operation && item.operation && a[idx].operation !== item.operation )\n\t\t\t\tcontinue;\n\n\t\t\ta[idx] = merge(a[idx], item);\n\t\t\tif ( a[idx].operation )\n\t\t\t\thas_operation = true;\n\n\t\t} else {\n\t\t\tif ( has_operation && item.operation )\n\t\t\t\tcontinue;\n\n\t\t\ta.push(item);\n\t\t}\n\t}\n\n\treturn a;\n}\n\n\nexport default function merge(a: any, b: any) {\n\tif ( a.kind !== b.kind )\n\t\treturn a;\n\n\tif ( MERGE_METHODS[a.kind] )\n\t\treturn MERGE_METHODS[a.kind](a, b);\n\n\treturn a;\n}\n","\nexport function getBuster(resolution: number = 5) {\n\tconst now = Math.floor(Date.now() / 1000);\n\treturn now - (now % resolution);\n}\n\nexport function duration_to_string(\n\telapsed: number,\n\tseparate_days?: boolean,\n\tdays_only?: boolean,\n\tno_hours?: boolean,\n\tno_seconds?: boolean\n) {\n\tconst seconds = elapsed % 60;\n\tlet minutes = Math.floor(elapsed / 60),\n\t\thours = Math.floor(minutes / 60),\n\t\tdays = '';\n\n\tminutes = minutes % 60;\n\n\tif ( separate_days ) {\n\t\tconst day_count = Math.floor(hours / 24);\n\t\thours = hours % 24;\n\t\tif ( days_only && day_count > 0 )\n\t\t\treturn `${days} days`;\n\n\t\tdays = day_count > 0 ? `${day_count} days, ` : '';\n\t}\n\n\tconst show_hours = (no_hours === false || days?.length > 0 || hours > 0);\n\n\treturn `${days}${\n\t\tshow_hours ? `${days && hours < 10 ? '0' : ''}${hours}:` : ''\n\t}${show_hours && minutes < 10 ? '0' : ''}${minutes}${\n\t\tno_seconds ? '' : `:${seconds < 10 ? '0' : ''}${seconds}`}`;\n}\n\n\nexport function print_duration(seconds: number) {\n\tlet minutes = Math.floor(seconds / 60);\n\tconst hours = Math.floor(minutes / 60);\n\n\tminutes %= 60;\n\tseconds %= 60;\n\n\treturn `${hours > 0 ? `${hours}:${minutes < 10 ? '0' : ''}` : ''}${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n}\n\n\nexport function durationForChat(elapsed: number) {\n\tconst seconds = elapsed % 60;\n\tlet minutes = Math.floor(elapsed / 60);\n\tlet hours = Math.floor(minutes / 60);\n\tconst days = Math.floor(hours / 24);\n\n\tminutes = minutes % 60;\n\thours = hours % 24;\n\n\treturn `${days > 0 ? `${days}d` : ''}${hours > 0 ? `${hours}h` : ''}${minutes > 0 ? `${minutes}m` : ''}${seconds > 0 ? `${seconds}s` : ''}`;\n}\n\n\nexport function durationForURL(elapsed: number) {\n\tconst seconds = elapsed % 60;\n\tlet minutes = Math.floor(elapsed / 60);\n\tconst hours = Math.floor(minutes / 60);\n\n\tminutes = minutes % 60;\n\n\treturn `${hours > 0 ? `${hours}h` : ''}${minutes > 0 ? `${minutes}m` : ''}${seconds > 0 ? `${seconds}s` : ''}`;\n}\n","'use strict';\n\n// ============================================================================\n// Twitch Data\n// Get data, from Twitch.\n// ============================================================================\n\nimport Module, { GenericModule } from 'utilities/module';\nimport {get, debounce, TranslatableError} from 'utilities/object';\nimport type Apollo from './compat/apollo';\nimport type { DocumentNode } from 'graphql';\n\ndeclare module 'utilities/types' {\n\tinterface ModuleEventMap {\n\n\t}\n\tinterface ModuleMap {\n\t\t'site.twitch_data': TwitchData;\n\t}\n}\n\n/**\n * PaginatedResult\n *\n * @typedef {Object} PaginatedResult\n * @property {String} cursor A cursor usable to fetch the next page of results\n * @property {Object[]} items This page of results\n * @property {Boolean} finished Whether or not we have reached the end of results.\n */\n\n/**\n * TwitchData is a container for getting different types of Twitch data\n * @class TwitchData\n * @extends Module\n */\nexport default class TwitchData extends Module {\n\n\tapollo: Apollo = null as any;\n\tsite: GenericModule = null as any;\n\n\n\tprivate _waiting_user_ids: Map<string, unknown>;\n\tprivate _waiting_user_logins: Map<string, unknown>;\n\tprivate _waiting_stream_ids: Map<string, unknown>;\n\tprivate _waiting_stream_logins: Map<string, unknown>;\n\tprivate _waiting_flag_ids: Map<string, unknown>;\n\tprivate _waiting_flag_logins: Map<string, unknown>;\n\n\tprivate _loading_streams?: boolean;\n\tprivate _loading_flags?: boolean;\n\n\tprivate tag_cache: Map<string, unknown>;\n\tprivate _waiting_tags: Map<string, unknown>;\n\n\tconstructor(name?: string, parent?: GenericModule) {\n\t\tsuper(name, parent);\n\n\t\tthis.site = this.parent as GenericModule;\n\n\t\tthis.inject('site.apollo');\n\n\t\tthis._waiting_user_ids = new Map;\n\t\tthis._waiting_user_logins = new Map;\n\n\t\tthis._waiting_stream_ids = new Map;\n\t\tthis._waiting_stream_logins = new Map;\n\n\t\tthis._waiting_flag_ids = new Map;\n\t\tthis._waiting_flag_logins = new Map;\n\n\t\tthis.tag_cache = new Map;\n\t\tthis._waiting_tags = new Map;\n\n\t\t// The return type doesn't match, because this method returns\n\t\t// a void and not a Promise. We don't care.\n\t\tthis._loadStreams = debounce(this._loadStreams, 50) as any;\n\t}\n\n\tqueryApollo(\n\t\tquery: DocumentNode | {query: DocumentNode, variables: any},\n\t\tvariables?: any,\n\t\toptions?: any\n\t) {\n\t\tlet thing: {query: DocumentNode, variables: any};\n\t\tif ( ! variables && ! options && 'query' in query && query.query )\n\t\t\tthing = query;\n\t\telse {\n\t\t\tthing = {\n\t\t\t\tquery: query as DocumentNode,\n\t\t\t\tvariables\n\t\t\t};\n\n\t\t\tif ( options )\n\t\t\t\tthing = Object.assign(thing, options);\n\t\t}\n\n\t\treturn this.apollo.client.query(thing);\n\t}\n\n\tmutate(\n\t\tmutation: DocumentNode | {mutation: DocumentNode, variables: any},\n\t\tvariables?: any,\n\t\toptions?: any\n\t) {\n\t\tlet thing: {mutation: DocumentNode, variables: any};\n\t\tif ( ! variables && ! options && 'mutation' in mutation && mutation.mutation )\n\t\t\tthing = mutation;\n\t\telse {\n\t\t\tthing = {\n\t\t\t\tmutation: mutation as DocumentNode,\n\t\t\t\tvariables\n\t\t\t};\n\n\t\t\tif ( options )\n\t\t\t\tthing = Object.assign(thing, options);\n\t\t}\n\n\t\treturn this.apollo.client.mutate(thing);\n\t}\n\n\tget languageCode() {\n\t\tconst session = this.site.getSession();\n\t\treturn session && session.languageCode || 'en'\n\t}\n\n\tget locale() {\n\t\tconst session = this.site.getSession();\n\t\treturn session && session.locale || 'en-US'\n\t}\n\n\n\t// ========================================================================\n\t// Badges\n\t// ========================================================================\n\n\tasync getBadges() {\n\n\t\tconst data = await this.queryApollo(\n\t\t\tawait import(/* webpackChunkName: 'queries' */ './data/global-badges.gql')\n\t\t);\n\n\t\treturn get('data.badges', data);\n\t}\n\n\n\t// ========================================================================\n\t// Categories\n\t// ========================================================================\n\n\t/**\n\t * Find categories matching the search query\n\t *\n\t * @param {String} query The category name to match\n\t * @param {Number} [first=15] How many results to return\n\t * @param {String} [cursor=null] A cursor, to be used in fetching the\n\t * next page of results.\n\t * @returns {PaginatedResult} The results\n\t */\n\tasync getMatchingCategories(\n\t\tquery: string,\n\t\tfirst: number = 15,\n\t\tcursor: string | null = null\n\t) {\n\t\tconst data = await this.queryApollo(\n\t\t\tawait import(/* webpackChunkName: 'queries' */ './data/search-category.gql'),\n\t\t\t{\n\t\t\t\tquery,\n\t\t\t\tfirst,\n\t\t\t\tcursor\n\t\t\t}\n\t\t);\n\n\t\tconst items = get('data.searchCategories.edges.@each.node', data) ?? [],\n\t\t\tneedle = query.toLowerCase();\n\n\t\tif ( Array.isArray(items) )\n\t\t\titems.sort((a,b) => {\n\t\t\t\tconst a_match = a && (a.name?.toLowerCase?.() === needle || a?.displayName?.toLowerCase?.() === needle),\n\t\t\t\t\tb_match = a && (b.name?.toLowerCase?.() === needle || b?.displayName?.toLowerCase?.() === needle);\n\n\t\t\t\tif ( a_match && ! b_match ) return -1;\n\t\t\t\tif ( ! a_match && b_match ) return 1;\n\t\t\t\treturn 0;\n\t\t\t});\n\n\t\treturn {\n\t\t\tcursor: get('data.searchCategories.edges.@last.cursor', data),\n\t\t\titems,\n\t\t\tfinished: ! get('data.searchCategories.pageInfo.hasNextPage', data),\n\t\t\tcount: get('data.searchCategories.totalCount', data) || 0\n\t\t};\n\t}\n\n\t/**\n\t * Queries Apollo for category details given the id or name. One of (id, name) MUST be specified\n\t * @function getCategory\n\t * @memberof TwitchData\n\t * @async\n\t *\n\t * @param {int|string|null|undefined} id - the category id number (can be an integer string)\n\t * @param {string|null|undefined} name - the category name\n\t * @returns {Object} information about the requested stream\n\t *\n\t * @example\n\t *\n\t *  console.log(this.twitch_data.getCategory(null, 'Just Chatting'));\n\t */\n\tasync getCategory(id, name) {\n\t\tconst data = await this.queryApollo(\n\t\t\tawait import(/* webpackChunkName: 'queries' */ './data/category-fetch.gql'),\n\t\t\t{ id, name }\n\t\t);\n\n\t\treturn get('data.game', data);\n\t}\n\n\n\t// ========================================================================\n\t// Chat\n\t// ========================================================================\n\n\tasync deleteChatMessage(\n\t\tchannel_id/* :string*/,\n\t\tmessage_id/* :string*/\n\t) {\n\t\tchannel_id = String(channel_id);\n\n\t\tconst data = await this.mutate({\n\t\t\tmutation: await import(/* webpackChunkName: 'queries' */ './mutations/delete-chat-message.gql'),\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tchannelID: channel_id,\n\t\t\t\t\tmessageID: message_id\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst code = get('data.deleteChatMessage.responseCode', data);\n\n\t\tif ( code === 'TARGET_IS_BROADCASTER' )\n\t\t\tthrow new TranslatableError(\n\t\t\t\t\"You cannot delete the broadcaster's messages.\",\n\t\t\t\t\"chat.delete.forbidden.broadcaster\"\n\t\t\t);\n\n\t\tif ( code === 'TARGET_IS_MODERATOR' )\n\t\t\tthrow new TranslatableError(\n\t\t\t\t\"You cannot delete messages from moderator {displayName}.\",\n\t\t\t\t\"chat.delete.forbidden.moderator\",\n\t\t\t\tget('data.deleteChatMessage.message.sender', data)\n\t\t\t);\n\n\t\tif ( code !== 'SUCCESS' )\n\t\t\tthrow new TranslatableError(\n\t\t\t\t\"You don't have permission to delete messages.\",\n\t\t\t\t\"chat.delete.forbidden\"\n\t\t\t);\n\n\t\treturn true;\n\t}\n\n\n\t// ========================================================================\n\t// Users\n\t// ========================================================================\n\n\t/**\n\t * Find users matching the search query.\n\t *\n\t * @param {String} query Text to match in the login or display name\n\t * @param {Number} [first=15] How many results to return\n\t * @param {String} [cursor=null] A cursor, to be used in fetching the next\n\t * page of results.\n\t * @returns {PaginatedResult} The results\n\t */\n\tasync getMatchingUsers(query, first = 15, cursor = null) {\n\t\tconst data = await this.queryApollo(\n\t\t\tawait import(/* webpackChunkName: 'queries' */ './data/search-user.gql'),\n\t\t\t{\n\t\t\t\tquery,\n\t\t\t\tfirst,\n\t\t\t\tcursor\n\t\t\t}\n\t\t);\n\n\t\tconst items = get('data.searchUsers.edges.@each.node', data) ?? [],\n\t\t\tneedle = query.toLowerCase();\n\n\t\tif ( Array.isArray(items) )\n\t\t\titems.sort((a,b) => {\n\t\t\t\tconst a_match = a && (a.login?.toLowerCase?.() === needle || a?.displayName?.toLowerCase?.() === needle),\n\t\t\t\t\tb_match = a && (b.login?.toLowerCase?.() === needle || b?.displayName?.toLowerCase?.() === needle);\n\n\t\t\t\tif ( a_match && ! b_match ) return -1;\n\t\t\t\tif ( ! a_match && b_match ) return 1;\n\t\t\t\treturn 0;\n\t\t\t});\n\n\t\treturn {\n\t\t\tcursor: get('data.searchUsers.edges.@last.cursor', data),\n\t\t\titems,\n\t\t\tfinished: ! get('data.searchUsers.pageInfo.hasNextPage', data),\n\t\t\tcount: get('data.searchUsers.totalCount', data) || 0\n\t\t};\n\t}\n\n\t/**\n\t * Queries Apollo for user details given the id or name. One of (id, login) MUST be specified\n\t * @function getUser\n\t * @memberof TwitchData\n\t * @async\n\t *\n\t * @param {int|string|null|undefined} id - the user id number (can be an integer string)\n\t * @param {string|null|undefined} login - the username\n\t * @returns {Object} information about the requested user\n\t *\n\t * @example\n\t *\n\t *  console.log(this.twitch_data.getUser(19571641, null));\n\t */\n\tasync getUser(id, login) {\n\t\tconst data = await this.queryApollo(\n\t\t\tawait import(/* webpackChunkName: 'queries' */ './data/user-fetch.gql'),\n\t\t\t{ id, login }\n\t\t);\n\n\t\treturn get('data.user', data);\n\t}\n\n\t/**\n\t * Queries Apollo for the user's current game, details given the user id or name. One of (id, login) MUST be specified\n\t * @function getUserGame\n\t * @memberof TwitchData\n\t * @async\n\t *\n\t * @param {int|string|null|undefined} id - the user id number (can be an integer string)\n\t * @param {string|null|undefined} login - the username\n\t * @returns {Object} information about the requested user\n\t *\n\t * @example\n\t *\n\t *  console.log(this.twitch_data.getUserGame(19571641, null));\n\t */\n\tasync getUserGame(id, login) {\n\t\tconst data = await this.queryApollo(\n\t\t\tawait import(/* webpackChunkName: 'queries' */ './data/user-game.gql'),\n\t\t\t{ id, login }\n\t\t);\n\n\t\treturn get('data.user.broadcastSettings.game', data);\n\t}\n\n\t/**\n\t * Queries Apollo for the logged in user's relationship to the channel with given the id or name. One of (id, login) MUST be specified\n\t * @function getUserSelf\n\t * @memberof TwitchData\n\t * @async\n\t *\n\t * @param {int|string|null|undefined} id - the channel id number (can be an integer string)\n\t * @param {string|null|undefined} login - the channel username\n\t * @returns {Object} information about your status in the channel\n\t *\n\t * @example\n\t *\n\t *  console.log(this.twitch_data.getUserSelf(null, \"ninja\"));\n\t */\n\tasync getUserSelf(id, login) {\n\t\tconst data = await this.queryApollo(\n\t\t\tawait import(/* webpackChunkName: 'queries' */ './data/user-self.gql'),\n\t\t\t{ id, login }\n\t\t);\n\n\t\treturn get('data.user.self', data);\n\t}\n\n\n\tasync getUserFollowed(id, login) {\n\t\tconst data = await this.queryApollo(\n\t\t\tawait import(/* webpackChunkName: 'queries' */ './data/user-followed.gql'),\n\t\t\t{ id, login }\n\t\t);\n\n\t\treturn get('data.user.self.follower', data);\n\t}\n\n\n\tasync followUser(channel_id, disable_notifications = false) {\n\t\tchannel_id = String(channel_id);\n\t\tdisable_notifications = !! disable_notifications;\n\n\t\tconst data = await this.mutate({\n\t\t\tmutation: await import(/* webpackChunkName: 'queries' */ './data/follow-user.gql'),\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\ttargetID: channel_id,\n\t\t\t\t\tdisableNotifications: disable_notifications\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconsole.log('result', data);\n\t\tconst err = get('data.followUser.error', data);\n\t\tif ( err?.code )\n\t\t\tthrow new Error(err.code);\n\n\t\treturn get('data.followUser.follow', data);\n\t}\n\n\n\tasync unfollowUser(channel_id, disable_notifications = false) {\n\t\tchannel_id = String(channel_id);\n\t\tdisable_notifications = !! disable_notifications;\n\n\t\tconst data = await this.mutate({\n\t\t\tmutation: await import(/* webpackChunkName: 'queries' */ './data/unfollow-user.gql'),\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\ttargetID: channel_id\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconsole.log('result', data);\n\t\treturn get('data.unfollowUser.follow', data);\n\t}\n\n\n\t/**\n\t * Queries Apollo for the requested user's latest broadcast. One of (id, login) MUST be specified\n\t * @function getLastBroadcast\n\t * @memberof TwitchData\n\t * @async\n\t *\n\t * @param {int|string|null|undefined} id - the channel id number (can be an integer string)\n\t * @param {string|null|undefined} login - the channel username\n\t * @returns {Object} information about the requested user's latest broadcast\n\t *\n\t * @example\n\t *\n\t *  console.log(this.twitch_data.getLastBroadcast(19571641, null));\n\t */\n\tasync getLastBroadcast(id, login) {\n\t\tconst data = await this.queryApollo(\n\t\t\tawait import(/* webpackChunkName: 'queries' */ './data/last-broadcast.gql'),\n\t\t\t{ id, login }\n\t\t);\n\n\t\treturn get('data.user.lastBroadcast', data);\n\t}\n\n\n\t/**\n\t * Fetch basic information on a user from Twitch. This is automatically batched\n\t * for performance, but not directly cached. Either an id or login must be provided.\n\t *\n\t * @param {Number|String} [id] The ID of the channel\n\t * @param {String} [login] The username of the channel\n\t *\n\t * @returns {Promise} A basic user object.\n\t */\n\tgetUserBasic(id, login) {\n\t\treturn new Promise((s, f) => {\n\t\t\tif ( id ) {\n\t\t\t\tif ( this._waiting_user_ids.has(id) )\n\t\t\t\t\tthis._waiting_user_ids.get(id).push([s,f]);\n\t\t\t\telse\n\t\t\t\t\tthis._waiting_user_ids.set(id, [[s,f]]);\n\t\t\t} else if ( login ) {\n\t\t\t\tif ( this._waiting_user_logins.has(login) )\n\t\t\t\t\tthis._waiting_user_logins.get(login).push([s,f]);\n\t\t\t\telse\n\t\t\t\t\tthis._waiting_user_logins.set(login, [[s,f]]);\n\t\t\t} else\n\t\t\t\tf('id and login cannot both be null');\n\n\t\t\tif ( ! this._loading_users )\n\t\t\t\tthis._loadUsers();\n\t\t})\n\t}\n\n\tasync _loadUsers() {\n\t\tif ( this._loading_users )\n\t\t\treturn;\n\n\t\tthis._loading_users = true;\n\n\t\t// Get the first 50... things.\n\t\tconst ids = [...this._waiting_user_ids.keys()].slice(0, 50),\n\t\t\tremaining = 50 - ids.length,\n\t\t\tlogins = remaining > 0 ? [...this._waiting_user_logins.keys()].slice(0, remaining) : [];\n\n\t\tlet nodes;\n\n\t\ttry {\n\t\t\tconst data = await this.queryApollo({\n\t\t\t\tquery: await import(/* webpackChunkName: 'queries' */ './data/user-bulk.gql'),\n\t\t\t\tvariables: {\n\t\t\t\t\tids: ids.length ? ids : null,\n\t\t\t\t\tlogins: logins.length ? logins : null\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnodes = get('data.users', data);\n\n\t\t} catch(err) {\n\t\t\tfor(const id of ids) {\n\t\t\t\tconst promises = this._waiting_user_ids.get(id);\n\t\t\t\tthis._waiting_user_ids.delete(id);\n\n\t\t\t\tfor(const pair of promises)\n\t\t\t\t\tpair[1](err);\n\t\t\t}\n\n\t\t\tfor(const login of logins) {\n\t\t\t\tconst promises = this._waiting_user_logins.get(login);\n\t\t\t\tthis._waiting_user_logins.delete(login);\n\n\t\t\t\tfor(const pair of promises)\n\t\t\t\t\tpair[1](err);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst id_set = new Set(ids),\n\t\t\tlogin_set = new Set(logins);\n\n\t\tif ( Array.isArray(nodes) )\n\t\t\tfor(const node of nodes) {\n\t\t\t\tif ( ! node || ! node.id )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tid_set.delete(node.id);\n\t\t\t\tlogin_set.delete(node.login);\n\n\t\t\t\tlet promises = this._waiting_user_ids.get(node.id);\n\t\t\t\tif ( promises ) {\n\t\t\t\t\tthis._waiting_user_ids.delete(node.id);\n\t\t\t\t\tfor(const pair of promises)\n\t\t\t\t\t\tpair[0](node);\n\t\t\t\t}\n\n\t\t\t\tpromises = this._waiting_user_logins.get(node.login);\n\t\t\t\tif ( promises ) {\n\t\t\t\t\tthis._waiting_user_logins.delete(node.login);\n\t\t\t\t\tfor(const pair of promises)\n\t\t\t\t\t\tpair[0](node);\n\t\t\t\t}\n\t\t\t}\n\n\t\tfor(const id of id_set) {\n\t\t\tconst promises = this._waiting_user_ids.get(id);\n\t\t\tif ( promises ) {\n\t\t\t\tthis._waiting_user_ids.delete(id);\n\t\t\t\tfor(const pair of promises)\n\t\t\t\t\tpair[0](null);\n\t\t\t}\n\t\t}\n\n\t\tfor(const login of login_set) {\n\t\t\tconst promises = this._waiting_user_logins.get(login);\n\t\t\tif ( promises ) {\n\t\t\t\tthis._waiting_user_logins.delete(login);\n\t\t\t\tfor(const pair of promises)\n\t\t\t\t\tpair[0](null);\n\t\t\t}\n\t\t}\n\n\t\tthis._loading_users = false;\n\n\t\tif ( this._waiting_user_ids.size || this._waiting_user_logins.size )\n\t\t\tthis._loadUsers();\n\t}\n\n\n\t// ========================================================================\n\t// Broadcast ID\n\t// ========================================================================\n\n\t/**\n\t * Queries Apollo for the ID of the specified user's current broadcast. This ID will become the VOD ID. One of (id, login) MUST be specified\n\t * @function getBroadcastID\n\t * @memberof TwitchData\n\t * @async\n\t *\n\t * @param {int|string|null|undefined} id - the channel id number (can be an integer string)\n\t * @param {string|null|undefined} login - the channel username\n\t * @returns {Object} information about the current broadcast\n\t *\n\t * @example\n\t *\n\t *  console.log(this.twitch_data.getBroadcastID(null, \"ninja\"));\n\t */\n\tasync getBroadcastID(id, login) {\n\t\tconst data = await this.queryApollo({\n\t\t\tquery: await import(/* webpackChunkName: 'queries' */ './data/broadcast-id.gql'),\n\t\t\tvariables: {\n\t\t\t\tid,\n\t\t\t\tlogin\n\t\t\t}\n\t\t});\n\n\t\treturn get('data.user.stream.archiveVideo.id', data);\n\t}\n\n\n\tasync getChannelColor(id, login) {\n\t\tconst data = await this.queryApollo({\n\t\t\tquery: await import(/* webpackChunkName: 'queries' */ './data/user-color.gql'),\n\t\t\tvariables: {\n\t\t\t\tid,\n\t\t\t\tlogin\n\t\t\t}\n\t\t});\n\n\t\treturn get('data.user.primaryColorHex', data);\n\t}\n\n\n\t// ========================================================================\n\t// Polls\n\t// ========================================================================\n\n\t/**\n\t * Queries Apollo for information about the specified poll.\n\t * @function getPoll\n\t * @memberof TwitchData\n\t * @async\n\t *\n\t * @param {int|string} poll_id - the poll id number (can be an integer string)\n\t * @returns {Object} information about the specified poll\n\t *\n\t * @example\n\t *\n\t *  console.log(this.twitch_data.getPoll(1337));\n\t */\n\tasync getPoll(poll_id) {\n\t\tconst data = await this.queryApollo({\n\t\t\tquery: await import(/* webpackChunkName: 'queries' */ './data/poll-get.gql'),\n\t\t\tvariables: {\n\t\t\t\tid: poll_id\n\t\t\t}\n\t\t});\n\n\t\treturn get('data.poll', data);\n\t}\n\n\t/**\n\t * Create a new poll\n\t * @function createPoll\n\t * @memberof TwitchData\n\t * @async\n\t *\n\t * @param {int|string} channel_id - the channel id number (can be an integer string)\n\t * @param {string} title - the poll title\n\t * @param {string[]} choices - an array of poll choices\n\t * @param {Object} [options] - an object containing poll options\n\t * @param {int} [options.bits=0] - how many bits it costs to vote\n\t * @param {int} [options.duration=60] - how long the poll will be held for, in seconds\n\t * @param {bool} [options.subscriberMultiplier=false] - whether to activate subsriber 2x multiplier\n\t * @param {bool} [options.subscriberOnly=false] - whether only subscribers may vote\n\t * @returns {Object} poll data\n\t *\n\t * @example\n\t *\n\t *  console.log(this.twitch_data.createPoll(19571641, \"Pick an option:\", [\"One\", \"Two\", \"Three\"], {bits: 10, duration: 120, subscriberMultiplier: false, subscriberOnly: true}));\n\t */\n\tasync createPoll(channel_id, title, choices, options = {}) {\n\t\tif ( typeof title !== 'string' )\n\t\t\tthrow new TypeError('title must be string');\n\n\t\tif ( ! Array.isArray(choices) || choices.some(x => typeof x !== 'string') )\n\t\t\tthrow new TypeError('choices must be array of strings');\n\n\t\tlet bits = options.bits || 0,\n\t\t\tduration = options.duration || 60;\n\t\tif ( typeof bits !== 'number' || bits < 0 )\n\t\t\tbits = 0;\n\t\tif ( typeof duration !== 'number' || duration < 0 )\n\t\t\tduration = 60;\n\n\t\tconst data = await this.mutate({\n\t\t\tmutation: await import(/* webpackChunkName: 'queries' */ './data/poll-create.gql'),\n\t\t\tvariables: {\n\t\t\t\tinput: {\n\t\t\t\t\tbitsCost: bits,\n\t\t\t\t\tbitsVoting: bits > 0,\n\t\t\t\t\tchoices: choices.map(x => ({title: x})),\n\t\t\t\t\tdurationSeconds: duration,\n\t\t\t\t\townedBy: `${channel_id}`,\n\t\t\t\t\tsubscriberMultiplier: options.subscriberMultiplier || false,\n\t\t\t\t\tsubscriberOnly: options.subscriberOnly || false,\n\t\t\t\t\ttitle\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn get('data.createPoll.poll', data);\n\t}\n\n\t/**\n\t * Place specified poll into archive\n\t * @function archivePoll\n\t * @memberof TwitchData\n\t * @async\n\t *\n\t * @param {int|string|null|undefined} poll_id - the poll id number (can be an integer string)\n\t * @returns {Object} information about the specified poll\n\t *\n\t * @example\n\t *\n\t *  console.log(this.twitch_data.archivePoll(1337));\n\t */\n\tasync archivePoll(poll_id) {\n\t\tconst data = await this.mutate({\n\t\t\tmutation: await import(/* webpackChunkName: 'queries' */ './data/poll-archive.gql'),\n\t\t\tvariables: {\n\t\t\t\tid: poll_id\n\t\t\t}\n\t\t});\n\n\t\treturn get('data.archivePoll.poll', data);\n\t}\n\n\t/**\n\t * Terminate specified poll\n\t * @function terminatePoll\n\t * @memberof TwitchData\n\t * @async\n\t *\n\t * @param {int|string|null|undefined} poll_id - the poll id number (can be an integer string)\n\t * @returns {Object} information about the specified poll\n\t *\n\t * @example\n\t *\n\t *  console.log(this.twitch_data.archivePoll(1337));\n\t */\n\tasync terminatePoll(poll_id) {\n\t\tconst data = await this.mutate({\n\t\t\tmutation: await import(/* webpackChunkName: 'queries' */ './data/poll-terminate.gql'),\n\t\t\tvariables: {\n\t\t\t\tid: poll_id\n\t\t\t}\n\t\t});\n\n\t\treturn get('data.terminatePoll.poll', data);\n\t}\n\n\n\t// ========================================================================\n\t// Stream Up-Type (Uptime and Type, for Directory Purposes)\n\t// ========================================================================\n\n\t/**\n\t * Queries Apollo for stream metadata. One of (id, login) MUST be specified\n\t * @function getStreamMeta\n\t * @memberof TwitchData\n\t *\n\t * @param {int|string|null|undefined} id - the channel id number (can be an integer string)\n\t * @param {string|null|undefined} login - the channel name\n\t * @returns {Promise} information about the requested stream\n\t *\n\t * @example\n\t *\n\t *  this.twitch_data.getStreamMeta(19571641, null).then(function(returnObj){console.log(returnObj);});\n\t */\n\tgetStreamMeta(id, login) {\n\t\treturn new Promise((s, f) => {\n\t\t\tif ( id ) {\n\t\t\t\tif ( this._waiting_stream_ids.has(id) )\n\t\t\t\t\tthis._waiting_stream_ids.get(id).push([s, f]);\n\t\t\t\telse\n\t\t\t\t\tthis._waiting_stream_ids.set(id, [[s, f]]);\n\t\t\t} else if ( login ) {\n\t\t\t\tif ( this._waiting_stream_logins.has(login) )\n\t\t\t\t\tthis._waiting_stream_logins.get(login).push([s, f]);\n\t\t\t\telse\n\t\t\t\t\tthis._waiting_stream_logins.set(login, [[s, f]]);\n\t\t\t} else\n\t\t\t\tf('id and login cannot both be null');\n\n\t\t\tif ( ! this._loading_streams )\n\t\t\t\tthis._loadStreams();\n\t\t})\n\t}\n\n\tasync _loadStreams() {\n\t\tif ( this._loading_streams )\n\t\t\treturn;\n\n\t\tthis._loading_streams = true;\n\n\t\t// Get the first 50... things.\n\t\tconst ids = [...this._waiting_stream_ids.keys()].slice(0, 50),\n\t\t\tremaining = 50 - ids.length,\n\t\t\tlogins = remaining > 0 ? [...this._waiting_stream_logins.keys()].slice(0, remaining) : [];\n\n\t\tlet nodes;\n\n\t\ttry {\n\t\t\tconst data = await this.queryApollo({\n\t\t\t\tquery: await import(/* webpackChunkName: 'queries' */ './data/stream-fetch.gql'),\n\t\t\t\tvariables: {\n\t\t\t\t\tids: ids.length ? ids : null,\n\t\t\t\t\tlogins: logins.length ? logins : null\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnodes = get('data.users', data);\n\n\t\t} catch(err) {\n\t\t\tfor(const id of ids) {\n\t\t\t\tconst promises = this._waiting_stream_ids.get(id);\n\t\t\t\tthis._waiting_stream_ids.delete(id);\n\n\t\t\t\tfor(const pair of promises)\n\t\t\t\t\tpair[1](err);\n\t\t\t}\n\n\t\t\tfor(const login of logins) {\n\t\t\t\tconst promises = this._waiting_stream_logins.get(login);\n\t\t\t\tthis._waiting_stream_logins.delete(login);\n\n\t\t\t\tfor(const pair of promises)\n\t\t\t\t\tpair[1](err);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst id_set = new Set(ids),\n\t\t\tlogin_set = new Set(logins);\n\n\t\tif ( Array.isArray(nodes) )\n\t\t\tfor(const node of nodes) {\n\t\t\t\tif ( ! node || ! node.id )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tid_set.delete(node.id);\n\t\t\t\tlogin_set.delete(node.login);\n\n\t\t\t\tlet promises = this._waiting_stream_ids.get(node.id);\n\t\t\t\tif ( promises ) {\n\t\t\t\t\tthis._waiting_stream_ids.delete(node.id);\n\t\t\t\t\tfor(const pair of promises)\n\t\t\t\t\t\tpair[0](node.stream);\n\t\t\t\t}\n\n\t\t\t\tpromises = this._waiting_stream_logins.get(node.login);\n\t\t\t\tif ( promises ) {\n\t\t\t\t\tthis._waiting_stream_logins.delete(node.login);\n\t\t\t\t\tfor(const pair of promises)\n\t\t\t\t\t\tpair[0](node.stream);\n\t\t\t\t}\n\t\t\t}\n\n\t\tfor(const id of id_set) {\n\t\t\tconst promises = this._waiting_stream_ids.get(id);\n\t\t\tif ( promises ) {\n\t\t\t\tthis._waiting_stream_ids.delete(id);\n\t\t\t\tfor(const pair of promises)\n\t\t\t\t\tpair[0](null);\n\t\t\t}\n\t\t}\n\n\t\tfor(const login of login_set) {\n\t\t\tconst promises = this._waiting_stream_logins.get(login);\n\t\t\tif ( promises ) {\n\t\t\t\tthis._waiting_stream_logins.delete(login);\n\t\t\t\tfor(const pair of promises)\n\t\t\t\t\tpair[0](null);\n\t\t\t}\n\t\t}\n\n\t\tthis._loading_streams = false;\n\n\t\tif ( this._waiting_stream_ids.size || this._waiting_stream_logins.size )\n\t\t\tthis._loadStreams();\n\t}\n\n\n\t// ========================================================================\n\t// Stream Content Flags (for Directory Purposes)\n\t// ========================================================================\n\n\t/**\n\t * Queries Apollo for stream content flags. One of (id, login) MUST be specified\n\t *\n\t * @param id - the channel id number (can be an integer string)\n\t * @param login - the channel name\n\t */\n\tgetStreamFlags(id: string | number): Promise<any>;\n\tgetStreamFlags(id: null, login: string): Promise<any>;\n\tgetStreamFlags(id: string | number | null, login?: string | null) {\n\t\treturn new Promise((s, f) => {\n\t\t\tif ( typeof id === 'number' )\n\t\t\t\tid = `${id}`;\n\n\t\t\tif ( id ) {\n\t\t\t\tconst existing = this._waiting_flag_ids.get(id);\n\t\t\t\tif ( existing )\n\t\t\t\t\texisting.push([s,f]);\n\t\t\t\telse\n\t\t\t\t\tthis._waiting_flag_ids.set(id, [[s,f]]);\n\n\t\t\t} else if ( login ) {\n\t\t\t\tconst existing = this._waiting_flag_logins.get(login);\n\t\t\t\tif ( existing )\n\t\t\t\t\texisting.push([s,f]);\n\t\t\t\telse\n\t\t\t\t\tthis._waiting_flag_logins.set(login, [[s,f]]);\n\n\t\t\t} else\n\t\t\t\tf('id and login cannot both be null');\n\n\t\t\tif ( ! this._loading_flags )\n\t\t\t\tthis._loadStreamFlags();\n\t\t})\n\t}\n\n\tasync _loadStreamFlags() {\n\t\tif ( this._loading_flags )\n\t\t\treturn;\n\n\t\tthis._loading_flags = true;\n\n\t\t// Get the first 50... things.\n\t\tconst ids = [...this._waiting_flag_ids.keys()].slice(0, 50),\n\t\t\tremaining = 50 - ids.length,\n\t\t\tlogins = remaining > 0 ? [...this._waiting_flag_logins.keys()].slice(0, remaining) : [];\n\n\t\tlet nodes;\n\n\t\ttry {\n\t\t\tconst data = await this.queryApollo({\n\t\t\t\tquery: await import(/* webpackChunkName: 'queries' */ './data/stream-flags.gql'),\n\t\t\t\tvariables: {\n\t\t\t\t\tids: ids.length ? ids : null,\n\t\t\t\t\tlogins: logins.length ? logins : null\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnodes = get('data.users', data);\n\n\t\t} catch(err) {\n\t\t\tfor(const id of ids) {\n\t\t\t\tconst promises = this._waiting_flag_ids.get(id);\n\n\t\t\t\tif ( promises ) {\n\t\t\t\t\tthis._waiting_flag_ids.delete(id);\n\n\t\t\t\t\tfor(const pair of promises)\n\t\t\t\t\t\tpair[1](err);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(const login of logins) {\n\t\t\t\tconst promises = this._waiting_flag_logins.get(login);\n\n\t\t\t\tif ( promises ) {\n\t\t\t\t\tthis._waiting_flag_logins.delete(login);\n\n\t\t\t\t\tfor(const pair of promises)\n\t\t\t\t\t\tpair[1](err);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst id_set = new Set(ids),\n\t\t\tlogin_set = new Set(logins);\n\n\t\tif ( Array.isArray(nodes) )\n\t\t\tfor(const node of nodes) {\n\t\t\t\tif ( ! node || ! node.id )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tid_set.delete(node.id);\n\t\t\t\tlogin_set.delete(node.login);\n\n\t\t\t\tlet promises = this._waiting_flag_ids.get(node.id);\n\t\t\t\tif ( promises ) {\n\t\t\t\t\tthis._waiting_flag_ids.delete(node.id);\n\t\t\t\t\tfor(const pair of promises)\n\t\t\t\t\t\tpair[0](node.stream?.contentClassificationLabels);\n\t\t\t\t}\n\n\t\t\t\tpromises = this._waiting_flag_logins.get(node.login);\n\t\t\t\tif ( promises ) {\n\t\t\t\t\tthis._waiting_flag_logins.delete(node.login);\n\t\t\t\t\tfor(const pair of promises)\n\t\t\t\t\t\tpair[0](node.stream?.contentClassificationLabels);\n\t\t\t\t}\n\t\t\t}\n\n\t\tfor(const id of id_set) {\n\t\t\tconst promises = this._waiting_flag_ids.get(id);\n\t\t\tif ( promises ) {\n\t\t\t\tthis._waiting_flag_ids.delete(id);\n\t\t\t\tfor(const pair of promises)\n\t\t\t\t\tpair[0](null);\n\t\t\t}\n\t\t}\n\n\t\tfor(const login of login_set) {\n\t\t\tconst promises = this._waiting_flag_logins.get(login);\n\t\t\tif ( promises ) {\n\t\t\t\tthis._waiting_flag_logins.delete(login);\n\t\t\t\tfor(const pair of promises)\n\t\t\t\t\tpair[0](null);\n\t\t\t}\n\t\t}\n\n\t\tthis._loading_flags = false;\n\n\t\tif ( this._waiting_flag_ids.size || this._waiting_flag_logins.size )\n\t\t\tthis._loadStreamFlags();\n\t}\n\n\n\t// ========================================================================\n\t// Tags\n\t// ========================================================================\n\n\t/**\n\t * Search tags\n\t * @function getMatchingTags\n\t * @memberof TwitchData\n\t * @async\n\t *\n\t * @param {string} query - the search string\n\t * @returns {string[]} an array containing tags that match the query string\n\t *\n\t * @example\n\t *\n\t *  console.log(await this.twitch_data.getMatchingTags(\"Rainbo\"));\n\t */\n\tasync getMatchingTags(query: string) {\n\t\tconst data = await this.queryApollo({\n\t\t\tquery: await import(/* webpackChunkName: 'queries' */ './data/tag-search.gql'),\n\t\t\tvariables: {\n\t\t\t\tquery,\n\t\t\t\tfirst: 100\n\t\t\t}\n\t\t});\n\n\t\tconst edges = data?.data?.searchFreeformTags?.edges;\n\t\tif ( ! Array.isArray(edges) || ! edges.length )\n\t\t\treturn [];\n\n\t\tconst out = [];\n\t\tfor(const edge of edges) {\n\t\t\tconst tag = edge?.node?.tagName;\n\t\t\tif ( tag )\n\t\t\t\tout.push(tag);\n\t\t}\n\n\t\treturn out;\n\t}\n}\n","\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"query\",\"name\":{\"kind\":\"Name\",\"value\":\"FFZ_EmoteMenu_SubStatus\"},\"variableDefinitions\":[{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"first\"}},\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Int\"}},\"directives\":[]},{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"after\"}},\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Cursor\"}},\"directives\":[]},{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"criteria\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"SubscriptionBenefitCriteriaInput\"}}},\"directives\":[]}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"currentUser\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"subscriptionBenefits\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"first\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"first\"}}},{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"after\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"after\"}}},{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"criteria\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"criteria\"}}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"pageInfo\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"hasNextPage\"},\"arguments\":[],\"directives\":[]}]}},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"edges\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"cursor\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"node\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"gift\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"isGift\"},\"arguments\":[],\"directives\":[]}]}},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"purchasedWithPrime\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"endsAt\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"renewsAt\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"product\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"emoteSetID\"},\"arguments\":[],\"directives\":[]}]}}]}}]}}]}}]}}]}}],\"loc\":{\"start\":0,\"end\":296}};\n    doc.loc.source = {\"body\":\"query FFZ_EmoteMenu_SubStatus($first:Int$after:Cursor$criteria:SubscriptionBenefitCriteriaInput!){currentUser{id subscriptionBenefits(first:$first after:$after criteria:$criteria){pageInfo{hasNextPage}edges{cursor node{id gift{isGift}purchasedWithPrime endsAt renewsAt product{id emoteSetID}}}}}}\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \n\n    // Collect any fragment/type references from a node, adding them to the refs Set\n    function collectFragmentReferences(node, refs) {\n      if (node.kind === \"FragmentSpread\") {\n        refs.add(node.name.value);\n      } else if (node.kind === \"VariableDefinition\") {\n        var type = node.type;\n        if (type.kind === \"NamedType\") {\n          refs.add(type.name.value);\n        }\n      }\n\n      if (node.selectionSet) {\n        node.selectionSet.selections.forEach(function(selection) {\n          collectFragmentReferences(selection, refs);\n        });\n      }\n\n      if (node.variableDefinitions) {\n        node.variableDefinitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n\n      if (node.definitions) {\n        node.definitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n    }\n\n    var definitionRefs = {};\n    (function extractReferences() {\n      doc.definitions.forEach(function(def) {\n        if (def.name) {\n          var refs = new Set();\n          collectFragmentReferences(def, refs);\n          definitionRefs[def.name.value] = refs;\n        }\n      });\n    })();\n\n    function findOperation(doc, name) {\n      for (var i = 0; i < doc.definitions.length; i++) {\n        var element = doc.definitions[i];\n        if (element.name && element.name.value == name) {\n          return element;\n        }\n      }\n    }\n\n    function oneQuery(doc, operationName) {\n      // Copy the DocumentNode, but clear out the definitions\n      var newDoc = {\n        kind: doc.kind,\n        definitions: [findOperation(doc, operationName)]\n      };\n      if (doc.hasOwnProperty(\"loc\")) {\n        newDoc.loc = doc.loc;\n      }\n\n      // Now, for the operation we're running, find any fragments referenced by\n      // it or the fragments it references\n      var opRefs = definitionRefs[operationName] || new Set();\n      var allRefs = new Set();\n      var newRefs = new Set();\n\n      // IE 11 doesn't support \"new Set(iterable)\", so we add the members of opRefs to newRefs one by one\n      opRefs.forEach(function(refName) {\n        newRefs.add(refName);\n      });\n\n      while (newRefs.size > 0) {\n        var prevRefs = newRefs;\n        newRefs = new Set();\n\n        prevRefs.forEach(function(refName) {\n          if (!allRefs.has(refName)) {\n            allRefs.add(refName);\n            var childRefs = definitionRefs[refName] || new Set();\n            childRefs.forEach(function(childRef) {\n              newRefs.add(childRef);\n            });\n          }\n        });\n      }\n\n      allRefs.forEach(function(refName) {\n        var op = findOperation(doc, refName);\n        if (op) {\n          newDoc.definitions.push(op);\n        }\n      });\n\n      return newDoc;\n    }\n    \n    module.exports = doc;\n    \n        module.exports[\"FFZ_EmoteMenu_SubStatus\"] = oneQuery(doc, \"FFZ_EmoteMenu_SubStatus\");\n        \n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"edit_reason\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.reason', 'Default Reason'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.value.reason),expression:\"value.reason\",modifiers:{\"trim\":true}}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"edit_reason\"},domProps:{\"value\":(_vm.value.reason)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.value, \"reason\", $event.target.value.trim())},function($event){return _vm.$emit('input', _vm.value)}],\"blur\":function($event){return _vm.$forceUpdate()}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-ban.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-ban.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['value', 'defaults']\n}\n\n","import { render, staticRenderFns } from \"./edit-ban.vue?vue&type=template&id=77e9a2f4&lang=html&\"\nimport script from \"./edit-ban.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-ban.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"tw-flex tw-align-items-start\"},[_c('label',{staticClass:\"tw-mg-y-05\",attrs:{\"for\":'edit_chat$' + _vm.id}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.chat', 'Chat Command'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-full-width\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.command),expression:\"value.command\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":'edit_chat$' + _vm.id,\"placeholder\":_vm.defaults.command},domProps:{\"value\":(_vm.value.command)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.value, \"command\", $event.target.value)},function($event){return _vm.$emit('input', _vm.value)}]}}),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-text-alt-2 tw-mg-b-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.variables', 'Available Variables: {vars}', {vars: _vm.vars}))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-text-alt-2 tw-mg-b-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.formats', 'Available Formatters: {fmts}', {fmts: _vm.fmts}))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"ffz-checkbox\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.paste),expression:\"value.paste\"}],staticClass:\"ffz-checkbox__input\",attrs:{\"id\":'chat-paste$' + _vm.id,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.value.paste)?_vm._i(_vm.value.paste,null)>-1:(_vm.value.paste)},on:{\"change\":[function($event){var $$a=_vm.value.paste,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.value, \"paste\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.value, \"paste\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.value, \"paste\", $$c)}},function($event){return _vm.$emit('input', _vm.value)}]}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":'chat-paste$' + _vm.id}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.set-chat', 'Paste this message into chat rather than sending it directly.'))+\"\\n\\t\\t\\t\\t\\t\")])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-start\"},[_c('label',{staticClass:\"tw-mg-y-05\",attrs:{\"for\":'edit_chat_target$' + _vm.id}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.chat.target', 'Target Channel'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-full-width\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.target),expression:\"value.target\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":'edit_chat_target$' + _vm.id,\"placeholder\":_vm.defaults.target || ''},domProps:{\"value\":(_vm.value.target)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.value, \"target\", $event.target.value)},function($event){return _vm.$emit('input', _vm.value)}]}}),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-text-alt-2 tw-mg-b-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.chat.target-notice', 'Please note that when sending a message into another chat, you will not receive feedback that your message was sent.'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-text-alt-2\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.chat.target-incompatible', 'Note: This is not compatible with pasting a message into chat, and will not function if that is enabled.'))+\"\\n\\t\\t\\t\")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nlet last_id = 0;\n\nexport default {\n\tprops: ['value', 'defaults', 'vars', 'fmts'],\n\n\tdata() {\n\t\treturn {\n\t\t\tid: last_id++\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit-chat.vue?vue&type=template&id=279e2fcc&lang=html&\"\nimport script from \"./edit-chat.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-chat.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"tw-flex tw-align-items-start\"},[_c('label',{staticClass:\"tw-mg-y-05\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.icon', 'Icon'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('icon-picker',{staticClass:\"tw-full-width\",attrs:{\"value\":_vm.value.icon},on:{\"input\":_vm.change}})],1),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"edit_text\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.text', 'Label'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.text),expression:\"value.text\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"edit_text\"},domProps:{\"value\":(_vm.value.text)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.value, \"text\", $event.target.value)},function($event){return _vm.$emit('input', _vm.value)}]}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-combo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-combo.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['value'],\n\n\tmethods: {\n\t\tchange(val) {\n\t\t\tthis.value.icon = val;\n\t\t\tthis.$emit('input', this.value);\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./edit-combo.vue?vue&type=template&id=790f8312&lang=html&\"\nimport script from \"./edit-combo.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-combo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-flex tw-align-items-start\"},[_c('label',{staticClass:\"tw-mg-y-05\",attrs:{\"for\":\"edit_format\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.actions.format', 'Format'))+\"\\n\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-full-width\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.format),expression:\"value.format\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"edit_format\",\"placeholder\":_vm.defaults.format},domProps:{\"value\":(_vm.value.format)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.value, \"format\", $event.target.value)},function($event){return _vm.$emit('input', _vm.value)}]}}),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-text-alt-2 tw-mg-b-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.variables', 'Available Variables: {vars}', {vars: _vm.vars}))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-text-alt-2 tw-mg-b-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.formats', 'Available Formatters: {fmts}', {fmts: _vm.fmts}))+\"\\n\\t\\t\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-copy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-copy.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['value', 'defaults', 'vars', 'fmts'],\n}\n\n","import { render, staticRenderFns } from \"./edit-copy.vue?vue&type=template&id=0b1ab066&lang=html&\"\nimport script from \"./edit-copy.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-copy.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-flex tw-align-items-start\"},[_c('label',{staticClass:\"tw-mg-y-05\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.actions.emote', 'Emote'))+\"\\n\\t\")]),_vm._v(\" \"),_c('emote-picker',{staticClass:\"tw-full-width\",attrs:{\"value\":_vm.val},on:{\"input\":_vm.change}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-emote.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-emote.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['value'],\n\n\tdata() {\n\t\treturn {\n\t\t\tval: this.value\n\t\t};\n\t},\n\n\twatch: {\n\t\tvalue() {\n\t\t\tthis.val = this.value;\n\t\t}\n\t},\n\n\tmethods: {\n\t\tchange(val) {\n\t\t\tthis.val = val;\n\t\t\tthis.$emit('input', this.val);\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./edit-emote.vue?vue&type=template&id=8ed8b636&lang=html&\"\nimport script from \"./edit-emote.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-emote.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-flex tw-align-items-start\"},[_c('label',{staticClass:\"tw-mg-y-05\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.actions.icon', 'Icon'))+\"\\n\\t\")]),_vm._v(\" \"),_c('icon-picker',{staticClass:\"tw-full-width\",attrs:{\"value\":_vm.value.icon},on:{\"input\":_vm.change}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-icon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-icon.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['value'],\n\n\tmethods: {\n\t\tchange(val) {\n\t\t\tthis.value.icon = val;\n\t\t\tthis.$emit('input', this.value);\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./edit-icon.vue?vue&type=template&id=8fec5e80&lang=html&\"\nimport script from \"./edit-icon.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-icon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"edit_image\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.actions.url', 'URL'))+\"\\n\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.image),expression:\"value.image\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"edit_image\"},domProps:{\"value\":(_vm.value.image)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.value, \"image\", $event.target.value)},function($event){return _vm.$emit('input', _vm.value)}]}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-image.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-image.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['value']\n}\n\n","import { render, staticRenderFns } from \"./edit-image.vue?vue&type=template&id=78899330&lang=html&\"\nimport script from \"./edit-image.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-image.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"edit_profile\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.profile', 'Profile'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.value.uuid),expression:\"value.uuid\",modifiers:{\"trim\":true}}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"edit_profile\"},on:{\"input\":function($event){return _vm.$emit('input', _vm.value)},\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.value, \"uuid\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.profiles),function(profile){return _c('option',{key:profile.value,domProps:{\"value\":profile.value}},[_vm._v(_vm._s(profile.i18n_key ? _vm.t(profile.i18n_key, profile.name) : profile.name))])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-profile.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['value', 'defaults'],\n\n\tdata() {\n\t\tconst ffz = window.FrankerFaceZ.get(),\n\t\t\tsettings = ffz?.resolve('settings'),\n\t\t\tprofiles = settings?.__profiles;\n\n\t\treturn {\n\t\t\tprofiles: profiles ? profiles.map(prof => ({\n\t\t\t\tvalue: prof.uuid,\n\t\t\t\tname: prof.name,\n\t\t\t\ti18n_key: prof.i18n_key\n\t\t\t})) : []\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./edit-profile.vue?vue&type=template&id=17121ca6&lang=html&\"\nimport script from \"./edit-profile.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-profile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"edit_text\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.actions.text', 'Label'))+\"\\n\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.text),expression:\"value.text\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"edit_text\"},domProps:{\"value\":(_vm.value.text)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.value, \"text\", $event.target.value)},function($event){return _vm.$emit('input', _vm.value)}]}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-text.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-text.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['value']\n}\n\n","import { render, staticRenderFns } from \"./edit-text.vue?vue&type=template&id=62e14469&lang=html&\"\nimport script from \"./edit-text.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-text.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"edit_duration\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.duration', 'Duration'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.duration_rich),expression:\"value.duration_rich\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"edit_duration\",\"placeholder\":_vm.defaults.duration,\"type\":\"text\"},domProps:{\"value\":(_vm.value.duration_rich)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.value, \"duration_rich\", $event.target.value)},function($event){return _vm.update()}]}})]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"edit_reason\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.reason', 'Default Reason'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.value.reason),expression:\"value.reason\",modifiers:{\"trim\":true}}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"edit_reason\"},domProps:{\"value\":(_vm.value.reason)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.value, \"reason\", $event.target.value.trim())},function($event){return _vm.$emit('input', _vm.value)}],\"blur\":function($event){return _vm.$forceUpdate()}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nconst DUR_MATCH = /(\\d+)(mo|d|h|m|s)?/gi,\n\tMULTIPLIERS = {\n\t\tm: 60,\n\t\th: 3600,\n\t\td: 86400,\n\t\tmo: 86400 * 28,\n\t\ts: 1\n\t};\n\nfunction durationToSeconds(dur) {\n\tlet seconds = 0;\n\tlet match;\n\n\twhile(match = DUR_MATCH.exec(dur)) { // eslint-disable-line no-cond-assign\n\t\tconst val = parseInt(match[1], 10),\n\t\t\tunit = (match[2] || 's').toLowerCase(),\n\t\t\tmultiplier = MULTIPLIERS[unit] || 1;\n\n\t\tif ( isNaN(val) )\n\t\t\treturn NaN;\n\n\t\tseconds += val * multiplier;\n\t}\n\n\treturn seconds;\n}\n\n\nexport default {\n\tprops: ['value', 'defaults'],\n\n\tcreated() {\n\t\tif ( this.value.duration_rich == null )\n\t\t\tthis.value.duration_rich = this.value.duration;\n\t},\n\n\tmethods: {\n\t\tupdate() {\n\t\t\tthis.value.duration = durationToSeconds(this.value.duration_rich);\n\t\t\tthis.$emit('input', this.value);\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-timeout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-timeout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit-timeout.vue?vue&type=template&id=6aa9e33c&lang=html&\"\nimport script from \"./edit-timeout.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-timeout.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-flex tw-align-items-start\"},[_c('label',{staticClass:\"tw-mg-y-05\",attrs:{\"for\":\"edit_url\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.actions.url', 'URL'))+\"\\n\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-full-width\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.url),expression:\"value.url\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"edit_url\",\"placeholder\":_vm.defaults.url},domProps:{\"value\":(_vm.value.url)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.value, \"url\", $event.target.value)},function($event){return _vm.$emit('input', _vm.value)}]}}),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-text-alt-2 tw-mg-b-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.variables', 'Available Variables: {vars}', {vars: _vm.vars}))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-text-alt-2 tw-mg-b-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.formats', 'Available Formatters: {fmts}', {fmts: _vm.fmts}))+\"\\n\\t\\t\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-url.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-url.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['value', 'defaults', 'vars', 'fmts'],\n}\n\n","import { render, staticRenderFns } from \"./edit-url.vue?vue&type=template&id=241af318&lang=html&\"\nimport script from \"./edit-url.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-url.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function (_h,_vm) {var _c=_vm._c;return _c('span',{class:_vm.props.data.icon,style:({color:_vm.props.color})},[_vm._v(_vm._s(_vm.props.data.text))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./preview-combo.vue?vue&type=template&id=15d376af&functional=true&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  true,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function (_h,_vm) {var _c=_vm._c;return _c('figure',{staticClass:\"mod-icon__image\"},[_c('img',{attrs:{\"src\":_vm.props.data.src}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./preview-emote.vue?vue&type=template&id=7fb1c2c9&functional=true&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  true,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function (_h,_vm) {var _c=_vm._c;return _c('figure',{class:(\"\" + (_vm.props.data.icon||'ffz-i-zreknarf')),style:({color:_vm.props.color})})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./preview-icon.vue?vue&type=template&id=62e02b02&functional=true&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  true,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function (_h,_vm) {var _c=_vm._c;return _c('figure',{staticClass:\"mod-icon__image\"},[_c('img',{attrs:{\"src\":_vm.props.data.image}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./preview-image.vue?vue&type=template&id=3b4f87ef&functional=true&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  true,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function (_h,_vm) {var _c=_vm._c;return _c('span',{style:({color: _vm.props.color})},[_vm._v(_vm._s(_vm.props.data.text))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./preview-text.vue?vue&type=template&id=abde8288&functional=true&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  true,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--action tw-elevation-1 tw-c-background-base tw-border tw-pd-y-05 tw-pd-r-1 tw-mg-y-05 tw-flex tw-flex-nowrap\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex-grow-1\"},[(! _vm.editing)?[_c('h4',[_vm._v(_vm._s(_vm.title))]),_vm._v(\" \"),_c('div',{staticClass:\"description\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.description)+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.canEdit)?_c('div',{staticClass:\"visibility tw-c-text-alt\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.visible', 'visible: {list}', {list: _vm.visibility}))+\"\\n\\t\\t\\t\")]):_vm._e()]:(_vm.copying)?[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.json),expression:\"json\"}],ref:\"json\",staticClass:\"tw-full-width tw-full-height tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-input\",attrs:{\"readonly\":\"\"},domProps:{\"value\":(_vm.json)},on:{\"focus\":function($event){return $event.target.select()},\"input\":function($event){if($event.target.composing){ return; }_vm.json=$event.target.value}}})]:[_c('section',[_c('h5',[_vm._v(_vm._s(_vm.t('setting.actions.appearance', 'Appearance')))]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"tooltip\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.tooltip', 'Custom Tooltip'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.appearance.tooltip),expression:\"edit_data.appearance.tooltip\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05 tw-mg-y-05\",domProps:{\"value\":(_vm.edit_data.appearance.tooltip)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.edit_data.appearance, \"tooltip\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"renderer_type\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.type', 'Type'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.appearance.type),expression:\"edit_data.appearance.type\"}],ref:\"renderer_type\",staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"renderer_type\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.edit_data.appearance, \"type\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.data.renderers),function(r,key){return (_vm.supportsRenderer(key))?_c('option',{key:key,domProps:{\"value\":key}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(r.title_i18n ? _vm.t(r.title_i18n, r.title, r) : r.title)+\"\\n\\t\\t\\t\\t\\t\\t\")]):_vm._e()}),0)]),_vm._v(\" \"),(_vm.renderer && _vm.renderer.colored)?_c('div',{staticClass:\"tw-flex tw-align-items-start\"},[_c('label',{staticClass:\"tw-mg-y-05\",attrs:{\"for\":\"color\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.color', 'Color'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-full-width\"},[_c('color-picker',{attrs:{\"nullable\":true},model:{value:(_vm.edit_data.appearance.color),callback:function ($$v) {_vm.$set(_vm.edit_data.appearance, \"color\", $$v)},expression:\"edit_data.appearance.color\"}}),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-text-alt-2 tw-mg-b-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.color.warn', 'This value will be automatically adjusted for visibility based on your chat color settings.'))+\"\\n\\t\\t\\t\\t\\t\\t\")])],1)]):_vm._e(),_vm._v(\" \"),(_vm.renderer)?_c(_vm.renderer.editor,{tag:\"component\",model:{value:(_vm.edit_data.appearance),callback:function ($$v) {_vm.$set(_vm.edit_data, \"appearance\", $$v)},expression:\"edit_data.appearance\"}}):_vm._e(),_vm._v(\" \"),(_vm.extra_appearance)?_c(_vm.extra_appearance,{tag:\"component\",model:{value:(_vm.edit_data.appearance),callback:function ($$v) {_vm.$set(_vm.edit_data, \"appearance\", $$v)},expression:\"edit_data.appearance\"}}):_vm._e()],1),_vm._v(\" \"),_c('section',{staticClass:\"tw-mg-t-1 tw-border-t tw-pd-t-1\"},[_c('h5',[_vm._v(_vm._s(_vm.t('setting.actions.visibility', 'Visibility')))]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"vis_mod\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.edit-visible.mod', 'Moderator'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.display.mod),expression:\"edit_data.display.mod\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"vis_mod\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.edit_data.display, \"mod\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"selected\":\"\"},domProps:{\"value\":undefined}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.unset', 'Unset'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":true}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.true', 'True'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":false}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.false', 'False'))+\"\\n\\t\\t\\t\\t\\t\\t\")])])]),_vm._v(\" \"),(_vm.mod_icons)?_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"vis_mod_icons\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.edit-visible.mod-icons', 'Mod Icons'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.display.mod_icons),expression:\"edit_data.display.mod_icons\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"vis_mod_icons\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.edit_data.display, \"mod_icons\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"selected\":\"\"},domProps:{\"value\":undefined}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.unset', 'Unset'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":true}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.visible', 'Visible'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":false}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.hidden', 'Hidden'))+\"\\n\\t\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.has_following)?_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"vis_following\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.edit-visible.following', 'Following User'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.display.following),expression:\"edit_data.display.following\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"vis_following\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.edit_data.display, \"following\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"selected\":\"\"},domProps:{\"value\":undefined}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.unset', 'Unset'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":true}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.true', 'True'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":false}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.false', 'False'))+\"\\n\\t\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.has_message)?_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"vis_deleted\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.edit-visible.deleted', 'Message Deleted'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.display.deleted),expression:\"edit_data.display.deleted\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"vis_deleted\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.edit_data.display, \"deleted\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"selected\":\"\"},domProps:{\"value\":undefined}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.unset', 'Unset'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":true}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.true', 'True'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":false}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.false', 'False'))+\"\\n\\t\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.has_mode)?_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"vis_emote\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.edit-visible.emote-only', 'Emote-Only Mode'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.display.emoteOnly),expression:\"edit_data.display.emoteOnly\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"vis_emote\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.edit_data.display, \"emoteOnly\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"selected\":\"\"},domProps:{\"value\":undefined}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.unset', 'Unset'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":true}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.true', 'True'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":false}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.false', 'False'))+\"\\n\\t\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.has_mode)?_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"vis_slow\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.edit-visible.slow', 'Slow Mode'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.display.slowMode),expression:\"edit_data.display.slowMode\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"vis_slow\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.edit_data.display, \"slowMode\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"selected\":\"\"},domProps:{\"value\":undefined}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.unset', 'Unset'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":true}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.true', 'True'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":false}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.false', 'False'))+\"\\n\\t\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.has_mode)?_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"vis_follows\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.edit-visible.follows', 'Follower-Only Mode'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.display.followersOnly),expression:\"edit_data.display.followersOnly\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"vis_subs\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.edit_data.display, \"followersOnly\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"selected\":\"\"},domProps:{\"value\":undefined}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.unset', 'Unset'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":true}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.true', 'True'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":false}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.false', 'False'))+\"\\n\\t\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.has_mode)?_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"vis_subs\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.edit-visible.subs', 'Subs Mode'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.display.subsMode),expression:\"edit_data.display.subsMode\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"vis_subs\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.edit_data.display, \"subsMode\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"selected\":\"\"},domProps:{\"value\":undefined}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.unset', 'Unset'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":true}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.true', 'True'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":false}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.false', 'False'))+\"\\n\\t\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.has_mode)?_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"vis_r9k\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.edit-visible.r9k', 'R9k Mode'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.display.r9kMode),expression:\"edit_data.display.r9kMode\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"vis_r9k\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.edit_data.display, \"r9kMode\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"selected\":\"\"},domProps:{\"value\":undefined}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.unset', 'Unset'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":true}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.true', 'True'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":false}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.false', 'False'))+\"\\n\\t\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.has_modifiers)?_c('div',{staticClass:\"tw-flex tw-align-items-start\"},[_c('label',{attrs:{\"for\":\"vis_modifiers\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.edit-visible.modifier', 'Modifiers'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"ffz--inline tw-flex\"},[_c('div',{staticClass:\"tw-pd-r-1 ffz-checkbox\"},[_c('input',{ref:\"key_ctrl\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":'key_ctrl$' + _vm.id,\"type\":\"checkbox\"},domProps:{\"checked\":_vm.edit_data.display.keys & 1},on:{\"change\":_vm.onChangeKeys}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":'key_ctrl$' + _vm.id}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.key.ctrl', 'Ctrl'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-r-1 ffz-checkbox\"},[_c('input',{ref:\"key_shift\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":'key_shift$' + _vm.id,\"type\":\"checkbox\"},domProps:{\"checked\":_vm.edit_data.display.keys & 2},on:{\"change\":_vm.onChangeKeys}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":'key_shift$' + _vm.id}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.key.shift', 'Shift'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-r-1 ffz-checkbox\"},[_c('input',{ref:\"key_alt\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":'key_alt$' + _vm.id,\"type\":\"checkbox\"},domProps:{\"checked\":_vm.edit_data.display.keys & 4},on:{\"change\":_vm.onChangeKeys}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":'key_alt$' + _vm.id}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.key.alt', 'Alt'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-r-1 ffz-checkbox\"},[_c('input',{ref:\"key_meta\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":'key_meta$' + _vm.id,\"type\":\"checkbox\"},domProps:{\"checked\":_vm.edit_data.display.keys & 8},on:{\"change\":_vm.onChangeKeys}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":'key_meta$' + _vm.id}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.key.meta', 'Meta'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\")])])]),_vm._v(\" \"),(_vm.has_hover_modifier)?_c('div',{staticClass:\"tw-pd-r-1 ffz-checkbox\"},[_c('input',{ref:\"key_hover\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":'key_hover$' + _vm.id,\"type\":\"checkbox\"},domProps:{\"checked\":_vm.edit_data.display.hover},on:{\"change\":_vm.onChangeKeys}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":'key_hover$' + _vm.id}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.key.hover', 'Hover'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\")])])]):_vm._e()])])]):_vm._e()]),_vm._v(\" \"),_c('section',{staticClass:\"tw-mg-t-1 tw-border-t tw-pd-t-1\"},[_c('h5',[_vm._v(_vm._s(_vm.t('setting.actions.action', 'Action')))]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"action_type\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.type', 'Type'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.action),expression:\"edit_data.action\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-y-05\",attrs:{\"id\":\"action_type\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.edit_data, \"action\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.data.actions),function(a,key){return _c('option',{key:key,domProps:{\"value\":key}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t(a.title_i18n || (\"chat.actions.\" + key), a.title, a))+\"\\n\\t\\t\\t\\t\\t\\t\")])}),0)]),_vm._v(\" \"),(_vm.action_def && _vm.action_def.editor)?_c(_vm.action_def.editor,{tag:\"component\",attrs:{\"value\":_vm.edit_data.options,\"defaults\":_vm.action_def.defaults,\"vars\":_vm.vars,\"fmts\":_vm.fmts},on:{\"input\":function($event){return _vm.onChangeAction($event)}}}):_vm._e()],1)]],2),_vm._v(\" \"),(_vm.canPreview)?_c('div',{staticClass:\"tw-mg-l-1 tw-border-l tw-pd-l-1 tw-pd-y-05 tw-flex tw-flex-shrink-0 tw-align-items-start\"},[_c('action-preview',{attrs:{\"act\":_vm.maybeDynamic(_vm.display),\"process-color\":_vm.data.color,\"renderers\":_vm.data.renderers}})],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-l-1 tw-border-l tw-pd-l-1 tw-flex tw-flex-wrap tw-flex-column tw-justify-content-start tw-align-items-start\"},[(_vm.copying)?[_c('button',{staticClass:\"tw-button tw-button--text\",on:{\"click\":function($event){_vm.copying = false}}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.cancel', 'Cancel'))+\"\\n\\t\\t\\t\\t\")])])]:_vm._e(),_vm._v(\" \"),(_vm.editing && ! _vm.copying)?[_c('button',{staticClass:\"tw-button tw-button--text\",on:{\"click\":_vm.save}},[_c('span',{staticClass:\"tw-button__text ffz-i-floppy\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.save', 'Save'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text\",on:{\"click\":_vm.cancel}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.cancel', 'Cancel'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text\",on:{\"click\":_vm.prepareCopy}},[_c('span',{staticClass:\"tw-button__text ffz-i-docs\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.copy-json', 'Copy'))+\"\\n\\t\\t\\t\\t\")])])]:(_vm.deleting && ! _vm.copying)?[_c('button',{staticClass:\"tw-button tw-button--text\",on:{\"click\":function($event){return _vm.$emit('remove', _vm.action)}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text\",on:{\"click\":function($event){_vm.deleting = false}}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.cancel', 'Cancel'))+\"\\n\\t\\t\\t\\t\")])])]:(! _vm.copying)?[(_vm.canEdit)?_c('button',{staticClass:\"tw-button tw-button--text\",on:{\"click\":_vm.edit}},[_c('span',{staticClass:\"tw-button__text ffz-i-cog\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.edit', 'Edit'))+\"\\n\\t\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text\",on:{\"click\":function($event){_vm.deleting = true}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\\t\")])])]:_vm._e()],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-flex tw-flex-shrink-0 tw-align-items-start handle tw-pd-x-05 tw-pd-t-1 tw-pd-b-05\"},[_c('span',{staticClass:\"ffz-i-ellipsis-vert\"})])}]\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {has, maybe_call, deep_copy} from 'utilities/object';\n\nlet id = 0;\n\nexport default {\n\tprops: ['vuectx', 'action', 'data', 'inline', 'mod_icons', 'extra_appearance', 'context', 'modifiers', 'hover_modifier'],\n\n\tdata() {\n\t\treturn {\n\t\t\tid: id++,\n\t\t\tcopying: false,\n\t\t\tdeleting: false,\n\t\t\tediting: false,\n\t\t\tedit_data: null\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tjson() {\n\t\t\treturn JSON.stringify(this.display)\n\t\t},\n\n\t\tdisplay() {\n\t\t\tif ( this.editing )\n\t\t\t\treturn this.edit_data;\n\n\t\t\treturn this.action.v;\n\t\t},\n\n\t\thas_message() {\n\t\t\treturn this.context && this.context.includes('message')\n\t\t},\n\n\t\thas_following() {\n\t\t\treturn this.context && this.context.includes('following')\n\t\t},\n\n\t\thas_mode() {\n\t\t\treturn this.context && this.context.includes('room-mode')\n\t\t},\n\n\t\thas_modifiers() {\n\t\t\treturn this.modifiers\n\t\t},\n\n\t\thas_hover_modifier() {\n\t\t\treturn this.hover_modifier !== false\n\t\t},\n\n\t\tfmts() {\n\t\t\tconst out = [];\n\n\t\t\tout.push('word(start)');\n\t\t\tout.push('word(start,end)');\n\t\t\tout.push('upper');\n\t\t\tout.push('lower');\n\t\t\tout.push('snakecase');\n\t\t\tout.push('slugify');\n\t\t\tout.push('slugify(separator)');\n\t\t\tout.push('urlencode');\n\n\t\t\treturn out.join(', ');\n\t\t},\n\n\t\tvars() {\n\t\t\tconst out = [],\n\t\t\t\tctx = this.context || [];\n\n\t\t\tif ( ctx.includes('user') ) {\n\t\t\t\tout.push('user.login');\n\t\t\t\tout.push('user.displayName');\n\t\t\t\tout.push('user.id');\n\t\t\t\tout.push('user.type');\n\t\t\t}\n\n\t\t\tif ( ctx.includes('room') ) {\n\t\t\t\tout.push('room.login');\n\t\t\t\tout.push('room.id');\n\t\t\t}\n\n\t\t\tif ( ctx.includes('message') ) {\n\t\t\t\tout.push('message.id');\n\t\t\t\tout.push('message.text');\n\t\t\t}\n\n\t\t\treturn out.map(x => `{{${x}}}`).join(', ');\n\t\t},\n\n\t\trenderer() {\n\t\t\treturn this.canPreview && this.data.renderers[this.display.appearance.type];\n\t\t},\n\n\t\taction_def() {\n\t\t\treturn this.display && this.data.actions[this.display.action];\n\t\t},\n\n\t\tcanEdit() {\n\t\t\treturn this.action.v != null && ! this.action.v.type;\n\t\t},\n\n\t\tcanPreview() {\n\t\t\treturn this.display && this.display.appearance;\n\t\t},\n\n\t\ttitle() {\n\t\t\tif ( this.action.t === 'inherit' )\n\t\t\t\treturn this.t('setting.inheritance', 'Inheritance Point');\n\n\t\t\tif ( this.action.t === 'skip' )\n\t\t\t\treturn this.t('setting.inheritance.skip', 'Not Inheriting');\n\n\t\t\telse if ( ! this.display )\n\t\t\t\treturn this.t('setting.unknown', 'Unknown Value');\n\n\t\t\tconst type = this.display.type;\n\n\t\t\tif ( type === 'new-line' )\n\t\t\t\treturn this.t('setting.new-line', 'New Line');\n\n\t\t\telse if ( type === 'space-small' )\n\t\t\t\treturn this.t('setting.space-small', 'Space (Small)');\n\n\t\t\telse if ( type === 'space' )\n\t\t\t\treturn this.t('setting.space', 'Space');\n\n\t\t\tconst def = this.data.actions[this.display.action];\n\t\t\tif ( ! def )\n\t\t\t\treturn this.t('setting.actions.unknown', 'Unknown Action Type: {action}', this.display);\n\n\t\t\tif ( def.title ) {\n\t\t\t\tconst data = this.getData(),\n\t\t\t\t\tout = maybe_call(def.title, this, data, def);\n\t\t\t\tlet i18n = maybe_call(def.title_i18n, this, data, def);\n\t\t\t\tif ( i18n === undefined )\n\t\t\t\t\ti18n = `chat.actions.${this.display.action}`;\n\n\t\t\t\tif ( out && i18n )\n\t\t\t\t\treturn this.t(i18n, out, data);\n\t\t\t\telse if ( out )\n\t\t\t\t\treturn out;\n\t\t\t}\n\n\t\t\treturn this.t('setting.actions.untitled', 'Action: {action}', this.display);\n\n\t\t},\n\n\t\tdescription() {\n\t\t\tif ( this.action.t === 'inherit' )\n\t\t\t\treturn this.t('setting.inheritance.desc', 'Inherit values from lower priority profiles or the default values at this position.');\n\n\t\t\tif ( this.action.t === 'skip' )\n\t\t\t\treturn this.t('setting.inheritance.skip.desc', 'This profile does not inherit values from lower priority profiles or the default values, despite having no values of its own.');\n\n\t\t\tconst type = this.display && this.display.type;\n\n\t\t\tif ( type === 'new-line' )\n\t\t\t\treturn this.t('setting.new-line.desc', 'Place all items following this on a new line.');\n\n\t\t\telse if ( type === 'space-small' )\n\t\t\t\treturn this.t('setting.space-small.desc', 'Place a small space between the previous item and the next item.');\n\n\t\t\telse if ( type === 'space' )\n\t\t\t\treturn this.t('setting.space.desc', 'Place as large a space as possible between the previous item and the next item.');\n\n\t\t\tconst def = this.display && this.data.actions[this.display.action];\n\t\t\tif ( ! def || ! def.description )\n\t\t\t\treturn null;\n\n\t\t\tconst data = this.getData(),\n\t\t\t\tout = maybe_call(def.description, this, data, def);\n\t\t\tlet i18n = maybe_call(def.description_i18n, this, data, def);\n\t\t\tif ( i18n === undefined )\n\t\t\t\ti18n = `chat.actions.${this.display.action}.desc`;\n\n\t\t\tif ( out && i18n )\n\t\t\t\treturn this.t(i18n, out, data);\n\t\t\telse if ( out )\n\t\t\t\treturn out;\n\n\t\t\treturn null;\n\t\t},\n\n\t\tvisibility() {\n\t\t\tif ( ! this.display || ! this.display.appearance )\n\t\t\t\treturn;\n\n\t\t\tconst disp = this.display.display || {},\n\t\t\t\tout = [];\n\n\t\t\tif ( disp.disable )\n\t\t\t\treturn this.t('setting.actions.visible.never', 'never');\n\n\t\t\tif ( disp.following === true )\n\t\t\t\tout.push(this.t('setting.actions.visible.following', 'when following user'));\n\n\t\t\telse if ( disp.following === false )\n\t\t\t\tout.push(this.t('setting.actions.visible.unfollowing', 'when not following user'));\n\n\t\t\tif ( disp.mod === true )\n\t\t\t\tout.push(this.t('setting.actions.visible.mod', 'when moderator'));\n\n\t\t\telse if ( disp.mod === false )\n\t\t\t\tout.push(this.t('setting.actions.visible.unmod', 'when not moderator'));\n\n\t\t\tif ( disp.mod_icons === true )\n\t\t\t\tout.push(this.t('setting.actions.visible.mod_icons', 'when mod icons are shown'));\n\n\t\t\telse if ( disp.mod_icons === false )\n\t\t\t\tout.push(this.t('setting.actions.visible.mod_icons_off', 'when mod icons are hidden'));\n\n\t\t\tif ( disp.staff === true )\n\t\t\t\tout.push(this.t('setting.actions.visible.staff', 'when staff'));\n\n\t\t\telse if ( disp.staff === false )\n\t\t\t\tout.push(this.t('setting.actions.visible.unstaff', 'when not staff'));\n\n\t\t\tif ( disp.deleted === true )\n\t\t\t\tout.push(this.t('setting.actions.visible.deleted', 'if message deleted'));\n\n\t\t\telse if ( disp.deleted === false )\n\t\t\t\tout.push(this.t('setting.actions.visible.undeleted', 'if message not deleted'));\n\n\t\t\tif ( this.has_mode ) {\n\t\t\t\tif ( disp.emoteOnly === true )\n\t\t\t\t\tout.push(this.t('setting.actions.visible.emote-only', 'when emote-only mode'));\n\t\t\t\telse if ( disp.emoteOnly === false )\n\t\t\t\t\tout.push(this.t('setting.actions.visible.no-emote', 'when not emote-only mode'));\n\n\t\t\t\tif ( disp.slowMode === true )\n\t\t\t\t\tout.push(this.t('setting.actions.visible.slow', 'when slow mode'));\n\t\t\t\telse if ( disp.slowMode === false )\n\t\t\t\t\tout.push(this.t('setting.actions.visible.no-slow', 'when not slow mode'));\n\n\t\t\t\tif ( disp.subsMode === true )\n\t\t\t\t\tout.push(this.t('setting.actions.visible.subs', 'when subs mode'));\n\t\t\t\telse if ( disp.subsMode === false )\n\t\t\t\t\tout.push(this.t('setting.actions.visible.no-subs', 'when not subs mode'));\n\n\t\t\t\tif ( disp.r9kMode === true )\n\t\t\t\t\tout.push(this.t('setting.actions.visible.r9k', 'when r9k mode'));\n\t\t\t\telse if ( disp.r9kMode === false )\n\t\t\t\t\tout.push(this.t('setting.actions.visible.no-r9k', 'when not r9k mode'));\n\n\t\t\t\tif ( disp.followersOnly === true )\n\t\t\t\t\tout.push(this.t('setting.actions.visible.followers', 'when followers-only mode'));\n\t\t\t\telse if ( disp.followersOnly === false )\n\t\t\t\t\tout.push(this.t('setting.actions.visible.no-followers', 'when not followers-only mode'));\n\t\t\t}\n\n\t\t\tif ( disp.keys ) {\n\t\t\t\tconst key_out = [];\n\t\t\t\tif ( disp.keys & 1 )\n\t\t\t\t\tkey_out.push(this.t('setting.key.ctrl', 'Ctrl'));\n\t\t\t\tif ( disp.keys & 2 )\n\t\t\t\t\tkey_out.push(this.t('setting.key.shift', 'Shift'));\n\t\t\t\tif ( disp.keys & 4 )\n\t\t\t\t\tkey_out.push(this.t('setting.key.alt', 'Alt'));\n\t\t\t\tif ( disp.keys & 8 )\n\t\t\t\t\tkey_out.push(this.t('setting.key.meta', 'Meta'));\n\n\t\t\t\tif ( key_out.length )\n\t\t\t\t\tout.push(this.t('setting.actions.visible.modifier', 'when {key_list} {keys, plural, one {is} other {are}} held', {\n\t\t\t\t\t\tkey_list: key_out.join(' + '),\n\t\t\t\t\t\tkeys: key_out.length\n\t\t\t\t\t}));\n\t\t\t}\n\n\t\t\tif ( this.has_hover_modifier && disp.hover )\n\t\t\t\tout.push(this.t('setting.actions.visible.hover', 'when hovering'));\n\n\t\t\tif ( ! out.length )\n\t\t\t\treturn this.t('setting.actions.visible.always', 'always');\n\n\t\t\treturn out.join(', ');\n\t\t}\n\t},\n\n\tmethods: {\n\t\tonChangeAction(val) {\n\t\t\tfor(const key in val)\n\t\t\t\tif ( has(val, key) ) {\n\t\t\t\t\tconst v = val[key];\n\t\t\t\t\tif ( typeof v === 'string' && ! v.length )\n\t\t\t\t\t\tdelete val[key];\n\t\t\t\t}\n\n\t\t\tthis.edit_data.options = val;\n\t\t},\n\n\t\tonChangeKeys() {\n\t\t\tif ( ! this.editing )\n\t\t\t\treturn;\n\n\t\t\tlet i = 0;\n\t\t\tif ( this.$refs.key_ctrl.checked )\n\t\t\t\ti |= 1;\n\t\t\tif ( this.$refs.key_shift.checked )\n\t\t\t\ti |= 2;\n\t\t\tif ( this.$refs.key_alt.checked )\n\t\t\t\ti |= 4;\n\t\t\tif ( this.$refs.key_meta.checked )\n\t\t\t\ti |= 8;\n\n\t\t\tthis.edit_data.display.keys = i;\n\n\t\t\tif ( this.has_hover_modifier )\n\t\t\t\tthis.edit_data.display.hover = this.$refs.key_hover.checked;\n\t\t},\n\n\t\tedit() {\n\t\t\tif ( ! this.canEdit )\n\t\t\t\treturn;\n\n\t\t\tthis.editing = true;\n\t\t\tthis.edit_data = deep_copy(this.action.v);\n\n\t\t\tif ( ! this.edit_data.options )\n\t\t\t\tthis.edit_data.options = {};\n\n\t\t\tif ( ! this.edit_data.display )\n\t\t\t\tthis.edit_data.display = {};\n\n\t\t\tif ( ! this.edit_data.appearance )\n\t\t\t\tthis.edit_data.appearance = {};\n\t\t},\n\n\t\tsave() {\n\t\t\tthis.$emit('save', this.edit_data);\n\t\t\tthis.cancel();\n\t\t},\n\n\t\tprepareCopy() {\n\t\t\tthis.copying = true;\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tthis.$refs.json.focus();\n\t\t\t});\n\t\t},\n\n\t\tcancel() {\n\t\t\tthis.copying = false;\n\t\t\tthis.editing = false;\n\t\t\tthis.edit_data = null;\n\t\t},\n\n\t\tmaybeDynamic(data) {\n\t\t\tlet ap = data.appearance;\n\t\t\tif (ap?.type === 'dynamic') {\n\t\t\t\tconst act = this.action_def,\n\t\t\t\t\tffz = this.vuectx.getFFZ(),\n\t\t\t\t\tactions = ffz && ffz.resolve('chat.actions');\n\n\t\t\t\tconst out = actions && act?.dynamicAppearance && act.dynamicAppearance\n\t\t\t\t\t.call(actions, deep_copy(ap), data, null, null, null, null);\n\t\t\t\tif ( out )\n\t\t\t\t\treturn Object.assign({}, data, {appearance: out});\n\t\t\t}\n\n\t\t\treturn data;\n\t\t},\n\n\t\tsupportsRenderer(key) {\n\t\t\tif (key !== 'dynamic')\n\t\t\t\treturn true;\n\n\t\t\treturn this.action_def?.supports_dynamic;\n\t\t},\n\n\t\tgetData() {\n\t\t\tconst def = this.display && this.data.actions[this.display.action];\n\t\t\tif ( ! def )\n\t\t\t\treturn;\n\n\t\t\treturn Object.assign({}, this.display, {\n\t\t\t\toptions: Object.assign({}, def && def.defaults, this.display.options)\n\t\t\t})\n\t\t}\n\t}\n\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./action-editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./action-editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./action-editor.vue?vue&type=template&id=40cbf001&lang=html&\"\nimport script from \"./action-editor.vue?vue&type=script&lang=js&\"\nexport * from \"./action-editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mod-icon ffz-mod-icon tw-c-text-alt-2 tw-font-size-4\",class:{'ffz-tooltip': _vm.tooltip, 'tw-pd-05': _vm.pad, 'colored': _vm.color && _vm.color.length > 0},attrs:{\"data-action\":_vm.act.action,\"data-options\":_vm.act.options ? JSON.stringify(_vm.act.options) : null,\"data-tip\":_vm.act.appearance.tooltip,\"data-tooltip-type\":\"action\"}},[(_vm.renderer && _vm.renderer.component)?_c(_vm.renderer.component,{tag:\"component\",attrs:{\"data\":_vm.act.appearance,\"color\":_vm.color}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./action-preview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./action-preview.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['act', 'process-color', 'tooltip', 'pad', 'renderers'],\n\n\tcomputed: {\n\t\tcolor() {\n\t\t\treturn this['processColor'](this.act.appearance.color);\n\t\t},\n\n\t\trenderer() {\n\t\t\treturn this.renderers[this.act.appearance.type]\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./action-preview.vue?vue&type=template&id=1b19e31a&lang=html&\"\nimport script from \"./action-preview.vue?vue&type=script&lang=js&\"\nexport * from \"./action-preview.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--addons tw-border-t tw-pd-y-1\"},[(_vm.reload)?_c('div',{staticClass:\"tw-mg-y-1 tw-c-background-accent tw-c-text-overlay tw-pd-1\"},[_c('h4',{staticClass:\"ffz-i-attention\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('addon.refresh-needed', 'You must refresh your Twitch pages for some changes to take effect.'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text tw-c-text-overlay tw-mg-t-05\",on:{\"click\":function($event){return _vm.item.refresh()}}},[_vm._m(0),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.refresh', 'Refresh'))+\"\\n\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.ready)?_c('div',{staticClass:\"tw-mg-b-1 tw-flex tw-align-items-center\"},[_c('div',{staticClass:\"ffz-checkbox tw-relative tw-flex-grow-1\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filter_enabled),expression:\"filter_enabled\"}],staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"filter_enabled\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.filter_enabled)?_vm._i(_vm.filter_enabled,null)>-1:(_vm.filter_enabled)},on:{\"change\":function($event){var $$a=_vm.filter_enabled,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.filter_enabled=$$a.concat([$$v]))}else{$$i>-1&&(_vm.filter_enabled=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.filter_enabled=$$c}}}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"filter_enabled\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.filter-enabled', 'Only display enabled add-ons.'))+\"\\n\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sort_by),expression:\"sort_by\"}],staticClass:\"tw-border-radius-medium tw-font-size-6 ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-x-05\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.sort_by=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{domProps:{\"value\":0}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.sort-name', 'Sort By: Name'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":1}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.sort-update', 'Sort By: Updated'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":2}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.sort-create', 'Sort By: Created'))+\"\\n\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(! _vm.ready)?_c('div',{staticClass:\"tw-align-center tw-pd-1\"},[_c('h1',{staticClass:\"tw-mg-5 ffz-i-zreknarf loading\"})]):_c('div',_vm._l((_vm.visible_addons),function(addon){return _c('addon',{key:addon.id,attrs:{\"id\":addon.id,\"addon\":addon,\"item\":_vm.item,\"context\":_vm.context},on:{\"navigate\":_vm.navigate,\"change-item\":_vm.changeItem}})}),1),_vm._v(\" \"),(_vm.ready && _vm.visible_addons.length !== _vm.listed_addons.length)?_c('div',{staticClass:\"tw-align-center tw-pd-1\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('addon.displaying', 'Displaying {visible, number} of {total, plural, one {# add-on} other {# add-ons} }.', {\n\t\t\tvisible: _vm.visible_addons.length,\n\t\t\ttotal: _vm.listed_addons.length\n\t\t}))+\"\\n\\t\\t\"),(_vm.filter)?[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('addon.displaying.filtered', 'The visible add-ons are being filtered by your search. Clear it to view all available add-ons.'))+\"\\n\\t\\t\")]:_vm._e()],2):_vm._e(),_vm._v(\" \"),(_vm.visible_unlisted)?_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('div',{staticClass:\"tw-flex-grow-1\"}),_vm._v(\" \"),_c('div',{directives:[{name:\"on-clickaway\",rawName:\"v-on-clickaway\",value:(_vm.closeUnlisted),expression:\"closeUnlisted\"}],staticClass:\"tw-relative\"},[_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text\",on:{\"click\":_vm.toggleUnlisted}},[_c('span',{staticClass:\"tw-button__text ffz-i-help\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.unlisted.add', 'Add Unlisted...'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),(_vm.unlisted_open)?_c('balloon',{attrs:{\"color\":\"background-alt-2\",\"dir\":\"up-right\",\"size\":\"md\"}},[_c('div',{staticClass:\"tw-pd-1\"},[_c('div',{staticClass:\"tw-pd-b-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.unlisted.explain', \"Unlisted Add-Ons are add-ons that have undergone approval but have opted to avoid being listed in the main listing. This could be due to the add-on being specialized for certain users, or due to the add-on being still under development. If you know an unlisted add-on's ID, enter it here for it to be displayed.\"))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('input',{ref:\"unlisted\",staticClass:\"tw-flex-grow-1 tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-input\",attrs:{\"placeholder\":_vm.t('addon.unlisted.id', 'add-on id')},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.addUnlisted.apply(null, arguments)}}}),_vm._v(\" \"),_c('button',{staticClass:\"tw-mg-l-05 tw-button\",on:{\"click\":_vm.addUnlisted}},[_c('span',{staticClass:\"tw-button__text ffz-i-plus\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.add', 'Add'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\")])])])])]):_vm._e()],1)]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-arrows-cw\"})])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./addon-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./addon-list.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: ['item', 'context', 'filter'],\n\n\tdata() {\n\t\treturn {\n\t\t\tready: this.item.isReady(),\n\t\t\treload: this.item.isReloadRequired(),\n\t\t\tunlisted: [],\n\t\t\tfilter_enabled: false,\n\t\t\tsort_by: 0,\n\t\t\tunlisted_open: false\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tvisible_unlisted() {\n\t\t\treturn this.visible_addons.length !== this.sorted_addons.length\n\t\t},\n\n\t\tvisible_addons() {\n\t\t\treturn this.sorted_addons.filter(addon => this.shouldShow(addon));\n\t\t},\n\n\t\tlisted_addons() {\n\t\t\treturn this.sorted_addons.filter(addon => ! addon.unlisted)\n\t\t},\n\n\t\tsorted_addons() {\n\t\t\tconst addons = this.item.getAddons();\n\n\t\t\taddons.sort((a, b) => {\n\t\t\t\tif ( this.sort_by === 1 ) {\n\t\t\t\t\tif ( a.updated > b.updated ) return -1;\n\t\t\t\t\tif ( b.updated > a.updated ) return 1;\n\n\t\t\t\t} else if ( this.sort_by === 2 ) {\n\t\t\t\t\tif ( a.created > b.created ) return -1;\n\t\t\t\t\tif ( b.created > a.created ) return 1;\n\t\t\t\t}\n\n\t\t\t\tif ( a.sort < b.sort ) return -1;\n\t\t\t\tif ( b.sort < a.sort ) return 1;\n\n\t\t\t\tconst a_n = (a.name ?? a.id).toLowerCase(),\n\t\t\t\t\tb_n = (b.name ?? b.id).toLowerCase();\n\n\t\t\t\tif ( a_n < b_n ) return -1;\n\t\t\t\tif ( b_n < a_n ) return 1;\n\t\t\t\treturn 0;\n\t\t\t});\n\n\t\t\treturn addons;\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.item.on(':ready', this.onReady, this);\n\t\tthis.item.on(':added', this.onAdded, this);\n\t\tthis.item.on(':reload-required', this.onReload, this);\n\t},\n\n\tdestroyed() {\n\t\tthis.item.off(':ready', this.onReady, this);\n\t\tthis.item.off(':added', this.onAdded, this);\n\t\tthis.item.off(':reload-required', this.onReload, this);\n\t},\n\n\tmethods: {\n\t\taddUnlisted() {\n\t\t\tlet value = this.$refs.unlisted.value;\n\t\t\tif ( value )\n\t\t\t\tvalue = value.trim().toLowerCase();\n\n\t\t\tif ( value && value.length )\n\t\t\t\tfor(const addon of this.item.getAddons())\n\t\t\t\t\tif ( addon.unlisted && (addon.id === value || (addon.short_name && addon.short_name.toLowerCase() === value) || (addon.name && addon.name.toLowerCase() === value)) )\n\t\t\t\t\t\tthis.unlisted.push(addon.id);\n\n\t\t\tthis.$refs.unlisted.value = '';\n\t\t\tthis.closeUnlisted();\n\t\t},\n\n\t\tcloseUnlisted() {\n\t\t\tthis.unlisted_open = false;\n\t\t},\n\n\t\ttoggleUnlisted() {\n\t\t\tthis.unlisted_open = ! this.unlisted_open;\n\t\t},\n\n\t\tshouldShow(addon) {\n\t\t\t// If an add-on is unlisted, don't list it.\n\t\t\tconst enabled = this.item.isAddonEnabled(addon.id);\n\t\t\tif ( addon.unlisted && ! enabled && ! this.unlisted.includes(addon.id) )\n\t\t\t\treturn false;\n\n\t\t\tif ( this.filter_enabled && ! enabled )\n\t\t\t\treturn false;\n\n\t\t\tif ( this.filter ) {\n\t\t\t\tif ( this.filter.query ) {\n\t\t\t\t\tif ( ! addon.search_terms || ! addon.search_terms.includes(this.filter.query) )\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tonAdded() {\n\t\t\tthis.$forceUpdate();\n\t\t},\n\n\t\tonReady() {\n\t\t\tthis.ready = true;\n\t\t},\n\n\t\tonReload() {\n\t\t\tthis.reload = true;\n\t\t},\n\n\t\tnavigate(...args) {\n\t\t\tthis.$emit('navigate', ...args);\n\t\t},\n\n\t\tchangeItem(...args) {\n\t\t\tthis.$emit('change-item', ...args);\n\t\t}\n\t}\n}\n","import { render, staticRenderFns } from \"./addon-list.vue?vue&type=template&id=8dbcfd68&lang=html&\"\nimport script from \"./addon-list.vue?vue&type=script&lang=js&\"\nexport * from \"./addon-list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--addon-info tw-elevation-1 tw-c-background-base tw-border tw-border-radius-large tw-pd-1 tw-mg-b-1 tw-flex tw-flex-nowrap\"},[_c('div',{staticClass:\"tw-flex tw-flex-column tw-align-center tw-flex-shrink-0 tw-mg-r-1\"},[_c('div',{staticClass:\"ffz-card-img--size-6 tw-overflow-hidden tw-mg-b-1\"},[_c('img',{staticClass:\"tw-image\",attrs:{\"src\":_vm.icon}})]),_vm._v(\" \"),(_vm.reloading)?_c('div',{staticClass:\"tw-mg-b-05 ffz-pill\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('addon.reloading', 'Reloading'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.external)?_c('div',{staticClass:\"tw-mg-b-05 ffz-pill\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('addon.external', 'External'))+\"\\n\\t\\t\")]):(_vm.enabled)?_c('div',{staticClass:\"tw-mg-b-05 ffz-pill ffz--pill-enabled\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('addon.enabled', 'Enabled'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.addon.dev)?_c('div',{staticClass:\"tw-mg-b-05 ffz-pill\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('addon.dev', 'Developer'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.addon.unlisted)?_c('div',{staticClass:\"tw-mg-b-05 ffz-pill\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('addon.unlisted', 'Unlisted'))+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex-grow-1\"},[_c('div',{staticClass:\"tw-border-b tw-mg-b-05\"},[_c('h4',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.addon.name_i18n ? _vm.t(_vm.addon.name_i18n, _vm.addon.name) : _vm.addon.name)+\"\\n\\t\\t\\t\\t\"),(_vm.addon.dev || _vm.addon.unlisted )?_c('span',{staticClass:\"tw-c-text-alt-2 tw-font-size-6\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t(\"+_vm._s(_vm.addon.id)+\")\\n\\t\\t\\t\\t\")]):_vm._e()]),_vm._v(\" \"),(_vm.addon.author)?_c('span',{staticClass:\"tw-c-text-alt tw-mg-r-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.author', 'By: {author}', {\n\t\t\t\t\tauthor: _vm.addon.author_i18n ? _vm.t(_vm.addon.author_i18n, _vm.addon.author) : _vm.addon.author\n\t\t\t\t}))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.maintainer)?_c('span',{staticClass:\"tw-c-text-alt tw-mg-r-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.maintainer', 'Maintainer: {maintainer}', {\n\t\t\t\t\tmaintainer: _vm.maintainer\n\t\t\t\t}))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.version)?_c('span',{staticClass:\"tw-c-text-alt tw-mg-r-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.version', 'Version {version}', {version: _vm.version}))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.addon.updated && _vm.addon.updated != _vm.addon.created)?_c('span',{staticClass:\"tw-c-text-alt ffz-tooltip tw-mg-r-1\",attrs:{\"data-title\":_vm.tDateTime(_vm.addon.updated)}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.updated', 'Updated: {when,humantime}', {when: _vm.addon.updated}))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.addon.created)?_c('span',{staticClass:\"tw-c-text-alt ffz-tooltip tw-mg-r-1\",attrs:{\"data-title\":_vm.tDateTime(_vm.addon.created)}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.created', 'Created: {when,date}', {when: _vm.addon.created}))+\"\\n\\t\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('markdown',{attrs:{\"source\":_vm.show_description}}),_vm._v(\" \"),(_vm.multi_line)?_c('a',{staticClass:\"tw-c-text-alt-2\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.toggle.apply(null, arguments)}}},[(_vm.expanded)?[_vm._v(_vm._s(_vm.t('addon.show-less', '(Show Less)')))]:[_vm._v(_vm._s(_vm.t('addon.show-more', '(Show More)')))]],2):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-t-1 tw-pd-t-1 tw-border-t\"},[(_vm.enabled)?[(_vm.external)?_c('button',{staticClass:\"tw-button ffz-button--hollow tw-button--disabled ffz-il-tooltip__container tw-mg-r-1\",attrs:{\"disabled\":\"\"}},[_vm._m(0),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.disable', 'Disable'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--up ffz-il-tooltip--align-left\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.external.description', 'This add-on has been loaded by an external script and cannot be disabled here.'))+\"\\n\\t\\t\\t\\t\\t\")])]):_c('button',{staticClass:\"tw-button ffz--button-disable tw-mg-r-1\",on:{\"click\":function($event){return _vm.item.disableAddon(_vm.id)}}},[_vm._m(1),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.disable', 'Disable'))+\"\\n\\t\\t\\t\\t\\t\")])]),_vm._v(\" \"),(_vm.addon.dev && _vm.can_reload)?_c('button',{staticClass:\"tw-button ffz-button--hollow tw-mg-r-1\",class:{'tw-button--disabled': _vm.reloading},attrs:{\"disabled\":_vm.reloading},on:{\"click\":function($event){return _vm.reloadAddon()}}},[_vm._m(2),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.reload', 'Reload'))+\"\\n\\t\\t\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.addon.settings)?_c('button',{staticClass:\"tw-button ffz-button--hollow tw-mg-r-1\",on:{\"click\":function($event){return _vm.openSettings()}}},[_vm._m(3),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.settings', 'Settings'))+\"\\n\\t\\t\\t\\t\\t\")])]):_vm._e()]:[_c('button',{staticClass:\"tw-button ffz--button-enable tw-mg-r-1\",on:{\"click\":function($event){return _vm.item.enableAddon(_vm.id)}}},[_vm._m(4),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.enable', 'Enable'))+\"\\n\\t\\t\\t\\t\\t\")])])],_vm._v(\" \"),(! _vm.external)?_c('button',{staticClass:\"tw-button ffz-button--hollow tw-mg-r-1\",on:{\"click\":_vm.openChangelog}},[_vm._m(5),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.changelog', 'Changelog'))+\"\\n\\t\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.addon.website)?_c('a',{staticClass:\"tw-button ffz-button--hollow tw-mg-r-1 ffz-tooltip ffz-tooltip--no-mouse\",attrs:{\"href\":_vm.addon.website,\"title\":_vm.addon.website,\"data-tooltip-type\":\"link\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._m(6),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.website', 'Website'))+\"\\n\\t\\t\\t\\t\")])]):_vm._e()],2)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-trash\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-trash\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-arrows-cw\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-cog\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-download\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-doc-text\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-link-ext\"})])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./addon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./addon.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['id', 'addon', 'item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tenabled: this.item.isAddonEnabled(this.id),\n\t\t\tcan_reload: this.addon.dev && this.item.canReloadAddon(this.id),\n\t\t\treloading: false,\n\t\t\texternal: this.item.isAddonExternal(this.id),\n\t\t\tversion: this.item.getVersion(this.id),\n\t\t\texpanded: false\n\t\t}\n\t},\n\n\tcomputed: {\n\t\ticon() {\n\t\t\treturn this.addon.icon || 'https://cdn.frankerfacez.com/badge/2/4/solid'\n\t\t},\n\n\t\tdescription() {\n\t\t\tif ( this.addon.description_i18n )\n\t\t\t\treturn this.t(this.addon.description_i18n, this.addon.description);\n\n\t\t\telse if ( this.addon.description )\n\t\t\t\treturn this.addon.description;\n\n\t\t\treturn this.t('addon.no-desc', '*No description.*');\n\t\t},\n\n\t\tmaintainer() {\n\t\t\tif ( this.addon.maintainer_i18n )\n\t\t\t\treturn this.t(this.addon.maintainer_i18n, this.addon.maintainer);\n\n\t\t\treturn this.addon.maintainer;\n\t\t},\n\n\t\tlines() {\n\t\t\treturn this.description.split(/\\n/);\n\t\t},\n\n\t\tmulti_line() {\n\t\t\treturn this.lines.length > 1\n\t\t},\n\n\t\tfirst_line() {\n\t\t\treturn this.lines[0]\n\t\t},\n\n\t\tshow_description() {\n\t\t\tif ( this.expanded )\n\t\t\t\treturn this.description;\n\t\t\treturn this.first_line;\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.item.on('i18n:update', this.updateDescription, this);\n\t\tthis.item.on(':added', this.refreshExternal, this);\n\t\tthis.item.on(':ready', this.refreshExternal, this);\n\t\tthis.item.on(':addon-enabled', this.onEnabled, this);\n\t\tthis.item.on(':addon-disabled', this.onDisabled, this);\n\t},\n\n\tdestroyed() {\n\t\tthis.item.off('i18n:update', this.updateDescription, this);\n\t\tthis.item.off(':added', this.refreshExternal, this);\n\t\tthis.item.off(':ready', this.refreshExternal, this);\n\t\tthis.item.off(':addon-enabled', this.onEnabled, this);\n\t\tthis.item.off(':addon-disabled', this.onDisabled, this);\n\t},\n\n\tmethods: {\n\t\trefreshExternal() {\n\t\t\tthis.external = this.item.isAddonExternal(this.id);\n\t\t\tthis.version = this.item.getVersion(this.id);\n\t\t},\n\n\t\tupdateDescription() {\n\t\t\tif ( this.addon.description_i18n )\n\t\t\t\tthis.description = this.t(this.addon.description_i18n, this.addon.description);\n\t\t\telse\n\t\t\t\tthis.description = this.addon.description;\n\n\t\t\tconst lines = this.description.split(/\\n/);\n\n\t\t\tthis.multi_line = lines.length > 1;\n\t\t\tthis.first_line = lines[0];\n\t\t},\n\n\t\tonEnabled(id) {\n\t\t\tif ( id === this.id )\n\t\t\t\tthis.enabled = true;\n\n\t\t\tthis.version = this.item.getVersion(this.id);\n\t\t},\n\n\t\tonDisabled(id) {\n\t\t\tif ( id === this.id )\n\t\t\t\tthis.enabled = false;\n\t\t},\n\n\t\ttoggle() {\n\t\t\tthis.expanded = ! this.expanded\n\t\t},\n\n\t\topenSettings() {\n\t\t\tif ( typeof this.addon.settings === 'string' ) {\n\t\t\t\tthis.$emit('navigate', this.addon.settings);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst list = [`add_ons.${this.id}`];\n\t\t\tif ( this.addon.short_name )\n\t\t\t\tlist.push(`add_ons.${this.addon.short_name.toSnakeCase()}`);\n\t\t\tif ( this.addon.name )\n\t\t\t\tlist.push(`add_ons.${this.addon.name.toSnakeCase()}`);\n\n\t\t\tthis.$emit('navigate', ...list);\n\t\t},\n\n\t\topenChangelog() {\n\t\t\tconst list = [`add_ons.changelog.${this.id}`];\n\t\t\tif ( this.addon.short_name )\n\t\t\t\tlist.push(`add_ons.changelog.${this.addon.short_name.toSnakeCase()}`);\n\t\t\tif ( this.addon.name )\n\t\t\t\tlist.push(`add_ons.changelog.${this.addon.name.toSnakeCase()}`);\n\n\t\t\tthis.$emit('navigate', ...list);\n\t\t},\n\n\t\treloadAddon() {\n\t\t\tthis.reloading = true;\n\t\t\tthis.item.reloadAddon(this.id)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.reloading = false;\n\t\t\t\t\tthis.can_reload = this.item.canReloadAddon(this.id);\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t\tthis.reloading = false;\n\t\t\t\t});\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./addon.vue?vue&type=template&id=397f84a2&lang=html&\"\nimport script from \"./addon.vue?vue&type=script&lang=js&\"\nexport * from \"./addon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--example-report tw-relative \"},[(_vm.canUpload)?_c('div',{staticClass:\"tw-absolute ffz--report-upload\"},[(_vm.uploading)?_c('div',[_c('button',{staticClass:\"tw-button tw-button--disabled\",attrs:{\"disabled\":\"\"}},[_vm._m(0),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('async-text.uploading', 'Uploading...'))+\"\\n\\t\\t\\t\\t\")])])]):(_vm.url)?_c('div',[_c('input',{ref:\"url_box\",staticClass:\"tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-input\",attrs:{\"type\":\"text\",\"readonly\":\"\"},domProps:{\"value\":_vm.url},on:{\"focusin\":_vm.selectURL}})]):_c('div',[_c('button',{staticClass:\"tw-button\",on:{\"click\":_vm.upload}},[_vm._m(1),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('async-text.upload', 'Upload'))+\"\\n\\t\\t\\t\\t\")])])])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-background-alt-2 tw-font-size-5 tw-pd-y-05 tw-pd-x-1 tw-border-radius-large\"},[(_vm.loading)?_c('div',{staticClass:\"tw-align-center\"},[_c('h1',{staticClass:\"tw-mg-5 ffz-i-zreknarf loading\"})]):_c('code',[_vm._v(_vm._s(_vm.text))])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-upload-cloud\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-upload-cloud\"})])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./async-text.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./async-text.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tuploading: false,\n\t\t\turl: null,\n\n\t\t\tloading: false,\n\t\t\ttext: null\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tcanUpload() {\n\t\t\treturn ! this.loading && this.text;\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.refresh();\n\n\t\tconst ctx = this.context.context;\n\t\tfor(const key of this.item.watch)\n\t\t\tctx.on(`changed:${key}`, this.refresh, this);\n\t},\n\n\tdestroyed() {\n\t\tconst ctx = this.context.context;\n\t\tfor(const key of this.item.watch)\n\t\t\tctx.off(`changed:${key}`, this.refresh, this);\n\t},\n\n\tmethods: {\n\t\tselectURL() {\n\t\t\tif ( this.$refs && this.$refs.url_box )\n\t\t\t\tthis.$refs.url_box.select();\n\t\t},\n\n\t\tasync upload() {\n\t\t\tif ( this.uploading || this.url || this.text == null )\n\t\t\t\treturn;\n\n\t\t\tthis.uploading = true;\n\t\t\tconst response = await fetch('https://logs.frankerfacez.com', {\n\t\t\t\tmethod: 'PUT',\n\t\t\t\tbody: this.text\n\t\t\t});\n\n\t\t\tif ( ! response.ok ) {\n\t\t\t\tthis.uploading = false;\n\t\t\t\tthis.url = 'An error occurred.';\n\t\t\t}\n\n\t\t\tthis.url = await response.text();\n\t\t\tif ( this.url.startsWith('http://') )\n\t\t\t\tthis.url = `https://${this.url.slice(7)}`;\n\n\t\t\tthis.uploading = false;\n\t\t},\n\n\t\tasync refresh() {\n\t\t\tthis.uploading = false;\n\t\t\tthis.url = null;\n\t\t\tthis.loading = true;\n\t\t\tthis.text = await this.item.data();\n\t\t\tthis.loading = false;\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./async-text.vue?vue&type=template&id=98848b5c&lang=html&\"\nimport script from \"./async-text.vue?vue&type=script&lang=js&\"\nexport * from \"./async-text.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--backup-restore tw-pd-t-05\"},[_c('div',{staticClass:\"tw-pd-b-1 tw-mg-b-1 tw-border-b\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.backup-restore.about', 'This tool allows you to backup and restore your FrankerFaceZ settings, including all settings from the Control Center along with other data such as favorited emotes and blocked games.'))+\"\\n\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center tw-justify-content-center tw-mg-b-1\"},[_c('button',{staticClass:\"tw-button tw-mg-x-1\",on:{\"click\":_vm.backup}},[_vm._m(0),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.backup-restore.save-backup', 'Save Backup'))+\"\\n\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-mg-x-1\",on:{\"click\":_vm.restore}},[_vm._m(1),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.backup-restore.restore-backup', 'Restore Backup'))+\"\\n\\t\\t\\t\")])])]),_vm._v(\" \"),(_vm.error)?_c('div',{staticClass:\"tw-c-background-accent-alt-2 tw-c-text-overlay tw-pd-1 tw-mg-b-1\"},[_c('h3',{staticClass:\"ffz-i-attention\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.backup-restore.error', 'There was an error processing this backup.'))+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.error_desc)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.error_desc)+\"\\n\\t\\t\")]):_vm._e()]):_vm._e(),_vm._v(\" \"),(_vm.message)?_c('div',{staticClass:\"tw-c-background-accent-alt-2 tw-c-text-overlay tw-pd-1 tw-mg-b-1\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.message)+\"\\n\\t\")]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-download\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-upload\"})])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./backup-restore.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./backup-restore.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {openFile, readFile} from 'utilities/dom';\nimport { saveAs } from 'file-saver';\n\nexport default {\n\tprops: ['item'],\n\n\tdata() {\n\t\treturn {\n\t\t\terror_desc: null,\n\t\t\terror: false,\n\t\t\tmessage: null\n\t\t}\n\t},\n\n\tmethods: {\n\t\tasync backup() {\n\t\t\tthis.error = false;\n\t\t\tthis.message = null;\n\n\t\t\tlet file;\n\t\t\ttry {\n\t\t\t\tconst settings = this.item.getFFZ().resolve('settings');\n\t\t\t\tfile = await settings.generateBackupFile();\n\n\t\t\t} catch(err) {\n\t\t\t\tthis.error_desc = this.t('setting.backup-restore.dump-error', 'Unable to export settings data to JSON.');\n\t\t\t\tthis.error = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tsaveAs(file, file.name);\n\t\t\t} catch(err) {\n\t\t\t\tthis.error_desc = this.t('setting.backup-restore.save-error', 'Unable to save.');\n\t\t\t}\n\t\t},\n\n\t\tasync restore() {\n\t\t\tthis.error = false;\n\t\t\tthis.message = null;\n\n\t\t\tlet file;\n\t\t\ttry {\n\t\t\t\tfile = await openFile('application/json,application/zip');\n\t\t\t\tif ( ! file )\n\t\t\t\t\treturn;\n\n\t\t\t} catch(err) {\n\t\t\t\tthis.error_desc = this.t('setting.backup-restore.read-error', 'Unable to read file.');\n\t\t\t\tthis.error = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// We might get a different MIME than expected, roll with it.\n\t\t\tif ( file.type.toLowerCase().includes('zip') )\n\t\t\t\treturn this.restoreZip(file);\n\n\t\t\tlet contents;\n\t\t\ttry {\n\t\t\t\tcontents = await readFile(file);\n\t\t\t} catch(err) {\n\t\t\t\tthis.error_desc = this.t('setting.backup-restore.read-error', 'Unable to read file.');\n\t\t\t\tthis.error = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet data;\n\t\t\ttry {\n\t\t\t\tdata = JSON.parse(contents);\n\t\t\t} catch(err) {\n\t\t\t\tthis.error_desc = this.t('setting.backup-restore.json-error', 'Unable to parse file as JSON.');\n\t\t\t\tthis.error = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! data || data.version !== 2 ) {\n\t\t\t\tthis.error_desc = this.t('setting.backup-restore.old-file', 'This file is invalid or was created in another version of FrankerFaceZ and cannot be loaded.');\n\t\t\t\tthis.error = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( data.type !== 'full' ) {\n\t\t\t\tthis.error_desc = this.t('setting.backup-restore.non-full', 'This file is not a full backup and cannot be restored with this tool.');\n\t\t\t\tthis.error = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst settings = this.item.getFFZ().resolve('settings'),\n\t\t\t\tprovider = settings.provider;\n\n\t\t\tawait provider.awaitReady();\n\n\t\t\tprovider.clear();\n\t\t\tlet i = 0;\n\t\t\tfor(const key of Object.keys(data.values)) {\n\t\t\t\tconst val = data.values[key];\n\t\t\t\tprovider.set(key, val);\n\t\t\t\tprovider.emit('changed', key, val, false);\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\tthis.message = this.t('setting.backup-restore.restored', '{count,number} items have been restored. Please refresh this page.', {\n\t\t\t\tcount: i\n\t\t\t});\n\t\t},\n\n\t\tasync restoreZip(file) {\n\t\t\tconst JSZip = (await import(/* webpackChunkName: \"zip\" */ 'jszip')).default;\n\t\t\tlet input, blobs, data;\n\n\t\t\ttry {\n\t\t\t\tinput = await (new JSZip().loadAsync(file));\n\n\t\t\t\tblobs = await input.file('blobs.json').async('text');\n\t\t\t\tdata = await input.file('settings.json').async('text');\n\n\t\t\t} catch(err) {\n\t\t\t\tthis.error_desc = this.t('setting.backup-restore.zip-error', 'Unable to parse ZIP archive.');\n\t\t\t\tthis.error = true;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tblobs = JSON.parse(blobs);\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t} catch(err) {\n\t\t\t\tthis.error_desc = this.t('setting.backup-restore.json-error', 'Unable to parse file as JSON.');\n\t\t\t\tthis.error = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! data || data.version !== 2 ) {\n\t\t\t\tthis.error_desc = this.t('setting.backup-restore.old-file', 'This file is invalid or was created in another version of FrankerFaceZ and cannot be loaded.');\n\t\t\t\tthis.error = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( data.type !== 'full' ) {\n\t\t\t\tthis.error_desc = this.t('setting.backup-restore.non-full', 'This file is not a full backup and cannot be restored with this tool.');\n\t\t\t\tthis.error = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst settings = this.item.getFFZ().resolve('settings');\n\t\t\tawait settings.awaitProvider();\n\t\t\tconst provider = settings.provider;\n\t\t\tawait provider.awaitReady();\n\n\t\t\tif ( Object.keys(blobs).length && ! provider.supportsBlobs ) {\n\t\t\t\tthis.error_desc = this.t('setting.backup-restore.blob-error', 'This backup contains binary data not supported by the current storage provider. Please change your storage provider in Data Management > Storage >> Provider.');\n\t\t\t\tthis.error = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Attempt to load all the blobs, to make sure they're all valid.\n\t\t\tconst loaded_blobs = {};\n\n\t\t\tfor(const [safe_key, data] of Object.entries(blobs)) {\n\t\t\t\tlet blob;\n\t\t\t\tif ( data.type === 'file' ) {\n\t\t\t\t\tblob = await input.file(`blobs/${safe_key}`).async('blob'); // eslint-disable-line no-await-in-loop\n\t\t\t\t\tblob = new File([blob], data.name, {lastModified: data.modified, type: data.mime});\n\t\t\t\t} else if ( data.type === 'blob' )\n\t\t\t\t\tblob = await input.file(`blobs/${safe_key}`).async('blob'); // eslint-disable-line no-await-in-loop\n\t\t\t\telse if ( data.type === 'ab' )\n\t\t\t\t\tblob = await input.file(`blobs/${safe_key}`).async('arraybuffer'); // eslint-disable-line no-await-in-loop\n\t\t\t\telse if ( data.type === 'ui8' )\n\t\t\t\t\tblob = await input.file(`blobs/${safe_key}`).async('uint8array'); // eslint-disable-line no-await-in-loop\n\t\t\t\telse {\n\t\t\t\t\tthis.error_desc = this.t('setting.backup-restore.invalid-blob', 'This file contains a binary blob with an invalid type: {type}', data);\n\t\t\t\t\tthis.error = true;\n\t\t\t\t}\n\n\t\t\t\tloaded_blobs[data.key] = blob;\n\t\t\t}\n\n\t\t\t// We've loaded all data, let's get this installed.\n\t\t\t// Blobs first.\n\t\t\tlet b = 0;\n\t\t\tawait provider.clearBlobs();\n\n\t\t\tfor(const [key, blob] of Object.entries(loaded_blobs)) {\n\t\t\t\tawait provider.setBlob(key, blob); // eslint-disable-line no-await-in-loop\n\t\t\t\tb++;\n\t\t\t}\n\n\t\t\t// Settings second.\n\t\t\tprovider.clear();\n\t\t\tawait provider.flush();\n\t\t\tlet i = 0;\n\t\t\tfor(const key of Object.keys(data.values)) {\n\t\t\t\tconst val = data.values[key];\n\t\t\t\tprovider.set(key, val);\n\t\t\t\tprovider.emit('changed', key, val, false);\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\tawait provider.flush();\n\n\t\t\tthis.message = this.t('setting.backup-restore.zip-restored', '{count,number} items and {blobs,number} binary blobs have been restored. Please refresh this page.', {\n\t\t\t\tcount: i,\n\t\t\t\tblobs: b\n\t\t\t});\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./backup-restore.vue?vue&type=template&id=4d89fe42&lang=html&\"\nimport script from \"./backup-restore.vue?vue&type=script&lang=js&\"\nexport * from \"./backup-restore.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"ffz--widget ffz--badge-highlighting\"},[_c('badge-term-editor',{attrs:{\"term\":_vm.default_term,\"badges\":_vm.data,\"colored\":_vm.item.colored,\"priority\":_vm.item.priority,\"removable\":_vm.item.removable,\"adding\":true},on:{\"save\":_vm.new_term}}),_vm._v(\" \"),(! _vm.val.length || _vm.val.length === 1 && _vm.hasInheritance)?_c('div',{staticClass:\"tw-mg-t-05 tw-c-text-alt-2 tw-font-size-4 tw-align-center tw-c-text-alt-2 tw-pd-05\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.terms.no-terms', 'no terms are defined in this profile'))+\"\\n\\t\")]):_c('ul',{staticClass:\"ffz--term-list tw-mg-t-05\"},_vm._l((_vm.terms),function(term){return _c('badge-term-editor',{key:term.id,attrs:{\"term\":term.v,\"badges\":_vm.data,\"colored\":_vm.item.colored,\"priority\":_vm.item.priority,\"removable\":_vm.item.removable},on:{\"remove\":function($event){return _vm.remove(term)},\"save\":function($event){return _vm.save(term, $event)}}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport SettingMixin from '../setting-mixin';\nimport {deep_copy, has} from 'utilities/object';\n\nlet last_id = 0;\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tdefault_term: {\n\t\t\t\tv: '',\n\t\t\t\tc: '',\n\t\t\t\tp: 0,\n\t\t\t\tremove: false\n\t\t\t}\n\t\t}\n\t},\n\n\tcomputed: {\n\t\thasInheritance() {\n\t\t\tfor(const val of this.val)\n\t\t\t\tif ( val.t === 'inherit' )\n\t\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t},\n\n\t\tterms() {\n\t\t\tconst out = [];\n\n\t\t\tif ( Array.isArray(this.val) )\n\t\t\t\tfor(const term of this.val) {\n\t\t\t\t\tif ( term && term.v ) {\n\t\t\t\t\t\tif ( ! has(term.v, 'p') )\n\t\t\t\t\t\t\tterm.v.p = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( term && term.t !== 'inherit' )\n\t\t\t\t\t\tout.push(term);\n\t\t\t\t}\n\n\t\t\tif ( this.item.priority || this.item.colored ) {\n\t\t\t\tout.sort((a,b) => {\n\t\t\t\t\tif ( a.v && b.v ) {\n\t\t\t\t\t\tif ( this.item.priority ) {\n\t\t\t\t\t\t\tif ( a.v.p < b.v.p ) return 1;\n\t\t\t\t\t\t\tif ( a.v.p > b.v.p ) return -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( this.item.colored ) {\n\t\t\t\t\t\t\tif ( ! a.v.c && b.v.c ) return 1;\n\t\t\t\t\t\t\tif ( a.v.c && ! b.v.c ) return -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn out;\n\t\t},\n\n\t\tval() {\n\t\t\tif ( ! this.has_value )\n\t\t\t\treturn [];\n\n\t\t\treturn this.value.map(x => {\n\t\t\t\tx.id = x.id || `${Date.now()}-${Math.random()}-${last_id++}`;\n\t\t\t\treturn x;\n\t\t\t})\n\t\t}\n\t},\n\n\tmethods: {\n\t\tnew_term(term) {\n\t\t\tif ( ! term.v )\n\t\t\t\treturn;\n\n\t\t\tconst vals = Array.from(this.val);\n\t\t\tvals.push({v: term});\n\t\t\tthis.set(deep_copy(vals));\n\t\t},\n\n\t\tremove(val) {\n\t\t\tconst vals = Array.from(this.val),\n\t\t\t\tidx = vals.indexOf(val);\n\n\t\t\tif ( idx !== -1 ) {\n\t\t\t\tvals.splice(idx, 1);\n\t\t\t\tif ( vals.length )\n\t\t\t\t\tthis.set(deep_copy(vals));\n\t\t\t\telse\n\t\t\t\t\tthis.clear();\n\t\t\t}\n\t\t},\n\n\t\tsave(val, new_val) {\n\t\t\tval.v = new_val;\n\t\t\tthis.set(deep_copy(this.val));\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./badge-highlighting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./badge-highlighting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./badge-highlighting.vue?vue&type=template&id=6297f2b4&lang=html&\"\nimport script from \"./badge-highlighting.vue?vue&type=script&lang=js&\"\nexport * from \"./badge-highlighting.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--term ffz--badge-term\"},[_c('div',{staticClass:\"tw-align-items-center tw-flex tw-flex-nowrap tw-flex-row tw-full-width\"},[_c('div',{staticClass:\"tw-mg-r-1\"},[(_vm.current && _vm.current.image)?_c('img',{staticClass:\"ffz--badge-term-image\",style:({backgroundColor: _vm.current.color || null}),attrs:{\"src\":_vm.current.image}}):_c('div',{staticClass:\"ffz--badge-term-image\"})]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex-grow-1 tw-mg-r-05\"},[(! _vm.editing && ! _vm.current)?_c('h4',{staticClass:\"ffz-monospace\"},[_c('pre',[_vm._v(_vm._s(_vm.t('setting.terms.invalid-badge', 'unknown/unloaded badge')))])]):_vm._e(),_vm._v(\" \"),(! _vm.editing && _vm.current)?_c('h4',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.current.name)+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.editing)?_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.v),expression:\"edit_data.v\"}],staticClass:\"tw-block tw-full-width tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-x-1 tw-pd-y-05 tw-mg-y-05\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.edit_data, \"v\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[(_vm.adding)?_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.please-select', 'Please select an option.'))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.badges),function(section){return _c('optgroup',{key:section.title,attrs:{\"label\":section.title}},_vm._l((section.badges),function(badge){return _c('option',{key:badge.id,domProps:{\"value\":badge.id}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(badge.name)+\"\\n\\t\\t\\t\\t\\t\")])}),0)})],2):_vm._e()]),_vm._v(\" \"),(_vm.colored)?_c('div',{staticClass:\"tw-flex-shrink-0 tw-mg-r-05\"},[(_vm.editing)?_c('color-picker',{attrs:{\"nullable\":true,\"show-input\":false,\"tooltip\":_vm.t('settings.term.color.tip', 'Color')},model:{value:(_vm.edit_data.c),callback:function ($$v) {_vm.$set(_vm.edit_data, \"c\", $$v)},expression:\"edit_data.c\"}}):(_vm.term.c)?_c('div',{staticClass:\"ffz-color-preview tw-relative ffz-il-tooltip__container\"},[_c('figure',{style:((\"background-color: \" + (_vm.term.c)))},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.term.color.tip', 'Color'))+\"\\n\\t\\t\\t\\t\")])]):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.priority)?_c('div',{staticClass:\"tw-flex-shrink-0 tw-relative ffz-il-tooltip__container\",class:_vm.editing ? 'tw-mg-r-05' : 'tw-mg-x-05'},[(! _vm.editing)?_c('span',[_vm._v(_vm._s(_vm.term.p))]):_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.edit_data.p),expression:\"edit_data.p\",modifiers:{\"number\":true}}],staticClass:\"tw-block tw-border-radius-medium tw-font-size-6 ffz-min-width-unset ffz-input tw-pd-x-1 tw-pd-y-05\",staticStyle:{\"width\":\"5rem\"},attrs:{\"type\":\"number\",\"step\":\"1\"},domProps:{\"value\":(_vm.edit_data.p)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.edit_data, \"p\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.terms.priority.tip', 'Priority'))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.removable && (_vm.editing || _vm.display.remove))?_c('div',{staticClass:\"tw-flex-shrink-0 tw-mg-r-05 tw-mg-y-05 tw-flex tw-align-items-center ffz-checkbox tw-relative ffz-il-tooltip__container\"},[(_vm.editing)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.remove),expression:\"edit_data.remove\"}],staticClass:\"ffz-min-width-unset ffz-checkbox__input\",attrs:{\"id\":'remove$' + _vm.id,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.edit_data.remove)?_vm._i(_vm.edit_data.remove,null)>-1:(_vm.edit_data.remove)},on:{\"change\":function($event){var $$a=_vm.edit_data.remove,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.edit_data, \"remove\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.edit_data, \"remove\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.edit_data, \"remove\", $$c)}}}}):_vm._e(),_vm._v(\" \"),(_vm.editing)?_c('label',{staticClass:\"ffz-min-width-unset ffz-checkbox__label\",attrs:{\"for\":'remove$' + _vm.id}},[_c('span',{staticClass:\"tw-mg-l-05 ffz-i-trash\"})]):(_vm.term.remove)?_c('span',{staticClass:\"ffz-i-trash tw-pd-x-1\"}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.remove.on', 'Remove matching messages from chat.'))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.adding)?_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button\",class:! _vm.valid && 'tw-button--disabled',attrs:{\"disabled\":! _vm.valid},on:{\"click\":_vm.save}},[_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.add-term', 'Add'))+\"\\n\\t\\t\\t\\t\")])])]):(_vm.editing)?_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",class:! _vm.valid && 'tw-button--disabled',attrs:{\"disabled\":! _vm.valid},on:{\"click\":_vm.save}},[_c('span',{staticClass:\"tw-button__text ffz-i-floppy\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.save', 'Save'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.cancel}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.cancel', 'Cancel'))+\"\\n\\t\\t\\t\\t\")])])]):(_vm.deleting)?_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){return _vm.$emit('remove', _vm.term)}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){_vm.deleting = false}}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.cancel', 'Cancel'))+\"\\n\\t\\t\\t\\t\")])])]):_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.edit}},[_c('span',{staticClass:\"tw-button__text ffz-i-cog\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.edit', 'Edit'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){_vm.deleting = true}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\\t\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {deep_copy} from 'utilities/object';\n\nlet id = 0;\n\nexport default {\n\tprops: {\n\t\tbadges: Array,\n\t\tterm: Object,\n\t\tcolored: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tpriority: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tremovable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tadding: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\n\tdata() {\n\t\tconst this_id = `badge-term$${id++}`;\n\n\t\tif ( this.adding )\n\t\t\treturn {\n\t\t\t\tid: this_id,\n\t\t\t\tdeleting: false,\n\t\t\t\tediting: true,\n\t\t\t\tedit_data: deep_copy(this.term)\n\t\t\t};\n\n\t\treturn {\n\t\t\tid: this_id,\n\t\t\tdeleting: false,\n\t\t\tediting: false,\n\t\t\tedit_data: null\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tvalid() {\n\t\t\treturn this.display.v && this.display.v !== '';\n\t\t},\n\n\t\tdisplay() {\n\t\t\treturn this.editing ? this.edit_data : this.term;\n\t\t},\n\n\t\tcurrent() {\n\t\t\tif ( ! this.badges || ! this.display || ! this.display.v )\n\t\t\t\treturn null;\n\n\t\t\tconst v = this.display.v;\n\n\t\t\tfor(const section of this.badges) {\n\t\t\t\tif ( ! section || ! section.badges )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tfor(const badge of section.badges)\n\t\t\t\t\tif ( badge.id === v )\n\t\t\t\t\t\treturn badge;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t},\n\n\tmethods: {\n\t\tedit() {\n\t\t\tthis.editing = true;\n\t\t\tthis.edit_data = Object.assign({remove: false}, deep_copy(this.term));\n\t\t},\n\n\t\ttoggleRemove() {\n\t\t\tif ( this.editing )\n\t\t\t\tthis.edit_data.remove = ! this.edit_data.remove;\n\t\t},\n\n\t\tcancel() {\n\t\t\tif ( this.adding )\n\t\t\t\tthis.edit_data = deep_copy(this.term);\n\t\t\telse {\n\t\t\t\tthis.editing = false;\n\t\t\t\tthis.edit_data = null\n\t\t\t}\n\t\t},\n\n\t\tsave() {\n\t\t\tif ( this.priority && this.edit_data.p ) {\n\t\t\t\tif ( typeof this.edit_data.p === 'number' )\n\t\t\t\t\tthis.edit_data.p = Math.floor(this.edit_data.p);\n\t\t\t\telse\n\t\t\t\t\tthis.edit_data.p = 0;\n\t\t\t}\n\n\t\t\tif ( this.valid )\n\t\t\t\tthis.$emit('save', this.edit_data);\n\t\t\tthis.cancel();\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./badge-term-editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./badge-term-editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./badge-term-editor.vue?vue&type=template&id=08f2e978&lang=html&\"\nimport script from \"./badge-term-editor.vue?vue&type=script&lang=js&\"\nexport * from \"./badge-term-editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--badge-visibility tw-pd-t-05\"},[(_vm.source && _vm.source !== _vm.profile)?_c('div',{staticClass:\"tw-c-background-accent tw-c-text-overlay tw-pd-1 tw-mg-b-1\"},[_c('span',{staticClass:\"ffz-i-info\"}),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.warn-inheritence', 'These values are being overridden by another profile and may not take effect.'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-b-2 tw-align-right\"},[_c('button',{staticClass:\"tw-mg-l-05 tw-button ffz-button--hollow ffz-il-tooltip__container\",class:{'tw-button--disabled': ! _vm.has_value},attrs:{\"disabled\":! _vm.has_value},on:{\"click\":_vm.clear}},[_vm._m(0),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.reset-all', 'Reset All to Default'))+\"\\n\\t\\t\\t\")])])]),_vm._v(\" \"),_vm._l((_vm.badges),function(sec){return _c('section',{key:sec.title,staticClass:\"ffz--menu-container tw-border-t\"},[(sec.id)?_c('header',{staticClass:\"tw-flex ffz-checkbox tw-align-items-center tw-z-above\",class:{default: _vm.badgeDefault(sec.id)}},[_c('input',{staticClass:\"ffz-checkbox__input\",attrs:{\"id\":sec.id,\"type\":\"checkbox\"},domProps:{\"checked\":_vm.badgeChecked(sec.id)},on:{\"click\":function($event){return _vm.onChange(sec.id, $event)}}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":sec.id}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(sec.title)+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('div',{staticClass:\"ffz--reset-button\"},[(! _vm.badgeDefault(sec.id))?_c('button',{staticClass:\"tw-mg-l-05 tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){return _vm.reset(sec.id)}}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.reset', 'Reset to Default'))+\"\\n\\t\\t\\t\\t\\t\")])]):_vm._e()])]):_c('header',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(sec.title)+\"\\n\\t\\t\")]),_vm._v(\" \"),(! sec.id || _vm.badgeChecked(sec.id))?_c('ul',{staticClass:\"tw-flex tw-flex-wrap tw-align-content-start tw-align-items-start\"},_vm._l((sec.badges),function(i){return _c('li',{key:i.id,staticClass:\"ffz--badge-info ffz--pointer-events--none tw-mg-y-05 tw-mg-r-05 tw-flex ffz-checkbox ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-border-radius-large\",class:{default: _vm.badgeDefault(i.id)}},[_c('input',{staticClass:\"ffz-checkbox__input\",attrs:{\"id\":i.id,\"type\":\"checkbox\"},domProps:{\"checked\":_vm.badgeChecked(i.id)},on:{\"click\":function($event){return _vm.onChange(i.id, $event)}}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label tw-flex-grow-1 tw-mg-05 ffz--pointer-events\",attrs:{\"for\":i.id}},[_c('div',{staticClass:\"tw-mg-l-1 tw-flex\"},[_c('div',{staticClass:\"preview-image ffz-badge tw-mg-r-1 tw-flex-shrink-0\",style:({backgroundColor: i.color, backgroundImage: i.styleImage })}),_vm._v(\" \"),_c('div',[_c('h5',[_vm._v(_vm._s(i.name))]),_vm._v(\" \"),(i.versions && (i.always_versions || i.versions.length > 1))?_c('section',{staticClass:\"tw-mg-t-05\"},_vm._l((i.versions),function(v){return _c('span',{key:(\"badge-\" + (i.id) + \"-\" + (v.version)),staticClass:\"ffz-badge ffz-tooltip\",style:({backgroundColor: i.color, backgroundImage: v.styleImage}),attrs:{\"title\":v.name,\"data-tooltip-type\":\"html\"}})}),0):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"tw-mg-t-05 tw-button ffz-button--hollow ffz-il-tooltip__container\",on:{\"click\":function($event){return _vm.reset(i.id)}}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('span',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.reset', 'Reset to Default'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\")])])])])])])}),0):_c('div',{staticClass:\"tw-c-text-alt-2 tw-font-size-4 tw-align-center tw-pd-05\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.badges.hidden', '{count,plural,one{# badge is} other{# badges are} } hidden in this set', {\n\t\t\t\tcount: sec.badges.length\n\t\t\t}))+\"\\n\\t\\t\")])])})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-cancel\"})])}]\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport SettingMixin from '../setting-mixin';\nimport {has} from 'utilities/object';\n\nfunction sortBadges(items) {\n\treturn items.sort((a, b) => {\n\t\tconst an = a.name.toLowerCase(),\n\t\t\tbn = b.name.toLowerCase();\n\n\t\tif ( an < bn ) return -1;\n\t\tif ( an > bn ) return 1;\n\t\treturn 0;\n\t});\n}\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tbadges: []\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.updateBadges();\n\t},\n\n\tmethods: {\n\t\tupdateBadges() {\n\t\t\tconst badges = this.item.getBadges(() => this.updateBadges());\n\t\t\tfor(const section of badges) {\n\t\t\t\tsection.badges = sortBadges(section.badges);\n\t\t\t}\n\n\t\t\tthis.badges = badges;\n\t\t},\n\n\t\tbadgeChecked(id) {\n\t\t\treturn ! this.value[id];\n\t\t},\n\n\t\tbadgeDefault(id) {\n\t\t\treturn ! has(this.value, id);\n\t\t},\n\n\t\tonChange(id, event) {\n\t\t\tconst control = event.target,\n\t\t\t\tnew_val = {[id]: ! control.checked};\n\n\t\t\tthis.set(Object.assign({}, this.value, new_val));\n\t\t},\n\n\t\treset(id) {\n\t\t\tconst val = Object.assign({}, this.value);\n\t\t\tdelete val[id];\n\n\t\t\tif ( ! Object.keys(val).length )\n\t\t\t\tthis.clear();\n\t\t\telse\n\t\t\t\tthis.set(val);\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./badge-visibility.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./badge-visibility.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./badge-visibility.vue?vue&type=template&id=32d3f132&lang=html&\"\nimport script from \"./badge-visibility.vue?vue&type=script&lang=js&\"\nexport * from \"./badge-visibility.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"ffz--widget ffz--basic-terms\"},[_c('term-editor',{attrs:{\"term\":_vm.default_term,\"colored\":_vm.item.colored,\"highlight\":_vm.item.highlight,\"words\":_vm.item.words,\"removable\":_vm.item.removable,\"priority\":_vm.item.priority,\"adding\":true},on:{\"save\":_vm.new_term}}),_vm._v(\" \"),(! _vm.val.length || _vm.val.length === 1 && _vm.hasInheritance)?_c('div',{staticClass:\"tw-mg-t-05 tw-c-text-alt-2 tw-font-size-4 tw-align-center tw-c-text-alt-2 tw-pd-05\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.terms.no-terms', 'no terms are defined in this profile'))+\"\\n\\t\")]):_c('ul',{staticClass:\"ffz--term-list tw-mg-t-05\"},_vm._l((_vm.terms),function(term){return _c('term-editor',{key:term.id,attrs:{\"term\":term.v,\"colored\":_vm.item.colored,\"highlight\":_vm.item.highlight,\"words\":_vm.item.words,\"removable\":_vm.item.removable,\"priority\":_vm.item.priority},on:{\"remove\":function($event){return _vm.remove(term)},\"save\":function($event){return _vm.save(term, $event)}}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport SettingMixin from '../setting-mixin';\nimport {deep_copy, has} from 'utilities/object';\n\nlet last_id = 0;\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tdefault_term: {\n\t\t\t\tv: '',\n\t\t\t\tt: 'text',\n\t\t\t\tc: '',\n\t\t\t\ts: false,\n\t\t\t\th: false,\n\t\t\t\tw: true,\n\t\t\t\tp: 0,\n\t\t\t\tremove: false\n\t\t\t}\n\t\t}\n\t},\n\n\tcomputed: {\n\t\thasInheritance() {\n\t\t\tfor(const val of this.val)\n\t\t\t\tif ( val.t === 'inherit' )\n\t\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t},\n\n\t\tterms() {\n\t\t\tconst out = [];\n\n\t\t\tif ( Array.isArray(this.val) )\n\t\t\t\tfor(const term of this.val) {\n\t\t\t\t\tif ( term && term.v ) {\n\t\t\t\t\t\tif ( ! has(term.v, 'w') )\n\t\t\t\t\t\t\tterm.v.w = term.v.t !== 'raw';\n\n\t\t\t\t\t\tif ( ! has(term.v, 'h') )\n\t\t\t\t\t\t\tterm.v.h = true;\n\n\t\t\t\t\t\tif ( ! has(term.v, 'p') )\n\t\t\t\t\t\t\tterm.v.p = 0;\n\n\t\t\t\t\t\tif ( term.v.t === 'raw' )\n\t\t\t\t\t\t\tterm.v.t = 'regex';\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( term && term.t !== 'inherit' )\n\t\t\t\t\t\tout.push(term);\n\t\t\t\t}\n\n\t\t\tout.sort((a,b) => {\n\t\t\t\tif ( a.v && b.v ) {\n\t\t\t\t\tif ( this.item.removable ) {\n\t\t\t\t\t\tif ( ! a.v.remove && b.v.remove ) return 1;\n\t\t\t\t\t\tif ( a.v.remove && ! b.v.remove ) return -1;\n\t\t\t\t\t}\n\t\t\t\t\tif ( this.item.priority ) {\n\t\t\t\t\t\tif ( a.v.p < b.v.p ) return 1;\n\t\t\t\t\t\tif ( a.v.p > b.v.p ) return -1;\n\t\t\t\t\t}\n\t\t\t\t\tif ( this.item.colored ) {\n\t\t\t\t\t\tif ( ! a.v.c && b.v.c ) return 1;\n\t\t\t\t\t\tif ( a.v.c && ! b.v.c ) return -1;\n\t\t\t\t\t}\n\t\t\t\t\tif ( this.item.highlight ) {\n\t\t\t\t\t\tif ( ! a.v.h && b.v.h ) return -1;\n\t\t\t\t\t\tif ( a.v.h && ! b.v.h ) return 1;\n\t\t\t\t\t}\n\t\t\t\t\tif ( this.item.words ?? true ) {\n\t\t\t\t\t\tif ( ! a.v.w && b.v.w ) return -1;\n\t\t\t\t\t\tif ( a.v.w && ! b.v.w ) return 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t});\n\n\t\t\treturn out;\n\t\t},\n\n\t\tval() {\n\t\t\tif ( ! this.has_value )\n\t\t\t\treturn [];\n\n\t\t\treturn this.value.map(x => {\n\t\t\t\tx.id = x.id || `${Date.now()}-${Math.random()}-${last_id++}`;\n\t\t\t\treturn x;\n\t\t\t})\n\t\t}\n\t},\n\n\tmethods: {\n\t\tnew_term(term) {\n\t\t\tif ( ! term.v )\n\t\t\t\treturn;\n\n\t\t\tconst vals = Array.from(this.val);\n\t\t\tvals.push({v: term});\n\t\t\tthis.set(deep_copy(vals));\n\t\t},\n\n\t\tremove(val) {\n\t\t\tconst vals = Array.from(this.val),\n\t\t\t\tidx = vals.indexOf(val);\n\n\t\t\tif ( idx !== -1 ) {\n\t\t\t\tvals.splice(idx, 1);\n\t\t\t\tif ( vals.length )\n\t\t\t\t\tthis.set(deep_copy(vals));\n\t\t\t\telse\n\t\t\t\t\tthis.clear();\n\t\t\t}\n\t\t},\n\n\t\tsave(val, new_val) {\n\t\t\tval.v = new_val;\n\t\t\tthis.set(deep_copy(this.val));\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./basic-terms.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./basic-terms.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./basic-terms.vue?vue&type=template&id=095affb5&lang=html&\"\nimport script from \"./basic-terms.vue?vue&type=script&lang=js&\"\nexport * from \"./basic-terms.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--term ffz--blocked-type\"},[_c('div',{staticClass:\"tw-align-items-center tw-flex tw-flex-nowrap tw-flex-row tw-full-width\"},[_c('div',{staticClass:\"tw-flex-grow-1 tw-mg-r-05\"},[(! _vm.editing)?_c('h4',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.display.v)+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.editing)?_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.v),expression:\"edit_data.v\"}],staticClass:\"tw-block tw-full-width tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-x-1 tw-pd-y-05 tw-mg-y-05\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.edit_data, \"v\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[(_vm.adding)?_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.please-select', 'Please select an option.'))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.types),function(type){return _c('option',{key:type,domProps:{\"value\":type}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(type)+\"\\n\\t\\t\\t\\t\")])})],2):_vm._e()]),_vm._v(\" \"),(_vm.adding)?_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button\",class:! _vm.valid && 'tw-button--disabled',attrs:{\"disabled\":! _vm.valid},on:{\"click\":_vm.save}},[_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.add-term', 'Add'))+\"\\n\\t\\t\\t\\t\")])])]):(_vm.deleting)?_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){return _vm.$emit('remove', _vm.term)}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){_vm.deleting = false}}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.cancel', 'Cancel'))+\"\\n\\t\\t\\t\\t\")])])]):_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){_vm.deleting = true}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\\t\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {deep_copy} from 'utilities/object';\n\nlet id = 0;\n\nexport default {\n\tprops: {\n\t\ttypes: Array,\n\t\tterm: Object,\n\t\tcolored: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tremovable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tadding: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\n\tdata() {\n\t\tif ( this.adding )\n\t\t\treturn {\n\t\t\t\teditor_id: id++,\n\t\t\t\tdeleting: false,\n\t\t\t\tediting: true,\n\t\t\t\tedit_data: deep_copy(this.term)\n\t\t\t};\n\n\t\treturn {\n\t\t\teditor_id: id++,\n\t\t\tdeleting: false,\n\t\t\tediting: false,\n\t\t\tedit_data: null\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tvalid() {\n\t\t\treturn this.display.v && this.display.v !== '';\n\t\t},\n\n\t\tdisplay() {\n\t\t\treturn this.editing ? this.edit_data : this.term;\n\t\t}\n\t},\n\n\tmethods: {\n\t\tcancel() {\n\t\t\tif ( this.adding )\n\t\t\t\tthis.edit_data = deep_copy(this.term);\n\t\t\telse {\n\t\t\t\tthis.editing = false;\n\t\t\t\tthis.edit_data = null\n\t\t\t}\n\t\t},\n\n\t\tsave() {\n\t\t\tthis.$emit('save', this.edit_data);\n\t\t\tthis.cancel();\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./blocked-type-editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./blocked-type-editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./blocked-type-editor.vue?vue&type=template&id=488a6986&lang=html&\"\nimport script from \"./blocked-type-editor.vue?vue&type=script&lang=js&\"\nexport * from \"./blocked-type-editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"ffz--widget ffz--blocked-types\"},[_c('blocked-type-editor',{attrs:{\"term\":_vm.default_type,\"types\":_vm.data,\"adding\":true},on:{\"save\":_vm.new_term}}),_vm._v(\" \"),(! _vm.val.length || _vm.val.length === 1 && _vm.hasInheritance)?_c('div',{staticClass:\"tw-mg-t-05 tw-c-text-alt-2 tw-font-size-4 tw-align-center tw-c-text-alt-2 tw-pd-05\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.terms.no-terms', 'no terms are defined in this profile'))+\"\\n\\t\")]):_c('ul',{staticClass:\"ffz--term-list tw-mg-t-05\"},_vm._l((_vm.terms),function(term){return _c('blocked-type-editor',{key:term.id,attrs:{\"term\":term.v,\"types\":_vm.data},on:{\"remove\":function($event){return _vm.remove(term)},\"save\":function($event){return _vm.save(term, $event)}}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport SettingMixin from '../setting-mixin';\nimport {deep_copy} from 'utilities/object';\n\nlet last_id = 0;\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tdefault_type: {\n\t\t\t\tv: ''\n\t\t\t}\n\t\t}\n\t},\n\n\tcomputed: {\n\t\thasInheritance() {\n\t\t\tfor(const val of this.val)\n\t\t\t\tif ( val.t === 'inherit' )\n\t\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t},\n\n\t\tterms() {\n\t\t\tconst out = [];\n\n\t\t\tif ( Array.isArray(this.val) )\n\t\t\t\tfor(const term of this.val)\n\t\t\t\t\tif ( term && term.t !== 'inherit' )\n\t\t\t\t\t\tout.push(term);\n\n\t\t\treturn out;\n\t\t},\n\n\t\tval() {\n\t\t\tif ( ! this.has_value )\n\t\t\t\treturn [];\n\n\t\t\treturn this.value.map(x => {\n\t\t\t\tx.id = x.id || `${Date.now()}-${Math.random()}-${last_id++}`;\n\t\t\t\treturn x;\n\t\t\t})\n\t\t}\n\t},\n\n\tmethods: {\n\t\tnew_term(term) {\n\t\t\tif ( ! term.v )\n\t\t\t\treturn;\n\n\t\t\tconst vals = Array.from(this.val);\n\t\t\tvals.push({v: term});\n\t\t\tthis.set(deep_copy(vals));\n\t\t},\n\n\t\tremove(val) {\n\t\t\tconst vals = Array.from(this.val),\n\t\t\t\tidx = vals.indexOf(val);\n\n\t\t\tif ( idx !== -1 ) {\n\t\t\t\tvals.splice(idx, 1);\n\t\t\t\tif ( vals.length )\n\t\t\t\t\tthis.set(deep_copy(vals));\n\t\t\t\telse\n\t\t\t\t\tthis.clear();\n\t\t\t}\n\t\t},\n\n\t\tsave(val, new_val) {\n\t\t\tval.v = new_val;\n\t\t\tthis.set(deep_copy(this.val));\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./blocked-types.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./blocked-types.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./blocked-types.vue?vue&type=template&id=33b64d86&lang=html&\"\nimport script from \"./blocked-types.vue?vue&type=script&lang=js&\"\nexport * from \"./blocked-types.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--changelog tw-border-t tw-pd-t-1\"},[_c('div',{staticClass:\"tw-align-center\"},[(_vm.addon)?_c('h3',{staticClass:\"tw-mg-b-1 tw-flex tw-align-items-center tw-justify-content-center\"},[(_vm.addon.icon)?_c('figure',{staticClass:\"ffz-avatar ffz-avatar--size-30 tw-mg-r-05\"},[_c('img',{staticClass:\"tw-block tw-image tw-image-avatar\",attrs:{\"src\":_vm.addon.icon}})]):_vm._e(),_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.add_ons.specific-changelog', '{name} Changelog', {\n\t\t\t\tname: _vm.addon.name\n\t\t\t}))+\"\\n\\t\\t\")]):(_vm.addons)?_c('h3',{staticClass:\"tw-mg-b-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.add_ons.changelog.title', 'Add-Ons Changelog'))+\"\\n\\t\\t\")]):_c('h3',{staticClass:\"tw-mg-b-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('home.changelog', 'Changelog'))+\"\\n\\t\\t\")])]),_vm._v(\" \"),( ! _vm.addons)?_c('div',{staticClass:\"tw-mg-b-1 tw-flex tw-align-items-center\"},[_c('div',{staticClass:\"tw-flex-grow-1\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-checkbox tw-relative ffz-il-tooltip__container\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.nonversioned),expression:\"nonversioned\"}],ref:\"nonversioned\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"nonversioned\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.nonversioned)?_vm._i(_vm.nonversioned,null)>-1:(_vm.nonversioned)},on:{\"change\":function($event){var $$a=_vm.nonversioned,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.nonversioned=$$a.concat([$$v]))}else{$$i>-1&&(_vm.nonversioned=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.nonversioned=$$c}}}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"nonversioned\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('home.changelog.show-nonversioned', 'Include non-versioned commits.'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-balloon--md ffz-il-tooltip--wrap ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('home.changelog.about-nonversioned', 'Non-versioned commits are commits to the FrankerFaceZ repository not associated with a release build. They typically represent maintenance or contributions from the community that will be included in a subsequent release.'))+\"\\n\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),_c('ul',_vm._l((_vm.display),function(commit){return _c('li',{key:commit.sha,staticClass:\"tw-mg-b-2\"},[_c('div',{staticClass:\"tw-flex tw-align-items-center tw-border-b tw-mg-b-05\"},[(! _vm.addons && commit.active)?_c('div',{staticClass:\"ffz-pill tw-mg-r-05\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('home.changelog.current', 'Current Version'))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(commit.icon)?_c('figure',{staticClass:\"ffz-avatar ffz-avatar--size-20 tw-mg-r-05\"},[_c('img',{staticClass:\"tw-block tw-image tw-image-avatar\",attrs:{\"src\":commit.icon}})]):_vm._e(),_vm._v(\" \"),(commit.title && commit.title_nav)?_c('a',{staticClass:\"tw-font-size-5 ffz-link ffz-link--inherit\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.titleNav(commit.title_nav)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(commit.title)+\"\\n\\t\\t\\t\\t\")]):(commit.title)?_c('div',{staticClass:\"tw-font-size-5\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(commit.title)+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(commit.version)?_c('div',{staticClass:\"tw-font-size-4 tw-mg-l-05\"},[_c('span',{staticClass:\"tw-c-text-alt-2\"},[_vm._v(\"v\")]),_vm._v(_vm._s(commit.version)+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(commit.author)?_c('div',{staticClass:\"tw-mg-l-05\"},[_c('t-list',{staticClass:\"tw-inline-flex tw-align-items-center\",attrs:{\"phrase\":\"home.changelog.by-line\",\"default\":\"By: {user}\"},scopedSlots:_vm._u([{key:\"user\",fn:function(){return [(commit.author.html_url)?_c('a',{staticClass:\"tw-inline-flex tw-align-items-center ffz-link ffz-link--inherit tw-mg-x-05 ffz-tooltip\",attrs:{\"href\":commit.author.html_url,\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"data-tooltip-type\":\"link\"}},[(commit.author.avatar_url)?_c('figure',{staticClass:\"ffz-avatar ffz-avatar--size-20 tw-mg-r-05\"},[_c('img',{staticClass:\"tw-block tw-border-radius-rounded tw-image tw-image-avatar\",attrs:{\"src\":commit.author.avatar_url}})]):_vm._e(),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(commit.author.login)+\"\\n\\t\\t\\t\\t\\t\\t\\t\")]):_c('strong',{staticClass:\"tw-mg-x-05\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(commit.author.login || commit.author.name)+\"\\n\\t\\t\\t\\t\\t\\t\\t\")])]},proxy:true}],null,true)})],1):_vm._e(),_vm._v(\" \"),(commit.hash)?_c('div',{staticClass:\"tw-font-size-8 tw-c-text-alt-2\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t@\"),_c('a',{staticClass:\"ffz-link ffz-link--inherit ffz-tooltip\",attrs:{\"href\":commit.link,\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"data-tooltip-type\":\"link\"}},[_vm._v(_vm._s(commit.hash))])]):_vm._e(),_vm._v(\" \"),(commit.date)?_c('time',{staticClass:\"tw-align-right tw-flex-grow-1 tw-c-text-alt-2\",attrs:{\"datetime\":commit.date}},[_vm._v(\"(\"+_vm._s(_vm.formatDate(commit.date))+\")\")]):_vm._e()]),_vm._v(\" \"),_c('markdown',{attrs:{\"source\":commit.message}}),_vm._v(\" \"),_vm._l((commit.segments),function(entry){return _c('div',{staticClass:\"ffz--changelog-segment\"},[_c('strong',[_vm._v(_vm._s(entry.key))]),_vm._v(\" \"),_c('markdown',{attrs:{\"source\":entry.value}})],1)})],2)}),0),_vm._v(\" \"),_c('div',{staticClass:\"tw-align-center tw-pd-1\"},[(_vm.error)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('home.changelog.error', 'An error occurred loading changes from GitHub.'))+\"\\n\\t\\t\")]):(_vm.loading)?_c('h1',{staticClass:\"tw-mg-5 ffz-i-zreknarf loading\"}):(! _vm.more)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('home.changelog.no-more', 'There are no more commits to load.'))+\"\\n\\t\\t\")]):_c('button',{staticClass:\"tw-button\",on:{\"click\":_vm.fetchMore}},[_c('div',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('home.changelog.load', 'Load More'))+\"\\n\\t\\t\\t\")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {get} from 'utilities/object';\n\nconst TITLE_MATCH = /^(.+?)?\\s*v?(\\d+\\.\\d+\\.\\d+(?:\\-[a-z0-9-]+)?)$/i,\n\tSETTING_REGEX = /\\]\\(~([^)]+)\\)/g,\n\tCHANGE_REGEX = /^\\*\\s*([^:]+?):\\s*(.+)$/i,\n\tISSUE_REGEX = /(^|\\s)#(\\d+)\\b/g;\n\n\nfunction linkify(text, repo) {\n\ttext = text.replace(SETTING_REGEX, (_, link) => {\n\t\treturn `](~${link})`\n\t});\n\n\treturn text.replace(ISSUE_REGEX, (_, space, number) => {\n\t\treturn `${space}[#${number}](https://github.com/FrankerFaceZ/${repo}/issues/${number})`;\n\t});\n}\n\n\nexport default {\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\terror: false,\n\t\t\taddon: this.item.addon,\n\t\t\taddons: this.item.addons,\n\t\t\tnonversioned: false,\n\t\t\tloading: false,\n\t\t\tmore: true,\n\t\t\tcommits: []\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tdisplay() {\n\t\t\twindow.thing = this;\n\n\t\t\tconst out = [],\n\t\t\t\taddons = this.addons ? this.item.getFFZ().resolve('addons') : null,\n\t\t\t\told_commit = this.t('home.changelog.nonversioned', 'Non-Versioned Commit');\n\n\t\t\tfor(const commit of this.commits) {\n\t\t\t\tconst input = commit.commit.message;\n\t\t\t\tlet title = old_commit,\n\t\t\t\t\ttitle_nav = null,\n\t\t\t\t\ticon = null,\n\t\t\t\t\tversion = null,\n\t\t\t\t\tauthor = null,\n\t\t\t\t\tsections = {},\n\t\t\t\t\tdescription = [];\n\n\t\t\t\tif ( /\\bskiplog\\b/i.test(input) && ! this.nonversion )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tconst lines = input.split(/\\r?\\n/),\n\t\t\t\t\tfirst = lines.shift(),\n\t\t\t\t\tmatch = first ? TITLE_MATCH.exec(first) : null;\n\n\t\t\t\tconst date = new Date(commit.commit.author.date),\n\t\t\t\t\tactive = commit.sha === window.FrankerFaceZ.version_info.commit,\n\t\t\t\t\thas_content = lines.length && match;\n\n\t\t\t\tif ( ! this.nonversion && ! has_content )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tlet last_bit = null;\n\n\t\t\t\tif ( match ) {\n\t\t\t\t\ttitle = match[1];\n\t\t\t\t\tversion = match[2];\n\t\t\t\t}\n\n\t\t\t\tif ( has_content )\n\t\t\t\t\tfor(const line of lines) {\n\t\t\t\t\t\tconst trimmed = line.trim();\n\t\t\t\t\t\tif ( ! trimmed.length ) {\n\t\t\t\t\t\t\tif ( ! last_bit && description.length )\n\t\t\t\t\t\t\t\tdescription.push(line);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst m = CHANGE_REGEX.exec(trimmed);\n\t\t\t\t\t\tif ( ! m ) {\n\t\t\t\t\t\t\tif ( ! last_bit )\n\t\t\t\t\t\t\t\tdescription.push(line);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tlast_bit.push(trimmed);\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst section = sections[m[1]] = sections[m[1]] || [];\n\t\t\t\t\t\t\tlast_bit = [m[2]];\n\t\t\t\t\t\t\tsection.push(last_bit);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\tlines.unshift(first);\n\t\t\t\t\tdescription = lines;\n\t\t\t\t}\n\n\t\t\t\tlet message = description.join('\\n').trim();\n\n\t\t\t\tconst segments = [];\n\n\t\t\t\tfor(const [key, val] of Object.entries(sections)) {\n\t\t\t\t\tif ( ! val?.length )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tconst bit = val.map(x => `* ${x.join(' ')}`).join('\\n').trim();\n\n\t\t\t\t\tsegments.push({\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tvalue: linkify(bit, this.addons ? 'add-ons' : 'frankerfacez')\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif ( this.addons ) {\n\t\t\t\t\tauthor = commit.author;\n\n\t\t\t\t\tif ( title ) {\n\t\t\t\t\t\tconst ltitle = title.toLowerCase();\n\n\t\t\t\t\t\tif ( addons?.addons )\n\t\t\t\t\t\t\tfor(const addon of Object.values(addons.addons)) {\n\t\t\t\t\t\t\t\tif ((addon.short_name && addon.short_name.toLowerCase() === ltitle) ||\n\t\t\t\t\t\t\t\t\t(addon.name && addon.name.toLowerCase() === ltitle) ||\n\t\t\t\t\t\t\t\t\t(addon.id && addon.id.toLowerCase() === ltitle)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\ticon = addon.icon;\n\n\t\t\t\t\t\t\t\t\ttitle_nav = [`add_ons.changelog.${addon.id}`];\n\t\t\t\t\t\t\t\t\tif ( addon.short_name )\n\t\t\t\t\t\t\t\t\t\ttitle_nav.push(`add_ons.changelog.${addon.short_name.toSnakeCase()}`);\n\t\t\t\t\t\t\t\t\tif ( addon.name )\n\t\t\t\t\t\t\t\t\t\ttitle_nav.push(`add_ons.changelog.${addon.name.toSnakeCase()}`);\n\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Default Icon\n\t\t\t\t\t\tif ( ! icon )\n\t\t\t\t\t\t\ticon = 'https://cdn.frankerfacez.com/badge/2/4/solid';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( this.addon ) {\n\t\t\t\t\ticon = null;\n\t\t\t\t\ttitle = null;\n\t\t\t\t}\n\n\t\t\t\tout.push({\n\t\t\t\t\ticon,\n\t\t\t\t\ttitle,\n\t\t\t\t\ttitle_nav,\n\t\t\t\t\tversion,\n\t\t\t\t\tauthor,\n\t\t\t\t\tmessage,\n\t\t\t\t\tsegments,\n\t\t\t\t\tactive,\n\t\t\t\t\thash: commit.sha && commit.sha.slice(0,7),\n\t\t\t\t\tlink: commit.html_url,\n\t\t\t\t\tsha: commit.sha,\n\t\t\t\t\tdate\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn out;\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.commit_ids = new Set;\n\t\tthis.fetchMore();\n\t},\n\n\tmethods: {\n\t\ttitleNav(nav) {\n\t\t\tif ( Array.isArray(nav) )\n\t\t\t\tthis.$emit('navigate', ...nav);\n\t\t},\n\n\t\tformatDate(value) {\n\t\t\tif ( ! value )\n\t\t\t\treturn '';\n\n\t\t\tconst date = value instanceof Date ? value : new Date(value),\n\t\t\t\ttoday = new Date,\n\t\t\t\tis_today = date.toDateString() === today.toDateString();\n\n\t\t\tif ( is_today )\n\t\t\t\treturn this.tTime(date);\n\n\t\t\treturn this.tDate(date);\n\t\t},\n\n\t\tasync fetchMore() {\n\t\t\tconst last_commit = this.commits[this.commits.length - 1],\n\t\t\t\tuntil = last_commit && get('commit.author.date', last_commit);\n\n\t\t\tthis.loading = true;\n\n\t\t\tconst url = new URL(`https://api.github.com/repos/frankerfacez/${this.addons ? 'add-ons' : 'frankerfacez'}/commits`);\n\t\t\tif ( until )\n\t\t\t\turl.searchParams.append('until', until);\n\n\t\t\tif ( this.addon )\n\t\t\t\turl.searchParams.append('path', `src/${this.addon.id}`);\n\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(url),\n\t\t\t\t\tdata = resp.ok ? await resp.json() : null;\n\n\t\t\t\tif ( ! data || ! Array.isArray(data) ) {\n\t\t\t\t\tthis.more = false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet added = false;\n\n\t\t\t\tfor(const commit of data) {\n\t\t\t\t\tif ( this.commit_ids.has(commit.sha) )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tthis.commit_ids.add(commit.sha)\n\t\t\t\t\tthis.commits.push(commit);\n\t\t\t\t\tadded = true;\n\t\t\t\t}\n\n\t\t\t\tif ( ! added )\n\t\t\t\t\tthis.more = false;\n\n\t\t\t\tthis.loading = false;\n\n\t\t\t} catch(err) {\n\t\t\t\tthis.error = true;\n\t\t\t}\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./changelog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./changelog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./changelog.vue?vue&type=template&id=174dfd92&lang=html&\"\nimport script from \"./changelog.vue?vue&type=script&lang=js&\"\nexport * from \"./changelog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--widget ffz--chat-actions tw-border-t tw-pd-y-1\"},[(_vm.source && _vm.source !== _vm.profile)?_c('div',{staticClass:\"tw-c-background-accent tw-c-text-overlay tw-pd-1 tw-mg-b-1\"},[_c('span',{staticClass:\"ffz-i-info\"}),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.warn-inheritence', 'These values are being overridden by another profile and may not take effect.'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),((_vm.item.warn_icons || (_vm.has_icons && _vm.item.warn_icons !== false)) && _vm.context.mod_icons === false)?_c('div',{staticClass:\"tw-c-background-accent tw-c-text-overlay tw-pd-1 tw-mg-b-1\"},[_c('span',{staticClass:\"ffz-i-info\"}),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.actions.warn-hidden', 'You currently have Mod Icons turned off in your Twitch chat settings, so some actions might be hidden as a result. Use the settings menu in chat to toggle them.'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-b-1 tw-border-b tw-mg-b-1\"},[_c('div',{staticClass:\"tw-flex tw-flex-wrap tw-align-items-center ffz--inline\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.preview', 'Preview:'))+\"\\n\\n\\t\\t\\t\"),_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"as_mod\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"as_mod\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.is_moderator},on:{\"change\":_vm.onPreview}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"as_mod\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.preview.mod', 'As Moderator'))+\"\\n\\t\\t\\t\\t\\t\")])])]),_vm._v(\" \"),(_vm.has_msg)?_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"is_deleted\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"is_deleted\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.is_deleted},on:{\"change\":_vm.onPreview}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"is_deleted\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.preview.deleted', 'Deleted Message'))+\"\\n\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.has_icons)?_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"with_mod_icons\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"with_mod_icons\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.with_mod_icons},on:{\"change\":_vm.onPreview}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"with_mod_icons\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.preview.mod_icons', 'With Mod Icons'))+\"\\n\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.has_mode)?_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"with_slow\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"with_slow\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.with_slow},on:{\"change\":_vm.onPreview}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"with_slow\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.preview.slow', 'Slow Mode'))+\"\\n\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.has_mode)?_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"with_emote\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"with_emote\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.with_emote},on:{\"change\":_vm.onPreview}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"with_emote\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.preview.emote-only', 'Emote-Only'))+\"\\n\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.has_mode)?_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"with_subs\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"with_subs\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.with_subs},on:{\"change\":_vm.onPreview}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"with_subs\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.preview.subs', 'Subs Only'))+\"\\n\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.has_mode)?_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"with_followers\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"with_followers\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.with_followers},on:{\"change\":_vm.onPreview}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"with_followers\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.preview.followers', 'Followers-Only'))+\"\\n\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.has_mode)?_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"with_r9k\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"with_r9k\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.with_r9k},on:{\"change\":_vm.onPreview}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"with_r9k\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.preview.r9k', 'R9k Mode'))+\"\\n\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"show_all\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"show_all\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.show_all},on:{\"change\":_vm.onPreview}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"show_all\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.preview.all', 'Show All'))+\"\\n\\t\\t\\t\\t\\t\")])])])]),_vm._v(\" \"),_c('div',{staticClass:\"ffz-action-data tw-pd-t-1\",attrs:{\"data-user\":JSON.stringify(_vm.sample_user),\"data-room\":JSON.stringify(_vm.sample_room),\"data-message\":JSON.stringify(_vm.sample_message),\"data-msg-id\":\"1234-5678\"}},[(! _vm.display.length)?_c('div',{staticClass:\"tw-align-center tw-c-text-alt-2 tw-pd-05 tw-font-size-4\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.no-visible', 'no visible actions'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.display),function(actions,idx){return _c('div',{key:idx,staticClass:\"tw-flex tw-align-items-center tw-justify-content-center\"},[_vm._l((actions),function(act){return [(act.type === 'space')?_c('div',{key:act.id,staticClass:\"tw-flex-grow-1\"}):(act.type === 'space-small')?_c('div',{key:act.id,staticClass:\"tw-mg-x-1\"}):_c('action-preview',{key:act.id,attrs:{\"act\":_vm.maybeDynamic(act.v),\"process-color\":_vm.color,\"renderers\":_vm.data.renderers,\"tooltip\":\"true\",\"pad\":\"true\"}})]})],2)})],2)]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center tw-pd-b-05\"},[_c('div',{staticClass:\"tw-flex-grow-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.drag', 'Drag actions to re-order them.'))+\"\\n\\t\\t\")]),_vm._v(\" \"),(! _vm.maybe_clear)?_c('div',{directives:[{name:\"on-clickaway\",rawName:\"v-on-clickaway\",value:(_vm.closeAdd),expression:\"closeAdd\"}],staticClass:\"tw-relative\"},[_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text\",on:{\"click\":_vm.toggleAdd}},[_c('span',{staticClass:\"tw-button__text ffz-i-plus\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.new', 'New...'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_vm._m(0)]),_vm._v(\" \"),(_vm.add_open)?_c('balloon',{attrs:{\"color\":\"background-alt-2\",\"dir\":\"down-right\",\"size\":_vm.add_pasting ? 'md' : 'sm'}},[_c('simplebar',{attrs:{\"classes\":\"ffz-mh-30\"}},[(_vm.add_pasting)?_c('div',{staticClass:\"tw-pd-1\"},[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('input',{ref:\"paste\",staticClass:\"tw-flex-grow-1 tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-input\",attrs:{\"placeholder\":_vm.t('setting.paste-json.json', '[json]')},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.addFromJSON.apply(null, arguments)}}}),_vm._v(\" \"),_c('button',{staticClass:\"tw-mg-l-05 tw-button\",on:{\"click\":_vm.addFromJSON}},[_c('span',{staticClass:\"tw-button__text ffz-i-plus\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.add', 'Add'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\")])])])]):_c('div',{staticClass:\"tw-pd-y-1\"},[_c('button',{staticClass:\"ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive tw-full-width\",on:{\"click\":_vm.preparePaste}},[_c('div',{staticClass:\"tw-flex tw-align-items-center tw-pd-y-05 tw-pd-x-1\"},[_c('div',{staticClass:\"tw-flex-grow-1 tw-mg-r-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.paste-json', 'Paste JSON'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_vm._l((_vm.presets),function(preset,idx){return [(preset.divider)?_c('div',{key:idx,staticClass:\"tw-mg-1 tw-border-b\"}):_c('button',{key:idx,staticClass:\"ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive tw-full-width\",attrs:{\"disabled\":preset.disabled},on:{\"click\":function($event){return _vm.add(preset.value)}}},[_c('div',{staticClass:\"tw-flex tw-align-items-center tw-pd-y-05 tw-pd-x-1\"},[_c('div',{staticClass:\"tw-flex-grow-1 tw-mg-r-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(preset.title_i18n ? _vm.t(preset.title_i18n, preset.title, preset) : preset.title)+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),(preset.appearance)?_c('action-preview',{attrs:{\"act\":_vm.maybeDynamic(preset),\"process-color\":_vm.color,\"renderers\":_vm.data.renderers}}):_vm._e()],1)])]})],2)])],1):_vm._e()],1):_vm._e(),_vm._v(\" \"),(! _vm.maybe_clear && _vm.strip_skip_val.length)?_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){_vm.maybe_clear = true}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete-all', 'Delete All'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.delete-all', \"Delete all of this profile's actions.\"))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.maybe_clear)?_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.doClear}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete-all', 'Delete All'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.delete-all', \"Delete all of this profile's actions.\"))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.maybe_clear)?_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){_vm.maybe_clear = false}}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.cancel', 'Cancel'))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(! _vm.strip_skip_val.length && _vm.has_default)?_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.populate}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.add-default', 'Add Defaults'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.add-default-tip', 'Add all of the default actions to this profile.'))+\"\\n\\t\\t\\t\")])]):_vm._e()]),_vm._v(\" \"),_c('div',{ref:\"list\",staticClass:\"ffz--action-list\"},[(! _vm.val.length)?_c('div',{staticClass:\"tw-c-text-alt-2 tw-font-size-4 tw-align-center tw-c-text-alt-2 tw-pd-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.no-actions', 'no actions are defined in this profile'))+\"\\n\\n\\t\\t\\t\"),_c('div',{staticClass:\"tw-mg-t-1\"},[_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.addSkip}},[_c('span',{staticClass:\"tw-button__text ffz-i-block\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.do-not-inherit', 'Do Not Inherit'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('span',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-center\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.actions.do-not-inherit.desc', 'Do not inherit values from lower priority profiles or the defaults.'))+\"\\n\\t\\t\\t\\t\\t\")])])])]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.val),function(act){return _c('section',{key:act.id},[_c('action-editor',{attrs:{\"action\":act,\"data\":_vm.data,\"inline\":_vm.item.inline,\"mod_icons\":_vm.has_icons,\"context\":_vm.item.context,\"extra_appearance\":_vm.item.extra_appearance_editor,\"vuectx\":_vm.context,\"modifiers\":_vm.item.modifiers,\"hover_modifier\":_vm.item.hover_modifier},on:{\"remove\":function($event){return _vm.remove(act)},\"save\":function($event){return _vm.save(act, $event)}}})],1)})],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--right\"},[_c('figure',{staticClass:\"ffz-i-down-dir\"})])}]\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport SettingMixin from '../setting-mixin';\nimport Sortable from 'sortablejs';\nimport {deep_copy} from 'utilities/object';\n\nlet last_id = 0;\n\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tis_moderator: true,\n\t\t\twith_mod_icons: true,\n\n\t\t\twith_emote: false,\n\t\t\twith_subs: false,\n\t\t\twith_slow: false,\n\t\t\twith_followers: false,\n\t\t\twith_r9k: false,\n\n\t\t\tis_staff: false,\n\t\t\tis_deleted: false,\n\t\t\tshow_all: false,\n\n\t\t\tmaybe_clear: false,\n\t\t\tadd_open: false,\n\t\t\tadd_pasting: false\n\t\t}\n\t},\n\n\tcomputed: {\n\t\thasInheritance() {\n\t\t\tfor(const val of this.val)\n\t\t\t\tif ( val.t === 'inherit' )\n\t\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t},\n\n\t\thasSkip() {\n\t\t\tfor(const val of this.val)\n\t\t\t\tif ( val.t === 'skip' )\n\t\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t},\n\n\t\tsample_user() {\n\t\t\treturn this.has_user ? {\n\t\t\t\tdisplayName: 'SirStendec',\n\t\t\t\tlogin: 'sirstendec',\n\t\t\t\tid: 49399878,\n\t\t\t\tcolor: '#008000'\n\t\t\t} : null\n\t\t},\n\n\t\tsample_room() {\n\t\t\treturn this.has_room ? {\n\t\t\t\tdisplayName: 'FrankerFaceZ',\n\t\t\t\tlogin: 'frankerfacez',\n\t\t\t\tid: 46622312\n\t\t\t} : null\n\t\t},\n\n\t\tsample_message() {\n\t\t\treturn this.has_msg ? {\n\t\t\t\tid: '46a473ee-a3c4-4556-a5ca-c0f1eac93ec0',\n\t\t\t\ttext: 'sirstendec: Please do not do that.'\n\t\t\t} : null\n\t\t},\n\n\t\thas_icons() {\n\t\t\treturn this.item.mod_icons || this.item.inline\n\t\t},\n\n\t\thas_default() {\n\t\t\treturn this.default_value && this.default_value.length\n\t\t},\n\n\t\thas_user() {\n\t\t\treturn this.item.context && this.item.context.includes('user')\n\t\t},\n\n\t\thas_room() {\n\t\t\treturn this.item.context && this.item.context.includes('room')\n\t\t},\n\n\t\thas_mode() {\n\t\t\treturn this.item.context && this.item.context.includes('room-mode')\n\t\t},\n\n\t\thas_msg() {\n\t\t\treturn this.item.context && this.item.context.includes('message')\n\t\t},\n\n\t\tpresets() {\n\t\t\tconst out = [],\n\t\t\t\tcontexts = this.item.context || [];\n\n\t\t\tout.push({\n\t\t\t\tdisabled: this.hasInheritance,\n\n\t\t\t\ttitle: 'Inheritance Point',\n\t\t\t\ttitle_i18n: 'setting.inheritance',\n\t\t\t\tvalue: {t: 'inherit'}\n\t\t\t});\n\n\t\t\tif ( ! this.item.inline ) {\n\t\t\t\tout.push({\n\t\t\t\t\ttitle: 'New Line',\n\t\t\t\t\ttitle_i18n: 'setting.new-line',\n\t\t\t\t\tvalue: {\n\t\t\t\t\t\tv: {type: 'new-line'}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tout.push({\n\t\t\t\t\ttitle: 'Space (Small)',\n\t\t\t\t\ttitle_i18n: 'setting.space-small',\n\t\t\t\t\tvalue: {\n\t\t\t\t\t\tv: {type: 'space-small'}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tout.push({\n\t\t\t\t\ttitle: 'Space (Expanding)',\n\t\t\t\t\ttitle_i18n: 'setting.space',\n\t\t\t\t\tvalue: {\n\t\t\t\t\t\tv: {type: 'space'}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tout.push({divider: true});\n\n\t\t\tfor(const key in this.data.actions) { // eslint-disable-line guard-for-in\n\t\t\t\tconst act = this.data.actions[key];\n\t\t\t\tif ( act && act.presets ) {\n\t\t\t\t\tif ( act.required_context ) {\n\t\t\t\t\t\tlet okay = true;\n\t\t\t\t\t\tfor(const ctx of act.required_context)\n\t\t\t\t\t\t\tif ( ! contexts.includes(ctx) ) {\n\t\t\t\t\t\t\t\tokay = false;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( ! okay )\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor(const preset of act.presets) {\n\t\t\t\t\t\tif ( typeof act.title !== 'string' && ! preset.title )\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tout.push(Object.assign({\n\t\t\t\t\t\t\taction: key,\n\t\t\t\t\t\t\ttitle: act.title,\n\t\t\t\t\t\t\ttitle_i18n: act.title_i18n || `chat.actions.${key}`,\n\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\tv: Object.assign({\n\t\t\t\t\t\t\t\t\taction: key\n\t\t\t\t\t\t\t\t}, preset)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, preset));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn out;\n\t\t},\n\n\t\tdisplay() {\n\t\t\tconst out = [];\n\t\t\tlet current = [];\n\n\t\t\tif ( this.val )\n\t\t\t\tfor(const val of this.val) {\n\t\t\t\t\tif ( ! val.v )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tconst type = val.v.type;\n\t\t\t\t\tif ( type === 'new-line' ) {\n\t\t\t\t\t\tout.push(current);\n\t\t\t\t\t\tcurrent = [];\n\n\t\t\t\t\t} else if ( type === 'space' || type === 'small-space' ) {\n\t\t\t\t\t\tcurrent.push(val.v);\n\n\t\t\t\t\t} else if ( this.displayAction(val.v) )\n\t\t\t\t\t\tcurrent.push(val);\n\t\t\t\t}\n\n\t\t\tif ( current.length )\n\t\t\t\tout.push(current);\n\n\t\t\treturn out;\n\t\t},\n\n\t\tstrip_skip_val() {\n\t\t\treturn this.val.filter(x => x.t !== 'skip');\n\t\t},\n\n\t\tval() {\n\t\t\tif ( ! this.has_value )\n\t\t\t\treturn [];\n\n\t\t\treturn this.value.map(x => {\n\t\t\t\tx.id = x.id || `${Date.now()}-${Math.random()}-${last_id++}`;\n\t\t\t\treturn x;\n\t\t\t});\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis._sortable = Sortable.create(this.$refs.list, {\n\t\t\tdraggable: 'section',\n\t\t\tfilter: 'button',\n\n\t\t\tonUpdate: event => {\n\t\t\t\tif ( event.newIndex === event.oldIndex )\n\t\t\t\t\treturn;\n\n\t\t\t\tconst new_val = Array.from(this.val);\n\t\t\t\tnew_val.splice(event.newIndex, 0, ...new_val.splice(event.oldIndex, 1));\n\n\t\t\t\tthis.set(new_val);\n\t\t\t}\n\t\t});\n\t},\n\n\tbeforeDestroy() {\n\t\tif ( this._sortable )\n\t\t\tthis._sortable.destroy();\n\n\t\tthis._sortable = null;\n\t},\n\n\tmethods: {\n\t\tdoClear() {\n\t\t\tthis.maybe_clear = false;\n\t\t\tthis.clear();\n\t\t},\n\n\t\tcloseAdd() {\n\t\t\tthis.add_open = false;\n\t\t\tthis.add_pasting = false;\n\t\t},\n\n\t\ttoggleAdd() {\n\t\t\tthis.add_open = ! this.add_open;\n\t\t\tthis.add_pasting = false;\n\t\t},\n\n\t\tpreparePaste() {\n\t\t\tthis.add_open = true;\n\t\t\tthis.add_pasting = true;\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tthis.$refs.paste.focus()\n\t\t\t});\n\t\t},\n\n\t\taddFromJSON() {\n\t\t\tlet value = this.$refs.paste.value;\n\t\t\tthis.closeAdd();\n\n\t\t\tif ( value ) {\n\t\t\t\ttry {\n\t\t\t\t\tvalue = JSON.parse(value);\n\t\t\t\t} catch(err) {\n\t\t\t\t\talert(err); // eslint-disable-line no-alert\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( ! value.appearance )\n\t\t\t\t\tvalue.appearance = {};\n\n\t\t\t\tif ( ! value.appearance.type )\n\t\t\t\t\tvalue.appearance.type = 'text';\n\n\t\t\t\tif ( value.appearance.type === 'text' && ! value.appearance.text )\n\t\t\t\t\tvalue.appearance.text = 'C';\n\n\t\t\t\tif ( value.appearance.type === 'icon' && ! value.appearance.icon )\n\t\t\t\t\tvalue.appearance.icon = 'ffz-i-ok';\n\n\t\t\t\tif ( ! value.display )\n\t\t\t\t\tvalue.display = {};\n\n\t\t\t\tif ( ! value.action )\n\t\t\t\t\tvalue.action = 'chat';\n\n\t\t\t\tthis.add({v: value});\n\t\t\t}\n\t\t},\n\n\t\tpopulate() {\n\t\t\tthis.set(deep_copy(this.default_value));\n\t\t},\n\n\t\taddSkip() {\n\t\t\tconst vals = Array.from(this.val);\n\t\t\tif(vals.length > 0)\n\t\t\t\treturn;\n\n\t\t\tvals.push({\n\t\t\t\tt: 'skip'\n\t\t\t});\n\n\t\t\tthis.set(deep_copy(vals));\n\t\t},\n\n\t\tadd(val) {\n\t\t\tconst vals = Array.from(this.val);\n\n\t\t\t// Remove any skip entry.\n\t\t\tlet i = vals.length;\n\t\t\twhile(i--) {\n\t\t\t\tif (vals[i]?.t === 'skip')\n\t\t\t\t\tvals.splice(i, 1);\n\t\t\t}\n\n\t\t\tvals.push(val);\n\t\t\tthis.set(deep_copy(vals));\n\t\t\tthis.add_open = false;\n\t\t},\n\n\t\tremove(val) {\n\t\t\tconst vals = Array.from(this.val),\n\t\t\t\tidx = vals.indexOf(val);\n\n\t\t\tif ( idx !== -1 ) {\n\t\t\t\tvals.splice(idx, 1);\n\t\t\t\tif ( vals.length )\n\t\t\t\t\tthis.set(vals);\n\t\t\t\telse\n\t\t\t\t\tthis.clear();\n\t\t\t}\n\t\t},\n\n\t\tsave(val, new_val) {\n\t\t\tval.v = new_val;\n\t\t\tthis.set(deep_copy(this.val));\n\t\t},\n\n\t\tonPreview() {\n\t\t\tthis.show_all = this.$refs.show_all.checked;\n\t\t\tthis.is_moderator = this.$refs.as_mod.checked;\n\t\t\tthis.is_staff = false; //this.$refs.as_staff.checked;\n\t\t\tthis.with_mod_icons = this.has_icons && this.$refs.with_mod_icons.checked;\n\t\t\tthis.is_deleted = this.has_msg && this.$refs.is_deleted.checked;\n\n\t\t\tthis.with_emote = this.has_mode && this.$refs.with_emote.checked;\n\t\t\tthis.with_subs = this.has_mode && this.$refs.with_subs.checked;\n\t\t\tthis.with_slow = this.has_mode && this.$refs.with_slow.checked;\n\t\t\tthis.with_followers = this.has_mode && this.$refs.with_followers.checked;\n\t\t\tthis.with_r9k = this.has_mode && this.$refs.with_r9k.checked;\n\t\t},\n\n\t\tdisplayAction(action) {\n\t\t\tif ( ! action.appearance )\n\t\t\t\treturn false;\n\n\t\t\tconst disp = action.display;\n\t\t\tif ( ! disp || this.show_all )\n\t\t\t\treturn true;\n\n\t\t\tif ( disp.disable )\n\t\t\t\treturn false;\n\n\t\t\tif ( disp.mod != null && disp.mod !== this.is_moderator )\n\t\t\t\treturn false;\n\n\t\t\tif ( disp.mod_icons != null && disp.mod_icons !== this.with_mod_icons )\n\t\t\t\treturn false;\n\n\t\t\tif ( disp.staff != null && disp.staff !== this.is_staff )\n\t\t\t\treturn false;\n\n\t\t\tif ( disp.deleted != null && disp.deleted !== this.is_deleted )\n\t\t\t\treturn false;\n\n\t\t\tif ( this.has_mode ) {\n\t\t\t\tif ( disp.emoteOnly != null && disp.emoteOnly !== this.with_emote )\n\t\t\t\t\treturn false;\n\n\t\t\t\tif ( disp.slowMode != null && disp.slowMode !== this.with_slow )\n\t\t\t\t\treturn false;\n\n\t\t\t\tif ( disp.subsMode != null && disp.subsMode !== this.with_subs )\n\t\t\t\t\treturn false;\n\n\t\t\t\tif ( disp.r9kMode != null && disp.r9kMode !== this.with_r9k )\n\t\t\t\t\treturn false;\n\n\t\t\t\tif ( disp.followersOnly != null && disp.followersOnly !== this.with_followers )\n\t\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tmaybeDynamic(data) {\n\t\t\tlet ap = data.appearance;\n\t\t\tif (ap?.type === 'dynamic') {\n\t\t\t\tconst act = this.data.actions[data.action],\n\t\t\t\t\tffz = this.context.getFFZ(),\n\t\t\t\t\tactions = ffz && ffz.resolve('chat.actions');\n\n\t\t\t\tconst out = actions && act?.dynamicAppearance && act.dynamicAppearance\n\t\t\t\t\t.call(actions, deep_copy(ap), data, this.sample_message, this.sample_room, this.sample_user, this.with_mod_icons);\n\t\t\t\tif ( out )\n\t\t\t\t\treturn Object.assign({}, data, {appearance: out});\n\t\t\t}\n\n\t\t\treturn data;\n\t\t},\n\n\t\tcolor(input) {\n\t\t\tif ( ! input )\n\t\t\t\treturn input;\n\n\t\t\treturn this.data.color(input)\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./chat-actions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./chat-actions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./chat-actions.vue?vue&type=template&id=a7587e04&lang=html&\"\nimport script from \"./chat-actions.vue?vue&type=script&lang=js&\"\nexport * from \"./chat-actions.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"ffz--widget ffz--chat-reasons\"},[_c('div',{staticClass:\"tw-flex tw-align-items-center tw-pd-b-05\"},[_c('div',{staticClass:\"tw-flex-grow-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.reasons.info', 'Reasons can be selected using action context menus to add extra information to bans and timeouts.'))+\"\\n\\t\\t\")]),_vm._v(\" \"),(! _vm.empty)?_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.clear}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete-all', 'Delete All'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.reasons.delete-all', \"Delete all of this profile's reasons.\"))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.empty)?_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.populate}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.reasons.add-default', 'Add Defaults'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.reasons.add-default-tip', 'Add all of the default reasons to this profile.'))+\"\\n\\t\\t\\t\")])]):_vm._e()]),_vm._v(\" \"),_c('reason-editor',{attrs:{\"reason\":_vm.default_reason,\"adding\":true},on:{\"save\":_vm.new_reason}}),_vm._v(\" \"),(_vm.empty)?_c('div',{staticClass:\"tw-mg-t-05 tw-c-text-alt-2 tw-font-size-4 tw-align-center tw-c-text-alt-2 tw-pd-05\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.reasons.no-reasons', 'no reasons are defined in this profile'))+\"\\n\\t\")]):_c('ul',{staticClass:\"ffz--term-list tw-mg-t-05\"},_vm._l((_vm.reasons),function(reason){return _c('reason-editor',{key:reason.id,attrs:{\"reason\":reason.v},on:{\"remove\":function($event){return _vm.remove(reason)},\"save\":function($event){return _vm.save(reason, $event)}}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport SettingMixin from '../setting-mixin';\nimport {deep_copy} from 'utilities/object';\n\nlet last_id = 0;\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tdefault_reason: {\n\t\t\t\ttext: ''\n\t\t\t}\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tempty() {\n\t\t\treturn ! this.val.length || this.val.length === 1 && this.hasInheritance;\n\t\t},\n\n\t\treasons() {\n\t\t\tconst out = [];\n\t\t\tif ( Array.isArray(this.val) )\n\t\t\t\tfor(const reason of this.val)\n\t\t\t\t\tif ( reason.t !== 'inherit' )\n\t\t\t\t\t\tout.push(reason);\n\n\t\t\treturn out;\n\t\t},\n\n\t\thasInheritance() {\n\t\t\tfor(const val of this.val)\n\t\t\t\tif ( val.t === 'inherit' )\n\t\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t},\n\n\t\tval() {\n\t\t\tif ( ! this.has_value )\n\t\t\t\treturn [];\n\n\t\t\treturn this.value.map(x => {\n\t\t\t\tx.id = x.id || `${Date.now()}-${Math.random()}-${last_id++}`;\n\t\t\t\treturn x;\n\t\t\t})\n\t\t}\n\t},\n\n\tmethods: {\n\t\tpopulate() {\n\t\t\tthis.set(deep_copy(this.default_value));\n\t\t},\n\n\t\tnew_reason(reason) {\n\t\t\tif ( ! reason )\n\t\t\t\treturn;\n\n\t\t\tdelete reason.i18n;\n\n\t\t\tconst vals = Array.from(this.val);\n\t\t\tvals.push({v: reason});\n\t\t\tthis.set(deep_copy(vals));\n\t\t},\n\n\t\tremove(val) {\n\t\t\tconst vals = Array.from(this.val),\n\t\t\t\tidx = vals.indexOf(val);\n\n\t\t\tif ( idx !== -1 ) {\n\t\t\t\tvals.splice(idx, 1);\n\t\t\t\tif ( vals.length )\n\t\t\t\t\tthis.set(deep_copy(vals));\n\t\t\t\telse\n\t\t\t\t\tthis.clear();\n\t\t\t}\n\t\t},\n\n\t\tsave(val, new_val) {\n\t\t\tdelete new_val.i18n;\n\t\t\tval.v = new_val;\n\n\t\t\tthis.set(deep_copy(this.val));\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./chat-reasons.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./chat-reasons.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./chat-reasons.vue?vue&type=template&id=e71032a6&lang=html&\"\nimport script from \"./chat-reasons.vue?vue&type=script&lang=js&\"\nexport * from \"./chat-reasons.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.data)?_c('div',[_c('div',{staticClass:\"tw-c-text-alt-2 tw-mg-b-05\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.example', 'Example:'))+\"\\n\\t\")]),_vm._v(\" \"),_c('chat-rich',{attrs:{\"data\":_vm.data,\"url\":_vm.url,\"force-short\":true}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport { maybe_call } from 'utilities/object';\n\nconst VIDEOS = [\n\t'https://www.twitch.tv/dansalvato',\n\t'https://www.twitch.tv/sirstendec',\n\t'https://www.youtube.com/watch?v=BFSWlDpA6C4'\n];\n\nexport default {\n\tcomponents: {\n\t\t'chat-rich': async () => {\n\t\t\tconst stuff = await import(/* webpackChunkName: \"chat\" */ 'src/modules/chat/components');\n\t\t\treturn stuff.default('./chat-rich.vue').default;\n\t\t}\n\t},\n\n\tprops: ['context', 'item'],\n\n\tdata() {\n\t\tlet url = maybe_call(this.item.extra.url, this, this.item, this.context);\n\t\tif ( ! url )\n\t\t\turl = VIDEOS[Math.floor(Math.random() * VIDEOS.length)];\n\n\t\tconst token = {\n\t\t\t\ttype: 'link',\n\t\t\t\tforce_rich: true,\n\t\t\t\tis_mail: false,\n\t\t\t\turl,\n\t\t\t\ttext: url\n\t\t\t},\n\n\t\t\tchat = this.item.extra.getChat();\n\n\t\tlet data = null;\n\t\tif ( chat.__rich_providers ) {\n\t\t\tfor(const provider of chat.__rich_providers) {\n\t\t\t\tif ( provider.test.call(chat, token, url) ) {\n\t\t\t\t\tdata = provider.process.call(chat, token);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tdata,\n\t\t\turl\n\t\t}\n\t}\n\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./chat-rich-example.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./chat-rich-example.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./chat-rich-example.vue?vue&type=template&id=5c10d11d&\"\nimport script from \"./chat-rich-example.vue?vue&type=script&lang=js&\"\nexport * from \"./chat-rich-example.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--chat-tester\"},[(_vm.context.exclusive)?_c('div',{staticClass:\"tw-c-background-accent tw-c-text-overlay tw-pd-1 tw-mg-b-2\"},[_c('h3',{staticClass:\"ffz-i-attention\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('debug.chat-tester.exclusive', \"Hey! This won't work here!\"))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('markdown',{attrs:{\"source\":_vm.t('debug.chat-tester.exclusive-explain', 'This feature does not work when the FFZ Control Center is popped out. It needs to be used in a window where you can see chat.')}})],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-start\"},[_c('label',{staticClass:\"tw-mg-y-05\",attrs:{\"for\":\"selector\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('debug.chat-tester.message', 'Test Message'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-flex-column tw-mg-05 tw-full-width\"},[_c('select',{ref:\"selector\",staticClass:\"tw-full-width tw-border-top-left-radius-medium tw-border-top-right-radius-medium tw-font-size-6 ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05\",attrs:{\"id\":\"selector\"},on:{\"change\":_vm.onSelectChange}},[_c('option',{attrs:{\"value\":\"custom\"},domProps:{\"selected\":_vm.is_custom}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.combo-box.custom', 'Custom'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_vm._l((_vm.samples),function(sample,idx){return _c('option',{key:idx,domProps:{\"selected\":sample.data === _vm.message && sample.topic === _vm.topic,\"value\":idx}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(sample.name)+\"\\n\\t\\t\\t\\t\")])})],2),_vm._v(\" \"),_c('input',{ref:\"topic\",staticClass:\"tw-block tw-font-size-6 tw-full-width ffz-textarea ffz-mg-t-1p\",on:{\"blur\":_vm.updateMessage,\"input\":_vm.onMessageChange}}),_vm._v(\" \"),_c('textarea',{ref:\"message\",staticClass:\"tw-block tw-font-size-6 tw-full-width ffz-textarea ffz-mg-t-1p tw-border-bottom-left-radius-medium tw-border-bottom-right-radius-medium\",attrs:{\"rows\":\"10\"},on:{\"blur\":_vm.updateMessage,\"input\":_vm.onMessageChange}})])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-t-1 tw-flex tw-align-items-center\"},[_c('div',{staticClass:\"tw-flex-grow-1\"}),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"replay_fix\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"replay_fix\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.replay_fix},on:{\"change\":_vm.onCheck}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"replay_fix\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('debug.chat-tester.replay-fix', 'Fix ID and Channel'))+\"\\n\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text\",on:{\"click\":_vm.playMessage}},[_c('span',{staticClass:\"tw-button__text ffz-i-play\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('debug.chat-tester.play', 'Play Message'))+\"\\n\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-t-1 tw-border-t tw-mg-t-1 tw-flex tw-mg-b-1 tw-align-items-center\"},[_c('div',{staticClass:\"tw-flex-grow-1\"}),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"capture_chat\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"capture_chat\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.capture_chat},on:{\"change\":_vm.onCheck}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"capture_chat\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('debug.chat-tester.capture-chat', 'Capture Chat'))+\"\\n\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"ignore_privmsg\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"ignore_privmsg\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.ignore_privmsg},on:{\"change\":_vm.onCheck}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"ignore_privmsg\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('debug.chat-tester.ignore-privmsg', 'Ignore PRIVMSG'))+\"\\n\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"capture_pubsub\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"capture_pubsub\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.capture_pubsub},on:{\"change\":_vm.onCheck}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"capture_pubsub\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('debug.chat-tester.capture-pubsub', 'Capture PubSub'))+\"\\n\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text\",on:{\"click\":_vm.clearLog}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('debug.chat-tester.clear-log', 'Clear Log'))+\"\\n\\t\\t\\t\")])])]),_vm._v(\" \"),_vm._l((_vm.log),function(item){return _c('div',{key:item._id,staticClass:\"tw-elevation-1 tw-border tw-pd-y-05 tw-pd-r-1 tw-mg-y-05 tw-flex tw-flex-nowrap tw-align-items-center\",class:{'tw-c-background-base': item.pubsub, 'tw-c-background-alt-2': !item.pubsub}},[_c('time',{staticClass:\"tw-mg-l-05 tw-mg-r-1 tw-flex-shrink-0\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.tTime(item.timestamp, 'HH:mm:ss'))+\"\\n\\t\\t\")]),_vm._v(\" \"),(item.pubsub)?_c('div',{staticClass:\"tw-flex-grow-1\"},[_c('div',{staticClass:\"tw-mg-b-05 tw-border-b tw-pd-b-05\"},[_vm._v(_vm._s(item.topic))]),_vm._v(\" \"),_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.highlightJson(item.data))}})]):(item.chat)?_c('div',{staticClass:\"tw-flex-grow-1\"},[(item.tags)?_c('div',{staticClass:\"ffz-ct--tags\"},[_vm._v(\"\\n\\t\\t\\t\\t@\"),_vm._l((item.tags),function(tag,key){return [_c('span',{staticClass:\"ffz-ct--tag\"},[_vm._v(_vm._s(key))]),_vm._v(\"=\"),_c('span',{staticClass:\"ffz-ct--tag-value\"},[_vm._v(_vm._s(tag))]),_vm._v(\";\")]})],2):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"ffz-ct--prefix\"},[(item.prefix)?[_vm._v(\":\"),(item.user)?_c('span',{staticClass:\"ffz-ct--user\"},[_vm._v(_vm._s(item.user))]):_vm._e(),_c('span',{staticClass:\"ffz-ct--prefix\"},[_vm._v(_vm._s(item.prefix))])]:_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"ffz-ct--command\"},[_vm._v(_vm._s(item.command))]),_vm._v(\" \"),(item.channel)?[_vm._v(\"#\"),_c('span',{staticClass:\"ffz-ct--channel\"},[_vm._v(_vm._s(item.channel))])]:_vm._e()],2),_vm._v(\" \"),(item.last_param)?_c('div',{staticClass:\"ffz-ct--params\"},[_vm._l((item.params),function(para){return _c('span',{staticClass:\"ffz-ct--param\"},[_vm._v(_vm._s(para))])}),_vm._v(\"\\n\\t\\t\\t\\t:\"),_c('span',{staticClass:\"ffz-ct--param\"},[_vm._v(_vm._s(item.last_param))])],2):_vm._e()]):_c('div',{staticClass:\"tw-flex-grow-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(item.data)+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-l-1 tw-flex tw-flex-wrap tw-flex-column tw-justify-content-start tw-align-items-start\"},[(item.chat || item.pubsub)?_c('button',{staticClass:\"tw-button tw-button--text\",on:{\"click\":function($event){return _vm.replayItem(item)}}},[_c('span',{staticClass:\"tw-button__text ffz-i-arrows-cw\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('debug.chat-tester.replay', 'Replay'))+\"\\n\\t\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text\",on:{\"click\":function($event){return _vm.copyItem(item)}}},[_c('span',{staticClass:\"tw-button__text ffz-i-docs\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.copy-json', 'Copy'))+\"\\n\\t\\t\\t\\t\")])])])])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport { DEBUG, SERVER } from 'utilities/constants';\nimport { highlightJson } from 'utilities/dom';\nimport { deep_copy, generateUUID } from 'utilities/object';\nimport { getBuster } from 'utilities/time';\n\nimport SAMPLES from '../sample-chat-messages.json'; // eslint-disable-line no-unused-vars\n\nconst IGNORE_COMMANDS = [\n\t'PONG',\n\t'PING',\n\t'366',\n\t'353'\n];\n\nlet LOADED_SAMPLES = [\n\t{\n\t\t\"name\": \"Ping\",\n\t\t\"data\": \"PING :tmi.twitch.tv\"\n\t}\n];\n\nlet has_loaded_samples = false;\n\nexport default {\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\tconst state = window.history.state;\n\t\tconst samples = deep_copy(LOADED_SAMPLES);\n\t\tconst message = state?.ffz_ct_message ?? samples[0].data;\n\t\tconst topic = state?.ffz_ct_topic ?? samples[0].topic ?? '';\n\n\t\tlet is_custom = true;\n\t\t/*for(const item of samples) {\n\t\t\tif ( ! item.topic )\n\t\t\t\titem.topic = '';\n\t\t\tif ( typeof item.data !== 'string' )\n\t\t\t\titem.data = JSON.stringify(item.data, null, 4);\n\n\t\t\tif (item.data === message && item.topic === topic) {\n\t\t\t\tis_custom = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}*/\n\n\t\treturn {\n\t\t\thas_client: false,\n\n\t\t\tsamples,\n\t\t\tis_custom,\n\t\t\tmessage,\n\t\t\ttopic,\n\n\t\t\treplay_fix: state?.ffz_ct_replay ?? true,\n\t\t\tignore_privmsg: state?.ffz_ct_privmsg ?? false,\n\t\t\tcapture_chat: state?.ffz_ct_chat ?? false,\n\t\t\tcapture_pubsub: state?.ffz_ct_pubsub ?? false,\n\n\t\t\tlog: [],\n\t\t\tlogi: 0\n\t\t}\n\t},\n\n\twatch: {\n\t\tmessage() {\n\t\t\tif ( ! this.is_custom )\n\t\t\t\tthis.$refs.message.value = this.message;\n\t\t},\n\n\t\ttopic() {\n\t\t\tif ( ! this.is_custom )\n\t\t\t\tthis.$refs.topic.value = this.topic;\n\t\t},\n\n\t\tcapture_chat() {\n\t\t\tif ( this.capture_chat )\n\t\t\t\tthis.listenChat();\n\t\t\telse\n\t\t\t\tthis.unlistenChat();\n\t\t},\n\n\t\tcapture_pubsub() {\n\t\t\tif ( this.capture_pubsub )\n\t\t\t\tthis.listenPubsub();\n\t\t\telse\n\t\t\t\tthis.unlistenPubsub();\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.loadSamples();\n\n\t\tthis.chat = this.item.getChat();\n\n\t\tthis.client = this.chat.ChatService.first?.client;\n\t\tthis.has_client = !!this.client;\n\n\t\tif ( this.capture_chat )\n\t\t\tthis.listenChat();\n\n\t\tif ( this.capture_pubsub )\n\t\t\tthis.listenPubsub();\n\t},\n\n\tbeforeDestroy() {\n\t\tthis.unlistenChat();\n\t\tthis.unlistenPubsub();\n\n\t\tthis.client = null;\n\t\tthis.chat = null;\n\t},\n\n\tmounted() {\n\t\tthis.$refs.message.value = this.message;\n\t\tthis.$refs.topic.value = this.topic;\n\t},\n\n\tmethods: {\n\t\thighlightJson(object, pretty) {\n\t\t\treturn highlightJson(object, pretty);\n\t\t},\n\n\t\t// Samples\n\t\tasync loadSamples() {\n\t\t\tif ( has_loaded_samples )\n\t\t\t\treturn;\n\n\t\t\tconst values = await fetch(DEBUG ? SAMPLES : `${SERVER}/script/sample-chat-messages.json?_=${getBuster()}`).then(r => r.ok ? r.json() : null);\n\t\t\tif ( Array.isArray(values) && values.length > 0 ) {\n\t\t\t\thas_loaded_samples = true;\n\n\t\t\t\tfor(const item of values) {\n\t\t\t\t\tif ( ! item.topic )\n\t\t\t\t\t\titem.topic = '';\n\t\t\t\t\tif ( Array.isArray(item.data) )\n\t\t\t\t\t\titem.data = item.data.join('\\n\\n');\n\t\t\t\t\telse if ( typeof item.data !== 'string' )\n\t\t\t\t\t\titem.data = JSON.stringify(item.data, null, 4);\n\t\t\t\t}\n\n\t\t\t\tLOADED_SAMPLES = values;\n\t\t\t\tthis.samples = deep_copy(values);\n\n\t\t\t\tlet is_custom = true;\n\t\t\t\tfor(const item of this.samples) {\n\t\t\t\t\tif (item.data === this.message && item.topic === this.topic) {\n\t\t\t\t\t\tis_custom = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.is_custom = is_custom;\n\t\t\t}\n\t\t},\n\n\t\t// Chat\n\t\tlistenChat() {\n\t\t\tif ( this.listening_chat )\n\t\t\t\treturn;\n\n\t\t\t// Ensure we have the chat client.\n\t\t\tif ( ! this.has_client ) {\n\t\t\t\tthis.client = this.chat.ChatService.first?.client;\n\t\t\t\tthis.has_client = !!this.client;\n\n\t\t\t\tif ( ! this.has_client )\n\t\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Hook into the connection.\n\t\t\tconst conn = this.client.connection;\n\n\t\t\tif ( ! conn.ffzOnSocketMessage )\n\t\t\t\tconn.ffzOnSocketMessage = conn.onSocketMessage;\n\n\t\t\tconn.onSocketMessage = event => {\n\t\t\t\ttry {\n\t\t\t\t\tthis.handleChat(event);\n\t\t\t\t} catch(err) {\n\t\t\t\t\t/* no-op */\n\t\t\t\t}\n\n\t\t\t\treturn conn.ffzOnSocketMessage(event);\n\t\t\t}\n\n\t\t\tif ( conn.ws )\n\t\t\t\tconn.ws.onmessage = conn.onSocketMessage;\n\n\t\t\tthis.addLog(\"Started capturing chat.\");\n\n\t\t\tthis.listening_chat = true;\n\t\t},\n\n\t\tunlistenChat() {\n\t\t\tif ( ! this.listening_chat )\n\t\t\t\treturn;\n\n\t\t\tconst conn = this.client.connection;\n\n\t\t\tconn.onSocketMessage = conn.ffzOnSocketMessage;\n\n\t\t\tif ( conn.ws )\n\t\t\t\tconn.ws.onmessage = conn.onSocketMessage;\n\n\t\t\tthis.addLog(\"Stopped capturing chat.\");\n\n\t\t\tthis.listening_chat = false;\n\t\t},\n\n\t\thandleChat(event) {\n\t\t\tfor(const raw of event.data.split(/\\r?\\n/g)) {\n\t\t\t\tconst msg = this.parseChat(raw);\n\t\t\t\tif ( msg ) {\n\t\t\t\t\tif ( this.ignore_privmsg && msg.command === 'PRIVMSG' )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif ( IGNORE_COMMANDS.includes(msg.command) )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tthis.addLog(msg);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tparseChat(raw) {\n\t\t\tconst msg = this.client.parser.msg(raw);\n\t\t\tmsg.chat = true;\n\n\t\t\tif ( Object.keys(msg.tags).length === 0 )\n\t\t\t\tmsg.tags = null;\n\n\t\t\tif ( msg.params.length > 0 && msg.params[0].startsWith('#') )\n\t\t\t\tmsg.channel = msg.params.shift().slice(1);\n\n\t\t\tif ( msg.params.length > 0 )\n\t\t\t\tmsg.last_param = msg.params.pop();\n\n\t\t\tconst idx = msg.prefix ? msg.prefix.indexOf('!') : -1;\n\n\t\t\tif ( idx === -1 )\n\t\t\t\tmsg.user = null;\n\t\t\telse {\n\t\t\t\tmsg.user = msg.prefix.substr(0, idx);\n\t\t\t\tmsg.prefix = msg.prefix.substr(idx);\n\t\t\t}\n\n\t\t\treturn msg;\n\t\t},\n\n\t\t// Pubsub\n\t\tlistenPubsub() {\n\t\t\tif ( this.listening_pubsub )\n\t\t\t\treturn;\n\n\t\t\tthis.chat.on('site.subpump:pubsub-message', this.handlePubsub, this);\n\t\t\tthis.addLog(\"Started capturing PubSub.\");\n\n\t\t\tthis.listening_pubsub = true;\n\t\t},\n\n\t\tunlistenPubsub() {\n\t\t\tif ( ! this.listening_pubsub )\n\t\t\t\treturn;\n\n\t\t\tthis.chat.off('site.subpump:pubsub-message', this.handlePubsub, this);\n\t\t\tthis.addLog(\"Stopped capturing PubSub.\");\n\n\t\t\tthis.listening_pubsub = false;\n\t\t},\n\n\t\thandlePubsub(event) {\n\n\t\t\tif ( event.prefix === 'video-playback-by-id' )\n\t\t\t\treturn;\n\n\t\t\tthis.addLog({\n\t\t\t\tpubsub: true,\n\t\t\t\ttopic: event.topic,\n\t\t\t\tdata: deep_copy(event.message)\n\t\t\t});\n\t\t},\n\n\t\t// State\n\n\t\tsaveState() {\n\t\t\ttry {\n\t\t\t\twindow.history.replaceState({\n\t\t\t\t\t...window.history.state,\n\t\t\t\t\tffz_ct_replay: this.replay_fix,\n\t\t\t\t\tffz_ct_message: this.message,\n\t\t\t\t\tffz_ct_chat: this.capture_chat,\n\t\t\t\t\tffz_ct_pubsub: this.capture_pubsub,\n\t\t\t\t\tffz_ct_privmsg: this.ignore_privmsg\n\t\t\t\t}, document.title);\n\n\t\t\t} catch(err) {\n\t\t\t\t/* no-op */\n\t\t\t}\n\t\t},\n\n\t\t// Event Handlers\n\n\t\tonSelectChange() {\n\t\t\tconst idx = this.$refs.selector.value,\n\t\t\t\titem = this.samples[idx];\n\n\t\t\tif ( idx !== 'custom' && item?.data ) {\n\t\t\t\tthis.message = item.data;\n\t\t\t\tthis.topic = item.topic ?? '';\n\t\t\t\tthis.is_custom = false;\n\t\t\t} else\n\t\t\t\tthis.is_custom = true;\n\t\t},\n\n\t\tupdateMessage() {\n\t\t\tconst value = this.$refs.message.value,\n\t\t\t\ttopic = this.$refs.topic.value;\n\n\t\t\tlet is_custom = true;\n\t\t\tfor(const item of this.samples) {\n\t\t\t\tif (item.data === value && item.topic === topic) {\n\t\t\t\t\tis_custom = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.is_custom = is_custom;\n\t\t\tif ( this.is_custom ) {\n\t\t\t\tthis.topic = topic;\n\t\t\t\tthis.message = value;\n\t\t\t}\n\t\t},\n\n\t\tonMessageChange() {\n\t\t\tthis.updateMessage();\n\t\t},\n\n\t\tonCheck() {\n\t\t\tthis.replay_fix = this.$refs.replay_fix.checked;\n\t\t\tthis.capture_chat = this.$refs.capture_chat.checked;\n\t\t\tthis.capture_pubsub = this.$refs.capture_pubsub.checked;\n\t\t\tthis.ignore_privmsg = this.$refs.ignore_privmsg.checked;\n\n\t\t\tthis.saveState();\n\t\t},\n\n\t\t// Log\n\n\t\taddLog(msg) {\n\t\t\tif ( typeof msg !== 'object' )\n\t\t\t\tmsg = {\n\t\t\t\t\tdata: msg\n\t\t\t\t};\n\n\t\t\tmsg.timestamp = Date.now();\n\t\t\tmsg._id = this.logi++;\n\n\t\t\tthis.log.unshift(msg);\n\t\t\tconst extra = this.log.length - 100;\n\t\t\tif ( extra > 0 )\n\t\t\t\tthis.log.splice(100, extra);\n\t\t},\n\n\t\tclearLog() {\n\t\t\tthis.log = [];\n\t\t\tthis.addLog('Cleared log.');\n\t\t},\n\n\t\t// Item Actions\n\n\t\tcopyItem(item) {\n\t\t\tlet value;\n\t\t\tif ( item.raw )\n\t\t\t\tvalue = item.raw;\n\t\t\telse if ( item.data )\n\t\t\t\tvalue = item.data;\n\t\t\telse\n\t\t\t\tvalue = item;\n\n\t\t\tif ( typeof value !== 'string' )\n\t\t\t\tvalue = JSON.stringify(value);\n\n\t\t\tnavigator.clipboard.writeText(value);\n\t\t},\n\n\t\tplayMessage() {\n\t\t\t// Check for PubSub\n\t\t\tif ( this.topic.trim().length > 0 ) {\n\t\t\t\tlet data;\n\t\t\t\ttry {\n\t\t\t\t\tdata = JSON.parse(this.message);\n\t\t\t\t} catch(err) {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t\talert(\"Unable to parse message.\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.replayItem({\n\t\t\t\t\tpubsub: true,\n\t\t\t\t\ttopic: this.topic,\n\t\t\t\t\tdata\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst msgs = [];\n\t\t\tconst parts = this.message.split(/\\r?\\n/g);\n\n\t\t\tfor(const part of parts) {\n\t\t\t\ttry {\n\t\t\t\t\tif ( part && part.length > 0 )\n\t\t\t\t\t\tmsgs.push(this.parseChat(part));\n\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t\talert(\"Unable to parse message.\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(const msg of msgs)\n\t\t\t\tthis.replayItem(msg);\n\t\t},\n\n\t\treplayItem(item) {\n\t\t\tif ( item.pubsub ) {\n\t\t\t\tconst channel = this.chat.ChatService.first?.props?.channelID,\n\t\t\t\t\tuser = this.chat.resolve('site').getUser();\n\n\t\t\t\tif ( this.replay_fix ) {\n\t\t\t\t\titem.topic = item.topic.replace(/<channel>/gi, channel);\n\t\t\t\t\titem.topic = item.topic.replace(/<user>/gi, user.id);\n\t\t\t\t\t// TODO: Crawl, replacing ids.\n\t\t\t\t\t// TODO: Update timestamps for pinned chat?\n\t\t\t\t}\n\n\t\t\t\tthis.chat.resolve('site.subpump').simulateMessage(item.topic, item.data);\n\t\t\t}\n\n\t\t\tif ( item.chat ) {\n\t\t\t\t// While building the string, also build colors for the console log.\n\t\t\t\tconst out = [];\n\t\t\t\tconst colors = [];\n\n\t\t\t\tif ( item.tags ) {\n\t\t\t\t\tout.push('@');\n\t\t\t\t\tcolors.push('gray');\n\n\t\t\t\t\tfor(const [key, val] of Object.entries(item.tags)) {\n\t\t\t\t\t\tlet v = val;\n\n\t\t\t\t\t\t// If the tag is \"id\", return a new id so the message\n\t\t\t\t\t\t// won't be deduplicated automatically.\n\t\t\t\t\t\tif ( key === 'id' && this.replay_fix )\n\t\t\t\t\t\t\tv = generateUUID();\n\n\t\t\t\t\t\tout.push(key);\n\t\t\t\t\t\tout.push('=');\n\t\t\t\t\t\tout.push(`${v}`);\n\t\t\t\t\t\tout.push(';');\n\t\t\t\t\t\tcolors.push('orange');\n\t\t\t\t\t\tcolors.push('gray');\n\t\t\t\t\t\tcolors.push('white');\n\t\t\t\t\t\tcolors.push('gray');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( item.user || item.prefix ) {\n\t\t\t\t\tif ( out.length ) {\n\t\t\t\t\t\tout.push(' ');\n\t\t\t\t\t\tcolors.push('');\n\t\t\t\t\t}\n\n\t\t\t\t\tout.push(':');\n\t\t\t\t\tcolors.push('gray');\n\t\t\t\t\tif (item.user) {\n\t\t\t\t\t\tout.push(item.user);\n\t\t\t\t\t\tcolors.push('green');\n\t\t\t\t\t}\n\t\t\t\t\tif (item.prefix) {\n\t\t\t\t\t\tout.push(item.prefix);\n\t\t\t\t\t\tcolors.push('gray');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( out.length ) {\n\t\t\t\t\tout.push(' ');\n\t\t\t\t\tcolors.push('');\n\t\t\t\t}\n\n\t\t\t\tout.push(item.command);\n\t\t\t\tcolors.push('orange');\n\n\t\t\t\t// If there's a channel, use the current channel rather\n\t\t\t\t// than the logged channel.\n\t\t\t\tif ( item.channel ) {\n\t\t\t\t\tout.push(` #`);\n\t\t\t\t\tcolors.push('gray');\n\t\t\t\t\tout.push(this.replay_fix ? this.chat.ChatService.first?.props?.channelLogin ?? item.channel : item.channel);\n\t\t\t\t\tcolors.push('green');\n\t\t\t\t}\n\n\t\t\t\tfor(const para of item.params) {\n\t\t\t\t\tout.push(` ${para}`);\n\t\t\t\t\tcolors.push('skyblue');\n\t\t\t\t}\n\n\t\t\t\tif ( item.last_param ) {\n\t\t\t\t\tout.push(` :`);\n\t\t\t\t\tcolors.push('gray');\n\t\t\t\t\tout.push(item.last_param);\n\t\t\t\t\tcolors.push('skyblue');\n\t\t\t\t}\n\n\t\t\t\tconst msg = out.join(''),\n\t\t\t\t\tconn = this.client.connection,\n\t\t\t\t\thandler = conn.ffzOnSocketMessage ?? conn.onSocketMessage;\n\n\t\t\t\tconst log_msg = out.join('%c'),\n\t\t\t\t\tlog_colors = colors.map(x => x?.length ? `color: ${x};` : '');\n\n\t\t\t\tthis.chat.log.debugColor(`Injecting chat message: %c${log_msg}`, log_colors);\n\n\t\t\t\thandler.call(conn, {\n\t\t\t\t\tdata: msg\n\t\t\t\t});\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./chat-tester.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./chat-tester.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./chat-tester.vue?vue&type=template&id=3c3fee36&\"\nimport script from \"./chat-tester.vue?vue&type=script&lang=js&\"\nexport * from \"./chat-tester.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-c-text-alt-2\"},[_vm._v(\"\\n\\t\"+_vm._s(_vm.t('setting.tooltip-example', 'For an example, please hover this link:'))+\"\\n\\t\"),_c('a',{staticClass:\"ffz-tooltip\",attrs:{\"href\":_vm.url,\"data-url\":_vm.url,\"data-tooltip-type\":\"link\",\"data-force-tooltip\":\"true\",\"data-is-mail\":\"false\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.url)+\"\\n\\t\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nconst VIDEOS = [\n\t'https://www.youtube.com/watch?v=BFSWlDpA6C4'\n];\n\nexport default {\n\tprops: ['context', 'item'],\n\n\tdata() {\n\t\tconst url = VIDEOS[Math.floor(Math.random() * VIDEOS.length)];\n\n\t\treturn {\n\t\t\turl\n\t\t}\n\t}\n\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./chat-tooltip-example.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./chat-tooltip-example.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./chat-tooltip-example.vue?vue&type=template&id=0ee15dd4&\"\nimport script from \"./chat-tooltip-example.vue?vue&type=script&lang=js&\"\nexport * from \"./chat-tooltip-example.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--clear-settings tw-pd-t-05\"},[_c('div',{staticClass:\"tw-c-background-accent tw-c-text-overlay tw-pd-1 tw-mg-b-2\"},[_c('h3',{staticClass:\"ffz-i-attention\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.clear.warning', 'Be careful! This is permanent.'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('markdown',{attrs:{\"source\":_vm.t('setting.clear.warning-explain', 'Deleting your data with this tool cannot be reversed. Make sure you have a backup!')}})],1),_vm._v(\" \"),(! _vm.started)?_c('div',[_c('div',{staticClass:\"tw-mg-b-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.clear.step-1', 'Please select which types of data you wish to clear:'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-l-5\"},_vm._l((_vm.types),function(type,key){return _c('div',{key:key,staticClass:\"ffz-checkbox tw-relative tw-mg-y-05\"},[_c('input',{ref:key,refInFor:true,staticClass:\"ffz-checkbox__input\",attrs:{\"id\":key,\"type\":\"checkbox\"}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":key}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t((\"setting.clear.opt.\" + key), type.label || key))+\"\\n\\t\\t\\t\\t\\t\")])])])}),0),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-t-1 tw-border-t tw-pd-t-1 tw-mg-b-1\"},[_c('markdown',{attrs:{\"source\":_vm.t('setting.clear.step-2', 'Are you really sure? Please enter `{code}` in the text box below to confirm.', {code: _vm.code})}})],1),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-l-5\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.entered),expression:\"entered\"}],staticClass:\"tw-block tw-border-radius-medium tw-font-size-6 ffz-input tw-pd-x-1 tw-pd-y-05\",attrs:{\"type\":\"text\",\"autocapitalize\":\"off\",\"autocorrect\":\"off\"},domProps:{\"value\":(_vm.entered)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.entered=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-t-1 tw-border-t tw-pd-t-1 tw-mg-b-1\"},[_c('div',{staticClass:\"tw-mg-l-5\"},[_c('button',{staticClass:\"tw-button\",class:{'tw-button--disabled': ! _vm.enabled},on:{\"click\":_vm.clear}},[_vm._m(0),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.clear.start', 'Clear My Data'))+\"\\n\\t\\t\\t\\t\\t\")])])])])]):_vm._e(),_vm._v(\" \"),(_vm.started && _vm.running)?_c('div',[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.clear.running', 'Clearing settings. Please wait...'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.started && ! _vm.running)?_c('div',[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.clear.done', 'Your settings have been cleared. Please refresh any applicable Twitch pages to ensure no cached data remains.'))+\"\\n\\t\")]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-trash\"})])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./clear-settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./clear-settings.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {generateHex} from 'utilities/object';\nimport { maybe_call } from 'src/utilities/object';\n\n\nexport default {\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\tconst ffz = this.context.getFFZ(),\n\t\t\tsettings = ffz.resolve('settings');\n\n\t\treturn {\n\t\t\ttypes: settings.getClearables(),\n\t\t\tentered: '',\n\t\t\tcode: generateHex(8),\n\n\t\t\tstarted: false,\n\t\t\trunning: false,\n\n\t\t\tmessage: null\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tenabled() {\n\t\t\treturn this.code === this.entered\n\t\t}\n\t},\n\n\tmethods: {\n\t\tasync clear() {\n\t\t\tif ( ! this.enabled )\n\t\t\t\treturn;\n\n\t\t\tthis.started = true;\n\t\t\tthis.running = true;\n\n\t\t\tconst ffz = this.context.getFFZ(),\n\t\t\t\tsettings = ffz.resolve('settings'),\n\t\t\t\tprovider = settings.provider;\n\n\t\t\tfor(const [key, type] of Object.entries(this.types)) {\n\t\t\t\tif ( ! this.$refs[key]?.[0]?.checked )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tif ( type.clear )\n\t\t\t\t\tawait type.clear.call(this, provider, settings); // eslint-disable-line no-await-in-loop\n\t\t\t\telse {\n\t\t\t\t\tlet keys = maybe_call(type.keys, this, provider, settings);\n\t\t\t\t\tif ( keys instanceof Promise )\n\t\t\t\t\t\tkeys = await keys; // eslint-disable-line no-await-in-loop\n\n\t\t\t\t\tif ( Array.isArray(keys) )\n\t\t\t\t\t\tfor(const key of keys)\n\t\t\t\t\t\t\tprovider.delete(key);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.running = false;\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./clear-settings.vue?vue&type=template&id=b8f14ba8&lang=html&\"\nimport script from \"./clear-settings.vue?vue&type=script&lang=js&\"\nexport * from \"./clear-settings.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--emote-priorities tw-border-t tw-pd-y-1\"},[(_vm.source && _vm.source !== _vm.profile)?_c('div',{staticClass:\"tw-c-background-accent tw-c-text-overlay tw-pd-1 tw-mg-b-1\"},[_c('span',{staticClass:\"ffz-i-info\"}),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.warn-inheritence', 'These values are being overridden by another profile and may not take effect.'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-border-b tw-mg-b-1 tw-pd-b-1\"},[_c('p',[_vm._v(_vm._s(_vm.t('setting.priorities.about', 'Here, you can change the priorities of different emote providers. Please note that the provider priority (FFZ, etc.) is still secondary to the source priority (personal emotes > room emotes > global emotes).')))])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center tw-pd-b-05\"},[_c('div',{staticClass:\"tw-flex-grow-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.priorities.drag', 'Drag providers to change their priority.'))+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.val.length)?_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.clear}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.priorities.delete', \"Delete the priorities in this settings profile.\"))+\"\\n\\t\\t\\t\")])]):_vm._e()]),_vm._v(\" \"),_c('div',{ref:\"list\",staticClass:\"ffz--action-list\"},[(! _vm.val.length)?_c('div',{staticClass:\"tw-c-text-alt-2 tw-font-size-4 tw-align-center tw-c-text-alt-2 tw-pd-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.priorities.none', 'no priorities are defined in this profile'))+\"\\n\\n\\t\\t\\t\"),_c('div',{staticClass:\"tw-mg-t-1\"},[_c('button',{staticClass:\"tw-button tw-button--text\",on:{\"click\":_vm.addPriorities}},[_c('span',{staticClass:\"tw-button__text ffz-i-add\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.priorities.add', 'Add Priorities'))+\"\\n\\t\\t\\t\\t\\t\")])])])]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.val),function(provider){return _c('section',{key:provider.id},[_c('div',{staticClass:\"ffz--action tw-elevation-1 tw-c-background-base tw-border tw-pd-y-05 tw-pd-r-1 tw-mg-y-05 tw-flex tw-flex-nowrap tw-align-items-center\"},[_vm._m(0,true),_vm._v(\" \"),(provider.font_icon)?_c('figure',{staticClass:\"tw-font-size-2 tw-mg-r-1\",class:provider.font_icon}):(provider.icon)?_c('div',{staticClass:\"tw-flex-shrink-0 ffz-card-img--size-4 tw-overflow-hidden tw-mg-r-1\"},[_c('img',{staticClass:\"tw-image\",attrs:{\"src\":provider.icon}})]):_vm._e(),_vm._v(\" \"),_c('div',[(! provider.name)?_c('h4',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('emote-source.unknown', 'Unknown ({id})', provider))+\"\\n\\t\\t\\t\\t\\t\")]):_c('h4',[_vm._v(_vm._s(provider.i18n_key\n\t\t\t\t\t\t\t? _vm.t(provider.i18n_key, provider.name, provider)\n\t\t\t\t\t\t\t: provider.name))]),_vm._v(\" \"),(provider.description)?_c('div',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(provider.desc_i18n_key ? _vm.t(provider.desc_i18n_key, provider.description, provider) : provider.description)+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e()])])])})],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-flex tw-flex-shrink-0 tw-align-items-start handle tw-pd-x-05 tw-pd-t-1 tw-pd-b-05\"},[_c('span',{staticClass:\"ffz-i-ellipsis-vert\"})])}]\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport settingMixin from '../setting-mixin';\nimport Sortable from 'sortablejs';\nimport { deep_copy } from 'utilities/object';\n\nlet last_id = 0;\n\nexport default {\n\tmixins: [settingMixin],\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tval() {\n\t\t\tif ( ! this.has_value )\n\t\t\t\treturn [];\n\n\t\t\tconst missing = new Set(this.data.keys());\n\t\t\tconst out = this.value.map(id => {\n\t\t\t\tmissing.delete(id);\n\t\t\t\tconst data = this.data.get(id);\n\t\t\t\treturn data\n\t\t\t\t\t? data\n\t\t\t\t\t: {id};\n\t\t\t});\n\n\t\t\tfor(const key of missing) {\n\t\t\t\tconst data = this.data.get(key);\n\t\t\t\tout.push(data);\n\t\t\t}\n\n\t\t\treturn out;\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis._sortable = Sortable.create(this.$refs.list, {\n\t\t\tdraggable: 'section',\n\t\t\tfilter: 'button',\n\n\t\t\tonUpdate: event => {\n\t\t\t\tif ( event.newIndex === event.oldIndex )\n\t\t\t\t\treturn;\n\n\t\t\t\tconst new_val = Array.from(this.val);\n\t\t\t\tnew_val.splice(event.newIndex, 0, ...new_val.splice(event.oldIndex, 1));\n\t\t\t\tthis.setValue(new_val);\n\t\t\t}\n\t\t});\n\t},\n\n\tbeforeDestroy() {\n\t\tif ( this._sortable )\n\t\t\tthis._sortable.destroy();\n\n\t\tthis._sortable = null;\n\t},\n\n\tmethods: {\n\t\tsetValue(input) {\n\t\t\tif (input?.length > 0)\n\t\t\t\tthis.set(input.map(x => x.id));\n\t\t\telse\n\t\t\t\tthis.clear();\n\t\t},\n\n\t\taddPriorities() {\n\t\t\tthis.set([...this.data.keys()]);\n\t\t}\n\t}\n\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./emote-priorities.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./emote-priorities.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./emote-priorities.vue?vue&type=template&id=bd0e079a&lang=html&\"\nimport script from \"./emote-priorities.vue?vue&type=script&lang=js&\"\nexport * from \"./emote-priorities.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--experiments tw-pd-t-05\"},[_c('div',{staticClass:\"tw-pd-b-1 tw-mg-b-1 tw-border-b\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.experiments.about', 'This feature allows you to override experiment values. Please note that, for most experiments, you may have to refresh the page for your changes to take effect.'))+\"\\n\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-b-2 tw-flex tw-align-items-center\"},[_c('div',{staticClass:\"tw-flex-grow-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.unique-id', 'Unique ID: {id}', {id: _vm.unique_id}))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('select',{ref:\"sort_select\",staticClass:\"tw-border-radius-medium tw-font-size-6 ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-x-05\",on:{\"change\":_vm.onSort}},[_c('option',{domProps:{\"selected\":_vm.sort_by === 0}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.sort-name', 'Sort By: Name'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{domProps:{\"selected\":_vm.sort_by === 1}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.sort-rarity', 'Sort By: Rarity'))+\"\\n\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-b-2 tw-flex tw-align-items-center\"},[_c('div',{staticClass:\"tw-flex-grow-1\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-checkbox tw-relative\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.unused),expression:\"unused\"}],ref:\"unused\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"unused\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.unused)?_vm._i(_vm.unused,null)>-1:(_vm.unused)},on:{\"change\":function($event){var $$a=_vm.unused,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.unused=$$a.concat([$$v]))}else{$$i>-1&&(_vm.unused=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.unused=$$c}}}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"unused\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.show-unused', 'Display unused experiments.'))+\"\\n\\t\\t\\t\\t\")])])])]),_vm._v(\" \"),_c('h3',{staticClass:\"tw-mg-b-1\"},[_c('span',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.ffz', 'FrankerFaceZ Experiments'))+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.filter)?_c('span',{staticClass:\"tw-mg-l-1 tw-font-size-base tw-regular tw-c-text-alt-2\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.visible', '(Showing {visible,number} of {total,number})', {\n\t\t\t\tvisible: _vm.visible_ffz.length,\n\t\t\t\ttotal: _vm.sorted_ffz.length\n\t\t\t}))+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"ffz--experiment-list\"},[_vm._l((_vm.visible_ffz),function(ref){\n\t\t\tvar key = ref.key;\n\t\t\tvar exp = ref.exp;\nreturn _c('section',{key:key,attrs:{\"data-key\":key}},[_c('div',{staticClass:\"tw-elevation-1 tw-c-background-base tw-border tw-pd-y-05 tw-pd-x-1 tw-mg-y-05 tw-flex tw-flex-nowrap\"},[_c('div',{staticClass:\"tw-flex-grow-1\"},[_c('h4',[_vm._v(_vm._s(exp.name ? exp.name : key))]),_vm._v(\" \"),(exp.description)?_c('div',{staticClass:\"description\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(exp.description)+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-flex-shrink-0 tw-align-items-start\"},[_c('select',{staticClass:\"tw-border-radius-medium tw-font-size-6 ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-x-05\",attrs:{\"data-key\":key},on:{\"change\":function($event){return _vm.onChange($event)}}},_vm._l((exp.groups),function(i,idx){return _c('option',{key:idx,domProps:{\"selected\":i.value === exp.value}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.entry', '{value,tostring} (weight: {weight,tostring})', i))+\"\\n\\t\\t\\t\\t\\t\\t\")])}),0),_vm._v(\" \"),_c('button',{staticClass:\"tw-mg-t-05 tw-button tw-button--text ffz-il-tooltip__container\",class:{'tw-button--disabled': exp.default},attrs:{\"disabled\":exp.default},on:{\"click\":function($event){return _vm.reset(key)}}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('span',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.reset', 'Reset to Default'))+\"\\n\\t\\t\\t\\t\\t\\t\")])])])])])}),_vm._v(\" \"),(! Object.keys(_vm.ffz_data).length)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.none', 'There are no current experiments.'))+\"\\n\\t\\t\")]):(! _vm.visible_ffz.length)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.none-filter', 'There are no matching experiments.'))+\"\\n\\t\\t\")]):_vm._e()],2),_vm._v(\" \"),_c('h3',{staticClass:\"tw-mg-t-5 tw-mg-b-1\"},[_c('span',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.twitch', 'Twitch Experiments'))+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.experiments_locked && _vm.filter)?_c('span',{staticClass:\"tw-mg-l-1 tw-font-size-base tw-regular tw-c-text-alt-2\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.visible', '(Showing {visible,number} of {total,number})', {\n\t\t\t\tvisible: _vm.visible_twitch.length,\n\t\t\t\ttotal: _vm.sorted_twitch.length\n\t\t\t}))+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),(_vm.experiments_locked)?_c('section',[_c('div',{staticClass:\"tw-c-background-accent tw-c-text-overlay tw-pd-1 tw-mg-b-2\"},[_c('h3',{staticClass:\"ffz-i-attention\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.dev-warning', \"It's dangerous to go at all.\"))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('markdown',{attrs:{\"source\":_vm.t('setting.dev-warning.explain', 'Be careful, this is an advanced feature intended for developer use only. Normal users should steer clear. Adjusting your experiments can have unexpected impacts on your Twitch experience. FrankerFaceZ is not responsible for any issues you encounter as a result of tampering with experiments, and we will not provide support.\\n\\nIf you\\'re sure about this, please type `{code}` into the box below and hit enter.', {code: _vm.code})}})],1),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('input',{ref:\"code\",staticClass:\"tw-block tw-full-width tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05 tw-mg-b-5\",attrs:{\"type\":\"text\",\"autocapitalize\":\"off\",\"autocorrect\":\"off\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.enterCode.apply(null, arguments)}}})])]):_c('section',[_c('div',{staticClass:\"ffz--experiment-list\"},[_vm._l((_vm.visible_twitch),function(ref){\n\t\t\tvar key = ref.key;\n\t\t\tvar exp = ref.exp;\nreturn _c('section',{key:key,attrs:{\"data-key\":key}},[_c('div',{staticClass:\"ffz--experiment-row tw-elevation-1 tw-c-background-base tw-border tw-pd-y-05 tw-pd-x-1 tw-mg-y-05 tw-flex\",class:{live: exp.in_use}},[(_vm.unused)?_c('div',{staticClass:\"tw-flex tw-flex-shrink-0 tw-align-items-center tw-border-r tw-mg-r-1 tw-pd-r-1\"},[(exp.in_use)?_c('div',{staticClass:\"ffz--profile__icon ffz-i-ok ffz-il-tooltip__container\"},[_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-left\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.active', 'This experiment is active.'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\")])]):_c('div',{staticClass:\"ffz--profile__icon ffz-i-cancel ffz-il-tooltip__container\"},[_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-left\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.inactive', 'This experiment is not active.'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex-grow-1\"},[_c('h4',[_vm._v(_vm._s(exp.name))]),_vm._v(\" \"),_c('div',{staticClass:\"description\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(exp.remainder)+\"\\n\\t\\t\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-flex-shrink-0 tw-align-items-start\"},[_c('select',{staticClass:\"tw-border-radius-medium tw-font-size-6 ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-x-05\",attrs:{\"data-key\":key},on:{\"change\":function($event){return _vm.onTwitchChange($event)}}},[(exp.value === null)?_c('option',{domProps:{\"selected\":exp.default}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.unset', 'unset'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_vm._l((exp.groups),function(i,idx){return _c('option',{key:idx,domProps:{\"selected\":i.value === exp.value}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.entry', '{value,tostring} (weight: {weight,tostring})', i))+\"\\n\\t\\t\\t\\t\\t\\t\\t\")])})],2),_vm._v(\" \"),_c('button',{staticClass:\"tw-mg-t-05 tw-button tw-button--text ffz-il-tooltip__container\",class:{'tw-button--disabled': exp.default},attrs:{\"disabled\":exp.default},on:{\"click\":function($event){return _vm.resetTwitch(key)}}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('span',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.reset', 'Reset to Default'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\")])])])])])}),_vm._v(\" \"),(! Object.keys(_vm.twitch_data).length)?_c('div',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.none', 'There are no current experiments.'))+\"\\n\\t\\t\\t\")]):(! _vm.visible_twitch.length)?_c('div',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.experiments.none-filter', 'There are no matching experiments.'))+\"\\n\\t\\t\\t\")]):_vm._e()],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {has, pick_random} from 'utilities/object';\n\nfunction matches(exp, filter) {\n\treturn (exp.key && exp.key.toLowerCase().includes(filter)) ||\n\t\t\t(exp.exp && (\n\t\t\t\t(exp.exp.name && exp.exp.name.toLowerCase().includes(filter)) ||\n\t\t\t\t(exp.exp.description && exp.exp.description.toLowerCase().includes(filter))\n\t\t\t));\n}\n\nconst CODES = [\n\t'sv_cheats 1',\n\t'idspispopd',\n\t'rosebud',\n\t'how do you turn this on'\n];\n\nexport default {\n\tprops: ['item', 'filter'],\n\n\tdata() {\n\t\treturn {\n\t\t\tcode: pick_random(CODES),\n\t\t\texperiments_locked: this.item.is_locked(),\n\t\t\tsort_by: 1,\n\t\t\tunused: false,\n\t\t\tunique_id: this.item.unique_id(),\n\t\t\tffz_data: this.item.ffz_data(),\n\t\t\ttwitch_data: this.item.twitch_data()\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tsorted_ffz() {\n\t\t\treturn this.sorted(this.ffz_data);\n\t\t},\n\n\t\tvisible_ffz() {\n\t\t\tlet out = this.sorted_ffz;\n\n\t\t\tif ( this.filter?.query )\n\t\t\t\tout = out.filter(x => matches(x, this.filter.query));\n\n\t\t\tif ( this.filter?.flags && this.filter.flags.has('modified') )\n\t\t\t\tout = out.filter(x => this.item.hasOverride(x.key));\n\n\t\t\treturn out;\n\t\t},\n\n\t\tsorted_twitch() {\n\t\t\treturn this.sorted(this.twitch_data);\n\t\t},\n\n\t\tvisible_twitch() {\n\t\t\tlet out = this.sorted_twitch;\n\n\t\t\tif ( this.filter?.query )\n\t\t\t\tout = out.filter(x => matches(x, this.filter.query));\n\n\t\t\tif ( this.filter?.flags && this.filter.flags.has('modified') )\n\t\t\t\tout = out.filter(x => this.item.hasTwitchOverride(x.key));\n\n\t\t\treturn out;\n\t\t}\n\t},\n\n\tcreated() {\n\t\tfor(const key in this.ffz_data)\n\t\t\tif ( has(this.ffz_data, key) ) {\n\t\t\t\tconst exp = this.ffz_data[key];\n\t\t\t\tthis.$set(exp, 'value', this.item.getAssignment(key));\n\t\t\t\tthis.$set(exp, 'default', ! this.item.hasOverride(key));\n\n\t\t\t\texp.total = exp.groups.reduce((a,b) => a + b.weight, 0);\n\t\t\t\tthis.calculateRarity(exp);\n\n\t\t\t}\n\n\t\tfor(const key in this.twitch_data)\n\t\t\tif ( has(this.twitch_data, key) ) {\n\t\t\t\tconst exp = this.twitch_data[key];\n\t\t\t\tthis.$set(exp, 'value', this.item.getTwitchAssignment(key));\n\t\t\t\tthis.$set(exp, 'default', ! this.item.hasTwitchOverride(key));\n\n\t\t\t\texp.in_use = this.item.usingTwitchExperiment(key);\n\t\t\t\texp.remainder = `v: ${exp.v}, type: ${this.item.getTwitchType(exp.t)}`;\n\t\t\t\texp.total = exp.groups.reduce((a,b) => a + b.weight, 0);\n\t\t\t\tthis.calculateRarity(exp);\n\t\t\t}\n\n\t\tthis.item.on(':changed', this.valueChanged, this);\n\t\tthis.item.on(':twitch-changed', this.twitchValueChanged, this);\n\t},\n\n\tbeforeDestroy() {\n\t\tthis.item.off(':changed', this.valueChanged, this);\n\t\tthis.item.off(':twitch-changed', this.twitchValueChanged, this);\n\t},\n\n\tmethods: {\n\t\tenterCode() {\n\t\t\tif ( this.$refs.code.value !== this.code )\n\t\t\t\treturn;\n\n\t\t\tthis.experiments_locked = false;\n\t\t\tthis.item.unlock();\n\t\t},\n\n\t\tcalculateRarity(exp) {\n\t\t\tlet rarity;\n\t\t\tfor(const group of exp.groups)\n\t\t\t\tif ( group.value === exp.value ) {\n\t\t\t\t\trarity = group.weight / exp.total;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\tthis.$set(exp, 'rarity', rarity);\n\t\t},\n\n\t\tsorted(data) {\n\t\t\tconst out = [];\n\t\t\tfor(const [k,v] of Object.entries(data)) {\n\t\t\t\tif ( ! this.unused && v.in_use === false )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tout.push({key: k, exp: v});\n\t\t\t}\n\n\t\t\t//const out = Object.entries(data).map(x => ({key: x[0], exp: x[1]}));\n\n\t\t\tout.sort((a,b) => {\n\t\t\t\tconst a_use = a.exp.in_use,\n\t\t\t\t\tb_use = b.exp.in_use;\n\n\t\t\t\tif ( a_use && ! b_use ) return -1;\n\t\t\t\tif ( ! a_use && b_use ) return 1;\n\n\t\t\t\tif ( this.sort_by === 1 ) {\n\t\t\t\t\tconst a_r = a.exp.rarity,\n\t\t\t\t\t\tb_r = b.exp.rarity;\n\n\t\t\t\t\tif ( a_r < b_r ) return -1;\n\t\t\t\t\tif ( a_r > b_r ) return 1;\n\t\t\t\t}\n\n\t\t\t\tconst a_n = a.exp.name?.toLowerCase() ?? a.key?.toLowerCase(),\n\t\t\t\t\tb_n = b.exp.name?.toLowerCase() ?? b.key?.toLowerCase();\n\n\t\t\t\tif ( a_n < b_n ) return -1;\n\t\t\t\tif ( a_n > b_n ) return 1;\n\n\t\t\t\treturn 0;\n\t\t\t});\n\n\t\t\treturn out;\n\t\t},\n\n\t\treset(key) {\n\t\t\tthis.item.deleteOverride(key);\n\t\t\tconst exp = this.ffz_data[key];\n\t\t\tif ( exp )\n\t\t\t\texp.default = ! this.item.hasOverride(key);\n\t\t},\n\n\t\tresetTwitch(key) {\n\t\t\tthis.item.deleteTwitchOverride(key);\n\t\t\tconst exp = this.twitch_data[key];\n\t\t\tif ( exp )\n\t\t\t\texp.default = ! this.item.hasTwitchOverride(key);\n\t\t},\n\n\t\tonSort() {\n\t\t\tthis.sort_by = this.$refs.sort_select.selectedIndex;\n\t\t},\n\n\t\tonChange(event) {\n\t\t\tconst el = event.target,\n\t\t\t\tidx = el.selectedIndex,\n\t\t\t\tkey = el.dataset.key;\n\n\t\t\tconst exp = this.ffz_data[key],\n\t\t\t\tgroups = exp && exp.groups,\n\t\t\t\tentry = groups && groups[idx];\n\n\t\t\tif ( entry )\n\t\t\t\tthis.item.setOverride(key, entry.value);\n\t\t},\n\n\t\tonTwitchChange(event) {\n\t\t\tconst el = event.target,\n\t\t\t\tidx = el.selectedIndex,\n\t\t\t\tkey = el.dataset.key;\n\n\t\t\tconst exp = this.twitch_data[key],\n\t\t\t\toffset = exp.in_use ? 0 : 1,\n\t\t\t\tgroups = exp && exp.groups,\n\t\t\t\tentry = groups && groups[idx - offset];\n\n\t\t\tif ( entry )\n\t\t\t\tthis.item.setTwitchOverride(key, entry.value);\n\t\t},\n\n\t\tvalueChanged(key, value) {\n\t\t\tconst exp = this.ffz_data[key];\n\t\t\tif ( exp ) {\n\t\t\t\texp.value = value;\n\t\t\t\texp.default = ! this.item.hasOverride(key);\n\t\t\t\tthis.calculateRarity(exp);\n\t\t\t}\n\t\t},\n\n\t\ttwitchValueChanged(key, value) {\n\t\t\tconst exp = this.twitch_data[key];\n\t\t\tif ( exp ) {\n\t\t\t\texp.value = value;\n\t\t\t\texp.default = ! this.item.hasTwitchOverride(key);\n\t\t\t\tthis.calculateRarity(exp);\n\t\t\t}\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./experiments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./experiments.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./experiments.vue?vue&type=template&id=42747130&lang=html&\"\nimport script from \"./experiments.vue?vue&type=script&lang=js&\"\nexport * from \"./experiments.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--widget ffz--filter-editor\"},[_c('div',{ref:\"list\",staticClass:\"ffz--rule-list\"},[(! _vm.editing || ! _vm.editing.length)?_c('section',{staticClass:\"tw-mg-x-1 tw-mg-y-2 tw-c-text-alt-2 tw-align-center sortable-ignore\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.filters.empty', '(no filters)'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.editing),function(rule){return _c('filter-rule-editor',{key:rule.id,attrs:{\"value\":rule,\"disabled\":_vm.disabled,\"filters\":_vm.filters,\"preview\":_vm.preview,\"context\":_vm.context,\"data-id\":rule.id},on:{\"input\":function($event){return _vm.updateRule(rule.id, $event)},\"delete\":function($event){return _vm.deleteRule(rule.id)}}})})],2),_vm._v(\" \"),(_vm.adding || (_vm.maxRules === 1 && _vm.canAddRule))?_c('div',{staticClass:\"tw-flex tw-align-items-center tw-mg-y-1\"},[_vm._m(0),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-mg-l-1\",on:{\"click\":_vm.addRule}},[_c('span',{staticClass:\"tw-button__text ffz-i-plus\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filters.add', 'Add'))+\"\\n\\t\\t\\t\")])])]):(_vm.canAddRule)?_c('button',{staticClass:\"tw-button ffz-button--hollow tw-mg-y-05 tw-full-width\",on:{\"click\":function($event){_vm.adding = true}}},[_c('span',{staticClass:\"tw-button__text ffz-i-plus\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.filters.add-new', 'Add New Rule'))+\"\\n\\t\\t\")])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('select',{ref:\"add_box\",staticClass:\"tw-flex-grow-1 tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-select\"},_vm._l((_vm.filters),function(filter,key){return _c('option',{key:key,domProps:{\"value\":key}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t(filter.i18n, filter.title))+\"\\n\\t\\t\\t\")])}),0)}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./filter-editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./filter-editor.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport Sortable from 'sortablejs';\nimport { deep_copy, maybe_call, generateUUID } from 'utilities/object';\nimport { hasSharedParent } from 'utilities/dom';\n\nexport default {\n\tprops: {\n\t\tvalue: Array,\n\t\tfilters: Object,\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tmaxRules: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 0\n\t\t},\n\t\tpreview: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true\n\t\t},\n\t\tcontext: {\n\t\t\ttype: Object,\n\t\t\trequired: false\n\t\t}\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tadding: false,\n\t\t\tresetting: false,\n\t\t\tediting: this.copyValue()\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tcanAddRule() {\n\t\t\tif ( this.disabled )\n\t\t\t\treturn false;\n\t\t\treturn ! this.maxRules || (this.editing.length < this.maxRules);\n\t\t}\n\t},\n\n\twatch: {\n\t\tvalue() {\n\t\t\tthis.resetting = true;\n\t\t\tthis.editing = this.copyValue();\n\t\t},\n\n\t\tediting: {\n\t\t\thandler() {\n\t\t\t\tif ( ! this.resetting && ! this.disabled)\n\t\t\t\t\tthis.$emit('input', this.editing)\n\t\t\t\tthis.resetting = false;\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.sortable = Sortable.create(this.$refs.list, {\n\t\t\tdraggable: 'section',\n\t\t\tfilter: 'button,.sortable-ignore',\n\t\t\tswapThreshold: 0.33,\n\t\t\tgroup: {\n\t\t\t\tname: 'ffz-filter-editor',\n\t\t\t\tput: (to, from, dragged) => {\n\t\t\t\t\tif ( ! this.canAddRule )\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t// Avoid moving an element into its child list.\n\t\t\t\t\tif ( dragged && dragged.contains && dragged.contains(to.el) )\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t// Check to see if we have a common ancester for the two\n\t\t\t\t\t// draggables.\n\t\t\t\t\tif ( ! hasSharedParent(to.el, from.el, '.ffz--rule-list') )\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsetData: (data, el) => {\n\t\t\t\tconst rule = this.getRule(el.dataset.id);\n\t\t\t\tif ( rule ) {\n\t\t\t\t\tdata.setData('JSON', JSON.stringify(rule));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonAdd: event => {\n\t\t\t\tif ( this.disabled ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( ! this.canAddRule ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet rule;\n\t\t\t\ttry {\n\t\t\t\t\trule = JSON.parse(event.originalEvent.dataTransfer.getData('JSON'));\n\t\t\t\t} catch(err) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.editing.splice(event.newDraggableIndex, 0, rule);\n\t\t\t},\n\n\t\t\tonRemove: event => {\n\t\t\t\tif ( this.disabled ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet rule;\n\t\t\t\ttry {\n\t\t\t\t\trule = JSON.parse(event.originalEvent.dataTransfer.getData('JSON'));\n\t\t\t\t} catch(err) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.deleteRule(rule.id);\n\t\t\t},\n\n\t\t\tonUpdate: event => {\n\t\t\t\tif ( this.disabled )\n\t\t\t\t\treturn;\n\n\t\t\t\tif ( event.newIndex === event.oldIndex )\n\t\t\t\t\treturn;\n\n\t\t\t\tthis.editing.splice(event.newIndex, 0, ...this.editing.splice(event.oldIndex, 1));\n\t\t\t}\n\t\t});\n\t},\n\n\tbeforeDestroy() {\n\t\tif ( this.sortable ) {\n\t\t\tthis.sortable.destroy();\n\t\t\tthis.sortable = null;\n\t\t}\n\t},\n\n\tmethods: {\n\t\tgetRule(id, start) {\n\t\t\tif ( ! start )\n\t\t\t\tstart = this.editing;\n\n\t\t\tif ( ! Array.isArray(start) )\n\t\t\t\treturn null;\n\n\t\t\tfor(let i=0; i < start.length; i++) {\n\t\t\t\tconst rule = start[i];\n\t\t\t\tif ( ! rule )\n\t\t\t\t\tcontinue;\n\t\t\t\telse if ( rule.id === id )\n\t\t\t\t\treturn rule;\n\n\t\t\t\tconst type = this.filters[rule.type];\n\t\t\t\tif ( type && type.childRules ) {\n\t\t\t\t\tconst out = this.getRule(id, rule.data);\n\t\t\t\t\tif ( out )\n\t\t\t\t\t\treturn out;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\taddRule() {\n\t\t\tif ( this.disabled )\n\t\t\t\treturn;\n\n\t\t\tthis.adding = false;\n\n\t\t\tconst key = this.$refs.add_box.value,\n\t\t\t\ttype = this.filters[key];\n\n\t\t\tif ( ! key )\n\t\t\t\treturn;\n\n\t\t\tconst out = {\n\t\t\t\tid: generateUUID(),\n\t\t\t\ttype: key,\n\t\t\t\tdata: maybe_call(type.default, type)\n\t\t\t};\n\n\t\t\tthis.editing.push(out);\n\t\t},\n\n\t\tupdateRule(id, data) {\n\t\t\tif ( this.disabled )\n\t\t\t\treturn;\n\n\t\t\tfor(let i=0; i < this.editing.length; i++) {\n\t\t\t\tif ( this.editing[i].id === id ) {\n\t\t\t\t\tthis.editing[i] = Object.assign(this.editing[i], data);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdeleteRule(id) {\n\t\t\tif ( this.disabled )\n\t\t\t\treturn;\n\n\t\t\tfor(let i=0; i < this.editing.length; i++) {\n\t\t\t\tif ( this.editing[i].id === id ) {\n\t\t\t\t\tthis.editing.splice(i, 1);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tcopyValue() {\n\t\t\tif ( ! Array.isArray(this.value) )\n\t\t\t\treturn [];\n\n\t\t\treturn deep_copy(this.value).map(rule => {\n\t\t\t\tif ( ! rule.id )\n\t\t\t\t\trule.id = generateUUID();\n\n\t\t\t\treturn rule;\n\t\t\t});\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./filter-editor.vue?vue&type=template&id=5f529d94&lang=html&\"\nimport script from \"./filter-editor.vue?vue&type=script&lang=js&\"\nexport * from \"./filter-editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"ffz--filter-rule-editor tw-elevation-1 tw-c-background-base tw-border tw-pd-y-05 tw-mg-y-05 tw-pd-r-1 tw-flex tw-flex-nowrap\"},[_vm._m(0),_vm._v(\" \"),(! _vm.component)?_c('div',{staticClass:\"tw-flex tw-flex-grow-1 tw-align-self-center tw-align-items-center\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.filters.missing', 'This rule of type \"{type}\" cannot be loaded. It may be from an add-on that is not loaded.', {type: _vm.editing && _vm.editing.type}))+\"\\n\\t\")]):_c(_vm.component,{tag:\"component\",attrs:{\"type\":_vm.type,\"filters\":_vm.filters,\"context\":_vm.context,\"preview\":_vm.preview},model:{value:(_vm.editing),callback:function ($$v) {_vm.editing=$$v},expression:\"editing\"}}),_vm._v(\" \"),(_vm.isShort && _vm.preview)?_c('div',{staticClass:\"tw-mg-l-1 tw-pd-x-1 tw-border-l tw-flex tw-align-items-center ffz--profile__icon tw-relative ffz-il-tooltip__container\"},[_c('figure',{class:[_vm.passes ? 'ffz-i-ok' : 'ffz-i-cancel']}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--up ffz-il-tooltip--align-right\"},[(_vm.passes)?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filters.active', 'This rule matches.'))+\"\\n\\t\\t\\t\")]):_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filters.inactive', 'This rule does not match.'))+\"\\n\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-border-l tw-pd-l-1 tw-flex tw-flex-column tw-flex-wrap tw-justify-content-start tw-align-items-start\",class:[_vm.isShort ? '' : 'tw-mg-l-1']},[(! _vm.isShort && _vm.preview)?_c('div',{staticClass:\"tw-mg-b-1 tw-border-b tw-pd-b-1 tw-full-width tw-flex tw-justify-content-center ffz--profile__icon tw-relative ffz-il-tooltip__container\"},[_c('figure',{class:[_vm.passes ? 'ffz-i-ok' : 'ffz-i-cancel']}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--up ffz-il-tooltip--align-right\"},[(_vm.passes)?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filters.active', 'This rule matches.'))+\"\\n\\t\\t\\t\\t\")]):_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filters.inactive', 'This rule does not match.'))+\"\\n\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.deleting)?[_c('button',{staticClass:\"tw-button tw-button--text tw-relative ffz-il-tooltip__container\",on:{\"click\":function($event){_vm.deleting = false}}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--up ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.cancel', 'Cancel'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text tw-relative ffz-il-tooltip__container\",on:{\"click\":function($event){return _vm.$emit('delete')}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--up ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\\t\")])])]:[_c('button',{staticClass:\"tw-button tw-button--text tw-relative ffz-il-tooltip__container\",on:{\"click\":function($event){_vm.deleting = true}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--up ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\\t\")])])]],2)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-flex tw-flex-shrink-0 tw-align-items-center handle tw-c-text-alt-2\"},[_c('h5',{staticClass:\"ffz-i-ellipsis-vert\"})])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./filter-rule-editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./filter-rule-editor.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {deep_copy} from 'utilities/object';\n\nexport default {\n\tprops: {\n\t\tvalue: Object,\n\t\tfilters: Object,\n\t\tcontext: {\n\t\t\ttype: Object,\n\t\t\trequired: false\n\t\t},\n\t\tpreview: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true\n\t\t}\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tediting: deep_copy(this.value),\n\t\t\ttester: null,\n\t\t\tdeleting: false\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tpasses() {\n\t\t\treturn this.preview && this.tester && this.tester(this.context);\n\t\t},\n\n\t\ttype() {\n\t\t\treturn this.filters[this.editing && this.editing.type]\n\t\t},\n\n\t\tcomponent() {\n\t\t\treturn this.type && this.type.editor;\n\t\t},\n\n\t\tisShort() {\n\t\t\treturn ! this.component || (this.type && ! this.type.tall);\n\t\t}\n\t},\n\n\twatch: {\n\t\tediting: {\n\t\t\thandler() {\n\t\t\t\tthis.tester = this.type.createTest(this.editing.data, this.filters);\n\t\t\t\tthis.$emit('input', this.editing);\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.tester = this.type && this.type.createTest(this.editing && this.editing.data, this.filters);\n\t}\n}\n\n","import { render, staticRenderFns } from \"./filter-rule-editor.vue?vue&type=template&id=52af3222&\"\nimport script from \"./filter-rule-editor.vue?vue&type=script&lang=js&\"\nexport * from \"./filter-rule-editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-flex tw-align-items-start\"},[_c('label'),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-text-alt tw-mg-b-05 tw-mg-x-05\"},[(_vm.mode === 'date')?_c('code',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.tDate(_vm.now, _vm.value))+\"\\n\\t\\t\")]):(_vm.mode === 'time')?_c('code',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.tTime(_vm.now, _vm.value))+\"\\n\\t\\t\")]):_c('code',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.tDateTime(_vm.now, _vm.value))+\"\\n\\t\\t\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./format-preview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./format-preview.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: ['context', 'item', 'value'],\n\n\tdata() {\n\t\treturn {\n\t\t\tmode: this.item.extra.mode,\n\t\t\tnow: null\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.now = new Date;\n\t\tthis.timer = setInterval(() => this.now = new Date, 1000);\n\t},\n\n\tbeforeDestroy() {\n\t\tclearInterval(this.timer);\n\t\tthis.timer = null;\n\t}\n\n}\n","import { render, staticRenderFns } from \"./format-preview.vue?vue&type=template&id=64b68332&\"\nimport script from \"./format-preview.vue?vue&type=script&lang=js&\"\nexport * from \"./format-preview.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"ffz--widget ffz--game-list\"},[_c('div',{staticClass:\"tw-align-items-center tw-flex tw-flex-nowrap tw-flex-row tw-full-width\"},[_c('div',{staticClass:\"tw-flex-grow-1 tw-mg-r-05\"},[_c('autocomplete',{staticClass:\"tw-flex-grow-1\",attrs:{\"input-id\":'category$' + _vm.id,\"items\":_vm.fetchCategories,\"suggest-on-focus\":true,\"escape-to-clear\":false},scopedSlots:_vm._u([{key:\"default\",fn:function(slot){return [_c('div',{staticClass:\"tw-pd-x-1 tw-pd-y-05\"},[_c('div',{staticClass:\"tw-card tw-relative\"},[_c('div',{staticClass:\"tw-align-items-center tw-flex tw-flex-nowrap tw-flex-row\"},[_c('div',{staticClass:\"ffz-card-img ffz-card-img--size-3 tw-flex-shrink-0 tw-overflow-hidden\"},[_c('aspect',{attrs:{\"ratio\":1/1.33}},[_c('img',{staticClass:\"tw-image\",attrs:{\"alt\":slot.item.displayName,\"src\":slot.item.boxArtURL}})])],1),_vm._v(\" \"),_c('div',{staticClass:\"tw-card-body tw-overflow-hidden tw-relative\"},[_c('p',{staticClass:\"tw-pd-x-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(slot.item.displayName)+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\")])])])])])]}}]),model:{value:(_vm.adding),callback:function ($$v) {_vm.adding=$$v},expression:\"adding\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button\",on:{\"click\":_vm.add}},[_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.add-term', 'Add'))+\"\\n\\t\\t\\t\\t\")])])])]),_vm._v(\" \"),(! _vm.value || ! _vm.value.length)?_c('div',{staticClass:\"tw-mg-t-05 tw-c-text-alt-2 tw-font-size-4 tw-align-center tw-c-text-alt-2 tw-pd-05\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.no-items', 'no items'))+\"\\n\\t\")]):_c('ul',{staticClass:\"ffz--term-list tw-mg-t-05\"},_vm._l((_vm.value),function(i){return _c('li',{key:i,staticClass:\"ffz--term ffz--game-term tw-align-items-center tw-flex tw-flex-nowrap tw-flex-row tw-full-width\"},[_c('div',{staticClass:\"tw-flex-grow-1 tw-mg-r-05\"},[(_vm.can_link)?_c('a',{staticClass:\"ffz-link\",attrs:{\"href\":(\"/directory/game/\" + i)},on:{\"click\":function($event){$event.preventDefault();return _vm.handleLink(i)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(i)+\"\\n\\t\\t\\t\\t\")]):_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(i)+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){return _vm.remove(i)}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\\t\\t\")])])])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport ProviderMixin from '../provider-mixin';\nimport {deep_copy} from 'utilities/object';\n\nlet last_id = 0;\n\nexport default {\n\tmixins: [ProviderMixin],\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tid: last_id++,\n\t\t\tadding: '',\n\t\t\tcan_link: false\n\t\t}\n\t},\n\n\tcreated() {\n\t\tconst ffz = this.context.getFFZ();\n\n\t\tthis.loader = ffz.resolve('site.twitch_data');\n\t\tthis.router = ffz.resolve('site.router');\n\n\t\tthis.can_link = ! ffz.resolve('main_menu').exclusive;\n\t},\n\n\tmethods: {\n\t\tadd() {\n\t\t\tif ( ! this.adding?.length )\n\t\t\t\treturn;\n\n\t\t\tconst values = Array.from(this.value);\n\t\t\tif ( values.includes(this.adding) )\n\t\t\t\treturn;\n\n\t\t\tvalues.push(this.adding);\n\t\t\tthis.set(values);\n\t\t},\n\n\t\tremove(item) {\n\t\t\tconst values = Array.from(this.value),\n\t\t\t\tidx = values.indexOf(item);\n\n\t\t\tif ( idx === -1 )\n\t\t\t\treturn;\n\n\t\t\tif ( values.length === 1 )\n\t\t\t\tthis.clear();\n\t\t\telse {\n\t\t\t\tvalues.splice(idx, 1);\n\t\t\t\tthis.set(values);\n\t\t\t}\n\t\t},\n\n\t\thandleLink(i) {\n\t\t\tthis.router.navigate('dir-game-index', {gameName: i});\n\t\t},\n\n\t\tasync fetchCategories(query) {\n\t\t\tif ( ! this.loader )\n\t\t\t\treturn [];\n\n\t\t\tconst data = await this.loader.getMatchingCategories(query);\n\t\t\tif ( ! data || ! data.items )\n\t\t\t\treturn [];\n\n\t\t\treturn deep_copy(data.items);\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./game-list-editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./game-list-editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./game-list-editor.vue?vue&type=template&id=2493d926&lang=html&\"\nimport script from \"./game-list-editor.vue?vue&type=script&lang=js&\"\nexport * from \"./game-list-editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--graphql-inspector\"},[_c('div',{staticClass:\"tw-flex tw-align-items-start\"},[_c('label',{staticClass:\"tw-mg-y-05\",attrs:{\"for\":\"selector\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('debug.graphql.query', 'Query:'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-flex-column tw-mg-l-05 tw-full-width\"},[_c('select',{ref:\"selector\",staticClass:\"tw-full-width tw-border-top-left-radius-medium tw-border-top-right-radius-medium tw-font-size-6 ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05\",attrs:{\"id\":\"selector\"},on:{\"change\":_vm.onSelectChange}},_vm._l((_vm.queries),function(query,idx){return _c('option',{key:query.name,domProps:{\"selected\":_vm.current === query,\"value\":idx}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(query.name)+\"\\n\\t\\t\\t\\t\")])}),0)])]),_vm._v(\" \"),(_vm.current)?_c('div',{staticClass:\"ffz--example-report\"},[_c('div',{staticClass:\"tw-mg-t-1 tw-c-background-alt-2 tw-font-size-5 tw-pd-y-05 tw-pd-x-1 tw-border-radius-large\"},[_c('code',[_vm._v(_vm._s(_vm.current.source))])])]):_vm._e(),_vm._v(\" \"),(_vm.current && _vm.current.variables)?_c('div',{staticClass:\"tw-mg-t-1\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.highlightJson(_vm.current.variables))}})]):_vm._e(),_vm._v(\" \"),(_vm.current && _vm.current.result)?_c('div',{staticClass:\"ffz--example-report ffz--tall\"},[_c('div',{staticClass:\"tw-mg-t-1 tw-c-background-alt-2 tw-font-size-5 tw-pd-y-05 tw-pd-x-1 tw-border-radius-large\"},[_c('code',{domProps:{\"innerHTML\":_vm._s(_vm.highlightJson(_vm.current.result, true))}})])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport { highlightJson } from 'utilities/dom';\nimport { deep_copy } from 'utilities/object';\n\n\nconst BAD_KEYS = [\n\t'kind',\n\t'definitions',\n\t'loc'\n];\n\nexport default {\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\thas_client: false,\n\t\t\thas_printer: false,\n\t\t\tqueryMap: {},\n\t\t\tcurrent: null\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tqueries() {\n\t\t\tconst queries = Object.values(this.queryMap);\n\t\t\tqueries.sort((a,b) => a.name.localeCompare(b.name));\n\t\t\treturn queries;\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.ffz = this.item.getFFZ();\n\n\t\tthis.client = this.ffz.resolve('site.apollo')?.client;\n\t\tthis.has_client = !! this.client;\n\n\t\tthis.printer = this.ffz.resolve('site.web_munch')?.getModule('gql-printer');\n\t\tthis.has_printer = !! this.printer;\n\t},\n\n\tbeforeDestroy() {\n\t\tthis.client = null;\n\t\tthis.ffz = null;\n\t\tthis.has_client = false;\n\t},\n\n\tmounted() {\n\t\tthis.updateQueries();\n\t},\n\n\tmethods: {\n\t\tupdateQueries() {\n\t\t\tif ( ! this.client )\n\t\t\t\treturn;\n\n\t\t\tconst map = this.client.queryManager?.queries;\n\n\t\t\tif ( ! map || ! map.values )\n\t\t\t\treturn;\n\n\t\t\tfor(const query of map.values()) {\n\t\t\t\tif ( ! query?.document )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tlet name = guessNameFromDocument(query.document);\n\n\t\t\t\tif ( ! name )\n\t\t\t\t\tname = query.observableQuery?.queryName;\n\n\t\t\t\tif ( ! this.queryMap[name] )\n\t\t\t\t\tthis.$set(this.queryMap, name, {\n\t\t\t\t\t\tid: query.queryId,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tsource: this.printQuery(query.document),\n\t\t\t\t\t\tvariables: null,\n\t\t\t\t\t\tresult: null\n\t\t\t\t\t});\n\n\t\t\t\tthis.queryMap[name].variables = deep_copy(query.observableQuery?.last?.variables ?? query.observableQuery?.variables);\n\t\t\t\tthis.queryMap[name].result = deep_copy(query.observableQuery?.lastResult?.data ?? query.observableQuery?.last?.result?.data ?? null);\n\t\t\t}\n\n\t\t\tif ( ! this.current )\n\t\t\t\tthis.current = Object.values(this.queries)[0];\n\t\t},\n\n\t\thighlightJson(object, pretty) {\n\t\t\treturn highlightJson(object, pretty);\n\t\t},\n\n\t\tprintQuery(doc) {\n\t\t\tif ( this.printer )\n\t\t\t\ttry {\n\t\t\t\t\treturn this.printer(doc);\n\t\t\t\t} catch(err) {\n\t\t\t\t\tthis.ffz.log.warn('Unable to print GQL using gql-printer.', err);\n\t\t\t\t}\n\n\t\t\treturn doc.loc?.source?.body;\n\t\t},\n\n\t\tonSelectChange() {\n\t\t\tconst idx = this.$refs.selector.value,\n\t\t\t\titem = this.queries[idx];\n\n\t\t\tthis.current = item;\n\t\t}\n\t}\n}\n\nfunction guessNameFromDocument(doc) {\n\tconst keys = Object.keys(doc).filter(key => ! BAD_KEYS.includes(key));\n\tif ( keys.length === 1 )\n\t\treturn keys[0];\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./graphql-inspect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./graphql-inspect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./graphql-inspect.vue?vue&type=template&id=f9b137c0&\"\nimport script from \"./graphql-inspect.vue?vue&type=script&lang=js&\"\nexport * from \"./graphql-inspect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--home tw-flex tw-flex-nowrap\"},[_c('div',{staticClass:\"tw-flex-grow-1\"},[_c('div',{staticClass:\"tw-align-center\"},[_c('h2',{staticClass:\"ffz-i-zreknarf ffz-i-pd-1\"},[_vm._v(\"\\n\\t\\t\\t\\tFrankerFaceZ\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',{staticClass:\"tw-c-text-alt\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('home.tag-line', 'The Twitch Enhancement Suite'))+\"\\n\\t\\t\\t\")])]),_vm._v(\" \"),_c('section',{staticClass:\"tw-pd-t-1 tw-border-t tw-mg-t-1\"},[_c('markdown',{attrs:{\"source\":_vm.t('home.about', _vm.md)}})],1),_vm._v(\" \"),(_vm.unseen)?_c('div',{staticClass:\"tw-pd-t-1 tw-border-t tw-mg-t-1\"},[_c('h3',{staticClass:\"tw-pd-b-05\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('home.new-settings', 'New Settings'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-b-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('home.new-settings.desc', 'These are settings that you haven\\'t looked at yet.'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_vm._l((_vm.unseen),function(cat){return _c('div',{key:cat.key,staticClass:\"tw-mg-b-05\"},[_c('a',{staticClass:\"tw-strong\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.item.requestPage(cat.key)}}},_vm._l((cat.tokens),function(tk,idx){return _c('span',{key:idx},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(tk.i18n ? _vm.t(tk.i18n, tk.title) : tk.title)+\"\\n\\t\\t\\t\\t\\t\")])}),0),_vm._v(\" \"),_vm._l((cat.entries),function(entry){return _c('div',{key:entry.key,staticClass:\"tw-mg-l-2\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(entry.i18n ? _vm.t(entry.i18n, entry.title) : entry.title)+\"\\n\\t\\t\\t\\t\")])})],2)})],2):_vm._e(),_vm._v(\" \"),(_vm.addons)?_c('div',{staticClass:\"tw-pd-t-1 tw-border-t tw-mg-t-1\"},[_c('h3',{staticClass:\"tw-pd-b-05\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('home.addon-updates', 'Updated Add-Ons'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-b-1\"},[_c('markdown',{attrs:{\"source\":_vm.t('home.addon-updates.desc', 'These add-ons have updated within the past seven days. Check the [changelog](~add_ons.changelog) to see what\\'s changed.')}})],1),_vm._v(\" \"),_vm._l((_vm.addons),function(addon){return _c('div',{key:addon.key,staticClass:\"tw-mg-b-05 tw-flex tw-align-items-center\"},[_c('div',{staticClass:\"ffz-card-img--size-4 tw-overflow-hidden tw-mg-r-1\"},[_c('img',{staticClass:\"tw-image\",attrs:{\"src\":addon.icon}})]),_vm._v(\" \"),_c('div',[(addon.enabled && addon.settings)?_c('a',{staticClass:\"tw-strong ffz-link--inherit\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.item.requestPage(addon.settings)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(addon.name_i18n ? _vm.t(addon.name_i18n, addon.name) : addon.name)+\"\\n\\t\\t\\t\\t\\t\")]):_c('div',{staticClass:\"tw-strong\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(addon.name_i18n ? _vm.t(addon.name_i18n, addon.name) : addon.name)+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-text-alt\"},[_c('span',{staticClass:\"tw-mg-r-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.version', 'Version {version}', addon))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.updated', 'Updated: {when,humantime}', {when: addon.updated}))+\"\\n\\t\\t\\t\\t\\t\\t\")])])])])})],2):_vm._e(),_vm._v(\" \"),(_vm.new_addons)?_c('div',{staticClass:\"tw-pd-t-1 tw-border-t tw-mg-t-1\"},[_c('h3',{staticClass:\"tw-pd-b-05\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('home.addon-new', 'New Add-Ons'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-b-1\"},[_c('markdown',{attrs:{\"source\":_vm.t('home.addon-new.desc', 'These add-ons were published within the past seven days. Check them out in [Add-Ons](~add_ons).')}})],1),_vm._v(\" \"),_vm._l((_vm.new_addons),function(addon){return _c('div',{key:addon.key,staticClass:\"tw-mg-b-05 tw-flex tw-align-items-center\"},[_c('div',{staticClass:\"ffz-card-img--size-4 tw-overflow-hidden tw-mg-r-1\"},[_c('img',{staticClass:\"tw-image\",attrs:{\"src\":addon.icon}})]),_vm._v(\" \"),_c('div',[(addon.enabled && addon.settings)?_c('a',{staticClass:\"tw-strong ffz-link--inherit\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.item.requestPage(addon.settings)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(addon.name_i18n ? _vm.t(addon.name_i18n, addon.name) : addon.name)+\"\\n\\t\\t\\t\\t\\t\")]):_c('div',{staticClass:\"tw-strong\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(addon.name_i18n ? _vm.t(addon.name_i18n, addon.name) : addon.name)+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-text-alt\"},[_c('span',{staticClass:\"tw-mg-r-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.version', 'Version {version}', addon))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('addon.updated', 'Updated: {when,humantime}', {when: addon.updated}))+\"\\n\\t\\t\\t\\t\\t\\t\")])])])])})],2):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-l-1 tw-flex-shrink-0 tweet-column\"},[_c('div',{staticClass:\"tw-flex tw-mg-b-1\"},[_c('a',{staticClass:\"tw-flex-grow-1 tw-button ffz-tooltip ffz--ffz-button tw-mg-r-1\",attrs:{\"data-title\":_vm.t('home.website', 'FrankerFaceZ Website'),\"href\":\"https://www.frankerfacez.com/\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._m(0)]),_vm._v(\" \"),_c('a',{staticClass:\"tw-flex-grow-1 tw-button ffz-tooltip ffz--discord-button tw-mg-r-1\",attrs:{\"data-title\":_vm.t('home.discord', 'Discord'),\"href\":\"https://discord.gg/UrAkGhT\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._m(1)]),_vm._v(\" \"),_c('a',{staticClass:\"tw-flex-grow-1 tw-button ffz-tooltip ffz--github-button\",attrs:{\"data-title\":_vm.t('home.github', 'GitHub'),\"href\":\"https://github.com/FrankerFaceZ/FrankerFaceZ\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._m(2)])]),_vm._v(\" \"),_c('rich-feed',{attrs:{\"url\":\"https://bsky-feed.special.frankerfacez.com/user::frankerfacez.com\",\"context\":_vm.context}})],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-pd-05\"},[_c('figure',{staticClass:\"ffz-i-zreknarf tw-font-size-3\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-pd-05-1\"},[_c('figure',{staticClass:\"ffz-i-discord tw-font-size-3\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-pd-05\"},[_c('figure',{staticClass:\"ffz-i-github tw-font-size-3\"})])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./home-page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./home-page.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport HOME_MD from '../home.md';\n\nimport {createElement as e} from 'utilities/dom';\nimport { EXTENSION } from 'utilities/constants';\n\nexport default {\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tmd: HOME_MD,\n\t\t\ttheme: '',\n\t\t\taddons: null,\n\t\t\tnew_addons: null,\n\t\t\tunseen: this.item.getUnseen(),\n\t\t\t//not_extension: ! EXTENSION\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.updateAddons();\n\t\tthis.updateTheme();\n\t\tthis.context.context.on('changed:theme.is-dark', this.updateTheme, this);\n\n\t\tconst ffz = this.context.getFFZ();\n\t\tffz.on('main_menu:update-unseen', this.updateUnseen, this);\n\t\tffz.on('addons:data-loaded', this.updateAddons, this);\n\t},\n\n\tbeforeDestroy() {\n\t\tthis.context.context.off('changed:theme.is-dark', this.updateTheme, this);\n\n\t\tconst ffz = this.context.getFFZ();\n\t\tffz.off('main_menu:update-unseen', this.updateUnseen, this);\n\t\tffz.off('addons:data-loaded', this.updateAddons, this);\n\t},\n\n\t/*mounted() {\n\t\tlet el;\n\t\tif ( this.not_extension )\n\t\t\tdocument.head.appendChild(el = e('script', {\n\t\t\t\tid: 'ffz--twitter-widget-script',\n\t\t\t\tasync: true,\n\t\t\t\tcharset: 'utf-8',\n\t\t\t\tsrc: 'https://platform.twitter.com/widgets.js',\n\t\t\t\tonLoad: () => el.remove()\n\t\t\t}));\n\t},*/\n\n\tmethods: {\n\t\tupdateUnseen() {\n\t\t\tthis.unseen = this.item.getUnseen();\n\t\t},\n\n\t\tupdateAddons() {\n\t\t\tconst ffz = this.context.getFFZ(),\n\t\t\t\taddon_module = ffz.resolve('addons'),\n\t\t\t\taddons = addon_module?.addons;\n\n\t\t\tconst out = [],\n\t\t\t\tnew_out = [],\n\t\t\t\tweek_ago = Date.now() - (86400 * 7 * 1000);\n\n\t\t\tif ( addons )\n\t\t\t\tfor(const [key, addon] of Object.entries(addons)) {\n\t\t\t\t\tconst enabled = addon_module.isAddonEnabled(key),\n\t\t\t\t\t\tis_new = addon.created && addon.created >= week_ago,\n\t\t\t\t\t\tis_updated = enabled && addon.updated && addon.updated >= week_ago;\n\n\t\t\t\t\tif ( ! is_updated && ! (is_new && ! enabled && ! addon.unlisted) )\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tconst copy = {\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tenabled,\n\t\t\t\t\t\ticon: addon.icon,\n\t\t\t\t\t\tname: addon.name,\n\t\t\t\t\t\tname_i18n: addon.name_i18n,\n\t\t\t\t\t\tupdated: addon.updated,\n\t\t\t\t\t\tsettings: addon.settings,\n\t\t\t\t\t\tversion: addon.version\n\t\t\t\t\t};\n\n\t\t\t\t\tif ( is_new )\n\t\t\t\t\t\tnew_out.push(copy);\n\n\t\t\t\t\tif ( is_updated )\n\t\t\t\t\t\tout.push(copy);\n\t\t\t\t}\n\n\t\t\tout.sort((a,b) => b.updated - a.updated);\n\t\t\tnew_out.sort((a,b) => b.created - a.created);\n\n\t\t\tthis.addons = out.length ? out : null;\n\t\t\tthis.new_addons = new_out.length ? new_out : null;\n\t\t},\n\n\t\tupdateTheme() {\n\t\t\tthis.theme = this.context.context.get('theme.is-dark') ? 'dark' : 'light'\n\t\t}\n\t}\n}\n","import { render, staticRenderFns } from \"./home-page.vue?vue&type=template&id=10c5a647&lang=html&\"\nimport script from \"./home-page.vue?vue&type=script&lang=js&\"\nexport * from \"./home-page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"tw-mg-b-1\"},[_c('markdown',{attrs:{\"source\":_vm.t('i18n.interest', _vm.md)}})],1),_vm._v(\" \"),_c('button',{staticClass:\"tw-button\",on:{\"click\":_vm.open}},[_vm._m(0),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('i18n.ui.open', 'Open Translation Tester'))+\"\\n\\t\\t\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-language\"})])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./i18n-open.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./i18n-open.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport I18N_MD from '../i18n.md';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tmd: I18N_MD\n\t\t}\n\t},\n\n\tmethods: {\n\t\topen() {\n\t\t\twindow.FrankerFaceZ.get().resolve('i18n').openUI();\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./i18n-open.vue?vue&type=template&id=974688f2&lang=html&\"\nimport script from \"./i18n-open.vue?vue&type=script&lang=js&\"\nexport * from \"./i18n-open.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--link-tester\"},[_c('div',{staticClass:\"ffz--widget ffz--select-box\"},[_c('div',{staticClass:\"tw-flex tw-align-items-start\"},[_c('label',{staticClass:\"tw-mg-y-05\",attrs:{\"for\":\"selector\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('debug.link-provider.url', 'Test URL'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-flex-column tw-mg-05\"},[_c('select',{ref:\"selector\",staticClass:\"tw-full-width tw-border-top-left-radius-medium tw-border-top-right-radius-medium tw-font-size-6 ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05\",attrs:{\"id\":\"selector\"},on:{\"change\":_vm.onSelectChange}},[_c('option',{attrs:{\"value\":\"custom\"},domProps:{\"selected\":_vm.is_custom}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.combo-box.custom', 'Custom'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_vm._l((_vm.examples),function(prov){return _c('optgroup',{key:prov.key,attrs:{\"label\":prov.key}},_vm._l((prov.items),function(i){return _c('option',{key:i.url,domProps:{\"selected\":i.url === _vm.raw_url,\"value\":i.url}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(i.title ? ((i.title) + \" (\" + (i.url) + \")\") : i.url)+\"\\n\\t\\t\\t\\t\\t\\t\")])}),0)})],2),_vm._v(\" \"),_c('input',{ref:\"text\",staticClass:\"ffz-mg-t-1p tw-border-bottom-left-radius-medium tw-border-bottom-right-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-input\",on:{\"blur\":_vm.updateText,\"input\":_vm.onTextChange}})]),_vm._v(\" \"),_c('button',{staticClass:\"tw-mg-05 tw-button tw-button--text ffz-il-tooltip__container\",class:_vm.examples_loading && 'tw-button--disabled',attrs:{\"disabled\":_vm.examples_loading},on:{\"click\":_vm.updateExamples}},[_c('span',{staticClass:\"tw-button__text ffz-i-arrows-cw\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('debug.link-provider.refresh', 'Refresh'))+\"\\n\\t\\t\\t\\t\")])])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-mg-b-1 tw-align-items-center\"},[_c('div',{staticClass:\"tw-flex-grow-1\"}),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"force_media\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"force_media\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.force_media},on:{\"change\":_vm.onCheck}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"force_media\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('debug.link-provider.allow.media', 'Allow Media'))+\"\\n\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-x-1 ffz-checkbox\"},[_c('input',{ref:\"force_unsafe\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"force_unsafe\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.force_unsafe},on:{\"change\":_vm.onCheck}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"force_unsafe\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('debug.link-provider.allow.unsafe', 'Allow NSFW'))+\"\\n\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text\",class:_vm.es_waiting && 'tw-button--disabled',attrs:{\"disabled\":_vm.es_waiting},on:{\"click\":_vm.refresh}},[_c('span',{staticClass:\"tw-button__text ffz-i-arrows-cw\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('debug.link-provider.refresh', 'Refresh'))+\"\\n\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-mg-b-1 tw-full-width\"},[_c('div',{staticClass:\"tw-flex tw-flex-column\"},[_c('label',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('debug.link-provider.link', 'Chat Link'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-t-05 ffz-checkbox\"},[_c('input',{ref:\"force_tooltip\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"force_tooltip\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.force_tooltip},on:{\"change\":_vm.onTooltip}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"force_tooltip\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('debug.link-provider.force-tooltip', 'Force Tooltip'))+\"\\n\\t\\t\\t\\t\\t\")])])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-full-width tw-overflow-hidden\"},[(_vm.url)?_c('a',{ref:\"link\",staticClass:\"ffz-tooltip\",attrs:{\"href\":_vm.url,\"data-url\":_vm.url,\"data-tooltip-type\":\"link\",\"data-force-tooltip\":\"true\",\"data-force-open\":_vm.force_tooltip ? 'true' : 'false',\"data-force-media\":_vm.force_media ? 'true' : 'false',\"data-force-unsafe\":_vm.force_unsafe ? 'true' : 'false',\"data-is-mail\":\"false\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\"},on:{\"click\":_vm.handleClick}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(decodeURI(_vm.url))+\"\\n\\t\\t\\t\")]):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-mg-b-1 tw-full-width\"},[_c('label',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('debug.link-provider.embed', 'Rich Embed'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-full-width tw-overflow-hidden\"},[(_vm.rich_data)?_c('chat-rich',{attrs:{\"data\":_vm.rich_data,\"url\":_vm.url,\"force-mid\":false,\"force-full\":false,\"force-media\":_vm.force_media,\"force-unsafe\":_vm.force_unsafe,\"events\":_vm.events}}):_vm._e()],1)]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-mg-b-1 tw-full-width\"},[_c('label',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('debug.link-provider.mid-embed', 'Mid Embed'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-full-width tw-overflow-hidden\"},[(_vm.rich_data)?_c('chat-rich',{attrs:{\"data\":_vm.rich_data,\"url\":_vm.url,\"force-mid\":true,\"force-full\":false,\"force-media\":_vm.force_media,\"force-unsafe\":_vm.force_unsafe,\"events\":_vm.events}}):_vm._e()],1)]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-mg-b-1 tw-full-width\"},[_c('label',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('debug.link-provider.full-embed', 'Full Embed'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-full-width tw-overflow-hidden\"},[(_vm.rich_data)?_c('chat-rich',{attrs:{\"data\":_vm.rich_data,\"url\":_vm.url,\"force-full\":true,\"force-media\":_vm.force_media,\"force-unsafe\":_vm.force_unsafe,\"events\":_vm.events}}):_vm._e()],1)]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-mg-b-1 tw-full-width\"},[_c('label',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('debug.link-provider.raw-length', 'Raw Length'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.tNumber(_vm.length))+\"\\n\\t\\t\")])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-mg-b-1 tw-full-width\"},[_c('label',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('debug.link-provider.raw', 'Raw Data'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-full-width tw-overflow-hidden ffz--example-report\"},[(_vm.url)?_c('div',{staticClass:\"tw-c-background-alt-2 tw-font-size-5 tw-pd-y-05 tw-pd-x-1 tw-border-radius-large\"},[(_vm.raw_loading)?_c('div',{staticClass:\"tw-align-center\"},[_c('h1',{staticClass:\"tw-mg-5 ffz-i-zreknarf loading\"})]):(typeof _vm.raw_data === 'string')?_c('code',[_vm._v(_vm._s(_vm.raw_data))]):_c('code',{domProps:{\"innerHTML\":_vm._s(_vm.highlightJson(_vm.raw_data, true))}})]):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport { debounce, timeout, pick_random } from 'utilities/object'\nimport { highlightJson } from 'utilities/dom';\nimport { LINK_DATA_HOSTS } from 'src/utilities/constants';\n\nconst STOCK_URLS = [\n\t'https://www.twitch.tv/sirstendec',\n\t'https://www.twitch.tv/videos/42968068',\n\t'https://www.twitch.tv/sirstendec/clip/HedonisticMagnificentSoymilkChocolateRain',\n\t'https://clips.twitch.tv/HedonisticMagnificentSoymilkChocolateRain',\n\t'https://discord.gg/UrAkGhT',\n\t'https://www.youtube.com/watch?v=CAL4WMpBNs0',\n\t'https://xkcd.com/221/',\n\t'https://github.com/FrankerFaceZ/FrankerFaceZ',\n\t'https://twitter.com/frankerfacez',\n\t'https://twitter.com/FrankerFaceZ/status/1240717057630625792',\n\t'http://testsafebrowsing.appspot.com/apiv4/ANY_PLATFORM/MALWARE/URL/',\n\t'https://en.wikipedia.org/wiki/Emoji',\n\t'https://en.wikipedia.org/wiki/Naginata',\n\t'https://www.smbc-comics.com/comic/punishment'\n]\n\nexport default {\n\tcomponents: {\n\t\t'chat-rich': async () => {\n\t\t\tconst stuff = await import(/* webpackChunkName: \"chat\" */ 'src/modules/chat/components');\n\t\t\treturn stuff.default('./chat-rich.vue').default;\n\t\t}\n\t},\n\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\tconst state = window.history.state;\n\t\tlet url = state?.ffz_lt_url;\n\t\tif ( ! url )\n\t\t\turl = pick_random(STOCK_URLS);\n\n\t\tconst stuff = this.formatExamples(STOCK_URLS.map(x => ({url: x})), url);\n\n\t\treturn {\n\t\t\traw_url: url,\n\t\t\texamples: stuff[0],\n\t\t\texamples_loading: false,\n\t\t\tis_custom: stuff[1],\n\t\t\trich_data: null,\n\t\t\traw_loading: false,\n\t\t\tes_waiting: false,\n\t\t\traw_data: null,\n\t\t\tlength: 0,\n\n\t\t\tforce_media: state?.ffz_lt_media ?? true,\n\t\t\tforce_unsafe: state?.ffz_lt_unsafe ?? false,\n\t\t\tforce_tooltip: state?.ffz_lt_tip ?? false,\n\n\t\t\tevents: {\n\t\t\t\temit: (...args) => this.item.getChat().emit(...args),\n\t\t\t\ton: (...args) => this.item.getChat().on(...args),\n\t\t\t\toff: (...args) => this.item.getChat().off(...args)\n\t\t\t}\n\t\t}\n\t},\n\n\tcomputed: {\n\t\turl() {\n\t\t\ttry {\n\t\t\t\treturn new URL(this.raw_url).toString();\n\t\t\t} catch(err) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t},\n\n\twatch: {\n\t\traw_url() {\n\t\t\tif ( ! this.is_custom )\n\t\t\t\tthis.$refs.text.value = this.raw_url;\n\t\t},\n\n\t\turl() {\n\t\t\tthis.rebuildData();\n\t\t\tthis.saveState();\n\n\t\t\tif ( this.force_tooltip ) {\n\t\t\t\tconst link = this.$refs.link;\n\t\t\t\tif ( ! link || ! this.chat )\n\t\t\t\t\treturn;\n\n\t\t\t\tconst tips = this.chat.resolve('tooltips')?.tips;\n\t\t\t\tif ( ! tips )\n\t\t\t\t\treturn;\n\n\t\t\t\ttips._exit(link);\n\t\t\t\tsetTimeout(() => tips._enter(link), 250);\n\t\t\t}\n\t\t},\n\n\t\trich_data() {\n\t\t\tthis.refreshRaw();\n\t\t},\n\n\t\tforce_tooltip() {\n\t\t\tconst link = this.$refs.link;\n\t\t\tif ( ! link || ! this.chat )\n\t\t\t\treturn;\n\n\t\t\tconst tips = this.chat.resolve('tooltips')?.tips;\n\t\t\tif ( ! tips )\n\t\t\t\treturn;\n\n\t\t\tif ( this.force_tooltip )\n\t\t\t\ttips._enter(link);\n\t\t\telse\n\t\t\t\ttips._exit(link);\n\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.chat = this.item.getChat();\n\t\tthis.settings = this.chat.resolve('settings');\n\n\t\tthis.refreshES = debounce(this.refresh, 1000, true);\n\t\tthis.rebuildData = debounce(this.rebuildData, 250);\n\t\tthis.refreshRaw = debounce(this.refreshRaw, 250);\n\t\tthis.onTextChange = debounce(this.onTextChange, 500);\n\t\tthis.updateExamples = debounce(this.updateExamples, 500);\n\t\tthis.updateEventSource = debounce(this.updateEventSource, 500);\n\n\t\tthis.chat.on('chat:update-link-resolver', this.checkRefreshRaw, this);\n\t\tthis.settings.on(':changed:debug.link-resolver.source', this.changeProvider, this);\n\t\tthis.updateExamples();\n\t\tthis.updateEventSource();\n\t},\n\n\tmounted() {\n\t\tthis.rebuildData();\n\n\t\tthis.$refs.text.value = this.raw_url;\n\n\n\t\tif ( this.force_tooltip ) {\n\t\t\tconst link = this.$refs.link;\n\t\t\tif ( ! link || ! this.chat )\n\t\t\t\treturn;\n\n\t\t\tconst tips = this.chat.resolve('tooltips')?.tips;\n\t\t\tif ( ! tips )\n\t\t\t\treturn;\n\n\t\t\ttips._enter(link);\n\t\t}\n\t},\n\n\tbeforeDestroy() {\n\t\tif (this.es) {\n\t\t\tthis.es.close();\n\t\t\tthis.es = null;\n\t\t}\n\n\t\tthis.chat.off('chat:update-link-resolver', this.checkRefreshRaw, this);\n\t\tthis.settings.off(':changed:debug.link-resolver.source', this.changeProvider, this);\n\t\tthis.chat = null;\n\t\tthis.settings = null;\n\t},\n\n\tmethods: {\n\t\thandleClick(event) {\n\t\t\treturn this.chat.handleLinkClick(event);\n\t\t},\n\n\t\tchangeProvider() {\n\t\t\tthis.updateEventSource();\n\t\t\tthis.updateExamples();\n\t\t},\n\n\t\tupdateEventSource() {\n\t\t\tconst provider = this.settings.get('debug.link-resolver.source');\n\t\t\tif ( ! provider.has_sse ) {\n\t\t\t\tif ( this.es ) {\n\t\t\t\t\tthis.es.close();\n\t\t\t\t\tthis.es = null;\n\t\t\t\t}\n\n\t\t\t\tthis.es_waiting = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this.es )\n\t\t\t\treturn;\n\n\t\t\tthis.es = new EventSource(`${provider.value}/sse`);\n\t\t\tthis.es.addEventListener('error', () => {\n\t\t\t\tthis.es_waiting = true;\n\t\t\t});\n\t\t\tthis.es.addEventListener('message', () => {\n\t\t\t\tif ( this.es_waiting ) {\n\t\t\t\t\tthis.es_waiting = false;\n\t\t\t\t\tthis.refreshES();\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\tsaveState() {\n\t\t\ttry {\n\t\t\t\twindow.history.replaceState({\n\t\t\t\t\t...window.history.state,\n\t\t\t\t\tffz_lt_url: this.raw_url,\n\t\t\t\t\tffz_lt_media: this.force_media,\n\t\t\t\t\tffz_lt_unsafe: this.force_unsafe,\n\t\t\t\t\tffz_lt_tip: this.force_tooltip\n\t\t\t\t}, document.title);\n\n\t\t\t} catch(err) {\n\t\t\t\t/* no-op */\n\t\t\t}\n\t\t},\n\n\t\tformatExamples(examples, url) {\n\t\t\tconst out = [],\n\t\t\t\tresolvers = {};\n\n\t\t\tif ( url === undefined )\n\t\t\t\turl = this.raw_url;\n\n\t\t\tlet is_custom = true;\n\n\t\t\tfor(const example of examples) {\n\t\t\t\tconst resolver = example.resolver || 'Unknown';\n\t\t\t\tlet prov = resolvers[resolver];\n\t\t\t\tif ( ! prov ) {\n\t\t\t\t\tprov = resolvers[resolver] = [];\n\t\t\t\t\tout.push({\n\t\t\t\t\t\tkey: resolver,\n\t\t\t\t\t\titems: prov\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif ( url === example.url )\n\t\t\t\t\tis_custom = false;\n\n\t\t\t\tprov.push(example);\n\t\t\t}\n\n\t\t\tout.sort((a,b) => a.key.localeCompare(b.key));\n\n\t\t\treturn [out, is_custom];\n\t\t},\n\n\t\tasync updateExamples() {\n\t\t\tif ( this.examples_loading )\n\t\t\t\treturn;\n\n\t\t\tthis.examples_loading = true;\n\t\t\tlet provider = this.settings.get('debug.link-resolver.source').value;\n\t\t\tif ( provider === 'special:socket')\n\t\t\t\tprovider = LINK_DATA_HOSTS.test.value;\n\n\t\t\tlet examples;\n\t\t\ttry {\n\t\t\t\texamples = (await timeout(fetch(`${provider}/examples`), 15000).then(resp => resp.ok ? resp.json() : null)).examples;\n\t\t\t} catch(err) {\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\n\t\t\tif ( ! examples )\n\t\t\t\texamples = [];\n\n\t\t\tconst urls = examples.map(x => x.url);\n\t\t\tfor(const url of STOCK_URLS)\n\t\t\t\tif ( ! urls.includes(url) )\n\t\t\t\t\texamples.push({\n\t\t\t\t\t\turl,\n\t\t\t\t\t\tresolver: ' Stock'\n\t\t\t\t\t});\n\n\t\t\tconst out = this.formatExamples(examples);\n\n\t\t\tthis.examples = out[0];\n\t\t\tthis.is_custom = out[1];\n\t\t\tthis.examples_loading = false;\n\t\t},\n\n\t\tcheckRefreshRaw(url) {\n\t\t\tif ( ! url || (url && url === this.url) )\n\t\t\t\tthis.refreshRaw();\n\t\t},\n\n\t\tasync refreshRaw() {\n\t\t\tthis.raw_data = undefined;\n\t\t\tthis.length = 0;\n\t\t\tif ( ! this.rich_data ) {\n\t\t\t\tthis.raw_loading = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.raw_loading = true;\n\t\t\ttry {\n\t\t\t\tconst data = await this.chat.get_link_info(this.url);\n\t\t\t\tthis.raw_data = data; //JSON.stringify(data, null, '\\t');\n\t\t\t\tthis.length = JSON.stringify(data).length;\n\t\t\t} catch(err) {\n\t\t\t\tthis.raw_data = `Error\\n\\n${err.toString()}`;\n\t\t\t}\n\t\t\tthis.raw_loading = false;\n\t\t},\n\n\t\trebuildData() {\n\t\t\tif ( ! this.url )\n\t\t\t\treturn this.rich_data = null;\n\n\t\t\tconst token = {\n\t\t\t\ttype: 'link',\n\t\t\t\tforce_rich: true,\n\t\t\t\tis_mail: false,\n\t\t\t\turl: this.url,\n\t\t\t\ttext: this.url\n\t\t\t};\n\n\t\t\tthis.rich_data = this.chat.rich_providers.link.process.call(this.chat, token);\n\t\t},\n\n\t\trefresh() {\n\t\t\tthis.chat.clearLinkCache(this.url);\n\t\t},\n\n\t\tonSelectChange() {\n\t\t\tconst raw_value = this.$refs.selector.value;\n\n\t\t\tif ( raw_value && raw_value !== 'custom' ) {\n\t\t\t\tthis.raw_url = raw_value;\n\t\t\t\tthis.is_custom = false;\n\t\t\t} else\n\t\t\t\tthis.is_custom = true;\n\t\t},\n\n\t\tupdateText() {\n\t\t\tconst value = this.$refs.text.value;\n\t\t\tlet custom = true;\n\t\t\tfor(const provider of this.examples) {\n\t\t\t\tfor(const url of provider.items) {\n\t\t\t\t\tif ( url === value ) {\n\t\t\t\t\t\tcustom = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( ! custom )\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.is_custom = custom;\n\t\t\tif ( this.is_custom )\n\t\t\t\tthis.raw_url = this.$refs.text.value;\n\t\t},\n\n\t\tonTextChange() {\n\t\t\tthis.updateText();\n\t\t},\n\n\t\tonCheck() {\n\t\t\tthis.force_media = this.$refs.force_media.checked;\n\t\t\tthis.force_unsafe = this.$refs.force_unsafe.checked;\n\n\t\t\tthis.saveState();\n\t\t},\n\n\t\tonTooltip() {\n\t\t\tthis.force_tooltip = this.$refs.force_tooltip.checked;\n\n\t\t\tthis.saveState();\n\t\t},\n\n\t\thighlightJson(object, pretty) {\n\t\t\treturn highlightJson(object, pretty);\n\t\t},\n\t}\n\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./link-tester.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./link-tester.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./link-tester.vue?vue&type=template&id=07f82a3a&\"\nimport script from \"./link-tester.vue?vue&type=script&lang=js&\"\nexport * from \"./link-tester.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz-dialog ffz-main-menu tw-elevation-3 tw-c-background-alt tw-c-text-base tw-border tw-flex tw-flex-nowrap tw-flex-column\",class:{ maximized: _vm.maximized || _vm.exclusive, exclusive: _vm.exclusive, faded: _vm.faded },style:({zIndex: _vm.z}),on:{\"focusin\":_vm.onFocus,\"click\":_vm.onFocus}},[_c('header',{ref:\"header\",staticClass:\"tw-c-background-base tw-full-width tw-align-items-center tw-flex tw-flex-nowrap\",on:{\"dblclick\":function($event){return _vm.maybeResize($event)}}},[_c('h3',{staticClass:\"ffz-i-zreknarf ffz-i-pd-1\"},[_vm._v(\"\\n\\t\\t\\tFrankerFaceZ\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex-grow-1 tw-pd-x-2\"},[_c('div',{staticClass:\"tw-search-input\"},[_c('label',{staticClass:\"tw-hide-accessible\",attrs:{\"for\":\"ffz-main-menu.search\"}},[_vm._v(_vm._s(_vm.t('main-menu.search', 'Search Settings')))]),_vm._v(\" \"),_c('div',{staticClass:\"tw-relative\"},[_vm._m(0),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.query),expression:\"query\"}],staticClass:\"tw-block tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-l-3 tw-pd-r-1 tw-pd-y-05\",attrs:{\"id\":\"ffz-main-menu.search\",\"placeholder\":_vm.t('main-menu.search', 'Search Settings'),\"type\":\"search\",\"autocapitalize\":\"off\",\"autocorrect\":\"off\",\"autocomplete\":\"off\",\"spellcheck\":\"false\"},domProps:{\"value\":(_vm.query)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.query=$event.target.value}}})])])]),_vm._v(\" \"),(!_vm.maximized && !_vm.exclusive)?_c('button',{staticClass:\"tw-button-icon tw-mg-x-05\",on:{\"click\":function($event){_vm.faded = ! _vm.faded}}},[_c('span',{staticClass:\"tw-button-icon__icon\"},[_c('figure',{class:_vm.faded ? 'ffz-i-eye-off' : 'ffz-i-eye'})])]):_vm._e(),_vm._v(\" \"),(!_vm.exclusive)?_c('button',{staticClass:\"tw-button-icon tw-mg-x-05 tw-relative ffz-il-tooltip__container\",on:{\"click\":_vm.popout}},[_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-center\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('main-menu.popout', 'Open Settings in a New Window'))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(!_vm.exclusive)?_c('button',{staticClass:\"tw-button-icon tw-mg-x-05\",on:{\"click\":_vm.resize}},[_c('span',{staticClass:\"tw-button-icon__icon\"},[_c('figure',{class:{'ffz-i-window-maximize': !_vm.maximized, 'ffz-i-window-restore': _vm.maximized}})])]):_vm._e(),_vm._v(\" \"),(!_vm.exclusive)?_c('button',{staticClass:\"tw-button-icon tw-mg-x-05\",on:{\"click\":_vm.close}},[_vm._m(2)]):_vm._e()]),_vm._v(\" \"),_c('section',{staticClass:\"tw-border-t tw-full-height tw-full-width tw-flex tw-flex-nowrap tw-overflow-hidden\"},[_c('nav',{staticClass:\"ffz-vertical-nav tw-c-background-alt-2 tw-border-r tw-full-height tw-flex tw-flex-column tw-flex-shrink-0 tw-flex-nowrap\"},[_c('header',{staticClass:\"tw-border-b tw-pd-1\"},[_c('profile-selector',{attrs:{\"context\":_vm.context},on:{\"navigate\":_vm.navigate}})],1),_vm._v(\" \"),_c('div',{staticClass:\"tw-full-width tw-full-height tw-overflow-hidden tw-flex tw-flex-nowrap tw-relative\"},[_c('simplebar',{attrs:{\"classes\":\"ffz-vertical-nav__items tw-full-width tw-flex-grow-1\"}},[(_vm.has_unseen)?_c('header',{staticClass:\"tw-border-b tw-pd-1\"},[_c('button',{staticClass:\"tw-button ffz-button--hollow tw-full-width\",on:{\"click\":_vm.allRead}},[_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('main-menu.mark-all-seen', 'Mark All Seen'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),_c('menu-tree',{attrs:{\"current-item\":_vm.currentItem,\"modal\":_vm.nav,\"filter\":_vm.filter,\"context\":_vm.context},on:{\"change-item\":_vm.changeItem,\"mark-seen\":_vm.markSeen,\"mark-expanded\":_vm.markExpanded,\"navigate\":_vm.navigate}})],1)],1),_vm._v(\" \"),_c('footer',{staticClass:\"tw-c-text-alt tw-border-t tw-pd-1\"},[_c('div',[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('main-menu.version', 'Version {version}', {version: _vm.version.toString()}))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-text-alt-2\"},[(_vm.version.commit)?_c('a',{staticClass:\"ffz-link ffz-link--inherit\",attrs:{\"href\":(\"https://www.github.com/FrankerFaceZ/FrankerFaceZ/commit/\" + (_vm.version.commit)),\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.version.commit.slice(0,7))+\"\\n\\t\\t\\t\\t\\t\")]):_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.version.hash)+\"\\n\\t\\t\\t\\t\\t\")])])])]),_vm._v(\" \"),_c('simplebar',{attrs:{\"classes\":\"tw-flex-grow-1\"}},[(_vm.currentItem)?_c('menu-page',{ref:\"page\",attrs:{\"context\":_vm.context,\"item\":_vm.currentItem,\"filter\":_vm.filter,\"nav-keys\":_vm.navKeys},on:{\"change-item\":_vm.changeItem,\"mark-seen\":_vm.markSeen,\"navigate\":_vm.navigate}}):_vm._e()],1)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-absolute tw-align-items-center tw-c-text-alt-2 tw-flex tw-full-height ffz-input__icon tw-justify-content-center tw-left-0 tw-top-0 tw-z-default\"},[_c('figure',{staticClass:\"ffz-i-search\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button-icon__icon\"},[_c('figure',{staticClass:\"ffz-i-link-ext\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button-icon__icon\"},[_c('figure',{staticClass:\"ffz-i-window-close\"})])}]\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport displace from 'displacejs';\nimport { getDialogNextZ } from 'src/utilities/dialog';\n\nconst VALID_FLAGS = [\n\t'modified'\n];\n\nexport default {\n\tdata() {\n\t\tconst out = this.$vnode.data;\n\n\t\tout.z = getDialogNextZ();\n\n\t\treturn out;\n\t},\n\n\tcomputed: {\n\t\tfilter() {\n\t\t\tlet query = this.query.toLowerCase();\n\n\t\t\tlet flags = new Set;\n\t\t\tquery = query.replace(/(?<=^|\\s)@(\\S+)(?:\\s+|$)/g, (match, flag, index) => {\n\t\t\t\tif ( VALID_FLAGS.includes(flag) ) {\n\t\t\t\t\tflags.add(flag);\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tquery = query.trim();\n\t\t\tif ( ! query.length )\n\t\t\t\tquery = null;\n\n\t\t\tif ( ! flags.size )\n\t\t\t\tflags = null;\n\n\t\t\tif ( ! query && ! flags )\n\t\t\t\treturn null;\n\n\t\t\treturn {\n\t\t\t\tflags,\n\t\t\t\tquery\n\t\t\t}\n\t\t}\n\t},\n\n\twatch: {\n\t\tmaximized() {\n\t\t\tthis.updateDrag();\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.context.context._add_user();\n\t},\n\n\tdestroyed() {\n\t\tthis.context.context._remove_user();\n\t},\n\n\tmounted() {\n\t\tthis.updateDrag();\n\n\t\tthis._on_resize = this.handleResize.bind(this);\n\t\twindow.addEventListener('resize', this._on_resize);\n\t},\n\n\tbeforeDestroy() {\n\t\tthis.destroyDrag();\n\n\t\tif ( this._on_resize ) {\n\t\t\twindow.removeEventListener('resize', this._on_resize);\n\t\t\tthis._on_resize = null;\n\t\t}\n\t},\n\n\tmethods: {\n\t\tallRead() {\n\t\t\tthis.markAllSeen(this.nav);\n\t\t\tthis.has_unseen = false;\n\t\t},\n\n\t\tmaybeResize(event) {\n\t\t\tif ( event.target !== this.$refs.header )\n\t\t\t\treturn;\n\n\t\t\tthis.resize(event);\n\t\t},\n\n\t\tchangeProfile() {\n\t\t\tconst new_id = this.$refs.profiles.value,\n\t\t\t\tnew_profile = this.context.profiles[new_id];\n\n\t\t\tif ( new_profile )\n\t\t\t\tthis.context.currentProfile = new_profile;\n\t\t},\n\n\t\tchangeItem(item) {\n\t\t\tif ( this.$refs.page && this.$refs.page.onBeforeChange ) {\n\t\t\t\tif ( this.$refs.page.onBeforeChange(this.currentItem, item) === false )\n\t\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.markSeen(item);\n\n\t\t\tif ( item.redirect )\n\t\t\t\treturn this.navigate(Array.isArray(item.redirect) ? item.redirect : item.redirect.split(/\\./g));\n\n\t\t\tthis.currentItem = item;\n\t\t\tthis.restoredItem = true;\n\n\t\t\tlet url;\n\t\t\tif ( this.exclusive ) {\n\t\t\t\turl = new URL(location.href);\n\t\t\t\turl.searchParams.set('ffz-settings', item.full_key);\n\t\t\t\turl = url.toString();\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\twindow.history.replaceState({\n\t\t\t\t\t...window.history.state,\n\t\t\t\t\tffzcc: item.full_key\n\t\t\t\t}, document.title, url);\n\t\t\t} catch(err) {\n\t\t\t\t/* no-op */\n\t\t\t}\n\n\t\t\tlet current = item;\n\t\t\twhile(current = current.parent) // eslint-disable-line no-cond-assign\n\t\t\t\tcurrent.expanded = true;\n\t\t},\n\n\t\tupdateDrag() {\n\t\t\tif ( this.maximized )\n\t\t\t\tthis.destroyDrag();\n\t\t\telse\n\t\t\t\tthis.createDrag();\n\t\t},\n\n\t\tdestroyDrag() {\n\t\t\tif ( this.displace ) {\n\t\t\t\tthis.displace.destroy();\n\t\t\t\tthis.displace = null;\n\t\t\t}\n\t\t},\n\n\t\tcreateDrag() {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tif ( ! this.maximized )\n\t\t\t\t\tthis.displace = displace(this.$el, {\n\t\t\t\t\t\thandle: this.$el.querySelector('header'),\n\t\t\t\t\t\thighlightInputs: true,\n\t\t\t\t\t\tconstrain: true,\n\t\t\t\t\t\tonMouseDown: () => this.onFocus(),\n\t\t\t\t\t\tonTouchStart: () => this.onFocus(),\n\t\t\t\t\t\tignoreFn(event) {\n\t\t\t\t\t\t\treturn event.target.closest('button') != null\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t})\n\t\t},\n\n\t\tonFocus() {\n\t\t\tif ( ! this.exclusive )\n\t\t\t\tthis.z = getDialogNextZ();\n\t\t},\n\n\t\thandleResize() {\n\t\t\tif ( this.displace )\n\t\t\t\tthis.displace.reinit();\n\t\t},\n\n\t\tnavigate(...keys) {\n\t\t\tlet item;\n\t\t\tfor(const key of keys) {\n\t\t\t\titem = this.navKeys[key];\n\t\t\t\tif ( item )\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst tabs = [];\n\n\t\t\twhile(item && item.page) {\n\t\t\t\tif ( item.tab && item.parent?.tabs )\n\t\t\t\t\ttabs.push([item.parent, item.parent.tabs.indexOf(item)]);\n\n\t\t\t\titem = item.parent;\n\t\t\t}\n\n\t\t\tif ( ! item )\n\t\t\t\treturn;\n\n\t\t\tif ( this.$refs.page && this.$refs.page.onBeforeChange ) {\n\t\t\t\tif ( this.$refs.page.onBeforeChange(this.currentItem, item) === false )\n\t\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.changeItem(item);\n\n\t\t\t// Asynchronously walk down the tab tree, so that\n\t\t\t// we can switch every tab correctly.\n\t\t\tif ( tabs.length ) {\n\t\t\t\tconst bits = () => {\n\t\t\t\t\tconst latest = tabs.pop();\n\t\t\t\t\tif ( latest?.[0]?._component )\n\t\t\t\t\t\tlatest[0]._component.select(latest[1]);\n\n\t\t\t\t\tif ( tabs.length )\n\t\t\t\t\t\tthis.$nextTick(bits);\n\t\t\t\t}\n\n\t\t\t\tthis.$nextTick(bits);\n\t\t\t}\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tconst el = this.$el.querySelector(`.ffz--menu-tree li[data-key=\"${item.full_key}\"]`);\n\t\t\t\tif ( el )\n\t\t\t\t\tel.scrollIntoView();\n\t\t\t});\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./main-menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./main-menu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main-menu.vue?vue&type=template&id=189ffa15&lang=html&\"\nimport script from \"./main-menu.vue?vue&type=script&lang=js&\"\nexport * from \"./main-menu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--home tw-border-t tw-pd-y-1\"},[(_vm.loading)?_c('div',{staticClass:\"tw-align-center tw-pd-1\"},[_c('h1',{staticClass:\"tw-mg-5 ffz-i-zreknarf loading\"})]):_c('markdown',{attrs:{\"source\":_vm.t((\"home.\" + _vm.key), _vm.md)}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./md-page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./md-page.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\tconst key = this.item.key;\n\n\t\treturn {\n\t\t\tkey,\n\t\t\tloading: true,\n\t\t\tmd: null\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.load();\n\t},\n\n\tmethods: {\n\t\tasync load() {\n\t\t\tthis.md = (await import(/* webpackChunkName: 'menu-md' */ `../${this.key}.md`)).default;\n\t\t\tthis.loading = false;\n\t\t}\n\t}\n}\n","import { render, staticRenderFns } from \"./md-page.vue?vue&type=template&id=7a47205e&lang=html&\"\nimport script from \"./md-page.vue?vue&type=script&lang=js&\"\nexport * from \"./md-page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.item.contents)?_c('div',{class:_vm.classes},[(! _vm.item.no_header)?_c('header',{staticClass:\"tw-font-size-5\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t(_vm.item.i18n_key, _vm.item.title))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.item.description)?_c('section',{staticClass:\"tw-pd-b-1 tw-c-text-alt\"},[_c('markdown',{attrs:{\"source\":_vm.t(_vm.item.desc_i18n_key, _vm.item.description)}})],1):_vm._e(),_vm._v(\" \"),_vm._l((_vm.visibleContents),function(i){return _c('div',{key:i.full_key,class:{'ffz-unmatched-item': _vm.showing && ! _vm.shouldShow(i)}},[_c(i.component,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":i,\"filter\":_vm.filter},on:{\"navigate\":_vm.navigate}})],1)})],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./menu-container.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./menu-container.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: ['item', 'context', 'filter'],\n\n\tcomputed: {\n\t\tshowing() {\n\t\t\treturn this.shouldShow(this.item);\n\t\t},\n\n\t\tvisibleContents() {\n\t\t\tif ( ! this.item || ! this.item.contents )\n\t\t\t\treturn [];\n\n\t\t\tif ( ! this.context.matches_only )\n\t\t\t\treturn this.item.contents;\n\n\t\t\treturn this.item.contents.filter(item => this.shouldShow(item));\n\t\t},\n\n\t\tclasses() {\n\t\t\treturn [\n\t\t\t\t'ffz--menu-container',\n\t\t\t\tthis.item.full_box ? 'tw-border' : 'tw-border-t'\n\t\t\t]\n\t\t}\n\t},\n\n\tmethods: {\n\t\tnavigate(...args) {\n\t\t\tthis.$emit('navigate', ...args);\n\t\t},\n\n\t\tshouldShow(item, is_walking = false) {\n\t\t\tif ( ! this.filter || item.no_filter )\n\t\t\t\treturn true;\n\n\t\t\tif ( this.filter.flags ) {\n\t\t\t\tif ( this.filter.flags.has('modified') ) {\n\t\t\t\t\t// We need to tree walk for this one.\n\t\t\t\t\tif ( ! is_walking ) {\n\t\t\t\t\t\tfor(const key of ['tabs', 'contents', 'items'])\n\t\t\t\t\t\t\tif ( item[key] )\n\t\t\t\t\t\t\t\tfor(const thing of item[key])\n\t\t\t\t\t\t\t\t\tif ( this.shouldShow(thing) )\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! item.setting || ! this.context.currentProfile.has(item.setting) )\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( this.filter.query ) {\n\t\t\t\tif ( ! item.search_terms || ! item.search_terms.includes(this.filter.query) )\n\t\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t}\n}\n","import { render, staticRenderFns } from \"./menu-container.vue?vue&type=template&id=59e23493&lang=html&\"\nimport script from \"./menu-container.vue?vue&type=script&lang=js&\"\nexport * from \"./menu-container.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--menu-page\"},[_c('header',{staticClass:\"tw-mg-b-1\"},[_vm._l((_vm.breadcrumbs),function(i){return _c('span',{key:i.full_key},[(i !== _vm.item)?_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.$emit('change-item', i, false)}}},[_vm._v(_vm._s(_vm.t(i.i18n_key, i.title)))]):_vm._e(),_vm._v(\" \"),(i === _vm.item)?_c('strong',[_vm._v(_vm._s(_vm.t(i.i18n_key, i.title)))]):_vm._e(),_vm._v(\" \"),(i !== _vm.item)?[_vm._v(\" \")]:_vm._e()],2)}),_vm._v(\" \"),(_vm.item.header_links)?_c('span',{staticClass:\"ffz--menu-page__header-links\"},[_c('span',{staticClass:\"tw-mg-x-05\"},[_vm._v(\"\")]),_vm._v(\" \"),_vm._l((_vm.item.header_links),function(i){return [(i.href && i.href.startsWith('~'))?_c('a',{staticClass:\"tw-mg-r-05\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.$emit('navigate', i.href.slice(1))}}},[_vm._v(_vm._s(_vm.t(i.i18n_key, i.title)))]):(i.href)?_c('react-link',{staticClass:\"tw-mg-r-05\",attrs:{\"href\":i.href,\"state\":i.state}},[_vm._v(_vm._s(_vm.t(i.i18n_key, i.title)))]):(i.navigate)?_c('a',{staticClass:\"tw-mg-r-05\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.navigate.apply(void 0, i.navigate)}}},[_vm._v(_vm._s(_vm.t(i.i18n_key, i.title)))]):(i.target)?_c('a',{staticClass:\"tw-mg-r-05\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.$emit('change-item', i.target, false)}}},[_vm._v(_vm._s(_vm.t(i.i18n_key, i.title)))]):_vm._e()]})],2):_vm._e()],2),_vm._v(\" \"),(_vm.context.currentProfile.ephemeral && _vm.item.profile_warning !== false)?_c('section',{staticClass:\"tw-border-t tw-pd-t-1 tw-pd-b-2\"},[_c('div',{staticClass:\"tw-c-background-accent tw-c-text-overlay tw-pd-1\"},[_c('h3',{staticClass:\"ffz-i-attention\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.ephemeral', \"This profile is ephemeral.\"))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.ephemeral.description',\n\t\t\t\t\t\"The currently selected profile is ephemeral, which is a fancy way of saying that it was automatically generated, that it only exists temporarily, and that any changes you make won't be saved.\"\n\t\t\t\t))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.t('setting.profiles.ephemeral.description-2',\n\t\t\t\t\"Please select a different profile from the selector at the upper left of this menu to edit your settings.\"\n\t\t\t)))])])]):_vm._e(),_vm._v(\" \"),((! _vm.context.currentProfile.live || ! _vm.context.currentProfile.toggled) && _vm.item.profile_warning !== false)?_c('section',{staticClass:\"tw-border-t tw-pd-t-1 tw-pd-b-2\"},[_c('div',{staticClass:\"tw-c-background-accent tw-c-text-overlay tw-pd-1\"},[_c('h3',{staticClass:\"ffz-i-attention\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.inactive', \"This profile is not active.\"))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(! _vm.context.currentProfile.toggled)?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.disabled.description',\n\t\t\t\t\t\"This profile has been disabled, so you won't see changes you make here reflected on Twitch.\"))+\"\\n\\t\\t\\t\")]):_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.inactive.description',\n\t\t\t\t\t\"This profile's rules don't match the current context and it therefore isn't currently active, so you \" +\n\t\t\t\t\t\t\"won't see changes you make here reflected on Twitch.\"))+\"\\n\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.context.currentProfile.url && ! _vm.context.currentProfile.pause_updates && _vm.item.profile_warning !== false)?_c('section',{staticClass:\"tw-border-t tw-pd-t-1 tw-pd-b-2\"},[_c('div',{staticClass:\"tw-c-background-accent tw-c-text-overlay tw-pd-1\"},[_c('h3',{staticClass:\"ffz-i-attention\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.updates', 'This profile will update automatically.'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profile.updates-about',\n\t\t\t\t\t'This profile is set to automatically update. When it does, any changed settings within it will be reset. Profile Rules will be reset as well.'))+\"\\n\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.context.has_update)?_c('section',{staticClass:\"tw-border-t tw-pd-t-1 tw-pd-b-2\"},[_c('div',{staticClass:\"tw-c-background-accent tw-c-text-overlay tw-pd-1\"},[_c('h3',{staticClass:\"ffz-i-arrows-cw\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.update', 'There is an update available.'))+\"\\n\\t\\t\\t\")]),_vm._v(\"\\n\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.update.description',\n\t\t\t\t'Please refresh your page to receive the latest version of FrankerFaceZ.'))+\"\\n\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.item.description)?_c('section',{staticClass:\"tw-border-t tw-pd-y-1\"},[_c('markdown',{attrs:{\"source\":_vm.t(_vm.item.desc_i18n_key || ((_vm.item.i18n_key) + \".description\"), _vm.item.description)}})],1):_vm._e(),_vm._v(\" \"),(! _vm.item.contents || ! _vm.item.contents.length || _vm.item.always_list_pages)?[_c('ul',{staticClass:\"tw-border-t tw-pd-y-1\"},_vm._l((_vm.visibleItems),function(i){return _c('li',{key:i.full_key,staticClass:\"tw-pd-x-1\",class:{'ffz-unmatched-item': ! _vm.shouldShow(i)}},[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.$emit('change-item', i, false)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t(i.i18n_key, i.title))+\"\\n\\t\\t\\t\\t\\t\"),(_vm.filter)?_c('span',{staticClass:\"ffz-pill ffz-pill--overlay\"},[_vm._v(_vm._s(_vm.countMatches(i)))]):(i.unseen)?_c('span',{staticClass:\"ffz-pill ffz-pill--overlay\"},[_vm._v(_vm._s(i.unseen))]):_vm._e()])])}),0)]:_vm._e(),_vm._v(\" \"),_vm._l((_vm.visibleContents),function(i){return _c('div',{key:i.full_key,class:{'ffz-unmatched-item': ! _vm.shouldShow(i)}},[_c(i.component,{ref:\"children\",refInFor:true,tag:\"component\",attrs:{\"context\":_vm.context,\"item\":i,\"nav-keys\":_vm.navKeys,\"filter\":_vm.filter},on:{\"change-item\":_vm.changeItem,\"mark-seen\":_vm.markSeen,\"navigate\":_vm.navigate}})],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./menu-page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./menu-page.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['item', 'context', 'filter', 'navKeys'],\n\n\tcomputed: {\n\t\tbreadcrumbs() {\n\t\t\tconst out = [];\n\t\t\tlet current = this.item;\n\t\t\twhile(current) {\n\t\t\t\tout.unshift(current);\n\t\t\t\tcurrent = current.parent;\n\t\t\t}\n\n\t\t\treturn out;\n\t\t},\n\n\t\tvisibleItems() {\n\t\t\tif ( ! this.item || ! this.item.items )\n\t\t\t\treturn [];\n\n\t\t\tif ( ! this.context.matches_only )\n\t\t\t\treturn this.item.items;\n\n\t\t\treturn this.item.items.filter(item => this.shouldShow(item));\n\t\t},\n\n\t\tvisibleContents() {\n\t\t\tif ( ! this.item || ! this.item.contents )\n\t\t\t\treturn [];\n\n\t\t\tif ( ! this.context.matches_only )\n\t\t\t\treturn this.item.contents;\n\n\t\t\treturn this.item.contents.filter(item => this.shouldShow(item));\n\t\t}\n\t},\n\n\tmethods: {\n\t\tshouldShow(item, is_walking = false) {\n\t\t\tif ( ! this.filter || item.no_filter )\n\t\t\t\treturn true;\n\n\t\t\tif ( this.filter.flags ) {\n\t\t\t\tif ( this.filter.flags.has('modified') ) {\n\t\t\t\t\t// We need to tree walk for this one.\n\t\t\t\t\tif ( ! is_walking ) {\n\t\t\t\t\t\tfor(const key of ['tabs', 'contents', 'items'])\n\t\t\t\t\t\t\tif ( item[key] )\n\t\t\t\t\t\t\t\tfor(const thing of item[key])\n\t\t\t\t\t\t\t\t\tif ( this.shouldShow(thing) )\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! item.setting || ! this.context.currentProfile.has(item.setting) )\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( this.filter.query ) {\n\t\t\t\tif ( ! item.search_terms || ! item.search_terms.includes(this.filter.query) )\n\t\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tcountMatches(item, seen) {\n\t\t\tif ( ! this.filter || ! item )\n\t\t\t\treturn 0;\n\n\t\t\tif ( seen && seen.has(item) )\n\t\t\t\treturn 0;\n\n\t\t\tif ( ! seen )\n\t\t\t\tseen = new Set;\n\n\t\t\tseen.add(item);\n\n\t\t\tlet count = 0;\n\n\t\t\tfor(const key of ['tabs', 'contents', 'items'])\n\t\t\t\tif ( item[key] )\n\t\t\t\t\tfor(const thing of item[key])\n\t\t\t\t\t\tcount += this.countMatches(thing, seen);\n\n\t\t\tif ( item.setting && this.shouldShow(item, true) )\n\t\t\t\tcount++;\n\n\t\t\treturn count;\n\t\t},\n\n\t\tmarkSeen(item) {\n\t\t\tthis.$emit('mark-seen', item);\n\t\t},\n\n\t\tchangeItem(item) {\n\t\t\tthis.$emit('change-item', item);\n\t\t},\n\n\t\tnavigate(...args) {\n\t\t\tthis.$emit('navigate', ...args);\n\t\t},\n\n\t\tonBeforeChange(current, new_item) {\n\t\t\tif ( this.$refs.children )\n\t\t\t\tfor(const child of this.$refs.children)\n\t\t\t\t\tif ( child && child.onBeforeChange ) {\n\t\t\t\t\t\tconst res = child.onBeforeChange(current, new_item);\n\t\t\t\t\t\tif ( res !== undefined )\n\t\t\t\t\t\t\treturn res;\n\t\t\t\t\t}\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./menu-page.vue?vue&type=template&id=601a8b02&lang=html&\"\nimport script from \"./menu-page.vue?vue&type=script&lang=js&\"\nexport * from \"./menu-page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.modal)?_c('ul',{staticClass:\"ffz--menu-tree\",attrs:{\"role\":[_vm.root ? 'group' : 'tree'],\"tabindex\":_vm.tabIndex},on:{\"keyup\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"])){ return null; }return _vm.prevItem.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"])){ return null; }return _vm.nextItem.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.prevLevel.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"right\",39,$event.key,[\"Right\",\"ArrowRight\"])){ return null; }if('button' in $event && $event.button !== 2){ return null; }return _vm.nextLevel.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"*\",undefined,$event.key,undefined)){ return null; }return _vm.expandAll.apply(null, arguments)}]}},_vm._l((_vm.displayed),function(item){return _c('li',{key:item.full_key,class:[(_vm.currentItem === item || item.hide_children && _vm.containsCurrent(item)) ? 'active' : ''],attrs:{\"data-key\":item.full_key,\"role\":\"presentation\"}},[_c('div',{staticClass:\"tw-flex__item tw-flex tw-flex-nowrap tw-align-items-center tw-pd-y-05 tw-pd-r-05\",attrs:{\"aria-expanded\":item.expanded,\"aria-selected\":_vm.currentItem === item,\"role\":\"treeitem\"},on:{\"click\":function($event){return _vm.clickItem(item)}}},[_c('span',{staticClass:\"arrow\",class:[\n\t\t\t\t\t(item.items && ! item.hide_children) ? '' : 'ffz--invisible',\n\t\t\t\t\titem.expanded ? 'ffz-i-down-dir' : 'ffz-i-right-dir'\n\t\t\t\t],attrs:{\"role\":\"presentation\"}}),_vm._v(\" \"),_c('span',{staticClass:\"tw-flex-grow-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t(item.i18n_key, item.title))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.filter)?_c('span',{staticClass:\"ffz-pill ffz-pill--overlay\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.countMatches(item))+\"\\n\\t\\t\\t\")]):(item.pill)?_c('span',{staticClass:\"ffz-pill ffz-pill--overlay\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(item.pill_i18n_key ? _vm.t(item.pill_i18n_key, item.pill) : item.pill)+\"\\n\\t\\t\\t\")]):(item.unseen)?_c('span',{staticClass:\"ffz-pill ffz-pill--overlay\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(item.unseen)+\"\\n\\t\\t\\t\")]):_vm._e()]),_vm._v(\" \"),(item.items && item.expanded && ! item.hide_children)?_c('menu-tree',{attrs:{\"root\":item,\"current-item\":_vm.currentItem,\"modal\":item.items,\"context\":_vm.context,\"filter\":_vm.filter},on:{\"change-item\":function (i) { return _vm.$emit('change-item', i); },\"mark-seen\":function (i) { return _vm.$emit('mark-seen', i); },\"mark-expanded\":function (i) { return _vm.$emit('mark-expanded', i); }}}):_vm._e()],1)}),0):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nfunction findLastVisible(node) {\n\tif ( node.expanded && node.items )\n\t\treturn findLastVisible(node.items[node.items.length - 1]);\n\n\treturn node;\n}\n\n\nfunction findNextVisible(node, modal) {\n\tconst items = node.parent ? node.parent.items : modal,\n\t\tidx = items.indexOf(node);\n\n\tif ( items[idx + 1] )\n\t\treturn items[idx+1];\n\n\tif ( node.parent )\n\t\treturn findNextVisible(node.parent, modal);\n\n\treturn null;\n}\n\n\nfunction recursiveExpand(node, vue) {\n\tif ( ! node.expanded ) {\n\t\tnode.expanded = true;\n\t\tif ( vue )\n\t\t\tvue.$emit('mark-expanded', node);\n\t}\n\n\tif ( node.items )\n\t\tfor(const item of node.items)\n\t\t\trecursiveExpand(item, vue);\n}\n\n\nexport default {\n\tprops: ['root', 'modal', 'currentItem', 'filter', 'context'],\n\n\tcomputed: {\n\t\ttabIndex() {\n\t\t\treturn this.root ? undefined : 0;\n\t\t},\n\n\t\tdisplayed() {\n\t\t\treturn this.modal.filter(item => this.shouldShow(item));\n\t\t}\n\t},\n\n\tmethods: {\n\t\tshouldShow(item, is_walking = false) {\n\t\t\tif ( ! this.filter || this.containsCurrent(item) )\n\t\t\t\treturn true;\n\n\t\t\tif ( this.filter.flags ) {\n\t\t\t\tif ( this.filter.flags.has('modified') ) {\n\t\t\t\t\t// We need to tree walk for this one.\n\t\t\t\t\tif ( ! is_walking ) {\n\t\t\t\t\t\tfor(const key of ['tabs', 'contents', 'items'])\n\t\t\t\t\t\t\tif ( item[key] )\n\t\t\t\t\t\t\t\tfor(const thing of item[key])\n\t\t\t\t\t\t\t\t\tif ( this.shouldShow(thing) )\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! item.setting || ! this.context.currentProfile.has(item.setting) )\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( this.filter.query ) {\n\t\t\t\tif ( ! item.search_terms || ! item.search_terms.includes(this.filter.query) )\n\t\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tcountMatches(item, seen) {\n\t\t\tif ( ! this.filter || ! item )\n\t\t\t\treturn 0;\n\n\t\t\tif ( seen && seen.has(item) )\n\t\t\t\treturn 0;\n\n\t\t\tif ( ! seen )\n\t\t\t\tseen = new Set;\n\n\t\t\tseen.add(item);\n\n\t\t\tlet count = 0;\n\n\t\t\tfor(const key of ['tabs', 'contents', 'items'])\n\t\t\t\tif ( item[key] )\n\t\t\t\t\tfor(const thing of item[key])\n\t\t\t\t\t\tcount += this.countMatches(thing, seen);\n\n\t\t\tif ( item.setting && this.shouldShow(item, true) )\n\t\t\t\tcount++;\n\n\t\t\treturn count;\n\t\t},\n\n\t\tcontainsCurrent(item) {\n\t\t\tlet i = this.currentItem;\n\t\t\twhile ( i ) {\n\t\t\t\tif ( item === i )\n\t\t\t\t\treturn true;\n\n\t\t\t\ti = i.parent;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\tclickItem(item) {\n\t\t\tif ( ! item.expanded )\n\t\t\t\titem.expanded = true;\n\t\t\telse if ( this.currentItem === item )\n\t\t\t\titem.expanded = false;\n\n\t\t\tthis.$emit('mark-expanded', item);\n\t\t\tthis.$emit('change-item', item);\n\t\t},\n\n\t\texpandAll() {\n\t\t\tfor(const item of this.modal)\n\t\t\t\trecursiveExpand(item, this);\n\t\t},\n\n\t\tprevItem() {\n\t\t\tif ( this.root ) return;\n\n\t\t\tconst i = this.currentItem,\n\t\t\t\titems = i.parent ? i.parent.items : this.modal,\n\t\t\t\tidx = items.indexOf(i);\n\n\t\t\tif ( idx > 0 )\n\t\t\t\tthis.$emit('change-item', findLastVisible(items[idx-1]));\n\n\t\t\telse if ( i.parent )\n\t\t\t\tthis.$emit('change-item', i.parent);\n\t\t},\n\n\t\tnextItem() {\n\t\t\tif ( this.root ) return;\n\n\t\t\tconst i = this.currentItem;\n\t\t\tlet target;\n\n\t\t\tif ( i.expanded && i.items )\n\t\t\t\ttarget = i.items[0];\n\n\t\t\telse\n\t\t\t\ttarget = findNextVisible(i, this.modal);\n\n\t\t\tif ( target )\n\t\t\t\tthis.$emit('change-item', target);\n\t\t},\n\n\t\tprevLevel() {\n\t\t\tif ( this.root ) return;\n\n\t\t\tconst i = this.currentItem;\n\n\t\t\tif ( i.expanded && i.items ) {\n\t\t\t\ti.expanded = false;\n\t\t\t\tthis.$emit('mark-expanded', i);\n\t\t\t} else if ( i.parent )\n\t\t\t\tthis.$emit('change-item', i.parent);\n\t\t},\n\n\t\tnextLevel() {\n\t\t\tif ( this.root ) return;\n\n\t\t\tconst i = this.currentItem;\n\t\t\tif ( i.expanded && i.items )\n\t\t\t\tthis.$emit('change-item', i.items[0]);\n\t\t\telse {\n\t\t\t\ti.expanded = true;\n\t\t\t\tthis.$emit('mark-expanded', i);\n\t\t\t}\n\n\t\t\tif ( event.ctrlKey )\n\t\t\t\trecursiveExpand(this.currentItem, this);\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./menu-tree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./menu-tree.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./menu-tree.vue?vue&type=template&id=3036763e&lang=html&\"\nimport script from \"./menu-tree.vue?vue&type=script&lang=js&\"\nexport * from \"./menu-tree.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('pre',[_vm._v(_vm._s(JSON.stringify(_vm.events, null, '\\t')))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./performance.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./performance.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n\n\nimport {deep_copy} from 'utilities/object';\n\nexport default {\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tevents: deep_copy(this.item.getEvents())\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tinitial_time() {\n\t\t\tconst event = this.events[0];\n\t\t\treturn event ? event.ts : 0;\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.onEvent = this.onEvent.bind(this);\n\t\tthis.item.setListener(this.onEvent);\n\t},\n\n\tdestroyed() {\n\t\tthis.onEvent = null;\n\t\tthis.item.setListener(null);\n\t},\n\n\tmethods: {\n\t\tonEvent(event) {\n\t\t\tthis.events.push(deep_copy(event));\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./performance.vue?vue&type=template&id=6fce16cc&\"\nimport script from \"./performance.vue?vue&type=script&lang=js&\"\nexport * from \"./performance.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--profile-editor\"},[(_vm.isEphemeral)?_c('section',{staticClass:\"tw-border-t tw-pd-t-1 tw-pd-b-2\"},[_c('div',{staticClass:\"tw-c-background-accent tw-c-text-overlay tw-pd-1\"},[_c('h3',{staticClass:\"ffz-i-attention\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.ephemeral', \"This profile is ephemeral.\"))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.ephemeral.description',\n\t\t\t\t\t\"The currently selected profile is ephemeral, which is a fancy way of saying that it was automatically generated, that it only exists temporarily, and that any changes you make won't be saved.\"\n\t\t\t\t))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.t('setting.profiles.ephemeral.description-2',\n\t\t\t\t\"Please select a different profile from the selector at the upper left of this menu to edit your settings.\"\n\t\t\t)))])])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center tw-border-t tw-pd-1\"},[_c('div',{staticClass:\"tw-flex-grow-1\"}),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text\",class:{'tw-button--disabled': _vm.isEphemeral},attrs:{\"disabled\":_vm.isEphemeral},on:{\"click\":_vm.save}},[_c('span',{staticClass:\"tw-button__text ffz-i-floppy\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.save', 'Save'))+\"\\n\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text\",class:{'tw-button--disabled': _vm.item.profile && _vm.context.profiles.length < 2},attrs:{\"disabled\":_vm.item.profile && _vm.context.profiles.length < 2},on:{\"click\":_vm.del}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text\",class:{'tw-button--disabled': ! _vm.canExport},attrs:{\"disabled\":! _vm.canExport},on:{\"click\":_vm.doExport}},[_c('span',{staticClass:\"tw-button__text ffz-i-download\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.export', 'Export'))+\"\\n\\t\\t\\t\")])])]),_vm._v(\" \"),(_vm.export_error)?_c('div',{staticClass:\"tw-c-background-accent-alt-2 tw-c-text-overlay tw-pd-1 tw-mg-b-1 tw-flex tw-align-items-start\"},[_c('section',{staticClass:\"tw-flex-grow-1\"},[_c('h4',{staticClass:\"ffz-i-attention\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.backup-restore.error', 'There was an error processing this backup.'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.export_error_message)?_c('div',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.export_error_message)+\"\\n\\t\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text tw-relative ffz-il-tooltip__container\",on:{\"click\":_vm.resetExport}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.close', 'Close'))+\"\\n\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.export_message)?_c('div',{staticClass:\"tw-c-background-accent-alt-2 tw-c-text-overlay tw-pd-1 tw-mg-b-1 tw-flex tw-align-items-start\"},[_c('section',{staticClass:\"tw-flex-grow-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.export_message)+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text tw-relative ffz-il-tooltip__container\",on:{\"click\":_vm.resetExport}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.close', 'Close'))+\"\\n\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"ffz--menu-container tw-border-t\"},[_c('header',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.data_management.profiles.edit.general', 'General'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"ffz--widget tw-flex tw-flex-nowrap\"},[_c('label',{attrs:{\"for\":\"ffz:editor:name\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.data_management.profiles.edit.name', 'Name'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],ref:\"name\",staticClass:\"tw-full-width tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-input\",attrs:{\"id\":\"ffz:editor:name\",\"disabled\":_vm.isEphemeral},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"ffz--widget tw-flex tw-flex-nowrap\"},[_c('label',{attrs:{\"for\":\"ffz:editor:description\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.data_management.profiles.edit.desc', 'Description'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.desc),expression:\"desc\"}],ref:\"desc\",staticClass:\"tw-full-width tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-input\",attrs:{\"id\":\"ffz:editor:description\",\"disabled\":_vm.isEphemeral},domProps:{\"value\":(_vm.desc)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.desc=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"ffz--widget\"},[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":\"ffz:editor:hotkey\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.data_management.profiles.edit.hotkey', 'Hotkey'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('key-picker',{ref:\"hotkey\",attrs:{\"id\":\"ffz:editor:hotkey\",\"disabled\":_vm.isEphemeral},model:{value:(_vm.hotkey),callback:function ($$v) {_vm.hotkey=$$v},expression:\"hotkey\"}})],1),_vm._v(\" \"),_c('section',{staticClass:\"tw-mg-t-05 tw-c-text-alt-2\"},[_c('markdown',{attrs:{\"source\":_vm.t('setting.data_management.profiles.hotkey.desc', 'Setting a hotkey allows you to toggle a profile on or off at any time by using the hotkey.\\n\\n**Note:** A profile that is toggled on may still be inactive due to its rules.')}})],1)])]),_vm._v(\" \"),(_vm.url)?_c('div',{staticClass:\"ffz--menu-container tw-border-t\"},[_c('header',[_c('figure',{staticClass:\"tw-inline tw-mg-r-05 ffz-i-download-cloud\"}),_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.data_management.profiles.edit.updates', 'Automatic Updates'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('section',{staticClass:\"tw-pd-b-1 tw-c-text-alt-2\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.data_management.profiles.edit.updates.description',\n\t\t\t\t'This profile has an associated URL for automatic updates. When updates are enabled and the profile updates, all settings associated with the profile will be reset. The profile\\'s rules will be reset as well. The Name, Description, and Hotkey will not reset.'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"ffz--widget tw-flex tw-flex-nowrap\"},[_c('label',{attrs:{\"for\":\"ffz:editor:url\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.data_management.profiles.edit.url', 'Update URL'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('input',{staticClass:\"tw-full-width tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-input\",attrs:{\"id\":\"ffz:editor:url\",\"readonly\":\"\"},domProps:{\"value\":_vm.url}})]),_vm._v(\" \"),_c('div',{staticClass:\"ffz--widget ffz--checkbox\"},[_c('div',{staticClass:\"tw-flex tw-align-items-center ffz-checkbox\"},[_c('input',{ref:\"update\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"ffz:editor:update\",\"disabled\":_vm.isEphemeral,\"type\":\"checkbox\"},domProps:{\"checked\":! _vm.pause},on:{\"change\":_vm.onPauseChange}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"ffz:editor:update\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.data_management.profiles.edit.update', 'Automatically update this profile.'))+\"\\n\\t\\t\\t\\t\\t\")])])])])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"ffz--menu-container tw-border-t\"},[_c('header',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.data_management.profiles.edit.rules', 'Rules'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('section',{staticClass:\"tw-pd-b-1 tw-c-text-alt-2\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.data_management.profiles.edit.rules.description',\n\t\t\t\t'Rules allows you to define a series of conditions under which this profile will be active. When there are multiple rules, they must all match for the profile to activate. Please use an `Or` rule to create a profile that activates by matching one of several rules.'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('filter-editor',{attrs:{\"filters\":_vm.filters,\"disabled\":_vm.isEphemeral,\"context\":_vm.test_context,\"preview\":true},model:{value:(_vm.rules),callback:function ($$v) {_vm.rules=$$v},expression:\"rules\"}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./profile-editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./profile-editor.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {deep_copy, deep_equals} from 'utilities/object';\nimport { saveAs } from 'file-saver';\n\nexport default {\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\tconst settings = this.context.getFFZ().resolve('settings');\n\n\t\treturn {\n\t\t\tfilters: deep_copy(settings.filters),\n\n\t\t\told_name: null,\n\t\t\told_desc: null,\n\t\t\told_rules: null,\n\t\t\told_hotkey: null,\n\t\t\told_pause: null,\n\n\t\t\tname: null,\n\t\t\tdesc: null,\n\t\t\thotkey: null,\n\t\t\turl: null,\n\t\t\tpause: null,\n\t\t\tunsaved: false,\n\n\t\t\trules: null,\n\t\t\ttest_context: null,\n\n\t\t\texport_error: false,\n\t\t\texport_error_message: null,\n\t\t\texport_message: null\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tisEphemeral() {\n\t\t\treturn this.item.profile?.ephemeral ?? false\n\t\t},\n\n\t\tcanExport() {\n\t\t\treturn this.item.profile != null\n\t\t}\n\t},\n\n\twatch: {\n\t\tname() {\n\t\t\tif ( this.name !== this.old_name )\n\t\t\t\tthis.unsaved = true;\n\t\t},\n\n\t\tdesc() {\n\t\t\tif ( this.desc !== this.old_desc )\n\t\t\t\tthis.unsaved = true;\n\t\t},\n\n\t\thotkey() {\n\t\t\tif ( this.hotkey !== this.old_hotkey )\n\t\t\t\tthis.unsaved = true;\n\t\t},\n\n\t\tpause() {\n\t\t\tif ( this.pause !== this.old_pause )\n\t\t\t\tthis.unsaved = true;\n\t\t},\n\n\t\trules: {\n\t\t\thandler() {\n\t\t\t\tif ( ! deep_equals(this.rules, this.old_rules) )\n\t\t\t\t\tthis.unsaved = true;\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.context.context.on('context_changed', this.updateContext, this);\n\t\tthis.updateContext();\n\t\tthis.revert();\n\t},\n\n\tbeforeDestroy() {\n\t\tthis.context.context.off('context_changed', this.updateContext, this);\n\t},\n\n\tmethods: {\n\t\tonPauseChange() {\n\t\t\tthis.pause = ! this.$refs.update.checked;\n\t\t},\n\n\t\tresetExport() {\n\t\t\tthis.export_error = false;\n\t\t\tthis.export_error_message = null;\n\t\t\tthis.export_message = null;\n\t\t},\n\n\t\tdoExport() {\n\t\t\tthis.resetExport();\n\n\t\t\tlet blob;\n\t\t\ttry {\n\t\t\t\tconst data = this.item.profile.getBackup();\n\t\t\t\tblob = new Blob([JSON.stringify(data)], {type: 'application/json;charset=utf-8'});\n\t\t\t} catch(err) {\n\t\t\t\tthis.export_error = true;\n\t\t\t\tthis.export_error_message = this.t('setting.backup-restore.dump-error', 'Unable to export settings data to JSON.');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tsaveAs(blob, `ffz-profile - ${this.name}.json`);\n\t\t\t} catch(err) {\n\t\t\t\tthis.export_error = true;\n\t\t\t\tthis.export_error_message = this.t('setting.backup-restore.save-error', 'Unable to save.');\n\t\t\t}\n\t\t},\n\n\t\trevert() {\n\t\t\tconst profile = this.item.profile;\n\n\t\t\tthis.old_name = this.name = profile ?\n\t\t\t\tprofile.i18n_key ?\n\t\t\t\t\tthis.t(profile.i18n_key, profile.title, profile) :\n\t\t\t\t\tprofile.title :\n\t\t\t\t'Unnamed Profile';\n\n\t\t\tthis.old_desc = this.desc = profile ?\n\t\t\t\tprofile.desc_i18n_key ?\n\t\t\t\t\tthis.t(profile.desc_i18n_key, profile.description, profile) :\n\t\t\t\t\tprofile.description :\n\t\t\t\t'';\n\n\t\t\tthis.old_hotkey = this.hotkey = profile ? profile.hotkey : null;\n\t\t\tthis.old_rules = this.rules = profile ? deep_copy(profile.context) : [];\n\t\t\tthis.old_url = this.url = profile ? profile.url : null;\n\t\t\tthis.old_pause = this.pause = profile ? profile.pause_updates : null;\n\t\t\tthis.unsaved = ! profile;\n\t\t},\n\n\t\tdel() {\n\t\t\tif ( this.item.profile || this.unsaved ) {\n\t\t\t\tif ( ! confirm(this.t( // eslint-disable-line no-alert\n\t\t\t\t\t'setting.profiles.warn-delete',\n\t\t\t\t\t'Are you sure you wish to delete this profile? It cannot be undone.'\n\t\t\t\t)) )\n\t\t\t\t\treturn\n\n\t\t\t\tif ( this.item.profile )\n\t\t\t\t\tthis.context.deleteProfile(this.item.profile);\n\t\t\t}\n\n\t\t\tthis.unsaved = false;\n\t\t\tthis.$emit('navigate', 'data_management.profiles');\n\t\t},\n\n\t\tsave() {\n\t\t\tif ( ! this.item.profile ) {\n\t\t\t\tthis.item.profile = this.context.createProfile({\n\t\t\t\t\tname: this.name,\n\t\t\t\t\tdescription: this.desc,\n\t\t\t\t\tcontext: this.rules,\n\t\t\t\t\thotkey: this.hotkey,\n\t\t\t\t\tpause_updates: this.pause\n\t\t\t\t});\n\n\t\t\t} else if ( this.unsaved ) {\n\t\t\t\tconst changes = {\n\t\t\t\t\tname: this.name,\n\t\t\t\t\tdescription: this.desc,\n\t\t\t\t\tcontext: this.rules,\n\t\t\t\t\thotkey: this.hotkey,\n\t\t\t\t\tpause_updates: this.pause\n\t\t\t\t};\n\n\t\t\t\t// Disable i18n if required.\n\t\t\t\tif ( this.name !== this.old_name )\n\t\t\t\t\tchanges.i18n_key = undefined;\n\n\t\t\t\tif ( this.desc !== this.old_desc )\n\t\t\t\t\tchanges.desc_i18n_key = undefined;\n\n\t\t\t\tthis.item.profile.update(changes);\n\t\t\t}\n\n\t\t\tthis.unsaved = false;\n\t\t\tthis.$emit('navigate', 'data_management.profiles');\n\t\t},\n\n\t\tupdateContext() {\n\t\t\tthis.test_context = this.context.context.context;\n\t\t},\n\n\t\tonBeforeChange() {\n\t\t\tif ( this.unsaved )\n\t\t\t\treturn confirm( // eslint-disable-line no-alert\n\t\t\t\t\tthis.t(\n\t\t\t\t\t\t'setting.warn-unsaved',\n\t\t\t\t\t\t'You have unsaved changes. Are you sure you want to leave the editor?'\n\t\t\t\t\t));\n\t\t}\n\t}\n\n}\n\n","import { render, staticRenderFns } from \"./profile-editor.vue?vue&type=template&id=114bd5df&lang=html&\"\nimport script from \"./profile-editor.vue?vue&type=script&lang=js&\"\nexport * from \"./profile-editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--widget ffz--profile-manager tw-border-t tw-pd-y-1\"},[(_vm.context.exclusive)?_c('section',{staticClass:\"tw-pd-b-2\"},[_c('div',{staticClass:\"tw-c-background-accent tw-c-text-overlay tw-pd-1\"},[_c('h3',{staticClass:\"ffz-i-info\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.context-difference', 'Your Profiles might not match.'))+\"\\n\\t\\t\\t\")]),_vm._v(\"\\n\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.context-difference.description',\n\t\t\t\t'Since the Control Center is open in a new window, profiles may match differently here than on other Twitch windows.'))+\"\\n\\n\\t\\t\\t\"),(_vm.context.can_proxy)?_c('div',{staticClass:\"tw-flex tw-align-items-center tw-mg-t-1\"},[_c('div',{staticClass:\"ffz-checkbox tw-relative ffz-il-tooltip__container\"},[_c('input',{ref:\"proxied\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"proxied\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.context.proxied},on:{\"change\":_vm.onProxyCheck}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"proxied\"}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.context-difference.use', 'Use Original Windows\\'s Context'))+\"\\n\\t\\t\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-balloon--md ffz-il-tooltip--wrap ffz-il-tooltip--down ffz-il-tooltip--align-left\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.context-difference.tip', 'Checking this will use the context from the original window, causing profiles and thier rules to match like they would in the window that opened this Control Center.'))+\"\\n\\t\\t\\t\\t\\t\")])])]):_vm._e()])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center tw-pd-b-05\"},[_c('div',{staticClass:\"tw-flex-grow-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.drag', 'Drag profiles to change their priority.'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text\",class:{'tw-button--disabled': _vm.importing},attrs:{\"disabled\":_vm.importing},on:{\"click\":function($event){return _vm.edit()}}},[_c('span',{staticClass:\"tw-button__text ffz-i-plus\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.new', 'New Profile'))+\"\\n\\t\\t\\t\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"on-clickaway\",rawName:\"v-on-clickaway\",value:(_vm.closeMenu),expression:\"closeMenu\"}],staticClass:\"tw-relative\"},[_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text\",class:{'tw-button--disabled': _vm.importing},attrs:{\"disabled\":_vm.importing},on:{\"click\":_vm.toggleMenu}},[_c('span',{staticClass:\"tw-button__text ffz-i-upload\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.import', 'Import'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_vm._m(0)]),_vm._v(\" \"),(_vm.menu_open)?_c('balloon',{attrs:{\"color\":\"background-alt-2\",\"dir\":\"down-right\",\"size\":_vm.menu_pasting ? 'md' : 'sm'}},[_c('simplebar',{staticClass:\"ffz-mh-30\"},[(_vm.menu_pasting)?_c('div',{staticClass:\"tw-pd-1\"},[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('input',{ref:\"paste\",staticClass:\"tw-flex-grow-1 tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-input\",attrs:{\"placeholder\":_vm.t('setting.paste-url.url', '[url]')},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.doImportURL.apply(null, arguments)}}}),_vm._v(\" \"),_c('button',{staticClass:\"tw-mg-l-05 tw-button\",on:{\"click\":_vm.doImportURL}},[_c('span',{staticClass:\"tw-button__text ffz-i-plus\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.import.do', 'Import'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\")])])])]):_c('div',{staticClass:\"tw-pd-y-1\"},[_c('button',{staticClass:\"ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive tw-full-width\",on:{\"click\":_vm.preparePaste}},[_c('div',{staticClass:\"tw-flex tw-align-items-center tw-pd-y-05 tw-pd-x-1\"},[_c('div',{staticClass:\"tw-flex-grow-1 tw-mg-r-1 ffz-i-download-cloud\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.import.url', 'From URL'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('button',{staticClass:\"ffz-interactable ffz-interactable--hover-enabled ffz-interactable--default tw-interactive tw-full-width\",on:{\"click\":_vm.doImport}},[_c('div',{staticClass:\"tw-flex tw-align-items-center tw-pd-y-05 tw-pd-x-1\"},[_c('div',{staticClass:\"tw-flex-grow-1 tw-mg-r-1 ffz-i-upload\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.import.file', 'From File'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\")])])])])])],1):_vm._e()],1)]),_vm._v(\" \"),(_vm.import_error)?_c('div',{staticClass:\"tw-c-background-accent-alt-2 tw-c-text-overlay tw-pd-1 tw-mg-b-1 tw-flex tw-align-items-start\"},[_c('section',{staticClass:\"tw-flex-grow-1\"},[_c('h4',{staticClass:\"ffz-i-attention\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.backup-restore.error', 'There was an error processing this backup.'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.import_error_message)?_c('div',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.import_error_message)+\"\\n\\t\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text tw-relative ffz-il-tooltip__container\",on:{\"click\":_vm.resetImport}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.close', 'Close'))+\"\\n\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.import_message)?_c('div',{staticClass:\"tw-c-background-accent-alt-2 tw-c-text-overlay tw-pd-1 tw-mg-b-1 tw-flex tw-align-items-start\"},[_c('section',{staticClass:\"tw-flex-grow-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.import_message)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.import_closable)?_c('button',{staticClass:\"tw-button tw-button--text tw-relative ffz-il-tooltip__container\",on:{\"click\":_vm.resetImport}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.close', 'Close'))+\"\\n\\t\\t\\t\")])]):_vm._e()]):_vm._e(),_vm._v(\" \"),(_vm.import_profiles)?_c('div',{staticClass:\"tw-c-background-accent-alt-2 tw-c-text-overlay tw-pd-1 tw-mg-b-1 tw-flex tw-align-items-start\"},[_c('section',{staticClass:\"tw-flex-grow-1\"},[_c('h4',{staticClass:\"ffz-i-upload\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.backup-restore.pick-profile', 'Please select a profile to import.'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_vm._l((_vm.import_profiles),function(profile,idx){return _c('button',{key:idx,staticClass:\"tw-block tw-full-width tw-mg-y-05 tw-mg-r-1 tw-pd-05 tw-button ffz-button--hollow tw-c-text-overlay tw-relative ffz-il-tooltip__container\",on:{\"click\":function($event){return _vm.importProfile(profile)}}},[_c('span',{staticClass:\"tw-button__text tw-c-text-overlay\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(profile.i18n_key ? _vm.t(profile.i18n_key, profile.name) : profile.name)+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),(profile.description)?_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-left\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(profile.desc_i18n_key ? _vm.t(profile.desc_i18n_key, profile.description) : profile.description)+\"\\n\\t\\t\\t\\t\")]):_vm._e()])})],2),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text tw-relative ffz-il-tooltip__container\",on:{\"click\":_vm.resetImport}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.close', 'Close'))+\"\\n\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.import_profile)?_c('div',{staticClass:\"tw-c-background-accent-alt-2 tw-c-text-overlay tw-pd-1 tw-mg-b-1 tw-flex tw-align-items-start\"},[_c('section',{staticClass:\"tw-flex-grow-1\"},[_c('h4',{staticClass:\"ffz-i-help\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.backup-restore.confirm-updates', 'The profile you are importing has an automatic update URL. Do you want the profile to keep itself up to date?'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('button',{staticClass:\"tw-block tw-full-width tw-mg-y-05 tw-mg-r-1 tw-pd-05 tw-button ffz-button--hollow tw-c-text-overlay\",on:{\"click\":function($event){return _vm.confirmImport(true)}}},[_c('span',{staticClass:\"tw-button__text tw-c-text-overlay ffz-i-ok\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.backup-restore.enable-auto', 'Yes, allow automatic updates.'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-block tw-full-width tw-mg-y-05 tw-mg-r-1 tw-pd-05 tw-button ffz-button--hollow tw-c-text-overlay\",on:{\"click\":function($event){return _vm.confirmImport(false)}}},[_c('span',{staticClass:\"tw-button__text tw-c-text-overlay ffz-i-cancel\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.backup-restore.disable-auto', 'No, prevent automatic updates.'))+\"\\n\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text tw-relative ffz-il-tooltip__container\",on:{\"click\":_vm.resetImport}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.close', 'Close'))+\"\\n\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),_c('div',{ref:\"list\",staticClass:\"ffz--profile-list\"},_vm._l((_vm.context.profiles),function(p){return _c('section',{key:p.id,attrs:{\"data-profile\":p.id}},[_c('div',{staticClass:\"ffz--profile tw-elevation-1 tw-c-background-base tw-border tw-pd-y-05 tw-pd-r-1 tw-mg-y-05 tw-flex tw-flex-nowrap\",class:{live: p.live},attrs:{\"tabindex\":\"0\"}},[_vm._m(1,true),_vm._v(\" \"),(p.ephemeral)?_c('div',{staticClass:\"tw-flex tw-flex-shrink-0 tw-align-items-center tw-mg-r-1 tw-relative ffz-il-tooltip__container tw-font-size-4\"},[_c('span',{staticClass:\"ffz-i-user-secret\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-left\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.ephemeral', 'This profile is ephemeral.'))+\"\\n\\t\\t\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(p.url)?_c('div',{staticClass:\"tw-flex tw-flex-shrink-0 tw-align-items-center tw-mg-r-1 tw-relative ffz-il-tooltip__container tw-font-size-4\"},[_c('span',{class:(\"ffz-i-download-cloud\" + (p.pause_updates ? ' ffz-unmatched-item' : ''))}),_vm._v(\" \"),(! p.pause_updates)?_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-left\"},[_c('div',{staticClass:\"tw-mg-b-05\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profile.updates', 'This profile will update automatically from the following URL:'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(p.url)+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e()]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex-grow-1\"},[_c('h4',[_vm._v(_vm._s(p.i18n_key ? _vm.t(p.i18n_key, p.title, p) : p.title))]),_vm._v(\" \"),(p.description)?_c('div',{staticClass:\"description\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(p.desc_i18n_key ? _vm.t(p.desc_i18n_key, p.description, p) : p.description)+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-flex-shrink-0 tw-align-items-center\"},[_c('button',{staticClass:\"tw-button tw-button--text\",on:{\"click\":function($event){return _vm.edit(p)}}},[_c('span',{staticClass:\"tw-button__text ffz-i-cog\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.configure', 'Configure'))+\"\\n\\t\\t\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-flex-shrink-0 tw-align-items-center tw-border-l tw-mg-l-1 tw-pd-l-1\"},[_c('button',{staticClass:\"tw-button tw-button--text\",on:{\"click\":function($event){return _vm.toggle(p)}}},[_c('div',{staticClass:\"ffz--profile__icon tw-relative ffz-il-tooltip__container\",class:{\n\t\t\t\t\t\t\t\t'ffz-i-ok': p.live,\n\t\t\t\t\t\t\t\t'ffz-i-cancel': ! p.toggled,\n\t\t\t\t\t\t\t\t'ffz-i-minus': p.toggled && ! p.live\n\t\t\t\t\t\t\t}},[_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[(p.live)?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.active', 'This profile is enabled and active.'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(! p.toggled)?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.disabled', 'This profile is disabled.'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(p.toggled && ! p.live)?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.disabled.rules', 'This profile is enabled, but inactive due to its rules.'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\")]):_vm._e()])])])])])])}),0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--right\"},[_c('figure',{staticClass:\"ffz-i-down-dir\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-flex tw-flex-shrink-0 tw-align-items-center handle tw-pd-x-05 tw-pd-t-1 tw-pd-b-05\"},[_c('span',{staticClass:\"ffz-i-ellipsis-vert\"})])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./profile-manager.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./profile-manager.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport Sortable from 'sortablejs';\n\nimport {openFile, readFile} from 'utilities/dom';\nimport {deep_copy} from 'utilities/object';\nimport SettingsProfile from 'src/settings/profile';\n\nexport default {\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tmenu_open: false,\n\t\t\tmenu_pasting: false,\n\n\t\t\timporting: false,\n\t\t\timport_error: false,\n\t\t\timport_closable: true,\n\t\t\timport_error_message: null,\n\t\t\timport_message: null,\n\t\t\timport_profiles: null,\n\t\t\timport_profile: null\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis._sortable = Sortable.create(this.$refs.list, {\n\t\t\tdraggable: 'section',\n\t\t\tfilter: 'button',\n\n\t\t\tonUpdate: event => {\n\t\t\t\tconst id = event.item.dataset.profile,\n\t\t\t\t\tprofile = this.context.profile_keys[id];\n\n\t\t\t\tif ( profile )\n\t\t\t\t\tprofile.move(event.newIndex);\n\t\t\t}\n\t\t});\n\t},\n\n\tbeforeDestroy() {\n\t\tif ( this._sortable )\n\t\t\tthis._sortable.destroy();\n\n\t\tthis._sortable = null;\n\t},\n\n\tmethods: {\n\t\tcloseMenu() {\n\t\t\tthis.menu_open = false;\n\t\t\tthis.menu_pasting = false;\n\t\t},\n\n\t\ttoggleMenu() {\n\t\t\tthis.menu_open = ! this.menu_open;\n\t\t\tthis.menu_pasting = false;\n\t\t},\n\n\t\tpreparePaste() {\n\t\t\tthis.menu_open = true;\n\t\t\tthis.menu_pasting = true;\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tthis.$refs.paste.focus()\n\t\t\t});\n\t\t},\n\n\t\tonProxyCheck() {\n\t\t\tconst val = this.$refs.proxied.checked;\n\t\t\tthis.context.setProxied(val);\n\t\t},\n\n\t\tedit(profile) {\n\t\t\tconst item = {\n\t\t\t\tfull_key: 'data_management.profiles.edit_profile',\n\t\t\t\tkey: 'edit_profile',\n\n\t\t\t\tprofile_warning: false,\n\n\t\t\t\ttitle: `Edit Profile`,\n\t\t\t\ti18n_key: 'setting.data_management.profiles.edit_profile',\n\t\t\t\tparent: this.item.parent,\n\n\t\t\t\tcontents: [{\n\t\t\t\t\tpage: true,\n\t\t\t\t\tprofile,\n\t\t\t\t\tcomponent: 'profile-editor'\n\t\t\t\t}]\n\t\t\t};\n\n\t\t\titem.contents[0].parent = item;\n\t\t\tthis.$emit('change-item', item);\n\t\t},\n\n\t\ttoggle(profile) {\n\t\t\tprofile.toggle();\n\t\t},\n\n\t\tresetImport() {\n\t\t\tthis.importing = false;\n\t\t\tthis.import_url = null;\n\t\t\tthis.import_error = false;\n\t\t\tthis.import_closable = true;\n\t\t\tthis.import_error_message = null;\n\t\t\tthis.import_message = null;\n\t\t\tthis.import_profiles = null;\n\t\t\tthis.import_profile = null;\n\t\t\tthis.import_profile_data = null;\n\t\t\tthis.import_data = null;\n\t\t},\n\n\t\tasync doImportURL() {\n\t\t\tconst url = this.$refs.paste.value;\n\n\t\t\tthis.closeMenu();\n\t\t\tthis.resetImport();\n\t\t\tthis.import_url = url;\n\t\t\tthis.importing = true;\n\t\t\tthis.import_closable = false;\n\n\t\t\tthis.import_message = this.t('setting.backup-restore.http-loading', 'Loading...');\n\n\t\t\tlet data;\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(url);\n\t\t\t\tif ( ! response.ok )\n\t\t\t\t\tthrow new Error;\n\n\t\t\t\tdata = await response.json();\n\n\t\t\t} catch(err) {\n\t\t\t\tthis.import_message = null;\n\t\t\t\tthis.import_error = true;\n\t\t\t\tthis.import_error_message = this.t('setting.backup-restore.http-error', 'Unable to read JSON from the provided URL.');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.import_message = null;\n\t\t\tthis.importData(data);\n\t\t},\n\n\t\tasync doImport() {\n\t\t\tthis.closeMenu();\n\t\t\tthis.resetImport();\n\t\t\tthis.importing = true;\n\n\t\t\tlet file, contents;\n\t\t\ttry {\n\t\t\t\tfile = await openFile('application/json,application/zip');\n\t\t\t\tif ( ! file ) {\n\t\t\t\t\tthis.resetImport();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// We might get a different MIME than expected, roll with it.\n\t\t\t\tif ( file.type.toLowerCase().includes('zip') ) {\n\t\t\t\t\tconst JSZip = (await import(/* webpackChunkName: \"zip\" */ 'jszip')).default,\n\t\t\t\t\t\tzip = await (new JSZip().loadAsync(file));\n\n\t\t\t\t\tcontents = await zip.file('settings.json').async('text');\n\n\t\t\t\t} else\n\t\t\t\t\tcontents = await readFile(file);\n\n\t\t\t} catch(err) {\n\t\t\t\tthis.import_error = true;\n\t\t\t\tthis.import_error_message = this.t('setting.backup-restore.read-error', 'Unable to read file.');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet data;\n\t\t\ttry {\n\t\t\t\tdata = JSON.parse(contents);\n\t\t\t} catch(err) {\n\t\t\t\tthis.import_error = true;\n\t\t\t\tthis.import_error_message = this.t('setting.backup-restore.json-error', 'Unable to parse file as JSON.');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.importData(data);\n\t\t},\n\n\t\timportData(data) {\n\t\t\tif ( data && data.type === 'full' ) {\n\t\t\t\tlet profiles = data.values && data.values.profiles;\n\t\t\t\tif ( profiles === undefined )\n\t\t\t\t\tprofiles = [\n\t\t\t\t\t\tSettingsProfile.Moderation,\n\t\t\t\t\t\tSettingsProfile.Default\n\t\t\t\t\t];\n\n\t\t\t\tif ( Array.isArray(profiles) ) {\n\t\t\t\t\tthis.import_data = data;\n\t\t\t\t\tthis.import_profiles = deep_copy(profiles);\n\t\t\t\t\treturn;\n\n\t\t\t\t} else {\n\t\t\t\t\tthis.import_message = Object.keys(data.values);\n\t\t\t\t}\n\n\t\t\t} else if ( data && data.type === 'profile' ) {\n\t\t\t\tif ( data.profile && data.values ) {\n\t\t\t\t\tthis.importProfile(data.profile, data.values);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.import_error = true;\n\t\t\tthis.import_error_message = this.t('setting.backup-restore.non-supported', 'This file is not recognized as a supported backup format.');\n\t\t},\n\n\t\timportProfile(profile_data, data) {\n\t\t\tif ( this.import_url && ! profile_data.url )\n\t\t\t\tprofile_data.url = this.import_url;\n\n\t\t\tthis.import_profile = profile_data;\n\t\t\tthis.import_profile_data = data;\n\n\t\t\tif ( profile_data.url )\n\t\t\t\treturn;\n\n\t\t\tthis.confirmImport(false);\n\t\t},\n\n\t\tconfirmImport(allow_update = false) {\n\t\t\tconst profile_data = this.import_profile,\n\t\t\t\tdata = this.import_profile_data;\n\n\t\t\tconst id = profile_data.id;\n\t\t\tdelete profile_data.id;\n\t\t\tif ( ! allow_update )\n\t\t\t\tdelete profile_data.url;\n\n\t\t\tconst prof = this.context.createProfile(profile_data);\n\n\t\t\tprof.update({\n\t\t\t\ti18n_key: undefined,\n\t\t\t\tdesc_i18n_key: undefined,\n\t\t\t\tdescription: `${prof.description ? prof.description + '\\n' : ''}${this.t('setting.backup-restore.imported-at', 'Imported at {now,datetime}.', {now: new Date})}`\n\t\t\t});\n\n\t\t\tlet i = 0;\n\n\t\t\tif ( ! data ) {\n\t\t\t\tconst values = this.import_data && this.import_data.values,\n\t\t\t\t\tprefix = `p:${id}:`;\n\n\t\t\t\tif ( values )\n\t\t\t\t\tfor(const [key, value] of Object.entries(values)) {\n\t\t\t\t\t\tif ( key.startsWith(prefix) ) {\n\t\t\t\t\t\t\tprof.set(key.substr(prefix.length), value);\n\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t} else\n\t\t\t\tfor(const [key, value] of Object.entries(data)) {\n\t\t\t\t\tprof.set(key, value);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\n\t\t\tthis.resetImport();\n\n\t\t\tthis.import_message = this.t('setting.backup-restore.imported', 'The profile \"{name}\" has been successfully imported with {count, plural, one {# setting} other {# settings}}.', {\n\t\t\t\tname: prof.i18n_key ? this.t(prof.i18n_key, prof.title) : prof.title,\n\t\t\t\tcount: i\n\t\t\t});\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./profile-manager.vue?vue&type=template&id=14b0af33&lang=html&\"\nimport script from \"./profile-manager.vue?vue&type=script&lang=js&\"\nexport * from \"./profile-manager.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--widget ffz--profile-selector\"},[_c('div',{ref:\"button\",staticClass:\"tw-flex tw-align-items-center tw-border-radius-medium tw-font-size-6 tw-full-width ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05\",class:{active: _vm.opened},attrs:{\"tabindex\":\"0\"},on:{\"keyup\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"])){ return null; }$event.stopPropagation();$event.preventDefault();return _vm.focusShow.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }$event.stopPropagation();$event.preventDefault();return _vm.focusShow.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"])){ return null; }$event.stopPropagation();$event.preventDefault();return _vm.focusShow.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"right\",39,$event.key,[\"Right\",\"ArrowRight\"])){ return null; }if('button' in $event && $event.button !== 2){ return null; }$event.stopPropagation();$event.preventDefault();return _vm.focusShow.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.focusShow.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"])){ return null; }return _vm.focusShow.apply(null, arguments)}],\"click\":_vm.togglePopup}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.context.currentProfile.i18n_key ? _vm.t(_vm.context.currentProfile.i18n_key, _vm.context.currentProfile.title, _vm.context.currentProfile) : _vm.context.currentProfile.title)+\"\\n\\t\")]),_vm._v(\" \"),(_vm.opened)?_c('div',{directives:[{name:\"on-clickaway\",rawName:\"v-on-clickaway\",value:(_vm.hide),expression:\"hide\"}],staticClass:\"ffz-balloon tw-block ffz-balloon--lg ffz-balloon--down ffz-balloon--left tw-z-above\"},[_c('div',{staticClass:\"ffz--profile-list tw-elevation-2 tw-c-background-alt\",on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"escape\",undefined,$event.key,undefined)){ return null; }return _vm.focusHide.apply(null, arguments)},\"focusin\":_vm.focus,\"focusout\":_vm.blur}},[_c('div',{ref:\"scroller\",staticClass:\"scrollable-area tw-border-b\",attrs:{\"data-simplebar\":\"\"}},[_c('div',{staticClass:\"simplebar-scroll-content\"},[_c('div',{ref:\"popup\",staticClass:\"simplebar-content\"},_vm._l((_vm.context.profiles),function(p){return _c('div',{key:p.id,staticClass:\"ffz--profile-row tw-relative tw-border-b tw-pd-y-05 tw-pd-r-3 tw-pd-l-1\",class:{\n\t\t\t\t\t\t\t\tlive: p.live,\n\t\t\t\t\t\t\t\tcurrent: p === _vm.context.currentProfile\n\t\t\t\t\t\t\t},attrs:{\"tabindex\":\"0\"},on:{\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"])){ return null; }$event.stopPropagation();$event.preventDefault();},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"])){ return null; }$event.stopPropagation();$event.preventDefault();},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"page-up\",undefined,$event.key,undefined)){ return null; }$event.stopPropagation();$event.preventDefault();},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"page-down\",undefined,$event.key,undefined)){ return null; }$event.stopPropagation();$event.preventDefault();}],\"keyup\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"])){ return null; }$event.stopPropagation();return _vm.prevItem.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"])){ return null; }$event.stopPropagation();return _vm.nextItem.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"home\",undefined,$event.key,undefined)){ return null; }return _vm.firstItem.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"end\",undefined,$event.key,undefined)){ return null; }return _vm.lastItem.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"page-up\",undefined,$event.key,undefined)){ return null; }$event.stopPropagation();return _vm.prevPage.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"page-down\",undefined,$event.key,undefined)){ return null; }$event.stopPropagation();return _vm.nextPage.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.changeProfile(p)}],\"click\":function($event){return _vm.changeProfile(p)}}},[_c('div',{staticClass:\"ffz--profile-row__icon-tray tw-flex\"},[(p.ephemeral)?_c('div',{staticClass:\"ffz-il-tooltip__container ffz--profile-row__icon ffz-i-user-secret tw-relative\"},[_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.ephemeral', 'This profile is ephemeral.'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(p.url)?_c('div',{class:(\"ffz-il-tooltip__container ffz--profile-row__icon ffz-i-download-cloud tw-relative\" + (p.pause_updates ? ' ffz-unmatched-item' : ''))},[(! p.pause_updates)?_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.updates', 'This profile will update automatically.'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\")]):_vm._e()]):_vm._e(),_vm._v(\" \"),(! p.toggled)?_c('div',{staticClass:\"ffz-il-tooltip__container ffz--profile-row__icon ffz-i-cancel tw-relative\"},[_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.disabled', 'This profile is disabled.'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(p.live)?_c('div',{staticClass:\"ffz-il-tooltip__container ffz--profile-row__icon ffz-i-ok tw-relative\"},[_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.active', 'This profile is enabled and active.'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\")])]):_vm._e()]),_vm._v(\" \"),_c('h4',[_vm._v(_vm._s(p.i18n_key ? _vm.t(p.i18n_key, p.title, p) : p.title))]),_vm._v(\" \"),(p.description)?_c('div',{staticClass:\"description\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(p.desc_i18n_key ? _vm.t(p.desc_i18n_key, p.description, p) : p.description)+\"\\n\\t\\t\\t\\t\\t\\t\\t\")]):_vm._e()])}),0)])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-pd-y-05 tw-pd-x-05 tw-align-right\"},[_c('button',{staticClass:\"tw-button tw-button--text\",on:{\"click\":_vm.openConfigure}},[_c('span',{staticClass:\"tw-button__text ffz-i-cog\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.profiles.configure', 'Configure'))+\"\\n\\t\\t\\t\\t\\t\")])])])])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nconst indexOf = Array.prototype.indexOf;\n\nexport default {\n\tprops: ['context'],\n\n\tdata() {\n\t\treturn {\n\t\t\topened: false\n\t\t}\n\t},\n\n\twatch: {\n\t\topened() {\n\t\t\tif (this.opened)\n\t\t\t\tthis.$nextTick(() => this.updateScroller());\n\t\t}\n\t},\n\n\tmethods: {\n\t\tupdateScroller() {\n\t\t\tconst scroller = this.$refs.scroller;\n\t\t\tif (!scroller || ! window.ffzSimplebar || scroller.SimpleBar)\n\t\t\t\treturn;\n\n\t\t\tnew ffzSimplebar(scroller, ffzSimplebar.getElOptions(scroller));\n\t\t},\n\n\t\topenConfigure() {\n\t\t\tthis.hide();\n\t\t\tthis.$emit('navigate', 'data_management.profiles');\n\t\t},\n\n\t\tfocus() {\n\t\t\tthis._focused = true;\n\t\t},\n\n\t\tblur() {\n\t\t\tthis._focused = false;\n\t\t\tif ( ! this._blur_timer )\n\t\t\t\tthis._blur_timer = setTimeout(() => {\n\t\t\t\t\tthis._blur_timer = null;\n\t\t\t\t\tif ( ! this._focused && document.hasFocus() )\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t}, 10);\n\t\t},\n\n\n\t\thide() {\n\t\t\tthis.opened = false;\n\t\t},\n\n\t\tshow() {\n\t\t\tif ( ! this.opened )\n\t\t\t\tthis.opened = true;\n\t\t},\n\n\t\ttogglePopup() {\n\t\t\tif ( this.opened )\n\t\t\t\tthis.hide();\n\t\t\telse\n\t\t\t\tthis.show();\n\t\t},\n\n\n\t\tfocusHide() {\n\t\t\tthis.hide();\n\t\t\tthis.$refs.button.focus();\n\t\t},\n\n\t\tfocusShow() {\n\t\t\tthis.show();\n\t\t\tthis.$nextTick(() => this.$refs.popup.querySelector('.current').focus());\n\t\t},\n\n\t\tprevItem(e) {\n\t\t\tconst el = e.target.previousSibling;\n\t\t\tif ( el ) {\n\t\t\t\tthis.scroll(el);\n\t\t\t\tel.focus();\n\t\t\t}\n\t\t},\n\n\t\tnextItem(e) {\n\t\t\tconst el = e.target.nextSibling;\n\t\t\tif ( el ) {\n\t\t\t\tthis.scroll(el);\n\t\t\t\tel.focus();\n\t\t\t}\n\t\t},\n\n\t\tfirstItem() {\n\t\t\tconst el = this.$refs.popup.firstElementChild;\n\t\t\tif ( el ) {\n\t\t\t\tthis.scroll(el);\n\t\t\t\tel.focus();\n\t\t\t}\n\t\t},\n\n\t\tprevPage(e) {\n\t\t\tthis.select(indexOf.call(this.$refs.popup.children, e.target) - 5);\n\t\t},\n\n\t\tnextPage(e) {\n\t\t\tthis.select(indexOf.call(this.$refs.popup.children, e.target) + 5);\n\t\t},\n\n\t\tselect(idx) {\n\t\t\tconst kids = this.$refs.popup.children,\n\t\t\t\tel = kids[idx <= 0 ? 0 : Math.min(idx, kids.length - 1)];\n\n\t\t\tif ( el ) {\n\t\t\t\tthis.scroll(el);\n\t\t\t\tel.focus();\n\t\t\t}\n\t\t},\n\n\t\tlastItem() {\n\t\t\tconst el = this.$refs.popup.lastElementChild;\n\t\t\tif ( el ) {\n\t\t\t\tthis.scroll(el);\n\t\t\t\tel.focus();\n\t\t\t}\n\t\t},\n\n\t\tscroll(el) {\n\t\t\tconst scroller = this.$refs.popup.parentElement,\n\n\t\t\t\ttop = el.offsetTop,\n\t\t\t\tbottom = el.offsetHeight + top,\n\n\t\t\t\t// We need to use the margin-bottom because of the scrollbar library.\n\t\t\t\t// In fact, the scrollbar library is why any of this function exists.\n\t\t\t\tscroll_top = scroller.scrollTop,\n\t\t\t\tscroll_bottom = scroller.offsetHeight + parseInt(scroller.style.marginBottom || 0, 10) + scroll_top;\n\n\t\t\tif ( top < scroll_top )\n\t\t\t\tscroller.scrollBy(0, top - scroll_top);\n\n\t\t\telse if ( bottom > scroll_bottom )\n\t\t\t\tscroller.scrollBy(0, bottom - scroll_bottom);\n\t\t},\n\n\t\tchangeProfile(profile) {\n\t\t\tthis.context.currentProfile = profile;\n\n\t\t\ttry {\n\t\t\t\twindow.history.replaceState({\n\t\t\t\t\t...window.history.state,\n\t\t\t\t\tffzccp: profile.id\n\t\t\t\t}, document.title);\n\t\t\t} catch(err) {\n\t\t\t\t/* no-op */\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\n\t\t\tthis.focusHide();\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./profile-selector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./profile-selector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./profile-selector.vue?vue&type=template&id=202e190d&lang=html&\"\nimport script from \"./profile-selector.vue?vue&type=script&lang=js&\"\nexport * from \"./profile-selector.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--provider tw-pd-t-05\"},[(_vm.not_www)?_c('div',{staticClass:\"ffz--notice tw-c-background-accent tw-c-text-overlay tw-pd-1 tw-mg-b-1\"},[_c('h3',{staticClass:\"ffz-i-attention\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.provider.warn-domain.title', 'You\\'re far from home!'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',[_c('markdown',{attrs:{\"source\":_vm.t('setting.provider.warn-domain.desc', 'You are currently changing settings for a sub-domain of Twitch. Any changes here will only affect this sub-domain. You probably want to change this from Twitch\\'s main website, and not here.')}})],1)]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"ffz--notice tw-c-background-accent tw-c-text-overlay tw-pd-1 tw-mg-b-1\"},[_c('h3',{staticClass:\"ffz-i-attention\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.provider.warn.title', 'Be careful!'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',[_c('markdown',{attrs:{\"source\":_vm.t('setting.provider.warn.desc', 'Please close any other Twitch tabs before using this tool. It is **recommended to [create a backup](~data_management.backup_and_restore)** before changing your provider, in case anything happens.')}})],1)]),_vm._v(\" \"),_c('section',{staticClass:\"tw-pd-b-1 tw-mg-b-1 tw-border-b\"},[_c('markdown',{attrs:{\"source\":_vm.t('setting.provider.about', 'Here, you can change the storage provider used by FrankerFaceZ when browsing Twitch. You can try this if you\\'re having a problem with your settings not remaining persistent. Please note that you will need to reload any and all Twitch tabs after changing this.')}})],1),_vm._v(\" \"),_c('div',{staticClass:\"ffz-options\"},_vm._l((_vm.providers),function(val){return _c('div',{key:val.key,staticClass:\"tw-pd-b-1 ffz-radio ffz-radio-top\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selected),expression:\"selected\"}],staticClass:\"ffz-radio__input\",attrs:{\"id\":'ffz--provider-opt-' + val.key,\"name\":\"ffz--provider-opt\",\"type\":\"radio\"},domProps:{\"value\":val.key,\"checked\":_vm._q(_vm.selected,val.key)},on:{\"change\":function($event){_vm.selected=val.key}}}),_vm._v(\" \"),_c('label',{staticClass:\"tw-block ffz-radio__label\",attrs:{\"for\":'ffz--provider-opt-' + val.key}},[_c('div',{staticClass:\"tw-mg-l-1\"},[_c('div',[_c('span',{staticClass:\"tw-strong\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t(val.i18n_key, val.title))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),(val.key === _vm.current)?_c('span',{staticClass:\"tw-mg-l-1 tw-c-text-alt\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.provider.selected', '(Current)'))+\"\\n\\t\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(val.has_data)?_c('span',{staticClass:\"tw-mg-l-1 tw-c-text-alt\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.provider.has-data', '(Has Data)'))+\"\\n\\t\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(val.has_blobs)?_c('span',{staticClass:\"tw-mg-l-1 tw-c-text-alt\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.provider.has-blobs', '(Supports Binary Data)'))+\"\\n\\t\\t\\t\\t\\t\\t\")]):_vm._e()]),_vm._v(\" \"),(val.description)?_c('section',{staticClass:\"tw-c-text-alt-2\"},[_c('markdown',{attrs:{\"source\":_vm.t(val.desc_i18n_key, val.description)}})],1):_vm._e()])])])}),0),_vm._v(\" \"),_c('div',{staticClass:\"tw-border-t tw-pd-t-1\"},[(_vm.canTransfer)?_c('div',{staticClass:\"tw-flex tw-align-items-center ffz-checkbox\"},[_c('input',{ref:\"transfer\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"transfer\",\"checked\":\"\",\"type\":\"checkbox\"}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"transfer\"}},[_c('div',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.provider.transfer', 'Transfer my settings when switching provider.'))+\"\\n\\t\\t\\t\\t\")])])]):_vm._e(),_vm._v(\" \"),(_vm.canTransfer)?_c('section',{staticClass:\"tw-c-text-alt-2 tw-pd-b-05\",staticStyle:{\"padding-left\":\"2.5rem\"}},[_c('markdown',{attrs:{\"source\":_vm.t('setting.provider.transfer.desc', '**Note:** It is recommended to leave this enabled unless you know what you\\'re doing.')}})],1):_c('div',{staticClass:\"tw-flex tw-align-items-center\",staticStyle:{\"padding-left\":\"2.5rem\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.provider.no-transfer', 'Automatically transfering settings from your current provider to the selected provider is not allowed. Please use Backup and Restore.'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-t-1 tw-flex tw-align-items-center ffz-checkbox\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.backup),expression:\"backup\"}],ref:\"backup\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":\"backup\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.backup)?_vm._i(_vm.backup,null)>-1:(_vm.backup)},on:{\"change\":function($event){var $$a=_vm.backup,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.backup=$$a.concat([$$v]))}else{$$i>-1&&(_vm.backup=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.backup=$$c}}}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":\"backup\"}},[_c('div',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.provider.backup', 'Yes, I made a backup.'))+\"\\n\\t\\t\\t\\t\")])])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-t-1 tw-border-t tw-pd-t-1\"},[_c('button',{staticClass:\"tw-button tw-mg-l-3\",class:{'tw-button--disabled': ! _vm.enabled},on:{\"click\":_vm.change}},[_vm._m(0),_vm._v(\" \"),_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.provider.start', 'Change Providers'))+\"\\n\\t\\t\\t\")])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"tw-button__icon tw-button__icon--left\"},[_c('figure',{staticClass:\"ffz-i-floppy\"})])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./provider.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./provider.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\tconst ffz = this.context.getFFZ(),\n\t\t\tsettings = ffz.resolve('settings'),\n\t\t\tproviders = [],\n\t\t\ttransfers = {};\n\n\t\tfor(const [key, val] of Object.entries(settings.getProviders())) {\n\t\t\tconst prov = {\n\t\t\t\tkey,\n\t\t\t\tpriority: val.priority || 0,\n\t\t\t\thas_data: null,\n\t\t\t\thas_blobs: val.supportsBlobs,\n\t\t\t\thas_trans: val.allowTransfer,\n\t\t\t\ti18n_key: `setting.provider.${key}.title`,\n\t\t\t\ttitle: val.title || key,\n\t\t\t\tdesc_i18n_key: val.description ? `setting.provider.${key}.desc` : null,\n\t\t\t\tdescription: val.description\n\t\t\t};\n\n\t\t\ttransfers[key] = val.allowTransfer;\n\n\t\t\tif ( val.supported() )\n\t\t\t\tPromise.resolve(val.hasContent()).then(v => {\n\t\t\t\t\tprov.has_data = v;\n\t\t\t\t});\n\n\t\t\tproviders.push(prov);\n\t\t}\n\n\t\tproviders.sort((a,b) => b.priority - a.priority);\n\n\t\tconst current = settings.getActiveProvider();\n\n\t\treturn {\n\t\t\tbackup: false,\n\t\t\tnot_www: window.location.host !== 'www.twitch.tv',\n\t\t\tproviders,\n\t\t\ttransfers,\n\t\t\tcurrent,\n\t\t\tselected: current\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tenabled() {\n\t\t\treturn this.selected !== this.current && this.backup\n\t\t},\n\n\t\tcanTransfer() {\n\t\t\treturn this.transfers[this.selected] && this.transfers[this.current]\n\t\t}\n\t},\n\n\tmethods: {\n\t\tchange() {\n\t\t\tif ( ! this.enabled )\n\t\t\t\treturn;\n\n\t\t\tconst ffz = this.context.getFFZ(),\n\t\t\t\tsettings = ffz.resolve('settings');\n\n\t\t\tsettings.changeProvider(this.selected, this.$refs.transfer.checked);\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./provider.vue?vue&type=template&id=974a668c&lang=html&\"\nimport script from \"./provider.vue?vue&type=script&lang=js&\"\nexport * from \"./provider.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--reason\"},[_c('div',{staticClass:\"tw-align-items-center tw-flex tw-flex-nowrap tw-flex-row tw-full-width\"},[_c('div',{staticClass:\"tw-flex-grow-1 tw-mg-r-05\"},[(! _vm.editing)?_c('h4',{staticClass:\"ffz-monospace\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.title)+\"\\n\\t\\t\\t\")]):_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.text),expression:\"edit_data.text\"}],staticClass:\"tw-block tw-full-width tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05\",attrs:{\"placeholder\":_vm.adding ? _vm.t('setting.reasons.add-placeholder', 'Add a new reason') : _vm.edit_data.text,\"type\":\"text\",\"autocapitalize\":\"off\",\"autocorrect\":\"off\"},domProps:{\"value\":(_vm.edit_data.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.edit_data, \"text\", $event.target.value)}}})]),_vm._v(\" \"),(_vm.adding)?_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button\",on:{\"click\":_vm.save}},[_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.add', 'Add'))+\"\\n\\t\\t\\t\\t\")])])]):(_vm.editing)?_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.save}},[_c('span',{staticClass:\"tw-button__text ffz-i-floppy\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.save', 'Save'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.cancel}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.cancel', 'Cancel'))+\"\\n\\t\\t\\t\\t\")])])]):(_vm.deleting)?_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){return _vm.$emit('remove', _vm.reason)}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){_vm.deleting = false}}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.cancel', 'Cancel'))+\"\\n\\t\\t\\t\\t\")])])]):_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.edit}},[_c('span',{staticClass:\"tw-button__text ffz-i-cog\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.edit', 'Edit'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){_vm.deleting = true}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\\t\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {deep_copy} from 'utilities/object';\n\nlet id = 0;\n\nexport default {\n\tprops: {\n\t\treason: Object,\n\t\tadding: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\n\tdata() {\n\t\tif ( this.adding )\n\t\t\treturn {\n\t\t\t\teditor_id: id++,\n\t\t\t\tdeleting: false,\n\t\t\t\tediting: true,\n\t\t\t\tedit_data: deep_copy(this.reason)\n\t\t\t}\n\n\t\treturn {\n\t\t\teditor_id: id++,\n\t\t\tdeleting: false,\n\t\t\tediting: false,\n\t\t\tedit_data: null\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tdisplay() {\n\t\t\treturn this.editing ? this.edit_data : this.reason;\n\t\t},\n\n\t\ttitle() {\n\t\t\tif ( typeof this.display.i18n === 'string' )\n\t\t\t\treturn this.t(this.display.i18n, this.display.text);\n\n\t\t\treturn this.display.text;\n\t\t}\n\t},\n\n\tmethods: {\n\t\tedit() {\n\t\t\tthis.editing = true;\n\t\t\tthis.edit_data = deep_copy(this.reason);\n\t\t},\n\n\t\ttoggleRemove() {\n\t\t\tif ( this.editing )\n\t\t\t\tthis.edit_data.remove = ! this.edit_data.remove;\n\t\t},\n\n\t\tcancel() {\n\t\t\tif ( this.adding ) {\n\t\t\t\tthis.edit_data = deep_copy(this.reason);\n\n\t\t\t} else {\n\t\t\t\tthis.editing = false;\n\t\t\t\tthis.edit_data = null;\n\t\t\t}\n\t\t},\n\n\t\tsave() {\n\t\t\tthis.$emit('save', this.edit_data);\n\t\t\tthis.cancel();\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./reason-editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./reason-editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./reason-editor.vue?vue&type=template&id=3aecc679&lang=html&\"\nimport script from \"./reason-editor.vue?vue&type=script&lang=js&\"\nexport * from \"./reason-editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.feed)?_c('div',_vm._l((_vm.feed),function(entry,idx){return _c('chat-rich',{key:idx,staticClass:\"tw-mg-b-1\",attrs:{\"data\":entry}})}),1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./rich-feed.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./rich-feed.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport { maybe_call } from 'utilities/object';\n\nexport default {\n\tcomponents: {\n\t\t'chat-rich': async () => {\n\t\t\tconst stuff = await import(/* webpackChunkName: \"chat\" */ 'src/modules/chat/components');\n\t\t\treturn stuff.default('./chat-rich.vue').default;\n\t\t}\n\t},\n\n\tprops: ['context', 'url'],\n\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t\terror: null,\n\t\t\tfeed: null\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.loadFromURL();\n\t},\n\n\tmethods: {\n\t\tasync loadFromURL() {\n\t\t\tif ( this.loading )\n\t\t\t\treturn;\n\n\t\t\tthis.loading = true;\n\t\t\tthis.error = null;\n\t\t\tthis.feed = null;\n\n\t\t\tconst chat = this.context.getFFZ().resolve('chat'),\n\t\t\t\turl = this.url;\n\n\t\t\tif ( ! url ) {\n\t\t\t\tthis.loading = false;\n\t\t\t\tthis.error = null;\n\t\t\t\tthis.feed = [];\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet data;\n\t\t\ttry {\n\t\t\t\tdata = await chat.get_link_info(url, false, false);\n\t\t\t} catch(err) {\n\t\t\t\tthis.loading = false;\n\t\t\t\tthis.error = err;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! data?.v ) {\n\t\t\t\tthis.error = 'Invalid response.';\n\t\t\t\tthis.loading = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! data.feed )\n\t\t\t\tdata = {feed: [data]};\n\n\t\t\tthis.feed = data.feed.map(entry => {\n\t\t\t\tentry.allow_media = true;\n\t\t\t\tentry.allow_unsafe = false;\n\n\t\t\t\treturn {\n\t\t\t\t\tgetData: () => entry\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.loading = false;\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./rich-feed.vue?vue&type=template&id=499c12b5&\"\nimport script from \"./rich-feed.vue?vue&type=script&lang=js&\"\nexport * from \"./rich-feed.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--widget ffz--checkbox\",class:{inherits: _vm.isInherited, default: _vm.isDefault}},[_c('div',{staticClass:\"tw-flex tw-align-items-center ffz-checkbox\"},[_c('input',{ref:\"control\",staticClass:\"ffz-checkbox__input\",attrs:{\"id\":_vm.item.full_key,\"disabled\":_vm.isReadOnly,\"type\":\"checkbox\"},domProps:{\"checked\":_vm.value},on:{\"change\":_vm.onChange}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":_vm.item.full_key}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.item.i18n_key ? _vm.t(_vm.item.i18n_key, _vm.item.title) : _vm.item.title)+\"\\n\\t\\t\\t\\t\"),(_vm.unseen)?_c('span',{staticClass:\"ffz-pill ffz-pill--success\"},[_vm._v(_vm._s(_vm.t('setting.new', 'New')))]):_vm._e()])]),_vm._v(\" \"),(_vm.item.buttons)?_c(_vm.item.buttons,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":_vm.item,\"value\":_vm.value}}):_vm._e(),_vm._v(\" \"),(_vm.source && _vm.source !== _vm.profile)?_c('button',{staticClass:\"tw-mg-l-05 tw-button tw-button--text\",on:{\"click\":function($event){_vm.context.currentProfile = _vm.source}}},[_c('span',{staticClass:\"tw-button__text ffz-i-right-dir\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.sourceDisplay)+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"ffz--reset-button\"},[(_vm.has_value)?_c('button',{staticClass:\"tw-mg-l-05 tw-button tw-button--text ffz-il-tooltip__container\",class:{'tw-button--disabled': _vm.isReadOnly},attrs:{\"disabled\":_vm.isReadOnly},on:{\"click\":_vm.clear}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.reset', 'Reset to Default'))+\"\\n\\t\\t\\t\\t\")])]):_vm._e()])],1),_vm._v(\" \"),(_vm.item.description)?_c('section',{staticClass:\"tw-c-text-alt-2\",staticStyle:{\"padding-left\":\"2.5rem\"}},[_c('markdown',{attrs:{\"source\":_vm.t(_vm.item.desc_i18n_key || ((_vm.item.i18n_key) + \".description\"), _vm.item.description)}})],1):_vm._e(),_vm._v(\" \"),(_vm.item.extra)?_c('section',{staticStyle:{\"padding-left\":\"2.5rem\"}},[_c(_vm.item.extra.component,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":_vm.item}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-check-box.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-check-box.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport SettingMixin from '../setting-mixin';\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context'],\n\n\twatch: {\n\t\tvalue() {\n\t\t\tif ( this.$refs.control )\n\t\t\t\tthis.$refs.control.indeterminate = this.value == null;\n\t\t}\n\t},\n\n\tmounted() {\n\t\tif ( this.$refs.control )\n\t\t\tthis.$refs.control.indeterminate = this.value == null;\n\t},\n\n\tmethods: {\n\t\tonChange() {\n\t\t\tthis.set(this.$refs.control.checked);\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./setting-check-box.vue?vue&type=template&id=be747e90&lang=html&\"\nimport script from \"./setting-check-box.vue?vue&type=script&lang=js&\"\nexport * from \"./setting-check-box.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--widget ffz--color-box\",class:{inherits: _vm.isInherited, default: _vm.isDefault}},[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":_vm.item.full_key}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.item.i18n_key ? _vm.t(_vm.item.i18n_key, _vm.item.title) : _vm.item.title)+\"\\n\\t\\t\\t\"),(_vm.unseen)?_c('span',{staticClass:\"ffz-pill ffz-pill--success\"},[_vm._v(_vm._s(_vm.t('setting.new', 'New')))]):_vm._e()]),_vm._v(\" \"),_c('color-picker',{ref:\"control\",staticClass:\"tw-mg-05\",attrs:{\"id\":_vm.item.full_key,\"disabled\":_vm.isReadOnly,\"alpha\":_vm.alpha,\"open-up\":_vm.openUp,\"nullable\":true,\"value\":_vm.color},on:{\"input\":_vm.onInput}}),_vm._v(\" \"),(_vm.item.buttons)?_c(_vm.item.buttons,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":_vm.item,\"value\":_vm.value}}):_vm._e(),_vm._v(\" \"),(_vm.source && _vm.source !== _vm.profile)?_c('button',{staticClass:\"tw-mg-l-05 tw-button tw-button--text\",on:{\"click\":function($event){_vm.context.currentProfile = _vm.source}}},[_c('span',{staticClass:\"tw-button__text ffz-i-right-dir\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.sourceDisplay)+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.has_value)?_c('button',{staticClass:\"tw-mg-l-05 tw-button tw-button--text ffz-il-tooltip__container\",class:{'tw-button--disabled': _vm.isReadOnly},attrs:{\"disabled\":_vm.isReadOnly},on:{\"click\":_vm.clear}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.reset', 'Reset to Default'))+\"\\n\\t\\t\\t\")])]):_vm._e()],1),_vm._v(\" \"),(_vm.item.description)?_c('section',{staticClass:\"tw-c-text-alt-2\"},[_c('markdown',{attrs:{\"source\":_vm.t(_vm.item.desc_i18n_key || ((_vm.item.i18n_key) + \".description\"), _vm.item.description)}})],1):_vm._e(),_vm._v(\" \"),(_vm.item.extra)?_c('section',[_c(_vm.item.extra.component,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":_vm.item}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-color-box.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-color-box.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {debounce} from 'utilities/object';\n\nimport SettingMixin from '../setting-mixin';\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context'],\n\n\tcomputed: {\n\t\tcolor() {\n\t\t\tif ( ! this.value )\n\t\t\t\treturn '';\n\n\t\t\treturn this.value;\n\t\t},\n\n\t\topenUp() {\n\t\t\tif ( this.item.openUp != null )\n\t\t\t\treturn this.item.openUp;\n\n\t\t\treturn false;\n\t\t},\n\n\t\talpha() {\n\t\t\tif ( this.item.alpha != null )\n\t\t\t\treturn this.item.alpha;\n\n\t\t\treturn true;\n\t\t}\n\t},\n\n\tcreated() {\n\t\t// Don't do this too often. It can happen if\n\t\t// people are dragging sliders in the pop-up.\n\t\tthis.onInput = debounce(this.onInput, 100);\n\t},\n\n\tmethods: {\n\t\tonInput(value) {\n\t\t\tthis.set(value || '');\n\t\t}\n\t}\n}\n","import { render, staticRenderFns } from \"./setting-color-box.vue?vue&type=template&id=3f59be10&lang=html&\"\nimport script from \"./setting-color-box.vue?vue&type=script&lang=js&\"\nexport * from \"./setting-color-box.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--widget ffz--select-box\",class:{inherits: _vm.isInherited, default: _vm.isDefault}},[_c('div',{staticClass:\"tw-flex tw-align-items-start\"},[_c('label',{staticClass:\"tw-mg-y-05\",attrs:{\"for\":_vm.item.full_key}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.item.i18n_key ? _vm.t(_vm.item.i18n_key, _vm.item.title) : _vm.item.title)+\"\\n\\t\\t\\t\"),(_vm.unseen)?_c('span',{staticClass:\"ffz-pill ffz-pill--success\"},[_vm._v(_vm._s(_vm.t('setting.new', 'New')))]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-flex-column tw-mg-05\"},[_c('select',{ref:\"control\",staticClass:\"tw-border-top-left-radius-medium tw-border-top-right-radius-medium tw-font-size-6 ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05\",attrs:{\"id\":_vm.item.full_key,\"disabled\":_vm.isReadOnly},on:{\"change\":_vm.onChange}},[_vm._l((_vm.nested_data),function(i){return [(i.entries)?_c('optgroup',{key:i.key,attrs:{\"disabled\":i.disabled,\"label\":i.i18n_key ? _vm.t(i.i18n_key, i.title, i) : i.title}},_vm._l((i.entries),function(j){return _c('option',{key:j.value,domProps:{\"selected\":j.value === _vm.value,\"value\":j.v}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(j.i18n_key ? _vm.t(j.i18n_key, j.title, j) : j.title)+\"\\n\\t\\t\\t\\t\\t\\t\")])}),0):_c('option',{key:i.value,domProps:{\"selected\":i.value === _vm.value,\"value\":i.v}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(i.i18n_key ? _vm.t(i.i18n_key, i.title, i) : i.title)+\"\\n\\t\\t\\t\\t\\t\")])]}),_vm._v(\" \"),_c('option',{domProps:{\"selected\":_vm.isCustom}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.combo-box.custom', 'Custom'))+\"\\n\\t\\t\\t\\t\")])],2),_vm._v(\" \"),_c('input',{ref:\"text\",staticClass:\"ffz-mg-t-1p tw-border-bottom-left-radius-medium tw-border-bottom-right-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-input\",attrs:{\"disabled\":_vm.isReadOnly || ! _vm.isCustom},domProps:{\"value\":_vm.value},on:{\"change\":_vm.onTextChange}})]),_vm._v(\" \"),(_vm.item.buttons)?_c(_vm.item.buttons,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":_vm.item,\"value\":_vm.value}}):_vm._e(),_vm._v(\" \"),(_vm.source && _vm.source !== _vm.profile)?_c('button',{staticClass:\"tw-mg-l-05 tw-mg-y-05 tw-button tw-button--text\",on:{\"click\":function($event){_vm.context.currentProfile = _vm.source}}},[_c('span',{staticClass:\"tw-button__text ffz-i-right-dir\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.sourceDisplay)+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.has_value)?_c('button',{staticClass:\"tw-mg-l-05 tw-mg-y-05 tw-button tw-button--text ffz-il-tooltip__container\",class:{'tw-button--disabled': _vm.isReadOnly},attrs:{\"disabled\":_vm.isReadOnly},on:{\"click\":_vm.clear}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.reset', 'Reset to Default'))+\"\\n\\t\\t\\t\")])]):_vm._e()],1),_vm._v(\" \"),(_vm.item.extra && _vm.item.extra.component && _vm.item.extra.before)?_c('section',[_c(_vm.item.extra.component,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":_vm.item,\"value\":_vm.value}})],1):_vm._e(),_vm._v(\" \"),(_vm.item.description)?_c('section',{staticClass:\"tw-c-text-alt-2\"},[_c('markdown',{attrs:{\"source\":_vm.t(_vm.item.desc_i18n_key || ((_vm.item.i18n_key) + \".description\"), _vm.item.description)}})],1):_vm._e(),_vm._v(\" \"),(_vm.item.extra && _vm.item.extra.component && ! _vm.item.extra.before)?_c('section',[_c(_vm.item.extra.component,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":_vm.item,\"value\":_vm.value}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-combo-box.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-combo-box.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport SettingMixin from '../setting-mixin';\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tisCustom: false\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tnested_data() {\n\t\t\tconst out = [];\n\t\t\tlet current_group = null;\n\t\t\tlet i = 0;\n\n\t\t\tfor(const entry of this.data) {\n\t\t\t\tif ( entry.separator ) {\n\t\t\t\t\tcurrent_group = {\n\t\t\t\t\t\tkey: entry.key ?? i,\n\t\t\t\t\t\tentries: [],\n\t\t\t\t\t\ti18n_key: entry.i18n_key,\n\t\t\t\t\t\ttitle: entry.title,\n\t\t\t\t\t\tdisabled: entry.disabled\n\t\t\t\t\t};\n\n\t\t\t\t\tout.push(current_group);\n\n\t\t\t\t} else if ( current_group != null )\n\t\t\t\t\tcurrent_group.entries.push(Object.assign({v: i}, entry));\n\t\t\t\telse\n\t\t\t\t\tout.push(Object.assign({v: i}, entry));\n\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\treturn out;\n\t\t}\n\t},\n\n\twatch: {\n\t\tvalue(val) {\n\t\t\tfor(const item of this.data)\n\t\t\t\tif ( item.value === val )\n\t\t\t\t\treturn;\n\n\t\t\tthis.isCustom = true;\n\t\t},\n\n\t\thas_value() {\n\t\t\tif ( ! this.has_value )\n\t\t\t\tthis.isCustom = false;\n\t\t}\n\t},\n\n\tmethods: {\n\t\tonChange() {\n\t\t\tconst idx = this.$refs.control.value,\n\t\t\t\traw_value = this.data[idx];\n\n\t\t\tif ( raw_value ) {\n\t\t\t\tthis.set(raw_value.value);\n\t\t\t\tthis.isCustom = false;\n\t\t\t} else\n\t\t\t\tthis.isCustom = true;\n\t\t},\n\n\t\tonTextChange() {\n\t\t\tconst value = this.$refs.text.value;\n\t\t\tif ( value != null )\n\t\t\t\tthis.set(value);\n\t\t}\n\t}\n}\n","import { render, staticRenderFns } from \"./setting-combo-box.vue?vue&type=template&id=0888362c&lang=html&\"\nimport script from \"./setting-combo-box.vue?vue&type=script&lang=js&\"\nexport * from \"./setting-combo-box.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--widget ffz--filter-editor tw-border-t tw-pd-y-1\"},[(_vm.source && _vm.source !== _vm.profile)?_c('div',{staticClass:\"tw-c-background-accent tw-c-text-overlay tw-pd-1 tw-mg-b-1\"},[_c('span',{staticClass:\"ffz-i-info\"}),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.warn-inheritence', 'These values are being overridden by another profile and may not take effect.'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center tw-pd-b-05\"},[_c('div',{staticClass:\"tw-flex-grow-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('setting.filter.drag', 'Drag entries to re-order them.'))+\"\\n\\t\\t\")]),_vm._v(\" \"),(! _vm.maybe_clear && _vm.rules.length)?_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){_vm.maybe_clear = true}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete-all', 'Delete All'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filter.delete-all', \"Delete all of this profile's entries.\"))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.maybe_clear)?_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.doClear}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete-all', 'Delete All'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filter.delete-all', \"Delete all of this profile's entries.\"))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.maybe_clear)?_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){_vm.maybe_clear = false}}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.cancel', 'Cancel'))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(! _vm.rules.length && _vm.has_default)?_c('button',{staticClass:\"tw-mg-l-1 tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.populate}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filter.add-default', 'Add Defaults'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('span',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filter.add-default-tip', 'Add all of the default values to this profile.'))+\"\\n\\t\\t\\t\")])]):_vm._e()]),_vm._v(\" \"),_c('filter-editor',{attrs:{\"value\":_vm.rules,\"filters\":_vm.filters,\"context\":_vm.test_context,\"preview\":_vm.preview},on:{\"input\":_vm.onInput}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-filter-editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-filter-editor.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {deep_copy} from 'utilities/object';\n\nimport SettingMixin from '../setting-mixin';\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tfilters: this.item.data(),\n\t\t\tmaybe_clear: false,\n\t\t\ttest_context: this.item.test_context ? this.item.test_context() : {},\n\t\t};\n\t},\n\n\tcomputed: {\n\t\thas_default() {\n\t\t\treturn this.default_value && this.default_value.length\n\t\t},\n\n\t\tpreview() {\n\t\t\treturn this.item.preview || false\n\t\t},\n\n\t\trules() {\n\t\t\tif ( ! this.has_value || ! Array.isArray(this.value) )\n\t\t\t\treturn [];\n\n\t\t\treturn this.value.filter(x => x?.v).map(x => x.v);\n\t\t}\n\t},\n\n\tmethods: {\n\t\tdoClear() {\n\t\t\tthis.maybe_clear = false;\n\t\t\tthis.clear();\n\t\t},\n\n\t\tpopulate() {\n\t\t\tthis.set(deep_copy(this.default_value));\n\t\t},\n\n\t\tonInput(data) {\n\t\t\tconst val = deep_copy(data).map(x => ({v: x}));\n\t\t\tif (val.length == 0)\n\t\t\t\tval.push({t: 'skip'});\n\t\t\tthis.set(val);\n\t\t}\n\t}\n\n}\n\n","import { render, staticRenderFns } from \"./setting-filter-editor.vue?vue&type=template&id=7b2518d1&lang=html&\"\nimport script from \"./setting-filter-editor.vue?vue&type=script&lang=js&\"\nexport * from \"./setting-filter-editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--widget ffz--hotkey-input\",class:{inherits: _vm.isInherited, default: _vm.isDefault}},[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":_vm.item.full_key}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.item.i18n_key ? _vm.t(_vm.item.i18n_key, _vm.item.title) : _vm.item.title)+\"\\n\\t\\t\\t\"),(_vm.unseen)?_c('span',{staticClass:\"ffz-pill ffz-pill--success\"},[_vm._v(_vm._s(_vm.t('setting.new', 'New')))]):_vm._e()]),_vm._v(\" \"),_c('key-picker',{ref:\"control\",staticClass:\"tw-mg-05\",attrs:{\"id\":_vm.item.full_key,\"disabled\":_vm.isReadOnly,\"value\":_vm.value},on:{\"input\":_vm.onInput}}),_vm._v(\" \"),(_vm.item.buttons)?_c(_vm.item.buttons,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":_vm.item,\"value\":_vm.value}}):_vm._e(),_vm._v(\" \"),(_vm.source && _vm.source !== _vm.profile)?_c('button',{staticClass:\"tw-mg-l-05 tw-button tw-button--text\",on:{\"click\":function($event){_vm.context.currentProfile = _vm.source}}},[_c('span',{staticClass:\"tw-button__text ffz-i-right-dir\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.sourceDisplay)+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.has_value)?_c('button',{staticClass:\"tw-mg-l-05 tw-button tw-button--text ffz-il-tooltip__container\",class:{'tw-button--disabled': _vm.isReadOnly},attrs:{\"disabled\":_vm.isReadOnly},on:{\"click\":_vm.clear}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.reset', 'Reset to Default'))+\"\\n\\t\\t\\t\")])]):_vm._e()],1),_vm._v(\" \"),(_vm.item.description)?_c('section',{staticClass:\"tw-c-text-alt-2\"},[_c('markdown',{attrs:{\"source\":_vm.t(_vm.item.desc_i18n_key || ((_vm.item.i18n_key) + \".description\"), _vm.item.description)}})],1):_vm._e(),_vm._v(\" \"),(_vm.item.extra)?_c('section',[_c(_vm.item.extra.component,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":_vm.item}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-hotkey.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-hotkey.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport SettingMixin from '../setting-mixin';\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context'],\n\n\tmethods: {\n\t\tonInput(value) {\n\t\t\tthis.set(value);\n\t\t}\n\t}\n}\n\n","import { render, staticRenderFns } from \"./setting-hotkey.vue?vue&type=template&id=3bdc8785&lang=html&\"\nimport script from \"./setting-hotkey.vue?vue&type=script&lang=js&\"\nexport * from \"./setting-hotkey.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz-input\"},[_c('header',[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.item.i18n_key ? _vm.t(_vm.item.i18n_key, _vm.item.title) : _vm.item.title)+\"\\n\\t\\t\"),(_vm.unseen)?_c('span',{staticClass:\"ffz-pill\"},[_vm._v(_vm._s(_vm.t('setting.new', 'New')))]):_vm._e()]),_vm._v(\" \"),(_vm.item.description)?_c('section',{staticClass:\"tw-c-text-alt-2\"},[_c('markdown',{attrs:{\"source\":_vm.t(_vm.item.desc_i18n_key || ((_vm.item.i18n_key) + \".description\"), _vm.item.description)}})],1):_vm._e(),_vm._v(\" \"),(_vm.item.extra)?_c('section',[_c(_vm.item.extra.component,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":_vm.item}})],1):_vm._e(),_vm._v(\" \"),_vm._l((_vm.data),function(i,idx){return _c('div',{key:idx,staticClass:\"tw-mg-l-1\"},[_c('input',{staticClass:\"ffz-radio__input\",attrs:{\"id\":_vm.item.full_key + idx,\"name\":_vm.item.full_key,\"type\":\"radio\"},domProps:{\"value\":i.value}}),_vm._v(\" \"),_c('label',{staticClass:\"tw-pd-y-05 ffz-radio__label\",attrs:{\"for\":_vm.item.full_key + idx}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t(i.i18n_key, i.title, i))+\"\\n\\t\\t\")])])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-radio-buttons.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-radio-buttons.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport SettingMixin from '../setting-mixin';\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context']\n}\n","import { render, staticRenderFns } from \"./setting-radio-buttons.vue?vue&type=template&id=40ab24ab&lang=html&\"\nimport script from \"./setting-radio-buttons.vue?vue&type=script&lang=js&\"\nexport * from \"./setting-radio-buttons.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--widget ffz--select-box\",class:{inherits: _vm.isInherited, default: _vm.isDefault}},[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{staticClass:\"tw-mg-y-05\",attrs:{\"for\":_vm.item.full_key}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.item.i18n_key ? _vm.t(_vm.item.i18n_key, _vm.item.title) : _vm.item.title)+\"\\n\\t\\t\\t\"),(_vm.unseen)?_c('span',{staticClass:\"ffz-pill ffz-pill--success\"},[_vm._v(_vm._s(_vm.t('setting.new', 'New')))]):_vm._e()]),_vm._v(\" \"),_c('select',{ref:\"control\",staticClass:\"tw-border-radius-medium tw-font-size-6 ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 tw-mg-05\",attrs:{\"id\":_vm.item.full_key,\"disabled\":_vm.isReadOnly,\"multiple\":_vm.item.multiple || false,\"size\":_vm.item.size || 0},on:{\"change\":_vm.onChange}},[_vm._l((_vm.nested_data),function(i){return [(i.entries)?_c('optgroup',{key:i.key,attrs:{\"disabled\":i.disabled,\"label\":i.i18n_key ? _vm.t(i.i18n_key, i.title, i) : i.title}},_vm._l((i.entries),function(j){return _c('option',{key:j.value,domProps:{\"selected\":_vm.item.multiple ? (Array.isArray(_vm.value) && _vm.value.includes(j.value)) : j.value === _vm.value,\"value\":j.v}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(j.i18n_key ? _vm.t(j.i18n_key, j.title, j) : j.title)+\"\\n\\t\\t\\t\\t\\t\")])}),0):_c('option',{key:i.value,domProps:{\"selected\":_vm.item.multiple ? (Array.isArray(_vm.value) && _vm.value.includes(i.value)) : i.value === _vm.value,\"value\":i.v}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(i.i18n_key ? _vm.t(i.i18n_key, i.title, i) : i.title)+\"\\n\\t\\t\\t\\t\")])]})],2),_vm._v(\" \"),(_vm.item.buttons)?_c(_vm.item.buttons,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":_vm.item,\"value\":_vm.value}}):_vm._e(),_vm._v(\" \"),(_vm.source && _vm.source !== _vm.profile)?_c('button',{staticClass:\"tw-mg-l-05 tw-button tw-button--text\",on:{\"click\":function($event){_vm.context.currentProfile = _vm.source}}},[_c('span',{staticClass:\"tw-button__text ffz-i-right-dir\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.sourceDisplay)+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.has_value)?_c('button',{staticClass:\"tw-mg-l-05 tw-button tw-button--text ffz-il-tooltip__container\",class:{'tw-button--disabled': _vm.isReadOnly},attrs:{\"disabled\":_vm.isReadOnly},on:{\"click\":_vm.clear}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.reset', 'Reset to Default'))+\"\\n\\t\\t\\t\")])]):_vm._e()],1),_vm._v(\" \"),(_vm.item.description)?_c('section',{staticClass:\"tw-c-text-alt-2\"},[_c('markdown',{attrs:{\"source\":_vm.t(_vm.item.desc_i18n_key || ((_vm.item.i18n_key) + \".description\"), _vm.item.description)}})],1):_vm._e(),_vm._v(\" \"),(_vm.item.extra)?_c('section',[_c(_vm.item.extra.component,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":_vm.item}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-select-box.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-select-box.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport SettingMixin from '../setting-mixin';\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context'],\n\n\tcomputed: {\n\t\tnested_data() {\n\t\t\tconst out = [];\n\t\t\tlet current_group = null;\n\t\t\tlet i = 0;\n\n\t\t\tfor(const entry of this.data) {\n\t\t\t\tif ( entry.separator ) {\n\t\t\t\t\tcurrent_group = {\n\t\t\t\t\t\tkey: entry.key ?? i,\n\t\t\t\t\t\tentries: [],\n\t\t\t\t\t\ti18n_key: entry.i18n_key,\n\t\t\t\t\t\ttitle: entry.title,\n\t\t\t\t\t\tdisabled: entry.disabled\n\t\t\t\t\t};\n\n\t\t\t\t\tout.push(current_group);\n\n\t\t\t\t} else if ( current_group != null )\n\t\t\t\t\tcurrent_group.entries.push(Object.assign({v: i}, entry));\n\t\t\t\telse\n\t\t\t\t\tout.push(Object.assign({v: i}, entry));\n\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\treturn out;\n\t\t}\n\t},\n\n\tmethods: {\n\t\tonChange() {\n\t\t\tif ( this.item.multiple ) {\n\t\t\t\tconst items = this.$refs.control.selectedOptions,\n\t\t\t\t\tout = [];\n\n\t\t\t\tfor(let i=0; i < items.length; i++) {\n\t\t\t\t\tconst raw = this.data[items[i].index];\n\t\t\t\t\tif ( raw )\n\t\t\t\t\t\tout.push(raw.value);\n\t\t\t\t}\n\n\t\t\t\tthis.set(out)\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst idx = this.$refs.control.value,\n\t\t\t\traw_value = this.data[idx];\n\n\t\t\tif ( raw_value )\n\t\t\t\tthis.set(raw_value.value);\n\t\t}\n\t}\n}\n","import { render, staticRenderFns } from \"./setting-select-box.vue?vue&type=template&id=65106adb&lang=html&\"\nimport script from \"./setting-select-box.vue?vue&type=script&lang=js&\"\nexport * from \"./setting-select-box.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function (_h,_vm) {var _c=_vm._c;return _c('div',{style:({marginTop: _vm.props.item.top})})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./setting-spacer.vue?vue&type=template&id=25e3a866&functional=true&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  true,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--widget ffz--text-box\",class:{inherits: _vm.isInherited, default: _vm.isDefault}},[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":_vm.item.full_key}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.item.i18n_key ? _vm.t(_vm.item.i18n_key, _vm.item.title) : _vm.item.title)+\"\\n\\t\\t\\t\"),(_vm.unseen)?_c('span',{staticClass:\"ffz-pill ffz-pill--success\"},[_vm._v(_vm._s(_vm.t('setting.new', 'New')))]):_vm._e()]),_vm._v(\" \"),_c('input',{ref:\"control\",staticClass:\"tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 tw-mg-05 ffz-input\",class:{'ffz-input--error': ! _vm.isValid},attrs:{\"id\":_vm.item.full_key,\"type\":_vm.type,\"placeholder\":_vm.placeholder,\"disabled\":_vm.isReadOnly},domProps:{\"value\":_vm.value},on:{\"change\":_vm.onChange}}),_vm._v(\" \"),(_vm.item.buttons)?_c(_vm.item.buttons,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":_vm.item,\"value\":_vm.value}}):_vm._e(),_vm._v(\" \"),(_vm.source && _vm.source !== _vm.profile)?_c('button',{staticClass:\"tw-mg-l-05 tw-button tw-button--text\",on:{\"click\":function($event){_vm.context.currentProfile = _vm.source}}},[_c('span',{staticClass:\"tw-button__text ffz-i-right-dir\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.sourceDisplay)+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.has_value)?_c('button',{staticClass:\"tw-mg-l-05 tw-button tw-button--text ffz-il-tooltip__container\",class:{'tw-button--disabled': _vm.isReadOnly},attrs:{\"disabled\":_vm.isReadOnly},on:{\"click\":_vm.clear}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.reset', 'Reset to Default'))+\"\\n\\t\\t\\t\")])]):_vm._e()],1),_vm._v(\" \"),(_vm.item.description)?_c('section',{staticClass:\"tw-c-text-alt-2\"},[_c('markdown',{attrs:{\"source\":_vm.t(_vm.item.desc_i18n_key || ((_vm.item.i18n_key) + \".description\"), _vm.item.description)}})],1):_vm._e(),_vm._v(\" \"),(_vm.item.extra)?_c('section',[_c(_vm.item.extra.component,{tag:\"component\",attrs:{\"context\":_vm.context,\"item\":_vm.item}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-text-box.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-text-box.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport SettingMixin from '../setting-mixin';\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context'],\n\n\tcomputed: {\n\t\ttype() {\n\t\t\treturn this.item.type || 'text';\n\t\t},\n\n\t\tplaceholder() {\n\t\t\treturn this.item.placeholder || this.default_value;\n\t\t}\n\t},\n\n\tmethods: {\n\t\tonChange() {\n\t\t\tconst value = this.$refs.control.value;\n\t\t\tif ( value != null )\n\t\t\t\tthis.set(value);\n\t\t}\n\t}\n}\n","import { render, staticRenderFns } from \"./setting-text-box.vue?vue&type=template&id=5d936098&lang=html&\"\nimport script from \"./setting-text-box.vue?vue&type=script&lang=js&\"\nexport * from \"./setting-text-box.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--setting-text\",class:_vm.classes},[(_vm.loading)?_c('div',{staticClass:\"tw-align-center tw-pd-05\"},[_c('h3',{staticClass:\"tw-mg-1 ffz-i-zreknarf loading\"})]):_c('markdown',{attrs:{\"source\":_vm.content}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-text.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./setting-text.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {maybe_call} from 'utilities/object';\n\nexport default {\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\tlet classes = maybe_call(this.item.classes, this, this.item, this.context);\n\t\tif ( classes instanceof Promise ) {\n\t\t\tclasses.then(classes => {\n\t\t\t\tthis.classes = classes;\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.error('Error loading async classes:', err);\n\t\t\t\tthis.classes = '';\n\t\t\t});\n\n\t\t\tclasses = '';\n\n\t\t} else if ( ! classes )\n\t\t\tclasses = '';\n\n\t\tconst source = maybe_call(this.item.content, this, this.item, this.context);\n\t\tif ( !(source instanceof Promise) )\n\t\t\treturn {\n\t\t\t\tloading: false,\n\t\t\t\tcontent: source,\n\t\t\t\tclasses\n\t\t\t};\n\n\t\tsource.then(content => {\n\t\t\tthis.content = content;\n\t\t\tthis.loading = false;\n\t\t}).catch(err => {\n\t\t\tconsole.error('Error loading async content:', err);\n\t\t\tthis.loading = false;\n\t\t\tthis.content = this.t('setting.error', 'An error occurred.');\n\t\t});\n\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tcontent: null,\n\t\t\tclasses\n\t\t}\n\t}\n\n}\n\n","import { render, staticRenderFns } from \"./setting-text.vue?vue&type=template&id=5d2b649a&lang=html&\"\nimport script from \"./setting-text.vue?vue&type=script&lang=js&\"\nexport * from \"./setting-text.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(! _vm.page)?_c('div',{staticClass:\"tw-flex tw-flex-wrap\"},_vm._l((_vm.info_blocks),function(info){return _c('div',{key:info.key,staticClass:\"tw-flex tw-flex-column tw-justify-content-center tw-pd-x-1 tw-pd-y-05 tw-c-background-base tw-border-radius-large tw-mg-r-1 tw-mg-b-1\"},[_c('p',{staticClass:\"tw-c-text-base tw-font-size-4\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.get(info.key, info.format))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('p',{staticClass:\"tw-c-text-alt-2 tw-font-size-6\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(info.i18n_key ? _vm.t(info.i18n_key, info.title) : info.title)+\"\\n\\t\\t\\t\")])])}),0):_vm._e(),_vm._v(\" \"),(! _vm.page)?_c('div',{staticClass:\"tw-border-t tw-pd-t-1 tw-flex tw-flex-wrap\"},_vm._l((_vm.stat_blocks),function(info){return _c('div',{key:info.key,staticClass:\"tw-flex tw-flex-column tw-justify-content-center tw-pd-x-1 tw-pd-y-05 tw-c-background-base tw-border-radius-large tw-mg-r-1 tw-mg-b-1\",class:info.click ? 'ffz--cursor' : '',on:{\"click\":function($event){return _vm.onClick(info, $event)}}},[_c('p',{staticClass:\"tw-c-text-base tw-font-size-4\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.get(info.key, info.format))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('p',{staticClass:\"tw-c-text-alt-2 tw-font-size-6\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(info.i18n_key ? _vm.t(info.i18n_key, info.title) : info.title)+\"\\n\\t\\t\\t\")])])}),0):_vm._e(),_vm._v(\" \"),(_vm.page)?_c('button',{staticClass:\"tw-mg-b-1 tw-button tw-button--text\",on:{\"click\":function($event){_vm.page = null}}},[_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('settings.back', 'Back'))+\"\\n\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.page == 'versions')?_c('div',[_c('table',[_c('thead',{staticClass:\"tw-border-b tw-pd-b-05 tw-mg-b-05 tw-strong\"},[_c('th',{staticClass:\"tw-pd-r-1\"},[_vm._v(_vm._s(_vm.t('socket.info.version', 'Version')))]),_vm._v(\" \"),_c('th',[_vm._v(_vm._s(_vm.t('socket.info.count', 'Count')))])]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.version_list),function(entry){return _c('tr',{key:entry[0]},[_c('td',{staticClass:\"tw-pd-r-1\"},[_vm._v(_vm._s(entry[0]))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(_vm.tNumber(entry[1])))])])}),0)])]):_vm._e(),_vm._v(\" \"),(_vm.page == 'commands')?_c('div',[_c('table',[_c('thead',{staticClass:\"tw-border-b tw-pd-b-05 tw-mg-b-05 tw-strong\"},[_c('th',{staticClass:\"tw-pd-r-1\"},[_vm._v(_vm._s(_vm.t('socket.info.command', 'Command')))]),_vm._v(\" \"),_c('th',[_vm._v(_vm._s(_vm.t('socket.info.count', 'Count')))])]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.command_list),function(entry){return _c('tr',{key:entry[0]},[_c('td',{staticClass:\"tw-pd-r-1\"},[_vm._v(_vm._s(entry[0]))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(_vm.tNumber(entry[1])))])])}),0)])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {get} from 'utilities/object';\n\nconst INFO_BLOCKS = [\n\t{\n\t\tkey: 'state',\n\t\ttitle: 'State'\n\t},\n\t{\n\t\tkey: 'server',\n\t\ttitle: 'Server'\n\t},\n\t{\n\t\tkey: 'stats.authenticated',\n\t\ttitle: 'Authenticated'\n\t},\n\t{\n\t\tkey: 'topics',\n\t\ttitle: 'Topics'\n\t},\n\t{\n\t\tkey: 'ping',\n\t\ttitle: 'Ping',\n\t\tformat(val) {\n\t\t\tif ( val == null )\n\t\t\t\treturn null;\n\n\t\t\treturn `${Math.round(val)} ms`;\n\t\t}\n\t},\n\t{\n\t\tkey: 'time_offset',\n\t\ttitle: 'Time Offset',\n\t\tformat(val) {\n\t\t\tif ( val == null )\n\t\t\t\treturn null;\n\n\t\t\treturn `${Math.round(val)} ms`;\n\t\t}\n\t},\n\t{\n\t\tkey: 'local_time',\n\t\ttitle: 'Local Time',\n\t\tformat(val) {\n\t\t\tif ( val == null )\n\t\t\t\treturn null;\n\n\t\t\treturn val.toISOString();\n\t\t}\n\t},\n\t{\n\t\tkey: 'server_time',\n\t\ttitle: 'Server Time',\n\t\tformat(val) {\n\t\t\tif ( val == null )\n\t\t\t\treturn null;\n\n\t\t\treturn val.toISOString();\n\t\t}\n\t}\n];\n\nfunction formatNumber(val) {\n\treturn val == null ? null : this.tNumber(val); // eslint-disable-line no-invalid-this\n}\n\nconst STAT_BLOCKS = [\n\t{\n\t\tkey: 'stats.connected_clients',\n\t\ttitle: 'Connected Clients',\n\t\tformat: formatNumber\n\t},\n\t{\n\t\tkey: 'stats.live_clients',\n\t\ttitle: 'Live Clients',\n\t\tformat: formatNumber\n\t},\n\t{\n\t\tkey: 'stats.total_commands',\n\t\ttitle: 'Commands',\n\t\tclick() {\n\t\t\tthis.page = 'commands';\n\t\t},\n\t\tformat: formatNumber\n\t},\n\t{\n\t\tkey: 'stats.total_messages',\n\t\ttitle: 'Messages',\n\t\tformat: formatNumber\n\t},\n\t{\n\t\tkey: 'stats.versions',\n\t\ttitle: 'Client Versions',\n\t\tclick() {\n\t\t\tthis.page = 'versions';\n\t\t},\n\t\tformat(val) {\n\t\t\tif ( val == null )\n\t\t\t\treturn null;\n\n\t\t\treturn Object.keys(val).length;\n\t\t}\n\t}\n];\n\nexport default {\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tconnected: false,\n\t\t\tconnecting: false,\n\t\t\tserver: null,\n\t\t\tping: null,\n\t\t\tlocal_time: new Date(),\n\t\t\ttime_offset: null,\n\t\t\tstats: null,\n\t\t\ttopics: null,\n\t\t\tpage: null\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tinfo_blocks() {\n\t\t\tconst out = [];\n\t\t\tfor(const info of INFO_BLOCKS) {\n\t\t\t\tconst copy = Object.assign({}, info);\n\t\t\t\tif ( ! copy.i18n_key )\n\t\t\t\t\tcopy.i18n_key = `socket.info.${copy.key}`;\n\n\t\t\t\tout.push(copy);\n\t\t\t}\n\n\t\t\treturn out;\n\t\t},\n\n\t\tstat_blocks() {\n\t\t\tconst out = [];\n\t\t\tfor(const info of STAT_BLOCKS) {\n\t\t\t\tconst copy = Object.assign({}, info);\n\t\t\t\tif ( ! copy.i18n_key )\n\t\t\t\t\tcopy.i18n_key = `socket.info.${copy.key}`;\n\n\t\t\t\tout.push(copy);\n\t\t\t}\n\n\t\t\treturn out;\n\t\t},\n\n\t\tversion_list() {\n\t\t\tif ( ! this.stats?.versions )\n\t\t\t\treturn [];\n\n\t\t\tconst out = Object.entries(this.stats.versions);\n\t\t\tout.sort((a,b) => b[1] - a[1]);\n\t\t\treturn out;\n\t\t},\n\n\t\tcommand_list() {\n\t\t\tif ( ! this.stats?.commands )\n\t\t\t\treturn [];\n\n\t\t\tconst out = Object.entries(this.stats.commands);\n\t\t\tout.sort((a,b) => b[1] - a[1]);\n\t\t\treturn out;\n\t\t},\n\n\t\tstate() {\n\t\t\tif ( this.connected )\n\t\t\t\treturn this.t('socket.info.connected', 'connected');\n\t\t\telse if ( this.connecting )\n\t\t\t\treturn this.t('socket.info.connecting', 'connecting');\n\n\t\t\treturn this.t('socket.info.disconnected', 'disconnected');\n\t\t},\n\n\t\tserver_time() {\n\t\t\tif ( this.time_offset == null || this.local_time == null )\n\t\t\t\treturn null;\n\n\t\t\treturn new Date(this.local_time.getTime() - this.time_offset);\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.time_interval = setInterval(this.updateTime.bind(this), 1000);\n\t\tthis.info_interval = setInterval(this.updateInfo.bind(this), 5000);\n\n\t\tthis.updateInfo();\n\t\tthis.update();\n\n\t\tconst socket = this.item.getSocket();\n\n\t\tsocket.on(':pong', this.update, this);\n\t\tsocket.on(':sub-change', this.update, this);\n\t\tsocket.on(':connected', this.update, this);\n\t\tsocket.on(':closed', this.update, this);\n\t\tsocket.on(':disconnected', this.update, this);\n\t},\n\n\tdestroyed() {\n\t\tclearInterval(this.time_interval);\n\t\tclearInterval(this.info_interval);\n\n\t\tthis.time_interval = null;\n\t\tthis.info_interval = null;\n\n\t\tconst socket = this.item.getSocket();\n\n\t\tsocket.off(':pong', this.update, this);\n\t\tsocket.off(':sub-change', this.update, this);\n\t\tsocket.off(':connected', this.update, this);\n\t\tsocket.off(':closed', this.update, this);\n\t\tsocket.off(':disconnected', this.update, this);\n\t},\n\n\tmethods: {\n\t\tonClick(info, e) {\n\t\t\tif ( info.click )\n\t\t\t\tinfo.click.call(this, e);\n\t\t},\n\n\t\tget(key, fmt) {\n\t\t\tlet val = get(key, this);\n\t\t\tif ( fmt )\n\t\t\t\tval = fmt.call(this, val);\n\n\t\t\tif ( val == null )\n\t\t\t\treturn '---';\n\n\t\t\treturn val;\n\t\t},\n\n\t\tupdateTime() {\n\t\t\tconst socket = this.item.getSocket();\n\t\t\tsocket.ping(true);\n\n\t\t\tthis.local_time = new Date();\n\t\t},\n\n\t\tasync updateInfo() {\n\t\t\tif ( this.updating_info )\n\t\t\t\treturn;\n\n\t\t\tthis.updating_info = true;\n\n\t\t\tconst socket = this.item.getSocket();\n\t\t\tthis.stats = socket.connected ? (await socket.call('get_server_status')) : null;\n\t\t\tthis.updating_info = false;\n\t\t},\n\n\t\tupdate() {\n\t\t\tconst socket = this.item.getSocket();\n\n\t\t\tthis.connected = socket.connected;\n\t\t\tthis.connecting = socket.connecting;\n\t\t\tthis.server = socket._host;\n\t\t\tthis.ping = this.connected ? socket._last_ping : null;\n\t\t\tthis.time_offset = this.connected ? socket._time_drift : null;\n\t\t\tthis.topics = socket.topics?.length ?? 0;\n\t\t}\n\t}\n\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./socket-info.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./socket-info.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./socket-info.vue?vue&type=template&id=5d9a1416&lang=html&\"\nimport script from \"./socket-info.vue?vue&type=script&lang=js&\"\nexport * from \"./socket-info.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"ffz--widget ffz--tag-list\"},[_c('div',{staticClass:\"tw-align-items-center tw-flex tw-flex-nowrap tw-flex-row tw-full-width\"},[_c('div',{staticClass:\"tw-flex-grow-1 tw-mg-r-05\"},[_c('autocomplete',{staticClass:\"tw-flex-grow-1\",attrs:{\"input-id\":'tag$' + _vm.id,\"items\":_vm.fetchTags,\"suggest-on-focus\":true,\"escape-to-clear\":false},scopedSlots:_vm._u([{key:\"default\",fn:function(slot){return undefined}}]),model:{value:(_vm.adding),callback:function ($$v) {_vm.adding=$$v},expression:\"adding\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button\",on:{\"click\":_vm.add}},[_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.add-term', 'Add'))+\"\\n\\t\\t\\t\\t\")])])])]),_vm._v(\" \"),(! _vm.value || ! _vm.value.length)?_c('div',{staticClass:\"tw-mg-t-05 tw-c-text-alt-2 tw-font-size-4 tw-align-center tw-c-text-alt-2 tw-pd-05\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.no-items', 'no items'))+\"\\n\\t\")]):_c('ul',{staticClass:\"ffz--term-list tw-mg-t-05\"},_vm._l((_vm.value),function(i){return _c('li',{key:i,staticClass:\"ffz--term ffz--game-term tw-align-items-center tw-flex tw-flex-nowrap tw-flex-row tw-full-width\"},[_c('div',{staticClass:\"tw-flex-grow-1 tw-mg-r-05\"},[(_vm.can_link)?_c('a',{staticClass:\"ffz-link\",attrs:{\"href\":(\"/directory/all/tags/\" + i)},on:{\"click\":function($event){$event.preventDefault();return _vm.handleLink(i)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(i)+\"\\n\\t\\t\\t\\t\")]):_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(i)+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){return _vm.remove(i)}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\\t\\t\")])])])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport SettingMixin from '../setting-mixin';\nimport {deep_copy} from 'utilities/object';\n\nlet last_id = 0;\n\nexport default {\n\tmixins: [SettingMixin],\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tid: last_id++,\n\t\t\tadding: '',\n\t\t\tcan_link: false\n\t\t}\n\t},\n\n\tcreated() {\n\t\tconst ffz = this.context.getFFZ();\n\n\t\tthis.loader = ffz.resolve('site.twitch_data');\n\t\tthis.router = ffz.resolve('site.router');\n\n\t\tthis.can_link = false; //! ffz.resolve('main_menu').exclusive;\n\t},\n\n\tmethods: {\n\t\tadd() {\n\t\t\tif ( ! this.adding?.length )\n\t\t\t\treturn;\n\n\t\t\tconst adding = this.adding.toLowerCase();\n\n\t\t\tconst values = Array.from(this.value);\n\t\t\tif ( values.includes(adding) )\n\t\t\t\treturn;\n\n\t\t\tvalues.push(adding);\n\t\t\tthis.set(values);\n\t\t},\n\n\t\tremove(item) {\n\t\t\tconst values = Array.from(this.value),\n\t\t\t\tidx = values.indexOf(item);\n\n\t\t\tif ( idx === -1 )\n\t\t\t\treturn;\n\n\t\t\tif ( values.length === 1 )\n\t\t\t\tthis.clear();\n\t\t\telse {\n\t\t\t\tvalues.splice(idx, 1);\n\t\t\t\tthis.set(values);\n\t\t\t}\n\t\t},\n\n\t\thandleLink(i) {\n\t\t\t//this.router.navigate('dir-game-index', {gameName: i});\n\t\t},\n\n\t\tasync fetchTags(query) {\n\t\t\tif ( ! this.loader )\n\t\t\t\treturn [];\n\n\t\t\tconst data = await this.loader.getMatchingTags(query);\n\t\t\tif ( ! Array.isArray(data) )\n\t\t\t\treturn [];\n\n\t\t\treturn data.map(x => ({name: x}));\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./tag-list-editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./tag-list-editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tag-list-editor.vue?vue&type=template&id=b80884a8&lang=html&\"\nimport script from \"./tag-list-editor.vue?vue&type=script&lang=js&\"\nexport * from \"./tag-list-editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ffz--term\"},[_c('div',{staticClass:\"tw-align-items-center tw-flex tw-flex-wrap tw-flex-row tw-full-width\"},[(! _vm.is_valid)?_c('div',{staticClass:\"tw-relative ffz-il-tooltip__container tw-mg-r-05\"},[_c('figure',{staticClass:\"tw-c-text-error ffz-i-attention\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-left\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.warn-invalid', 'This highlight term is invalid.'))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(! _vm.is_safe)?_c('div',{staticClass:\"tw-relative ffz-il-tooltip__container tw-mg-r-05\"},[_c('figure',{staticClass:\"tw-c-text-hint ffz-i-attention\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-left\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.warn-complex', 'This highlight term is potentially too complex. It may cause client lag.'))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex-grow-1\"},[(! _vm.editing)?_c('h4',{staticClass:\"ffz-monospace\"},[_c('pre',[_vm._v(_vm._s(_vm.term.v))])]):_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.v),expression:\"edit_data.v\"}],staticClass:\"tw-block tw-full-width tw-border-radius-medium tw-font-size-6 tw-full-width ffz-input tw-pd-x-1 tw-pd-y-05\",attrs:{\"placeholder\":_vm.adding ? _vm.t('setting.terms.add-placeholder', 'Add a new term') : _vm.edit_data.v,\"type\":\"text\",\"autocapitalize\":\"off\",\"autocorrect\":\"off\"},domProps:{\"value\":(_vm.edit_data.v)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.edit_data, \"v\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex-shrink-0 tw-mg-x-05\"},[(! _vm.editing)?_c('span',[_vm._v(_vm._s(_vm.term_type))]):_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.t),expression:\"edit_data.t\"}],staticClass:\"tw-block tw-border-radius-medium tw-font-size-6 ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 ffz-min-width-unset\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.edit_data, \"t\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"text\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.type.text', 'Text'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"glob\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.type.glob', 'Glob'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"raw\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.type.regex', 'Regex'))+\"\\n\\t\\t\\t\\t\")])])]),_vm._v(\" \"),(_vm.colored)?_c('div',{staticClass:\"tw-flex-shrink-0 tw-mg-r-05\"},[(_vm.editing)?_c('color-picker',{attrs:{\"nullable\":true,\"show-input\":false,\"tooltip\":_vm.t('settings.term.color.tip', 'Color')},model:{value:(_vm.edit_data.c),callback:function ($$v) {_vm.$set(_vm.edit_data, \"c\", $$v)},expression:\"edit_data.c\"}}):(_vm.term.c)?_c('div',{staticClass:\"ffz-color-preview tw-relative ffz-il-tooltip__container\"},[_c('figure',{style:((\"background-color: \" + (_vm.term.c)))},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.term.color.tip', 'Color'))+\"\\n\\t\\t\\t\\t\")])]):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.priority)?_c('div',{staticClass:\"tw-flex-shrink-0 tw-relative ffz-il-tooltip__container\",class:_vm.editing ? 'tw-mg-r-05' : 'tw-mg-x-05'},[(! _vm.editing)?_c('span',[_vm._v(_vm._s(_vm.term.p))]):_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.edit_data.p),expression:\"edit_data.p\",modifiers:{\"number\":true}}],staticClass:\"tw-block tw-border-radius-medium tw-font-size-6 ffz-min-width-unset ffz-input tw-pd-x-1 tw-pd-y-05\",staticStyle:{\"width\":\"5rem\"},attrs:{\"type\":\"number\",\"step\":\"1\"},domProps:{\"value\":(_vm.edit_data.p)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.edit_data, \"p\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.terms.priority.tip', 'Priority'))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.editing || _vm.display.s)?_c('div',{staticClass:\"tw-flex-shrink-0 tw-mg-r-05 tw-mg-y-05 tw-flex tw-align-items-center ffz-checkbox tw-relative ffz-il-tooltip__container\"},[(_vm.editing)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.s),expression:\"edit_data.s\"}],staticClass:\"ffz-min-width-unset ffz-checkbox__input\",attrs:{\"id\":'sensitive$' + _vm.id,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.edit_data.s)?_vm._i(_vm.edit_data.s,null)>-1:(_vm.edit_data.s)},on:{\"change\":function($event){var $$a=_vm.edit_data.s,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.edit_data, \"s\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.edit_data, \"s\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.edit_data, \"s\", $$c)}}}}):_vm._e(),_vm._v(\" \"),(_vm.editing)?_c('label',{staticClass:\"ffz-min-width-unset ffz-checkbox__label\",attrs:{\"for\":'sensitive$' + _vm.id}},[_c('span',{staticClass:\"tw-mg-l-05\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.terms.sensitive', 'Aa'))+\"\\n\\t\\t\\t\\t\")])]):(_vm.display.s)?_c('div',{staticClass:\"tw-relative ffz-il-tooltip__container\"},[_c('span',{staticClass:\"tw-mg-l-05\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.terms.sensitive', 'Aa'))+\"\\n\\t\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.terms.sensitive.tip', 'Case Sensitive'))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.words && (_vm.editing || _vm.display.w))?_c('div',{staticClass:\"tw-flex-shrink-0 tw-mg-r-05 tw-mg-y-05 tw-flex tw-align-items-center ffz-checkbox tw-relative ffz-il-tooltip__container\"},[(_vm.editing)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.w),expression:\"edit_data.w\"}],staticClass:\"ffz-min-width-unset ffz-checkbox__input\",attrs:{\"id\":'word$' + _vm.id,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.edit_data.w)?_vm._i(_vm.edit_data.w,null)>-1:(_vm.edit_data.w)},on:{\"change\":function($event){var $$a=_vm.edit_data.w,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.edit_data, \"w\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.edit_data, \"w\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.edit_data, \"w\", $$c)}}}}):_vm._e(),_vm._v(\" \"),(_vm.editing)?_c('label',{staticClass:\"ffz-min-width-unset ffz-checkbox__label\",attrs:{\"for\":'word$' + _vm.id}},[_c('span',{staticClass:\"tw-mg-l-05 ffz--whole-word\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.terms.word', 'Abc'))+\"\\n\\t\\t\\t\\t\")])]):(_vm.display.w)?_c('div',{staticClass:\"tw-relative ffz-il-tooltip__container\"},[_c('span',{staticClass:\"tw-mg-l-05 ffz--whole-word\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.terms.word', 'Abc'))+\"\\n\\t\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.terms.word.tip', 'Match Whole Words'))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.highlight && (_vm.editing || _vm.display.h))?_c('div',{staticClass:\"tw-flex-shrink-0 tw-mg-r-05 tw-mg-y-05 tw-flex tw-align-items-center ffz-checkbox tw-relative ffz-il-tooltip__container\"},[(_vm.editing)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.h),expression:\"edit_data.h\"}],staticClass:\"ffz-min-width-unset ffz-checkbox__input\",attrs:{\"id\":'highlight$' + _vm.id,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.edit_data.h)?_vm._i(_vm.edit_data.h,null)>-1:(_vm.edit_data.h)},on:{\"change\":function($event){var $$a=_vm.edit_data.h,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.edit_data, \"h\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.edit_data, \"h\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.edit_data, \"h\", $$c)}}}}):_vm._e(),_vm._v(\" \"),(_vm.editing)?_c('label',{staticClass:\"ffz-min-width-unset ffz-checkbox__label\",attrs:{\"for\":'highlight$' + _vm.id}},[_c('span',{staticClass:\"tw-mg-l-05 ffz--highlight\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.terms.highlight', 'Hlt'))+\"\\n\\t\\t\\t\\t\")])]):(_vm.display.h)?_c('div',{staticClass:\"tw-relative ffz-il-tooltip__container\"},[_c('span',{staticClass:\"tw-mg-l-05 ffz--highlight\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.terms.highlight', 'Hlt'))+\"\\n\\t\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_c('markdown',{attrs:{\"source\":_vm.t(\n\t\t\t\t\t\t'settings.terms.highlight.tip',\n\t\t\t\t\t\t'Highlight Matches\\n\\nThis requires the \\'Highlight matched words in chat.\\' setting to work.'\n\t\t\t\t\t)}})],1)]):_vm._e(),_vm._v(\" \"),(_vm.removable && (_vm.editing || _vm.display.remove))?_c('div',{staticClass:\"tw-flex-shrink-0 tw-mg-r-05 tw-mg-y-05 tw-flex tw-align-items-center ffz-checkbox tw-relative ffz-il-tooltip__container\"},[(_vm.editing)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.edit_data.remove),expression:\"edit_data.remove\"}],staticClass:\"ffz-min-width-unset ffz-checkbox__input\",attrs:{\"id\":'remove$' + _vm.id,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.edit_data.remove)?_vm._i(_vm.edit_data.remove,null)>-1:(_vm.edit_data.remove)},on:{\"change\":function($event){var $$a=_vm.edit_data.remove,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.edit_data, \"remove\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.edit_data, \"remove\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.edit_data, \"remove\", $$c)}}}}):_vm._e(),_vm._v(\" \"),(_vm.editing)?_c('label',{staticClass:\"ffz-min-width-unset ffz-checkbox__label\",attrs:{\"for\":'remove$' + _vm.id}},[_c('span',{staticClass:\"tw-mg-l-05 ffz-i-trash\"})]):(_vm.term.remove)?_c('span',{staticClass:\"ffz-i-trash tw-pd-x-1\"}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.remove.on', 'Remove matching messages from chat.'))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.adding)?_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button\",on:{\"click\":_vm.save}},[_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.add-term', 'Add'))+\"\\n\\t\\t\\t\\t\")])])]):(_vm.editing)?_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.save}},[_c('span',{staticClass:\"tw-button__text ffz-i-floppy\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.save', 'Save'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.cancel}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.cancel', 'Cancel'))+\"\\n\\t\\t\\t\\t\")])])]):(_vm.deleting)?_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){return _vm.$emit('remove', _vm.term)}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){_vm.deleting = false}}},[_c('span',{staticClass:\"tw-button__text ffz-i-cancel\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.cancel', 'Cancel'))+\"\\n\\t\\t\\t\\t\")])])]):_c('div',{staticClass:\"tw-flex-shrink-0\"},[_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":_vm.edit}},[_c('span',{staticClass:\"tw-button__text ffz-i-cog\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.edit', 'Edit'))+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('button',{staticClass:\"tw-button tw-button--text ffz-il-tooltip__container\",on:{\"click\":function($event){_vm.deleting = true}}},[_c('span',{staticClass:\"tw-button__text ffz-i-trash\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.delete', 'Delete'))+\"\\n\\t\\t\\t\\t\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport safety from 'safe-regex';\n\nimport {deep_copy, glob_to_regex, escape_regex} from 'utilities/object';\n\nlet id = 0;\n\nexport default {\n\tprops: {\n\t\tterm: Object,\n\t\thighlight: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tpriority: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\twords: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tcolored: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tremovable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tadding: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\n\tdata() {\n\t\tconst this_id = `term$${id++}`;\n\n\t\tif ( this.adding )\n\t\t\treturn {\n\t\t\t\tid: this_id,\n\t\t\t\tdeleting: false,\n\t\t\t\tediting: true,\n\t\t\t\tedit_data: deep_copy(this.term)\n\t\t\t};\n\n\t\treturn {\n\t\t\tid: this_id,\n\t\t\tdeleting: false,\n\t\t\tediting: false,\n\t\t\tedit_data: null\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tdisplay() {\n\t\t\treturn this.editing ? this.edit_data : this.term;\n\t\t},\n\n\t\tis_valid() {\n\t\t\tconst data = this.display,\n\t\t\t\tt = data.t;\n\n\t\t\tlet v = data.v;\n\n\t\t\tif ( t === 'text' )\n\t\t\t\tv = escape_regex(v);\n\n\t\t\telse if ( t === 'glob' )\n\t\t\t\tv = glob_to_regex(v);\n\n\t\t\ttry {\n\t\t\t\tnew RegExp(v);\n\t\t\t\treturn true;\n\t\t\t} catch(err) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\tis_safe() {\n\t\t\tconst data = this.display,\n\t\t\t\tt = data.t;\n\n\t\t\tlet v = data.v;\n\n\t\t\tif ( t === 'text' )\n\t\t\t\tv = escape_regex(v);\n\n\t\t\telse if ( t === 'glob' )\n\t\t\t\tv = glob_to_regex(v);\n\n\t\t\treturn safety(v);\n\t\t},\n\n\t\tterm_type() {\n\t\t\tconst t = this.term && this.term.t;\n\t\t\tif ( t === 'text' )\n\t\t\t\treturn this.t('setting.terms.type.text', 'Text');\n\n\t\t\telse if ( t === 'raw' )\n\t\t\t\treturn this.t('setting.terms.type.raw', 'Regex');\n\n\t\t\telse if ( t === 'glob' )\n\t\t\t\treturn this.t('setting.terms.type.glob', 'Glob');\n\n\t\t\telse if ( t === 'regex' )\n\t\t\t\treturn this.t('setting.terms.type.regex-word', 'Regex (Word)');\n\n\t\t\treturn this.t('setting.unknown', 'Unknown Value');\n\t\t}\n\t},\n\n\tmethods: {\n\t\tedit() {\n\t\t\tthis.editing = true;\n\t\t\tthis.edit_data = Object.assign({remove: false}, deep_copy(this.term));\n\t\t},\n\n\t\ttoggleRemove() {\n\t\t\tif ( this.editing )\n\t\t\t\tthis.edit_data.remove = ! this.edit_data.remove;\n\t\t},\n\n\t\tcancel() {\n\t\t\tif ( this.adding ) {\n\t\t\t\tthis.edit_data = deep_copy(this.term);\n\n\t\t\t} else {\n\t\t\t\tthis.editing = false;\n\t\t\t\tthis.edit_data = null;\n\t\t\t}\n\t\t},\n\n\t\tsave() {\n\t\t\tif ( this.priority && this.edit_data.p ) {\n\t\t\t\tif ( typeof this.edit_data.p === 'number' )\n\t\t\t\t\tthis.edit_data.p = Math.floor(this.edit_data.p);\n\t\t\t\telse\n\t\t\t\t\tthis.edit_data.p = 0;\n\t\t\t}\n\n\t\t\tthis.$emit('save', this.edit_data);\n\t\t\tthis.cancel();\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./term-editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./term-editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./term-editor.vue?vue&type=template&id=ebca67e4&lang=html&\"\nimport script from \"./term-editor.vue?vue&type=script&lang=js&\"\nexport * from \"./term-editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"ffz--widget ffz--service-tos\"},[_c('h4',[_vm._v(_vm._s(_vm.key))]),_vm._v(\" \"),_c('markdown',{staticClass:\"tw-mg-b-05\",attrs:{\"source\":_vm.linkText}}),_vm._v(\" \"),(_vm.hasAccepted)?_c('div',[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('tooltip.has-accepted', 'You have accepted the Terms of Service.'))+\"\\n\\t\")]):[_c('button',{staticClass:\"tw-button tw-mg-b-05\",on:{\"click\":_vm.accept}},[_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.acceptText)+\"\\n\\t\\t\\t\")])]),_vm._v(\" \"),(! _vm.declined)?_c('button',{staticClass:\"tw-button tw-button--text tw-block\",on:{\"click\":_vm.reject}},[_c('span',{staticClass:\"tw-button__text\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('tooltip.decline-tos', 'I do not accept.'))+\"\\n\\t\\t\\t\")])]):_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('tooltip.has-declined-tos', 'We won\\'t ask you to accept the terms again, but you can still change your mind on this page.'))+\"\\n\\t\\t\")])]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport ProviderMixin from '../provider-mixin';\nimport { deep_copy } from 'utilities/object';\n\nlet last_id = 0;\n\nexport default {\n\tmixins: [ProviderMixin],\n\tprops: ['item', 'context'],\n\n\tdata() {\n\t\tconst chat = this.item.getChat();\n\n\t\treturn {\n\t\t\tid: last_id++,\n\n\t\t\tdeclined: chat ? chat.hasDeclinedTerms(this.item.item) : false,\n\n\t\t\tkey: this.item.item\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tacceptText() {\n\t\t\tif ( this.data.i18n_accept )\n\t\t\t\treturn this.t(this.data.i18n_accept, this.data.accept);\n\t\t\telse if ( this.data.accept )\n\t\t\t\treturn this.data.accept;\n\n\t\t\treturn this.t('tooltip.accept-tos', 'Yes, I accept the Terms of Service.');\n\t\t},\n\n\t\tlinkText() {\n\t\t\tif ( this.data.i18n_links )\n\t\t\t\treturn this.t(this.data.i18n_links, this.data.links);\n\t\t\treturn this.data.links;\n\t\t},\n\n\t\thasAccepted() {\n\t\t\treturn Array.isArray(this.value) && this.value.includes(this.key)\n\t\t}\n\t},\n\n\tmethods: {\n\t\taccept() {\n\t\t\tconst val = Array.isArray(this.value) ? [...this.value] : [];\n\t\t\tval.push(this.key);\n\t\t\tthis.set(val);\n\t\t},\n\n\t\treject() {\n\t\t\tif ( this.declined )\n\t\t\t\treturn;\n\n\t\t\tconst chat = this.item.getChat();\n\t\t\tif ( ! chat )\n\t\t\t\treturn;\n\n\t\t\tthis.declined = true;\n\t\t\tchat.declineTerms(this.key);\n\t\t}\n\t}\n\n}\n\n","import mod from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./tooltip-tos.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./tooltip-tos.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tooltip-tos.vue?vue&type=template&id=20198124&lang=html&\"\nimport script from \"./tooltip-tos.vue?vue&type=script&lang=js&\"\nexport * from \"./tooltip-tos.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"tw-flex-grow-1 tw-align-self-start tw-flex tw-align-items-center\"},[_c('div',{staticClass:\"tw-flex tw-align-items-center ffz-checkbox tw-mg-y-05\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.data),expression:\"value.data\"}],staticClass:\"ffz-checkbox__input\",attrs:{\"id\":'enabled$' + _vm.value.id,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.value.data)?_vm._i(_vm.value.data,null)>-1:(_vm.value.data)},on:{\"change\":function($event){var $$a=_vm.value.data,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.value, \"data\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.value, \"data\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.value, \"data\", $$c)}}}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-checkbox__label\",attrs:{\"for\":'enabled$' + _vm.value.id}},[_c('span',{staticClass:\"tw-mg-l-1\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t(_vm.type.i18n, _vm.type.title))+\"\\n\\t\\t\\t\")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nlet last_id = 0;\n\nexport default {\n\tprops: ['value', 'type', 'filters', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tid: last_id++\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./basic-toggle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./basic-toggle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./basic-toggle.vue?vue&type=template&id=705ae0e0&\"\nimport script from \"./basic-toggle.vue?vue&type=script&lang=js&\"\nexport * from \"./basic-toggle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"tw-flex-grow-1 tw-align-self-start\"},[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":'category$' + _vm.id}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t(_vm.type.i18n, _vm.type.title))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"ffz--search-avatar tw-mg-x-05 ffz-card-img--size-2\"},[_c('aspect',{attrs:{\"ratio\":1/1.33}},[(_vm.current)?_c('img',{staticClass:\"ffz-avatar__img tw-image\",attrs:{\"alt\":_vm.current.displayName || _vm.current.name,\"src\":_vm.current.boxArtURL}}):_vm._e()])],1),_vm._v(\" \"),_c('autocomplete',{staticClass:\"tw-flex-grow-1\",attrs:{\"input-id\":'category$' + _vm.id,\"items\":_vm.fetchCategories,\"value\":_vm.search,\"suggest-on-focus\":true,\"escape-to-clear\":false},on:{\"selected\":_vm.onSelected},scopedSlots:_vm._u([{key:\"default\",fn:function(slot){return [_c('autocomplete-game',{attrs:{\"game\":slot.item}})]}}])})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {debounce, deep_copy} from 'utilities/object';\n\nlet last_id = 0;\n\nexport default {\n\tprops: ['value', 'type', 'filters', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tid: last_id++,\n\t\t\tcurrent: null,\n\t\t\tloaded_id: null\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tsearch() {\n\t\t\treturn this.current && this.current.displayName || this.value.data.name;\n\t\t}\n\t},\n\n\twatch: {\n\t\tvalue: {\n\t\t\thandler() {\n\t\t\t\tthis.cacheCategory();\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\n\tcreated() {\n\t\tconst ffz = FrankerFaceZ.get();\n\t\tthis.loader = ffz.resolve('site.twitch_data');\n\t\tthis.cacheCategory = debounce(this.cacheCategory, 50);\n\t},\n\n\tbeforeDestroy() {\n\t\tthis.cacheCategory = null;\n\t},\n\n\tmounted() {\n\t\tthis.cacheCategory();\n\t},\n\n\tmethods: {\n\t\tasync cacheCategory() {\n\t\t\tif ( ! this.loader || this.loaded_id === this.value.data.id )\n\t\t\t\treturn;\n\n\t\t\tthis.current = null;\n\t\t\tthis.loaded_id = this.value.data.id;\n\n\t\t\tif ( ! this.loaded_id )\n\t\t\t\treturn;\n\n\t\t\tconst data = await this.loader.getCategory(this.loaded_id);\n\t\t\tif ( data )\n\t\t\t\tthis.current = deep_copy(data);\n\t\t\telse\n\t\t\t\tthis.current = null;\n\t\t},\n\n\t\tasync fetchCategories(query) {\n\t\t\tif ( ! this.loader )\n\t\t\t\treturn [];\n\n\t\t\tconst data = await this.loader.getMatchingCategories(query);\n\t\t\tif ( ! data || ! data.items )\n\t\t\t\treturn [];\n\n\t\t\treturn deep_copy(data.items);\n\t\t},\n\n\t\tonSelected(item) {\n\t\t\tthis.current = item;\n\t\t\tthis.value.data.name = item?.name || null;\n\t\t\tthis.value.data.id = item?.id || null;\n\t\t\tthis.value.data.boxArtURL = item?.boxArtURL || null;\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./category.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./category.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./category.vue?vue&type=template&id=09aa918e&\"\nimport script from \"./category.vue?vue&type=script&lang=js&\"\nexport * from \"./category.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"tw-flex-grow-1 tw-align-self-start\"},[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":'channel$' + _vm.id}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t(_vm.type.i18n, _vm.type.title))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"ffz--search-avatar tw-mg-x-05\"},[_c('figure',{staticClass:\"ffz-avatar ffz-avatar--size-30\"},[_c('div',{staticClass:\"tw-border-radius-rounded tw-overflow-hidden\"},[(_vm.current)?_c('img',{staticClass:\"ffz-avatar__img tw-image\",attrs:{\"alt\":_vm.current.displayName,\"src\":_vm.current.profileImageURL}}):_vm._e()])])]),_vm._v(\" \"),_c('autocomplete',{staticClass:\"tw-flex-grow-1\",attrs:{\"input-id\":'channel$' + _vm.id,\"items\":_vm.fetchUsers,\"value\":_vm.search,\"suggest-on-focus\":true,\"escape-to-clear\":false},on:{\"selected\":_vm.onSelected},scopedSlots:_vm._u([{key:\"default\",fn:function(slot){return [_c('autocomplete-user',{attrs:{\"user\":slot.item}})]}}])})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {debounce, deep_copy} from 'utilities/object';\n\nlet last_id = 0;\n\nexport default {\n\tprops: ['value', 'type', 'filters', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tid: last_id++,\n\t\t\tcurrent: null,\n\t\t\tloaded_id: null\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tsearch() {\n\t\t\treturn this.current && this.current.displayName || this.value.data.login;\n\t\t}\n\t},\n\n\twatch: {\n\t\tvalue: {\n\t\t\thandler() {\n\t\t\t\tthis.cacheUser();\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\n\tcreated() {\n\t\tconst ffz = FrankerFaceZ.get();\n\t\tthis.loader = ffz.resolve('site.twitch_data');\n\t\tthis.cacheUser = debounce(this.cacheUser, 50);\n\t},\n\n\tbeforeDestroy() {\n\t\tthis.cacheUser = null;\n\t},\n\n\tmounted() {\n\t\tthis.cacheUser();\n\t},\n\n\tmethods: {\n\t\tasync cacheUser() {\n\t\t\tif ( ! this.loader || this.loaded_id === this.value.data.id )\n\t\t\t\treturn;\n\n\t\t\tthis.current = null;\n\t\t\tthis.loaded_id = this.value.data.id;\n\n\t\t\tif ( ! this.loaded_id )\n\t\t\t\treturn;\n\n\t\t\tconst data = await this.loader.getUser(this.loaded_id);\n\t\t\tif ( data )\n\t\t\t\tthis.current = deep_copy(data);\n\t\t\telse\n\t\t\t\tthis.current = null;\n\t\t},\n\n\t\tasync fetchUsers(query) {\n\t\t\tif ( ! this.loader )\n\t\t\t\treturn [];\n\n\t\t\tconst data = await this.loader.getMatchingUsers(query);\n\t\t\tif ( ! data || ! data.items )\n\t\t\t\treturn [];\n\n\t\t\treturn deep_copy(data.items);\n\t\t},\n\n\t\tonSelected(item) {\n\t\t\tthis.current = item;\n\t\t\tthis.value.data.login = item && item.login || null;\n\t\t\tthis.value.data.id = item && item.id || null;\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./channel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./channel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./channel.vue?vue&type=template&id=0cd24851&\"\nimport script from \"./channel.vue?vue&type=script&lang=js&\"\nexport * from \"./channel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"tw-flex-grow-1 tw-align-self-start\"},[_c('div',[_c('header',{staticClass:\"tw-mg-y-05\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t(_vm.type.i18n, _vm.type.title))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('filter-editor',{staticClass:\"tw-flex-grow-1\",attrs:{\"filters\":_vm.filters,\"context\":_vm.context,\"max-rules\":_vm.type.maxRules},model:{value:(_vm.value.data[0]),callback:function ($$v) {_vm.$set(_vm.value.data, 0, $$v)},expression:\"value.data[0]\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"tw-border-t tw-mg-t-05 tw-pd-t-05\"},[_c('header',{staticClass:\"tw-flex tw-align-items-center\"},[_c('div',{staticClass:\"ffz--profile__icon tw-pd-r-05 tw-pd-y-05 tw-relative ffz-il-tooltip__container\"},[_c('figure',{class:[_vm.passes ? 'ffz-i-ok' : 'ffz-i-cancel']}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-left\"},[(_vm.passes)?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filters.if.pass', 'This branch is active because the condition is true.'))+\"\\n\\t\\t\\t\\t\\t\")]):_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filters.if.no_pass', 'This branch is not active because the condition is false.'))+\"\\n\\t\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-y-05\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filter.if.then', 'Then'))+\"\\n\\t\\t\\t\")])]),_vm._v(\" \"),_c('filter-editor',{staticClass:\"tw-flex-grow-1\",attrs:{\"filters\":_vm.filters,\"context\":_vm.context,\"max-rules\":_vm.type.maxRules},model:{value:(_vm.value.data[1]),callback:function ($$v) {_vm.$set(_vm.value.data, 1, $$v)},expression:\"value.data[1]\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"tw-border-t tw-mg-t-05 tw-pd-t-05\"},[_c('header',{staticClass:\"tw-flex tw-align-items-center\"},[_c('div',{staticClass:\"ffz--profile__icon tw-pd-r-05 tw-pd-y-05 tw-relative ffz-il-tooltip__container\"},[_c('figure',{class:[_vm.passes ? 'ffz-i-cancel' : 'ffz-i-ok']}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-left\"},[(_vm.passes)?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filters.if.no_fail', 'This branch is not active because the condition is true.'))+\"\\n\\t\\t\\t\\t\\t\")]):_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filters.if.fail', 'This branch is active because the condition is false.'))+\"\\n\\t\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-mg-y-05\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.filter.if.else', 'Else'))+\"\\n\\t\\t\\t\")])]),_vm._v(\" \"),_c('filter-editor',{staticClass:\"tw-flex-grow-1\",attrs:{\"filters\":_vm.filters,\"context\":_vm.context,\"max-rules\":_vm.type.maxRules},model:{value:(_vm.value.data[2]),callback:function ($$v) {_vm.$set(_vm.value.data, 2, $$v)},expression:\"value.data[2]\"}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {createTester} from 'utilities/filtering';\n\nlet last_id = 0;\n\nexport default {\n\tprops: ['value', 'type', 'filters', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tid: last_id++\n\t\t}\n\t},\n\n\tcomputed: {\n\t\ttester() {\n\t\t\treturn createTester(this.value.data[0], this.filters);\n\t\t},\n\n\t\tpasses() {\n\t\t\treturn this.tester && this.tester(this.context)\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./if.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./if.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./if.vue?vue&type=template&id=ce4ff738&\"\nimport script from \"./if.vue?vue&type=script&lang=js&\"\nexport * from \"./if.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"tw-flex-grow-1 tw-align-self-start\"},[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":'label$' + _vm.id}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t(_vm.type.i18n, _vm.type.title))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selected),expression:\"selected\"}],staticClass:\"tw-flex-grow-1 tw-mg-l-1 tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-select\",attrs:{\"id\":'label$' + _vm.id},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selected=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_vm._l((_vm.monitors),function(mon,idx){return [_c('option',{domProps:{\"value\":mon}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(idx + 1)+\". \"+_vm._s(mon.label)+\" (\"+_vm._s(mon.width)+\"\"+_vm._s(mon.height)+\")\\n\\t\\t\\t\\t\")])]})],2)]),_vm._v(\" \"),_c('div',{staticClass:\"tw-c-text-alt-2\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('setting.filter.monitor.about', 'This setting requires that this site has the Window Management permission. Please be sure that it is allowed.'))+\"\\n\\t\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport { matchScreen } from 'utilities/object';\n\nlet last_id = 0;\n\nexport default {\n\tprops: ['value', 'type', 'filters', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tid: last_id++,\n\t\t\thas_monitors: true,\n\t\t\tmonitors: [],\n\t\t\tready: false,\n\t\t\tselected: null\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.detectMonitors();\n\t},\n\n\twatch: {\n\t\tselected() {\n\t\t\tif ( ! this.ready || ! this.selected )\n\t\t\t\treturn;\n\n\t\t\tconst data = this.value.data = this.value.data || {};\n\n\t\t\tdata.label = this.selected.label;\n\t\t\tdata.index = this.monitors.indexOf(this.selected);\n\t\t\tdata.top = this.selected.top;\n\t\t\tdata.left = this.selected.left;\n\t\t\tdata.width = this.selected.width;\n\t\t\tdata.height = this.selected.height;\n\t\t}\n\t},\n\n\tmethods: {\n\t\tasync detectMonitors() {\n\t\t\tlet data;\n\t\t\ttry {\n\t\t\t\tdata = await window.getScreenDetails();\n\t\t\t} catch(err) {\n\t\t\t\tconsole.error('Unable to get screen details', err);\n\t\t\t\tthis.has_monitors = false;\n\t\t\t\tthis.monitors = [];\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.monitors = [];\n\t\t\tfor(const mon of data.screens)\n\t\t\t\tthis.monitors.push({\n\t\t\t\t\ttop: mon.top,\n\t\t\t\t\tleft: mon.left,\n\t\t\t\t\tlabel: mon.label,\n\t\t\t\t\twidth: mon.width,\n\t\t\t\t\theight: mon.height\n\t\t\t\t});\n\n\t\t\t//sortScreens(this.monitors);\n\t\t\tif ( this.value.data )\n\t\t\t\tthis.selected = matchScreen(this.monitors, this.value.data);\n\n\t\t\tthis.ready = true;\n\n\t\t\tif ( ! this.selected )\n\t\t\t\tthis.selected = this.monitors[0];\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./monitor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./monitor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./monitor.vue?vue&type=template&id=04fa4071&\"\nimport script from \"./monitor.vue?vue&type=script&lang=js&\"\nexport * from \"./monitor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"tw-flex-grow-1 tw-align-self-start\"},[_c('header',[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t(_vm.type.i18n, _vm.type.title))+\"\\n\\t\")]),_vm._v(\" \"),_c('filter-editor',{attrs:{\"filters\":_vm.filters,\"context\":_vm.context,\"max-rules\":_vm.type.maxRules},model:{value:(_vm.value.data),callback:function ($$v) {_vm.$set(_vm.value, \"data\", $$v)},expression:\"value.data\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nlet last_id = 0;\n\nexport default {\n\tprops: ['value', 'type', 'filters', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tid: last_id++\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./nested.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./nested.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./nested.vue?vue&type=template&id=2b7d054a&\"\nimport script from \"./nested.vue?vue&type=script&lang=js&\"\nexport * from \"./nested.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"tw-flex-grow-1 tw-align-self-start\"},[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('label',{attrs:{\"for\":'page$' + _vm.id}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t(_vm.type.i18n, _vm.type.title))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.data.route),expression:\"value.data.route\"}],staticClass:\"tw-flex-grow-1 tw-mg-l-1 tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-select\",attrs:{\"id\":'page$' + _vm.id},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.value.data, \"route\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._m(0),0)]),_vm._v(\" \"),_c('div',{staticClass:\"tw-border-t tw-mg-t-05\"},[_c('div',{staticClass:\"tw-pd-y-05\"},[_c('t-list',{attrs:{\"phrase\":\"setting.filter.page.url\",\"default\":\"URL: {url}\"},scopedSlots:_vm._u([{key:\"url\",fn:function(){return [_c('span',{staticClass:\"tw-c-text-alt\"},[_vm._v(_vm._s(_vm.url))])]},proxy:true}])})],1),_vm._v(\" \"),_vm._l((_vm.parts),function(part){return _c('div',{key:part.key,staticClass:\"tw-flex tw-align-items-center tw-mg-t-05\"},[_c('label',{attrs:{\"for\":'page$' + _vm.id + '$part-' + part.key}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t(part.i18n, part.title))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.data.values[part.key]),expression:\"value.data.values[part.key]\"}],staticClass:\"tw-mg-l-1 tw-flex-grow-1 tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 ffz-input\",attrs:{\"id\":'page$' + _vm.id + '$part-' + part.key},domProps:{\"value\":(_vm.value.data.values[part.key])},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.value.data.values, part.key, $event.target.value)}}})])})],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._l((_vm.routes),function(_,key){return _c('option',{key:key,domProps:{\"value\":key}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.getName(key))+\"\\n\\t\\t\\t\")])})}]\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport {deep_copy} from 'utilities/object';\n\nlet last_id = 0;\n\nexport default {\n\tprops: ['value', 'type', 'filters', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tid: last_id++,\n\t\t\troutes: {},\n\t\t\troute_names: {}\n\t\t}\n\t},\n\n\tcomputed: {\n\t\troute() {\n\t\t\treturn this.routes[this.value.data.route];\n\t\t},\n\n\t\turl() {\n\t\t\tif ( ! this.route )\n\t\t\t\treturn null;\n\n\t\t\tconst parts = {};\n\n\t\t\tfor(const part of this.parts) {\n\t\t\t\tconst value = this.value.data.values[part.key];\n\t\t\t\tparts[part.key] = value || `<${part.key}${part.optional ? '*' : ''}>`;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\treturn decodeURI(new URL(this.route.url(parts), this.route.domain ? `https://${this.route.domain}` : location));\n\t\t\t} catch(err) {\n\t\t\t\treturn '(unable to render url)';\n\t\t\t}\n\t\t},\n\n\t\tparts() {\n\t\t\tconst out = [];\n\t\t\tif ( ! this.route || ! this.route.parts )\n\t\t\t\treturn out;\n\n\t\t\tfor(const part of this.route.parts) {\n\t\t\t\tif ( typeof part === 'object' ) {\n\t\t\t\t\tconst name = part.name.replace(/([a-z])([A-Z])/g, (_, f, s) => `${f} ${s}`);\n\n\t\t\t\t\tout.push({\n\t\t\t\t\t\tkey: part.name,\n\t\t\t\t\t\ti18n: `settings.filter.page.route.${this.route.name}.${part.name}`,\n\t\t\t\t\t\ttitle: name[0].toLocaleUpperCase() + name.substr(1),\n\t\t\t\t\t\toptional: part.optional\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn out;\n\t\t}\n\t},\n\n\twatch: {\n\t\tvalue: {\n\t\t\thandler() {\n\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\n\tcreated() {\n\t\tconst ffz = FrankerFaceZ.get(),\n\t\t\trouter = this.router = ffz && ffz.resolve('site.router');\n\n\t\tthis.routes = deep_copy(router.getRoutes());\n\t\tthis.route_names = deep_copy(router.getRouteNames());\n\t},\n\n\tmethods: {\n\t\tgetName(route) {\n\t\t\tconst i18n_key = `settings.filter.page.route.${route}`;\n\t\t\tconst title = this.route_names[route] = this.route_names[route] || route.replace(\n\t\t\t\t/(^|-)([a-z])/g,\n\t\t\t\t(_, spacer, letter) => `${spacer ? ' ' : ''}${letter.toLocaleUpperCase()}`\n\t\t\t);\n\n\t\t\treturn this.t(i18n_key, title);\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./page.vue?vue&type=template&id=8f49ebd2&\"\nimport script from \"./page.vue?vue&type=script&lang=js&\"\nexport * from \"./page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"tw-flex-grow-1 tw-align-self-start tw-flex tw-align-items-center\"},[_c('div',{staticClass:\"tw-flex tw-align-items-center\"},[_c('div',{staticClass:\"tw-mg-r-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t(_vm.type.i18n, _vm.type.title))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('label',{staticClass:\"tw-mg-l-1\",attrs:{\"for\":'start-time$' + _vm.id}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('settings.filter.time.start', 'Start:'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.data[0]),expression:\"value.data[0]\"}],staticClass:\"ffz-min-width-unset tw-flex-grow-1 tw-border-radius-medium tw-font-size-6 tw-mg-x-1 tw-pd-x-1 tw-pd-y-05 ffz-input\",attrs:{\"id\":'start-time$' + _vm.id,\"type\":\"time\"},domProps:{\"value\":(_vm.value.data[0])},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.value.data, 0, $event.target.value)}}}),_vm._v(\" \"),_c('label',{staticClass:\"tw-mg-l-1\",attrs:{\"for\":'end-time$' + _vm.id}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('settings.filter.time.end', 'End:'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.data[1]),expression:\"value.data[1]\"}],staticClass:\"ffz-min-width-unset tw-flex-grow-1 tw-border-radius-medium tw-font-size-6 tw-pd-x-1 tw-pd-y-05 tw-mg-x-1 ffz-input\",attrs:{\"id\":'end-time$' + _vm.id,\"type\":\"time\"},domProps:{\"value\":(_vm.value.data[1])},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.value.data, 1, $event.target.value)}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nlet last_id = 0;\n\nexport default {\n\tprops: ['value', 'type', 'filters', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tid: last_id++\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./time.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./time.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./time.vue?vue&type=template&id=89433c46&\"\nimport script from \"./time.vue?vue&type=script&lang=js&\"\nexport * from \"./time.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"tw-flex-grow-1 tw-align-self-start tw-flex tw-align-items-center\"},[_c('div',{staticClass:\"tw-flex tw-flex-grow-1 tw-align-items-center\"},[_c('div',{staticClass:\"tw-mg-r-1\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t(_vm.type.i18n, _vm.type.title))+\"\\n\\t\\t\")]),_vm._v(\" \"),(! _vm.is_valid)?_c('div',{staticClass:\"tw-relative ffz-il-tooltip__container tw-mg-r-05\"},[_c('figure',{staticClass:\"tw-c-text-error ffz-i-attention\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-left\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.filter.title.warn-invalid', 'This pattern is invalid.'))+\"\\n\\t\\t\\t\")])]):(! _vm.is_safe)?_c('div',{staticClass:\"tw-relative ffz-il-tooltip__container tw-mg-r-05\"},[_c('figure',{staticClass:\"tw-c-text-error ffz-i-attention\"}),_vm._v(\" \"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-left\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.filter.title.warn-complex', 'This pattern is potentially too complex. It will be disabled to avoid client lag or freezing.'))+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.data.title),expression:\"value.data.title\"}],staticClass:\"tw-flex-grow-1 tw-border-radius-medium tw-font-size-6 tw-mg-x-1 tw-pd-x-1 tw-pd-y-05 ffz-input\",attrs:{\"id\":'title$' + _vm.id,\"type\":\"text\",\"autocapitalize\":\"off\",\"autocorrect\":\"off\"},domProps:{\"value\":(_vm.value.data.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.value.data, \"title\", $event.target.value)}}}),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.data.mode),expression:\"value.data.mode\"}],staticClass:\"tw-block tw-border-radius-medium tw-font-size-6 ffz-select tw-pd-l-1 tw-pd-r-3 tw-pd-y-05 ffz-min-width-unset\",attrs:{\"id\":'mode$' + _vm.id},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.value.data, \"mode\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"text\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.type.text', 'Text'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"glob\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.type.glob', 'Glob'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"raw\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('setting.terms.type.regex', 'Regex'))+\"\\n\\t\\t\\t\")])]),_vm._v(\" \"),_c('div',{staticClass:\"tw-flex tw-align-items-center ffz-checkbox tw-mg-l-1 tw-mg-y-05\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value.data.sensitive),expression:\"value.data.sensitive\"}],staticClass:\"ffz-min-width-unset ffz-checkbox__input\",attrs:{\"id\":'sensitive$' + _vm.id,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.value.data.sensitive)?_vm._i(_vm.value.data.sensitive,null)>-1:(_vm.value.data.sensitive)},on:{\"change\":function($event){var $$a=_vm.value.data.sensitive,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.value.data, \"sensitive\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.value.data, \"sensitive\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.value.data, \"sensitive\", $$c)}}}}),_vm._v(\" \"),_c('label',{staticClass:\"ffz-min-width-unset ffz-checkbox__label tw-relative ffz-il-tooltip__container\",attrs:{\"for\":'sensitive$' + _vm.id}},[_c('span',{staticClass:\"tw-mg-l-05\"},[_vm._v(\"\\n\\t\\t\\t\\t\\tAa\\n\\t\\t\\t\\t\\t\"),_c('div',{staticClass:\"ffz-il-tooltip ffz-il-tooltip--down ffz-il-tooltip--align-right\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('settings.filter.title.sensitive', 'Case Sensitive'))+\"\\n\\t\\t\\t\\t\\t\")])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport safety from 'safe-regex';\n\nimport {glob_to_regex, escape_regex} from 'utilities/object';\n\nlet last_id = 0;\n\nexport default {\n\tprops: ['value', 'type', 'filters', 'context'],\n\n\tdata() {\n\t\treturn {\n\t\t\tid: last_id++\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tregex() {\n\t\t\tconst mode = this.value.data.mode;\n\t\t\tlet v = this.value.data.title;\n\n\t\t\tif ( mode === 'text' )\n\t\t\t\tv = escape_regex(v);\n\t\t\telse if ( mode === 'glob' )\n\t\t\t\tv = glob_to_regex(v);\n\n\t\t\treturn v;\n\t\t},\n\n\t\tis_valid() {\n\t\t\ttry {\n\t\t\t\tnew RegExp(this.regex, `g${this.value.data.sensitive ? '' : 'i'}`);\n\t\t\t\treturn true;\n\t\t\t} catch(err) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\tis_safe() {\n\t\t\treturn safety(this.regex)\n\t\t}\n\t}\n}\n\n","import mod from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./title.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/esbuild-loader@4.0.2_webpack@5.88.2/node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/index.js??vue-loader-options!./title.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./title.vue?vue&type=template&id=3a334413&\"\nimport script from \"./title.vue?vue&type=script&lang=js&\"\nexport * from \"./title.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.10.2_css-loader@6.8.1_react@18.3.1_vue-template-compiler@2.6.14_webpack@5.88.2/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var map = {\n\t\"./action-editor.vue\": 29444,\n\t\"./action-preview.vue\": 99974,\n\t\"./addon-list.vue\": 28695,\n\t\"./addon.vue\": 64004,\n\t\"./async-text.vue\": 64530,\n\t\"./backup-restore.vue\": 12145,\n\t\"./badge-highlighting.vue\": 25532,\n\t\"./badge-term-editor.vue\": 13746,\n\t\"./badge-visibility.vue\": 88821,\n\t\"./basic-terms.vue\": 22298,\n\t\"./blocked-type-editor.vue\": 92417,\n\t\"./blocked-types.vue\": 71386,\n\t\"./changelog.vue\": 45969,\n\t\"./chat-actions.vue\": 76923,\n\t\"./chat-reasons.vue\": 63152,\n\t\"./chat-rich-example.vue\": 66753,\n\t\"./chat-tester.vue\": 2814,\n\t\"./chat-tooltip-example.vue\": 10001,\n\t\"./clear-settings.vue\": 4654,\n\t\"./emote-priorities.vue\": 13748,\n\t\"./experiments.vue\": 67706,\n\t\"./filter-editor.vue\": 51374,\n\t\"./filter-rule-editor.vue\": 49530,\n\t\"./format-preview.vue\": 30003,\n\t\"./game-list-editor.vue\": 17239,\n\t\"./graphql-inspect.vue\": 56845,\n\t\"./home-page.vue\": 99851,\n\t\"./i18n-open.vue\": 26818,\n\t\"./link-tester.vue\": 63667,\n\t\"./main-menu.vue\": 8053,\n\t\"./md-page.vue\": 83615,\n\t\"./menu-container.vue\": 68697,\n\t\"./menu-page.vue\": 77253,\n\t\"./menu-tree.vue\": 75652,\n\t\"./performance.vue\": 66306,\n\t\"./profile-editor.vue\": 5762,\n\t\"./profile-manager.vue\": 10087,\n\t\"./profile-selector.vue\": 58071,\n\t\"./provider.vue\": 4184,\n\t\"./reason-editor.vue\": 92561,\n\t\"./rich-feed.vue\": 27542,\n\t\"./setting-check-box.vue\": 68286,\n\t\"./setting-color-box.vue\": 58197,\n\t\"./setting-combo-box.vue\": 71762,\n\t\"./setting-filter-editor.vue\": 69717,\n\t\"./setting-hotkey.vue\": 51461,\n\t\"./setting-radio-buttons.vue\": 72945,\n\t\"./setting-select-box.vue\": 92302,\n\t\"./setting-spacer.vue\": 80704,\n\t\"./setting-text-box.vue\": 54335,\n\t\"./setting-text.vue\": 98042,\n\t\"./socket-info.vue\": 16528,\n\t\"./tag-list-editor.vue\": 85910,\n\t\"./term-editor.vue\": 11879,\n\t\"./tooltip-tos.vue\": 4416\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 72153;","var map = {\n\t\"./faq.md\": [\n\t\t15450,\n\t\t7629\n\t],\n\t\"./feedback.md\": [\n\t\t31454,\n\t\t4164\n\t],\n\t\"./home.md\": [\n\t\t56539\n\t],\n\t\"./i18n.md\": [\n\t\t45974\n\t],\n\t\"./legal.md\": [\n\t\t82134,\n\t\t204\n\t],\n\t\"./term-syntax.md\": [\n\t\t98658,\n\t\t8163\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__.t(id, 1 | 16);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 94821;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./bits_button.js\": 24531,\n\t\"./bttv_compat.js\": 11746,\n\t\"./channel.jsx\": 74756,\n\t\"./chat/index.js\": 6172,\n\t\"./compat_emote_menu.js\": 6325,\n\t\"./css_tweaks/index.js\": 17103,\n\t\"./dashboard.js\": 95778,\n\t\"./directory/index.jsx\": 96432,\n\t\"./layout.js\": 68318,\n\t\"./loadable.tsx\": 34923,\n\t\"./menu_button.jsx\": 29333,\n\t\"./mod-view.jsx\": 94296,\n\t\"./player.jsx\": 63155,\n\t\"./sub_button.tsx\": 70052,\n\t\"./theme/index.js\": 24020,\n\t\"./video_chat/index.jsx\": 4948\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 41152;"],"names":["HIDDEN_CATEGORIES","CATEGORIES","CATEGORY_SORT","SKIN_TONES","enable_replace_joiner","joiner","JOINER_REPLACEMENT","ZWD_REPLACEMENT","EMOJI_JOINER","IMAGE_PATHS","codepoint_to_emoji","cp","code","args","ctx","val","event","tries","data","r","err","cats","out","names","chars","raw","emoji","hydrate_emoji","name","vars","em","tone","vari","image","style","Emoji","provider","setting","key","deleted","value","validate","process","opts","profile","uses","source","last_site","last_call","parent","react","reactDom","munch","selector","timeout","el","resolve","reject","observer_name","call_id","timer","observer","selectors","i","d","BaseSite","STYLE_VALIDATOR","LEFT_CONTROLS","RIGHT_CONTROLS","HAS_COMPRESSOR","HAS_GAIN","SCROLL_I18N","SCROLL_OPTIONS","getNativeClipButton","container","wantsRMB","matchesEvent","has_rmb","rotateButton","target","icon","inst","min","max","cls","instances","events","Mousetrap","e","t","old_attach","old_active","old_inactive","cont","icons","ds","player","state","video","vol_scroll","gain_scroll","click_pause","wants_rmb","muted","no_vol","matches_gain","matches_vol","delta","has_gain","doing_gain","amount","old_volume","volume","fs","pip","immediatePause","font_out","font_size","font_family","processed","unloader","btn","n","visible_only","outer","gain","tip","tipcont","input","extra","fill","on_change","core","range","width","has_comp","comp_active","can_apply","label","new_vid","vol","vid","compressed","wanted","want_gain","comp","src","evt","update_gui","pbrate","installProperty","rate","is_fs","has_pip","thing","pip_active","pip_swap","has_clip_button","on_click","native","disabled","has_reset","duration","position","keys","user","timers","refresh_fn","created","channel_id","cache","s","f","id","error","waiters","pair","PlayerBase","Requires","regex_cache","getRequireRegex","NAMES","HARD_MODULES","last_muncher","errored","attempts","possibilities","chunk","chunk_ids","modules","x","res","require","fn","mod_id","original_module","predicate","k","chunks","multi","cs","matched","c","mod","ids","chunk_pred","checked","module","ret","check","reqs","banned","str","name_match","regex","match","bits","limit","exports","req","start_time","time","loader","builder","_","m","pos","mods","WebMunch","routes","remove","wrapper","ElementalWrapper","route","watcher","now","lw","min_timeout","muts","mutations","ensure_live","Elemental","elemental_id","elemental","matches","els","element","remove_check","PubSubEvent","instance","msg","raw_topic","idx","prefix","trail","client","orig_message","orig_on","orig_off","topic","has_topic","message","Subpump","sb","store","updates","node","update_size","update_fullscreen","current","params","translation","history","session","Twilight","CALCULATE_BITS","VEND_CORE","CHAT_CHUNK","old_render","BitsButton","CHAT_EVENTS","settings","waiter","button","BTTVCompat","USER_PAGES","tt","login","want_links","nvc","vel","report","link","anchor","props","watching","make_link","text","a","channel","game","title","cb","root","j","color","parsed","no_promise","Channel","SCROLL_EVENTS","last_id","old_use","act","React","createElement","old_catch","info","errs","auto","handler","children","scroller","offset","scrolled_up","old_resume","step","old_time","scroll_content","target_top","difference","smoothAnimation","current_time","current_step","scroll_top","next_top","should_pause","was_outside","keys_updated","since","mode","reason","to_remove","removable","Scroller","ERROR_IMAGE","refresh","to_wait","then","url","reasons","doc","player_state","description","desc","content","tooltip","RichContent","SUB_TIERS","current_user","room","tokens","has_message","digits","is_bits","reward","cost","months","plan","tier","has_multi","sub_msg","mystery","expanded","sub_list","the_list","include_chat","include_whisper","include_video","messages","types","lines","line","u","FFZRichContent","is_action","action_style","action_italic","action_color","raw_color","contents","override_name","show","old_show","old_render_author","room_id","user_block","source_id","in_source","override_mode","mod_mode","deleted_count","current_room","is_in_source","source_room","reply_mode","has_replies","can_replies","can_reply","target_user","fe","notice","klass","bg_css","type","anim_hover","mod_action","show_mode","action","highlight_tags","hl_position","tag","reply_tokens","is_giant_emote","rich_content","giant_emote","username","user_class","want_source_tip","user_props","timestamp","reply_token","twitch_highlight","is_raw","want_ts","actions","hover_actions","e2","ext","token","clear_tokens","clear_badges","ChatLine","old_universal","raw_badges","is_intl","badges","badge","child","b","bd","ffz","after","super_parent","page","SettingsMenu","TIERS","TONE_EMOJI","scrollIntoView","height","el_height","el_top","maybe_date","COLLATOR","EMOTE_SORTERS","a_n","b_n","sort_sets","a_sk","b_sk","rebuild","base","emoji_size","sheet_count","sheet_size","sheet_pct","storage","pick","tones","emoji_x","emoji_y","x_pct","y_pct","toned","ref","collapsed","hidden","emote_set","emote","postfix","effects","is_prefix","set_id","filtered","visibility","show_heading","calendar","renews","ends","show_sources","lock","emotes","locked","emote_lock","sellout","modifiers","has_modifiers","animated","srcSet","locks","has_ffz","doClear","clearTooltips","padding","changed","active","entry","intersecting","old_inst","tab","sets","set","force","emote_sets","old_state","visibility_control","filtering","hidden_sets","filter","emote_name","emote_lower","term_lower","has_colon","term_trail","emoji_favorites","favorites","tone_choices","categories","is_fav","has_tone","cat","all","sorter","sort_tiers","sort_emotes","a_val","b_val","result","products","local_sets","is_following","follower_locked","follower_sets","local","emote_map","twitch_favorites","twitch_hidden","twitch_seen","bits_unlocked","grouped_sets","set_ids","int_id","owner","is_follower","is_points","chan","set_data","is_current_bits","sort_key","section","order","mapped","modes","new_id","new_name","overridden","replacement","animSrc","animSrcSet","unlockable_emotes","lock_set","seen","product","seen_bits","summary","wants_resub_info","wants_plan_info","has_new_effects","unlocked_effects","me","use_effect_tab","ffz_room","ffz_subs","ffz_global","seen_sets","seen_favorites","global_set_ids","unlocked","added","host_id","source_name","fav_key","known_favs","known_hidden","seen_favs","pdata","resub","old_props","cd","old_cd","cd_diff","ed","old_ed","ed_diff","loading","no_tabs","is_emoji","is_favs","is_effect","whisper","prices","gw_plan","cursor","nodes","curr_nodes","has_next_page","curr_cursor","EmoteMenu","locale","localeCaseInsensitive","NO_MATCH","MATCH_ANY","NON_PREFIX_MATCH","CASE_INSENSITIVE_PREFIX_MATCH","EXACT_PREFIX_MATCH","getNodeText","getNodeOffset","path","pidx","p","enabled","frag","above","chat_input","mut","emote_id","raw_id","raw_idx","anim","w","h","originalOnKeyDown","originalOnMessageSend","old_resize","old_componentDidUpdate","item","editor","sel","first","second","start","end","unknown","index","commands","sorted","cmd","arg","selection","channel_login","added_emotes","pressedTab","term","limitResults","results","ffz_emotes","preferFavorites","canBeTriggeredByTab","prioritizePrefixMatches","aStr","bStr","aIsEmoji","bIsEmoji","aStartsWithInput","bStartsWithInput","aStartsWithInputCI","bStartsWithInputCI","has_hidden","hidden_emotes","emoteMatchingType","results_usage","results_starting","results_other","search","match_type","included","favorite","user_id","user_login","source_line","Input","ViewerCards","MESSAGE_TYPES","MOD_TYPES","AUTOMOD_TYPES","UNBLOCKABLE_TYPES","CHAT_TYPES","NULL_TYPES","INLINE_CALLOUT_TYPES","CALLOUT_TYPES","UNBLOCKABLE_CALLOUTS","MISBEHAVING_EVENTS","type_map","v","is_dark","contrast","ic","chat_dark","chat_color","text_dark","chat_text","action_size","hover_action_size","ts_size","size","emote_alignment","lh","hover_action_icon","hover_action_padding","font","ct","callouts","changes","msg_ids","msg_id","old_aq","old_bits","service","ctm","blocked","contextMenuProps","onPin","old_handle_join","raid_id","leave","bigger","highlights","stack","StackMod","CalloutMod","dispatch","old_clear","old_flush","old_mount","old_handle","old_set","api","mod_types","mat","paused","max_size","count","buffer","removed","last","raw_delay","delay","see_deleted","has_newer","do_remove","want_event","buffered","old_handler","old_send","addMessage","sendMessage","subcmd","original","old_announce","old_sub","old_pinned","old_resub","mysteries","old_subgift","old_communityintro","old_anonsubgift","old_submystery","old_anonsubmystery","old_ritual","old_points","old_add","original_msg","flags","clear_mod","chat","config","new_bits","formatBitsConfig","new_buffer","unexpected","badges_updated","d2","shared","ocs","bs","obs","rules","ChatHook","tier_colors","new_act","images","theme","themed","stat","scale","im","ak","doesRewardCostBits","isAutomaticReward","isCustomReward","isHighlightedReward","isGiantEmoteReward","isMessageEffect","getRewardCost","getRewardColor","getRewardTitle","i18n","CompatEmoteMenu","CLASSES","reruns","recs","friends","scope","CSSTweaks","Dashboard","category","ffz_buttons","buttons","block_btn","block_label","hidden_btn","hidden_label","update_block","blocked_games","update_hidden","hidden_games","update_func","values","Game","CARD_CONTEXTS","CONTENT_FLAGS","formatTerms","DIR_ROUTES","blur","old_should_render","tags","bad_tag","bad_tags","should_hide","hide_container","for_exp","tracking","need_flags","show_flags","blur_flags","block_flags","filter_flags","has_flags","blur_tag","blur_tags","lname","should_blur","flag","regexes","should_create","created_at","up_since","uptime","up_text","optionalFn","Directory","PORTRAIT_ROUTES","MINIMAL_ROUTES","cards","card","stream","rerun","offline","Layout","addons","use_markdown","length","toast","elapsed","remaining","progress_bar","md","percentage","is_sunlight","toast_el","is_squad","is_mod","user_stuff","toasts","pill","extra_pill","before","live","destroy","profiles","toggle","desc_key","menu","MenuButton","bcast","ModView","PLAYER_ROUTES","Player","BAD_ROUTES","COLORS","NO_AUTO_DARK","NO_FORCED_COLOR","ACCENT_COLORS","hsla","luma","dark","alpha","colors","accent_out","accent_bits","background","wanted_theme","accent","tooltip_bg","tooltip_dark","tooltip_text","has_tt_text","chat_bits","chat_background","chat_accent","chat_accent_bits","enable","has_forced","ThemeEngine","SUB_REGEX","parseParamInt","param","context","reply","system_msg","raw_months","cumulative_months","share","prime","user_bits","main_message","hide_timestamps","highlight","author","comment","new_badges","old_badges","new_room_badges","old_room_badges","VideoChatHook","ApolloEvent","GQLError","web_munch","host","proto","old_qm_get","query","optimistic","prev","raw_name","old_qm_init","ApolloLink","operation","forward","request","has_listeners","qm","id_map","query_map","modified","q","qs","response","modifier","pre","retry_wait","passed","Apollo","MD","MILA","_md","loadMD","waited","SettingsLinks","default_render","options","env","self","href","attr","tok","awaitMD","getMD","callback","cmp","FFZWrapper","th","existing","Loadable","should_show","post","SubButton","hue2rgb","bit2linear","linear2bit","g","other","ignoreAlpha","Color","l","y","R","G","B","HSVAColor","HSLAColor","XYZAColor","cvd","cvd_a","cvd_b","cvd_c","cvd_d","cvd_e","cvd_f","cvd_g","cvd_h","cvd_i","L","M","S","RR","GG","BB","RGBAColor","mid","z","deltaGammaFactor","uDeltaGamma","vDeltagamma","Y","X","Z","LUVAColor","yGamma","deltaDivider","deltaFactor","uDelta","vDelta","lum","throw_errors","rgb","luv","hsl","ColorAdjuster","location","parts","part","letter","spacer","domain","state_fn","score","total","FineRouter","max_depth","traverse_roots","criteria","depth","parent_node","single_class","parents","crit","criterias","crt","FineWrapper","Fine","EVENTS","fine","insts","_instances","o_mount","o_unmount","mount","unmount","priority","prepend","ttl","last_z","getDialogNextZ","maximized","visible","old_container","Dialog","ATTRS","BOOLEAN_ATTRS","camelCase","on","obj","listener","off","findReactFragment","visited","lk","prop","setChildren","no_sanitize","no_empty","hasSharedParent","openFile","contentType","multiple","resolved","files","readFile","file","encoding","reader","sanitize","block","ManagedStyle","ClickOutside","highlightJson","object","pretty","indent","indent_inner","KNOWN_FONTS","VALID_FONTS","GOOGLE_FONTS","LOADED_GOOGLE","LOADED_GOOGLE_LINKS","loadGoogleFont","unloadGoogleFont","OD_FONTS","od_count","od_link","loadOpenDyslexic","unloadOpenDyslexic","getFontsList","useFont","unloaded","MERGE_METHODS","mergeList","merge","has_operation","a_names","getBuster","resolution","duration_to_string","separate_days","days_only","no_hours","no_seconds","seconds","minutes","hours","days","day_count","show_hours","print_duration","durationForChat","durationForURL","variables","mutation","items","needle","a_match","b_match","message_id","disable_notifications","logins","promises","id_set","login_set","poll_id","choices","edges","edge","TwitchData","unique","defs","def","collectFragmentReferences","refs","definitionRefs","findOperation","oneQuery","operationName","newDoc","opRefs","allRefs","newRefs","refName","prevRefs","childRefs","childRef","op","render","_vm","_h","_c","$event","staticRenderFns","component","$$a","$$el","$$c","$$v","$$i","$$selectedVal","prof","DUR_MATCH","MULTIPLIERS","durationToSeconds","dur","unit","multiplier","script","o","disp","key_out","ap","addon","list","JSZip","blobs","loaded_blobs","safe_key","blob","vals","new_val","this_id","sec","sortBadges","an","bn","control","commit","TITLE_MATCH","SETTING_REGEX","CHANGE_REGEX","ISSUE_REGEX","linkify","repo","space","number","old_commit","title_nav","version","sections","date","has_content","last_bit","trimmed","segments","bit","ltitle","nav","today","last_commit","until","resp","preset","contexts","okay","VIDEOS","sample","para","IGNORE_COMMANDS","LOADED_SAMPLES","has_loaded_samples","samples","is_custom","conn","msgs","log_msg","log_colors","missing","exp","CODES","rarity","group","a_use","b_use","a_r","b_r","groups","rule","to","from","dragged","slot","BAD_KEYS","queries","map","guessNameFromDocument","tk","addon_module","new_out","week_ago","is_new","is_updated","copy","prov","STOCK_URLS","stuff","tips","examples","resolvers","example","resolver","urls","raw_value","custom","VALID_FLAGS","new_profile","tabs","latest","is_walking","new_item","findLastVisible","findNextVisible","modal","recursiveExpand","vue","profile_data","allow_update","indexOf","kids","top","bottom","scroll_bottom","providers","transfers","current_group","classes","INFO_BLOCKS","formatNumber","STAT_BLOCKS","socket","fmt","adding","mon","router","i18n_key","webpackContext","webpackContextResolve","__webpack_require__","webpackAsyncContext"],"sourceRoot":""}