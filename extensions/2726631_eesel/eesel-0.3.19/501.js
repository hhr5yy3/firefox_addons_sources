(globalThis.webpackChunk_eesel_app=globalThis.webpackChunk_eesel_app||[]).push([[501],{93715:(e,t,n)=>{var r=n(94182).w_;e.exports.L=function(e){return r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"}},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"}}]})(e)}},12454:(e,t,n)=>{var r=n(94182).w_;e.exports.n=function(e){return r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}}]})(e)}},16280:(e,t,n)=>{var r=n(94182).w_;e.exports.FiX=function(e){return r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}},94182:(e,t,n)=>{"use strict";n.d(t,{w_:()=>i});var r=n(30130),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.createContext&&r.createContext(o),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)};function c(e){return e&&e.map((function(e,t){return r.createElement(e.tag,l({key:t},e.attr),c(e.child))}))}function i(e){return function(t){return r.createElement(u,l({attr:l({},e.attr)},t),c(e.child))}}function u(e){var t=function(t){var n,o=e.attr,a=e.size,c=e.title,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["attr","size","title"]),u=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,i,{className:n,style:l(l({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&r.createElement("title",null,c),e.children)};return void 0!==a?r.createElement(a.Consumer,null,(function(e){return t(e)})):t(o)}},8472:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Banner=void 0;const r=n(3974),o=(0,r.__importDefault)(n(30130)),a=n(16280),l=n(41473),c=n(78042),i=n(73081),u=n(16839);t.Banner=e=>{var{children:t,closeText:n,icon:a,onCloseClick:c}=e,i=(0,r.__rest)(e,["children","closeText","icon","onCloseClick"]);return o.default.createElement(l.x.div,Object.assign({alignItems:"center",backgroundColor:"primary",borderRadius:"1.5rem",boxShadow:"banner",color:"white",display:"flex",justifyContent:"left",px:"1.5rem",py:"0.75rem",w:"100%"},i),o.default.createElement(s,{icon:a}),o.default.createElement(l.x.div,{display:"flex",flexDirection:{_:"column",md:"row"}},t),o.default.createElement(d,{onClick:c},n))};const s=({icon:e})=>{return e?(null==(t=e)?void 0:t.value)&&(null==t?void 0:t.label)?o.default.createElement(l.x.span,{"aria-label":e.label,mr:"1rem",role:"img",w:"1rem"},e.value):o.default.createElement(i.Icon,{color:"white",component:e,flexShrink:0,h:"1rem",mr:"1rem",w:"1rem"}):null;var t},d=({onClick:e,children:t})=>t?o.default.createElement(u.ButtonSecondary,{"aria-label":"Close",color:"white",marginLeft:"auto",onClick:e},t):o.default.createElement(c.ButtonIcon,{"aria-label":"Close",backgroundColor:"transparent",component:a.FiX,iconColor:"white",marginLeft:"auto",onClick:e})},78042:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonIcon=void 0;const r=n(3974),o=(0,r.__importDefault)(n(30130)),a=n(58231),l=n(73081);t.ButtonIcon=o.default.forwardRef(((e,t)=>{var{backgroundColor:n,component:c,iconColor:i="onBG"}=e,u=(0,r.__rest)(e,["backgroundColor","component","iconColor"]);return o.default.createElement(a.Button,Object.assign({backgroundColor:n||{_:"transparent",focus:"highlight"},borderRadius:"1.25rem",px:"0.75rem",py:"0.75rem",ref:t,spinnerFill:"onBG",spinnerMarginTop:"1rem",spinnerStroke:"onBG"},u),u.loading?null:o.default.createElement(l.Icon,{backgroundColor:"transparent",color:i,component:c}))}))},16839:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonSecondary=void 0;const r=(0,n(3974).__importDefault)(n(30130)),o=n(58231);t.ButtonSecondary=r.default.forwardRef(((e,t)=>r.default.createElement(o.Button,Object.assign({borderRadius:"0.5rem",color:"primary",pl:"0rem",pr:"1.125rem",py:"0.625rem",ref:t,spinnerFill:"primary",spinnerStroke:"primary"},e))))},86246:(e,t)=>{"use strict";t.RJ=t.LO=void 0,t.LO="https://chrome.google.com/webstore/detail/eesel/jffaiidojfhflballoapgofphkadiono",t.RJ="https://addons.mozilla.org/en-US/firefox/addon/eesel/"},13501:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BannerFeedbackContainer:()=>L});var r=n(30130),o=n(79740),a=n(8330),l=n(6844),c=n(12530),i=n(90232),u=n(21743),s=n(93715),d=n(21178),m=n(41473),f=n(8472),p=n(78042),v=n(54221);const b=()=>{const{dirty:e,isSubmitting:t,submitForm:n,values:o}=(0,d.useFormikContext)(),a=function(e,t,n){var o=this,a=(0,r.useRef)(null),l=(0,r.useRef)(0),c=(0,r.useRef)(null),i=(0,r.useRef)([]),u=(0,r.useRef)(),s=(0,r.useRef)(),d=(0,r.useRef)(e),m=(0,r.useRef)(!0);(0,r.useEffect)((function(){d.current=e}),[e]);var f=!t&&0!==t&&"undefined"!=typeof window;if("function"!=typeof e)throw new TypeError("Expected a function");t=+t||0;var p=!!(n=n||{}).leading,v=!("trailing"in n)||!!n.trailing,b="maxWait"in n,g=b?Math.max(+n.maxWait||0,t):null;(0,r.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]);var h=(0,r.useMemo)((function(){var e=function(e){var t=i.current,n=u.current;return i.current=u.current=null,l.current=e,s.current=d.current.apply(n,t)},n=function(e,t){f&&cancelAnimationFrame(c.current),c.current=f?requestAnimationFrame(e):setTimeout(e,t)},r=function(e){if(!m.current)return!1;var n=e-a.current;return!a.current||n>=t||n<0||b&&e-l.current>=g},h=function(t){return c.current=null,v&&i.current?e(t):(i.current=u.current=null,s.current)},k=function e(){var o=Date.now();if(r(o))return h(o);if(m.current){var c=t-(o-a.current),i=b?Math.min(c,g-(o-l.current)):c;n(e,i)}},C=function(){var d=Date.now(),f=r(d);if(i.current=[].slice.call(arguments),u.current=o,a.current=d,f){if(!c.current&&m.current)return l.current=a.current,n(k,t),p?e(a.current):s.current;if(b)return n(k,t),e(a.current)}return c.current||n(k,t),s.current};return C.cancel=function(){c.current&&(f?cancelAnimationFrame(c.current):clearTimeout(c.current)),l.current=0,i.current=a.current=u.current=c.current=null},C.isPending=function(){return!!c.current},C.flush=function(){return c.current?h(Date.now()):s.current},C}),[p,b,t,g,v,f]);return h}(n,500);r.useEffect((()=>()=>{a.flush()}),[a]);const l=r.useRef((()=>{}));return r.useEffect((()=>{l.current=()=>{e&&!t&&a()}}),[a,e,t]),r.useEffect((()=>{l.current()}),[o]),null};var g=n(3974),h=n(12454),k=n(73081);const C=e=>{var{color:t,selected:n}=e,o=(0,g.__rest)(e,["color","selected"]);return r.createElement(k.Icon,Object.assign({color:t,component:h.n,fill:n?t:void 0},o))},y=({color:e="onBG",count:t=5,disabled:n,onChange:o,value:a=1})=>{const[{left:l,width:c},i]=r.useState({left:0,width:0}),[u,s]=r.useState(0),d=r.useRef(null);r.useEffect((()=>{var e;const{left:t,width:n}=(null===(e=d.current)||void 0===e?void 0:e.getBoundingClientRect())||{left:0,width:0};i({left:t,width:n})}),[]);const f=r.useCallback((()=>{s(0)}),[]),p=r.useCallback((e=>{n||s(Math.floor((e.pageX-l)*t/c)+1)}),[t,n,c,l]),v=r.useCallback((()=>{!n&&o&&o(u)}),[n,u,o]);return r.createElement(m.x.div,{alignItems:"center",color:e,cursor:"pointer",display:"inline-flex",margin:"-0.2rem",onClick:v,onMouseLeave:f,onMouseMove:p,opacity:{disabled:n?.5:void 0},ref:d},Array.from(new Array(t)).map(((t,n)=>r.createElement(m.x.div,{key:n,padding:"0.2rem"},r.createElement(C,{color:e,selected:u?n+1<=u:n+1<=a})))))};var w=n(86246);const E=r.forwardRef(((e,t)=>r.createElement(m.x.div,Object.assign({alignItems:{md:"center"},display:"flex",flexDirection:{_:"column",md:"row"},ref:t},e)))),x=u.default.div`
  align-items: center;
  display: flex;
  padding-right: 2rem;
`,_=({disabled:e})=>{const[{value:t},,{setValue:n}]=(0,d.useField)("rating");return r.createElement(y,{color:"onPrimary",count:5,disabled:e,onChange:n,value:t})},S=({onSubmit:e,onCloseClick:t})=>{const[n]=r.useState((()=>({rating:0}))),o=r.useCallback((async({rating:t})=>{e&&await e({payload:t,step:1})}),[e]);return r.createElement(f.Banner,{icon:{label:"wave",value:"ðŸ‘‹"},onCloseClick:t},r.createElement(d.Formik,{initialValues:n,onSubmit:o},(({isSubmitting:e,handleSubmit:t})=>r.createElement(d.Form,{onSubmit:t},r.createElement(b,null),r.createElement(E,null,r.createElement(x,null,"How do you like eesel so far?"),r.createElement(x,null,r.createElement(_,{disabled:e})))))))},B=({onSubmit:e,onCloseClick:t})=>{const[n]=r.useState((()=>({response:""}))),o=r.useCallback((async({response:t})=>{e&&await e({payload:t,step:2})}),[e]);return r.createElement(f.Banner,{icon:{label:"high-five",value:"ðŸ™Œ"},onCloseClick:t},r.createElement(d.Formik,{initialValues:n,onSubmit:o},(({values:e,handleChange:t})=>r.createElement(d.Form,{style:{width:"100%"}},r.createElement(E,null,r.createElement(x,null,"Thanks! Anything you'd like to add?"),r.createElement(x,{style:{flexGrow:1}},r.createElement("div",{style:{display:"flex",margin:"-0.5rem",width:"100%"}},r.createElement(x,{style:{flexGrow:1}},r.createElement(v.Input,{autoFocus:!0,backgroundColor:"white",color:"dark",h:"2rem",name:"response",onChange:t,placeholder:"Your comment...",style:{margin:"-.5rem 0",width:"100%"},value:e.response})),r.createElement(x,null,r.createElement(p.ButtonIcon,{backgroundColor:{_:"transparent",focus:"rgba(0, 0, 0, 0.08)",hover:"rgba(0, 0, 0, 0.08)"},component:s.L,iconColor:"white",style:{margin:"-0.5rem 0"},type:"submit"})))))))))},F=({onCloseClick:e})=>r.createElement(f.Banner,{icon:{label:"ok",value:"ðŸ‘Œ"},onCloseClick:e},"Thank you so much for that!"),j=({onCloseClick:e})=>{const t=w.RJ;return r.createElement(f.Banner,{icon:{label:"raising hands",value:"ðŸ™Œ"},onCloseClick:e},r.createElement(E,{alignItems:{md:"self-start"},flexDirection:{_:"column"}},r.createElement(E,null,"If you're liking eesel, the best way to support us is to leave a\n          review on the Firefox store. It really helps us out!"),r.createElement(E,null,r.createElement(m.x.a,{color:"white",fontWeight:600,href:t,marginTop:".3rem",target:"_blank",textDecoration:"none"},"Leave review"))))},O=({onCloseClick:e,onSubmit:t})=>{const[n,o]=r.useState(1),[a,l]=r.useState(!1),i=r.useCallback((async e=>{try{t&&(l(1===e.step&&5===e.payload),await t(e)),a||o(e.step+1)}catch(e){(0,c.H)(e)}}),[t,a]);return 1===n?r.createElement(S,{onCloseClick:e,onSubmit:i}):a?r.createElement(j,{onCloseClick:e}):2===n?r.createElement(B,{onCloseClick:e,onSubmit:i}):r.createElement(F,{onCloseClick:e})},R=o.Ps`
  mutation BannerFeedbackUserUpdateMutation($input: UserInput!) {
    userUpdate(input: $input) {
      id
    }
  }
`,I=o.Ps`
  mutation CaptureUserFeedbackMutation($input: UserFeedbackInput!) {
    captureUserFeedback(input: $input) {
      success
    }
  }
`,L=()=>{const e=(0,l.k6)(),[t]=(0,a.D)(R),[n]=(0,a.D)(I);r.useEffect((()=>{const t=t=>{var n;"eesel:spotlight:hidden"===(null===(n=t.data)||void 0===n?void 0:n.type)&&e.push("/")};return window.addEventListener("message",t),()=>window.removeEventListener("message",t)}),[e]);const o=r.useCallback((async({step:e,payload:r})=>{1===e?(i.j("feedbackRating",{rating:r}),await t({variables:{input:{activity:{bannerFeedbackCloseCount:"+1"}}}}).catch(c.H)):2===e&&(i.j("feedbackResponse",{response:r}),await n({variables:{input:{context:"banner",feedback:r}}}).catch(c.H))}),[t,n]),u=r.useCallback((()=>{t({variables:{input:{activity:{bannerFeedbackCloseCount:"+1"}}}}).catch(c.H)}),[t]);return r.createElement(O,{onCloseClick:u,onSubmit:o})}}}]);