import{b as t}from"./browser-polyfill-BfqLb55p.js";async function e(){const e={injectedRecently:null,injectedRecentlyResetTime:null,isBrave:null,lastAttemptDeploymentEnrol:null,lastThrottledErrorsReset:null,mfaEnforcementDeferrals:null,throttledErrors:null};for(const[n,a]of Object.entries(e))if(null!==a){const e=await t.storage.local.get(n);void 0!==e[n]&&await t.storage.local.set({[a]:e[n]})}await t.storage.local.remove(Object.keys(e))}let n,a;async function s(e){return t.storage.managed.get(e).catch((()=>({})))}const r={hasManagedStorage:async function(){return void 0!==n||(n=await t.storage.managed.get([]).then((()=>!0)).catch((()=>!1))),n},get:s,getTeamToken:async function(){var t;if(void 0===a){const e=await s("token");a=null==(t=e.token)?void 0:t.trim()}return a}},o=new Map,c=new Map,i=new Map,l=new Map;function u(){for(const t of o.values())t.value=void 0;o.clear();for(const t of c.values())for(const e of Object.keys(t))delete t[e];c.clear();for(const t of i.values())t.clear();i.clear();for(const t of l.values())t.clear();l.clear()}function f(t){const e=o.get(t);if(e)return e.value=void 0,void o.delete(t);const n=c.get(t);if(n){for(const t of Object.keys(n))delete n[t];return void c.delete(t)}const a=i.get(t);if(a)return a.clear(),void i.delete(t);const s=l.get(t);s&&(s.clear(),l.delete(t))}async function y(...e){const n={},a=[];for(let t=0;t<e.length;++t){const s=e[t],r=o.get(s);void 0!==r?n[s]=r:a.push(s)}if(a.length>0){const e=await t.storage.local.get(a);for(let t=0;t<a.length;++t){const s=a[t],r={key:s,value:e[s]};o.set(s,r),n[s]=r}}return n}async function g(...e){const n={};for(let t=0;t<e.length;++t){const{key:a,value:s}=e[t];n[a]=s}return t.storage.local.set(n).catch((()=>{}))}async function d(e){for(const[t,n]of Object.entries(e)){const e=o.get(t);e&&(e.value=n)}return t.storage.local.set(e).catch((()=>{}))}async function h(e){const n=c.get(e);if(n)return{key:e,obj:n};const a=(await t.storage.local.get(e))[e]||{};return c.set(e,a),{key:e,obj:a}}async function p({key:e,obj:n}){return t.storage.local.set({[e]:n}).catch((()=>{}))}async function w(t,e){const n=c.get(t);if(n){for(const t of Object.keys(n))t in e?(n[t]=e[t],delete e[t]):delete n[t];for(const[t,a]of Object.entries(e))n[t]=a;return p({key:t,obj:n})}return p({key:t,obj:e})}async function m(e){const n=i.get(e);if(n)return{key:e,map:n};const a=await t.storage.local.get(e),s=new Map(Object.entries(a[e]||{}));return i.set(e,s),{key:e,map:s}}async function v({key:e,map:n}){if(n.size>0){const a=Object.fromEntries(n.entries());return t.storage.local.set({[e]:a}).catch((()=>{}))}return t.storage.local.remove(e).catch((()=>{}))}async function b(e){const n=l.get(e);if(n)return{key:e,set:n};const a=await t.storage.local.get(e),s=new Set(a[e]||[]);return l.set(e,s),{key:e,set:s}}async function k({key:e,set:n}){const a=Array.from(n);return t.storage.local.set({[e]:a}).catch((()=>{}))}async function j(...e){await t.storage.local.remove(e).catch((()=>{}));for(let t=0;t<e.length;++t)f(e[t])}async function _(e){return t.storage.local.set(e).catch((()=>{}))}const O={managed:r};class A{constructor(){this.listeners=[]}get export(){return this}get hasListeners(){return this.listeners.length>0}addListener(t){this.listeners.push(t)}removeListener(t){const e=this.listeners.indexOf(t);-1!==e&&this.listeners.splice(e,1)}dispatch(...t){for(const e of this.listeners)setTimeout((()=>e(...t)),0)}}const F=new A,x={onPropertyChanged:F.export};let B;async function D(){return(await h("settings")).obj}async function E(){const t=await D();return Object.keys(t).length>0}function M(t,e){if(t.length!==e.length)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}function T(t,e){const n=Object.keys(t),a=Object.keys(e);if(n.length!==a.length)return!0;for(let s=0;s<n.length;++s){const a=n[s],r=t[a],o=e[a];if(Array.isArray(r)&&Array.isArray(o)){if(M(r,o))return!0}else if("object"==typeof r&&null!==r&&"object"==typeof o&&null!==o){if(T(r,o))return!0}else if(r!==o)return!0}return!1}function C(t){B=t}async function R(){if(B){const t=structuredClone(await D()),e=structuredClone(B),n=await async function(t,...e){const n=await D(),a={};0===e.length&&(e=Object.keys(t));for(const s of e){const e=t[s],r=n[s];Array.isArray(e)&&Array.isArray(r)?a[s]=M(e,r):a[s]="object"==typeof e&&null!==e&&"object"==typeof r&&null!==r?T(e,r):e!==r}return a}(B,"appBanner","appBannerUrls","phishing","phishing_tool_detection","stolen_credentials","track_all_domains"),a=Object.keys(n);for(let s=0;s<a.length;++s){const r=a[s];n[r]&&F.dispatch(r,e,t)}await w("settings",B),B=void 0}}async function S(){return(await D()).banned_words||[]}async function L(){return(await D()).company_domains||[]}async function z(){return(await D()).feature_flags||[]}async function P(){return(await D()).platform_domains||{}}async function U(){return(await D()).ignore_reused_password_groups||[]}async function q(){return(await D()).track_all_domains||!1}async function G(t){var e;return null==(e=(await D()).appBanner)?void 0:e[t]}async function H(){return(await D()).appBannerUrls}async function I(){const t=await D(),{tempDisabledSite:e}=await y("tempDisabledSite");return{domains:t.excluded_domains||[],tempDomain:e.value}}async function J(){return(await D()).phishing||{mode:"OFF"}}async function K(){return(await D()).phishing_tool_detection||{mode:"OFF"}}async function N(){var t;return(null==(t=(await D()).blocked_urls)?void 0:t.urls)||[]}async function Q(){var t,e;const n=await D();return{title:null==(t=n.blocked_urls)?void 0:t.title,subtext:null==(e=n.blocked_urls)?void 0:e.subtext}}async function V(){return(await D()).stolen_credentials||{credentials:[],mode:"OFF"}}async function W(){var t,e;const n=await D();return{marker:null==(t=n.session_theft)?void 0:t.marker,urls:(null==(e=n.session_theft)?void 0:e.urls)||[]}}async function X(){return(await D()).cloned_login_page_detection||{mode:"OFF"}}async function Y(){return(await D()).mfa_enforcement}export{P as A,b as B,k as C,I as D,R as E,C as F,w as G,z as H,_ as I,V as J,Q as K,A as P,G as a,H as b,J as c,K as d,X as e,h as f,L as g,p as h,Y as i,e as j,y as k,m as l,g as m,S as n,U as o,O as p,r as q,j as r,x as s,d as t,E as u,q as v,v as w,u as x,N as y,W as z};
