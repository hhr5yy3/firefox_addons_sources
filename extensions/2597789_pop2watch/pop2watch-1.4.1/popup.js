(()=>{"use strict";var e,s={4064:(e,s,t)=>{var n=t(5328),o=t(7856),i=t.n(o),r=t(1264),a=t(5712);const l=t(6604).WU,c="true"==="MISSING_ENV_VAR".INCLUDE_SANDBOX||!1,u={name:"Pop2Watch",link:"https://www.pop2watch.com"},f={defaultsOptions:{allowCrashReportsData:!0,allowInteractionData:!0,allowLinksData:!0},async getOptions(){const e=await browser.storage.local.get("options"),s=e&&e.options?e.options:{};return Object.assign(this.defaultsOptions,s)},async setOptions(e){await browser.storage.local.set({options:e})},async setOptionsSubset(e){const s={...await this.getOptions(),...e};await browser.storage.local.set({options:s})}};function p(e){return e.replace(/(webpack_require__@)?(moz|chrome)-extension:\/\/[^/]+\//,"~/")}r._6({dsn:"https://00d9ac9a56864b7ca1249f6471f70ea2@o371740.ingest.sentry.io/5185201",release:l}),a.u6(null),a.rr("user",null),a.SA((e=>{e.addEventProcessor((async e=>(e.culprit&&(e.culprit=p(e.culprit)),e.exception&&e.exception.values&&e.exception.values[0]&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames&&(e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames.map((e=>(e.filename=p(e.filename),e)))),e)))}));const d={canCapture:()=>!0,handleException(e){if(this.isErrorIgnored(e))return void console.log(e);if(!(e instanceof Error))return void this.handleMessage(JSON.stringify(e));const s=this.canCapture();f.getOptions().then((t=>{t.allowCrashReportsData&&(s?a.wx(e):console.log(e))})).catch((e=>console.log("_handleException",e)))},handleMessage(e){const s=this.canCapture();f.getOptions().then((t=>{t.allowCrashReportsData&&(s?a.yi(e):console.log(e))})).catch((e=>console.log("_handleMessage",e)))},handleTabAccessError(e,s){e.message||this.handleMessage(s+" : "+JSON.stringify(e)),e.message.includes("No current window")||e.message.includes("shutting")||e.message.includes("No tab")||e.message.includes("Invalid tab")||e.message.includes("closed")||e.message.includes("dead object")||e.message.includes("permission")||e.message.includes("extensions gallery")||console.log(s+" [tabs] : "+e.message)},isErrorIgnored:e=>!!(e.message&&(e.message.includes("Network Error")||e.message.includes("IO error: .../LOCK")||e.message.includes("An unexpected error occurred")&&""===e.stack))};t.g.browser=i();const b={install:(e,s)=>{e.config.errorHandler=(e,s,t)=>{d.handleException(e)},e.config.globalProperties.$t=i().i18n.getMessage}};var g=t(6760),h=t(8752);const m={class:"jumbotron pt-1 pb-3 mb-0",id:"body"},w={class:"list-group"},v={id:"subscribeButton",href:"#subscriptions-info","data-toggle":"collapse",class:"list-group-item list-group-item-action active collapsed"},y=(0,g.QD)("img",{class:"extension-icon chevron-down float-right",src:"images/chevron-down-solid.svg",alt:"hide"},null,-1),O=(0,g.QD)("img",{class:"extension-icon chevron-right float-right",src:"images/chevron-right-solid.svg",alt:"show"},null,-1),A={class:"list-group collapse",id:"subscriptions-info"},S={class:"list-group-item w-100"},W={class:"list-group-item d-flex justify-content-between align-items-center"},D={class:"float-right"},E=[(0,g.QD)("img",{class:"extension-icon",src:"images/cone-striped.svg",alt:"sandbox",title:"Sandbox"},null,-1)],k=[(0,g.QD)("img",{class:"extension-icon",src:"images/gear.svg",alt:"options",title:"Options"},null,-1)],x={class:"jumbotron mb-0 p-4",id:"header"},_=[(0,g.QD)("img",{src:"images/icon128.png",class:"ml-4 float-left",style:{width:"80px",height:"80px"},alt:"icon"},null,-1),(0,g.QD)("h2",{id:"popTitle"},[(0,g.mY)("Pop"),(0,g.QD)("span",{style:{"font-size":"1.3em"}},"2"),(0,g.mY)("watch")],-1)];var z=t(8152);const Q={},N=(0,z.c)(Q,[["render",function(e,s){return(0,g.Wz)(),(0,g.An)("div",x,_)}]]),C={class:"card bg-light"},T={class:"card-header"},B={key:0},I={key:1,style:{float:"left",width:"100%"}},R={class:"card-body"},L={class:"d-inline"},j=["href"],U={data:function(){return{website:u}}},$={components:{Websites:(0,z.c)(U,[["render",function(e,s,t,n,o,i){return(0,g.Wz)(),(0,g.An)("div",L,[(0,g.QD)("span",null,[(0,g.QD)("a",{href:e.website.link,target:"_blank"},(0,h.WA)(e.website.name),9,j)])])}]])},props:{hasSubscriptions:{type:Boolean,default:!1}}},Y=(0,z.c)($,[["render",function(e,s,t,n,o,i){const r=(0,g.E1)("websites");return(0,g.Wz)(),(0,g.An)("div",C,[(0,g.QD)("div",T,[t.hasSubscriptions?((0,g.Wz)(),(0,g.An)("h5",I,(0,h.WA)(e.$t("wouldYouLikeToSubscribe")),1)):((0,g.Wz)(),(0,g.An)("h4",B,(0,h.WA)(e.$t("noSubscriptionYet")),1))]),(0,g.QD)("div",R,[(0,g.QD)("span",null,(0,h.WA)(e.$t("goToOneOfTheseSitesToSubscribe")),1),(0,g.mY)(),(0,g.K2)(r)])])}]]),M={class:"card bg-light"},P={class:"card-header"},K=["href"],F=["data-target"],V=["id"],H={key:0},Z=(0,g.QD)("br",null,null,-1),J={class:"text-muted mb-2"},q={props:{subscription:Object}},G=(0,z.c)(q,[["render",function(e,s,t,n,o,i){return(0,g.Wz)(),(0,g.An)("h5",null,[(0,g.mY)((0,h.WA)(t.subscription.title)+" ",1),t.subscription.season?((0,g.Wz)(),(0,g.An)("span",H,[Z,(0,g.QD)("small",J,(0,h.WA)(e.$t("season"))+" "+(0,h.WA)(t.subscription.season),1)])):(0,g.g1)("",!0)])}]]),X={key:0},ee={key:1},se={key:2},te={class:"list-group"},ne={class:"list-group-item d-flex justify-content-between align-items-center"},oe=["href"],ie={props:{offer:Object},computed:{offerDetails:function(){return this.offer&&this.offer.offers?this.offer.offers:[]}}},re={value:null},ae=["value"],le={key:0,class:"list-group"},ce={class:"list-group-item d-flex justify-content-between align-items-center"},ue=["href"],fe={props:{offer:Object},data:function(){return{episodeSelector:null}},computed:{episodesOffers:function(){return this.offer&&this.offer.offers?this.offer.offers.sort(((e,s)=>e.episode-s.episode)):[]}},methods:{offerDetailsByEpisode:function(e){const s=this.offer.offers.find((s=>s.episode===e));return null!==s?s.offers:[]}}},pe={components:{OfferDetailsMovie:(0,z.c)(ie,[["render",function(e,s,t,n,o,i){return(0,g.Wz)(),(0,g.An)("ul",te,[((0,g.Wz)(!0),(0,g.An)(g.ae,null,(0,g.mi)(i.offerDetails,(e=>((0,g.Wz)(),(0,g.An)("li",ne,[(0,g.QD)("a",{href:e.url,target:"_blank"},(0,h.WA)(e.provider_slug),9,oe)])))),256))])}]]),OfferDetailsTv:(0,z.c)(fe,[["render",function(e,s,t,o,i,r){return(0,g.Wz)(),(0,g.An)("div",null,[(0,g.wt)((0,g.QD)("select",{class:"custom-select","onUpdate:modelValue":s[0]||(s[0]=s=>e.episodeSelector=s)},[(0,g.QD)("option",re,(0,h.WA)(e.$t("Episode"))+"...",1),((0,g.Wz)(!0),(0,g.An)(g.ae,null,(0,g.mi)(r.episodesOffers,(s=>((0,g.Wz)(),(0,g.An)("option",{value:s.episode},(0,h.WA)(e.$t("Episode"))+" "+(0,h.WA)(s.episode),9,ae)))),256))],512),[[n.Ip,e.episodeSelector]]),null!==e.episodeSelector?((0,g.Wz)(),(0,g.An)("ul",le,[((0,g.Wz)(!0),(0,g.An)(g.ae,null,(0,g.mi)(r.offerDetailsByEpisode(e.episodeSelector),(e=>((0,g.Wz)(),(0,g.An)("li",ce,[(0,g.QD)("a",{href:e.url,target:"_blank"},(0,h.WA)(e.provider_slug),9,ue)])))),256))])):(0,g.g1)("",!0)])}]])},props:{offer:Object},computed:{isTvShow:function(){return this.offer&&this.offer.season},isEmpty:function(){return this.offer&&this.offer.offers&&this.offer.offers.length<1},isLoading:function(){return!(this.offer&&this.offer.offers)},hasOffers:function(){return this.offer&&this.offer.offers&&this.offer.offers.length>0}}},de={components:{Offer:(0,z.c)(pe,[["render",function(e,s,t,n,o,i){const r=(0,g.E1)("offer-details-tv"),a=(0,g.E1)("offer-details-movie");return(0,g.Wz)(),(0,g.An)("div",null,[i.isLoading?((0,g.Wz)(),(0,g.An)("div",X,[(0,g.QD)("h6",null,(0,h.WA)(e.$t("offersBeingImported")),1)])):(0,g.g1)("",!0),i.isEmpty?((0,g.Wz)(),(0,g.An)("div",ee,[(0,g.QD)("h6",null,(0,h.WA)(e.$t("noAvailableOfferForThisTitle")),1)])):(0,g.g1)("",!0),i.hasOffers?((0,g.Wz)(),(0,g.An)("div",se,[i.isTvShow?((0,g.Wz)(),(0,g.Az)(r,{key:0,offer:t.offer},null,8,["offer"])):((0,g.Wz)(),(0,g.Az)(a,{key:1,offer:t.offer},null,8,["offer"]))])):(0,g.g1)("",!0)])}]]),SubscriptionTitle:G},props:{subscription:Object,offer:Object},computed:{externalLink:function(){return"https://www.extreme-down.al"+this.subscription.path},identifier:function(){const e=this.subscription.id.toString();return this.subscription.season?e+this.subscription.season.toString():e}}},be=(0,z.c)(de,[["render",function(e,s,t,n,o,i){const r=(0,g.E1)("subscription-title"),a=(0,g.E1)("offer");return(0,g.Wz)(),(0,g.An)("div",M,[(0,g.QD)("div",P,[t.subscription.path?((0,g.Wz)(),(0,g.An)("a",{key:0,href:i.externalLink,target:"_blank"},[(0,g.K2)(r,{subscription:t.subscription},null,8,["subscription"])],8,K)):((0,g.Wz)(),(0,g.Az)(r,{key:1,subscription:t.subscription},null,8,["subscription"])),(0,g.QD)("button",{type:"button",class:"btn btn-outline-primary float-left","data-toggle":"collapse","data-target":"#offers_"+i.identifier},[(0,g.QD)("span",null,(0,h.WA)(e.$t("seeOffers")),1)],8,F),(0,g.QD)("button",{"data-role":"unsubscribe",type:"button",class:"btn btn-outline-danger float-right",onClick:s[0]||(s[0]=s=>e.$emit("unsubscribe",t.subscription))},[(0,g.QD)("span",null,(0,h.WA)(e.$t("remove")),1)])]),(0,g.QD)("div",{class:"card-body collapse",id:"offers_"+i.identifier},[(0,g.K2)(a,{offer:t.offer},null,8,["offer"])],8,V)])}]]),ge={async getStorageEngine(){let e=browser.storage.sync;try{await e.get("test")}catch(s){e=browser.storage.local}return e},async getSubscriptions(){const e=await this.getStorageEngine(),s=await e.get("followed");return s&&s.followed?s.followed:[]},async setSubscriptions(e){const s=await this.getStorageEngine();await s.set({followed:e})}},he={async getOffers(){const e=await browser.storage.local.get("synchronised");return e&&e.synchronised?e.synchronised:[]},async getLastSync(){const e=await browser.storage.local.get("last_sync");return e&&e.last_sync?e.last_sync:null},async setOffers(e,s){const t={synchronised:e};s&&(t.last_sync=s),await browser.storage.local.set(t)}},me=Object.freeze({SUBSCRIBE:"SUBSCRIBE",UNSUBSCRIBE:"UNSUBSCRIBE",SYNCHRONIZE:"SYNCHRONIZE",CLOSE_INSTALLED:"CLOSE_INSTALLED",DOWNLOAD_BLOB:"DOWNLOAD_BLOB",OPEN_TAB:"OPEN_TAB",TRACK_EVENT:"TRACK_EVENT",NOTIFY:"NOTIFY",ERROR:"ERROR"}),we={components:{Banner:N,Websites:Y,Subscription:be},data:function(){return{subscriptions:[],offers:[],showSandbox:c}},methods:{openOptions:async function(){browser.runtime.openOptionsPage?await browser.runtime.openOptionsPage():window.open(browser.runtime.getURL("options.html"))},openSandbox:async function(){window.open(browser.runtime.getURL("sandbox.html"))},unsubscribe:async function(e){await browser.runtime.sendMessage({channel:me.UNSUBSCRIBE,artwork:{...e}}),this.subscriptions=await ge.getSubscriptions()},offerForSubscription:function(e){const s=this.offers.find((s=>{return n=e,(t=s).id===n.id&&t.season===n.season;var t,n}));return s&&s.offers?s:null}},mounted:async function(){try{this.subscriptions=await ge.getSubscriptions(),this.offers=await he.getOffers(),await browser.runtime.sendMessage({channel:me.SYNCHRONIZE}),this.offers=await he.getOffers()}catch(e){console.log("_popup",e)}}},ve=(0,z.c)(we,[["render",function(e,s,t,n,o,i){const r=(0,g.E1)("banner"),a=(0,g.E1)("subscription"),l=(0,g.E1)("websites");return(0,g.Wz)(),(0,g.An)("div",null,[(0,g.K2)(r),(0,g.QD)("div",m,[(0,g.QD)("div",w,[(0,g.QD)("a",v,[(0,g.mY)((0,h.WA)(e.$t("mySubscriptions"))+" ",1),y,O]),(0,g.QD)("ul",A,[((0,g.Wz)(!0),(0,g.An)(g.ae,null,(0,g.mi)(e.subscriptions,(e=>((0,g.Wz)(),(0,g.An)("li",S,[(0,g.K2)(a,{subscription:e,offer:i.offerForSubscription(e),onUnsubscribe:i.unsubscribe},null,8,["subscription","offer","onUnsubscribe"])])))),256)),(0,g.QD)("li",W,[(0,g.K2)(l,{hasSubscriptions:e.subscriptions.length>0},null,8,["hasSubscriptions"])])])])]),(0,g.QD)("div",D,[e.showSandbox?((0,g.Wz)(),(0,g.An)("button",{key:0,"data-id":"sandbox_link",onClick:s[0]||(s[0]=(...e)=>i.openSandbox&&i.openSandbox(...e)),class:"btn btn-link btn-sm"},E)):(0,g.g1)("",!0),(0,g.QD)("button",{"data-id":"options_link",onClick:s[1]||(s[1]=(...e)=>i.openOptions&&i.openOptions(...e)),class:"btn btn-link btn-sm"},k)])])}]]),ye=(0,n.W0)(ve);ye.use(b),ye.mount("#app")},6604:e=>{e.exports={WU:"1.4.1"}}},t={};function n(e){var o=t[e];if(void 0!==o)return o.exports;var i=t[e]={exports:{}};return s[e].call(i.exports,i,i.exports,n),i.exports}n.m=s,e=[],n.O=(s,t,o,i)=>{if(!t){var r=1/0;for(u=0;u<e.length;u++){for(var[t,o,i]=e[u],a=!0,l=0;l<t.length;l++)(!1&i||r>=i)&&Object.keys(n.O).every((e=>n.O[e](t[l])))?t.splice(l--,1):(a=!1,i<r&&(r=i));if(a){e.splice(u--,1);var c=o();void 0!==c&&(s=c)}}return s}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[t,o,i]},n.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return n.d(s,{a:s}),s},n.d=(e,s)=>{for(var t in s)n.o(s,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={936:0};n.O.j=s=>0===e[s];var s=(s,t)=>{var o,i,[r,a,l]=t,c=0;if(r.some((s=>0!==e[s]))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(l)var u=l(n)}for(s&&s(t);c<r.length;c++)i=r[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},t=self.webpackChunkbilly_goal_plugin=self.webpackChunkbilly_goal_plugin||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})();var o=n.O(void 0,[724,948],(()=>n(4064)));o=n.O(o)})();