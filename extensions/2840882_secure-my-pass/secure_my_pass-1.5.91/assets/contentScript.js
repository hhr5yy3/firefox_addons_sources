let d="SecureMyPass";console.log("SecureMyPass_Addon_Module_Active");globalThis.browser||(globalThis.browser=globalThis.chrome);function n(){console.log("INSERTING GSI CLIENT");var e=document.createElement("script");e.src=globalThis.browser.runtime.getURL("assets/gsiClient.js"),console.log("GsiSRC: ",e.src),document.head.appendChild(e),console.log("INSERTING WEB CONTENT SCRIPT");var r=document.createElement("script");r.src=globalThis.browser.runtime.getURL("assets/webContentScript.js"),console.log("WebSRC: ",r.src),document.head.appendChild(r)}setTimeout(()=>{n()},0);async function s(e,{data:r}){window.postMessage({source:d,method:e,...r||{}},"*")}(async function(){window.addEventListener("message",r=>{if(r.data&&r.data.source===d){let t=r.data;switch(t.method){case"orderInfo":globalThis.isChrome||browser.runtime.sendMessage(JSON.stringify({method:"orderInfo",data:t.order,tabId:window.tabId})),browser.storage.local.set({[window.tabId.toString()]:{method:"orderInfo",data:t.order}});break;case"ordersList":browser.runtime.sendMessage(JSON.stringify({method:"ordersList",data:t}));break;case"singleOrder":browser.runtime.sendMessage(JSON.stringify({method:"singleOrder",data:t}));break;case"error":browser.runtime.sendMessage(JSON.stringify({method:"messageError",data:t.message||"An unexpected error occured. Please refresh and try again."})),browser.storage.local.set({[window.tabId.toString()]:{method:"messageError",data:t.message||"An unexpected error occured. Please refresh and try again."}});break}}})})();browser.runtime.onMessage.addListener(async function(e,r,t){var o;return e.method==="getOrderInfo"&&s("getOrderInfo",{data:{message:e,cookie:{SOTC:(o=e==null?void 0:e.cookie)==null?void 0:o.SOTC}}}),e.method==="getOrdersList"&&s("getOrdersList",{data:{message:e}}),e.method==="getSingleOrder"&&s("getSingleOrder",{data:{message:e}}),e.method==="tabId"&&(window.tabId=e.tabId.toString()),!0});
