(()=>{"use strict";var e,t,n,o,r={875:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(7797));function r(e){return e&&e.__esModule?e:{default:e}}r(n(5109)),n(7978);var a=void 0,i=void 0,c=void 0,s=void 0,u=null;async function l(){var e=await fetch(o.default.URL_TOP_MERCHANTS,{headers:{Accept:"application/json"},credentials:"include"});return p((e=await e.json()).data),a}function p(e){a=e}async function d(){var e=await fetch(o.default.URL_TOP_SAVINGS,{headers:{Accept:"application/json"},credentials:"include"});return g((e=await e.json()).data),i}function g(e){i=e}function f(e){c=e}function h(e){s=e}t.default={fetchTopMerchants:l,getTopMerchants:function(){return a?Promise.resolve(a):l()},setTopMerchants:p,getMerchantById:function(e){return c.find((function(e){e.id}))},fetchTopSavings:d,getTopSavings:function(){return i?Promise.resolve(i):d()},setTopSavings:g,fetchAllMerchants:async function(){var e=await fetch(o.default.URL_ALL_MERCHANTS,{headers:{Accept:"application/json"},credentials:"include"});return f(e=await e.json()),c},setAllMerchants:f,findMerchantByUrl:function(e){if(!c)return null;for(var t=0;t<c.length;t++){var n=c[t];if(new RegExp(n.pattern).test(e))return n}return null},getCurrentMerchant:function(){return u},setCurrentMerchant:function(e){u=e,chrome.storage.local.set({currentMerchant:e})},fetchUser:async function(){return fetch(o.default.URL_ACCOUNT,{headers:{Accept:"application/json"},credentials:"include"}).then((function(e){return h(e.data),s})).catch((function(e){return h(null),null}))},setUser:h,isAuthed:function(){return!!s},getSettings:async function(){var e={serpEnabled:!1,notificationEnabled:!1};return chrome.storage.local.get("serpEnabled",(function(t){e.serpEnabled=void 0===t||t})),chrome.storage.local.get("notificationEnabled",(function(t){e.notificationEnabled=void 0===t||t})),e}}},7797:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={URL_TOP_MERCHANTS:"https://backend.pigogo.gr/api/v1/shops?limit=31&extension",URL_TOP_SAVINGS:"https://backend.pigogo.gr/api/v1/savings?limit=31&extension&featured",URL_ALL_MERCHANTS:"https://backend.pigogo.gr/api/v1/shops?extension",URL_ACCOUNT:"https://backend.pigogo.gr/api/v1/users/self?extension",DATA_FETCH_INTERVAL:36e5}},5109:(e,t)=>{var n;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r=t.URL_REGISTER="https://www.pigogo.gr/?signup",a=t.URL_LOGIN="https://www.pigogo.gr/?login",i=t.URL_SEARCH="https://www.pigogo.gr/search?keyword=",c=t.URL_LOGOUT="https://backend.pigogo.gr/api/v1/users/actions/log-out",s=t.URL_OVERVIEW="https://www.pigogo.gr/user/overview",u=t.URL_PURCHASES="https://www.pigogo.gr/user/purchases",l=t.URL_FAQ="https://www.pigogo.gr/faq",p=t.URL_CSRF="https://backend.pigogo.gr/sanctum/csrf-cookie",d=t.URL_SHOP="https://backend.pigogo.gr/api/v1/shops?extension&slug=",g=(t.URL_CATEGORIES="https://backend.pigogo.gr/api/v1/menu-categories?filter=parents",t.URL_DOMAIN="https://www.pigogo.gr/");t.URL_STORES="https://www.pigogo.gr/stores",t.URL_SAVINGS="https://www.pigogo.gr/offers",t.default=(o(n={URL_LOGIN:a,URL_REGISTER:r,URL_FAQ:l,URL_SEARCH:i,URL_LOGOUT:c,URL_OVERVIEW:s,URL_PURCHASES:u},"URL_FAQ",l),o(n,"URL_CSRF",p),o(n,"URL_DOMAIN",g),o(n,"URL_SHOP",d),n)},7978:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.copyToClipboard=function(e){var t=document.createElement("input");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("Copy"),document.body.removeChild(t)},t.navigateNewTab=function(e){chrome.tabs.create({url:e}),window.close()}}},a={};n=function e(t){var n=a[t];if(void 0!==n)return n.exports;var o=a[t]={exports:{}};return r[t](o,o.exports,e),o.exports}(875),o=(e=n)&&e.__esModule?e:{default:e},window.bg=o.default,t=o.default.getSettings(),chrome.storage.local.get("serpEnabled",(function(e){t.serpEnabled=void 0===e||e})),chrome.storage.local.get("notificationEnabled",(function(e){t.notificationEnabled=void 0===e||e}))})();