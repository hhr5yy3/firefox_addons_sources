"use strict";(globalThis.webpackChunkvisual_bookmarks_dev=globalThis.webpackChunkvisual_bookmarks_dev||[]).push([[192],{194:(e,t,i)=>{var s=i(614),o=i(339);class r extends HTMLElement{popupTriger=null;popupContent=null;isActive=!1;isTransition=!1;connectedCallback(){this.#e(),this.#t()}disconnectedCallback(){this.#i()}static get observedAttributes(){return["label"]}get label(){return this.getAttribute("label")}attributeChangedCallback(e,t,i){"label"===e&&this.popupTriger?.setAttribute("aria-label",i)}#e(){this.classList.add("popup"),this.popupTriger=(0,o.xX)("button",{type:"button",class:"button","aria-label":this.label},{html:'<slot name="button"></slot>'}),this.popupContent=(0,o.xX)("div",{class:"content"},{html:'<slot name="content"></<slot>'}),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`<style>${s.Z}</style>`,this.shadowRoot.append(this.popupTriger),this.shadowRoot.append(this.popupContent)}#t(){this.handleToggle=this.toggle.bind(this),this.handleHideByDocument=this.handleHideByDocument.bind(this),this.closeByEsc=e=>{"Escape"===e.code&&this.isActive&&!this.isTransition&&this.hide()},this.handleFocusout=this.handleFocusout.bind(this),this.popupTriger.addEventListener("click",this.handleToggle),document.addEventListener("click",this.handleHideByDocument),document.addEventListener("keydown",this.closeByEsc),this.addEventListener("focusout",this.handleFocusout)}#i(){this.popupTriger.removeEventListener("click",this.handleToggle),document.removeEventListener("click",this.handleHideByDocument),document.removeEventListener("keydown",this.closeByEsc)}transitionEnd(e){const t=i=>{this.popupContent.removeEventListener(i.type,t),e()};this.popupContent.addEventListener("transitionend",t)}handleFocusout(e){e.relatedTarget&&!this.contains(e.relatedTarget)&&this.isActive&&this.hide()}handleHideByDocument(e){e.stopPropagation();const t=e.composedPath()[0];!this.isActive||this.contains(t)||event.composedPath().includes(this)||this.hide()}toggle(e){e.preventDefault(),!this.isActive&&this.popupTriger.focus(),this[this.isActive?"hide":"show"]()}show(){if(this.isActive||this.isTransition)return!1;this.popupContent.classList.remove("is-below","is-above"),this.popupContent.style.display="block";const{top:e,height:t}=this.popupTriger.getBoundingClientRect(),i=e+t+this.popupContent.offsetHeight>window.innerHeight?"is-below":"is-above";this.popupContent.classList.add(i),this.transitionEnd((()=>{this.isTransition=!1,this.isActive=!0,this.dispatchEvent(new CustomEvent("vb:popup:open",{bubbles:!0,cancelable:!0}))})),this.isTransition=!0,this.popupContent.classList.add("is-show")}hide(){if(!this.isActive||this.isTransition)return!1;this.transitionEnd((()=>{this.popupContent.style.display="none",this.isTransition=!1,this.isActive=!1,this.dispatchEvent(new CustomEvent("vb:popup:close",{bubbles:!0,cancelable:!0}))})),this.isTransition=!0,this.popupContent.classList.remove("is-show")}}window.customElements.define("vb-popup",r)},104:(e,t,i)=>{i.r(t);var s=i(474),o=i(363),r=i.n(o),n=i(286);const a='<vb-popup class="services"> <span class="trigger" slot="button"> <svg width="20" height="20"> <use xlink:href="/img/symbol.svg#apps"/> </svg> </span> <div class="popup-content" slot="content"> <div class="list"></div> <button type="button" class="settings-trigger" data-locale-message="service_settings_btn">Tune</button> <div class="settings" hidden> <button type="button" class="settings-close md-ripple" data-ripple-center data-locale-message="hide_services_form.aria-label" aria-label="Hide services form"> <svg width="16" height="16" class="icon-times"> <use xlink:href="/img/symbol.svg#close"/> </svg> </button> <form action="#" method="post" class="settings-form"> <div class="settings-container"> <div class="settings-title" data-locale-message="services_add_title">Add</div> <div class="group"> <label for="name" data-locale-message="service_name">Name</label> <input type="text" class="form-control" name="name" id="name" autofocus placeholder="google" data-valid="required"> </div> <div class="group"> <label for="link" data-locale-message="service_link">Link</label> <input type="text" class="form-control" name="link" id="link" placeholder="https://google.com" data-valid="required|url"> </div> </div> <button class="settings-save md-ripple" id="ok" data-local-message="btn_save">OK</button> </form> <div class="settings-limit" data-locale-message="{services_limit_message}" hidden></div> </div> </div> </vb-popup> ';i(194);var l=i(594),c=i(339),d=i(301);class h extends HTMLElement{services=[];isActive=!1;hasSettings=!1;constructor(){super();const e=this.attachShadow({mode:"open"}),t=document.createElement("template");t.innerHTML=`<style>${n.Z}</style>${this.#s}`,e.appendChild(t.content.cloneNode(!0)),this.grid=this.shadowRoot.querySelector(".list"),this.vbPopup=this.shadowRoot.querySelector("vb-popup"),this.vbPopup.setAttribute("label",browser.i18n.getMessage("toggle_services_popup")),this.settingsTriggerEl=this.shadowRoot.querySelector(".settings-trigger"),this.settingsEl=this.shadowRoot.querySelector(".settings"),this.settingsFormEl=this.shadowRoot.querySelector(".settings-form"),this.settingsLimitEl=this.shadowRoot.querySelector(".settings-limit"),this.settingsCloseEl=this.shadowRoot.querySelector(".settings-close")}connectedCallback(){this.#e(),(0,d.Z)(this.vbPopup),this.#t(),this.sortableInstance=new s.ZP(this.grid,{animation:150,ghostClass:"ghost",onUpdate:e=>{this.services=this.#o(e,this.services),this.dispatchEvent(new CustomEvent("update",{detail:{services:this.services},bubbles:!0,cancelable:!0}))}}),r().i18n={required:browser.i18n.getMessage("error_input_required"),url:browser.i18n.getMessage("error_input_url")},r().run(this.settingsFormEl,{showErrors:!0,checkChange:!0,checkInput:!0,containerSelector:".group",errorClass:"has-error",errorHintClass:"error-hint",onSuccess:e=>{e.preventDefault(),this.#r()},onError:e=>{e[0].el.focus()}})}disconnectedCallback(){this.#i(),this.sortableInstance.destroy(),delete this.sortableInstance,r().destroy()}set servicesList(e){this.services=e}get servicesLength(){return this.services.length}get hasOverLimit(){return this.servicesLength>=l.Xl}get#s(){return a.replace("{services_limit_message}",`services_limit:${l.Xl}`)}#e(){const e=this.services.map(this.#n).join("");this.grid.innerHTML=e,this.#a()}#n({id:e,name:t,link:i}){const s=`${l.Yi}${i}`,o=document.createTextNode(t).textContent;return`\n      <a class="item" href="${i}" id="${e}">\n        <div class="item-img-wrap">\n          <img class="item-logo" alt="${o}" src="${s}"/>\n        </div>\n        <div class="item-name">${o}</div>\n        <button type="button" class="item-remove" data-id="${e}" aria-label="${browser.i18n.getMessage("remove_service",o)}">\n          <svg height="14" width="14">\n            <use xlink:href="/img/symbol.svg#minus"/>\n          </svg>\n        </button>\n      </a>`}#t(){this.handleShowSettings=this.#l.bind(this),this.settingsTriggerEl.addEventListener("click",this.handleShowSettings),this.handleCancelForm=this.#c.bind(this),this.settingsCloseEl.addEventListener("click",this.handleCancelForm),this.handleRemove=this.#d.bind(this),this.grid.addEventListener("click",this.handleRemove),this.handleHidePopup=this.#h.bind(this),this.vbPopup.addEventListener("vb:popup:close",this.handleHidePopup)}#i(){this.settingsTriggerEl.removeEventListener("click",this.handleShowSettings),this.settingsCloseEl.removeEventListener("click",this.handleCancelForm),this.grid.removeEventListener("click",this.handleRemove),delete this.handlerToggle,delete this.handlerKeyClose,delete this.handlerClickClose,delete this.handleShowSettings,delete this.handleCancelForm,delete this.handleRemove}#o(e,t){const i=t.find(((t,i)=>i===e.oldIndex)),s=t.filter(((t,i)=>i!==e.oldIndex));return[...s.slice(0,e.newIndex),i,...s.slice(e.newIndex)]}#l(){this.hasSettings=!0,this.grid.classList.add("is-edit"),this.settingsTriggerEl.hidden=this.hasSettings,this.settingsEl.hidden=!this.hasSettings,this.settingsFormEl.name.focus(),this.sortableInstance.option("disabled",!0),this.#p()}#h(){this.hasSettings=!1,this.grid.classList.remove("is-edit"),this.settingsTriggerEl.hidden=this.hasSettings,this.settingsEl.hidden=!this.hasSettings,this.settingsFormEl.reset(),this.sortableInstance.option("disabled",!1)}#p(){this.settingsFormEl.hidden=this.hasOverLimit,this.settingsLimitEl.hidden=!this.hasOverLimit}#c(e){e.preventDefault(),this.#h()}#r(){if(this.hasOverLimit)return;const{name:e,link:t}=this.settingsFormEl,i={id:(0,c.nR)(),name:(0,c.gw)(e.value),link:t.value.toLowerCase()};this.services.push(i),this.#a(),this.grid.insertAdjacentHTML("beforeend",this.#n(i)),this.settingsFormEl.reset(),e.focus(),this.#p(),this.dispatchEvent(new CustomEvent("update",{detail:{services:this.services},bubbles:!0,cancelable:!0}))}#d(e){const t=e.target.closest(".item-remove");if(!t)return!0;e.preventDefault();const i=t.dataset.id;this.services=this.services.filter((e=>e.id!==i)),t.closest(".item").remove(),this.#a(),this.#p(),this.dispatchEvent(new CustomEvent("update",{detail:{services:this.services},bubbles:!0,cancelable:!0}))}#a(){const e=Boolean(this.servicesLength);this.grid.classList.toggle("is-empty",!e)}}window.customElements.define("vb-services",h)},614:(e,t,i)=>{i.d(t,{Z:()=>a});var s=i(81),o=i.n(s),r=i(645),n=i.n(r)()(o());n.push([e.id,":host{position:relative;z-index:100;display:block}.button{display:inline-block;width:100%;height:100%;padding:0;border:0;border-radius:var(--vb-popup-btn-radius, var(--base-radius));background-color:transparent;outline:0;cursor:pointer;overflow:hidden}.button:focus-visible{outline:2px solid var(--color-primary);outline-offset:1px}.content{display:none;position:absolute;left:var(--vb-popup-left, 0);right:var(--vb-popup-right, auto);max-width:300px;opacity:0;color:var(--theme-text-color);background-color:var(--theme-background-2);border-radius:var(--vb-popup-radius, var(--base-radius));box-shadow:var(--vb-popup-shadow, none);transform:translateY(10px);visibility:hidden;transition-property:visibility,opacity,transform;transition-duration:.15s,.15s,.15s;transition-timing-function:ease-in-out}.content.is-below{bottom:var(--vb-popup-bottom, 100%)}.content.is-above{top:var(--vb-popup-top, 100%)}.content.is-show{opacity:1;visibility:visible;transform:none}",""]);const a=n},286:(e,t,i)=>{i.d(t,{Z:()=>a});var s=i(81),o=i.n(s),r=i(645),n=i.n(r)()(o());n.push([e.id,'.group{position:relative;margin-bottom:1rem}.form-control{display:block;width:100%;padding:var(--input-padding);font-family:inherit;font-size:inherit;color:var(--input-text-color);border:var(--input-border);border-radius:var(--input-radius);background-color:var(--input-bg);outline:0;transition:box-shadow .15s ease}.form-control:focus{border-color:var(--color-primary);box-shadow:var(--input-shadow)}.has-error .form-control{border-color:var(--color-warning)}.has-error .form-control:focus{box-shadow:var(--input-shadow-error)}select,select.form-control{padding-right:28px;background-image:var(--select-icon);background-size:18px;background-repeat:no-repeat;background-position:calc(100% - 5px) center;appearance:none;filter:var(--select-icon-color)}textarea{height:100px;resize:none}textarea.is-editor{width:calc(100% - 20px);box-sizing:content-box;font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}.label{display:block;font-size:.9rem;font-weight:600;letter-spacing:.03rem;margin-bottom:5px}.switch{display:inline-block;height:var(--switch-height);user-select:none}.switch__input{position:absolute;opacity:0;width:1px;height:1px;clip:rect(0 0 0 0)}.switch__label{position:relative;display:inline-block;min-width:var(--switch-width);min-height:var(--switch-height);cursor:pointer;font-weight:500;text-align:left;padding-left:calc(var(--switch-width) + 10px)}.switch__label::after,.switch__label::before{content:"";position:absolute;margin:0;outline:0;top:50%;transform:translateY(-50%);transition:all .2s ease}.switch__label::before{left:1px;width:var(--switch-width);height:var(--switch-height);background-color:var(--switch-inactive-bar);border-radius:8px}.switch__label::after{left:0;width:var(--switch-circle-size);height:var(--switch-circle-size);background-color:var(--switch-inactive-circle);border-radius:50%;box-shadow:0 1px 5px 0 rgb(0 0 0/60%)}.switch__input:focus+.switch__label::after{box-shadow:0 1px 5px 0 rgb(0 0 0/60%),0 0 0 10px rgb(33 150 243/20%)}.switch__input:active+.switch__label::after{box-shadow:0 1px 5px 0 rgba(0 0 0/60%),0 0 0 10px rgb(0 0 0/10%)}.switch__input:active:checked+.switch__label::after{box-shadow:0 1px 5px 0 rgb(0 0 0/60%),0 0 0 10px rgb(33 150 243/30%)}.switch__input:checked+.switch__label::before{background-color:var(--switch-active-bar)}.switch__input:checked+.switch__label::after{background-color:var(--switch-active-circle);transform:translate(100%,-50%)}.ripple-container{overflow:hidden;user-select:none}.ripple{position:absolute;border-radius:50%;will-change:transform,opacity;transform:scale(.5);transition-property:transform,opacity;transition-duration:550ms;transition-timing-function:ease-out;pointer-events:none}:host{--vb-services-radius:12px;--vb-services-background:var(--theme-background);--vb-services-skeleton-background:#ddd;--vb-popup-radius:var(--vb-services-radius);--vb-popup-left:auto;--vb-popup-right:-5px;--vb-popup-top:calc(100% + 10px);--vb-popup-btn-radius:50%;position:fixed;z-index:999;top:12px;right:20px}:host *{box-sizing:border-box}:host-context(.dark){--vb-services-background:var(--theme-background-2);--vb-services-skeleton-background:var(--theme-background-3)}.services-popup,.trigger{width:30px;height:30px}.trigger{display:flex;align-items:center;justify-content:center;position:relative;padding:0;border-radius:50%;border:0;background:rgb(33 33 33/50%);opacity:.2;cursor:pointer;transition:opacity 3s linear;outline:0}.trigger:focus{opacity:.5}.trigger:hover{opacity:1;transition-duration:.3s}.trigger.is-active{opacity:1}.trigger svg{width:20px;height:20px;fill:#fff}.popup-content{width:300px;box-shadow:0 2px 10px rgb(0 0 0/20%);border-radius:var(--vb-services-radius)}.popup-content::before{content:"";position:absolute;top:-5px;right:14px;width:10px;height:10px;transform:rotate(45deg);background-color:var(--vb-services-background);box-shadow:-1px -1px 0 rgb(0 0 0/10%)}.list{display:grid;grid-template-columns:repeat(3,80px);grid-gap:15px 10px;max-height:50vh;padding:20px;overflow-x:hidden;overflow-y:scroll}.list::-webkit-scrollbar{width:var(--scrollbar-width)}.list::-webkit-scrollbar-thumb{min-height:35px;background-clip:padding-box;background-color:var(--scrollbar-color);border:2px solid transparent;border-radius:10px}.list::-webkit-scrollbar-thumb:hover{background-color:var(--scrollbar-hover-color)}.list.is-empty{grid-template-columns:1fr;place-items:center}.item,.list.is-empty::after{border-radius:var(--vb-services-radius)}.list.is-empty::after{content:"";width:84px;height:84px;background-color:var(--vb-services-skeleton-background);background-image:radial-gradient(circle,var(--theme-background-2) 50%,transparent 50%),radial-gradient(circle,var(--theme-background-2) 50%,transparent 50%);background-repeat:no-repeat;background-position:50% 20%,50% 90%;background-size:48px 48px,80px 7px}.list.is-edit .item-remove{display:block}.list.is-edit .item{border-color:var(--theme-invert-alpha-10)}.item{position:relative;display:flex;flex-direction:column;min-height:84px;text-align:center;border:1px solid transparent;cursor:pointer;text-decoration:none;color:var(--popup-text-color);outline:0}.item:focus,.item:hover{background-color:var(--theme-background-3)}.item-img-wrap{display:flex;align-items:center;height:60px}.item-logo{display:inline-block;vertical-align:middle;margin:auto;width:32px;height:32px}.item-name{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:20px;text-transform:capitalize;padding-bottom:3px}.list:not(.is-edit) .item:hover .item-name{white-space:normal;word-wrap:break-word}.item-remove{display:none;position:absolute;top:-7px;right:-7px;width:24px;height:24px;line-height:1;padding:0;border:0;border-radius:50%;background-color:var(--theme-background-3);cursor:pointer;z-index:999}.item-remove svg{display:inline-block;vertical-align:middle;width:14px;height:14px;fill:var(--theme-text-color)}.ghost{opacity:0}.settings-trigger{display:inline-flex;place-content:center;width:100%;padding:7px;font-family:inherit;font-size:inherit;border:1px solid transparent;color:var(--theme-color);border-radius:0 0 var(--vb-services-radius) var(--vb-services-radius);background-color:inherit;outline:0;cursor:pointer;transition:background-color .25s ease}.settings-trigger:focus-visible,.settings-trigger:hover{background-color:var(--theme-background-3)}.settings{position:relative;border-top:1px solid var(--theme-invert-alpha-10);padding-top:20px}.settings-close{position:absolute;right:10px;top:10px;width:32px;height:32px;padding:0;line-height:1;border:1px solid transparent;border-radius:50%;background-color:transparent;cursor:pointer;opacity:.5;transition:opacity .25s ease;z-index:999}.settings-close:hover{opacity:1}.settings-close svg{display:inline-block;vertical-align:middle;width:20px;height:20px;fill:var(--theme-text-color)}.settings-form{position:relative}.settings-container{padding:0 10px}.settings-title{margin-bottom:20px;font-size:16px;font-weight:700;line-height:1}.settings-limit{text-align:center;padding:20px}.settings-save{display:block;width:100%;padding:10px;color:#fff;border:0;border-radius:0 0 var(--vb-services-radius) var(--vb-services-radius);background-color:var(--color-primary);cursor:pointer;outline:0}.settings-save:focus-visible{background-color:var(--color-primary-dark)}.error-hint{color:#ef5350}[hidden]{display:none!important}',""]);const a=n}}]);