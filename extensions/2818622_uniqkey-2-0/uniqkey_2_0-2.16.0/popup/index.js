(()=>{var e,t,r,o={90377:e=>{"undefined"!=typeof window&&(e.exports=window)},89295:(e,t,r)=>{"use strict";var o=r(85893),n=(r(53837),r(73241),r(40568),r(9247),r(31740),r(67294)),a=r(20745),i=r(20938),s=r(88767),l=r(63408),c=r(84223),d=r(93254),u=r(45928),p=r(10378),g=r(93150);const m=()=>{if(!g.extension.getViews)return!1;return g.extension.getViews({type:"popup"}).some((e=>e===window))},h=()=>({isPopupWindow:(0,n.useMemo)((()=>m()),[])});var x=r(79655),v=r(89250),y=(e=>(e.HomePage="/vaults",e.LoginPage="/login",e.AutoActivatePage="/auto-activate",e.EnvironmentPage="/env",e.ChangeMasterPasswordPage="/change-password",e.WelcomePage="/welcome",e.ImportHistoryPage="/import-history",e.ImportHistoryAuthenticatedPage="/import-history-authenticated",e.CongratulationsPage="/congratulations",e.ImportFromCsvPage="/import-from-csv",e.ImportMappingPage="/import-mapping",e.ImportResultsPage="/import-results",e.PairPage="/pair",e.MenuPage="/menu",e.TrustedBrowserPage="/trusted-browser",e.PasswordGeneratorPage="/password-generator",e.InstallDesktopPage="/install-desktop",e.LoginAndPairPage="/login-and-pair",e.SignInToMobile="/sing-in-to-mobile",e.OnboardingBrowserSettingsPage="/onboarding-browser-settings",e.OnboardingBrowserSettingsAuthenticatedPage="/onboarding-browser-settings-auth",e.BrowserSettingsPage="/browser-settings",e.ViewLoginPage="/password/:vaultId/:groupId/view",e.EditLoginPage="/password/:vaultId/:groupId/edit",e.CreateLoginPage="/password/create",e.ShareLoginPage="/password/:vaultId/:groupId/share",e.MoveLoginPage="/password/:vaultId/:groupId/move",e.CreateSecureNotePage="/secure-note/create",e.ViewSecureNotePage="/secure-note/:vaultId/:groupId/view",e.EditSecureNotePage="/secure-note/:vaultId/:groupId/edit",e.ShareSecureNotePage="/secure-note/:vaultId/:groupId/share",e.MoveSecureNotePage="/secure-note/:vaultId/:groupId/move",e.CreateCreditCardPage="/credit-card/create",e.ViewCreditCardPage="/credit-card/:vaultId/:groupId/view",e.EditCreditCardPage="/credit-card/:vaultId/:groupId/edit",e.MoveCreditCardPage="/credit-card/:vaultId/:groupId/move",e.ShareCreditCardPage="/credit-card/:vaultId/:groupId/share",e.SharingCenter="/sharing-center",e.ReportSite="/report-site",e.ExportToCSV="/export-to-csv",e.InstallMobileApp="/install-mobile-app",e.SignUpPage="/sign-up",e.ChangeLanguage="/change-language",e))(y||{});const j=e=>`/vaults/${e}`,b=(e,t)=>`/password/${e}/${t}/view`,P=(e,t)=>`/password/${e}/${t}/edit`,w=(e,t)=>`/password/${e}/${t}/share`,f=(e,t)=>`/password/${e}/${t}/move`,C=(e,t)=>`/secure-note/${e}/${t}/view`,S=(e,t)=>`/secure-note/${e}/${t}/edit`,Z=(e,t)=>`/secure-note/${e}/${t}/share`,I=(e,t)=>`/secure-note/${e}/${t}/move`,k=(e,t)=>`/credit-card/${e}/${t}/view`,T=(e,t)=>`/credit-card/${e}/${t}/edit`,A=(e,t)=>`/credit-card/${e}/${t}/move`,M=(e,t)=>`/credit-card/${e}/${t}/share`,O=e=>`/popup/index.html#${e}`,D=y;var V=(e=>(e.Password="login",e.SecureNote="secureNote",e.CreditCard="creditCard",e))(V||{});const L=V,E={TRANSLATION_KEY:"keychainFilter.options.all",ID:"KEYCHAIN_ALL"},B={TRANSLATION_KEY:"keychainFilter.options.shared",ID:"KEYCHAIN_SHARED"},R={LOGINS_TRANSLATION_KEY:"common.myLogins",LOGINS_TRANSLATION_KEY_ID:"loginsTranslationKey",SECURE_NOTES_TRANSLATION_KEY:"common.mySecureNotes",SECURE_NOTES_TRANSLATION_KEY_ID:"secureNotesTranslationKey",CREDIT_CARD_TRANSLATION_KEY:"common.myCreditCards",CREDIT_CARD_TRANSLATION_KEY_ID:"creditCardsTranslationKey",MY_DATA_TRANSLATION_KEY:"common.myData",MY_DATA_TRANSLATION_KEY_ID:"myDataTranslationKey",ID:"MY_VAULTS_GROUP"},W="common.privateKeychain",N="••••••••••••••••••",F={position:"absolute",bottom:24,right:32},U={position:"absolute",bottom:24,right:32},z={IpAddress:"restrictions.ipAddress",Location:"restrictions.location",Time:"restrictions.time"};var _=r(96047),G=r(96486);const q={organizations:[],secureNoteVaults:[],groupsById:{},groupsWithPasswordVaultsGroupedByOrganizationId:{},orderedGroupsGroupedByOrganizationId:{},orderedGroupsGroupedByOrganizationWithoutSharedGroups:{},orderedPasswordVaultsGroupedByGroupId:{},organizationsById:{},normalizedPasswordVaultsById:{},passwordVaultsGroupedByGroupId:{},normalizedPasswordVaultsByIdGroupedByApplicationId:{},passwordVaultsByIdGroupedByApplicationId:{},applicationsById:{},orderedOrganizationsIdsWithPrivateKeychainInTop:[],orderedOrganizationsIdsWithPrivateKeychainInBottom:[],passwordVaults:[],normalizedPasswordVaults:[],groupsByOrganizationId:{},normalizedGroups:[],groups:[],sharedGroups:[],orderedSharedGroups:[],sharedGroupsById:{},sharedPasswordVaults:[],sharedNormalizedPasswordVaults:[],sharedNormalizedPasswordVaultsById:{},sharedSecureNoteVaults:[],sharedNormalizedSecureNoteVaultsById:{},sharedNormalizedSecureNoteVaults:[],orderedGroups:[],normalizedSecureNoteVaults:[],normalizedSecureNoteVaultsById:{},groupsWithSecureNoteVaultsGroupedByOrganizationId:{},secureNoteVaultsGroupedByGroupId:{},orderedSecureNotesGroupedByGroupId:{},creditCardVaults:[],normalizedCreditCardVaultsById:{},creditCardVaultsGroupedByGroupId:{},groupsWithCreditCardVaultsGroupedByOrganizationId:{},normalizedCreditCardVaults:[],orderedCreditCardGroupedByGroupId:{},sharedCreditCardVaults:[],sharedNormalizedCreditCardVaults:[],sharedNormalizedCreditCardVaultsById:{},trustedActionsDictionary:{},authStatus:{user:null,employee:null,hasFinishedOnBoarding:!1,isOnBoardingAuthenticated:!1,isAuthenticated:!1},deviceStatus:{guid:"",symmetricKey:"",asymmetricKeys:{privateKey:"",publicKey:""}},deviceLanguage:_.L2,supportedLanguages:[_.L2],isTrustedBrowserEnabled:!1,normalizedVaultsById:{},isExtensionApiServiceHealthy:!0,isStateInitiated:!1,isLoading:!0},K={state:(0,G.cloneDeep)(q),prevState:(0,G.cloneDeep)(q),isLoading:!0},H=(0,n.createContext)(K);H.displayName="ApplicationContext";const $=H,Y=()=>(0,n.useContext)(H);var Q=r(14491);const J=e=>{const{children:t}=e;return(0,o.jsx)(Q.Z,{container:!0,wrap:"nowrap",flexDirection:"column",className:"min-height-100vh max-height-100vh authorized-container",children:t})};var X=r(6481),ee=r(84014),te=r(1186),re=r(55418),oe=r(36628),ne=r(11896),ae=r(57520),ie=r(70997),se=r(48977),le=r(13925),ce=r(1798),de=r.n(ce),ue=(e=>(e.ShowAccountSelectDenialToast="show_account-select-denial_toast",e.ShowCreditCardSelectDenialToast="show_credit-card-denial_toast",e.OpenPasswordGenerator="openPasswordGenerator",e.VaultFilterKeychainOptionSelected="vaultFilterKeychainOptionSelected",e.CloseKeychainFilter="closeKeychainFilter",e.OpenKeychainFilter="openKeychainFilter",e.VaultFilterSearchChanged="vaultFilterSearchChanged",e.SHOW_WARNING_ALERT="showWarningAlert",e.SHOW_ERROR_ALERT="showErrorAlert",e.SHOW_SUCCESS_ALERT="showSuccessAlert",e.SHOW_INFO_ALERT="showInfoAlert",e))(ue||{});const pe=ue,ge={searchQuery:null,keychainOptions:[],selectedKeychain:null,isKeychainFilterActive:!1,isFilteringLoading:!1,isSearchFilterActive:!1,isFilterActive:!1,filteredState:(0,G.cloneDeep)(q)},me=(0,n.createContext)(ge);me.displayName="VaultFilterContext";const he=me,xe=()=>(0,n.useContext)(me);var ve=r(92036),ye=r(51547),je=r(85271),be=r(20091),Pe=r(97942),we=r(59528),fe=r(73402);const Ce={"& .MuiDrawer-paper":{borderTopLeftRadius:16,borderTopRightRadius:16,maxHeight:"85%",overflow:"hidden"}},Se={backgroundColor:X.i,padding:"16px 24px",position:"sticky",top:0,zIndex:1},Ze={padding:0},Ie={backdrop:ve.n},ke=(0,n.memo)((e=>{const{isOpen:t,onClose:r,title:n,children:a}=e;return(0,o.jsxs)(ye.Z,{slots:Ie,anchor:"bottom",open:t,onClose:r,sx:Ce,children:[(0,o.jsxs)(je.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:Se,children:[(0,o.jsx)(be.ZP,{variant:"subtitle1",color:X.S1,children:n}),(0,o.jsx)(Pe.Z,{onClick:r,sx:Ze,children:(0,o.jsx)(we.Z,{color:X.S1})})]}),(0,o.jsx)(fe.Z,{disablePadding:!0,children:a})]})}));var Te=r(64041);const Ae=e=>{const{onClick:t,icon:r,color:n,marginLeft:a=.5,title:i}=e;return(0,o.jsxs)(Te.Z,{onClick:t,children:[r,(0,o.jsx)(je.Z,{marginLeft:a,color:n,children:(0,o.jsx)(be.ZP,{variant:"subtitle1",children:i})})]})},Me={height:24},Oe=()=>{const[e,t]=(0,n.useState)(!1),{t:r}=(0,_.T_)(),a=(0,v.s0)(),{isKeychainFilterActive:i,searchQuery:s}=xe(),l=(0,n.useCallback)((()=>{de().publish(pe.OpenKeychainFilter)}),[]),c=(0,n.useCallback)((e=>{de().publish(pe.VaultFilterSearchChanged,e)}),[]),d=(0,n.useCallback)((()=>t(!0)),[]),u=(0,n.useCallback)((()=>t(!1)),[]),p=(0,n.useCallback)((()=>{a(D.CreateLoginPage)}),[a]),g=(0,n.useCallback)((()=>{a(D.CreateCreditCardPage)}),[a]),m=(0,n.useCallback)((()=>{a(D.CreateSecureNotePage)}),[a]);return(0,o.jsxs)(Q.Z,{container:!0,wrap:"nowrap",justifyContent:"space-between",alignItems:"center",columnSpacing:2,sx:{backgroundColor:X.P4},px:2,py:1,children:[(0,o.jsx)(Q.Z,{item:!0,flexGrow:1,children:(0,o.jsx)(ee.Z,{size:"small",fullWidth:!0,autoFocus:!0,value:s,placeholder:r("common.search"),onChange:c,paddingRight:0,color:X.S1,hideBorder:!0,backgroundColor:X.ar,InputProps:{endAdornment:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(te.Z,{orientation:"vertical",sx:Me,color:X.S1}),(0,o.jsx)(re.Z,{background:X.ar,hoverBackground:X.B1,activeBackground:X.P5,disableRipple:!0,activeColor:X.P5,notificationOutlineColor:X.B1,notificationColor:X.S1,onClick:l,hasNotification:i,hideBadgeBorder:!0,badgeBottom:11,badgeRight:11,badgeMinWidth:"4px",badgeHeight:"4px",borderBottomLeftRadius:0,borderTopLeftRadius:0,children:(0,o.jsx)(oe.Z,{color:X.S1})})]})}})}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(ne.Z,{title:r("homePageHeader.addButtonTooltip"),children:(0,o.jsx)(re.Z,{width:34,height:34,background:X.S1,hoverBackground:X.S2,activeBackground:X.S3,notificationOutlineColor:X.B1,onClick:d,children:(0,o.jsx)(ae.Z,{color:X.B1})})})}),(0,o.jsxs)(ke,{isOpen:e,onClose:u,title:r("createVault.title"),children:[(0,o.jsx)(Ae,{onClick:p,icon:(0,o.jsx)(ie.Z,{}),title:r("createVault.login")}),(0,o.jsx)(Ae,{onClick:g,icon:(0,o.jsx)(se.Z,{}),title:r("createVault.creditCard")}),(0,o.jsx)(Ae,{onClick:m,icon:(0,o.jsx)(le.Z,{}),title:r("createVault.secureNote")})]})]})},De=()=>(0,o.jsxs)(J,{children:[(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(Oe,{})}),(0,o.jsx)(v.j3,{})]});var Ve=r(20640),Le=r.n(Ve),Ee=r(23063),Be=r(51189),Re=r(66141),We=r(59976),Ne=r(69188),Fe=r(35845),Ue=r(94528),ze=r(18814),_e=r(34464),Ge=r(81820),qe=r(16154),Ke=Object.defineProperty,He=Object.defineProperties,$e=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Xe=(e,t,r)=>t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,et=(e,t)=>{for(var r in t||(t={}))Qe.call(t,r)&&Xe(e,r,t[r]);if(Ye)for(var r of Ye(t))Je.call(t,r)&&Xe(e,r,t[r]);return e},tt=(e,t)=>He(e,$e(t));const rt="linear-gradient(180deg, #FFFFFF 0%, #F0F3FB 52.21%)",ot={overflowY:"auto"},nt=(0,n.forwardRef)(((e,t)=>{const r=e,{isLoading:n=!1,children:a,background:i=rt}=r,s=((e,t)=>{var r={};for(var o in e)Qe.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&Ye)for(var o of Ye(e))t.indexOf(o)<0&&Je.call(e,o)&&(r[o]=e[o]);return r})(r,["isLoading","children","background"]);return(0,o.jsx)(Q.Z,tt(et({display:"flex",flexDirection:"column",flex:1,sx:tt(et({},ot),{background:i})},s),{ref:t,children:n?(0,o.jsx)(Q.Z,{container:!0,justifyContent:"center",alignItems:"center",flex:1,children:(0,o.jsx)(qe.Z,{size:100,color:X.B1})}):a}))})),at=nt,it=(0,n.forwardRef)(((e,t)=>{const{children:r,dividerBottom:n=!1,dividerTop:a=!1,disablePaddingBottom:i=!1,onClick:s}=e;return(0,o.jsxs)(Q.Z,{container:!0,ref:t,children:[a&&(0,o.jsx)(Q.Z,{container:!0,children:(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(te.Z,{})})}),(0,o.jsx)(Q.Z,{container:!0,p:2,pb:i?0:2,onClick:s,children:r}),n&&(0,o.jsx)(Q.Z,{container:!0,children:(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(te.Z,{})})})]})})),st=(0,n.memo)((e=>{const{condition:t,children:r}=e;return t?(0,o.jsx)(o.Fragment,{children:r}):null})),lt=e=>{const{text:t,action:r,renderAction:n=!0}=e;return(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,o.jsx)(Q.Z,{item:!0,xs:!0,children:(0,o.jsx)(be.ZP,{variant:"caption",color:X.S6,children:t})}),(0,o.jsx)(st,{condition:n&&!!r,children:(0,o.jsx)(Q.Z,{item:!0,children:r})})]})};var ct=r(94184),dt=r.n(ct);const ut=e=>{const{text:t,color:r=X.S5,ignoreTextOverFlow:n=!1,breakSpaces:a=!1}=e;return(0,o.jsx)(Q.Z,{container:!0,justifyContent:"space-between",mt:.5,children:(0,o.jsx)(Q.Z,{item:!0,className:dt()({"overflow-hidden":!n,"word-break-all":n}),children:(0,o.jsx)(be.ZP,{noWrap:!n,variant:"body1",color:r,whiteSpace:a?"break-spaces":void 0,children:t})})})},pt=e=>{const{children:t}=e;return(0,o.jsx)(Q.Z,{item:!0,children:t})},gt=e=>{const{children:t}=e;return(0,o.jsx)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:t})};var mt=r(30570);const ht=e=>{const{onCopy:t}=e,{t:r}=(0,_.T_)();return(0,o.jsx)(mt.Z,{disableMinWidth:!0,variant:"text",onClick:t,children:(0,o.jsx)(be.ZP,{variant:"subtitle1",color:X.i,children:r("common.copy")})})};var xt=r(81343);var vt=(e=>(e.LoginCredentials="loginCredentials",e.SymmetricKey="symmetricKey",e.AsymmetricKeys="asymmetricKeys",e.Guid="guid",e.EmployeesAuth="employeesAuth",e.UserTokens="userTokens",e.LocalCache="localCache",e.HasFinishedOnBoarding="hasFinishedOnBoarding",e.Env="env",e.TrustedBrowserKeys="trustedBrowserKeys",e.HideWarningIfPasswordsIsStoringInBrowser="showWarningIfPasswordsIsStoringInBrowser",e.IsTrustOnLoginEnabled="isTrustOnLoginEnabled",e.TrustedBrowserHours="trustedBrowserHours",e.TrustedBrowserMinutes="trustedBrowserMinutes",e))(vt||{});let yt;const jt=()=>yt,bt=()=>yt.toLowerCase(),Pt=()=>"production"===jt(),wt={onBrowserMessage:()=>()=>{"production"!==jt()&&console.error("Called onBrowserMessage. Did you forget to provide a provider?")},sendBrowserMessage:()=>Promise.reject()},ft=(0,n.createContext)(wt),Ct=()=>(0,n.useContext)(ft);ft.displayName="BrowserMessagingContext";var St=(e=>(e.ManualCancel="manualCancel",e.ConnectionTimeout="connectionTimeout",e.RejectedOnMobile="rejectedOnMobile",e.RestrictedByGroupRestrictions="restrictedByGroupRestrictions",e.TrustDisabledInGroup="trustDisabledInGroup",e.TrustDisabledInOrganization="trustDisabledInOrganization",e.IgnoreError="ignoreError",e.InvalidImportInput="invalid",e.IpAddressRestrictionDoesntPass="ipAddressRestrictionDoesntPass",e.TimeRestrictionDoesntPass="timeRestrictionDoesntPass",e.LocationRestrictionDoesntPass="locationRestrictionDoesntPass",e.TooManyItems="tooManyItems",e))(St||{});const Zt=St;const It=(e,t)=>{const r=null!=t?t:"toasts.somethingWentWrong";switch(null==e?void 0:e.message){case Zt.ManualCancel:return{errorKey:null,skipError:!0};case Zt.RestrictedByGroupRestrictions:return{errorKey:"toasts.vaultIsRestricted",skipError:!1};case Zt.TrustDisabledInOrganization:return{errorKey:"toasts.trustDisabledInOrganization",skipError:!1};case Zt.TrustDisabledInGroup:return{errorKey:"toasts.trustDisabledInGroup",skipError:!1};case Zt.ConnectionTimeout:return{errorKey:"toasts.mobileRequestTimeOut",skipError:!1};case Zt.RejectedOnMobile:return{errorKey:"toasts.rejectedOnMobile",skipError:!1};case Zt.InvalidImportInput:return{errorKey:"toasts.importLoginsWithErrors",skipError:!1};case Zt.IpAddressRestrictionDoesntPass:return{errorKey:"toasts.vaultAccessRestrictedByIp",skipError:!1};case Zt.TimeRestrictionDoesntPass:return{errorKey:"toasts.vaultAccessRestrictedByTime",skipError:!1};case Zt.LocationRestrictionDoesntPass:return{errorKey:"toasts.vaultAccessRestrictedByLocation",skipError:!1};case Zt.TooManyItems:return{errorKey:"toasts.tooManyItems",skipError:!1};default:return{errorKey:r,skipError:!1}}},kt=()=>{const{sendBrowserMessage:e}=Ct(),[t,r]=(0,n.useState)(!1),o=(0,n.useCallback)((t=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){r(!0);const o=(0,xt.d)();return e(t).then((e=>{o.resolve(e),r(!1)})).catch((e=>{r(!1),(null==e?void 0:e.message)!==Zt.ConnectionTimeout?(null==e?void 0:e.message)!==Zt.RejectedOnMobile?(null==e?void 0:e.message)!==Zt.RestrictedByGroupRestrictions?(null==e?void 0:e.message)!==Zt.TrustDisabledInOrganization?(null==e?void 0:e.message)!==Zt.TrustDisabledInGroup?(null==e?void 0:e.message)!==Zt.InvalidImportInput?(null==e?void 0:e.message)!==Zt.IpAddressRestrictionDoesntPass?(null==e?void 0:e.message)!==Zt.TimeRestrictionDoesntPass?(null==e?void 0:e.message)!==Zt.LocationRestrictionDoesntPass?(null==e?void 0:e.message)!==Zt.TooManyItems?o.reject(e):o.reject(new Error(Zt.TooManyItems)):o.reject(new Error(Zt.LocationRestrictionDoesntPass)):o.reject(new Error(Zt.TimeRestrictionDoesntPass)):o.reject(new Error(Zt.IpAddressRestrictionDoesntPass)):o.reject(new Error(Zt.InvalidImportInput)):o.reject(new Error(Zt.TrustDisabledInGroup)):o.reject(new Error(Zt.TrustDisabledInOrganization)):o.reject(new Error(Zt.RestrictedByGroupRestrictions)):o.reject(new Error(Zt.RejectedOnMobile)):o.reject(new Error(Zt.ConnectionTimeout))})),o.promise}))),[e]);return{request:o,isLoading:t,handleError:It}};var Tt=(e=>(e[e.Logout=0]="Logout",e[e.LoginByCredentials=1]="LoginByCredentials",e[e.OnBoardingFinished=2]="OnBoardingFinished",e[e.RebuildApplicationState=3]="RebuildApplicationState",e[e.ApplicationStateUpdated=4]="ApplicationStateUpdated",e[e.UpdateUser=5]="UpdateUser",e[e.SearchEmployees=6]="SearchEmployees",e[e.UpdateCurrentUserProfileSettings=7]="UpdateCurrentUserProfileSettings",e[e.ActivateUser=8]="ActivateUser",e[e.GetApplicationState=9]="GetApplicationState",e[e.GetFilteredApplicationStateByQueryString=10]="GetFilteredApplicationStateByQueryString",e[e.GetFilteredApplicationStateByApplication=11]="GetFilteredApplicationStateByApplication",e[e.RequestPasswordVaultSecureData=12]="RequestPasswordVaultSecureData",e[e.RequestSecureNoteVaultSecureData=13]="RequestSecureNoteVaultSecureData",e[e.RequestCreditCardVaultSecureData=14]="RequestCreditCardVaultSecureData",e[e.GetServicesByApplicationId=15]="GetServicesByApplicationId",e[e.CreateSecureNoteVault=16]="CreateSecureNoteVault",e[e.UpdateSecureNoteVault=17]="UpdateSecureNoteVault",e[e.DeleteVault=18]="DeleteVault",e[e.CreatePasswordVault=19]="CreatePasswordVault",e[e.UpdatePasswordVault=20]="UpdatePasswordVault",e[e.CreateCreditCardVault=21]="CreateCreditCardVault",e[e.UpdateCreditCardVault=22]="UpdateCreditCardVault",e[e.BulkDeleteVaults=23]="BulkDeleteVaults",e[e.ShareVault=24]="ShareVault",e[e.MoveVaultToOrganization=25]="MoveVaultToOrganization",e[e.ExportPasswords=26]="ExportPasswords",e[e.SearchServicesByUrl=27]="SearchServicesByUrl",e[e.SearchServicesByDesktopAppName=28]="SearchServicesByDesktopAppName",e[e.OpenSavePasswordVaultPopup=29]="OpenSavePasswordVaultPopup",e[e.CloseSavePasswordVaultPopup=30]="CloseSavePasswordVaultPopup",e[e.TriggerOpenSavePasswordVaultPopup=31]="TriggerOpenSavePasswordVaultPopup",e[e.TriggerCloseSavePasswordVaultPopup=32]="TriggerCloseSavePasswordVaultPopup",e[e.OpenUpdatePasswordVaultPopup=33]="OpenUpdatePasswordVaultPopup",e[e.CloseUpdatePasswordVaultPopup=34]="CloseUpdatePasswordVaultPopup",e[e.TriggerOpenUpdatePasswordVaultPopup=35]="TriggerOpenUpdatePasswordVaultPopup",e[e.TriggerCloseUpdatePasswordVaultPopup=36]="TriggerCloseUpdatePasswordVaultPopup",e[e.GetApiSelectors=37]="GetApiSelectors",e[e.GetActiveTabUrlInfo=38]="GetActiveTabUrlInfo",e[e.ReleaseNotifications=39]="ReleaseNotifications",e[e.GetCachedItem=40]="GetCachedItem",e[e.DeleteCachedItem=41]="DeleteCachedItem",e[e.CacheItem=42]="CacheItem",e[e.GetDataFromStore=43]="GetDataFromStore",e[e.SetDataToStore=44]="SetDataToStore",e[e.DeleteDataFromStore=45]="DeleteDataFromStore",e[e.SetEnvironment=46]="SetEnvironment",e[e.GetEnvironment=47]="GetEnvironment",e[e.GetBrowserSettings=48]="GetBrowserSettings",e[e.UpdateBrowserSetting=49]="UpdateBrowserSetting",e[e.ImportDesktopAgentPasswords=50]="ImportDesktopAgentPasswords",e[e.GetDesktopAgentStatus=51]="GetDesktopAgentStatus",e[e.PasswordGenerated=52]="PasswordGenerated",e[e.PasswordGeneratedResponse=53]="PasswordGeneratedResponse",e[e.GetVaultInfo=54]="GetVaultInfo",e[e.GetApplicationIdsByHost=55]="GetApplicationIdsByHost",e[e.MapCSVToPasswordVaults=56]="MapCSVToPasswordVaults",e[e.ImportPasswords=57]="ImportPasswords",e[e.GetImportHistory=58]="GetImportHistory",e[e.RequestTrustedBrowser=59]="RequestTrustedBrowser",e[e.CloseMobileRequestOverlay=60]="CloseMobileRequestOverlay",e[e.OpenMobileRequestOverlay=61]="OpenMobileRequestOverlay",e[e.CancelMobileRequest=62]="CancelMobileRequest",e[e.OpenOrganizationPortal=63]="OpenOrganizationPortal",e[e.OpenDownloadDesktopAppTab=64]="OpenDownloadDesktopAppTab",e[e.OpenInNewTab=65]="OpenInNewTab",e[e.GetTrustedBrowserPageData=66]="GetTrustedBrowserPageData",e[e.GetVaultsSharedBy=67]="GetVaultsSharedBy",e[e.GetVaultsSharedWith=68]="GetVaultsSharedWith",e[e.GetEmployeesSharedBy=69]="GetEmployeesSharedBy",e[e.GetEmployeesSharedWith=70]="GetEmployeesSharedWith",e[e.RevokeSharedWith=71]="RevokeSharedWith",e[e.RevokeSharedBy=72]="RevokeSharedBy",e[e.ReportSite=73]="ReportSite",e[e.Ping=74]="Ping",e[e.GeneratePairingCode=75]="GeneratePairingCode",e[e.ActivateMobile=76]="ActivateMobile",e[e.ProxyMessageToSender=77]="ProxyMessageToSender",e[e.SignUp=78]="SignUp",e[e.CheckRestrictions=79]="CheckRestrictions",e[e.MoveVaultToGroup=80]="MoveVaultToGroup",e[e.UpdateUserLanguage=81]="UpdateUserLanguage",e[e.ShowSuccessAlert=82]="ShowSuccessAlert",e[e.ShowErrorAlert=83]="ShowErrorAlert",e[e.ShowWarningAlert=84]="ShowWarningAlert",e[e.ShowInfoAlert=85]="ShowInfoAlert",e))(Tt||{});const At=Tt,Mt=e=>{const{organization:t,group:r,translationKey:a=R.LOGINS_TRANSLATION_KEY_ID}=e,{t:i}=(0,_.T_)(),s=(0,n.useMemo)((()=>{const{isPrivateKeychain:e}=t,{isMyAccounts:o}=r;return e||!o?i(t.translationKey):`${i(t.translationKey)} / ${i(r[a]||r.name)}`}),[a,r,t,i]);return(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,o.jsx)(lt,{text:`${i("common.organization")}:`}),(0,o.jsx)(ut,{ignoreTextOverFlow:!0,text:s})]})};var Ot=r(79585),Dt=r(59256),Vt=r(34047);const Lt={backdrop:ve.n},Et=(0,n.memo)((e=>{const{isOpen:t,handleConfirm:r,handleCancel:n}=e,{t:a}=(0,_.T_)();return(0,o.jsx)(Vt.Z,{open:t,slots:Lt,children:(0,o.jsxs)(Q.Z,{container:!0,p:2,spacing:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(be.ZP,{variant:"subtitle1",textAlign:"center",mb:2,children:a("unsavedChangesModal.title")})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(be.ZP,{variant:"body1",textAlign:"center",children:a("unsavedChangesModal.content")})}),(0,o.jsxs)(Q.Z,{item:!0,container:!0,spacing:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"text",onClick:r,color:"error",children:a("common.confirm")})}),(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"text",onClick:n,children:a("common.cancel")})})]})]})})}));var Bt=Object.defineProperty,Rt=Object.defineProperties,Wt=Object.getOwnPropertyDescriptors,Nt=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable,zt=(e,t,r)=>t in e?Bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_t=(e,t)=>{for(var r in t||(t={}))Ft.call(t,r)&&zt(e,r,t[r]);if(Nt)for(var r of Nt(t))Ut.call(t,r)&&zt(e,r,t[r]);return e},Gt=(e,t)=>Rt(e,Wt(t));const qt={sx:{wordBreak:"break-all"},variant:"h6",color:X.S1,lineClamp:2},Kt=e=>{const{title:t}=e;return t.length>25?(0,o.jsx)(Ot.Z,Gt(_t({},qt),{children:t})):(0,o.jsx)(be.ZP,Gt(_t({},qt),{children:t}))},Ht=(0,n.memo)((e=>{const{title:t,hasUnsavedChanges:r=!1,backPageRoute:a}=e,[i,s]=(0,n.useState)(!1),l=(0,v.s0)(),c=(0,n.useCallback)((()=>{r?s(!0):l(a||-1)}),[l,r,a]),d=(0,n.useCallback)((()=>{s(!1),l(-1)}),[l]),u=(0,n.useCallback)((()=>s(!1)),[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Q.Z,{container:!0,wrap:"nowrap",justifyContent:"space-between",alignItems:"center",flexShrink:0,columnSpacing:2,minHeight:50,sx:{backgroundColor:X.P4},px:2,children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(Dt.Z,{onClick:c})}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(Kt,{title:t})}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(Dt.Z,{className:"visibility-hidden"})})]}),i&&(0,o.jsx)(Et,{isOpen:i,handleConfirm:d,handleCancel:u})]})}));var $t=(e=>(e.AutofillPasswordRequest="autofillPasswordRequest",e.CopyPasswordRequest="copyPasswordRequest",e.ViewPasswordRequest="viewPasswordRequest",e.SecureNoteRequest="secureNoteRequest",e.ViewCreditCardRequest="viewCreditCardRequest",e.AutofillCreditCardRequest="autofillCreditCardRequest",e))($t||{});const Yt=$t,Qt=e=>{const{restrictions:t}=e,{t:r}=(0,_.T_)();return{restrictionsText:(0,n.useMemo)((()=>t.map((e=>r(z[e]))).join(", ")),[t,r])}},Jt=e=>{const{organization:t,restrictions:r}=e,{t:n}=(0,_.T_)(),{restrictionsText:a}=Qt({restrictions:r});return(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,o.jsx)(lt,{text:n("restrictions.restrictionsSetByLabel",{organizationName:n(t.translationKey)})}),(0,o.jsx)(ut,{text:a})]})};var Xt=r(1066),er=r(6719);const tr=e=>{if(!e)return;const t=(0,Xt.Z)(e)?e:(0,er.Gn)(e);g.tabs.create({url:t,active:!0})},rr=(0,n.memo)((e=>{const{text:t,lineClamp:r=2}=e,{t:a}=(0,_.T_)(),i=(0,n.useMemo)((()=>({title:a("common.launch"),cursorPointer:!0})),[a]),s=(0,n.useCallback)((()=>tr(t)),[t]);return(0,o.jsx)(Q.Z,{container:!0,mt:.5,children:(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(Ot.Z,{asLink:!0,tooltipProps:i,lineClamp:r,variant:"body1",onClick:s,className:"word-break-all",children:t})})})}));var or=r(67757),nr=r(1329),ar=r(15817),ir=(e=>(e[e.Password=0]="Password",e[e.CreditCard=1]="CreditCard",e[e.SecureNote=2]="SecureNote",e))(ir||{});const sr=ir;var lr=Object.defineProperty,cr=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,ur=Object.getOwnPropertySymbols,pr=Object.prototype.hasOwnProperty,gr=Object.prototype.propertyIsEnumerable,mr=(e,t,r)=>t in e?lr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hr=(e,t)=>{for(var r in t||(t={}))pr.call(t,r)&&mr(e,r,t[r]);if(ur)for(var r of ur(t))gr.call(t,r)&&mr(e,r,t[r]);return e},xr=(e,t)=>cr(e,dr(t));const vr=(0,n.memo)((e=>{const t=e,{type:r,ccType:n}=t,a=((e,t)=>{var r={};for(var o in e)pr.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&ur)for(var o of ur(e))t.indexOf(o)<0&&gr.call(e,o)&&(r[o]=e[o]);return r})(t,["type","ccType"]);return(0,o.jsxs)(o.Fragment,{children:[r===sr.Password&&(0,o.jsx)(or.Z,hr({},a)),r===sr.SecureNote&&(0,o.jsx)(nr.Z,xr(hr({},a),{children:(0,o.jsx)(le.Z,{color:X.i})})),r===sr.CreditCard&&(0,o.jsx)(nr.Z,xr(hr({},a),{children:(0,o.jsx)(ar.Z,{type:n,color:X.i,pl:.5})}))]})}));var yr=r(19011),jr=r(64487);const br={id:g.runtime.id,requestTimeout:3e4,importPasswordsChunkSize:1e3,wsReconnect:1e3,privateKeychainOrganizationId:"01010101-0101-0101-0101-010101010101",transifexSentryDSN:"https://9113d909062746d98f509d1faad73546@o4504514562359296.ingest.sentry.io/4505039646031872",transifexPopupToken:"1/30121c0789f1db83f55dcabe5bb676ece833fb35",transifexContentToken:"1/193974a0fd765acfb87612c2375f252987e4163d",useLocalTranslations:!1,desktopAgentAppName:"com.uniqkeynextgen.desktop",desktopTerminalAppName:"com.uniqkeynextgen.terminal",supportUrl:"https://uniqkey.zendesk.com/hc/en-gb",getApiSelectorsUrl:()=>`https://administration-api.${bt()}.next.uniqkey.eu/site/`,getApiUrl:()=>`https://organization-api-extension.${bt()}.next.uniqkey.eu`,getDesktopAppDownloadUrl:()=>Pt()?`https://uniqkey-desktop-${bt()}.s3.eu-central-1.amazonaws.com/uniqkey-import-agent-${bt()}.msi`:`https://uniqkey-desktop-${bt()}.s3.eu-central-1.amazonaws.com/uniqkey-import-agent-${bt()}.zip`,getSignalRConnectionUrl:()=>`https://organization-api-extension.${bt()}.next.uniqkey.eu/notifications`,getOrganizationPortalUrl:()=>Pt()?"https://app.next.uniqkey.eu/":`https://app.${bt()}.next.uniqkey.eu/`,sentryIgnoredErrors:["Cannot start a HubConnection","Request failed with status code 401","Non-Error exception captured with keys: message","WebSocket closed with status code: 1006 (no reason given)"]},Pr=jr.av,wr=(e,t)=>{jr.$e((r=>{t&&r.addBreadcrumb(t),jr.Tb(e)}))};var fr=r(61308),Cr=r(17560),Sr=r(38911),Zr=(e=>(e.Ping="ping",e.GetApplicationState="getApplicationState",e.GetOnBoardingStatus="getOnBoardingStatus",e.GetImportHistory="getImportHistory",e.GetEnvironment="getEnvironment",e.GetFilteredApplicationStateByApplication="getFilteredApplicationStateByApplication",e.FilterApplicationState="filterApplicationState",e.GetActiveTabUrlInfo="getActiveTabUrlInfo",e.GetDesktopAgentStatus="getDesktopAgentStatus",e.GetVaultInfo="getVaultInfo",e.GetBrowserSettings="getBrowserSettings",e.GetDataFromStore="getDataFromStore",e.GetTrustedBrowserPageData="getDataFromStore",e.GetVaultsSharedBy="getVaultsSharedBy",e.GetVaultsSharedWith="getVaultsSharedWith",e.GetEmployeesSharedWith="getEmployeesSharedWith",e.GetEmployeesSharedBy="getEmployeesSharedBy",e.GetServicesByApplicationId="getServicesByApplicationId",e.SearchServicesByDesktopAppName="searchServicesByDesktopAppName",e))(Zr||{});const Ir=Zr,kr=(0,n.memo)((e=>{var t,r;const{applicationId:a,dividerBottom:i=!1,open:l,onToggle:c}=e,[d,u]=(0,n.useState)(null!=l&&l),{sendBrowserMessage:p}=Ct(),{t:g}=(0,_.T_)(),m=(0,n.useCallback)((()=>{u((e=>!e))}),[]),{data:h}=(0,s.useQuery)([Ir.GetServicesByApplicationId,a],(()=>p({messageType:At.GetServicesByApplicationId,payload:{applicationId:a}})),{enabled:!!a}),{domainRules:x,desktopApplications:v}=null!=h?h:{},y=x||[],j=v||[],b=(null!=(t=null==y?void 0:y.length)?t:0)+(null!=(r=null==j?void 0:j.length)?r:0),P=b>1;return(0,o.jsx)(Q.Z,{container:!0,children:(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(fr.Z,{in:P,unmountOnExit:!0,children:(0,o.jsx)(it,{dividerBottom:i,children:(0,o.jsx)(Cr.Z,{expanded:null!=l?l:d,onChange:null!=c?c:m,PrimaryTypographyComponent:(0,o.jsx)(be.ZP,{variant:"caption",color:X.S6,children:g("linkedServices.title")}),SecondaryTypographyComponent:(0,o.jsx)(be.ZP,{variant:"body1",color:X.S4,children:g("linkedServices.subtitle",{totalCount:b})}),children:(0,o.jsx)(Sr.Z,{desktopApplications:j,domainRules:y,desktopApplicationsTitle:g("linkedServices.desktopApplications.title"),domainRulesTitle:g("linkedServices.domainRules.title")})})})})})})}));var Tr=r(57065);const Ar=(0,n.memo)((e=>{const{onClick:t}=e;return(0,o.jsx)(re.Z,{width:48,height:48,background:X.i,hoverBackground:X.i,activeBackground:X.i,color:X.S1,hoverColor:X.S1,activeColor:X.S1,hoverBorderColor:X.S3,activeBorderColor:X.S3,sx:U,onClick:t,children:(0,o.jsx)(Tr.Z,{})})})),Mr=e=>{const{group:t,vault:r,organization:o}=e,{sendBrowserMessage:a}=Ct(),{state:i}=Y(),{organizations:l,orderedGroupsGroupedByOrganizationWithoutSharedGroups:c}=i,d=(0,n.useMemo)((()=>{var e;return(null==(e=c[o.organizationId])?void 0:e.filter((e=>e.canAdd)).length)||0}),[c,o.organizationId]),{data:u,isLoading:p}=(0,s.useQuery)([Ir.GetVaultInfo,r.vaultId,t.groupId],(()=>a({messageType:At.GetVaultInfo,payload:{organizationId:o.organizationId,vaultId:r.vaultId,groupId:t.groupId}}))),{policies:g,groupVaultSharingInfo:m,vaultSharingInfo:h}=u||{},{canDelete:x=!1,canEdit:v=!1,canView:y=!1,canCopy:j=!1}=g||{},b=t.isMyAccounts&&o.isPrivateKeychain&&l.length>1,P=t.isMyAccounts&&d>1,w=b||P,f=t.isMyAccounts;return(0,n.useMemo)((()=>({isLoading:p,data:{policies:{canMove:w,canShare:f,canDelete:x,canEdit:v,canCopy:j,canView:y},vaultSharingInfo:h,groupVaultSharingInfo:m}})),[h,m,p,w,f,j,x,v,y])};var Or=r(15587);const Dr=e=>{const{authenticationType:t,desktopApplicationName:r}=e;return r?t===Or.AuthenticationType.Basic?r:`${r} ${t}`:""};var Vr=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const Lr={cursor:"pointer"},Er=e=>{var t,r,a,i,s,l,c,d,p;const{vault:g,group:m,organization:h}=e,[x,y]=(0,n.useState)(!1),[j,b]=(0,n.useState)(!1),[C,S]=(0,n.useState)(),{t:Z}=(0,_.T_)(),I=(0,v.s0)(),k=(0,n.useCallback)((()=>y(!0)),[]),T=(0,n.useCallback)((()=>y(!1)),[]),{showSuccess:A,showError:M}=(0,u.Z)(),{vaultId:O,organizationId:V,groupId:L,hasPassword:E,application:B}=g,{isLoading:R,data:W}=Mr({vault:g,organization:h,group:m}),{request:F,handleError:U}=kt(),{request:z,handleError:G}=kt(),q=(0,n.useCallback)((()=>Vr(void 0,null,(function*(){try{if(C)Le()(C);else{const{password:e}=yield F({messageType:At.RequestPasswordVaultSecureData,payload:{organizationId:V,id:O,groupId:L,withOverlay:!0,requestType:Yt.CopyPasswordRequest}});Le()(e)}A({text:Z("common.copied")})}catch(e){const{skipError:t,errorKey:r}=U(e);if(t)return;M({text:Z(r)}),wr(e,{message:"ViewLoginPage/handlePasswordCopyClick exception"})}}))),[F,C,O,L,V,U,M,A,Z]),K=(0,n.useCallback)((()=>Vr(void 0,null,(function*(){try{const e=!j;if(e){const{password:e}=yield F({messageType:At.RequestPasswordVaultSecureData,payload:{organizationId:V,id:O,groupId:L,withOverlay:!0,requestType:Yt.ViewPasswordRequest}});S(e)}e||S(null),b(e)}catch(e){const{skipError:t,errorKey:r}=U(e);if(t)return;M({text:Z(r)}),wr(e,{message:"ViewLoginPage/handleTogglePasswordViewClick exception"})}}))),[j,U,L,V,F,M,O,Z]),H=(0,n.useCallback)((()=>{try{const{username:e}=g;Le()(e),A({text:Z("common.copied")})}catch(e){M({text:Z("toasts.somethingWentWrong")}),wr(e,{message:"ViewLoginPage/handleUsernameCopyClick exception"})}}),[M,A,g,Z]),$=(0,n.useCallback)((()=>Vr(void 0,null,(function*(){try{y(!1),yield z({messageType:At.DeleteVault,payload:{vaultId:O,groupId:L,organizationId:h.organizationId,isPrivateKeychain:h.isPrivateKeychain}}),I(D.HomePage),A({text:Z("toasts.passwordHasBeenDeleted")})}catch(e){const{skipError:t,errorKey:r}=G(e);if(t)return;M({text:Z(r)}),wr(e,{message:"ViewLoginPage/handleDeleteVaultClick exception"})}}))),[h,O,L,z,G,I,M,A,Z]),Y=(0,n.useCallback)((()=>{I(w(O,L))}),[I,O,L]),ee=(0,n.useCallback)((()=>{I(P(O,L))}),[I,O,L]),te=(0,n.useCallback)((()=>{I(f(O,L))}),[I,O,L]),re=(0,n.useCallback)((e=>Z(e)),[Z]),oe=(0,n.useCallback)((e=>({label:e.groupName,key:e.groupId})),[]),ne=(0,n.useCallback)((()=>{I(D.SharingCenter,{state:{vaultId:O,groupId:L,vaultType:sr.Password}})}),[L,I,O]),{policies:ae,vaultSharingInfo:ie,groupVaultSharingInfo:se}=W;return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:g.name}),(0,o.jsx)(at,{background:X.S1,isLoading:R,children:(0,o.jsx)(Ee.Z,{children:(0,o.jsxs)(je.Z,{children:[(0,o.jsx)(st,{condition:!!(null==(t=null==g?void 0:g.application)?void 0:t.createdAtWebsite),children:(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",wrap:"nowrap",children:[(0,o.jsx)(Q.Z,{item:!0,mr:1,children:(0,o.jsx)(vr,{type:sr.Password,src:null==(r=null==g?void 0:g.application)?void 0:r.iconUrl,width:48,height:48,imgHeight:24,imgWidth:24,outlineColor:g.isTrusted&&X.L_})}),(0,o.jsxs)(Q.Z,{item:!0,xs:!0,children:[(0,o.jsx)(lt,{text:Z("viewVaultPage.webAddressTitle")}),(0,o.jsx)(rr,{text:null==(a=null==g?void 0:g.application)?void 0:a.createdAtWebsite})]})]})})}),(0,o.jsx)(st,{condition:!!(null==(i=null==g?void 0:g.application)?void 0:i.createdForDesktopApplicationName),children:(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",wrap:"nowrap",children:[(0,o.jsx)(Q.Z,{item:!0,mr:1,children:(0,o.jsx)(vr,{type:sr.Password,src:null==(s=null==g?void 0:g.application)?void 0:s.iconUrl,width:48,height:48,imgHeight:24,imgWidth:24,outlineColor:g.isTrusted&&X.L_})}),(0,o.jsxs)(Q.Z,{item:!0,xs:!0,children:[(0,o.jsx)(lt,{text:Z("viewVaultPage.desktopApplicationNameTitle")}),(0,o.jsx)(ut,{text:Dr({authenticationType:null==(l=null==g?void 0:g.application)?void 0:l.authenticationType,desktopApplicationName:null==(c=null==g?void 0:g.application)?void 0:c.createdForDesktopApplicationName})})]})]})})}),(0,o.jsx)(st,{condition:!!(null==g?void 0:g.username),children:(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,o.jsxs)(Q.Z,{item:!0,xs:!0,zeroMinWidth:!0,children:[(0,o.jsx)(lt,{text:Z("viewVaultPage.usernameTitle")}),(0,o.jsx)(ut,{text:null==g?void 0:g.username})]}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(gt,{children:(0,o.jsx)(pt,{children:(0,o.jsx)(ht,{onCopy:H})})})})]})})}),(0,o.jsx)(st,{condition:E,children:(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,o.jsxs)(Q.Z,{item:!0,xs:!0,zeroMinWidth:!0,children:[(0,o.jsx)(lt,{text:Z("viewVaultPage.passwordTitle")}),(0,o.jsx)(ut,{ignoreTextOverFlow:!0,breakSpaces:!0,text:C||N}),(0,o.jsx)(st,{condition:!!C,children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(je.Z,{mt:.5}),(0,o.jsx)(Be.Z,{password:C,getTranslation:re})]})})]}),(0,o.jsx)(st,{condition:ae.canView,children:(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsxs)(gt,{children:[(0,o.jsx)(pt,{children:(0,o.jsx)(Pe.Z,{onClick:K,children:j?(0,o.jsx)(Re.Z,{}):(0,o.jsx)(We.Z,{})})}),(0,o.jsx)(st,{condition:ae.canCopy,children:(0,o.jsx)(pt,{children:(0,o.jsx)(ht,{onCopy:q})})})]})})})]})})}),(0,o.jsx)(st,{condition:!!(null==B?void 0:B.applicationId),children:(0,o.jsx)(kr,{dividerBottom:!0,applicationId:null==B?void 0:B.applicationId})}),(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsx)(Mt,{organization:h,group:m})}),(0,o.jsx)(st,{condition:!!(null==(d=null==m?void 0:m.restrictions)?void 0:d.length),children:(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsx)(Jt,{restrictions:m.restrictions,organization:h})})}),(0,o.jsx)(st,{condition:(null==ie?void 0:ie.isOwner)&&!!(null==ie?void 0:ie.sharedCount),children:(0,o.jsx)(it,{dividerBottom:!0,onClick:ne,children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",sx:Lr,children:[(0,o.jsxs)(Q.Z,{item:!0,xs:!0,zeroMinWidth:!0,children:[(0,o.jsx)(lt,{text:Z("viewVaultPage.sharedWithTitle")}),(0,o.jsx)(ut,{text:Z("viewVaultPage.sharedWithText",{count:null==ie?void 0:ie.sharedCount})})]}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(Pe.Z,{children:(0,o.jsx)(Ne.Z,{height:15,width:7.5,color:X.i})})})]})})}),(0,o.jsx)(st,{condition:!!(null==(p=null==se?void 0:se.groups)?void 0:p.length),children:(0,o.jsxs)(it,{dividerBottom:!0,children:[(0,o.jsx)(lt,{text:Z("viewVaultPage.sharedWithTitle")}),(0,o.jsx)(Fe.Z,{dataset:null==se?void 0:se.groups,getMetadata:oe})]})}),(0,o.jsx)(st,{condition:!!(null==g?void 0:g.additionalInfo),children:(0,o.jsx)(it,{children:(0,o.jsx)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:(0,o.jsxs)(Q.Z,{item:!0,xs:!0,children:[(0,o.jsx)(lt,{text:Z("viewVaultPage.additionalInformationTitle")}),(0,o.jsx)(ut,{ignoreTextOverFlow:!0,breakSpaces:!0,text:g.additionalInfo})]})})})})]})})}),(0,o.jsxs)(st,{condition:ae.canDelete||ae.canEdit,children:[(0,o.jsx)(Ar,{onClick:k}),(0,o.jsxs)(ke,{isOpen:x,onClose:T,title:Z("actionDrawer.title"),children:[(0,o.jsx)(st,{condition:ae.canEdit,children:(0,o.jsx)(Ae,{onClick:ee,icon:(0,o.jsx)(Ue.Z,{}),title:Z("actionDrawer.editVault")})}),(0,o.jsx)(st,{condition:ae.canMove,children:(0,o.jsx)(Ae,{onClick:te,icon:(0,o.jsx)(ze.Z,{}),title:Z("actionDrawer.moveVault")})}),(0,o.jsx)(st,{condition:ae.canShare,children:(0,o.jsx)(Ae,{onClick:Y,icon:(0,o.jsx)(_e.Z,{}),title:Z("actionDrawer.shareVault")})}),(0,o.jsx)(st,{condition:ae.canDelete,children:(0,o.jsx)(Ae,{onClick:$,icon:(0,o.jsx)(Ge.Z,{color:X.iP}),title:Z("actionDrawer.deleteVault"),color:X.iP})})]})]})]})};var Br=r(17050),Rr=r(31562),Wr=r(32439),Nr=r(3532),Fr=r(85770),Ur=r(2009),zr=r(25933),_r=r(76083),Gr=r(40888),qr=r(29408),Kr=r(83516),Hr=r(65778),$r=r(56311),Yr=r(97046);const Qr=e=>e.groupId?`${e.vaultId}/${e.groupId}`:e.vaultId,Jr=(e,t,r)=>o=>{const{isPrivateKeychain:n=!0}=e[o.organizationId]||{};return o.isSharedGroup?t("common.sharedBy",{name:o.name}):n?t(W):`${t(o[r]||o.name)} / ${e[o.organizationId].name}`},Xr=(e,t)=>{const{excludePrivate:r=!1,excludeMyAccounts:o=!1}=null!=t?t:{};return e.filter((e=>{let t=e.canAdd&&!e.isSharedGroup;return t?(r&&(t=!e.isPrivateKeychain),o&&(t=!e.isMyAccounts),t):t}))},eo=e=>{const{groups:t,organizationsById:r,domain:o}=e;if(!o)return t;const n=t.filter((e=>r[e.organizationId].verifiedDomains.includes(o)));return n.length?n:t},to=(e="")=>{const[,t=""]=e.toLowerCase().trim().split("@");return t.toLowerCase()},ro=e=>{const{control:t,disabled:r,groupTranslationKey:a,autoSelect:i=!1,disablePortal:s=!0,defaultValue:l=null,name:c="group",value:d=null,setValue:p,username:g="",filterByVerifiedDomain:m=!1,excludePrivate:h=!1,excludeMyAccounts:x=!1,organizationId:v=null,placeholderTranslationKey:y="common.saveIn",labelTranslationKey:j="common.saveIn",valueNoInRangeErrorMessageKey:b="toasts.groupAccessTaken"}=e,{t:P}=(0,_.T_)(),{showError:w}=(0,u.Z)(),{state:f}=Y(),{orderedGroupsGroupedByOrganizationWithoutSharedGroups:C,orderedOrganizationsIdsWithPrivateKeychainInBottom:S,organizationsById:Z}=f,I=(0,n.useMemo)((()=>{if(v)return C[v];return S.map((e=>C[e])).flat()}),[C,S,v]),k=(0,n.useMemo)((()=>{const e=to(g),t=Xr(I,{excludePrivate:h,excludeMyAccounts:x});return m?eo({domain:e,organizationsById:Z,groups:t}):t}),[g,m,I,Z,h,x]),T=(0,n.useMemo)((()=>Jr(Z,P,a)),[Z,P,a]);return(0,n.useEffect)((()=>{if(!!!k.find((e=>e.groupId===(null==d?void 0:d.groupId)))){if(i){const e=(e=>{const{groups:t,organizationsById:r}=e,o=t.find((e=>r[e.organizationId].isPrivateKeychain));if(o)return o;const n=t.find((e=>e.isMyAccounts));if(n)return n;const[a]=t;return a})({groups:k,organizationsById:Z});p(c,e)}i||l!==d&&(p(c,null),w({text:P(b)}))}}),[d,k,p,i,Z,c,w,P,l,b]),(0,o.jsx)(Yr.Z,{fullWidth:!0,t:P,control:t,defaultValue:l,name:c,rules:{required:P("validation.required")},label:P(j),disabled:r,options:k,getOptionLabel:T,disablePortal:s,placeholder:P(y),optionKeyField:"groupId"})};var oo=(e=>(e.Website="Website",e.DesktopApp="DesktopApp",e))(oo||{});const no=oo;var ao=Object.defineProperty,io=Object.defineProperties,so=Object.getOwnPropertyDescriptors,lo=Object.getOwnPropertySymbols,co=Object.prototype.hasOwnProperty,uo=Object.prototype.propertyIsEnumerable,po=(e,t,r)=>t in e?ao(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,go=(e,t)=>{for(var r in t||(t={}))co.call(t,r)&&po(e,r,t[r]);if(lo)for(var r of lo(t))uo.call(t,r)&&po(e,r,t[r]);return e},mo=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const ho={typography:{color:X.S5}},xo=e=>e.map((e=>({id:e.applicationId,value:e.desktopApplicationName,label:Dr({authenticationType:e.authenticationType,desktopApplicationName:e.desktopApplicationName})}))),vo=e=>e.map((e=>({id:e.applicationId,label:e.domainRule}))),yo=(0,n.memo)((e=>{var t,r,a,i,s,l,c;const{defaultValues:d,onSubmit:p,formRef:g,organization:m,vaultInfo:h,isEdit:x=!1,onUnsavedChangesChange:v}=e,[y,j]=(0,n.useState)(!1),[b,P]=(0,n.useState)(!1),[w,f]=(0,n.useState)(!1),{password:C,passwordGeneratorProps:S,regenerate:Z}=(0,Nr.Z)({generateOnInit:!1}),{t:I}=(0,_.T_)(),{register:k,handleSubmit:T,control:A,formState:M,setValue:O,watch:D,trigger:V}=(0,Wr.cI)({defaultValues:d}),{errors:L,dirtyFields:E}=M,{showError:B}=(0,u.Z)(),{sendBrowserMessage:W}=Ct(),[N,F,U,z,G]=D(["password","username","group","hostType","applicationId"]),q=(0,n.useCallback)((()=>mo(void 0,null,(function*(){P((e=>!e))}))),[]);(0,n.useEffect)((()=>{C&&(O("password",C,{shouldDirty:!0}),V("password"))}),[C,O,V]);const K=(0,n.useCallback)((e=>I(e)),[I]),H=(0,n.useCallback)((e=>({label:e.groupName,key:e.groupId})),[]),$=(0,n.useMemo)((()=>({numberOfCharactersText:I("passwordGenerator.numberOfCharactersText"),lettersCheckboxLabel:I("passwordGenerator.lettersCheckboxLabel"),numbersCheckboxLabel:I("passwordGenerator.numbersCheckboxLabel"),specialCharactersCheckboxLabel:I("passwordGenerator.specialCharactersCheckboxLabel")})),[I]),Y=(0,n.useCallback)((()=>{j((e=>!e))}),[]),J=(0,n.useCallback)((e=>mo(void 0,null,(function*(){try{const t=e.trim();if(!t)return[];const{domainRules:r}=yield W({messageType:At.SearchServicesByUrl,payload:{url:t}});return r}catch(e){return B({text:I("common.somethingWentWrong")}),wr(e,{message:"CreateUpdateLoginForm/websitesAutocompleteQuery exception"}),[]}}))),[W,I,B]),ee=(0,n.useCallback)((e=>mo(void 0,null,(function*(){try{const{desktopApplications:t}=yield W({messageType:At.SearchServicesByDesktopAppName,payload:{desktopAppName:e}});return t}catch(e){return B({text:I("common.somethingWentWrong")}),wr(e,{message:"CreateUpdateLoginForm/desktopAppsAutocompleteQuery exception"}),[]}}))),[W,I,B]),te=(0,n.useCallback)((()=>{j(!1),O("applicationId",null),O("desktopApp",null),O("website",null)}),[O]),re=(0,n.useMemo)((()=>({shrink:!!N||void 0})),[N]),{groupVaultSharingInfo:oe}=null!=h?h:{},ne=!!Object.keys(E).length;return(0,n.useEffect)((()=>{v(ne)}),[v,ne]),(0,o.jsx)(Ee.Z,{children:(0,o.jsx)("form",{ref:g,onSubmit:T(p),children:(0,o.jsxs)(Q.Z,{container:!0,children:[(0,o.jsx)(it,{children:(0,o.jsx)(Fr.Z,{name:"name",control:A,fullWidth:!0,required:!0,error:!!(null==(t=null==L?void 0:L.name)?void 0:t.message),helperText:null==(r=null==L?void 0:L.name)?void 0:r.message,label:I("createUpdatePasswordVaultForm.nameLabel"),rules:{required:I("validation.required"),validate:e=>!(0,Ur.Z)(e)||I("validation.required")}})}),(0,o.jsx)(it,{children:(0,o.jsx)(Fr.Z,{name:"username",control:A,fullWidth:!0,error:!!(null==(a=null==L?void 0:L.username)?void 0:a.message),helperText:null==(i=null==L?void 0:L.username)?void 0:i.message,label:I("createUpdatePasswordVaultForm.usernameLabel")})}),(0,o.jsxs)(it,{children:[(0,o.jsx)(zr.Z,{fullWidth:!0,buttonProps:{text:I("passwordGenerator.generateUppercased"),onClick:()=>{f(!0),Z()}},type:b?"text":"password",error:!!(null==(s=null==L?void 0:L.password)?void 0:s.message),helperText:null==(l=null==L?void 0:L.password)?void 0:l.message,label:I("createUpdatePasswordVaultForm.passwordLabel"),InputLabelProps:re,InputProps:(ae=go({},k("password")),ie={endAdornment:(0,o.jsx)(_r.Z,{position:"end",children:(0,o.jsx)(Pe.Z,{onClick:q,children:b?(0,o.jsx)(Re.Z,{}):(0,o.jsx)(We.Z,{})})})},io(ae,so(ie)))}),(0,o.jsxs)(fr.Z,{component:Q.Z,in:!!N,item:!0,xs:12,children:[(0,o.jsx)(je.Z,{mt:3}),!!N&&(0,o.jsx)(Be.Z,{password:N,getTranslation:K})]}),(0,o.jsxs)(fr.Z,{component:Q.Z,in:!!w,item:!0,xs:12,children:[(0,o.jsx)(je.Z,{mt:3}),(0,o.jsx)(Gr.Z,go({localization:$},S))]})]}),(0,o.jsxs)(Q.Z,{container:!0,px:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(be.ZP,{variant:"caption",color:X.S5,children:I("common.select")})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(qr.Z,{onChange:te,control:A,name:"hostType",defaultValue:d.hostType,children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(Kr.Z,{value:no.Website,control:(0,o.jsx)(Hr.Z,{}),label:I("createUpdatePasswordVaultForm.websiteLabel"),componentsProps:ho})}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(Kr.Z,{value:no.DesktopApp,control:(0,o.jsx)(Hr.Z,{}),label:I("createUpdatePasswordVaultForm.desktopLabel"),componentsProps:ho})})]})})})]}),(0,o.jsx)(it,{children:(0,o.jsx)($r.Z,{t:I,websitesOptionsParser:vo,desktopAppsOptionsParser:xo,websitesDatasourceRequest:J,desktopAppsDatasourceRequest:ee,control:A,setValue:O,vaultApplicationType:z,desktopAppPlaceholder:I("createUpdatePasswordVaultForm.desktopPlaceholder"),desktopAppLabel:I("createUpdatePasswordVaultForm.desktopLabel"),websiteLabel:I("createUpdatePasswordVaultForm.websiteLabel"),websitePlaceholder:I("createUpdatePasswordVaultForm.websitePlaceholder"),noSpacesValidationErrorMessage:I("validation.invalidSpaces"),applicationId:G})}),(0,o.jsx)(kr,{applicationId:G,open:y,onToggle:Y}),(0,o.jsx)(st,{condition:x,children:(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsx)(Mt,{organization:m,group:U})})}),(0,o.jsx)(st,{condition:!x,children:(0,o.jsx)(it,{children:(0,o.jsx)(ro,{autoSelect:!0,filterByVerifiedDomain:!0,value:U,setValue:O,username:F,control:A,defaultValue:null==d?void 0:d.group,disabled:x,groupTranslationKey:R.LOGINS_TRANSLATION_KEY_ID})})}),(0,o.jsx)(st,{condition:!!(null==(c=null==oe?void 0:oe.groups)?void 0:c.length),children:(0,o.jsxs)(it,{dividerBottom:!0,children:[(0,o.jsx)(lt,{text:I("viewVaultPage.sharedWithTitle")}),(0,o.jsx)(Fe.Z,{dataset:null==oe?void 0:oe.groups,getMetadata:H})]})}),(0,o.jsx)(it,{children:(0,o.jsx)(Fr.Z,{name:"additionalInfo",control:A,multiline:!0,minRows:3,maxRows:9,fullWidth:!0,label:I("createUpdatePasswordVaultForm.additionalInfoLabel")})})]})})});var ae,ie}));var jo=Object.defineProperty,bo=Object.defineProperties,Po=Object.getOwnPropertyDescriptors,wo=Object.getOwnPropertySymbols,fo=Object.prototype.hasOwnProperty,Co=Object.prototype.propertyIsEnumerable,So=(e,t,r)=>t in e?jo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Zo=(e,t)=>{for(var r in t||(t={}))fo.call(t,r)&&So(e,r,t[r]);if(wo)for(var r of wo(t))Co.call(t,r)&&So(e,r,t[r]);return e},Io=(e,t)=>bo(e,Po(t)),ko=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const To=(0,n.memo)((e=>{const{vault:t,group:r}=e,[a,i]=(0,n.useState)(!1),{state:l}=Y(),c=(0,n.useRef)(),d=(0,v.s0)(),{t:p}=(0,_.T_)(),{sendBrowserMessage:g}=Ct(),{data:m,isLoading:h}=(0,s.useQuery)([Ir.GetVaultInfo,t.vaultId,r.groupId],(()=>g({messageType:At.GetVaultInfo,payload:{organizationId:t.organizationId,vaultId:t.vaultId,groupId:r.groupId}}))),{organizationsById:x}=l,{showError:y,showWarning:j,showSuccess:b}=(0,u.Z)(),P=(0,n.useCallback)((e=>i(e)),[]),w=(0,n.useCallback)((e=>ko(void 0,null,(function*(){try{const{password:r,hostType:o,website:n,desktopApp:a,additionalInfo:i,name:s,username:l,group:c}=e,{organizationId:u,groupId:m}=c;let h={name:s,additionalInfo:i,organizationId:u,groupId:m,password:r,username:l,vaultId:t.vaultId};o===no.Website&&(h=Zo(Zo({},h),n&&{website:n,desktopApp:null,applicationId:null})),o===no.DesktopApp&&(h=Zo(Zo({},h),(null==a?void 0:a.value)&&{website:null,desktopApp:a.value,applicationId:a.id})),yield g({messageType:At.UpdatePasswordVault,payload:h}),d(D.HomePage),r?j({text:p("common.openMobileApp")}):b({text:p("toasts.passwordHasBeenUpdated")})}catch(e){y({text:p("toasts.somethingWentWrong")}),wr(e,{message:"EditLoginPage/handleLoginUpdate exception"})}}))),[t.vaultId,d,g,y,b,j,p]),f=(0,n.useCallback)((()=>ko(void 0,null,(function*(){c.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}))),[c]),C=(0,n.useMemo)((()=>{const{additionalInfo:e,name:o,username:n,application:a}=t,{createdAtWebsite:i,createdForDesktopApplicationName:s,applicationId:l,authenticationType:c}=a||{};let d={name:o,additionalInfo:e,username:n,applicationId:l,password:"",group:r,hostType:no.Website};return i&&(d=Io(Zo({},d),{website:i})),s&&(d=Io(Zo({},d),{hostType:no.DesktopApp,desktopApp:{id:l,label:Dr({authenticationType:c,desktopApplicationName:s}),value:s}})),d}),[t,r]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:t.name,hasUnsavedChanges:a}),(0,o.jsx)(at,{background:X.S1,isLoading:h,children:(0,o.jsx)(yo,{vaultInfo:m,organization:x[t.organizationId],isEdit:!0,formRef:c,defaultValues:C,onSubmit:w,onUnsavedChangesChange:P})}),(0,o.jsx)(Br.Z,{backgroundColor:X.i,sx:F,onClick:f,children:(0,o.jsx)(Rr.Z,{color:X.S1})})]})}));var Ao=Object.defineProperty,Mo=Object.getOwnPropertySymbols,Oo=Object.prototype.hasOwnProperty,Do=Object.prototype.propertyIsEnumerable,Vo=(e,t,r)=>t in e?Ao(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Lo=(e,t)=>{for(var r in t||(t={}))Oo.call(t,r)&&Vo(e,r,t[r]);if(Mo)for(var r of Mo(t))Do.call(t,r)&&Vo(e,r,t[r]);return e},Eo=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const Bo=()=>{const[e,t]=(0,n.useState)(!1),r=(0,v.s0)(),a=(0,n.useRef)(),{t:i}=(0,_.T_)(),{sendBrowserMessage:l}=Ct(),{showError:c,showWarning:d}=(0,u.Z)(),{data:p}=(0,s.useQuery)(Ir.GetActiveTabUrlInfo,(()=>l({messageType:At.GetActiveTabUrlInfo}))),g=(0,n.useCallback)((e=>t(e)),[]),m=(0,n.useCallback)((e=>Eo(void 0,null,(function*(){try{const{password:t,hostType:o,website:n,desktopApp:a,additionalInfo:s,name:c,username:u,group:p}=e,{organizationId:g}=p;let m={name:c,additionalInfo:s,organizationId:g,password:t,username:u,groupId:p.groupId};o===no.Website&&(m=Lo(Lo({},m),n&&{website:n})),o===no.DesktopApp&&(m=Lo(Lo({},m),(null==a?void 0:a.value)&&{desktopApp:a.value,applicationId:a.id})),yield l({messageType:At.CreatePasswordVault,payload:m}),r(D.HomePage),d({text:i("common.openMobileApp")})}catch(e){c({text:i("toasts.somethingWentWrong")}),wr(e,{message:"CreateLoginPage/handleVaultCreate exception"})}}))),[c,r,l,d,i]),h=(0,n.useCallback)((()=>Eo(void 0,null,(function*(){a.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}))),[a]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:i("createPasswordPage.title"),hasUnsavedChanges:e}),(0,o.jsx)(at,{background:X.S1,children:(0,o.jsx)(yo,{defaultValues:{name:p.host,website:p.host,password:"",applicationId:null,hostType:no.Website,username:"",additionalInfo:""},formRef:a,onSubmit:m,onUnsavedChangesChange:g})}),(0,o.jsx)(Br.Z,{backgroundColor:X.i,sx:F,onClick:h,children:(0,o.jsx)(Rr.Z,{color:X.S1})})]})};var Ro=r(72452),Wo=r(11556),No=r(53308),Fo=r(12041),Uo=r(51470),zo=r(48672),_o=r(21921),Go=r(8502),qo=r(46768),Ko=r(28377),Ho=r(63303),$o=r(5222),Yo=r(75441),Qo=r(90138);const Jo={wordBreak:"break-all"},Xo=e=>{const{name:t="",email:r,handleUserProfileEditClick:a}=e,[i,s]=(0,n.useState)(!1),{t:l}=(0,_.T_)(),c=(0,n.useCallback)((()=>{s(!0)}),[]),d=(0,n.useCallback)((()=>{s(!1)}),[]);return(0,o.jsxs)(Q.Z,{container:!0,p:2,alignItems:"center",flexWrap:"nowrap",children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(nr.Z,{width:48,height:48,children:(0,o.jsx)(Qo.Z,{width:36,height:36,color:X.S5})})}),(0,o.jsx)(Q.Z,{item:!0,xs:!0,children:(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{variant:"h6",color:X.S5,sx:Jo,asLink:i,onMouseEnter:c,onMouseLeave:d,onClick:a,children:t.trim()?t:l("userProfile.emptyNamePlaceholder")})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,color:X.S4,children:(0,o.jsx)(be.ZP,{variant:"subtitle2",sx:Jo,children:r})})]})})]})};const en=()=>{const[e,t]=(0,n.useState)(!1),{sendBrowserMessage:r}=Ct(),{isPopupWindow:a}=h(),{t:i}=(0,_.T_)(),s=(0,n.useCallback)((()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{if(t(!0),yield r({messageType:At.Logout}),t(!1),!a)return;g.tabs.create({url:O(D.WelcomePage),active:!0})}catch(e){t(!1),wr(e,{message:"LogoutRow/handleLogoutClick exception"})}}))),[r,a]);return(0,o.jsx)(Q.Z,{container:!0,mt:1,p:2,children:(0,o.jsx)(mt.Z,{fullWidth:!0,isLoading:e,variant:"outlined",onClick:s,children:i("common.logout")})})};var tn=r(82013),rn=r(25344),on=r(76113);const nn={backdrop:ve.n},an=e=>{var t,r,n;const{onClose:a,isOpen:i,onUserProfileUpdate:s}=e,{state:l}=Y(),{t:c}=(0,_.T_)(),{name:d}=l.authStatus.user,{handleSubmit:u,formState:p,control:g}=(0,Wr.cI)({defaultValues:{name:d}});return(0,o.jsx)(Vt.Z,{open:i,onClose:a,slots:nn,children:(0,o.jsxs)("form",{onSubmit:u(s),children:[(0,o.jsx)(tn.Z,{onClose:a,children:c("editUserProfileModal.title")}),(0,o.jsx)(rn.Z,{children:(0,o.jsx)(Q.Z,{container:!0,children:(0,o.jsx)(Fr.Z,{name:"name",control:g,autoFocus:!0,fullWidth:!0,label:c("editUserProfileModal.nameFieldLabel"),error:!!(null==(t=null==p?void 0:p.errors)?void 0:t.name),helperText:null==(n=null==(r=null==p?void 0:p.errors)?void 0:r.name)?void 0:n.message,rules:{required:c("validation.required"),validate:e=>!(0,Ur.Z)(e)||c("validation.required")}})})}),(0,o.jsx)(on.Z,{children:(0,o.jsxs)(Q.Z,{container:!0,spacing:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,type:"submit",children:c("common.save")})}),(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"outlined",onClick:a,children:c("common.cancel")})})]})})]})})};var sn;const ln=(0,r(51206).getParser)(navigator.userAgent),cn="Safari"===ln.getBrowserName(),dn="macOS"===(null==(sn=ln.getOS())?void 0:sn.name),un="Firefox"===ln.getBrowserName();var pn=Object.defineProperty,gn=Object.getOwnPropertySymbols,mn=Object.prototype.hasOwnProperty,hn=Object.prototype.propertyIsEnumerable,xn=(e,t,r)=>t in e?pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vn=(e,t)=>{for(var r in t||(t={}))mn.call(t,r)&&xn(e,r,t[r]);if(gn)for(var r of gn(t))hn.call(t,r)&&xn(e,r,t[r]);return e},yn=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const jn={width:24,height:24,color:X.S5},bn=()=>{const{t:e}=(0,_.T_)(),t=(0,v.s0)(),{state:r}=Y(),{sendBrowserMessage:a}=Ct(),{showError:i,showSuccess:s}=(0,u.Z)(),{organizationsById:l}=r,{hasActiveAdmins:c,email:d,name:p}=r.authStatus.user,[m,h]=(0,n.useState)(!1),x=(0,n.useMemo)((()=>!Object.values(l).filter((e=>e.trustedBrowserAllowed)).length),[l]),y=(0,n.useCallback)((()=>yn(void 0,null,(function*(){h(!0)}))),[]),j=(0,n.useCallback)((()=>{h(!1)}),[]),b=(0,n.useCallback)((t=>yn(void 0,null,(function*(){try{yield a({messageType:At.UpdateUser,payload:t}),h(!1),s({text:e("toasts.profileUpdatedMessage")})}catch(t){i({text:e("toasts.somethingWentWrong")}),wr(t,{message:"MenuPage/handleUserProfileUpdate exception"})}}))),[a,i,s,e]),P=(0,n.useMemo)((()=>[{hidden:x,icon:(0,o.jsx)(Ro.Z,vn({},jn)),onClick:()=>{t(D.TrustedBrowserPage)},title:e("menuPage.trustBrowserMenuItem")},{hidden:!c,icon:(0,o.jsx)(le.Z,vn({},jn)),onClick:()=>{a({messageType:At.OpenOrganizationPortal})},title:e("menuPage.adminPortalMenuItem")},{icon:(0,o.jsx)(Wo.Z,vn({},jn)),onClick:()=>t(D.ReportSite),title:e("menuPage.reportSiteMenuItem")},{icon:(0,o.jsx)(_e.Z,vn({},jn)),onClick:()=>{t(D.SharingCenter)},title:e("menuPage.sharingCenterMenuItem")},{icon:(0,o.jsx)(No.Z,vn({},jn)),onClick:()=>{t(D.PasswordGeneratorPage)},title:e("menuPage.passwordGeneratorMenuItem")},{icon:(0,o.jsx)(Fo.Z,vn({},jn)),onClick:()=>{a({messageType:At.OpenInNewTab,payload:{url:O(D.ImportFromCsvPage),active:!0}})},title:e("menuPage.importLoginsMenuItem")},{icon:(0,o.jsx)(Uo.Z,vn({},jn)),onClick:()=>{g.tabs.create({url:O(D.ImportHistoryPage),active:!0})},title:e("menuPage.importHistoryMenuItem")},{icon:(0,o.jsx)(zo.Z,vn({},jn)),onClick:()=>{t(D.ChangeLanguage)},title:e("menuPage.changeLanguageMenuItem")},{hidden:cn,icon:(0,o.jsx)(_o.Z,vn({},jn)),onClick:()=>{t(D.ExportToCSV)},title:e("menuPage.exportLoginsMenuItem")},{hidden:cn,icon:(0,o.jsx)(Go.Z,vn({},jn)),onClick:()=>{t(D.BrowserSettingsPage)},title:e("menuPage.browserSettingMenuItem")},{icon:(0,o.jsx)(qo.Z,vn({},jn)),onClick:()=>{a({messageType:At.OpenInNewTab,payload:{url:br.supportUrl,active:!0}})},title:e("menuPage.helpAndSupportMenuItem")}]),[x,c,t,a,e]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:e("menuPage.title"),backPageRoute:D.HomePage}),(0,o.jsx)(at,{children:(0,o.jsxs)(Ee.Z,{children:[(0,o.jsx)(Xo,{name:p,email:d,handleUserProfileEditClick:y}),(0,o.jsx)(te.Z,{}),(0,o.jsx)(Ko.Z,{disablePadding:!0,children:P.map((e=>(0,o.jsx)(Ho.Z,{disableGutters:!0,disablePadding:!0,sx:{display:e.hidden?"none":"initial"},children:(0,o.jsxs)($o.Z,{onClick:e.onClick,children:[e.icon,(0,o.jsx)(je.Z,{mr:1}),(0,o.jsx)(Yo.Z,{primary:(0,o.jsx)(be.ZP,{variant:"subtitle1",color:X.S5,noWrap:!0,children:e.title})})]})},e.title)))}),(0,o.jsx)(en,{})]})}),m&&(0,o.jsx)(an,{isOpen:m,onClose:j,onUserProfileUpdate:b})]})};var Pn=r(60226),wn=Object.defineProperty,fn=Object.getOwnPropertySymbols,Cn=Object.prototype.hasOwnProperty,Sn=Object.prototype.propertyIsEnumerable,Zn=(e,t,r)=>t in e?wn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,In=(e,t)=>{for(var r in t||(t={}))Cn.call(t,r)&&Zn(e,r,t[r]);if(fn)for(var r of fn(t))Sn.call(t,r)&&Zn(e,r,t[r]);return e};const kn=()=>{const{t:e}=(0,_.T_)(),{showSuccess:t}=(0,u.Z)(),{password:r,passwordGeneratorProps:a,regenerate:i}=(0,Nr.Z)(),s=(0,n.useCallback)((r=>{Le()(r),t({text:e("common.copiedToClipboard")})}),[t,e]),l=(0,n.useCallback)((t=>e(t)),[e]),c=(0,n.useMemo)((()=>({numberOfCharactersText:e("passwordGenerator.numberOfCharactersText"),lettersCheckboxLabel:e("passwordGenerator.lettersCheckboxLabel"),numbersCheckboxLabel:e("passwordGenerator.numbersCheckboxLabel"),specialCharactersCheckboxLabel:e("passwordGenerator.specialCharactersCheckboxLabel")})),[e]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:e("passwordGeneratorPage.title")}),(0,o.jsxs)(at,{p:2,justifyContent:"space-between",background:X.S1,children:[(0,o.jsx)(Q.Z,{container:!0,mt:2,px:4,children:(0,o.jsx)(be.ZP,{variant:"body1",align:"center",color:X.S6,children:e("passwordGeneratorPage.description")})}),(0,o.jsx)(Q.Z,{container:!0,justifyContent:"center",alignItems:"center",minHeight:"130px",children:(0,o.jsx)(Pn.Z,{text:r,onCopy:s,tooltipTitle:e("common.copy")})}),(0,o.jsx)(Q.Z,{container:!0,children:r&&(0,o.jsx)(Be.Z,{password:r,getTranslation:l})}),(0,o.jsx)(Q.Z,{container:!0,mt:2,children:(0,o.jsx)(Q.Z,{item:!0,xs:!0,children:(0,o.jsx)(Gr.Z,In({localization:c},a))})}),(0,o.jsx)(Q.Z,{container:!0,mt:3,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"outlined",icon:(0,o.jsx)(No.Z,{}),onClick:i,children:e("passwordGenerator.generate")})})]})]})};var Tn=r(47370),An=r(12066),Mn=r(88688),On=r(32927),Dn=r(66533),Vn=r(22160),Ln=r(90878),En=r(99055),Bn=Object.defineProperty,Rn=Object.defineProperties,Wn=Object.getOwnPropertyDescriptors,Nn=Object.getOwnPropertySymbols,Fn=Object.prototype.hasOwnProperty,Un=Object.prototype.propertyIsEnumerable,zn=(e,t,r)=>t in e?Bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const _n={width:"100%",height:"90vh",display:"flex",flexDirection:"column"},Gn=e=>{const{children:t,maxWidth:r=1100,minWidth:a=850}=e,i=(0,n.useMemo)((()=>{return e=((e,t)=>{for(var r in t||(t={}))Fn.call(t,r)&&zn(e,r,t[r]);if(Nn)for(var r of Nn(t))Un.call(t,r)&&zn(e,r,t[r]);return e})({},_n),Rn(e,Wn({maxWidth:r,minWidth:a}));var e}),[r,a]);return(0,o.jsx)(Q.Z,{container:!0,className:"min-height-100vh",alignItems:"center",justifyContent:"center",flexDirection:"column",children:(0,o.jsx)(Ln.Z,{sx:i,children:t})})},qn=e=>{const{containerPadding:t,actionsHeight:r}=e,o=(0,n.useCallback)((()=>5*window.innerHeight/100+t+r),[t,r]),[a,i]=(0,n.useState)(o),s=(0,n.useMemo)((()=>(0,G.throttle)((()=>i(o())),200)),[o]);return(0,n.useEffect)((()=>(window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)})),[s]),{bottomMargin:a}};var Kn=r(72632);const Hn=e=>{const{children:t,maxWidth:r="lg",p:a=0}=e,{isPopupWindow:i}=h(),s=(0,n.useMemo)((()=>({p:a})),[a]);return(0,o.jsx)(Kn.Z,{component:"main",disableGutters:i,maxWidth:r,className:"min-height-100vh",sx:s,children:t})};var $n=r(98484);const Yn=e=>{const{title:t,subtitle:r}=e,a=(0,n.useMemo)((()=>Array.isArray(r)?r.map((e=>{const{text:t,variant:r}=e;return(0,o.jsx)(be.ZP,{variant:r,align:"center",color:X.S5,children:t},(0,$n.qs)())})):(0,o.jsx)(be.ZP,{variant:"body1",align:"center",color:X.S5,children:r})),[r]);return(0,o.jsxs)(Q.Z,{container:!0,mt:4,children:[(0,o.jsx)(Q.Z,{item:!0,container:!0,justifyContent:"center",alignItems:"center",children:(0,o.jsx)(be.ZP,{variant:"h4",align:"center",color:X.S6,children:t})}),r&&(0,o.jsx)(Q.Z,{justifyContent:"center",alignItems:"center",item:!0,container:!0,mt:2,children:(0,o.jsx)(Q.Z,{item:!0,xs:9,children:a})})]})},Qn={height:"100%"},Jn=e=>{const{children:t,component:r="div",onSubmit:n}=e;return(0,o.jsx)(Ee.Z,{sx:Qn,children:(0,o.jsx)(Q.Z,{component:r,flex:1,p:4,container:!0,onSubmit:n,alignItems:"center",direction:"column",justifyContent:"space-between",wrap:"nowrap",height:"100%",children:t})})};const Xn={width:100},ea={draggable:!1},ta=[],ra=(0,n.memo)((e=>{const{nextButtonTranslationKey:t,isOnboarding:r}=e,a=(0,v.s0)(),{t:i}=(0,_.T_)(),{sendBrowserMessage:l}=Ct(),{localization:c}=(0,Tn.Z)({}),{bottomMargin:d}=qn({containerPadding:32,actionsHeight:64}),{state:u}=Y(),{organizationsById:p}=u,{state:g}=(0,v.TH)(),{skipPasswordsDelete:m=!1}=null!=g?g:{},{data:h,isLoading:x}=(0,s.useQuery)(Ir.GetImportHistory,(()=>l({messageType:At.GetImportHistory})),{refetchInterval:An.Z.TwoSeconds}),y=null!=h?h:ta,{createColumns:j}=(0,Mn.Z)(),b=(0,n.useMemo)((()=>j([{title:"#",width:"50px",sorting:!1,render:e=>(0,o.jsx)(Ot.Z,{variant:"body2",children:e.tableData.index+1})},{title:i("importHistoryPage.keychainColumn"),sorting:!1,render:e=>{var t;return(0,o.jsx)(Ot.Z,{variant:"body2",children:i(null==(t=p[e.organizationId])?void 0:t.translationKey)})},width:"26%"},{title:i("importHistoryPage.progressColumn"),sorting:!1,width:"20%",render:e=>(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",justifyContent:"start",columnGap:1,children:[(0,o.jsx)(Q.Z,{item:!0,width:100,children:(0,o.jsx)(On.Z,{value:e.processed/e.total*100,sx:Xn})}),(0,o.jsx)(Q.Z,{item:!0,xs:!0,children:(0,o.jsxs)(Ot.Z,{variant:"body2",children:[e.processed,"/",e.total]})})]})},{title:i("importHistoryPage.createdColumn"),sorting:!1,render:e=>(0,o.jsx)(Ot.Z,{variant:"body2",color:0===e.created?X.S4:X.JR,children:e.created}),width:"12%"},{title:i("importHistoryPage.failedColumn"),sorting:!1,render:e=>(0,o.jsx)(Ot.Z,{variant:"body2",color:0===e.created?X.S4:X.sf,children:e.failed}),width:"12%"},{title:i("importHistoryPage.statusColumn"),sorting:!1,render:e=>(0,o.jsx)(Ot.Z,{variant:"body2",children:i(`importHistoryPage.statuses.${e.status}`)}),width:"13%"},{title:i("importHistoryPage.createdAtColumn"),sorting:!1,render:e=>(0,o.jsx)(Ot.Z,{variant:"body2",children:(0,Dn.p6)({date:e.createdAt},Vn.Z.FULL)}),width:"17%"}])),[j,p,i]),P=(0,n.useCallback)((()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){if(cn){if(r)return void(yield l({messageType:At.OnBoardingFinished}));a(D.HomePage)}a(D.OnboardingBrowserSettingsPage,{state:{skipPasswordsDelete:m}})}))),[l,a,r,m]);return(0,o.jsx)(Hn,{maxWidth:!1,children:(0,o.jsxs)(Gn,{minWidth:"100%",children:[(0,o.jsx)(Yn,{title:i("importHistoryPage.title"),subtitle:i("importHistoryPage.subtitle")}),(0,o.jsxs)(Jn,{children:[(0,o.jsx)(Q.Z,{container:!0,flexDirection:"column",flex:1,children:(0,o.jsx)(Ln.Z,{children:(0,o.jsx)(En.Z,{perPage:y.length,totalItems:y.length,activePage:0,isLoading:x,hidePagination:!0,localization:c,t:i,rowHeight:51,columns:b,data:y,options:ea,onPerPageChange:G.noop,onColumnOrderDirectionChange:G.noop,onActivePageChange:G.noop,onColumnOrderByChange:G.noop,rowSelectByKey:"sessionId",bottomMargin:d})})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,width:"100%",mt:2,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,onClick:P,children:i(t)})})})]})]})})}));var oa=r(20966),na=r(92349),aa=r(63262),ia=r(80109),sa=r(4030),la=Object.defineProperty,ca=Object.defineProperties,da=Object.getOwnPropertyDescriptors,ua=Object.getOwnPropertySymbols,pa=Object.prototype.hasOwnProperty,ga=Object.prototype.propertyIsEnumerable,ma=(e,t,r)=>t in e?la(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ha=(e,t)=>{for(var r in t||(t={}))pa.call(t,r)&&ma(e,r,t[r]);if(ua)for(var r of ua(t))ga.call(t,r)&&ma(e,r,t[r]);return e},xa=(e,t)=>ca(e,da(t));const va={name:{label:"importMappingPage.nameLabel",value:"name"},login:{label:"importMappingPage.loginLabel",value:"login"},password:{label:"importMappingPage.passwordLabel",value:"password"},webAddress:{label:"importMappingPage.webAddressLabel",value:"webAddress"},additionalInfo:{label:"importMappingPage.additionalInfoLabel",value:"additionalInfo"},totp:{label:"importMappingPage.totpLabel",value:"totp"},none:{label:"importMappingPage.noneLabel",value:"none"}},ya={[va.webAddress.value]:{keywords:["url","webaddress","web_address","webAddress","site","web site","uri","Login_URL","password url","login_uri"]},[va.name.value]:{keywords:["name","account","service","title","loginName"]},[va.login.value]:{keywords:["username","login","login name","user","login_username","password login"]},[va.password.value]:{keywords:["password","login_password"]},[va.additionalInfo.value]:{keywords:["extra","comments","additional","notes","Description"]},[va.totp.value]:{keywords:["totp","twoFA","otpAuth","login_totp"]},[va.none.value]:{keywords:[]}},ja=["name","username","password","url","web","totp","comments","account","site","extra","login"],ba=()=>{const{t:e}=(0,_.T_)();return{prepare:(0,n.useCallback)((t=>{const{data:r,unique:o}=t,[n,...a]=r,i=n.length,s=n.join("+").toLowerCase(),l=ja.map((e=>s.toLowerCase().includes(e.toLowerCase()))).filter((e=>e)).length>=3,c=l?a:r,d=new Map;c.forEach((e=>{d.set(e.join(""),e)}));const u=Array.from(d.values()),p=o?u:c,g=(l?n:Array.from(Array(i).keys()).map((e=>e.toString()))).reduce(((t,r,o)=>{const{headers:n,autoMapping:a}=t;if(!l)return{autoMapping:a,headers:xa(ha({},n),{[o]:{label:e("common.column",{index:o+1}),value:o.toString()}})};const i=r.trim().toLowerCase(),s=Object.keys(va),c=s.map((e=>ya[e].keywords.some((e=>e.trim().toLowerCase()===i)))).findIndex((e=>e)),d=c>=0,u=xa(ha({},n),{[o]:{label:r,value:o.toString()}});if(!d)return{autoMapping:a,headers:u};const p=va[s[c]];return{autoMapping:xa(ha({},a),{[p.value]:{value:o.toString()}}),headers:u}}),{headers:{[va.none.value]:{label:va.none.label,value:va.none.value}},autoMapping:{[va.none.value]:{value:va.none.value}}}),{headers:m,autoMapping:h}=g;return{rows:p,hasHeaders:l,headers:m,autoMapping:h}}),[e])}};class Pa extends oa.Z{}class wa extends oa.Z{}class fa extends oa.Z{}var Ca=r(57460);const Sa=new Set(["InvalidQuotes"]);var Za=Object.defineProperty,Ia=Object.getOwnPropertySymbols,ka=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,Aa=(e,t,r)=>t in e?Za(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ma=(e,t={})=>{const r=(0,xt.d)(),o=t,{skipEmptyLines:n=!0,escapeChar:a,complete:i,error:s}=o,l=((e,t)=>{var r={};for(var o in e)ka.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&Ia)for(var o of Ia(e))t.indexOf(o)<0&&Ta.call(e,o)&&(r[o]=e[o]);return r})(o,["skipEmptyLines","escapeChar","complete","error"]);return(0,Ca.parse)(e,((e,t)=>{for(var r in t||(t={}))ka.call(t,r)&&Aa(e,r,t[r]);if(Ia)for(var r of Ia(t))Ta.call(t,r)&&Aa(e,r,t[r]);return e})({skipEmptyLines:n,escapeChar:a,complete:(e,t)=>{i&&i(e,t);const{errors:o,data:n}=e;if(!n.length)return void r.resolve(new Pa);const[a]=(e=>e.filter((e=>!Sa.has(e.code))))(o);a?r.resolve(new wa(void 0,a.message)):r.resolve(n)},error:(...e)=>{s&&s(...e),r.resolve(new fa)}},l)),r.promise};var Oa=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const Da=(e,t)=>{let r;return t instanceof Pa&&(r=e("DNDArea.fileIsEmpty")),t instanceof wa&&(r=t.message),r||e("DNDArea.readFileError")},Va=(0,n.memo)((e=>{const{isOnboarding:t}=e,{prepare:r}=ba(),[a,i]=(0,n.useState)(!0),[s,l]=(0,n.useState)(null),c=(0,n.useRef)(null),d=(0,v.s0)(),{t:p}=(0,_.T_)(),{showError:g}=(0,u.Z)(),{sendBrowserMessage:m}=Ct();(0,n.useEffect)((()=>{if(!s)return;Oa(void 0,null,(function*(){let e=yield Ma(s);if(e instanceof oa.Z&&(e=yield Ma(s,{escapeChar:"\\"}),e instanceof oa.Z))return void g({text:Da(p,e)});const{hasHeaders:t,rows:o,headers:n,autoMapping:i}=r({data:e,unique:a});o.length?d(D.ImportMappingPage,{state:{hasHeaders:t,rows:o,headers:n,autoMapping:i}}):g({text:p("DNDArea.fileIsEmpty")})}))}),[s,a,d,r,g,p]);const h=(0,n.useCallback)((()=>{i((e=>!e))}),[]),x=(0,n.useCallback)((()=>Oa(void 0,null,(function*(){if(cn)return t&&(yield m({messageType:At.OnBoardingFinished})),void d(D.HomePage);d(D.OnboardingBrowserSettingsPage,{state:{skipPasswordsDelete:!0}})}))),[m,d,t]),y=(0,n.useCallback)((e=>{l(e)}),[l]),[{canDrop:j},b]=(0,ia.L)((()=>({accept:[sa.FILE],drop(e){var t;if(e.files.length>1)return void g({text:p("DNDArea.oneFileIsSupported")});const[r]=e.files;"text/csv"===r.type||(null==(t=r.name)?void 0:t.endsWith(".csv"))?e.files[0].size?y(e.files[0]):g({text:p("DNDArea.fileIsEmpty")}):g({text:p("DNDArea.oneSCVFileIsSupported")})},collect:e=>({canDrop:e.canDrop()})})),[]),P=(0,n.useCallback)((e=>{var t,r;if(!(null==(t=e.target.files)?void 0:t.length))return;const o=e.target.files[0];"text/csv"===o.type||(null==(r=o.name)?void 0:r.endsWith(".csv"))?y(e.target.files[0]):g({text:p("DNDArea.oneSCVFileIsSupported")})}),[y,g,p]),w=(0,n.useCallback)((()=>{var e;null==(e=c.current)||e.click()}),[]);return(0,o.jsx)(Hn,{children:(0,o.jsxs)(Gn,{children:[(0,o.jsx)(Yn,{title:p("importFromCsvPage.title"),subtitle:p("importFromCsvPage.subtitle")}),(0,o.jsxs)(Jn,{children:[(0,o.jsx)(Q.Z,{container:!0,justifyContent:"center",height:"100%",children:(0,o.jsxs)(Q.Z,{item:!0,xs:8,display:"flex",flexDirection:"column",children:[(0,o.jsx)(na.Z,{ref:b,maxHeight:400,canDrop:j,onChooseFileClick:w,fileInputRef:c,onFileInputChange:P,localization:{orDragAndDrop:p("DNDArea.orDragAndDrop"),dropFileHere:p("DNDArea.dropFileHere"),chooseFile:p("DNDArea.chooseFile")}}),(0,o.jsx)(Q.Z,{item:!0,container:!0,mt:1,children:(0,o.jsx)(aa.Z,{label:(0,o.jsx)(be.ZP,{variant:"body1",children:p("importFromCsvPage.removeDuplicatesLabel")}),checked:a,onChange:h})})]})}),(0,o.jsx)(Q.Z,{container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,onClick:x,children:p("importFromCsvPage.skipImportingForNow")})})})]})]})})}));var La=r(65319),Ea=r(37336),Ba=r(13451),Ra=r(71866);const Wa=e=>{const{isOpen:t,onSubmit:r,onClose:a}=e,{t:i}=(0,_.T_)(),{handleSubmit:s,control:l,setValue:c,watch:d}=(0,Wr.cI)({defaultValues:{group:null}}),u=d("group"),p=(0,n.useCallback)((()=>{a()}),[a]);return(0,o.jsx)(Vt.Z,{open:t,onClose:a,fullWidth:!0,children:(0,o.jsxs)("form",{onSubmit:s(r),children:[(0,o.jsx)(tn.Z,{onClose:a,children:i("importResultsPage.groupSelectorModal.title")}),(0,o.jsx)(rn.Z,{children:(0,o.jsx)(ro,{filterByVerifiedDomain:!0,value:u,setValue:c,control:l,defaultValue:null,groupTranslationKey:R.LOGINS_TRANSLATION_KEY_ID,disablePortal:!1})}),(0,o.jsx)(on.Z,{children:(0,o.jsxs)(Q.Z,{container:!0,spacing:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"outlined",onClick:p,children:i("common.cancel")})}),(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{type:"submit",fullWidth:!0,disabled:!u,children:i("common.confirm")})})]})})]})})};var Na=r(77756);const Fa=e=>{const{isOpen:t,onSubmit:r,onClose:n,itemsCount:a}=e,{t:i}=(0,_.T_)();return(0,o.jsx)(Na.Z,{t:i,onSubmit:r,open:t,onClose:n,title:i("importResultsPage.deletePrompt.title",{count:a}),approvalButtonText:i("common.remove"),rejectionButtonText:i("common.cancel"),children:i("importResultsPage.deletePrompt.body",{count:a})})},Ua=(0,n.memo)((e=>{const{password:t,initialIsShown:r=!1,onToggle:a}=e,[i,s]=(0,n.useState)(r),l=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),s((e=>!e))}),[]);return t?(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",justifyContent:"space-between",flexWrap:"nowrap",children:[(0,o.jsx)(Ot.Z,{variant:"body2",children:i?t:N}),(0,o.jsx)(re.Z,{background:"transparent",hoverColor:X.S4,activeColor:X.S5,width:40,height:40,onClick:null!=a?a:l,children:i?(0,o.jsx)(Re.Z,{}):(0,o.jsx)(We.Z,{})})]}):null}));const za=(e=0)=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){return new Promise((t=>{const r=setTimeout((()=>{t((()=>{clearTimeout(r)}))}),e)}))}));var _a=r(43531),Ga=Object.defineProperty,qa=Object.defineProperties,Ka=Object.getOwnPropertyDescriptors,Ha=Object.getOwnPropertySymbols,$a=Object.prototype.hasOwnProperty,Ya=Object.prototype.propertyIsEnumerable,Qa=(e,t,r)=>t in e?Ga(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ja=(e,t)=>{for(var r in t||(t={}))$a.call(t,r)&&Qa(e,r,t[r]);if(Ha)for(var r of Ha(t))Ya.call(t,r)&&Qa(e,r,t[r]);return e};const Xa={backdrop:ve.n},ei=e=>{var t,r,a,i,s,l,c,d,u,p;const{row:g,onClose:m,isOpen:h,handleRowUpdate:x}=e,[v,y]=(0,n.useState)(!1),{t:j}=(0,_.T_)(),{state:b}=Y(),{groupsById:P}=b,w=(0,n.useCallback)((e=>{const{group:t}=e;var r,o;x((r=Ja(Ja({},g),e),o={groupId:t.groupId,organizationId:t.organizationId},qa(r,Ka(o))))}),[x,g]),{formState:{errors:f},handleSubmit:C,setValue:S,watch:Z,control:I,trigger:k}=(0,Wr.cI)({defaultValues:{password:g.password,webAddress:g.webAddress,groupId:g.groupId,organizationId:g.organizationId,totp:g.totp,additionalInfo:g.additionalInfo,name:g.name,login:g.login,tableData:g.tableData}});(0,n.useEffect)((()=>{k()}),[k]);const T=Z("login"),A=Z("groupId"),M=(0,n.useCallback)((()=>{y((e=>!e))}),[]);return(0,o.jsx)(Vt.Z,{open:h,onClose:m,slots:Xa,fullWidth:!0,maxWidth:"sm",children:(0,o.jsxs)("form",{onSubmit:C(w),children:[(0,o.jsx)(tn.Z,{onClose:m,children:j("importResultsPage.updateLoginModal.title")}),(0,o.jsx)(rn.Z,{children:(0,o.jsxs)(Q.Z,{container:!0,rowSpacing:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(Fr.Z,{name:"name",control:I,fullWidth:!0,autoFocus:!g.name,error:!!(null==(t=null==f?void 0:f.name)?void 0:t.message),helperText:null==(r=null==f?void 0:f.name)?void 0:r.message,label:j("importResultsPage.nameColumn"),rules:{required:j("validation.required"),validate:e=>!(0,Ur.Z)(e)||j("validation.required")}})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(Fr.Z,{name:"login",control:I,fullWidth:!0,error:!!(null==(a=null==f?void 0:f.login)?void 0:a.message),helperText:null==(i=null==f?void 0:f.login)?void 0:i.message,label:j("importResultsPage.usernameColumn")})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(Fr.Z,{name:"password",control:I,fullWidth:!0,type:v?"text":"password",error:!!(null==(s=null==f?void 0:f.password)?void 0:s.message),helperText:null==(l=null==f?void 0:f.password)?void 0:l.message,label:j("importResultsPage.passwordColumn"),InputProps:{endAdornment:(0,o.jsx)(_r.Z,{position:"end",children:(0,o.jsx)(Pe.Z,{onClick:M,children:v?(0,o.jsx)(Re.Z,{}):(0,o.jsx)(We.Z,{})})})}})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(Fr.Z,{name:"totp",control:I,fullWidth:!0,error:!!(null==(c=null==f?void 0:f.totp)?void 0:c.message),helperText:null==(d=null==f?void 0:f.totp)?void 0:d.message,label:j("importResultsPage.2fa")})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(Fr.Z,{name:"webAddress",control:I,fullWidth:!0,label:j("importResultsPage.webAddressColumn"),error:!!(null==(u=null==f?void 0:f.webAddress)?void 0:u.message),helperText:null==(p=null==f?void 0:f.webAddress)?void 0:p.message,inputProps:{validate:{validateNoSpaces:e=>(0,_a.Z)(e)||j("validation.invalidSpaces")}}})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(ro,{autoSelect:!0,filterByVerifiedDomain:!0,value:P[A],setValue:S,username:T,control:I,defaultValue:P[g.groupId],groupTranslationKey:R.LOGINS_TRANSLATION_KEY_ID})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(Fr.Z,{name:"additionalInfo",control:I,multiline:!0,minRows:3,maxRows:9,fullWidth:!0,label:j("importResultsPage.additionalInfoColumn")})})]})}),(0,o.jsx)(on.Z,{children:(0,o.jsxs)(Q.Z,{container:!0,spacing:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,type:"submit",children:j("common.update")})}),(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"outlined",onClick:m,children:j("common.cancel")})})]})})]})})};var ti=r(50082);const ri={backdrop:ve.n},oi=e=>{const{archivePassword:t,isOpen:r,onClose:a}=e,{t:i}=(0,_.T_)(),{showSuccess:s}=(0,u.Z)(),l=(0,n.useCallback)((()=>{Le()(t),s({text:i("common.copied")})}),[t,s,i]);return(0,o.jsxs)(Vt.Z,{open:r,onClose:a,slots:ri,children:[(0,o.jsx)(tn.Z,{onClose:a,children:i("desktopArchivePasswordModal.title")}),(0,o.jsx)(rn.Z,{children:(0,o.jsxs)(Q.Z,{container:!0,spacing:4,children:[(0,o.jsx)(Q.Z,{container:!0,item:!0,children:(0,o.jsx)(be.ZP,{color:X.S5,variant:"body1",children:i("desktopArchivePasswordModal.description")})}),(0,o.jsxs)(Q.Z,{container:!0,item:!0,alignItems:"center",justifyContent:"center",children:[(0,o.jsx)(ti.Z,{color:X.Hm,width:24,height:24}),(0,o.jsx)(je.Z,{mr:2}),(0,o.jsx)(be.ZP,{color:X.Hm,variant:"caption",children:i("desktopArchivePasswordModal.warning")})]}),(0,o.jsx)(Q.Z,{container:!0,item:!0,justifyContent:"center",children:(0,o.jsx)(Pn.Z,{text:t,onCopy:l,tooltipTitle:t})})]})}),(0,o.jsx)(on.Z,{children:(0,o.jsx)(Q.Z,{container:!0,justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,onClick:a,children:i("common.ok")})})})})]})},ni=(0,n.memo)((e=>{const{isOpen:t,onClose:r,onConfirm:n}=e,{t:a}=(0,_.T_)();return(0,o.jsxs)(Vt.Z,{open:t,onClose:r,children:[(0,o.jsx)(tn.Z,{children:a("leaveAlertModal.title")}),(0,o.jsxs)(on.Z,{children:[(0,o.jsx)(mt.Z,{onClick:n,variant:"contained",children:a("common.yes")}),(0,o.jsx)(mt.Z,{onClick:r,variant:"outlined",children:a("common.no")})]})]})}));var ai=Object.defineProperty,ii=Object.defineProperties,si=Object.getOwnPropertyDescriptors,li=Object.getOwnPropertySymbols,ci=Object.prototype.hasOwnProperty,di=Object.prototype.propertyIsEnumerable,ui=(e,t,r)=>t in e?ai(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pi=(e,t)=>{for(var r in t||(t={}))ci.call(t,r)&&ui(e,r,t[r]);if(li)for(var r of li(t))di.call(t,r)&&ui(e,r,t[r]);return e},gi=(e,t)=>ii(e,si(t));const mi={selection:!0,draggable:!1},hi={header:{actions:""}},xi="all",vi="errors",yi="duplicated",ji=(0,n.memo)((()=>{const{state:e}=Y(),{groupsById:t}=e,r=(0,v.s0)(),{t:a}=(0,_.T_)(),{showError:i,showSuccess:s}=(0,u.Z)(),{bottomMargin:l}=qn({containerPadding:32,actionsHeight:80}),{state:c}=(0,v.TH)(),d=(0,n.useRef)(),{passwords:p=[],archivePassword:g,skipPasswordsDelete:m=!1}=null!=c?c:{},[h,x]=(0,n.useState)((()=>!!g)),[y,j]=(0,n.useState)(new Map),[b,P]=(0,n.useState)(""),[w,f]=(0,n.useState)(null),[C,S]=(0,n.useState)(!1),[Z,I]=(0,n.useState)(!1),[k,T]=(0,n.useState)(),[A,M]=(0,n.useState)(p),[O,V]=(0,n.useState)(!1),[L,E]=(0,n.useState)(!1),[B,W]=(0,n.useState)(!1),[N,F]=(0,n.useState)(xi),U=(0,n.useCallback)(((e,t)=>{F(t),j(new Map)}),[]),{request:z,handleError:q}=kt(),K=(0,n.useCallback)((e=>{P(""),f(null),j(e)}),[]),{createColumns:H}=(0,Mn.Z)(),$=(0,n.useMemo)((()=>A.reduce(((e,t,r)=>{const{login:o}=t;return o?(e[o]||(e[o]={value:o,label:o,count:0,indexes:[]}),e[t.login].count+=1,e[t.login].indexes.push(r),e):e}),{})),[A]),J=(0,n.useMemo)((()=>Object.keys($).map((e=>({value:e,label:`${e} (${$[e].count})`})))),[$]),{normalizedGroups:ee,organizationsById:re,normalizedPasswordVaults:oe}=e,ae=(0,n.useMemo)((()=>A.reduce(((e,t)=>{const{validatedRows:r,isValidRows:o}=e,n=(e=>{const{webAddress:t,name:r}=e;return!!(null==r?void 0:r.trim())||(0,_a.Z)(t)})(t);!n&&o&&(e.isValidRows=!1);const a=!!t.name&&r.some((e=>(e.webAddress===t.webAddress||e.name===t.name)&&e.login===t.login&&e.groupId===t.groupId)),i=!!t.name&&oe.some((e=>{var r;return((null==(r=e.application)?void 0:r.createdAtWebsite)===t.webAddress||e.name===t.name)&&e.username===t.login&&t.organizationId===e.organizationId&&t.groupId===e.groupId})),s=[...r,gi(pi({},t),{isValid:n,isDuplicate:a||i})];return gi(pi({},e),{validatedRows:s})}),{validatedRows:[],isValidRows:!0})),[A,oe]),{isValidRows:ie,validatedRows:se}=ae;(0,n.useEffect)((()=>{if(!$[b])return;const e=new Map;$[b].indexes.forEach((t=>{e.set(A[t].id,A[t])})),j(e)}),[b,ae.validatedRows,$,A]),(0,n.useEffect)((()=>{c||r(D.ImportFromCsvPage)}),[c,r]);const le=(0,n.useMemo)((()=>H([{title:a("importResultsPage.webAddressColumn"),field:"webAddress",sorting:!1,render:e=>(0,o.jsx)(Ot.Z,{variant:"body2",children:e.webAddress}),width:"20%"},{title:a("importResultsPage.nameColumn"),field:"name",render:e=>(0,o.jsx)(Ot.Z,{variant:"body2",children:e.name}),sorting:!1,width:"15%"},{title:"",field:"",render:e=>{var t;return(null==(t=e.name)?void 0:t.trim())?e.isDuplicate?(0,o.jsx)(ne.Z,{title:a("importResultsPage.alreadyExistInUniqkeyAccount"),children:(0,o.jsx)(Pe.Z,{children:(0,o.jsx)(La.Z,{width:24,height:24,color:X.Hm})})}):null:(0,o.jsx)(ne.Z,{title:a("importResultsPage.requiredLoginName"),children:(0,o.jsx)(Pe.Z,{children:(0,o.jsx)(La.Z,{width:24,height:24,color:X.sf})})})},sorting:!1,width:"5%"},{title:a("importResultsPage.usernameColumn"),field:"login",render:e=>(0,o.jsx)(Ot.Z,{variant:"body2",children:e.login}),sorting:!1,width:"15%"},{title:a("importResultsPage.passwordColumn"),field:"password",sorting:!1,render:e=>(0,o.jsx)(Ua,{password:e.password}),width:"15%"},{title:a("importResultsPage.2fa"),field:"totp",sorting:!1,render:e=>(0,o.jsx)(Ot.Z,{variant:"body2",children:a(e.totp?"common.yes":"common.no")}),width:"7%"},{title:a("common.saveIn"),field:"groupId",sorting:!1,render:e=>(0,o.jsx)(Ot.Z,{variant:"body2",children:Jr(re,a,R.LOGINS_TRANSLATION_KEY_ID)(t[e.groupId])}),width:"23%"}])),[H,t,re,a]),ce=(0,n.useCallback)((()=>{E(!0)}),[]),de=(0,n.useCallback)(((e,t)=>{if(!t)return P(""),f(null),void j(new Map);const{value:r,label:o}=t;P(r),f(o)}),[]),ue=(0,n.useCallback)((()=>{V(!0)}),[]),pe=(0,n.useCallback)((()=>{r(-1)}),[r]),ge=(0,n.useCallback)((()=>{V(!1)}),[]),{validatedRowsWithErrors:me,validatedRowsWithDuplicates:he}=(0,n.useMemo)((()=>se.reduce(((e,t)=>{var r;return(null==(r=t.name)?void 0:r.trim())||e.validatedRowsWithErrors.push(t),t.isDuplicate&&e.validatedRowsWithDuplicates.push(t),e}),{validatedRowsWithErrors:[],validatedRowsWithDuplicates:[]})),[se]),xe=(0,n.useCallback)((()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{if(me.length)return F(vi),void i({text:a("toasts.importLoginsWithErrors")});S(!0),yield za();const e=A.map((e=>gi(pi({},e),{groupId:e.groupId,organizationId:t[e.groupId].organizationId})));yield z({messageType:At.ImportPasswords,payload:{passwords:e}}),r(D.ImportHistoryPage,{state:{skipPasswordsDelete:m}})}catch(e){S(!1);const{skipError:t,errorKey:r}=q(e);if(t)return;i({text:a(r)}),wr(e,{message:"ImportResultsPage/handleConfirmClick exception"})}}))),[a,A,r,i,t,z,m,me,q]),ve=(0,n.useCallback)((()=>{const e=A.filter((e=>!y.has(e.id)));E(!1),M(e),j(new Map),s({text:a("importResultsPage.deletePrompt.successAlert",{count:y.size})})}),[y,A,s,a]),ye=(0,n.useCallback)((()=>{E(!1)}),[]),we=(0,n.useCallback)((()=>{I(!1)}),[]),fe=(0,n.useCallback)((e=>{const{group:t}=e,r=Xr(ee);M((e=>e.map((e=>{if(!y.has(e.id))return e;const o=!!eo({organizationsById:re,groups:r,domain:to(e.login)}).find((e=>e.groupId===t.groupId)),{groupId:n}=o?t:e,{organizationId:a}=o?t:e;return gi(pi({},e),{groupId:n,organizationId:a})})))),V(!1),j(new Map)}),[y,re,ee]),Ce=(0,n.useCallback)(((e,t)=>{T(t),I(!0)}),[]),Se=(0,n.useCallback)((e=>{const t=A.findIndex((t=>t.id===e.id));if(-1!==t){const r=[...A];r[t]=e,M(r),I(!1)}}),[A]),Ze=(0,n.useCallback)((()=>{x(!1)}),[]),Ie=(0,n.useMemo)((()=>!y.size),[y.size]),ke=(0,n.useCallback)((()=>{W(!1)}),[]),Te=(0,n.useCallback)((()=>{W(!1),window.close()}),[]);(0,n.useEffect)((()=>{const e=e=>{e.preventDefault(),e.returnValue="",e.focus(),W(!0)};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[]);const Ae=(0,n.useMemo)((()=>[{text:a("importResultsPage.subtitle.part-1"),variant:"body1"},{text:a("importResultsPage.subtitle.part-2"),variant:"subtitle1"}]),[a]),Me={tableRef:d,onRowClick:Ce,localization:hi,withRowValidity:!0,rowValidityKey:"isValid",hidePagination:!0,cellPadding:"0 8px",rowHeight:50,onSelectionChange:K,rowSelectByKey:"id",selectedRows:y,options:mi,t:a,activePage:0,columns:le,onPerPageChange:G.noop,onColumnOrderDirectionChange:G.noop,onActivePageChange:G.noop,onColumnOrderByChange:G.noop,bottomMargin:l};return(0,o.jsxs)(Hn,{maxWidth:!1,children:[(0,o.jsxs)(Gn,{maxWidth:"95%",minWidth:"95%",children:[(0,o.jsx)(Yn,{title:a("importResultsPage.title"),subtitle:Ae}),(0,o.jsxs)(Jn,{children:[(0,o.jsx)(Q.Z,{container:!0,children:(0,o.jsx)(Q.Z,{item:!0,xs:10,p:1,children:(0,o.jsxs)(Ea.Z,{value:N,variant:"fullWidth",marginRight:1,padding:.5,children:[(0,o.jsx)(Ba.Z,{value:xi,onClick:U,icon:(0,o.jsx)(ne.Z,{title:a("importResultsPage.allLoginsTooltip"),cursorPointer:!0,children:(0,o.jsx)(La.Z,{width:24,height:24})}),iconPosition:"end",label:(0,o.jsxs)(Q.Z,{display:"flex",alignItems:"center",children:[(0,o.jsx)(be.ZP,{variant:"subtitle1",mr:1,children:a("importResultsPage.tabs.all")}),(0,o.jsx)(be.ZP,{variant:"h6",children:se.length})]})}),(0,o.jsx)(Ba.Z,{value:vi,onClick:U,icon:(0,o.jsx)(ne.Z,{title:a("importResultsPage.errorLoginsTooltip"),cursorPointer:!0,children:(0,o.jsx)(La.Z,{width:24,height:24})}),iconPosition:"end",label:(0,o.jsxs)(Q.Z,{display:"flex",alignItems:"center",children:[(0,o.jsx)(be.ZP,{variant:"subtitle1",mr:1,children:a("importResultsPage.tabs.errors")}),(0,o.jsx)(be.ZP,{variant:"h6",color:X.sf,children:me.length})]})}),(0,o.jsx)(Ba.Z,{value:yi,onClick:U,icon:(0,o.jsx)(ne.Z,{title:a("importResultsPage.duplicatedLoginsTooltip"),cursorPointer:!0,children:(0,o.jsx)(La.Z,{width:24,height:24})}),iconPosition:"end",label:(0,o.jsxs)(Q.Z,{display:"flex",alignItems:"center",children:[(0,o.jsx)(be.ZP,{variant:"subtitle1",mr:1,children:a("importResultsPage.tabs.duplicated")}),(0,o.jsx)(be.ZP,{variant:"h6",color:X.iE,children:he.length})]})})]})})}),(0,o.jsx)(Q.Z,{container:!0,flexDirection:"column",flex:1,mt:1,children:(0,o.jsxs)(Ln.Z,{children:[(0,o.jsx)(je.Z,{p:1,children:(0,o.jsxs)(Q.Z,{item:!0,container:!0,flexWrap:"nowrap",children:[(0,o.jsx)(Q.Z,{item:!0,alignSelf:"center",mr:1,children:(0,o.jsx)(ne.Z,{title:a(Ie?"importResultsPage.delete.disabled":"importResultsPage.delete.active"),children:(0,o.jsxs)(mt.Z,{disableMinWidth:!0,variant:"text",disabled:Ie,onClick:ce,children:[(0,o.jsx)(Ge.Z,{}),(0,o.jsx)(be.ZP,{variant:"subtitle1",pl:1,children:a("importResultsPage.delete.button")})]})})}),(0,o.jsx)(Q.Z,{item:!0,alignSelf:"center",children:(0,o.jsx)(ne.Z,{title:a(Ie?"importResultsPage.save.disabled":"importResultsPage.save.active"),children:(0,o.jsxs)(mt.Z,{disableMinWidth:!0,variant:"text",disabled:Ie,onClick:ue,children:[(0,o.jsx)(Rr.Z,{}),(0,o.jsx)(be.ZP,{variant:"subtitle1",pl:1,children:a("importResultsPage.saveIn")})]})})}),(0,o.jsx)(Q.Z,{item:!0,xs:3,pl:3,flexWrap:"nowrap",children:(0,o.jsx)(Ra.Z,{disabled:!J.length,value:w,onChange:de,options:J,label:a("importResultsPage.autocompleteLabel"),placeholder:a("common.select")})})]})}),(0,o.jsx)(te.Z,{}),N===xi&&(0,o.jsx)(En.Z,gi(pi({},Me),{data:se,totalItems:se.length,perPage:se.length})),N===vi&&(0,o.jsx)(En.Z,gi(pi({},Me),{data:me,totalItems:me.length,perPage:me.length})),N===yi&&(0,o.jsx)(En.Z,gi(pi({},Me),{data:he,totalItems:he.length,perPage:he.length}))]})}),(0,o.jsxs)(Q.Z,{item:!0,container:!0,width:"100%",flexDirection:"row",spacing:2,mt:2,alignItems:"center",justifyContent:"center",children:[(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"outlined",onClick:pe,children:a("common.back")})}),(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,isLoading:C,disabled:!A.length||!ie,onClick:xe,children:a("importResultsPage.importButton")})})]})]})]}),O&&(0,o.jsx)(Wa,{isOpen:O,onSubmit:fe,onClose:ge}),L&&(0,o.jsx)(Fa,{isOpen:L,onSubmit:ve,onClose:ye,itemsCount:y.size}),Z&&(0,o.jsx)(ei,{isOpen:Z,onClose:we,row:k,handleRowUpdate:Se}),h&&(0,o.jsx)(oi,{isOpen:h,archivePassword:g,onClose:Ze}),B&&(0,o.jsx)(ni,{isOpen:B,onClose:ke,onConfirm:Te})]})}));var bi=Object.defineProperty,Pi=Object.defineProperties,wi=Object.getOwnPropertyDescriptors,fi=Object.getOwnPropertySymbols,Ci=Object.prototype.hasOwnProperty,Si=Object.prototype.propertyIsEnumerable,Zi=(e,t,r)=>t in e?bi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ii=(e,t)=>{for(var r in t||(t={}))Ci.call(t,r)&&Zi(e,r,t[r]);if(fi)for(var r of fi(t))Si.call(t,r)&&Zi(e,r,t[r]);return e};const ki={[va.name.value]:0,[va.webAddress.value]:1,[va.login.value]:2,[va.password.value]:3,[va.totp.value]:4,[va.additionalInfo.value]:5},Ti=(e,t)=>{var r;return(null==(r=e[t])?void 0:r.value)||va.none.value},Ai=e=>e!==va.none.value,Mi={draggable:!1},Oi=()=>{const e=(0,v.s0)(),{t}=(0,_.T_)(),{showError:r}=(0,u.Z)(),{createColumns:a}=(0,Mn.Z)(),{bottomMargin:i}=qn({containerPadding:32,actionsHeight:80}),[s,l]=(0,n.useState)(!1),{state:c}=(0,v.TH)(),{headers:d,autoMapping:p,rows:g}=c,{sendBrowserMessage:m}=Ct(),[h,x]=(0,n.useState)([{mappedLabel:`${t("importMappingPage.nameLabel")}*`,mappedName:va.name.value,mappedToColumn:Ti(p,va.name.value),isValid:Ai(Ti(p,va.name.value)),isRequired:!0},{mappedLabel:t("importMappingPage.webAddressLabel"),mappedName:va.webAddress.value,mappedToColumn:Ti(p,va.webAddress.value),isValid:Ai(Ti(p,va.webAddress.value)),isRequired:!1},{mappedLabel:t("importMappingPage.loginLabel"),mappedName:va.login.value,mappedToColumn:Ti(p,va.login.value),isValid:Ai(Ti(p,va.login.value)),isRequired:!1},{mappedLabel:t("importMappingPage.passwordLabel"),mappedName:va.password.value,mappedToColumn:Ti(p,va.password.value),isValid:Ai(Ti(p,va.password.value)),isRequired:!1},{mappedLabel:t("importMappingPage.totpLabel"),mappedName:va.totp.value,mappedToColumn:Ti(p,va.totp.value),isValid:!0,isRequired:!1},{mappedLabel:t("importMappingPage.additionalInfoLabel"),mappedName:va.additionalInfo.value,mappedToColumn:Ti(p,va.additionalInfo.value),isValid:!0,isRequired:!1}]),{options:y,optionsAsObject:j}=(0,n.useMemo)((()=>{const e=Object.keys(d).map((e=>({label:t(d[e].label),value:d[e].value})));return{options:e,optionsAsObject:(0,G.keyBy)(e,"value")}}),[d,t]),b=(0,n.useMemo)((()=>a([{title:t("importMappingPage.mappedColumn"),field:"mappedLabel",sorting:!1,render:e=>(0,o.jsx)(ne.Z,{placement:"bottom-start",disableHoverListener:e.isValid,title:t("validation.required"),children:(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",children:[!e.isValid&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ti.Z,{width:16,height:16,color:X.iP}),(0,o.jsx)(je.Z,{mr:1})]}),(0,o.jsx)(be.ZP,{color:!e.isValid&&X.iP,variant:"subtitle2",children:e.mappedLabel})]})})},{title:t("importMappingPage.headerFromCSVColumn"),field:"mappedTo",sorting:!1,render:e=>{const r=j[e.mappedToColumn];return(0,o.jsx)(Ra.Z,{disableClearable:!0,error:!e.isValid,onChange:(t,r)=>{x((t=>{const{index:o}=e.tableData,n=r.value,a=[...t],i=Ii({},a[o]);var s,l;return a[o]=(s=Ii({},i),l={mappedToColumn:n,isValid:!i.isRequired||Ai(n)},Pi(s,wi(l))),a}))},placeholder:t("importMappingPage.selectPlaceholder"),options:y,value:r})}},{title:t("importMappingPage.exampleColumn"),field:"example",sorting:!1,render:e=>{var t,r;const n=e.tableData.index===ki[va.password.value],a=null!=(r=(null!=(t=g.find((t=>{var r;return null==(r=t[e.mappedToColumn])?void 0:r.trim()})))?t:[])[e.mappedToColumn])?r:"";return n?(0,o.jsx)(Ua,{password:a,initialIsShown:!1}):(0,o.jsx)(Ot.Z,{variant:"body2",children:a})}}])),[a,y,j,g,t]),P=(0,n.useMemo)((()=>!h.filter((e=>!e.isValid)).length),[h]),w=(0,n.useCallback)((()=>{e(-1)}),[e]),f=(0,n.useCallback)((()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{l(!0);const t=yield m({messageType:At.MapCSVToPasswordVaults,payload:{parsedCsvRows:g,nameMappingColumn:h[ki[va.name.value]].mappedToColumn,passwordMappingColumn:h[ki[va.password.value]].mappedToColumn,loginMappingColumn:h[ki[va.login.value]].mappedToColumn,totpMappingColumn:h[ki[va.totp.value]].mappedToColumn,additionalInfoMappingColumn:h[ki[va.additionalInfo.value]].mappedToColumn,webAddressMappingColumn:h[ki[va.webAddress.value]].mappedToColumn}});yield(0,er.Dc)(100),l(!1),e(D.ImportResultsPage,{state:{passwords:t}})}catch(e){l(!1),r({text:null==e?void 0:e.message}),wr(e,{message:"ImportMappingPage/handleConfirmClick exception"})}}))),[h,g,e,m,r]);return(0,o.jsx)(Hn,{children:(0,o.jsxs)(Gn,{children:[(0,o.jsx)(Yn,{title:t("importMappingPage.title"),subtitle:t("importMappingPage.subtitle")}),(0,o.jsxs)(Jn,{children:[(0,o.jsx)(Q.Z,{container:!0,flexDirection:"column",flex:1,children:(0,o.jsx)(Ln.Z,{children:(0,o.jsx)(En.Z,{hidePagination:!0,cellPadding:"4px 8px",t,stretchTableVertically:!1,totalItems:h.length,activePage:0,columns:b,data:h,options:Mi,perPage:h.length,onPerPageChange:G.noop,onColumnOrderDirectionChange:G.noop,onActivePageChange:G.noop,onColumnOrderByChange:G.noop,disableVirtualization:!0,rowSelectByKey:"mappedName",bottomMargin:i})})}),(0,o.jsxs)(Q.Z,{item:!0,container:!0,spacing:2,mt:2,width:"100%",flexDirection:"row",alignItems:"center",justifyContent:"center",children:[(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"outlined",onClick:w,children:t("common.back")})}),(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,disabled:!P,isLoading:s,onClick:f,children:t("common.confirm")})})]})]})]})})};var Di=r(71532),Vi=r(27789);const Li=(0,n.memo)((e=>{const{t}=(0,_.T_)(),{state:r}=Y(),{organizationsById:n}=r,{restrictedGroups:a=[],restrictedOrganizations:i=[]}=e,[s]=i,[l]=a;return(0,o.jsxs)(be.ZP,{variant:"caption",color:X.S5,children:[s&&t("trustedBrowserPage.restrictedByOrganizationTooltip",{organizationName:s.name}),!s&&!!l&&t("trustedBrowserPage.restrictedByGroupsTooltip",{organizationName:n[l.organizationId].name})]})})),Ei=(0,n.memo)((e=>{const{handleTrustOnLoginChange:t,trustOnLogin:r,onHoursChange:a,onMinutesChange:i,initialHours:s,initialMinutes:l}=e,{state:c}=Y(),{organizationsById:d,groupsById:u}=c,{restrictedOrganizations:p,restrictedGroups:g}=(0,n.useMemo)((()=>({restrictedOrganizations:Object.values(d).filter((e=>!e.trustedBrowserAllowed)),restrictedGroups:Object.values(u).filter((e=>!e.trustedBrowserAllowed))})),[d,u]),{t:m}=(0,_.T_)(),h=(0,n.useCallback)((e=>{a(e.hour),i(e.minute)}),[a,i]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Q.Z,{container:!0,children:(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{variant:"body2",color:X.S5,children:m("trustedBrowserPage.description")})})}),(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",mt:1,children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{variant:"subtitle1",color:X.S5,children:m("trustedBrowserPage.trustOnLoginLabel")})}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(Di.Z,{checked:r,onChange:t})})]}),(0,o.jsxs)(Q.Z,{container:!0,mt:1,children:[(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(be.ZP,{variant:"body2",color:X.S5,children:m("trustedBrowserPage.trustOnLoginDescription")})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,mt:2,children:(0,o.jsx)(te.Z,{})})]}),(0,o.jsx)(Vi.Z,{onChange:h,initialHour:s,initialMinute:l,justifyContent:"center",mt:1}),!(!g.length&&!p.length)&&(0,o.jsxs)(Q.Z,{container:!0,mt:2,alignItems:"center",children:[(0,o.jsx)(Q.Z,{item:!0,mr:2,children:(0,o.jsx)(be.ZP,{variant:"body2",color:X.S5,children:m("trustedBrowserPage.limitedAccessDescription")})}),(0,o.jsx)(ne.Z,{title:(0,o.jsx)(Li,{restrictedOrganizations:p,restrictedGroups:g}),placement:"top",children:(0,o.jsx)(qo.Z,{color:X.S5,width:20,height:20})})]})]})}));var Bi=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const Ri=(0,n.memo)((e=>{const{initialTrustOnLogin:t,initialHours:r,initialMinutes:a}=e,[i,l]=(0,n.useState)(t||!1),[c,d]=(0,n.useState)(a),[p,g]=(0,n.useState)(r),m=(0,v.s0)(),{sendBrowserMessage:h}=Ct(),{t:x}=(0,_.T_)(),{showSuccess:y,showError:j}=(0,u.Z)(),b=(0,s.useQueryClient)(),{request:P,isLoading:w,handleError:f}=kt(),C=(0,n.useCallback)(((e,t)=>Bi(void 0,null,(function*(){h({messageType:At.SetDataToStore,payload:{key:vt.IsTrustOnLoginEnabled,item:t}}),b.invalidateQueries(Ir.GetTrustedBrowserPageData),l(t)}))),[h,b]),S=(0,n.useCallback)((e=>Bi(void 0,null,(function*(){yield h({messageType:At.SetDataToStore,payload:{key:vt.TrustedBrowserMinutes,item:e}}),yield b.invalidateQueries(Ir.GetTrustedBrowserPageData),d(e)}))),[h,b]),Z=(0,n.useCallback)((e=>Bi(void 0,null,(function*(){yield h({messageType:At.SetDataToStore,payload:{key:vt.TrustedBrowserHours,item:e}}),yield b.invalidateQueries(Ir.GetTrustedBrowserPageData),g(e)}))),[h,b]),I=(0,n.useCallback)((()=>Bi(void 0,null,(function*(){try{yield P({messageType:At.RequestTrustedBrowser,payload:{trustOnLogin:i,hours:p,minutes:c}}),y({text:x("trustedBrowserPage.trustedBrowserActivated")}),m(D.HomePage)}catch(e){const{skipError:t,errorKey:r}=f(e);if(t)return;j({text:x(r)}),wr(e,{message:"TrustedBrowserWidgetContainer/handleTrustedBrowserRequest exception"})}}))),[f,p,c,i,P,m,j,y,x]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ei,{initialHours:r,initialMinutes:a,trustOnLogin:i,handleTrustOnLoginChange:C,onHoursChange:Z,onMinutesChange:S}),(0,o.jsx)(Q.Z,{container:!0,mt:3,children:(0,o.jsx)(mt.Z,{onClick:I,isLoading:w,disabled:!p&&!c,fullWidth:!0,children:x("common.request")})})]})})),Wi=()=>{const{t:e}=(0,_.T_)(),{sendBrowserMessage:t}=Ct(),{data:r,isLoading:n}=(0,s.useQuery)(Ir.GetTrustedBrowserPageData,(()=>t({messageType:At.GetTrustedBrowserPageData})));return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:e("trustedBrowserPage.title")}),(0,o.jsx)(at,{p:2,background:X.S1,justifyContent:"space-between",isLoading:n,children:!n&&(0,o.jsx)(Ri,{initialTrustOnLogin:r.trustOnLogin,initialHours:r.hours,initialMinutes:r.minutes})})]})};var Ni=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const Fi=e=>Ni(void 0,null,(function*(){return g.privacy.services.passwordSavingEnabled.set({value:e})})),Ui=()=>g.browsingData.removePasswords({since:0}),zi=()=>g.browsingData.removeCookies({since:0}),_i=e=>{const{title:t,description:r,action:n,withDivider:a=!1,rowMargin:i}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Q.Z,{container:!0,p:2,children:[(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",flexWrap:"nowrap",children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{variant:"subtitle1",color:X.S5,noWrap:!0,children:t})}),(0,o.jsx)(Q.Z,{item:!0,children:n})]}),(0,o.jsx)(Q.Z,{container:!0,mt:i,children:(0,o.jsx)(be.ZP,{variant:"body2",color:X.S5,children:r})})]}),a&&(0,o.jsx)(Q.Z,{container:!0,children:(0,o.jsx)(Q.Z,{xs:!0,item:!0,children:(0,o.jsx)(te.Z,{})})})]})},Gi=e=>{const{browserSettings:t,onEraseCookiesClick:r,onEraseLoginsClick:n,onHideWarningChange:a,onStopStorageChange:i}=e,{isPasswordStoringEnabled:s,hideWarning:l}=t,{t:c}=(0,_.T_)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_i,{withDivider:!0,rowMargin:2,title:c("browserSettingsPage.stopStorageTitle"),description:c("browserSettingsPage.stopStorageDescription"),action:(0,o.jsx)(Di.Z,{disabled:!t.isControllable,checked:!s,onChange:i})}),(0,o.jsx)(_i,{withDivider:!0,title:c("browserSettingsPage.eraseLoginsTitle"),description:c("browserSettingsPage.eraseLoginsDescription"),action:(0,o.jsx)(mt.Z,{variant:"text",disableMinWidth:!0,onClick:n,children:(0,o.jsx)(be.ZP,{variant:"subtitle1",color:X.iP,children:c("common.remove")})})}),(0,o.jsx)(_i,{withDivider:!0,title:c("browserSettingsPage.eraseCookiesTitle"),description:c("browserSettingsPage.eraseCookiesDescription"),action:(0,o.jsx)(mt.Z,{variant:"text",disableMinWidth:!0,onClick:r,children:(0,o.jsx)(be.ZP,{variant:"subtitle1",color:X.iP,children:c("common.remove")})})}),(0,o.jsx)(_i,{rowMargin:2,title:c("browserSettingsPage.hideWarningTitle"),description:c("browserSettingsPage.hideWarningDescription"),action:(0,o.jsx)(Di.Z,{checked:l,onChange:a})})]})};var qi=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const Ki=()=>{const{t:e}=(0,_.T_)(),{showError:t,showSuccess:r}=(0,u.Z)(),{sendBrowserMessage:a}=Ct(),{data:i,isLoading:l,refetch:c}=(0,s.useQuery)(Ir.GetBrowserSettings,(()=>a({messageType:At.GetBrowserSettings}))),d=(0,n.useCallback)(((o,n)=>qi(void 0,null,(function*(){try{yield Fi(!n),yield c(),r({text:e("browserSettingsPage.settingUpdatedSuccess")})}catch(r){t({text:e("common.somethingWentWrong")}),wr(r,{message:"BrowserSettingsPage/handleStopStorageChange exception"})}}))),[c,t,r,e]),p=(0,n.useCallback)((()=>qi(void 0,null,(function*(){try{yield Ui(),r({text:e("browserSettingsPage.settingUpdatedSuccess")})}catch(r){t({text:e("common.somethingWentWrong")}),wr(r,{message:"BrowserSettingsPage/handleEraseLoginsClick exception"})}}))),[t,r,e]),g=(0,n.useCallback)((()=>qi(void 0,null,(function*(){try{yield zi(),r({text:e("browserSettingsPage.settingUpdatedSuccess")})}catch(r){t({text:e("common.somethingWentWrong")}),wr(r,{message:"BrowserSettingsPage/handleEraseCookiesClick exception"})}}))),[t,r,e]),m=(0,n.useCallback)(((o,n)=>qi(void 0,null,(function*(){yield a({messageType:At.UpdateBrowserSetting,payload:{settingValue:n,settingKey:vt.HideWarningIfPasswordsIsStoringInBrowser}}),yield c();try{r({text:e("browserSettingsPage.settingUpdatedSuccess")})}catch(r){t({text:e("common.somethingWentWrong")}),wr(r,{message:"BrowserSettingsPage/handleHideWarningChange exception"})}}))),[c,a,t,r,e]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:e("browserSettingsPage.title")}),(0,o.jsx)(at,{background:X.S1,isLoading:l,children:(0,o.jsx)(Ee.Z,{children:(0,o.jsx)(Gi,{browserSettings:i,onEraseCookiesClick:g,onEraseLoginsClick:p,onHideWarningChange:m,onStopStorageChange:d})})})]})},Hi=(0,n.memo)((e=>{var t,r;const{onSubmit:a,formRef:i,organization:s,defaultValues:l={},isEdit:c=!1,onUnsavedChangesChange:d}=e,{t:u}=(0,_.T_)(),{handleSubmit:p,control:g,formState:m,setValue:h,watch:x}=(0,Wr.cI)({defaultValues:l}),{errors:v,dirtyFields:y}=m,j=x("group"),{note:b=!1}=y,P=(0,n.useCallback)((e=>{const t=e.note&&e.note.length?e.note:null;a({name:e.name,group:e.group,note:t,isNoteFieldDirty:b})}),[a,b]),w=!!Object.keys(y).length;return(0,n.useEffect)((()=>d(w)),[d,w]),(0,o.jsx)("form",{ref:i,onSubmit:p(P),children:(0,o.jsxs)(Q.Z,{container:!0,p:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:12,mt:3,children:(0,o.jsx)(Fr.Z,{name:"name",control:g,fullWidth:!0,required:!0,error:!!(null==(t=null==v?void 0:v.name)?void 0:t.message),helperText:null==(r=null==v?void 0:v.name)?void 0:r.message,label:u("createUpdateSecureNoteVaultForm.nameLabel"),rules:{required:u("validation.required"),validate:e=>!(0,Ur.Z)(e)||u("validation.required")}})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,mt:3,children:(0,o.jsx)(Fr.Z,{name:"note",control:g,multiline:!0,minRows:9,maxRows:9,fullWidth:!0,label:u("createUpdateSecureNoteVaultForm.secureNote")})}),(0,o.jsxs)(Q.Z,{item:!0,xs:12,mt:3,children:[(0,o.jsx)(st,{condition:c,children:(0,o.jsx)(Mt,{organization:s,group:l.group,translationKey:R.SECURE_NOTES_TRANSLATION_KEY_ID})}),(0,o.jsx)(st,{condition:!c,children:(0,o.jsx)(ro,{autoSelect:!0,setValue:h,control:g,value:j,defaultValue:null==l?void 0:l.group,disabled:c,groupTranslationKey:R.SECURE_NOTES_TRANSLATION_KEY_ID})})]})]})})}));var $i=(e=>(e.Menu="menu",e.ManagementMode="managementMode",e.TrustBrowser="trustBrowser",e.ReportSite="reportSite",e))($i||{});const Yi=$i,Qi=e=>{const{text:t}=e;return(0,o.jsx)(Q.Z,{container:!0,display:"flex",flex:1,justifyContent:"center",alignItems:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(be.ZP,{variant:"h6",color:X.S5,textAlign:"center",children:t})})})};var Ji=r(62544),Xi=r(27010),es=r(6462),ts=r(35277),rs=r(72714),os=(e=>(e.HEADER_TYPE="HEADER_TYPE",e.DATA_TYPE="DATA_TYPE",e))(os||{});const ns=os;var as=r(50458);const is=(e,t)=>{const{myVaultsTranslation:r}=t;return e.isSharedGroup?["common.sharedBy",{name:e.name}]:[e[r]||e.name,{}]},ss=e=>e.isPrivateKeychain?[e.translationKey]:[e.name],ls=e=>({type:ns.HEADER_TYPE,props:e}),cs=e=>({type:ns.DATA_TYPE,props:e}),ds=e=>({PopperProps:{disablePortal:!0,modifiers:[{name:"preventOverflow",options:{boundary:e}},{name:"flip",options:{boundary:e,padding:4}}]}});var us=r(45554),ps=Object.defineProperty,gs=Object.getOwnPropertySymbols,ms=Object.prototype.hasOwnProperty,hs=Object.prototype.propertyIsEnumerable,xs=(e,t,r)=>t in e?ps(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vs=(e,t)=>{for(var r in t||(t={}))ms.call(t,r)&&xs(e,r,t[r]);if(gs)for(var r of gs(t))hs.call(t,r)&&xs(e,r,t[r]);return e};const ys=e=>{e.stopPropagation()},js=(0,n.memo)((e=>{const t=e,{isManagementMode:r,disabledTitle:a,disabled:i,size:s=us.Z.Small}=t,l=((e,t)=>{var r={};for(var o in e)ms.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&gs)for(var o of gs(e))t.indexOf(o)<0&&hs.call(e,o)&&(r[o]=e[o]);return r})(t,["isManagementMode","disabledTitle","disabled","size"]),c=(0,n.useMemo)((()=>(e=>({position:"absolute",top:"50%",zIndex:1,transform:"translateY(-50%)",left:"-40px",opacity:e?1:0,transition:"opacity 0.1s ease-in-out"}))(r)),[r]);return i&&a?(0,o.jsx)(je.Z,{sx:c,onClick:ys,children:(0,o.jsx)(ne.Z,{title:a,followCursor:!0,children:(0,o.jsx)(aa.Z,vs({disabled:i,size:s},l))})}):(0,o.jsx)(je.Z,{sx:c,onClick:ys,children:(0,o.jsx)(aa.Z,vs({disabled:i,size:s},l))})})),bs={position:"relative"},Ps=(0,n.memo)((e=>{const{organization:t,group:r,containerRef:a,onVaultSelectionChange:i,isChecked:s,isPartiallyChecked:l,vaultIds:c,isManagementMode:d,isCheckDisabled:u}=e,{t:p}=(0,_.T_)(),g=(0,n.useMemo)((()=>ds(a)),[a]),m=(0,n.useMemo)((()=>is(r,{myVaultsTranslation:R.LOGINS_TRANSLATION_KEY_ID})),[r]),h=(0,n.useMemo)((()=>ss(t)),[t]),x=(0,n.useCallback)((e=>{i&&i(c,e.target.checked)}),[i,c]);return r.isSharedGroup?(0,o.jsxs)(as.Z,{disableGutters:!0,disableSticky:!0,sx:bs,children:[(0,o.jsx)(js,{checked:s,indeterminate:l,onChange:x,disabled:u,isManagementMode:d,disabledTitle:p("managementMode.disabledSelection.shared")}),(0,o.jsx)(Ot.Z,{variant:"caption",tooltipProps:g,cursor:"default",children:(0,o.jsx)(be.ZP,{variant:"caption",color:X.B1,children:p(...m)})})]}):t.isPrivateKeychain?(0,o.jsxs)(as.Z,{disableGutters:!0,disableSticky:!0,sx:bs,children:[(0,o.jsx)(js,{checked:s,indeterminate:l,onChange:x,disabled:u,isManagementMode:d,disabledTitle:p("managementMode.disabledSelection.group")}),(0,o.jsx)(Ot.Z,{variant:"caption",tooltipProps:g,cursor:"default",children:(0,o.jsx)(be.ZP,{variant:"caption",color:X.B1,children:p(...h)})})]}):(0,o.jsxs)(as.Z,{disableGutters:!0,disableSticky:!0,sx:bs,children:[(0,o.jsx)(js,{checked:s,indeterminate:l,onChange:x,disabled:u,isManagementMode:d,disabledTitle:p("managementMode.disabledSelection.group")}),(0,o.jsxs)(Ot.Z,{variant:"caption",tooltipProps:g,cursor:"default",children:[(0,o.jsx)(be.ZP,{variant:"caption",color:X.S5,children:p(...h)}),(0,o.jsx)(be.ZP,{variant:"caption",children:" / "}),(0,o.jsx)(be.ZP,{variant:"caption",color:X.B1,children:p(...m)})]})]})}));var ws=r(27915),fs=r(2449),Cs=r(22823),Ss=r(454);const Zs=(0,n.memo)((e=>{const{restrictions:t=[]}=e,{t:r}=(0,_.T_)(),{restrictionsText:n}=Qt({restrictions:t});return(0,o.jsx)(be.ZP,{variant:"caption",children:r("restrictions.restrictedByTooltip",{restrictionsText:n})})})),Is={position:"relative"},ks=(0,n.memo)((e=>{var t,r;const{vault:a,onItemClick:i,onLaunchClick:s,disableArrow:l,launchText:c,restrictions:d=[],isRestricted:u=!1,containerRef:p=document.body,onVaultSelectionChange:g,isManagementMode:m,isChecked:h,isCheckDisabled:x}=e,{t:v}=(0,_.T_)(),y=(0,n.useCallback)((()=>{i(a)}),[a,i]),j=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),s&&s(a)}),[a,s]),b=(0,n.useCallback)((e=>{g&&g([a.compositeId],e.target.checked)}),[g,a]),P=v(a.isShared?"managementMode.disabledSelection.shared":"managementMode.disabledSelection.group"),{itemTextTooltipProps:w,itemButtonTooltipProps:f}=(0,n.useMemo)((()=>({itemTextTooltipProps:ds(p),itemButtonTooltipProps:{disablePortal:!0,container:p}})),[p]);return(0,o.jsxs)(ws.Z,{disableGutters:!0,disablePadding:!0,onClick:y,sx:Is,children:[(0,o.jsx)(js,{checked:h,onChange:b,disabled:x,isManagementMode:m,disabledTitle:P}),(0,o.jsxs)(fs.Z,{tooltipPopperProps:f,isRestricted:u,restrictionsTooltipContent:(0,o.jsx)(Zs,{restrictions:d}),disableArrow:l,launchText:(null==(t=null==a?void 0:a.application)?void 0:t.createdAtWebsite)&&c,onLaunchClick:j,children:[(0,o.jsx)(Cs.Z,{children:(0,o.jsx)(vr,{type:sr.Password,src:null==(r=null==a?void 0:a.application)?void 0:r.iconUrl,width:40,height:40,outlineColor:a.isTrusted&&X.L_})}),(0,o.jsx)(Ss.Z,{primary:(0,o.jsx)(Ot.Z,{breakWord:!0,component:"span",variant:"subtitle2",whiteSpace:"normal",tooltipProps:w,cursorPointer:!0,children:a.name}),secondary:(0,o.jsx)(be.ZP,{noWrap:!0,variant:"body2",component:"span",color:X.S6,children:a.username})})]})]})})),Ts={position:"relative"},As=(0,n.memo)((e=>{const{organization:t,group:r,containerRef:a,onVaultSelectionChange:i,isChecked:s,isPartiallyChecked:l,vaultIds:c,isManagementMode:d,isCheckDisabled:u}=e,{t:p}=(0,_.T_)(),g=(0,n.useMemo)((()=>ds(a)),[a]),m=(0,n.useMemo)((()=>is(r,{myVaultsTranslation:R.SECURE_NOTES_TRANSLATION_KEY_ID})),[r]),h=(0,n.useMemo)((()=>ss(t)),[t]),x=(0,n.useCallback)((e=>{i(c,e.target.checked)}),[i,c]);return r.isSharedGroup?(0,o.jsxs)(as.Z,{disableGutters:!0,disableSticky:!0,sx:Ts,children:[(0,o.jsx)(js,{checked:s,indeterminate:l,onChange:x,disabled:u,isManagementMode:d,disabledTitle:p("managementMode.disabledSelection.shared")}),(0,o.jsx)(Ot.Z,{variant:"caption",tooltipProps:g,cursor:"default",children:(0,o.jsx)(be.ZP,{variant:"caption",color:X.B1,children:p(...m)})})]}):t.isPrivateKeychain?(0,o.jsxs)(as.Z,{disableGutters:!0,disableSticky:!0,sx:Ts,children:[(0,o.jsx)(js,{checked:s,indeterminate:l,onChange:x,disabled:u,isManagementMode:d,disabledTitle:p("managementMode.disabledSelection.group")}),(0,o.jsx)(Ot.Z,{variant:"caption",tooltipProps:g,cursor:"default",children:(0,o.jsx)(be.ZP,{variant:"caption",color:X.B1,children:p(...h)})})]}):(0,o.jsxs)(as.Z,{disableGutters:!0,disableSticky:!0,sx:Ts,children:[(0,o.jsx)(js,{checked:s,indeterminate:l,onChange:x,disabled:u,isManagementMode:d,disabledTitle:p("managementMode.disabledSelection.group")}),(0,o.jsxs)(Ot.Z,{variant:"caption",tooltipProps:g,cursor:"default",children:[(0,o.jsx)(be.ZP,{variant:"caption",color:X.S5,children:p(...h)}),(0,o.jsx)(be.ZP,{variant:"caption",children:" / "}),(0,o.jsx)(be.ZP,{variant:"caption",color:X.B1,children:p(...m)})]})]})})),Ms={position:"relative"},Os=(0,n.memo)((e=>{const{vault:t,onItemClick:r,disableArrow:a,restrictions:i=[],isRestricted:s=!1,containerRef:l=document.body,onVaultSelectionChange:c,isChecked:d,isManagementMode:u,isCheckDisabled:p}=e,{t:g}=(0,_.T_)(),m=(0,n.useCallback)((()=>{r(t)}),[t,r]),h=(0,n.useCallback)((e=>{c([t.compositeId],e.target.checked)}),[c,t]),{itemTextTooltipProps:x,itemButtonTooltipProps:v}=(0,n.useMemo)((()=>({itemTextTooltipProps:ds(l),itemButtonTooltipProps:{disablePortal:!0,container:l}})),[l]),y=g(t.isShared?"managementMode.disabledSelection.shared":"managementMode.disabledSelection.group");return(0,o.jsxs)(ws.Z,{disableGutters:!0,disablePadding:!0,onClick:m,sx:Ms,children:[(0,o.jsx)(js,{checked:d,onChange:h,disabled:p,isManagementMode:u,disabledTitle:y}),(0,o.jsxs)(fs.Z,{tooltipPopperProps:v,isRestricted:s,restrictionsTooltipContent:(0,o.jsx)(Zs,{restrictions:i}),disableArrow:a,children:[(0,o.jsx)(Cs.Z,{children:(0,o.jsx)(vr,{type:sr.SecureNote,width:40,height:40,outlineColor:t.isTrusted&&X.L_})}),(0,o.jsx)(Ss.Z,{disableTypography:!0,primary:(0,o.jsx)(Q.Z,{container:!0,alignItems:"center",height:"100%",children:(0,o.jsx)(Ot.Z,{component:"span",variant:"subtitle2",breakWord:!0,cursorPointer:!0,tooltipProps:x,children:t.name})})})]})]})})),Ds={position:"relative"},Vs=(0,n.memo)((e=>{const{organization:t,group:r,containerRef:a,onVaultSelectionChange:i,isChecked:s,isPartiallyChecked:l,vaultIds:c,isManagementMode:d,isCheckDisabled:u}=e,{t:p}=(0,_.T_)(),g=(0,n.useMemo)((()=>ds(a)),[a]),m=(0,n.useMemo)((()=>is(r,{myVaultsTranslation:R.CREDIT_CARD_TRANSLATION_KEY_ID})),[r]),h=(0,n.useMemo)((()=>ss(t)),[t]),x=(0,n.useCallback)((e=>{i&&i(c,e.target.checked)}),[i,c]);return r.isSharedGroup?(0,o.jsxs)(as.Z,{disableGutters:!0,disableSticky:!0,sx:Ds,children:[(0,o.jsx)(js,{checked:s,indeterminate:l,onChange:x,disabled:u,isManagementMode:d,disabledTitle:p("managementMode.disabledSelection.shared")}),(0,o.jsx)(Ot.Z,{variant:"caption",tooltipProps:g,cursor:"default",children:(0,o.jsx)(be.ZP,{variant:"caption",color:X.B1,children:p(...m)})})]}):t.isPrivateKeychain?(0,o.jsxs)(as.Z,{disableGutters:!0,disableSticky:!0,sx:Ds,children:[(0,o.jsx)(js,{checked:s,indeterminate:l,onChange:x,disabled:u,isManagementMode:d,disabledTitle:p("managementMode.disabledSelection.group")}),(0,o.jsx)(Ot.Z,{variant:"caption",tooltipProps:g,cursor:"default",children:(0,o.jsx)(be.ZP,{variant:"caption",color:X.B1,children:p(...h)})})]}):(0,o.jsxs)(as.Z,{disableGutters:!0,disableSticky:!0,sx:Ds,children:[(0,o.jsx)(js,{checked:s,indeterminate:l,onChange:x,disabled:u,isManagementMode:d,disabledTitle:p("managementMode.disabledSelection.group")}),(0,o.jsxs)(Ot.Z,{variant:"caption",tooltipProps:g,cursor:"default",children:[(0,o.jsx)(be.ZP,{variant:"caption",color:X.S5,children:p(...h)}),(0,o.jsx)(be.ZP,{variant:"caption",children:" / "}),(0,o.jsx)(be.ZP,{variant:"caption",color:X.B1,children:p(...m)})]})]})}));var Ls=r(1383);const Es={position:"relative"},Bs=(0,n.memo)((e=>{const{vault:t,onItemClick:r,disableArrow:a,restrictions:i=[],isRestricted:s=!1,containerRef:l=document.body,onVaultSelectionChange:c,isChecked:d,isManagementMode:u,isCheckDisabled:p}=e,{t:g}=(0,_.T_)(),m=(0,n.useCallback)((()=>{r(t)}),[t,r]),h=(0,n.useCallback)((e=>{c&&c([t.compositeId],e.target.checked)}),[c,t]),x=g(t.isShared?"managementMode.disabledSelection.shared":"managementMode.disabledSelection.group"),{itemTextTooltipProps:v,itemButtonTooltipProps:y}=(0,n.useMemo)((()=>({itemTextTooltipProps:ds(l),itemButtonTooltipProps:{disablePortal:!0,container:l}})),[l]);return(0,o.jsxs)(ws.Z,{disableGutters:!0,disablePadding:!0,onClick:m,sx:Es,children:[(0,o.jsx)(js,{checked:d,onChange:h,disabled:p,isManagementMode:u,disabledTitle:x}),(0,o.jsxs)(fs.Z,{isRestricted:s,tooltipPopperProps:y,restrictionsTooltipContent:(0,o.jsx)(Zs,{restrictions:i}),disableArrow:a,children:[(0,o.jsx)(Cs.Z,{children:(0,o.jsx)(ar.Z,{type:t.paymentSystem})}),(0,o.jsx)(Ss.Z,{primary:(0,o.jsx)(Ot.Z,{breakWord:!0,component:"span",variant:"subtitle2",color:X.S5,tooltipProps:v,whiteSpace:"normal",cursorPointer:!0,children:t.name}),secondary:(0,o.jsx)(be.ZP,{component:"span",variant:"body2",color:X.S4,noWrap:!0,children:(0,Ls.W4)(t.lastDigits)})})]})]})}));var Rs=Object.defineProperty,Ws=Object.defineProperties,Ns=Object.getOwnPropertyDescriptors,Fs=Object.getOwnPropertySymbols,Us=Object.prototype.hasOwnProperty,zs=Object.prototype.propertyIsEnumerable,_s=(e,t,r)=>t in e?Rs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Gs=(e,t)=>{for(var r in t||(t={}))Us.call(t,r)&&_s(e,r,t[r]);if(Fs)for(var r of Fs(t))zs.call(t,r)&&_s(e,r,t[r]);return e},qs=(e,t)=>Ws(e,Ns(t));const Ks={[sr.Password]:Ps,[sr.CreditCard]:Vs,[sr.SecureNote]:As},Hs={[sr.Password]:ks,[sr.CreditCard]:Bs,[sr.SecureNote]:Os},$s=e=>{const{type:t,list:r,containerRef:a,onScroll:i,scrollTop:s,isManagementMode:l,color:c="inherit"}=e,u=(0,n.useRef)(null),[p,g]=(0,n.useMemo)((()=>{const e=Ks[t],r=Hs[t];if(!e||!r)throw new Error("VirtualizedVaultsList: wrong 'type' provided.");return[e,r]}),[t]),m=(0,n.useCallback)((e=>{const{key:t,style:n,index:a}=e,i=r[a],s=qs(Gs({},n),{boxSizing:"border-box"});if(i.type===ns.HEADER_TYPE)return s.paddingTop=8,s.paddingBottom=4,(0,o.jsx)("div",{style:s,children:(0,o.jsx)(p,Gs({},i.props))},t);const l=r[a+1],d=!l||l.type===ns.HEADER_TYPE;return s.paddingBottom=d?0:4,s.color=c,(0,o.jsx)("div",{style:s,children:(0,o.jsx)(g,Gs({},i.props))},t)}),[r,p,g,c]),h=(0,n.useCallback)((({index:e})=>{if(r[e].type===ns.HEADER_TYPE)return 30;const t=r[e+1];return 48+(!t||t.type===ns.HEADER_TYPE?0:4)}),[r]),x=(0,n.useMemo)((()=>(e=>({width:"100%",paddingLeft:e?4:0,transition:"padding-left 0.1s ease-in-out","& .ReactVirtualized__Grid__innerScrollContainer, .ReactVirtualized__Grid.ReactVirtualized__List":{overflow:"visible !important"}}))(l)),[l]),[v,y]=(0,rs.A)((0,G.merge)({},d.bK,{events:{scroll:(e,t)=>{const{clientHeight:r,clientWidth:o,scrollHeight:n,scrollLeft:a,scrollTop:s,scrollWidth:l}=t.target;i({clientHeight:r,clientWidth:o,scrollHeight:n,scrollLeft:a,scrollTop:s,scrollWidth:l})}}}));return(0,n.useEffect)((()=>(v(a),()=>{var e;null==(e=y())||e.destroy()})),[v,y,a]),(0,n.useEffect)((()=>{u.current&&u.current.recomputeRowHeights()}),[r]),(0,o.jsx)(Ji.Z,{disablePadding:!0,disableMargin:!0,sx:x,children:(0,o.jsx)(es.ZP,{scrollElement:a,children:({width:e=0,height:t=0,registerChild:n,onChildScroll:a})=>(0,o.jsx)("div",{ref:e=>{e&&n(e)},children:(0,o.jsx)(ts.ZP,{ref:u,width:e,height:t,autoWidth:!0,autoHeight:!0,rowCount:r.length,rowHeight:h,estimatedRowSize:52,rowRenderer:m,onScroll:a,scrollTop:s})})})})},Ys=(0,n.memo)((e=>{const{containerRef:t}=e;return t?(0,o.jsx)(Xi.ZP,{children:({onScroll:t,scrollTop:r})=>(0,o.jsx)($s,qs(Gs({},e),{onScroll:t,scrollTop:r}))}):null})),Qs=(0,n.memo)((e=>{const{onItemClick:t,state:r,disableArrows:a=!1,launchText:i,onLaunchClick:s,containerRef:l,isManagementMode:c=!1,selectedVaults:d,onVaultSelectionChange:u,color:p}=e,{orderedGroupsGroupedByOrganizationWithoutSharedGroups:g,orderedPasswordVaultsGroupedByGroupId:m,organizationsById:h,orderedOrganizationsIdsWithPrivateKeychainInBottom:x,orderedSharedGroups:v,groupsById:y}=r,j=(0,n.useMemo)((()=>{const e=[],r=r=>{r.forEach((r=>{var o;const n=null!=(o=m[r.groupId])?o:[];if(!n.length)return;const p=h[r.organizationId],g=n.filter((e=>y[e.groupId].canDelete&&!e.isShared)).map((e=>e.compositeId));let x=!1,v=!1;g.length&&d&&(x=!0,g.forEach((e=>{d.has(e)?v=!0:x=!1})),x&&(v=!1));const j=!g.length;e.push(ls({group:r,organization:p,containerRef:l,onVaultSelectionChange:u,isChecked:x,isPartiallyChecked:v,vaultIds:g,isCheckDisabled:j,isManagementMode:c})),n.forEach((o=>{var n;const p=!!(null==d?void 0:d.has(o.compositeId)),g=!(y[o.groupId].canDelete&&!o.isShared);e.push(cs({containerRef:l,vault:o,onItemClick:t,isManagementMode:c,restrictions:r.restrictions,isRestricted:!!(null==(n=r.restrictions)?void 0:n.length),disableArrow:a,onVaultSelectionChange:u,isChecked:p,isCheckDisabled:g,launchText:i,onLaunchClick:s}))}))}))};return x.forEach((e=>{var t;const o=null!=(t=g[e])?t:[];r(o)})),r(v),e}),[x,g,m,h,l,t,i,s,a,v,d,u,c,y]);return(0,o.jsx)(Ys,{isManagementMode:c,type:sr.Password,list:j,containerRef:l,color:p})}));var Js=r(51586),Xs=r(77412);const el=()=>{const{t:e}=(0,_.T_)();return(0,o.jsx)(Q.Z,{display:"flex",flex:1,justifyContent:"center",alignItems:"center",children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"center",alignItems:"center",children:[(0,o.jsx)(Q.Z,{item:!0,container:!0,justifyContent:"center",alignItems:"center",children:(0,o.jsx)(Xs.Z,{width:162,height:200})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,justifyContent:"center",alignItems:"center",children:(0,o.jsx)(be.ZP,{variant:"h6",color:X.S5,children:e("common.noResults")})})]})})},tl=e=>{const{hasVaults:t,isLoading:r,children:n}=e;return r?(0,o.jsx)(Q.Z,{display:"flex",flex:1,justifyContent:"center",alignItems:"center",children:(0,o.jsx)(Js.Z,{})}):t?(0,o.jsx)(Q.Z,{container:!0,px:2,py:1,children:n}):(0,o.jsx)(el,{})};var rl=r(62149);const ol={flex:1,maxWidth:24},nl=(0,n.memo)((e=>{const{item:t,isLast:r}=e,{t:n}=(0,_.T_)(),a=(0,v.s0)(),{Icon:i,tooltipTitleTranslationKey:s,onClick:l,navigateTo:c}=t,d=null!=l?l:()=>a(c);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ne.Z,{title:n(s),children:(0,o.jsx)(Pe.Z,{onClick:d,children:(0,o.jsx)(i,{color:X.S5})})}),!r&&(0,o.jsx)(je.Z,{style:ol})]})}));var al=r(58246),il=r(82299);const sl={reactKey:"BottomPanelElement-Menu",Icon:al.Z,tooltipTitleTranslationKey:"bottomPanel.buttons.menu",navigateTo:D.MenuPage},ll={reactKey:"BottomPanelElement-ManagementMode",Icon:il.Z,tooltipTitleTranslationKey:"bottomPanel.buttons.managementMode"},cl={reactKey:"BottomPanelElement-TrustBrowser",Icon:Ro.Z,tooltipTitleTranslationKey:"bottomPanel.buttons.trustBrowser",navigateTo:D.TrustedBrowserPage},dl={reactKey:"BottomPanelElement-ReportSite",Icon:Wo.Z,tooltipTitleTranslationKey:"bottomPanel.buttons.reportSite",navigateTo:D.ReportSite},ul={default:{[Yi.Menu]:sl,[Yi.TrustBrowser]:cl,[Yi.ReportSite]:dl},custom:{[Yi.ManagementMode]:ll}},pl={padding:"4px 16px",borderTop:`1px solid ${X.S3}`,borderRadius:0,backgroundColor:X.S2},gl=(0,n.memo)((e=>{const{items:t,isManagementMode:r,totalSelectionCount:n,onManagementModeClose:a,onItemsDelete:i}=e,{t:s}=(0,_.T_)();if(!t.length)return null;if(!r){const e=t.map(((e,r)=>{const n=(e=>"object"==typeof e?e:ul.default[e])(e);return n?(0,o.jsx)(nl,{item:n,isLast:r===t.length-1},n.reactKey):null}));return(0,o.jsx)(rl.Z,{sx:pl,elevation:0,children:(0,o.jsx)(Q.Z,{container:!0,justifyContent:"center",flexWrap:"nowrap",children:e})})}return(0,o.jsx)(rl.Z,{sx:pl,elevation:0,children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,o.jsxs)(Q.Z,{item:!0,children:[(0,o.jsx)(be.ZP,{variant:"caption",color:X.S5,children:s("bottomPanel.labels.selectItems")}),!!n&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(be.ZP,{variant:"caption",color:X.S4,children:" / "}),(0,o.jsx)(be.ZP,{variant:"caption",color:X.sf,children:s("bottomPanel.labels.numberOfItems",{numberOfItems:n})})]})]}),(0,o.jsxs)(Q.Z,{item:!0,columnGap:2,children:[(0,o.jsx)(Pe.Z,{onClick:i,disabled:!n,children:(0,o.jsx)(Ge.Z,{color:n?X.sf:X.S3})}),(0,o.jsx)(Pe.Z,{onClick:a,children:(0,o.jsx)(we.Z,{color:X.i})})]})]})})}));const ml=e=>{const{closeOverlayOnApprove:t}=e,{t:r}=(0,_.T_)(),{showError:o}=(0,u.Z)(),{request:a,handleError:i}=kt(),s=(0,n.useCallback)(((e,n)=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{if(!e.isRestricted)return!0;const{organizationId:r,compositeId:o,groupId:n}=e;return yield a({messageType:At.CheckRestrictions,payload:{organizationId:r,compositeId:o,groupId:n,closeOverlayOnApprove:t}}),!0}catch(e){const{skipError:t,errorKey:a}=i(e);return t||(o({text:r(a)}),wr(e,{message:`${n}/checkIsAllowedByRestrictions exception`})),!1}}))),[a,t,i,o,r]);return{checkIsAllowedByRestrictions:s}};var hl=Object.defineProperty,xl=Object.defineProperties,vl=Object.getOwnPropertyDescriptors,yl=Object.getOwnPropertySymbols,jl=Object.prototype.hasOwnProperty,bl=Object.prototype.propertyIsEnumerable,Pl=(e,t,r)=>t in e?hl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wl=(e,t)=>{for(var r in t||(t={}))jl.call(t,r)&&Pl(e,r,t[r]);if(yl)for(var r of yl(t))bl.call(t,r)&&Pl(e,r,t[r]);return e};const fl=(0,n.memo)((e=>{var t;const{isFilterActive:r,isFilteringLoading:a,filteredState:i,bottomPanelItems:s,isManagementMode:l,selectedVaults:c,onVaultSelectionChange:u,totalSelectedVaultsCount:p,onManagementModeClose:g,onSelectedVaultsDelete:m}=e,{t:h}=(0,_.T_)(),x=(0,v.s0)(),{state:y}=Y(),[j,P]=(0,n.useState)(),{checkIsAllowedByRestrictions:w}=ml({closeOverlayOnApprove:!0}),f=(0,n.useCallback)((e=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{if(!(yield w(e,"LoginsTab/handleItemClick")))return;const{groupId:t,vaultId:r}=e;x(b(r,t))}catch(e){wr(e,{message:"LoginsTab/handleItemClick exception"})}}))),[w,x]),C=(0,n.useCallback)((e=>{var t;tr(null==(t=e.application)?void 0:t.createdAtWebsite)}),[]),{passwordVaults:S}=y;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(at,(Z=wl({},d.nX),I={ref:P,children:(0,o.jsxs)(je.Z,{display:"flex",flex:1,children:[(0,o.jsxs)(st,{condition:!r,children:[(0,o.jsx)(st,{condition:!S.length,children:(0,o.jsx)(Qi,{text:h("loginsTab.createFirstPasswordText")})}),(0,o.jsx)(st,{condition:!!S.length,children:(0,o.jsx)(Q.Z,{container:!0,pl:2,pr:2,py:1,children:(0,o.jsx)(Qs,{state:y,onItemClick:f,onLaunchClick:C,launchText:h("common.launch"),containerRef:j,isManagementMode:l,selectedVaults:c,onVaultSelectionChange:u})})})]}),(0,o.jsx)(st,{condition:r,children:(0,o.jsx)(tl,{hasVaults:!!(null==(t=null==i?void 0:i.passwordVaults)?void 0:t.length),isLoading:a,children:(0,o.jsx)(Qs,{state:i,onItemClick:f,launchText:h("common.launch"),onLaunchClick:C,containerRef:j,isManagementMode:l,selectedVaults:c,onVaultSelectionChange:u})})})]})},xl(Z,vl(I)))),(0,o.jsx)(gl,{items:s,isManagementMode:l,onManagementModeClose:g,onItemsDelete:m,totalSelectionCount:p})]});var Z,I})),Cl=(0,n.memo)((e=>{const{onItemClick:t,state:r,disableArrows:a=!1,containerRef:i,isManagementMode:s,selectedVaults:l,onVaultSelectionChange:c}=e,{orderedGroupsGroupedByOrganizationWithoutSharedGroups:d,orderedSecureNotesGroupedByGroupId:u,organizationsById:p,orderedSharedGroups:g,orderedOrganizationsIdsWithPrivateKeychainInBottom:m,groupsById:h}=r,x=(0,n.useMemo)((()=>{const e=[],r=r=>{r.forEach((r=>{var o;const n=null!=(o=u[r.groupId])?o:[];if(!n.length)return;const d=p[r.organizationId],g=n.filter((e=>h[e.groupId].canDelete&&!e.isShared)).map((e=>e.compositeId));let m=!1,x=!1;g.length&&(m=!0,g.forEach((e=>{l.has(e)?x=!0:m=!1})),m&&(x=!1));const v=!g.length;e.push(ls({group:r,organization:d,containerRef:i,onVaultSelectionChange:c,isChecked:m,isPartiallyChecked:x,vaultIds:g,isCheckDisabled:v,isManagementMode:s})),n.forEach((o=>{var n;const d=l.has(o.compositeId),u=!(h[o.groupId].canDelete&&!o.isShared);e.push(cs({containerRef:i,vault:o,onItemClick:t,isManagementMode:s,restrictions:r.restrictions,isRestricted:!!(null==(n=r.restrictions)?void 0:n.length),disableArrow:a,onVaultSelectionChange:c,isChecked:d,isCheckDisabled:u}))}))}))};return m.forEach((e=>{var t;const o=null!=(t=d[e])?t:[];r(o)})),r(g),e}),[m,d,u,g,p,i,t,a,l,c,s,h]);return(0,o.jsx)(Ys,{isManagementMode:s,type:sr.SecureNote,list:x,containerRef:i})}));var Sl=Object.defineProperty,Zl=Object.defineProperties,Il=Object.getOwnPropertyDescriptors,kl=Object.getOwnPropertySymbols,Tl=Object.prototype.hasOwnProperty,Al=Object.prototype.propertyIsEnumerable,Ml=(e,t,r)=>t in e?Sl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ol=(e,t)=>{for(var r in t||(t={}))Tl.call(t,r)&&Ml(e,r,t[r]);if(kl)for(var r of kl(t))Al.call(t,r)&&Ml(e,r,t[r]);return e};const Dl=(0,n.memo)((e=>{var t;const{isFilterActive:r,isFilteringLoading:a,filteredState:i,bottomPanelItems:s,isManagementMode:l,selectedVaults:c,onVaultSelectionChange:p,totalSelectedVaultsCount:g,onManagementModeClose:m,onSelectedVaultsDelete:h}=e,{t:x}=(0,_.T_)(),{showError:y}=(0,u.Z)(),j=(0,v.s0)(),{state:b}=Y(),{sendBrowserMessage:P}=Ct(),[w,f]=(0,n.useState)(),{secureNoteVaults:S}=b,{request:Z,handleError:I}=kt(),{checkIsAllowedByRestrictions:k}=ml({closeOverlayOnApprove:!1}),T=(0,n.useCallback)((e=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{if(!(yield k(e,"SecureNotesTab/handleItemClick")))return;const{vaultId:t,groupId:r,organizationId:o}=e,{policies:n}=yield P({messageType:At.GetVaultInfo,payload:{vaultId:t,organizationId:o,groupId:r}});if(!n.canView)return void y({text:x("secureNotesTab.viewSecureNoteError")});const{note:a}=yield Z({messageType:At.RequestSecureNoteVaultSecureData,payload:{organizationId:o,id:t,groupId:r,withOverlay:!0,requestType:Yt.SecureNoteRequest}});j(C(t,r),{state:{note:a}})}catch(e){const{skipError:t,errorKey:r}=I(e);if(t)return;y({text:x(r)}),wr(e,{message:"SecureNotesTab/handleItemClick exception"})}}))),[k,Z,I,j,P,y,x]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(at,(A=Ol({},d.nX),M={ref:f,children:(0,o.jsxs)(je.Z,{display:"flex",flex:1,children:[(0,o.jsxs)(st,{condition:!r,children:[(0,o.jsx)(st,{condition:!S.length,children:(0,o.jsx)(Qi,{text:x("secureNotesTab.createFirstSecureNoteText")})}),(0,o.jsx)(st,{condition:!!S.length,children:(0,o.jsx)(Q.Z,{container:!0,pl:2,pr:2,py:1,children:(0,o.jsx)(Cl,{state:b,onItemClick:T,containerRef:w,isManagementMode:l,selectedVaults:c,onVaultSelectionChange:p})})})]}),(0,o.jsx)(st,{condition:r,children:(0,o.jsx)(tl,{hasVaults:!!(null==(t=null==i?void 0:i.secureNoteVaults)?void 0:t.length),isLoading:a,children:(0,o.jsx)(Cl,{state:i,onItemClick:T,containerRef:w,isManagementMode:l,selectedVaults:c,onVaultSelectionChange:p})})})]})},Zl(A,Il(M)))),(0,o.jsx)(gl,{items:s,isManagementMode:l,onManagementModeClose:m,onItemsDelete:h,totalSelectionCount:g})]});var A,M})),Vl=(0,n.memo)((e=>{const{onItemClick:t,state:r,disableArrows:a=!1,containerRef:i,isManagementMode:s=!1,selectedVaults:l,onVaultSelectionChange:c}=e,{orderedGroupsGroupedByOrganizationWithoutSharedGroups:d,orderedCreditCardGroupedByGroupId:u,organizationsById:p,orderedOrganizationsIdsWithPrivateKeychainInBottom:g,orderedSharedGroups:m,groupsById:h}=r,x=(0,n.useMemo)((()=>{const e=[],r=r=>{r.forEach((r=>{var o;const n=null!=(o=u[r.groupId])?o:[];if(!n.length)return;const d=p[r.organizationId],g=n.filter((e=>h[e.groupId].canDelete&&!e.isShared)).map((e=>e.compositeId));let m=!1,x=!1;g.length&&l&&(m=!0,g.forEach((e=>{l.has(e)?x=!0:m=!1})),m&&(x=!1));const v=!g.length;e.push(ls({group:r,organization:d,containerRef:i,onVaultSelectionChange:c,isChecked:m,isPartiallyChecked:x,vaultIds:g,isCheckDisabled:v,isManagementMode:s})),n.forEach((o=>{var n;const d=!!(null==l?void 0:l.has(o.compositeId)),u=!(h[o.groupId].canDelete&&!o.isShared);e.push(cs({containerRef:i,vault:o,onItemClick:t,isManagementMode:s,restrictions:r.restrictions,isRestricted:!!(null==(n=r.restrictions)?void 0:n.length),disableArrow:a,onVaultSelectionChange:c,isChecked:d,isCheckDisabled:u}))}))}))};return g.forEach((e=>{var t;const o=null!=(t=d[e])?t:[];r(o)})),r(m),e}),[g,d,u,p,i,t,a,m,l,c,s,h]);return(0,o.jsx)(Ys,{isManagementMode:s,type:sr.CreditCard,list:x,containerRef:i})}));var Ll=Object.defineProperty,El=Object.defineProperties,Bl=Object.getOwnPropertyDescriptors,Rl=Object.getOwnPropertySymbols,Wl=Object.prototype.hasOwnProperty,Nl=Object.prototype.propertyIsEnumerable,Fl=(e,t,r)=>t in e?Ll(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ul=(e,t)=>{for(var r in t||(t={}))Wl.call(t,r)&&Fl(e,r,t[r]);if(Rl)for(var r of Rl(t))Nl.call(t,r)&&Fl(e,r,t[r]);return e};const zl=(0,n.memo)((e=>{var t;const{isFilterActive:r,isFilteringLoading:a,filteredState:i,bottomPanelItems:s,isManagementMode:l,selectedVaults:c,onVaultSelectionChange:p,totalSelectedVaultsCount:g,onManagementModeClose:m,onSelectedVaultsDelete:h}=e,[x,y]=(0,n.useState)(),{t:j}=(0,_.T_)(),{showError:b}=(0,u.Z)(),P=(0,v.s0)(),{state:w}=Y(),{sendBrowserMessage:f}=Ct(),{request:C,handleError:S}=kt(),{checkIsAllowedByRestrictions:Z}=ml({closeOverlayOnApprove:!1}),I=(0,n.useCallback)((e=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{if(!(yield Z(e,"CreditCardsTab/handleItemClick")))return;const{organizationId:t,groupId:r,vaultId:o}=e,{policies:n}=yield f({messageType:At.GetVaultInfo,payload:{vaultId:o,organizationId:t,groupId:r}});if(!n.canView)return void b({text:j("creditCardsTab.viewCreditCardError")});const{cardNumber:a,cvv:i,cardHolderName:s,expiryDate:l}=yield C({messageType:At.RequestCreditCardVaultSecureData,payload:{organizationId:t,id:o,groupId:r,withOverlay:!0,requestType:Yt.ViewCreditCardRequest}});P(k(o,r),{state:{cardNumber:a,cvv:i,cardHolderName:s,expiryDate:l}})}catch(e){const{skipError:t,errorKey:r}=S(e);if(t)return;b({text:j(r)}),wr(e,{message:"CreditCardsTab/handleItemClick exception"})}}))),[Z,f,C,S,P,b,j]),{creditCardVaults:T}=w;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(at,(A=Ul({},d.nX),M={ref:y,children:(0,o.jsxs)(je.Z,{display:"flex",flex:1,children:[(0,o.jsxs)(st,{condition:!r,children:[(0,o.jsx)(st,{condition:!T.length,children:(0,o.jsx)(Qi,{text:j("creditCardsTab.createFirstCreditCardText")})}),(0,o.jsx)(st,{condition:!!T.length,children:(0,o.jsx)(Q.Z,{container:!0,pl:2,pr:2,py:1,children:(0,o.jsx)(Vl,{state:w,onItemClick:I,containerRef:x,isManagementMode:l,selectedVaults:c,onVaultSelectionChange:p})})})]}),(0,o.jsx)(st,{condition:r,children:(0,o.jsx)(tl,{hasVaults:!!(null==(t=null==i?void 0:i.creditCardVaults)?void 0:t.length),isLoading:a,children:(0,o.jsx)(Vl,{state:i,onItemClick:I,containerRef:x,isManagementMode:l,selectedVaults:c,onVaultSelectionChange:p})})})]})},El(A,Bl(M)))),(0,o.jsx)(gl,{items:s,isManagementMode:l,onManagementModeClose:m,onItemsDelete:h,totalSelectionCount:g})]});var A,M}));var _l=Object.defineProperty,Gl=Object.defineProperties,ql=Object.getOwnPropertyDescriptors,Kl=Object.getOwnPropertySymbols,Hl=Object.prototype.hasOwnProperty,$l=Object.prototype.propertyIsEnumerable,Yl=(e,t,r)=>t in e?_l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ql=(e,t)=>{for(var r in t||(t={}))Hl.call(t,r)&&Yl(e,r,t[r]);if(Kl)for(var r of Kl(t))$l.call(t,r)&&Yl(e,r,t[r]);return e};const Jl={ID:"logins"},Xl={ID:"credit-cards"},ec={ID:"secure-notes"},tc=(0,n.memo)((e=>{const{activeTab:t}=e,{tab:r=t}=(0,v.UO)(),{t:a}=(0,_.T_)(),i=(0,v.s0)(),{isFilteringLoading:s,isFilterActive:l,filteredState:c}=xe(),{state:d}=Y(),{normalizedVaultsById:p,groupsById:g}=d,{showSuccess:m,showError:h}=(0,u.Z)(),[x,y]=(0,n.useState)(!1),[b,P]=(0,n.useState)(new Set),w=(0,n.useCallback)(((e,t)=>{P((r=>{const o=new Set(r);return t?e.forEach((e=>o.add(e))):e.forEach((e=>o.delete(e))),o}))}),[]),f=(0,n.useCallback)((()=>{y(!0)}),[]),C=(0,n.useCallback)((()=>{y(!1),P(new Set)}),[]),{request:S,handleError:Z}=kt(),I=(0,n.useCallback)((()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{yield S({messageType:At.BulkDeleteVaults,payload:{vaultIds:Array.from(b)}}),C(),m({text:a("toasts.approved")})}catch(e){const{skipError:t,errorKey:r}=Z(e);if(t)return;h({text:a(r)}),wr(e,{message:"HomePageTabs/handleSelectedVaultsDelete exception"})}}))),[b,S,Z,C,m,h,a]),k=(0,n.useCallback)((()=>{i(j(Jl.ID))}),[i]),T=(0,n.useCallback)((()=>{i(j(Xl.ID))}),[i]),A=(0,n.useCallback)((()=>{i(j(ec.ID))}),[i]),M=(0,n.useMemo)((()=>{return[Yi.Menu,(e=Ql({},ul.custom[Yi.ManagementMode]),t={onClick:f},Gl(e,ql(t))),Yi.TrustBrowser,Yi.ReportSite];var e,t}),[f]);(0,n.useEffect)((()=>{P((e=>{if(!e.size)return e;const{newSelectedVaults:t,hasDiff:r}=Array.from(e).reduce(((e,t)=>{const r=p[t];return r&&g[r.groupId].canDelete?e.newSelectedVaults.add(t):e.hasDiff=!0,e}),{newSelectedVaults:new Set,hasDiff:!1});return r?t:e}))}),[p,g]);const O={isFilterActive:l,isFilteringLoading:s,filteredState:c,bottomPanelItems:M,isManagementMode:x,selectedVaults:b,onVaultSelectionChange:w,totalSelectedVaultsCount:b.size,onManagementModeClose:C,onSelectedVaultsDelete:I};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Q.Z,{container:!0,children:[(0,o.jsx)(Q.Z,{item:!0,xs:12,p:1,children:(0,o.jsxs)(Ea.Z,{value:r,variant:"fullWidth",marginRight:"8px",padding:"4px",children:[(0,o.jsx)(Ba.Z,{value:Jl.ID,onClick:k,label:a("homePage.tabs.logins")}),(0,o.jsx)(Ba.Z,{value:Xl.ID,onClick:T,label:a("homePage.tabs.creditCards")}),(0,o.jsx)(Ba.Z,{minWidth:120,value:ec.ID,onClick:A,label:a("homePage.tabs.secureNotes")})]})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(te.Z,{})})]}),(0,o.jsx)(st,{condition:r===Jl.ID,children:(0,o.jsx)(fl,Ql({},O))}),(0,o.jsx)(st,{condition:r===Xl.ID,children:(0,o.jsx)(zl,Ql({},O))}),(0,o.jsx)(st,{condition:r===ec.ID,children:(0,o.jsx)(Dl,Ql({},O))})]})}));var rc=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const oc=()=>{const[e,t]=(0,n.useState)(!1),r=(0,v.s0)(),a=(0,n.useRef)(),{t:i}=(0,_.T_)(),{sendBrowserMessage:s}=Ct(),{showError:l,showWarning:c}=(0,u.Z)(),d=(0,n.useCallback)((e=>t(e)),[]),p=(0,n.useCallback)((e=>rc(void 0,null,(function*(){try{const{note:t,name:o,group:n}=e,{organizationId:a}=n,l={name:o,organizationId:a,groupId:n.groupId,note:t};yield s({messageType:At.CreateSecureNoteVault,payload:l}),r(j(ec.ID)),c({text:i("common.openMobileApp")})}catch(e){l({text:i("toasts.somethingWentWrong")}),wr(e,{message:"CreateSecureNotePage/handleVaultCreate exception"})}}))),[l,r,s,c,i]),g=(0,n.useCallback)((()=>rc(void 0,null,(function*(){a.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}))),[a]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:i("createSecureNotePage.title"),hasUnsavedChanges:e}),(0,o.jsx)(at,{background:X.S1,children:(0,o.jsx)(Hi,{formRef:a,onSubmit:p,onUnsavedChangesChange:d,defaultValues:{note:"",name:""}})}),(0,o.jsx)(Br.Z,{backgroundColor:X.i,sx:F,onClick:g,children:(0,o.jsx)(Rr.Z,{color:X.S1})})]})},nc=e=>{const{text:t,height:r}=e;return(0,o.jsx)(Q.Z,{container:!0,justifyContent:"center",alignItems:"center",height:r,children:(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{variant:"body1",color:X.S4,children:t})})})};const ac={cursor:"pointer"},ic=e=>{var t,r;const{vault:a,group:i,organization:s}=e,[l,c]=(0,n.useState)(!1),d=(0,v.s0)(),{t:p}=(0,_.T_)(),{state:g}=(0,v.TH)(),{showSuccess:m,showError:h}=(0,u.Z)(),x=(0,n.useCallback)((()=>c(!0)),[]),y=(0,n.useCallback)((()=>c(!1)),[]),{note:b}=g,{vaultId:P,groupId:w}=a,{isLoading:f,data:C}=Mr({vault:a,organization:s,group:i}),{request:k,handleError:T}=kt(),{policies:A,groupVaultSharingInfo:M,vaultSharingInfo:O}=C||{},V=(0,n.useCallback)((()=>{try{if(!A.canCopy)return;Le()(b),m({text:p("common.copied")})}catch(e){wr(e,{message:"ViewSecureNotePage/handleNoteCopyClick exception"})}}),[m,b,A.canCopy,p]),L=(0,n.useCallback)((()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{c(!1),yield k({messageType:At.DeleteVault,payload:{vaultId:P,groupId:w,organizationId:s.organizationId,isPrivateKeychain:s.isPrivateKeychain}}),d(j(ec.ID)),m({text:p("toasts.secureNoteHasBeenDeleted")})}catch(e){const{skipError:t,errorKey:r}=T(e);if(t)return;h({text:p(r)}),wr(e,{message:"ViewSecureNotePage/handleDeleteVaultClick exception"})}}))),[s,P,w,T,d,k,h,m,p]),E=(0,n.useCallback)((()=>{d(Z(P,w))}),[d,P,w]),B=(0,n.useCallback)((()=>{d(I(P,w))}),[d,P,w]),W=(0,n.useCallback)((()=>{d(S(P,w),{state:{note:b}})}),[d,P,w,b]),N=(0,n.useCallback)((e=>({label:e.groupName,key:e.groupId})),[]),F=(0,n.useCallback)((()=>{d(D.SharingCenter,{state:{vaultId:P,groupId:w,vaultType:sr.SecureNote}})}),[d,P,w]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:a.name}),(0,o.jsx)(at,{isLoading:f,background:X.S1,children:(0,o.jsx)(Ee.Z,{children:(0,o.jsxs)(je.Z,{children:[(0,o.jsx)(st,{condition:!!b,children:(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsx)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:(0,o.jsxs)(Q.Z,{item:!0,xs:!0,zeroMinWidth:!0,children:[(0,o.jsx)(lt,{renderAction:A.canCopy,text:p("viewSecureNotePage.noteTitle"),action:(0,o.jsx)(ht,{onCopy:V})}),(0,o.jsx)(ut,{ignoreTextOverFlow:!0,breakSpaces:!0,text:b})]})})})}),(0,o.jsx)(st,{condition:!b,children:(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsx)(nc,{height:100,text:p("viewSecureNotePage.noSecureNoteText")})})}),(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsx)(Mt,{organization:s,group:i,translationKey:R.SECURE_NOTES_TRANSLATION_KEY_ID})}),(0,o.jsx)(st,{condition:!!(null==(t=null==i?void 0:i.restrictions)?void 0:t.length),children:(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsx)(Jt,{restrictions:i.restrictions,organization:s})})}),(0,o.jsx)(st,{condition:(null==O?void 0:O.isOwner)&&!!(null==O?void 0:O.sharedCount),children:(0,o.jsx)(it,{dividerBottom:!0,onClick:F,children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",sx:ac,children:[(0,o.jsxs)(Q.Z,{item:!0,xs:!0,zeroMinWidth:!0,children:[(0,o.jsx)(lt,{text:p("viewSecureNotePage.sharedWithTitle")}),(0,o.jsx)(ut,{text:p("viewSecureNotePage.sharedWithText",{count:null==O?void 0:O.sharedCount})})]}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(Pe.Z,{children:(0,o.jsx)(Ne.Z,{height:15,width:7.5,color:X.i})})})]})})}),(0,o.jsx)(st,{condition:!!(null==(r=null==M?void 0:M.groups)?void 0:r.length),children:(0,o.jsxs)(it,{dividerBottom:!0,children:[(0,o.jsx)(lt,{text:p("viewVaultPage.sharedWithTitle")}),(0,o.jsx)(Fe.Z,{dataset:null==M?void 0:M.groups,getMetadata:N})]})})]})})}),(0,o.jsxs)(st,{condition:A.canDelete||A.canEdit,children:[(0,o.jsx)(Ar,{onClick:x}),(0,o.jsxs)(ke,{isOpen:l,onClose:y,title:p("actionDrawer.title"),children:[(0,o.jsx)(st,{condition:A.canEdit,children:(0,o.jsx)(Ae,{onClick:W,icon:(0,o.jsx)(Ue.Z,{}),title:p("actionDrawer.editVault")})}),(0,o.jsx)(st,{condition:A.canMove,children:(0,o.jsx)(Ae,{onClick:B,icon:(0,o.jsx)(ze.Z,{}),title:p("actionDrawer.moveVault")})}),(0,o.jsx)(st,{condition:A.canShare,children:(0,o.jsx)(Ae,{onClick:E,icon:(0,o.jsx)(_e.Z,{}),title:p("actionDrawer.shareVault")})}),(0,o.jsx)(st,{condition:A.canDelete,children:(0,o.jsx)(Ae,{onClick:L,icon:(0,o.jsx)(Ge.Z,{color:X.iP}),title:p("actionDrawer.deleteVault"),color:X.iP})})]})]})]})};var sc=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const lc=(0,n.memo)((e=>{const{vault:t,group:r}=e,[a,i]=(0,n.useState)(!1),s=(0,n.useRef)(),l=(0,v.s0)(),{t:c}=(0,_.T_)(),{sendBrowserMessage:d}=Ct(),{state:p}=(0,v.TH)(),{state:g}=Y(),{showError:m,showWarning:h,showSuccess:x}=(0,u.Z)(),{organizationsById:y}=g,{note:b}=p,P=(0,n.useCallback)((e=>i(e)),[]),w=(0,n.useCallback)((e=>sc(void 0,null,(function*(){try{const{organizationId:r,groupId:o}=e.group,n={organizationId:r,groupId:o,vaultId:t.vaultId,note:e.note,name:e.name,withMobileRequest:e.isNoteFieldDirty};yield d({messageType:At.UpdateSecureNoteVault,payload:n}),e.isNoteFieldDirty?h({text:c("common.openMobileApp")}):x({text:c("toasts.secureNoteHasBeenUpdated")}),l(j(ec.ID))}catch(e){m({text:c("toasts.somethingWentWrong")}),wr(e,{message:"EditSecureNotePage/handleUpdate exception"})}}))),[m,l,t,d,x,h,c]),f=(0,n.useCallback)((()=>sc(void 0,null,(function*(){s.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}))),[s]),C=(0,n.useMemo)((()=>({note:b,group:r,name:t.name})),[b,r,t.name]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:t.name,hasUnsavedChanges:a}),(0,o.jsx)(at,{background:X.S1,children:(0,o.jsx)(Hi,{isEdit:!0,formRef:s,organization:y[t.organizationId],defaultValues:C,onSubmit:w,onUnsavedChangesChange:P})}),(0,o.jsx)(Br.Z,{backgroundColor:X.i,sx:F,onClick:f,children:(0,o.jsx)(Rr.Z,{color:X.S1})})]})}));var cc=Object.defineProperty,dc=Object.getOwnPropertySymbols,uc=Object.prototype.hasOwnProperty,pc=Object.prototype.propertyIsEnumerable,gc=(e,t,r)=>t in e?cc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const mc=e=>{const{PageComponent:t,extractFrom:r,fallbackRoute:a,pageProps:i}=e,{vaultId:s,groupId:l}=(0,v.UO)(),{state:c}=Y(),{groupsById:d,organizationsById:p}=c,{showError:g}=(0,u.Z)(),{t:m}=(0,_.T_)(),h=(0,n.useMemo)((()=>r[Qr({vaultId:s,groupId:l})]),[r,s,l]),x=(0,n.useMemo)((()=>d[l]),[d,l]),y=(0,n.useMemo)((()=>p[null==h?void 0:h.organizationId]),[null==h?void 0:h.organizationId,p]);return(0,n.useEffect)((()=>{x&&h&&y||g({text:m("common.noAccessToItem")})}),[x,h,y,g,m]),x&&h&&y?(0,o.jsx)(t,((e,t)=>{for(var r in t||(t={}))uc.call(t,r)&&gc(e,r,t[r]);if(dc)for(var r of dc(t))pc.call(t,r)&&gc(e,r,t[r]);return e})({vault:h,group:x,organization:y},i)):(0,o.jsx)(v.Fg,{to:a})};var hc=r(47541),xc=r(77138),vc=Object.defineProperty,yc=Object.defineProperties,jc=Object.getOwnPropertyDescriptors,bc=Object.getOwnPropertySymbols,Pc=Object.prototype.hasOwnProperty,wc=Object.prototype.propertyIsEnumerable,fc=(e,t,r)=>t in e?vc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Cc=e=>{const t=e,{children:r}=t,n=((e,t)=>{var r={};for(var o in e)Pc.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&bc)for(var o of bc(e))t.indexOf(o)<0&&wc.call(e,o)&&(r[o]=e[o]);return r})(t,["children"]);return(0,o.jsx)(xc.Z,(a=((e,t)=>{for(var r in t||(t={}))Pc.call(t,r)&&fc(e,r,t[r]);if(bc)for(var r of bc(t))wc.call(t,r)&&fc(e,r,t[r]);return e})({sx:{padding:0}},n),yc(a,jc({children:r}))));var a};var Sc=r(88675),Zc=r(15959),Ic=r(23269),kc=r(64519),Tc=Object.defineProperty,Ac=Object.defineProperties,Mc=Object.getOwnPropertyDescriptors,Oc=Object.getOwnPropertySymbols,Dc=Object.prototype.hasOwnProperty,Vc=Object.prototype.propertyIsEnumerable,Lc=(e,t,r)=>t in e?Tc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ec=e=>{const t=e,{children:r}=t,n=((e,t)=>{var r={};for(var o in e)Dc.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&Oc)for(var o of Oc(e))t.indexOf(o)<0&&Vc.call(e,o)&&(r[o]=e[o]);return r})(t,["children"]);return(0,o.jsx)(kc.Z,(a=((e,t)=>{for(var r in t||(t={}))Dc.call(t,r)&&Lc(e,r,t[r]);if(Oc)for(var r of Oc(t))Vc.call(t,r)&&Lc(e,r,t[r]);return e})({sx:{padding:"2px 8px"}},n),Ac(a,Mc({children:r}))));var a},Bc=(0,n.memo)((e=>{const{showDivider:t,userName:r,isFullPermissions:a,onDelete:i,employeeAccountId:s}=e,{t:l}=(0,_.T_)(),c=(0,n.useCallback)((()=>i(s)),[s,i]);return(0,o.jsxs)(Ec,{divider:t,children:[(0,o.jsx)(Sc.Z,{children:(0,o.jsx)(Zc.Z,{color:X.S4})}),(0,o.jsx)(Ic.Z,{disableTypography:!0,primary:(0,o.jsx)(be.ZP,{noWrap:!0,variant:"subtitle2",color:X.S5,children:r}),secondary:(0,o.jsxs)(Q.Z,{display:"inline-flex",children:[(0,o.jsx)(be.ZP,{variant:"body2",color:X.S4,children:l("sharingCenterPage.permission")})," ",(0,o.jsx)(be.ZP,{variant:"body2",color:X.S5,children:l(a?"sharingCenterPage.full":"sharingCenterPage.limited")})]})}),(0,o.jsx)(Q.Z,{mr:-1,children:(0,o.jsx)(ne.Z,{title:l("sharingCenterPage.revokeAccess"),children:(0,o.jsx)(Pe.Z,{onClick:c,children:(0,o.jsx)(Ge.Z,{color:X.iP})})})})]})}));const Rc=(0,n.memo)((e=>{const{vaultId:t,organizationId:r,searchString:a,onRevokeSharedVault:i,expanded:l}=e,{sendBrowserMessage:c}=Ct(),[d,u]=(0,n.useState)(l),{data:p,isLoading:g,refetch:m}=(0,s.useQuery)([Ir.GetEmployeesSharedWith,t,a],(()=>c({messageType:At.GetEmployeesSharedWith,payload:{organizationId:r,vaultId:t,searchString:a,isPending:!1}})),{enabled:d}),h=(0,n.useCallback)((e=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){yield i({employeeAccountId:e,organizationId:r,vaultId:t}),m()}))),[i,m,r,t]);return(0,n.useEffect)((()=>{!d&&l&&u(!0)}),[l,d]),(0,o.jsx)(Cc,{isLoading:g,children:null==p?void 0:p.employeeAccounts.map((({employeeAccountId:e,userName:t,isFullPermissions:r},n)=>(0,o.jsx)(Bc,{employeeAccountId:e,showDivider:p.employeeAccounts.length!==n+1,userName:t,isFullPermissions:r,onDelete:h},e)))})}));var Wc=r(72520);const Nc=(0,n.memo)((e=>{const{name:t,iconUrl:r,createdAtWebsite:a,vaultType:i}=e,{t:s}=(0,_.T_)(),[l,c]=(0,n.useState)(!1),d=(0,n.useCallback)((()=>c(!0)),[]),u=(0,n.useCallback)((()=>c(!1)),[]),p=(0,n.useCallback)((()=>tr(a)),[a]);return(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",onMouseEnter:d,onMouseLeave:u,children:[(0,o.jsx)(Q.Z,{item:!0,xs:a?9:12,children:(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",wrap:"nowrap",children:[(0,o.jsx)(vr,{type:sr[i],src:r,width:40,height:40}),(0,o.jsx)(be.ZP,{lineClamp:2,variant:"subtitle2",children:t})]})}),!!a&&(0,o.jsx)(Q.Z,{item:!0,xs:3,textAlign:"end",children:(0,o.jsx)(Wc.Z,{in:l,unmountOnExit:!0,mountOnEnter:!0,children:(0,o.jsx)("div",{children:(0,o.jsx)(je.Z,{mr:1,children:(0,o.jsx)(be.ZP,{asLink:!0,variant:"caption",onClick:p,children:s("common.launch")})})})})})]})}));var Fc=r(1150),Uc=Object.defineProperty,zc=Object.defineProperties,_c=Object.getOwnPropertyDescriptors,Gc=Object.getOwnPropertySymbols,qc=Object.prototype.hasOwnProperty,Kc=Object.prototype.propertyIsEnumerable,Hc=(e,t,r)=>t in e?Uc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const $c=e=>{const t=e,{children:r}=t,n=((e,t)=>{var r={};for(var o in e)qc.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&Gc)for(var o of Gc(e))t.indexOf(o)<0&&Kc.call(e,o)&&(r[o]=e[o]);return r})(t,["children"]);return(0,o.jsx)(Fc.Z,(a=((e,t)=>{for(var r in t||(t={}))qc.call(t,r)&&Hc(e,r,t[r]);if(Gc)for(var r of Gc(t))Kc.call(t,r)&&Hc(e,r,t[r]);return e})({sx:{padding:"0px 12px 0px 8px"}},n),zc(a,_c({children:r}))));var a},Yc=(0,n.memo)((e=>{const{vault:t,searchString:r,onRevokeSharedVault:a}=e,{applicationInfo:i,vaultId:s,name:l,organizationId:c,vaultType:d,hasEmployeeMatch:u}=t,[p,g]=(0,n.useState)(!0),m=(0,n.useCallback)(((e,t)=>g(t)),[]),h=(0,n.useMemo)((()=>u?r:void 0),[u,r]);return(0,n.useEffect)((()=>{g(u===!!r)}),[r,u]),(0,o.jsx)(je.Z,{mb:1,children:(0,o.jsxs)(hc.Z,{expanded:p,onChange:m,children:[(0,o.jsx)($c,{children:(0,o.jsx)(Nc,{name:l,iconUrl:null==i?void 0:i.iconUrl,createdAtWebsite:null==i?void 0:i.createdAtWebsite,vaultType:d})}),(0,o.jsx)(Rc,{expanded:p,vaultId:s,organizationId:c,searchString:h,onRevokeSharedVault:a},s)]})})}));const Qc=[],Jc=e=>{const{searchQuery:t,filterVaultId:r}=e,{t:a}=(0,_.T_)(),{sendBrowserMessage:i}=Ct(),{showSuccess:l,showError:c}=(0,u.Z)(),{data:d,isLoading:p,refetch:g}=(0,s.useQuery)([Ir.GetVaultsSharedWith,t,r],(()=>i({messageType:At.GetVaultsSharedWith,payload:{searchString:t,vaultsFilter:r?[r]:[]}}))),{request:m,handleError:h}=kt(),x=(0,n.useCallback)((e=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){const{organizationId:t,vaultId:r,employeeAccountId:o}=e;try{yield m({messageType:At.RevokeSharedWith,payload:{organizationId:t,vaultId:r,employeeAccountId:o}}),g(),l({text:a("toasts.accessHasBeenRevoked")})}catch(e){const{skipError:t,errorKey:r}=h(e);if(t)return;c({text:a(r)}),wr(e,{message:"SharedWithTab/handleRevokeSharedVault exception"})}}))),[m,h,g,c,l,a]);(0,n.useEffect)((()=>{g()}),[g,r]);const v=null!=d?d:Qc;return(0,o.jsx)(at,{isLoading:p,children:(0,o.jsx)(Ee.Z,{children:(0,o.jsxs)(je.Z,{children:[(0,o.jsx)(st,{condition:!v.length,children:(0,o.jsx)(el,{})}),(0,o.jsx)(st,{condition:!!v.length,children:(0,o.jsx)(Q.Z,{container:!0,px:2,py:1,children:(0,o.jsx)(Q.Z,{item:!0,xs:12,children:v.map((e=>(0,o.jsx)(Yc,{vault:e,searchString:t,onRevokeSharedVault:x},e.vaultId)))})})})]})})})};const Xc=(0,n.memo)((e=>{const{vaultId:t,organizationId:r,onRevokeSharingVault:a}=e,{sendBrowserMessage:i}=Ct(),{data:l,isLoading:c,refetch:d}=(0,s.useQuery)([Ir.GetEmployeesSharedBy,t],(()=>i({messageType:At.GetEmployeesSharedBy,payload:{organizationId:r,vaultId:t,isPending:!1}}))),u=(0,n.useCallback)((()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){a({organizationId:r,vaultId:t}),d()}))),[a,d,r,t]);return(0,o.jsx)(Cc,{isLoading:c,children:(0,o.jsx)(Bc,{showDivider:!1,userName:null==l?void 0:l.userName,isFullPermissions:null==l?void 0:l.isFullPermissions,onDelete:u})})})),ed=(0,n.memo)((e=>{const{vault:t,onRevokeSharingVault:r}=e,{name:n,applicationInfo:a,vaultType:i,organizationId:s,vaultId:l}=t;return(0,o.jsx)(je.Z,{mb:1,children:(0,o.jsxs)(hc.Z,{expanded:!0,children:[(0,o.jsx)($c,{expandIcon:null,children:(0,o.jsx)(Nc,{name:n,iconUrl:null==a?void 0:a.iconUrl,createdAtWebsite:null==a?void 0:a.createdAtWebsite,vaultType:i})}),(0,o.jsx)(Xc,{vaultId:l,organizationId:s,onRevokeSharingVault:r},l)]})})}));const td=[],rd=e=>{const{searchQuery:t}=e,{t:r}=(0,_.T_)(),{sendBrowserMessage:a}=Ct(),{showSuccess:i,showError:l}=(0,u.Z)(),{data:c,isLoading:d,refetch:p}=(0,s.useQuery)([Ir.GetVaultsSharedBy,t],(()=>a({messageType:At.GetVaultsSharedBy,payload:{searchString:t}}))),{request:g,handleError:m}=kt(),h=(0,n.useCallback)((e=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){const{organizationId:t,vaultId:o}=e;try{yield g({messageType:At.RevokeSharedBy,payload:{organizationId:t,vaultId:o}}),p(),i({text:r("toasts.accessHasBeenRevoked")})}catch(e){const{skipError:t,errorKey:o}=m(e);if(t)return;l({text:r(o)}),wr(e,{message:"SharedByTab/handleRevokeSharingVault exception"})}}))),[g,m,p,l,i,r]),x=null!=c?c:td;return(0,o.jsx)(at,{isLoading:d,children:(0,o.jsx)(Ee.Z,{children:(0,o.jsxs)(je.Z,{children:[(0,o.jsx)(st,{condition:!x.length,children:(0,o.jsx)(el,{})}),(0,o.jsx)(st,{condition:!!x.length,children:(0,o.jsx)(Q.Z,{container:!0,px:2,py:1,children:(0,o.jsx)(Q.Z,{item:!0,xs:12,children:x.map((e=>(0,o.jsx)(ed,{vault:e,onRevokeSharingVault:h},e.vaultId)))})})})]})})})};var od=r(43723);const nd=(0,n.memo)((e=>{const{onSearchChange:t,vaultName:r,onDelete:n}=e,{t:a}=(0,_.T_)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(te.Z,{}),(0,o.jsx)(je.Z,{mx:2,my:1,children:r?(0,o.jsx)(od.Z,{size:"small",typographyVariant:"caption",background:X.Sr,color:X.B1,label:r,onDelete:n}):(0,o.jsx)(ee.Z,{fullWidth:!0,autoFocus:!0,placeholder:a("common.search"),onChange:t})}),(0,o.jsx)(te.Z,{})]})})),ad=e=>{var t,r,o;const{state:n,vaultType:a,vaultId:i,groupId:s}=e,{normalizedPasswordVaultsById:l,normalizedCreditCardVaultsById:c,normalizedSecureNoteVaultsById:d}=n;return a===sr.Password?null!=(t=l[Qr({groupId:s,vaultId:i})])?t:null:a===sr.CreditCard?null!=(r=c[Qr({groupId:s,vaultId:i})])?r:null:a===sr.SecureNote&&null!=(o=d[Qr({groupId:s,vaultId:i})])?o:null},id="with",sd="by",ld=()=>{var e;const{t}=(0,_.T_)(),r=(0,v.TH)(),a=(0,v.s0)(),{vaultId:i,vaultType:s,groupId:l}=null!=(e=r.state)?e:{},{state:c}=Y(),d=ad({vaultId:i,groupId:l,vaultType:s,state:c}),[u,p]=(0,n.useState)(id),[g,m]=(0,n.useState)(void 0),h=(0,n.useCallback)(((e,t)=>{m(void 0),p(t)}),[]),x=(0,n.useCallback)((e=>{m(e)}),[]),y=(0,n.useCallback)((()=>{a(r.pathname,{replace:!0})}),[a,r.pathname]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:t("sharingCenterPage.title")}),(0,o.jsx)(Q.Z,{container:!0,children:(0,o.jsx)(Q.Z,{item:!0,xs:12,p:1,children:(0,o.jsxs)(Ea.Z,{value:u,variant:"fullWidth",marginRight:"8px",padding:"4px",children:[(0,o.jsx)(Ba.Z,{value:id,onClick:h,label:t("sharingCenterPage.tabs.with")}),(0,o.jsx)(Ba.Z,{value:sd,onClick:h,label:t("sharingCenterPage.tabs.by")})]})})}),(0,o.jsxs)(st,{condition:u===id,children:[(0,o.jsx)(nd,{onSearchChange:x,vaultName:null==d?void 0:d.name,onDelete:y}),(0,o.jsx)(Jc,{searchQuery:g,filterVaultId:i})]}),(0,o.jsxs)(st,{condition:u===sd,children:[(0,o.jsx)(nd,{onSearchChange:x}),(0,o.jsx)(rd,{searchQuery:g})]})]})};var cd=r(35452),dd=r(6122),ud=r(73005),pd=r(21929),gd=Object.defineProperty,md=Object.getOwnPropertySymbols,hd=Object.prototype.hasOwnProperty,xd=Object.prototype.propertyIsEnumerable,vd=(e,t,r)=>t in e?gd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yd=(e,t)=>{for(var r in t||(t={}))hd.call(t,r)&&vd(e,r,t[r]);if(md)for(var r of md(t))xd.call(t,r)&&vd(e,r,t[r]);return e};const jd=[{value:"bugs__missing_uniqkey_logo",translationKey:"missingLogo",label:"Missing Uniqkey logo"},{value:"bugs__does_not_insert_username/password",translationKey:"doesNotInsertUsernameOrPassword",label:"Does not insert username/password"},{value:"bugs__does_not_offer_to_save_my_account",translationKey:"doesNotOfferToSaveMyAccount",label:"Does not offer to save my account"},{value:"bugs__does_not_log_me_in_automatically",translationKey:"doesNotLoginAutomatically",label:"Does not log me in automatically"},{value:"bugs__does_not_insert_generated_password",translationKey:"doesNotInsertGeneratedPassword",label:"Does not insert generated password"},{value:"bugs__does_not_insert_2fa/mfa",translationKey:"doesNotInsert2fa",label:"Does not insert 2FA/MFA"},{value:"bugs__other",translationKey:"other",label:"Other (elaborate in “Additional info”)"}],bd=(0,G.keyBy)(jd,"value"),Pd=()=>{var e,t,r,a,i;const{t:l}=(0,_.T_)(),[c,d]=(0,n.useState)(""),p=(0,v.s0)(),{showSuccess:m,showError:h}=(0,u.Z)(),{sendBrowserMessage:x}=Ct(),{state:y}=Y(),{organizationId:j}=y.authStatus.employee,{data:b}=(0,s.useQuery)(Ir.GetActiveTabUrlInfo,(()=>x({messageType:At.GetActiveTabUrlInfo}))),{register:P,formState:w,handleSubmit:f,watch:C,control:S}=(0,Wr.cI)({defaultValues:{issueType:"",webAddress:null==b?void 0:b.url,additionalInfo:""}}),{errors:Z,isDirty:I}=w,{issueType:k,webAddress:T}=C(),A=!k||!T,M=(0,n.useCallback)((e=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{yield x({messageType:At.ReportSite,payload:{organizationId:j,issueType:e.issueType,webAddress:e.webAddress,additionalInfo:e.additionalInfo,issueTypeLabel:bd[e.issueType].label,browserName:(0,cd.g_)(),browserVersion:(0,cd.Vk)(),extensionVersion:g.runtime.getManifest().version}}),m({text:l("toasts.thanksForHelpingUs")}),p(D.HomePage)}catch(e){h({text:l("common.somethingWentWrong")}),wr(e,{message:"ReportSitePage/handleSubmitForm exception"})}}))),[x,j,p,h,m,l]),O=(0,n.useCallback)((e=>d(e.target.value)),[]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:l("reportSitePage.title"),hasUnsavedChanges:I}),(0,o.jsx)(je.Z,{m:2,children:(0,o.jsx)(be.ZP,{variant:"body2",color:X.S5,children:l("reportSitePage.description")})}),(0,o.jsx)(te.Z,{}),(0,o.jsxs)(Q.Z,{component:"form",container:!0,flex:1,direction:"column",justifyContent:"space-between",pt:3,pb:2,px:2,onSubmit:f(M),children:[(0,o.jsxs)(Q.Z,{maxWidth:"100%",children:[(0,o.jsx)(dd.Z,{value:c,onChange:O,label:l("reportSitePage.selectIssueType"),error:!!(null==(e=null==Z?void 0:Z.issueType)?void 0:e.message),fullWidth:!0,inputProps:yd({},P("issueType",{required:l("validation.required")})),children:jd.map((e=>(0,o.jsx)(ud.Z,{value:e.value,children:(0,o.jsx)(Ot.Z,{variant:"body1",children:l(`reportSitePage.${e.translationKey}`)})},e.value)))}),!!(null==(t=null==Z?void 0:Z.issueType)?void 0:t.message)&&(0,o.jsx)(pd.Z,{variant:"outlined",error:!0,children:null==(r=null==Z?void 0:Z.issueType)?void 0:r.message}),(0,o.jsx)(je.Z,{mt:3}),(0,o.jsx)(Fr.Z,{name:"webAddress",control:S,fullWidth:!0,label:l("reportSitePage.webAddress"),error:!!(null==(a=null==Z?void 0:Z.webAddress)?void 0:a.message),helperText:null==(i=null==Z?void 0:Z.webAddress)?void 0:i.message,rules:{required:l("validation.required"),validate:{validateNoSpaces:e=>(0,_a.Z)(e)||l("validation.invalidSpaces")}}}),(0,o.jsx)(je.Z,{mt:3}),(0,o.jsx)(Fr.Z,{name:"additionalInfo",control:S,fullWidth:!0,multiline:!0,minRows:3,maxRows:8,label:l("reportSitePage.additionalInfo")}),(0,o.jsx)(je.Z,{mt:1})]}),(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(mt.Z,{fullWidth:!0,type:"submit",disabled:A,children:l("reportSitePage.button")})})]})]})};var wd=r(17737);const fd={backdrop:ve.n},Cd={[L.Password]:sr.Password,[L.CreditCard]:sr.CreditCard,[L.SecureNote]:sr.SecureNote},Sd=(0,n.memo)((e=>{const{isOpen:t,isLoading:r,onConfirm:a,onCancel:i,employeeAccounts:s,vaultsType:l,sharedCount:c,isPrivateKeychain:d,vaultId:u,groupId:p}=e,{t:g}=(0,_.T_)(),m=(0,v.s0)(),h=(0,n.useCallback)((e=>{e.preventDefault(),m(D.SharingCenter,{state:{vaultId:u,groupId:p,vaultType:Cd[l]}})}),[m,u,p,l]);return(0,o.jsx)(Vt.Z,{open:t,slots:fd,children:(0,o.jsxs)(Q.Z,{container:!0,p:2,spacing:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(be.ZP,{variant:"subtitle1",textAlign:"center",children:g(`approveMoveVaultModal.${l}.title`,{count:c})})}),s.length>3?(0,o.jsx)(Q.Z,{item:!0,xs:12,textAlign:"center",children:(0,o.jsx)(be.ZP,{asLink:!0,onClick:h,variant:"buttons",children:g("approveMoveVaultModal.seeList")})}):(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(wd.Z,{list:s,renderField:"email",renderKey:"employeeAccountId"})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(be.ZP,{children:g(d?`approveMoveVaultModal.${l}.descriptionOrg`:`approveMoveVaultModal.${l}.descriptionGroup`)})}),(0,o.jsxs)(Q.Z,{item:!0,container:!0,spacing:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"text",isLoading:r,onClick:a,children:g("common.continue")})}),(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"text",onClick:i,children:g("common.cancel")})})]})]})})}));var Zd=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const Id=(0,n.memo)((e=>{var t,r;const{vault:a,vaultsType:i,groupTranslationKey:l,group:c,organization:d}=e,[p,g]=(0,n.useState)(!1),[m,h]=(0,n.useState)(null),{t:x}=(0,_.T_)(),y=(0,v.s0)(),{showError:b,showWarning:P}=(0,u.Z)(),{sendBrowserMessage:w}=Ct(),f=(0,n.useCallback)((()=>g(!0)),[]),C=(0,n.useCallback)((()=>g(!1)),[]),{handleSubmit:S,control:Z,setValue:I,watch:k}=(0,Wr.cI)({defaultValues:{group:null}}),T=k("group"),{isPrivateKeychain:A}=c,{data:M,isLoading:O}=Mr({vault:a,organization:d,group:c}),{data:D,isLoading:V}=(0,s.useQuery)([Ir.GetEmployeesSharedWith,a.vaultId],(()=>w({messageType:At.GetEmployeesSharedWith,payload:{organizationId:d.organizationId,vaultId:a.vaultId}}))),E=null!=(r=null==(t=null==M?void 0:M.vaultSharingInfo)?void 0:t.sharedCount)?r:0,{employeeAccounts:B}=D||{},{request:R,isLoading:W,handleError:N}=kt(),F=(0,n.useCallback)(((e,t,r)=>Zd(void 0,null,(function*(){try{yield R({messageType:A?At.MoveVaultToOrganization:At.MoveVaultToGroup,payload:{vaultId:e,groupId:t,organizationId:r}});let o=j(Jl.ID);i===L.SecureNote&&(o=j(ec.ID)),i===L.CreditCard&&(o=j(Xl.ID)),P({text:x("common.openMobileApp")}),y(o)}catch(e){const{skipError:t,errorKey:r}=N(e);if(t)return;b({text:x(r)}),wr(e,{message:"error when moving the vault"})}}))),[N,A,y,R,b,P,x,i]),U=(0,n.useCallback)((e=>Zd(void 0,null,(function*(){const{vaultId:t}=a,{group:{groupId:r,organizationId:o}}=e;if(E)return h(e.group),void f();yield F(t,r,o)}))),[a,E,f,F]),z=(0,n.useCallback)((()=>Zd(void 0,null,(function*(){try{const{vaultId:e}=a,{groupId:t,organizationId:r}=m;yield F(e,t,r)}catch(e){b({text:x("common.somethingWentWrong")}),wr(e,{message:"MoveVaultPage/handleApproveMoveVaultModalConfirm exception"})}}))),[m,F,b,x,a]),G=O||V;return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:x(A?"moveVaultPage.title":"moveVaultPage.titleGroup")}),(0,o.jsxs)(at,{component:"form",background:X.S1,justifyContent:"space-between",onSubmit:S(U),isLoading:G,children:[(0,o.jsxs)(Q.Z,{container:!0,children:[(0,o.jsx)(Q.Z,{item:!0,xs:12,p:2,children:(0,o.jsx)(be.ZP,{color:X.S5,children:x(A?`moveVaultPage.${i}.description`:`moveVaultPage.${i}.descriptionGroup`)})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(te.Z,{})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,p:2,children:(0,o.jsx)(ro,{filterByVerifiedDomain:!0,value:T,setValue:I,control:Z,organizationId:A?null:c.organizationId,groupTranslationKey:l,labelTranslationKey:A?"common.select":"moveVaultPage.selectGroup",placeholderTranslationKey:A?"common.select":"moveVaultPage.selectGroup",excludePrivate:A,excludeMyAccounts:!A})})]}),(0,o.jsx)(Q.Z,{container:!0,p:2,children:(0,o.jsx)(mt.Z,{fullWidth:!0,type:"submit",disabled:!T,children:x("common.move")})})]}),p&&(0,o.jsx)(Sd,{isOpen:p,onCancel:C,onConfirm:z,employeeAccounts:B,vaultsType:i,sharedCount:E,isLoading:W,isPrivateKeychain:A,vaultId:a.vaultId,groupId:c.groupId})]})}));var kd=r(36466);const Td=(0,n.memo)((e=>{const{organization:t,onExportClick:r,groups:a,showDivider:i}=e,{t:s}=(0,_.T_)(),[l,c]=(0,n.useState)(!1),{name:d,organizationId:u,isPrivateKeychain:p,exportAllowed:g}=t,m=(0,n.useCallback)(((e,t)=>{p||c(t)}),[p]),h=(0,n.useCallback)((e=>r(e,{organizationId:u,exportMyLogins:!1,name:d})),[r,u,d]),x=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]),v=(0,n.useCallback)(((e,t)=>r(e,{organizationId:u,groupId:t.groupId,exportMyLogins:t.isMyAccounts,name:s(t.loginsTranslationKey)||t.name})),[r,u,s]),y=(0,n.useMemo)((()=>a.filter((e=>!e.isSharedGroup))),[a]),j=(0,n.useMemo)((()=>y.map((e=>(0,o.jsx)(Ec,{divider:i,children:(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",ml:1,my:1,children:[(0,o.jsx)(Ic.Z,{primary:s(e.loginsTranslationKey)||e.name}),(0,o.jsx)(Q.Z,{children:e.isExportAllowed&&g?(0,o.jsx)(be.ZP,{asLink:!0,variant:"caption",onClick:t=>v(t,e),children:s("exportToCSVPage.export")}):(0,o.jsx)(Ot.Z,{variant:"caption",title:s(g?"exportToCSVPage.exportNotAllowedInGroup":"exportToCSVPage.exportNotAllowedInOrg"),color:X.S4,children:s("exportToCSVPage.export")})})]})},e.groupId)))),[y,i,g,s,v]);return(0,o.jsx)(je.Z,{mb:.5,children:(0,o.jsxs)(hc.Z,{expanded:l,onChange:m,children:[(0,o.jsx)($c,{sx:(b=p||!y.length,{"& .MuiAccordionSummary-content":{maxWidth:"100%"},"& .MuiAccordionSummary-expandIconWrapper":{color:b?"transparent":void 0,"&.Mui-expanded":{color:b?"transparent":void 0}}}),children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,o.jsx)(Q.Z,{item:!0,xs:9,children:(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",flexWrap:"nowrap",children:[(0,o.jsx)(nr.Z,{backgroundColor:X.S3,children:(0,o.jsx)(kd.Z,{color:X.S5,width:16,height:16})}),(0,o.jsx)(be.ZP,{variant:"subtitle2",noWrap:!0,children:p?s("exportToCSVPage.privateLogins"):d})]})}),(0,o.jsx)(Q.Z,{item:!0,xs:3,textAlign:"end",pr:1,children:g?(0,o.jsx)(be.ZP,{asLink:!0,variant:"caption",onClick:h,children:s(p?"exportToCSVPage.export":"exportToCSVPage.exportAll")}):(0,o.jsx)(Ot.Z,{variant:"caption",title:s("exportToCSVPage.exportNotAllowedInOrg"),color:X.S4,onClick:x,children:s("exportToCSVPage.exportAll")})})]})}),(!p||!y.length)&&(0,o.jsx)(Cc,{children:j})]})});var b}));const Ad=()=>{const{t:e}=(0,_.T_)(),{state:t}=Y(),{organizationsById:r,orderedOrganizationsIdsWithPrivateKeychainInTop:a,groupsWithPasswordVaultsGroupedByOrganizationId:i}=t,{showError:s,showSuccess:l}=(0,u.Z)(),{request:c,handleError:d}=kt(),p=(0,n.useCallback)(((t,r)=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){t.preventDefault(),t.stopPropagation();const{organizationId:o,groupId:n,exportMyLogins:a,name:i}=r;try{yield c({messageType:At.ExportPasswords,payload:{organizationId:o,groupId:n,exportMyLogins:a,name:i}}),l({text:e("exportToCSVPage.loginsExported")})}catch(t){const{skipError:r,errorKey:o}=d(t);if(r)return;s({text:e(o)}),wr(t)}}))),[c,d,l,s,e]),g=(0,n.useMemo)((()=>a.map(((e,t)=>{var n;return(0,o.jsx)(Td,{onExportClick:p,organization:r[e],groups:Object.values(null!=(n=i[r[e].organizationId])?n:{}),showDivider:a.length!==t+1},r[e].organizationId)}))),[r,a,i,p]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:e("exportToCSVPage.title")}),(0,o.jsx)(at,{background:X.S1,children:(0,o.jsxs)(Ee.Z,{children:[(0,o.jsx)(je.Z,{m:2,children:(0,o.jsx)(be.ZP,{variant:"body2",color:X.S5,children:e("exportToCSVPage.description")})}),(0,o.jsx)(te.Z,{}),(0,o.jsx)(Q.Z,{container:!0,p:2,children:(0,o.jsx)(Q.Z,{item:!0,xs:12,children:g})})]})})]})};var Md=r(80915),Od=r(6981),Dd=r(76801),Vd=r(20649),Ld=r(51299),Ed=r(90184),Bd=r(31121),Rd=r(89438),Wd=Object.defineProperty,Nd=Object.defineProperties,Fd=Object.getOwnPropertyDescriptors,Ud=Object.getOwnPropertySymbols,zd=Object.prototype.hasOwnProperty,_d=Object.prototype.propertyIsEnumerable,Gd=(e,t,r)=>t in e?Wd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qd=(e,t)=>{for(var r in t||(t={}))zd.call(t,r)&&Gd(e,r,t[r]);if(Ud)for(var r of Ud(t))_d.call(t,r)&&Gd(e,r,t[r]);return e},Kd=(e,t)=>Nd(e,Fd(t));const Hd={backgroundColor:X.P4,p:2},$d=(0,n.memo)((e=>{var t,r,a,i,s;const{defaultValues:l,onSubmit:c,formRef:d,organization:u,isEdit:p=!1,onUnsavedChangesChange:g}=e,[m,h]=(0,n.useState)(!1),{t:x}=(0,_.T_)(),{handleSubmit:v,control:y,register:j,formState:{errors:b,dirtyFields:P},setValue:w,watch:f}=(0,Wr.cI)({defaultValues:l}),[C,S,Z,I,k]=f(["cardNumber","cardHolderName","expiryDate","cvv","group"]),{month:T,year:A}=(0,n.useMemo)((()=>(0,Md.QD)(Z)),[Z]),{cardNumber:M=!1,cardHolderName:O=!1,expiryDate:D=!1,cvv:V=!1}=P,L=(0,n.useCallback)((e=>{c(Kd(qd({},e),{withMobileRequest:M||O||D||V}))}),[c,M,O,D,V]),E=(0,n.useCallback)((()=>h((e=>!e))),[]),B=(0,n.useCallback)((()=>{h(!0)}),[]),W=(0,n.useCallback)((()=>{h(!1)}),[]),N=(0,n.useCallback)((e=>{w("expiryDate",e.target.value)}),[w]),F=(0,n.useCallback)((e=>{w("cvv",e.target.value)}),[w]),U=(0,n.useCallback)((e=>{w("cardNumber",e.target.value)}),[w]),z=(0,n.useCallback)((e=>{w("cardHolderName",e.target.value)}),[w]),G=(0,n.useMemo)((()=>(0,Md.C1)(C)),[C]),q=!!Object.keys(P).length;return(0,n.useEffect)((()=>g(q)),[g,q]),(0,o.jsx)(Ee.Z,{children:(0,o.jsx)("form",{ref:d,onSubmit:v(L),children:(0,o.jsxs)(Q.Z,{container:!0,children:[(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"center",sx:Hd,children:[(0,o.jsx)(Od.Z,{flip:m,onClick:E,cardNumber:C,cardNumberType:G,cardHolder:S,expirationMonth:T,expirationYear:A,cvv:I,monthTranslationKey:x("common.month"),yearTranslationKey:x("common.year")}),(0,o.jsxs)(Q.Z,{container:!0,columnGap:1,justifyContent:"center",alignItems:"center",pt:2,children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(Dd.Z,{color:X.S1})}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{variant:"caption",color:X.S1,children:x("createUpdateCreditCardVaultForm.securityProtected")})})]})]}),(0,o.jsx)(it,{children:(0,o.jsx)(Fr.Z,{name:"name",control:y,autoFocus:!0,fullWidth:!0,error:!!b.name,label:x("createUpdateCreditCardVaultForm.name.label"),placeholder:x("createUpdateCreditCardVaultForm.name.placeholder"),helperText:null==(t=b.name)?void 0:t.message,rules:{required:x("validation.required"),validate:e=>!(0,Ur.Z)(e)||x("validation.required")},onFocus:W,required:!0})}),(0,o.jsx)(it,{children:(0,o.jsx)(Vd.Z,{allowNegative:!1,fullWidth:!0,error:!!b.cardNumber,label:x("createUpdateCreditCardVaultForm.cardNumber.label"),placeholder:x("createUpdateCreditCardVaultForm.cardNumber.placeholder"),helperText:null==(r=b.cardNumber)?void 0:r.message,value:C,onChange:U,onFocus:W,inputProps:qd({maxLength:19},j("cardNumber",{required:x("validation.required"),validate:e=>!!(0,Ld.Z)(e)||x("validation.invalidCardNumber")})),required:!0})}),(0,o.jsx)(it,{children:(0,o.jsx)(Fr.Z,{name:"cardHolderName",control:y,fullWidth:!0,error:!!b.cardHolderName,label:x("createUpdateCreditCardVaultForm.cardHolderName.label"),placeholder:x("createUpdateCreditCardVaultForm.cardHolderName.placeholder"),helperText:null==(a=b.cardHolderName)?void 0:a.message,value:S,onChange:z,onFocus:W})}),(0,o.jsx)(it,{children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",columnGap:1,children:[(0,o.jsx)(Q.Z,{item:!0,xs:!0,children:(0,o.jsx)(Ed.Z,{fullWidth:!0,error:!!b.expiryDate,label:x("createUpdateCreditCardVaultForm.expiryDate.label"),placeholder:x("createUpdateCreditCardVaultForm.expiryDate.placeholder"),helperText:null==(i=b.expiryDate)?void 0:i.message,value:Z,onChange:N,onFocus:W,inputProps:qd({},j("expiryDate",{validate:e=>{if(!e)return!0;const{isValid:t}=(0,Bd.Z)(e);return!!t||x("validation.invalidFormat")}}))})}),(0,o.jsx)(Q.Z,{item:!0,xs:!0,children:(0,o.jsx)(Vd.Z,{allowNegative:!1,fullWidth:!0,type:"text",error:!!b.cvv,label:x("createUpdateCreditCardVaultForm.cvv.label"),placeholder:x("createUpdateCreditCardVaultForm.cvv.placeholder"),helperText:null==(s=b.cvv)?void 0:s.message,value:I,onChange:F,onFocus:B,inputProps:Kd(qd({},j("cvv",{validate:e=>!e||(!!(0,Rd.Z)(e)||x("validation.invalidFormat"))})),{maxLength:4})})})]})}),(0,o.jsxs)(it,{children:[(0,o.jsx)(st,{condition:p&&!!u&&!!(null==l?void 0:l.group),children:(0,o.jsx)(Mt,{organization:u,group:l.group})}),(0,o.jsx)(st,{condition:!p,children:(0,o.jsx)(ro,{autoSelect:!0,setValue:w,control:y,value:k,defaultValue:null==l?void 0:l.group,disabled:p,groupTranslationKey:R.CREDIT_CARD_TRANSLATION_KEY_ID})})]})]})})})}));var Yd=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const Qd={name:"",cardNumber:"",cardHolderName:"",expiryDate:"",cvv:""},Jd=()=>{const[e,t]=(0,n.useState)(!1),r=(0,v.s0)(),a=(0,n.useRef)(),{t:i}=(0,_.T_)(),{sendBrowserMessage:s}=Ct(),{showError:l,showWarning:c}=(0,u.Z)(),d=(0,n.useCallback)((e=>Yd(void 0,null,(function*(){try{const{name:t,cardNumber:o,cardHolderName:n,expiryDate:a,cvv:l,group:d}=e,{organizationId:u,groupId:p}=d,g={name:t,cardNumber:o,cardHolderName:n,expiryDate:a,cvv:l,organizationId:u,groupId:p};yield s({messageType:At.CreateCreditCardVault,payload:g}),r(j(Xl.ID)),c({text:i("common.openMobileApp")})}catch(e){l({text:i("toasts.somethingWentWrong")}),wr(e,{message:"CreateCreditCardPage/handleVaultCreate exception"})}}))),[s,r,c,l,i]),p=(0,n.useCallback)((()=>Yd(void 0,null,(function*(){var e;null==(e=a.current)||e.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}))),[a]),g=(0,n.useCallback)((e=>t(e)),[]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:i("createCreditCardPage.title"),hasUnsavedChanges:e}),(0,o.jsx)(at,{background:X.S1,children:(0,o.jsx)($d,{defaultValues:Qd,formRef:a,onSubmit:d,onUnsavedChangesChange:g})}),(0,o.jsx)(Br.Z,{backgroundColor:X.i,sx:F,onClick:p,children:(0,o.jsx)(Rr.Z,{color:X.S1})})]})};var Xd=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const eu={backgroundColor:X.P4,p:2},tu={cursor:"pointer"},ru=e=>{var t,r;const{vault:a,group:i,organization:s}=e,[l,c]=(0,n.useState)(!1),[d,p]=(0,n.useState)(!1),{t:g}=(0,_.T_)(),m=(0,v.s0)(),{state:h}=(0,v.TH)(),{showSuccess:x,showError:y}=(0,u.Z)(),b=(0,n.useCallback)((()=>c(!0)),[]),P=(0,n.useCallback)((()=>c(!1)),[]),{cardNumber:w,cvv:f,cardHolderName:C,expiryDate:S}=h,{vaultId:Z,organizationId:I,groupId:k,hasCvv:O,name:V}=a,{isLoading:L,data:E}=Mr({vault:a,organization:s,group:i}),{request:B,handleError:W}=kt(),{isPrivateKeychain:N}=s,{policies:F,vaultSharingInfo:U,groupVaultSharingInfo:z}=E||{},G=(0,n.useCallback)((()=>Xd(void 0,null,(function*(){try{c(!1),yield B({messageType:At.DeleteVault,payload:{vaultId:Z,organizationId:I,groupId:k,isPrivateKeychain:N}}),m(j(Xl.ID)),x({text:g("toasts.creditCardHasBeenDeleted")})}catch(e){const{skipError:t,errorKey:r}=W(e);if(t)return;y({text:g(r)}),wr(e,{message:"ViewCreditCardPage/handleDeleteVaultClick exception"})}}))),[I,Z,k,B,W,N,m,x,y,g]),q=(0,n.useCallback)((()=>{m(T(Z,k),{state:{cardNumber:w,cvv:f,cardHolderName:C,expiryDate:S}})}),[m,Z,k,w,f,C,S]),K=(0,n.useCallback)((()=>{m(A(Z,k))}),[m,Z,k]),H=(0,n.useCallback)((()=>{try{p(!1),Le()(C),x({text:g("common.copied")})}catch(e){y({text:g("toasts.somethingWentWrong")}),wr(e,{message:"ViewCreditCardPage/handleCardHolderNameCopyClick exception"})}}),[x,y,C,g]),$=(0,n.useCallback)((()=>Xd(void 0,null,(function*(){try{p(!1),Le()(w),x({text:g("common.copied")})}catch(e){y({text:g("toasts.somethingWentWrong")}),wr(e,{message:"ViewCreditCardPage/handleCardNumberCopyClick exception"})}}))),[w,x,y,g]),Y=(0,n.useCallback)((()=>Xd(void 0,null,(function*(){try{p(!0),Le()(f),x({text:g("common.copied")})}catch(e){y({text:g("toasts.somethingWentWrong")}),wr(e,{message:"ViewCreditCardPage/handleCvvCopyClick exception"})}}))),[f,x,y,g]),ee=(0,n.useCallback)((()=>{try{p(!1),Le()(S),x({text:g("common.copied")})}catch(e){y({text:g("toasts.somethingWentWrong")}),wr(e,{message:"ViewCreditCardPage/handleExpiryDateCopyClick exception"})}}),[x,y,S,g]),te=(0,n.useCallback)((()=>{m(M(Z,k))}),[Z,k,m]),re=(0,n.useCallback)((()=>p((e=>!e))),[]),oe=(0,n.useCallback)((()=>{m(D.SharingCenter,{state:{vaultId:Z,groupId:k,vaultType:sr.CreditCard}})}),[k,m,Z]),ne=(0,n.useCallback)((e=>({label:e.groupName,key:e.groupId})),[]),ae=(0,n.useMemo)((()=>(0,Ls.yx)(w)),[w]),ie=(0,n.useMemo)((()=>(0,Md.C1)(w)),[w]),{month:se,year:le}=(0,n.useMemo)((()=>(0,Md.QD)(S)),[S]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:V}),(0,o.jsx)(at,{background:X.S1,isLoading:L,children:(0,o.jsx)(Ee.Z,{children:(0,o.jsxs)(je.Z,{children:[(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"center",sx:eu,children:[(0,o.jsx)(Od.Z,{flip:d,onClick:re,cardNumber:w,cardNumberType:ie,cardHolder:C,expirationMonth:se,expirationYear:le,cvv:f,monthTranslationKey:g("common.month"),yearTranslationKey:g("common.year")}),(0,o.jsxs)(Q.Z,{container:!0,columnGap:1,justifyContent:"center",alignItems:"center",mt:2,children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(Dd.Z,{color:X.S1})}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{variant:"caption",color:X.S1,children:g("createUpdateCreditCardVaultForm.securityProtected")})})]})]}),(0,o.jsx)(st,{condition:!!C,children:(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,o.jsxs)(Q.Z,{item:!0,xs:!0,zeroMinWidth:!0,children:[(0,o.jsx)(lt,{text:g("viewCreditCardPage.cardHolderTitle")}),(0,o.jsx)(ut,{text:C})]}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(gt,{children:(0,o.jsx)(st,{condition:F.canCopy,children:(0,o.jsx)(pt,{children:(0,o.jsx)(ht,{onCopy:H})})})})})]})})}),(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,o.jsxs)(Q.Z,{item:!0,xs:!0,zeroMinWidth:!0,children:[(0,o.jsx)(lt,{text:g("viewCreditCardPage.creditCardTitle")}),(0,o.jsx)(ut,{text:ae})]}),(0,o.jsx)(st,{condition:F.canCopy,children:(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(gt,{children:(0,o.jsx)(pt,{children:(0,o.jsx)(ht,{onCopy:$})})})})})]})}),(0,o.jsx)(st,{condition:O,children:(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,o.jsxs)(Q.Z,{item:!0,xs:!0,zeroMinWidth:!0,children:[(0,o.jsx)(lt,{text:g("viewCreditCardPage.securityCodeTitle")}),(0,o.jsx)(ut,{text:f})]}),(0,o.jsx)(st,{condition:F.canCopy,children:(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(gt,{children:(0,o.jsx)(pt,{children:(0,o.jsx)(ht,{onCopy:Y})})})})})]})})}),(0,o.jsx)(st,{condition:!!S,children:(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,o.jsxs)(Q.Z,{item:!0,xs:!0,zeroMinWidth:!0,children:[(0,o.jsx)(lt,{text:g("viewCreditCardPage.expiryDateTitle")}),(0,o.jsx)(ut,{text:S})]}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(gt,{children:(0,o.jsx)(st,{condition:F.canCopy,children:(0,o.jsx)(pt,{children:(0,o.jsx)(ht,{onCopy:ee})})})})})]})})}),(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsx)(Mt,{organization:s,group:i,translationKey:R.CREDIT_CARD_TRANSLATION_KEY_ID})}),(0,o.jsx)(st,{condition:!!(null==(t=null==i?void 0:i.restrictions)?void 0:t.length),children:(0,o.jsx)(it,{dividerBottom:!0,children:(0,o.jsx)(Jt,{restrictions:i.restrictions,organization:s})})}),(0,o.jsx)(st,{condition:(null==U?void 0:U.isOwner)&&!!(null==U?void 0:U.sharedCount),children:(0,o.jsx)(it,{dividerBottom:!0,onClick:oe,children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",alignItems:"center",sx:tu,children:[(0,o.jsxs)(Q.Z,{item:!0,xs:!0,zeroMinWidth:!0,children:[(0,o.jsx)(lt,{text:g("viewCreditCardPage.sharedWithTitle")}),(0,o.jsx)(ut,{text:g("viewCreditCardPage.sharedWithText",{count:null==U?void 0:U.sharedCount})})]}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(Pe.Z,{children:(0,o.jsx)(Ne.Z,{height:15,width:7.5,color:X.i})})})]})})}),(0,o.jsx)(st,{condition:!!(null==(r=null==z?void 0:z.groups)?void 0:r.length),children:(0,o.jsxs)(it,{dividerBottom:!0,children:[(0,o.jsx)(lt,{text:g("viewCreditCardPage.sharedWithTitle")}),(0,o.jsx)(Fe.Z,{dataset:null==z?void 0:z.groups,getMetadata:ne})]})})]})})}),(0,o.jsxs)(st,{condition:F.canDelete||F.canEdit,children:[(0,o.jsx)(Ar,{onClick:b}),(0,o.jsxs)(ke,{isOpen:l,onClose:P,title:g("actionDrawer.title"),children:[(0,o.jsx)(st,{condition:F.canEdit,children:(0,o.jsx)(Ae,{onClick:q,icon:(0,o.jsx)(Ue.Z,{}),title:g("actionDrawer.editVault")})}),(0,o.jsx)(st,{condition:F.canMove,children:(0,o.jsx)(Ae,{onClick:K,icon:(0,o.jsx)(ze.Z,{}),title:g("actionDrawer.moveVault")})}),(0,o.jsx)(st,{condition:F.canShare,children:(0,o.jsx)(Ae,{onClick:te,icon:(0,o.jsx)(_e.Z,{}),title:g("actionDrawer.shareVault")})}),(0,o.jsx)(st,{condition:F.canDelete,children:(0,o.jsx)(Ae,{onClick:G,icon:(0,o.jsx)(Ge.Z,{color:X.iP}),title:g("actionDrawer.deleteVault"),color:X.iP})})]})]})]})};var ou=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const nu=(0,n.memo)((e=>{const{vault:{vaultId:t,name:r,organizationId:a},group:i}=e,[s,l]=(0,n.useState)(!1),{state:c}=Y(),d=(0,n.useRef)(),p=(0,v.s0)(),{t:g}=(0,_.T_)(),{sendBrowserMessage:m}=Ct(),{state:h}=(0,v.TH)(),{showError:x,showWarning:y,showSuccess:b}=(0,u.Z)(),P=(0,n.useCallback)((e=>ou(void 0,null,(function*(){try{const{name:r,cardNumber:o,cardHolderName:n,expiryDate:a,cvv:i,group:s,withMobileRequest:l}=e,{groupId:c,organizationId:d}=s,u={name:r,cardNumber:o,cardHolderName:n,expiryDate:a,cvv:i,groupId:c,organizationId:d,vaultId:t,withMobileRequest:l};if(yield m({messageType:At.UpdateCreditCardVault,payload:u}),l)return y({text:g("common.openMobileApp")}),void p(j(Xl.ID));r&&b({text:g("toasts.paymentCardHasBeenUpdated")}),p(j(Xl.ID))}catch(e){x({text:g("toasts.somethingWentWrong")}),wr(e,{message:"EditCreditCardPage/handleCreditCardUpdate exception"})}}))),[t,m,p,y,b,x,g]),w=(0,n.useCallback)((()=>ou(void 0,null,(function*(){d.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}))),[d]),f=(0,n.useCallback)((e=>l(e)),[]),{organizationsById:C}=c,{cardNumber:S,cvv:Z,cardHolderName:I,expiryDate:k}=h,T=(0,n.useMemo)((()=>({name:r,cardNumber:S,cardHolderName:I,expiryDate:k,cvv:Z,group:i})),[r,S,I,k,Z,i]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:r,hasUnsavedChanges:s}),(0,o.jsx)(at,{background:X.S1,children:(0,o.jsx)($d,{organization:C[a],isEdit:!0,formRef:d,defaultValues:T,onSubmit:P,onUnsavedChangesChange:f})}),(0,o.jsx)(Br.Z,{backgroundColor:X.i,sx:F,onClick:w,children:(0,o.jsx)(Rr.Z,{color:X.S1})})]})}));var au=r(26535),iu=r(46675),su=(e=>(e.Full="full",e.Limited="limited",e))(su||{});const lu=su;r(15913);const cu=e=>1===e.toString().length?`0${e}`:e,du=e=>{const{minutes:t,hours:r,seconds:o=0}=e;return`${cu(r)}:${cu(t)}:${cu(o)}`};var uu=Object.defineProperty,pu=Object.defineProperties,gu=Object.getOwnPropertyDescriptors,mu=Object.getOwnPropertySymbols,hu=Object.prototype.hasOwnProperty,xu=Object.prototype.propertyIsEnumerable,vu=(e,t,r)=>t in e?uu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yu=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const ju=e=>{const{vault:t,vaultsType:r}=e,[a,i]=(0,n.useState)(null),[s,l]=(0,n.useState)(lu.Full),[c,d]=(0,n.useState)(!1),[p,g]=(0,n.useState)({[Vi.Q.Hour]:0,[Vi.Q.Minute]:0}),m=(0,v.s0)(),{t:h}=(0,_.T_)(),{sendBrowserMessage:x}=Ct(),{showError:y,showSuccess:j}=(0,u.Z)(),{request:b,isLoading:P,handleError:w}=kt(),f=(0,n.useCallback)((()=>d((e=>!e))),[]),C=(0,n.useCallback)((e=>g(e)),[]),S=(0,n.useCallback)((e=>e.map((e=>({id:e.employeeAccountId,label:e.email})))),[]),Z=(0,n.useCallback)((e=>yu(void 0,null,(function*(){try{const{employeeEmails:r}=yield x({messageType:At.SearchEmployees,payload:{organizationId:t.organizationId,vaultId:t.vaultId,searchString:e}});return r}catch(e){return y({text:h("common.somethingWentWrong")}),wr(e,{message:"ShareVaultPage/handleAutocompleteRequest exception"}),[]}}))),[t.organizationId,t.vaultId,x,y,h]),I=(0,n.useCallback)(((e,t)=>{i(t)}),[]),k=(0,n.useCallback)((()=>yu(void 0,null,(function*(){try{let n={permission:s,organizationId:t.organizationId,vaultId:t.vaultId,groupId:t.groupId,employeeAccountId:a.id};c&&(p.minute||p.hour)&&(e=((e,t)=>{for(var r in t||(t={}))hu.call(t,r)&&vu(e,r,t[r]);if(mu)for(var r of mu(t))xu.call(t,r)&&vu(e,r,t[r]);return e})({},n),o={duration:du({minutes:p.minute,hours:p.hour})},n=pu(e,gu(o))),yield b({messageType:At.ShareVault,payload:n}),j({text:h(`shareVaultPage.${r}.sharingSuccessAlert`)}),m(-1)}catch(e){const{skipError:t,errorKey:r}=w(e);if(t)return;y({text:h(r)}),wr(e,{message:"ShareVaultPage/handleShareClick exception"})}var e,o}))),[a,s,t.vaultId,t.groupId,t.organizationId,c,p.hour,p.minute,r,w,m,b,y,j,h]),T=(0,n.useCallback)((e=>l(e)),[]),A=!a||!s||c&&!p.hour&&!p.minute;return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:h("shareLoginPage.title",{vaultName:t.name})}),(0,o.jsx)(at,{background:X.S1,children:(0,o.jsx)(Ee.Z,{children:(0,o.jsxs)(Q.Z,{container:!0,p:2,minHeight:"100%",flexDirection:"column",justifyContent:"space-between",children:[(0,o.jsxs)(Q.Z,{container:!0,children:[(0,o.jsx)(Q.Z,{container:!0,item:!0,children:(0,o.jsx)(Ra.Z,{fullWidth:!0,autoFocus:!0,t:h,placeholder:h("shareVaultPage.employeeSelector.label"),label:h("shareVaultPage.employeeSelector.label"),dataSourceRequest:Z,dataSourceResponseParser:S,value:a,onChange:I})}),(0,o.jsx)(Q.Z,{container:!0,item:!0,mt:3,children:(0,o.jsx)(be.ZP,{variant:"subtitle1",children:h("shareVaultPage.sharingPermission.title")})}),(0,o.jsxs)(Q.Z,{container:!0,mt:1,children:[(0,o.jsxs)(au.Z,{item:!0,value:lu.Full,selected:s===lu.Full,onClick:T,xs:12,px:2,py:1,children:[(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(be.ZP,{variant:"caption",children:h("shareVaultPage.sharingPermission.full.title")})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(be.ZP,{variant:"body2",color:X.S4,children:h(`shareVaultPage.sharingPermission.full.${r}.description`)})})]}),r===L.Password&&(0,o.jsxs)(au.Z,{item:!0,value:lu.Limited,selected:s===lu.Limited,onClick:T,xs:12,px:2,py:1,mt:1,children:[(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(be.ZP,{variant:"caption",children:h("shareVaultPage.sharingPermission.limited.title")})}),(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(be.ZP,{variant:"body2",color:X.S4,children:h(`shareVaultPage.sharingPermission.limited.${r}.description`)})})]})]}),(0,o.jsx)(Q.Z,{container:!0,py:1,children:(0,o.jsx)(aa.Z,{label:(0,o.jsx)(be.ZP,{variant:"body2",color:X.S5,children:h("shareVaultPage.setTimeLimit")}),checked:c,onChange:f})}),!c&&(0,o.jsx)(iu.Z,{mb:1,text:h(`shareVaultPage.${r}.ifThisIsLeftUnticked`)}),(0,o.jsx)(Vi.Z,{onChange:C,isDisabled:!c,initialHour:0,initialMinute:0,justifyContent:"center",mt:1})]}),(0,o.jsx)(Q.Z,{container:!0,mt:4,children:(0,o.jsx)(Q.Z,{item:!0,xs:!0,children:(0,o.jsx)(mt.Z,{fullWidth:!0,isLoading:P,disabled:A,onClick:k,children:h("common.share")})})})]})})})]})};var bu=r(78676);const Pu=e=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){return g.runtime.sendMessage(void 0,e)})),wu=g.runtime.onMessage.addListener,fu={backdrop:ve.n},Cu=(0,n.memo)((e=>{const{isOpen:t,isLoading:r,onConfirm:n,onCancel:a}=e,{t:i}=(0,_.T_)();return(0,o.jsx)(Vt.Z,{open:t,slots:fu,children:(0,o.jsxs)(Q.Z,{container:!0,p:2,spacing:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(be.ZP,{variant:"subtitle1",textAlign:"center",mb:2,children:i("changeLanguagePage.modal.title")})}),(0,o.jsxs)(Q.Z,{item:!0,container:!0,spacing:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"text",isLoading:r,onClick:n,children:i("common.continue")})}),(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"text",onClick:a,children:i("common.cancel")})})]})]})})}));var Su=r(29607);const Zu=()=>{const e=(0,Su.uJ)(),{state:t,isLoading:r}=Y(),o=!e.length||r,a=(0,n.useMemo)((()=>o?[]:t.supportedLanguages?e.filter((e=>t.supportedLanguages.includes(e.code))):[]),[t.supportedLanguages,e,o]);return{isLoading:o,languages:a}};const Iu=()=>{const[e,t]=(0,n.useState)(!1),[r,a]=(0,n.useState)(""),[i,s]=(0,n.useState)(!1),{t:l}=(0,_.T_)(),{showError:c}=(0,u.Z)(),d=(0,v.s0)(),{state:p}=Y(),{languages:g,isLoading:m}=Zu(),{user:h}=p.authStatus,x=(0,n.useCallback)((()=>t(!0)),[]),y=(0,n.useCallback)((()=>t(!1)),[]),j=(0,n.useCallback)((e=>{x(),a(e.target.value)}),[x]),b=(0,n.useCallback)((()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{s(!0),yield Pu({messageType:At.UpdateUserLanguage,payload:{language:r}}),s(!1),d(D.MenuPage)}catch(e){s(!1),wr(e,{message:"ChangeLanguagePage/handleLanguageChange exception"}),c({text:l("toasts.somethingWentWrong")})}}))),[d,r,c,l]);return(0,o.jsxs)(J,{children:[(0,o.jsx)(Ht,{title:l("changeLanguagePage.title")}),(0,o.jsx)(at,{background:X.S1,isLoading:m,children:(0,o.jsx)(Ee.Z,{children:(0,o.jsx)(bu.Z,{defaultValue:h.language,onChange:j,children:g.map((e=>(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(je.Z,{m:2,children:(0,o.jsx)(Kr.Z,{value:e.code,checked:e.code===h.language,control:(0,o.jsx)(Hr.Z,{}),label:e.localized_name})}),(0,o.jsx)(te.Z,{})]},e.code)))})})}),e&&(0,o.jsx)(Cu,{isLoading:i,isOpen:e,onConfirm:b,onCancel:y})]})};var ku=Object.defineProperty,Tu=Object.defineProperties,Au=Object.getOwnPropertyDescriptors,Mu=Object.getOwnPropertySymbols,Ou=Object.prototype.hasOwnProperty,Du=Object.prototype.propertyIsEnumerable,Vu=(e,t,r)=>t in e?ku(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Lu={future:{v7_startTransition:!0}},Eu=()=>{const{state:e}=Y(),{normalizedPasswordVaultsById:t,normalizedCreditCardVaultsById:r,normalizedSecureNoteVaultsById:n}=e;return(0,o.jsx)(x.UT,(a=((e,t)=>{for(var r in t||(t={}))Ou.call(t,r)&&Vu(e,r,t[r]);if(Mu)for(var r of Mu(t))Du.call(t,r)&&Vu(e,r,t[r]);return e})({},Lu),i={children:(0,o.jsxs)(v.Z5,{children:[(0,o.jsxs)(v.AW,{path:D.HomePage,element:(0,o.jsx)(De,{}),children:[(0,o.jsx)(v.AW,{index:!0,element:(0,o.jsx)(tc,{activeTab:Jl.ID})}),(0,o.jsx)(v.AW,{path:Jl.ID,element:(0,o.jsx)(tc,{activeTab:Jl.ID})}),(0,o.jsx)(v.AW,{path:Xl.ID,element:(0,o.jsx)(tc,{activeTab:Xl.ID})}),(0,o.jsx)(v.AW,{path:ec.ID,element:(0,o.jsx)(tc,{activeTab:ec.ID})}),(0,o.jsx)(v.AW,{path:"*",element:(0,o.jsx)(v.Fg,{to:D.HomePage,replace:!0})})]}),(0,o.jsx)(v.AW,{path:D.MenuPage,element:(0,o.jsx)(bn,{})}),(0,o.jsx)(v.AW,{path:D.PasswordGeneratorPage,element:(0,o.jsx)(kn,{})}),(0,o.jsx)(v.AW,{path:D.ImportHistoryPage,element:(0,o.jsx)(ra,{isOnboarding:!1,nextButtonTranslationKey:"common.close"})}),(0,o.jsx)(v.AW,{path:D.ImportResultsPage,element:(0,o.jsx)(ji,{})}),(0,o.jsx)(v.AW,{path:D.ImportMappingPage,element:(0,o.jsx)(Oi,{})}),(0,o.jsx)(v.AW,{path:D.ImportFromCsvPage,element:(0,o.jsx)(Va,{isOnboarding:!1})}),(0,o.jsx)(v.AW,{path:D.ViewLoginPage,element:(0,o.jsx)(mc,{PageComponent:Er,extractFrom:t,fallbackRoute:j(Jl.ID)})}),(0,o.jsx)(v.AW,{path:D.EditLoginPage,element:(0,o.jsx)(mc,{PageComponent:To,extractFrom:t,fallbackRoute:j(Jl.ID)})}),(0,o.jsx)(v.AW,{path:D.CreateLoginPage,element:(0,o.jsx)(Bo,{})}),(0,o.jsx)(v.AW,{path:D.ViewCreditCardPage,element:(0,o.jsx)(mc,{PageComponent:ru,extractFrom:r,fallbackRoute:j(Xl.ID)})}),(0,o.jsx)(v.AW,{path:D.EditCreditCardPage,element:(0,o.jsx)(mc,{PageComponent:nu,extractFrom:r,fallbackRoute:j(Xl.ID)})}),(0,o.jsx)(v.AW,{path:D.CreateSecureNotePage,element:(0,o.jsx)(oc,{})}),(0,o.jsx)(v.AW,{path:D.EditSecureNotePage,element:(0,o.jsx)(mc,{PageComponent:lc,extractFrom:n,fallbackRoute:j(ec.ID)})}),(0,o.jsx)(v.AW,{path:D.ViewSecureNotePage,element:(0,o.jsx)(mc,{PageComponent:ic,extractFrom:n,fallbackRoute:j(ec.ID)})}),(0,o.jsx)(v.AW,{path:D.CreateCreditCardPage,element:(0,o.jsx)(Jd,{})}),(0,o.jsx)(v.AW,{path:D.BrowserSettingsPage,element:(0,o.jsx)(Ki,{})}),(0,o.jsx)(v.AW,{path:D.TrustedBrowserPage,element:(0,o.jsx)(Wi,{})}),(0,o.jsx)(v.AW,{path:D.SharingCenter,element:(0,o.jsx)(ld,{})}),(0,o.jsx)(v.AW,{path:D.ShareLoginPage,element:(0,o.jsx)(mc,{PageComponent:ju,extractFrom:t,fallbackRoute:j(Jl.ID),pageProps:{vaultsType:L.Password}})}),(0,o.jsx)(v.AW,{path:D.ShareSecureNotePage,element:(0,o.jsx)(mc,{PageComponent:ju,extractFrom:n,fallbackRoute:j(ec.ID),pageProps:{vaultsType:L.SecureNote}})}),(0,o.jsx)(v.AW,{path:D.ShareCreditCardPage,element:(0,o.jsx)(mc,{PageComponent:ju,extractFrom:r,fallbackRoute:j(Xl.ID),pageProps:{vaultsType:L.CreditCard}})}),(0,o.jsx)(v.AW,{path:D.MoveLoginPage,element:(0,o.jsx)(mc,{PageComponent:Id,extractFrom:t,fallbackRoute:j(Jl.ID),pageProps:{vaultsType:L.Password,groupTranslationKey:R.LOGINS_TRANSLATION_KEY_ID}})}),(0,o.jsx)(v.AW,{path:D.MoveSecureNotePage,element:(0,o.jsx)(mc,{PageComponent:Id,extractFrom:n,fallbackRoute:j(ec.ID),pageProps:{vaultsType:L.SecureNote,groupTranslationKey:R.SECURE_NOTES_TRANSLATION_KEY_ID}})}),(0,o.jsx)(v.AW,{path:D.MoveCreditCardPage,element:(0,o.jsx)(mc,{PageComponent:Id,extractFrom:r,fallbackRoute:j(Xl.ID),pageProps:{vaultsType:L.CreditCard,groupTranslationKey:R.CREDIT_CARD_TRANSLATION_KEY_ID}})}),(0,o.jsx)(v.AW,{path:D.ReportSite,element:(0,o.jsx)(Pd,{})}),(0,o.jsx)(v.AW,{path:D.ExportToCSV,element:(0,o.jsx)(Ad,{})}),(0,o.jsx)(v.AW,{path:D.ChangeLanguage,element:(0,o.jsx)(Iu,{})}),(0,o.jsx)(v.AW,{path:"*",element:(0,o.jsx)(v.Fg,{to:D.HomePage,replace:!0})})]})},Tu(a,Au(i))));var a,i};var Bu=r(6265);const Ru=e=>g.runtime.getURL(`/popup/index.html#${e}`),Wu={height:"100vh",display:"flex",flexDirection:"column"},Nu=()=>{const{t:e}=(0,_.T_)(),t=(0,n.useCallback)((()=>{g.tabs.create({url:Ru(D.SignUpPage)})}),[]);return(0,o.jsx)(Hn,{children:(0,o.jsx)(Q.Z,{container:!0,className:"min-height-100vh",children:(0,o.jsx)(Q.Z,{sx:Wu,children:(0,o.jsxs)(Q.Z,{container:!0,item:!0,xs:!0,p:2,rowSpacing:1,children:[(0,o.jsx)(Q.Z,{item:!0,container:!0,justifyContent:"center",children:(0,o.jsx)(be.ZP,{variant:"h6",align:"center",color:X.S6,children:e("welcomePage.welcomeToUniqkey")})}),(0,o.jsx)(Q.Z,{item:!0,xs:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Bu.Z,{})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:11,children:(0,o.jsx)(be.ZP,{align:"center",variant:"body1",color:X.S5,children:e("welcomePage.description")})})}),(0,o.jsxs)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",rowSpacing:1,children:[(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:8,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"outlined",onClick:()=>{g.tabs.create({url:Ru(D.LoginPage)})},children:e("welcomePage.activateAccount")})})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{variant:"body1",color:X.S5,children:e("welcomePage.alreadyActive")})})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:8,children:(0,o.jsx)(mt.Z,{fullWidth:!0,onClick:()=>{g.tabs.create({url:Ru(D.PairPage)})},children:e("welcomePage.pairWithMobile")})})}),un&&(0,o.jsx)(Q.Z,{item:!0,container:!0,textAlign:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(x.rU,{to:"#",color:X.i,onClick:t,children:(0,o.jsx)(be.ZP,{variant:"buttons",component:"span",children:e("common.signUp")})})})})]})]})})})})};var Fu=Object.defineProperty,Uu=Object.defineProperties,zu=Object.getOwnPropertyDescriptors,_u=Object.getOwnPropertySymbols,Gu=Object.prototype.hasOwnProperty,qu=Object.prototype.propertyIsEnumerable,Ku=(e,t,r)=>t in e?Fu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Hu={future:{v7_startTransition:!0}},$u=()=>{return(0,o.jsx)(x.UT,(e=((e,t)=>{for(var r in t||(t={}))Gu.call(t,r)&&Ku(e,r,t[r]);if(_u)for(var r of _u(t))qu.call(t,r)&&Ku(e,r,t[r]);return e})({},Hu),t={children:(0,o.jsxs)(v.Z5,{children:[(0,o.jsx)(v.AW,{path:D.WelcomePage,element:(0,o.jsx)(Nu,{})}),(0,o.jsx)(v.AW,{path:"*",element:(0,o.jsx)(v.Fg,{to:D.WelcomePage,replace:!0})})]})},Uu(e,zu(t))));var e,t},Yu=()=>{const{state:e}=Y(),{authStatus:t}=e;return t.hasFinishedOnBoarding&&t.isAuthenticated?(0,o.jsx)(Eu,{}):(0,o.jsx)($u,{})};var Qu=r(96166),Ju=Object.defineProperty,Xu=Object.defineProperties,ep=Object.getOwnPropertyDescriptors,tp=Object.getOwnPropertySymbols,rp=Object.prototype.hasOwnProperty,op=Object.prototype.propertyIsEnumerable,np=(e,t,r)=>t in e?Ju(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ap=e=>{const t=e,{children:r,minHeight:n=100}=t,a=((e,t)=>{var r={};for(var o in e)rp.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&tp)for(var o of tp(e))t.indexOf(o)<0&&op.call(e,o)&&(r[o]=e[o]);return r})(t,["children","minHeight"]);return(0,o.jsx)(Q.Z,(i=((e,t)=>{for(var r in t||(t={}))rp.call(t,r)&&np(e,r,t[r]);if(tp)for(var r of tp(t))op.call(t,r)&&np(e,r,t[r]);return e})({display:"flex",flexDirection:"column",flex:"0 1 auto",minHeight:n},a),Xu(i,ep({children:r}))));var i},ip=e=>{const{isFirefoxMPSet:t=!1}=e;return un&&t};var sp=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const lp=()=>{const[e,t]=(0,n.useState)(!1),{t:r}=(0,_.T_)(),{state:a}=Y(),i=(0,v.s0)(),{sendBrowserMessage:l}=Ct(),{showWarning:c}=(0,u.Z)(),{user:d}=a.authStatus,{data:p}=(0,s.useQuery)(Ir.GetDesktopAgentStatus,(()=>l({messageType:At.GetDesktopAgentStatus}))),{desktopAgentHasPasswords:g=!1,isConnected:m=!1}=null!=p?p:{},{skipWelcomeScreen:h,isOnboarded:x}=d,y=(0,n.useCallback)((()=>sp(void 0,null,(function*(){yield l({messageType:At.UpdateCurrentUserProfileSettings,payload:{isOnboarded:!!cn||x,skipWelcomeScreen:!0}})}))),[l,x]),j=(0,n.useCallback)((()=>{t((e=>!e))}),[]),b=(0,n.useCallback)((()=>sp(void 0,null,(function*(){if(e&&(yield y()),cn)return x||(yield l({messageType:At.UpdateCurrentUserProfileSettings,payload:{skipWelcomeScreen:h,isOnboarded:!0}})),void(yield l({messageType:At.OnBoardingFinished}));i(D.OnboardingBrowserSettingsPage,{state:{skipPasswordsDelete:!0}})}))),[e,y,i,x,l,h]),P=(0,n.useCallback)((()=>sp(void 0,null,(function*(){if(e&&(yield y()),dn)return void i(D.ImportFromCsvPage);if(!m)return void i(D.InstallDesktopPage);if(!g)return c({text:r("importPasswordsFromDesktop.noLoginsFound")}),void i(D.ImportFromCsvPage);const{isFirefoxMPSet:t,passwords:o,archivePassword:n}=yield l({messageType:At.ImportDesktopAgentPasswords});i(D.ImportResultsPage,{state:{passwords:o,archivePassword:n,skipPasswordsDelete:ip({isFirefoxMPSet:t})}})}))),[r,i,c,e,l,y,g,m]);return h?cn?(l({messageType:At.OnBoardingFinished}),null):(0,o.jsx)(v.Fg,{to:D.OnboardingBrowserSettingsPage}):(0,o.jsx)(Hn,{children:(0,o.jsxs)(Gn,{children:[(0,o.jsx)(Yn,{title:r("congratulationsPage.title"),subtitle:r("congratulationsPage.subtitle")}),(0,o.jsxs)(Jn,{children:[(0,o.jsx)(ap,{children:(0,o.jsx)(Qu.Z,{})}),x?(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(aa.Z,{label:(0,o.jsx)(be.ZP,{variant:"body2",children:r("congratulationsPage.dontShowAgain")}),checked:e,onChange:j})}):(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:10,children:(0,o.jsx)(be.ZP,{align:"center",variant:"subtitle1",color:X.S5,children:r("congratulationsPage.bottomDescription")})})}),(0,o.jsxs)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",rowSpacing:3,mt:1,children:[(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,onClick:P,children:r("congratulationsPage.importLogins")})})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"outlined",onClick:b,children:r("congratulationsPage.goToExtension")})})})]})]})]})})},cp=e=>{const{description:t,onChange:r,label:n,value:a,disabled:i}=e;return(0,o.jsxs)(Q.Z,{container:!0,item:!0,justifyContent:"space-between",wrap:"nowrap",children:[(0,o.jsxs)(Q.Z,{item:!0,container:!0,xs:!0,children:[(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(be.ZP,{variant:"h5",children:n})}),t&&(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(be.ZP,{variant:"body1",color:X.S6,children:t})})]}),(0,o.jsx)(Q.Z,{item:!0,alignItems:"center",justifyContent:"center",display:"flex",children:(0,o.jsx)(Di.Z,{disabled:i,size:"medium",checked:a,onChange:r})})]})};var dp=Object.defineProperty,up=Object.defineProperties,pp=Object.getOwnPropertyDescriptors,gp=Object.getOwnPropertySymbols,mp=Object.prototype.hasOwnProperty,hp=Object.prototype.propertyIsEnumerable,xp=(e,t,r)=>t in e?dp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vp=(e,t)=>{for(var r in t||(t={}))mp.call(t,r)&&xp(e,r,t[r]);if(gp)for(var r of gp(t))hp.call(t,r)&&xp(e,r,t[r]);return e},yp=(e,t)=>up(e,pp(t));const jp={flex:1,minHeight:12,maxHeight:64},bp=()=>{const[e,t]=(0,n.useState)({0:!0,1:!0,2:!0,3:!0}),{sendBrowserMessage:r}=Ct(),[a,i]=(0,n.useState)(!1),{t:s}=(0,_.T_)(),l=(0,v.s0)(),{showError:c}=(0,u.Z)(),{state:d}=Y(),{state:p}=(0,v.TH)(),{authStatus:g}=d,{skipPasswordsDelete:m=!1}=null!=p?p:{},{skipWelcomeScreen:h,isOnboarded:x}=g.user,y=(0,n.useCallback)((()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{i(!0);const t=[];e[1]&&t.push(Fi(!1)),e[2]&&!m&&t.push(Ui()),e[3]&&t.push(zi()),yield Promise.all(t),x||(yield r({messageType:At.UpdateCurrentUserProfileSettings,payload:{skipWelcomeScreen:h,isOnboarded:!0}})),yield r({messageType:At.OnBoardingFinished})}catch(e){c({text:s("common.somethingWentWrong")}),wr(e,{message:"OnboardingBrowserSettingsPage/handleConfirmClick exception"})}finally{i(!1)}}))),[s,e,c,x,h,r,m]),j=(0,n.useCallback)((()=>{l(-1)}),[l]),b=(0,n.useCallback)((e=>e[3]&&(e[2]||m)&&e[1]),[m]),P=(0,n.useCallback)((r=>{t(yp(vp({},e),{0:r.target.checked,2:r.target.checked,3:r.target.checked}))}),[e]),w=(0,n.useCallback)((r=>{const o=yp(vp({},e),{2:r.target.checked});t(yp(vp({},o),{0:b(o)}))}),[e,b]),f=(0,n.useCallback)((r=>{const o=yp(vp({},e),{3:r.target.checked});t(yp(vp({},o),{0:b(o)}))}),[e,b]);return(0,o.jsx)(Hn,{children:(0,o.jsxs)(Gn,{children:[(0,o.jsx)(Yn,{title:s("onboardingBrowserSettingsPage.title"),subtitle:s("onboardingBrowserSettingsPage.subtitle")}),(0,o.jsxs)(Jn,{children:[(0,o.jsxs)(Q.Z,{display:"flex",flexDirection:"column",flex:1,children:[(0,o.jsx)(je.Z,{sx:jp}),(0,o.jsx)(cp,{value:e[0],label:s("onboardingBrowserSettingsPage.settings.enableAllLabel"),onChange:P}),(0,o.jsx)(je.Z,{sx:jp}),(0,o.jsx)(cp,{disabled:!0,value:e[1],label:s("onboardingBrowserSettingsPage.settings.stopLoginsStoringLabel"),description:s("onboardingBrowserSettingsPage.settings.stopLoginsStoringDescription"),onChange:()=>{}}),!m&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(je.Z,{sx:jp}),(0,o.jsx)(cp,{value:e[2],label:s("onboardingBrowserSettingsPage.settings.eraseAllLoginsLabel"),description:s("onboardingBrowserSettingsPage.settings.eraseAllLoginsDescription"),onChange:w})]}),(0,o.jsx)(je.Z,{sx:jp}),(0,o.jsx)(cp,{value:e[3],label:s("onboardingBrowserSettingsPage.settings.eraseCookiesLabel"),description:s("onboardingBrowserSettingsPage.settings.eraseCookiesDescription"),onChange:f})]}),(0,o.jsx)(je.Z,{mt:3}),(0,o.jsxs)(Q.Z,{item:!0,container:!0,width:"100%",flexDirection:"row",spacing:2,alignItems:"center",justifyContent:"center",children:[(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"outlined",onClick:j,children:s("common.back")})}),(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{disabled:a,isLoading:a,fullWidth:!0,onClick:y,children:s("common.confirm")})})]})]})]})})};var Pp=r(49359),wp=r(70768),fp=r(83323),Cp=r(48699);const Sp=e=>{const{isConnectionFailed:t,isConnecting:r,isConnected:n,isFirstStepCompleted:a}=e,{t:i}=(0,_.T_)();return(0,o.jsxs)(Pp.Z,{children:[(0,o.jsxs)(wp.Z,{active:!0,children:[!a&&(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",columnSpacing:1,children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(fp.Z,{color:X.S4,children:(0,o.jsx)(be.ZP,{color:X.S1,variant:"caption",children:"1"})})}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{color:X.S5,children:i("installDesktopPage.stepperWidget.clickToInstall")})})]}),a&&(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",columnSpacing:1,children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(fp.Z,{pl:"1px",pt:"1px",children:(0,o.jsx)(Cp.Z,{width:24,height:24,color:X.S1})})}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{color:X.S5,children:i("installDesktopPage.stepperWidget.clickToInstall")})})]})]}),(0,o.jsxs)(wp.Z,{children:[!a&&(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",columnSpacing:1,children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(fp.Z,{color:X.S4,children:(0,o.jsx)(be.ZP,{color:X.S1,variant:"caption",children:"2"})})}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{color:X.S5,children:i("installDesktopPage.stepperWidget.connectToDesktopApp")})})]}),a&&r&&(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",columnSpacing:1,children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(fp.Z,{children:(0,o.jsx)(qe.Z,{color:X.S1})})}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{color:X.S5,children:i("installDesktopPage.stepperWidget.connectingToDesktopApp")})})]}),a&&!r&&!t&&n&&(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",columnSpacing:1,children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(fp.Z,{pl:"1px",pt:"1px",children:(0,o.jsx)(Cp.Z,{width:24,height:24,color:X.S1})})}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{color:X.S5,children:i("installDesktopPage.stepperWidget.connectedToDesktopApp")})})]}),a&&!r&&t&&!n&&(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",columnSpacing:1,children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(fp.Z,{color:X.sf,children:(0,o.jsx)(ti.Z,{width:24,height:24,color:X.S1})})}),(0,o.jsxs)(Q.Z,{item:!0,pt:2.5,children:[(0,o.jsx)(be.ZP,{color:X.S5,children:i("installDesktopPage.stepperWidget.connectionFailedToDesktopApp")}),(0,o.jsx)(pd.Z,{error:!0,children:i("installDesktopPage.connectionFailedError")})]})]})]})]})};var Zp=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const Ip=()=>{const{t:e}=(0,_.T_)(),t=(0,v.s0)(),{sendBrowserMessage:r}=Ct(),[a,i]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),[d,p]=(0,n.useState)(!1),{showWarning:g,showError:m}=(0,u.Z)(),{data:h,isFetching:x}=(0,s.useQuery)(Ir.GetDesktopAgentStatus,(()=>r({messageType:At.GetDesktopAgentStatus,payload:{waitTime:An.Z.HalfSecond}})),{cacheTime:0,enabled:a,refetchInterval:e=>!(null==e?void 0:e.isConnected)&&An.Z.ThreeSeconds}),{isConnected:y=!1}=null!=h?h:{},j=(0,n.useCallback)((()=>Zp(void 0,null,(function*(){t(D.OnboardingBrowserSettingsPage,{state:{skipPasswordsDelete:!0}})}))),[t]),b=(0,n.useCallback)((()=>{r({messageType:At.OpenDownloadDesktopAppTab}),i(!0)}),[r]),P=(0,n.useCallback)((()=>Zp(void 0,null,(function*(){try{p(!0),c(!0);const{passwords:o,archivePassword:n,isFirefoxMPSet:a}=yield r({messageType:At.ImportDesktopAgentPasswords});if(!o.length)return g({text:e("importPasswordsFromDesktop.noLoginsFound")}),void t(D.ImportFromCsvPage);o.length&&t(D.ImportResultsPage,{state:{passwords:o,archivePassword:n,skipPasswordsDelete:ip({isFirefoxMPSet:a})}})}catch(t){m({text:e("common.somethingWentWrong")}),wr(t,{message:"InstallDesktopPage/importPasswordsFromDesktop exception"})}finally{c(!1)}}))),[e,t,g,r,m]);return(0,n.useEffect)((()=>{y&&!d&&(a?P():t(D.CongratulationsPage))}),[e,t,y,g,a,P,d]),(0,o.jsx)(Hn,{children:(0,o.jsxs)(Gn,{children:[(0,o.jsx)(Yn,{title:e("installDesktopPage.title"),subtitle:e("installDesktopPage.subtitle")}),(0,o.jsxs)(Jn,{children:[(0,o.jsxs)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",className:"height-100",py:5,children:[(0,o.jsx)(Q.Z,{item:!0,xs:8,children:(0,o.jsx)(Sp,{isFirstStepCompleted:a,isConnecting:x,isConnected:!!(null==h?void 0:h.isConnected),isConnectionFailed:!(null==h?void 0:h.isConnected)})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{isLoading:l,onClick:b,children:e("installDesktopPage.installDesktopApp")})})})]}),(0,o.jsxs)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",rowSpacing:3,children:[(0,o.jsx)(Q.Z,{item:!0,xs:10,children:(0,o.jsx)(be.ZP,{align:"center",variant:"body1",color:X.S5,children:e("installDesktopPage.bottomDescription")})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"outlined",onClick:j,children:e("installDesktopPage.noBrowserSavedPasswords")})})})]})]})]})})};var kp=Object.defineProperty,Tp=Object.defineProperties,Ap=Object.getOwnPropertyDescriptors,Mp=Object.getOwnPropertySymbols,Op=Object.prototype.hasOwnProperty,Dp=Object.prototype.propertyIsEnumerable,Vp=(e,t,r)=>t in e?kp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Lp={future:{v7_startTransition:!0}},Ep=()=>{return(0,o.jsx)(x.UT,(e=((e,t)=>{for(var r in t||(t={}))Op.call(t,r)&&Vp(e,r,t[r]);if(Mp)for(var r of Mp(t))Dp.call(t,r)&&Vp(e,r,t[r]);return e})({},Lp),t={children:(0,o.jsxs)(v.Z5,{children:[(0,o.jsx)(v.AW,{path:D.CongratulationsPage,element:(0,o.jsx)(lp,{})}),(0,o.jsx)(v.AW,{path:D.ImportFromCsvPage,element:(0,o.jsx)(Va,{isOnboarding:!0})}),(0,o.jsx)(v.AW,{path:D.ImportMappingPage,element:(0,o.jsx)(Oi,{})}),(0,o.jsx)(v.AW,{path:D.ImportResultsPage,element:(0,o.jsx)(ji,{})}),(0,o.jsx)(v.AW,{path:D.ImportHistoryPage,element:(0,o.jsx)(ra,{isOnboarding:!0,nextButtonTranslationKey:"common.continue"})}),(0,o.jsx)(v.AW,{path:D.OnboardingBrowserSettingsPage,element:(0,o.jsx)(bp,{})}),(0,o.jsx)(v.AW,{path:D.InstallDesktopPage,element:(0,o.jsx)(Ip,{})}),(0,o.jsx)(v.AW,{path:"*",element:(0,o.jsx)(v.Fg,{to:D.CongratulationsPage,replace:!0})})]})},Tp(e,Ap(t))));var e,t};var Bp=r(43616),Rp=r(33203),Wp=r(12567),Np=r(82969);const Fp=(0,n.createContext)({setLoginCachedInformation:()=>{},loginCachedInformation:null});Fp.displayName="AuthContext";const Up=Fp,zp=()=>(0,n.useContext)(Fp);var _p=r(48764).Buffer,Gp=Object.defineProperty,qp=Object.getOwnPropertySymbols,Kp=Object.prototype.hasOwnProperty,Hp=Object.prototype.propertyIsEnumerable,$p=(e,t,r)=>t in e?Gp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Yp=(e,t)=>{for(var r in t||(t={}))Kp.call(t,r)&&$p(e,r,t[r]);if(qp)for(var r of qp(t))Hp.call(t,r)&&$p(e,r,t[r]);return e},Qp=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const Jp={width:"100%"},Xp=(0,n.memo)((e=>{const{mode:t,backButtonPath:r,descriptionTranslationKey:a,titleTranslationKey:i}=e,[s,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[p,g]=(0,n.useState)(!1),{sendBrowserMessage:m}=Ct(),{state:h}=Y(),{loginCachedInformation:x}=zp(),{t:y}=(0,_.T_)(),j=(0,v.s0)(),{showSuccess:b,showError:P}=(0,u.Z)(),w=(0,n.useMemo)((()=>t!==Bp.Z.LoginAndPair?{}:x),[x,t]),f=(0,n.useMemo)((()=>({CompanionApplicationSymmetricKey:h.deviceStatus.symmetricKey,CompanionApplicationId:h.deviceStatus.guid,CompanionApplicationTypeId:Or.CompanionApplicationTypeName.BrowserExtension,OS:(0,cd.Pd)(),BrowserType:(0,cd.g_)()})),[h.deviceStatus]),C=(0,n.useMemo)((()=>({type:t,payload:_p.from(JSON.stringify(Yp(Yp({},f),w))).toString("base64")})),[w,f,t]),S=(0,n.useCallback)((e=>d(e.target.value)),[]),Z=(0,n.useCallback)((()=>Qp(void 0,null,(function*(){try{g(!0);const{code:e}=yield m({messageType:At.GeneratePairingCode,payload:{companionApplicationId:h.deviceStatus.guid,os:(0,cd.Pd)(),browserType:(0,cd.g_)()}});l(e)}catch(e){wr(e,{message:"PairPage/handleGenerateCode exception"}),P({text:y("toasts.somethingWentWrong")})}finally{g(!1)}}))),[h.deviceStatus.guid,m,P,y]),I=(0,n.useCallback)((e=>{Le()(e),b({text:y("common.copiedToClipboard")})}),[b,y]),k=(0,n.useCallback)((()=>{j(r)}),[j,r]),T=(0,n.useCallback)((()=>Qp(void 0,null,(function*(){var e;try{g(!0),yield m({messageType:At.ActivateMobile,payload:Yp({code:c},C)}),g(!1)}catch(t){if(g(!1),wr(t,{message:"PairPage/handlePairClick exception"}),null==(e=null==t?void 0:t.message)?void 0:e.includes("Activation_code_was_already_used"))return void P({text:y("pairPage.validationError.codeAlreadyUsed")});P({text:y("toasts.invalidCode")})}}))),[c,C,m,P,y]);if(t===Bp.Z.LoginAndPair&&!x)return(0,o.jsx)(v.Fg,{to:D.SignInToMobile});const A=(null!=c?c:"").length<6;return(0,o.jsx)(Hn,{children:(0,o.jsxs)(Gn,{children:[(0,o.jsx)(Yn,{title:y(i),subtitle:y(a)}),(0,o.jsxs)(Jn,{children:[(0,o.jsxs)(Q.Z,{container:!0,my:"auto",justifyContent:"space-around",children:[(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsxs)(Q.Z,{container:!0,justifyContent:"space-between",children:[(0,o.jsxs)(Q.Z,{item:!0,xs:11,textAlign:"center",children:[(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(Rp.Z,{padding:2,size:230,value:JSON.stringify(C)})}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{variant:"caption",color:X.S5,children:y("pairPage.scanningResultDescription")})})]}),(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(te.Z,{orientation:"vertical"})})]})}),(0,o.jsx)(Q.Z,{item:!0,xs:5,children:(0,o.jsxs)(Q.Z,{container:!0,textAlign:"center",className:"height-100",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",children:[t===Bp.Z.Pair&&(0,o.jsxs)(Q.Z,{item:!0,children:[(0,o.jsx)(be.ZP,{variant:"subtitle1",color:X.S5,children:y("pairPage.enterCodeManually")}),(0,o.jsx)(je.Z,{mt:2}),s?(0,o.jsx)(Pn.Z,{text:s,onCopy:I,tooltipTitle:y("common.copy")}):(0,o.jsx)(mt.Z,{variant:"outlined",icon:(0,o.jsx)(Wp.Z,{}),onClick:Z,isLoading:p,children:y("pairPage.generateCode")})]}),t===Bp.Z.LoginAndPair&&(0,o.jsxs)(Q.Z,{item:!0,xs:6,children:[(0,o.jsx)(be.ZP,{variant:"caption",color:X.S5,children:y("pairPage.orEnterCode")}),(0,o.jsx)(je.Z,{mt:2}),(0,o.jsx)(Np.Z,{autoComplete:"off",label:y("pairPage.typeCode"),onChange:S})]})]})})]}),!!r&&(0,o.jsx)(Q.Z,{container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,onClick:k,children:y("common.back")})})}),t===Bp.Z.LoginAndPair&&(0,o.jsx)(Q.Z,{container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(ne.Z,{boxSX:Jp,title:A?y("pairPage.pairButtonDisabled"):null,children:(0,o.jsx)(mt.Z,{isLoading:p,disabled:A,onClick:T,children:y("pairPage.pair")})})})})]})]})})}));var eg=r(19805),tg=r(93777),rg=r(36770),og=r(85320),ng=r(856),ag=r(49802),ig=r(15756),sg=r(57076);const lg={backdrop:ve.n},cg=(0,n.memo)((e=>{const{isOpen:t}=e,[r,a]=(0,n.useState)(!1),{t:i}=(0,_.T_)(),{sendBrowserMessage:s}=Ct(),l=(0,v.s0)(),c=(0,n.useCallback)((()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{a(!0),yield s({messageType:At.Logout}),l(D.LoginPage)}catch(e){wr(e,{message:"ActivationFlowErrorModal/handleActivationFlowErrorSubmit exception"})}finally{a(!1)}}))),[l,s]);return(0,o.jsxs)(Vt.Z,{open:t,onClose:c,slots:lg,children:[(0,o.jsx)(tn.Z,{onClose:c,children:i("activationFlowErrorModal.title")}),(0,o.jsxs)(rn.Z,{children:[(0,o.jsx)(be.ZP,{variant:"body1",color:X.S5,children:i("activationFlowErrorModal.passwordCannotBeCreated")}),(0,o.jsx)(be.ZP,{variant:"body1",color:X.S5,children:i("activationFlowErrorModal.clickTryAgain")})]}),(0,o.jsx)(on.Z,{children:(0,o.jsx)(Q.Z,{container:!0,justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,isLoading:r,onClick:c,children:i("common.tryAgain")})})})})]})}));const dg=()=>{var e,t,r,a,i,s,l,c,d,u,p,g,m,h,x,y;const{state:j}=Y(),[b,P]=(0,n.useState)(!1),[w,f]=(0,n.useState)(!1),[C,S]=(0,n.useState)(!1),{sendBrowserMessage:Z}=Ct(),[I,k]=(0,n.useState)(!1),T=(0,v.s0)(),{t:A}=(0,_.T_)(),{setLoginCachedInformation:M}=zp(),{control:O,formState:V,handleSubmit:L,getValues:E,trigger:B}=(0,Wr.cI)({criteriaMode:"all",mode:"all",defaultValues:{confirmMasterPassword:"",masterPassword:""}}),{errors:R}=V,{employee:W}=j.authStatus,{masterPasswordSet:N}=null!=W?W:{};(0,n.useEffect)((()=>{N&&T(D.PairPage)}),[T,N]);const F=(0,n.useCallback)((e=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{k(!0);const{masterPassword:t}=e;yield Z({messageType:At.ActivateUser,payload:{masterPassword:t}}),M({email:W.email,password:t}),T(D.InstallMobileApp)}catch(e){wr(e,{message:"error while activating"}),S(!0)}finally{k(!1)}}))),[W,M,T,Z]),U=(0,n.useCallback)((()=>{B()}),[B]),z=I;return(0,o.jsxs)(Hn,{children:[(0,o.jsxs)(Gn,{children:[(0,o.jsx)(Yn,{title:A("changeMasterPasswordPage.title"),subtitle:A("changeMasterPasswordPage.description")}),(0,o.jsxs)(Jn,{component:"form",onSubmit:L(F),children:[(0,o.jsxs)(Q.Z,{container:!0,item:!0,rowSpacing:4,alignItems:"center",justifyContent:"center",children:[(0,o.jsx)(Q.Z,{item:!0,xs:8,mt:1,children:(0,o.jsx)(Fr.Z,{name:"masterPassword",control:O,fullWidth:!0,autoFocus:!0,type:b?"text":"password",error:!!(null==(e=R.masterPassword)?void 0:e.message),label:A("changeMasterPasswordPage.createMasterPassword"),helperText:null==(t=R.masterPassword)?void 0:t.message,rules:{validate:{specialCharacter:e=>(0,eg.qW)(e),digit:e=>(0,tg.GU)(e),upperCaseLetter:e=>(0,rg.fD)(e),lowerCaseLetter:e=>(0,og.dd)(e),minLength:e=>(0,ng.Z)(12,e),passwordsMatch:e=>(0,ag.Z)(E().confirmMasterPassword,e,{caseSensitive:!0})}},InputProps:{tabIndex:0,endAdornment:(0,o.jsx)(_r.Z,{position:"end",children:(0,o.jsx)(Pe.Z,{edge:"end",tabIndex:-1,onClick:()=>P(!b),children:b?(0,o.jsx)(Re.Z,{}):(0,o.jsx)(We.Z,{})})})}})}),(0,o.jsx)(Q.Z,{item:!0,xs:8,children:(0,o.jsx)(Fr.Z,{name:"confirmMasterPassword",control:O,fullWidth:!0,type:w?"text":"password",error:!!(null==(r=R.confirmMasterPassword)?void 0:r.message),label:A("changeMasterPasswordPage.confirmMasterPassword"),helperText:null==(a=R.confirmMasterPassword)?void 0:a.message,onChange:U,InputProps:{tabIndex:1,endAdornment:(0,o.jsx)(_r.Z,{position:"end",children:(0,o.jsx)(Pe.Z,{tabIndex:-1,edge:"end",onClick:()=>f(!w),children:w?(0,o.jsx)(Re.Z,{}):(0,o.jsx)(We.Z,{})})})}})})]}),(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,o.jsx)(Q.Z,{item:!0,container:!0,xs:8,children:(0,o.jsx)(be.ZP,{variant:"subtitle1",color:X.S5,children:A("changeMasterPasswordPage.validationAreaDescription")})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,xs:8,mt:3,children:(0,o.jsxs)(ig.Z,{children:[(0,o.jsx)(sg.Z,{isDirty:V.isDirty,isValid:!(null==(s=null==(i=R.masterPassword)?void 0:i.types)?void 0:s.minLength),children:A("changeMasterPasswordPage.includeMinimumDigits")}),(0,o.jsx)(sg.Z,{isDirty:V.isDirty,isValid:!(null==(c=null==(l=R.masterPassword)?void 0:l.types)?void 0:c.upperCaseLetter)&&!(null==(u=null==(d=R.masterPassword)?void 0:d.types)?void 0:u.lowerCaseLetter),children:A("changeMasterPasswordPage.includeUppercaseLetters")}),(0,o.jsx)(sg.Z,{isDirty:V.isDirty,isValid:!(null==(g=null==(p=R.masterPassword)?void 0:p.types)?void 0:g.digit),children:A("changeMasterPasswordPage.includeNumbers")}),(0,o.jsx)(sg.Z,{isValid:!(null==(h=null==(m=R.masterPassword)?void 0:m.types)?void 0:h.specialCharacter),isDirty:V.isDirty,children:A("changeMasterPasswordPage.includeSymbols")}),(0,o.jsx)(sg.Z,{isValid:!(null==(y=null==(x=R.masterPassword)?void 0:x.types)?void 0:y.passwordsMatch),isDirty:V.isDirty,children:A("changeMasterPasswordPage.passwordsMatch")})]})})]}),(0,o.jsx)(Q.Z,{container:!0,justifyContent:"center",alignItems:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{isLoading:z,type:"submit",fullWidth:!0,disabled:!V.isDirty||!!R.masterPassword,children:A("common.continue")})})})]})]}),C&&(0,o.jsx)(cg,{isOpen:C})]})};var ug=r(80778);const pg=()=>{const{t:e}=(0,_.T_)(),t=(0,v.s0)();return(0,o.jsx)(Hn,{children:(0,o.jsxs)(Gn,{children:[(0,o.jsx)(Yn,{title:e("signInToMobilePage.title")}),(0,o.jsxs)(Jn,{children:[(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:8,children:(0,o.jsx)(be.ZP,{align:"center",variant:"subtitle1",color:X.S5,children:e("signInToMobilePage.description")})})}),(0,o.jsx)(ap,{my:1,children:(0,o.jsx)(ug.Z,{})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:10,children:(0,o.jsx)(be.ZP,{align:"center",variant:"subtitle1",color:X.S5,children:e("signInToMobilePage.bottomDescription")})})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",rowSpacing:3,mt:1,children:(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,onClick:()=>{t(D.PairPage)},children:e("welcomePage.pairWithMobile")})})})})]})]})})},gg=()=>{const{t:e}=(0,_.T_)(),t=(0,v.s0)(),r=(0,n.useCallback)((()=>{t(D.LoginAndPairPage)}),[t]);return(0,o.jsx)(Hn,{children:(0,o.jsxs)(Gn,{children:[(0,o.jsx)(Yn,{title:e("installMobileAppPage.title"),subtitle:e("installMobileAppPage.description")}),(0,o.jsxs)(Jn,{children:[(0,o.jsx)(Q.Z,{item:!0}),(0,o.jsxs)(Q.Z,{item:!0,container:!0,children:[(0,o.jsx)(Q.Z,{item:!0,container:!0,justifyContent:"center",children:(0,o.jsx)(Rp.Z,{size:250,padding:0,value:"https://onelink.to/business-passwords"})}),(0,o.jsxs)(Q.Z,{item:!0,container:!0,justifyContent:"center",mt:3,children:[(0,o.jsx)(be.ZP,{variant:"body2",children:e("installMobileAppPage.orType")})," ",(0,o.jsx)(be.ZP,{variant:"subtitle2",color:X.i,children:e("installMobileAppPage.uniqkey")})," ",(0,o.jsx)(be.ZP,{variant:"body2",children:e("installMobileAppPage.inAppleOrPlayStore")})]})]}),(0,o.jsx)(Q.Z,{item:!0,container:!0,justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,onClick:r,children:e("common.continue")})})})]})]})})};var mg=Object.defineProperty,hg=Object.defineProperties,xg=Object.getOwnPropertyDescriptors,vg=Object.getOwnPropertySymbols,yg=Object.prototype.hasOwnProperty,jg=Object.prototype.propertyIsEnumerable,bg=(e,t,r)=>t in e?mg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Pg={future:{v7_startTransition:!0}},wg=()=>{return(0,o.jsx)(x.UT,(e=((e,t)=>{for(var r in t||(t={}))yg.call(t,r)&&bg(e,r,t[r]);if(vg)for(var r of vg(t))jg.call(t,r)&&bg(e,r,t[r]);return e})({},Pg),t={children:(0,o.jsxs)(v.Z5,{children:[(0,o.jsx)(v.AW,{path:D.ChangeMasterPasswordPage,element:(0,o.jsx)(dg,{})}),(0,o.jsx)(v.AW,{path:D.SignInToMobile,element:(0,o.jsx)(pg,{})}),(0,o.jsx)(v.AW,{path:D.PairPage,element:(0,o.jsx)(Xp,{titleTranslationKey:"pairPage.pairTitle",descriptionTranslationKey:"pairPage.pairDescription",mode:Bp.Z.Pair})}),(0,o.jsx)(v.AW,{path:D.LoginAndPairPage,element:(0,o.jsx)(Xp,{titleTranslationKey:"pairPage.loginAndPairTitle",descriptionTranslationKey:"pairPage.loginAndPairDescription",mode:Bp.Z.LoginAndPair})}),(0,o.jsx)(v.AW,{path:D.InstallMobileApp,element:(0,o.jsx)(gg,{})}),(0,o.jsx)(v.AW,{path:"*",element:(0,o.jsx)(v.Fg,{to:D.ChangeMasterPasswordPage,replace:!0})})]})},hg(e,xg(t))));var e,t};var fg=r(10884);const Cg=()=>{const{sendBrowserMessage:e}=Ct(),t=(0,n.useCallback)((t=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){yield e({messageType:At.LoginByCredentials,payload:{password:t.password,email:t.email.toLowerCase().trim()}})}))),[e]);return{loginByCredentials:t}};const Sg=()=>{var e,t,r,a;const{t:i}=(0,_.T_)(),{showError:s}=(0,u.Z)(),l=(0,v.s0)(),[c,d]=(0,n.useState)(!0),[p,g]=(0,n.useState)(!1),{loginByCredentials:m}=Cg(),{control:h,handleSubmit:x,formState:y}=(0,Wr.cI)({defaultValues:{email:"",password:""}}),{errors:j}=y,b=(0,n.useCallback)((e=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{const{password:t,email:r}=e;g(!0),yield m({password:t,email:r})}catch(e){s({text:i("loginPage.usernameOrEmailIsIncorrect")}),wr(e,{message:"LoginPage/onSubmit exception"}),g(!1)}}))),[m,s,i]);return(0,o.jsx)(Hn,{children:(0,o.jsxs)(Gn,{children:[(0,o.jsx)(Yn,{title:i("loginPage.activateAccount")}),(0,o.jsxs)(Jn,{component:"form",onSubmit:x(b),children:[(0,o.jsx)(ap,{children:(0,o.jsx)(Bu.Z,{})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsxs)(Q.Z,{item:!0,xs:10,children:[(0,o.jsx)(je.Z,{width:"100%",mt:1}),(0,o.jsx)(be.ZP,{align:"center",variant:"body1",color:X.S5,children:i("loginPage.description")})]})}),(0,o.jsxs)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",rowSpacing:4,mt:1,children:[(0,o.jsx)(Q.Z,{item:!0,xs:8,children:(0,o.jsx)(Fr.Z,{name:"email",control:h,fullWidth:!0,error:!!(null==(e=j.email)?void 0:e.message),label:i("loginPage.email"),helperText:null==(t=j.email)?void 0:t.message,rules:{required:i("validation.required"),validate:e=>!!(0,fg.Z)(e)||i("validation.invalidFormat")}})}),(0,o.jsx)(Q.Z,{item:!0,xs:8,children:(0,o.jsx)(Fr.Z,{autoComplete:"off",name:"password",control:h,fullWidth:!0,type:c?"text":"password",error:!!(null==(r=j.password)?void 0:r.message),label:i("loginPage.activationCode"),helperText:null==(a=j.password)?void 0:a.message,rules:{required:i("validation.required")},InputProps:{endAdornment:(0,o.jsx)(_r.Z,{position:"end",children:(0,o.jsx)(Pe.Z,{edge:"end",onClick:()=>d(!c),children:c?(0,o.jsx)(Re.Z,{}):(0,o.jsx)(We.Z,{})})})}})})]}),(0,o.jsx)(Q.Z,{container:!0,alignItems:"center",justifyContent:"center",mt:3,children:(0,o.jsxs)(Q.Z,{item:!0,container:!0,xs:8,columnSpacing:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"outlined",onClick:()=>{l(D.WelcomePage)},children:i("common.back")})}),(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{disabled:p,isLoading:p,fullWidth:!0,type:"submit",children:i("common.continue")})})]})})]})]})})};var Zg=r(72862);const Ig=()=>{const{t:e}=(0,_.T_)(),t=(0,v.s0)(),r=(0,n.useCallback)((e=>{e.preventDefault(),t(D.SignUpPage)}),[t]);return(0,o.jsx)(Hn,{children:(0,o.jsxs)(Gn,{children:[(0,o.jsx)(Yn,{title:e("welcomePage.welcomeToUniqkey")}),(0,o.jsxs)(Jn,{children:[(0,o.jsx)(ap,{children:(0,o.jsx)(Bu.Z,{})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:8,mt:1,children:(0,o.jsx)(be.ZP,{align:"center",variant:"body1",color:X.S5,children:e("welcomePage.description")})})}),(0,o.jsxs)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",rowSpacing:3,mt:1,children:[(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"outlined",onClick:()=>{t(D.LoginPage)},children:e("welcomePage.activateAccount")})})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,children:(0,o.jsx)(be.ZP,{variant:"body1",color:X.S5,children:e("welcomePage.alreadyActive")})})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,onClick:()=>{t(D.PairPage)},children:e("welcomePage.pairWithMobile")})})}),un&&(0,o.jsx)(Q.Z,{item:!0,container:!0,textAlign:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:12,children:(0,o.jsx)(Zg.Z,{href:"#",onClick:r,children:(0,o.jsx)(be.ZP,{color:X.B1,variant:"buttons",component:"span",children:e("common.signUp")})})})})]})]})]})})};const kg=()=>{const{email:e,password:t}=(0,v.UO)(),{loginByCredentials:r}=Cg(),{showError:a}=(0,u.Z)(),{t:i}=(0,_.T_)(),s=(0,v.s0)(),l=(0,n.useCallback)((()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{yield r({password:t,email:e})}catch(e){a({text:i("loginPage.usernameOrEmailIsIncorrect")}),wr(e,{message:"AutoActivatePage/handleAutoLogin exception"}),s(D.WelcomePage)}}))),[t,e,r,s,a,i]);return(0,n.useEffect)((()=>{l()}),[l]),(0,o.jsx)(Hn,{children:(0,o.jsx)(Q.Z,{container:!0,className:"min-height-100vh",alignItems:"center",justifyContent:"center",direction:"column",children:(0,o.jsx)(Js.Z,{})})})};const Tg=()=>{const{sendBrowserMessage:e}=Ct(),{showError:t}=(0,u.Z)(),{t:r}=(0,_.T_)(),{data:o,isLoading:a}=(0,s.useQuery)(Ir.GetEnvironment,(()=>e({messageType:At.GetEnvironment}))),i=(0,n.useCallback)((o=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{yield e({messageType:At.SetEnvironment,payload:{env:o}})}catch(e){wr(e,{message:"useEnvironment/changeEnv exception"}),t({text:r("toasts.somethingWentWrong")})}}))),[e,t,r]);return{activeEnv:o,changeEnv:i,isLoading:a}};var Ag=(e=>(e.Dev="dev",e.Staging="staging",e.QA1="qa1",e.QA2="qa2",e.QA3="qa3",e.DEMO="demo",e.Production="production",e))(Ag||{});const Mg=Ag;const Og=()=>{const{t:e}=(0,_.T_)(),[t,r]=(0,n.useState)(),{changeEnv:a,activeEnv:i,isLoading:s}=Tg(),{showError:l}=(0,u.Z)(),c=(0,n.useCallback)((e=>{r(e.target.value)}),[]),d=(0,n.useCallback)((()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{yield a(t)}catch(t){wr(t,{message:"EnvironmentPage/handleApplyClick exception"}),l({text:e("toasts.somethingWentWrong")})}}))),[t,a,l,e]);return(0,n.useEffect)((()=>{r(i)}),[i]),s?(0,o.jsx)(n.Suspense,{fallback:!0}):(0,o.jsx)(Hn,{children:(0,o.jsxs)(Gn,{children:[(0,o.jsx)(Yn,{title:e("Environment")}),(0,o.jsxs)(Jn,{children:[(0,o.jsxs)(bu.Z,{defaultValue:i,row:!0,onChange:c,children:[(0,o.jsx)(Kr.Z,{value:Mg.Dev,control:(0,o.jsx)(Hr.Z,{}),label:"Dev"}),(0,o.jsx)(Kr.Z,{value:Mg.QA1,control:(0,o.jsx)(Hr.Z,{}),label:"QA1"}),(0,o.jsx)(Kr.Z,{value:Mg.QA2,control:(0,o.jsx)(Hr.Z,{}),label:"QA2"}),(0,o.jsx)(Kr.Z,{value:Mg.QA3,control:(0,o.jsx)(Hr.Z,{}),label:"QA3"}),(0,o.jsx)(Kr.Z,{value:Mg.DEMO,control:(0,o.jsx)(Hr.Z,{}),label:"Demo"}),(0,o.jsx)(Kr.Z,{value:Mg.Staging,control:(0,o.jsx)(Hr.Z,{}),label:"Staging"}),(0,o.jsx)(Kr.Z,{value:Mg.Production,control:(0,o.jsx)(Hr.Z,{}),label:"Production"})]}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",rowSpacing:3,mt:1,children:(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,xs:4,children:(0,o.jsx)(mt.Z,{fullWidth:!0,onClick:d,children:e("Apply")})})})})]})]})})};var Dg=r(78091);const Vg=()=>{var e,t,r,a,i,s,l,c,d,p,g,m,h,x;const[y,j]=(0,n.useState)(!1),[b,P]=(0,n.useState)(!1),[w,f]=(0,n.useState)(!1),{t:C}=(0,_.T_)(),{showError:S}=(0,u.Z)(),Z=(0,v.s0)(),{setLoginCachedInformation:I}=zp(),{sendBrowserMessage:k}=Ct(),{control:T,handleSubmit:A,formState:{errors:M,dirtyFields:O},getValues:V,trigger:L,watch:E}=(0,Wr.cI)({criteriaMode:"all",defaultValues:{email:"",password:"",confirmPassword:"",isPrivacyPolicyAccepted:!1}}),B=O.password||O.confirmPassword||O.email,{isPrivacyPolicyAccepted:R}=E(),W=(0,n.useCallback)((e=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){var t;try{f(!0);const{password:t,email:r}=e;yield k({messageType:At.SignUp,payload:{password:t,email:r.toLowerCase().trim()}}),I({email:r,password:t}),f(!1),Z(D.LoginAndPairPage)}catch(e){if(f(!1),null==(t=null==e?void 0:e.message)?void 0:t.includes("User_with_such_email_already_exist"))return void S({text:C("signUpPage.validationError.emailIsInUse")});S({text:C("common.somethingWentWrong")}),wr(e,{message:"SignUpPage/onSubmit exception"})}}))),[C,Z,S,k,I]),N=(0,n.useCallback)((()=>{Z(D.WelcomePage)}),[Z]),F=(0,n.useCallback)((()=>{j((e=>!e))}),[]),U=(0,n.useCallback)((()=>{P((e=>!e))}),[]),z=(0,n.useCallback)((()=>{L("password")}),[L]);return(0,o.jsx)(Hn,{children:(0,o.jsxs)(Gn,{children:[(0,o.jsx)(Yn,{title:C("signUpPage.header")}),(0,o.jsxs)(Jn,{component:"form",onSubmit:A(W),children:[(0,o.jsx)(ap,{children:(0,o.jsx)(Bu.Z,{})}),(0,o.jsx)(Q.Z,{container:!0,alignItems:"center",justifyContent:"center",mt:2,children:(0,o.jsx)(Q.Z,{item:!0,container:!0,xs:10,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(be.ZP,{align:"center",variant:"body1",color:X.S5,children:C("signUpPage.description")})})}),(0,o.jsxs)(Q.Z,{container:!0,mt:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsxs)(Q.Z,{container:!0,alignItems:"center",justifyContent:"center",rowSpacing:1,children:[(0,o.jsx)(Q.Z,{item:!0,container:!0,xs:8,children:(0,o.jsx)(be.ZP,{variant:"subtitle1",color:X.S5,children:C("changeMasterPasswordPage.validationAreaDescription")})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,xs:8,children:(0,o.jsxs)(ig.Z,{children:[(0,o.jsx)(sg.Z,{isDirty:B,isValid:!(null==(t=null==(e=M.password)?void 0:e.types)?void 0:t.minLength),children:C("changeMasterPasswordPage.includeMinimumDigits")}),(0,o.jsx)(sg.Z,{isDirty:B,isValid:!(null==(a=null==(r=M.password)?void 0:r.types)?void 0:a.upperCaseLetter)&&!(null==(s=null==(i=M.password)?void 0:i.types)?void 0:s.lowerCaseLetter),children:C("changeMasterPasswordPage.includeUppercaseLetters")}),(0,o.jsx)(sg.Z,{isDirty:B,isValid:!(null==(c=null==(l=M.password)?void 0:l.types)?void 0:c.digit),children:C("changeMasterPasswordPage.includeNumbers")}),(0,o.jsx)(sg.Z,{isValid:!(null==(p=null==(d=M.password)?void 0:d.types)?void 0:p.specialCharacter),isDirty:B,children:C("changeMasterPasswordPage.includeSymbols")}),(0,o.jsx)(sg.Z,{isValid:!(null==(m=null==(g=M.password)?void 0:g.types)?void 0:m.passwordsMatch),isDirty:B,children:C("changeMasterPasswordPage.passwordsMatch")})]})})]})}),(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsxs)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",rowSpacing:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:10,children:(0,o.jsx)(Fr.Z,{fullWidth:!0,name:"email",control:T,error:!!(null==(h=M.email)?void 0:h.message),label:C("loginPage.email"),helperText:null==(x=M.email)?void 0:x.message,rules:{required:C("validation.required"),validate:e=>!!(0,fg.Z)(e)||C("validation.invalidFormat")}})}),(0,o.jsx)(Q.Z,{item:!0,xs:10,children:(0,o.jsx)(Fr.Z,{fullWidth:!0,name:"password",control:T,type:y?"text":"password",label:C("changeMasterPasswordPage.createMasterPassword"),rules:{required:C("validation.required"),onChange:z,validate:{specialCharacter:e=>(0,eg.qW)(e),digit:e=>(0,tg.GU)(e),upperCaseLetter:e=>(0,rg.fD)(e),lowerCaseLetter:e=>(0,og.dd)(e),minLength:e=>(0,ng.Z)(12,e),passwordsMatch:e=>(0,ag.Z)(V().confirmPassword,e,{caseSensitive:!0})}},InputProps:{endAdornment:(0,o.jsx)(_r.Z,{position:"end",children:(0,o.jsx)(Pe.Z,{edge:"end",onClick:F,children:y?(0,o.jsx)(Re.Z,{}):(0,o.jsx)(We.Z,{})})})}})}),(0,o.jsx)(Q.Z,{item:!0,xs:10,children:(0,o.jsx)(Fr.Z,{fullWidth:!0,name:"confirmPassword",control:T,type:b?"text":"password",label:C("changeMasterPasswordPage.confirmMasterPassword"),onChange:z,InputProps:{endAdornment:(0,o.jsx)(_r.Z,{position:"end",children:(0,o.jsx)(Pe.Z,{edge:"end",onClick:U,children:b?(0,o.jsx)(Re.Z,{}):(0,o.jsx)(We.Z,{})})})}})})]})})]}),(0,o.jsx)(Q.Z,{container:!0,mt:2,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(Q.Z,{item:!0,container:!0,xs:10,children:(0,o.jsx)(Dg.Z,{name:"isPrivacyPolicyAccepted",control:T,label:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(be.ZP,{variant:"subtitle2",children:[C("signUpPage.policies.agreeWith")," "]}),(0,o.jsx)(Zg.Z,{target:"_blank",href:"https://www.uniqkey.eu/terms-of-service",children:(0,o.jsx)(be.ZP,{color:X.B1,variant:"subtitle2",component:"span",children:C("signUpPage.policies.termsOfService")})}),(0,o.jsxs)(be.ZP,{variant:"subtitle2",children:[" ",C("signUpPage.policies.and")," "]}),(0,o.jsx)(Zg.Z,{target:"_blank",href:"https://www.uniqkey.eu/privacy-policy",children:(0,o.jsx)(be.ZP,{color:X.B1,variant:"subtitle2",component:"span",children:C("signUpPage.policies.privacyPolicy")})})]})})})}),(0,o.jsx)(Q.Z,{container:!0,alignItems:"center",justifyContent:"center",mt:2,children:(0,o.jsxs)(Q.Z,{item:!0,container:!0,xs:10,columnSpacing:2,children:[(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{fullWidth:!0,variant:"outlined",onClick:N,children:C("common.back")})}),(0,o.jsx)(Q.Z,{item:!0,xs:6,children:(0,o.jsx)(mt.Z,{disabled:!R,isLoading:w,fullWidth:!0,type:"submit",children:C("common.continue")})})]})})]})]})})};var Lg=Object.defineProperty,Eg=Object.defineProperties,Bg=Object.getOwnPropertyDescriptors,Rg=Object.getOwnPropertySymbols,Wg=Object.prototype.hasOwnProperty,Ng=Object.prototype.propertyIsEnumerable,Fg=(e,t,r)=>t in e?Lg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ug={future:{v7_startTransition:!0}},zg=()=>{return(0,o.jsx)(x.UT,(e=((e,t)=>{for(var r in t||(t={}))Wg.call(t,r)&&Fg(e,r,t[r]);if(Rg)for(var r of Rg(t))Ng.call(t,r)&&Fg(e,r,t[r]);return e})({},Ug),t={children:(0,o.jsxs)(v.Z5,{children:[(0,o.jsx)(v.AW,{path:D.LoginPage,element:(0,o.jsx)(Sg,{})}),(0,o.jsx)(v.AW,{path:`${D.AutoActivatePage}/:email/:password`,element:(0,o.jsx)(kg,{})}),(0,o.jsx)(v.AW,{path:D.WelcomePage,element:(0,o.jsx)(Ig,{})}),(0,o.jsx)(v.AW,{path:D.PairPage,element:(0,o.jsx)(Xp,{titleTranslationKey:"pairPage.pairTitle",descriptionTranslationKey:"pairPage.pairDescription",mode:Bp.Z.Pair,backButtonPath:D.WelcomePage})}),(0,o.jsx)(v.AW,{path:D.EnvironmentPage,element:(0,o.jsx)(Og,{})}),(0,o.jsx)(v.AW,{path:D.SignUpPage,element:(0,o.jsx)(Vg,{})}),(0,o.jsx)(v.AW,{path:"*",element:(0,o.jsx)(v.Fg,{to:D.WelcomePage,replace:!0})})]})},Eg(e,Bg(t))));var e,t},_g=()=>{const{state:e}=Y(),{authStatus:t}=e;return t.isAuthenticated&&t.hasFinishedOnBoarding?(0,o.jsx)(Eu,{}):t.isAuthenticated&&!t.hasFinishedOnBoarding?(0,o.jsx)(Ep,{}):t.isOnBoardingAuthenticated?(0,o.jsx)(wg,{}):(0,o.jsx)(zg,{})},Gg=(0,n.memo)((()=>{const{isPopupWindow:e}=h();return e?(0,o.jsx)(Yu,{}):(0,o.jsx)(_g,{})}));var qg=r(78218),Kg=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const Hg={zIndex:e=>e.zIndex.drawer+1},$g={position:"absolute",bottom:-196,transition:"all 0.5s ease",height:196},Yg=()=>{const[e,t]=(0,n.useState)(!1),[r,a]=(0,n.useState)(null),i=(0,n.useRef)(),{onBrowserMessage:s,sendBrowserMessage:l}=Ct(),{showSuccess:c}=(0,u.Z)(),{t:d}=(0,_.T_)();(0,n.useEffect)((()=>{e?setTimeout((()=>{i.current.style.bottom="0px"}),100):i.current.style.bottom="-196px"}),[e]),(0,n.useEffect)((()=>{const e=s(At.OpenMobileRequestOverlay,(e=>Kg(void 0,null,(function*(){const{payload:r}=e;a(r.queueMessageId),t(!0)})))),r=s(At.CloseMobileRequestOverlay,(()=>Kg(void 0,null,(function*(){t(!1),a(null)}))));return()=>{e(),r()}}),[s]);const p=(0,n.useCallback)((()=>Kg(void 0,null,(function*(){yield l({messageType:At.CancelMobileRequest,payload:{queueMessageId:r}}),c({text:d("toasts.canceled")})}))),[c,r,l,d]);return(0,o.jsxs)(ve.n,{sx:Hg,transitionDuration:100,open:e,children:[(0,o.jsxs)(Q.Z,{container:!0,mt:-10,children:[(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",children:(0,o.jsx)(be.ZP,{align:"center",color:X.S1,variant:"h5",children:d("mobileApproveOverlay.confirm")})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",mt:3,children:(0,o.jsx)(Js.Z,{color:X.S1})}),(0,o.jsx)(Q.Z,{item:!0,container:!0,alignItems:"center",justifyContent:"center",mt:3,children:(0,o.jsx)(mt.Z,{variant:"text",onClick:p,children:(0,o.jsx)(be.ZP,{color:X.S1,variant:"subtitle1",children:d("common.cancel")})})})]}),(0,o.jsx)("div",{ref:i,style:$g,children:(0,o.jsx)(qg.Z,{})})]})};var Qg=r(44760);const Jg={"& .MuiDrawer-paper":{borderTopLeftRadius:16,borderTopRightRadius:16,maxHeight:"85%",overflow:"hidden"}},Xg={backgroundColor:X.i,padding:"16px 24px",position:"sticky",top:0,zIndex:1},em={padding:0},tm={overflow:"auto"},rm={cursorPointer:!0},om={".MuiBox-root":{display:"flex"}},nm={backdrop:ve.n},am=(0,n.memo)((()=>{const[e,t]=(0,n.useState)(!1),{t:r}=(0,_.T_)(),a=(0,n.useCallback)((()=>t(!0)),[]),i=(0,n.useCallback)((()=>t(!1)),[]),{state:s}=Y(),{organizationsById:l,groupsById:c}=s,{keychainOptions:d,selectedKeychain:u}=xe();(0,Qg.Z)(pe.OpenKeychainFilter,a),(0,Qg.Z)(pe.CloseKeychainFilter,i);const p=(0,n.useCallback)((e=>()=>{de().publish(pe.VaultFilterKeychainOptionSelected,e)}),[]),g=(0,n.useMemo)((()=>d.map((e=>{let t=[e.labelKey],n=["",{}];const a=l[e.organizationId],i=c[e.groupId];let s=!1;a&&(t=ss(a)),i&&!i.isPrivateKeychain&&(s=!0,n=is(i,{myVaultsTranslation:R.MY_DATA_TRANSLATION_KEY_ID}));const d=r(...t),g=r(...n),m=(null==e?void 0:e.id)===(null==u?void 0:u.id),h=s?`${d} / ${g}`:d;return(0,o.jsx)(Te.Z,{divider:!0,onClick:p(e),selected:m,children:(0,o.jsxs)(Ot.Z,{tooltipProps:rm,title:h,variant:"subtitle1",noWrap:!0,sx:om,children:[d,s&&(0,o.jsxs)(o.Fragment,{children:[" ",(0,o.jsx)(be.ZP,{variant:"subtitle1",children:"/"})," ",(0,o.jsx)(be.ZP,{noWrap:!0,variant:"body1",children:g})]})]})},e.id)}))),[u,d,l,c,p,r]);return(0,o.jsxs)(ye.Z,{slots:nm,anchor:"bottom",open:e,onClose:i,sx:Jg,children:[(0,o.jsxs)(je.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:Xg,children:[(0,o.jsx)(be.ZP,{variant:"subtitle1",color:X.S1,children:r("keychainFilter.title")}),(0,o.jsx)(Pe.Z,{onClick:i,sx:em,children:(0,o.jsx)(we.Z,{color:X.S1})})]}),(0,o.jsx)(fe.Z,{disablePadding:!0,sx:tm,children:g})]})})),im={background:rt},sm=(0,n.forwardRef)(((e,t)=>{const{icon:r,titleText:n,buttonText:a,onButtonClick:i}=e;return(0,o.jsx)(Q.Z,{ref:t,container:!0,justifyContent:"center",alignItems:"center",className:"min-height-100vh",sx:im,children:(0,o.jsxs)(Q.Z,{container:!0,flexDirection:"column",alignItems:"center",position:"relative",children:[(0,o.jsx)(Q.Z,{container:!0,item:!0,justifyContent:"center",alignItems:"center",bgcolor:X.S1,width:168,height:168,borderRadius:"50%",children:r}),(0,o.jsxs)(Q.Z,{container:!0,item:!0,flexDirection:"column",alignItems:"center",position:"absolute",top:168,children:[(0,o.jsx)(Q.Z,{item:!0,mt:8,children:(0,o.jsx)(be.ZP,{variant:"h6",color:X.S5,children:n})}),(0,o.jsx)(p.Z,{condition:!!i,children:(0,o.jsx)(Q.Z,{item:!0,mt:3,children:(0,o.jsx)(mt.Z,{onClick:i,children:a})})})]})]})})})),lm=(0,n.memo)(sm);const cm=(0,o.jsx)(we.Z,{width:126,height:127,color:X.iP}),dm=()=>{const{t:e}=(0,_.T_)(),{sendBrowserMessage:t}=Ct(),r=(0,n.useCallback)((()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{yield t({messageType:At.RebuildApplicationState})}catch(e){wr(e,{message:"NoConnectionPage/handleRetryClick exception"})}}))),[t]);return(0,o.jsx)(lm,{icon:cm,titleText:e("device.healthStatus.noResponse"),buttonText:e("common.retry"),onButtonClick:r})},um=()=>{const{sendBrowserMessage:e}=Ct(),{state:t}=Y(),{isAuthenticated:r}=t.authStatus,{isLoading:o,refetch:a}=(0,s.useQuery)(Ir.GetActiveTabUrlInfo,(()=>e({messageType:At.GetActiveTabUrlInfo})));return(0,s.useQuery)(Ir.Ping,(()=>e({messageType:At.Ping,payload:{date:new Date}})),{refetchInterval:An.Z.FiveSeconds,cacheTime:0}),(0,n.useEffect)((()=>{a()}),[a,r]),o};var pm=r(33704);const gm={background:rt,position:"absolute",top:0},mm={enter:100,exit:300},hm={transitionTimingFunction:"ease-in"},xm=(0,n.memo)((e=>{const{isLoading:t}=e,{isPopupWindow:r}=h();return(0,o.jsx)(pm.Z,{in:t,timeout:mm,appear:!1,style:hm,children:(0,o.jsx)(Q.Z,{container:!0,justifyContent:"center",alignItems:"center",className:"min-height-100vh",sx:gm,children:(0,o.jsxs)(Q.Z,{container:!0,flexDirection:"column",alignItems:"center",position:"relative",children:[(0,o.jsx)(Q.Z,{container:!0,item:!0,justifyContent:"center",alignItems:"center",children:(0,o.jsx)(qe.Z,{size:r?72:108})}),(0,o.jsx)(Q.Z,{container:!0,item:!0,flexDirection:"column",alignItems:"center",position:"absolute",top:168})]})})})}));var vm=r(27066),ym=r(30090);class jm extends ym.TransifexI18next{constructor(e){super(e),this.cachePrefix=e.cachePrefix,this.fallbackTranslations=e.fallbackTranslations}readFromExtensionCache(e){return Pu({messageType:At.GetCachedItem,payload:{key:Tm(this.cachePrefix,e),useTabId:!1}})}readFromTransifex(e,t){return this.tx.fetchTranslations(e).then((()=>{t(null,this._convertPlurals(this.tx.cache.getTranslations(e)))})).catch((()=>{t(null,this._convertPlurals(this.fallbackTranslations))}))}read(e,t,r){this.readFromExtensionCache(e).then((t=>{t?r(null,this._convertPlurals(t)):this.readFromTransifex(e,r)})).catch((t=>{wr(t,{message:"readFromExtensionCache exception"}),this.readFromTransifex(e,r)}))}}var bm=Object.defineProperty,Pm=Object.getOwnPropertySymbols,wm=Object.prototype.hasOwnProperty,fm=Object.prototype.propertyIsEnumerable,Cm=(e,t,r)=>t in e?bm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Sm=(e,t)=>{for(var r in t||(t={}))wm.call(t,r)&&Cm(e,r,t[r]);if(Pm)for(var r of Pm(t))fm.call(t,r)&&Cm(e,r,t[r]);return e};class Zm{constructor(e){this.cachePrefix=e,this.translationsByLocale={}}update(e,t){const r=this.translationsByLocale[e]||{},o=Sm(Sm({},r),t);this.translationsByLocale[e]=o,Pu({messageType:At.CacheItem,payload:{key:Tm(this.cachePrefix,e),item:o,time:An.Z.ThreeMinutes}})}getTranslations(e){return this.translationsByLocale[e]||{}}hasTranslations(e){return!!this.translationsByLocale[e]}isStale(e){return!this.hasTranslations(e)}get(e,t){return this.getTranslations(t)[e]||""}}var Im=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));let km=null;const Tm=(e,t)=>`${e}_${t}`;var Am=(e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}));const Mm=()=>{const[e,t]=(0,n.useState)(!1),[r,o]=(0,n.useState)(!1),{setLanguage:a,currentLanguage:i}=(0,_.T_)(),{isLoading:s,state:l}=Y(),c=(0,n.useCallback)((()=>Am(void 0,null,(function*(){try{if(s)return;l.deviceLanguage!==i&&(yield a(l.deviceLanguage)),t(!0)}catch(e){wr(e,{message:"useTransifexBootstrap/handleLanguageChange exception"})}}))),[a,s,i,l.deviceLanguage]),d=(0,n.useCallback)((()=>Am(void 0,null,(function*(){yield Im(void 0,null,(function*(){return km})),o(!0)}))),[]);return(0,n.useEffect)((()=>{d()}),[d]),(0,n.useEffect)((()=>{c()}),[c]),{isLoading:!r||!e}};r(2058),r(33424),r(68836),r(65821),r(91887),(0,d.wB)();const Om={className:"variant-popup",position:"top-center"},Dm=()=>{const{getSnackbar:e}=(0,u.Z)(),{isPopupWindow:t}=h(),r=(0,s.useQueryClient)(),{state:a,prevState:i,isLoading:l}=Y(),{isLoading:c}=Mm(),d=um(),g=l||d||c,{isExtensionApiServiceHealthy:m,authStatus:x}=a,{user:v}=x;return(0,n.useEffect)((()=>{(null==v?void 0:v.userId)&&Pr({id:v.userId})}),[v]),(0,n.useEffect)((()=>{!a.authStatus.isAuthenticated&&i.authStatus.isAuthenticated&&r.clear()}),[a.authStatus.isAuthenticated,i.authStatus.isAuthenticated,r]),m?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.Z,{condition:!g,children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Gg,{}),(0,o.jsx)(Yg,{}),(0,o.jsx)(am,{}),e(t?Om:{})]})}),(0,o.jsx)(xm,{isLoading:g})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(dm,{}),(0,o.jsx)(xm,{isLoading:g})]})};var Vm=Object.defineProperty,Lm=Object.defineProperties,Em=Object.getOwnPropertyDescriptors,Bm=Object.getOwnPropertySymbols,Rm=Object.prototype.hasOwnProperty,Wm=Object.prototype.propertyIsEnumerable,Nm=(e,t,r)=>t in e?Vm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fm=(e,t)=>{for(var r in t||(t={}))Rm.call(t,r)&&Nm(e,r,t[r]);if(Bm)for(var r of Bm(t))Wm.call(t,r)&&Nm(e,r,t[r]);return e},Um=(e,t)=>Lm(e,Em(t));let zm={};const _m=({children:e})=>{const{isPopupWindow:t}=h();(0,n.useEffect)((()=>wu(((e,r)=>{const{popupOnly:o}=e;if(o&&!t)return;const n=zm[e.messageType];n&&n.forEach((t=>{t(e,r)}))}))),[t]);const r=(0,n.useCallback)(((e,t)=>{const r=zm[e]||new Set;if(!r.has(t)){const o=new Set(r).add(t);zm=Um(Fm({},zm),{[e]:o})}return()=>{const o=new Set(r);o.delete(t),zm=Um(Fm({},zm),{[e]:o})}}),[]),a=(0,n.useMemo)((()=>({sendBrowserMessage:Pu,onBrowserMessage:r})),[r]);return(0,o.jsx)(ft.Provider,{value:a,children:e})},Gm=e=>{const{children:t}=e,[r,a]=(0,n.useState)(null),i=(0,n.useMemo)((()=>({loginCachedInformation:r,setLoginCachedInformation:a})),[r,a]);return(0,o.jsx)(Up.Provider,{value:i,children:t})};var qm=r(7387);const Km=e=>{const{children:t}=e,{sendBrowserMessage:r,onBrowserMessage:a}=Ct(),{data:i,isLoading:l,refetch:c}=(0,s.useQuery)(Ir.GetApplicationState,(()=>r({messageType:At.GetApplicationState}))),d=(0,qm.Z)(i);(0,n.useEffect)((()=>{a(At.ApplicationStateUpdated,(()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){c()}))))}),[a,c]);const u=(0,n.useMemo)((()=>{const e=i||(0,G.cloneDeep)(q);return{state:e,prevState:d||(0,G.cloneDeep)(q),isLoading:l||e.isLoading}}),[i,l,d]);return(0,o.jsx)($.Provider,{value:u,children:t})};const Hm={id:E.ID,groupId:null,organizationId:null,labelKey:E.TRANSLATION_KEY},$m={id:B.ID,groupId:null,organizationId:null,labelKey:B.TRANSLATION_KEY},Ym=e=>{const{children:t}=e,[r,a]=(0,n.useState)(""),[i,l]=(0,n.useState)((()=>Hm)),{sendBrowserMessage:c,onBrowserMessage:d}=Ct(),{showError:p}=(0,u.Z)(),{t:g}=(0,_.T_)(),{state:m}=Y(),h=(0,n.useCallback)(((e,t)=>{l(t),de().publish(pe.CloseKeychainFilter)}),[]),x=(0,n.useCallback)(((e,t)=>{a(t)}),[]);(0,Qg.Z)(pe.VaultFilterKeychainOptionSelected,h),(0,Qg.Z)(pe.VaultFilterSearchChanged,x);const{orderedGroupsGroupedByOrganizationWithoutSharedGroups:v,orderedOrganizationsIdsWithPrivateKeychainInBottom:y}=m,j=(0,n.useMemo)((()=>{const e=y.reduce(((e,t)=>[...e,...v[t].map((e=>({organizationId:t,groupId:e.groupId,id:[t,e.groupId].join()})))]),[]);return[Hm,...e,$m]}),[v,y]),b=i.id!==E.ID,P=!!r,w=b||P,{data:f,isLoading:C,refetch:S}=(0,s.useQuery)([Ir.FilterApplicationState,r,i.organizationId,i.groupId,i.id===B.ID],(()=>c({messageType:At.GetFilteredApplicationStateByQueryString,payload:{searchQuery:r,organizationId:i.organizationId,groupId:i.groupId,sharedOnly:i.id===B.ID}})),{enabled:w});(0,n.useEffect)((()=>{d(At.ApplicationStateUpdated,(()=>((e,t,r)=>new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())})))(void 0,null,(function*(){try{yield S()}catch(e){wr(e,{message:"error while refetching filter vaults query"})}}))))}),[d,S]),(0,n.useEffect)((()=>{j.some((e=>(null==e?void 0:e.id)===(null==i?void 0:i.id)))||(l(Hm),p({text:g("toasts.accessHasBeenRevoked")}))}),[i,j,g,p]);const Z=(0,n.useMemo)((()=>({searchQuery:r,filteredState:f,isFilterActive:w,keychainOptions:j,selectedKeychain:i,isFilteringLoading:C,isSearchFilterActive:P,isKeychainFilterActive:b})),[r,f,w,j,i,C,P,b]);return(0,o.jsx)(he.Provider,{value:Z,children:t})},Qm=JSON.parse('{"autocomplete.loading":"Loading...","autocomplete.noOptions":"No options","autocomplete.typeToSelect":"Type to select","browserSettingsPage.eraseCookiesDescription":"Cookies are often used to keep you logged into sites. You should clear these and use Uniqkey to login securely.","browserSettingsPage.eraseCookiesTitle":"Delete cookies","browserSettingsPage.eraseLoginsDescription":"You should never save logins in your browser. After you have imported your logins to Uniqkey, you can remove those saved in your browser by clicking \\"Remove\\".","browserSettingsPage.eraseLoginsTitle":"Delete logins from browser","browserSettingsPage.hideWarningDescription":"You can hide the warning if you\'re confident that your current browser is secure enough to keep your saved logins protected.","browserSettingsPage.hideWarningTitle":"Hide warning","browserSettingsPage.settingUpdatedSuccess":"Browser settings updated","browserSettingsPage.stopStorageDescription":"This setting disables the automatic storing of login credentials in your browser. Uniqkey will instead store your logins safely in the mobile app. We recommend turning this on.","browserSettingsPage.stopStorageTitle":"Stop automatic login storing","browserSettingsPage.title":"Edit settings","changeMasterPasswordPage.confirmMasterPassword":"Confirm your Master Password","changeMasterPasswordPage.createMasterPassword":"Create your Master Password","changeMasterPasswordPage.description":"Your Master Password is the key to all your passwords. It is critical for your security that you remember it. ","changeMasterPasswordPage.includeMinimumDigits":"Minimum 12 characters","changeMasterPasswordPage.includeNumbers":"Include numbers","changeMasterPasswordPage.includeSymbols":"Include symbols","changeMasterPasswordPage.includeUppercaseLetters":"Use upper and lower case letters","changeMasterPasswordPage.passwordsMatch":"Passwords match","changeMasterPasswordPage.title":"Create your Master Password","changeMasterPasswordPage.validationAreaDescription":"Follow these rules to create a strong and unique Master Password:","common.back":"Back","common.cancel":"Cancel","common.clearAll":"Clear all","common.click":"Click","common.close":"Close","common.column":"Column {{index}}","common.confirm":"Confirm","common.continue":"Continue","common.copied":"Copied","common.copiedToClipboard":"Copied to clipboard","common.copy":"Copy","common.create":"Create","common.created":"Created","common.hours":"Hours","common.launch":"Launch","common.logout":"Log out","common.minutes":"Minutes","common.move":"Move","common.myData":"My data","common.myLogins":"My logins","common.myCreditCards":"My cards","common.mySecureNotes":"My notes","common.no":"No","common.noAccessToItem":"Your access to the item has been revoked.","common.noResults":"No results found","common.ok":"Ok","common.openMobileApp":"Open Uniqkey on your phone to process the action","common.organization":"Organization","common.pair":"Pair with mobile app","common.privateKeychain":"Private","common.readLess":"Read less","common.readMore":"Read more","common.remove":"Remove","common.request":"Send request","common.save":"Save","common.savedIn":"Saved in","common.saveIn":"Save in","common.search":"Search","common.select":"Select","common.share":"Share","common.sharedBy":"Shared by {{name}}","common.skip":"Skip","common.somethingWentWrong":"Oops! Something went wrong","common.termsAndConditions":"Terms And Conditions","common.update":"Update","common.updated":"Updated","common.viewAll":"View all","common.yes":"Yes","common.month":"Month","common.year":"Year","common.tryAgain":"Try again","common.retry":"Retry","actionDrawer.title":"Options:","actionDrawer.deleteVault":"Delete","actionDrawer.editVault":"Edit","actionDrawer.shareVault":"Share","actionDrawer.moveVault":"Move","congratulationsPage.bottomDescription":"Continue your onboarding by importing your logins.","congratulationsPage.dontShowAgain":"Don’t show me this again","congratulationsPage.goToExtension":"Go to extension","congratulationsPage.importLogins":"Import logins","congratulationsPage.subtitle":"Your browser extension is now paired with your phone.","congratulationsPage.title":"There we go!","createPasswordPage.title":"Create login","createSecureNotePage.title":"Create secure note","createCreditCardPage.title":"Create payment card","createUpdateSecureNoteVaultForm.nameLabel":"Name","createUpdateSecureNoteVaultForm.secureNote":"Secure note","createUpdatePasswordVaultForm.additionalInfoLabel":"Additional info","createUpdatePasswordVaultForm.desktopLabel":"Desktop app","createUpdatePasswordVaultForm.desktopPlaceholder":"Desktop app","createUpdatePasswordVaultForm.nameLabel":"Login name","createUpdatePasswordVaultForm.passwordLabel":"Password","createUpdatePasswordVaultForm.urlLabel":"Web address","createUpdatePasswordVaultForm.usernameLabel":"Email/username","createUpdatePasswordVaultForm.websiteLabel":"Website","createUpdatePasswordVaultForm.websitePlaceholder":"Enter website","createUpdateCreditCardVaultForm.name.label":"Card name","createUpdateCreditCardVaultForm.name.placeholder":"Enter card name","createUpdateCreditCardVaultForm.cardHolderName.label":"Cardholder name","createUpdateCreditCardVaultForm.cardHolderName.placeholder":"Enter cardholder name","createUpdateCreditCardVaultForm.cardNumber.label":"Card number","createUpdateCreditCardVaultForm.cardNumber.placeholder":"Enter card number","createUpdateCreditCardVaultForm.expiryDate.label":"Expiration date","createUpdateCreditCardVaultForm.expiryDate.placeholder":"Enter expiration date","createUpdateCreditCardVaultForm.cvv.label":"Security code","createUpdateCreditCardVaultForm.cvv.placeholder":"Enter security code","createUpdateCreditCardVaultForm.securityProtected":"Security protected by Uniqkey","desktopArchivePasswordModal.description":"The logins we found in your browser have been archived and safely stored in a file on your computer. Copy and save this code to decrypt the content of the file.","desktopArchivePasswordModal.title":"Decryption code","desktopArchivePasswordModal.warning":"If you lose or forget the code, it cannot be recovered.","DNDArea.chooseFile":"Choose a file","DNDArea.dropFileHere":"Drop here","DNDArea.fileIsEmpty":"CSV file contains no logins to import. Please check the file and try again.","DNDArea.oneFileIsSupported":"Only one file is supported","DNDArea.oneSCVFileIsSupported":"Invalid format. Please select CSV file","DNDArea.orDragAndDrop":"or drag and drop it.","DNDArea.parsedEmails":"Parsed emails:","DNDArea.readFileError":"Error while reading a file","editUserProfileModal.nameFieldLabel":"User name","editUserProfileModal.title":"Change your name","exportToCSVPage.description":"Here you can export your logins from both your private and company keychain to a CSV file.","exportToCSVPage.export":"Export","exportToCSVPage.exportAll":"Export all","exportToCSVPage.exportNotAllowedInGroup":"Export is not allowed for this group. Contact your administrator if you want this to change.","exportToCSVPage.exportNotAllowedInOrg":"Your organization doesn\'t allow you to export logins from your company keychain. If you need to export your work logins, contact your administrator.","exportToCSVPage.loginsExported":"Logins have been exported","exportToCSVPage.privateLogins":"Private logins","exportToCSVPage.title":"Export logins to CSV","filters.apply":"Apply","homePage.tabs.creditCards":"Payments","homePage.tabs.logins":"Logins","homePage.tabs.secureNotes":"Secure notes","importFromCsvPage.removeDuplicatesLabel":"Remove duplicates from file","importFromCsvPage.skipImportingForNow":"Skip importing for now","importFromCsvPage.subtitle":"Importing your passwords from a CSV file to Uniqkey is easy. Simply export your logins from your browser or current password manager and drop the CSV file into the field below.","importFromCsvPage.title":"Import logins from CSV file","importHistoryPage.createdAtColumn":"Create","importHistoryPage.createdColumn":"Created","importHistoryPage.failedColumn":"Failed","importHistoryPage.keychainColumn":"Keychain","importHistoryPage.loginsColumn":"Logins","importHistoryPage.progressColumn":"Progress","importHistoryPage.statusColumn":"Status","importHistoryPage.statuses.Canceled":"Canceled","importHistoryPage.statuses.Completed":"Completed","importHistoryPage.statuses.Failed":"Failed","importHistoryPage.statuses.InProgress":"In progress","importHistoryPage.statuses.New":"New","importHistoryPage.subtitle":"Here you can track the progress of your imported logins and see your full import history. Open Uniqkey on your phone to start importing your logins.","importHistoryPage.title":"Track progress of imported logins","importHistoryPage.updatedColumn":"Updated","importMappingPage.additionalInfoLabel":"Additional info","importMappingPage.exampleColumn":"Example","importMappingPage.headerFromCSVColumn":"CSV file headers","importMappingPage.loginLabel":"Username","importMappingPage.mappedColumn":"Mapped fields","importMappingPage.nameLabel":"Name","importMappingPage.noneLabel":"None","importMappingPage.passwordLabel":"Password","importMappingPage.requiredFieldIsEmpty":"Import failed. Web address, Login name, Username, Password must not be blank. Remove empty rows from the table to continue.","importMappingPage.selectPlaceholder":"Select mapping","importMappingPage.subtitle":"Your file has been auto-mapped to our default input fields. You can edit the mapping if you wish. Unmapped fields will not be imported.","importMappingPage.title":"Edit fields mapping","importMappingPage.totpLabel":"2FA verification","importMappingPage.webAddressLabel":"Web address","importPasswordsFromDesktop.noLoginsFound":"Password Importer has not found any logins. Use the field below to manually import logins using a CSV file","importResultsPage.2fa":"2FA","importResultsPage.additionalInfoColumn":"Additional info","importResultsPage.allLoginsTooltip":"This is a list of all the logins we discovered in your browsers or CSV files including logins with errors and duplicated.","importResultsPage.alreadyExistInUniqkeyAccount":"This login already exists in your account","importResultsPage.autocompleteLabel":"Filter by username","importResultsPage.delete.active":"Delete logins from import","importResultsPage.delete.button":"Delete","importResultsPage.delete.disabled":"You need to select rows first","importResultsPage.deletePrompt.body":"You have chosen to remove {{count}} login(s). These logins will not be added to Uniqkey after importing.","importResultsPage.deletePrompt.column":"Column {{index}}","importResultsPage.deletePrompt.successAlert":"{{count}} login(s) have been removed","importResultsPage.deletePrompt.title":"You are about to delete {{count}} login(s)","importResultsPage.duplicatedLoginsTooltip":"These logins are already saved in your Uniqkey account. Please, check all and click “Remove” to skip them importing. If you leave them - the logins will be duplicated.","importResultsPage.errorLoginsTooltip":"These logins cannot be imported. Please, fix the errors or check all and click “Remove” to skip them importing.","importResultsPage.groupSelectorModal.title":"Select where to save your logins","importResultsPage.importButton":"Import logins","importResultsPage.nameColumn":"Login name","importResultsPage.passwordColumn":"Password","importResultsPage.requiredLoginName":"Required login name. Click to edit","importResultsPage.save.active":"Select where to save your logins","importResultsPage.save.disabled":"You need to select rows first","importResultsPage.saveIn":"Save in","importResultsPage.subtitle.part-1":"We\'ve tried matching your logins to the appropriate keychain. To make sure your logins are saved in the correct place, double-check the list. Use the dropdown to choose where you save each login.","importResultsPage.subtitle.part-2":"Important: All your logins will be added to Uniqkey. If you want to add specific ones only, you need to remove the rest.","importResultsPage.tabs.all":"All logins","importResultsPage.tabs.duplicated":"Duplicated logins","importResultsPage.tabs.errors":"Logins with errors","importResultsPage.title":"We found these logins","importResultsPage.updateLoginModal.title":"Update login","importResultsPage.usernameColumn":"Username","importResultsPage.validation.missingValue":"missing value","importResultsPage.validation.requiredToBePopulated":"Needs to be filled","importResultsPage.webAddressColumn":"Web address","installDesktopPage.bottomDescription":"Once the Password Importer has been installed, you will be redirected to the list of logins","installDesktopPage.connectionFailedError":"Remember to open and install the importer","installDesktopPage.installDesktopApp":"Download the Password Importer","installDesktopPage.noBrowserSavedPasswords":"I don\'t have any browser-saved passwords","installDesktopPage.stepperWidget.clickToInstall":"Download importer","installDesktopPage.stepperWidget.connectedToDesktopApp":"Connected","installDesktopPage.stepperWidget.connectingToDesktopApp":"Connecting to importer","installDesktopPage.stepperWidget.connectionFailedToDesktopApp":"Connection failed","installDesktopPage.stepperWidget.connectToDesktopApp":"Wait for extension to connect","installDesktopPage.subtitle":"You need the Password Importer to detect and import logins from all your browser. However, we couldn\'t find it on your computer. Click the button below to install it.","installDesktopPage.title":"Install Password Importer","keychainFilter.options.all":"All","keychainFilter.options.shared":"Shared","keychainFilter.title":"Filter by:","createVault.title":"Add new:","createVault.login":"Login","createVault.creditCard":"Payment card","createVault.secureNote":"Secure note","linkedServices.desktopApplications.title":"Linked desktop apps","linkedServices.domainRules.title":"Linked websites","linkedServices.subtitle":"{{totalCount}} other websites and apps","linkedServices.title":"Works with:","loginPage.activateAccount":"Activate account","loginPage.activationCode":"Activation code","loginPage.description":"We have sent an activation code to your email. Please click link in the email or enter your email and activation code manually below.","loginPage.email":"Email","loginPage.login":"Login","loginPage.loginHere":"Login here","loginPage.usernameOrEmailIsIncorrect":"Wrong email or activation code.","loginsTab.createFirstPasswordText":"No logins found.\\n Press \\"+\\" to add your first login","creditCardsTab.createFirstCreditCardText":"No payment cards to display.\\n Press \\"+\\" to add your first card","creditCardsTab.viewCreditCardError":"Viewing the card is not allowed in the group","menuPage.adminPortalMenuItem":"Admin Portal","menuPage.browserSettingMenuItem":"Settings","menuPage.disabledSitesMenuItem":"Disabled sites","menuPage.exportLoginsMenuItem":"Export logins to CSV","menuPage.helpAndSupportMenuItem":"Get help and support","menuPage.importHistoryMenuItem":"Import history","menuPage.importLoginsMenuItem":"Import logins","menuPage.passwordGeneratorMenuItem":"Password generator","menuPage.reportSiteMenuItem":"Report site","menuPage.sharingCenterMenuItem":"Sharing center","menuPage.title":"Menu","menuPage.trustBrowserMenuItem":"Trust browser","menuPage.changeLanguageMenuItem":"Change language","mobileApproveOverlay.confirm":"Open Uniqkey on your phone to confirm","moveVaultPage.login.description":"Below, you can select the organization or group you want to move the logins to. Note that once moved, the organization will have full control of your logins. ","moveVaultPage.secureNote.description":"Below, you can select the organization or group you want to move the secure notes to. Note that once moved, the organization will have full control of your notes. ","moveVaultPage.creditCard.description":"Below, you can select the organization or group you want to move the credit cards to. Note that once moved, the organization will have full control of your cards. ","moveVaultPage.login.descriptionGroup":"Below, you can select the group you want to move the login to. Note that once moved, the group will have full control of your login.","moveVaultPage.secureNote.descriptionGroup":"Below, you can select the group you want to move the secure note to. Note that once moved, the group will have full control of your secure note.","moveVaultPage.creditCard.descriptionGroup":"Below, you can select the group you want to move the credit card to. Note that once moved, the group will have full control of your credit card.","moveVaultPage.title":"Move to organization","moveVaultPage.titleGroup":"Move to group","moveVaultPage.selectGroup":"Select group","navigation.organizations":"Organizations","onboardingBrowserSettingsPage.settings.enableAllLabel":"Enable all","onboardingBrowserSettingsPage.settings.eraseAllLoginsDescription":"This settings deletes all login credentials currently stored in your browser","onboardingBrowserSettingsPage.settings.eraseAllLoginsLabel":"Delete All Login Credentials","onboardingBrowserSettingsPage.settings.eraseCookiesDescription":"This setting deletes all cookies from your browser","onboardingBrowserSettingsPage.settings.eraseCookiesLabel":"Delete Cookies","onboardingBrowserSettingsPage.settings.stopLoginsStoringDescription":"This setting disables the automatic storing of login credentials in your browser. Uniqkey will instead store your logins safely on your phone. We recommend turning this on.","onboardingBrowserSettingsPage.settings.stopLoginsStoringLabel":"Stop automatic login storing","onboardingBrowserSettingsPage.subtitle":"Enable individual settings for the Uniqkey browser extension\\nor press “Enable all” to follow our security recommendations.","onboardingBrowserSettingsPage.title":"Edit Settings","pairPage.doNotHaveMobileAppDescription":"Missing the Uniqkey mobile app?","pairPage.enterCodeManually":"Or enter the code manually:","pairPage.generateCode":"Generate code","pairPage.installMobileAppModal.description":"Or type \\"Uniqkey 2.0\\" in Apple or Play store","pairPage.installMobileAppModal.title":"Scan QR code to download the Uniqkey mobile app","pairPage.installUniqkey":"Install Uniqkey","pairPage.loginAndPairDescription":"Choose the option which you want to use for the first pairing with the mobile app. After scanning the QR code or entering the manual code - you will be signed into extension automatically","pairPage.loginAndPairTitle":"Scan the QR-code with the Uniqkey 2.0 mobile app","pairPage.orEnterCode":"Or enter the 6-digit code generated on mobile app","pairPage.pair":"Pair","pairPage.pairButtonDisabled":"You must enter a 6-digit code from the mobile app","pairPage.pairDescription":"Use your Uniqkey mobile app to scan the QR code below.","pairPage.pairTitle":"Pair browser with mobile app","pairPage.scanningResultDescription":"Use Uniqkey mobile app to scan QR code","pairPage.typeCode":"Type 6-digit code","pairPage.validationError.codeAlreadyUsed":"Pairing code has already been used. Try another code","common.signUp":"Sign up","passwordGenerator.generate":"Generate","passwordGenerator.generateUppercased":"Generate","passwordGenerator.lettersCheckboxLabel":"A-Z","passwordGenerator.numberOfCharactersText":"Number of characters","passwordGenerator.numbersCheckboxLabel":"0-9","passwordGenerator.specialCharactersCheckboxLabel":"@!#","passwordGeneratorPage.description":"Simply adjust the settings below to generate a strong and unique password of your liking. We recommend using passwords with a minimum of 20 characters.","passwordGeneratorPage.title":"Password generator","passwordStrength.medium":"Medium password","passwordStrength.strong":"Strong password","passwordStrength.veryStrong":"Very strong password","passwordStrength.veryWeak":"Very weak password","passwordStrength.weak":"Weak password","reportSitePage.other":"Other (elaborate in \\"Additional info\\")","reportSitePage.additionalInfo":"Additional info","reportSitePage.button":"Send","reportSitePage.cannotInputGeneratedPassword":"I can\'t insert generated password","reportSitePage.description":"Experiencing trouble with a website? Select your issue from the dropdown below, and we\'ll be right on it!","reportSitePage.didNotOfferToSaveMyAccount":"Did not offer to save my login credentials","reportSitePage.doesNotLogMeInAutomatically":"I\'m not automatically logged in","reportSitePage.greyedOutUniqkeyLogos":"It shows grey Uniqkey logos","reportSitePage.incorrectInformationInForm":"Incorrect information in form","reportSitePage.irrelevantPasswordSavePopup":"Irrelevant login save popup","reportSitePage.noPasswordGeneratorDropdown":"No password generator popup","reportSitePage.noUniqkeyLogoOnThisField":"No Uniqkey logo on login field","reportSitePage.noUniqkeyLogoOnThisPage":"No Uniqkey logo on this page","reportSitePage.selectIssueType":"Select issue type","reportSitePage.title":"Report site","reportSitePage.webAddress":"Web address","reportSitePage.missingLogo":"Missing Uniqkey logo","reportSitePage.doesNotInsertUsernameOrPassword":"Does not insert username/password","reportSitePage.doesNotOfferToSaveMyAccount":"Does not offer to save my account","reportSitePage.doesNotLoginAutomatically":"Does not log me in automatically","reportSitePage.doesNotInsertGeneratedPassword":"Does not insert generated password","reportSitePage.doesNotInsert2fa":"Does not insert 2FA/MFA","restrictions.ipAddress":"IP address","restrictions.location":"Geolocation","restrictions.restrictedByTooltip":"Restricted by {{restrictionsText}}","restrictions.restrictionsSetByLabel":"Restriction set by {{organizationName}}:","restrictions.time":"Time of day","secureNotesTab.createFirstSecureNoteText":"No saved notes found.\\n Press \\"+\\" to add your first note","secureNotesTab.viewSecureNoteError":"Viewing the note is not allowed in the group","securityScore.medium":"Medium password","securityScore.strong":"Strong password","securityScore.veryStrong":"Very strong password","securityScore.veryWeak":"Very weak password","securityScore.weak":"Weak password","shareVaultPage.title":"Share {{vaultName}}","shareVaultPage.setTimeLimit":"Set time limit","shareVaultPage.employeeSelector.label":"Select user","shareVaultPage.sharingPermission.title":"Sharing permissions","shareVaultPage.sharingPermission.full.title":"Full permission","shareVaultPage.sharingPermission.full.login.description":"A user with full permission can use, view and copy the login, but not edit it.","shareVaultPage.sharingPermission.full.secureNote.description":"A user with full permission can use, view and copy the secure note, but not edit it.","shareVaultPage.sharingPermission.full.creditCard.description":"A user with full permission can use, view and copy the card, but not edit it.","shareVaultPage.sharingPermission.limited.title":"Limited permission","shareVaultPage.sharingPermission.limited.login.description":"The limited permission allows a user to use the login without being able to view, copy or edit the login details.","shareVaultPage.sharingPermission.limited.creditCard.description":"The limited permission allows a user to use the payment card without being able to view, copy or edit the card details.","shareVaultPage.login.sharingSuccessAlert":"Login has been shared","shareVaultPage.login.ifThisIsLeftUnticked":"If you don\'t set a time limit, the login will be shared until you revoke it","shareVaultPage.secureNote.sharingSuccessAlert":"Secure note has been shared","shareVaultPage.secureNote.ifThisIsLeftUnticked":"If you don\'t set a time limit, the secure note will be shared until you revoke it.","shareVaultPage.creditCard.sharingSuccessAlert":"Credit card has been shared","shareVaultPage.creditCard.ifThisIsLeftUnticked":"If you don\'t set a time limit, the credit card will be shared until you revoke it.","sharingCenterPage.full":"Full","sharingCenterPage.limited":"Limited","sharingCenterPage.permission":"Permission:","sharingCenterPage.revokeAccess":"Revoke access","sharingCenterPage.tabs.by":"Shared by","sharingCenterPage.tabs.with":"Shared with","sharingCenterPage.title":"Sharing center","signInToMobilePage.bottomDescription":"Sign in to your Uniqkey mobile app using your email and Master Password.","signInToMobilePage.description":"To keep you secure, Uniqkey does not store your Master Password in the browser. ","signInToMobilePage.title":"Sign in to your Uniqkey mobile app","toasts.accessHasBeenRevoked":"Access has been revoked","toasts.approved":"Approved","toasts.canceled":"Canceled","toasts.importLoginsWithErrors":"Logins with errors cannot be imported. Please fix the errors or remove them to continue.","toasts.invalidCode":"Invalid code","toasts.passwordHasBeenDeleted":"Login has been deleted","toasts.passwordHasBeenUpdated":"Login has been updated","toasts.creditCardHasBeenDeleted":"Payment card has been removed","toasts.profileUpdatedMessage":"Name has been updated","toasts.rejectedOnMobile":"Rejected on mobile","toasts.mobileRequestTimeOut":"The request timed out. No response from the mobile app","toasts.secureNoteHasBeenDeleted":"Secure note has been deleted","toasts.secureNoteHasBeenUpdated":"Secure note has been updated","toasts.somethingWentWrong":"Oops! Something went wrong","toasts.thanksForHelpingUs":"Thanks for reporting your issue. We\'ll pass it on to our developers immediately, so we can fix it.","toasts.vaultIsRestricted":"Access is restricted by group settings","toasts.paymentCardHasBeenUpdated":"Payment card has been updated","toasts.vaultAccessRestrictedByIp":"Access is restricted by IP address","toasts.vaultAccessRestrictedByTime":"Access is restricted by time of day","toasts.vaultAccessRestrictedByLocation":"Access is restricted by location","toasts.groupAccessTaken":"The group access has been taken","toasts.tooManyItems":"Limit on the number of deleted items. Please select less then 500 items","trustedBrowserPage.description":"Trusted Browser saves your logins in the browser, so you can log in without approving on your phone. This login method dramatically reduces your security.","trustedBrowserPage.limitedAccessDescription":"Your organization has limited this feature","trustedBrowserPage.restrictedByGroupsTooltip":"{{organizationName}} has enabled this feature, but not for all groups you are part of. The items in such groups will not be saved in the browser.","trustedBrowserPage.restrictedByOrganizationTooltip":"{{organizationName}} has not enabled this feature","trustedBrowserPage.title":"Trusted Browser","trustedBrowserPage.trustedBrowserActivated":"Secure data have been saved in your browser","trustedBrowserPage.trustOnLoginDescription":"When you enable this setting, Trusted Browser will be activated after your first login of the day.","trustedBrowserPage.trustOnLoginLabel":"Trust browser on initial login","unsavedChangesModal.content":"This page contains unsaved changes. Do you still wish to leave the page?","unsavedChangesModal.title":"Unsaved changes","userProfile.emptyNamePlaceholder":"Change your name","validation.invalidFormat":"Invalid format","validation.invalidCardNumber":"Invalid card number","validation.invalidSpaces":"Must not contain spaces","validation.required":"Field is required","vaultsFilterModal.placeholder":"Select groups","vaultsFilterModal.title":"Filter by","viewSecureNotePage.noSecureNoteText":"No secure note added","viewSecureNotePage.noteTitle":"Secure note:","viewSecureNotePage.sharedWithText":"{{count}} users","viewSecureNotePage.sharedWithTitle":"Shared with:","viewCreditCardPage.cardHolderTitle":"Card holder:","viewCreditCardPage.creditCardTitle":"Card number:","viewCreditCardPage.securityCodeTitle":"Security code:","viewCreditCardPage.expiryDateTitle":"Expiration date:","viewCreditCardPage.sharedWithText":"{{count}} users","viewCreditCardPage.sharedWithTitle":"Shared with:","viewVaultPage.additionalInformationTitle":"Additional information:","viewVaultPage.desktopApplicationNameTitle":"Desktop app:","viewVaultPage.desktopApplicationsTitle":"Desktop app:","viewVaultPage.passwordTitle":"Password:","viewVaultPage.savedInTitle":"Saved in:","viewVaultPage.sharedWithText":"{{count}} users","viewVaultPage.sharedWithTitle":"Shared with:","viewVaultPage.usernameTitle":"Email / Username:","viewVaultPage.webAddressTitle":"Web address:","welcomePage.activateAccount":"Activate your account","welcomePage.alreadyActive":"Already using Uniqkey?","welcomePage.description":"With Uniqkey, your daily logins will be faster, simpler and safer. And you will never have to deal with password problems again.","welcomePage.pairWithMobile":"Pair with mobile app","welcomePage.welcomeToUniqkey":"Ready for a safer digital life?","leaveAlertModal.title":"Are you sure to leave?","createUpdateVaultForm.additionalInfoLabel":"Additional info","createUpdateVaultForm.desktopLabel":"Desktop app","createUpdateVaultForm.desktopPlaceholder":"Desktop app","createUpdateVaultForm.nameLabel":"Login name","createUpdateVaultForm.passwordLabel":"Password","createUpdateVaultForm.urlLabel":"Web address","createUpdateVaultForm.usernameLabel":"Email/username","createUpdateVaultForm.websiteLabel":"Website","createUpdateVaultForm.websitePlaceholder":"Enter website","shareLoginPage.employeeSelector.label":"Select user","shareLoginPage.ifThisIsLeftUnticked":"If you don\'t set a time limit, the login will be shared until you revoke it","shareLoginPage.setTimeLimit":"Set time limit","shareLoginPage.sharingPermission.full.description":"A user with full permission can use, view and copy the login, but not edit it.","shareLoginPage.sharingPermission.full.title":"Full permission","shareLoginPage.sharingPermission.limited.description":"The limited permission allows a user to use the login without being able to view, copy or edit the login details.","shareLoginPage.sharingPermission.limited.title":"Limited permission","shareLoginPage.sharingPermission.title":"Sharing permissions","shareLoginPage.sharingSuccessAlert":"Login has been shared","shareLoginPage.title":"Share {{vaultName}}","shareSecureNotePage.employeeSelector.label":"Select user","shareSecureNotePage.ifThisIsLeftUnticked":"If you don\'t set a time limit, the secure note will be shared until you revoke it.","shareSecureNotePage.setTimeLimit":"Set time limit","shareSecureNotePage.sharingPermission.full.description":"A user with full permission can use, view and copy the secure note, but not edit it.","shareSecureNotePage.sharingPermission.full.title":"Full permission","shareSecureNotePage.sharingPermission.title":"Sharing permissions","shareSecureNotePage.sharingSuccessAlert":"Secure note has been shared","shareSecureNotePage.title":"Share {{vaultName}}","installMobileAppPage.title":"Install Unqikey mobile app","installMobileAppPage.description":"If you haven’t installed the Uniqkey mobile app yet, open QR scanner on your device and scan QR code below to download it and install","installMobileAppPage.orType":"Or type","installMobileAppPage.uniqkey":"“Uniqkey”","installMobileAppPage.inAppleOrPlayStore":"in Apple or Play store on your mobile device","signUpPage.header":"Sign up for a 14-day free trial","signUpPage.description":"Create your account and try our award-winning password manager for free. You can keep your account after the free trial by buying a 1-year license for €59.","signUpPage.validationError.emailIsInUse":"Email is already associated with an account","signUpPage.policies.agreeWith":"I agree to the","signUpPage.policies.termsOfService":"Terms of Service","signUpPage.policies.and":"and","signUpPage.policies.privacyPolicy":"Privacy Policy","bottomPanel.buttons.menu":"Menu","bottomPanel.buttons.managementMode":"Management mode","bottomPanel.buttons.trustBrowser":"Trust browser","bottomPanel.buttons.reportSite":"Report site","bottomPanel.labels.selectItems":"Select items","bottomPanel.labels.numberOfItems":"{{numberOfItems}} items","managementMode.disabledSelection.group":"You don’t have permission to delete","managementMode.disabledSelection.shared":"You can revoke your access to shared item from the sharing center","activationFlowErrorModal.title":"Error occurred","activationFlowErrorModal.passwordCannotBeCreated":"Master password cannot be created. You have received multiple activation codes.","activationFlowErrorModal.clickTryAgain":"Please, click “Try again”, check your email and use the code from the latest mail.","homePageHeader.addButtonTooltip":"Add","device.healthStatus.noResponse":"No response from server","changeLanguagePage.title":"Change language","changeLanguagePage.modal.title":"The new language will be applied to push notifications, emails, and all companion applications you have paired","approveMoveVaultModal.secureNote.title":"This secure note is shared with {{count}} user(s):","approveMoveVaultModal.creditCard.title":"This payment card is shared with {{count}} user(s):","approveMoveVaultModal.login.title":"This login is shared with {{count}} user(s):","approveMoveVaultModal.secureNote.descriptionOrg":"The user(s) will lose access to the secure note after you move it to the organization keychain","approveMoveVaultModal.creditCard.descriptionOrg":"The user(s) will lose access to the payment card after you move it to the organization keychain","approveMoveVaultModal.login.descriptionOrg":"The user(s) will lose access to the login after you move it to the organization keychain","approveMoveVaultModal.secureNote.descriptionGroup":"The user(s) will lose access to the secure note after you move it to the group","approveMoveVaultModal.creditCard.descriptionGroup":"The user(s) will lose access to the payment card after you move it to the group","approveMoveVaultModal.login.descriptionGroup":"The user(s) will lose access to the login after you move it to the group","approveMoveVaultModal.seeList":"See the full list"}');var Jm=(e=>(e.PopupTranslationsCachePrefix="PopupTranslationsCacheKey_",e.ContentTranslationsCachePrefix="ContentTranslationsCacheKey_",e))(Jm||{});const Xm=Jm;const eh=()=>{if(br.useLocalTranslations)return{en:{translation:Qm}}};((e,t,r)=>{new Promise(((o,n)=>{var a=e=>{try{s(r.next(e))}catch(e){n(e)}},i=e=>{try{s(r.throw(e))}catch(e){n(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}))})(void 0,null,(function*(){var e;yr.S1({dsn:br.transifexSentryDSN,environment:"production".toLowerCase(),release:g.runtime.getManifest().version}),jr.YA("module","pupup"),e={cachePrefix:Xm.PopupTranslationsCachePrefix,fallbackTranslations:Qm,token:br.transifexPopupToken,getLocalResources:eh},Im(void 0,null,(function*(){if(km)return km;const{token:t,cachePrefix:r,getLocalResources:o,fallbackTranslations:n}=e,a=new jm({token:t,fallbackTranslations:n,cachePrefix:r,cache:new Zm(r)});return vm.tx.init({token:t}),km=(0,_.kG)({txBackend:a,language:_.L2,initOptions:{react:{useSuspense:!1},resources:o()}}),km}));const t=new s.QueryClient,r=document.getElementById("root"),d=(0,a.s)(r);m()||document.body.classList.remove("popup"),d.render((0,o.jsx)(n.StrictMode,{children:(0,o.jsx)(s.QueryClientProvider,{client:t,children:(0,o.jsx)(_m,{children:(0,o.jsx)(Gm,{children:(0,o.jsx)(Km,{children:(0,o.jsx)(Ym,{children:(0,o.jsxs)(l.W,{backend:c.PD,children:[(0,o.jsx)(Dm,{}),(0,o.jsx)(i.ReactQueryDevtools,{})]})})})})})})}))}))},42480:()=>{}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={id:e,loaded:!1,exports:{}};return o[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=o,e=[],a.O=(t,r,o,n)=>{if(!r){var i=1/0;for(d=0;d<e.length;d++){for(var[r,o,n]=e[d],s=!0,l=0;l<r.length;l++)(!1&n||i>=n)&&Object.keys(a.O).every((e=>a.O[e](r[l])))?r.splice(l--,1):(s=!1,n<i&&(i=n));if(s){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[r,o,n]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var n=Object.create(null);a.r(n);var i={};t=t||[null,r({}),r([]),r(r)];for(var s=2&o&&e;"object"==typeof s&&!~t.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,a.d(n,i),n},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&!e;)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e+"../"})(),(()=>{a.b=document.baseURI||self.location.href;var e={382:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var o,n,[i,s,l]=r,c=0;if(i.some((t=>0!==e[t]))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(l)var d=l(a)}for(t&&t(r);c<i.length;c++)n=i[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},r=self.webpackChunkuniqkey_extension=self.webpackChunkuniqkey_extension||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),a.nc=void 0;var i=a.O(void 0,[270,762,710,965,880,720],(()=>a(89295)));i=a.O(i)})();