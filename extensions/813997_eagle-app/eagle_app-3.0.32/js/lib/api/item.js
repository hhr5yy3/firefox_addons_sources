class Item{async addFile(e){e.title&&(e.title=eagle.utils.clearWeirdCharacters(e.title).substr(0,65));var t={method:"POST","Content-Type":"application/x-www-form-urlencoded",body:{type:"image",version:eagle.extension.manifest.version,...e}};if(e.folderID&&e.folderIDs)throw new Error("The folderID and folderIDs should not exist at the same time");return eagle.fetch("http://localhost:41593",t)}async addScreenshot({base64:e,indexStr:t=""}){return t={method:"POST","Content-Type":"application/x-www-form-urlencoded",body:{type:"screen capture",version:eagle.extension.manifest.version,title:eagle.utils.clearWeirdCharacters(document.title).substr(0,65)+t,url:location.href,base64:e}},eagle.fetch("http://localhost:41593",t)}async addURL(e){var t={method:"POST","Content-Type":"application/x-www-form-urlencoded",body:{type:"save-url",version:eagle.extension.manifest.version,title:eagle.utils.clearWeirdCharacters(document.title).substr(0,65),...e}};return e.videoThumb?t.body.base64=await eagle.utils.urlToBase64(e.videoThumb,1e4):(t.body.base64=await eagle.screenCapturer.captureCurrentTab({format:"jpeg",quality:85}),t.body.base64&&(e=(await eagle.utils.resizeBase64ImageToMaxSize(e.src,720)).base64,t.body.base64=e)),eagle.fetch("http://localhost:41593",t)}async batchSave(e){var t={method:"POST","Content-Type":"application/x-www-form-urlencoded",body:{type:"import-images",version:eagle.extension.manifest.version,url:location.href,images:[]}};return e.forEach(e=>{e.title||(e.title=document.title),e.title=eagle.utils.clearWeirdCharacters(e.title).substr(0,65),e.src&&-1<e.src.indexOf(" ")&&(e.src=e.src.trim().split(" ")[0])}),t.body.title=eagle.utils.clearWeirdCharacters(document.title).substr(0,65),t.body.images=JSON.stringify(e),eagle.logger.info(`[background] batch save[${location.href}] count[${e.length}]`),eagle.fetch("http://localhost:41593",t)}}eagle.item=new Item;