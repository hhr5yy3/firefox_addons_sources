import{d as s,a as e}from"./cplx-CVsLL7Ku.js";class c{async add(r){const[n]=await e.pinnedSpaces.orderBy("[order+createdAt]").reverse().limit(1).toArray(),a=n?n.order+1:0;return await e.pinnedSpaces.add({...r,order:a,createdAt:new Date().getTime()})}async get(r){return await e.pinnedSpaces.get(r)}async getAll(){return await e.pinnedSpaces.orderBy("[order+createdAt]").reverse().toArray()}async update(r){return await e.pinnedSpaces.put(r),r.uuid}async delete(r){await e.pinnedSpaces.delete(r)}async swap({from:r,to:n}){const a=await this.get(r),t=await this.get(n);if(!(!a||!t)){if(a.order===t.order){const[d]=await e.pinnedSpaces.orderBy("[order+createdAt]").reverse().limit(1).toArray(),i=(d==null?void 0:d.order)??-1;await e.pinnedSpaces.put({...t,order:i+2}),await e.pinnedSpaces.put({...a,order:i+1});return}await e.pinnedSpaces.put({...a,order:t.order}),await e.pinnedSpaces.put({...t,order:a.order})}}}const[S,w]=s("PinnedSpacesService",()=>new c);export{w as g,S as r};
