(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Op(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var V0={exports:{}},_o={},$0={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bi=Symbol.for("react.element"),Fp=Symbol.for("react.portal"),jp=Symbol.for("react.fragment"),Up=Symbol.for("react.strict_mode"),zp=Symbol.for("react.profiler"),Bp=Symbol.for("react.provider"),Wp=Symbol.for("react.context"),Hp=Symbol.for("react.forward_ref"),Vp=Symbol.for("react.suspense"),$p=Symbol.for("react.memo"),Gp=Symbol.for("react.lazy"),bu=Symbol.iterator;function Qp(t){return t===null||typeof t!="object"?null:(t=bu&&t[bu]||t["@@iterator"],typeof t=="function"?t:null)}var G0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q0=Object.assign,Y0={};function Sr(t,e,n){this.props=t,this.context=e,this.refs=Y0,this.updater=n||G0}Sr.prototype.isReactComponent={};Sr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function K0(){}K0.prototype=Sr.prototype;function tc(t,e,n){this.props=t,this.context=e,this.refs=Y0,this.updater=n||G0}var nc=tc.prototype=new K0;nc.constructor=tc;Q0(nc,Sr.prototype);nc.isPureReactComponent=!0;var Ou=Array.isArray,q0=Object.prototype.hasOwnProperty,rc={current:null},X0={key:!0,ref:!0,__self:!0,__source:!0};function J0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)q0.call(e,r)&&!X0.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:bi,type:t,key:s,ref:o,props:i,_owner:rc.current}}function Yp(t,e){return{$$typeof:bi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ic(t){return typeof t=="object"&&t!==null&&t.$$typeof===bi}function Kp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fu=/\/+/g;function Jo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Kp(""+t.key):e.toString(36)}function ps(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bi:case Fp:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Jo(o,0):r,Ou(i)?(n="",t!=null&&(n=t.replace(Fu,"$&/")+"/"),ps(i,e,n,"",function(l){return l})):i!=null&&(ic(i)&&(i=Yp(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Fu,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Ou(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+Jo(s,a);o+=ps(s,e,n,c,i)}else if(c=Qp(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+Jo(s,a++),o+=ps(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yi(t,e,n){if(t==null)return t;var r=[],i=0;return ps(t,r,"","",function(s){return e.call(n,s,i++)}),r}function qp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Me={current:null},ms={transition:null},Xp={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:ms,ReactCurrentOwner:rc};function Z0(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:Yi,forEach:function(t,e,n){Yi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yi(t,function(){e++}),e},toArray:function(t){return Yi(t,function(e){return e})||[]},only:function(t){if(!ic(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};F.Component=Sr;F.Fragment=jp;F.Profiler=zp;F.PureComponent=tc;F.StrictMode=Up;F.Suspense=Vp;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xp;F.act=Z0;F.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Q0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=rc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)q0.call(e,c)&&!X0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:bi,type:t.type,key:i,ref:s,props:r,_owner:o}};F.createContext=function(t){return t={$$typeof:Wp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bp,_context:t},t.Consumer=t};F.createElement=J0;F.createFactory=function(t){var e=J0.bind(null,t);return e.type=t,e};F.createRef=function(){return{current:null}};F.forwardRef=function(t){return{$$typeof:Hp,render:t}};F.isValidElement=ic;F.lazy=function(t){return{$$typeof:Gp,_payload:{_status:-1,_result:t},_init:qp}};F.memo=function(t,e){return{$$typeof:$p,type:t,compare:e===void 0?null:e}};F.startTransition=function(t){var e=ms.transition;ms.transition={};try{t()}finally{ms.transition=e}};F.unstable_act=Z0;F.useCallback=function(t,e){return Me.current.useCallback(t,e)};F.useContext=function(t){return Me.current.useContext(t)};F.useDebugValue=function(){};F.useDeferredValue=function(t){return Me.current.useDeferredValue(t)};F.useEffect=function(t,e){return Me.current.useEffect(t,e)};F.useId=function(){return Me.current.useId()};F.useImperativeHandle=function(t,e,n){return Me.current.useImperativeHandle(t,e,n)};F.useInsertionEffect=function(t,e){return Me.current.useInsertionEffect(t,e)};F.useLayoutEffect=function(t,e){return Me.current.useLayoutEffect(t,e)};F.useMemo=function(t,e){return Me.current.useMemo(t,e)};F.useReducer=function(t,e,n){return Me.current.useReducer(t,e,n)};F.useRef=function(t){return Me.current.useRef(t)};F.useState=function(t){return Me.current.useState(t)};F.useSyncExternalStore=function(t,e,n){return Me.current.useSyncExternalStore(t,e,n)};F.useTransition=function(){return Me.current.useTransition()};F.version="18.3.1";$0.exports=F;var z=$0.exports;const Jp=Op(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp=z,em=Symbol.for("react.element"),tm=Symbol.for("react.fragment"),nm=Object.prototype.hasOwnProperty,rm=Zp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,im={key:!0,ref:!0,__self:!0,__source:!0};function ef(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nm.call(e,r)&&!im.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:em,type:t,key:s,ref:o,props:i,_owner:rm.current}}_o.Fragment=tm;_o.jsx=ef;_o.jsxs=ef;V0.exports=_o;var _=V0.exports;const Ki={dark:{2:"#302e2c",4:"#39303d",8:"#44254c",16:"#400c49",32:"#55125b",64:"#650668",128:"#790796",256:"#81319e",512:"#8719a0",1024:"#790284",2048:"#90179b",4096:"#90179b",8192:"#90179b",16384:"#90179b",32768:"#90179b",65536:"#90179b"},light:{2:"#ccc6c1",4:"#adb1d8",8:"#6567d3",16:"#1b32c6",32:"#1b2bd6",64:"#2038a3",128:"#5614d1",256:"#5a26c1",512:"#6733ce",1024:"#6634af",2048:"#26a5bf",4096:"#26a5bf",8192:"#26a5bf",16384:"#26a5bf",32768:"#26a5bf",65536:"#26a5bf"}},Zo=(t,e,n,r,i,s)=>(t.beginPath(),t.moveTo(e+s,n),t.arcTo(e+r,n,e+r,n+i,s),t.arcTo(e+r,n+i,e,n+i,s),t.arcTo(e,n+i,e,n,s),t.arcTo(e,n,e+r,n,s),t.closePath(),t),sm={name:"2048",id:"t048",info:"Use <kbd>[UP]</kbd>, <kbd>[DOWN]</kbd>, <kbd>[LEFT]</kbd> and <kbd>[RIGHT]</kbd> to rearrange the tiles, merge them together to reach 2048!",functions:{start:()=>{u.games.current.data={score:0,loseTimer:0,grid:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],tweenTiles:[],keys:{Up:!1,Down:!1,Left:!1,Right:!1}},u.games.current.data.grid[Math.floor(Math.random()*4)][Math.floor(Math.random()*4)]=Math.random()>.9?4:2},render:(t,e)=>{if(!u.games.ctx)return;const n=u.games.ctx,r=u.games.current.data.tweenTiles;n.fillStyle=u.storage.get("dark-mode")?"#171717":"#f2f2f2";for(let s=0;s<=3;s++)for(let o=0;o<=3;o++)n.fillStyle=u.storage.get("dark-mode")?"#171717":"#f2f2f2",Zo(n,50+s*(120-50/3),50+o*(120-50/3),90,90,10).fill();if(r.length===0)for(let s=0;s<=3;s++)for(let o=0;o<=3;o++)u.games.current.data.grid[o][s]!==0&&(n.fillStyle=(u.storage.get("dark-mode")?Ki.dark:Ki.light)[u.games.current.data.grid[o][s]],Zo(n,50+s*(120-50/3),50+o*(120-50/3),90,90,10).fill(),n.font="40px Roboto",n.textAlign="center",n.fillStyle=u.storage.get("dark-mode")?"white":"black",n.fillText(u.games.current.data.grid[o][s],95+s*(120-50/3),90+56/3+o*(120-50/3),85));else r.forEach(s=>{n.fillStyle=(u.storage.get("dark-mode")?Ki.dark:Ki.light)[s.value],s.elapsed+=e/60,s.elapsed>=s.duration&&(s.elapsed=s.duration,s.completed=!0);let o=s.elapsed/s.duration;s.duration===0&&(o=1),o=o*o;const a=s.startx*(1-o)+s.endx*o,c=s.starty*(1-o)+s.endy*o;s.elapsed>=0&&(Zo(n,50+a*(120-50/3),50+c*(120-50/3),90,90,10).fill(),n.font="40px Roboto",n.textAlign="center",n.fillStyle=u.storage.get("dark-mode")?"white":"black",n.fillText(String(s.value),95+a*(120-50/3),90+56/3+c*(120-50/3),85))}),r.every(s=>s.completed)&&(u.games.current.data.tweenTiles=[]);n.fillStyle=u.storage.get("dark-mode")?"#121212":"white";const i=u.games.current.data.loseTimer/.625;n.globalAlpha=i,n.fillRect(0,0,500,500),n.globalAlpha=1,n.fillStyle=u.storage.get("dark-mode")?"white":"black"},update:(t,e)=>{var a,c,l,h,d,p,y,S;const n=u.games.current.data,r=n.grid;let i=!1;const s=.075;for(let w=0;w<=3&&!i;w++)for(let v=0;v<=3&&!i;v++){if(((a=r[v])==null?void 0:a[w-1])===0||((c=r[v])==null?void 0:c[w-1])===r[v][w]){i=!0;break}if(((l=r[v])==null?void 0:l[w+1])===0||((h=r[v])==null?void 0:h[w+1])===r[v][w]){i=!0;break}if(((d=r[v-1])==null?void 0:d[w])===0||((p=r[v-1])==null?void 0:p[w])===r[v][w]){i=!0;break}if(((y=r[v+1])==null?void 0:y[w])===0||((S=r[v+1])==null?void 0:S[w])===r[v][w]){i=!0;break}}if(!i&&(n.loseTimer+=e/60,n.loseTimer>=.625)){u.stats.get("2048-high-score")<n.score&&u.stats.set("2048-high-score",n.score);const w=Math.max(...r.flat());u.stats.get("2048-high-tile")<w&&u.stats.set("2048-high-tile",w),u.games.end({message:"Game Over",score:{Score:n.score,"Highest Tile":w}})}const o=Math.max(...r.flat());if(o>=512?u.achievements.set("2048-512"):o>=1024?u.achievements.set("2048-1024"):o>=2048?u.achievements.set("2048-2048"):o>=4096&&u.achievements.set("2048-4096"),n.score>=1e4&&u.achievements.set("2048-10k-points"),u.games.keys.Up){if(!n.keys.Up){let w=!1;u.games.current.data.tweenTiles=[];for(let v=0;v<=3;v++)for(let f=0;f<=3;f++)if(r[f][v]!==0){let m=!1;for(let g=f-1;g>=-1;g--)if(g===-1){f!==0&&(w=!0);const k=r[f][v];m=!0,u.games.current.data.tweenTiles.push({value:k,startx:v,starty:f,endx:v,endy:0,duration:f*s,elapsed:0,completed:!1}),r[f][v]=0,r[0][v]=k;break}else if(r[g][v]===r[f][v]){g!==f&&(w=!0),m=!0;const k=r[f][v];u.games.current.data.tweenTiles.push({value:k,startx:v,starty:f,endx:v,endy:g,duration:(f-g)*s,elapsed:0,completed:!1}),u.games.current.data.tweenTiles.push({value:k*2,startx:v,starty:g,endx:v,endy:g,duration:0,elapsed:-(f-g)*s,completed:!1}),r[f][v]=0,r[g][v]=k*6,n.score+=k*2;break}else if(r[g][v]!==0){g+1!==f&&(w=!0),m=!0;const k=r[f][v];u.games.current.data.tweenTiles.push({value:k,startx:v,starty:f,endx:v,endy:g+1,duration:(f-g-1)*s,elapsed:0,completed:!1}),r[f][v]=0,r[g+1][v]=k;break}m||u.games.current.data.tweenTiles.push({value:r[f][v],startx:v,starty:f,endx:v,endy:f,duration:0,elapsed:0,completed:!1})}if(w){const v=[];for(let f=0;f<=3;f++)for(let m=0;m<=3;m++)r[m][f]===0&&v.push([m,f]);if(v.length>0){const f=v[Math.floor(Math.random()*v.length)];u.games.current.data.grid[f[0]][f[1]]=Math.random()>.9?4:2}}}n.keys.Up=!0}else n.keys.Up=!1;for(const w of r)for(const v in w)w[v]%3===0&&(w[v]/=3);if(u.games.keys.Down){if(!n.keys.Down){u.games.current.data.tweenTiles=[];let w=!1;for(let v=0;v<=3;v++)for(let f=3;f>=0;f--)if(r[f][v]!==0){let m=!1;for(let g=f+1;g<=4;g++)if(g===4){f!==3&&(w=!0);const k=r[f][v];m=!0,u.games.current.data.tweenTiles.push({value:k,startx:v,starty:f,endx:v,endy:3,duration:(3-f)*s,elapsed:0,completed:!1}),r[f][v]=0,r[3][v]=k;break}else if(r[g][v]===r[f][v]){g!==f&&(w=!0);const k=r[f][v];m=!0,u.games.current.data.tweenTiles.push({value:k,startx:v,starty:f,endx:v,endy:g,duration:(g-f)*s,elapsed:0,completed:!1}),u.games.current.data.tweenTiles.push({value:k*2,startx:v,starty:g,endx:v,endy:g,duration:0,elapsed:-(g-f)*s,completed:!1}),r[f][v]=0,r[g][v]=k*6,n.score+=k*2;break}else if(r[g][v]!==0){g-1!==f&&(w=!0);const k=r[f][v];m=!0,u.games.current.data.tweenTiles.push({value:k,startx:v,starty:f,endx:v,endy:g-1,duration:(g-f-1)*s,elapsed:0,completed:!1}),r[f][v]=0,r[g-1][v]=k;break}m||u.games.current.data.tweenTiles.push({value:r[f][v],startx:v,starty:f,endx:v,endy:f,duration:0,elapsed:0,completed:!1})}if(w){const v=[];for(let f=0;f<=3;f++)for(let m=0;m<=3;m++)r[m][f]===0&&v.push([m,f]);if(v.length>0){const f=v[Math.floor(Math.random()*v.length)];u.games.current.data.grid[f[0]][f[1]]=Math.random()>.9?4:2}}}n.keys.Down=!0}else n.keys.Down=!1;for(const w of r)for(const v in w)w[v]%3===0&&(w[v]/=3);if(u.games.keys.Left){if(!n.keys.Left){u.games.current.data.tweenTiles=[];let w=!1;for(let v=0;v<=3;v++)for(let f=0;f<=3;f++)if(r[v][f]!==0){let m=!1;for(let g=f-1;g>=-1;g--)if(g===-1){f!==0&&(w=!0);const k=r[v][f];m=!0,u.games.current.data.tweenTiles.push({value:k,startx:f,starty:v,endx:0,endy:v,duration:f*s,elapsed:0,completed:!1}),r[v][f]=0,r[v][0]=k;break}else if(r[v][g]===r[v][f]){g!==f&&(w=!0);const k=r[v][f];m=!0,u.games.current.data.tweenTiles.push({value:k,startx:f,starty:v,endx:g,endy:v,duration:(f-g)*s,elapsed:0,completed:!1}),u.games.current.data.tweenTiles.push({value:k*2,startx:g,starty:v,endx:g,endy:v,duration:0,elapsed:-(f-g)*s,completed:!1}),r[v][f]=0,r[v][g]=k*6,n.score+=k*2;break}else if(r[v][g]!==0){g+1!==f&&(w=!0);const k=r[v][f];m=!0,u.games.current.data.tweenTiles.push({value:k,startx:f,starty:v,endx:g+1,endy:v,duration:(f-g-1)*s,elapsed:0,completed:!1}),r[v][f]=0,r[v][g+1]=k;break}m||u.games.current.data.tweenTiles.push({value:r[v][f],startx:f,starty:v,endx:f,endy:v,duration:0,elapsed:0,completed:!1})}if(w){const v=[];for(let f=0;f<=3;f++)for(let m=0;m<=3;m++)r[m][f]===0&&v.push([m,f]);if(v.length>0){const f=v[Math.floor(Math.random()*v.length)];u.games.current.data.grid[f[0]][f[1]]=Math.random()>.9?4:2}}}n.keys.Left=!0}else n.keys.Left=!1;for(const w of r)for(const v in w)w[v]%3===0&&(w[v]/=3);if(u.games.keys.Right){if(!n.keys.Right){let w=!1;u.games.current.data.tweenTiles=[];for(let v=0;v<=3;v++)for(let f=3;f>=0;f--)if(r[v][f]!==0){let m=!1;for(let g=f+1;g<=4;g++)if(g===4){f!==3&&(w=!0);const k=r[v][f];m=!0,u.games.current.data.tweenTiles.push({value:k,startx:f,starty:v,endx:3,endy:v,duration:(3-f)*s,elapsed:0,completed:!1}),r[v][f]=0,r[v][3]=k;break}else if(r[v][g]===r[v][f]){g!==f&&(w=!0);const k=r[v][f];m=!0,u.games.current.data.tweenTiles.push({value:k,startx:f,starty:v,endx:g,endy:v,duration:(g-f)*s,elapsed:0,completed:!1}),u.games.current.data.tweenTiles.push({value:k*2,startx:g,starty:v,endx:g,endy:v,duration:0,elapsed:-(g-f)*s,completed:!1}),r[v][f]=0,r[v][g]=k*6,n.score+=k*2;break}else if(r[v][g]!==0){g-1!==f&&(w=!0);const k=r[v][f];m=!0,u.games.current.data.tweenTiles.push({value:k,startx:f,starty:v,endx:g-1,endy:v,duration:(g-f-1)*s,elapsed:0,completed:!1}),r[v][f]=0,r[v][g-1]=k;break}m||u.games.current.data.tweenTiles.push({value:r[v][f],startx:f,starty:v,endx:f,endy:v,duration:0,elapsed:0,completed:!1})}if(w){const v=[];for(let f=0;f<=3;f++)for(let m=0;m<=3;m++)r[m][f]===0&&v.push([m,f]);if(v.length>0){const f=v[Math.floor(Math.random()*v.length)];u.games.current.data.grid[f[0]][f[1]]=Math.random()>.9?4:2}}}n.keys.Right=!0}else n.keys.Right=!1;for(const w of r)for(const v in w)w[v]%3===0&&(w[v]/=3);u.games.setScoreboard({Score:n.score})}},page:{width:500,height:500}},gs=()=>{var n;if(!u.games.canvas)return;const t=Math.random()*20+25,e=Math.floor(Math.random()*3);(n=u.games.current.data.asteroids)==null||n.push({x:e%2===0?Math.random()*u.games.canvas.width:-(e-3)/2*u.games.canvas.width-(e-2)*t,y:e%2===1?Math.random()*u.games.canvas.height:e/2*u.games.canvas.height+(e-1)*t,r:t,s:Math.round(t/10)+5,a:Math.random()*Math.PI*2,va:((Math.random()/2+.5)*Math.PI*2-Math.PI)/45,vx:e%2===0?(Math.random()/2+.5)*2-1:(e-2)*(Math.random()/2+.5),vy:e%2===1?(Math.random()/2+.5)*2-1:-(e-1)*(Math.random()/2+.5)})},om=(t,e)=>{if(!u.games.ctx)return;u.games.current.data.score=u.games.current.data.score+1;const n=u.games.current.data.asteroids[t],r=u.games.current.data.asteroids[e];u.games.sfx("asteroids/explosion"+String(1+Math.floor(Math.random()*2))),u.games.current.data.bullets.splice(e,1),u.games.current.data.asteroids.splice(t,1);for(let i=0;i<Math.floor(Math.random()*15+10);i++)u.games.current.data.ship.particles.push({x:n.x,y:n.y,r:Math.floor(Math.random()*7)+1,vx:Math.random()*11-5,vy:Math.random()*11-5,t:Math.floor(Math.random()*6)});if(n.r<30||n.s<7){Math.random()*100<(u.storage.get("asteroids-difficulty")||1)&&gs();return}for(let i=0;i<2+Math.round(Math.random()*2/3);i++)u.games.current.data.asteroids.push({x:n.x+(Math.random()*2-1)*n.r,y:n.y+(Math.random()*2-1)*n.r,r:n.r-6,s:(n.s||4)-1,a:n.a+Math.random()*Math.PI*2-Math.PI,va:((Math.random()/2+.5)*Math.PI*2-Math.PI)/45,vx:-r.vx/3+Math.random()/2-1,vy:-r.vy/3+Math.random()/2-1})},am={name:"Asteroids",id:"asteroids",info:"Control a Spaceship and destroy oncoming Asteroids! Use <kbd>[LEFT]</kbd> and <kbd>[RIGHT]</kbd> to steer, <kbd>[UP]</kbd> to accelerate and <kbd>[PRIMARY]</kbd> to shoot! Don't collide with the asteroids!",functions:{start:()=>{const t=[];for(let e=0;e<(u.storage.get("asteroids-difficulty")||0);e++)gs();u.games.current.data={ship:{x:250,y:250,angle:Math.random()*Math.PI*2,speed:0,cacheAngle:0,maxSpeed:6,shotCooldown:0,particles:[],thrustingTime:0},asteroids:t,bullets:[],score:0,lives:5,lifeCooldown:-1,lastThrustSoundEffect:null,thrustSfxCooldown:-1}},render:t=>{if(!u.games.canvas||!u.games.ctx)return;const e=u.games.ctx,n=u.games.canvas,r=u.games.current.data;e.fillStyle="black",e.fillRect(0,0,n.width,n.height),e.fillStyle="white",e.beginPath(),e.lineWidth=2,e.strokeStyle="white",e.moveTo(r.ship.x-5+Math.cos(r.ship.cacheAngle)*10,r.ship.y-5+Math.sin(r.ship.cacheAngle)*10),e.lineTo(r.ship.x-5+Math.cos(r.ship.cacheAngle+Math.PI*3/4)*10,r.ship.y-5+Math.sin(r.ship.cacheAngle+Math.PI*3/4)*10),e.lineTo(r.ship.x-5+Math.cos(r.ship.cacheAngle+Math.PI)*4,r.ship.y-5+Math.sin(r.ship.cacheAngle+Math.PI)*4),e.lineTo(r.ship.x-5+Math.cos(r.ship.cacheAngle+Math.PI*5/4)*10,r.ship.y-5+Math.sin(r.ship.cacheAngle+Math.PI*5/4)*10),e.lineTo(r.ship.x-5+Math.cos(r.ship.cacheAngle)*10,r.ship.y-5+Math.sin(r.ship.cacheAngle)*10),e.stroke(),r.bullets.forEach(i=>{e.lineWidth=2,e.strokeStyle="white",e.beginPath(),e.arc(i.x,i.y,2,0,2*Math.PI,!1),e.stroke()}),r.asteroids.forEach(i=>{e.beginPath(),e.lineWidth=2,e.strokeStyle="white",e.moveTo(i.x+Math.cos(i.a)*i.r,i.y-5+Math.sin(i.a)*i.r);for(let s=0;s<i.s;s++)e.lineTo(i.x+Math.cos(i.a+Math.PI*2*s/i.s)*i.r,i.y-5+Math.sin(i.a+Math.PI*2*s/i.s)*i.r);e.lineTo(i.x+Math.cos(i.a)*i.r,i.y-5+Math.sin(i.a)*i.r),e.stroke()}),u.storage.get("visual-effects")&&r.ship.particles.forEach(i=>{e.lineWidth=2,e.strokeStyle="white",e.beginPath(),e.arc(i.x,i.y,i.r,0,2*Math.PI,!1),e.stroke()})},update:(t,e)=>{var i;if(!u.games.canvas)return;const n=u.games.canvas,r=u.games.current.data;if(r.ship.particles.forEach((s,o)=>{s.x+=s.vx*e,s.y+=s.vy*e,s.t-=e/10,s.t<=0&&r.ship.particles.splice(o,1)}),r.lifeCooldown===-1)u.games.keys.Left&&(r.ship.cacheAngle-=e/10),u.games.keys.Right&&(r.ship.cacheAngle+=e/10),u.games.keys.Up?(r.ship.thrustingTime+=e,r.ship.thrustingTime>=600&&u.achievements.set("asteroids-accelerate-10"),r.ship.angle=r.ship.cacheAngle,r.ship.particles.push({x:r.ship.x-5+(Math.random()*4-2)-Math.cos(r.ship.angle),y:r.ship.y-5+(Math.random()*4-2)-Math.sin(r.ship.angle),r:Math.random()*2+1,vx:Math.sin(r.ship.angle)*(Math.random()*2-2)-Math.cos(r.ship.angle),vy:Math.cos(r.ship.angle)*(Math.random()*2-2)-Math.sin(r.ship.angle),t:Math.random()*5+2}),r.ship.speed<=1.5&&(r.ship.speed=1.5),r.ship.speed+=e/5,r.ship.speed>=r.ship.maxSpeed&&(r.ship.speed=r.ship.maxSpeed),r.thrustSfxCooldown<=0||r.thrustSfxCooldown===-1?(r.lastThrustSoundEffect=u.games.sfx("asteroids/thrust"),r.thrustSfxCooldown=16/60):r.thrustSfxCooldown-=e/60):(r.ship.thrustingTime=0,r.ship.speed-=e/10,r.ship.speed<=0&&(r.ship.speed=0),r.thrustSfxCooldown!==-1&&r.lastThrustSoundEffect!==null&&(r.lastThrustSoundEffect&&((i=r.lastThrustSoundEffect)==null||i.pause()),r.lastThrustSoundEffect=null,r.thrustSfxCooldown=-1)),r.ship.x+=Math.cos(r.ship.angle)*r.ship.speed*e,r.ship.y+=Math.sin(r.ship.angle)*r.ship.speed*e,u.games.keys.Primary&&r.ship.shotCooldown<=0?(r.bullets.push({x:r.ship.x-5,y:r.ship.y-5,vx:Math.cos(r.ship.cacheAngle)*10,vy:Math.sin(r.ship.cacheAngle)*10}),r.ship.shotCooldown=10,u.games.sfx("asteroids/shoot")):(r.ship.shotCooldown-=e,u.games.keys.Primary||(r.ship.shotCooldown-=e*9)),r.bullets.forEach((s,o)=>{s.x+=s.vx*e,s.y+=s.vy*e,(s.x<0||s.x>n.width||s.y<0||s.y>n.height)&&r.bullets.splice(o,1)}),r.asteroids.forEach((s,o)=>{var c;s.x+=s.vx,s.y+=s.vy,s.a+=s.va,s.a=s.a%(Math.PI*2),r.bullets.forEach((l,h)=>{l.x>s.x-s.r&&l.x<s.x+s.r&&l.y>s.y-s.r&&l.y<s.y+s.r&&om(o,h)});const a=r.ship;if(Math.sqrt((s.x-a.x)**2+(s.y-a.y)**2)<=s.r){r.ship.particles=[],r.asteroids.forEach(l=>{for(let h=0;h<Math.floor(Math.random()*3+2);h++)u.games.current.data.ship.particles.push({x:l.x,y:l.y,r:Math.floor(Math.random()*7)+1,vx:Math.random()*11-5,vy:Math.random()*11-5,t:Math.floor(Math.random()*6)})}),r.asteroids=[],r.bullets=[],r.lives--,r.lifeCooldown=1;for(let l=0;l<Math.floor(Math.random()*3+2);l++)u.games.current.data.ship.particles.push({x:a.x,y:a.y,r:Math.floor(Math.random()*7)+1,vx:Math.random()*11-5,vy:Math.random()*11-5,t:Math.floor(Math.random()*6)});r.ship.x=-999,r.ship.y=-999,(c=r.lastThrustSoundEffect)==null||c.pause(),r.lastThrustSoundEffect=null,r.thrustSfxCooldown=-1}(s.x<-s.r||s.x>n.width+s.r||s.y<-s.r||s.y>n.height+s.r)&&r.asteroids.splice(o,1)}),r.ship.x<-10&&(r.ship.x=u.games.canvas.width+10),r.ship.x>u.games.canvas.width+10&&(r.ship.x=-10),r.ship.y<-10&&(r.ship.y=u.games.canvas.height+10),r.ship.y>u.games.canvas.height+10&&(r.ship.y=-10),r.asteroids.length<(u.storage.get("asteroids-difficulty")||0)&&r.lifeCooldown===-1&&gs();else if(r.lifeCooldown>0)r.lifeCooldown-=e/60,r.ship.x=-999,r.ship.y=-999;else if(r.lifeCooldown<=0)if(r.lives===0)u.stats.get("asteroids-high-score")<r.score&&u.stats.set("asteroids-high-score",r.score),u.games.end({message:"You died!",score:{Score:r.score,Lives:r.lives}});else{for(let s=0;s<(u.storage.get("asteroids-difficulty")||0);s++)gs();r.ship.x=250,r.ship.y=250,r.ship.angle=Math.random()*Math.PI*2,r.ship.speed=0,r.ship.shotCooldown=0,r.lifeCooldown=-1}r.score>=100&&u.achievements.set("asteroids-score-100"),r.score>=100&&(u.storage.get("asteroids-difficulty")||0)>=50&&u.achievements.set("asteroids-score-100-impossible"),r.score>=1e4&&u.achievements.set("asteroids-score-10k"),u.games.setScoreboard({Score:r.score,Lives:r.lives})}},page:{width:500,height:500},options:[{name:"Difficulty",info:"Choose the Intensity of Asteroids",id:"asteroids-difficulty",type:"dropdown",default:5,options:[{name:"Easy",id:4},{name:"Normal",id:7},{name:"Hard",id:15},{name:"Impossible",id:50}]}]},ju=(t,e,n,r)=>(t/=r/2,t<1?n/2*Math.pow(t,3)+e:(t-=2,n/2*(Math.pow(t,3)+2)+e)),ea=t=>{for(const e in t){const n=t[e];for(let r=0;r<n.length;r++){const i=Number(n.charAt(r));i!==0&&u.games.current.data.bricks.push({x:Ne*2*r,y:e*Ne,width:Ne*2,height:Ne,hits:i})}}},lm=(t,e)=>{t.forEach((n,r)=>{n.alpha-=10/(60+Math.sqrt(e.dx**2+e.dy**2)),!(n.alpha>0)&&(t.splice(r,1),r--)})},cm=(t,e)=>t.x+t.width>e.x&&t.x<e.x+e.width&&t.y+t.height>e.y&&t.y<e.y+e.height,Ne=15.625,Nr=[["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","1111111111111111","1111111111111111","1111111111111111"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","1100110011001100","1100110011001100","0011001100110011","0011001100110011","1100110011001100","1100110011001100"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000001111000000","0000011111100000","0000011111100000","0000011111100000","0000011111100000","0000011111100000","0000001111000000"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","1111111111111111","1000000000000001","1000001111000001","1001000000000001","1011101111000001","1001000000010101","1000001111000001","1111111111111111"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","1111111111111111","0000000000000000","1111111111111111","0000000000000000","1111111111111111","0000000000000000","1111111111111111"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","1111111111111111","1000000000010001","1011111111010111","1000100001010001","1010111101011101","1010100001000001","1010101100011101","1110101111111111"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","0111000111001110","1000101000010001","1111101000000010","1000101000000100","1000101000001000","1000100111011111"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000011111100000","0000111111110000","0001100000011000","0001101001011000","0001100000011000","0001101001011000","0001101111011000","0001100000011000","0000111111110000","0000011111100000"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","1111000011110000","1111000011110000","1111000011110000","1111000011110000","0000111100001111","0000111100001111","0000111100001111","0000111100001111"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000011100","0000000000100010","0222201010000100","0222200100001000","0222201010010000","0000000000111110"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","2120212021202120","1202120212021202","2021202120212021","0212021202120212","2120212021202120","1202120212021202"],["0000000000000000","0000000000000000","0000000220000000","0000002222000000","0000022002200000","0000220000220000","0002200000022000","0002220000222000","0002222002222000","0002202222022000","0002200220022000","0002200220022000","0000220220220000","0000022222200000","0000002222000000","0000000220000000"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000002222000000","0000022222200000","0000222222220000","0002222222000000","0002222200000000","0002222200000000","0002222222000000","0000222222220000","0000022222200000","0000002222000000"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000200000020000","0000020000200000","0000222222220000","0002202222022000","0022222222222200","0020222222220200","0020200000020200","0000022002200000"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","2222222222222222","2222222222222222","2222222222222222","2222222222222222","2222222222222222","2222222222222222"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000330000000000","0000003003030000","0000330000300000","0000003003030000","0000330000000000","0000000000000000"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","3030303030303030","0000000000000000","3030303030303030","0000000000000000","3030303030303030","0000000000000000","3030303030303030"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","3030303030303030","0303030303030303","3030303030303030","0303030303030303","3030303030303030","0303030303030303","3030303030303030"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","3012210233100222","3311232203321212","2022332311131201","1333123201020203","1300002211131201"],["0000000000000000","0000000000000000","0000000000000000","0000000000000000","0000000000000000","3333333333333333","3333333333333333","3333333333333333","3333333333333333","3333333333333333","3333333333333333","3333333333333333","3333333333333333"]],On={normal:["#ff0000","#ff6100","#ffbf00","#ddff00","#7fff00","#1dff00","#00ff3f","#00ffa1","#00ffff","#009dff","#003fff","#2200ff","#7f00ff","#e100ff","#ff0094","#ff0000"],dark:["#cf0000","#cf3100","#cf8f00","#adcf00","#4fcf00","#00cf00","#00cf0f","#00cf71","#00cfcf","#004dcf","#000fcf","#0000cf","#4f00cf","#b100cf","#cf0064","#cf0000"]},um={name:"Breakout",id:"breakout",info:"Use <kbd>[LEFT]</kbd> and <kbd>[RIGHT]</kbd> to move the paddle into the ball, aim for the fortress and don't let it fall! Press <kbd>[PRIMARY]</kbd> to serve the ball.",functions:{start:()=>{u.games.current.data={game:{score:0,lives:5,level:1,serveTimer:0},bricks:[],particles:[],ball:{x:203.125+93.75/2-15.625/2,y:327.375-15.625*5/4,dx:0,dy:0,width:Ne,height:Ne,lastHit:-1},paddle:{x:203.125,y:327.375,dx:0,width:Ne*6,height:Ne}},ea(Nr[0])},render:t=>{if(!u.games.ctx)return;const e=u.games.current.data.bricks,n=u.games.ctx,r=u.games.current.data;if(n.fillStyle=u.storage.get("dark-mode")?"white":"black",n.fillRect(r.ball.x,r.ball.y,r.ball.width,r.ball.height),n.fillRect(r.paddle.x,r.paddle.y,r.paddle.width,r.paddle.height),e.forEach(i=>{switch(i.hits){case 1:n.fillStyle=On.normal[Math.round(i.x/(Ne*2))],n.fillRect(i.x,i.y,i.width,i.height);break;case 2:n.fillStyle=On.normal[Math.round(i.x/(Ne*2))],n.fillRect(i.x,i.y,i.width,i.height),n.fillStyle=On.dark[Math.round(i.x/(Ne*2))],n.fillRect(i.x+i.height/8,i.y+i.height/8,i.width-i.height*1/4,i.height*3/4);break;case 3:n.fillStyle=On.normal[Math.round(i.x/(Ne*2))],n.fillRect(i.x,i.y,i.width,i.height),n.fillStyle=On.dark[Math.round(i.x/(Ne*2))],n.fillRect(i.x+i.height/8,i.y+i.height/8,i.width-i.height*1/4,i.height*3/4),n.fillStyle=On.normal[Math.round(i.x/(Ne*2))],n.fillRect(i.x+i.height/4,i.y+i.height/4,i.width-i.height*1/2,i.height*1/2);break}}),n.fillStyle=u.storage.get("dark-mode")?"white":"black",u.storage.get("visual-effects")){const i=n.globalAlpha;r.particles.forEach(s=>{n.globalAlpha=s.alpha,n.fillRect(s.x,s.y,s.width,s.height)}),n.globalAlpha=i}},update:(t,e)=>{const n=u.games.current.data,r=n.ball,i=n.paddle;if(i.dx=0,n.game.score>=1e4&&u.achievements.set("breakout-10k-points"),n.game.score>=1e5&&u.achievements.set("breakout-100k-points"),n.game.level>=2&&u.achievements.set("breakout-beat-level"),n.game.level>=10&&u.achievements.set("breakout-level-10"),u.games.keys.Left&&(i.x-=9*e,i.dx-=9*e,i.x<=0&&(i.x=0)),u.games.keys.Right&&(i.x+=9*e,i.dx+=9*e,i.x>=500-i.width&&(i.x=500-i.width)),n.game.serveTimer>0){if(n.game.lives!==0){const a=i.x+46.875-7.8125,c=327.375-15.625*5/4;r.x=ju(.5-n.game.serveTimer,r.lastX,a-r.lastX,.5),r.y=ju(.5-n.game.serveTimer,r.lastY,c-r.lastY,.5),r.dx=0,r.dy=0,n.game.serveTimer>0&&n.bricks.length<=0&&(n.game.score+=17,t%3===0&&(n.game.score--,u.games.sfx("pong/hit")))}n.game.serveTimer-=e/60}else if(n.game.serveTimer<=0&&Math.round(n.game.serveTimer)!==-1)n.bricks.length<=0&&(n.game.level>=Nr.length?ea(Nr[Math.floor(Math.random()*Nr.length)]):ea(Nr[n.game.level]),n.game.level++,n.game.lives++),n.game.lives<=0&&(u.stats.get("breakout-high-score")<n.game.score&&u.stats.set("breakout-high-score",n.game.score),u.stats.get("breakout-highest-level")<n.game.level&&u.stats.set("breakout-highest-level",n.game.level),u.games.end({message:"Game Over",score:{Score:n.game.score,Level:n.game.level}})),r.x=i.x+93.75/2-15.625/2,r.y=i.y-15.625*5/4,r.dx=0,r.dy=0,n.game.serveTimer=0,u.games.keys.Primary&&(n.game.serveTimer=-1,r.dx=i.dx*2/3,r.dx===0&&(r.dx=Math.random()<.5?-6:6),r.dy=-3);else{r.x+=r.dx*e,r.y+=r.dy*e,n.bricks.length<=0&&(n.game.serveTimer=.5,r.lastX=r.x,r.lastY=r.y);let c=0;r.y<0&&r.dy<0?(r.y=-r.y,r.dy=-r.dy,u.games.sfx("pong/hit"),c++):cm(r,i)?(r.y-r.dy>i.y-15.625&&Math.abs(r.dx)<i.width?(r.dx*=Math.sign(r.dx),r.dx*=r.x<i.x+93.75/2?-1:1,r.x=i.x+(r.x<i.x+93.75/2?-15.625:93.75),r.dx+=1*i.dx/4):(r.y=i.y-15.625,r.dy*=-1,r.dx+=1*i.dx/4),u.games.sfx("pong/hit")):r.y>375&&r.dy>0&&(n.game.serveTimer=.5,r.lastX=r.x,r.lastY=r.y,n.game.lives=n.game.lives-1,u.games.sfx("pong/win")),r.x<0&&r.dx<0?(r.x=-r.x,r.dx=-r.dx,u.games.sfx("pong/hit"),c++):r.x>500-r.width&&r.dx>0&&(r.x-=500-r.width,r.x=-r.x,r.x+=500-r.width,r.dx=-r.dx,u.games.sfx("pong/hit"),c++),c>=2&&u.achievements.set("breakout-hit-the-corner")}if(u.storage.get("visual-effects")&&(lm(u.games.current.data.particles,r),Math.sqrt(r.dx**2+r.dy**2)>=3.5*3)){const a=Math.sqrt(r.dx**2+r.dy**2)/15.625;for(let c=0;c<a;c+=.25){let l=r.y-r.dy*c/a;l<-15.625&&(l+=15.625,l=-l,l-=15.625),u.games.current.data.particles.push({x:r.x-r.dx*c/a,y:l,width:15.625,height:15.625,alpha:.5})}}const s=r.lastHit;r.lastHit=-1;const o=n.bricks;for(const a of o){let c=r.x-r.dx+r.width/2-a.x-a.width/2,l=r.y-r.dy+r.height/2-a.y-a.height/2;const h=Math.sqrt(c**2+l**2);c/=h,l/=h;const d=Math.acos(l)/Math.PI*180;if(r.x+16>a.x&&r.x<a.x+a.width&&r.y+16>a.y&&r.y<a.y+a.height){u.games.sfx("pong/hit"),(d>=60&&d<=120||d>=240&&d<=300)&&(s===1||s===-1)?(r.dx*=-1,r.lastHit=0):(r.dy*=-1,r.lastHit=1),a.hits--,a.hits===0&&o.splice(o.indexOf(a),1),n.game.score+=9+n.game.level;break}}u.games.setScoreboard({Score:Math.round(n.game.score),Level:n.game.level,Lives:n.game.lives})}},page:{width:500,height:375}},dm=t=>{for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}},fm={1:"#0100FE",2:"#017F01",3:"#FE0000",4:"#010080",5:"#810102",6:"#008081",7:"#000000",8:"#808080"},hm={0:"#373737",1:"#3F3F7F",2:"#3B7F3B",3:"#7F1919",4:"#0C0C7F",5:"#4C0707",6:"#197F7F",7:"#303030",8:"#000000"},Ns=(t,e,n)=>{const r=u.games.current.data;if(r.grid[e][t].opened){let i=0;for(let s=-1;s<=1;s++)for(let o=-1;o<=1;o++)r.grid[e+s]&&r.grid[e+s][t+o]&&r.grid[e+s][t+o].flagged&&i++;if(i===r.grid[e][t].adjacentMines){let s=0;for(let o=-1;o<=1;o++)for(let a=-1;a<=1;a++)r.grid[e+o]&&r.grid[e+o][t+a]&&!r.grid[e+o][t+a].opened&&!r.grid[e+o][t+a].flagged&&(s+=Ns(t+a,e+o,!1));return n&&s&&(s>=4?u.games.sfx("minesweeper/digMany"):u.games.sfx("minesweeper/dig"+s)),s}else return 0}else{if(r.grid[e][t].isMine&&!r.grid[e][t].flagged)return u.games.sfx("minesweeper/boom"),r.hasLost=!0,0;if(!r.grid[e][t].flagged){r.grid[e][t].opened=!0;let i=0;if(r.grid[e][t].adjacentMines===0)for(let s=-1;s<=1;s++)for(let o=-1;o<=1;o++)r.grid[e+s]&&r.grid[e+s][t+o]&&!r.grid[e+s][t+o].opened&&!r.grid[e+s][t+o].flagged&&(i+=Ns(t+o,e+s,!1));return n&&i&&(i>0||r.grid[e][t].adjacentMines>4?u.games.sfx("minesweeper/digMany"):u.games.sfx("minesweeper/dig"+r.grid[e][t].adjacentMines)),i+1}}return 0},ta=(t,e,n,r,i,s)=>(r<2*s&&(s=r/2),i<2*s&&(s=i/2),t.beginPath(),t.moveTo(e+s,n),t.arcTo(e+r,n,e+r,n+i,s),t.arcTo(e+r,n+i,e,n+i,s),t.arcTo(e,n+i,e,n,s),t.arcTo(e,n,e+r,n,s),t.closePath(),t),pm=(t,e)=>{const n=u.games.current.data,r=u.storage.get("minesweeper-difficulty")||1,i=r**2*10,s=r*8,o=[];for(let c=0;c<s;c++)for(let l=0;l<s;l++)Math.abs(c-t)<=Math.ceil(r/2+.5)&&Math.abs(l-e)<=Math.ceil(r/2+.5)||o.push([c,l]);dm(o),o.slice(0,i).forEach(c=>n.grid[c[1]][c[0]].isMine=!0),n.grid.forEach((c,l)=>{c.forEach((h,d)=>{var p,y,S;for(let w=-1;w<=1;w++)for(let v=-1;v<=1;v++)(S=(y=(p=n.grid)==null?void 0:p[l+v])==null?void 0:y[d+w])!=null&&S.isMine&&!(w===0&&v===0)&&h.adjacentMines++})}),n.hasGenerated=!0,Ns(t,e,!0)},mm={name:"Minesweeper",id:"minesweeper",info:"Use <kbd>Left Click</kbd> to dig up a cell, and <kbd>Right Click</kbd> to flag a cell as a mine. The numbers represent how many mines are adjacent to that cell, locate all mines to win!",functions:{start:()=>{const t=u.storage.get("minesweeper-difficulty")||1;u.games.current.data={grid:JSON.parse(JSON.stringify(Array(t*8).fill(Array(t*8).fill({isMine:!1,flagged:!1,opened:!1,adjacentMines:0})))),totalMines:t*t*10,hasGenerated:!1,time:0,hasDied:!1,hasWon:!1,endTimer:0}},render:t=>{if(!u.games.ctx)return;const e=u.games.ctx,n=u.games.current.data,r=1/u.storage.get("minesweeper-difficulty")||1;n.grid.forEach((i,s)=>{i.forEach((o,a)=>{e.fillStyle=u.storage.get("dark-mode")?"#272727":"#e2e2e2",ta(e,50+(50*a+5)*r,50+(50*s+5)*r,40*r,40*r,5*r).fill(),(o.opened||n.hasWon||n.hasLost)&&(e.fillStyle=u.storage.get("dark-mode")?hm[o.adjacentMines]:"#d2d2d2",ta(e,50+(50*a+5)*r,50+(50*s+5)*r,40*r,40*r,5*r).fill(),o.isMine?(e.fillStyle=u.storage.get("dark-mode")?"#571717":"#f2a2a2",ta(e,50+(50*a+5)*r,50+(50*s+5)*r,40*r,40*r,5*r).fill(),e.font=30*r+"px Roboto",e.textAlign="center",e.fillStyle=u.storage.get("dark-mode")?"white":"black",e.fillText("💣",50+(50*a+25)*r,50+(50*s+35)*r,40*r)):o.adjacentMines!==0&&(e.font=40*r+"px Roboto",e.textAlign="center",e.fillStyle=u.storage.get("dark-mode")?"white":fm[o.adjacentMines],e.fillText(String(o.adjacentMines),50+(50*a+25)*r,50+(50*s+40)*r,40*r))),o.flagged&&(e.font=30*r+"px Roboto",e.textAlign="center",e.fillStyle=u.storage.get("dark-mode")?"white":"black",e.fillText("🚩",50+(50*a+25)*r,50+(50*s+35)*r,30*r))})})},update:(t,e)=>{const n=u.games.current.data;!n.hasWon&&!n.hasLost&&(u.games.setScoreboard({"Mines Left":n.totalMines-n.grid.flat().map(r=>r.flagged).reduce((r,i)=>r+(i?1:0)),Time:Math.round(n.time*10)/10}),n.grid.flat().map(r=>r.flagged||r.opened).reduce((r,i)=>r+(i?1:0))===n.grid.length**2&&n.grid.flat().map(r=>(r.flagged&&r.isMine?1:0)-(r.flagged&&!r.isMine?-1:0)).reduce((r,i)=>r+i)===(u.storage.get("minesweeper-difficulty")||1)**2*10&&(n.hasWon=!0,u.games.sfx("minesweeper/win"))),n.hasWon||n.hasLost?n.endTimer+=e/60:n.time+=e/60,n.endTimer>=1&&(n.hasLost?u.games.end({message:"Boom!",score:{Time:Math.round(n.time*100)/100,Difficulty:["","Easy","Intermediate","Expert","","Impossible"][u.storage.get("minesweeper-difficulty")||1]}}):(u.stats.increase("minesweeper-wins"),(u.stats.get("minesweeper-fastest-game")>n.time||u.stats.get("minesweeper-fastest-game")===0)&&u.stats.set("minesweeper-fastest-game",Math.round(n.time*100)/100),u.achievements.set("minesweeper-"+["","easy","intermediate","expert","","impossible"][u.storage.get("minesweeper-difficulty")||1]),n.time<=15&&u.achievements.set("minesweeper-15s"),u.games.end({message:"You win!",score:{Time:Math.round(n.time*100)/100,Difficulty:["","Easy","Intermediate","Expert","","Impossible"][u.storage.get("minesweeper-difficulty")||1]}})))},click:t=>{if(u.pages.get()!=="game"||u.storage.get("game")!=="minesweeper")return;const e=u.games.current.data;if(e.hasWon||e.hasLost)return;const n=1/u.storage.get("minesweeper-difficulty")||1,r=e.grid.length;if(!(t.x<50+5*n||t.y<50+5*n||t.x>=50+(50*r+5)||t.y>=50+(50*r+5))){const i=Math.floor((t.x-(45+5*n))/(50*n)),s=Math.floor((t.y-(45+5*n))/(50*n));if(t.button==="right")if(!e.grid[s][i].opened)e.grid[s][i].flagged=!e.grid[s][i].flagged,e.grid[s][i].flagged?u.games.sfx("minesweeper/flag"):u.games.sfx("minesweeper/unflag");else{let o=0;for(let a=-1;a<=1;a++)for(let c=-1;c<=1;c++)e.grid[s+a]&&e.grid[s+a][i+c]&&(e.grid[s+a][i+c].flagged||!e.grid[s+a][i+c].opened)&&o++;if(o===e.grid[s][i].adjacentMines){let a=0;for(let c=-1;c<=1;c++)for(let l=-1;l<=1;l++)e.grid[s+c]&&e.grid[s+c][i+l]&&!e.grid[s+c][i+l].opened&&!e.grid[s+c][i+l].flagged&&(a++,e.grid[s+c][i+l].flagged=!0);a&&u.games.sfx("minesweeper/flag")}}else t.button==="left"&&(e.hasGenerated?Ns(i,s,!0):pm(i,s))}}},page:{width:500,height:500},options:[{name:"Game Difficulty",info:"Choose the game difficulty",id:"minesweeper-difficulty",type:"dropdown",default:2,options:[{name:"Easy",id:1},{name:"Intermediate",id:2},{name:"Expert",id:3},{name:"Impossible",id:5}]}]},gm={name:"Pacman",id:"pacman",info:"The ghosts of the dead have risen! Use <kbd>[UP]</kbd>, <kbd>[DOWN]</kbd>, <kbd>[LEFT]</kbd> and <kbd>[RIGHT]</kbd> to collect pellets. Collect them all to escape. Obtain a power pellet to fight back!",functions:{start:()=>{u.games.current.data={maps:[[[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,1],[1,3,1,1,2,1,1,1,2,1,2,1,1,1,2,1,1,3,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,2,1,2,1,1,1,1,1,2,1,2,1,1,2,1],[1,2,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,2,1],[1,1,1,1,2,1,1,1,0,1,0,1,1,1,2,1,1,1,1],[0,0,0,1,2,1,0,0,0,0,0,0,0,1,2,1,0,0,0],[1,1,1,1,2,1,0,1,1,1,1,1,0,1,2,1,1,1,1],[0,0,0,0,2,0,0,1,0,0,0,1,0,0,2,0,0,0,0],[1,1,1,1,2,1,0,1,1,1,1,1,0,1,2,1,1,1,1],[0,0,0,1,2,1,0,0,0,0,0,0,0,1,2,1,0,0,0],[1,1,1,1,2,1,0,1,1,1,1,1,0,1,2,1,1,1,1],[1,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,1],[1,2,1,1,2,1,1,1,2,1,2,1,1,1,2,1,1,2,1],[1,3,2,1,2,2,2,2,2,0,2,2,2,2,2,1,2,3,1],[1,1,2,1,2,1,2,1,1,1,1,1,2,1,2,1,2,1,1],[1,2,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,2,1],[1,2,1,1,1,1,1,1,2,1,2,1,1,1,1,1,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,5,2,2,4,2,2,2,5,1,5,2,2,2,4,2,2,5,1],[1,3,1,1,2,1,1,1,2,1,2,1,1,1,2,1,1,3,1],[1,4,2,2,4,2,4,2,4,2,4,2,4,2,4,2,2,4,1],[1,2,1,1,2,1,2,1,1,1,1,1,2,1,2,1,1,2,1],[1,5,2,2,4,1,5,2,5,1,5,2,5,1,4,2,2,5,1],[1,1,1,1,2,1,1,1,0,1,0,1,1,1,2,1,1,1,1],[0,0,0,1,2,1,5,0,7,7,7,0,5,1,2,1,0,0,0],[1,1,1,1,2,1,0,1,1,8,1,1,0,1,2,1,1,1,1],[0,0,0,0,4,0,4,1,6,6,6,1,4,0,4,0,0,0,0],[1,1,1,1,2,1,0,1,1,1,1,1,0,1,2,1,1,1,1],[0,0,0,1,2,1,4,0,0,0,0,0,4,1,2,1,0,0,0],[1,1,1,1,2,1,0,1,1,1,1,1,0,1,2,1,1,1,1],[1,5,2,2,4,2,4,2,5,1,5,2,4,2,4,2,2,5,1],[1,2,1,1,2,1,1,1,2,1,2,1,1,1,2,1,1,2,1],[1,5,5,1,4,2,4,2,7,0,7,2,4,2,4,1,5,5,1],[1,1,2,1,2,1,2,1,1,1,1,1,2,1,2,1,2,1,1],[1,5,4,2,5,1,5,2,5,1,5,2,5,1,5,2,4,5,1],[1,2,1,1,1,1,1,1,2,1,2,1,1,1,1,1,1,2,1],[1,5,2,2,2,2,2,2,4,2,4,2,2,2,2,2,2,5,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]]],player:{x:9,y:15,map:0,lives:5,level:1,score:0,dir:"up",offset:{x:0,y:0}},ghosts:{data:[{name:"clyde",x:8,y:9,left:!1,dir:"up",mode:"scatter",spawn:{x:8,y:9},target:{x:0,y:0},offset:{x:0,y:0}},{name:"blinky",x:9,y:7,left:!1,dir:"up",mode:"scatter",spawn:{x:9,y:7},target:{x:0,y:0},offset:{x:0,y:0}},{name:"pinky",x:9,y:9,left:!1,dir:"up",mode:"scatter",spawn:{x:9,y:9},target:{x:0,y:0},offset:{x:0,y:0}},{name:"inky",x:10,y:9,left:!1,dir:"up",mode:"scatter",spawn:{x:10,y:9},target:{x:0,y:0},offset:{x:0,y:0}}],timers:{modeTimer:0,vulnerable:{vulnerableTimer:0,levelTimers:[4,3,2,1,0,3,0,0,0,3,0,0,0,1,0,0,0,0,0]}},killCombo:200,vulnerable:!1,mode:"scatter"}}},render:t=>{if(!u.games.ctx)return;const e=u.games.current.data.player,n=u.games.current.data.maps,r=u.games.current.data.ghosts,i=u.games.ctx;n[e.map][0].forEach((o,a)=>{o.forEach((c,l)=>{n[e.map][0][a][l]===1?(i.strokeStyle="#2121de",i.lineWidth=3,a!==0&&a!==n[e.map][0].length-1?n[e.map][0][a+1][l]===1&&n[e.map][0][a-1][l]!==1&&n[e.map][0][a][l+1]!==1&&n[e.map][0][a][l-1]!==1?(i.beginPath(),i.moveTo(25*l+20,25*a+25),i.lineTo(25*l+20,25*a+12.5),i.arc(25*l+12.5,25*a+12.5,7.5,0,Math.PI,!0),i.lineTo(25*l+5,25*a+25),i.stroke()):n[e.map][0][a+1][l]!==1&&n[e.map][0][a-1][l]===1&&n[e.map][0][a][l+1]!==1&&n[e.map][0][a][l-1]!==1?(i.beginPath(),i.moveTo(25*l+20,25*a),i.lineTo(25*l+20,25*a+12.5),i.arc(25*l+12.5,25*a+12.5,7.5,0,Math.PI,!1),i.lineTo(25*l+5,25*a),i.stroke()):n[e.map][0][a+1][l]!==1&&n[e.map][0][a-1][l]!==1&&n[e.map][0][a][l+1]===1&&n[e.map][0][a][l-1]!==1?(i.beginPath(),i.moveTo(25*l+25,25*a+20),i.lineTo(25*l+12.5,25*a+20),i.arc(25*l+12.5,25*a+12.5,7.5,Math.PI/2,Math.PI*1.5,!1),i.lineTo(25*l+25,25*a+5),i.stroke()):n[e.map][0][a+1][l]!==1&&n[e.map][0][a-1][l]!==1&&n[e.map][0][a][l+1]!==1&&n[e.map][0][a][l-1]===1?(i.beginPath(),i.moveTo(25*l,25*a+20),i.lineTo(25*l+12.5,25*a+20),i.arc(25*l+12.5,25*a+12.5,7.5,Math.PI/2,Math.PI*1.5,!0),i.lineTo(25*l,25*a+5),i.stroke()):n[e.map][0][a+1][l]===1&&n[e.map][0][a-1][l]===1&&n[e.map][0][a][l+1]!==1&&n[e.map][0][a][l-1]!==1?(i.beginPath(),i.moveTo(25*l+5,25*a),i.lineTo(25*l+5,25*a+25),i.moveTo(25*l+20,25*a),i.lineTo(25*l+20,25*a+25),i.stroke()):n[e.map][0][a+1][l]===1&&n[e.map][0][a-1][l]!==1&&n[e.map][0][a][l+1]===1&&n[e.map][0][a][l-1]!==1?(i.beginPath(),i.arc(25*l+25,25*a+25,5,Math.PI*1.5,Math.PI,!0),i.moveTo(25*l+25,25*a+5),i.lineTo(25*l+12.5,25*a+5),i.arc(25*l+12.5,25*a+12.5,7.5,Math.PI*1.5,Math.PI,!0),i.lineTo(25*l+5,25*a+25),i.stroke()):n[e.map][0][a+1][l]===1&&n[e.map][0][a-1][l]!==1&&n[e.map][0][a][l+1]!==1&&n[e.map][0][a][l-1]===1?(i.beginPath(),i.arc(25*l,25*a+25,5,0,Math.PI*1.5,!0),i.moveTo(25*l,25*a+5),i.lineTo(25*l+12.5,25*a+5),i.arc(25*l+12.5,25*a+12.5,7.5,Math.PI*1.5,0,!1),i.lineTo(25*l+20,25*a+25),i.stroke()):n[e.map][0][a+1][l]!==1&&n[e.map][0][a-1][l]===1&&n[e.map][0][a][l+1]===1&&n[e.map][0][a][l-1]!==1?(i.beginPath(),i.arc(25*l+25,25*a,5,Math.PI/2,Math.PI,!1),i.moveTo(25*l+5,25*a),i.lineTo(25*l+5,25*a+12.5),i.arc(25*l+12.5,25*a+12.5,7.5,Math.PI,Math.PI/2,!0),i.lineTo(25*l+25,25*a+20),i.stroke()):n[e.map][0][a+1][l]!==1&&n[e.map][0][a-1][l]===1&&n[e.map][0][a][l+1]!==1&&n[e.map][0][a][l-1]===1?(i.beginPath(),i.arc(25*l,25*a,5,0,Math.PI/2,!1),i.moveTo(25*l+20,25*a),i.lineTo(25*l+20,25*a+12.5),i.arc(25*l+12.5,25*a+12.5,7.5,0,Math.PI/2,!1),i.lineTo(25*l,25*a+20),i.stroke()):n[e.map][0][a+1][l]!==1&&n[e.map][0][a-1][l]!==1&&n[e.map][0][a][l+1]===1&&n[e.map][0][a][l-1]===1?(i.beginPath(),i.moveTo(25*l,25*a+5),i.lineTo(25*l+25,25*a+5),i.moveTo(25*l,25*a+20),i.lineTo(25*l+25,25*a+20),i.stroke()):n[e.map][0][a+1][l]!==1&&n[e.map][0][a-1][l]===1&&n[e.map][0][a][l+1]===1&&n[e.map][0][a][l-1]===1?(i.beginPath(),i.arc(25*l,25*a,5,0,Math.PI/2,!1),i.stroke(),i.beginPath(),i.arc(25*l+25,25*a,5,Math.PI,Math.PI/2,!0),i.moveTo(25*l,25*a+20),i.lineTo(25*l+25,25*a+20),i.stroke()):n[e.map][0][a+1][l]===1&&n[e.map][0][a-1][l]!==1&&n[e.map][0][a][l+1]===1&&n[e.map][0][a][l-1]===1?(i.beginPath(),i.arc(25*l,25*a+25,5,Math.PI*1.5,0,!1),i.stroke(),i.beginPath(),i.arc(25*l+25,25*a+25,5,Math.PI,Math.PI*1.5,!1),i.moveTo(25*l,25*a+5),i.lineTo(25*l+25,25*a+5),i.stroke()):n[e.map][0][a+1][l]===1&&n[e.map][0][a-1][l]===1&&n[e.map][0][a][l+1]!==1&&n[e.map][0][a][l-1]===1?(i.beginPath(),i.arc(25*l,25*a+25,5,Math.PI*1.5,0,!1),i.stroke(),i.beginPath(),i.arc(25*l,25*a,5,0,Math.PI/2,!1),i.moveTo(25*l+20,25*a),i.lineTo(25*l+20,25*a+25),i.stroke()):n[e.map][0][a+1][l]===1&&n[e.map][0][a-1][l]===1&&n[e.map][0][a][l+1]===1&&n[e.map][0][a][l-1]!==1?(i.beginPath(),i.arc(25*l+25,25*a+25,5,Math.PI,Math.PI*1.5,!1),i.stroke(),i.beginPath(),i.arc(25*l+25,25*a,5,Math.PI,Math.PI/2,!0),i.moveTo(25*l+5,25*a),i.lineTo(25*l+5,25*a+25),i.stroke()):n[e.map][0][a+1][l]===1&&n[e.map][0][a-1][l]===1&&n[e.map][0][a][l+1]===1&&n[e.map][0][a][l-1]===1?(i.beginPath(),i.arc(25*l+25,25*a+25,5,Math.PI,Math.PI*1.5,!1),i.stroke(),i.beginPath(),i.arc(25*l+25,25*a,5,Math.PI,Math.PI/2,!0),i.stroke(),i.beginPath(),i.arc(25*l,25*a+25,5,Math.PI*1.5,Math.PI/2,!1),i.stroke(),i.beginPath(),i.arc(25*l,25*a,5,Math.PI/2,0,!0),i.stroke()):n[e.map][0][a+1][l]!==1&&n[e.map][0][a-1][l]!==1&&n[e.map][0][a][l+1]!==1&&n[e.map][0][a][l-1]!==1&&(i.beginPath(),i.arc(25*l+12.5,25*a+12.5,7.5,0,Math.PI*2,!0),i.stroke()):a===0?n[e.map][0][a+1][l]===1&&n[e.map][0][a][l+1]===1&&n[e.map][0][a][l-1]!==1?(i.beginPath(),i.arc(25*l+25,25*a+25,5,Math.PI,Math.PI*1.5,!1),i.moveTo(25*l+25,25*a+5),i.lineTo(25*l+12.5,25*a+5),i.arc(25*l+12.5,25*a+12.5,7.5,Math.PI*1.5,Math.PI,!0),i.lineTo(25*l+5,25*a+25),i.stroke()):n[e.map][0][a+1][l]===1&&n[e.map][0][a][l+1]!==1&&n[e.map][0][a][l-1]===1?(i.beginPath(),i.arc(25*l,25*a+25,5,0,Math.PI*1.5,!0),i.moveTo(25*l,25*a+5),i.lineTo(25*l+12.5,25*a+5),i.arc(25*l+12.5,25*a+12.5,7.5,Math.PI*1.5,0,!1),i.lineTo(25*l+20,25*a+25),i.stroke()):n[e.map][0][a+1][l]!==1&&n[e.map][0][a][l+1]===1&&n[e.map][0][a][l-1]===1?(i.beginPath(),i.moveTo(25*l,25*a+5),i.lineTo(25*l+25,25*a+5),i.moveTo(25*l,25*a+20),i.lineTo(25*l+25,25*a+20),i.stroke()):n[e.map][0][a+1][l]===1&&n[e.map][0][a][l+1]===1&&n[e.map][0][a][l-1]===1&&(i.beginPath(),i.arc(25*l,25*a+25,5,Math.PI*1.5,0,!1),i.stroke(),i.beginPath(),i.arc(25*l+25,25*a+25,5,Math.PI,Math.PI*1.5,!1),i.moveTo(25*l,25*a+5),i.lineTo(25*l+25,25*a+5),i.stroke()):n[e.map][0][a-1][l]===1&&n[e.map][0][a][l+1]===1&&n[e.map][0][a][l-1]!==1?(i.beginPath(),i.arc(25*l+25,25*a,5,Math.PI,Math.PI/2,!0),i.moveTo(25*l+5,25*a),i.lineTo(25*l+5,25*a+12.5),i.arc(25*l+12.5,25*a+12.5,7.5,Math.PI,Math.PI/2,!0),i.lineTo(25*l+25,25*a+20),i.stroke()):n[e.map][0][a-1][l]===1&&n[e.map][0][a][l+1]!==1&&n[e.map][0][a][l-1]===1?(i.beginPath(),i.arc(25*l,25*a,5,0,Math.PI/2,!1),i.moveTo(25*l+20,25*a),i.lineTo(25*l+20,25*a+12.5),i.arc(25*l+12.5,25*a+12.5,7.5,0,Math.PI/2,!1),i.lineTo(25*l,25*a+20),i.stroke()):n[e.map][0][a-1][l]!==1&&n[e.map][0][a][l+1]===1&&n[e.map][0][a][l-1]===1?(i.beginPath(),i.moveTo(25*l,25*a+5),i.lineTo(25*l+25,25*a+5),i.moveTo(25*l,25*a+20),i.lineTo(25*l+25,25*a+20),i.stroke()):n[e.map][0][a-1][l]===1&&n[e.map][0][a][l+1]===1&&n[e.map][0][a][l-1]===1&&(i.beginPath(),i.arc(25*l,25*a,5,0,Math.PI/2,!1),i.stroke(),i.beginPath(),i.arc(25*l+25,25*a,5,Math.PI,Math.PI/2,!0),i.moveTo(25*l,25*a+20),i.lineTo(25*l+25,25*a+20),i.stroke())):n[e.map][0][a][l]===2?(i.beginPath(),i.arc(25*l+13,25*a+13,2,0,Math.PI*2,!1),i.fillStyle=u.storage.get("dark-mode")?"#ffffff":"#000000",i.fill(),i.closePath()):n[e.map][0][a][l]===3&&(i.beginPath(),i.arc(25*l+13,25*a+13,7,0,Math.PI*2,!1),i.fillStyle=u.storage.get("dark-mode")?"#ffffff":"#000000",i.fill(),i.closePath())})}),i.fillStyle="#808080",i.fillRect(225,204,25,17),e.fruit&&[[[0,0,0,0,0,0,2,2],[0,0,0,0,0,2,2,0],[0,0,0,0,2,2,0,0],[0,0,0,2,0,2,0,0],[0,1,1,0,0,2,0,0],[1,1,1,1,0,1,1,0],[1,1,1,1,1,1,1,1],[0,1,1,0,1,1,1,1],[0,0,0,0,0,1,1,0]],[[0,0,0,0,2,0,0,0,0],[0,0,2,2,2,2,2,0,0],[0,2,2,2,2,2,2,2,0],[1,1,2,1,2,1,2,1,1],[1,1,1,1,1,1,1,1,1],[1,1,5,1,5,1,5,1,1],[1,1,1,1,1,1,1,1,1],[0,1,1,5,1,5,1,1,0],[0,0,1,1,1,1,1,0,0],[0,0,0,1,1,1,0,0,0]],[[0,0,0,0,0,2,2,0,0],[0,0,0,0,2,2,0,0,0],[0,0,4,4,4,4,4,0,0],[0,4,4,4,4,4,4,4,0],[4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4],[0,4,4,4,4,4,4,4,0],[0,0,4,4,4,4,4,0,0]],[[0,0,0,0,0,2,2,0,0],[0,0,0,0,2,2,0,0,0],[0,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,0],[0,0,1,1,0,1,1,0,0]],[[0,0,0,0,2,2,0,0],[0,0,0,2,2,0,0,0],[0,0,0,3,3,0,0,0],[0,0,3,3,3,3,0,0],[0,0,3,3,3,3,0,0],[0,3,3,3,3,3,3,0],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[0,3,3,3,3,3,3,0],[0,0,3,3,3,3,0,0]]][e.fruit-1].forEach((a,c)=>{a.forEach((l,h)=>{if(l===1)i.fillStyle="#ff0000";else if(l===2)i.fillStyle="#37b34a";else if(l===3)i.fillStyle="#8bc53f";else if(l===4)i.fillStyle="#f6921e";else if(l===5)i.fillStyle="#000000";else return;i.fillRect(225+h*2+(e.fruit===1||e.fruit===5?5:4),375+c*2+(e.fruit===1?4:3),2,2)})}),[[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0],[0,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,0],[0,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,0],[1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0]],[[0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0]]][t%30>15?0:1].forEach((o,a)=>{o.forEach((c,l)=>{if(c===1)switch(i.fillStyle="#ffff00",e.dir){case"up":i.fillRect(e.x*25+l+3+Math.round(e.offset.x),e.y*25+a+3+Math.round(e.offset.y),1,1);break;case"down":i.fillRect(e.x*25-l+21+Math.round(e.offset.x),e.y*25-a+21+Math.round(e.offset.y),1,1);break;case"left":i.fillRect(e.x*25+a+3+Math.round(e.offset.x),e.y*25+l+3+Math.round(e.offset.y),1,1);break;case"right":i.fillRect(e.x*25-a+21+Math.round(e.offset.x),e.y*25-l+21+Math.round(e.offset.y),1,1);break}})}),r.data.forEach(o=>{const a=[[[0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,3,1,1,1,1,1,1,1,1,3,1,1,1,1,1,0],[0,1,3,3,3,1,1,1,1,1,1,3,3,3,1,1,1,1,0],[0,2,2,3,3,3,1,1,1,1,2,2,3,3,3,1,1,1,0],[2,2,2,2,3,3,1,1,1,2,2,2,2,3,3,1,1,1,1],[2,2,2,2,3,3,1,1,1,2,2,2,2,3,3,1,1,1,1],[1,2,2,3,3,3,1,1,1,1,2,2,3,3,3,1,1,1,1],[1,1,3,3,3,1,1,1,1,1,1,3,3,3,1,1,1,1,1],[1,1,1,3,1,1,1,1,1,1,1,1,3,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,0,0,1,1,1,1,1,1,0,0,0,1,1,1],[0,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,0]],[[0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,2,2,1,1,1,1,1,1,1,2,2,1,1,1,0],[0,1,1,2,2,2,2,1,1,1,1,1,2,2,2,2,1,1,0],[0,1,3,2,2,2,2,3,1,1,1,3,2,2,2,2,3,1,0],[1,1,3,3,2,2,3,3,1,1,1,3,3,2,2,3,3,1,1],[1,1,3,3,3,3,3,3,1,1,1,3,3,3,3,3,3,1,1],[1,1,1,3,3,3,3,1,1,1,1,1,3,3,3,3,1,1,1],[1,1,1,1,3,3,1,1,1,1,1,1,1,3,3,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,0,0,1,1,1,1,1,1,0,0,0,1,1,1],[0,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,0]],[[0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,3,3,1,1,1,1,1,1,1,3,3,1,1,1,0],[0,1,1,3,3,3,3,1,1,1,1,1,3,3,3,3,1,1,0],[0,1,3,3,3,3,3,3,1,1,1,3,3,3,3,3,3,1,0],[1,1,3,3,2,2,3,3,1,1,1,3,3,2,2,3,3,1,1],[1,1,3,2,2,2,2,3,1,1,1,3,2,2,2,2,3,1,1],[1,1,1,2,2,2,2,1,1,1,1,1,2,2,2,2,1,1,1],[1,1,1,1,2,2,1,1,1,1,1,1,1,2,2,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,0,0,1,1,1,1,1,1,0,0,0,1,1,1],[0,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,0]],[[0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,4,4,4,1,1,1,4,4,4,1,1,1,1,0],[0,1,1,1,1,4,4,4,1,1,1,4,4,4,1,1,1,1,0],[1,1,1,1,1,4,4,4,1,1,1,4,4,4,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,4,4,1,1,4,4,4,1,1,4,4,1,1,1,1],[1,1,1,1,4,4,1,1,4,4,4,1,1,4,4,1,1,1,1],[1,1,1,4,1,1,4,4,1,1,1,4,4,1,1,4,1,1,1],[1,1,1,4,1,1,4,4,1,1,1,4,4,1,1,4,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,0,0,1,1,1,1,1,1,0,0,0,1,1,1],[0,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,0]]];let c=0;if(o.mode!=="vulnerable")switch(o.dir){case"left":case"right":c=0;break;case"up":c=1;break;case"down":c=2;break}else c=3;a[c].forEach((l,h)=>{l.forEach((d,p)=>{if(d===1)o.mode==="vulnerable"?i.fillStyle=t%30<15?"#0000ff":"#ffffff":o.name==="blinky"?i.fillStyle="#ff0000":o.name==="pinky"?i.fillStyle="#ff00ff":o.name==="inky"?i.fillStyle="#00ffff":o.name==="clyde"&&(i.fillStyle="#ffff00");else if(d===2)i.fillStyle="#0000ff";else if(d===3)i.fillStyle="#ffffff";else if(d===4)i.fillStyle=t%30<15?"#fab9b0":"#ff0000";else return;o.dir==="right"?i.fillRect(25*o.x-p+Math.round(o.offset.x)+21,25*o.y+h+Math.round(o.offset.y)+3,1,1):i.fillRect(25*o.x+p+Math.round(o.offset.x)+3,25*o.y+h+Math.round(o.offset.y)+3,1,1)})})})},update:(t,e)=>{e*=1.4;const n=(l,h,d,p)=>Math.sqrt(Math.pow(p-h,2)+Math.pow(d-l,2)),r=l=>{switch(l.dir){case"up":a[o.map][1][l.y-1][l.x]!==1?(l.offset.x=0,l.mode!=="vulnerable"?l.offset.y-=e:l.offset.y-=e/2,l.offset.y<=-12&&(l.offset.y=13,l.y--)):Math.round(l.offset.y)!==0&&(Math.round(l.offset.y)>0?l.mode!=="vulnerable"?l.offset.y-=e:l.offset.y-=e/2:l.mode!=="vulnerable"?l.offset.y+=e:l.offset.y+=e/2);break;case"down":a[o.map][1][l.y+1][l.x]!==1?(l.offset.x=0,l.mode!=="vulnerable"?l.offset.y+=e:l.offset.y+=e/2,l.offset.y>=12&&(l.offset.y=-13,l.y++)):Math.round(l.offset.y)!==0&&(Math.round(l.offset.y)>0?l.mode!=="vulnerable"?l.offset.y-=e:l.offset.y-=e/2:l.mode!=="vulnerable"?l.offset.y+=e:l.offset.y+=e/2);break;case"left":a[o.map][1][l.y][l.x-1]!==1?(l.offset.y=0,l.mode!=="vulnerable"?l.offset.x-=e:l.offset.x-=e/2,l.offset.x<=-12&&(l.offset.x=13,l.x--)):Math.round(l.offset.x)!==0&&(Math.round(l.offset.x)>0?l.mode!=="vulnerable"?l.offset.x-=e:l.offset.x-=e/2:l.mode!=="vulnerable"?l.offset.x+=e:l.offset.x+=e/2);break;case"right":a[o.map][1][l.y][l.x+1]!==1?(l.offset.y=0,l.mode!=="vulnerable"?l.offset.x+=e:l.offset.x+=e/2,l.offset.x>=12&&(l.offset.x=-13,l.x++)):Math.round(l.offset.x)!==0&&(Math.round(l.offset.x)>0?l.mode!=="vulnerable"?l.offset.x-=e:l.offset.x-=e/2:l.mode!=="vulnerable"?l.offset.x+=e:l.offset.x+=e/2);break}l.y===9&&l.x<=-1&&Math.floor(l.offset.x)===0?l.x=19:l.y===9&&l.x>=19&&Math.floor(l.offset.x)===0&&(l.x=-1)},i=l=>{o.score+=c.killCombo,c.killCombo*=2,l.target={x:0,y:0},l.x=l.spawn.x,l.y=l.spawn.y,l.left=!1,s(l),u.games.sfx("pacman/eatGhost"),o.score%1e4===0&&(o.lives++,u.games.sfx("pacman/extraLife")),o.score>=1e4&&u.achievements.set("pacman-10000"),c.killCombo>=1600&&u.achievements.set("pacman-4-combo")},s=l=>{l.offset={x:0,y:0},l.mode=c.mode,l.left=!1,l.dir="up"},o=u.games.current.data.player,a=u.games.current.data.maps,c=u.games.current.data.ghosts;switch(u.games.keys.Up?o.dirn="up":u.games.keys.Down?o.dirn="down":u.games.keys.Left?o.dirn="left":u.games.keys.Right&&(o.dirn="right"),o.dir){case"up":a[o.map][0][o.y-1][o.x]!==1?(o.offset.x=0,o.offset.y-=e,o.offset.y<=-12&&(o.offset.y=13,o.y--)):Math.round(o.offset.y)!==0&&(o.offset.y>0?o.offset.y-=e:o.offset.y+=e);break;case"down":a[o.map][0][o.y+1][o.x]!==1?(o.offset.x=0,o.offset.y+=e,o.offset.y>=12&&(o.offset.y=-13,o.y++)):Math.round(o.offset.y)!==0&&(o.offset.y>0?o.offset.y-=e:o.offset.y+=e);break;case"left":a[o.map][0][o.y][o.x-1]!==1?(o.offset.y=0,o.offset.x-=e,o.offset.x<=-12&&(o.offset.x=13,o.x--)):Math.round(o.offset.x)!==0&&(o.offset.x>0?o.offset.x-=e:o.offset.x+=e);break;case"right":a[o.map][0][o.y][o.x+1]!==1?(o.offset.y=0,o.offset.x+=e,o.offset.x>=12&&(o.offset.x=-13,o.x++)):Math.round(o.offset.x)!==0&&(o.offset.x>0?o.offset.x-=e:o.offset.x+=e);break}switch(o.dirn){case"up":a[o.map][0][o.y-1][o.x]!==1&&Math.round(o.offset.x)===0&&(o.dir="up",delete o.dirn);break;case"down":a[o.map][0][o.y+1][o.x]!==1&&Math.round(o.offset.x)===0&&(o.dir="down",delete o.dirn);break;case"left":a[o.map][0][o.y][o.x-1]!==1&&Math.round(o.offset.y)===0&&(o.dir="left",delete o.dirn);break;case"right":a[o.map][0][o.y][o.x+1]!==1&&Math.round(o.offset.y)===0&&(o.dir="right",delete o.dirn);break}o.y===15&&o.x===9&&o.fruit&&(o.score+=o.fruit*100,delete o.fruit,u.games.sfx("pacman/eatFruit")),o.y===9&&o.x===-1?(o.x=19,u.achievements.set("pacman-portal")):o.y===9&&o.x===19&&(o.x=-1,u.achievements.set("pacman-portal")),o.x<-1&&(o.x=19),o.x>19&&(o.x=-1),o.x<=-1&&(o.y>9||o.y<9)&&(o.x=19,o.y=9,o.dir="left"),o.x>=19&&(o.y>9||o.y<9)&&(o.x=-1,o.y=9,o.dir="right"),a[o.map][0][o.y][o.x]===2?(a[o.map][0][o.y][o.x]=4,o.score+=10,o.score%1e4===0&&(o.lives++,u.games.sfx("pacman/extraLife")),Math.floor(Math.random()*75)===0&&!o.fruit&&(o.fruit=1+Math.floor(Math.random()*5)),o.score>=1e4&&u.achievements.set("pacman-10000")):a[o.map][0][o.y][o.x]===3&&(a[o.map][0][o.y][o.x]=5,c.data.forEach(l=>l.mode="vulnerable"),c.vulnerable=!0,o.score+=50,o.score%1e4===0&&(o.lives++,u.games.sfx("pacman/extraLife")),o.score>=1e4&&u.achievements.set("pacman-10000")),o.level===1?c.timers.modeTimer>=5240?c.mode="chase":c.timers.modeTimer>=4940?c.mode="scatter":c.timers.modeTimer>=3740?c.mode="chase":c.timers.modeTimer>=3440?c.mode="scatter":c.timers.modeTimer>=2240?c.mode="chase":c.timers.modeTimer>=1620?c.mode="scatter":c.timers.modeTimer>=420?c.mode="chase":c.mode="scatter":o.level>1&&o.level<5?c.timers.modeTimer>=64521?c.mode="chase":c.timers.modeTimer>=64520?c.mode="scatter":c.timers.modeTimer>=2540?c.mode="chase":c.timers.modeTimer>=2240?c.mode="scatter":c.timers.modeTimer>=1040?c.mode="chase":c.timers.modeTimer>=1620?c.mode="scatter":c.timers.modeTimer>=420?c.mode="chase":c.mode="scatter":c.timers.modeTimer>=65521?c.mode="chase":c.timers.modeTimer>=65520?c.mode="scatter":c.timers.modeTimer>=3300?c.mode="chase":c.timers.modeTimer>=3e3?c.mode="scatter":c.timers.modeTimer>=1800?c.mode="chase":c.timers.modeTimer>=1500?c.mode="scatter":c.timers.modeTimer>=300?c.mode="chase":c.mode="scatter",c.vulnerable&&(o.level<19?c.timers.vulnerable.vulnerableTimer<=c.timers.vulnerable.levelTimers[o.level]*60?c.timers.vulnerable.vulnerableTimer+=e:(c.timers.vulnerable.vulnerableTimer=0,c.vulnerable=!1,c.killCombo=200,c.data.forEach(l=>l.mode=c.mode)):c.data.forEach(l=>l.mode=c.mode)),c.data.forEach(l=>{l.mode!=="vulnerable"&&(l.mode=c.mode);let h=0;switch(a[o.map][0].forEach(d=>{d.forEach(p=>{p===4&&h++})}),l.name){case"blinky":l.mode==="chase"?l.target={x:o.x,y:o.y}:l.mode==="scatter"&&(l.target={x:19,y:0});break;case"pinky":l.mode==="chase"?o.dir==="up"?l.target={x:o.x,y:o.y-4}:o.dir==="down"?l.target={x:o.x,y:o.y+4}:o.dir==="left"?l.target={x:o.x-4,y:o.y}:o.dir==="right"&&(l.target={x:o.x+4,y:o.y}):l.mode==="scatter"&&(l.target={x:1,y:0});break;case"inky":h>=35&&(l.mode==="chase"?(l.target.x=c.data[0].x,l.target.y=o.y):l.mode==="scatter"&&(l.target={x:19,y:19}));break;case"clyde":h>=125&&(l.mode==="chase"?n(o.x,o.y,l.x,l.y)>8?l.target={x:o.x,y:o.y}:l.target={x:0,y:19}:l.mode==="scatter"&&(l.target={x:0,y:19}));break}if(Math.round(l.offset.x)===0&&Math.round(l.offset.y)===0&&a[o.map][1][l.y][l.x]===5)a[o.map][1][l.y][l.x-1]!==1&&l.dir!=="right"?l.dir="left":a[o.map][1][l.y][l.x+1]!==1&&l.dir!=="left"?l.dir="right":a[o.map][1][l.y+1][l.x]!==1&&l.dir!=="up"?l.dir="down":a[o.map][1][l.y-1][l.x]!==1&&l.dir!=="down"&&(l.dir="up");else if(Math.round(l.offset.x)===0&&Math.round(l.offset.y)===0&&a[o.map][1][l.y][l.x]===4){const d=[];a[o.map][1][l.y-1][l.x]!==1&&l.dir!=="down"&&d.push({distance:n(l.target.x,l.target.y,l.x,l.y-1),dir:"up"}),a[o.map][1][l.y+1][l.x]!==1&&l.dir!=="up"&&d.push({distance:n(l.target.x,l.target.y,l.x,l.y+1),dir:"down"}),a[o.map][1][l.y][l.x-1]!==1&&l.dir!=="right"&&d.push({distance:n(l.target.x,l.target.y,l.x-1,l.y),dir:"left"}),a[o.map][1][l.y][l.x+1]!==1&&l.dir!=="left"&&d.push({distance:n(l.target.x,l.target.y,l.x+1,l.y),dir:"right"}),d.sort((p,y)=>p.distance-y.distance),l.mode!=="vulnerable"?d[0]===d[1]?a[o.map][1][l.y-1][l.x]!==1&&l.dir!=="down"?l.dir="up":a[o.map][1][l.y][l.x-1]!==1&&l.dir!=="right"?l.dir="left":a[o.map][1][l.y+1][l.x]!==1&&l.dir!=="up"&&(l.dir="down"):l.dir=d[0].dir:l.dir=d[Math.floor(Math.random()*d.length)].dir}else if(Math.round(l.offset.x)===0&&Math.round(l.offset.y)===0&&a[o.map][1][l.y][l.x]===7&&(l.dir==="up"||l.dir==="down")){const d=[];a[o.map][1][l.y-1][l.x]!==1&&l.dir!=="down"&&d.push({distance:n(l.target.x,l.target.y,l.x,l.y-1),dir:"up"}),a[o.map][1][l.y+1][l.x]!==1&&l.dir!=="up"&&d.push({distance:n(l.target.x,l.target.y,l.x,l.y+1),dir:"down"}),a[o.map][1][l.y][l.x-1]!==1&&d.push({distance:n(l.target.x,l.target.y,l.x-1,l.y),dir:"left"}),a[o.map][1][l.y][l.x+1]!==1&&d.push({distance:n(l.target.x,l.target.y,l.x+1,l.y),dir:"right"}),d.sort((p,y)=>p.distance-y.distance),l.mode!=="vulnerable"?d[0]===d[1]?a[o.map][1][l.y-1][l.x]!==1&&l.dir!=="down"?l.dir="up":a[o.map][1][l.y][l.x-1]!==1?l.dir="left":a[o.map][1][l.y+1][l.x]!==1&&l.dir!=="up"&&(l.dir="down"):l.dir=d[0].dir:l.dir=d[Math.floor(Math.random()*d.length)].dir}if(a[o.map][1][l.y][l.x]!==6)r(l);else if(l.target.x===0&&l.target.y===0)switch(l.dir){case"up":l.offset.y-=e/3,Math.round(l.offset.y)===-3&&(l.dir="down");break;case"down":l.offset.y+=e/3,Math.round(l.offset.y)===3&&(l.dir="up");break}else l.left?(l.dir="up",r(l)):Math.round(l.offset.y)!==0&&!l.left?Math.round(l.offset.y)>0?(l.offset.y-=e,l.dir="up"):(l.offset.y+=e,l.dir="down"):l.x!==9?(l.x>9?l.dir="left":l.x<9&&(l.dir="right"),r(l)):Math.round(l.offset.x)!==0?l.offset.x>0?(l.dir="left",l.offset.x-=e):(l.dir="right",l.offset.x+=e):l.left=!0;o.x===l.x&&o.y===l.y&&l.mode!=="vulnerable"?(o.lives--,o.lives>=1?(c.data.forEach(d=>{d.x=d.spawn.x,d.y=d.spawn.y,s(d)}),o.offset={x:0,y:0},c.timers.modeTimer=0,o.dir="up",o.y=15,o.x=9,u.games.sfx("pacman/die")):(u.stats.get("pacman-high-score")<o.score&&u.stats.set("pacman-high-score",o.score),u.stats.get("pacman-highest-level")<o.score&&u.stats.set("pacman-highest-level",o.level),u.games.end({message:"Game Over!",score:{Score:o.score,Level:o.level}}))):o.x===l.x&&o.y===l.y&&l.mode==="vulnerable"&&i(l)}),c.timers.modeTimer+=e,a[o.map][0].filter(l=>l.filter(h=>h===2).length!==0).length===0&&a[o.map][0].filter(l=>l.filter(h=>h===3).length!==0).length===0&&(a[o.map][0].forEach((l,h)=>{l.forEach((d,p)=>{d===4?a[o.map][0][h][p]=2:d===5&&(a[o.map][0][h][p]=3)})}),c.data.forEach(l=>{s(l),l.x=l.spawn.x,l.y=l.spawn.y}),o.offset={x:0,y:0},c.timers.modeTimer=0,o.dir="up",o.level++,o.y=15,o.x=9,u.achievements.set("pacman-level"),o.level>=10&&u.achievements.set("pacman-level-10")),u.games.setScoreboard({Score:o.score,Level:o.level,Lives:o.lives})}},page:{width:475,height:525}},Uu=(t,e)=>t.x+t.width>e.x&&t.x<e.x+e.width&&t.y+t.height>e.y&&t.y<e.y+e.height,Rr=(t,e,n,r)=>{let i=t.y-e.y-e.height/2;t.y<-100&&(i=230-e.y-e.height/2),i<-n?(e.y-=n,e.dy=-n*r):i>=-n&&i<n?(e.y+=i,e.dy=i*r):(e.y+=n,e.dy=n*r)},ym=(t,e)=>{t.forEach((n,r)=>{n.alpha-=10/(60+Math.sqrt(e.dx**2+e.dy**2)),!(n.alpha>0)&&(t.splice(r,1),r--)})},vm={name:"Pong",id:"pong",info:"Use <kbd>[UP]</kbd> and <kbd>[DOWN]</kbd> to move the paddle to hit the ball past your opponent.",functions:{start:()=>{u.games.current.data={game:{lScore:0,rScore:0,serveTimer:0},ball:{x:0,y:0,dx:0,dy:0,width:15.625,height:15.625},lPaddle:{x:31.25,y:140.625,dy:0,width:15.625,height:93.75},rPaddle:{x:453.125,y:140.625,dy:0,width:15.625,height:93.75},particles:[]}},render:t=>{if(!u.games.ctx)return;const e=u.games.current.data,n=e.ball,r=u.games.ctx;if(r.fillStyle=u.storage.get("dark-mode")?"white":"black",u.storage.get("visual-effects")){const i=r.globalAlpha;e.particles.forEach(s=>{r&&(r.globalAlpha=s.alpha,r.fillRect(s.x,s.y,s.width,s.height))}),r.globalAlpha=i}r.fillRect(n.x,n.y,15.625,15.625),r.fillRect(31.25,e.lPaddle.y,15.625,93.75),r.fillRect(453.125,e.rPaddle.y,15.625,93.75),r.globalAlpha=.5;for(let i=17.5;i<375;i+=40)r.fillRect(240,i,20,20);r.globalAlpha=1},update:(t,e)=>{const n=u.games.current.data,r=n.ball,i=n.lPaddle,s=n.rPaddle,o=String(u.storage.get("pong-ai-difficulty"));switch(n.game.serveTimer>0?(r.x=-999,r.y=-999,n.game.serveTimer-=e/60):Math.round(n.game.serveTimer)<=0&&Math.round(n.game.serveTimer)!==-1?(r.x=250-15.625/2,r.y=(375-15.625)/2,r.dx=(Math.floor(Math.random())-.5)*7,r.dy=(Math.floor(Math.random())-.5)*7,n.game.serveTimer-=e,u.storage.get("pong-game-type")==="11-points"?o==="2-player"?n.game.lScore>=11?u.games.end({message:"Player 1 wins!",score:{"Left Score":n.game.lScore,"Right Score":n.game.rScore}}):n.game.rScore>=11&&u.games.end({message:"Player 2 wins!",score:{"Left Score":n.game.lScore,"Right Score":n.game.rScore}}):n.game.lScore>=11?(u.stats.increase("pong-wins"),u.achievements.set("pong-win-game"),o==="veryHard"&&u.achievements.set("pong-win-very-hard"),o==="impossible"&&u.achievements.set("pong-win-impossible"),u.games.end({message:"You win!",score:{"Left Score":n.game.lScore,"Right Score":n.game.rScore}})):n.game.rScore>=11&&u.games.end({message:"You lose...",score:{"Left Score":n.game.lScore,"Right Score":n.game.rScore}}):n.game.lScore>=100&&u.achievements.set("pong-get-100-points")):(r.x+=r.dx*e,r.y+=r.dy*e,(r.y<=0&&r.dy<0||r.y+15.625>=375&&r.dy>=0)&&(r.dy=-r.dy,u.games.sfx("pong/hit")),Math.sqrt(r.dx**2+r.dy**2)>=3.5*50&&u.achievements.set("pong-50x-speed"),r.x<=-15.625&&r.y>=-100?(u.games.sfx("pong/win"),n.game.rScore++,n.game.serveTimer=1):r.x>=500&&(u.games.sfx("pong/win"),n.game.lScore++,n.game.serveTimer=1)),i.dy=0,(o==="2-player"?u.games.keys.UpP1:u.games.keys.Up)&&(i.y-=9*e,i.dy-=9*e,i.y<=0&&(i.y=0)),(o==="2-player"?u.games.keys.DownP1:u.games.keys.Down)&&(i.y+=9*e,i.dy+=9*e,i.y>=281.25&&(i.y=281.25)),o){case"2-player":s.dy=0,u.games.keys.UpP2&&(s.y-=9*e,s.dy-=9*e,s.y<0&&(s.y=0)),u.games.keys.DownP2&&(s.y+=9*e,s.dy+=9*e,s.y>=281.25&&(s.y=281.25));break;case"easy":Rr(r,s,2,3/8);break;case"normal":Rr(r,s,5,3/8);break;case"hard":Rr(r,s,8,1/2);break;case"veryHard":Rr(r,s,12,1);break;case"impossible":Rr(r,s,999,2),Math.abs(r.dy)>240&&(s.y=Math.random()*360*e,s.dy=(Math.random()*Math.abs(r.dy)-Math.abs(r.dy/2))*e);break}if(s.y<0&&(s.y=0),s.y+93.75>=375&&(s.y=375-93.75),Uu(r,i)?(r.x-r.dx<i.x+15.625&&Math.abs(r.dy)<i.height?(r.dy*=Math.sign(r.dy),r.dy*=r.y<i.y+93.75/2?-1:1,r.y=i.y+(r.y<i.y+93.75/2?-15.625:93.75),r.dx*=1.05,r.dy+=2*i.dy/3):(r.x=i.x+15.625,r.dx*=-1.05,r.dy*=1.05,r.dy+=2*i.dy/3),u.games.sfx("pong/hit")):Uu(r,s)&&(r.x-r.dx>s.x-15.625&&Math.abs(r.dy)<s.height?(r.dy*=Math.sign(r.dy),r.dy*=r.y<s.y+93.75/2?-1:1,r.y=s.y+(r.y<s.y+93.75/2?-15.625:93.75),r.dx*=1.05,r.dy+=2*s.dy/3):(r.x=s.x-15.625,r.dx*=-1.05,r.dy*=1.05,r.dy+=2*s.dy/3),u.games.sfx("pong/hit")),u.storage.get("visual-effects")&&(ym(n.particles,r),Math.sqrt(r.dx**2+r.dy**2)>=3.5*3)){const a=Math.sqrt(r.dx**2+r.dy**2)/15.625;for(let c=0;c<a;c+=.25){let l=r.y-r.dy*c/a;l<-15.625?(l+=15.625,l=-l,l-=15.625):l>375&&(l-=375,l=-l,l+=375),n.particles.push({x:r.x-r.dx*c/a,y:l,width:15.625,height:15.625,alpha:.5})}}u.games.setScoreboard({Left:n.game.lScore,Right:n.game.rScore})}},page:{width:500,height:375},options:[{name:"AI Difficulty",info:"Choose the AI difficulty",id:"pong-ai-difficulty",type:"dropdown",default:"normal",options:[{name:"2 Player",id:"2-player"},{name:"Easy",id:"easy"},{name:"Normal",id:"normal"},{name:"Hard",id:"hard"},{name:"Very Hard",id:"veryHard"},{name:"Impossible",id:"impossible"}]},{name:"Game Type",info:"Choose the type of game.",id:"pong-game-type",type:"dropdown",default:"11-points",options:[{name:"First to 11",id:"11-points"},{name:"Endless",id:"endless"}]}]},ja=()=>{const t={x:Math.floor(Math.random()*49),y:Math.floor(Math.random()*49)};let e=!0;u.games.current.data.snake.forEach(n=>{n.x===t.x&&n.y===t.y&&(e=!1)}),e?u.games.current.data.apple=t:ja()},_m={name:"Snake",id:"snake",info:"Use <kbd>[UP]</kbd>, <kbd>[DOWN]</kbd>, <kbd>[LEFT]</kbd> and <kbd>[RIGHT]</kbd> to control your snake - eat apples, but not yourself!",functions:{start:()=>{let t,e;switch(Math.floor(Math.random()*3)){case 0:t="up",e=[{x:25,y:25},{x:25,y:26},{x:25,y:27}];break;case 1:t="down",e=[{x:25,y:25},{x:25,y:24},{x:25,y:23}];break;case 2:t="left",e=[{x:25,y:25},{x:26,y:25},{x:27,y:25}];break;default:t="right",e=[{x:25,y:25},{x:24,y:25},{x:23,y:25}]}u.games.current.data={dirQueue:[t],snake:e,keys:{Up:!1,Down:!1,Left:!1,Right:!1}},ja()},render:t=>{if(!u.games.ctx)return;const e=u.games.ctx,n=u.games.current.data;e.fillStyle="#ff0000",e.fillRect(n.apple.x*10,n.apple.y*10,10,10),n.snake.forEach(r=>{e.fillStyle="#00ff00",e.fillRect(r.x*10,r.y*10,10,10)})},update:t=>{const e=u.games.current.data,n=e.dirQueue,r=()=>{switch(n[0]){case"up":e.snake.unshift({x:e.snake[0].x,y:e.snake[0].y-1});break;case"down":e.snake.unshift({x:e.snake[0].x,y:e.snake[0].y+1});break;case"left":e.snake.unshift({x:e.snake[0].x-1,y:e.snake[0].y});break;case"right":e.snake.unshift({x:e.snake[0].x+1,y:e.snake[0].y});break}};t>=18e3&&u.achievements.set("snake-5-mins"),t%Number(u.storage.get("snake-difficulty"))===0&&(n.length>1&&n.shift(),r(),e.snake.pop()),e.snake[0].x===e.apple.x&&e.snake[0].y===e.apple.y&&(e.snake.push(e.snake[e.snake.length-1]),e.snake.length>=10&&u.achievements.set("snake-10"),e.snake.length>=50&&u.achievements.set("snake-50"),e.snake.length>=10&&Number(u.storage.get("snake-difficulty"))===1&&u.achievements.set("snake-impossible-10"),(e.apple.x===0&&e.apple.y===0||e.apple.x===49&&e.apple.y===0||e.apple.x===0&&e.apple.y===49||e.apple.x===49&&e.apple.y===49)&&u.achievements.set("snake-corner"),e.snake.length>=2500?(u.stats.set("snake-high-score",2500),u.games.end({message:"Game Complete!",score:{Length:e.snake.length}})):ja()),(e.snake[0].x<0||e.snake[0].x>49||e.snake[0].y<0||e.snake[0].y>49)&&(u.games.sfx("snake/bonk"),u.stats.get("snake-high-score")<e.snake.length&&u.stats.set("snake-high-score",e.snake.length),u.games.end({message:"Game Over",score:{Length:e.snake.length}})),e.snake.forEach((i,s)=>{s!==0&&i.x===e.snake[0].x&&i.y===e.snake[0].y&&(u.games.sfx("snake/bonk"),u.stats.get("snake-high-score")<e.snake.length&&u.stats.set("snake-high-score",e.snake.length),u.games.end({message:"Game Over",score:{Length:e.snake.length}}))}),u.games.keys.Up?e.keys.Up||n.indexOf("up")===-1&&n.indexOf("down")===-1&&n.length<=3&&(n.push("up"),e.keys.Up=!0):e.keys.Up=!1,u.games.keys.Down?e.keys.Down||n.indexOf("up")===-1&&n.indexOf("down")===-1&&n.length<=3&&(n.push("down"),e.keys.Down=!0):e.keys.Down=!1,u.games.keys.Left?e.keys.Left||n.indexOf("left")===-1&&n.indexOf("right")===-1&&n.length<=3&&(n.push("left"),e.keys.Left=!0):e.keys.Left=!1,u.games.keys.Right?e.keys.Right||n.indexOf("left")===-1&&n.indexOf("right")===-1&&n.length<=3&&(n.push("right"),e.keys.Right=!0):e.keys.Right=!1,u.games.setScoreboard({Length:e.snake.length})}},options:[{name:"Difficulty",info:"Choose the difficulty",id:"snake-difficulty",type:"dropdown",default:5,options:[{name:"Easy",id:7},{name:"Normal",id:5},{name:"Hard",id:3},{name:"Very Hard",id:2},{name:"Impossible",id:1}]}],page:{width:500,height:500},music:"snake/music"},zu=()=>{const t=Math.floor(Math.random()*2)===0?"right":"left",e=[[],[],[],[],[]];for(let n=0;n<5;n++)for(let r=0;r<11;r++)switch(n){case 0:e[n].push(!0);break;case 1:case 2:e[n].push(!0);break;case 3:case 4:e[n].push(!0);break}u.games.current.data.aliens={x:t==="left"?117:0,y:25+u.games.current.data.game.wave*10,dir:t,lastDir:t==="left"?"right":"left",data:e},delete u.games.current.data.game.waveCooldown},wm={name:"Space Invaders",id:"spaceinvaders",info:"Use <kbd>[LEFT]</kbd> and <kbd>[RIGHT]</kbd> to move your turret, press <kbd>[PRIMARY]</kbd> to fire. Fend off the invaders!",functions:{start:()=>{const t=[];for(let n=0;n<500+Math.random()*100;n++)t.push({x:Math.random()*500,y:Math.random()*430,radius:Math.random()*2});const e=[];for(let n=0;n<4;n++)e.push([[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1]]);u.games.current.data={game:{lives:5,score:0,wave:1,x:225,dead:!1,laser:{cooldown:0,data:[]}},explosions:[],stars:t,shields:e,aliens:{},alienLasers:[]},zu()},render:t=>{if(!u.games.ctx)return;const e=u.games.ctx,n=u.games.current.data,r=i=>{u.games.ctx&&(e.fillStyle="#ff0000",e.fillRect(i.x,i.y,4,10))};e.fillStyle="#121212",e.fillRect(0,0,500,450),n.stars.forEach(i=>{e.fillStyle="#ffffff",e.beginPath(),e.arc(i.x,i.y,i.radius,0,Math.PI*2,!1),e.fill(),e.closePath()}),n.shields.forEach((i,s)=>{i.forEach((o,a)=>{o.forEach((c,l)=>{c===1&&(e.fillStyle="#00ff00",e.fillRect(52+s*112+l*3,300+a*3,3,3))})})}),n.explosions.forEach(i=>{const s=[[0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0],[0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0],[0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0],[0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0]];e.fillStyle="#ff0000",e.fillRect(n.game.x,n.game.y,2,2),s.forEach((o,a)=>{o.forEach((c,l)=>{c===1&&e.fillRect(Math.round(i.x)+l*2,Math.round(i.y)+a*2,2,2)})})}),n.ufo&&(e.fillStyle="#ff0000",n.ufo.data.forEach((i,s)=>{i.forEach((o,a)=>{o===1&&e.fillRect(Math.round(n.ufo.x)+a*2,7+s*2,2,2)})})),n.aliens.data.forEach((i,s)=>{i.forEach((o,a)=>{if(!o)return;let c=[];switch(s){case 0:c=[[[0,0,0,1,1,0,0,0],[0,0,1,1,1,1,0,0],[0,1,1,1,1,1,1,0],[1,1,0,1,1,0,1,1],[1,1,1,1,1,1,1,1],[0,0,1,0,0,1,0,0],[0,1,0,1,1,0,1,0],[1,0,1,0,0,1,0,1]],[[0,0,0,1,1,0,0,0],[0,0,1,1,1,1,0,0],[0,1,1,1,1,1,1,0],[1,1,0,1,1,0,1,1],[1,1,1,1,1,1,1,1],[0,1,0,1,1,0,1,0],[1,0,0,0,0,0,0,1],[0,1,0,0,0,0,1,0]]];break;case 1:case 2:c=[[[0,0,1,0,0,0,0,0,1,0,0],[0,0,0,1,0,0,0,1,0,0,0],[0,0,1,1,1,1,1,1,1,0,0],[0,1,1,0,1,1,1,0,1,1,0],[1,1,1,1,1,1,1,1,1,1,1],[1,0,1,1,1,1,1,1,1,0,1],[1,0,1,0,0,0,0,0,1,0,1],[0,0,0,1,1,0,1,1,0,0,0]],[[0,0,1,0,0,0,0,0,1,0,0],[1,0,0,1,0,0,0,1,0,0,1],[1,0,1,1,1,1,1,1,1,0,1],[1,1,1,0,1,1,1,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,0],[0,0,1,0,0,0,0,0,1,0,0],[0,1,0,0,0,0,0,0,0,1,0]]];break;case 3:case 4:c=[[[0,0,0,0,1,1,1,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,0,0,1,1,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,0,0,1,1,0,0,0],[0,0,1,1,0,1,1,0,1,1,0,0],[1,1,0,0,0,0,0,0,0,0,1,1]],[[0,0,0,0,1,1,1,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,0,0,1,1,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,0,0,1,1,0,0,0],[0,1,1,0,0,1,1,0,0,1,1,0],[0,0,1,1,0,0,0,0,1,1,0,0]]];break}c[t%30>=15?0:1].forEach((l,h)=>{l.forEach((d,p)=>{if(d===1){switch(s){case 0:e.fillStyle="#ff0000";break;case 1:case 2:e.fillStyle="#00ff00";break;case 3:case 4:e.fillStyle="#0000ff";break}e.fillRect(Math.round(n.aliens.x)+(s===0?4:s<3?1:0)+a*36+p*2,Math.round(n.aliens.y)+s*24+h*2,2,2)}})})})}),n.alienLasers.forEach(r),n.game.laser.data.forEach(r),e.fillStyle="#00ff00",e.fillRect(0,428,500,22),n.game.dead||(e.fillRect(n.game.x,411,50,17),e.fillRect(22+n.game.x,405,6,6))},update:(t,e)=>{e*=1.5;const n=u.games.current.data,r=(s,o)=>s.x+s.width>o.x&&s.x<o.x+o.width&&s.y+s.height>o.y&&s.y<o.y+o.height,i=(s,o)=>{n.explosions.push({x:s,y:o,cooldown:15})};switch(n.game.lives<=0&&(u.stats.get("spaceinvaders-highest-wave")<n.game.wave&&u.stats.set("spaceinvaders-highest-wave",n.game.wave),u.stats.get("spaceinvaders-high-score")<n.game.score&&u.stats.set("spaceinvaders-high-score",n.game.score),u.games.end({message:"Game Over!",score:{Score:n.game.score,Wave:n.game.wave}})),n.game.laser.cooldown>0&&n.game.laser.cooldown--,n.game.waveCooldown&&n.game.waveCooldown--,n.game.deathCooldown&&n.game.deathCooldown--,n.game.waveCooldown<=0&&zu(),n.game.deathCooldown<=0&&(delete n.game.deathCooldown,n.game.dead=!1,n.game.x=225,n.alienLasers=[]),u.games.keys.Left&&n.game.x>=5&&!n.game.dead&&(n.game.x-=5*e),u.games.keys.Right&&n.game.x<=445&&!n.game.dead&&(n.game.x+=5*e),u.games.keys.Primary&&n.game.laser.cooldown<=0&&!n.game.dead&&(n.game.laser.data.push({x:n.game.x+23,y:411}),n.game.laser.cooldown=20,u.games.sfx("spaceinvaders/shoot")),n.aliens.data.filter(s=>s.filter(o=>o).length>0).length===0&&!n.game.waveCooldown&&(n.game.waveCooldown=60,n.game.wave++,n.game.wave>=10&&u.achievements.set("spaceinvaders-wave-10"),u.achievements.set("spaceinvaders-wave")),n.aliens.dir){case"right":n.aliens.x+=e/2;break;case"left":n.aliens.x-=e/2;break;case"down":(Math.round(n.aliens.y)+(25+n.game.wave*10))%25===0?n.aliens.dir=n.aliens.lastDir==="right"?"left":"right":n.aliens.y+=e/2;break}if(n.ufo)n.ufo.dir==="left"?(n.ufo.x-=e,n.ufo.x>500&&delete n.ufo):(n.ufo.x+=e,n.ufo.x>500&&delete n.ufo);else if(Math.floor(Math.random()*(500/e))===0){const s=Math.floor(Math.random()*2)===0?"right":"left";n.ufo={dir:s,x:s==="right"?-32:500,data:[[0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,1,1,1,0,0,1,1,0,0,1,1,1,0,0],[0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0]]},u.games.sfx("spaceinvaders/ufo")}n.alienLasers=n.alienLasers.map(s=>({...s,y:s.y+5*e})).filter(s=>s.y<438),n.game.laser.data=n.game.laser.data.map(s=>({...s,y:s.y-5*e})).filter(s=>s.y>-10),n.explosions=n.explosions.filter(s=>s.cooldown>0).map(s=>({...s,cooldown:s.cooldown-e})),n.aliens.data.forEach((s,o)=>{s.forEach((a,c)=>{o===0&&a&&Math.floor(Math.random()*(120/e))===0&&!n.game.dead&&n.alienLasers.push({x:c*36+n.aliens.x+10,y:o*24+n.aliens.y+16}),n.alienLasers.forEach(l=>{r({x:l.x,y:l.y,width:4,height:10},{x:n.game.x,y:411,width:50,height:22})&&!n.game.dead&&(n.alienLasers=n.alienLasers.filter(h=>h!==l),n.game.deathCooldown=30,n.game.dead=!0,n.game.lives--,u.games.sfx("spaceinvaders/playerDie"),i(n.game.x+9,410),n.aliens.data.filter(h=>h.filter(d=>d).length>0).length===1&&u.achievements.set("scpaceinvaders-1-alien"))}),n.aliens.dir!=="down"&&a&&(r({x:n.aliens.x+(o===0?4:o<3?1:0)+c*36,y:n.aliens.y+o*24,width:o===0?16:o<3?22:24,height:16},{x:500,y:0,width:1,height:450})&&n.aliens.dir==="right"||r({x:n.aliens.x+(o===0?4:o<3?1:0)+c*36,y:n.aliens.y+o*24,width:o===0?16:o<3?22:24,height:16},{x:0,y:0,width:1,height:450})&&n.aliens.dir==="left")&&(n.aliens.lastDir=n.aliens.dir,n.aliens.dir="down",n.aliens.y+=1)})}),n.shields.forEach((s,o)=>{s.forEach((a,c)=>{a.forEach((l,h)=>{const d=(p,y)=>{!r({x:p.x,y:p.y,width:4,height:10},{x:52+o*112+h*3,y:300+c*3,width:3,height:3})||l!==1||(s[c][h]=0,y==="player"?n.game.laser.data=n.game.laser.data.filter(S=>S!==p):n.alienLasers=n.alienLasers.filter(S=>S!==p),c<14&&Math.floor(Math.random()*3)===1&&(s[c+1][h]=0),h>0&&Math.floor(Math.random()*3)===1&&(s[c][h-1]=0),h<19&&Math.floor(Math.random()*3)===1&&(s[c][h+1]=0),c>0&&Math.floor(Math.random()*3)===1&&(s[c-1][h]=0),c>0&&h>0&&Math.floor(Math.random()*3)===1&&(s[c-1][h-1]=0),c<14&&h>0&&Math.floor(Math.random()*3)===1&&(s[c+1][h-1]=0),c<14&&h<19&&Math.floor(Math.random()*3)===1&&(s[c+1][h+1]=0),c>0&&h<19&&Math.floor(Math.random()*3)===1&&(s[c-1][h+1]=0))};n.game.laser.data.forEach(p=>d(p,"player")),n.alienLasers.forEach(p=>d(p,"alien")),n.aliens.data.forEach((p,y)=>{p.forEach((S,w)=>{!S||n.game.waveCooldown||(l!==1&&(r({x:n.aliens.x+(y===0?4:y<3?1:0)+w*36,y:n.aliens.y+y*24,width:y===0?16:y<3?22:24,height:16},{x:52+o*112+h*3,y:300+c*3,width:3,height:3})||r({x:n.aliens.x+(y===0?4:y<3?1:0)+w*36,y:n.aliens.y+y*24,width:y===0?16:y<3?22:24,height:16},{x:n.game.x,y:405,width:50,height:28}))||n.aliens.y+y*24>=412&&!n.game.dead)&&(n.game.deathCooldown=30,n.game.dead=!0,n.game.lives--,n.aliens.data=[[],[],[],[],[]],n.game.waveCooldown=60,i(n.game.x+9,410),n.aliens.data.filter(v=>v.filter(f=>f).length>0).length===1&&u.achievements.set("scpaceinvaders-1-alien"))})})})})}),n.game.laser.data.forEach(s=>{n.aliens.data.forEach((o,a)=>{o.forEach((c,l)=>{c&&r({x:s.x,y:s.y,width:4,height:10},{x:n.aliens.x+(a===0?4:a<3?1:0)+l*36,y:n.aliens.y+a*24,width:a===0?16:a<3?22:24,height:16})&&(n.game.laser.data=n.game.laser.data.filter(h=>h!==s),n.game.score+=a===0?30:a<3?20:10,o[l]=!1,u.games.sfx("spaceinvaders/alienDie"),i(n.aliens.x-(a===0?8:a<3?5:4)+l*36,n.aliens.y-1+a*24))})}),n.ufo&&r({x:s.x,y:s.y,width:4,height:10},{x:n.ufo.x,y:7,width:32,height:14})&&(n.game.laser.data=n.game.laser.data.filter(o=>o!==s),n.game.score+=Math.floor(Math.random()*3)*50,i(n.ufo.x,5),u.achievements.set("spaceinvaders-ufo"),n.game.score>=1e4&&u.achievements.set("spaceinvaders-10000"),delete n.ufo)}),u.games.setScoreboard({Lives:n.game.lives,Score:n.game.score,Wave:n.game.wave})}},page:{width:500,height:450},music:"spaceinvaders/music"},ys={1:"#01F0F1",2:"#0101F0",3:"#EFA000",4:"#F0F100",5:"#00F200",6:"#A000F2",7:"#F00100"},Sm={0:0,1:40,2:100,3:300,4:1200},km={1:"Single",2:"Double",3:"Triple",4:"Tetris"},Ua=t=>{const e=t.length,n=t[0].length,r=t,i=Array(n).fill(0).map(()=>Array(e).fill(0));for(let s=0,o=e-1;s<e;s++,o--)for(let a=0,c=0;a<n;a++,c++)i[c][o]=t[s][a];u.games.current.data.piece.matrix=i,u.games.current.data.piece.matrix.forEach((s,o)=>{s.forEach((a,c)=>{if(u.games.current.data.game.droppedMatrix[o+u.games.current.data.piece.y-1]){const l=u.games.current.data.game.droppedMatrix[o+u.games.current.data.piece.y-1][c+u.games.current.data.piece.x-1];l!==0&&(u.games.current.data.piece.matrix=r,l||(u.games.current.data.piece.x--,Ua(u.games.current.data.piece.matrix)))}else u.games.current.data.game.droppedMatrix[1][c+u.games.current.data.piece.x-1]===void 0&&(u.games.current.data.piece.matrix=r,u.games.current.data.piece.x--,Ua(u.games.current.data.piece.matrix));!u.games.current.data.game.droppedMatrix[o+u.games.current.data.piece.y-1]&&u.games.current.data.piece.y>5&&(u.games.current.data.piece.matrix=r)})}),u.games.current.data.player.isDropLocking&&(u.games.current.data.piece.y+u.games.current.data.piece.matrix.length-1<20?(u.games.current.data.player.isDropLocking=!1,u.games.current.data.player.dropLockTimer=0):u.games.current.data.piece.y+u.games.current.data.piece.matrix.length-1>20&&(u.games.current.data.piece.y--,Ge()))},tf=t=>{u.games.current.data.player.score>u.stats.get("tetris-high-score")&&u.stats.set("tetris-high-score",u.games.current.data.player.score),u.games.current.data.player.level>u.stats.get("tetris-highest-level")&&u.stats.set("tetris-highest-level",u.games.current.data.player.level),u.games.current.data.player.rowsCleared>u.stats.get("tetris-rows-cleared")&&u.stats.set("tetris-rows-cleared",u.games.current.data.player.rowsCleared),u.games.end({message:t,score:{Score:u.games.current.data.player.score,Level:u.games.current.data.player.level,"Rows Cleared":u.games.current.data.player.rowsCleared,Gamemode:u.storage.get("tetris-mode")}})},nf=()=>{const t=30-u.games.current.data.player.level*5+5;t>=10?u.games.current.data.player.dropLockTimer=t:u.games.current.data.player.dropLockTimer=10,u.games.current.data.player.dropLockAggregate+=u.games.current.data.player.dropLockTimer,u.games.current.data.player.dropLockAggregate>250&&Jn(),u.games.current.data.player.isDropLocking=!0,u.games.sfx("tetris/softHit")},Ge=(t,e)=>{u.games.current.data.game.matrix=Array(20).fill(0).map(()=>Array(10).fill(0)),u.games.current.data.piece.matrix.forEach((i,s)=>{i.map((o,a)=>u.games.current.data.game.matrix[s+u.games.current.data.piece.y-1]?u.games.current.data.game.matrix[s+u.games.current.data.piece.y-1][a+u.games.current.data.piece.x-1]=o:o)});let n=!1;u.games.current.data.piece.matrix.forEach((i,s)=>{i.forEach((o,a)=>{u.games.current.data.piece.y+u.games.current.data.piece.matrix.length-1<20&&u.games.current.data.game.droppedMatrix[s+u.games.current.data.piece.y]&&u.games.current.data.game.droppedMatrix[s+u.games.current.data.piece.y][a+u.games.current.data.piece.x-1]&&o!==0&&(u.games.current.data.piece.y<=0&&tf("Block Out!"),u.games.current.data.player.dropLockTimer===0&&!t&&nf(),t&&Jn(),n=!0)})}),!n&&u.games.current.data.piece.y+u.games.current.data.piece.matrix.length-1<20&&(u.games.current.data.player.dropLockTimer=0,u.games.current.data.player.isDropLocking=!1);let r=0;u.games.current.data.game.droppedMatrix.forEach((i,s)=>{i.filter(o=>o===0).length===0&&(r++,u.games.current.data.game.droppedMatrix.splice(s,1),u.games.current.data.game.droppedMatrix.unshift(Array(10).fill(0)))}),r>0&&(u.games.current.data.game.comboedThisRound=!0,u.games.current.data.combo++,u.games.current.data.combo>1&&(u.games.current.data.combo===4&&u.achievements.set("3x-combo-tetris"),u.games.current.data.effects.push({text:"Combo x"+(u.games.current.data.combo-1),x:85,y:275,opacity:1,size:22})),u.games.current.data.effects.push({text:km[r],x:85,y:250,opacity:1,size:32}),Ge()),u.games.current.data.player.score+=Sm[r]*(u.games.current.data.player.level+1),u.games.current.data.player.rowsCleared+=r,t&&(u.games.current.data.piece.y++,u.games.current.data.player.score++,u.games.current.data.piece.y+u.games.current.data.piece.matrix.length-1<20&&e===u.games.current.data.piece.matrix?Ge(!0,e):u.games.current.data.piece.y+u.games.current.data.piece.matrix.length-1>=20&&(u.games.current.data.player.dropLockTimer===0&&Jn(),Ge()))},Bu=t=>{u.games.current.data.piece.matrix.forEach((e,n)=>{e.map((r,i)=>r!==0&&t[n+u.games.current.data.piece.y-1]?t[n+u.games.current.data.piece.y-1][i+u.games.current.data.piece.x-1]=r:r)})},rf=()=>{u.games.current.data.game.bag=[[[1,1,0],[0,1,1]],[[0,2,2],[2,2,0]],[[3,3],[3,3]],[[0,4,0],[4,4,4]],[[5,5,5,5]],[[6,0],[6,0],[6,6]],[[0,7],[0,7],[7,7]]]},Wu=(t,e,n)=>{if(!u.games.ctx)return;const r=u.games.ctx;r.beginPath(),r.moveTo(e*25+t,n*25+t),r.lineTo(e*25+t,n*25+3+t),r.stroke(),r.beginPath(),r.moveTo(e*25+t,n*25+t),r.lineTo(e*25+3+t,n*25+t),r.stroke(),r.beginPath(),r.moveTo(e*25+t,n*25+t),r.lineTo(e*25-3+t,n*25+t),r.stroke(),r.beginPath(),r.moveTo(e*25+t,n*25+t),r.lineTo(e*25+t,n*25-3+t),r.stroke()},Hu=(t,e)=>{t.forEach((n,r)=>{n.forEach((i,s)=>{u.games.ctx&&(i!==0?(u.games.ctx.fillStyle=ys[i],u.games.ctx.fillRect(s*25,r*25,25,25)):e&&u.storage.get("visual-effects")&&(u.games.ctx.strokeStyle=u.storage.get("dark-mode")?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.2)",Wu(25,s,r),Wu(-25,s,r)))})})},Jn=t=>{if(u.games.current.data.player.dropLockAggregate=0,t||Bu(u.games.current.data.game.droppedMatrix),u.games.current.data.game.comboedThisRound||(u.games.current.data.combo=0),u.games.current.data.game.comboedThisRound=!1,u.games.current.data.piece={x:5,y:-u.games.current.data.game.nextPiece.length+1,matrix:u.games.current.data.game.nextPiece,heldThisPlay:!1},sf(),Bu(u.games.current.data.game.matrix),t)return;let e=!0;u.games.current.data.game.droppedMatrix.forEach(n=>{n.map(r=>r!==0?e=!1:r)}),e&&(u.achievements.set("tetris-board-clear"),u.games.current.data.effects.push({text:"Perfect Clear!",x:85,y:250,opacity:1,size:32}))},sf=()=>{u.games.current.data.game.bag.length>0||rf(),u.games.current.data.game.nextPiece=u.games.current.data.game.bag.splice(u.games.current.data.game.bag.length*Math.random()|0,1)[0]},Vu=t=>{let e=!1;u.games.current.data.piece.matrix.forEach((n,r)=>{n.forEach((i,s)=>{if(u.games.current.data.game.droppedMatrix[r+u.games.current.data.piece.y-1]){let o=0;t!==1?o=u.games.current.data.game.droppedMatrix[r+u.games.current.data.piece.y-1][u.games.current.data.piece.x-2+s]:o=u.games.current.data.game.droppedMatrix[r+u.games.current.data.piece.y-1][u.games.current.data.piece.x+s],i!==0&&o!==0&&(e=!0)}})}),e||(t===1?u.games.current.data.piece.x++:u.games.current.data.piece.x--,Ge(),u.games.current.data.cooldowns.move=Math.floor(5/(u.games.current.data.player.timeMoving===0?.7:u.games.current.data.player.timeMoving*.5)),u.games.current.data.player.timeMoving++)},xm={name:"Tetris",id:"tetris",info:"Use the <kbd>[UP]</kbd>, <kbd>[DOWN]</kbd>, <kbd>[LEFT]</kbd> and <kbd>[RIGHT]</kbd> keys to move blocks, making them fit together neatly on the board. Save a piece for later with <kbd>[SECONDARY]</kbd>, fill up an entire row to destroy it!",functions:{start:()=>{let t,e=[];t=Array(20).fill(0).map(()=>Array(10).fill(0)),e=Array(20).fill(0).map(()=>Array(10).fill(0)),u.games.current.data={game:{matrix:t,nextPiece:[],bag:[],droppedMatrix:e,comboedThisRound:!1,frameCounter:0},piece:{x:5,y:1,matrix:[],heldThisPlay:!1},ghostPiece:{x:5,y:1},player:{level:1,score:0,rowsCleared:0,timeMoving:0,isDropLocking:!1,dropLockTimer:0,dropLockAggregate:0},cooldowns:{move:0,softDrop:0,hardDrop:0,rotate:0},effects:[],combo:0},u.storage.get("tetris-mode")==="Sprint"&&(u.games.current.data.sprintTime=10800),u.storage.get("tetris-mode")==="Ghost"&&(u.games.current.data.flashesLeft=5,u.games.current.data.flashingTime=0,u.games.current.data.cooldowns.flash=0),rf(),u.games.current.data.game.nextPiece=u.games.current.data.game.bag.splice(u.games.current.data.game.bag.length*Math.random()|0,1)[0],Jn(!0)},render:t=>{if(!u.games.ctx)return;const e=u.games.ctx,n=u.games.current.data;if((u.storage.get("tetris-mode")!=="Ghost"||n.flashingTime>0)&&Hu(n.game.droppedMatrix,!0),Hu(n.game.matrix),e.globalAlpha=.5,n.piece.matrix.forEach((r,i)=>{r.forEach((s,o)=>{s!==0&&(e.fillStyle=ys[s],(u.storage.get("tetris-mode")!=="Ghost"||n.flashingTime>0)&&!n.player.isDropLocking&&e.fillRect((o+n.ghostPiece.x-1)*25,(i+n.ghostPiece.y-1)*25,25,25))})}),e.globalAlpha=1,e.fillStyle=u.storage.get("dark-mode")?"#222222":"#f5f5f5",n.player.isDropLocking){e.fillRect(10,10,230,7),e.fillStyle=u.storage.get("dark-mode")?"#ffffff":"#000000";let r=30-n.player.level*5+5;r<0&&(r=10);let i=230/(r/n.player.dropLockTimer);n.player.dropLockAggregate>240&&(e.fillStyle="red",i=230),e.fillRect(10,10,i,7)}e.fillStyle=u.storage.get("dark-mode")?"#222222":"#f5f5f5",e.fillRect(250,0,125,500),e.fillStyle=u.storage.get("dark-mode")?"#ffffff":"#000000",e.font="16px roboto",e.fillText("Next Piece",255,70),n.game.nextPiece.forEach((r,i)=>{r.forEach((s,o)=>{s!==0&&(e.fillStyle=ys[s],e.fillRect(260+o*25,80+i*25,25,25))})}),e.fillStyle=u.storage.get("dark-mode")?"#ffffff":"#000000",e.fillText("Held Piece: ",255,200),n.game.heldPiece?n.game.heldPiece.forEach((r,i)=>{r.forEach((s,o)=>{s!==0&&(e.fillStyle=ys[s],e.fillRect(260+o*25,210+i*25,25,25))})}):e.fillText("None",255,218),e.fillStyle=u.storage.get("dark-mode")?"#ffffff":"#000000",e.fillText("Score: "+n.player.score,255,330),e.fillText("Level "+n.player.level,255,348),e.fillText("Rows: "+n.player.rowsCleared,255,366),n.sprintTime&&e.fillText(Math.ceil(n.sprintTime/60)+" seconds left",255,384),n.flashesLeft&&e.fillText(n.flashesLeft+" flashes left",255,384),n.effects.forEach(r=>{e.globalAlpha=r.opacity,e.font=r.size.toString()+"px roboto",e.fillText(r.text,r.x,r.y)}),e.globalAlpha=1,u.games.current.data=n},update:(t,e)=>{const n=u.games.current.data;n.game.frameCounter>0&&(n.game.frameCounter-=e),n.ghostPiece={x:n.piece.x,y:n.piece.y};let r=!1;for(let s=0;s<20;s++){r||n.ghostPiece.y++;for(let o=0;o<n.piece.matrix.length;o++)for(let a=0;a<n.piece.matrix[o].length;a++)n.game.droppedMatrix[n.ghostPiece.y+o]&&n.piece.matrix[o][a]!==0?n.game.droppedMatrix[n.ghostPiece.y+o][n.ghostPiece.x+a-1]!==0&&(r=!0):n.game.droppedMatrix[n.ghostPiece.y+o]||n.ghostPiece.y===20-n.piece.matrix.length+1&&(r=!0)}const i=n.player.level;n.player.level=Math.floor(n.player.rowsCleared/10)+1,i!==n.player.level&&u.storage.get("tetris-mode")==="Ghost"&&n.flashesLeft++,n.player.level===10&&u.achievements.set("tetris-level-10"),n.player.level===25&&u.achievements.set("tetris-level-25"),n.player.level===15&&u.storage.get("tetris-mode")==="Ghost"&&u.achievements.set("tetris-level-15-ghost"),n.flashingTime>0&&u.storage.get("tetris-mode")==="Ghost"&&n.flashingTime--,n.player.dropLockTimer>0&&n.player.dropLockTimer--,n.player.dropLockTimer===0&&n.player.isDropLocking&&(n.player.isDropLocking=!1,Jn()),n.effects.forEach((s,o)=>{s.opacity-=.01,s.y-=e,s.opacity<=0&&n.effects.splice(o,1)}),n.sprintTime&&(n.sprintTime-=e),n.sprintTime<=0&&tf("Sprint Over!");for(const s in n.cooldowns)n.cooldowns[s]>0?n.cooldowns[s]-=e:n.cooldowns[s]=0;for(;Math.round(n.game.frameCounter)<=0&&!n.player.isDropLocking;)Ge(),n.piece.y++,Ge(),n.game.frameCounter+=Math.ceil(65/n.player.level);if(u.games.keys.Down&&n.piece.y+n.piece.matrix.length-1<20&&n.cooldowns.softDrop===0&&!n.player.isDropLocking&&(n.piece.y++,Ge(),n.cooldowns.softDrop=2.5,n.player.score=n.player.score+1,u.games.sfx("tetris/whoosh")),u.games.keys.Primary&&n.cooldowns.hardDrop<=0&&!n.player.isDropLocking?(Ge(!0,n.piece.matrix),n.cooldowns.hardDrop=20,u.games.sfx("tetris/hardDrop")):u.games.keys.Primary&&n.player.isDropLocking&&(n.player.dropLockTimer=0,n.player.isDropLocking=!1,Jn(),n.cooldowns.hardDrop=20),u.games.keys.KeyF&&u.storage.get("tetris-mode")==="Ghost"&&n.flashesLeft>0&&n.cooldowns.flash<=0&&(n.flashesLeft--,n.flashingTime=300,n.cooldowns.flash=50),n.cooldowns.move<=0&&(u.games.keys.Left&&n.piece.x>1?Vu(-1):u.games.keys.Right&&n.piece.x+n.piece.matrix[0].length-1<10?Vu(1):n.player.timeMoving=0),u.games.keys.Up&&n.cooldowns.rotate<=0&&(Ua(n.piece.matrix),n.cooldowns.rotate=10,u.games.sfx("tetris/rotate"),Ge()),u.games.keys.Secondary&&!n.piece.heldThisPlay){if(n.piece.heldThisPlay=!0,n.game.heldPiece){const s=n.game.heldPiece;n.game.heldPiece=n.piece.matrix,n.piece.matrix=s}else n.game.heldPiece=n.piece.matrix,n.piece.matrix=n.game.nextPiece,sf();n.piece.x=5,n.piece.y=1,Ge()}n.piece.y+n.piece.matrix.length-1===20&&(Ge(),n.player.dropLockTimer===0&&nf()),u.games.current.data=n}},page:{width:375,height:500},music:"tetris/music",options:[{name:"Mode",info:"Choose the Game Mode",id:"tetris-mode",type:"dropdown",default:"Normal",options:[{name:"Normal",id:"Normal"},{name:"Sprint",id:"Sprint"},{name:"Ghost",id:"Ghost"}]}]};var $u={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E=function(t,e){if(!t)throw kr(e)},kr=function(t){return new Error("Firebase Database ("+of.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Em=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},sc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|l>>6,y=l&63;c||(y=64,o||(p=64)),r.push(n[h],n[d],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(af(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Em(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new Cm;const p=s<<2|a>>4;if(r.push(p),l!==64){const y=a<<4&240|l>>2;if(r.push(y),d!==64){const S=l<<6&192|d;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Cm extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lf=function(t){const e=af(t);return sc.encodeByteArray(e,!0)},Rs=function(t){return lf(t).replace(/\./g,"")},za=function(t){try{return sc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t){return cf(void 0,t)}function cf(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Im(n)||(t[n]=cf(t[n],e[n]));return t}function Im(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=()=>Mm().__FIREBASE_DEFAULTS__,Nm=()=>{if(typeof process>"u"||typeof $u>"u")return;const t=$u.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Rm=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&za(t[1]);return e&&JSON.parse(e)},uf=()=>{try{return Pm()||Nm()||Rm()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Am=t=>{var e,n;return(n=(e=uf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Lm=t=>{const e=Am(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},df=()=>{var t;return(t=uf())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Rs(JSON.stringify(n)),Rs(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ff(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bm())}function Om(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hf(){return of.NODE_ADMIN===!0}function Fm(){try{return typeof indexedDB=="object"}catch{return!1}}function jm(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="FirebaseError";class Fi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Um,Object.setPrototypeOf(this,Fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pf.prototype.create)}}class pf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?zm(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Fi(i,a,r)}}function zm(t,e){return t.replace(Bm,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Bm=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(t){return JSON.parse(t)}function pe(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=li(za(s[0])||""),n=li(za(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},Wm=function(t){const e=mf(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Hm=function(t){const e=mf(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function cr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Gu(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function As(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ba(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Qu(s)&&Qu(o)){if(!Ba(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qu(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(p<<1|p>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,h;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),h=1518500249):(l=s^o^a,h=1859775393):d<60?(l=s&o|a&(s|o),h=2400959708):(l=s^o^a,h=3395469782);const p=(i<<5|i>>>27)+l+c+h+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function wo(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,E(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},So=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t){return t&&t._delegate?t._delegate:t}class ci{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Oi;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Km(e))try{this.getOrInitializeService({instanceIdentifier:cn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=cn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cn){return this.instances.has(e)}getOptions(e=cn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ym(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cn){return this.component?this.component.multipleInstances?e:cn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ym(t){return t===cn?void 0:t}function Km(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Qm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($||($={}));const Xm={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},Jm=$.INFO,Zm={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},eg=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Zm[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gf{constructor(e){this.name=e,this._logLevel=Jm,this._logHandler=eg,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xm[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...e),this._logHandler(this,$.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...e),this._logHandler(this,$.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$.INFO,...e),this._logHandler(this,$.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$.WARN,...e),this._logHandler(this,$.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...e),this._logHandler(this,$.ERROR,...e)}}const tg=(t,e)=>e.some(n=>t instanceof n);let Yu,Ku;function ng(){return Yu||(Yu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rg(){return Ku||(Ku=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yf=new WeakMap,Wa=new WeakMap,vf=new WeakMap,na=new WeakMap,oc=new WeakMap;function ig(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(zt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&yf.set(n,t)}).catch(()=>{}),oc.set(e,t),e}function sg(t){if(Wa.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Wa.set(t,e)}let Ha={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wa.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vf.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function og(t){Ha=t(Ha)}function ag(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ra(this),e,...n);return vf.set(r,e.sort?e.sort():[e]),zt(r)}:rg().includes(t)?function(...e){return t.apply(ra(this),e),zt(yf.get(this))}:function(...e){return zt(t.apply(ra(this),e))}}function lg(t){return typeof t=="function"?ag(t):(t instanceof IDBTransaction&&sg(t),tg(t,ng())?new Proxy(t,Ha):t)}function zt(t){if(t instanceof IDBRequest)return ig(t);if(na.has(t))return na.get(t);const e=lg(t);return e!==t&&(na.set(t,e),oc.set(e,t)),e}const ra=t=>oc.get(t);function cg(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=zt(o);return r&&o.addEventListener("upgradeneeded",c=>{r(zt(o.result),c.oldVersion,c.newVersion,zt(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const ug=["get","getKey","getAll","getAllKeys","count"],dg=["put","add","delete","clear"],ia=new Map;function qu(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ia.get(e))return ia.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=dg.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ug.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&c.done]))[0]};return ia.set(e,s),s}og(t=>({...t,get:(e,n,r)=>qu(e,n)||t.get(e,n,r),has:(e,n)=>!!qu(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hg(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function hg(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Va="@firebase/app",Xu="0.10.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn=new gf("@firebase/app"),pg="@firebase/app-compat",mg="@firebase/analytics-compat",gg="@firebase/analytics",yg="@firebase/app-check-compat",vg="@firebase/app-check",_g="@firebase/auth",wg="@firebase/auth-compat",Sg="@firebase/database",kg="@firebase/database-compat",xg="@firebase/functions",Eg="@firebase/functions-compat",Cg="@firebase/installations",Tg="@firebase/installations-compat",Ig="@firebase/messaging",Mg="@firebase/messaging-compat",Pg="@firebase/performance",Ng="@firebase/performance-compat",Rg="@firebase/remote-config",Ag="@firebase/remote-config-compat",Lg="@firebase/storage",Dg="@firebase/storage-compat",bg="@firebase/firestore",Og="@firebase/vertexai-preview",Fg="@firebase/firestore-compat",jg="firebase",Ug="10.12.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a="[DEFAULT]",zg={[Va]:"fire-core",[pg]:"fire-core-compat",[gg]:"fire-analytics",[mg]:"fire-analytics-compat",[vg]:"fire-app-check",[yg]:"fire-app-check-compat",[_g]:"fire-auth",[wg]:"fire-auth-compat",[Sg]:"fire-rtdb",[kg]:"fire-rtdb-compat",[xg]:"fire-fn",[Eg]:"fire-fn-compat",[Cg]:"fire-iid",[Tg]:"fire-iid-compat",[Ig]:"fire-fcm",[Mg]:"fire-fcm-compat",[Pg]:"fire-perf",[Ng]:"fire-perf-compat",[Rg]:"fire-rc",[Ag]:"fire-rc-compat",[Lg]:"fire-gcs",[Dg]:"fire-gcs-compat",[bg]:"fire-fst",[Fg]:"fire-fst-compat",[Og]:"fire-vertex","fire-js":"fire-js",[jg]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new Map,Bg=new Map,Ga=new Map;function Ju(t,e){try{t.container.addComponent(e)}catch(n){wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ds(t){const e=t.name;if(Ga.has(e))return wn.debug(`There were multiple attempts to register component ${e}.`),!1;Ga.set(e,t);for(const n of Ls.values())Ju(n,t);for(const n of Bg.values())Ju(n,t);return!0}function Wg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bt=new pf("app","Firebase",Hg);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ci("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g=Ug;function _f(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$a,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Bt.create("bad-app-name",{appName:String(i)});if(n||(n=df()),!n)throw Bt.create("no-options");const s=Ls.get(i);if(s){if(Ba(n,s.options)&&Ba(r,s.config))return s;throw Bt.create("duplicate-app",{appName:i})}const o=new qm(i);for(const c of Ga.values())o.addComponent(c);const a=new Vg(n,r,o);return Ls.set(i,a),a}function Gg(t=$a){const e=Ls.get(t);if(!e&&t===$a&&df())return _f();if(!e)throw Bt.create("no-app",{appName:t});return e}function Zn(t,e,n){var r;let i=(r=zg[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wn.warn(a.join(" "));return}Ds(new ci(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="firebase-heartbeat-database",Yg=1,ui="firebase-heartbeat-store";let sa=null;function wf(){return sa||(sa=cg(Qg,Yg,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ui)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bt.create("idb-open",{originalErrorMessage:t.message})})),sa}async function Kg(t){try{const n=(await wf()).transaction(ui),r=await n.objectStore(ui).get(Sf(t));return await n.done,r}catch(e){if(e instanceof Fi)wn.warn(e.message);else{const n=Bt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wn.warn(n.message)}}}async function Zu(t,e){try{const r=(await wf()).transaction(ui,"readwrite");await r.objectStore(ui).put(e,Sf(t)),await r.done}catch(n){if(n instanceof Fi)wn.warn(n.message);else{const r=Bt.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wn.warn(r.message)}}}function Sf(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg=1024,Xg=30*24*60*60*1e3;class Jg{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ey(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ed();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Xg}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ed(),{heartbeatsToSend:r,unsentEntries:i}=Zg(this._heartbeatsCache.heartbeats),s=Rs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function ed(){return new Date().toISOString().substring(0,10)}function Zg(t,e=qg){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),td(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),td(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ey{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fm()?jm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Kg(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Zu(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Zu(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function td(t){return Rs(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){Ds(new ci("platform-logger",e=>new fg(e),"PRIVATE")),Ds(new ci("heartbeat",e=>new Jg(e),"PRIVATE")),Zn(Va,Xu,t),Zn(Va,Xu,"esm2017"),Zn("fire-js","")}ty("");var ny="firebase",ry="10.12.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(ny,ry,"app");var nd={};const rd="@firebase/database",id="1.0.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf="";function iy(t){kf=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),pe(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:li(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return yt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new sy(e)}}catch{}return new oy},hn=xf("localStorage"),ay=xf("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new gf("@firebase/database"),ly=function(){let t=1;return function(){return t++}}(),Ef=function(t){const e=Gm(t),n=new $m;n.update(e);const r=n.digest();return sc.encodeByteArray(r)},ji=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ji.apply(null,r):typeof r=="object"?e+=pe(r):e+=r,e+=" "}return e};let Yr=null,sd=!0;const cy=function(t,e){E(!e,"Can't turn on custom loggers persistently."),er.logLevel=$.VERBOSE,Yr=er.log.bind(er)},ye=function(...t){if(sd===!0&&(sd=!1,Yr===null&&ay.get("logging_enabled")===!0&&cy()),Yr){const e=ji.apply(null,t);Yr(e)}},Ui=function(t){return function(...e){ye(t,...e)}},Qa=function(...t){const e="FIREBASE INTERNAL ERROR: "+ji(...t);er.error(e)},Ct=function(...t){const e=`FIREBASE FATAL ERROR: ${ji(...t)}`;throw er.error(e),new Error(e)},Te=function(...t){const e="FIREBASE WARNING: "+ji(...t);er.warn(e)},uy=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Te("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ac=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},dy=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Sn="[MIN_NAME]",Tt="[MAX_NAME]",Rn=function(t,e){if(t===e)return 0;if(t===Sn||e===Tt)return-1;if(e===Sn||t===Tt)return 1;{const n=od(t),r=od(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},fy=function(t,e){return t===e?0:t<e?-1:1},Ar=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+pe(e))},lc=function(t){if(typeof t!="object"||t===null)return pe(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=pe(e[r]),n+=":",n+=lc(t[e[r]]);return n+="}",n},Cf=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function _e(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Tf=function(t){E(!ac(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();const h=l.join("");let d="";for(c=0;c<64;c+=8){let p=parseInt(h.substr(c,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},hy=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},py=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function my(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const gy=new RegExp("^-?(0*)\\d{1,10}$"),yy=-2147483648,vy=2147483647,od=function(t){if(gy.test(t)){const e=Number(t);if(e>=yy&&e<=vy)return e}return null},xr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Te("Exception was thrown by user callback.",n),e},Math.floor(0))}},_y=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Kr=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Te(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ye("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Te(e)}}class vs{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}vs.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc="5",If="v",Mf="s",Pf="r",Nf="f",Rf=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Af="ls",Lf="p",Ya="ac",Df="websocket",bf="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&hn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function ky(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Ff(t,e,n){E(typeof e=="string","typeof type must == string"),E(typeof n=="object","typeof params must == object");let r;if(e===Df)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===bf)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);ky(t)&&(n.ns=t.namespace);const i=[];return _e(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(){this.counters_={}}incrementCounter(e,n=1){yt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Tm(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa={},aa={};function uc(t){const e=t.toString();return oa[e]||(oa[e]=new xy),oa[e]}function Ey(t,e){const n=t.toString();return aa[n]||(aa[n]=e()),aa[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&xr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad="start",Ty="close",Iy="pLPCommand",My="pRTLPCB",jf="id",Uf="pw",zf="ser",Py="cb",Ny="seg",Ry="ts",Ay="d",Ly="dframe",Bf=1870,Wf=30,Dy=Bf-Wf,by=25e3,Oy=3e4;class Un{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ui(e),this.stats_=uc(n),this.urlFn=c=>(this.appCheckToken&&(c[Ya]=this.appCheckToken),Ff(n,bf,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Cy(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Oy)),dy(()=>{if(this.isClosed_)return;this.scriptTagHolder=new dc((...s)=>{const[o,a,c,l,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===ad)this.id=a,this.password=c;else if(o===Ty)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[ad]="t",r[zf]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Py]=this.scriptTagHolder.uniqueCallbackIdentifier),r[If]=cc,this.transportSessionId&&(r[Mf]=this.transportSessionId),this.lastSessionId&&(r[Af]=this.lastSessionId),this.applicationId&&(r[Lf]=this.applicationId),this.appCheckToken&&(r[Ya]=this.appCheckToken),typeof location<"u"&&location.hostname&&Rf.test(location.hostname)&&(r[Pf]=Nf);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Un.forceAllow_=!0}static forceDisallow(){Un.forceDisallow_=!0}static isAvailable(){return Un.forceAllow_?!0:!Un.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!hy()&&!py()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=pe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=lf(n),i=Cf(r,Dy);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Ly]="t",r[jf]=e,r[Uf]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=pe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class dc{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ly(),window[Iy+this.uniqueCallbackIdentifier]=e,window[My+this.uniqueCallbackIdentifier]=n,this.myIFrame=dc.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ye("frame writing exception"),a.stack&&ye(a.stack),ye(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ye("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[jf]=this.myID,e[Uf]=this.myPW,e[zf]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Wf+r.length<=Bf;){const o=this.pendingSegs.shift();r=r+"&"+Ny+i+"="+o.seg+"&"+Ry+i+"="+o.ts+"&"+Ay+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(by)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ye("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy=16384,jy=45e3;let bs=null;typeof MozWebSocket<"u"?bs=MozWebSocket:typeof WebSocket<"u"&&(bs=WebSocket);class st{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ui(this.connId),this.stats_=uc(n),this.connURL=st.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[If]=cc,typeof location<"u"&&location.hostname&&Rf.test(location.hostname)&&(o[Pf]=Nf),n&&(o[Mf]=n),r&&(o[Af]=r),i&&(o[Ya]=i),s&&(o[Lf]=s),Ff(e,Df,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hn.set("previous_websocket_failure",!0);try{let r;hf(),this.mySock=new bs(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){st.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&bs!==null&&!st.forceDisallow_}static previouslyFailed(){return hn.isInMemoryStorage||hn.get("previous_websocket_failure")===!0}markConnectionHealthy(){hn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=li(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(E(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=pe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Cf(n,Fy);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(jy))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}st.responsesRequiredToBeHealthy=2;st.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Un,st]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=st&&st.isAvailable();let r=n&&!st.previouslyFailed();if(e.webSocketOnly&&(n||Te("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[st];else{const i=this.transports_=[];for(const s of di.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);di.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}di.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=6e4,zy=5e3,By=10*1024,Wy=100*1024,la="t",ld="d",Hy="s",cd="r",Vy="e",ud="o",dd="a",fd="n",hd="p",$y="h";class Gy{constructor(e,n,r,i,s,o,a,c,l,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ui("c:"+this.id+":"),this.transportManager_=new di(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Kr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Wy?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>By?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(la in e){const n=e[la];n===dd?this.upgradeIfSecondaryHealthy_():n===cd?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===ud&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ar("t",e),r=Ar("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:hd,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:dd,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:fd,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ar("t",e),r=Ar("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ar(la,e);if(ld in e){const r=e[ld];if(n===$y){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===fd){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Hy?this.onConnectionShutdown_(r):n===cd?this.onReset_(r):n===Vy?Qa("Server Error: "+r):n===ud?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Qa("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),cc!==r&&Te("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Kr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Uy))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Kr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(zy))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:hd,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this.allowedEvents_=e,this.listeners_={},E(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){E(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Vf{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ff()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Os}getInitialEvent(e){return E(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=32,md=768;class H{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function B(){return new H("")}function D(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Jt(t){return t.pieces_.length-t.pieceNum_}function G(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new H(t.pieces_,e)}function fc(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Qy(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function fi(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function $f(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new H(e,0)}function ne(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof H)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new H(n,0)}function b(t){return t.pieceNum_>=t.pieces_.length}function Ae(t,e){const n=D(t),r=D(e);if(n===null)return e;if(n===r)return Ae(G(t),G(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Yy(t,e){const n=fi(t,0),r=fi(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Rn(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function hc(t,e){if(Jt(t)!==Jt(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ke(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Jt(t)>Jt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Ky{constructor(e,n){this.errorPrefix_=n,this.parts_=fi(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=So(this.parts_[r]);Gf(this)}}function qy(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=So(e),Gf(t)}function Xy(t){const e=t.parts_.pop();t.byteLength_-=So(e),t.parts_.length>0&&(t.byteLength_-=1)}function Gf(t){if(t.byteLength_>md)throw new Error(t.errorPrefix_+"has a key path longer than "+md+" bytes ("+t.byteLength_+").");if(t.parts_.length>pd)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+pd+") or object contains a cycle "+un(t))}function un(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends Vf{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new pc}getInitialEvent(e){return E(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=1e3,Jy=60*5*1e3,gd=30*1e3,Zy=1.3,ev=3e4,tv="server_kill",yd=3;class xt extends Hf{constructor(e,n,r,i,s,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=xt.nextPersistentConnectionId_++,this.log_=Ui("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Lr,this.maxReconnectDelay_=Jy,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!hf())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pc.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Os.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(pe(s)),E(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Oi,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),E(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const c=a.d,l=a.s;xt.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&yt(e,"w")){const r=cr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Te(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Hm(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=gd)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Wm(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+pe(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Qa("Unrecognized action received from server: "+pe(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){E(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Lr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Lr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>ev&&(this.reconnectDelay_=Lr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Zy)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+xt.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){E(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?ye("getToken() completed but was canceled"):(ye("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new Gy(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{Te(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(tv)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Te(d),c())}}}interrupt(e){ye("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ye("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Gu(this.interruptReasons_)&&(this.reconnectDelay_=Lr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>lc(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new H(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){ye("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=yd&&(this.reconnectDelay_=gd,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ye("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=yd&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+kf.replace(/\./g,"-")]=1,ff()?e["framework.cordova"]=1:Om()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Os.getInstance().currentlyOnline();return Gu(this.interruptReasons_)&&e}}xt.nextPersistentConnectionId_=0;xt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new O(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new O(Sn,e),i=new O(Sn,n);return this.compare(r,i)!==0}minPost(){return O.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qi;class Qf extends ko{static get __EMPTY_NODE(){return qi}static set __EMPTY_NODE(e){qi=e}compare(e,n){return Rn(e.name,n.name)}isDefinedOn(e){throw kr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return O.MIN}maxPost(){return new O(Tt,qi)}makePost(e,n){return E(typeof e=="string","KeyIndex indexValue must always be a string."),new O(e,qi)}toString(){return".key"}}const Wt=new Qf;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class de{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??de.RED,this.left=i??Le.EMPTY_NODE,this.right=s??Le.EMPTY_NODE}copy(e,n,r,i,s){return new de(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Le.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Le.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,de.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,de.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}de.RED=!0;de.BLACK=!1;class nv{copy(e,n,r,i,s){return this}insert(e,n,r){return new de(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Le{constructor(e,n=Le.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Le(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,de.BLACK,null,null))}remove(e){return new Le(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,de.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Xi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Xi(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Xi(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Xi(this.root_,null,this.comparator_,!0,e)}}Le.EMPTY_NODE=new nv;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t,e){return Rn(t.name,e.name)}function mc(t,e){return Rn(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka;function iv(t){Ka=t}const Yf=function(t){return typeof t=="number"?"number:"+Tf(t):"string:"+t},Kf=function(t){if(t.isLeafNode()){const e=t.val();E(typeof e=="string"||typeof e=="number"||typeof e=="object"&&yt(e,".sv"),"Priority must be a string or number.")}else E(t===Ka||t.isEmpty(),"priority of unexpected type.");E(t===Ka||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd;class ue{constructor(e,n=ue.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,E(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Kf(this.priorityNode_)}static set __childrenNodeConstructor(e){vd=e}static get __childrenNodeConstructor(){return vd}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ue(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ue.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return b(e)?this:D(e)===".priority"?this.priorityNode_:ue.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ue.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=D(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(E(r!==".priority"||Jt(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ue.__childrenNodeConstructor.EMPTY_NODE.updateChild(G(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Yf(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Tf(this.value_):e+=this.value_,this.lazyHash_=Ef(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ue.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ue.__childrenNodeConstructor?-1:(E(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=ue.VALUE_TYPE_ORDER.indexOf(n),s=ue.VALUE_TYPE_ORDER.indexOf(r);return E(i>=0,"Unknown leaf type: "+n),E(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ue.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf,Xf;function sv(t){qf=t}function ov(t){Xf=t}class av extends ko{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Rn(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return O.MIN}maxPost(){return new O(Tt,new ue("[PRIORITY-POST]",Xf))}makePost(e,n){const r=qf(e);return new O(n,new ue("[PRIORITY-POST]",r))}toString(){return".priority"}}const J=new av;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=Math.log(2);class cv{constructor(e){const n=s=>parseInt(Math.log(s)/lv,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Fs=function(t,e,n,r){t.sort(e);const i=function(c,l){const h=l-c;let d,p;if(h===0)return null;if(h===1)return d=t[c],p=n?n(d):d,new de(p,d.node,de.BLACK,null,null);{const y=parseInt(h/2,10)+c,S=i(c,y),w=i(y+1,l);return d=t[y],p=n?n(d):d,new de(p,d.node,de.BLACK,S,w)}},s=function(c){let l=null,h=null,d=t.length;const p=function(S,w){const v=d-S,f=d;d-=S;const m=i(v+1,f),g=t[v],k=n?n(g):g;y(new de(k,g.node,w,null,m))},y=function(S){l?(l.left=S,l=S):(h=S,l=S)};for(let S=0;S<c.count;++S){const w=c.nextBitIsOne(),v=Math.pow(2,c.count-(S+1));w?p(v,de.BLACK):(p(v,de.BLACK),p(v,de.RED))}return h},o=new cv(t.length),a=s(o);return new Le(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca;const Fn={};class wt{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return E(Fn&&J,"ChildrenNode.ts has not been loaded"),ca=ca||new wt({".priority":Fn},{".priority":J}),ca}get(e){const n=cr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Le?n:null}hasIndex(e){return yt(this.indexSet_,e.toString())}addIndex(e,n){E(e!==Wt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(O.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Fs(r,e.getCompare()):a=Fn;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const h=Object.assign({},this.indexes_);return h[c]=a,new wt(h,l)}addToIndexes(e,n){const r=As(this.indexes_,(i,s)=>{const o=cr(this.indexSet_,s);if(E(o,"Missing index implementation for "+s),i===Fn)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(O.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Fs(a,o.getCompare())}else return Fn;else{const a=n.get(e.name);let c=i;return a&&(c=c.remove(new O(e.name,a))),c.insert(e,e.node)}});return new wt(r,this.indexSet_)}removeFromIndexes(e,n){const r=As(this.indexes_,i=>{if(i===Fn)return i;{const s=n.get(e.name);return s?i.remove(new O(e.name,s)):i}});return new wt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dr;class R{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Kf(this.priorityNode_),this.children_.isEmpty()&&E(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Dr||(Dr=new R(new Le(mc),null,wt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Dr}updatePriority(e){return this.children_.isEmpty()?this:new R(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Dr:n}}getChild(e){const n=D(e);return n===null?this:this.getImmediateChild(n).getChild(G(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(E(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new O(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Dr:this.priorityNode_;return new R(i,o,s)}}updateChild(e,n){const r=D(e);if(r===null)return n;{E(D(e)!==".priority"||Jt(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(G(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(J,(o,a)=>{n[o]=a.val(e),r++,s&&R.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Yf(this.getPriority().val())+":"),this.forEachChild(J,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Ef(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new O(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new O(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new O(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,O.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,O.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===zi?-1:0}withIndex(e){if(e===Wt||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new R(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Wt||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(J),i=n.getIterator(J);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Wt?null:this.indexMap_.get(e.toString())}}R.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class uv extends R{constructor(){super(new Le(mc),R.EMPTY_NODE,wt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return R.EMPTY_NODE}isEmpty(){return!1}}const zi=new uv;Object.defineProperties(O,{MIN:{value:new O(Sn,R.EMPTY_NODE)},MAX:{value:new O(Tt,zi)}});Qf.__EMPTY_NODE=R.EMPTY_NODE;ue.__childrenNodeConstructor=R;iv(zi);ov(zi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=!0;function he(t,e=null){if(t===null)return R.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),E(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ue(n,he(e))}if(!(t instanceof Array)&&dv){const n=[];let r=!1;if(_e(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=he(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new O(o,c)))}}),n.length===0)return R.EMPTY_NODE;const s=Fs(n,rv,o=>o.name,mc);if(r){const o=Fs(n,J.getCompare());return new R(s,he(e),new wt({".priority":o},{".priority":J}))}else return new R(s,he(e),wt.Default)}else{let n=R.EMPTY_NODE;return _e(t,(r,i)=>{if(yt(t,r)&&r.substring(0,1)!=="."){const s=he(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(he(e))}}sv(he);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends ko{constructor(e){super(),this.indexPath_=e,E(!b(e)&&D(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Rn(e.name,n.name):s}makePost(e,n){const r=he(e),i=R.EMPTY_NODE.updateChild(this.indexPath_,r);return new O(n,i)}maxPost(){const e=R.EMPTY_NODE.updateChild(this.indexPath_,zi);return new O(Tt,e)}toString(){return fi(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv extends ko{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Rn(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return O.MIN}maxPost(){return O.MAX}makePost(e,n){const r=he(e);return new O(n,r)}toString(){return".value"}}const Jf=new fv;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t){return{type:"value",snapshotNode:t}}function ur(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function hi(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function pi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function hv(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){E(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(hi(n,a)):E(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ur(n,r)):o.trackChildChange(pi(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(J,(i,s)=>{n.hasChild(i)||r.trackChildChange(hi(i,s))}),n.isLeafNode()||n.forEachChild(J,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(pi(i,s,o))}else r.trackChildChange(ur(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?R.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.indexedFilter_=new yc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=mi.getStartPost_(e),this.endPost_=mi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new O(n,r))||(r=R.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=R.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(R.EMPTY_NODE);const s=this;return n.forEachChild(J,(o,a)=>{s.matches(new O(o,a))||(i=i.updateImmediateChild(o,R.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new mi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new O(n,r))||(r=R.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=R.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=R.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(R.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,R.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,y)=>d(y,p)}else o=this.index_.getCompare();const a=e;E(a.numChildren()===this.limit_,"");const c=new O(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=i.getChildAfterChild(this.index_,l,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=i.getChildAfterChild(this.index_,p,this.reverse_);const y=p==null?1:o(p,c);if(h&&!r.isEmpty()&&y>=0)return s!=null&&s.trackChildChange(pi(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(hi(n,d));const w=a.updateImmediateChild(n,R.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(s!=null&&s.trackChildChange(ur(p.name,p.node)),w.updateImmediateChild(p.name,p.node)):w}}else return r.isEmpty()?e:h&&o(l,c)>=0?(s!=null&&(s.trackChildChange(hi(l.name,l.node)),s.trackChildChange(ur(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,R.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=J}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return E(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return E(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Sn}hasEnd(){return this.endSet_}getIndexEndValue(){return E(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return E(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Tt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return E(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===J}copy(){const e=new vc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function mv(t){return t.loadsAllData()?new yc(t.getIndex()):t.hasLimit()?new pv(t):new mi(t)}function gv(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function yv(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function _d(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function vv(t,e,n){let r;return t.index_===Wt||n?r=_d(t,e,n):r=_d(t,e,Tt),r.startAfterSet_=!0,r}function _v(t,e){const n=t.copy();return n.index_=e,n}function wd(t){const e={};if(t.isDefault())return e;let n;if(t.index_===J?n="$priority":t.index_===Jf?n="$value":t.index_===Wt?n="$key":(E(t.index_ instanceof gc,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=pe(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=pe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+pe(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=pe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+pe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Sd(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==J&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Hf{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ui("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(E(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=js.getListenId_(e,r),a={};this.listens_[o]=a;const c=wd(e._queryParams);this.restRequest_(s+".json",c,(l,h)=>{let d=h;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),cr(this.listens_,o)===a){let p;l?l===401?p="permission_denied":p="rest_error:"+l:p="ok",i(p,null)}})}unlisten(e,n){const r=js.getListenId_(e,n);delete this.listens_[r]}get(e){const n=wd(e._queryParams),r=e._path.toString(),i=new Oi;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Vm(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=li(a.responseText)}catch{Te("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Te("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(){this.rootNode_=R.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return{value:null,children:new Map}}function eh(t,e,n){if(b(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=D(e);t.children.has(r)||t.children.set(r,Us());const i=t.children.get(r);e=G(e),eh(i,e,n)}}function qa(t,e,n){t.value!==null?n(e,t.value):Sv(t,(r,i)=>{const s=new H(e.toString()+"/"+r);qa(i,s,n)})}function Sv(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&_e(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=10*1e3,xv=30*1e3,Ev=5*60*1e3;class Cv{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new kv(e);const r=kd+(xv-kd)*Math.random();Kr(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;_e(e,(i,s)=>{s>0&&yt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Kr(this.reportStats_.bind(this),Math.floor(Math.random()*2*Ev))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ot||(ot={}));function _c(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function wc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Sc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ot.ACK_USER_WRITE,this.source=_c()}operationForChild(e){if(b(this.path)){if(this.affectedTree.value!=null)return E(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new H(e));return new zs(B(),n,this.revert)}}else return E(D(this.path)===e,"operationForChild called for unrelated child."),new zs(G(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n){this.source=e,this.path=n,this.type=ot.LISTEN_COMPLETE}operationForChild(e){return b(this.path)?new gi(this.source,B()):new gi(this.source,G(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ot.OVERWRITE}operationForChild(e){return b(this.path)?new kn(this.source,B(),this.snap.getImmediateChild(e)):new kn(this.source,G(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ot.MERGE}operationForChild(e){if(b(this.path)){const n=this.children.subtree(new H(e));return n.isEmpty()?null:n.value?new kn(this.source,B(),n.value):new dr(this.source,B(),n)}else return E(D(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new dr(this.source,G(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(b(e))return this.isFullyInitialized()&&!this.filtered_;const n=D(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Iv(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(hv(o.childName,o.snapshotNode))}),br(t,i,"child_removed",e,r,n),br(t,i,"child_added",e,r,n),br(t,i,"child_moved",s,r,n),br(t,i,"child_changed",e,r,n),br(t,i,"value",e,r,n),i}function br(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Pv(t,a,c)),o.forEach(a=>{const c=Mv(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Mv(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Pv(t,e,n){if(e.childName==null||n.childName==null)throw kr("Should only compare child_ events.");const r=new O(e.childName,e.snapshotNode),i=new O(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t,e){return{eventCache:t,serverCache:e}}function qr(t,e,n,r){return xo(new xn(e,n,r),t.serverCache)}function th(t,e,n,r){return xo(t.eventCache,new xn(e,n,r))}function Xa(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function En(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ua;const Nv=()=>(ua||(ua=new Le(fy)),ua);class V{constructor(e,n=Nv()){this.value=e,this.children=n}static fromObject(e){let n=new V(null);return _e(e,(r,i)=>{n=n.set(new H(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:B(),value:this.value};if(b(e))return null;{const r=D(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(G(e),n);return s!=null?{path:ne(new H(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(b(e))return this;{const n=D(e),r=this.children.get(n);return r!==null?r.subtree(G(e)):new V(null)}}set(e,n){if(b(e))return new V(n,this.children);{const r=D(e),s=(this.children.get(r)||new V(null)).set(G(e),n),o=this.children.insert(r,s);return new V(this.value,o)}}remove(e){if(b(e))return this.children.isEmpty()?new V(null):new V(null,this.children);{const n=D(e),r=this.children.get(n);if(r){const i=r.remove(G(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new V(null):new V(this.value,s)}else return this}}get(e){if(b(e))return this.value;{const n=D(e),r=this.children.get(n);return r?r.get(G(e)):null}}setTree(e,n){if(b(e))return n;{const r=D(e),s=(this.children.get(r)||new V(null)).setTree(G(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new V(this.value,o)}}fold(e){return this.fold_(B(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ne(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,B(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(b(e))return null;{const s=D(e),o=this.children.get(s);return o?o.findOnPath_(G(e),ne(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,B(),n)}foreachOnPath_(e,n,r){if(b(e))return this;{this.value&&r(n,this.value);const i=D(e),s=this.children.get(i);return s?s.foreachOnPath_(G(e),ne(n,i),r):new V(null)}}foreach(e){this.foreach_(B(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ne(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.writeTree_=e}static empty(){return new at(new V(null))}}function Xr(t,e,n){if(b(e))return new at(new V(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Ae(i,e);return s=s.updateChild(o,n),new at(t.writeTree_.set(i,s))}else{const i=new V(n),s=t.writeTree_.setTree(e,i);return new at(s)}}}function Ja(t,e,n){let r=t;return _e(n,(i,s)=>{r=Xr(r,ne(e,i),s)}),r}function xd(t,e){if(b(e))return at.empty();{const n=t.writeTree_.setTree(e,new V(null));return new at(n)}}function Za(t,e){return An(t,e)!=null}function An(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ae(n.path,e)):null}function Ed(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(J,(r,i)=>{e.push(new O(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new O(r,i.value))}),e}function Ht(t,e){if(b(e))return t;{const n=An(t,e);return n!=null?new at(new V(n)):new at(t.writeTree_.subtree(e))}}function el(t){return t.writeTree_.isEmpty()}function fr(t,e){return nh(B(),t.writeTree_,e)}function nh(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(E(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=nh(ne(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ne(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t,e){return oh(e,t)}function Rv(t,e,n,r,i){E(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Xr(t.visibleWrites,e,n)),t.lastWriteId=r}function Av(t,e,n,r){E(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ja(t.visibleWrites,e,n),t.lastWriteId=r}function Lv(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Dv(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);E(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&bv(a,r.path)?i=!1:Ke(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Ov(t),!0;if(r.snap)t.visibleWrites=xd(t.visibleWrites,r.path);else{const a=r.children;_e(a,c=>{t.visibleWrites=xd(t.visibleWrites,ne(r.path,c))})}return!0}else return!1}function bv(t,e){if(t.snap)return Ke(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ke(ne(t.path,n),e))return!0;return!1}function Ov(t){t.visibleWrites=rh(t.allWrites,Fv,B()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Fv(t){return t.visible}function rh(t,e,n){let r=at.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Ke(n,o)?(a=Ae(n,o),r=Xr(r,a,s.snap)):Ke(o,n)&&(a=Ae(o,n),r=Xr(r,B(),s.snap.getChild(a)));else if(s.children){if(Ke(n,o))a=Ae(n,o),r=Ja(r,a,s.children);else if(Ke(o,n))if(a=Ae(o,n),b(a))r=Ja(r,B(),s.children);else{const c=cr(s.children,D(a));if(c){const l=c.getChild(G(a));r=Xr(r,B(),l)}}}else throw kr("WriteRecord should have .snap or .children")}}return r}function ih(t,e,n,r,i){if(!r&&!i){const s=An(t.visibleWrites,e);if(s!=null)return s;{const o=Ht(t.visibleWrites,e);if(el(o))return n;if(n==null&&!Za(o,B()))return null;{const a=n||R.EMPTY_NODE;return fr(o,a)}}}else{const s=Ht(t.visibleWrites,e);if(!i&&el(s))return n;if(!i&&n==null&&!Za(s,B()))return null;{const o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Ke(l.path,e)||Ke(e,l.path))},a=rh(t.allWrites,o,e),c=n||R.EMPTY_NODE;return fr(a,c)}}}function jv(t,e,n){let r=R.EMPTY_NODE;const i=An(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(J,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Ht(t.visibleWrites,e);return n.forEachChild(J,(o,a)=>{const c=fr(Ht(s,new H(o)),a);r=r.updateImmediateChild(o,c)}),Ed(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Ht(t.visibleWrites,e);return Ed(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Uv(t,e,n,r,i){E(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ne(e,n);if(Za(t.visibleWrites,s))return null;{const o=Ht(t.visibleWrites,s);return el(o)?i.getChild(n):fr(o,i.getChild(n))}}function zv(t,e,n,r){const i=ne(e,n),s=An(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Ht(t.visibleWrites,i);return fr(o,r.getNode().getImmediateChild(n))}else return null}function Bv(t,e){return An(t.visibleWrites,e)}function Wv(t,e,n,r,i,s,o){let a;const c=Ht(t.visibleWrites,e),l=An(c,B());if(l!=null)a=l;else if(n!=null)a=fr(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=p.getNext();for(;y&&h.length<i;)d(y,r)!==0&&h.push(y),y=p.getNext();return h}else return[]}function Hv(){return{visibleWrites:at.empty(),allWrites:[],lastWriteId:-1}}function Bs(t,e,n,r){return ih(t.writeTree,t.treePath,e,n,r)}function xc(t,e){return jv(t.writeTree,t.treePath,e)}function Cd(t,e,n,r){return Uv(t.writeTree,t.treePath,e,n,r)}function Ws(t,e){return Bv(t.writeTree,ne(t.treePath,e))}function Vv(t,e,n,r,i,s){return Wv(t.writeTree,t.treePath,e,n,r,i,s)}function Ec(t,e,n){return zv(t.writeTree,t.treePath,e,n)}function sh(t,e){return oh(ne(t.treePath,e),t.writeTree)}function oh(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;E(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),E(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,pi(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,hi(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,ur(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,pi(r,e.snapshotNode,i.oldSnap));else throw kr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const ah=new Gv;class Cc{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new xn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ec(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:En(this.viewCache_),s=Vv(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t){return{filter:t}}function Yv(t,e){E(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),E(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Kv(t,e,n,r,i){const s=new $v;let o,a;if(n.type===ot.OVERWRITE){const l=n;l.source.fromUser?o=tl(t,e,l.path,l.snap,r,i,s):(E(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!b(l.path),o=Hs(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===ot.MERGE){const l=n;l.source.fromUser?o=Xv(t,e,l.path,l.children,r,i,s):(E(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=nl(t,e,l.path,l.children,r,i,a,s))}else if(n.type===ot.ACK_USER_WRITE){const l=n;l.revert?o=e_(t,e,l.path,r,i,s):o=Jv(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===ot.LISTEN_COMPLETE)o=Zv(t,e,n.path,r,s);else throw kr("Unknown operation type: "+n.type);const c=s.getChanges();return qv(e,o,c),{viewCache:o,changes:c}}function qv(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Xa(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Zf(Xa(e)))}}function lh(t,e,n,r,i,s){const o=e.eventCache;if(Ws(r,n)!=null)return e;{let a,c;if(b(n))if(E(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=En(e),h=l instanceof R?l:R.EMPTY_NODE,d=xc(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const l=Bs(r,En(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=D(n);if(l===".priority"){E(Jt(n)===1,"Can't have a priority with additional path components");const h=o.getNode();c=e.serverCache.getNode();const d=Cd(r,n,h,c);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=G(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const p=Cd(r,n,o.getNode(),c);p!=null?d=o.getNode().getImmediateChild(l).updateChild(h,p):d=o.getNode().getImmediateChild(l)}else d=Ec(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,h,i,s):a=o.getNode()}}return qr(e,a,o.isFullyInitialized()||b(n),t.filter.filtersNodes())}}function Hs(t,e,n,r,i,s,o,a){const c=e.serverCache;let l;const h=o?t.filter:t.filter.getIndexedFilter();if(b(n))l=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){const y=c.getNode().updateChild(n,r);l=h.updateFullNode(c.getNode(),y,null)}else{const y=D(n);if(!c.isCompleteForPath(n)&&Jt(n)>1)return e;const S=G(n),v=c.getNode().getImmediateChild(y).updateChild(S,r);y===".priority"?l=h.updatePriority(c.getNode(),v):l=h.updateChild(c.getNode(),y,v,S,ah,null)}const d=th(e,l,c.isFullyInitialized()||b(n),h.filtersNodes()),p=new Cc(i,d,s);return lh(t,d,n,i,p,a)}function tl(t,e,n,r,i,s,o){const a=e.eventCache;let c,l;const h=new Cc(i,e,s);if(b(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=qr(e,l,!0,t.filter.filtersNodes());else{const d=D(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=qr(e,l,a.isFullyInitialized(),a.isFiltered());else{const p=G(n),y=a.getNode().getImmediateChild(d);let S;if(b(p))S=r;else{const w=h.getCompleteChild(d);w!=null?fc(p)===".priority"&&w.getChild($f(p)).isEmpty()?S=w:S=w.updateChild(p,r):S=R.EMPTY_NODE}if(y.equals(S))c=e;else{const w=t.filter.updateChild(a.getNode(),d,S,p,h,o);c=qr(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Td(t,e){return t.eventCache.isCompleteForChild(e)}function Xv(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{const h=ne(n,c);Td(e,D(h))&&(a=tl(t,a,h,l,i,s,o))}),r.foreach((c,l)=>{const h=ne(n,c);Td(e,D(h))||(a=tl(t,a,h,l,i,s,o))}),a}function Id(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function nl(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;b(n)?l=r:l=new V(null).setTree(n,r);const h=e.serverCache.getNode();return l.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const y=e.serverCache.getNode().getImmediateChild(d),S=Id(t,y,p);c=Hs(t,c,new H(d),S,i,s,o,a)}}),l.children.inorderTraversal((d,p)=>{const y=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!y){const S=e.serverCache.getNode().getImmediateChild(d),w=Id(t,S,p);c=Hs(t,c,new H(d),w,i,s,o,a)}}),c}function Jv(t,e,n,r,i,s,o){if(Ws(i,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(b(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Hs(t,e,n,c.getNode().getChild(n),i,s,a,o);if(b(n)){let l=new V(null);return c.getNode().forEachChild(Wt,(h,d)=>{l=l.set(new H(h),d)}),nl(t,e,n,l,i,s,a,o)}else return e}else{let l=new V(null);return r.foreach((h,d)=>{const p=ne(n,h);c.isCompleteForPath(p)&&(l=l.set(h,c.getNode().getChild(p)))}),nl(t,e,n,l,i,s,a,o)}}function Zv(t,e,n,r,i){const s=e.serverCache,o=th(e,s.getNode(),s.isFullyInitialized()||b(n),s.isFiltered());return lh(t,o,n,r,ah,i)}function e_(t,e,n,r,i,s){let o;if(Ws(r,n)!=null)return e;{const a=new Cc(r,e,i),c=e.eventCache.getNode();let l;if(b(n)||D(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Bs(r,En(e));else{const d=e.serverCache.getNode();E(d instanceof R,"serverChildren would be complete if leaf node"),h=xc(r,d)}h=h,l=t.filter.updateFullNode(c,h,s)}else{const h=D(n);let d=Ec(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),d!=null?l=t.filter.updateChild(c,h,d,G(n),a,s):e.eventCache.getNode().hasChild(h)?l=t.filter.updateChild(c,h,R.EMPTY_NODE,G(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Bs(r,En(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Ws(r,B())!=null,qr(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new yc(r.getIndex()),s=mv(r);this.processor_=Qv(s);const o=n.serverCache,a=n.eventCache,c=i.updateFullNode(R.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(R.EMPTY_NODE,a.getNode(),null),h=new xn(c,o.isFullyInitialized(),i.filtersNodes()),d=new xn(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=xo(d,h),this.eventGenerator_=new Tv(this.query_)}get query(){return this.query_}}function n_(t){return t.viewCache_.serverCache.getNode()}function r_(t,e){const n=En(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!b(e)&&!n.getImmediateChild(D(e)).isEmpty())?n.getChild(e):null}function Md(t){return t.eventRegistrations_.length===0}function i_(t,e){t.eventRegistrations_.push(e)}function Pd(t,e,n){const r=[];if(n){E(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Nd(t,e,n,r){e.type===ot.MERGE&&e.source.queryId!==null&&(E(En(t.viewCache_),"We should always have a full cache before handling merges"),E(Xa(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=Kv(t.processor_,i,e,n,r);return Yv(t.processor_,s.viewCache),E(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,ch(t,s.changes,s.viewCache.eventCache.getNode(),null)}function s_(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(J,(s,o)=>{r.push(ur(s,o))}),n.isFullyInitialized()&&r.push(Zf(n.getNode())),ch(t,r,n.getNode(),e)}function ch(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return Iv(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vs;class o_{constructor(){this.views=new Map}}function a_(t){E(!Vs,"__referenceConstructor has already been defined"),Vs=t}function l_(){return E(Vs,"Reference.ts has not been loaded"),Vs}function c_(t){return t.views.size===0}function Tc(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return E(s!=null,"SyncTree gave us an op for an invalid query."),Nd(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Nd(o,e,n,r));return s}}function u_(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Bs(n,i?r:null),c=!1;a?c=!0:r instanceof R?(a=xc(n,r),c=!1):(a=R.EMPTY_NODE,c=!1);const l=xo(new xn(a,c,!1),new xn(r,i,!1));return new t_(e,l)}return o}function d_(t,e,n,r,i,s){const o=u_(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),i_(o,n),s_(o,n)}function f_(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Zt(t);if(i==="default")for(const[c,l]of t.views.entries())o=o.concat(Pd(l,n,r)),Md(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{const c=t.views.get(i);c&&(o=o.concat(Pd(c,n,r)),Md(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Zt(t)&&s.push(new(l_())(e._repo,e._path)),{removed:s,events:o}}function uh(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function tr(t,e){let n=null;for(const r of t.views.values())n=n||r_(r,e);return n}function dh(t,e){if(e._queryParams.loadsAllData())return Eo(t);{const r=e._queryIdentifier;return t.views.get(r)}}function fh(t,e){return dh(t,e)!=null}function Zt(t){return Eo(t)!=null}function Eo(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $s;function h_(t){E(!$s,"__referenceConstructor has already been defined"),$s=t}function p_(){return E($s,"Reference.ts has not been loaded"),$s}let m_=1;class Rd{constructor(e){this.listenProvider_=e,this.syncPointTree_=new V(null),this.pendingWriteTree_=Hv(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function hh(t,e,n,r,i){return Rv(t.pendingWriteTree_,e,n,r,i),i?Er(t,new kn(_c(),e,n)):[]}function g_(t,e,n,r){Av(t.pendingWriteTree_,e,n,r);const i=V.fromObject(n);return Er(t,new dr(_c(),e,i))}function Ft(t,e,n=!1){const r=Lv(t.pendingWriteTree_,e);if(Dv(t.pendingWriteTree_,e)){let s=new V(null);return r.snap!=null?s=s.set(B(),!0):_e(r.children,o=>{s=s.set(new H(o),!0)}),Er(t,new zs(r.path,s,n))}else return[]}function Co(t,e,n){return Er(t,new kn(wc(),e,n))}function y_(t,e,n){const r=V.fromObject(n);return Er(t,new dr(wc(),e,r))}function v_(t,e){return Er(t,new gi(wc(),e))}function __(t,e,n){const r=Mc(t,n);if(r){const i=Pc(r),s=i.path,o=i.queryId,a=Ae(s,e),c=new gi(Sc(o),a);return Nc(t,s,c)}else return[]}function rl(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||fh(o,e))){const c=f_(o,e,n,r);c_(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const l=c.removed;if(a=c.events,!i){const h=l.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(p,y)=>Zt(y));if(h&&!d){const p=t.syncPointTree_.subtree(s);if(!p.isEmpty()){const y=k_(p);for(let S=0;S<y.length;++S){const w=y[S],v=w.query,f=gh(t,w);t.listenProvider_.startListening(Jr(v),Gs(t,v),f.hashFn,f.onComplete)}}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(Jr(e),null):l.forEach(p=>{const y=t.queryToTagMap.get(To(p));t.listenProvider_.stopListening(Jr(p),y)}))}x_(t,l)}return a}function w_(t,e,n,r){const i=Mc(t,r);if(i!=null){const s=Pc(i),o=s.path,a=s.queryId,c=Ae(o,e),l=new kn(Sc(a),c,n);return Nc(t,o,l)}else return[]}function S_(t,e,n,r){const i=Mc(t,r);if(i){const s=Pc(i),o=s.path,a=s.queryId,c=Ae(o,e),l=V.fromObject(n),h=new dr(Sc(a),c,l);return Nc(t,o,h)}else return[]}function Ad(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(p,y)=>{const S=Ae(p,i);s=s||tr(y,S),o=o||Zt(y)});let a=t.syncPointTree_.get(i);a?(o=o||Zt(a),s=s||tr(a,B())):(a=new o_,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=R.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,S)=>{const w=tr(S,B());w&&(s=s.updateImmediateChild(y,w))}));const l=fh(a,e);if(!l&&!e._queryParams.loadsAllData()){const p=To(e);E(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const y=E_();t.queryToTagMap.set(p,y),t.tagToQueryMap.set(y,p)}const h=kc(t.pendingWriteTree_,i);let d=d_(a,e,n,h,s,c);if(!l&&!o&&!r){const p=dh(a,e);d=d.concat(C_(t,e,p))}return d}function Ic(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Ae(o,e),l=tr(a,c);if(l)return l});return ih(i,e,s,n,!0)}function Er(t,e){return ph(e,t.syncPointTree_,null,kc(t.pendingWriteTree_,B()))}function ph(t,e,n,r){if(b(t.path))return mh(t,e,n,r);{const i=e.get(B());n==null&&i!=null&&(n=tr(i,B()));let s=[];const o=D(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,h=sh(r,o);s=s.concat(ph(a,c,l,h))}return i&&(s=s.concat(Tc(i,t,r,n))),s}}function mh(t,e,n,r){const i=e.get(B());n==null&&i!=null&&(n=tr(i,B()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=sh(r,o),h=t.operationForChild(o);h&&(s=s.concat(mh(h,a,c,l)))}),i&&(s=s.concat(Tc(i,t,r,n))),s}function gh(t,e){const n=e.query,r=Gs(t,n);return{hashFn:()=>(n_(e)||R.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?__(t,n._path,r):v_(t,n._path);{const s=my(i,n);return rl(t,n,null,s)}}}}function Gs(t,e){const n=To(e);return t.queryToTagMap.get(n)}function To(t){return t._path.toString()+"$"+t._queryIdentifier}function Mc(t,e){return t.tagToQueryMap.get(e)}function Pc(t){const e=t.indexOf("$");return E(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new H(t.substr(0,e))}}function Nc(t,e,n){const r=t.syncPointTree_.get(e);E(r,"Missing sync point for query tag that we're tracking");const i=kc(t.pendingWriteTree_,e);return Tc(r,n,i,null)}function k_(t){return t.fold((e,n,r)=>{if(n&&Zt(n))return[Eo(n)];{let i=[];return n&&(i=uh(n)),_e(r,(s,o)=>{i=i.concat(o)}),i}})}function Jr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(p_())(t._repo,t._path):t}function x_(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=To(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function E_(){return m_++}function C_(t,e,n){const r=e._path,i=Gs(t,e),s=gh(t,n),o=t.listenProvider_.startListening(Jr(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)E(!Zt(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,h,d)=>{if(!b(l)&&h&&Zt(h))return[Eo(h).query];{let p=[];return h&&(p=p.concat(uh(h).map(y=>y.query))),_e(d,(y,S)=>{p=p.concat(S)}),p}});for(let l=0;l<c.length;++l){const h=c[l];t.listenProvider_.stopListening(Jr(h),Gs(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Rc(n)}node(){return this.node_}}class Ac{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ne(this.path_,e);return new Ac(this.syncTree_,n)}node(){return Ic(this.syncTree_,this.path_)}}const T_=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Ld=function(t,e,n){if(!t||typeof t!="object")return t;if(E(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return I_(t[".sv"],e,n);if(typeof t[".sv"]=="object")return M_(t[".sv"],e);E(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},I_=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:E(!1,"Unexpected server value: "+t)}},M_=function(t,e,n){t.hasOwnProperty("increment")||E(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&E(!1,"Unexpected increment value: "+r);const i=e.node();if(E(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},yh=function(t,e,n,r){return Lc(e,new Ac(n,t),r)},vh=function(t,e,n){return Lc(t,new Rc(e),n)};function Lc(t,e,n){const r=t.getPriority().val(),i=Ld(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=Ld(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new ue(a,he(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ue(i))),o.forEachChild(J,(a,c)=>{const l=Lc(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function bc(t,e){let n=e instanceof H?e:new H(e),r=t,i=D(n);for(;i!==null;){const s=cr(r.node.children,i)||{children:{},childCount:0};r=new Dc(i,r,s),n=G(n),i=D(n)}return r}function Cr(t){return t.node.value}function _h(t,e){t.node.value=e,il(t)}function wh(t){return t.node.childCount>0}function P_(t){return Cr(t)===void 0&&!wh(t)}function Io(t,e){_e(t.node.children,(n,r)=>{e(new Dc(n,t,r))})}function Sh(t,e,n,r){n&&!r&&e(t),Io(t,i=>{Sh(i,e,!0,r)}),n&&r&&e(t)}function N_(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Bi(t){return new H(t.parent===null?t.name:Bi(t.parent)+"/"+t.name)}function il(t){t.parent!==null&&R_(t.parent,t.name,t)}function R_(t,e,n){const r=P_(n),i=yt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,il(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,il(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=/[\[\].#$\/\u0000-\u001F\u007F]/,L_=/[\[\].#$\u0000-\u001F\u007F]/,da=10*1024*1024,Oc=function(t){return typeof t=="string"&&t.length!==0&&!A_.test(t)},kh=function(t){return typeof t=="string"&&t.length!==0&&!L_.test(t)},D_=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kh(t)},sl=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!ac(t)||t&&typeof t=="object"&&yt(t,".sv")},Fc=function(t,e,n,r){r&&e===void 0||Mo(wo(t,"value"),e,n)},Mo=function(t,e,n){const r=n instanceof H?new Ky(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+un(r));if(typeof e=="function")throw new Error(t+"contains a function "+un(r)+" with contents = "+e.toString());if(ac(e))throw new Error(t+"contains "+e.toString()+" "+un(r));if(typeof e=="string"&&e.length>da/3&&So(e)>da)throw new Error(t+"contains a string greater than "+da+" utf8 bytes "+un(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(_e(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Oc(o)))throw new Error(t+" contains an invalid key ("+o+") "+un(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);qy(r,o),Mo(t,a,r),Xy(r)}),i&&s)throw new Error(t+' contains ".value" child '+un(r)+" in addition to actual children.")}},b_=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=fi(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Oc(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Yy);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Ke(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},O_=function(t,e,n,r){const i=wo(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];_e(e,(o,a)=>{const c=new H(o);if(Mo(i,a,ne(n,c)),fc(c)===".priority"&&!sl(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),b_(i,s)},jc=function(t,e,n,r){if(!kh(n))throw new Error(wo(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},F_=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jc(t,e,n)},xh=function(t,e){if(D(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},j_=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Oc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!D_(n))throw new Error(wo(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Po(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!hc(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Eh(t,e,n){Po(t,n),Ch(t,r=>hc(r,e))}function ut(t,e,n){Po(t,n),Ch(t,r=>Ke(r,e)||Ke(e,r))}function Ch(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(z_(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function z_(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Yr&&ye("event: "+n.toString()),xr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="repo_interrupt",W_=25;class H_{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new U_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Us(),this.transactionQueueTree_=new Dc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function V_(t,e,n){if(t.stats_=uc(t.repoInfo_),t.forceRestClient_||_y())t.server_=new js(t.repoInfo_,(r,i,s,o)=>{Dd(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>bd(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new xt(t.repoInfo_,e,(r,i,s,o)=>{Dd(t,r,i,s,o)},r=>{bd(t,r)},r=>{$_(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Ey(t.repoInfo_,()=>new Cv(t.stats_,t.server_)),t.infoData_=new wv,t.infoSyncTree_=new Rd({startListening:(r,i,s,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Co(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Uc(t,"connected",!1),t.serverSyncTree_=new Rd({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{const l=o(a,c);ut(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Th(t){const n=t.infoData_.getNode(new H(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function No(t){return T_({timestamp:Th(t)})}function Dd(t,e,n,r,i){t.dataUpdateCount++;const s=new H(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=As(n,l=>he(l));o=S_(t.serverSyncTree_,s,c,i)}else{const c=he(n);o=w_(t.serverSyncTree_,s,c,i)}else if(r){const c=As(n,l=>he(l));o=y_(t.serverSyncTree_,s,c)}else{const c=he(n);o=Co(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=hr(t,s)),ut(t.eventQueue_,a,o)}function bd(t,e){Uc(t,"connected",e),e===!1&&Y_(t)}function $_(t,e){_e(e,(n,r)=>{Uc(t,n,r)})}function Uc(t,e,n){const r=new H("/.info/"+e),i=he(n);t.infoData_.updateSnapshot(r,i);const s=Co(t.infoSyncTree_,r,i);ut(t.eventQueue_,r,s)}function zc(t){return t.nextWriteId_++}function G_(t,e,n,r,i){Ro(t,"set",{path:e.toString(),value:n,priority:r});const s=No(t),o=he(n,r),a=Ic(t.serverSyncTree_,e),c=vh(o,a,s),l=zc(t),h=hh(t.serverSyncTree_,e,c,l,!0);Po(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,y)=>{const S=p==="ok";S||Te("set at "+e+" failed: "+p);const w=Ft(t.serverSyncTree_,l,!S);ut(t.eventQueue_,e,w),ol(t,i,p,y)});const d=Wc(t,e);hr(t,d),ut(t.eventQueue_,d,[])}function Q_(t,e,n,r){Ro(t,"update",{path:e.toString(),value:n});let i=!0;const s=No(t),o={};if(_e(n,(a,c)=>{i=!1,o[a]=yh(ne(e,a),he(c),t.serverSyncTree_,s)}),i)ye("update() called with empty data.  Don't do anything."),ol(t,r,"ok",void 0);else{const a=zc(t),c=g_(t.serverSyncTree_,e,o,a);Po(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,h)=>{const d=l==="ok";d||Te("update at "+e+" failed: "+l);const p=Ft(t.serverSyncTree_,a,!d),y=p.length>0?hr(t,e):e;ut(t.eventQueue_,y,p),ol(t,r,l,h)}),_e(n,l=>{const h=Wc(t,ne(e,l));hr(t,h)}),ut(t.eventQueue_,e,[])}}function Y_(t){Ro(t,"onDisconnectEvents");const e=No(t),n=Us();qa(t.onDisconnect_,B(),(i,s)=>{const o=yh(i,s,t.serverSyncTree_,e);eh(n,i,o)});let r=[];qa(n,B(),(i,s)=>{r=r.concat(Co(t.serverSyncTree_,i,s));const o=Wc(t,i);hr(t,o)}),t.onDisconnect_=Us(),ut(t.eventQueue_,B(),r)}function K_(t,e,n){let r;D(e._path)===".info"?r=Ad(t.infoSyncTree_,e,n):r=Ad(t.serverSyncTree_,e,n),Eh(t.eventQueue_,e._path,r)}function q_(t,e,n){let r;D(e._path)===".info"?r=rl(t.infoSyncTree_,e,n):r=rl(t.serverSyncTree_,e,n),Eh(t.eventQueue_,e._path,r)}function X_(t){t.persistentConnection_&&t.persistentConnection_.interrupt(B_)}function Ro(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ye(n,...e)}function ol(t,e,n,r){e&&xr(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function Ih(t,e,n){return Ic(t.serverSyncTree_,e,n)||R.EMPTY_NODE}function Bc(t,e=t.transactionQueueTree_){if(e||Ao(t,e),Cr(e)){const n=Ph(t,e);E(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&J_(t,Bi(e),n)}else wh(e)&&Io(e,n=>{Bc(t,n)})}function J_(t,e,n){const r=n.map(l=>l.currentWriteId),i=Ih(t,e,r);let s=i;const o=i.hash();for(let l=0;l<n.length;l++){const h=n[l];E(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Ae(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Ro(t,"transaction put response",{path:c.toString(),status:l});let h=[];if(l==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(Ft(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();Ao(t,bc(t.transactionQueueTree_,e)),Bc(t,t.transactionQueueTree_),ut(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)xr(d[p])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Te("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}hr(t,e)}},o)}function hr(t,e){const n=Mh(t,e),r=Bi(n),i=Ph(t,n);return Z_(t,i,r),r}function Z_(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=Ae(n,c.path);let h=!1,d;if(E(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)h=!0,d=c.abortReason,i=i.concat(Ft(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=W_)h=!0,d="maxretry",i=i.concat(Ft(t.serverSyncTree_,c.currentWriteId,!0));else{const p=Ih(t,c.path,o);c.currentInputSnapshot=p;const y=e[a].update(p.val());if(y!==void 0){Mo("transaction failed: Data returned ",y,c.path);let S=he(y);typeof y=="object"&&y!=null&&yt(y,".priority")||(S=S.updatePriority(p.getPriority()));const v=c.currentWriteId,f=No(t),m=vh(S,p,f);c.currentOutputSnapshotRaw=S,c.currentOutputSnapshotResolved=m,c.currentWriteId=zc(t),o.splice(o.indexOf(v),1),i=i.concat(hh(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally)),i=i.concat(Ft(t.serverSyncTree_,v,!0))}else h=!0,d="nodata",i=i.concat(Ft(t.serverSyncTree_,c.currentWriteId,!0))}ut(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Ao(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)xr(r[a]);Bc(t,t.transactionQueueTree_)}function Mh(t,e){let n,r=t.transactionQueueTree_;for(n=D(e);n!==null&&Cr(r)===void 0;)r=bc(r,n),e=G(e),n=D(e);return r}function Ph(t,e){const n=[];return Nh(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Nh(t,e,n){const r=Cr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Io(e,i=>{Nh(t,i,n)})}function Ao(t,e){const n=Cr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,_h(e,n.length>0?n:void 0)}Io(e,r=>{Ao(t,r)})}function Wc(t,e){const n=Bi(Mh(t,e)),r=bc(t.transactionQueueTree_,e);return N_(r,i=>{fa(t,i)}),fa(t,r),Sh(r,i=>{fa(t,i)}),n}function fa(t,e){const n=Cr(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(E(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(E(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ft(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?_h(e,void 0):n.length=s+1,ut(t.eventQueue_,Bi(e),i);for(let o=0;o<r.length;o++)xr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function t2(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Te(`Invalid query segment '${n}' in query '${t}'`)}return e}const Od=function(t,e){const n=n2(t),r=n.namespace;n.domain==="firebase.com"&&Ct(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ct("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||uy();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Of(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new H(n.pathString)}},n2=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=e2(t.substring(h,d)));const p=t2(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const y=e.slice(0,l);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const S=e.indexOf(".");r=e.substring(0,S).toLowerCase(),n=e.substring(S+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",r2=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Fd.charAt(n%64),n=Math.floor(n/64);E(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Fd.charAt(e[i]);return E(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+pe(this.snapshot.exportVal())}}class s2{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return E(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return b(this._path)?null:fc(this._path)}get ref(){return new nn(this._repo,this._path)}get _queryIdentifier(){const e=Sd(this._queryParams),n=lc(e);return n==="{}"?"default":n}get _queryObject(){return Sd(this._queryParams)}isEqual(e){if(e=Nn(e),!(e instanceof Ln))return!1;const n=this._repo===e._repo,r=hc(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Qy(this._path)}}function a2(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Rh(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Wt){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Sn)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Tt)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===J){if(e!=null&&!sl(e)||n!=null&&!sl(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(E(t.getIndex()instanceof gc||t.getIndex()===Jf,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function l2(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class nn extends Ln{constructor(e,n){super(e,n,new vc,!1)}get parent(){const e=$f(this._path);return e===null?null:new nn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Qs{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new H(e),r=yi(this.ref,e);return new Qs(this._node.getChild(n),r,J)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Qs(i,yi(this.ref,r),J)))}hasChild(e){const n=new H(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function nr(t,e){return t=Nn(t),t._checkNotDeleted("ref"),e!==void 0?yi(t._root,e):t._root}function yi(t,e){return t=Nn(t),D(t._path)===null?F_("child","path",e):jc("child","path",e),new nn(t._repo,ne(t._path,e))}function c2(t,e){t=Nn(t),xh("push",t._path),Fc("push",e,t._path,!0);const n=Th(t._repo),r=r2(n),i=yi(t,r),s=yi(t,r);let o;return e!=null?o=u2(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function u2(t,e){t=Nn(t),xh("set",t._path),Fc("set",e,t._path,!1);const n=new Oi;return G_(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Ah(t,e){O_("update",e,t._path);const n=new Oi;return Q_(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class Hc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new i2("value",this,new Qs(e.snapshotNode,new nn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new s2(this,e,n):null}matches(e){return e instanceof Hc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function d2(t,e,n,r,i){const s=new o2(n,void 0),o=new Hc(s);return K_(t._repo,t,o),()=>q_(t._repo,t,o)}function al(t,e,n,r){return d2(t,"value",e)}class Lo{}class f2 extends Lo{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){Fc("startAfter",this._value,e._path,!1);const n=vv(e._queryParams,this._value,this._key);if(l2(n),Rh(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ln(e._repo,e._path,n,e._orderByCalled)}}function h2(t,e){return new f2(t,e)}class p2 extends Lo{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ln(e._repo,e._path,gv(e._queryParams,this._limit),e._orderByCalled)}}function m2(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new p2(t)}class g2 extends Lo{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ln(e._repo,e._path,yv(e._queryParams,this._limit),e._orderByCalled)}}function y2(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new g2(t)}class v2 extends Lo{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){a2(e,"orderByChild");const n=new H(this._path);if(b(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new gc(n),i=_v(e._queryParams,r);return Rh(i),new Ln(e._repo,e._path,i,!0)}}function _2(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return jc("orderByChild","path",t),new v2(t)}function w2(t,...e){let n=Nn(t);for(const r of e)n=r._apply(n);return n}a_(nn);h_(nn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="FIREBASE_DATABASE_EMULATOR_HOST",ll={};let k2=!1;function x2(t,e,n,r){t.repoInfo_=new Of(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function E2(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Ct("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ye("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Od(s,i),a=o.repoInfo,c;typeof process<"u"&&nd&&(c=nd[S2]),c?(s=`http://${c}?ns=${a.namespace}`,o=Od(s,i),a=o.repoInfo):o.repoInfo.secure;const l=new Sy(t.name,t.options,e);j_("Invalid Firebase Database URL",o),b(o.path)||Ct("Database URL must point to the root of a Firebase Database (not including a child path).");const h=T2(a,t,l,new wy(t.name,n));return new I2(h,t)}function C2(t,e){const n=ll[e];(!n||n[t.key]!==t)&&Ct(`Database ${e}(${t.repoInfo_}) has already been deleted.`),X_(t),delete n[t.key]}function T2(t,e,n,r){let i=ll[e.name];i||(i={},ll[e.name]=i);let s=i[t.toURLString()];return s&&Ct("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new H_(t,k2,n,r),i[t.toURLString()]=s,s}class I2{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(V_(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nn(this._repo,B())),this._rootInternal}_delete(){return this._rootInternal!==null&&(C2(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ct("Cannot call "+e+" on a deleted database.")}}function yn(t=Gg(),e){const n=Wg(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Lm("database");r&&M2(n,...r)}return n}function M2(t,e,n,r={}){t=Nn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ct("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ct('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new vs(vs.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Dm(r.mockUserToken,t.app.options.projectId);s=new vs(o)}x2(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t){iy($g),Ds(new ci("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return E2(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Zn(rd,id,t),Zn(rd,id,"esm2017")}xt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};xt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};P2();const u={achievements:{data:[{game:"Tetris",name:"Block Placer",description:"Get to Level 10",id:"tetris-level-10",secret:!1},{game:"Tetris",name:"Block Master",description:"Get to Level 25",id:"tetris-level-25",secret:!1},{game:"Tetris",name:"Almost Impossible",description:"Level 15 on Ghost",id:"tetris-level-15-ghost",secret:!1},{game:"Tetris",name:"Board Master",description:"Clear the Entire Board",id:"tetris-board-clear",secret:!1},{game:"Tetris",name:"Combo Master",description:"Get a 3x combo",id:"3x-combo-tetris",secret:!0},{game:"Space Invaders",name:"Invader Attacker",description:"Clear a Wave",id:"spaceinvaders-wave",secret:!1},{game:"Space Invaders",name:"Invader Destroyer",description:"Reach wave 10",id:"spaceinvaders-wave-10",secret:!1},{game:"Space Invaders",name:"Invader Deleter",description:"10000 score",id:"spaceinvaders-10000",secret:!1},{game:"Space Invaders",name:"UFO Destroyer",description:"Kill the UFO",id:"spaceinvaders-ufo",secret:!1},{game:"Space Invaders",name:"Failure",description:"Die with 1 invader left",id:"spaceinvaders-1-alien",secret:!1},{game:"Pacman",name:"Level up!",description:"Reach level 2",id:"pacman-level",secret:!1},{game:"Pacman",name:"Pro",description:"Reach Level 10",id:"pacman-level-10",secret:!1},{game:"Pacman",name:"Master",description:"10000 score",id:"pacman-10000",secret:!1},{game:"Pacman",name:"Teleporter",description:"Use one of the portals",id:"pacman-portal",secret:!1},{game:"Pacman",name:"Ghostbuster",description:"Eat 4 ghosts with 1 power pellet",id:"pacman-4-combo",secret:!0},{game:"Snake",name:"Little Snake",description:"Get to 10 length",id:"snake-10",secret:!1},{game:"Snake",name:"Big Snake",description:"Get to 50 length",id:"snake-50",secret:!1},{game:"Snake",name:"Speedy Snake",description:"10 length on impossible",id:"snake-impossible-10",secret:!1},{game:"Snake",name:"Old Snake",description:"Survive for 5 minutes",id:"snake-5-mins",secret:!1},{game:"Snake",name:"Good luck!",description:"Get an apple in the corner",id:"snake-corner",secret:!0},{game:"Pong",name:"Qualifier",description:"Beat any AI",id:"pong-win-game",secret:!1},{game:"Pong",name:"Semi-Finals",description:"Beat Very Hard AI",id:"pong-win-very-hard",secret:!1},{game:"Pong",name:"I am speed",description:"Get the ball to 50x speed",id:"pong-50x-speed",secret:!1},{game:"Pong",name:"Stalling Expert",description:"Get 100 points",id:"pong-get-100-points",secret:!1},{game:"Pong",name:"Finals",description:"Beat Impossible AI",id:"pong-win-impossible",secret:!0},{game:"2048",name:"Learned to Count",description:"Get to 512",id:"2048-512",secret:!1},{game:"2048",name:"Addition Expert",description:"Get to 1024",id:"2048-1024",secret:!1},{game:"2048",name:"Graduation",description:"Get to 10k points",id:"2048-10k-points",secret:!1},{game:"2048",name:"Mathematician",description:"Get to 2048",id:"2048-2048",secret:!1},{game:"2048",name:"Calculator",description:"Get to 4096",id:"2048-4096",secret:!0},{game:"Breakout",name:"Driller",description:"Beat a level",id:"breakout-beat-level",secret:!1},{game:"Breakout",name:"Dynamite",description:"Get to 10k points",id:"breakout-10k-points",secret:!1},{game:"Breakout",name:"Demolitionist",description:"Get to level 10",id:"breakout-level-10",secret:!1},{game:"Breakout",name:"Bulldozer",description:"Get to 100k points",id:"breakout-100k-points",secret:!1},{game:"Breakout",name:"Oddly Satisfying",description:"Hit the corner",id:"breakout-hit-the-corner",secret:!0},{game:"Asteroids",name:"Asteroid Attacker",description:"Get to 100",id:"asteroids-score-100",secret:!1},{game:"Asteroids",name:"Asteroid Remover",description:"100 on impossible",id:"asteroids-score-100-impossible",secret:!1},{game:"Asteroids",name:"Asteroid Exploder",description:"Get to 2500 points",id:"asteroids-score-2500",secret:!1},{game:"Asteroids",name:"Asteroid Deleter",description:"Get to 10k points",id:"asteroids-score-10k",secret:!1},{game:"Asteroids",name:"Full Throttle",description:"Accelerate for 10 seconds",id:"asteroids-accelerate-10",secret:!0},{game:"Minesweeper",name:"Shoveller",description:"Beat Easy",id:"minesweeper-easy",secret:!1},{game:"Minesweeper",name:"Mine Mole",description:"Intermediate",id:"minesweeper-intermediate",secret:!1},{game:"Minesweeper",name:"Metal Detector",description:"Beat Expert",id:"minesweeper-expert",secret:!1},{game:"Minesweeper",name:"Super Sweeper",description:"Beat Impossible",id:"minesweeper-impossible",secret:!1},{game:"Minesweeper",name:"Speed Sweeper",description:"Win in 15s or less",id:"minesweeper-15s",secret:!0}],get:t=>!!u.storage.get("achievement-"+t),set:t=>{var e,n;u.achievements.get(t)||(u.storage.set("achievement-"+t,!0),u.notification({title:_.jsxs("div",{children:[_.jsx("b",{children:"Achievement Unlocked: "})," ",(e=u.achievements.data.find(r=>r.id===t))==null?void 0:e.name]}),message:((n=u.achievements.data.find(r=>r.id===t))==null?void 0:n.description)||"",id:"achievement-"+t,achievement:!0}))}},eventListeners:{add:(t,e)=>{u.eventListeners.data[t]||(u.eventListeners.data[t]=[]),u.eventListeners.data[t].push(e)},data:{}},firebase:{app:_f({apiKey:"AIzaSyAmKXMv-rDeSMNRd_t1Kv3rjMizEs6QlC0",authDomain:"arcade--classics.firebaseapp.com",databaseURL:"https://arcade--classics-default-rtdb.asia-southeast1.firebasedatabase.app/",projectId:"arcade--classics",storageBucket:"arcade--classics.appspot.com",messagingSenderId:"1052885361959",appId:"1:1052885361959:web:78bee538b2d1c77f0e3502"}),database:yn()},games:{set:t=>{u.pages.set("game"),u.storage.set("game",t)},setScoreboard:t=>{},end:t=>{},sfx:t=>{const e=new Audio("./assets/sounds/"+t+".mp3");return e.volume=Number(u.storage.get("sfx-volume")||.5)/100,e.play(),e},current:{data:{}},keys:{},data:[xm,sm,wm,gm,_m,vm,am,um,mm]},notification(t){},pages:{get:()=>window.location.hash.split("#")[1]||"",reload:()=>{const t=u.pages.get();setTimeout(()=>u.pages.set(t),1),u.pages.set("home",!1)},set:(t,e=!0)=>{var n,r;window.location.hash="#"+t,localStorage.setItem("last-page",t),e&&(document.body.style.width="250px",document.body.style.height="450px"),u.setShadow(!1),(n=u.games.current.music)==null||n.pause(),(r=u.eventListeners.data.pageChange)==null||r.forEach(i=>i(t))}},setCSSVar:(t,e)=>document.documentElement.style.setProperty("--"+t,e),setShadow:t=>{},settings:{general:[{name:"Dark Mode",info:"Toggle dark theme.",id:"dark-mode",type:"checkbox",default:!0,function:t=>{u.setCSSVar("transition","0s"),t?(u.setCSSVar("background","#121212"),u.setCSSVar("accent","#222222"),u.setCSSVar("text","#ffffff"),u.setCSSVar("primary","#bb86fc")):(u.setCSSVar("background","#ffffff"),u.setCSSVar("accent","#f5f5f5"),u.setCSSVar("text","#000000"),u.setCSSVar("primary","#0d6efd")),u.setCSSVar("transition","0.5s")}},{name:"Open on last closed page",info:"Open the extension on the last used page.",id:"open-last-page",type:"checkbox",default:!0},{name:"Use Browesr Storage Sync",info:"Saves your settings and statistics (but not game saves) to your browser profile (or google account if you are signed in).",id:"sync-storage",type:"checkbox",default:!0,function:t=>{t?(localStorage.setItem("storage-mode","sync"),(u.firefox?browser:chrome).storage.sync.set(u.storage.data),localStorage.removeItem("storage")):(localStorage.setItem("storage-mode","local"),localStorage.setItem("storage",JSON.stringify(u.storage.data)),(u.firefox?browser:chrome).storage.sync.clear())}},{name:"Report Errors",info:"Report various errors to the developer.",id:"report-errors",type:"checkbox",default:!0}],games:[{name:"Save Game",info:"Save the state of games when you close the extension.",id:"save-game",type:"checkbox",default:!0},{name:"Visual Effects",info:"Enable visual effects, can impact performance.",id:"visual-effects",type:"checkbox",default:!0},{name:"Upload Stats",info:"Automatically upload your game statistics to the leaderboards (disabling this setting does not delete previous data).",id:"upload-stats",type:"checkbox",default:!0},{name:"Music Volume",info:"Set the music volume.",id:"music-volume",type:"slider",default:50},{name:"SFX Volume",info:"Set the SFX volume.",id:"sfx-volume",type:"slider",default:50},{name:"Control Mode",info:"Choose which buttons to use as controls in games.",id:"control-mode",type:"dropdown",default:"arrows",options:[{name:"Arrow Keys",id:"arrows"},{name:"WASD",id:"wasd"}]},{name:"Pause",info:"Pause the game.",id:"pause-key",type:"keybind",default:"KeyP"},{name:"Primary",info:"The primary action button in games. Eg: serve, shoot, hard drop.",id:"primary-key",type:"keybind",default:"Space"},{name:"Secondary",info:"The secondary action in games. Eg: hold piece.",id:"secondary-key",type:"keybind",default:"KeyC"}],dev:[{name:"FPS Counter",info:"In-Game FPS counter.",id:"fps-counter",type:"checkbox",default:!1},{name:"Context Menu",info:"Enable Context Menu.",id:"context-menu",type:"checkbox",default:!1}]},stats:{sync:()=>{u.stats.data.forEach((t,e)=>{u.stats.data[e].val=u.stats.get(t.id)}),u.storage.get("upload-stats")&&Ah(nr(yn(),"Users/"+u.storage.get("user-id")),{name:u.storage.get("user-name"),stats:u.stats.data})},set:(t,e)=>{var n;u.storage.set("stat-"+t,e),(n=u.eventListeners.data.statChange)==null||n.forEach(r=>r(t)),u.stats.sync()},increase:(t,e=1)=>{var n;u.storage.set("stat-"+t,Number(u.storage.get("stat-"+t)||0)+e),(n=u.eventListeners.data.statChange)==null||n.forEach(r=>r(t)),u.stats.sync()},get:t=>Number(u.storage.get("stat-"+t)||0),data:[{game:"Tetris",name:"High Score",id:"tetris-high-score",val:0},{game:"Tetris",name:"Highest Level",id:"tetris-highest-level",val:0},{game:"Tetris",name:"Most Rows Cleared",id:"tetris-rows-cleared",val:0},{game:"Space Invaders",name:"High Score",id:"spaceinvaders-high-score",val:0},{game:"Space Invaders",name:"Highest Wave",id:"spaceinvaders-highest-wave",val:0},{game:"Pacman",name:"High Score",id:"pacman-high-score",val:0},{game:"Pacman",name:"Highest Level",id:"pacman-highest-level",val:0},{game:"Snake",name:"Longest Snake",id:"snake-high-score",val:0},{game:"Pong",name:"Wins",id:"pong-wins",val:0},{game:"Asteroids",name:"High Score",id:"asteroids-high-score",val:0},{game:"Breakout",name:"High Score",id:"breakout-high-score",val:0},{game:"Breakout",name:"Highest Level",id:"breakout-highest-level",val:0},{game:"Minesweeper",name:"Wins",id:"minesweeper-wins",val:0},{game:"Minesweeper",name:"Fastest Game",id:"minesweeper-fastest-game",val:0},{game:"2048",name:"High Score",id:"2048-high-score",val:0},{game:"2048",name:"Highest Tile",id:"2048-high-tile",val:0}]},storage:{get:t=>u.storage.data[t],set:(t,e)=>{u.storage.data[t]=e,localStorage.getItem("storage-mode")==="sync"?(u.firefox?browser:chrome).storage.sync.set(u.storage.data):localStorage.setItem("storage",JSON.stringify(u.storage.data))},remove(t){delete u.storage.data[t],localStorage.getItem("storage-mode")==="sync"?(u.firefox?browser:chrome).storage.sync.set(u.storage.data):localStorage.setItem("storage",JSON.stringify(u.storage.data))},data:{}},firefox:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,version:(navigator.userAgent.toLowerCase().indexOf("firefox")>-1?browser:chrome).runtime.getManifest().version},Ue=t=>{const[e,n]=z.useState(t.default===void 0?!0:t.default);return _.jsxs("div",{...t,title:"",onClick:()=>{},className:"card "+t.className,children:[t.type!=="box"?_.jsxs("div",{className:"header",children:[t.title,_.jsx("div",{}),t.type!=="title"?_.jsx("span",{className:"button material-icons",onClick:t.type==="custom"?t.onClick:()=>n(!e),children:t.type==="custom"?t.icon:e?"expand_less":"expand_more"}):null]}):null,e?_.jsx("div",{className:"body",children:t.children}):null]})},_s=t=>{var r;const[e,n]=z.useState(0);switch(z.useEffect(()=>{u.storage.get(t.id)===void 0&&u.storage.set(t.id,t.default),n(u.storage.get(t.id))},[t]),t.type){case"checkbox":return _.jsxs("div",{className:"setting checkbox",children:[_.jsxs("details",{children:[_.jsxs("summary",{children:[t.name,":"]}),_.jsx("p",{children:t.info})]}),_.jsx("div",{}),_.jsx("input",{type:"checkbox",defaultChecked:!!u.storage.get(t.id),onChange:i=>{u.storage.set(t.id,i.currentTarget.checked),t.function&&t.function(i.currentTarget.checked)}},t.id)]});case"dropdown":return _.jsxs("div",{className:"setting dropdown",children:[_.jsxs("details",{children:[_.jsxs("summary",{children:[t.name,":"]}),_.jsx("p",{children:t.info})]}),_.jsx("div",{}),_.jsx("select",{defaultValue:String(u.storage.get(t.id)),onChange:i=>{u.storage.set(t.id,i.currentTarget.value),t.function&&t.function(i.currentTarget.value)},children:(r=t.options)==null?void 0:r.map(i=>_.jsx("option",{value:i.id,children:i.name}))})]});case"slider":return _.jsxs("div",{className:"setting slider",children:[_.jsxs("details",{children:[_.jsxs("summary",{children:[t.name,": ",e]}),_.jsx("p",{children:t.info})]}),_.jsx("input",{type:"range",min:0,max:100,defaultValue:Number(u.storage.get(t.id)),onChange:i=>{u.storage.set(t.id,i.currentTarget.value),n(Number(i.currentTarget.value)),t.function&&t.function(i.currentTarget.value)}},t.id)]});case"keybind":return _.jsxs("div",{className:"setting keybind",children:[_.jsxs("details",{children:[_.jsxs("summary",{children:[t.name,": ",_.jsx("kbd",{children:e})]}),_.jsx("p",{children:t.info})]}),_.jsx("div",{}),_.jsx("div",{className:"button",onClick:i=>{const s=i.target;s.innerText="Recording",window.addEventListener("keydown",o=>{u.pages.get()==="settings"&&(u.storage.set(t.id,o.code),n(o.code),s.innerText="Record")},{once:!0})},children:"Record"})]})}},$e=t=>{switch(t){case"Up":return u.storage.get("control-mode")==="wasd"?"W":"Up Arrow";case"Down":return u.storage.get("control-mode")==="wasd"?"S":"Down Arrow";case"Left":return u.storage.get("control-mode")==="wasd"?"A":"Left Arrow";case"Right":return u.storage.get("control-mode")==="wasd"?"D":"Right Arrow";case"Primary":return(u.storage.get("primary-key")||"Null").split("Key").pop();case"Secondary":return(u.storage.get("secondary-key")||"Null").split("Key").pop();default:return"Null"}},N2=()=>{var p;const[t,e]=z.useState(void 0),[n,r]=z.useState("start"),[i,s]=z.useState({}),[o,a]=z.useState({}),[c,l]=z.useState({time:0,delta:0}),[h,d]=z.useState(0);if(z.useEffect(()=>{u.games.setScoreboard=s,u.games.end=S=>{var w;r("end"),a(S),localStorage.removeItem("save-"+(y==null?void 0:y.id)),(w=u.games.current.music)==null||w.pause()};const y=u.games.data.find(S=>S.id===u.storage.get("game"));if(!y){u.storage.remove("game"),u.pages.set("home");return}e(y),document.body.style.width=y.page.width+50+"px",document.body.style.height=y.page.height+"px",u.setShadow(!0),localStorage.getItem("save-"+y.id)&&(r("paused"),u.games.current.data=JSON.parse(localStorage.getItem("save-"+y.id)||"{}").data,l(JSON.parse(localStorage.getItem("save-"+y.id)||"{}").time)),y.music?(u.games.current.music=new Audio("./assets/sounds/"+y.music+".mp3"),u.games.current.music.volume=Number(u.storage.get("music-volume")||.5)/100,u.games.current.music.loop=!0):delete u.games.current.music},[]),z.useEffect(()=>{var y,S;if(!(u.pages.get()!=="game"||n==="end")&&(u.games.keys[u.storage.get("pause-key")]&&(r("paused"),u.setShadow(!0),(y=u.games.current.music)==null||y.pause()),n==="ingame"&&t)){u.storage.get("save-game")&&localStorage.setItem("save-"+t.id,JSON.stringify({data:u.games.current.data,time:c})),(S=u.games.ctx)==null||S.clearRect(0,0,t.page.width||0,t.page.height||0);try{t.functions.render(Math.round(c.time),c.delta)}catch(v){console.warn("Error in game render function: "+v)}try{t.functions.update(Math.round(c.time),c.delta)}catch(v){console.warn("Error in game update function: "+v)}const w=performance.now();requestAnimationFrame(()=>{const v=1e3/(performance.now()-w),f=60/v;d(v),l(m=>({time:m.time+f,delta:f}))})}},[c,n,t]),!t)return _.jsx(_.Fragment,{});switch(n){case"start":return _.jsx("div",{className:"game",children:_.jsxs(Ue,{type:"title",title:t.name,className:"start",children:[_.jsxs("div",{className:"info",children:[_.jsx("b",{children:"How to Play:"}),_.jsx("br",{}),_.jsx("div",{dangerouslySetInnerHTML:{__html:t.info.split("[UP]").join($e("Up")).split("[DOWN]").join($e("Down")).split("[LEFT]").join($e("Left")).split("[RIGHT]").join($e("Right")).split("[PRIMARY]").join($e("Primary")).split("[SECONDARY]").join($e("Secondary"))}})]}),t.options?_.jsxs(_.Fragment,{children:[_.jsx("br",{}),_.jsxs("div",{className:"options",children:[_.jsx("b",{children:"Options:"}),_.jsx("br",{}),(p=t.options)==null?void 0:p.map(y=>_.jsx(_s,{...y}))]})]}):_.jsx(_.Fragment,{}),_.jsx("br",{}),_.jsxs("div",{className:"play",children:[_.jsx("div",{}),_.jsx("div",{className:"button",onClick:()=>{var y;r("ingame"),u.setShadow(!1),u.games.current.data={},t.functions.start(),(y=u.games.current.music)==null||y.play()},children:"Play"})]})]})});case"ingame":return _.jsxs("div",{className:"game",children:[u.storage.get("fps-counter")?_.jsxs("div",{className:"fps",children:[Math.round(h)," fps"]}):null,_.jsx("canvas",{className:"canvas",width:t.page.width,height:t.page.height,ref:y=>{y&&(u.games.canvas=y,u.games.ctx=y.getContext("2d"))},onClick:y=>{var S;(S=u.eventListeners.data.click)==null||S.forEach(w=>w({button:"left",x:y.clientX-50,y:y.clientY}))}}),Object.entries(i).length>0?_.jsx(Ue,{type:"box",className:"scoreboard",children:Object.keys(i).map(y=>_.jsxs("div",{className:"item",style:{userSelect:"none"},children:[_.jsx("div",{className:"name",children:y==="Lives"&&i[y]===1?"Last Life!":_.jsxs(_.Fragment,{children:[y,i[y]!==""?":":null]})}),i[y]!==""&&!(y==="Lives"&&i[y]===1)?_.jsxs(_.Fragment,{children:[_.jsx("div",{}),_.jsx("div",{className:"score",children:i[y]})]}):null]}))}):null,_.jsx("div",{className:"button pause material-icons",onClick:()=>{var y;r("paused"),u.setShadow(!0),(y=u.games.current.music)==null||y.pause()},children:"pause"})]});case"paused":return _.jsx("div",{className:"game",children:_.jsxs(Ue,{type:"title",title:"Paused",className:"pause-menu",children:[_.jsxs("div",{className:"info",children:[_.jsx("b",{children:"How to Play:"}),_.jsx("br",{}),_.jsx("div",{dangerouslySetInnerHTML:{__html:t.info.split("[UP]").join($e("Up")).split("[DOWN]").join($e("Down")).split("[LEFT]").join($e("Left")).split("[RIGHT]").join($e("Right")).split("[PRIMARY]").join($e("Primary")).split("[SECONDARY]").join($e("Secondary"))}})]}),_.jsx("br",{}),_.jsxs("div",{className:"buttons",children:[_.jsx("div",{}),_.jsx("div",{className:"button",onClick:()=>{var y;r("ingame"),u.setShadow(!1),(y=u.games.current.music)==null||y.play()},children:"Resume"}),_.jsx("div",{}),_.jsx("div",{className:"button",onClick:()=>{var y;localStorage.removeItem("save-"+t.id),(y=u.games.current.music)==null||y.pause(),u.pages.reload()},children:"Restart"})]})]})});case"end":return _.jsx("div",{className:"game",children:_.jsxs(Ue,{type:"title",title:o.message,className:"end",children:[_.jsx("div",{className:"scores",children:o.score?_.jsx(_.Fragment,{children:Object.keys(o.score).map(y=>_.jsxs("div",{className:"item",children:[_.jsxs("div",{className:"name",children:[y,o.score[y]!==""?":":null]}),o.score[y]!==""?_.jsxs(_.Fragment,{children:[_.jsx("div",{}),_.jsx("div",{className:"score",children:o.score[y]})]}):null]}))}):null}),_.jsx("br",{}),_.jsxs("div",{className:"restart",children:[_.jsx("div",{}),_.jsx("div",{className:"button",onClick:()=>{var y;localStorage.removeItem("save-"+t.id),(y=u.games.current.music)==null||y.pause(),u.games.current.data={},u.pages.reload()},children:"Restart"})]})]})})}},R2=t=>{const[e,n]=z.useState(!1);return _.jsxs("div",{...t,title:"",className:"tooltip "+t.className,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[t.children,e?_.jsx("span",{className:"tooltiptext "+t.dir,children:t.text}):null]})},A2=()=>_.jsx("div",{className:"games",children:u.games.data.map((t,e)=>_.jsx(R2,{text:t.name,dir:e!==0?"up":"down",onClick:()=>u.games.set(t.id),className:"button",style:{gridArea:t.id},children:_.jsx("img",{src:"./assets/images/"+t.id+(["minesweeper","t048"].includes(t.id)?u.storage.get("dark-mode")?"-dark":"-light":"")+".png",alt:t.name})}))}),L2=()=>{const t=Array(4).fill("ac3promo").concat(u.games.data.map(r=>r.id)),[e,n]=z.useState(t[Math.floor(Math.random()*t.length)]);return z.useEffect(()=>void setTimeout(()=>n(t[Math.floor(Math.random()*t.length)]),3500),[e]),_.jsxs("div",{className:"home",children:[_.jsx("div",{className:"slideshow button",onClick:()=>{e==="ac3promo"?(u.firefox?browser:chrome).tabs.create({url:"https://arcade-classics.github.io/3"}):u.games.set(e)},style:{gridArea:"slideshow"},children:t.map(r=>_.jsx("img",{className:r===e?"opaque":"",src:"./assets/images/"+r+(["minesweeper","t048"].includes(r)?u.storage.get("dark-mode")?"-dark":"-light":"")+".png",alt:r}))}),_.jsx("div",{onClick:()=>u.pages.set("games"),className:"play button",style:{gridArea:"play"},children:"Play"}),_.jsx("div",{onClick:()=>u.pages.set("profile"),className:"profile button material-icons",style:{gridArea:"stats"},children:"emoji_events"}),_.jsx("div",{onClick:()=>u.pages.set("settings"),className:"settings button material-icons",style:{gridArea:"settings"},children:"settings"})]})},Lh=()=>_.jsxs("div",{className:"info",children:[_.jsxs("a",{href:"https://arcade-classics.github.io/3",target:"_blank",rel:"noreferrer",children:["Arcade Classics 3.0",_.jsx("br",{}),"(Coming Soon!)"]}),_.jsx("br",{}),_.jsx("br",{}),_.jsxs("a",{href:"https://arcade-classics.github.io/changelog",target:"_blank",rel:"noreferrer",children:["Version ",u.version]}),_.jsx("br",{}),_.jsx("a",{href:"mailto:thearcadeclassics@gmail.com?subject=Arcade Classics Support Request",target:"_blank",rel:"noreferrer",children:"Support"}),_.jsx("br",{}),_.jsx("a",{href:"https://arcade-classics.github.io/credits",target:"_blank",rel:"noreferrer",children:"Credits"}),_.jsx("br",{}),_.jsx("a",{href:"https://arcade-classics.github.io/privacy",target:"_blank",rel:"noreferrer",children:"Privacy Policy"})]}),jd={},D2=()=>{const[t,e]=z.useState(u.stats.data[0]),[n,r]=z.useState([]),[i,s]=z.useState(!1),[o,a]=z.useState(String(u.storage.get("user-name")));return z.useEffect(()=>{let c=0;u.stats.data.forEach((l,h)=>{l.id===t.id&&(c=h)}),al(w2(nr(yn(),"Users"),_2("stats/"+c+"/val"),h2(0),(c!==13?y2:m2)(10)),l=>{const h=[];l.forEach(d=>{var p,y;d.val().id===u.storage.get("user-id")&&d.val().id?h.push({id:d.val().id,name:"You",stat:(p=d.val().stats[c])==null?void 0:p.val}):h.push({id:d.val().id,name:d.val().name,stat:(y=d.val().stats[c])==null?void 0:y.val})}),c!==13&&h.reverse(),r(h)})},[t]),_.jsxs("div",{className:"profile",children:[_.jsxs(Ue,{title:"Username",type:"title",children:[i?_.jsxs("div",{className:"username",children:[_.jsx("div",{className:"button material-icons",onClick:()=>{o.length>30&&a(o.slice(0,30)),u.storage.set("user-name",o),Ah(nr(yn(),"Users/"+u.storage.get("user-id")),{name:u.storage.get("user-name"),stats:u.stats.data}),s(!1)},children:"done"}),_.jsx("input",{type:"text",className:"input",defaultValue:String(u.storage.get("user-name")),onChange:c=>{a(c.target.value)}},"user-name-input")]}):_.jsxs("div",{className:"username",children:[_.jsx("div",{className:"button material-icons",onClick:()=>{s(!0)},children:"edit"}),_.jsx("p",{children:u.storage.get("user-name")})]}),_.jsx("br",{}),_.jsx("p",{children:"Your Username is used to identify you on leaderboards."})]}),_.jsx(Ue,{title:"Stats",type:"title-collapsible",default:!1,children:u.stats.data.map(c=>_.jsxs("div",{className:"stat",children:[_.jsxs("p",{children:[_.jsx("b",{children:c.game})," ",c.name,":"]}),_.jsx("div",{}),_.jsx("p",{children:u.stats.get(c.id)})]}))}),_.jsxs(Ue,{title:"Achievements",type:"title-collapsible",default:!1,children:[_.jsxs("div",{className:"stat",children:[_.jsx("p",{children:"Progress:"}),_.jsx("div",{}),_.jsxs("p",{children:[u.achievements.data.filter(c=>u.achievements.get(c.id)).length,"/",u.achievements.data.length," ",Math.round(u.achievements.data.filter(c=>u.achievements.get(c.id)).length/u.achievements.data.length*100),"%"]})]}),_.jsx("progress",{max:u.achievements.data.length,value:u.achievements.data.filter(c=>u.achievements.get(c.id)).length}),u.achievements.data.map(c=>_.jsxs("div",{className:"stat",children:[c.secret&&!u.achievements.get(c.id)?"Secret Achievement":c.name,":",_.jsx("div",{}),u.achievements.get(c.id)?_.jsx("span",{className:"material-icons",style:{color:"gold"},children:"lock_open"}):_.jsx("span",{className:"material-icons",style:{color:"grey"},children:"lock"}),_.jsxs("span",{style:{color:"gray",marginTop:"-1em",fontSize:"90%"},children:[c.game," | ",c.secret&&!u.achievements.get(c.id)?"???":c.description]})]}))]}),_.jsxs(Ue,{title:"Leaderboards",type:"title-collapsible",default:!1,children:[_.jsx("div",{className:"setting dropdown",children:_.jsx("select",{onChange:c=>{if(jd[JSON.parse(c.target.value)]){r(jd[JSON.parse(c.target.value)]);return}JSON.parse(c.target.value)!==t&&e(JSON.parse(c.target.value))},children:u.stats.data.map(c=>_.jsxs("option",{value:JSON.stringify(c),children:[c.game," ",c.name]},c.id))})}),n.length>0?n.map(c=>{var h,d;const l=n.filter(p=>p.stat!==0).map(p=>p.stat).indexOf(c.stat);return _.jsx(_.Fragment,{children:c.stat>0?_.jsxs("div",{className:"stat",children:[_.jsxs("p",{children:[l===0?"🏆":l===1?"🥈":l===2?"🥉":l+1+"th",":",((h=c.name)==null?void 0:h.length)>25?((d=c.name)==null?void 0:d.substring(0,25))+"...":c.name]}),_.jsx("div",{}),_.jsx("p",{children:c.stat})]}):null})}):"Loading..."]}),_.jsx(Lh,{})]})},b2=()=>{const[t,e]=z.useState(!1);return _.jsxs("div",{className:"settings",children:[_.jsx(Ue,{title:"General",type:"title",children:u.settings.general.map(n=>_.jsx(_s,{...n}))}),_.jsx(Ue,{title:"Games",type:"title",children:u.settings.games.map(n=>_.jsx(_s,{...n}))}),_.jsx(Ue,{title:"Developer Settings",type:"title",style:{display:"none"},children:u.settings.dev.map(n=>_.jsx(_s,{...n}))}),_.jsx(Ue,{type:"box",className:"clear",children:t?_.jsx("div",{className:"button",onClick:()=>{u.storage.data={},localStorage.clear(),(u.firefox?browser:chrome).storage.sync.clear(),window.location.href=""},children:"Click again to Confirm"}):_.jsx("div",{className:"button",onClick:()=>{e(!0)},children:"Clear Data"})}),_.jsx(Lh,{})]})};var Dh={exports:{}},He={},bh={exports:{}},Oh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,A){var L=I.length;I.push(A);e:for(;0<L;){var ie=L-1>>>1,ce=I[ie];if(0<i(ce,A))I[ie]=A,I[L]=ce,L=ie;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var A=I[0],L=I.pop();if(L!==A){I[0]=L;e:for(var ie=0,ce=I.length,Gi=ce>>>1;ie<Gi;){var an=2*(ie+1)-1,Xo=I[an],ln=an+1,Qi=I[ln];if(0>i(Xo,L))ln<ce&&0>i(Qi,Xo)?(I[ie]=Qi,I[ln]=L,ie=ln):(I[ie]=Xo,I[an]=L,ie=an);else if(ln<ce&&0>i(Qi,L))I[ie]=Qi,I[ln]=L,ie=ln;else break e}}return A}function i(I,A){var L=I.sortIndex-A.sortIndex;return L!==0?L:I.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],h=1,d=null,p=3,y=!1,S=!1,w=!1,v=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(I){for(var A=n(l);A!==null;){if(A.callback===null)r(l);else if(A.startTime<=I)r(l),A.sortIndex=A.expirationTime,e(c,A);else break;A=n(l)}}function k(I){if(w=!1,g(I),!S)if(n(c)!==null)S=!0,Ko(T);else{var A=n(l);A!==null&&qo(k,A.startTime-I)}}function T(I,A){S=!1,w&&(w=!1,f(N),N=-1),y=!0;var L=p;try{for(g(A),d=n(c);d!==null&&(!(d.expirationTime>A)||I&&!et());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,p=d.priorityLevel;var ce=ie(d.expirationTime<=A);A=t.unstable_now(),typeof ce=="function"?d.callback=ce:d===n(c)&&r(c),g(A)}else r(c);d=n(c)}if(d!==null)var Gi=!0;else{var an=n(l);an!==null&&qo(k,an.startTime-A),Gi=!1}return Gi}finally{d=null,p=L,y=!1}}var M=!1,P=null,N=-1,re=5,j=-1;function et(){return!(t.unstable_now()-j<re)}function Mr(){if(P!==null){var I=t.unstable_now();j=I;var A=!0;try{A=P(!0,I)}finally{A?Pr():(M=!1,P=null)}}else M=!1}var Pr;if(typeof m=="function")Pr=function(){m(Mr)};else if(typeof MessageChannel<"u"){var Du=new MessageChannel,bp=Du.port2;Du.port1.onmessage=Mr,Pr=function(){bp.postMessage(null)}}else Pr=function(){v(Mr,0)};function Ko(I){P=I,M||(M=!0,Pr())}function qo(I,A){N=v(function(){I(t.unstable_now())},A)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){S||y||(S=!0,Ko(T))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(I){switch(p){case 1:case 2:case 3:var A=3;break;default:A=p}var L=p;p=A;try{return I()}finally{p=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,A){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var L=p;p=I;try{return A()}finally{p=L}},t.unstable_scheduleCallback=function(I,A,L){var ie=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?ie+L:ie):L=ie,I){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=L+ce,I={id:h++,callback:A,priorityLevel:I,startTime:L,expirationTime:ce,sortIndex:-1},L>ie?(I.sortIndex=L,e(l,I),n(c)===null&&I===n(l)&&(w?(f(N),N=-1):w=!0,qo(k,L-ie))):(I.sortIndex=ce,e(c,I),S||y||(S=!0,Ko(T))),I},t.unstable_shouldYield=et,t.unstable_wrapCallback=function(I){var A=p;return function(){var L=p;p=A;try{return I.apply(this,arguments)}finally{p=L}}}})(Oh);bh.exports=Oh;var O2=bh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F2=z,We=O2;function x(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fh=new Set,vi={};function Dn(t,e){pr(t,e),pr(t+"Capture",e)}function pr(t,e){for(vi[t]=e,t=0;t<e.length;t++)Fh.add(e[t])}var It=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cl=Object.prototype.hasOwnProperty,j2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ud={},zd={};function U2(t){return cl.call(zd,t)?!0:cl.call(Ud,t)?!1:j2.test(t)?zd[t]=!0:(Ud[t]=!0,!1)}function z2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function B2(t,e,n,r){if(e===null||typeof e>"u"||z2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pe(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var we={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){we[t]=new Pe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];we[e]=new Pe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){we[t]=new Pe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){we[t]=new Pe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){we[t]=new Pe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){we[t]=new Pe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){we[t]=new Pe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){we[t]=new Pe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){we[t]=new Pe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vc=/[\-:]([a-z])/g;function $c(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vc,$c);we[e]=new Pe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vc,$c);we[e]=new Pe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vc,$c);we[e]=new Pe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){we[t]=new Pe(t,1,!1,t.toLowerCase(),null,!1,!1)});we.xlinkHref=new Pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){we[t]=new Pe(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gc(t,e,n,r){var i=we.hasOwnProperty(e)?we[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(B2(e,n,i,r)&&(n=null),r||i===null?U2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rt=F2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ji=Symbol.for("react.element"),zn=Symbol.for("react.portal"),Bn=Symbol.for("react.fragment"),Qc=Symbol.for("react.strict_mode"),ul=Symbol.for("react.profiler"),jh=Symbol.for("react.provider"),Uh=Symbol.for("react.context"),Yc=Symbol.for("react.forward_ref"),dl=Symbol.for("react.suspense"),fl=Symbol.for("react.suspense_list"),Kc=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),zh=Symbol.for("react.offscreen"),Bd=Symbol.iterator;function Or(t){return t===null||typeof t!="object"?null:(t=Bd&&t[Bd]||t["@@iterator"],typeof t=="function"?t:null)}var ee=Object.assign,ha;function Vr(t){if(ha===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ha=e&&e[1]||""}return`
`+ha+t}var pa=!1;function ma(t,e){if(!t||pa)return"";pa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{pa=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vr(t):""}function W2(t){switch(t.tag){case 5:return Vr(t.type);case 16:return Vr("Lazy");case 13:return Vr("Suspense");case 19:return Vr("SuspenseList");case 0:case 2:case 15:return t=ma(t.type,!1),t;case 11:return t=ma(t.type.render,!1),t;case 1:return t=ma(t.type,!0),t;default:return""}}function hl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bn:return"Fragment";case zn:return"Portal";case ul:return"Profiler";case Qc:return"StrictMode";case dl:return"Suspense";case fl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Uh:return(t.displayName||"Context")+".Consumer";case jh:return(t._context.displayName||"Context")+".Provider";case Yc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kc:return e=t.displayName||null,e!==null?e:hl(t.type)||"Memo";case Lt:e=t._payload,t=t._init;try{return hl(t(e))}catch{}}return null}function H2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hl(e);case 8:return e===Qc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function en(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function V2(t){var e=Bh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zi(t){t._valueTracker||(t._valueTracker=V2(t))}function Wh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Bh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ys(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pl(t,e){var n=e.checked;return ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=en(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Hh(t,e){e=e.checked,e!=null&&Gc(t,"checked",e,!1)}function ml(t,e){Hh(t,e);var n=en(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gl(t,e.type,n):e.hasOwnProperty("defaultValue")&&gl(t,e.type,en(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gl(t,e,n){(e!=="number"||Ys(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $r=Array.isArray;function rr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+en(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function yl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(x(91));return ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(x(92));if($r(n)){if(1<n.length)throw Error(x(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:en(n)}}function Vh(t,e){var n=en(e.value),r=en(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $d(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $h(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$h(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var es,Gh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(es=es||document.createElement("div"),es.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=es.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _i(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$2=["Webkit","ms","Moz","O"];Object.keys(Zr).forEach(function(t){$2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zr[e]=Zr[t]})});function Qh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zr.hasOwnProperty(t)&&Zr[t]?(""+e).trim():e+"px"}function Yh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Qh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var G2=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _l(t,e){if(e){if(G2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(x(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(x(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(x(61))}if(e.style!=null&&typeof e.style!="object")throw Error(x(62))}}function wl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sl=null;function qc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kl=null,ir=null,sr=null;function Gd(t){if(t=Vi(t)){if(typeof kl!="function")throw Error(x(280));var e=t.stateNode;e&&(e=jo(e),kl(t.stateNode,t.type,e))}}function Kh(t){ir?sr?sr.push(t):sr=[t]:ir=t}function qh(){if(ir){var t=ir,e=sr;if(sr=ir=null,Gd(t),e)for(t=0;t<e.length;t++)Gd(e[t])}}function Xh(t,e){return t(e)}function Jh(){}var ga=!1;function Zh(t,e,n){if(ga)return t(e,n);ga=!0;try{return Xh(t,e,n)}finally{ga=!1,(ir!==null||sr!==null)&&(Jh(),qh())}}function wi(t,e){var n=t.stateNode;if(n===null)return null;var r=jo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(x(231,e,typeof n));return n}var xl=!1;if(It)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){xl=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{xl=!1}function Q2(t,e,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(h){this.onError(h)}}var ei=!1,Ks=null,qs=!1,El=null,Y2={onError:function(t){ei=!0,Ks=t}};function K2(t,e,n,r,i,s,o,a,c){ei=!1,Ks=null,Q2.apply(Y2,arguments)}function q2(t,e,n,r,i,s,o,a,c){if(K2.apply(this,arguments),ei){if(ei){var l=Ks;ei=!1,Ks=null}else throw Error(x(198));qs||(qs=!0,El=l)}}function bn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function e1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qd(t){if(bn(t)!==t)throw Error(x(188))}function X2(t){var e=t.alternate;if(!e){if(e=bn(t),e===null)throw Error(x(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Qd(i),t;if(s===r)return Qd(i),e;s=s.sibling}throw Error(x(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(x(189))}}if(n.alternate!==r)throw Error(x(190))}if(n.tag!==3)throw Error(x(188));return n.stateNode.current===n?t:e}function t1(t){return t=X2(t),t!==null?n1(t):null}function n1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=n1(t);if(e!==null)return e;t=t.sibling}return null}var r1=We.unstable_scheduleCallback,Yd=We.unstable_cancelCallback,J2=We.unstable_shouldYield,Z2=We.unstable_requestPaint,se=We.unstable_now,ew=We.unstable_getCurrentPriorityLevel,Xc=We.unstable_ImmediatePriority,i1=We.unstable_UserBlockingPriority,Xs=We.unstable_NormalPriority,tw=We.unstable_LowPriority,s1=We.unstable_IdlePriority,Do=null,mt=null;function nw(t){if(mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(Do,t,void 0,(t.current.flags&128)===128)}catch{}}var lt=Math.clz32?Math.clz32:sw,rw=Math.log,iw=Math.LN2;function sw(t){return t>>>=0,t===0?32:31-(rw(t)/iw|0)|0}var ts=64,ns=4194304;function Gr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Js(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Gr(a):(s&=o,s!==0&&(r=Gr(s)))}else o=n&~i,o!==0?r=Gr(o):s!==0&&(r=Gr(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-lt(e),i=1<<n,r|=t[n],e&=~i;return r}function ow(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-lt(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=ow(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function Cl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function o1(){var t=ts;return ts<<=1,!(ts&4194240)&&(ts=64),t}function ya(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-lt(e),t[e]=n}function lw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-lt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Jc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-lt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var W=0;function a1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var l1,Zc,c1,u1,d1,Tl=!1,rs=[],Vt=null,$t=null,Gt=null,Si=new Map,ki=new Map,bt=[],cw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kd(t,e){switch(t){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":$t=null;break;case"mouseover":case"mouseout":Gt=null;break;case"pointerover":case"pointerout":Si.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ki.delete(e.pointerId)}}function jr(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Vi(e),e!==null&&Zc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function uw(t,e,n,r,i){switch(e){case"focusin":return Vt=jr(Vt,t,e,n,r,i),!0;case"dragenter":return $t=jr($t,t,e,n,r,i),!0;case"mouseover":return Gt=jr(Gt,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Si.set(s,jr(Si.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ki.set(s,jr(ki.get(s)||null,t,e,n,r,i)),!0}return!1}function f1(t){var e=pn(t.target);if(e!==null){var n=bn(e);if(n!==null){if(e=n.tag,e===13){if(e=e1(n),e!==null){t.blockedOn=e,d1(t.priority,function(){c1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ws(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Il(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sl=r,n.target.dispatchEvent(r),Sl=null}else return e=Vi(n),e!==null&&Zc(e),t.blockedOn=n,!1;e.shift()}return!0}function qd(t,e,n){ws(t)&&n.delete(e)}function dw(){Tl=!1,Vt!==null&&ws(Vt)&&(Vt=null),$t!==null&&ws($t)&&($t=null),Gt!==null&&ws(Gt)&&(Gt=null),Si.forEach(qd),ki.forEach(qd)}function Ur(t,e){t.blockedOn===e&&(t.blockedOn=null,Tl||(Tl=!0,We.unstable_scheduleCallback(We.unstable_NormalPriority,dw)))}function xi(t){function e(i){return Ur(i,t)}if(0<rs.length){Ur(rs[0],t);for(var n=1;n<rs.length;n++){var r=rs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vt!==null&&Ur(Vt,t),$t!==null&&Ur($t,t),Gt!==null&&Ur(Gt,t),Si.forEach(e),ki.forEach(e),n=0;n<bt.length;n++)r=bt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<bt.length&&(n=bt[0],n.blockedOn===null);)f1(n),n.blockedOn===null&&bt.shift()}var or=Rt.ReactCurrentBatchConfig,Zs=!0;function fw(t,e,n,r){var i=W,s=or.transition;or.transition=null;try{W=1,eu(t,e,n,r)}finally{W=i,or.transition=s}}function hw(t,e,n,r){var i=W,s=or.transition;or.transition=null;try{W=4,eu(t,e,n,r)}finally{W=i,or.transition=s}}function eu(t,e,n,r){if(Zs){var i=Il(t,e,n,r);if(i===null)Ia(t,e,r,eo,n),Kd(t,r);else if(uw(i,t,e,n,r))r.stopPropagation();else if(Kd(t,r),e&4&&-1<cw.indexOf(t)){for(;i!==null;){var s=Vi(i);if(s!==null&&l1(s),s=Il(t,e,n,r),s===null&&Ia(t,e,r,eo,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ia(t,e,r,null,n)}}var eo=null;function Il(t,e,n,r){if(eo=null,t=qc(r),t=pn(t),t!==null)if(e=bn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=e1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return eo=t,null}function h1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ew()){case Xc:return 1;case i1:return 4;case Xs:case tw:return 16;case s1:return 536870912;default:return 16}default:return 16}}var jt=null,tu=null,Ss=null;function p1(){if(Ss)return Ss;var t,e=tu,n=e.length,r,i="value"in jt?jt.value:jt.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ss=i.slice(t,1<r?1-r:void 0)}function ks(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function is(){return!0}function Xd(){return!1}function Ve(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?is:Xd,this.isPropagationStopped=Xd,this}return ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=is)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=is)},persist:function(){},isPersistent:is}),e}var Tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nu=Ve(Tr),Hi=ee({},Tr,{view:0,detail:0}),pw=Ve(Hi),va,_a,zr,bo=ee({},Hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ru,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zr&&(zr&&t.type==="mousemove"?(va=t.screenX-zr.screenX,_a=t.screenY-zr.screenY):_a=va=0,zr=t),va)},movementY:function(t){return"movementY"in t?t.movementY:_a}}),Jd=Ve(bo),mw=ee({},bo,{dataTransfer:0}),gw=Ve(mw),yw=ee({},Hi,{relatedTarget:0}),wa=Ve(yw),vw=ee({},Tr,{animationName:0,elapsedTime:0,pseudoElement:0}),_w=Ve(vw),ww=ee({},Tr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sw=Ve(ww),kw=ee({},Tr,{data:0}),Zd=Ve(kw),xw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ew={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Cw[t])?!!e[t]:!1}function ru(){return Tw}var Iw=ee({},Hi,{key:function(t){if(t.key){var e=xw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ks(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ew[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ru,charCode:function(t){return t.type==="keypress"?ks(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ks(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Mw=Ve(Iw),Pw=ee({},bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e0=Ve(Pw),Nw=ee({},Hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ru}),Rw=Ve(Nw),Aw=ee({},Tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lw=Ve(Aw),Dw=ee({},bo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bw=Ve(Dw),Ow=[9,13,27,32],iu=It&&"CompositionEvent"in window,ti=null;It&&"documentMode"in document&&(ti=document.documentMode);var Fw=It&&"TextEvent"in window&&!ti,m1=It&&(!iu||ti&&8<ti&&11>=ti),t0=" ",n0=!1;function g1(t,e){switch(t){case"keyup":return Ow.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wn=!1;function jw(t,e){switch(t){case"compositionend":return y1(e);case"keypress":return e.which!==32?null:(n0=!0,t0);case"textInput":return t=e.data,t===t0&&n0?null:t;default:return null}}function Uw(t,e){if(Wn)return t==="compositionend"||!iu&&g1(t,e)?(t=p1(),Ss=tu=jt=null,Wn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return m1&&e.locale!=="ko"?null:e.data;default:return null}}var zw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zw[t.type]:e==="textarea"}function v1(t,e,n,r){Kh(r),e=to(e,"onChange"),0<e.length&&(n=new nu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ni=null,Ei=null;function Bw(t){P1(t,0)}function Oo(t){var e=$n(t);if(Wh(e))return t}function Ww(t,e){if(t==="change")return e}var _1=!1;if(It){var Sa;if(It){var ka="oninput"in document;if(!ka){var i0=document.createElement("div");i0.setAttribute("oninput","return;"),ka=typeof i0.oninput=="function"}Sa=ka}else Sa=!1;_1=Sa&&(!document.documentMode||9<document.documentMode)}function s0(){ni&&(ni.detachEvent("onpropertychange",w1),Ei=ni=null)}function w1(t){if(t.propertyName==="value"&&Oo(Ei)){var e=[];v1(e,Ei,t,qc(t)),Zh(Bw,e)}}function Hw(t,e,n){t==="focusin"?(s0(),ni=e,Ei=n,ni.attachEvent("onpropertychange",w1)):t==="focusout"&&s0()}function Vw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oo(Ei)}function $w(t,e){if(t==="click")return Oo(e)}function Gw(t,e){if(t==="input"||t==="change")return Oo(e)}function Qw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dt=typeof Object.is=="function"?Object.is:Qw;function Ci(t,e){if(dt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cl.call(e,i)||!dt(t[i],e[i]))return!1}return!0}function o0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function a0(t,e){var n=o0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=o0(n)}}function S1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?S1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function k1(){for(var t=window,e=Ys();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ys(t.document)}return e}function su(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Yw(t){var e=k1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&S1(n.ownerDocument.documentElement,n)){if(r!==null&&su(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=a0(n,s);var o=a0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Kw=It&&"documentMode"in document&&11>=document.documentMode,Hn=null,Ml=null,ri=null,Pl=!1;function l0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pl||Hn==null||Hn!==Ys(r)||(r=Hn,"selectionStart"in r&&su(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ri&&Ci(ri,r)||(ri=r,r=to(Ml,"onSelect"),0<r.length&&(e=new nu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hn)))}function ss(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Vn={animationend:ss("Animation","AnimationEnd"),animationiteration:ss("Animation","AnimationIteration"),animationstart:ss("Animation","AnimationStart"),transitionend:ss("Transition","TransitionEnd")},xa={},x1={};It&&(x1=document.createElement("div").style,"AnimationEvent"in window||(delete Vn.animationend.animation,delete Vn.animationiteration.animation,delete Vn.animationstart.animation),"TransitionEvent"in window||delete Vn.transitionend.transition);function Fo(t){if(xa[t])return xa[t];if(!Vn[t])return t;var e=Vn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in x1)return xa[t]=e[n];return t}var E1=Fo("animationend"),C1=Fo("animationiteration"),T1=Fo("animationstart"),I1=Fo("transitionend"),M1=new Map,c0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rn(t,e){M1.set(t,e),Dn(e,[t])}for(var Ea=0;Ea<c0.length;Ea++){var Ca=c0[Ea],qw=Ca.toLowerCase(),Xw=Ca[0].toUpperCase()+Ca.slice(1);rn(qw,"on"+Xw)}rn(E1,"onAnimationEnd");rn(C1,"onAnimationIteration");rn(T1,"onAnimationStart");rn("dblclick","onDoubleClick");rn("focusin","onFocus");rn("focusout","onBlur");rn(I1,"onTransitionEnd");pr("onMouseEnter",["mouseout","mouseover"]);pr("onMouseLeave",["mouseout","mouseover"]);pr("onPointerEnter",["pointerout","pointerover"]);pr("onPointerLeave",["pointerout","pointerover"]);Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qr));function u0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,q2(r,e,void 0,t),t.currentTarget=null}function P1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;u0(i,a,l),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;u0(i,a,l),s=c}}}if(qs)throw t=El,qs=!1,El=null,t}function Y(t,e){var n=e[Dl];n===void 0&&(n=e[Dl]=new Set);var r=t+"__bubble";n.has(r)||(N1(e,t,2,!1),n.add(r))}function Ta(t,e,n){var r=0;e&&(r|=4),N1(n,t,r,e)}var os="_reactListening"+Math.random().toString(36).slice(2);function Ti(t){if(!t[os]){t[os]=!0,Fh.forEach(function(n){n!=="selectionchange"&&(Jw.has(n)||Ta(n,!1,t),Ta(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[os]||(e[os]=!0,Ta("selectionchange",!1,e))}}function N1(t,e,n,r){switch(h1(e)){case 1:var i=fw;break;case 4:i=hw;break;default:i=eu}n=i.bind(null,e,n,t),i=void 0,!xl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ia(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=pn(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Zh(function(){var l=s,h=qc(n),d=[];e:{var p=M1.get(t);if(p!==void 0){var y=nu,S=t;switch(t){case"keypress":if(ks(n)===0)break e;case"keydown":case"keyup":y=Mw;break;case"focusin":S="focus",y=wa;break;case"focusout":S="blur",y=wa;break;case"beforeblur":case"afterblur":y=wa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=gw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Rw;break;case E1:case C1:case T1:y=_w;break;case I1:y=Lw;break;case"scroll":y=pw;break;case"wheel":y=bw;break;case"copy":case"cut":case"paste":y=Sw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=e0}var w=(e&4)!==0,v=!w&&t==="scroll",f=w?p!==null?p+"Capture":null:p;w=[];for(var m=l,g;m!==null;){g=m;var k=g.stateNode;if(g.tag===5&&k!==null&&(g=k,f!==null&&(k=wi(m,f),k!=null&&w.push(Ii(m,k,g)))),v)break;m=m.return}0<w.length&&(p=new y(p,S,null,n,h),d.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==Sl&&(S=n.relatedTarget||n.fromElement)&&(pn(S)||S[Mt]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(S=n.relatedTarget||n.toElement,y=l,S=S?pn(S):null,S!==null&&(v=bn(S),S!==v||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=l),y!==S)){if(w=Jd,k="onMouseLeave",f="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(w=e0,k="onPointerLeave",f="onPointerEnter",m="pointer"),v=y==null?p:$n(y),g=S==null?p:$n(S),p=new w(k,m+"leave",y,n,h),p.target=v,p.relatedTarget=g,k=null,pn(h)===l&&(w=new w(f,m+"enter",S,n,h),w.target=g,w.relatedTarget=v,k=w),v=k,y&&S)t:{for(w=y,f=S,m=0,g=w;g;g=jn(g))m++;for(g=0,k=f;k;k=jn(k))g++;for(;0<m-g;)w=jn(w),m--;for(;0<g-m;)f=jn(f),g--;for(;m--;){if(w===f||f!==null&&w===f.alternate)break t;w=jn(w),f=jn(f)}w=null}else w=null;y!==null&&d0(d,p,y,w,!1),S!==null&&v!==null&&d0(d,v,S,w,!0)}}e:{if(p=l?$n(l):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var T=Ww;else if(r0(p))if(_1)T=Gw;else{T=Vw;var M=Hw}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=$w);if(T&&(T=T(t,l))){v1(d,T,n,h);break e}M&&M(t,p,l),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&gl(p,"number",p.value)}switch(M=l?$n(l):window,t){case"focusin":(r0(M)||M.contentEditable==="true")&&(Hn=M,Ml=l,ri=null);break;case"focusout":ri=Ml=Hn=null;break;case"mousedown":Pl=!0;break;case"contextmenu":case"mouseup":case"dragend":Pl=!1,l0(d,n,h);break;case"selectionchange":if(Kw)break;case"keydown":case"keyup":l0(d,n,h)}var P;if(iu)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Wn?g1(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(m1&&n.locale!=="ko"&&(Wn||N!=="onCompositionStart"?N==="onCompositionEnd"&&Wn&&(P=p1()):(jt=h,tu="value"in jt?jt.value:jt.textContent,Wn=!0)),M=to(l,N),0<M.length&&(N=new Zd(N,t,null,n,h),d.push({event:N,listeners:M}),P?N.data=P:(P=y1(n),P!==null&&(N.data=P)))),(P=Fw?jw(t,n):Uw(t,n))&&(l=to(l,"onBeforeInput"),0<l.length&&(h=new Zd("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:l}),h.data=P))}P1(d,e)})}function Ii(t,e,n){return{instance:t,listener:e,currentTarget:n}}function to(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=wi(t,n),s!=null&&r.unshift(Ii(t,s,i)),s=wi(t,e),s!=null&&r.push(Ii(t,s,i))),t=t.return}return r}function jn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function d0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=wi(n,s),c!=null&&o.unshift(Ii(n,c,a))):i||(c=wi(n,s),c!=null&&o.push(Ii(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Zw=/\r\n?/g,eS=/\u0000|\uFFFD/g;function f0(t){return(typeof t=="string"?t:""+t).replace(Zw,`
`).replace(eS,"")}function as(t,e,n){if(e=f0(e),f0(t)!==e&&n)throw Error(x(425))}function no(){}var Nl=null,Rl=null;function Al(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ll=typeof setTimeout=="function"?setTimeout:void 0,tS=typeof clearTimeout=="function"?clearTimeout:void 0,h0=typeof Promise=="function"?Promise:void 0,nS=typeof queueMicrotask=="function"?queueMicrotask:typeof h0<"u"?function(t){return h0.resolve(null).then(t).catch(rS)}:Ll;function rS(t){setTimeout(function(){throw t})}function Ma(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),xi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);xi(e)}function Qt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function p0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ir=Math.random().toString(36).slice(2),pt="__reactFiber$"+Ir,Mi="__reactProps$"+Ir,Mt="__reactContainer$"+Ir,Dl="__reactEvents$"+Ir,iS="__reactListeners$"+Ir,sS="__reactHandles$"+Ir;function pn(t){var e=t[pt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mt]||n[pt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=p0(t);t!==null;){if(n=t[pt])return n;t=p0(t)}return e}t=n,n=t.parentNode}return null}function Vi(t){return t=t[pt]||t[Mt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $n(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(x(33))}function jo(t){return t[Mi]||null}var bl=[],Gn=-1;function sn(t){return{current:t}}function K(t){0>Gn||(t.current=bl[Gn],bl[Gn]=null,Gn--)}function Q(t,e){Gn++,bl[Gn]=t.current,t.current=e}var tn={},Ee=sn(tn),be=sn(!1),Cn=tn;function mr(t,e){var n=t.type.contextTypes;if(!n)return tn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Oe(t){return t=t.childContextTypes,t!=null}function ro(){K(be),K(Ee)}function m0(t,e,n){if(Ee.current!==tn)throw Error(x(168));Q(Ee,e),Q(be,n)}function R1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(x(108,H2(t)||"Unknown",i));return ee({},n,r)}function io(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tn,Cn=Ee.current,Q(Ee,t),Q(be,be.current),!0}function g0(t,e,n){var r=t.stateNode;if(!r)throw Error(x(169));n?(t=R1(t,e,Cn),r.__reactInternalMemoizedMergedChildContext=t,K(be),K(Ee),Q(Ee,t)):K(be),Q(be,n)}var _t=null,Uo=!1,Pa=!1;function A1(t){_t===null?_t=[t]:_t.push(t)}function oS(t){Uo=!0,A1(t)}function on(){if(!Pa&&_t!==null){Pa=!0;var t=0,e=W;try{var n=_t;for(W=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_t=null,Uo=!1}catch(i){throw _t!==null&&(_t=_t.slice(t+1)),r1(Xc,on),i}finally{W=e,Pa=!1}}return null}var Qn=[],Yn=0,so=null,oo=0,Qe=[],Ye=0,Tn=null,St=1,kt="";function dn(t,e){Qn[Yn++]=oo,Qn[Yn++]=so,so=t,oo=e}function L1(t,e,n){Qe[Ye++]=St,Qe[Ye++]=kt,Qe[Ye++]=Tn,Tn=t;var r=St;t=kt;var i=32-lt(r)-1;r&=~(1<<i),n+=1;var s=32-lt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,St=1<<32-lt(e)+i|n<<i|r,kt=s+t}else St=1<<s|n<<i|r,kt=t}function ou(t){t.return!==null&&(dn(t,1),L1(t,1,0))}function au(t){for(;t===so;)so=Qn[--Yn],Qn[Yn]=null,oo=Qn[--Yn],Qn[Yn]=null;for(;t===Tn;)Tn=Qe[--Ye],Qe[Ye]=null,kt=Qe[--Ye],Qe[Ye]=null,St=Qe[--Ye],Qe[Ye]=null}var Be=null,ze=null,q=!1,it=null;function D1(t,e){var n=qe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function y0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Be=t,ze=Qt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Be=t,ze=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Tn!==null?{id:St,overflow:kt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Be=t,ze=null,!0):!1;default:return!1}}function Ol(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fl(t){if(q){var e=ze;if(e){var n=e;if(!y0(t,e)){if(Ol(t))throw Error(x(418));e=Qt(n.nextSibling);var r=Be;e&&y0(t,e)?D1(r,n):(t.flags=t.flags&-4097|2,q=!1,Be=t)}}else{if(Ol(t))throw Error(x(418));t.flags=t.flags&-4097|2,q=!1,Be=t}}}function v0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Be=t}function ls(t){if(t!==Be)return!1;if(!q)return v0(t),q=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Al(t.type,t.memoizedProps)),e&&(e=ze)){if(Ol(t))throw b1(),Error(x(418));for(;e;)D1(t,e),e=Qt(e.nextSibling)}if(v0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(x(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ze=Qt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ze=null}}else ze=Be?Qt(t.stateNode.nextSibling):null;return!0}function b1(){for(var t=ze;t;)t=Qt(t.nextSibling)}function gr(){ze=Be=null,q=!1}function lu(t){it===null?it=[t]:it.push(t)}var aS=Rt.ReactCurrentBatchConfig;function Br(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(x(309));var r=n.stateNode}if(!r)throw Error(x(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(x(284));if(!n._owner)throw Error(x(290,t))}return t}function cs(t,e){throw t=Object.prototype.toString.call(e),Error(x(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _0(t){var e=t._init;return e(t._payload)}function O1(t){function e(f,m){if(t){var g=f.deletions;g===null?(f.deletions=[m],f.flags|=16):g.push(m)}}function n(f,m){if(!t)return null;for(;m!==null;)e(f,m),m=m.sibling;return null}function r(f,m){for(f=new Map;m!==null;)m.key!==null?f.set(m.key,m):f.set(m.index,m),m=m.sibling;return f}function i(f,m){return f=Xt(f,m),f.index=0,f.sibling=null,f}function s(f,m,g){return f.index=g,t?(g=f.alternate,g!==null?(g=g.index,g<m?(f.flags|=2,m):g):(f.flags|=2,m)):(f.flags|=1048576,m)}function o(f){return t&&f.alternate===null&&(f.flags|=2),f}function a(f,m,g,k){return m===null||m.tag!==6?(m=Oa(g,f.mode,k),m.return=f,m):(m=i(m,g),m.return=f,m)}function c(f,m,g,k){var T=g.type;return T===Bn?h(f,m,g.props.children,k,g.key):m!==null&&(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Lt&&_0(T)===m.type)?(k=i(m,g.props),k.ref=Br(f,m,g),k.return=f,k):(k=Ps(g.type,g.key,g.props,null,f.mode,k),k.ref=Br(f,m,g),k.return=f,k)}function l(f,m,g,k){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=Fa(g,f.mode,k),m.return=f,m):(m=i(m,g.children||[]),m.return=f,m)}function h(f,m,g,k,T){return m===null||m.tag!==7?(m=_n(g,f.mode,k,T),m.return=f,m):(m=i(m,g),m.return=f,m)}function d(f,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Oa(""+m,f.mode,g),m.return=f,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ji:return g=Ps(m.type,m.key,m.props,null,f.mode,g),g.ref=Br(f,null,m),g.return=f,g;case zn:return m=Fa(m,f.mode,g),m.return=f,m;case Lt:var k=m._init;return d(f,k(m._payload),g)}if($r(m)||Or(m))return m=_n(m,f.mode,g,null),m.return=f,m;cs(f,m)}return null}function p(f,m,g,k){var T=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return T!==null?null:a(f,m,""+g,k);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ji:return g.key===T?c(f,m,g,k):null;case zn:return g.key===T?l(f,m,g,k):null;case Lt:return T=g._init,p(f,m,T(g._payload),k)}if($r(g)||Or(g))return T!==null?null:h(f,m,g,k,null);cs(f,g)}return null}function y(f,m,g,k,T){if(typeof k=="string"&&k!==""||typeof k=="number")return f=f.get(g)||null,a(m,f,""+k,T);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ji:return f=f.get(k.key===null?g:k.key)||null,c(m,f,k,T);case zn:return f=f.get(k.key===null?g:k.key)||null,l(m,f,k,T);case Lt:var M=k._init;return y(f,m,g,M(k._payload),T)}if($r(k)||Or(k))return f=f.get(g)||null,h(m,f,k,T,null);cs(m,k)}return null}function S(f,m,g,k){for(var T=null,M=null,P=m,N=m=0,re=null;P!==null&&N<g.length;N++){P.index>N?(re=P,P=null):re=P.sibling;var j=p(f,P,g[N],k);if(j===null){P===null&&(P=re);break}t&&P&&j.alternate===null&&e(f,P),m=s(j,m,N),M===null?T=j:M.sibling=j,M=j,P=re}if(N===g.length)return n(f,P),q&&dn(f,N),T;if(P===null){for(;N<g.length;N++)P=d(f,g[N],k),P!==null&&(m=s(P,m,N),M===null?T=P:M.sibling=P,M=P);return q&&dn(f,N),T}for(P=r(f,P);N<g.length;N++)re=y(P,f,N,g[N],k),re!==null&&(t&&re.alternate!==null&&P.delete(re.key===null?N:re.key),m=s(re,m,N),M===null?T=re:M.sibling=re,M=re);return t&&P.forEach(function(et){return e(f,et)}),q&&dn(f,N),T}function w(f,m,g,k){var T=Or(g);if(typeof T!="function")throw Error(x(150));if(g=T.call(g),g==null)throw Error(x(151));for(var M=T=null,P=m,N=m=0,re=null,j=g.next();P!==null&&!j.done;N++,j=g.next()){P.index>N?(re=P,P=null):re=P.sibling;var et=p(f,P,j.value,k);if(et===null){P===null&&(P=re);break}t&&P&&et.alternate===null&&e(f,P),m=s(et,m,N),M===null?T=et:M.sibling=et,M=et,P=re}if(j.done)return n(f,P),q&&dn(f,N),T;if(P===null){for(;!j.done;N++,j=g.next())j=d(f,j.value,k),j!==null&&(m=s(j,m,N),M===null?T=j:M.sibling=j,M=j);return q&&dn(f,N),T}for(P=r(f,P);!j.done;N++,j=g.next())j=y(P,f,N,j.value,k),j!==null&&(t&&j.alternate!==null&&P.delete(j.key===null?N:j.key),m=s(j,m,N),M===null?T=j:M.sibling=j,M=j);return t&&P.forEach(function(Mr){return e(f,Mr)}),q&&dn(f,N),T}function v(f,m,g,k){if(typeof g=="object"&&g!==null&&g.type===Bn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Ji:e:{for(var T=g.key,M=m;M!==null;){if(M.key===T){if(T=g.type,T===Bn){if(M.tag===7){n(f,M.sibling),m=i(M,g.props.children),m.return=f,f=m;break e}}else if(M.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Lt&&_0(T)===M.type){n(f,M.sibling),m=i(M,g.props),m.ref=Br(f,M,g),m.return=f,f=m;break e}n(f,M);break}else e(f,M);M=M.sibling}g.type===Bn?(m=_n(g.props.children,f.mode,k,g.key),m.return=f,f=m):(k=Ps(g.type,g.key,g.props,null,f.mode,k),k.ref=Br(f,m,g),k.return=f,f=k)}return o(f);case zn:e:{for(M=g.key;m!==null;){if(m.key===M)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(f,m.sibling),m=i(m,g.children||[]),m.return=f,f=m;break e}else{n(f,m);break}else e(f,m);m=m.sibling}m=Fa(g,f.mode,k),m.return=f,f=m}return o(f);case Lt:return M=g._init,v(f,m,M(g._payload),k)}if($r(g))return S(f,m,g,k);if(Or(g))return w(f,m,g,k);cs(f,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(f,m.sibling),m=i(m,g),m.return=f,f=m):(n(f,m),m=Oa(g,f.mode,k),m.return=f,f=m),o(f)):n(f,m)}return v}var yr=O1(!0),F1=O1(!1),ao=sn(null),lo=null,Kn=null,cu=null;function uu(){cu=Kn=lo=null}function du(t){var e=ao.current;K(ao),t._currentValue=e}function jl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ar(t,e){lo=t,cu=Kn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(De=!0),t.firstContext=null)}function Je(t){var e=t._currentValue;if(cu!==t)if(t={context:t,memoizedValue:e,next:null},Kn===null){if(lo===null)throw Error(x(308));Kn=t,lo.dependencies={lanes:0,firstContext:t}}else Kn=Kn.next=t;return e}var mn=null;function fu(t){mn===null?mn=[t]:mn.push(t)}function j1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,fu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pt(t,r)}function Pt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dt=!1;function hu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function U1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Et(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,U&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pt(t,n)}return i=r.interleaved,i===null?(e.next=e,fu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pt(t,n)}function xs(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Jc(t,n)}}function w0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function co(t,e,n,r){var i=t.updateQueue;Dt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=l:a.next=l,h.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,h=l=c=null,a=s;do{var p=a.lane,y=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,w=a;switch(p=e,y=n,w.tag){case 1:if(S=w.payload,typeof S=="function"){d=S.call(y,d,p);break e}d=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=w.payload,p=typeof S=="function"?S.call(y,d,p):S,p==null)break e;d=ee({},d,p);break e;case 2:Dt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(l=h=y,c=d):h=h.next=y,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Mn|=o,t.lanes=o,t.memoizedState=d}}function S0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(x(191,i));i.call(r)}}}var $i={},gt=sn($i),Pi=sn($i),Ni=sn($i);function gn(t){if(t===$i)throw Error(x(174));return t}function pu(t,e){switch(Q(Ni,e),Q(Pi,t),Q(gt,$i),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vl(e,t)}K(gt),Q(gt,e)}function vr(){K(gt),K(Pi),K(Ni)}function z1(t){gn(Ni.current);var e=gn(gt.current),n=vl(e,t.type);e!==n&&(Q(Pi,t),Q(gt,n))}function mu(t){Pi.current===t&&(K(gt),K(Pi))}var X=sn(0);function uo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Na=[];function gu(){for(var t=0;t<Na.length;t++)Na[t]._workInProgressVersionPrimary=null;Na.length=0}var Es=Rt.ReactCurrentDispatcher,Ra=Rt.ReactCurrentBatchConfig,In=0,Z=null,ae=null,fe=null,fo=!1,ii=!1,Ri=0,lS=0;function Se(){throw Error(x(321))}function yu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dt(t[n],e[n]))return!1;return!0}function vu(t,e,n,r,i,s){if(In=s,Z=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Es.current=t===null||t.memoizedState===null?fS:hS,t=n(r,i),ii){s=0;do{if(ii=!1,Ri=0,25<=s)throw Error(x(301));s+=1,fe=ae=null,e.updateQueue=null,Es.current=pS,t=n(r,i)}while(ii)}if(Es.current=ho,e=ae!==null&&ae.next!==null,In=0,fe=ae=Z=null,fo=!1,e)throw Error(x(300));return t}function _u(){var t=Ri!==0;return Ri=0,t}function ht(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?Z.memoizedState=fe=t:fe=fe.next=t,fe}function Ze(){if(ae===null){var t=Z.alternate;t=t!==null?t.memoizedState:null}else t=ae.next;var e=fe===null?Z.memoizedState:fe.next;if(e!==null)fe=e,ae=t;else{if(t===null)throw Error(x(310));ae=t,t={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},fe===null?Z.memoizedState=fe=t:fe=fe.next=t}return fe}function Ai(t,e){return typeof e=="function"?e(t):e}function Aa(t){var e=Ze(),n=e.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=t;var r=ae,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,l=s;do{var h=l.lane;if((In&h)===h)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Z.lanes|=h,Mn|=h}l=l.next}while(l!==null&&l!==s);c===null?o=r:c.next=a,dt(r,e.memoizedState)||(De=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Z.lanes|=s,Mn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function La(t){var e=Ze(),n=e.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);dt(s,e.memoizedState)||(De=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function B1(){}function W1(t,e){var n=Z,r=Ze(),i=e(),s=!dt(r.memoizedState,i);if(s&&(r.memoizedState=i,De=!0),r=r.queue,wu($1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||fe!==null&&fe.memoizedState.tag&1){if(n.flags|=2048,Li(9,V1.bind(null,n,r,i,e),void 0,null),me===null)throw Error(x(349));In&30||H1(n,e,i)}return i}function H1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function V1(t,e,n,r){e.value=n,e.getSnapshot=r,G1(e)&&Q1(t)}function $1(t,e,n){return n(function(){G1(e)&&Q1(t)})}function G1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dt(t,n)}catch{return!0}}function Q1(t){var e=Pt(t,1);e!==null&&ct(e,t,1,-1)}function k0(t){var e=ht();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:t},e.queue=t,t=t.dispatch=dS.bind(null,Z,t),[e.memoizedState,t]}function Li(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Y1(){return Ze().memoizedState}function Cs(t,e,n,r){var i=ht();Z.flags|=t,i.memoizedState=Li(1|e,n,void 0,r===void 0?null:r)}function zo(t,e,n,r){var i=Ze();r=r===void 0?null:r;var s=void 0;if(ae!==null){var o=ae.memoizedState;if(s=o.destroy,r!==null&&yu(r,o.deps)){i.memoizedState=Li(e,n,s,r);return}}Z.flags|=t,i.memoizedState=Li(1|e,n,s,r)}function x0(t,e){return Cs(8390656,8,t,e)}function wu(t,e){return zo(2048,8,t,e)}function K1(t,e){return zo(4,2,t,e)}function q1(t,e){return zo(4,4,t,e)}function X1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function J1(t,e,n){return n=n!=null?n.concat([t]):null,zo(4,4,X1.bind(null,e,t),n)}function Su(){}function Z1(t,e){var n=Ze();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ep(t,e){var n=Ze();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function tp(t,e,n){return In&21?(dt(n,e)||(n=o1(),Z.lanes|=n,Mn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,De=!0),t.memoizedState=n)}function cS(t,e){var n=W;W=n!==0&&4>n?n:4,t(!0);var r=Ra.transition;Ra.transition={};try{t(!1),e()}finally{W=n,Ra.transition=r}}function np(){return Ze().memoizedState}function uS(t,e,n){var r=qt(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rp(t))ip(e,n);else if(n=j1(t,e,n,r),n!==null){var i=Ie();ct(n,t,r,i),sp(n,e,r)}}function dS(t,e,n){var r=qt(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rp(t))ip(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,dt(a,o)){var c=e.interleaved;c===null?(i.next=i,fu(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=j1(t,e,i,r),n!==null&&(i=Ie(),ct(n,t,r,i),sp(n,e,r))}}function rp(t){var e=t.alternate;return t===Z||e!==null&&e===Z}function ip(t,e){ii=fo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Jc(t,n)}}var ho={readContext:Je,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},fS={readContext:Je,useCallback:function(t,e){return ht().memoizedState=[t,e===void 0?null:e],t},useContext:Je,useEffect:x0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cs(4194308,4,X1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cs(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cs(4,2,t,e)},useMemo:function(t,e){var n=ht();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ht();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=uS.bind(null,Z,t),[r.memoizedState,t]},useRef:function(t){var e=ht();return t={current:t},e.memoizedState=t},useState:k0,useDebugValue:Su,useDeferredValue:function(t){return ht().memoizedState=t},useTransition:function(){var t=k0(!1),e=t[0];return t=cS.bind(null,t[1]),ht().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Z,i=ht();if(q){if(n===void 0)throw Error(x(407));n=n()}else{if(n=e(),me===null)throw Error(x(349));In&30||H1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,x0($1.bind(null,r,s,t),[t]),r.flags|=2048,Li(9,V1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ht(),e=me.identifierPrefix;if(q){var n=kt,r=St;n=(r&~(1<<32-lt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ri++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hS={readContext:Je,useCallback:Z1,useContext:Je,useEffect:wu,useImperativeHandle:J1,useInsertionEffect:K1,useLayoutEffect:q1,useMemo:ep,useReducer:Aa,useRef:Y1,useState:function(){return Aa(Ai)},useDebugValue:Su,useDeferredValue:function(t){var e=Ze();return tp(e,ae.memoizedState,t)},useTransition:function(){var t=Aa(Ai)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:B1,useSyncExternalStore:W1,useId:np,unstable_isNewReconciler:!1},pS={readContext:Je,useCallback:Z1,useContext:Je,useEffect:wu,useImperativeHandle:J1,useInsertionEffect:K1,useLayoutEffect:q1,useMemo:ep,useReducer:La,useRef:Y1,useState:function(){return La(Ai)},useDebugValue:Su,useDeferredValue:function(t){var e=Ze();return ae===null?e.memoizedState=t:tp(e,ae.memoizedState,t)},useTransition:function(){var t=La(Ai)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:B1,useSyncExternalStore:W1,useId:np,unstable_isNewReconciler:!1};function nt(t,e){if(t&&t.defaultProps){e=ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ul(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Bo={isMounted:function(t){return(t=t._reactInternals)?bn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ie(),i=qt(t),s=Et(r,i);s.payload=e,n!=null&&(s.callback=n),e=Yt(t,s,i),e!==null&&(ct(e,t,i,r),xs(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ie(),i=qt(t),s=Et(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Yt(t,s,i),e!==null&&(ct(e,t,i,r),xs(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ie(),r=qt(t),i=Et(n,r);i.tag=2,e!=null&&(i.callback=e),e=Yt(t,i,r),e!==null&&(ct(e,t,r,n),xs(e,t,r))}};function E0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ci(n,r)||!Ci(i,s):!0}function op(t,e,n){var r=!1,i=tn,s=e.contextType;return typeof s=="object"&&s!==null?s=Je(s):(i=Oe(e)?Cn:Ee.current,r=e.contextTypes,s=(r=r!=null)?mr(t,i):tn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function C0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Bo.enqueueReplaceState(e,e.state,null)}function zl(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},hu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Je(s):(s=Oe(e)?Cn:Ee.current,i.context=mr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ul(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Bo.enqueueReplaceState(i,i.state,null),co(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _r(t,e){try{var n="",r=e;do n+=W2(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Da(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mS=typeof WeakMap=="function"?WeakMap:Map;function ap(t,e,n){n=Et(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mo||(mo=!0,Xl=r),Bl(t,e)},n}function lp(t,e,n){n=Et(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bl(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Bl(t,e),typeof r!="function"&&(Kt===null?Kt=new Set([this]):Kt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function T0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=PS.bind(null,t,e,n),e.then(t,t))}function I0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function M0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Et(-1,1),e.tag=2,Yt(n,e,1))),n.lanes|=1),t)}var gS=Rt.ReactCurrentOwner,De=!1;function Ce(t,e,n,r){e.child=t===null?F1(e,null,n,r):yr(e,t.child,n,r)}function P0(t,e,n,r,i){n=n.render;var s=e.ref;return ar(e,i),r=vu(t,e,n,r,s,i),n=_u(),t!==null&&!De?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nt(t,e,i)):(q&&n&&ou(e),e.flags|=1,Ce(t,e,r,i),e.child)}function N0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Pu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,cp(t,e,s,r,i)):(t=Ps(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ci,n(o,r)&&t.ref===e.ref)return Nt(t,e,i)}return e.flags|=1,t=Xt(s,r),t.ref=e.ref,t.return=e,e.child=t}function cp(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ci(s,r)&&t.ref===e.ref)if(De=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(De=!0);else return e.lanes=t.lanes,Nt(t,e,i)}return Wl(t,e,n,r,i)}function up(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q(Xn,je),je|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Q(Xn,je),je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Q(Xn,je),je|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Q(Xn,je),je|=r;return Ce(t,e,i,n),e.child}function dp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wl(t,e,n,r,i){var s=Oe(n)?Cn:Ee.current;return s=mr(e,s),ar(e,i),n=vu(t,e,n,r,s,i),r=_u(),t!==null&&!De?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nt(t,e,i)):(q&&r&&ou(e),e.flags|=1,Ce(t,e,n,i),e.child)}function R0(t,e,n,r,i){if(Oe(n)){var s=!0;io(e)}else s=!1;if(ar(e,i),e.stateNode===null)Ts(t,e),op(e,n,r),zl(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Je(l):(l=Oe(n)?Cn:Ee.current,l=mr(e,l));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&C0(e,o,r,l),Dt=!1;var p=e.memoizedState;o.state=p,co(e,r,o,i),c=e.memoizedState,a!==r||p!==c||be.current||Dt?(typeof h=="function"&&(Ul(e,n,h,r),c=e.memoizedState),(a=Dt||E0(e,n,a,r,p,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,U1(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:nt(e.type,a),o.props=l,d=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Je(c):(c=Oe(n)?Cn:Ee.current,c=mr(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==c)&&C0(e,o,r,c),Dt=!1,p=e.memoizedState,o.state=p,co(e,r,o,i);var S=e.memoizedState;a!==d||p!==S||be.current||Dt?(typeof y=="function"&&(Ul(e,n,y,r),S=e.memoizedState),(l=Dt||E0(e,n,l,r,p,S,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Hl(t,e,n,r,s,i)}function Hl(t,e,n,r,i,s){dp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&g0(e,n,!1),Nt(t,e,s);r=e.stateNode,gS.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=yr(e,t.child,null,s),e.child=yr(e,null,a,s)):Ce(t,e,a,s),e.memoizedState=r.state,i&&g0(e,n,!0),e.child}function fp(t){var e=t.stateNode;e.pendingContext?m0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&m0(t,e.context,!1),pu(t,e.containerInfo)}function A0(t,e,n,r,i){return gr(),lu(i),e.flags|=256,Ce(t,e,n,r),e.child}var Vl={dehydrated:null,treeContext:null,retryLane:0};function $l(t){return{baseLanes:t,cachePool:null,transitions:null}}function hp(t,e,n){var r=e.pendingProps,i=X.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Q(X,i&1),t===null)return Fl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Vo(o,r,0,null),t=_n(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=$l(n),e.memoizedState=Vl,t):ku(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return yS(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Xt(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Xt(a,s):(s=_n(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?$l(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Vl,r}return s=t.child,t=s.sibling,r=Xt(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ku(t,e){return e=Vo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function us(t,e,n,r){return r!==null&&lu(r),yr(e,t.child,null,n),t=ku(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Da(Error(x(422))),us(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Vo({mode:"visible",children:r.children},i,0,null),s=_n(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&yr(e,t.child,null,o),e.child.memoizedState=$l(o),e.memoizedState=Vl,s);if(!(e.mode&1))return us(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(x(419)),r=Da(s,r,void 0),us(t,e,o,r)}if(a=(o&t.childLanes)!==0,De||a){if(r=me,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pt(t,i),ct(r,t,i,-1))}return Mu(),r=Da(Error(x(421))),us(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=NS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ze=Qt(i.nextSibling),Be=e,q=!0,it=null,t!==null&&(Qe[Ye++]=St,Qe[Ye++]=kt,Qe[Ye++]=Tn,St=t.id,kt=t.overflow,Tn=e),e=ku(e,r.children),e.flags|=4096,e)}function L0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jl(t.return,e,n)}function ba(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function pp(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ce(t,e,r.children,n),r=X.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&L0(t,n,e);else if(t.tag===19)L0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Q(X,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&uo(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ba(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&uo(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ba(e,!0,n,null,s);break;case"together":ba(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ts(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(x(153));if(e.child!==null){for(t=e.child,n=Xt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vS(t,e,n){switch(e.tag){case 3:fp(e),gr();break;case 5:z1(e);break;case 1:Oe(e.type)&&io(e);break;case 4:pu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Q(ao,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Q(X,X.current&1),e.flags|=128,null):n&e.child.childLanes?hp(t,e,n):(Q(X,X.current&1),t=Nt(t,e,n),t!==null?t.sibling:null);Q(X,X.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return pp(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Q(X,X.current),r)break;return null;case 22:case 23:return e.lanes=0,up(t,e,n)}return Nt(t,e,n)}var mp,Gl,gp,yp;mp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gl=function(){};gp=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,gn(gt.current);var s=null;switch(n){case"input":i=pl(t,i),r=pl(t,r),s=[];break;case"select":i=ee({},i,{value:void 0}),r=ee({},r,{value:void 0}),s=[];break;case"textarea":i=yl(t,i),r=yl(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=no)}_l(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(vi.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(vi.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Y("scroll",t),s||a===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};yp=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wr(t,e){if(!q)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _S(t,e,n){var r=e.pendingProps;switch(au(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(e),null;case 1:return Oe(e.type)&&ro(),ke(e),null;case 3:return r=e.stateNode,vr(),K(be),K(Ee),gu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ls(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,it!==null&&(ec(it),it=null))),Gl(t,e),ke(e),null;case 5:mu(e);var i=gn(Ni.current);if(n=e.type,t!==null&&e.stateNode!=null)gp(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(x(166));return ke(e),null}if(t=gn(gt.current),ls(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[pt]=e,r[Mi]=s,t=(e.mode&1)!==0,n){case"dialog":Y("cancel",r),Y("close",r);break;case"iframe":case"object":case"embed":Y("load",r);break;case"video":case"audio":for(i=0;i<Qr.length;i++)Y(Qr[i],r);break;case"source":Y("error",r);break;case"img":case"image":case"link":Y("error",r),Y("load",r);break;case"details":Y("toggle",r);break;case"input":Wd(r,s),Y("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Y("invalid",r);break;case"textarea":Vd(r,s),Y("invalid",r)}_l(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&as(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&as(r.textContent,a,t),i=["children",""+a]):vi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Y("scroll",r)}switch(n){case"input":Zi(r),Hd(r,s,!0);break;case"textarea":Zi(r),$d(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=no)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$h(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pt]=e,t[Mi]=r,mp(t,e,!1,!1),e.stateNode=t;e:{switch(o=wl(n,r),n){case"dialog":Y("cancel",t),Y("close",t),i=r;break;case"iframe":case"object":case"embed":Y("load",t),i=r;break;case"video":case"audio":for(i=0;i<Qr.length;i++)Y(Qr[i],t);i=r;break;case"source":Y("error",t),i=r;break;case"img":case"image":case"link":Y("error",t),Y("load",t),i=r;break;case"details":Y("toggle",t),i=r;break;case"input":Wd(t,r),i=pl(t,r),Y("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ee({},r,{value:void 0}),Y("invalid",t);break;case"textarea":Vd(t,r),i=yl(t,r),Y("invalid",t);break;default:i=r}_l(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Yh(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Gh(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&_i(t,c):typeof c=="number"&&_i(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(vi.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Y("scroll",t):c!=null&&Gc(t,s,c,o))}switch(n){case"input":Zi(t),Hd(t,r,!1);break;case"textarea":Zi(t),$d(t);break;case"option":r.value!=null&&t.setAttribute("value",""+en(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?rr(t,!!r.multiple,s,!1):r.defaultValue!=null&&rr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=no)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ke(e),null;case 6:if(t&&e.stateNode!=null)yp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(x(166));if(n=gn(Ni.current),gn(gt.current),ls(e)){if(r=e.stateNode,n=e.memoizedProps,r[pt]=e,(s=r.nodeValue!==n)&&(t=Be,t!==null))switch(t.tag){case 3:as(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&as(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pt]=e,e.stateNode=r}return ke(e),null;case 13:if(K(X),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(q&&ze!==null&&e.mode&1&&!(e.flags&128))b1(),gr(),e.flags|=98560,s=!1;else if(s=ls(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(x(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(x(317));s[pt]=e}else gr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ke(e),s=!1}else it!==null&&(ec(it),it=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||X.current&1?le===0&&(le=3):Mu())),e.updateQueue!==null&&(e.flags|=4),ke(e),null);case 4:return vr(),Gl(t,e),t===null&&Ti(e.stateNode.containerInfo),ke(e),null;case 10:return du(e.type._context),ke(e),null;case 17:return Oe(e.type)&&ro(),ke(e),null;case 19:if(K(X),s=e.memoizedState,s===null)return ke(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Wr(s,!1);else{if(le!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=uo(t),o!==null){for(e.flags|=128,Wr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Q(X,X.current&1|2),e.child}t=t.sibling}s.tail!==null&&se()>wr&&(e.flags|=128,r=!0,Wr(s,!1),e.lanes=4194304)}else{if(!r)if(t=uo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!q)return ke(e),null}else 2*se()-s.renderingStartTime>wr&&n!==1073741824&&(e.flags|=128,r=!0,Wr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=se(),e.sibling=null,n=X.current,Q(X,r?n&1|2:n&1),e):(ke(e),null);case 22:case 23:return Iu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?je&1073741824&&(ke(e),e.subtreeFlags&6&&(e.flags|=8192)):ke(e),null;case 24:return null;case 25:return null}throw Error(x(156,e.tag))}function wS(t,e){switch(au(e),e.tag){case 1:return Oe(e.type)&&ro(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vr(),K(be),K(Ee),gu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mu(e),null;case 13:if(K(X),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(x(340));gr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return K(X),null;case 4:return vr(),null;case 10:return du(e.type._context),null;case 22:case 23:return Iu(),null;case 24:return null;default:return null}}var ds=!1,xe=!1,SS=typeof WeakSet=="function"?WeakSet:Set,C=null;function qn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){te(t,e,r)}else n.current=null}function Ql(t,e,n){try{n()}catch(r){te(t,e,r)}}var D0=!1;function kS(t,e){if(Nl=Zs,t=k1(),su(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,h=0,d=t,p=null;t:for(;;){for(var y;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)p=d,d=y;for(;;){if(d===t)break t;if(p===n&&++l===i&&(a=o),p===s&&++h===r&&(c=o),(y=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=y}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rl={focusedElem:t,selectionRange:n},Zs=!1,C=e;C!==null;)if(e=C,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,C=t;else for(;C!==null;){e=C;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var w=S.memoizedProps,v=S.memoizedState,f=e.stateNode,m=f.getSnapshotBeforeUpdate(e.elementType===e.type?w:nt(e.type,w),v);f.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(k){te(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,C=t;break}C=e.return}return S=D0,D0=!1,S}function si(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ql(e,n,s)}i=i.next}while(i!==r)}}function Wo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Yl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vp(t){var e=t.alternate;e!==null&&(t.alternate=null,vp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pt],delete e[Mi],delete e[Dl],delete e[iS],delete e[sS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _p(t){return t.tag===5||t.tag===3||t.tag===4}function b0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_p(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=no));else if(r!==4&&(t=t.child,t!==null))for(Kl(t,e,n),t=t.sibling;t!==null;)Kl(t,e,n),t=t.sibling}function ql(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ql(t,e,n),t=t.sibling;t!==null;)ql(t,e,n),t=t.sibling}var ge=null,rt=!1;function At(t,e,n){for(n=n.child;n!==null;)wp(t,e,n),n=n.sibling}function wp(t,e,n){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(Do,n)}catch{}switch(n.tag){case 5:xe||qn(n,e);case 6:var r=ge,i=rt;ge=null,At(t,e,n),ge=r,rt=i,ge!==null&&(rt?(t=ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ge.removeChild(n.stateNode));break;case 18:ge!==null&&(rt?(t=ge,n=n.stateNode,t.nodeType===8?Ma(t.parentNode,n):t.nodeType===1&&Ma(t,n),xi(t)):Ma(ge,n.stateNode));break;case 4:r=ge,i=rt,ge=n.stateNode.containerInfo,rt=!0,At(t,e,n),ge=r,rt=i;break;case 0:case 11:case 14:case 15:if(!xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ql(n,e,o),i=i.next}while(i!==r)}At(t,e,n);break;case 1:if(!xe&&(qn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){te(n,e,a)}At(t,e,n);break;case 21:At(t,e,n);break;case 22:n.mode&1?(xe=(r=xe)||n.memoizedState!==null,At(t,e,n),xe=r):At(t,e,n);break;default:At(t,e,n)}}function O0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SS),e.forEach(function(r){var i=RS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function tt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ge=a.stateNode,rt=!1;break e;case 3:ge=a.stateNode.containerInfo,rt=!0;break e;case 4:ge=a.stateNode.containerInfo,rt=!0;break e}a=a.return}if(ge===null)throw Error(x(160));wp(s,o,i),ge=null,rt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){te(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Sp(e,t),e=e.sibling}function Sp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tt(e,t),ft(t),r&4){try{si(3,t,t.return),Wo(3,t)}catch(w){te(t,t.return,w)}try{si(5,t,t.return)}catch(w){te(t,t.return,w)}}break;case 1:tt(e,t),ft(t),r&512&&n!==null&&qn(n,n.return);break;case 5:if(tt(e,t),ft(t),r&512&&n!==null&&qn(n,n.return),t.flags&32){var i=t.stateNode;try{_i(i,"")}catch(w){te(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Hh(i,s),wl(a,o);var l=wl(a,s);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Yh(i,d):h==="dangerouslySetInnerHTML"?Gh(i,d):h==="children"?_i(i,d):Gc(i,h,d,l)}switch(a){case"input":ml(i,s);break;case"textarea":Vh(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?rr(i,!!s.multiple,y,!1):p!==!!s.multiple&&(s.defaultValue!=null?rr(i,!!s.multiple,s.defaultValue,!0):rr(i,!!s.multiple,s.multiple?[]:"",!1))}i[Mi]=s}catch(w){te(t,t.return,w)}}break;case 6:if(tt(e,t),ft(t),r&4){if(t.stateNode===null)throw Error(x(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){te(t,t.return,w)}}break;case 3:if(tt(e,t),ft(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xi(e.containerInfo)}catch(w){te(t,t.return,w)}break;case 4:tt(e,t),ft(t);break;case 13:tt(e,t),ft(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Cu=se())),r&4&&O0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(xe=(l=xe)||h,tt(e,t),xe=l):tt(e,t),ft(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!h&&t.mode&1)for(C=t,h=t.child;h!==null;){for(d=C=h;C!==null;){switch(p=C,y=p.child,p.tag){case 0:case 11:case 14:case 15:si(4,p,p.return);break;case 1:qn(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(w){te(r,n,w)}}break;case 5:qn(p,p.return);break;case 22:if(p.memoizedState!==null){j0(d);continue}}y!==null?(y.return=p,C=y):j0(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Qh("display",o))}catch(w){te(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(w){te(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:tt(e,t),ft(t),r&4&&O0(t);break;case 21:break;default:tt(e,t),ft(t)}}function ft(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_p(n)){var r=n;break e}n=n.return}throw Error(x(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_i(i,""),r.flags&=-33);var s=b0(t);ql(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=b0(t);Kl(t,a,o);break;default:throw Error(x(161))}}catch(c){te(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xS(t,e,n){C=t,kp(t)}function kp(t,e,n){for(var r=(t.mode&1)!==0;C!==null;){var i=C,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ds;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||xe;a=ds;var l=xe;if(ds=o,(xe=c)&&!l)for(C=i;C!==null;)o=C,c=o.child,o.tag===22&&o.memoizedState!==null?U0(i):c!==null?(c.return=o,C=c):U0(i);for(;s!==null;)C=s,kp(s),s=s.sibling;C=i,ds=a,xe=l}F0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,C=s):F0(t)}}function F0(t){for(;C!==null;){var e=C;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xe||Wo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xe)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:nt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&S0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}S0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var h=l.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&xi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}xe||e.flags&512&&Yl(e)}catch(p){te(e,e.return,p)}}if(e===t){C=null;break}if(n=e.sibling,n!==null){n.return=e.return,C=n;break}C=e.return}}function j0(t){for(;C!==null;){var e=C;if(e===t){C=null;break}var n=e.sibling;if(n!==null){n.return=e.return,C=n;break}C=e.return}}function U0(t){for(;C!==null;){var e=C;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wo(4,e)}catch(c){te(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){te(e,i,c)}}var s=e.return;try{Yl(e)}catch(c){te(e,s,c)}break;case 5:var o=e.return;try{Yl(e)}catch(c){te(e,o,c)}}}catch(c){te(e,e.return,c)}if(e===t){C=null;break}var a=e.sibling;if(a!==null){a.return=e.return,C=a;break}C=e.return}}var ES=Math.ceil,po=Rt.ReactCurrentDispatcher,xu=Rt.ReactCurrentOwner,Xe=Rt.ReactCurrentBatchConfig,U=0,me=null,oe=null,ve=0,je=0,Xn=sn(0),le=0,Di=null,Mn=0,Ho=0,Eu=0,oi=null,Re=null,Cu=0,wr=1/0,vt=null,mo=!1,Xl=null,Kt=null,fs=!1,Ut=null,go=0,ai=0,Jl=null,Is=-1,Ms=0;function Ie(){return U&6?se():Is!==-1?Is:Is=se()}function qt(t){return t.mode&1?U&2&&ve!==0?ve&-ve:aS.transition!==null?(Ms===0&&(Ms=o1()),Ms):(t=W,t!==0||(t=window.event,t=t===void 0?16:h1(t.type)),t):1}function ct(t,e,n,r){if(50<ai)throw ai=0,Jl=null,Error(x(185));Wi(t,n,r),(!(U&2)||t!==me)&&(t===me&&(!(U&2)&&(Ho|=n),le===4&&Ot(t,ve)),Fe(t,r),n===1&&U===0&&!(e.mode&1)&&(wr=se()+500,Uo&&on()))}function Fe(t,e){var n=t.callbackNode;aw(t,e);var r=Js(t,t===me?ve:0);if(r===0)n!==null&&Yd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Yd(n),e===1)t.tag===0?oS(z0.bind(null,t)):A1(z0.bind(null,t)),nS(function(){!(U&6)&&on()}),n=null;else{switch(a1(r)){case 1:n=Xc;break;case 4:n=i1;break;case 16:n=Xs;break;case 536870912:n=s1;break;default:n=Xs}n=Np(n,xp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function xp(t,e){if(Is=-1,Ms=0,U&6)throw Error(x(327));var n=t.callbackNode;if(lr()&&t.callbackNode!==n)return null;var r=Js(t,t===me?ve:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yo(t,r);else{e=r;var i=U;U|=2;var s=Cp();(me!==t||ve!==e)&&(vt=null,wr=se()+500,vn(t,e));do try{IS();break}catch(a){Ep(t,a)}while(!0);uu(),po.current=s,U=i,oe!==null?e=0:(me=null,ve=0,e=le)}if(e!==0){if(e===2&&(i=Cl(t),i!==0&&(r=i,e=Zl(t,i))),e===1)throw n=Di,vn(t,0),Ot(t,r),Fe(t,se()),n;if(e===6)Ot(t,r);else{if(i=t.current.alternate,!(r&30)&&!CS(i)&&(e=yo(t,r),e===2&&(s=Cl(t),s!==0&&(r=s,e=Zl(t,s))),e===1))throw n=Di,vn(t,0),Ot(t,r),Fe(t,se()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(x(345));case 2:fn(t,Re,vt);break;case 3:if(Ot(t,r),(r&130023424)===r&&(e=Cu+500-se(),10<e)){if(Js(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ie(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ll(fn.bind(null,t,Re,vt),e);break}fn(t,Re,vt);break;case 4:if(Ot(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-lt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ES(r/1960))-r,10<r){t.timeoutHandle=Ll(fn.bind(null,t,Re,vt),r);break}fn(t,Re,vt);break;case 5:fn(t,Re,vt);break;default:throw Error(x(329))}}}return Fe(t,se()),t.callbackNode===n?xp.bind(null,t):null}function Zl(t,e){var n=oi;return t.current.memoizedState.isDehydrated&&(vn(t,e).flags|=256),t=yo(t,e),t!==2&&(e=Re,Re=n,e!==null&&ec(e)),t}function ec(t){Re===null?Re=t:Re.push.apply(Re,t)}function CS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!dt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ot(t,e){for(e&=~Eu,e&=~Ho,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-lt(e),r=1<<n;t[n]=-1,e&=~r}}function z0(t){if(U&6)throw Error(x(327));lr();var e=Js(t,0);if(!(e&1))return Fe(t,se()),null;var n=yo(t,e);if(t.tag!==0&&n===2){var r=Cl(t);r!==0&&(e=r,n=Zl(t,r))}if(n===1)throw n=Di,vn(t,0),Ot(t,e),Fe(t,se()),n;if(n===6)throw Error(x(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fn(t,Re,vt),Fe(t,se()),null}function Tu(t,e){var n=U;U|=1;try{return t(e)}finally{U=n,U===0&&(wr=se()+500,Uo&&on())}}function Pn(t){Ut!==null&&Ut.tag===0&&!(U&6)&&lr();var e=U;U|=1;var n=Xe.transition,r=W;try{if(Xe.transition=null,W=1,t)return t()}finally{W=r,Xe.transition=n,U=e,!(U&6)&&on()}}function Iu(){je=Xn.current,K(Xn)}function vn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tS(n)),oe!==null)for(n=oe.return;n!==null;){var r=n;switch(au(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ro();break;case 3:vr(),K(be),K(Ee),gu();break;case 5:mu(r);break;case 4:vr();break;case 13:K(X);break;case 19:K(X);break;case 10:du(r.type._context);break;case 22:case 23:Iu()}n=n.return}if(me=t,oe=t=Xt(t.current,null),ve=je=e,le=0,Di=null,Eu=Ho=Mn=0,Re=oi=null,mn!==null){for(e=0;e<mn.length;e++)if(n=mn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}mn=null}return t}function Ep(t,e){do{var n=oe;try{if(uu(),Es.current=ho,fo){for(var r=Z.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fo=!1}if(In=0,fe=ae=Z=null,ii=!1,Ri=0,xu.current=null,n===null||n.return===null){le=1,Di=e,oe=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=ve,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=I0(o);if(y!==null){y.flags&=-257,M0(y,o,a,s,e),y.mode&1&&T0(s,l,e),e=y,c=l;var S=e.updateQueue;if(S===null){var w=new Set;w.add(c),e.updateQueue=w}else S.add(c);break e}else{if(!(e&1)){T0(s,l,e),Mu();break e}c=Error(x(426))}}else if(q&&a.mode&1){var v=I0(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),M0(v,o,a,s,e),lu(_r(c,a));break e}}s=c=_r(c,a),le!==4&&(le=2),oi===null?oi=[s]:oi.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var f=ap(s,c,e);w0(s,f);break e;case 1:a=c;var m=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Kt===null||!Kt.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=lp(s,a,e);w0(s,k);break e}}s=s.return}while(s!==null)}Ip(n)}catch(T){e=T,oe===n&&n!==null&&(oe=n=n.return);continue}break}while(!0)}function Cp(){var t=po.current;return po.current=ho,t===null?ho:t}function Mu(){(le===0||le===3||le===2)&&(le=4),me===null||!(Mn&268435455)&&!(Ho&268435455)||Ot(me,ve)}function yo(t,e){var n=U;U|=2;var r=Cp();(me!==t||ve!==e)&&(vt=null,vn(t,e));do try{TS();break}catch(i){Ep(t,i)}while(!0);if(uu(),U=n,po.current=r,oe!==null)throw Error(x(261));return me=null,ve=0,le}function TS(){for(;oe!==null;)Tp(oe)}function IS(){for(;oe!==null&&!J2();)Tp(oe)}function Tp(t){var e=Pp(t.alternate,t,je);t.memoizedProps=t.pendingProps,e===null?Ip(t):oe=e,xu.current=null}function Ip(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wS(n,e),n!==null){n.flags&=32767,oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{le=6,oe=null;return}}else if(n=_S(n,e,je),n!==null){oe=n;return}if(e=e.sibling,e!==null){oe=e;return}oe=e=t}while(e!==null);le===0&&(le=5)}function fn(t,e,n){var r=W,i=Xe.transition;try{Xe.transition=null,W=1,MS(t,e,n,r)}finally{Xe.transition=i,W=r}return null}function MS(t,e,n,r){do lr();while(Ut!==null);if(U&6)throw Error(x(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(x(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(lw(t,s),t===me&&(oe=me=null,ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fs||(fs=!0,Np(Xs,function(){return lr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xe.transition,Xe.transition=null;var o=W;W=1;var a=U;U|=4,xu.current=null,kS(t,n),Sp(n,t),Yw(Rl),Zs=!!Nl,Rl=Nl=null,t.current=n,xS(n),Z2(),U=a,W=o,Xe.transition=s}else t.current=n;if(fs&&(fs=!1,Ut=t,go=i),s=t.pendingLanes,s===0&&(Kt=null),nw(n.stateNode),Fe(t,se()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(mo)throw mo=!1,t=Xl,Xl=null,t;return go&1&&t.tag!==0&&lr(),s=t.pendingLanes,s&1?t===Jl?ai++:(ai=0,Jl=t):ai=0,on(),null}function lr(){if(Ut!==null){var t=a1(go),e=Xe.transition,n=W;try{if(Xe.transition=null,W=16>t?16:t,Ut===null)var r=!1;else{if(t=Ut,Ut=null,go=0,U&6)throw Error(x(331));var i=U;for(U|=4,C=t.current;C!==null;){var s=C,o=s.child;if(C.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(C=l;C!==null;){var h=C;switch(h.tag){case 0:case 11:case 15:si(8,h,s)}var d=h.child;if(d!==null)d.return=h,C=d;else for(;C!==null;){h=C;var p=h.sibling,y=h.return;if(vp(h),h===l){C=null;break}if(p!==null){p.return=y,C=p;break}C=y}}}var S=s.alternate;if(S!==null){var w=S.child;if(w!==null){S.child=null;do{var v=w.sibling;w.sibling=null,w=v}while(w!==null)}}C=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,C=o;else e:for(;C!==null;){if(s=C,s.flags&2048)switch(s.tag){case 0:case 11:case 15:si(9,s,s.return)}var f=s.sibling;if(f!==null){f.return=s.return,C=f;break e}C=s.return}}var m=t.current;for(C=m;C!==null;){o=C;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,C=g;else e:for(o=m;C!==null;){if(a=C,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Wo(9,a)}}catch(T){te(a,a.return,T)}if(a===o){C=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,C=k;break e}C=a.return}}if(U=i,on(),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(Do,t)}catch{}r=!0}return r}finally{W=n,Xe.transition=e}}return!1}function B0(t,e,n){e=_r(n,e),e=ap(t,e,1),t=Yt(t,e,1),e=Ie(),t!==null&&(Wi(t,1,e),Fe(t,e))}function te(t,e,n){if(t.tag===3)B0(t,t,n);else for(;e!==null;){if(e.tag===3){B0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kt===null||!Kt.has(r))){t=_r(n,t),t=lp(e,t,1),e=Yt(e,t,1),t=Ie(),e!==null&&(Wi(e,1,t),Fe(e,t));break}}e=e.return}}function PS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ie(),t.pingedLanes|=t.suspendedLanes&n,me===t&&(ve&n)===n&&(le===4||le===3&&(ve&130023424)===ve&&500>se()-Cu?vn(t,0):Eu|=n),Fe(t,e)}function Mp(t,e){e===0&&(t.mode&1?(e=ns,ns<<=1,!(ns&130023424)&&(ns=4194304)):e=1);var n=Ie();t=Pt(t,e),t!==null&&(Wi(t,e,n),Fe(t,n))}function NS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Mp(t,n)}function RS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(x(314))}r!==null&&r.delete(e),Mp(t,n)}var Pp;Pp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||be.current)De=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return De=!1,vS(t,e,n);De=!!(t.flags&131072)}else De=!1,q&&e.flags&1048576&&L1(e,oo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ts(t,e),t=e.pendingProps;var i=mr(e,Ee.current);ar(e,n),i=vu(null,e,r,t,i,n);var s=_u();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oe(r)?(s=!0,io(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hu(e),i.updater=Bo,e.stateNode=i,i._reactInternals=e,zl(e,r,t,n),e=Hl(null,e,r,!0,s,n)):(e.tag=0,q&&s&&ou(e),Ce(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ts(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=LS(r),t=nt(r,t),i){case 0:e=Wl(null,e,r,t,n);break e;case 1:e=R0(null,e,r,t,n);break e;case 11:e=P0(null,e,r,t,n);break e;case 14:e=N0(null,e,r,nt(r.type,t),n);break e}throw Error(x(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:nt(r,i),Wl(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:nt(r,i),R0(t,e,r,i,n);case 3:e:{if(fp(e),t===null)throw Error(x(387));r=e.pendingProps,s=e.memoizedState,i=s.element,U1(t,e),co(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=_r(Error(x(423)),e),e=A0(t,e,r,n,i);break e}else if(r!==i){i=_r(Error(x(424)),e),e=A0(t,e,r,n,i);break e}else for(ze=Qt(e.stateNode.containerInfo.firstChild),Be=e,q=!0,it=null,n=F1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gr(),r===i){e=Nt(t,e,n);break e}Ce(t,e,r,n)}e=e.child}return e;case 5:return z1(e),t===null&&Fl(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Al(r,i)?o=null:s!==null&&Al(r,s)&&(e.flags|=32),dp(t,e),Ce(t,e,o,n),e.child;case 6:return t===null&&Fl(e),null;case 13:return hp(t,e,n);case 4:return pu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=yr(e,null,r,n):Ce(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:nt(r,i),P0(t,e,r,i,n);case 7:return Ce(t,e,e.pendingProps,n),e.child;case 8:return Ce(t,e,e.pendingProps.children,n),e.child;case 12:return Ce(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Q(ao,r._currentValue),r._currentValue=o,s!==null)if(dt(s.value,o)){if(s.children===i.children&&!be.current){e=Nt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Et(-1,n&-n),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var h=l.pending;h===null?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),jl(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(x(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),jl(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ce(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ar(e,n),i=Je(i),r=r(i),e.flags|=1,Ce(t,e,r,n),e.child;case 14:return r=e.type,i=nt(r,e.pendingProps),i=nt(r.type,i),N0(t,e,r,i,n);case 15:return cp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:nt(r,i),Ts(t,e),e.tag=1,Oe(r)?(t=!0,io(e)):t=!1,ar(e,n),op(e,r,i),zl(e,r,i,n),Hl(null,e,r,!0,t,n);case 19:return pp(t,e,n);case 22:return up(t,e,n)}throw Error(x(156,e.tag))};function Np(t,e){return r1(t,e)}function AS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qe(t,e,n,r){return new AS(t,e,n,r)}function Pu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function LS(t){if(typeof t=="function")return Pu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yc)return 11;if(t===Kc)return 14}return 2}function Xt(t,e){var n=t.alternate;return n===null?(n=qe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ps(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Pu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bn:return _n(n.children,i,s,e);case Qc:o=8,i|=8;break;case ul:return t=qe(12,n,e,i|2),t.elementType=ul,t.lanes=s,t;case dl:return t=qe(13,n,e,i),t.elementType=dl,t.lanes=s,t;case fl:return t=qe(19,n,e,i),t.elementType=fl,t.lanes=s,t;case zh:return Vo(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jh:o=10;break e;case Uh:o=9;break e;case Yc:o=11;break e;case Kc:o=14;break e;case Lt:o=16,r=null;break e}throw Error(x(130,t==null?t:typeof t,""))}return e=qe(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function _n(t,e,n,r){return t=qe(7,t,r,e),t.lanes=n,t}function Vo(t,e,n,r){return t=qe(22,t,r,e),t.elementType=zh,t.lanes=n,t.stateNode={isHidden:!1},t}function Oa(t,e,n){return t=qe(6,t,null,e),t.lanes=n,t}function Fa(t,e,n){return e=qe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function DS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ya(0),this.expirationTimes=ya(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ya(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nu(t,e,n,r,i,s,o,a,c){return t=new DS(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qe(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hu(s),t}function bS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Rp(t){if(!t)return tn;t=t._reactInternals;e:{if(bn(t)!==t||t.tag!==1)throw Error(x(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Oe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(x(171))}if(t.tag===1){var n=t.type;if(Oe(n))return R1(t,n,e)}return e}function Ap(t,e,n,r,i,s,o,a,c){return t=Nu(n,r,!0,t,i,s,o,a,c),t.context=Rp(null),n=t.current,r=Ie(),i=qt(n),s=Et(r,i),s.callback=e??null,Yt(n,s,i),t.current.lanes=i,Wi(t,i,r),Fe(t,r),t}function $o(t,e,n,r){var i=e.current,s=Ie(),o=qt(i);return n=Rp(n),e.context===null?e.context=n:e.pendingContext=n,e=Et(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yt(i,e,o),t!==null&&(ct(t,i,o,s),xs(t,i,o)),o}function vo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function W0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ru(t,e){W0(t,e),(t=t.alternate)&&W0(t,e)}function OS(){return null}var Lp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Au(t){this._internalRoot=t}Go.prototype.render=Au.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(x(409));$o(t,e,null,null)};Go.prototype.unmount=Au.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pn(function(){$o(null,t,null,null)}),e[Mt]=null}};function Go(t){this._internalRoot=t}Go.prototype.unstable_scheduleHydration=function(t){if(t){var e=u1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bt.length&&e!==0&&e<bt[n].priority;n++);bt.splice(n,0,t),n===0&&f1(t)}};function Lu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function H0(){}function FS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=vo(o);s.call(l)}}var o=Ap(e,r,t,0,null,!1,!1,"",H0);return t._reactRootContainer=o,t[Mt]=o.current,Ti(t.nodeType===8?t.parentNode:t),Pn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=vo(c);a.call(l)}}var c=Nu(t,0,!1,null,null,!1,!1,"",H0);return t._reactRootContainer=c,t[Mt]=c.current,Ti(t.nodeType===8?t.parentNode:t),Pn(function(){$o(e,c,n,r)}),c}function Yo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=vo(o);a.call(c)}}$o(e,o,t,i)}else o=FS(n,e,t,i,r);return vo(o)}l1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Gr(e.pendingLanes);n!==0&&(Jc(e,n|1),Fe(e,se()),!(U&6)&&(wr=se()+500,on()))}break;case 13:Pn(function(){var r=Pt(t,1);if(r!==null){var i=Ie();ct(r,t,1,i)}}),Ru(t,1)}};Zc=function(t){if(t.tag===13){var e=Pt(t,134217728);if(e!==null){var n=Ie();ct(e,t,134217728,n)}Ru(t,134217728)}};c1=function(t){if(t.tag===13){var e=qt(t),n=Pt(t,e);if(n!==null){var r=Ie();ct(n,t,e,r)}Ru(t,e)}};u1=function(){return W};d1=function(t,e){var n=W;try{return W=t,e()}finally{W=n}};kl=function(t,e,n){switch(e){case"input":if(ml(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=jo(r);if(!i)throw Error(x(90));Wh(r),ml(r,i)}}}break;case"textarea":Vh(t,n);break;case"select":e=n.value,e!=null&&rr(t,!!n.multiple,e,!1)}};Xh=Tu;Jh=Pn;var jS={usingClientEntryPoint:!1,Events:[Vi,$n,jo,Kh,qh,Tu]},Hr={findFiberByHostInstance:pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},US={bundleType:Hr.bundleType,version:Hr.version,rendererPackageName:Hr.rendererPackageName,rendererConfig:Hr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=t1(t),t===null?null:t.stateNode},findFiberByHostInstance:Hr.findFiberByHostInstance||OS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hs.isDisabled&&hs.supportsFiber)try{Do=hs.inject(US),mt=hs}catch{}}He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jS;He.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lu(e))throw Error(x(200));return bS(t,e,null,n)};He.createRoot=function(t,e){if(!Lu(t))throw Error(x(299));var n=!1,r="",i=Lp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Nu(t,1,!1,null,null,n,!1,r,i),t[Mt]=e.current,Ti(t.nodeType===8?t.parentNode:t),new Au(e)};He.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(x(188)):(t=Object.keys(t).join(","),Error(x(268,t)));return t=t1(e),t=t===null?null:t.stateNode,t};He.flushSync=function(t){return Pn(t)};He.hydrate=function(t,e,n){if(!Qo(e))throw Error(x(200));return Yo(null,t,e,!0,n)};He.hydrateRoot=function(t,e,n){if(!Lu(t))throw Error(x(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Lp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ap(e,null,t,1,n??null,i,!1,s,o),t[Mt]=e.current,Ti(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Go(e)};He.render=function(t,e,n){if(!Qo(e))throw Error(x(200));return Yo(null,t,e,!1,n)};He.unmountComponentAtNode=function(t){if(!Qo(t))throw Error(x(40));return t._reactRootContainer?(Pn(function(){Yo(null,null,t,!1,function(){t._reactRootContainer=null,t[Mt]=null})}),!0):!1};He.unstable_batchedUpdates=Tu;He.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qo(n))throw Error(x(200));if(t==null||t._reactInternals===void 0)throw Error(x(38));return Yo(t,e,n,!1,r)};He.version="18.3.1-next-f1338f8080-20240426";function Dp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dp)}catch(t){console.error(t)}}Dp(),Dh.exports=He;var zS=Dh.exports;const BS=()=>{const[t,e]=z.useState(u.pages.get());switch(z.useEffect(()=>{u.stats.data.forEach((i,s)=>u.stats.data[s].val=u.stats.get(i.id));const n=i=>{var o;if(u.storage.data=i,Object.values(u.settings).forEach(a=>a.forEach(c=>{u.storage.get(c.id)===void 0&&u.storage.set(c.id,c.default)})),u.storage.get("user-name")===void 0){const a=new Uint32Array(1);window.crypto.getRandomValues(a),u.storage.set("user-id",a[0].toString(36));const c=["Avid Arcade Classics User","Snake Player","Brick Breaker","Ping Ponger","Tetris Enjoyer","Asteroid Shooter","Fruit Eater","Mine Sweeper","Space Invader"];u.storage.set("user-name",c[Math.floor(Math.random()*c.length)]+" "+Math.floor(Math.random()*1e3))}u.stats.data.forEach((a,c)=>u.stats.data[c].val=u.stats.get(a.id)),u.storage.get("dark-mode")||(u.setCSSVar("background","#ffffff"),u.setCSSVar("accent","#f5f5f5"),u.setCSSVar("text","#000000"),u.setCSSVar("primary","#0d6efd")),u.storage.get("open-last-page")&&u.pages.set(localStorage.getItem("last-page")||""),u.storage.get("save-game")||u.games.data.forEach(a=>localStorage.removeItem("save-"+a.id)),window.oncontextmenu=a=>{var c;(c=u.eventListeners.data.click)==null||c.forEach(l=>l({button:"right",x:a.clientX-50,y:a.clientY})),u.storage.get("context-menu")||a.preventDefault()},u.eventListeners.add("click",((o=u.games.data.find(a=>a.id==="minesweeper"))==null?void 0:o.functions.click)||(()=>{}));const s=(a,c)=>{var l,h;if(u.games.keys[a.code]=c,c?(l=u.eventListeners.data.keyDown)==null||l.forEach(d=>d(a.code)):(h=u.eventListeners.data.keyUp)==null||h.forEach(d=>d(a.code)),u.storage.get("control-mode")==="wasd")switch(a.code){case"KeyW":u.games.keys.Up=c;break;case"KeyA":u.games.keys.Left=c;break;case"KeyS":u.games.keys.Down=c;break;case"KeyD":u.games.keys.Right=c;break}else switch(a.code){case"ArrowUp":u.games.keys.Up=c;break;case"ArrowLeft":u.games.keys.Left=c;break;case"ArrowDown":u.games.keys.Down=c;break;case"ArrowRight":u.games.keys.Right=c;break}switch(a.code){case"KeyW":u.games.keys.UpP1=c;break;case"KeyA":u.games.keys.LeftP1=c;break;case"KeyS":u.games.keys.DownP1=c;break;case"KeyD":u.games.keys.RightP1=c;break;case"ArrowUp":u.games.keys.UpP2=c;break;case"ArrowLeft":u.games.keys.LeftP2=c;break;case"ArrowDown":u.games.keys.DownP2=c;break;case"ArrowRight":u.games.keys.RightP2=c;break}switch(a.code){case u.storage.get("primary-key"):u.games.keys.Primary=c;break;case u.storage.get("secondary-key"):u.games.keys.Secondary=c;break}};window.onkeydown=a=>s(a,!0),window.onkeyup=a=>s(a,!1),al(nr(yn(),"Notifications"),a=>{a.val()&&Object.values(a.val()).forEach(c=>u.notification(c))}),setInterval(()=>al(nr(yn(),"Notifications"),a=>Object.values(a.val()).forEach(c=>u.notification(c))),6e4)};u.eventListeners.add("pageChange",i=>e(i));let r=localStorage.getItem("storage-mode");r==="sync"?(u.firefox?browser:chrome).storage.sync.get(null).then(i=>{i?n(i):(localStorage.setItem("storage-mode","sync"),n({}))}):r==="local"?n(JSON.parse(localStorage.getItem("storage")||"{}")):(localStorage.setItem("storage-mode","sync"),n({})),window.onerror=(i,s,o,a,c)=>{u.storage.get("report-errors")&&c2(nr(yn(),"Errors"),{Message:i,URL:s,Line:o,Column:a,Error:JSON.stringify(c),Version:u.version})}},[]),t.toLowerCase()){case"games":return _.jsx(A2,{});case"settings":return _.jsx(b2,{});case"profile":return _.jsx(D2,{});case"game":return _.jsx(N2,{});default:return _.jsx(L2,{})}},WS=()=>{const[t,e]=z.useState(u.pages.get());return z.useEffect(()=>{u.eventListeners.add("pageChange",e)},[]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"button material-icons"+(t===""||t==="home"?" active":""),onClick:()=>u.pages.set("home"),children:"home"}),_.jsx("div",{className:"button material-icons"+(t==="games"?" active":""),onClick:()=>u.pages.set("games"),children:"videogame_asset"}),_.jsx("div",{className:"button material-icons"+(t==="settings"?" active":""),onClick:()=>u.pages.set("settings"),children:"settings"}),_.jsx("div",{}),_.jsx("div",{className:"button profile material-icons"+(t==="profile"?" active":""),onClick:()=>u.pages.set("profile"),children:"account_circle"})]})},HS=()=>{const[t,e]=z.useState(!1);return z.useEffect(()=>{u.setShadow=e},[]),_.jsx(_.Fragment,{children:t?_.jsx("div",{className:"shadow"}):null})},VS=()=>{const[t,e]=z.useState([]);return z.useEffect(()=>{u.notification=n=>{u.storage.get("notification-"+n.id)||(n.achievement&&(n.time=5),e(r=>r.concat([n])))},setInterval(()=>{e(n=>n.filter(r=>r.achievement?(r.time===0&&u.storage.set("notification-"+r.id,!0),(r.time||1)>=0):!0)),e(n=>n.map(r=>({...r,time:r.time!==void 0&&r.achievement?r.time-1:void 0})))},1e3)},[]),_.jsx("div",{className:"notifications",children:t.map(n=>_.jsx(Ue,{type:n.achievement?"title":"custom",title:n.title,className:"notification",icon:"close",onClick:()=>{e(r=>r.filter(i=>i.id!==n.id)),u.storage.set("notification-"+n.id,!0)},children:n.message}))})};zS.render(_.jsxs(Jp.StrictMode,{children:[_.jsx(VS,{}),_.jsx(HS,{}),_.jsxs("div",{className:"ui",children:[_.jsx("div",{className:"sidebar",children:_.jsx(WS,{})}),_.jsx("div",{className:"page",children:_.jsx(BS,{})})]})]}),document.getElementById("root"));
