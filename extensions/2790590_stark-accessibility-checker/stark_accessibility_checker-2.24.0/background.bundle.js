(()=>{"use strict";chrome.action.onClicked.addListener((e=>{chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.scripting.executeScript({target:{tabId:e[0].id},files:["contentScript.bundle.js"]})}))})),chrome.runtime.onMessage.addListener((function(e,o,n){switch(console.log("Background: Received request: ",e.action),e.action){case"urlClick":chrome.tabs.create({url:e.url});break;case"performPageScan":return console.log("Sending"),console.log("Sending message to content script to scan document."),chrome.tabs.sendMessage(e.tabId,{action:"scanDocument",wcagVersion:e.wcagVersion,conformanceLevel:e.conformanceLevel},(e=>{chrome.runtime.lastError?console.log(chrome.runtime.lastError.message):(console.log("Received response",e),console.log("Sending data to panel"),n(e))})),!0;case"performElementScan":return console.log("Sending"),console.log("Sending message to content script to scan element."),chrome.tabs.sendMessage(e.tabId,{action:"scanSelectedElement",querySelector:e.querySelector,wcagVersion:e.wcagVersion,scanDepth:e.scanDepth},(e=>{chrome.runtime.lastError?console.log(chrome.runtime.lastError.message):(console.log("Received response",e),console.log("Sending data to panel"),n(e))})),!0;case"saveReport":chrome.tabs.sendMessage(e.tabId,{action:"saveReport",filename:e.filename,content:e.content})}n(!0)}))})();