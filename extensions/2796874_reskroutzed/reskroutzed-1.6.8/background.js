(()=>{"use strict";var e={72:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toggleContentVisibility=function(e){i("li.flagged-product",e),i("div.flagged-shelf",e),i("div.selected-product-cards",e),i("div.flagged-bought-together",e)};const n=o(928);function i(e,t){const o=document.querySelectorAll(e);null==o||o.forEach((e=>(0,n.toggleVisibility)(e,t)))}},994:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=o(72),s=o(461),r=o(316),a=o(34),l=o(339),d=o(169),c=o(529),u=o(411),p=o(870),h=o(770),g=o(107),v=o(326),f=o(228),m={visible:!0,language:l.Language.ENGLISH,sponsoredCount:0,sponsoredShelfCount:0,videoCount:0,darkMode:!1},S=new g.SponsoredShelfHandler(m),b=new c.PromotionalVideoHandler(m),y=new p.SponsoredProductHandler(m),C=new h.SponsoredProductListHandler(m),w=new u.SponsoredFBTHandler(m),L=new d.DarkModeHandler(m),E=new s.BlockIndicator(m),x=new a.PriceCheckerIndicator(m),P=new r.CorrectFinalPrice(m);!function(){function e(){b.flag(),S.flag(),y.flag(),C.flag(),w.flag()}window.onload=function(){return n(this,void 0,void 0,(function*(){yield function(){return n(this,void 0,void 0,(function*(){m.visible=(0,f.retrieveVisibility)(),m.language=(0,v.retrieveLanguage)(),document.body.appendChild(L.createDarkModeToggle()),e(),yield function(){return n(this,void 0,void 0,(function*(){(0,i.toggleContentVisibility)(m),yield x.start(),yield P.start()}))}(),E.addOrUpdate()}))}(),function(){const t=new MutationObserver((()=>e())),o=new MutationObserver((e=>{for(const t of e)"attributes"===t.type&&"id"===t.attributeName&&E.addOrUpdate()}));t.observe(document.body,{childList:!0,subtree:!0}),o.observe(document.body,{attributes:!0})}()}))}}(),chrome.runtime.onMessage.addListener(((e,t,o)=>{"getCount"===e.action&&o({sponsoredCount:m.sponsoredCount,sponsoredShelfCount:m.sponsoredShelfCount,videoCount:m.videoCount})}))},461:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BlockIndicator=void 0;const n=o(928),i=o(72),s={eyeOpenIcon:{viewBox:"0 0 16 16",path:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"},eyeSlashedIcon:{viewBox:"0 0 16 16",path:"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"}};t.BlockIndicator=class{constructor(e){this.state=e}addOrUpdate(){const e=document.getElementById("sponsored-flagger-button");e?this.updateDisplayText(e,!1):(this.addButtonToFiltersDesktop(),this.addButtonToOrderOptionsDesktop(),this.addButtonToFiltersMobile())}createSvgIcon(e){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width","16"),t.setAttribute("height","16"),t.setAttribute("viewBox",e.viewBox),t.classList.add("bi");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",e.path),o.setAttribute("fill","currentColor"),t.appendChild(o),t}updateDisplayText(e,t=!0){const o=t?"flagger-toggle-product-active":"flagger-toggle-list-active",i=(0,n.getSponsoredText)(!0,this.state.language),r=this.state.visible?s.eyeOpenIcon:s.eyeSlashedIcon;this.state.visible?e.classList.remove(o):e.classList.add(o),e.textContent="",e.appendChild(this.createSvgIcon(r));const a=document.createElement("span");a.style.marginRight="6px",e.appendChild(a);const l=document.createElement("span");l.textContent=`${i} (${this.state.sponsoredCount})`,e.appendChild(l)}createSponsoredIndicatorButton(e=!0){const t=document.createElement("button"),o=e?"flagger-toggle-product":"flagger-toggle-list";return t.classList.add(o),t.setAttribute("id","sponsored-flagger-button"),this.updateDisplayText(t,e),t.addEventListener("click",(()=>{this.state.visible=!this.state.visible,localStorage.setItem("ssf-sponsored-visibility",`${this.state.visible}`),this.updateDisplayText(t,e),(0,i.toggleContentVisibility)(this.state)})),t.setAttribute("type","button"),t}insertElement(e,t,o){e.insertBefore(t,o)}addButtonToFiltersDesktop(e){const t=document.querySelector("div.sku-actions-wrapper");t&&this.insertElement(t.parentNode,null!=e?e:this.createSponsoredIndicatorButton(!0),t)}addButtonToOrderOptionsDesktop(e){const t=document.getElementById("order-options");t&&this.insertElement(t.parentNode,null!=e?e:this.createSponsoredIndicatorButton(!1),t.nextSibling)}addButtonToFiltersMobile(e){const t=document.querySelector("div.switch-btn-wrapper");t&&this.insertElement(t.parentNode,null!=e?e:this.createSponsoredIndicatorButton(!0),t)}}},316:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CorrectFinalPrice=void 0;const i=o(339);t.CorrectFinalPrice=class{constructor(e){this.state=e}start(){return n(this,void 0,void 0,(function*(){this.finalPriceFixer(),this.shippingCostFixer()}))}finalPriceFixer(){const e=document.querySelector("label.toggle-switch-label");e&&(e.textContent+=this.state.language===i.Language.ENGLISH?" (with cash on delivery)":" (με αντικαταβολή)")}shippingCostFixer(){const e=document.querySelector(".price");if(!e)return;const t=document.querySelector("article.offering-card"),o=null==t?void 0:t.querySelector("em");if(!o)return;if(!o.parentElement)return;const n=o.parentElement.cloneNode(!0);n instanceof Element&&(n.classList.add("shipping-cost"),e.appendChild(n))}}},34:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PriceCheckerIndicator=void 0;const i=o(339),s=o(816),r=o(881),a=o(512),l=o(763);t.PriceCheckerIndicator=class{constructor(e){this.btsPrice=void 0,this.btsShippingCost=void 0,this.lowestPriceData=void 0,this.state=e}start(){return n(this,void 0,void 0,(function*(){const e=document.querySelector("article.offering-card");e&&(this.lowestPriceData=yield(0,a.marketDataReceiver)(),this.lowestPriceData&&(this.btsPrice=(0,r.buyThroughSkroutzRetriever)(),this.btsShippingCost=(0,s.buyThroughSkroutzShippingCostRetriever)(),this.insertPriceIndication(e)))}))}insertPriceIndication(e){const t=this.createPriceIndicationElement();e.insertBefore(t,e.children[1])}createPriceIndicationElement(){var e,t,o,n,s,r,a,d;const c=document.createElement("div"),u=document.createElement("div"),p=document.createElement("div"),h=document.createElement("div"),g=document.createElement("div"),v=document.createElement("div"),f=document.createElement("div"),m=null!==(e=this.btsShippingCost)&&void 0!==e?e:0;let S=!1;this.btsPrice&&this.lowestPriceData&&(S=this.btsPrice+m<=this.lowestPriceData.lowestTotalPrice);const b=S?"info-label-positive":"info-label-negative";c.classList.add("display-padding","inline-flex-row","price-checker-outline",b),u.classList.add("inline-flex-col"),p.classList.add("inline-flex-col"),h.classList.add("inline-flex-row"),g.classList.add("inline-flex-row"),v.classList.add("inline-flex-row"),f.classList.add("price");const y=document.createElement("span"),C=document.createElement("span"),w=document.createElement("span"),L=document.createElement("span"),E=document.createElement("span"),x=this.lowestPriceData?this.lowestPriceData.lowestTotalPrice:void 0,[P,k]=(null!==(n=null===(o=null===(t=this.lowestPriceData)||void 0===t?void 0:t.lowestProductPrice)||void 0===o?void 0:o.toFixed(2))&&void 0!==n?n:"?").split(".");y.textContent=",",C.textContent=k,w.textContent="€",y.classList.add("comma"),f.textContent=P,f.appendChild(y),f.appendChild(C),f.appendChild(w),f.appendChild(L),f.appendChild(E);const M=document.createElement("span"),_=document.createElement("span"),I=document.createElement("span"),A=document.createElement("span"),T=function(e,t=1e-10){return Math.abs(e)<t?0:e}((null!=x?x:0)-(null!==(s=this.btsPrice)&&void 0!==s?s:0)-m),D=0===(null===(r=this.lowestPriceData)||void 0===r?void 0:r.lowestShippingCost);T>0?(D?I.textContent=this.state.language===i.Language.ENGLISH?"Free shipping":"Δωρεάν μεταφορικά":(I.textContent=`  + ${null===(a=this.lowestPriceData)||void 0===a?void 0:a.lowestShippingCost}€`,A.textContent=this.state.language===i.Language.ENGLISH?"  shipping cost":"  μεταφορικά"),M.textContent=`  ${T.toFixed(2)}€`,_.textContent=this.state.language===i.Language.ENGLISH?"  more expensive":"  ακριβότερο"):T<0&&(D?I.textContent=this.state.language===i.Language.ENGLISH?"Free shipping":"Δωρεάν μεταφορικά":(I.textContent=`  + ${null===(d=this.lowestPriceData)||void 0===d?void 0:d.lowestShippingCost}€`,A.textContent=this.state.language===i.Language.ENGLISH?"  shipping cost":"  μεταφορικά"),M.textContent=`  ${T.toFixed(2)}€`,_.textContent=this.state.language===i.Language.ENGLISH?"  cheaper":"  φτηνότερο"),g.appendChild(I),g.appendChild(A),v.appendChild(M),v.appendChild(_),p.appendChild(g),p.appendChild(v),h.appendChild(f),h.appendChild(p),u.appendChild(h);const H=document.createElement("div");H.classList.add("align-center","font-bold"),H.textContent=this.state.language===i.Language.ENGLISH?'is the lowest price with shipping apart from "Buy through Skroutz"':'είναι η χαμηλότερη τιμή με μεταφορικά εκτός "Αγορά μέσω Skroutz"',H.classList.add("align-center","font-bold"),u.appendChild(H),(0,l.appendCreditChild)(u);const O=this.goToStoreButtonCreator(S);return u.appendChild(O),c.title=this.state.language===i.Language.ENGLISH?`(note that "Buy through Skroutz" is ${this.btsPrice}€ + ${m}€ shipping)`:`(σημειώστε ότι "Αγορά μέσω Skroutz" είναι ${this.btsPrice}€ + ${m}€ μεταφορικά)`,c.appendChild(u),c}goToStoreButtonCreator(e){const t=document.createElement("button"),o=e?"go-to-shop-button-positive":"go-to-shop-button-negative";return t.classList.add(o),t.textContent=this.state.language===i.Language.ENGLISH?"Go to Shop":"Μετάβαση στο κατάστημα",t.addEventListener("click",(()=>{var e;const t=`shop-${null===(e=this.lowestPriceData)||void 0===e?void 0:e.shopId}`,o=document.querySelectorAll(`#${t}`);if(o.length>0){const e=o.length>1?o[1]:o[0];e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),e.classList.add("lowest-price-store-highlight")}})),t}}},339:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.Language=void 0,function(e){e[e.ENGLISH=0]="ENGLISH",e[e.GREEK=1]="GREEK"}(o||(t.Language=o={}))},763:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.appendCreditChild=function(e){const t=document.createElement("div"),o=document.createElement("a");t.classList.add("icon-border","font-bold"),o.href="https://paypal.me/tsiakkas",o.textContent="by reSkroutzed",o.classList.add("icon-border","font-bold"),t.appendChild(o),(0,n.appendLogoChild)(t),e.appendChild(t)};const n=o(641)},641:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.appendLogoChild=function(e){const t=document.createElement("div");t.classList.add("align-center","icon-border");const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("viewBox","0 96 960 960"),o.setAttribute("width","18"),o.setAttribute("height","18");const n=document.createElement("img");n.src="https://raw.githubusercontent.com/keybraker/reskroutzed/main/src/assets/icons/128.png",n.alt="reSkroutzed",n.width=18,n.height=18,t.appendChild(n),e.appendChild(t)}},169:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DarkModeHandler=void 0;const n=o(641);t.DarkModeHandler=class{constructor(e){this.darkModeKey="ssf-dark-mode",this.state=e,this.initializeDarkMode()}initializeDarkMode(){const e="true"===localStorage.getItem(this.darkModeKey);this.state.darkMode=e,this.applyDarkMode()}applyDarkMode(){this.state.darkMode?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")}toggleDarkMode(){this.state.darkMode=!this.state.darkMode,localStorage.setItem(this.darkModeKey,String(this.state.darkMode)),this.applyDarkMode()}createDarkModeToggle(){const e=document.createElement("button"),t=document.createElement("div");e.classList.add("dark-mode-toggle"),t.classList.add("inline-flex-col");const o=this.createDarkModeIcon();return e.appendChild(o),(0,n.appendLogoChild)(e),e.addEventListener("click",(()=>this.toggleDarkMode())),e.addEventListener("mouseover",(()=>document.body.classList.add("dark-mode-hover"))),e.addEventListener("mouseout",(()=>document.body.classList.remove("dark-mode-hover"))),t.appendChild(e),t}createDarkModeIcon(){const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("width","16"),e.setAttribute("height","16");const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-3.03 0-5.5-2.47-5.5-5.5 0-1.82.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"),t.setAttribute("fill","currentColor"),e.appendChild(t),e}}},529:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PromotionalVideoHandler=void 0,t.PromotionalVideoHandler=class{constructor(e){this.state=e}flag(){var e;const t=document.querySelectorAll("li.flagged-video");this.state.videoCount=null!==(e=null==t?void 0:t.length)&&void 0!==e?e:0;const o=document.querySelectorAll("li:not(.flagged-video)");null==o||o.forEach((e=>this.updateVideoCountAndVisibility(e)))}updateVideoCountAndVisibility(e){(null==e?void 0:e.classList.contains("promo-video-card"))&&(this.state.videoCount++,e.classList.add("flagged-video"),this.state&&(this.state.visible?e.classList.remove("display-none-promo-product"):e.classList.add("display-none-promo-product")))}}},411:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SponsoredFBTHandler=void 0;const n=o(928);t.SponsoredFBTHandler=class{constructor(e){this.state=e}flag(){const e=this.getDivElements();null==e||e.forEach((e=>{const t=this.getSponsoredSpan(e);t&&(this.state.sponsoredCount++,this.flagSponsoredSpan(t),this.flagSponsoredDiv(e))}))}getDivElements(){return[...document.querySelectorAll("div.fbt-content:not(.flagged-bought-together)")]}getSponsoredSpan(e){const t=e.querySelector("span.sp-tag");return(0,n.isSponsored)(t)?t:null}flagSponsoredSpan(e){e.classList.add("sponsored-label"),(0,n.updateSponsoredTextSingle)(e,this.state.language)}flagSponsoredDiv(e){e.classList.add("flagged-bought-together")}}},870:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SponsoredProductHandler=void 0;const n=o(745),i=o(928);t.SponsoredProductHandler=class{constructor(e){this.state=e}flag(){var e,t,o,s;this.updateSponsoredCount();const r=document.querySelectorAll("li:not(.flagged-product)");null===(t=null===(e=[...r])||void 0===e?void 0:e.filter(this.isSponsored))||void 0===t||t.forEach((e=>{(0,n.flagProductListItem)(e),(0,i.updateSponsoredTextSingle)(e,this.state.language),this.state.sponsoredCount++,(0,i.toggleVisibility)(e,this.state)})),null===(s=null===(o=[...r])||void 0===o?void 0:o.filter(this.hasFlaggedLabelText))||void 0===s||s.forEach((e=>{(0,n.flagProductListItem)(e),(0,i.updateSponsoredTextSingle)(e,this.state.language),(0,i.toggleVisibility)(e,this.state)}))}updateSponsoredCount(){const e=document.querySelectorAll("li.flagged-product"),t=document.querySelectorAll("div.flagged-bought-together");0===(null==e?void 0:e.length)&&0===(null==t?void 0:t.length)&&(this.state.sponsoredCount=0)}isSponsored(e){const t=e.querySelector(".label-text");return!!(0,i.isSponsored)(t)}hasFlaggedLabelText(e){const t=e.querySelector(".label-text");return(0,n.isFlagged)(t)}}},770:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SponsoredProductListHandler=void 0;const n=o(928);t.SponsoredProductListHandler=class{constructor(e){this.state=e}flag(){var e,t;null===(t=null===(e=[...document.querySelectorAll("h2:not(.flagged-list-title)")])||void 0===e?void 0:e.filter(n.isSponsored))||void 0===t||t.forEach((e=>this.flagPromotedBox(e)))}flagPromotedBox(e){e.classList.add("flagged-list-title"),(0,n.updateSponsoredTextPlural)(e,this.state.language),(0,n.toggleVisibility)(e,this.state)}}},107:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SponsoredShelfHandler=void 0;const n=o(745),i=o(928);t.SponsoredShelfHandler=class{constructor(e){this.state=e}flag(){this.resetShelfCount(),[...document.querySelectorAll("h4:not(.flagged-shelf)")].filter(i.isSponsored).forEach((e=>this.updateShelfCountAndVisibility(e)))}resetShelfCount(){const e=document.querySelectorAll("h4.flagged-shelf");0===(null==e?void 0:e.length)&&(this.state.sponsoredShelfCount=0)}updateShelfCountAndVisibility(e){var t,o,s;this.state.sponsoredShelfCount++,e.classList.add("sponsored-label"),(0,i.updateSponsoredTextPlural)(e,this.state.language);const r=e.parentElement;if(r){r.classList.add("flagged-shelf"),(0,i.updateSponsoredTextSingle)(e,this.state.language),(0,i.toggleVisibility)(r,this.state);const a=null===(o=null===(t=null==r?void 0:r.children[2])||void 0===t?void 0:t.children[0])||void 0===o?void 0:o.children;a&&(null===(s=[...a])||void 0===s||s.forEach((e=>{this.state.sponsoredCount++,(0,n.flagProductListItem)(e),(0,i.updateSponsoredTextSingle)(e,this.state.language)})))}}}},881:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buyThroughSkroutzRetriever=function(){const e=document.querySelector(".price");return e?function(e){let t="";const o=e.querySelector("span.comma");if(!(null==o?void 0:o.previousSibling))return;t=`${t}${o.previousSibling.textContent}`;const n=e.querySelector("span.comma + span");if(!n)return;return t=`${t}.${n.textContent}`,parseFloat(t)}(e):void 0}},816:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buyThroughSkroutzShippingCostRetriever=function(){const e=document.querySelector("article.offering-card"),t=null==e?void 0:e.querySelector("em");return t?function(e){var t;if(!e)return;let o=null===(t=e.textContent)||void 0===t?void 0:t.replace(/[^0-9,]/g,"");return o=null==o?void 0:o.replace(",","."),o?parseFloat(o):void 0}(t):void 0}},326:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveLanguage=function(){return"el"===document.documentElement.lang?n.Language.GREEK:n.Language.ENGLISH};const n=o(339)},512:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.marketDataReceiver=function(){return o(this,void 0,void 0,(function*(){try{const e=function(){const e=document.querySelector('meta[itemprop="sku"]');return e?e.content:null}();if(!e)throw new Error("Failed to fetch product SKU");const t=yield fetch(`https://www.skroutz.gr/s/${e}/filter_products.json`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Failed to fetch (HTTP: ${t.status}) price data for product with SKU ${e}`);const o=(yield t.json()).product_cards;let n=0,i=Number.MAX_VALUE,s=Number.MAX_VALUE,r=Number.MAX_VALUE;if(Object.values(o).forEach((e=>{const t=e.raw_price+e.shipping_cost;t<i&&(i=t,s=e.raw_price,r=e.shipping_cost,n=e.shop_id)})),i===Number.MAX_VALUE)throw new Error("No available products found");return{lowestProductPrice:s,lowestShippingCost:r,lowestTotalPrice:i,shopId:n}}catch(e){return void console.error("There was a problem with the fetch operation:",e)}}))}},228:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveVisibility=function(){const e=localStorage.getItem("ssf-sponsored-visibility");return null!==e?"true"===e:(localStorage.setItem("ssf-sponsored-visibility","true"),!0)}},745:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isFlagged=function(e){return!(!e||!(null==e?void 0:e.textContent))&&["Sponsored Stores","Προωθούμενα Καταστήματα","Sponsored Store","Προωθούμενo Κατάστημα"].includes(e.textContent)},t.flagProductListItem=function(e){e.classList.add("flagged-product"),function(e){const t=e.querySelector("a.image");t&&t.classList.add("flagged-product-image")}(e),function(e){const t=e.querySelector(".label-text");t&&t.classList.add("flagged-product-label")}(e)}},928:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toggleVisibility=function(e,t){t.visible?e.classList.remove("display-none"):e.classList.add("display-none")},t.getSponsoredText=i,t.updateSponsoredTextPlural=function(e,t){if(s(e))return e.classList.add("sponsored-label"),void(e.textContent=i(!0,t));const o=e.querySelector(".label-text");o&&(o.classList.add("sponsored-label"),o.textContent=i(!0,t))},t.updateSponsoredTextSingle=function(e,t){if(s(e))return e.classList.add("sponsored-label"),void(e.textContent=i(!1,t));const o=e.querySelector(".label-text");o&&(o.classList.add("sponsored-label"),o.textContent=i(!1,t))},t.isSponsored=s;const n=o(339);function i(e=!1,t){return e?t===n.Language.ENGLISH?"Sponsored Stores":"Προωθούμενα Καταστήματα":t===n.Language.ENGLISH?"Sponsored Store":"Προωθούμενo Κατάστημα"}function s(e){return!(!e||!e.textContent)&&["Επιλεγμένο κατάστημα","Eπιλεγμένο κατάστημα","Selected shop","Επιλεγμένα καταστήματα","Eπιλεγμένα καταστήματα","Selected shops","Sponsored","Sponsored Store","Ad","Advertisement","Advertisement"].includes(e.textContent.trim())}}},t={};!function o(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,o),s.exports}(994)})();