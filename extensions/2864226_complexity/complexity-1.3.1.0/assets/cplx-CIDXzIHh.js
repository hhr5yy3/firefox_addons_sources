import{_ as M,k as S,l as B,m as k,n as L,o as w,p as x,s as q,t as I,u as D,v as R,w as V,x as E,y as N,z as H,A as K,B as Q,C as U,h as J,d as W,q as X,a as c,D as Y}from"./cplx-CVsLL7Ku.js";import{g as Z}from"./cplx-BbAh7E-i.js";import{b as A,_ as z,i as g}from"./cplx-CzQHx1MX.js";import{c as ee}from"./cplx-M4JPizzD.js";import{P as re}from"./cplx-AFeO3sEC.js";var te=M,ne=S;function ae(r,e,t){(t!==void 0&&!ne(r[e],t)||t===void 0&&!(e in r))&&te(r,e,t)}var F=ae;function ie(r){return function(e,t,a){for(var n=-1,s=Object(e),o=a(e),i=o.length;i--;){var l=o[r?i:++n];if(t(s[l],l,s)===!1)break}return e}}var se=ie,oe=se,le=oe(),ue=le,ce=B,fe=A;function de(r){return fe(r)&&ce(r)}var ve=de,ge=z,pe=k,ye=A,be="[object Object]",_e=Function.prototype,Oe=Object.prototype,P=_e.toString,$e=Oe.hasOwnProperty,Ce=P.call(Object);function he(r){if(!ye(r)||ge(r)!=be)return!1;var e=pe(r);if(e===null)return!0;var t=$e.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&P.call(t)==Ce}var me=he;function Se(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}var T=Se,Be=L,we=w;function Ae(r){return Be(r,we(r))}var Fe=Ae,b=F,Pe=x,Te=q,Ge=I,je=D,_=R,O=V,Me=ve,ke=E,Le=N,xe=g,qe=me,Ie=H,$=T,De=Fe;function Re(r,e,t,a,n,s,o){var i=$(r,t),l=$(e,t),p=o.get(l);if(p){b(r,t,p);return}var u=s?s(i,l,t+"",r,e,o):void 0,f=u===void 0;if(f){var d=O(l),v=!d&&ke(l),y=!d&&!v&&Ie(l);u=l,d||v||y?O(i)?u=i:Me(i)?u=Ge(i):v?(f=!1,u=Pe(l,!0)):y?(f=!1,u=Te(l,!0)):u=[]:qe(l)||_(l)?(u=i,_(i)?u=De(i):(!xe(i)||Le(i))&&(u=je(l))):f=!1}f&&(o.set(l,u),n(u,l,a,s,o),o.delete(l)),b(r,t,u)}var Ve=Re,Ee=K,Ne=F,He=ue,Ke=Ve,Qe=g,Ue=w,Je=T;function G(r,e,t,a,n){r!==e&&He(e,function(s,o){if(n||(n=new Ee),Qe(s))Ke(r,e,o,t,G,a,n);else{var i=a?a(Je(r,o),s,o+"",r,e,n):void 0;i===void 0&&(i=s),Ne(r,o,i)}},Ue)}var We=G;function Xe(r){return r}var j=Xe;function Ye(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}var Ze=Ye,ze=Ze,C=Math.max;function er(r,e,t){return e=C(e===void 0?r.length-1:e,0),function(){for(var a=arguments,n=-1,s=C(a.length-e,0),o=Array(s);++n<s;)o[n]=a[e+n];n=-1;for(var i=Array(e+1);++n<e;)i[n]=a[n];return i[e]=t(o),ze(r,this,i)}}var rr=er;function tr(r){return function(){return r}}var nr=tr,ar=nr,h=Q,ir=j,sr=h?function(r,e){return h(r,"toString",{configurable:!0,enumerable:!1,value:ar(e),writable:!0})}:ir,or=sr,lr=800,ur=16,cr=Date.now;function fr(r){var e=0,t=0;return function(){var a=cr(),n=ur-(a-t);if(t=a,n>0){if(++e>=lr)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}var dr=fr,vr=or,gr=dr,pr=gr(vr),yr=pr,br=j,_r=rr,Or=yr;function $r(r,e){return Or(_r(r,e,br),r+"")}var Cr=$r,hr=S,mr=B,Sr=U,Br=g;function wr(r,e,t){if(!Br(t))return!1;var a=typeof e;return(a=="number"?mr(t)&&Sr(e,t.length):a=="string"&&e in t)?hr(t[e],r):!1}var Ar=wr,Fr=Cr,Pr=Ar;function Tr(r){return Fr(function(e,t){var a=-1,n=t.length,s=n>1?t[n-1]:void 0,o=n>2?t[2]:void 0;for(s=r.length>3&&typeof s=="function"?(n--,s):void 0,o&&Pr(t[0],t[1],o)&&(s=n<3?void 0:s,n=1),e=Object(e);++a<n;){var i=t[a];i&&r(e,i,a,s)}return e})}var Gr=Tr,jr=We,Mr=Gr,kr=Mr(function(r,e,t){jr(r,e,t)}),Lr=kr;const xr=Z(Lr),qr=J("betterCodeBlocksFineGrainedOptions",{list:{queryKey:null,queryFn:()=>m().getAll()},get:r=>({queryKey:[{language:r}],queryFn:()=>m().get(r)})});class Ir{async add(e){return await c.betterCodeBlocks.add(e)}async get(e){return await c.betterCodeBlocks.get(e)??null}async getAll(){return await c.betterCodeBlocks.toArray()}async update(e){return await c.betterCodeBlocks.put(e),e.language}async updateDraft({language:e,newDraft:t}){const a=await this.get(e);if(!a)throw new Error("Language not found");const n=Y(a,s=>xr(s,t));return await c.betterCodeBlocks.update(e,n),e}async delete(e){await c.betterCodeBlocks.delete(e)}}const[Hr,m]=W("BetterCodeBlocksFineGrainedOptionsService",()=>new Ir);ee.register({id:"cache:betterCodeBlocksFineGrainedOptions",loader:async()=>{const{pluginsEnableStates:r}=re.getCachedSync();r!=null&&r["thread:betterCodeBlocks"]&&await X.prefetchQuery({...qr.list,gcTime:1/0})}});export{qr as b,m as g,Hr as r};
