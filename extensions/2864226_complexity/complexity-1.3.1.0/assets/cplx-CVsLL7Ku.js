import{r as _o,R as Ao,c as xo}from"./cplx-M4JPizzD.js";import{z as Q,p as ha,Z as So,w as di}from"./cplx-Cdcyb6EG.js";import{d as Po,_ as Hn,i as an,a as Ye,b as sn,c as Co,e as To}from"./cplx-CzQHx1MX.js";import{g as Gn,c as zr}from"./cplx-BbAh7E-i.js";var ts=Symbol.for("immer-nothing"),hi=Symbol.for("immer-draftable"),$e=Symbol.for("immer-state");function Le(e,...n){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Et=Object.getPrototypeOf;function Mt(e){return!!e&&!!e[$e]}function gt(e){var n;return e?ns(e)||Array.isArray(e)||!!e[hi]||!!((n=e.constructor)!=null&&n[hi])||Qn(e)||Wn(e):!1}var ko=Object.prototype.constructor.toString();function ns(e){if(!e||typeof e!="object")return!1;const n=Et(e);if(n===null)return!0;const i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object?!0:typeof i=="function"&&Function.toString.call(i)===ko}function Bn(e,n){zn(e)===0?Reflect.ownKeys(e).forEach(i=>{n(i,e[i],e)}):e.forEach((i,u)=>n(u,i,e))}function zn(e){const n=e[$e];return n?n.type_:Array.isArray(e)?1:Qn(e)?2:Wn(e)?3:0}function Qr(e,n){return zn(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function rs(e,n,i){const u=zn(e);u===2?e.set(n,i):u===3?e.add(i):e[n]=i}function Oo(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}function Qn(e){return e instanceof Map}function Wn(e){return e instanceof Set}function pt(e){return e.copy_||e.base_}function Wr(e,n){if(Qn(e))return new Map(e);if(Wn(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const i=ns(e);if(n===!0||n==="class_only"&&!i){const u=Object.getOwnPropertyDescriptors(e);delete u[$e];let h=Reflect.ownKeys(u);for(let A=0;A<h.length;A++){const T=h[A],S=u[T];S.writable===!1&&(S.writable=!0,S.configurable=!0),(S.get||S.set)&&(u[T]={configurable:!0,writable:!0,enumerable:S.enumerable,value:e[T]})}return Object.create(Et(e),u)}else{const u=Et(e);if(u!==null&&i)return{...e};const h=Object.create(u);return Object.assign(h,e)}}function pa(e,n=!1){return Yn(e)||Mt(e)||!gt(e)||(zn(e)>1&&(e.set=e.add=e.clear=e.delete=Eo),Object.freeze(e),n&&Object.entries(e).forEach(([i,u])=>pa(u,!0))),e}function Eo(){Le(2)}function Yn(e){return Object.isFrozen(e)}var Mo={};function yt(e){const n=Mo[e];return n||Le(0,e),n}var en;function as(){return en}function Fo(e,n){return{drafts_:[],parent_:e,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function pi(e,n){n&&(yt("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function Yr(e){Zr(e),e.drafts_.forEach(jo),e.drafts_=null}function Zr(e){e===en&&(en=e.parent_)}function mi(e){return en=Fo(en,e)}function jo(e){const n=e[$e];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function gi(e,n){n.unfinalizedDrafts_=n.drafts_.length;const i=n.drafts_[0];return e!==void 0&&e!==i?(i[$e].modified_&&(Yr(n),Le(4)),gt(e)&&(e=Rn(n,e),n.parent_||Ln(n,e)),n.patches_&&yt("Patches").generateReplacementPatches_(i[$e].base_,e,n.patches_,n.inversePatches_)):e=Rn(n,i,[]),Yr(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==ts?e:void 0}function Rn(e,n,i){if(Yn(n))return n;const u=n[$e];if(!u)return Bn(n,(h,A)=>yi(e,u,n,h,A,i)),n;if(u.scope_!==e)return n;if(!u.modified_)return Ln(e,u.base_,!0),u.base_;if(!u.finalized_){u.finalized_=!0,u.scope_.unfinalizedDrafts_--;const h=u.copy_;let A=h,T=!1;u.type_===3&&(A=new Set(h),h.clear(),T=!0),Bn(A,(S,M)=>yi(e,u,h,S,M,i,T)),Ln(e,h,!1),i&&e.patches_&&yt("Patches").generatePatches_(u,i,e.patches_,e.inversePatches_)}return u.copy_}function yi(e,n,i,u,h,A,T){if(Mt(h)){const S=A&&n&&n.type_!==3&&!Qr(n.assigned_,u)?A.concat(u):void 0,M=Rn(e,h,S);if(rs(i,u,M),Mt(M))e.canAutoFreeze_=!1;else return}else T&&i.add(h);if(gt(h)&&!Yn(h)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Rn(e,h),(!n||!n.scope_.parent_)&&typeof u!="symbol"&&Object.prototype.propertyIsEnumerable.call(i,u)&&Ln(e,h)}}function Ln(e,n,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&pa(n,i)}function Do(e,n){const i=Array.isArray(e),u={type_:i?1:0,scope_:n?n.scope_:as(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let h=u,A=ma;i&&(h=[u],A=tn);const{revoke:T,proxy:S}=Proxy.revocable(h,A);return u.draft_=S,u.revoke_=T,S}var ma={get(e,n){if(n===$e)return e;const i=pt(e);if(!Qr(i,n))return $o(e,i,n);const u=i[n];return e.finalized_||!gt(u)?u:u===Nr(e.base_,n)?(Ur(e),e.copy_[n]=Xr(u,e)):u},has(e,n){return n in pt(e)},ownKeys(e){return Reflect.ownKeys(pt(e))},set(e,n,i){const u=is(pt(e),n);if(u!=null&&u.set)return u.set.call(e.draft_,i),!0;if(!e.modified_){const h=Nr(pt(e),n),A=h==null?void 0:h[$e];if(A&&A.base_===i)return e.copy_[n]=i,e.assigned_[n]=!1,!0;if(Oo(i,h)&&(i!==void 0||Qr(e.base_,n)))return!0;Ur(e),Jr(e)}return e.copy_[n]===i&&(i!==void 0||n in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[n])||(e.copy_[n]=i,e.assigned_[n]=!0),!0},deleteProperty(e,n){return Nr(e.base_,n)!==void 0||n in e.base_?(e.assigned_[n]=!1,Ur(e),Jr(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0},getOwnPropertyDescriptor(e,n){const i=pt(e),u=Reflect.getOwnPropertyDescriptor(i,n);return u&&{writable:!0,configurable:e.type_!==1||n!=="length",enumerable:u.enumerable,value:i[n]}},defineProperty(){Le(11)},getPrototypeOf(e){return Et(e.base_)},setPrototypeOf(){Le(12)}},tn={};Bn(ma,(e,n)=>{tn[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});tn.deleteProperty=function(e,n){return tn.set.call(this,e,n,void 0)};tn.set=function(e,n,i){return ma.set.call(this,e[0],n,i,e[0])};function Nr(e,n){const i=e[$e];return(i?pt(i):e)[n]}function $o(e,n,i){var h;const u=is(n,i);return u?"value"in u?u.value:(h=u.get)==null?void 0:h.call(e.draft_):void 0}function is(e,n){if(!(n in e))return;let i=Et(e);for(;i;){const u=Object.getOwnPropertyDescriptor(i,n);if(u)return u;i=Et(i)}}function Jr(e){e.modified_||(e.modified_=!0,e.parent_&&Jr(e.parent_))}function Ur(e){e.copy_||(e.copy_=Wr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Io=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(n,i,u)=>{if(typeof n=="function"&&typeof i!="function"){const A=i;i=n;const T=this;return function(M=A,...O){return T.produce(M,E=>i.call(this,E,...O))}}typeof i!="function"&&Le(6),u!==void 0&&typeof u!="function"&&Le(7);let h;if(gt(n)){const A=mi(this),T=Xr(n,void 0);let S=!0;try{h=i(T),S=!1}finally{S?Yr(A):Zr(A)}return pi(A,u),gi(h,A)}else if(!n||typeof n!="object"){if(h=i(n),h===void 0&&(h=n),h===ts&&(h=void 0),this.autoFreeze_&&pa(h,!0),u){const A=[],T=[];yt("Patches").generateReplacementPatches_(n,h,A,T),u(A,T)}return h}else Le(1,n)},this.produceWithPatches=(n,i)=>{if(typeof n=="function")return(T,...S)=>this.produceWithPatches(T,M=>n(M,...S));let u,h;return[this.produce(n,i,(T,S)=>{u=T,h=S}),u,h]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){gt(e)||Le(8),Mt(e)&&(e=Bo(e));const n=mi(this),i=Xr(e,void 0);return i[$e].isManual_=!0,Zr(n),i}finishDraft(e,n){const i=e&&e[$e];(!i||!i.isManual_)&&Le(9);const{scope_:u}=i;return pi(u,n),gi(void 0,u)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,n){let i;for(i=n.length-1;i>=0;i--){const h=n[i];if(h.path.length===0&&h.op==="replace"){e=h.value;break}}i>-1&&(n=n.slice(i+1));const u=yt("Patches").applyPatches_;return Mt(e)?u(e,n):this.produce(e,h=>u(h,n))}};function Xr(e,n){const i=Qn(e)?yt("MapSet").proxyMap_(e,n):Wn(e)?yt("MapSet").proxySet_(e,n):Do(e,n);return(n?n.scope_:as()).drafts_.push(i),i}function Bo(e){return Mt(e)||Le(10,e),ss(e)}function ss(e){if(!gt(e)||Yn(e))return e;const n=e[$e];let i;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,i=Wr(e,n.scope_.immer_.useStrictShallowCopy_)}else i=Wr(e,!0);return Bn(i,(u,h)=>{rs(i,u,ss(h))}),n&&(n.finalized_=!1),i}var Ie=new Io,Ro=Ie.produce;Ie.produceWithPatches.bind(Ie);Ie.setAutoFreeze.bind(Ie);Ie.setUseStrictShallowCopy.bind(Ie);Ie.applyPatches.bind(Ie);Ie.createDraft.bind(Ie);Ie.finishDraft.bind(Ie);class kt{static async get(){return await chrome.storage.local.get()}static async set(n){await chrome.storage.local.set(n)}static async listen(n){chrome.storage.local.onChanged.addListener(i=>{n(i)})}}const Lo=["dashboard","perplexity"],py={dashboard:"Open extension's Dashboard",perplexity:"Open a new instance of perplexity.ai"},os=Q.object({stickyHeader:Q.boolean(),unwrap:Q.object({enabled:Q.boolean(),showToggleButton:Q.boolean()}),maxHeight:Q.object({enabled:Q.boolean(),collapseByDefault:Q.boolean(),value:Q.number(),showToggleButton:Q.boolean()})});os.extend({language:Q.string(),placeholderText:Q.object({enabled:Q.boolean(),title:Q.string(),idle:Q.string(),loading:Q.string()})});const he=Q.object({enabled:Q.boolean()}),us=Q.object({"queryBox:languageModelSelector":he.extend({main:Q.boolean(),followUp:Q.boolean(),changeTimezone:Q.boolean()}),"queryBox:fullWidthFollowUp":he,"queryBox:focusSelector":he.extend({mode:Q.enum(["persistent","default"]).nullable(),defaultFocusMode:Q.string().transform(e=>e).nullable()}),"queryBox:focusSelector:webRecency":he,"queryBox:spaceNavigator":he,"queryBox:slashCommandMenu:promptHistory":he.extend({trigger:Q.object({onSubmit:Q.boolean(),onNavigation:Q.boolean()}),showTriggerButton:Q.boolean()}),"queryBox:noFileCreationOnPaste":he,commandMenu:he.extend({hotkey:Q.array(Q.string())}),"queryBox:submitOnCtrlEnter":he,"thread:toc":he,"thread:betterMessageToolbars":he.extend({sticky:Q.boolean(),simplifyRewriteDropdown:Q.boolean(),explicitModelName:Q.boolean(),hideUnnecessaryButtons:Q.boolean(),wordsAndCharactersCount:Q.boolean(),tokensCount:Q.boolean(),collapsibleQuery:Q.boolean()}),"thread:betterCodeBlocks":he.merge(os),"thread:canvas":he,"thread:exportThread":he,"thread:betterMessageCopyButtons":he,"thread:dragAndDropFileToUploadInThread":he,"thread:collapseEmptyThreadVisualCols":he,imageGenModelSelector:he,onCloudflareTimeoutAutoReload:he.extend({behavior:Q.enum(["reload","warn-only"])}),"thread:customThreadContainerWidth":he.extend({value:Q.number()}),blockAnalyticEvents:he,"home:customSlogan":he.extend({slogan:Q.string()}),"hide-get-mobile-app-cta-btn":he,zenMode:he.extend({persistent:Q.boolean(),lastState:Q.boolean(),alwaysHideRelatedQuestions:Q.boolean(),alwaysHideHomepageWidgets:Q.boolean(),alwaysHideVisualCols:Q.boolean()})});function my(e){return Object.keys(us.shape).includes(e)}const vi=Q.object({schemaVersion:Q.literal(ha.version),previousVersion:Q.string().optional(),plugins:us,favoritePluginIds:Q.array(Q.string()),theme:Q.string(),preloadTheme:Q.boolean(),energySavingMode:Q.boolean(),extensionIconAction:Q.enum(Lo),cdnLastUpdated:Q.number(),devMode:Q.boolean()});var qo=e=>{let n=Object.keys(e).sort((i,u)=>i.localeCompare(u));if(n.some(i=>i.startsWith("_")))throw new Error('Keys that start with "_" are reserved for Query Key Factory');return n};function Pe(e){return Object.assign(Object.create(null),e)}function No(e,n){let i={_def:[e]};if(n==null)return Pe(i);let u=(A,T)=>qo(A).reduce((S,M)=>{let O=A[M],E=[...T,M],L=Z=>Array.isArray(Z),G;if(typeof O=="function"){let Z=(...Y)=>{let V=O(...Y);if(L(V))return Pe({queryKey:[...E,...V]});let z=[...E,...V.queryKey];if("queryFn"in V){let J={queryKey:z,queryFn:V.queryFn};if("contextQueries"in V){let pe=u(V.contextQueries,z);return Pe({_ctx:Pe(Object.fromEntries(pe)),...J})}return Pe({...J})}if("contextQueries"in V){let J=u(V.contextQueries,z);return Pe({_ctx:Pe(Object.fromEntries(J)),queryKey:z})}return Pe({queryKey:z})};Z._def=E,G=Z}else if(O==null)G=Pe({queryKey:E});else if(L(O))G=Pe({_def:E,queryKey:[...E,...O]});else if("queryFn"in O){let Z={...O.queryKey?{_def:E}:void 0},Y=[...E,...O.queryKey??[]],V={queryKey:Y,queryFn:O.queryFn};if("contextQueries"in O){let z=u(O.contextQueries,Y);G=Pe({_ctx:Pe(Object.fromEntries(z)),...Z,...V})}else G=Pe({...Z,...V})}else if("contextQueries"in O){let Z={...O.queryKey?{_def:E}:void 0},Y=[...E,...O.queryKey??[]],V=u(O.contextQueries,Y);G=Pe({_ctx:Pe(Object.fromEntries(V)),queryKey:Y,...Z})}else{let Z={...O.queryKey?{_def:E}:void 0},Y=[...E,...O.queryKey??[]];G=Pe({queryKey:Y,...Z})}return S.set(M,G),S},new Map),h=u(n,i._def);return Pe({...Object.fromEntries(h),...i})}var Zn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jn=typeof window>"u"||"Deno"in globalThis;function Re(){}function Uo(e,n){return typeof e=="function"?e(n):e}function Vo(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ho(e,n){return Math.max(e+(n||0)-Date.now(),0)}function bi(e,n){return typeof e=="function"?e(n):e}function Go(e,n){return typeof e=="function"?e(n):e}function wi(e,n){const{type:i="all",exact:u,fetchStatus:h,predicate:A,queryKey:T,stale:S}=e;if(T){if(u){if(n.queryHash!==ga(T,n.options))return!1}else if(!rn(n.queryKey,T))return!1}if(i!=="all"){const M=n.isActive();if(i==="active"&&!M||i==="inactive"&&M)return!1}return!(typeof S=="boolean"&&n.isStale()!==S||h&&h!==n.state.fetchStatus||A&&!A(n))}function _i(e,n){const{exact:i,status:u,predicate:h,mutationKey:A}=e;if(A){if(!n.options.mutationKey)return!1;if(i){if(nn(n.options.mutationKey)!==nn(A))return!1}else if(!rn(n.options.mutationKey,A))return!1}return!(u&&n.state.status!==u||h&&!h(n))}function ga(e,n){return((n==null?void 0:n.queryKeyHashFn)||nn)(e)}function nn(e){return JSON.stringify(e,(n,i)=>Kr(i)?Object.keys(i).sort().reduce((u,h)=>(u[h]=i[h],u),{}):i)}function rn(e,n){return e===n?!0:typeof e!=typeof n?!1:e&&n&&typeof e=="object"&&typeof n=="object"?!Object.keys(n).some(i=>!rn(e[i],n[i])):!1}function cs(e,n){if(e===n)return e;const i=Ai(e)&&Ai(n);if(i||Kr(e)&&Kr(n)){const u=i?e:Object.keys(e),h=u.length,A=i?n:Object.keys(n),T=A.length,S=i?[]:{};let M=0;for(let O=0;O<T;O++){const E=i?O:A[O];(!i&&u.includes(E)||i)&&e[E]===void 0&&n[E]===void 0?(S[E]=void 0,M++):(S[E]=cs(e[E],n[E]),S[E]===e[E]&&e[E]!==void 0&&M++)}return h===T&&M===h?e:S}return n}function gy(e,n){if(!n||Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}function Ai(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Kr(e){if(!xi(e))return!1;const n=e.constructor;if(n===void 0)return!0;const i=n.prototype;return!(!xi(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function xi(e){return Object.prototype.toString.call(e)==="[object Object]"}function zo(e){return new Promise(n=>{setTimeout(n,e)})}function Qo(e,n,i){return typeof i.structuralSharing=="function"?i.structuralSharing(e,n):i.structuralSharing!==!1?cs(e,n):n}function yy(e){return e}function Wo(e,n,i=0){const u=[...e,n];return i&&u.length>i?u.slice(1):u}function Yo(e,n,i=0){const u=[n,...e];return i&&u.length>i?u.slice(0,-1):u}var ya=Symbol();function ls(e,n){return!e.queryFn&&(n!=null&&n.initialPromise)?()=>n.initialPromise:!e.queryFn||e.queryFn===ya?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Zo=class extends Zn{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Jn&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){var e;this.hasListeners()||((e=this.#t)==null||e.call(this),this.#t=void 0)}setEventListener(e){var n;this.#n=e,(n=this.#t)==null||n.call(this),this.#t=e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof this.#e=="boolean"?this.#e:((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},fs=new Zo,Jo=class extends Zn{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Jn&&window.addEventListener){const n=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",i)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){var e;this.hasListeners()||((e=this.#t)==null||e.call(this),this.#t=void 0)}setEventListener(e){var n;this.#n=e,(n=this.#t)==null||n.call(this),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(i=>{i(e)}))}isOnline(){return this.#e}},qn=new Jo;function Xo(){let e,n;const i=new Promise((h,A)=>{e=h,n=A});i.status="pending",i.catch(()=>{});function u(h){Object.assign(i,h),delete i.resolve,delete i.reject}return i.resolve=h=>{u({status:"fulfilled",value:h}),e(h)},i.reject=h=>{u({status:"rejected",reason:h}),n(h)},i}function Ko(e){return Math.min(1e3*2**e,3e4)}function ds(e){return(e??"online")==="online"?qn.isOnline():!0}var hs=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Vr(e){return e instanceof hs}function ps(e){let n=!1,i=0,u=!1,h;const A=Xo(),T=V=>{var z;u||(G(new hs(V)),(z=e.abort)==null||z.call(e))},S=()=>{n=!0},M=()=>{n=!1},O=()=>fs.isFocused()&&(e.networkMode==="always"||qn.isOnline())&&e.canRun(),E=()=>ds(e.networkMode)&&e.canRun(),L=V=>{var z;u||(u=!0,(z=e.onSuccess)==null||z.call(e,V),h==null||h(),A.resolve(V))},G=V=>{var z;u||(u=!0,(z=e.onError)==null||z.call(e,V),h==null||h(),A.reject(V))},Z=()=>new Promise(V=>{var z;h=J=>{(u||O())&&V(J)},(z=e.onPause)==null||z.call(e)}).then(()=>{var V;h=void 0,u||(V=e.onContinue)==null||V.call(e)}),Y=()=>{if(u)return;let V;const z=i===0?e.initialPromise:void 0;try{V=z??e.fn()}catch(J){V=Promise.reject(J)}Promise.resolve(V).then(L).catch(J=>{var N;if(u)return;const pe=e.retry??(Jn?0:3),fe=e.retryDelay??Ko,ge=typeof fe=="function"?fe(i,J):fe,Se=pe===!0||typeof pe=="number"&&i<pe||typeof pe=="function"&&pe(i,J);if(n||!Se){G(J);return}i++,(N=e.onFail)==null||N.call(e,i,J),zo(ge).then(()=>O()?void 0:Z()).then(()=>{n?G(J):Y()})})};return{promise:A,cancel:T,continue:()=>(h==null||h(),A),cancelRetry:S,continueRetry:M,canStart:E,start:()=>(E()?Y():Z().then(Y),A)}}function eu(){let e=[],n=0,i=S=>{S()},u=S=>{S()},h=S=>setTimeout(S,0);const A=S=>{n?e.push(S):h(()=>{i(S)})},T=()=>{const S=e;e=[],S.length&&h(()=>{u(()=>{S.forEach(M=>{i(M)})})})};return{batch:S=>{let M;n++;try{M=S()}finally{n--,n||T()}return M},batchCalls:S=>(...M)=>{A(()=>{S(...M)})},schedule:A,setNotifyFunction:S=>{i=S},setBatchNotifyFunction:S=>{u=S},setScheduler:S=>{h=S}}}var Me=eu(),ms=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Vo(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Jn?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},tu=class extends ms{#e;#t;#n;#r;#s;#i;constructor(e){super(),this.#i=!1,this.#s=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=ru(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=this.#r)==null?void 0:e.promise}setOptions(e){this.options={...this.#s,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,n){const i=Qo(this.state.data,e,this.options);return this.#a({data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(e,n){this.#a({type:"setState",state:e,setStateOptions:n})}cancel(e){var i,u;const n=(i=this.#r)==null?void 0:i.promise;return(u=this.#r)==null||u.cancel(e),n?n.then(Re).catch(Re):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Go(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ya||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Ho(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=this.#r)==null||n.continue()}onOnline(){var n;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=this.#r)==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#r&&(this.#i?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(e,n){var S,M,O;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const E=this.observers.find(L=>L.options.queryFn);E&&this.setOptions(E.options)}const i=new AbortController,u=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(this.#i=!0,i.signal)})},h=()=>{const E=ls(this.options,n),L={queryKey:this.queryKey,meta:this.meta};return u(L),this.#i=!1,this.options.persister?this.options.persister(E,L,this):E(L)},A={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:h};u(A),(S=this.options.behavior)==null||S.onFetch(A,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((M=A.fetchOptions)==null?void 0:M.meta))&&this.#a({type:"fetch",meta:(O=A.fetchOptions)==null?void 0:O.meta});const T=E=>{var L,G,Z,Y;Vr(E)&&E.silent||this.#a({type:"error",error:E}),Vr(E)||((G=(L=this.#n.config).onError)==null||G.call(L,E,this),(Y=(Z=this.#n.config).onSettled)==null||Y.call(Z,this.state.data,E,this)),this.scheduleGc()};return this.#r=ps({initialPromise:n==null?void 0:n.initialPromise,fn:A.fetchFn,abort:i.abort.bind(i),onSuccess:E=>{var L,G,Z,Y;if(E===void 0){T(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(E)}catch(V){T(V);return}(G=(L=this.#n.config).onSuccess)==null||G.call(L,E,this),(Y=(Z=this.#n.config).onSettled)==null||Y.call(Z,E,this.state.error,this),this.scheduleGc()},onError:T,onFail:(E,L)=>{this.#a({type:"failed",failureCount:E,error:L})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:A.options.retry,retryDelay:A.options.retryDelay,networkMode:A.options.networkMode,canRun:()=>!0}),this.#r.start()}#a(e){const n=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...nu(i.data,this.options),fetchMeta:e.meta??null};case"success":return{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const u=e.error;return Vr(u)&&u.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...i,error:u,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:u,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=n(this.state),Me.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function nu(e,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ds(n.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ru(e){const n=typeof e.initialData=="function"?e.initialData():e.initialData,i=n!==void 0,u=i?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:i?u??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}var au=class extends Zn{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,n,i){const u=n.queryKey,h=n.queryHash??ga(u,n);let A=this.get(h);return A||(A=new tu({cache:this,queryKey:u,queryHash:h,options:e.defaultQueryOptions(n),state:i,defaultOptions:e.getQueryDefaults(u)}),this.add(A)),A}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#e.get(e.queryHash);n&&(e.destroy(),n===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Me.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(i=>wi(n,i))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(i=>wi(e,i)):n}notify(e){Me.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Me.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Me.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},iu=class extends ms{#e;#t;#n;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||su(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(n=>n!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){var e;return((e=this.#n)==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var u,h,A,T,S,M,O,E,L,G,Z,Y,V,z,J,pe,fe,ge,Se,N;this.#n=ps({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(B,X)=>{this.#r({type:"failed",failureCount:B,error:X})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const n=this.state.status==="pending",i=!this.#n.canStart();try{if(!n){this.#r({type:"pending",variables:e,isPaused:i}),await((h=(u=this.#t.config).onMutate)==null?void 0:h.call(u,e,this));const X=await((T=(A=this.options).onMutate)==null?void 0:T.call(A,e));X!==this.state.context&&this.#r({type:"pending",context:X,variables:e,isPaused:i})}const B=await this.#n.start();return await((M=(S=this.#t.config).onSuccess)==null?void 0:M.call(S,B,e,this.state.context,this)),await((E=(O=this.options).onSuccess)==null?void 0:E.call(O,B,e,this.state.context)),await((G=(L=this.#t.config).onSettled)==null?void 0:G.call(L,B,null,this.state.variables,this.state.context,this)),await((Y=(Z=this.options).onSettled)==null?void 0:Y.call(Z,B,null,e,this.state.context)),this.#r({type:"success",data:B}),B}catch(B){try{throw await((z=(V=this.#t.config).onError)==null?void 0:z.call(V,B,e,this.state.context,this)),await((pe=(J=this.options).onError)==null?void 0:pe.call(J,B,e,this.state.context)),await((ge=(fe=this.#t.config).onSettled)==null?void 0:ge.call(fe,void 0,B,this.state.variables,this.state.context,this)),await((N=(Se=this.options).onSettled)==null?void 0:N.call(Se,void 0,B,e,this.state.context)),B}finally{this.#r({type:"error",error:B})}}finally{this.#t.runNext(this)}}#r(e){const n=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Me.batch(()=>{this.#e.forEach(i=>{i.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function su(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ou=class extends Zn{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,n,i){const u=new iu({mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(n),state:i});return this.add(u),u}add(e){this.#e.add(e);const n=$n(e);if(typeof n=="string"){const i=this.#t.get(n);i?i.push(e):this.#t.set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const n=$n(e);if(typeof n=="string"){const i=this.#t.get(n);if(i)if(i.length>1){const u=i.indexOf(e);u!==-1&&i.splice(u,1)}else i[0]===e&&this.#t.delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=$n(e);if(typeof n=="string"){const i=this.#t.get(n),u=i==null?void 0:i.find(h=>h.state.status==="pending");return!u||u===e}else return!0}runNext(e){var i;const n=$n(e);if(typeof n=="string"){const u=(i=this.#t.get(n))==null?void 0:i.find(h=>h!==e&&h.state.isPaused);return(u==null?void 0:u.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Me.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const n={exact:!0,...e};return this.getAll().find(i=>_i(n,i))}findAll(e={}){return this.getAll().filter(n=>_i(e,n))}notify(e){Me.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Me.batch(()=>Promise.all(e.map(n=>n.continue().catch(Re))))}};function $n(e){var n;return(n=e.options.scope)==null?void 0:n.id}function Si(e){return{onFetch:(n,i)=>{var E,L,G,Z,Y;const u=n.options,h=(G=(L=(E=n.fetchOptions)==null?void 0:E.meta)==null?void 0:L.fetchMore)==null?void 0:G.direction,A=((Z=n.state.data)==null?void 0:Z.pages)||[],T=((Y=n.state.data)==null?void 0:Y.pageParams)||[];let S={pages:[],pageParams:[]},M=0;const O=async()=>{let V=!1;const z=fe=>{Object.defineProperty(fe,"signal",{enumerable:!0,get:()=>(n.signal.aborted?V=!0:n.signal.addEventListener("abort",()=>{V=!0}),n.signal)})},J=ls(n.options,n.fetchOptions),pe=async(fe,ge,Se)=>{if(V)return Promise.reject();if(ge==null&&fe.pages.length)return Promise.resolve(fe);const N={queryKey:n.queryKey,pageParam:ge,direction:Se?"backward":"forward",meta:n.options.meta};z(N);const B=await J(N),{maxPages:X}=n.options,ie=Se?Yo:Wo;return{pages:ie(fe.pages,B,X),pageParams:ie(fe.pageParams,ge,X)}};if(h&&A.length){const fe=h==="backward",ge=fe?gs:ea,Se={pages:A,pageParams:T},N=ge(u,Se);S=await pe(Se,N,fe)}else{const fe=e??A.length;do{const ge=M===0?T[0]??u.initialPageParam:ea(u,S);if(M>0&&ge==null)break;S=await pe(S,ge),M++}while(M<fe)}return S};n.options.persister?n.fetchFn=()=>{var V,z;return(z=(V=n.options).persister)==null?void 0:z.call(V,O,{queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},i)}:n.fetchFn=O}}}function ea(e,{pages:n,pageParams:i}){const u=n.length-1;return n.length>0?e.getNextPageParam(n[u],n,i[u],i):void 0}function gs(e,{pages:n,pageParams:i}){var u;return n.length>0?(u=e.getPreviousPageParam)==null?void 0:u.call(e,n[0],n,i[0],i):void 0}function vy(e,n){return n?ea(e,n)!=null:!1}function by(e,n){return!n||!e.getPreviousPageParam?!1:gs(e,n)!=null}var uu=class{#e;#t;#n;#r;#s;#i;#a;#o;constructor(e={}){this.#e=e.queryCache||new au,this.#t=e.mutationCache||new ou,this.#n=e.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#a=fs.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=qn.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){var e,n;this.#i--,this.#i===0&&((e=this.#a)==null||e.call(this),this.#a=void 0,(n=this.#o)==null||n.call(this),this.#o=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){var i;const n=this.defaultQueryOptions({queryKey:e});return(i=this.#e.get(n.queryHash))==null?void 0:i.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),i=this.#e.build(this,n),u=i.state.data;return u===void 0?this.fetchQuery(e):(e.revalidateIfStale&&i.isStaleByTime(bi(n.staleTime,i))&&this.prefetchQuery(n),Promise.resolve(u))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:n,state:i})=>{const u=i.data;return[n,u]})}setQueryData(e,n,i){const u=this.defaultQueryOptions({queryKey:e}),h=this.#e.get(u.queryHash),A=h==null?void 0:h.state.data,T=Uo(n,A);if(T!==void 0)return this.#e.build(this,u).setData(T,{...i,manual:!0})}setQueriesData(e,n,i){return Me.batch(()=>this.#e.findAll(e).map(({queryKey:u})=>[u,this.setQueryData(u,n,i)]))}getQueryState(e){var i;const n=this.defaultQueryOptions({queryKey:e});return(i=this.#e.get(n.queryHash))==null?void 0:i.state}removeQueries(e){const n=this.#e;Me.batch(()=>{n.findAll(e).forEach(i=>{n.remove(i)})})}resetQueries(e,n){const i=this.#e,u={type:"active",...e};return Me.batch(()=>(i.findAll(e).forEach(h=>{h.reset()}),this.refetchQueries(u,n)))}cancelQueries(e,n={}){const i={revert:!0,...n},u=Me.batch(()=>this.#e.findAll(e).map(h=>h.cancel(i)));return Promise.all(u).then(Re).catch(Re)}invalidateQueries(e,n={}){return Me.batch(()=>{if(this.#e.findAll(e).forEach(u=>{u.invalidate()}),(e==null?void 0:e.refetchType)==="none")return Promise.resolve();const i={...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"};return this.refetchQueries(i,n)})}refetchQueries(e,n={}){const i={...n,cancelRefetch:n.cancelRefetch??!0},u=Me.batch(()=>this.#e.findAll(e).filter(h=>!h.isDisabled()).map(h=>{let A=h.fetch(void 0,i);return i.throwOnError||(A=A.catch(Re)),h.state.fetchStatus==="paused"?Promise.resolve():A}));return Promise.all(u).then(Re)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const i=this.#e.build(this,n);return i.isStaleByTime(bi(n.staleTime,i))?i.fetch(n):Promise.resolve(i.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Re).catch(Re)}fetchInfiniteQuery(e){return e.behavior=Si(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Re).catch(Re)}ensureInfiniteQueryData(e){return e.behavior=Si(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return qn.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,n){this.#r.set(nn(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#r.values()],i={};return n.forEach(u=>{rn(e,u.queryKey)&&Object.assign(i,u.defaultOptions)}),i}setMutationDefaults(e,n){this.#s.set(nn(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#s.values()];let i={};return n.forEach(u=>{rn(e,u.mutationKey)&&(i={...i,...u.defaultOptions})}),i}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=ga(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===ya&&(n.enabled=!1),n}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.#n.mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}};const ta=new uu,na=No("extensionLocalStorage",{data:{queryKey:null,queryFn:Cg}}),cu=Po(()=>{ta.invalidateQueries({queryKey:na.data.queryKey,exact:!0})},0);var ra={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),function(n){n.Unidentified="Unidentified",n.Alt="Alt",n.AltGraph="AltGraph",n.CapsLock="CapsLock",n.Control="Control",n.Fn="Fn",n.FnLock="FnLock",n.Hyper="Hyper",n.Meta="Meta",n.NumLock="NumLock",n.ScrollLock="ScrollLock",n.Shift="Shift",n.Super="Super",n.Symbol="Symbol",n.SymbolLock="SymbolLock",n.Enter="Enter",n.Tab="Tab",n.ArrowDown="ArrowDown",n.ArrowLeft="ArrowLeft",n.ArrowRight="ArrowRight",n.ArrowUp="ArrowUp",n.End="End",n.Home="Home",n.PageDown="PageDown",n.PageUp="PageUp",n.Backspace="Backspace",n.Clear="Clear",n.Copy="Copy",n.CrSel="CrSel",n.Cut="Cut",n.Delete="Delete",n.EraseEof="EraseEof",n.ExSel="ExSel",n.Insert="Insert",n.Paste="Paste",n.Redo="Redo",n.Undo="Undo",n.Accept="Accept",n.Again="Again",n.Attn="Attn",n.Cancel="Cancel",n.ContextMenu="ContextMenu",n.Escape="Escape",n.Execute="Execute",n.Find="Find",n.Finish="Finish",n.Help="Help",n.Pause="Pause",n.Play="Play",n.Props="Props",n.Select="Select",n.ZoomIn="ZoomIn",n.ZoomOut="ZoomOut",n.BrightnessDown="BrightnessDown",n.BrightnessUp="BrightnessUp",n.Eject="Eject",n.LogOff="LogOff",n.Power="Power",n.PowerOff="PowerOff",n.PrintScreen="PrintScreen",n.Hibernate="Hibernate",n.Standby="Standby",n.WakeUp="WakeUp",n.AllCandidates="AllCandidates",n.Alphanumeric="Alphanumeric",n.CodeInput="CodeInput",n.Compose="Compose",n.Convert="Convert",n.Dead="Dead",n.FinalMode="FinalMode",n.GroupFirst="GroupFirst",n.GroupLast="GroupLast",n.GroupNext="GroupNext",n.GroupPrevious="GroupPrevious",n.ModeChange="ModeChange",n.NextCandidate="NextCandidate",n.NonConvert="NonConvert",n.PreviousCandidate="PreviousCandidate",n.Process="Process",n.SingleCandidate="SingleCandidate",n.HangulMode="HangulMode",n.HanjaMode="HanjaMode",n.JunjaMode="JunjaMode",n.Eisu="Eisu",n.Hankaku="Hankaku",n.Hiragana="Hiragana",n.HiraganaKatakana="HiraganaKatakana",n.KanaMode="KanaMode",n.KanjiMode="KanjiMode",n.Katakana="Katakana",n.Romaji="Romaji",n.Zenkaku="Zenkaku",n.ZenkakuHanaku="ZenkakuHanaku",n.F1="F1",n.F2="F2",n.F3="F3",n.F4="F4",n.F5="F5",n.F6="F6",n.F7="F7",n.F8="F8",n.F9="F9",n.F10="F10",n.F11="F11",n.F12="F12",n.F13="F13",n.F14="F14",n.F15="F15",n.F16="F16",n.F17="F17",n.F18="F18",n.F19="F19",n.F20="F20",n.Soft1="Soft1",n.Soft2="Soft2",n.Soft3="Soft3",n.Soft4="Soft4",n.AppSwitch="AppSwitch",n.Call="Call",n.Camera="Camera",n.CameraFocus="CameraFocus",n.EndCall="EndCall",n.GoBack="GoBack",n.GoHome="GoHome",n.HeadsetHook="HeadsetHook",n.LastNumberRedial="LastNumberRedial",n.Notification="Notification",n.MannerMode="MannerMode",n.VoiceDial="VoiceDial",n.ChannelDown="ChannelDown",n.ChannelUp="ChannelUp",n.MediaFastForward="MediaFastForward",n.MediaPause="MediaPause",n.MediaPlay="MediaPlay",n.MediaPlayPause="MediaPlayPause",n.MediaRecord="MediaRecord",n.MediaRewind="MediaRewind",n.MediaStop="MediaStop",n.MediaTrackNext="MediaTrackNext",n.MediaTrackPrevious="MediaTrackPrevious",n.AudioBalanceLeft="AudioBalanceLeft",n.AudioBalanceRight="AudioBalanceRight",n.AudioBassDown="AudioBassDown",n.AudioBassBoostDown="AudioBassBoostDown",n.AudioBassBoostToggle="AudioBassBoostToggle",n.AudioBassBoostUp="AudioBassBoostUp",n.AudioBassUp="AudioBassUp",n.AudioFaderFront="AudioFaderFront",n.AudioFaderRear="AudioFaderRear",n.AudioSurroundModeNext="AudioSurroundModeNext",n.AudioTrebleDown="AudioTrebleDown",n.AudioTrebleUp="AudioTrebleUp",n.AudioVolumeDown="AudioVolumeDown",n.AudioVolumeMute="AudioVolumeMute",n.AudioVolumeUp="AudioVolumeUp",n.MicrophoneToggle="MicrophoneToggle",n.MicrophoneVolumeDown="MicrophoneVolumeDown",n.MicrophoneVolumeMute="MicrophoneVolumeMute",n.MicrophoneVolumeUp="MicrophoneVolumeUp",n.TV="TV",n.TV3DMode="TV3DMode",n.TVAntennaCable="TVAntennaCable",n.TVAudioDescription="TVAudioDescription",n.TVAudioDescriptionMixDown="TVAudioDescriptionMixDown",n.TVAudioDescriptionMixUp="TVAudioDescriptionMixUp",n.TVContentsMenu="TVContentsMenu",n.TVDataService="TVDataService",n.TVInput="TVInput",n.TVInputComponent1="TVInputComponent1",n.TVInputComponent2="TVInputComponent2",n.TVInputComposite1="TVInputComposite1",n.TVInputComposite2="TVInputComposite2",n.TVInputHDMI1="TVInputHDMI1",n.TVInputHDMI2="TVInputHDMI2",n.TVInputHDMI3="TVInputHDMI3",n.TVInputHDMI4="TVInputHDMI4",n.TVInputVGA1="TVInputVGA1",n.TVMediaContext="TVMediaContext",n.TVNetwork="TVNetwork",n.TVNumberEntry="TVNumberEntry",n.TVPower="TVPower",n.TVRadioService="TVRadioService",n.TVSatellite="TVSatellite",n.TVSatelliteBS="TVSatelliteBS",n.TVSatelliteCS="TVSatelliteCS",n.TVSatelliteToggle="TVSatelliteToggle",n.TVTerrestrialAnalog="TVTerrestrialAnalog",n.TVTerrestrialDigital="TVTerrestrialDigital",n.TVTimer="TVTimer",n.AVRInput="AVRInput",n.AVRPower="AVRPower",n.ColorF0Red="ColorF0Red",n.ColorF1Green="ColorF1Green",n.ColorF2Yellow="ColorF2Yellow",n.ColorF3Blue="ColorF3Blue",n.ColorF4Grey="ColorF4Grey",n.ColorF5Brown="ColorF5Brown",n.ClosedCaptionToggle="ClosedCaptionToggle",n.Dimmer="Dimmer",n.DisplaySwap="DisplaySwap",n.DVR="DVR",n.Exit="Exit",n.FavoriteClear0="FavoriteClear0",n.FavoriteClear1="FavoriteClear1",n.FavoriteClear2="FavoriteClear2",n.FavoriteClear3="FavoriteClear3",n.FavoriteRecall0="FavoriteRecall0",n.FavoriteRecall1="FavoriteRecall1",n.FavoriteRecall2="FavoriteRecall2",n.FavoriteRecall3="FavoriteRecall3",n.FavoriteStore0="FavoriteStore0",n.FavoriteStore1="FavoriteStore1",n.FavoriteStore2="FavoriteStore2",n.FavoriteStore3="FavoriteStore3",n.Guide="Guide",n.GuideNextDay="GuideNextDay",n.GuidePreviousDay="GuidePreviousDay",n.Info="Info",n.InstantReplay="InstantReplay",n.Link="Link",n.ListProgram="ListProgram",n.LiveContent="LiveContent",n.Lock="Lock",n.MediaApps="MediaApps",n.MediaAudioTrack="MediaAudioTrack",n.MediaLast="MediaLast",n.MediaSkipBackward="MediaSkipBackward",n.MediaSkipForward="MediaSkipForward",n.MediaStepBackward="MediaStepBackward",n.MediaStepForward="MediaStepForward",n.MediaTopMenu="MediaTopMenu",n.NavigateIn="NavigateIn",n.NavigateNext="NavigateNext",n.NavigateOut="NavigateOut",n.NavigatePrevious="NavigatePrevious",n.NextFavoriteChannel="NextFavoriteChannel",n.NextUserProfile="NextUserProfile",n.OnDemand="OnDemand",n.Pairing="Pairing",n.PinPDown="PinPDown",n.PinPMove="PinPMove",n.PinPToggle="PinPToggle",n.PinPUp="PinPUp",n.PlaySpeedDown="PlaySpeedDown",n.PlaySpeedReset="PlaySpeedReset",n.PlaySpeedUp="PlaySpeedUp",n.RandomToggle="RandomToggle",n.RcLowBattery="RcLowBattery",n.RecordSpeedNext="RecordSpeedNext",n.RfBypass="RfBypass",n.ScanChannelsToggle="ScanChannelsToggle",n.ScreenModeNext="ScreenModeNext",n.Settings="Settings",n.SplitScreenToggle="SplitScreenToggle",n.STBInput="STBInput",n.STBPower="STBPower",n.Subtitle="Subtitle",n.Teletext="Teletext",n.VideoModeNext="VideoModeNext",n.Wink="Wink",n.ZoomToggle="ZoomToggle",n.SpeechCorrectionList="SpeechCorrectionList",n.SpeechInputToggle="SpeechInputToggle",n.Close="Close",n.New="New",n.Open="Open",n.Print="Print",n.Save="Save",n.SpellCheck="SpellCheck",n.MailForward="MailForward",n.MailReply="MailReply",n.MailSend="MailSend",n.LaunchCalculator="LaunchCalculator",n.LaunchCalendar="LaunchCalendar",n.LaunchContacts="LaunchContacts",n.LaunchMail="LaunchMail",n.LaunchMediaPlayer="LaunchMediaPlayer",n.LaunchMusicPlayer="LaunchMusicPlayer",n.LaunchMyComputer="LaunchMyComputer",n.LaunchPhone="LaunchPhone",n.LaunchScreenSaver="LaunchScreenSaver",n.LaunchSpreadsheet="LaunchSpreadsheet",n.LaunchWebBrowser="LaunchWebBrowser",n.LaunchWebCam="LaunchWebCam",n.LaunchWordProcessor="LaunchWordProcessor",n.LaunchApplication1="LaunchApplication1",n.LaunchApplication2="LaunchApplication2",n.LaunchApplication3="LaunchApplication3",n.LaunchApplication4="LaunchApplication4",n.LaunchApplication5="LaunchApplication5",n.LaunchApplication6="LaunchApplication6",n.LaunchApplication7="LaunchApplication7",n.LaunchApplication8="LaunchApplication8",n.LaunchApplication9="LaunchApplication9",n.LaunchApplication10="LaunchApplication10",n.LaunchApplication11="LaunchApplication11",n.LaunchApplication12="LaunchApplication12",n.LaunchApplication13="LaunchApplication13",n.LaunchApplication14="LaunchApplication14",n.LaunchApplication15="LaunchApplication15",n.LaunchApplication16="LaunchApplication16",n.BrowserBack="BrowserBack",n.BrowserFavorites="BrowserFavorites",n.BrowserForward="BrowserForward",n.BrowserHome="BrowserHome",n.BrowserRefresh="BrowserRefresh",n.BrowserSearch="BrowserSearch",n.BrowserStop="BrowserStop",n.Decimal="Decimal",n.Key11="Key11",n.Key12="Key12",n.Multiply="Multiply",n.Add="Add",n.Divide="Divide",n.Subtract="Subtract",n.Separator="Separator"}(e.Key||(e.Key={}))})(ra);function wy(){return _o.useMemo(()=>aa(),[])}const aa=()=>{var n;if(typeof navigator>"u")return"windows";if(((n=navigator.userAgentData)==null?void 0:n.platform)!=null){const i=navigator.userAgentData.platform;if(/macOS/.test(i))return"mac";if(/Linux/.test(i))return"linux";if(/Windows/.test(i))return"windows"}const e=navigator.userAgent;return/Mac|iPod|iPhone|iPad/.test(e)?"mac":/Linux/.test(e)?"linux":(/Windows/.test(e),"windows")},va={schemaVersion:ha.version,plugins:{"queryBox:languageModelSelector":{enabled:!1,main:!0,followUp:!0,changeTimezone:!1},"queryBox:fullWidthFollowUp":{enabled:!1},"queryBox:focusSelector":{enabled:!1,mode:"persistent",defaultFocusMode:"internet"},"queryBox:focusSelector:webRecency":{enabled:!1},"queryBox:spaceNavigator":{enabled:!1},"queryBox:slashCommandMenu:promptHistory":{enabled:!1,trigger:{onSubmit:!0,onNavigation:!0},showTriggerButton:!0},"queryBox:noFileCreationOnPaste":{enabled:!1},"queryBox:submitOnCtrlEnter":{enabled:!1},commandMenu:{hotkey:[aa()==="mac"?ra.Key.Meta:ra.Key.Control,aa()==="mac"?"i":"k"],enabled:!1},"thread:toc":{enabled:!1},"thread:betterMessageToolbars":{enabled:!1,sticky:!0,simplifyRewriteDropdown:!0,explicitModelName:!0,hideUnnecessaryButtons:!0,wordsAndCharactersCount:!0,tokensCount:!1,collapsibleQuery:!1},"thread:betterCodeBlocks":{enabled:!1,stickyHeader:!0,unwrap:{enabled:!0,showToggleButton:!0},maxHeight:{enabled:!0,collapseByDefault:!1,value:500,showToggleButton:!0}},"thread:canvas":{enabled:!1},"thread:exportThread":{enabled:!1},"thread:betterMessageCopyButtons":{enabled:!1},"thread:dragAndDropFileToUploadInThread":{enabled:!1},"thread:collapseEmptyThreadVisualCols":{enabled:!1},"thread:customThreadContainerWidth":{enabled:!1,value:1100},imageGenModelSelector:{enabled:!1},onCloudflareTimeoutAutoReload:{enabled:!1,behavior:"reload"},blockAnalyticEvents:{enabled:!1},"home:customSlogan":{enabled:!1,slogan:""},"hide-get-mobile-app-cta-btn":{enabled:!1},zenMode:{enabled:!1,persistent:!1,lastState:!1,alwaysHideRelatedQuestions:!1,alwaysHideHomepageWidgets:!1,alwaysHideVisualCols:!1}},favoritePluginIds:[],preloadTheme:!1,theme:"complexity",energySavingMode:!1,extensionIconAction:"perplexity",cdnLastUpdated:0,devMode:!1};function lu(){this.__data__=[],this.size=0}var fu=lu;function du(e,n){return e===n||e!==e&&n!==n}var ys=du,hu=ys;function pu(e,n){for(var i=e.length;i--;)if(hu(e[i][0],n))return i;return-1}var Xn=pu,mu=Xn,gu=Array.prototype,yu=gu.splice;function vu(e){var n=this.__data__,i=mu(n,e);if(i<0)return!1;var u=n.length-1;return i==u?n.pop():yu.call(n,i,1),--this.size,!0}var bu=vu,wu=Xn;function _u(e){var n=this.__data__,i=wu(n,e);return i<0?void 0:n[i][1]}var Au=_u,xu=Xn;function Su(e){return xu(this.__data__,e)>-1}var Pu=Su,Cu=Xn;function Tu(e,n){var i=this.__data__,u=Cu(i,e);return u<0?(++this.size,i.push([e,n])):i[u][1]=n,this}var ku=Tu,Ou=fu,Eu=bu,Mu=Au,Fu=Pu,ju=ku;function Ft(e){var n=-1,i=e==null?0:e.length;for(this.clear();++n<i;){var u=e[n];this.set(u[0],u[1])}}Ft.prototype.clear=Ou;Ft.prototype.delete=Eu;Ft.prototype.get=Mu;Ft.prototype.has=Fu;Ft.prototype.set=ju;var Kn=Ft,Du=Kn;function $u(){this.__data__=new Du,this.size=0}var Iu=$u;function Bu(e){var n=this.__data__,i=n.delete(e);return this.size=n.size,i}var Ru=Bu;function Lu(e){return this.__data__.get(e)}var qu=Lu;function Nu(e){return this.__data__.has(e)}var Uu=Nu,Vu=Hn,Hu=an,Gu="[object AsyncFunction]",zu="[object Function]",Qu="[object GeneratorFunction]",Wu="[object Proxy]";function Yu(e){if(!Hu(e))return!1;var n=Vu(e);return n==zu||n==Qu||n==Gu||n==Wu}var vs=Yu,Zu=Ye,Ju=Zu["__core-js_shared__"],Xu=Ju,Hr=Xu,Pi=function(){var e=/[^.]+$/.exec(Hr&&Hr.keys&&Hr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ku(e){return!!Pi&&Pi in e}var ec=Ku,tc=Function.prototype,nc=tc.toString;function rc(e){if(e!=null){try{return nc.call(e)}catch{}try{return e+""}catch{}}return""}var bs=rc,ac=vs,ic=ec,sc=an,oc=bs,uc=/[\\^$.*+?()[\]{}|]/g,cc=/^\[object .+?Constructor\]$/,lc=Function.prototype,fc=Object.prototype,dc=lc.toString,hc=fc.hasOwnProperty,pc=RegExp("^"+dc.call(hc).replace(uc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mc(e){if(!sc(e)||ic(e))return!1;var n=ac(e)?pc:cc;return n.test(oc(e))}var gc=mc;function yc(e,n){return e==null?void 0:e[n]}var vc=yc,bc=gc,wc=vc;function _c(e,n){var i=wc(e,n);return bc(i)?i:void 0}var vt=_c,Ac=vt,xc=Ye,Sc=Ac(xc,"Map"),ba=Sc,Pc=vt,Cc=Pc(Object,"create"),er=Cc,Ci=er;function Tc(){this.__data__=Ci?Ci(null):{},this.size=0}var kc=Tc;function Oc(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var Ec=Oc,Mc=er,Fc="__lodash_hash_undefined__",jc=Object.prototype,Dc=jc.hasOwnProperty;function $c(e){var n=this.__data__;if(Mc){var i=n[e];return i===Fc?void 0:i}return Dc.call(n,e)?n[e]:void 0}var Ic=$c,Bc=er,Rc=Object.prototype,Lc=Rc.hasOwnProperty;function qc(e){var n=this.__data__;return Bc?n[e]!==void 0:Lc.call(n,e)}var Nc=qc,Uc=er,Vc="__lodash_hash_undefined__";function Hc(e,n){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Uc&&n===void 0?Vc:n,this}var Gc=Hc,zc=kc,Qc=Ec,Wc=Ic,Yc=Nc,Zc=Gc;function jt(e){var n=-1,i=e==null?0:e.length;for(this.clear();++n<i;){var u=e[n];this.set(u[0],u[1])}}jt.prototype.clear=zc;jt.prototype.delete=Qc;jt.prototype.get=Wc;jt.prototype.has=Yc;jt.prototype.set=Zc;var Jc=jt,Ti=Jc,Xc=Kn,Kc=ba;function el(){this.size=0,this.__data__={hash:new Ti,map:new(Kc||Xc),string:new Ti}}var tl=el;function nl(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}var rl=nl,al=rl;function il(e,n){var i=e.__data__;return al(n)?i[typeof n=="string"?"string":"hash"]:i.map}var tr=il,sl=tr;function ol(e){var n=sl(this,e).delete(e);return this.size-=n?1:0,n}var ul=ol,cl=tr;function ll(e){return cl(this,e).get(e)}var fl=ll,dl=tr;function hl(e){return dl(this,e).has(e)}var pl=hl,ml=tr;function gl(e,n){var i=ml(this,e),u=i.size;return i.set(e,n),this.size+=i.size==u?0:1,this}var yl=gl,vl=tl,bl=ul,wl=fl,_l=pl,Al=yl;function Dt(e){var n=-1,i=e==null?0:e.length;for(this.clear();++n<i;){var u=e[n];this.set(u[0],u[1])}}Dt.prototype.clear=vl;Dt.prototype.delete=bl;Dt.prototype.get=wl;Dt.prototype.has=_l;Dt.prototype.set=Al;var xl=Dt,Sl=Kn,Pl=ba,Cl=xl,Tl=200;function kl(e,n){var i=this.__data__;if(i instanceof Sl){var u=i.__data__;if(!Pl||u.length<Tl-1)return u.push([e,n]),this.size=++i.size,this;i=this.__data__=new Cl(u)}return i.set(e,n),this.size=i.size,this}var Ol=kl,El=Kn,Ml=Iu,Fl=Ru,jl=qu,Dl=Uu,$l=Ol;function $t(e){var n=this.__data__=new El(e);this.size=n.size}$t.prototype.clear=Ml;$t.prototype.delete=Fl;$t.prototype.get=jl;$t.prototype.has=Dl;$t.prototype.set=$l;var Il=$t;function Bl(e,n){for(var i=-1,u=e==null?0:e.length;++i<u&&n(e[i],i,e)!==!1;);return e}var Rl=Bl,Ll=vt,ql=function(){try{var e=Ll(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Nl=ql,ki=Nl;function Ul(e,n,i){n=="__proto__"&&ki?ki(e,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[n]=i}var ws=Ul,Vl=ws,Hl=ys,Gl=Object.prototype,zl=Gl.hasOwnProperty;function Ql(e,n,i){var u=e[n];(!(zl.call(e,n)&&Hl(u,i))||i===void 0&&!(n in e))&&Vl(e,n,i)}var _s=Ql,Wl=_s,Yl=ws;function Zl(e,n,i,u){var h=!i;i||(i={});for(var A=-1,T=n.length;++A<T;){var S=n[A],M=u?u(i[S],e[S],S,i,e):void 0;M===void 0&&(M=e[S]),h?Yl(i,S,M):Wl(i,S,M)}return i}var nr=Zl;function Jl(e,n){for(var i=-1,u=Array(e);++i<e;)u[i]=n(i);return u}var Xl=Jl,Kl=Hn,ef=sn,tf="[object Arguments]";function nf(e){return ef(e)&&Kl(e)==tf}var rf=nf,Oi=rf,af=sn,As=Object.prototype,sf=As.hasOwnProperty,of=As.propertyIsEnumerable,uf=Oi(function(){return arguments}())?Oi:function(e){return af(e)&&sf.call(e,"callee")&&!of.call(e,"callee")},cf=uf,lf=Array.isArray,wa=lf,Nn={exports:{}};function ff(){return!1}var df=ff;Nn.exports;(function(e,n){var i=Ye,u=df,h=n&&!n.nodeType&&n,A=h&&!0&&e&&!e.nodeType&&e,T=A&&A.exports===h,S=T?i.Buffer:void 0,M=S?S.isBuffer:void 0,O=M||u;e.exports=O})(Nn,Nn.exports);var xs=Nn.exports,hf=9007199254740991,pf=/^(?:0|[1-9]\d*)$/;function mf(e,n){var i=typeof e;return n=n??hf,!!n&&(i=="number"||i!="symbol"&&pf.test(e))&&e>-1&&e%1==0&&e<n}var gf=mf,yf=9007199254740991;function vf(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=yf}var Ss=vf,bf=Hn,wf=Ss,_f=sn,Af="[object Arguments]",xf="[object Array]",Sf="[object Boolean]",Pf="[object Date]",Cf="[object Error]",Tf="[object Function]",kf="[object Map]",Of="[object Number]",Ef="[object Object]",Mf="[object RegExp]",Ff="[object Set]",jf="[object String]",Df="[object WeakMap]",$f="[object ArrayBuffer]",If="[object DataView]",Bf="[object Float32Array]",Rf="[object Float64Array]",Lf="[object Int8Array]",qf="[object Int16Array]",Nf="[object Int32Array]",Uf="[object Uint8Array]",Vf="[object Uint8ClampedArray]",Hf="[object Uint16Array]",Gf="[object Uint32Array]",le={};le[Bf]=le[Rf]=le[Lf]=le[qf]=le[Nf]=le[Uf]=le[Vf]=le[Hf]=le[Gf]=!0;le[Af]=le[xf]=le[$f]=le[Sf]=le[If]=le[Pf]=le[Cf]=le[Tf]=le[kf]=le[Of]=le[Ef]=le[Mf]=le[Ff]=le[jf]=le[Df]=!1;function zf(e){return _f(e)&&wf(e.length)&&!!le[bf(e)]}var Qf=zf;function Wf(e){return function(n){return e(n)}}var _a=Wf,Un={exports:{}};Un.exports;(function(e,n){var i=Co,u=n&&!n.nodeType&&n,h=u&&!0&&e&&!e.nodeType&&e,A=h&&h.exports===u,T=A&&i.process,S=function(){try{var M=h&&h.require&&h.require("util").types;return M||T&&T.binding&&T.binding("util")}catch{}}();e.exports=S})(Un,Un.exports);var Aa=Un.exports,Yf=Qf,Zf=_a,Ei=Aa,Mi=Ei&&Ei.isTypedArray,Jf=Mi?Zf(Mi):Yf,Xf=Jf,Kf=Xl,ed=cf,td=wa,nd=xs,rd=gf,ad=Xf,id=Object.prototype,sd=id.hasOwnProperty;function od(e,n){var i=td(e),u=!i&&ed(e),h=!i&&!u&&nd(e),A=!i&&!u&&!h&&ad(e),T=i||u||h||A,S=T?Kf(e.length,String):[],M=S.length;for(var O in e)(n||sd.call(e,O))&&!(T&&(O=="length"||h&&(O=="offset"||O=="parent")||A&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||rd(O,M)))&&S.push(O);return S}var Ps=od,ud=Object.prototype;function cd(e){var n=e&&e.constructor,i=typeof n=="function"&&n.prototype||ud;return e===i}var xa=cd;function ld(e,n){return function(i){return e(n(i))}}var Cs=ld,fd=Cs,dd=fd(Object.keys,Object),hd=dd,pd=xa,md=hd,gd=Object.prototype,yd=gd.hasOwnProperty;function vd(e){if(!pd(e))return md(e);var n=[];for(var i in Object(e))yd.call(e,i)&&i!="constructor"&&n.push(i);return n}var bd=vd,wd=vs,_d=Ss;function Ad(e){return e!=null&&_d(e.length)&&!wd(e)}var Ts=Ad,xd=Ps,Sd=bd,Pd=Ts;function Cd(e){return Pd(e)?xd(e):Sd(e)}var Sa=Cd,Td=nr,kd=Sa;function Od(e,n){return e&&Td(n,kd(n),e)}var Ed=Od;function Md(e){var n=[];if(e!=null)for(var i in Object(e))n.push(i);return n}var Fd=Md,jd=an,Dd=xa,$d=Fd,Id=Object.prototype,Bd=Id.hasOwnProperty;function Rd(e){if(!jd(e))return $d(e);var n=Dd(e),i=[];for(var u in e)u=="constructor"&&(n||!Bd.call(e,u))||i.push(u);return i}var Ld=Rd,qd=Ps,Nd=Ld,Ud=Ts;function Vd(e){return Ud(e)?qd(e,!0):Nd(e)}var Pa=Vd,Hd=nr,Gd=Pa;function zd(e,n){return e&&Hd(n,Gd(n),e)}var Qd=zd,Vn={exports:{}};Vn.exports;(function(e,n){var i=Ye,u=n&&!n.nodeType&&n,h=u&&!0&&e&&!e.nodeType&&e,A=h&&h.exports===u,T=A?i.Buffer:void 0,S=T?T.allocUnsafe:void 0;function M(O,E){if(E)return O.slice();var L=O.length,G=S?S(L):new O.constructor(L);return O.copy(G),G}e.exports=M})(Vn,Vn.exports);var Wd=Vn.exports;function Yd(e,n){var i=-1,u=e.length;for(n||(n=Array(u));++i<u;)n[i]=e[i];return n}var Zd=Yd;function Jd(e,n){for(var i=-1,u=e==null?0:e.length,h=0,A=[];++i<u;){var T=e[i];n(T,i,e)&&(A[h++]=T)}return A}var Xd=Jd;function Kd(){return[]}var ks=Kd,eh=Xd,th=ks,nh=Object.prototype,rh=nh.propertyIsEnumerable,Fi=Object.getOwnPropertySymbols,ah=Fi?function(e){return e==null?[]:(e=Object(e),eh(Fi(e),function(n){return rh.call(e,n)}))}:th,Ca=ah,ih=nr,sh=Ca;function oh(e,n){return ih(e,sh(e),n)}var uh=oh;function ch(e,n){for(var i=-1,u=n.length,h=e.length;++i<u;)e[h+i]=n[i];return e}var Os=ch,lh=Cs,fh=lh(Object.getPrototypeOf,Object),Es=fh,dh=Os,hh=Es,ph=Ca,mh=ks,gh=Object.getOwnPropertySymbols,yh=gh?function(e){for(var n=[];e;)dh(n,ph(e)),e=hh(e);return n}:mh,Ms=yh,vh=nr,bh=Ms;function wh(e,n){return vh(e,bh(e),n)}var _h=wh,Ah=Os,xh=wa;function Sh(e,n,i){var u=n(e);return xh(e)?u:Ah(u,i(e))}var Fs=Sh,Ph=Fs,Ch=Ca,Th=Sa;function kh(e){return Ph(e,Th,Ch)}var Oh=kh,Eh=Fs,Mh=Ms,Fh=Pa;function jh(e){return Eh(e,Fh,Mh)}var Dh=jh,$h=vt,Ih=Ye,Bh=$h(Ih,"DataView"),Rh=Bh,Lh=vt,qh=Ye,Nh=Lh(qh,"Promise"),Uh=Nh,Vh=vt,Hh=Ye,Gh=Vh(Hh,"Set"),zh=Gh,Qh=vt,Wh=Ye,Yh=Qh(Wh,"WeakMap"),Zh=Yh,ia=Rh,sa=ba,oa=Uh,ua=zh,ca=Zh,js=Hn,It=bs,ji="[object Map]",Jh="[object Object]",Di="[object Promise]",$i="[object Set]",Ii="[object WeakMap]",Bi="[object DataView]",Xh=It(ia),Kh=It(sa),ep=It(oa),tp=It(ua),np=It(ca),mt=js;(ia&&mt(new ia(new ArrayBuffer(1)))!=Bi||sa&&mt(new sa)!=ji||oa&&mt(oa.resolve())!=Di||ua&&mt(new ua)!=$i||ca&&mt(new ca)!=Ii)&&(mt=function(e){var n=js(e),i=n==Jh?e.constructor:void 0,u=i?It(i):"";if(u)switch(u){case Xh:return Bi;case Kh:return ji;case ep:return Di;case tp:return $i;case np:return Ii}return n});var Ta=mt,rp=Object.prototype,ap=rp.hasOwnProperty;function ip(e){var n=e.length,i=new e.constructor(n);return n&&typeof e[0]=="string"&&ap.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var sp=ip,op=Ye,up=op.Uint8Array,cp=up,Ri=cp;function lp(e){var n=new e.constructor(e.byteLength);return new Ri(n).set(new Ri(e)),n}var ka=lp,fp=ka;function dp(e,n){var i=n?fp(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var hp=dp,pp=/\w*$/;function mp(e){var n=new e.constructor(e.source,pp.exec(e));return n.lastIndex=e.lastIndex,n}var gp=mp,Li=To,qi=Li?Li.prototype:void 0,Ni=qi?qi.valueOf:void 0;function yp(e){return Ni?Object(Ni.call(e)):{}}var vp=yp,bp=ka;function wp(e,n){var i=n?bp(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var _p=wp,Ap=ka,xp=hp,Sp=gp,Pp=vp,Cp=_p,Tp="[object Boolean]",kp="[object Date]",Op="[object Map]",Ep="[object Number]",Mp="[object RegExp]",Fp="[object Set]",jp="[object String]",Dp="[object Symbol]",$p="[object ArrayBuffer]",Ip="[object DataView]",Bp="[object Float32Array]",Rp="[object Float64Array]",Lp="[object Int8Array]",qp="[object Int16Array]",Np="[object Int32Array]",Up="[object Uint8Array]",Vp="[object Uint8ClampedArray]",Hp="[object Uint16Array]",Gp="[object Uint32Array]";function zp(e,n,i){var u=e.constructor;switch(n){case $p:return Ap(e);case Tp:case kp:return new u(+e);case Ip:return xp(e,i);case Bp:case Rp:case Lp:case qp:case Np:case Up:case Vp:case Hp:case Gp:return Cp(e,i);case Op:return new u;case Ep:case jp:return new u(e);case Mp:return Sp(e);case Fp:return new u;case Dp:return Pp(e)}}var Qp=zp,Wp=an,Ui=Object.create,Yp=function(){function e(){}return function(n){if(!Wp(n))return{};if(Ui)return Ui(n);e.prototype=n;var i=new e;return e.prototype=void 0,i}}(),Zp=Yp,Jp=Zp,Xp=Es,Kp=xa;function em(e){return typeof e.constructor=="function"&&!Kp(e)?Jp(Xp(e)):{}}var tm=em,nm=Ta,rm=sn,am="[object Map]";function im(e){return rm(e)&&nm(e)==am}var sm=im,om=sm,um=_a,Vi=Aa,Hi=Vi&&Vi.isMap,cm=Hi?um(Hi):om,lm=cm,fm=Ta,dm=sn,hm="[object Set]";function pm(e){return dm(e)&&fm(e)==hm}var mm=pm,gm=mm,ym=_a,Gi=Aa,zi=Gi&&Gi.isSet,vm=zi?ym(zi):gm,bm=vm,wm=Il,_m=Rl,Am=_s,xm=Ed,Sm=Qd,Pm=Wd,Cm=Zd,Tm=uh,km=_h,Om=Oh,Em=Dh,Mm=Ta,Fm=sp,jm=Qp,Dm=tm,$m=wa,Im=xs,Bm=lm,Rm=an,Lm=bm,qm=Sa,Nm=Pa,Um=1,Vm=2,Hm=4,Ds="[object Arguments]",Gm="[object Array]",zm="[object Boolean]",Qm="[object Date]",Wm="[object Error]",$s="[object Function]",Ym="[object GeneratorFunction]",Zm="[object Map]",Jm="[object Number]",Is="[object Object]",Xm="[object RegExp]",Km="[object Set]",eg="[object String]",tg="[object Symbol]",ng="[object WeakMap]",rg="[object ArrayBuffer]",ag="[object DataView]",ig="[object Float32Array]",sg="[object Float64Array]",og="[object Int8Array]",ug="[object Int16Array]",cg="[object Int32Array]",lg="[object Uint8Array]",fg="[object Uint8ClampedArray]",dg="[object Uint16Array]",hg="[object Uint32Array]",ue={};ue[Ds]=ue[Gm]=ue[rg]=ue[ag]=ue[zm]=ue[Qm]=ue[ig]=ue[sg]=ue[og]=ue[ug]=ue[cg]=ue[Zm]=ue[Jm]=ue[Is]=ue[Xm]=ue[Km]=ue[eg]=ue[tg]=ue[lg]=ue[fg]=ue[dg]=ue[hg]=!0;ue[Wm]=ue[$s]=ue[ng]=!1;function In(e,n,i,u,h,A){var T,S=n&Um,M=n&Vm,O=n&Hm;if(i&&(T=h?i(e,u,h,A):i(e)),T!==void 0)return T;if(!Rm(e))return e;var E=$m(e);if(E){if(T=Fm(e),!S)return Cm(e,T)}else{var L=Mm(e),G=L==$s||L==Ym;if(Im(e))return Pm(e,S);if(L==Is||L==Ds||G&&!h){if(T=M||G?{}:Dm(e),!S)return M?km(e,Sm(T,e)):Tm(e,xm(T,e))}else{if(!ue[L])return h?e:{};T=jm(e,L,S)}}A||(A=new wm);var Z=A.get(e);if(Z)return Z;A.set(e,T),Lm(e)?e.forEach(function(z){T.add(In(z,n,i,z,e,A))}):Bm(e)&&e.forEach(function(z,J){T.set(J,In(z,n,i,J,e,A))});var Y=O?M?Em:Om:M?Nm:qm,V=E?void 0:Y(e);return _m(V||e,function(z,J){V&&(J=z,z=e[J]),Am(T,J,In(z,n,i,J,e,A))}),T}var pg=In,mg=pg,gg=1,yg=4;function vg(e){return mg(e,gg|yg)}var bg=vg;const wg=Gn(bg),_g=({target:e,source:n})=>{const i=wg(n);function u(h,A){for(const T in h)h[T]!==void 0&&(typeof h[T]=="object"&&h[T]!==null?(A[T]=A[T]??{},u(h[T],A[T])):A[T]=h[T])}return u(e,i),i};function Ag({paths:e,obj:n}){const i=JSON.parse(JSON.stringify(n));let u=i;for(let h=0;h<e.length-1;h++){const A=e[h];if(A!=null&&typeof u[A]=="object")u=u[A];else return i}if(e.length>0){const h=e[e.length-1];h!=null&&Object.prototype.hasOwnProperty.call(u,h)&&(u[h]=void 0)}return i}function xg(e){return e==null||typeof e=="string"||typeof e=="number"||typeof e=="boolean"||Ao.isValidElement(e)||Array.isArray(e)&&e.every(xg)}function Sg(e){return e instanceof So||(e==null?void 0:e.name)==="ZodError"||Array.isArray(e==null?void 0:e.issues)}class Kt{static initializeReactiveStore(){if(di()!=="unknown")throw new Error("Extension local storage can not be reactive in content scripts!");return kt.listen(()=>{cu()}),!0}static async get(){return await ta.fetchQuery({...na.data,gcTime:di()==="unknown"?void 0:1/0})}static getCachedSync(){const n=ta.getQueryData(na.data.queryKey);if(!n)throw new Error("Extension local storage is not initialized");return n}static async set(n){const i=Kt.getCachedSync(),u=Ro(i,h=>{n(h)});return await kt.set(u),u}static async exportAll(){return await Kt.get()}static async import(n){await kt.set(await Bs(n,await Kt.get()))}static async clearAll(){await kt.set(va)}}async function Pg(e){return Bs(e,va)}async function Bs(e,n){const{data:i,error:u}=vi.safeParse(e);if(u){if(!Sg(u))return va;console.log("[Cplx] Settings schema mismatch, merging...");let h=e;u.issues.forEach(S=>{h=Ag({paths:S.path,obj:h})});const A=_g({target:h,source:n});A.schemaVersion=ha.version;const T=vi.parse(A);return await kt.set(T),T}return i}async function Cg(){return Pg(await kt.get())}xo.register({id:"cache:extensionLocalStorage",loader:async()=>{await Kt.get()}});var Rs={exports:{}};(function(e,n){(function(i,u){u(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:zr,function(i){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)i.exports=globalThis.browser;else{const u="The message port closed before a response was received.",h=A=>{const T={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(T).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class S extends WeakMap{constructor(B,X=void 0){super(X),this.createItem=B}get(B){return this.has(B)||this.set(B,this.createItem(B)),super.get(B)}}const M=N=>N&&typeof N=="object"&&typeof N.then=="function",O=(N,B)=>(...X)=>{A.runtime.lastError?N.reject(new Error(A.runtime.lastError.message)):B.singleCallbackArg||X.length<=1&&B.singleCallbackArg!==!1?N.resolve(X[0]):N.resolve(X)},E=N=>N==1?"argument":"arguments",L=(N,B)=>function(ie,...be){if(be.length<B.minArgs)throw new Error(`Expected at least ${B.minArgs} ${E(B.minArgs)} for ${N}(), got ${be.length}`);if(be.length>B.maxArgs)throw new Error(`Expected at most ${B.maxArgs} ${E(B.maxArgs)} for ${N}(), got ${be.length}`);return new Promise((Ce,we)=>{if(B.fallbackToNoCallback)try{ie[N](...be,O({resolve:Ce,reject:we},B))}catch(K){console.warn(`${N} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,K),ie[N](...be),B.fallbackToNoCallback=!1,B.noCallback=!0,Ce()}else B.noCallback?(ie[N](...be),Ce()):ie[N](...be,O({resolve:Ce,reject:we},B))})},G=(N,B,X)=>new Proxy(B,{apply(ie,be,Ce){return X.call(be,N,...Ce)}});let Z=Function.call.bind(Object.prototype.hasOwnProperty);const Y=(N,B={},X={})=>{let ie=Object.create(null),be={has(we,K){return K in N||K in ie},get(we,K,Fe){if(K in ie)return ie[K];if(!(K in N))return;let me=N[K];if(typeof me=="function")if(typeof B[K]=="function")me=G(N,N[K],B[K]);else if(Z(X,K)){let qe=L(K,X[K]);me=G(N,N[K],qe)}else me=me.bind(N);else if(typeof me=="object"&&me!==null&&(Z(B,K)||Z(X,K)))me=Y(me,B[K],X[K]);else if(Z(X,"*"))me=Y(me,B[K],X["*"]);else return Object.defineProperty(ie,K,{configurable:!0,enumerable:!0,get(){return N[K]},set(qe){N[K]=qe}}),me;return ie[K]=me,me},set(we,K,Fe,me){return K in ie?ie[K]=Fe:N[K]=Fe,!0},defineProperty(we,K,Fe){return Reflect.defineProperty(ie,K,Fe)},deleteProperty(we,K){return Reflect.deleteProperty(ie,K)}},Ce=Object.create(N);return new Proxy(Ce,be)},V=N=>({addListener(B,X,...ie){B.addListener(N.get(X),...ie)},hasListener(B,X){return B.hasListener(N.get(X))},removeListener(B,X){B.removeListener(N.get(X))}}),z=new S(N=>typeof N!="function"?N:function(X){const ie=Y(X,{},{getContent:{minArgs:0,maxArgs:0}});N(ie)}),J=new S(N=>typeof N!="function"?N:function(X,ie,be){let Ce=!1,we,K=new Promise(rt=>{we=function(_e){Ce=!0,rt(_e)}}),Fe;try{Fe=N(X,ie,we)}catch(rt){Fe=Promise.reject(rt)}const me=Fe!==!0&&M(Fe);if(Fe!==!0&&!me&&!Ce)return!1;const qe=rt=>{rt.then(_e=>{be(_e)},_e=>{let Ne;_e&&(_e instanceof Error||typeof _e.message=="string")?Ne=_e.message:Ne="An unexpected error occurred",be({__mozWebExtensionPolyfillReject__:!0,message:Ne})}).catch(_e=>{console.error("Failed to send onMessage rejected reply",_e)})};return qe(me?Fe:K),!0}),pe=({reject:N,resolve:B},X)=>{A.runtime.lastError?A.runtime.lastError.message===u?B():N(new Error(A.runtime.lastError.message)):X&&X.__mozWebExtensionPolyfillReject__?N(new Error(X.message)):B(X)},fe=(N,B,X,...ie)=>{if(ie.length<B.minArgs)throw new Error(`Expected at least ${B.minArgs} ${E(B.minArgs)} for ${N}(), got ${ie.length}`);if(ie.length>B.maxArgs)throw new Error(`Expected at most ${B.maxArgs} ${E(B.maxArgs)} for ${N}(), got ${ie.length}`);return new Promise((be,Ce)=>{const we=pe.bind(null,{resolve:be,reject:Ce});ie.push(we),X.sendMessage(...ie)})},ge={devtools:{network:{onRequestFinished:V(z)}},runtime:{onMessage:V(J),onMessageExternal:V(J),sendMessage:fe.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:fe.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},Se={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return T.privacy={network:{"*":Se},services:{"*":Se},websites:{"*":Se}},Y(A,ge,T)};i.exports=h(chrome)}})})(Rs);var Tg=Rs.exports;const Ot=Gn(Tg),kg=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),Og=new Map(kg);class Oa extends Error{name="NonError";constructor(n){super(Oa._prepareSuperMessage(n))}static _prepareSuperMessage(n){try{return JSON.stringify(n)}catch{return String(n)}}}const Eg=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],la=new WeakSet,Mg=e=>{la.add(e);const n=e.toJSON();return la.delete(e),n},Ls=e=>Og.get(e)??Error,Ea=({from:e,seen:n,to:i,forceEnumerable:u,maxDepth:h,depth:A,useToJSON:T,serialize:S})=>{if(!i)if(Array.isArray(e))i=[];else if(!S&&Qi(e)){const O=Ls(e.name);i=new O}else i={};if(n.push(e),A>=h)return i;if(T&&typeof e.toJSON=="function"&&!la.has(e))return Mg(e);const M=O=>Ea({from:O,seen:[...n],forceEnumerable:u,maxDepth:h,depth:A,useToJSON:T,serialize:S});for(const[O,E]of Object.entries(e)){if(E&&E instanceof Uint8Array&&E.constructor.name==="Buffer"){i[O]="[object Buffer]";continue}if(E!==null&&typeof E=="object"&&typeof E.pipe=="function"){i[O]="[object Stream]";continue}if(typeof E!="function"){if(!E||typeof E!="object"){try{i[O]=E}catch{}continue}if(!n.includes(e[O])){A++,i[O]=M(e[O]);continue}i[O]="[Circular]"}}for(const{property:O,enumerable:E}of Eg)typeof e[O]<"u"&&e[O]!==null&&Object.defineProperty(i,O,{value:Qi(e[O])?M(e[O]):e[O],enumerable:u?!0:E,configurable:!0,writable:!0});return i};function Fg(e,n={}){const{maxDepth:i=Number.POSITIVE_INFINITY,useToJSON:u=!0}=n;return typeof e=="object"&&e!==null?Ea({from:e,seen:[],forceEnumerable:!0,maxDepth:i,depth:0,useToJSON:u,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function jg(e,n={}){const{maxDepth:i=Number.POSITIVE_INFINITY}=n;if(e instanceof Error)return e;if(Dg(e)){const u=Ls(e.name);return Ea({from:e,seen:[],to:new u,maxDepth:i,depth:0,serialize:!1})}return new Oa(e)}function Qi(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function Dg(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var $g=Object.defineProperty,Ig=Object.defineProperties,Bg=Object.getOwnPropertyDescriptors,Wi=Object.getOwnPropertySymbols,Rg=Object.prototype.hasOwnProperty,Lg=Object.prototype.propertyIsEnumerable,Yi=(e,n,i)=>n in e?$g(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,Zi=(e,n)=>{for(var i in n||(n={}))Rg.call(n,i)&&Yi(e,i,n[i]);if(Wi)for(var i of Wi(n))Lg.call(n,i)&&Yi(e,i,n[i]);return e},Ji=(e,n)=>Ig(e,Bg(n)),qg=(e,n,i)=>new Promise((u,h)=>{var A=M=>{try{S(i.next(M))}catch(O){h(O)}},T=M=>{try{S(i.throw(M))}catch(O){h(O)}},S=M=>M.done?u(M.value):Promise.resolve(M.value).then(A,T);S((i=i.apply(e,n)).next())});function Ng(e){let n,i={};function u(){Object.entries(i).length===0&&(n==null||n(),n=void 0)}let h=Math.floor(Math.random()*1e4);function A(){return h++}return{sendMessage(T,S,...M){return qg(this,null,function*(){var O,E,L,G;const Z={id:A(),type:T,data:S,timestamp:Date.now()},Y=(E=yield(O=e.verifyMessageData)==null?void 0:O.call(e,Z))!=null?E:Z;(L=e.logger)==null||L.debug(`[messaging] sendMessage {id=${Y.id}} ─ᐅ`,Y,...M);const V=yield e.sendMessage(Y,...M),{res:z,err:J}=V??{err:new Error("No response")};if((G=e.logger)==null||G.debug(`[messaging] sendMessage {id=${Y.id}} ᐊ─`,{res:z,err:J}),J!=null)throw jg(J);return z})},onMessage(T,S){var M,O,E;if(n==null&&((M=e.logger)==null||M.debug(`[messaging] "${T}" initialized the message listener for this context`),n=e.addRootListener(L=>{var G,Z;if(typeof L.type!="string"||typeof L.timestamp!="number"){if(e.breakError)return;const z=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(L)}`);throw(G=e.logger)==null||G.error(z),z}(Z=e==null?void 0:e.logger)==null||Z.debug("[messaging] Received message",L);const Y=i[L.type];if(Y==null)return;const V=Y(L);return Promise.resolve(V).then(z=>{var J,pe;return(pe=(J=e.verifyMessageData)==null?void 0:J.call(e,z))!=null?pe:z}).then(z=>{var J;return(J=e==null?void 0:e.logger)==null||J.debug(`[messaging] onMessage {id=${L.id}} ─ᐅ`,{res:z}),{res:z}}).catch(z=>{var J;return(J=e==null?void 0:e.logger)==null||J.debug(`[messaging] onMessage {id=${L.id}} ─ᐅ`,{err:z}),{err:Fg(z)}})})),i[T]!=null){const L=Error(`[messaging] In this JS context, only one listener can be setup for ${T}`);throw(O=e.logger)==null||O.error(L),L}return i[T]=S,(E=e.logger)==null||E.log(`[messaging] Added listener for ${T}`),()=>{delete i[T],u()}},removeAllListeners(){Object.keys(i).forEach(T=>{delete i[T]}),u()}}}function Ug(e){return Ng(Ji(Zi({},e),{sendMessage(n,i){if(i==null)return Ot.runtime.sendMessage(n);const u=typeof i=="number"?{tabId:i}:i;return Ot.tabs.sendMessage(u.tabId,n,u.frameId!=null?{frameId:u.frameId}:void 0)},addRootListener(n){const i=(u,h)=>n(typeof u=="object"?Ji(Zi({},u),{sender:h}):u);return Ot.runtime.onMessage.addListener(i),()=>Ot.runtime.onMessage.removeListener(i)}}))}/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Vg=function(n){return n!=null&&typeof n=="object"&&Array.isArray(n)===!1};/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */const qs=Vg;var Hg=function(e,n,i){if(qs(i)||(i={default:i}),!Ki(e))return typeof i.default<"u"?i.default:e;typeof n=="number"&&(n=String(n));const u=Array.isArray(n),h=typeof n=="string",A=i.separator||".",T=i.joinChar||(typeof A=="string"?A:".");if(!h&&!u)return e;if(h&&n in e)return Gr(n,e,i)?e[n]:i.default;let S=u?n:Gg(n,A,i),M=S.length,O=0;do{let E=S[O];for(typeof E=="number"&&(E=String(E));E&&E.slice(-1)==="\\";)E=Xi([E.slice(0,-1),S[++O]||""],T,i);if(E in e){if(!Gr(E,e,i))return i.default;e=e[E]}else{let L=!1,G=O+1;for(;G<M;)if(E=Xi([E,S[G++]],T,i),L=E in e){if(!Gr(E,e,i))return i.default;e=e[E],O=G-1;break}if(!L)return i.default}}while(++O<M&&Ki(e));return O===M?e:i.default};function Xi(e,n,i){return typeof i.join=="function"?i.join(e):e[0]+n+e[1]}function Gg(e,n,i){return typeof i.split=="function"?i.split(e):e.split(n)}function Gr(e,n,i){return typeof i.isValid=="function"?i.isValid(e,n):!0}function Ki(e){return qs(e)||Array.isArray(e)||typeof e=="function"}const zg=Gn(Hg);var Qg=(e,n,i)=>new Promise((u,h)=>{var A=M=>{try{S(i.next(M))}catch(O){h(O)}},T=M=>{try{S(i.throw(M))}catch(O){h(O)}},S=M=>M.done?u(M.value):Promise.resolve(M.value).then(A,T);S((i=i.apply(e,n)).next())});function Wg(){if(!Yg())return!1;const e=Ot.runtime.getManifest();return e.background?e.manifest_version===3?Xg():Jg():!1}function Yg(){var e;return!!((e=Ot.runtime)!=null&&e.id)}var Zg=["/_generated_background_page.html"];function Jg(){return typeof window<"u"&&Zg.includes(location.pathname)}function Xg(){return typeof window>"u"}function Kg(e,n,i){let u;const h=`proxy-service.${e}`,{onMessage:A,sendMessage:T}=Ug(i);function S(M){const O=()=>{},E=new Proxy(O,{apply(L,G,Z){return Qg(this,null,function*(){return yield T(h,{path:M,args:Z})})},get(L,G,Z){return G==="__proxy"||typeof G=="symbol"?Reflect.get(L,G,Z):S(M==null?G:`${M}.${G}`)}});return E.__proxy=!0,E}return[function(...O){return u=n(...O),A(h,({data:E})=>{const L=E.path==null?u:zg(u??{},E.path);if(L)return Promise.resolve(L.bind(u)(...E.args))}),u},function(){if(!Wg())return S();if(u==null)throw Error(`Failed to get an instance of ${e}: in background, but registerService has not been called. Did you forget to call registerService?`);return u}]}var Ns={exports:{}};(function(e,n){(function(i,u){e.exports=u()})(zr,function(){var i=function(t,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])})(t,r)},u=function(){return(u=Object.assign||function(t){for(var r,a=1,s=arguments.length;a<s;a++)for(var o in r=arguments[a])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)};function h(t,r,a){for(var s,o=0,c=r.length;o<c;o++)!s&&o in r||((s=s||Array.prototype.slice.call(r,0,o))[o]=r[o]);return t.concat(s||Array.prototype.slice.call(r))}var A=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:zr,T=Object.keys,S=Array.isArray;function M(t,r){return typeof r!="object"||T(r).forEach(function(a){t[a]=r[a]}),t}typeof Promise>"u"||A.Promise||(A.Promise=Promise);var O=Object.getPrototypeOf,E={}.hasOwnProperty;function L(t,r){return E.call(t,r)}function G(t,r){typeof r=="function"&&(r=r(O(t))),(typeof Reflect>"u"?T:Reflect.ownKeys)(r).forEach(function(a){Y(t,a,r[a])})}var Z=Object.defineProperty;function Y(t,r,a,s){Z(t,r,M(a&&L(a,"get")&&typeof a.get=="function"?{get:a.get,set:a.set,configurable:!0}:{value:a,configurable:!0,writable:!0},s))}function V(t){return{from:function(r){return t.prototype=Object.create(r.prototype),Y(t.prototype,"constructor",t),{extend:G.bind(null,t.prototype)}}}}var z=Object.getOwnPropertyDescriptor,J=[].slice;function pe(t,r,a){return J.call(t,r,a)}function fe(t,r){return r(t)}function ge(t){if(!t)throw new Error("Assertion Failed")}function Se(t){A.setImmediate?setImmediate(t):setTimeout(t,0)}function N(t,r){if(typeof r=="string"&&L(t,r))return t[r];if(!r)return t;if(typeof r!="string"){for(var a=[],s=0,o=r.length;s<o;++s){var c=N(t,r[s]);a.push(c)}return a}var l=r.indexOf(".");if(l!==-1){var f=t[r.substr(0,l)];return f==null?void 0:N(f,r.substr(l+1))}}function B(t,r,a){if(t&&r!==void 0&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof r!="string"&&"length"in r){ge(typeof a!="string"&&"length"in a);for(var s=0,o=r.length;s<o;++s)B(t,r[s],a[s])}else{var c,l,f=r.indexOf(".");f!==-1?(c=r.substr(0,f),(l=r.substr(f+1))===""?a===void 0?S(t)&&!isNaN(parseInt(c))?t.splice(c,1):delete t[c]:t[c]=a:B(f=!(f=t[c])||!L(t,c)?t[c]={}:f,l,a)):a===void 0?S(t)&&!isNaN(parseInt(r))?t.splice(r,1):delete t[r]:t[r]=a}}function X(t){var r,a={};for(r in t)L(t,r)&&(a[r]=t[r]);return a}var ie=[].concat;function be(t){return ie.apply([],t)}var Qe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(be([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(r){return r+t+"Array"})}))).filter(function(t){return A[t]}),Ce=new Set(Qe.map(function(t){return A[t]})),we=null;function K(t){return we=new WeakMap,t=function r(a){if(!a||typeof a!="object")return a;var s=we.get(a);if(s)return s;if(S(a)){s=[],we.set(a,s);for(var o=0,c=a.length;o<c;++o)s.push(r(a[o]))}else if(Ce.has(a.constructor))s=a;else{var l,f=O(a);for(l in s=f===Object.prototype?{}:Object.create(f),we.set(a,s),a)L(a,l)&&(s[l]=r(a[l]))}return s}(t),we=null,t}var Fe={}.toString;function me(t){return Fe.call(t).slice(8,-1)}var qe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",rt=typeof qe=="symbol"?function(t){var r;return t!=null&&(r=t[qe])&&r.apply(t)}:function(){return null};function _e(t,r){return r=t.indexOf(r),0<=r&&t.splice(r,1),0<=r}var Ne={};function Ge(t){var r,a,s,o;if(arguments.length===1){if(S(t))return t.slice();if(this===Ne&&typeof t=="string")return[t];if(o=rt(t)){for(a=[];!(s=o.next()).done;)a.push(s.value);return a}if(t==null)return[t];if(typeof(r=t.length)!="number")return[t];for(a=new Array(r);r--;)a[r]=t[r];return a}for(r=arguments.length,a=new Array(r);r--;)a[r]=arguments[r];return a}var rr=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Lt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Be=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Lt),Us={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function bt(t,r){this.name=t,this.message=r}function Ma(t,r){return t+". Errors: "+Object.keys(r).map(function(a){return r[a].toString()}).filter(function(a,s,o){return o.indexOf(a)===s}).join(`
`)}function on(t,r,a,s){this.failures=r,this.failedKeys=s,this.successCount=a,this.message=Ma(t,r)}function wt(t,r){this.name="BulkError",this.failures=Object.keys(r).map(function(a){return r[a]}),this.failuresByPos=r,this.message=Ma(t,this.failures)}V(bt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),V(on).from(bt),V(wt).from(bt);var ar=Be.reduce(function(t,r){return t[r]=r+"Error",t},{}),Vs=bt,W=Be.reduce(function(t,r){var a=r+"Error";function s(o,c){this.name=a,o?typeof o=="string"?(this.message="".concat(o).concat(c?`
 `+c:""),this.inner=c||null):typeof o=="object"&&(this.message="".concat(o.name," ").concat(o.message),this.inner=o):(this.message=Us[r]||a,this.inner=null)}return V(s).from(Vs),t[r]=s,t},{});W.Syntax=SyntaxError,W.Type=TypeError,W.Range=RangeError;var Fa=Lt.reduce(function(t,r){return t[r+"Error"]=W[r],t},{}),un=Be.reduce(function(t,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(t[r+"Error"]=W[r]),t},{});function oe(){}function Bt(t){return t}function Hs(t,r){return t==null||t===Bt?r:function(a){return r(t(a))}}function at(t,r){return function(){t.apply(this,arguments),r.apply(this,arguments)}}function Gs(t,r){return t===oe?r:function(){var a=t.apply(this,arguments);a!==void 0&&(arguments[0]=a);var s=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var c=r.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?at(s,this.onsuccess):s),o&&(this.onerror=this.onerror?at(o,this.onerror):o),c!==void 0?c:a}}function zs(t,r){return t===oe?r:function(){t.apply(this,arguments);var a=this.onsuccess,s=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?at(a,this.onsuccess):a),s&&(this.onerror=this.onerror?at(s,this.onerror):s)}}function Qs(t,r){return t===oe?r:function(a){var s=t.apply(this,arguments);M(a,s);var o=this.onsuccess,c=this.onerror;return this.onsuccess=null,this.onerror=null,a=r.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?at(o,this.onsuccess):o),c&&(this.onerror=this.onerror?at(c,this.onerror):c),s===void 0?a===void 0?void 0:a:M(s,a)}}function Ws(t,r){return t===oe?r:function(){return r.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function ir(t,r){return t===oe?r:function(){var a=t.apply(this,arguments);if(a&&typeof a.then=="function"){for(var s=this,o=arguments.length,c=new Array(o);o--;)c[o]=arguments[o];return a.then(function(){return r.apply(s,c)})}return r.apply(this,arguments)}}un.ModifyError=on,un.DexieError=bt,un.BulkError=wt;var Ue=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ja(t){Ue=t}var Rt={},Da=100,Qe=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,O(t),t];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,O(r),t]}(),Lt=Qe[0],Be=Qe[1],Qe=Qe[2],Be=Be&&Be.then,it=Lt&&Lt.constructor,sr=!!Qe,qt=function(t,r){Nt.push([t,r]),cn&&(queueMicrotask(Zs),cn=!1)},or=!0,cn=!0,st=[],ln=[],ur=Bt,Ze={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:oe,pgp:!1,env:{},finalize:oe},H=Ze,Nt=[],ot=0,fn=[];function q(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=H;if(typeof t!="function"){if(t!==Rt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&lr(this,this._value))}this._state=null,this._value=null,++r.ref,function a(s,o){try{o(function(c){if(s._state===null){if(c===s)throw new TypeError("A promise cannot be resolved with itself.");var l=s._lib&&_t();c&&typeof c.then=="function"?a(s,function(f,p){c instanceof q?c._then(f,p):c.then(f,p)}):(s._state=!0,s._value=c,Ia(s)),l&&At()}},lr.bind(null,s))}catch(c){lr(s,c)}}(this,t)}var cr={get:function(){var t=H,r=mn;function a(s,o){var c=this,l=!t.global&&(t!==H||r!==mn),f=l&&!Xe(),p=new q(function(g,b){fr(c,new $a(Ra(s,t,l,f),Ra(o,t,l,f),g,b,t))});return this._consoleTask&&(p._consoleTask=this._consoleTask),p}return a.prototype=Rt,a},set:function(t){Y(this,"then",t&&t.prototype===Rt?cr:{get:function(){return t},set:cr.set})}};function $a(t,r,a,s,o){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof r=="function"?r:null,this.resolve=a,this.reject=s,this.psd=o}function lr(t,r){var a,s;ln.push(r),t._state===null&&(a=t._lib&&_t(),r=ur(r),t._state=!1,t._value=r,s=t,st.some(function(o){return o._value===s._value})||st.push(s),Ia(t),a&&At())}function Ia(t){var r=t._listeners;t._listeners=[];for(var a=0,s=r.length;a<s;++a)fr(t,r[a]);var o=t._PSD;--o.ref||o.finalize(),ot===0&&(++ot,qt(function(){--ot==0&&dr()},[]))}function fr(t,r){if(t._state!==null){var a=t._state?r.onFulfilled:r.onRejected;if(a===null)return(t._state?r.resolve:r.reject)(t._value);++r.psd.ref,++ot,qt(Ys,[a,t,r])}else t._listeners.push(r)}function Ys(t,r,a){try{var s,o=r._value;!r._state&&ln.length&&(ln=[]),s=Ue&&r._consoleTask?r._consoleTask.run(function(){return t(o)}):t(o),r._state||ln.indexOf(o)!==-1||function(c){for(var l=st.length;l;)if(st[--l]._value===c._value)return st.splice(l,1)}(r),a.resolve(s)}catch(c){a.reject(c)}finally{--ot==0&&dr(),--a.psd.ref||a.psd.finalize()}}function Zs(){ut(Ze,function(){_t()&&At()})}function _t(){var t=or;return cn=or=!1,t}function At(){var t,r,a;do for(;0<Nt.length;)for(t=Nt,Nt=[],a=t.length,r=0;r<a;++r){var s=t[r];s[0].apply(null,s[1])}while(0<Nt.length);cn=or=!0}function dr(){var t=st;st=[],t.forEach(function(s){s._PSD.onunhandled.call(null,s._value,s)});for(var r=fn.slice(0),a=r.length;a;)r[--a]()}function dn(t){return new q(Rt,!1,t)}function de(t,r){var a=H;return function(){var s=_t(),o=H;try{return Ke(a,!0),t.apply(this,arguments)}catch(c){r&&r(c)}finally{Ke(o,!1),s&&At()}}}G(q.prototype,{then:cr,_then:function(t,r){fr(this,new $a(null,null,t,r,H))},catch:function(t){if(arguments.length===1)return this.then(null,t);var r=t,a=arguments[1];return typeof r=="function"?this.then(null,function(s){return(s instanceof r?a:dn)(s)}):this.then(null,function(s){return(s&&s.name===r?a:dn)(s)})},finally:function(t){return this.then(function(r){return q.resolve(t()).then(function(){return r})},function(r){return q.resolve(t()).then(function(){return dn(r)})})},timeout:function(t,r){var a=this;return t<1/0?new q(function(s,o){var c=setTimeout(function(){return o(new W.Timeout(r))},t);a.then(s,o).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Y(q.prototype,Symbol.toStringTag,"Dexie.Promise"),Ze.env=Ba(),G(q,{all:function(){var t=Ge.apply(null,arguments).map(gn);return new q(function(r,a){t.length===0&&r([]);var s=t.length;t.forEach(function(o,c){return q.resolve(o).then(function(l){t[c]=l,--s||r(t)},a)})})},resolve:function(t){return t instanceof q?t:t&&typeof t.then=="function"?new q(function(r,a){t.then(r,a)}):new q(Rt,!0,t)},reject:dn,race:function(){var t=Ge.apply(null,arguments).map(gn);return new q(function(r,a){t.map(function(s){return q.resolve(s).then(r,a)})})},PSD:{get:function(){return H},set:function(t){return H=t}},totalEchoes:{get:function(){return mn}},newPSD:Je,usePSD:ut,scheduler:{get:function(){return qt},set:function(t){qt=t}},rejectionMapper:{get:function(){return ur},set:function(t){ur=t}},follow:function(t,r){return new q(function(a,s){return Je(function(o,c){var l=H;l.unhandleds=[],l.onunhandled=c,l.finalize=at(function(){var f,p=this;f=function(){p.unhandleds.length===0?o():c(p.unhandleds[0])},fn.push(function g(){f(),fn.splice(fn.indexOf(g),1)}),++ot,qt(function(){--ot==0&&dr()},[])},l.finalize),t()},r,a,s)})}}),it&&(it.allSettled&&Y(q,"allSettled",function(){var t=Ge.apply(null,arguments).map(gn);return new q(function(r){t.length===0&&r([]);var a=t.length,s=new Array(a);t.forEach(function(o,c){return q.resolve(o).then(function(l){return s[c]={status:"fulfilled",value:l}},function(l){return s[c]={status:"rejected",reason:l}}).then(function(){return--a||r(s)})})})}),it.any&&typeof AggregateError<"u"&&Y(q,"any",function(){var t=Ge.apply(null,arguments).map(gn);return new q(function(r,a){t.length===0&&a(new AggregateError([]));var s=t.length,o=new Array(s);t.forEach(function(c,l){return q.resolve(c).then(function(f){return r(f)},function(f){o[l]=f,--s||a(new AggregateError(o))})})})}),it.withResolvers&&(q.withResolvers=it.withResolvers));var Ae={awaits:0,echoes:0,id:0},Js=0,hn=[],pn=0,mn=0,Xs=0;function Je(t,r,a,s){var o=H,c=Object.create(o);return c.parent=o,c.ref=0,c.global=!1,c.id=++Xs,Ze.env,c.env=sr?{Promise:q,PromiseProp:{value:q,configurable:!0,writable:!0},all:q.all,race:q.race,allSettled:q.allSettled,any:q.any,resolve:q.resolve,reject:q.reject}:{},r&&M(c,r),++o.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()},s=ut(c,t,a,s),c.ref===0&&c.finalize(),s}function xt(){return Ae.id||(Ae.id=++Js),++Ae.awaits,Ae.echoes+=Da,Ae.id}function Xe(){return!!Ae.awaits&&(--Ae.awaits==0&&(Ae.id=0),Ae.echoes=Ae.awaits*Da,!0)}function gn(t){return Ae.echoes&&t&&t.constructor===it?(xt(),t.then(function(r){return Xe(),r},function(r){return Xe(),ye(r)})):t}function Ks(){var t=hn[hn.length-1];hn.pop(),Ke(t,!1)}function Ke(t,r){var a,s=H;(r?!Ae.echoes||pn++&&t===H:!pn||--pn&&t===H)||queueMicrotask(r?function(o){++mn,Ae.echoes&&--Ae.echoes!=0||(Ae.echoes=Ae.awaits=Ae.id=0),hn.push(H),Ke(o,!0)}.bind(null,t):Ks),t!==H&&(H=t,s===Ze&&(Ze.env=Ba()),sr&&(a=Ze.env.Promise,r=t.env,(s.global||t.global)&&(Object.defineProperty(A,"Promise",r.PromiseProp),a.all=r.all,a.race=r.race,a.resolve=r.resolve,a.reject=r.reject,r.allSettled&&(a.allSettled=r.allSettled),r.any&&(a.any=r.any))))}function Ba(){var t=A.Promise;return sr?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(A,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function ut(t,r,a,s,o){var c=H;try{return Ke(t,!0),r(a,s,o)}finally{Ke(c,!1)}}function Ra(t,r,a,s){return typeof t!="function"?t:function(){var o=H;a&&xt(),Ke(r,!0);try{return t.apply(this,arguments)}finally{Ke(o,!1),s&&queueMicrotask(Xe)}}}function hr(t){Promise===it&&Ae.echoes===0?pn===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}(""+Be).indexOf("[native code]")===-1&&(xt=Xe=oe);var ye=q.reject,ct="￿",ze="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",La="String expected.",St=[],yn="__dbnames",pr="readonly",mr="readwrite";function lt(t,r){return t?r?function(){return t.apply(this,arguments)&&r.apply(this,arguments)}:t:r}var qa={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function vn(t){return typeof t!="string"||/\./.test(t)?function(r){return r}:function(r){return r[t]===void 0&&t in r&&delete(r=K(r))[t],r}}function Na(){throw W.Type()}function ae(t,r){try{var a=Ua(t),s=Ua(r);if(a!==s)return a==="Array"?1:s==="Array"?-1:a==="binary"?1:s==="binary"?-1:a==="string"?1:s==="string"?-1:a==="Date"?1:s!=="Date"?NaN:-1;switch(a){case"number":case"Date":case"string":return r<t?1:t<r?-1:0;case"binary":return function(o,c){for(var l=o.length,f=c.length,p=l<f?l:f,g=0;g<p;++g)if(o[g]!==c[g])return o[g]<c[g]?-1:1;return l===f?0:l<f?-1:1}(Va(t),Va(r));case"Array":return function(o,c){for(var l=o.length,f=c.length,p=l<f?l:f,g=0;g<p;++g){var b=ae(o[g],c[g]);if(b!==0)return b}return l===f?0:l<f?-1:1}(t,r)}}catch{}return NaN}function Ua(t){var r=typeof t;return r!="object"?r:ArrayBuffer.isView(t)?"binary":(t=me(t),t==="ArrayBuffer"?"binary":t)}function Va(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var Ha=(ce.prototype._trans=function(t,r,a){var s=this._tx||H.trans,o=this.name,c=Ue&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function l(g,b,d){if(!d.schema[o])throw new W.NotFound("Table "+o+" not part of transaction");return r(d.idbtrans,d)}var f=_t();try{var p=s&&s.db._novip===this.db._novip?s===H.trans?s._promise(t,l,a):Je(function(){return s._promise(t,l,a)},{trans:s,transless:H.transless||H}):function g(b,d,_,m){if(b.idbdb&&(b._state.openComplete||H.letThrough||b._vip)){var v=b._createTransaction(d,_,b._dbSchema);try{v.create(),b._state.PR1398_maxLoop=3}catch(w){return w.name===ar.InvalidState&&b.isOpen()&&0<--b._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),b.close({disableAutoOpen:!1}),b.open().then(function(){return g(b,d,_,m)})):ye(w)}return v._promise(d,function(w,y){return Je(function(){return H.trans=v,m(w,y,v)})}).then(function(w){if(d==="readwrite")try{v.idbtrans.commit()}catch{}return d==="readonly"?w:v._completion.then(function(){return w})})}if(b._state.openComplete)return ye(new W.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen)return ye(new W.DatabaseClosed);b.open().catch(oe)}return b._state.dbReadyPromise.then(function(){return g(b,d,_,m)})}(this.db,t,[this.name],l);return c&&(p._consoleTask=c,p=p.catch(function(g){return console.trace(g),ye(g)})),p}finally{f&&At()}},ce.prototype.get=function(t,r){var a=this;return t&&t.constructor===Object?this.where(t).first(r):t==null?ye(new W.Type("Invalid argument to Table.get()")):this._trans("readonly",function(s){return a.core.get({trans:s,key:t}).then(function(o){return a.hook.reading.fire(o)})}).then(r)},ce.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(S(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var r=T(t);if(r.length===1)return this.where(r[0]).equals(t[r[0]]);var a=this.schema.indexes.concat(this.schema.primKey).filter(function(f){if(f.compound&&r.every(function(g){return 0<=f.keyPath.indexOf(g)})){for(var p=0;p<r.length;++p)if(r.indexOf(f.keyPath[p])===-1)return!1;return!0}return!1}).sort(function(f,p){return f.keyPath.length-p.keyPath.length})[0];if(a&&this.db._maxKey!==ct){var c=a.keyPath.slice(0,r.length);return this.where(c).equals(c.map(function(p){return t[p]}))}!a&&Ue&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(r.join("+"),"]"));var s=this.schema.idxByName;function o(f,p){return ae(f,p)===0}var l=r.reduce(function(d,p){var g=d[0],b=d[1],d=s[p],_=t[p];return[g||d,g||!d?lt(b,d&&d.multi?function(m){return m=N(m,p),S(m)&&m.some(function(v){return o(_,v)})}:function(m){return o(_,N(m,p))}):b]},[null,null]),c=l[0],l=l[1];return c?this.where(c.name).equals(t[c.keyPath]).filter(l):a?this.filter(l):this.where(r).equals("")},ce.prototype.filter=function(t){return this.toCollection().and(t)},ce.prototype.count=function(t){return this.toCollection().count(t)},ce.prototype.offset=function(t){return this.toCollection().offset(t)},ce.prototype.limit=function(t){return this.toCollection().limit(t)},ce.prototype.each=function(t){return this.toCollection().each(t)},ce.prototype.toArray=function(t){return this.toCollection().toArray(t)},ce.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ce.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,S(t)?"[".concat(t.join("+"),"]"):t))},ce.prototype.reverse=function(){return this.toCollection().reverse()},ce.prototype.mapToClass=function(t){var r,a=this.db,s=this.name;function o(){return r!==null&&r.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof Na&&(function(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function b(){this.constructor=p}i(p,g),p.prototype=g===null?Object.create(g):(b.prototype=g.prototype,new b)}(o,r=t),Object.defineProperty(o.prototype,"db",{get:function(){return a},enumerable:!1,configurable:!0}),o.prototype.table=function(){return s},t=o);for(var c=new Set,l=t.prototype;l;l=O(l))Object.getOwnPropertyNames(l).forEach(function(p){return c.add(p)});function f(p){if(!p)return p;var g,b=Object.create(t.prototype);for(g in p)if(!c.has(g))try{b[g]=p[g]}catch{}return b}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=f,this.hook("reading",f),t},ce.prototype.defineClass=function(){return this.mapToClass(function(t){M(this,t)})},ce.prototype.add=function(t,r){var a=this,s=this.schema.primKey,o=s.auto,c=s.keyPath,l=t;return c&&o&&(l=vn(c)(t)),this._trans("readwrite",function(f){return a.core.mutate({trans:f,type:"add",keys:r!=null?[r]:null,values:[l]})}).then(function(f){return f.numFailures?q.reject(f.failures[0]):f.lastResult}).then(function(f){if(c)try{B(t,c,f)}catch{}return f})},ce.prototype.update=function(t,r){return typeof t!="object"||S(t)?this.where(":id").equals(t).modify(r):(t=N(t,this.schema.primKey.keyPath),t===void 0?ye(new W.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(r))},ce.prototype.put=function(t,r){var a=this,s=this.schema.primKey,o=s.auto,c=s.keyPath,l=t;return c&&o&&(l=vn(c)(t)),this._trans("readwrite",function(f){return a.core.mutate({trans:f,type:"put",values:[l],keys:r!=null?[r]:null})}).then(function(f){return f.numFailures?q.reject(f.failures[0]):f.lastResult}).then(function(f){if(c)try{B(t,c,f)}catch{}return f})},ce.prototype.delete=function(t){var r=this;return this._trans("readwrite",function(a){return r.core.mutate({trans:a,type:"delete",keys:[t]})}).then(function(a){return a.numFailures?q.reject(a.failures[0]):void 0})},ce.prototype.clear=function(){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"deleteRange",range:qa})}).then(function(r){return r.numFailures?q.reject(r.failures[0]):void 0})},ce.prototype.bulkGet=function(t){var r=this;return this._trans("readonly",function(a){return r.core.getMany({keys:t,trans:a}).then(function(s){return s.map(function(o){return r.hook.reading.fire(o)})})})},ce.prototype.bulkAdd=function(t,r,a){var s=this,o=Array.isArray(r)?r:void 0,c=(a=a||(o?void 0:r))?a.allKeys:void 0;return this._trans("readwrite",function(l){var g=s.schema.primKey,f=g.auto,g=g.keyPath;if(g&&o)throw new W.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var p=t.length,g=g&&f?t.map(vn(g)):t;return s.core.mutate({trans:l,type:"add",keys:o,values:g,wantResults:c}).then(function(v){var d=v.numFailures,_=v.results,m=v.lastResult,v=v.failures;if(d===0)return c?_:m;throw new wt("".concat(s.name,".bulkAdd(): ").concat(d," of ").concat(p," operations failed"),v)})})},ce.prototype.bulkPut=function(t,r,a){var s=this,o=Array.isArray(r)?r:void 0,c=(a=a||(o?void 0:r))?a.allKeys:void 0;return this._trans("readwrite",function(l){var g=s.schema.primKey,f=g.auto,g=g.keyPath;if(g&&o)throw new W.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var p=t.length,g=g&&f?t.map(vn(g)):t;return s.core.mutate({trans:l,type:"put",keys:o,values:g,wantResults:c}).then(function(v){var d=v.numFailures,_=v.results,m=v.lastResult,v=v.failures;if(d===0)return c?_:m;throw new wt("".concat(s.name,".bulkPut(): ").concat(d," of ").concat(p," operations failed"),v)})})},ce.prototype.bulkUpdate=function(t){var r=this,a=this.core,s=t.map(function(l){return l.key}),o=t.map(function(l){return l.changes}),c=[];return this._trans("readwrite",function(l){return a.getMany({trans:l,keys:s,cache:"clone"}).then(function(f){var p=[],g=[];t.forEach(function(d,_){var m=d.key,v=d.changes,w=f[_];if(w){for(var y=0,x=Object.keys(v);y<x.length;y++){var P=x[y],C=v[P];if(P===r.schema.primKey.keyPath){if(ae(C,m)!==0)throw new W.Constraint("Cannot update primary key in bulkUpdate()")}else B(w,P,C)}c.push(_),p.push(m),g.push(w)}});var b=p.length;return a.mutate({trans:l,type:"put",keys:p,values:g,updates:{keys:s,changeSpecs:o}}).then(function(d){var _=d.numFailures,m=d.failures;if(_===0)return b;for(var v=0,w=Object.keys(m);v<w.length;v++){var y,x=w[v],P=c[Number(x)];P!=null&&(y=m[x],delete m[x],m[P]=y)}throw new wt("".concat(r.name,".bulkUpdate(): ").concat(_," of ").concat(b," operations failed"),m)})})})},ce.prototype.bulkDelete=function(t){var r=this,a=t.length;return this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"delete",keys:t})}).then(function(l){var o=l.numFailures,c=l.lastResult,l=l.failures;if(o===0)return c;throw new wt("".concat(r.name,".bulkDelete(): ").concat(o," of ").concat(a," operations failed"),l)})},ce);function ce(){}function Ut(t){function r(l,f){if(f){for(var p=arguments.length,g=new Array(p-1);--p;)g[p-1]=arguments[p];return a[l].subscribe.apply(null,g),t}if(typeof l=="string")return a[l]}var a={};r.addEventType=c;for(var s=1,o=arguments.length;s<o;++s)c(arguments[s]);return r;function c(l,f,p){if(typeof l!="object"){var g;f=f||Ws;var b={subscribers:[],fire:p=p||oe,subscribe:function(d){b.subscribers.indexOf(d)===-1&&(b.subscribers.push(d),b.fire=f(b.fire,d))},unsubscribe:function(d){b.subscribers=b.subscribers.filter(function(_){return _!==d}),b.fire=b.subscribers.reduce(f,p)}};return a[l]=r[l]=b}T(g=l).forEach(function(d){var _=g[d];if(S(_))c(d,g[d][0],g[d][1]);else{if(_!=="asap")throw new W.InvalidArgument("Invalid event config");var m=c(d,Bt,function(){for(var v=arguments.length,w=new Array(v);v--;)w[v]=arguments[v];m.subscribers.forEach(function(y){Se(function(){y.apply(null,w)})})})}})}}function Vt(t,r){return V(r).from({prototype:t}),r}function Pt(t,r){return!(t.filter||t.algorithm||t.or)&&(r?t.justLimit:!t.replayFilter)}function gr(t,r){t.filter=lt(t.filter,r)}function yr(t,r,a){var s=t.replayFilter;t.replayFilter=s?function(){return lt(s(),r())}:r,t.justLimit=a&&!s}function bn(t,r){if(t.isPrimKey)return r.primaryKey;var a=r.getIndexByKeyPath(t.index);if(!a)throw new W.Schema("KeyPath "+t.index+" on object store "+r.name+" is not indexed");return a}function Ga(t,r,a){var s=bn(t,r.schema);return r.openCursor({trans:a,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:s,range:t.range}})}function wn(t,r,a,s){var o=t.replayFilter?lt(t.filter,t.replayFilter()):t.filter;if(t.or){var c={},l=function(f,p,g){var b,d;o&&!o(p,g,function(_){return p.stop(_)},function(_){return p.fail(_)})||((d=""+(b=p.primaryKey))=="[object ArrayBuffer]"&&(d=""+new Uint8Array(b)),L(c,d)||(c[d]=!0,r(f,p,g)))};return Promise.all([t.or._iterate(l,a),za(Ga(t,s,a),t.algorithm,l,!t.keysOnly&&t.valueMapper)])}return za(Ga(t,s,a),lt(t.algorithm,o),r,!t.keysOnly&&t.valueMapper)}function za(t,r,a,s){var o=de(s?function(c,l,f){return a(s(c),l,f)}:a);return t.then(function(c){if(c)return c.start(function(){var l=function(){return c.continue()};r&&!r(c,function(f){return l=f},function(f){c.stop(f),l=oe},function(f){c.fail(f),l=oe})||o(c.value,c,function(f){return l=f}),l()})})}var Qe=Symbol(),Ht=(Qa.prototype.execute=function(t){if(this.add!==void 0){var r=this.add;if(S(r))return h(h([],S(t)?t:[],!0),r).sort();if(typeof r=="number")return(Number(t)||0)+r;if(typeof r=="bigint")try{return BigInt(t)+r}catch{return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(this.remove!==void 0){var a=this.remove;if(S(a))return S(t)?t.filter(function(s){return!a.includes(s)}).sort():[];if(typeof a=="number")return Number(t)-a;if(typeof a=="bigint")try{return BigInt(t)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return r=(r=this.replacePrefix)===null||r===void 0?void 0:r[0],r&&typeof t=="string"&&t.startsWith(r)?this.replacePrefix[1]+t.substring(r.length):t},Qa);function Qa(t){Object.assign(this,t)}var eo=(se.prototype._read=function(t,r){var a=this._ctx;return a.error?a.table._trans(null,ye.bind(null,a.error)):a.table._trans("readonly",t).then(r)},se.prototype._write=function(t){var r=this._ctx;return r.error?r.table._trans(null,ye.bind(null,r.error)):r.table._trans("readwrite",t,"locked")},se.prototype._addAlgorithm=function(t){var r=this._ctx;r.algorithm=lt(r.algorithm,t)},se.prototype._iterate=function(t,r){return wn(this._ctx,t,r,this._ctx.table.core)},se.prototype.clone=function(t){var r=Object.create(this.constructor.prototype),a=Object.create(this._ctx);return t&&M(a,t),r._ctx=a,r},se.prototype.raw=function(){return this._ctx.valueMapper=null,this},se.prototype.each=function(t){var r=this._ctx;return this._read(function(a){return wn(r,t,a,r.table.core)})},se.prototype.count=function(t){var r=this;return this._read(function(a){var s=r._ctx,o=s.table.core;if(Pt(s,!0))return o.count({trans:a,query:{index:bn(s,o.schema),range:s.range}}).then(function(l){return Math.min(l,s.limit)});var c=0;return wn(s,function(){return++c,!1},a,o).then(function(){return c})}).then(t)},se.prototype.sortBy=function(t,r){var a=t.split(".").reverse(),s=a[0],o=a.length-1;function c(p,g){return g?c(p[a[g]],g-1):p[s]}var l=this._ctx.dir==="next"?1:-1;function f(p,g){return ae(c(p,o),c(g,o))*l}return this.toArray(function(p){return p.sort(f)}).then(r)},se.prototype.toArray=function(t){var r=this;return this._read(function(a){var s=r._ctx;if(s.dir==="next"&&Pt(s,!0)&&0<s.limit){var o=s.valueMapper,c=bn(s,s.table.core.schema);return s.table.core.query({trans:a,limit:s.limit,values:!0,query:{index:c,range:s.range}}).then(function(f){return f=f.result,o?f.map(o):f})}var l=[];return wn(s,function(f){return l.push(f)},a,s.table.core).then(function(){return l})},t)},se.prototype.offset=function(t){var r=this._ctx;return t<=0||(r.offset+=t,Pt(r)?yr(r,function(){var a=t;return function(s,o){return a===0||(a===1?--a:o(function(){s.advance(a),a=0}),!1)}}):yr(r,function(){var a=t;return function(){return--a<0}})),this},se.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),yr(this._ctx,function(){var r=t;return function(a,s,o){return--r<=0&&s(o),0<=r}},!0),this},se.prototype.until=function(t,r){return gr(this._ctx,function(a,s,o){return!t(a.value)||(s(o),r)}),this},se.prototype.first=function(t){return this.limit(1).toArray(function(r){return r[0]}).then(t)},se.prototype.last=function(t){return this.reverse().first(t)},se.prototype.filter=function(t){var r;return gr(this._ctx,function(a){return t(a.value)}),(r=this._ctx).isMatch=lt(r.isMatch,t),this},se.prototype.and=function(t){return this.filter(t)},se.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},se.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},se.prototype.desc=function(){return this.reverse()},se.prototype.eachKey=function(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(a,s){t(s.key,s)})},se.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},se.prototype.eachPrimaryKey=function(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(a,s){t(s.primaryKey,s)})},se.prototype.keys=function(t){var r=this._ctx;r.keysOnly=!r.isMatch;var a=[];return this.each(function(s,o){a.push(o.key)}).then(function(){return a}).then(t)},se.prototype.primaryKeys=function(t){var r=this._ctx;if(r.dir==="next"&&Pt(r,!0)&&0<r.limit)return this._read(function(s){var o=bn(r,r.table.core.schema);return r.table.core.query({trans:s,values:!1,limit:r.limit,query:{index:o,range:r.range}})}).then(function(s){return s.result}).then(t);r.keysOnly=!r.isMatch;var a=[];return this.each(function(s,o){a.push(o.primaryKey)}).then(function(){return a}).then(t)},se.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},se.prototype.firstKey=function(t){return this.limit(1).keys(function(r){return r[0]}).then(t)},se.prototype.lastKey=function(t){return this.reverse().firstKey(t)},se.prototype.distinct=function(){var t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];if(!t||!t.multi)return this;var r={};return gr(this._ctx,function(o){var s=o.primaryKey.toString(),o=L(r,s);return r[s]=!0,!o}),this},se.prototype.modify=function(t){var r=this,a=this._ctx;return this._write(function(s){var o,c,l;l=typeof t=="function"?t:(o=T(t),c=o.length,function(y){for(var x=!1,P=0;P<c;++P){var C=o[P],k=t[C],F=N(y,C);k instanceof Ht?(B(y,C,k.execute(F)),x=!0):F!==k&&(B(y,C,k),x=!0)}return x});var f=a.table.core,d=f.schema.primaryKey,p=d.outbound,g=d.extractKey,b=200,d=r.db._options.modifyChunkSize;d&&(b=typeof d=="object"?d[f.name]||d["*"]||200:d);function _(y,C){var P=C.failures,C=C.numFailures;v+=y-C;for(var k=0,F=T(P);k<F.length;k++){var I=F[k];m.push(P[I])}}var m=[],v=0,w=[];return r.clone().primaryKeys().then(function(y){function x(C){var k=Math.min(b,y.length-C);return f.getMany({trans:s,keys:y.slice(C,C+k),cache:"immutable"}).then(function(F){for(var I=[],j=[],D=p?[]:null,R=[],$=0;$<k;++$){var U=F[$],te={value:K(U),primKey:y[C+$]};l.call(te,te.value,te)!==!1&&(te.value==null?R.push(y[C+$]):p||ae(g(U),g(te.value))===0?(j.push(te.value),p&&D.push(y[C+$])):(R.push(y[C+$]),I.push(te.value)))}return Promise.resolve(0<I.length&&f.mutate({trans:s,type:"add",values:I}).then(function(ne){for(var re in ne.failures)R.splice(parseInt(re),1);_(I.length,ne)})).then(function(){return(0<j.length||P&&typeof t=="object")&&f.mutate({trans:s,type:"put",keys:D,values:j,criteria:P,changeSpec:typeof t!="function"&&t,isAdditionalChunk:0<C}).then(function(ne){return _(j.length,ne)})}).then(function(){return(0<R.length||P&&t===vr)&&f.mutate({trans:s,type:"delete",keys:R,criteria:P,isAdditionalChunk:0<C}).then(function(ne){return _(R.length,ne)})}).then(function(){return y.length>C+k&&x(C+b)})})}var P=Pt(a)&&a.limit===1/0&&(typeof t!="function"||t===vr)&&{index:a.index,range:a.range};return x(0).then(function(){if(0<m.length)throw new on("Error modifying one or more objects",m,v,w);return y.length})})})},se.prototype.delete=function(){var t=this._ctx,r=t.range;return Pt(t)&&(t.isPrimKey||r.type===3)?this._write(function(a){var s=t.table.core.schema.primaryKey,o=r;return t.table.core.count({trans:a,query:{index:s,range:o}}).then(function(c){return t.table.core.mutate({trans:a,type:"deleteRange",range:o}).then(function(l){var f=l.failures;if(l.lastResult,l.results,l=l.numFailures,l)throw new on("Could not delete some values",Object.keys(f).map(function(p){return f[p]}),c-l);return c-l})})}):this.modify(vr)},se);function se(){}var vr=function(t,r){return r.value=null};function to(t,r){return t<r?-1:t===r?0:1}function no(t,r){return r<t?-1:t===r?0:1}function je(t,r,a){return t=t instanceof Ya?new t.Collection(t):t,t._ctx.error=new(a||TypeError)(r),t}function Ct(t){return new t.Collection(t,function(){return Wa("")}).limit(0)}function _n(t,r,a,s){var o,c,l,f,p,g,b,d=a.length;if(!a.every(function(v){return typeof v=="string"}))return je(t,La);function _(v){o=v==="next"?function(y){return y.toUpperCase()}:function(y){return y.toLowerCase()},c=v==="next"?function(y){return y.toLowerCase()}:function(y){return y.toUpperCase()},l=v==="next"?to:no;var w=a.map(function(y){return{lower:c(y),upper:o(y)}}).sort(function(y,x){return l(y.lower,x.lower)});f=w.map(function(y){return y.upper}),p=w.map(function(y){return y.lower}),b=(g=v)==="next"?"":s}_("next"),t=new t.Collection(t,function(){return et(f[0],p[d-1]+s)}),t._ondirectionchange=function(v){_(v)};var m=0;return t._addAlgorithm(function(v,w,y){var x=v.key;if(typeof x!="string")return!1;var P=c(x);if(r(P,p,m))return!0;for(var C=null,k=m;k<d;++k){var F=function(I,j,D,R,$,U){for(var te=Math.min(I.length,R.length),ne=-1,re=0;re<te;++re){var De=j[re];if(De!==R[re])return $(I[re],D[re])<0?I.substr(0,re)+D[re]+D.substr(re+1):$(I[re],R[re])<0?I.substr(0,re)+R[re]+D.substr(re+1):0<=ne?I.substr(0,ne)+j[ne]+D.substr(ne+1):null;$(I[re],De)<0&&(ne=re)}return te<R.length&&U==="next"?I+D.substr(I.length):te<I.length&&U==="prev"?I.substr(0,D.length):ne<0?null:I.substr(0,ne)+R[ne]+D.substr(ne+1)}(x,P,f[k],p[k],l,g);F===null&&C===null?m=k+1:(C===null||0<l(C,F))&&(C=F)}return w(C!==null?function(){v.continue(C+b)}:y),!1}),t}function et(t,r,a,s){return{type:2,lower:t,upper:r,lowerOpen:a,upperOpen:s}}function Wa(t){return{type:1,lower:t,upper:t}}var Ya=(Object.defineProperty(xe.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),xe.prototype.between=function(t,r,a,s){a=a!==!1,s=s===!0;try{return 0<this._cmp(t,r)||this._cmp(t,r)===0&&(a||s)&&(!a||!s)?Ct(this):new this.Collection(this,function(){return et(t,r,!a,!s)})}catch{return je(this,ze)}},xe.prototype.equals=function(t){return t==null?je(this,ze):new this.Collection(this,function(){return Wa(t)})},xe.prototype.above=function(t){return t==null?je(this,ze):new this.Collection(this,function(){return et(t,void 0,!0)})},xe.prototype.aboveOrEqual=function(t){return t==null?je(this,ze):new this.Collection(this,function(){return et(t,void 0,!1)})},xe.prototype.below=function(t){return t==null?je(this,ze):new this.Collection(this,function(){return et(void 0,t,!1,!0)})},xe.prototype.belowOrEqual=function(t){return t==null?je(this,ze):new this.Collection(this,function(){return et(void 0,t)})},xe.prototype.startsWith=function(t){return typeof t!="string"?je(this,La):this.between(t,t+ct,!0,!0)},xe.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):_n(this,function(r,a){return r.indexOf(a[0])===0},[t],ct)},xe.prototype.equalsIgnoreCase=function(t){return _n(this,function(r,a){return r===a[0]},[t],"")},xe.prototype.anyOfIgnoreCase=function(){var t=Ge.apply(Ne,arguments);return t.length===0?Ct(this):_n(this,function(r,a){return a.indexOf(r)!==-1},t,"")},xe.prototype.startsWithAnyOfIgnoreCase=function(){var t=Ge.apply(Ne,arguments);return t.length===0?Ct(this):_n(this,function(r,a){return a.some(function(s){return r.indexOf(s)===0})},t,ct)},xe.prototype.anyOf=function(){var t=this,r=Ge.apply(Ne,arguments),a=this._cmp;try{r.sort(a)}catch{return je(this,ze)}if(r.length===0)return Ct(this);var s=new this.Collection(this,function(){return et(r[0],r[r.length-1])});s._ondirectionchange=function(c){a=c==="next"?t._ascending:t._descending,r.sort(a)};var o=0;return s._addAlgorithm(function(c,l,f){for(var p=c.key;0<a(p,r[o]);)if(++o===r.length)return l(f),!1;return a(p,r[o])===0||(l(function(){c.continue(r[o])}),!1)}),s},xe.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},xe.prototype.noneOf=function(){var t=Ge.apply(Ne,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return je(this,ze)}var r=t.reduce(function(a,s){return a?a.concat([[a[a.length-1][1],s]]):[[-1/0,s]]},null);return r.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},xe.prototype.inAnyRange=function(x,r){var a=this,s=this._cmp,o=this._ascending,c=this._descending,l=this._min,f=this._max;if(x.length===0)return Ct(this);if(!x.every(function(P){return P[0]!==void 0&&P[1]!==void 0&&o(P[0],P[1])<=0}))return je(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",W.InvalidArgument);var p=!r||r.includeLowers!==!1,g=r&&r.includeUppers===!0,b,d=o;function _(P,C){return d(P[0],C[0])}try{(b=x.reduce(function(P,C){for(var k=0,F=P.length;k<F;++k){var I=P[k];if(s(C[0],I[1])<0&&0<s(C[1],I[0])){I[0]=l(I[0],C[0]),I[1]=f(I[1],C[1]);break}}return k===F&&P.push(C),P},[])).sort(_)}catch{return je(this,ze)}var m=0,v=g?function(P){return 0<o(P,b[m][1])}:function(P){return 0<=o(P,b[m][1])},w=p?function(P){return 0<c(P,b[m][0])}:function(P){return 0<=c(P,b[m][0])},y=v,x=new this.Collection(this,function(){return et(b[0][0],b[b.length-1][1],!p,!g)});return x._ondirectionchange=function(P){d=P==="next"?(y=v,o):(y=w,c),b.sort(_)},x._addAlgorithm(function(P,C,k){for(var F,I=P.key;y(I);)if(++m===b.length)return C(k),!1;return!v(F=I)&&!w(F)||(a._cmp(I,b[m][1])===0||a._cmp(I,b[m][0])===0||C(function(){d===o?P.continue(b[m][0]):P.continue(b[m][1])}),!1)}),x},xe.prototype.startsWithAnyOf=function(){var t=Ge.apply(Ne,arguments);return t.every(function(r){return typeof r=="string"})?t.length===0?Ct(this):this.inAnyRange(t.map(function(r){return[r,r+ct]})):je(this,"startsWithAnyOf() only works with strings")},xe);function xe(){}function Ve(t){return de(function(r){return Gt(r),t(r.target.error),!1})}function Gt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var zt="storagemutated",br="x-storagemutated-1",tt=Ut(null,zt),ro=(He.prototype._lock=function(){return ge(!H.global),++this._reculock,this._reculock!==1||H.global||(H.lockOwnerFor=this),this},He.prototype._unlock=function(){if(ge(!H.global),--this._reculock==0)for(H.global||(H.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{ut(t[1],t[0])}catch{}}return this},He.prototype._locked=function(){return this._reculock&&H.lockOwnerFor!==this},He.prototype.create=function(t){var r=this;if(!this.mode)return this;var a=this.db.idbdb,s=this.db._state.dbOpenError;if(ge(!this.idbtrans),!t&&!a)switch(s&&s.name){case"DatabaseClosedError":throw new W.DatabaseClosed(s);case"MissingAPIError":throw new W.MissingAPI(s.message,s);default:throw new W.OpenFailed(s)}if(!this.active)throw new W.TransactionInactive;return ge(this._completion._state===null),(t=this.idbtrans=t||(this.db.core||a).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=de(function(o){Gt(o),r._reject(t.error)}),t.onabort=de(function(o){Gt(o),r.active&&r._reject(new W.Abort(t.error)),r.active=!1,r.on("abort").fire(o)}),t.oncomplete=de(function(){r.active=!1,r._resolve(),"mutatedParts"in t&&tt.storagemutated.fire(t.mutatedParts)}),this},He.prototype._promise=function(t,r,a){var s=this;if(t==="readwrite"&&this.mode!=="readwrite")return ye(new W.ReadOnly("Transaction is readonly"));if(!this.active)return ye(new W.TransactionInactive);if(this._locked())return new q(function(c,l){s._blockedFuncs.push([function(){s._promise(t,r,a).then(c,l)},H])});if(a)return Je(function(){var c=new q(function(l,f){s._lock();var p=r(l,f,s);p&&p.then&&p.then(l,f)});return c.finally(function(){return s._unlock()}),c._lib=!0,c});var o=new q(function(c,l){var f=r(c,l,s);f&&f.then&&f.then(c,l)});return o._lib=!0,o},He.prototype._root=function(){return this.parent?this.parent._root():this},He.prototype.waitFor=function(t){var r,a=this._root(),s=q.resolve(t);a._waitingFor?a._waitingFor=a._waitingFor.then(function(){return s}):(a._waitingFor=s,a._waitingQueue=[],r=a.idbtrans.objectStore(a.storeNames[0]),function c(){for(++a._spinCount;a._waitingQueue.length;)a._waitingQueue.shift()();a._waitingFor&&(r.get(-1/0).onsuccess=c)}());var o=a._waitingFor;return new q(function(c,l){s.then(function(f){return a._waitingQueue.push(de(c.bind(null,f)))},function(f){return a._waitingQueue.push(de(l.bind(null,f)))}).finally(function(){a._waitingFor===o&&(a._waitingFor=null)})})},He.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new W.Abort))},He.prototype.table=function(t){var r=this._memoizedTables||(this._memoizedTables={});if(L(r,t))return r[t];var a=this.schema[t];if(!a)throw new W.NotFound("Table "+t+" not part of transaction");return a=new this.db.Table(t,a,this),a.core=this.db.core.table(t),r[t]=a},He);function He(){}function wr(t,r,a,s,o,c,l){return{name:t,keyPath:r,unique:a,multi:s,auto:o,compound:c,src:(a&&!l?"&":"")+(s?"*":"")+(o?"++":"")+Za(r)}}function Za(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function _r(t,r,a){return{name:t,primKey:r,indexes:a,mappedClass:null,idxByName:(s=function(o){return[o.name,o]},a.reduce(function(o,c,l){return l=s(c,l),l&&(o[l[0]]=l[1]),o},{}))};var s}var Qt=function(t){try{return t.only([[]]),Qt=function(){return[[]]},[[]]}catch{return Qt=function(){return ct},ct}};function Ar(t){return t==null?function(){}:typeof t=="string"?(r=t).split(".").length===1?function(a){return a[r]}:function(a){return N(a,r)}:function(a){return N(a,t)};var r}function Ja(t){return[].slice.call(t)}var ao=0;function Wt(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function io(t,r,p){function s(y){if(y.type===3)return null;if(y.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var m=y.lower,v=y.upper,w=y.lowerOpen,y=y.upperOpen;return m===void 0?v===void 0?null:r.upperBound(v,!!y):v===void 0?r.lowerBound(m,!!w):r.bound(m,v,!!w,!!y)}function o(_){var m,v=_.name;return{name:v,schema:_,mutate:function(w){var y=w.trans,x=w.type,P=w.keys,C=w.values,k=w.range;return new Promise(function(F,I){F=de(F);var j=y.objectStore(v),D=j.keyPath==null,R=x==="put"||x==="add";if(!R&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);var $,U=(P||C||{length:1}).length;if(P&&C&&P.length!==C.length)throw new Error("Given keys array must have same length as given values array.");if(U===0)return F({numFailures:0,failures:{},results:[],lastResult:void 0});function te(Ee){++De,Gt(Ee)}var ne=[],re=[],De=0;if(x==="deleteRange"){if(k.type===4)return F({numFailures:De,failures:re,results:[],lastResult:void 0});k.type===3?ne.push($=j.clear()):ne.push($=j.delete(s(k)))}else{var D=R?D?[C,P]:[C,null]:[P,null],ee=D[0],ke=D[1];if(R)for(var Oe=0;Oe<U;++Oe)ne.push($=ke&&ke[Oe]!==void 0?j[x](ee[Oe],ke[Oe]):j[x](ee[Oe])),$.onerror=te;else for(Oe=0;Oe<U;++Oe)ne.push($=j[x](ee[Oe])),$.onerror=te}function Dn(Ee){Ee=Ee.target.result,ne.forEach(function(ht,qr){return ht.error!=null&&(re[qr]=ht.error)}),F({numFailures:De,failures:re,results:x==="delete"?P:ne.map(function(ht){return ht.result}),lastResult:Ee})}$.onerror=function(Ee){te(Ee),Dn(Ee)},$.onsuccess=Dn})},getMany:function(w){var y=w.trans,x=w.keys;return new Promise(function(P,C){P=de(P);for(var k,F=y.objectStore(v),I=x.length,j=new Array(I),D=0,R=0,$=function(ne){ne=ne.target,j[ne._pos]=ne.result,++R===D&&P(j)},U=Ve(C),te=0;te<I;++te)x[te]!=null&&((k=F.get(x[te]))._pos=te,k.onsuccess=$,k.onerror=U,++D);D===0&&P(j)})},get:function(w){var y=w.trans,x=w.key;return new Promise(function(P,C){P=de(P);var k=y.objectStore(v).get(x);k.onsuccess=function(F){return P(F.target.result)},k.onerror=Ve(C)})},query:(m=g,function(w){return new Promise(function(y,x){y=de(y);var P,C,k,D=w.trans,F=w.values,I=w.limit,$=w.query,j=I===1/0?void 0:I,R=$.index,$=$.range,D=D.objectStore(v),R=R.isPrimaryKey?D:D.index(R.name),$=s($);if(I===0)return y({result:[]});m?((j=F?R.getAll($,j):R.getAllKeys($,j)).onsuccess=function(U){return y({result:U.target.result})},j.onerror=Ve(x)):(P=0,C=!F&&"openKeyCursor"in R?R.openKeyCursor($):R.openCursor($),k=[],C.onsuccess=function(U){var te=C.result;return te?(k.push(F?te.value:te.primaryKey),++P===I?y({result:k}):void te.continue()):y({result:k})},C.onerror=Ve(x))})}),openCursor:function(w){var y=w.trans,x=w.values,P=w.query,C=w.reverse,k=w.unique;return new Promise(function(F,I){F=de(F);var R=P.index,j=P.range,D=y.objectStore(v),D=R.isPrimaryKey?D:D.index(R.name),R=C?k?"prevunique":"prev":k?"nextunique":"next",$=!x&&"openKeyCursor"in D?D.openKeyCursor(s(j),R):D.openCursor(s(j),R);$.onerror=Ve(I),$.onsuccess=de(function(U){var te,ne,re,De,ee=$.result;ee?(ee.___id=++ao,ee.done=!1,te=ee.continue.bind(ee),ne=(ne=ee.continuePrimaryKey)&&ne.bind(ee),re=ee.advance.bind(ee),De=function(){throw new Error("Cursor not stopped")},ee.trans=y,ee.stop=ee.continue=ee.continuePrimaryKey=ee.advance=function(){throw new Error("Cursor not started")},ee.fail=de(I),ee.next=function(){var ke=this,Oe=1;return this.start(function(){return Oe--?ke.continue():ke.stop()}).then(function(){return ke})},ee.start=function(ke){function Oe(){if($.result)try{ke()}catch(Ee){ee.fail(Ee)}else ee.done=!0,ee.start=function(){throw new Error("Cursor behind last entry")},ee.stop()}var Dn=new Promise(function(Ee,ht){Ee=de(Ee),$.onerror=Ve(ht),ee.fail=ht,ee.stop=function(qr){ee.stop=ee.continue=ee.continuePrimaryKey=ee.advance=De,Ee(qr)}});return $.onsuccess=de(function(Ee){$.onsuccess=Oe,Oe()}),ee.continue=te,ee.continuePrimaryKey=ne,ee.advance=re,Oe(),Dn},F(ee)):F(null)},I)})},count:function(w){var y=w.query,x=w.trans,P=y.index,C=y.range;return new Promise(function(k,F){var I=x.objectStore(v),j=P.isPrimaryKey?I:I.index(P.name),I=s(C),j=I?j.count(I):j.count();j.onsuccess=de(function(D){return k(D.target.result)}),j.onerror=Ve(F)})}}}var c,l,f,b=(l=p,f=Ja((c=t).objectStoreNames),{schema:{name:c.name,tables:f.map(function(_){return l.objectStore(_)}).map(function(_){var m=_.keyPath,y=_.autoIncrement,v=S(m),w={},y={name:_.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:m==null,compound:v,keyPath:m,autoIncrement:y,unique:!0,extractKey:Ar(m)},indexes:Ja(_.indexNames).map(function(x){return _.index(x)}).map(function(k){var P=k.name,C=k.unique,F=k.multiEntry,k=k.keyPath,F={name:P,compound:S(k),keyPath:k,unique:C,multiEntry:F,extractKey:Ar(k)};return w[Wt(k)]=F}),getIndexByKeyPath:function(x){return w[Wt(x)]}};return w[":id"]=y.primaryKey,m!=null&&(w[Wt(m)]=y.primaryKey),y})},hasGetAll:0<f.length&&"getAll"in l.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),p=b.schema,g=b.hasGetAll,b=p.tables.map(o),d={};return b.forEach(function(_){return d[_.name]=_}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(_){if(!d[_])throw new Error("Table '".concat(_,"' not found"));return d[_]},MIN_KEY:-1/0,MAX_KEY:Qt(r),schema:p}}function so(t,r,a,s){var o=a.IDBKeyRange;return a.indexedDB,{dbcore:(s=io(r,o,s),t.dbcore.reduce(function(c,l){return l=l.create,u(u({},c),l(c))},s))}}function An(t,s){var a=s.db,s=so(t._middlewares,a,t._deps,s);t.core=s.dbcore,t.tables.forEach(function(o){var c=o.name;t.core.schema.tables.some(function(l){return l.name===c})&&(o.core=t.core.table(c),t[c]instanceof t.Table&&(t[c].core=o.core))})}function xn(t,r,a,s){a.forEach(function(o){var c=s[o];r.forEach(function(l){var f=function p(g,b){return z(g,b)||(g=O(g))&&p(g,b)}(l,o);(!f||"value"in f&&f.value===void 0)&&(l===t.Transaction.prototype||l instanceof t.Transaction?Y(l,o,{get:function(){return this.table(o)},set:function(p){Z(this,o,{value:p,writable:!0,configurable:!0,enumerable:!0})}}):l[o]=new t.Table(o,c))})})}function xr(t,r){r.forEach(function(a){for(var s in a)a[s]instanceof t.Table&&delete a[s]})}function oo(t,r){return t._cfg.version-r._cfg.version}function uo(t,r,a,s){var o=t._dbSchema;a.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=_r("$meta",Ka("")[0],[]),t._storeNames.push("$meta"));var c=t._createTransaction("readwrite",t._storeNames,o);c.create(a),c._completion.catch(s);var l=c._reject.bind(c),f=H.transless||H;Je(function(){return H.trans=c,H.transless=f,r!==0?(An(t,a),g=r,((p=c).storeNames.includes("$meta")?p.table("$meta").get("version").then(function(b){return b??g}):q.resolve(g)).then(function(b){return _=b,m=c,v=a,w=[],b=(d=t)._versions,y=d._dbSchema=Pn(0,d.idbdb,v),(b=b.filter(function(x){return x._cfg.version>=_})).length!==0?(b.forEach(function(x){w.push(function(){var P=y,C=x._cfg.dbschema;Cn(d,P,v),Cn(d,C,v),y=d._dbSchema=C;var k=Sr(P,C);k.add.forEach(function(R){Pr(v,R[0],R[1].primKey,R[1].indexes)}),k.change.forEach(function(R){if(R.recreate)throw new W.Upgrade("Not yet support for changing primary key");var $=v.objectStore(R.name);R.add.forEach(function(U){return Sn($,U)}),R.change.forEach(function(U){$.deleteIndex(U.name),Sn($,U)}),R.del.forEach(function(U){return $.deleteIndex(U)})});var F=x._cfg.contentUpgrade;if(F&&x._cfg.version>_){An(d,v),m._memoizedTables={};var I=X(C);k.del.forEach(function(R){I[R]=P[R]}),xr(d,[d.Transaction.prototype]),xn(d,[d.Transaction.prototype],T(I),I),m.schema=I;var j,D=rr(F);return D&&xt(),k=q.follow(function(){var R;(j=F(m))&&D&&(R=Xe.bind(null,null),j.then(R,R))}),j&&typeof j.then=="function"?q.resolve(j):k.then(function(){return j})}}),w.push(function(P){var C,k,F=x._cfg.dbschema;C=F,k=P,[].slice.call(k.db.objectStoreNames).forEach(function(I){return C[I]==null&&k.db.deleteObjectStore(I)}),xr(d,[d.Transaction.prototype]),xn(d,[d.Transaction.prototype],d._storeNames,d._dbSchema),m.schema=d._dbSchema}),w.push(function(P){d.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(d.idbdb.version/10)===x._cfg.version?(d.idbdb.deleteObjectStore("$meta"),delete d._dbSchema.$meta,d._storeNames=d._storeNames.filter(function(C){return C!=="$meta"})):P.objectStore("$meta").put(x._cfg.version,"version"))})}),function x(){return w.length?q.resolve(w.shift()(m.idbtrans)).then(x):q.resolve()}().then(function(){Xa(y,v)})):q.resolve();var d,_,m,v,w,y}).catch(l)):(T(o).forEach(function(b){Pr(a,b,o[b].primKey,o[b].indexes)}),An(t,a),void q.follow(function(){return t.on.populate.fire(c)}).catch(l));var p,g})}function co(t,r){Xa(t._dbSchema,r),r.db.version%10!=0||r.objectStoreNames.contains("$meta")||r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var a=Pn(0,t.idbdb,r);Cn(t,t._dbSchema,r);for(var s=0,o=Sr(a,t._dbSchema).change;s<o.length;s++){var c=function(l){if(l.change.length||l.recreate)return console.warn("Unable to patch indexes of table ".concat(l.name," because it has changes on the type of index or primary key.")),{value:void 0};var f=r.objectStore(l.name);l.add.forEach(function(p){Ue&&console.debug("Dexie upgrade patch: Creating missing index ".concat(l.name,".").concat(p.src)),Sn(f,p)})}(o[s]);if(typeof c=="object")return c.value}}function Sr(t,r){var a,s={del:[],add:[],change:[]};for(a in t)r[a]||s.del.push(a);for(a in r){var o=t[a],c=r[a];if(o){var l={name:a,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||o.primKey.auto!==c.primKey.auto)l.recreate=!0,s.change.push(l);else{var f=o.idxByName,p=c.idxByName,g=void 0;for(g in f)p[g]||l.del.push(g);for(g in p){var b=f[g],d=p[g];b?b.src!==d.src&&l.change.push(d):l.add.push(d)}(0<l.del.length||0<l.add.length||0<l.change.length)&&s.change.push(l)}}else s.add.push([a,c])}return s}function Pr(t,r,a,s){var o=t.db.createObjectStore(r,a.keyPath?{keyPath:a.keyPath,autoIncrement:a.auto}:{autoIncrement:a.auto});return s.forEach(function(c){return Sn(o,c)}),o}function Xa(t,r){T(t).forEach(function(a){r.db.objectStoreNames.contains(a)||(Ue&&console.debug("Dexie: Creating missing table",a),Pr(r,a,t[a].primKey,t[a].indexes))})}function Sn(t,r){t.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function Pn(t,r,a){var s={};return pe(r.objectStoreNames,0).forEach(function(o){for(var c=a.objectStore(o),l=wr(Za(g=c.keyPath),g||"",!0,!1,!!c.autoIncrement,g&&typeof g!="string",!0),f=[],p=0;p<c.indexNames.length;++p){var b=c.index(c.indexNames[p]),g=b.keyPath,b=wr(b.name,g,!!b.unique,!!b.multiEntry,!1,g&&typeof g!="string",!1);f.push(b)}s[o]=_r(o,l,f)}),s}function Cn(t,r,a){for(var s=a.db.objectStoreNames,o=0;o<s.length;++o){var c=s[o],l=a.objectStore(c);t._hasGetAll="getAll"in l;for(var f=0;f<l.indexNames.length;++f){var p=l.indexNames[f],g=l.index(p).keyPath,b=typeof g=="string"?g:"["+pe(g).join("+")+"]";!r[c]||(g=r[c].idxByName[b])&&(g.name=p,delete r[c].idxByName[b],r[c].idxByName[p]=g)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&A.WorkerGlobalScope&&A instanceof A.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Ka(t){return t.split(",").map(function(r,a){var s=(r=r.trim()).replace(/([&*]|\+\+)/g,""),o=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return wr(s,o||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),S(o),a===0)})}var lo=(Tn.prototype._parseStoresSpec=function(t,r){T(t).forEach(function(a){if(t[a]!==null){var s=Ka(t[a]),o=s.shift();if(o.unique=!0,o.multi)throw new W.Schema("Primary key cannot be multi-valued");s.forEach(function(c){if(c.auto)throw new W.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new W.Schema("Index must have a name and cannot be an empty string")}),r[a]=_r(a,o,s)}})},Tn.prototype.stores=function(a){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?M(this._cfg.storesSource,a):a;var a=r._versions,s={},o={};return a.forEach(function(c){M(s,c._cfg.storesSource),o=c._cfg.dbschema={},c._parseStoresSpec(s,o)}),r._dbSchema=o,xr(r,[r._allTables,r,r.Transaction.prototype]),xn(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],T(o),o),r._storeNames=T(o),this},Tn.prototype.upgrade=function(t){return this._cfg.contentUpgrade=ir(this._cfg.contentUpgrade||oe,t),this},Tn);function Tn(){}function Cr(t,r){var a=t._dbNamesDB;return a||(a=t._dbNamesDB=new We(yn,{addons:[],indexedDB:t,IDBKeyRange:r})).version(1).stores({dbnames:"name"}),a.table("dbnames")}function Tr(t){return t&&typeof t.databases=="function"}function kr(t){return Je(function(){return H.letThrough=!0,t()})}function Or(t){return!("from"in t)}var Te=function(t,r){if(!this){var a=new Te;return t&&"d"in t&&M(a,t),a}M(this,arguments.length?{d:1,from:t,to:1<arguments.length?r:t}:{d:0})};function Yt(t,r,a){var s=ae(r,a);if(!isNaN(s)){if(0<s)throw RangeError();if(Or(t))return M(t,{from:r,to:a,d:1});var o=t.l,s=t.r;if(ae(a,t.from)<0)return o?Yt(o,r,a):t.l={from:r,to:a,d:1,l:null,r:null},ti(t);if(0<ae(r,t.to))return s?Yt(s,r,a):t.r={from:r,to:a,d:1,l:null,r:null},ti(t);ae(r,t.from)<0&&(t.from=r,t.l=null,t.d=s?s.d+1:1),0<ae(a,t.to)&&(t.to=a,t.r=null,t.d=t.l?t.l.d+1:1),a=!t.r,o&&!t.l&&Zt(t,o),s&&a&&Zt(t,s)}}function Zt(t,r){Or(r)||function a(s,p){var c=p.from,l=p.to,f=p.l,p=p.r;Yt(s,c,l),f&&a(s,f),p&&a(s,p)}(t,r)}function ei(t,r){var a=kn(r),s=a.next();if(s.done)return!1;for(var o=s.value,c=kn(t),l=c.next(o.from),f=l.value;!s.done&&!l.done;){if(ae(f.from,o.to)<=0&&0<=ae(f.to,o.from))return!0;ae(o.from,f.from)<0?o=(s=a.next(f.from)).value:f=(l=c.next(o.from)).value}return!1}function kn(t){var r=Or(t)?null:{s:0,n:t};return{next:function(a){for(var s=0<arguments.length;r;)switch(r.s){case 0:if(r.s=1,s)for(;r.n.l&&ae(a,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!s||ae(a,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function ti(t){var r,a,s=(((r=t.r)===null||r===void 0?void 0:r.d)||0)-(((a=t.l)===null||a===void 0?void 0:a.d)||0),o=1<s?"r":s<-1?"l":"";o&&(r=o=="r"?"l":"r",a=u({},t),s=t[o],t.from=s.from,t.to=s.to,t[o]=s[o],a[o]=s[r],(t[r]=a).d=ni(a)),t.d=ni(t)}function ni(a){var r=a.r,a=a.l;return(r?a?Math.max(r.d,a.d):r.d:a?a.d:0)+1}function On(t,r){return T(r).forEach(function(a){t[a]?Zt(t[a],r[a]):t[a]=function s(o){var c,l,f={};for(c in o)L(o,c)&&(l=o[c],f[c]=!l||typeof l!="object"||Ce.has(l.constructor)?l:s(l));return f}(r[a])}),t}function Er(t,r){return t.all||r.all||Object.keys(t).some(function(a){return r[a]&&ei(r[a],t[a])})}G(Te.prototype,((Be={add:function(t){return Zt(this,t),this},addKey:function(t){return Yt(this,t,t),this},addKeys:function(t){var r=this;return t.forEach(function(a){return Yt(r,a,a)}),this},hasKey:function(t){var r=kn(this).next(t).value;return r&&ae(r.from,t)<=0&&0<=ae(r.to,t)}})[qe]=function(){return kn(this)},Be));var ft={},Mr={},Fr=!1;function En(t){On(Mr,t),Fr||(Fr=!0,setTimeout(function(){Fr=!1,jr(Mr,!(Mr={}))},0))}function jr(t,r){r===void 0&&(r=!1);var a=new Set;if(t.all)for(var s=0,o=Object.values(ft);s<o.length;s++)ri(l=o[s],t,a,r);else for(var c in t){var l,f=/^idb\:\/\/(.*)\/(.*)\//.exec(c);f&&(c=f[1],f=f[2],(l=ft["idb://".concat(c,"/").concat(f)])&&ri(l,t,a,r))}a.forEach(function(p){return p()})}function ri(t,r,a,s){for(var o=[],c=0,l=Object.entries(t.queries.query);c<l.length;c++){for(var f=l[c],p=f[0],g=[],b=0,d=f[1];b<d.length;b++){var _=d[b];Er(r,_.obsSet)?_.subscribers.forEach(function(y){return a.add(y)}):s&&g.push(_)}s&&o.push([p,g])}if(s)for(var m=0,v=o;m<v.length;m++){var w=v[m],p=w[0],g=w[1];t.queries.query[p]=g}}function fo(t){var r=t._state,a=t._deps.indexedDB;if(r.isBeingOpened||t.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?ye(r.dbOpenError):t});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var s=r.openCanceller,o=Math.round(10*t.verno),c=!1;function l(){if(r.openCanceller!==s)throw new W.DatabaseClosed("db.open() was cancelled")}function f(){return new q(function(_,m){if(l(),!a)throw new W.MissingAPI;var v=t.name,w=r.autoSchema||!o?a.open(v):a.open(v,o);if(!w)throw new W.MissingAPI;w.onerror=Ve(m),w.onblocked=de(t._fireOnBlocked),w.onupgradeneeded=de(function(y){var x;b=w.transaction,r.autoSchema&&!t._options.allowEmptyDB?(w.onerror=Gt,b.abort(),w.result.close(),(x=a.deleteDatabase(v)).onsuccess=x.onerror=de(function(){m(new W.NoSuchDatabase("Database ".concat(v," doesnt exist")))})):(b.onerror=Ve(m),y=y.oldVersion>Math.pow(2,62)?0:y.oldVersion,d=y<1,t.idbdb=w.result,c&&co(t,b),uo(t,y/10,b,m))},m),w.onsuccess=de(function(){b=null;var y,x,P,C,k,F=t.idbdb=w.result,I=pe(F.objectStoreNames);if(0<I.length)try{var j=F.transaction((C=I).length===1?C[0]:C,"readonly");if(r.autoSchema)x=F,P=j,(y=t).verno=x.version/10,P=y._dbSchema=Pn(0,x,P),y._storeNames=pe(x.objectStoreNames,0),xn(y,[y._allTables],T(P),P);else if(Cn(t,t._dbSchema,j),((k=Sr(Pn(0,(k=t).idbdb,j),k._dbSchema)).add.length||k.change.some(function(D){return D.add.length||D.change.length}))&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),F.close(),o=F.version+1,c=!0,_(f());An(t,j)}catch{}St.push(t),F.onversionchange=de(function(D){r.vcFired=!0,t.on("versionchange").fire(D)}),F.onclose=de(function(D){t.on("close").fire(D)}),d&&(k=t._deps,j=v,F=k.indexedDB,k=k.IDBKeyRange,Tr(F)||j===yn||Cr(F,k).put({name:j}).catch(oe)),_()},m)}).catch(function(_){switch(_==null?void 0:_.name){case"UnknownError":if(0<r.PR1398_maxLoop)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),f();break;case"VersionError":if(0<o)return o=0,f()}return q.reject(_)})}var p,g=r.dbReadyResolve,b=null,d=!1;return q.race([s,(typeof navigator>"u"?q.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(_){function m(){return indexedDB.databases().finally(_)}p=setInterval(m,100),m()}).finally(function(){return clearInterval(p)}):Promise.resolve()).then(f)]).then(function(){return l(),r.onReadyBeingFired=[],q.resolve(kr(function(){return t.on.ready.fire(t.vip)})).then(function _(){if(0<r.onReadyBeingFired.length){var m=r.onReadyBeingFired.reduce(ir,oe);return r.onReadyBeingFired=[],q.resolve(kr(function(){return m(t.vip)})).then(_)}})}).finally(function(){r.openCanceller===s&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(_){r.dbOpenError=_;try{b&&b.abort()}catch{}return s===r.openCanceller&&t._close(),ye(_)}).finally(function(){r.openComplete=!0,g()}).then(function(){var _;return d&&(_={},t.tables.forEach(function(m){m.schema.indexes.forEach(function(v){v.name&&(_["idb://".concat(t.name,"/").concat(m.name,"/").concat(v.name)]=new Te(-1/0,[[[]]]))}),_["idb://".concat(t.name,"/").concat(m.name,"/")]=_["idb://".concat(t.name,"/").concat(m.name,"/:dels")]=new Te(-1/0,[[[]]])}),tt(zt).fire(_),jr(_,!0)),t})}function Dr(t){function r(c){return t.next(c)}var a=o(r),s=o(function(c){return t.throw(c)});function o(c){return function(p){var f=c(p),p=f.value;return f.done?p:p&&typeof p.then=="function"?p.then(a,s):S(p)?Promise.all(p).then(a,s):a(p)}}return o(r)()}function Mn(t,r,a){for(var s=S(t)?t.slice():[t],o=0;o<a;++o)s.push(r);return s}var ho={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return u(u({},t),{table:function(r){var a=t.table(r),s=a.schema,o={},c=[];function l(d,_,m){var v=Wt(d),w=o[v]=o[v]||[],y=d==null?0:typeof d=="string"?1:d.length,x=0<_,x=u(u({},m),{name:x?"".concat(v,"(virtual-from:").concat(m.name,")"):m.name,lowLevelIndex:m,isVirtual:x,keyTail:_,keyLength:y,extractKey:Ar(d),unique:!x&&m.unique});return w.push(x),x.isPrimaryKey||c.push(x),1<y&&l(y===2?d[0]:d.slice(0,y-1),_+1,m),w.sort(function(P,C){return P.keyTail-C.keyTail}),x}r=l(s.primaryKey.keyPath,0,s.primaryKey),o[":id"]=[r];for(var f=0,p=s.indexes;f<p.length;f++){var g=p[f];l(g.keyPath,0,g)}function b(d){var _,m=d.query.index;return m.isVirtual?u(u({},d),{query:{index:m.lowLevelIndex,range:(_=d.query.range,m=m.keyTail,{type:_.type===1?2:_.type,lower:Mn(_.lower,_.lowerOpen?t.MAX_KEY:t.MIN_KEY,m),lowerOpen:!0,upper:Mn(_.upper,_.upperOpen?t.MIN_KEY:t.MAX_KEY,m),upperOpen:!0})}}):d}return u(u({},a),{schema:u(u({},s),{primaryKey:r,indexes:c,getIndexByKeyPath:function(d){return(d=o[Wt(d)])&&d[0]}}),count:function(d){return a.count(b(d))},query:function(d){return a.query(b(d))},openCursor:function(d){var _=d.query.index,m=_.keyTail,v=_.isVirtual,w=_.keyLength;return v?a.openCursor(b(d)).then(function(x){return x&&y(x)}):a.openCursor(d);function y(x){return Object.create(x,{continue:{value:function(P){P!=null?x.continue(Mn(P,d.reverse?t.MAX_KEY:t.MIN_KEY,m)):d.unique?x.continue(x.key.slice(0,w).concat(d.reverse?t.MIN_KEY:t.MAX_KEY,m)):x.continue()}},continuePrimaryKey:{value:function(P,C){x.continuePrimaryKey(Mn(P,t.MAX_KEY,m),C)}},primaryKey:{get:function(){return x.primaryKey}},key:{get:function(){var P=x.key;return w===1?P[0]:P.slice(0,w)}},value:{get:function(){return x.value}}})}}})}})}};function $r(t,r,a,s){return a=a||{},s=s||"",T(t).forEach(function(o){var c,l,f;L(r,o)?(c=t[o],l=r[o],typeof c=="object"&&typeof l=="object"&&c&&l?(f=me(c))!==me(l)?a[s+o]=r[o]:f==="Object"?$r(c,l,a,s+o+"."):c!==l&&(a[s+o]=r[o]):c!==l&&(a[s+o]=r[o])):a[s+o]=void 0}),T(r).forEach(function(o){L(t,o)||(a[s+o]=r[o])}),a}function Ir(t,r){return r.type==="delete"?r.keys:r.keys||r.values.map(t.extractKey)}var po={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return u(u({},t),{table:function(r){var a=t.table(r),s=a.schema.primaryKey;return u(u({},a),{mutate:function(o){var c=H.trans,l=c.table(r).hook,f=l.deleting,p=l.creating,g=l.updating;switch(o.type){case"add":if(p.fire===oe)break;return c._promise("readwrite",function(){return b(o)},!0);case"put":if(p.fire===oe&&g.fire===oe)break;return c._promise("readwrite",function(){return b(o)},!0);case"delete":if(f.fire===oe)break;return c._promise("readwrite",function(){return b(o)},!0);case"deleteRange":if(f.fire===oe)break;return c._promise("readwrite",function(){return function d(_,m,v){return a.query({trans:_,values:!1,query:{index:s,range:m},limit:v}).then(function(w){var y=w.result;return b({type:"delete",keys:y,trans:_}).then(function(x){return 0<x.numFailures?Promise.reject(x.failures[0]):y.length<v?{failures:[],numFailures:0,lastResult:void 0}:d(_,u(u({},m),{lower:y[y.length-1],lowerOpen:!0}),v)})})}(o.trans,o.range,1e4)},!0)}return a.mutate(o);function b(d){var _,m,v,w=H.trans,y=d.keys||Ir(s,d);if(!y)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?u(u({},d),{keys:y}):u({},d)).type!=="delete"&&(d.values=h([],d.values)),d.keys&&(d.keys=h([],d.keys)),_=a,v=y,((m=d).type==="add"?Promise.resolve([]):_.getMany({trans:m.trans,keys:v,cache:"immutable"})).then(function(x){var P=y.map(function(C,k){var F,I,j,D=x[k],R={onerror:null,onsuccess:null};return d.type==="delete"?f.fire.call(R,C,D,w):d.type==="add"||D===void 0?(F=p.fire.call(R,C,d.values[k],w),C==null&&F!=null&&(d.keys[k]=C=F,s.outbound||B(d.values[k],s.keyPath,C))):(F=$r(D,d.values[k]),(I=g.fire.call(R,F,C,D,w))&&(j=d.values[k],Object.keys(I).forEach(function($){L(j,$)?j[$]=I[$]:B(j,$,I[$])}))),R});return a.mutate(d).then(function(C){for(var k=C.failures,F=C.results,I=C.numFailures,C=C.lastResult,j=0;j<y.length;++j){var D=(F||y)[j],R=P[j];D==null?R.onerror&&R.onerror(k[j]):R.onsuccess&&R.onsuccess(d.type==="put"&&x[j]?d.values[j]:D)}return{failures:k,results:F,numFailures:I,lastResult:C}}).catch(function(C){return P.forEach(function(k){return k.onerror&&k.onerror(C)}),Promise.reject(C)})})}}})}})}};function ai(t,r,a){try{if(!r||r.keys.length<t.length)return null;for(var s=[],o=0,c=0;o<r.keys.length&&c<t.length;++o)ae(r.keys[o],t[c])===0&&(s.push(a?K(r.values[o]):r.values[o]),++c);return s.length===t.length?s:null}catch{return null}}var mo={stack:"dbcore",level:-1,create:function(t){return{table:function(r){var a=t.table(r);return u(u({},a),{getMany:function(s){if(!s.cache)return a.getMany(s);var o=ai(s.keys,s.trans._cache,s.cache==="clone");return o?q.resolve(o):a.getMany(s).then(function(c){return s.trans._cache={keys:s.keys,values:s.cache==="clone"?K(c):c},c})},mutate:function(s){return s.type!=="add"&&(s.trans._cache=null),a.mutate(s)}})}}}};function ii(t,r){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function si(t,r){switch(t){case"query":return r.values&&!r.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var go={stack:"dbcore",level:0,name:"Observability",create:function(t){var r=t.schema.name,a=new Te(t.MIN_KEY,t.MAX_KEY);return u(u({},t),{transaction:function(s,o,c){if(H.subscr&&o!=="readonly")throw new W.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(H.querier));return t.transaction(s,o,c)},table:function(s){var o=t.table(s),c=o.schema,l=c.primaryKey,d=c.indexes,f=l.extractKey,p=l.outbound,g=l.autoIncrement&&d.filter(function(m){return m.compound&&m.keyPath.includes(l.keyPath)}),b=u(u({},o),{mutate:function(m){function v($){return $="idb://".concat(r,"/").concat(s,"/").concat($),C[$]||(C[$]=new Te)}var w,y,x,P=m.trans,C=m.mutatedParts||(m.mutatedParts={}),k=v(""),F=v(":dels"),I=m.type,R=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[Ir(l,m).filter(function($){return $}),m.values]:[],j=R[0],D=R[1],R=m.trans._cache;return S(j)?(k.addKeys(j),(R=I==="delete"||j.length===D.length?ai(j,R):null)||F.addKeys(j),(R||D)&&(w=v,y=R,x=D,c.indexes.forEach(function($){var U=w($.name||"");function te(re){return re!=null?$.extractKey(re):null}function ne(re){return $.multiEntry&&S(re)?re.forEach(function(De){return U.addKey(De)}):U.addKey(re)}(y||x).forEach(function(re,ke){var ee=y&&te(y[ke]),ke=x&&te(x[ke]);ae(ee,ke)!==0&&(ee!=null&&ne(ee),ke!=null&&ne(ke))})}))):j?(D={from:(D=j.lower)!==null&&D!==void 0?D:t.MIN_KEY,to:(D=j.upper)!==null&&D!==void 0?D:t.MAX_KEY},F.add(D),k.add(D)):(k.add(a),F.add(a),c.indexes.forEach(function($){return v($.name).add(a)})),o.mutate(m).then(function($){return!j||m.type!=="add"&&m.type!=="put"||(k.addKeys($.results),g&&g.forEach(function(U){for(var te=m.values.map(function(ee){return U.extractKey(ee)}),ne=U.keyPath.findIndex(function(ee){return ee===l.keyPath}),re=0,De=$.results.length;re<De;++re)te[re][ne]=$.results[re];v(U.name).addKeys(te)})),P.mutatedParts=On(P.mutatedParts||{},C),$})}}),d=function(v){var w=v.query,v=w.index,w=w.range;return[v,new Te((v=w.lower)!==null&&v!==void 0?v:t.MIN_KEY,(w=w.upper)!==null&&w!==void 0?w:t.MAX_KEY)]},_={get:function(m){return[l,new Te(m.key)]},getMany:function(m){return[l,new Te().addKeys(m.keys)]},count:d,query:d,openCursor:d};return T(_).forEach(function(m){b[m]=function(v){var w=H.subscr,y=!!w,x=ii(H,o)&&si(m,v)?v.obsSet={}:w;if(y){var P=function(D){return D="idb://".concat(r,"/").concat(s,"/").concat(D),x[D]||(x[D]=new Te)},C=P(""),k=P(":dels"),w=_[m](v),y=w[0],w=w[1];if((m==="query"&&y.isPrimaryKey&&!v.values?k:P(y.name||"")).add(w),!y.isPrimaryKey){if(m!=="count"){var F=m==="query"&&p&&v.values&&o.query(u(u({},v),{values:!1}));return o[m].apply(this,arguments).then(function(D){if(m==="query"){if(p&&v.values)return F.then(function(te){return te=te.result,C.addKeys(te),D});var R=v.values?D.result.map(f):D.result;(v.values?C:k).addKeys(R)}else if(m==="openCursor"){var $=D,U=v.values;return $&&Object.create($,{key:{get:function(){return k.addKey($.primaryKey),$.key}},primaryKey:{get:function(){var te=$.primaryKey;return k.addKey(te),te}},value:{get:function(){return U&&C.addKey($.primaryKey),$.value}}})}return D})}k.add(a)}}return o[m].apply(this,arguments)}}),b}})}};function oi(t,r,a){if(a.numFailures===0)return r;if(r.type==="deleteRange")return null;var s=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return a.numFailures===s?null:(r=u({},r),S(r.keys)&&(r.keys=r.keys.filter(function(o,c){return!(c in a.failures)})),"values"in r&&S(r.values)&&(r.values=r.values.filter(function(o,c){return!(c in a.failures)})),r)}function Br(t,r){return a=t,((s=r).lower===void 0||(s.lowerOpen?0<ae(a,s.lower):0<=ae(a,s.lower)))&&(t=t,(r=r).upper===void 0||(r.upperOpen?ae(t,r.upper)<0:ae(t,r.upper)<=0));var a,s}function ui(t,r,_,s,o,c){if(!_||_.length===0)return t;var l=r.query.index,f=l.multiEntry,p=r.query.range,g=s.schema.primaryKey.extractKey,b=l.extractKey,d=(l.lowLevelIndex||l).extractKey,_=_.reduce(function(m,v){var w=m,y=[];if(v.type==="add"||v.type==="put")for(var x=new Te,P=v.values.length-1;0<=P;--P){var C,k=v.values[P],F=g(k);x.hasKey(F)||(C=b(k),(f&&S(C)?C.some(function($){return Br($,p)}):Br(C,p))&&(x.addKey(F),y.push(k)))}switch(v.type){case"add":var I=new Te().addKeys(r.values?m.map(function(U){return g(U)}):m),w=m.concat(r.values?y.filter(function(U){return U=g(U),!I.hasKey(U)&&(I.addKey(U),!0)}):y.map(function(U){return g(U)}).filter(function(U){return!I.hasKey(U)&&(I.addKey(U),!0)}));break;case"put":var j=new Te().addKeys(v.values.map(function(U){return g(U)}));w=m.filter(function(U){return!j.hasKey(r.values?g(U):U)}).concat(r.values?y:y.map(function(U){return g(U)}));break;case"delete":var D=new Te().addKeys(v.keys);w=m.filter(function(U){return!D.hasKey(r.values?g(U):U)});break;case"deleteRange":var R=v.range;w=m.filter(function(U){return!Br(g(U),R)})}return w},t);return _===t?t:(_.sort(function(m,v){return ae(d(m),d(v))||ae(g(m),g(v))}),r.limit&&r.limit<1/0&&(_.length>r.limit?_.length=r.limit:t.length===r.limit&&_.length<r.limit&&(o.dirty=!0)),c?Object.freeze(_):_)}function ci(t,r){return ae(t.lower,r.lower)===0&&ae(t.upper,r.upper)===0&&!!t.lowerOpen==!!r.lowerOpen&&!!t.upperOpen==!!r.upperOpen}function yo(t,r){return function(a,s,o,c){if(a===void 0)return s!==void 0?-1:0;if(s===void 0)return 1;if((s=ae(a,s))===0){if(o&&c)return 0;if(o)return 1;if(c)return-1}return s}(t.lower,r.lower,t.lowerOpen,r.lowerOpen)<=0&&0<=function(a,s,o,c){if(a===void 0)return s!==void 0?1:0;if(s===void 0)return-1;if((s=ae(a,s))===0){if(o&&c)return 0;if(o)return-1;if(c)return 1}return s}(t.upper,r.upper,t.upperOpen,r.upperOpen)}function vo(t,r,a,s){t.subscribers.add(a),s.addEventListener("abort",function(){var o,c;t.subscribers.delete(a),t.subscribers.size===0&&(o=t,c=r,setTimeout(function(){o.subscribers.size===0&&_e(c,o)},3e3))})}var bo={stack:"dbcore",level:0,name:"Cache",create:function(t){var r=t.schema.name;return u(u({},t),{transaction:function(a,s,o){var c,l,f=t.transaction(a,s,o);return s==="readwrite"&&(l=(c=new AbortController).signal,o=function(p){return function(){if(c.abort(),s==="readwrite"){for(var g=new Set,b=0,d=a;b<d.length;b++){var _=d[b],m=ft["idb://".concat(r,"/").concat(_)];if(m){var v=t.table(_),w=m.optimisticOps.filter(function(U){return U.trans===f});if(f._explicit&&p&&f.mutatedParts)for(var y=0,x=Object.values(m.queries.query);y<x.length;y++)for(var P=0,C=(I=x[y]).slice();P<C.length;P++)Er((j=C[P]).obsSet,f.mutatedParts)&&(_e(I,j),j.subscribers.forEach(function(U){return g.add(U)}));else if(0<w.length){m.optimisticOps=m.optimisticOps.filter(function(U){return U.trans!==f});for(var k=0,F=Object.values(m.queries.query);k<F.length;k++)for(var I,j,D,R=0,$=(I=F[k]).slice();R<$.length;R++)(j=$[R]).res!=null&&f.mutatedParts&&(p&&!j.dirty?(D=Object.isFrozen(j.res),D=ui(j.res,j.req,w,v,j,D),j.dirty?(_e(I,j),j.subscribers.forEach(function(U){return g.add(U)})):D!==j.res&&(j.res=D,j.promise=q.resolve({result:D}))):(j.dirty&&_e(I,j),j.subscribers.forEach(function(U){return g.add(U)})))}}}g.forEach(function(U){return U()})}}},f.addEventListener("abort",o(!1),{signal:l}),f.addEventListener("error",o(!1),{signal:l}),f.addEventListener("complete",o(!0),{signal:l})),f},table:function(a){var s=t.table(a),o=s.schema.primaryKey;return u(u({},s),{mutate:function(c){var l=H.trans;if(o.outbound||l.db._options.cache==="disabled"||l.explicit||l.idbtrans.mode!=="readwrite")return s.mutate(c);var f=ft["idb://".concat(r,"/").concat(a)];return f?(l=s.mutate(c),c.type!=="add"&&c.type!=="put"||!(50<=c.values.length||Ir(o,c).some(function(p){return p==null}))?(f.optimisticOps.push(c),c.mutatedParts&&En(c.mutatedParts),l.then(function(p){0<p.numFailures&&(_e(f.optimisticOps,c),(p=oi(0,c,p))&&f.optimisticOps.push(p),c.mutatedParts&&En(c.mutatedParts))}),l.catch(function(){_e(f.optimisticOps,c),c.mutatedParts&&En(c.mutatedParts)})):l.then(function(p){var g=oi(0,u(u({},c),{values:c.values.map(function(b,d){var _;return p.failures[d]?b:(b=(_=o.keyPath)!==null&&_!==void 0&&_.includes(".")?K(b):u({},b),B(b,o.keyPath,p.results[d]),b)})}),p);f.optimisticOps.push(g),queueMicrotask(function(){return c.mutatedParts&&En(c.mutatedParts)})}),l):s.mutate(c)},query:function(c){if(!ii(H,s)||!si("query",c))return s.query(c);var l=((g=H.trans)===null||g===void 0?void 0:g.db._options.cache)==="immutable",d=H,f=d.requery,p=d.signal,g=function(v,w,y,x){var P=ft["idb://".concat(v,"/").concat(w)];if(!P)return[];if(!(w=P.queries[y]))return[null,!1,P,null];var C=w[(x.query?x.query.index.name:null)||""];if(!C)return[null,!1,P,null];switch(y){case"query":var k=C.find(function(F){return F.req.limit===x.limit&&F.req.values===x.values&&ci(F.req.query.range,x.query.range)});return k?[k,!0,P,C]:[C.find(function(F){return("limit"in F.req?F.req.limit:1/0)>=x.limit&&(!x.values||F.req.values)&&yo(F.req.query.range,x.query.range)}),!1,P,C];case"count":return k=C.find(function(F){return ci(F.req.query.range,x.query.range)}),[k,!!k,P,C]}}(r,a,"query",c),b=g[0],d=g[1],_=g[2],m=g[3];return b&&d?b.obsSet=c.obsSet:(d=s.query(c).then(function(v){var w=v.result;if(b&&(b.res=w),l){for(var y=0,x=w.length;y<x;++y)Object.freeze(w[y]);Object.freeze(w)}else v.result=K(w);return v}).catch(function(v){return m&&b&&_e(m,b),Promise.reject(v)}),b={obsSet:c.obsSet,promise:d,subscribers:new Set,type:"query",req:c,dirty:!1},m?m.push(b):(m=[b],(_=_||(ft["idb://".concat(r,"/").concat(a)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[c.query.index.name||""]=m)),vo(b,m,f,p),b.promise.then(function(v){return{result:ui(v.result,c,_==null?void 0:_.optimisticOps,s,b,l)}})}})}})}};function Fn(t,r){return new Proxy(t,{get:function(a,s,o){return s==="db"?r:Reflect.get(a,s,o)}})}var We=(ve.prototype.version=function(t){if(isNaN(t)||t<.1)throw new W.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new W.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var r=this._versions,a=r.filter(function(s){return s._cfg.version===t})[0];return a||(a=new this.Version(t),r.push(a),r.sort(oo),a.stores({}),this._state.autoSchema=!1,a)},ve.prototype._whenReady=function(t){var r=this;return this.idbdb&&(this._state.openComplete||H.letThrough||this._vip)?t():new q(function(a,s){if(r._state.openComplete)return s(new W.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen)return void s(new W.DatabaseClosed);r.open().catch(oe)}r._state.dbReadyPromise.then(a,s)}).then(t)},ve.prototype.use=function(t){var r=t.stack,a=t.create,s=t.level,o=t.name;return o&&this.unuse({stack:r,name:o}),t=this._middlewares[r]||(this._middlewares[r]=[]),t.push({stack:r,create:a,level:s??10,name:o}),t.sort(function(c,l){return c.level-l.level}),this},ve.prototype.unuse=function(t){var r=t.stack,a=t.name,s=t.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(o){return s?o.create!==s:!!a&&o.name!==a})),this},ve.prototype.open=function(){var t=this;return ut(Ze,function(){return fo(t)})},ve.prototype._close=function(){var t=this._state,r=St.indexOf(this);if(0<=r&&St.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new q(function(a){t.dbReadyResolve=a}),t.openCanceller=new q(function(a,s){t.cancelOpen=s}))},ve.prototype.close=function(a){var r=(a===void 0?{disableAutoOpen:!0}:a).disableAutoOpen,a=this._state;r?(a.isBeingOpened&&a.cancelOpen(new W.DatabaseClosed),this._close(),a.autoOpen=!1,a.dbOpenError=new W.DatabaseClosed):(this._close(),a.autoOpen=this._options.autoOpen||a.isBeingOpened,a.openComplete=!1,a.dbOpenError=null)},ve.prototype.delete=function(t){var r=this;t===void 0&&(t={disableAutoOpen:!0});var a=0<arguments.length&&typeof arguments[0]!="object",s=this._state;return new q(function(o,c){function l(){r.close(t);var f=r._deps.indexedDB.deleteDatabase(r.name);f.onsuccess=de(function(){var p,g,b;p=r._deps,g=r.name,b=p.indexedDB,p=p.IDBKeyRange,Tr(b)||g===yn||Cr(b,p).delete(g).catch(oe),o()}),f.onerror=Ve(c),f.onblocked=r._fireOnBlocked}if(a)throw new W.InvalidArgument("Invalid closeOptions argument to db.delete()");s.isBeingOpened?s.dbReadyPromise.then(l):l()})},ve.prototype.backendDB=function(){return this.idbdb},ve.prototype.isOpen=function(){return this.idbdb!==null},ve.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},ve.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ve.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ve.prototype,"tables",{get:function(){var t=this;return T(this._allTables).map(function(r){return t._allTables[r]})},enumerable:!1,configurable:!0}),ve.prototype.transaction=function(){var t=function(r,a,s){var o=arguments.length;if(o<2)throw new W.InvalidArgument("Too few arguments");for(var c=new Array(o-1);--o;)c[o-1]=arguments[o];return s=c.pop(),[r,be(c),s]}.apply(this,arguments);return this._transaction.apply(this,t)},ve.prototype._transaction=function(t,r,a){var s=this,o=H.trans;o&&o.db===this&&t.indexOf("!")===-1||(o=null);var c,l,f=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{if(l=r.map(function(g){if(g=g instanceof s.Table?g.name:g,typeof g!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return g}),t=="r"||t===pr)c=pr;else{if(t!="rw"&&t!=mr)throw new W.InvalidArgument("Invalid transaction mode: "+t);c=mr}if(o){if(o.mode===pr&&c===mr){if(!f)throw new W.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&l.forEach(function(g){if(o&&o.storeNames.indexOf(g)===-1){if(!f)throw new W.SubTransaction("Table "+g+" not included in parent transaction.");o=null}}),f&&o&&!o.active&&(o=null)}}catch(g){return o?o._promise(null,function(b,d){d(g)}):ye(g)}var p=function g(b,d,_,m,v){return q.resolve().then(function(){var w=H.transless||H,y=b._createTransaction(d,_,b._dbSchema,m);if(y.explicit=!0,w={trans:y,transless:w},m)y.idbtrans=m.idbtrans;else try{y.create(),y.idbtrans._explicit=!0,b._state.PR1398_maxLoop=3}catch(C){return C.name===ar.InvalidState&&b.isOpen()&&0<--b._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),b.close({disableAutoOpen:!1}),b.open().then(function(){return g(b,d,_,null,v)})):ye(C)}var x,P=rr(v);return P&&xt(),w=q.follow(function(){var C;(x=v.call(y,y))&&(P?(C=Xe.bind(null,null),x.then(C,C)):typeof x.next=="function"&&typeof x.throw=="function"&&(x=Dr(x)))},w),(x&&typeof x.then=="function"?q.resolve(x).then(function(C){return y.active?C:ye(new W.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):w.then(function(){return x})).then(function(C){return m&&y._resolve(),y._completion.then(function(){return C})}).catch(function(C){return y._reject(C),ye(C)})})}.bind(null,this,c,l,o,a);return o?o._promise(c,p,"lock"):H.trans?ut(H.transless,function(){return s._whenReady(p)}):this._whenReady(p)},ve.prototype.table=function(t){if(!L(this._allTables,t))throw new W.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},ve);function ve(t,r){var a=this;this._middlewares={},this.verno=0;var s=ve.dependencies;this._options=r=u({addons:ve.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},s=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o,c,l,f,p,g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:oe,dbReadyPromise:null,cancelOpen:oe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};g.dbReadyPromise=new q(function(d){g.dbReadyResolve=d}),g.openCanceller=new q(function(d,_){g.cancelOpen=_}),this._state=g,this.name=t,this.on=Ut(this,"populate","blocked","versionchange","close",{ready:[ir,oe]}),this.on.ready.subscribe=fe(this.on.ready.subscribe,function(d){return function(_,m){ve.vip(function(){var v,w=a._state;w.openComplete?(w.dbOpenError||q.resolve().then(_),m&&d(_)):w.onReadyBeingFired?(w.onReadyBeingFired.push(_),m&&d(_)):(d(_),v=a,m||d(function y(){v.on.ready.unsubscribe(_),v.on.ready.unsubscribe(y)}))})}}),this.Collection=(o=this,Vt(eo.prototype,function(x,y){this.db=o;var m=qa,v=null;if(y)try{m=y()}catch(P){v=P}var w=x._ctx,y=w.table,x=y.hook.reading.fire;this._ctx={table:y,index:w.index,isPrimKey:!w.index||y.schema.primKey.keyPath&&w.index===y.schema.primKey.name,range:m,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:v,or:w.or,valueMapper:x!==Bt?x:null}})),this.Table=(c=this,Vt(Ha.prototype,function(d,_,m){this.db=c,this._tx=m,this.name=d,this.schema=_,this.hook=c._allTables[d]?c._allTables[d].hook:Ut(null,{creating:[Gs,oe],reading:[Hs,Bt],updating:[Qs,oe],deleting:[zs,oe]})})),this.Transaction=(l=this,Vt(ro.prototype,function(d,_,m,v,w){var y=this;this.db=l,this.mode=d,this.storeNames=_,this.schema=m,this.chromeTransactionDurability=v,this.idbtrans=null,this.on=Ut(this,"complete","error","abort"),this.parent=w||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new q(function(x,P){y._resolve=x,y._reject=P}),this._completion.then(function(){y.active=!1,y.on.complete.fire()},function(x){var P=y.active;return y.active=!1,y.on.error.fire(x),y.parent?y.parent._reject(x):P&&y.idbtrans&&y.idbtrans.abort(),ye(x)})})),this.Version=(f=this,Vt(lo.prototype,function(d){this.db=f,this._cfg={version:d,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(p=this,Vt(Ya.prototype,function(d,_,m){if(this.db=p,this._ctx={table:d,index:_===":id"?null:_,or:m},this._cmp=this._ascending=ae,this._descending=function(v,w){return ae(w,v)},this._max=function(v,w){return 0<ae(v,w)?v:w},this._min=function(v,w){return ae(v,w)<0?v:w},this._IDBKeyRange=p._deps.IDBKeyRange,!this._IDBKeyRange)throw new W.MissingAPI})),this.on("versionchange",function(d){0<d.newVersion?console.warn("Another connection wants to upgrade database '".concat(a.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(a.name,"'. Closing db now to resume the delete request.")),a.close({disableAutoOpen:!1})}),this.on("blocked",function(d){!d.newVersion||d.newVersion<d.oldVersion?console.warn("Dexie.delete('".concat(a.name,"') was blocked")):console.warn("Upgrade '".concat(a.name,"' blocked by other connection holding version ").concat(d.oldVersion/10))}),this._maxKey=Qt(r.IDBKeyRange),this._createTransaction=function(d,_,m,v){return new a.Transaction(d,_,m,a._options.chromeTransactionDurability,v)},this._fireOnBlocked=function(d){a.on("blocked").fire(d),St.filter(function(_){return _.name===a.name&&_!==a&&!_._state.vcFired}).map(function(_){return _.on("versionchange").fire(d)})},this.use(mo),this.use(bo),this.use(go),this.use(ho),this.use(po);var b=new Proxy(this,{get:function(d,_,m){if(_==="_vip")return!0;if(_==="table")return function(w){return Fn(a.table(w),b)};var v=Reflect.get(d,_,m);return v instanceof Ha?Fn(v,b):_==="tables"?v.map(function(w){return Fn(w,b)}):_==="_createTransaction"?function(){return Fn(v.apply(this,arguments),b)}:v}});this.vip=b,s.forEach(function(d){return d(a)})}var jn,Be=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",wo=(Rr.prototype.subscribe=function(t,r,a){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:r,complete:a})},Rr.prototype[Be]=function(){return this},Rr);function Rr(t){this._subscribe=t}try{jn={indexedDB:A.indexedDB||A.mozIndexedDB||A.webkitIndexedDB||A.msIndexedDB,IDBKeyRange:A.IDBKeyRange||A.webkitIDBKeyRange}}catch{jn={indexedDB:null,IDBKeyRange:null}}function li(t){var r,a=!1,s=new wo(function(o){var c=rr(t),l,f=!1,p={},g={},b={get closed(){return f},unsubscribe:function(){f||(f=!0,l&&l.abort(),d&&tt.storagemutated.unsubscribe(m))}};o.start&&o.start(b);var d=!1,_=function(){return hr(v)},m=function(w){On(p,w),Er(g,p)&&_()},v=function(){var w,y,x;!f&&jn.indexedDB&&(p={},w={},l&&l.abort(),l=new AbortController,x=function(P){var C=_t();try{c&&xt();var k=Je(t,P);return k=c?k.finally(Xe):k}finally{C&&At()}}(y={subscr:w,signal:l.signal,requery:_,querier:t,trans:null}),Promise.resolve(x).then(function(P){a=!0,r=P,f||y.signal.aborted||(p={},function(C){for(var k in C)if(L(C,k))return;return 1}(g=w)||d||(tt(zt,m),d=!0),hr(function(){return!f&&o.next&&o.next(P)}))},function(P){a=!1,["DatabaseClosedError","AbortError"].includes(P==null?void 0:P.name)||f||hr(function(){f||o.error&&o.error(P)})}))};return setTimeout(_,0),b});return s.hasValue=function(){return a},s.getValue=function(){return r},s}var dt=We;function Lr(t){var r=nt;try{nt=!0,tt.storagemutated.fire(t),jr(t,!0)}finally{nt=r}}G(dt,u(u({},un),{delete:function(t){return new dt(t,{addons:[]}).delete()},exists:function(t){return new dt(t,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return r=dt.dependencies,a=r.indexedDB,r=r.IDBKeyRange,(Tr(a)?Promise.resolve(a.databases()).then(function(s){return s.map(function(o){return o.name}).filter(function(o){return o!==yn})}):Cr(a,r).toCollection().primaryKeys()).then(t)}catch{return ye(new W.MissingAPI)}var r,a},defineClass:function(){return function(t){M(this,t)}},ignoreTransaction:function(t){return H.trans?ut(H.transless,t):t()},vip:kr,async:function(t){return function(){try{var r=Dr(t.apply(this,arguments));return r&&typeof r.then=="function"?r:q.resolve(r)}catch(a){return ye(a)}}},spawn:function(t,r,a){try{var s=Dr(t.apply(a,r||[]));return s&&typeof s.then=="function"?s:q.resolve(s)}catch(o){return ye(o)}},currentTransaction:{get:function(){return H.trans||null}},waitFor:function(t,r){return r=q.resolve(typeof t=="function"?dt.ignoreTransaction(t):t).timeout(r||6e4),H.trans?H.trans.waitFor(r):r},Promise:q,debug:{get:function(){return Ue},set:function(t){ja(t)}},derive:V,extend:M,props:G,override:fe,Events:Ut,on:tt,liveQuery:li,extendObservabilitySet:On,getByKeyPath:N,setByKeyPath:B,delByKeyPath:function(t,r){typeof r=="string"?B(t,r,void 0):"length"in r&&[].map.call(r,function(a){B(t,a,void 0)})},shallowClone:X,deepClone:K,getObjectDiff:$r,cmp:ae,asap:Se,minKey:-1/0,addons:[],connections:St,errnames:ar,dependencies:jn,cache:ft,semVer:"4.0.10",version:"4.0.10".split(".").map(function(t){return parseInt(t)}).reduce(function(t,r,a){return t+r/Math.pow(10,2*a)})})),dt.maxKey=Qt(dt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(tt(zt,function(t){nt||(t=new CustomEvent(br,{detail:t}),nt=!0,dispatchEvent(t),nt=!1)}),addEventListener(br,function(t){t=t.detail,nt||Lr(t)}));var Tt,nt=!1,fi=function(){};return typeof BroadcastChannel<"u"&&((fi=function(){(Tt=new BroadcastChannel(br)).onmessage=function(t){return t.data&&Lr(t.data)}})(),typeof Tt.unref=="function"&&Tt.unref(),tt(zt,function(t){nt||Tt.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!We.disableBfCache&&t.persisted){Ue&&console.debug("Dexie: handling persisted pagehide"),Tt!=null&&Tt.close();for(var r=0,a=St;r<a.length;r++)a[r].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!We.disableBfCache&&t.persisted&&(Ue&&console.debug("Dexie: handling persisted pageshow"),fi(),Lr({all:new Te(-1/0,[[]])}))})),q.rejectionMapper=function(t,r){return!t||t instanceof bt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Fa[t.name]?t:(r=new Fa[t.name](r||t.message,t),"stack"in t&&Y(r,"stack",{get:function(){return this.inner.stack}}),r)},ja(Ue),u(We,Object.freeze({__proto__:null,Dexie:We,liveQuery:li,Entity:Na,cmp:ae,PropModSymbol:Qe,PropModification:Ht,replacePrefix:function(t,r){return new Ht({replacePrefix:[t,r]})},add:function(t){return new Ht({add:t})},remove:function(t){return new Ht({remove:t})},default:We,RangeSet:Te,mergeRanges:Zt,rangesOverlap:ei}),{default:We}),We})})(Ns);var ey=Ns.exports;const fa=Gn(ey),es=Symbol.for("Dexie"),da=globalThis[es]||(globalThis[es]=fa);if(fa.semVer!==da.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${fa.semVer} and ${da.semVer}`);class ty extends da{themes;betterCodeBlocks;promptHistory;pinnedSpaces;constructor(){super("ComplexityDatabase"),this.version(1).stores({themes:"&id, title, author",betterCodeBlocks:"&language"}),this.version(2).stores({promptHistory:"&id, prompt, createdAt"}),this.version(3).stores({pinnedSpaces:"&uuid, title, emoji, slug, createdAt"}),this.version(4).stores({pinnedSpaces:"&uuid, [order+createdAt]"}).upgrade(async n=>{const i=await n.table("pinnedSpaces").toArray();i.sort((u,h)=>h.createdAt-u.createdAt);for(let u=0;u<i.length;u++){const h=i[u];await n.table("pinnedSpaces").update(h.uuid,{order:u})}})}async exportAll(){const n=await this.themes.toArray(),i=await this.betterCodeBlocks.toArray(),u=await this.promptHistory.toArray(),h=await this.pinnedSpaces.toArray();return{themes:n,betterCodeBlocksFineGrainedOptions:i,promptHistory:u,pinnedSpaces:h}}async import(n){await this.themes.bulkPut(n.themes),await this.betterCodeBlocks.bulkPut(n.betterCodeBlocksFineGrainedOptions),await this.promptHistory.bulkPut(n.promptHistory),await this.pinnedSpaces.bulkPut(n.pinnedSpaces)}async clearAll(){await this.themes.clear(),await this.betterCodeBlocks.clear(),await this.promptHistory.clear(),await this.pinnedSpaces.clear()}}const Jt=new ty,Xt='body#__next[location=thread] strong,body#__next[location=thread] h2,body#__next[location=thread] h3,body#__next[location=thread] h4,body#__next[location=thread] h5,body#__next[location=thread] h6{--tw-text-opacity: 1;color:oklch(var(--primary) / var(--tw-text-opacity, 1))}body#__next[location=thread] [data-cplx-component=message-block]:not(:last-of-type){border-bottom-color:oklch(var(--ring) / .5)}body#__next code:not(pre code):before,body#__next code:not(pre code):after{content:""}body#__next code:not(pre code){border-radius:calc(var(--radius) - 2px);--tw-bg-opacity: 1;background-color:oklch(var(--secondary) / var(--tw-bg-opacity, 1));padding:.125rem .25rem;--tw-text-opacity: 1;color:oklch(var(--primary) / var(--tw-text-opacity, 1))}body#__next{font-variant-ligatures:none}body#__next a[aria-label=Perplexity] svg path{stroke:oklch(var(--primary) / 1)!important}',_y=Object.freeze(Object.defineProperty({__proto__:null,default:Xt},Symbol.toStringTag,{value:"Module"})),ny=":root[data-color-scheme=dark]{--teal-100: 74.37% .1304 255.6;--teal-200: 65.22% .1823 256.8;--pale-blue-200: 30.4% .037 257.82;--primary: 74.37% .1304 255.6;--ring: 74.37% .1304 255.6}",ry=":root[data-color-scheme=dark]{--teal-100: 73.59% .1411 285.6;--teal-200: 59.72% .2209 280.56;--pale-blue-200: 30.4% .0987 290.65;--primary: 73.59% .1411 285.6;--ring: 73.59% .1411 285.6}",ay=":root[data-color-scheme=dark]{--teal-100: 93.86% .0876 92.74;--teal-200: 90.47% .1343 92.39;--pale-blue-200: 30.4% .0321 91.59;--primary: 93.86% .0876 92.74;--ring: 93.86% .0876 92.74}",iy=[{id:"complexity",title:"Complexity Blue",description:"Official theme with signature blue accent color",author:"pnd280",compatibleWith:["desktop","mobile"],colorScheme:["dark"],css:Xt+`
`+ny},{id:"complexity-perplexity",title:"Perplexity Default",description:"Enhance the default theme",author:"pnd280",compatibleWith:["desktop","mobile"],colorScheme:["light","dark"],css:Xt},{id:"complexity-shy-moment",title:"Shy Moment",description:"Official theme with purple-ish accent color",author:"pnd280",compatibleWith:["desktop","mobile"],colorScheme:["dark"],css:Xt+`
`+ry},{id:"complexity-sour-lemon",title:"Sour Lemon",description:"Official theme with yellow-ish accent color",author:"pnd280",compatibleWith:["desktop","mobile"],colorScheme:["dark"],css:Xt+`
`+ay}];class sy{async add(n){return await Jt.themes.add(n)}async get(n){return await Jt.themes.get(n)}async getAll(){return await Jt.themes.toArray()}async update(n){return await Jt.themes.put(n),n.id}async delete(n){await Jt.themes.delete(n)}}const[Ay,oy]=Kg("LocalThemesService",()=>new sy);async function xy(e){return uy(e)||await cy(e)||""}function uy(e){var n;return((n=iy.find(i=>i.id===e))==null?void 0:n.css)??""}async function cy(e){var n;return((n=await oy().get(e))==null?void 0:n.css)??""}export{wy as $,Il as A,Nl as B,gf as C,Ro as D,Kt as E,Xo as F,Go as G,gy as H,bi as I,Re as J,ra as K,Jn as L,Vo as M,Ho as N,fs as O,nu as P,Qo as Q,Me as R,Zn as S,nn as T,su as U,Si as V,vy as W,by as X,pa as Y,yy as Z,ws as _,Jt as a,iy as a0,oy as a1,cu as a2,my as a3,xl as a4,cp as a5,Oh as a6,Ta as a7,va as a8,py as a9,Lo as aa,_y as ab,Ot as b,kt as c,Kg as d,na as e,Cg as f,xy as g,No as h,xg as i,aa as j,ys as k,Ts as l,Es as m,nr as n,Pa as o,Wd as p,ta as q,Ay as r,_p as s,Zd as t,tm as u,cf as v,wa as w,xs as x,vs as y,Xf as z};
