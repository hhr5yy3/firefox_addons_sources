(self.webpackChunk=self.webpackChunk||[]).push([[5213],{45345:(e,t,a)=>{a.d(t,{v:()=>w});var i=a(81259),r=a(38684),n=a(90023),o=a(12518),c=a(44949),l=a(47344),s=a(65384),d=a(62958),g=a(87086),p=a(6088),u=a(5614);var m=a(58303),v=a(25770),f=a(73104),h=a(34854),x=a(50978);const C=e=>e.createDocument?e.createDocument:t=>x._A.create((e=>e.getDocumentId?e.getDocumentId:()=>{})(e)(t));var y=a(18845),S=a(35509),F=a(44806);const I={ruleName:"isKnowledgeHubEnabled",match:(e,t)=>"test"===t.experimentClient.getTreatment(i.p.KnowledgeHubAtlassian)},T=".ak-renderer-document",w=(M="Jira",b=e=>({createLayout:()=>new r.A(e.field),validationRules:[I,{ruleName:"isReadonlyContentField",match:(e,t)=>e.matches(T)}],textMap:{createFieldTextMap:e=>new p.Z(e,((e,t)=>p.Z.defaultFilterNode(e,t)&&(e=>!e.classList.contains("expand-content-wrapper"))(e)))}}),k=T,{kind:F.A.readonly,name:`readonlyContent.${M}`,contentSelector:k,match:e=>{const t=((e,t,a,i)=>{const r=a(e),o=r.target||e.field,c=r.textMap||{createFieldTextMap:p.Z.create},m=(r.createSelectionSource||(()=>(0,g.B)(o)))();return{target:o,initialState:e.state,integrationName:`contentEditable.${t}`,validationRules:[{ruleName:"notABody",match:(0,l.ff)(d.XD)},{ruleName:"isReadonlyContentField",match:(e,t)=>e.matches(i)}],textMap:c,expiration:d.Jj,createSelectionSource:()=>(0,g.B)(o),mapChange:n.yR,...r,selectionSource:m,createTextObserver:()=>new u.j(o,s.k.fromDiff,m,void 0,c.createFieldTextMap)}})(e,M,b,k);return(0,n.zG)((0,y.O)(t.target,e,t.integrationName,t.validationRules),o.map((()=>({targetField:t.target,matchExpires:t.expiration(t.target),execute:e=>{var a;const i=S.Y.decorate((0,n.zG)(((e,t)=>{var a;const i=t.createTextObserver(),r=t.createHighlightsFilterFactory?t.createHighlightsFilterFactory(i):h.u,n=t.createLayout(t.target);return{doc:C(e)(t.target),textField:t.target,domain:e.pageContext.domain,url:e.pageContext.url,layout:n,createCheckingService:t=>e.createCheckingService(t),mapChange:t.mapChange,state:v.h.create(t.initialState),actions:e.actions,fieldSettings:e.fieldSettings,notifications:(0,f.Cq)(e.app.notifications,"ctx.app.notifications"),gnar:e.gnar,productMetricsCSClient:e.productMetricsCSClient,felog:e.felog,config:e.pageContext.config,experimentClient:e.experimentClient,isCurrentFieldFocused:v.h.create(!1),selectionSource:t.selectionSource,textObserver:i,createAlertProcessor:t.createAlertProcessor,createTextRevisionManager:t.createTextRevisionManager,geometryProvider:t.highlightGeometryProvider,customizations:{...t.customizations,getDocEvents:(null===(a=t.customizations)||void 0===a?void 0:a.getDocEvents)||e.getDocEvents,isGbuttonVisible:v.h.create(!1)},highlightsFilterFactory:r,iframeConnectionId:e.iframeConnectionId,eventPropagationHandler:e.eventPropagationHandler,forceIntegrationEntirelyInsideIframe:e.forceIntegrationEntirelyInsideIframe,pageIntegrationId:e.pageContext.id,integrationName:t.integrationName,g2IntegrationInfo:m.YP}})(e,t),c.kC,n.a9),t.integrationName,t.target);return null===(a=t.onCreate)||void 0===a||a.call(t),{update(e){i.update(e)},dispose(){var e;i.dispose(),null===(e=t.onDispose)||void 0===e||e.call(t)}}},desiredCustomizations:{capiStartSessionOptions:{...e.capiStartSessionOptions,mode:"READ_ONLY"}}}))))}});var M,b,k},957:(e,t,a)=>{a.r(t),a.d(t,{Jira:()=>f});var i,r=a(8748),n=a(90049),o=a(18615),c=a(34859),l=a(38684),s=a(62958),d=a(75629),g=a(395),p=a(59898),u=a(18845),m=a(45345),v=a(6088);!function(e){e.createTextMap=t=>new v.Z(t,(t=>!e.hasPlaceholder(t))),e.hasPlaceholder=e=>!!e.querySelector(".placeholder-decoration")}(i||(i={}));var f,h=a(37094),x=a(55793),C=a(91795);!function(e){const t=g.M.generic((e=>({overwriteGenericOpts:{validationRules:p.u,createLayout:()=>new l.A(e.field.closest(".ak-editor-content-area, .content-area")||e.field),expiration:e=>{const t=e.closest("body > span > div"),a=t?C.x.observeStyle(t).pipe((0,o.P)((e=>"0"===e.opacity)),(0,c.h)(void 0)):(0,r.c)();return(0,n.T)((0,s.Jj)(e),a)},textMap:{createFieldTextMap:i.createTextMap}}}))),a=d.T.textarea("Jira.issuePageDescription",(e=>({validate:(e,t)=>(0,u.O)(e.field,e,t,[{ruleName:"isNearDescriptionWikiEditField",match:e=>!!e.closest("#description-wiki-edit")}]),createLayout:()=>new l.A(e.field)})));e.page=(0,h.$W)({name:"JIRA-readonly",domain:x.fI},[t,a,d.T.iframe("Jira"),d.T.contentEditable("Jira",(e=>({createLayout:()=>new l.A(e.field)}))),d.T.textarea("Jira",(e=>({createLayout:()=>new l.A(e.field)}))),m.v])}(f||(f={}))}}]);