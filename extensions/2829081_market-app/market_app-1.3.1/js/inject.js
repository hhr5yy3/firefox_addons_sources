(()=>{"use strict";var e,t,r,a={3176:(e,t,r)=>{r.d(t,{Iw:()=>i,qv:()=>n});var a=r(927);class n{constructor(){this.version="1.3.1",this.steamAuth=new s("Off"),this.market=new s("Off"),this.configuration=new o,this.hasRequiredPermissions=!1}}class i{constructor(e){this.username=e.username,this.steamId=e.steamId,this.sessionId=e.sessionId,this.tradeOfferUrl=e.tradeOfferUrl,this.avatarUrl=e.avatarUrl,this.accessToken=e.accessToken,this.lastWsClientId=e.lastWsClientId}}class o{constructor(){this.isExtensionEnabled=!0,this.serverLocation="world",this.tradeOfferResolutionMode=a.J.CreateAndAccept,this.refreshSteamAuthAutomatically=!0,this.isCs2InventoryEnabled=!0}}class s{constructor(e,t=!1){this.description=e,this.status=t}}},6343:(e,t,r)=>{r.d(t,{H_:()=>i,MB:()=>a,NS:()=>l,T2:()=>d,TQ:()=>o,V4:()=>c,jM:()=>n,mC:()=>s,w_:()=>m});const a="https://steamcommunity.com/*",n="https://api.steampowered.com/*",i="https://floats.ondev.run/*",o=!1,s="https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/b5/b5bd56c1aa4644a474a2e4972be27ef9e82e517e_full.jpg",c="Tradable After",l=.15,d="730",m="2"},2436:(e,t,r)=>{r.d(t,{Ig:()=>i,uw:()=>a,xo:()=>n});const a={InjectMainService:"InjectMainService",InventoryService:"InventoryService",SteamMarketPriceService:"SteamMarketPriceService",SteamMarketService:"SteamMarketService",MarketTradeOfferStore:"MarketTradeOfferStore",InventoryStore:"InventoryStore",AlertStore:"AlertStore",ActiveItemsProviderService:"ActiveItemsProviderService"},n={StorageService:"StorageService",PermissionService:"PermissionService",BackgroundService:"BackgroundService",NotificationService:"NotificationService",BadgeService:"BadgeService",InstallCheckService:"InstallCheckService",MarketTradeOfferService:"MarketTradeOfferService",FloatInventoryService:"FloatInventoryService",InventoryService:"InventoryService",SteamAccountRepository:"SteamAccountRepository",MarketTradeOfferRepository:"MarketTradeOfferRepository",MigrationService:"MigrationService"},i={BackgroundCM:"BackgroundCM",PopupCM:"PopupCM",InjectCM:"InjectCM",OffscreenCM:"OffscreenCM",Logger:"Logger",ExtensionStore:"ExtensionStore",NativeCommunicationManager:"NativeCommunicationManager",DeclarativeNetRequestService:"DeclarativeNetRequestService"}},8804:(e,t,r)=>{var a=r(3379),n=r.n(a),i=r(7795),o=r.n(i),s=r(569),c=r.n(s),l=r(3565),d=r.n(l),m=r(9216),f=r.n(m),u=r(4589),p=r.n(u),g=r(2725),h={};h.styleTagTransform=p(),h.setAttributes=d(),h.insert=c().bind(null,"head"),h.domAPI=o(),h.insertStyleElement=f(),n()(g.Z,h),g.Z&&g.Z.locals&&g.Z.locals;var b=r(9449),v=r(5466);const y=e=>{const{children:t,onClick:r,style:a,className:n,type:i,disabled:o,href:s}=e,c=(0,v.useMemo)((()=>{switch(i){case"accept":return"bg-green-200 text-green-900";case"reject":return"bg-red-200 text-red-900";case"trade":return"bg-green-100 text-white";default:return"bg-steam-700 text-white"}}),[i]),l="h-min min-h-10 w-min min-w-10 rounded-sm border-none px-2.5 text-center blur-0",d="cursor-pointer hover:brightness-125 active:brightness-150";return s?v.createElement("a",{className:(0,b.j)(l,d,c,n),href:s,target:"_blank",rel:"noopener noreferrer"},t):v.createElement("button",{disabled:o,onClick:r,style:a,className:(0,b.j)(!o&&d,l,c,n)},t)};var w=r(2147),x=r(1139);const S=e=>{const{type:t,text:r,onClose:a}=e;return v.createElement("div",{className:(0,b.j)("flex max-h-[50px] max-w-[400px] flex-row items-center gap-3 rounded py-2 pl-4 pr-2 font-inter opacity-100 ","success"===t?"bg-green-200":"bg-red-200")},v.createElement("div",{className:""},"success"===t?v.createElement(w.l,{iconClassName:"bg-round-check"}):v.createElement(w.l,{iconClassName:"bg-round-cross"})),v.createElement("div",{className:"flex flex-1 flex-col gap-0.5 truncate"},v.createElement("span",{className:"min-w-0 truncate text-ellipsis text-base font-medium text-white"},(0,x.t)(`${t}_alert_label`)),v.createElement("span",{className:"min-w-0 truncate text-ellipsis text-sm text-white text-opacity-50"},(0,x.t)(r))),v.createElement(y,{className:"shadow:hover ml-auto !bg-transparent",onClick:a},v.createElement(w.l,{iconClassName:"bg-cross"})))};r(3347);var I=r(2436),k=r(6343),E=r(227);const C=e=>new Promise((t=>{setTimeout((()=>{t()}),e)})),_=new Map;var O=r(46);const R=async(e,t)=>{if(t?.body instanceof FormData)throw new Error("GET doesn't support FormData body");return t?.body instanceof URLSearchParams&&(e=e+"?"+t.body.toString()),await fetch(e,{method:"GET",mode:t?.mode||"cors",headers:t?.headers})},M=async(e,t)=>await fetch(e,{method:"POST",mode:"cors",headers:t?.headers,body:t?.body});var j,N=r(3043),T=r(9346),P=r(920),A=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},L=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let B=class{async fetchSteamInventorySlow(e,t){var r,a;return(r=((e,t=3,r=1e3)=>async(...a)=>{let n,i=0;for(;i<t;)try{return await e(...a)}catch(e){i++,n=e,await C(r)}throw n})(this.fetchSteamInventory.bind(this)),a=e,6e4,async(...e)=>{const t=_.get(a);if(t&&Date.now()-t.staleTime<6e4)return t.result;const n=await r(...e);return _.set(a,{result:n,staleTime:Date.now()}),n})(e,t)}async fetchSteamInventory(e,t,r=2e3){await C(r),t.language=t.language??"english";const a=(0,N.rs)(t),n=`Steam_Language=${t.language}`,i=await this.injectCM.invoke(O.C.steamUtils.getSteamCookies);i.push(n),a.append("l","e");const o=`https://steamcommunity.com/inventory/${e}/${k.T2}/${k.w_}?${a.toString()}`;await this.declarativeNetRequestService.appendCookieRule(5,o,i.join(";"));const s=await R(o);if(await this.declarativeNetRequestService.removeRuleById(5),200!==s.status){const e=`Failed to fetch inventory: ${s.status}`;throw this.logger.log(e),new Error(e)}return await s.json()}async getFloatInventory(e){return await this.injectCM.invoke(O.C.floatInventoryService.get,e)}getItemId(e){return`${k.T2}_${k.w_}_${e}`}};A([(0,T.f)(I.Ig.InjectCM),L("design:type",Object)],B.prototype,"injectCM",void 0),A([(0,T.f)(I.Ig.DeclarativeNetRequestService),L("design:type",Object)],B.prototype,"declarativeNetRequestService",void 0),A([(0,T.f)(I.Ig.Logger),L("design:type","function"==typeof(j=void 0!==E.Y&&E.Y)?j:Object)],B.prototype,"logger",void 0),B=A([(0,P.b)()],B);var D=r(6163),q=r(1029);const U=k.TQ?10:1;function $(e,t){return`${(e/100).toFixed(2)} ${t}`}var F,W,z=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},H=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Y=class{async getItemSellPrice(e){return await this.injectCM.invoke(O.C.inventoryService.getItemSellPrice,e)}async getItemSellHistogramInto(e){try{const t=function(){const e=document.getElementsByTagName("script"),t=/var g_rgWalletInfo = (\{.*?\});/;for(let r=e.length-1;r>=0;r--){const a=e[r].innerHTML,n=t.exec(a);if(n&&n[1])try{return JSON.parse(n[1])}catch(e){return void console.error("Failed to parse g_rgWalletInfo:",e)}}}();if(!t)return;const{wallet_currency:r,wallet_country:a}=t;return await this.getItemSellPrice({itemHashName:e,currencyId:r,country:a})}catch(e){this.logger.error(e)}}async getItemPrice(e){const t=await this.getItemSellHistogramInto(e);if(!t)return;const{price_prefix:r,price_suffix:a,highest_buy_order:n,lowest_sell_order:i}=t,[o,s]=[Number(n),Number(i)].map((e=>function(e){return U*Number((e/(1+k.NS)).toFixed())}(e)));return{instantPrice:o,quickPrice:s,priceSymbol:r||a,myPrice:s}}};z([(0,T.f)(I.Ig.Logger),H("design:type","function"==typeof(F=void 0!==E.Y&&E.Y)?F:Object)],Y.prototype,"logger",void 0),z([(0,T.f)(I.Ig.InjectCM),H("design:type","function"==typeof(W=void 0!==q.l&&q.l)?W:Object)],Y.prototype,"injectCM",void 0),Y=z([(0,P.b)()],Y);var G,V,Z=r(3176),J=r(2016),X=r(9061);!function(e){e.Closed="Closed",e.Opened="Opened",e.Authorized="Authorized"}(G||(G={})),function(e){e.GetSteamId="getSteamId",e.GetTradeLink="getTradeLink",e.AcceptOffer="acceptOffer",e.CancelOffer="cancelOffer",e.DeclineOffer="declineOffer",e.SendOffer="sendOffer",e.GetLogs="getLogs",e.AuthToken="authToken",e.GetActiveTradeOfferIds="getActiveTradeOfferIds",e.GetAccessToken="getAccessToken"}(V||(V={}));var Q=r(5446);class K{static async getSteamId(){const e=await chrome.cookies.get({url:"https://steamcommunity.com",name:"steamLoginSecure"});return e?.value?.split("%7C%7C")?.[0]??void 0}static async getSessionId(){const e=await chrome.cookies.get({url:"https://steamcommunity.com",name:"sessionid"});return e?.value??void 0}static async getSteamCookies(){const e=["steamLoginSecure","sessionid"],t=[];for(const r of e){const e=await chrome.cookies.get({url:"https://steamcommunity.com",name:r});e?.value&&t.push(`${r}=${e.value}`)}return t}static async getSteamAccessToken(){const e=await chrome.cookies.get({url:"https://steamcommunity.com",name:"steamLoginSecure"});return e?.value?.split("%7C%7C")?.[1]??void 0}static async refreshSteamAuthData(){const e=await chrome.tabs.create({url:"https://steamcommunity.com",active:!1});await C(2e3),e.id&&await chrome.tabs.remove(e.id)}static validateTokenExpireDate(e){const t=(e=>{const t=e.split(".");if(3!==t.length)throw new Error("Invalid JWT");const r=t[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(atob(r))})(e);return t.exp?t.exp<(new Date).getTime()/1e3?"expired":"valid":"not-valid"}static getSteam64(e){return String(BigInt(e)+76561197960265728n)}}var ee=r(9409);let te=class extends Q.r{constructor(){super(),this.timeoutMs=5e3,this.isActive=!1,this.connectionStatus=G.Closed,this.connectionId=void 0,this.handlers=new Map}async handleMarket(e,t,r){switch(Mt.logger.log(`Event: "${e}" Payload: ${JSON.stringify(t)}`),e){case V.GetSteamId:return await this.onGetSteamId();case V.GetTradeLink:return await this.onGetTradeLink();case V.AcceptOffer:await Mt.services.marketTradeOffer.add({data:t,event:e,callback:r});break;case V.CancelOffer:return await Mt.services.marketTradeOffer.cancel({tradeOfferId:t.tradeofferid??t.tradeOfferId,requiredAction:"cancel"});case V.DeclineOffer:return await Mt.services.marketTradeOffer.cancel({tradeOfferId:t.tradeofferid??t.tradeOfferId,requiredAction:"decline"});case V.SendOffer:await Mt.services.marketTradeOffer.add({data:t,event:e,callback:r});break;case V.AuthToken:this.onAuthToken(t);break;case V.GetLogs:return{success:!0,data:Mt.logger.getLogs()};case V.GetAccessToken:{const e=await this.onGetSteamId(),t=await K.getSteamAccessToken();return t&&e.success?{success:!0,data:t}:(Mt.logger.error("[Error][WSClient]: Unable to get access token"),{success:!1})}case V.GetActiveTradeOfferIds:try{const e=await Mt.to.offscreen.invoke(O.C.steamTradeService.getActiveTradeOfferIds,"sent"),t=await Mt.to.offscreen.invoke(O.C.steamTradeService.getActiveTradeOfferIds,"received");return{success:!0,data:[...e,...t]}}catch(e){return{success:!1}}default:throw new Error(`[Error][WSClient]: Unknown event ${e}`)}}async connect(e="wss://appws.dota2.net"){try{this.webSocket=new WebSocket(e),this.webSocket.onmessage=e=>{this.onMessage(e)},this.webSocket.onerror=e=>this.onError(e),this.webSocket.onopen=()=>{this.onOpen()}}catch(e){this.onClose(e)}}terminate(){this.webSocket?.close(),this.webSocket=void 0,this.handlers=new Map,this.isActive=!1,this.connectionStatus=G.Closed,clearInterval(this.pingIntervalId),this.pingIntervalId=void 0}async authorize(){const{profile:e,version:t}=Mt.store.get();if(!e?.accessToken)return{success:!1,steamID:"",clientID:""};const r=await this.writeAsync("auth-direct",{s64:e?.steamId,token:"",type:"extension",version:t,info:"",api_version:"2",access_token:e?.accessToken,client_id:e?.lastWsClientId});return r.success&&(e.lastWsClientId=r.clientID,Mt.store.update({profile:e})),r}onError(e){Mt.logger.error(e)}onClose(e){this.connectionStatus=G.Closed,this.emit("connectionStatusChanged",this.connectionStatus),Mt.logger.log(`onClose: Code: ${e.code} Reason: ${JSON.stringify(e.reason)}`)}async onOpen(){Mt.logger.log("WebSocket connection is opened"),this.connectionStatus=G.Opened,this.emit("connectionStatusChanged",this.connectionStatus),clearInterval(this.pingIntervalId),this.pingIntervalId=setInterval((()=>{if(this.webSocket&&this.webSocket?.readyState===WebSocket.OPEN){if(!this.isActive)return Mt.logger.log("WebSocket connection is died"),void this.webSocket.close(4001,"WebSocket connection died");this.webSocket.send("ping"),this.isActive=!1}}),15e3),this.webSocket&&(this.webSocket.onclose=e=>this.onClose(e)),(await this.authorize()).success&&(this.isActive=!0,this.connectionStatus=G.Authorized,this.emit("connectionStatusChanged",this.connectionStatus),Mt.logger.log("WebSocket connection has been authorized"))}async onMessage(e){try{if("string"==typeof e.data){if("pong"===e.data)return void(this.isActive=!0);const t=JSON.parse(e.data);if(t.e&&t.c){const e=await this.handleMarket(t.e,t.d,t.c);return void(e&&this.write(t.e,e,t.c))}if(t.h)return void this.handlers.get(t.h)?.(t.d);if("auth ok"===t.e)return this.isActive=!0,this.connectionId=t.d.cid,void(this.connectionStatus=G.Authorized)}}catch(e){return void Mt.logger.error(e)}}onAuthToken(e){this.wsAuthToken=e.t}async onGetSteamId(){const{profile:e}=Mt.store.get();return e?{success:!0,steamId:e.steamId}:(Mt.logger.error("WebSocket onGetSteamId: Steam profile is not valid"),{success:!1})}async onGetTradeLink(){const{profile:e}=Mt.store.get();return e&&e.tradeOfferUrl?{success:!0,steamId:e.steamId,tradeOfferUrl:e.tradeOfferUrl}:(Mt.logger.error("WebSocket onGetTradeLink: Steam profile or trade offer url is not valid"),{success:!1})}write(e,t,r){try{const a={e,d:t};if("function"==typeof r){const e=(0,ee.M)();a.h=e,this.handlers.set(e,r)}"string"==typeof r&&(a.c=r),this.webSocket?.send(JSON.stringify(a))}catch(e){Mt.logger.error(e)}}async writeAsync(e,t){return new Promise(((r,a)=>{this.write(e,t,(e=>r(e))),setTimeout((()=>a(new Error("MarketWebSocketService timeout error"))),this.timeoutMs)}))}};te=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[])],te);var re=r(535);let ae=class{};ae=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)()],ae);var ne,ie,oe=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},se=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let ce=class extends X.M{constructor(e){super(e)}async migrate(e){const t=this.container.getAll(ae);for(const r of t)try{await r.isRequired(e)&&(e=await r.migrate(e),this.logger.log(`Applied migration ${r.name}`))}catch(e){this.logger.error(`Failed to apply migration ${r.name}`,e.message)}return e}};var le,de;oe([(0,T.f)(re.W),se("design:type","function"==typeof(ie=void 0!==re.W&&re.W)?ie:Object)],ce.prototype,"container",void 0),ce=oe([(0,P.b)(),(le=0,de=(0,T.f)(I.Ig.Logger),function(e,t){de(e,t,le)}),se("design:paramtypes",["function"==typeof(ne=void 0!==E.Y&&E.Y)?ne:Object])],ce);const me=chrome.runtime.getURL("img/favicon_csgo.png");var fe;!function(e){e.NoSteamAuth="SteamAuthMissing",e.ConfirmTradeOffer="ConfirmTradeOffer",e.AcceptTradeOffer="AcceptTradeOffer",e.CreateTradeOffer="CreateTradeOffer"}(fe||(fe={}));let ue=class{show(e,t,r){chrome.notifications.create(e,{title:t,iconUrl:me,type:"basic",message:r})}};ue=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)()],ue);let pe=class{async set(e,t){const r={};return r[e]=t,await chrome.storage.local.set(r),t}async get(e,t){const r=await chrome.storage.local.get(e);return r[e]?r[e]:t??void 0}};pe=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)()],pe);const ge="market-app-background-run",he="firefox-workaround";var be=r(6736);const ve="configuration",ye="profile",we=()=>"firefox"===xe(),xe=()=>{const e=navigator.userAgent;return e.match(/chrome|chromium|crios/i)?"chrome":e.match(/firefox|fxios/i)?"firefox":e.match(/safari/i)?"safari":e.match(/opr/i)?"opera":e.match(/edg/i)?"edge":void 0};var Se,Ie,ke,Ee,Ce=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},_e=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Oe=function(e,t){return function(r,a){t(r,a,e)}};let Re=class extends X.M{constructor(e,t){super(e),this.onRun=((e,t=1e3)=>{let r;return(...a)=>{r&&clearTimeout(r),r=setTimeout((()=>e(...a)),t)}})((async(e=!1,t=!1)=>{try{const{profile:r,configuration:a,hasRequiredPermissions:n}=this.store.get();if(!n)return void this.logger.log("Prevent run: missing required permissions");if(!e&&r&&!a.isExtensionEnabled)return void this.logger.log("Prevent run: extension is disabled");if(await this.createOffscreenPage(),await this.checkSteamAuth(),!await this.refreshUserData(r,t)||!a.isExtensionEnabled)return;await this.refreshWebSocket()}catch(e){this.logger.log("Unable to make a run in background service"),this.logger.error(e)}}),1e3),this.store=t,this.store.listen("update",(async(e,t)=>{await this.onStoreUpdate(t)}))}async onStart(){const e=await this.restoreExtensionState();await this.subscribeForChromeEvents(),this.onRun(!0,!1===e.configuration?.isExtensionEnabled)}async onStop(){this.unsubscribeFromMarketUpdates?.(),this.marketWebSocketService?.terminate(),this.marketWebSocketService=void 0,this.store.update({market:{status:!1,description:"off"},steamAuth:{status:!1,description:"off"}})}async onStoreUpdate({prev:e,next:t,diff:r}){const{isExtensionEnabled:a,serverLocation:n}=t.configuration,i=e.configuration.isExtensionEnabled!==t.configuration.isExtensionEnabled,o=e.profile&&!t.profile;await Promise.all([Mt.to.popup,Mt.to.inject].map((e=>e.send(O.C.extensionSession.onupdate,this.store.get())))),e.configuration.serverLocation!==n&&await this.refreshWebSocket(!0),r.configuration&&await this.storage.set(ve,t.configuration),t.profile&&await this.storage.set(ye,t.profile),(!a&&i||o)&&await this.onStop(),a&&i&&this.onRun()}async subscribeForChromeEvents(){await chrome.alarms.create(ge,{delayInMinutes:2,periodInMinutes:2}),chrome.alarms.onAlarm.addListener((e=>{e.name===ge&&(this.logger.log("Alarm invoked: "+ge),this.onRun())})),we()&&(await chrome.alarms.create(he,{delayInMinutes:1/6,periodInMinutes:1/6}),chrome.alarms.onAlarm.addListener((e=>{e.name===he&&(this.logger.log("Firefox alarm invoked: "+he),C(1))}))),chrome.cookies.onChanged.addListener((e=>{e.cookie.domain.includes("steamcommunity")&&(this.logger.log("Cookie change invoked: "+ge),this.onRun(!0,!0))}))}async restoreExtensionState(){this.logger.log("Restore extension state");const e={},t=await this.storage.get(ve);return t&&(e.configuration=await this.migrationService.migrate(t)),e.profile=await this.storage.get(ye),this.logger.log("Extension state restored",e.profile),this.store.update(e),e}async createOffscreenPage(){if("chrome"===xe()){if(!await chrome.offscreen.hasDocument()){const e="Offscreen API: creating a separated page to get username, trade offer url and web api key, automatically send trade offers requests.";this.logger.log(e),await chrome.offscreen.createDocument({url:chrome.runtime.getURL("offscreen.html"),reasons:[chrome.offscreen.Reason.DOM_PARSER,chrome.offscreen.Reason.DOM_SCRAPING],justification:e})}Mt.to.offscreen.isConnected||Mt.to.offscreen.connect(be.Z.background_offscreen)}}async checkSteamAuth(){const e=await K.getSteamAccessToken(),{refreshSteamAuthAutomatically:t}=this.store.get().configuration;if(!e)return Mt.services.notifications.show(fe.NoSteamAuth,(0,x.t)("steam_authorization_is_missing"),(0,x.t)("open_https_steamcommunity_com_and_authorize_into_your_own_account")),void this.logger.log("Steam authorization is missing");switch(K.validateTokenExpireDate(e)){case"expired":if(!t)return void this.logger.log("Steam session expired, update is turned off");this.logger.log("Steam session expired, trying to update"),await K.refreshSteamAuthData();break;case"not-valid":return Mt.services.notifications.show(fe.NoSteamAuth,(0,x.t)("steam_authorization_is_not_valid"),(0,x.t)("open_https_steamcommunity_com_and_authorize_into_your_own_account")),void this.logger.log("Steam authorization is not valid");case"valid":return chrome.notifications.clear(fe.NoSteamAuth),void this.logger.log("Steam authorization is okay")}}async refreshUserData(e,t=!1){const r={},a=await K.getSteamId(),n=await K.getSessionId(),i=await K.getSteamAccessToken();try{const{avatarUrl:o,username:s}=await Mt.to.offscreen.invoke(O.C.steamTradeService.getUserSummaries);return n&&a&&s&&i?(r.profile=new Z.Iw({sessionId:n,steamId:a,username:s,avatarUrl:o,accessToken:i,lastWsClientId:e?.lastWsClientId}),r.steamAuth={status:!0,description:"ok"},r.profile.tradeOfferUrl=await Mt.to.offscreen.invoke(O.C.steamTradeService.getOfferUrl)):(r.steamAuth={status:!1,description:"auth_failed"},r.profile=void 0),Mt.store.update(r,t),r.profile}catch(e){let a="error";e instanceof Error&&(a=e.message),r.steamAuth={status:!1,description:a},Mt.store.update(r,t)}}async refreshWebSocket(e=!1){const{serverLocation:t}=this.store.get().configuration,r={};try{if((this.marketWebSocketService?.connectionStatus===G.Closed||e)&&(this.unsubscribeFromMarketUpdates?.(),this.marketWebSocketService?.terminate(),this.marketWebSocketService=void 0),!this.marketWebSocketService){r.market={status:!1,description:"off"},this.marketWebSocketService=new te,this.unsubscribeFromMarketUpdates=this.marketWebSocketService.listen("connectionStatusChanged",((e,t)=>{const r={status:t===G.Authorized,description:t};Mt.store.update({market:r})}));const e="world"===t?"wss://appws.dota2.net/":"wss://appws.csgobuy.cn/";await this.marketWebSocketService.connect(e)}}catch(e){r.market={status:!1,description:"auth_failed"}}Mt.store.update(r)}};Ce([(0,T.f)(I.xo.StorageService),_e("design:type","function"==typeof(ke=void 0!==pe&&pe)?ke:Object)],Re.prototype,"storage",void 0),Ce([(0,T.f)(I.xo.MigrationService),_e("design:type","function"==typeof(Ee=void 0!==ce&&ce)?Ee:Object)],Re.prototype,"migrationService",void 0),Re=Ce([(0,P.b)(),Oe(0,(0,T.f)(I.Ig.Logger)),Oe(1,(0,T.f)(I.Ig.ExtensionStore)),_e("design:paramtypes",["function"==typeof(Se=void 0!==E.Y&&E.Y)?Se:Object,"function"==typeof(Ie=void 0!==J.q&&J.q)?Ie:Object])],Re);const Me=async e=>{let t="",r="#FFF";switch(e){case Ne.Green:t="On",r="#00FF00";break;case Ne.Red:t="Err",r="#FF0000"}chrome.action.setBadgeText({text:t}),chrome.action.setBadgeBackgroundColor({color:r})},je=async e=>{const t=e?"":"_grey";await chrome.action.setIcon({path:{48:chrome.runtime.getURL(`img/favicon_csgo${t}_48.png`),128:chrome.runtime.getURL(`img/favicon_csgo${t}.png`)}})};var Ne;!function(e){e.None="None",e.Green="Green",e.Red="Red"}(Ne||(Ne={}));var Te;let Pe=class{constructor(e){this.store=e,this.store.listen("update",(async(e,t)=>{await this.onStoreUpdate(t)}))}async onStart(){await Me(Ne.None),await je(!1)}async onStoreUpdate({prev:e,next:t}){const{isExtensionEnabled:r}=t.configuration,a=e.profile&&!t.profile,n=t.market.status&&t.steamAuth.status;return r&&!a&&t.hasRequiredPermissions?r?(await je(!0),n?void await Me(Ne.Green):void await Me(Ne.Red)):void 0:(await Me(Ne.None),void await je(!1))}};Pe=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)(),function(e,t){return function(r,a){t(r,a,e)}}(0,(0,T.f)(I.Ig.ExtensionStore)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",["function"==typeof(Te=void 0!==J.q&&J.q)?Te:Object])],Pe);let Ae=class{constructor(){this.name="Cs2SteamInventoryMigration"}async isRequired(e){return void 0===e.isCs2InventoryEnabled}async migrate(e){return e.isCs2InventoryEnabled=!0,e}};Ae=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)()],Ae);var Le,Be=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},De=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let qe=class{async onStart(){const e=[this.offscreenCM,this.injectCM];for(const t of e)t.addListener(O.C.declarativeNetRequests.removeRuleById,this.removeRuleById.bind(this)),t.addListener(O.C.declarativeNetRequests.setRefererHeaderRule,this.setRefererHeaderRule.bind(this)),t.addListener(O.C.declarativeNetRequests.appendCookieRule,this.appendCookieRule.bind(this))}async setRefererHeaderRule(e,t,r){const a=await this.setHeaderByUrl(e,t,"Referer",r);await this.updateRuleById(e,a)}async appendCookieRule(e,t,r){const a=await this.setHeaderByUrl(e,t,"Cookie",r);await this.updateRuleById(e,a)}async removeRuleById(e){await chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:[e]}),this.logger.log("Rule has been removed: ",e)}async setHeaderByUrl(e,t,r,a){const n={id:e,priority:1,action:{type:"modifyHeaders",requestHeaders:[{operation:"set",header:r,value:a}]},condition:{urlFilter:t,resourceTypes:["xmlhttprequest"]}};return await this.updateRuleById(e,n),n}async updateRuleById(e,t){await chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:[e],addRules:[t]}),this.logger.log("Rule has been applied: ",t)}};Be([(0,T.f)(I.Ig.Logger),De("design:type","function"==typeof(Le=void 0!==E.Y&&E.Y)?Le:Object)],qe.prototype,"logger",void 0),Be([(0,T.f)(I.Ig.OffscreenCM),De("design:type",Object)],qe.prototype,"offscreenCM",void 0),Be([(0,T.f)(I.Ig.InjectCM),De("design:type",Object)],qe.prototype,"injectCM",void 0),qe=Be([(0,P.b)()],qe);var Ue,$e,Fe=function(e,t){return function(r,a){t(r,a,e)}};let We=class extends X.M{constructor(e,t){super(t),this.injectCM=e,this.injectCM.addListener(O.C.floatInventoryService.get,this.get.bind(this))}async get(e){const t=await M("https://floats.ondev.run/float",{body:JSON.stringify(e)});return 200!==t.status?[]:await t.json()}};We=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)(),Fe(0,(0,T.f)(I.Ig.InjectCM)),Fe(1,(0,T.f)(I.Ig.Logger)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",["function"==typeof(Ue=void 0!==q.l&&q.l)?Ue:Object,"function"==typeof($e=void 0!==E.Y&&E.Y)?$e:Object])],We);var ze;let He=class extends X.M{constructor(e){super(e)}async onStart(){chrome.runtime.onMessageExternal.addListener(((e,t,r)=>(this.externalMessageHandler(e,r),!0)))}async externalMessageHandler(e,t){switch(Mt.logger.log("External message handler invoked: "+String(e.cmd)),e.cmd){case"checkInstall":t({success:!0});break;case"start":t(await this.onStartMessage())}}async onStartMessage(){const{configuration:e,hasRequiredPermissions:t}=Mt.store.get();return t&&e.isExtensionEnabled?{success:!0,data:void 0}:{success:!1,error:"Missing required permissions"}}};He=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)(),function(e,t){return function(r,a){t(r,a,e)}}(0,(0,T.f)(I.Ig.Logger)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",["function"==typeof(ze=void 0!==E.Y&&E.Y)?ze:Object])],He);var Ye,Ge,Ve=function(e,t){return function(r,a){t(r,a,e)}};let Ze=class extends X.M{constructor(e,t){super(t),this.injectCM=e,this.injectCM.addListener(O.C.inventoryService.getItemSellPrice,this.getItemSellPrice.bind(this))}async getItemSellPrice(e){try{const{itemHashName:t,currencyId:r,country:a}=e,n=await this.getItemNameId(t);if(!n)throw Error("itemNameId not found");return await this.getItemPrice({itemNameId:n,currencyId:r,country:a})}catch(e){throw this.logger.error(e),new Error(e.message)}}async getItemNameId(e){const t="https://raw.githubusercontent.com/Olimp666/steam-market-item-nameids/master/ids.json",r=await R(t);if(200!==r.status)throw Error(`${t} with status ${r.status}`);return(await r.json())[e]}async getItemPrice(e){const{itemNameId:t,country:r,currencyId:a}=e,n=(0,N.rs)({country:r,language:"english",currency:a,item_nameid:t}),i=await R("https://steamcommunity.com/market/itemordershistogram",{body:n});if(200!==i.status)throw Error(`Error code: ${i.status} Status: ${i.statusText}`);return await i.json()}};Ze=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)(),Ve(0,(0,T.f)(I.Ig.InjectCM)),Ve(1,(0,T.f)(I.Ig.Logger)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",["function"==typeof(Ye=void 0!==q.l&&q.l)?Ye:Object,"function"==typeof(Ge=void 0!==E.Y&&E.Y)?Ge:Object])],Ze),r(164),r(6581),r(7095);var Je,Xe=r(7076),Qe=r.n(Xe),Ke=r(9911),et=r.n(Ke),tt=r(7890),rt=r.n(tt);Qe().extend(et()),Qe().extend(rt());class at{static unixNow(){return Math.floor((new Date).getTime()/1e3)}static extractTimeToExchange(e){const t=e.replaceAll(k.V4,"").replace(/[()]/g,""),r=Qe()(t);if(r.isValid()){const e=Qe()(),t=r.diff(e,"hours");return{remainDays:r.diff(e,"days"),remainHours:t}}}}!function(e){e.Initial="Initial",e.RequiresApproval="RequiresApproval",e.Completed="Completed",e.Error="Error",e.Canceled="Canceled"}(Je||(Je={}));var nt=r(6285);let it=class{constructor(){this.dbName="market-extension"}async onStart(){this.db=new nt.ZP(this.dbName),this.db.version(this.version).stores({[this.storeName]:this.scheme}),this.table=this.db.table(this.storeName),await this.db.open()}};it=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)()],it);var ot,st,ct=function(e,t){return function(r,a){t(r,a,e)}};let lt=class extends it{constructor(e,t){super(),this.storeName="marketTradeOffers",this.scheme="++id,tradeOfferId,*partnerId,createdAt,type,name,status,updatedAt",this.version=6,this.injectCM=e,this.popupCM=t,this.injectCM.addListener(O.C.marketTradeOfferRepository.getMany,(()=>this.getMany().toArray())),this.popupCM.addListener(O.C.marketTradeOfferRepository.getActiveTradesCount,(()=>this.getActiveTradesCount()))}async add(e){const t=await this.table.put(e);return e.id=t,this.sendEvent(O.C.marketTradeOfferRepository.onAdd,e),e}async getById(e){if(!e)throw new Error("Missing id");return await this.table.get(e)}async getByTradeName(e){return await this.table.filter((t=>t.name===e)).first()}async getByTradeOfferId(e){return await this.table.where({tradeOfferId:e}).first()}getMany(){return this.table.toCollection()}async update(e,t){if(!e)throw new Error("Missing id");await this.table.update(e,t);const r=await this.getById(e);if(!r)throw new Error("Missing entity");return this.sendEvent(O.C.marketTradeOfferRepository.onUpdate,r),r}async getActiveTradesCount(){return await this.table.filter((e=>e.status===Je.RequiresApproval&&!!e.createdAt&&e.createdAt+300>at.unixNow())).count()}async delete(e){await this.table.delete(e)}sendEvent(e,t){this.injectCM.send(e,t),this.popupCM.send(e,t)}};lt=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)(),ct(0,(0,T.f)(I.Ig.InjectCM)),ct(1,(0,T.f)(I.Ig.PopupCM)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",["function"==typeof(ot=void 0!==q.l&&q.l)?ot:Object,"function"==typeof(st=void 0!==q.l&&q.l)?st:Object])],lt);class dt{constructor(e){this.tradeOfferId=e.tradeOfferId,this.partnerId=e.partnerId,this.type=e.type,this.name=e.name,this.wsMessage=e.wsMessage,this.status=e.status,this.createdAt=at.unixNow(),this.updatedAt=at.unixNow()}}var mt;!function(e){e.Buy="Buy",e.Sell="Sell"}(mt||(mt={}));class ft{constructor(e){this.steamId=e.steamId,this.createTime=e.createTime,this.avatarUrl=e.avatarUrl,this.profileUrl=e.profileUrl,this.level=e.level,this.username=e.username,this.createdAt=at.unixNow(),this.updatedAt=at.unixNow()}}var ut,pt,gt=r(927),ht=function(e,t){return function(r,a){t(r,a,e)}};let bt=class extends X.M{constructor(e,t){super(t),this.injectCM=e,this.injectCM.addListener(O.C.marketTradeOfferService.accept,this.accept.bind(this)),this.injectCM.addListener(O.C.marketTradeOfferService.create,this.create.bind(this)),this.injectCM.addListener(O.C.marketTradeOfferService.cancel,this.cancel.bind(this))}async onStart(){const e="delete-alarm";await chrome.alarms.create(e,{periodInMinutes:240,delayInMinutes:240}),chrome.alarms.onAlarm.addListener((t=>{t.name===e&&this.deleteOld()})),await this.deleteOld()}async getTradePartnerInfo(e){const t=await K.getSteamAccessToken();if(!t)throw new Error("Unable to get steam access token");const[r]=await Mt.to.offscreen.invoke(O.C.steamAccountService.getUserSummaries,t,e.toString()),a=await Mt.to.offscreen.invoke(O.C.steamAccountService.getUserLevel,t,e.toString());return new ft({steamId:e.toString(),avatarUrl:r.avatarfull,username:r.personaname,level:a,createTime:r.timecreated,profileUrl:r.profileurl})}async add(e){const{data:{post:t}}=e;let r;if("json_tradeoffer"in t){const a=await Mt.repositories.marketTradeOffer.getByTradeName(t.tradeoffermessage);if(a)return a.wsMessage=e,await this.tryResolveMarketTradeOffer(a),a;const n=await Mt.repositories.steamAccount.add(await this.getTradePartnerInfo(t.partner));r=new dt({partnerId:n.id,status:Je.RequiresApproval,wsMessage:e,name:t.tradeoffermessage,type:mt.Sell})}else{const a=await Mt.repositories.marketTradeOffer.getByTradeOfferId(t.tradeofferid);if(a)return a.wsMessage=e,await this.tryResolveMarketTradeOffer(a),a;const n=await Mt.to.offscreen.invoke(O.C.steamTradeOfferService.getOfferDetails,await K.getSteamAccessToken(),t.tradeofferid),i=await Mt.repositories.steamAccount.add(await this.getTradePartnerInfo(K.getSteam64(n.accountid_other)));r=new dt({partnerId:i.id,tradeOfferId:n.tradeofferid,status:Je.RequiresApproval,type:mt.Buy,wsMessage:e,name:n.message})}const a=await Mt.repositories.marketTradeOffer.add(r);return await this.tryResolveMarketTradeOffer(a),a}async create(e){const{marketWebSocketService:t}=Mt.services.background,r=await Mt.to.offscreen.invoke(O.C.steamTradeService.sendOffer,e.wsMessage.data.post);let a;if(t?.write(e.wsMessage.event,r,e.wsMessage.callback),r.success){const{tradeofferid:e}=r.data;a=await Mt.to.offscreen.invoke(O.C.steamTradeOfferService.getOfferDetails,await K.getSteamAccessToken(),e)}return await Mt.repositories.marketTradeOffer.update(e.id,{status:r.success?Je.Completed:Je.Error,tradeOfferId:a?.tradeofferid}),r}async accept(e){const{marketWebSocketService:t}=Mt.services.background,r=await Mt.to.offscreen.invoke(O.C.steamTradeService.acceptOffer,e.wsMessage.data.post);return t?.write(e.wsMessage.event,r,e.wsMessage.callback),await Mt.repositories.marketTradeOffer.update(e.id,{status:r.success?Je.Completed:Je.Error}),r}async cancel(e){if("requiredAction"in e){const t=await Mt.repositories.marketTradeOffer.getByTradeOfferId(e.tradeOfferId);if(!t)return"cancel"===e.requiredAction?await Mt.to.offscreen.invoke(O.C.steamTradeService.cancelOffer,e.tradeOfferId):await Mt.to.offscreen.invoke(O.C.steamTradeService.declineOffer,e.tradeOfferId);e=t}let t={success:!1,error:"Unable to cancel/decline trade offer (unknown reason)"};if(e.type===mt.Buy){const r=e.wsMessage.data.post;t=await Mt.to.offscreen.invoke(O.C.steamTradeService.declineOffer,r.tradeofferid)}else e.tradeOfferId&&(t=await Mt.to.offscreen.invoke(O.C.steamTradeService.cancelOffer,e.tradeOfferId));return t?.success&&await Mt.repositories.marketTradeOffer.update(e.id,{status:Je.Canceled}),t}async deleteOld(){try{const e=await Mt.repositories.marketTradeOffer.getMany().filter((e=>e.createdAt+2592e3<at.unixNow())).delete();this.logger.log(`Successfully removed old market trade offers (${e})`)}catch(e){this.logger.error("Unable to remove old market trade offers")}}async tryResolveMarketTradeOffer(e){const{tradeOfferResolutionMode:t}=Mt.store.get().configuration;this.isAutoAcceptRequired(e,t)?await this.accept(e):Mt.services.notifications.show(fe.AcceptTradeOffer,(0,x.t)("new_create_trade_offer_request"),(0,x.t)("trade_offer_requires_action_on_trade_offers_page")),this.isAutoCreateRequired(e,t)?await this.create(e):Mt.services.notifications.show(fe.CreateTradeOffer,(0,x.t)("new_accept_trade_offer_request"),(0,x.t)("trade_offer_requires_action_on_trade_offers_page"))}isAutoAcceptRequired(e,t){return e.status===Je.RequiresApproval&&e.type===mt.Buy&&(t===gt.J.Accept||t===gt.J.CreateAndAccept)&&e.wsMessage}isAutoCreateRequired(e,t){return e.status===Je.RequiresApproval&&e.type===mt.Sell&&(t===gt.J.Create||t===gt.J.CreateAndAccept)&&e.wsMessage}};bt=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)(),ht(0,(0,T.f)(I.Ig.InjectCM)),ht(1,(0,T.f)(I.Ig.Logger)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",["function"==typeof(ut=void 0!==q.l&&q.l)?ut:Object,"function"==typeof(pt=void 0!==E.Y&&E.Y)?pt:Object])],bt);var vt=r(8852),yt=r(8691);let wt=class{constructor(){this.name="RefreshSteamAuthorizationMigration"}async isRequired(e){return void 0===e.refreshSteamAuthAutomatically}async migrate(e){return e.refreshSteamAuthAutomatically=!0,e}};wt=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)()],wt);var xt;let St=class extends it{constructor(e){super(),this.storeName="steamAccounts",this.scheme="++id,steamId,createTime,avatarUrl,profileUrl,level,username,createdAt,updatedAt",this.version=3,e.addListener(O.C.steamAccountRepository.getById,this.getById.bind(this))}async add(e){const t=await this.table.where({steamId:e.steamId}).first();if(t&&t.id)return await this.update(t.id,e),t;const r=await this.table.put(e);return e.id=r,e}async getById(e){if(!e)throw new Error("Missing id");return await this.table.get(e)}getMany(){return this.table.toCollection()}async update(e,t){await this.table.update(e,t)}async delete(e){await this.table.delete(e)}};St=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)(),function(e,t){return function(r,a){t(r,a,e)}}(0,(0,T.f)(I.Ig.InjectCM)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",["function"==typeof(xt=void 0!==q.l&&q.l)?xt:Object])],St);let It=class{constructor(){this.name="TradeOfferResolutionSettingMigration"}async isRequired(e){return void 0===e.tradeOfferResolutionMode}async migrate(e){return e.tradeOfferResolutionMode=gt.J.CreateAndAccept,e}};It=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)()],It);const kt=new re.W;kt.bind(re.W).toConstantValue(kt),kt.bind(I.Ig.Logger).toDynamicValue((()=>new E.Y("background",k.TQ))).inSingletonScope(),kt.bind(q.D).toSelf().inSingletonScope(),we()?(kt.bind(vt.Y).toSelf().inSingletonScope(),kt.bind(I.Ig.OffscreenCM).toDynamicValue((e=>e.container.get(vt.Y).create(be.Z.background_offscreen))).inSingletonScope()):kt.bind(I.Ig.OffscreenCM).toDynamicValue((e=>e.container.get(q.D).create(be.Z.background_offscreen))).inSingletonScope(),kt.bind(I.xo.StorageService).to(pe).inSingletonScope(),kt.bind(I.Ig.ExtensionStore).to(J.q).inSingletonScope(),kt.bind(I.Ig.PopupCM).toDynamicValue((e=>e.container.get(q.D).create(be.Z.background_popup))).inSingletonScope(),kt.bind(I.Ig.InjectCM).toDynamicValue((e=>e.container.get(q.D).create(be.Z.background_inject))).inSingletonScope(),kt.bind(I.xo.NotificationService).to(ue).inSingletonScope(),kt.bind(I.xo.BackgroundService).to(Re).inSingletonScope(),kt.bind(I.xo.InstallCheckService).to(He).inSingletonScope(),kt.bind(I.xo.PermissionService).to(yt.$).inSingletonScope(),kt.bind(I.xo.MarketTradeOfferService).to(bt).inSingletonScope(),kt.bind(I.xo.SteamAccountRepository).to(St).inSingletonScope(),kt.bind(I.xo.MarketTradeOfferRepository).to(lt).inSingletonScope(),kt.bind(I.xo.BadgeService).to(Pe).inSingletonScope(),kt.bind(I.xo.FloatInventoryService).to(We).inSingletonScope(),kt.bind(I.xo.InventoryService).to(Ze).inSingletonScope(),kt.bind(I.Ig.DeclarativeNetRequestService).to(qe).inSingletonScope(),kt.bind(I.xo.MigrationService).to(ce).inSingletonScope(),kt.bind(ae).to(It),kt.bind(ae).to(wt),kt.bind(ae).to(Ae);const Et=kt.get(I.Ig.ExtensionStore),Ct=kt.get(I.xo.NotificationService),_t=kt.get(I.Ig.OffscreenCM),Ot=kt.get(I.Ig.PopupCM),Rt=kt.get(I.Ig.InjectCM);_t.addListener(O.C.extensionSession.get,Et.get.bind(Et)),_t.addListener(O.C.background.restart,(()=>{chrome.runtime.reload()})),_t.addListener(O.C.notificationService.show,Ct.show.bind(Ct)),Ot.addListener(O.C.extensionSession.get,Et.get.bind(Et)),Ot.addListener(O.C.extensionSession.update,(e=>{Et.update(e)})),Rt.addListener(O.C.extensionSession.get,Et.get.bind(Et)),Rt.addListener(O.C.extensionSession.update,(e=>{Et.update(e)})),Rt.addListener(O.C.steamUtils.getSteamCookies,K.getSteamCookies.bind(K));const Mt={logger:kt.get(I.Ig.Logger),to:{offscreen:_t,popup:Ot,inject:Rt},services:{background:kt.get(I.xo.BackgroundService),badge:kt.get(I.xo.BadgeService),permissions:kt.get(I.xo.PermissionService),installCheck:kt.get(I.xo.InstallCheckService),notifications:kt.get(I.xo.NotificationService),marketTradeOffer:kt.get(I.xo.MarketTradeOfferService),floatInventory:kt.get(I.xo.FloatInventoryService),inventory:kt.get(I.xo.InventoryService)},repositories:{marketTradeOffer:kt.get(I.xo.MarketTradeOfferRepository),steamAccount:kt.get(I.xo.SteamAccountRepository)},store:kt.get(I.Ig.ExtensionStore),storage:kt.get(I.xo.StorageService),declarativeNetRequestService:kt.get(I.Ig.DeclarativeNetRequestService)};Mt.logger.log("Background API has been loaded");const jt=["Graffiti","Sticker","Collectible","Agent","Patch"],Nt=e=>{if(e)return e.find((e=>e.link.includes("steam://")))?.link},Tt=e=>{const t=(0,D.td)(e());return(0,D.cE)((()=>{t.value=e()})),t};var Pt,At,Lt,Bt=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},Dt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let qt=class{constructor(){this.inventoryItems=(0,D.td)([]),this.floatCache=new Map,this.totalMyPrices=Tt((()=>this.inventoryItems.value.filter((e=>e.isMultiSelected)).reduce(((e,t)=>e+(t.priceInfo?.myPrice??0)),0))),this.selectedItem=(0,D.td)(void 0),this.isMultiSelectEnabled=(0,D.td)(!1),this.isBusy=(0,D.td)(!1),this.floatableItemsMap=new Map,this.selectedItems=Tt((()=>this.inventoryItems.value.filter((e=>e.isMultiSelected)))),this.selectedTableItems=Tt((()=>this.selectedItems.value.map((e=>{const t=e.priceInfo?{instantSale:e.priceInfo.instantPrice,quickSell:e.priceInfo.quickPrice,myPrice:void 0===e.priceInfo.myPrice?e.priceInfo.quickPrice:e.priceInfo.myPrice,priceSymbol:e.priceInfo.priceSymbol}:void 0;return{id:e.id,name:e.baseInfo.name,image:`https://community.akamai.steamstatic.com/economy/image/${e.baseInfo.icon_url}`,amount:1,priceInfo:t}})))),this.toggleMultiItem=e=>{1!==e.baseInfo.marketable||this.isBusy.value||(this.inventoryItems.value=this.inventoryItems.value.map((t=>t.id===e.id?{...t,isMultiSelected:!t.isMultiSelected}:t)))}}async onStart(){await this.refreshInventory()}removeAllFromMultiSelect(){this.isBusy.value||(this.inventoryItems.value=this.inventoryItems.value.map((e=>({...e,isMultiSelected:!1}))))}updateMyPriceBySelectedItemId(e,t){this.inventoryItems.value=this.inventoryItems.value.map((r=>r.id===e&&r.isMultiSelected?{...r,priceInfo:{...r.priceInfo,myPrice:t}}:r))}toggleMultiSelectMode(){this.isMultiSelectEnabled.value=!this.isMultiSelectEnabled.value,this.removeAllFromMultiSelect()}getMarketableInventory(){return this.inventoryItems.value.filter((e=>1===e.baseInfo.marketable))}addAllItemsToMultiSelect(){this.isBusy.value||(this.inventoryItems.value=this.inventoryItems.value.map((e=>1!==e.baseInfo.marketable?e:{...e,isMultiSelected:!0})))}updateInventoryItem(e,t){let r;return this.inventoryItems.value=this.inventoryItems.value.map((a=>a.id===e?(r={...a,...t},r):a)),r}async updateInventoryItemPrice(e,t){const r=await this.priceService.getItemPrice(t);return this.updateInventoryItem(e,{priceInfo:r})}removeItemFromInventory(e){const t=document.getElementById(e);t&&t.parentElement?.remove();const r=document.getElementById("iteminfo0"),a=document.getElementById("iteminfo1");r&&a&&(r.style.display="none",a.style.display="none"),this.inventoryItems.value=this.inventoryItems.value.filter((t=>t.id!==e)),this.selectedItem.value=void 0}async refreshInventory(){try{const e=this.extractInventorySteamId();if(!e)return;const t=await this.inventoryService.fetchSteamInventorySlow(e,{count:3e3}),r=new Map(t?.descriptions.map((e=>[e.classid,e])));if(!t?.success)return;this.inventoryItems.value=[...t.assets.map((t=>{const a=this.createInventoryItemStructure(r,t,e),{isFloatable:n,url:i,baseInfo:o,assetInfo:s,isMultiSelected:c}=a;return n&&this.floatableItemsMap.set(i,{id:this.inventoryService.getItemId(t.assetid),baseInfo:o,url:i,assetInfo:s,isMultiSelected:c}),a}))]}catch(e){this.logger.error(e.message)}}async refreshFloats(e){let t=0;const r={links:this.inventoryItems.value.filter((t=>e.includes(t.id)&&(!t.floatInfo||"isLoading"in t.floatInfo)&&t.isFloatable&&t.url&&!this.floatCache.has(t.url))).map((e=>e.url))};if(0!==r.links.length){const e=await this.inventoryService.getFloatInventory(r);for(const r of e)r.success&&!("timeout"in r.result)?this.floatCache.set(r.url,r.result):r.success||(t+=1)}return this.inventoryItems.value=this.inventoryItems.value.map((e=>{const t=this.floatCache.get(e.url??"");return t?{...e,floatInfo:t}:e.isFloatable?{...e,floatInfo:{isLoading:!0}}:e})),t}createInventoryItemStructure(e,t,r){const a=e.get(t.classid),n=this.formatGameActionLink({actions:a.actions,steamId:r,assetId:t.assetid});return{id:this.inventoryService.getItemId(t.assetid),baseInfo:a,assetInfo:t,url:n,isFloatable:(i=a,!!Nt(i.actions)&&!jt.some((e=>i.type.includes(e)))&&1===i.marketable),isMultiSelected:!1};var i}extractInventorySteamId(){const e=document.getElementsByClassName("app_tags_container")[0].id,[,t]=e.match(/tags_(\d+)_/)||[];return t}async isOwnInventory(){const e=this.extractInventorySteamId(),t=await Mt.storage.get(ye);return!!t&&e===t.steamId}formatGameActionLink(e){const t=Nt(e.actions);if(t)return t.replace(/%owner_steamid%/,e.steamId).replace(/%assetid%/,e.assetId)}getTradeableDateText(e){const t=this.floatableItemsMap.get(e),r=t?.baseInfo.owner_descriptions;return r?.find((e=>e.value.includes(k.V4)))?.value}getInventorySteamId(){const e=document.getElementsByClassName("whiteLink persona_name_text_content")[0];e?.getAttribute("href")}};Bt([(0,T.f)(I.uw.InventoryService),Dt("design:type","function"==typeof(Pt=void 0!==B&&B)?Pt:Object)],qt.prototype,"inventoryService",void 0),Bt([(0,T.f)(I.Ig.Logger),Dt("design:type","function"==typeof(At=void 0!==E.Y&&E.Y)?At:Object)],qt.prototype,"logger",void 0),Bt([(0,T.f)(I.uw.SteamMarketPriceService),Dt("design:type","function"==typeof(Lt=void 0!==Y&&Y)?Lt:Object)],qt.prototype,"priceService",void 0),qt=Bt([(0,P.b)()],qt);var Ut,$t=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};let Ft=class{constructor(){this.isInventoryVisible=(0,D.td)(!1),this.activeItems=(0,D.td)([]),this.inventoryContainer=(0,D.td)(void 0),this.setInventoryContainer=async e=>{if(this.inventoryContainer.value=e,this.isInventoryVisible.value=!!e,!e)return;await this.inventoryStore.refreshInventory();const t=new MutationObserver(((e,t)=>{for(const t of e){if("attributes"===t.type&&"style"===t.attributeName&&(t.target?.classList?.contains("itemHolder")||t.target?.classList?.contains("inventory_page")))return void this.refetchMissingData();if("childList"===t.type&&t.addedNodes[0]?.classList?.contains("itemHolder"))return void this.refetchMissingData()}}));return t.observe(e,{attributes:!0,childList:!0,subtree:!0}),t.disconnect.bind(t)},this.refetchMissingData=(e=>{let t;return(...r)=>{t?.abort(),t=new AbortController,e(t.signal,...r)}})((async e=>{if(e.aborted)return;const t=this.findItemHolders();this.activeItems.value=t;const r=document.getElementById("pagecontrol_cur"),a=r&&"hidden"!==window.getComputedStyle(r).visibility,n=25*(Number(r?.textContent)-1),i=n+25,o=t.map((e=>e)).filter(((e,t)=>!a||t>=n&&t<i)).map((e=>e.firstChild?.id)).filter((e=>!!e));let s=2;for(;!e.aborted&&0!==await this.inventoryStore.refreshFloats(o);)s*=2,s<1024&&await C(1e3*s)})),this.findItemHolders=()=>{const e=this.inventoryContainer.value?.getElementsByClassName("itemHolder")??[];return Array.from(e).filter((e=>"none"!==window.getComputedStyle(e).display))},this.onActiveItemClick=e=>{const t=e.target,r=t.getAttribute("href")?.replace(/^#/,""),a=this.inventoryStore.inventoryItems.value.find((e=>e.id===r));this.inventoryStore.isMultiSelectEnabled.value&&a&&this.inventoryStore.toggleMultiItem(a),this.inventoryStore.selectedItem.value=a}}};$t([(0,T.f)(I.uw.InventoryStore),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type","function"==typeof(Ut=void 0!==qt&&qt)?Ut:Object)],Ft.prototype,"inventoryStore",void 0),Ft=$t([(0,P.b)()],Ft);let Wt=class{constructor(){this.activeAlertSignal=(0,D.td)(void 0),this.isAlertOpenSignal=(0,D.td)(!0),this.alertTimer=void 0}get alert(){return this.activeAlertSignal.value}closeAlert(){this.isAlertOpenSignal.value=!1}pushAlert(e,t=3e3){this.activeAlertSignal.value=e,this.isAlertOpenSignal.value=!0,clearTimeout(this.alertTimer),this.alertTimer=setTimeout((()=>{this.activeAlertSignal.value=void 0}),t)}};Wt=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)()],Wt);var zt,Ht,Yt=r(4823),Gt=function(e,t){return function(r,a){t(r,a,e)}};let Vt=class extends X.M{constructor(e,t){super(t),this.injectCM=e,this.injectCM.addListener(O.C.extensionSession.onupdate,this.onStateUpdate.bind(this));const r=new Z.qv;r.configuration.isCs2InventoryEnabled=!1,this.state=(0,D.td)(r),this.isExtensionEnabled=Tt((()=>this.state.value.configuration.isExtensionEnabled)),this.isCs2InventoryEnabled=Tt((()=>this.state.value.configuration.isCs2InventoryEnabled))}async updateExtensionState(){await this.injectCM.invoke(O.C.extensionSession.get).then((e=>{this.state.value=e}))}async onStart(){await this.updateExtensionState()}onStateUpdate(e){const t=this.state.value.configuration.isExtensionEnabled;e.configuration.isExtensionEnabled!==t&&location.reload(),this.state.value=e}};Vt=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)(),Gt(0,(0,T.f)(I.Ig.InjectCM)),Gt(1,(0,T.f)(I.Ig.Logger)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",["function"==typeof(zt=void 0!==q.l&&q.l)?zt:Object,"function"==typeof(Ht=void 0!==E.Y&&E.Y)?Ht:Object])],Vt);var Zt,Jt,Xt=function(e,t){return function(r,a){t(r,a,e)}};let Qt=class extends X.M{constructor(e,t){super(t),this.injectCM=e}async onStart(){this.injectCM.connect(be.Z.background_inject),we()&&this.injectCM.listen("onDisconnect",(async e=>{"onDisconnect"===e&&(await C(1e3),this.onRun())})),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?this.injectCM.disconnect():this.injectCM.connect(be.Z.background_inject)}))}onStop(){}onRun(e=!1){e&&this.injectCM.disconnect(),"visible"!==document.visibilityState||this.injectCM.isConnected||this.injectCM.connect(be.Z.background_inject)}};Qt=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)(),Xt(0,(0,T.f)(I.Ig.InjectCM)),Xt(1,(0,T.f)(I.Ig.Logger)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",["function"==typeof(Zt=void 0!==q.l&&q.l)?Zt:Object,"function"==typeof(Jt=void 0!==E.Y&&E.Y)?Jt:Object])],Qt);var Kt,er,tr=function(e,t){return function(r,a){t(r,a,e)}};let rr=class extends X.M{constructor(e,t){super(t),this.signal=(0,D.td)([]),this.injectCM=e,this.injectCM.addListener(O.C.marketTradeOfferRepository.onUpdate,(async e=>{e.partnerId=await this.injectCM.invoke(O.C.steamAccountRepository.getById,e.partnerId),this.signal.value=[...this.signal.value.map((t=>t.id===e.id?e:t))],await this.refreshPageWithoutTrade(e)})),this.injectCM.addListener(O.C.marketTradeOfferRepository.onAdd,(async e=>{e.partnerId=await this.injectCM.invoke(O.C.steamAccountRepository.getById,e.partnerId),this.signal.value=[...this.signal.value,e],await this.refreshPageWithoutTrade(e)}))}async onStart(){document.addEventListener("visibilitychange",(()=>{this.onVisibilityChange()}));const e=await this.injectCM.invoke(O.C.marketTradeOfferRepository.getMany);for(const t of e)t.partnerId=await this.injectCM.invoke(O.C.steamAccountRepository.getById,t.partnerId);this.signal.value=e}async refreshPageWithoutTrade(e){e.tradeOfferId&&(document.getElementById("tradeofferid_"+e.tradeOfferId)||location.reload())}async onVisibilityChange(){if("visible"===document.visibilityState){const e=await this.injectCM.invoke(O.C.marketTradeOfferRepository.getMany),{hasNewItems:t,hasUpdates:r}=((e,t)=>{const r=new Map,a={hasNewItems:!1,hasUpdates:!1};for(const t of e)t.id&&r.set(t.id,t);for(const e of t){if(!e.id)continue;const t=r.get(e.id);if(t||(a.hasNewItems=!0),t?.updatedAt!==e.updatedAt&&(a.hasUpdates=!0),a.hasNewItems&&a.hasUpdates)break}return a})(this.signal.value,e);t&&location.reload(),r&&(this.signal.value=e)}}async resolve(e){e.type===mt.Buy?await this.injectCM.invoke(O.C.marketTradeOfferService.accept,e):await this.injectCM.invoke(O.C.marketTradeOfferService.create,e)}async reject(e){await this.injectCM.invoke(O.C.marketTradeOfferService.cancel,e)}};rr=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([(0,P.b)(),tr(0,(0,T.f)(I.Ig.InjectCM)),tr(1,(0,T.f)(I.Ig.Logger)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",["function"==typeof(Kt=void 0!==q.l&&q.l)?Kt:Object,"function"==typeof(er=void 0!==E.Y&&E.Y)?er:Object])],rr);var ar,nr,ir,or=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},sr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let cr=class{async sellItem(e){const t=await Mt.storage.get(ye);if(!t)throw"Profile is not defined";const r=(0,N.rs)({sessionid:t.sessionId,appid:k.T2,contextid:k.w_,amount:1,assetid:e.assetId,price:e.price}),a=await M("https://steamcommunity.com/market/sellitem/",{body:r,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});return await a.json()}async sellItemWithPriceMode(e,t,r){const a=await this.steamMarketPriceService.getItemPrice(t);if(!a)return;const{quickPrice:n,instantPrice:i}=a,o=r?i:n,s=await this.sellItemWithCustomPrice(e,o);return await this.handleSellItemResult(s),s}async*multiSellItemsWithMyPrice(e){for(const t of e){if(!t.priceInfo?.myPrice)continue;const e=await this.sellItemWithCustomPrice(t.assetInfo.assetid,t.priceInfo.myPrice);e&&e.success&&0===e.requires_confirmation&&(yield{result:e,itemId:t.id}),await this.handleSellItemResult(e),await C(1e3)}}async sellItemWithCustomPrice(e,t){try{return await this.sellItem({assetId:e,price:t})}catch(e){this.logger.error(e)}}async handleSellItemResult(e){e?e.success?1===e.requires_confirmation&&e.needs_email_confirmation?this.alertStore.pushAlert({text:"need_email_confirmation_to_list",type:"success"}):1===e.requires_confirmation&&e.needs_mobile_confirmation?this.alertStore.pushAlert({text:"need_mobile_confirmation_to_list",type:"success"}):this.alertStore.pushAlert({text:"item_is_listed",type:"success"}):this.alertStore.pushAlert({text:e.message||"item_not_listed",type:"error"}):this.alertStore.pushAlert({text:"error_by_item_list",type:"error"})}};or([(0,T.f)(I.Ig.Logger),sr("design:type","function"==typeof(ar=void 0!==E.Y&&E.Y)?ar:Object)],cr.prototype,"logger",void 0),or([(0,T.f)(I.uw.AlertStore),sr("design:type","function"==typeof(nr=void 0!==Wt&&Wt)?nr:Object)],cr.prototype,"alertStore",void 0),or([(0,T.f)(I.uw.SteamMarketPriceService),sr("design:type","function"==typeof(ir=void 0!==Y&&Y)?ir:Object)],cr.prototype,"steamMarketPriceService",void 0),cr=or([(0,P.b)()],cr);const lr=new re.W;lr.bind(re.W).toConstantValue(lr),lr.bind(I.uw.InventoryStore).to(qt).inSingletonScope(),lr.bind(I.uw.AlertStore).to(Wt).inSingletonScope(),lr.bind(I.Ig.Logger).toDynamicValue((()=>new E.Y("inject",k.TQ))).inSingletonScope(),lr.bind(q.D).toSelf().inSingletonScope(),lr.bind(I.Ig.InjectCM).toDynamicValue((e=>e.container.get(q.D).create(be.Z.background_inject))).inSingletonScope(),lr.bind(I.uw.InjectMainService).to(Qt).inSingletonScope(),lr.bind(I.uw.InventoryService).to(B).inSingletonScope(),lr.bind(I.uw.SteamMarketPriceService).to(Y).inSingletonScope(),lr.bind(I.uw.SteamMarketService).to(cr).inSingletonScope(),lr.bind(I.uw.MarketTradeOfferStore).to(rr).inSingletonScope(),lr.bind(I.Ig.ExtensionStore).to(Vt).inSingletonScope(),lr.bind(I.uw.ActiveItemsProviderService).to(Ft).inSingletonScope(),lr.bind(I.Ig.DeclarativeNetRequestService).to(Yt.D).inSingletonScope(),lr.bind(X.M).toConstantValue(lr.get(I.uw.InjectMainService)),lr.bind(X.M).toConstantValue(lr.get(I.uw.MarketTradeOfferStore)),lr.bind(X.M).toConstantValue(lr.get(I.Ig.ExtensionStore)),(async()=>{try{const e=lr.getAll(X.M);for(const t of e)await t.onStart()}catch(e){console.error(e),process.exit(1)}})();const dr=(0,v.createContext)({container:lr,logger:lr.get(I.Ig.Logger),to:{background:lr.get(I.Ig.InjectCM)},stores:{marketTradeOffers:lr.get(I.uw.MarketTradeOfferStore),inventory:lr.get(I.uw.InventoryStore),extension:lr.get(I.Ig.ExtensionStore),alert:lr.get(I.uw.AlertStore)},services:{main:lr.get(I.uw.InjectMainService),inventory:lr.get(I.uw.InventoryService),steamMarketPrice:lr.get(I.uw.SteamMarketPriceService),steamMarket:lr.get(I.uw.SteamMarketService),activeItemsProvider:lr.get(I.uw.ActiveItemsProviderService)},declarativeNetRequestService:lr.get(I.Ig.DeclarativeNetRequestService)}),mr=()=>(0,v.useContext)(dr),fr=()=>{const e=mr().stores.alert;if(e.alert&&e.isAlertOpenSignal.value)return e.alert&&v.createElement("div",{className:"fixed bottom-5 left-1/2 z-[1000] h-[50px] w-[460px] -translate-x-1/2 transform rounded-l"},v.createElement(S,{onClose:e.closeAlert.bind(e),...e.alert}))};var ur=r(3897),pr=r(1807);const gr=e=>{const t=mr().stores.inventory,{children:r}=e,a=(0,pr.TH)(),n=mr().services.activeItemsProvider,i=Array.from(document.querySelectorAll("[id*='730_2']:has(.inventory_page)")).find((e=>"none"!==window.getComputedStyle(e).display));var o,s,c;return(0,v.useEffect)((()=>{const e=n.setInventoryContainer(i);return()=>{e.then((e=>e?.()))}}),[i]),(0,v.useEffect)((()=>{const e=document.getElementById("inventory_link_730"),r=document.getElementById("inventory_logos")?.classList;return(e?.classList.contains("active")??!1)&&(r?.add("hider"),(async()=>{await t.refreshInventory(),n.refetchMissingData()})()),()=>{r?.remove("hider")}}),[a,n.inventoryContainer]),o="mouseup",s=n.onActiveItemClick.bind(void 0),c=n.activeItems.value,(0,v.useEffect)((()=>{for(const e of c)e?.addEventListener(o,s);return()=>{for(const e of c)e?.removeEventListener(o,s)}}),[c,o,s]),v.createElement(v.Fragment,null,n.isInventoryVisible.value&&r)};var hr=r(8388);const br=e=>{const{className:t,labelPosition:r,label:a,error:n,root:i,...o}=e,s=n?.();return v.createElement("div",{...i,className:(0,b.j)("flex flex-1 gap-2","left"===r?"flex-col items-stretch":"items-center",i?.className)},a&&v.createElement("label",{className:"top-0 min-w-4 shrink-0 text-lg text-white"},a),v.createElement("input",{className:(0,hr.m6)("min-h-0 min-w-0 flex-1 rounded border-2 border-neutral-700 bg-neutral-800 \n      px-[16px] py-[14px] text-base text-white focus-visible:border-green-400\n       focus-visible:outline-none",t,s&&"border-red-500"),...o}),s&&v.createElement("label",{className:"bottom-0 min-w-4 shrink-0 text-sm text-red-500"},s))};var vr=r(6116);const yr=e=>{const{container:t,onChange:r,onToggleFilter:a,onToggleMultiSelect:n,isOwnInventory:i}=e,o=mr().stores.inventory;return(0,vr.createPortal)(v.createElement("div",{className:"flex flex-row border-0 border-b border-solid border-steam-600"},v.createElement("div",{className:"flex items-center gap-[10px] p-[20px]"},v.createElement(br,{className:"h-[21px] max-w-[200px] rounded-sm border border-solid border-steam-400\n           bg-neutral-700 px-[8.5px] py-[6px] font-inter text-sm placeholder-opacity-60 placeholder-normal",root:{className:"!block !grow-0"},onChange:e=>r(e.target.value),placeholder:(0,x.t)("inventory_search_filter_placeholder")}),v.createElement(y,{className:"flex !min-h-[34px] !min-w-[34px] items-center justify-center !p-0",onClick:a},v.createElement(w.l,{className:"h-3 w-3",iconClassName:"bg-filter"}))),v.createElement("div",{className:"flex items-center border-0 border-l border-solid border-steam-600 pl-[20px]"},i&&v.createElement(y,{className:"flex min-h-[34px] items-center gap-[6px] whitespace-nowrap",onClick:()=>{o.toggleMultiSelectMode(),n(!1)},type:o.isMultiSelectEnabled.value?"reject":void 0,disabled:o.isBusy.value},o.isMultiSelectEnabled.value?v.createElement(v.Fragment,null,v.createElement(w.l,{iconClassName:"bg-red-cross"}),v.createElement("span",null,(0,x.t)("close_multiselect_label"))):v.createElement(v.Fragment,null,v.createElement(w.l,{iconClassName:"bg-pencil"}),v.createElement("span",{className:"font-inter text-sm"},(0,x.t)("open_multiselect_label")))))),t)},wr=()=>{const e=mr().stores.inventory,t=e.selectedItems.value.length||0,r=e.selectedItems.value[0]?.priceInfo?.priceSymbol;return v.createElement("div",{className:"flex flex-grow flex-col justify-between font-inter text-sm"},v.createElement("span",{className:"text-white"},(0,x.t)("multi_selected_items_amount"),":"," ",v.createElement("span",{className:"text-green-400"},t)),v.createElement("span",{className:"text-white"},(0,x.t)("multi_selected_items_price"),":"," ",v.createElement("span",{className:"text-green-400"},$(e.totalMyPrices.value,r||""))))},xr=e=>{const{container:t,isMultiSelectItemsPage:r,toggleMultiSelectItemsPage:a}=e,n=mr(),{inventory:i}=n.stores,{steamMarketPrice:o,steamMarket:s}=n.services,c=i.selectedItems.value,l=i.isBusy.value,d=i.selectedItems.value,m=!(d.length===i.getMarketableInventory().length||l),f=d.length>0&&!l,u=d.length>0&&!l;return i.isMultiSelectEnabled.value&&(0,vr.createPortal)(v.createElement("div",{className:"flex gap-[10px] border-0 border-b border-solid border-steam-600 p-[20px]"},r&&v.createElement(y,{className:"flex min-h-[34px] items-center  whitespace-nowrap",onClick:()=>a(!1)},v.createElement(w.l,{iconClassName:"bg-arrow-left"})),v.createElement(y,{className:"flex min-h-[34px] items-center  whitespace-nowrap",onClick:async()=>{i.addAllItemsToMultiSelect();const e=i.selectedItems.value.filter((e=>void 0===e.priceInfo?.quickPrice));for(const t of e){const e=await o.getItemPrice(t.baseInfo.market_hash_name);i.updateInventoryItem(t.id,{priceInfo:e})}},disabled:!m},v.createElement(w.l,{iconClassName:"bg-plus"}),v.createElement("span",{className:"font-inter text-sm"},(0,x.t)("multi_select_add_all"))),v.createElement(y,{className:"flex min-h-[34px] items-center  whitespace-nowrap",onClick:()=>{i.removeAllFromMultiSelect()},disabled:!f},v.createElement(w.l,{iconClassName:"bg-trash"}),v.createElement("span",{className:"font-inter text-sm"},(0,x.t)("multi_select_clean_all"))),!r&&v.createElement(y,{className:"flex min-h-[34px] items-center  whitespace-nowrap",onClick:()=>a(!0)},v.createElement("span",{className:"font-inter text-sm"},(0,x.t)("multi_select_edit_prices"))),v.createElement(y,{className:"flex min-h-[34px] items-center  whitespace-nowrap",type:"trade",onClick:async()=>{i.isBusy.value=!0;for await(const e of s.multiSellItemsWithMyPrice(c))i.removeItemFromInventory(e.itemId);i.isBusy.value=!1},disabled:!u},v.createElement(w.l,{iconClassName:"bg-steam"}),v.createElement("span",{className:"font-inter text-sm"},(0,x.t)("multi_select_sell_selected"))),v.createElement(wr,null)),t)},Sr=e=>{const{children:t,className:r}=e;return v.createElement("div",{className:(0,b.j)("flex w-[480px] flex-col items-center justify-center gap-[18px]",r)},v.createElement("span",{className:"text-center text-grey-400"},(0,x.t)("empty_multi_selected_page_label")),t)};var Ir=r(4094);const kr=e=>{const{table:t,onItemClick:r,isBusy:a}=e;return v.createElement("div",null,v.createElement("table",{className:"w-full border-spacing-y-[8px] font-inter text-sm"},v.createElement("thead",null,t.getHeaderGroups().map((e=>v.createElement("tr",{key:e.id,className:"flex"},e.headers.map((e=>v.createElement("th",{key:e.id,colSpan:e.colSpan,className:(0,b.j)("font-inter text-sm !font-medium",e.column.columnDef.meta?.className),style:{width:`${e.getSize()}px`}},e.isPlaceholder?null:(0,Ir.ie)(e.column.columnDef.header,e.getContext())))))))),v.createElement("tbody",null,t.getRowModel().rows.map((e=>v.createElement("tr",{key:e.id,className:"group mb-2"},v.createElement("td",{className:"relative"},v.createElement("div",{className:"flex h-[44px] rounded bg-steam-600 p-2"},e.getVisibleCells().map((e=>{const t=e.column.columnDef.meta?.className;return v.createElement("div",{key:e.id,className:(0,b.j)("flex items-center text-white",t),style:{width:`${e.column.getSize()}px`}},(0,Ir.ie)(e.column.columnDef.cell,e.getContext()))}))),!a&&v.createElement(y,{onClick:()=>r(e.original.id),className:"absolute right-[-50px] top-1/2 \n                    -translate-y-1/2 transform opacity-0 transition-opacity \n                    duration-300 group-hover:opacity-100"},v.createElement(w.l,{iconClassName:"bg-red-cross"})))))))),v.createElement("div",{className:"h-4"}))},Er=e=>{const{id:t,myPrice:r,priceSymbol:a,className:n,disabled:i}=e,o=mr(),{inventory:s}=o.stores,c=(0,v.useRef)(null),[l,d]=(0,v.useState)(0);(0,v.useEffect)((()=>{const e=c.current?.offsetWidth;d(a&&e?e+8:4)}),[a]);const[m,f]=(0,v.useState)(String((r??0)/100));return(0,v.useEffect)((()=>{f(String((r??0)/100))}),[r]),v.createElement("div",{className:"relative flex h-[30px] w-[80px]"},v.createElement("input",{type:"number",min:0,max:9999999,value:m,onChange:e=>{const r=(e=>{const t=Number(e??0);return isNaN(t)?+m:t<0?0:t})(e.currentTarget.value);s.updateMyPriceBySelectedItemId(t,Math.floor(100*r))},className:(0,b.j)("arrow-hide w-full rounded-[5px] !border !border-solid !border-steam-400 outline-none",n),style:{padding:4,paddingRight:l},disabled:i}),v.createElement("div",{className:"pointer-events-none invisible absolute inset-0 flex select-none items-center",style:{gap:4,padding:4}},v.createElement("span",{className:"overflow-hidden"},m),v.createElement("span",{ref:c,className:"visible flex h-full items-center"},a)))};var Cr=r(7060);const _r=e=>{const{onItemClick:t,isBusy:r}=e,a=mr().stores.inventory,n=a.selectedTableItems.value,i=(0,v.useMemo)((()=>Or(r)),[r]),o=(0,Ir.b7)({data:n,columns:i,getCoreRowModel:(0,Cr.sC)()});return v.createElement(kr,{onItemClick:e=>t(a.selectedItems.value.find((t=>t.id===e))),table:o,isBusy:r})},Or=e=>{const t=(0,Cr.Cl)();return[t.accessor("image",{size:60,cell:e=>v.createElement("img",{className:"w-[49px]",src:e.getValue()}),header:()=>v.createElement("span",null,(0,x.t)("multi_select_image_label")),footer:e=>e.column.id}),t.accessor("name",{size:250,cell:e=>v.createElement("span",{className:"max-w-56 truncate"},e.getValue()),header:()=>v.createElement("span",null,(0,x.t)("multi_select_name_label")),footer:e=>e.column.id,meta:{className:"flex-1"}}),t.accessor("amount",{size:100,header:()=>v.createElement("span",null,(0,x.t)("multi_select_amount_label")),cell:e=>e.renderValue(),footer:e=>e.column.id}),t.accessor("priceInfo.instantSale",{size:100,header:()=>v.createElement("span",null,(0,x.t)("multi_select_instant_sale_label")),cell:e=>e.row.original.priceInfo?$(e.row.original.priceInfo.instantSale,e.row.original.priceInfo.priceSymbol):void 0,footer:e=>e.column.id}),t.accessor("priceInfo.quickSell",{size:100,header:()=>v.createElement("span",null,(0,x.t)("multi_select_quick_sale_label")),cell:e=>e.row.original.priceInfo?$(e.row.original.priceInfo.quickSell,e.row.original.priceInfo.priceSymbol):void 0,footer:e=>e.column.id}),t.accessor("priceInfo.myPrice",{size:100,header:()=>v.createElement("span",null,(0,x.t)("multi_select_my_price_label")),cell:t=>v.createElement(Er,{id:t.row.original.id,myPrice:t.row.original.priceInfo?.myPrice,priceSymbol:t.row.original.priceInfo?.priceSymbol,disabled:e,className:"font-inter text-sm !text-white"}),footer:e=>e.column.id})]},Rr=(e,t,r)=>{const[a,n]=(0,v.useState)();return(0,v.useEffect)((()=>{const a=document.createElement("div");return a.className=r||"",e?.insertBefore(a,t),n(a),()=>{a.remove()}}),[]),a},Mr=(e,t)=>{(0,v.useEffect)((()=>{if(e)return e.style.display="none",()=>{e&&(e.style.display=t)}}),[])},jr=e=>{const{toggleMultiSelectItemsPage:t}=e,r=mr(),{inventory:a}=r.stores,n=document.getElementById("active_inventory_page"),i=document.getElementById("filter_panel");Mr(n,"block"),Mr(i,"flex");const o=document.getElementById("inventory_load_error_ctn");if(!o)return;const s=Rr(o.parentNode,o.nextSibling,"ml-[14px] mr-[17px] min-h-[520px]");return s?a.isMultiSelectEnabled.value?(0,vr.createPortal)(a.selectedItems.value.length>0?v.createElement("div",{className:"mt-[10px] w-full"},v.createElement(_r,{onItemClick:a.toggleMultiItem,isBusy:a.isBusy.value})):v.createElement("div",{className:"flex h-full w-full items-center justify-center"},v.createElement(Sr,{className:"pt-[200px]"},v.createElement(y,{onClick:()=>t(!1),type:"trade",className:"min-h-[34px] whitespace-nowrap text-white"},v.createElement("span",{className:"font-inter text-sm"},(0,x.t)("empty_multi_selected_page_button"))))),s):null:void 0},Nr=()=>{const[e,t]=(0,v.useState)(!1),r=mr(),{inventory:a}=r.stores;return(0,v.useEffect)((()=>{(async()=>{t(await a.isOwnInventory())})().catch((e=>r.logger.error(e)))}),[]),{isOwnInventory:e}},Tr=()=>{const e=document.getElementsByClassName("filter_ctn inventory_filters")[0];Mr(e,"block");const{filterContainer:t,actionsContainer:r,onInputChange:a,onToggleFilter:n}=Pr(e),[i,o]=(0,v.useState)(!1),{isOwnInventory:s}=Nr();return v.createElement(v.Fragment,null,t&&v.createElement(yr,{container:t,onChange:a,onToggleFilter:n,onToggleMultiSelect:o,isOwnInventory:s}),s&&r&&v.createElement(xr,{isMultiSelectItemsPage:i,toggleMultiSelectItemsPage:o,container:r}),i&&v.createElement(jr,{toggleMultiSelectItemsPage:o}))},Pr=e=>{const[t,r]=(0,v.useState)(null),[a,n]=(0,v.useState)(null),i=document.getElementById("filter_control");return(0,v.useEffect)((()=>{const t=document.createElement("div");e?.parentNode?.insertBefore(t,e.nextSibling),r(t);const a=document.createElement("div");return t.parentNode?.insertBefore(a,t.nextSibling),n(a),()=>{a.remove(),t.remove()}}),[]),{filterContainer:t,actionsContainer:a,onInputChange:e=>{i.value=e;const t=new KeyboardEvent("keyup",{key:"Enter"});i?.dispatchEvent(t)},onToggleFilter:()=>{const e=document.getElementById("filter_tag_show"),t=document.getElementById("filter_tag_hide");"none"!==e?.style.display?e?.click():t?.click()}}};var Ar,Lr;!function(e){e.FactoryNew="FN",e.MinimalWear="MW",e.FieldTested="FT",e.WellWorn="WW",e.BattleScarred="BS"}(Ar||(Ar={})),function(e){e.Base="Base",e.Consumer="Consumer",e.Industrial="Industrial",e.MilSpec="Mil-Spec",e.Restricted="Restricted",e.Classified="Classified",e.Covert="Covert",e.Contraband="Contraband",e.Extraordinary="Extraordinary"}(Lr||(Lr={}));const Br=e=>{const{float:t,isStatTrak:r}=e,a="isLoading"in t?void 0:t;let n=Math.max(0,Math.min(1,a?.paintwear??0));const i=Dr.map((({difRange:e})=>{const t=Math.min(e,n);return n-=t,t}));return v.createElement("div",{className:"rounded-md flex flex-col gap-0.5 p-1"},a&&v.createElement("div",{className:"flex gap-[2px] overflow-hidden font-inter text-sm text-neutral-100"},r&&v.createElement(v.Fragment,null,v.createElement("div",{className:"text-orange-300"},"ST")," / "),v.createElement("div",null,function(e){if(0>=e&&e<.07)return Ar.FactoryNew;if(e<.15)return Ar.MinimalWear;if(e<.38)return Ar.FieldTested;if(e<.45)return Ar.WellWorn;if(e<=1)return Ar.BattleScarred;throw Error("Invalid float")}(a.paintwear))," / ",v.createElement("div",{className:"min-w-0"},a.paintwear.toFixed(r?3:4))),v.createElement("div",{className:"relative flex h-1.5 w-full"},a&&Dr.map(((e,t)=>v.createElement("div",{key:`${t}-${e.difRange}`,className:"z-10 h-full w-full",style:{backgroundColor:e.color,width:`calc(${100*i[t]}%)`,...qr(t,a.paintwear)}}))),v.createElement("div",{className:"absolute flex h-1.5 w-full opacity-10"},Dr.map(((e,t)=>v.createElement("div",{key:`background-${t}-${e.difRange}`,className:(0,b.j)(a?"bg-white":"floatSkeleton",""),style:{width:`calc(${100*Dr[t].difRange}%)`,...qr(t)}}))))))},Dr=[{color:"rgba(29, 98, 111, 1)",difRange:.07},{color:"rgba(142, 175, 74, 1)",difRange:.08},{color:"rgba(255, 223, 69, 1)",difRange:.23},{color:"rgba(255, 143, 72, 1)",difRange:.17},{color:"rgba(243, 87, 62, 1)",difRange:.55}],qr=(e,t)=>({marginLeft:e>0?"2px":"0",borderTopLeftRadius:0===e?"5px":"0",borderBottomLeftRadius:0===e?"5px":"0",...!t||t>.9?{borderTopRightRadius:e===Dr.length-1?"5px":"0",borderBottomRightRadius:e===Dr.length-1?"5px":"0"}:{}}),Ur=e=>{const{float:t,timeToExchange:r,elem:a,itemGrade:n,type:i,isMultiSelectMode:o,isMultiSelected:s,isMarketable:c,isSelected:l}=e,d=r&&(r.remainDays>0?`${r.remainDays}${(0,x.t)("d")}`:`${r.remainHours}${(0,x.t)("h")}`);return a.setAttribute("style",""),(0,v.useEffect)((()=>(s||!o&&l?a.parentElement?.classList.add("selected"):o&&c&&a.parentElement?.classList.add("selectable"),()=>{a.parentElement?.classList.remove("selected"),a.parentElement?.classList.remove("selectable")})),[o,s,c,l]),(0,v.useEffect)((()=>{Object.values(Lr).forEach((e=>{n.includes(e)&&a.parentElement?.classList.add(e)}))}),[]),v.createElement(v.Fragment,null,v.createElement("div",{className:"pointer-events-none absolute left-0 right-0 top-0 z-20 mx-1 flex \n        h-5 flex-row items-center justify-between "},d?v.createElement("div",{className:"flex flex-1 items-center"},v.createElement(w.l,{iconClassName:"bg-lock"}),v.createElement("span",{className:"text-sm text-neutral-100"},d)):v.createElement("div",{className:"flex-1"}," "),t&&"extend"in t&&t.extend.phase&&v.createElement("span",{className:"text-sm text-neutral-100"},t.extend.phase.toString())),void 0!==t&&v.createElement("div",{className:"absolute bottom-0.5 left-0 w-full  text-sm "},v.createElement(Br,{float:t,isStatTrak:(m=i,m.includes("StatTrak"))})));var m},$r=()=>{const e=mr(),{inventory:t}=e.stores;return t.inventoryItems.value.map((e=>{const r=e.url&&t.getTradeableDateText(e.url),a=document.getElementById(e.id),n=a?.checkVisibility();return a&&n&&(0,vr.createPortal)(v.createElement(Ur,{elem:a,timeToExchange:r?at.extractTimeToExchange(r):void 0,float:e.floatInfo,itemGrade:e.baseInfo.type,isMultiSelectMode:t.isMultiSelectEnabled.value,isMultiSelected:e.isMultiSelected,isMarketable:1===e.baseInfo.marketable,type:e.baseInfo.type,isSelected:t.selectedItem.value?.id===e.id}),a)}))},Fr=e=>{const{quickSell:t,instantSell:r,marketHashName:a,phase:n,quickSellDisplayPrice:i,instantSellDisplayPrice:o,isOwnInventory:s}=e,c=i?`(${i})`:"",l=o?`(${o})`:"",d=(0,N.rs)({phase:n});return i&&v.createElement("div",{id:"right_panel_buttons"},v.createElement("div",{className:"flex gap-[10px] pb-[10px]"},v.createElement(y,{className:"flex min-h-[34px] items-center",href:`https://market.csgo.com/${encodeURI(a)}?${d.toString()}`},v.createElement(w.l,{iconClassName:"bg-market",className:"mr-[6px]"}),v.createElement("span",{className:"overflow-hidden whitespace-nowrap text-center font-inter text-sm"},(0,x.t)("to_item_market_page"))),s&&v.createElement(y,{className:"flex min-h-[34px] items-center ",onClick:t,type:"trade"},v.createElement(w.l,{iconClassName:"bg-steam",className:"mr-[6px]"}),v.createElement("span",{className:"overflow-hidden whitespace-nowrap text-center font-inter text-sm"},`${(0,x.t)("quick_sell_item_button")} ${c}`))),s&&v.createElement(y,{className:"mb-[10px] flex min-h-[34px] items-center !bg-steam-500",onClick:r,type:"trade"},v.createElement(w.l,{iconClassName:"bg-steam",className:"mr-[6px]"}),v.createElement("span",{className:"overflow-hidden whitespace-nowrap text-center font-inter text-sm"},`${(0,x.t)("instant_sell_item_button")} ${l}`)))},Wr=e=>{const{selectedItem:t,rootElement:r}=e,a=mr(),{stores:n,services:i}=a,{inventory:o}=n,{steamMarket:s}=i,[c,l]=(0,v.useState)({quickPrice:t.priceInfo?$(t.priceInfo.quickPrice,t.priceInfo.priceSymbol):void 0,instantPrice:t.priceInfo?$(t.priceInfo.instantPrice,t.priceInfo.priceSymbol):void 0}),d=(0,v.useMemo)((()=>r.getElementsByClassName("item_desc_description")[0]),[r]),m=(0,v.useCallback)((async()=>{if(1!==t.baseInfo.marketable)return;const e=t.priceInfo?t:await o.updateInventoryItemPrice(t.id,t.baseInfo.market_hash_name);if(!e||!e.priceInfo)return;const{priceInfo:{quickPrice:r,instantPrice:a,priceSymbol:n}}=e;l({quickPrice:$(r,n),instantPrice:$(a,n)})}),[o,t]);(0,v.useEffect)((()=>(m().catch((e=>{a.logger.error(e)})),()=>l({}))),[d,m,t]);const f=Rr(d,d.firstChild),{isOwnInventory:u}=Nr();return f?(0,vr.createPortal)(v.createElement(Fr,{isOwnInventory:u,quickSell:async()=>{const e=await s.sellItemWithPriceMode(t.assetInfo.assetid,t.baseInfo.market_hash_name,!1);e?.success&&o.removeItemFromInventory(t.id)},instantSell:async()=>{const e=await s.sellItemWithPriceMode(t.assetInfo.assetid,t.baseInfo.market_hash_name,!0);e?.success&&o.removeItemFromInventory(t.id)},quickSellDisplayPrice:c.quickPrice,instantSellDisplayPrice:c.instantPrice,marketHashName:t.baseInfo.market_hash_name,phase:t.floatInfo&&"extend"in t.floatInfo?t.floatInfo.extend.phase:void 0}),f):null},zr=()=>{const e=mr(),{inventory:t}=e.stores,r=(0,v.useRef)(t.inventoryItems.value.length),a=document.getElementById("iteminfo0"),n=document.getElementById("iteminfo1");(0,v.useEffect)((()=>{const e=0===r.current;t.inventoryItems.value.length&&(t.selectedItem.value=e?t.inventoryItems.value[0]:void 0),r.current=t.inventoryItems.value.length}),[a,t.inventoryItems.value.length]);const i=t.selectedItem.value;if(i)return v.createElement(v.Fragment,null,a&&v.createElement(Wr,{selectedItem:i,rootElement:a}),n&&v.createElement(Wr,{selectedItem:i,rootElement:n}))},Hr=()=>{const{stores:{extension:e}}=mr();if((e=>{const{stores:{extension:t}}=mr();(0,v.useEffect)((()=>{setTimeout((()=>{if(!t.isCs2InventoryEnabled.value)return;const e=document.getElementsByClassName("sih_status_button row on")[0];e&&e.click()}),4e3)}),[t.isCs2InventoryEnabled.value])})(),e.isCs2InventoryEnabled.value)return v.createElement(gr,null,v.createElement(Tr,null),v.createElement($r,null),v.createElement(zr,null))};var Yr=r(72);const Gr=e=>{const{title:t}=e,r=document.getElementsByClassName("profile_leftcol")[0].parentElement;if(!r)return;const a=document.createElement("div");return r.prepend(a),(0,vr.createPortal)(v.createElement("div",{className:"mb-2.5 text-lg text-white"},t),a)},Vr=e=>{const{avatarUrl:t,profileLevel:r,className:a,style:n}=e;return v.createElement("div",{className:(0,b.j)("relative h-10 w-10 flex-shrink-0 rounded bg-steam-900 ",a),style:n},void 0!==r&&v.createElement("div",{className:"absolute right-[-4px] top-[-4px] rounded-sm border-2\n              border-solid border-steam-800 bg-steam-700 px-1 \n              text-center text-sm text-white"},r),v.createElement("img",{height:40,width:40,className:"rounded-sm",src:t||k.mC}))},Zr=e=>{const{seconds:t,className:r,style:a,onTimeOut:n}=e,[i,o]=(0,v.useState)(t>0?t:0);return(0,v.useEffect)((()=>{const e=setInterval((()=>{if(i<=0)return clearInterval(e),void n?.();o((e=>e-1))}),1e3);return()=>{clearInterval(e)}}),[i,n]),v.createElement(y,{disabled:!0,className:(0,b.j)(r,"flex items-center justify-center gap-1 text-base"),type:0===i?"reject":void 0,style:a},v.createElement(w.l,{iconClassName:0===i?"bg-red-timer":"bg-timer",className:"shrink-0"}),v.createElement("div",{className:"flex-1"},(()=>{const e=Math.floor(i/60),t=i%60;return`${e<10?"0":""}${e}:${t<10?"0":""}${t}`})()))},Jr=(e,t)=>async()=>{e((e=>({...e,isBusy:!0}))),await(t?.()),e((e=>({...e,isBusy:!1})))},Xr=e=>{const{tradeOffer:t,onAccept:r,onReject:a}=e,{partnerId:n}=t,i=t.createdAt+300-at.unixNow(),[o,s]=(0,v.useState)({isTimeOut:!(i>0),isBusy:!1}),c=Jr(s,r),l=Jr(s,a),d=n.username?n.username:n.steamId;return v.createElement("div",{className:"m-0 mb-5 flex max-h-[70px] flex-row items-center \n      gap-2.5 rounded border-b-[1px] border-neutral-700 bg-steam-800 \n      p-[15px] font-sans text-lg text-white"},v.createElement(Vr,{avatarUrl:n.avatarUrl,profileLevel:n.level}),v.createElement("div",{className:"ml-1 flex min-w-0 flex-1 flex-shrink flex-col"},v.createElement("a",{href:n.profileUrl,target:"_blank",className:"min-w-0 truncate text-ellipsis text-white no-underline"},t.type===mt.Sell?v.createElement(v.Fragment,null,(0,x.t)("create_trade_offer_for")," ",d):v.createElement(v.Fragment,null,(0,x.t)("trade_offer_from")," ",d)),v.createElement("div",{className:"min-w-0 shrink-0 grow truncate text-ellipsis text-base text-neutral-400"},t.status===Je.RequiresApproval&&(o.isTimeOut?v.createElement("span",{className:"text-red-900"},(0,x.t)("response_time_has_expiried")):v.createElement(v.Fragment,null,(0,x.t)("trade_offer_received_from_market_and"),v.createElement("span",{className:"text-green-400"}," ",(0,x.t)("verified")))),t.status===Je.Completed&&v.createElement("span",{className:"text-green-400"},t.type===mt.Sell?(0,x.t)("confirm_trade_offer_in_app"):(0,x.t)("trade_offer_accepted")," "),t.status===Je.Error&&v.createElement("span",{className:"text-red-900"},(0,x.t)("unknown_error_occurred")),t.status===Je.Canceled&&v.createElement("span",{className:"text-red-900"},(0,x.t)("trade_offer_cancelled")))),t.status===Je.RequiresApproval&&!o.isTimeOut&&v.createElement(v.Fragment,null,v.createElement(y,{className:"flex items-center justify-center",onClick:c,disabled:o.isBusy,type:"accept"},v.createElement(w.l,{iconClassName:"bg-check"})),v.createElement(y,{className:"flex items-center justify-center",onClick:l,disabled:o.isBusy},v.createElement(w.l,{iconClassName:"bg-red-cross"}))),t.status===Je.RequiresApproval&&v.createElement(Zr,{seconds:i,onTimeOut:()=>s((e=>({...e,isTimeOut:!0})))}))},Qr=e=>{const{marketTradeOffer:t}=e,{tradeOfferId:r}=t,a=mr(),n=!!r,i=n?document.getElementById("tradeofferid_"+r):document.getElementsByClassName("profile_leftcol")[0];if(!i)return;if(i.classList.add("market-csgo"),n){const e=["tradeoffer_header","tradeoffer_partner","tradeoffer_message","tradeoffer_footer"];for(const t of e)i.getElementsByClassName(t)[0]?.remove()}const o=document.createElement("div");return i.classList.contains("sih_tradeoffer")?i?.insertAdjacentElement("beforebegin",o):i?.prepend(o),(0,vr.createPortal)(v.createElement(Xr,{tradeOffer:t,onAccept:async()=>{await a.stores.marketTradeOffers.resolve(t)},onReject:async()=>{await a.stores.marketTradeOffers.reject(t)}}),o)},Kr=()=>{const e=mr(),{marketTradeOffers:t}=e.stores,r=document.URL.includes("/tradeoffers/sent"),a=r?mt.Sell:mt.Buy,n=(0,D.vc)((()=>t.signal.value.filter((e=>e.type===a)).filter((e=>e.type!==mt.Sell||e.createdAt+600>at.unixNow())))),i=(0,D.vc)((()=>r&&n.value.filter((e=>e.createdAt+600>at.unixNow())).length>0));return v.createElement(v.Fragment,null,i.value&&v.createElement(Gr,{title:(0,x.t)("trade_offer_section_title_sent")}),n.value.map((e=>v.createElement(Qr,{key:e.id,marketTradeOffer:e}))))},ea=[{pattern:/^https:\/\/steamcommunity\.com\/.*\/.*\/tradeoffers(\/.*)?$/,component:v.createElement(Kr,null)},{pattern:/^https:\/\/steamcommunity\.com\/.*\/.*\/inventory(?:\/.*)?(?:#.*)?$/,component:v.createElement(Hr,null)}],ta=(0,v.createContext)({}),ra=e=>{const t=mr();if(t.stores.extension.isExtensionEnabled)return v.createElement(ta.Provider,{value:t},e.children)},aa=v.createElement(ra,null,v.createElement(fr,null),(()=>{if(!window)return;const e=window.location.href;for(const t of ea)if(t.pattern.test(e)){const e=t.component;return v.createElement(Yr.pG,{router:(0,Yr.cP)([{path:"/*",element:e}])})}})()),na=document.querySelector("body")?.firstElementChild,ia=document.createElement("div");na?.append(ia),(0,ur.s)(ia).render(aa)},2725:(e,t,r)=>{r.d(t,{Z:()=>Y});var a=r(6738),n=r.n(a),i=r(7705),o=r.n(i),s=r(6742),c=r.n(s),l=new URL(r(9639),r.b),d=new URL(r(5982),r.b),m=new URL(r(8681),r.b),f=new URL(r(3397),r.b),u=new URL(r(285),r.b),p=new URL(r(1798),r.b),g=new URL(r(5597),r.b),h=new URL(r(9100),r.b),b=new URL(r(2233),r.b),v=new URL(r(7461),r.b),y=new URL(r(8563),r.b),w=new URL(r(9881),r.b),x=new URL(r(4950),r.b),S=new URL(r(904),r.b),I=new URL(r(7015),r.b),k=new URL(r(3601),r.b),E=new URL(r(3488),r.b),C=new URL(r(25),r.b),_=o()(n());_.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap);"]);var O=c()(l),R=c()(d),M=c()(m),j=c()(f),N=c()(u),T=c()(p),P=c()(g),A=c()(h),L=c()(b),B=c()(v),D=c()(y),q=c()(w),U=c()(x),$=c()(S),F=c()(I),W=c()(k),z=c()(E),H=c()(C);_.push([e.id,`*,::before,::after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / 0.5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / 0.5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.\\!container{width:100% !important}.container{width:100%}@media(min-width: 640px){.\\!container{max-width:640px !important}.container{max-width:640px}}@media(min-width: 768px){.\\!container{max-width:768px !important}.container{max-width:768px}}@media(min-width: 1024px){.\\!container{max-width:1024px !important}.container{max-width:1024px}}@media(min-width: 1280px){.\\!container{max-width:1280px !important}.container{max-width:1280px}}@media(min-width: 1536px){.\\!container{max-width:1536px !important}.container{max-width:1536px}}.pointer-events-none{pointer-events:none}.visible{visibility:visible}.invisible{visibility:hidden}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0px}.-right-2{right:-0.5rem}.-top-2{top:-0.5rem}.bottom-0{bottom:0px}.bottom-0\\.5{bottom:.125rem}.bottom-5{bottom:1.25rem}.left-0{left:0px}.left-1\\/2{left:50%}.left-\\[17px\\]{left:17px}.left-\\[3px\\]{left:3px}.left-\\[50\\%\\]{left:50%}.right-0{right:0px}.right-\\[-4px\\]{right:-4px}.right-\\[-50px\\]{right:-50px}.top-0{top:0px}.top-1\\/2{top:50%}.top-\\[-4px\\]{top:-4px}.top-\\[50\\%\\]{top:50%}.z-10{z-index:10}.z-20{z-index:20}.z-\\[1000\\]{z-index:1000}.m-0{margin:0px}.m-2{margin:.5rem}.m-5{margin:1.25rem}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-5{margin-left:1.25rem;margin-right:1.25rem}.mb-2{margin-bottom:.5rem}.mb-2\\.5{margin-bottom:.625rem}.mb-4{margin-bottom:1rem}.mb-5{margin-bottom:1.25rem}.mb-\\[10px\\]{margin-bottom:10px}.ml-1{margin-left:.25rem}.ml-\\[14px\\]{margin-left:14px}.ml-auto{margin-left:auto}.mr-\\[17px\\]{margin-right:17px}.mr-\\[6px\\]{margin-right:6px}.mt-0{margin-top:0px}.mt-\\[10px\\]{margin-top:10px}.\\!block{display:block !important}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.hidden{display:none}.h-0{height:0px}.h-1{height:.25rem}.h-1\\.5{height:.375rem}.h-10{height:2.5rem}.h-11{height:2.75rem}.h-3{height:.75rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-\\[12px\\]{height:12px}.h-\\[15px\\]{height:15px}.h-\\[18px\\]{height:18px}.h-\\[21px\\]{height:21px}.h-\\[24px\\]{height:24px}.h-\\[26px\\]{height:26px}.h-\\[30px\\]{height:30px}.h-\\[44px\\]{height:44px}.h-\\[46px\\]{height:46px}.h-\\[50px\\]{height:50px}.h-\\[84px\\]{height:84px}.h-full{height:100%}.h-min{height:-moz-min-content;height:min-content}.h-screen{height:100vh}.max-h-\\[50px\\]{max-height:50px}.max-h-\\[70px\\]{max-height:70px}.\\!min-h-\\[34px\\]{min-height:34px !important}.min-h-0{min-height:0px}.min-h-10{min-height:2.5rem}.min-h-\\[34px\\]{min-height:34px}.min-h-\\[450px\\]{min-height:450px}.min-h-\\[520px\\]{min-height:520px}.w-10{width:2.5rem}.w-3{width:.75rem}.w-5{width:1.25rem}.w-\\[117px\\]{width:117px}.w-\\[18px\\]{width:18px}.w-\\[26px\\]{width:26px}.w-\\[38px\\]{width:38px}.w-\\[460px\\]{width:460px}.w-\\[46px\\]{width:46px}.w-\\[480px\\]{width:480px}.w-\\[49px\\]{width:49px}.w-\\[50px\\]{width:50px}.w-\\[80px\\]{width:80px}.w-full{width:100%}.w-min{width:-moz-min-content;width:min-content}.w-screen{width:100vw}.\\!min-w-\\[34px\\]{min-width:34px !important}.min-w-0{min-width:0px}.min-w-10{min-width:2.5rem}.min-w-4{min-width:1rem}.max-w-56{max-width:14rem}.max-w-\\[200px\\]{max-width:200px}.max-w-\\[400px\\]{max-width:400px}.flex-1{flex:1 1 0%}.flex-shrink{flex-shrink:1}.flex-shrink-0{flex-shrink:0}.shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.\\!grow-0{flex-grow:0 !important}.grow{flex-grow:1}.border-spacing-y-\\[8px\\]{--tw-border-spacing-y: 8px;border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y)}.-translate-x-1\\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-\\[-50\\%\\]{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-\\[-50\\%\\]{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-default{cursor:default}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.content-center{align-content:center}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.justify-stretch{justify-content:stretch}.gap-0{gap:0px}.gap-0\\.5{gap:.125rem}.gap-1{gap:.25rem}.gap-10{gap:2.5rem}.gap-2{gap:.5rem}.gap-2\\.5{gap:.625rem}.gap-20{gap:5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-5{gap:1.25rem}.gap-\\[10px\\]{gap:10px}.gap-\\[18px\\]{gap:18px}.gap-\\[2px\\]{gap:2px}.gap-\\[6px\\]{gap:6px}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.text-ellipsis{text-overflow:ellipsis}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:12px}.rounded-\\[5px\\]{border-radius:5px}.rounded-full{border-radius:9999px}.rounded-sm{border-radius:5px}.rounded-l{border-top-left-radius:12px;border-bottom-left-radius:12px}.\\!border{border-width:1px !important}.border{border-width:1px}.border-0{border-width:0px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-\\[1px\\]{border-bottom-width:1px}.border-l{border-left-width:1px}.border-t-\\[1px\\]{border-top-width:1px}.\\!border-solid{border-style:solid !important}.border-solid{border-style:solid}.border-none{border-style:none}.\\!border-steam-400{--tw-border-opacity: 1 !important;border-color:rgb(63 66 71/var(--tw-border-opacity)) !important}.border-neutral-700{--tw-border-opacity: 1;border-color:rgb(50 53 57/var(--tw-border-opacity))}.border-neutral-800{--tw-border-opacity: 1;border-color:rgb(42 44 49/var(--tw-border-opacity))}.border-neutral-900{--tw-border-opacity: 1;border-color:rgb(34 36 41/var(--tw-border-opacity))}.border-red-500{--tw-border-opacity: 1;border-color:rgb(239 68 68/var(--tw-border-opacity))}.border-steam-400{--tw-border-opacity: 1;border-color:rgb(63 66 71/var(--tw-border-opacity))}.border-steam-600{--tw-border-opacity: 1;border-color:rgb(41 44 47/var(--tw-border-opacity))}.border-steam-800{--tw-border-opacity: 1;border-color:rgb(50 50 52/var(--tw-border-opacity))}.\\!bg-steam-500{--tw-bg-opacity: 1 !important;background-color:rgb(24 136 184/var(--tw-bg-opacity)) !important}.\\!bg-transparent{background-color:rgba(0,0,0,0) !important}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(152 184 24/var(--tw-bg-opacity))}.bg-green-200{--tw-bg-opacity: 1;background-color:rgb(49 55 27/var(--tw-bg-opacity))}.bg-green-400{--tw-bg-opacity: 1;background-color:rgb(148 177 29/var(--tw-bg-opacity))}.bg-neutral-700{--tw-bg-opacity: 1;background-color:rgb(50 53 57/var(--tw-bg-opacity))}.bg-neutral-800{--tw-bg-opacity: 1;background-color:rgb(42 44 49/var(--tw-bg-opacity))}.bg-neutral-900{--tw-bg-opacity: 1;background-color:rgb(34 36 41/var(--tw-bg-opacity))}.bg-orange-400{--tw-bg-opacity: 1;background-color:rgb(242 76 5/var(--tw-bg-opacity))}.bg-red-200{--tw-bg-opacity: 1;background-color:rgb(55 31 33/var(--tw-bg-opacity))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.bg-slate-900{--tw-bg-opacity: 1;background-color:rgb(34 36 41/var(--tw-bg-opacity))}.bg-steam-600{--tw-bg-opacity: 1;background-color:rgb(41 44 47/var(--tw-bg-opacity))}.bg-steam-700{--tw-bg-opacity: 1;background-color:rgb(63 63 65/var(--tw-bg-opacity))}.bg-steam-800{--tw-bg-opacity: 1;background-color:rgb(50 50 52/var(--tw-bg-opacity))}.bg-steam-900{--tw-bg-opacity: 1;background-color:rgb(38 38 39/var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.bg-arrow-left{background-image:url(${O})}.bg-chain{background-image:url(${R})}.bg-check{background-image:url(${M})}.bg-cross{background-image:url(${j})}.bg-filter{background-image:url(${N})}.bg-lock{background-image:url(${T})}.bg-market{background-image:url(${P})}.bg-pencil{background-image:url(${A})}.bg-plus{background-image:url(${L})}.bg-red-cross{background-image:url(${B})}.bg-red-timer{background-image:url(${D})}.bg-round-check{background-image:url(${q})}.bg-round-cross{background-image:url(${U})}.bg-settings{background-image:url(${$})}.bg-steam{background-image:url(${F})}.bg-timer{background-image:url(${W})}.bg-trades{background-image:url(${z})}.bg-trash{background-image:url(${H})}.bg-center{background-position:center}.bg-no-repeat{background-repeat:no-repeat}.\\!p-0{padding:0px !important}.p-1{padding:.25rem}.p-10{padding:2.5rem}.p-2{padding:.5rem}.p-20{padding:5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-8{padding:2rem}.p-\\[15px\\]{padding:15px}.p-\\[20px\\]{padding:20px}.p-\\[3px\\]{padding:3px}.px-1{padding-left:.25rem;padding-right:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-\\[16px\\]{padding-left:16px;padding-right:16px}.px-\\[18px\\]{padding-left:18px;padding-right:18px}.px-\\[5\\.5px\\]{padding-left:5.5px;padding-right:5.5px}.px-\\[8\\.5px\\]{padding-left:8.5px;padding-right:8.5px}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-2\\.5{padding-top:.625rem;padding-bottom:.625rem}.py-\\[14px\\]{padding-top:14px;padding-bottom:14px}.py-\\[1px\\]{padding-top:1px;padding-bottom:1px}.py-\\[6px\\]{padding-top:6px;padding-bottom:6px}.pb-\\[10px\\]{padding-bottom:10px}.pl-2{padding-left:.5rem}.pl-2\\.5{padding-left:.625rem}.pl-4{padding-left:1rem}.pl-\\[20px\\]{padding-left:20px}.pr-2{padding-right:.5rem}.pt-\\[200px\\]{padding-top:200px}.text-center{text-align:center}.align-middle{vertical-align:middle}.font-inter{font-family:Inter}.font-sans{font-family:Inter Variable,ui-sans-serif,system-ui}.text-base{font-size:14px;line-height:20px}.text-lg{font-size:16px;line-height:24px}.text-sm{font-size:12px;line-height:14.52px}.text-xl{font-size:18px;line-height:normal}.\\!font-medium{font-weight:500 !important}.font-medium{font-weight:500}.\\!text-white{--tw-text-opacity: 1 !important;color:rgb(255 255 255/var(--tw-text-opacity)) !important}.text-green-400{--tw-text-opacity: 1;color:rgb(148 177 29/var(--tw-text-opacity))}.text-green-900{--tw-text-opacity: 1;color:rgb(20 83 45/var(--tw-text-opacity))}.text-grey-400{--tw-text-opacity: 1;color:rgb(153 153 161/var(--tw-text-opacity))}.text-neutral-100{--tw-text-opacity: 1;color:rgb(173 174 175/var(--tw-text-opacity))}.text-neutral-200{--tw-text-opacity: 1;color:rgb(255 255 255/var(--tw-text-opacity))}.text-neutral-400{--tw-text-opacity: 1;color:rgb(102 104 109/var(--tw-text-opacity))}.text-neutral-500{--tw-text-opacity: 1;color:rgb(115 115 115/var(--tw-text-opacity))}.text-orange-300{--tw-text-opacity: 1;color:rgb(255 92 0/var(--tw-text-opacity))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113/var(--tw-text-opacity))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68/var(--tw-text-opacity))}.text-red-900{--tw-text-opacity: 1;color:rgb(228 65 65/var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255/var(--tw-text-opacity))}.text-opacity-50{--tw-text-opacity: 0.5}.underline{text-decoration-line:underline}.no-underline{text-decoration-line:none}.placeholder-opacity-60::-moz-placeholder{--tw-placeholder-opacity: 0.6}.placeholder-opacity-60::placeholder{--tw-placeholder-opacity: 0.6}.opacity-0{opacity:0}.opacity-10{opacity:.1}.opacity-100{opacity:1}.opacity-20{opacity:.2}.opacity-50{opacity:.5}.outline-none{outline:2px solid rgba(0,0,0,0);outline-offset:2px}.blur-0{--tw-blur: blur(0);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.delay-500{transition-delay:500ms}.duration-300{transition-duration:300ms}.duration-500{transition-duration:500ms}.ease-in-out{transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.arrow-hide::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.arrow-hide::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.arrow-hide{-moz-appearance:textfield}.hider{position:absolute;z-index:-10}.placeholder-normal::-moz-placeholder{font-style:normal}.placeholder-normal::placeholder{font-style:normal}.tradeoffer_header{margin-bottom:15px}.tradeoffer.market-csgo>a.btn_report{margin-top:unset;transform:translateY(10px) translateX(-10px);z-index:10;position:relative}.tradeoffer_items{clear:unset !important}#filter_options{margin-left:0 !important}[id*="730_2"]:has(.inventory_page) .itemHolder{border-radius:6px;background:#292929}[id*="730_2"]:has(.inventory_page) .itemHolder:not(.disabled):hover{filter:brightness(1.2)}[id*="730_2"]:has(.inventory_page) .itemHolder .item{border-radius:6px;width:100%;height:100%;background-color:unset !important;border-color:rgba(0,0,0,0) !important}[id*="730_2"]:has(.inventory_page) .itemHolder .item:hover{background-image:unset !important}[id*="730_2"]:has(.inventory_page) .itemHolder .activeInfo{background-image:unset !important;filter:brightness(1.2)}[id*="730_2"]:has(.inventory_page) .itemHolder.selectable .item{border:1px dashed rgba(255,255,255,.15) !important}[id*="730_2"]:has(.inventory_page) .itemHolder.selected .activeInfo{border-color:unset !important}[id*="730_2"]:has(.inventory_page) .itemHolder.selected .item{border-style:solid !important;border-color:#94b11d !important}[id*="730_2"]:has(.inventory_page) .itemHolder.Consumer{background:linear-gradient(180deg, rgb(24, 26, 30) 0%, rgb(44, 47, 53) 100%)}[id*="730_2"]:has(.inventory_page) .itemHolder.Industrial{background:linear-gradient(180deg, rgb(24, 26, 30) 0%, rgb(23, 41, 83) 100%)}[id*="730_2"]:has(.inventory_page) .itemHolder.Mil-Spec{background:linear-gradient(180deg, rgb(24, 26, 30) 0%, rgb(19, 37, 53) 100%)}[id*="730_2"]:has(.inventory_page) .itemHolder.Restricted{background:linear-gradient(180deg, rgb(24, 26, 30) 0%, rgb(47, 30, 83) 100%)}[id*="730_2"]:has(.inventory_page) .itemHolder.Classified{background:linear-gradient(180deg, rgb(24, 26, 30) 0%, rgb(79, 30, 83) 100%)}[id*="730_2"]:has(.inventory_page) .itemHolder.Covert{background:linear-gradient(180deg, rgb(24, 26, 30) 0%, rgb(67, 25, 19) 100%)}[id*="730_2"]:has(.inventory_page) .itemHolder.Contraband{background:linear-gradient(180deg, rgb(24, 26, 30) 0%, rgb(58, 54, 28) 100%)}[id*="730_2"]:has(.inventory_page) .itemHolder.disabled{border-radius:6px;background-image:unset !important;background:#292929;opacity:.5}.floatSkeleton{background-color:rgba(255,255,255,.5);position:relative;overflow:hidden}.floatSkeleton::after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translateX(-100%);background-image:linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.5) 20%, white 60%, rgba(255, 255, 255, 0));animation:shimmer 1s infinite;content:""}@keyframes shimmer{100%{transform:translateX(100%)}}#inventories{border-radius:10px;background-color:#141517;border-color:rgba(0,0,0,0)}#iteminfo1,#iteminfo0{border-color:rgba(0,0,0,0);outline:7px solid #141517;border-width:0px;margin:7px;border-radius:4px;overflow:hidden}#iteminfo1>.div,#iteminfo0>.div{background-color:#141517 !important;border-radius:10px}#iteminfo1_content,#iteminfo0_content{background-image:unset}.item_desc_icon_center{display:flex;flex-direction:row;align-items:center;justify-content:space-around}.newmodal.economy_modal_ctn{background:none}.newmodal_background{position:fixed !important}.inventory_page{flex-wrap:wrap}.first\\:rounded-t:first-child{border-top-left-radius:12px;border-top-right-radius:12px}.last\\:mb-5:last-child{margin-bottom:1.25rem}.last\\:rounded-b:last-child{border-bottom-right-radius:12px;border-bottom-left-radius:12px}.last\\:border-0:last-child{border-width:0px}.hover\\:cursor-pointer:hover{cursor:pointer}.hover\\:bg-neutral-700:hover{--tw-bg-opacity: 1;background-color:rgb(50 53 57/var(--tw-bg-opacity))}.hover\\:text-neutral-300:hover{--tw-text-opacity: 1;color:rgb(255 255 255/var(--tw-text-opacity))}.hover\\:brightness-125:hover{--tw-brightness: brightness(1.25);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.focus-visible\\:border-green-400:focus-visible{--tw-border-opacity: 1;border-color:rgb(148 177 29/var(--tw-border-opacity))}.focus-visible\\:outline-none:focus-visible{outline:2px solid rgba(0,0,0,0);outline-offset:2px}.active\\:bg-neutral-600:active{--tw-bg-opacity: 1;background-color:rgb(53 55 61/var(--tw-bg-opacity))}.active\\:text-white:active{--tw-text-opacity: 1;color:rgb(255 255 255/var(--tw-text-opacity))}.active\\:brightness-150:active{--tw-brightness: brightness(1.5);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.group:hover .group-hover\\:opacity-100{opacity:1}.\\[\\&\\>\\*\\]\\:border-b-\\[1px\\]>*{border-bottom-width:1px}.\\[\\&\\>\\*\\]\\:border-neutral-700>*{--tw-border-opacity: 1;border-color:rgb(50 53 57/var(--tw-border-opacity))}.\\[\\&\\>\\*\\]\\:bg-neutral-800>*{--tw-bg-opacity: 1;background-color:rgb(42 44 49/var(--tw-bg-opacity))}.\\[\\&\\>\\*\\]\\:p-4>*{padding:1rem}.first\\:\\[\\&\\>\\*\\]\\:rounded-t>*:first-child{border-top-left-radius:12px;border-top-right-radius:12px}.last\\:\\[\\&\\>\\*\\]\\:rounded-b>*:last-child{border-bottom-right-radius:12px;border-bottom-left-radius:12px}.last\\:\\[\\&\\>\\*\\]\\:border-0>*:last-child{border-width:0px}`,""]);const Y=_}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={id:e,exports:{}};return a[e].call(r.exports,r,r.exports,i),r.exports}i.m=a,e=[],i.O=(t,r,a,n)=>{if(!r){var o=1/0;for(d=0;d<e.length;d++){for(var[r,a,n]=e[d],s=!0,c=0;c<r.length;c++)(!1&n||o>=n)&&Object.keys(i.O).every((e=>i.O[e](r[c])))?r.splice(c--,1):(s=!1,n<o&&(o=n));if(s){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[r,a,n]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,a){if(1&a&&(e=this(e)),8&a)return e;if("object"==typeof e&&e){if(4&a&&e.__esModule)return e;if(16&a&&"function"==typeof e.then)return e}var n=Object.create(null);i.r(n);var o={};t=t||[null,r({}),r([]),r(r)];for(var s=2&a&&e;"object"==typeof s&&!~t.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,i.d(n,o),n},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.j=655,(()=>{i.b=document.baseURI||self.location.href;var e={655:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var a,n,[o,s,c]=r,l=0;if(o.some((t=>0!==e[t]))){for(a in s)i.o(s,a)&&(i.m[a]=s[a]);if(c)var d=c(i)}for(t&&t(r);l<o.length;l++)n=o[l],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(d)},r=self.webpackChunkmarket_app_extension=self.webpackChunkmarket_app_extension||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),i.nc=void 0;var o=i.O(void 0,[736],(()=>i(8804)));o=i.O(o)})();