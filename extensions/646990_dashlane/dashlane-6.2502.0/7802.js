"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[7802],{75239:(e,t,n)=>{n.d(t,{C:()=>d});var a=n(96832),i=n(48038),r=n(5465),s=n(64997),o=n(65454),l=n(3843);const c=e=>!(!e?.exp_year||!e?.exp_month)&&(0,l.Z)(new Date(e.exp_year,e.exp_month,0)),d=({b2c:e,handleCardUpdate:t,pollInterval:n=3e3,timeoutAmount:l=6e5})=>{const[d,_]=(0,a.useState)(!1),[u,m]=(0,a.useState)({}),[p,g]=(0,a.useState)(),h=(0,s.Z)(),y=h.status!==i.rq.Success||!h.data,b=h?.status===i.rq.Success&&h.data?h.data[e?"b2cSubscription":"b2bSubscription"]?.billingInformation:void 0,x=b?.last4?Number(b.last4).toLocaleString("en-US",{minimumIntegerDigits:4,useGrouping:!1}):void 0,S=b?.type?(0,o.v)(b.type):void 0,f=b?.exp_year,v=b?.exp_month,C=f&&v?`${v}/${f.toString().substring(2)}`:"",E=(0,a.useCallback)((()=>{d&&_(!1),p&&clearTimeout(p)}),[d,p]);return(0,a.useEffect)((()=>E),[]),(0,a.useEffect)((()=>{if(d){const e=setInterval((()=>{r.C.refreshSubscriptionInformation()}),n);if(!p){const e=window.setTimeout(E,l);g(e)}return()=>clearInterval(e)}}),[n,d,E,l,p]),(0,a.useEffect)((()=>{if(d&&u){const e=u.last4DigitsFormatted!==x||u.expFormatted!==C;if(e&&(E(),t)){const n=!u.last4DigitsFormatted;t(e,n)}}}),[d,x,C,u,u.expFormatted,u.last4DigitsFormatted,E,t]),{loading:y,billingInformation:b,hasCreditCardPaymentMethod:!!b?.last4,last4Digits:b?.last4,last4DigitsFormatted:x,cardSvg:S,isExpired:c(b),expYear:b?.exp_year,expMonth:b?.exp_month,expFormatted:C,pollUntilCardUpdate:()=>{_(!0),m({last4DigitsFormatted:x,expFormatted:C})}}}},37466:(e,t,n)=>{n.d(t,{a:()=>s});var a=n(61468),i=n(11538),r=n(68593);const s=({scopedToPage:e=!1})=>(0,r.tZ)(a.kC,{justifyContent:"center",alignItems:"center",sx:{backgroundColor:"rgba(245, 247, 247, 0.7)",...e?{}:{position:"absolute",top:0,left:0,right:0,height:"100%"}},children:(0,r.tZ)(i.Z,{containerStyle:{marginTop:"-90px",...e?{position:"relative",height:"90vh"}:{}}})})},78060:(e,t,n)=>{n.d(t,{m:()=>s});var a=n(24507),i=n(51031),r=n(56018);const s=()=>{const{data:e,status:t}=(0,a.k)(r.o,"isTeamCreator");return t===i.rq.Loading?{status:t}:t===i.rq.Error?{status:i.rq.Success,isTeamCreator:!1}:null===e?{status:i.rq.Loading}:{status:t,isTeamCreator:e}}},28207:(e,t,n)=>{n.d(t,{u:()=>s});var a=n(24507),i=n(51031),r=n(56018);const s=()=>{const{data:e,status:t}=(0,a.k)(r.o,"getTeamCreationDateUnix");return t!==i.rq.Success?{status:t}:null===e?{status:i.rq.Loading}:{status:t,teamCreationDate:e}}},5822:(e,t,n)=>{n.d(t,{V:()=>s});var a=n(24507),i=n(51031),r=n(56018);const s=()=>{const{data:e,status:t}=(0,a.k)(r.o,"getTeamId");return t!==i.rq.Success?{status:t}:{status:t,teamId:null===e.teamId?null:Number(e.teamId)}}},3090:(e,t,n)=>{n.d(t,{e:()=>a});const a=({refusedMembers:e={}}={})=>Object.keys(e).length>0},31626:(e,t,n)=>{n.d(t,{c:()=>Z});var a=n(96832),i=n(61468),r=n(48062),s=n(88203),o=n(68691),l=n(45272),c=n(92077),d=n(6135),_=n(68593);const u={CONTAINER:{display:"flex",padding:"16px 8px",justifyContent:"space-between",alignItems:"center"},ITEM:{display:"flex",gap:"16px",alignItems:"flex-start"}},m=({title:e,description:t,iconName:n,button:a})=>{const{content:r,onClick:s,isUpgradeButton:o,isRoleLink:l}=a;return(0,_.BX)("div",{sx:u.CONTAINER,children:[(0,_.BX)("div",{sx:u.ITEM,children:[(0,_.tZ)(i.vY,{name:n,size:"small",mood:"brand"}),(0,_.BX)("div",{sx:{gap:" 4px",maxWidth:"320px"},children:[(0,_.tZ)(i.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.catchy",children:e}),(0,_.tZ)(i.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:t})]})]}),(0,_.tZ)(i.zx,{mood:o?"brand":"neutral",intensity:"quiet",icon:o?"PremiumOutlined":void 0,layout:o?"iconLeading":void 0,role:l?"link":void 0,onClick:s,size:"small",children:r})]})};var p=n(96765),g=n(61605),h=n(19471);let y=function(e){return e.SECURITY_GUIDANCE="security_guidance",e.TRAINING="training",e.SEND_MESSAGE="send_message",e}({});const b={[y.SECURITY_GUIDANCE]:h.mA,[y.TRAINING]:h.J0,[y.SEND_MESSAGE]:h.hc},x={[y.SECURITY_GUIDANCE]:r.CallToAction.RequestDemo,[y.TRAINING]:r.CallToAction.RegisterWebinar,[y.SEND_MESSAGE]:r.CallToAction.SendEmail},S=(e,t)=>{const n=[r.CallToAction.SendEmail,r.CallToAction.RequestDemo,r.CallToAction.RegisterWebinar,r.CallToAction.Dismiss];n.push(t?r.CallToAction.ContactPhoneSupport:r.CallToAction.RequestUpgrade),(0,l.Kz)(new r.UserCallToActionEvent({callToActionList:n,chosenAction:x[e],hasChosenNoAction:!1})),(0,g.Yo)(b[e])};var f,v,C,E;const Z=({onDismiss:e})=>{var t;const{translate:n}=(0,s.Z)(),{routes:u}=(0,c.Xo)(),b=(0,o.C)(),x=(0,d.S)(),Z=(0,c.k6)(),D=null===x||null===b,T=null!=(t=x?.phoneSupport.enabled)&&t;return(0,a.useEffect)((()=>{(0,l.Nc)(r.PageView.TacModalContactSupport)}),[]),(0,_.tZ)(i.Vq,{isOpen:!0,onClose:()=>((e,t)=>{const n=[r.CallToAction.SendEmail,r.CallToAction.RequestDemo,r.CallToAction.RegisterWebinar,r.CallToAction.Dismiss];n.push(t?r.CallToAction.ContactPhoneSupport:r.CallToAction.RequestUpgrade),(0,l.Kz)(new r.UserCallToActionEvent({callToActionList:n,hasChosenNoAction:!0})),e()})(e,T),closeActionLabel:n("_common_dialog_dismiss_button"),title:n("team_contact_support_dialog_title"),children:D?(0,_.tZ)(i.nv,{sx:{textAlign:"center"},children:f||(f=(0,_.tZ)(i.ZX,{size:44}))}):(0,_.BX)(_.HY,{children:[(0,_.tZ)(i.nv,{sx:{marginBottom:"16px"},children:n("team_contact_support_dialog_text")}),(0,_.BX)("div",{sx:{gap:"8px"},children:[(0,_.tZ)(m,{title:n("team_contact_support_phone_support_title"),description:n("team_contact_support_phone_support_subtitle"),iconName:"ItemPhoneHomeOutlined",button:{content:n(T?"team_contact_support_request_call":"team_contact_support_upgrade_to_business_cta"),onClick:()=>((e,t,n,a,i)=>{const s=[r.CallToAction.SendEmail,r.CallToAction.RequestDemo,r.CallToAction.RegisterWebinar,r.CallToAction.Dismiss];return e?(s.push(r.CallToAction.ContactPhoneSupport),(0,l.Kz)(new r.UserCallToActionEvent({callToActionList:s,chosenAction:r.CallToAction.ContactPhoneSupport,hasChosenNoAction:!1})),(0,g.Yo)(h.$b)):e||!a&&!i?(s.push(r.CallToAction.RequestUpgrade),(0,l.Kz)(new r.UserCallToActionEvent({callToActionList:s,chosenAction:r.CallToAction.RequestUpgrade,hasChosenNoAction:!1})),t.push(`${n.teamAccountChangePlanRoutePath}?plan=business`)):(s.push(r.CallToAction.RequestUpgrade),(0,l.Kz)(new r.UserCallToActionEvent({callToActionList:s,chosenAction:r.CallToAction.RequestUpgrade,hasChosenNoAction:!1})),t.push(n.teamAccountCheckoutRoutePath))})(T,Z,u,b?.isFreeTrial,b?.isGracePeriod),isUpgradeButton:!T,isRoleLink:T||b?.isFreeTrial||b?.isGracePeriod}}),v||(v=(0,_.tZ)(p.E,{})),(0,_.tZ)(m,{title:n("team_contact_support_security_guidance_title"),description:n("team_contact_support_security_guidance_subtitle"),iconName:"ProtectionOutlined",button:{content:n("team_contact_support_request_demo"),onClick:()=>S(y.SECURITY_GUIDANCE,T),isRoleLink:!0}}),C||(C=(0,_.tZ)(p.E,{})),(0,_.tZ)(m,{title:n("team_contact_support_training_title"),description:n("team_contact_support_training_subtitle"),iconName:"AccountSettingsOutlined",button:{content:n("team_contact_support_register_for_webinar"),onClick:()=>S(y.TRAINING,T),isRoleLink:!0}}),E||(E=(0,_.tZ)(p.E,{})),(0,_.tZ)(m,{title:n("team_contact_support_help_customer_support_title"),description:n("team_contact_support_help_customer_support_subtitle"),iconName:"ItemEmailOutlined",button:{content:n("team_contact_support_send_message"),onClick:()=>S(y.SEND_MESSAGE,T),isRoleLink:!0}})]})]})})}},96765:(e,t,n)=>{n.d(t,{E:()=>i});var a=n(68593);const i=()=>(0,a.tZ)("hr",{sx:{border:"0",borderTop:"1px solid ds.border.neutral.quiet.idle",height:"1px",width:"100%",mt:"8px",mb:"8px"}})},26391:(e,t,n)=>{n.d(t,{Z:()=>JE,n:()=>QE});var a=n(59522),i=n(92077),r=n(96832),s=n(48038),o=n(61468),l=n(48062),c=n(24507),d=n(56018),_=n(45836),u=n(27144),m=n(45272),p=n(88203),g=n(75239);const h={borderStyle:"solid",borderColor:"ds.border.neutral.quiet.idle",borderWidth:"1px",borderRadius:"8px",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"32px"},y={borderStyle:"solid",borderColor:"ds.border.neutral.quiet.idle",borderWidth:"1px",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"24px",borderRadius:"8px"},b={padding:"10px 8px",width:"40px",height:"40px",borderRadius:"8px",backgroundColor:"ds.container.expressive.brand.quiet.idle"};var x,S=n(68593);const f=()=>{const{translate:e}=(0,p.Z)(),{loading:t,last4DigitsFormatted:n,expFormatted:a,cardSvg:i}=(0,g.C)({});return t?x||(x=(0,S.tZ)(o.ZX,{})):(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:y,children:[(0,S.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_credit_card_header")}),(0,S.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,S.BX)(o.kC,{alignItems:"center",gap:"8px",children:[i,(0,S.BX)(o.nv,{color:"ds.text.neutral.standard",children:["•••• ",n]})]}),(0,S.tZ)(o.kC,{children:(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",children:e("team_account_addseats_success_credit_card_expires",{expirationDate:a})})})]})]})};var v;const C=()=>{const{translate:e}=(0,p.Z)(),{routes:t}=(0,i.Xo)(),n=(0,i.k6)();return(0,S.tZ)("div",{children:(0,S.tZ)(o.zx,{mood:"neutral",intensity:"supershy",onClick:()=>{n.length>1?n.goBack():(0,i.uX)(t.teamAccountRoutePath)},children:(0,S.BX)(o.kC,{alignItems:"center",children:[v||(v=(0,S.tZ)(o.JO,{size:"medium",name:"ArrowLeftOutlined"})),(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.title.block.medium",sx:{marginLeft:"14px"},children:e("_common_action_back")})]})})})};var E=n(64997);const Z=()=>{const e=(0,E.Z)(),t=e.status!==s.rq.Success||!e.data,n=e?.status===s.rq.Success?e?.data?.b2bSubscription?.billingInformation:null,a=n?.country;return{loading:t,billingCountry:a}};var D=n(39378),T=n(38452),k=n(18854),I=n(77063);const A={alignItems:"center",backgroundColor:"ds.background.alternate",borderBottom:"1px solid ds.border.neutral.quiet.idle",display:"flex",height:"80px",justifyContent:"flex-end",padding:"0 48px"},w=({children:e})=>(0,S.tZ)("header",{sx:A,children:e}),N={LAYOUT_CONTAINER:{display:"flex",flexDirection:"column",overflowY:"hidden"},MAIN_AREA:{display:"flex",backgroundColor:"ds.background.alternate",height:" 100vh",position:"relative",overflowY:"hidden",width:"100vw"},CONTENT:{width:"100%",overflowY:"auto"},SIDE_NAV:{backgroundColor:"ds.container.agnostic.inverse.standard",nav:{backgroundColor:"ds.container.agnostic.inverse.standard"}}},O=e=>{const{brand:t,children:n,header:a,sideNav:i,banner:r,dialog:s,bottomButton:o}=e;return(0,S.tZ)("div",{sx:N.LAYOUT_CONTAINER,children:(0,S.BX)("div",{sx:N.MAIN_AREA,children:[(0,S.BX)("div",{sx:N.SIDE_NAV,children:[(0,S.tZ)("div",{children:t}),(0,S.tZ)("div",{style:{height:"calc(100% - 160px)",overflow:"auto"},children:i}),(0,S.tZ)("div",{style:{height:"80px"},children:o})]}),(0,S.BX)("div",{sx:N.CONTENT,children:[r?(0,S.tZ)("div",{children:r}):null,(0,S.tZ)("div",{children:a}),(0,S.tZ)("main",{children:n})]}),s?(0,S.BX)("div",{children:[s," "]}):null]})})};var R=n(77270),L=n(51031),M=n(7508),B=n(97607),P=n(61605),U=n(36487),X=n(68691),z=n(69898),q=n(8180),j=n(78346);const F=r.createContext(null),G="NETWORK ERROR",V=({globalReportError:e,children:t})=>{const[n,a]=r.useState([]),{translate:i}=(0,p.Z)(),s=e=>{n.find((t=>t.title===e.title&&t.message===e.message))||a((t=>[...t,e]))};return(0,S.tZ)(F.Provider,{value:{queue:n,addAlertToQueue:s,popAlertFromQueue:()=>{a((e=>e.slice(1)))},reportTACError:(t,n)=>{t.message.toUpperCase()===G&&s({title:i("_common_alert_network_error_title"),message:i("_common_alert_network_error_message")}),e(t,n)}},children:t})},H=()=>{const e=r.useContext(F);if(!e)throw new Error("useAlertQueue must be called from within an AlertQueueProvider");return e},W=({onDismiss:e,onFeedbackSent:t})=>{const[n,a]=(0,r.useState)(!0),[i,s]=(0,r.useState)(!1),[c,_]=(0,r.useState)(!1),{translate:u}=(0,p.Z)(),{reportTACError:g}=H(),h=(0,r.useRef)(null),[y,b]=(0,r.useState)(""),{sendFeedback:x}=(0,q.u)(d.o);(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacAccountSendFeedback,l.BrowseComponent.Tac)}),[]);return(0,S.BX)(o.Vq,{isOpen:!0,onClose:()=>{(0,m.Kz)(new l.UserCallToActionEvent({hasChosenNoAction:!0})),e()},actions:{primary:{children:u("team_feedback_dialog_button_ok"),onClick:()=>(async()=>{s(!0),_(!1);const e=await x({feedbackBody:y});(0,j.d6)(e)?((0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.SendEmail],chosenAction:l.CallToAction.SendEmail,hasChosenNoAction:!1})),t()):(g(new Error(e.error.message)),s(!1),_(!0))})(),disabled:n||i}},title:u("team_feedback_dialog_upd_title"),closeActionLabel:u("_common_dialog_dismiss_button"),children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:u.markup("team_feedback_dialog_upd_text_markup",{},{linkTarget:"_blank"})}),(0,S.tZ)(o.oi,{sx:{resize:"vertical",maxHeight:"300px"},value:y,ref:h,placeholder:u("team_feedback_dialog_upd_textarea_label"),onChange:e=>{var t;b(null!=(t=h?.current?.value)?t:"");const n=!e.target.value;a(n)}}),c?(0,S.tZ)(o.nv,{color:"ds.text.danger.quiet",textStyle:"ds.body.standard.strong",children:u.markup("team_feedback_dialog_error_markup")}):null]})};var $;const K=({onDismiss:e})=>{const{translate:t}=(0,p.Z)();return(0,S.tZ)(o.Vq,{isOpen:!0,onClose:e,closeActionLabel:t("_common_dialog_dismiss_button"),title:t("team_feedback_result_dialog_title"),children:(0,S.BX)("div",{sx:{display:"flex",gap:"20px",alignItems:"center"},children:[$||($=(0,S.tZ)(o.JO,{name:"FeedbackSuccessOutlined",size:"xlarge",color:"ds.text.positive.standard"})),(0,S.tZ)("div",{children:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:`${t("team_feedback_result_body_title")}. ${t("team_feedback_result_body_text")}`})})]})})};var Y=function(e){return e[e.FeedbackPopup=0]="FeedbackPopup",e[e.ResultPopup=1]="ResultPopup",e[e.Done=2]="Done",e}(Y||{});const Q=({onDismiss:e,onSend:t})=>{const[n,a]=(0,r.useState)(Y.FeedbackPopup);let i;const s=()=>{clearTimeout(i),a(Y.Done),t()};return(0,S.BX)("div",{children:[n===Y.FeedbackPopup&&(0,S.tZ)(W,{onDismiss:e,onFeedbackSent:()=>{a(Y.ResultPopup),i=window.setTimeout((()=>{s()}),1e4)}}),n===Y.ResultPopup&&(0,S.tZ)(K,{onDismiss:s})]})};var J=n(31626),ee=n(19471),te=n(15607);const ne=()=>{const e=(0,X.C)(),t=(0,te.lZ)(),{translate:n}=(0,p.Z)();if(!e||t.isLoading||void 0===t.isTeamSoftDiscontinued||void 0===t.isTrial)return null;const a=e.daysLeftInTrial,i=e.spaceTier===_.lD.Team,r=e.isGracePeriod,s=t.isTeamSoftDiscontinued&&t.isTrial;return(0,S.tZ)(o.Ct,{label:s?n("trial_ended_discontinued"):r?n("free_trial_expired_badge"):n(i?"team_trial_days_left_badge":"business_trial_days_left_badge",{count:a}),mood:r||s?"warning":"brand",layout:"labelOnly",intensity:r?"catchy":"quiet",sx:{marginTop:"3px"}})};var ae;const ie=({lee:e})=>{const[t,n]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),u=(0,R._)(),g=u.status===L.rq.Success&&u.data[M.C.B2bReferralProd],h=(0,X.C)(),{translate:y}=(0,p.Z)(),b=(0,U.a)(e.dispatchGlobal),{routes:x}=(0,i.Xo)(),f=t?(0,S.tZ)(Q,{onDismiss:()=>n(!1),onSend:()=>n(!1)}):null,v=a?(0,S.tZ)(J.c,{onDismiss:()=>s(!1)}):null,C=!h?.isFreeTrial&&(h?.spaceTier===_.lD.Team||h?.spaceTier===_.lD.Starter),E=h?.isFreeTrial,Z=e.permission.adminAccess.hasBillingAccess;return(0,S.BX)(S.HY,{children:[(0,S.tZ)("div",{className:"teamAccountDropdown--XD04fGIw1S",children:(0,S.tZ)(o.h_,{align:"end",children:(0,S.BX)("div",{className:"dropdownMenu--Uz1kni0KIt",children:[(0,S.tZ)(o.sB,{showCaret:!0,mood:"neutral",intensity:"supershy",sx:{zIndex:99},children:y("team_account")}),(0,S.BX)(o.Nv,{children:[E&&Z?(0,S.tZ)(o.hP,{onSelect:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuyDashlane,clickOrigin:l.ClickOrigin.AccountDropdown})),(0,i.uX)(x.teamAccountCheckoutRoutePath)},label:y("team_buy_dashlane"),badge:ae||(ae=(0,S.tZ)(ne,{}))}):null,Z?(0,S.tZ)(o.hP,{onSelect:()=>(0,i.uX)(x.teamAccountRoutePath),label:y("team_plan")}):null,(0,S.tZ)(o.hP,{onSelect:()=>{(0,i.uX)("/")},label:y("team_webapp")}),g&&Z?(0,S.tZ)(o.hP,{onSelect:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.ReferABusiness,clickOrigin:l.ClickOrigin.AccountDropdown}));const e=(0,B.G3)();(0,P.Yo)(`${ee.p9}?utm_source=product&utm_medium=tac&utm_campaign=b2breferralprogram&lang=${e}`)},label:y("team_refer_business")}):null,C&&Z?(0,S.tZ)(o.hP,{onSelect:()=>(0,i.uX)(`${x.teamAccountChangePlanRoutePath}`),label:y("team_upgrade")}):null,(0,S.tZ)(o.hP,{onSelect:()=>(0,P.Yo)(ee.Pr),label:y("team_service_status")}),(0,S.tZ)(o.hP,{onSelect:()=>(0,P.Yo)(ee.FX),label:y("team_support")}),Z?(0,S.tZ)(o.hP,{onSelect:()=>s(!0),label:y("team_contact_support_menu_item")}):null,(0,S.tZ)(o.hP,{onSelect:()=>n(!0),label:y("team_feedback")}),(0,S.tZ)("hr",{sx:{border:"none",borderTop:"1px solid ds.border.neutral.quiet.idle",margin:"8px 0",opacity:.8}},"horizontal-divider"),(0,S.tZ)(o.hP,{onSelect:()=>{b()},isDestructive:!0,label:y("team_logout")})]})]})})}),c?(0,S.tZ)(z.F,{isShown:c,setIsShown:d,isFromVault:!1}):null,f,v]})};var re=n(14900),se=n(95870),oe=n(67282),le=n(55139),ce=n(79846);const de=r.createContext(null),_e=({children:e})=>{const[t,n]=r.useState(!1);return(0,S.tZ)(de.Provider,{value:{hasNewBreaches:t,setHasNewBreaches:n},children:e})},ue=()=>{const e=r.useContext(de);if(!e)throw new Error("useSideNavNotification must be called from within an SideNavNotificationProvider");return e};var me=n(23619);function pe(e){var t;const n=(0,me.U)(),a=(0,X.C)();if(!a)return null;let i;return i="hasFullAccess"in e&&e.hasFullAccess||e.hasBillingAccess,{shouldShowBuyOrUpgradePaywall:null!=(t=i)&&t,isTrialOrGracePeriod:a.isFreeTrial||a.isGracePeriod,planType:a.spaceTier,accountSubscriptionCode:null!=n?n:""}}var ge=n(22640),he=n(5465);function ye(e){const[t,n]=r.useState(!0),[a,i]=r.useState({}),[s,o]=r.useState(null),[l,c]=r.useState(null),[d,_]=r.useState(null);return r.useEffect((()=>{if(void 0===e)return;const t=new AbortController;return(async()=>{n(!0);try{const{teamInfo:{ssoServiceProviderUrl:e,ssoIdpMetadata:n,ssoEnabled:a,recoveryEnabled:r,duoSecretKey:s,duoIntegrationKey:o,duoApiHostname:l,duo:d,activeDirectoryToken:u,activeDirectorySyncType:m,activeDirectorySyncStatus:p,uuid:g},capabilities:h,planTier:y}=await async function(){const e=await he.C.getTeamInfo();if(e.success){const{data:{teamInfo:t,planTier:n,capabilities:a,seats:i}}=e;return{teamInfo:t,planTier:n,capabilities:a,seats:i}}{const{message:t}=e;throw new Error(`getTeamInfo: failed with error: ${t}`)}}();if(t.signal.aborted)return;i({ssoServiceProviderUrl:e,ssoIdpMetadata:n,ssoEnabled:a,recoveryEnabled:r,duoSecretKey:s,duoIntegrationKey:o,duoApiHostname:l,duo:d,activeDirectoryToken:u,activeDirectorySyncType:m,activeDirectorySyncStatus:p,uuid:g}),_(y),c(h)}catch(e){const t=new Error(`useTeamSettings: ${e}`);o(t)}finally{n(!1)}})(),()=>{t.abort()}}),[e]),{teamSettingsLoading:t,teamSettingsError:s,teamSettings:a,updateTeamSettings:async t=>{if(null===e)return;const n={teamId:e,settings:t};try{await(0,ge.jy)(n)}catch(e){var r;throw new Error(null!=(r=e?.additionalInfo?.message)?r:"Failed to save metadata")}const s={...a,...t};i(s)},planTier:d,teamCapabilities:l}}var be=n(19122),xe=n(40577),Se=n(80443),fe=n(14943),ve=n(2337);const Ce=()=>{const e=(0,fe.Y)(),t=(0,xe.o)("monetization_extension_policies_repackage"),n=(0,X.C)();if(e.status!==L.rq.Success||!t)return{hasStarterPaywall:!1,hasTrialBusinessPaywall:!1,hasExcludedPolicy:()=>!1};const a=e.data.capabilities?.adminPolicies?.info.excludedPolicies||[],i="full"===(0,ve.R)(e.data);return{hasStarterPaywall:(0,Se.f1)(e.data)&&i,hasTrialBusinessPaywall:(0,Se.NG)(e.data)&&i&&!!n?.isFreeTrial,hasExcludedPolicy:e=>a.includes(e)}},Ee=(0,r.createContext)(!1),Ze=({children:e})=>{const t=(0,xe.o)("setup_rollout_splunk_integration_prod");return(0,S.tZ)(Ee.Provider,{value:!!t,children:e})};var De=n(15192),Te=n(84133);const ke=({settingsRoute:e,children:t})=>{const{translate:n}=(0,p.Z)(),a=(0,De.k6)(),i=(0,Te.h)(),{unseen:r,setAsSeen:s}=(0,ce.m)(se.O.AccountRecoveryAvailableAdminTooltip);return!r||i.status!==L.rq.Success||i.data?(0,S.tZ)("div",{children:t}):(0,S.tZ)(re.ua7,{sx:{width:"312px",minWidth:"312px",textAlign:"left"},trigger:"persist",placement:"left",offset:[0,30],arrowSize:12,content:(0,S.BX)(o.kC,{gap:"8px",sx:{padding:"8px"},children:[(0,S.tZ)(re.nvN,{size:"large",as:"h3",sx:{fontWeight:600,color:"ds.text.inverse.catchy"},children:n("team_account_recovery_popover_title")}),(0,S.tZ)(re.nvN,{color:"white",size:"x-small",children:n("team_account_recovery_popover_description")}),(0,S.BX)(o.kC,{gap:"8px",justifyContent:"flex-end",sx:{width:"100%",marginTop:"8px"},children:[(0,S.tZ)(o.zx,{type:"button",mood:"neutral",size:"small","data-testid":"ar-tooltip-dismiss",onClick:()=>s(),children:n("team_account_recovery_popover_dismiss")}),(0,S.tZ)(o.zx,{type:"button",mood:"brand",size:"small","data-testid":"ar-tooltip-go-to-settings",onClick:()=>{s(),a.push(e)},children:n("team_account_recovery_popover_go_to_settings")})]})]}),children:(0,S.tZ)("div",{children:t})})},Ie={CONTAINER:{alignItems:"center",borderRadius:"4px",cursor:"pointer",display:"flex",padding:"4px 12px",minHeight:"40px"},CONTAINER_ON_HOVER:{"&:hover":{backgroundColor:"ds.container.expressive.neutral.supershy.hover"}},CONTAINER_COLLAPSED:{textStyle:"ds.title.block.small",alignItems:"center",flexDirection:"column",padding:"6px"},CONTAINER_SELECTED:{backgroundColor:"ds.container.expressive.neutral.supershy.active"},END_ADORNMENT:{flex:"1 1 auto"},END_ADORNMENT_COLLAPSED:{display:"none"},ICON:{marginBottom:"0",marginRight:"16px",minWidth:"20px",svg:{fill:"ds.text.inverse.catchy"},"&:hover":{svg:{fill:"ds.text.inverse.catchy"}}},ICON_COLLAPSED:{marginBottom:"4px",marginRight:"0"},LABEL:{color:"ds.text.inverse.catchy",hyphens:"auto",minWidth:"0",wordWrap:"break-word",flex:"1 1 auto"},LABEL_COLLAPSED:{textStyle:"ds.title.block.small",textAlign:"center",width:"100%"},LABEL_CONTAINER:{display:"flex",alignItems:"center",flexDirection:"row",gap:"2px 12px",width:"100%",flexWrap:"wrap"},NOTIFICATION:{alignSelf:"flex-start",backgroundColor:"ds.container.expressive.warning.catchy.idle",borderRadius:"50%",flexShrink:"0",height:"8px",marginLeft:"4px",width:"8px"},NOTIFICATION_COLLAPSED:{position:"absolute",right:"18px"},TEXT_MEDIUM:{textStyle:"ds.title.block.medium"}},Ae=({collapsed:e,hasNotification:t,icon:n,label:a,endAdornment:i,selected:r,inAccordion:s=!1,...l})=>{const c=(0,o.jM)([Ie.CONTAINER,e?Ie.CONTAINER_COLLAPSED:Ie.TEXT_MEDIUM,r&&!s?Ie.CONTAINER_SELECTED:{},s?{padding:0,minHeight:"none"}:Ie.CONTAINER_ON_HOVER]),d=(0,o.jM)([Ie.ICON,e?Ie.ICON_COLLAPSED:{}]),_=(0,o.jM)([Ie.LABEL,e?Ie.LABEL_COLLAPSED:Ie.TEXT_MEDIUM]),u=(0,o.jM)([Ie.NOTIFICATION,e?Ie.NOTIFICATION_COLLAPSED:{}]);return(0,S.BX)("span",{sx:c,...l,children:[(0,S.BX)("span",{sx:d,children:[" ",n," "]}),i?(0,S.BX)("div",{sx:Ie.LABEL_CONTAINER,children:[(0,S.tZ)("span",{sx:_,children:a}),(0,S.tZ)("div",{sx:e?Ie.END_ADORNMENT_COLLAPSED:{},children:i})]}):(0,S.tZ)("span",{sx:_,children:a}),t?(0,S.tZ)("span",{sx:u}):null]})},we="tooltipMenuOption--uuMY2Xcfk0";var Ne,Oe,Re,Le,Me,Be,Pe,Ue,Xe,ze,qe,je,Fe,Ge,Ve,He=n(15394);const We="team_settings_menu_title_directory_sync",$e="team_settings_menu_title_events_reporting",Ke="team_settings_menu_title_single_sign_on",Ye="team_upgrade_label",Qe="team_new_label",Je="webapp_sidemenu_group_upgrade_label",et="webapp_sidemenu_category_integrations",tt={backgroundColor:"ds.container.agnostic.inverse.standard"," > summary > div":{width:"-webkit-fill-available"},"&[open] > summary > div":{width:"-webkit-fill-available"}," > summary > div > div > svg":{margin:"8px 4px 8px 0"},"&[open]":{padding:0},"&[open] > div:nth-of-type(1)":{pointerEvents:"auto",padding:0},"svg, svg:hover":{fill:"ds.text.inverse.catchy"}},nt=le.w.BBCOM238Duo,at=oe.q.RiskDetectionV2Prod,it=oe.q.RiskDetectionV2OnDemand,rt=(e,t)=>{var n;return(null!=(n=t?.[e].length)?n:0)>0},st=({isCollapsed:e=!1,permissionChecker:t,routes:n,teamNotifications:s})=>{var c;const{translate:d}=(0,p.Z)(),u={DUO:`${n.teamSettingsRoutePath}${a.B9.DUO}`,MASTER_PASSWORD_POLICIES:`${n.teamSettingsRoutePath}${a.B9.MASTER_PASSWORD_POLICIES}`,POLICIES:`${n.teamSettingsRoutePath}${a.B9.POLICIES}`},g={INTEGRATIONS:`${n.teamIntegrationsRoutePath}`,DIRECTORY_SYNC:`${n.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}`,SSO:`${n.teamIntegrationsRoutePath}${a.Nr.SSO}`,SIEM:`${n.teamIntegrationsRoutePath}${a.Nr.SIEM}`,NUDGES:`${n.teamIntegrationsRoutePath}${a.Nr.NUDGES}`},h=(0,i.TH)(),{unseen:y}=(0,ce.m)(se.O.TacDarkWebInsightsNewBadge),{hasNewBreaches:b}=ue(),x=(0,R._)(),f=x.data?.[nt],v=x.data?.[at]||x.data?.[it],C=x.data?.ace_tac_slack_integration,{shouldShowBuyOrUpgradePaywall:E,planType:Z,isTrialOrGracePeriod:D}=null!=(c=pe(t.adminAccess))?c:{},{teamId:T}=(0,be.fV)(),k=ye(T),I=(0,He.rp)(["nudges"]),A=(0,He.rp)(["riskDetection"]),w=(0,r.useContext)(Ee),{hasStarterPaywall:N,hasTrialBusinessPaywall:O}=Ce(),L=E&&(Z===_.lD.Team||Z===_.lD.Starter),M=!I&&!(null==D||D),B=!A&&!(null==D||D),P=I||D,U=A||D,X=Z===_.lD.Standard,z=!!k.teamCapabilities?.groupSharing.info?.limit||X,q=N||O,j=(0,o.jM)([Ie.CONTAINER,Ie.CONTAINER_ON_HOVER,e?Ie.CONTAINER_COLLAPSED:{}]),F=({requiredPermission:e,children:n,...a})=>t.adminAccess.hasPermissionLevel(e)?(0,S.tZ)(re.KJW,{...a,children:n}):null;return(0,S.BX)(re.t7v,{collapsed:e,children:[(0,S.BX)(re.sMA,{sx:{pointerEvents:"auto",backgroundColor:"ds.container.agnostic.inverse.standard",marginBottom:"40px"},children:[(0,S.tZ)(F,{requiredPermission:"FULL",collapsed:e,children:(0,S.tZ)(i.rU,{to:n.teamDashboardRoutePath,children:(0,S.tZ)(Ae,{collapsed:e,icon:Ne||(Ne=(0,S.tZ)(o.JO,{name:"DashboardOutlined"})),label:d("team_general"),selected:h.pathname===n.teamDashboardRoutePath})})}),(0,S.tZ)(F,{requiredPermission:"FULL",collapsed:e,children:(0,S.tZ)(i.rU,{to:n.teamMembersRoutePath,children:(0,S.tZ)(Ae,{collapsed:e,icon:Oe||(Oe=(0,S.tZ)(o.JO,{name:"UsersOutlined"})),label:d("team_members"),selected:h.pathname===n.teamMembersRoutePath})})}),(0,S.tZ)(F,{requiredPermission:"GROUP_READ",collapsed:e,children:(0,S.tZ)(i.rU,{to:n.teamGroupsRoutePath,children:(0,S.tZ)(Ae,{collapsed:e,icon:Re||(Re=(0,S.tZ)(o.JO,{name:"GroupOutlined"})),label:d("team_groups"),selected:h.pathname===n.teamGroupsRoutePath,endAdornment:z?(0,S.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:d(Je),layout:"iconLeading",iconName:"PremiumOutlined"}):null})})}),(0,S.tZ)(F,{requiredPermission:"FULL",collapsed:e,children:(0,S.tZ)(i.rU,{to:n.teamActivityRoutePath,children:(0,S.tZ)(Ae,{collapsed:e,hasNotification:rt("accountRecoveryRequests",s),icon:Le||(Le=(0,S.tZ)(o.JO,{name:"ActivityLogOutlined"})),label:d("team_activity"),selected:h.pathname.includes(n.teamActivityRoutePath)})})})]}),t.adminAccess.hasFullAccess?(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.inverse.quiet",sx:{marginTop:"16px",marginLeft:"14px",marginBottom:"4px"},children:d("webapp_sidemenu_category_advanced_tools")}),(0,S.BX)(re.sMA,{children:[v?(0,S.tZ)(F,{requiredPermission:"FULL",collapsed:e,children:(0,S.tZ)(i.rU,{to:n.loggedOutMonitoring,children:(0,S.tZ)(Ae,{collapsed:e,icon:Me||(Me=(0,S.tZ)(o.JO,{name:"RiskDetectionOutlined"})),label:d("team_sidemenu_risk_detection"),endAdornment:B?(0,S.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:d(Je),layout:"iconLeading",iconName:"PremiumOutlined"}):U?(0,S.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:d(Qe),"data-testid":"crd-new-badge"}):null})})}):null,C?(0,S.tZ)(F,{requiredPermission:"FULL",collapsed:e,children:(0,S.tZ)(i.rU,{to:g.NUDGES,onClick:()=>(0,m.Nc)(l.PageView.ToolsNudges),children:(0,S.tZ)(Ae,{collapsed:e,icon:Be||(Be=(0,S.tZ)(o.JO,{name:"FeatureAutomationsOutlined"})),label:d("webapp_sidemenu_nudges"),selected:h.pathname===g.NUDGES,endAdornment:M?(0,S.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:d(Je),layout:"iconLeading",iconName:"PremiumOutlined","data-testid":"nudges-upgrade-badge"}):P?(0,S.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:d(Qe),"data-testid":"nudges-new-badge"}):null})})}):null,(0,S.tZ)(F,{requiredPermission:"FULL",collapsed:e,children:(0,S.tZ)(i.rU,{to:n.teamDarkWebInsightsRoutePath,onClick:()=>{(0,m.Kz)(new l.UserOpenDomainDarkWebMonitoringEvent({accessPath:l.AccessPath.NavLeftMenuButton,isFirstVisit:y}))},children:(0,S.tZ)(Ae,{collapsed:e,icon:Pe||(Pe=(0,S.tZ)(o.JO,{name:"FeatureDarkWebMonitoringOutlined"})),label:d("team_dashboard_dark_web_insights_heading"),selected:h.pathname===n.teamDarkWebInsightsRoutePath,hasNotification:b})})})]}),(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.inverse.quiet",sx:{marginTop:"16px",marginLeft:"14px",marginBottom:"4px"},children:d("team_settings")}),(0,S.BX)(re.sMA,{children:[(0,S.tZ)(F,{requiredPermission:"FULL",collapsed:e,children:(0,S.tZ)(i.rU,{to:u.POLICIES,style:{width:"100%"},children:(0,S.tZ)(Ae,{icon:Ue||(Ue=(0,S.tZ)(o.JO,{name:"SettingsOutlined"})),collapsed:e,label:d("team_settings_menu_title_policies"),selected:h.pathname===u.POLICIES,endAdornment:q?(0,S.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:d(Ye),layout:"iconLeading",iconName:"PremiumOutlined"}):null})})}),(0,S.tZ)(ke,{settingsRoute:u.MASTER_PASSWORD_POLICIES,children:(0,S.tZ)(F,{requiredPermission:"FULL",collapsed:e,children:(0,S.tZ)(i.rU,{to:u.MASTER_PASSWORD_POLICIES,children:(0,S.tZ)(Ae,{icon:Xe||(Xe=(0,S.tZ)(o.JO,{name:"RecoveryKeyOutlined"})),label:d("team_settings_menu_title_account_recovery"),collapsed:e,selected:h.pathname===u.MASTER_PASSWORD_POLICIES})})})}),f?(0,S.tZ)(F,{requiredPermission:"FULL",collapsed:e,children:(0,S.tZ)(i.rU,{to:u.DUO,children:(0,S.tZ)(Ae,{icon:ze||(ze=(0,S.tZ)(o.JO,{name:"LaptopCheckmarkOutlined"})),label:d("team_settings_tab_duo"),collapsed:e,selected:h.pathname===u.DUO})})}):null,e?(0,S.tZ)(re.ua7,{placement:"right",offset:[0,15],hoverCloseDelay:500,sx:{padding:"4px 0","svg, svg:hover":{fill:"ds.text.inverse.catchy"}},content:(0,S.BX)("div",{sx:{width:"148px"},children:[(0,S.tZ)(i.rU,{to:g.SSO,sx:{textDecoration:"none"},children:(0,S.BX)("div",{className:we,children:[d(Ke),L?(0,S.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:d(Ye),layout:"iconLeading",iconName:"PremiumOutlined","data-testid":"sso-badge"}):null]})}),(0,S.tZ)(i.rU,{to:g.DIRECTORY_SYNC,sx:{textDecoration:"none"},children:(0,S.tZ)("div",{className:we,children:d(We)})}),w?(0,S.tZ)(i.rU,{to:g.SIEM,sx:{textDecoration:"none"},children:(0,S.tZ)("div",{className:we,children:d($e)})}):null]}),children:(0,S.tZ)("div",{tabIndex:0,children:(0,S.tZ)(F,{requiredPermission:"FULL",collapsed:e,children:(0,S.tZ)(i.rU,{to:g.INTEGRATIONS,children:(0,S.tZ)(Ae,{collapsed:e,icon:qe||(qe=(0,S.tZ)(o.JO,{name:"ConfigureOutlined"})),label:d(et),selected:!1})})})})}):(0,S.BX)(re.UlM,{size:"large",open:!0,sx:{...tt,"> summary":(0,o.jM)([j,h.pathname===g.INTEGRATIONS?Ie.CONTAINER_SELECTED:{}])},children:[(0,S.tZ)(re._Oh,{children:(0,S.tZ)(F,{requiredPermission:"FULL",collapsed:e,children:(0,S.tZ)(i.rU,{to:g.INTEGRATIONS,children:(0,S.tZ)(Ae,{collapsed:e,icon:je||(je=(0,S.tZ)(o.JO,{name:"ConfigureOutlined"})),label:d(et),inAccordion:!0,endAdornment:X?(0,S.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:d(Je),layout:"iconLeading",iconName:"PremiumOutlined"}):null})})})}),(0,S.BX)(re.rN7,{children:[(0,S.tZ)(F,{requiredPermission:"FULL",collapsed:e,children:(0,S.tZ)(i.rU,{to:g.SSO,children:(0,S.tZ)(Ae,{icon:Fe||(Fe=(0,S.tZ)("span",{})),label:d(Ke),endAdornment:L?(0,S.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:d(Ye),layout:"iconLeading",iconName:"PremiumOutlined","data-testid":"sso-badge"}):null,selected:h.pathname===g.SSO})})}),(0,S.tZ)(F,{requiredPermission:"FULL",collapsed:e,children:(0,S.tZ)(i.rU,{to:g.DIRECTORY_SYNC,children:(0,S.tZ)(Ae,{icon:Ge||(Ge=(0,S.tZ)("span",{})),label:d(We),selected:h.pathname===g.DIRECTORY_SYNC})})}),w?(0,S.tZ)(F,{requiredPermission:"FULL",collapsed:e,children:(0,S.tZ)(i.rU,{to:g.SIEM,children:(0,S.tZ)(Ae,{icon:Ve||(Ve=(0,S.tZ)("span",{})),label:d($e),selected:h.pathname===g.SIEM})})}):null]})]})]})]}):null]})};var ot;const lt=({isCollapsed:e=!1})=>{const{translate:t}=(0,p.Z)();return(0,S.tZ)("div",{sx:{width:e?"96px":"256px"},children:(0,S.tZ)("div",{"data-testid":"logo-header",sx:{display:"flex",flexDirection:"column",alignItems:e?"center":"baseline",padding:e?"none":"20px 24px",justifyContent:"center",height:"80px !important",borderBottom:"1px solid ds.border.neutral.quiet.idle !important"},children:e?(0,S.tZ)("div",{sx:{position:"relative",right:"3px"},children:ot||(ot=(0,S.tZ)(re.NJ6,{color:"ds.text.inverse.catchy",height:39,width:39}))}):(0,S.tZ)(o.TR,{height:40,name:"DashlaneLockup",title:t("_common_dashlane_logo_title"),color:"ds.text.inverse.catchy"})})})};n(50801);const ct="webapp_sidemenu_open_vault_cta",dt=({isCollapsed:e})=>{const{translate:t}=(0,p.Z)(),[n,a]=(0,r.useState)(!1);return(0,S.BX)("div",{sx:{display:"flex",justifyContent:"center",borderTop:"1px solid",position:"fixed",bottom:"0",borderTopColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.inverse.standard",width:e?"96px":"256px"},children:[(0,S.tZ)(o.zx,{layout:e?"iconOnly":"iconLeading","aria-label":t(ct),fullsize:!e,sx:{margin:"20px 25px"},icon:"VaultOutlined",mood:"brand",intensity:"catchy",onClick:()=>{(0,P.nL)(ee.rC)},children:t(ct)}),n?(0,S.tZ)(z.F,{isShown:n,setIsShown:a,isFromVault:!1}):null]})};var _t=n(77429);const ut=(0,r.createContext)({}),mt=({children:e})=>{const[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)({lastBillingDetails:void 0,lastAdditionalSeatsDetails:void 0}),s=(0,r.useMemo)((()=>({isAddSeatsSuccessOpen:t,setIsAddSeatsSuccessPageOpen:n,setSeatDetails:i,upsellDetails:a})),[t,a]);return(0,S.tZ)(ut.Provider,{value:s,children:e})},pt=()=>(0,r.useContext)(ut);var gt;const ht=()=>document.documentElement.clientWidth<1371,yt=()=>{},bt=r.createContext(yt),xt=({children:e,lee:t})=>{const[n,a]=(0,r.useState)(ht()),[s,o]=(0,r.useState)(),{routes:l}=(0,i.Xo)(),c=t.permission.adminAccess,d=c.hasBillingAccess||c.hasFullAccess;(0,r.useEffect)((()=>{const e=(0,D.throttle)((()=>{const e=ht();e&&!n?a(!0):!e&&n&&a(!1)}),100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[n]);const _=(0,T.kA)(t.globalState),u=(0,S.BX)(w,{children:[s,(0,S.tZ)(ie,{lee:t})]}),m=(0,S.tZ)(lt,{isCollapsed:n}),p=(0,S.tZ)(st,{isCollapsed:n,permissionChecker:t.permission,routes:l,teamNotifications:_?.notifications}),g=(0,S.tZ)(dt,{isCollapsed:n}),h=(0,S.tZ)(_t.Q6,{adminAccess:t.permission.adminAccess}),y=d?gt||(gt=(0,S.tZ)(k.XA,{})):null;return(0,S.tZ)(bt.Provider,{value:o,children:(0,S.tZ)(I.AH,{adminAccess:c,children:(0,S.tZ)(mt,{children:(0,S.tZ)(O,{brand:m,header:u,sideNav:p,bottomButton:g,banner:h,dialog:y,children:e})})})})};var St=n(41721);const ft=()=>{const{data:e,status:t}=(0,c.k)(St.K,"getTeamOffers",{});return t!==L.rq.Success?null:e};var vt=n(23914);const Ct=()=>(0,S.tZ)("hr",{style:{width:"100%",borderTop:`1px solid ${re.colors.grey02}`,borderBottom:"0",margin:"0"}}),Et=({label:e,value:t})=>(0,S.BX)(o.kC,{justifyContent:"flex-end",sx:{padding:"0 10px"},children:[e?(0,S.tZ)("div",{sx:{display:"flex",alignItems:"center",flex:1},children:e}):null,t?(0,S.tZ)("div",{sx:{display:"flex",alignItems:"center"},children:t}):null]}),Zt="team_account_teamplan_changeplan_order_summary_minimum_active_seats_tooltip",Dt=({isAmountAllowed:e,absoluteMinimum:t,relativeMinimum:n})=>{const{translate:a}=(0,p.Z)(),{routes:r}=(0,i.Xo)(),s=e?"ds.text.neutral.quiet":"ds.text.danger.quiet",l=a("team_account_teamplan_changeplan_order_summary_minimum_active_seats",{count:n});return(0,S.tZ)(Et,{label:(0,S.BX)(o.kC,{gap:"5px",children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:s,children:l}),(0,S.tZ)(o.JO,{color:s,name:"FeedbackInfoOutlined",size:"small",tooltip:e?a(Zt):t===n?a("team_account_teamplan_changeplan_order_summary_minimum_seats_absolute_tooltip",{count:t}):a(Zt)})]}),value:e?(0,S.tZ)(o.Qj,{size:"small",as:i.rU,to:r.teamMembersRoutePath,replace:!0,children:a("team_account_teamplan_changeplan_order_summary_review_active_seats_link")}):null})};var Tt,kt;const It=({children:e,currency:t,handleClear:n,promoCode:a,promoPrice:i,setIsEditing:r,subTotal:s})=>{const{translate:l}=(0,p.Z)();return(0,S.BX)(S.HY,{children:[(0,S.BX)(o.kC,{gap:"4px",fullWidth:!0,alignItems:"center",justifyContent:"space-between",sx:{padding:"0 10px"},children:[(0,S.tZ)(o.kC,{alignItems:"center",gap:"4px",children:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.positive.quiet",children:l("team_account_teamplan_changeplan_order_summary_promo_code_discount",{discount:i&&s?Math.round(i/s*100):0})})}),(0,S.tZ)("div",{children:i&&t?(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.positive.quiet",children:l.price(t,(c=i,c?-c/100:0))}):null})]}),e,(0,S.tZ)(o.kC,{gap:"6px",fullWidth:!0,sx:{padding:"0 10px"},children:(0,S.tZ)("div",{sx:{flex:1},children:(0,S.tZ)(o.CW,{actions:[(0,S.tZ)(o.zx,{"data-testid":"promo_code_button_edit",icon:Tt||(Tt=(0,S.tZ)(o.JO,{name:"ActionEditOutlined"})),intensity:"supershy",layout:"iconOnly",mood:"brand",onClick:()=>r(!0)},"edit"),(0,S.tZ)(o.zx,{"data-testid":"promo_code_button_delete",icon:kt||(kt=(0,S.tZ)(o.JO,{name:"ActionDeleteOutlined"})),intensity:"supershy",layout:"iconOnly",mood:"brand",onClick:n},"delete")],label:l("team_account_teamplan_changeplan_order_summary_promo_code_label"),labelPersists:!0,mood:"positive",value:a})})})]});var c};var At;const wt=({costData:e,currency:t,currentSpaceTier:n,handleClear:a,isAmountAllowed:i,isEditing:s,promoCode:l,promoPrice:c,selectedOffer:d,setIsEditing:u,setSelectedSeatsQty:m,signalAmountValidHandler:g,subTotal:h,taxCopy:y})=>{const{translate:b}=(0,p.Z)(),x=n===_.lD.Starter?10:e.currentSeats;(0,r.useEffect)((()=>{m(x)}),[x]);const f=n===_.lD.Starter||n===_.lD.Standard?e.currentActiveSeats>2?e.currentActiveSeats:2:e.currentSeats,v=e.totalSeats===e.currentActiveSeats||!i,C=()=>t?(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:b(y)}),value:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:b.price(t,e.tax/100)})}):null;return(0,S.tZ)(S.HY,{children:d&&t?(0,S.BX)(S.HY,{children:[(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:b("team_post_trial_checkout_number_of_seats",{totalSeats:e.totalSeats})}),value:(0,S.tZ)("div",{sx:{width:"146px"},children:(0,S.tZ)(vt.w,{id:"test",inputWidth:"66px",label:"",ariaLabel:b("team_account_teamplan_upgrade_premium_number_of_seats_free_to_paid"),minValue:f,onChange:m,signalAmountValidHandler:g,defaultValue:x})})}),v?(0,S.tZ)(Dt,{isAmountAllowed:i,absoluteMinimum:2,relativeMinimum:f}):null,(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:b("team_account_teamplan_changeplan_order_summary_seats_upgraded",{upgradedSeats:Math.min(e.currentSeats,e.totalSeats)})}),value:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:b.price(t,e.upgradedSeatsPrice/100)})}),e.addedSeats?(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:b("team_account_teamplan_changeplan_order_summary_seats_new",{newSeats:e.addedSeats})}),value:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:b.price(t,e.addedSeatsPrice/100)})}):null,At||(At=(0,S.tZ)(Ct,{})),(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:b("team_account_teamplan_changeplan_order_summary_subtotal")}),value:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:b.price(t,e.subtotal/100)})}),e?.proratedDiscount?(0,S.tZ)(Et,{label:(0,S.BX)(o.kC,{alignItems:"center",gap:"5px",children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:b("team_account_teamplan_changeplan_order_summary_prorated_discount")}),(0,S.tZ)(o.JO,{color:"ds.text.neutral.quiet",name:"FeedbackInfoOutlined",size:"small",tooltip:b("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip")})]}),value:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:b.price(t,e.proratedDiscount/100)})}):null,l&&!s?(0,S.tZ)(It,{currency:t,handleClear:a,promoCode:l,promoPrice:c,setIsEditing:u,subTotal:h,children:C()}):C()]}):null})};let Nt=function(e){return e.FORM="form",e.SUCCESS="success",e}({}),Ot=function(e){return e.CREDIT_CARD="credit-card",e.INVOICE="invoice",e}({});var Rt=n(10994),Lt=n(41185);const Mt=({offer:e,selectedSeatsQty:t=0})=>{const n=[...e.priceRanges].sort(((e,t)=>e.startMembers-t.startMembers));return n.reduce(((e,n)=>n.startMembers<t&&n.startMembers>e.startMembers?n:e),n[0])},Bt=({offer:e,selectedSeatsQty:t,priceTarget:n="price"})=>Mt({offer:e,selectedSeatsQty:t})[n]/(e.duration.includes("y")?12:1),Pt=({offer:e,selectedSeatsQty:t})=>Mt({offer:e,selectedSeatsQty:t}).price*t/12,Ut=e=>!!e.name.match(/_team_/u),Xt=e=>!!e.name.match(/_business_/u);var zt=n(55525);function qt({total:e,onError:t,initialSkip:n}){const[a,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(),[l,d]=(0,r.useState)({}),[_,u]=(0,r.useState)(e),m=(0,r.useRef)(e),p=(0,r.useCallback)((0,D.debounce)((e=>{u(e)}),500),[]);(0,r.useEffect)((()=>{l[e]?o(l[e]):e!==m.current&&(m.current=e,p(e))}),[e,l,p]);const g=(0,c.k)(zt.a,"getTaxAmount",{totalPrice:_},{initialSkip:null!=n?n:!!l[_]});return(0,r.useEffect)((()=>{if(g.status===L.rq.Loading)i(!0);else if(g.status===L.rq.Success&&g.data){i(!1);const e={amount:g.data.amount};o(e),d((t=>({...t,[_]:e})))}else g.status===L.rq.Error&&(t?.(),i(!1),o(void 0))}),[g.status,g.data,t,_]),(0,r.useEffect)((()=>()=>{p.cancel()}),[p]),{isLoading:a,taxInformation:s}}const jt=({title:e,children:t,headingLevel:n="h2",sx:a})=>(0,S.tZ)(o.Zb,{sx:{...a},children:(0,S.BX)(o.kC,{flexDirection:"column",flexWrap:"nowrap",sx:{height:"100%"},children:[e?"string"==typeof e?(0,S.tZ)(o.X6,{as:n,color:"ds.text.neutral.standard",children:e}):e:null,(0,S.tZ)("div",{sx:{flex:1},children:t})]})});var Ft,Gt,Vt=n(16782);const Ht=({selectedOffer:e,currency:t,costData:n})=>{const{translate:a}=(0,p.Z)(),{isLoading:i,taxInformation:r}=qt({total:n.renewalPrice}),{loading:s,billingCountry:c}=Z();if(s)return Ft||(Ft=(0,S.tZ)(o.ZX,{}));const d="US"===c?"team_account_teamplan_changeplan_order_summary_footer_renewal":"team_account_teamplan_changeplan_order_summary_renewal_vat",_=!i&&void 0!==r?.amount&&r?.amount>0,u=_&&r?.amount?n.renewalPrice+r.amount:void 0,g=_?d:"team_account_teamplan_changeplan_order_summary_footer_header",h=_?u:n.renewalPrice;return(0,S.BX)(o.kC,{sx:{flexDirection:"column",gap:"12px",padding:"10px"},children:[e&&t&&h?(0,S.BX)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:[a(g,{price:a.price(t,h/100),date:a.shortDate(n.renewalDate,Vt.qG.ll)}),Gt||(Gt=(0,S.tZ)("br",{})),a("team_post_trial_checkout_cancel_subscription")]}):null,(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:a.markup("team_account_teamplan_changeplan_order_summary_footer_markup",{privacyPolicyUrl:ee.Bz,termsUrl:ee.sz},{linkTarget:"_blank",onLinkClicked:e=>{e===ee.Bz?(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.PrivacyPolicy],chosenAction:l.CallToAction.PrivacyPolicy,hasChosenNoAction:!1})):e===ee.sz&&(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.TermsOfService],chosenAction:l.CallToAction.TermsOfService,hasChosenNoAction:!1}))}})})]})},Wt={display:"flex",alignItems:"center",padding:"12px 8px",borderRadius:"8px",justifyContent:"space-between",backgroundColor:"ds.container.agnostic.neutral.quiet"},$t=({selectedOffer:e,currency:t,costData:n})=>{const{translate:a}=(0,p.Z)();return e&&t?(0,S.BX)("div",{sx:Wt,"data-testid":"order-summary-plan-name",children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.brand.quiet",children:Xt(e)?a("team_account_teamplan_changeplan_plans_business_name"):a("team_account_teamplan_changeplan_plans_team_name")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.brand.quiet",children:a("team_post_trial_checkout_order_summary_seat_year",{cost:a.price(t,n.seatPrice/100,{notation:"compact"})})})]}):(0,S.tZ)("div",{sx:Wt,children:(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.brand.quiet",children:a("team_account_teamplan_changeplan_order_summary_select_plan")})})},Kt="team_account_teamplan_changeplan_order_summary_promo_code_cta",Yt=({setShowInput:e})=>{const{translate:t}=(0,p.Z)();return(0,S.tZ)(o.kC,{sx:{padding:"0 10px"},children:(0,S.tZ)(o.zx,{"aria-label":t(Kt),"data-testid":"promo_code_button_enter",intensity:"supershy",onClick:()=>e?e(!0):null,size:"small",sx:{padding:0},children:(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.link",color:"ds.text.brand.standard",children:t(Kt)})})})};var Qt;const Jt=({hasError:e,isLoading:t,handleClear:n,handleSubmit:a,onChange:i,promoCode:r})=>{const{translate:s}=(0,p.Z)();return(0,S.tZ)(o.kC,{gap:"6px",fullWidth:!0,sx:{padding:"0 10px"},children:(0,S.tZ)("div",{sx:{flex:1},children:(0,S.tZ)(o.qo,{actions:e?[(0,S.tZ)(o.zx,{"data-testid":"promo_code_button_clear",icon:Qt||(Qt=(0,S.tZ)(o.JO,{name:"ActionClearContentFilled"})),intensity:"supershy",layout:"iconOnly",mood:"danger",onClick:n},"error")]:[(0,S.tZ)(o.zx,{disabled:t,"data-testid":"promo_code_button_submit",intensity:"quiet",onClick:a,children:s("team_account_teamplan_changeplan_order_summary_promo_code_apply")},"apply")],autoFocus:!0,"data-testid":"promo_code_input",error:e,feedback:e?{id:"promo_code_error",text:s("team_account_teamplan_changeplan_order_summary_promo_code_invalid_error")}:void 0,label:s("team_account_teamplan_changeplan_order_summary_promo_code_label"),labelPersists:!0,onChange:i?e=>i(e?.target?.value):void 0,value:r})})})},en=({promoCode:e,handleClear:t,handleSubmit:n,hasError:a,isEditing:i,isLoading:r,showInput:s,setShowInput:o,onChange:l})=>!e||s||i?s||i?(0,S.tZ)(Jt,{hasError:a,isLoading:r,handleClear:t,handleSubmit:n,onChange:l,promoCode:e}):(0,S.tZ)(Yt,{setShowInput:o}):null;var tn,nn,an;const rn=({currency:e,currentSeats:t,currentActiveSeats:n,currentSpaceTier:a,selectedSeatsQty:i,selectedOffer:s,email:d,emailValid:_,onSuccess:u,onError:h,setSelectedSeatsQty:y,setOrderSummaryData:b,handleClickAddBillingInfo:x,paymentMethodType:f,taxCopy:v})=>{const{translate:C}=(0,p.Z)(),{billingInformation:E}=(0,g.C)({b2c:!1}),Z=E?.last4,{changePromoCode:D,clearPromoCode:T,currentPromoCode:k,hasError:I,isLoading:A,promoCode:w,setShowInput:N,showInput:O,teamOffers:R,validatePromoCode:M}=function({selectedOffer:e,currentSeats:t,selectedSeatsQty:n}){const[a,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[l,d]=(0,r.useState)(),[_,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[y,b]=(0,r.useState)(n),[x,S]=(0,r.useState)(e),{data:f,status:v}=(0,c.k)(St.K,"getTeamOffers",{couponCode:s}),C=(0,r.useCallback)((()=>{if(!s)return!1;if(v===L.rq.Error&&!f)return h(!1),u(!0),p(!0),!1;if(v===L.rq.Loading&&!f)return h(!0),!1;const t=Mt({offer:f.businessOffer,selectedSeatsQty:n}),a=t.price!==t.equivalentPrice,r=Mt({offer:f.teamOffer,selectedSeatsQty:n}),o=r.price!==r.equivalentPrice;return(e&&Xt(e)?a:o)?(h(!1),i(s),d((()=>f)),u(!1),p(!1),!0):(h(!1),u(!0),p(!0),!1)}),[s,v,f,t,n,e]);return(0,r.useEffect)((()=>{n!==y&&(b(n),C())}),[y,n,C]),(0,r.useEffect)((()=>{e?.name!==x?.name&&(S(e),C())}),[e,x,C]),{cancelPromoCode:()=>{_?(i(""),o("")):o(a),u(!1),p(!1)},changePromoCode:e=>{o(e),_&&u(!1)},clearPromoCode:()=>{i(""),o(""),d(void 0),u(!1)},currentPromoCode:s,hasError:_,isLoading:g,promoCode:a,setIsLoading:h,setShowInput:p,showInput:m,teamOffers:l,validatePromoCode:C}}({selectedOffer:s,selectedSeatsQty:i,currentSeats:t}),{isSaving:B,costData:U,changeTierMidCycle:X,isTaxLoading:z,isProratedDiscountLoading:j,isMidCycleGracePeriod:F}=function({selectedOffer:e,currentSeats:t,currentActiveSeats:n,selectedSeatsQty:a,discountedTeamOffers:i,promoCode:s,email:o,onSuccess:l,onError:d}){var _,u;const[m,g]=(0,r.useState)(!1),{translate:h}=(0,p.Z)(),{changeTierMidcycle:y}=(0,q.u)(St.K),b=!!s,x=!!e&&Xt(e),S=!!e&&Ut(e),f=i&&e?x?i.businessOffer:S?i.teamOffer:i.starterOffer:e,{isLoading:v,midCycleTierUpgradePrice:C,isMidCycleGracePeriod:E}=function({newTotalNumberOfSeats:e,planName:t,onError:n}){const a=(0,c.k)(St.K,"getMidcycleTierUpgradePrice",{newTotalNumberOfSeats:e,newPlan:null!=t?t:""},{initialSkip:!e||!t});switch(a.status){case L.rq.Loading:return{isLoading:!0};case L.rq.Error:return n?.(),{isLoading:!1,isMidCycleGracePeriod:"NoMtuDuringGracePeriod"===a.error.tag};case L.rq.Success:return{isLoading:!1,midCycleTierUpgradePrice:a.data}}}({newTotalNumberOfSeats:a,planName:f?.name}),Z=f?Mt({offer:f,selectedSeatsQty:a}):null,D=null!=(_=Z?.equivalentPrice)?_:0,T=null!=(u=Z?.price)?u:0,k=b?D:T,I=(a-t)*k,A=Math.min(t,a)*k,w=a*k,N=w-(void 0!==T?a*T:w),O=void 0!==C?.discountAmount?w+C.discountAmount:void 0,R=O?O-N:O,M=C?.nextBillingDateUnix?(0,Rt.Z)(C.nextBillingDateUnix):(0,Lt.Z)(new Date,1),{isLoading:B,taxInformation:P}=qt({total:null!=R?R:0}),U=B||void 0===P?.amount?0:P.amount,X=B||void 0===P?.amount||void 0===R?void 0:R+U;return{isSaving:m,changeTierMidCycle:async e=>{if(void 0===R||!P||!f)return void d("Error with retrieving midCycleTierUpgradePrice, tax information or target offer");g((()=>!0));const t=await y({amountToPay:R,taxes:U,planId:f.name,couponCode:e||s,newTotalNumberOfSeats:a,billingContactEmail:""!==o?o:void 0});if(g((()=>!1)),t.error){const e=(e=>{switch(e){case"PaymentMeanIsNotCreditCard":return"The team does not have a credit card payment mean";case"CurrentPlanStartDateInFuture":return"The current plan start date must be in the past";case"ChangeTierMidCycleError":return"Team is ineligible to change tier mid cycle";case"PaymentMeanIsNotInvoice":return"Team Payment mean is not invoice";case"ChangeTierAmountTooExpensive":return"The amount to pay entered is more than 10 times the recommended price";case"ErrorCalculatingTierChange":return"Unable to calculate prorated discount for mid cycle tier change";case"InsufficientAmount":return"Credit Card payment must be zero or more than 50 cents";case"AssignedPlanSameTierAsCurrentPlan":return"The assigned plan tier cannot be the same as the team's current plan";case"SalesTaxMismatch":return"Tax amount sent does not correspond to the supposed taxed amount";case"NotBillingAdmin":return"User is not a billing admin";default:return h("team_account_teamplan_changeplan_error_generic")}})(t.error.tag);d(e)}else l()},isMidCycleGracePeriod:null!=E&&E,isProratedDiscountLoading:v,isTaxLoading:B,costData:{seatPrice:k,currentSeats:t,currentActiveSeats:n,totalSeats:a,addedSeats:a>=t?a-t:0,removedSeats:a<=t?t-a:0,upgradedSeatsPrice:A,addedSeatsPrice:I,subtotal:w,proratedDiscount:C?.discountAmount,tax:U,pretaxTotal:O,promoPrice:N,total:X,renewalPrice:w,renewalDate:M}}}({selectedOffer:s,discountedTeamOffers:R,currentSeats:t,currentActiveSeats:n,selectedSeatsQty:i,promoCode:w,email:d,onSuccess:u,onError:h}),[G,V]=(0,r.useState)(!0),[H,W]=(0,r.useState)(!1),$=U?.promoPrice,K=U?.renewalPrice,Y="invoice"===f?"team_post_trial_checkout_request_purchase_order":"team_account_teamplan_changeplan_order_summary_confirm_and_pay",Q=U.total&&e?(0,S.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.small",color:"ds.text.neutral.catchy",children:C.price(e,U.total/100)}):null;return(0,S.tZ)(jt,{title:C("team_account_teamplan_changeplan_order_summary_header"),children:(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{marginTop:"16px"},children:[(0,S.tZ)($t,{selectedOffer:s,currency:e,costData:U}),(0,S.tZ)(wt,{costData:U,currency:e,currentSpaceTier:a,handleClear:()=>{W(!1),T()},isAmountAllowed:G,isEditing:H,promoCode:w,promoPrice:$,selectedOffer:s,setIsEditing:W,setSelectedSeatsQty:y,signalAmountValidHandler:e=>{V(e)},subTotal:K,taxCopy:v}),s&&e?(0,S.tZ)(en,{handleClear:T,handleSubmit:()=>{W(!1),M()},hasError:I,isEditing:H,isLoading:A,onChange:D,promoCode:k,showInput:O,setShowInput:N}):null,tn||(tn=(0,S.tZ)(Ct,{})),(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:C("team_account_teamplan_total")}),value:!e||z||j||!s?nn||(nn=(0,S.tZ)(o.ZX,{size:23,mood:"neutral"})):Q}),B?(0,S.tZ)(o.zx,{size:"large",sx:{width:"100%"},type:"button",disabled:!0,children:an||(an=(0,S.tZ)(o.ZX,{}))}):(0,S.BX)(S.HY,{children:[F&&(0,S.tZ)(o.ke,{title:C("team_account_teamplan_changeplan_error_mtu_grace"),mood:"danger"}),(0,S.tZ)(o.zx,{"data-testid":"btn-confirm-and-pay",size:"large",sx:{width:"100%"},type:"button",disabled:!s||!_||A||!G||F||f===Ot.CREDIT_CARD&&!Z,onClick:()=>"invoice"===f?((0,m.Kz)(new l.UserClickEvent({button:l.Button.RequestPurchaseOrder})),void(0,P.Yo)(ee.nq)):(async()=>{(!I&&w===k||await M())&&((0,m.Kz)(new l.UserClickEvent({clickOrigin:l.ClickOrigin.OrderSummary,button:l.Button.ConfirmUpgrade})),X(k),b(U))})(),children:C(Y)})]}),Z?(0,S.tZ)(Ht,{selectedOffer:s,currency:e,costData:U}):(0,S.BX)(o.kC,{flexDirection:"row",justifyContent:"space-between",alignItems:"baseline",sx:{marginTop:"8px"},children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.warning.quiet",children:C(i>20?"team_post_trial_checkout_payment_method_required":"team_post_trial_checkout_credit_card_required")}),(0,S.tZ)(o.Qj,{color:"ds.text.brand.standard",isExternal:!0,onClick:x,sx:{marginRight:"8px"},children:C("team_post_trial_checkout_add_credit_card")})]})]})})},sn=()=>{const{translate:e}=(0,p.Z)(),t=(0,fe.Y)(),n=ft();if(!n||t.status!==s.rq.Success)return{hasLimitedOffer:!1};const a=!(0,Se.NG)(t.data),{businessOffer:i}=n,r=Bt({offer:i}),o=Bt({offer:i,priceTarget:"equivalentPrice"});return{hasLimitedOffer:a&&r!==o,translatedPrice:e.price(i.currency,r/100,{notation:"compact"}),translatedEquivalentPrice:e.price(i.currency,o/100,{notation:"compact"})}};var on,ln,cn,dn;const _n=({plan:e,handleSelectClick:t,selected:n})=>{const{translate:a}=(0,p.Z)();if(!e)return null;const{currentPlan:i,currentTrial:r,limitedOffer:s,heading:l,price:c,equivalentPrice:d,planName:_,footer:u,priceDescription1:m,priceDescription2:g,features:h,infobox:y,showRecommendedBadge:b,isStandardPlanRestricted:x}=e;return(0,S.BX)(o.kC,{flexDirection:"column",sx:{minHeight:"480px",display:"flex",flexDirection:"column",borderRadius:"4px",border:"1px solid "+(i||x?"transparent":n?"ds.border.brand.standard.active":"ds.border.neutral.quiet.idle"),flexGrow:"1",flexShrink:0,width:"188px",backgroundColor:i||x?"ds.container.expressive.neutral.supershy.hover":null,padding:"16px",gap:"16px"},children:[(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",children:[(0,S.BX)(o.kC,{flexDirection:"column",gap:"4px",children:[(0,S.tZ)(o.nv,{"data-testid":`plan-heading-${_}`,textStyle:"ds.body.standard.strong",children:a(l.key)}),(0,S.BX)("div",{sx:{minHeight:"16px"},children:[i&&(0,S.tZ)(o.Ct,{label:a("team_account_teamplan_changeplan_plans_plan_current")}),r&&(0,S.tZ)(o.Ct,{label:a("team_account_teamplan_changeplan_plans_plan_current_trial")}),b&&(0,S.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:a("team_account_teamplan_changeplan_plans_plan_recommended")}),s&&(0,S.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:a("team_account_teamplan_changeplan_plans_plan_limited_offer")})]})]}),(0,S.BX)(o.kC,{flexDirection:"column",children:[(0,S.BX)(o.kC,{gap:"4px",children:["string"==typeof c?(0,S.tZ)(o.nv,{color:i?"ds.text.neutral.quiet":"ds.text.neutral.catchy",textStyle:"ds.specialty.spotlight.medium",children:c}):null===c?on||(on=(0,S.tZ)(o.ZX,{size:44,mood:"neutral"})):(0,S.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.small",color:i?"ds.text.neutral.quiet":"ds.text.neutral.catchy",sx:{marginBottom:"10px"},children:a(c.key)}),d&&(0,S.BX)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.quiet",sx:{whiteSpace:"break-spaces"},children:[a("team_account_teamplan_changeplan_plans_previous_price"),ln||(ln=(0,S.tZ)("br",{})),(0,S.tZ)("span",{sx:{textDecoration:"line-through"},children:d})]})]}),(0,S.BX)(o.kC,{flexDirection:"column",sx:{height:"48px"},children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.strong",color:"ds.text.neutral.quiet",children:a(m.key,m.variables)}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.strong",color:"ds.text.neutral.quiet",children:a(g.key,g.variables)})]})]})]}),y?(0,S.tZ)(o.ke,{mood:i?"neutral":"brand",title:a(y.key),description:y.link?(0,S.tZ)(o.Qj,{href:y.link,mood:"neutral",isExternal:!0,children:a("team_account_teamplan_changeplan_plans_learn_more")}):null}):null,x?(0,S.tZ)(o.ke,{mood:"neutral",title:a("team_post_trial_checkout_pricing_tile_standard_plan_restricted_infobox")}):null,x?null:n?(0,S.tZ)(o.zx,{disabled:!0,mood:"brand",intensity:"quiet",size:"small",type:"button",fullsize:!0,"data-testid":`btn-${_}-selected`,layout:"iconLeading",icon:"CheckmarkOutlined",children:a("team_account_teamplan_changeplan_plans_selected")}):t?(0,S.tZ)(o.zx,{mood:"brand",intensity:"quiet",size:"small",onClick:t,fullsize:!0,"data-testid":`btn-${_}-select`,children:a("team_account_teamplan_changeplan_plans_select")}):"businessPlus"===_?(0,S.tZ)(o.zx,{mood:"brand",intensity:"quiet",size:"small",onClick:()=>{(0,P.Yk)(ee.q_,{medium:"checkout",campaign:"business-plus-upgrade",source:"product",content:"trial"})},fullsize:!0,children:a("team_post_trial_checkout_plan_selection_biz_plus_card_button_text")}):y?null:(0,S.tZ)("div",{sx:{height:"32px",width:"100%"}}),(0,S.tZ)(o.kC,{flexDirection:"column",gap:"8px",children:h.map((({key:e,icon:t,variables:n,loading:r})=>(0,S.BX)(o.kC,{sx:{display:"flex",alignItems:"center",gap:"9px",flexWrap:"nowrap",strong:{color:i?null:o.O9.lightTheme.ds.text.neutral.catchy}},children:[(0,S.tZ)("div",{sx:{width:"10px"},children:"check"===t?cn||(cn=(0,S.tZ)(o.JO,{name:"CheckmarkOutlined",size:"xsmall"})):dn||(dn=(0,S.tZ)(o.JO,{name:"ActionAddOutlined",size:"xsmall"}))}),r?(0,S.tZ)(o.kC,{alignItems:"center",justifyContent:"center",sx:{flexGrow:"1"},children:(0,S.tZ)(o.ZX,{size:32,color:o.O9.lightTheme.ds.text.neutral.catchy})}):(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e.includes("markup")?a.markup(e,n):a(e,n)})]},e)))}),s?(0,S.tZ)(o.ke,{mood:"brand",title:a("team_account_teamplan_changeplan_plans_limited_price_infobox")}):null,u?(0,S.tZ)(o.kC,{alignItems:"center",gap:"9px",sx:{paddingLeft:"20px"},children:(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.strong",color:"ds.text.neutral.quiet",children:u.key.includes("markup")?a.markup(u.key):a(u.key)})}):null]})},un={standard:{planName:"standard",price:null,heading:{key:"manage_subscription_plan_name_standard"},priceDescription1:{key:"team_post_trial_checkout_plan_selection_standard_card_seats"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[{icon:"check",key:"team_post_trial_checkout_plan_selection_standard_card_feature_coverage"},{icon:"check",key:"team_account_teamplan_changeplan_plans_passwords"},{icon:"check",key:"team_account_teamplan_changeplan_plans_collections"},{icon:"check",key:"team_account_teamplan_changeplan_plans_admin_console"},{icon:"check",key:"team_post_trial_checkout_plan_selection_standard_card_feature_health_score"},{icon:"check",key:"team_account_teamplan_changeplan_plans_standard_activity_logs"},{icon:"check",key:"team_account_teamplan_changeplan_plans_account_recovery"},{icon:"check",key:"team_audit_log_category_dark_web_monitoring"}]},business:{planName:"business",price:null,heading:{key:"team_account_teamplan_changeplan_plans_business_name_V2"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[{key:"team_post_trial_checkout_plan_selection_biz_card_feature_everything_in_standard_markup",icon:"check"},{key:"team_account_teamplan_changeplan_plans_unlimited_seats"},{key:"team_post_trial_checkout_plan_selection_biz_card_feature_sharing"},{key:"team_account_teamplan_changeplan_plans_phishing"},{key:"team_account_teamplan_changeplan_plans_sso_integration"},{key:"team_account_teamplan_changeplan_plans_scim_provisioning"},{key:"team_post_trial_checkout_plan_selection_biz_card_feature_siem"},{key:"team_account_teamplan_changeplan_plans_activity_logs"},{key:"team_post_trial_checkout_plan_selection_biz_card_feature_policies"},{key:"team_account_teamplan_changeplan_plans_vpn_for_wifi_protection"},{key:"team_account_teamplan_changeplan_plans_free_friends_family_plan"}]}},mn=(e={})=>({...un,...e}),pn={standard:[{icon:"check",key:"team_account_teamplan_changeplan_plans_coverage"},{icon:"check",key:"team_account_teamplan_changeplan_plans_passwords"},{icon:"check",key:"team_account_teamplan_changeplan_plans_collections"},{icon:"check",key:"team_account_teamplan_changeplan_plans_admin_console"},{icon:"check",key:"team_account_teamplan_changeplan_plans_password_dashboard"},{icon:"check",key:"team_account_teamplan_changeplan_plans_standard_activity_logs"},{icon:"check",key:"team_account_teamplan_changeplan_plans_account_recovery"},{icon:"check",key:"team_audit_log_category_dark_web_monitoring"}],standardUpgradeBusiness:[{key:"team_account_teamplan_changeplan_plans_everything_in_standard_markup",icon:"check"},{icon:"check",key:"team_account_teamplan_changeplan_plans_unlimited_seats"},{icon:"check",key:"team_account_teamplan_changeplan_plans_sharing_controls"},{icon:"check",key:"team_account_teamplan_changeplan_plans_phishing"},{icon:"check",key:"team_account_teamplan_changeplan_plans_sso_integration"},{icon:"check",key:"team_account_teamplan_changeplan_plans_scim_provisioning"},{icon:"check",key:"team_account_teamplan_changeplan_plans_siem"},{icon:"check",key:"team_account_teamplan_changeplan_plans_advanced_activity_logs"},{icon:"check",key:"team_account_teamplan_changeplan_plans_security_policies"},{icon:"check",key:"team_account_teamplan_changeplan_plans_vpn_for_wifi_protection"},{icon:"check",key:"team_account_teamplan_changeplan_plans_free_family"}],starter:[{icon:"check",key:"team_account_teamplan_changeplan_plans_unlimited_passwords"},{icon:"check",key:"team_account_teamplan_changeplan_plans_secure_sharing"},{icon:"check",key:"team_account_teamplan_changeplan_plans_business_and_personal_spaces"},{icon:"check",key:"team_account_teamplan_changeplan_plans_dark_web_insights"}],team:[{key:"team_account_teamplan_changeplan_plans_team_unlimited_users",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_security_dashboard",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_policy_management",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_advanced_reporting",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_group_sharing",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_active_directory_integration",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_dark_web_insights",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_vpn_via_hotspot_shield",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_activity_logs",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_real_time_phishing_alerts",icon:"check"}],teamUpgradeBusiness:[{key:"team_account_teamplan_changeplan_plans_everything_in_team_markup",icon:"check"},{key:"team_account_teamplan_changeplan_plans_single_sign_on_integration",icon:"check"},{key:"team_account_teamplan_changeplan_plans_scim_provisioning",icon:"check"},{key:"team_account_teamplan_changeplan_plans_siem_integration",icon:"check"},{key:"team_account_teamplan_changeplan_plans_prohibit_sharing_outside_company",icon:"check"},{key:"team_account_teamplan_changeplan_plans_secrets_management",icon:"check"},{key:"team_account_teamplan_changeplan_plans_free_friends_family_plan",icon:"check"}],business:[{key:"team_account_teamplan_changeplan_plans_everything_in_starter_markup",icon:"check"},{icon:"check",key:"team_account_teamplan_changeplan_plans_unlimited_seats"},{icon:"check",key:"team_account_teamplan_changeplan_plans_sso_integration"},{icon:"check",key:"team_account_teamplan_changeplan_plans_scim_provisioning"},{icon:"check",key:"team_account_teamplan_changeplan_plans_activity_logs"},{icon:"check",key:"team_account_teamplan_changeplan_plans_enterprise"},{icon:"check",key:"team_account_teamplan_changeplan_plans_free_friends_family_plan"},{icon:"check",key:"team_account_teamplan_changeplan_plans_phone_support"},{icon:"check",key:"team_account_teamplan_changeplan_plans_vpn_for_wifi_protection"},{icon:"check",key:"team_account_teamplan_changeplan_plans_phishing"}],businessPlus:[{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_everything_markup",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_hundred_plus",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_nudges_markup",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_risk_detection_markup",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_deployment",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_security",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_onboarding",icon:"check"}]},gn=(e,t,n)=>{const{translate:a}=(0,p.Z)(),i=e?.businessOffer?.currency,{businessSeatPrice:r,starterSeatPrice:s,teamSeatPrice:o,standardMonthlyPrice:l,standardYearlyPrice:c}=(e=>({businessSeatPrice:e?.businessOffer?Bt({offer:e.businessOffer}):null,starterSeatPrice:e?.starterOffer?Bt({offer:e.starterOffer}):null,teamSeatPrice:e?.teamOffer?Bt({offer:e.teamOffer}):null,standardMonthlyPrice:e?.entryLevelOffer?Pt({offer:e.entryLevelOffer,selectedSeatsQty:10}):null,standardYearlyPrice:e?.entryLevelOffer?(({offer:e,selectedSeatsQty:t})=>Mt({offer:e,selectedSeatsQty:t}).price*t)({offer:e.entryLevelOffer,selectedSeatsQty:10}):null}))(e),d=(u=e?.starterOffer,u?u.priceRanges[1].startMembers-1:0);var u;const m=((e,t,n,a)=>{const{currency:i,businessSeatPrice:r,starterSeatPrice:s,teamSeatPrice:o,standardMonthlyPrice:l,standardYearlyPrice:c,starterSeats:d,monthlyStarterPrice:u}=e,m=e=>((e,t,n)=>e&&t?n.price(t,e/100,{notation:e/100%1==0?"compact":"standard"}):null)(e,i,t);return{standard:{...un.standard,currentPlan:a===_.lD.Standard,price:m(l),priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_month_members"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_at_annually",variables:{yearlyPrice:m(c)}},infobox:{key:"team_account_teamplan_changeplan_plans_upgrade_infobox"},features:[...pn.standard]},standardUpgradeBusiness:{planName:"business",price:m(r),heading:{key:"team_account_teamplan_changeplan_plans_business_name_V2"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[...pn.standardUpgradeBusiness]},team:{currentPlan:!0,planName:"team",price:m(o),heading:{key:"team_account_teamplan_changeplan_plans_name_V2"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},infobox:{key:"team_account_teamplan_changeplan_plans_teams_infobox",link:"https://support.dashlane.com/hc/en-us/articles/18804218734354-FAQ-about-the-changes-to-Team-plan-pricing"},features:[...pn.team]},teamUpgradeBusiness:{planName:"business",price:m(r),heading:{key:"team_account_teamplan_changeplan_plans_business_name_V2"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[...pn.teamUpgradeBusiness]},starter:{currentPlan:!0,planName:"starter",price:m(s),heading:{key:"team_account_teamplan_changeplan_plans_starter_name"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_monthly_at",variables:{numberSeats:d,monthlyPrice:m(u)}},features:[{key:"team_account_teamplan_changeplan_plans_seats_flat_rate_markup",icon:"check",loading:!s,variables:{numberSeats:d,monthlyPrice:m(u)}},...pn.starter],footer:{key:"team_account_teamplan_changeplan_plans_starter_upgrade_markup"}},business:{...un.business,price:m(r),equivalentPrice:n.hasLimitedOffer&&r&&i?n.translatedEquivalentPrice:null,limitedOffer:n.hasLimitedOffer,features:[...pn.business]},businessPlus:{planName:"businessPlus",price:{key:"team_post_trial_checkout_plan_selection_biz_plus_card_price"},heading:{key:"team_post_trial_checkout_plan_selection_biz_plus_card_title"},priceDescription1:{key:"team_post_trial_checkout_plan_selection_biz_plus_card_coverage"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[...pn.businessPlus]}}})({currency:i,businessSeatPrice:r,starterSeatPrice:s,teamSeatPrice:o,standardMonthlyPrice:l,standardYearlyPrice:c,starterSeats:d,monthlyStarterPrice:e?.starterOffer&&s?d*s:0},a,n,t);return mn(m)},hn=({selectedOffer:e,handleSelection:t,teamOffers:n,currentSpaceTier:a})=>{const{translate:i}=(0,p.Z)(),r=sn(),s=gn(n,a,r),l=a===_.lD.Starter,c=a===_.lD.Standard,d=a===_.lD.Team,{businessOffer:u}=n;return(0,S.tZ)(jt,{headingLevel:"h1",title:i("team_account_teamplan_changeplan_plans"),children:(0,S.tZ)(o.kC,{gap:"16px",flexWrap:"nowrap",sx:{paddingTop:"16px"},children:c&&s.standardUpgradeBusiness?(0,S.BX)(S.HY,{children:[(0,S.tZ)(_n,{plan:s.standard}),s.standardUpgradeBusiness&&(0,S.tZ)(_n,{plan:s.standardUpgradeBusiness,handleSelectClick:()=>t(u),selected:!!e&&e.name===u.name}),s.businessPlus&&(0,S.tZ)(_n,{plan:s.businessPlus})]}):l&&s.starter?(0,S.BX)(S.HY,{children:[s.starter&&(0,S.tZ)(_n,{plan:s.starter}),(0,S.tZ)(_n,{plan:s.business,handleSelectClick:()=>t(u),selected:!!e&&e.name===u.name})]}):d&&s.team?(0,S.BX)(S.HY,{children:[s.team&&(0,S.tZ)(_n,{plan:s.team}),s.teamUpgradeBusiness&&(0,S.tZ)(_n,{plan:s.teamUpgradeBusiness,handleSelectClick:()=>t(u),selected:!!e&&e.name===u.name}),s.businessPlus&&(0,S.tZ)(_n,{plan:s.businessPlus})]}):(0,S.BX)(S.HY,{children:[(0,S.tZ)(_n,{plan:s.standard}),(0,S.tZ)(_n,{plan:s.business,handleSelectClick:()=>t(u),selected:!!e&&e.name===u.name}),s.businessPlus&&(0,S.tZ)(_n,{plan:s.businessPlus})]})})})};var yn,bn=n(48827),xn=n(10051);const Sn=({email:e,emailValid:t,setEmail:n,setEmailValid:a})=>{const{translate:i}=(0,p.Z)(),s=(0,bn.G)(),[l,c]=r.useState(!1);return s?.email?(0,S.BX)(jt,{title:i("team_account_teamplan_changeplan_billing_contact_header"),children:[yn||(yn=(0,S.tZ)("br",{})),(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",className:"automation-tests-tac-billing",children:i.markup("team_account_teamplan_changeplan_billing_contact_copy_markup",{billContactEmail:s.email})}),(0,S.tZ)("div",{style:{margin:"20px 0px"},children:(0,S.tZ)(o.XZ,{"data-testid":"additionalEmailCheckbox",label:i("team_account_teamplan_changeplan_billing_contact_checkbox_label"),checked:l,onChange:e=>{n(""),a(!0),c(e.currentTarget.checked)}})}),l?(0,S.tZ)(o.oi,{"data-testid":"additionalEmailInput",type:"text",onChange:e=>n(e.currentTarget.value),onBlur:e=>(e=>{(0,xn.vV)(e.currentTarget.value)?a(!0):a(!1)})(e),value:e,feedback:t?void 0:{id:"error-message",text:i("team_account_teamplan_changeplan_billing_contact_input_warning"),type:"error"}}):null]}):null};var fn,vn,Cn,En,Zn,Dn;const Tn=({targetPlan:e})=>{const{translate:t}=(0,p.Z)(),{data:n}=(({targetPlan:e})=>{const{routes:t}=(0,i.Xo)(),n={DIRECTORY_SYNC:`${t.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}`,POLICIES:`${t.teamSettingsRoutePath}${a.B9.POLICIES}`,SSO:`${t.teamIntegrationsRoutePath}${a.Nr.SSO}`};return{data:{team:{header:"team_account_teamplan_changeplan_success_team_header",description:"team_account_teamplan_changeplan_success_team_description",alert:"team_account_teamplan_changeplan_success_team_alert",features:[{header:"team_account_teamplan_changeplan_success_features_vpn_header",description:"team_account_teamplan_changeplan_success_features_vpn_description",icon:fn||(fn=(0,S.tZ)(re.Qut,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_turn_on_vpn_access",link:n.POLICIES},{external:!0,mood:"neutral",intensity:"quiet",content:"team_account_teamplan_changeplan_success_features_actions_see_setup_guide",link:"https://support.dashlane.com/hc/articles/360000037900#title1"}]},{header:"team_account_teamplan_changeplan_success_features_protection_header",description:"team_account_teamplan_changeplan_success_features_protection_description",icon:vn||(vn=(0,S.tZ)(re.c6E,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_add_seats",link:`${t.teamAccountRoutePath}?showSeatsDialog=true`}]}]},business:{header:"team_account_teamplan_changeplan_success_business_header",description:"team_account_teamplan_changeplan_success_business_description",alert:"team_account_teamplan_changeplan_success_business_alert",features:[{header:"team_account_teamplan_changeplan_success_sso_header",description:"team_account_teamplan_changeplan_success_sso_copy",icon:Cn||(Cn=(0,S.tZ)(re.oEX,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_start_setup",link:n.SSO},{external:!0,mood:"neutral",intensity:"quiet",content:"team_account_teamplan_changeplan_success_features_actions_see_setup_guide",link:"https://support.dashlane.com/hc/articles/360015973719-Set-up-SSO-and-SCIM-with-Azure-AD"}]},{header:"team_account_teamplan_changeplan_success_features_scim_header",description:"team_account_teamplan_changeplan_success_features_scim_description",icon:En||(En=(0,S.tZ)(re.kpp,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_start_setup",link:n.DIRECTORY_SYNC},{external:!0,mood:"neutral",intensity:"quiet",content:"team_account_teamplan_changeplan_success_features_actions_see_setup_guide",link:"https://support.dashlane.com/hc/articles/360015973719#h_01FTXPSRCV3CY1QVY1B5S5TD0J"}]},{header:"team_account_teamplan_changeplan_success_features_friends_and_family_header",description:"team_account_teamplan_changeplan_success_features_friends_and_family_description",icon:Zn||(Zn=(0,S.tZ)(re.c6E,{size:24})),actions:[{external:!0,mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_learn_more",link:"https://www.dashlane.com/plans/family"}]},{header:"team_account_teamplan_changeplan_success_features_phone_support_header",description:"team_account_teamplan_changeplan_success_features_phone_support_description",icon:Dn||(Dn=(0,S.tZ)(re.qWc,{size:24})),actions:[{external:!0,mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_schedule_a_call",link:"https://calendly.com/dashlane-support/call_back_form",logEvent:new l.UserCallToActionEvent({callToActionList:[l.CallToAction.ContactPhoneSupport],chosenAction:l.CallToAction.ContactPhoneSupport,hasChosenNoAction:!1})}]}]}}[e]}})({targetPlan:e}),{alert:s,show:c}=(0,re.VYq)({message:t(n.alert),severity:re.BLW.SUCCESS,size:re.k3y.SMALL,dismissDelay:5e3});return(0,r.useEffect)((()=>{c()}),[]),(0,S.BX)(S.HY,{children:[(0,S.tZ)("div",{style:{bottom:"12px",position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,width:"600px"},children:s}),(0,S.BX)(jt,{title:t(n.header),sx:{width:"632px",padding:"32px",borderRadius:"8px"},children:[(0,S.tZ)("div",{style:{marginTop:"8px"},children:(0,S.tZ)(re.nvN,{size:"medium",color:o.O9.lightTheme.ds.text.neutral.quiet,children:t(n.description)})}),(0,S.tZ)(o.kC,{sx:{marginTop:"32px",display:"flex",flexDirection:"column",borderBottom:`1px solid ${o.O9.lightTheme.ds.border.neutral.quiet.idle}`},children:n.features.map((e=>(0,S.tZ)(o.kC,{flexDirection:"column",sx:{display:"flex",flexDirection:"column",borderTop:`1px solid ${o.O9.lightTheme.ds.border.neutral.quiet.idle}`,padding:"32px 0"},children:(0,S.BX)(o.kC,{gap:"16px",flexWrap:"nowrap",children:[(0,S.tZ)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:"40px",height:"40px",borderRadius:"8px",backgroundColor:o.O9.lightTheme.ds.container.expressive.brand.quiet.idle},children:e.icon}),(0,S.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,S.tZ)(re.nvN,{bold:!0,color:o.O9.lightTheme.ds.text.neutral.catchy,children:t(e.header)}),(0,S.tZ)(re.nvN,{size:"x-small",color:o.O9.lightTheme.ds.text.neutral.quiet,children:t(e.description)}),(0,S.tZ)(o.kC,{gap:"8px",children:e.actions.map((e=>e.external?(0,S.tZ)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",children:(0,S.tZ)(o.zx,{mood:e.mood,intensity:e.intensity,size:"small",type:"button",onClick:()=>{e.logEvent&&(0,m.Kz)(e.logEvent)},children:t(e.content)})},e.content):(0,S.tZ)(i.rU,{to:e.link,children:(0,S.tZ)(o.zx,{mood:e.mood,intensity:e.intensity,size:"small",type:"button",children:t(e.content)})},e.content)))})]})]})},e.header)))})]})]})};var kn,In,An,wn=n(7973);const Nn=({currency:e,selectedOffer:t,costData:n})=>{const{translate:a}=(0,p.Z)(),{loading:i,billingCountry:r}=Z();if(i)return kn||(kn=(0,S.tZ)(o.ZX,{}));const s="US"===r?"team_account_teamplan_changeplan_order_summary_tax":"team_account_teamplan_vat";return(0,S.BX)(o.kC,{flexDirection:"column",gap:"24px",sx:{borderStyle:"solid",borderColor:"ds.border.neutral.quiet.idle",borderWidth:"1px",borderRadius:"8px",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"24px"},children:[(0,S.BX)(o.kC,{justifyContent:"space-between",alignItems:"center",children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",children:a("team_account_teamplan_changeplan_order_summary_header")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.catchy",children:(0,wn.Z)(new Date,"MM/dd/yyyy")})]}),(0,S.tZ)($t,{selectedOffer:t,currency:e,costData:n}),(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",sx:{padding:"0 10px",fontWeight:"light"},children:a("team_account_teamplan_changeplan_order_summary_seats_total",{totalSeats:n.totalSeats})}),(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",children:a("team_account_teamplan_changeplan_order_summary_subtotal")}),value:e?(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",children:a.price(e,n.subtotal/100)}):null}),n.tax&&e?(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:a(s)}),value:(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:a.price(e,n.tax/100)})}):null,n?.proratedDiscount?(0,S.tZ)(Et,{label:(0,S.BX)(o.kC,{alignItems:"center",gap:"5px",children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:a("team_account_teamplan_changeplan_order_summary_prorated_discount")}),(0,S.tZ)(re.ua7,{content:a("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip"),children:In||(In=(0,S.tZ)(o.JO,{name:"FeedbackInfoOutlined",size:"large",color:"ds.text.neutral.quiet"}))})]}),value:e?(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:a.price(e,n.proratedDiscount/100)}):null}):null,n?.promoPrice?(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:a("team_account_teamplan_upgrade_premium_coupon")}),value:e?(0,S.BX)(o.nv,{color:"ds.text.neutral.quiet",children:["-",a.price(e,n.promoPrice/100)]}):null}):null,An||(An=(0,S.tZ)(Ct,{})),"number"==typeof n?.total?(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",children:a("team_account_teamplan_total")}),value:e?(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",children:a.price(e,n.total/100)}):null}):null]})]})};var On=n(88355),Rn=n(86498);const Ln=/^((AT)(U\d{8})|(BE)(0\d{9}|\d{10})|(BG)(\d{9,10})|(CHE)(\d{9})|(CY)(\d{8}[A-Z])|(CZ)(\d{8,10})|(DE)(\d{9})|(DK)(\d{8})|(EE)(\d{9})|(GB)(\d{5,12})|(EL|GR)(\d{9})|(ES)([\dA-Z]\d{7}[\dA-Z])|(FI)(\d{8})|(FR)([\dA-Z]{2}\d{9})|(HU)(\d{8})|(HR)(\d{11})|(IE)(\d{7}[A-Z]{1,2})|(IT)(\d{11})|(LT)(\d{9}|\d{12})|(LU)(\d{8})|(LV)(\d{11})|(MT)(\d{8})|(NL)(\d{9}(B\d{2}|BO2))|(PL)(\d{10})|(PT)(\d{9})|(RO)(\d{2,10})|(SE)(\d{12})|(SI)(\d{8})|(SK)(\d{10})|(\d{9}MVA))$/i,Mn=e=>{const t=e.replaceAll(/\./g,"");return Ln.test(t)},Bn="team_account_vat_number_add_description",Pn="team_account_vat_number";var Un=function(e){return e[e.ADD=0]="ADD",e[e.UPDATE=1]="UPDATE",e}(Un||{}),Xn=function(e){return e.INITIAL_VIEW="initialView",e.EDIT="edit",e.SAVE="save",e.SAVING="saving",e}(Xn||{});const zn=({isInAccountSummary:e})=>{const{translate:t}=(0,p.Z)(),[n,a]=(0,r.useState)(""),[i,s]=(0,r.useState)("cancel"),[l,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(Un.ADD),[m,g]=(0,r.useState)(Xn.INITIAL_VIEW),h=(0,Rn.V)(),{deleteTeamVat:y,upsertTeamVat:b}=(0,q.u)(zt.a),x=(0,c.k)(zt.a,"getTeamVat");(0,r.useEffect)((()=>{x.status===L.rq.Success&&""!==x.data?(a(x.data),s("delete"),g(Xn.EDIT)):g(Xn.INITIAL_VIEW)}),[x.status,x.data]);const f=e=>e&&!Mn(e)?t("team_account_vat_number_invalid"):null,v={vatNumber:n},C=_===Un.ADD?"team_account_vat_number_add_success":"team_account_vat_number_update_success";return(0,S.BX)(S.HY,{children:[""===n&&(e?(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:t(Bn)}):(0,S.tZ)(re.nvN,{color:"ds.text.neutral.quiet",size:"medium",children:t(Bn)})),m===Xn.INITIAL_VIEW?(0,S.tZ)("div",{sx:{marginTop:"16px"},children:(0,S.tZ)(o.zx,{mood:"neutral",intensity:"quiet",icon:"ActionAddOutlined",layout:"iconLeading",onClick:()=>{g(Xn.SAVE)},children:t("team_account_vat_number_add_label")})}):(0,S.tZ)("div",{sx:{marginTop:"16px"},children:(0,S.tZ)(On.J9,{initialValues:v,onSubmit:m===Xn.SAVE?async e=>{g(Xn.SAVING),"success"===(await b({newVATNumber:e.vatNumber})).tag&&(a(e.vatNumber),d(!0),g(Xn.EDIT),s("delete"),setTimeout((()=>{d(!1)}),2e3))}:m===Xn.EDIT?()=>{d(!1),g(Xn.SAVE),u(Un.UPDATE)}:()=>{},children:({errors:e,resetForm:n,touched:r,values:l})=>(0,S.tZ)(On.l0,{children:(0,S.BX)(re.T5p,{gap:"16px",gridTemplateColumns:"2fr 0.25fr 1fr",children:[(0,S.BX)(re.dDn,{gridColumn:"1 / 2",children:[(0,S.tZ)(On.gN,{name:"vatNumber",validate:f,children:({field:{onChange:e,...n}})=>(0,S.tZ)(o.oi,{label:t(Pn),disabled:m===Xn.EDIT,onChange:t=>{e(t),m===Xn.EDIT&&(g(Xn.SAVE),d(!1))},...n,sx:{input:{textTransform:"uppercase"}}})}),e.vatNumber&&r.vatNumber&&(0,S.tZ)(re.nvN,{color:"ds.text.danger.quiet",size:"x-small",children:e.vatNumber})]}),(0,S.tZ)(re.dDn,{gridColumn:"2 / 3",sx:{marginTop:"16px"},children:m===Xn.SAVING?(0,S.tZ)(o.zx,{intensity:"catchy",layout:"labelOnly",disabled:!0,type:"submit",children:t("team_account_name_saving_label")}):m===Xn.SAVE?(0,S.tZ)(o.zx,{intensity:"catchy",layout:"labelOnly",disabled:""===l.vatNumber,type:"submit",children:t("team_settings_button_save_label")}):(0,S.tZ)(o.zx,{mood:"neutral",intensity:"quiet",icon:"ActionEditOutlined",layout:"iconLeading",disabled:""===l.vatNumber,type:"submit",children:t("team_account_name_edit_label")})}),(0,S.tZ)(re.dDn,{gridColumn:"3 / 4",sx:{marginTop:"16px"},children:"cancel"===i?(0,S.tZ)(o.zx,{mood:"neutral",intensity:"quiet",layout:"labelOnly",disabled:m===Xn.SAVING,onClick:()=>g(Xn.INITIAL_VIEW),children:t("_common_action_cancel")}):(0,S.tZ)(o.zx,{mood:"neutral",intensity:"quiet",icon:"ActionDeleteOutlined",layout:"iconLeading",disabled:m===Xn.SAVING,onClick:()=>{n({values:v}),(async()=>{"success"===(await y()).tag&&(a(""),g(Xn.INITIAL_VIEW),s("cancel"),u(Un.ADD),h.showAlert(t("team_account_vat_number_delete_success_alert"),re.BLW.SUCCESS))})()},children:t("team_account_delete_label")})})]})})})}),l&&(0,S.tZ)(re.nvN,{color:"ds.text.positive.quiet",size:"x-small",children:t(C)})]})},qn=({isInAccountSummary:e})=>{const{translate:t}=(0,p.Z)();return(0,S.tZ)("div",{children:e?(0,S.BX)("div",{sx:{marginTop:"24px"},children:[(0,S.tZ)(o.X6,{color:"ds.text.neutral.catchy",as:"h2",textStyle:"ds.title.section.medium",children:t(Pn)}),(0,S.tZ)("div",{sx:{marginTop:"16px"},children:(0,S.tZ)(zn,{isInAccountSummary:e})})]}):(0,S.tZ)(jt,{title:t(Pn),children:(0,S.tZ)("div",{sx:{marginTop:"16px"},children:(0,S.tZ)(zn,{isInAccountSummary:e})})})})};let jn=function(e){return e.FORM="form",e.SUCCESS="success",e}({});const Fn=({contactSupport:e=!1})=>{const{translate:t}=(0,p.Z)();return(0,S.BX)(jt,{title:(0,S.tZ)(o.nv,{textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",sx:{marginBottom:"18px"},children:t("team_account_teamplan_changeplan_questions_header")}),children:[(0,S.tZ)(o.Qj,{color:"ds.text.brand.standard",href:ee.Vr,isExternal:!0,onClick:()=>{(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.HelpCenter}))},sx:{marginBottom:"10px"},children:t("team_account_teamplan_changeplan_questions_visit_help_center")}),e?(0,S.tZ)(o.Qj,{color:"ds.text.brand.standard",href:ee.to,isExternal:!0,onClick:()=>{(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.ContactCustomerSupport],chosenAction:l.CallToAction.ContactCustomerSupport,hasChosenNoAction:!1}))},children:t("team_account_teamplan_changeplan_questions_customer_support")}):(0,S.tZ)(o.Qj,{color:"ds.text.brand.standard",href:ee.tz,isExternal:!0,onClick:()=>{(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.SeeAllPlans],chosenAction:l.CallToAction.SeeAllPlans,hasChosenNoAction:!1}))},children:t("team_account_teamplan_changeplan_questions_compare_plans")})]})};var Gn,Vn,Hn,Wn=n(83175),$n=n(86834),Kn=n(50506);const Yn=!1,Qn=(e,t)=>e?t===Ot.INVOICE?"1px solid ds.border.brand.standard.active":"1px solid ds.border.neutral.quiet.idle":"none",Jn=({handleClickAddBillingInfo:e,handleClickEditBillingInfo:t,paymentLoading:n,premiumStatus:a,seats:i,setPaymentMethodType:l,setPaymentLoading:c})=>{var d;const{translate:_}=(0,p.Z)(),[u,m]=(0,r.useState)(Ot.CREDIT_CARD);(0,r.useEffect)((()=>{l(u)}),[u,l]),(0,r.useEffect)((()=>{i<21&&m(Ot.CREDIT_CARD)}),[i]);const{loading:h,billingInformation:y}=(0,g.C)({b2c:Yn}),b=y?.last4,x=(f=y?.country,(0,Kn.S)(f)===Kn.n.EUROPE);var f;const v=i>20||x;return a.status!==s.rq.Success||!a.data||h?Gn||(Gn=(0,S.tZ)(o.ZX,{})):(0,S.BX)(o.Zb,{children:[(0,S.tZ)(o.X6,{as:"h2",children:_("team_post_trial_checkout_payment_selection_heading")}),(0,S.tZ)(o.Ee,{groupName:"options",value:u,onChange:e=>m(e.target.value),children:(0,S.BX)(o.kC,{gap:"16px",flexDirection:"row",flexWrap:"nowrap",children:[(0,S.tZ)("div",{sx:{width:"50%",border:u===Ot.CREDIT_CARD?"1px solid ds.border.brand.standard.active":"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px",padding:"24px"},children:(0,S.tZ)(o.Y8,{label:(0,S.BX)(o.kC,{flexDirection:"column",alignItems:"center",sx:{marginLeft:"-40px",gap:"8px"},children:[Hn||(Hn=(0,S.tZ)(o.JO,{name:"ItemPaymentOutlined",color:"ds.text.neutral.standard",size:"large"})),(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.strong",children:_("team_post_trial_checkout_payment_selection_credit_card_description")}),n?d||(d=(0,S.tZ)(Wn.J,{b2c:Yn,setPaymentLoading:c})):b?(0,S.BX)(o.kC,{justifyContent:"space-between",sx:{width:"100%",padding:"8px 8px 0"},children:[Vn||(Vn=(0,S.tZ)($n.I,{b2c:Yn,isAppStoreUser:!1,isGooglePlayUser:!1})),(0,S.tZ)(o.zx,{"aria-label":_("team_post_trial_checkout_payment_selection_edit_billing_info"),layout:"iconOnly",icon:"ActionEditOutlined",intensity:"supershy",onClick:t})]}):(0,S.tZ)(o.zx,{mood:"brand",intensity:"catchy",size:"large",icon:"ActionAddOutlined",layout:"iconLeading",onClick:e,children:_("team_post_trial_checkout_payment_selection_add_billing_info")})]}),value:Ot.CREDIT_CARD})}),(0,S.tZ)("div",{sx:{width:"50%",borderRadius:"8px",border:Qn(v,u),backgroundColor:v?"ds.container.agnostic.neutral.supershy":"ds.container.agnostic.neutral.quiet",padding:"24px"},children:(0,S.tZ)(o.Y8,{label:(0,S.BX)(o.kC,{flexDirection:"column",alignItems:"center",sx:{marginLeft:"-40px",gap:"8px"},children:[(0,S.tZ)(o.JO,{name:"ItemTaxNumberOutlined",color:v?"ds.text.neutral.catchy":"ds.text.neutral.quiet",size:"large"}),(0,S.tZ)(o.nv,{color:v?"ds.text.neutral.catchy":"ds.text.neutral.quiet",textStyle:"ds.body.standard.strong",children:_("team_post_trial_checkout_payment_selection_invoice_radio_description")}),v?(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",sx:{textAlign:"center"},children:_("team_post_trial_checkout_payment_selection_invoice_enabled_description")}):(0,S.tZ)(o.ke,{title:_("team_post_trial_checkout_payment_selection_invoice_infobox_label")})]}),value:Ot.INVOICE,disabled:!v})})]})})]})};var ea=n(9216);const ta=({setPaymentLoading:e,premiumStatus:t,isB2C:n=!1})=>{const{pollUntilCardUpdate:a}=(0,g.C)({b2c:n,handleCardUpdate:e=>{e&&t.status===s.rq.Success&&(0,ea.dV)(t.data,l.FlowStep.Complete)}});return{handleClickAddBillingInfo:()=>{a(),e(!0),(0,m.Kz)(new l.UserClickEvent({button:l.Button.AddPaymentInfo})),(0,m.Kz)(new l.UserAddNewPaymentMethodEvent({flowStep:l.FlowStep.Start}))},handleClickEditBillingInfo:()=>{a(),e(!0),(0,m.Kz)(new l.UserClickEvent({button:l.Button.UpdatePaymentMethod})),t.status===s.rq.Success&&(0,ea.dV)(t.data,l.FlowStep.Start)}}};var na,aa,ia,ra,sa;const oa=()=>{var e,t,n;const{translate:a}=(0,p.Z)(),g=ft(),h=(0,u.s)(),y=(0,r.useContext)(bt),{showToast:b}=(0,o.pm)(),{data:x,status:v}=(0,c.k)(d.o,"getTeamSeats"),{loading:E,billingCountry:D}=Z(),T=(0,fe.Y)(),[k,I]=(0,r.useState)(0),[A,w]=(0,r.useState)(),[N,O]=(0,r.useState)(""),[R,L]=(0,r.useState)(!0),[M,B]=(0,r.useState)(jn.FORM),[P,U]=(0,r.useState)(),[X,z]=(0,r.useState)(""),[q,j]=(0,r.useState)(Ot.CREDIT_CARD),[F,G]=(0,r.useState)(!1),{handleClickAddBillingInfo:V,handleClickEditBillingInfo:H}=ta({setPaymentLoading:G,premiumStatus:T}),W=(null!=(e=x?.paid)?e:0)+(null!=(t=x?.extraFree)?t:0),$=W-(null!=(n=x?.remaining)?n:0),K=h?.spaceTier;if((0,r.useEffect)((()=>{""!==X&&b({mood:"danger",description:X}),z("")}),[X]),(0,r.useEffect)((()=>(M===jn.FORM?y(na||(na=(0,S.tZ)(C,{}))):y(null),()=>{y(null)})),[M]),(0,r.useEffect)((()=>{g&&("business"!==(0,i.CN)().get("plan")&&K!==_.lD.Team&&K!==_.lD.Starter&&K!==_.lD.Standard||w(g.businessOffer))}),[g]),E||v!==s.rq.Success||!x||!h||!g||!K)return aa||(aa=(0,S.tZ)(o.ZX,{mood:"brand"}));const Y=g.businessOffer.currency,Q=D&&"US"!==D?"team_account_teamplan_vat":"team_account_teamplan_changeplan_order_summary_tax";return(0,S.tZ)(o.kC,{sx:{margin:"45px",width:"1180px"},children:(0,S.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[M===jn.FORM?(0,S.BX)(S.HY,{children:[(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{padding:"0 8px 32px"},children:[(0,S.tZ)(o.X6,{textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",as:"h1",children:a("team_account_teamplan_changeplan_title")}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",children:a("team_account_teamplan_changeplan_description")})]}),(0,S.BX)(o.kC,{gap:"8px",children:[(0,S.tZ)("div",{sx:{width:"750px"},children:(0,S.BX)(o.kC,{flexDirection:"column",flexWrap:"nowrap",gap:"8px",children:[(0,S.tZ)(hn,{teamOffers:g,currentSpaceTier:K,selectedOffer:A,handleSelection:e=>{(e=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:l.ClickOrigin.Plans,button:Ut(e)?l.Button.SelectTeamPlan:Xt(e)?l.Button.SelectBusinessPlan:l.Button.SelectStarterPlan}))})(e),w(e)}}),(0,S.tZ)(Jn,{handleClickAddBillingInfo:V,handleClickEditBillingInfo:H,paymentLoading:F,premiumStatus:T,seats:k,setPaymentLoading:G,setPaymentMethodType:j}),"US"!==D&&(ia||(ia=(0,S.tZ)(qn,{isInAccountSummary:!1}))),(0,S.tZ)(Sn,{email:N,emailValid:R,setEmail:O,setEmailValid:L})]})}),(0,S.tZ)("div",{sx:{width:"370px"},children:(0,S.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,S.tZ)(rn,{currentSeats:W,currentActiveSeats:$,currentSpaceTier:K,selectedSeatsQty:k,currency:Y,selectedOffer:A,email:N,emailValid:R,onSuccess:()=>{B((()=>jn.SUCCESS))},onError:e=>{z(e)},setSelectedSeatsQty:I,setOrderSummaryData:U,handleClickAddBillingInfo:V,paymentMethodType:q,taxCopy:Q}),ra||(ra=(0,S.tZ)(Fn,{contactSupport:!0}))]})})]})]}):null,M===jn.SUCCESS&&P&&A?(0,S.BX)(o.kC,{flexWrap:"nowrap",gap:"16px",children:[(0,S.tZ)(o.kC,{flexDirection:"column",sx:{flexGrow:"2",maxWidth:"752px"},children:(0,S.tZ)(Tn,{targetPlan:Xt(A)?"business":"team"})}),(0,S.BX)(o.kC,{gap:"16px",flexDirection:"column",sx:{flexGrow:"1",width:"368px"},children:[(0,S.tZ)(Nn,{currency:Y,selectedOffer:A,costData:P}),sa||(sa=(0,S.tZ)(f,{}))]})]}):null]})})};var la=n(21021),ca=n(75809),da=n(5822),_a=n(135);const ua=e=>{var t;const{data:n,status:a}=(0,c.k)(_a.L,"getMembersList",{teamId:null!=(t=e?.toString())?t:""}),i={isLoading:!1,isErrored:!1,data:null};return a===s.rq.Loading?{...i,isLoading:!0}:a===s.rq.Error?{...i,isErrored:!0}:{isLoading:!1,isErrored:!1,data:n}};var ma;const pa={display:"flex",alignItems:"center",padding:"12px 8px",borderRadius:"8px",justifyContent:"space-between",backgroundColor:"ds.container.agnostic.neutral.quiet"},ga="team_post_trial_checkout_number_of_seats",ha=({numberOfMembers:e,planPrice:t,selectedOffer:n,selectedSeatsQty:a,setPlanPrice:s,setSelectedSeatsQty:l,setIsSeatsQtyValid:c})=>{const{translate:d}=(0,p.Z)(),_=(0,De.k6)(),{routes:u}=(0,i.Xo)(),m=e>Ra?e:Ra,[g,h]=(0,r.useState)(Math.max(a,m));if((0,r.useEffect)((()=>{if(n){const e=Mt({offer:n}).equivalentPrice;s(e),Xt(n)?l(g):(10!==a&&h(a),l(10))}}),[n]),!n)return(0,S.tZ)("div",{sx:pa,children:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.brand.quiet",children:d("team_account_teamplan_changeplan_order_summary_select_plan")})});const y=n.currency,b=10*t,x=Xt(n)?{planName:d("team_account_teamplan_changeplan_plans_business_name"),planPrice:d("team_post_trial_checkout_order_summary_seat_year",{cost:d.price(y,t/100,{notation:"compact"})})}:{planName:d("manage_subscription_plan_name_dashlane_standard"),planPrice:d("team_post_trial_checkout_standard_order_summary_seat_year",{cost:d.price(y,b/100,{notation:"compact"})})};return(0,S.BX)(S.HY,{children:[(0,S.BX)("div",{sx:pa,children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.brand.quiet",children:x.planName}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.brand.quiet",children:x.planPrice})]}),(0,S.BX)(o.kC,{justifyContent:"flex-end",sx:{padding:Xt(n)?"0 10px":"16px 10px 8px"},children:[(0,S.tZ)("div",{sx:{display:"flex",alignItems:"center",flex:1},children:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:d(ga)})}),(0,S.tZ)("div",{sx:{display:"flex",alignItems:"center"},children:(0,S.tZ)("div",{sx:{width:"146px"},children:Xt(n)?(0,S.tZ)(vt.w,{id:"checkoutNumberOfSeats",inputWidth:"66px",label:"",ariaLabel:d(ga),minValue:m,onChange:e=>{l(e),h(e),c(!(e<m))},defaultValue:a},`seats-${a}`):(0,S.tZ)("div",{id:"standard-seats",sx:{float:"right"},children:ma||(ma=(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:10}))})})})]}),Xt(n)&&a<=m&&(0,S.BX)(o.kC,{justifyContent:"flex-end",sx:{padding:"0 10px"},children:[(0,S.tZ)(o.kC,{flexDirection:"row",alignItems:"center",sx:{flex:1},children:(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:a<m?"ds.text.danger.quiet":"ds.text.neutral.quiet",children:(0,S.BX)(o.kC,{flexDirection:"row",alignItems:"center",gap:"4px",children:[d("team_post_trial_checkout_minimum_users",{numberOfMembers:m}),(0,S.tZ)(o.JO,{color:a<m?"ds.text.danger.quiet":"ds.text.neutral.quiet",name:"FeedbackInfoOutlined",tooltip:{content:e>Ra?d("team_post_trial_checkout_number_of_seats_tooltip"):d("team_post_trial_checkout_number_of_seats_tooltip_plan_minimum",{minNumOfSeats:Ra})}})]})})}),e>Ra&&(0,S.tZ)(o.kC,{flexDirection:"row",alignItems:"center",children:(0,S.tZ)(o.Qj,{onClick:()=>_.push(u.teamMembersRoutePath),children:d("team_post_trial_checkout_review_active_users")})})]})]})};var ya=n(96765);const ba=({children:e,currency:t,hasError:n,isLoading:a,onChange:i,onClear:s,onSubmit:o,promoCode:l,promoPrice:c,setShowInput:d,showInput:_,subtotal:u})=>{const[m,p]=(0,r.useState)(!1),g=()=>{s&&(p(!1),s())};return _||m?(0,S.BX)(S.HY,{children:[e,(0,S.tZ)(Jt,{hasError:n,isLoading:a,handleClear:g,handleSubmit:()=>{o&&(p(!1),o())},onChange:i,promoCode:l})]}):l&&!m?(0,S.tZ)(It,{currency:t,handleClear:g,promoCode:l,promoPrice:c,setIsEditing:p,subTotal:u,children:e}):(0,S.BX)(S.HY,{children:[e,(0,S.tZ)(Yt,{setShowInput:d})]})};var xa=n(51060);const Sa=e=>{switch(e){case xa.AI.B2B_PLAN_NOT_FOUND:return l.PaymentStatus.B2bPlanNotFound;case xa.AI.INVALID_PLAN:return l.PaymentStatus.InvalidPlan;case xa.AI.NOT_IN_A_TEAM_PLAN:return l.PaymentStatus.NotInATeamPlan;case xa.AI.NOT_TEAM_CAPTAIN:return l.PaymentStatus.NotTeamCaptain;case xa.AI.NOT_IN_FREE_TRIAL:return l.PaymentStatus.NotInFreeTrial;case xa.AI.NO_KEY_FOR_USER:return l.PaymentStatus.NoKeyForUser;case xa.AI.FORBIDDEN_EMAIL_DOMAIN:return l.PaymentStatus.ForbiddenEmailDomain;case xa.AI.CANNOT_INVOICE_FREE_PLAN:return l.PaymentStatus.CannotInvoiceFreePlan;case xa.AI.SALES_TAX_MISMATCH:return l.PaymentStatus.SalesTaxMismatch;case xa.AI.SEATS_TO_PURCHASE_LOWER_ACTUAL_USAGE:return l.PaymentStatus.SeatsToPurchaseLowerActualUsage;case xa.AI.SELECTED_PLAN_IS_NOT_VALID:return l.PaymentStatus.SelectedPlanIsNotValid;case xa.AI.STARTER_PLAN_NOT_10_SEATS:return l.PaymentStatus.StarterPlanNot10Seats;case xa.AI.TEAM_HAS_SSO_ENABLED:return l.PaymentStatus.TeamHasSsoEnabled;case xa.AI.UNSUPPORTED_PAYMENT_MEAN:return l.PaymentStatus.SelectedPlanIsNotValid;case xa.AI.USER_SUBSCRIBING_NOT_FOUND:return l.PaymentStatus.UserSubscribingNotFound;case xa.AI.VAT_NUMBER_NOT_UPSERTED:return l.PaymentStatus.VatNumberNotUpserted;case xa.AI.WRONG_AMOUNT_TO_PAY:return l.PaymentStatus.WrongAmountToPay;default:return l.PaymentStatus.PaymentErrorDuringUpgrade}};var fa,va,Ca;const Ea=({billingCountry:e,isSeatsQtyValid:t,paymentMethodType:n,planPrice:a,selectedOffer:i,selectedSeatsQty:s,setErrorMessage:d,setHasTax:_,setOrderSummaryData:u,setPostTrialCheckoutState:g,setRenewalPrice:h})=>{const{translate:y}=(0,p.Z)(),[b,x]=(0,r.useState)(!1),{upgradeTeamWithExistingCc:f}=(0,q.u)(St.K),v=a*s,{changePromoCode:C,clearPromoCode:E,currentPromoCode:Z,discountedSeatPrice:D,hasError:T,isLoading:k,planId:I,setShowInput:A,showInput:w,validatePromoCode:N}=(({selectedOffer:e,selectedSeatsQty:t})=>{const[n,a]=(0,r.useState)(""),[i,s]=(0,r.useState)(""),[o,l]=(0,r.useState)(0),[d,_]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[h,y]=(0,r.useState)(t),[b,x]=(0,r.useState)(e),[S,f]=(0,r.useState)(""),{data:v,status:C}=(0,c.k)(St.K,"getTeamOffers",{couponCode:i}),E=(0,r.useCallback)((()=>{if(!i||!e)return!1;if(C===L.rq.Error&&!v)return g(!1),_(!0),m(!0),!1;if(C===L.rq.Loading&&!v)return g(!0),!1;const n=!Xt(e)&&v.entryLevelOffer?v.entryLevelOffer:v.businessOffer,r=Mt({offer:n,selectedSeatsQty:t});return r.price!==r.equivalentPrice?(g(!1),a(i),l(r.price),f(n.name),_(!1),m(!1),!0):(g(!1),_(!0),m(!0),l(0),!1)}),[i,e,t,v,C]);return(0,r.useEffect)((()=>{t!==h&&(y(t),E())}),[h,t,E]),(0,r.useEffect)((()=>{e?.name!==b?.name&&(x(e),E())}),[e,b,E]),{cancelPromoCode:()=>{d?(a(""),s(""),l(0),f("")):s(n),_(!1),m(!1)},clearPromoCode:()=>{a(""),s(""),_(!1),l(0),f("")},changePromoCode:e=>{s(e),d&&_(!1)},currentPromoCode:i,discountedSeatPrice:o,hasError:d,isLoading:p,planId:S,promoCode:n,setIsLoading:g,setShowInput:m,showInput:u,validatePromoCode:E}})({selectedOffer:i,selectedSeatsQty:s}),O=D*s,R=v-O,M=0!==D?O:v,{isLoading:B,taxInformation:U}=qt({total:M,initialSkip:void 0===e});(0,r.useEffect)((()=>{if(void 0!==U?.amount){_(U.amount>0);const e=0!==D?(v-O)/v:0,t=U.amount/(1-e),n=v+t;h(Math.round(n))}}),[_,h,v,O,D,U?.amount]);const X=e&&"US"!==e?"team_account_teamplan_vat":"team_account_teamplan_changeplan_order_summary_tax",z=!B&&U?.amount||0,j=z?M+z:void 0,F="invoice"===n?"team_post_trial_checkout_request_purchase_order":"team_account_teamplan_changeplan_order_summary_confirm_and_pay";if(!i)return null;const G=B&&"invoice"!==n||!t;return(0,S.BX)(S.HY,{children:[va||(va=(0,S.tZ)(ya.E,{})),(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:y("team_account_teamplan_changeplan_order_summary_subtotal")}),value:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:y.price(i.currency,v/100)})}),(0,S.tZ)(ba,{currency:i.currency,hasError:T,isLoading:k,onChange:C,onClear:E,onSubmit:N,promoCode:Z,promoPrice:R,setShowInput:A,showInput:w,subtotal:v,children:(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:(0,S.BX)(o.kC,{flexDirection:"row",gap:"4px",children:[y(X),(0,S.tZ)(o.JO,{color:"ds.text.neutral.quiet",name:"FeedbackInfoOutlined",tooltip:{content:y("team_account_teamplan_changeplan_order_summary_tax_tooltip")}})]})}),value:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:y.price(i.currency,z/100)})})}),Ca||(Ca=(0,S.tZ)(ya.E,{})),(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:y("team_account_teamplan_total")}),value:(0,S.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.small",color:"ds.text.neutral.catchy",children:y.price(i.currency,(!B&&j?j:v)/100)})}),(0,S.tZ)(o.zx,{size:"large",sx:{width:"100%"},type:"button",disabled:G,onClick:()=>"invoice"===n?((0,m.Kz)(new l.UserClickEvent({button:l.Button.RequestPurchaseOrder})),void(0,P.Yo)(ee.nq)):(async t=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.ConfirmAndPay})),x((()=>!0));const n=await f({planId:t,countryCode:e,membersNumber:s,amountToPayInCents:M,taxesToPayInCents:z,couponCode:Z}),r=t.includes("standard")?l.Plan.Standard:l.Plan.Business,o=l.PriceCurrencyCode[i?.currency?i.currency.charAt(0).toUpperCase()+i.currency.slice(1):"Usd"];if(x((()=>!1)),"success"===n.tag)(0,m.Kz)(new l.UserPurchaseSubscriptionEvent({paymentAmount:M,paymentCurrency:o,paymentMethod:l.PaymentMethod.CreditCard,paymentStatus:l.PaymentStatus.Success,purchasedPlan:r,purchasedSeatsCount:s})),g(Nt.SUCCESS),u({numberOfSeats:s,planPrice:a,promoPrice:0!==D?R:void 0,subtotal:v,tax:z,total:j}),(0,m.Nc)(l.PageView.TacCheckoutSuccess);else{const e=n.error.tag;(0,m.Kz)(new l.UserPurchaseSubscriptionEvent({paymentAmount:M,paymentCurrency:o,paymentMethod:l.PaymentMethod.CreditCard,paymentStatus:Sa(e),purchasedPlan:r,purchasedSeatsCount:s})),d(y("UNSUPPORTED_PAYMENT_MEAN"===e?"team_post_trial_checkout_error_payment_declined":"team_post_trial_checkout_error_process_request"))}})(I||i.name),children:b?fa||(fa=(0,S.tZ)(o.ZX,{})):y(F)})]})};var Za;const Da=({billingCountry:e,handleClickAddBillingInfo:t,hasTax:n,renewalPrice:a,selectedOffer:i,selectedSeatsQty:r})=>{const{translate:s}=(0,p.Z)(),l=(0,Lt.Z)(new Date,1),c=n?"US"===e?"team_account_teamplan_changeplan_order_summary_footer_renewal":"team_account_teamplan_changeplan_order_summary_renewal_vat":"team_account_teamplan_changeplan_order_summary_footer_header",{billingInformation:d}=(0,g.C)({b2c:!1}),_=d?.last4;return i?_?a>0?(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"12px",padding:"10px"},children:[(0,S.BX)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:[s(c,{price:s.price(i.currency,a/100),date:s.shortDate(l,Vt.qG.ll)}),Za||(Za=(0,S.tZ)("br",{})),s("team_post_trial_checkout_cancel_subscription")]}),(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:s.markup("team_account_teamplan_changeplan_order_summary_footer_markup",{privacyPolicyUrl:ee.Bz,termsUrl:ee.sz},{linkTarget:"_blank"})})]}):null:(0,S.BX)(o.kC,{flexDirection:"row",justifyContent:"space-between",alignItems:"baseline",sx:{marginTop:"8px"},children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.warning.quiet",children:s(r>20?"team_post_trial_checkout_payment_method_required":"team_post_trial_checkout_credit_card_required")}),(0,S.tZ)(o.Qj,{color:"ds.text.brand.standard",isExternal:!0,onClick:t,sx:{marginRight:"8px"},children:s("team_post_trial_checkout_add_credit_card")})]}):null},Ta=({billingCountry:e,handleClickAddBillingInfo:t,paymentMethodType:n,selectedOffer:a,selectedSeatsQty:i,setErrorMessage:s,setOrderSummaryData:l,setPostTrialCheckoutState:c,setSelectedSeatsQty:d,numberOfMembers:_})=>{const{translate:u}=(0,p.Z)(),[m,g]=(0,r.useState)(!1),[h,y]=(0,r.useState)(0),[b,x]=(0,r.useState)(0),[f,v]=(0,r.useState)(!0);return(0,S.tZ)(jt,{title:u("team_account_teamplan_changeplan_order_summary_header"),children:(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{marginTop:"16px"},children:[(0,S.tZ)(ha,{numberOfMembers:_,planPrice:h,selectedOffer:a,selectedSeatsQty:i,setPlanPrice:y,setSelectedSeatsQty:d,setIsSeatsQtyValid:v}),(0,S.tZ)(Ea,{billingCountry:e,paymentMethodType:n,isSeatsQtyValid:f,planPrice:h,selectedOffer:a,selectedSeatsQty:i,setErrorMessage:s,setHasTax:g,setOrderSummaryData:l,setPostTrialCheckoutState:c,setRenewalPrice:x}),(0,S.tZ)(Da,{billingCountry:e,handleClickAddBillingInfo:t,hasTax:m,selectedSeatsQty:i,renewalPrice:b,selectedOffer:a})]})})},ka=({currentSpaceTier:e,handleSelection:t,selectedOffer:n,teamOffers:a,numberOfMembers:i})=>{const{translate:s}=(0,p.Z)(),l=(0,X.C)(),c=sn(),d=(({teamOffers:e,limitedBusinessOffer:t,teamTrialStatus:n,numberOfMembers:a})=>{const{translate:i}=(0,p.Z)(),r=e?.businessOffer?.currency,s=e?.businessOffer?Bt({offer:e.businessOffer}):null,o=e?.entryLevelOffer?Pt({offer:e.entryLevelOffer,selectedSeatsQty:10}):null,l=n?.spaceTier===_.lD.Business,c={standard:{...un.standard,isStandardPlanRestricted:a>10,price:o&&r?i.price(r,o/100,{notation:"compact"}):null},business:{...un.business,currentTrial:l,price:s&&r?i.price(r,s/100,{notation:"compact"}):null,equivalentPrice:t.hasLimitedOffer&&s&&r?t.translatedEquivalentPrice:null,limitedOffer:t.hasLimitedOffer},businessPlus:{planName:"businessPlus",price:{key:"team_post_trial_checkout_plan_selection_biz_plus_card_price"},heading:{key:"team_post_trial_checkout_plan_selection_biz_plus_card_title"},priceDescription1:{key:"team_post_trial_checkout_plan_selection_biz_plus_card_coverage"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_everything_markup",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_hundred_plus"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_nudges_markup"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_risk_detection_markup"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_deployment"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_security"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_onboarding"}]}};return mn(c)})({teamOffers:a,limitedBusinessOffer:c,teamTrialStatus:l,numberOfMembers:i}),{businessOffer:u,entryLevelOffer:m}=a,g=e===_.lD.Standard,h=e===_.lD.Business;return(0,r.useEffect)((()=>{a&&(h&&t(u),g&&m&&t(m))}),[a]),d?(0,S.tZ)(jt,{headingLevel:"h2",title:s("team_post_trial_checkout_plan_selection_title"),children:(0,S.tZ)(o.kC,{gap:"16px",flexWrap:"nowrap",sx:{paddingTop:"16px"},children:d.businessPlus?m&&d.standard?(0,S.BX)(S.HY,{children:[(0,S.tZ)(_n,{handleSelectClick:()=>t(m),plan:d.standard,selected:!!n&&n.name===m.name}),(0,S.tZ)(_n,{handleSelectClick:()=>t(u),plan:d.business,selected:!!n&&n.name===u.name}),(0,S.tZ)(_n,{plan:d.businessPlus})]}):(0,S.BX)(S.HY,{children:[(0,S.tZ)(_n,{handleSelectClick:()=>t(u),plan:d.business,selected:!!n&&n.name===u.name}),(0,S.tZ)(_n,{plan:d.businessPlus})]}):null})}):null};var Ia,Aa;const wa=({billingCountry:e,orderSummaryData:t,selectedOffer:n})=>{const{translate:a}=(0,p.Z)(),{numberOfSeats:i,planPrice:r,promoPrice:s,subtotal:l,tax:c,total:d}=t,{last4DigitsFormatted:_,cardSvg:u,expFormatted:m}=(0,g.C)({b2c:!1}),h=m?a("manage_subscription_payment_section_expiration_date",{date:m}):null,y=Xt(n)?a("team_account_teamplan_changeplan_plans_business_name"):a("manage_subscription_plan_name_dashlane_standard"),b="US"===e?"team_account_teamplan_changeplan_order_summary_tax":"team_account_teamplan_vat";return(0,S.tZ)(o.Zb,{sx:{width:"472px"},children:(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{marginTop:"16px"},children:[(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"8px",paddingRight:"8px"},children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:a("team_account_teamplan_changeplan_order_summary_header")}),(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:y})]}),(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a("team_post_trial_checkout_seats_for_year",{cost:a.price(n.currency,r/100,{notation:"compact"}),numOfSeats:i})}),value:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a.price(n.currency,l/100)})}),0!==c?(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a(b)}),value:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a.price(n.currency,c/100)})}):null,s?(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a("team_account_teamplan_upgrade_premium_coupon")}),value:(0,S.BX)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:["-",a.price(n.currency,s/100)]})}):null,Ia||(Ia=(0,S.tZ)(ya.E,{})),d?(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:a("team_account_teamplan_total")}),value:(0,S.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.small",color:"ds.text.neutral.catchy",children:a.price(n.currency,d/100)})}):null,(0,S.tZ)(Et,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a("team_post_trial_checkout_paid")}),value:(0,S.BX)(o.kC,{alignItems:"center",gap:"8px",children:[u,(0,S.BX)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{display:"flex",gap:"4px"},children:[Aa||(Aa=(0,S.tZ)("span",{children:"••••"})),(0,S.tZ)("span",{children:_})]}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{display:"flex",gap:"12px"},children:h})]})})]})})};var Na,Oa;const Ra=2,La=()=>{var e,t,n;const a=(0,De.k6)(),{routes:s}=(0,i.Xo)(),{translate:_}=(0,p.Z)(),g=(0,u.s)(),h=(0,fe.Y)(),{showToast:y}=(0,o.pm)(),{data:b,status:x}=(0,c.k)(d.o,"getTeamSeats"),{loading:f,billingCountry:v}=Z(),[C,E]=(0,r.useState)(Nt.FORM),D=ft(),T=(0,da.V)(),k=ua(T.status===L.rq.Success?T.teamId:null),[I]=(0,o.If)(),[A,w]=(0,r.useState)(),[N,O]=(0,r.useState)(""),[R,M]=(0,r.useState)(Ra),[B,P]=(0,r.useState)(Ot.CREDIT_CARD),[U,X]=(0,r.useState)(),[z,q]=(0,r.useState)(null),[j,F]=(0,r.useState)(!1),G=g?.spaceTier,{handleClickAddBillingInfo:V,handleClickEditBillingInfo:H}=ta({setPaymentLoading:F,premiumStatus:h});(0,r.useEffect)((()=>{k?.data&&q(k.data?.members.length)}),[k]),(0,r.useEffect)((()=>{""!==N&&y({mood:"danger",description:N}),O("")}),[N]),(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacCheckout)}),[]);const W=f||x!==L.rq.Success||!b||!g||!D||!G||!z;if(T.status!==L.rq.Success||"number"!=typeof T.teamId)return null;const $=()=>(0,S.tZ)(o.ZX,{mood:"brand",size:"xlarge",sx:{left:"50%",top:"50%",position:"absolute"}});return(0,S.BX)(o.kC,{flexDirection:"column",sx:{margin:"0 24px 24px",width:"1285px"},children:[W?$():C===Nt.FORM&&"number"==typeof T.teamId&&(0,S.BX)(S.HY,{children:[(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{padding:"32px 0"},children:[(0,S.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:_("team_post_trial_checkout_heading")}),(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:_("team_post_trial_checkout_description")})]}),(0,S.tZ)(o.kC,{flexDirection:"column",gap:"16px",children:(0,S.BX)(o.kC,{gap:"16px",children:[(0,S.tZ)("div",{sx:{width:"751px"},children:(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",flexWrap:"nowrap",children:[(0,S.tZ)(ka,{currentSpaceTier:G,handleSelection:e=>{(e=>{(0,m.Kz)(new l.UserClickEvent({button:Xt(e)?l.Button.SelectBusinessPlan:l.Button.SelectStandardPlan}))})(e),w(e)},selectedOffer:A,teamOffers:D,numberOfMembers:z}),e||(e=(0,S.tZ)(Jn,{handleClickAddBillingInfo:V,handleClickEditBillingInfo:H,paymentLoading:j,premiumStatus:h,seats:R,setPaymentLoading:F,setPaymentMethodType:P})),"US"!==v&&(Na||(Na=(0,S.tZ)(qn,{isInAccountSummary:!1})))]})}),(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{width:"460px"},children:[t||(t=(0,S.tZ)(Ta,{billingCountry:v,handleClickAddBillingInfo:V,numberOfMembers:z,paymentMethodType:B,selectedOffer:A,selectedSeatsQty:R,setErrorMessage:O,setOrderSummaryData:X,setPostTrialCheckoutState:E,setSelectedSeatsQty:M})),Oa||(Oa=(0,S.tZ)(Fn,{}))]})]})})]}),W?$():C===Nt.SUCCESS&&U&&A&&(0,S.BX)(o.kC,{flexDirection:"row",gap:"16px",sx:{padding:"32px 0"},children:[(0,S.tZ)(o.kC,{flexDirection:"column",gap:"16px",children:(0,S.tZ)(o.Zb,{sx:{width:"646px",padding:"24px"},children:(0,S.tZ)(o.kC,{flexDirection:"column",gap:"16px",children:(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",alignItems:"center",children:[(0,S.tZ)("img",{sx:{maxWidth:"60%",aspectRatio:"3/2"},src:"light"===I?ca:la,alt:_("team_post_trial_checkout_success_img_alt")}),(0,S.tZ)(o.Ct,{iconName:"FeedbackSuccessOutlined",label:_("team_post_trial_checkout_success_badge_label"),mood:"positive",layout:"iconLeading"}),(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:_("team_post_trial_checkout_success_heading")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{textAlign:"center",maxWidth:"440px"},children:_("team_post_trial_checkout_success_description")}),(0,S.BX)(o.kC,{flexDirection:"row",gap:"32px",sx:{margin:"16px 0 32px"},children:[(0,S.tZ)(o.zx,{onClick:()=>{a.push(s.teamMembersRoutePath)},mood:"brand",intensity:"catchy",layout:"iconTrailing",icon:"ArrowRightOutlined",children:_("team_post_trial_checkout_success_button_start_inviting_users")}),(0,S.tZ)(o.zx,{onClick:()=>{a.push(s.teamAccountRoutePath)},mood:"brand",intensity:"quiet",layout:"iconTrailing",icon:"ArrowRightOutlined",children:_("team_post_trial_checkout_success_button_review_your_subscription")})]})]})})})}),n||(n=(0,S.tZ)(o.kC,{flexDirection:"column",children:(0,S.tZ)(wa,{billingCountry:v,orderSummaryData:U,selectedOffer:A})}))]})]})},Ma=e=>e?"auto":"800px",Ba=({mainContent:e,secondaryContent:t,secondaryContentWrapDirection:n="top",fullWidth:a,reducedVerticalPadding:i,secondaryContentWidth:r,...s})=>(0,S.BX)(re.T5p,{gap:"32px",gridTemplateAreas:["'top' 'bottom'","'top' 'bottom'","'left right'"],gridTemplateColumns:[null,null,`minmax(auto, ${Ma(null!=a&&a)}) ${null!=r?r:"256px"}`],gridTemplateRows:["auto auto","auto auto","auto"],alignContent:"flex-start",sx:{py:i?"16px":"32px",px:"42px"},...s,children:[(0,S.tZ)(re.dDn,{alignSelf:"flex-start",gridArea:"top"===n?["top","top","right"]:["bottom","bottom","right"],children:t}),(0,S.tZ)(re.dDn,{gridArea:"top"===n?["bottom","bottom","left"]:["top","top","left"],children:e})]});var Pa=n(7501);const Ua=(e,t,n,a)=>{const{isTeamSoftDiscontinued:i,isTrial:r}=e;return i&&r?"DISCONTINUED TRIAL":n.isFreeTrial&&!n.isGracePeriod?"TRIAL":n.isGracePeriod?"GRACE PERIOD":t.currentTeam?.isRenewalStopped&&!i?"ACTIVE CANCELED":t.currentTeam?.isRenewalStopped&&i?"DISCONTINUED CANCELED":!a||i||t.currentTeam?.isRenewalStopped?a&&i&&!t.currentTeam?.isRenewalStopped?"DISCONTINUED CARD EXPIRED":"ACTIVE":"ACTIVE CARD EXPIRED"},Xa="account_summary_active_badge",za="account_summary_expired_badge",qa="account_summary_days_left",ja="account_summary_months_left",Fa="account_summary_days_ago",Ga="account_summary_ends_on_header",Va="account_summary_ended_on_header",Ha="account_summary_renews_on_header",Wa=({translate:e,badgeLabel:t,badgeMood:n,supportingDescription:a,dateHeader:r,withCtaButton:s=!1})=>{const{routes:l}=(0,i.Xo)();return(0,S.BX)("div",{id:"HEADER",sx:{display:"flex",justifyContent:"space-between"},children:[(0,S.BX)("div",{className:"automation-tests-tac-billing",sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,S.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,S.tZ)(o.Ct,{label:t,mood:n}),(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"danger"===n?"ds.text.danger.standard":"ds.text.neutral.standard",sx:{alignSelf:"center"},children:a})]}),(0,S.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.small",color:"danger"===n?"ds.text.danger.standard":"ds.text.neutral.standard",children:r})]}),s?(0,S.tZ)(o.zx,{mood:"brand",intensity:"catchy",sx:{maxHeight:"40px",alignSelf:"center"},as:i.rU,to:l.teamAccountCheckoutRoutePath,children:e("team_dashboard_buy_dashlane_button")}):null]})},$a=({planName:e,hideTotalPrice:t,seatsNumber:n,isRenewalStopped:a,isMonthlyPlan:r,currency:s,pricePerSeat:l,amountFormatted:c,addSeatsButton:d,upgradeButton:_})=>{const{translate:u}=(0,p.Z)(),{routes:m}=(0,i.Xo)(),g=r?"account_summary_price_per_month":"account_summary_yearly_billing_cycle",h=r?"account_summary_price_per_month_value":"account_summary_price_per_year";return(0,S.BX)("div",{sx:{height:"136px",display:"flex",flexDirection:"column",gap:"16px",margin:"15px 0"},children:[(0,S.BX)("div",{sx:{display:"flex",justifyContent:"space-between",gap:"16px"},children:[(0,S.BX)("div",{sx:{flex:"1 1 224px"},children:[(0,S.tZ)(o.CW,{label:u("account_summary_current_plan_label"),value:e}),t?(0,S.tZ)(o.Qj,{as:i.rU,to:m.teamAccountCheckoutRoutePath,sx:{cursor:"pointer"},children:u("team_dashboard_buy_dashlane_button")}):null,_?(0,S.tZ)(o.Qj,{as:i.rU,to:m.teamAccountChangePlanRoutePath,children:u("team_account_starter_upgrade_button")}):null]}),(0,S.BX)("div",{sx:{flex:"1 1 224px"},children:[(0,S.tZ)(o.CW,{"data-testid":"total-seats",label:u("account_summary_total_seats_label"),value:String(n)}),d.withAddSeatsButton?(0,S.tZ)(o.Qj,{as:"button",onClick:d.openAddSeatsDialog,sx:{"> button":{cursor:"pointer"}},children:u("team_account_teamplan_changeplan_success_features_actions_add_seats")}):null]}),(0,S.tZ)("div",{sx:{flex:"1 1 224px"},children:(0,S.tZ)(o.CW,{label:u("account_summary_billing_cycle_label"),value:u(g)})})]}),(0,S.BX)("div",{sx:{display:"flex",justifyContent:"space-between",gap:"16px"},children:[(0,S.tZ)(o.CW,{label:u("account_summary_auto_renewal_label"),value:u(a?"account_summary_autorenewal_no":"account_summary_autorenewal_yes"),sx:{flex:"1 1 224px"}}),(0,S.tZ)(o.CW,{label:u("account_summary_price_per_seat_label"),value:u(h,{price:u.price(s,l,{notation:"standard"})}),sx:{flex:"1 1 224px"}}),(0,S.tZ)(o.CW,{label:u("account_summary_total_price_label"),value:t?"-":u(h,{price:u.price(s,c,{notation:"standard"})}),sx:{flex:"1 1 224px"}})]})]})};var Ka=n(70797),Ya=n(17676);const Qa=54999,Ja="sales@dashlane.com",ei={REDEEM_SUCCESS:"team_account_teamplan_upgrade_redeem_success",REDEEM_ERROR:"team_account_teamplan_upgrade_redeem_error",STARTER:"leeloo_teamplan_starter",BUSINESS:"leeloo_teamplan_business",TEAM:"leeloo_teamplan_team"},ti=e=>e>Qa;function ni(e,t){switch(e){case _.lD.Starter:return t(ei.STARTER);case _.lD.Team:return t(ei.TEAM);case _.lD.Business:return t(ei.BUSINESS);default:throw new Error("Cannot retrieve default key")}}var ai=n(11538);const ii=({isComputing:e,className:t,price:n})=>{const a=e?(0,S.tZ)(ai.Z,{size:16,containerStyle:{display:"inline-block",position:"relative"}}):n;return(0,S.tZ)("span",{className:t,children:a})},ri=({billingDetails:e,additionalSeatsDetails:t})=>{var n,a;const{translate:i}=(0,p.Z)(),r=e.additionalSeats.seatsCount,s=null!=(n=e.additionalSeats.taxes)?n:0,o=i.price(e.currency,s/100),l=s>0,c=e.renewal.value+(null!=(a=e.renewal.taxes)?a:0),d=i.price(e.currency,c/100),_=100*t.reduce(((e,t)=>e+t.costPerSeat*t.numberOfSeats),0),u=i.price(e.currency,_/100),m=_-e.additionalSeats.value,g=_+s-m;return{additionalSeatsCount:r,additionalSeatsTaxesTranslation:o,hasTax:l,renewalTotalPrice:d,tierPriceTranslation:u,proratedDiscountTranslation:i.price(e.currency,m/100),hasProratedDiscount:m>0,dueTodayTranslation:i.price(e.currency,g/100)}};var si,oi,li,ci,di;const _i={margin:"24px 0",color:"ds.text.neutral.standard"},ui=({label:e,labelSx:t,value:n})=>(0,S.BX)(o.kC,{sx:_i,children:[e?(0,S.tZ)("div",{sx:{...t,flex:1},children:e}):null,n?(0,S.tZ)("div",{sx:{flex:0},children:n}):null]}),mi=({nextBillingDate:e,billingDetails:t,dueNowTranslation:n,seatCountLabel:a,totalSeatCount:i,onAdditionalSeatCountChange:s,isComputingBilling:l,additionalSeatsDetails:c,planType:d,billingCountry:_,initialAdditionalSeatCount:u})=>{const{translate:m}=(0,p.Z)(),{additionalSeatsCount:h,additionalSeatsTaxesTranslation:y,hasTax:b,renewalTotalPrice:x,tierPriceTranslation:f,proratedDiscountTranslation:v,hasProratedDiscount:C}=ri({billingDetails:t,additionalSeatsDetails:c}),{pollUntilCardUpdate:E}=(0,g.C)({}),[Z,D]=(0,r.useState)(!1),T="US"===_?"team_account_teamplan_upgrade_tax":"team_account_teamplan_vat",k="invoice"===d?"team_account_teamplan_upgrade_invoice_renewal_price":b?"US"===_?"team_account_teamplan_upgrade_renewal_tax_price":"team_account_teamplan_upgrade_renewal_vat_price":"team_account_teamplan_upgrade_renewal_price";return(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.kC,{sx:{padding:"28px 0",fontSize:4,fontWeight:"bold",color:"ds.text.neutral.catchy"},children:(0,S.tZ)(vt.w,{inputWidth:"66px",label:a,id:"numberOfSeats",defaultValue:u,minValue:1,onChange:s})}),si||(si=(0,S.tZ)(Ct,{})),(0,S.tZ)(ui,{label:m("team_account_teamplan_upgrade_premium_number_of_seats"),value:i}),(0,S.tZ)(ui,{label:m("team_account_teamplan_upgrade_new_seat",{count:h}),value:f}),b&&(0,S.tZ)(ui,{label:m(T),value:y}),C&&(0,S.tZ)(ui,{label:(0,S.BX)(S.HY,{children:[(0,S.tZ)(re.nvN,{children:m("team_account_teamplan_changeplan_order_summary_prorated_discount")}),(0,S.tZ)(re.ua7,{content:m("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip"),children:(0,S.tZ)(re.uMt,{size:16,color:re.colors.grey00})})]}),labelSx:{display:"flex",alignItems:"center"},value:v}),(0,S.BX)(S.HY,{children:[oi||(oi=(0,S.tZ)(Ct,{})),(0,S.tZ)(re.nvN,{sx:{margin:"24px 0",fontSize:"18px"},children:m("team_payment_method_dialog_credit_card")}),(0,S.BX)(o.Zb,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[li||(li=(0,S.tZ)($n.I,{b2c:!1,isAppStoreUser:!1,isGooglePlayUser:!1})),(0,S.tZ)(o.zx,{icon:ci||(ci=(0,S.tZ)(o.JO,{name:"ActionEditOutlined"})),layout:"iconLeading",intensity:"supershy",onClick:()=>{E(),D(!0)},children:Z?(0,S.tZ)(Wn.J,{b2c:!1,setPaymentLoading:D,mode:Wn.A.UPDATE}):m("team_account_name_edit_label")})]})]}),(0,S.tZ)(o.kC,{sx:_i,children:(0,S.tZ)(o.ke,{title:m(k,{totalPrice:x,totalSeat:i,date:m.shortDate(e,Vt._T.LL)})})}),di||(di=(0,S.tZ)(Ct,{})),(0,S.BX)(o.kC,{sx:{marginTop:"24px",fontSize:4},children:[(0,S.tZ)("div",{sx:{flex:1},children:m("team_account_teamplan_upgrade_due_now")}),(0,S.tZ)(ii,{isComputing:l,price:n,className:"totalAmount--Dn0SzKqvJj"})]})]})},pi=(e,t)=>t.startMembers-e.startMembers,gi=(e,t,n)=>{if(!n)return[];const a=n.slice(0).sort(pi);if(0!==a[a.length-1].startMembers)throw new Error("getAdditionalSeatsCostDetails:: missing tier one in price ranges");if(e<0||t<0)throw new Error("getAdditionalSeatsCostDetails:: number of licences cannot be negative");return a.reduce(((e,t)=>({membersRangeEnd:n,costDetails:a},i)=>{const r=i.startMembers;if(r<=t&&n>e&&t>e){const s=Math.max(Math.max(r-1,e),0),o=Math.min(t,n-1);a.unshift({costPerSeat:i.price/100,numberOfSeats:o-s})}return{membersRangeEnd:r,costDetails:a}})(e,t),{membersRangeEnd:Number.MAX_VALUE,costDetails:[]}).costDetails},hi=(0,r.forwardRef)((function({nextBillingDetails:e,billingDetails:t,isComputingBilling:n,onSeatCountChange:a,numberOfCurrentPaidSlots:i,numberOfCurrentUsedSlots:s,currentPlanPriceRanges:l,planType:c,billingCountry:d,initialNumberOfNewSeats:_},u){var m;const[g,h]=(0,r.useState)(_),[y,b]=(0,r.useState)(!1),{translate:x}=(0,p.Z)();(0,r.useImperativeHandle)(u,(()=>({additionalSeatCount:g})));const f=i+g,v=(0,Rt.Z)(e.dateUnix),C=gi(i,t.renewal.seatsCount,l),E=null!=(m=t.additionalSeats.taxes)?m:0,Z=t.additionalSeats.value+E,D=y?"-":x.price(t.currency,Z/100),T=x("team_account_teamplan_upgrade_premium_number_of_additional_seats"),k=y?x("team_account_teamplan_upgrade_premium_buy_more_seats_than_cap",{seatCap:Qa,salesEmail:Ja}):g<1?x("team_account_teamplan_upgrade_premium_buy_more_seats_when_premium",{count:1}):s>f?x("team_account_teamplan_upgrade_premium_below_used_seat_count",{usedSeatCount:s}):null;return(0,S.BX)(S.HY,{children:[k?(0,S.tZ)(o.ke,{className:"errorToaster--mgQdyQZSK3",title:k,mood:"danger"}):null,(0,S.tZ)(mi,{nextBillingDate:v,billingDetails:t,dueNowTranslation:D,seatCountLabel:T,totalSeatCount:f,onAdditionalSeatCountChange:e=>{const t=e<0,n=e>Qa;b(n),h(e),n||t||a(e)},isComputingBilling:n,additionalSeatsDetails:C,planType:null!=c?c:"",billingCountry:d,initialAdditionalSeatCount:_})]})})),yi=hi;var bi;const xi=()=>{const{translate:e}=(0,p.Z)();return(0,S.tZ)(re.u_l,{isOpen:!0,onClose:()=>{},children:(0,S.BX)(o.kC,{alignItems:"center",flexDirection:"column",justifyContent:"center",sx:{width:"100vw",height:"100vh",backgroundColor:"ds.background.default"},children:[bi||(bi=(0,S.tZ)(o.ZX,{size:"xlarge"})),(0,S.BX)(o.kC,{alignItems:"center",flexDirection:"column",justifyContent:"center",gap:"6px",sx:{paddingTop:"22px"},children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("team_account_addseats_processing_copy_line_1")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("team_account_addseats_processing_copy_line_2")})]})]})})};var Si=n(69340);const fi=e=>{const{reportTACError:t}=H(),[n,a]=(0,r.useState)({renewal:{seatsCount:0,value:0,taxes:0},additionalSeats:{seatsCount:0,value:0,taxes:0},currency:"usd"}),[i,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(0),[c,d]=(0,r.useState)(0),_=(0,D.debounce)((n=>{(async n=>{try{var i;const t=await he.C.computePlanPricing({seats:n});if(!t.success)return;const o={renewal:{seatsCount:(r=t.data).renewal.seatsCount,value:r.renewal.price.value,taxes:r.renewal.price.taxes},additionalSeats:{seatsCount:r.additionalSeats.seatsCount,value:r.additionalSeats.price.value,taxes:r.additionalSeats.price.taxes},currency:r.renewal.price.currency};if(null!==e&&e()!==o.additionalSeats.seatsCount)return;const c=o.additionalSeats.value,_=null!=(i=o.additionalSeats.taxes)?i:0;l(c),d(_),a(o),s(!1)}catch(e){const n=new Error((0,Si.i)(e));t(n)}var r})(n)}),500);return{billingDetails:n,isComputingBilling:i,amountToPay:o,amountToTax:c,onSeatCountChange:e=>{_(e),s(!0)}}};var vi;const Ci=({onUpgradeSuccess:e,nextBillingDetails:t,numberOfCurrentPaidSlots:n,numberOfCurrentUsedSlots:a,onRequestClose:i,planTier:s,prefilledNumberOfSeatsToBuy:_})=>{const u=(0,r.useRef)(null),[g,h]=(0,r.useState)(!0),[y,b]=(0,r.useState)(!1),{translate:x}=(0,p.Z)(),{reportTACError:f}=H(),v=(0,c.k)(d.o,"getTeamBillingInformation"),{addSeats:C}=(0,q.u)(d.o),E=(0,te.JS)(),{loading:D,billingCountry:T}=Z(),k=v.status===L.rq.Success?v.data.planDetails.priceRanges:void 0,I=E.status===L.rq.Success?E.data.b2bStatus?.currentTeam?.teamInfo.planType:void 0,A=null!=_?_:1,w=(0,r.useCallback)((()=>{var e;return null!=(e=u?.current?.additionalSeatCount)?e:A}),[]),N=null===u||v.status===L.rq.Loading||E.status===L.rq.Loading||D||void 0===T,{billingDetails:O,isComputingBilling:R,onSeatCountChange:M}=fi(w),B=ni(s,x);(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacAccountBuy)}),[]),(0,r.useEffect)((()=>{if(v.status===L.rq.Error){const e=new Error("Error retrieving TeamBillingInformation to update price ranges");f(e)}}),[v]),(0,r.useEffect)((()=>{M(w())}),[w]);const P=gi(n,O.renewal.seatsCount,k);if(N)return null;const U=(0,S.BX)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",maxWidth:"100%"},children:[(0,S.tZ)(o.zx,{intensity:"quiet",mood:"neutral",size:"medium",onClick:i,sx:{marginRight:"8px"},children:x("team_account_teamplan_upgrade_premium_cancel")}),(0,S.tZ)(o.zx,{size:"medium",onClick:async()=>{h(!1),b(!0),"success"===(await C({seats:w()})).tag&&e(P,O)},id:"buy-seats-button",children:x("team_account_teamplan_upgrade_buy_seat",{count:w()})})]});return(0,S.BX)(S.HY,{children:[y?vi||(vi=(0,S.tZ)(xi,{})):null,g?(0,S.tZ)(Ya.o,{showCloseIcon:!0,footer:U,title:x("team_account_teamplan_upgrade_add_seats_title",{plan:B}),isOpen:!0,onRequestClose:i,children:(0,S.tZ)(yi,{ref:u,planType:I,nextBillingDetails:t,billingDetails:O,isComputingBilling:R,onSeatCountChange:M,numberOfCurrentPaidSlots:n,numberOfCurrentUsedSlots:a,currentPlanPriceRanges:k,billingCountry:T,initialNumberOfNewSeats:A})}):null]})};var Ei=n(67668);const Zi=({cardTitle:e,cardDescription:t,iconName:n})=>(0,S.BX)(S.HY,{children:[(0,S.tZ)(re.dDn,{sx:{alignSelf:"center"},children:(0,S.tZ)(o.vY,{name:n,size:"medium",mood:"brand"})}),(0,S.BX)(re.dDn,{children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:e}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",sx:{marginTop:"4px"},children:t})]})]});var Di,Ti,ki;const Ii={marginTop:"16px","&:hover":{cursor:"pointer",borderWidth:"2px",borderColor:"ds.border.brand.standard.hover"}},Ai={width:"100%",padding:"20px 16px"},wi=({handleClose:e,openUpgradeDialog:t})=>{const[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),{translate:l}=(0,p.Z)(),{loading:c,hasCreditCardPaymentMethod:d,isExpired:_,pollUntilCardUpdate:u}=(0,g.C)({handleCardUpdate:t}),m=d?Wn.A.REPLACE:Wn.A.ADD,h=Di||(Di=(0,S.tZ)(o.zx,{intensity:"supershy",size:"large",layout:"iconOnly",icon:(0,S.tZ)(o.JO,{name:"ArrowRightOutlined",color:"ds.text.neutral.standard"})}));return c?Ti||(Ti=(0,S.tZ)(o.ZX,{})):(0,S.BX)(o.Vq,{isOpen:!0,closeActionLabel:l("_common_dialog_dismiss_button"),onClose:e,title:l("team_payment_method_dialog_buy_seats"),"aria-describedby":"dialogContent",children:[(0,S.tZ)(o.nv,{children:l("team_payment_method_dialog_title")}),d?(0,S.tZ)(re.Zbd,{sx:Ii,onClick:()=>{_?(u(),s(!0)):t()},children:(0,S.BX)(re.T5p,{gap:"12px",gridTemplateColumns:"1fr 60px",alignItems:"center",sx:Ai,children:[ki||(ki=(0,S.tZ)(re.dDn,{children:(0,S.tZ)(Ei.I,{b2b:!0,hideTitle:!0,hideUpdateButton:!0})})),(0,S.tZ)(re.dDn,{sx:{margin:"auto"},children:_&&i?(0,S.tZ)(o.zx,{intensity:"supershy",size:"large",children:(0,S.tZ)(Wn.J,{b2c:!1,setPaymentLoading:s,mode:Wn.A.UPDATE})}):h})]})}):null,(0,S.tZ)(re.Zbd,{sx:Ii,onClick:()=>{u(),a(!0)},children:(0,S.BX)(re.T5p,{gap:"12px",gridTemplateColumns:"40px 1fr 60px",sx:Ai,children:[(0,S.tZ)(Zi,{cardTitle:l(d?"team_payment_method_dialog_another_credit_card":"team_payment_method_dialog_credit_card"),cardDescription:l(d?"team_payment_method_dialog_replace_credit_card":"team_payment_method_dialog_secondary_payment"),iconName:"ItemPaymentOutlined"}),(0,S.tZ)(re.dDn,{sx:{margin:"auto"},children:n?(0,S.tZ)(o.zx,{intensity:"supershy",size:"large",children:(0,S.tZ)(Wn.J,{b2c:!1,setPaymentLoading:a,mode:m})}):h})]})}),(0,S.tZ)(re.Zbd,{sx:Ii,onClick:()=>(0,P.Yo)(ee.i1),children:(0,S.BX)(re.T5p,{gap:"12px",gridTemplateColumns:"40px 1fr 60px",sx:Ai,children:[(0,S.tZ)(Zi,{cardTitle:l("team_account_invoice_payment"),cardDescription:l("team_payment_method_dialog_support_team"),iconName:"ItemTaxNumberOutlined"}),(0,S.tZ)(re.dDn,{sx:{margin:"auto"},children:h})]})})]})},Ni=()=>(0,S.tZ)("hr",{sx:{borderTop:"1px solid ds.border.neutral.standard.idle",width:"100%"}});var Oi,Ri,Li,Mi,Bi,Pi,Ui,Xi,zi;const qi=({numberOfCurrentPaidSlots:e,onClose:t,onUpgradeSuccess:n,prefilledNumberOfSeatsToBuy:a})=>{var i,s;const{translate:l}=(0,p.Z)(),m=(0,u.s)(),h=(0,c.k)(St.K,"getPlanPricingDetails"),{computePlanPricingDetails:y}=(0,q.u)(St.K),{addSeats:b}=(0,q.u)(d.o),{pollUntilCardUpdate:x}=(0,g.C)({}),{billingCountry:f}=Z(),[v,C]=(0,r.useState)(!1),[E,D]=(0,r.useState)(null!=a?a:1),[T,k]=(0,r.useState)(!1),[I,A]=(0,r.useState)(!1),w=h.status===L.rq.Loading;if((0,r.useEffect)((()=>{y({numberOfSeats:E})}),[E]),!m||!f||h.status===L.rq.Error||!h.data)return null;const{spaceTier:N,nextBillingDetails:O,billingType:R,planDetails:M}=m,{renewal:B,additionalSeats:P,currency:U}=h.data,X=(0,Rt.Z)(O.dateUnix),z=ni(N,l),F=gi(e,B.seatsCount,M.priceRanges),G=e+E,V=null!=(i=P.taxes)?i:0,H=100*F.reduce(((e,t)=>e+t.costPerSeat*t.numberOfSeats),0),W=l.price(U,H/100),$=!!P.taxes,K=$?"US"===f?"team_account_teamplan_upgrade_renewal_tax_price":"team_account_teamplan_upgrade_renewal_vat_price":"team_account_teamplan_upgrade_renewal_price",Y=l.price(U,V/100),Q=R===_.qo.Invoice?"team_account_teamplan_upgrade_invoice_renewal_price":K,J=H-P.value,ee=l.price(U,J/100),te=B.value+(null!=(s=B.taxes)?s:0),ne=l.price(U,te/100),ae=P.value+V,ie=T?"-":l.price(U,ae/100),re=J>0;return I?Oi||(Oi=(0,S.tZ)(xi,{})):(0,S.BX)(o.Vq,{isOpen:!0,onClose:t,closeActionLabel:l("_common_dialog_dismiss_button"),title:l("team_account_teamplan_upgrade_add_seats_title",{plan:z}),actions:{primary:(0,S.tZ)(o.zx,{onClick:async()=>{A(!0);const e=await b({seats:E});(0,j.d6)(e)&&(A(!1),n(F,{renewal:B,additionalSeats:P,currency:U}))},id:"buy-seats-button",children:l("team_account_teamplan_upgrade_buy_seat",{count:E})}),secondary:(0,S.tZ)(o.zx,{onClick:t,children:l("team_account_teamplan_upgrade_premium_cancel")})},children:[(0,S.tZ)(o.kC,{sx:{padding:"15px 0",fontSize:4,fontWeight:"bold",color:"ds.text.neutral.catchy"},children:(0,S.tZ)(vt.w,{inputWidth:"66px",id:"numberOfSeats",defaultValue:null!=a?a:1,minValue:1,onChange:async e=>{const t=e<0,n=e>Qa;k(n),n||t||D(e)},label:l("team_account_teamplan_upgrade_premium_number_of_additional_seats")})}),Ri||(Ri=(0,S.tZ)(Ni,{})),(0,S.BX)(o.kC,{gap:"16px",flexDirection:"column",children:[(0,S.BX)(o.kC,{justifyContent:"space-between",flexDirection:"row",children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.catchy",children:l("team_account_teamplan_upgrade_premium_number_of_seats")}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.catchy",children:G})]}),(0,S.BX)(o.kC,{justifyContent:"space-between",flexDirection:"row",children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.catchy",children:l("team_account_teamplan_upgrade_new_seat",{count:E})}),w?Li||(Li=(0,S.tZ)(o.ZX,{size:"xsmall"})):(0,S.tZ)(o.nv,{color:"ds.text.neutral.catchy",children:W})]}),$?(0,S.BX)(o.kC,{justifyContent:"space-between",flexDirection:"row",children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.catchy",children:l("US"===f?"team_account_teamplan_upgrade_tax":"team_account_teamplan_vat")}),w?Mi||(Mi=(0,S.tZ)(o.ZX,{size:"xsmall"})):(0,S.tZ)(o.nv,{color:"ds.text.neutral.catchy",children:Y})]}):null,re?(0,S.BX)(o.kC,{justifyContent:"space-between",flexDirection:"row",children:[(0,S.BX)(o.nv,{color:"ds.text.neutral.catchy",sx:{display:"flex",alignItems:"center",gap:"5px"},children:[l("team_account_teamplan_changeplan_order_summary_prorated_discount"),(0,S.tZ)(o.JO,{name:"FeedbackInfoOutlined",tooltip:l("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip"),size:"xsmall"})]}),w?Bi||(Bi=(0,S.tZ)(o.ZX,{size:"xsmall"})):(0,S.tZ)(o.nv,{color:"ds.text.neutral.catchy",children:ee})]}):null]}),Pi||(Pi=(0,S.tZ)(Ni,{})),(0,S.BX)(o.kC,{gap:"16px",flexDirection:"column",children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:l("team_payment_method_dialog_credit_card")}),(0,S.BX)(o.Zb,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Ui||(Ui=(0,S.tZ)($n.I,{b2c:!1,isAppStoreUser:!1,isGooglePlayUser:!1})),(0,S.tZ)(o.zx,{icon:Xi||(Xi=(0,S.tZ)(o.JO,{name:"ActionEditOutlined"})),layout:"iconLeading",intensity:"supershy",onClick:()=>{x(),C(!0)},children:v?(0,S.tZ)(Wn.J,{b2c:!1,setPaymentLoading:C,mode:Wn.A.UPDATE}):l("team_account_name_edit_label")})]})]}),(0,S.tZ)(o.ke,{sx:{marginTop:"16px"},mood:"neutral",title:l(Q,{totalPrice:ne,totalSeat:G,date:l.shortDate(X,Vt._T.LL)})}),(0,S.BX)(o.kC,{justifyContent:"space-between",flexDirection:"row",sx:{marginTop:"16px"},children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:l("team_account_teamplan_upgrade_due_now")}),w?zi||(zi=(0,S.tZ)(o.ZX,{size:"xsmall"})):(0,S.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.small",children:ie})]})]})},ji=({nextBillingDetails:e,numberOfCurrentPaidSlots:t,numberOfCurrentUsedSlots:n,planTier:a,prefilledNumberOfSeatsToBuy:i,isAddSeatsDialogOpen:r,isChoosePaymentMethodDialogOpen:s,setIsAddSeatsDialogOpen:o,setIsChoosePaymentMethodDialogOpen:l})=>{const c=(0,xe.o)(Ka.P.ComputePlanPricingMigration),{setSeatDetails:d,setIsAddSeatsSuccessPageOpen:_}=pt(),u=()=>{o(!1)},m=(e,t)=>{d({lastAdditionalSeatsDetails:e,lastBillingDetails:t}),o(!1),_(!0)};return r?c?(0,S.tZ)(qi,{numberOfCurrentPaidSlots:t,onUpgradeSuccess:m,onClose:u,prefilledNumberOfSeatsToBuy:i}):(0,S.tZ)(Ci,{nextBillingDetails:e,numberOfCurrentPaidSlots:t,numberOfCurrentUsedSlots:n,onUpgradeSuccess:m,onRequestClose:u,planTier:a,prefilledNumberOfSeatsToBuy:i}):s?(0,S.tZ)(wi,{openUpgradeDialog:()=>{o(!0),l(!1)},handleClose:()=>{l(!1)}}):null};var Fi;const Gi="account_summary_update_payment_method",Vi=()=>{var e;const{translate:t}=(0,p.Z)(),{search:n}=(0,De.TH)(),a=(0,u.s)(),i=(0,te.lZ)(),c=(0,te.JS)(),d=(0,X.C)(),{isExpired:h,pollUntilCardUpdate:y}=(0,g.C)({}),[b,x]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),[C,E]=(0,r.useState)(!1),Z=()=>{a?.billingType===_.qo.Invoice?E(!0):v(!0)};if((0,r.useEffect)((()=>{if(n?.includes("showSeatsDialog")){const e=setTimeout((()=>{Z()}),500);return()=>clearTimeout(e)}}),[]),!a||i.isLoading||c.status!==s.rq.Success||!c.data.b2bStatus||!d)return null;const D=Ua(i,c.data.b2bStatus,d,h),{badgeLabel:T,badgeMood:k,supportingDescription:I,dateHeader:A,alertInfobox:w,withCtaButton:N}=((e,t,n,a)=>{const i=(0,Rt.Z)(n.dateUnix),{months:r=0,days:s=0,years:o=0}=(e=>{const t=(0,Pa.Z)({start:Date.now(),end:e});return{days:t.days,months:t.months,years:t.years}})(i),l=a.daysLeftInTrial,c=`\n  ${o>0?e("account_summary_years_left",{count:o}):""}\n  ${e(ja,{count:r})} ${e(qa,{count:s})}`;switch(t){case"ACTIVE":return{badgeLabel:e(Xa),badgeMood:"positive",supportingDescription:c,dateHeader:e(Ha,{date:e.shortDate(i,Vt.qG.ll)})};case"ACTIVE CANCELED":return{badgeLabel:e(Xa),badgeMood:"positive",supportingDescription:`${e(ja,{count:r})} ${e(qa,{count:s})}`,dateHeader:e(Ga,{date:e.shortDate(i,Vt.qG.ll)})};case"ACTIVE CARD EXPIRED":return{badgeLabel:e(Xa),badgeMood:"positive",supportingDescription:`${e(ja,{count:r})} ${e(qa,{count:s})}`,dateHeader:e(Ha,{date:e.shortDate(i,Vt.qG.ll)}),alertInfobox:{title:e("account_summary_active_cc_expired_title",{date:e.shortDate(i,Vt.qG.LL)}),description:e("account_summary_active_cc_expired_description"),icon:"FeedbackWarningOutlined",mood:"warning"}};case"DISCONTINUED CANCELED":return{badgeLabel:e(za),badgeMood:"danger",supportingDescription:e(Fa,{count:Math.abs(l)}),dateHeader:e(Va,{date:e.shortDate(i,Vt.qG.ll)})};case"DISCONTINUED CARD EXPIRED":return{badgeLabel:e(za),badgeMood:"danger",supportingDescription:e(Fa,{count:Math.abs(l)}),dateHeader:e(Va,{date:e.shortDate(i,Vt.qG.ll)}),alertInfobox:{title:e("account_summary_discontinued_cc_expired_title"),description:e("account_summary_discontinued_cc_expired_description"),icon:"FeedbackFailOutlined",mood:"danger"}};case"DISCONTINUED TRIAL":return{badgeLabel:e("account_summary_trial_ended_badge"),badgeMood:"danger",supportingDescription:e(Fa,{count:Math.abs(l)}),dateHeader:e(Va,{date:e.shortDate(i,Vt.qG.ll)}),withCtaButton:!0};case"GRACE PERIOD":return{badgeLabel:e("account_summary_trial_extended_badge"),badgeMood:"warning",supportingDescription:e(qa,{count:l}),dateHeader:e(Ga,{date:e.shortDate(i,Vt.qG.ll)}),withCtaButton:!0};case"TRIAL":return{badgeLabel:e("account_summary_trial_badge"),badgeMood:"brand",supportingDescription:e(qa,{count:l}),dateHeader:e(Ga,{date:e.shortDate(i,Vt.qG.ll)}),withCtaButton:!0}}})(t,D,a.nextBillingDetails,d),O=null!=(e=c.data.b2bStatus.currentTeam?.isRenewalStopped)&&e,{currency:R,amountFormatted:L,pricePerSeat:M}=a.nextBillingDetails,B="TRIAL"===D||"GRACE PERIOD"===D||"DISCONTINUED TRIAL"===D,P=["ACTIVE","ACTIVE CANCELED","ACTIVE CARD EXPIRED"].includes(D),U=a.spaceTier!==_.lD.Starter&&a.spaceTier!==_.lD.Standard&&P,z=[_.lD.Starter,_.lD.Team,_.lD.Standard].includes(a.spaceTier)&&P,q=(e=>{var t;const n=null!=(t=new URLSearchParams(e).get("seatsToBuy"))?t:"";let a=parseInt(n,10);return isNaN(a)&&(a=void 0),a})(n),j=((e,t)=>e===_.lD.Team?`Dashlane ${t("team_account_teamplan_team")}`:e===_.lD.Starter?`Dashlane ${t("team_account_teamplan_changeplan_plans_starter_name")}`:e===_.lD.Standard?`Dashlane ${t("team_account_teamplan_standard")}`:e===_.lD.BusinessPlus?`Dashlane ${t("team_account_teamplan_business_plus")}`:`Dashlane ${t("team_account_teamplan_business")}`)(a.spaceTier,t),F="monthly"===a.planDetails.duration;return(0,S.BX)(S.HY,{children:[w?(0,S.tZ)(o.ke,{sx:{marginBottom:"16px"},title:w.title,size:"large",description:w.description,mood:w.mood,icon:w.icon,actions:[(0,S.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:"danger"===w?.mood?l.ClickOrigin.SubscriptionExpiredBanner:l.ClickOrigin.UpdateCreditCardReminder,button:l.Button.UpdatePaymentMethod})),y(),x(!0)},children:b?(0,S.tZ)(Wn.J,{b2c:!1,setPaymentLoading:x}):t(Gi)},t(Gi))]}):null,(0,S.BX)(o.Zb,{sx:{maxWidth:"752px",gap:"24px"},children:[(0,S.tZ)(Wa,{translate:t,badgeLabel:T,badgeMood:k,supportingDescription:I,dateHeader:A,withCtaButton:N}),Fi||(Fi=(0,S.tZ)(Ni,{})),(0,S.tZ)($a,{planName:j,isMonthlyPlan:F,hideTotalPrice:B,seatsNumber:a.seatsNumber,isRenewalStopped:O,currency:R,pricePerSeat:M,amountFormatted:L,addSeatsButton:{withAddSeatsButton:U,openAddSeatsDialog:()=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:l.ClickOrigin.AccountStatus,button:l.Button.BuySeats})),Z()}},upgradeButton:z})]}),(0,S.tZ)(ji,{planTier:a.spaceTier,prefilledNumberOfSeatsToBuy:q,nextBillingDetails:a.nextBillingDetails,numberOfCurrentPaidSlots:a.seatsNumber,numberOfCurrentUsedSlots:a.usersToBeRenewedCount,isAddSeatsDialogOpen:f,isChoosePaymentMethodDialogOpen:C,setIsAddSeatsDialogOpen:v,setIsChoosePaymentMethodDialogOpen:E})]})},Hi=()=>{const{data:e,status:t}=(0,c.k)(d.o,"getTeamName");return t!==L.rq.Success?null:e};var Wi=n(45364);let $i=function(e){return e[e.DUPLICATE=0]="DUPLICATE",e[e.SOMETHING_WRONG=1]="SOMETHING_WRONG",e[e.EMPTY=2]="EMPTY",e[e.MALFORMED=3]="MALFORMED",e}({});const Ki=(e,t)=>{switch(t){case $i.DUPLICATE:return e("team_account_name_already_exists");case $i.EMPTY:return e("team_account_name_is_empty");case $i.MALFORMED:return e("team_account_name_is_malformed");case $i.SOMETHING_WRONG:default:return e("team_account_name_error_something_wrong")}},Yi=({isOpen:e,setIsOpen:t,setTeamName:n,signalNameChangeSuccess:a,teamName:i,teamId:s})=>{const[l,c]=(0,r.useState)(i),[_,u]=(0,r.useState)(),{editTeamName:m}=(0,q.u)(d.o),{translate:g}=(0,p.Z)();(0,r.useEffect)((()=>{c(i)}),[i]);const h=()=>{t(!1),c(i),u(void 0)};return(0,S.BX)(o.Vq,{isOpen:e,actions:{primary:{children:g("account_summary_company_details_name_dialog_save_button"),onClick:()=>(async e=>{if(!e){const e=Ki(g,$i.EMPTY);throw u(e),new Error(e)}const i=await m({teamId:s,newTeamName:e});if((0,j.hx)(i)){if(a(!1),i.error.tag===Wi.LP.DUPLICATE){const e=Ki(g,$i.DUPLICATE);throw u(e),new Error(e)}if(i.error.tag===Wi.LP.INVALID_TEAM_SETTING_VALUE){const e=Ki(g,$i.MALFORMED);throw u(e),new Error(e)}{const e=Ki(g,$i.SOMETHING_WRONG);throw u(e),new Error(e)}}t(!1),a(!0),n(e)})(l)},secondary:{children:g("account_summary_company_details_name_dialog_cancel_button"),onClick:h}},title:g("account_summary_company_details_name_dialog_title"),closeActionLabel:g("account_summary_company_details_name_dialog_close_label"),onClose:h,children:[(0,S.tZ)(o.nv,{children:g("account_summary_company_details_name_dialog_desc")}),(0,S.tZ)(o.qo,{"data-testid":"company-name",label:g("account_summary_company_details_name_dialog_field_label"),value:l,onChange:e=>{u(void 0),c(e.target.value)},sx:{marginTop:"16px"},placeholder:g("account_summary_company_details_name_dialog_field_placeholder"),error:!!_,feedback:_})]})},Qi=({hasPermission:e,style:t,teamId:n})=>{const[a,i]=(0,r.useState)(""),[s,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),_=Hi(),{translate:u}=(0,p.Z)(),{showToast:m}=(0,o.pm)();if((0,r.useEffect)((()=>{_&&i(_)}),[_]),(0,r.useEffect)((()=>{c&&m({mood:"brand",description:u("account_summary_company_details_name_success")})}),[c,m,u]),null===a||!n)return null;const g=e("ALL");return(0,S.BX)(S.HY,{children:[(0,S.BX)("div",{sx:t.DISPLAY_GROUP,children:[(0,S.tZ)(o.CW,{"data-testid":"company-name-display",label:u("account_summary_company_details_name_label"),value:a,placeholder:u("account_summary_company_details_empty_field_placeholder")}),g?(0,S.tZ)(o.Qj,{onClick:()=>{l(!0)},as:"button",sx:t.LINK_BUTTON,children:u("account_summary_company_details_name_edit_button")}):null]}),(0,S.tZ)(Yi,{isOpen:s,setIsOpen:l,signalNameChangeSuccess:d,teamName:a,setTeamName:i,teamId:n})]})};var Ji=n(77810);const er=e=>e===L.rq.Success,tr=e=>Array.isArray(e);var nr=n(99706);const ar="team_account_vat_number_error_something_wrong",ir=({isOpen:e,setIsOpen:t,setVATNumber:n,signalVATChangeSuccess:a,VATNumber:i,upsertVATNumber:s,deleteVATNumber:l})=>{const[c,d]=(0,r.useState)(),[_,u]=(0,r.useState)(),{translate:m}=(0,p.Z)();(0,r.useEffect)((()=>{i&&d(i)}),[i]);const g=()=>{t(!1),d(i),u(void 0)};return(0,S.BX)(o.Vq,{isOpen:e,actions:{primary:{children:m("account_summary_company_details_vat_dialog_save_button"),onClick:()=>(async e=>{const r=m(ar);let o;if(e){if(!Mn(e)){const e=m("team_account_vat_number_invalid");throw u(e),new Error(e)}o=await s({newVATNumber:e})}else{if(!i)throw u(r),new Error(r);o=await l()}if((0,j.hx)(o)){a(!1);const e=m(ar);throw u(e),new Error(e)}t(!1),a(!0),n(e)})(null!=c?c:"")},secondary:{children:m("account_summary_company_details_vat_dialog_cancel_button"),onClick:g}},title:m("account_summary_company_details_vat_dialog_title"),closeActionLabel:m("account_summary_company_details_vat_dialog_close_label"),onClose:g,children:[(0,S.tZ)(o.nv,{children:m("account_summary_company_details_vat_dialog_desc")}),(0,S.tZ)(o.qo,{"data-testid":"enter-vat-number",label:m("account_summary_company_details_vat_dialog_field_label"),value:c,onChange:e=>{u(void 0),d(e.target.value)},sx:{marginTop:"16px"},placeholder:m("account_summary_company_details_vat_dialog_field_placeholder"),error:!!_,feedback:_,hasClearAction:!0,clearActionLabel:m("account_summary_company_details_vat_dialog_clear_label")})]})},rr=({style:e})=>{const[t,n]=(0,r.useState)(""),[a,i]=(0,r.useState)(!1),[s,l]=(0,r.useState)(!1),{translate:d}=(0,p.Z)(),{showToast:_}=(0,o.pm)(),u=(()=>{const{loading:e,billingCountry:t}=Z(),{data:n,status:a,error:i}=(0,c.k)(zt.a,"getTeamVat"),{deleteTeamVat:r,upsertTeamVat:s}=(0,q.u)(zt.a),o={isLoading:!1,isErrored:!1,isNotApplicable:!1,teamVAT:""};if(e||a===L.rq.Loading||!r||!s)return{...o,isLoading:!0};const l=a===L.rq.Error&&i.tag===nr.pe.VatNumberNotFound;return a!==L.rq.Error||l?"US"!==t?{...o,teamVAT:l?"":null!=n?n:"",deleteTeamVAT:r,upsertTeamVAT:s}:{...o,isNotApplicable:!0}:{...o,isErrored:!0}})(),{isLoading:m,isErrored:g,teamVAT:h,upsertTeamVAT:y,isNotApplicable:b,deleteTeamVAT:x}=u;return(0,r.useEffect)((()=>{m||g||n(h)}),[g,m,h]),(0,r.useEffect)((()=>{s&&_({mood:"brand",description:d("account_summary_company_details_vat_success")})}),[s,_,d]),m||g||!y||!x||b?null:(0,S.BX)(S.HY,{children:[(0,S.BX)("div",{sx:e.DISPLAY_GROUP,children:[(0,S.tZ)(o.CW,{"data-testid":"vat-number",label:d("account_summary_company_details_vat_number_label"),value:t,placeholder:d("account_summary_company_details_empty_field_placeholder")}),(0,S.tZ)(o.Qj,{onClick:()=>{i(!0)},as:"button",sx:e.LINK_BUTTON,children:d(t?"account_summary_company_details_vat_number_edit_button":"account_summary_company_details_vat_number_add_button")})]}),(0,S.tZ)(ir,{isOpen:a,setIsOpen:i,signalVATChangeSuccess:l,VATNumber:t,setVATNumber:n,upsertVATNumber:y,deleteVATNumber:x})]})},sr=e=>e.trim().toLocaleLowerCase(),or="team_account_billing_admin_search_field_placeholder",lr=({defaultSelected:e,handleConfirmClick:t,handleClose:n,allMembersCount:a,membersList:s})=>{const{translate:l}=(0,p.Z)(),{routes:c}=(0,i.Xo)(),[d,_]=(0,r.useState)(e),[u,m]=(0,r.useState)(""),[g,h]=(0,r.useState)([]),[y,b]=(0,r.useState)(!1);(0,r.useEffect)((()=>{h(((e,t)=>""===t.trim()?e:e.filter((({login:e})=>sr(e).includes(sr(t)))))(s,u).slice(0,5))}),[s,u]);const x=!g.length||e===d;return(0,S.tZ)(o.Vq,{isOpen:!0,title:l("team_account_billing_admin_dialog_title"),actions:{primary:{children:l("team_account_billing_admin_dialog_confirm"),onClick:()=>t(d),disabled:x}},onClose:n,closeActionLabel:l("_common_dialog_dismiss_button"),children:(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"1.5em"},children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:l("team_account_billing_admin_dialog_warning")}),(0,S.tZ)(o.Um,{onChange:({target:{value:e}})=>{m(e),y||b(!0)},label:l(or),placeholder:l(or)}),g.length>0?(0,S.BX)(o.kC,{gap:"5px",flexDirection:"column",children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:l("team_account_billing_admin_search_results_count",{count:g.length,totalCount:a})}),(0,S.tZ)(o.Ee,{value:d,onChange:({target:{value:e}})=>{_(e)},groupName:"billingAdmins",children:(0,S.tZ)(o.kC,{gap:"5px",flexDirection:"column",children:g.map((e=>{const{login:t}=e,n=(e=>e.isTeamCaptain?"team_members_row_captain":e.isGroupManager?"team_members_row_group_manager":null)(e);return(0,S.BX)(o.kC,{sx:{alignItems:"center",gap:"4px"},children:[(0,S.tZ)(o.Y8,{value:t,label:t,"data-testid":"billing-email"}),n?(0,S.tZ)(o.Ct,{label:l(n),sx:{marginTop:"8px"}}):null]},t)}))})}),g.length<a?(0,S.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"8px",alignItems:"center"},children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:l("team_account_billing_admin_help")}),(0,S.tZ)(o.Qj,{as:i.rU,to:c.teamMembersRoutePath,onClick:n,children:l("team_account_billing_admin_link_to_members_page")})]}):null]}):null,0===g.length?(0,S.tZ)(o.nv,{children:l("team_account_billing_admin_search_no_match")}):null]})})},cr=({style:e,teamId:t,hasPermission:n})=>{var a,i;const[s,l]=(0,r.useState)(""),[c,_]=(0,r.useState)(!1),u=ua(t),{translate:m}=(0,p.Z)(),{showToast:g}=(0,o.pm)(),{updateBillingAdmin:h}=(0,q.u)(d.o);(0,r.useEffect)((()=>{var e;u&&!s&&l(null!=(e=u.data?.billingAdmins[0])?e:"")}),[s,u]);const{isLoading:y,isErrored:b}=u;if(y||b)return null;const x=n("ALL");return(0,S.BX)(S.HY,{children:[(0,S.BX)("div",{sx:e.DISPLAY_GROUP,children:[(0,S.tZ)(o.CW,{"data-testid":"billing-contact",className:"automation-tests-tac-billing",label:m("account_summary_company_details_billing_contact_label"),value:null!=s?s:"",placeholder:m("account_summary_company_details_empty_field_placeholder"),sx:{"& input":{textOverflow:"ellipsis"}}}),x?(0,S.tZ)(o.Qj,{onClick:()=>{_(!0)},as:"button",sx:e.LINK_BUTTON,children:m("account_summary_company_details_billing_contact_edit_button")}):null]}),c?(0,S.tZ)(lr,{defaultSelected:s,handleClose:()=>{_(!1)},handleConfirmClick:async e=>{if(s===e)return;_(!1);const t=await h({newAdminEmail:e});(0,j.hx)(t)?g({mood:"danger",description:m("team_account_billing_admin_notification_something_wrong")}):(g({mood:"brand",description:m("team_account_billing_admin_notification_success")}),l(e))},membersList:null!=(a=u.data?.members)?a:[],allMembersCount:null!=(i=u.data?.members.length)?i:0}):null]})};var dr;const _r={CONTAINER:{display:"flex",justifyContent:"space-between",gap:"16px",marginBottom:"16px"},DISPLAY_GROUP:{display:"flex",flexDirection:"column",flex:"1 1 224px"},LINK_BUTTON:{"> button":{cursor:"pointer"}}},ur=()=>{const{translate:e}=(0,p.Z)(),t=(0,da.V)(),n=(()=>{const{data:e,status:t}=(0,c.k)(Ji.J,"userPermissions");return{status:t,getUserPermissions:()=>er(t)&&tr(e)?null!=e?e:[]:null,hasPermission:n=>er(t)&&tr(e)&&e.includes(n),hasAnyPermission:n=>er(t)&&tr(e)&&n.some((t=>e.includes(t))),hasAllPermissions:n=>er(t)&&tr(e)&&n.every((t=>e.includes(t)))}})(),{hasPermission:a}=n;return t.status!==L.rq.Success||null===t.teamId?null:(0,S.BX)(o.Zb,{children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e("account_summary_company_details_header")}),(0,S.BX)("div",{sx:_r.CONTAINER,children:[(0,S.tZ)(Qi,{style:_r,teamId:t.teamId,hasPermission:a}),dr||(dr=(0,S.tZ)(rr,{style:_r})),(0,S.tZ)(cr,{style:_r,teamId:t.teamId,hasPermission:a})]}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("account_summary_company_details_billing_contact_info")})]})};var mr,pr=n(45438);const gr=({label:e,value:t,...n})=>(0,S.BX)(o.kC,{justifyContent:"flex-end",...n,children:[e?(0,S.tZ)(o.kC,{alignItems:"center",sx:{flex:1},children:e}):null,t?(0,S.tZ)(o.kC,{alignItems:"center",children:t}):null]}),hr=({billingDetails:e,additionalSeatsDetails:t})=>{const{translate:n}=(0,p.Z)(),{additionalSeatsCount:a,additionalSeatsTaxesTranslation:i,hasTax:r,tierPriceTranslation:s,proratedDiscountTranslation:l,hasProratedDiscount:c,dueTodayTranslation:d}=ri({billingDetails:e,additionalSeatsDetails:t});return(0,S.BX)(o.kC,{flexDirection:"column",gap:"32px",sx:y,children:[(0,S.tZ)(gr,{alignItems:"end",label:(0,S.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:n("team_account_addseats_success_order_summary_header")}),value:(0,S.tZ)(o.nv,{textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:(0,wn.Z)(new Date,"MM/dd/yyyy")})}),(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",children:[(0,S.tZ)(gr,{label:(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",children:n("team_account_teamplan_upgrade_new_seat",{count:a})}),value:(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",children:s})}),r?(0,S.tZ)(gr,{label:(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",children:n("team_account_addseats_success_order_summary_tax")}),value:(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",children:i})}):null,c?(0,S.tZ)(gr,{label:(0,S.BX)(o.kC,{alignItems:"center",gap:"5px",children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",children:n("team_account_addseats_success_order_summary_prorated_discount")}),(0,S.tZ)(re.ua7,{content:n("team_account_addseats_success_order_summary_prorated_discount_tooltip"),children:mr||(mr=(0,S.tZ)(re.uMt,{size:16,color:"ds.text.neutral.standard"}))})]}),value:(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",children:l})}):null,(0,S.tZ)("div",{style:{width:"100%",borderColor:o.O9.lightTheme.ds.border.neutral.quiet.idle,borderWidth:"1px",borderStyle:"solid",borderBottom:"0",margin:"0"}}),(0,S.tZ)(gr,{label:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.standard",children:n("team_account_addseats_success_order_summary_total")}),value:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.standard",children:d})})]})]})},yr=({isBusiness:e,additionalSeats:t,showInviteUsersButton:n=!0,onGetPastReceipts:a,backNavigationHandler:r})=>{const{routes:s}=(0,i.Xo)(),{translate:c}=(0,p.Z)();return(0,S.BX)(o.kC,{flexDirection:"column",gap:"40px",sx:h,children:[(0,S.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[e?(0,S.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",id:"header-buy-more-seats",children:c("team_account_addseats_success_newseats_header_business",{count:t})}):(0,S.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:c("team_account_addseats_success_newseats_header_team",{count:t})}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:c("team_account_addseats_success_newseats_body")})]}),(0,S.BX)(o.kC,{gap:"8px",children:[n?(0,S.tZ)(i.rU,{to:s.teamMembersRoutePath,children:(0,S.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!0,isResend:!1}))},mood:"brand",children:c("team_account_addseats_success_newseats_invite_users_cta")})}):null,a?(0,S.tZ)(o.zx,{mood:"neutral",intensity:"quiet",onClick:a,children:c("team_account_addseats_success_newseats_billing_history_cta")}):(0,S.tZ)(o.zx,{mood:"neutral",intensity:"quiet",onClick:r,children:c("team_account_addseats_success_newseats_go_to_account_summary_cta")})]})]})};var br;const xr=()=>{const{translate:e}=(0,p.Z)();return(0,S.BX)(o.kC,{flexWrap:"nowrap",gap:"16px",sx:h,children:[br||(br=(0,S.tZ)(o.kC,{sx:b,children:(0,S.tZ)(o.JO,{name:"GroupOutlined",color:"ds.text.neutral.standard"})})),(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{flexGrow:"1"},children:[(0,S.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,S.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_friends_family_header")}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:e("team_account_addseats_success_friends_family_body")})]}),(0,S.tZ)("a",{href:"https://support.dashlane.com/hc/articles/360013369820-Dashlane-Friends-Family-plan",target:"_blank",rel:"noopener noreferrer",children:(0,S.tZ)(o.zx,{mood:"neutral",intensity:"quiet",children:e("team_account_addseats_success_friends_family_learn_more_cta")})})]})]})};var Sr;const fr=()=>{const{translate:e}=(0,p.Z)();return(0,S.BX)(o.kC,{flexWrap:"nowrap",gap:"16px",sx:h,children:[Sr||(Sr=(0,S.tZ)(o.kC,{sx:b,children:(0,S.tZ)(o.JO,{name:"GroupOutlined",color:"ds.text.neutral.standard"})})),(0,S.BX)(o.kC,{flexDirection:"column",gap:"8px",sx:{flexGrow:"1"},children:[(0,S.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_idp_nextstep_title")}),(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_idp_nextstep_subtitle")}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:e("team_account_addseats_success_idp_nextstep_description")}),(0,S.tZ)(o.Qj,{isExternal:!0,href:ee.hP,children:e("team_account_addseats_success_idp_nextstep_see_setup_guide_link")})]})]})};var vr,Cr,Er;const Zr=({lastBillingDetails:e,lastAdditionalSeatsDetails:t,onGetPastReceipts:n,onNavigateBack:a})=>{const{translate:i}=(0,p.Z)(),[s,d]=(0,r.useState)(t),[g,h]=(0,r.useState)(e),{additionalSeatsCount:y}=ri({billingDetails:g,additionalSeatsDetails:s}),b=(0,u.s)(),x=(0,c.k)(pr.t,"getIdPFailedProvisioningsData"),v=x.status===L.rq.Loading,C=x.status===L.rq.Success&&!!x.data?.nbOfFailedCreations,E=(0,S.tZ)(o.zx,{mood:"neutral",intensity:"supershy",onClick:a,layout:"iconLeading",icon:"ArrowLeftOutlined",children:i("_common_action_back")}),Z=b?.spaceTier===_.lD.Business,D=(0,r.useContext)(bt);return(0,r.useEffect)((()=>(D(E),(0,m.Nc)(l.PageView.TacOrderConfirmation),()=>{D(null),a()})),[]),(0,r.useEffect)((()=>{h(e),d(t)}),[e,t]),(0,S.tZ)(o.kC,{flexDirection:"column",gap:"32px",sx:{padding:"32px",flexWrap:"nowrap"},children:(0,S.BX)(o.kC,{gap:"16px",sx:{flexWrap:"nowrap"},children:[(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{flexGrow:"2",maxWidth:"632px"},children:[(0,S.tZ)(yr,{onGetPastReceipts:n,isBusiness:Z,additionalSeats:y,showInviteUsersButton:!v&&!C,backNavigationHandler:a}),Z&&!v?C?vr||(vr=(0,S.tZ)(fr,{})):Cr||(Cr=(0,S.tZ)(xr,{})):null]}),(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{flexGrow:"1"},children:[(0,S.tZ)(hr,{billingDetails:g,additionalSeatsDetails:s}),Er||(Er=(0,S.tZ)(f,{}))]})]})})},Dr=({cardSvg:e,last4DigitsFormatted:t,expFormatted:n,isExpired:a})=>{const{translate:i}=(0,p.Z)();return(0,S.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e,(0,S.BX)("div",{children:[(0,S.BX)(o.nv,{"data-testid":"card-last-four",sx:{display:"flex",gap:"4px"},children:["•••• ",t,a?(0,S.tZ)(o.Ct,{label:i("account_summary_payment_card_expired_badge"),mood:"danger",sx:{alignSelf:"center"}}):null]}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:i("manage_subscription_payment_section_expiration_date",{date:n})})]})]})};var Tr,kr;const Ir="account_summary_payment_card_add_new_button",Ar="account_summary_payment_card_update_button",wr={SECTION_CONTAINER:{display:"flex",justifyContent:"space-between",alignItems:"center"},INVOICE_CONTAINER:{display:"flex",flexDirection:"column",gap:"8px"},CARD:{display:"flex",flexDirection:"column",gap:"16px"}},Nr=()=>{const{translate:e}=(0,p.Z)(),t=(0,u.s)(),[n,a]=(0,r.useState)(!1),{last4DigitsFormatted:i,hasCreditCardPaymentMethod:s,cardSvg:l,isExpired:c,expFormatted:d,pollUntilCardUpdate:m}=(0,g.C)({});if(!t)return null;const h=t.billingType===_.qo.Invoice,y=!t.billingType,b=()=>{m(),a(!0)},x=y?{key:Ir,onClick:b}:h?null:{key:Ar,onClick:b};return(0,S.BX)(o.Zb,{sx:wr.CARD,children:[(0,S.BX)("div",{sx:{display:"flex",justifyContent:"space-between"},children:[(0,S.tZ)(o.X6,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",as:"h2",children:e(h?"account_summary_payment_method_plural":"account_summary_payment_method_singular")}),n?(0,S.tZ)(Wn.J,{b2c:!1,setPaymentLoading:a}):x&&(0,S.tZ)(o.Qj,{isExternal:!0,onClick:x.onClick,sx:{cursor:"pointer"},children:e(x.key)})]}),y?(0,S.tZ)(o.nv,{color:"ds.text.inverse.quiet",children:e("account_summary_no_payment_method")}):null,h?(0,S.BX)("div",{children:[(0,S.BX)("div",{sx:wr.INVOICE_CONTAINER,children:[(0,S.BX)("div",{sx:wr.SECTION_CONTAINER,children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:e("account_summary_subscription_payment_method")}),(0,S.tZ)(o.Qj,{isExternal:!0,onClick:()=>{(0,P.Yo)(ee.FL)},children:e("account_summary_contact_support")})]}),(0,S.BX)("div",{sx:{display:"flex",gap:"8px"},children:[Tr||(Tr=(0,S.tZ)(o.vY,{name:"ItemTaxNumberOutlined",mood:"neutral"})),(0,S.tZ)(o.nv,{sx:{alignSelf:"center"},children:e("account_summary_paying_by_invoice")})]})]}),kr||(kr=(0,S.tZ)(Ni,{})),(0,S.BX)("div",{children:[(0,S.BX)("div",{sx:wr.SECTION_CONTAINER,children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:e("account_summary_seats_payment_method")}),(0,S.tZ)(o.Qj,{isExternal:!0,onClick:b,children:e(s?Ar:Ir)})]}),s&&l&&i&&d?(0,S.tZ)(Dr,{cardSvg:l,last4DigitsFormatted:i,isExpired:c,expFormatted:d}):(0,S.tZ)(o.nv,{color:"ds.text.inverse.quiet",children:e("account_summary_no_payment_card_added")})]})]}):l&&i&&d?(0,S.tZ)(Dr,{cardSvg:l,last4DigitsFormatted:i,isExpired:c,expFormatted:d}):null]})};var Or=n(42868),Rr=n(29274),Lr=n(27521);const Mr=({isOpen:e,lee:t,onClose:n})=>{const a=(0,r.useRef)(null),i=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useRef)(null),{translate:c}=(0,p.Z)(),{reportTACError:d}=H(),[_,u]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!0),h=Hi();if(!h)return null;const y=()=>{u(!1),n()},b=()=>{const e=(0,Lr.v0)(t.globalState);if(e)if(a.current?.value){y();try{(0,P.Yo)("https://ws1.dashlane.com/1/invoiceGeneration/generateTeamReceipt.pdf?"+(e=>{const t={...e,recipient:a.current?.value,company:i.current?.value,address:s.current?.value,vatNumber:l.current?.value};return Or.stringify(t)})(e))}catch(e){d(e)}}else u(!0);else d(new Error(Rr.N))},x=_?{feedback:{text:c("team_account_past_receipts_dialog_recipient_is_required")},error:!0}:{};return(0,S.BX)(o.Vq,{title:c("team_account_past_receipts_dialog_title"),closeActionLabel:c("_common_dialog_dismiss_button"),isOpen:e,onClose:y,actions:{primary:{children:c("team_account_past_receipts_dialog_download_button"),onClick:b,disabled:m}},children:[(0,S.tZ)(o.nv,{children:c("team_account_past_receipts_dialog_instructions")}),(0,S.BX)(re.T5p,{as:"form",onSubmit:b,gap:"1em",children:[(0,S.tZ)(o.qo,{label:c("team_account_past_receipts_dialog_recipient")+" *",placeholder:c("team_account_past_receipts_dialog_recipient_hint"),onChange:()=>{a.current?.value?(g(!1),u(!1)):(g(!0),u(!0))},ref:a,...x}),(0,S.tZ)(o.qo,{label:c("team_account_past_receipts_dialog_company"),value:h,placeholder:c("team_account_past_receipts_dialog_company_hint"),ref:i}),(0,S.tZ)(o.qo,{label:c("team_account_past_receipts_dialog_billing_address"),placeholder:c("team_account_past_receipts_dialog_billing_address_hint"),ref:s}),(0,S.tZ)(o.qo,{label:c("team_account_past_receipts_dialog_vat"),placeholder:c("team_account_past_receipts_dialog_vat_hint"),ref:l})]})]})},Br=({lee:e})=>{const{translate:t}=(0,p.Z)(),n=(0,te.JS)(),[a,i]=(0,r.useState)(!1);if(n.status!==L.rq.Success||!n.data)return null;const s=n.data.b2bStatus?.currentTeam?.hasPaid;return(0,S.BX)(o.Zb,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:"24px"},children:[(0,S.tZ)(o.X6,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",as:"h2",children:t("account_summary_billing_history_header")}),s?(0,S.tZ)(o.zx,{mood:"brand",intensity:"supershy",icon:"DownloadOutlined",layout:"iconLeading",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.DownloadBillingHistory})),(0,m.Nc)(l.PageView.TacAccountCustomizeInvoice),i(!0)},children:t("account_summary_billing_history_download_button")}):(0,S.tZ)(o.nv,{color:"ds.text.inverse.quiet",children:t("account_summary_billing_history_no_invoice")}),(0,S.tZ)(Mr,{lee:e,onClose:()=>{i(!1)},isOpen:a})]})};var Pr=n(98423),Ur=n(68531);const Xr=({spaceTier:e,handleClose:t,sendCancelRequest:n,requestStatus:a})=>{const{translate:i}=(0,p.Z)(),[s,c]=(0,r.useState)({[_.Gr.ChoseOtherPasswordManager]:!1,[_.Gr.MissingCriticalFeatures]:!1,[_.Gr.NoInternalUsage]:!1,[_.Gr.DownsizedEmployeeCount]:!1,[_.Gr.Other]:!1,[_.Gr.TechnicalIssues]:!1,[_.Gr.TooExpensive]:!1});(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacModalReasonsToCancelSubscription)}),[]);const d=`${e[0].toUpperCase()}${e.slice(1)}`,u=e=>{const t=!s[e];c({...s,[e]:t})};return(0,S.BX)(o.Vq,{isOpen:!0,onClose:()=>{(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.Confirm,l.CallToAction.Cancel],hasChosenNoAction:!0})),t()},title:i("team_account_cancel_form_heading"),actions:{primary:{children:i("team_account_cancel_form_button_confirm"),onClick:()=>{const e=Object.keys(s).filter((e=>s[e])).map((e=>Ur.V[e]));n(e),(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.Confirm,l.CallToAction.Cancel],chosenAction:l.CallToAction.Confirm,hasChosenNoAction:!1})),(0,m.Kz)(new l.UserSubmitInProductFormAnswerEvent({formName:l.FormName.ReasonToCancelSubscription,answerList:Object.keys(s).map((e=>Ur.V[e])),chosenAnswerList:e}))},isLoading:"pending"===a},secondary:{children:i("team_account_cancel_form_button_cancel",{planTier:d}),onClick:()=>{(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.Confirm,l.CallToAction.Cancel],chosenAction:l.CallToAction.Cancel,hasChosenNoAction:!1})),t()}}},isDestructive:!0,closeActionLabel:i("_common_dialog_dismiss_button"),children:[(0,S.tZ)(o.nv,{sx:{marginBottom:"20px"},textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:i("team_account_cancel_form_subheading")}),(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",children:i("team_account_cancel_form_question")}),(0,S.tZ)(o.nv,{sx:{marginBottom:"20px"},textStyle:"ds.body.standard.regular",children:i("team_account_cancel_form_context")}),(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,S.tZ)(o.XZ,{label:i("team_account_cancel_form_option_1"),checked:s.no_internal_usage,disabled:"pending"===a,onChange:()=>u(_.Gr.NoInternalUsage)}),(0,S.tZ)(o.XZ,{label:i("team_account_cancel_form_option_2_revised"),checked:s.downsized_employee_count,disabled:"pending"===a,onChange:()=>u(_.Gr.DownsizedEmployeeCount)}),(0,S.tZ)(o.XZ,{label:i("team_account_cancel_form_option_3"),checked:s.chose_other_password_manager,disabled:"pending"===a,onChange:()=>u(_.Gr.ChoseOtherPasswordManager)}),(0,S.tZ)(o.XZ,{label:i("team_account_cancel_form_option_4"),checked:s.missing_critical_features,disabled:"pending"===a,onChange:()=>u(_.Gr.MissingCriticalFeatures)}),(0,S.tZ)(o.XZ,{label:i("team_account_cancel_form_option_5"),checked:s.technical_issues,disabled:"pending"===a,onChange:()=>u(_.Gr.TechnicalIssues)}),(0,S.tZ)(o.XZ,{label:i("team_account_cancel_form_option_6"),checked:s.too_expensive,disabled:"pending"===a,onChange:()=>u(_.Gr.TooExpensive)}),(0,S.tZ)(o.XZ,{sx:{marginBottom:"8px"},label:i("team_account_cancel_form_option_7"),checked:s.other,disabled:"pending"===a,onChange:()=>u(_.Gr.Other)})]}),(0,S.tZ)(o.nv,{sx:{margin:"20px 0"},textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:i.markup("team_account_cancel_form_help_markup",{},{linkTarget:"_blank"})})]})};var zr,qr;const jr={ITEM:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"16px"},WRAPPER:{margin:"16px 0",gap:"24px",display:"flex",flexDirection:"column"}},Fr="team_account_cancel_confirmation_dialog_close",Gr=({handleClose:e})=>{const{translate:t}=(0,p.Z)();return(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacConfirmSubscriptionCancellationRequestSubmission)}),[]),(0,S.tZ)(o.Vq,{isOpen:!0,onClose:e,title:t("team_account_cancel_confirmation_dialog_heading"),closeActionLabel:t(Fr),actions:{primary:{children:t(Fr),onClick:e}},children:(0,S.BX)("div",{sx:jr.WRAPPER,children:[(0,S.BX)("div",{sx:jr.ITEM,children:[zr||(zr=(0,S.tZ)(o.vY,{name:"ItemEmailOutlined",size:"medium",mood:"brand"})),(0,S.tZ)(o.nv,{children:t.markup("team_account_cancel_confirmation_dialog_paragraph_1_markup")})]}),(0,S.BX)("div",{sx:jr.ITEM,children:[qr||(qr=(0,S.tZ)(o.vY,{name:"ActionUndoOutlined",size:"medium",mood:"brand"})),(0,S.tZ)(o.nv,{children:t("team_account_cancel_confirmation_dialog_paragraph_2")})]})]})})},Vr={none:{heading:"account_summary_cancel_subscription_header",paragraph:"account_summary_cancel_subscription_description",button:"account_summary_cancel_subscription_button"},pending:{heading:"team_account_cancel_widget_requested_pending_heading",paragraph:"team_account_cancel_widget_requested_pending_content_markup"},canceled:{heading:"team_account_cancel_widget_requested_complete_heading",paragraph:"team_account_cancel_widget_requested_complete_content",button:"team_account_cancel_widget_requested_complete_button"},unknown:{}},Hr=(e,t,n)=>{var a,i,r,s;switch(e){case _.Uz.None:return n(null!=(a=Vr.none[t])?a:"");case _.Uz.Pending:return"paragraph"===t?n.markup(null!=(i=Vr.pending[t])?i:"",{},{linkTarget:"_blank"}):n(null!=(r=Vr.pending[t])?r:"");case _.Uz.Canceled:return n(null!=(s=Vr.canceled[t])?s:"");case _.Uz.Unknown:return""}},Wr=({status:e,handleClickButton:t})=>{const{translate:n}=(0,p.Z)();return(0,S.BX)(o.Zb,{sx:{width:"368px",padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:[e!==_.Uz.Unknown?(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:Hr(e,"heading",n)}):null,(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,S.tZ)(o.nv,{children:Hr(e,"paragraph",n)}),e!==_.Uz.Pending?(0,S.tZ)(o.Qj,{onClick:t,as:"button",sx:{"> button":{cursor:"pointer"}},children:Hr(e,"button",n)}):null]}),e===_.Uz.None?(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,S.tZ)(o.nv,{children:n("account_summary_downgrade_description")}),(0,S.tZ)(o.Qj,{isExternal:!0,href:ee.oH,children:n("account_summary_contact_support_button")})]}):null]})};let $r=function(e){return e.NONE="none",e.SURVEY="survey",e.REQUEST_SUCCESS="requestSentConfirmation",e.REQUEST_ERROR="requestError",e}({});const Kr=({status:e})=>{const[t,n]=(0,r.useState)($r.NONE),[a,i]=(0,r.useState)("idle"),{showToast:s}=(0,o.pm)(),c=(0,te.lZ)(),u=(0,X.C)(),{translate:g}=(0,p.Z)();(0,r.useEffect)((()=>{e!==_.Uz.Unknown&&t!==$r.REQUEST_ERROR||s({mood:"danger",description:g("team_account_cancel_request_error"),isManualDismiss:!0})}),[t,s,e,g]);const{requestTeamPlanCancellation:h}=(0,q.u)(d.o);return c.isLoading||!u||c.isTeamSoftDiscontinued||u.isFreeTrial||u.isGracePeriod?null:(0,S.BX)(S.HY,{children:[(0,S.tZ)(Wr,{status:e,handleClickButton:e===_.Uz.None?()=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:l.ClickOrigin.BillingInformation,button:l.Button.CancelSubscription})),n($r.SURVEY)}:()=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:l.ClickOrigin.BillingInformation,button:l.Button.ReactivateSubscription})),(0,P.Yo)(ee.lh)}}),t===$r.SURVEY?(0,S.tZ)(Xr,{spaceTier:u.spaceTier,handleClose:()=>{n($r.NONE)},sendCancelRequest:async e=>{i("pending");try{const t=await h({reasons:e});if(i("finished"),"failure"===t.tag)throw new Error("Failed to request team plan cancellation.");n($r.REQUEST_SUCCESS)}catch(e){n($r.REQUEST_ERROR)}},requestStatus:a}):null,t===$r.REQUEST_SUCCESS?(0,S.tZ)(Gr,{handleClose:()=>{n($r.NONE)}}):null]})};var Yr=n(16599);const Qr="account_summary_sso_description",Jr="account_summary_unlimited_seats_description",es=({iconName:e,description:t})=>{const{translate:n}=(0,p.Z)();return(0,S.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.tZ)(o.vY,{name:e,mood:"brand",size:"small"}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:n(t)})]})},ts="account_summary_upgrade_to_business",ns=()=>{const{translate:e}=(0,p.Z)(),t=(0,me.U)(),{routes:n}=(0,i.Xo)(),a=(0,u.s)();if(!t||!a||a.spaceTier===_.lD.Business||a.spaceTier===_.lD.BusinessPlus||a.spaceTier===_.lD.Enterprise||a.spaceTier===_.lD.Legacy)return null;const r=a.spaceTier===_.lD.Starter,s=a.spaceTier===_.lD.Standard,c=(e=>{switch(e){case"starter":return[{icon:"GroupOutlined",description:Jr},{icon:"SharedOutlined",description:"account_summary_unlimited_groups_description"},{icon:"LockOutlined",description:Qr},{icon:"SettingsOutlined",description:"account_summary_activity_logs_description"}];case"team":return[{icon:"LockOutlined",description:Qr},{icon:"SharedOutlined",description:"account_summary_scim_feature_description"},{icon:"GroupOutlined",description:"account_summary_family_friends_plan_description"},{icon:"ItemPhoneHomeOutlined",description:"account_summary_phone_support_team_description"}];case"standard":return[{icon:"GroupOutlined",description:Jr},{icon:"ToolsOutlined",description:"account_summary_advanced_tools_description"},{icon:"HealthPositiveOutlined",description:"account_summary_enhanced_integrations_description"},{icon:"ItemPhoneHomeOutlined",description:"account_summary_additional_support_description"}]}})(a.spaceTier);return(0,S.BX)(o.Zb,{sx:{display:"flex",flexDirection:"column",gap:"24px",width:"368px",padding:"24px"},children:[(0,S.tZ)(o.Ct,{label:e(ts),mood:"brand",iconName:"PremiumOutlined",layout:"iconLeading"}),(0,S.tZ)("div",{sx:{display:"flex",justifyContent:"center",flex:1},children:(0,S.tZ)("img",{role:"presentation",alt:"",src:Yr,sx:{objectFit:"contain",width:"100%",height:"auto"}})}),(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e(s?"account_summary_upgrade_standard_title":r?"account_summary_upgrade_starter_title":"account_summary_upgrade_team_title")}),c.map((e=>(0,S.tZ)(es,{iconName:e.icon,description:e.description},e.description)))]}),(0,S.tZ)(o.zx,{mood:"brand",intensity:"catchy",icon:"PremiumOutlined",layout:"iconLeading",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuyDashlane,clickOrigin:l.ClickOrigin.AccountStatus}))},as:i.rU,to:`${n.teamAccountChangePlanRoutePath}?plan=business`,children:e(ts)})]})},as=()=>{const{translate:e}=(0,p.Z)(),{routes:t}=(0,i.Xo)();return(0,S.BX)(o.Zb,{sx:{display:"flex",flexDirection:"column",gap:"24px",width:"368px",padding:"24px"},children:[(0,S.tZ)(o.Ct,{label:e("account_summary_upgrade_content_business_badge"),mood:"brand",iconName:"PremiumOutlined",layout:"iconLeading"}),(0,S.tZ)("div",{sx:{display:"flex",justifyContent:"center",flex:1},children:(0,S.tZ)("img",{role:"presentation",alt:"",src:Yr,sx:{objectFit:"contain",width:"100%",height:"auto"}})}),(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("account_summary_upgrade_content_title")}),(0,S.tZ)(es,{iconName:"SsoOutlined",description:"account_summary_sso_feature_description"}),(0,S.tZ)(es,{iconName:"PhishingAlertOutlined",description:"account_summary_protection_feature_description"}),(0,S.tZ)(es,{iconName:"ItemPhoneHomeOutlined",description:"account_summary_phone_support_feature_description"})]}),(0,S.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuyDashlane,clickOrigin:l.ClickOrigin.AccountStatus}))},mood:"brand",intensity:"catchy",as:i.rU,to:t.teamAccountCheckoutRoutePath,children:e("account_summary_buy_dashlane_button")})]})},is={minWidth:"368px",padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},rs=()=>{const{translate:e}=(0,p.Z)();return(0,S.BX)(o.Zb,{sx:is,children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("account_summary_keep_subscription_header")}),(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,S.tZ)(o.nv,{children:e("account_summary_keep_subscription_description")}),(0,S.tZ)(o.Qj,{isExternal:!0,href:ee.oH,children:e("account_summary_keep_subscription_button")})]})]})};var ss,os,ls;const cs=()=>{const e=(0,Pr.M)(),t=(0,te.lZ)(),n=(0,te.JS)(),a=(0,X.C)(),{isExpired:i}=(0,g.C)({});if(e.isLoading||t.isLoading||n.status!==L.rq.Success||!n.data.b2bStatus||!a)return null;const r=(e=>{switch(e){case"ACTIVE":case"ACTIVE CARD EXPIRED":case"DISCONTINUED CARD EXPIRED":return"cancelSubscription";case"ACTIVE CANCELED":case"DISCONTINUED CANCELED":return"keepSubscription";case"DISCONTINUED TRIAL":case"GRACE PERIOD":case"TRIAL":return"trialUpgrade"}})(Ua(t,n.data.b2bStatus,a,i));return"cancelSubscription"===r?a.spaceTier===_.lD.Team||a.spaceTier===_.lD.Starter||a.spaceTier===_.lD.Standard?(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[ss||(ss=(0,S.tZ)(ns,{})),(0,S.tZ)(Kr,{status:e.status})]}):(0,S.tZ)(Kr,{status:e.status}):"keepSubscription"===r?os||(os=(0,S.tZ)(rs,{})):"trialUpgrade"===r?ls||(ls=(0,S.tZ)(as,{})):void 0};var ds,_s,us;const ms={backgroundColor:"ds.background.alternate",minHeight:"100%","& > div":{maxWidth:"74em",padding:"24px"}},ps=({lee:e})=>(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:ms,children:[ds||(ds=(0,S.tZ)(Vi,{})),_s||(_s=(0,S.tZ)(Nr,{})),us||(us=(0,S.tZ)(ur,{})),(0,S.tZ)(Br,{lee:e})]}),gs=({lee:e})=>{const{isAddSeatsSuccessOpen:t,upsellDetails:n,setIsAddSeatsSuccessPageOpen:a}=pt(),{translate:i}=(0,p.Z)();return(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacAccount)}),[]),t?n.lastAdditionalSeatsDetails&&n.lastBillingDetails?(0,S.tZ)(Zr,{lastAdditionalSeatsDetails:n.lastAdditionalSeatsDetails,lastBillingDetails:n.lastBillingDetails,onNavigateBack:()=>{a(!1)}}):null:(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.X6,{textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",as:"h1",sx:{height:"50px",padding:"32px 48px"},children:i("team_account_heading_team_setup")}),(0,S.tZ)(Ba,{mainContent:(0,S.tZ)(ps,{lee:e}),secondaryContent:cs,secondaryContentWrapDirection:"bottom"})]})};var hs=n(59664),ys=n(80237);const bs="360px",xs={STATE_WRAPPER:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"24px",width:"100%",height:bs,padding:"24px",textAlign:"center"},TABLE_BODY:{minHeight:bs,tr:{boxShadow:"inset 0 -1px 0 0 ds.border.neutral.quiet.idle",height:"60px",transition:"background-color 0.2s ease",backgroundColor:"transparent","&:hover":{backgroundColor:"ds.container.expressive.neutral.supershy.hover"},td:{padding:"16px",verticalAlign:"middle",variant:"text.ds.body.reduced.regular",color:"ds.text.neutral.standard"}}},INPUT_WITH_CLEAR_ACTION:{display:"grid",gridTemplateColumns:"calc(100% - 40px) auto",alignItems:"center",gap:"4px"}};var Ss,fs,vs=n(57968);const Cs=({title:e,description:t})=>{const{translate:n}=(0,p.Z)();return(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",sx:{marginBottom:"4px"},children:n(e)}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:n(t)})]})},Es=()=>(0,S.BX)("div",{sx:xs.STATE_WRAPPER,children:[Ss||(Ss=(0,S.tZ)(o.JO,{name:"FeedbackFailOutlined",color:"ds.text.danger.quiet",size:"xlarge"})),(0,S.tZ)(Cs,{title:"team_audit_log_state_error_title",description:"team_audit_log_state_error_description"})]}),Zs=()=>(0,S.BX)("div",{sx:xs.STATE_WRAPPER,children:[fs||(fs=(0,S.tZ)(o.ZX,{mood:"brand",size:"xlarge"})),(0,S.tZ)(Cs,{title:"team_audit_log_state_loading_title",description:"team_audit_log_state_loading_description"})]}),Ds=()=>(0,S.BX)("div",{sx:xs.STATE_WRAPPER,children:[(0,S.tZ)("img",{sx:{userSelect:"none",pointerEvents:"none",width:"360px",maxWidth:"100%",margin:"0 auto"},alt:"","aria-hidden":!0,src:vs}),(0,S.tZ)(Cs,{title:"team_audit_log_state_empty_title",description:"team_audit_log_state_empty_description"})]}),Ts=[hs.s.Account,hs.s.Authentication,hs.s.DarkWebMonitoring,hs.s.Groups,hs.s.TeamSettings,hs.s.TeamSettingsSSO,hs.s.TeamSettingsSAMLProvisioning,hs.s.TeamSettingsSCIM,hs.s.TeamSettingsSIEM,hs.s.Sharing,hs.s.UserSettings,hs.s.Users,hs.s.VaultCollections,hs.s.VaultPasswords,hs.s.VaultSecureNotes,hs.s.TeamNudges,hs.s.RiskDetection,hs.s.ItemUsage],ks=(e,t)=>{const[n,a]=(e=>{switch(e){case hs.s.Account:return["team_audit_log_category_account","AccountSettingsOutlined"];case hs.s.Authentication:return["team_audit_log_category_authentication","ItemLoginOutlined"];case hs.s.DarkWebMonitoring:return["team_audit_log_category_dark_web_monitoring","FeatureDarkWebMonitoringOutlined"];case hs.s.Groups:return["team_audit_log_category_groups","GroupOutlined"];case hs.s.TeamSettings:return["team_audit_log_category_team_settings","SettingsOutlined"];case hs.s.TeamSettingsSAMLProvisioning:return["team_audit_log_category_team_settings_samlprovisioning","SettingsOutlined"];case hs.s.TeamSettingsSSO:return["team_audit_log_category_team_settings_sso","SettingsOutlined"];case hs.s.TeamSettingsSCIM:return["team_audit_log_category_team_settings_scim","SettingsOutlined"];case hs.s.TeamSettingsSIEM:return["team_audit_log_category_team_settings_siem","SettingsOutlined"];case hs.s.Sharing:return["team_audit_log_category_sharing","SharedOutlined"];case hs.s.UserSettings:return["team_audit_log_category_user_settings","SettingsOutlined"];case hs.s.Users:return["team_audit_log_category_users","UsersOutlined"];case hs.s.VaultCollections:return["team_audit_log_category_vault_collections","CollectionOutlined"];case hs.s.VaultPasswords:return["team_audit_log_category_vault_passwords","ItemLoginOutlined"];case hs.s.VaultSecureNotes:return["team_audit_log_category_vault_securenotes","ItemSecureNoteOutlined"];case hs.s.TeamNudges:return["team_audit_log_category_team_nudges","FeatureAutomationsOutlined"];case hs.s.RiskDetection:return["team_audit_log_category_security_monitoring","ItemLoginOutlined"];case hs.s.ItemUsage:return["team_audit_log_category_item_usage","FeatureAutofillOutlined"];default:return["","SettingsOutlined"]}})(e.category);return{label:n?t(n):"",icon:a}},Is=Object.values(hs.b),As={USER_INVITED:"team_audit_log_user_invited",USER_REINVITED:"team_audit_log_user_reinvited",USER_REMOVED:"team_audit_log_user_removed",TEAM_CAPTAIN_ADDED:"team_audit_log_team_captain_added",TEAM_CAPTAIN_REMOVED:"team_audit_log_team_captain_removed",GROUP_MANAGER_ADDED:"team_audit_log_group_manager_added",GROUP_MANAGER_REMOVED:"team_audit_log_group_manager_removed",MASTER_PASSWORD_RESET_ACCEPTED:"team_audit_log_master_password_reset_accepted",MASTER_PASSWORD_RESET_REFUSED:"team_audit_log_master_password_reset_refused",BILLING_ADMIN_ADDED:"team_audit_log_billing_admin_added",BILLING_ADMIN_REMOVED:"team_audit_log_billing_admin_removed",USER_GROUP_CREATED:"team_audit_log_user_group_created",USER_GROUP_RENAMED:"team_audit_log_user_group_renamed",USER_GROUP_DELETED:"team_audit_log_user_group_deleted",USER_JOINED_USER_GROUP:"team_audit_log_user_joined_user_group",USER_LEFT_USER_GROUP:"team_audit_log_user_left_user_group",USER_INVITED_TO_USER_GROUP:"team_audit_log_user_invited_to_user_group",USER_DECLINED_INVITE_TO_USER_GROUP:"team_audit_log_user_declined_invite_to_user_group",USER_REMOVED_FROM_USER_GROUP:"team_audit_log_user_removed_from_user_group",SSO_IDP_METADATA_SET:"team_audit_log_sso_idp_metadata_set",SSO_SERVICE_PROVIDER_URL_SET:"team_audit_log_sso_service_provider_url_set",SSO_ENABLED:"team_audit_log_sso_enabled",SSO_DISABLED:"team_audit_log_sso_disabled",DOMAIN_REQUESTED:"team_audit_log_domain_requested",DOMAIN_VALIDATED:"team_audit_log_domain_validated",SENSITIVE_LOGS_ENABLED:"team_audit_log_collect_sensitive_data_audit_logs_enabled",SENSITIVE_LOGS_DISABLED:"team_audit_log_collect_sensitive_data_audit_logs_disabled",TEAM_NAME_CHANGED:"team_audit_log_team_name_changed",NEW_BILLING_PERIOD_CREATED:"team_audit_log_new_billing_period_created",SEATS_ADDED:"team_audit_log_seats_added",CONTACT_EMAIL_CHANGED:"team_audit_log_contact_email_changed",MASTER_PASSWORD_MOBILE_RESET_ENABLED:"team_audit_log_master_password_mobile_reset_enabled",MASTER_PASSWORD_MOBILE_RESET_DISABLED:"team_audit_log_master_password_mobile_reset_disabled",MASTER_PASSWORD_MOBILE_RESET:"team_audit_log_master_password_mobile_reset",MASTER_PASSWORD_CHANGED:"team_audit_log_master_password_changed",MP_TO_VIEW_PASSWORDS_ENABLED:"team_audit_log_mp_to_view_passwords_enabled",MP_TO_VIEW_PASSWORDS_DISABLED:"team_audit_log_mp_to_view_passwords_disabled",TWO_FACTOR_AUTHENTICATION_FAILED_OTP:"team_audit_log_two_factor_authentication_failed_otp",TWO_FACTOR_AUTHENTICATION_FAILED_EMAIL_TOKEN:"team_audit_log_two_factor_authentication_failed_token",TWO_FACTOR_AUTHENTICATION_LOGIN_METHOD_ADDED:"team_audit_log_two_factor_authentication_login_method_added",TWO_FACTOR_AUTHENTICATION_LOGIN_METHOD_REMOVED:"team_audit_log_two_factor_authentication_login_method_removed",BIOMETRIC_SIGN_IN_DISABLED:"team_audit_log_biometric_sign_in_disabled",NITRO_SSO_DOMAIN_PROVISIONED:"team_audit_log_nitro_sso_domain_provisioned",NITRO_SSO_DOMAIN_REMOVED:"team_audit_log_nitro_sso_domain_removed",NITRO_SSO_DOMAIN_VERIFIED:"team_audit_log_nitro_sso_domain_verified",NITRO_SSO_SETUP_STARTED:"team_audit_log_nitro_sso_setup_started",NITRO_USER_PROVISIONING_ACTIVATED:"team_audit_log_nitro_user_provisioning_activated",NITRO_USER_PROVISIONING_DEACTIVATED:"team_audit_log_nitro_user_provisioning_deactivated",NITRO_GROUP_PROVISIONING_ACTIVATED:"team_audit_log_nitro_group_provisioning_activated",NITRO_GROUP_PROVISIONING_DEACTIVATED:"team_audit_log_nitro_group_provisioning_deactivated",NITRO_SIEM_ACTIVATED:"team_audit_log_nitro_siem_activated",NITRO_SIEM_DEACTIVATED:"team_audit_log_nitro_siem_deactivated",NITRO_SIEM_EDITED:"team_audit_log_nitro_siem_edited",DWM_EMAIL_ADDED:"team_audit_log_dwm_email_added",DWM_EMAIL_REMOVED:"team_audit_log_dwm_email_removed",DWM_ALERT_RECEIVED:"team_audit_log_dwm_alert_received",USER_DEVICE_ADDED:"team_audit_log_user_device_added",USER_DEVICE_REMOVED:"team_audit_log_user_device_removed",USER_DEVICE_LOGIN:"team_audit_log_user_device_login",MASTER_PASSWORD_RESET:"team_audit_log_master_password_reset",REQUESTED_ACCOUNT_RECOVERY:"team_audit_log_requested_account_recovery",COMPLETED_ACCOUT_RECOVERY:"team_audit_log_completed_account_recovery",USER_SHARED_CREDENTIAL_WITH_GROUP_FULL_RIGHTS:"team_audit_log_user_shared_credential_with_group_full",USER_SHARED_CREDENTIAL_WITH_EMAIL_FULL_RIGHTS:"team_audit_log_user_shared_credential_with_email_full",USER_SHARED_CREDENTIAL_WITH_EXTERNAL_FULL_RIGHTS:"team_audit_log_user_shared_credential_with_external_full",USER_SHARED_CREDENTIAL_WITH_GROUP_LIMITED_RIGHTS:"team_audit_log_user_shared_credential_with_group_limited",USER_SHARED_CREDENTIAL_WITH_EMAIL_LIMITED_RIGHTS:"team_audit_log_user_shared_credential_with_email_limited",USER_SHARED_CREDENTIAL_WITH_EXTERNAL_LIMITED_RIGHTS:"team_audit_log_user_shared_credential_with_external_limited",USER_SHARED_SECURE_NOTE_WITH_GROUP_FULL_RIGHTS:"team_audit_log_user_shared_secure_note_with_group_full",USER_SHARED_SECURE_NOTE_WITH_EMAIL_FULL_RIGHTS:"team_audit_log_user_shared_secure_note_with_email_full",USER_SHARED_SECURE_NOTE_WITH_EXTERNAL_FULL_RIGHTS:"team_audit_log_user_shared_secure_note_with_external_full",USER_SHARED_SECURE_NOTE_WITH_GROUP_LIMITED_RIGHTS:"team_audit_log_user_shared_secure_note_with_group_limited",USER_SHARED_SECURE_NOTE_WITH_EMAIL_LIMITED_RIGHTS:"team_audit_log_user_shared_secure_note_with_email_limited",USER_SHARED_SECURE_NOTE_WITH_EXTERNAL_LIMITED_RIGHTS:"team_audit_log_user_shared_secure_note_with_external_limited",USER_ACCEPTED_SHARING_INVITE_SECURE_NOTE:"team_audit_log_user_accepted_sharing_invite_secure_note",USER_REJECTED_SHARING_INVITE_SECURE_NOTE:"team_audit_log_user_rejected_sharing_invite_secure_note",USER_ACCEPTED_SHARING_INVITE_CREDENTIAL:"team_audit_log_user_accepted_sharing_invite_credential",USER_REJECTED_SHARING_INVITE_CREDENTIAL:"team_audit_log_user_rejected_sharing_invite_credential",USER_REVOKED_SHARED_CREDENTIAL_GROUP:"team_audit_log_user_revoked_shared_credential_group",USER_REVOKED_SHARED_CREDENTIAL_EMAIL:"team_audit_log_user_revoked_shared_credential_email",USER_REVOKED_SHARED_CREDENTIAL_EXTERNAL:"team_audit_log_user_revoked_shared_credential_external",USER_REVOKED_SHARED_SECURE_NOTE_GROUP:"team_audit_log_user_revoked_shared_secure_note_group",USER_REVOKED_SHARED_SECURE_NOTE_EMAIL:"team_audit_log_user_revoked_shared_secure_note_email",USER_REVOKED_SHARED_SECURE_NOTE_EXTERNAL:"team_audit_log_user_revoked_shared_secure_note_external",USER_PRIVATE_COLLECTION_CREATED:"team_audit_log_user_private_collection_created",USER_PRIVATE_COLLECTION_IMPORTED:"team_audit_log_user_private_collection_imported",USER_PRIVATE_COLLECTION_ADDED_CREDENTIAL:"team_audit_log_user_private_collection_added_credential",USER_PRIVATE_COLLECTION_ADDED_CREDENTIAL_NO_DOMAIN:"team_audit_log_user_private_collection_added_credential_no_domain",USER_PRIVATE_COLLECTION_REMOVED:"team_audit_log_user_private_collection_removed_credential",USER_PRIVATE_COLLECTION_RENAMED:"team_audit_log_user_private_collection_renamed",USER_PRIVATE_COLLECTION_DELETED:"team_audit_log_user_private_collection_deleted",USER_SHARED_COLLECTION_SHARED_WITH_USER:"team_audit_log_user_shared_collection_shared_with_user",USER_SHARED_COLLECTION_SHARED_WITH_GROUP:"team_audit_log_user_shared_collection_shared_with_group",USER_SHARED_COLLECTION_ACCEPTED:"team_audit_log_user_shared_collection_accepted",USER_SHARED_COLLECTION_REJECTED:"team_audit_log_user_shared_collection_rejected",USER_SHARED_COLLECTION_ADDED_CREDENTIAL_ADMIN:"team_audit_log_user_shared_collection_added_credential_admin",USER_SHARED_COLLECTION_ADDED_CREDENTIAL_ADMIN_NO_DOMAIN:"team_audit_log_user_shared_collection_added_credential_admin_no_domain",USER_SHARED_COLLECTION_ADDED_CREDENTIAL_LIMITED:"team_audit_log_user_shared_collection_added_credential_limited",USER_SHARED_COLLECTION_ADDED_CREDENTIAL_LIMITED_NO_DOMAIN:"team_audit_log_user_shared_collection_added_credential_limited_no_domain",USER_SHARED_COLLECTION_REMOVED_CREDENTIAL:"team_audit_log_user_shared_collection_removed_credential",USER_SHARED_COLLECTION_UPDATED_GROUP_ROLES:"team_audit_log_user_shared_collection_group_roles",USER_SHARED_COLLECTION_UPDATED_USER_ROLES:"team_audit_log_user_shared_collection_user_roles",USER_SHARED_COLLECTION_REVOKED_GROUPS:"team_audit_log_user_shared_collection_revoked_groups",USER_SHARED_COLLECTION_REVOKED_USER:"team_audit_log_user_shared_collection_revoked_user",USER_SHARED_COLLECTION_REVOKED_GROUPS_INVITE:"team_audit_log_user_shared_collection_revoked_group_invite",USER_SHARED_COLLECTION_REVOKED_USER_INVITE:"team_audit_log_user_shared_collection_revoked_user_invite",USER_CREATED_CREDENTIAL:"team_audit_log_user_created_credential",USER_MODIFIED_CREDENTIAL:"team_audit_log_user_modified_credential",USER_DELETED_CREDENTIAL:"team_audit_log_user_deleted_credential",USER_IMPORTED_CREDENTIALS:{ONE:"team_audit_log_user_imported_credentials_one",MANY:"team_audit_log_user_imported_credentials_many"},USER_CREATED_SECURE_NOTE:"team_audit_log_user_created_secure_note",USER_MODIFIED_SECURE_NOTE:"team_audit_log_user_modified_secure_note",USER_DELETED_SECURE_NOTE:"team_audit_log_user_deleted_secure_note",NUDGE_EXECUTED:"team_audit_log_nudge_executed",NUDGE_EXECUTED_WITH_FAILURES:"team_audit_log_nudge_executed_with_failures",NUDGE_CONFIGURED:"team_audit_log_nudge_configured",NITRO_INTEGRATION_APP_INSTALLED:"team_audit_log_nitro_integration_app_installed",NITRO_INTEGRATION_APP_UNINSTALLED:"team_audit_log_nitro_integration_app_uninstalled",USER_RECEIVED_NUDGE:"team_audit_log_user_received_nudge",NUDGE_NAME_COMPROMISED_PASSWORDS:"team_audit_log_nudge_name_compromised_passwords",NUDGE_NAME_WEAK_PASSWORDS:"team_audit_log_nudge_name_weak_passwords",MASS_DEPLOYMENT_CONFIGURATION_UPDATED:"team_audit_log_mass_deployment_configuration_updated",USER_TYPED_COMPROMISED_PASSWORD:"team_audit_log_user_typed_compromised_password",USER_TYPED_WEAK_PASSWORD:"team_audit_log_user_typed_weak_password",USER_TYPED_PASSWORD:"team_audit_log_user_typed_password",USER_PERFORMED_AUTOFILL_CREDENTIAL:"team_audit_log_user_performed_autofill",USER_PERFORMED_AUTOFILL_PAYMENT_CARD:"team_audit_log_user_performed_autofill_credit_card",USER_PERFORMED_AUTOFILL_BANK_ACCOUNT:"team_audit_log_user_performed_autofill_bank_account",USER_AUTHENTICATED_WITH_PASSKEY:"team_audit_log_user_authenticated_with_passkey",USER_REVEALED_CREDENTIAL_FIELD:"team_audit_log_user_revealed_credential_field",USER_REVEALED_CREDIT_CARD_FIELD:"team_audit_log_user_revealed_credit_card_field",USER_REVEALED_BANK_ACCOUNT_FIELD:"team_audit_log_user_revealed_bank_account_field",USER_REVEALED_SECURE_NOTE_FIELD:"team_audit_log_user_revealed_secure_note_field",USER_REVEALED_SECRET_FIELD:"team_audit_log_user_revealed_secret_field",USER_COPIED_CREDENTIAL_FIELD:"team_audit_log_user_copied_credential_field",USER_COPIED_CREDIT_CARD_FIELD:"team_audit_log_user_copied_credit_card_field",USER_COPIED_BANK_ACCOUNT_FIELD:"team_audit_log_user_copied_bank_account_field",USER_COPIED_SECURE_NOTE_FIELD:"team_audit_log_user_copied_secure_note_field",USER_COPIED_SECRET_FIELD:"team_audit_log_user_copied_secret_field",USER_EXCLUDED_ITEM_FROM_PASSWORD_HEALTH:"team_audit_log_user_excluded_item_from_password_health",USER_INCLUDED_ITEM_IN_PASSWORD_HEALTH:"team_audit_log_user_included_item_in_password_health",ACTIVE:"team_audit_log_active",INACTIVE:"team_audit_log_inactive"},ws=(e,t)=>{switch(e){case"compromised_passwords":return t(As.NUDGE_NAME_COMPROMISED_PASSWORDS);case"weak_passwords":return t(As.NUDGE_NAME_WEAK_PASSWORDS)}return e},Ns=(e,t)=>{switch(e){case"active":return t(As.ACTIVE);case"inactive":return t(As.INACTIVE)}return e},Os={[hs.b.UserInvited]:(e,t)=>t(As.USER_INVITED,{email:`**${e?.properties?.target_login}**`}),[hs.b.UserReinvited]:(e,t)=>t(As.USER_REINVITED,{email:`**${e?.properties?.target_login}**`}),[hs.b.UserRemoved]:(e,t)=>t(As.USER_REMOVED,{email:`**${e?.properties?.target_login}**`}),[hs.b.TeamCaptainAdded]:(e,t)=>t(As.TEAM_CAPTAIN_ADDED,{email:`**${e?.properties?.target_login}**`}),[hs.b.TeamCaptainRemoved]:(e,t)=>t(As.TEAM_CAPTAIN_REMOVED,{email:`**${e?.properties?.target_login}**`}),[hs.b.GroupManagerAdded]:(e,t)=>t(As.GROUP_MANAGER_ADDED,{email:`**${e?.properties?.target_login}**`}),[hs.b.GroupManagerRemoved]:(e,t)=>t(As.GROUP_MANAGER_REMOVED,{email:`**${e?.properties?.target_login}**`}),[hs.b.MasterPasswordResetAccepted]:(e,t)=>t(As.MASTER_PASSWORD_RESET_ACCEPTED,{email:`**${e?.properties?.target_login}**`}),[hs.b.MasterPasswordResetRefused]:(e,t)=>t(As.MASTER_PASSWORD_RESET_REFUSED,{email:`**${e?.properties?.target_login}**`}),[hs.b.BillingAdminAdded]:(e,t)=>t(As.BILLING_ADMIN_ADDED,{email:`**${e?.properties?.target_login}**`}),[hs.b.BillingAdminRemoved]:(e,t)=>t(As.BILLING_ADMIN_REMOVED,{email:`**${e?.properties?.target_login}**`}),[hs.b.UserGroupCreated]:(e,t)=>t(As.USER_GROUP_CREATED,{groupName:`**${e.properties?.group_name}**`}),[hs.b.UserGroupRenamed]:(e,t)=>t(As.USER_GROUP_RENAMED,{newGroupName:`**${e.properties?.group_name}**`,oldGroupName:`**${e.properties?.old_group_name}**`}),[hs.b.UserGroupDeleted]:(e,t)=>t(As.USER_GROUP_DELETED,{groupName:`**${e.properties?.group_name}**`}),[hs.b.UserJoinedUserGroup]:(e,t)=>t(As.USER_JOINED_USER_GROUP,{groupName:`**${e.properties?.group_name}**`}),[hs.b.UserLeftUserGroup]:(e,t)=>t(As.USER_LEFT_USER_GROUP,{groupName:`**${e.properties?.group_name}**`}),[hs.b.UserInvitedToUserGroup]:(e,t)=>t(As.USER_INVITED_TO_USER_GROUP,{groupName:`**${e.properties?.group_name}**`,email:`**${e?.properties?.target_login}**`}),[hs.b.UserDeclinedInviteToUserGroup]:(e,t)=>t(As.USER_DECLINED_INVITE_TO_USER_GROUP,{groupName:`**${e.properties?.group_name}**`}),[hs.b.UserRemovedFromUserGroup]:(e,t)=>t(As.USER_REMOVED_FROM_USER_GROUP,{groupName:`**${e.properties?.group_name}**`,email:`**${e?.properties?.target_login}**`}),[hs.b.DomainRequested]:(e,t)=>t(As.DOMAIN_REQUESTED,{domain:`**${e.properties?.domain_url}**`}),[hs.b.DomainValidated]:(e,t)=>t(As.DOMAIN_VALIDATED,{domain:`**${e.properties?.domain_url}**`}),[hs.b.SensitiveLogsEnabled]:(e,t)=>t(As.SENSITIVE_LOGS_ENABLED),[hs.b.SensitiveLogsDisabled]:(e,t)=>t(As.SENSITIVE_LOGS_DISABLED),[hs.b.SsoIdpMetadataSet]:(e,t)=>t(As.SSO_IDP_METADATA_SET),[hs.b.SsoServiceProviderUrlSet]:(e,t)=>t(As.SSO_SERVICE_PROVIDER_URL_SET),[hs.b.SsoEnabled]:(e,t)=>t(As.SSO_ENABLED,e.properties?.hosting?{hosting:e.properties?.hosting}:void 0),[hs.b.SsoDisabled]:(e,t)=>t(As.SSO_DISABLED,e.properties?.hosting?{hosting:e.properties?.hosting}:void 0),[hs.b.TeamNameChanged]:(e,t)=>t(As.TEAM_NAME_CHANGED,{name:`**${e.properties?.name}**`}),[hs.b.NewBillingPeriodCreated]:(e,t)=>t(As.NEW_BILLING_PERIOD_CREATED,{date:`**${t.shortDate((0,Rt.Z)(e.properties?.new_end_date_unix),Vt._T.L)}**`}),[hs.b.SeatsAdded]:(e,t)=>t(As.SEATS_ADDED,{count:`**${e.properties?.seats_added}**`}),[hs.b.ContactEmailChanged]:(e,t)=>t(As.CONTACT_EMAIL_CHANGED,{email:`**${e?.properties?.new_contact_email}**`}),[hs.b.MasterPasswordMobileResetEnabled]:(e,t)=>t(As.MASTER_PASSWORD_MOBILE_RESET_ENABLED,{deviceName:e?.properties?.device_name?`**${e?.properties?.device_name}**`:"mobile"}),[hs.b.MasterPasswordMobileResetDisabled]:(e,t)=>t(As.MASTER_PASSWORD_MOBILE_RESET_DISABLED,{deviceName:e?.properties?.device_name?`**${e?.properties?.device_name}**`:"mobile"}),[hs.b.MasterPasswordChanged]:(e,t)=>t(As.MASTER_PASSWORD_CHANGED),[hs.b.MpToViewPasswordsEnabled]:(e,t)=>t(As.MP_TO_VIEW_PASSWORDS_ENABLED),[hs.b.MpToViewPasswordsDisabled]:(e,t)=>t(As.MP_TO_VIEW_PASSWORDS_DISABLED),[hs.b.TwoFactorAuthenticationLoginMethodAdded]:(e,t)=>t(As.TWO_FACTOR_AUTHENTICATION_LOGIN_METHOD_ADDED),[hs.b.TwoFactorAuthenticationFailed]:(e,t)=>t("emailToken"===e.properties.two_factor_method?As.TWO_FACTOR_AUTHENTICATION_FAILED_EMAIL_TOKEN:As.TWO_FACTOR_AUTHENTICATION_FAILED_OTP),[hs.b.TwoFactorAuthenticationLoginMethodRemoved]:(e,t)=>t(As.TWO_FACTOR_AUTHENTICATION_LOGIN_METHOD_REMOVED),[hs.b.BiometricSignInDisabled]:(e,t)=>t(As.BIOMETRIC_SIGN_IN_DISABLED,{deviceName:`**${e?.properties?.device_name}**`}),[hs.b.NitroSsoSetupStarted]:(e,t)=>t(As.NITRO_SSO_SETUP_STARTED),[hs.b.NitroSsoDomainProvisioned]:(e,t)=>t(As.NITRO_SSO_DOMAIN_PROVISIONED,{domain:`**${e?.properties?.domain_url}**`}),[hs.b.NitroSsoDomainRemoved]:(e,t)=>t(As.NITRO_SSO_DOMAIN_REMOVED,{domain:`**${e?.properties?.domain_url}**`}),[hs.b.NitroSsoDomainVerified]:(e,t)=>t(As.NITRO_SSO_DOMAIN_VERIFIED,{domain:`**${e?.properties?.domain_url}**`}),[hs.b.NitroUserProvisioningActivated]:(e,t)=>t(As.NITRO_USER_PROVISIONING_ACTIVATED),[hs.b.NitroUserProvisioningDeactivated]:(e,t)=>t(As.NITRO_USER_PROVISIONING_DEACTIVATED),[hs.b.NitroGroupProvisioningActivated]:(e,t)=>t(As.NITRO_GROUP_PROVISIONING_ACTIVATED),[hs.b.NitroGroupProvisioningDeactivated]:(e,t)=>t(As.NITRO_GROUP_PROVISIONING_DEACTIVATED),[hs.b.NitroSiemActivated]:(e,t)=>t(As.NITRO_SIEM_ACTIVATED,{siemType:`**${e.properties.siem_type}**`}),[hs.b.NitroSiemDeactivated]:(e,t)=>t(As.NITRO_SIEM_DEACTIVATED,{siemType:`**${e.properties.siem_type}**`}),[hs.b.NitroSiemEdited]:(e,t)=>t(As.NITRO_SIEM_EDITED,{siemType:`**${e.properties.siem_type}**`}),[hs.b.DWMEmailAdded]:(e,t)=>t(As.DWM_EMAIL_ADDED,{email:`**${e?.properties?.dark_web_monitoring_email}**`}),[hs.b.DWMEmailRemoved]:(e,t)=>t(As.DWM_EMAIL_REMOVED,{email:`**${e?.properties?.dark_web_monitoring_email}**`}),[hs.b.DWMAlertReceived]:(e,t)=>t(As.DWM_ALERT_RECEIVED,{email:`**${e?.properties?.dark_web_monitoring_email}**`}),[hs.b.UserDeviceAdded]:(e,t)=>t(As.USER_DEVICE_ADDED,{name:`**${e.properties?.device_name}**`}),[hs.b.UserDeviceRemoved]:(e,t)=>t(As.USER_DEVICE_REMOVED,{name:`**${e.properties?.device_name}**`}),[hs.b.UserDeviceLogin]:(e,t)=>t(As.USER_DEVICE_LOGIN,{name:`**${e.properties?.device_name}**`}),[hs.b.MasterPasswordReset]:(e,t)=>t(As.MASTER_PASSWORD_RESET),[hs.b.RequestedAccountRecovery]:(e,t)=>t(As.REQUESTED_ACCOUNT_RECOVERY),[hs.b.CompletedAccountRecovery]:(e,t)=>t(As.COMPLETED_ACCOUT_RECOVERY),[hs.b.MasterPasswordMobileReset]:(e,t)=>t(As.MASTER_PASSWORD_MOBILE_RESET,{deviceName:e?.properties?.device_name?`**${e?.properties?.device_name}**`:"mobile"}),[hs.b.UserSharedCredentialWithGroup]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?As.USER_SHARED_CREDENTIAL_WITH_GROUP_FULL_RIGHTS:As.USER_SHARED_CREDENTIAL_WITH_GROUP_LIMITED_RIGHTS,{domain:`**${n.properties.domain_url}**`,group:`**${n.properties.group_name}**`})},[hs.b.UserSharedCredentialWithEmail]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?As.USER_SHARED_CREDENTIAL_WITH_EMAIL_FULL_RIGHTS:As.USER_SHARED_CREDENTIAL_WITH_EMAIL_LIMITED_RIGHTS,{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[hs.b.UserSharedCredentialWithExternal]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?As.USER_SHARED_CREDENTIAL_WITH_EXTERNAL_FULL_RIGHTS:As.USER_SHARED_CREDENTIAL_WITH_EXTERNAL_LIMITED_RIGHTS,{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[hs.b.UserSharedSecureNoteWithGroup]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?As.USER_SHARED_SECURE_NOTE_WITH_GROUP_FULL_RIGHTS:As.USER_SHARED_SECURE_NOTE_WITH_GROUP_LIMITED_RIGHTS,{name:`**${n.properties.item_name}**`,group:`**${n.properties.group_name}**`})},[hs.b.UserSharedSecureNoteWithEmail]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?As.USER_SHARED_SECURE_NOTE_WITH_EMAIL_FULL_RIGHTS:As.USER_SHARED_SECURE_NOTE_WITH_EMAIL_LIMITED_RIGHTS,{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[hs.b.UserSharedSecureNoteWithExternal]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?As.USER_SHARED_SECURE_NOTE_WITH_EXTERNAL_FULL_RIGHTS:As.USER_SHARED_SECURE_NOTE_WITH_EXTERNAL_LIMITED_RIGHTS,{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[hs.b.UserRevokedSharedCredentialGroup]:(e,t)=>{const n=e;return t(As.USER_REVOKED_SHARED_CREDENTIAL_GROUP,{domain:`**${n.properties.domain_url}**`,group:`**${n.properties.group_name}**`})},[hs.b.UserRevokedSharedCredentialEmail]:(e,t)=>{const n=e;return t(As.USER_REVOKED_SHARED_CREDENTIAL_EMAIL,{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[hs.b.UserRevokedSharedCredentialExternal]:(e,t)=>{const n=e;return t(As.USER_REVOKED_SHARED_CREDENTIAL_EXTERNAL,{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[hs.b.UserRevokedSharedSecureNoteGroup]:(e,t)=>{const n=e;return t(As.USER_REVOKED_SHARED_SECURE_NOTE_GROUP,{name:`**${n.properties.item_name}**`,group:`**${n.properties.group_name}**`})},[hs.b.UserRevokedSharedSecureNoteEmail]:(e,t)=>{const n=e;return t(As.USER_REVOKED_SHARED_SECURE_NOTE_EMAIL,{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[hs.b.UserRevokedSharedSecureNoteExternal]:(e,t)=>{const n=e;return t(As.USER_REVOKED_SHARED_SECURE_NOTE_EXTERNAL,{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[hs.b.UserAcceptedSharingInviteSecureNote]:(e,t)=>t(As.USER_ACCEPTED_SHARING_INVITE_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[hs.b.UserRejectedSharingInviteSecureNote]:(e,t)=>t(As.USER_REJECTED_SHARING_INVITE_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[hs.b.UserAcceptedSharingInviteCredential]:(e,t)=>t(As.USER_ACCEPTED_SHARING_INVITE_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[hs.b.UserRejectedSharingInviteCredential]:(e,t)=>t(As.USER_REJECTED_SHARING_INVITE_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[hs.b.UserCreatedCollection]:(e,t)=>t(As.USER_PRIVATE_COLLECTION_CREATED,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[hs.b.UserImportedCollection]:(e,t)=>t(As.USER_PRIVATE_COLLECTION_IMPORTED,{user:`${e.properties.author_login}`,number:`${e.properties.credential_count}`,collection:`**${e.properties.collection_name}**`}),[hs.b.UserAddedCredentialToCollection]:(e,t)=>e.properties.domain_url?t(As.USER_PRIVATE_COLLECTION_ADDED_CREDENTIAL,{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,name:`**${e.properties.collection_name}**`}):t(As.USER_PRIVATE_COLLECTION_ADDED_CREDENTIAL_NO_DOMAIN,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[hs.b.UserRemovedCredentialFromCollection]:(e,t)=>t(As.USER_PRIVATE_COLLECTION_REMOVED,{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,name:`**${e.properties.collection_name}**`}),[hs.b.UserRenamedCollection]:(e,t)=>t(As.USER_PRIVATE_COLLECTION_RENAMED,{user:`${e.properties.author_login}`,old:`**${e.properties.old_collection_name}**`,new:`**${e.properties.collection_name}**`}),[hs.b.UserDeletedCollection]:(e,t)=>t(As.USER_PRIVATE_COLLECTION_DELETED,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[hs.b.UserSharedCollectionWithUser]:(e,t)=>t(As.USER_SHARED_COLLECTION_SHARED_WITH_USER,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,role:`${e.properties.permission}`,email:`${e.properties.target_login}`}),[hs.b.UserSharedCollectionWithGroup]:(e,t)=>t(As.USER_SHARED_COLLECTION_SHARED_WITH_GROUP,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,role:`${e.properties.permission}`,group:`${e.properties.group_name}`}),[hs.b.UserAcceptedCollection]:(e,t)=>t(As.USER_SHARED_COLLECTION_ACCEPTED,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[hs.b.UserRejectedCollection]:(e,t)=>t(As.USER_SHARED_COLLECTION_REJECTED,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[hs.b.UserAddedItemToCollection]:(e,t)=>{const n="USER_SHARED_COLLECTION_ADDED_CREDENTIAL"+("admin"===e.properties.permission?"_ADMIN":"_LIMITED");return e.properties.domain_url?t(As[n],{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,rights:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`}):t(As[n+"_NO_DOMAIN"],{user:`${e.properties.author_login}`,rights:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`})},[hs.b.UserRemovedItemFromCollection]:(e,t)=>t(As.USER_SHARED_COLLECTION_REMOVED_CREDENTIAL,{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,name:`**${e.properties.collection_name}**`}),[hs.b.UserUpdatedGroupRoleInCollection]:(e,t)=>t(As.USER_SHARED_COLLECTION_UPDATED_GROUP_ROLES,{user:`${e.properties.author_login}`,group:`**${e.properties.group_name}**`,role1:`${e.properties.old_permission}`,role2:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`}),[hs.b.UserUpdatedUserRoleInCollection]:(e,t)=>t(As.USER_SHARED_COLLECTION_UPDATED_USER_ROLES,{user:`${e.properties.author_login}`,email:`**${e.properties.group_name}**`,role1:`${e.properties.old_permission}`,role2:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`}),[hs.b.UserRevokedGroupFromCollection]:(e,t)=>t(As.USER_SHARED_COLLECTION_REVOKED_GROUPS,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,group:`**${e.properties.group_name}**`}),[hs.b.UserRevokedUserFromCollection]:(e,t)=>t(As.USER_SHARED_COLLECTION_REVOKED_USER,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,email:`**${e.properties.target_login}**`}),[hs.b.UserRenamedSharedCollection]:(e,t)=>t(As.USER_PRIVATE_COLLECTION_RENAMED,{user:`${e.properties.author_login}`,old:`**${e.properties.old_collection_name}**`,new:`**${e.properties.collection_name}**`}),[hs.b.UserCreatedCredential]:(e,t)=>t(As.USER_CREATED_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[hs.b.UserModifiedCredential]:(e,t)=>t(As.USER_MODIFIED_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[hs.b.UserDeletedCredential]:(e,t)=>t(As.USER_DELETED_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[hs.b.UserImportedCredentials]:(e,t)=>t(e.properties.import_count>1?As.USER_IMPORTED_CREDENTIALS.MANY:As.USER_IMPORTED_CREDENTIALS.ONE,{importCount:`**${e.properties.import_count}**`}),[hs.b.UserCreatedSecureNote]:(e,t)=>t(As.USER_CREATED_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[hs.b.UserModifiedSecureNote]:(e,t)=>t(As.USER_MODIFIED_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[hs.b.UserDeletedSecureNote]:(e,t)=>t(As.USER_DELETED_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[hs.b.NudgeExecuted]:(e,t)=>{const n=e,a=ws(n.properties.nudge_name,t);return t(n.properties.failures>0?As.NUDGE_EXECUTED_WITH_FAILURES:As.NUDGE_EXECUTED,{nudge_name:`**${a}**`,successes:`**${n.properties.successes}**`,failures:`**${n.properties.failures}**`})},[hs.b.NudgeConfigured]:(e,t)=>{const n=e,a=ws(n.properties.nudge_name,t),i=Ns(n.properties.status,t);return t(As.NUDGE_CONFIGURED,{nudge_name:`**${a}**`,status:`**${i}**`})},[hs.b.NitroIntegrationAppInstalled]:(e,t)=>t(As.NITRO_INTEGRATION_APP_INSTALLED,{integration_app:`**${e.properties.integration_app}**`}),[hs.b.NitroIntegrationAppUninstalled]:(e,t)=>t(As.NITRO_INTEGRATION_APP_UNINSTALLED,{integration_app:`**${e.properties.integration_app}**`}),[hs.b.UserReceivedNudge]:(e,t)=>{const n=ws(e.properties.nudge_received,t);return t(As.USER_RECEIVED_NUDGE,{nudge_received:`**${n}**`})},[hs.b.MassDeploymentConfigurationUpdated]:(e,t)=>{const n=Ns(e.properties.status,t);return t(As.MASS_DEPLOYMENT_CONFIGURATION_UPDATED,{status:`**${n}**`})},[hs.b.UserTypedCompromisedPassword]:(e,t)=>t(As.USER_TYPED_COMPROMISED_PASSWORD,{domain_url:`**${e.properties?.domain_url}**`}),[hs.b.UserTypedWeakPassword]:(e,t)=>t(As.USER_TYPED_WEAK_PASSWORD,{domain_url:`**${e.properties?.domain_url}**`}),[hs.b.UserTypedPassword]:(e,t)=>{const{properties:{domain_url:n,health_status:a}}=e;return t("compromised"===a?As.USER_TYPED_COMPROMISED_PASSWORD:As.USER_TYPED_WEAK_PASSWORD,{domain_url:`**${n}**`})},[hs.b.UserPerformedAutofillCredential]:(e,t)=>{const{properties:{credential_login:n,credential_domain:a,autofilled_domain:i}}=e;return t(As.USER_PERFORMED_AUTOFILL_CREDENTIAL,{credential_login:`**${n}**`,credential_domain:`**${a}**`,autofilled_domain:`**${i}**`})},[hs.b.UserPerformedAutofillPayment]:(e,t)=>{const{properties:{item_name:n,item_type:a,autofilled_domain:i}}=e;return t("bank_account"===a?As.USER_PERFORMED_AUTOFILL_BANK_ACCOUNT:As.USER_PERFORMED_AUTOFILL_PAYMENT_CARD,{item_name:`**${n}**`,item_type:`**${a}**`,autofilled_domain:`**${i}**`})},[hs.b.UserAuthenticatedWithPasskey]:(e,t)=>{const{properties:{passkey_domain:n,current_domain:a,credential_login:i}}=e;return t(As.USER_AUTHENTICATED_WITH_PASSKEY,{credential_login:`**${i}**`,passkey_domain:`**${n}**`,current_domain:`**${a}**`})},[hs.b.UserRevealedCredentialField]:(e,t)=>{const{properties:{credential_domain:n,credential_login:a,field:i}}=e;return t(As.USER_REVEALED_CREDENTIAL_FIELD,{field:`**${i}**`,credential_login:`**${a}**`,credential_domain:`**${n}**`})},[hs.b.UserRevealedCreditCardField]:(e,t)=>{const{properties:{name:n,field:a}}=e;return t(As.USER_REVEALED_CREDIT_CARD_FIELD,{field:`**${a}**`,name:`**${n}**`})},[hs.b.UserRevealedBankAccountField]:(e,t)=>{const{properties:{name:n,field:a}}=e;return t(As.USER_REVEALED_BANK_ACCOUNT_FIELD,{field:`**${a}**`,name:`**${n}**`})},[hs.b.UserRevealedSecret]:(e,t)=>{const{properties:{name:n}}=e;return t(As.USER_REVEALED_SECRET_FIELD,{name:`**${n}**`})},[hs.b.UserRevealedSecureNote]:(e,t)=>{const{properties:{name:n}}=e;return t(As.USER_REVEALED_SECURE_NOTE_FIELD,{name:`**${n}**`})},[hs.b.UserCopiedCredentialField]:(e,t)=>{const{properties:{credential_domain:n,credential_login:a,field:i}}=e;return t(As.USER_COPIED_CREDENTIAL_FIELD,{field:`**${i}**`,credential_login:`**${a}**`,credential_domain:`**${n}**`})},[hs.b.UserCopiedCreditCardField]:(e,t)=>{const{properties:{name:n,field:a}}=e;return t(As.USER_COPIED_CREDIT_CARD_FIELD,{field:`**${a}**`,name:`**${n}**`})},[hs.b.UserCopiedBankAccountField]:(e,t)=>{const{properties:{name:n,field:a}}=e;return t(As.USER_COPIED_BANK_ACCOUNT_FIELD,{field:`**${a}**`,name:`**${n}**`})},[hs.b.UserCopiedSecret]:(e,t)=>{const{properties:{name:n}}=e;return t(As.USER_COPIED_SECRET_FIELD,{name:`**${n}**`})},[hs.b.UserCopiedSecureNote]:(e,t)=>{const{properties:{name:n}}=e;return t(As.USER_COPIED_SECURE_NOTE_FIELD,{name:`**${n}**`})},[hs.b.UserIncludedItemInPasswordHealth]:(e,t)=>{const{properties:{credential_login:n,credential_domain:a}}=e;return t(As.USER_INCLUDED_ITEM_IN_PASSWORD_HEALTH,{credential_login:`**${n}**`,credential_domain:`**${a}**`})},[hs.b.UserExcludedItemFromPasswordHealth]:(e,t)=>{const{properties:{credential_login:n,credential_domain:a}}=e;return t(As.USER_EXCLUDED_ITEM_FROM_PASSWORD_HEALTH,{credential_login:`**${n}**`,credential_domain:`**${a}**`})}},Rs=(e,t)=>Is.includes(e.log_type)?Os[e.log_type](e,t):"",Ls=Object.values(hs.b);var Ms=n(54760);const Bs=Object.values(hs.b),Ps="team_activity_list_head_admin",Us="team_activity_list_head_action",Xs="team_activity_list_head_time_csv";var zs;const qs=({progressPercent:e})=>{const{translate:t}=(0,p.Z)(),n=Math.min(Math.max(e,0),100);return(0,S.BX)(S.HY,{children:[(0,S.BX)("div",{sx:{gap:"8px",height:"16px",display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center"},children:[(0,S.tZ)(o.bG,{percentage:n,size:"small"}),100===n?zs||(zs=(0,S.tZ)(o.JO,{size:"small",name:"FeedbackSuccessFilled",color:"ds.text.positive.quiet"})):null]}),(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",sx:{marginTop:"4px"},children:t("team_activity_download_modal_progress",{progressPercentage:n})})]})},js=({isOpen:e,areLogsLoading:t,hasMoreLogs:n,logs:a,loadMoreLogs:i,onClose:s})=>{const[c,d]=(0,r.useState)(0),{translate:_}=(0,p.Z)(),{showToast:u}=(0,o.pm)(),g=()=>{s(),d(0)};return(0,r.useEffect)((()=>{if(!e||t)return;if(n)return d(c<80?c+20:c),void i(1e3);d(100);const r=((e,t,n=!1)=>{const a=(n?[t(Ps),t("team_activity_list_head_category"),t(Us),t(Xs)]:[t(Ps),t(Us),t(Xs)]).join(",")+"\n",i=e.filter((e=>Bs.includes(e.log_type))).map((e=>{var a;const i=null!=(a=e.properties?.author_login)?a:"",r=Rs(e,t).replace(/\*\*/g,"").replace(/[“”]/g,'"'),{label:s}=ks(e,t),o=new Date(e.date_time).toISOString(),l=`${o.substr(0,10)} ${o.substr(11,8)}`;return n?`${i},${s},${r},${l}`:`${i},${r},${l}`}));return(0,m.Kz)(new l.UserDownloadAuditLogsDataEvent({flowStep:l.FlowStep.Complete,auditLogCount:i.length})),a+i.join("\n")})(a,_,!0);try{(0,Ms.S)(["\ufeff",r],"dashlane-activity-export.csv","text/csv;charset=utf-8"),setTimeout(g,2e3)}catch(e){u({mood:"danger",description:_("_common_generic_error")}),(0,m.Kz)(new l.UserDownloadAuditLogsDataEvent({flowStep:l.FlowStep.Error,auditLogDownloadError:l.AuditLogDownloadError.NoCsv}))}}),[e,n,t,a]),(0,S.tZ)("div",{children:(0,S.tZ)(o.Vq,{isOpen:e,closeActionLabel:_("_common_dialog_dismiss_button"),onClose:g,title:_("team_activity_download_modal_title"),children:(0,S.BX)("div",{sx:{maxHeight:"fit-content",overflowX:"hidden",overflowY:"auto"},children:[(0,S.tZ)(qs,{progressPercent:c}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{margin:"16px 0"},children:_("team_activity_download_modal_body")}),(0,S.tZ)(o.ke,{mood:"neutral",size:"small",title:_("team_activity_download_modal_warning")})]})})})},Fs=e=>t=>{!e||"Enter"!==t.key&&" "!==t.key||(e(),t.preventDefault())},Gs={padding:"16px 0 16px 16px",textAlign:"left",fontSize:"12px",fontWeight:"600",verticalAlign:"middle",whiteSpace:"break-spaces",textTransform:"uppercase",cursor:"default"},Vs=({onClick:e,sortOrder:t,colSpan:n,tooltipLabel:a,headerLabel:i,headerElement:s})=>{const[l,c]=(0,r.useState)(!1);return(0,S.tZ)("th",{scope:"col",role:"columnheader",colSpan:n,tabIndex:0,"aria-sort":(d=t,"asc"===d?"ascending":"desc"===d?"descending":"none"),onClick:e,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onFocus:()=>c(!0),onBlur:()=>c(!1),onKeyDown:Fs(e),sx:Gs,children:(0,S.BX)("div",{sx:{display:"flex",height:"100%",maxWidth:"140px",alignItems:"center"},children:[s||null,a?(0,S.tZ)(o.u,{content:a,isOpen:l,children:(0,S.tZ)("span",{sx:{marginTop:"-5px",paddingTop:"5px",minWidth:0,whiteSpace:"break-spaces"},children:i})}):(0,S.tZ)("span",{sx:{minWidth:0,whiteSpace:"break-spaces",overflow:"hidden",textOverflow:"ellipsis"},children:i}),(0,S.tZ)("div",{sx:{width:"10px"},children:t?(0,S.tZ)(o.JO,{sx:{ml:"4px"},name:"desc"===t?"CaretDownOutlined":"CaretUpOutlined",size:"small"}):null})]})});var d},Hs=({headerElement:e,colSpan:t,headerLabel:n,tooltipLabel:a})=>(0,S.BX)("th",{colSpan:t,sx:Gs,children:[e||null,a?(0,S.tZ)(o.u,{content:a,children:(0,S.tZ)("span",{sx:{minWidth:0,whiteSpace:"break-spaces"},children:n})}):(0,S.tZ)("span",{sx:{minWidth:0,whiteSpace:"break-spaces"},children:n})]}),Ws=({columns:e,sxProps:t})=>(0,S.tZ)("thead",{sx:t,children:(0,S.tZ)("tr",{"aria-rowindex":1,sx:{color:"ds.text.neutral.quiet"},children:e.map((e=>e.onClick?(0,S.tZ)(Vs,{...e},e.headerKey):(0,S.tZ)(Hs,{...e},e.headerKey)))})}),$s=({children:e,withCategories:t=!1})=>{const{translate:n}=(0,p.Z)(),a=[{headerLabel:n("team_activity_list_head_admin"),headerKey:"admin"},{headerLabel:n("team_activity_list_head_category"),headerKey:"category"},{headerLabel:n("team_activity_list_head_action"),headerKey:"action"},{headerLabel:n("team_activity_list_head_time"),headerKey:"time"}].filter((e=>"category"!==e.headerKey||t));return(0,S.BX)("table",{sx:{width:"100%",lineHeight:1.5,textAlign:"left"},children:[(0,S.tZ)(Ws,{columns:a,sxProps:{backgroundColor:"ds.container.agnostic.neutral.quiet"}}),(0,S.tZ)("tbody",{sx:xs.TABLE_BODY,children:e},"table-body")]})};var Ks=n(32814),Ys=n(53506);const Qs=({text:e})=>{if(!e)return null;const t=e.split("**");return 1===t.length?(0,S.tZ)("span",{children:e}):(0,S.tZ)("span",{children:t.map(((e,t)=>t%2==1?(0,S.tZ)("strong",{children:e},`${e}-${t}`):e))})},Js={LOGIN_CELL:{display:"flex",padding:"15px 16px 14px"},LOGIN_TEXT:{height:"31px",marginLeft:"16px",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},eo=({login:e,categoryIcon:t,categoryLabel:n,activityDescription:a,timestampMs:i})=>(0,S.BX)("tr",{children:[(0,S.BX)("td",{sx:Js.LOGIN_CELL,children:[(0,S.tZ)(Ks.q,{email:e,size:30}),(0,S.tZ)("div",{id:"user-email",sx:Js.LOGIN_TEXT,children:(0,S.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.body.standard.regular",children:e})})]}),t&&n?(0,S.tZ)("td",{children:(0,S.tZ)(o.Vp,{leadingDecoration:t,label:n})}):null,(0,S.tZ)("td",{children:(0,S.tZ)(Qs,{text:a})}),(0,S.tZ)("td",{sx:{whiteSpace:"nowrap"},children:(0,S.tZ)(Ys.v,{date:new Date(i)})})]}),to=(0,r.memo)(eo);var no=n(57703),ao=n(55282);let io=function(e){return e.LAST_DAY="last_day",e.LAST_WEEK="last_week",e.LAST_MONTH="last_month",e.LAST_3_MONTHS="last_3_months",e.LAST_6_MONTHS="last_6_months",e.LAST_YEAR="last_year",e.YEAR_TO_DATE="year_to_date",e}({});const ro=864e5,so=e=>{const t=Date.now(),n=t-e*ro;return{startDate:Math.floor(n/1e3),endDate:Math.ceil(t/1e3)}},oo=e=>{switch(e){case io.LAST_DAY:return so(1);case io.LAST_WEEK:return so(7);case io.LAST_MONTH:return so(30);case io.LAST_3_MONTHS:return so(90);case io.LAST_6_MONTHS:return so(180);case io.LAST_YEAR:return so(360);case io.YEAR_TO_DATE:return(()=>{const e=new Date,t=new Date(e.getFullYear(),0,1),n=Math.floor((e.getTime()-t.getTime())/ro);return so(n)})()}};var lo=n(76376);const co=(e,t)=>[e.url,...e.subPaths?e.subPaths.map((t=>`${e.url}${t}`)):[]].includes(t),_o={TITLE:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"32px"},TAB:{width:"auto",whiteSpace:"nowrap",color:"ds.text.neutral.standard !important",backgroundColor:"ds.container.expressive.neutral.supershy.idle !important","&:hover, &:active":{backgroundColor:"ds.container.expressive.neutral.supershy.hover !important"}},DISABLED_TAB:{pointerEvents:"none",color:"ds.text.oddity.disabled"},SELECTED_TAB:{backgroundColor:"ds.container.expressive.neutral.supershy.active !important"}},uo=({title:e,titleBadge:t,subtitle:n,tabs:a=[],extraInfo:r})=>{const{pathname:s}=(0,i.TH)();return e||a.length?(0,S.BX)("nav",{className:"tabMenuContainer--y2MfbHSdck",children:[e?(0,S.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:(0,S.BX)("span",{sx:_o.TITLE,children:[e,t]})}):null,n?(0,S.tZ)(o.nv,{as:"h2",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{marginBottom:"32px",a:{fontWeight:600}},children:n}):null,null!=r?r:null,a.length?(0,S.tZ)(re.G8v,{children:a.map((e=>(0,S.tZ)(re.h2L,{label:e.label,notification:e.notifications,selected:co(e,s),sx:(0,o.jM)([_o.TAB,e.isDisabled?_o.DISABLED_TAB:{},co(e,s)?_o.SELECTED_TAB:{}]),as:t=>(0,S.tZ)(i.OL,{to:e.url,...t})},e.label)))}):null]}):null},mo=({title:e})=>{const{translate:t}=(0,p.Z)(),{routes:n}=(0,lo.Xo)(),a=(0,s.qr)({queryConfig:{query:he.C.getAccountRecoveryRequestCount},liveConfig:{live:he.C.liveAccountRecoveryRequestCount}},[]),i=(0,Te.h)(),r=a.status===s.rq.Success&&a.data;return(0,S.tZ)(uo,{title:e,subtitle:t.markup("team_activity_header_subtitle_markup",{},{linkTarget:"_blank"}),tabs:(()=>{const e=[{label:t("team_activity_header_tab_activity_logs"),url:`${n.teamActivityRoutePath}/recent`}];return i.status===s.rq.Success&&i.data&&e.push({label:t("team_activity_header_tab_mpr_requests"),url:`${n.teamActivityRoutePath}/requests`,notifications:r||0}),e})()})},po=(0,r.memo)(mo),go=({header:e,children:t})=>(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",padding:"32px",gap:"16px"},children:[e,t]}),ho={ACTIVITY_PANEL:{display:"inline-block",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"24px 32px",borderRadius:"8px",border:"1px solid ds.border.neutral.quiet.idle",flex:"1"}},yo=({isLoading:e,children:t})=>{const{translate:n}=(0,p.Z)();return(0,S.tZ)(go,{header:(0,S.tZ)(po,{title:n("team_activity_header_title")}),children:e?(0,S.tZ)(ai.Z,{containerStyle:{minHeight:240}}):(0,S.tZ)("div",{sx:ho.ACTIVITY_PANEL,children:t})})},bo=({startDownload:e,areFiltersLocked:t,userFilter:n,handleChangeUser:a})=>{const{translate:i}=(0,p.Z)();return(0,S.BX)("div",{sx:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[(0,S.tZ)(o.Um,{label:i("team_activity_filters_label_user_login"),onChange:a,value:n,sx:{width:"350px"}}),(0,S.tZ)(o.zx,{onClick:e,disabled:t,layout:"iconLeading",icon:"DownloadOutlined",children:i("team_activity_download_button")})]})},xo=({areFiltersLocked:e,canApplyFilters:t,canClearFilters:n,filters:a,handleApplyFilter:i,handleChangeDatePeriod:r,handleChangeFilters:s,handleClearFilters:l,periodFilter:c,sortedTranslatedCategories:d})=>{var _,u;const{translate:m}=(0,p.Z)();return(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",backgroundColor:"ds.container.agnostic.neutral.quiet",borderRadius:"8px",padding:"24px",gap:"16px"},children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.supporting.small",children:m("team_activity_filters_subtitle")}),(0,S.BX)("div",{sx:{display:"grid",gap:"24px",justifyContent:"space-between",gridTemplateColumns:"repeat(4, calc(25% - 20px))"},children:[(0,S.tZ)(o.qo,{label:m("team_activity_filters_label_domain"),disabled:e,onChange:({target:e})=>s("domain",e.value),value:a.domain}),(0,S.BX)(o.mg,{label:m("team_activity_filters_label_category"),disabled:e,onChange:e=>s("categories",e),value:null!=(_=a.categories[0])?_:So,children:[(0,S.tZ)(o.$m,{value:So,children:m("team_activity_filters_all_categories")},"select_option_default_category"),d.map((({category:e,translatedCategory:t})=>(0,S.tZ)(o.$m,{value:e,children:t},`select_option_${e}`)))]}),(0,S.BX)(o.mg,{label:m("team_activity_filters_label_type"),disabled:e,onChange:e=>s("logTypes",e),value:null!=(u=a.logTypes[0])?u:So,children:[(0,S.tZ)(o.$m,{value:So,children:m("team_activity_filters_all_log_types")},"select_option_default_log_type"),Is.map((e=>(0,S.tZ)(o.$m,{value:e,children:`team_audit_log_activity_${e}`},`select_option_${e}`)))]}),(0,S.tZ)(o.mg,{label:m("team_activity_filters_label_date"),disabled:e,onChange:r,value:c,children:Object.values(io).map((e=>(0,S.tZ)(o.$m,{value:e,children:m(`team_audit_log_date_range_${e}`)},`select_option_${e}`)))})]}),(0,S.BX)(o.kC,{flexDirection:"row",gap:"8px",children:[(0,S.tZ)(o.zx,{mood:"brand",onClick:i,disabled:e||!t,children:m("team_activity_filters_action_apply")}),(0,S.tZ)(o.zx,{mood:"neutral",intensity:"quiet",layout:"labelOnly",onClick:l,disabled:e||!n,children:m("team_activity_filters_action_clear")})]})]})},So="all",fo={login:"",domain:"",categories:[],logTypes:[]},vo=io.LAST_WEEK,Co=({applyFilters:e,startDownload:t,areFiltersLocked:n,hasError:a,setDateRange:i,sortedTranslatedCategories:s,initialCategoryFilters:o=[]})=>{const[l,c]=(0,r.useState)(a),[d,_]=(0,r.useState)(!!o.length),[u,m]=(0,r.useState)({...fo,categories:o}),[p,g]=(0,r.useState)(vo),h=(e,t)=>{c(!0),m("categories"===e||"logTypes"===e?{...u,[e]:t===So?fo[e]:[t]}:{...u,[e]:t})};return(0,S.BX)("div",{sx:{marginBottom:"16px"},children:[(0,S.tZ)(bo,{handleChangeUser:({target:e})=>h("login",e.value),userFilter:u.login,startDownload:t,areFiltersLocked:n}),(0,S.tZ)(xo,{areFiltersLocked:n,canApplyFilters:l,canClearFilters:d,filters:u,handleApplyFilter:()=>{i(oo(p));const t=Object.entries(u).reduce(((e,[t,n])=>n.length?e?{...e,[t]:n}:{[t]:n}:e),void 0);e(t),_(!0),c(!1)},handleChangeDatePeriod:e=>{g(e),c(!0)},handleChangeFilters:h,handleClearFilters:()=>{m(fo),i(oo(vo)),_(!1),c(!1),e()},periodFilter:p,sortedTranslatedCategories:s})]})};var Eo,Zo,Do,To,ko=n(6523),Io=n(6721);const Ao="crd.adminHasSeenLogFromAuditLogsPage",wo=[hs.s.RiskDetection,hs.s.SecurityMonitoring],No=[hs.b.UserTypedCompromisedPassword,hs.b.UserTypedWeakPassword,hs.b.UserTypedPassword],Oo=()=>{const{translate:e}=(0,p.Z)(),t=(0,r.useRef)(null),n=(0,r.useRef)(null),{search:a}=(0,i.TH)(),s=(0,Or.parse)(a)?.categoryFilters,[d,_]=(0,r.useState)(oo(io.LAST_WEEK)),{list:u,hasMore:g,isLoading:h,hasError:y,loadMore:b,applyFilters:x}=((e,t,n)=>{const[a,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(n),{initiateActivityLogsRetrieval:l,loadNextActivityLogs:d}=(0,q.u)(no.g),{data:_,status:u}=(0,c.k)(no.g,"activityLogs");(0,r.useEffect)((()=>{a||(l({startDate:e,endDate:t,filters:s,target:"table"}),i(!0))}),[t,s,a,e]);const m=u===L.rq.Success&&_.hasMoreData,p=u===L.rq.Success?_.logs:[],g=u!==L.rq.Success||_.status===ao.Q.LOADING||m&&0===_.logs.length;return{list:p,hasMore:m,isLoading:!a||g,hasError:u===L.rq.Error||"ERROR"===_?.status,loadMore:e=>d({maxResults:e,target:"table"}),applyFilters:e=>{o(e),i(!1)}}})(d.startDate,d.endDate,s?{categories:[s]}:void 0);(0,r.useEffect)((()=>{(async()=>{const e=await(0,ko.U)(Ao).catch((()=>null));e&&!e[Ao]&&u.some((e=>e.category&&wo.includes(e.category)&&No.includes(e.log_type)))&&(0,Io.t)({[Ao]:!0}).then((()=>{(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:l.RiskDetectionSetupStep.AdminSeeCrdLogFromAuditLogs}))})).catch((()=>{}))})()}),[u]),(0,ys.M)({hasMore:g,scrollContainerRef:t,bottomRef:n,loadMore:b});const f=h&&!u.length,v=h&&u.length,[C,E]=(0,r.useState)(!1),{showAlert:Z}=(0,Rn.V)(),D=(0,r.useCallback)((()=>{E(!1),(0,m.Nc)(l.PageView.TacActivityList)}),[]),T=u.map((t=>((e,t)=>{var n;return Ls.includes(e.log_type)?{uuid:e.uuid,date:new Date(e.date_time),timestampMs:e.date_time,category:ks(e,t),activityDescription:Rs(e,t),userLogin:null!=(n=e.properties?.author_login)?n:""}:null})(t,e))).filter((e=>null!==e)),k=Ts.map((t=>({category:t,translatedCategory:e(`team_audit_log_category_${t}`)}))).sort(((e,t)=>e.translatedCategory<t.translatedCategory?-1:1));return(0,r.useEffect)((()=>{y&&Z(e("_common_generic_error"),re.BLW.ERROR)}),[y]),(0,S.BX)(yo,{isLoading:!1,children:[(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",justifyContent:"center"},ref:t,children:[(0,S.tZ)(Co,{applyFilters:x,startDownload:()=>{E(!0)},areFiltersLocked:f,hasError:y,setDateRange:_,sortedTranslatedCategories:k,initialCategoryFilters:s?[s]:[]}),y?Eo||(Eo=(0,S.tZ)(Es,{})):null,0!==u.length||y||h?null:Zo||(Zo=(0,S.tZ)(Ds,{})),f&&!y?Do||(Do=(0,S.tZ)(Zs,{})):null,!y&&u.length>0?(0,S.tZ)($s,{withCategories:!0,children:T.map((e=>(0,S.tZ)(to,{login:e.userLogin,categoryIcon:e.category.icon,categoryLabel:e.category.label,activityDescription:e.activityDescription,timestampMs:e.timestampMs},`log_${e.uuid}`)))}):null,(0,S.tZ)("div",{ref:n,children:v?(0,S.tZ)("div",{sx:{display:"flex",height:"40px",justifyContent:"center",paddingTop:"20px",paddingBottom:"60px"},children:To||(To=(0,S.tZ)(o.ZX,{}))}):null})]}),(0,S.tZ)(js,{isOpen:C,areLogsLoading:h,hasMoreLogs:g,logs:u,loadMoreLogs:b,onClose:D})]})};var Ro;const Lo=()=>(r.useEffect((()=>{(0,m.Nc)(l.PageView.TacActivityList)}),[]),Ro||(Ro=(0,S.tZ)("div",{children:(0,S.tZ)(Oo,{})})));var Mo,Bo,Po=n(89078),Uo=n(21484);const Xo={TABLE:{width:"100%",lineHeight:"1.5",textAlign:"left"},TABLE_BODY:{tr:{boxShadow:"inset 0 -1px 0 0 ds.border.neutral.quiet.idle",height:"60px",td:{padding:"16px",verticalAlign:"middle",variant:"text.ds.body.reduced.regular",color:"ds.text.neutral.standard"}}},LOGIN_CELL:{display:"flex",padding:"15px 16px 14px"},LOGIN_TEXT:{height:"31px",marginLeft:"16px",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},ACTION_CELL:{display:"flex",gap:"36px",justifyContent:"flex-end"}},zo=({onAccept:e,onDecline:t,dateFormatter:n,requests:a})=>{const{translate:i}=(0,p.Z)(),r=[{headerLabel:i("team_master_password_reset_table_head_member"),headerKey:"member"},{headerLabel:i("team_master_password_reset_table_head_time"),headerKey:"time"},{headerLabel:"",headerKey:"actions"}];return(0,S.BX)("table",{sx:Xo.TABLE,children:[(0,S.tZ)(Ws,{columns:r}),(0,S.tZ)("tbody",{sx:Xo.TABLE_BODY,children:a.map((a=>{const r=(0,Rt.Z)(a.creationDateUnix),s=n(r);return(0,S.BX)("tr",{children:[(0,S.BX)("td",{sx:Xo.LOGIN_CELL,children:[(0,S.tZ)(Ks.q,{email:a.login,size:30}),(0,S.tZ)("div",{id:"user-email",sx:Xo.LOGIN_TEXT,children:(0,S.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.body.standard.regular",children:a.login})})]}),(0,S.tZ)("td",{children:s}),(0,S.BX)("td",{sx:Xo.ACTION_CELL,children:[(0,S.tZ)(o.zx,{mood:"danger",intensity:"supershy",layout:"iconOnly",size:"medium",icon:Mo||(Mo=(0,S.tZ)(o.JO,{name:"FeedbackFailFilled"})),onClick:()=>t(a),"aria-label":i("team_master_password_reset_dialog_decline_button_ok")}),(0,S.tZ)(o.zx,{mood:"positive",intensity:"supershy",layout:"iconOnly",size:"medium",icon:Bo||(Bo=(0,S.tZ)(o.JO,{name:"FeedbackSuccessFilled"})),onClick:()=>e(a),"aria-label":i("team_master_password_reset_dialog_accept_button_ok")})]})]},(0,D.uniqueId)())}))},"table-body")]})},qo=(0,r.memo)(zo),jo="team_master_password_reset_dialog_accept_button_cancel",Fo="team_master_password_reset_dialog_decline_button_cancel",Go={LIST_CONTAINER:{display:"flex",flexDirection:"column",justifyContent:"center",margin:"0 auto",marginBottom:"16px",alignItems:"center"},NO_ITEMS:{border:"dashed 1px ds.border.neutral.standard.idle",height:"288px",marginTop:"132px"}},Vo=({lee:e})=>{var t;const{translate:n}=(0,p.Z)(),{getTeamId:a,getTeamPolicies:i}=(0,Po.Y)(d.o,{getTeamId:{},getTeamPolicies:{}},[]),s=a.data?.teamId,l={dialogIsVisible:!1,dialogType:null,selectedRequest:null},[c,_]=(0,r.useState)(l),[u,m]=(0,r.useState)(!1),g=(0,r.useCallback)((async()=>{s&&await(0,ge.mP)({teamId:Number(s)})}),[s]);(0,r.useEffect)((()=>{(async()=>{try{m(!0),i.data?.recoveryEnabled&&(await g(),m(!1))}catch(e){console.error(`RequestsActivity - fetchStatus failed with error ${e}`),m(!1)}})()}),[g,i.data]);const h=e=>{_({dialogIsVisible:!0,dialogType:"accept",selectedRequest:e})},y=e=>{_({dialogIsVisible:!0,dialogType:"decline",selectedRequest:e})},b=e=>[n.shortDate(e,Vt._T.l),n.shortDate(e,Vt._T.LT)].join(" - "),x=()=>_(l);return i.status!==L.rq.Success&&a.status!==L.rq.Success?null:(0,S.BX)(yo,{isLoading:u,children:[(()=>{const t=(()=>{var t;const{teams:n}=(0,Uo.e)(e.globalState);return null==s?[]:null!=(t=n[s]?.notifications?.accountRecoveryRequests)?t:[]})();return t.length?(0,S.tZ)("div",{sx:Go.LIST_CONTAINER,children:(0,S.tZ)(qo,{onAccept:h,onDecline:y,dateFormatter:b,requests:t})}):(0,S.BX)("div",{sx:(0,o.jM)([Go.LIST_CONTAINER,Go.NO_ITEMS]),children:[(0,S.tZ)(o.JO,{name:"NotificationOutlined",sx:{width:"100px",height:"100px"},color:"ds.border.neutral.quiet.idle"}),(0,S.tZ)(o.nv,{textStyle:"ds.title.section.medium",sx:{marginTop:"36px"},children:n("team_master_password_reset_table_empty_label")}),(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.quiet",sx:{marginTop:"7px"},children:n("team_master_password_reset_table_empty_helper")})]})})(),(0,S.BX)(o.Vq,{isOpen:c.dialogIsVisible&&"accept"===c.dialogType,onClose:x,closeActionLabel:n(jo),actions:{primary:{children:n("team_master_password_reset_dialog_accept_button_ok"),onClick:()=>{c.selectedRequest&&(0,ge.Z8)({login:c.selectedRequest.login,recoveryKey:c.selectedRequest.recoveryClientKey,userPublicKey:c.selectedRequest.publicKey}).then((()=>{g(),_(l)})).catch((e=>{console.error(e)}))}},secondary:{children:n(jo),onClick:x}},title:n("team_master_password_reset_dialog_accept_title"),children:[c.selectedRequest?.login?(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:n("team_master_password_reset_dialog_accept_content_bold",{login:c.selectedRequest.login})}):null,(0,S.tZ)(o.nv,{children:n("team_master_password_reset_dialog_accept_content")})]}),(0,S.BX)(o.Vq,{isOpen:c.dialogIsVisible&&"decline"===c.dialogType,onClose:x,closeActionLabel:n(Fo),actions:{primary:{children:n("team_master_password_reset_dialog_decline_button_ok"),onClick:async()=>{if(c.selectedRequest)try{await(0,ge.VK)({login:c.selectedRequest.login}),g(),_(l)}catch(e){console.error(e)}}},secondary:{children:n(Fo),onClick:x}},title:n("team_master_password_reset_dialog_decline_title"),children:[c.selectedRequest?.login?(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:n("team_master_password_reset_dialog_decline_content_bold",{login:null!=(t=c.selectedRequest?.login)?t:""})}):null,(0,S.tZ)(o.nv,{children:n("team_master_password_reset_dialog_decline_content")})]})]})};function Ho({path:e}){return(0,S.tZ)(i.GB,{path:[e,`${e}/recent`,`${e}/requests`],permission:e=>e.adminAccess.hasFullAccess,children:(0,S.BX)(i.rs,{children:[(0,S.tZ)(i.l_,{exact:!0,from:`${e}/`,to:`${e}/recent`}),(0,S.tZ)(i.Vy,{path:`${e}/requests`,component:Vo}),(0,S.tZ)(i.Vy,{path:`${e}/recent`,component:Lo})]})})}n(68030);var Wo=n(48484),$o=n(73183),Ko=n(358);n(61238);const Yo=({children:e,onRequestClose:t,footer:n})=>{const{translate:a}=(0,p.Z)(),i=a("team_directory_sync_key_dialog_title");return(0,S.tZ)(Ya.o,{isOpen:!0,showCloseIcon:!0,onRequestClose:t,footer:n,title:i,children:e})},Qo=({onSubmitKeySuccess:e,onSubmitKeyError:t,checkDirectorySyncKeyRequest:n,handleDismiss:a,handleError:i})=>{const{translate:s}=(0,p.Z)(),[l,c]=(0,r.useState)({inputKey:"",isInputKeyInvalid:!1});return(0,S.BX)(Yo,{onRequestClose:a,footer:(0,S.tZ)(re.cNS,{primaryButtonTitle:s("team_directory_sync_key_dialog_key_input_verify"),primaryButtonOnClick:async()=>{var a;const{publicKey:r=""}=null!=(a=n())?a:{},s=l.inputKey.replace(/\s/g,"").replace(/\n/g,"");var o;s===r?(()=>{const e=n();return e?(0,ge.QV)(e,"validated"):Promise.reject(new Error("missing params"))})().then((()=>{e()})).catch(i):(o=s).length%4==0&&atob(o).includes("</RSAKeyValue>")?t():c((e=>({...e,isInputKeyInvalid:!0})))},secondaryButtonTitle:s("team_directory_sync_key_dialog_key_input_postpone"),secondaryButtonOnClick:a,intent:"primary"}),children:[(0,S.tZ)(o.nv,{sx:{marginBottom:"2em"},color:"ds.text.neutral.quiet",children:s.markup("team_directory_sync_key_dialog_key_input_message_markup")}),(0,S.tZ)(o.Kx,{placeholder:s("team_directory_sync_key_dialog_key_input_placeholder"),onChange:({target:{value:e}})=>{c({inputKey:e,isInputKeyInvalid:!1})},value:l.inputKey,feedback:l.isInputKeyInvalid?{text:s("team_directory_sync_key_dialog_key_input_invalid")}:void 0,error:l.isInputKeyInvalid})]})};var Jo=function(e){return e[e.Initial=0]="Initial",e[e.KeyInput=1]="KeyInput",e[e.KeySuccess=2]="KeySuccess",e[e.KeyError=3]="KeyError",e[e.KeySuspended=4]="KeySuspended",e}(Jo||{});const el=e=>{var t;const{translate:n}=(0,p.Z)(),[a,i]=(0,r.useState)(Jo.Initial),s=()=>e.lee.globalState.directorySyncKey.checkDirectorySyncKeyRequest,l=()=>{e.lee.dispatchGlobal((0,Ko.M2)())},c=()=>{e.lee.dispatchGlobal((0,Ko.HK)())},d=()=>{e.lee.dispatchGlobal((0,Ko.er)())},_=()=>{const t="directorySyncKeyValidationError",n=re.BLW.ERROR,a={key:t,level:n,textKey:"team_directory_sync_key_error_markup",handleClose:()=>e.lee.dispatchGlobal((0,$o.FV)(t))};e.lee.dispatchGlobal((0,$o.wN)(a)),c()},u=()=>{i(Jo.KeyInput)},m=()=>{(()=>{const e=s();return e?(0,ge.QV)(e,"rejected"):Promise.reject(new Error("missing params"))})().then((()=>{i(Jo.KeySuspended),d()})).catch(_)},g=()=>{i(Jo.KeySuccess),d()},h=()=>{i(Jo.KeyError)};switch(a){case Jo.Initial:return(0,S.tZ)(Yo,{onRequestClose:l,footer:(0,S.tZ)(re.cNS,{primaryButtonTitle:n("team_directory_sync_key_dialog_initial_continue"),primaryButtonOnClick:u,secondaryButtonTitle:n("team_directory_sync_key_dialog_initial_postpone"),secondaryButtonOnClick:l,intent:"primary"}),children:(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:n.markup("team_directory_sync_key_dialog_initial_message_markup")})});case Jo.KeyInput:return t||(0,S.tZ)(Qo,{onSubmitKeySuccess:g,onSubmitKeyError:h,checkDirectorySyncKeyRequest:s,handleDismiss:l,handleError:_});case Jo.KeySuccess:return(0,S.tZ)(Yo,{onRequestClose:c,footer:(0,S.tZ)(re.cNS,{secondaryButtonTitle:n("team_directory_sync_key_dialog_key_success_close"),secondaryButtonOnClick:c}),children:(0,S.BX)(o.kC,{gap:"8px",children:[(0,S.tZ)(o.JO,{name:"FeedbackSuccessOutlined",size:"xlarge",color:"ds.text.positive.quiet",sx:{width:"64px",height:"64px"}}),(0,S.BX)("div",{children:[(0,S.tZ)(o.X6,{as:"h1",children:n("team_directory_sync_key_dialog_key_success_header")}),(0,S.tZ)(o.nv,{children:n("team_directory_sync_key_dialog_key_success_message")})]})]})});case Jo.KeyError:return(0,S.tZ)(Yo,{onRequestClose:c,footer:(0,S.tZ)(re.cNS,{primaryButtonTitle:n("team_directory_sync_key_dialog_key_error_validate"),primaryButtonOnClick:m,secondaryButtonTitle:n("team_directory_sync_key_dialog_key_error_retry"),secondaryButtonOnClick:u,intent:"danger"}),children:(0,S.BX)(o.kC,{gap:"8px",children:[(0,S.tZ)(o.JO,{name:"FeedbackFailOutlined",size:"xlarge",color:"ds.text.danger.quiet",sx:{width:"64px",height:"64px"}}),(0,S.BX)("div",{children:[(0,S.tZ)(o.X6,{as:"h1",children:n("team_directory_sync_key_dialog_key_error_header")}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:n("team_directory_sync_key_dialog_key_error_message")})]})]})});case Jo.KeySuspended:return(0,S.tZ)(Yo,{onRequestClose:c,footer:(0,S.tZ)(re.cNS,{secondaryButtonTitle:n("team_directory_sync_key_dialog_key_suspended_close"),secondaryButtonOnClick:c}),children:(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:n.markup("team_directory_sync_key_dialog_key_suspended_message_markup")})})}},tl=()=>{var e;const{translate:t}=(0,p.Z)(),{queue:n,popAlertFromQueue:a}=H(),i=()=>{a()},[r]=n;return r?(0,S.tZ)(Ya.o,{isOpen:!0,onRequestClose:i,footer:(0,S.tZ)(re.cNS,{secondaryButtonTitle:null!=(e=r.okButtonLabel)?e:t("_common_alert_dismiss_button"),secondaryButtonOnClick:i}),title:r.title,children:(0,S.tZ)("div",{children:r.message})}):null};var nl=n(92386);const al=({lee:e,notificationKey:t,buttonTextKey:n,level:a,redirectPath:r,onClickButton:s,keyParams:o,notificationName:l})=>{const c={key:t,level:a,textKey:t,buttonTextKey:n,keyParams:o,handleClose:()=>{e.dispatchGlobal((0,$o.FV)(t)),l&&he.C.markNotificationAsSeen(l)}};r&&(c.handleLinkClick=n=>{n.preventDefault(),(0,P.Tx)(r)?(0,P.Yk)(r,{type:"",action:""}):(e.dispatchGlobal((0,$o.FV)(t)),(0,i.uX)(r))}),s&&(c.handleButtonClick=()=>{s()}),e.dispatchGlobal((0,$o.wN)(c))};var il=n(70226);const rl="TRIAL_PERIOD_0_15D",sl="GRACE_PERIOD_PAID",ol="ENABLE_RECOVERY",ll="ADD_ADMINS";var cl=n(9937);const dl={notification:"notification--JlZi_NwcwA"},_l=({level:e=re.BLW.SUCCESS,text:t,buttonTextKey:n,onClose:a,onLinkClick:i,onClickButton:s})=>{const o=r.useRef(null),{translate:l}=(0,p.Z)(),c=(0,r.useCallback)((e=>{if(!i)return;const t=e.target;t&&"a"===t.tagName.toLowerCase()&&i(e)}),[i]);return(0,r.useEffect)((()=>{if(!o||!o.current)return;const e=o.current;return e.addEventListener("click",c),()=>{e.removeEventListener("click",c)}}),[c]),(0,S.tZ)("div",{className:dl.notification,children:(0,S.tZ)(re.bZj,{severity:e,size:re.k3y.SMALL,showIcon:!0,closeIconName:l("_common_alert_dismiss_button"),onClose:a,onAction:s||void 0,actionText:n||void 0,children:(0,S.tZ)("span",{ref:o,className:dl.text,children:t})})})};var ul=n(11030);const ml=({lee:e})=>{const{translate:t}=(0,p.Z)(),n=(0,X.C)(),a=(0,u.s)(),s=(0,ul.z)(),[o,c]=(0,r.useState)(!1),[d,_]=(0,r.useState)([]),g=(0,r.useCallback)(((n,a,i)=>{if(!n||!a||!i)return null;(async({lee:e,teamTrialStatus:t,teamBillingInfo:n,teamPolicies:a,showTacInExtension:i,translate:r})=>{const s=(({lee:e,teamTrialStatus:t,teamBillingInfo:n,teamPolicies:a,showTacInExtension:i})=>{const r=new Set;i&&r.add("TAC_IN_EXTENSION"),t.isGracePeriod&&!t.isFreeTrial&&r.add(sl),t.isFreeTrial&&!t.isGracePeriod&&((0,il.PY)(n.nextBillingDetails.dateUnix)<15?r.add("TRIAL_PERIOD_15_30D"):r.add(rl)),a.recoveryEnabled||a.ssoEnabled||r.add(ol);const s=(0,T.ev)(e.globalState)||0,o=e.carbon.spaceData.spaces.find((e=>s===+e.teamId));return o&&o.details.teamAdmins.length<=1&&r.add(ll),r})({lee:e,teamTrialStatus:t,teamBillingInfo:n,teamPolicies:a,showTacInExtension:i});e.dispatchGlobal((0,$o.L1)());const o=e.permission.adminAccess.hasFullAccess,l=await he.C.getNotificationStatus();s.has(sl)&&(e=>{al({lee:e,notificationKey:"team_notifications_renewal_grace_period_markup",level:re.BLW.ERROR,redirectPath:e.routes.teamAccountRoutePath})})(e),o&&(s.has(ol)&&l.tacEnableAccountRecoveryBanner===se.E.Unseen&&(e=>{const t=`${e.routes.teamSettingsRoutePath}/master-password-policies`;al({lee:e,notificationKey:"team_notifications_enable_account_recovery_markup",level:re.BLW.WARNING,redirectPath:t,notificationName:se.O.TacEnableAccountRecoveryBanner})})(e),s.has(ll)&&l.tacOnlyOneAdminBanner===se.E.Unseen&&!nl.G6()&&(e=>{const t=e.routes.teamAccountRoutePath;al({lee:e,notificationKey:"team_notifications_add_admins_markup",level:re.BLW.WARNING,redirectPath:t,notificationName:se.O.TacOnlyOneAdminBanner})})(e)),s.has(rl)&&(({lee:e,spaceTier:t,translate:n})=>{const a=(0,Se.Uo)({tier:t,translate:n});al({lee:e,notificationKey:"team_notifications_free_trial_D0_T15_markup",keyParams:{planTier:a},level:re.BLW.SUCCESS,redirectPath:e.routes.teamAccountRoutePath})})({lee:e,spaceTier:n.spaceTier,translate:r})})({lee:e,teamTrialStatus:n,teamBillingInfo:a,teamPolicies:i,showTacInExtension:!1,translate:t})}),[]),h=(()=>{const{routes:e}=(0,i.Xo)(),t=(0,Po.Y)(pr.t,{getIdPFailedProvisioningsData:{},hasSeenIdPFailedNotification:{}},[]),{markIdPFailedNotificationSeen:n}=(0,q.u)(pr.t);if(t.getIdPFailedProvisioningsData.status!==L.rq.Success||t.hasSeenIdPFailedNotification.status!==L.rq.Success||!t.getIdPFailedProvisioningsData.data?.nbOfFailedCreations)return[];const{requiredSeats:a}=t.getIdPFailedProvisioningsData.data;return!t.hasSeenIdPFailedNotification.data&&t.getIdPFailedProvisioningsData.data.shouldShowNotifications.alertFailuresNeedSeats?[{key:"idpErrorNotification",level:re.BLW.ERROR,textKey:"team_idp_error_notification_description",isPluralKey:!0,keyParams:{count:a},buttonTextKey:"team_idp_error_notification_cta",handleClose:()=>{(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.Close,l.CallToAction.BuySeats],toastName:l.ToastName.InsufficientSeatsProvisioningError,chosenAction:l.CallToAction.Close,hasChosenNoAction:!1})),n()},handleButtonClick:()=>{(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.Close,l.CallToAction.BuySeats],toastName:l.ToastName.InsufficientSeatsProvisioningError,chosenAction:l.CallToAction.BuySeats,hasChosenNoAction:!1})),(0,i.uX)(`${e.teamAccountRoutePath}?showSeatsDialog=true&seatsToBuy=${a}`)}}]:[]})();return(0,r.useEffect)((()=>{_((()=>{const t=e.globalState.notifications.list,n=function(e){const t=e.permission.adminAccess.hasFullAccess,n=e.globalState.directorySyncKey;return t&&n.validationPostponed?[{key:"directorySyncPosponedValidation",level:re.BLW.WARNING,textKey:"team_directory_sync_key_postponed_notif_markup",handleLinkClick:t=>{t.preventDefault(),e.dispatchGlobal((0,Ko.b3)())},handleClose:()=>e.dispatchGlobal((0,Ko.vg)())}]:[]}(e),a=function(e){const t=e.permission.adminAccess.hasFullAccess,n=e.globalState.ieNotifications;return t&&nl.w6()&&n.displayIeDropNotification?[{key:"directorySyncPosponedValidation",level:re.BLW.WARNING,textKey:"wac_ie_drop_message_markup",handleClose:()=>e.dispatchGlobal((0,cl.w)())}]:[]}(e);return[...t,...h,...n,...a]})())}),[e.globalState.ieNotifications,e.globalState.directorySyncKey,e.globalState.notifications.list]),(0,r.useEffect)((()=>{g(n,a,s)}),[a,s,n]),(0,S.BX)("div",{className:"notifications--SCKfre7VSM",children:[d.map((e=>(0,S.tZ)(_l,{level:e.level,text:(0,Vt.t5)(e.textKey)?t.markup(e.textKey,e.keyParams):e.isPluralKey?t(e.textKey,e.keyParams):t(e.textKey),buttonTextKey:e.isPluralKey&&e.buttonTextKey?t(e.buttonTextKey,e.keyParams):e.buttonTextKey?t(e.buttonTextKey):void 0,onClose:e.handleClose,onLinkClick:e.handleLinkClick,onClickButton:e.handleButtonClick},e.key))),o?(0,S.tZ)(z.F,{isShown:o,setIsShown:c,isFromVault:!1}):null]})};var pl=n(6995),gl=n(77550);var hl,yl;const bl=({children:e})=>((0,o.Fg)("light"),(0,S.tZ)(S.HY,{children:e})),xl=e=>{const[t,n]=r.useState(!1);(0,pl._)();const a=(0,U.a)(e.lee.dispatchGlobal),i=(0,gl.B)(),s=(0,xe.o)(Wo.H.TACDarkMode),[l]=(0,o.If)(),c=()=>{const t=e.lee.globalState.carbon.loginStatus?.loggedIn,n=e.lee.globalState.user.session.login,a=e.lee.globalState.user.session.uki,r=i?.premiumStatus,s=e.lee.globalState.user.session.permissions?.tacAccessPermissions;return t&&Boolean(n&&a)&&Boolean(r)&&Boolean(s)},d=()=>{const t=e.lee.globalState.user.session.permissions?.tacAccessPermissions;return Boolean(t?.size)};r.useEffect((()=>{!c()||d()||a()}),[t]);const _=r.useMemo((()=>!s&&l&&"light"!==l?bl:r.Fragment),[l,s]);return c()&&d()?(0,S.tZ)(V,{globalReportError:e.lee.reportError,children:(0,S.tZ)(be.qc,{lee:e.lee,children:(0,S.tZ)(_e,{children:(0,S.tZ)(Ze,{children:(0,S.tZ)(xt,{lee:e.lee,children:(0,S.tZ)(_,{children:(0,S.BX)("div",{children:[e.children,yl||(yl=(0,S.tZ)(tl,{})),(0,S.tZ)(ml,{lee:e.lee}),e.lee.globalState.directorySyncKey.displayDialog?(0,S.tZ)(el,{lee:e.lee}):null,(0,S.tZ)("div",{className:"alertPopup--S9uF3SnYTj",id:"alert-popup-portal"})]})})})})})})}):hl||(hl=(0,S.tZ)("div",{}))};var Sl=n(92630),fl=n(82622);let vl=function(e){return e.Loading="loading",e.Start="start",e.Pending="pending",e.Validated="validated",e.Deactivating="deactivating",e}({});const Cl=()=>{const[e,t]=(0,r.useState)({domain:null,status:vl.Loading}),[n,a]=(0,r.useState)([]),i=(0,r.useCallback)((async()=>{try{const e=await he.C.getTeamDomains();if(e.success&&e.domains.length){const n=e.domains.filter((e=>e.status===fl.p.pending)),i=e.domains.filter((e=>e.status===fl.p.valid));if(i.length){a(i);const e=i[0];t({domain:e,status:vl.Validated})}else if(n.length){const e=n[n.length-1];t({domain:e,status:vl.Pending})}else t({domain:e.domains[e.domains.length-1],status:vl.Pending})}else t({domain:null,status:vl.Start})}catch(e){t({domain:null,status:vl.Start})}}),[]);return(0,r.useEffect)((()=>{i()}),[i]),{verifiedOrPendingDomain:e,verifiedDomains:n,updateDomainState:i,deactivateDomain:async()=>{if(null!==e.domain){t((e=>({domain:e.domain,status:vl.Deactivating})));try{(await he.C.deactivateTeamDomain({domain:e.domain.name})).success?t({domain:null,status:vl.Start}):i()}catch(e){i()}}},tryVerifyDomain:async()=>{await he.C.completeTeamDomainRegistration(),await i()},selectVerifiedDomain:e=>{t({domain:e,status:vl.Validated})}}};var El=n(37466),Zl=n(41495),Dl=n(63756),Tl=n(44554);const kl=()=>{const{translate:e}=(0,p.Z)(),t=ft(),n=sn();if(!t||!n.hasLimitedOffer)return null;const{translatedEquivalentPrice:a,translatedPrice:i}=n;return(0,S.tZ)(o.ke,{title:e("team_dashboard_upgrade_tile_infobox_title"),description:(0,S.BX)(S.HY,{children:[(0,S.BX)(o.X6,{as:"h5",textStyle:"ds.title.block.small",color:"ds.text.brand.standard",sx:{marginBottom:"4px"},children:[(0,S.tZ)("span",{sx:{textDecoration:"line-through"},children:a})," ",i," ",e("team_dashboard_upgrade_tile_infobox_price")]}),(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.brand.standard",children:e("team_dashboard_upgrade_tile_infobox_description")})]}),mood:"brand"})},Il="team_dashboard_upgrade_tile_business_upgrade_header",Al="team_dashboard_upgrade_tile_feature_unlimited_seats",wl="team_dashboard_upgrade_tile_cta_buy_dashlane",Nl="team_dashboard_upgrade_tile_feature_sso",Ol="team_dashboard_upgrade_tile_feature_scim",Rl="team_dashboard_upgrade_tile_feature_friends_and_family",Ll="team_dashboard_upgrade_tile_feature_support",Ml="team_upgrade_to_business",Bl=()=>{const e=(0,X.C)();return e?.spaceTier===_.lD.Standard};var Pl,Ul,Xl;const zl=({iconName:e,children:t})=>(0,S.BX)(o.kC,{gap:"12px",alignItems:"center",flexWrap:"nowrap",children:[(0,S.tZ)("div",{sx:{padding:"8px",backgroundColor:"ds.container.expressive.brand.quiet.idle",borderRadius:"8px"},children:(0,S.tZ)(o.JO,{name:e,size:"large",color:"ds.text.brand.standard"})}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:t})]}),ql=({dismissible:e,headingLevel:t="h5"})=>{const{translate:n}=(0,p.Z)(),a=(()=>{const{routes:e}=(0,i.Xo)(),t=(0,X.C)();if(!t)return null;const n=t.isFreeTrial,a=t.spaceTier===_.lD.Starter,r=t.spaceTier===_.lD.Team,s=t.spaceTier===_.lD.Business,o=t.spaceTier===_.lD.Standard,l=t.daysLeftInTrial;return n&&r?{header:{key:l?"team_dashboard_upgrade_tile_team_trial_header_markup":"team_dashboard_upgrade_tile_team_trial_header_last_day",variables:{daysLeft:l}},description:{key:"team_dashboard_upgrade_tile_business_trial_description"},features:[{iconName:"GroupOutlined",key:Al},{iconName:"FeatureVpnOutlined",key:"team_dashboard_upgrade_tile_feature_vpn"}],cta:{key:wl,link:e.teamAccountCheckoutRoutePath}}:n&&s?{header:{key:l?"team_dashboard_upgrade_tile_business_trial_header_markup":"team_dashboard_upgrade_tile_business_trial_header_last_day",variables:{daysLeft:l}},description:{key:"team_dashboard_upgrade_tile_business_trial_description"},features:[{iconName:"ToolsOutlined",key:Nl},{iconName:"SharedOutlined",key:Ol},{iconName:"GroupOutlined",key:Rl},{iconName:"ItemPhoneHomeOutlined",key:Ll}],cta:{key:wl,link:e.teamAccountCheckoutRoutePath}}:!n&&a?{header:{key:Il},description:{key:"team_dashboard_upgrade_tile_team_upgrade_description"},features:[{iconName:"GroupOutlined",key:Al},{iconName:"SharedOutlined",key:"team_dashboard_upgrade_tile_feature_group"},{iconName:"LockOutlined",key:Nl},{iconName:"SettingsOutlined",key:"team_dashboard_upgrade_tile_feature_activity_logs"}],cta:{key:Ml,link:e.teamAccountChangePlanRoutePath}}:!n&&r?{header:{key:Il},description:{key:"team_dashboard_upgrade_tile_business_upgrade_description"},features:[{iconName:"ToolsOutlined",key:Nl},{iconName:"SharedOutlined",key:Ol},{iconName:"GroupOutlined",key:Rl},{iconName:"ItemPhoneHomeOutlined",key:Ll}],cta:{key:"team_dashboard_upgrade_tile_cta_upgrade",link:e.teamAccountChangePlanRoutePath}}:!n&&o?{header:{key:Il},description:{key:"account_summary_upgrade_standard_title"},features:[{iconName:"GroupOutlined",key:"account_summary_unlimited_seats_description"},{iconName:"ToolsOutlined",key:"team_dashboard_upgrade_tile_feature_provisioning"},{iconName:"HealthPositiveOutlined",key:"team_dashboard_upgrade_tile_feature_integrations"},{iconName:"ItemPhoneHomeOutlined",key:"team_dashboard_upgrade_tile_feature_additional_support"}],cta:{key:Ml,link:e.teamAccountChangePlanRoutePath}}:null})(),r=(0,fe.Y)(),c=(0,i.k6)(),d=Bl(),u=()=>{a&&(a.cta.external?(0,P.Yo)(a.cta.link):c.push(a.cta.link),(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuyDashlane,clickOrigin:l.ClickOrigin.FeatureLimitationsBlock})))},g=r.status===s.rq.Success&&(0,Se.pq)(r.data),h=r.status===s.rq.Success&&(0,Se.f1)(r.data);return a?(0,S.tZ)(o.kC,{flexDirection:"column",gap:"24px",children:d?(0,S.BX)(S.HY,{children:[(0,S.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,S.BX)(o.kC,{alignItems:"start",flexWrap:"nowrap",justifyContent:"space-between",flexDirection:"column",gap:"16px",children:[(0,S.tZ)(o.Ct,{label:n(a.header.key),mood:"brand",iconName:"PremiumOutlined",layout:"iconLeading"}),(0,S.tZ)("div",{sx:{display:"flex",justifyContent:"center",flex:1},children:(0,S.tZ)("img",{role:"presentation",alt:"",src:Yr,sx:{objectFit:"contain",width:"100%",height:"auto"}})})]}),(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:n(a.description.key)})]}),a.features.map((e=>(0,S.tZ)(es,{iconName:e.iconName,description:e.key},e.key))),(0,S.tZ)(o.zx,{mood:"brand",intensity:"catchy",onClick:u,layout:"iconLeading",icon:"PremiumOutlined",children:n(a.cta.key)},a.cta.key)]}):(0,S.BX)(S.HY,{children:[(0,S.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,S.BX)(o.kC,{alignItems:"start",flexWrap:"nowrap",justifyContent:"space-between",children:[(0,S.tZ)(o.X6,{as:t,textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:a.header.key.includes("markup")?n.markup(a.header.key,a.header.variables):n(a.header.key,a.header.variables)}),e?(0,S.tZ)(o.zx,{sx:{padding:"4px"},mood:"neutral",intensity:"supershy",size:"medium",layout:"iconOnly",onClick:()=>(0,Tl.ql)({type:Zl.U.DASHBOARD_UPRADE}),icon:Ul||(Ul=(0,S.tZ)(o.JO,{color:"ds.text.neutral.quiet",name:"ActionCloseOutlined"}))}):null]}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:n(a.description.key)})]}),a.features.map((e=>(0,S.tZ)(zl,{iconName:e.iconName,children:e.key.includes("markup")?n.markup(e.key):n(e.key)},e.key))),g?Xl||(Xl=(0,S.tZ)(kl,{})):null,(0,S.tZ)(o.zx,{fullsize:!0,mood:e?"brand":"neutral",intensity:e?"catchy":"quiet",onClick:u,layout:h?"iconLeading":void 0,icon:h?"PremiumOutlined":void 0,children:n(a.cta.key)},a.cta.key)]})}):Pl||(Pl=(0,S.tZ)(o.ZX,{size:"large",mood:"neutral"}))},jl=({requiredSeatsForIdP:e})=>{const{translate:t}=(0,p.Z)();return(0,S.tZ)(o.u,{content:t("team_idp_errors_badge_seats_required_tooltip",{count:e}),children:(0,S.tZ)(o.Ct,{label:t("team_idp_errors_badge_seats_required",{count:e,nbOfRequiredSeats:e}),mood:"danger",intensity:"quiet"})})},Fl=e=>{const t=e.toFixed(1),n=e.toFixed();return parseFloat(n)-parseFloat(t)==0?n:t},Gl=({showPasswordHealthScore:e,securityIndex:t,shieldSize:n,textSize:a})=>{let i="";const r="small"===a?"ds.specialty.spotlight.small":"ds.specialty.spotlight.medium";return e?(i=t>=80?"ds.text.positive.quiet":t>=40?"ds.text.warning.quiet":"ds.text.danger.quiet",t>=60?(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.JO,{name:"HealthPositiveOutlined",size:n,color:i}),(0,S.tZ)(o.nv,{textStyle:r,color:"ds.text.neutral.catchy",children:`${Fl(t)}%`})]}):(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.JO,{name:"HealthNegativeOutlined",size:n,color:i}),(0,S.tZ)(o.nv,{textStyle:r,color:"ds.text.neutral.catchy",children:`${Fl(t)}%`})]})):(i="ds.text.brand.quiet",(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.JO,{name:"HealthUnknownOutlined",size:n,color:i}),(0,S.tZ)(o.nv,{textStyle:r,color:"ds.text.neutral.catchy",children:"-"})]}))},Vl="link--nWXIzseKub";var Hl;const Wl={HEADER:{display:"flex"},FOOTER:{lineHeight:"1",fontSize:"16px"},MAIN_CARD_CONTENT:{display:"flex",flexDirection:"column",gap:"4px"}},$l=({title:e})=>(0,S.tZ)(re.ua7,{sx:{fontSize:2,maxWidth:"180px"},placement:"bottom",content:e,children:Hl||(Hl=(0,S.tZ)(re.uMt,{size:13,tabIndex:0,color:"ds.text.neutral.quiet"}))}),Kl=e=>(0,S.tZ)(o.X6,{as:"h1",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:e}),Yl=({children:e})=>(0,S.tZ)(o.Zb,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"146px",width:"232px",padding:"16px",marginRight:"32px",flexShrink:"0",overflow:"inherit",color:"ds.text.neutral.catchy"},children:e}),Ql=({passwordHealth:e,seats:t,passwordHealthHistoryEmpty:n})=>{const{translate:a}=(0,p.Z)(),{routes:r}=(0,lo.Xo)(),{compromised:s,securityIndex:l}=e,d=`${t.used}/${t.provisioned}`,{openDialog:u,shouldShowFrozenStateDialog:m}=(0,I.Ub)(),g=(0,c.k)(pr.t,"getIdPFailedProvisioningsData"),h=g.status===L.rq.Success?g.data?.requiredSeats:0,y=(0,X.C)(),b=!!y&&y.spaceTier===_.lD.Starter,x=!!y&&y.spaceTier===_.lD.Standard,f=()=>{m&&u()};return(0,S.BX)("section",{className:"cardsRow--UeIGdGJnGY",sx:{display:"flex",justifyContent:"flex-start"},children:[(0,S.tZ)(Yl,{children:(0,S.BX)("div",{sx:Wl.MAIN_CARD_CONTENT,children:[(0,S.BX)("header",{sx:Wl.HEADER,children:[Kl(a("team_dashboard_card_health_score")),(0,S.tZ)($l,{title:a("team_dashboard_card_health_score_info")})]}),(0,S.tZ)("div",{sx:{display:"flex",gap:"12px",alignItems:"center"},children:(0,S.tZ)(Gl,{showPasswordHealthScore:!n,securityIndex:l,shieldSize:"xlarge",textSize:"medium"})})]})}),(0,S.BX)(Yl,{children:[(0,S.BX)("div",{sx:Wl.MAIN_CARD_CONTENT,children:[(0,S.BX)("header",{sx:Wl.HEADER,children:[Kl(a("team_dashboard_card_compromised")),(0,S.tZ)($l,{title:a("team_dashboard_card_compromised_info")})]}),(0,S.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.medium",color:s?"ds.text.danger.quiet":"ds.text.neutral.catchy",children:s})]}),s?(0,S.tZ)("footer",{sx:Wl.FOOTER,children:(0,S.tZ)(i.rU,{className:Vl,to:r.teamMembersRoutePath,children:a("team_dashboard_card_compromised_details_link")})}):null]}),(0,S.BX)(Yl,{children:[(0,S.BX)("div",{sx:Wl.MAIN_CARD_CONTENT,children:[(0,S.BX)("header",{sx:Wl.HEADER,children:[Kl(a("team_dashboard_card_seats_taken")),(0,S.tZ)($l,{title:a("team_dashboard_card_seats_taken_info")})]}),(0,S.tZ)(o.nv,{textStyle:d.length>10?"ds.specialty.spotlight.small":"ds.specialty.spotlight.medium",color:"ds.text.neutral.catchy",children:d}),h?(0,S.tZ)(jl,{requiredSeatsForIdP:h}):null]}),(0,S.tZ)("footer",{sx:Wl.FOOTER,children:(0,S.tZ)(i.rU,{className:Vl,to:b||x?`${r.teamAccountChangePlanRoutePath}`:m?{}:`${r.teamAccountRoutePath}?showSeatsDialog=true`,onClick:f,children:a("team_dashboard_card_seats_buy_link")})})]}),(0,S.BX)(Yl,{children:[(0,S.BX)("div",{sx:Wl.MAIN_CARD_CONTENT,children:[(0,S.BX)("header",{sx:Wl.HEADER,children:[Kl(a("team_dashboard_card_pending_invitations")),(0,S.tZ)($l,{title:a("team_dashboard_card_pending_invitations_info")})]}),(0,S.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.medium",color:"ds.text.neutral.catchy",children:t.pending})]}),(0,S.tZ)("footer",{sx:Wl.FOOTER,children:(0,S.tZ)(i.rU,{onClick:f,className:Vl,to:m?{}:{pathname:r.teamMembersRoutePath,state:t.pending?{openResendPendingInvitationsDialog:!0}:{openSendInvitesDialog:!0}},children:t.pending?a("team_dashboard_card_resend_invitations_link"):a("team_dashboard_card_send_invitations_link")})})]})]})};var Jl=n(53265),ec=n(22269),tc=n(353),nc=n(71437),ac=n(64900),ic=n(99477),rc=n(33117),sc=n(28290),oc=n(40934),lc=n(42094);let cc=function(e){return e[e.AllTime=0]="AllTime",e[e.Last7Days=1]="Last7Days",e[e.Last30Days=2]="Last30Days",e}({});var dc=n(65580),_c=n(42930);const uc=(e,t,n)=>{const a=[];switch(e){case cc.AllTime:{if(n>=5&&n<=8){t.forEach((e=>{const{date:t}=e;1===new Date(t).getDate()&&a.push(t)}));break}const{length:e}=t;if(e<=7){t.forEach((e=>{a.push(e.date)}));break}const i=e/7;let r=e-1;for(;r>=0;)a.push(t[Math.round(r)]?.date),r-=i;break}case cc.Last7Days:t.forEach((e=>{a.push(e.date)}));break;case cc.Last30Days:t.forEach((e=>{const{date:t}=e;0===new Date(t).getDay()&&a.push(t)}));break;default:(0,dc.U)(e)}return a},mc=({historyToDisplay:e,passwordHealthHistoryEmpty:t,view:n})=>{const{translate:a}=(0,p.Z)(),i=0!==e.length?(e=>{const t=new Date,n=new Date(e);let a=12*(t.getFullYear()-n.getFullYear());return a-=n.getMonth(),a+=t.getMonth(),a+1})(e[0].date):0;return uc(n,e,i),(0,S.tZ)(_c.K,{dataKey:"date",ticks:t?[]:uc(n,e,i),tickSize:4,tickFormatter:t?()=>"":e=>((e,t,n,a)=>{const i=t===cc.AllTime&&n>=5,r=new Date(e),s=a.shortDate(r,i?Vt._T.MMM_YYYY:Vt._T.L_M_D),o=a.shortDate(r,Vt._T.MMMM);if(i)return s===o||s.endsWith(".")?s:`${s}.`;const[l,c]=s.split(" ");return l===o?s:`${l}. ${c}`})(e,n,i,a),fontSize:"small"})},pc="legendItem--MoxC6xF4tG",gc="legendIcon--p8Emm90xE4",hc=({active:e,label:t,payload:n})=>{const{translate:a}=(0,p.Z)();if(!e)return null;const i=n?`${Fl(n[0]?.value)}%`:null;return(0,S.BX)("div",{className:"customTooltipContainer--iAM2rWgGzw",children:[(0,S.tZ)("time",{className:"date--JuYmIy6PnQ",children:t}),(0,S.BX)("div",{className:"score--RRdFFcOQCh",children:[(0,S.BX)("div",{className:pc,children:[(0,S.tZ)("div",{className:gc}),(0,S.tZ)("p",{children:a("team_dashboard_graph_score_hover_legend")})]}),(0,S.tZ)("p",{children:i})]})]})},yc={GRAPH_HEADER:{display:"flex",justifyContent:"space-between",margin:"8px 0"},GRAPH_HEADER_WITH_TOOLTIP:{marginTop:"24px"}};var bc;const xc=({history:e,passwordHealthHistoryEmpty:t,infoboxOnTop:n})=>{const[a,i]=(0,r.useState)(cc.AllTime),s=(e=>{const{length:t}=e;if(t<=2)return e;const n=(0,rc.Z)(e[0].date),a=(0,rc.Z)(e[t-1].date),i=(0,sc.Z)(a,n);if(i===t-1)return e;const r=[];let s=0,o=e[s].securityIndex,l=n,c=n;for(let t=0;t<=i;t++)(0,oc.Z)(c,l)?(r.push(e[s]),o=e[s].securityIndex,s++,l=(0,rc.Z)(e[s]?.date)):r.push({date:c.toISOString().slice(0,10),securityIndex:o}),c=(0,lc.Z)(c,1);return r})(e),l=((e,t)=>{switch(e){case cc.AllTime:return t;case cc.Last7Days:return t.slice(t.length-7,t.length);case cc.Last30Days:return t.slice(t.length-30,t.length);default:(0,dc.U)(e)}})(a,s),{translate:c}=(0,p.Z)(),d=[cc.Last7Days,cc.Last30Days,cc.AllTime],_=(0,r.useMemo)((()=>[{onSelect:()=>i(cc.Last7Days),title:c("team_dashboard_graph_7_days_button"),contentId:"content-last-7-days",id:"tab-last-7-days",minimumHistoryLength:7},{onSelect:()=>i(cc.Last30Days),title:c("team_dashboard_graph_30_days_button"),contentId:"content-last-30-days",id:"tab-last-30-days",minimumHistoryLength:30},{onSelect:()=>i(cc.AllTime),title:c("team_dashboard_graph_all_time_button"),contentId:"content-all-time",id:"tab-all-time",minimumHistoryLength:0}].reduce(((e,{minimumHistoryLength:t,...n})=>t<=s.length?[...e,n]:e),[])),[s]);return(0,S.BX)(S.HY,{children:[(0,S.BX)("section",{sx:(0,o.jM)([yc.GRAPH_HEADER,n?yc.GRAPH_HEADER_WITH_TOOLTIP:{}]),children:[(0,S.BX)("div",{className:pc,children:[(0,S.tZ)("div",{className:gc}),(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:c("team_dashboard_graph_score_legend")})]}),(0,S.tZ)(o.mQ,{tabs:_,defaultTab:d.indexOf(cc.AllTime)})]}),(0,S.tZ)("section",{sx:{width:"100%",height:"211px",flexGrow:1},children:(0,S.tZ)(Jl.h,{sx:{height:"100%",width:"100%"},children:(0,S.BX)(ec.w,{data:t?[]:l,sx:{position:"relative",right:"18px"},children:[bc||(bc=(0,S.tZ)(tc.q,{vertical:!1})),(0,S.tZ)(nc.B,{domain:[0,100],tickFormatter:e=>`${e}%`,fontSize:"small"}),mc({historyToDisplay:l,passwordHealthHistoryEmpty:t,view:a}),(0,S.tZ)(ac.u,{content:e=>{const t=c.shortDate((0,rc.Z)(e.label),{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"});return(0,S.tZ)(hc,{...e,label:t})},animationDuration:500,animationEasing:"ease-out",cursor:!t}),(0,S.tZ)(ic.x,{dataKey:"securityIndex",stroke:"#0e6476",strokeWidth:"2",dot:!1,activeDot:{strokeWidth:0,r:4},animationDuration:500,isAnimationActive:!0})]})})})]})};var Sc=n(28207),fc=n(80936);const vc="team_dashboard_industry_benchmark_cta",Cc="19px",Ec="https://support.dashlane.com/hc/articles/202699411-Password-Health",Zc=({showDataWarning:e,ratingVSIndustry:t,deltaVSIndustry:n})=>{const{translate:a}=(0,p.Z)(),i=(0,fc.I)(),r=i.status===L.rq.Success&&!i.isDisabled,s={lower:{message:a("team_dashboard_industry_benchmark_info_lower",{count:n}),infoboxMood:"danger",ctas:[(0,S.tZ)(o.Qj,{href:Ec,isExternal:!0,children:a(vc)},"see_how_danger")]},onPar:{message:a("team_dashboard_industry_benchmark_info_onpar"),infoboxMood:"warning",ctas:[(0,S.tZ)(o.Qj,{href:Ec,isExternal:!0,children:a(vc)},"see_how_warning")]},higher:{message:a("team_dashboard_industry_benchmark_info_higher",{count:n}),infoboxMood:"positive",ctas:[]}};return e?(0,S.tZ)(o.ke,{size:"medium",sx:{marginTop:Cc},title:a(r?"team_dashboard_graph_not_enough_data_warning":"team_dashboard_graph_not_enough_data_warning_min",{minPasswords:5})}):t?(0,S.tZ)(o.ke,{size:"large",sx:{marginTop:Cc},title:s[t].message,mood:s[t].infoboxMood,actions:s[t].ctas,icon:"higher"===t?"HealthPositiveOutlined":"HealthNegativeOutlined"}):null},Dc=({isLoading:e,history:t,passwordHealthHistoryEmpty:n})=>{const{translate:a}=(0,p.Z)(),i=(0,Sc.u)(),r=(()=>{const e=(0,xe.o)(Ka.P.DashHackIndustryBenchmarkDev),{data:t,status:n}=(0,c.k)(d.o,"getIndustryBenchmarkData");return n!==L.rq.Success?{status:n}:{status:n,data:e?t:null}})();if(i.status!==L.rq.Success||r.status!==L.rq.Success)return null;const s=!e&&n,{ratingVSIndustry:l,deltaVSIndustry:_}={...r.data},u=s||!!l;return(0,S.BX)("section",{sx:{padding:"24px",paddingBottom:"0",flexGrow:1,display:"flex",flexDirection:"column"},children:[(0,S.tZ)(o.X6,{as:"h5",color:"ds.text.neutral.catchy",textStyle:"ds.title.section.medium",children:a("team_dashboard_graph_heading")}),u?(0,S.tZ)(Zc,{showDataWarning:s,ratingVSIndustry:l,deltaVSIndustry:_}):null,(0,S.tZ)(xc,{history:t,infoboxOnTop:u,passwordHealthHistoryEmpty:n})]})},Tc=({title:e,value:t,color:n})=>(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px",marginRight:"8px",minWidth:"70px"},children:[(0,S.tZ)("header",{children:(0,S.tZ)(o.nv,{as:"h2",color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:e})}),(0,S.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.small",color:null!=n?n:"ds.text.neutral.standard",children:t})]}),kc=({compromised:e,passwords:t,reused:n,safe:a,securityIndex:i,weak:r,passwordHealthHistoryEmpty:s})=>{const{translate:l}=(0,p.Z)();return(0,S.BX)("section",{sx:{borderTop:"1px solid",borderTopColor:"ds.border.neutral.quiet.idle",display:"flex",padding:"3% 2%"},children:[(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px",width:"240px",padding:"0 24px",borderRight:"1px solid",borderRightColor:"ds.border.neutral.quiet.idle"},children:[(0,S.tZ)("header",{children:(0,S.tZ)(o.nv,{as:"h2",color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:l("team_dashboard_password_health_breakdown_score")})}),(0,S.tZ)("div",{sx:{fontSize:"x-large",fontWeight:"bold",display:"inline-flex",alignItems:"center","& > svg":{marginRight:"7px"},color:"ds.text.neutral.standard"},children:(0,S.tZ)(Gl,{showPasswordHealthScore:!s,securityIndex:i,shieldSize:"medium",textSize:"small"})})]}),(0,S.BX)("div",{sx:{display:"flex",justifyContent:"space-between",padding:"0 24px",width:"100%"},children:[(0,S.tZ)(Tc,{title:l("team_dashboard_password_health_breakdown_total"),value:t}),(0,S.tZ)(Tc,{title:l("team_dashboard_password_health_breakdown_safe"),value:a,color:a?"ds.text.positive.quiet":void 0}),(0,S.tZ)(Tc,{title:l("team_dashboard_password_health_breakdown_weak"),value:r,color:r?"ds.text.warning.quiet":void 0}),(0,S.tZ)(Tc,{title:l("team_dashboard_password_health_breakdown_reused"),value:n,color:n?"ds.text.warning.quiet":void 0}),(0,S.tZ)(Tc,{title:l("team_dashboard_password_health_breakdown_compromised"),value:e,color:e?"ds.text.danger.quiet":void 0})]})]})},Ic=({isLoading:e,report:t,passwordHealthHistoryEmpty:n})=>(0,S.BX)(o.Zb,{sx:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle",padding:0},children:[(0,S.tZ)(Dc,{isLoading:e,history:t.passwordHealthHistory,passwordHealthHistoryEmpty:n}),(0,S.tZ)(kc,{...t.passwordHealth,passwordHealthHistoryEmpty:n})]}),Ac="https://support.dashlane.com/hc/articles/4507132108946",wc={HEADING:"team_dashboard_dark_web_insights_heading",SECURITY_INCIDENTS:{LABEL:"team_dashboard_dark_web_insights_security_incidents",TOOLTIP:"team_dashboard_dark_web_insights_security_incidents_tooltip"},EMAILS_AFFECTED:{LABEL:"team_dashboard_dark_web_insights_emails_affected",TOOLTIP:"team_dashboard_dark_web_insights_emails_affected_tooltip"},SUGGESTED_INVITATION:{LABEL:"team_dashboard_dark_web_insights_suggested_invitations",TOOLTIP:"team_dashboard_dark_web_insights_suggested_invitations_tooltip"},RETURNING_USER_CTA:"team_dashboard_dark_web_insights_go_to_cta",RETURNING_USER_VIEW_DOMAIN_GUIDE_CTA:"team_dashboard_dark_web_insights_view_guide_cta",UNVERIFIED_MSG:"team_dashboard_dark_web_insights_domain_unverified_msg",UNVERIFIED_SUBTEXT:"team_dashboard_dark_web_insights_domain_unverified_sub_text",INCIDENT_FREE_MSG:"team_dashboard_dark_web_insights_domain_incident_free_msg",INCIDENT_FREE_SUBTEXT:"team_dashboard_dark_web_insights_domain_incident_free_sub_text",GENERATING_INSIGHTS_MESSAGE:"team_dashboard_dark_web_insights_generating_msg",NEW_INCIDENTS_NOTIFICATION_MSG:{ONE:"team_dashboard_dark_web_insights_notify_new_incidents_one",MANY:"team_dashboard_dark_web_insights_notify_new_incidents_many"},TEAM_NEW_LABEL:"team_new_label"},Nc=({count:e,labelAndTooltip:t,primaryColor:n,secondaryColor:a})=>{const{translate:i}=(0,p.Z)();return(0,S.BX)(o.kC,{gap:"6px",sx:{margin:"16px 0"},alignItems:"center",children:[(0,S.tZ)(re.X6q,{size:"x-small",color:n,sx:{width:"57px"},children:e}),(0,S.BX)(re.ua7,{sx:{fontSize:2,maxWidth:"180px"},placement:"top",content:i(t.TOOLTIP),children:[(0,S.tZ)(re.nvN,{"aria-label":i(t.LABEL),size:"small",sx:{minWidth:"calc(100% - 83px)",width:"min-content"},color:null!=a?a:n,children:i(t.LABEL)}),(0,S.tZ)(re.uMt,{size:13,tabIndex:0,color:null!=a?a:n})]})]})},Oc=({children:e})=>(0,S.tZ)(o.Zb,{sx:{minHeight:"418px",width:"282px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:(0,S.tZ)(o.kC,{sx:{minHeight:"418px",padding:"20px"},flexDirection:"column",justifyContent:"space-between",alignItems:"start",children:e})}),Rc=({text:e,subtext:t,imgSrc:n})=>(0,S.BX)(S.HY,{children:[(0,S.tZ)("img",{src:n}),(0,S.tZ)(re.nvN,{size:"medium",bold:!0,sx:{marginBottom:"8px"},children:e}),(0,S.tZ)(re.nvN,{size:"small",color:re.colors.grey00,children:t})]}),Lc=({domain:e})=>(0,S.tZ)(re.nvN,{size:"x-small",bold:!0,sx:{padding:"4px 8px",backgroundColor:`${re.colors.dashGreen06}`,borderRadius:"4px",width:"fit-content",height:"24px",marginBottom:"34px"},children:e}),Mc=({newLeaksCount:e,newLeaksAffectedEmailCount:t})=>{const{translate:n}=(0,p.Z)(),{setHasNewBreaches:a}=ue();(0,r.useEffect)((()=>{e>0&&a(!0)}),[e,a]);const i=e>1?wc.NEW_INCIDENTS_NOTIFICATION_MSG.MANY:wc.NEW_INCIDENTS_NOTIFICATION_MSG.ONE;return e>0?(0,S.BX)(o.kC,{sx:{backgroundColor:re.colors.pink05,borderRadius:"4px",padding:"5px 8px",marginTop:"25px"},children:[(0,S.tZ)(re.nvN,{size:"small",color:re.colors.red00,sx:{width:"calc(100% - 5px)"},children:n(i,{numIncidents:e,count:t})}),(0,S.tZ)(re.P_k,{dot:!0,ariaLabel:n(wc.TEAM_NEW_LABEL)})]}):null},Bc=({domainInfo:e})=>{const t=e.leaksCount,n=e.emailsImpactedCount,a=e.emailsImpactedCount-e.teamMembersImpactedCount;return(0,S.BX)(S.HY,{children:[(0,S.tZ)(Nc,{count:t,labelAndTooltip:wc.SECURITY_INCIDENTS,primaryColor:re.colors.dashGreen00,secondaryColor:re.colors.dashGreen01}),(0,S.tZ)(Nc,{count:n,labelAndTooltip:wc.EMAILS_AFFECTED,primaryColor:re.colors.dashGreen00,secondaryColor:re.colors.dashGreen01}),(0,S.tZ)(Nc,{count:a,labelAndTooltip:wc.SUGGESTED_INVITATION,primaryColor:re.colors.dashGreen00,secondaryColor:re.colors.dashGreen01}),(0,S.tZ)(Mc,{newLeaksCount:e.newLeaksCount,newLeaksAffectedEmailCount:e.newLeaksAffectedEmailCount})]})},Pc=({domainName:e,domainInfo:t})=>{const{translate:n}=(0,p.Z)(),{routes:a}=(0,lo.Xo)();return(0,S.BX)(S.HY,{children:[(0,S.BX)("section",{sx:{width:"100%"},children:[(0,S.tZ)(Lc,{domain:e}),t.leaksCount>0?(0,S.tZ)(Bc,{domainInfo:t}):(0,S.tZ)(Rc,{imgSrc:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIHZpZXdCb3g9IjAgMCA1MiA1MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzMxMTNfMTkwOTY0KSI+CjxyZWN0IHdpZHRoPSI1MiIgaGVpZ2h0PSI1MiIgcng9IjI2IiBmaWxsPSIjRDlERkUwIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNzIxOSAxMy40NzMzQzE0LjI4MjEgMTQuMjgxNiA5LjcxNjc2IDIwLjE1NzMgMTAuNTI1IDI2LjU5NzJMMTEuMTk1MyAzMS45MzgxTDcuOTg0NDUgMzIuMzQxMUM2Ljg4ODQ4IDMyLjQ3ODYgNi4xMTE1MiAzMy40Nzg2IDYuMjQ5MDggMzQuNTc0Nkw5LjE2NTA4IDU3LjgwOEM5LjMwMjYzIDU4LjkwNCAxMC4zMDI2IDU5LjY4MDkgMTEuMzk4NiA1OS41NDM0TDQwLjI5OTIgNTUuOTE2MUM0MS4zOTUyIDU1Ljc3ODYgNDIuMTcyMSA1NC43Nzg2IDQyLjAzNDYgNTMuNjgyNkwzOS4xMTg2IDMwLjQ0OTJDMzguOTgxIDI5LjM1MzIgMzcuOTgxIDI4LjU3NjIgMzYuODg1MSAyOC43MTM4TDM0LjUxNjEgMjkuMDExMUwzMy44NDU4IDIzLjY3MDJDMzMuMDM3NiAxNy4yMzA0IDI3LjE2MTggMTIuNjY1MSAyMC43MjE5IDEzLjQ3MzNaTTE0LjE3NjUgMjYuNjYxTDE0Ljc4MjQgMzEuNDg3OUwzMC45Mjc1IDI5LjQ2MTVMMzAuMzIxNyAyNC42MzQ2QzI5Ljc2MjIgMjAuMTc2MiAyNS42OTQzIDE3LjAxNTYgMjEuMjM2IDE3LjU3NTJDMTYuNzc3NiAxOC4xMzQ4IDEzLjYxNyAyMi4yMDI2IDE0LjE3NjUgMjYuNjYxWk00Ni43NzUzIDE4LjY1ODZMNDAuNDg1NiAyMi42MTkzTDQxLjkxMTEgMjQuODgyOUw0OC4yMDA3IDIwLjkyMjJMNDYuNzc1MyAxOC42NTg2Wk00My4xODE2IDI3LjI3NjRMNDcuMDcxNyAyNy4zNjhMNDcuMDEwMyAyOS45Nzc3TDQzLjEyMDIgMjkuODg2MUw0My4xODE2IDI3LjI3NjRaTTM3LjQ1NiAxNS43NDIyTDM2LjA3NyAyMC42Nzc3TDM4LjgxNzQgMjEuNDQzNEw0MC4xOTY0IDE2LjUwNzlMMzcuNDU2IDE1Ljc0MjJaIiBmaWxsPSIjMEUzNTNEIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMzExM18xOTA5NjQiPgo8cmVjdCB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIHJ4PSIyNiIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",text:n(wc.INCIDENT_FREE_MSG,{domainName:e}),subtext:n(wc.INCIDENT_FREE_SUBTEXT)})]}),(0,S.tZ)(i.rU,{to:a.teamDarkWebInsightsRoutePath,sx:{textDecoration:"none",color:`${re.colors.midGreen00}`,marginBottom:"16px","&:hover":{textDecoration:"underline"}},onClick:()=>{(0,m.Kz)(new l.UserOpenDomainDarkWebMonitoringEvent({accessPath:l.AccessPath.MainDashboardButton,isFirstVisit:!1}))},children:n(wc.RETURNING_USER_CTA)})]})},Uc=({domainName:e})=>{const{translate:t}=(0,p.Z)();return(0,S.BX)(S.HY,{children:[(0,S.BX)("section",{sx:{width:"100%"},children:[(0,S.tZ)(Lc,{domain:e}),(0,S.tZ)(Rc,{imgSrc:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MyA1MyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUzIiBoZWlnaHQ9IjUzIiByeD0iMjYuNSIgZmlsbD0iI0Q5REZFMCIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI2LjgwMDQgMTMuNzUzN0wyNi45NjE2IDEzLjEwOTFDMjcuNjA2MiAxMC42MTEzIDI5Ljg2MjIgOSAzMi4zNjAxIDlDMzUuMzQxMyA5IDM4IDExLjQxNzMgMzggMTQuNDc4OUMzOCAxNi45NzY4IDM2LjMwNzkgMTkuMDcxNiAzMy45NzEyIDE5LjcxNjRWMjAuNzY0SDMwLjc0ODJWMTguODMwM0MzMC43NDgyIDE3Ljc4MjcgMzEuNTU0IDE2LjgxNiAzMi42ODE5IDE2LjczNTRDMzMuODA5OSAxNi41NzQyIDM0Ljc3NjggMTUuNjg3OSAzNC43NzY4IDE0LjQ3OTRDMzQuNzc2OCAxMy4xOTAyIDMzLjY0ODkgMTIuMjIzMyAzMi4zNTk1IDEyLjIyMzNDMzEuMjMxNiAxMi4yMjMzIDMwLjM0NTMgMTIuODY3OSAzMC4wMjI5IDEzLjkxNTRMMjkuODYxNyAxNC41NTk5TDI2LjggMTMuNzU0MkwyNi44MDA0IDEzLjc1MzdaTTM0LjM3NDQgMjMuNzQ1NUMzNC4zNzQ0IDI0Ljg1OCAzMy40NzI2IDI1Ljc2IDMyLjM2MDEgMjUuNzZDMzEuMjQ3NiAyNS43NiAzMC4zNDU2IDI0Ljg1OCAzMC4zNDU2IDIzLjc0NTVDMzAuMzQ1NiAyMi42MzMgMzEuMjQ3NiAyMS43MzEzIDMyLjM2MDEgMjEuNzMxM0MzMy40NzI2IDIxLjczMTMgMzQuMzc0NCAyMi42MzMgMzQuMzc0NCAyMy43NDU1Wk0zNi44NzkxIDM0LjYzMzlDMzYuODc5MSAzMi42MTggMzYuNDE5MyAzMC42ODU5IDM1LjU0MTMgMjguODhMMzEuNjk1OCAyOC44OEwzMi4xOTczIDI5LjcxOTlDMzIuODI0MiAzMC43Njk5IDMzLjIwMDQgMzEuOTAzOSAzMy40MDk0IDMzLjA3OTlMMjkuMzEyOSAzMy4wNzk5QzI5LjI3MTIgMzAuOTggMjguOTc4NCAyOC44OCAyOC41MTg2IDI2LjgyMTlDMjcuNTk4OSAyMy4xNjgxIDI1LjkyNjkgMjEuMzIgMjMuNTAyNCAyMS4zMkMxNi4xMDMyIDIxLjI3OCAxMC4wNDE5IDI3LjI4NDEgMTAuMDAwMiAzNC42NzU5QzkuOTU4NDIgNDIuMDY3NyAxNS44OTQzIDQ4LjE1NzkgMjMuMjkzMyA0OC4xOTk4SDIzLjYyNzhDMzEuMDI2NyA0OC4xMTU4IDM2Ljk2MjUgNDIuMDY3OSAzNi44NzkxIDM0LjYzMzlaTTIxLjAzNjEgMzYuNDRMMjUuOTY4NiAzNi40NEMyNS43NTk1IDQxLjIyNzkgMjQuNzU2NSA0NC44Mzk5IDIzLjUwMjMgNDQuODM5OUMyMi4yNDgyIDQ0LjgzOTkgMjEuMjQ1MSA0MS4yMjc5IDIxLjAzNjEgMzYuNDRaTTIzLjUwMjMgMjQuNjgwM0MyNC43NTY1IDI0LjY4MDMgMjUuNzU5NSAyOC4zMzQyIDI1Ljk2ODYgMzMuMDgwMkgyMS4wMzYxQzIxLjI0NTIgMjguMzM0MiAyMi4yNDgyIDI0LjY4MDMgMjMuNTAyMyAyNC42ODAzWk0xNy42OTE3IDMzLjA4MDJMMTMuNjM2OSAzMy4wODAzQzE0LjA5NjcgMzAuMTQwMSAxNS44OTQxIDI3LjUzNjIgMTguNDg2IDI2LjAyNDJMMTguNzM2OCAyNS44OTgyQzE4LjY1MzEgMjYuMTkyMyAxOC41Njk3IDI2LjQ4NjIgMTguNDg2IDI2LjgyMjJDMTguMDI2MiAyOC44ODAzIDE3LjczMzQgMzAuOTgwMyAxNy42OTE3IDMzLjA4MDJaTTE4LjQ4NiA0Mi42OTgyQzE4LjU2OTcgNDMuMDM0MiAxOC42NTMxIDQzLjMyOCAxOC43MzY4IDQzLjYyMjFMMTguNzM2OCA0My42MjIyQzE3LjEwNjUgNDIuNzQwMSAxNS43MjcgNDEuNDM4MiAxNC44NDkgMzkuODAwMkMxNC4yMjIxIDM4Ljc1MDIgMTMuODQ1OSAzNy42MTYxIDEzLjYzNjkgMzYuNDQwMUgxNy42OTE3QzE3LjczMzQgMzguNTQwMSAxOC4wMjYyIDQwLjY0MDEgMTguNDg2IDQyLjY5ODJaTTI5LjMxMjggMzYuNDQwMUwzMy4zNjc2IDM2LjQ0QzMyLjkwNzggMzkuNDIyMSAzMS4xMTA0IDQxLjk4NDEgMjguNTE4NCA0My40OTYxTDI4LjI2NzcgNDMuNjIyMUMyOC4zNTE0IDQzLjMyOCAyOC40MzQ4IDQzLjAzNDEgMjguNTE4NCA0Mi42OTgxQzI4Ljk3ODMgNDAuNjQgMjkuMjcxMSAzOC41NCAyOS4zMTI4IDM2LjQ0MDFaIiBmaWxsPSIjMEUzNTNEIi8+Cjwvc3ZnPgo=",text:t(wc.UNVERIFIED_MSG),subtext:t(wc.UNVERIFIED_SUBTEXT)})]}),(0,S.tZ)(re.rUS,{sx:{textDecoration:"none",fontWeight:"lighter",marginBottom:"16px","&:hover":{textDecoration:"underline"}},color:re.colors.midGreen00,target:"_blank",rel:"noopener noreferrer",href:Ac,onClick:()=>{(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.ViewDomainVerificationGuide}))},children:t(wc.RETURNING_USER_VIEW_DOMAIN_GUIDE_CTA)})]})},Xc=({domainName:e})=>{const{translate:t}=(0,p.Z)();return(0,S.BX)(S.HY,{children:[(0,S.tZ)(Lc,{domain:e}),(0,S.tZ)(o.ZX,{size:44,sx:{alignSelf:"center"}}),(0,S.tZ)(re.nvN,{size:"small",color:re.colors.grey00,sx:{marginBottom:"3em",overflow:"hidden",width:"-webkit-fill-available"},children:t(wc.GENERATING_INSIGHTS_MESSAGE)})]})},zc=({verifiedOrPendingDomain:e,dwiSummaryResponse:t})=>{const{translate:n}=(0,p.Z)(),a=e.status===fl.p.valid,i=e.name;return(0,S.BX)(Oc,{children:[(0,S.tZ)(o.X6,{as:"h5",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:n(wc.HEADING)}),a?t?.success?(0,S.tZ)(Pc,{domainName:i,domainInfo:t.data[i]}):(0,S.tZ)(Xc,{domainName:i}):(0,S.tZ)(Uc,{domainName:i})]})},qc=n.p+"daa928a30146cfbef943.png";var jc,Fc;const Gc={TEAM_NEW_LABEL:"team_new_label",HEADING:"team_dashboard_dark_web_insights_discovery_heading",SUBTEXT:"team_dashboard_dark_web_insights_discovery_subtext",ALTERNATE_HEADING:"team_dashboard_dark_web_insights_discovery_heading_alternate",ALTERNATE_SUBTEXT:"team_dashboard_dark_web_insights_discovery_subtext_alternate",SECURITY_INCIDENTS:{LABEL:"team_dashboard_dark_web_insights_security_incidents",TOOLTIP:"team_dashboard_dark_web_insights_security_incidents_tooltip"},EMAILS_AFFECTED:{LABEL:"team_dashboard_dark_web_insights_emails_affected",TOOLTIP:"team_dashboard_dark_web_insights_emails_affected_tooltip"},GET_STARTED_CTA:"team_dashboard_dark_web_insights_discovery_get_started_cta"},Vc=()=>{const{translate:e}=(0,p.Z)(),{routes:t}=(0,lo.Xo)(),n=(0,i.k6)(),{unseen:a}=(0,ce.m)(se.O.TacDarkWebInsightsNewBadge);return(0,S.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserOpenDomainDarkWebMonitoringEvent({accessPath:l.AccessPath.MainDashboardButton,isFirstVisit:a})),n.push(t.teamDarkWebInsightsRoutePath)},children:e(Gc.GET_STARTED_CTA)},"primary")},Hc=({data:e,companyName:t})=>{const{translate:n}=(0,p.Z)(),[a]=Object.keys(e),i=e[a];return(0,S.BX)(Oc,{children:[(0,S.tZ)(o.Ct,{layout:"labelOnly",label:n(Gc.TEAM_NEW_LABEL),mood:"brand"}),(0,S.tZ)(o.X6,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",as:"h3",sx:{marginTop:"1em",width:"100%",overflow:"hidden"},children:n(Gc.HEADING,{companyName:t})}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:n(Gc.SUBTEXT)}),(0,S.BX)("div",{sx:{backgroundColor:`${re.colors.dashGreen06}`,padding:"2px 14px",width:"100%",borderRadius:"10px"},children:[(0,S.tZ)(Nc,{count:i.leaksCount,labelAndTooltip:Gc.SECURITY_INCIDENTS,primaryColor:re.colors.dashGreen01}),(0,S.tZ)(Nc,{count:i.emailsImpactedCount,labelAndTooltip:Gc.EMAILS_AFFECTED,primaryColor:re.colors.dashGreen01})]}),jc||(jc=(0,S.tZ)(Vc,{}))]})},Wc=({companyName:e})=>{const{translate:t}=(0,p.Z)();return(0,S.BX)(Oc,{children:[(0,S.tZ)("div",{sx:{alignSelf:"end"},children:(0,S.tZ)(o.Ct,{layout:"labelOnly",label:t(Gc.TEAM_NEW_LABEL),mood:"brand"})}),(0,S.tZ)("img",{sx:{backgroundColor:`${re.colors.midGreen05}`,height:"122px",width:"122px",borderRadius:"50%",backgroundImage:`url(${qc})`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPositionX:"60%"}}),(0,S.tZ)(o.X6,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",as:"h3",sx:{width:"100%"},children:t(Gc.ALTERNATE_HEADING,{companyName:e})}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:t(Gc.ALTERNATE_SUBTEXT)}),Fc||(Fc=(0,S.tZ)(Vc,{}))]})},$c=({dwiSummaryResponse:e})=>{var t;const{spaceDetails:n}=(0,be.fV)(),a=null!=(t=n?.teamName)?t:"-";return e?.success?(0,S.tZ)(Hc,{data:e.data,companyName:a}):(0,S.tZ)(Wc,{companyName:a})};var Kc,Yc,Qc;const Jc={seats:{pending:0,provisioned:0,used:0},passwordHealthHistory:[],passwordHealth:{compromised:0,passwords:0,reused:0,safe:0,securityIndex:0,weak:0}},ed=()=>{const{data:e,status:t}=(0,c.k)(Sl.B,"getReport"),n=t===L.rq.Success?e:Jc,a=t===L.rq.Loading,{verifiedOrPendingDomain:{domain:i,status:s}}=Cl(),[d,u]=(0,r.useState)(null),g=t===L.rq.Success&&0===n.passwordHealthHistory.length,h=(0,r.useCallback)((async()=>{const e=await he.C.getDarkWebInsightsSummary();u(e)}),[]);(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacDashboard),h()}),[h]);const y=(({dismissible:e})=>{const t=(0,Dl.D)(),n=(0,X.C)(),a=(0,te.lZ)();if(!n||a.isLoading)return!1;const i=n.isFreeTrial;if((n.spaceTier===_.lD.Business||n.spaceTier===_.lD.BusinessPlus)&&!i)return!1;const r=t.find((e=>e.type===Zl.U.DASHBOARD_UPRADE&&e.dismissedAt));return!e||!r})({dismissible:!0}),{translate:b}=(0,p.Z)();return(0,S.BX)(go,{header:(0,S.tZ)(o.X6,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:b("dashboard_page_title")}),children:[(0,S.BX)(re.T5p,{fullWidth:!0,alignItems:"top",gap:"32px",gridTemplateColumns:"710px auto",gridTemplateRows:"auto auto",gridTemplateAreas:`'cards cards' '${y?"pwHealth upgrade":"pwHealth dwi"}'`,children:[(0,S.tZ)(re.dDn,{gridArea:"cards",children:(0,S.tZ)(Ql,{passwordHealth:n.passwordHealth,seats:n.seats,passwordHealthHistoryEmpty:g})}),(0,S.tZ)(re.dDn,{gridArea:"pwHealth",sx:{minHeight:"418px"},children:(0,S.tZ)(Ic,{isLoading:a,report:n,passwordHealthHistoryEmpty:g})}),y?(0,S.tZ)(re.dDn,{gridArea:"upgrade",sx:{width:"282px"},children:(0,S.tZ)(o.Zb,{sx:{padding:"16px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:Kc||(Kc=(0,S.tZ)(ql,{dismissible:!0}))})}):(0,S.tZ)(re.dDn,{gridArea:"dwi",children:s===vl.Loading?Yc||(Yc=(0,S.tZ)(Oc,{})):null!==i?(0,S.tZ)(zc,{verifiedOrPendingDomain:i,dwiSummaryResponse:d}):(0,S.tZ)($c,{dwiSummaryResponse:d})})]}),a?Qc||(Qc=(0,S.tZ)(El.a,{})):null]})},td=({supportHeader:e,children:t})=>{const{translate:n}=(0,p.Z)();return(0,S.BX)(o.Zb,{sx:{display:"flex",gap:"8px",flexDirection:"column",background:"ds.container.agnostic.neutral.supershy"},children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",sx:{marginBottom:"8px"},children:null!=e?e:n("webapp_tac_infocard_title")}),t]})};var nd;const ad=({children:e,href:t,onClick:n,...a})=>(0,S.BX)(o.nv,{as:"a",onClick:n,href:t,rel:"noopener noreferrer",target:"_blank",color:"ds.text.brand.quiet",sx:{display:"inline-flex",textDecoration:"underline",flexDirection:"row",":hover":{textDecoration:"none",color:"ds.text.brand.standard"},":hover + svg":{fill:"ds.text.brand.standard"}},...a,children:[e,nd||(nd=(0,S.tZ)(o.JO,{name:"ActionOpenExternalLinkOutlined",color:"ds.text.brand.quiet"}))]});let id=function(e){return e[e.ExternalLink=0]="ExternalLink",e[e.InternalLink=1]="InternalLink",e}({});const rd=({heading:e,description:t,linkText:n,supportHeading:a,linkProps:i})=>(0,S.BX)(td,{supportHeader:a,children:[(0,S.tZ)(o.X6,{as:"h3",sx:{marginBottom:"8px"},color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",children:e}),(0,r.isValidElement)(t)?t:(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",sx:{marginBottom:n&&i.linkType===id.ExternalLink&&i.linkHref?"24px":0},children:t}),i.linkType===id.ExternalLink&&i.linkHref?(0,S.tZ)(ad,{href:i.linkHref,children:n}):null,i.linkType===id.InternalLink?(0,S.tZ)(o.Qj,{onClick:i.internalAction,children:n}):null]}),sd=()=>{const{translate:e}=(0,p.Z)();return(0,S.tZ)("div",{children:(0,S.BX)(td,{children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:e("team_breach_report_need_help")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:e("team_dark_web_insights_need_help_description")}),(0,S.tZ)(ad,{href:"https://support.dashlane.com/hc/articles/5015658490514",onClick:()=>{(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.LearnAboutDarkWebInsights}))},children:e("team_dark_web_insights_learn_more_txt")}),(0,S.tZ)(ad,{href:Ac,onClick:()=>{(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.LearnAboutDomainVerification}))},children:e("team_breach_report_learn_domain_verification_txt")})]})})};var od=n(94017),ld=n.n(od),cd=n(83849),dd=n.n(cd);const _d=({registerDomain:e=(()=>{}),disabled:t,registrationError:n,clearRegistrationErrors:a=(()=>{}),domainLoadError:i})=>{const{translate:s}=(0,p.Z)(),[o,l]=r.useState(""),c=i?"":s("team_settings_domain_url_placeholder");return(0,S.BX)(S.HY,{children:[(0,S.BX)("div",{className:"domainUrlInput--VQjVVbbN2d",children:[(0,S.tZ)(re.oil,{value:o,placeholder:c,fullWidth:!0,feedbackText:n,feedbackType:n?"error":void 0,onChange:e=>{n&&a(),l(e.target.value)},disabled:!!i||t}),i&&(0,S.tZ)("p",{className:"domainLoadErrorText--WEJL2Ne0Pt",children:i})]}),(0,S.tZ)(re.zxk,{type:"button",className:dd()("domainUrlButton--lFqlfJ3Gzv",{"domainLoadError--ajAHmgDUO9":i}),disabled:t,nature:"secondary",onClick:()=>e(o),children:s("team_settings_domain_button_add")})]})};var ud=n(18402),md=n.n(ud);const pd=({domain:e,onConfirm:t,onDismiss:n})=>{const{translate:a}=(0,p.Z)(),[i,s]=(0,r.useState)(!1),o=(0,r.useRef)(!1);return(0,r.useEffect)((()=>()=>{o.current=!0}),[o]),(0,S.tZ)(Ya.o,{isOpen:!0,onRequestClose:n,footer:(0,S.tZ)(re.cNS,{primaryButtonTitle:a("team_settings_domain_deactivate_button_remove"),primaryButtonOnClick:async()=>{s(!0),await t(),o.current||(s(!1),n())},primaryButtonProps:{disabled:i},secondaryButtonTitle:a("team_settings_domain_deactivate_button_cancel"),secondaryButtonOnClick:n,intent:"primary"}),title:a("team_settings_domain_deactivate_title"),children:(0,S.tZ)("p",{children:a.markup("team_settings_domain_deactivate_description_markup",{domainUrl:e.name})})})},gd=({domain:e,deactivateDomain:t,isDisabled:n,disabledTooltipText:a})=>{const[i,s]=(0,r.useState)(!1);return(0,S.BX)(S.HY,{children:[i?(0,S.tZ)(pd,{domain:e,onConfirm:t,onDismiss:()=>s(!1)}):null,(0,S.tZ)("div",{className:"deactivateTrashcan--nLkrRLE9CS",onClick:()=>{n||s(!0)},children:(0,S.tZ)(re.ua7,{passThrough:!n,placement:"top",content:null!=a?a:"",sx:{maxWidth:"180px"},children:(0,S.tZ)(re.XHJ,{disabled:n,size:25,color:md()["--dash-green-00"]})})})]})},hd={CENTER_LABEL:{marginTop:"12px"}},yd=({label:e,labelHelper:t,centerLabel:n,children:a})=>(0,S.BX)("div",{sx:{display:"flex",flexWrap:"nowrap",alignItems:"flex-start"},children:[(0,S.BX)("div",{sx:{flexGrow:"1",maxWidth:"50%",paddingRight:"40px"},children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:(0,o.jM)([{marginBottom:"4px"},n?hd.CENTER_LABEL:{}]),children:e}),t?(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:t}):null]}),(0,S.tZ)("div",{sx:{flexGrow:"1",maxWidth:"50%",display:"flex",justifyContent:"space-between"},children:a})]});let bd=function(e){return e[e.ClaimDomain=0]="ClaimDomain",e[e.VerifyDomain=1]="VerifyDomain",e[e.SSOConnector=2]="SSOConnector",e[e.EnableSSO=3]="EnableSSO",e}({}),xd=function(e){return e[e.SSOConnector=0]="SSOConnector",e[e.ConfigureIDP=1]="ConfigureIDP",e[e.EnableSSO=2]="EnableSSO",e}({}),Sd=function(e){return e[e.dismiss=0]="dismiss",e[e.action=1]="action",e}({});const fd="team_settings_domain_deactivate_button_tooltip_error",vd=({currentStep:e,deactivateDomain:t,domain:n,isDisabled:a,setCurrentSteps:i,verifyDomain:s})=>{var o;const[l,c]=r.useState(!1),{translate:d}=(0,p.Z)();return(0,S.BX)("div",{className:"domainContainer--uTWD0PQykR",children:[(()=>{if(!n)return null;switch(e){case Zd.Verify:case Zd.VerifyFailed:return(0,S.BX)(S.HY,{children:[(0,S.tZ)(Id,{domain:n,verifyDomain:()=>c(!0),domainStep:e}),(0,S.tZ)(gd,{domain:n,deactivateDomain:()=>t(n),isDisabled:a,disabledTooltipText:d(fd)})]});case Zd.Complete:return(0,S.BX)(S.HY,{children:[o||(o=(0,S.tZ)(Nd,{domain:n})),(0,S.tZ)(gd,{domain:n,deactivateDomain:()=>t(n),isDisabled:a,disabledTooltipText:d(fd)})]});default:return null}})(),(()=>{if(!n||!l)return null;switch(e){case Zd.Verify:return(0,S.tZ)(Md,{domainName:n.name,onConfirm:()=>s(n),onDismiss:()=>c(!1)});case Zd.VerifyFailed:return(0,S.tZ)(Bd,{onDismiss:()=>{i((e=>({...e,[n.id]:Zd.Verify}))),c(!1)}});default:return null}})()]},n.id)},Cd="team_settings_domain_register_invalid_error",Ed={INVALID_PUBLIC_DOMAIN:"team_settings_domain_register_public_error",DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS:"team_settings_domain_register_contact_support"};let Zd=function(e){return e[e.Register=0]="Register",e[e.Verify=1]="Verify",e[e.VerifyFailed=2]="VerifyFailed",e[e.Complete=3]="Complete",e}({});const Dd=({isTeamSettingsLoading:e,teamSettings:t,setStepComplete:n,uncompleteSteps:a})=>{const{translate:i}=(0,p.Z)(),[s,o]=r.useState(!1),[l,c]=r.useState([]),[d,_]=r.useState(""),[u,m]=r.useState(""),[g,h]=r.useState({}),y=e=>"valid"===e.status,b=()=>l.filter((e=>y(e))),x=t?.ssoEnabled||!1,f=r.useCallback(((e=[])=>{e.forEach((e=>{switch(e.status){case fl.p.pending:h((t=>({...t,[e.id]:Zd.Verify}))),n(bd.ClaimDomain);break;case fl.p.valid:h((t=>({...t,[e.id]:Zd.Complete}))),n(bd.ClaimDomain),n(bd.VerifyDomain);break;default:h((t=>({...t,[e.id]:Zd.Register})))}}))}),[]),v=r.useCallback((async()=>{o(!0),m("");const e=await he.C.getTeamDomains();return o(!1),e.success?(c(e.domains),e.domains):(m(i("team_settings_domain_fetch_error")),Promise.resolve(void 0))}),[he.C.getTeamDomains]),C=async e=>{const t=await he.C.completeTeamDomainRegistration();t.success&&t.domains.find((t=>t.name===e.name))&&t.domains.find((t=>t.name===e.name))?.status===fl.p.valid?(n(bd.VerifyDomain),h((t=>({...t,[e.id]:Zd.Complete})))):h((t=>({...t,[e.id]:Zd.VerifyFailed})))},E=async e=>{e&&(await he.C.deactivateTeamDomain({domain:e.name})).success&&(f(await v()),b().length||a([bd.EnableSSO,bd.SSOConnector,bd.ClaimDomain,bd.VerifyDomain]))};return r.useEffect((()=>{(async()=>{f(await v())})()}),[v,f]),(0,S.BX)(S.HY,{children:[(0,S.tZ)(yd,{label:`1. ${i("team_settings_domain_title")}`,labelHelper:i("team_settings_domain_multi_description"),children:s||e?(0,S.tZ)(ai.Z,{size:20,containerStyle:{alignItems:"normal"}}):(0,S.tZ)(_d,{registerDomain:async e=>{if(l.length>=5)return;if(!ld().isFQDN(e))return void _(i(Cd));const t=await he.C.registerTeamDomain({domain:e});if(t.success)f(await v());else if(!t.success){const{error:{code:e}}=t,n=Ed[e];_(i(null!=n?n:Cd))}},domainLoadError:u,registrationError:d,disabled:l.length>=5,clearRegistrationErrors:()=>_("")})}),s||e||0===l.length?null:(0,S.tZ)(yd,{label:i("team_settings_domain_added"),children:(0,S.tZ)("div",{className:"domainsContainer--eO_SBqHaFr",children:l.map(((e,t)=>t<5?(0,S.tZ)(vd,{currentStep:g[e.id],deactivateDomain:E,domain:e,isDisabled:x&&1===b().length&&y(e),setCurrentSteps:h,verifyDomain:C},e.id):null))})})]})},{orange00:Td,dashGreen02:kd}=re.colors,Id=({verifyDomain:e,domain:t,domainStep:n})=>{const{translate:a}=(0,p.Z)();return(0,S.BX)(re.T5p,{gap:"10px",gridTemplateColumns:"1fr auto",children:[(0,S.tZ)(re.oil,{value:t?t.name:"",fullWidth:!0,readOnly:!0,endAdornment:(0,S.BX)(re.T5p,{gridTemplateColumns:"auto auto",gap:"5px",children:[(0,S.tZ)(re.nvN,{size:"small",color:n===Zd.VerifyFailed?Td:kd,children:n===Zd.VerifyFailed?a("team_settings_domain_verify_failed"):a("team_settings_domain_not_verified")}),(0,S.tZ)(re.enX,{color:n===Zd.VerifyFailed?Td:kd})]}),feedbackType:n===Zd.VerifyFailed?"warning":void 0}),(0,S.tZ)(re.zxk,{nature:"secondary",onClick:e,type:"button",children:a("team_settings_domain_button_verify")})]})};var Ad;const{accessibleValidatorGreen:wd}=re.colors,Nd=({domain:e})=>(0,S.tZ)(re.oil,{value:e.name,endAdornment:Ad||(Ad=(0,S.tZ)(re.rE2,{color:wd})),readOnly:!0,fullWidth:!0});var Od,Rd=n(1234);const Ld="team_settings_domain_verify_load_error",Md=({description:e,isDarkWebInsights:t,secondaryDescription:n,domainName:a,href:i="https://support.dashlane.com/hc/articles/360013149040",linkLabel:s,onClick:c,onDismiss:d,onConfirm:_})=>{const{translate:u}=(0,p.Z)(),[g,h]=(0,r.useState)({id:0,name:""}),[y,b]=(0,r.useState)(""),[x,f]=(0,r.useState)(!1),[v,C]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{f(!0);try{const e=await he.C.getTeamDomains();if(e.success){const t=e.domains.find((e=>e.name===a));t?h(t):b(u(Ld))}}catch(e){b(u(Ld))}finally{f(!1)}})()}),[a,u]);const{dnsToken:{computedToken:E,challengeDomain:Z}={computedToken:"",challengeDomain:""}}=g,D=({id:e,inputValue:t,labelText:n})=>({textInputProps:{id:e,label:n,readOnly:!0,disabled:x,fullWidth:!0,startAdornment:x?Od||(Od=(0,S.tZ)(o.ZX,{})):void 0},iconButtonProps:{disabled:x},inputValue:t});return(0,S.BX)(re.VqE,{isOpen:!0,onClose:d,closeIconName:u("_common_dialog_dismiss_button"),children:[(0,S.tZ)(re.$N8,{title:u("team_settings_domain_verify_title")}),(0,S.tZ)(re.a7O,{children:(0,S.BX)(re.T5p,{gap:"32px",gridTemplateColumns:"1fr",gridAutoRows:"auto",children:[(0,S.tZ)(re.nvN,{color:re.colors.grey00,children:e||u.markup("team_settings_domain_verify_description_markup",{domainUrl:a})}),y?(0,S.tZ)(re.nvN,{color:re.colors.red00,children:y}):(0,S.BX)(S.HY,{children:[(0,S.tZ)(Rd.x,{...D({id:"hostnameInput",labelText:u("team_settings_domain_verify_host"),inputValue:Z})}),(0,S.tZ)(Rd.x,{...D({id:"txtValueInput",labelText:u("team_settings_domain_verify_txt"),inputValue:E})})]}),n?(0,S.tZ)(re.nvN,{color:re.colors.grey00,children:n}):null]})}),(0,S.tZ)(re.cNS,{primaryButtonTitle:u("team_settings_domain_verify_confirm"),primaryButtonOnClick:async()=>{C(!0);try{await _()}catch(e){b(e.message),t&&(0,m.Kz)(new l.UserVerifyDomainEvent({domainVerificationStep:l.DomainVerificationStep.DomainVerificationError}))}finally{C(!1),t&&(0,m.Kz)(new l.UserVerifyDomainEvent({domainVerificationStep:l.DomainVerificationStep.TapVerifyDomainCtaWithDnsInformation}))}},primaryButtonProps:{disabled:!!y||x||v},intent:"primary",children:(0,S.tZ)(re.rUS,{sx:{alignSelf:"center",mr:"auto"},color:re.colors.midGreen00,target:"_blank",rel:"noopener noreferrer",href:i,onClick:c,children:s||u("team_settings_domain_verify_setup")})})]})},Bd=({onDismiss:e,domainName:t})=>{const{translate:n}=(0,p.Z)(),a=t?n.markup("team_settings_domain_verify_failure_title_markup",{domainUrl:t}):n("team_settings_domain_verify_failure_title");return(0,S.BX)(re.VqE,{isOpen:!0,onClose:e,children:[(0,S.tZ)(re.$N8,{title:a}),(0,S.tZ)(re.a7O,{children:n("team_settings_domain_verify_failure_desc")}),(0,S.tZ)(re.cNS,{primaryButtonTitle:n("team_settings_domain_verify_failure_button"),primaryButtonOnClick:e,intent:"primary"})]})},Pd=({description:e,isDarkWebInsights:t,secondaryDescription:n,domainName:a,linkLabel:i,href:s,onClick:o,onDismiss:l,onError:c,onSuccess:d})=>{const[_,u]=(0,r.useState)(!1),m=(0,r.useRef)(!1),p=(0,r.useCallback)((async()=>{const e=await he.C.completeTeamDomainRegistration();if(!m.current){if(e.success){const t=e.domains.find((e=>e.name===a));t?.status===fl.p.valid?d():c&&c()}else u(!0);return()=>{m.current=!0}}}),[a,d,c]);return _?(0,S.tZ)(Bd,{onDismiss:l,domainName:a}):(0,S.tZ)(Md,{description:e,isDarkWebInsights:t,secondaryDescription:n,linkLabel:i,domainName:a,href:s,onConfirm:p,onDismiss:l,onClick:o})},Ud={CONTAINER:{position:"relative",paddingLeft:"34px",borderLeft:"1px dashed ds.border.brand.standard.idle",paddingBottom:"16px",paddingRight:"24px",marginTop:"15px",flexBasis:"33%"},IMG:{position:"absolute",top:0,left:0,transform:"translate(-50%, -30%)"}},Xd=({img:e,title:t,subtitle:n,caps:a,titleColor:i})=>(0,S.BX)("div",{sx:Ud.CONTAINER,children:[(0,S.tZ)("img",{src:e,sx:Ud.IMG}),(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:i,sx:{marginBottom:"8px",textTransform:a?"uppercase":void 0},children:t}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.reduced.regular",children:n})]}),zd=()=>{const{translate:e}=(0,p.Z)();return(0,S.tZ)(o.Zb,{children:(0,S.BX)(o.kC,{sx:{paddingLeft:"24px",borderBottomColor:"ds.border.brand.standard.idle",borderBottomStyle:"solid",borderBottomWidth:"1px"},justifyContent:"space-between",children:[(0,S.tZ)(Xd,{img:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MyA1MyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGN4PSI1MCUiIGN5PSI1MCUiIHI9IjI1IiBzdHJva2U9IiMwMDllYWEiIGZpbGw9IiNGNkY5RkEiLz4KPHBhdGggZD0iTTI2LjEyODMgMzBIMjcuNjE2M1YyMS4zMjRIMjYuNjIwM0MyNi41NjAzIDIyLjA1IDI2LjAzODMgMjIuNDQ2IDI0LjUyMDMgMjIuNDQ2VjIzLjMxNkgyNi4xMjgzVjMwWiIgZmlsbD0iIzAwOWVhYSIgZmlsbC1vcGFjaXR5PSIwLjk1IiBzdHJva2U9IiMwMDllYWEiIHN0cm9rZS1vcGFjaXR5PSIwLjk1IiBzdHJva2Utd2lkdGg9IjAuNSIgLz4KPC9zdmc+Cg==",title:e("team_breach_report_verify_domain_stepper_title"),subtitle:e("team_dark_web_insights_stepper_verify_domain_subtitle"),titleColor:"ds.text.brand.standard"}),(0,S.tZ)(Xd,{img:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MyA1MyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGN4PSI1MCUiIGN5PSI1MCUiIHI9IjI1IiBzdHJva2U9IiMwMDllYWEiIGZpbGw9IiNGNkY5RkEiLz4KPHBhdGggZD0iTTI0LjAwNDkgMzBIMzAuMTI0OVYyOC43NTJIMjUuNjMwOVYyOC42MjZDMjUuNjMwOSAyNi41NjIgMzAuMTA2OSAyNi44NSAzMC4xMDY5IDIzLjc1NEMzMC4xMDY5IDIyLjIzIDI4Ljk0MjkgMjEuMjA0IDI3LjA4ODkgMjEuMjA0QzI0Ljk0MDkgMjEuMjA0IDIzLjg1NDkgMjIuNDgyIDIzLjgzMDkgMjQuMDY2SDI1LjI0NjlDMjUuMzYwOSAyMy4wMjggMjYuMDUwOSAyMi40NCAyNy4wNDY5IDIyLjQ0QzI3Ljk4MjkgMjIuNDQgMjguNTcwOSAyMi45OCAyOC41NzA5IDIzLjc2QzI4LjU3MDkgMjUuODYgMjQuMDA0OSAyNS43MjIgMjQuMDA0OSAyOC44MThWMzBaIiBmaWxsPSIjMDA5ZWFhIiBmaWxsLW9wYWNpdHk9IjAuOTUiIHN0cm9rZT0iIzAwOWVhYSIgc3Ryb2tlLW9wYWNpdHk9IjAuOTUiIHN0cm9rZS13aWR0aD0iMC41Ii8+Cjwvc3ZnPgo=",title:e("team_dark_web_insights_view_insights_stepper_title"),subtitle:e("team_dark_web_insights_view_insights_stepper_subtitle")}),(0,S.tZ)(Xd,{img:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTQiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1NCA1MyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGN4PSI1MCUiIGN5PSI1MCUiIHI9IjI1IiBzdHJva2U9IiMwMDllYWEiIGZpbGw9IiNGNkY5RkEiLz4KPHBhdGggZD0iTTIzLjczMzUgMjMuOTI4SDI1LjE0OTVDMjUuMjAzNSAyMi44MDYgMjYuMDAxNSAyMi4zNjggMjYuODc3NSAyMi4zNjhDMjcuOTA5NSAyMi4zNjggMjguNTYzNSAyMi44NzggMjguNTYzNSAyMy41NUMyOC41NjM1IDI0LjI4MiAyNy44NDM1IDI0Ljg1MiAyNi44MTc1IDI0Ljg4MkwyNi4wNzM1IDI0LjkxMlYyNi4xTDI2Ljg3NzUgMjYuMTI0QzI3Ljk2MzUgMjYuMTQ4IDI4Ljc3OTUgMjYuNjUyIDI4Ljc3OTUgMjcuNTM0QzI4Ljc3OTUgMjguMzU2IDI4LjA1MzUgMjguOTI2IDI2Ljg4MzUgMjguOTI2QzI1Ljk0MTUgMjguOTI2IDI1LjI0NTUgMjguNDM0IDI1LjA3NzUgMjcuNDAySDIzLjY1NTVDMjMuNjkxNSAyOS4wODIgMjQuOTAzNSAzMC4xMiAyNi44NTM1IDMwLjEzMkMyOC44MDk1IDMwLjE0NCAzMC4zNDU1IDI5LjIyIDMwLjM0NTUgMjcuNTdDMzAuMzQ1NSAyNi40MTggMjkuNTUzNSAyNS43MTYgMjguNTA5NSAyNS40MjhDMjkuNjI1NSAyNS4wNDQgMzAuMTI5NSAyNC4zNDggMzAuMTI5NSAyMy40OUMzMC4xMjk1IDIxLjk3MiAyOC43NzM1IDIxLjIwNCAyNi44OTU1IDIxLjIwNEMyNS4xNDM1IDIxLjIwNCAyMy43MzM1IDIyLjE0NiAyMy43MzM1IDIzLjkyOFoiIGZpbGw9IiMwMDllYWEiIGZpbGwtb3BhY2l0eT0iMC45NSIgIHN0cm9rZT0iIzAwOWVhYSIgc3Ryb2tlLW9wYWNpdHk9IjAuOTUiIHN0cm9rZS13aWR0aD0iMC41Ii8+Cjwvc3ZnPgo=",title:e("team_breach_report_reduce_risk_title"),subtitle:e("team_breach_report_reduce_risk_subtitle")})]})})};var qd,jd=n(97962);const Fd="team_breach_report_domain_register_invalid_error",Gd={INVALID_PUBLIC_DOMAIN:"team_settings_domain_register_public_error",DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS:"team_settings_domain_register_contact_support",DOMAIN_ALREADY_EXISTS:"team_settings_domain_register_duplicated_error"},Vd=({onSuccess:e,onError:t})=>{const{translate:n}=(0,p.Z)(),a=(0,jd.f)(),{openDialog:i,shouldShowFrozenStateDialog:s}=(0,I.Ub)(),[c,d]=(0,r.useState)(""),[_,u]=(0,r.useState)(""),[g,h]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(void 0!==a){const e=a.substring(a.lastIndexOf("@")+1);d(e)}}),[a]),(0,S.BX)(S.HY,{children:[qd||(qd=(0,S.tZ)(zd,{})),(0,S.BX)("div",{children:[(0,S.BX)(o.Zb,{sx:{margin:"24px 0"},children:[(0,S.tZ)(re.X6q,{size:"x-small",children:n("team_dark_web_insights_verify_domain_title")}),(0,S.tZ)(re.nvN,{sx:{marginBottom:"20px",marginTop:"10px"},color:re.colors.grey00,children:n("team_breach_report_verify_domain_description")}),(0,S.BX)(o.kC,{gap:"16px",children:[(0,S.tZ)("div",{sx:{width:"75%"},children:(0,S.tZ)(re.oil,{onChange:e=>{d(e.target.value),u("")},fullWidth:!0,value:c,autoFocus:!0,endAdornment:_||""===c||!ld().isFQDN(c)?void 0:(0,S.tZ)(re.rE2,{color:re.colors.accessibleValidatorGreen}),feedbackText:_||void 0,feedbackType:_?"error":void 0})}),(0,S.tZ)("div",{sx:{width:"20%"},children:(0,S.tZ)(re.zxk,{type:"button",disabled:""===c||y,onClick:()=>{(async e=>{if((0,m.Kz)(new l.UserVerifyDomainEvent({domainVerificationStep:l.DomainVerificationStep.TapContinueCtaWithDomainUrl})),s)return void i();if(!ld().isFQDN(e))return void u(n(Fd));b(!0);const t=await he.C.registerTeamDomain({domain:e});if(b(!1),t.success)return u(""),void h(!0);if(!t.success){const{error:{code:e}}=t,a=Gd[e];u(n(null!=a?a:Fd))}})(c),(0,m.Kz)(new l.UserVerifyDomainEvent({domainVerificationStep:l.DomainVerificationStep.TapContinueCtaWithDomainUrl}))},children:n("team_dwi_verify_domain_button")})})]})]}),g?(0,S.tZ)(Pd,{description:n.markup("breach_report_verify_domain_dialog_description_markup"),secondaryDescription:n("breach_report_verify_domain_dialog_secondary_description"),linkLabel:n("breach_report_verify_domain_href_label"),href:Ac,onClick:()=>{(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.ViewDomainVerificationGuide}))},domainName:c,onSuccess:()=>{e(c)},isDarkWebInsights:!0,onError:t,onDismiss:t}):null]})]})};async function Hd(e,t,n=0){const a=await he.C.getDarkWebInsightsReportResults({domain:e,offset:n,count:t});if(a?.success)return a.data;throw new Error("[fetchDarkWebInsightsResults] - Server Error: Unable to load dark web insight report results data")}var Wd,$d,Kd;const Yd=({domainName:e})=>{const{translate:t}=(0,p.Z)();return(0,S.BX)(o.Zb,{sx:{minHeight:"575px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[Wd||(Wd=(0,S.tZ)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEzIiBoZWlnaHQ9IjExMyIgdmlld0JveD0iMCAwIDExMyAxMTMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHg9IjAuNSIgd2lkdGg9IjExMiIgaGVpZ2h0PSIxMTMiIHJ4PSI1NiIgZmlsbD0iI0Y1RjdGNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTUwLjAzMzggMjYuNTYyMkM0MC45NzkgMjcuNjk4NiAzNC41NiAzNS45NjAyIDM1LjY5NjQgNDUuMDE1TDM2LjY0OTUgNTIuNjA4NUwzMS45OTUyIDUzLjE5MjZDMzAuODk5MiA1My4zMzAyIDMwLjEyMjMgNTQuMzMwMSAzMC4yNTk4IDU1LjQyNjFMMzQuNTYyMSA4OS43MDVDMzQuNjk5NyA5MC44MDEgMzUuNjk5NyA5MS41Nzc5IDM2Ljc5NTYgOTEuNDQwNEw3OS4wNDI4IDg2LjEzOEM4MC4xMzg4IDg2LjAwMDQgODAuOTE1NyA4NS4wMDA1IDgwLjc3ODIgODMuOTA0NUw3Ni40NzU5IDQ5LjYyNTZDNzYuMzM4MyA0OC41Mjk2IDc1LjMzODQgNDcuNzUyNyA3NC4yNDI0IDQ3Ljg5MDJMNjkuNDM5NiA0OC40OTNMNjguNDg2NiA0MC44OTk1QzY3LjM1MDEgMzEuODQ0OCA1OS4wODg1IDI1LjQyNTcgNTAuMDMzOCAyNi41NjIyWk00MC43NDk5IDQ0LjQ2OTlMNDEuNjkxOSA1MS45NzU2TDY0LjM5MjggNDkuMTI2NUw2My40NTA3IDQxLjYyMDhDNjIuNjY0IDM1LjM1MjEgNTYuOTQ0NCAzMC45MDgxIDUwLjY3NTcgMzEuNjk0OUM0NC40MDcxIDMyLjQ4MTcgMzkuOTYzMSAzOC4yMDEyIDQwLjc0OTkgNDQuNDY5OVpNNzguMTg0MiAzMi4yODA4TDc0LjE0ODUgMzYuNDAzNkw3NS43NCAzNy45NjE2TDc5Ljc3NTggMzMuODM4OEw3OC4xODQyIDMyLjI4MDhaTTc3LjI0NzEgNDAuMDg4Mkw3OS45MzA0IDM5LjUxNDhMODAuMjkzMiA0MS4yMTI1TDc3LjYwOTkgNDEuNzg1OUw3Ny4yNDcxIDQwLjA4ODJaTTcxLjA0MTMgMzEuODczOEw3MC44ODg3IDM1Ljg0ODRMNzIuNzg0MiAzNS45MjEyTDcyLjkzNjggMzEuOTQ2Nkw3MS4wNDEzIDMxLjg3MzhaIiBmaWxsPSIjOUZBRUIxIi8+Cjwvc3ZnPgo="})),$d||($d=(0,S.tZ)("br",{})),(0,S.tZ)(re.nvN,{color:re.colors.black,bold:!0,size:"large",children:t("team_dashboard_dark_web_insights_domain_incident_free_title",{domainName:e})}),Kd||(Kd=(0,S.tZ)("br",{})),(0,S.tZ)(re.nvN,{color:re.colors.grey00,children:t("team_dwi_domain_incident_free_description")})]})};var Qd,Jd,e_,t_;const n_={minHeight:"575px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},a_=()=>{const{translate:e}=(0,p.Z)();return(0,S.BX)(o.Zb,{sx:n_,children:[Qd||(Qd=(0,S.tZ)(o.ZX,{size:88})),Jd||(Jd=(0,S.tZ)("br",{})),(0,S.tZ)(re.nvN,{color:re.colors.grey00,children:e("team_dark_web_insights_scanning_incidents_txt")})]})},i_=()=>{const{translate:e}=(0,p.Z)();return(0,S.BX)(o.Zb,{sx:n_,children:[e_||(e_=(0,S.tZ)(o.ZX,{size:88})),t_||(t_=(0,S.tZ)("br",{})),(0,S.tZ)(re.nvN,{color:re.colors.grey00,children:e("team_dashboard_dark_web_insights_generating_msg")})]})},r_=e=>e.filter((({status:e})=>"removed"!==e)).length;var s_=n(91578),o_=n(16396),l_=n(91032),c_=n(64467),d_=n(3090);var __;const u_=["text/*",".csv",".txt"],m_="invite_user_dialog_button",p_="invite_user_dialog_title",g_="_common_dialog_dismiss_button",h_="team_invite_dialog_import_example_text",y_="team_invite_dialog_input_counter",b_="team_invite_dialog_input_counter_negative",x_="team_invite_dialog_input_counter_negative_tax",S_="team_invite_dialog_input_counter_negative_vat",f_="team_invite_dialog_input_counter_special",v_="team_invite_dialog_import_description",C_="invite_user_dialog_input_label",E_="team_invite_dialog_input_label_sending",Z_="team_invite_dialog_input_placeholder",D_="team_invite_dialog_invitations_counter",T_="team_members_invite_success_message_with_count",k_="team_members_invite_success_message_with_added_seats",I_="team_members_invite_success_message_with_added_seats_one_invite",A_="team_members_invite_error_message",w_="_common_generic_error",N_="team_account_teamplan_upgrade_premium_buy_more_seats_than_cap",O_="team_dialog_starter_limit_warning",R_="team_dialog_starter_change_plan",L_="team_dialog_standard_limit_warning",M_="team_members_invite_error_payment_failed_card_declined",B_="team_account_teamplan_hint_cannot_add_seats",P_="team_members_invite_error_message_no_free_slot",U_="team_invite_result_dialog_refused_member_reason_no_free_slot_free_plan",X_=({lee:e,isFreeTrial:t,isOpen:n,slotsTaken:a,slotsTotal:c,exclude:d,preFilledEmails:_,closeInviteDialog:u,handleInviteCompleteSuccess:g,handleInvitePartialSuccess:h,setShowActivationDialog:y})=>{const{routes:b}=(0,i.Xo)(),{translate:x}=(0,p.Z)(),{showToast:f}=(0,o.pm)(),{reportTACError:v}=H(),{proposeMembers:C}=(0,q.u)(_a.L),E=(0,fe.Y)(),{billingDetails:T,amountToPay:k,amountToTax:I,onSeatCountChange:A}=fi(null),[w,N]=(0,r.useState)(!1),[O,R]=(0,r.useState)(!1),[L,M]=(0,r.useState)(null!=_?_:new Set([])),[B,P]=(0,r.useState)(0),[U,X]=(0,r.useState)(0),[z,F]=(0,r.useState)(0),[G,V]=(0,r.useState)(0),[W,$]=(0,r.useState)(!1),K=Bl();(0,r.useEffect)((()=>{R(w)}),[w]),(0,r.useEffect)((()=>{M(null!=_?_:new Set([]))}),[_]),(0,r.useEffect)((()=>{L.size||F(0)}),[L]);const Y=()=>{u(),N(!1),P(0),X(0)},Q=async(t,n)=>{var a;n=null!=(a=n)?a:0,X(t.length),N(!0);const i=n+Math.min(t.length-n,500),r=t.slice(n,i),s={};try{const n=await(async t=>{if(!(0,Lr.v0)(e.globalState)){const e=new Error(Rr.N);throw v(e),e}if(!e.apiMiddleware.teamPlans)throw new Error("we want to remove this middleware but we can't just yet!");const n=await C({proposedMemberLogins:t,force:!0});if((0,j.hx)(n)){const e=function(e){switch(e){case o_.$0.NoFreeSlot:return P_;case o_.$0.NoFreeSlotFreePlan:return U_;case o_.$0.PaymentFailed:return M_;case o_.$0.CannotAddSeatDuringGracePeriod:return B_;case o_.$0.UnsupportedPaymentMean:return M_;case o_.$0.CannotProposeMemberAbove10:return O_;default:return A_}}(n.error.tag);throw f({description:x(e),closeActionLabel:x(g_),mood:"danger"}),new Error}return n.data})(r);if(P(i),(0,D.merge)(s,n),i<t.length)return Q(t,i);if((0,d_.e)(s)){h(s.proposedMembers,s.refusedMembers);const e=Object.keys(s.proposedMembers).length,t=Object.keys(s.refusedMembers).length;(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Complete,inviteCount:e,inviteFailedCount:t,inviteResentCount:0,inviteSuccessfulCount:e-t,isImport:z>0,importSize:z,isResend:!1}))}else g(t),G<0?1===L.size?f({description:x(I_,{cost:x.price(T.currency,(k+I)/100)}),closeActionLabel:x(g_),mood:"brand"}):f({description:x(k_,{total:L.size,count:-G,cost:x.price(T.currency,(k+I)/100)}),closeActionLabel:x(g_),mood:"brand"}):f({description:x(T_,{count:L.size}),closeActionLabel:x(g_),mood:"brand"}),(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Complete,inviteCount:t.length,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:t.length,isImport:z>0,importSize:z,isResend:!1}));return Y()}catch(e){throw(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Error,inviteCount:L.size,inviteFailedCount:L.size,inviteResentCount:0,inviteSuccessfulCount:0,isImport:z>0,importSize:z,isResend:!1})),Y(),e}},J=e=>function(e){if(function(e){const t=e.match(/[\x00-\x09\x0e-\x1F]/g);return!!t&&t.length/e.length>.03}(e))return[];if(!e.includes("@"))return[e];return function(e){const t={};return e.forEach((e=>t[e]=!0)),Object.keys(t)}(e.match(/[^<> ,;:\t\n\r"']+@[a-zA-Z0-9_.-]+/g)||[])}(e).filter((e=>!L.has(e))),ee=e=>(0,xn.vV)(e)&&!(e=>!!d?.includes(e))(e),te=e=>{F(e.length),M(new Set([...L,...e]))},ne=e=>{v(e)},ae=[...L].filter((e=>!ee(e))).length;let ie=0===L.size||ae>0||G<0&&ti(-G)||W;(0,r.useEffect)((()=>{if(c){const e=c-(L.size-ae)-a;V(e),e<0?(A(-e),(E.status===s.rq.Success&&(0,Se.f1)(E.data)||K)&&$(!0)):$(!1)}}),[L,E,c,a]);const{loading:re,billingCountry:se}=Z();if(re)return __||(__=(0,S.tZ)(o.ZX,{}));const oe="US"===se?x_:S_,le=x(K?L_:O_);return(0,S.BX)(o.Vq,{isOpen:n,title:x(p_),closeActionLabel:x(g_),onClose:()=>{w||((0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Cancel,inviteCount:L.size,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:z>0,importSize:z,isResend:!1})),Y(),M(new Set([])))},"aria-describedby":"dialogContent",actions:{primary:{children:x(m_),onClick:async()=>{try{await Q([...L]),y(!0)}catch(e){(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Error,inviteCount:L.size,inviteFailedCount:L.size,inviteResentCount:0,inviteSuccessfulCount:0,isImport:z>0,importSize:z,isResend:!1})),f({description:x(w_),closeActionLabel:x(g_),mood:"danger"})}M(new Set([]))},disabled:ie,layout:"iconLeading",icon:"ItemEmailOutlined"}},children:[(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",overflowY:"auto",gap:"8px",marginBottom:"16px"},children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:x(w?E_:C_)}),(0,S.tZ)(l_.Z,{accept:u_,passClicksThrough:!0,onChange:e=>{te(J(e.join("\0")))},onError:ne,children:(0,S.tZ)(c_.L,{setIsOverlayVisible:R,placeholder:x(Z_),tags:[...L],isOverlayVisible:O,setTags:e=>{M(new Set(e))},formatToTags:J,validate:ee},"tags")}),W?(0,S.tZ)(o.ke,{title:(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.block.small",children:le}),(0,S.tZ)(i.rU,{to:b.teamAccountChangePlanRoutePath,children:x(R_)})]}),mood:"brand",icon:"FeedbackSuccessOutlined"}):(()=>{if(!c)return null;const e=G<0?ti(-G)?x(N_,{seatCap:Qa,salesEmail:Ja}):I?x(oe,{count:-G,total:c,cost:x.price(T.currency,(k+I)/100)}):x(b_,{count:-G,total:c,cost:x.price(T.currency,k/100)}):x(y_,{count:G,total:c}),n=x(f_,{total:c});let a=e;return t&&G<1&&(ie=G<0||ie,a=n),(0,S.tZ)(o.nv,{color:G<1?"ds.text.danger.quiet":"ds.text.positive.quiet",textStyle:"ds.body.reduced.regular",sx:{display:w?"none":"flex"},children:a})})()]}),(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column"},children:[(0,S.tZ)(o.nv,{color:"ds.text.positive.quiet",textStyle:"ds.body.reduced.regular",sx:{display:w?"flex":"none"},children:x(D_,{count:B,total:U})}),(0,S.tZ)("div",{sx:{display:w?"none":"flex"},children:(0,S.tZ)(l_.Z,{accept:u_,onChange:e=>{te(J(e.join("\0")))},onError:ne,children:(0,S.tZ)(o.nv,{as:"span",textStyle:"ds.title.section.medium",color:"ds.text.brand.quiet",sx:{cursor:"pointer"},children:x(v_)})})}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",sx:{display:w?"none":"flex"},children:x(h_)})]})]})};var z_=n(33392);const q_={INVITE_RESTRICTED:"team_invite_result_dialog_refused_member_reason_admin_restricted_markup",PRE_EXISTING_MP_USER:"team_invite_result_dialog_refused_member_reason_pre_existing_mp_user_markup",GENERIC_ERROR:"team_invite_result_dialog_refused_member_reason_generic_error_markup",EMAIL_DOES_NOT_MATCH_SSO_DOMAIN:"team_invite_result_dialog_refused_member_reason_EMAIL_DOES_NOT_MATCH_SSO_DOMAIN",ALREADY_MEMBER:"team_invite_result_dialog_refused_member_reason_already_member",ALREADY_MEMBER_OTHER_TEAM:"team_invite_result_dialog_refused_member_reason_already_member_other_team",HAS_AUTOMATIC_RENEW:"team_invite_result_dialog_refused_member_reason_has_automatic_renew",NO_FREE_SLOT_FREE_PLAN:"team_invite_result_dialog_refused_member_reason_no_free_slot_free_plan",SSO_ALREADY_ACTIVATED:"team_invite_result_dialog_refused_member_reason_sso_already_activated",PENDING_DEACTIVATION_DOMAIN_DOES_NOT_MATCH:"team_invite_result_dialog_refused_member_reason_pending_deactivation_domain_does_not_match"};let j_=function(e){return e.SSO_ALREADY_ACTIVATED="sso_already_activated",e.USER_HAS_MASTER_PASSWORD="USER_HAS_MASTER_PASSWORD",e}({});const F_=e=>{switch(e){case q_.INVITE_RESTRICTED:return z_.Iu.markup(q_.INVITE_RESTRICTED,{helpCenter:ee.Iw});case q_.PRE_EXISTING_MP_USER:return z_.Iu.markup(q_.PRE_EXISTING_MP_USER,{ssoLimitations:ee.Iw,dashlaneSupport:ee.Bw});default:return z_.Iu.markup(q_.GENERIC_ERROR,{helpCenter:ee.Bw})}},G_="inviteResultDialogHeader--v_8lOJQXCj",V_="refusedMember--SNbCU5FzB1",H_="reason--jFHJ7kk1d9",W_="irDialogIcon--Rx0OQmu57r";var $_;const K_={invitedMembers:{},refusedMembers:{},show:!1},Y_=()=>{const[e,t]=r.useState(K_);return{invitePartialSuccessState:e,setInvitePartialSuccessState:t,handleInvitationResultClosed:()=>{t(K_)}}},Q_=({teamId:e,isOpen:t,invitedMembers:n,refusedMembers:a,onClose:i})=>{const{translate:s}=(0,p.Z)(),[o,l]=r.useState([]),[c,d]=r.useState([]),_=Object.keys(n).length,u=Object.keys(a).length,{teamSettings:m,teamSettingsLoading:g}=ye(e),h=m?.ssoEnabled;return r.useEffect((()=>{if(g)return;const e=[],t=[];Object.keys(a).forEach((n=>{const i=a[n];i!==j_.SSO_ALREADY_ACTIVATED||h?i===j_.USER_HAS_MASTER_PASSWORD&&h?t.push({email:n,key:q_.PRE_EXISTING_MP_USER,errorType:i}):e.push({email:n,errorType:i}):t.push({email:n,key:q_.INVITE_RESTRICTED,errorType:i})})),l(e),d(t)}),[g,h,a]),(0,S.BX)(re.VqE,{closeIconName:s("_common_dialog_dismiss_button"),isOpen:t,onClose:i,ariaDescribedby:"refusedList",children:[(0,S.tZ)(re.$N8,{title:s("team_invite_result_dialog_title")}),(0,S.tZ)(re.a7O,{children:g?$_||($_=(0,S.tZ)(ai.Z,{size:30})):(0,S.BX)(S.HY,{children:[_?(0,S.BX)("div",{className:"successfulInvitesRatio--Jbd0Eax7op",children:[(0,S.tZ)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNNiA5TDcuOTU5MjggMTFMMTEuOTc5NiA3TTAuNSA5QzAuNSA0LjMwNTQ1IDQuMzA2MyAwLjUgOSAwLjVDMTMuNjkzNyAwLjUgMTcuNSA0LjMwNTQ1IDE3LjUgOUMxNy41IDEzLjY5NDYgMTMuNjkzNyAxNy41IDkgMTcuNUM0LjMwNjMgMTcuNSAwLjUgMTMuNjk0NiAwLjUgOVoiIHN0cm9rZT0iIzIwQjQyMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=",className:W_}),(0,S.tZ)("span",{className:G_,children:s("team_invite_result_dialog_successful_invites_rate",{proposedMembers:_+u,invitedMembers:_})})]}):null,(0,S.BX)("div",{className:"refusedMemberListTitle--Omq1aAlxkx",children:[(0,S.tZ)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNNS41IDEyLjVMMTIuNSA1LjVNMTIuNSAxMi41TDUuNSA1LjVNMC41IDlDMC41IDQuMzA1ODcgNC4zMDU4NyAwLjUgOSAwLjVDMTMuNjk0MSAwLjUgMTcuNSA0LjMwNTg3IDE3LjUgOUMxNy41IDEzLjY5NDEgMTMuNjk0MSAxNy41IDkgMTcuNUM0LjMwNTg3IDE3LjUgMC41IDEzLjY5NDEgMC41IDlaIiBzdHJva2U9IiNGRjAwMkQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K",className:W_}),(0,S.tZ)("span",{id:"refusedList",className:G_,children:s("team_invite_result_dialog_refused_member_list_title",{count:u})})]}),(0,S.BX)("ul",{className:"refusedMemberList--pPxtCXVRX3",children:[o.map((e=>(0,S.BX)("li",{className:V_,children:[e.email,(0,S.BX)("span",{className:H_,children:[": ",q_[e.errorType.toUpperCase()]?s(q_[e.errorType.toUpperCase()]):s.markup(q_.GENERIC_ERROR,{helpCenter:ee.Bw},{linkTarget:"_blank"})]})]},e.email))),c.map((e=>(0,S.BX)("li",{className:V_,children:[e.email,(0,S.BX)("span",{className:H_,children:[": ",F_(e.key)]})]},e.email)))]})]})}),(0,S.tZ)(re.cNS,{primaryButtonTitle:s("team_invite_result_dialog_button_ok"),primaryButtonOnClick:i,secondaryButtonTitle:s("team_invite_result_dialog_button_help_center"),secondaryButtonOnClick:()=>(0,P.Yo)(ee.Bw)})]})};var J_=n(70141);function eu(){const[e,t]=(0,r.useState)(!0),[n,a]=(0,r.useState)(null),[i,s]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),c=(0,r.useCallback)((async(e,t)=>{try{const n=await he.C.requestInviteLinkToken({teamUuid:e,login:t});if(n.success)return n.data;l(n.error.code)}catch{l(J_.S)}return null}),[]);return{inviteLinkDataLoading:e,inviteLinkError:o,inviteLinkData:n,inviteLinkDataForAdmin:i,getInviteLinkData:(0,r.useCallback)((async e=>{t(!0);try{const t=await he.C.getInviteLink({teamKey:e});if(t.success)return a(t.data),t.data;l(t.error.code)}catch{l(J_.S)}finally{t(!1)}return null}),[]),requestInviteLinkToken:c,getInviteLinkDataForAdmin:(0,r.useCallback)((async()=>{t(!0);try{const e=await he.C.getInviteLinkForAdmin({});if(e.success)return s(e.data),e.data;l(e.error.code)}catch{l(J_.S)}finally{t(!1)}return null}),[]),createInviteLink:(0,r.useCallback)((async e=>{t(!0);try{const t=await he.C.createInviteLink({displayName:e});if(t.success)return t.data;l(t.error.code)}catch{l(J_.S)}finally{t(!1)}return null}),[]),changeInviteLinkTeamKey:(0,r.useCallback)((async()=>{t(!0);try{const e=await he.C.changeInviteLinkTeamKey({});if(e.success)return e.data;l(e.error.code)}catch{l(J_.S)}finally{t(!1)}return null}),[]),toggleInviteLink:(0,r.useCallback)((async e=>{t(!0);try{const t=await he.C.toggleInviteLink({disabled:e});if(t.success)return t.data;l(t.error.code)}catch{l(J_.S)}finally{t(!1)}return null}),[])}}const tu="_common_toast_close_label",nu=({showActivationDialog:e,setShowActivationDialog:t,setShowSharingDialog:n})=>{const{toggleInviteLink:a,createInviteLink:i,getInviteLinkDataForAdmin:r}=eu(),{setAsInteracted:s}=(0,ce.d)(se.O.ActivateInviteLink),{translate:l}=(0,p.Z)(),{showToast:c}=(0,o.pm)(),d=Hi();return d?(0,S.tZ)(o.Vq,{title:l("team_activation_dialog_title"),closeActionLabel:l("_common_dialog_dismiss_button"),isOpen:e,onClose:()=>t(!1),actions:{primary:{children:l("team_activation_dialog_activate_button"),onClick:async()=>{s?.(),t(!1);const e=await r();e?.teamKey?await a(!1):(await i(d),c({description:l("team_activation_dialog_notification"),mood:"brand",closeActionLabel:l(tu)})),n(!0)}},secondary:{children:l("team_activation_dialog_notrightnow_button"),onClick:()=>{s?.(),t(!1),c({description:l("team_activation_dialog_cancel_notification"),mood:"brand",closeActionLabel:l(tu)})}}},children:(0,S.tZ)(o.nv,{sx:{marginBottom:"15px"},children:l("team_activation_dialog_paragrah")})}):null};var au=n(33090);const iu=({showSharingDialog:e,setShowSharingDialog:t})=>{const{translate:n}=(0,p.Z)(),{inviteLinkDataForAdmin:a,getInviteLinkDataForAdmin:i}=eu(),s=(0,Rn.V)();return(0,r.useEffect)((()=>{i()}),[i]),(0,S.BX)(re.VqE,{closeIconName:n("_common_dialog_dismiss_button"),isOpen:e,onClose:()=>t(!1),children:[(0,S.tZ)(re.$N8,{title:n("team_sharing_invite_dialog_title")}),(0,S.BX)(re.a7O,{children:[(0,S.tZ)(re.nvN,{sx:{marginBottom:"15px"},color:re.colors.dashGreen01,children:n("team_sharing_invite_dialog_paragrah")}),(0,S.tZ)(re.nvN,{sx:{marginBottom:"15px",fontWeight:"600"},color:re.colors.dashGreen01,children:(0,ee.cI)(a?.teamKey)})]}),(0,S.tZ)(re.cNS,{children:(0,S.tZ)(au.q,{copyValue:(0,ee.cI)(a?.teamKey),buttonText:n("team_sharing_invite_dialog_copy_link"),onClick:()=>{navigator.clipboard.writeText((0,ee.cI)(a?.teamKey)),s.showAlert(n("team_sharing_invite_dialog_copied_notification"),re.BLW.SUCCESS)}})})]})};var ru=n(35214);const su=()=>{const{data:e,status:t}=(0,c.k)(ru.t,"inviteLinkData"),{data:n,status:a}=(0,c.k)(d.o,"getTeamName"),{data:i,status:r}=(0,c.k)(d.o,"getTeamId"),{requestUserInviteTokenSending:s}=(0,q.u)(ru.t),{toggleInviteLink:o}=(0,q.u)(ru.t);if(t===L.rq.Error||a===L.rq.Error||r===L.rq.Error||null===i?.teamId||null===e)return{status:L.rq.Error};if(t===L.rq.Loading||a===L.rq.Loading||r===L.rq.Loading)return{status:L.rq.Loading};const l=i.teamId;return{status:t,teamKey:e.teamKey,enabled:e.enabled,sendRequestInviteToken:async e=>{try{await s({login:e,teamUuid:l})}catch(e){throw new Error(`sendRequestInviteToken fetchData: failed with error: ${e}`)}},sendToggleInviteLink:async e=>{try{await o({enabled:e,teamName:n})}catch(e){throw new Error(`sendToggleInviteLink fetchData: failed with error: ${e}`)}}}},ou="_common_toast_close_label",lu=({isOpen:e,onCancel:t,onInviteLinkActivation:n})=>{const{translate:a}=(0,p.Z)(),{showToast:i}=(0,o.pm)(),r=su(),{setAsInteracted:s}=(0,ce.d)(se.O.ActivateInviteLink);return r.status!==L.rq.Success?null:(0,S.tZ)(o.Vq,{isOpen:e,onClose:t,closeActionLabel:a("_common_dialog_dismiss_button"),title:a("team_activation_dialog_title"),actions:{primary:{children:a("team_activation_dialog_activate_button"),onClick:async()=>{await r.sendToggleInviteLink(!0),n&&n(),i({mood:"brand",description:a("team_activation_dialog_notification"),closeActionLabel:a(ou)}),s?.()}},secondary:{children:a("team_activation_dialog_notrightnow_button"),onClick:()=>{t(),i({mood:"brand",description:a("team_activation_dialog_cancel_notification"),closeActionLabel:a(ou)}),s?.()}}},children:(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a("team_activation_dialog_paragrah")})})};var cu;const du="team_sharing_invite_dialog_copy_link",_u="_common_dialog_dismiss_button",uu=({isOpen:e,onClose:t})=>{const{translate:n}=(0,p.Z)(),{showToast:a}=(0,o.pm)(),i=su(),r=i.status===L.rq.Success?i.teamKey:void 0,s=(0,ee.cI)(r),l=async()=>{r&&(await navigator.clipboard.writeText(s),a({mood:"brand",description:n("team_sharing_invite_dialog_copied_notification"),closeActionLabel:n(_u)}))};return(0,S.BX)(o.Vq,{isOpen:e,onClose:()=>{t()},closeActionLabel:n(_u),title:n("team_sharing_invite_dialog_title"),actions:{primary:{children:r?n(du):cu||(cu=(0,S.tZ)(o.ZX,{mood:"inverse"})),icon:r?"ActionCopyOutlined":void 0,layout:"iconLeading",onClick:l}},children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:n("team_sharing_invite_dialog_paragrah")}),(0,S.tZ)(o.qo,{label:n("team_sharing_invite_dialog_input_label"),value:s,readOnly:!0,actions:[{label:n(du),iconName:"ActionCopyOutlined",onClick:l}],sx:{overflow:"hidden"}})]})},mu=({lee:e,teamId:t,isFreeTrial:n,totalSeatCount:a,numSeatsTaken:i,excludedInviteMembers:s,shouldShowInviteDialog:o,handleCloseInviteDialog:l,handleInvitePartialSuccess:c,handleInviteCompleteSuccess:d,invitePartialSuccessState:_,handleInvitationResultClosed:u,preFilledInviteEmails:m})=>{const{inviteLinkDataForAdmin:p,inviteLinkDataLoading:g,getInviteLinkDataForAdmin:h}=eu(),y=(0,xe.o)(s_.G.WebOnboardingInviteLinkTacMigration),b=su(),[x,f]=(0,r.useState)(!1),[v,C]=(0,r.useState)(!1),{interacted:E}=(0,ce.d)(se.O.ActivateInviteLink);if((0,r.useEffect)((()=>{!1===y&&h()}),[h,y]),null==y)return null;const Z=b.status===L.rq.Success?b:void 0,D=y?!E&&x&&!Z?.teamKey&&b.status===L.rq.Success:!E&&x&&!g&&!p?.teamKey;return(0,S.BX)(S.HY,{children:[o?(0,S.tZ)(X_,{lee:e,slotsTotal:a,slotsTaken:i,exclude:s,isFreeTrial:n,isOpen:o,closeInviteDialog:l,handleInvitePartialSuccess:c,handleInviteCompleteSuccess:e=>{(y?!0===Z?.enabled:!1===p?.disabled)&&C(!0),d(e)},preFilledEmails:m,setShowActivationDialog:f}):null,D?y?(0,S.tZ)(lu,{isOpen:x,onCancel:()=>{f(!1)},onInviteLinkActivation:()=>{f(!1),C(!0)}}):(0,S.tZ)(nu,{showActivationDialog:x,setShowActivationDialog:f,setShowSharingDialog:C}):null,v?y?(0,S.tZ)(uu,{isOpen:v,onClose:()=>{C(!1)}}):(0,S.tZ)(iu,{showSharingDialog:v,setShowSharingDialog:C}):null,_.show?(0,S.tZ)(Q_,{teamId:t,isOpen:_.show,onClose:u,invitedMembers:_.invitedMembers,refusedMembers:_.refusedMembers}):null]})},pu=({lee:e,isOpen:t,onClose:n,prefilledEmails:a,teamMembers:i,handleInviteCompleteSuccess:r})=>{const{invitePartialSuccessState:s,setInvitePartialSuccessState:o,handleInvitationResultClosed:l}=Y_(),{teamId:c}=(0,be.fV)(),d=(0,X.C)(),_=(0,u.s)(),m=r_(i);return d&&_?(0,S.tZ)(mu,{lee:e,teamId:c,totalSeatCount:_.seatsNumber,numSeatsTaken:m,excludedInviteMembers:i.filter((({status:e})=>"removed"!==e)).map((({login:e})=>e)),isFreeTrial:d.isFreeTrial,shouldShowInviteDialog:t,handleCloseInviteDialog:n,handleInvitePartialSuccess:(e,t)=>o({show:!0,invitedMembers:e,refusedMembers:t}),handleInviteCompleteSuccess:r,invitePartialSuccessState:s,handleInvitationResultClosed:l,preFilledInviteEmails:a}):null},gu=1e3,hu="_common_toast_close_label",yu=({domainName:e})=>{const{showToast:t}=(0,o.pm)(),[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),{translate:c}=(0,p.Z)();return(0,S.tZ)(o.zx,{mood:"neutral",intensity:"quiet",layout:"iconLeading",onClick:async()=>{let n;try{(0,m.Kz)(new l.UserClickEvent({button:l.Button.DownloadCsv})),a(!0),n=setTimeout((()=>{s(!0)}),2e3),await(async()=>{const t=[],n=await Hd(e,gu,0),a=Math.ceil(n.emailsImpactedCount/gu);t.push(...n.emails);const i=async(n=0)=>{const r=[];for(;n<a||(a-n)%5!=0;)r.push(Hd(e,gu,n*gu)),n+=1;const s=await Promise.all(r);t.push(...s.flatMap((e=>e.emails))),n<a&&i(n)};var r,s;await i(1),r=t,s=c.shortDate,(0,Ms.S)(((e,t)=>{let n=["email","domain","data_affected","incident_date","view_status"].join(",")+"\n";for(const a of e)for(const e of a.leaks)n+=[`"${a.email}"`,`"${e.domain}"`,`"${e.types.join(", ")}"`,`"${t((0,Rt.Z)(e.breachDateUnix))}"`,`"${a.viewStatus}"`].join(",")+"\n";return n})(r,s),"DWI-report.csv","text/csv;charset=utf-8")})(),t({description:c("team_dark_web_insights_download_csv_success"),closeActionLabel:c(hu)})}catch(e){t({description:c("_common_generic_error"),mood:"danger",closeActionLabel:c(hu)})}finally{clearTimeout(n),a(!1),s(!1)}},icon:"DownloadOutlined",disabled:n,isLoading:i,children:c("team_dark_web_insights_download_csv")})};var bu=n(63748);const xu=({breach:e,id:t,isFirstInGroup:n=!1,isLastInGroup:a=!1,opened:i=!1})=>{const{translate:r}=(0,p.Z)();return(0,S.BX)("tr",{id:t,sx:{backgroundColor:re.colors.grey06,borderLeft:`3px solid ${re.colors.dashGreen00}`,display:i?"table-row":"none",height:"44px","> td":{verticalAlign:"middle",padding:"5px 16px",paddingTop:n?"18px":void 0,paddingBottom:a?"18px":void 0}},children:[(0,S.tZ)("td",{colSpan:2,children:(0,S.tZ)(re.nvN,{size:"small",as:"div",sx:{fontWeight:"light",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},children:(0,S.BX)("div",{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},children:[e.domain&&""!==e.domain?(0,S.tZ)(re.plG,{size:"small",text:e.domain,backgroundColor:re.colors.dashGreen00}):null,(0,S.tZ)("div",{title:e.domain,sx:{paddingLeft:"8px",width:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.domain})]})})}),(0,S.tZ)("td",{children:(0,S.tZ)(re.nvN,{sx:{"::first-letter":{textTransform:"uppercase"},textTransform:"lowercase"},size:"x-small",color:re.colors.grey00,children:(s=e.types,s.map((e=>r(fu[e]))).join(", "))})}),(0,S.tZ)("td",{colSpan:3,children:(0,S.tZ)(re.nvN,{size:"x-small",as:"span",color:re.colors.grey00,children:(0,S.tZ)(Ys.v,{date:(0,Rt.Z)(e.breachDateUnix),format:Vt._T.ll})})})]});var s},Su={borderBottom:`1px solid ${re.colors.dashGreen05}`,height:"55px",position:"relative",borderLeft:"3px solid white","&:hover,:focus-visible":{cursor:"pointer",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.16)"},'&[aria-expanded="true"]':{borderLeftColor:re.colors.dashGreen00},"> td":{verticalAlign:"middle",padding:"0 16px"}},fu={[bu.hb.Password]:"team_dark_web_insights_incident_data_type_password",[bu.hb.CreditCard]:"team_dark_web_insights_incident_data_type_credit_card",[bu.hb.IPAddress]:"team_dark_web_insights_incident_data_type_ip_address",[bu.hb.MailingAddress]:"team_dark_web_insights_incident_data_type_mailing_address",[bu.hb.Phone]:"team_dark_web_insights_incident_data_type_phone",[bu.hb.Email]:"team_dark_web_insights_incident_data_type_email",[bu.hb.Social]:"team_dark_web_insights_incident_data_type_social",[bu.hb.GeoLocation]:"team_dark_web_insights_incident_data_type_geolocation",[bu.hb.UserName]:"team_dark_web_insights_incident_data_type_username",[bu.hb.PersonalInfo]:"team_dark_web_insights_incident_data_type_personalinfo"},vu=({userReport:e,isPendingMember:t=!1,onInviteAction:n,shouldShowInviteButton:a})=>{const{translate:i}=(0,p.Z)(),[s,l]=(0,r.useState)(!1),c=e.leaks?.map(((t,n)=>`${e.email}-${n}`)).join(" ");return(0,S.BX)(S.HY,{children:[(0,S.BX)("tr",{id:e.email,tabIndex:0,"aria-expanded":s,"aria-controls":c,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),l((e=>!e)))},onClick:()=>{l((e=>!e))},sx:Su,children:[(0,S.tZ)("td",{children:(0,S.tZ)(re.nvN,{size:"x-small",as:"span",children:e.email})}),(0,S.tZ)("td",{children:(0,S.BX)(o.kC,{children:[(0,S.tZ)(re.nvN,{size:"medium",as:"span",sx:{fontWeight:"bold"},children:e.breachesCount}),e.viewStatus===bu.j8.New?(0,S.tZ)(re.P_k,{dot:!0,ariaLabel:i("team_new_label")}):null]})}),(0,S.tZ)(re.nvN,{size:"x-small",as:"td",color:re.colors.grey00,sx:{maxWidth:"160px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textTransform:"lowercase","::first-letter":{textTransform:"uppercase"}},children:(e=>{const t=e.leaks.map((e=>e.types.map((e=>i(fu[e])))));return[...new Set(t.flat())].join(", ")})(e)}),(0,S.tZ)("td",{children:(0,S.tZ)(re.nvN,{size:"x-small",as:"span",color:re.colors.grey00,children:(0,S.tZ)(Ys.v,{date:(0,Rt.Z)(e.leaks[0].breachDateUnix),format:Vt._T.ll})})}),(0,S.tZ)("td",{children:a?(0,S.tZ)(re.zxk,{onClick:()=>{n(e.email)},type:"button",nature:"secondary",children:i("team_dark_web_insights_incident_summary_invite_button")}):(0,S.tZ)(re.nvN,{size:"x-small",as:"span",color:re.colors.grey00,children:i(t?"team_dark_web_insights_incident_summary_pending":"team_dark_web_insights_incident_summary_member")})}),(0,S.tZ)("td",{"aria-label":i("team_dark_web_insights_incident_summary_expand"),children:(0,S.tZ)(re.veu,{sx:{transform:s?"scale3D(1, -1, 1)":"scale3D(1, 1, 1)"}})})]},e.email),e.leaks.map(((t,n,a)=>{const i=`${e.email}-${t.domain}-${t.breachDateUnix}`;return(0,S.tZ)(xu,{id:i,breach:t,opened:s,isFirstInGroup:0===n,isLastInGroup:n===a.length-1},i)}))]})},Cu=({emailsToInvite:e,reports:t,isLoading:n,pendingMembers:a,onInviteAction:i})=>{const{translate:r}=(0,p.Z)(),s=[{headerLabel:r("team_dark_web_insights_table_header_email_affected"),headerKey:"email-affected"},{headerLabel:r("team_dark_web_insights_table_header_incidents"),headerKey:"incidents"},{headerLabel:r("team_dark_web_insights_table_header_data_affected"),headerKey:"data-affected"},{headerLabel:r("team_dark_web_insights_table_header_last_incident"),headerKey:"last-incident"},{headerLabel:r("team_dark_web_insights_table_header_member_status"),headerKey:"member-status"},{headerLabel:"",headerKey:"actions"}];return(0,S.BX)("div",{sx:{minWidth:"100%",minHeight:"600px"},children:[n?(0,S.tZ)("div",{sx:{display:"block",width:"950px",height:"600px",position:"absolute",textAlign:"center"},children:(0,S.tZ)(o.ZX,{sx:{position:"relative",top:"50%"},size:120})}):null,(0,S.BX)("table",{sx:{minWidth:"100%"},children:[(0,S.tZ)(Ws,{columns:s}),(0,S.tZ)("tbody",{sx:n?{opacity:"0.5"}:{},children:t.map((t=>(0,S.tZ)(vu,{userReport:t,onInviteAction:i,isPendingMember:a.includes(t.email),shouldShowInviteButton:e.includes(t.email)},t.email)))})]})]})},Eu=({label:e,labelGridArea:t,title:n,titleGridArea:a})=>(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.nv,{sx:{gridArea:t},textStyle:"ds.specialty.monospace.small",color:"ds.text.warning.quiet",children:n}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",sx:{gridArea:a},children:e})]}),Zu=({gridArea:e})=>(0,S.tZ)("div",{sx:{gridArea:e,backgroundColor:"ds.border.neutral.quiet.idle",height:"100%",width:"1px",alignSelf:"center"}});var Du,Tu;const ku=({reports:e,suggestedInvitees:t,onInviteAll:n})=>{const{translate:a}=(0,p.Z)();return(0,S.BX)(o.Zb,{sx:{marginBottom:"24px"},children:[(0,S.tZ)(o.X6,{as:"h3",sx:{marginBottom:"24px"},children:a("team_dark_web_insights_summary_title")}),(0,S.BX)(re.T5p,{gridTemplateColumns:"1fr 1px 1fr 1px 1fr max-content",gridTemplateAreas:'"label-0 divider-left label-1 divider-right label-2 invite-all" "title-0 divider-left title-1 divider-right title-2 invite-all"',alignItems:"center",sx:{columnGap:"16px",justifyContent:"center"},children:[(0,S.tZ)(Eu,{labelGridArea:"label-0",label:a("team_dark_web_insights_summary_employees_affected"),titleGridArea:"title-0",title:e.emailsImpactedCount}),Du||(Du=(0,S.tZ)(Zu,{gridArea:"divider-left"})),(0,S.tZ)(Eu,{labelGridArea:"label-1",label:a("team_dark_web_insights_summary_total_incidents"),titleGridArea:"title-1",title:e.leaksCount}),Tu||(Tu=(0,S.tZ)(Zu,{gridArea:"divider-right"})),(0,S.tZ)(Eu,{labelGridArea:"label-2",label:a("team_dark_web_insights_summary_not_protected"),titleGridArea:"title-2",title:a("team_dark_web_insights_summary_employee_invitation",{count:t.length})}),(0,S.tZ)(re.dDn,{gridArea:"invite-all",alignSelf:"center",children:(0,S.tZ)(o.zx,{onClick:n,children:a("team_dark_web_insights_summary_invite_all_button")})})]})]})};var Iu,Au;const wu="team_dark_web_insights_table_pagination_page_size",Nu=[15,50,100],Ou=({lee:e,domainName:t})=>{const{translate:n}=(0,p.Z)(),a=(0,Rn.V)(),{teamId:i}=(0,be.fV)(),{teamMembers:s,refreshTeamMembers:c}=(e=>{const[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(null),l=(0,r.useCallback)((async t=>{if(!t?.signal?.aborted)if(null!==e){n(!0);try{const t=await(0,ge.YY)({teamId:e});i(t)}catch(e){const t=new Error(`useTeamMember: ${e}`);o(t)}finally{n(!1)}}else o(new Error("No team id provided"))}),[e]);return(0,r.useEffect)((()=>{const e=new AbortController;return l(),()=>{e.abort()}}),[l]),{teamMembersLoading:t,teamMembersError:s,teamMembers:a,refreshTeamMembers:l}})(i),{openDialog:d,shouldShowFrozenStateDialog:_}=(0,I.Ub)(),[u,g]=(0,r.useState)(!0),[h,y]=(0,r.useState)(null),[b,x]=(0,r.useState)(!1),[f,v]=(0,r.useState)(1),[C,E]=(0,r.useState)(15),{unseen:Z,setAsSeen:D}=(0,ce.m)(se.O.TacDarkWebInsightsNewBadge),[T,k]=(0,r.useState)(!1),[A,w]=(0,r.useState)(new Set([])),N=s.filter((e=>["pending","proposed"].includes(e.status))).map((e=>e.login)),O=s.filter((e=>["pending","proposed","accepted"].includes(e.status))).map((e=>e.login)),R=(0,r.useMemo)((()=>{var e;return null!=(e=h?.allImpactedEmails.filter((e=>!O.includes(e))))?e:[]}),[h?.allImpactedEmails,O]);(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacDarkWebInsights)}),[]);const L=(0,r.useCallback)((async(e,t,i)=>{x(!0);try{const n=await Hd(e,i,i*(t-1));y(n),v(t),E(i),(0,m.Kz)(new l.UserLoadDarkWebInsightsResultsEvent({}))}catch{a.showAlert(n("team_dark_web_insights_generic_error"),re.BLW.ERROR)}finally{g(!1),x(!1)}}),[]);(0,r.useEffect)((()=>{L(t,1,C)}),[t]),(0,r.useEffect)((()=>{Z&&h?.emails&&D()}),[Z,D,h?.emails]);const M=(0,r.useCallback)((()=>{_?d():R.length<=0||(k(!0),(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!1,isResend:!1})),w(new Set(R)))}),[R]);return(0,S.BX)(S.HY,{children:[u?Iu||(Iu=(0,S.tZ)(a_,{})):null,!u&&h?.emails?0===h.leaksCount?(0,S.tZ)(Yd,{domainName:t}):(0,S.BX)(S.HY,{children:[(0,S.tZ)(ku,{reports:h,suggestedInvitees:R,onInviteAll:M}),(0,S.BX)(o.Zb,{children:[(0,S.BX)("div",{sx:{display:"flex",justifyContent:"space-between",marginBottom:"24px",alignItems:"center"},children:[(0,S.tZ)(o.X6,{as:"h3",children:n("team_dark_web_insights_table_title")}),(0,S.tZ)(yu,{domainName:t})]}),(0,S.tZ)(Cu,{reports:h.emails,isLoading:b,pendingMembers:N,emailsToInvite:R,onInviteAction:e=>{_?d():(k(!0),(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!1,isResend:!1})),w(new Set([e])))}}),(0,S.BX)(re.T5p,{alignItems:"center",gridTemplateColumns:"1fr auto 1fr",sx:{paddingTop:6,paddingBottom:3},children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:n("team_dark_web_insights_table_pagination_item_count",{first:C*(f-1)+1,last:Math.min(C*(f-1)+C,h.emailsImpactedCount),total:h.emailsImpactedCount})}),(0,S.tZ)(re.tlE,{totalPages:Math.ceil(h.emailsImpactedCount/C),currentPage:f,onPageChange:e=>L(t,e,C)},f),(0,S.BX)(o.h_,{children:[(0,S.tZ)(o.sB,{showCaret:!0,intensity:"supershy",mood:"neutral",size:"small",sx:{marginLeft:"auto"},children:n(wu,{pageSize:C})}),(0,S.tZ)(o.Nv,{children:Nu.map((e=>(0,S.tZ)(o.hP,{label:n(wu,{pageSize:e}),onSelect:()=>e!==C&&L(t,1,e)},e)))})]})]}),(0,S.tZ)(pu,{lee:e,isOpen:T,prefilledEmails:A,onClose:()=>{k(!1),w(new Set([]))},handleInviteCompleteSuccess:()=>c(),teamMembers:s})]})]}):null,u||h?.emails||""===t?null:Au||(Au=(0,S.tZ)(i_,{}))]})};var Ru,Lu,Mu=n(15622);const Bu=({lastVerificationAttemptDateUnix:e,onRetry:t})=>{const{translate:n}=(0,p.Z)();return(0,S.BX)(o.kC,{justifyContent:"space-between",flexDirection:"column",gap:5,sx:{margin:"30px 0",paddingLeft:"24px",borderLeft:`solid 2px ${re.colors.grey00}`},children:[(0,S.BX)(re.nvN,{size:"x-small",bold:!0,children:[n("team_dwi_pending_latest_attempt_label")," ",e?(0,S.tZ)(Mu.Z,{date:(0,Rt.Z)(e)}):null]}),(0,S.tZ)(re.zxk,{type:"button",nature:"ghost",sx:{width:"fit-content",margin:0,padding:0,minWidth:0,height:"fit-content","&:hover":{backgroundColor:"transparent !important",textDecoration:"underline"},"&:focus":{backgroundColor:"transparent !important",textDecoration:"underline"}},onClick:t,children:(0,S.BX)(o.kC,{alignItems:"center",gap:2,children:[Ru||(Ru=(0,S.tZ)(re.DuK,{size:12})),(0,S.tZ)(re.nvN,{size:"x-small",color:re.colors.midGreen00,children:n("team_dwi_pending_retry_button_label")})]})})]})},Pu=({domain:e,isDeactivating:t,handleDeactivateDomain:n,handleRetryValidateDomain:a})=>{const{translate:i}=(0,p.Z)(),{dnsToken:{computedToken:r,challengeDomain:s}={computedToken:"",challengeDomain:""},lastVerificationAttemptDateUnix:l}=e;return(0,S.BX)(S.HY,{children:[Lu||(Lu=(0,S.tZ)(zd,{})),(0,S.BX)("div",{children:[(0,S.BX)(o.Zb,{sx:{margin:"24px 0"},children:[(0,S.tZ)(re.X6q,{size:"x-small",children:i("team_breach_report_domain_verify_pending_title")}),(0,S.tZ)(re.nvN,{sx:{marginBottom:"20px",marginTop:"10px"},color:re.colors.grey00,children:i("team_dwi_pending_verification_txt")}),(0,S.tZ)(Bu,{lastVerificationAttemptDateUnix:l,onRetry:a}),(0,S.BX)(o.kC,{gap:"16px",children:[(0,S.tZ)("div",{sx:{width:"70%"},children:(0,S.tZ)(re.oil,{fullWidth:!0,defaultValue:e.name,disabled:!0})}),(0,S.tZ)("div",{children:(0,S.tZ)(re.zxk,{type:"button",disabled:t,nature:"secondary",onClick:n,children:i("team_dwi_pending_cancel_button_label")})}),(0,S.tZ)("div",{children:(0,S.tZ)(re.zxk,{type:"button",disabled:!0,sx:{maxWidth:"120px"},children:i("team_breach_report_verifying_txt")})})]})]}),(0,S.tZ)(re.UQy,{size:"medium",children:(0,S.BX)(re.UlM,{open:!0,children:[(0,S.tZ)(re._Oh,{children:i("team_breach_report_domain_verify_dns_confirm_text")}),(0,S.tZ)(re.rN7,{children:(0,S.BX)(re.T5p,{gap:"24px",gridTemplateColumns:"1fr",gridAutoRows:"auto",children:[(0,S.tZ)(re.nvN,{size:"small",color:re.colors.grey00,children:i("team_breach_report_domain_verify_dns_description")}),(0,S.tZ)(Rd.x,{inputValue:s,textInputProps:{fullWidth:!0,readOnly:!0,label:i("team_settings_domain_verify_host")}}),(0,S.tZ)(Rd.x,{inputValue:r,textInputProps:{fullWidth:!0,readOnly:!0,label:i("team_settings_domain_verify_txt")}}),(0,S.tZ)(re.nvN,{size:"small",sx:{marginBottom:"20px"},color:re.colors.grey00,children:i("team_breach_report_domain_verify_dns_secondary_description")})]})})]})})]})]})},Uu={background:"ds.container.expressive.neutral.quiet.idle",color:"ds.text.neutral.standard",cursor:"default"},Xu=({label:e})=>(0,S.tZ)(re.OTy,{sx:{":hover":Uu,":focus":Uu,...Uu},disabled:!0,selected:!1,size:"medium",label:e}),zu=({activeDomain:e,verifiedDomains:t,selectVerifiedDomain:n})=>{var a;const i=(0,xe.o)(le.w.DwiMultipleDomainsProd),r=null!=(a=e?.name)?a:"",s=t.map((e=>(0,S.tZ)(re.OTy,{sx:Uu,onClick:()=>{r!==e.name&&n(e)},selected:r===e.name,size:"medium",label:e.name},e.name)));return(0,S.tZ)(re.G8v,{sx:{marginTop:"12px",padding:0},children:i&&t.length>1?s:""!==r?(0,S.tZ)(Xu,{label:r}):null})};var qu,ju;const Fu={display:"flex",justifyContent:"center",width:"100%",height:"100%",backgroundColor:`${re.colors.dashGreen06}`,alignItems:"center"},Gu=({lee:e})=>{const{translate:t}=(0,p.Z)(),{verifiedOrPendingDomain:{domain:n,status:a},verifiedDomains:i,updateDomainState:s,deactivateDomain:c,tryVerifyDomain:d,selectVerifiedDomain:_}=Cl();return(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacDarkWebInsights)}),[]),(0,S.BX)(S.HY,{children:[(0,S.BX)("div",{sx:{px:"48px",pt:"32px",pb:"12px"},children:[(0,S.tZ)(o.X6,{as:"h1",children:t("team_dashboard_dark_web_insights_heading")}),(0,S.tZ)(zu,{activeDomain:n,verifiedDomains:i,selectVerifiedDomain:_})]}),(0,S.tZ)(Ba,{fullWidth:!0,mainContent:(0,S.tZ)("div",{children:a===vl.Loading?qu||(qu=(0,S.tZ)("div",{sx:Fu,children:(0,S.tZ)(o.ZX,{size:120})})):null===n||a===vl.Start?(0,S.tZ)(Vd,{onSuccess:s,onError:s}):a===vl.Validated?(0,S.tZ)(Ou,{lee:e,domainName:n.name}):(0,S.tZ)(Pu,{domain:n,isDeactivating:a===vl.Deactivating,handleDeactivateDomain:c,handleRetryValidateDomain:d})}),secondaryContent:ju||(ju=(0,S.tZ)(sd,{}))})]})};var Vu=n(28233),Hu=n(54915),Wu=n(63567);let $u=function(e){return e.CRD="CRD",e.Nudges="nudges",e}({});function Ku(e,t,n){const a={campaign:"business-plus-upgrade",source:"product",medium:e};let i;if(n)i="trial";else if(t){var r;i=null!=(r={[_.lD.Business]:"business",[_.lD.Standard]:"standard",[_.lD.Starter]:"starter",[_.lD.Team]:"teams"}[t])?r:void 0}(0,P.Yk)(ee.q_,i?{...a,content:i}:a)}const Yu=({featureType:e})=>{const{translate:t}=(0,p.Z)(),n=(0,u.s)(),a=(0,X.C)();if(!a)return null;const i=a.isFreeTrial||a.isGracePeriod;return(0,S.BX)(o.Zb,{sx:{display:"flex",flexDirection:"column",gap:"24px",padding:"24px"},children:[(0,S.tZ)(o.Ct,{label:t("team_upsell_card_badge"),mood:"brand",iconName:"PremiumOutlined",layout:"iconLeading"}),(0,S.tZ)(o.kC,{sx:{flex:1,backgroundColor:"ds.container.agnostic.neutral.quiet",padding:"8px 48px",borderRadius:"8px"},justifyContent:"center",children:(0,S.tZ)("img",{role:"presentation",alt:"",src:Yr,sx:{objectFit:"contain",width:"100%",height:"auto"}})}),(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:t("team_upsell_card_title")}),(0,S.tZ)(es,{iconName:"FeatureAutomationsOutlined",description:"team_upsell_card_nudges_feature_description"}),(0,S.tZ)(es,{iconName:"RiskDetectionOutlined",description:"team_upsell_card_crd_feature_description"}),(0,S.tZ)(es,{iconName:"ItemPhoneHomeOutlined",description:"team_upsell_card_csm_feature_description"})]}),(0,S.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.ContactSales})),Ku(e,n?.spaceTier,i)},mood:"brand",intensity:"catchy",children:t("team_upsell_card_contact_button")})]})},Qu=()=>{const e=(0,u.s)();return e?.spaceTier===_.lD.BusinessPlus},Ju={CARD:{height:"100%",display:"flex",flexDirection:"column",padding:"24px",gap:"16px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},SUBCARD:{display:"flex",flexDirection:"column",padding:"24px",gap:"16px",backgroundColor:"ds.background.alternate",border:"none"},DISPLAY_FIELD_CONTAINER:{height:"100%",display:"flex",padding:"8px 16px",gap:"8px",backgroundColor:"ds.container.agnostic.neutral.quiet",border:"none"},DISPLAY_FIELD_WHITE:{height:"100%",display:"flex",padding:"2px 16px",gap:"8px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},VERTICAL_DIVIDER:{borderLeft:"1px solid ds.border.neutral.quiet.idle"}},em=n.p+"e40098c88b6006b99c9e.png";var tm;const nm=({showSetupTips:e})=>{const{translate:t}=(0,p.Z)();return(0,S.BX)(S.HY,{children:[(0,S.BX)(re.Zbd,{sx:(0,o.jM)([Ju.CARD,{gap:"8px"}]),children:[(0,S.tZ)(o.Ct,{label:t("team_risk_detection_presetup_secondary_card_badge"),iconName:"TipOutlined",layout:"iconLeading",mood:"brand",sx:{marginBottom:"8px"}}),tm||(tm=(0,S.tZ)("a",{href:ee.jp,target:"_blank",rel:"noreferrer",children:(0,S.tZ)("img",{src:em,alt:"",height:"142px"})})),(0,S.tZ)(o.Qj,{size:"small",isExternal:!0,target:"_blank",rel:"noreferrer",href:ee.jp,children:t("team_ace_risk_detection_helper_side_card_video_walkthrough_link")})]}),e?(0,S.BX)(re.Zbd,{sx:(0,o.jM)([Ju.CARD,{gap:"8px"}]),children:[(0,S.tZ)(o.Ct,{label:t("team_ace_risk_detection_helper_side_card_setup_tip_badge"),iconName:"TipOutlined",layout:"iconLeading",mood:"brand",sx:{marginBottom:"8px"}}),(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.standard",children:t("team_ace_risk_detection_helper_side_card_setup_tip_title")}),(0,S.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:t("team_ace_risk_detection_helper_side_card_setup_tip_description")})]}):null,(0,S.BX)(re.Zbd,{sx:(0,o.jM)([Ju.CARD,{gap:"8px"}]),children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{marginBottom:"8px"},children:t("team_ace_risk_detection_helper_side_card_useful_links_section_title")}),(0,S.tZ)(o.Qj,{size:"small",isExternal:!0,href:ee.i0,children:t("team_ace_risk_detection_helper_side_card_one_pager_link")}),(0,S.tZ)(o.Qj,{size:"small",isExternal:!0,href:ee.Zi,onClick:()=>{(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.SeeRiskDetectionSetupGuide}))},children:t("team_ace_risk_detection_helper_side_card_help_center_setup_guide")}),(0,S.tZ)(o.Qj,{size:"small",isExternal:!0,href:ee.RU,children:t("team_ace_risk_detection_helper_side_card_privacy_statement_link")})]})]})},am=({index:e})=>{const t=2*e;return(0,S.tZ)("hr",{sx:{display:"flex",alignSelf:"center",width:"60%",height:"0%",border:"1px solid ds.border.brand.quiet.idle",gridArea:`1 / ${t-2} / 1 / ${t-2+1}`}})},im=({stepTextContent:e,index:t})=>{const n=2*t;return(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.section.medium",color:"ds.text.brand.quiet",sx:{display:"flex",width:36,height:36,borderRadius:36,justifyContent:"center",alignItems:"center",alignSelf:"center",justifySelf:"center",flexShrink:0,textAlign:"center",border:"1px solid ds.border.brand.quiet.idle",color:"ds.text.brand.standard",gridArea:`1 / ${n+1} / 1 / ${n+2}`},children:t+1}),(0,S.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",sx:{display:"flex",textAlign:"center",alignSelf:"start",justifySelf:"center",gridArea:`2 / ${n+1} / 2 / ${n+2}`},children:e})]})},rm=({steps:e})=>(0,S.tZ)("div",{sx:{display:"grid",gridTemplateColumns:`repeat(${2*e.length-1}, 1fr)`,gridTemplateRows:"repeat(2, 1fr)",gridColumnGap:"0px",gridRowGap:"0px"},children:e.map(((e,t)=>(0,S.BX)(S.HY,{children:[t>0?(0,S.tZ)(am,{index:t}):null,(0,S.tZ)(im,{stepTextContent:e,index:t})]},`step-${e}`)))});var sm;const om=({setError:e})=>{const{translate:t}=(0,p.Z)(),n=Qu(),{generateMassDeploymentTeamKey:a}=(0,q.u)(Wu.i);return(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacRiskDetection)}),[]),(0,S.tZ)(Ba,{mainContent:(0,S.tZ)(re.Zbd,{sx:{minHeight:"680px",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"570px",gap:"16px"},children:[(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[(0,S.tZ)("img",{src:Hu,sx:{width:"240px",aspectRatio:"3/2"},alt:""}),(0,S.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",textStyle:"ds.title.section.large",sx:{letterSpacing:"-1px",textAlign:"center"},children:t("team_risk_detection_presetup_main_card_title")})]}),(0,S.BX)("div",{sx:{display:"flex",padding:"24px",flexDirection:"column",alignItems:"left",gap:"16px"},children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",sx:{textAlign:"center"},children:t("team_risk_detection_presetup_main_card_description_paragraph")}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",sx:{textAlign:"center"},children:t("team_risk_detection_presetup_main_card_action_feature_paragraph")})]}),(0,S.tZ)(rm,{steps:[t("team_risk_detection_presetup_main_card_steper_step_1"),t("team_risk_detection_presetup_main_card_steper_step_2"),t("team_risk_detection_presetup_main_card_steper_step_3"),t("team_risk_detection_presetup_main_card_steper_step_4")]}),(0,S.BX)(o.kC,{gap:"16px",flexDirection:"row",children:[(0,S.tZ)(o.zx,{as:"a",href:ee.jp,target:"_blank",rel:"noreferrer",size:"medium",layout:"labelOnly",mood:"brand",intensity:"quiet",children:t("team_risk_detection_presetup_main_card_demo_button")}),(0,S.tZ)(o.zx,{size:"medium",layout:"labelOnly",onClick:async()=>{(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:l.RiskDetectionSetupStep.StartSetup})),(0,j.hx)(await a())&&e()},children:t("team_risk_detection_presetup_main_card_start_setup_button")})]})]})}),fullWidth:!0,secondaryContent:(0,S.BX)(re.T5p,{gap:"16px",children:[sm||(sm=(0,S.tZ)(nm,{showSetupTips:!1})),n?null:(0,S.tZ)(Yu,{featureType:$u.CRD})]})})};var lm,cm=n(29270);const dm="team_risk_detection_setup_status_close_toast",_m=()=>(0,S.tZ)("div",{sx:Ju.VERTICAL_DIVIDER}),um=({token:e,setError:t})=>{const{updateLoggedOutMonitoringActiveStatus:n}=(0,q.u)(Wu.i),a=(0,c.k)(Wu.i,"getLastLogDate"),{showToast:r}=(0,o.pm)(),{translate:d}=(0,p.Z)(),{routes:_}=(0,i.Xo)(),u=async()=>{(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:l.RiskDetectionSetupStep.TurnOff}));const e=await n({active:!1});(0,j.d6)(e)?(t({hasError:!1,retryFunction:void 0}),r({description:d("team_risk_detection_setup_status_turned_off_toast"),closeActionLabel:d(dm)})):t({hasError:!0,retryFunction:async()=>{await u()}})},g=a.status===s.rq.Loading?"...":a.status===s.rq.Error?"-":null===a.data.lastLogDate?d("team_risk_detection_setup_status_no_logs_yet"):d.shortDate(new Date(a.data.lastLogDate),Vt.qG.L_LT);return(0,S.BX)(re.Zbd,{sx:Ju.CARD,children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:d("team_risk_detection_setup_status_title")}),(0,S.BX)(re.Zbd,{sx:(0,o.jM)([Ju.DISPLAY_FIELD_CONTAINER,{padding:"24px",justifyContent:"space-between"}]),children:[(0,S.BX)(o.kC,{flexDirection:"row",gap:"16px",children:[(0,S.BX)(o.kC,{flexDirection:"column",justifyContent:"center",gap:"4px",sx:{width:"170px"},children:[(0,S.tZ)(o.X6,{as:"h4",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.catchy",sx:{height:"18px"},children:d("team_risk_detection_setup_status_integration_status_title")}),(0,S.tZ)(o.Ct,{label:d("team_risk_detection_setup_status_integration_status_badge_label"),mood:"positive"})]}),lm||(lm=(0,S.tZ)(_m,{})),(0,S.BX)(o.kC,{flexDirection:"column",justifyContent:"center",gap:"4px",children:[(0,S.tZ)(o.X6,{as:"h4",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.catchy",sx:{height:"18px"},children:d("team_risk_detection_setup_status_last_log_date_title")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.monospace",color:"ds.text.neutral.standard",children:g})]})]}),(0,S.tZ)(o.zx,{as:cm.rU,to:`${_.teamActivityRoutePath}/recent?categoryFilters=${hs.s.RiskDetection}`,mood:"brand",intensity:"quiet",layout:"iconTrailing",icon:"ArrowRightOutlined",sx:{alignSelf:"end"},onClick:()=>{(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:l.RiskDetectionSetupStep.SeeActivityLogs}))},children:d("team_risk_detection_setup_status_see_logs_button")})]}),(0,S.tZ)(re.Zbd,{sx:Ju.DISPLAY_FIELD_CONTAINER,children:(0,S.tZ)(o.CW,{actions:[(0,S.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:async()=>{(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:l.RiskDetectionSetupStep.CopyConfigurationToken}));try{await navigator.clipboard.writeText(e),r({description:d("team_risk_detection_setup_status_token_copied_toast"),closeActionLabel:d(dm)})}catch{r({mood:"danger",description:d("_common_generic_error"),closeActionLabel:d(dm)})}},children:d("team_risk_detection_setup_guidelines_token_field_copy_button")},"CopyToken")],label:d("team_risk_detection_setup_guidelines_token_field_title"),value:e,sx:{width:"-webkit-fill-available"}})}),(0,S.tZ)(o.zx,{sx:{alignSelf:"end"},onClick:u,children:d("team_risk_detection_setup_status_integration_status_turn_off_button")})]})};var mm=n(85232);const pm={BASE:{height:"48px",width:"48px",borderRadius:"50%",position:"relative",borderWidth:"1px",borderStyle:"solid",borderColor:"ds.border.brand.standard.active"},COMPLETED:{backgroundColor:"ds.border.positive.quiet.idle",borderWidth:"0px"}},gm=({state:e,number:t})=>{const n="completed"===e;return(0,S.BX)(o.kC,{justifyContent:"center",alignItems:"center",flexWrap:"unset",sx:(0,o.jM)([pm.BASE,n?pm.COMPLETED:{}]),children:[(0,S.tZ)(o.nv,{color:n?"ds.text.positive.quiet":"ds.text.brand.standard",sx:{fontSize:"26px",fontWeight:"400"},children:t}),n?(0,S.tZ)(o.JO,{name:"FeedbackSuccessFilled",size:"medium",color:"ds.text.positive.quiet",sx:{position:"absolute",right:"0",top:"0"}}):null]})};var hm;const ym=({duration:e})=>(0,S.BX)(o.kC,{alignItems:"center",gap:"2px",children:[hm||(hm=(0,S.tZ)(o.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.quiet"})),(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:e})]}),bm=({title:e,duration:t,stepNumber:n,children:a,description:i,isDefaultOpen:s=!1,isCrdActive:l=!1,onCompleted:c})=>{const d=(0,r.useRef)(null),[_,u]=(0,r.useState)(s),[m,p]=(0,r.useState)(0),[g,h]=(0,r.useState)(l?"completed":"active"),y=(0,r.useCallback)((()=>{u((e=>!e))}),[]);(0,r.useEffect)((()=>{u(s)}),[s]),(0,r.useEffect)((()=>{if(!m||!_||!d.current)return;const e=new ResizeObserver((e=>{p(e[0].contentRect.height)}));return e.observe(d.current),()=>e.disconnect()}),[_,m]),(0,r.useEffect)((()=>{p(_&&d?.current?d.current.getBoundingClientRect().height:0)}),[_]);const b="completed"===g;return(0,S.BX)(o.Zb,{gap:"0px",children:[(0,S.BX)(o.kC,{as:"button",flexDirection:"row",alignItems:"center",gap:"8px",onClick:y,sx:{cursor:"pointer",background:"none"},children:[(0,S.tZ)(gm,{number:n,state:g}),(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e}),(0,S.tZ)(ym,{duration:t}),(0,S.tZ)(o.JO,{name:"CaretRightOutlined",size:"small",color:"ds.text.neutral.quiet",sx:{transition:"transform 0.4s linear",transform:`rotateZ(${_?"90deg":"0"})`}})]}),(0,S.tZ)("div",{sx:{overflow:"hidden",transition:"height 0.4s ease-in-out",height:m},children:(0,S.tZ)("div",{ref:d,children:(0,S.BX)("div",{sx:{pt:"16px"},children:[i?(0,S.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.standard",sx:{mt:"4px"},children:i}):null,a,!b&&c?(0,S.tZ)(o.kC,{justifyContent:"flex-end",sx:{pt:"16px"},children:(0,S.tZ)(o.zx,{mood:"brand",intensity:"quiet",onClick:()=>{c?.(),h("completed")},children:"Continue"})}):null]})})})]})},xm=({selectedBrowsers:e,setSelectedBrowsers:t})=>{const{translate:n}=(0,p.Z)(),a=n=>{if(e.includes(n.target.value)){const a=e.filter((e=>e!==n.target.value));0===a.length?t(["chrome"]):t(a)}else t([...e,n.target.value])};return(0,S.BX)(o.Zb,{sx:(0,o.jM)([Ju.SUBCARD,{gap:"unset"}]),children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:{marginBottom:"4px"},children:n("team_risk_detection_setup_guidelines_browser_selection_card_title")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",sx:{marginBottom:"8px"},children:n("team_risk_detection_setup_guidelines_browser_selection_card_subtitle")}),(0,S.BX)(o.kC,{justifyContent:"space-between",sx:{paddingX:"8px"},children:[(0,S.tZ)(o.XZ,{label:n("team_risk_detection_setup_deployment_method_browser_option_chrome"),checked:e.includes("chrome"),value:"chrome",onChange:a}),(0,S.tZ)(o.XZ,{label:n("team_risk_detection_setup_deployment_method_browser_option_edge"),checked:e.includes("edge"),value:"edge",onChange:a}),(0,S.tZ)(o.XZ,{disabled:!0,label:n("team_risk_detection_setup_deployment_method_browser_option_firefox"),checked:!1,value:"firefox"})]})]})},Sm=({setupInformation:e,handleDownloadScript:t,handleClickCopy:n})=>{var a;const{translate:i}=(0,p.Z)();return(0,S.BX)(S.HY,{children:[(0,S.BX)(o.kC,{alignItems:"center",color:"ds.text.neutral.catchy",id:"intune-guidelines","aria-labelledby":"intune-tab",children:[(0,S.tZ)(o.Om,{type:"windows",size:"small",sx:{marginRight:"8px"}}),i("team_risk_detection_setup_guidelines_title_intune_windows")]}),(0,S.tZ)(o.nv,{children:i.markup("team_risk_detection_setup_guidelines_policies_paragraph_title_intune_markup")}),(0,S.tZ)(o.nv,{children:i.markup("team_risk_detection_setup_guidelines_policies_paragraph_intune_windows_markup")}),(0,S.tZ)(o.Zb,{sx:Ju.DISPLAY_FIELD_WHITE,children:(0,S.tZ)(o.CW,{label:i("team_risk_detection_setup_guidelines_script_field_title"),value:"Dashlane-Risk-Detection-Policies-Script.ps1",actions:[(0,S.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"DownloadOutlined",onClick:t,children:i("team_risk_detection_setup_guidelines_script_field_download_button")},"DownloadScript")]})}),(0,S.tZ)(o.Zb,{sx:Ju.DISPLAY_FIELD_WHITE,children:(0,S.tZ)(o.CW,{label:i("team_risk_detection_setup_guidelines_token_field_title"),value:e.massDeploymentTeamKey,actions:[(0,S.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:n(null!=(a=e.massDeploymentTeamKey)?a:"",i("team_risk_detection_setup_status_token_copied_toast"),l.RiskDetectionSetupStep.CopyIntuneConfigurationToken),children:i("team_risk_detection_setup_guidelines_token_field_copy_button")},"CopyToken")]})})]})},fm="team_risk_detection_setup_guidelines_device_configuration_field_copy_button",vm="team_risk_detection_setup_status_value_copied_toast",Cm={chrome:l.RiskDetectionSetupStep.CopyJamfPoliciesChromePreferenceDomain,edge:l.RiskDetectionSetupStep.CopyJamfPoliciesEdgePreferenceDomain,firefox:"copy_jamf_policies_firefox_preference_domain"},Em={chrome:"team_risk_detection_setup_guidelines_preference_domains_fields_label_chrome",edge:"team_risk_detection_setup_guidelines_preference_domains_fields_label_edge",firefox:"team_risk_detection_setup_guidelines_preference_domains_fields_label_firefox"},Zm=({selectedBrowsers:e,setupInformation:t,handleClickCopy:n})=>{var a;const{translate:i}=(0,p.Z)();return(0,S.BX)(S.HY,{children:[(0,S.BX)(o.kC,{alignItems:"center",color:"ds.text.neutral.catchy",id:"intune-guidelines","aria-labelledby":"intune-tab",children:[(0,S.tZ)(o.Om,{type:"apple",size:"small",sx:{marginRight:"8px"}}),i("team_risk_detection_setup_guidelines_title_jamf_macos")]}),(0,S.tZ)(o.nv,{children:i.markup("team_risk_detection_setup_guidelines_policies_paragraph_part_one_jamf_macos_markup")}),(0,S.tZ)(o.nv,{children:i.markup("team_risk_detection_setup_guidelines_policies_paragraph_part_two_jamf_macos_markup")}),(0,S.tZ)(o.nv,{children:i.markup("team_risk_detection_setup_guidelines_policies_paragraph_part_three_jamf_macos_markup")}),e.map((e=>{var a;return(0,S.tZ)("div",{children:(0,S.tZ)(o.Zb,{sx:Ju.DISPLAY_FIELD_WHITE,children:(0,S.tZ)(o.CW,{label:i(Em[e]),value:t.massDeploymentSetupInformation?.extensionPreferenceDomains[e],actions:[(0,S.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:n(null!=(a=t.massDeploymentSetupInformation?.extensionPreferenceDomains[e])?a:"",i(vm),Cm[e]),children:i(fm)},"CopyValue")]})})},e)})),(0,S.tZ)(o.Zb,{sx:Ju.DISPLAY_FIELD_WHITE,children:(0,S.tZ)(o.Y6,{label:i("team_risk_detection_setup_guidelines_property_list_fields_label_generic"),value:t.massDeploymentSetupInformation?.extensionPoliciesValue,actions:[(0,S.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:n(null!=(a=t.massDeploymentSetupInformation?.extensionPoliciesValue)?a:"",i(vm),l.RiskDetectionSetupStep.CopyJamfPoliciesPropertyList),children:i(fm)},"CopyValue")]})})]})},Dm={chrome:"team_risk_detection_setup_guidelines_extension_id_update_url_label_chrome",edge:"team_risk_detection_setup_guidelines_extension_id_update_url_label_edge",firefox:"firefox"},Tm={chrome:l.RiskDetectionSetupStep.CopyIntuneChromeDeviceValue,edge:l.RiskDetectionSetupStep.CopyIntuneEdgeDeviceValue,firefox:"copy_intune_firefox_device_value"},km=({selectedBrowsers:e,setupInformation:t,handleClickCopy:n})=>{const{translate:a}=(0,p.Z)();return(0,S.tZ)(o.kC,{flexDirection:"column",gap:"16px",sx:{mt:"16px"},children:(0,S.tZ)(o.Zb,{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet"},children:(0,S.BX)(o.Zb,{sx:{backgroundColor:"ds.container.agnostic.neutral.supershy"},children:[(0,S.BX)(o.kC,{alignItems:"center",color:"ds.text.neutral.catchy",id:"intune-guidelines","aria-labelledby":"intune-tab",children:[(0,S.tZ)(o.Om,{type:"windows",size:"small",sx:{marginRight:"8px"}}),a("team_risk_detection_setup_guidelines_title_intune_windows")]}),(0,S.tZ)(o.nv,{children:a.markup("team_risk_detection_setup_guidelines_force_install_paragraph_title_intune_markup")}),(0,S.tZ)(o.nv,{children:a.markup("team_risk_detection_setup_guidelines_force_install_paragraph_intune_windows_markup")}),e.map((e=>{var i;return(0,S.BX)("div",{children:[(0,S.tZ)(o.Zb,{sx:Ju.DISPLAY_FIELD_WHITE,children:(0,S.tZ)(o.CW,{label:a(Dm[e]),value:t.massDeploymentSetupInformation?.massDeploymentExtensionIDsAndUpdateURLs[e],actions:[(0,S.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:n(null!=(i=t.massDeploymentSetupInformation?.massDeploymentExtensionIDsAndUpdateURLs[e])?i:"",a("team_risk_detection_setup_status_value_copied_toast"),Tm[e]),children:a("team_risk_detection_setup_guidelines_device_configuration_field_copy_button")},"CopyValue")]})}),"chrome"===e?(0,S.tZ)("div",{onClick:()=>(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:l.RiskDetectionSetupStep.ClickChromeAdmxLink})),children:(0,S.tZ)(o.ke,{icon:"FeedbackInfoOutlined",title:a.markup("team_risk_detection_setup_guidelines_import_admx_infobox_markup"),sx:{marginTop:"16px"}})}):null]},e)}))]})})})},Im="team_risk_detection_setup_guidelines_device_configuration_field_copy_button",Am="team_risk_detection_setup_status_value_copied_toast",wm={chrome:"team_risk_detection_setup_guidelines_property_list_fields_label_chrome",edge:"team_risk_detection_setup_guidelines_property_list_fields_label_edge",firefox:"team_risk_detection_setup_guidelines_property_list_fields_label_firefox"},Nm={chrome:"team_risk_detection_setup_guidelines_preference_domains_fields_label_chrome",edge:"team_risk_detection_setup_guidelines_preference_domains_fields_label_edge",firefox:"team_risk_detection_setup_guidelines_preference_domains_fields_label_firefox"},Om={chrome:l.RiskDetectionSetupStep.CopyJamfForceInstallChromePreferenceDomain,edge:l.RiskDetectionSetupStep.CopyJamfForceInstallEdgePreferenceDomain,firefox:"copy_jamf_force_install_firefox_preference_domain"},Rm={chrome:l.RiskDetectionSetupStep.CopyJamfForceInstallChromePropertyList,edge:l.RiskDetectionSetupStep.CopyJamfForceInstallEdgePropertyList,firefox:"copy_jamf_force_install_firefox_property_list"},Lm=({selectedBrowsers:e,setupInformation:t,handleClickCopy:n})=>{const{translate:a}=(0,p.Z)();return(0,S.tZ)(o.Zb,{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",mt:"16px"},children:(0,S.BX)(o.Zb,{sx:{backgroundColor:"ds.container.agnostic.neutral.supershy"},children:[(0,S.BX)(o.kC,{alignItems:"center",color:"ds.text.neutral.catchy",id:"intune-guidelines","aria-labelledby":"intune-tab",children:[(0,S.tZ)(o.Om,{type:"apple",size:"small",sx:{marginRight:"8px"}}),a("team_risk_detection_setup_guidelines_title_jamf_macos")]}),(0,S.tZ)(o.nv,{children:a.markup("team_risk_detection_setup_guidelines_force_install_paragraph_part_one_jamf_macos_markup")}),(0,S.tZ)(o.nv,{children:a.markup("team_risk_detection_setup_guidelines_force_install_paragraph_part_two_jamf_macos_markup")}),(0,S.tZ)(o.nv,{children:a.markup("team_risk_detection_setup_guidelines_force_install_paragraph_part_three_jamf_macos_markup")}),e.map((e=>{var i,r;return(0,S.BX)("div",{children:[(0,S.tZ)(o.Zb,{sx:Ju.DISPLAY_FIELD_WHITE,children:(0,S.tZ)(o.CW,{label:a(Nm[e]),value:t.massDeploymentSetupInformation?.browsersPreferenceDomains[e],actions:[(0,S.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:n(null!=(i=t.massDeploymentSetupInformation?.browsersPreferenceDomains[e])?i:"",a(Am),Om[e]),children:a(Im)},"CopyToken")]})}),(0,S.tZ)(o.Zb,{sx:{...Ju.DISPLAY_FIELD_WHITE,marginTop:"16px"},children:(0,S.tZ)(o.Y6,{label:a(wm[e]),value:t.massDeploymentSetupInformation?.browsersForceInstallValues[e],actions:[(0,S.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:n(null!=(r=t.massDeploymentSetupInformation?.browsersForceInstallValues[e])?r:"",a(Am),Rm[e]),children:a(Im)},"CopyValue")]})})]},`jamf-force-install-guidelines-${e}`)}))]})})},Mm=({handleActivateCRD:e})=>{const{translate:t}=(0,p.Z)();return(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.Zb,{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",my:"16px"},children:(0,S.BX)(o.Zb,{sx:{backgroundColor:"ds.container.agnostic.neutral.supershy"},children:[(0,S.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.medium",children:t("team_risk_detection_setup_guidelines_step_turn_on_title")}),(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",children:t("team_risk_detection_setup_guidelines_step_turn_on_subtitle")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:t("team_risk_detection_setup_guidelines_step_turn_on_description")})]})}),(0,S.tZ)(o.kC,{justifyContent:"flex-end",children:(0,S.tZ)(o.zx,{onClick:e,children:t("team_risk_detection_setup_guidelines_turn_on_button")})})]})},Bm="team_risk_detection_setup_toast_close",Pm=({isCrdActive:e,deploymentSofware:t,selectedBrowsers:n,setupInformation:a,massDeploymentSoftwaresTabs:i,setSelectedBrowsers:s,setError:c})=>{const[d,_]=(0,r.useState)(!1),[u,g]=(0,r.useState)(e?0:1),{translate:h}=(0,p.Z)(),{showToast:y}=(0,o.pm)(),{generateAndDownloadMassDeploymentScript:b}=(0,q.u)(Wu.i),{updateLoggedOutMonitoringActiveStatus:x}=(0,q.u)(Wu.i),f=async()=>{try{await b({targetedBrowsers:n,targetedMassDeploymentSoftware:"microsoft-intune",targetedOS:"windows"}),(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:l.RiskDetectionSetupStep.DownloadIntuneScriptFile}))}catch{y({mood:"danger",description:h("team_risk_detection_setup_download_error_description"),closeActionLabel:h(Bm),action:{onClick:f,label:h("team_risk_detection_setup_download_error_retry")}})}},v=(e,t,n)=>async()=>{try{await navigator.clipboard.writeText(e),y({description:t,closeActionLabel:h(Bm)}),(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:n}))}catch{y({mood:"danger",description:h("_common_generic_error"),closeActionLabel:h(Bm)})}},C=async()=>{(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:l.RiskDetectionSetupStep.TurnOn}));const e=await x({active:!0});(0,j.d6)(e)?(c({hasError:!1,retryFunction:void 0}),y({description:h("team_risk_detection_setup_toast_turned_on"),closeActionLabel:h(Bm)})):c({hasError:!0,retryFunction:async()=>{await C()}})},E="intune"===t,Z="jamf"===t,D=E?(0,S.tZ)(Sm,{setupInformation:a,handleDownloadScript:f,handleClickCopy:v}):Z?(0,S.tZ)(Zm,{setupInformation:a,selectedBrowsers:n,handleClickCopy:v}):null,T=E?(0,S.tZ)(km,{setupInformation:a,selectedBrowsers:n,handleClickCopy:v}):Z?(0,S.tZ)(Lm,{setupInformation:a,selectedBrowsers:n,handleClickCopy:v}):null;return(0,S.BX)(S.HY,{children:[(0,S.tZ)(bm,{title:h("team_risk_detection_setup_apply_policy_title"),description:h("team_risk_detection_setup_apply_policy_description"),duration:h("team_risk_detection_setup_apply_policy_duration"),stepNumber:1,isDefaultOpen:1===u,onCompleted:()=>g(2),isCrdActive:e,children:(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{mt:"16px"},children:[(0,S.tZ)(o.ke,{title:h("ace_team_risk_detection_setup_warning_title"),mood:"warning",description:h("ace_team_risk_detection_setup_warning_description"),size:"large"}),(0,S.BX)(o.Zb,{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet"},children:[(0,S.tZ)(o.mQ,{fullWidth:!0,tabs:i,defaultTab:0}),(0,S.tZ)(xm,{selectedBrowsers:n,setSelectedBrowsers:s}),(0,S.tZ)(o.Zb,{sx:{backgroundColor:"ds.container.agnostic.neutral.supershy"},children:D})]})]})}),(0,S.tZ)(bm,{title:h("team_risk_detection_setup_confirm_policy_title"),description:h("team_risk_detection_setup_confirm_policy_description"),duration:h("team_risk_detection_setup_confirm_policy_duration"),stepNumber:2,isDefaultOpen:2===u,onCompleted:d?()=>g(3):void 0,isCrdActive:e,children:(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{mt:"16px"},children:[(0,S.tZ)(o.ke,{title:h("team_risk_detection_setup_confirm_policy_infobox_title"),mood:"danger",size:"large"}),(0,S.tZ)(o.XZ,{label:h("team_risk_detection_setup_confirm_policy_checkbox_title"),onChange:e=>_(e.target.checked),sx:{pb:"2px"}})]})}),(0,S.tZ)(bm,{title:h("team_risk_detection_setup_mass_deploy_title"),description:h("team_risk_detection_setup_mass_deploy_description"),duration:h("team_risk_detection_setup_mass_deploy_duration"),stepNumber:3,isDefaultOpen:3===u,onCompleted:()=>g(4),isCrdActive:e,children:(0,S.tZ)("div",{children:T})}),(0,S.tZ)(bm,{title:h("team_risk_detection_setup_activation_title"),description:h("team_risk_detection_setup_activation_description"),duration:h("team_risk_detection_setup_activation_duration"),stepNumber:4,isDefaultOpen:4===u,isCrdActive:e,children:(0,S.tZ)(Mm,{handleActivateCRD:C})})]})};var Um;const Xm=({isCrdActive:e,setError:t})=>{const[n,a]=(0,r.useState)("microsoft-intune"),[i,s]=(0,r.useState)(["chrome"]),{translate:d}=(0,p.Z)(),_=(e=>{const{status:t,data:n}=(0,c.k)(Wu.i,"getMassDeploymentSetupInformation",{targetedBrowsers:e.targetedMassDeploymentBrowsers,targetedMassDeploymentSoftware:e.targetedMassDeploymentSoftware,targetedOS:e.targetedMassDeploymentOS});return t===L.rq.Loading?{isLoading:!0,isError:!1}:t===L.rq.Error?{isLoading:!1,isError:!0}:{massDeploymentSetupInformation:n.massDeploymentSetupInformation,massDeploymentTeamKey:n.massDeploymentTeamKey,isLoading:!1,isError:!1}})({targetedMassDeploymentBrowsers:i,targetedMassDeploymentSoftware:n,targetedMassDeploymentOS:"microsoft-intune"===n?"windows":"macos"});(0,r.useEffect)((()=>{(0,m.Nc)(e?l.PageView.TacRiskDetectionSettings:l.PageView.TacRiskDetectionSetup)}),[e]);const u=[{contentId:"intune-guidelines",title:d("team_risk_detection_setup_deployment_method_deployment_software_option_intune"),id:"intune-tab",onSelect:()=>a("microsoft-intune")},{contentId:"jamf-guidelines",title:d("team_risk_detection_setup_deployment_method_deployment_software_option_jamf"),id:"jamf-tab",onSelect:()=>a("jamf")}];if(_.isLoading)return Um||(Um=(0,S.tZ)(o.ZX,{}));if(_.isError)return t({hasError:!0,retryFunction:()=>t({hasError:!1,retryFunction:void 0})}),null;const g="microsoft-intune"===n&&(0,mm.Ss)(_.massDeploymentSetupInformation),h="jamf"===n&&(0,mm.kv)(_.massDeploymentSetupInformation);return(0,S.tZ)(Pm,{isCrdActive:e,deploymentSofware:g?"intune":h?"jamf":void 0,selectedBrowsers:i,setupInformation:{massDeploymentSetupInformation:_.massDeploymentSetupInformation,massDeploymentTeamKey:_.massDeploymentTeamKey},massDeploymentSoftwaresTabs:u,setSelectedBrowsers:s,setError:t})};var zm;const qm=({title:e,mood:t,score:n=0,isLoading:a})=>(0,S.BX)("div",{sx:{flex:1},children:[a?zm||(zm=(0,S.tZ)(o.ZX,{"data-testid":"insight-metric-loader",size:"xlarge"})):(0,S.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.medium",color:"positive"===t?"ds.text.brand.standard":`ds.text.${t}.quiet`,sx:{marginBottom:"2px"},children:null!=n?n:"-"}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",children:e})]});var jm,Fm,Gm=n(13091),Vm=n(85701);const Hm="team_risk_detection_empty_risks_infobox_title",Wm="team_risk_detection_insights_graph_key_at_risk",$m="team_risk_detection_insights_graph_key_weak",Km="team_risk_detection_insights_graph_key_compromised",Ym={logins:"#32A9B2",compromised:"#FF7385",weak:"#ED892D"},Qm=e=>{const{color:t}=e;return(0,S.tZ)("div",{sx:{width:"9px"},children:(0,S.tZ)("svg",{viewBox:"0 0 2 2",xmlns:"http://www.w3.org/2000/svg",children:(0,S.tZ)("line",{x1:"0",y1:"1",x2:"2",y2:"1",stroke:t,strokeWidth:"0.4"})})})},Jm=({hasLogsInLastYear:e,graphData:t,timeScale:n,isLoading:a})=>{const{translate:i}=(0,p.Z)(),[s,l]=(0,r.useState)(!0),c=t?t.reduce(((e,{nLogins:t,nWeak:n,nCompromised:a})=>Math.max(e,t,n,a)),10):0,d=10*Math.ceil(c/10),_=e=>{const t=new Date(e);switch(n){case"week":return i.shortDate(t,Vt.qG.L_M_D);case"month":return`${i.shortDate(t,Vt.qG.L_M_D)} - ${i.shortDate((0,Gm.Z)(t),Vt.qG.L_M_D)}`;case"year":return i.shortDate(t,Vt.qG.MMM)}},u=({color:e})=>(0,S.tZ)("span",{sx:{background:e,width:"6px",height:"6px",borderRadius:"50%",alignsSelf:"center"}});return a?(0,S.tZ)(o.kC,{justifyContent:"center",sx:{width:"100%",padding:"20vh 0"},children:jm||(jm=(0,S.tZ)(o.ZX,{"data-testid":"insight-loader",size:"xlarge"}))}):e&&t?(0,S.BX)(o.kC,{flexDirection:"column",gap:"12px",children:[(0,S.tZ)(Jl.h,{height:220,children:(0,S.BX)(ec.w,{data:t,children:[(0,S.tZ)(ac.u,{content:({active:e,payload:t,label:n})=>{var a,r,s;return e&&t&&t.length?(0,S.BX)(o.kC,{flexDirection:"column",gap:"4px",sx:{padding:"8px",borderRadius:"4px",background:"ds.container.agnostic.neutral.quiet",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.16)"},children:[(0,S.tZ)(o.X6,{as:"h5",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.catchy",children:_(n)}),(0,S.BX)(o.kC,{flexDirection:"row",gap:"4px",alignItems:"center",children:[(0,S.tZ)(u,{color:Ym.logins}),(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.standard",children:`${null!=(a=t[0].value?.toString())?a:"-"} ${i(Wm)}`})]}),(0,S.BX)(o.kC,{flexDirection:"row",gap:"4px",alignItems:"center",children:[(0,S.tZ)(u,{color:Ym.weak}),(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.standard",children:`${null!=(r=t[1].value?.toString())?r:"-"} ${i($m)}`})]}),(0,S.BX)(o.kC,{flexDirection:"row",gap:"4px",alignItems:"center",children:[(0,S.tZ)(u,{color:Ym.compromised}),(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.standard",children:`${null!=(s=t[2].value?.toString())?s:"-"} ${i(Km)}`})]})]}):null}}),Fm||(Fm=(0,S.tZ)(tc.q,{vertical:!1})),(0,S.tZ)(nc.B,{domain:[0,d],fontSize:"small"}),(0,S.tZ)(_c.K,{dataKey:"startDate",fontSize:"small",tickFormatter:_}),(0,S.tZ)(ic.x,{dataKey:"nLogins",type:"linear",stroke:Ym.logins,strokeWidth:"2",isAnimationActive:!1}),(0,S.tZ)(ic.x,{dataKey:"nWeak",type:"linear",stroke:Ym.weak,strokeWidth:"2",isAnimationActive:!1}),(0,S.tZ)(ic.x,{dataKey:"nCompromised",type:"linear",stroke:Ym.compromised,strokeWidth:"2",isAnimationActive:!1})]})}),(0,S.BX)(o.Zb,{sx:{display:"flex",flexDirection:"column",padding:"16px",gap:"16px",backgroundColor:"ds.container.agnostic.neutral.quiet",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,S.BX)(o.kC,{as:"button",flexDirection:"row",alignItems:"center",gap:"8px",onClick:()=>l(!s),sx:{cursor:"pointer",background:"none",width:"fit-content"},children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:i("team_risk_detection_insights_graph_keys")}),(0,S.tZ)(o.JO,{name:s?"CaretRightOutlined":"CaretDownOutlined",size:"small",color:"ds.text.neutral.quiet"})]}),s?null:(0,S.tZ)(o.kC,{flexDirection:"row",gap:"32px",sx:{paddingLeft:"16px"},children:[["nLogins",Ym.logins,i(Wm)],["nWeak",Ym.weak,i($m)],["nCompromised",Ym.compromised,i(Km)]].map((([e,t,n])=>(0,S.BX)(o.kC,{flexDirection:"row",gap:"8px",alignItems:"baseline",children:[(0,S.tZ)(Qm,{color:t}),(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:n})]},e)))})]})]}):(0,S.BX)(o.kC,{flexDirection:"row",justifyContent:"center",sx:{position:"relative",textAlign:"center"},children:[(0,S.tZ)(o.kC,{justifyContent:"center",flexDirection:"row",children:(0,S.tZ)("img",{src:Vm,width:"100%",alt:i(Hm)})}),(0,S.BX)(o.kC,{justifyContent:"center",flexDirection:"column",gap:"8px",sx:{maxWidth:"520px",position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,S.tZ)(o.X6,{as:"h3",color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",children:i(Hm)}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:i("team_risk_detection_empty_risks_infobox_description")})]})]})};var ep,tp;const np=()=>(0,S.tZ)("div",{sx:Ju.VERTICAL_DIVIDER}),ap={week:0,month:1,year:2},ip="crd.adminHasSeenLogFromInsights",rp=({setError:e})=>{const[t,n]=(0,r.useState)("week"),[a,s]=(0,r.useState)(!1),{translate:d}=(0,p.Z)(),{routes:_}=(0,i.Xo)(),u=(0,i.k6)(),g=(0,c.k)(Wu.i,"getRiskDetectionInsights",{timeScale:t}),h=(0,c.k)(pr.t,"hasSeenCRDRisksFoundInfobox"),{markCRDRisksFoundInfoboxSeen:y}=(0,q.u)(pr.t),{computeRiskDetectionInsights:b}=(0,q.u)(Wu.i);(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacRiskDetectionInsights)}),[]),(0,r.useEffect)((()=>{s(!0),b({timescale:t})}),[t]),(0,r.useEffect)((()=>{g.status===L.rq.Error&&(s(!1),e({hasError:!0,retryFunction:()=>{e({hasError:!1})}})),g.status===L.rq.Success&&s(!1)}),[g,e]),(0,r.useEffect)((()=>{a||g.status===L.rq.Loading||0!==g.data?.lastUpdateTimestamp||e({hasError:!0,retryFunction:()=>{e({hasError:!1})}})}),[a,g,e]),(0,r.useEffect)((()=>{(async()=>{const e=await(0,ko.U)(ip).catch((()=>null));e&&!e[ip]&&g.data?.hasLogsInLastYear&&(0,Io.t)({[ip]:!0}).then((()=>(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:l.RiskDetectionSetupStep.AdminSeeCrdLogFromInsights})))).catch((()=>{}))})()}),[g]);const x="week"===t?"team_risk_detection_insights_metrics_title_week":"month"===t?"team_risk_detection_insights_metrics_title_month":"team_risk_detection_insights_metrics_title_year",f=g.data?.insights,v=g.data?.riskDetectionHistory,C=f&&g.data?.hasLogsInLastYear,E=!!C&&h.status===L.rq.Success&&!h.data;return(0,S.BX)(S.HY,{children:[E?(0,S.tZ)(o.ke,{mood:"brand",icon:"TipOutlined",size:"large",title:d("team_risk_detection_insights_infobox_risks_detected_title"),description:d("team_risk_detection_insights_infobox_risks_detected_description"),actions:[(0,S.tZ)(o.zx,{intensity:"quiet",size:"small",onClick:()=>y(),children:"Dismiss"},"dismiss")]}):null,(0,S.BX)(o.Zb,{sx:{display:"flex",flexDirection:"column",maxWidth:"100%",padding:"24px",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,S.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:d(x)}),(0,S.BX)(o.kC,{flexDirection:"row",gap:"24px",children:[(0,S.tZ)(qm,{title:d("team_risk_detection_insights_total_employees_title"),mood:"positive",score:C?f.nLogins:null,isLoading:a}),ep||(ep=(0,S.tZ)(np,{})),(0,S.tZ)(qm,{title:d("team_risk_detection_insights_total_weak_logins_title"),mood:"warning",score:C?f.nWeak:null,isLoading:a}),tp||(tp=(0,S.tZ)(np,{})),(0,S.tZ)(qm,{title:d("team_risk_detection_insights_total_compromised_logins_title"),mood:"danger",score:C?f.nCompromised:null,isLoading:a})]})]}),(0,S.BX)(o.Zb,{gap:"24px",sx:{flexDirection:"column",borderRadius:"8px",padding:"24px",maxWidth:"100%",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,S.BX)(o.kC,{flexDirection:"row",justifyContent:"space-between",children:[(0,S.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:d("team_risk_detection_insights_graph_title")}),(0,S.BX)(o.kC,{flexDirection:"row",gap:"16px",children:[(0,S.tZ)(o.mQ,{defaultTab:ap[t],tabs:[{id:"tab-week",title:d("team_risk_detection_insights_graph_tab_week"),contentId:"content-week",onSelect:()=>{n("week")}},{id:"tab-month",title:d("team_risk_detection_insights_graph_tab_month"),contentId:"content-month",onSelect:()=>{n("month")}},{id:"tab-year",title:d("team_risk_detection_insights_graph_tab_year"),contentId:"content-year",onSelect:()=>{n("year")}}]}),(0,S.BX)(o.h_,{align:"end",children:[(0,S.tZ)(o.sB,{size:"small",intensity:"supershy",layout:"iconOnly",icon:"ActionMoreOutlined","aria-label":d("team_risk_detection_insights_graph_more_options"),"data-testid":"CRDInsightsActionsButton"}),(0,S.tZ)(o.Nv,{children:(0,S.tZ)(o.hP,{label:d("team_risk_detection_insights_see_activity_logs"),onSelect:()=>{(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:l.RiskDetectionSetupStep.SeeActivityLogs})),u.push(`${_.teamActivityRoutePath}/recent?categoryFilters=${hs.s.RiskDetection}`)}})})]})]})]}),(0,S.tZ)(Jm,{hasLogsInLastYear:C,graphData:v,timeScale:t,isLoading:a})]})]})};var sp;const op=({token:e,active:t,setError:n})=>{const{translate:a}=(0,p.Z)(),i=Qu(),[s,l]=(0,r.useState)(t?"insights":"settings"),c=[{id:"tab-insights",title:a("team_risk_detection_tabs_insights"),contentId:"content-insights",onSelect:()=>{l("insights")}},{id:"tab-settings",title:a("team_risk_detection_tabs_settings"),contentId:"content-settings",onSelect:()=>{l("settings")}}];return(0,S.BX)(S.HY,{children:[t?(0,S.tZ)(o.mQ,{tabs:c,sx:{margin:"0 42px"},defaultTab:"settings"===s?1:0}):null,(0,S.tZ)("div",{"aria-labelledby":"tab-settings",id:"content-settings",children:"settings"===s?(0,S.tZ)(Ba,{fullWidth:!0,secondaryContentWidth:"272px",reducedVerticalPadding:!0,mainContent:(0,S.tZ)("div",{sx:{display:"flex",flexDirection:"column",gap:"10px"},children:t?(0,S.BX)(S.HY,{children:[(0,S.tZ)(um,{token:e,setError:n}),(0,S.tZ)(Xm,{isCrdActive:!0,setError:n})]}):(0,S.tZ)(Xm,{isCrdActive:!1,setError:n})}),secondaryContent:(0,S.BX)(re.T5p,{gap:"16px",children:[sp||(sp=(0,S.tZ)(nm,{showSetupTips:!0})),i?null:(0,S.tZ)(Yu,{featureType:$u.CRD})]})}):void 0}),(0,S.tZ)("div",{"aria-labelledby":"tab-insights",id:"content-insights",children:"insights"===s?(0,S.tZ)(o.kC,{flexDirection:"column",gap:"16px",sx:{padding:"16px 42px"},children:(0,S.tZ)(rp,{setError:n})}):void 0})]})},lp=({helpCenterLink:e,retryFunction:t})=>{const{translate:n}=(0,p.Z)();return(0,S.tZ)("div",{sx:{minHeight:"680px",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px"},children:(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"480px"},children:[(0,S.tZ)(o.JO,{name:"FeedbackFailOutlined",color:"ds.text.danger.standard",size:"xlarge",sx:{marginBottom:"40px",width:"64px",height:"64px"}}),(0,S.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.danger.standard",sx:{marginBottom:"8px"},children:n("team_risk_detection_setup_error_heading")}),(0,S.tZ)(o.nv,{sx:{textAlign:"center"},children:n(t?"team_risk_detection_setup_error_retry_description":"team_risk_detection_setup_error_generic_description")}),t?(0,S.tZ)(o.zx,{onClick:t,sx:{marginTop:"40px"},children:n("team_risk_detection_setup_error_retry_button")}):null,e?(0,S.tZ)(o.Qj,{isExternal:!0,href:e,sx:{marginTop:"40px"},children:n("team_risk_detection_setup_error_help_center_link")}):null]})})},cp=({iconName:e,title:t,description:n})=>(0,S.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px"},children:[(0,S.tZ)(o.vY,{name:e,mood:"brand"}),(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.small",color:"ds.text.neutral.standard",children:t}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:n})]})]}),dp=({onClick:e})=>{const{translate:t}=(0,p.Z)();return(0,S.BX)(re.Zbd,{sx:(0,o.jM)([Ju.CARD,{padding:"24px"}]),children:[(0,S.tZ)(o.X6,{as:"h4",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("team_risk_detection_contact_us_secondary_card_title")}),(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,S.tZ)(o.X6,{as:"h5",color:"ds.text.neutral.quiet",textStyle:"ds.title.block.medium",children:t("team_risk_detection_contact_us_secondary_card_subtitle")}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:t("team_risk_detection_contact_us_secondary_card_description")})]}),(0,S.tZ)(o.Qj,{onClick:e,sx:{cursor:"pointer"},children:t("team_risk_detection_contact_us_secondary_card_button")})]})},_p=()=>{const{translate:e}=(0,p.Z)(),t=(0,u.s)(),n=(0,X.C)(),[a,i]=(0,r.useState)(!1);if((0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacRiskDetectionPaywall)}),[]),!n)return null;const s=n.isFreeTrial||n.isGracePeriod;return(0,S.BX)(S.HY,{children:[(0,S.tZ)(Ba,{mainContent:(0,S.tZ)(re.Zbd,{sx:{display:"flex",padding:"48px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:(0,S.BX)(o.kC,{flexDirection:"column",gap:"32px",children:[(0,S.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,S.tZ)(o.Ct,{mood:"brand",intensity:"quiet",layout:"iconLeading",label:e("team_risk_detection_paywall_premium_badge"),iconName:"PremiumOutlined"}),(0,S.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",textStyle:"ds.title.section.large",sx:{letterSpacing:"-1px"},children:e("team_risk_detection_paywall_main_card_title")})]}),(0,S.BX)(o.kC,{flexDirection:"column",alignItems:"left",gap:"32px",children:[(0,S.tZ)(cp,{iconName:"ProtectionOutlined",title:e("team_risk_detection_paywall_main_card_credential_risk_title"),description:e("team_risk_detection_paywall_main_card_credential_risk_subtitle")}),(0,S.tZ)(cp,{iconName:"RiskDetectionOutlined",title:e("team_risk_detection_paywall_main_card_receive_alert_title"),description:e("team_risk_detection_paywall_main_card_receive_alert_subtitle")}),(0,S.tZ)(cp,{iconName:"TipOutlined",title:e("team_risk_detection_paywall_main_card_take_action_title"),description:e("team_risk_detection_paywall_main_card_take_action_subtitle")})]}),(0,S.tZ)(o.kC,{justifyContent:"right",children:(0,S.tZ)(o.zx,{size:"medium",layout:"iconLeading",icon:"PremiumOutlined",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.UpgradeBusinessPlusTier})),Ku($u.CRD,t?.spaceTier,s)},children:e("team_risk_detection_paywall_main_card_upgrade_business_button")})})]})}),fullWidth:!0,secondaryContent:(0,S.tZ)(dp,{onClick:()=>i(!0)})}),a?(0,S.tZ)(J.c,{onDismiss:()=>i(!1)}):null]})};var up,mp;const pp=oe.q.RiskDetectionV2Prod,gp=oe.q.RiskDetectionV2OnDemand,hp=()=>{const e=(0,He.rp)(["riskDetection"]),t=(0,R._)(),{routes:n}=(0,lo.Xo)(),a=(0,De.k6)(),{translate:i}=(0,p.Z)(),s=(0,X.C)(),l=Qu(),[c,d]=(0,r.useState)({hasError:!1,retryFunction:void 0}),_=(0,Vu.C)();if(t.status===L.rq.Loading||_.isLoading||!s)return up||(up=(0,S.tZ)(o.kC,{justifyContent:"center",children:(0,S.tZ)(o.ZX,{size:75})}));const u=!!t.data?.[gp],m=!!t.data?.[pp];if(!u&&!m||_.hasError)return a.push(n.teamDashboardRoutePath),null;const{massDeploymentTeamKey:g,active:h}=_,y=m&&!e&&!u;return(0,S.BX)(S.HY,{children:[(0,S.BX)("div",{sx:{px:"48px",pt:"32px",pb:"12px"},children:[(0,S.BX)(o.kC,{alignItems:"center",gap:"8px",sx:{pb:"8px"},children:[(0,S.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:i("team_risk_detection_page_main_header")}),y||l?null:(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.Ct,{label:i("team_business_plus_badge_label"),mood:"brand",intensity:"quiet",layout:"iconLeading",iconName:"PremiumOutlined"}),s.isFreeTrial?null:(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.brand.standard",children:i("team_business_plus_badge_expiration")})]})]}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",children:i("team_risk_detection_page_main_header_description")})]}),y?mp||(mp=(0,S.tZ)(_p,{})):c.hasError?(0,S.tZ)(lp,{retryFunction:()=>{d({hasError:!1})}}):g?(0,S.tZ)(op,{token:g,active:!!h,setError:d}):(0,S.tZ)(om,{setError:()=>d({hasError:!0,retryFunction:void 0})})]})},yp=e=>(0,S.tZ)("div",{className:"container--INT3GORhR4",children:e.children});var bp=n(14691);const xp="group_name_already_in_use";var Sp=n(33377),fp=n(68505);const vp={HEADER:{display:"inline-block",width:"100%",verticalAlign:"top"},CARD_CONTAINER:{display:"flex",gap:"16px",flexDirection:"column",padding:"32px",borderRadius:"8px",backgroundColor:"ds.container.agnostic.neutral.supershy",border:"1px solid ds.border.neutral.quiet.idle"}},Cp={nameContainer:"nameContainer--NmQCGqTrTR",nameInput:"nameInput--Vpc7anR7aO",nameEditIcon:"nameEditIcon--Thlp4CT5Bq",spinner:"spinner--QQ6Zpwc8Zd",_errorText:"_errorText--shQIAebNjL",errorMessage:"errorMessage--Btb66DLL6K _errorText--shQIAebNjL",error:"error--UkyphHJLOB _errorText--shQIAebNjL"},Ep=({onNameChanged:e,defaultValue:t,editable:n,saving:a})=>{const i=(0,r.useRef)(null),[s,l]=(0,r.useState)(t),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(null);(0,r.useEffect)((()=>{c&&i.current?.focus()}),[c,i]);const m=()=>{const n=i.current?.value.trim();d(!1),l(n||t),e&&n&&e(n).then((({success:e,error:t=null})=>{d(!e),u(e?null:t)}))},p=Boolean(_);return(0,S.BX)(o.X6,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:[!c&&(0,S.BX)("div",{className:dd()(Cp.nameContainer,{[Cp.hoverableContainer]:n}),onClick:()=>{n&&d(!0)},children:[s,a?(0,S.tZ)(ai.Z,{size:20,containerClassName:Cp.nameEditIcon}):(0,S.tZ)("img",{className:Cp.nameEditIcon,src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMTAuMTY3OCAxLjA3MjAzQzEwLjkzMDUgMC4zMDkzMjMgMTIuMTY2OCAwLjMwOTMyMyAxMi45Mjk1IDEuMDcyMDNDMTMuNjkyMyAxLjgzNDc0IDEzLjY5MjMgMy4wNzEwOSAxMi45Mjk1IDMuODM0NzhNMS4xOTA0NCAxMC4wNDlMMC41IDEzLjUwMjJMMy45NTIyMSAxMi44MTE4TDExLjU0ODEgNS4yMTQ5N0w4Ljc4NjI4IDIuNDUzMkwxLjE5MDQ0IDEwLjA0OVoiIHN0cm9rZT0iIzBFNjQ3NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo="})]}),c&&(0,S.tZ)("div",{className:Cp.editNameContainer,children:(0,S.tZ)("input",{ref:i,type:"text",className:dd()(Cp.nameInput,{[Cp.error]:p}),defaultValue:s,onBlur:m,onKeyUp:e=>{13===e.keyCode&&m()}})}),c&&p?(0,S.tZ)("div",{className:Cp.errorMessage,children:_}):null]})};var Zp=n(65455),Dp=n(3431);const Tp=({lee:e,userGroup:t})=>{const n=(0,r.useRef)(null),{translate:a}=(0,p.Z)(),{teamId:i}=(0,be.fV)(),s=(0,c.k)(Zp.X,"getSharingTeamLogins"),[o,l]=(0,r.useState)(null),[d,_]=(0,r.useState)([]),{invitePartialSuccessState:u,setInvitePartialSuccessState:m,handleInvitationResultClosed:g}=Y_(),h=(0,Rn.V)(),y=e=>(0,S.tZ)(Ks.q,{className:"avatar--ZwBEp_dc1w",email:e,size:32}),b=()=>Boolean(d.length);return(0,S.BX)("div",{children:[(0,S.BX)(fp.e,{ref:n,buttonLabel:a("team_groups_edit_add_members"),confirmButtonLabel:a("team_groups_edit_add_member_confirm"),cancelButtonLabel:a("team_groups_edit_add_member_cancel"),confirmButtonDisabled:!b(),onCancelButtonClick:()=>{_([]),l(null)},onConfirmButtonClick:async()=>{if(!b())return;const r=d,{groupId:s,revision:o,name:c}=t,u=r.map((e=>({alias:e.toLowerCase(),permission:"limited"})));if(null===i)return void e.reportError(new Error(Rr.N));const p=await(0,ge.j_)({teamId:i,groupId:s,revision:o,users:u});if(p.error)return"no_free_slot"===p.error.message||"not_enough_free_slots"===p.error.message?void h.showAlert(a("team_group_edit_add_member_not_enough_slots_error",{count:u.length,groupName:c}),re.BLW.ERROR):void h.showAlert(a("team_groups_edit_invite_member_to_group_error_message_markup"),re.BLW.ERROR);Object.keys(p.refusedMembers).length&&m({invitedMembers:{},refusedMembers:p.refusedMembers,show:!0}),n.current&&n.current.hidePopup(),_([]),l(null)},popupClassName:"addMemberPopup--Zd2J1smSL4",children:[(0,S.tZ)("span",{className:"addMemberLabel--DXxhvug4yq",children:a("team_groups_edit_add_member_header")}),o&&(0,S.tZ)("div",{className:"error--IjVtbntYUX",children:o}),(0,S.tZ)(Dp.J,{autoFocus:!0,className:"addMemberMultiselect--CDfv8wJoB6",dataSource:(null!=(x=s.data?.userLogins)?x:[]).map((e=>({text:e,icon:y(e)}))),getCurrentSelectionAvatar:y,defaultValue:d,isItemValid:e=>(0,xn.vV)(e),onChange:e=>{_(e)},onError:e=>l(e?a(`team_groups_edit_error_${e.message}`):null),placeholder:a("team_groups_edit_add_member_input_placeholder")})]}),(0,S.tZ)(Q_,{teamId:(0,T.ev)(e.globalState),isOpen:u.show,onClose:g,invitedMembers:u.invitedMembers,refusedMembers:u.refusedMembers})]});var x},kp=Sp.Maybe.nothing(),Ip=({onBackLinkClick:e,onDeleteClick:t,onRenameGroup:n,groupName:a,lee:i,userGroup:s})=>{const{translate:l}=(0,p.Z)(),[c,d]=(0,r.useState)(Sp.Maybe.nothing()),[_,u]=(0,r.useState)(!1);return(0,S.BX)("div",{sx:vp.HEADER,children:[(0,S.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ArrowLeftOutlined",onClick:t=>{e(t)},children:l("team_groups_edit_header_back")}),(0,S.BX)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"16px"},children:[(0,S.tZ)(Ep,{defaultValue:a,editable:!0,saving:_,onNameChanged:async e=>{u(!0);const{error:t}=await n(e);return u(!1),t===xp?{success:!1,error:l("team_groups_edit_header_name_already_exists")}:{success:!0}}}),(0,S.BX)("div",{style:{display:"flex",gap:"8px"},children:[(0,S.tZ)(fp.e,{buttonLabel:l("team_groups_edit_header_delete_group"),cancelButtonLabel:l("team_groups_edit_header_delete_group_cancel_button"),confirmButtonLabel:l("team_groups_edit_header_delete_group_confirm_button"),onCancelButtonClick:()=>{d(kp)},onConfirmButtonClick:()=>{d(kp),t()},confirmButtonDisabled:!c.caseOf({just:e=>e===a,nothing:()=>!1}),popupClassName:"confirmPopup--NTDDMjDo4B",buttonMood:"neutral",buttonIntensity:"quiet",buttonIconName:"ActionDeleteOutlined",children:(0,S.BX)("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:12},children:[(0,S.tZ)(re.nvN,{size:"large",children:l.markup("team_groups_edit_header_delete_group_confirm_title_markup",{group:a})}),(0,S.tZ)(re.nvN,{color:"neutrals.8",children:l("team_groups_edit_header_delete_group_confirm_subtitle")}),(0,S.tZ)(re.oil,{fullWidth:!0,onChange:e=>{const t=e.target.value?.trim();d(Sp.Maybe.maybe(t))},type:"text",defaultValue:c.caseOf({just:e=>e,nothing:()=>{}}),autoFocus:!0})]})}),(0,S.tZ)(Tp,{lee:i,userGroup:s})]})]})]})};var Ap,wp=n(26849),Np=n(28746);const Op=e=>(0,S.tZ)("svg",{className:e.className,width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"none",children:Ap||(Ap=(0,S.tZ)("path",{d:"M13.5 2.5V15.5H2.5V2.5M10.5 2.5V0.5H5.5V2.5M1 2.5H15M5.5 6V11M8 6V11M10.5 6V11",stroke:"#0E6476",strokeLinecap:"round",strokeLinejoin:"round"}))});var Rp;const Lp=({member:e,handleRemoveMember:t})=>{const{translate:n}=(0,p.Z)();return(0,S.BX)("tr",{children:[(0,S.tZ)("td",{className:"emailCell--c3avC4hgf6",children:(0,S.BX)("div",{className:"emailCellContainer--yFS7a4HnT_",children:[(0,S.tZ)(Ks.q,{className:"avatar--XHrkwJbc_C",email:e.alias,size:32}),e.alias]})}),(0,S.tZ)("td",{className:"rightsCell--Z6diiNotCT",children:n((a=e.permission,i=e.status,"admin"===a&&"accepted"===i?"team_groups_edit_member_list_rights_manager":"limited"===a&&"accepted"===i?"team_groups_edit_member_list_rights_member":"pending"===i?"team_groups_edit_member_list_rights_pending":""))}),(0,S.tZ)("td",{className:"plusCell--B02g3LGOlG",children:(0,S.tZ)("div",{style:{cursor:"pointer"},onClick:()=>t(e),children:Rp||(Rp=(0,S.tZ)(Op,{}))})})]});var a,i},Mp=r.memo(Lp),Bp=(0,wp.ascend)((0,wp.prop)("permission")),Pp=(0,wp.ascend)((0,wp.compose)(wp.toLower,(0,wp.prop)("alias"))),Up=(0,wp.sortWith)([Bp,Pp]),Xp=Sp.Maybe.nothing(),zp=({lee:e,className:t,userGroup:n,revokeMembers:a})=>{const{translate:i}=(0,p.Z)(),[s,o]=(0,r.useState)(0),[l,c]=(0,r.useState)({showRemoveUserDialog:!1,removeMemberCandidate:Sp.Maybe.nothing()}),d=e=>{c({showRemoveUserDialog:!0,removeMemberCandidate:Sp.Maybe.just(e)})},_=()=>(n.users||[]).filter((e=>"accepted"===e.status||"pending"===e.status)),u=()=>{c({showRemoveUserDialog:!1,removeMemberCandidate:Xp})},m=(0,wp.map)((e=>(0,S.tZ)(Mp,{member:e,handleRemoveMember:d},e.alias))),g=[{headerLabel:i("team_groups_edit_member_list_header_email"),headerKey:"email"},{headerLabel:i("team_groups_edit_member_list_header_group_rights"),colSpan:2,headerKey:"group-rights"}];return(0,S.BX)("div",{children:[(0,S.BX)("table",{className:dd()(t,"table--hj3WYleNh5"),children:[(0,S.tZ)(Ws,{columns:g}),(0,S.tZ)("tbody",{children:(()=>{const e=24*s;return(0,wp.compose)(m,(0,wp.slice)(e,e+24),Up)(_())})()})]}),(0,S.tZ)("div",{className:"pagination--Xk8h572zZ7",children:(0,S.tZ)(Np.Z,{currentPageIndex:s,itemsLength:_().length,itemsPerPage:24,onChange:e=>{o(e)}})}),(0,S.tZ)(Ya.o,{isOpen:l.showRemoveUserDialog,onRequestClose:u,footer:(0,S.tZ)(re.cNS,{primaryButtonTitle:i("team_groups_edit_member_list_action_remove_dialog_cta"),primaryButtonOnClick:()=>{Sp.Maybe.sequence({removeMemberCandidate:l.removeMemberCandidate,userGroup:Sp.Maybe.just(n)}).caseOf({just:({removeMemberCandidate:t,userGroup:n})=>{a(e.dispatchGlobal,{groupId:n.groupId,revision:n.revision,users:[t.userId]},{title:i("team_groups_edit_revoke_member_from_group_error_title"),message:i("team_groups_edit_revoke_member_from_group_error_message")})},nothing:()=>{}}),c({showRemoveUserDialog:!1,removeMemberCandidate:Xp})},secondaryButtonTitle:i("team_groups_edit_member_list_action_remove_dialog_cancel"),secondaryButtonOnClick:u}),title:i("team_groups_edit_member_list_action_remove_dialog_header"),children:(0,S.BX)("div",{children:[(0,S.tZ)("div",{className:"removeDialogTitle--Zn2JmJtOF0",children:i("team_groups_edit_member_list_action_remove_dialog_title",{email:l.removeMemberCandidate.caseOf({just:e=>e.userId,nothing:()=>""})})}),(0,S.tZ)("div",{children:i("team_groups_edit_member_list_action_remove_dialog_subtitle")})]})})]})};var qp=n(89611),jp=n(86662);const Fp=e=>`{${e.match.params.uuid}}`,Gp={userGroup:{live:he.C.liveAdministrableUserGroup,liveParam:Fp,query:he.C.getAdministrableUserGroup,queryParam:Fp}},Vp={strategies:Gp},Hp=(0,qp.$)((0,jp.i)((({lee:e,userGroup:t})=>{const{routes:n}=(0,i.Xo)(),{translate:a}=(0,p.Z)(),{addAlertToQueue:s}=H();(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacGroupDetails)}),[]);const o=(e,t,n,a)=>{try{const e=JSON.parse(a);e.code&&(t.message+=` : ${e.code}`)}finally{e(bp.Qy.error({message:n,content:{error:a}})),s(t)}};if(!t)return null;const c=(0,S.tZ)(Ip,{onBackLinkClick:()=>{(0,i.uX)(n.teamGroupsRoutePath)},onDeleteClick:()=>{const{groupId:r,revision:s}=t;(0,ge.FU)({groupId:r,revision:s}).then((()=>{(0,i.uX)(n.teamGroupsRoutePath)})).catch((t=>{const n={title:a("team_groups_edit_delete_group_error_title"),message:a("team_groups_edit_delete_group_error_message")};o(e.dispatchGlobal,n,"Group deletion failed",t.message)}))},onRenameGroup:async n=>{if(n===t.name)return{success:!0};const i=(t,n)=>{const i={title:a("team_groups_edit_rename_group_error_title"),message:a("team_groups_edit_rename_group_error_message")};return o(e.dispatchGlobal,i,n,t.message),{success:!1,error:"group_renaming_failed"}};try{if(!await he.C.isGroupNameAvailable(n))return{success:!1,error:xp}}catch(e){return i(e,"Group name availability check failed")}try{const{groupId:e,revision:a}=t;return await(0,ge.J0)({groupId:e,revision:a,name:n}),{success:!0}}catch(e){return i(e,"Group renaming failed")}},groupName:t.name,lee:e.child(),userGroup:t});return(0,S.tZ)(go,{header:c,children:(0,S.tZ)("div",{sx:vp.CARD_CONTAINER,children:(0,S.tZ)(zp,{lee:e.child(),userGroup:t,revokeMembers:(e,t,n)=>{try{he.C.revokeUserGroupMembers(t).then((({error:t})=>{t&&o(e,n,"Revoke member from group failed",t.message)}))}catch(t){o(e,n,"Revoke member from group failed",t.message)}}})})})}),Vp),Gp);var Wp=n(58432);const $p=(0,Wp.SP)("edit",{},[]);var Kp=n(89789);const Yp="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNSAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNOC41IDEuMTMyMzJMMTQuNSA3LjEzMjMyTTguNSAxMy4xMzIzTDE0LjUgNy4xMzIzMk0xNC41IDcuMTMyMzJMMC41MDAwMDEgNy4xMzIzMiIgc3Ryb2tlPSIjRDZEMkNFIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==",Qp="onboardingStepArrow--gqb_E47Df_",Jp="onboardingStepPanel--qnDSxlGTtS",eg="onboardingStepCounterPanel--KZLs4foheX",tg="onboardingStepText--K_Kh_SIwEm",ng="circle--mihUuCFcJa";var ag,ig;const rg={CONTAINER:{width:"100%",textAlign:"center",paddingTop:"58px",border:"dashed 1px ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy"}},sg=()=>{const{translate:e}=(0,p.Z)();return(0,S.BX)("div",{sx:rg.CONTAINER,children:[(0,S.tZ)("div",{className:"onboardingTitlePanel--yGKYcW_2lp",children:(0,S.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:e("team_groups_list_onboarding_title")})}),(0,S.BX)("div",{className:"onboardingStepsContainer--LZ8j5MDbRH",children:[(0,S.BX)("div",{className:Jp,children:[(0,S.tZ)("div",{className:eg,children:(0,S.tZ)("div",{className:ng,children:"1"})}),(0,S.tZ)("div",{className:tg,children:e("team_groups_list_onboarding_step_1")})]}),(0,S.tZ)("div",{className:Qp,children:ag||(ag=(0,S.tZ)("img",{src:Yp}))}),(0,S.BX)("div",{className:Jp,children:[(0,S.tZ)("div",{className:eg,children:(0,S.tZ)("div",{className:ng,children:"2"})}),(0,S.tZ)("div",{className:tg,children:e("team_groups_list_onboarding_step_2")})]}),(0,S.tZ)("div",{className:Qp,children:ig||(ig=(0,S.tZ)("img",{src:Yp}))}),(0,S.BX)("div",{className:Jp,children:[(0,S.tZ)("div",{className:eg,children:(0,S.tZ)("div",{className:ng,children:"3"})}),(0,S.tZ)("div",{className:tg,children:e("team_groups_list_onboarding_step_3")})]})]})]})},og=({key:e,index:t,isFirstTimeGroupCreation:n,hasNewGroupDelayPassed:a,children:i})=>{const{translate:r}=(0,p.Z)();return(0,S.tZ)(re.ua7,{sx:{"@keyframes fadeIn":{"0%":{opacity:0},"100%":{opacity:1}},animation:"fadeIn 250ms ease-out"},passThrough:0!==t||!n||!a,placement:"bottom",arrowSize:12,trigger:"persist",content:(0,S.tZ)(o.nv,{color:"ds.text.inverse.standard",children:r("team_groups_list_new_group_tooltip")}),children:i},e)},lg=({enforcePaywall:e,className:t})=>{const{translate:n}=(0,p.Z)(),{routes:a}=(0,i.Xo)();return(0,S.tZ)(o.ke,{title:n(e?"team_group_list_paywall_block_title":"team_group_list_paywall_warning_title"),description:n("team_group_list_paywall_description"),actions:[(0,S.tZ)(i.rU,{to:`${a.teamAccountChangePlanRoutePath}?plan=business`,onClick:()=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:e?l.ClickOrigin.GroupsStarterLimitReached:l.ClickOrigin.GroupsStarterLimitCloseToBeReached,button:l.Button.UpgradeBusinessTier}))},children:(0,S.tZ)(o.zx,{icon:"PremiumOutlined",layout:"iconLeading",size:"small",children:n("team_group_list_paywall_upgrade")})},"upgrade")],mood:e?"warning":"brand",size:"large",className:t})};var cg=n(6135);const dg=({className:e})=>{const{translate:t}=(0,p.Z)(),n=ee.tz;return(0,S.tZ)(o.ke,{title:t("team_group_list_in_trial_business_paywall_block_title"),description:t("team_group_list_in_trial_business_paywall_block_description"),mood:"brand",size:"large",actions:[(0,S.tZ)(o.zx,{onClick:()=>{},as:"a",href:n,rel:"noreferrer",target:"_blank",children:t("team_group_list_in_trial_business_paywall_block_upgrade")},"upgrade")],className:e})};var _g=n(78946);const ug=()=>{const{translate:e}=(0,p.Z)(),{routes:t}=(0,i.Xo)();return(0,S.BX)(o.Zb,{sx:{margin:"auto",textAlign:"center",gap:"24px",width:"100%",backgroundColor:"ds.container.agnostic.neutral.supershy"},children:[(0,S.tZ)("div",{sx:{paddingTop:"40px"},children:(0,S.tZ)("img",{alt:"",src:_g,sx:{objectFit:"contain",maxWidth:"320px",height:"auto"}})}),(0,S.BX)("div",{sx:{width:"512px",margin:"0 auto"},children:[(0,S.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",sx:{marginBottom:"8px"},children:e("team_groups_entrylevel_paywall_title")}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",children:e("team_groups_entrylevel_paywall_description")})]}),(0,S.tZ)(i.rU,{to:`${t.teamAccountChangePlanRoutePath}?plan=business`,sx:{paddingBottom:"64px"},children:(0,S.tZ)(o.zx,{icon:"PremiumOutlined",layout:"iconLeading",size:"large",mood:"brand",intensity:"catchy",children:e("team_upgrade_to_business")})},"upgrade")]})};var mg,pg,gg;const hg={GROUP_ROW:{display:"grid",gap:"16px",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gridAutoRows:"62px"},GROUP_ITEM:{cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"ds.container.expressive.neutral.supershy.idle",borderRadius:"4px",border:"1px solid ds.border.neutral.quiet.idle",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",padding:"20px 16px"}},yg="team_groups_list_search_placeholder",bg=(e,t)=>{const n=e.name.toLocaleLowerCase(),a=t.name.toLocaleLowerCase();return n.localeCompare(a)},xg={userGroups:{live:he.C.liveAdministrableUserGroups,query:he.C.getAdministrableUserGroups}},Sg={strategies:xg,loadingComponent:(0,S.tZ)(ai.Z,{containerStyle:{minHeight:240}})},fg=(0,qp.$)((0,jp.i)((({userGroups:e,lee:t})=>{const n=(0,r.useRef)(null),{translate:a}=(0,p.Z)(),{teamId:s}=(0,be.fV)(),{routes:c}=(0,lo.Xo)(),{addAlertToQueue:d,reportTACError:_}=H(),[u,g]=(0,r.useState)(""),[h,y]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),[f,v]=(0,r.useState)(""),[C,E]=(0,r.useState)(e),Z=(0,r.useRef)(!1),D=(0,i.k6)(),{displayStarterPaywall:T,displayInTrialBusinessPaywall:k,enforceStarterPaywall:I}=(e=>{const t=(0,X.C)(),n=(0,fe.Y)(),a=(0,xe.o)("monetization_extension_group_sharing_repackage"),i=(0,cg.S)(),r=(0,te.lZ)(),s=!r.isLoading&&r.isTeamSoftDiscontinued;if(n.status!==L.rq.Success||!a||s)return{displayStarterPaywall:!1,enforceStarterPaywall:!1,displayInTrialBusinessPaywall:!1};const o=i?.groupSharing.info?.limit,l=!!o;return{displayStarterPaywall:l,enforceStarterPaywall:l&&e.length>=o,displayInTrialBusinessPaywall:(0,Se.NG)(n.data)&&!!t?.isFreeTrial}})(e),A=Bl();(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacGroupList)}),[]),(0,r.useEffect)((()=>{const t=[...e].sort(bg),n=f?t.filter((e=>e.name.toLocaleLowerCase().includes(f.trim().toLocaleLowerCase()))):t;E(n)}),[f,e]);const w=e=>{D.push({pathname:c.teamGroupRoutePath((0,Kp.FN)(e.groupId))})},N=async e=>{var t;const n=null!=(t=e.target.value.trim())?t:"",a=""!==n&&await he.C.isGroupNameAvailable(n);g(n),y(a)},O=()=>{g("")},R=async()=>{if(!s)throw new Error("teamId missing when attempting to create group");try{await(0,ge.wZ)(t.dispatchGlobal,{name:u,teamId:s}),n.current?.hidePopup(),g(""),e?.length?Z.current&&(Z.current=!1):(Z.current=!0,setTimeout((()=>{x(!0)}),700))}catch(e){let t;try{t=JSON.parse(e.message)?.code}catch{t=`${e?.message}`.toUpperCase()}t!==G&&d({title:a("team_groups_list_create_group_error_title"),message:a("MISSING_PUBLIC_KEY"===t?"team_groups_list_create_group_missing_public_key_error_message":"team_groups_list_create_group_error_message")}),_(new Error(e.message))}};return(0,S.tZ)(go,{header:(()=>{const e=!h&&""!==u;return(0,S.tZ)("div",{sx:vp.HEADER,children:(0,S.BX)("div",{sx:{display:"flex",justifyContent:"space-between"},children:[(0,S.tZ)(o.X6,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:a("team_groups_list_title")}),I||A?null:(0,S.tZ)(fp.e,{ref:n,buttonLabel:a("team_groups_list_new_group_cta"),confirmButtonLabel:a("team_groups_list_new_group_creation_confirm_btn"),cancelButtonLabel:a("team_groups_list_new_group_creation_cancel_btn"),onConfirmButtonClick:R,onCancelButtonClick:O,confirmButtonDisabled:!h,children:(0,S.BX)("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:12},children:[(0,S.tZ)(o.nv,{as:"label",children:a("team_groups_list_new_group_creation_header")}),(0,S.tZ)(re.oil,{fullWidth:!0,onChange:N,defaultValue:u,type:"text",placeholder:a("team_groups_list_new_group_input_placeholder"),feedbackType:e?"error":void 0,feedbackText:e?a("team_groups_list_create_group_name_already_exists"):void 0,autoFocus:!0})]})})]})})})(),children:(()=>{const t=e?.length?C.map(((e,t)=>e?(0,S.tZ)(og,{index:t,isFirstTimeGroupCreation:Z.current,hasNewGroupDelayPassed:b,children:(0,S.tZ)("div",{className:"groupItem",onClick:()=>w(e),onKeyDown:t=>{"Enter"===t.key&&w(e)},tabIndex:0,role:"button",title:e.name,sx:hg.GROUP_ITEM,children:(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name})})},e.groupId):null)):mg||(mg=(0,S.tZ)(sg,{}));return(0,S.BX)(S.HY,{children:[T?(0,S.tZ)(lg,{enforcePaywall:I,sx:{marginBottom:"24px"}}):null,k?(0,S.tZ)(dg,{sx:{marginBottom:"24px"}}):null,A?gg||(gg=(0,S.tZ)(ug,{})):(0,S.BX)("div",{sx:vp.CARD_CONTAINER,children:[(0,S.tZ)(o.oi,{"aria-label":a(yg),placeholder:a(yg),type:"search",onChange:e=>{var t;return v(null!=(t=e.target.value)?t:"")},prefixIcon:pg||(pg=(0,S.tZ)(o.JO,{name:"ActionSearchOutlined"})),sx:{maxWidth:"365px",margin:0,padding:"0"}}),(0,S.tZ)(o.ke,{title:a("team_groups_list_info_box_title"),mood:"neutral"}),(0,S.tZ)("div",{sx:e?.length?hg.GROUP_ROW:void 0,children:t})]})]})})()})}),Sg),xg),vg=(0,Wp.SP)("list",{},[]);function Cg(e){const{path:t,permission:n}=e;return(0,S.tZ)(i.GB,{exact:!0,path:[t,`${t}/:uuid`],component:yp,permission:n,children:(0,S.BX)(i.rs,{children:[(0,S.tZ)(i.Vy,{exact:!0,path:t,component:fg,reducer:vg}),(0,S.tZ)(i.Vy,{path:`${t}/:uuid`,component:Hp,reducer:$p})]})})}var Eg=n(93383),Zg=n(29732),Dg=n(70923);const Tg=()=>(0,c.k)(d.o,"getTeamPolicies");var kg,Ig=n(63746);const Ag=({handleGoBack:e,userId:t})=>{const[n]=(0,o.If)(),{translate:a}=(0,p.Z)(),i="dark"===n?Ig:Hu;return(0,S.BX)("div",{sx:{padding:24},children:[(0,S.tZ)(o.kC,{justifyContent:"space-between",sx:{marginBottom:24},children:(0,S.BX)(o.kC,{alignItems:"center",gap:4,children:[(0,S.tZ)(o.zx,{layout:"iconOnly",icon:"ArrowLeftOutlined",intensity:"supershy",onClick:e}),(0,S.tZ)(o.nv,{color:"ds.text.brand.quiet",textStyle:"ds.title.section.medium",children:t}),kg||(kg=(0,S.tZ)(o.JO,{name:"CaretRightOutlined"})),(0,S.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.title.section.medium",children:a("team_members_heading_password_count")})]})}),(0,S.BX)(o.Zb,{sx:{height:"80vh",display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,S.tZ)("img",{src:i,alt:"",sx:{width:"320px",aspectRatio:"3/2"}}),(0,S.tZ)(o.nv,{textStyle:"ds.title.section.large",children:a("team_members_uvvs_no_logins")})]})]})};var wg,Ng,Og=n(26555);const Rg=()=>{const{userId:e}=(0,De.UO)(),{routes:t}=(0,i.Xo)(),{translate:n}=(0,p.Z)(),a=(0,xe.o)(Zg.c.ItemVisibilityPhase1),{data:s,status:l}=Tg(),{data:d,status:_}=(0,c.k)(Dg.d,"downloadUVVS",{userId:1}),{exportUVVS:u}=(0,q.u)(Dg.d),[m,g]=(0,r.useState)({sortId:"name",sortOrder:"DESC"}),h=(0,r.useMemo)((()=>d?.uvvs?[...d.uvvs].sort(((e,t)=>"name"===m.sortId?"ASC"===m.sortOrder?e.domain.localeCompare(t.domain):t.domain.localeCompare(e.domain):0)):[]),[d,m]),y=s?.itemVisibilityEnabled,b=()=>{(0,i.uX)(t.teamMembersRoutePath)},x=(0,r.useCallback)((async()=>{await u({userId:1})}),[u]);return l!==L.rq.Success||_!==L.rq.Success?null:(a&&y||(0,i.uX)(t.teamMembersRoutePath),d.uvvs?.length?(0,S.BX)("div",{sx:{padding:24},children:[(0,S.BX)(o.kC,{justifyContent:"space-between",sx:{marginBottom:24},children:[(0,S.BX)(o.kC,{alignItems:"center",gap:4,children:[(0,S.tZ)(o.zx,{layout:"iconOnly",icon:"ArrowLeftOutlined",intensity:"supershy",onClick:b}),(0,S.tZ)(o.nv,{color:"ds.text.brand.quiet",textStyle:"ds.title.section.medium",children:e}),wg||(wg=(0,S.tZ)(o.JO,{name:"CaretRightOutlined"})),(0,S.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.title.section.medium",children:n("team_members_heading_password_count")})]}),(0,S.tZ)(o.zx,{icon:"DownloadOutlined",mood:"brand",intensity:"quiet",layout:"iconLeading",onClick:x,children:n("webapp_account_import_export_data_csv_button")})]}),(0,S.tZ)(o.Zb,{children:(0,S.BX)(o.iA,{children:[(0,S.BX)(o.ss,{sort:m,onSort:e=>{g(e)},children:[(0,S.tZ)(o.bi,{sx:{borderRadius:0,padding:"8px 0px"},sortId:"name",children:n("team_members_uvvs_item_name")}),(0,S.tZ)(o.bi,{sx:{borderRadius:0,padding:"8px 0px"},sortId:"creation_date",children:n("team_members_uvvs_date_created")})]}),(0,S.tZ)(o.iG,{children:h?.map(((e,t)=>(0,S.BX)(o.SC,{children:[(0,S.tZ)(o.pj,{children:(0,S.BX)("div",{sx:{display:"flex",alignItems:"center",gap:4},children:[(0,S.tZ)(Og.h,{domainURL:e.domain}),e.domain,e.sharing.isShared&&(Ng||(Ng=(0,S.tZ)(o.JO,{name:"SharedOutlined",size:"xsmall"})))]})}),(0,S.tZ)(o.pj,{children:`${t}`})]},e.id)))})]})})]}):(0,S.tZ)(Ag,{handleGoBack:b,userId:e}))};var Lg=n(74537);const Mg=({handleClickOnRetry:e})=>{const{translate:t}=(0,p.Z)();return(0,S.BX)(S.HY,{children:[(0,S.tZ)("div",{sx:{transform:"translate(-5px, -5px)",margin:"25px 0px"},children:(0,S.tZ)(re.enX,{color:o.O9.lightTheme.ds.text.danger.quiet,size:75})}),(0,S.tZ)(re.$N8,{id:"backup-code-generation-error-dialog-title",title:t("team_members_generate_recovery_codes_error_dialog_title")}),(0,S.tZ)(re.a7O,{children:(0,S.tZ)(re.nvN,{id:"backup-code-generation-error-dialog-description",sx:{color:o.O9.lightTheme.ds.text.neutral.standard},children:t("team_members_generate_recovery_codes_error_dialog_description")})}),(0,S.tZ)(re.cNS,{primaryButtonTitle:t("team_members_generate_recovery_codes_error_dialog_confirm_button"),primaryButtonProps:{id:"backup-code-generation-error-dialog-try-again-button",type:"button",autoFocus:!0},primaryButtonOnClick:()=>e()})]})};var Bg,Pg=n(22958);const Ug=({memberLogin:e,recoveryCodes:t,handleClickOnDone:n})=>{const{translate:a}=(0,p.Z)();return(0,S.BX)("div",{children:[(0,S.tZ)(re.$N8,{id:"backup-code-generation-dialog-list-title",title:a("team_members_generate_recovery_codes_dialog_title",{memberLogin:e})}),(0,S.BX)(re.a7O,{children:[(0,S.tZ)(re.nvN,{id:'id="backup-code-generation-dialog-list-description"',sx:{marginBottom:"24px",marginTop:"6px",color:"ds.text.neutral.standard"},children:a("team_members_generate_recovery_codes_dialog_description",{memberLogin:e})}),(0,S.tZ)(re.j49,{color:"ds.text.brand.standard",id:'id="backup-code-generation-dialog-list-eyebrow"',children:a("team_members_generate_recovery_codes_dialog_codes_label")}),(0,S.tZ)(o.Zb,{sx:{marginTop:"6px",padding:"8px 12px",width:"100%"},children:t?.map(((e,t)=>(0,S.tZ)(re.nvN,{"data-testid":`two-factor-authentication-backup-code-${t}`,children:e},e)))}),(0,S.tZ)(re.zxk,{sx:{marginTop:"24px"},type:"button",nature:"secondary",id:"backup-code-generation-dialog-list-download-button",onClick:()=>{const e=t?.join("\n");(0,Ms.W)(e,Pg.B)},children:(0,S.BX)(o.kC,{children:[(0,S.tZ)("div",{sx:{mr:"10px"},children:Bg||(Bg=(0,S.tZ)(re._8t,{size:16}))}),a("team_members_generate_recovery_codes_dialog_download_button")]})})]}),(0,S.tZ)(re.cNS,{primaryButtonTitle:a("team_members_generate_recovery_codes_dialog_confirm_button"),primaryButtonProps:{id:"id=backup-code-generation-dialog-list-done-button",type:"button",autoFocus:!0},primaryButtonOnClick:()=>n()})]})};var Xg;const zg=({isOpen:e,memberLogin:t,closeBackupCodeDialog:n})=>{const[a,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(),l=async()=>{const e=await he.C.getRecoveryCodesAsTeamCaptain({login:t});e.success?o(e.data.recoveryCodes):i(!0)},c=()=>{i(!1),o(void 0),n()};(0,r.useEffect)((()=>{e&&!a&&l()}),[e]);const{translate:d}=(0,p.Z)();return(0,S.tZ)(re.VqE,{isOpen:e,closeIconName:a?d("BUTTON_CLOSE_DIALOG"):"",onClose:()=>{c()},children:a?(0,S.tZ)(Mg,{handleClickOnRetry:()=>{i(!1),l()}}):s?(0,S.tZ)(Ug,{memberLogin:t,recoveryCodes:s,handleClickOnDone:c}):(0,S.BX)(S.HY,{children:[(0,S.tZ)(re.$N8,{id:"backup-code-generation-dialog-loader-title",title:d("team_members_generate_recovery_codes_dialog_loading_title",{memberLogin:t})}),(0,S.tZ)(re.a7O,{children:(0,S.tZ)("div",{sx:{mt:"26px"},children:Xg||(Xg=(0,S.tZ)(ai.Z,{mode:"light",size:75}))})})]})})},qg="team_idp_infoboxes_dismiss_button",jg=()=>{const{routes:e}=(0,i.Xo)(),{translate:t}=(0,p.Z)(),n=(0,Po.Y)(pr.t,{getIdPFailedProvisioningsData:{},hasSeenIdPNeedsSeatsInfobox:{},hasSeenIdPProvisioningsPendingInfobox:{}},[]),{markIdPNeedsSeatsInfoboxSeen:a,markIdPProvisioningsPendingInfoboxSeen:r}=(0,q.u)(pr.t),{getIdPFailedProvisioningsData:s,hasSeenIdPNeedsSeatsInfobox:c,hasSeenIdPProvisioningsPendingInfobox:d}=n;if(s.status!==L.rq.Success||!s.data?.nbOfFailedCreations||c.status!==L.rq.Success||d.status!==L.rq.Success)return null;const{nbOfPendingProvisionings:_,requiredSeats:u,shouldShowNotifications:g}=s.data,h=!d.data&&g.warningProvisioningsPending,y=!c.data&&g.alertFailuresNeedSeats;return(0,S.BX)(S.HY,{children:[h?(0,S.tZ)(o.ke,{size:"large",mood:"warning",title:t("team_idp_pending_warning_infobox_title",{count:_,nbOfFailedUsers:_}),description:t("team_idp_pending_warning_infobox_description"),icon:"FeedbackWarningOutlined",actions:[(0,S.tZ)(o.zx,{size:"small",intensity:"quiet",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.Dismiss,clickOrigin:l.ClickOrigin.ProvisionRemainingSeatsReminder})),r()},children:t(qg)},"dismiss-pending-provisionings")]}):null,y?(0,S.tZ)(o.ke,{size:"large",mood:"danger",title:t("team_idp_errors_infobox_title",{count:u,nbOfFailedUsers:u}),icon:"FeedbackFailOutlined",actions:[(0,S.tZ)(o.zx,{size:"small",intensity:"quiet",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.Dismiss,clickOrigin:l.ClickOrigin.InsufficientSeatsProvisioningErrorBanner})),a()},children:t(qg)},"dismiss-failed-provisionings"),(0,S.tZ)(o.zx,{as:i.rU,size:"small",intensity:"catchy",to:`${e.teamAccountRoutePath}?showSeatsDialog=true&seatsToBuy=${u}`,onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuySeats,clickOrigin:l.ClickOrigin.InsufficientSeatsProvisioningErrorBanner}))},children:t("team_idp_errors_infobox_button_buy_seats",{count:u})},"buy-seats-idp")]}):null]})},Fg=e=>e.filter((e=>["pending","proposed"].includes(e.status)));var Gg=n(96266),Vg=n(89368);const Hg=({title:e,icon:t,description:n,onClick:a,key:i})=>(0,S.tZ)(re.W7o,{fullWidth:!0,onClick:a,sx:{height:"auto",textAlign:"left"},children:(0,S.BX)(re.T5p,{gap:"4px",gridTemplateColumns:"20px auto",gridTemplateRows:"auto auto",children:[(0,S.tZ)(re.dDn,{children:(0,S.tZ)(o.JO,{name:t,size:"medium"})}),(0,S.tZ)(re.dDn,{children:(0,S.tZ)(o.nv,{as:"span",textStyle:"ds.body.standard.strong",children:e})}),n?(0,S.tZ)(re.dDn,{gridArea:"2 / 2 / 3 / 3",sx:{textWrap:"wrap"},children:(0,S.tZ)(o.nv,{as:"span",color:"ds.text.neutral.quiet",textStyle:"ds.title.block.small",children:n})}):null]})},i);var Wg;const $g=({members:e,onMembersActionSelect:t})=>{const{translate:n}=(0,p.Z)(),{getInviteLinkDataForAdmin:a}=eu(),i=(0,xe.o)(s_.G.WebOnboardingInviteLinkTacMigration),r=su(),s=r.status===L.rq.Success?r:void 0;return null==i?null:(0,S.tZ)(re.h_2,{sx:{zIndex:1001},content:[(0,S.tZ)(Hg,{onClick:()=>{t("reinviteAll",Fg(e))},icon:"NotificationOutlined",title:n("team_members_resend_invite_all")},"resendInvite"),(0,S.tZ)(Hg,{onClick:async()=>{const e=i?null:await a();t((i?s?.enabled:e?.teamKey&&!e?.disabled)?"shareInviteLink":"enableInviteLink")},icon:"ActionCopyOutlined",title:n("team_members_share_invite_link")},"shareInviteLink"),(0,S.tZ)(Hg,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.DownloadCsv})),(e=>{(0,Ms.S)((e=>{const t=e.map((e=>{var t,n,a,i;return[e.login,e.status,e.twoFAInformation?.type,null!=(t=e.nbrPasswords)?t:0,null!=(n=e.weakPasswords)?n:0,null!=(a=e.reused)?a:0,null!=(i=e.compromisedPasswords)?i:0,e.nbrPasswords>=5?e.securityIndex:"unavailable",e.ssoStatus,e.accountRecoveryKeyStatus,e.recoveryCreationDateUnix?"enabled":"disabled",e.lastUpdateDateUnix?(0,Rt.Z)(e.lastUpdateDateUnix).toISOString():e.revokedDateUnix?(0,Rt.Z)(e.revokedDateUnix).toISOString():e.status].join(",")})).join("\n");return`${["login email","status","twoFA_Status","number_passwords","weak_passwords","reused_passwords","compromised_passwords","password_health_score","sso_status","account_recovery_key_status","admin_recovery_status","last_active"].join(",")}\n${t}`})(e),"team-members.csv","text/csv;charset=utf-8")})(e)},icon:"DownloadOutlined",title:n("team_members_download_csv"),description:n("team_members_download_csv_description")},"exportUserCSV")].filter(Boolean),children:(0,S.tZ)(o.zx,{id:"expand-invite-option","aria-label":n("team_members_expand_invite_option"),intensity:"quiet",mood:"neutral",size:"medium",layout:"iconOnly",sx:{marginLeft:"16px"},icon:Wg||(Wg=(0,S.tZ)(o.JO,{name:"ActionMoreOutlined",size:"medium",color:"ds.text.neutral.standard"}))})})};var Kg=n(57341),Yg=n(7867),Qg=n(19474),Jg=n(9748);const eh={teamCaptain:"team_members_assignment_dialog_admin_description",groupManager:"team_members_assignment_dialog_group_manager_description",member:"team_members_assignment_dialog_member_description"};var th=function(e){return e.TeamCaptain="teamCaptain",e.Member="member",e.GroupManager="groupManager",e}(th||{});const nh=({member:e,newRole:t,updateUsersRights:n,closeDialog:a})=>{const{translate:i}=(0,p.Z)(),s=(0,Rn.V)(),l=(0,Jg.U)(),c=sh(e),[d,_]=(0,r.useState)(null!=t?t:c),u=Bl(),m=u?th:rh;return null===l?null:(0,S.BX)(re.VqE,{isOpen:!0,onClose:a,closeIconName:i("_common_dialog_dismiss_button"),children:[(0,S.tZ)(re.$N8,{title:i("team_members_assignment_dialog_title",{user:e.login})}),(0,S.BX)(re.a7O,{children:[(0,S.tZ)(Qg.S,{value:d,onChange:e=>{_(e.target.value)},groupName:"roles",children:Object.values(m).map((e=>{return(0,S.BX)(Qg.E,{value:e,disabled:(t=e,!!(l&&t!==rh.TeamCaptain&&t!==d||u&&t===rh.GroupManager)),children:["groupManager"===e&&u?(0,S.tZ)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:(0,S.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",children:i(oh[e])}),(0,S.tZ)(o.Ct,{mood:"brand",intensity:"quiet",label:i("team_upgrade_label"),layout:"iconLeading",iconName:"PremiumOutlined",sx:{color:"ds.text.brand.standard !important",alignSelf:"center"}})]})}):(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",children:i(oh[e])}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:i(eh[e])})]},e);var t}))}),d===rh.Member||u?null:(0,S.tZ)(o.ke,{mood:"brand",title:i("team_members_assignment_dialog_groups_infobox")})]}),(0,S.tZ)(re.cNS,{primaryButtonTitle:i("team_members_assignment_dialog_update_button"),primaryButtonOnClick:async()=>{if(d===c)return a();try{const t=await n([{member:e,oldRole:c,newRole:d}]);if(!t)return;if(t.successes.length)s.showAlert(i("team_members_assignment_single_success",{username:e.name||e.login||"Member",previousRole:i(oh[c]),newRole:i(oh[d])}),re.BLW.SUCCESS);else if(t.errors.length)throw t.errors[0].error}catch{s.showAlert(i("team_members_assignment_single_error",{username:e.name||e.login||"Member"}),re.BLW.ERROR)}finally{a()}},primaryButtonProps:{type:"button",style:{padding:"0 20px"},disabled:d===c},secondaryButtonTitle:i("team_members_assignment_dialog_cancel_button"),secondaryButtonOnClick:a,secondaryButtonProps:{type:"button",style:{border:"none",padding:"0 20px",color:"ds.text.neutral.catchy",backgroundColor:"ds.container.expressive.neutral.quiet.idle"}}})]})},ah="team_members_assignment_multiple_error",ih=({selectedMembers:e,newRole:t,updateUsersRights:n,closeDialog:a})=>{const{translate:i}=(0,p.Z)(),r=(0,Rn.V)();return(0,S.tZ)(Ya.o,{isOpen:!0,footer:(0,S.tZ)(re.cNS,{intent:"primary",primaryButtonTitle:i("team_members_assignment_multiple_dialog_submit"),primaryButtonOnClick:async()=>{const s=e.map((e=>({member:e,oldRole:sh(e),newRole:t})));try{const e=await n(s);if(!e)return;const a=i(oh[t]);e.successes.length&&e.errors.length?r.showAlert(i("team_members_assignment_multiple_partial_success",{countSuccess:e.successes.length,countTotal:s.length,newRole:a}),re.BLW.WARNING):e.successes.length?r.showAlert(i("team_members_assignment_multiple_success",{count:e.successes.length,newRole:a}),re.BLW.SUCCESS):e.errors.length&&r.showAlert(i(ah,{count:e.errors.length}),re.BLW.ERROR)}catch{r.showAlert(i(ah,{count:e.length}),re.BLW.ERROR)}finally{a()}},secondaryButtonTitle:i("team_members_assignment_multiple_dialog_cancel"),secondaryButtonOnClick:a}),onRequestClose:a,title:i("team_members_assignment_multiple_dialog_title",{countTotal:e.length,newRole:i(oh[t])}),children:(()=>{switch(t){case rh.TeamCaptain:return i("team_members_assignment_multiple_dialog_admin_message");case rh.GroupManager:return i("team_members_assignment_multiple_dialog_group_manager_message");default:return i("team_members_assignment_multiple_dialog_member_message")}})()})};let rh=function(e){return e.TeamCaptain="teamCaptain",e.GroupManager="groupManager",e.Member="member",e}({});const sh=e=>e.isTeamCaptain?rh.TeamCaptain:e.isGroupManager?rh.GroupManager:rh.Member,oh={teamCaptain:"team_members_assignment_dialog_admin_label",groupManager:"team_members_assignment_dialog_group_manager_label",member:"team_members_assignment_dialog_member_label"},lh=({selectedMembers:e,newRole:t,lee:n,closeDialog:a})=>{const{reportTACError:i}=H(),{translate:r}=(0,p.Z)(),{addGroupManager:s,removeGroupManager:o}=(0,q.u)(Ji.J),l=async e=>{const t=(0,Lr.v0)(n.globalState);if(!t)return void i(new Error(Rr.N));const{teamId:a}=t;if(!a)throw new Error("No team ID when attempting role assignment");const r={errors:[],successes:[]};for await(const{member:t,oldRole:i,newRole:l}of e)try{switch(i){case rh.TeamCaptain:await(0,ge.Lx)({teamId:a,memberLogin:t.login}),n.dispatch(Eg.bj(t)),await(0,ge.hh)({teamId:a,action:"adminDemoted",users:[t.login]});break;case rh.GroupManager:await o({memberLogin:t.login,teamId:a}),n.dispatch(Eg.vE(t))}switch(l){case rh.TeamCaptain:await(0,ge.JQ)({teamId:a,memberLogin:t.login}),n.dispatch(Eg.VW(t)),await(0,ge.hh)({teamId:a,action:"adminPromoted",users:[t.login]});break;case rh.GroupManager:await s({memberLogin:t.login,teamId:a}),n.dispatch(Eg.lp(t))}r.successes.push(t.login)}catch(e){r.errors.push({member:t.login,error:e})}return r};return e.length?1===e.length?(0,S.tZ)(nh,{member:e[0],newRole:t,updateUsersRights:l,closeDialog:a}):(0,S.tZ)(ih,{selectedMembers:e,newRole:null!=t?t:rh.Member,updateUsersRights:l,closeDialog:a}):(0,S.tZ)(Ya.o,{isOpen:!0,footer:(0,S.tZ)(re.cNS,{intent:"secondary",secondaryButtonTitle:r("team_members_assignment_nobody_dialog_cancel"),secondaryButtonOnClick:a}),onRequestClose:a,title:r("team_members_assignment_nobody_dialog_title"),children:r("team_members_assignment_nobody_dialog_message",{newRole:t?r(oh[t]):""})})},ch="team_members_bulk_actions_menu_member",dh="team_members_bulk_actions_menu_group_manager",_h=({onMultipleReassignActionSelect:e})=>{const{translate:t}=(0,p.Z)(),{openDialog:n,shouldShowFrozenStateDialog:a}=(0,I.Ub)(),i=Bl(),[s,l]=r.useState(!1),c=t=>{a&&t!==rh.TeamCaptain?n():e(t),l(!1)};return(0,S.tZ)(Yg.j,{onOutsideClick:()=>{l(!1)},children:(0,S.BX)("div",{className:"container--zGfanmJ20J",children:[(0,S.tZ)(Kg.Z,{label:t("team_members_bulk_actions_menu_label"),onClick:()=>{l(!s)},classNames:["dropdownButton--eX1Pwf6noX"],icon:(0,S.tZ)("img",{className:dd()("buttonIcon--K7qOhGWIeC",{"flip--CjjllwCv0e":s}),src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iNiIgdmlld0JveD0iMCAwIDEwIDYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTkuNSAwLjVMNSA1LjVMMC41IDAuNSIgc3Ryb2tlPSIjNkU4NjhCIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==",role:"none"}),iconClassName:["iconContainer--_MWkwTD793"],iconPosition:"right"}),s?(0,S.BX)("ul",{className:"menu--svPbw6Qghp",children:[(0,S.tZ)("li",{onClick:()=>c(rh.TeamCaptain),children:t("team_members_bulk_actions_menu_admin")},"admin"),i?(0,S.BX)(S.HY,{children:[(0,S.tZ)("li",{onClick:()=>c(rh.Member),children:t(ch)},"member"),(0,S.tZ)("li",{sx:{pointerEvents:"none",color:"ds.text.oddity.disabled"},children:(0,S.tZ)(o.nv,{sx:{color:"ds.text.oddity.disabled"},children:t(dh)})},"groupManager")]}):(0,S.BX)(S.HY,{children:[(0,S.tZ)("li",{onClick:()=>c(rh.GroupManager),children:t(dh)},"groupManager"),(0,S.tZ)("li",{onClick:()=>c(rh.Member),children:t(ch)},"member")]})]}):null]})})};var uh=function(e){return e[e.TEAM_CAPTAIN=0]="TEAM_CAPTAIN",e[e.GROUP_MANAGER=1]="GROUP_MANAGER",e[e.BILLING_ADMIN=2]="BILLING_ADMIN",e[e.ACCEPTED=3]="ACCEPTED",e[e.PENDING_PROPOSED=4]="PENDING_PROPOSED",e[e.DEFAULT=5]="DEFAULT",e}(uh||{});const mh=({isTeamCaptain:e,isBillingAdmin:t,isGroupManager:n,status:a})=>{switch(!0){case e:return uh.TEAM_CAPTAIN;case n:return uh.GROUP_MANAGER;case t:return uh.BILLING_ADMIN;case"accepted"===a:return uh.ACCEPTED;case["pending","proposed"].includes(a):return uh.PENDING_PROPOSED;default:return uh.DEFAULT}},ph=(e,t)=>"number"==typeof e?e:t&&["pending","proposed","removed","revoked"].includes(t)?-1:0,gh=e=>e.map((e=>{return{...e,filterableStatus:(t=e.status,"proposed"===t?"pending":"revoked"===t?"removed":"unproposed"!==t?t:void 0),sortableLastActivity:e.revokedDateUnix||e.lastUpdateDateUnix||0,sortablePasswords:ph(e.nbrPasswords,e.status),sortableRights:mh(e),sortableSecurityScore:ph(e.securityIndex,e.status),sortableSafePasswords:ph(e.safePasswords,e.status),sortableWeakPasswords:ph(e.weakPasswords,e.status),sortableReused:ph(e.reused,e.status),sortableCompromisedPasswords:ph(e.compromisedPasswords,e.status)};var t}));var hh=n(73630),yh=n(92350);const bh=({member:e,onDismiss:t,onMemberActionSelect:n})=>{const{translate:a}=(0,p.Z)(),{routes:r}=(0,i.Xo)(),{data:s}=Tg(),l="pending"!==e.status&&"proposed"!==e.status,c=!!e.twoFAInformation&&("totp_device_registration"===e.twoFAInformation.type||"totp_login"===e.twoFAInformation.type),d=(0,xe.o)(yh.u.ChangeLoginEmailWebDev),_=(0,xe.o)(Zg.c.ItemVisibilityPhase1),u=s?.itemVisibilityEnabled,m=e.changeLoginEmailPending&&["pending_activation",null,void 0].includes(e.ssoStatus),g=(t,a)=>{t.preventDefault(),"Enter"===t.key&&n(a,e)};return(0,S.tZ)(Yg.j,{onOutsideClick:t,children:(0,S.tZ)("ul",{className:"menu--tp5V4puFsY",children:(()=>{if("removed"===e.status)return(0,S.BX)("li",{id:"reactivate-quick-action",onClick:()=>n("reactivate",e),onKeyDown:e=>g(e,"reactivate"),role:"menuitem",children:[(0,S.tZ)(o.JO,{name:"ItemEmailOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_reactivate_single_label")]},"reactivate");const t=[];return"pending"!==e.status&&"proposed"!==e.status||t.push((0,S.BX)("li",{id:"reinvite-quick-action",onClick:()=>n("reinvite",e),onKeyDown:e=>g(e,"reinvite"),role:"menuitem",children:[(0,S.tZ)(o.JO,{name:"ItemEmailOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_resend_invite_label")]},"resendInvite")),l&&t.push((0,S.BX)("li",{id:"reassign-quick-action",onClick:()=>n("reassign",e),onKeyDown:e=>g(e,"reassign"),role:"menuitem",children:[(0,S.tZ)(o.JO,{name:"ItemPersonalInfoOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_change_role_label")]},"reassign")),d&&(l&&!m&&t.push((0,S.BX)("li",{id:"change-login-email",onClick:()=>n("changeLoginEmail",e),onKeyDown:e=>g(e,"changeLoginEmail"),role:"menuitem",children:[(0,S.tZ)(o.JO,{name:"ItemLoginOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_change_login_email")]},"change-login-email")),l&&m&&t.push((0,S.BX)("li",{id:"pending-change-email",onClick:()=>n("cancelChangeLoginEmail",e),onKeyDown:e=>g(e,"cancelChangeLoginEmail"),role:"menuitem",children:[(0,S.tZ)(o.JO,{name:"ItemLoginOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_cancel_change_email")]},"pending-change-email"))),_&&l&&u&&t.push((0,S.BX)("li",{id:"view-logins",onClick:()=>{(0,i.uX)(r.teamMemberRoutePath(e.login))},onKeyDown:()=>{},role:"menuitem",children:[(0,S.tZ)(o.JO,{name:"ActionRevealOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),"View logins"]},"view-logins")),t.push((0,S.tZ)(o.u,{content:a("team_members_assignment_dialog_remove_billing_contact_tooltip"),location:"top",passThrough:!e.isBillingAdmin,sx:{whiteSpace:"normal"},children:(0,S.BX)("li",{id:"revoke-quick-action",onClick:e.isBillingAdmin?void 0:()=>n("revoke",e),onKeyDown:t=>!e.isBillingAdmin&&g(t,"revoke"),role:"menuitem",sx:e.isBillingAdmin?{cursor:"not-allowed !important",opacity:"0.5"}:void 0,children:[(0,S.tZ)(o.JO,{name:"ActionDeleteOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_revoke_single_label")]},"revoke")},"revoke")),c&&l&&t.push((0,S.BX)("li",{id:"generate-2fa-recovery-code-quick-action",onClick:()=>n("generateBackupCode",e),onKeyDown:e=>g(e,"generateBackupCode"),role:"menuitem",children:[(0,S.tZ)(o.JO,{name:"RecoveryKeyOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_generate_recovery_codes_label")]},"generate2FABackupCodes")),t})()})})},xh="securityScoreOver80--Hgr2G6S0v_",Sh="securityScoreOver60--_JHvGMsVMu",fh="securityScoreOver40--uopteVjbhe",vh="securityScoreOver20--DGwlRT6aTn",Ch="securityScoreOver0--KWOlPM746R",Eh="securityScoreUnknown--X1UUUGTTOI",Zh="box--b300GjbePX",Dh="shield--aR0K8YOyOo",Th="medium--oK53lyprG3",kh="small--Y3Ur7GidSI",Ih=({score:e,size:t,children:n})=>{const a="small"===t?kh:Th;return(0,S.BX)("div",{className:dd()(Zh,(i=e,i.caseOf({nothing:()=>Eh,just:e=>e>=80?xh:e>=60?Sh:e>=40?fh:e>=20?vh:Ch})),a),children:[(0,S.tZ)("div",{className:Dh}),(0,S.tZ)("div",{children:n})]});var i};var Ah,wh;const Nh={LOGIN_TEXT:{variant:"text.ds.body.reduced.regular",wordBreak:"break-word",color:"ds.text.neutral.catchy",marginLeft:"16px",maxWidth:"280px",minWidth:"140px"},ROW:{boxShadow:"inset 0 -1px 0 0 ds.border.neutral.quiet.idle",height:"60px",variant:"text.ds.body.reduced.regular",td:{padding:"16px",verticalAlign:"middle"}},ACTIVE:{color:"ds.text.neutral.standard"},REVOKED:{color:"ds.text.neutral.quiet"}},Oh="team_members_row_invitation_pending",Rh=({checkedMembers:e,currentLoggedLogin:t,members:n,onMemberActionSelect:a,onMemberToggleCheck:i})=>{var s,l;const{translate:c}=(0,p.Z)(),[d,_]=(0,r.useState)(null),u=e=>{_(e===d?null:e)},m=(e,t)=>{u(d),a(e,t)},g=()=>(0,S.BX)(o.kC,{gap:"4px",children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:c("team_members_row_security_score_unavailable")}),(0,S.tZ)(o.u,{wrapTrigger:!0,location:"bottom",content:c("team_members_row_security_score_breakdown_less_than_five"),children:(0,S.tZ)("div",{sx:{display:"flex",alignItems:"center"},children:Ah||(Ah=(0,S.tZ)(o.JO,{name:"FeedbackInfoOutlined",color:"ds.text.neutral.quiet",size:"xsmall"}))})})]}),h=e=>{const t=Sp.Maybe.maybe(e.nbrPasswords>=5||!e.nbrPasswords&&e.securityIndex&&e.securityIndex>0?e.securityIndex:null);return t.caseOf({just:e=>0===e?s||(s=(0,S.tZ)(g,{})):(0,S.tZ)(Ih,{score:t,size:"small",children:(0,S.tZ)("div",{className:"securityScoreCellText--uh3PGGldwN",children:`${Fl(e)}%`})}),nothing:()=>l||(l=(0,S.tZ)(g,{}))})},y=e=>{switch(!0){case["pending","proposed"].includes(e.status):return c(Oh);case Boolean(e.lastUpdateDateUnix||e.revokedDateUnix):return(0,S.tZ)(Mu.Z,{date:(0,Rt.Z)(e.lastUpdateDateUnix||e.revokedDateUnix)});case"pending"===e.status:return c(Oh);default:return c("team_members_row_never_logged_in")}},b=e=>"removed"===e.status?c("team_members_row_revoked"):e.isTeamCaptain?c("team_members_row_captain"):e.isGroupManager?c("team_members_row_group_manager"):c("team_members_row_member"),x=e=>(0,S.tZ)(bh,{member:e,onDismiss:()=>u(e.login),onMemberActionSelect:m});return(0,S.tZ)("tbody",{className:"tableBody--UVKDDE_osD",children:(()=>{const a=(e,t)=>null!=t?t:"accepted"!==e?"-":0;return n.map((n=>{return(0,S.BX)("tr",{id:"removed"===n.status?"revoked":"active",sx:(0,o.jM)([Nh.ROW,"removed"===n.status?Nh.REVOKED:Nh.ACTIVE]),children:[(0,S.tZ)("td",{children:n.login!==t&&"removed"!==n.status&&(0,S.tZ)(o.XZ,{checked:!!Array.from(e).find((e=>e.login===n.login)),"aria-label":"Select user",onChange:()=>i(n)})}),(0,S.BX)("td",{className:"loginCell--zmWQn6nt_m",children:[(0,S.tZ)(Ks.q,{email:n.login,size:30}),(0,S.tZ)("div",{sx:Nh.LOGIN_TEXT,className:"automation-tests-member-login",children:(0,S.tZ)(hh.Z,{tooltipText:n.login,children:n.login})})]}),(0,S.tZ)("td",{className:"securityScoreCell--TRrWX93JKm",children:h(n)}),(0,S.BX)("td",{className:"passwordsCell--gft4asedk5",children:[(0,S.tZ)("span",{className:"passwordsCellIcon--oJaMYYHQ_9"}),(r=n.status,s=n.nbrPasswords,"accepted"!==r?"-":!s||s<5?"<5":s)]}),(0,S.tZ)("td",{children:a(n.status,n.safePasswords)}),(0,S.tZ)("td",{children:a(n.status,n.weakPasswords)}),(0,S.tZ)("td",{children:a(n.status,n.reused)}),(0,S.tZ)("td",{children:a(n.status,n.compromisedPasswords)}),(0,S.tZ)("td",{children:y(n)}),(0,S.BX)("td",{children:[n.isBillingAdmin?(0,S.tZ)(o.u,{location:"top",content:c("team_account_heading_billing_admin_tooltip"),sx:{textAlign:"start"},children:(0,S.BX)("div",{sx:{display:"flex",alignItems:"center"},children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.strong",sx:{display:"inline-block"},children:c("team_account_heading_billing_admin")}),(0,S.tZ)(o.JO,{color:"ds.text.neutral.standard",name:"FeedbackInfoOutlined",sx:{display:"inline-block",marginLeft:"4px"},size:"small"})]})}):null,b(n)]}),(0,S.BX)("td",{className:"actionsCell--NotN6ngLnK",style:{position:"relative"},children:[n.login===d?x(n):null,n.login!==t?(0,S.tZ)(o.zx,{id:"users-action-menu-button","aria-label":c("team_members_row_aria_label_users_actions"),onClick:()=>u(n.login),layout:"iconOnly",intensity:"supershy",icon:wh||(wh=(0,S.tZ)(o.JO,{name:"SettingsOutlined",color:"ds.text.neutral.standard"}))}):null]})]},n.login);var r,s}))})()})},Lh={TOP:{display:"flex",justifyContent:"space-between",height:"90px",marginBottom:"16px",color:"ds.text.neutral.quiet"},TOP_PAGINATION_TEXT:{whiteSpace:"nowrap",display:"flex",gap:"5px",alignItems:"center",maxHeight:"42px",overflowY:"hidden",marginRight:"16px"}},Mh="team_members_heading_name",Bh="team_members_heading_security_score",Ph="team_members_heading_password_count",Uh="team_members_heading_last_login",Xh=24,zh=({lee:e,members:t,onMembersActionSelect:n,onMembersInvite:a})=>{var i;const{translate:s}=(0,p.Z)(),l=(0,xe.o)(yh.u.ChangeLoginEmailWebDev),c=(0,Lr.v0)(e.globalState),d=null!=(i=c?.login)?i:"",[_,u]=(0,r.useState)(gh(t)),[m,g]=(0,r.useState)(new Set),[h,y]=(0,r.useState)(0),[b,x]=(0,r.useState)(["accepted","pending","removed"]),[f,v]=(0,r.useState)(!1),C=[...b,f],[E,Z]=(0,r.useState)(""),[D,T]=(0,r.useState)({sortBy:"sortableRights",sortOrder:"asc"}),k=Bl()?"team_members_heading_entrylevel_tooltip_markup":"team_members_heading_rights_tooltip_markup";(0,r.useEffect)((()=>{g(new Set),u(gh(t))}),[t]);const I=()=>{const e=E?.toLocaleUpperCase(),t="asc"===D.sortOrder?wp.ascend:wp.descend;return(0,wp.sortWith)([t((0,wp.prop)(D.sortBy))])(_.filter((e=>e.filterableStatus&&C.includes(e.filterableStatus))).filter((e=>e.changeLoginEmailPending&&f?C.includes(e.changeLoginEmailPending):_)).filter((t=>!E||t.login.toLocaleUpperCase().includes(e))))},A=e=>{y(e)},w=e=>{const t=e===D.sortBy&&"asc"===D.sortOrder?"desc":"asc";T({sortBy:e,sortOrder:t})},N=e=>{y(0),x((t=>t.includes(e)?t.filter((t=>t!==e)):t.concat([e])))},O=e=>!e.isBillingAdmin&&["accepted","pending","proposed"].includes(e.status),R=()=>{g(new Set)},L=()=>{const e=h*Xh,t=new Set;I().slice(e,e+Xh).reduce(((e,t)=>(d===t.login||e.add({...t}),e)),t),Array.from(m).forEach((e=>t.add({...e}))),g(t)},M=h*Xh,B=I(),P={first:B.length?M+1:0,last:Math.min(B.length,M+Xh)},U=B.slice(M,M+Xh),X=(e=>{const t=e.filter((e=>Array.from(m).find((t=>t.login===e.login)))).length;let n;return e.find((e=>e.login===d)),e.length,n=0===t?L:R,(0,S.tZ)(o.XZ,{onChange:n,"aria-label":"select-all"})})(U),z=[{headerLabel:"",headerElement:X,headerKey:"checkbox"},{headerLabel:s(Mh),tooltipLabel:s(Mh),onClick:()=>w("login"),sortOrder:"login"!==D.sortBy?void 0:D.sortOrder,headerKey:"login"},{headerLabel:s(Bh),tooltipLabel:s(Bh),onClick:()=>w("sortableSecurityScore"),sortOrder:"sortableSecurityScore"!==D.sortBy?void 0:D.sortOrder,headerKey:"security-score"},{headerLabel:s(Ph),tooltipLabel:s(Ph),onClick:()=>w("sortablePasswords"),sortOrder:"sortablePasswords"!==D.sortBy?void 0:D.sortOrder,headerKey:"num-passwords"},{headerLabel:s("team_members_heading_safe"),tooltipLabel:s("team_members_heading_safe_tooltip"),onClick:()=>w("sortableSafePasswords"),sortOrder:"sortableSafePasswords"!==D.sortBy?void 0:D.sortOrder,headerKey:"safe-passwords"},{headerLabel:s("team_members_heading_weak"),tooltipLabel:s("team_members_heading_weak_tooltip"),onClick:()=>w("sortableWeakPasswords"),sortOrder:"sortableWeakPasswords"!==D.sortBy?void 0:D.sortOrder,headerKey:"weak-passwords"},{headerLabel:s("team_members_heading_reused"),tooltipLabel:s("team_members_heading_reused_tooltip"),onClick:()=>w("sortableReused"),sortOrder:"sortableReused"!==D.sortBy?void 0:D.sortOrder,headerKey:"reused-passwords"},{headerLabel:s("team_members_heading_compromised"),tooltipLabel:s("team_members_heading_compromised_tooltip"),onClick:()=>w("sortableCompromisedPasswords"),sortOrder:"sortableCompromisedPasswords"!==D.sortBy?void 0:D.sortOrder,headerKey:"compromised-passwords"},{headerLabel:s(Uh),tooltipLabel:s(Uh),onClick:()=>w("sortableLastActivity"),sortOrder:"sortableLastActivity"!==D.sortBy?void 0:D.sortOrder,headerKey:"last-login"},{headerLabel:(0,S.BX)("span",{sx:{display:"flex",alignItems:"center"},children:[s("team_members_heading_rights")," ",(0,S.tZ)(o.JO,{color:"ds.text.neutral.quiet",name:"FeedbackInfoOutlined",sx:{display:"inline-block",marginLeft:"4px"},size:"small"})]}),tooltipLabel:(0,S.tZ)("div",{sx:{"& > * > p:not(:last-child)":{marginBottom:"10px"}},children:s.markup(k)}),onClick:()=>w("sortableRights"),sortOrder:"sortableRights"!==D.sortBy?void 0:D.sortOrder,headerKey:"permissions"},{headerLabel:s("team_members_heading_actions"),headerKey:"actions"}];return(0,S.BX)("div",{className:"container--lTIFkRrWrT",children:[(0,S.tZ)("div",{sx:Lh.TOP,children:(0,S.BX)("div",{className:"tableHeaderContainer--NOzH1jto0x",children:[(0,S.tZ)(Vg.n,{type:"search",containerStyle:{flexGrow:1,maxWidth:"300px",marginBottom:"15px"},onChange:e=>{y(0),Z(e.currentTarget.value)},placeholder:s("team_members_filter_control_search_placeholder"),placeholderIcon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMSAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNNy4zNzUgMTMuNzY0Nkw0LjM3NSAxNi43NjQ2TTE2LjM3NSA5LjI2NDY1QzE2LjM3NSAxMS43NDk5IDE0LjM2MDMgMTMuNzY0NiAxMS44NzUgMTMuNzY0NkM5LjM4OTcyIDEzLjc2NDYgNy4zNzUgMTEuNzQ5OSA3LjM3NSA5LjI2NDY1QzcuMzc1IDYuNzc5MzcgOS4zODk3MiA0Ljc2NDY1IDExLjg3NSA0Ljc2NDY1QzE0LjM2MDMgNC43NjQ2NSAxNi4zNzUgNi43NzkzNyAxNi4zNzUgOS4yNjQ2NVoiIHN0cm9rZT0iI0NDQzdDMiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz4KPC9zdmc+Cg=="}),(0,S.BX)("div",{className:"topContainer--ST6B1mEZjJ",children:[(0,S.tZ)("div",{className:"topLeft--viTEuhR25Z",children:(0,S.BX)("div",{className:"statusFilters--SMNEn98faE",children:[(0,S.tZ)(o.XZ,{label:s("team_members_filter_control_include_active"),onChange:()=>N("accepted"),checked:b.includes("accepted")}),(0,S.tZ)(o.XZ,{label:s("team_members_filter_control_include_invited"),onChange:()=>N("pending"),checked:b.includes("pending")}),(0,S.tZ)(o.XZ,{label:s("team_members_filter_control_include_revoked"),onChange:()=>N("removed"),checked:b.includes("removed")}),l?(0,S.tZ)(o.XZ,{label:s("team_members_filter_control_include_pending_email_change"),onChange:()=>v((e=>!e)),checked:f}):null]})}),m.size>0&&[(0,S.tZ)(_h,{onMultipleReassignActionSelect:e=>{let t=[...m];switch(e){case"member":t=t.filter((e=>e.isTeamCaptain||e.isGroupManager));break;case"teamCaptain":t=t.filter((e=>!e.isTeamCaptain&&"accepted"===e.status));break;case"groupManager":t=t.filter((e=>!e.isGroupManager&&"accepted"===e.status))}n("reassign",t,e)}},"dropdown"),(0,S.tZ)(Gg.Z,{classNames:["revokeButton--_sdxTpsqR2 topButton--vxY2fF8Lv4"],label:s("team_members_revoke_multiple_label"),disabled:![...m].some(O),onClick:()=>{let e=[...m];e=e.filter(O),n("revoke",e)}},"button")],(0,S.BX)("div",{className:"topRight--YZ2DF7wcrD",children:[(0,S.BX)("div",{className:"topPagination--rTlBiQ0EDF",children:[(0,S.BX)("div",{sx:Lh.TOP_PAGINATION_TEXT,children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:s("team_members_filter_pagination_top_count",{first:P.first,last:P.last})}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:s("team_members_filter_pagination_top_total",{total:B.length})})]}),(0,S.tZ)(Np.Z,{currentPageIndex:h,isShort:!0,itemsLength:B.length,itemsPerPage:Xh,onChange:A})]}),(0,S.tZ)(o.zx,{icon:"ActionAddOutlined",layout:"iconLeading",onClick:a,children:s("team_members_quota_progress_add")}),t.length>1&&(0,S.tZ)($g,{members:t,onMembersActionSelect:n})]})]})]})}),(0,S.BX)("table",{className:"table--a8O2px0gHj",children:[(0,S.tZ)(Ws,{columns:z}),(0,S.tZ)(Rh,{checkedMembers:m,currentLoggedLogin:d,members:U,onMemberActionSelect:(e,t)=>{n(e,[t])},onMemberToggleCheck:e=>{g((t=>{const n=Array.from(t).find((t=>t.login===e.login)),a=new Set(t);return n?a.delete(n):a.add({...e}),a}))}})]}),(0,S.tZ)("div",{className:"bottom--b6BPTxGASq",children:(0,S.tZ)(Np.Z,{currentPageIndex:h,itemsLength:B.length,itemsPerPage:Xh,onChange:A})})]})},qh=({closeDialog:e,selectedMembers:t})=>{const{translate:n}=(0,p.Z)(),{showToast:a}=(0,o.pm)();return(0,S.tZ)(o.Vq,{isOpen:!0,onClose:e,title:n("webapp_cancel_change_contact_email_title"),closeActionLabel:n("_common_dialog_dismiss_button"),actions:{primary:{children:n("webapp_cancel_change_contact_email_confirm_button"),type:"submit",onClick:()=>(e(),void a({description:n("webapp_cancel_change_contact_email_confirmation_toast")}))},secondary:{children:n("_common_action_go_back"),onClick:e}},isDestructive:!0,children:(0,S.tZ)(o.nv,{children:n("webapp_cancel_change_contact_email_description")})})};var jh,Fh=n(16910),Gh=n(94706);const Vh={IDENTICAL_EMAIL:"webapp_change_contact_email_error_identical_email",INVALID_LOGIN:"webapp_change_contact_email_error_email_format",GENERIC_ERROR:"webapp_change_contact_email_error_generic",LOGIN_UNAVAILABLE:"webapp_change_login_email_tac_error_unavailable",LOGIN_DOMAIN_UNAUTHORIZED:"webapp_change_contact_email_error_restricted_email"},Hh=({closeDialog:e,selectedMembers:t})=>{var n;const{translate:a}=(0,p.Z)(),{showToast:i}=(0,o.pm)(),[s,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),_=(0,ul.z)()?.teamDomain,{changeTeamMembersLoginEmail:u}=(0,q.u)(Gh.v),m=t.some((e=>!e.ssoStatus)),g=async n=>{const r=((e,t,n)=>{const a=e.split("@")[1];return(0,xn.vV)(e)?e===t?"IDENTICAL_EMAIL":n&&n.length&&!n.find((e=>e===a))?"LOGIN_DOMAIN_UNAUTHORIZED":null:"INVALID_LOGIN"})(n,t[0].login,_);if(r)d(r);else{const r=await u([{currentLogin:t[0].login,newLogin:n}]);(0,j.hx)(r)?Object.keys(Vh).includes(r.error.tag)?d(r.error.tag):d("GENERIC_ERROR"):(e(),i({description:a(m?"webapp_change_login_email_tac_confirmation_toast":"webapp_change_login_email_tac_confirmation_toast_sso")}))}};return(0,S.tZ)(On.J9,{initialValues:{email:s},onSubmit:()=>g(s),children:(0,S.BX)(o.Vq,{isOpen:!0,onClose:e,title:a("webapp_change_login_email_section_title"),closeActionLabel:a("_common_dialog_dismiss_button"),actions:{primary:{children:a("webapp_change_login_email_change_email_button"),type:"submit",onClick:()=>g(s),disabled:!s},secondary:{children:a("_common_action_cancel"),onClick:e}},children:[(0,S.tZ)(o.nv,{children:a.markup("webapp_change_login_email_tac_description_markup")}),(0,S.tZ)(o.s8,{label:a("webapp_change_login_email_tac_current_email_label"),value:t[0].login,readOnly:!0}),(0,S.tZ)(On.l0,{children:(0,S.tZ)(o.s8,{label:a("webapp_change_login_email_new_email_label"),error:!!c,autoFocus:!0,onChange:e=>{const t=e.target.value;l(t),d("")},value:s,feedback:c?{id:Fh.H,text:a(null!=(n=Vh[c])?n:Vh.GENERIC_ERROR)}:void 0})}),_&&_.length>0?(0,S.BX)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:[`${a("webapp_change_login_email_tac_accepted_domain_first_part")} `,(0,S.tZ)(o.nv,{as:"span",textStyle:"ds.body.helper.regular",color:"ds.text.neutral.catchy",sx:{fontWeight:"bold"},children:`${_.join(", ")}.`}),jh||(jh=(0,S.tZ)("br",{})),a("webapp_change_login_email_tac_accepted_domain_second_part")]}):null,m?(0,S.tZ)(o.ke,{title:a("webapp_change_login_email_tac_user_confirmation_info")}):null]})})},Wh=({closeDialog:e,applyActionOnMembers:t})=>{const{translate:n}=(0,p.Z)(),a=(0,Rn.V)(),{getInviteLinkDataForAdmin:i,inviteLinkDataForAdmin:s,createInviteLink:o,toggleInviteLink:l}=eu(),c=Hi();return(0,r.useEffect)((()=>{i()}),[i]),c?(0,S.tZ)(Ya.o,{showCloseIcon:!0,isOpen:!0,footer:(0,S.tZ)(re.cNS,{intent:"primary",primaryButtonTitle:n("team_activation_dialog_activate_button"),primaryButtonOnClick:()=>(async()=>{s?.teamKey?s?.disabled&&await l(!1):await o(c),a.showAlert(n("team_activation_dialog_notification"),re.BLW.SUCCESS),await i(),t("shareInviteLink")})(),secondaryButtonTitle:n("team_activation_dialog_notrightnow_button"),secondaryButtonOnClick:e}),onRequestClose:e,title:n("team_activation_dialog_title"),children:(0,S.tZ)(re.nvN,{children:n("team_activation_dialog_paragrah")})}):null},$h=({closeDialog:e,resendOrReactivate:t})=>{const{translate:n}=(0,p.Z)(),{showToast:a}=(0,o.pm)(),[i,s]=(0,r.useState)(!1),l=(0,xe.o)(s_.G.WebOnboardingInviteLinkTacMigration),c=su(),d=c.status===L.rq.Success?c:void 0,{getInviteLinkDataForAdmin:_,inviteLinkDataForAdmin:u}=eu(),m=l?!0===d?.enabled:!1===u?.disabled,g=(0,ee.cI)(l?d?.teamKey:u?.teamKey);return(0,r.useEffect)((()=>{!1===l&&_()}),[_,l]),(0,S.BX)(o.Vq,{title:n("team_members_reinvite_dialog_title"),isOpen:!0,onClose:e,closeActionLabel:"Closing dialog",actions:{primary:{isLoading:i,disabled:i,children:n("team_members_resend_invite_dialog_resend_confirm"),onClick:async()=>{s(!0),await t(),s(!1),e()}},secondary:m?{children:n("team_members_resend_copy_invite_link"),onClick:()=>{navigator.clipboard.writeText(g),a({description:n("team_members_share_invite_link_copied"),mood:"brand"})}}:void 0},children:[(0,S.tZ)(o.nv,{children:n("team_members_resend_invite_dialog_message")}),m?(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:n("team_members_resend_invite_link_description")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{textDecoration:"underline"},children:g})]}):null]})};var Kh=n(44774);const Yh={REVOKE_ERROR_MSG:"team_members_revoke_error_message",REVOKE_SUCCESS_MSG:"team_members_revoke_success_message",SINGLE:{REVOKE_DIALOG_CONFIRM:"team_members_revoke_single_dialog_confirm",REVOKE_DIALOG_CANCEL:"team_members_revoke_single_dialog_cancel",REVOKE_DIALOG_MSG:"team_members_revoke_single_dialog_message",REVOKE_DIALOG_MSG_B2B_ONLY:"team_members_revoke_single_dialog_message_b2b_only",REVOKE_DIALOG_TITLE:"team_members_revoke_single_dialog_title"},MULTIPLE:{REVOKE_DIALOG_CONFIRM:"team_members_remove_multiple_dialog_confirm",REVOKE_DIALOG_CANCEL:"team_members_revoke_multiple_dialog_cancel",REVOKE_DIALOG_MSG:"team_members_revoke_multiple_dialog_message",REVOKE_DIALOG_MSG_B2B_ONLY:"team_members_revoke_multiple_dialog_message_b2b_only",REVOKE_DIALOG_TITLE:"team_members_remove_multiple_dialog_title"},CLOSE_DIALOG_BUTTON_LABEL:"_common_dialog_dismiss_button"},Qh=({lee:e,closeDialog:t,selectedMembers:n})=>{const{translate:a}=(0,p.Z)(),i=(0,Rn.V)(),{reportTACError:r}=H(),s=(0,fc.I)(),l=1===n.length,c=s.status!==L.rq.Success||!s.isDisabled,d=l?Yh.SINGLE:Yh.MULTIPLE;return(0,S.tZ)(o.Vq,{isOpen:!0,onClose:t,isDestructive:!0,actions:{primary:{children:a(d.REVOKE_DIALOG_CONFIRM),onClick:async()=>{t();const s=(0,Lr.v0)(e.globalState);if(!s)return void r(new Error(Rr.N));const{teamId:o}=s;if(o)try{const t=n.map((e=>e.login)),{content:{removedMembers:r,unproposedMembers:l,refusedMembers:c}}=await(new Kh.Z).revokeMembers({auth:s,memberLogins:t}),d=Object.keys({...r,...l});d.forEach((t=>{const a=n.find((e=>e.login===t));e.dispatch(Eg.Rb(a))})),Object.keys(c).forEach((t=>{const r=n.find((e=>e.login===t));if(!r)throw new Error(`member '${t}' not found in members list`);i.showAlert(a(Yh.REVOKE_ERROR_MSG),re.BLW.ERROR),e.dispatch(Eg.Jo(r))})),d.length&&(i.showAlert(a(Yh.REVOKE_SUCCESS_MSG,{count:d.length}),re.BLW.SUCCESS),await(0,ge.hh)({teamId:o,action:"memberRevoked",users:d}))}catch(e){r(e)}}},secondary:{children:a(d.REVOKE_DIALOG_CANCEL),onClick:t}},closeActionLabel:a(Yh.CLOSE_DIALOG_BUTTON_LABEL),title:l?a(Yh.SINGLE.REVOKE_DIALOG_TITLE):a(Yh.MULTIPLE.REVOKE_DIALOG_TITLE,{count:n.length}),children:(0,S.tZ)(o.nv,{className:"automation-tests-revoke-member-dialog-content",children:l?a(c?Yh.SINGLE.REVOKE_DIALOG_MSG:Yh.SINGLE.REVOKE_DIALOG_MSG_B2B_ONLY,{username:n[0].login||n[0].name}):a(c?Yh.MULTIPLE.REVOKE_DIALOG_MSG:Yh.MULTIPLE.REVOKE_DIALOG_MSG_B2B_ONLY)})})};var Jh;const ey=({closeDialog:e})=>{const{translate:t}=(0,p.Z)(),n=(0,Rn.V)(),{inviteLinkDataForAdmin:a,getInviteLinkDataForAdmin:i}=eu();(0,r.useEffect)((()=>{i()}),[i]);const s=(0,ee.cI)(a?.teamKey);return(0,S.tZ)(Ya.o,{showCloseIcon:!0,isOpen:!0,footer:(0,S.tZ)(re.cNS,{intent:"primary",primaryButtonTitle:(0,S.BX)(S.HY,{children:[Jh||(Jh=(0,S.tZ)(o.JO,{name:"ActionCopyOutlined",size:"medium",color:"ds.text.inverse.catchy"})),t("team_memebers_share_link_dialog_copy_link_button")]}),primaryButtonOnClick:async()=>{await navigator.clipboard.writeText(s),n.showAlert(t("team_members_share_invite_link_copied"),re.BLW.SUCCESS)}}),onRequestClose:e,title:t("team_memebers_share_link_dialog_title"),children:(0,S.BX)(S.HY,{children:[(0,S.tZ)(re.nvN,{children:t("team_memebers_share_link_dialog_paragraph")}),(0,S.tZ)(re.nvN,{sx:{marginTop:"16px",fontWeight:"600"},children:s})]})})},ty=({membersWithoutPublicKey:e,onClose:t})=>{const{translate:n}=(0,p.Z)();return(0,S.tZ)(Ya.o,{isOpen:Boolean(e.length),footer:(0,S.tZ)(re.cNS,{intent:"secondary",secondaryButtonTitle:n("team_members_error_popup_public_keys_ok"),secondaryButtonOnClick:t}),onRequestClose:t,title:n("team_members_error_popup_public_keys_title"),children:(0,S.BX)("div",{children:[n("team_members_error_popup_public_keys_message"),(0,S.tZ)("ul",{sx:{listStyleType:"disc",paddingLeft:"40px",marginTop:"1em",marginBottom:"1em"},children:e.map((({login:e})=>(0,S.tZ)("li",{children:e},e)))})]})})},ny=[],ay=()=>{const{translate:e}=(0,p.Z)(),{shouldShowNonMembersInfobox:t,nonMembersCount:n,nonMembersList:a}=(()=>{const e=(0,c.k)(_a.L,"getNonMembersCount"),t=(0,c.k)(_a.L,"getHasAdminDismissedInfobox"),n=(0,c.k)(_a.L,"getNonMembersList");return{shouldShowNonMembersInfobox:e.status===L.rq.Success&&t.status===L.rq.Success&&e.data>0&&!t.data,nonMembersCount:e.status===L.rq.Success&&t.status===L.rq.Success?e.data:0,nonMembersList:n.status===L.rq.Success?n.data:ny}})(),[i,s]=(0,r.useState)(!1),l=function(){const{dismissNonMembersInfobox:e}=(0,q.u)(_a.L);return e}();return(0,r.useEffect)((()=>{i&&a.length&&(function(e){const t=e.map((e=>[e.userId,e.login,e.premiumStatus,e.proposedState,(0,Rt.Z)(e.lastActivityDateUnix).toISOString()].join(","))).join("\n");(0,Ms.S)(`${["user_id","login","premium_status","proposedState","last_activity_date"].join(",")}\n${t}`,"non-members-list.csv","text/csv;charset=utf-8")}(a),s(!1))}),[i,a]),t?(0,S.tZ)(o.ke,{title:e("non_members_infobox_title",{count:n}),description:e("non_members_infobox_description"),mood:"warning",size:"large",actions:[(0,S.tZ)(o.zx,{intensity:"quiet",size:"small",onClick:()=>l(),children:e("non_members_infobox_dismiss_cta")},"dismiss-non-members-infobox"),(0,S.tZ)(o.zx,{size:"small",isLoading:i,onClick:()=>s(!0),children:e("non_members_infobox_download_cta")},"download-non-members-list")]}):null};var iy;const ry={SUMMARY_CARD:{display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"16px",flex:1},BUTTON_AND_BADGE_AREA:{display:"flex",flexDirection:"row",gap:"16px",alignItems:"center"}},sy=({title:e,titleColor:t,subtitle:n,action:a,isLoading:i,badge:r})=>(0,S.BX)("div",{sx:ry.SUMMARY_CARD,children:[i?iy||(iy=(0,S.tZ)(o.ZX,{mood:"brand"})):(0,S.tZ)(o.nv,{textStyle:"ds.specialty.monospace.medium",color:null!=t?t:"ds.text.neutral.quiet",children:e}),(0,S.tZ)(o.nv,{as:"h2",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:n}),(0,S.BX)("div",{sx:ry.BUTTON_AND_BADGE_AREA,children:[(0,S.tZ)(o.zx,{disabled:a.disabled,mood:a.mood,intensity:a.intensity,onClick:a.onClick,layout:"iconTrailing",icon:a.icon,children:a.label}),null!=r?r:null]})]}),oy=({onReinviteAllClick:e})=>{const{translate:t}=(0,p.Z)(),{routes:n}=(0,i.Xo)(),a=(0,i.k6)(),{data:s,status:d}=(0,c.k)(Sl.B,"getReport"),u=(0,c.k)(pr.t,"getIdPFailedProvisioningsData"),{openDialog:g,shouldShowFrozenStateDialog:h}=(0,I.Ub)(),y=(0,X.C)(),b=!!y&&y.spaceTier===_.lD.Starter,x=!!y&&y.spaceTier===_.lD.Standard,[f,v]=(0,r.useState)(!0),[C,E]=(0,r.useState)(0),[Z,D]=(0,r.useState)(0),[T,k]=(0,r.useState)(0),[A,w]=(0,r.useState)(0),[N,O]=(0,r.useState)(0),[R,M]=(0,r.useState)(!0),B=u.status===L.rq.Success?u.data?.requiredSeats:0;return(0,r.useEffect)((()=>{"success"===d&&null!==h&&(w(s.seats.pending),E(s.seats.provisioned-s.seats.used),D(s.seats.provisioned),k(s.seats.used/s.seats.provisioned),O(s.passwordHealth.securityIndex),v(!1),M(0===s.seats.pending&&1===s.seats.used))}),[s,d,h]),(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",border:"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px",padding:"24px"},children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("team_members_summary_title")}),(0,S.BX)("div",{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"24px"},children:[(0,S.tZ)(sy,{isLoading:f,title:`${C}`,titleColor:T<=.5?"ds.text.positive.quiet":T<=.9?"ds.text.warning.quiet":"ds.text.danger.quiet",subtitle:t("team_members_summary_seat_count_content",{totalSeats:Z}),action:{label:t("team_members_summary_seat_count_cta"),disabled:f,mood:"brand",intensity:T>.5?"catchy":"quiet",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuySeats,clickOrigin:l.ClickOrigin.UsersSummary})),h?g():b||x?a.push(`${n.teamAccountChangePlanRoutePath}`):a.push(`${n.teamAccountRoutePath}?showSeatsDialog=true`)}},badge:B?(0,S.tZ)(jl,{requiredSeatsForIdP:B}):void 0}),(0,S.tZ)("div",{sx:{width:"1px",backgroundColor:"ds.border.neutral.quiet.idle"}}),(0,S.tZ)(sy,{isLoading:f,title:`${A||(R?"-":t("team_members_summary_reinvite_users_no_new_invites_label"))}`,titleColor:R?"ds.text.neutral.quiet":0===A?"ds.text.positive.quiet":"ds.text.warning.quiet",subtitle:0===A?t(R?"team_members_summary_reinvite_users_no_members_content":"team_members_summary_reinvite_users_no_new_invites_content"):t("team_members_summary_reinvite_users_content",{count:A}),action:{label:t("team_members_summary_reinvite_users_cta",{count:A}),mood:"neutral",intensity:"quiet",disabled:f||0===A,onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.ReInviteUsers,clickOrigin:l.ClickOrigin.UsersSummary})),h?g():e()}}}),(0,S.tZ)("div",{sx:{width:"1px",backgroundColor:"ds.border.neutral.quiet.idle"}}),(0,S.tZ)(sy,{isLoading:f,title:`${N||"-"}`,titleColor:N>=80?"ds.text.positive.quiet":N>=40?"ds.text.warning.quiet":N>0?"ds.text.danger.quiet":"ds.text.neutral.quiet",subtitle:t(!N||f?"team_members_summary_security_score_content_no_data":"team_members_summary_security_score_content"),action:{label:t("team_members_summary_security_score_cta"),mood:"neutral",intensity:"quiet",icon:"ActionOpenExternalLinkOutlined",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.CheckImproveHealthScore,clickOrigin:l.ClickOrigin.UsersSummary})),(0,P.Yo)("https://support.dashlane.com/hc/en-us/articles/360016225300-Manage-the-Password-Health-of-your-Starter-Team-or-Business-plan")}}})]})]})};var ly,cy;const dy="_common_toast_close_label",_y=({lee:e,location:t})=>{const n=(0,r.useRef)(!1),{translate:a}=(0,p.Z)(),{reportTACError:i}=H(),s=(0,Rn.V)(),_=(0,Lg.v)(),{proposeMembers:u}=(0,q.u)(_a.L),{showToast:g}=(0,o.pm)(),{openDialog:h,shouldShowFrozenStateDialog:y}=(0,I.Ub)(),b=(0,X.C)(),{data:x,status:f}=(0,c.k)(d.o,"getTeamSeats"),[v,C]=(0,r.useState)(!0),{invitePartialSuccessState:E,setInvitePartialSuccessState:Z,handleInvitationResultClosed:D}=Y_(),[k,A]=(0,r.useState)(null),[w,N]=(0,r.useState)(!1),O=(0,xe.o)(s_.G.WebOnboardingInviteLinkTacMigration),[R,M]=(0,r.useState)({showError:!1,membersWithoutPublicKey:[]}),B=(0,r.useCallback)((()=>{const t=(0,Lr.v0)(e.globalState);return t||i(new Error(Rr.N)),t}),[e.globalState,i]),P=(0,r.useCallback)((()=>{y?h():(N(!0),(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!1,isResend:!1})))}),[y]),U=t=>{e.dispatch(Eg.eY(t))},z=(e,t)=>{Z({show:!0,invitedMembers:e,refusedMembers:t}),U(Object.keys(e))},j=(0,r.useCallback)(((t,n=[],i)=>{const r=async()=>{if(n.forEach((t=>{e.dispatch(Eg.bh(t))})),!B())return;const t=n.map((e=>e.login));try{const i=await u({proposedMemberLogins:t});if("failure"===i.tag)throw new Error(i.error);if(i.data&&(0,d_.e)(i.data)){const{refusedMembers:a}=i.data.content;Object.values(a).forEach((t=>{const a=n.find((e=>e.login===t));z(i.data.proposedMembers,i.data.refusedMembers),e.dispatch(Eg.S2(a))})),(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Complete,inviteCount:t.length+Object.keys(a).length,inviteFailedCount:Object.keys(a).length,inviteResentCount:t.length,inviteSuccessfulCount:t.length-Object.keys(a).length,isImport:!1,isResend:!0}))}else g({description:a("team_members_invite_success_message"),mood:"brand",closeActionLabel:a(dy)}),(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Complete,inviteCount:t.length,inviteFailedCount:0,inviteResentCount:t.length,inviteSuccessfulCount:t.length,isImport:!1,isResend:!0}))}catch(i){const{message:r="",data:s={}}=i,o=a("team_members_invite_error_message_no_free_slot"),c=a("team_members_invite_error_message"),{content:{error:d=r}={}}=s,_=["no_free_slot_free_plan","no_free_slot"].includes(d)?o:c;n.forEach((t=>{e.dispatch(Eg.S2(t))})),g({description:_,mood:"danger",closeActionLabel:a(dy)}),(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Error,inviteCount:t.length,inviteFailedCount:t.length,inviteResentCount:t.length,inviteSuccessfulCount:0,isImport:!1,isResend:!0}))}},s=n.map((e=>e.login));switch(t){case"reassign":return A((0,S.tZ)(lh,{lee:e,selectedMembers:n,newRole:i,closeDialog:()=>A(null)}));case"reactivate":case"reinvite":return y?void h():void r();case"reinviteAll":return y?void h():A((0,S.tZ)($h,{resendOrReactivate:r,closeDialog:()=>A(null)}));case"revoke":return A((0,S.tZ)(Qh,{lee:e,selectedMembers:n,closeDialog:()=>A(null)}));case"changeLoginEmail":return A((0,S.tZ)(Hh,{selectedMembers:n,closeDialog:()=>A(null)}));case"cancelChangeLoginEmail":return A((0,S.tZ)(qh,{selectedMembers:n,closeDialog:()=>A(null)}));case"generateBackupCode":return A((0,S.tZ)(zg,{memberLogin:s[0],isOpen:!0,closeBackupCodeDialog:()=>A(null)}));case"enableInviteLink":return y?void h():A(!0===O?(0,S.tZ)(lu,{isOpen:!0,onCancel:()=>A(null),onInviteLinkActivation:()=>j("shareInviteLink")}):(0,S.tZ)(Wh,{closeDialog:()=>A(null),applyActionOnMembers:j}));case"shareInviteLink":return y?void h():A(!0===O?(0,S.tZ)(uu,{isOpen:!0,onClose:()=>A(null)}):(0,S.tZ)(ey,{closeDialog:()=>A(null)}))}}),[s,B,z,y,a]);if((0,r.useEffect)((()=>{if(n.current||null===_||null===y)return;n.current=!0;const a=B();if(!a)return;const{teamId:r}=a;r&&((0,ge.YY)({teamId:r}).then((n=>{var a;e.dispatch(Eg.Wq({members:n})),Eg.xF({extraFreeSlots:null!=(a=x?.extraFree)?a:0,membersNumber:n.length}),C(!1);const i=n&&1===n.length,r=t.state?.openSendInvitesDialog;if(!y&&(!_&&i||r))P();else if(t.state?.openResendPendingInvitationsDialog&&!y)return void j("reinviteAll",Fg(n));const s=n.filter((e=>!e.hasPublicKey)).filter((e=>"accepted"===e.status));s.length&&M({showError:!0,membersWithoutPublicKey:s})})).catch(i),(0,m.Nc)(l.PageView.TacUserList))}),[P,j,B,e,t.state?.openResendPendingInvitationsDialog,t.state?.openSendInvitesDialog,_,i,y,a,x?.extraFree]),!b||f!==L.rq.Success)return null;const F=r_(e.state.members.valueOr([]));return(0,S.tZ)(go,{header:(0,S.tZ)(o.X6,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:a("team_members_page_title")}),children:(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[ly||(ly=(0,S.tZ)(ay,{})),cy||(cy=(0,S.tZ)(jg,{})),(0,S.tZ)(oy,{onReinviteAllClick:()=>{j("reinviteAll",Fg(e.state.members.valueOr([])))}}),(0,S.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:v?(0,S.tZ)(ai.Z,{containerStyle:{minHeight:240}}):(0,S.tZ)(zh,{lee:e,members:e.state.members.valueOr([]),onMembersActionSelect:j,onMembersInvite:P})}),R.showError?(0,S.tZ)(ty,{membersWithoutPublicKey:R.membersWithoutPublicKey,onClose:()=>M((e=>({...e,showError:!1})))}):null,k,(0,S.tZ)(mu,{lee:e,teamId:(0,T.ev)(e.globalState),totalSeatCount:e.state.totalSeatCount.valueOr(0),numSeatsTaken:F,excludedInviteMembers:e.state.members.valueOr([]).filter((({status:e})=>"removed"!==e)).map((({login:e})=>e)),isFreeTrial:b.isFreeTrial,shouldShowInviteDialog:w,handleCloseInviteDialog:()=>N(!1),handleInvitePartialSuccess:z,handleInviteCompleteSuccess:U,invitePartialSuccessState:E,handleInvitationResultClosed:D})]})})};function uy({path:e}){return(0,S.tZ)(i.GB,{exact:!0,path:[e,`${e}/:userId`],permission:e=>e.adminAccess.hasFullAccess,children:(0,S.BX)(i.rs,{children:[(0,S.tZ)(i.Vy,{exact:!0,path:e,component:_y,reducer:Eg.ZP}),(0,S.tZ)(i.Vy,{path:`${e}/:userId`,component:Rg})]})})}var my=n(78128);const py={settingsPage:"settingsPage--k2Ztg5L3TZ",withoutHeader:"withoutHeader--K7wlLBUI31",settingsContainer:"settingsContainer--nyZHFHWont",settingsRow:"settingsRow--Mid_I3S6Qx",settingsLabelContainer:"settingsLabelContainer--rCMIUljV94",settingsGreyedLabel:"settingsGreyedLabel--L0ZP86y4UJ",textSettingRow:"textSettingRow--JwyTaO5qbq",selectSettingRow:"selectSettingRow--CRjY3loqBA",switchSettingRow:"switchSettingRow--THK1RoaDKQ",textFieldInputColumn:"textFieldInputColumn--G3ALnYhur_",helperLabelPanel:"helperLabelPanel--gGU7C6m_r2",infoBoxPanel:"infoBoxPanel--TMnBp9xS5d",textWithButtonSettingRow:"textWithButtonSettingRow--rWQRX8E5Np",versionContainer:"versionContainer--eWfpg9oE65",versionNumber:"versionNumber--uHC_eBvZbs",confirmationContent:"confirmationContent--C7lnmdM6Vl"};var gy;const hy=({children:e,sideContent:t,trailingContent:n,title:a,isLoading:i=!1})=>{const r=t?{display:"flex",flexDirection:"column",gap:"24px",maxWidth:"800px"}:{backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"32px",borderRadius:"8px"};return i?gy||(gy=(0,S.tZ)(El.a,{scopedToPage:!0})):(0,S.tZ)("div",{className:dd()(py.settingsPage,{[py.withoutHeader]:!a}),children:(0,S.BX)("div",{className:py.settingsContainer,children:[a?(0,S.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",sx:{marginBottom:"32px"},children:a}):null,(0,S.BX)("div",{sx:{display:"flex",gap:"24px"},children:[(0,S.BX)("div",{sx:r,children:[e,(0,S.tZ)("div",{children:n})]}),t]})]})})};var yy=n(23104),by=n(99203);const xy=({data:e,targetUri:t,...n})=>{const a=(0,r.useRef)(null);return(0,S.BX)("form",{action:t,method:"post",ref:a,target:"_blank",rel:"noopener",children:[(()=>{const t=[];return Object.keys(e).forEach((n=>t.push((0,S.tZ)("input",{defaultValue:e[n],type:"hidden",name:n},String(65535*Math.random()).replace(/\./,""))))),(0,S.tZ)("div",{children:t})})(),(0,S.tZ)(Gg.Z,{onClick:()=>a.current?.submit(),...n})]})},Sy={uploadCsvLabel:"uploadCsvLabel--sX4DnYKGlL",fileContainer:"fileContainer--M2SFpr0Pvl",file:"file--dJtQQDGzSk",fileIcon:"fileIcon--MKumqlXPl7",fileTitle:"fileTitle--d2cupH4GiA",fileTitleHeader:"fileTitleHeader--jqYDFR_MsK",fileTitleHint:"fileTitleHint--g2OBjT1L4G",fileTitleHintError:"fileTitleHintError--F4iw3QsNVb",fileTitleHintSuccess:"fileTitleHintSuccess--JPyWdw7GS8",fileProgressBackground:"fileProgressBackground--NEs2tyO8Pe",fileProgress:"fileProgress--cr0wc0wF3w",fileProgressAnimation:"fileProgressAnimation--aFpkqnmOMV",fileProgressComplete:"fileProgressComplete--y2f1JLicyr",fileButtons:"fileButtons--ofyh4FIc7u",fileError:"fileError--RHrDBIVtVA",fileErrorTitle:"fileErrorTitle--Jx5QASYwkS",fileErrorTitleIcon:"fileErrorTitleIcon--b8GGJ4i0UT",fileErrorContent:"fileErrorContent--G67_aw40u7"},fy="team_settings_duo_header_general",vy=e=>{const{translate:t}=(0,p.Z)(),{reportTACError:n}=H(),a=(0,r.useRef)(null),[i,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[_,u]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[h,y]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),[C,E]=(0,r.useState)(null),[Z,D]=(0,r.useState)(!1),[T,k]=(0,r.useState)(null),I=(()=>{const e=(0,c.k)(d.o,"getTeamDuoInfo");return{status:e.status,data:e.data,error:e.error}})(),A=e.lee.apiMiddleware.teamPlans?e.lee.apiMiddleware.teamPlans:(n(new Error("teamPlans service not set in apiMiddleware")),null),w=e.lee.apiMiddleware.strongAuth?e.lee.apiMiddleware.strongAuth:(n(new Error("strongAuth service not set in apiMiddleware")),null);return(0,r.useEffect)((()=>{(()=>{if(I.status===L.rq.Success&&I.data){const{duo:t,duoIntegrationKey:n,duoSecretKey:a,duoApiHostname:i}=I.data;e.lee.dispatch(my.k0({duo:t,duoIntegrationKey:n,duoSecretKey:a,duoApiHostname:i}))}else I.status===L.rq.Error&&console.error(`DuoSettings: fetchData failed with error: ${I.error}`)})()}),[I.data,I.error,I.status]),(0,S.BX)(hy,{title:t(fy),children:[(0,S.tZ)("p",{className:py.settingsHeader,children:t(fy)}),(0,S.tZ)(yd,{label:t("team_settings_duo_enable_label"),labelHelper:t("team_settings_duo_enable_helper"),children:(0,S.tZ)(yy.Z,{genericErrorMessage:t("_common_generic_error"),isDisabled:I.status===L.rq.Loading||i,saveValueFunction:()=>{const t=!e.lee.state.hasDuo;return s(!0),e.lee.dispatch(my.FC(t)),A?.setSettings({duo:t}).then((()=>s(!1))).catch((()=>{}))},value:e.lee.state.hasDuo})}),(0,S.tZ)("p",{className:py.settingsHeader,children:t("team_settings_duo_header_setup")}),(0,S.BX)(yd,{label:t("team_settings_duo_integration_key_label"),labelHelper:t("team_settings_duo_integration_key_helper"),children:[(0,S.tZ)(Vg.n,{containerStyle:{width:"300px"},inputStyle:{minHeight:42},defaultValue:e.lee.state.duoIntegrationKey,isDisabled:o,onBlur:t=>{if(o)return;const n=t.target.value;e.lee.dispatch(my.a2(n)),l(!0),u(!1),A&&A.setSettings({duoIntegrationKey:n}).then((()=>{l(!1)})).catch((()=>{}))},onFocus:()=>u(!0),placeholder:t("team_settings_duo_integration_key_hint")}),_||o?(0,S.tZ)("div",{children:(0,S.tZ)(Gg.Z,{label:t("team_settings_duo_integration_key_button"),loading:o})}):null]}),(0,S.BX)(yd,{label:t("team_settings_duo_secret_key_label"),labelHelper:t("team_settings_duo_secret_key_helper"),children:[(0,S.tZ)(Vg.n,{containerStyle:{width:"300px"},inputStyle:{minHeight:42},defaultValue:e.lee.state.duoSecretKey,isDisabled:m,onBlur:(t=>{if(m)return;const n=t.target.value;e.lee.dispatch(my.E4(n)),g(!0),y(!1),A&&A.setSettings({duoSecretKey:n}).then((()=>{g(!1)})).catch((()=>{}))}).bind(void 0),onFocus:()=>y(!0),placeholder:t("team_settings_duo_secret_key_hint")}),h||m?(0,S.tZ)("div",{children:(0,S.tZ)(Gg.Z,{label:t("team_settings_duo_secret_key_button"),loading:m})}):null]}),(0,S.BX)(yd,{label:t("team_settings_duo_api_host_label"),labelHelper:t("team_settings_duo_api_host_helper"),children:[(0,S.tZ)(Vg.n,{containerStyle:{width:"300px"},inputStyle:{minHeight:42},defaultValue:e.lee.state.duoApiHostname,isDisabled:b,onBlur:(t=>{if(b)return;const n=t.target.value;e.lee.dispatch(my.qf(n)),x(!0),v(!1),A&&A.setSettings({duoApiHostname:n}).then((()=>{x(!1)})).catch((()=>{}))}).bind(void 0),onFocus:()=>v(!0),placeholder:t("team_settings_duo_api_host_hint")}),f||b?(0,S.tZ)("div",{children:(0,S.tZ)(Gg.Z,{label:t("team_settings_duo_api_host_button"),loading:b})}):null]}),(0,S.tZ)("p",{className:py.settingsHeader,children:t("team_settings_duo_header_directory")}),(0,S.tZ)(yd,{label:t("team_settings_duo_upload_csv_label"),labelHelper:(0,S.BX)("ol",{className:Sy.uploadCsvLabel,children:[(0,S.tZ)("li",{children:t("team_settings_duo_upload_csv_helper_step_one")}),(0,S.tZ)("li",{children:t("team_settings_duo_upload_csv_helper_step_two")}),(0,S.tZ)("li",{children:t("team_settings_duo_upload_csv_helper_step_three")})]}),children:(0,S.BX)("div",{className:Sy.fileContainer,children:[(0,S.BX)("div",{className:Sy.file,children:[(0,S.tZ)("span",{className:Sy.fileIcon}),(0,S.tZ)("div",{className:Sy.fileTitle,children:T?[(0,S.tZ)("div",{className:Sy.fileTitleHeader,children:T},"header"),(0,S.tZ)("div",{className:Sy.fileProgressBackground,children:(0,S.tZ)("div",{className:Z?Sy.fileProgressComplete:Sy.fileProgress})},"progress"),(0,S.tZ)("p",{className:[Sy.fileTitleHint,Z&&C?Sy.fileTitleHintError:Sy.fileTitleHintSuccess].join(" "),children:t(Z?C?"team_settings_duo_upload_csv_feedback_error":"team_settings_duo_upload_csv_feedback_success":"team_settings_duo_upload_csv_feedback_progress")},"hint")]:[(0,S.tZ)("div",{className:Sy.fileTitleHeader,children:"duo_usernames.csv"},"header")]})]}),(0,S.BX)("div",{className:Sy.fileButtons,children:[(0,S.tZ)("input",{type:"file",id:"file",accept:"text/csv, text/plain, .csv",ref:a,style:{display:"none"},onChange:(()=>{var e;T&&k(null);const t=null!=(e=a.current?.files?.[0])?e:{name:""};k(t.name),w&&w.uploadDuoCsv(t).then((()=>{D(!0),setTimeout((()=>k(null)),2e3)})).catch((e=>{E(e.code.toLowerCase()),D(!0)}))}).bind(void 0)}),(0,S.tZ)(by.Z,{label:t("team_settings_duo_upload_csv_button_upload"),onClick:(()=>{a.current?.click()}).bind(void 0)}),(0,S.tZ)(xy,{data:{login:e.lee.globalState.user.session.login,uki:e.lee.globalState.user.session.uki},label:t("team_settings_duo_upload_csv_button_download"),style:{marginLeft:"16px"},targetUri:"https://ws1.dashlane.com/3/strongauth/exportDuoUsernames"})]}),C?(0,S.BX)("div",{className:Sy.fileError,children:[(0,S.BX)("div",{className:Sy.fileErrorTitle,children:[(0,S.tZ)("span",{className:Sy.fileErrorTitleIcon,children:"!"}),t("team_settings_duo_upload_csv_error_title")]}),(0,S.tZ)("p",{className:Sy.fileErrorContent,children:t(`team_settings_duo_upload_csv_error_${C}`)})]}):null]})})]})};var Cy=n(57457),Ey=n(74466);const Zy=({content:e,header:t,index:n})=>(0,S.BX)(o.kC,{gap:"8px",sx:{flexFlow:"row",flexBasis:"25%"},children:[(0,S.tZ)(o.kC,{justifyContent:"center",alignItems:"center",sx:{width:36,height:36,borderRadius:36,flexShrink:0,backgroundColor:"ds.container.expressive.brand.quiet.idle",color:"ds.text.brand.standard"},children:n}),(0,S.BX)("section",{children:[(0,S.tZ)(o.X6,{as:"h4",textStyle:"ds.title.block.medium",sx:{marginBottom:"8px"},children:t}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e})]})]}),Dy=()=>{const{translate:e}=(0,p.Z)();return(0,S.BX)("div",{sx:{display:"flex",flexDirection:"row",marginBottom:40,gap:"24px"},children:[(0,S.tZ)(Zy,{index:1,header:e("team_settings_master_password_policies_settings_stepper_step_request_title"),content:e("team_settings_master_password_policies_settings_stepper_step_request_subtitle")}),(0,S.tZ)(Zy,{index:2,header:e("team_settings_master_password_policies_settings_stepper_step_approval_title"),content:e("team_settings_master_password_policies_settings_stepper_step_approval_subtitle")}),(0,S.tZ)(Zy,{index:3,header:e("team_settings_master_password_policies_settings_stepper_step_recover_title"),content:e("team_settings_master_password_policies_settings_stepper_step_recover_subtitle")}),(0,S.tZ)(Zy,{index:4,header:e("team_settings_master_password_policies_settings_stepper_step_login_title"),content:e("team_settings_master_password_policies_settings_stepper_step_login_subtitle")})]})};var Ty;const ky=e=>{const[t,n]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(!1),[g,h]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),{translate:x}=(0,p.Z)(),{reportTACError:f}=H(),v=(0,Jg.U)(),{status:C,data:E}=Tg(),{showToast:Z}=(0,o.pm)();if((0,r.useEffect)((()=>{null!==v&&((0,m.Nc)(l.PageView.TacSettingsAccountRecovery),(async()=>{if(n(!0),(0,Lr.v0)(e.lee.globalState))try{const t=E?.recoveryEnabled;e.lee.dispatch(Ey.x({recoveryEnabled:t}));const n=await(async()=>{const t=(0,Lr.v0)(e.lee.globalState);if(t&&t.teamId){const e=await(0,ge.mP)({teamId:t.teamId});return Boolean(e.length)}return f(new Error(Rr.N)),!1})();u(n)}catch(e){console.error(e)}finally{n(!1)}else f(new Error(Rr.N))})())}),[v,E]),C!==L.rq.Success||!E)return null;const D=async t=>{n(!0);const a=(0,T.ev)(e.lee.globalState);if(a)try{await(0,ge.jy)({teamId:a,settings:{recoveryEnabled:t}}),e.lee.dispatch(Ey.Zn(t)),Z({id:"toggleRecovery",description:x(t?"team_settings_master_password_policies_dialog_alert_label_available":"team_settings_master_password_policies_dialog_alert_label_unavailable"),action:{label:x("common_alert_undo_action"),onClick:()=>{D(!t)}}}),n(!1)}catch(e){n(!1)}else f(new Error(Rr.N))},k=async()=>{d((e=>!e))},I=async()=>{s(!0);const t=await(0,ge.RR)({masterPassword:g});s(!1),t?(await Promise.all([k(),D(!e.lee.state.recoveryEnabled)]),h(""),b(!1)):b(!0)},A=_&&e.lee.state.recoveryEnabled;return(0,S.BX)(hy,{title:x("team_settings_menu_title_account_recovery"),children:[(0,S.BX)("div",{children:[(0,S.BX)("div",{sx:{position:"relative"},children:[(0,S.tZ)(o.X6,{textStyle:"ds.title.section.medium",as:"h3",sx:{marginBottom:"8px"},children:x("team_settings_master_password_policies_settings_recover_label")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"40px",paddingRight:"80px"},children:x("team_settings_master_password_policies_settings_recover_label_helper")}),(0,S.tZ)(o.ZD,{sx:{position:"absolute",top:0,right:0},disabled:t||A,readOnly:!!v,tooltip:v?x("team_settings_master_password_policies_settings_recovery_blocked_discontinued"):void 0,checked:e.lee.state.recoveryEnabled,onChange:k})]}),(0,S.tZ)(o.X6,{textStyle:"ds.title.section.medium",as:"h3",sx:{marginBottom:"24px"},children:x("team_settings_master_password_policies_settings_how_it_works_label")}),Ty||(Ty=(0,S.tZ)(Dy,{})),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{marginBottom:"4px"},children:x("team_settings_master_password_policies_settings_how_it_works_label_helper")}),(0,S.tZ)(o.Qj,{isExternal:!0,href:a.WW,children:x("team_settings_master_password_policies_settings_how_it_works_label_helper_link_text")})]}),(0,S.tZ)(Cy.Z,{isOpen:c,title:e.lee.state.recoveryEnabled?x("team_settings_master_password_policies_dialog_title_disable"):x("team_settings_master_password_policies_dialog_title_enable"),labelDismiss:x("team_settings_master_password_policies_dialog_cta_cancel_label"),labelConfirm:e.lee.state.recoveryEnabled?x("team_settings_master_password_policies_dialog_cta_confirm_label_disable"):x("team_settings_master_password_policies_dialog_cta_confirm_label_enable"),onDismiss:()=>{h(""),b(!1),d(!1)},onConfirm:()=>I(),ctaIsDisabled:i||!g,onChange:e=>{h(e.target.value),b(!1)},isMasterPasswordInvalid:y,onKeyDown:e=>{(async e=>{13===e.keyCode&&g&&await I()})(e)},children:e.lee.state.recoveryEnabled?(0,S.BX)("div",{children:[(0,S.tZ)(o.nv,{children:x.markup("team_settings_master_password_policies_confirmation_dialog_disable_label_markup")}),(0,S.tZ)(o.nv,{children:x("team_settings_master_password_policies_confirmation_dialog_disable_sublabel")})]}):(0,S.BX)("div",{children:[(0,S.tZ)(o.nv,{children:x.markup("team_settings_master_password_policies_confirmation_dialog_enable_label_markup",{},{linkTarget:"_blank"})}),(0,S.tZ)(o.nv,{children:x("team_settings_master_password_policies_confirmation_dialog_enable_sublabel")})]})})]})},Iy=({children:e})=>(0,S.tZ)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"32px",border:"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px",padding:"32px",backgroundColor:"ds.background.default"},children:e}),Ay=({header:e})=>(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",children:e.label},e.label),wy=({onClick:e,content:t})=>(0,S.tZ)(o.zx,{mood:"brand",intensity:"quiet",onClick:e,sx:{maxWidth:"fit-content"},children:t}),Ny="team_settings_saving_label",Oy="team_settings_save_success_label",Ry={SETTINGS_LABEL_MARGIN_TOP:{marginTop:"13px"},HELPER_LABEL_PANEL:{color:"ds.text.neutral.standard",marginTop:"13px",marginBottom:"8px",paddingRight:"70px",fontSize:"12px",fontWeight:"400"}};var Ly=n(24107);const My=({field:e,editSettings:t,checkForAuthenticationError:n})=>{const{translate:a}=(0,p.Z)(),{reportTACError:i}=H(),s=!!e.multiLine,o=e.deserializer?e.deserializer(e.value):e.value,l=(0,r.useCallback)((async a=>{var r;if(!t)return;if(e.validator){const t=e.serializer?e.serializer(a):a,n=e.validator(t);if(n)throw new Error(e.getErrorMessageForKey?.(n))}if(n?.())return;const s={};if(["disableAutoLoginDomains","teamDomain"].includes(null!=(r=e.feature)?r:"")){const t=e.value;if(t.length){const n=e.serializer?.(a),i=t.filter((e=>!n.some((t=>t===e)))),r=n.filter((e=>!t.some((t=>t===e))));e.feature&&(s[e.feature]={removed:i,added:r.map((e=>e.toLowerCase()))})}else e.serializer&&e.feature&&(s[e.feature]={added:e.serializer(a)})}else e.feature&&(s[e.feature]=e.serializer?e.serializer(a):a);if(e.constraintsFromOtherFields&&e.constraintsFromOtherFields.requiredFor?.forEach((e=>e.reset?.(s))),Object.keys(s).length)try{await t(s)}catch(t){i(t,e.getErrorMessageForKey?.(t.message))}}),[n,t,e,i]);return(0,S.tZ)(Ly.X,{multiLine:s,defaultValue:o,ariaLabelledBy:e.feature,saveBtnLabel:a("team_settings_button_save_label"),savingBtnLabel:a(Ny),editBtnLabel:a("team_settings_button_edit_label"),placeholder:e.hintText,inputStyle:e.inputStyle,hintStyle:e.hintStyle,successMessage:a(Oy),onSave:l,textFieldClassName:py.textFieldInputColumn,isDisabled:e.isReadOnly},e.label)};var By,Py;const Uy=({label:e,value:t,isReadOnly:n,options:a,saveValueFunction:i,successMessage:s,savingMessage:l})=>{const[c,d]=(0,r.useState)(""),[_,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),g=_?l:c||"";return(0,S.BX)("div",{sx:{position:"relative",display:"flex",gap:"8px"},children:[(0,S.tZ)("div",{sx:{width:"100%"},children:(0,S.tZ)(o.mg,{label:e,value:""===t?"disabled":t,disabled:null!=n?n:_,readOnly:n,onChange:e=>{u(!0),i(e).then((()=>{u(!1),p(!0),d(""),setTimeout((()=>{p(!1)}),1e3)})).catch((e=>{u(!1),p(!1);const t=(0,Si.i)(e);d(t)}))},labelPersists:!1,feedback:{text:m?s:g},error:!!c,children:a.map((e=>(0,S.tZ)(o.$m,{value:e.value,disabled:!!e.disabled,children:e.label},e.label)))})}),_||m?(0,S.tZ)("div",{sx:{display:"flex",height:"48px",alignItems:"center"},children:_?By||(By=(0,S.tZ)(o.ZX,{mood:"positive",size:24})):Py||(Py=(0,S.tZ)(o.JO,{name:"FeedbackSuccessOutlined",color:"ds.text.positive.quiet",size:"large"}))}):null]})},Xy=({field:e,checkForAuthenticationError:t,editSettings:n})=>{const{translate:a}=(0,p.Z)(),{reportTACError:i}=H(),s=(0,r.useCallback)((async a=>{if(!n||t?.()||!e.feature)return;const r={},s=e.serializer?e.serializer(a):a,o="disabled"===a?"":"unset"===a?null:s;r[e.feature]=o;try{await n(r)}catch(t){const n=t.data?.content||{},a=e.getErrorMessageForKey?.(n.error);i(t,a)}}),[t,n,e,i]);return(0,S.tZ)(Uy,{label:e.label,value:e.value,saveValueFunction:s,successMessage:a(Oy),savingMessage:a(Ny),options:e.options,isReadOnly:e.isReadOnly},e.label)},zy=({field:e,editSettings:t,checkForAuthenticationError:n,policies:a})=>{var i;const{translate:s}=(0,p.Z)(),{reportTACError:l}=H(),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),h=null!=(i=e.value)&&i?e.confirmDisable:e.confirmEnable,y=e.value?e.confirmDisable:e.confirmEnable,b=(0,r.useCallback)((async()=>{if(!t||n?.())return;const a={};if(e.feature){const t=void 0!==e.value&&!e.value;a[e.feature]=e.serializer?e.serializer(t):t,t||e.constraintsFromOtherFields?.requiredFor?.forEach((e=>e.reset?.(a)))}try{await t(a)}catch(t){const n=t.data?.content||429===t.code&&{error:"too_many_requests"}||"not_authorized"===t.message&&{error:"not_authorized"}||{},a=e.getErrorMessageForKey?.(n.error);l(t,a)}}),[n,t,e,l]),x=(0,r.useCallback)((()=>{d(!1),u(""),g(!1)}),[]),f=(0,r.useCallback)((()=>(d(!0),u(""),g(!1),Promise.resolve())),[]),v=(0,r.useCallback)((async()=>{const e=await(0,ge.RR)({masterPassword:null!=_?_:""});return g(!e),e?(x(),b()):Promise.resolve()}),[b,x,_]),C=(0,r.useCallback)((e=>{u(e.target.value),g(!1)}),[]),E=(0,r.useCallback)((e=>{"Enter"===e.key&&_&&v()}),[v,_]),Z=(0,r.useCallback)((async()=>{e.customSwitchHandler?await e.customSwitchHandler():h?await f():await b()}),[h,e,b,f]);return(0,S.BX)(S.HY,{children:[(0,S.tZ)(yy.Z,{isLoading:e.isLoading,genericErrorMessage:s("_common_generic_error"),ariaLabelledBy:e.feature,value:e.value,isReadOnly:e.isReadOnly,isDisabled:e.constraintsFromOtherFields?.disabledWhen?.some((e=>a&&e?.condition?.(a))),disabledFeedbackMessage:e.constraintsFromOtherFields?.disabledWhen?.find((e=>a&&e?.condition?.(a)&&e?.warningMessage))?.warningMessage,saveValueFunction:Z,successMessage:s("team_settings_save_success_label"),savingMessage:s("team_settings_saving_label")},e.label),c&&y?(0,S.BX)(Cy.Z,{isOpen:!0,title:y.title,labelDismiss:y.dismiss,labelConfirm:y.confirm,onDismiss:x,onConfirm:v,onChange:C,isMasterPasswordInvalid:m,ctaIsDisabled:!_,onKeyDown:E,children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:y.helper1}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:y.helper2}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:y.label})]}):null]})},qy=e=>{const{field:t,...n}=e;switch(t.type){case"text":return(0,S.tZ)(My,{field:t,...n});case"select":return(0,S.tZ)(Xy,{field:t,...n});case"switch":return(0,S.tZ)(zy,{...e});case"cta":return(0,S.tZ)(wy,{onClick:t.ctaAction,content:t.ctaLabel});default:return null}},jy=e=>{var t;const{field:n}=e;return(0,S.tZ)("div",{sx:{width:"100%"},children:(0,S.BX)("div",{sx:{display:"flex",gap:"40px",justifyContent:"space-between"},children:[(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:"select"===n.type||"text"===n.type?Ry.SETTINGS_LABEL_MARGIN_TOP:{},id:n.feature,children:n.label.split("//").map(((e,t)=>t%2?(0,S.tZ)("span",{sx:{color:"ds.text.oddity.disabled",fontWeight:"300"},children:e},e):e))}),n.badgeLabel?(0,S.tZ)(o.Ct,{label:n.badgeLabel,mood:"brand",iconName:n.badgeIconName,layout:"iconLeading"}):null,n.helperLabel?(0,S.tZ)(o.nv,{id:"helper-label-panel",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:n.helperLabel}):null,n.infoBox?(0,S.tZ)(o.ke,{size:"large",title:n.infoBox.title,description:n.infoBox.description,mood:null!=(t=n.infoBox.mood)?t:"neutral"}):null,("text"===n.type||"select"===n.type||"cta"===n.type)&&(0,S.tZ)("div",{children:(0,S.tZ)(qy,{...e})})]}),"switch"===n.type&&(0,S.tZ)("div",{children:(0,S.tZ)(qy,{...e})})]})},n.feature)},Fy="_common_generic_error",Gy=({teamName:e,isTeamDiscontinuedAfterTrial:t})=>{const{translate:n}=(0,p.Z)(),a=su(),i=!0===(0,xe.o)(s_.G.WebOnboardingInviteLinkTacMigration),{inviteLinkDataForAdmin:s,getInviteLinkDataForAdmin:l,inviteLinkDataLoading:c,createInviteLink:d,toggleInviteLink:_}=eu();(0,r.useEffect)((()=>{i||l()}),[l,i]);const u=i?a.status===L.rq.Success?a:null:s,m=i?a.status===L.rq.Success?a.enabled:null:!s?.disabled,g=(0,ee.cI)(u?.teamKey),h={type:"switch",isLoading:i?a.status===L.rq.Loading:c,label:n("team_settings_enable_invite_link_label"),isReadOnly:t,feature:"inviteLink",value:!0===m,customSwitchHandler:i?async()=>{a.status===L.rq.Success&&await a.sendToggleInviteLink(!m).catch((()=>{throw Error(n(Fy))}))}:async()=>{const t=u?.teamKey;if(t){if(!await _(null==m||m))throw Error(n(Fy))}else if(!await d(e))throw Error(n(Fy));if(!await l())throw Error(n(Fy))},helperLabel:(0,S.BX)(S.HY,{children:[n("team_settings_disable_enable_invite_link_helper"),!0===m?(0,S.BX)("span",{sx:{marginTop:"12px",display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",gap:"8px"},children:[(0,S.tZ)(au.q,{mood:"neutral",intensity:"supershy",iconProps:{color:"ds.text.neutral.standard"},copyValue:g,"data-testid":"invite-link-copy-button"}),(0,S.tZ)(o.nv,{as:"span",textStyle:"ds.body.reduced.link",children:g})]}):null]})};return(0,S.tZ)(jy,{field:h})},Vy=()=>{const{translate:e}=(0,p.Z)(),t=Hi(),n=(0,Jg.U)(),a={type:"header",label:e("team_settings_header_user_access")};return t&&null!==n?(0,S.BX)(Iy,{children:[(0,S.tZ)(Ay,{header:a}),(0,S.tZ)(Gy,{teamName:t,isTeamDiscontinuedAfterTrial:n})]}):null},Hy=({settingRow:e,editSettings:t,checkForAuthenticationError:n})=>{const{reportTACError:a}=H();return(0,S.tZ)(o.ke,{sx:{margin:"16px 0"},title:e.label,description:e.description,icon:e.icon,size:"large",mood:e.mood,actions:[e.actions?.secondary?(0,S.tZ)(o.zx,{mood:e.mood,intensity:"quiet",icon:"ActionOpenExternalLinkOutlined",layout:"iconLeading",onClick:e.actions?.secondary.onClick,children:e.actions?.secondary.label},e.actions?.secondary.label):null,e.actions?.primary?(0,S.tZ)(o.zx,{mood:e.mood,intensity:"catchy",onClick:async()=>{if(t&&e.featuresToDisable&&!n?.())try{await t(e.featuresToDisable)}catch(e){a(e)}},children:e.actions?.primary.label},e.actions?.primary.label):null]})},Wy=({textWithButton:e})=>(0,S.BX)("div",{sx:{display:"flex",alignItems:"flex-start",flexDirection:"row",marginBottom:"32px",marginTop:"7px"},children:[(0,S.BX)("div",{children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:Ry.SETTINGS_LABEL_MARGIN_TOP,children:e.label.split("//").map(((e,t)=>t%2?(0,S.tZ)("span",{sx:{color:"ds.text.oddity.disabled",fontWeight:"300"},children:e},e):e))}),e.helperLabel?(0,S.tZ)("div",{id:"helper-label-panel",sx:Ry.HELPER_LABEL_PANEL,children:e.helperLabel}):null]}),(0,S.tZ)("div",{children:(0,S.tZ)(by.Z,{label:e.buttonLabel,onClick:e?.onClick})})]},e.label),$y=({settingRow:e,...t})=>{switch(e.type){case"header":return(0,S.tZ)(Ay,{header:e});case"textwithbutton":return(0,S.tZ)(Wy,{textWithButton:e});case"quickDisable":return(0,S.tZ)(Hy,{settingRow:e});default:return(0,S.tZ)(jy,{field:e,...t})}},Ky=e=>{const{translate:t}=(0,p.Z)(),{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:n,policies:a}=e;if(!a)return null;const i={type:"text",multiLine:!0,isReadOnly:n,label:t("team_settings_team_domain"),helperLabel:t("team_settings_team_domain_helper"),hintText:t("team_settings_team_domain_placeholder"),feature:"teamDomain",value:a.teamDomain,serializer:e=>e?e.split(";").map((e=>e.trim().toLowerCase())).filter((e=>Boolean(e.length))):[],deserializer:e=>e?.length?e.join(";"):"",validator:e=>e.some((e=>!ld().isFQDN(e)))?"wrong_url":e.some((e=>e.length>255))?"wrong_size":null,getErrorMessageForKey:e=>{switch(e){case"wrong_size":return t("team_settings_team_domain_save_error_msg_wrong_size",{lengthLimit:255});case"wrong_url":return t("team_settings_team_domain_save_error_msg_wrong_url");case"too_many_requests":return t("team_settings_too_many_requests");default:return t("team_settings_team_domain_save_error_msg_generic_error")}},constraintsFromOtherFields:{requiredFor:[{feature:"enableForcedDomains",reset:e=>{a.teamDomain.length||(e.enableForcedDomains=!1)}},{feature:"enableRemoveForcedContent",reset:e=>{a.teamDomain.length||(e.enableRemoveForcedContent=!1)}}]}};return(0,S.tZ)($y,{settingRow:i,...e})},Yy=()=>{const{translate:e}=(0,p.Z)(),t={type:"quickDisable",label:e("team_settings_space_management_click_to_disable_infobox_title"),description:e("team_settings_space_management_click_to_disable_infobox_subtitle"),mood:"brand",featuresToDisable:{enableForcedDomains:!1,enableRemoveForcedContent:!1},actions:{primary:{label:e("team_settings_space_management_infobox_disable_button")},secondary:{label:e("team_settings_space_management_infobox_learn_more_button"),onClick:()=>(0,P.Yo)(ee.Rf)}}};return(0,S.tZ)($y,{settingRow:t})},Qy=()=>{const{translate:e}=(0,p.Z)(),t={type:"quickDisable",label:e("team_settings_space_management_disabled_infobox_title"),description:e("team_settings_space_management_disabled_infobox_subtitle"),icon:"FeedbackSuccessOutlined",mood:"positive",actions:{secondary:{label:e("team_settings_space_management_infobox_learn_more_button"),onClick:()=>(0,P.Yo)(ee.Rf)}}};return(0,S.tZ)($y,{settingRow:t})},Jy=e=>{const{translate:t}=(0,p.Z)(),{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:n,policies:a}=e;if(!a)return null;const i={type:"switch",isReadOnly:n,label:t("team_settings_enable_space_restrictions"),helperLabel:t("team_settings_enable_space_restrictions_helper"),value:a.enableForcedDomains,feature:"enableForcedDomains",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_enable_space_restrictions_save_error_msg_generic_error"),constraintsFromOtherFields:{disabledWhen:[{feature:"teamDomain",condition:e=>!e.teamDomain?.length,warningMessage:t("team_settings_enable_space_restrictions_define_team_domain_first")}],requiredFor:[{feature:"enableRemoveForcedContent",reset:e=>e.enableRemoveForcedContent=!1}]}};return(0,S.tZ)($y,{settingRow:i,...e})},eb=e=>{const{translate:t}=(0,p.Z)(),{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:n,policies:a}=e;if(!a)return null;const i={type:"switch",label:t("team_settings_remove_forced_content"),isReadOnly:n,helperLabel:t("team_settings_remove_forced_content_helper"),value:a.enableRemoveForcedContent,feature:"enableRemoveForcedContent",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_enable_space_restrictions_save_error_msg_generic_error"),constraintsFromOtherFields:{disabledWhen:[{feature:"teamDomain",condition:e=>!e.teamDomain?.length,warningMessage:t("team_settings_remove_forced_content_define_team_domain_first")},{feature:"enableForcedDomains",condition:e=>!e.enableForcedDomains,warningMessage:t("team_settings_remove_forced_content_enable_forced_domains_first")}]}};return(0,S.tZ)($y,{settingRow:i,...e})};var tb,nb;const ab=e=>{const{translate:t}=(0,p.Z)(),{showQuickDisableOfSmartSpaceManagement:n,policies:a}=e,i={type:"header",label:t("team_settings_header_team_space_options")},r=n&&!a?.enableForcedDomains&&!a?.enableRemoveForcedContent,s=n&&(a?.enableForcedDomains||a?.enableRemoveForcedContent);return(0,S.BX)(Iy,{children:[(0,S.tZ)(Ay,{header:i}),s&&(tb||(tb=(0,S.tZ)(Yy,{}))),r&&(nb||(nb=(0,S.tZ)(Qy,{}))),(0,S.tZ)(Ky,{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:r,...e}),(0,S.tZ)(Jy,{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:r,...e}),(0,S.tZ)(eb,{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:r,...e})]})},ib=e=>{const{translate:t}=(0,p.Z)(),{isTeamDiscontinuedAfterTrial:n,policies:a}=e;if(!a)return null;const i={type:"select",label:t("team_settings_force_crypto_payload_label"),isReadOnly:n,helperLabel:t("team_settings_force_crypto_payload_helper"),value:a.cryptoForcedPayload,feature:"cryptoForcedPayload",options:[{label:t("team_settings_force_crypto_payload_option_disabled"),value:"disabled"},{label:t("team_settings_force_crypto_payload_option_argon2"),value:"$1$argon2d$16$3$32768$2$aes256$cbchmac$16$"},{label:t("team_settings_force_crypto_payload_option_pbkdf2_advanced"),value:"$1$pbkdf2$16$200000$sha256$aes256$cbchmac$16$"},{label:t("team_settings_force_crypto_payload_option_pbkdf2_standard"),value:"KWC3",disabled:!0}],getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_force_crypto_payload_save_error_msg_generic_error")};return(0,S.tZ)($y,{settingRow:i,...e})},rb=e=>{const{translate:t}=(0,p.Z)(),{isTeamDiscontinuedAfterTrial:n,policies:a}=e;if(!a)return null;const i={type:"switch",isReadOnly:n,label:t("team_settings_enforce_2fa"),helperLabel:t("team_settings_enforce_2fa_helper"),infoBox:{title:t("team_settings_generate_recovery_codes_infobox_title"),description:t.markup("team_settings_generate_recovery_codes_infobox_description_markup")},value:a.enforce2FA,feature:"enforce2FA",confirmEnable:{title:t("team_settings_enforce_2fa_confirm_enable_title"),label:t("team_settings_enforce_2fa_confirm_enable_helper2"),dismiss:t("team_settings_enforce_2fa_confirm_enable_dismiss"),confirm:t("team_settings_enforce_2fa_confirm_enable_confirm")},getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_enforce_2fa_save_error_msg_generic_error")};return(0,S.tZ)($y,{settingRow:i,...e})},sb=e=>{const{translate:t}=(0,p.Z)(),{isPersonalSpaceEnabledViaTeamSetting:n,isTeamDiscontinuedAfterTrial:a,policies:i}=e;if(!i||n)return null;const r={type:"switch",label:t("team_settings_allow_export"),helperLabel:t("team_settings_allow_export_helper"),infoBox:a?{title:t("team_settings_allow_export_infobox_title"),description:t("team_settings_allow_export_infobox_subtitle"),mood:"brand"}:void 0,value:i.vaultExportEnabled,feature:"vaultExportEnabled",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"_common_generic_error")};return(0,S.tZ)($y,{settingRow:r,...e})},ob=e=>{const{translate:t}=(0,p.Z)(),n=Bl(),{hasExcludedPolicy:a,hasTrialBusinessPaywall:i,isTeamDiscontinuedAfterTrial:r,policies:s}=e,o=a("forceAutomaticLogout");if(!s)return null;const l={type:"select",isReadOnly:r||o||n,label:t("team_settings_force_auto_logout_after"),helperLabel:t("team_settings_force_auto_logout_after_helper"),badgeIconName:o||i||n?"PremiumOutlined":void 0,badgeLabel:o||i||n?t("team_settings_available_in_business_plan"):void 0,value:s.forceAutomaticLogout,feature:"forceAutomaticLogout",options:["unset","15","30","60"].map((e=>({label:t("team_settings_force_auto_logout_after_"+e),value:e}))),getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_force_auto_logout_after_save_error_msg_generic_error")};return(0,S.tZ)($y,{settingRow:l,...e})},lb=e=>{const{translate:t}=(0,p.Z)(),{hasExcludedPolicy:n,hasTrialBusinessPaywall:a,isTeamDiscontinuedAfterTrial:i,policies:r}=e,s=n("lockOnExit");if(!r)return null;const o={type:"switch",isReadOnly:i||s,label:t("team_settings_lock_on_exit"),helperLabel:t("team_settings_lock_on_exit_helper"),value:r.lockOnExit,feature:"lockOnExit",badgeIconName:s||a?"PremiumOutlined":void 0,badgeLabel:s||a?t("team_settings_available_in_business_plan"):void 0,getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_lock_on_exit_save_error_msg_generic_error")};return(0,S.tZ)($y,{settingRow:o,...e})},cb=e=>{const{translate:t}=(0,p.Z)(),n=Bl(),{hasExcludedPolicy:a,hasTrialBusinessPaywall:i,isPersonalSpaceEnabledViaTeamSetting:r,isTeamDiscontinuedAfterTrial:s,policies:o}=e,l=a("collectSensitiveDataAuditLogsEnabled");if(!o)return null;const c={type:"switch",isReadOnly:s||l||n,label:t("team_settings_collect_sensitive_data_audit_logs_enabled"),helperLabel:t(r?"team_settings_collect_sensitive_data_audit_logs_enabled_helper":"team_settings_collect_sensitive_data_audit_logs_enabled_helper_without_space"),badgeIconName:l||i||n?"PremiumOutlined":void 0,badgeLabel:l||i||n?t("team_settings_available_in_business_plan"):void 0,value:o.collectSensitiveDataAuditLogsEnabled,feature:"collectSensitiveDataAuditLogsEnabled",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_lock_on_exit_save_error_msg_generic_error")};return(0,S.tZ)($y,{settingRow:c,...e})},db=e=>{const{translate:t}=(0,p.Z)(),n=Bl(),a=(0,i.k6)(),{hasExcludedPolicy:r,hasTrialBusinessPaywall:s,policies:o,routes:c,showPaywallInfo:d}=e,_=r("secureWifiEnabled"),{shouldShowBuyOrUpgradePaywall:u,isTrialOrGracePeriod:g,planType:h}=d,y=!_&&u&&g,b=!_&&u&&"starter"===h;let x,f,v;if(y?(x=t("team_settings_available_in_paid_subscription_badge"),f=()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuyDashlane,clickOrigin:l.ClickOrigin.VpnFeatureActivationSetting})),a.push(c.teamAccountCheckoutRoutePath)},v=t("team_settings_buy_dashlane_cta")):b?(x=t("team_settings_upgrade_badge"),f=()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.SeePlan,clickOrigin:l.ClickOrigin.VpnFeatureActivationSetting})),(0,i.uX)(`${c.teamAccountChangePlanRoutePath}`)},v=t("team_settings_see_plans_cta")):(_||s||n)&&(x=t("team_settings_available_in_business_plan")),!o)return null;const C={type:b||y?"cta":"switch",badgeIconName:b||y||_||s||n?"PremiumOutlined":void 0,badgeLabel:x,ctaAction:f,ctaLabel:v,isReadOnly:_||n,label:t("team_settings_vpn"),helperLabel:t("team_settings_vpn_helper"),value:o.enableVPN,feature:"enableVPN",getErrorMessageForKey:e=>{switch(e){case"too_many_requests":return t("team_settings_too_many_requests");case"not_authorized":return t("team_settings_vpn_disabled_for_free_trial");default:return t("team_settings_vpn_save_error_msg_generic_error")}}};return(0,S.tZ)($y,{settingRow:C,...e})},_b=e=>{const{translate:t}=(0,p.Z)(),{policies:n}=e;if(!n)return null;const a={type:"switch",label:t("team_settings_rich_icons"),helperLabel:t("team_settings_rich_icons_helper"),value:n.richIconsEnabled,feature:"richIconsEnabled",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_server_error")};return(0,S.tZ)($y,{settingRow:a,...e})},ub=e=>{const{translate:t}=(0,p.Z)(),n=(0,xe.o)(Zg.c.ItemVisibilityPhase1),{policies:a}=e;if(!a||!n)return null;const i={type:"switch",label:t("team_settings_uvvs_label"),helperLabel:t("team_settings_uvvs_helper"),value:a.itemVisibilityEnabled,feature:"itemVisibilityEnabled",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_server_error")};return(0,S.tZ)($y,{settingRow:i,...e})},mb=e=>{const{translate:t}=(0,p.Z)(),n={type:"header",label:t("team_settings_header_security")};return(0,S.BX)(Iy,{children:[(0,S.tZ)(Ay,{header:n}),(0,S.tZ)(ib,{...e}),(0,S.tZ)(rb,{...e}),(0,S.tZ)(sb,{...e}),(0,S.tZ)(ob,{...e}),(0,S.tZ)(lb,{...e}),(0,S.tZ)(cb,{...e}),(0,S.tZ)(db,{...e}),(0,S.tZ)(_b,{...e}),(0,S.tZ)(ub,{...e})]})},pb=({className:e})=>{const{translate:t}=(0,p.Z)(),n=(0,xe.o)("monetization_extension_policies_revert_notice"),a=(0,q.u)(pr.t),i=(0,c.k)(pr.t,"HasSeenStarterRepackagePolicyInfobox");return!n||i.status!==L.rq.Success||i.data?null:(0,S.tZ)(o.ke,{title:t("team_settings_starter_repackage_policy_change_title"),description:t("team_settings_starter_repackage_policy_change_description"),size:"large",actions:[(0,S.tZ)(o.zx,{onClick:()=>{a.markStarterRepackagePolicyInfoboxSeen()},children:t("team_settings_starter_repackage_policy_change_cta")},"dismiss")],sx:{whiteSpace:"break-spaces"},className:e})},gb=({className:e})=>{const{translate:t}=(0,p.Z)(),n=(0,me.U)(),a=`${ee.ub}?plan=business&subCode=${null!=n?n:""}`;return(0,S.tZ)(o.ke,{className:e,title:t("team_settings_in_trial_paywall_repackage_policies_title"),size:"large",actions:[(0,S.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.UpgradeBusinessTier,clickOrigin:l.ClickOrigin.BannerTacSettingsPoliciesPaywall}))},as:"a",href:a,rel:"noreferrer",target:"_blank",children:t("team_settings_in_trial_paywall_repackage_policies_cta")},"cta")]})},hb={CONTAINER:{display:"flex",flexDirection:"column",gap:"24px",padding:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",border:"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px"},HEADER:{display:"flex",flexDirection:"column",gap:"8px"},FEATURES_LIST:{display:"grid",gap:"16px",gridTemplateColumns:"1fr"}},yb=()=>{const{translate:e}=(0,p.Z)(),{routes:t}=(0,i.Xo)(),n=`${t.teamAccountChangePlanRoutePath}?plan=business`;return(0,S.BX)("div",{sx:hb.CONTAINER,children:[(0,S.BX)("div",{sx:hb.HEADER,children:[(0,S.tZ)(o.X6,{as:"h5",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e("team_settings_starter_repackage_upgrade_tile_title")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("team_settings_starter_repackage_upgrade_tile_subtitle")})]}),(0,S.BX)("div",{sx:hb.FEATURES_LIST,children:[(0,S.tZ)(zl,{iconName:"SettingsOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_advanced_policies")}),(0,S.tZ)(zl,{iconName:"GroupOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_unlimited_seats")}),(0,S.tZ)(zl,{iconName:"ToolsOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_sso")}),(0,S.tZ)(zl,{iconName:"SharedOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_scim")})]}),(0,S.tZ)(o.zx,{fullsize:!0,mood:"brand",intensity:"catchy",layout:"iconLeading",icon:"PremiumOutlined",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.UpgradeBusinessTier,clickOrigin:l.ClickOrigin.FeatureLimitationsBlock}))},as:i.rU,to:n,children:e("team_settings_starter_repackage_upgrade_tile_cta")})]})};var bb,xb,Sb;const fb={CONTAINER:{display:"flex",flexDirection:"column",gap:"24px",marginBottom:"24px"}},vb=()=>{const{hasStarterPaywall:e,hasTrialBusinessPaywall:t}=Ce();return Bl()?(0,S.tZ)("div",{sx:fb.CONTAINER,children:(0,S.tZ)(o.Zb,{sx:{padding:"16px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:bb||(bb=(0,S.tZ)(ql,{}))})}):e?(0,S.BX)("div",{sx:fb.CONTAINER,children:[xb||(xb=(0,S.tZ)(pb,{})),Sb||(Sb=(0,S.tZ)(yb,{}))]}):t?(0,S.tZ)(gb,{sx:{alignContent:"start",height:"100%"}}):null},Cb=e=>{const{translate:t}=(0,p.Z)(),n=Bl(),{hasTrialBusinessPaywall:a,hasExcludedPolicy:i,isTeamDiscontinuedAfterTrial:r,policies:s}=e,o=i("sharingDisabled");if(!s)return null;const l={type:"switch",isReadOnly:r||o||n,label:t("team_settings_allow_sharing"),helperLabel:t("team_settings_allow_sharing_helper"),value:s.allowSharing,feature:"allowSharing",badgeIconName:o||a||n?"PremiumOutlined":void 0,badgeLabel:o||a||n?t("team_settings_available_in_business_plan"):void 0,getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_allow_sharing_save_error_msg_generic_error"),constraintsFromOtherFields:{requiredFor:[{feature:"restrictSharingToTeam",reset:e=>e.restrictSharingToTeam=!1}]}};return(0,S.tZ)($y,{settingRow:l,...e})},Eb=e=>{const{translate:t}=(0,p.Z)(),{isTeamDiscontinuedAfterTrial:n,policies:a,restrictSharingPaywallDetails:i}=e;if(!a)return null;const{shouldShowUpgradePaywall:r}=i,s={type:"switch",badgeIconName:r?"PremiumOutlined":void 0,badgeLabel:r?t("team_settings_available_in_business_plan"):void 0,isReadOnly:n||r,label:t("team_settings_restrict_sharing_to_team_title"),helperLabel:t("team_settings_restrict_sharing_to_team_description"),value:a.restrictSharingToTeam,feature:"restrictSharingToTeam",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_restrict_sharing_to_team_generic_error"),constraintsFromOtherFields:{disabledWhen:[{feature:"allowSharing",condition:e=>!e.allowSharing,warningMessage:t("team_settings_restrict_sharing_to_team_enable_sharing_first")}]}};return(0,S.tZ)($y,{settingRow:s,...e})},Zb=e=>{const{translate:t}=(0,p.Z)(),n={type:"header",label:t("team_setting_header_sharing")};return(0,S.BX)(Iy,{children:[(0,S.tZ)(Ay,{header:n}),(0,S.tZ)(Cb,{...e}),(0,S.tZ)(Eb,{...e})]})};var Db=n(13134);const Tb=e=>{const{translate:t}=(0,p.Z)(),n=Bl(),{hasTrialBusinessPaywall:a,hasExcludedPolicy:i,isTeamDiscontinuedAfterTrial:r,policies:s}=e,o=i("autologinDomainDisabledArray");if(!s)return null;const l={type:"text",isReadOnly:r||o||n,multiLine:!0,label:t("team_settings_disable_auto_login_domains"),helperLabel:t("team_settings_disable_auto_login_domains_helper"),hintText:t("team_settings_disable_auto_login_domains_placeholder"),value:s.disableAutoLoginDomains,badgeIconName:o||a||n?"PremiumOutlined":void 0,badgeLabel:o||a||n?t("team_settings_available_in_business_plan"):void 0,serializer:e=>(e.length?e.split(";"):[]).filter((e=>!!e.length)).map((e=>e.trim())),deserializer:e=>e?.length?e.join(";"):"",validator:e=>e.some((e=>!new Db.Y(e).isUrlValid()))?"wrong_url":e.some((e=>e.length>255))?"wrong_size":null,feature:"disableAutoLoginDomains",getErrorMessageForKey:e=>{switch(e){case"wrong_size":return t("team_settings_disable_auto_login_domains_save_error_msg_wrong_size",{lengthLimit:255});case"wrong_url":return t("team_settings_disable_auto_login_domains_save_error_msg_wrong_url");case"too_many_requests":return t("team_settings_too_many_requests");default:return t("team_settings_disable_auto_login_domains_save_error_msg_generic_error")}}};return(0,S.tZ)($y,{settingRow:l,...e})},kb=e=>{const{translate:t}=(0,p.Z)(),n={type:"header",label:t("team_settings_header_browser_settings")};return(0,S.BX)(Iy,{children:[(0,S.tZ)(Ay,{header:n}),(0,S.tZ)(Tb,{...e})]})};var Ib,Ab,wb;const Nb=({lee:e})=>{const{routes:t}=(0,i.Xo)(),{translate:n}=(0,p.Z)(),a=pe(e.permission.adminAccess),s=function(e){const t=(0,me.U)(),n=(0,X.C)();return n?{shouldShowUpgradePaywall:e.hasBillingAccess&&n.spaceTier!==_.lD.Business&&n.spaceTier!==_.lD.BusinessPlus,accountSubscriptionCode:null!=t?t:""}:null}(e.permission.adminAccess),o=(0,Jg.U)(),c=(()=>{const e=(0,te.lZ)(),t=(0,xe.o)(le.w.EcommerceWebB2BDiscontinuationDev);return e.isLoading||"boolean"!=typeof t?null:t&&!!e.isTeamSoftDiscontinued&&!!e.isTrial})(),{reportTACError:u}=H(),{data:g,status:h}=Tg(),y=(()=>{const{editTeamPolicies:e}=(0,q.u)(d.o);return e})(),{hasExcludedPolicy:b,hasTrialBusinessPaywall:x}=Ce();(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSettingsPolicies)}),[]);const f=async t=>{const n=(0,Lr.v0)(e.globalState);if(0===Object.keys(t).length||!n?.teamId)return Promise.resolve();await y({teamId:n.teamId,policyUpdates:t})},v=()=>!(0,Lr.v0)(e.globalState)&&(u(new Error(Rr.N)),!0);if(!a||!s||null===o||null===c)return Ib||(Ib=(0,S.tZ)(El.a,{}));h===L.rq.Error&&u(new Error("Error loading team policies"));const C=!(null==g)&&g.enablePersonalSpace;return(0,S.tZ)(hy,{title:n("team_settings_menu_title_policies"),isLoading:h===L.rq.Loading,sideContent:Ab||(Ab=(0,S.tZ)(vb,{})),children:h===L.rq.Success&&g?(0,S.BX)(S.HY,{children:[wb||(wb=(0,S.tZ)(Vy,{})),C?(0,S.tZ)(ab,{checkForAuthenticationError:v,editSettings:f,policies:g,showQuickDisableOfSmartSpaceManagement:c}):null,(0,S.tZ)(mb,{checkForAuthenticationError:v,editSettings:f,hasExcludedPolicy:b,hasTrialBusinessPaywall:x,isPersonalSpaceEnabledViaTeamSetting:C,isTeamDiscontinuedAfterTrial:o,policies:g,routes:t,showPaywallInfo:a}),(0,S.tZ)(Zb,{checkForAuthenticationError:v,editSettings:f,hasExcludedPolicy:b,hasTrialBusinessPaywall:x,isTeamDiscontinuedAfterTrial:o,policies:g,restrictSharingPaywallDetails:s,routes:t}),(0,S.tZ)(kb,{checkForAuthenticationError:v,editSettings:f,hasExcludedPolicy:b,hasTrialBusinessPaywall:x,isTeamDiscontinuedAfterTrial:o,policies:g})]}):null})};function Ob({path:e}){return(0,S.tZ)(i.GB,{path:e,permission:e=>e.adminAccess.hasFullAccess,children:(0,S.BX)(i.rs,{children:[(0,S.tZ)(i.l_,{exact:!0,from:e,to:`${e}${a.B9.POLICIES}`}),(0,S.tZ)(i.Vy,{path:`${e}${a.B9.POLICIES}`,component:Nb}),(0,S.tZ)(i.Vy,{path:`${e}${a.B9.DUO}`,component:vy,reducer:my.ZP}),(0,S.tZ)(i.Vy,{path:`${e}${a.B9.MASTER_PASSWORD_POLICIES}`,component:ky,reducer:Ey.ZP})]})})}var Rb=n(11716),Lb=n(95450);const Mb=new Map([[_.lD.Business,l.B2bPlanTier.Business],[_.lD.Team,l.B2bPlanTier.Team],[_.lD.Legacy,l.B2bPlanTier.Legacy],[_.lD.Enterprise,l.B2bPlanTier.Business]]),Bb=({currentBillingPlanTier:e,emailDomainError:t,emailDomainSubmittedCount:n,emailDomainValidatedCount:a,encryptionServicePlatformSelected:i,idpValidationResponse:r,ssoSetupStep:s,ssoSolutionChosen:o,testSsoResponse:c})=>{(0,m.Kz)(new l.UserSetupSsoEvent({currentBillingPlanTier:e,emailDomainError:null!=t?t:l.EmailDomainError.OtherError,emailDomainSubmittedCount:null!=n?n:0,emailDomainValidatedCount:null!=a?a:0,encryptionServicePlatformSelected:null!=i?i:l.EncryptionServicePlatformSelected.AmazonWebServices,idpValidationResponse:null!=r?r:l.IdpValidationResponse.Success,ssoSetupStep:s,ssoSolutionChosen:o,testSsoResponse:null!=c?c:l.TestSsoResponse.NotTested}))},Pb=e=>e&&Mb.get(e)||l.B2bPlanTier.Business,Ub=e=>{Bb({...e,currentBillingPlanTier:Pb(e.currentBillingPlanTier),ssoSolutionChosen:l.SsoSolutionChosen.SelfHostedSso})},Xb=e=>{Bb({...e,currentBillingPlanTier:Pb(e.currentBillingPlanTier),ssoSolutionChosen:l.SsoSolutionChosen.NitroSso})};var zb=n(5961),qb=n.n(zb),jb=n(24047);const Fb=e=>{const{markdownValue:t="",linkParams:n={},linkProps:a}=e,{linkTarget:i,onLinkClicked:r=(()=>{})}=n,s=t.includes("\n");return(0,S.tZ)(qb(),{source:t,allowedTypes:["Text","Link","Emph","Strong","Paragraph","Softbreak","List","Item","Code"],containerTagName:"span",softBreak:"br",renderers:{Paragraph:s?"p":"span",Link:function(e){return(0,S.tZ)(jb.Z,{...a,"aria-label":t,href:e.href,target:i,onClick:()=>{r(e.href)},children:e.children})}}})},Gb=({onClose:e,onConfirm:t,titleText:n,bodyText:a})=>{const{translate:i}=(0,p.Z)(),[s,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),_=i("_common_action_cancel");return(0,S.BX)(re.VqE,{isOpen:!0,disableOutsideClickClose:!0,disableScrolling:!0,closeIconName:_,onClose:e,children:[(0,S.tZ)(re.$N8,{title:n}),(0,S.tZ)(re.a7O,{children:(0,S.tZ)(re.nvN,{color:c?"ds.text.danger.standard":"ds.text.neutral.standard",children:null!=c?c:a})}),(0,S.BX)(re.cNS,{children:[(0,S.tZ)(o.zx,{sx:{mr:"12px"},mood:"neutral",intensity:"quiet",onClick:()=>{e()},disabled:s,children:_}),(0,S.tZ)(o.zx,{mood:"brand",intensity:"catchy",onClick:async()=>{l(!0),d(null);try{await t(),l(!1),e()}catch(e){d(e instanceof Error?e.message:i("_common_generic_error")),l(!1)}},isLoading:s,disabled:s,children:"Yes, clear setup"})]})]})};let Vb=function(e){return e.ChooseSso="ChooseSso",e.SelfHosted="SelfHosted",e.Nitro="Nitro",e}({});const Hb=({pageContext:e,onSetupClear:t})=>{const{routes:n}=(0,i.Xo)(),a=(0,gl.B)(),s=(0,me.U)(),{translate:d}=(0,p.Z)(),[_,u]=(0,r.useState)(!1),{status:g,data:h}=(0,c.k)(Rb.y,"ssoProvisioning");if(g!==L.rq.Success||h.enableSSO.ssoEnabled)return null;const{ssoSolution:y,ssoStatus:b,global:{ssoCapable:x}}=h;if(!1===x)return(0,S.tZ)(o.ke,{mood:"neutral",size:"large",title:d("team_settings_es_sso_plan_error_header"),description:d("team_settings_es_sso_plan_missing_body"),actions:a?.premiumStatus?[(0,Se.wt)(a.premiumStatus)?(0,S.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuyDashlane,clickOrigin:l.ClickOrigin.SsoPaywallBanner})),(0,P.Yo)(`${ee.ub}?plan=business&subCode=${null!=s?s:""}`)},role:"link",children:d("team_account_teamplan_plan_buy_dashlane")},"buy"):(0,S.tZ)(i.rU,{to:`${n.teamAccountChangePlanRoutePath}?plan=business`,children:(0,S.tZ)(o.zx,{children:d("team_settings_es_sso_plan_missing_button")})},"upgrade")]:[]});const f=b===Lb.pI.enum.incomplete;if(e!==Vb.ChooseSso&&f){let n=null,a=async()=>{await(t?.()),Ub({ssoSetupStep:l.SsoSetupStep.ClearSsoSettings})};if(e===Vb.Nitro&&y===Lb.WO.enum.selfHostedSaml&&(n={title:"To use Confidential SSO, clear self-hosted SSO setup",description:"If you want to use Confidential SSO, select **Clear setup** to erase your progress in Dashlane. Make sure to also delete your progress in your IdP.",cta:"Clear setup"},a=async()=>{await he.C.clearSelfHostedESSettings(),await(t?.())}),n)return(0,S.BX)(S.HY,{children:[_?(0,S.tZ)(Gb,{onClose:()=>u(!1),onConfirm:a,titleText:"Are you sure?",bodyText:"This action can’t be undone."}):null,(0,S.tZ)(o.ke,{mood:"neutral",size:"large",title:n.title,description:(0,S.tZ)(Fb,{markdownValue:n.description}),actions:[(0,S.tZ)(o.zx,{onClick:()=>u(!0),children:n.cta},"clear")]})]})}return(0,S.tZ)(o.ke,{mood:"warning",size:"large",title:"Switching between SSO options isn't available right now",description:"We're in the process of adding new capabilities to Confidential SSO. During this period, you can't switch between the two options. Before turning on your chosen SSO option, please make sure it meets your organization's needs."})};var Wb,$b=n(65911);const Kb=[{li:"In a separate window, log in to your IdP account."},{li:"Find the section to create a new SSO application.",ol:[{li:"Add the ID and URLs provided here to your application."},{li:"Add members who will log in to Dashlane with SSO to your application."}]}],Yb=({content:e})=>(0,S.tZ)("ol",{sx:{color:"ds.text.neutral.quiet"},children:e.map((({li:e,ol:t},n)=>(0,S.BX)(o.nv,{as:"li",textStyle:"ds.body.standard.regular",children:[(0,S.tZ)(Fb,{markdownValue:e}),t?(0,S.tZ)(Yb,{content:t}):null]},n)))}),Qb=()=>{var e,t,n;const{translate:a}=(0,p.Z)(),i=(0,c.k)(Rb.y,"ssoProvisioning"),r=i.status===L.rq.Loading,s={entityId:null!=(e=i.data?.idpApplication.entityId)?e:"",acsUrl:null!=(t=i.data?.idpApplication.acsUrl)?t:"",signOnUrl:null!=(n=i.data?.idpApplication.signOnUrl)?n:""};return(0,S.BX)("div",{sx:{display:"grid",gridTemplateColumns:"auto",gridAutoRows:"auto",gap:"24px",marginBottom:"32px"},children:[(0,S.BX)("div",{sx:{ol:{listStyleType:"decimal",ml:"20px",ol:{listStyleType:"lower-alpha"}}},children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",sx:{mb:"8px"},children:a("sso_confidential_idp_setup_page_title")}),Wb||(Wb=(0,S.tZ)(Yb,{content:Kb}))]}),(0,S.tZ)(o.ke,{mood:"brand",size:"small",title:a("sso_confidential_idp_setup_infobox_message")}),(0,S.BX)("div",{sx:{display:"grid",gridTemplateColumns:"auto",gridAutoRows:"auto",gap:"24px"},children:[(0,S.tZ)($b.x,{isLoading:r,value:s.entityId,label:a("sso_confidential_idp_setup_entity_id_label"),readOnly:!0}),(0,S.tZ)($b.x,{isLoading:r,value:s.acsUrl,label:a("sso_confidential_idp_setup_acs_url_label"),readOnly:!0}),(0,S.tZ)($b.x,{isLoading:r,value:s.signOnUrl,label:a("sso_confidential_idp_setup_sign_on_url_label"),readOnly:!0})]})]})},Jb="_common_toast_close_label",ex="sso_confidential_metadata_form_field_placeholder",tx="sso_confidential_metadata_form_error_could_not_find_entrypoint",nx="sso_confidential_metadata_form_error_cound_not_validate_certificate",ax="sso_confidential_metadata_form_error_server_error",ix={XML_PARSE_FAILED:"sso_confidential_metadata_form_error_could_not_read_metadata",KEY_DESCRIPTOR_NOT_FOUND:tx,IDP_ENTRYPOINT_NOT_FOUND:tx,INVALID_IDP_SSO_DESCRIPTOR:tx,MISSING_CERTIFICATE:"sso_confidential_metadata_form_error_no_certificate",MULTIPLE_CERTIFICATES:"sso_confidential_metadata_form_error_multiple_certificates",INVALID_ENTRYPOINT:"sso_confidential_metadata_form_error_invalid_entrypoint",CERTIFICATE_TOO_SHORT:nx,CERTIFICATE_TOO_LONG:nx,CERTIFICATE_DECODE_FAILED:nx},rx={INVALID_METADATA_CONTENT:"sso_confidential_metadata_form_error_invalid_metadata_content",INVALID_METADATA_URL:"sso_confidential_metadata_form_error_invalid_metadata_url",DOMAIN_UPDATE_FAILED:ax,SAVE_METADATA_FAILED:ax,INTERNAL_ERROR:"sso_confidential_metadata_form_error_internal_error"},sx="Unexpected server error. Please try again or contact Customer Support.",ox="ssoIdpMetadata",lx=()=>{var e;const{showToast:t}=(0,o.pm)(),[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),{translate:d}=(0,p.Z)(),_=(0,c.k)(Rb.y,"ssoProvisioning"),{testLoginUserWithEnclaveSSO:u,validateMetadata:m,updateMetadata:g}=(0,q.u)(Rb.y),h=_.status===L.rq.Loading,y=!h&&_.data?.idpMetadata.idpUuid&&_.data?.idpMetadata.metadataValue,b=null!=(e=_.data?.idpMetadata.metadataValue)?e:"",x={ssoIdpMetadata:b},f=_.data?.ssoSolution,v=f===Lb.WO.enum.selfHostedSaml,C=(0,r.useCallback)((async(e,t)=>{try{a(!0),Xb({ssoSetupStep:l.SsoSetupStep.UpdateIdpSettings});const n=await g({metadata:""===e.ssoIdpMetadata?null:e.ssoIdpMetadata});if(a(!1),(0,j.hx)(n)){const e=n.error.tag.toUpperCase();return t.setFieldError(ox,d(e in rx?rx[e]:sx))}_.data?.global.isTeamProvisionedInNitro||Xb({ssoSetupStep:l.SsoSetupStep.CreateSsoApplication})}catch(e){return t.setFieldError(ox,sx)}}),[_.data?.global,d,g]),E=async e=>{var t;if(e&&!new Db.Y(e).isUrlValid())try{const n=await m({metadata:e});if(Xb({ssoSetupStep:l.SsoSetupStep.ValidateIdpMetadata,idpValidationResponse:(t=n,(0,j.hx)(t)?Object.values(l.IdpValidationResponse).includes(t.error.tag)?t.error.tag:l.IdpValidationResponse.XmlParseFailed:l.IdpValidationResponse.Success)}),(0,j.hx)(n)){const e=n.error.tag.toUpperCase();return d(e in ix?ix[e]:ix.XML_PARSE_FAILED)}}catch(e){return e instanceof Error?e.message:"Unknown error"}},Z=async()=>{if(!y)return;s(!0);const e=await u(void 0),n=(0,j.d6)(e);Xb({ssoSetupStep:l.SsoSetupStep.TestSsoConnection,testSsoResponse:n?l.TestSsoResponse.Success:l.TestSsoResponse.Failure}),t(n?{description:d("sso_confidential_test_nitro_sso_success_feedback"),closeActionLabel:d(Jb),mood:"brand"}:{description:d("sso_confidential_test_nitro_sso_error_feedback"),closeActionLabel:d(Jb),mood:"danger"}),s(!1)};return(0,S.tZ)(On.J9,{initialValues:x,onSubmit:C,enableReinitialize:!0,children:({isSubmitting:e,isValid:t,isValidating:a,dirty:r})=>{const s=v||e||h,l=s||!t||a||!r;return(0,S.tZ)(On.l0,{noValidate:!0,children:(0,S.BX)("div",{sx:{display:"grid",gridTemplateColumns:"auto",gridAutoRows:"auto",gap:"8px"},children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",children:d("sso_confidential_metadata_form_section_heading")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{marginBottom:"24px"},children:d("sso_confidential_metadata_form_paragraph")}),(0,S.tZ)(On.gN,{name:ox,validateOnChange:!0,validate:E,children:({field:t,meta:{error:n}})=>(0,S.tZ)(o.Kx,{required:!0,id:t.name,label:d("sso_confidential_metadata_form_field_label"),placeholder:d(ex),"aria-label":d(ex),autoCorrect:"off",autoComplete:"off",spellCheck:"false",disabled:s,feedback:!n||e||a?void 0:{text:n},error:!(!n||e||a),...t})}),(0,S.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px",justifyContent:"flex-end",mt:"12px"},children:[(0,S.tZ)(o.zx,{sx:{justifySelf:"end"},mood:"neutral",intensity:"quiet",disabled:!y,isLoading:i,onClick:Z,children:d("sso_confidential_test_nitro_sso_button_label")}),(0,S.tZ)(o.zx,{type:"submit",sx:{justifySelf:"end"},mood:"brand",intensity:b?"quiet":"catchy",disabled:l,isLoading:n,children:d("sso_confidential_metadata_form_button_submit")})]})]})})}})},cx="sso_confidential_enable_nitro_sso_confirm_dialog_cancel",dx=({title:e,body:t,primaryActionLabel:n,onConfirm:a,onCancel:i})=>{const{translate:s}=(0,p.Z)(),[l,c]=(0,r.useState)(!1);return(0,S.tZ)(o.Vq,{closeActionLabel:s(cx),title:e,isOpen:!0,onClose:i,actions:{primary:{children:n,onClick:async()=>{try{c(!0),await a()}catch{c(!1)}},disabled:l,isLoading:l},secondary:{children:s(cx),onClick:i,disabled:l}},children:t})},_x=()=>{const{translate:e}=(0,p.Z)(),{showAlert:t}=(0,Rn.V)(),[n,a]=(0,r.useState)(!1),i=(0,c.k)(Rb.y,"ssoProvisioning"),{enableSso:s}=(0,q.u)(Rb.y),d=i.data?.domainSetup[0]?.domainName,_=d?i.data?.domainVerificationInfo[d]:null,u=_?.verificationStatus!==Lb.X5.enum.valid,m=i.data?.enableSSO.ssoEnabled,g=Boolean(u||m);return(0,S.BX)(S.HY,{children:[(0,S.BX)("div",{sx:{display:"grid",gap:"8px"},children:[(0,S.tZ)(o.nv,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",children:e("sso_confidential_enable_nitro_sso_section_heading")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{mb:"4px",gridRow:"2",gridColumn:"1/1"},children:e("sso_confidential_enable_nitro_sso_description")}),(0,S.tZ)("div",{sx:{justifySelf:"end"},children:(0,S.tZ)(o.zx,{id:"enableSso",onClick:()=>{a(!0),Xb({ssoSetupStep:l.SsoSetupStep.TurnOnSso})},disabled:g,children:e("sso_confidential_enable_nitro_sso_button_label")})})]}),n?(0,S.tZ)(dx,{title:e("sso_confidential_enable_nitro_sso_confirm_dialog_title"),body:e("sso_confidential_enable_nitro_sso_confirm_dialog_body"),primaryActionLabel:e("sso_confidential_enable_nitro_sso_confirm_dialog_primary_action_label"),onConfirm:async()=>{await(async()=>{const n=await s();(0,j.d6)(n)?t(e("sso_confidential_enable_nitro_sso_success_feedback"),re.BLW.SUCCESS):t(n.error.tag,re.BLW.ERROR)})(),Xb({ssoSetupStep:l.SsoSetupStep.CompleteSsoSetup}),a(!1)},onCancel:()=>{a(!1)}}):null]})};n(58810);var ux=n(57459);const mx={ERROR_SSO_INVALID_TOKEN:"sso_confidential_verify_domain_step_domain_input_feedback_sso_error_invalid_token",ERROR_SSO_TOKEN_NOT_FOUND:"sso_confidential_verify_domain_modal_error_infobox_title_token_not_found",ERROR_SSO_TOKEN_NOT_FOUND_DESCRIPTION:"sso_confidential_verify_domain_modal_error_infobox_description_token_not_found",ERROR_SSO_GENERIC:"sso_confidential_verify_domain_modal_error_infobox_title_generic_error"},px=({pendingReason:e,tokenFound:t,verificationStatus:n})=>n===Lb.X5.enum.pending&&e===Lb.Q8.enum.invalidToken?{title:mx.ERROR_SSO_INVALID_TOKEN,data:t}:n===Lb.X5.enum.pending&&e===Lb.Q8.enum.tokenNotFound?{title:mx.ERROR_SSO_TOKEN_NOT_FOUND,description:mx.ERROR_SSO_TOKEN_NOT_FOUND_DESCRIPTION}:n===Lb.X5.enum.invalid?{title:mx.ERROR_SSO_GENERIC}:null,gx={CLOSE:"_common_dialog_dismiss_button",TITLE:"sso_confidential_verify_domain_modal_title",SUBDOMAIN_LABEL:"sso_confidential_verify_domain_modal_subdomain_label",TXT_LABEL:"sso_confidential_verify_domain_modal_txt_label",INSTRUCTION_1:"sso_confidential_verify_domain_modal_instruction_1",INSTRUCTION_2:"sso_confidential_verify_domain_modal_instruction_2",INSTUCTION_3:"sso_confidential_verify_domain_modal_instruction_3_markup",INFOBOX_TITLE:"sso_confidential_verify_domain_modal_infobox_title",VERIFY_DOMAIN_BUTTON:"sso_confidential_verify_domain_modal_verify_domain_button",VERIFY_DOMAIN_BUTTON_RETRY:"sso_confidential_verify_domain_modal_verify_domain_button_retry",VERIFY_DOMAIN_CLOSE:"sso_confidential_verify_domain_modal_verify_domain_button_close",...mx},hx=({domainName:e,domainVerificationInfo:t,onClose:n})=>{const{translate:a}=(0,p.Z)(),{checkDNSValidation:i}=(0,q.u)(Rb.y),[s,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(null);(0,r.useEffect)((()=>{t?.verificationStatus===Lb.X5.enum.valid&&c&&n()}),[t,c]),(0,r.useEffect)((()=>{t&&u(px(t))}),[t]);const{pendingReason:m,subdomainValue:g,txtValue:h,verificationStatus:y}=t;let b=a(gx.VERIFY_DOMAIN_BUTTON);return"valid"===y?b=a(gx.VERIFY_DOMAIN_CLOSE):("pending"===y&&m||"invalid"===y)&&(b=a(gx.VERIFY_DOMAIN_BUTTON_RETRY)),(0,S.BX)(o.Vq,{closeActionLabel:a(gx.CLOSE),title:a(gx.TITLE,{domainName:e}),isOpen:!0,onClose:n,actions:{primary:{children:b,onClick:"valid"===y?n:async()=>{l(!0);const t=await i({domainName:e});l(!1),(0,j.hx)(t)?u({title:gx.ERROR_SSO_GENERIC}):d(!0)},isLoading:s}},children:[(0,S.BX)("ol",{sx:{listStyleType:"decimal",ml:"20px"},children:[(0,S.tZ)(o.nv,{as:"li",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a(gx.INSTRUCTION_1)}),(0,S.tZ)(o.nv,{as:"li",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a(gx.INSTRUCTION_2)}),(0,S.tZ)(o.nv,{as:"li",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a.markup(gx.INSTUCTION_3)})]}),(0,S.tZ)(o.ke,{title:a(gx.INFOBOX_TITLE),mood:"brand"}),(0,S.tZ)($b.x,{label:a(gx.SUBDOMAIN_LABEL),value:null!=g?g:"",readOnly:!0}),(0,S.tZ)($b.x,{label:a(gx.TXT_LABEL),value:null!=h?h:"",readOnly:!0}),_?(0,S.tZ)(o.ke,{title:a(_.title),description:_.data||_.description&&a(_.description),mood:"danger",size:"medium"}):null]})};var yx;const bx=()=>{const{translate:e}=(0,p.Z)(),[t,n]=(0,r.useState)(!1),{data:a,editTeamPolicies:i,status:s}=(()=>{const{data:e,status:t}=(0,c.k)(d.o,"getTeamId"),{data:n,status:a}=(0,c.k)(d.o,"getTeamPolicies"),{editTeamPolicies:i}=(0,q.u)(d.o);return a===L.rq.Error||t===L.rq.Error?{status:L.rq.Error}:a===L.rq.Loading||t===L.rq.Loading?{status:L.rq.Loading}:{status:L.rq.Success,data:{teamPolicies:n},editTeamPolicies:t=>i({teamId:Number(e.teamId),policyUpdates:t})}})(),l=(0,c.k)(Rb.y,"ssoProvisioning");return(0,r.useEffect)((()=>{if(l.status===L.rq.Success){const t=l.data?.ssoSolution;var e;t===Lb.WO.enum.selfHostedSaml?he.C.getTeamDomains().then((e=>{e.success&&n(e.domains.some((e=>"valid"===e.status)))})):n((null!=(e=l.data?.domainSetup)?e:[]).some((e=>e.verificationStatus===Lb.X5.enum.valid)))}}),[l]),(0,S.BX)("div",{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",borderRadius:"8px",padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:[(0,S.BX)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:[e("jit_provisioning_cat_title")," "]})," ",(0,S.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px"},children:[(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("jit_provisioning_title")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:e("jit_provisioning_description")})]}),(0,S.tZ)("div",{children:s===L.rq.Loading?yx||(yx=(0,S.tZ)(o.ZX,{mood:"brand"})):(0,S.tZ)(o.ZD,{disabled:!t,onChange:e=>{e.preventDefault(),s===L.rq.Success&&i?.({ssoProvisioning:e.target.checked})},defaultChecked:!!a?.teamPolicies.ssoProvisioning})})]})]})};var xx;const Sx={SSO_STATUS_ACTIVE:"sso_confidential_verify_domain_step_sso_status_active",SSO_STATUS_VERIFIED:"sso_confidential_verify_domain_step_sso_status_verified",SSO_STATUS_UNVERIFIED:"sso_confidential_verify_domain_step_sso_status_unverified",SSO_STATUS_ERROR:"sso_confidential_verify_domain_step_sso_status_error",INPUT_LABEL:"sso_confidential_verify_domain_step_domain_input_label",BUTTON_DELETE_LABEL:"_common_action_delete",BUTTON_VERIFY_LABEL:"sso_confidential_verify_domain_step_domain_input_button_verify",BUTTON_VIEW_DETAILS_LABEL:"sso_confidential_verify_domain_step_domain_input_button_view_details",ERROR_DOMAIN_ALREADY_PROVISIONED:"sso_confidential_verify_domain_error_domain_already_provisioned",FEEDBACK_SSO_ACTIVE:"sso_confidential_verify_domain_step_domain_input_feedback_sso_active",...mx},fx=({error:e,isValid:t,isValidSSOActive:n})=>{const{translate:a}=(0,p.Z)(),i=(e,t,n)=>(0,S.tZ)(o.Ct,{mood:e,intensity:t,label:a(n)});return n?i("positive","catchy",Sx.SSO_STATUS_ACTIVE):t?i("positive","quiet",Sx.SSO_STATUS_VERIFIED):e?i("danger","quiet",Sx.SSO_STATUS_ERROR):i("neutral","quiet",Sx.SSO_STATUS_UNVERIFIED)},vx=({disabled:e,domainName:t,domainVerificationInfo:n,id:a,onModalOpen:i,onDeleteDomain:s,onUpdateDomain:l,provisionedDomains:c,ssoActive:d})=>{const{translate:_}=(0,p.Z)(),{provisionDomain:u,deleteDomain:m}=(0,q.u)(Rb.y),[g,h]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[x,f]=(0,r.useState)(0===t.length),[v,C]=(0,r.useState)(!1),[E,Z]=(0,r.useState)(null),D=c.get(t)===a,T=D&&n?.verificationStatus===Lb.X5.enum.valid,k=T&&d;(0,r.useEffect)((()=>{if(!D&&c.has(t))C(!0);else if(n){var e;Z(null!=(e=px(n)?.title)?e:null)}}),[t,n,D,c]);const I=((e,t,n)=>t?Sx.ERROR_DOMAIN_ALREADY_PROVISIONED:e||(n?Sx.FEEDBACK_SSO_ACTIVE:null))(E,v,k);return(0,S.BX)(S.HY,{children:[(0,S.tZ)(re.dDn,{alignSelf:"start",justifySelf:"start",sx:{paddingTop:"16px"},children:(0,S.tZ)(fx,{error:!!E||v||n?.verificationStatus===Lb.X5.enum.expired||n?.verificationStatus===Lb.X5.enum.invalid,isValid:T,isValidSSOActive:k})}),(0,S.tZ)(re.dDn,{children:(0,S.tZ)(o.qo,{label:_(Sx.INPUT_LABEL),placeholder:_(Sx.INPUT_LABEL),labelPersists:!1,autoCorrect:"off",autoComplete:"off",disabled:e,readOnly:D,onChange:({target:{value:e}})=>{C(!1),Z(null),f(0===e.length)},onBlur:e=>{l(e.currentTarget.value.trim().toLocaleLowerCase())},value:t,sx:{width:"400px"},error:v||!!E,feedback:I?_(I):void 0})}),(0,S.tZ)(re.dDn,{alignSelf:"start",justifySelf:"end",sx:{paddingTop:"5px"},...k&&{gridColumnStart:"3",gridColumnEnd:"5"},children:T&&!v?(0,S.tZ)(o.zx,{mood:"neutral",intensity:"quiet",onClick:i,disabled:e,children:_(Sx.BUTTON_VIEW_DETAILS_LABEL)}):(0,S.tZ)(o.zx,{mood:"brand",intensity:"quiet",disabled:e||x||v||y,isLoading:g,onClick:async()=>{try{if(!n&&!E){h(!0);const e=await u({domainName:t});if((0,j.hx)(e))return"DomainAlreadyProvisioned"===e.error.tag?void C(!0):void Z(Sx.ERROR_SSO_GENERIC)}i()}catch{Z(Sx.ERROR_SSO_GENERIC)}finally{h(!1)}},sx:{position:"relative"},children:_(Sx.BUTTON_VERIFY_LABEL)})}),k?null:(0,S.tZ)(re.dDn,{alignSelf:"start",justifySelf:"end",sx:{paddingTop:"5px"},children:(0,S.tZ)(o.zx,{"aria-label":Sx.BUTTON_DELETE_LABEL,disabled:g,isLoading:y,mood:"danger",intensity:"supershy",layout:"iconOnly",icon:xx||(xx=(0,S.tZ)(o.JO,{name:"ActionDeleteOutlined"})),onClick:async()=>{try{if(n&&!v){b(!0);const e=await m({domainName:t});if((0,j.hx)(e))return void Z(Sx.ERROR_SSO_GENERIC)}s()}catch{Z(Sx.ERROR_SSO_GENERIC)}finally{b(!1)}},sx:{position:"relative"}})}),(0,S.tZ)(re.dDn,{gridColumnStart:1,gridColumnEnd:5,sx:{borderBottom:"1px solid ds.border.neutral.quiet.idle"}})]})};var Cx,Ex;const Zx={VERIFY_DOMAIN_TITLE:"sso_confidential_verify_domain_step_title",TABLE_HEADER_STATUS:"sso_confidential_verify_domain_step_table_header_status",TABLE_HEADER_DOMAIN:"sso_confidential_verify_domain_step_table_header_domain",BUTTON_ADD_LABEL:"sso_confidential_verify_domain_step_add_domain_button_label",PAGINATION_ITEM_COUNT:"_common_pagination_item_count",...mx},Dx=20,Tx=()=>{var e;const{translate:t}=(0,p.Z)(),[n,a]=(0,r.useState)([]),[i,s]=(0,r.useState)(1),[l,d]=(0,r.useState)(null),{spaceDetails:_}=(0,be.fV)(),u=(0,c.k)(Rb.y,"ssoProvisioning"),m=u.data?.domainVerificationInfo,g=null!=(e=u.data?.enableSSO.ssoEnabled)&&e,h=u.data?.global.ssoIsNitroProvider&&!!u.data?.idpMetadata.metadataValue;(0,r.useEffect)((()=>{if(u.data?.domainVerificationInfo&&0===n.length){var e,t;const n=Object.keys(null!=(e=u.data?.domainVerificationInfo)?e:{});a(n.length?n.map((e=>({id:(0,ux.Z)(),domainName:e}))):[{id:(0,ux.Z)(),domainName:null!=(t=_?.associatedEmail.split("@")[1])?t:""}])}}),[n.length,u.data?.domainVerificationInfo]);const y=(0,r.useMemo)((()=>m?((e,t)=>new Map(e.toReversed().reduce(((e,{id:n,domainName:a})=>(t[a]&&e.push([a,n]),e)),[])))(n,m):new Map),[m,n]);if(u.status!==L.rq.Success)return null;const b=(i-1)*Dx;return(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px"},children:[(0,S.tZ)(o.X6,{as:"h3",color:"ds.text.neutral.standard",textStyle:"ds.title.section.medium",children:t(Zx.VERIFY_DOMAIN_TITLE)}),(0,S.BX)(re.T5p,{gap:"16px 10px",gridTemplateColumns:"100px 1fr 126px 40px",children:[(0,S.tZ)(re.dDn,{children:(0,S.tZ)(o.X6,{as:"h4",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:t(Zx.TABLE_HEADER_STATUS)})}),(0,S.tZ)(re.dDn,{gridColumnStart:2,gridColumnEnd:5,children:(0,S.tZ)(o.X6,{as:"h4",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:t(Zx.TABLE_HEADER_DOMAIN)})}),n.length>0?(0,S.BX)(S.HY,{children:[(0,S.tZ)(re.dDn,{gridColumnStart:1,gridColumnEnd:5,sx:{borderBottom:"1px solid ds.border.neutral.quiet.idle"}}),n.slice(b,b+Dx).map((({id:e,domainName:t})=>m?(0,S.tZ)(vx,{disabled:!h,domainName:t,domainVerificationInfo:m[t],id:e,onDeleteDomain:()=>(async e=>{const t=n.filter((({id:t})=>t!==e)),r=Math.ceil(t.length/Dx);i>r&&s(r),a(t)})(e),onModalOpen:()=>(async e=>{const{domainName:t}=n.find((({id:t})=>t===e));d(t)})(e),onUpdateDomain:t=>((e,t)=>{const i=n.map((n=>{const{id:a}=n;return a===e?{id:a,domainName:t}:n}));a(i)})(e,t),provisionedDomains:y,ssoActive:g},e):null))]}):null,(0,S.tZ)(re.dDn,{gridColumnStart:2,children:(0,S.tZ)(o.zx,{mood:"brand",intensity:"supershy",layout:"iconLeading",icon:Cx||(Cx=(0,S.tZ)(o.JO,{name:"ActionAddOutlined"})),size:"small",onClick:()=>{s(Math.ceil((n.length+1)/Dx)),a([...n,{id:(0,ux.Z)(),domainName:""}])},disabled:!h,children:t(Zx.BUTTON_ADD_LABEL)})}),n.length>Dx?(0,S.BX)(re.dDn,{gridColumnStart:1,gridColumnEnd:5,sx:{alignItems:"center",display:"grid",gridTemplateColumns:"1fr auto 1fr",padding:"24px"},children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:t(Zx.PAGINATION_ITEM_COUNT,{first:b+1,last:Math.min(b+Dx,n.length),total:n.length})}),(0,S.tZ)(re.tlE,{currentPage:i,onPageChange:s,totalPages:Math.ceil(n.length/Dx)},i)]}):null]}),Ex||(Ex=(0,S.tZ)(bx,{})),l&&m?.[l]?(0,S.tZ)(hx,{domainName:l,domainVerificationInfo:m[l],onClose:()=>{d(null)}}):null]})},kx=({title:e,paragraph:t,badge:n,children:a,onBackClicked:i,showBackButton:r=!0})=>{const s=(0,De.k6)(),l=null!=i?i:()=>{s.push(".")};return(0,S.BX)("div",{sx:{padding:"24px 0"},children:[(0,S.BX)("div",{sx:{padding:"0 32px"},children:[(0,S.BX)(o.kC,{gap:"8px",sx:{marginBottom:"16px"},alignItems:"center",children:[r,(0,S.tZ)(o.zx,{layout:"iconOnly",icon:"CaretLeftOutlined",intensity:"supershy",mood:"neutral",onClick:l}),(0,S.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",children:e}),n?(0,S.tZ)(o.Ct,{...n}):null]}),t?(0,S.tZ)(o.nv,{sx:{marginBottom:"32px"},children:t}):null]}),a]})};var Ix,Ax,wx,Nx,Ox;const Rx={CARD_1_HEADING:"Before you start",CARD_1_BODY_INTRO:"To set up SSO, you'll need:",CARD_1_BODY_POINTS:["Access to your IdP and public DNS provider accounts","A list of members to add to your SSO application","IdP metadata","Email domain"],CARD_1_SUB_HEADING:"Need help?",CARD_1_SUB_BODY:"For help setting up SSO, contact our Customer Support.",CARD_2_HEADING:"After turning on SSO",CARD_2_BODY_FIRST:"After SSO is turned on, non-admin members are required to log in with SSO.",CARD_2_BODY_SECOND:"They must use the browser extension when using Dashlane on a computer. They can also log in with SSO on mobile.",CARD_2_BODY_THIRD:"Admins can't log in with SSO. They still need to enter their Master Password."},Lx="support@dashlane.com",Mx=()=>{const{status:e,data:t}=(0,c.k)(Rb.y,"ssoProvisioning");if(e!==s.rq.Success)return null;const n=e===s.rq.Success?!t.enableSSO.ssoEnabled:null;return(0,S.tZ)("div",{children:(0,S.BX)(o.kC,{flexDirection:"column",gap:"32px",sx:{flexGrow:1},children:[n?(0,S.tZ)(Hb,{pageContext:Vb.Nitro}):null,(0,S.BX)(o.Zb,{sx:{padding:"32px"},children:[Ix||(Ix=(0,S.tZ)(Qb,{})),Ax||(Ax=(0,S.tZ)(lx,{}))]}),(0,S.tZ)(o.Zb,{sx:{padding:"32px"},children:wx||(wx=(0,S.tZ)(Tx,{}))}),(0,S.tZ)(o.Zb,{sx:{padding:"32px"},children:Nx||(Nx=(0,S.tZ)(_x,{}))})]})})},Bx=e=>(0,S.BX)("div",{sx:{border:"none",display:"flex",gap:"24px",flexDirection:"column"},...e,children:[(0,S.BX)(td,{children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:Rx.CARD_1_HEADING}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:Rx.CARD_1_BODY_INTRO}),(0,S.tZ)(o.nv,{as:"ul",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{margin:"0px 0px 8px 20px",listStyleType:"disc"},children:Rx.CARD_1_BODY_POINTS.map((e=>(0,S.tZ)("li",{children:e},e)))}),(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:Rx.CARD_1_SUB_HEADING}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:Rx.CARD_1_SUB_BODY}),(0,S.tZ)(ad,{href:`mailto:${Lx}`,sx:{fontSize:"14px"},children:Lx})]}),(0,S.BX)(td,{children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:Rx.CARD_2_HEADING}),(0,S.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:Rx.CARD_2_BODY_FIRST}),(0,S.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:Rx.CARD_2_BODY_SECOND}),(0,S.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.danger.standard",children:Rx.CARD_2_BODY_THIRD})]})]}),Px=({backRoute:e})=>{const{data:t}=(0,c.k)(Rb.y,"ssoProvisioning"),{translate:n}=(0,p.Z)(),a=!t?.enableSSO.ssoEnabled;return(0,S.tZ)(kx,{title:n("sso_confidential_page_title"),showBackButton:a,onBackClicked:()=>{Xb({ssoSetupStep:l.SsoSetupStep.ReturnToSsoSelection}),(0,i.uX)(e)},children:Ox||(Ox=(0,S.tZ)(Ba,{mainContent:(0,S.tZ)(Mx,{}),secondaryContent:(0,S.tZ)(Bx,{})}))})},Ux=()=>{const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(),i=(0,r.useCallback)((async()=>{try{return await he.C.getEncryptionServiceConfig()}catch{return{success:!1,error:{code:J_.S}}}}),[]),s=(0,r.useCallback)((async(e=new AbortController)=>{e.signal.aborted||t(!0);const n=await i();return e.signal.aborted||(n.success&&a(n.data),t(!1)),n}),[i]);return(0,r.useEffect)((()=>{const e=new AbortController;return s(e),()=>{e.abort()}}),[s]),{esConfigLoading:e,esConfig:n,refreshEncryptionServiceConfig:s}};var Xx=n(53123),zx=n(40010),qx=n(54661);const jx="esConfigurationLabel",Fx=({value:e,disabled:t,error:n,isLoading:a=!1,configRegenRequired:i,lastGeneratedTimeStamp:r})=>{const{translate:s}=(0,p.Z)(),l=r?(0,S.BX)(o.kC,{gap:"4px",sx:{mt:"8px"},justifyContent:"center",children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.strong",children:s("team_settings_encryption_service_generate_configuration_timestamp")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",children:(0,Rt.Z)(r).toLocaleString(navigator.language,{...Vt.qG.lll,timeZoneName:"short"})})]}):null;return(0,S.BX)(re.T5p,{gridTemplateAreas:"'label button' 'description button' 'timestamp timestamp' 'config buttons'",gridTemplateColumns:"3fr 1fr",sx:{gridColumnGap:"8px"},children:[(0,S.tZ)(re.dDn,{gridArea:"label",sx:{paddingBottom:"8px"},as:o.nv,innerAs:"label",id:jx,textStyle:"ds.title.block.medium",children:s("team_settings_encryption_service_generate_configuration_label")}),(0,S.tZ)(re.dDn,{gridArea:"description",as:o.nv,children:s("team_settings_encryption_service_generate_configuration_label_helper")}),(0,S.BX)(re.dDn,{gridArea:"button",children:[(0,S.tZ)(o.zx,{disabled:t||a,mood:e&&!i?"neutral":"brand",intensity:e&&!i?"quiet":"catchy",fullsize:!0,type:"submit",isLoading:a,children:s("team_settings_encryption_service_generate_configuration_button")}),i?null:l]}),e?(0,S.BX)(S.HY,{children:[(0,S.tZ)(re.dDn,{gridArea:"config",sx:{marginTop:"18px"},children:(0,S.tZ)(o.Kx,{"aria-labelledby":jx,readOnly:!0,disabled:i,value:e,feedback:n?{text:n}:void 0,error:!!n})}),(0,S.BX)(re.dDn,{as:o.kC,gridArea:"buttons",sx:{marginTop:"18px"},flexDirection:"column",gap:"8px",children:[(0,S.tZ)(au.q,{disabled:i,copyValue:e,buttonText:s("input_copy_button"),fullsize:!0}),(0,S.tZ)(qx.o,{disabled:i,buttonText:s("team_settings_encryption_service_config_download_button"),downloadString:e,fileName:"dashlane-encryption-service-config.txt",fileType:"text/plain",fullsize:!0})]})]}):null]})};function Gx(e){const t=(0,r.useMemo)((()=>e),[e]),[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(),o=(0,r.useCallback)((async()=>{const e={success:!1,error:{code:J_.S}};try{return t?await he.C.getTeamDevice({teamDeviceAccessKey:t}):e}catch{return e}}),[t]),l=(0,r.useCallback)((async(e=new AbortController)=>{e.signal.aborted||a(!0);const t=await o();return e.signal.aborted||(t.success&&s(t.data.teamDevice),a(!1)),t}),[o]);return(0,r.useEffect)((()=>{const e=new AbortController;return l(e),()=>{e.abort()}}),[l]),{teamDeviceLoading:n,teamDevice:i,refreshTeamDevice:l}}const Vx={AWS:"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGN0C8B9HMKRD8J0BSYRAH","Microsoft Azure":"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGMVBAEK5GB0TZJ86K7ZWE"},Hx=({context:e="GENERIC",...t})=>{var n,a;const{esConfig:i,esConfigLoading:s}=Ux(),{teamDevice:l,teamDeviceLoading:c}=Gx(i?.deviceAccessKey),[d,_]=(0,r.useState)(!1),{translate:u}=(0,p.Z)(),m={CONTENT:u.markup("team_settings_encryption_service_restart_failed_info_content_markup",{helpArticle:null!=(n=Vx[null!=(a=i?.deploymentLocation)?a:""])?n:"",supportLink:"https://support.dashlane.com/hc/requests/new?utm_source=extension"},{linkTarget:"_blank"})},g={GENERIC:{TITLE:u("team_settings_encryption_service_restart_failed_info_title"),...m},SCIM:{TITLE:u("team_settings_encryption_service_restart_failed_info_title_scim"),...m},ES:{TITLE:u("team_settings_encryption_service_restart_failed_info_title_es"),...m},SSO:{TITLE:u("team_settings_encryption_service_restart_failed_info_title_sso"),...m}};return(0,r.useEffect)((()=>{if(!c&&!s&&l&&i){const t=!l.hasLatestConfig&&"GENERIC"===e||"GENERIC"!==e;_(t)}}),[l,i,c,s,e]),d?(0,S.tZ)(o.ke,{mood:"warning",size:"large",title:g[e].TITLE,description:g[e].CONTENT,actions:g[e].BUTTON?[(0,S.tZ)(o.zx,{mood:"brand",intensity:"catchy",onClick:()=>{_(!1)},children:g[e].BUTTON},"primary")]:void 0,...t}):null};var Wx,$x,Kx,Yx,Qx,Jx=n(10121);const eS="team_settings_encryption_service_enter_endpoint_placeholder_aws_linux",tS="_common_generic_error",nS="https://",aS={AWS:"https://eu-west-1.console.aws.amazon.com/acm/home?region=eu-west-1#/welcome","Microsoft Azure":"https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fget.dashlane.com%2Fazure%2Farm%2Fes%2Fazuredeploy.json"},iS={AWS:"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGN0C8B9HMKRD8J0BSYRAH","Microsoft Azure":"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGMVBAEK5GB0TZJ86K7ZWE"},rS={AWS:"team_settings_encryption_service_go_to_label_helper_aws_markup","Microsoft Azure":"team_settings_encryption_service_go_to_label_helper_azure_markup"},sS={AWS:"team_settings_encryption_service_enter_endpoint_helper_aws_linux","Microsoft Azure":"team_settings_encryption_service_enter_endpoint_helper_azure"},oS={"Microsoft Azure":"team_settings_encryption_service_enter_endpoint_placeholder_azure",AWS:eS},lS="config",cS="deploymentLocation",dS="encryptionServiceEndpoint",_S="ssoConnectorKey",uS="-sso.azurewebsites.net",mS=({migratingFromSSOConnector:e=!1,esConfig:t,onSave:n,teamSettings:a,updateTeamSettings:s,isSettingupScim:c})=>{var d,_,u;const[m,g]=(0,r.useState)(!1),[h,y]=(0,r.useState)(""),[b,x]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),{translate:C}=(0,p.Z)(),{spaceDetails:E}=(0,be.fV)(),Z=null!=(d=E?.associatedEmail)?d:"",D=(0,i.k6)(),T=a?.ssoServiceProviderUrl,k={encryptionServiceEndpoint:(null!=T?T:"").replace(nS,""),config:null!=(_=t?.config)?_:"",deploymentLocation:null!=(u=t?.deploymentLocation)?u:"",ssoConnectorKey:""},I=()=>D.goBack(),A=e=>e?null:C("team_settings_encryption_service_error_select_service"),w=e=>{const t=C("team_settings_encryption_service_error_invalid_ssoConnectorKey");try{const[t,n]=e.split("|"),a=atob(n);if(!t||!n||!a||36!==t.length||64!==a.length)throw new Error("Invalid key format")}catch{return t}return null},N=e=>{const t=C("team_settings_encryption_service_error_invalid_endpoint");if(!e)return t;let n;try{n=new URL(`${nS}${e}`)}catch(e){return t}return"/"!==n.pathname||""!==n.search||""!==n.hash||n.href.includes("?")?t:null};return(0,S.tZ)(On.J9,{onSubmit:async(t,{setFieldValue:a,setFieldTouched:i})=>{y(""),g(!0),v(!1);const{deploymentLocation:r,encryptionServiceEndpoint:o,ssoConnectorKey:d}=t;if(!r)return void i(cS);if(e&&!d)return void i(_S);a(lS,"");const _=e=>e.replace(/\/$/,"").toLowerCase();try{const i={deploymentLocation:r,encryptionServiceEndpoint:nS+_(o),updateTeamDeviceConfigParams:{}};e&&d&&(i.updateTeamDeviceConfigParams.ssoConnectorKey=d);const u=await he.C.generateAndSaveEncryptionServiceConfig(i);if(!u.success)return void y(C(tS));const m=u.data.basicConfig;if(a(lS,m.config),t[dS]!==k.encryptionServiceEndpoint){let e={ssoServiceProviderUrl:t[dS]?`${nS}`+_(`${t[dS]}`):null,ssoSolution:Lb.WO.enum.selfHostedSaml};e=c?{...e,provisioningSolution:Jx.Hh.enum.selfHostedScim}:e,await s(e)}if(g(!1),u.data.encryptionServiceReloadingStatus!==Xx.x.OK)return v(!0),x(!1),void n?.();Ub({ssoSetupStep:l.SsoSetupStep.GenerateAndSaveConfiguration}),h||n?.()}catch(e){g(!1),y(C(tS))}},initialValues:k,onReset:I,children:n=>{var a,i;return(0,S.BX)(On.l0,{autoComplete:"off",children:[(0,S.tZ)(zx.X,{dirty:n.dirty&&!m&&!f}),(0,S.BX)(re.Zbd,{children:[(0,S.tZ)(re.Ol2,{children:C("team_settings_encryption_service_header")}),(0,S.BX)(re.aYP,{children:[e?(0,S.BX)(S.HY,{children:[(0,S.BX)(re.T5p,{gridTemplateAreas:"'header header' 'description description' 'input button'",gridTemplateColumns:"1fr auto",gap:"10px",children:[(0,S.tZ)(re.dDn,{gridArea:"header",children:(0,S.tZ)(o.nv,{as:"h3",textStyle:"ds.title.block.medium",children:C("team_settings_encryption_service_migrate_sso_title")})}),(0,S.tZ)(re.dDn,{gridArea:"description",children:(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:C.markup("team_settings_encryption_service_migrate_sso_description_markup")})}),(0,S.tZ)(re.dDn,{gridArea:"input",children:(0,S.tZ)(On.gN,{name:_S,validate:w,children:({field:{onChange:e,...t},meta:{error:a,touched:i}})=>(0,S.tZ)(re.oil,{onChange:t=>{e(t)},id:"ssoConnectorKey",placeholder:C("team_settings_encryption_service_sso_connector_key_placeholder"),fullWidth:!0,feedbackText:i&&a?a:void 0,feedbackType:i&&a?"error":void 0,"aria-invalid":i&&!!a,readOnly:n.isSubmitting,...t})})})]}),Wx||(Wx=(0,S.tZ)("hr",{}))]}):null,(0,S.BX)(re.T5p,{gridTemplateAreas:"'label select' 'desc select'",gap:"8px",children:[(0,S.tZ)(re.dDn,{gridArea:"label",as:o.nv,innerAs:"label",htmlFor:"deploymentLocation",sx:{gridArea:"label"},textStyle:"ds.title.block.medium",children:C("team_settings_encryption_service_deploy_label")}),(0,S.tZ)(re.dDn,{gridArea:"desc",as:o.nv,children:C.markup("team_settings_encryption_service_deploy_label_helper_markup",{customerSupport:"https://support.dashlane.com/hc/requests/new?utm_source=extension"},{linkTarget:"_blank"})}),(0,S.tZ)(re.dDn,{gridArea:"select",children:(0,S.tZ)(On.gN,{name:cS,validate:A,children:({field:{onChange:e,...t},meta:{error:a,touched:i}})=>(0,S.tZ)(re.PhF,{onChange:t=>{n.setFieldValue(dS,((e,t)=>{if(!e||!t)return"";const n=e.replace(/.+@/,"");if("Microsoft Azure"===t){const[e,t,...a]=n.split(".").reverse(),i=t+uS;return i.length<=42?i:t.slice(0,42-uS.length)+uS}return"AWS"===t?"dashlane-sso."+n:""})(Z,t.target.value)),x(k.deploymentLocation!==t.target.value),Ub({ssoSetupStep:l.SsoSetupStep.SelectEncryptionServicePlatform,encryptionServicePlatformSelected:"AWS"===t.target.value?l.EncryptionServicePlatformSelected.AmazonWebServices:l.EncryptionServicePlatformSelected.Azure}),e(t)},feedbackId:"deploymentLocationFeedback",selectId:"deploymentLocation",options:Object.keys(sS),placeholder:C("team_settings_encryption_service_select_host"),intent:i&&a?"error":void 0,feedbackText:i&&a?a:void 0,readOnly:n.isSubmitting,...t})})})]}),$x||($x=(0,S.tZ)("hr",{})),(0,S.BX)(re.T5p,{gridTemplateColumns:"auto",gap:"8px",children:[(0,S.tZ)(re.dDn,{as:o.nv,innerAs:"label",htmlFor:"endpointInput",textStyle:"ds.title.block.medium",children:C("team_settings_encryption_service_enter_endpoint_label")}),(0,S.tZ)(re.dDn,{as:o.nv,sx:{mb:"16px"},children:C(null!=(a=sS[n.values[cS]])?a:"team_settings_encryption_service_enter_endpoint_label_helper_no_selection")}),e?(0,S.BX)(o.nv,{children:[C("team_settings_encryption_service_current_endpoint_label")," ",T]}):null,(0,S.tZ)(On.gN,{name:dS,validate:N,children:({field:{onChange:e,...t},meta:{error:a,touched:i},form:{values:{deploymentLocation:r}}})=>{var s;return(0,S.tZ)(re.oil,{sx:{pl:0},onChange:t=>{x(k.encryptionServiceEndpoint!==t.target.value),e(t)},startAdornment:Kx||(Kx=(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:nS})),id:"endpointInput",placeholder:C(null!=(s=oS[r])?s:eS),fullWidth:!0,feedbackText:i&&a?a:void 0,feedbackType:i&&a?"error":void 0,"aria-invalid":i&&!!a,readOnly:n.isSubmitting,...t})}})]}),Yx||(Yx=(0,S.tZ)("hr",{})),f?(0,S.tZ)(Hx,{sx:{marginBottom:"20px"},context:"ES"}):null,(0,S.tZ)(On.gN,{name:lS,children:({field:a,meta:i,form:{values:{deploymentLocation:r,ssoConnectorKey:s}}})=>{var o;return(0,S.tZ)(Fx,{configRegenRequired:b,disabled:!r||e&&!s,lastGeneratedTimeStamp:t?.lastGeneratedTimeStamp,value:a.value,error:(null!=(o=i.error)?o:!n.isSubmitting&&b)?C("team_settings_encryption_service_config_regen_warning"):void 0,isLoading:m||n.isSubmitting})}}),Qx||(Qx=(0,S.tZ)("hr",{})),(0,S.BX)(re.T5p,{gridTemplateAreas:"'header button' 'description button'",gap:"8px",children:[(0,S.tZ)(re.dDn,{gridArea:"header",as:o.nv,textStyle:"ds.title.block.medium",children:C("team_settings_encryption_service_go_to_label")}),(0,S.tZ)(re.dDn,{gridArea:"description",as:o.nv,sx:{mb:"16px"},children:(i=n.values.deploymentLocation,i||(i="AWS"),C.markup(rS[i],{setupGuide:iS[i]},{linkTarget:"_blank"}))}),(0,S.tZ)(re.dDn,{gridArea:"button",as:o.zx,type:"button",mood:n.values.config&&!b?"brand":"neutral",disabled:!n.values[cS]||!n.values[lS]||b,onClick:()=>{Ub({ssoSetupStep:l.SsoSetupStep.AddConfigurationToServiceHost}),(0,P.Yo)(aS[n.values[cS]])},icon:"ActionOpenExternalLinkOutlined",layout:"iconTrailing",sx:{gridArea:"button",height:"fit-content"},children:C("team_settings_encryption_service_go_to_button")})]})]}),(0,S.BX)(re.eWM,{flexWrap:"nowrap",children:[h?(0,S.tZ)(o.nv,{sx:{width:"40%",ml:0,mr:"auto"},textStyle:"ds.title.supporting.small",color:"ds.text.danger.standard",children:h}):null,(0,S.tZ)(o.zx,{mood:"neutral",intensity:"quiet",size:"large",type:"button",onClick:()=>I(),children:C("team_settings_encryption_service_button_cancel")})]})]})]})}})};var pS,gS=n(91684);const hS="team_settings_encryption_service_not_available",yS=({config:e})=>{var t;const{translate:n}=(0,p.Z)(),{teamDevice:a,refreshTeamDevice:i,teamDeviceLoading:r}=Gx(e.deviceAccessKey),s=n.markup("team_settings_encryption_service_tooltip_text_markup",{updateServiceUrl:"https://support.dashlane.com/hc/articles/360015973719"},{linkTarget:"_blank"},{color:"ds.text.inverse.catchy",hoverColor:"ds.text.brand.quiet",activeColor:"ds.text.brand.standard"});return(0,S.tZ)(gS.R,{children:r?pS||(pS=(0,S.tZ)(o.ZX,{})):(0,S.BX)(o.kC,{flexDirection:"column",gap:"5px",children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`${n("team_settings_encryption_service_last_restart")}\n                    ${a?.lastStartDateUnix?(0,Rt.Z)(a.lastStartDateUnix).toLocaleString(navigator.language,{...Vt.qG.lll,timeZoneName:"short"}):n(hS)}`}),(0,S.BX)(o.kC,{gap:"8px",children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`\n                   ${n("team_settings_encryption_service_version")}\n                   ${null!=(t=a?.version)?t:n(hS)}\n                  `}),!1===a?.hasLatestVersion?(0,S.tZ)(o.u,{wrapTrigger:!0,content:s,children:(0,S.tZ)(o.Ct,{mood:"danger",iconName:"FeedbackWarningOutlined",layout:"iconLeading",label:n("team_settings_encryption_service_new_version")})}):null]}),(0,S.BX)(o.nv,{as:"a",color:"ds.text.brand.standard",sx:{textDecoration:"none",fontWeight:"normal"},onClick:()=>i(),textStyle:"ds.body.reduced.regular",children:[(0,S.tZ)(o.JO,{sx:{display:"inline",marginRight:"5px"},name:"ActionRefreshOutlined",size:"xsmall",color:"ds.text.brand.standard"}),n("team_settings_encryption_service_refresh")]})]})})};var bS;const xS=({esConfig:e,loading:t,parentPath:n,disableSetupButton:a})=>{const{translate:r}=(0,p.Z)(),s=(0,i.k6)(),c=!e&&!t;return(0,S.tZ)(o.Zb,{children:(0,S.BX)(re.T5p,{gridTemplateAreas:"'header button' 'description button' 'status .'",gridTemplateColumns:"1fr auto",gap:"8px",children:[(0,S.BX)(re.dDn,{gridArea:"header",children:[e?null:(0,S.tZ)(o.X6,{as:"h3",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:r("team_settings_encryption_service_get_started")}),(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.section.medium",children:r("team_settings_encryption_service_header")})]}),(0,S.BX)(re.dDn,{gridArea:"description",children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:r("team_settings_encryption_service_description")}),bS||(bS=(0,S.tZ)("br",{})),(0,S.tZ)(o.nv,{as:"a",textStyle:"ds.title.block.small",href:"https://support.dashlane.com/hc/articles/360013149040#why-encryption",color:"ds.text.brand.standard",rel:"noopener noreferrer",target:"_blank",children:r("team_settings_encryption_service_more_info_link")})]}),(0,S.tZ)(re.dDn,{id:"esSetupButton",as:o.zx,disabled:t||a,mood:c?"brand":"neutral",intensity:c?"catchy":"quiet",gridArea:"button",type:"button",alignSelf:"center",size:"large",onClick:()=>{Ub({ssoSetupStep:l.SsoSetupStep.SetUpEncryptionServiceSettings}),s.push(`${n}/encryption-service-settings`)},isLoading:t,children:r(e?"team_settings_button_edit_label":"team_settings_encryption_service_set_up")}),e?(0,S.tZ)(re.dDn,{gridArea:"status",sx:{mt:"20px"},children:(0,S.tZ)(yS,{config:e})}):null]})})};var SS=n(79869),fS=n(47418);const vS=({actions:e,endIcon:t,fieldName:n,feedbackType:a,feedbackText:i,handleAdd:r,...s})=>{const[{value:{name:o},onBlur:l,...c},{error:d},{setValue:_}]=(0,On.U$)(n),u=o?null!=i?i:d:void 0,m=(null!=a?a:u)?"error":void 0;return(0,S.tZ)(fS.h,{textInputProps:{id:n,endAdornment:t,feedbackText:u,feedbackType:m,fullWidth:!0,value:o,...c,...s,onChange:({currentTarget:{value:e}})=>{_({name:e})},onKeyPress:e=>{"Enter"===e.key&&(r(),e.preventDefault(),e.stopPropagation())},onBlur:e=>{e.currentTarget.value&&!e.currentTarget.readOnly&&r(),l?.(e)}},tooltipProps:{passThrough:!0},replacementActions:e})};var CS,ES,ZS,DS;const{accessibleValidatorGreen:TS,orange00:kS,dashGreen02:IS}=re.colors,AS="team_settings_domain_register_invalid_error",wS=({fieldArrayName:e,domainLoadError:t,refreshDomains:n})=>{const{translate:a}=(0,p.Z)(),{values:i}=(0,On.u6)(),[s,l]=(0,r.useState)({}),[c,d]=(0,r.useState)({}),[_,u]=(0,r.useState)(""),[m,g]=(0,r.useState)(null),h=(e,t)=>{l((n=>({...n,[e]:t})))},y=async t=>{await(async t=>{const n=t.trim();if(!ld().isFQDN(n))throw new Error(a(AS));if(i[e].reduce(((e,t)=>t.name===n?e+1:e),0)>1)throw new Error(a("team_settings_domain_register_duplicated_error"));(e=>{d((t=>({...t,[e]:!0})))})(t);const r=await he.C.registerTeamDomain({domain:n});var s;if((e=>{d((({[e]:t,...n})=>n))})(t),!r.success)throw new Error(a(null!=(s={INVALID_PUBLIC_DOMAIN:"team_settings_domain_register_public_error",DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS:"team_settings_domain_register_contact_support"}[r.error.code])?s:AS))})(t.name),await n()};return t?(0,S.tZ)(o.kC,{fullWidth:!0,justifyContent:"center",children:(0,S.tZ)(re.j49,{color:"errors.4",children:t})}):(0,S.BX)(S.HY,{children:[(0,S.tZ)(re.nvN,{as:"label",htmlFor:`${e}.${i[e].length-1}`,bold:!0,sx:{display:"inline-block",mb:"8px"},children:a("team_settings_domain_title")}),(0,S.tZ)(re.nvN,{size:"small",sx:{mb:"24px"},children:a("team_settings_es_sso_setup_domain_description")}),(0,S.tZ)(On.F2,{name:e,children:e=>(0,S.tZ)(re.T5p,{justifyContent:"stretch",gridTemplateColumns:"auto",gap:"8px",gridAutoRows:"auto",children:i[e.name].map(((t,n)=>{var r,l;const d=c[t.name],_=t.status===fl.p.valid,m=t.status===fl.p.pending||t.status===fl.p.invalid||t.status===fl.p.expired,p=d?CS||(CS=(0,S.tZ)(o.ZX,{size:"medium"})):_?ES||(ES=(0,S.tZ)(re.rE2,{color:TS})):m?(0,S.tZ)(re.enX,{color:t.status===fl.p.pending?IS:kS}):void 0;return(0,S.tZ)(S.HY,{children:(0,S.tZ)(vS,{placeholder:a("team_settings_es_sso_domain_url_placeholder"),fieldName:`${e.name}.${n}`,readOnly:null!=(l=!!t.status)?l:d,autoFocus:n===i[e.name].length-1,endIcon:p,feedbackType:!t.status&&s[t.name]?"error":void 0,feedbackText:t.status?void 0:s[t.name],handleAdd:async()=>{try{await y(t),u(t.name)}catch(e){h(t.name,e.message)}},actions:(0,S.BX)(S.HY,{children:[t.status===fl.p.pending||void 0===t.status?(0,S.tZ)(re.zxk,{nature:"secondary",type:"button",disabled:d,onClick:()=>(async e=>{try{void 0===e.status&&await y(e),u(e.name)}catch(t){h(e.name,t.message)}})(t),children:a(void 0===t.status?"team_settings_es_sso_setup_add_domain":"team_settings_es_sso_setup_verify_button")}):null,t.name.length&&void 0!==t.status?(0,S.tZ)(SS.h,{nature:"secondary",type:"button",disabled:d,onClick:()=>g(t),icon:ZS||(ZS=(0,S.tZ)(re.XHJ,{}))}):null]})})},`${e.name}.${null!=(r=t.id)?r:n}`)}))})}),DS||(DS=(0,S.tZ)(bx,{})),_?(0,S.tZ)(Pd,{domainName:_,onSuccess:async()=>{u(""),await n()},onDismiss:()=>u("")}):null,m?(0,S.tZ)(pd,{domain:m,onDismiss:()=>g(null),onConfirm:async()=>{await(async e=>{if(!e)return;const t=await he.C.deactivateTeamDomain({domain:e});return t.success?void 0:t.error.code})(m.name),await n()}}):null]})};var NS;const OS=({inputValue:e,labelText:t,disabled:n,loading:a,id:i})=>(0,S.tZ)(Rd.x,{inputValue:e,textInputProps:{fullWidth:!0,readOnly:!0,disabled:n,id:i,startAdornment:a?NS||(NS=(0,S.tZ)(o.ZX,{})):void 0,label:(0,S.tZ)(re.nvN,{as:"label",bold:!0,sx:{mb:"4px"},htmlFor:i,children:t})},iconButtonProps:{disabled:n}}),RS=e=>{const t=(0,r.useMemo)((()=>{var t,n;return{draft:null!=(t=e?.draft)&&t,deviceAccessKey:null!=(n=e?.deviceAccessKey)?n:""}}),[e?.draft,e?.deviceAccessKey]),[n,a]=(0,r.useState)(!0),[i,s]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),c=(0,r.useCallback)((async()=>{try{return await he.C.getTeamDeviceEncryptedConfig(t)}catch{return{success:!1,error:{code:J_.S}}}}),[t]),d=(0,r.useCallback)((async(e=new AbortController)=>{e.signal.aborted||a(!0);const t=await c();return e.signal.aborted||(s(t.success?null:t.error.code),t.success&&l(t.data),a(!1)),t}),[c]),_=(0,r.useCallback)((async e=>{a(!0);try{return await he.C.updateTeamDeviceEncryptedConfig(e)}catch{return{success:!1,error:{code:J_.S}}}finally{a(!1)}}),[]);return(0,r.useEffect)((()=>{const e=new AbortController;return d(e),()=>{e.abort()}}),[d]),{teamDeviceConfigLoading:n,loadTeamDeviceConfigErrorCode:i,teamDeviceConfig:o,updateTeamDeviceConfig:_,refreshTeamDeviceConfig:d}};var LS,MS,BS,PS;const{grey00:US}=re.colors,XS="team_settings_es_sso_setup_header",zS="team_settings_domain_fetch_error",qS={GENERIC_ERROR:"_common_generic_error"},jS=e=>e?`${e}/saml/callback`:"",FS="ssoIdpMetadata",GS=()=>{var e;const{translate:t}=(0,p.Z)(),{teamId:n}=(0,be.fV)(),{updateTeamDeviceConfig:a}=RS(),[s,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)([]),m=(0,r.useRef)(null),[g,h]=(0,r.useState)(!1),[y,b]=(0,r.useState)(""),{teamSettings:x={},teamSettingsLoading:f}=ye(n),{ssoIdpMetadata:v,ssoServiceProviderUrl:C=""}=x,E=(0,i.k6)(),Z=(0,r.useCallback)((async()=>{try{b("");const e=await he.C.getTeamDomains();if(e.success){const t=e.domains.length?e.domains:[];u([...t,{name:"",id:0}])}else b(t(zS))}catch(n){var e;b(null!=(e=n.message)?e:t(zS))}}),[t]);(0,r.useEffect)((()=>{h(!0),Z().then((()=>h(!1)))}),[Z]);const D={domains:_,ssoIdpMetadata:null!=(e=null!=v?v:m.current?.value)?e:""},T=()=>E.goBack();return f||g?(0,S.BX)(re.Zbd,{children:[(0,S.tZ)(re.Ol2,{children:t(XS)}),LS||(LS=(0,S.tZ)(re.aYP,{children:(0,S.tZ)(o.kC,{fullWidth:!0,justifyContent:"center",children:(0,S.tZ)(o.ZX,{size:60})})}))]}):(0,S.tZ)(On.J9,{onSubmit:async(e,n)=>{try{var i;l(!0),d(!1);const r=await a({ssoEnabled:!0,[FS]:e[FS],connectorEndpoint:C||void 0,teamDeviceUrl:null!=(i=x.ssoServiceProviderUrl)?i:void 0});if(!r.success){const e=r.error.code.toUpperCase();if("DEACTIVATED_TEAM_DEVICE"===e)return;const a=t(qS[e]?qS[e]:qS.GENERIC_ERROR);return void n.setFieldError(FS,a)}if(r.data.encryptionServiceReloadingStatus!==Xx.x.OK)return void d(!0);T()}catch(e){n.setFieldError(FS,t(qS.GENERIC_ERROR)),l(!1)}},initialValues:D,enableReinitialize:!0,children:({isSubmitting:e,dirty:n})=>{return(0,S.BX)(On.l0,{autoComplete:"off",noValidate:!0,children:[(0,S.tZ)(zx.X,{dirty:n&&!s&&!c}),(0,S.BX)(re.Zbd,{children:[(0,S.tZ)(re.Ol2,{children:t(XS)}),(0,S.BX)(re.aYP,{children:[(0,S.tZ)(wS,{fieldArrayName:"domains",domainLoadError:y,refreshDomains:Z}),MS||(MS=(0,S.tZ)("hr",{})),(0,S.tZ)(o.ke,{title:t.markup("team_settings_es_sso_setup_copy_info_to_idp_markup"),sx:{mb:"32px"}}),(0,S.BX)(re.T5p,{justifyContent:"stretch",gridTemplateColumns:"auto",gap:"32px",gridAutoRows:"auto",children:[(0,S.tZ)(OS,{id:"entity-id-input",inputValue:(a=C,a?`${a}/saml/`:""),labelText:t("team_settings_es_sso_entity_id_label"),disabled:f||!C,loading:f}),(0,S.tZ)(OS,{id:"acs-url-input",inputValue:jS(C),labelText:t("team_settings_es_sso_acs_url_label"),disabled:f||!C,loading:f})]}),BS||(BS=(0,S.tZ)("hr",{})),(0,S.tZ)(re.nvN,{as:"label",bold:!0,htmlFor:"sso-metadata-input",children:t("team_settings_es_sso_metadata_label")}),(0,S.tZ)(re.nvN,{size:"small",color:US,sx:{mt:"8px",mb:"24px"},children:t("team_settings_es_sso_metadata_description")}),(0,S.tZ)(On.gN,{name:FS,children:({field:e,meta:{error:t,touched:n}})=>(0,S.tZ)(re.oil,{id:"sso-metadata-input",sx:{height:"10em",resize:"vertical"},...e,ref:m,multiline:!0,fullWidth:!0,feedbackText:n&&t?t:void 0,feedbackType:n&&t?"error":void 0})})]}),(0,S.BX)(re.eWM,{children:[c?(0,S.tZ)(o.kC,{sx:{flexGrow:1,justifyContent:"center"},children:PS||(PS=(0,S.tZ)(Hx,{context:"SSO"}))}):null,(0,S.tZ)(re.zxk,{disabled:e,nature:"secondary",size:"large",type:"button",onClick:T,children:t("team_settings_es_sso_setup_cancel")}),(0,S.tZ)(re.zxk,{disabled:e,nature:"primary",type:"submit",size:"large",children:t("team_settings_es_sso_setup_save")})]})]})]});var a}})};var VS=n(73670);const{grey00:HS}=re.colors,WS="team_settings_enable_sso_test_button",$S=({actionsDisabled:e,ssoServiceProviderUrl:t})=>{const{translate:n}=(0,p.Z)(),a=t?`${t}/saml/login?redirect=test_idp`:"";return(0,S.BX)(re.T5p,{gap:"8px",gridTemplateAreas:"'header buttons' 'description buttons' ",gridTemplateColumns:"1fr auto",children:[(0,S.tZ)(re.dDn,{as:re.nvN,innerAs:"h3",size:"large",bold:!0,gridArea:"header",children:n("team_settings_enable_sso_test_title")}),(0,S.tZ)(re.dDn,{gridArea:"description",as:re.nvN,size:"small",color:HS,children:n("team_settings_enable_sso_test_description")}),(0,S.BX)(re.T5p,{gap:"8px",gridTemplateAreas:"'test copy'",as:re.dDn,gridArea:"buttons",children:[(0,S.tZ)(re.dDn,{gridArea:"test",children:(0,S.BX)(VS.M,{onClick:()=>{(0,P.Yo)(a)},size:"medium","aria-label":n(WS),disabled:null!=e?e:!a,content:n("team_settings_es_sso_setup_incomplete"),children:[n(WS),(0,S.tZ)(re.RTC,{sx:{ml:"4px"},color:"white"})]})}),(0,S.tZ)(re.dDn,{gridArea:"copy",children:(0,S.tZ)(au.q,{buttonText:n("team_settings_copy_sso_url_button"),disabled:null!=e?e:!a,copyValue:null!=a?a:""})})]})]})},KS=({closeDialog:e})=>{const{translate:t}=(0,p.Z)();return(0,S.tZ)(Ya.o,{isOpen:!0,onRequestClose:()=>e(Sd.dismiss),footer:(0,S.tZ)(re.cNS,{primaryButtonTitle:t("team_settings_enable_sso_dialog_disable_action"),primaryButtonOnClick:()=>e(Sd.action),secondaryButtonTitle:t("team_settings_enable_sso_cancel"),secondaryButtonOnClick:()=>e(Sd.dismiss),intent:"danger"}),title:t("team_settings_enable_sso_dialog_disable_title"),children:t("team_settings_enable_sso_dialog_disable_description")})};var YS;const{grey00:QS}=re.colors,JS=({actionsDisabled:e,ssoEnabled:t,updateTeamSettings:n,loading:a})=>{const{translate:i}=(0,p.Z)(),[s,c]=(0,r.useState)(!1),[d,_]=(0,r.useState)(!1),u=(0,Rn.V)(),{teamId:m}=(0,be.fV)(),g=()=>{u.showAlert(t?i("_common_generic_error"):i.markup("team_settings_enable_sso_action_toggle_warning_markup",void 0,{linkTarget:"_blank"}),re.BLW.ERROR)};return(0,S.BX)(S.HY,{children:[(0,S.BX)(re.T5p,{gap:"8px",gridTemplateAreas:"'header buttons' 'description toggle' ",gridTemplateColumns:"1fr auto",children:[(0,S.tZ)(re.dDn,{as:re.nvN,innerAs:"h3",size:"large",bold:!0,gridArea:"header",children:i("team_settings_enable_sso_action_title")}),(0,S.BX)(re.dDn,{gridArea:"description",as:re.nvN,size:"small",color:QS,children:[i("team_settings_enable_sso_action_description"),YS||(YS=(0,S.tZ)("br",{})),i("team_settings_enable_sso_action_description_note")]}),(0,S.tZ)(re.dDn,{gridArea:"toggle",children:(0,S.tZ)(o.ZD,{disabled:e||a,checked:t,onChange:async()=>{t?c(!0):(_(!0),Ub({ssoSetupStep:l.SsoSetupStep.TurnOnSso}))}})})]}),s?(0,S.tZ)(KS,{closeDialog:async e=>{if(c(!1),e!==Sd.dismiss&&m)try{const e=!t;await n({ssoEnabled:e})}catch(e){g()}}}):null,d?(0,S.tZ)(dx,{title:i("team_settings_enable_sso_confirm_dialog_title"),body:i("team_settings_enable_sso_confirm_dialog_body"),primaryActionLabel:i("team_settings_enable_sso_confirm_dialog_primary_action_label"),onCancel:()=>{_(!1)},onConfirm:async()=>{await(async()=>{if(m)try{await n({ssoEnabled:!0}),Ub({ssoSetupStep:l.SsoSetupStep.CompleteSsoSetup})}catch(e){g()}})(),_(!1)}}):null]})};var ef;const{grey00:tf}=re.colors;var nf=function(e){return e.UNKNOWN="UNKNOWN",e.LOADING="LOADING",e.COMPLETE="COMPLETE",e.INCOMPLETE="INCOMPLETE",e.NOT_STARTED="NOT_STARTED",e.UNAVAILABLE="UNAVAILABLE",e.ERROR="ERROR",e}(nf||{});const af=({disableSetupButton:e,isSsoCapable:t})=>{const{translate:n}=(0,p.Z)(),{teamId:a}=(0,be.fV)(),{teamSettings:s={},updateTeamSettings:l,teamSettingsLoading:d}=ye(a),{ssoEnabled:_=!1,ssoServiceProviderUrl:u="",ssoIdpMetadata:m}=s,[g,h]=(0,r.useState)(nf.UNKNOWN),y=(0,c.k)(Rb.y,"ssoProvisioning");(0,r.useEffect)((()=>{h(nf.LOADING),he.C.getTeamDomains().then((e=>{if(!e.success)return void h(nf.ERROR);const t=y.data?.ssoSolution===Lb.WO.enum.confidentialSaml;if(!u||t)return void h(nf.UNAVAILABLE);const n=e.domains.some((({status:e})=>"valid"===e)),a=e.domains.length>0,i=!!m;switch(!0){case n&&i:h(nf.COMPLETE);break;case!a&&i||a&&!i||!n&&a&&i:h(nf.INCOMPLETE);break;case!a&&!i:h(nf.NOT_STARTED)}}))}),[y.data,m,u]);const b=g===nf.UNAVAILABLE||d||e,{path:x}=(0,i.$B)(),f=(0,i.k6)(),v=[nf.COMPLETE,nf.INCOMPLETE].includes(g);return(0,S.BX)(o.Zb,{children:[(0,S.BX)(re.T5p,{gridTemplateAreas:"'header button' 'description button'",gridTemplateColumns:"1fr auto",gap:"8px",children:[(0,S.tZ)(re.dDn,{as:re.nvN,innerAs:"h3",size:"large",bold:!0,gridArea:"header",children:n("team_settings_es_sso_setup_header")}),(0,S.tZ)(re.dDn,{gridArea:"description",as:re.nvN,size:"small",color:tf,children:n("team_settings_es_sso_setup_description")}),(0,S.tZ)(re.dDn,{gridArea:"button",alignSelf:"center",children:(0,S.tZ)(VS.M,{id:"ssoSetupButton",loading:d||g===nf.LOADING,disabled:b,type:"button",size:"large",onClick:()=>{f.push(`${x}/sso-settings`)},content:n("team_settings_es_sso_setup_configure_es_tooltip"),neverShowTooltip:!t,mood:v?"neutral":"brand",intensity:v?"quiet":"catchy",children:n(v?"team_settings_button_edit_label":"team_settings_es_sso_setup_button")})})]}),v?(0,S.BX)(S.HY,{children:[(0,S.tZ)($S,{actionsDisabled:g!==nf.COMPLETE,ssoServiceProviderUrl:u}),ef||(ef=(0,S.tZ)("br",{})),(0,S.tZ)(JS,{actionsDisabled:g!==nf.COMPLETE,ssoEnabled:_,loading:d,updateTeamSettings:l})]}):null]})};var rf,sf,of;const lf=({backRoute:e})=>{const{translate:t}=(0,p.Z)(),{path:n}=(0,i.$B)(),{esConfig:a,esConfigLoading:r,refreshEncryptionServiceConfig:s}=Ux(),{teamId:d}=(0,be.fV)(),{teamSettings:_,updateTeamSettings:u,teamSettingsLoading:m}=ye(d),{status:g,data:h}=(0,c.k)(Rb.y,"ssoProvisioning");if(g!==L.rq.Success)return null;const{ssoSolution:y,ssoStatus:b,global:{ssoCapable:x},enableSSO:{ssoEnabled:f}}=h,v=y===Lb.WO.enum.confidentialSaml&&b===Lb.pI.enum.incomplete,C=!f,E=y===Lb.WO.enum.ssoConnector;return(0,S.tZ)(kx,{title:t("team_settings_es_sso_title"),onBackClicked:()=>{Ub({ssoSetupStep:l.SsoSetupStep.ReturnToSsoSelection}),(0,i.uX)(e)},showBackButton:C,children:(0,S.tZ)(Ba,{mainContent:(0,S.tZ)(re.T5p,{gridTemplateColumns:"auto",gridAutoRows:"min-content",gap:"32px",children:(0,S.BX)(i.rs,{children:[(0,S.BX)(i.AW,{exact:!0,path:n,children:[(0,S.tZ)(Hb,{pageContext:Vb.SelfHosted,onSetupClear:()=>u({ssoServiceProviderUrl:null})}),rf||(rf=(0,S.tZ)(Hx,{})),E?(0,S.tZ)(o.ke,{title:t("team_settings_es_sso_migration_infobox_title"),description:t("team_settings_es_sso_migration_infobox_body")}):null,(0,S.tZ)(xS,{loading:r||null===x,esConfig:a,parentPath:n,disableSetupButton:!x||v}),(0,S.tZ)(af,{isSsoCapable:x,disableSetupButton:!x||!a?.config})]}),(0,S.tZ)(i.AW,{path:`${n}/encryption-service-settings`,children:r||m?sf||(sf=(0,S.tZ)(o.ZX,{})):(0,S.tZ)(mS,{migratingFromSSOConnector:E,onSave:()=>s(),teamSettings:_,updateTeamSettings:u,esConfig:a})}),(0,S.tZ)(i.AW,{path:`${n}/sso-settings`,children:of||(of=(0,S.tZ)(GS,{}))})]})}),secondaryContent:(0,S.tZ)(rd,{description:t("team_settings_es_sso_setup_guide_description"),heading:t("team_settings_es_sso_setup_guide_heading"),linkText:t("team_settings_es_sso_setup_guide_link_text"),linkProps:{linkType:id.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/360013149040"}})})})},cf=({closeDialog:e})=>{const{translate:t}=(0,p.Z)(),n=t.markup("team_settings_sso_desktop_infobox_warning_markup",{learnMore:ee.rh},{linkTarget:"_blank"});return(0,S.tZ)(re.VqE,{closeIconName:t("_common_dialog_dismiss_button"),isOpen:!0,onClose:()=>e(Sd.dismiss),children:(0,S.BX)("div",{className:"container--m6KmsQvg_3",children:[(0,S.tZ)(re.$N8,{title:t("team_settings_enable_sso_dialog_activate_title")}),(0,S.tZ)(re.a7O,{children:(0,S.tZ)("div",{className:"toggleInfoBox--y5TmWAMYcl",children:n&&(0,S.tZ)(re.vDh,{severity:"warning",size:"small",title:n})})}),(0,S.tZ)(re.cNS,{primaryButtonOnClick:()=>e(Sd.action),primaryButtonTitle:t("team_settings_enable_sso_dialog_activate_action"),secondaryButtonOnClick:()=>e(Sd.dismiss),secondaryButtonTitle:t("team_settings_enable_sso_cancel")})]})})},df=({closeDialog:e})=>{const{translate:t}=(0,p.Z)();return(0,S.tZ)(Ya.o,{isOpen:!0,onRequestClose:()=>e(Sd.dismiss),footer:(0,S.tZ)(re.cNS,{primaryButtonTitle:t("team_settings_enable_sso_dialog_disable_action"),primaryButtonOnClick:()=>e(Sd.action),secondaryButtonTitle:t("team_settings_enable_sso_cancel"),secondaryButtonOnClick:()=>e(Sd.dismiss),intent:"danger"}),title:t("team_settings_enable_sso_dialog_disable_title"),children:t("team_settings_enable_sso_dialog_disable_description")})},_f=({teamSettings:e,updateTeamSettings:t,teamId:n,planTier:a,setStepComplete:i})=>{var s;const[l,c]=(0,r.useState)(null!=(s=e?.ssoEnabled)&&s),[d,_]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[g,h]=(0,r.useState)([]),[y,b]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(!l)return"legacy"===a||"team"===a?b(!0):void 0;i(bd.EnableSSO)}),[n,g,l,a,i]),(0,r.useEffect)((()=>{(async()=>{const e=await he.C.getTeamDomains();e.success&&h(e.domains.filter((e=>"valid"===e.status)).map((e=>e.name)))})()}),[]);const{translate:x}=(0,p.Z)(),f=async e=>{if(m(!1),e!==Sd.dismiss)try{const e=!l;await t({ssoEnabled:e}),c(e)}catch(e){_(!0)}};return(0,S.BX)("div",{className:"enableSSOContainer--VLsANoM8AQ",children:[(0,S.tZ)(yd,{label:x("team_settings_enable_sso_test_title"),labelHelper:x("team_settings_enable_sso_test_description"),children:(0,S.tZ)(o.zx,{mood:"brand",intensity:"catchy",onClick:()=>{(0,P.Yo)(`${e?.ssoServiceProviderUrl}/saml/login?redirect=test_idp`)},disabled:!(e&&e.ssoServiceProviderUrl),children:x("team_settings_enable_sso_test_button")})}),(0,S.tZ)(yd,{label:x("team_settings_enable_sso_action_title"),labelHelper:x("team_settings_enable_sso_action_description"),children:y?(0,S.tZ)(o.zx,{mood:"brand",intensity:"catchy",onClick:()=>(0,P.Yo)(ee.Bw),children:x("team_settings_enable_sso_contact_support")}):(0,S.BX)("div",{children:[(0,S.tZ)(re.ZDl,{onClick:()=>m(!0),checked:l,disabled:d}),l?(0,S.tZ)("div",{className:"toggleDescription--S3OccP6JDd",children:x("team_settings_enable_sso_action_toggle_description")}):null,d?(0,S.tZ)("div",{className:"toggleWarning--TU8a__FJDp",children:x.markup("team_settings_enable_sso_action_toggle_warning_markup")}):null]})}),u?l?(0,S.tZ)(df,{closeDialog:f}):(0,S.tZ)(cf,{closeDialog:f}):null]})};var uf=n(68197);const mf=({isTeamSettingsLoading:e,teamSettings:t})=>{const{translate:n}=(0,p.Z)(),[a,i]=r.useState(""),[s,o]=r.useState(""),[l,c]=r.useState(""),d=t?.ssoServiceProviderUrl;return r.useEffect((()=>{!e&&d&&(i((0,uf.UQ)(d,"saml")),o((0,uf.UQ)(d,"saml/")),c((0,uf.UQ)(d,"saml/callback")))}),[e,d]),(0,S.BX)("div",{className:"configureIDPContainer--ACoVdM7s0N",children:[(0,S.tZ)(yd,{label:n("team_settings_configure_idp_connector_metadata"),centerLabel:!0,children:(0,S.tZ)(Rd.x,{inputValue:a,textInputProps:{fullWidth:!0,readOnly:!0}})}),(0,S.tZ)(yd,{label:n("team_settings_configure_idp_entity_id"),centerLabel:!0,children:(0,S.tZ)(Rd.x,{inputValue:s,textInputProps:{fullWidth:!0,readOnly:!0}})}),(0,S.tZ)(yd,{label:n("team_settings_configure_idp_login_url"),centerLabel:!0,children:(0,S.tZ)(Rd.x,{inputValue:l,textInputProps:{fullWidth:!0,readOnly:!0}})})]})},pf=({title:e,children:t})=>(0,S.BX)("div",{sx:{"&:not(:last-child)":{marginBottom:"32px"}},children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",sx:{marginBottom:"32px"},children:e}),(0,S.tZ)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px"},children:t})]});var gf=n(98783),hf=n.n(gf);const yf="connectorInfoContainer--e07d9cT8Hu",bf="textField--Nk7DpcX8Pp",xf="loading--sfYFOqhXPS",Sf="installerButtonContainer--iP6MNTnQrn",ff="errorText--snbBoX2meA",vf=({keyValue:e,onGenerateClicked:t,isGeneratorDisabled:n,generatorDisabledText:a})=>{const{translate:i}=(0,p.Z)(),[s,o]=(0,r.useState)(!1),l=(0,r.useRef)(null);return(0,r.useEffect)((()=>{l.current&&new(hf())(l.current,{text:()=>e})}),[e]),(0,S.tZ)(yd,{label:i("team_settings_connector_generator_title"),labelHelper:i("team_settings_connector_generator_description"),children:(0,S.tZ)("div",{className:"generatorContainer--_83Buo4tVF",children:(0,S.tZ)(re.ua7,{content:a,passThrough:!n,sx:{maxWidth:"210px"},children:(0,S.BX)("div",{className:n?"generatorDisableContent--Olv4UpdAqY":"",children:[(0,S.tZ)(re.zxk,{type:"button","aria-describedby":"errorKeyWarning",className:"generatorButton--I0z2qEK25R",onClick:()=>{o(!0),t()},disabled:n,children:i("team_settings_connector_generator_button")}),(0,S.tZ)("div",{className:"generatorInputContainer--M4lkXUrCCY",children:(0,S.tZ)(Rd.x,{inputValue:e,textInputProps:{readOnly:!0,fullWidth:!0,disabled:n,style:{cursor:n?"not-allowed":"text"}},tooltipProps:{passThrough:n},iconButtonProps:{disabled:n}})}),s&&(0,S.tZ)("p",{id:"errorKeyWarning",className:ff,children:i("team_settings_connector_generator_warning")})]})})})})},Cf="team_settings_connector_installer_tooltip",Ef=({isTeamSettingsLoading:e,isSsoEnabled:t,idpMetadata:n,connectorUrl:a})=>{const{translate:i}=(0,p.Z)(),[s,l]=(0,r.useState)(""),[c,d]=(0,r.useState)("");(0,r.useEffect)((()=>{l("")}),[n,a]);const _=Boolean(n&&a&&(c||t));return(0,S.BX)(S.HY,{children:[(0,S.tZ)(vf,{keyValue:c,onGenerateClicked:async()=>{const e=await he.C.generateSSOConnectorKey();d(e)},isGeneratorDisabled:t,generatorDisabledText:i("team_settings_connector_generator_instance_help")}),(0,S.tZ)(yd,{label:i("team_settings_connector_installer_title"),labelHelper:i("team_settings_connector_installer_description"),children:(0,S.tZ)("div",{className:e?xf:Sf,children:(0,S.BX)(re.ua7,{content:i(Cf),passThrough:_,sx:{maxWidth:"210px"},children:[(0,S.BX)(o.zx,{type:"button","aria-describedby":"configError",disabled:!_,onClick:async()=>{l("");const e=await he.C.createSSOConnectorConfig({connectorUrl:a,connectorKey:c,idpMetadata:n});e.success?(0,Ms.S)(e.config,"dashlane-sso-config.txt","text/plain"):e.success||l(e.error.code)},children:[(0,S.tZ)("div",{className:"downloadIcon--dtf6SHkd51",children:(0,S.tZ)(re._8t,{color:md()["--white"]})}),i("team_settings_connector_installer_config_button")]}),s?(0,S.tZ)("p",{id:"configError",className:ff,children:i("team_settings_connector_installer_error")}):null]})})}),(0,S.tZ)(yd,{label:i("team_settings_connector_installer_setup_title"),labelHelper:i("team_settings_connector_installer_setup_description"),children:(0,S.tZ)("div",{className:e?xf:Sf,children:(0,S.tZ)(re.ua7,{content:i(Cf),passThrough:_,sx:{maxWidth:"210px"},children:(0,S.BX)(o.zx,{type:"button",disabled:!_,onClick:()=>(0,P.Yo)(ee.nC),children:[(0,S.tZ)("div",{className:"openIcon--Jft6n3KJTS",children:(0,S.tZ)(re.RTC,{color:md()["--white"]})}),i("team_settings_connector_installer_button")]})})})})]})},Zf="team_settings_connector_edit",Df="team_settings_connector_save",Tf="team_settings_connector_saving",kf="team_settings_connector_success",If=({isTeamSettingsLoading:e,saveConnectorURL:t,saveIdpMetadata:n,teamSettings:a})=>{var i,r;const{translate:s}=(0,p.Z)();return(0,S.BX)(S.HY,{children:[(0,S.tZ)(yd,{label:s("team_settings_connector_metadata_title"),children:(0,S.tZ)("div",{className:yf,children:(0,S.tZ)(Ly.X,{isDisabled:e,multiLine:!0,defaultValue:null!=(i=a?.ssoIdpMetadata)?i:"",saveBtnLabel:s(Df),savingBtnLabel:s(Tf),editBtnLabel:s(Zf),placeholder:s("team_settings_connector_metadata_placeholder"),successMessage:s(kf),onSave:n,inputFieldClassName:"inputField--SXqAbTX3lX",textFieldClassName:bf})})}),(0,S.tZ)(yd,{label:s("team_settings_connector_url_title"),labelHelper:s("team_settings_connector_url_description"),children:(0,S.tZ)("div",{className:yf,children:(0,S.tZ)(Ly.X,{isDisabled:e,defaultValue:null!=(r=a?.ssoServiceProviderUrl)?r:"",saveBtnLabel:s(Df),savingBtnLabel:s(Tf),editBtnLabel:s(Zf),placeholder:s("team_settings_connector_url_placeholder"),successMessage:s(kf),onSave:t,textFieldClassName:bf})})})]})},Af=({setStepComplete:e,isTeamSettingsLoading:t=!1,teamSettings:n,updateTeamSettings:a})=>{var i,s,o;const{translate:l}=(0,p.Z)(),c=r.useCallback((async e=>{try{await a({ssoIdpMetadata:e})}catch(e){throw Error(l("team_settings_connector_metadata_error"))}}),[a,l]),d=r.useCallback((async e=>{try{const t=e?(0,uf.Yw)(e):null;await a({ssoServiceProviderUrl:t})}catch(e){throw Error(l("team_settings_connector_url_error"))}}),[a,l]),_=n?.ssoServiceProviderUrl,u=n?.ssoIdpMetadata;return r.useEffect((()=>{t||u&&_&&e(bd.SSOConnector)}),[t,_,u,e]),(0,S.BX)("div",{className:"ssoConnectorContainer--ndf4jAvwn0",children:[(0,S.tZ)(If,{isTeamSettingsLoading:t,teamSettings:n,saveConnectorURL:d,saveIdpMetadata:c}),(0,S.tZ)(Ef,{isTeamSettingsLoading:t,isSsoEnabled:null!=(i=n?.ssoEnabled)&&i,idpMetadata:null!=(s=n?.ssoIdpMetadata)?s:"",connectorUrl:null!=(o=n?.ssoServiceProviderUrl)?o:""})]})},wf=({lee:e})=>{const{translate:t}=(0,p.Z)(),[n,a]=(0,r.useState)(new Set),[i,s]=(0,r.useState)(new Set),[c,d]=(0,r.useState)(new Set([xd.EnableSSO,xd.SSOConnector]));(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSettingsSsoLegacy)}),[]),(0,r.useEffect)((()=>{const e=new Set,t=new Set([xd.EnableSSO,xd.ConfigureIDP,xd.SSOConnector]);n.has(bd.ClaimDomain)&&n.has(bd.VerifyDomain)&&(e.add(xd.SSOConnector),e.add(xd.ConfigureIDP),e.add(xd.EnableSSO),t.delete(xd.SSOConnector),t.delete(xd.ConfigureIDP),t.delete(xd.EnableSSO)),n.has(bd.EnableSSO)&&(e.delete(xd.SSOConnector),e.delete(xd.ConfigureIDP)),s(e),d(t)}),[n]);const _=(0,r.useCallback)((e=>{a((t=>{const n=e=>e.every((e=>t.has(e)));let a=!0;switch(e){case bd.EnableSSO|bd.VerifyDomain:a=!0;break;case bd.SSOConnector:a=n([bd.ClaimDomain,bd.VerifyDomain]);break;case bd.EnableSSO:a=n([bd.ClaimDomain,bd.VerifyDomain,bd.SSOConnector])}return a&&!t.has(e)?new Set([...t,e]):t}))}),[]),u=(0,r.useCallback)((e=>{a((t=>{const n=new Set(t);return e.forEach((e=>{n.delete(e)})),n}))}),[]),g=(0,T.ev)(e.globalState),{teamSettingsLoading:h,teamSettings:y,updateTeamSettings:b,planTier:x}=ye(g),f=[{label:t("team_settings_sso_connector_title"),component:Af,locked:c.has(xd.SSOConnector),open:i.has(xd.SSOConnector),index:2},{label:t("team_settings_sso_identity_provider_title"),component:mf,locked:c.has(xd.ConfigureIDP),open:i.has(xd.ConfigureIDP),index:3},{label:t("team_settings_sso_enable_title"),component:_f,locked:c.has(xd.EnableSSO),open:i.has(xd.EnableSSO),index:4}];return(0,S.tZ)("div",{sx:{minHeight:"100%",minWidth:"1116px",padding:"32px 48px"},children:(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",maxWidth:"74em"},children:[(0,S.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",sx:{marginBottom:"32px"},children:t("team_settings_menu_title_single_sign_on")}),(0,S.BX)("div",{sx:{display:"inline-block",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"32px",marginBottom:"10px",flex:"1",borderRadius:"8px"},children:[(()=>{if(!y||y.ssoEnabled)return null;if("team"===x||"legacy"===x){const e=t.markup("team_settings_sso_teamplan_infobox_warning_markup"),n=t("team_settings_sso_teamplan_infobox_warning_button");return(0,S.tZ)("div",{className:"infoBox--w1PtJInNuc",children:(0,S.tZ)(re.vDh,{title:e,size:"simple",secondaryLabel:n,secondary:()=>(0,P.Yo)(ee.Bw)})})}return null})(),(0,S.BX)(pf,{title:t("team_settings_sso_title"),children:[(0,S.tZ)(yd,{label:t("team_settings_sso_guide_title"),labelHelper:t("team_settings_sso_guide_description"),children:(0,S.tZ)(o.zx,{onClick:()=>{(0,P.Yo)(ee.nC)},mood:"brand",intensity:"catchy",children:t("team_settings_sso_setup_button")})}),(0,S.tZ)(Dd,{isTeamSettingsLoading:h,teamSettings:y,setStepComplete:_,uncompleteSteps:u,updateTeamSettings:b,teamId:g,planTier:x})]})]}),h?(0,S.tZ)(ai.Z,{containerClassName:"loadingContainer--Qcn7EL4GD5",size:40}):(0,S.tZ)(re.UQy,{size:"large",children:f.map((e=>(0,S.BX)(re.UlM,{open:e.open,readOnly:e.locked,children:[(0,S.tZ)(re._Oh,{children:`${e.index}. ${e.label}`}),(0,S.tZ)(re.rN7,{children:(0,S.tZ)("fieldset",{disabled:e.locked,children:(0,S.tZ)(e.component,{isTeamSettingsLoading:h,teamSettings:y,setStepComplete:_,updateTeamSettings:b,teamId:null!=g?g:null,planTier:null!=x?x:null})})})]},e.label)))})]})})};var Nf=n(39540);const Of={title:"tac_settings_choose_sso_card_self_hosted_title",redirectUrl:"self-hosted-sso",supportedFeatures:[{title:"tac_settings_sso_self_hosted_card_zero_knowledge",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_simplified_setup",description:"tac_settings_sso_self_hosted_card_not_simplified_setup_description",isSupported:!1,iconName:"FeedbackFailOutlined"},{title:"tac_settings_sso_self_hosted_card_verified_domain",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_scim_support",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"}]},Rf={title:"tac_settings_choose_sso_card_nitro_title",redirectUrl:"confidential-sso",supportedFeatures:[{title:"tac_settings_sso_self_hosted_card_zero_knowledge",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_simplified_setup",description:"tac_settings_sso_nitro_card_simplified_setup_description",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_verified_domain",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_scim_support",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"}]},Lf={title:"tac_settings_choose_sso_card_sso_connector_title",redirectUrl:"sso-connector",supportedFeatures:[{title:"tac_settings_sso_self_hosted_card_zero_knowledge",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_simplified_setup",description:"tac_settings_sso_self_hosted_card_not_simplified_setup_description",isSupported:!1,iconName:"FeedbackFailOutlined"},{title:"tac_settings_sso_self_hosted_card_verified_domain",description:"",isSupported:!1,iconName:"FeedbackFailOutlined"},{title:"tac_settings_sso_self_hosted_card_scim_support",description:"",isSupported:!1,iconName:"FeedbackFailOutlined"}]},Mf=({title:e,description:t,isSupported:n,iconName:a,disabled:i=!1})=>{const{translate:r}=(0,p.Z)();return(0,S.BX)(o.kC,{gap:"8px",flexWrap:"nowrap",alignItems:"flex-start",children:[(0,S.tZ)(o.vY,{name:a,mood:i?"neutral":!1===n?"danger":"brand"}),(0,S.BX)(o.kC,{flexDirection:"column",gap:"4px",children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:i?"ds.text.oddity.disabled":"ds.text.neutral.catchy",children:r(e)}),t?(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:i?"ds.text.oddity.disabled":"ds.text.neutral.quiet",children:r(t)}):null]})]})},Bf=({title:e,redirectUrl:t,optionNumber:n,supportedFeatures:a,buttonLabel:r,onCtaClick:s,disabled:l=!1,selected:c=!1,featureCardStatus:d="NOT_STARTED",ctaDataTestId:_,setBusinessPlanBadge:u=!1})=>{const{translate:m}=(0,p.Z)(),g=(0,i.k6)(),h=`${(0,i.$B)().path}/${t}`;return(0,S.tZ)(o.Zb,{sx:{borderColor:c?"ds.border.brand.standard.idle":"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",width:"100%"},children:(0,S.BX)(re.T5p,{gridTemplateAreas:"'business business' 'option badge' 'title title' 'body body' 'button button'",children:[u?(0,S.tZ)(re.dDn,{gridArea:"business",sx:{marginBottom:"8px"},children:(0,S.tZ)(o.Ct,{iconName:"PremiumOutlined",layout:"iconLeading",label:m("team_settings_sso_paywall_business_badge"),mood:"brand",intensity:"quiet"})}):null,n&&(0,S.tZ)(re.dDn,{gridArea:"option",sx:{marginBottom:"8px"},children:(0,S.tZ)(o.nv,{color:l?"ds.text.oddity.disabled":"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:`${m("tac_settings_directory_sync_card_option")} ${n}`})}),"ACTIVATED"===d||"STARTED"===d?(0,S.tZ)(re.dDn,{gridArea:"badge",justifySelf:"right",children:(0,S.tZ)(o.Ct,{mood:"ACTIVATED"===d?"positive":"warning",intensity:"catchy",label:m("ACTIVATED"===d?"tac_settings_directory_sync_card_badge_enabled":"tac_settings_feature_card_badge_configuration_not_completed")})}):null,(0,S.tZ)(re.dDn,{gridArea:"title",sx:{marginBottom:"32px"},children:(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.section.medium",color:l?"ds.text.oddity.disabled":"ds.text.neutral.catchy",sx:{display:"inline-block"},children:m(e)})}),(0,S.tZ)(re.dDn,{gridArea:"body",children:(0,S.tZ)(o.kC,{gap:"32px",flexDirection:"column",sx:{marginBottom:"32px"},children:a.map((e=>(0,S.tZ)(Mf,{disabled:l,...e},n+e.title)))})}),(0,S.tZ)(re.dDn,{gridArea:"button",justifySelf:"right",children:u?(0,S.tZ)(o.zx,{role:"button",onClick:()=>s?.(),disabled:l,intensity:"catchy",layout:"iconLeading",icon:"PremiumOutlined",children:r}):(0,S.tZ)(o.zx,{role:"button",onClick:()=>{s?.(),g.push(h)},disabled:l,intensity:"catchy","data-testid":_,children:r})})]})})},Pf={CouldNotGetTeamStatus:"COULD_NOT_GET_TEAM_STATUS",TeamIdNotFound:"TEAM_ID_NOT_FOUND",UserNotAuthorized:"USER_NOT_AUTHORIZED",InvalidSsoState:"INVALID_SSO_STATE",GenericSsoError:"GENERIC_SSO_ERROR"},Uf={ERROR_HEADER:"team_settings_sso_error_header",RETRY:"team_settings_sso_error_button_retry",COULD_NOT_GET_TEAM_STATUS:"team_settings_sso_error_message_team_status",TEAM_ID_NOT_FOUND:"team_settings_sso_error_message_team_id",USER_NOT_AUTHORIZED:"team_settings_sso_error_message_not_authorized",INVALID_SSO_STATE:"team_settings_sso_error_message_invalid_sso_state",GENERIC_SSO_ERROR:"team_settings_sso_error_message_generic"},Xf=({errorTag:e=Pf.GenericSsoError})=>{const{translate:t}=(0,p.Z)();return(0,S.BX)(o.kC,{alignItems:"center",justifyContent:"center",fullWidth:!0,gap:"40px",sx:{mt:"20vh",flexDirection:"column"},children:[(0,S.tZ)(o.JO,{name:"FeedbackFailOutlined",color:"ds.text.danger.quiet",sx:{height:"64px",width:"64px"}}),(0,S.BX)(o.kC,{alignItems:"center",flexDirection:"column",gap:"8px",children:[(0,S.tZ)(o.X6,{textStyle:"ds.title.section.large",as:"h1",children:t(Uf.ERROR_HEADER)}),e?(0,S.tZ)(o.nv,{children:t(Uf[Pf[e]])}):null]})]})};var zf=n(52477);const qf=({backgroundColor:e,withBorder:t,paddingSize:n="normal",...a})=>(0,S.tZ)("div",{sx:{bg:null!=e?e:"ds.container.agnostic.neutral.quiet",p:"tight"===n?"24px":"32px 24px",border:t?"1px solid #8C8F9033":void 0,borderRadius:3,height:"fit-content"},...a}),jf=({isSsoConnector:e})=>{const{translate:t}=(0,p.Z)(),[n,a]=(0,r.useState)(!1),{migrateToConfidentialSso:i}=(0,q.u)(Rb.y),{showToast:s}=(0,o.pm)(),l=(0,r.useRef)(null);return(0,S.BX)(re.T5p,{as:qf,backgroundColor:"ds.background.default",paddingSize:"normal",gridTemplateRows:"auto 1fr auto",justifyItems:"center",gap:"8px",children:[e?(0,S.tZ)(o.qo,{ref:l,label:t("migrate_to_confidential_sso_input_label"),sx:{width:"400px"}}):null,(0,S.tZ)(o.zx,{layout:"iconLeading",icon:"ToolsOutlined",isLoading:n,onClick:async()=>{try{a(!0);const e=await i({ssoConnectorKey:l.current?.value.trim()});if((0,j.hx)(e)){const n=(0,zf.EQ)(e.error,{SSO_CONNECTOR_KEY_MISSING:()=>t("migrate_to_confidential_sso_connector_key_missing"),SSO_CONNECTOR_KEY_FORMAT_INVALID:()=>t("migrate_to_confidential_sso_connector_key_format_invalid")});s({description:n,closeActionLabel:t("_common_toast_close_label"),mood:"danger"})}else s({description:t("migrate_to_confidential_sso_success"),closeActionLabel:t("_common_toast_close_label")})}catch{s({description:t("migrate_to_confidential_sso_error"),closeActionLabel:t("_common_toast_close_label"),mood:"danger"})}finally{a(!1)}},children:t("migrate_to_confidential_sso_migrate_button_label")})]})};var Ff,Gf;const Vf=()=>{const{translate:e}=(0,p.Z)(),[t,n]=(0,r.useState)(!0),a=(0,u.s)(),i=(0,R._)(),s=(0,c.k)(Rb.y,"ssoProvisioning"),d=(0,c.k)(Nf.m,"scimConfiguration");(0,r.useEffect)((()=>{(0,m.Nc)(l.Page.TacSso)}),[]);const{ssoMigrationFF:_,ssoConnectorCardFF:g,confidentialSSOMigrationFF:h}=(()=>{if(i.status!==L.rq.Success)return{};const{itadmin_tac_encryptionservice_SSOmigration_reset:e,setup_rollout_web_ssoconnector_card:t,setup_rollout_confidential_migration:n}=i.data;return{ssoMigrationFF:null!=e&&e,ssoConnectorCardFF:null!=t&&t,confidentialSSOMigrationFF:null!=n&&n}})();if((0,r.useEffect)((()=>{i.status===L.rq.Success&&a&&s.status===L.rq.Success&&d.status===L.rq.Success&&n(!1)}),[a,s.status,d.status,i]),t)return(0,S.tZ)(re.T5p,{justifyItems:"center",children:(0,S.tZ)(o.ZX,{size:75,sx:{marginTop:"20vh"}})});var y;if(s.status===L.rq.Error||d.status===L.rq.Error)return(0,S.tZ)(Xf,{errorTag:null!=(y=s.error?.tag)?y:d.error?.tag});if(s.status!==L.rq.Success||d.status!==L.rq.Success||!a)return null;const{ssoSolution:b,ssoStatus:x,global:{ssoCapable:f}}=s.data,v=!f,C=b===Lb.WO.enum.selfHostedSaml,E=b===Lb.WO.enum.confidentialSaml,Z=b===Lb.WO.enum.ssoConnector||g;return(0,S.BX)(re.T5p,{gap:"16px",alignContent:"start",sx:{px:"48px",pt:"32px",pb:"12px"},children:[(0,S.BX)(re.T5p,{fullWidth:!0,gap:"24px",gridTemplateColumns:Z?"1fr 1fr 1fr":"1fr 1fr",children:[(0,S.tZ)(Bf,{selected:E,optionNumber:1,...Rf,buttonLabel:e(E?"tac_settings_choose_sso_confidential_card_button_edit":"tac_settings_choose_sso_confidential_card_button_setup"),disabled:v||b===Lb.WO.enum.selfHostedSaml&&x===Lb.pI.enum.enabled||Z,featureCardStatus:b===Lb.WO.enum.confidentialSaml&&x===Lb.pI.enum.enabled?"ACTIVATED":b===Lb.WO.enum.confidentialSaml&&x===Lb.pI.enum.incomplete?"STARTED":"NOT_STARTED",onCtaClick:()=>{Xb({currentBillingPlanTier:a.spaceTier,ssoSetupStep:l.SsoSetupStep.ChooseYourSsoSolution})}}),(0,S.tZ)(Bf,{optionNumber:2,...Of,selected:C,buttonLabel:e(C?"tac_settings_choose_sso_self_hosted_card_button_edit":"tac_settings_choose_sso_self_hosted_card_button_setup"),disabled:v||b===Lb.WO.enum.confidentialSaml||!!d.data.token||Z&&!_,featureCardStatus:b===Lb.WO.enum.selfHostedSaml&&x===Lb.pI.enum.enabled?"ACTIVATED":b===Lb.WO.enum.selfHostedSaml&&x===Lb.pI.enum.incomplete?"STARTED":"NOT_STARTED",onCtaClick:()=>{Ub({currentBillingPlanTier:a.spaceTier,ssoSetupStep:l.SsoSetupStep.ChooseYourSsoSolution})}}),Z?(0,S.tZ)(Bf,{optionNumber:3,...Lf,buttonLabel:e("tac_settings_choose_sso_sso_connector_card_button_edit"),disabled:E||C,featureCardStatus:"ACTIVATED"}):null]}),h?(0,S.tZ)(jf,{isSsoConnector:Z}):null]})},Hf=()=>{const{translate:e}=(0,p.Z)();return(0,S.BX)(re.T5p,{gridTemplateColumns:"auto",gridTemplateRows:"auto 1fr",fullWidth:!0,sx:{height:"100%"},children:[(0,S.BX)(re.T5p,{sx:{px:"48px",pt:"32px",pb:"12px"},children:[(0,S.tZ)(uo,{title:"Choose your single sign-on (SSO) configuration"}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:e("choose_sso_screen_paragraph_sso_description")}),(0,S.BX)("div",{sx:{display:"flex",alignItems:"center"},children:[(0,S.BX)(o.nv,{as:"a",href:"https://support.dashlane.com/hc/en-us/articles/360013149040",textStyle:"ds.body.standard.regular",color:"ds.text.brand.quiet",sx:{padding:"5px 5px 5px 0px",gap:"4px"},children:[" ",e("choose_sso_screen_link_lean_more")]}),Ff||(Ff=(0,S.tZ)(o.JO,{name:"ActionOpenExternalLinkOutlined",size:"small",color:"ds.text.brand.quiet"}))]})]}),Gf||(Gf=(0,S.tZ)(Vf,{}))]})},Wf=({openContactDialog:e})=>{const{translate:t}=(0,p.Z)();return(0,S.tZ)(rd,{supportHeading:t("team_settings_contact_us_support_header"),heading:t("team_settings_contact_us_heading"),description:t("team_settings_contact_us_description"),linkText:t("team_settings_contact_us_link_title"),linkProps:{linkType:id.InternalLink,internalAction:e}})};var $f=n(85993);const Kf={ITEM:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"16px"}},Yf=({iconName:e,title:t,subtitle:n})=>{const{translate:a}=(0,p.Z)();return(0,S.BX)("div",{sx:Kf.ITEM,children:[(0,S.tZ)(o.vY,{name:e,mood:"brand"}),(0,S.BX)("div",{children:[(0,S.tZ)(o.nv,{textStyle:"ds.title.block.medium",sx:{marginBottom:"5px"},children:a(t)}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:a(n)})]})]})},Qf={CONTAINER:{borderRadius:"8px",border:"1px solid ds.border.neutral.quiet.idle",padding:"32px",backgroundColor:"ds.background.default",display:"flex",flexDirection:"column",alignItems:"flex-start"},HEADER:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"8px",alignSelf:"stretch"},ITEMS:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"32px",alignSelf:"stretch"},ACTIONS:{display:"flex",justifyContent:"space-between",alignItems:"center",alignSelf:"stretch"}},Jf=({isTrialOrGracePeriod:e})=>{const{translate:t}=(0,p.Z)(),{routes:n}=(0,i.Xo)(),a=(0,me.U)(),r={WHATS_SSO:{label:t("team_settings_sso_paywall_whats_sso"),url:ee.Tz},ZERO_KNOWLEDGE:{label:t("team_settings_sso_paywall_zero_knowledge"),url:ee.mn},MULTI_DOMAINS:{label:t("team_settings_sso_paywall_multi_domains"),url:ee.I9},SELF_HOSTED:{label:t("team_settings_sso_paywall_self_hosted"),url:ee.bx},CONFIDENTIAL_SSO:{label:t("team_settings_sso_paywall_confidential_sso"),url:ee.Fn},IDENTITY_PROVIDER:{label:t("team_settings_sso_paywall_identity_provider"),url:ee.HX},HELP_CENTER:{label:t("team_settings_sso_paywall_helper_center"),url:ee.Tx}};return(0,S.BX)(re.T5p,{gap:"32px",alignContent:"start",sx:Qf.CONTAINER,children:[(0,S.BX)("div",{sx:Qf.HEADER,children:[(0,S.tZ)(o.Ct,{iconName:"PremiumOutlined",layout:"iconLeading",label:t("team_settings_sso_paywall_business_badge"),mood:"brand",intensity:"quiet"}),(0,S.tZ)(o.nv,{textStyle:"ds.title.section.large",children:t("team_settings_sso_paywall_title")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:t("team_settings_sso_paywall_description")})]}),(0,S.BX)("div",{sx:Qf.ITEMS,children:[(0,S.tZ)(Yf,{iconName:"ProtectionOutlined",title:"team_settings_sso_paywall_user_experience_item",subtitle:"team_settings_sso_paywall_user_experience_description"}),(0,S.tZ)(Yf,{iconName:"FeatureDarkWebMonitoringOutlined",title:"team_settings_sso_paywall_transparency_item",subtitle:"team_settings_sso_paywall_transparency_description"}),(0,S.tZ)(Yf,{iconName:"AccountSettingsOutlined",title:"team_settings_sso_paywall_access_item",subtitle:"team_settings_sso_paywall_access_description"}),(0,S.tZ)(Yf,{iconName:"ToolsOutlined",title:"team_settings_sso_paywall_confidential_sso_item",subtitle:"team_settings_sso_paywall_confidential_sso_description"})]}),(0,S.BX)("div",{sx:Qf.ACTIONS,children:[(0,S.tZ)($f.a,{dropdownItems:r,title:t("team_settings_sso_paywall_learn_more")}),(0,S.tZ)(o.zx,{mood:"brand",intensity:"catchy",icon:"PremiumOutlined",layout:"iconLeading",role:e?"link":void 0,onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.UpgradeBusinessTier,clickOrigin:l.ClickOrigin.SsoPaywallPage})),e?(0,P.Yo)(`${ee.ub}?plan=business&subCode=${null!=a?a:""}&utm_source=button:upgrade_business_tier+click_origin:sso_paywall_page+origin_page:tac/sso/paywall+origin_component:main_app`):(0,i.uX)(`${n.teamAccountChangePlanRoutePath}?plan=business`)},children:t("team_settings_sso_paywall_upgrade_business")})]})]})},ev=({isTrialOrGracePeriod:e})=>{const[t,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSsoPaywall)}),[]),(0,S.BX)(S.HY,{children:[(0,S.tZ)(Ba,{mainContent:(0,S.tZ)(re.T5p,{gridTemplateColumns:"auto",gridAutoRows:"min-content",gap:"32px",children:(0,S.tZ)(Jf,{isTrialOrGracePeriod:e})}),secondaryContent:(0,S.tZ)(Wf,{openContactDialog:()=>n(!0)})}),t?(0,S.tZ)(J.c,{onDismiss:()=>n(!1)}):null]})};var tv;const nv="/sso-connector",av="/self-hosted-sso",iv="/confidential-sso",rv="/paywall",sv=({lee:e})=>{var t;const n=(0,i.$B)(),{data:a}=(0,c.k)(Rb.y,"ssoProvisioning"),r=a?.ssoSolution,s=r===Lb.WO.enum.confidentialSaml||r===Lb.WO.enum.ssoConnector,o=r===Lb.WO.enum.selfHostedSaml||r===Lb.WO.enum.ssoConnector,{shouldShowBuyOrUpgradePaywall:l,isTrialOrGracePeriod:d,planType:u}=null!=(t=pe(e.permission.adminAccess))?t:{},m=u===_.lD.Standard,p=l&&(u===_.lD.Starter||u===_.lD.Team||m);return(0,S.BX)(i.rs,{children:[(0,S.tZ)(i.AW,{path:`${n.path}${av}`,children:s?(0,S.tZ)(i.l_,{to:n.path}):(0,S.tZ)(lf,{backRoute:n.url})}),(0,S.tZ)(i.AW,{path:`${n.path}${iv}`,children:o?(0,S.tZ)(i.l_,{to:n.path}):(0,S.tZ)(Px,{backRoute:n.url})}),(0,S.tZ)(i.AW,{path:`${n.path}${rv}`,children:(0,S.tZ)(ev,{isTrialOrGracePeriod:null!=d&&d})}),(0,S.tZ)(i.AW,{path:`${n.path}${nv}`,children:(0,S.tZ)(wf,{lee:e})}),(0,S.tZ)(i.AW,{exact:!0,path:n.path,children:p?(0,S.tZ)(i.l_,{to:`${n.path}${rv}`}):tv||(tv=(0,S.tZ)(Hf,{}))})]})};var ov=n(58480);const lv=({accountInfo:e})=>{const{translate:t}=(0,p.Z)(),{routes:n}=(0,i.Xo)(),a=(0,me.U)();return e?.premiumStatus?(0,S.tZ)(o.ke,{title:t("team_settings_active_directory_paywall_title"),description:t("team_settings_active_directory_paywall_description"),actions:[(0,Se.wt)(e.premiumStatus)?(0,S.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.UpgradeBusinessTier,clickOrigin:l.ClickOrigin.DirectorySyncPaywallPage})),(0,P.Yo)(`${ee.ub}?plan=business&subCode=${null!=a?a:""}`)},children:t("team_settings_active_directory_paywall_buy")},"buy"):(0,S.tZ)(i.rU,{to:`${n.teamAccountChangePlanRoutePath}?plan=business`,children:(0,S.tZ)(o.zx,{children:t("team_settings_active_directory_paywall_upgrade")})},"upgrade")],size:"large",sx:{marginBottom:"32px"}}):null};var cv,dv;const _v="_common_generic_error",uv=({lee:e,disableForm:t,adSyncEnabled:n,isAdSyncCapable:a,accountInfo:i})=>{const{translate:s}=(0,p.Z)(),c=(0,xe.o)(s_.G.WebOnboardingInviteLinkTacMigration),d=su(),_=d.status===L.rq.Success?d.teamKey:void 0,{reportTACError:u}=H(),{lastADSyncDateError:g,lastADSyncDateLoading:h,lastADSyncDate:y}=function(){const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(),[i,s]=(0,r.useState)(null),o=(0,r.useCallback)((async e=>{try{e.signal.aborted||t(!0);const n=await async function(){const e=await he.C.getLastADSyncDate();if(e.success)return{lastSyncRequestForTeamUnix:e.data.lastSyncRequestForTeam,lastSuccessfulSyncRequestForTeamUnix:e.data.lastSuccessfulSyncRequestForTeam};throw new Error(`getScimLastSyncDate: failed with error ${e.error}`)}();e.signal.aborted||(a(n),t(!1),s(null))}catch(n){e.signal.aborted||(t(!1),s(n))}}),[]);return(0,r.useEffect)((()=>{const e=new AbortController;return o(e),()=>{e.abort()}}),[o]),{lastADSyncDateLoading:e,lastADSyncDate:n,lastADSyncDateError:i}}(),b=s.shortDate,[x,f]=(0,r.useState)(!0),[v,C]=(0,r.useState)(!1),[E,Z]=(0,r.useState)(!1),[D,T]=(0,r.useState)(!1),[k,I]=(0,r.useState)(!1),{inviteLinkDataForAdmin:A,getInviteLinkDataForAdmin:w}=eu(),[N,O]=(0,r.useState)(!1),[R,M]=(0,r.useState)(void 0),{teamId:B}=(0,be.fV)(),{teamSettings:P,teamSettingsLoading:U,updateTeamSettings:X}=ye(B),z=(0,r.useCallback)((()=>e.apiMiddleware.teamPlans?e.apiMiddleware.teamPlans:(u(new Error("teamPlans service missing from apiMiddleware")),null)),[]);(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSettingsDirectorySyncActiveDirectory)}),[]),(0,r.useEffect)((()=>{!1===c&&w()}),[w,c]);const q=(0,r.useCallback)((()=>{if(!P)return;const{activeDirectorySyncType:t,activeDirectoryToken:n,activeDirectorySyncStatus:a}=P;try{const i={activeDirectorySyncStatus:a,activeDirectorySyncType:t,activeDirectoryToken:n,teamId:B};M(n),e.dispatch(ov.vo(i)),Z(["full","deprovision-only"].includes(null!=t?t:"")),I(["full","provision-only"].includes(null!=t?t:"")),f(!1)}catch(e){console.error(`ActiveDirectorySettings - fetchData: failed with error: ${e}`)}}),[e,B,P]);if((0,r.useEffect)((()=>{U&&q()}),[b,U,q]),null==c)return null;const j=(e,t)=>e?t?"full":"provision-only":t?"deprovision-only":null,F=(0,ee.cI)(c?_:A?.teamKey);return(0,S.BX)(kx,{title:"Active Directory",children:[c?(0,S.tZ)(uu,{isOpen:N,onClose:()=>{O(!1)}}):(0,S.tZ)(iu,{showSharingDialog:N,setShowSharingDialog:O}),(0,S.BX)(re.T5p,{gap:"10px",gridTemplateAreas:"'mainContent secondaryContent'",gridTemplateColumns:"auto 1fr",alignContent:"flex-start",children:[(0,S.tZ)(re.dDn,{gridArea:"mainContent",children:(0,S.BX)(hy,{children:[a?null:(0,S.tZ)(lv,{accountInfo:i}),(0,S.tZ)(pf,{title:s("team_settings_active_directory_title_help"),children:(0,S.tZ)(yd,{label:s("team_settings_active_directory_header_label"),labelHelper:s("team_settings_active_directory_header_helper"),children:(0,S.tZ)("div",{children:(0,S.tZ)(by.Z,{label:s("team_settings_active_directory_header_button_label"),onClick:()=>{window.open("https://support.dashlane.com/hc/articles/115002155485","_blank")}})})})}),(0,S.BX)(pf,{title:s("team_settings_active_directory_title_status"),children:[(0,S.tZ)(yd,{label:s("team_settings_active_directory_last_successful_sync_date_label"),children:h?cv||(cv=(0,S.tZ)(o.ZX,{color:"ds.oddity.focus",size:"medium"})):g?`${s("_common_generic_error")} ${g.message.toLowerCase()}`:y?.lastSuccessfulSyncRequestForTeamUnix?b((0,Rt.Z)(y.lastSuccessfulSyncRequestForTeamUnix),Vt._T.lll):s("team_settings_active_directory_last_successful_sync_date_value_never")}),(()=>{const{activeDirectorySyncStatus:t}=e.state;return t?.failedSyncCount?(0,S.BX)(S.HY,{children:[(0,S.tZ)(yd,{label:s("team_settings_active_directory_last_error_message_label"),children:(0,S.tZ)("span",{sx:{color:"ds.text.danger.standard"},children:t.lastFailedSync?.error})}),(0,S.tZ)(yd,{label:s("team_settings_active_directory_last_error_date_label"),children:(0,S.tZ)("span",{sx:{color:"ds.text.danger.standard"},children:t?.lastFailedSync?b((0,Rt.Z)(t.lastFailedSync.eventDateUnix),Vt._T.lll):null})}),(0,S.tZ)(yd,{label:s("team_settings_active_directory_fail_count_label"),children:(0,S.tZ)("span",{sx:{color:"ds.text.danger.standard"},children:e.state.activeDirectorySyncStatus.failedSyncCount})})]}):null})()]}),(0,S.BX)(pf,{title:s("team_settings_active_directory_title_setup"),children:[(0,S.tZ)(yd,{label:s("team_settings_active_directory_automated_provisioning_label"),labelHelper:s("team_settings_active_directory_automated_provisioning_helper"),children:(0,S.tZ)(yy.Z,{genericErrorMessage:s(_v),isDisabled:x||D||t,saveValueFunction:async()=>{if(D)return Promise.resolve();T(!0);const t=!k,n=j(t,E);try{if(!P)return;let{activeDirectorySyncStatus:a}=P;if(!a){const e=await(async()=>{const e=await z();if(!e)return;const{activeDirectorySyncStatus:t,activeDirectoryToken:n}=await e.getADToken();return M(n),{activeDirectorySyncStatus:t,activeDirectoryToken:n}})();a=e?.activeDirectorySyncStatus}await X({activeDirectorySyncType:n}),e.dispatch(ov.dV(n)),I(t),T(!1)}catch(e){u(e)}},value:k})}),(0,S.tZ)(yd,{label:s("team_settings_active_directory_automated_deprovisioning_label"),labelHelper:s("team_settings_active_directory_automated_deprovisioning_helper"),children:(0,S.tZ)(yy.Z,{genericErrorMessage:s(_v),isDisabled:x||v||t,saveValueFunction:async()=>{if(v)return Promise.resolve();C(!0);const t=!E,n=j(k,t);try{await X({activeDirectorySyncType:n}),e.dispatch(ov.dV(n)),Z(t),C(!1)}catch(e){u(e)}},value:E})}),(0,S.BX)(yd,{label:s("team_settings_active_directory_cron_script_label"),labelHelper:s("team_settings_active_directory_cron_script_helper"),children:[(0,S.tZ)(Vg.n,{defaultValue:e.state.activeDirectoryScript,isDisabled:!0,multiLine:!0,style:{backgroundColor:"ds.container.expressive.neutral.quiet.active",fontSize:"12px",height:"180px",width:"300px"}}),(0,S.tZ)("div",{children:(0,S.tZ)(Gg.Z,{label:e.state.isCopied?s("team_settings_active_directory_button_copy_feedback"):s("team_settings_active_directory_button_copy_label"),onClick:()=>{navigator.clipboard.writeText(e.state.activeDirectoryScript).then((()=>{e.dispatch(ov.Kk(!0)),window.setTimeout((()=>e.dispatch(ov.Kk(!1))),700)}))},disabled:!R})})]})]})]})}),n?(0,S.tZ)(re.dDn,{gridArea:"secondaryContent",sx:{maxWidth:"500px",minWidth:"250px"},alignSelf:"flex-start",children:(0,S.tZ)(rd,{linkProps:{linkType:id.ExternalLink},heading:s("team_settings_encryption_service_scim_invite_link_heading"),description:(0,S.BX)("div",{children:[(0,S.tZ)(o.nv,{sx:{mb:"8px"},children:s("team_settings_encryption_service_scim_invite_link_description_first")}),(0,S.BX)(o.nv,{as:"a",onClick:e=>{e.preventDefault(),navigator.clipboard.writeText(F),O(!0)},sx:{display:"flex",gap:"4px"},href:"_blank",children:[s("team_settings_encryption_service_scim_invite_link_copy"),dv||(dv=(0,S.tZ)(o.JO,{color:"ds.text.brand.standard",name:"ActionCopyOutlined",size:"medium"}))]})]})})}):null]})]})};var mv,pv;const gv={CONTAINER:{borderRadius:"8px",padding:"24px",border:"1px solid ds.border.neutral.quiet.idle",background:"ds.container.agnostic.neutral.supershy","& h1":{margin:"8px 0px"}},MAIN_TITLE:{margin:"8px 0px",fontFamily:"Public Sans",fontSize:"22px",fontStyle:"normal",fontWeight:"500",lineHeight:"28px"},CONTENT_CARD:{margin:"32px 0px",display:"flex",flexDirection:"row",gap:"16px"},CONTENT_CARD_FEATURE_TITLE:{fontSize:"16px",fontStyle:"normal",fontWeight:"500",lineHeight:"20px",color:"ds.text.neutral.catchy"},CONTENT_CARD_FEATURE_DESC:{color:"ds.text.neutral.quiet",fontSize:"13px",fontStyle:"normal",fontWeight:"400",lineHeight:"18px",maxWidth:"600px"},BUTTONS:{display:"flex",justifyContent:"space-between"}},hv=({isTrialOrGracePeriod:e})=>{const{translate:t}=(0,p.Z)(),{routes:n}=(0,i.Xo)(),a=(0,me.U)();(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSettingsDirectorySyncPaywall)}),[]);const s={LINK_ZEROKNOWLEDGE:{label:t("team_settings_directory_sync_scim_paywall_link_zeroknowledge"),url:ee.mn},LINK_MULTIPLEDOMAINS:{label:t("team_settings_directory_sync_scim_paywall_link_multiple_domains"),url:ee.I9},LINK_SELFHOSTED:{label:t("team_settings_directory_sync_scim_paywall_link_self_hosted"),url:ee.uR},LINK_CONFIDENTIAL:{label:t("team_settings_directory_sync_scim_paywall_link_confidential"),url:ee.FP},LINK_IDP_INTEGRATION:{label:t("team_settings_directory_sync_scim_paywall_link_idp"),url:ee.uC},LINK_ADMIN_HC:{label:t("team_settings_directory_sync_scim_paywall_link_help_center"),url:ee.Tx}};return(0,S.BX)("div",{sx:gv.CONTAINER,children:[(0,S.tZ)(o.Ct,{iconName:"PremiumOutlined",label:t("team_settings_directory_sync_scim_paywall_business_badge"),layout:"iconLeading",intensity:"quiet",mood:"brand",sx:{height:"16px"}}),(0,S.tZ)("h2",{sx:gv.MAIN_TITLE,children:t("team_settings_directory_sync_scim_paywall_title")}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:t("team_settings_directory_sync_scim_paywall_description")}),(0,S.BX)("div",{sx:gv.CONTENT_CARD,children:[mv||(mv=(0,S.tZ)(o.vY,{name:"ToolsOutlined",mood:"brand"})),(0,S.BX)("div",{children:[(0,S.tZ)("span",{sx:gv.CONTENT_CARD_FEATURE_TITLE,children:t("team_settings_directory_sync_scim_paywall_feature_selfhosted_title")}),(0,S.tZ)(o.nv,{sx:gv.CONTENT_CARD_FEATURE_DESC,children:t("team_settings_directory_sync_scim_paywall_feature_selfhosted_desc")})]})]}),(0,S.BX)("div",{sx:gv.CONTENT_CARD,children:[pv||(pv=(0,S.tZ)(o.vY,{name:"ToolsOutlined",mood:"brand"})),(0,S.BX)("div",{children:[(0,S.tZ)("div",{sx:{display:"flex",gap:"5px"},children:(0,S.tZ)("span",{sx:gv.CONTENT_CARD_FEATURE_TITLE,children:t("team_settings_directory_sync_scim_paywall_feature_confidential_title")})}),(0,S.tZ)(o.nv,{sx:gv.CONTENT_CARD_FEATURE_DESC,children:t("team_settings_directory_sync_scim_paywall_feature_confidential_desc")})]})]}),(0,S.BX)("div",{sx:gv.BUTTONS,children:[(0,S.tZ)($f.a,{dropdownItems:s,title:t("team_settings_directory_sync_scim_paywall_dropdown_learn_more")}),(0,S.tZ)(o.zx,{layout:"iconLeading",icon:"PremiumOutlined",mood:"brand",intensity:"catchy",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.UpgradeBusinessTier,clickOrigin:l.ClickOrigin.DirectorySyncPaywallPage})),e?(0,P.Yo)(`${ee.ub}?plan=business&subCode=${null!=a?a:""}&utm_source=button:upgrade_business_tier+click_origin:directory_sync_paywall_page+origin_page:tac/settings/directory_sync/paywall+origin_component:main_app`):(0,i.uX)(`${n.teamAccountChangePlanRoutePath}?plan=business`)},role:e?"link":"button",children:t("team_settings_directory_sync_scim_paywall_upgrade_business")})]})]})},yv=({isSCIMCapable:e,isTrialOrGracePeriod:t,showPaywall:n})=>{const{data:a,status:i}=(0,c.k)(Rb.y,"ssoProvisioning");if(i!==L.rq.Success)return null;const{ssoSolution:r}=a;if(r===Lb.WO.enum.confidentialSaml)throw new Error("Invalid state: cannot access SCIM if the team is using Confidential SSO until the enclave supports SCIM.");return!1===e&&n&&void 0!==t?(0,S.tZ)(hv,{isTrialOrGracePeriod:t}):null};var bv;const xv=({lastSyncUnix:e,version:t,loading:n,refreshData:a})=>{const{translate:i}=(0,p.Z)();return(0,S.tZ)(gS.R,{children:n?bv||(bv=(0,S.tZ)(o.ZX,{})):(0,S.BX)(o.kC,{flexDirection:"column",gap:"5px",children:[(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`${i("team_settings_directory_sync_last_sync")} ${e?(0,Rt.Z)(e).toLocaleString(navigator.language,{...Vt.qG.lll,timeZoneName:"short"}):i("team_settings_directory_sync_not_available")}`}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`${i("team_settings_encryption_service_version")} ${null!=t?t:i("team_settings_encryption_service_not_available")}`}),(0,S.BX)(o.nv,{as:"a",color:"ds.text.brand.standard",sx:{textDecoration:"none",fontWeight:"normal",display:"flex",flexDirection:"row"},onClick:()=>a(),children:[(0,S.tZ)(o.JO,{name:"ActionRefreshOutlined",sx:{marginRight:"5px"},color:"ds.text.brand.standard",size:"xsmall"}),i("team_settings_scim_sync_refresh")]})]})})},Sv=({loading:e,parentPath:t,teamSettings:n,esConfig:a,isScimCapable:r,disableSetupButton:s})=>{const l=(0,i.k6)(),{translate:c}=(0,p.Z)(),{teamDeviceConfigLoading:d,teamDeviceConfig:_}=RS({draft:!1,deviceAccessKey:a?.deviceAccessKey}),{teamDeviceLoading:u,teamDevice:m,refreshTeamDevice:g}=Gx(a?.deviceAccessKey),h=e||d,y=!n?.ssoServiceProviderUrl||h||s||!r,b=!_?.configProperties?.scimAuthToken;return(0,S.tZ)(re.Zbd,{children:(0,S.BX)(re.T5p,{as:re.aYP,gap:"8px",gridTemplateAreas:"'header button' 'description button' 'status status'",gridTemplateColumns:"1fr auto",sx:{bg:"white",border:"none"},children:[(0,S.tZ)(re.dDn,{as:o.X6,innerAs:"h3",size:"large",bold:!0,gridArea:"header",textStyle:"ds.title.section.medium",children:c("team_settings_directory_sync_scim_header")}),(0,S.tZ)(re.dDn,{gridArea:"description",as:o.nv,size:"small",textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:c("team_settings_directory_sync_scim_description")}),(0,S.tZ)(re.dDn,{gridArea:"button",children:(0,S.tZ)(VS.M,{id:"scimSetupButton",loading:h,disabled:y,neverShowTooltip:s,size:"large",onClick:()=>{l.push(`${t}${Av}`)},content:c("team_settings_es_sso_setup_configure_es_tooltip"),mood:b&&!y?"brand":"neutral",intensity:b&&!y?"catchy":"quiet",children:c(b?"team_settings_directory_sync_scim_set_up_button":"team_settings_button_edit_label")})}),_?.configProperties?.scimEnabled?(0,S.tZ)(re.dDn,{gridArea:"status",sx:{mt:"20px"},children:(0,S.tZ)(xv,{loading:u,version:m?.version,refreshData:g,lastSyncUnix:m?.lastActivityDateUnix})}):null]})})};var fv,vv,Cv;const Ev={GENERIC_ERROR:"_common_generic_error"},Zv=({config:e,esEndpoint:t})=>{var n;const{translate:a}=(0,p.Z)(),s=(0,i.k6)(),{teamDeviceConfigLoading:l,teamDeviceConfig:c,updateTeamDeviceConfig:d,refreshTeamDeviceConfig:_,loadTeamDeviceConfigErrorCode:u}=RS({draft:!1,deviceAccessKey:e?.deviceAccessKey}),[m,g]=(0,r.useState)(""),[h,y]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),[C,E]=(0,r.useState)(!1),Z=l;(0,r.useEffect)((()=>{const e=u;e&&e!==J_.B&&g(e)}),[u,a]);const D=()=>s.goBack(),T=async({values:e,resetForm:n})=>{x(!0),y(!1);const a={scimEnabled:e.encryptionServiceSync,teamDeviceUrl:null!=t?t:void 0};!f&&c?.configProperties?.scimAuthToken||(a.scimAuthToken=e.scimToken);const i=await d(a);v(!1),await _(),x(!1),i.success?i.data.encryptionServiceReloadingStatus===Xx.x.OK?(n({values:e}),D()):y(!0):g(i.error.code)},k={scimToken:(I=c?.configProperties?.scimAuthToken,null!=(A=I?.replace(/./g,"*"))?A:""),scimEndpoint:t?(0,uf.UQ)(t,"scim/2.0"):"",encryptionServiceSync:null!=(n=c?.configProperties?.scimEnabled)&&n};var I,A;const w=()=>{E(!1)};return(0,S.tZ)(On.J9,{onSubmit:async(e,t)=>{e.encryptionServiceSync?E(!0):await T({values:e,resetForm:t.resetForm})},enableReinitialize:!0,initialValues:k,children:({values:e,setFieldValue:t,isSubmitting:n,dirty:i,resetForm:r})=>{var s,d;return(0,S.BX)(On.l0,{autoComplete:"off",noValidate:!0,children:[(0,S.tZ)(zx.X,{dirty:i&&!b&&!h}),(0,S.BX)(re.Zbd,{children:[(0,S.tZ)(re.Ol2,{children:a("team_settings_directory_sync_scim_header")}),(0,S.BX)(re.aYP,{children:[(0,S.tZ)(o.ke,{mood:"brand",title:a("team_settings_directory_sync_scim_infobox")}),(0,S.BX)(re.T5p,{gridTemplateAreas:"'header button' 'desc button' 'inputField inputField'",gap:"8px",sx:{mt:"32px"},children:[(0,S.tZ)(re.dDn,{gridArea:"header",as:o.nv,innerAs:"label",htmlFor:"scimTokenInput",textStyle:"ds.title.block.medium",children:a("team_settings_directory_sync_scim_set_up_token_label")}),(0,S.tZ)(re.dDn,{as:o.zx,gridArea:"button",type:"button",alignSelf:"right",intensity:"quiet",mood:"brand",disabled:Z||n,onClick:()=>(e=>{v(!0),e("scimToken",(0,ux.Z)())})(t),sx:{height:"fit-content",width:"100%"},children:e.scimToken?a("team_settings_directory_sync_scim_set_up_reset_buttons"):a("team_settings_directory_sync_scim_set_up_generate_buttons")}),(0,S.tZ)(re.dDn,{gridArea:"desc",as:o.nv,size:"medium",sx:{marginBottom:"24px"},color:"ds.text.neutral.quiet",children:a("team_settings_directory_sync_scim_set_up_token_description")}),(0,S.tZ)(re.dDn,{gridArea:"inputField",children:(0,S.tZ)(On.gN,{name:"scimToken",children:({field:t})=>t.value?(0,S.tZ)(Rd.x,{inputValue:t.value,iconButtonProps:{disabled:Boolean(e.scimToken)&&!f||n},passwordInputProps:{disabled:Boolean(e.scimToken)&&!f||n,fullWidth:!0,readOnly:!0,...t,id:"scimTokenInput"}}):null})})]}),(0,S.BX)(re.T5p,{gridTemplateColumns:"auto",gap:"8px",children:[(0,S.tZ)(re.dDn,{as:o.nv,innerAs:"label",htmlFor:"endpointInput",sx:{marginTop:"32px"},textStyle:"ds.title.block.medium",children:a("team_settings_directory_sync_scim_set_up_endpoint_label")}),(0,S.tZ)(On.gN,{name:"scimEndpoint",children:({field:e})=>(0,S.tZ)(Rd.x,{inputValue:e.value,textInputProps:{fullWidth:!0,readOnly:!0,...e,id:"endpointInput"}})})]}),fv||(fv=(0,S.tZ)("hr",{})),(0,S.BX)(re.T5p,{gridTemplateAreas:"'label toggle' 'desc .'",gap:"8px",children:[(0,S.tZ)(re.dDn,{gridArea:"label",as:o.nv,innerAs:"label",htmlFor:"encryptionServiceSync",textStyle:"ds.title.block.medium",children:a("team_settings_directory_sync_scim_set_up_service_label")}),(0,S.tZ)(re.dDn,{gridArea:"desc",as:o.nv,color:"ds.text.neutral.quiet",children:a("team_settings_directory_sync_scim_set_up_service_description")}),(0,S.tZ)(re.dDn,{gridArea:"toggle",children:l?vv||(vv=(0,S.tZ)(o.ZX,{mood:"brand"})):(0,S.tZ)(o.ZD,{disabled:Z||n,id:"encryptionServiceSync",onChange:e=>((e,t)=>{t("encryptionServiceSync",e.currentTarget.checked)})(e,t),defaultChecked:null!=(s=c?.configProperties?.scimEnabled)&&s})})]})]}),(0,S.BX)(re.eWM,{children:[m?(0,S.tZ)(o.nv,{sx:{width:"40%",ml:0,mr:"auto"},textStyle:"ds.title.supporting.small",children:a(null!=(d=Ev?.[m])?d:Ev.GENERIC_ERROR)}):null,h?(0,S.tZ)(o.kC,{sx:{flexGrow:1,justifyContent:"center"},children:Cv||(Cv=(0,S.tZ)(Hx,{context:"SCIM"}))}):null,(0,S.tZ)(o.zx,{mood:"neutral",intensity:"quiet",size:"large",type:"button",onClick:D,children:a("team_settings_directory_sync_scim_set_up_button_cancel")}),(0,S.tZ)(o.zx,{type:"submit",disabled:Z||n||!i,children:a("team_settings_directory_sync_scim_set_up_button_save_changes")})]})]}),C?(0,S.tZ)(dx,{title:a("team_settings_directory_sync_scim_confirm_dialog_title"),body:a("team_settings_directory_sync_scim_confirm_dialog_body"),primaryActionLabel:a("team_settings_directory_sync_scim_confirm_dialog_primary_action_label"),onCancel:w,onConfirm:()=>(async({values:e,resetForm:t})=>{await T({values:e,resetForm:t}),E(!1)})({values:e,resetForm:r})}):null]})}})};var Dv;const Tv=({isScimEnabled:e})=>{const{translate:t}=(0,p.Z)(),{getInviteLinkDataForAdmin:n}=eu(),a=su(),i=(0,xe.o)(s_.G.WebOnboardingInviteLinkTacMigration),[l,c]=(0,r.useState)(!1),[d,_]=(0,r.useState)(!1);if(null==i)return null;const u=a.status===s.rq.Success?a:void 0;return(0,S.BX)(o.kC,{gap:"6",children:[i?(0,S.tZ)(uu,{isOpen:l,onClose:()=>{c(!1)}}):(0,S.tZ)(iu,{showSharingDialog:l,setShowSharingDialog:c}),d?i?(0,S.tZ)(lu,{isOpen:d,onCancel:()=>{_(!1)}}):(0,S.tZ)(nu,{showActivationDialog:d,setShowActivationDialog:_,setShowSharingDialog:c}):null,(0,S.tZ)(rd,{linkProps:{linkType:id.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/4404301553938?utm_source=extension"},heading:t("team_settings_encryption_service_scim_setup_guide_heading"),description:t("team_settings_encryption_service_scim_setup_guide_description"),linkText:t("team_settings_encryption_service_scim_setup_guide_link_text")}),e?(0,S.tZ)(rd,{linkProps:{linkType:id.ExternalLink},heading:t("team_settings_encryption_service_scim_invite_link_heading"),description:(0,S.BX)("div",{children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",sx:{mb:"8px"},children:t("team_settings_encryption_service_scim_invite_link_description_first")}),(0,S.BX)(o.nv,{as:"a",color:"ds.text.brand.standard",onClick:async e=>{e.preventDefault();const t=await n();(i?u?.enabled:t?.disabled||!t?.teamKey)?_(!0):c(!0)},href:"_blank",sx:{gap:"4px"},children:[(0,S.tZ)("span",{children:t("team_settings_encryption_service_scim_invite_link_copy")}),Dv||(Dv=(0,S.tZ)(o.JO,{name:"ActionCopyOutlined",size:"medium",color:"ds.text.brand.standard"}))]})]})}):null]})};var kv,Iv;const Av="/scim-settings",wv=({isScimEnabled:e,isScimCapable:t,teamSettings:n,updateTeamSettings:a,disableForm:s=!1,adSyncEnabled:c,isSsoConnectorSetup:d})=>{const[u,g]=(0,r.useState)(!1),{translate:h}=(0,p.Z)(),{path:y}=(0,i.$B)(),{esConfig:b,esConfigLoading:x,refreshEncryptionServiceConfig:f}=Ux(),v=(0,xe.o)(le.w.ItadminTacEncryptionserviceSSOmigrationReset),C=Boolean(v||!x&&d);(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSettingsDirectorySyncSelfHostedScim)}),[]);const E=pe({hasBillingAccess:!0});if(!E)return null;const{shouldShowBuyOrUpgradePaywall:Z,planType:D,isTrialOrGracePeriod:T}=E,k=Z&&D!==_.lD.Business;return(0,S.tZ)(kx,{title:"Self-hosted SCIM",children:(0,S.tZ)(Ba,{mainContent:(0,S.tZ)(re.T5p,{gridTemplateColumns:"auto",gridAutoRows:"min-content",gap:"32px",children:(0,S.BX)(i.rs,{children:[(0,S.BX)(i.AW,{exact:!0,path:y,children:[k?(0,S.tZ)(yv,{isSCIMCapable:t,isTrialOrGracePeriod:T,showPaywall:!0}):(0,S.BX)(S.HY,{children:[kv||(kv=(0,S.tZ)(Hx,{})),(0,S.tZ)(yv,{isSCIMCapable:t}),c?(0,S.tZ)(o.ke,{size:"medium",mood:"neutral",title:h("team_settings_encryption_service_scim_setup_ad_sync_warning_heading"),description:h("team_settings_encryption_service_scim_setup_ad_sync_warning_description")}):null,C?(0,S.tZ)(o.ke,{size:"medium",mood:"brand",title:h("team_settings_es_sso_migration_infobox_title"),description:(0,S.tZ)(o.nv,{children:h("team_settings_es_sso_migration_infobox_body")})}):null,(0,S.tZ)(xS,{parentPath:y,loading:x||null===t,esConfig:b,disableSetupButton:!1===t||s}),(0,S.tZ)(Sv,{teamSettings:n,parentPath:y,loading:x||null===t,esConfig:b,isScimCapable:!0===t,disableSetupButton:s})]}),u?(0,S.tZ)(J.c,{onDismiss:()=>g(!1)}):null]}),(0,S.tZ)(i.AW,{path:`${y}/encryption-service-settings`,children:x?Iv||(Iv=(0,S.tZ)(o.ZX,{mood:"brand"})):(0,S.tZ)(mS,{migratingFromSSOConnector:C,onSave:()=>f(),teamSettings:n,updateTeamSettings:a,esConfig:b,isSettingupScim:!0})}),(0,S.tZ)(i.AW,{path:`${y}${Av}`,children:(0,S.tZ)(Zv,{config:b,esEndpoint:n?.ssoServiceProviderUrl})})]})}),secondaryContent:k?(0,S.tZ)(Wf,{openContactDialog:()=>g(!0)}):(0,S.tZ)(Tv,{isScimEnabled:e})})})},Nv={title:"tac_settings_directory_sync_card_title_confidential_scim",redirectUrl:"confidential-scim",supportedFeatures:[{title:"tac_settings_directory_sync_card_cloud_based",description:"tac_settings_directory_sync_card_cloud_based_description",iconName:"SettingsOutlined"},{title:"tac_settings_directory_sync_card_confidential_automatic_syncs",description:"tac_settings_directory_sync_card_confidential_automatic_syncs_description",iconName:"ConfigureOutlined"},{title:"tac_settings_directory_sync_card_user_provisioning",description:"tac_settings_directory_sync_card_user_provisioning_description",iconName:"GroupOutlined"},{title:"tac_settings_directory_sync_card_sharing_group",description:"tac_settings_directory_sync_card_sharing_group_description",iconName:"FeedbackSuccessOutlined"}]},Ov={title:"tac_settings_directory_sync_card_title_selfhosted_scim",redirectUrl:"scim-provisioning",supportedFeatures:[{title:"tac_settings_directory_sync_card_selfhosted_scim_cloud_based",description:"tac_settings_directory_sync_card_selfhosted_scim_cloud_based_description",iconName:"AccountSettingsOutlined"},{title:"tac_settings_directory_sync_card_selfhosted_confidential_automatic_syncs",description:"tac_settings_directory_sync_card_selfhosted_confidential_automatic_syncs_description",iconName:"ConfigureOutlined"},{title:"tac_settings_directory_sync_card_selfhosted_user_provisioning",description:"tac_settings_directory_sync_card_selfhosted_user_provisioning_description",iconName:"GroupOutlined"},{title:"tac_settings_directory_sync_card_selfhosted_sharing_group",description:"tac_settings_directory_sync_card_selfhosted_sharing_group_description",iconName:"FeedbackSuccessOutlined"}]},Rv={title:"tac_settings_directory_sync_card_title_ad_sync",redirectUrl:"active-directory",supportedFeatures:[{title:"tac_settings_directory_sync_card_ad_sync_cloud_based",description:"tac_settings_directory_sync_card_ad_sync_cloud_based_description",iconName:"AccountSettingsOutlined"},{title:"tac_settings_directory_sync_card_automatic_ad_sync_syncs",description:"tac_settings_directory_sync_card_automatic_ad_sync_syncs_description",iconName:"ConfigureOutlined"},{title:"tac_settings_directory_sync_card_ad_sync_user_provisioning",description:"tac_settings_directory_sync_card_ad_sync_user_provisioning_description",iconName:"GroupOutlined"},{title:"tac_settings_directory_sync_card_ad_sync_sharing_group",description:"tac_settings_directory_sync_card_ad_sync_sharing_group_description",iconName:"FeedbackSuccessOutlined"}]},Lv=({isNitroSSOActivated:e,isSelfhostedSSOActivated:t})=>{const{translate:n}=(0,p.Z)(),{routes:a}=(0,lo.Xo)();return e||t?(0,S.tZ)(o.ke,{title:n(e?"tac_settings_directory_sync_card_disabled_selfhosted_incompatible":"tac_settings_directory_sync_card_disabled_confidential_incompatible"),size:"large"}):(0,S.tZ)(o.ke,{title:n("tac_settings_directory_sync_card_disabled_confidential_not_activated"),size:"large",actions:[(0,S.tZ)(o.zx,{as:i.rU,to:a.teamSettingsSsoConfidential,size:"small",children:n("tac_settings_directory_sync_card_disabled_confidential_not_activated_button")},"enable-confidential-sso")]})},Mv="tac_settings_directory_sync_card_button_setup",Bv="tac_settings_directory_sync_card_button_edit";let Pv=function(e){return e.ConfidentialScim="confidential-scim-cta",e.SelfhostedScim="selfhosted-scim-cta",e.AdSyncScim="adsync-scim-cta",e}({});const Uv=({ssoSolution:e,ssoStatus:t,provisioningSolution:n,isLoading:a=!1})=>{const{translate:s}=(0,p.Z)(),c=(0,cg.S)(),d=!!c?.scim.enabled,_=pe({hasBillingAccess:!0}),u=!!_?.isTrialOrGracePeriod,g=(0,i.k6)(),{routes:h}=(0,i.Xo)(),y=Bl(),[b,x]=(0,r.useState)(!1),f=n!==Jx.Hh.enum.none,v=e===Lb.WO.enum.ssoConnector,C=y?"tac_settings_directory_sync_entrylevel_header_helper":"tac_settings_directory_sync_header_helper";return(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSettingsDirectorySync)}),[]),a||null===c||null===_?(0,S.tZ)(re.T5p,{justifyItems:"center",children:(0,S.tZ)(o.ZX,{size:75,sx:{marginTop:"20vh"}})}):(0,S.BX)("div",{sx:{margin:"32px",display:"flex",gap:"32px",flexDirection:"column"},children:[(0,S.BX)("div",{children:[(0,S.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",sx:{marginBottom:"16px"},children:s("tac_settings_directory_sync_header")}),(0,S.tZ)(o.nv,{sx:{marginBottom:"8px"},children:s(C)}),(0,S.tZ)(ad,{href:"https://support.dashlane.com/hc/articles/4404301553938?utm_source=extension",children:s("tac_settings_directory_sync_header_link")})]}),f||v||y?null:(0,S.tZ)(Lv,{isNitroSSOActivated:e===Lb.WO.enum.confidentialSaml&&t===Lb.pI.enum.enabled,isSelfhostedSSOActivated:e===Lb.WO.enum.selfHostedSaml&&t===Lb.pI.enum.enabled}),y?(0,S.BX)(re.T5p,{fullWidth:!0,gridTemplateColumns:"1fr 1fr 0.5fr",gap:"24px",children:[(0,S.tZ)(Bf,{setBusinessPlanBadge:!0,...Rv,selected:n===Jx.Hh.enum.adSync,featureCardStatus:"NOT_STARTED",buttonLabel:s("team_upgrade_to_business"),onCtaClick:()=>{g.push(`${h.teamAccountChangePlanRoutePath}?plan=business`)}}),(0,S.tZ)(hv,{isTrialOrGracePeriod:u}),(0,S.tZ)("div",{sx:{height:"252px"},children:(0,S.tZ)(Wf,{openContactDialog:()=>x(!0)})}),b?(0,S.tZ)(J.c,{onDismiss:()=>x(!1)}):null]}):(0,S.tZ)(re.T5p,{fullWidth:!0,gridTemplateColumns:"repeat(3, 1fr)",gap:"24px",children:d?(0,S.BX)(S.HY,{children:[(0,S.tZ)(Bf,{optionNumber:1,...Nv,selected:n===Jx.Hh.enum.confidentialScim,buttonLabel:s(n===Jx.Hh.enum.confidentialScim?Bv:Mv),disabled:!(e===Lb.WO.enum.confidentialSaml&&t===Lb.pI.enum.enabled)||n===Jx.Hh.enum.selfHostedScim||n===Jx.Hh.enum.adSync,featureCardStatus:n===Jx.Hh.enum.confidentialScim?"ACTIVATED":"NOT_STARTED",onCtaClick:()=>{(0,m.Kz)(new l.UserSetupConfidentialScimEvent({scimSetupStep:l.ScimSetupStep.ClickSetUp}))},ctaDataTestId:Pv.ConfidentialScim}),(0,S.tZ)(Bf,{optionNumber:2,...Ov,selected:n===Jx.Hh.enum.selfHostedScim,buttonLabel:s(n===Jx.Hh.enum.selfHostedScim?Bv:Mv),featureCardStatus:n===Jx.Hh.enum.selfHostedScim?"ACTIVATED":"NOT_STARTED",disabled:e===Lb.WO.enum.confidentialSaml||e===Lb.WO.enum.ssoConnector||n===Jx.Hh.enum.confidentialScim||n===Jx.Hh.enum.adSync,ctaDataTestId:Pv.SelfhostedScim}),(0,S.tZ)(Bf,{optionNumber:3,...Rv,selected:n===Jx.Hh.enum.adSync,featureCardStatus:n===Jx.Hh.enum.adSync?"ACTIVATED":"NOT_STARTED",buttonLabel:s(n===Jx.Hh.enum.adSync?Bv:Mv),disabled:n===Jx.Hh.enum.confidentialScim||n===Jx.Hh.enum.selfHostedScim,ctaDataTestId:Pv.AdSyncScim})]}):(0,S.BX)(S.HY,{children:[(0,S.tZ)(Bf,{optionNumber:1,...Rv,selected:n===Jx.Hh.enum.adSync,featureCardStatus:n===Jx.Hh.enum.adSync?"ACTIVATED":"NOT_STARTED",buttonLabel:s(n===Jx.Hh.enum.adSync?Bv:Mv),disabled:n===Jx.Hh.enum.confidentialScim||n===Jx.Hh.enum.selfHostedScim,ctaDataTestId:"adsync-scim-cta"}),(0,S.tZ)(hv,{isTrialOrGracePeriod:u})]})})]})},Xv=({isTokenGenerated:e})=>{const[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1),{translate:s}=(0,p.Z)(),{generateScimToken:c}=(0,q.u)(Nf.m),d=(0,r.useCallback)((async()=>{n(!0),await c(void 0),(0,m.Kz)(new l.UserSetupConfidentialScimEvent({scimSetupStep:e?l.ScimSetupStep.ReGenerateToken:l.ScimSetupStep.GenerateScimToken})),n(!1)}),[c,e]);return(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:s("tac_settings_confidential_scim_generate_token_header")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"24px"},children:s("tac_settings_confidential_scim_generate_token_header_helper")}),(0,S.tZ)(o.zx,{intensity:e?"quiet":"catchy",mood:"brand",isLoading:!e&&t,onClick:e?()=>i(!0):d,children:s(e?"tac_settings_confidential_scim_regenerate_token_button":"tac_settings_confidential_scim_generate_token_button")}),(0,S.tZ)(o.Vq,{actions:{primary:{children:s("tac_settings_confidential_scim_regenerate_token_dialog_primary_action"),onClick:()=>{d(),i(!1)},isLoading:t},secondary:{children:s("tac_settings_confidential_scim_regenerate_token_dialog_secondary_action"),onClick:()=>i(!1)}},closeActionLabel:"Close",onClose:()=>i(!1),title:s("tac_settings_confidential_scim_regenerate_token_dialog_title"),isOpen:a,children:(0,S.tZ)(o.nv,{children:s("tac_settings_confidential_scim_regenerate_token_dialog")})})]})},zv="input_copy_button",qv="input_copied_button_feedback",jv=({scimApiToken:e,scimEndpoint:t})=>{const{translate:n}=(0,p.Z)(),[a,i]=(0,r.useState)(!1),[s,c]=(0,r.useState)(!1),d=async(e,t)=>{t&&(await navigator.clipboard.writeText(t),"token"===e?(i(!0),setTimeout((()=>i(!1)),2e3)):(c(!0),setTimeout((()=>c(!1)),2e3)))};return(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:n("tac_settings_confidential_scim_copy_token_header")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"24px"},children:n("tac_settings_confidential_scim_copy_token_header_helper")}),(0,S.tZ)(o.ZI,{"data-testid":"scim-token-field",label:n("tac_settings_confidential_scim_copy_token_field_token_label"),value:null!=e?e:"",disabled:!e,readOnly:!!e,toggleVisibilityLabel:{hide:n("_common_password_hide_label"),show:n("_common_password_show_label")},sx:{marginBottom:"16px"},actions:[{iconName:"ActionCopyOutlined",label:n(a?qv:zv),key:"copy-token",onClick:async()=>{await d("token",null!=e?e:""),(0,m.Kz)(new l.UserSetupConfidentialScimEvent({scimSetupStep:l.ScimSetupStep.CopyApiToken}))}}]}),(0,S.tZ)(o.qo,{"data-testid":"scim-endpoint-field",value:null!=t?t:"",label:n("tac_settings_confidential_scim_copy_token_field_endpoint_label"),disabled:!t,readOnly:!!t,actions:[{iconName:"ActionCopyOutlined",key:"copy-endpoint",label:n(s?qv:zv),onClick:async()=>{(0,m.Kz)(new l.UserSetupConfidentialScimEvent({scimSetupStep:l.ScimSetupStep.CopyEndpointLink})),await d("endpoint",null!=t?t:"")}}]})]})},Fv=({active:e})=>{const t=(0,r.useRef)(!1),{translate:n}=(0,p.Z)(),{updateScimConfiguration:a}=(0,q.u)(Nf.m),{showToast:i}=(0,o.pm)();return(0,r.useEffect)((()=>(t.current&&i({description:n(e?"tac_settings_activate_automatic_provisioning":"tac_settings_deactivate_automatic_provisioning"),closeActionLabel:"close"}),()=>{t.current=!0})),[e]),(0,S.BX)(re.T5p,{gridTemplateAreas:"'title toggle' 'description toggle'",alignItems:"center",children:[(0,S.tZ)(re.dDn,{gridArea:"title",as:o.X6,id:"userProvisioningActivation",innerAs:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:n("tac_settings_confidential_scim_activate_header")}),(0,S.tZ)(re.dDn,{gridArea:"description",as:o.nv,textStyle:"ds.body.standard.regular",children:n("tac_settings_confidential_scim_activate_header_helper")}),(0,S.tZ)(re.dDn,{justifySelf:"end",gridArea:"toggle",as:o.ZD,"aria-labelledby":"userProvisioningActivation",sx:{marginLeft:"24px"},onChange:()=>{(0,m.Kz)(new l.UserSetupConfidentialScimEvent({scimSetupStep:e?l.ScimSetupStep.DeactivateDirectorySync:l.ScimSetupStep.ActivateDirectorySync})),a({active:!e})},checked:e})]})},Gv=({scimEndpoint:e,scimConfiguration:t})=>{const{translate:n}=(0,p.Z)();return(0,S.BX)(o.kC,{gap:"32px",flexDirection:"column",as:o.Zb,sx:{padding:"32px"},children:[(0,S.tZ)(o.Ct,{mood:"neutral",intensity:"quiet",label:n("tac_settings_confidential_scim_user_provisioning_badge"),sx:{marginBottom:"calc(8px - 32px)"}}),(0,S.tZ)("div",{children:(0,S.tZ)(Xv,{isTokenGenerated:!!t.token})}),(0,S.tZ)("div",{children:(0,S.tZ)(jv,{scimEndpoint:e?.endpoint,scimApiToken:t.token})}),(0,S.tZ)("div",{children:(0,S.tZ)(Fv,{active:t.active})})]})};var Vv,Hv,Wv;const $v={SEATS_REVIEW_SECTION:{display:"flex",flexDirection:"row",gap:"24px",marginBottom:"24px"},SEATS_REVIEW_ITEM:{width:"120px",display:"flex",flexDirection:"column",gap:"4px"},VERTICAL_DIVIDER:{borderLeft:"1px solid ds.border.neutral.quiet.idle",height:"48px"},BUTTON_SECTION:{display:"flex",flexDirection:"row",gap:"8px"}},Kv=({onClickBuySeats:e})=>{const{translate:t}=(0,p.Z)(),{routes:n}=(0,i.Xo)(),{data:a}=(0,c.k)(d.o,"getTeamSeats"),r=(0,X.C)(),s=(0,me.U)();if(!r)return null;const _=`${ee.ub}?plan=business&subCode=${null!=s?s:""}`;return(0,S.BX)(o.Zb,{sx:{display:"flex",flexDirection:"column",gap:"8px",padding:"32px"},children:[(0,S.tZ)(o.Ct,{mood:"brand",intensity:"quiet",layout:"iconLeading",iconName:"PremiumOutlined",label:t("tac_settings_confidential_scim_review_seats_card_pro_tip_badge")}),(0,S.BX)("div",{children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:t("tac_settings_confidential_scim_review_seats_card_header")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"24px"},children:t("tac_settings_confidential_scim_review_seats_card_description")}),(0,S.BX)("div",{sx:$v.SEATS_REVIEW_SECTION,children:[(0,S.BX)("div",{sx:$v.SEATS_REVIEW_ITEM,children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("tac_settings_confidential_scim_review_seats_card_total_seats")}),(0,S.tZ)(o.nv,{textStyle:"ds.specialty.monospace.small",color:"ds.text.neutral.standard",children:a?a.paid:Vv||(Vv=(0,S.tZ)(o.ZX,{}))})]}),(0,S.tZ)("div",{sx:$v.VERTICAL_DIVIDER}),(0,S.BX)("div",{sx:$v.SEATS_REVIEW_ITEM,children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("tac_settings_confidential_scim_review_seats_card_occupied")}),(0,S.tZ)(o.nv,{textStyle:"ds.specialty.monospace.small",color:"ds.text.positive.quiet",children:a?a.paid-a.remaining:Hv||(Hv=(0,S.tZ)(o.ZX,{}))})]}),(0,S.tZ)("div",{sx:$v.VERTICAL_DIVIDER}),(0,S.BX)("div",{sx:$v.SEATS_REVIEW_ITEM,children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("tac_settings_confidential_scim_review_seats_card_free")}),(0,S.tZ)(o.nv,{textStyle:"ds.specialty.monospace.small",color:"ds.text.positive.quiet",children:a?a.remaining:Wv||(Wv=(0,S.tZ)(o.ZX,{}))})]})]}),(0,S.BX)("div",{sx:$v.BUTTON_SECTION,children:[r.isFreeTrial?(0,S.tZ)(o.zx,{mood:"brand",intensity:"quiet",layout:"labelOnly",role:"link",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuyDashlane,clickOrigin:l.ClickOrigin.ProTip})),(0,P.Yo)(_)},children:t("team_buy_dashlane")}):(0,S.tZ)(o.zx,{mood:"brand",intensity:"quiet",layout:"labelOnly",onClick:e,children:t("tac_settings_confidential_scim_review_seats_card_buy_seats_button")}),(0,S.tZ)(cm.rU,{to:n.teamAccountRoutePath,children:(0,S.tZ)(o.zx,{mood:"brand",intensity:"supershy",layout:"labelOnly",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.ReviewSubscription,clickOrigin:l.ClickOrigin.ProTip}))},children:t("tac_settings_confidential_scim_review_seats_card_review_subscription_button")})})]})]})]})},Yv=()=>{var e;const{translate:t}=(0,p.Z)(),{showToast:n}=(0,o.pm)(),[a,i]=(0,r.useState)(!1),{updateGroupProvisioningConfiguration:s}=(0,q.u)(Rb.y),{groupProvisioningConfiguration:d}=(()=>{const{data:e,status:t}=(0,c.k)(Rb.y,"getGroupProvisioningConfiguration");return t!==L.rq.Success?{groupProvisioningConfiguration:null}:{groupProvisioningConfiguration:e}})();return null===d?null:(0,S.BX)(o.Zb,{sx:{display:"flex",flexDirection:"column",gap:"32px",padding:"32px"},children:[(0,S.BX)("div",{children:[(0,S.tZ)(o.Ct,{mood:"neutral",intensity:"quiet",label:t("tac_settings_confidential_scim_group_provisioning_badge"),sx:{marginBottom:"8px"}}),(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:t("tac_settings_confidential_scim_group_provisioning_header")}),(0,S.tZ)(o.nv,{sx:{marginBottom:"24px"},children:t("tac_settings_confidential_scim_group_provisioning_description")}),(0,S.tZ)(o.Qj,{href:"https://support.dashlane.com/hc/articles/10992671925778?utm_medium=misc&utm_source=dashlane_admin_console#scim",isExternal:!0,onClick:()=>{(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.SeeGroupProvisioningSetupGuide}))},children:t("tac_settings_confidential_scim_group_provisioning_support_link")})]}),(0,S.BX)("div",{sx:{display:"flex",gap:"24px",flexDirection:"row",alignItems:"center"},children:[(0,S.BX)("div",{children:[(0,S.tZ)(o.X6,{id:"groupProvisioningActivation",as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:t("tac_settings_confidential_scim_group_provisioning_step_2_header")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:t("tac_settings_confidential_scim_group_provisioning_step_2_description")})]}),(0,S.tZ)(o.ZD,{"aria-labelledby":"groupProvisioningActivation",checked:null!=(e=d.groupProvisioningActivated)&&e,onChange:()=>(async()=>{var e;i(!0),"failure"===(await s({groupProvisioningActivated:null==(e=!d.groupProvisioningActivated)||e})).tag?n({mood:"danger",description:t("tac_settings_confidential_scim_group_provisioning_generic_error")}):(n({mood:"brand",description:t(d.groupProvisioningActivated?"tac_settings_confidential_scim_group_provisioning_toast_disabled":"tac_settings_confidential_scim_group_provisioning_toast_enabled")}),d.groupProvisioningActivated||(0,m.Kz)(new l.UserSetupConfidentialScimEvent({scimSetupStep:l.ScimSetupStep.ActivateGroupSync}))),i(!1)})(),readOnly:a})]})]})};var Qv;const Jv=()=>{var e,t;const{translate:n}=(0,p.Z)(),[a,i]=(0,r.useState)(),[s,o]=(0,r.useState)(),[c,d]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[y,b]=(0,r.useState)(),[x,f]=(0,r.useState)(),[v,C]=(0,r.useState)(!1),{scimConfiguration:E,scimEndpoint:Z}=(0,Po.Y)(Nf.m,{scimConfiguration:{},scimEndpoint:{}},[]),D=(0,u.s)(),T=(0,xe.o)(Ka.P.ComputePlanPricingMigration),k=(e,t)=>{b(e),f(t),d(!1),h(!0)},I=()=>{D?.billingType===_.qo.Invoice?C(!0):d(!0),(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuySeats,clickOrigin:l.ClickOrigin.ProTip}))};if((0,r.useEffect)((()=>{E.status===L.rq.Success&&E.data&&i(E.data)}),[E.data?.active,E.data?.token]),(0,r.useEffect)((()=>{Z.status===L.rq.Success&&Z.data&&o(Z.data)}),[Z.data?.endpoint]),(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSettingsDirectorySyncConfidentialScim)}),[]),!D)return null;const{lastBillingDateUnix:A,nextBillingDetails:w,spaceTier:N,seatsNumber:O,usersToBeRenewedCount:R}=D;return(0,S.BX)(S.HY,{children:[g?null:(0,S.tZ)(kx,{title:n("tac_settings_confidential_scim_header"),paragraph:n("tac_settings_confidential_scim_header_helper"),children:(0,S.tZ)(Ba,{sx:{padding:"0 32px"},fullWidth:!0,mainContent:()=>(0,S.tZ)("div",{sx:{display:"flex",flexDirection:"column",gap:"24px"},children:a?(0,S.BX)(S.HY,{children:[e||(e=(0,S.tZ)(Gv,{scimConfiguration:a,scimEndpoint:s})),a.active?t||(t=(0,S.tZ)(Kv,{onClickBuySeats:I})):null,Qv||(Qv=(0,S.tZ)(Yv,{}))]}):null}),secondaryContent:(0,S.tZ)(rd,{heading:n("tac_settings_confidential_scim_help_card_header"),description:n("tac_settings_confidential_scim_help_card_description"),linkProps:{linkType:id.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/360013149040",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.SeeSetupGuide,clickOrigin:l.ClickOrigin.NeedHelp}))}},linkText:n("tac_settings_confidential_scim_help_card_link")})})}),v?(0,S.tZ)(wi,{openUpgradeDialog:()=>{d(!0),C(!1)},handleClose:()=>C(!1)}):null,c?T?(0,S.tZ)(qi,{numberOfCurrentPaidSlots:O,onUpgradeSuccess:k,onClose:()=>d(!1)}):(0,S.tZ)(Ci,{nextBillingDetails:w,numberOfCurrentPaidSlots:O,numberOfCurrentUsedSlots:R,onUpgradeSuccess:k,onRequestClose:()=>d(!1),planTier:N},A):null,g&&y&&x?(0,S.tZ)(Zr,{lastAdditionalSeatsDetails:y,lastBillingDetails:x,onNavigateBack:()=>{h(!1),b(void 0),f(void 0)}}):null]})},eC="/scim-provisioning",tC="/confidential-scim",nC="/active-directory",aC=()=>{var e,t;const{path:n}=(0,i.$B)(),{esConfig:a,esConfigLoading:r}=Ux(),{teamDeviceConfig:s}=RS({draft:!1,deviceAccessKey:a?.deviceAccessKey}),{teamId:l}=(0,be.fV)(),{teamSettings:d={},teamSettingsLoading:_,updateTeamSettings:u,teamCapabilities:m}=ye(l),p=(0,gl.B)(),g=!_&&d.activeDirectorySyncType,h=s?.configProperties.scimEnabled,y=null!=(e=m?.activeDirectorySync.enabled)?e:null,{data:b}=(0,c.k)(Rb.y,"ssoProvisioning"),x=b?.ssoSolution,{data:f,status:v}=(0,c.k)(Nf.m,"provisioningSolution"),C=x===Lb.WO.enum.confidentialSaml||x===Lb.WO.enum.ssoConnector||f===Jx.Hh.enum.confidentialScim||f===Jx.Hh.enum.adSync,E=x===Lb.WO.enum.selfHostedSaml||x===Lb.WO.enum.ssoConnector||f===Jx.Hh.enum.selfHostedScim||f===Jx.Hh.enum.adSync,Z=h&&!g||!y,D=x===Lb.WO.enum.confidentialSaml&&b?.ssoStatus===Lb.pI.enum.incomplete||g&&!h,T=_||r||!p||void 0===x||v===L.rq.Loading,k=x===Lb.WO.enum.ssoConnector;return(0,S.tZ)(re.T5p,{gridTemplateColumns:"auto",gridTemplateRows:"auto 1fr",fullWidth:!0,sx:{height:"100%"},children:T?(0,S.tZ)(re.T5p,{justifyItems:"center",children:(0,S.tZ)(o.ZX,{size:75,sx:{marginTop:"20vh"}})}):(0,S.BX)(i.rs,{children:[(0,S.tZ)(i.Vy,{exact:!0,path:n,component:Uv,permission:e=>e.adminAccess.hasFullAccess||e.adminAccess.hasBillingAccess,additionalProps:{ssoSolution:x,ssoStatus:b?.ssoStatus,provisioningSolution:f,isLoading:T}}),(0,S.tZ)(i.Vy,{exact:!0,path:`${n}${tC}`,component:Jv,redirectPath:n,permission:e=>!E&&(e.adminAccess.hasFullAccess||e.adminAccess.hasBillingAccess)}),(0,S.tZ)(i.Vy,{path:`${n}${eC}`,component:wv,additionalProps:{isScimEnabled:null!=h?h:null,isScimCapable:null!=(t=m?.scim.enabled)?t:null,teamSettings:d,updateTeamSettings:u,disableForm:D,adSyncEnabled:g,isSsoConnectorSetup:k},permission:e=>!C&&(e.adminAccess.hasFullAccess||e.adminAccess.hasBillingAccess),redirectPath:n}),(0,S.tZ)(i.Vy,{path:`${n}${nC}`,component:uv,additionalProps:{isAdSyncCapable:y,disableForm:Z,adSyncEnabled:g,accountInfo:p},reducer:ov.ZP})]})})};var iC=n(37116);const rC=()=>{const{translate:e}=(0,p.Z)();return(0,S.BX)("div",{sx:{padding:"24px",borderColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"32px"},children:[(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",rowGap:"4px"},children:[(0,S.tZ)(o.Ct,{label:e("team_integrations_mass_deployment_badge"),mood:"brand",intensity:"quiet"}),(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e("team_integrations_mass_deployment_title")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:e("team_integrations_mass_deployment_description")})]}),(0,S.tZ)(o.Qj,{href:"https://support.dashlane.com/hc/articles/16995560527250-Mass-deploy-the-Dashlane-browser-extension",isExternal:!0,children:e("team_integrations_mass_deployment_link")})]})};var sC=n(47154);const oC=({containerTitle:e,containerDescription:t,isMainButtonDisabled:n=!1,disabledReason:a,mainButtonLink:i,badgeLabel:r,isCapable:s,children:l})=>(0,S.BX)("div",{sx:{padding:"24px",borderColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"32px"},children:[(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,S.tZ)(o.Ct,{label:r,mood:i?"brand":"neutral",intensity:"quiet"}),(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e}),!!t&&(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:t})]}),l,!!n&&!!a&&s&&(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",sx:{margin:"-28px 0px 0px 12px"},children:a})]}),lC=({subCardDescription:e,subCardHeader:t,image:n,externalLink:a,externalLinkTitle:r,externalLinkOnClick:s,isMainButtonDisabled:l=!1,mainButtonTitle:c,mainButtonLink:d,mainButtonOnClick:_,secondButtonTitle:u,secondButtonLink:m,upgradeButtonLink:g,isCapable:h})=>{const{translate:y}=(0,p.Z)();return(0,S.BX)("div",{sx:{display:"flex",flex:1,backgroundColor:"ds.background.alternate",padding:"24px",borderRadius:"8px"},children:[(0,S.BX)("div",{sx:{display:"flex",flex:n?3:1,flexDirection:"column",justifyContent:"center",gap:"10px"},children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:t}),e||a||d||g?(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"24px"},children:[e?(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:e}):null,!!a&&(0,S.tZ)(o.Qj,{href:a,isExternal:!0,onClick:s,children:r}),h&&d?(0,S.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,S.tZ)(o.zx,{as:i.rU,to:d,disabled:l,onClick:_,children:c}),m?(0,S.tZ)(o.zx,{as:i.rU,to:m,mood:"neutral",intensity:"quiet",children:u}):null]}):g&&(0,S.tZ)(o.zx,{as:i.rU,to:g,layout:"iconLeading",icon:"PremiumOutlined",mood:"brand",intensity:"catchy",children:y("team_settings_directory_sync_scim_paywall_upgrade_business")})]}):null]}),n&&(0,S.tZ)("div",{sx:{display:"flex",justifyContent:"end",flex:1},children:(0,S.tZ)("img",{role:"presentation",alt:"",src:n,sx:{objectFit:"contain",width:"100%",height:"auto",maxWidth:"200px"}})})]})},cC=({containerTitle:e,containerDescription:t,subCardDescription:n,subCardHeader:a,image:i,externalLink:r,externalLinkTitle:s,externalLinkOnClick:o,isMainButtonDisabled:l=!1,disabledReason:c,mainButtonTitle:d,mainButtonLink:_,mainButtonOnClick:u,secondButtonTitle:m,secondButtonLink:p,badgeLabel:g,upgradeButtonLink:h,isCapable:y})=>(0,S.tZ)(oC,{containerTitle:e,containerDescription:t,isMainButtonDisabled:l,disabledReason:c,mainButtonLink:_,badgeLabel:g,isCapable:y,children:(0,S.tZ)(lC,{subCardDescription:n,subCardHeader:a,image:i,externalLink:r,externalLinkTitle:s,externalLinkOnClick:o,isMainButtonDisabled:l,mainButtonTitle:d,mainButtonLink:_,mainButtonOnClick:u,secondButtonTitle:m,secondButtonLink:p,upgradeButtonLink:h,isCapable:y})});var dC;const _C=({containerTitle:e,subCardTitle:t,editButtonLink:n,badgeLabel:a})=>{const{translate:r}=(0,p.Z)();return(0,S.BX)("div",{sx:{padding:"24px",borderColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"32px"},children:[(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,S.tZ)(o.Ct,{label:a,mood:"brand",intensity:"quiet"}),(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e})]}),(0,S.BX)("div",{sx:{display:"flex",justifyContent:"space-between",backgroundColor:"ds.background.alternate",padding:"24px",borderRadius:"8px"},children:[(0,S.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:t}),dC||(dC=(0,S.tZ)(o.Ct,{label:"Enabled",mood:"positive",intensity:"catchy",layout:"labelOnly"}))]}),(0,S.tZ)(o.zx,{as:i.rU,to:n,mood:"brand",intensity:"quiet",children:r("team_integrations_edit_button")})]})]})};var uC;const mC="team_integrations_siem_title",pC="team_integrations_siem_badge",gC=({active:e,ssoSolution:t})=>{const{translate:n}=(0,p.Z)(),{routes:r}=(0,i.Xo)(),s=(0,xe.o)("setup_rollout_splunk_integration_prod"),c=t===Lb.WO.enum.none||t===Lb.WO.enum.confidentialSaml,d=s&&c,u=(0,X.C)()?.spaceTier===_.lD.Business,g=`${r.teamIntegrationsRoutePath}${a.Nr.SIEM}`;return d?e?(0,S.tZ)(_C,{containerTitle:n(mC),subCardTitle:(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:n("team_integrations_splunk_active_title")}),badgeLabel:n(pC),editButtonLink:g}):(0,S.tZ)(cC,{containerTitle:n(mC),subCardHeader:(0,S.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:n("team_integrations_splunk_non_active_title")}),(0,S.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"4px"},children:[uC||(uC=(0,S.tZ)(o.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.standard"})),(0,S.BX)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.helper.regular",children:["5 ",n("team_integrations_time")]})]})]}),subCardDescription:n("team_integrations_splunk_non_active_subtitle"),badgeLabel:n(pC),externalLink:"https://support.dashlane.com/hc/articles/17674635955730",externalLinkTitle:n("team_integrations_splunk_non_active_link"),externalLinkOnClick:()=>(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.LearnAboutSplunkIntegration})),image:sC,mainButtonTitle:n("team_integrations_splunk_non_active_main_button"),mainButtonLink:g,mainButtonOnClick:()=>(0,m.Kz)(new l.UserClickEvent({button:l.Button.SetUp,clickOrigin:l.ClickOrigin.SplunkIntegration})),isCapable:u,upgradeButtonLink:`${r.teamAccountChangePlanRoutePath}?plan=business`}):(0,S.tZ)(cC,{containerTitle:n(mC),subCardHeader:(0,S.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:n("team_integrations_siem_subtitle")}),s?null:(0,S.tZ)(o.Ct,{label:n("team_integrations_siem_coming_soon"),layout:"labelOnly",intensity:"catchy",mood:"brand"})]}),subCardDescription:n(s?"team_integrations_siem_unavailable_subdescription":"team_integrations_siem_subdescription"),badgeLabel:n(pC),isCapable:!1})};var hC,yC;const bC=()=>{const{translate:e}=(0,p.Z)();return(0,S.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("team_integrations_sso_subcard_title")}),(0,S.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"4px"},children:[hC||(hC=(0,S.tZ)(o.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.standard"})),(0,S.BX)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.helper.regular",children:["10 ",e("team_integrations_time")]})]})]})},xC=({isCapable:e,provisioningSolution:t})=>{const{routes:n}=(0,i.Xo)(),{translate:r}=(0,p.Z)();return(0,S.tZ)(cC,{containerTitle:r("team_integrations_sso_card_title"),subCardHeader:yC||(yC=(0,S.tZ)(bC,{})),subCardDescription:r("team_integrations_sso_subcard_description"),image:Yr,externalLink:"https://support.dashlane.com/hc/articles/10992671925778",externalLinkTitle:r("team_integrations_mass_deployment_link"),isMainButtonDisabled:t===Jx.Hh.enum.selfHostedScim,disabledReason:r("team_integrations_sso_disabled"),mainButtonTitle:r("team_integrations_scim_main_button"),mainButtonLink:`${n.teamIntegrationsRoutePath}${a.Nr.SSO}${iv}`,secondButtonTitle:r("team_integrations_scim_second_button"),secondButtonLink:`${n.teamIntegrationsRoutePath}${a.Nr.SSO}`,badgeLabel:r("team_integrations_sso_badge"),upgradeButtonLink:`${n.teamAccountChangePlanRoutePath}?plan=business`,isCapable:e})},SC=({isCapable:e,provisioningSolution:t,ssoSolution:n,ssoStatus:r})=>{const{translate:s}=(0,p.Z)(),{routes:l}=(0,i.Xo)(),c=n===Lb.WO.enum.confidentialSaml||t!==Jx.Hh.enum.selfHostedScim,d=n===Lb.WO.enum.selfHostedSaml||t!==Jx.Hh.enum.confidentialScim;return r===Lb.pI.enum.enabled?(0,S.tZ)(_C,{containerTitle:s("team_integrations_sso_title"),subCardTitle:(0,S.tZ)(o.nv,{children:n===Lb.WO.enum.confidentialSaml?s("team_integrations_confidential_sso_title"):s("team_integrations_self_hosted_sso_title")}),editButtonLink:`${l.teamIntegrationsRoutePath}${a.Nr.SSO}${c?iv:d?av:nv}`,badgeLabel:s("team_integrations_sso_badge")}):(0,S.tZ)(xC,{isCapable:e,provisioningSolution:t})};var fC,vC,CC=n(60075);const EC=()=>{const{translate:e}=(0,p.Z)();return(0,S.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("team_integrations_confidential_scim")}),(0,S.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"4px"},children:[fC||(fC=(0,S.tZ)(o.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.standard"})),(0,S.BX)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.helper.regular",children:["5 ",e("team_integrations_time")]})]})]})},ZC=({isCapable:e,ssoSolution:t,ssoStatus:n})=>{const{routes:r}=(0,i.Xo)(),{translate:s}=(0,p.Z)(),o=t===Lb.WO.enum.confidentialSaml&&n===Lb.pI.enum.enabled;return(0,S.tZ)(cC,{containerTitle:s("team_integrations_scim_title"),subCardHeader:vC||(vC=(0,S.tZ)(EC,{})),subCardDescription:s("team_integrations_scim_subcard_description"),image:CC,externalLink:"https://support.dashlane.com/hc/articles/10992671925778",externalLinkTitle:s("team_integrations_mass_deployment_link"),isMainButtonDisabled:!o,disabledReason:s("team_integrations_scim_disabled_reason"),mainButtonTitle:s("team_integrations_scim_main_button"),mainButtonLink:`${r.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}${Nv.redirectUrl}`,secondButtonTitle:s("team_integrations_scim_second_button"),secondButtonLink:`${r.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}`,badgeLabel:s("team_integrations_scim_badge"),upgradeButtonLink:`${r.teamAccountChangePlanRoutePath}?plan=business`,isCapable:e})},DC=({isCapable:e,ssoSolution:t,ssoStatus:n,provisioningSolution:r})=>{const{translate:s}=(0,p.Z)(),{routes:l}=(0,i.Xo)(),c=t===Lb.WO.enum.confidentialSaml||r!==Jx.Hh.enum.selfHostedScim,d=t===Lb.WO.enum.ssoConnector||r===Jx.Hh.enum.adSync,_=!c&&!d;return r===Jx.Hh.enum.none?(0,S.tZ)(ZC,{isCapable:e,ssoSolution:t,ssoStatus:n}):(0,S.tZ)(_C,{containerTitle:s("team_integrations_scim_title"),subCardTitle:(0,S.tZ)(o.nv,{children:r===Jx.Hh.enum.confidentialScim?s("team_integrations_confidential_scim"):r===Jx.Hh.enum.selfHostedScim?s("team_integrations_self_hosted_scim"):s("team_integrations_active_directory")}),editButtonLink:`${l.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}${c?tC:_?eC:nC}`,badgeLabel:s("team_integrations_scim_badge")})},TC=()=>{const{translate:e}=(0,p.Z)();return(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,S.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",children:e("team_settings_menu_title_integrations")}),(0,S.tZ)(o.nv,{children:e("team_integrations_title")})]})},kC=({isOpen:e,onClose:t})=>{const{teamId:n}=(0,be.fV)(),{clearSettings:a}=(0,q.u)(Rb.y),{translate:i}=(0,p.Z)(),{showToast:s}=(0,o.pm)(),[l,c]=(0,r.useState)(!1),[d,_]=(0,r.useState)(!1),u=async()=>{if(_(!1),!n)throw new Error("teamId not found");try{c(!0),await a({teamId:n}),t(),s({description:i("team_integrations_confidential_reset_toast_description"),closeActionLabel:i("_common_toast_close_label")})}catch(e){_(!0)}finally{c(!1)}};return(0,S.tZ)(o.Vq,{isDestructive:!0,isOpen:e,onClose:t,title:i("team_integrations_confidential_reset_dialog_title"),closeActionLabel:i("_common_dialog_dismiss_button"),children:(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px"},children:[(0,S.tZ)(o.nv,{children:i("team_integrations_confidential_reset_dialog_description")}),(0,S.BX)("div",{sx:{alignItems:"flex-end",display:"flex",flexDirection:"column",gap:"8px"},children:[(0,S.BX)("div",{sx:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[(0,S.tZ)(o.zx,{disabled:l,mood:"neutral",onClick:u,children:i("_common_action_cancel")}),(0,S.tZ)(o.zx,{isLoading:l,mood:"danger",onClick:u,children:i("team_integrations_confidential_reset_dialog_delete_button")})]}),d?(0,S.tZ)(o.nv,{color:"ds.text.danger.quiet",textStyle:"ds.body.helper.regular",children:i("team_integrations_confidential_reset_dialog_generic_error")}):null]})]})})},IC=()=>{const{translate:e}=(0,p.Z)(),[t,n]=(0,r.useState)(!1);return(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.ke,{actions:[(0,S.tZ)(o.zx,{mood:"danger",onClick:()=>n(!0),children:e("team_integrations_confidential_reset_infobox_delete_button")},"delete-confidential-integrations")],description:e("team_integrations_confidential_reset_infobox_description"),icon:"FeedbackWarningOutlined",mood:"danger",size:"large",title:e("team_integrations_confidential_reset_infobox_title")}),(0,S.tZ)(kC,{isOpen:t,onClose:()=>n(!1)})]})};var AC,wC,NC,OC;const RC=()=>{var e;const t=(0,cg.S)(),n=(0,c.k)(Rb.y,"ssoProvisioning"),{data:a,status:i}=(0,c.k)(Nf.m,"provisioningSolution"),{data:r,status:s}=(0,c.k)(iC.v,"getSiemConfiguration"),l=(0,xe.o)("setup_rollout_reset_confidential_button"),d=null==(e=t?.scim.enabled)||e;return n.status!==L.rq.Success||i!==L.rq.Success||s!==L.rq.Success?(0,S.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:AC||(AC=(0,S.tZ)(o.ZX,{size:75}))}):(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px",padding:"32px"},children:[wC||(wC=(0,S.tZ)(TC,{})),l?NC||(NC=(0,S.tZ)(IC,{})):null,(0,S.tZ)(SC,{ssoSolution:n.data?.ssoSolution,ssoStatus:n.data?.ssoStatus,provisioningSolution:a,isCapable:d}),(0,S.tZ)(DC,{ssoSolution:n.data?.ssoSolution,ssoStatus:n.data?.ssoStatus,provisioningSolution:a,isCapable:d}),OC||(OC=(0,S.tZ)(rC,{})),(0,S.tZ)(gC,{active:r?.active,ssoSolution:n.data?.ssoSolution})]})};var LC=n(20675),MC=n(32198),BC=n(34041);const PC=({defaultValue:e,onChange:t,disabled:n})=>{const{translate:a}=(0,p.Z)();return(0,S.BX)("div",{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",borderRadius:"8px",padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:a("team_settings_splunk_configuration_splunk_self_signed_certificate_subtitle")}),(0,S.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px",justifyContent:"space-between"},children:[(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:a("team_settings_splunk_configuration_splunk_self_signed_certificate_title")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a("team_settings_splunk_configuration_splunk_self_signed_certificate_description")})]}),(0,S.tZ)(o.ZD,{"aria-label":"selfSignedCertToggle",onChange:t,defaultChecked:e,disabled:n})]})]})},UC={INVALID_URL:"team_settings_set_siem_configuration_invalid_url",GENERIC_ERROR:"team_settings_set_siem_configuration_generic_error",TEAM_NOT_FOUND:"team_settings_set_siem_configuration_team_not_found",MISMATCHING_ADMIN_PROVISIONING_KEY:"team_settings_set_siem_configuration_mismatching_admin_provision_key",NO_SIEM_CONFIGURATION_UPDATE:"team_settings_set_siem_configuration_no_siem_configuration_update"},XC=({token:e,instanceURL:t,isSelfSignedCertificateAllowed:n,active:a,isTeamAlreadyCreated:i,hasSiemPaywall:s,hasSelfSignedCertFF:c,ssoSolution:d})=>{const{translate:_}=(0,p.Z)(),{showToast:u}=(0,o.pm)(),{trackPageView:g}=(0,LC.D)(),{setSiemConfiguration:h}=(0,q.u)(iC.v),{createTeamInEnclave:y}=(0,q.u)(MC.K),b=(0,r.useRef)(null),x=(0,r.useRef)(null),f=(0,r.useRef)(n),[v,C]=(0,r.useState)(!1),[E,Z]=(0,r.useState)(""),[D,T]=(0,r.useState)(!1),[k,I]=(0,r.useState)(!1),A=e&&t,w=d===Lb.WO.enum.none||d===Lb.WO.enum.confidentialSaml,N=!s&&w;(0,r.useEffect)((()=>{g({pageView:l.PageView.TacIntegrationsSplunk})}),[]);const O=a=>{e!==b.current?.value||t!==x.current?.value||n!==f.current?C(!0):C(!1),"instanceURL"===a&&Z("")},R=e=>{e.tag===BC.M7.INVALID_URL?(Z(_(UC.INVALID_URL)),(0,m.Kz)(new l.UserSetupSplunkIntegrationEvent({splunkSetupStep:l.SplunkSetupStep.InvalidUrlError}))):(u({mood:"danger",description:_(e.tag in UC?UC[e.tag]:UC.GENERIC_ERROR)}),(0,m.Kz)(new l.UserSetupSplunkIntegrationEvent({splunkSetupStep:"MISMATCHING_ADMIN_PROVISIONING_KEY"===e.tag?l.SplunkSetupStep.MismatchAdminProvisioningKeyError:"TEAM_NOT_FOUND"===e.tag?l.SplunkSetupStep.TeamNotFoundError:l.SplunkSetupStep.GenericError})))};return(0,S.BX)(S.HY,{children:[w?null:(0,S.tZ)(o.ke,{mood:"danger",title:_("team_settings_splunk_configuration_splunk_unavailable_infobox_title"),sx:{marginBottom:"24px"}}),(0,S.tZ)(o.Zb,{sx:{marginBottom:"24px"},children:(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px",opacity:N?"1":"0.5"},children:[(0,S.BX)("div",{children:[(0,S.tZ)(o.X6,{as:"h2",sx:{marginBottom:"8px"},children:_("team_settings_splunk_configuration_step_1_title")}),(0,S.tZ)(o.nv,{sx:{marginBottom:"16px"},children:_("team_settings_splunk_configuration_step_1_description")}),s?null:(0,S.tZ)(o.ke,{mood:w?"brand":"neutral",title:_("team_settings_splunk_configuration_step_1_infobox")})]}),(0,S.BX)("div",{children:[(0,S.tZ)(o.X6,{as:"h2",sx:{marginBottom:"8px"},children:_("team_settings_splunk_configuration_step_2_title")}),(0,S.tZ)(o.nv,{sx:{marginBottom:"24px"},children:_("team_settings_splunk_configuration_step_2_description")}),(0,S.BX)("div",{sx:{display:"flex",gap:"16px",flexDirection:"column"},children:[(0,S.tZ)(o.qo,{value:t,label:_("team_settings_splunk_configuration_instance_url_label"),ref:x,onChange:()=>O("instanceURL"),id:"splunk-instance-url-field",disabled:!N,error:!!E,feedback:E||void 0}),(0,S.tZ)(o.ZI,{value:e,label:_("team_settings_splunk_configuration_token_label"),ref:b,onChange:()=>O("token"),disabled:!N,"data-testid":"splunk-token-field",toggleVisibilityLabel:{show:_("_common_password_show_label"),hide:_("_common_password_hide_label")}})]})]}),c?(0,S.tZ)(PC,{defaultValue:n,onChange:e=>{f.current=e.target.checked,O("selfSignedCert")},disabled:!N}):null,(0,S.tZ)("div",{sx:{display:"flex",justifyContent:"end"},children:(0,S.tZ)(o.zx,{intensity:"catchy",disabled:!v||!N,onClick:async()=>{T(!0),i||await y();const e=!b?.current?.value||!x?.current?.value,t=await h({token:b?.current?.value.trim(),instanceURL:x?.current?.value.trim(),active:!e&&void 0,isSelfSignedCertificateAllowed:f.current});"failure"===t.tag?R(t.error):(u({mood:"brand",description:_("team_settings_splunk_integration_saved_toast")}),(0,m.Kz)(new l.UserSetupSplunkIntegrationEvent({splunkSetupStep:l.SplunkSetupStep.SaveTokens})),C(!1)),T(!1)},isLoading:D,children:_(A?"team_settings_siem_configuration_actions_update":"team_settings_siem_configuration_actions_save")})})]})}),(0,S.tZ)(o.Zb,{children:(0,S.BX)("div",{sx:{display:"flex",gap:"32px",alignItems:"center",justifyContent:"space-between",opacity:N?"1":"0.5"},children:[(0,S.BX)("div",{children:[(0,S.tZ)(o.X6,{as:"h2",sx:{marginBottom:"8px"},children:_("team_settings_splunk_configuration_step_3_title")}),(0,S.tZ)(o.nv,{children:_("team_settings_splunk_configuration_step_3_description")})]}),(0,S.tZ)("div",{children:(0,S.tZ)(o.ZD,{"aria-label":"activateSiemToggle",onChange:()=>(async e=>{I(!0);const t=await h({active:e});"failure"===t.tag?R(t.error):(u({mood:"brand",description:_(e?"team_settings_splunk_integration_activated_toast":"team_settings_splunk_integration_deactivated_toast")}),(0,m.Kz)(new l.UserSetupSplunkIntegrationEvent({splunkSetupStep:e?l.SplunkSetupStep.ActivateSplunkIntegration:l.SplunkSetupStep.DeactivateSplunkIntegration}))),I(!1)})(!a),checked:a,disabled:!A||k||!N})})]})})]})},zC=()=>{const{translate:e}=(0,p.Z)(),{routes:t}=(0,i.Xo)();return(0,S.tZ)(o.ke,{title:e("team_settings_splunk_paywall_title"),description:e("team_settings_splunk_paywall_description"),mood:"brand",size:"large",actions:[(0,S.tZ)(o.zx,{mood:"brand",intensity:"catchy",icon:"PremiumOutlined",layout:"iconLeading",as:cm.rU,to:`${t.teamAccountChangePlanRoutePath}?plan=business`,children:e("team_settings_siem_paywall_upgrade_cta")},"upgrade")],sx:{margin:"16px 32px 32px 32px"}})};var qC;const jC=()=>{var e,t;const{translate:n}=(0,p.Z)(),{data:a,status:i}=(0,c.k)(iC.v,"getSiemConfiguration"),r=(0,xe.o)("setup_rollout_siem_self_signed_certificate"),{data:s,status:d}=(0,c.k)(Rb.y,"ssoProvisioning"),u=(0,X.C)(),g=i===L.rq.Success&&d===L.rq.Success;if(!u)return null;const h=u.spaceTier!==_.lD.Business&&u.spaceTier!==_.lD.BusinessPlus;return(0,S.tZ)(kx,{title:n("team_settings_siem_header"),paragraph:h?void 0:n("team_settings_siem_header_helper"),badge:h?{label:n("account_summary_upgrade_content_business_badge"),mood:"brand",iconName:"PremiumOutlined",layout:"iconLeading"}:void 0,children:(0,S.BX)(S.HY,{children:[h?qC||(qC=(0,S.tZ)(zC,{})):null,(0,S.tZ)(Ba,{sx:{padding:"0 32px"},fullWidth:!0,mainContent:i===L.rq.Success&&d===L.rq.Success&&null!==r&&g?(0,S.tZ)(XC,{token:null!=(e=a.token)?e:"",instanceURL:null!=(t=a.instanceURL)?t:"",isSelfSignedCertificateAllowed:a.isSelfSignedCertificateAllowed,active:a.active,isTeamAlreadyCreated:s.global.isTeamProvisionedInNitro,hasSiemPaywall:h,hasSelfSignedCertFF:!!r,ssoSolution:s.ssoSolution}):(0,S.tZ)(o.Zb,{children:(0,S.tZ)(o.kC,{fullWidth:!0,justifyContent:"center",children:(0,S.tZ)(o.ZX,{size:60,sx:{padding:"16px"}})})}),secondaryContent:(0,S.tZ)(rd,{heading:n("team_settings_siem_help_card_header"),description:n("team_settings_splunk_help_card_description"),linkProps:{linkType:id.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/17674635955730",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.SeeSetupGuide,clickOrigin:l.ClickOrigin.NeedHelp}))}},linkText:n("team_settings_splunk_help_card_link")})})]})})};var FC=n(35001),GC=n(96081);const VC=n.p+"333112f5f6782cda52ff.png";var HC=n(75822),WC=n(91356),$C=n(81244),KC=n(51545),YC=n(42557),QC=n(62516),JC=n(19708);const eE=e=>JC.c.findIndex((t=>t===e)),tE=e=>{const t=new Date;return t.setUTCHours(e,0,0),t.getHours()},nE=(e,t)=>{const n=(0,YC.Z)(new Date,eE(e));n.setUTCHours(t,0,0);const a=n.getDay();return JC.c[a]},aE="nudges_configuration_options_frequency",iE="nudges_configuration_options_day",rE={compromised_passwords:"nudges_compromised_password_nudge_title",reused_passwords:"nudges_reused_password_nudge_title",weak_passwords:"nudges_weak_password_nudge_title"},sE={compromised_passwords:"nudges_compromised_password_nudge_description",reused_passwords:"nudges_reused_password_nudge_description",weak_passwords:"nudges_weak_password_nudge_description"},oE={compromised_passwords:"monday",reused_passwords:"wednesday",weak_passwords:"friday"},lE={compromised_passwords:"https://support.dashlane.com/hc/en-us/articles/202699411-Password-Health#compromised",reused_passwords:"https://support.dashlane.com/hc/en-us/articles/202699411-Password-Health#reused",weak_passwords:"https://support.dashlane.com/hc/en-us/articles/202699411-Password-Health#weak"},cE={compromised_passwords:l.NudgeType.CompromisedPasswords,reused_passwords:l.NudgeType.ReusedPasswords,weak_passwords:l.NudgeType.WeakPasswords},dE={compromised_passwords:l.ClickOrigin.NudgesCompromisedPasswords,reused_passwords:l.ClickOrigin.NudgesReusedPasswords,weak_passwords:l.ClickOrigin.NudgesWeakPasswords},_E=({updateNudge:e,sendTestNudge:t,displayName:n,dropdownOptions:a,existingNudge:i})=>{var s;const{translate:c}=(0,p.Z)(),[d,_]=(0,r.useState)(i?.nextRunTimestamp?new Date(1e3*i.nextRunTimestamp):void 0),u=(0,On.TA)({initialValues:{active:!!i&&i.active,frequency:null!=(s=i?.options?.frequency)?s:"weekly",dayOfWeek:i?.options?.dayOfWeek?nE(i.options.dayOfWeek,i.options.timeOfDayUtc):oE[n],localTimeOfDay:i?.options?.timeOfDayUtc?tE(i.options.timeOfDayUtc):14},onSubmit:async t=>{const{active:a,frequency:i,dayOfWeek:r,localTimeOfDay:s}=t,{utcHours:o,utcDay:l}=((e,t)=>{let n=new Date;n.setHours(e,0,0),n=(0,YC.Z)(n,eE(t));const a=n.getUTCDay();return{utcHours:n.getUTCHours(),utcDay:JC.c[a]}})(s,r);await e({name:n,active:a,options:{frequency:i,dayOfWeek:"weekly"===i?l:void 0,timeOfDayUtc:o}})}}),g=async(e,t)=>{if("active"===t&&(0,m.Kz)(new l.UserToggleNudgeEvent({nudgeState:e?l.State.On:l.State.Off,integrationPlatform:l.IntegrationPlatform.Slack,nudgeType:cE[n]})),await u.setFieldValue(t,e),await u.submitForm(),"frequency"===t||"dayOfWeek"===t||"localTimeOfDay"===t){const n=(e=>{const t=new Date;let n=(0,HC.Z)(t,e.localTimeOfDay);if(n=(0,WC.Z)(n,0),"daily"===e.frequency)n=(0,lc.Z)(n,1);else{const a=(0,$C.Z)(n),i=eE(e.dayOfWeek),r=i===a&&t.getHours()>=e.localTimeOfDay;(i!==a||r)&&(n=(0,KC.Z)(n,eE(e.dayOfWeek)))}return n})({...u.values,[t]:e});_(n)}};return(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.ZD,{id:n,label:c(rE[n]),description:c(sE[n]),onChange:e=>g(e.target.checked,"active"),checked:u.values.active}),u.values.active&&a?(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",backgroundColor:"ds.container.agnostic.neutral.standard",borderColor:"ds.border.neutral.standard.idle",padding:"16px",borderRadius:"8px",marginY:"16px",gap:"16px"},children:[(0,S.tZ)(o.X6,{as:"h1",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:c("nudges_configuration_options_title")}),(0,S.BX)("div",{sx:{display:"grid",gridTemplateColumns:["auto","auto","auto auto","auto auto auto"],gap:"16px"},children:[(0,S.tZ)(o.mg,{label:c(aE),onChange:e=>g(e,"frequency"),value:u.values.frequency,labelPersists:!0,children:a.frequency.map(((e,t)=>(0,S.tZ)(o.$m,{value:e,children:c(`${aE}_${e}`)},`${e}-${t}`)))}),(0,S.tZ)(o.mg,{label:c(iE),onChange:e=>g(e,"dayOfWeek"),value:u.values.dayOfWeek,disabled:"daily"===u.values.frequency,labelPersists:!0,children:a.dayOfWeek.map(((e,t)=>(0,S.tZ)(o.$m,{value:e,children:c(`${iE}_${e}`)},`${e}-${t}`)))}),(0,S.tZ)(o.mg,{label:c("nudges_configuration_options_hour"),onChange:e=>g(Number(e),"localTimeOfDay"),value:String(u.values.localTimeOfDay),labelPersists:!0,children:a.timeOfDayUtc.map(((e,t)=>(0,S.tZ)(o.$m,{value:String(e),children:`${e}:00`},`${e}-${t}`)))})]}),d?(0,S.tZ)(o.ke,{title:(e=>{var t;const a=null!=(t=i?.expectedUserCount)?t:0;return 0===a?c("nudges_configuration_next_occurrence_no_user",{nudgeType:c(rE[n]).toLocaleLowerCase()}):c(1===a?"nudges_configuration_next_occurrence_single_user":"nudges_configuration_next_occurrence",{numberOfUsers:a,time:(0,wn.Z)(e,"kk:mm"),date:(0,QC.Z)(e,{weekday:"long",day:"numeric",month:"long"}),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})})(d)}):null,(0,S.BX)(o.kC,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,S.tZ)(o.Qj,{href:lE[n],onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.LearnMoreAboutNudges,clickOrigin:dE[n]}))},isExternal:!0,children:c("_common_action_learn_more")}),(0,S.tZ)(o.zx,{mood:"brand",intensity:"quiet",layout:"iconLeading",icon:"FeatureAutomationsOutlined",onClick:()=>t(n),children:c("team_settings_nudges_send_test")})]})]}):null]})},uE=()=>{const{translate:e}=(0,p.Z)();return(0,S.BX)(o.Zb,{gap:"8px",children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",sx:{mb:"16px"},children:e("webapp_tac_infocard_title")}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",as:"h3",children:e("team_settings_nudges_help_card_header")}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",sx:{mb:"16px"},children:e("team_settings_nudges_help_card_header_description")}),(0,S.tZ)(o.Qj,{onClick:()=>(0,m.Kz)(new l.UserClickEvent({button:l.Button.SeeNudgesSetupGuide,clickOrigin:l.ClickOrigin.NeedHelp})),href:"https://support.dashlane.com/hc/articles/19539724667026",isExternal:!0,children:e("team_settings_nudges_help_card_link")}),(0,S.tZ)("hr",{sx:{border:0,borderTop:"1px solid ds.border.neutral.quiet.idle",width:"100%"}}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",as:"h3",children:e("team_settings_nudges_feedback_title")}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",sx:{mb:"16px"},children:e("team_settings_nudges_feedback_description")}),(0,S.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.SubmitNudgesFeedback})),(0,P.Yo)("mailto:feedback@dashlane.com?subject=Nudges%20Private%20Beta%20Feedback")},mood:"neutral",intensity:"quiet",layout:"labelOnly",fullsize:!0,children:e("team_settings_nudges_feedback_cta")})]})};var mE,pE,gE;const hE="_common_generic_error",yE=()=>{const e=(0,xe.o)("ace_nudges_uninstall_slack"),t=(0,c.k)(GC.R,"getTeamNudges"),{sendNudge:n,updateTeamNudge:a,uninstallNudges:i}=(0,q.u)(GC.R),r=Qu(),s=(0,Rn.V)(),{translate:d}=(0,p.Z)(),{reportTACError:_}=H(),u=async e=>{try{const t=await a(e);if((0,j.d6)(t))return void s.showAlert(d("team_settings_nudges_configuration_update_nudge_success"),re.BLW.SUCCESS);s.showAlert(d("team_settings_nudges_configuration_update_nudge_error"),re.BLW.ERROR)}catch(e){s.showAlert(d(hE),re.BLW.ERROR)}},g=async e=>{try{const t=await n({type:e});if((0,j.d6)(t))return(0,m.Kz)(new l.UserSetupNudgesEvent({action:l.NudgeAction.SentTestNudge,integrationPlatform:l.IntegrationPlatform.Slack})),void s.showAlert(d("team_settings_nudges_configuration_send_nudge_success"),re.BLW.SUCCESS);s.showAlert(d("team_settings_nudges_configuration_send_nudge_error"),re.BLW.ERROR)}catch(e){s.showAlert(d(hE),re.BLW.ERROR)}};if(t.status===L.rq.Loading)return(0,S.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:mE||(mE=(0,S.tZ)(o.ZX,{size:75}))});t.status===L.rq.Error&&_(new Error(d("team_settings_nudges_configuration_get_nudges_error")));const h=t.data?.defaultNudges.map((({displayName:e,options:n})=>{switch(e){case"compromised_passwords":case"reused_passwords":case"weak_passwords":return{type:e,options:n,existingNudge:t.data.teamNudges.find((({nudge:t})=>t===e))};default:return{type:void 0}}})).filter((e=>!!e.type));return(0,S.tZ)(Ba,{sx:{padding:"0 32px"},fullWidth:!0,mainContent:(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"24px 0"},children:[(0,S.BX)(o.Zb,{sx:{display:"flex",flexDirection:"column",gap:"16px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,S.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:d("team_settings_nudges_setup_container_title")}),(0,S.BX)("div",{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",flex:1,backgroundColor:"ds.container.agnostic.neutral.standard",borderColor:"ds.border.neutral.standard.idle",padding:"40px",borderRadius:"8px"},children:[(0,S.BX)("div",{children:[(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.title.supporting.small",sx:{marginBottom:"8px"},children:d("team_settings_nudges_configuration_status")}),(0,S.tZ)(o.Ct,{label:d("team_settings_nudges_configuration_status_value"),layout:"labelOnly",mood:"positive"})]}),e?(0,S.tZ)(o.zx,{mood:"danger",intensity:"supershy",size:"small",onClick:async()=>{try{const e=await i();if((0,j.d6)(e))return(0,m.Kz)(new l.UserSetupNudgesEvent({action:l.NudgeAction.UninstalledIntegration,integrationPlatform:l.IntegrationPlatform.Slack})),void s.showAlert(d("team_settings_nudges_uninstall_success"),re.BLW.SUCCESS);s.showAlert(d("team_settings_nudges_uninstall_error"),re.BLW.ERROR)}catch(e){s.showAlert(d(hE),re.BLW.ERROR)}},children:d("team_settings_nudges_uninstall")}):null]})]}),(0,S.BX)(o.Zb,{sx:{backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,S.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[pE||(pE=(0,S.tZ)(o.VZ,{domainLogoURL:VC,backgroundColor:"#FFFFFF"})),(0,S.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:d("team_settings_nudges_configuration_schedule_title")})]}),(0,S.tZ)("hr",{sx:{width:"100%",borderTopWidth:"1px",borderTopStyle:"solid",borderColor:"ds.border.neutral.quiet.idle",marginTop:"24px",marginBottom:"24px"}}),h?h.map((({type:e,options:t,existingNudge:n},a)=>(0,S.tZ)(_E,{updateNudge:u,sendTestNudge:g,displayName:e,dropdownOptions:t,existingNudge:n},`${e}-${a}`))):null]})]}),secondaryContent:(0,S.BX)(re.T5p,{gap:"16px",children:[gE||(gE=(0,S.tZ)(uE,{})),r?null:(0,S.tZ)(Yu,{featureType:$u.Nudges})]})})};n(20912);var bE,xE,SE=n(39019),fE=n(16687);const vE={LEGEND_NUDGE_WEAK:"team_settings_nudges_insights_legend_nudge_weak",LEGEND_WEAK_PASSWORDS:"team_settings_nudges_insights_legend_weak_passwords",LEGEND_NUDGE_COMPROMISED:"team_settings_nudges_insights_legend_nudge_compromised",LEGEND_COMPROMISED_PASSWORDS:"team_settings_nudges_insights_legend_compromised_passwords",LEGEND_NUDGE_REUSED:"team_settings_nudges_insights_legend_nudge_reused",LEGEND_REUSED_PASSWORDS:"team_settings_nudges_insights_legend_reused_passwords"},CE={weak:"#32A9B2",compromised:"#FF7385",reused:"#ED892D"},EE=e=>{const{color:t}=e;return(0,S.tZ)("div",{sx:{width:"8px"},children:(0,S.tZ)("svg",{viewBox:"0 0 2 2",xmlns:"http://www.w3.org/2000/svg",children:(0,S.tZ)("circle",{cx:"1",cy:"1",r:"1",strokeWidth:"0",fill:t})})})},ZE=e=>{const{color:t}=e;return(0,S.tZ)("div",{sx:{width:"8px"},children:(0,S.tZ)("svg",{viewBox:"0 0 2 2",xmlns:"http://www.w3.org/2000/svg",children:(0,S.tZ)("line",{x1:"0",y1:"1",x2:"2",y2:"1",stroke:t,strokeWidth:"0.4"})})})},DE=e=>{const{cx:t,cy:n,stroke:a,payload:i,dataKey:r,r:s,strokeWidth:o,key:l}=e;return"nudgesSent"in i&&i.nudgesSent.includes(`${r}_passwords`)?(0,S.tZ)(fE.o,{id:`nudgeSentDot-${r}`,cx:t,cy:n,r:s,stroke:a,strokeWidth:o,fill:a},l):null},TE=({graphData:e})=>{const{translate:t}=(0,p.Z)(),n=e.reduce(((e,t)=>{if("compromised"in t){const{compromised:n,reused:a,weak:i}=t;return Math.max(e,n,a,i)}return e}),0),a=10*Math.ceil(n/10);return(0,S.BX)(S.HY,{children:[(0,S.tZ)("div",{sx:{width:"100%",height:"211px",flexGrow:1},"data-testid":"insight-graph",children:(0,S.tZ)(Jl.h,{sx:{height:"100%",width:"100%"},children:(0,S.BX)(ec.w,{data:e,children:[bE||(bE=(0,S.tZ)(tc.q,{vertical:!1})),(0,S.tZ)(nc.B,{domain:[0,a],fontSize:"small"}),xE||(xE=(0,S.tZ)(_c.K,{dataKey:"date",fontSize:"small"})),(0,S.tZ)(ic.x,{id:"line-weak",dataKey:"weak",type:"linear",stroke:CE.weak,dot:DE,isAnimationActive:!1}),(0,S.tZ)(ic.x,{id:"line-compromised",dataKey:"compromised",type:"linear",stroke:CE.compromised,dot:DE,isAnimationActive:!1}),(0,S.tZ)(ic.x,{id:"line-reused",dataKey:"reused",type:"linear",stroke:CE.reused,dot:DE,isAnimationActive:!1})]})})}),(0,S.tZ)(o.Zb,{sx:{display:"flex",flexDirection:"row",padding:"16px",gap:"32px",backgroundColor:"ds.container.agnostic.neutral.quiet",borderColor:"ds.border.neutral.quiet.idle"},children:[["weak",CE.weak,vE.LEGEND_NUDGE_WEAK,vE.LEGEND_WEAK_PASSWORDS],["compromised",CE.compromised,vE.LEGEND_NUDGE_COMPROMISED,vE.LEGEND_COMPROMISED_PASSWORDS],["reused",CE.reused,vE.LEGEND_NUDGE_REUSED,vE.LEGEND_REUSED_PASSWORDS]].map((([e,n,a,i])=>(0,S.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,S.BX)(o.kC,{flexDirection:"row",gap:"8px",alignItems:"baseline",children:[(0,S.tZ)(EE,{color:n}),(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:t(a)})]}),(0,S.BX)(o.kC,{flexDirection:"row",gap:"8px",alignItems:"baseline",children:[(0,S.tZ)(ZE,{color:n}),(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:t(i)})]})]},e)))})]})},kE=({title:e,mood:t,value:n,highlight:a})=>(0,S.BX)("div",{sx:{flex:1},children:["loading"===n?(0,S.tZ)(o.ZX,{"data-testid":"insight-loader",mood:t,size:"xlarge"}):(0,S.tZ)(o.nv,{"data-testid":"insight-value",textStyle:"ds.specialty.spotlight.medium",color:"positive"===t?"ds.text.brand.standard":`ds.text.${t}.quiet`,sx:{marginBottom:"2px"},children:"unknown"===n?"-":n}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.brand.standard",children:e}),a&&(0,S.tZ)(o.Ct,{"data-testid":"insight-highlight",mood:t,intensity:"quiet",label:a.label,layout:"iconLeading",iconName:a.iconName,sx:{marginTop:"8px"}})]});var IE,AE,wE;const NE=()=>(0,S.tZ)("div",{sx:{borderLeft:"1px solid ds.border.neutral.quiet.idle"}}),OE=()=>{var e;const{translate:t}=(0,p.Z)(),n=(0,c.k)(GC.R,"getHealthAndNudgeReport",{numberOfDays:365}),[a,i]=(0,r.useState)(7),s=(e=>{switch(e.status){case L.rq.Loading:return{weak:{value:"loading"},compromised:{value:"loading"},reused:{value:"loading"}};case L.rq.Error:return{weak:{value:"unknown"},compromised:{value:"unknown"},reused:{value:"unknown"}};case L.rq.Success:{const[...t]=e.data.healthAndNudgeHistory,n=t.pop();if(void 0===n)return{weak:{value:"unknown"},compromised:{value:"unknown"},reused:{value:"unknown"}};const a={weak:t.findLast((e=>e.nudgesSent.includes("weak_passwords"))),compromised:t.findLast((e=>e.nudgesSent.includes("compromised_passwords"))),reused:t.findLast((e=>e.nudgesSent.includes("reused_passwords")))},i=(e,t)=>t?Math.round(100*(e-t)/t):void 0;return{weak:{value:n.weak,percentChange:i(n.weak,a.weak?.weak)},compromised:{value:n.compromised,percentChange:i(n.compromised,a.compromised?.compromised)},reused:{value:n.reused,percentChange:i(n.reused,a.reused?.reused)}}}}})(n),l=(e,n)=>{const{percentChange:a}=e[n];if("number"!=typeof a)return;const i=Math.abs(a);return 0===i?{label:t("team_settings_nudges_insights_no_change_since_nudge")}:{iconName:a>0?"ArrowUpOutlined":"ArrowDownOutlined",label:t("team_settings_nudges_insights_change_since_nudge",{percent:i})}},d=((e,t)=>{var n;const a=[];let i=(0,SE.Z)(new Date,t),r=null!=(n=e.findLast((e=>new Date(e.date)<=i)))?n:{};"nudgesSent"in r&&(r.nudgesSent=[]);for(;a.length<t;){var s;i=(0,lc.Z)(i,1);const t=(0,wn.Z)(i,"yyyy-MM-dd"),n=null!=(s=e.find((e=>e.date===t)))?s:{...r,date:t};a.push(n),r={...n,nudgesSent:[]}}return a})(null!=(e=n.data?.healthAndNudgeHistory)?e:[],a);return(0,S.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{margin:"0 32px"},children:[(0,S.BX)(o.Zb,{sx:{display:"flex",flexDirection:"row",padding:"24px",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,S.tZ)(kE,{title:t("team_settings_nudges_insights_weak"),mood:"positive",value:s.weak.value,highlight:l(s,"weak")}),IE||(IE=(0,S.tZ)(NE,{})),(0,S.tZ)(kE,{title:t("team_settings_nudges_insights_compromised"),mood:"danger",value:s.compromised.value,highlight:l(s,"compromised")}),AE||(AE=(0,S.tZ)(NE,{})),(0,S.tZ)(kE,{title:t("team_settings_nudges_insights_reused"),mood:"warning",value:s.reused.value,highlight:l(s,"reused")})]}),(0,S.BX)(o.Zb,{sx:{display:"flex",flexDirection:"column",padding:"24px",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,S.BX)(o.kC,{flexDirection:"row",justifyContent:"space-between",children:[(0,S.tZ)(o.X6,{as:"h5",color:"ds.text.neutral.catchy",textStyle:"ds.title.section.medium",sx:{marginBottom:"1%"},children:t("team_settings_nudges_insights_graph_heading")}),(0,S.tZ)(o.mQ,{tabs:[{id:"tab-7-days",title:t("team_settings_nudges_insights_graph_7_days"),contentId:"content-7-days",onSelect:()=>{i(7)}},{id:"tab-30-days",title:t("team_settings_nudges_insights_graph_30_days"),contentId:"content-30-days",onSelect:()=>{i(30)}},{id:"tab-year",title:t("team_settings_nudges_insights_graph_year"),contentId:"content-year",onSelect:()=>{i(365)}}]})]}),n.status!==L.rq.Success?wE||(wE=(0,S.tZ)(o.ZX,{"data-testid":"insight-graph-loader",size:"xlarge"})):(0,S.tZ)(TE,{graphData:d})]})]})};var RE,LE;const ME=()=>{const{translate:e}=(0,p.Z)(),[t,n]=(0,r.useState)("insights"),a=[{id:"tab-insights",title:e("team_settings_nudges_tabs_insights"),contentId:"content-insights",onSelect:()=>{(0,m.Nc)(l.PageView.ToolsNudgesInsights),n("insights")}},{id:"tab-settings",title:e("team_settings_nudges_tabs_configuration"),contentId:"content-settings",onSelect:()=>{(0,m.Nc)(l.PageView.ToolsNudgesConfiguration),n("settings")}}];return(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.mQ,{tabs:a,sx:{margin:"0 32px 16px"},defaultTab:0}),(0,S.tZ)("div",{"aria-labelledby":"tab-settings",id:"content-settings",sx:{display:"settings"===t?"block":"none"},children:RE||(RE=(0,S.tZ)(yE,{}))}),(0,S.tZ)("div",{"aria-labelledby":"tab-insights",id:"content-insights",sx:{display:"insights"===t?"block":"none"},children:LE||(LE=(0,S.tZ)(OE,{}))})]})};var BE=n(14796);const PE=({iconName:e,title:t,description:n})=>(0,S.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px"},children:[(0,S.tZ)(o.vY,{name:e,mood:"brand"}),(0,S.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,S.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:t}),(0,S.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:n})]})]});var UE,XE,zE;const qE=({hasNudgesCapability:e})=>{const{translate:t}=(0,p.Z)(),n=(0,u.s)(),a=Qu(),i=(0,X.C)(),r=(0,c.k)(Rb.y,"ssoProvisioning"),s=r.data?.ssoSolution,d=r.status===L.rq.Success;if(!i)return null;const _=i.isFreeTrial||i.isGracePeriod,g=s===Lb.WO.enum.none||s===Lb.WO.enum.confidentialSaml,h=()=>{(0,m.Kz)(new l.UserSetupNudgesEvent({action:l.NudgeAction.StartedSetup,integrationPlatform:l.IntegrationPlatform.Slack})),(0,P.Yo)("https://slack.com/oauth/v2/authorize?client_id=2317325599.7117714150453&scope=chat:write,chat:write.customize,users:read,users:read.email&user_scope="),window.close()},y=()=>(0,S.tZ)(o.Zb,{sx:{minHeight:"680px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:(0,S.BX)(o.kC,{flexDirection:"column",alignItems:"center",gap:"16px",sx:{maxWidth:"560px",marginY:"75px"},children:[(0,S.BX)(o.kC,{flexDirection:"column",alignItems:"center",gap:"16px",children:[(0,S.tZ)("img",{src:BE,sx:{width:"320px",aspectRatio:"3/2"},alt:""}),(0,S.BX)(o.kC,{flexDirection:"column",alignItems:"center",gap:"8px",sx:{maxWidth:"512px",textAlign:"center"},children:[(0,S.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:t("team_settings_nudges_setup_overview_title")}),(0,S.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:t("team_settings_nudges_setup_overview_subtitle")})]})]}),(0,S.BX)(o.kC,{flexDirection:"column",alignItems:"left",gap:"16px",children:[(0,S.tZ)(PE,{iconName:"ActionAddOutlined",title:t("team_settings_nudges_setup_step_one_title"),description:t("team_settings_nudges_setup_step_one_subtitle")}),(0,S.tZ)(PE,{iconName:"HealthPositiveOutlined",title:t("team_settings_nudges_setup_step_two_title"),description:t("team_settings_nudges_setup_step_two_subtitle")}),(0,S.tZ)(PE,{iconName:"TipOutlined",title:t("team_settings_nudges_setup_step_three_title"),description:t("team_settings_nudges_setup_step_three_subtitle")})]}),d?g?e?(0,S.tZ)(o.zx,{size:"medium",layout:"iconLeading",icon:zE||(zE=(0,S.tZ)(o.JO,{name:"ConfigureOutlined"})),onClick:h,children:t("team_settings_nudges_setup")}):(0,S.tZ)(o.zx,{size:"medium",layout:"iconLeading",icon:XE||(XE=(0,S.tZ)(o.JO,{name:"PremiumOutlined"})),onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.UpgradeBusinessPlusTier})),Ku($u.Nudges,n?.spaceTier,_)},children:t("team_settings_nudges_setup_upgrade")}):(0,S.tZ)(o.ke,{title:t("team_settings_nudges_setup_incompatible"),mood:"danger"}):(0,S.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:UE||(UE=(0,S.tZ)(o.ZX,{size:"xlarge","data-testid":"nudges-setup-loader"}))})]})});return e&&!a?(0,S.tZ)(Ba,{secondaryContentWrapDirection:"bottom",fullWidth:!0,secondaryContentWidth:"347px",sx:{gap:"16px"},mainContent:(0,S.tZ)(y,{}),secondaryContent:(0,S.tZ)(Yu,{featureType:$u.Nudges})}):(0,S.tZ)(re.T5p,{sx:{marginX:"32px",marginBottom:"32px"},children:(0,S.tZ)(y,{})})};var jE,FE;const GE=()=>{const e=(0,xe.o)("ace_enforce_nudges_availability"),t=(0,He.gW)(["nudges"]),{reportTACError:n}=H(),a=(()=>{const{search:e,hash:t}=(0,i.TH)(),[n,a]=(0,r.useState)(void 0);return(0,r.useEffect)((()=>{var n;const i=(0,Or.parse)(e),r=null!=(n=i.code)?n:"";if(r){delete i.code,a((e=>({...e,code:r})));const e=Object.keys(i).length>0?`?${(0,Or.stringify)(i)}`:"",n=window.location.href.split("?")[0];window.history.replaceState({},"",n+e+t)}}),[e]),n})()?.code,[s,d]=(0,r.useState)(Boolean(a)),[_,u]=(0,r.useState)(!1),g=(0,c.k)(GC.R,"checkNudgesInstallation"),{validateNudgesInstallation:h,sendNudge:y}=(0,q.u)(GC.R),{translate:b}=(0,p.Z)(),x=(0,Rn.V)();(0,r.useEffect)((()=>{a&&(async()=>{try{const e=await h({authCode:a});if((0,j.hx)(e)&&x.showAlert(b("team_settings_nudges_configuration_validation_error"),re.BLW.ERROR),(0,j.d6)(e)){(0,m.Kz)(new l.UserSetupNudgesEvent({action:l.NudgeAction.CompletedSetup,integrationPlatform:l.IntegrationPlatform.Slack}));const e=await y({type:"welcome"});(0,j.hx)(e)&&x.showAlert(b("team_settings_nudges_configuration_send_nudge_error"),re.BLW.ERROR),u(!0)}}catch(e){x.showAlert(b("_common_generic_error"),re.BLW.ERROR)}finally{d(!1)}})()}),[a]),g.status===L.rq.Error&&n(new Error("Unknown error occured while checking your Nudges installation"));const f=Boolean(g.data);if(g.status===L.rq.Loading||t.status===L.rq.Loading||s)return(0,S.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:jE||(jE=(0,S.tZ)(o.ZX,{size:75,"data-testid":"nudges-validate-loader"}))});const v=t.status===L.rq.Success&&t.data;return(e||v)&&(f||_)?FE||(FE=(0,S.tZ)(ME,{})):(0,S.tZ)(qE,{hasNudgesCapability:v})};var VE,HE;const WE=()=>{const e=(0,xe.o)("ace_tac_slack_integration"),t=(0,He.gW)(["nudges"]),{routes:n}=(0,i.Xo)(),a=(0,X.C)(),s=Qu(),{translate:l}=(0,p.Z)();if((0,r.useEffect)((()=>{!1!==e&&void 0!==e||(0,i.uX)(n.teamIntegrationsRoutePath)}),[e]),null===e||!a)return VE||(VE=(0,S.tZ)(o.kC,{justifyContent:"center",children:(0,S.tZ)(o.ZX,{size:75})}));const c=t.status===L.rq.Success&&t.data;return(0,S.tZ)(FC.r,{moduleName:"TAC",useCaseName:"nudges",children:(0,S.BX)("div",{sx:{padding:"24px 0"},children:[(0,S.BX)("div",{sx:{pl:"32px",pb:"16px"},children:[(0,S.BX)(o.kC,{alignItems:"center",gap:"8px",sx:{pb:"8px"},children:[(0,S.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:l("webapp_sidemenu_nudges")}),!s&&c?(0,S.BX)(S.HY,{children:[(0,S.tZ)(o.Ct,{label:l("team_business_plus_badge_label"),mood:"brand",intensity:"quiet",layout:"iconLeading",iconName:"PremiumOutlined"}),a.isFreeTrial?null:(0,S.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.brand.standard",children:l("team_business_plus_badge_expiration")})]}):null]}),(0,S.tZ)(o.nv,{color:"ds.text.neutral.standard",children:l("team_settings_nudges_description")})]}),HE||(HE=(0,S.tZ)(GE,{}))]})})};function $E({path:e}){return(0,S.tZ)(i.GB,{path:e,permission:e=>e.adminAccess.hasFullAccess,children:(0,S.BX)(i.rs,{children:[(0,S.tZ)(i.Vy,{exact:!0,component:RC,path:`${e}`,permission:e=>QE("FULL",e),redirectPath:`${e}`}),(0,S.tZ)(i.Vy,{path:`${e}${a.Nr.DIRECTORY_SYNC}`,component:aC}),(0,S.tZ)(i.Vy,{path:`${e}${a.Nr.SSO}`,component:sv}),(0,S.tZ)(i.Vy,{path:`${e}${a.Nr.SIEM}`,component:jC}),(0,S.tZ)(i.Vy,{path:`${e}${a.Nr.NUDGES}`,component:WE})]})})}var KE=n(16037),YE=n(97078);function QE(e,t){return!t.adminAccess||t.adminAccess.hasPermissionLevel(e)}const JE=({basePath:e,path:t})=>(0,S.tZ)(i.GB,{path:t,reducer:YE.Z,permission:e=>e.loggedIn&&e.adminAccess.hasTACAccess,redirectPath:a.TT,component:xl,children:(0,S.BX)(i.rs,{children:[(0,S.tZ)(i.l_,{exact:!0,from:`${e}/`,to:`${e}/${KE.$.DASHBOARD}`}),(0,S.tZ)(i.Vy,{component:oa,path:`${e}/${KE.$.CHANGE_PLAN}`,permission:e=>QE("BILLING",e)}),(0,S.tZ)(i.Vy,{component:La,path:`${e}/${KE.$.POST_TRIAL_CHECKOUT}`,permission:e=>QE("BILLING",e)}),(0,S.tZ)(i.Vy,{component:gs,path:`${e}/${KE.$.ACCOUNT}`,permission:e=>QE("BILLING",e),redirectPath:`${e}/${KE.$.GROUPS}`}),(0,S.tZ)(i.Vy,{component:ed,path:`${e}/${KE.$.DASHBOARD}`,permission:e=>QE("FULL",e),redirectPath:`${e}/${KE.$.ACCOUNT}`}),(0,S.tZ)(Ho,{path:`${e}/${KE.$.ACTIVITY}`}),(0,S.tZ)(Cg,{path:`${e}/${KE.$.GROUPS}`,permission:e=>QE("GROUP_READ",e)}),(0,S.tZ)(uy,{path:`${e}/${KE.$.MEMBERS}`}),(0,S.tZ)(i.Vy,{component:Gu,path:`${e}/${KE.$.DARK_WEB_INSIGHTS}`,permission:e=>QE("FULL",e),redirectPath:`${e}/${KE.$.DARK_WEB_INSIGHTS}`,reducer:Eg.ZP}),(0,S.tZ)(i.Vy,{component:hp,path:`${e}/${KE.$.LOGGED_OUT_MONITORING}`,permission:e=>QE("FULL",e),redirectPath:`${e}/${KE.$.LOGGED_OUT_MONITORING}`}),(0,S.tZ)(Ob,{path:`${e}/${KE.$.SETTINGS}`}),(0,S.tZ)($E,{path:`${e}/${KE.$.INTEGRATIONS}`})]})})},19122:(e,t,n)=>{n.d(t,{fV:()=>c,qc:()=>l});var a=n(96832),i=n(38452),r=n(39649),s=n(68593);const o=a.createContext({currentSpaceId:null,spaceDetails:null,teamId:null}),l=({lee:e,children:t})=>{var n;const a=(0,r.B)(e.globalState),l=null!=(n=(0,i.xO)(e.globalState)?.details)?n:null,c=(0,i.ev)(e.globalState);return(0,s.tZ)(o.Provider,{value:{teamId:c,currentSpaceId:a,spaceDetails:l},children:t})},c=()=>a.useContext(o)},12637:(e,t,n)=>{n.d(t,{j:()=>o});var a=n(51031),i=n(78060),r=n(28207),s=n(91);const o=()=>{var e;const t=(0,s.F)(),n=(0,r.u)(),o=(0,i.m)();if(t.status===a.rq.Error||n.status===a.rq.Error||o.status===a.rq.Error)return{status:a.rq.Success,shouldDisplayAdminVaultGetStartedGuide:!1};if(t.status!==a.rq.Success||n.status!==a.rq.Success||o.status!==a.rq.Success)return{status:a.rq.Loading};const l=!t.isGetStartedDismissed&&n.teamCreationDate>=1702508400&&null!=(e=o.isTeamCreator)&&e;return{status:a.rq.Success,shouldDisplayAdminVaultGetStartedGuide:l}}},6135:(e,t,n)=>{n.d(t,{S:()=>s});var a=n(24507),i=n(51031),r=n(56018);const s=()=>{const e=(0,a.k)(r.o,"getTeamCapabilities");return e.status===i.rq.Success?e.data:null}},16037:(e,t,n)=>{n.d(t,{$:()=>a});let a=function(e){return e.ACCOUNT="account",e.ACTIVITY="activity",e.CHANGE_PLAN="account/changeplan",e.DASHBOARD="dashboard",e.GROUPS="groups",e.MEMBERS="members",e.SETTINGS="settings",e.DARK_WEB_INSIGHTS="dark-web-insights",e.INTEGRATIONS="integrations",e.LOGGED_OUT_MONITORING="logged-out-monitoring",e.POST_TRIAL_CHECKOUT="account/checkout",e}({})},19471:(e,t,n)=>{n.d(t,{$b:()=>h,BJ:()=>v,Bw:()=>p,Bz:()=>X,F1:()=>a,FL:()=>L,FP:()=>A,FX:()=>u,Fn:()=>D,HX:()=>f,I9:()=>E,Iw:()=>b,J0:()=>O,M:()=>Y,Mv:()=>i,Pr:()=>x,RU:()=>H,Rf:()=>R,Tx:()=>k,Tz:()=>F,Vr:()=>c,XP:()=>K,Zi:()=>P,bx:()=>Z,cI:()=>J,hP:()=>T,hc:()=>g,i0:()=>W,i1:()=>z,jp:()=>G,jw:()=>M,lh:()=>q,mA:()=>N,mn:()=>V,n0:()=>m,nC:()=>S,nq:()=>B,o2:()=>$,oH:()=>_,p9:()=>j,q_:()=>l,rC:()=>r,rh:()=>C,sz:()=>U,to:()=>d,tz:()=>o,uC:()=>w,uR:()=>I,ub:()=>s,yi:()=>y,zF:()=>Q});const a="https://app.dashlane.com",i="https://app.dashlane.com#/login",r="https://app.dashlane.com#/onboarding",s="https://www.dashlane.com/business/directbuy",o="https://www.dashlane.com/pricing",l="https://www.dashlane.com/business-password-manager/upgrade",c="https://support.dashlane.com/hc",d="https://support.dashlane.com/hc/requests/new",_="https://support.dashlane.com/hc/requests/new?req_type=dashlane_for_business",u="https://support.dashlane.com/hc/categories/200958889-Dashlane-Business",m="https://support.dashlane.com/hc/en-us/articles/360015304999-Joining-a-Dashlane-Business-plan-with-SSO-enabled#title2",p="https://support.dashlane.com/hc/requests/new",g="https://support.dashlane.com/hc/en-us/requests/new?utm_medium=misc&utm_source=dashlane_admin_console",h="https://support.dashlane.com/hc/en-us/articles/6351573344786?utm_medium=misc&utm_source=dashlane_admin_console",y="https://www.dashlane.com/download",b="https://support.dashlane.com/hc/articles/360014345059",x="https://dashlane.status.io/",S="https://support.dashlane.com/hc/articles/360013149040",f="https://support.dashlane.com/hc/articles/360013149040",v="https://www.dashlane.com/business/sso-download",C="https://support.dashlane.com/hc/articles/360017434219",E="https://support.dashlane.com/hc/en-us/articles/210826449",Z="https://support.dashlane.com/hc/en-us/articles/360015973719-Use-self-hosted-SSO-to-integrate-Dashlane-with-your-IdP",D="https://support.dashlane.com/hc/en-us/articles/10992671925778-Use-Dashlane-Confidential-SSO-to-integrate-with-your-IdP",T="https://support.dashlane.com/hc/en-us/articles/10992671925778",k="https://support.dashlane.com/hc/en-us/categories/200958889-Admins",I="https://support.dashlane.com/hc/en-us/articles/360013149040",A="https://support.dashlane.com/hc/en-us/articles/360013149040",w="https://support.dashlane.com/hc/en-us/articles/360013149040",N="https://www.dashlane.com/business-password-manager/enterprise",O="https://dashlane.zoom.us/webinar/register/6216504012380/WN_j-3JwzI0T1q1alUxHqsM7g#/registration",R="https://support.dashlane.com/hc/en-us/articles/212491369",L="https://support.dashlane.com/hc/articles/4516905332370",M="https://support.dashlane.com/hc/articles/4516905332370-Get-help-with-Dashlane#For-admins-only",B="https://support.dashlane.com/hc/articles/4516905332370#Purchase-order",P="https://support.dashlane.com/hc/articles/19810325141266",U="https://www.dashlane.com/terms",X="https://www.dashlane.com/privacy",z="https://support.dashlane.com/hc/requests/new?req_type=dashlane_for_business&topic=add_seats",q=`${c}/articles/4516905332370#chatbot`,j="https://go.dashlane.com/refer-a-business.html",F="https://www.dashlane.com/blog/what-is-single-sign-on-sso",G="https://dashlane.navattic.com/e11z0no0",V="https://www.dashlane.com/resources/dashlane-zero-knowledge-security",H="https://ripleyprd.wpengine.com/wp-content/uploads/2024/10/Credential-Risk-Detection-Privacy-Statement.docx.pdf",W="https://ripleyprd.wpengine.com/wp-content/uploads/2024/10/Dashlane_Credential-Risk-Detection_One-Sheet.pdf",$="https://support.apple.com/HT202039",K="https://support.apple.com/HT204088",Y="https://support.google.com/googleplay/answer/7018481?co=GENIE.Platform%3DDesktop",Q="https://support.google.com/store/answer/6160235",J=(e="")=>`https://app.dashlane.com/#/team/signup?team=${e}`}}]);