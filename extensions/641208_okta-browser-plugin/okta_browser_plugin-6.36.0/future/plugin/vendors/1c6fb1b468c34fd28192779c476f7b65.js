(() => {
var fr=Object.defineProperty;var Ii=Object.getOwnPropertyDescriptor;var Ti=Object.getOwnPropertyNames;var Si=Object.prototype.hasOwnProperty;var wi=(t,e)=>()=>(t&&(e=t(t=0)),e);var p=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Pi=(t,e)=>{for(var r in e)fr(t,r,{get:e[r],enumerable:!0})},Ci=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ti(e))!Si.call(t,i)&&i!==r&&fr(t,i,{get:()=>e[i],enumerable:!(n=Ii(e,i))||n.enumerable});return t};var D=t=>Ci(fr({},"__esModule",{value:!0}),t);var R={};Pi(R,{__addDisposableResource:()=>pn,__assign:()=>ft,__asyncDelegator:()=>sn,__asyncGenerator:()=>an,__asyncValues:()=>un,__await:()=>Le,__awaiter:()=>Jr,__classPrivateFieldGet:()=>fn,__classPrivateFieldIn:()=>gn,__classPrivateFieldSet:()=>vn,__createBinding:()=>gt,__decorate:()=>$r,__disposeResources:()=>_n,__esDecorate:()=>Oi,__exportStar:()=>tn,__extends:()=>Yr,__generator:()=>en,__importDefault:()=>dn,__importStar:()=>ln,__makeTemplateObject:()=>cn,__metadata:()=>zr,__param:()=>Zr,__propKey:()=>Ai,__read:()=>gr,__rest:()=>Hr,__runInitializers:()=>Ri,__setFunctionName:()=>Di,__spread:()=>rn,__spreadArray:()=>on,__spreadArrays:()=>nn,__values:()=>vt,default:()=>Ui});function Yr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");vr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Hr(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function $r(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(a=t[u])&&(o=(i<3?a(o):i>3?a(e,r,o):a(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}function Zr(t,e){return function(r,n){e(r,n,t)}}function Oi(t,e,r,n,i,o){function a(h){if(h!==void 0&&typeof h!="function")throw new TypeError("Function expected");return h}for(var u=n.kind,c=u==="getter"?"get":u==="setter"?"set":"value",s=!e&&t?n.static?t:t.prototype:null,l=e||(s?Object.getOwnPropertyDescriptor(s,n.name):{}),g,d=!1,v=r.length-1;v>=0;v--){var _={};for(var b in n)_[b]=b==="access"?{}:n[b];for(var b in n.access)_.access[b]=n.access[b];_.addInitializer=function(h){if(d)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(h||null))};var f=(0,r[v])(u==="accessor"?{get:l.get,set:l.set}:l[c],_);if(u==="accessor"){if(f===void 0)continue;if(f===null||typeof f!="object")throw new TypeError("Object expected");(g=a(f.get))&&(l.get=g),(g=a(f.set))&&(l.set=g),(g=a(f.init))&&i.unshift(g)}else(g=a(f))&&(u==="field"?i.unshift(g):l[c]=g)}s&&Object.defineProperty(s,n.name,l),d=!0}function Ri(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function Ai(t){return typeof t=="symbol"?t:"".concat(t)}function Di(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function zr(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Jr(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function u(l){try{s(n.next(l))}catch(g){a(g)}}function c(l){try{s(n.throw(l))}catch(g){a(g)}}function s(l){l.done?o(l.value):i(l.value).then(u,c)}s((n=n.apply(t,e||[])).next())})}function en(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(l){s=[6,l],i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function tn(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&gt(e,t,r)}function vt(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gr(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function rn(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(gr(arguments[e]));return t}function nn(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)n[i]=o[a];return n}function on(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Le(t){return this instanceof Le?(this.v=t,this):new Le(t)}function an(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(d){n[d]&&(i[d]=function(v){return new Promise(function(_,b){o.push([d,v,_,b])>1||u(d,v)})})}function u(d,v){try{c(n[d](v))}catch(_){g(o[0][3],_)}}function c(d){d.value instanceof Le?Promise.resolve(d.value.v).then(s,l):g(o[0][2],d)}function s(d){u("next",d)}function l(d){u("throw",d)}function g(d,v){d(v),o.shift(),o.length&&u(o[0][0],o[0][1])}}function sn(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=t[i]?function(a){return(r=!r)?{value:Le(t[i](a)),done:!1}:o?o(a):a}:o}}function un(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof vt=="function"?vt(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(u,c){a=t[o](a),i(u,c,a.done,a.value)})}}function i(o,a,u,c){Promise.resolve(c).then(function(s){o({value:s,done:u})},a)}}function cn(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function ln(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gt(e,t,r);return Li(e,t),e}function dn(t){return t&&t.__esModule?t:{default:t}}function fn(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function vn(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function gn(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function pn(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function _n(t){function e(n){t.error=t.hasError?new ki(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,function(o){return e(o),r()})}catch(o){e(o)}}if(t.hasError)throw t.error}return r()}var vr,ft,gt,Li,ki,Ui,A=wi(()=>{vr=function(t,e){return vr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},vr(t,e)};ft=function(){return ft=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ft.apply(this,arguments)};gt=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};Li=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};ki=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};Ui={__extends:Yr,__assign:ft,__rest:Hr,__decorate:$r,__param:Zr,__metadata:zr,__awaiter:Jr,__generator:en,__createBinding:gt,__exportStar:tn,__values:vt,__read:gr,__spread:rn,__spreadArrays:nn,__spreadArray:on,__await:Le,__asyncGenerator:an,__asyncDelegator:sn,__asyncValues:un,__makeTemplateObject:cn,__importStar:ln,__importDefault:dn,__classPrivateFieldGet:fn,__classPrivateFieldSet:vn,__classPrivateFieldIn:gn,__addDisposableResource:pn,__disposeResources:_n}});var pr=p(G=>{Object.defineProperty(G,"__esModule",{value:!0});G.CLIENT_NOT_INITIALIZED=G.INVALID_API_KEY=G.MISSING_API_KEY_MESSAGE=G.OPT_OUT_MESSAGE=G.MAX_RETRIES_EXCEEDED_MESSAGE=G.UNEXPECTED_ERROR_MESSAGE=G.SUCCESS_MESSAGE=void 0;G.SUCCESS_MESSAGE="Event tracked successfully";G.UNEXPECTED_ERROR_MESSAGE="Unexpected error occurred";G.MAX_RETRIES_EXCEEDED_MESSAGE="Event rejected due to exceeded retry count";G.OPT_OUT_MESSAGE="Event skipped due to optOut config";G.MISSING_API_KEY_MESSAGE="Event rejected due to missing API key";G.INVALID_API_KEY="Invalid API key";G.CLIENT_NOT_INITIALIZED="Client not initialized"});var hn=p(fe=>{Object.defineProperty(fe,"__esModule",{value:!0});fe.SpecialEventType=fe.RevenueProperty=fe.IdentifyOperation=void 0;var Ni;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(Ni=fe.IdentifyOperation||(fe.IdentifyOperation={}));var Mi;(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE="$revenue"})(Mi=fe.RevenueProperty||(fe.RevenueProperty={}));var qi;(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(qi=fe.SpecialEventType||(fe.SpecialEventType={}))});var yn=p(Ye=>{Object.defineProperty(Ye,"__esModule",{value:!0});Ye.LogLevel=void 0;var ji;(function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"})(ji=Ye.LogLevel||(Ye.LogLevel={}))});var mn=p(He=>{Object.defineProperty(He,"__esModule",{value:!0});He.ServerZone=void 0;var Fi;(function(t){t.US="US",t.EU="EU"})(Fi=He.ServerZone||(He.ServerZone={}))});var bn=p($e=>{Object.defineProperty($e,"__esModule",{value:!0});$e.Status=void 0;var Vi;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})(Vi=$e.Status||($e.Status={}))});var En=p(pt=>{Object.defineProperty(pt,"__esModule",{value:!0});pt.OfflineDisabled=void 0;pt.OfflineDisabled=null});var H=p(W=>{Object.defineProperty(W,"__esModule",{value:!0});W.OfflineDisabled=W.Status=W.ServerZone=W.LogLevel=W.RevenueProperty=W.IdentifyOperation=W.SpecialEventType=void 0;var _r=hn();Object.defineProperty(W,"SpecialEventType",{enumerable:!0,get:function(){return _r.SpecialEventType}});Object.defineProperty(W,"IdentifyOperation",{enumerable:!0,get:function(){return _r.IdentifyOperation}});Object.defineProperty(W,"RevenueProperty",{enumerable:!0,get:function(){return _r.RevenueProperty}});var xi=yn();Object.defineProperty(W,"LogLevel",{enumerable:!0,get:function(){return xi.LogLevel}});var Bi=mn();Object.defineProperty(W,"ServerZone",{enumerable:!0,get:function(){return Bi.ServerZone}});var Gi=bn();Object.defineProperty(W,"Status",{enumerable:!0,get:function(){return Gi.Status}});var Wi=En();Object.defineProperty(W,"OfflineDisabled",{enumerable:!0,get:function(){return Wi.OfflineDisabled}})});var ht=p(_t=>{Object.defineProperty(_t,"__esModule",{value:!0});_t.buildResult=void 0;var Ki=H(),Xi=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Ki.Status.Unknown),{event:t,code:e,message:r}};_t.buildResult=Xi});var yt=p(Ze=>{Object.defineProperty(Ze,"__esModule",{value:!0});Ze.UUID=void 0;var Qi=function(t){return t?(t^Math.random()*16>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,Ze.UUID)};Ze.UUID=Qi});var Tn=p(mt=>{Object.defineProperty(mt,"__esModule",{value:!0});mt.Timeline=void 0;var K=(A(),D(R)),In=ht(),Yi=yt(),Hi=function(){function t(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return t.prototype.register=function(e,r){var n,i,o;return K.__awaiter(this,void 0,void 0,function(){return K.__generator(this,function(a){switch(a.label){case 0:return e.name=(n=e.name)!==null&&n!==void 0?n:(0,Yi.UUID)(),e.type=(i=e.type)!==null&&i!==void 0?i:"enrichment",[4,(o=e.setup)===null||o===void 0?void 0:o.call(e,r,this.client)];case 1:return a.sent(),this.plugins.push(e),[2]}})})},t.prototype.deregister=function(e){var r;return K.__awaiter(this,void 0,void 0,function(){var n,i;return K.__generator(this,function(o){switch(o.label){case 0:return n=this.plugins.findIndex(function(a){return a.name===e}),i=this.plugins[n],this.plugins.splice(n,1),[4,(r=i.teardown)===null||r===void 0?void 0:r.call(i)];case 1:return o.sent(),[2]}})})},t.prototype.reset=function(e){this.applying=!1;var r=this.plugins;r.map(function(n){var i;return(i=n.teardown)===null||i===void 0?void 0:i.call(n)}),this.plugins=[],this.client=e},t.prototype.push=function(e){var r=this;return new Promise(function(n){r.queue.push([e,n]),r.scheduleApply(0)})},t.prototype.scheduleApply=function(e){var r=this;this.applying||(this.applying=!0,setTimeout(function(){r.apply(r.queue.shift()).then(function(){r.applying=!1,r.queue.length>0&&r.scheduleApply(0)})},e))},t.prototype.apply=function(e){return K.__awaiter(this,void 0,void 0,function(){var r,n,i,o,a,u,c,v,_,s,l,g,d,v,_,b,f,h,P,w,U,M;return K.__generator(this,function(O){switch(O.label){case 0:if(!e)return[2];r=K.__read(e,1),n=r[0],i=K.__read(e,2),o=i[1],a=this.plugins.filter(function(L){return L.type==="before"}),O.label=1;case 1:O.trys.push([1,6,7,8]),u=K.__values(a),c=u.next(),O.label=2;case 2:return c.done?[3,5]:(v=c.value,v.execute?[4,v.execute(K.__assign({},n))]:[3,4]);case 3:if(_=O.sent(),_===null)return o({event:n,code:0,message:""}),[2];n=_,O.label=4;case 4:return c=u.next(),[3,2];case 5:return[3,8];case 6:return s=O.sent(),P={error:s},[3,8];case 7:try{c&&!c.done&&(w=u.return)&&w.call(u)}finally{if(P)throw P.error}return[7];case 8:l=this.plugins.filter(function(L){return L.type==="enrichment"||L.type===void 0}),O.label=9;case 9:O.trys.push([9,14,15,16]),g=K.__values(l),d=g.next(),O.label=10;case 10:return d.done?[3,13]:(v=d.value,v.execute?[4,v.execute(K.__assign({},n))]:[3,12]);case 11:if(_=O.sent(),_===null)return o({event:n,code:0,message:""}),[2];n=_,O.label=12;case 12:return d=g.next(),[3,10];case 13:return[3,16];case 14:return b=O.sent(),U={error:b},[3,16];case 15:try{d&&!d.done&&(M=g.return)&&M.call(g)}finally{if(U)throw U.error}return[7];case 16:return f=this.plugins.filter(function(L){return L.type==="destination"}),h=f.map(function(L){var N=K.__assign({},n);return L.execute(N).catch(function(q){return(0,In.buildResult)(N,0,String(q))})}),Promise.all(h).then(function(L){var N=K.__read(L,1),q=N[0],V=q||(0,In.buildResult)(n,100,"Event not tracked, no destination plugins on the instance");o(V)}),[2]}})})},t.prototype.flush=function(){return K.__awaiter(this,void 0,void 0,function(){var e,r,n,i=this;return K.__generator(this,function(o){switch(o.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(a){return i.apply(a)}))];case 1:return o.sent(),r=this.plugins.filter(function(a){return a.type==="destination"}),n=r.map(function(a){return a.flush&&a.flush()}),[4,Promise.all(n)];case 2:return o.sent(),[2]}})})},t}();mt.Timeline=Hi});var ze=p(B=>{Object.defineProperty(B,"__esModule",{value:!0});B.EU_AMPLITUDE_BATCH_SERVER_URL=B.AMPLITUDE_BATCH_SERVER_URL=B.EU_AMPLITUDE_SERVER_URL=B.AMPLITUDE_SERVER_URL=B.STORAGE_PREFIX=B.AMPLITUDE_PREFIX=B.UNSET_VALUE=void 0;B.UNSET_VALUE="-";B.AMPLITUDE_PREFIX="AMP";B.STORAGE_PREFIX="".concat(B.AMPLITUDE_PREFIX,"_unsent");B.AMPLITUDE_SERVER_URL="https://api2.amplitude.com/2/httpapi";B.EU_AMPLITUDE_SERVER_URL="https://api.eu.amplitude.com/2/httpapi";B.AMPLITUDE_BATCH_SERVER_URL="https://api2.amplitude.com/batch";B.EU_AMPLITUDE_BATCH_SERVER_URL="https://api.eu.amplitude.com/batch"});var hr=p(Ee=>{Object.defineProperty(Ee,"__esModule",{value:!0});Ee.isValidProperties=Ee.isValidObject=void 0;var $i=(A(),D(R)),Zi=1e3,zi=function(t){if(Object.keys(t).length>Zi)return!1;for(var e in t){var r=t[e];if(!(0,Ee.isValidProperties)(e,r))return!1}return!0};Ee.isValidObject=zi;var Ji=function(t,e){var r,n;if(typeof t!="string")return!1;if(Array.isArray(e)){var i=!0;try{for(var o=$i.__values(e),a=o.next();!a.done;a=o.next()){var u=a.value;if(Array.isArray(u))return!1;if(typeof u=="object")i=i&&(0,Ee.isValidObject)(u);else if(!["number","string"].includes(typeof u))return!1;if(!i)return!1}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}else{if(e==null)return!1;if(typeof e=="object")return(0,Ee.isValidObject)(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0};Ee.isValidProperties=Ji});var yr=p(bt=>{Object.defineProperty(bt,"__esModule",{value:!0});bt.Identify=void 0;var eo=(A(),D(R)),$=H(),Sn=ze(),to=hr(),ro=function(){function t(){this._propertySet=new Set,this._properties={}}return t.prototype.getUserProperties=function(){return eo.__assign({},this._properties)},t.prototype.set=function(e,r){return this._safeSet($.IdentifyOperation.SET,e,r),this},t.prototype.setOnce=function(e,r){return this._safeSet($.IdentifyOperation.SET_ONCE,e,r),this},t.prototype.append=function(e,r){return this._safeSet($.IdentifyOperation.APPEND,e,r),this},t.prototype.prepend=function(e,r){return this._safeSet($.IdentifyOperation.PREPEND,e,r),this},t.prototype.postInsert=function(e,r){return this._safeSet($.IdentifyOperation.POSTINSERT,e,r),this},t.prototype.preInsert=function(e,r){return this._safeSet($.IdentifyOperation.PREINSERT,e,r),this},t.prototype.remove=function(e,r){return this._safeSet($.IdentifyOperation.REMOVE,e,r),this},t.prototype.add=function(e,r){return this._safeSet($.IdentifyOperation.ADD,e,r),this},t.prototype.unset=function(e){return this._safeSet($.IdentifyOperation.UNSET,e,Sn.UNSET_VALUE),this},t.prototype.clearAll=function(){return this._properties={},this._properties[$.IdentifyOperation.CLEAR_ALL]=Sn.UNSET_VALUE,this},t.prototype._safeSet=function(e,r,n){if(this._validate(e,r,n)){var i=this._properties[e];return i===void 0&&(i={},this._properties[e]=i),i[r]=n,this._propertySet.add(r),!0}return!1},t.prototype._validate=function(e,r,n){return this._properties[$.IdentifyOperation.CLEAR_ALL]!==void 0||this._propertySet.has(r)?!1:e===$.IdentifyOperation.ADD?typeof n=="number":e!==$.IdentifyOperation.UNSET&&e!==$.IdentifyOperation.REMOVE?(0,to.isValidProperties)(r,n):!0},t}();bt.Identify=ro});var mr=p(oe=>{Object.defineProperty(oe,"__esModule",{value:!0});oe.createRevenueEvent=oe.createGroupEvent=oe.createGroupIdentifyEvent=oe.createIdentifyEvent=oe.createTrackEvent=void 0;var ve=(A(),D(R)),Et=H(),no=yr(),io=function(t,e,r){var n=typeof t=="string"?{event_type:t}:t;return ve.__assign(ve.__assign(ve.__assign({},n),r),e&&{event_properties:e})};oe.createTrackEvent=io;var oo=function(t,e){var r=ve.__assign(ve.__assign({},e),{event_type:Et.SpecialEventType.IDENTIFY,user_properties:t.getUserProperties()});return r};oe.createIdentifyEvent=oo;var ao=function(t,e,r,n){var i,o=ve.__assign(ve.__assign({},n),{event_type:Et.SpecialEventType.GROUP_IDENTIFY,group_properties:r.getUserProperties(),groups:(i={},i[t]=e,i)});return o};oe.createGroupIdentifyEvent=ao;var so=function(t,e,r){var n,i=new no.Identify;i.set(t,e);var o=ve.__assign(ve.__assign({},r),{event_type:Et.SpecialEventType.IDENTIFY,user_properties:i.getUserProperties(),groups:(n={},n[t]=e,n)});return o};oe.createGroupEvent=so;var uo=function(t,e){return ve.__assign(ve.__assign({},e),{event_type:Et.SpecialEventType.REVENUE,event_properties:t.getEventProperties()})};oe.createRevenueEvent=uo});var br=p(It=>{Object.defineProperty(It,"__esModule",{value:!0});It.returnWrapper=void 0;var co=function(t){return{promise:t||Promise.resolve()}};It.returnWrapper=co});var Pn=p(Tt=>{Object.defineProperty(Tt,"__esModule",{value:!0});Tt.AmplitudeCore=void 0;var Ie=(A(),D(R)),wn=pr(),lo=Tn(),Je=mr(),Er=ht(),he=br(),fo=function(){function t(e){e===void 0&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new lo.Timeline(this),this.name=e}return t.prototype._init=function(e){return Ie.__awaiter(this,void 0,void 0,function(){return Ie.__generator(this,function(r){switch(r.label){case 0:return this.config=e,this.timeline.reset(this),[4,this.runQueuedFunctions("q")];case 1:return r.sent(),this.isReady=!0,[2]}})})},t.prototype.runQueuedFunctions=function(e){return Ie.__awaiter(this,void 0,void 0,function(){var r,n,i,o,a,u,c,s;return Ie.__generator(this,function(l){switch(l.label){case 0:r=this[e],this[e]=[],l.label=1;case 1:l.trys.push([1,8,9,10]),n=Ie.__values(r),i=n.next(),l.label=2;case 2:return i.done?[3,7]:(o=i.value,a=o(),a&&"promise"in a?[4,a.promise]:[3,4]);case 3:return l.sent(),[3,6];case 4:return[4,a];case 5:l.sent(),l.label=6;case 6:return i=n.next(),[3,2];case 7:return[3,10];case 8:return u=l.sent(),c={error:u},[3,10];case 9:try{i&&!i.done&&(s=n.return)&&s.call(n)}finally{if(c)throw c.error}return[7];case 10:return this[e].length?[4,this.runQueuedFunctions(e)]:[3,12];case 11:l.sent(),l.label=12;case 12:return[2]}})})},t.prototype.track=function(e,r,n){var i=(0,Je.createTrackEvent)(e,r,n);return(0,he.returnWrapper)(this.dispatch(i))},t.prototype.identify=function(e,r){var n=(0,Je.createIdentifyEvent)(e,r);return(0,he.returnWrapper)(this.dispatch(n))},t.prototype.groupIdentify=function(e,r,n,i){var o=(0,Je.createGroupIdentifyEvent)(e,r,n,i);return(0,he.returnWrapper)(this.dispatch(o))},t.prototype.setGroup=function(e,r,n){var i=(0,Je.createGroupEvent)(e,r,n);return(0,he.returnWrapper)(this.dispatch(i))},t.prototype.revenue=function(e,r){var n=(0,Je.createRevenueEvent)(e,r);return(0,he.returnWrapper)(this.dispatch(n))},t.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),(0,he.returnWrapper)())},t.prototype._addPlugin=function(e){return(0,he.returnWrapper)(this.timeline.register(e,this.config))},t.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),(0,he.returnWrapper)())},t.prototype._removePlugin=function(e){return(0,he.returnWrapper)(this.timeline.deregister(e))},t.prototype.dispatchWithCallback=function(e,r){if(!this.isReady)return r((0,Er.buildResult)(e,0,wn.CLIENT_NOT_INITIALIZED));this.process(e).then(r)},t.prototype.dispatch=function(e){return Ie.__awaiter(this,void 0,void 0,function(){var r=this;return Ie.__generator(this,function(n){return this.isReady?[2,this.process(e)]:[2,new Promise(function(i){r.dispatchQ.push(r.dispatchWithCallback.bind(r,e,i))})]})})},t.prototype.process=function(e){return Ie.__awaiter(this,void 0,void 0,function(){var i,r,n,i;return Ie.__generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.config.optOut?[2,(0,Er.buildResult)(e,0,wn.OPT_OUT_MESSAGE)]:[4,this.timeline.push(e)];case 1:return i=o.sent(),i.code===200?this.config.loggerProvider.log(i.message):i.code===100?this.config.loggerProvider.warn(i.message):this.config.loggerProvider.error(i.message),[2,i];case 2:return r=o.sent(),n=String(r),this.config.loggerProvider.error(n),i=(0,Er.buildResult)(e,0,n),[2,i];case 3:return[2]}})})},t.prototype.setOptOut=function(e){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!e));return}this._setOptOut(e)},t.prototype._setOptOut=function(e){this.config.optOut=!!e},t.prototype.flush=function(){return(0,he.returnWrapper)(this.timeline.flush())},t}();Tt.AmplitudeCore=fo});var Cn=p(St=>{Object.defineProperty(St,"__esModule",{value:!0});St.Revenue=void 0;var vo=(A(),D(R)),et=H(),go=hr(),po=function(){function t(){this.productId="",this.quantity=1,this.price=0}return t.prototype.setProductId=function(e){return this.productId=e,this},t.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},t.prototype.setPrice=function(e){return this.price=e,this},t.prototype.setRevenueType=function(e){return this.revenueType=e,this},t.prototype.setRevenue=function(e){return this.revenue=e,this},t.prototype.setEventProperties=function(e){return(0,go.isValidObject)(e)&&(this.properties=e),this},t.prototype.getEventProperties=function(){var e=this.properties?vo.__assign({},this.properties):{};return e[et.RevenueProperty.REVENUE_PRODUCT_ID]=this.productId,e[et.RevenueProperty.REVENUE_QUANTITY]=this.quantity,e[et.RevenueProperty.REVENUE_PRICE]=this.price,e[et.RevenueProperty.REVENUE_TYPE]=this.revenueType,e[et.RevenueProperty.REVENUE]=this.revenue,e},t}();St.Revenue=po});var On=p(wt=>{Object.defineProperty(wt,"__esModule",{value:!0});wt.chunk=void 0;var _o=function(t,e){var r=Math.max(e,1);return t.reduce(function(n,i,o){var a=Math.floor(o/r);return n[a]||(n[a]=[]),n[a].push(i),n},[])};wt.chunk=_o});var Ir=p(Ct=>{Object.defineProperty(Ct,"__esModule",{value:!0});Ct.Logger=void 0;var Ce=H(),Pt="Amplitude Logger ",ho=function(){function t(){this.logLevel=Ce.LogLevel.None}return t.prototype.disable=function(){this.logLevel=Ce.LogLevel.None},t.prototype.enable=function(e){e===void 0&&(e=Ce.LogLevel.Warn),this.logLevel=e},t.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<Ce.LogLevel.Verbose||console.log("".concat(Pt,"[Log]: ").concat(e.join(" ")))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<Ce.LogLevel.Warn||console.warn("".concat(Pt,"[Warn]: ").concat(e.join(" ")))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<Ce.LogLevel.Error||console.error("".concat(Pt,"[Error]: ").concat(e.join(" ")))},t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<Ce.LogLevel.Debug||console.log("".concat(Pt,"[Debug]: ").concat(e.join(" ")))},t}();Ct.Logger=ho});var Tr=p(X=>{Object.defineProperty(X,"__esModule",{value:!0});X.createServerConfig=X.getServerUrl=X.Config=X.getDefaultConfig=void 0;var yo=H(),tt=ze(),mo=Ir(),bo=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:yo.LogLevel.Warn,loggerProvider:new mo.Logger,offline:!1,optOut:!1,serverUrl:tt.AMPLITUDE_SERVER_URL,serverZone:"US",useBatch:!1}};X.getDefaultConfig=bo;var Eo=function(){function t(e){var r,n,i,o;this._optOut=!1;var a=(0,X.getDefaultConfig)();this.apiKey=e.apiKey,this.flushIntervalMillis=(r=e.flushIntervalMillis)!==null&&r!==void 0?r:a.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||a.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||a.flushQueueSize,this.instanceName=e.instanceName||a.instanceName,this.loggerProvider=e.loggerProvider||a.loggerProvider,this.logLevel=(n=e.logLevel)!==null&&n!==void 0?n:a.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:a.offline,this.optOut=(i=e.optOut)!==null&&i!==void 0?i:a.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||a.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(o=e.useBatch)!==null&&o!==void 0?o:a.useBatch,this.loggerProvider.enable(this.logLevel);var u=(0,X.createServerConfig)(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=u.serverZone,this.serverUrl=u.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),t}();X.Config=Eo;var Io=function(t,e){return t==="EU"?e?tt.EU_AMPLITUDE_BATCH_SERVER_URL:tt.EU_AMPLITUDE_SERVER_URL:e?tt.AMPLITUDE_BATCH_SERVER_URL:tt.AMPLITUDE_SERVER_URL};X.getServerUrl=Io;var To=function(t,e,r){if(t===void 0&&(t=""),e===void 0&&(e=(0,X.getDefaultConfig)().serverZone),r===void 0&&(r=(0,X.getDefaultConfig)().useBatch),t)return{serverUrl:t,serverZone:void 0};var n=["US","EU"].includes(e)?e:(0,X.getDefaultConfig)().serverZone;return{serverZone:n,serverUrl:(0,X.getServerUrl)(n,r)}};X.createServerConfig=To});var Rn=p(ke=>{Object.defineProperty(ke,"__esModule",{value:!0});ke.Destination=ke.getResponseBodyString=void 0;var Y=(A(),D(R)),rt=H(),nt=pr(),So=ze(),wo=On(),Po=ht(),Co=Tr(),Oo=yt();function Ro(t){return t instanceof Error?t.message:String(t)}function it(t){var e="";try{"body"in t&&(e=JSON.stringify(t.body,null,2))}catch{}return e}ke.getResponseBodyString=it;var Ao=function(){function t(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return t.prototype.setup=function(e){var r;return Y.__awaiter(this,void 0,void 0,function(){var n,i=this;return Y.__generator(this,function(o){switch(o.label){case 0:return this.config=e,this.storageKey="".concat(So.STORAGE_PREFIX,"_").concat(this.config.apiKey.substring(0,10)),[4,(r=this.config.storageProvider)===null||r===void 0?void 0:r.get(this.storageKey)];case 1:return n=o.sent(),n&&n.length>0&&Promise.all(n.map(function(a){return i.execute(a)})).catch(),[2,Promise.resolve(void 0)]}})})},t.prototype.execute=function(e){var r=this;return e.insert_id||(e.insert_id=(0,Oo.UUID)()),new Promise(function(n){var i={event:e,attempts:0,callback:function(o){return n(o)},timeout:0};r.addToQueue(i)})},t.prototype.getTryableList=function(e){var r=this;return e.filter(function(n){return n.attempts<r.config.flushMaxRetries?(n.attempts+=1,!0):(r.fulfillRequest([n],500,nt.MAX_RETRIES_EXCEEDED_MESSAGE),!1)})},t.prototype.scheduleTryable=function(e,r){var n=this;r===void 0&&(r=!1),e.forEach(function(i){if(r&&(n.queue=n.queue.concat(i)),i.timeout===0){n.schedule(n.config.flushIntervalMillis);return}setTimeout(function(){i.timeout=0,n.schedule(0)},i.timeout)})},t.prototype.addToQueue=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=this.getTryableList(e);this.scheduleTryable(n,!0),this.saveEvents()},t.prototype.schedule=function(e){var r=this;this.scheduled||this.config.offline||(this.scheduled=setTimeout(function(){r.flush(!0).then(function(){r.queue.length>0&&r.schedule(e)})},e))},t.prototype.flush=function(e){return e===void 0&&(e=!1),Y.__awaiter(this,void 0,void 0,function(){var r,n,i,o=this;return Y.__generator(this,function(a){switch(a.label){case 0:return this.config.offline?(this.config.loggerProvider.debug("Skipping flush while offline."),[2]):(r=[],n=[],this.queue.forEach(function(u){return u.timeout===0?r.push(u):n.push(u)}),this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),i=(0,wo.chunk)(r,this.config.flushQueueSize),[4,Promise.all(i.map(function(u){return o.send(u,e)}))]);case 1:return a.sent(),this.scheduleTryable(n),[2]}})})},t.prototype.send=function(e,r){return r===void 0&&(r=!0),Y.__awaiter(this,void 0,void 0,function(){var n,i,o,a,u;return Y.__generator(this,function(c){switch(c.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,nt.MISSING_API_KEY_MESSAGE)];n={api_key:this.config.apiKey,events:e.map(function(s){var l=s.event,g=l.extra,d=Y.__rest(l,["extra"]);return d}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString()},c.label=1;case 1:return c.trys.push([1,3,,4]),i=(0,Co.createServerConfig)(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(i,n)];case 2:return o=c.sent(),o===null?(this.fulfillRequest(e,0,nt.UNEXPECTED_ERROR_MESSAGE),[2]):r?(this.handleResponse(o,e),[3,4]):("body"in o?this.fulfillRequest(e,o.statusCode,"".concat(o.status,": ").concat(it(o))):this.fulfillRequest(e,o.statusCode,o.status),[2]);case 3:return a=c.sent(),u=Ro(a),this.config.loggerProvider.error(u),this.handleResponse({status:rt.Status.Failed,statusCode:0},e),[3,4];case 4:return[2]}})})},t.prototype.handleResponse=function(e,r){var n=e.status;switch(n){case rt.Status.Success:{this.handleSuccessResponse(e,r);break}case rt.Status.Invalid:{this.handleInvalidResponse(e,r);break}case rt.Status.PayloadTooLarge:{this.handlePayloadTooLargeResponse(e,r);break}case rt.Status.RateLimit:{this.handleRateLimitResponse(e,r);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(n,"' provided for ").concat(r.length,' events"}')),this.handleOtherResponse(r);break}}},t.prototype.handleSuccessResponse=function(e,r){this.fulfillRequest(r,e.statusCode,nt.SUCCESS_MESSAGE)},t.prototype.handleInvalidResponse=function(e,r){var n=this;if(e.body.missingField||e.body.error.startsWith(nt.INVALID_API_KEY)){this.fulfillRequest(r,e.statusCode,e.body.error);return}var i=Y.__spreadArray(Y.__spreadArray(Y.__spreadArray(Y.__spreadArray([],Y.__read(Object.values(e.body.eventsWithInvalidFields)),!1),Y.__read(Object.values(e.body.eventsWithMissingFields)),!1),Y.__read(Object.values(e.body.eventsWithInvalidIdLengths)),!1),Y.__read(e.body.silencedEvents),!1).flat(),o=new Set(i),a=r.filter(function(c,s){if(o.has(s)){n.fulfillRequest([c],e.statusCode,e.body.error);return}return!0});a.length>0&&this.config.loggerProvider.warn(it(e));var u=this.getTryableList(a);this.scheduleTryable(u)},t.prototype.handlePayloadTooLargeResponse=function(e,r){if(r.length===1){this.fulfillRequest(r,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(it(e)),this.config.flushQueueSize/=2;var n=this.getTryableList(r);this.scheduleTryable(n)},t.prototype.handleRateLimitResponse=function(e,r){var n=this,i=Object.keys(e.body.exceededDailyQuotaUsers),o=Object.keys(e.body.exceededDailyQuotaDevices),a=e.body.throttledEvents,u=new Set(i),c=new Set(o),s=new Set(a),l=r.filter(function(d,v){if(d.event.user_id&&u.has(d.event.user_id)||d.event.device_id&&c.has(d.event.device_id)){n.fulfillRequest([d],e.statusCode,e.body.error);return}return s.has(v)&&(d.timeout=n.throttleTimeout),!0});l.length>0&&this.config.loggerProvider.warn(it(e));var g=this.getTryableList(l);this.scheduleTryable(g)},t.prototype.handleOtherResponse=function(e){var r=this,n=e.map(function(o){return o.timeout=o.attempts*r.retryTimeout,o}),i=this.getTryableList(n);this.scheduleTryable(i)},t.prototype.fulfillRequest=function(e,r,n){this.removeEvents(e),e.forEach(function(i){return i.callback((0,Po.buildResult)(i.event,r,n))})},t.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map(function(r){return r.event});this.config.storageProvider.set(this.storageKey,e)}},t.prototype.removeEvents=function(e){this.queue=this.queue.filter(function(r){return!e.some(function(n){return n.event.insert_id===r.event.insert_id})}),this.saveEvents()},t}();ke.Destination=Ao});var An=p(Z=>{Object.defineProperty(Z,"__esModule",{value:!0});Z.debugWrapper=Z.getClientStates=Z.getValueByStringPath=Z.getClientLogConfig=Z.getStacktrace=void 0;var Sr=(A(),D(R)),Do=H(),Lo=function(t){t===void 0&&(t=0);var e=new Error().stack||"";return e.split(`
`).slice(2+t).map(function(r){return r.trim()})};Z.getStacktrace=Lo;var ko=function(t){return function(){var e=Sr.__assign({},t.config),r=e.loggerProvider,n=e.logLevel;return{logger:r,logLevel:n}}};Z.getClientLogConfig=ko;var Uo=function(t,e){var r,n;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");try{for(var i=Sr.__values(e.split(".")),o=i.next();!o.done;o=i.next()){var a=o.value;if(a in t)t=t[a];else return}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return t};Z.getValueByStringPath=Uo;var No=function(t,e){return function(){var r,n,i={};try{for(var o=Sr.__values(e),a=o.next();!a.done;a=o.next()){var u=a.value;i[u]=(0,Z.getValueByStringPath)(t,u)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i}};Z.getClientStates=No;var Mo=function(t,e,r,n,i){return i===void 0&&(i=null),function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var u=r(),c=u.logger,s=u.logLevel;if(s&&s<Do.LogLevel.Debug||!s||!c)return t.apply(i,o);var l={type:"invoke public method",name:e,args:o,stacktrace:(0,Z.getStacktrace)(1),time:{start:new Date().toISOString()},states:{}};n&&l.states&&(l.states.before=n());var g=t.apply(i,o);return g&&g.promise?g.promise.then(function(){n&&l.states&&(l.states.after=n()),l.time&&(l.time.end=new Date().toISOString()),c.debug(JSON.stringify(l,null,2))}):(n&&l.states&&(l.states.after=n()),l.time&&(l.time.end=new Date().toISOString()),c.debug(JSON.stringify(l,null,2))),g}};Z.debugWrapper=Mo});var Dn=p(Ot=>{Object.defineProperty(Ot,"__esModule",{value:!0});Ot.MemoryStorage=void 0;var ae=(A(),D(R)),qo=function(){function t(){this.memoryStorage=new Map}return t.prototype.isEnabled=function(){return ae.__awaiter(this,void 0,void 0,function(){return ae.__generator(this,function(e){return[2,!0]})})},t.prototype.get=function(e){return ae.__awaiter(this,void 0,void 0,function(){return ae.__generator(this,function(r){return[2,this.memoryStorage.get(e)]})})},t.prototype.getRaw=function(e){return ae.__awaiter(this,void 0,void 0,function(){var r;return ae.__generator(this,function(n){switch(n.label){case 0:return[4,this.get(e)];case 1:return r=n.sent(),[2,r?JSON.stringify(r):void 0]}})})},t.prototype.set=function(e,r){return ae.__awaiter(this,void 0,void 0,function(){return ae.__generator(this,function(n){return this.memoryStorage.set(e,r),[2]})})},t.prototype.remove=function(e){return ae.__awaiter(this,void 0,void 0,function(){return ae.__generator(this,function(r){return this.memoryStorage.delete(e),[2]})})},t.prototype.reset=function(){return ae.__awaiter(this,void 0,void 0,function(){return ae.__generator(this,function(e){return this.memoryStorage.clear(),[2]})})},t}();Ot.MemoryStorage=qo});var Ln=p(Rt=>{Object.defineProperty(Rt,"__esModule",{value:!0});Rt.BaseTransport=void 0;var se=H(),jo=function(){function t(){}return t.prototype.send=function(e,r){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var r,n,i,o,a,u,c,s,l,g,d,v,_,b,f,h,P,w,U,M,O,L;if(typeof e!="object")return null;var N=e.code||0,q=this.buildStatus(N);switch(q){case se.Status.Success:return{status:q,statusCode:N,body:{eventsIngested:(r=e.events_ingested)!==null&&r!==void 0?r:0,payloadSizeBytes:(n=e.payload_size_bytes)!==null&&n!==void 0?n:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case se.Status.Invalid:return{status:q,statusCode:N,body:{error:(o=e.error)!==null&&o!==void 0?o:"",missingField:(a=e.missing_field)!==null&&a!==void 0?a:"",eventsWithInvalidFields:(u=e.events_with_invalid_fields)!==null&&u!==void 0?u:{},eventsWithMissingFields:(c=e.events_with_missing_fields)!==null&&c!==void 0?c:{},eventsWithInvalidIdLengths:(s=e.events_with_invalid_id_lengths)!==null&&s!==void 0?s:{},epsThreshold:(l=e.eps_threshold)!==null&&l!==void 0?l:0,exceededDailyQuotaDevices:(g=e.exceeded_daily_quota_devices)!==null&&g!==void 0?g:{},silencedDevices:(d=e.silenced_devices)!==null&&d!==void 0?d:[],silencedEvents:(v=e.silenced_events)!==null&&v!==void 0?v:[],throttledDevices:(_=e.throttled_devices)!==null&&_!==void 0?_:{},throttledEvents:(b=e.throttled_events)!==null&&b!==void 0?b:[]}};case se.Status.PayloadTooLarge:return{status:q,statusCode:N,body:{error:(f=e.error)!==null&&f!==void 0?f:""}};case se.Status.RateLimit:return{status:q,statusCode:N,body:{error:(h=e.error)!==null&&h!==void 0?h:"",epsThreshold:(P=e.eps_threshold)!==null&&P!==void 0?P:0,throttledDevices:(w=e.throttled_devices)!==null&&w!==void 0?w:{},throttledUsers:(U=e.throttled_users)!==null&&U!==void 0?U:{},exceededDailyQuotaDevices:(M=e.exceeded_daily_quota_devices)!==null&&M!==void 0?M:{},exceededDailyQuotaUsers:(O=e.exceeded_daily_quota_users)!==null&&O!==void 0?O:{},throttledEvents:(L=e.throttled_events)!==null&&L!==void 0?L:[]}};case se.Status.Timeout:default:return{status:q,statusCode:N}}},t.prototype.buildStatus=function(e){return e>=200&&e<300?se.Status.Success:e===429?se.Status.RateLimit:e===413?se.Status.PayloadTooLarge:e===408?se.Status.Timeout:e>=400&&e<500?se.Status.Invalid:e>=500?se.Status.Failed:se.Status.Unknown},t}();Rt.BaseTransport=jo});var J=p(C=>{Object.defineProperty(C,"__esModule",{value:!0});C.createIdentifyEvent=C.BaseTransport=C.MemoryStorage=C.UUID=C.getClientStates=C.getClientLogConfig=C.debugWrapper=C.returnWrapper=C.STORAGE_PREFIX=C.AMPLITUDE_PREFIX=C.Logger=C.Config=C.Destination=C.Revenue=C.Identify=C.AmplitudeCore=void 0;var Fo=Pn();Object.defineProperty(C,"AmplitudeCore",{enumerable:!0,get:function(){return Fo.AmplitudeCore}});var Vo=yr();Object.defineProperty(C,"Identify",{enumerable:!0,get:function(){return Vo.Identify}});var xo=Cn();Object.defineProperty(C,"Revenue",{enumerable:!0,get:function(){return xo.Revenue}});var Bo=Rn();Object.defineProperty(C,"Destination",{enumerable:!0,get:function(){return Bo.Destination}});var Go=Tr();Object.defineProperty(C,"Config",{enumerable:!0,get:function(){return Go.Config}});var Wo=Ir();Object.defineProperty(C,"Logger",{enumerable:!0,get:function(){return Wo.Logger}});var kn=ze();Object.defineProperty(C,"AMPLITUDE_PREFIX",{enumerable:!0,get:function(){return kn.AMPLITUDE_PREFIX}});Object.defineProperty(C,"STORAGE_PREFIX",{enumerable:!0,get:function(){return kn.STORAGE_PREFIX}});var Ko=br();Object.defineProperty(C,"returnWrapper",{enumerable:!0,get:function(){return Ko.returnWrapper}});var wr=An();Object.defineProperty(C,"debugWrapper",{enumerable:!0,get:function(){return wr.debugWrapper}});Object.defineProperty(C,"getClientLogConfig",{enumerable:!0,get:function(){return wr.getClientLogConfig}});Object.defineProperty(C,"getClientStates",{enumerable:!0,get:function(){return wr.getClientStates}});var Xo=yt();Object.defineProperty(C,"UUID",{enumerable:!0,get:function(){return Xo.UUID}});var Qo=Dn();Object.defineProperty(C,"MemoryStorage",{enumerable:!0,get:function(){return Qo.MemoryStorage}});var Yo=Ln();Object.defineProperty(C,"BaseTransport",{enumerable:!0,get:function(){return Yo.BaseTransport}});var Ho=mr();Object.defineProperty(C,"createIdentifyEvent",{enumerable:!0,get:function(){return Ho.createIdentifyEvent}})});var Dt=p(At=>{Object.defineProperty(At,"__esModule",{value:!0});At.getGlobalScope=void 0;var $o=function(){if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global};At.getGlobalScope=$o});var Pr=p(Se=>{Object.defineProperty(Se,"__esModule",{value:!0});Se.tryDecodeURIComponent=Se.getQueryParams=void 0;var Zo=Dt(),zo=function(){var t,e=(0,Zo.getGlobalScope)();if(!(!((t=e?.location)===null||t===void 0)&&t.search))return{};var r=e.location.search.substring(1).split("&").filter(Boolean),n=r.reduce(function(i,o){var a=o.split("=",2),u=(0,Se.tryDecodeURIComponent)(a[0]),c=(0,Se.tryDecodeURIComponent)(a[1]);return c&&(i[u]=c),i},{});return n};Se.getQueryParams=zo;var Jo=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}};Se.tryDecodeURIComponent=Jo});var Ue=p(T=>{Object.defineProperty(T,"__esModule",{value:!0});T.MKTG=T.BASE_CAMPAIGN=T.EMPTY_VALUE=T.WBRAID=T.TWCLID=T.TTCLID=T.RDT_CID=T.MSCLKID=T.LI_FAT_ID=T.KO_CLICK_ID=T.GCLID=T.GBRAID=T.FBCLID=T.DCLID=T.UTM_TERM=T.UTM_SOURCE=T.UTM_MEDIUM=T.UTM_ID=T.UTM_CONTENT=T.UTM_CAMPAIGN=void 0;T.UTM_CAMPAIGN="utm_campaign";T.UTM_CONTENT="utm_content";T.UTM_ID="utm_id";T.UTM_MEDIUM="utm_medium";T.UTM_SOURCE="utm_source";T.UTM_TERM="utm_term";T.DCLID="dclid";T.FBCLID="fbclid";T.GBRAID="gbraid";T.GCLID="gclid";T.KO_CLICK_ID="ko_click_id";T.LI_FAT_ID="li_fat_id";T.MSCLKID="msclkid";T.RDT_CID="rtd_cid";T.TTCLID="ttclid";T.TWCLID="twclid";T.WBRAID="wbraid";T.EMPTY_VALUE="EMPTY";T.BASE_CAMPAIGN={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0};T.MKTG="MKTG"});var kt=p(Lt=>{Object.defineProperty(Lt,"__esModule",{value:!0});Lt.CampaignParser=void 0;var Ne=(A(),D(R)),Un=Pr(),k=Ue(),ea=function(){function t(){}return t.prototype.parse=function(){return Ne.__awaiter(this,void 0,void 0,function(){return Ne.__generator(this,function(e){return[2,Ne.__assign(Ne.__assign(Ne.__assign(Ne.__assign({},k.BASE_CAMPAIGN),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=(0,Un.getQueryParams)(),r=e[k.UTM_CAMPAIGN],n=e[k.UTM_CONTENT],i=e[k.UTM_ID],o=e[k.UTM_MEDIUM],a=e[k.UTM_SOURCE],u=e[k.UTM_TERM];return{utm_campaign:r,utm_content:n,utm_id:i,utm_medium:o,utm_source:a,utm_term:u}},t.prototype.getReferrer=function(){var e,r,n={referrer:void 0,referring_domain:void 0};try{n.referrer=document.referrer||void 0,n.referring_domain=(r=(e=n.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&r!==void 0?r:void 0}catch{}return n},t.prototype.getClickIds=function(){var e,r=(0,Un.getQueryParams)();return e={},e[k.DCLID]=r[k.DCLID],e[k.FBCLID]=r[k.FBCLID],e[k.GBRAID]=r[k.GBRAID],e[k.GCLID]=r[k.GCLID],e[k.KO_CLICK_ID]=r[k.KO_CLICK_ID],e[k.LI_FAT_ID]=r[k.LI_FAT_ID],e[k.MSCLKID]=r[k.MSCLKID],e[k.RDT_CID]=r[k.RDT_CID],e[k.TTCLID]=r[k.TTCLID],e[k.TWCLID]=r[k.TWCLID],e[k.WBRAID]=r[k.WBRAID],e},t}();Lt.CampaignParser=ea});var Cr=p(Me=>{Object.defineProperty(Me,"__esModule",{value:!0});Me.getOldCookieName=Me.getCookieName=void 0;var Nn=J(),ta=function(t,e,r){return e===void 0&&(e=""),r===void 0&&(r=10),[Nn.AMPLITUDE_PREFIX,e,t.substring(0,r)].filter(Boolean).join("_")};Me.getCookieName=ta;var ra=function(t){return"".concat(Nn.AMPLITUDE_PREFIX.toLowerCase(),"_").concat(t.substring(0,6))};Me.getOldCookieName=ra});var jn=p(Ut=>{Object.defineProperty(Ut,"__esModule",{value:!0});Ut.CampaignTracker=void 0;var ee=(A(),D(R)),Mn=J(),na=Cr(),ia=kt(),Or=Ue(),oa=function(){function t(e,r){var n,i;this.storage=r.storage,this.storageKey=(0,na.getCookieName)(e,Or.MKTG),this.parser=new ia.CampaignParser,this.track=r.track,this.onNewCampaign=r.onNewCampaign,this.disabled=!!r.disabled,this.trackNewCampaigns=!!r.trackNewCampaigns,this.trackPageViews=!!r.trackPageViews,this.excludeReferrers=(n=r.excludeReferrers)!==null&&n!==void 0?n:[],typeof location<"u"&&this.excludeReferrers.unshift(location.hostname),this.initialEmptyValue=(i=r.initialEmptyValue)!==null&&i!==void 0?i:Or.EMPTY_VALUE}return t.prototype.isNewCampaign=function(e,r,n){n===void 0&&(n=!1);var i=e.referrer,o=e.referring_domain,a=ee.__rest(e,["referrer","referring_domain"]),u=r||{},c=u.referrer,s=u.referring_domain,l=ee.__rest(u,["referrer","referring_domain"]);if(e.referring_domain&&this.excludeReferrers.includes(e.referring_domain))return!1;var g=JSON.stringify(a)!==JSON.stringify(l),d=n?qn(o||"")!==qn(s||""):o!==s;return!r||g||d},t.prototype.saveCampaignToStorage=function(e){return ee.__awaiter(this,void 0,void 0,function(){return ee.__generator(this,function(r){switch(r.label){case 0:return[4,this.storage.set(this.storageKey,e)];case 1:return r.sent(),[2]}})})},t.prototype.getCampaignFromStorage=function(){return ee.__awaiter(this,void 0,void 0,function(){return ee.__generator(this,function(e){switch(e.label){case 0:return[4,this.storage.get(this.storageKey)];case 1:return[2,e.sent()]}})})},t.prototype.createCampaignEvent=function(e){var r=this,n=ee.__assign(ee.__assign({},Or.BASE_CAMPAIGN),e),i=Object.entries(n).reduce(function(a,u){var c=ee.__read(u,2),s=c[0],l=c[1];return a.setOnce("initial_".concat(s),l||r.initialEmptyValue),l?a.set(s,l):a.unset(s)},new Mn.Identify),o={event_type:"Page View",event_properties:{page_title:typeof document<"u"&&document.title||"",page_location:typeof location<"u"&&location.href||"",page_path:typeof location<"u"&&location.pathname||""}};return ee.__assign(ee.__assign({},(0,Mn.createIdentifyEvent)(i)),this.trackPageViews&&o)},t.prototype.send=function(e){return ee.__awaiter(this,void 0,void 0,function(){var r,n;return ee.__generator(this,function(i){switch(i.label){case 0:return this.disabled?[2]:[4,this.parser.parse()];case 1:return r=i.sent(),[4,this.getCampaignFromStorage()];case 2:if(n=i.sent(),!e){if(!this.trackNewCampaigns||!this.isNewCampaign(r,n))return[2];this.onNewCampaign(r)}return[4,this.track(this.createCampaignEvent(r))];case 3:return i.sent(),[4,this.saveCampaignToStorage(r)];case 4:return i.sent(),[2]}})})},t}();Ut.CampaignTracker=oa;var qn=function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")}});var Rr=p(ge=>{Object.defineProperty(ge,"__esModule",{value:!0});ge.getDefaultExcludedReferrers=ge.createCampaignEvent=ge.isExcludedReferrer=ge.isNewCampaign=void 0;var ot=(A(),D(R)),Fn=J(),aa=Ue(),Vn=function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")},sa=function(t){return Object.values(t).every(function(e){return!e})},ua=function(t,e,r,n){n===void 0&&(n=!0);var i=t.referrer,o=t.referring_domain,a=ot.__rest(t,["referrer","referring_domain"]),u=e||{},c=u.referrer,s=u.referring_domain,l=ot.__rest(u,["referrer","referring_domain"]);if((0,ge.isExcludedReferrer)(r.excludeReferrers,t.referring_domain)||!n&&sa(t)&&e)return!1;var g=JSON.stringify(a)!==JSON.stringify(l),d=Vn(o||"")!==Vn(s||"");return!e||g||d};ge.isNewCampaign=ua;var ca=function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=""),t.some(function(r){return r instanceof RegExp?r.test(e):r===e})};ge.isExcludedReferrer=ca;var la=function(t,e){var r=ot.__assign(ot.__assign({},aa.BASE_CAMPAIGN),t),n=Object.entries(r).reduce(function(i,o){var a,u=ot.__read(o,2),c=u[0],s=u[1];return i.setOnce("initial_".concat(c),(a=s??e.initialEmptyValue)!==null&&a!==void 0?a:"EMPTY"),s?i.set(c,s):i.unset(c)},new Fn.Identify);return(0,Fn.createIdentifyEvent)(n)};ge.createCampaignEvent=la;var da=function(t){var e=t;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]};ge.getDefaultExcludedReferrers=da});var Ar=p(Nt=>{Object.defineProperty(Nt,"__esModule",{value:!0});Nt.getStorageKey=void 0;var fa=J(),va=function(t,e,r){return e===void 0&&(e=""),r===void 0&&(r=10),[fa.AMPLITUDE_PREFIX,e,t.substring(0,r)].filter(Boolean).join("_")};Nt.getStorageKey=va});var Dr=p(Mt=>{Object.defineProperty(Mt,"__esModule",{value:!0});Mt.isNewSession=void 0;var ga=function(t,e){e===void 0&&(e=Date.now());var r=Date.now(),n=r-e;return n>t};Mt.isNewSession=ga});var xn=p(qt=>{Object.defineProperty(qt,"__esModule",{value:!0});qt.WebAttribution=void 0;var qe=(A(),D(R)),Lr=Rr(),pa=Ar(),_a=kt(),ha=Ue(),ya=Dr(),ma=function(){function t(e,r){var n;this.shouldTrackNewCampaign=!1,this.options=qe.__assign({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:(0,Lr.getDefaultExcludedReferrers)((n=r.cookieOptions)===null||n===void 0?void 0:n.domain)},e),this.storage=r.cookieStorage,this.storageKey=(0,pa.getStorageKey)(r.apiKey,"MKTG"),this.currentCampaign=ha.BASE_CAMPAIGN,this.sessionTimeout=r.sessionTimeout,this.lastEventTime=r.lastEventTime,r.loggerProvider.log("Installing web attribution tracking.")}return t.prototype.init=function(){return qe.__awaiter(this,void 0,void 0,function(){var e,r;return qe.__generator(this,function(n){switch(n.label){case 0:return[4,this.fetchCampaign()];case 1:return r=qe.__read.apply(void 0,[n.sent(),2]),this.currentCampaign=r[0],this.previousCampaign=r[1],e=this.lastEventTime?(0,ya.isNewSession)(this.sessionTimeout,this.lastEventTime):!0,(0,Lr.isNewCampaign)(this.currentCampaign,this.previousCampaign,this.options,e)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.fetchCampaign=function(){return qe.__awaiter(this,void 0,void 0,function(){return qe.__generator(this,function(e){switch(e.label){case 0:return[4,Promise.all([new _a.CampaignParser().parse(),this.storage.get(this.storageKey)])];case 1:return[2,e.sent()]}})})},t.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var r=(0,Lr.createCampaignEvent)(this.currentCampaign,this.options);return e&&(r.event_id=e),r},t.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},t}();qt.WebAttribution=ma});var Bn=p(jt=>{Object.defineProperty(jt,"__esModule",{value:!0});jt.CookieStorage=void 0;var te=(A(),D(R)),kr=Dt(),ba=function(){function t(e){this.options=te.__assign({},e)}return t.prototype.isEnabled=function(){return te.__awaiter(this,void 0,void 0,function(){var e,r,n,i;return te.__generator(this,function(o){switch(o.label){case 0:if(!(0,kr.getGlobalScope)())return[2,!1];t.testValue=String(Date.now()),e=new t(this.options),r="AMP_TEST",o.label=1;case 1:return o.trys.push([1,4,5,7]),[4,e.set(r,t.testValue)];case 2:return o.sent(),[4,e.get(r)];case 3:return n=o.sent(),[2,n===t.testValue];case 4:return i=o.sent(),[2,!1];case 5:return[4,e.remove(r)];case 6:return o.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return te.__awaiter(this,void 0,void 0,function(){var r;return te.__generator(this,function(n){switch(n.label){case 0:return[4,this.getRaw(e)];case 1:if(r=n.sent(),!r)return[2,void 0];try{try{r=decodeURIComponent(atob(r))}catch{}return[2,JSON.parse(r)]}catch{return[2,void 0]}return[2]}})})},t.prototype.getRaw=function(e){var r,n;return te.__awaiter(this,void 0,void 0,function(){var i,o,a;return te.__generator(this,function(u){return i=(0,kr.getGlobalScope)(),o=(n=(r=i?.document)===null||r===void 0?void 0:r.cookie.split("; "))!==null&&n!==void 0?n:[],a=o.find(function(c){return c.indexOf(e+"=")===0}),a?[2,a.substring(e.length+1)]:[2,void 0]})})},t.prototype.set=function(e,r){var n;return te.__awaiter(this,void 0,void 0,function(){var i,o,a,u,c,s;return te.__generator(this,function(l){try{i=(n=this.options.expirationDays)!==null&&n!==void 0?n:0,o=r!==null?i:-1,a=void 0,o&&(u=new Date,u.setTime(u.getTime()+o*24*60*60*1e3),a=u),c="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(r)))),a&&(c+="; expires=".concat(a.toUTCString())),c+="; path=/",this.options.domain&&(c+="; domain=".concat(this.options.domain)),this.options.secure&&(c+="; Secure"),this.options.sameSite&&(c+="; SameSite=".concat(this.options.sameSite)),s=(0,kr.getGlobalScope)(),s&&(s.document.cookie=c)}catch{}return[2]})})},t.prototype.remove=function(e){return te.__awaiter(this,void 0,void 0,function(){return te.__generator(this,function(r){switch(r.label){case 0:return[4,this.set(e,null)];case 1:return r.sent(),[2]}})})},t.prototype.reset=function(){return te.__awaiter(this,void 0,void 0,function(){return te.__generator(this,function(e){return[2]})})},t}();jt.CookieStorage=ba});var Gn=p(Ft=>{Object.defineProperty(Ft,"__esModule",{value:!0});Ft.FetchTransport=void 0;var Ur=(A(),D(R)),Ea=J(),Ia=function(t){Ur.__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(r,n){return Ur.__awaiter(this,void 0,void 0,function(){var i,o,a;return Ur.__generator(this,function(u){switch(u.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(n),method:"POST"},[4,fetch(r,i)];case 1:return o=u.sent(),[4,o.json()];case 2:return a=u.sent(),[2,this.buildResponse(a)]}})})},e}(Ea.BaseTransport);Ft.FetchTransport=Ia});var Kn=p((Vt,Wn)=>{(function(t,e){typeof Vt=="object"&&typeof Wn<"u"?e(Vt):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.Experiment={}))})(Vt,function(t){"use strict";var e=function(){function d(){}return d.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:r(),platform:"Web",os:void 0,deviceModel:void 0}},d}(),r=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},n=function(){function d(){this.queue=[]}return d.prototype.logEvent=function(v){this.receiver?this.receiver(v):this.queue.length<512&&this.queue.push(v)},d.prototype.setEventReceiver=function(v){this.receiver=v,this.queue.length>0&&(this.queue.forEach(function(_){v(_)}),this.queue=[])},d}(),i=function(){return i=Object.assign||function(v){for(var _,b=1,f=arguments.length;b<f;b++){_=arguments[b];for(var h in _)Object.prototype.hasOwnProperty.call(_,h)&&(v[h]=_[h])}return v},i.apply(this,arguments)},o=function(d,v){var _=["string","number","boolean","undefined"],b=typeof d,f=typeof v;if(b!==f)return!1;for(var h=0,P=_;h<P.length;h++){var w=P[h];if(w===b)return d===v}if(d==null&&v==null)return!0;if(d==null||v==null||d.length!==v.length)return!1;var U=Array.isArray(d),M=Array.isArray(v);if(U!==M)return!1;if(U&&M){for(var O=0;O<d.length;O++)if(!o(d[O],v[O]))return!1}else{var L=Object.keys(d).sort(),N=Object.keys(v).sort();if(!o(L,N))return!1;var q=!0;return Object.keys(d).forEach(function(V){o(d[V],v[V])||(q=!1)}),q}return!0},a="$set",u="$unset",c="$clearAll";Object.entries||(Object.entries=function(d){for(var v=Object.keys(d),_=v.length,b=new Array(_);_--;)b[_]=[v[_],d[v[_]]];return b});var s=function(){function d(){this.identity={userProperties:{}},this.listeners=new Set}return d.prototype.editIdentity=function(){var v=this,_=i({},this.identity.userProperties),b=i(i({},this.identity),{userProperties:_});return{setUserId:function(f){return b.userId=f,this},setDeviceId:function(f){return b.deviceId=f,this},setUserProperties:function(f){return b.userProperties=f,this},setOptOut:function(f){return b.optOut=f,this},updateUserProperties:function(f){for(var h=b.userProperties||{},P=0,w=Object.entries(f);P<w.length;P++){var U=w[P],M=U[0],O=U[1];switch(M){case a:for(var L=0,N=Object.entries(O);L<N.length;L++){var q=N[L],V=q[0],ie=q[1];h[V]=ie}break;case u:for(var le=0,de=Object.keys(O);le<de.length;le++){var V=de[le];delete h[V]}break;case c:h={};break}}return b.userProperties=h,this},commit:function(){return v.setIdentity(b),this}}},d.prototype.getIdentity=function(){return i({},this.identity)},d.prototype.setIdentity=function(v){var _=i({},this.identity);this.identity=i({},v),o(_,this.identity)||this.listeners.forEach(function(b){b(v)})},d.prototype.addIdentityListener=function(v){this.listeners.add(v)},d.prototype.removeIdentityListener=function(v){this.listeners.delete(v)},d}(),l=typeof globalThis<"u"?globalThis:typeof global<"u"?global:self,g=function(){function d(){this.identityStore=new s,this.eventBridge=new n,this.applicationContextProvider=new e}return d.getInstance=function(v){return l.analyticsConnectorInstances||(l.analyticsConnectorInstances={}),l.analyticsConnectorInstances[v]||(l.analyticsConnectorInstances[v]=new d),l.analyticsConnectorInstances[v]},d}();t.AnalyticsConnector=g,Object.defineProperty(t,"__esModule",{value:!0})})});var Nr=p(ye=>{Object.defineProperty(ye,"__esModule",{value:!0});ye.setConnectorDeviceId=ye.setConnectorUserId=ye.getAnalyticsConnector=void 0;var Ta=Kn(),Sa=function(t){return t===void 0&&(t="$default_instance"),Ta.AnalyticsConnector.getInstance(t)};ye.getAnalyticsConnector=Sa;var wa=function(t,e){(0,ye.getAnalyticsConnector)(e).identityStore.editIdentity().setUserId(t).commit()};ye.setConnectorUserId=wa;var Pa=function(t,e){(0,ye.getAnalyticsConnector)(e).identityStore.editIdentity().setDeviceId(t).commit()};ye.setConnectorDeviceId=Pa});var Qn=p(Bt=>{Object.defineProperty(Bt,"__esModule",{value:!0});Bt.IdentityEventSender=void 0;var xt=(A(),D(R)),Xn=Nr(),Ca=function(){function t(){this.name="identity",this.type="before",this.identityStore=(0,Xn.getAnalyticsConnector)().identityStore}return t.prototype.execute=function(e){return xt.__awaiter(this,void 0,void 0,function(){var r;return xt.__generator(this,function(n){return r=e.user_properties,r&&this.identityStore.editIdentity().updateUserProperties(r).commit(),[2,e]})})},t.prototype.setup=function(e){return xt.__awaiter(this,void 0,void 0,function(){return xt.__generator(this,function(r){return e.instanceName&&(this.identityStore=(0,Xn.getAnalyticsConnector)(e.instanceName).identityStore),[2]})})},t}();Bt.IdentityEventSender=Ca});var Yn=p(Gt=>{Object.defineProperty(Gt,"__esModule",{value:!0});Gt.getLanguage=void 0;var Oa=function(){var t,e,r,n;if(typeof navigator>"u")return"";var i=navigator.userLanguage;return(n=(r=(e=(t=navigator.languages)===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:navigator.language)!==null&&r!==void 0?r:i)!==null&&n!==void 0?n:""};Gt.getLanguage=Oa});var Hn=p(x=>{Object.defineProperty(x,"__esModule",{value:!0});x.getAttributionTrackingConfig=x.getPageViewTrackingConfig=x.isSessionTrackingEnabled=x.isPageViewTrackingEnabled=x.isFormInteractionTrackingEnabled=x.isFileDownloadTrackingEnabled=x.isAttributionTrackingEnabled=void 0;var Ra=(A(),D(R)),at=function(t,e){return typeof t=="boolean"?t:t?.[e]!==!1},Aa=function(t){return at(t,"attribution")};x.isAttributionTrackingEnabled=Aa;var Da=function(t){return at(t,"fileDownloads")};x.isFileDownloadTrackingEnabled=Da;var La=function(t){return at(t,"formInteractions")};x.isFormInteractionTrackingEnabled=La;var ka=function(t){return at(t,"pageViews")};x.isPageViewTrackingEnabled=ka;var Ua=function(t){return at(t,"sessions")};x.isSessionTrackingEnabled=Ua;var Na=function(t){var e=function(){return!1},r=void 0,n,i=t.pageCounter,o=(0,x.isPageViewTrackingEnabled)(t.defaultTracking);return o&&(e=void 0,n=void 0,t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.pageViews&&typeof t.defaultTracking.pageViews=="object"&&("trackOn"in t.defaultTracking.pageViews&&(e=t.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in t.defaultTracking.pageViews&&(r=t.defaultTracking.pageViews.trackHistoryChanges),"eventType"in t.defaultTracking.pageViews&&t.defaultTracking.pageViews.eventType&&(n=t.defaultTracking.pageViews.eventType))),{trackOn:e,trackHistoryChanges:r,eventType:n,pageCounter:i}};x.getPageViewTrackingConfig=Na;var Ma=function(t){return(0,x.isAttributionTrackingEnabled)(t.defaultTracking)&&t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.attribution&&typeof t.defaultTracking.attribution=="object"?Ra.__assign({},t.defaultTracking.attribution):{}};x.getAttributionTrackingConfig=Ma});var pe=p(m=>{Object.defineProperty(m,"__esModule",{value:!0});m.isSessionTrackingEnabled=m.isPageViewTrackingEnabled=m.isFormInteractionTrackingEnabled=m.isFileDownloadTrackingEnabled=m.isAttributionTrackingEnabled=m.getAttributionTrackingConfig=m.getPageViewTrackingConfig=m.getGlobalScope=m.getLanguage=m.IdentityEventSender=m.setConnectorUserId=m.setConnectorDeviceId=m.getAnalyticsConnector=m.FetchTransport=m.CookieStorage=m.getStorageKey=m.getOldCookieName=m.getCookieName=m.isNewSession=m.getQueryParams=m.BASE_CAMPAIGN=m.WebAttribution=m.getDefaultExcludedReferrers=m.createCampaignEvent=m.isExcludedReferrer=m.isNewCampaign=m.CampaignTracker=m.CampaignParser=void 0;var qa=kt();Object.defineProperty(m,"CampaignParser",{enumerable:!0,get:function(){return qa.CampaignParser}});var ja=jn();Object.defineProperty(m,"CampaignTracker",{enumerable:!0,get:function(){return ja.CampaignTracker}});var Wt=Rr();Object.defineProperty(m,"isNewCampaign",{enumerable:!0,get:function(){return Wt.isNewCampaign}});Object.defineProperty(m,"isExcludedReferrer",{enumerable:!0,get:function(){return Wt.isExcludedReferrer}});Object.defineProperty(m,"createCampaignEvent",{enumerable:!0,get:function(){return Wt.createCampaignEvent}});Object.defineProperty(m,"getDefaultExcludedReferrers",{enumerable:!0,get:function(){return Wt.getDefaultExcludedReferrers}});var Fa=xn();Object.defineProperty(m,"WebAttribution",{enumerable:!0,get:function(){return Fa.WebAttribution}});var Va=Ue();Object.defineProperty(m,"BASE_CAMPAIGN",{enumerable:!0,get:function(){return Va.BASE_CAMPAIGN}});var xa=Pr();Object.defineProperty(m,"getQueryParams",{enumerable:!0,get:function(){return xa.getQueryParams}});var Ba=Dr();Object.defineProperty(m,"isNewSession",{enumerable:!0,get:function(){return Ba.isNewSession}});var $n=Cr();Object.defineProperty(m,"getCookieName",{enumerable:!0,get:function(){return $n.getCookieName}});Object.defineProperty(m,"getOldCookieName",{enumerable:!0,get:function(){return $n.getOldCookieName}});var Ga=Ar();Object.defineProperty(m,"getStorageKey",{enumerable:!0,get:function(){return Ga.getStorageKey}});var Wa=Bn();Object.defineProperty(m,"CookieStorage",{enumerable:!0,get:function(){return Wa.CookieStorage}});var Ka=Gn();Object.defineProperty(m,"FetchTransport",{enumerable:!0,get:function(){return Ka.FetchTransport}});var Mr=Nr();Object.defineProperty(m,"getAnalyticsConnector",{enumerable:!0,get:function(){return Mr.getAnalyticsConnector}});Object.defineProperty(m,"setConnectorDeviceId",{enumerable:!0,get:function(){return Mr.setConnectorDeviceId}});Object.defineProperty(m,"setConnectorUserId",{enumerable:!0,get:function(){return Mr.setConnectorUserId}});var Xa=Qn();Object.defineProperty(m,"IdentityEventSender",{enumerable:!0,get:function(){return Xa.IdentityEventSender}});var Qa=Yn();Object.defineProperty(m,"getLanguage",{enumerable:!0,get:function(){return Qa.getLanguage}});var Ya=Dt();Object.defineProperty(m,"getGlobalScope",{enumerable:!0,get:function(){return Ya.getGlobalScope}});var Oe=Hn();Object.defineProperty(m,"getPageViewTrackingConfig",{enumerable:!0,get:function(){return Oe.getPageViewTrackingConfig}});Object.defineProperty(m,"getAttributionTrackingConfig",{enumerable:!0,get:function(){return Oe.getAttributionTrackingConfig}});Object.defineProperty(m,"isAttributionTrackingEnabled",{enumerable:!0,get:function(){return Oe.isAttributionTrackingEnabled}});Object.defineProperty(m,"isFileDownloadTrackingEnabled",{enumerable:!0,get:function(){return Oe.isFileDownloadTrackingEnabled}});Object.defineProperty(m,"isFormInteractionTrackingEnabled",{enumerable:!0,get:function(){return Oe.isFormInteractionTrackingEnabled}});Object.defineProperty(m,"isPageViewTrackingEnabled",{enumerable:!0,get:function(){return Oe.isPageViewTrackingEnabled}});Object.defineProperty(m,"isSessionTrackingEnabled",{enumerable:!0,get:function(){return Oe.isSessionTrackingEnabled}})});var qr=p(Te=>{Object.defineProperty(Te,"__esModule",{value:!0});Te.isInstanceProxy=Te.convertProxyObjectToRealObject=Te.runQueuedFunctions=void 0;var Ha=function(t,e){(0,Te.convertProxyObjectToRealObject)(t,e)};Te.runQueuedFunctions=Ha;var $a=function(t,e){for(var r=0;r<e.length;r++){var n=e[r],i=n.name,o=n.args,a=n.resolve,u=t&&t[i];if(typeof u=="function"){var c=u.apply(t,o);typeof a=="function"&&a(c?.promise)}}return t};Te.convertProxyObjectToRealObject=$a;var Za=function(t){var e=t;return e&&e._q!==void 0};Te.isInstanceProxy=Za});var Zn=p(Kt=>{Object.defineProperty(Kt,"__esModule",{value:!0});Kt.VERSION=void 0;Kt.VERSION="2.7.4"});var zn=p(Xt=>{Object.defineProperty(Xt,"__esModule",{value:!0});Xt.Context=void 0;var me=(A(),D(R)),za=J(),Ja=pe(),es=Zn(),ts="Web",rs="$remote",ns=function(){function t(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="amplitude-ts/".concat(es.VERSION),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return t.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},t.prototype.execute=function(e){var r,n;return me.__awaiter(this,void 0,void 0,function(){var i,o,a,u;return me.__generator(this,function(c){return i=new Date().getTime(),o=(r=this.config.lastEventId)!==null&&r!==void 0?r:-1,a=(n=e.event_id)!==null&&n!==void 0?n:o+1,this.config.lastEventId=a,e.time||(this.config.lastEventTime=i),u=me.__assign(me.__assign(me.__assign(me.__assign(me.__assign(me.__assign(me.__assign(me.__assign({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:i},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:ts}),this.config.trackingOptions.language&&{language:(0,Ja.getLanguage)()}),this.config.trackingOptions.ipAddress&&{ip:rs}),{insert_id:(0,za.UUID)(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:a,library:this.library,user_agent:this.userAgent}),[2,u]})})},t}();Xt.Context=ns});var jr=p(Qt=>{Object.defineProperty(Qt,"__esModule",{value:!0});Qt.BrowserStorage=void 0;var ue=(A(),D(R)),is=function(){function t(e){this.storage=e}return t.prototype.isEnabled=function(){return ue.__awaiter(this,void 0,void 0,function(){var e,r,n,i,o;return ue.__generator(this,function(a){switch(a.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),r=new t(this.storage),n="AMP_TEST",a.label=1;case 1:return a.trys.push([1,4,5,7]),[4,r.set(n,e)];case 2:return a.sent(),[4,r.get(n)];case 3:return i=a.sent(),[2,i===e];case 4:return o=a.sent(),[2,!1];case 5:return[4,r.remove(n)];case 6:return a.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return ue.__awaiter(this,void 0,void 0,function(){var r,n;return ue.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return r=i.sent(),r?[2,JSON.parse(r)]:[2,void 0];case 2:return n=i.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},t.prototype.getRaw=function(e){var r;return ue.__awaiter(this,void 0,void 0,function(){return ue.__generator(this,function(n){return[2,((r=this.storage)===null||r===void 0?void 0:r.getItem(e))||void 0]})})},t.prototype.set=function(e,r){var n;return ue.__awaiter(this,void 0,void 0,function(){return ue.__generator(this,function(i){try{(n=this.storage)===null||n===void 0||n.setItem(e,JSON.stringify(r))}catch{}return[2]})})},t.prototype.remove=function(e){var r;return ue.__awaiter(this,void 0,void 0,function(){return ue.__generator(this,function(n){try{(r=this.storage)===null||r===void 0||r.removeItem(e)}catch{}return[2]})})},t.prototype.reset=function(){var e;return ue.__awaiter(this,void 0,void 0,function(){return ue.__generator(this,function(r){try{(e=this.storage)===null||e===void 0||e.clear()}catch{}return[2]})})},t}();Qt.BrowserStorage=is});var Jn=p(Ht=>{Object.defineProperty(Ht,"__esModule",{value:!0});Ht.LocalStorage=void 0;var Fr=(A(),D(R)),os=pe(),as=jr(),Yt=1e3,ss=function(t){Fr.__extends(e,t);function e(r){var n=this,i;return n=t.call(this,(i=(0,os.getGlobalScope)())===null||i===void 0?void 0:i.localStorage)||this,n.loggerProvider=r?.loggerProvider,n}return e.prototype.set=function(r,n){var i;return Fr.__awaiter(this,void 0,void 0,function(){var o;return Fr.__generator(this,function(a){switch(a.label){case 0:return Array.isArray(n)&&n.length>Yt?(o=n.length-Yt,[4,t.prototype.set.call(this,r,n.slice(0,Yt))]):[3,2];case 1:return a.sent(),(i=this.loggerProvider)===null||i===void 0||i.error("Failed to save ".concat(o," events because the queue length exceeded ").concat(Yt,".")),[3,4];case 2:return[4,t.prototype.set.call(this,r,n)];case 3:a.sent(),a.label=4;case 4:return[2]}})})},e}(as.BrowserStorage);Ht.LocalStorage=ss});var ei=p($t=>{Object.defineProperty($t,"__esModule",{value:!0});$t.SessionStorage=void 0;var us=(A(),D(R)),cs=pe(),ls=jr(),ds=function(t){us.__extends(e,t);function e(){var r;return t.call(this,(r=(0,cs.getGlobalScope)())===null||r===void 0?void 0:r.sessionStorage)||this}return e}(ls.BrowserStorage);$t.SessionStorage=ds});var ti=p(Zt=>{Object.defineProperty(Zt,"__esModule",{value:!0});Zt.XHRTransport=void 0;var Vr=(A(),D(R)),fs=J(),vs=function(t){Vr.__extends(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state={done:4},r}return e.prototype.send=function(r,n){return Vr.__awaiter(this,void 0,void 0,function(){var i=this;return Vr.__generator(this,function(o){return[2,new Promise(function(a,u){typeof XMLHttpRequest>"u"&&u(new Error("XHRTransport is not supported."));var c=new XMLHttpRequest;c.open("POST",r,!0),c.onreadystatechange=function(){if(c.readyState===i.state.done)try{var s=c.responseText,l=JSON.parse(s),g=i.buildResponse(l);a(g)}catch(d){u(d)}},c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("Accept","*/*"),c.send(JSON.stringify(n))})]})})},e}(fs.BaseTransport);Zt.XHRTransport=vs});var ri=p(zt=>{Object.defineProperty(zt,"__esModule",{value:!0});zt.SendBeaconTransport=void 0;var xr=(A(),D(R)),gs=pe(),ps=J(),_s=function(t){xr.__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(r,n){return xr.__awaiter(this,void 0,void 0,function(){var i=this;return xr.__generator(this,function(o){return[2,new Promise(function(a,u){var c=(0,gs.getGlobalScope)();if(!c?.navigator.sendBeacon)throw new Error("SendBeaconTransport is not supported");try{var s=JSON.stringify(n),l=c.navigator.sendBeacon(r,JSON.stringify(n));return a(l?i.buildResponse({code:200,events_ingested:n.events.length,payload_size_bytes:s.length,server_upload_time:Date.now()}):i.buildResponse({code:500}))}catch(g){u(g)}})]})})},e}(ps.BaseTransport);zt.SendBeaconTransport=_s});var ni=p(re=>{var hs=re;Object.defineProperty(re,"__esModule",{value:!0});re.decode=re.parseTime=re.parseLegacyCookies=void 0;var Br=(A(),D(R)),ys=pe(),ms=function(t,e,r){return r===void 0&&(r=!0),Br.__awaiter(hs,void 0,void 0,function(){var n,i,o,a,u,c,s,l,g;return Br.__generator(this,function(d){switch(d.label){case 0:return n=(0,ys.getOldCookieName)(t),[4,e.getRaw(n)];case 1:return i=d.sent(),i?r?[4,e.remove(n)]:[3,3]:[2,{optOut:!1}];case 2:d.sent(),d.label=3;case 3:return o=Br.__read(i.split("."),6),a=o[0],u=o[1],c=o[2],s=o[3],l=o[4],g=o[5],[2,{deviceId:a,userId:(0,re.decode)(u),sessionId:(0,re.parseTime)(s),lastEventId:(0,re.parseTime)(g),lastEventTime:(0,re.parseTime)(l),optOut:!!c}]}})})};re.parseLegacyCookies=ms;var bs=function(t){var e=parseInt(t,32);if(!isNaN(e))return e};re.parseTime=bs;var Es=function(t){if(!(!atob||!escape||!t))try{return decodeURIComponent(escape(atob(t)))}catch{return}};re.decode=Es});var st=p(I=>{Object.defineProperty(I,"__esModule",{value:!0});I.DEFAULT_SERVER_ZONE=I.DEFAULT_IDENTITY_STORAGE=I.FORM_DESTINATION=I.FORM_NAME=I.FORM_ID=I.LINK_URL=I.LINK_TEXT=I.LINK_ID=I.FILE_NAME=I.FILE_EXTENSION=I.DEFAULT_SESSION_END_EVENT=I.DEFAULT_SESSION_START_EVENT=I.DEFAULT_FILE_DOWNLOAD_EVENT=I.DEFAULT_FORM_SUBMIT_EVENT=I.DEFAULT_FORM_START_EVENT=I.DEFAULT_PAGE_VIEW_EVENT=I.DEFAULT_EVENT_PREFIX=void 0;I.DEFAULT_EVENT_PREFIX="[Amplitude]";I.DEFAULT_PAGE_VIEW_EVENT="".concat(I.DEFAULT_EVENT_PREFIX," Page Viewed");I.DEFAULT_FORM_START_EVENT="".concat(I.DEFAULT_EVENT_PREFIX," Form Started");I.DEFAULT_FORM_SUBMIT_EVENT="".concat(I.DEFAULT_EVENT_PREFIX," Form Submitted");I.DEFAULT_FILE_DOWNLOAD_EVENT="".concat(I.DEFAULT_EVENT_PREFIX," File Downloaded");I.DEFAULT_SESSION_START_EVENT="session_start";I.DEFAULT_SESSION_END_EVENT="session_end";I.FILE_EXTENSION="".concat(I.DEFAULT_EVENT_PREFIX," File Extension");I.FILE_NAME="".concat(I.DEFAULT_EVENT_PREFIX," File Name");I.LINK_ID="".concat(I.DEFAULT_EVENT_PREFIX," Link ID");I.LINK_TEXT="".concat(I.DEFAULT_EVENT_PREFIX," Link Text");I.LINK_URL="".concat(I.DEFAULT_EVENT_PREFIX," Link URL");I.FORM_ID="".concat(I.DEFAULT_EVENT_PREFIX," Form ID");I.FORM_NAME="".concat(I.DEFAULT_EVENT_PREFIX," Form Name");I.FORM_DESTINATION="".concat(I.DEFAULT_EVENT_PREFIX," Form Destination");I.DEFAULT_IDENTITY_STORAGE="cookie";I.DEFAULT_SERVER_ZONE="US"});var si=p(Q=>{var ii=Q;Object.defineProperty(Q,"__esModule",{value:!0});Q.getTopLevelDomain=Q.createTransport=Q.createCookieStorage=Q.useBrowserConfig=Q.BrowserConfig=void 0;var we=(A(),D(R)),Is=H(),ut=J(),Re=pe(),oi=Jn(),Ts=ei(),Ss=ti(),ws=ri(),Ps=ni(),ct=st(),ai=function(t){we.__extends(e,t);function e(r,n,i,o,a,u,c,s,l,g,d,v,_,b,f,h,P,w,U,M,O,L,N,q,V,ie,le,de,Pe,Xe,Qe){i===void 0&&(i=new ut.MemoryStorage),o===void 0&&(o={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),c===void 0&&(c=1e3),s===void 0&&(s=5),l===void 0&&(l=30),g===void 0&&(g=ct.DEFAULT_IDENTITY_STORAGE),f===void 0&&(f=new ut.Logger),h===void 0&&(h=Is.LogLevel.Warn),w===void 0&&(w=!1),U===void 0&&(U=!1),L===void 0&&(L=""),N===void 0&&(N=ct.DEFAULT_SERVER_ZONE),V===void 0&&(V=30*60*1e3),ie===void 0&&(ie=new oi.LocalStorage({loggerProvider:f})),le===void 0&&(le={ipAddress:!0,language:!0,platform:!0}),de===void 0&&(de="fetch"),Pe===void 0&&(Pe=!1);var S=t.call(this,{apiKey:r,storageProvider:ie,transportProvider:(0,Q.createTransport)(de)})||this;return S.apiKey=r,S.appVersion=n,S.cookieOptions=o,S.defaultTracking=a,S.flushIntervalMillis=c,S.flushMaxRetries=s,S.flushQueueSize=l,S.identityStorage=g,S.ingestionMetadata=d,S.instanceName=v,S.loggerProvider=f,S.logLevel=h,S.minIdLength=P,S.offline=w,S.partnerId=M,S.plan=O,S.serverUrl=L,S.serverZone=N,S.sessionTimeout=V,S.storageProvider=ie,S.trackingOptions=le,S.transport=de,S.useBatch=Pe,S._optOut=!1,S._cookieStorage=i,S.deviceId=u,S.lastEventId=_,S.lastEventTime=b,S.optOut=U,S.sessionId=q,S.pageCounter=Qe,S.userId=Xe,S.loggerProvider.enable(S.logLevel),S}return Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(r){this._cookieStorage!==r&&(this._cookieStorage=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(r){this._deviceId!==r&&(this._deviceId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(r){this._userId!==r&&(this._userId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(r){this._sessionId!==r&&(this._sessionId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(r){this._optOut!==r&&(this._optOut=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(r){this._lastEventTime!==r&&(this._lastEventTime=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(r){this._lastEventId!==r&&(this._lastEventId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(r){this._pageCounter!==r&&(this._pageCounter=r,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var r={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter};this.cookieStorage.set((0,Re.getCookieName)(this.apiKey),r)},e}(ut.Config);Q.BrowserConfig=ai;var Cs=function(t,e,r){return e===void 0&&(e={}),we.__awaiter(ii,void 0,void 0,function(){var n,i,o,a,u,c,s,l,g,d,v,_,b,f,h,P,w,U,M,O,L,N,q,V,ie,le,de,Pe,Xe,Qe,S,nr,ir,or,ar,sr,ur,cr,lr,dr;return we.__generator(this,function(De){switch(De.label){case 0:return n=e.identityStorage||ct.DEFAULT_IDENTITY_STORAGE,w={},n===ct.DEFAULT_IDENTITY_STORAGE?[3,1]:(o="",[3,5]);case 1:return(M=(U=e.cookieOptions)===null||U===void 0?void 0:U.domain)!==null&&M!==void 0?(a=M,[3,4]):[3,2];case 2:return[4,(0,Q.getTopLevelDomain)()];case 3:a=De.sent(),De.label=4;case 4:o=a,De.label=5;case 5:return i=we.__assign.apply(void 0,[(w.domain=o,w.expiration=365,w.sameSite="Lax",w.secure=!1,w.upgrade=!0,w),e.cookieOptions]),u=(0,Q.createCookieStorage)(e.identityStorage,i),[4,(0,Ps.parseLegacyCookies)(t,u,(L=(O=e.cookieOptions)===null||O===void 0?void 0:O.upgrade)!==null&&L!==void 0?L:!0)];case 6:return c=De.sent(),[4,u.get((0,Re.getCookieName)(t))];case 7:return s=De.sent(),l=(0,Re.getQueryParams)(),g=(ie=(V=(q=(N=e.deviceId)!==null&&N!==void 0?N:l.deviceId)!==null&&q!==void 0?q:s?.deviceId)!==null&&V!==void 0?V:c.deviceId)!==null&&ie!==void 0?ie:(0,ut.UUID)(),d=(le=s?.lastEventId)!==null&&le!==void 0?le:c.lastEventId,v=(de=s?.lastEventTime)!==null&&de!==void 0?de:c.lastEventTime,_=(Xe=(Pe=e.optOut)!==null&&Pe!==void 0?Pe:s?.optOut)!==null&&Xe!==void 0?Xe:c.optOut,b=(Qe=s?.sessionId)!==null&&Qe!==void 0?Qe:c.sessionId,f=(nr=(S=e.userId)!==null&&S!==void 0?S:s?.userId)!==null&&nr!==void 0?nr:c.userId,r.previousSessionDeviceId=(ir=s?.deviceId)!==null&&ir!==void 0?ir:c.deviceId,r.previousSessionUserId=(or=s?.userId)!==null&&or!==void 0?or:c.userId,h={ipAddress:(sr=(ar=e.trackingOptions)===null||ar===void 0?void 0:ar.ipAddress)!==null&&sr!==void 0?sr:!0,language:(cr=(ur=e.trackingOptions)===null||ur===void 0?void 0:ur.language)!==null&&cr!==void 0?cr:!0,platform:(dr=(lr=e.trackingOptions)===null||lr===void 0?void 0:lr.platform)!==null&&dr!==void 0?dr:!0},P=s?.pageCounter,[2,new ai(t,e.appVersion,u,i,e.defaultTracking,g,e.flushIntervalMillis,e.flushMaxRetries,e.flushQueueSize,n,e.ingestionMetadata,e.instanceName,d,v,e.loggerProvider,e.logLevel,e.minIdLength,e.offline,_,e.partnerId,e.plan,e.serverUrl,e.serverZone,b,e.sessionTimeout,e.storageProvider,h,e.transport,e.useBatch,f,P)]}})})};Q.useBrowserConfig=Cs;var Os=function(t,e){switch(t===void 0&&(t=ct.DEFAULT_IDENTITY_STORAGE),e===void 0&&(e={}),t){case"localStorage":return new oi.LocalStorage;case"sessionStorage":return new Ts.SessionStorage;case"none":return new ut.MemoryStorage;case"cookie":default:return new Re.CookieStorage(we.__assign(we.__assign({},e),{expirationDays:e.expiration}))}};Q.createCookieStorage=Os;var Rs=function(t){return t==="xhr"?new Ss.XHRTransport:t==="beacon"?new ws.SendBeaconTransport:new Re.FetchTransport};Q.createTransport=Rs;var As=function(t){return we.__awaiter(ii,void 0,void 0,function(){var e,r,n,i,o,o,a,u,c,s;return we.__generator(this,function(l){switch(l.label){case 0:return[4,new Re.CookieStorage().isEnabled()];case 1:if(!l.sent()||!t&&(typeof location>"u"||!location.hostname))return[2,""];for(e=t??location.hostname,r=e.split("."),n=[],i="AMP_TLDTEST",o=r.length-2;o>=0;--o)n.push(r.slice(o).join("."));o=0,l.label=2;case 2:return o<n.length?(a=n[o],u={domain:"."+a},c=new Re.CookieStorage(u),[4,c.set(i,1)]):[3,7];case 3:return l.sent(),[4,c.get(i)];case 4:return s=l.sent(),s?[4,c.remove(i)]:[3,6];case 5:return l.sent(),[2,"."+a];case 6:return o++,[3,2];case 7:return[2,""]}})})};Q.getTopLevelDomain=As});var ui=p(Jt=>{Object.defineProperty(Jt,"__esModule",{value:!0});Jt.omitUndefined=void 0;var Ds=function(t){var e={};for(var r in t){var n=t[r];n&&(e[r]=n)}return e};Jt.omitUndefined=Ds});var Gr=p(_e=>{var je=_e;Object.defineProperty(_e,"__esModule",{value:!0});_e.shouldTrackHistoryPageView=_e.pageViewTrackingPlugin=_e.defaultPageViewEvent=void 0;var j=(A(),D(R)),li=pe(),ci=H(),Ls=pe(),ks=ui();_e.defaultPageViewEvent="[Amplitude] Page Viewed";var Us=function(t){t===void 0&&(t={});var e,r=(0,li.getGlobalScope)(),n=void 0,i,o,a=t.trackOn,u=t.trackHistoryChanges,c=t.eventType,s=c===void 0?_e.defaultPageViewEvent:c,l=function(){return j.__awaiter(je,void 0,void 0,function(){var f,h;return j.__generator(this,function(P){switch(P.label){case 0:return h={event_type:s},f=[{}],[4,Ns()];case 1:return[2,(h.event_properties=j.__assign.apply(void 0,[j.__assign.apply(void 0,f.concat([P.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":typeof location<"u"&&location.href||"","[Amplitude] Page Path":typeof location<"u"&&location.pathname||"","[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":typeof location<"u"&&location.href.split("?")[0]||""}]),h)]}})})},g=function(){return typeof a>"u"||typeof a=="function"&&a()},d=typeof location<"u"?location.href:null,v=function(){return j.__awaiter(je,void 0,void 0,function(){var f,h,P,w,U;return j.__generator(this,function(M){switch(M.label){case 0:return f=location.href,h=(0,_e.shouldTrackHistoryPageView)(u,f,d||"")&&g(),d=f,h?(n?.log("Tracking page view event"),e!=null?[3,1]:(P=void 0,[3,3])):[3,4];case 1:return U=(w=e).track,[4,l()];case 2:P=U.apply(w,[M.sent()]),M.label=3;case 3:M.label=4;case 4:return[2]}})})},_=function(){v()},b={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(f,h){return j.__awaiter(je,void 0,void 0,function(){var P,w;return j.__generator(this,function(U){switch(U.label){case 0:return e=h,o=f,n=f.loggerProvider,n.log("Installing @amplitude/plugin-page-view-tracking-browser"),r&&(r.addEventListener("popstate",_),i=r.history.pushState,r.history.pushState=new Proxy(r.history.pushState,{apply:function(M,O,L){var N=j.__read(L,3),q=N[0],V=N[1],ie=N[2];M.apply(O,[q,V,ie]),v()}})),g()?(n.log("Tracking page view event"),w=(P=e).track,[4,l()]):[3,2];case 1:w.apply(P,[U.sent()]),U.label=2;case 2:return[2]}})})},execute:function(f){return j.__awaiter(je,void 0,void 0,function(){var h;return j.__generator(this,function(P){switch(P.label){case 0:return a==="attribution"&&Ms(f)?(n?.log("Enriching campaign event to page view event with campaign parameters"),[4,l()]):[3,2];case 1:h=P.sent(),f.event_type=h.event_type,f.event_properties=j.__assign(j.__assign({},f.event_properties),h.event_properties),P.label=2;case 2:return o&&f.event_type===s&&(o.pageCounter=o.pageCounter?o.pageCounter+1:1,f.event_properties=j.__assign(j.__assign({},f.event_properties),{"[Amplitude] Page Counter":o.pageCounter})),[2,f]}})})},teardown:function(){return j.__awaiter(je,void 0,void 0,function(){return j.__generator(this,function(f){return r&&(r.removeEventListener("popstate",_),i&&(r.history.pushState=i)),[2]})})}};return b};_e.pageViewTrackingPlugin=Us;var Ns=function(){return j.__awaiter(je,void 0,void 0,function(){var t;return j.__generator(this,function(e){switch(e.label){case 0:return t=ks.omitUndefined,[4,new li.CampaignParser().parse()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},Ms=function(t){if(t.event_type==="$identify"&&t.user_properties){var e=t.user_properties,r=e[ci.IdentifyOperation.SET]||{},n=e[ci.IdentifyOperation.UNSET]||{},i=j.__spreadArray(j.__spreadArray([],j.__read(Object.keys(r)),!1),j.__read(Object.keys(n)),!1);return Object.keys(Ls.BASE_CAMPAIGN).every(function(o){return i.includes(o)})}return!1},qs=function(t,e,r){switch(t){case"pathOnly":return e.split("?")[0]!==r.split("?")[0];default:return e!==r}};_e.shouldTrackHistoryPageView=qs});var di=p(Fe=>{Object.defineProperty(Fe,"__esModule",{value:!0});Fe.plugin=Fe.pageViewTrackingPlugin=void 0;var js=Gr();Object.defineProperty(Fe,"pageViewTrackingPlugin",{enumerable:!0,get:function(){return js.pageViewTrackingPlugin}});var Fs=Gr();Object.defineProperty(Fe,"plugin",{enumerable:!0,get:function(){return Fs.pageViewTrackingPlugin}})});var fi=p(ne=>{var Wr=ne;Object.defineProperty(ne,"__esModule",{value:!0});ne.stringOrUndefined=ne.formInteractionTracking=void 0;var Ve=(A(),D(R)),ce=st(),Vs=function(){var t,e=[],r=function(s,l,g){s.addEventListener(l,g),e.push({element:s,type:l,handler:g})},n=function(){e.forEach(function(s){var l=s.element,g=s.type,d=s.handler;l?.removeEventListener(g,d)}),e=[]},i="@amplitude/plugin-form-interaction-tracking-browser",o="enrichment",a=function(s,l){return Ve.__awaiter(Wr,void 0,void 0,function(){return Ve.__generator(this,function(g){return window.addEventListener("load",function(){if(!l){s.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if(!(typeof document>"u")){var d=function(_){var b=!1;r(_,"change",function(){var f;b||l.track(ce.DEFAULT_FORM_START_EVENT,(f={},f[ce.FORM_ID]=(0,ne.stringOrUndefined)(_.id),f[ce.FORM_NAME]=(0,ne.stringOrUndefined)(_.name),f[ce.FORM_DESTINATION]=_.action,f)),b=!0}),r(_,"submit",function(){var f,h;b||l.track(ce.DEFAULT_FORM_START_EVENT,(f={},f[ce.FORM_ID]=(0,ne.stringOrUndefined)(_.id),f[ce.FORM_NAME]=(0,ne.stringOrUndefined)(_.name),f[ce.FORM_DESTINATION]=_.action,f)),l.track(ce.DEFAULT_FORM_SUBMIT_EVENT,(h={},h[ce.FORM_ID]=(0,ne.stringOrUndefined)(_.id),h[ce.FORM_NAME]=(0,ne.stringOrUndefined)(_.name),h[ce.FORM_DESTINATION]=_.action,h)),b=!1})},v=Array.from(document.getElementsByTagName("form"));v.forEach(d),typeof MutationObserver<"u"&&(t=new MutationObserver(function(_){_.forEach(function(b){b.addedNodes.forEach(function(f){f.nodeName==="FORM"&&d(f),"querySelectorAll"in f&&typeof f.querySelectorAll=="function"&&Array.from(f.querySelectorAll("form")).map(d)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}}),[2]})})},u=function(s){return Ve.__awaiter(Wr,void 0,void 0,function(){return Ve.__generator(this,function(l){return[2,s]})})},c=function(){return Ve.__awaiter(Wr,void 0,void 0,function(){return Ve.__generator(this,function(s){return t?.disconnect(),n(),[2]})})};return{name:i,type:o,setup:a,execute:u,teardown:c}};ne.formInteractionTracking=Vs;var xs=function(t){if(typeof t=="string")return t};ne.stringOrUndefined=xs});var vi=p(lt=>{var Kr=lt;Object.defineProperty(lt,"__esModule",{value:!0});lt.fileDownloadTracking=void 0;var xe=(A(),D(R)),Be=st(),Bs=function(){var t,e=[],r=function(s,l,g){s.addEventListener(l,g),e.push({element:s,type:l,handler:g})},n=function(){e.forEach(function(s){var l=s.element,g=s.type,d=s.handler;l?.removeEventListener(g,d)}),e=[]},i="@amplitude/plugin-file-download-tracking-browser",o="enrichment",a=function(s,l){return xe.__awaiter(Kr,void 0,void 0,function(){return xe.__generator(this,function(g){return window.addEventListener("load",function(){if(!l){s.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if(!(typeof document>"u")){var d=function(b){var f;try{f=new URL(b.href,window.location.href)}catch{return}var h=v.exec(f.href),P=h?.[1];P&&r(b,"click",function(){var w;P&&l.track(Be.DEFAULT_FILE_DOWNLOAD_EVENT,(w={},w[Be.FILE_EXTENSION]=P,w[Be.FILE_NAME]=f.pathname,w[Be.LINK_ID]=b.id,w[Be.LINK_TEXT]=b.text,w[Be.LINK_URL]=b.href,w))})},v=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$/,_=Array.from(document.getElementsByTagName("a"));_.forEach(d),typeof MutationObserver<"u"&&(t=new MutationObserver(function(b){b.forEach(function(f){f.addedNodes.forEach(function(h){h.nodeName==="A"&&d(h),"querySelectorAll"in h&&typeof h.querySelectorAll=="function"&&Array.from(h.querySelectorAll("a")).map(d)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}}),[2]})})},u=function(s){return xe.__awaiter(Kr,void 0,void 0,function(){return xe.__generator(this,function(l){return[2,s]})})},c=function(){return xe.__awaiter(Kr,void 0,void 0,function(){return xe.__generator(this,function(s){return t?.disconnect(),n(),[2]})})};return{name:i,type:o,setup:a,execute:u,teardown:c}};lt.fileDownloadTracking=Bs});var gi=p(Ge=>{Object.defineProperty(Ge,"__esModule",{value:!0});Ge.resetNotify=Ge.detNotify=void 0;var Xr=!1,Gs=function(t){if(!(Xr||t.defaultTracking!==void 0)){var e=`\`options.defaultTracking\` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to \`options.defaultTracking\`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:

amplitude.init(<YOUR_API_KEY>, {
  defaultTracking: true,
});

Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.`;t.loggerProvider.warn(e),Xr=!0}};Ge.detNotify=Gs;var Ws=function(){Xr=!1};Ge.resetNotify=Ws});var _i=p(dt=>{var pi=dt;Object.defineProperty(dt,"__esModule",{value:!0});dt.networkConnectivityCheckerPlugin=void 0;var er=(A(),D(R)),Ks=pe(),Xs=function(){var t="@amplitude/plugin-network-checker-browser",e="before",r=(0,Ks.getGlobalScope)(),n=[],i=function(c,s){r&&(r.addEventListener(c,s),n.push({type:c,handler:s}))},o=function(){n.forEach(function(c){var s=c.type,l=c.handler;r&&r.removeEventListener(s,l)}),n=[]},a=function(c,s){return er.__awaiter(pi,void 0,void 0,function(){return er.__generator(this,function(l){return c.offline=!navigator.onLine,i("online",function(){c.loggerProvider.debug("Network connectivity changed to online."),c.offline=!1,setTimeout(function(){s.flush()},c.flushIntervalMillis)}),i("offline",function(){c.loggerProvider.debug("Network connectivity changed to offline."),c.offline=!0}),[2]})})},u=function(){return er.__awaiter(pi,void 0,void 0,function(){return er.__generator(this,function(c){return o(),[2]})})};return{name:t,type:e,setup:a,teardown:u}};dt.networkConnectivityCheckerPlugin=Xs});var yi=p(rr=>{Object.defineProperty(rr,"__esModule",{value:!0});rr.AmplitudeBrowser=void 0;var Ae=(A(),D(R)),be=J(),z=pe(),Qs=H(),We=qr(),Ys=zn(),hi=si(),Hs=di(),$s=fi(),Zs=vi(),tr=st(),zs=gi(),Js=_i(),eu=function(t){Ae.__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(r,n,i){r===void 0&&(r="");var o,a;return arguments.length>2?(o=n,a=i):typeof n=="string"?(o=n,a=void 0):(o=n?.userId,a=n),(0,be.returnWrapper)(this._init(Ae.__assign(Ae.__assign({},a),{userId:o,apiKey:r})))},e.prototype._init=function(r){var n,i;return Ae.__awaiter(this,void 0,void 0,function(){var o,a,u,c=this;return Ae.__generator(this,function(s){switch(s.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,(0,hi.useBrowserConfig)(r.apiKey,r,this)]);case 1:return o=s.sent(),[4,t.prototype._init.call(this,o)];case 2:return s.sent(),(0,z.isAttributionTrackingEnabled)(this.config.defaultTracking)?(a=(0,z.getAttributionTrackingConfig)(this.config),this.webAttribution=new z.WebAttribution(a,this.config),[4,this.webAttribution.init()]):[3,4];case 3:s.sent(),s.label=4;case 4:return this.setSessionId((i=(n=r.sessionId)!==null&&n!==void 0?n:this.config.sessionId)!==null&&i!==void 0?i:Date.now()),u=(0,z.getAnalyticsConnector)(r.instanceName),u.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===Qs.OfflineDisabled?[3,6]:[4,this.add((0,Js.networkConnectivityCheckerPlugin)()).promise];case 5:s.sent(),s.label=6;case 6:return[4,this.add(new be.Destination).promise];case 7:return s.sent(),[4,this.add(new Ys.Context).promise];case 8:return s.sent(),[4,this.add(new z.IdentityEventSender).promise];case 9:return s.sent(),(0,zs.detNotify)(this.config),(0,z.isFileDownloadTrackingEnabled)(this.config.defaultTracking)?[4,this.add((0,Zs.fileDownloadTracking)()).promise]:[3,11];case 10:s.sent(),s.label=11;case 11:return(0,z.isFormInteractionTrackingEnabled)(this.config.defaultTracking)?[4,this.add((0,$s.formInteractionTracking)()).promise]:[3,13];case 12:s.sent(),s.label=13;case 13:return(0,z.isPageViewTrackingEnabled)(this.config.defaultTracking)?[4,this.add((0,Hs.pageViewTrackingPlugin)((0,z.getPageViewTrackingConfig)(this.config))).promise]:[3,15];case 14:s.sent(),s.label=15;case 15:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 16:return s.sent(),u.eventBridge.setEventReceiver(function(l){c.track(l.eventType,l.eventProperties)}),[2]}})})},e.prototype.getUserId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.userId},e.prototype.setUserId=function(r){if(!this.config){this.q.push(this.setUserId.bind(this,r));return}(r!==this.config.userId||r===void 0)&&(this.config.userId=r,(0,z.setConnectorUserId)(r,this.config.instanceName))},e.prototype.getDeviceId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.deviceId},e.prototype.setDeviceId=function(r){if(!this.config){this.q.push(this.setDeviceId.bind(this,r));return}this.config.deviceId=r,(0,z.setConnectorDeviceId)(r,this.config.instanceName)},e.prototype.reset=function(){this.setDeviceId((0,be.UUID)()),this.setUserId(void 0)},e.prototype.getSessionId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.sessionId},e.prototype.setSessionId=function(r){var n,i=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,r)),(0,be.returnWrapper)(Promise.resolve());if(r===this.config.sessionId)return(0,be.returnWrapper)(Promise.resolve());var o=this.getSessionId(),a=this.config.lastEventTime,u=(n=this.config.lastEventId)!==null&&n!==void 0?n:-1;this.config.sessionId=r,this.config.lastEventTime=void 0,this.config.pageCounter=0,(0,z.isSessionTrackingEnabled)(this.config.defaultTracking)&&(o&&a&&i.push(this.track(tr.DEFAULT_SESSION_END_EVENT,void 0,{device_id:this.previousSessionDeviceId,event_id:++u,session_id:o,time:a+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var c=this.trackCampaignEventIfNeeded(++u,i);return(0,z.isSessionTrackingEnabled)(this.config.defaultTracking)&&i.push(this.track(tr.DEFAULT_SESSION_START_EVENT,void 0,{event_id:c?++u:u,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,(0,be.returnWrapper)(Promise.all(i))},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(r){if(!this.config){this.q.push(this.setTransport.bind(this,r));return}this.config.transportProvider=(0,hi.createTransport)(r)},e.prototype.identify=function(r,n){if((0,We.isInstanceProxy)(r)){var i=r._q;r._q=[],r=(0,We.convertProxyObjectToRealObject)(new be.Identify,i)}return n?.user_id&&this.setUserId(n.user_id),n?.device_id&&this.setDeviceId(n.device_id),t.prototype.identify.call(this,r,n)},e.prototype.groupIdentify=function(r,n,i,o){if((0,We.isInstanceProxy)(i)){var a=i._q;i._q=[],i=(0,We.convertProxyObjectToRealObject)(new be.Identify,a)}return t.prototype.groupIdentify.call(this,r,n,i,o)},e.prototype.revenue=function(r,n){if((0,We.isInstanceProxy)(r)){var i=r._q;r._q=[],r=(0,We.convertProxyObjectToRealObject)(new be.Revenue,i)}return t.prototype.revenue.call(this,r,n)},e.prototype.trackCampaignEventIfNeeded=function(r,n){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var i=this.webAttribution.generateCampaignEvent(r);return n?n.push(this.track(i).promise):this.track(i),this.config.loggerProvider.log("Tracking attribution."),!0},e.prototype.process=function(r){return Ae.__awaiter(this,void 0,void 0,function(){var n,i,o;return Ae.__generator(this,function(a){return n=Date.now(),i=(0,z.isNewSession)(this.config.sessionTimeout,this.config.lastEventTime),o=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),r.event_type!==tr.DEFAULT_SESSION_START_EVENT&&r.event_type!==tr.DEFAULT_SESSION_END_EVENT&&(!r.session_id||r.session_id===this.getSessionId())&&(i||o?(this.setSessionId(n),o&&this.config.loggerProvider.log("Created a new session for new campaign.")):i||this.trackCampaignEventIfNeeded()),[2,t.prototype.process.call(this,r)]})})},e}(be.AmplitudeCore);rr.AmplitudeBrowser=eu});var Qr=p(Ke=>{Object.defineProperty(Ke,"__esModule",{value:!0});Ke.createInstance=void 0;var y=J(),tu=yi(),ru=function(){var t=new tu.AmplitudeBrowser;return{init:(0,y.debugWrapper)(t.init.bind(t),"init",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config"])),add:(0,y.debugWrapper)(t.add.bind(t),"add",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config.apiKey","timeline.plugins"])),remove:(0,y.debugWrapper)(t.remove.bind(t),"remove",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config.apiKey","timeline.plugins"])),track:(0,y.debugWrapper)(t.track.bind(t),"track",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config.apiKey","timeline.queue.length"])),logEvent:(0,y.debugWrapper)(t.logEvent.bind(t),"logEvent",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config.apiKey","timeline.queue.length"])),identify:(0,y.debugWrapper)(t.identify.bind(t),"identify",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config.apiKey","timeline.queue.length"])),groupIdentify:(0,y.debugWrapper)(t.groupIdentify.bind(t),"groupIdentify",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config.apiKey","timeline.queue.length"])),setGroup:(0,y.debugWrapper)(t.setGroup.bind(t),"setGroup",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config.apiKey","timeline.queue.length"])),revenue:(0,y.debugWrapper)(t.revenue.bind(t),"revenue",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config.apiKey","timeline.queue.length"])),flush:(0,y.debugWrapper)(t.flush.bind(t),"flush",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config.apiKey","timeline.queue.length"])),getUserId:(0,y.debugWrapper)(t.getUserId.bind(t),"getUserId",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config","config.userId"])),setUserId:(0,y.debugWrapper)(t.setUserId.bind(t),"setUserId",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config","config.userId"])),getDeviceId:(0,y.debugWrapper)(t.getDeviceId.bind(t),"getDeviceId",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config","config.deviceId"])),setDeviceId:(0,y.debugWrapper)(t.setDeviceId.bind(t),"setDeviceId",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config","config.deviceId"])),reset:(0,y.debugWrapper)(t.reset.bind(t),"reset",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config","config.userId","config.deviceId"])),getSessionId:(0,y.debugWrapper)(t.getSessionId.bind(t),"getSessionId",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config"])),setSessionId:(0,y.debugWrapper)(t.setSessionId.bind(t),"setSessionId",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config"])),extendSession:(0,y.debugWrapper)(t.extendSession.bind(t),"extendSession",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config"])),setOptOut:(0,y.debugWrapper)(t.setOptOut.bind(t),"setOptOut",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config"])),setTransport:(0,y.debugWrapper)(t.setTransport.bind(t),"setTransport",(0,y.getClientLogConfig)(t),(0,y.getClientStates)(t,["config"]))}};Ke.createInstance=ru;Ke.default=(0,Ke.createInstance)()});var Ei=p(E=>{Object.defineProperty(E,"__esModule",{value:!0});E.Types=E.Identify=E.Revenue=E.runQueuedFunctions=E.track=E.setUserId=E.setTransport=E.setSessionId=E.setOptOut=E.setGroup=E.setDeviceId=E.revenue=E.reset=E.remove=E.logEvent=E.init=E.identify=E.groupIdentify=E.getUserId=E.getSessionId=E.getDeviceId=E.flush=E.extendSession=E.add=E.createInstance=void 0;var mi=(A(),D(R)),F=mi.__importDefault(Qr()),nu=Qr();Object.defineProperty(E,"createInstance",{enumerable:!0,get:function(){return nu.createInstance}});E.add=F.default.add,E.extendSession=F.default.extendSession,E.flush=F.default.flush,E.getDeviceId=F.default.getDeviceId,E.getSessionId=F.default.getSessionId,E.getUserId=F.default.getUserId,E.groupIdentify=F.default.groupIdentify,E.identify=F.default.identify,E.init=F.default.init,E.logEvent=F.default.logEvent,E.remove=F.default.remove,E.reset=F.default.reset,E.revenue=F.default.revenue,E.setDeviceId=F.default.setDeviceId,E.setGroup=F.default.setGroup,E.setOptOut=F.default.setOptOut,E.setSessionId=F.default.setSessionId,E.setTransport=F.default.setTransport,E.setUserId=F.default.setUserId,E.track=F.default.track;var iu=qr();Object.defineProperty(E,"runQueuedFunctions",{enumerable:!0,get:function(){return iu.runQueuedFunctions}});var bi=J();Object.defineProperty(E,"Revenue",{enumerable:!0,get:function(){return bi.Revenue}});Object.defineProperty(E,"Identify",{enumerable:!0,get:function(){return bi.Identify}});E.Types=mi.__importStar(H())});"@amplitude/analytics-browser"in globalThis.__thrush_future_vendor_registry__||Object.defineProperty(globalThis.__thrush_future_vendor_registry__,"@amplitude/analytics-browser",{get(){return Ei()}});
})();
