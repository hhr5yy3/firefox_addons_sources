!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.resterFormatJson=n()}(this,(function(){const e=function(){let e=0;return{VALUE:e++,STRING:e++,STRING_SLASHED:e++,STRING_SLASHED_U_1:e++,STRING_SLASHED_U_2:e++,STRING_SLASHED_U_3:e++,STRING_SLASHED_U_4:e++,NUMBER:e++,OBJECT:e++,OBJECT_KEY:e++,OBJECT_VALUE:e++,OBJECT_VALUE_END:e++,ARRAY:e++,ARRAY_VALUE_END:e++,TRUE_1:e++,TRUE_2:e++,TRUE_3:e++,FALSE_1:e++,FALSE_2:e++,FALSE_3:e++,FALSE_4:e++,NULL_1:e++,NULL_2:e++,NULL_3:e++,NAN_1:e++,NAN_2:e++,END:e++}}(),n=new Set("-0123456789"),r=new Set("-+0123456789.eE"),i=new Set('"\\/bfnrt'),t=new Set("\r\n \t"),a=new Set("0123456789abcdefABCDEF");class c{constructor(e,n){this.current=e,this.next=[n]}push(e,n){if(this.next.length>500)throw new _("max depth reached",n);this.next.push(e)}pop(){this.current=this.next.pop()}}function s(e){return"\n"+" ".repeat(e)}class _ extends Error{constructor(e,n){super(`ParseError at ${n}: ${e}`)}}return{formatJson:function(o){let E="",u=0,S="",f="";const A=o.length,l=new c(e.VALUE,e.END);for(let c=0;c<A;c++){const A=o[c];switch(l.current){case e.VALUE:if(t.has(A))continue;if('"'===A)l.current=e.STRING;else if(n.has(A))l.current=e.NUMBER;else if("{"===A)l.current=e.OBJECT;else if("["===A)l.current=e.ARRAY;else if("t"===A)l.current=e.TRUE_1;else if("f"===A)l.current=e.FALSE_1;else if("n"===A)l.current=e.NULL_1;else{if("N"!==A)throw new _("invalid value",c);l.current=e.NAN_1}break;case e.STRING:"\\"===A?(l.current=e.STRING_SLASHED,l.push(e.STRING,c)):'"'===A&&l.pop();break;case e.STRING_SLASHED:if(i.has(A))l.pop();else{if("u"!==A)throw new _("invalid escaped char in string",c);l.current=e.STRING_SLASHED_U_1}break;case e.STRING_SLASHED_U_1:if(!a.has(A))throw new _("invalid escaped unicode in string",c);l.current=e.STRING_SLASHED_U_2;break;case e.STRING_SLASHED_U_2:if(!a.has(A))throw new _("invalid escaped unicode in string",c);l.current=e.STRING_SLASHED_U_3;break;case e.STRING_SLASHED_U_3:if(!a.has(A))throw new _("invalid escaped unicode in string",c);l.current=e.STRING_SLASHED_U_4;break;case e.STRING_SLASHED_U_4:if(!a.has(A))throw new _("invalid escaped unicode in string",c);l.pop();break;case e.NUMBER:if(!r.has(A)){l.pop(),c--;continue}break;case e.OBJECT:if(t.has(A))continue;if('"'===A)u+=4,S=s(u),l.current=e.STRING,l.push(e.OBJECT_VALUE,c);else{if("}"!==A)throw new _("invalid object",c);l.pop()}break;case e.OBJECT_KEY:if(t.has(A))continue;if('"'!==A)throw new _("invalid object key",c);l.current=e.STRING,l.push(e.OBJECT_VALUE,c);break;case e.OBJECT_VALUE:if(t.has(A))continue;if(":"!==A)throw new _("invalid object value",c);f=" ",l.current=e.VALUE,l.push(e.OBJECT_VALUE_END,c);break;case e.OBJECT_VALUE_END:if(t.has(A))continue;if(","===A)f=s(u),l.current=e.OBJECT_KEY;else{if("}"!==A)throw new _("invalid object",c);u-=4,S=s(u),l.pop()}break;case e.ARRAY:if(t.has(A))continue;if("]"!==A){u+=4,S=s(u),l.current=e.VALUE,l.push(e.ARRAY_VALUE_END,c),c--;continue}l.pop();break;case e.ARRAY_VALUE_END:if(t.has(A))continue;if(","===A)f=s(u),l.current=e.VALUE,l.push(e.ARRAY_VALUE_END,c);else{if("]"!==A)throw new _("invalid array",c);u-=4,S=s(u),l.pop()}break;case e.TRUE_1:if("r"!==A)throw new _("invalid value",c);l.current=e.TRUE_2;break;case e.TRUE_2:if("u"!==A)throw new _("invalid value",c);l.current=e.TRUE_3;break;case e.TRUE_3:if("e"!==A)throw new _("invalid value",c);l.pop();break;case e.FALSE_1:if("a"!==A)throw new _("invalid value",c);l.current=e.FALSE_2;break;case e.FALSE_2:if("l"!==A)throw new _("invalid value",c);l.current=e.FALSE_3;break;case e.FALSE_3:if("s"!==A)throw new _("invalid value",c);l.current=e.FALSE_4;break;case e.FALSE_4:if("e"!==A)throw new _("invalid value",c);l.pop();break;case e.NULL_1:if("u"!==A)throw new _("invalid value",c);l.current=e.NULL_2;break;case e.NULL_2:if("l"!==A)throw new _("invalid value",c);l.current=e.NULL_3;break;case e.NULL_3:if("l"!==A)throw new _("invalid value",c);l.pop();break;case e.NAN_1:if("a"!==A)throw new _("invalid value",c);l.current=e.NAN_2;break;case e.NAN_2:if("N"!==A)throw new _("invalid value",c);l.pop();break;case e.END:if(t.has(A))continue;throw new _("invalid end",c);default:throw new _("invalid state",c)}E+=S+A+f,S="",f=""}if(l.current===e.NUMBER&&l.pop(),l.current!==e.END)throw new _("incomplete json",A);return E},ParseError:_}}));