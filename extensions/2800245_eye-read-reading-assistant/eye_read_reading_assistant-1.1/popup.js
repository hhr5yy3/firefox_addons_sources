var t={},n=!1;async function o(){if(n)try{await browser.runtime.sendMessage({method:"updateSettings",data:t})}catch(e){}}let a=document.getElementById("default-enabled-btn"),i=document.getElementById("default-enabled-view"),l=document.getElementById("default-enabled-tooltip"),r=document.getElementById("avg-highlight-percent"),c=document.getElementById("avg-highlight-percent-value"),u=document.getElementById("noise-level"),s=document.getElementById("noise-level-value");var e,g=document.getElementById("advanced-settings"),d=document.getElementById("feedback"),m=document.getElementById("support-us");try{!async function(){return browser.runtime.sendMessage({method:"getSettings",data:{}})}().then(e=>{t=e,n=!0,a.checked=e.default_enabled,i.title=e.default_enabled?"On":"Off",r.min=e.avg_highlight_percent.min,r.max=e.avg_highlight_percent.max,r.step=e.avg_highlight_percent.step,r.value=e.avg_highlight_percent.value,c.textContent=e.avg_highlight_percent.value,u.min=e.noise_level.min,u.max=e.noise_level.max,u.step=e.noise_level.step,u.value=e.noise_level.value,s.textContent=e.noise_level.value,setTimeout(()=>{i.style.setProperty("--transition","0.4s")},100)})}catch(e){}a.onclick=function(e){i.title=e.currentTarget.checked?"On":"Off",t.default_enabled=e.currentTarget.checked,o()},r.oninput=function(e){c.textContent=e.target.value},r.onclick=function(e){t.avg_highlight_percent.value=parseInt(e.target.value),o()},u.oninput=function(e){s.textContent=e.target.value},u.onclick=function(e){t.noise_level.value=parseInt(e.target.value),o()},g.onclick=function(e){browser.runtime.openOptionsPage?browser.runtime.openOptionsPage():window.open(browser.runtime.getURL("options.html"))},d.onclick=function(e){browser.tabs.create({url:"https://github.com/Eye-Read/EyeRead/issues"})},m.onclick=function(e){browser.tabs.create({url:"https://www.buymeacoffee.com/eyeread"})};for(e of document.getElementsByTagName("A"))e.onclick=function(e){browser.tabs.create({url:e.target.href})};!async function(){var e=await async function(){var e,t;for({name:e,shortcut:t}of await browser.commands.getAll())if("toggle-highlighting"===e)return t;return""}();l.title=e?"Shortcut: "+e:"No shortcut bound.",(e="unknown"==(e=(e=navigator.userAgent.toLowerCase()).includes("opera")||e.includes("opr")?"opera":e.includes("edg")?"edge":e.includes("chrome")?"chrome":e.includes("safari")?"safari":e.includes("firefox")?"firefox":"unknown")||"firefox"==e?"":e+"://extensions/shortcuts")&&(l.title+="\nTo change, go to url: "+e)}();