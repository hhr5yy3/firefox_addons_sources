(()=>{"use strict";var e,r,t,n={29268:(e,r,t)=>{var n=t(37730),o=t(2806),s=t(4350),i=t(25601),a=t(92386),c=t(10592),u=t(33156),l=t(96754),d=t(69259),m=t(59788),h=t(73789);const g=m.V.create({container:"background",module:"amphora",domain:"no-domain",infra:new h.e});function p(e){if(!(e.buildType&&"string"==typeof e.buildType&&Object.values(d.P).map((e=>e.toString())).includes(e.buildType)))throw new Error("Build type from runtime-config.json is invalid");return d.P[e.buildType]}const f=async()=>{const{buildType:e}=await(async()=>{try{const e=(0,l.A)("runtime-config.json");if(!e)throw new Error("Could not build path to runtime-config.json");const r=await fetch(e);return{buildType:p(await r.json())}}catch(e){return g.error("Unable to read buildType from runtime-config.json",{error:e}),{buildType:d.P.PRODUCTION}}})();return e};const w={appAccess:"C4F8H4SEAMXNBQVSASVBWDDZNCVTESMY",appSecret:"Na9Dz3WcmjMZ5pdYU1AmC5TdYkeWAOzvOK6PkbU4QjfjPQTSaXY8pjPwrvHfVH14"};const E={styxAccess:"DASHQ7DNHYSPYSG6JSF6",styxSecret:"LNS273zaVvwNM+VKOjotBYygJyPaM0CXshpdf0j7"},v={...w,...E,...null!=void 0?undefined:{}},b={LOG_LEVEL:4,CODE_NAME:"amphora",MANIFEST_VERSION:(0,u.W)().manifest_version,...(()=>{const e={[i.DashlaneAPISchemesNames.DASHLANE_API_HOST_WITH_SCHEME]:"https://api.dashlane.com",[i.DashlaneAPISchemesNames.DASHLANE_WS_HOST_WITH_SCHEME]:""};return Object.fromEntries(Object.entries(e).filter((([,e])=>e)))})()};async function _({apiConnector:e,debugConnector:r,infrastructureConnectors:t,legacyExtensionConnector:n,legacyWebappConnector:o,legacyMaverickConnector:l,publicPath:d,storageLayer:m,sessionStorage:h,app:p}){g.debug("Carbon initialization started");const w=await async function(){var e;const r=await f();return{platformName:"server_standalone",appVersion:(0,u.W)().version,versionName:(0,u.W)().version_name,browser:a.getBrowserName(),browserVersion:a.getBrowserVersion(),country:a.getBrowserCountry(),os:null!=(e=c.getOSName())?e:"",osCountry:a.getBrowserCountry(),osVersion:c.getOSVersion(),lang:a.getBrowserLanguage(),manifestVersion:(0,u.W)().manifest_version,buildType:r}}(),E=await(0,i.init)({connectors:{api:e,debug:r,extension:n,leeloo:o,maverick:l},infrastructure:{connectors:t},platformInfo:w,publicPath:d,storageLayer:m,sessionStorage:h,keys:v,config:b,settings:{sync:{syncWithLocalClients:!0},userABTestNames:["ace_password_health_labels",s.v]},createClients:p.createClient});return g.debug("Carbon initialization done"),E}var C=t(6523),y=t(52913),S=t(6721),L=t(22828),R=t(27880),k=t(4710),M=t(76847);var N=function(e){return e.PopupCarbon="Popup",e.PopupCarbonLoader="PopupCarbonLoader",e.OptionsCarbon="OptionsCarbon",e.WebappCarbon="leeloo",e}({}),x=t(97143),I=t(30504);class P extends I.GenericChannel{connect(e){this.onMessage=r=>{e.receive(r)},this.isConnected=!0,this._connected()}receive(e){this._messageReceived(e)}send(e){if(!this.isConnected)throw new Error("Channel not connected");if(!this.onMessage)throw new Error("onMessage handler not set");this.onMessage(e)}constructor(...e){super(...e),(0,x._)(this,"isConnected",!1),(0,x._)(this,"onMessage",null)}}const A=(e,r)=>{e.connect(r),r.connect(e)};var U=t(97334);function O(e){const r=function(e){return e.sender?.origin??new URL(e.sender?.url??e.sender?.tab?.url??"").origin}(e);return new URL((0,l.A)("")).origin===r}function q(e){return!!function(e){return(e.sender?.id??"")===(0,U.z)()}(e)||!!O(e)}var T=t(19523);class B extends I.GenericChannel{listen(){T.b.addListener(this.onConnectListener)}send(e){if(!this.currentPorts.size)throw new Error("No port to send message");this.currentPorts.forEach((r=>r.postMessage(e)))}setup(e){const r=this.currentPorts.get(e.name);r&&(r.disconnect(),this.onDisconnectListener(r)),e.onMessage.addListener(this.onMessageListener),e.onDisconnect.addListener(this.onDisconnectListener),this.currentPorts.set(e.name,e),this._connected()}constructor(e,r=5e3){super(r),(0,x._)(this,"name",void 0),(0,x._)(this,"currentPorts",void 0),(0,x._)(this,"onConnectListener",(e=>{if(e.name.startsWith(this.name)){if(this.currentPorts.has(e.name))throw new Error("Port already connected");if(!q(e))throw new Error("Sender origin not trusted");this.setup(e)}})),(0,x._)(this,"onDisconnectListener",(e=>{const r=this.currentPorts.get(e.name);if(r&&(r.onMessage.removeListener(this.onMessageListener),r.onDisconnect.removeListener(this.onDisconnectListener),this.currentPorts.delete(e.name)),this._disconnected(),chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(e)}})),(0,x._)(this,"onMessageListener",(e=>{this._messageReceived(e)})),this.name=e,this.currentPorts=new Map}}class $ extends I.GenericChannel{listen(){this.port&&(this.port.disconnect(),this.onDisconnectListener()),T.b.addListener(this.onConnectListener)}send(e){if(!this.port)throw new Error("No port to send message");this.port.postMessage(e)}setup(e){this.port=e,this.port.onMessage.addListener(this.onMessageListener),this.port.onDisconnect.addListener(this.onDisconnectListener),this._connected()}constructor(e,r=5e3){super(r),(0,x._)(this,"name",void 0),(0,x._)(this,"port",void 0),(0,x._)(this,"onConnectListener",(e=>{if(e.name===this.name){if(!q(e))throw new Error("Sender origin not trusted");this.setup(e)}})),(0,x._)(this,"onDisconnectListener",(()=>{if(this.port&&(this.port.onMessage.removeListener(this.onMessageListener),this.port.onDisconnect.removeListener(this.onDisconnectListener),this.port=void 0),this._disconnected(),chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(e)}})),(0,x._)(this,"onMessageListener",(e=>{this._messageReceived(e)})),this.name=e}}var z=t(8768),F=t(25944),D=t(11910),W=t(72683),G=t(86055),j=t(42986);function X(e){return(0,I.createEventBus)({events:z.X,channels:e})}function H(e){return(0,I.createEventBus)({events:D.z,channels:e})}function V(e,r){return(0,I.createEventBus)({events:W.N,channels:e,ignoredEvents:r})}function K(e){return(0,I.createEventBus)({events:G.I,channels:e})}function Y(e){return(0,I.createEventBus)({events:j.D,channels:e})}const J=3e4;const Q=5e3,{PopupCarbon:Z,PopupCarbonLoader:ee,OptionsCarbon:re,WebappCarbon:te}=N;function ne(){g.debug(`Initializing communication connectors ${Q}`);const e=new $(ee,Q);e.listen();const r=new $(Z,Q);r.listen();const t=new $(re,Q);t.listen();const n=new B(te,Q);n.listen();const o=new P,s=new P(J),a=new P,c=new P,u=K([o]),{carbonToExtensionLegacyConnector:l,extensionToCarbonLegacyConnector:d}=function(e){const r=new P,t=new P;return A(r,t),{carbonToExtensionLegacyConnector:H([...e,r]),extensionToCarbonLegacyConnector:H([t])}}([e,r]),m=new P(J),h=new P(J);A(m,h);const p=V([n,m]),f=V([h],i.LEGACY_LEELOO_SLOTS_TO_IGNORE),w=X([e,r,t,n,o,s,a,c]),E=(0,I.createEventBus)({events:F.o}),v={deviceLimit:Y([n])};const{autofillEngineCarbonConnector:b,autofillEngineLegacyCarbonConnector:_}=function(e){const r=new P;return A(e,r),{autofillEngineCarbonConnector:X([r]),autofillEngineLegacyCarbonConnector:K([r])}}(o),C=function(e){const r=new P;return A(e,r),X([r])}(c),y=function(e){const r=new P(J);return A(e,r),X([r])}(s);return{applicationModulesToCarbonApiConnector:y,autofillEngineCarbonConnector:b,autofillEngineLegacyCarbonConnector:_,carbonApiConnector:w,carbonDebugConnector:E,carbonInfrastructureConnectors:v,carbonLegacyMaverickConnector:u,carbonLegacyWebappConnector:p,carbonToExtensionLegacyConnector:l,extensionToCarbonApiConnector:function(e){const r=new P;return A(e,r),X([r])}(a),extensionToCarbonLegacyConnector:d,tiresiasBackgroundToCarbonConnector:C,carbonLegacyWebappConnectorForGraphene:f}}var oe=t(57205);function se(e){oe.Y.addListener(e)}const ie=1e4;function ae(e,r){return new Promise(((t,n)=>setTimeout((()=>n(r)),e)))}const ce=(e,r)=>{r(),g.info(`Executing task "${e}"`)};function ue(e){return{withAppClientReady(r){e.appClient.then((t=>{r.forEach((({name:r,fn:n})=>{(function(e,r,t){return Promise.race([e,ae(r,t)])})(Promise.resolve().then((()=>ce(r,(()=>{n({appClient:t,connectors:e.connectors})})))),ie,(()=>new Error(`Initialization Task ${r} timed out (${ie}ms)`))).then((()=>{g.info(`${r} task completed`)})).catch((e=>{throw g.error(`Initialization Task ${r} failed`,{error:e instanceof Error?e.message:String(e)}),e}))}))}))},withAppClientPromise(r){r.forEach((r=>{try{ce(r.name,(()=>r.fn(e)))}catch(e){throw g.error(`Error while running task; "${r.name}"`,{error:e instanceof Error?e.message:String(e)}),e}}))}}}t(42403),t(98849),t(78895),t(45595),t(25676);const le="assets/argon2/argon2.min.js",de="assets/argon2/argon2.wasm";function me(){try{self.loadArgon2WasmBinary=async()=>{const e=await fetch(de),r=await e.arrayBuffer();return new Uint8Array(r)}}catch(e){throw g.error("Failed to assign to self.loadArgon2WasmBinary",{error:e}),e}}function he(){try{self.loadArgon2WasmModule=()=>(importScripts(le),Promise.resolve()),self.loadArgon2WasmBinary=async()=>{const e=await fetch(de),r=await e.arrayBuffer();return new Uint8Array(r)},importScripts(le)}catch(e){throw g.error("Error when importing ARGON2_JS_WRAPPER_FOR_WASM script",{error:e}),e}}var ge=t(87163),pe=t(50839);function fe({connectors:{extensionToCarbonApiConnector:e,extensionToCarbonLegacyConnector:r}}){e.liveWebOnboardingMode.on((e=>{!async function(e,r){const t=r.flowLoginCredentialOnWebSite;t&&(await(0,pe.$)(t.domain),await(0,ge.U)({url:t.url}),await e.updateWebOnboardingMode({flowLoginCredentialOnWebSite:null}))}(r,e)}))}var we=t(59922);const Ee="https://www.dashlane.com",ve="/signup";async function be({connectors:{extensionToCarbonApiConnector:e}}){try{const r=new URL(`${Ee}/feedback`),t=await e.getPlatformName();r.searchParams.append("platform",t);const n=await e.getAnonymousComputerId();r.searchParams.append("aci",n),(0,we.S)(r.toString())}catch(e){g.warn("Error on display of survey after extension removal",{error:e})}}var _e=t(41707),Ce=t(45368);const ye="silent_deploy";async function Se(){try{const e=await(0,Ce.U)();if("object"==typeof e&&null!==e&&ye in e&&!0===e[ye])return void g.info("Silent Deploy is set, the webapp will not be launched")}catch{}(0,_e.b)({route:ve})}var Le=t(37724),Re=t(48062);function ke(e){return""!==e?e:void 0}async function Me({connectors:{extensionToCarbonApiConnector:e}}){const r=await async function(){const e=await(0,Le.g)({domain:"dashlane.com",name:"userFunnelCookie"}).catch((e=>(g.error("Error while getting dashlane cookies",{error:e}),[])));if(e[0]){const r=decodeURIComponent(e[0].value);try{return JSON.parse(r)}catch(e){g.error("Error parsing userFunnelCookie",{error:e})}}return{}}(),t=0===Object.keys(r).length?{has_cookie:!1}:{has_cookie:!0,heap_identity:r.trackingId,gclid:r.gclid,everflow_transaction_id:r.transaction_id,utm_pathname:r.pathname,utm_referrer:ke(r.referrer),utm_source:ke(r.utm_source),utm_campaign:ke(r.utm_campaign),utm_medium:ke(r.utm_medium),utm_content:ke(r.utm_content),utm_term:ke(r.utm_term),utm_visit_timestamp:r.utm_visitTimestamp,utm_last_click_pathname:r.last_click_pathname,utm_last_click_referrer:ke(r.last_click_referrer),utm_last_click_source:ke(r.last_click_source),utm_last_click_campaign:ke(r.last_click_campaign),utm_last_click_medium:ke(r.last_click_medium),utm_last_click_content:ke(r.last_click_content),utm_last_click_term:ke(r.last_click_term),utm_last_click_visit_timestamp:r.last_click_visitTimestamp};e.logEvent({event:new Re.UserFirstLaunchEvent({web:t})})}var Ne=t(74159);function xe({connectors:{carbonToExtensionLegacyConnector:e}}){e.reloadExtension.on((async e=>{try{e||(0,Ne.H)()}catch(e){throw g.error("Error while reloading extension",{error:e}),e}}))}var Ie=t(62822),Pe=t(41842),Ae=t(87065),Ue=t(6136),Oe=t(43978),qe=t(78346);async function Te(e){try{await(0,Ie.F)({isUserAuthenticated:e})}catch(e){g.error("Failed to update toolbar action icon",{error:e})}}function Be({appClient:e}){e.session.queries.selectedOpenedSession().pipe((0,Pe.h)(qe.d6),(0,Ae.U)((e=>!!e.data)),(0,Ue.x)(),(0,Oe.w)(Te)).subscribe()}var $e=t(14501),ze=t(24028);const Fe="#FFB81C";async function De(){try{const e=function(e){return"BETA"===e?{text:"BETA",color:Fe}:null}(await f());e&&((0,$e.d)({text:e.text}),(0,ze._)({color:e.color}))}catch(e){g.warn("Error on initialization of icon toolbar icon badge",{error:e})}}var We=t(64987),Ge=t(69235),je=t(98402);t(61238);const Xe=1;const He="^https?://w*\\.?app\\.dashlane\\.com(\\??[^/#]*)[^#]*#?/?(.*)$",Ve="^https?://w*\\.?console\\.dashlane\\.com(\\??[^/#]*)[^#]*#?/?(.*)$",Ke="^https://sso.nitro(staging)?.dashlane.com/saml/callback$";const Ye="https?://w*\\.?[a-z]+\\.dashlane\\.com.+noredirect.*$",Je="https?:w*\\.?[a-z]+\\.dashlane\\.com/cdn-cgi/access/authorized.*$";function Qe(e,r){const t=(0,l.A)(""),n=new URL(t).hostname;const o=function(e){return new URL(e).protocol}(t),s=function(e,r,t){return[{priority:t,action:{type:"redirect",redirect:{regexSubstitution:`${r}//${e}/index.html\\1#/\\2`}},condition:{regexFilter:He,resourceTypes:["main_frame"]}},{priority:t,action:{type:"redirect",redirect:{regexSubstitution:`${r}//${e}/index.html\\1#/console/\\2`}},condition:{regexFilter:Ve,resourceTypes:["main_frame"]}},{priority:t+1,action:{type:"redirect",redirect:{regexSubstitution:`${r}//${e}/loading.html`}},condition:{regexFilter:Ke,resourceTypes:["main_frame","sub_frame"]}}]}(n,o,r),i=[{priority:a=r+1,action:{type:"allowAllRequests"},condition:{regexFilter:Je,resourceTypes:["main_frame"]}},{priority:a,action:{type:"allowAllRequests"},condition:{regexFilter:Ye,resourceTypes:["main_frame"]}}];var a;const c=function(e,r,t,n){return e.map((e=>{const o=e.replace(/[.]/g,"\\$&");return{priority:n,action:{type:"redirect",redirect:{regexSubstitution:`${t}//${r}/index.html?token=${s=e,btoa(encodeURIComponent(s))}#/anti-phishing`}},condition:{regexFilter:`^https?://.*${o}.*$`,resourceTypes:["main_frame"]}};var s}))}(e,n,o,r+2);return[...s,...i,...c].map(((e,r)=>({id:r+Xe,...e})))}const Ze=new We.WU;async function er(e){await Ze.runExclusive((async()=>{const r=await async function(){return(await(0,Ge.z)()).map((e=>e.id))}(),t=Qe(e,1);(0,je.O)({removeRuleIds:r,addRules:t})}))}var rr=t(21597),tr=t(61856),nr=t(97379);function or(e){const{hostname:r,hash:t,search:n}=new URL(e),o=r.includes("console.dashlane.com")?`index.html${n}#/console${t.replace("#","/").replace("//","/")}`:`index.html${n}${t.replace("#","#/").replace("//","/")}`;return(0,l.A)(o)}const sr=new RegExp("(console|app).dashlane.com/cdn-cgi/access/authorized"),ir=["https://app.dashlane.com/*","https://console.dashlane.com/*"],ar=["https://sso.nitro.dashlane.com/saml/callback","https://sso.nitrostaging.dashlane.com/saml/callback"],cr="main_frame";function ur(e){const{url:r,tabId:t}=e,n=r.includes("/sso");return function(e){return e.includes("noredirect")||Boolean(e.match(sr))}(r)||(0,rr.V)(t,{active:!n,url:or(r)}),{}}function lr(e){const{tabId:r}=e;return(0,rr.V)(r,{active:!0,url:(0,l.A)("loading.html")}),{cancel:!0}}const dr=()=>{ir.forEach((e=>{tr.a.addListener(ur,{urls:[e],types:[cr]},[nr.X.Blocking])})),tr.a.addListener(lr,{urls:ar,types:[cr,"sub_frame"]},[nr.X.Blocking])};var mr=t(13134);function hr(e,r){return`${e}?token=${t=new mr.Y(r).getRootDomain(),btoa(encodeURIComponent(t))}#/anti-phishing`;var t}function gr(e){const{tabId:r,url:t}=e;if(!r)return{};const n=or((0,l.A)(""));return(0,rr.V)(e.tabId,{url:hr(n,t)}),{}}function pr(e){e.livePhishingURLList.on((e=>{g.info("Execute on carbon event antiPhishing change from carbon endpoint: livePhishingURLList"),function(e){if(!e.size)return;const r=Array.from(e).reduce(((e,r)=>{const t=["https","http"].map((e=>`${e}://*.${r}/*`));return e.push(...t),e}),[]);tr.a.hasListener(gr)&&tr.a.removeListener(gr),tr.a.addListener(gr,{urls:r,types:["main_frame"]})}(e)}))}var fr=t(3091);class wr{constructor(){this.state=new Map}getState(e){const r=this.state.get(e);return r?Promise.resolve(r):Promise.resolve({})}setState(e,r){return 0===Object.keys(r).length?this.state.delete(e):this.state.set(e,r),Promise.resolve()}}class Er{async getState(e){const r=await(0,R.U)(e);return r[e]?r[e]:{}}async setState(e,r){0===Object.keys(r).length?await(0,L.O)(e):await(0,k.t)({[e]:r})}}const vr=m.V.create({container:"background",module:"autofill-engine",domain:"autofill",infra:new h.e});function br({connectors:{autofillEngineCarbonConnector:e,autofillEngineLegacyCarbonConnector:r},appClient:t}){const o=(0,n.G)()?new Er:new wr,s=(new fr.Ps).getBrowserApi();(0,fr.B5)(s,{carbon:e,legacyCarbon:r,grapheneClientPromise:t},o,((e,r)=>{vr.debug(e,r)})),(0,fr.sr)(s)}var _r=t(51263),Cr=t(27938),yr=t(23647),Sr=t(70101),Lr=t(72720);let Rr=!1,kr=!1;try{Rr=IS_DEVTOOL_ENABLED,kr=IS_STANDALONE_EXTENSION}catch{}var Mr=t(99743);class Nr{_onSendMessageListener(e,r,t){if(!e||!this._messageListeners.has(e.msg))return!1;return this._messageListeners.get(e.msg)(e,r,t)}addListener(e,r,t){if(this._messageListeners.has(r))throw new Error("MessageHandler::addListener:: a listener already exists for message "+r);this._messageListeners.set(r,t.bind(e))}constructor(e){(0,x._)(this,"_messageListeners",void 0),this._messageListeners=new Map,Mr.p.addListener(((r,t,n)=>{try{const o=this._onSendMessageListener(r,t,n);return"boolean"==typeof o?o:(o.then((e=>n(e))).catch((r=>{e(r,{precisions:"Exception in onMessage listener",fileName:"MessageHandler.ts",funcName:"MessageHandler.constructor",code:_r.w.ERROR}),n()})),!0)}catch(r){return e(r,{precisions:"Exception in onMessage listener",fileName:"MessageHandler.ts",funcName:"MessageHandler.constructor",code:_r.w.ERROR}),!1}}))}}class xr{setResource(e,r){this._resources[e]=r}setAllResources(e){this._resources=e}getResource(e){return e in this._resources?this._resources[e]:void 0}getAllResources(){return this._resources}constructor(){(0,x._)(this,"_resources",void 0),this._resources={}}}class Ir{constructor(e,r){(0,x._)(this,"frameId",void 0),(0,x._)(this,"innerMessage",void 0),(0,x._)(this,"msg",void 0),this.frameId=e,this.innerMessage=r,this.msg=Ir.MSG}}(0,x._)(Ir,"MSG","ContentToContentMessage");class Pr{constructor(){(0,x._)(this,"msg",Pr.MSG)}}(0,x._)(Pr,"MSG","classify");class Ar{constructor(e){(0,x._)(this,"debugMode",void 0),(0,x._)(this,"msg",void 0),this.debugMode=e,this.msg=Ar.MSG}}(0,x._)(Ar,"MSG","debug");class Ur{constructor(e,r){(0,x._)(this,"debugMode",void 0),(0,x._)(this,"deepFormOutput",void 0),(0,x._)(this,"msg",void 0),this.debugMode=e,this.deepFormOutput=r,this.msg=Ur.MSG}}(0,x._)(Ur,"MSG","allParameters");class Or{constructor(e){(0,x._)(this,"lang",void 0),(0,x._)(this,"msg",void 0),this.lang=e,this.msg=Or.MSG}}(0,x._)(Or,"MSG","tabLanguage");class qr{constructor(e){(0,x._)(this,"report",void 0),(0,x._)(this,"msg",void 0),this.report=e,this.msg=qr.MSG}}(0,x._)(qr,"MSG","dispatchIframeExportReportMessage");class Tr{constructor(e){(0,x._)(this,"frameId",void 0),(0,x._)(this,"msg",void 0),(0,x._)(this,"parentFrameId",void 0),this.frameId=e,this.msg=Tr.MSG}}(0,x._)(Tr,"MSG","queryFrameIdResponse");class Br{constructor(){(0,x._)(this,"msg",Br.MSG)}}(0,x._)(Br,"MSG","queryAnalysisOnTopFrameIsSkippedInboundMessage");class $r{constructor(e,r,t,n){(0,x._)(this,"frameId",void 0),(0,x._)(this,"frameIndex",void 0),(0,x._)(this,"name",void 0),(0,x._)(this,"url",void 0),(0,x._)(this,"msg",void 0),(0,x._)(this,"adyenTitle",void 0),this.frameId=e,this.frameIndex=r,this.name=t,this.url=n,this.msg=$r.MSG}}(0,x._)($r,"MSG","ReportFrameIdAndIndexInboundMessage");class zr{constructor(e,r,t){(0,x._)(this,"frameId",void 0),(0,x._)(this,"lastReport",void 0),(0,x._)(this,"forceReportEvenIfNoChange",void 0),(0,x._)(this,"msg",void 0),this.frameId=e,this.lastReport=r,this.forceReportEvenIfNoChange=t,this.msg=zr.MSG}}(0,x._)(zr,"MSG","iframeReport");class Fr{constructor(){(0,x._)(this,"msg",Fr.MSG)}}(0,x._)(Fr,"MSG","reclassifyIframeMessage");class Dr{constructor(){(0,x._)(this,"msg",Dr.MSG)}}(0,x._)(Dr,"MSG","getAllParameters");class Wr{constructor(){(0,x._)(this,"msg",Wr.MSG)}}(0,x._)(Wr,"MSG","getTabLanguage");class Gr{constructor(e){(0,x._)(this,"formsAndFieldsContexts",void 0),(0,x._)(this,"msg",void 0),this.formsAndFieldsContexts=e,this.msg=Gr.MSG}}(0,x._)(Gr,"MSG","ahoCorasickifyMessage");class jr{constructor(e){(0,x._)(this,"isDevtoolEnabled",void 0),(0,x._)(this,"msg",void 0),this.isDevtoolEnabled=e,this.msg=jr.MSG}}(0,x._)(jr,"MSG","toggleDevtool");class Xr{constructor(e){(0,x._)(this,"formStructure",void 0),(0,x._)(this,"msg",void 0),this.formStructure=e,this.msg=Xr.MSG}}(0,x._)(Xr,"MSG","classificationReport");class Hr{constructor(e){(0,x._)(this,"report",void 0),(0,x._)(this,"msg",void 0),this.report=e,this.msg=Hr.MSG}}(0,x._)(Hr,"MSG","iframeExportReportMessage");class Vr{constructor(){(0,x._)(this,"msg",Vr.MSG)}}(0,x._)(Vr,"MSG","queryFrameId");class Kr{constructor(e,r,t){(0,x._)(this,"time",void 0),(0,x._)(this,"prose",void 0),(0,x._)(this,"url",void 0),(0,x._)(this,"msg",void 0),this.time=e,this.prose=r,this.url=t,this.msg=Kr.MSG}}(0,x._)(Kr,"MSG","timeToDMessage");class Yr{constructor(){(0,x._)(this,"msg",Yr.MSG)}}(0,x._)(Yr,"MSG","queryAnalysisOnTopFrameIsSkippedOutboundMessage");class Jr{constructor(){(0,x._)(this,"msg",Jr.MSG)}}(0,x._)(Jr,"MSG","initResourcesMessage");class Qr{constructor(e){(0,x._)(this,"log",void 0),(0,x._)(this,"msg",void 0),this.log=e,this.msg=Qr.MSG}}(0,x._)(Qr,"MSG","logExceptionMessage");class Zr{constructor(){(0,x._)(this,"msg",Zr.MSG)}}(0,x._)(Zr,"MSG","getConfigurationMessage");class et{constructor(e){(0,x._)(this,"tiresiasBackgroundOption",void 0),(0,x._)(this,"msg",void 0),this.tiresiasBackgroundOption=e,this.msg=et.MSG}}(0,x._)(et,"MSG","setConfigurationMessage");const rt=(e,r,t,n)=>{if(n.rateLimit&&n.rateLimit>=0&&n.rateLimit<Math.random())return;const o=n.rateLimit?`Rate limit applied: ${n.rateLimit}`:void 0,s=e instanceof Error?e.message:String(e),i=e instanceof Error?e.stack:void 0,a=n.appendExceptionToMessage??!0,c=[n.message,a?s:void 0].filter((e=>void 0!==e)).join(" - "),u=c.length>150?c.slice(0,147)+"...":c,l=[n.precisions,i,o].filter((e=>void 0!==e)).join("\n--\n");r({...n,message:u,precisions:l})};class tt{get value(){return this._value}get children(){return this._children}get childCount(){return this._children?this._children.length:0}hasChild(e){if(!e)throw Error("AhoCorasickTrieNode::hasChild: invalid value");return!!this._children&&this._children.some((r=>r.value===e))}getChild(e){if(!e)throw Error("AhoCorasickTrieNode::getChild: invalid value");return this._children?this._children.find((r=>r.value===e))??null:null}addChild(e){if(!e)throw Error("AhoCorasickTrieNode::addChild: invalid value");if(!e.startsWith(this.value))throw Error("AhoCorasickTrieNode::addChild: unable to add child because value does not start with parent's value");if(e.length!==this.value.length+1)throw Error("AhoCorasickTrieNode::addChild: value has wrong size");this._children||(this._children=[]);const r=new tt(e);return this._children.push(r),r}find(e){if(this.value)throw Error("AhoCorasickTrieNode::find: context is not the root of the trie");let r="",t=this;for(let n=0;n<e.length;n++){r+=e[n];const o=t.getChild(r);if(!o)return null;t=o}return t}constructor(e){(0,x._)(this,"_value",void 0),(0,x._)(this,"_children",void 0),(0,x._)(this,"final",void 0),this._value=e,this._children=null,this.final=!1}}class nt{search(e,r=!0){const t=[];let n=[];for(let r=0;r<e.length;r++){const o=e[r];n.push(this._trie);const s=[];n.forEach((e=>{const n=e.value+o,i=e.getChild(n);i&&(s.push(i),i.final&&t.push({needle:i.value,startOffset:r-i.value.length+1,endOffset:r}))})),n=s}return t.sort(((e,r)=>e.needle.length>r.needle.length?-1:e.needle.length<r.needle.length||e.endOffset>r.endOffset?1:e.endOffset<r.endOffset?-1:0)),r?t:t.reduce(((e,r)=>{if(e.length){e.some((e=>r.startOffset<=e.endOffset&&r.endOffset>=e.startOffset))||e.push(r)}else e.push(r);return e}),[])}constructor(e){if((0,x._)(this,"_trie",void 0),!Array.isArray(e))throw Error("AhoCorasick::constructor: argument is not an array");this._trie=new tt(""),e.forEach((e=>{let r=this._trie;for(let t=0;t<e.length;t++){const n=e[t];if(r){const e=r.value+n;if(r.hasChild(e))r=r.getChild(e);else{const t=r.addChild(e);r=t}}else r=this._trie.addChild(n)}r&&(r.final=!0)}))}}class ot{_search(e,r=!0){return this._wrapped.search(e,r)}searchAndSplit(e){if(this.kDISABLE)return e;return e.split(" ").reduce(((e,r)=>{const t=this._search(r,!1);if(t?.length){t.sort(((e,r)=>e.startOffset-r.startOffset));let n=0;for(const o of t)n!==o.startOffset&&e.push(r.substring(n,o.startOffset)),e.push(o.needle),n=o.endOffset+1;n<r.length&&e.push(r.substring(n))}else e.push(r);return e}),[]).join(" ")}constructor(){(0,x._)(this,"kDISABLE",!1),(0,x._)(this,"_wrapped",void 0);this._wrapped=new nt(["account","birth","change","compte","connect","connexion","cree","creation","create","date","daten","email","enregistre","enregistrer","enregistrez","enregistrement","first","forgot","identifier","identifiez","identification","inscrire","inscris","inscription","inscrivez","keep","log","oublie","passe","password","passeport","perdu","premier","register","remember","reset","search","sign","subscribe","update","user","users","username","validate"])}}class st{setPandora(e){this._pandora=e}listen(){T.b.addListener((e=>{e.onMessage.addListener((r=>{try{switch(r.name){case"init":if(!this.isEnabled)return void e.postMessage({name:"disable"});e.postMessage({name:"getClassifications",data:this._tabStorage.get(r.tabId)});break;case"devtoolModelContext":if(!r.data)throw Error("devtoolModelContext message sent without data");e.postMessage({name:"devtoolModelPrediction",data:this.contextPrediction(r.data)})}}catch(e){this.logException(e,{precisions:"Exception in onMessage listener",fileName:"DevtoolManager.ts",funcName:"DevtoolManager.listen",code:_r.w.ERROR})}})),e.onDisconnect.addListener((r=>{try{const r=Object.keys(this._devtoolsConnection);for(let t=0,n=r.length;t<n;t++)if(this._devtoolsConnection[r[t]]===e){delete this._devtoolsConnection[r[t]];break}}catch(e){this.logException(e,{precisions:"Exception in onDisconnect listener",fileName:"DevtoolManager.ts",funcName:"DevtoolManager.listen",code:_r.w.ERROR})}}))}))}storeTabFormsStructure(e,r){this.deleteTabId(e),this._tabStorage.set(e,r)}contextPrediction(e){const r={context:e.form,fields:e.fields.map((r=>({...r,form:{humanReadable:e.form.humanReadable,buttonVerbatim:e.form.buttonVerbatim,classification:""}})))};return this._pandora.explainStructure(r)}deleteTabId(e){this._tabStorage.has(e)&&this._tabStorage.delete(e)}cleanTabStorage(){for(const e of this._tabStorage.keys())this._tabStorage.delete(e)}constructor(e,r){(0,x._)(this,"isEnabled",void 0),(0,x._)(this,"logException",void 0),(0,x._)(this,"_devtoolsConnection",void 0),(0,x._)(this,"_tabStorage",void 0),(0,x._)(this,"_pandora",void 0),this.isEnabled=e,this.logException=r,this._devtoolsConnection={},this._tabStorage=new Map}}var it=function(e){return e.Json="JSON",e.Bson="BSON",e}({});function at(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const ct=at((0,t(28955).s)());const ut=at((0,t(87410).s)());var lt=function(e){return e.CANNOT_INIT_FILE="Cannot init from local directory",e.CANNOT_UPDATE_FILE="Cannot update file from distant server",e.UNKNOWN_ERROR="Unknown Error",e}({});class dt{buildLocalPath(){return"/data/"+this.fileName}getFileContent(){return this.fileContent}constructor(e){(0,x._)(this,"fileName",void 0),(0,x._)(this,"fileContent",void 0),this.fileName=e}}class mt extends dt{loadLocally(){return new Promise(((e,r)=>{this._localFileFetcher.fetch(this.buildLocalPath(),it.Bson,(r=>{this.fileContent=new this._classifierClassRef(r),e(this.fileContent)}),(e=>{r(new Error(`${lt.CANNOT_INIT_FILE}: ${e.message}`))}))}))}getRemoteUpdate(e){throw new Error("Method not implemented.")}constructor(e,r,t){super(e),(0,x._)(this,"_localFileFetcher",void 0),(0,x._)(this,"_classifierClassRef",void 0),this._localFileFetcher=r,this._classifierClassRef=t}}class ht extends mt{constructor(e){super(ht.NAME,e,ut)}}(0,x._)(ht,"NAME","forms_model.min.bson");class gt extends mt{constructor(e){super(gt.NAME,e,ct)}}(0,x._)(gt,"NAME","fields_model.min.bson");class pt extends dt{loadLocally(){return new Promise(((e,r)=>{this._localFetcher.fetch(this.buildLocalPath(),it.Json,(r=>{this.fileContent=r,e(this.fileContent)}),(e=>{r(e)}))}))}getRemoteUpdate(e){return JSON.parse(e)}constructor(e){super(pt.NAME),(0,x._)(this,"_localFetcher",void 0),this._localFetcher=e}}(0,x._)(pt,"NAME","overrides.json");class ft{registerFileListener(e,r){return e in this.registeredFiles&&(this.registeredFiles[e].callback=r),this}async init(){await Promise.all(Object.values(this.registeredFiles).map((async({fileHandler:e,callback:r})=>{try{const t=await e.loadLocally();r&&r(t)}catch(e){this._tiresiasExceptionLogger(e,{precisions:"Exception in FileManager init",fileName:"FileManager.ts",funcName:"FileManager.init",code:_r.w.ERROR})}})))}_handleGrapheneRemoteFileUpdate(){this._connectors.grapheneClient?.overrides.queries.overrides().subscribe((e=>{if((0,qe.hx)(e))return;const r=this.registeredFiles["overrides.json"].callback;r&&r((0,qe.db)(e).overrides)}))}async handleRemoteFileMetaUpdate(e){const{carbonConnectorApi:r}=this._connectors;r&&await Promise.all(Object.keys(e).map((async e=>{if(!r||!(e in this.registeredFiles))return;const t=await this.registeredFiles[e].fileHandler.getRemoteUpdate(await r.getFileContent(e)),n=this.registeredFiles[e].callback;n&&n(t)})))}constructor(e,r,t){(0,x._)(this,"_tiresiasExceptionLogger",void 0),(0,x._)(this,"_localFileFetcher",void 0),(0,x._)(this,"_connectors",void 0),(0,x._)(this,"registeredFiles",void 0),this._tiresiasExceptionLogger=e,this._localFileFetcher=r,this._connectors=t,this.registeredFiles={[ht.NAME]:{fileHandler:new ht(this._localFileFetcher)},[gt.NAME]:{fileHandler:new gt(this._localFileFetcher)},[pt.NAME]:{fileHandler:new pt(this._localFileFetcher)}},this._connectors.carbonConnectorApi?.liveLoginStatus.on((({loggedIn:e})=>{e&&this._handleGrapheneRemoteFileUpdate()}))}}var wt=t(89984);class Et{getParentFrameId(e,r){const t=this._tabMap.get(e);return t?t.get(r):void 0}constructor(e){(0,x._)(this,"_tabMap",void 0),this._tabMap=new Map,tr.a.addListener((r=>{try{if(r.tabId<0||r.frameId<0||r.parentFrameId<0)return;this._tabMap.has(r.tabId)||this._tabMap.set(r.tabId,new Map);const e=this._tabMap.get(r.tabId);if(e){if(e.has(r.frameId)&&e.get(r.frameId)===r.parentFrameId)return;e.set(r.frameId,r.parentFrameId)}}catch(r){e(r,{precisions:"Exception in onBeforeRequest listener",fileName:"FrameIdCollector.ts",funcName:"FrameIdCollector.constructor",code:_r.w.ERROR})}}),{urls:["<all_urls>"]}),Sr.$.addListener((r=>{try{this._tabMap.delete(r)}catch(r){e(r,{precisions:"Exception in onRemoved listener",fileName:"FrameIdCollector.ts",funcName:"FrameIdCollector.constructor",code:_r.w.ERROR})}})),wt.g.addListener((r=>{try{r.id&&this._tabMap.set(r.id,new Map)}catch(r){e(r,{precisions:"Exception in onCreated listener",fileName:"FrameIdCollector.ts",funcName:"FrameIdCollector.constructor",code:_r.w.ERROR})}}))}}class vt{setFormsClassifier(e){this._formsClassifier=e}setFieldsClassifier(e){this._fieldsClassifier=e}predictStructure(e){const r=this._formsClassifier.toString(this._formsClassifier.smartPredict(e.context));return{classification:r||"other",fields:e.fields.map((e=>(e.form.classification=r,this._fieldsClassifier.toString(this._fieldsClassifier.smartPredict(e))||"other")))}}explainStructure(e){const r=this._formsClassifier.smartPredict(e.context),t=this._formsClassifier.toString(r);return{form:{classification:t||"nothing",prediction:r,explanation:this._formsClassifier.explain(e.context),context:e.context},fields:e.fields.map((e=>{const r=this._fieldsClassifier.smartPredict(e);return e.form.classification=t,{classification:this._fieldsClassifier.toString(r)||"nothing",prediction:r,explanation:this._fieldsClassifier.explain(e),context:e}}))}}constructor(){(0,x._)(this,"_formsClassifier",void 0),(0,x._)(this,"_fieldsClassifier",void 0)}}const bt="tiresiasConfigOption",_t=e=>{return r={[bt]:e},(0,S.t)(r);var r},Ct=()=>(async e=>{const r=await(0,C.U)(e);if(void 0===r[e])throw new Error("Undefined key in local storage");return r[e]})(bt);var yt=t(26029);class St{loadFileContent(e,r){switch(r){case it.Json:return JSON.parse(e);case it.Bson:return(0,yt.vB)(e);default:return e}}}class Lt extends St{fetch(e,r,t,n){new Promise(((n,o)=>{fetch((0,l.A)(e),{mode:"same-origin"}).then((e=>e.blob())).then((function(e){const s=new FileReader;s.addEventListener("loadend",(function(){if(t&&"function"==typeof t)try{this.result||o(new Error("The result of fetch is null")),n(this.result)}catch(e){o(e)}})),r===it.Bson?s.readAsArrayBuffer(e):s.readAsText(e)})).catch(o)})).then((e=>t(this.loadFileContent(e,r)))).catch(n)}constructor(){super()}}class Rt{static build(){return new Lt}}const kt=["https","http"],Mt=!0,Nt=!0;class xt{_initializeUpdateableResources(){this._resourcesStorage=new xr,this._localFileFetcher=Rt.build(),this._fileManager=new ft(this.logException,this._localFileFetcher,{carbonConnectorApi:this.carbonConnectorApi,grapheneClient:this._grapheneClient}).registerFileListener(ht.NAME,(e=>{this._pandora.setFormsClassifier(e)})).registerFileListener(gt.NAME,(e=>{this._pandora.setFieldsClassifier(e)})).registerFileListener(pt.NAME,(e=>{this._resourcesStorage.setResource("overrides",e)})),this._fileResourcesLoading=this._fileManager.init()}_initializeDevTool(){this._devtoolManager=new st(!1,this.logException),this._devtoolManager.listen(),this._registerHandlers(),Rr&&this._devtoolManager.setPandora(this._pandora),Cr.i.addListener(((e,r)=>{try{if("complete"===r.status){if(!r.url||!kt.includes(new URL(r.url).protocol))return;this._devtoolManager.isEnabled&&this._devtoolManager.deleteTabId(e);const t=new Pr;(0,yr.b)(e,t,{ignoreError:!0},(()=>{}))}}catch(e){this.logException(e,{precisions:"Exception in onUpdated listener",fileName:"TiresiasBackground.ts",funcName:"TiresiasBackground._initializeDevTool",code:_r.w.ERROR})}})),this._devtoolManager.isEnabled&&Sr.$.addListener((e=>{try{this._devtoolManager.deleteTabId(e)}catch(e){this.logException(e,{precisions:"Exception in onRemoved listener",fileName:"TiresiasBackground.ts",funcName:"TiresiasBackground._initializeDevTool",code:_r.w.ERROR})}}))}_replyConfiguration(e,r,t){return t(new Ur(Mt,Nt)),!0}async _replyTabLanguage(e,r){try{const e=r.tab?.id;if(e){const r=await(0,Lr.e)(e);return new Or(r||"und")}throw new Error("Missing tabId")}catch(e){return this.logException(e,{message:"Unable to detect page language",appendExceptionToMessage:!1,fileName:"TiresiasBackground.ts",funcName:"TiresiasBackground._replyTabLanguage",code:_r.w.WARNING,rateLimit:.1}),new Or("und")}}_ahoCorasickify(e,r,t){const n=["humanReadableProse","attributes","buttonVerbatim"];return e.formsAndFieldsContexts.forEach((e=>{if(e.formContext)for(const r of n)r in e.formContext&&(e.formContext[r]=this._ahoCorasickWrapper.searchAndSplit(e.formContext[r]));e.fieldsContext.forEach((e=>{if(e)for(const r of n)r in e&&(e[r]=this._ahoCorasickWrapper.searchAndSplit(e[r]))}))})),t(e.formsAndFieldsContexts),!0}_toggleDevTool(e,r,t){const n=Rr&&e.isDevtoolEnabled;return n||this._devtoolManager.cleanTabStorage(),this._devtoolManager.isEnabled=n,t({}),!0}_performClassification(e,r,t){return this._fileResourcesLoading.then((()=>{const n=r.tab?.id,o=e.formStructure.map((e=>this._pandora.predictStructure(e)));if(t(o),n&&this._devtoolManager.isEnabled){const r=e.formStructure.map((e=>this._pandora.explainStructure(e)));this._devtoolManager.storeTabFormsStructure(n,r)}})),!0}_dispatchIframeReport(e,r,t){const n=r.tab?.id;return n&&(0,yr.b)(n,new qr(e.report),{}),t({}),!0}_respondFrameId(e,r,t){const n=new Tr(r.frameId??0);if(r.tab?.id){const e=this._frameIdCollector.getParentFrameId(r.tab.id,n.frameId);void 0!==e&&(n.parentFrameId=e)}return t(n),!0}_showTimeToD(e,r,t){return t({}),!0}_handleAnalysisSkippedRequest(e,r,t){const n=r.tab?.id;return!n||(new Promise((e=>{(0,yr.b)(n,new Br,{frameId:0},e)})).then((e=>t(e))),!0)}_handleContentToContentMessage(e,r,t){const n=r.tab?.id;return n&&new Promise((r=>{(0,yr.b)(n,e.innerMessage,{frameId:e.frameId},r)})).then((e=>t(e))),!0}_handleInitResourcesMessage(e,r,t){return this._fileResourcesLoading.then((()=>{t(this._resourcesStorage.getAllResources())})),!0}_handleGetConfigurationMessage(e,r,t){return Ct().then((e=>{t(e)})).catch((()=>{t(void 0)})),!0}_handleSetConfigurationMessage(e,r,t){return _t(e.tiresiasBackgroundOption),!0}_registerHandlers(){[{msg:Dr.MSG,handler:this._replyConfiguration},{msg:Wr.MSG,handler:this._replyTabLanguage},{msg:Gr.MSG,handler:this._ahoCorasickify},{msg:jr.MSG,handler:this._toggleDevTool},{msg:Xr.MSG,handler:this._performClassification},{msg:Hr.MSG,handler:this._dispatchIframeReport},{msg:Vr.MSG,handler:this._respondFrameId},{msg:Kr.MSG,handler:this._showTimeToD},{msg:Yr.MSG,handler:this._handleAnalysisSkippedRequest},{msg:Ir.MSG,handler:this._handleContentToContentMessage},{msg:Jr.MSG,handler:this._handleInitResourcesMessage},{msg:Qr.MSG,handler:this._handleLogExceptionMessage},{msg:Zr.MSG,handler:this._handleGetConfigurationMessage},{msg:et.MSG,handler:this._handleSetConfigurationMessage}].forEach((({msg:e,handler:r})=>{this._messageHandler.addListener(this,e,r)}))}_handleLogExceptionMessage(e){var r,t;return this.carbonConnectorApi&&(r=this.carbonConnectorApi,t={message:e.log.message??"LogExceptionMessage received with no message",...e.log},r.logException({exceptionType:"tiresiasException",log:t})),!1}constructor(e){var r;(0,x._)(this,"_ahoCorasickWrapper",void 0),(0,x._)(this,"_pandora",void 0),(0,x._)(this,"_devtoolManager",void 0),(0,x._)(this,"_frameIdCollector",void 0),(0,x._)(this,"_fileManager",void 0),(0,x._)(this,"_localFileFetcher",void 0),(0,x._)(this,"_resourcesStorage",void 0),(0,x._)(this,"_messageHandler",void 0),(0,x._)(this,"_fileResourcesLoading",void 0),(0,x._)(this,"_grapheneClient",void 0),(0,x._)(this,"carbonConnectorApi",void 0),(0,x._)(this,"logException",void 0),this._grapheneClient=e.grapheneClient,this.carbonConnectorApi=e.carbonConnectorApi,this.logException=this.carbonConnectorApi?(e.messageLogger,r=this.carbonConnectorApi,(e,t)=>{rt(e,(e=>r.logException({exceptionType:"tiresiasException",log:e})),0,t)}):()=>{};try{this._messageHandler=new Nr(this.logException),this._pandora=new vt,this._frameIdCollector=new Et(this.logException),this._ahoCorasickWrapper=new ot,this._initializeDevTool(),this._initializeUpdateableResources()}catch(e){this.logException(e,{precisions:"Exception in background initialization",fileName:"TiresiasBackground.ts",funcName:"TiresiasBackground.constructor",code:_r.w.ERROR})}}}const It=m.V.create({container:"background",module:"tiresias",domain:"no-domain",infra:new h.e});function Pt(e,r){It.debug(e,r)}let At=null;function Ut({connectors:{tiresiasBackgroundToCarbonConnector:e},appClient:r}){It.info("Creation of Tiresias background process"),At=new xt({messageLogger:Pt,carbonConnectorApi:e,grapheneClient:r})}var Ot=t(3204),qt=t(90904),Tt=t(7759),Bt=t(91842),$t=t(30011),zt=t(89175),Ft=t(55980),Dt=t(33471),Wt=t(3526),Gt=t(8811),jt=t(72600),Xt=t(14186),Ht=t(39149),Vt=t(22432),Kt=t(89434),Yt=t(46044),Jt=t(91743),Qt=t(48302),Zt=t(49699),en=t(42631),rn=t(75421),tn=t(66916),nn=t(87027),on=t(23047),sn=t(13002),an=t(14809),cn=t(41511),un=t(5206),ln=t(93218),dn=t(10842),mn=t(48058),hn=t(58484),gn=t(76053),pn=t(15792),fn=t(39976),wn=t(86999),En=t(40416),vn=t(66481),bn=t(53415),_n=t(19961),Cn=t(99081),yn=t(63481),Sn=t(99813),Ln=t(79925),Rn=t(12770),kn=t(93849),Mn=t(35284),Nn=t(88586),xn=t(43331),In=t(73139),Pn=t(7984),An=t(43022),Un=t(47715),On=t(24860),qn=t(34476),Tn=t(31519),Bn=t(49371),$n=t(6344),zn=t(84810),Fn=t(91582),Dn=t(76476),Wn=t(41480),Gn=t(53765),jn=t(97067),Xn=t(73129),Hn=t(83151),Vn=t(59683),Kn=t(477),Yn=t(39071),Jn=t(43491),Qn=t(17295),Zn=t(61648),eo=t(29292),ro=t(72481),to=t(41892),no=t(24981),oo=t(53195),so=t(57418),io=t(39378),ao=t(1140),co=t(35451),uo=t(12875),lo=t(20412),mo=t(213),ho=t(56684),go=t(6751),po=t(99520),fo=t(41446),wo=t(75644),Eo=t(76347),vo=t(32611),bo=t(39331),_o=t(53183),Co=t(67206),yo=t(50618),So=t(4184),Lo=t(1884),Ro=t(15090),ko=t(22033),Mo=t(38586),No=t(62076),xo=t(45736),Io=t(47714),Po=t(21483),Ao=t(78857),Uo=t(46675),Oo=t(38357),qo=t(3966),To=t(85378),Bo=t(2406),$o=t(21512),zo=t(19052),Fo=t(44272),Do=t(58172),Wo=t(15661),Go=t(95324),jo=t(69840),Xo=t(51191),Ho=t(80699),Vo=t(32127),Ko=t(81050),Yo=t(6850),Jo=t(19813),Qo=t(58955),Zo=t(55743),es=t(88427),rs=t(61746),ts=t(38021),ns=t(29406),os=t(36610),ss=t(6423);function is(e){const r=function({column:e,line:r,name:t}){return e||r||t?`${t}:${r}:${e}`:""}({column:e.colno,line:e.lineno,name:e.filename});return{error:e.error,fileLocation:r,origin:"uncaughtException"}}function as(e){return{error:e.reason,origin:"unhandledPromiseRejection"}}function cs(e){return!(e.reason instanceof TypeError&&"Failed to fetch"===e.reason.message&&e.reason.stack?.includes("assets/argon2/argon2.min.js"))}function us(e){e.preventDefault()}class ls extends ss.fW{constructor(e){const r=(0,ns.T)(function(e){let r;return new os.j({source:{addListener:t=>{r=r=>(us(r),t(r,e)),e.addEventListener("error",r)},removeListener:()=>{e.removeEventListener("error",r)}},filter:e=>!0}).events$.pipe((0,Ae.U)((([e])=>e)),(0,Ae.U)(is))}(e),function(e){let r;return new os.j({source:{addListener:t=>{r=r=>(us(r),t(r,e)),e.addEventListener("unhandledrejection",r)},removeListener:()=>{e.removeEventListener("unhandledrejection",r)}},filter:e=>!0}).events$.pipe((0,Ae.U)((([e])=>e)),(0,Pe.h)(cs),(0,Ae.U)(as))}(e));super(r)}}const ds=m.V.create({container:"background",module:"carbon",domain:"no-domain",infra:new h.e}),ms=new ls(self),hs=new Mn.y,gs={accessKey:"",secretKey:""},ps=((0,No.x)("prod"),"prod"),fs=void 0,ws=(0,Qn.w)();var Es=t(71751),vs=t(6045);const bs=["/content/injectedts/vendors.js","/content/contentScripts/kwift.CHROME.js"],_s="options.useInjectScriptOnStart";function Cs(){!async function(){try{(await(0,C.U)(_s))[_s]&&(await(0,Es.I)({url:["http://*/*","https://*/*"]})).forEach((({id:e})=>{e&&(0,vs.k)({target:{tabId:e,allFrames:!0},files:bs})}))}catch(e){throw g.error("Failed to inject script on existing tabs",{error:e}),e}}()}const ys=["error","info","log","warning"];var Ss=t(99132);var Ls=t(98455),Rs=t(3764);const ks="crd.massDeploymentDeviceId",Ms="MassDeployedTeamKey";async function Ns({connectors:{extensionToCarbonApiConnector:e}}){try{if(!(await(0,C.U)(ks))[ks]){const r=await(0,Ce.U)();if("object"==typeof r&&null!==r&&Ms in r&&"string"==typeof r[Ms]){g.info("log device protected by CRD");const t=r[Ms].split("-")[0],n=crypto.randomUUID();(0,S.t)({[ks]:n}),e.logEvent({event:new Re.AnonymousMassDeploymentStatusEvent({isProtectedByCredentialRiskDetection:!!t,massDeploymentAccessKey:t,massDeploymentDeviceId:n})})}}}catch(e){g.error(`${e}`)}}"pbenjapkjdkdlfdjjokeendimjkgjgjb"===chrome.runtime.id||chrome.runtime.id;async function xs(e,r){const t=new i.CarbonStorage({itemExists:async e=>await(0,M.j)(e),readItem:async e=>{const r=(await(0,C.U)(e))[e];return function(e){return"string"==typeof e||null===e}(r)?r:null},removeItem:async e=>{await(0,y.O)(e)},writeItem:async(e,r)=>{const t={[e]:r};await(0,S.t)(t)}}),o=(0,n.G)()?{removeItem:async e=>await(0,L.O)(e),getItem:async e=>(await(0,R.U)(e))[e],setItem:async(e,r)=>{const t={[e]:r};await(0,k.t)(t).catch((r=>{throw new Error(`carbon storing ${e}: ${r.message}`)}))}}:void 0,{app:s,signalCarbonReady:a,signalCarbonInitFailed:c}=await async function(e){g.debug("Starting application modules");const r=new i.CarbonLegacyInfrastructure,t=(0,Nn.Y)();return{app:await(0,Yt.u)({externalLoggers:[g,ds],appDefinition:Ot.R,channels:{},channelsListener:e,currentNode:"background",diagnosticsLogProcessor:(0,Jt.$)(tn.T),exceptionLogging:{sink:(0,Jt.$)(nn.u),uncaughtErrorSource:(0,Jt.z)(ms)},implementations:{publicApi:ts.M,cloudPasskey:fo.A,accountCreation:yn.Z,deleteOrResetAccount:Sn.T,subscriptionCode:Ln.q,accountReferral:Rn.o,analytics:on.I,featureFlips:sn.k,"carbon-legacy":{module:i.CarbonLegacyModule,configurations:{infrastructure:(0,Jt.z)(r)}},permissions:Mo.B,passwordHealth:Zn.C,authenticationFlow:{module:io.c,configurations:{authenticationFlowContextInfrastructure:(0,Jt.z)(new po.e(ao.kg))}},deviceTransfer:co.I,activityLogs:So.Z,accountManagement:kn.c,loggedOutMonitoring:Lo.a,identityVerificationFlow:uo.f,autofillSettings:wo.P,autofillData:Eo.U,autofillTracking:vo.V,autofillSecurity:bo.k,autofillNotifications:_o.r,linkedWebsites:Co.J,teamEnclave:Po.Z,confidentialSSOApi:{module:xo.D,configurations:{enclaveLoginContextInfrastructure:(0,Jt.z)(new Ao.X)}},scim:Io.i,nudges:ko._,session:{module:Tt._,configurations:{session:(0,Jt.$)(Bt.h)}},sync:qt.R,importOrchestrator:Wt.F,vaultReport:eo.E,vaultItemsCrud:Gt.z,vaultSearch:jt.U,vaultNotifications:Xt.K,vaultOrganization:Ht.H,secureFiles:Vt.E,uiSettings:an.Y,passwordLimit:Kt.a,pinCode:lo.N,otp:ro.f,masterPasswordSecurity:Yo.f,emailMonitoring:to.S,breaches:no.t,sharingCollections:Uo.a,sharingItems:Oo.F,sharingInvites:qo.p,sharingRecipients:To.u,sharingSync:Bo.P,antiphishing:oo.v,overrides:yo.x,accountRecoveryKey:so.D,teamMembers:Fo.X,teamVat:Do.K,teamPlanDetails:Wo.H,teamPlanUpdate:Go.c,inviteLink:jo._,teamAdminNotifications:Xo.E,notifications:Vo.F,changeMasterPassword:$t.M,teamPasswordHealth:Ho.V,userConsents:Qo.K,vaultAccess:zt.r,vpnNotifications:Jo.u,userVerification:mo.Z,getStarted:Zo.$,profileAdmin:es.y,deviceRegistration:ho._,b2cPlansApi:rs.X,webServices:cn.n.configure({baseUrl:"https://api.dashlane.com",appKeys:{appAccessKey:w.appAccess,appSecretKey:w.appSecret},...fs?{cloudflareKeys:{cloudflareAccessKey:fs.cloudflareAccess,cloudflareSecretKey:fs.cloudflareSecret}}:{}},(0,Jt.$)(Ft.w)),platformInfo:un.i,authentication:go.R,siem:Ro.g,deviceManagement:Ko.B,icons:ln.p,"file-download":{module:Qt.l,configurations:{fileDownloadEmitterChannel:(0,Jt.z)((new xn.m).makeFileDownloadEmitterChannel())}},"file-upload":{module:Zt.O,configurations:{fileUploadListener:t?(0,Jt.$)(In.w.initializeListener()):(0,Jt.$)(Pn.b)}},killSwitch:dn.B,sharingRemoteControl:$o.D,sharingCenter:zo.k},otherModules:[...t?[en.f.configure((0,Jt.$)(An.D))]:[],mn.F.configure({}),hn.T,rn.X.configure((0,Jt.z)(new Un.A)),gn.Q.configure((0,Jt.$)(pn.U),(0,Jt.$)(fn.P),(0,Jt.$)(wn.c)),En.D.configure((0,Jt.z)(new vn.i({computeHash:On.x,decryptAes256:qn.$,decryptRsaOaep:Tn.G,deriveKeyArgon2d:Bn.f,deriveKeyPbkdf2:$n.x,encryptAes256:zn.P,encryptRsaOaep:Fn.b,generateKeyAes256:Dn.o,generateKeyPairRsaOaep:Wn.Y,getRandomValues:Gn.P,signHmacSha:jn.n,signRsassaPkcs1:Xn.f,unsafeComputeMd5Hash:Hn.H,verifyHmacSha:Vn.o,verifyRsassaPkcs1:Kn.e}))),_n.G.configure((0,Jt.z)(new Cn.N6({appAccessKey:w.appAccess,appSecretKey:w.appSecret},gs,"https://sso.nitro.dashlane.com/","https://api.dashlane.com",ps)))],storeInfrastructureFactory:ws,jsonFetcher:new Yn.W,cronSource:hs,keyValueStorageInfrastructure:new h.e,managedStorageInfrastructure:new Jn.e(g),defaultDeviceStorageEncryptionCodec:(0,Jt.$)(bn.n),defaultUserStorageEncryptionCodec:(0,Jt.$)(Dt.Y)}),signalCarbonReady:(e,t,n)=>{r.ready({apiEvents:t,leelooEvents:n,leelooEventsCommands:n,coreServices:e})},signalCarbonInitFailed:e=>{r.initFailed(e)}}}(r),{applicationModulesToCarbonApiConnector:u,carbonApiConnector:l,carbonDebugConnector:d,carbonLegacyWebappConnectorForGraphene:m,carbonInfrastructureConnectors:p,carbonToExtensionLegacyConnector:f,carbonLegacyWebappConnector:E,carbonLegacyMaverickConnector:v}=e;try{a(await _({apiConnector:l,debugConnector:d,infrastructureConnectors:p,legacyExtensionConnector:f,legacyWebappConnector:E,legacyMaverickConnector:v,publicPath:"./",storageLayer:t,sessionStorage:o,app:s}),u,m)}catch(e){c(e)}return s}!function(){const e=new Ls.P("graphene-background-port"),r=new Rs.L(e,g);try{g.debug("Starting background initialization"),r.start(),function(){try{addEventListener("install",(()=>{g.debug("Extension ServiceWorker installing")})),addEventListener("activate",(()=>{g.debug("Extension ServiceWorker activated")})),chrome.runtime.onStartup?.addListener((()=>{g.debug("Browser profile startup")})),chrome.runtime.onSuspend?.addListener((()=>{g.debug("Extension event page suspend event")})),chrome.runtime.onSuspendCanceled?.addListener((()=>{g.debug("Extension event page suspend cancelled")})),chrome.runtime.onUpdateAvailable?.addListener((()=>{g.debug("Extension update available")})),chrome.runtime.onRestartRequired?.addListener((()=>{g.debug("Browser update available")})),chrome.runtime.onBrowserUpdateAvailable?.addListener((()=>{g.debug("Browser update available")})),chrome.runtime.onRestartRequired?.addListener((e=>{g.debug("Restart required by browser",{reason:e})})),chrome.extension?.isIncognitoContext&&g.debug("Is in incognito context"),chrome.idle?.onStateChanged?.addListener((e=>{g.debug("Idle state changed",{state:e})})),chrome.runtime.onPerformanceWarning?.addListener((e=>{const{category:r,severity:t,tabId:n,description:o}=e;g.debug("Performance warning emitted for the extension",{category:r,severity:t,tabId:n,description:o})})),chrome.runtime.onInstalled?.addListener((e=>{const{reason:r}=e;if("install"===r)g.debug("Extension got installed");else if("update"===r){const{previousVersion:r}=e;g.debug("Extension got updated",{previousVersion:null!=r?r:""})}else if("chrome_update"===r)g.debug("Chrome got updated");else if("browser_update"===r)g.debug("Browser got updated");else if("shared_module_update"===r){const{id:r}=e;g.debug("A shared module got updated",{sharedModuleId:null!=r?r:""})}e.temporary&&g.debug("Extension is installed temporarily")}))}catch(e){g.error("Failed setting up extension lifecycle event logs",{error:e instanceof Error?e.message:String(e)})}}();const i=ne();g.debug("Starting Carbon & Application Modules");const a=xs(i,e).then((e=>e.createClient())).then((e=>(r.ready(),e))).catch((e=>{throw r.failure(e),g.error("Promise appClientPromise rejected",{error:e}),e}));g.info("Running initialization tasks ...");const c=ue({appClient:a,connectors:i});g.info("Running redirection initialization tasks ...");(0,o.G)()?(s=i.extensionToCarbonApiConnector,er([]),s.livePhishingURLList.on((e=>{g.info("'Execute on carbon event antiPhishing change from carbon endpoint: livePhishingURLList'"),er(Array.from(e))}))):(dr(),pr(i.extensionToCarbonApiConnector)),n=()=>{g.info("Initializing CarbonDebugConnector Debug Logger ..."),function(e,r){ys.forEach((t=>{e[t].on((e=>{if(!function(e){return["error","info","log","warning"].some((r=>r===e))}(t))throw new Error("Invalid debug connector event");const n={timestamp:new Date(e.date).getTime(),optionalParams:e.optionalParams};switch(t){case"error":r.error(e.message,n);break;case"info":r.info(e.message,n);break;case"log":r.debug(e.message,n);break;case"warning":r.warn(e.message,n)}}))}))}(i.carbonDebugConnector,ds),g.info("Initilializing argon2 ..."),("serviceWorker"in self?he:me)(),g.info('Running "onExtensionStart" init tasks with the app client promise ...'),c.withAppClientPromise([{name:"reloadOnLogout",fn:xe},{name:"initAutofillEngine",fn:br}]),g.info('Running "onExtensionStart" init tasks with the app client ready ...'),c.withAppClientReady([{name:"initOnboarding",fn:fe},{name:"surveyOnUninstall",fn:be},{name:"initToolbarIcon",fn:Be},{name:"initToolbarIconBadge",fn:De},{name:"initTiresias",fn:Ut}])},n(),t=()=>{g.info('Running "onExtensionFirstInstall" init tasks with the app client ready ...'),c.withAppClientReady([{name:"logWebAppFirstLaunch",fn:Me},{name:"logDeviceProtected",fn:Ns},{name:"openWebAppSignUp",fn:Se}])},se((e=>{"install"===e.reason&&t(e)})),se((()=>{g.info("Disabling browser native autofill .."),(0,Ss.D)()})),function(e){se((r=>{"update"===r.reason&&e(r)}))}((()=>{g.info('Running "onExtensionUpdate" init tasks with the app client ready ...'),c.withAppClientReady([{name:"logDeviceProtected",fn:Ns},{name:"injectScriptOnExistingTabs",fn:Cs}])})),chrome.runtime.onStartup.addListener((()=>{g.info("chrome.runtime.onStartup event")}));if("serviceWorker"in self&&self instanceof ServiceWorkerGlobalScope&&!0){g.info("Attaching Chrome MV3 Service Worker event handlers ...");const e=self.skipWaiting,r=self.clients;self.oninstall=()=>{g.info("self.oninstall event"),e().then((()=>{g.info("Promise skipWaiting() resolved")})).catch((e=>{throw g.error("Promise skipWaiting() rejected",{error:e}),e}))},self.addEventListener("activate",(e=>{g.info("'activate' event triggered"),e.waitUntil(new Promise((e=>{g.info('ExtendableEvent.waitUntil() pending on "activate" event'),r.claim().then((()=>{g.info("Promise clients.claim() resolved")})).catch((e=>{throw g.error("Promise clients.claim() rejected",{error:e instanceof Error?e.message:String(e)}),e})).then(e)})))}))}g.info("Background initialization initiated.")}catch(e){throw r.failure(e),g.error("Error during the initialization of the background",{error:e}),e}var t,n,s}()},92386:(e,r,t)=>{t.r(r),t.d(r,{getBrowserCountry:()=>c,getBrowserLanguage:()=>a,getBrowserName:()=>s,getBrowserVersion:()=>i,isChrome:()=>u,isChromiumEdge:()=>g,isEdge:()=>d,isFirefox:()=>l,isInternetExplorer:()=>p,isOpera:()=>h,isSafari:()=>m});var n=t(30315),o=t(83711);function s(){return(0,o.r)().browser.name??""}function i(){return(0,o.r)().browser.version??""}function a(){const e=(0,n.getNavigator)();return e?.language??""}function c(){const e=(0,n.getNavigator)(),r=e?.language??"";let t="";return r.length>=5&&(t=r.substr(3,2)),t}function u(){return"Chrome"===s()}function l(){return"Firefox"===s()}function d(){return"Edge"===s()}function m(){return"Safari"===s()}function h(){return"Opera"===s()}function g(){const e=i()??"";return d()&&parseInt(e.split(".")[0],10)>=76}function p(){const e=s();return"Internet Explorer"===e??"IE"===e}},43902:(e,r,t)=>{t.r(r),t.d(r,{getDefaultDeviceName:()=>i,getDeviceType:()=>a,isDeviceConsole:()=>u,isDeviceEmbedded:()=>h,isDeviceMobile:()=>c,isDeviceSmartTV:()=>d,isDeviceTablet:()=>l,isDeviceWearable:()=>m});var n=t(92386),o=t(10592),s=t(83711);function i(){return`${(0,n.getBrowserName)()} - ${(0,o.getOSName)()}`}const a=()=>(0,s.r)().device.type,c=()=>"mobile"===a(),u=()=>"console"===a(),l=()=>"tablet"===a(),d=()=>"smarttv"===a(),m=()=>"wearable"===a(),h=()=>"embedded"===a()},93149:(e,r,t)=>{function n(){return"object"==typeof window}function o(){return"object"==typeof self&&"function"==typeof importScripts}t.r(r),t.d(r,{isBrowserEnvironment:()=>n,isWorkerEnvironment:()=>o})},30315:(e,r,t)=>{t.r(r),t.d(r,{getNavigator:()=>o});var n=t(93149);function o(){return(0,n.isBrowserEnvironment)()?window.navigator:(0,n.isWorkerEnvironment)()?self.navigator:void 0}},11515:(e,r,t)=>{t.r(r),t.d(r,{getUserAgent:()=>o});var n=t(30315);function o(){const e=(0,n.getNavigator)();return e?.userAgent}},12206:(e,r,t)=>{t.r(r),t.d(r,{browser:()=>a,cookie:()=>n,device:()=>d,env:()=>m,iframe:()=>o,navigator:()=>g,os:()=>p,storage:()=>s,url:()=>i,userAgent:()=>N});var n={};t.r(n),t.d(n,{desktopAnonymousComputerId:()=>u,websiteTrackingId:()=>l});var o={};t.r(o),t.d(o,{isInsideIframe:()=>h});var s={};t.r(s),t.d(s,{makeBrowserStorage:()=>R});var i={};t.r(i),t.d(i,{getAuthorityForUrl:()=>M,getDomainForUrl:()=>k});var a=t(92386),c=t(75077);function u(){return c.Q(document.cookie).anonid}function l(){try{const e=c.Q(document.cookie);return JSON.parse(e.userFunnelCookie).trackingId}catch(e){return null}}var d=t(43902),m=t(93149);function h(){return window.location!==window.parent.location}var g=t(30315),p=t(10592);const f=1,w="dashlane",E="user-data";function v(){return new Promise(((e,r)=>{const t=(0,m.isBrowserEnvironment)()?window.indexedDB:(0,m.isWorkerEnvironment)()?self.indexedDB:null;if(!t)return r(new Error("indexedDB is not supported in this environment"));const n=t.open(w,f);n.onerror=function(){r(n.error)},n.onupgradeneeded=()=>{n.result.objectStoreNames.contains(E)||n.result.createObjectStore(E)},n.onsuccess=function(){n.onsuccess=null,e(n.result)}}))}async function b(e="readwrite"){return(await v()).transaction([E],e).objectStore(E)}async function _(e){const r=await b("readonly");return new Promise((t=>{const n=r.get(e);n.onsuccess=()=>{n.onsuccess=null,t(n.result)}}))}const C={isSupported:async function(){if(!(0,m.isBrowserEnvironment)()&&!(0,m.isWorkerEnvironment)())return!1;if((0,a.isInternetExplorer)())return!1;if((0,m.isBrowserEnvironment)()&&!window.indexedDB)return!1;if((0,m.isWorkerEnvironment)()&&!self.indexedDB)return!1;try{return await v(),!0}catch(e){return!1}},readItem:_,writeItem:async function(e,r){const t=await b("readwrite");return new Promise((n=>{const o=t.put(r,e);o.onsuccess=()=>{o.onsuccess=null,n()}}))},removeItem:async function(e){const r=await b("readwrite");return new Promise((t=>{const n=r.delete(e);n.onsuccess=()=>{n.onsuccess=null,t()}}))},itemExists:async function(e){const r=await _(e);return null!=r}},y={isSupported:()=>Promise.resolve(void 0!==typeof window&&!!window.localStorage),readItem:e=>Promise.resolve(window.localStorage.getItem(e)),writeItem:(e,r)=>Promise.resolve(window.localStorage.setItem(e,r)),removeItem:e=>Promise.resolve(window.localStorage.removeItem(e)),itemExists:e=>{const r=window.localStorage.getItem(e);return Promise.resolve(null!=r)}},S={},L={isSupported:()=>Promise.resolve(!0),readItem:e=>{const r=e in S;return Promise.resolve(r?S[e]:null)},writeItem:(e,r)=>(S[e]=r,Promise.resolve()),removeItem:e=>(delete S[e],Promise.resolve()),itemExists:e=>Promise.resolve(e in S)},R=async()=>{try{if(await C.isSupported())return C;if(await y.isSupported())return y}catch(e){}return L},k=e=>{if(!e)return null;const r=e.trim(),t=["http://","https://","ftp://","ftps://","file://","afp://","smb://"].filter((e=>r.startsWith(e)))[0],n=t?r.substr(t.length):r,o=n.indexOf("/"),s=o>-1?n.slice(0,o):n,i=s.split(""),a=i.filter((e=>"."===e)),c=i.filter((e=>":"===e)),u=i.filter((e=>!Number.isNaN(Number(e))));if(3===a.length&&(u.length===s.length-3||u.length===s.length-4&&1===c.length))return s;if(!a.length||1===a.length)return s;const l=s.lastIndexOf("."),d=s.slice(0,l),m=s.substr(l),h=d.lastIndexOf("."),g=d.substr(h+1),p=d.slice(0,h);if(!["co","com","fr","ac","gov","org","edu","net"].includes(g)&&!["judiciary.uk","ltd.uk","me.uk","mod.uk","nhs.uk","nic.uk","parliament.uk","plc.uk","sch.uk","bl.uk","jet.uk","british-library.uk","nls.uk","qc.ca"].includes(g+m))return g+m;const f=p.lastIndexOf(".");return f>-1?p.substr(f+1)+"."+g+m:s},M=e=>{const r=(e??"").trim();if(!r)return null;const t=["afp://","file://","ftp://","ftps://","http://","https://","smb://"].find((e=>r.startsWith(e))),n=t?r.substr(t.length):r,o=n.indexOf("/");return o>-1?n.slice(0,o):n};var N=t(11515)},10592:(e,r,t)=>{t.r(r),t.d(r,{getOSName:()=>o,getOSVersion:()=>s,isAndroid:()=>i,isIOS:()=>a,isLinux:()=>l,isMacOS:()=>u,isWindows:()=>c});var n=t(83711);function o(){return"Chromium OS"===(0,n.r)().os.name?"Chrome OS":(0,n.r)().os.name}function s(){const{version:e=""}=(0,n.r)().os;return"Mac OS"===o()?`OS_X_${e.replace(/\./g,"_")}`:e}const i=()=>"Android"===o(),a=()=>"iOS"===o(),c=()=>"Windows"===o(),u=()=>"Mac OS"===o(),l=()=>"Linux"===o()},83711:(e,r,t)=>{t.d(r,{r:()=>s});var n=t(8473),o=t(11515);function s(){return new n((0,o.getUserAgent)(),{browser:[[/(AVG|Avast)\/([\w.]+)/i],[[n.BROWSER.NAME,"Avast"],n.BROWSER.VERSION],[/(edge|edgios|edga|edg)\/((\d+)?[\w.]+)/i],[[n.BROWSER.NAME,"Edge"],n.BROWSER.VERSION]]}).getResult()}},99325:(e,r,t)=>{t.d(r,{M:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{(0,n.Ez)("action.openPopup")?chrome.action.openPopup(e,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`action/openPopup: ${e}`);t(r)}else r()})):t(new Error("No openPopup support"))}))}},24028:(e,r,t)=>{t.d(r,{_:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{if(!(0,n.Ez)("action.setBadgeBackgroundColor")&&!(0,n.Ez)("browserAction.setBadgeBackgroundColor"))return void t(new Error("No setBadgeBackgroundColor support"));(chrome.action?.setBadgeBackgroundColor??chrome.browserAction.setBadgeBackgroundColor)(e,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`action/setBadgeBackgroundColor: ${e}`);t(r)}else r()}))}))}},14501:(e,r,t)=>{t.d(r,{d:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{if(!(0,n.Ez)("action.setBadgeText")&&!(0,n.Ez)("browserAction.setBadgeText"))return void t(new Error("No setBadgeText support"));(chrome.action?.setBadgeText??chrome.browserAction.setBadgeText)(e,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`action/setBadgeText: ${e}`);t(r)}else r()}))}))}},38649:(e,r,t)=>{t.d(r,{B:()=>o});var n=t(41339);function o(e,r){return new Promise(((t,o)=>{if(!(0,n.Ez)("action.setIcon")&&!(0,n.Ez)("browserAction.setIcon"))return void o(new Error("No action.setIcon support"));(chrome.action?.setIcon??chrome.browserAction.setIcon)({path:e,tabId:r},(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`action/setIcon: ${e}`);o(r)}else t()}))}))}},29439:(e,r,t)=>{t.d(r,{U:()=>o});var n=t(41339);const o=async(e,r)=>{if(!(0,n.qX)(["alarms"]))throw new Error("No alarms.create support, permission is missing");if(!(0,n.Ez)("alarms.create"))throw new Error("No alarms.create support");await chrome.alarms.create(e,r)}},23423:(e,r,t)=>{t.d(r,{U:()=>o});var n=t(41339);const o=e=>{if(!(0,n.qX)(["alarms"]))throw new Error("No alarms.get support, permission is missing");if(!(0,n.Ez)("alarms.get"))throw new Error("No alarms.get support");return new Promise(((r,t)=>{chrome.alarms.get(e,(e=>{const n=chrome.runtime.lastError?.message;n&&t(new Error("alarms/get error:"+n)),r(e)}))}))}},63090:(e,r,t)=>{t.d(r,{G:()=>o});var n=t(41339);function o(){return(0,n.Ez)("alarms.clear")&&(0,n.qX)(["alarms"])}},31261:(e,r,t)=>{t.d(r,{i:()=>o});var n=t(41339);const o={addListener:e=>{if(!(0,n.qX)(["alarms"]))throw new Error("No alarms.onAlarm.addListener support, permission is missing");if(!(0,n.Ez)("alarms.onAlarm.addListener"))throw new Error("No alarms.onAlarm.addListener support");chrome.alarms.onAlarm.addListener(e);const r=chrome.runtime.lastError?.message;if(r)throw new Error("alarms/onAlarm error:"+r)},removeListener:e=>{if(!(0,n.qX)(["alarms"]))throw new Error("No alarms.onAlarm.removeListener support, permission is missing");if(!(0,n.Ez)("alarms.onAlarm.removeListener"))throw new Error("No alarms.onAlarm.removeListener support");chrome.alarms.onAlarm.removeListener(e);const r=chrome.runtime.lastError?.message;if(r)throw new Error("alarms/onAlarm error:"+r)}}},33091:(e,r,t)=>{t.d(r,{g:()=>o});var n=t(41339);function o(){return new Promise(((e,r)=>{(0,n.Ez)("commands.getAll")?chrome.commands.getAll((t=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`commands/getAll: ${e}`);r(t)}else e(t)})):r(new Error("No commands.getAll support"))}))}},15349:(e,r,t)=>{t.d(r,{U:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{(0,n.qX)(["contextMenus"])?(0,n.Ez)("contextMenus.create")?chrome.contextMenus.create(e,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`context-menus/create: ${e}`);t(r)}else r(e.id??"")})):t(new Error("No contextMenus.create support")):t(new Error("No contextMenus.create support, permission is missing"))}))}},13135:(e,r,t)=>{t.d(r,{a:()=>o});var n=t(41339);const o={addListener:function(e){if(!(0,n.qX)(["contextMenus"]))throw new Error("No contextMenus.onClicked.addListener support, permission is missing");if(!(0,n.Ez)("contextMenus.onClicked.addListener"))throw new Error("No contextMenus.onClicked.addListener support");const r=(r,t)=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`context-menus/onClicked: ${e}`)}return e(r,t)};return chrome.contextMenus.onClicked.addListener(r),r},removeListener:function(e){if(!(0,n.qX)(["contextMenus"]))throw new Error("No contextMenus.onClicked.removeListener support, permission is missing");if(!(0,n.Ez)("contextMenus.onClicked.removeListener"))throw new Error("No contextMenus.onClicked.removeListener support");chrome.contextMenus.onClicked.removeListener(e)}}},92602:(e,r,t)=>{t.d(r,{x:()=>o});var n=t(41339);function o(){return new Promise(((e,r)=>{(0,n.qX)(["contextMenus"])?(0,n.Ez)("contextMenus.removeAll")?chrome.contextMenus.removeAll((()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`context-menus/removeAll: ${e}`);r(t)}else e()})):r(new Error("No contextMenus.removeAll support")):r(new Error("No contextMenus.removeAll support, permission is missing"))}))}},37724:(e,r,t)=>{t.d(r,{g:()=>o});var n=t(41339);function o(e={}){return new Promise(((r,t)=>{(0,n.qX)(["cookies"])?(0,n.Ez)("cookies.getAll")?chrome.cookies.getAll(e,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`cookies/getAll: ${e}`);t(r)}else r(e)})):t(new Error("No cookies.getAll support")):t(new Error("No cookies.getAll support, permission is missing"))}))}},33017:(e,r,t)=>{t.d(r,{O:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{(0,n.qX)(["cookies"])?(0,n.Ez)("cookies.remove")?chrome.cookies.remove(e,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`cookies/remove: ${e}`);t(r)}else r(e)})):t(new Error("No cookies.remove support")):t(new Error("No cookies.remove support, permission is missing"))}))}},52799:(e,r,t)=>{t.d(r,{t:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{(0,n.qX)(["cookies"])?(0,n.Ez)("cookies.set")?chrome.cookies.set(e,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`cookies/set: ${e}`);t(r)}else r(e)})):t(new Error("No cookies.set support")):t(new Error("No cookies.set support, permission is missing"))}))}},69235:(e,r,t)=>{t.d(r,{z:()=>o});var n=t(41339);function o(){return new Promise(((e,r)=>{(0,n.qX)(["declarativeNetRequest"])?(0,n.Ez)("declarativeNetRequest.getDynamicRules")?chrome.declarativeNetRequest.getDynamicRules((t=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`declarativeNetRequest/getDynamicRules: ${e}`);r(t)}else e(t)})):r(new Error("No declarativeNetRequest.getDynamicRules support")):r(new Error("No declarativeNetRequest.getDynamicRules support, permission is missing"))}))}},2806:(e,r,t)=>{t.d(r,{G:()=>o});var n=t(41339);function o(){return(0,n.Ez)("declarativeNetRequest")&&(0,n.qX)(["declarativeNetRequest"])}},98402:(e,r,t)=>{t.d(r,{O:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{(0,n.qX)(["declarativeNetRequest"])?(0,n.Ez)("declarativeNetRequest.updateDynamicRules")?chrome.declarativeNetRequest.updateDynamicRules(e,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`declarativeNetRequest/updateDynamicRules: ${e}`);t(r)}else r()})):t(new Error("No declarativeNetRequest.updateDynamicRules support")):t(new Error("No declarativeNetRequest.updateDynamicRules support, permission is missing"))}))}},56739:(e,r,t)=>{t.d(r,{L:()=>o});var n=t(41339);function o(e){if(!(0,n.Ez)("downloads.download"))throw new Error("No downloads.download support");return chrome.downloads.download(e)}},41339:(e,r,t)=>{t.d(r,{Ez:()=>i,qA:()=>s,qX:()=>o});var n=t(33156);function o(e){const r=(0,n.W)().permissions??[];return e.every((e=>r.includes(e)))}function s(e){return void 0!==e.split(".").reduce(((e,r)=>e?.[r]),(0,n.W)())}function i(e){if("undefined"==typeof chrome)return!1;const r=e.split(".").reduce(((e,r)=>e?.[r]),chrome);return Boolean(r)}},35267:(e,r,t)=>{t.d(r,{q:()=>o});var n=t(41339);function o(e){if(!(0,n.qX)(["idle"]))throw new Error("No idle.queryState support, permission is missing");if(!(0,n.Ez)("idle.queryState"))throw new Error("No idle.queryState support");return new Promise((r=>{chrome.idle.queryState(e,(e=>{r(e)}))}))}},19328:(e,r,t)=>{t.r(r),t.d(r,{PrivacyServiceErrorReason:()=>O.$,WebRequestOnAuthRequiredOptions:()=>_e.C,WebRequestOnBeforeRequestOptions:()=>ye.X,WebRequestOnCompletedOptions:()=>Se.n,actionGetUserSettings:()=>a,actionOpenPopup:()=>c.M,actionSetBadgeBackgroundColor:()=>n._,actionSetBadgeText:()=>o.d,actionSetIcon:()=>s.B,alarmsClear:()=>d,alarmsCreate:()=>l.U,alarmsGet:()=>u.U,alarmsIsSupported:()=>m.G,alarmsOnAlarm:()=>h.i,commandsGetAll:()=>g.g,contains:()=>I.r,contextMenusCreate:()=>p.U,contextMenusOnClicked:()=>f.a,contextMenusRemoveAll:()=>w.x,cookiesGetAll:()=>E.g,cookiesRemove:()=>v.O,cookiesSet:()=>b.t,declarativeNetRequestGetDynamicRules:()=>_.z,declarativeNetRequestIsSupported:()=>C.G,declarativeNetRequestUpdateDynamicRules:()=>y.O,devtoolsPanelCreate:()=>L,download:()=>R.L,getDevtoolsInspectedWindowTabId:()=>S,idleOnStateChanged:()=>M,idleQueryState:()=>N.q,idleSetDetectionInterval:()=>k,isPrivacyServiceRuntimeError:()=>q.I,isPrivacyServiceUnsupportedError:()=>q.b,managedStorageGet:()=>ee.U,managementUninstallSelf:()=>x,privacyServicesGet:()=>A.U,privacyServicesSet:()=>U.t,request:()=>P.W,runtimeConnect:()=>T.$,runtimeGetId:()=>X.z,runtimeGetManifest:()=>$.W,runtimeGetURL:()=>B.A,runtimeOnConnect:()=>z.b,runtimeOnInstalled:()=>F.Y,runtimeOnMessage:()=>D.p,runtimeReload:()=>W.H,runtimeSendMessage:()=>G.b,runtimeSetUninstallURL:()=>j.S,scriptingExecuteScript:()=>V.k,scriptingInsertCSS:()=>H.Q,storageLocalGet:()=>Y.U,storageLocalGetBytesInUse:()=>J.y,storageLocalIsGetBytesInUseSupported:()=>J.G,storageLocalRemove:()=>Q.O,storageLocalSet:()=>Z.t,storageOnChanged:()=>K,storageSessionClear:()=>re,storageSessionGet:()=>te.U,storageSessionGetBytesInUse:()=>ne,storageSessionIsSupported:()=>oe.G,storageSessionOnChanged:()=>se.r,storageSessionRemove:()=>ie.O,storageSessionSet:()=>ae.t,tabsCreate:()=>ce.U,tabsDetectLanguage:()=>ue.e,tabsGetCurrent:()=>le,tabsGetTabIdNone:()=>ve,tabsOnCreated:()=>de.g,tabsOnHighLighted:()=>me.r,tabsOnRemoved:()=>he.$,tabsOnUpdated:()=>ge.i,tabsQuery:()=>pe.I,tabsRemove:()=>fe.O,tabsSendMessage:()=>we.b,tabsUpdate:()=>Ee.V,webRequestIsSupported:()=>be,webRequestOnAuthRequired:()=>_e.E,webRequestOnBeforeRequest:()=>Ce.a,webRequestOnCompleted:()=>Se.x,webRequestOnErrorOccurred:()=>Le.z,windowsGetCurrent:()=>ke.T,windowsUpdate:()=>Re.V});var n=t(24028),o=t(14501),s=t(38649),i=t(41339);function a(){return new Promise(((e,r)=>{if((0,i.Ez)("action.getUserSettings"))return e(chrome.action.getUserSettings());r(new Error("No action.getUserSettings support"))}))}var c=t(99325),u=t(23423),l=t(29439);const d=e=>{if(!(0,i.qX)(["alarms"]))throw new Error("No alarms.clear support, permission is missing");if(!(0,i.Ez)("alarms.clear"))throw new Error("No alarms.clear support");return new Promise(((r,t)=>{chrome.alarms.clear(e,(e=>{const n=chrome.runtime.lastError?.message;n&&t(new Error("alarms/clear error:"+n)),r(e)}))}))};var m=t(63090),h=t(31261),g=t(33091),p=t(15349),f=t(13135),w=t(92602),E=t(37724),v=t(33017),b=t(52799),_=t(69235),C=t(2806),y=t(98402);function S(){if(!(0,i.qA)("devtools_page"))throw new Error("No devtools.inspectedWindow.getTabId support, devtools_page key needs to be defined in the manifest file");return chrome.devtools.inspectedWindow.tabId}function L(e,r,t){return new Promise(((n,o)=>{(0,i.Ez)("devtools.panels.create")?chrome.devtools.panels.create(e,r,t,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`devtols/panels/create: ${e}`);o(r)}else n()})):o(new Error("No devtools.panels.create support"))}))}var R=t(56739);function k(e){if(!(0,i.qX)(["idle"]))throw new Error("No idle.setDetectionInterval support, permission is missing");if(!(0,i.Ez)("idle.setDetectionInterval"))throw new Error("No idle.setDetectionInterval support");chrome.idle.setDetectionInterval(e)}const M={addListener:function(e){if(!(0,i.qX)(["idle"]))throw new Error("No idle.onStateChanged.addListener support, permission is missing");if(!(0,i.Ez)("idle.onStateChanged.addListener"))throw new Error("No idle.onStateChanged.addListener support");const r=r=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`idle/onStateChanged: ${e}`)}return e(r)};return chrome.idle.onStateChanged.addListener(r),r},removeListener:function(e){if(!(0,i.qX)(["idle"]))throw new Error("No idle.onStateChanged.removeListener support, permission is missing");if(!(0,i.Ez)("idle.onStateChanged.removeListener"))throw new Error("No idle.onStateChanged.removeListener support");chrome.idle.onStateChanged.removeListener(e)}};var N=t(35267);function x(e){return(0,i.Ez)("management.uninstallSelf")?chrome.management.uninstallSelf(e):Promise.reject(new Error("No management.uninstallSelf support"))}var I=t(45429),P=t(28034),A=t(71474),U=t(856),O=t(87692),q=t(51186),T=t(28136),B=t(96754),$=t(33156),z=t(19523),F=t(57205),D=t(99743),W=t(74159),G=t(32412),j=t(59922),X=t(97334),H=t(96158),V=t(6045);const K={addListener:function(e){if(!(0,i.qX)(["storage"]))throw new Error("No storage.onChanged.addListener support, permission is missing");if(!(0,i.Ez)("storage.onChanged.addListener"))throw new Error("No storage.onChanged.addListener support");const r=(r,t)=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`storage/onChanged: ${e}`)}return e(r,t)};return chrome.storage.onChanged.addListener(r),r}};var Y=t(6523),J=t(21352),Q=t(52913),Z=t(6721),ee=t(45368);function re(){return new Promise(((e,r)=>{(0,i.qX)(["storage"])?(0,i.Ez)("storage.session.clear")?chrome.storage.session.clear((()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`storage/session/clear: ${e}`);r(t)}else e()})):r(new Error("No storage.session.clear support")):r(new Error("No storage.session.clear support, permission is missing"))}))}var te=t(27880);function ne(e){return new Promise(((r,t)=>{(0,i.qX)(["storage"])?(0,i.Ez)("storage.session.getBytesInUse")?chrome.storage.session.getBytesInUse(e||null,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`storage/session/getBytesInUse: ${e}`);t(r)}else r(e)})):t(new Error("No storage.session.getBytesInUse support")):t(new Error("No storage.session.getBytesInUse support, permission is missing"))}))}var oe=t(37730),se=t(27420),ie=t(22828),ae=t(4710),ce=t(87163),ue=t(72720);function le(){return new Promise(((e,r)=>{(0,i.Ez)("tabs.getCurrent")?chrome.tabs.getCurrent((t=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`tabs/get-current: ${e}`);r(t)}else e(t)})):r(new Error("No tabs.getCurrent support"))}))}var de=t(89984),me=t(51314),he=t(70101),ge=t(27938),pe=t(71751),fe=t(42700),we=t(23647),Ee=t(21597);function ve(){return chrome.tabs.TAB_ID_NONE}function be(){return(0,i.Ez)("webRequest")&&(0,i.qX)(["webRequest"])}var _e=t(98057),Ce=t(61856),ye=t(97379),Se=t(88456),Le=t(23454),Re=t(40841),ke=t(96344)},45429:(e,r,t)=>{t.d(r,{r:()=>o});var n=t(41339);function o(e,r){if(!(0,n.Ez)("permissions.contains"))throw new Error("No permissions.contains support");return r?chrome.permissions.contains(e,r):chrome.permissions.contains(e)}},28034:(e,r,t)=>{t.d(r,{W:()=>o});var n=t(41339);function o(e,r){if(!(0,n.Ez)("permissions.request"))throw new Error("No permissions.request support");return r?chrome.permissions.request(e,r):chrome.permissions.request(e)}},51186:(e,r,t)=>{t.d(r,{I:()=>o,b:()=>s});var n=t(87692);function o(e){if("object"!=typeof e||!e)return!1;return!!("reason"in e)&&e.reason===n.$.RuntimeError}function s(e){if("object"!=typeof e||!e)return!1;return!!("reason"in e)&&e.reason===n.$.SettingNotSupported}},71474:(e,r,t)=>{t.d(r,{U:()=>i});var n=t(41339),o=t(87692);const s={reason:o.$.SettingNotSupported};function i(e){return new Promise(((r,t)=>{(0,n.qX)(["privacy"])&&(0,n.Ez)(`privacy.services.${e}.get`)?chrome.privacy.services[e].get({},(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r={reason:o.$.RuntimeError,runtimeError:new Error(e)};t(r)}else r(e)})):t(s)}))}},87692:(e,r,t)=>{t.d(r,{$:()=>n});var n=function(e){return e.RuntimeError="runtimeError",e.SettingNotSupported="settingNotSupported",e}({})},856:(e,r,t)=>{t.d(r,{t:()=>i});var n=t(41339),o=t(87692);const s={reason:o.$.SettingNotSupported};function i(e,r){return new Promise(((t,i)=>{(0,n.qX)(["privacy"])&&(0,n.Ez)(`privacy.services.${e}.set`)?chrome.privacy.services[e].set({value:r},(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r={reason:o.$.RuntimeError,runtimeError:new Error(e)};i(r)}else t()})):i(s)}))}},28136:(e,r,t)=>{t.d(r,{$:()=>o});var n=t(41339);function o(e){if(!(0,n.Ez)("runtime.connect"))throw new Error("No runtime.connect support");return chrome.runtime.connect(e)}},97334:(e,r,t)=>{function n(){return chrome.runtime.id}t.d(r,{z:()=>n})},33156:(e,r,t)=>{t.d(r,{W:()=>o});var n=t(41339);function o(){if(!(0,n.Ez)("runtime.getManifest"))throw new Error("No runtime.getManifest support");return chrome.runtime.getManifest()}},96754:(e,r,t)=>{t.d(r,{A:()=>o});var n=t(41339);function o(e){if(!(0,n.Ez)("runtime.getURL"))throw new Error("No runtime.getURL support");return chrome.runtime.getURL(e)}},19523:(e,r,t)=>{t.d(r,{b:()=>s});var n=t(41339);const o=new Map;const s={addListener:function(e){if(!(0,n.Ez)("runtime.onConnect.addListener"))throw new Error("No runtime.onConnect.addListener support");const r=r=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`runtime/onConnect: ${e}`)}return e(r)};chrome.runtime.onConnect.addListener(r),o.set(e,r)},removeListener:function(e){if(!(0,n.Ez)("runtime.onConnect.removeListener"))throw new Error("No runtime.onConnect.removeListener support");const r=o.get(e);if(!r)throw new Error("Unable to find previously added listener");chrome.runtime.onConnect.removeListener(r),o.delete(e)}}},57205:(e,r,t)=>{t.d(r,{Y:()=>o});var n=t(41339);const o={addListener:function(e){if(!(0,n.Ez)("runtime.onInstalled.addListener"))throw new Error("No runtime.onInstalled.addListener support");chrome.runtime.onInstalled.addListener((r=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`runtime/onInstalled: ${e}`)}return e(r)}))}}},99743:(e,r,t)=>{t.d(r,{p:()=>o});var n=t(41339);const o={addListener:function(e){const r=(r,t,n)=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`runtime/onMessage: ${e}`)}return e(r,t,n)};if(!(0,n.Ez)("runtime.onMessage.addListener"))throw new Error("No runtime.onMessage.addListener support");return chrome.runtime.onMessage.addListener(r),r},removeListener:function(e){chrome.runtime.onMessage.removeListener(e)}}},74159:(e,r,t)=>{t.d(r,{H:()=>o});var n=t(41339);function o(){if(!(0,n.Ez)("runtime.reload"))throw new Error("No runtime.reload support");chrome.runtime.reload()}},32412:(e,r,t)=>{t.d(r,{b:()=>o});var n=t(41339);function o(e,r){if(!(0,n.Ez)("runtime.sendMessage"))throw new Error("No runtime.sendMessage support");chrome.runtime.sendMessage(e,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`runtime/sendMessage: ${e}`)}r&&r(e)}))}},59922:(e,r,t)=>{t.d(r,{S:()=>o});var n=t(41339);function o(e){if(!(0,n.Ez)("runtime.setUninstallURL"))throw new Error("No runtime.setUninstallURL support");chrome.runtime.setUninstallURL(e)}},6045:(e,r,t)=>{t.d(r,{k:()=>s});var n=t(41339);const o=(e,r)=>()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`scripting/executeScript: ${e}`);r(t)}else e()};function s(e,r){return(0,n.Ez)("scripting.executeScript")?function(e,r){return new Promise(((t,n)=>{const s=r??o(t,n);chrome.scripting.executeScript(e,s)}))}(e,r):(0,n.Ez)("tabs.executeScript")?function(e,r){return new Promise(((t,n)=>{const s=r??o(t,n),i={allFrames:e.target.allFrames,file:void 0,frameId:e.target.frameIds?.[0],runAt:"document_start"};"func"in e?i.code=e.func.toString():i.file=e.files[0],chrome.tabs.executeScript(e.target.tabId,i,s)}))}(e,r):Promise.reject(new Error("No scripting.executeScript support"))}},96158:(e,r,t)=>{t.d(r,{Q:()=>o});var n=t(41339);function o(e){return(0,n.Ez)("scripting.insertCSS")?function(e){return new Promise(((r,t)=>{chrome.scripting.insertCSS(e,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`scripting/insertCss: ${e}`);t(r)}else r()}))}))}(e):(0,n.Ez)("tabs.insertCSS")?function(e){return new Promise(((r,t)=>{const n={cssOrigin:e.origin?.toLocaleLowerCase(),file:e.files?.[0],runAt:"document_idle"};chrome.tabs.insertCSS(e.target.tabId,n,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`scripting/insertCss: ${e}`);t(r)}else r()}))}))}(e):Promise.reject(new Error("No insertCSS support"))}},21352:(e,r,t)=>{t.d(r,{G:()=>o,y:()=>s});var n=t(41339);function o(){return!!chrome.storage?.local.getBytesInUse}function s(e){return new Promise(((r,t)=>{(0,n.qX)(["storage"])?(0,n.Ez)("storage.local.getBytesInUse")?chrome.storage.local.getBytesInUse(e,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`storage/local/getBytesInUse: ${e}`);t(r)}else r(e)})):t(new Error("No storage.local.getBytesInUse support")):t(new Error("No storage.local.getBytesInUse support, permission is missing"))}))}},6523:(e,r,t)=>{t.d(r,{U:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{(0,n.qX)(["storage"])?(0,n.Ez)("storage.local.get")?chrome.storage.local.get(e,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`storage/local/get: ${e}`);t(r)}else r(e)})):t(new Error("No storage.local.get support")):t(new Error("No storage.local.get support, permission is missing"))}))}},52913:(e,r,t)=>{t.d(r,{O:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{(0,n.qX)(["storage"])?(0,n.Ez)("storage.local.remove")?chrome.storage.local.remove(e,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`storage/local/remove: ${e}`);t(r)}else r()})):t(new Error("No storage.local.remove support")):t(new Error("No storage.local.remove support, permission is missing"))}))}},6721:(e,r,t)=>{t.d(r,{t:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{(0,n.qX)(["storage"])?(0,n.Ez)("storage.local.set")?chrome.storage.local.set(e,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`storage/local/set: ${e}`);t(r)}else r()})):t(new Error("No storage.local.set support")):t(new Error("No storage.local.set support, permission is missing"))}))}},45368:(e,r,t)=>{t.d(r,{U:()=>o});var n=t(41339);function o(e){const r=new Promise(((r,t)=>{(0,n.qX)(["storage"])?(0,n.Ez)("storage.managed.get")?chrome.storage.managed.get(e??null,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`storage/managed/get: ${e}`);t(r)}else r(e)})):t(new Error("No storage.managed.get support")):t(new Error("No storage.managed.get support, permission is missing"))}));return Promise.race([r,new Promise((e=>{setTimeout(e,1e3,void 0)}))])}},27880:(e,r,t)=>{t.d(r,{U:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{(0,n.qX)(["storage"])?(0,n.Ez)("storage.session.get")?chrome.storage.session.get(e,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`storage/session/get: ${e}`);t(r)}r(e)})):t(new Error("No storage.session.get support")):t(new Error("No storage.session.get support, permission is missing"))}))}},37730:(e,r,t)=>{t.d(r,{G:()=>s});var n=t(41339),o=t(33156);function s(){return(0,n.Ez)("storage.session")&&(0,n.qX)(["storage"])&&3===(0,o.W)().manifest_version}},27420:(e,r,t)=>{t.d(r,{r:()=>o});var n=t(41339);const o={addListener:function(e){if(!(0,n.qX)(["storage"]))throw new Error("No storage.session.onChanged.addListener support, permission is missing");if(!(0,n.Ez)("storage.session.onChanged.addListener"))throw new Error("No storage.session.onChanged.addListener support");const r=r=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`storage/session/onChanged: ${e}`)}return e(r)};return chrome.storage.session.onChanged.addListener(r),r},removeListener:function(e){if(!(0,n.qX)(["storage"]))throw new Error("No storage.session.onChanged.removeListener support, permission is missing");if(!(0,n.Ez)("storage.session.onChanged.removeListener"))throw new Error("No storage.session.onChanged.removeListener support");chrome.storage.session.onChanged.removeListener(e)}}},22828:(e,r,t)=>{t.d(r,{O:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{(0,n.qX)(["storage"])?(0,n.Ez)("storage.session.remove")?chrome.storage.session.remove(e,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`storage/session/remove: ${e}`);t(r)}r()})):t(new Error("No storage.session.remove support")):t(new Error("No storage.session.remove support, permission is missing"))}))}},4710:(e,r,t)=>{t.d(r,{t:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{(0,n.qX)(["storage"])?(0,n.Ez)("storage.session.set")?chrome.storage.session.set(e,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`storage/session/set: ${e}`);t(r)}r()})):t(new Error("No storage.session.set support")):t(new Error("No storage.session.set support, permission is missing"))}))}},87163:(e,r,t)=>{t.d(r,{U:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{(0,n.Ez)("tabs.create")?chrome.tabs.create(e,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`tabs/create: ${e}`);t(r)}else r(e)})):t(new Error("No tabs.create support"))}))}},72720:(e,r,t)=>{t.d(r,{e:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{if(!(0,n.Ez)("tabs.detectLanguage"))return void t(new Error("No tabs.detectLanguage support"));const o=e?[e]:[];chrome.tabs.detectLanguage(...o,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`tabs/detectLanguage: ${e}`);t(r)}else r(e)}))}))}},89984:(e,r,t)=>{t.d(r,{g:()=>o});var n=t(41339);const o={addListener:function(e){if(!(0,n.Ez)("tabs.onCreated.addListener"))throw new Error("No tabs.onCreated.addListener support");const r=r=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`tabs/onCreated: ${e}`)}return e(r)};return chrome.tabs.onCreated.addListener(r),r}}},51314:(e,r,t)=>{t.d(r,{r:()=>o});var n=t(41339);const o={addListener:function(e){if(!(0,n.Ez)("tabs.onHighlighted.addListener"))throw new Error("No tabs.onHighlighted.addListener support");const r=r=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`tabs/onHighlighted: ${e}`)}return e(r)};return chrome.tabs.onHighlighted.addListener(r),r}}},70101:(e,r,t)=>{t.d(r,{$:()=>o});var n=t(41339);const o={addListener:function(e){if(!(0,n.Ez)("tabs.onRemoved.addListener"))throw new Error("No tabs.onRemoved.addListener support");const r=(r,t)=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`tabs/onRemoved: ${e}`)}return e(r,t)};return chrome.tabs.onRemoved.addListener(r),r},removeListener:function(e){if(!(0,n.Ez)("tabs.onRemoved.removeListener"))throw new Error("No tabs.onRemoved.removeListener support");chrome.tabs.onRemoved.removeListener(e)}}},27938:(e,r,t)=>{t.d(r,{i:()=>o});var n=t(41339);const o={addListener:function(e){if(!(0,n.Ez)("tabs.onUpdated.addListener"))throw new Error("No tabs.onUpdated.addListener support");const r=(r,t,n)=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`tabs/onUpdated: ${e}`)}return e(r,t,n)};return chrome.tabs.onUpdated.addListener(r),r},removeListener:function(e){if(!(0,n.Ez)("tabs.onUpdated.removeListener"))throw new Error("No tabs.onUpdated.removeListener support");chrome.tabs.onUpdated.removeListener(e)}}},71751:(e,r,t)=>{t.d(r,{I:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{(0,n.qX)(["tabs"])?(0,n.Ez)("tabs.query")?chrome.tabs.query(e,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`tabs/query: ${e}`);t(r)}else r(e)})):t(new Error("No tabs.query support")):t(new Error("No tabs.query support, permission is missing"))}))}},42700:(e,r,t)=>{t.d(r,{O:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{(0,n.Ez)("tabs.remove")?chrome.tabs.remove(e,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`tabs/remove: ${e}`);t(r)}else r()})):t(new Error("No tabs.remove support"))}))}},23647:(e,r,t)=>{t.d(r,{b:()=>o});var n=t(41339);function o(e,r,t,o){if(!(0,n.Ez)("tabs.sendMessage"))throw new Error("No tabs.sendMessage support");const s=e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`tabs/sendMessage: ${e}`);if(!t?.ignoreError)throw r}o&&o(e)};t?chrome.tabs.sendMessage(e,r,t,s):chrome.tabs.sendMessage(e,r,s)}},21597:(e,r,t)=>{t.d(r,{V:()=>o});var n=t(41339);function o(e,r){return new Promise(((t,o)=>{(0,n.Ez)("tabs.update")?chrome.tabs.update(e,r,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`tabs/update: ${e}`);o(r)}else t(e)})):o(new Error("No tabs.update support"))}))}},98057:(e,r,t)=>{t.d(r,{C:()=>s,E:()=>i});var n=t(92386),o=t(41339),s=function(e){return e.Blocking="blocking",e.ResponseHeaders="responseHeaders",e.ExtraHeaders="extraHeaders",e}({});const i={addListener:function(e,r,t){if(!(0,o.qX)(["webRequest","webRequestBlocking"])&&!(0,o.qX)(["webRequest","webRequestAuthProvider"]))throw new Error("No webRequest.onAuthRequired support, permission is missing");if(!(0,o.Ez)("webRequest.onAuthRequired"))throw new Error("No webRequest.onAuthRequired support");const s=n.isFirefox()?t:t?.map((e=>"blocking"===e?"asyncBlocking":e)),i=(r,t)=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`webRequest/onAuthRequired: ${e}`)}if(t)try{e(r).then(t)}catch(e){t({})}return e(r).catch((()=>({})))};return chrome.webRequest.onAuthRequired.addListener(i,r,s),i}}},61856:(e,r,t)=>{t.d(r,{a:()=>s});var n=t(97379),o=t(41339);const s={addListener:function(e,r,t){const s=t?.includes(n.X.Blocking)?["webRequest","webRequestBlocking"]:["webRequest"];if(!(0,o.qX)(s))throw new Error("No webRequest.onBeforeRequest.addListener support, permission is missing");if(!(0,o.Ez)("webRequest.onBeforeRequest.addListener"))throw new Error("No webRequest.onBeforeRequest.addListener support");const i=r=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`webRequest/onBeforeRequest: ${e}`)}return e(r)};return chrome.webRequest.onBeforeRequest.addListener(i,r,t),i},hasListener:function(e){if(!(0,o.qX)(["webRequest","webRequestBlocking"]))throw new Error("No webRequest.onBeforeRequest.hasListener support, permission is missing");if(!(0,o.Ez)("webRequest.onBeforeRequest.hasListener"))throw new Error("No webRequest.onBeforeRequest support");return chrome.webRequest.onBeforeRequest.hasListener(e)},removeListener:function(e){if(!(0,o.qX)(["webRequest"]))throw new Error("No webRequest.onBeforeRequest.removeListener support, permission is missing");if(!(0,o.Ez)("webRequest.onBeforeRequest.removeListener"))throw new Error("No webRequest.onBeforeRequest support");chrome.webRequest.onBeforeRequest.removeListener(e)}}},97379:(e,r,t)=>{t.d(r,{X:()=>n});var n=function(e){return e.Blocking="blocking",e.RequestBody="requestBody",e}({})},88456:(e,r,t)=>{t.d(r,{n:()=>o,x:()=>s});var n=t(41339),o=function(e){return e.ResponseHeaders="responseHeaders",e.ExtraHeaders="extraHeaders",e}({});const s={addListener:function(e,r,t){if(!(0,n.qX)(["webRequest"]))throw new Error("No webRequest.onCompleted support, permission is missing");if(!(0,n.Ez)("webRequest.onCompleted"))throw new Error("No webRequest.onCompleted support");const o=r=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`webRequest/onCompleted: ${e}`)}return e(r)};return chrome.webRequest.onCompleted.addListener(o,r,t),o}}},23454:(e,r,t)=>{t.d(r,{z:()=>o});var n=t(41339);const o={addListener:function(e,r){if(!(0,n.qX)(["webRequest"]))throw new Error("No webRequest.onErrorOccurred support, permission is missing");if(!(0,n.Ez)("webRequest.onErrorOccurred.addListener"))throw new Error("No webRequest.onErrorOccurred support");const t=r=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`webRequest/onErrorOccurred: ${e}`)}return e(r)};return chrome.webRequest.onErrorOccurred.addListener(t,r),t}}},96344:(e,r,t)=>{t.d(r,{T:()=>o});var n=t(41339);function o(e){return new Promise(((r,t)=>{if(!(0,n.Ez)("windows.getCurrent"))return void t(new Error("No windows.getCurrent support"));const o=e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`windows/getCurrent: ${e}`);t(r)}else r(e)};e?chrome.windows.getCurrent(e,o):chrome.windows.getCurrent(o)}))}},40841:(e,r,t)=>{t.d(r,{V:()=>o});var n=t(41339);function o(e,r){return new Promise(((t,o)=>{(0,n.Ez)("windows.update")?chrome.windows.update(e,r,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`windows/update: ${e}`);o(r)}else t(e)})):o(new Error("No windows.update support"))}))}},9497:(e,r,t)=>{t.d(r,{G:()=>o});const n=e=>({actions:(...r)=>{console.error("Missing onError callback"+e,...r)}});function o(e){if(!e.states)return e;const r=[...Object.entries(e.states).map((([e,r])=>({path:e,state:r})))];for(;r.length>0;){const e=r.pop();if(!e)continue;const{path:t,state:o}=e;if(r.push(...Object.entries(o.states??{}).map((([e,r])=>({path:`${t}.${e}`,state:r})))),!("invoke"in o)||"object"!=typeof o.invoke)continue;const s=n(t);"onError"in o.invoke||(o.invoke.onError=s)}return e}},57357:(e,r,t)=>{t.d(r,{V:()=>o});var n=t(29498);function o(e){return r=>{if(r.type.startsWith("error.")){const t="data"in r?r.data:"";if(t instanceof n.x)return;e(new Error(`Error executing state machine service: ${r.type} ${t}`))}}}},18330:(e,r,t)=>{function n(e){return r=>{r.changed||"xstate.init"===r.event.type||e(new Error(`State machine unchanged: Unexpected transition on ${JSON.stringify(r.value)} with event ${r.event.type} `))}}t.d(r,{V:()=>n})},29498:(e,r,t)=>{t.d(r,{x:()=>o});var n=t(97143);class o extends Error{constructor(e="Functional error"){super(e),(0,n._)(this,"description",void 0),this.description=e}}},89194:(e,r,t)=>{t.d(r,{m:()=>n});var n={}},31990:(e,r,t)=>{t.d(r,{m:()=>n});var n={}},2997:(e,r,t)=>{t.d(r,{m:()=>n});var n={}},7083:(e,r,t)=>{t.d(r,{m:()=>n});var n={}},37790:(e,r,t)=>{t.d(r,{m:()=>n});var n={}},4288:(e,r,t)=>{t.d(r,{m:()=>n});var n={}},64971:(e,r,t)=>{t.d(r,{m:()=>n});var n={}},46500:(e,r,t)=>{t.d(r,{m:()=>n});var n={}},38284:(e,r,t)=>{t.d(r,{m:()=>n});var n={}},5377:(e,r,t)=>{t.d(r,{m:()=>n});var n={}},15318:(e,r,t)=>{t.r(r),t.d(r,{ParsedURL:()=>n.Y});var n=t(13134)},13134:(e,r,t)=>{t.d(r,{Y:()=>g});var n=t(97143),o=t(11590),s=t(2509);const i=/^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$/,a=e=>i.test(e),c=e=>e.startsWith("["),u=e=>e.length>1?e.slice(0,-1).join("."):"",l=e=>{const r=function(e){if(!e)return"";const r=function(e){const r=[];let t=e.split(".");for(;1!==t.length;)t=t.slice(1),r.push(t.join("."));return r}(e);if(0===r.length)return"";if(s.x.exception.has(e))return r[0];for(let e=0;e<r.length;e++){const t=r[e];if(s.x.exception.has(t))return r[e+1];if(s.x.basic.has(t))return t;const n=r[e+1];if(s.x.wildcard.has(n))return t}return""}(e),t=((e,r)=>(r&&(e=e.slice(0,-r.length-1)),e))(e,r).split("."),n=(e=>e.length>1&&"www"===e[0]?e.slice(1):e)(t);return{etld:r,mainDomain:n[n.length-1]?n[n.length-1]:"",subdomain:u(t),subdomainWithoutLeadingWww:u(n)}},d=/^[A-Za-z+\-.]+:\/\//,m=e=>d.test(e),h=e=>""!==e;class g{getRootDomain(){const e=this.appendETLD(this.rootDomainName);return this.isUnicode?(0,o.xX)(e):e}getRootDomainName(){return this.isUnicode?(0,o.xX)(this.rootDomainName):this.rootDomainName}getSubdomain(){return this.isUnicode?(0,o.xX)(this.subdomain):this.subdomain}getSubdomainWithoutLeadingWww(){return this.isUnicode?(0,o.xX)(this.subdomainWithoutLeadingWww):this.subdomainWithoutLeadingWww}getHostname(){return this.isUnicode?(0,o.xX)(this.hostname):this.hostname}getHost(){return this.isUnicode?(0,o.xX)(this.host):this.host}getETLD(){return this.isUnicode?(0,o.xX)(this.etld):this.etld}getPIIStrippedURL(){if(this.isUnicode){const e=this.piiStrippedURL.split("://");return`${e[0]}://${(0,o.xX)(e[1])}`}return this.piiStrippedURL}getSearch(){return this.isUnicode?(0,o.xX)(this.search):this.search}getPathname(){return this.pathname}isUrlValid(e={}){const{IPv4Allowed:r=!0,IPv6Allowed:t=!0,mustBeHttpOrHttps:n=!1,requireEtld:o=!1}=e;return!(!r&&a(this.hostname))&&(!(!t&&c(this.hostname))&&(!(n&&!this.hasHTTPProtocol)&&(!(o&&!h(this.etld))&&(this.hasHTTPProtocol||h(this.etld)||this.isUrlIP()))))}hasHTTPLikeProtocol(){return this.hasHTTPProtocol}getUrlWithFallbackHttpsProtocol(){return this.isUnicode?(0,o.xX)(this.userInputWithProtocol):this.userInputWithProtocol}isUrlIP(){return a(this.hostname)||c(this.hostname)}constructor(e){(0,n._)(this,"etld",void 0),(0,n._)(this,"hasHTTPProtocol",void 0),(0,n._)(this,"hostname",void 0),(0,n._)(this,"host",void 0),(0,n._)(this,"isUnicode",void 0),(0,n._)(this,"pathname",void 0),(0,n._)(this,"piiStrippedURL",void 0),(0,n._)(this,"rootDomainName",void 0),(0,n._)(this,"search",void 0),(0,n._)(this,"subdomain",void 0),(0,n._)(this,"subdomainWithoutLeadingWww",void 0),(0,n._)(this,"userInput",void 0),(0,n._)(this,"userInputWithProtocol",void 0),(0,n._)(this,"appendETLD",(e=>this.etld?`${e}.${this.etld}`:e));const r=(e=>{const r={hash:"",host:"",hostname:"",href:"",origin:"",password:"",pathname:"",port:"",protocol:"",search:"",username:"",userInput:"",userInputWithProtocol:""},t=e;if(!(e=e.trim()))return r;m(e)||(e=`https://${e}`);try{const r=new URL((e=>e.endsWith(".")?e.slice(0,-1):e)(e));return{hash:r.hash,host:r.host,hostname:r.hostname,href:r.href,origin:r.origin,password:r.password,pathname:r.pathname,port:r.port,protocol:r.protocol,search:r.search,username:r.username,userInput:t,userInputWithProtocol:e}}catch(e){return r}})(e="string"==typeof e?e:"");this.isUnicode=e!==(0,o.H9)(e),this.hostname=r.hostname,this.host=r.host,this.pathname=r.pathname,this.piiStrippedURL=(e=>{if(!e)return"";if(!["http:","https:"].includes(e.protocol))return e.href;try{return(m(e.userInput)?e.origin:e.origin.split("://")[1])+(()=>{if("/"!==e.pathname)return e.pathname;const r=e.userInput.split(e.host);return r.length>1&&r[1].startsWith("/")?e.pathname:""})()+e.hash}catch(e){return""}})(r),this.search=r.search,this.hasHTTPProtocol=(e=>e.startsWith("http://")||e.startsWith("https://"))(e);const{etld:t,mainDomain:s,subdomain:i,subdomainWithoutLeadingWww:u}=!(d=this.hostname)||(e=>e.startsWith(".")||e.endsWith("."))(d)?{etld:"",mainDomain:"",subdomain:"",subdomainWithoutLeadingWww:""}:"localhost"===d?{etld:"",mainDomain:d,subdomain:"",subdomainWithoutLeadingWww:""}:a(d)?(e=>({etld:"",mainDomain:e,subdomain:"",subdomainWithoutLeadingWww:""}))(d):c(d)?(e=>({etld:"",mainDomain:e.slice(1,-1),subdomain:"",subdomainWithoutLeadingWww:""}))(d):l(d);var d;this.etld=t,this.rootDomainName=s,this.subdomain=i,this.subdomainWithoutLeadingWww=u,this.userInput=r.userInput,this.userInputWithProtocol=r.userInputWithProtocol}}}},o={};function s(e){var r=o[e];if(void 0!==r)return r.exports;var t=o[e]={id:e,loaded:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.loaded=!0,t.exports}s.m=n,s.amdO={},e=[],s.O=(r,t,n,o)=>{if(!t){var i=1/0;for(l=0;l<e.length;l++){for(var[t,n,o]=e[l],a=!0,c=0;c<t.length;c++)(!1&o||i>=o)&&Object.keys(s.O).every((e=>s.O[e](t[c])))?t.splice(c--,1):(a=!1,o<i&&(i=o));if(a){e.splice(l--,1);var u=n();void 0!==u&&(r=u)}}return r}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[t,n,o]},s.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return s.d(r,{a:r}),r},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var o=Object.create(null);s.r(o);var i={};r=r||[null,t({}),t([]),t(t)];for(var a=2&n&&e;"object"==typeof a&&!~r.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((r=>i[r]=()=>e[r]));return i.default=()=>e,s.d(o,i),o},s.d=(e,r)=>{for(var t in r)s.o(r,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},s.e=()=>Promise.resolve(),s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var r=s.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var t=r.getElementsByTagName("script");if(t.length)for(var n=t.length-1;n>-1&&!e;)e=t[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={782:0};s.O.j=r=>0===e[r];var r=(r,t)=>{var n,o,[i,a,c]=t,u=0;if(i.some((r=>0!==e[r]))){for(n in a)s.o(a,n)&&(s.m[n]=a[n]);if(c)var l=c(s)}for(r&&r(t);u<i.length;u++)o=i[u],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(l)},t=self.webpackChunk_dashlane_amphora=self.webpackChunk_dashlane_amphora||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var i=s.O(void 0,[198,932,87,606,721,546,786,280,394,433,431],(()=>s(29268)));i=s.O(i)})();