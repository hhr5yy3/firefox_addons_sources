/*! For license information please see edit_single_dial.js.LICENSE.txt */
(globalThis.webpackChunkgroup_speed_dial=globalThis.webpackChunkgroup_speed_dial||[]).push([[767],{2151:e=>{var t={utf8:{stringToBytes:e=>t.bin.stringToBytes(unescape(encodeURIComponent(e))),bytesToString:e=>decodeURIComponent(escape(t.bin.bytesToString(e)))},bin:{stringToBytes:e=>{for(var t=[],a=0;a<e.length;a++)t.push(255&e.charCodeAt(a));return t},bytesToString:e=>{for(var t=[],a=0;a<e.length;a++)t.push(String.fromCharCode(e[a]));return t.join("")}}};e.exports=t},3939:e=>{var t,a;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={rotl:(e,t)=>e<<t|e>>>32-t,rotr:(e,t)=>e<<32-t|e>>>t,endian:e=>{if(e.constructor==Number)return 16711935&a.rotl(e,8)|4278255360&a.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=a.endian(e[t]);return e},randomBytes:e=>{for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:e=>{for(var t=[],a=0,i=0;a<e.length;a++,i+=8)t[i>>>5]|=e[a]<<24-i%32;return t},wordsToBytes:e=>{for(var t=[],a=0;a<32*e.length;a+=8)t.push(e[a>>>5]>>>24-a%32&255);return t},bytesToHex:e=>{for(var t=[],a=0;a<e.length;a++)t.push((e[a]>>>4).toString(16)),t.push((15&e[a]).toString(16));return t.join("")},hexToBytes:e=>{for(var t=[],a=0;a<e.length;a+=2)t.push(parseInt(e.substr(a,2),16));return t},bytesToBase64:e=>{for(var a=[],i=0;i<e.length;i+=3)for(var l=e[i]<<16|e[i+1]<<8|e[i+2],s=0;s<4;s++)8*i+6*s<=8*e.length?a.push(t.charAt(l>>>6*(3-s)&63)):a.push("=");return a.join("")},base64ToBytes:e=>{e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var a=[],i=0,l=0;i<e.length;l=++i%4)0!=l&&a.push((t.indexOf(e.charAt(i-1))&Math.pow(2,-2*l+8)-1)<<2*l|t.indexOf(e.charAt(i))>>>6-2*l);return a}},e.exports=a},7206:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=e=>null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)},3503:(e,t,a)=>{var i,l,s,r,o;i=a(3939),l=a(2151).utf8,s=a(7206),r=a(2151).bin,(o=(e,t)=>{e.constructor==String?e=t&&"binary"===t.encoding?r.stringToBytes(e):l.stringToBytes(e):s(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var a=i.bytesToWords(e),n=8*e.length,d=1732584193,c=-271733879,u=-1732584194,p=271733878,h=0;h<a.length;h++)a[h]=16711935&(a[h]<<8|a[h]>>>24)|4278255360&(a[h]<<24|a[h]>>>8);a[n>>>5]|=128<<n%32,a[14+(n+64>>>9<<4)]=n;var v=o._ff,m=o._gg,_=o._hh,g=o._ii;for(h=0;h<a.length;h+=16){var b=d,f=c,y=u,C=p;d=v(d,c,u,p,a[h+0],7,-680876936),p=v(p,d,c,u,a[h+1],12,-389564586),u=v(u,p,d,c,a[h+2],17,606105819),c=v(c,u,p,d,a[h+3],22,-1044525330),d=v(d,c,u,p,a[h+4],7,-176418897),p=v(p,d,c,u,a[h+5],12,1200080426),u=v(u,p,d,c,a[h+6],17,-1473231341),c=v(c,u,p,d,a[h+7],22,-45705983),d=v(d,c,u,p,a[h+8],7,1770035416),p=v(p,d,c,u,a[h+9],12,-1958414417),u=v(u,p,d,c,a[h+10],17,-42063),c=v(c,u,p,d,a[h+11],22,-1990404162),d=v(d,c,u,p,a[h+12],7,1804603682),p=v(p,d,c,u,a[h+13],12,-40341101),u=v(u,p,d,c,a[h+14],17,-1502002290),d=m(d,c=v(c,u,p,d,a[h+15],22,1236535329),u,p,a[h+1],5,-165796510),p=m(p,d,c,u,a[h+6],9,-1069501632),u=m(u,p,d,c,a[h+11],14,643717713),c=m(c,u,p,d,a[h+0],20,-373897302),d=m(d,c,u,p,a[h+5],5,-701558691),p=m(p,d,c,u,a[h+10],9,38016083),u=m(u,p,d,c,a[h+15],14,-660478335),c=m(c,u,p,d,a[h+4],20,-405537848),d=m(d,c,u,p,a[h+9],5,568446438),p=m(p,d,c,u,a[h+14],9,-1019803690),u=m(u,p,d,c,a[h+3],14,-187363961),c=m(c,u,p,d,a[h+8],20,1163531501),d=m(d,c,u,p,a[h+13],5,-1444681467),p=m(p,d,c,u,a[h+2],9,-51403784),u=m(u,p,d,c,a[h+7],14,1735328473),d=_(d,c=m(c,u,p,d,a[h+12],20,-1926607734),u,p,a[h+5],4,-378558),p=_(p,d,c,u,a[h+8],11,-2022574463),u=_(u,p,d,c,a[h+11],16,1839030562),c=_(c,u,p,d,a[h+14],23,-35309556),d=_(d,c,u,p,a[h+1],4,-1530992060),p=_(p,d,c,u,a[h+4],11,1272893353),u=_(u,p,d,c,a[h+7],16,-155497632),c=_(c,u,p,d,a[h+10],23,-1094730640),d=_(d,c,u,p,a[h+13],4,681279174),p=_(p,d,c,u,a[h+0],11,-358537222),u=_(u,p,d,c,a[h+3],16,-722521979),c=_(c,u,p,d,a[h+6],23,76029189),d=_(d,c,u,p,a[h+9],4,-640364487),p=_(p,d,c,u,a[h+12],11,-421815835),u=_(u,p,d,c,a[h+15],16,530742520),d=g(d,c=_(c,u,p,d,a[h+2],23,-995338651),u,p,a[h+0],6,-198630844),p=g(p,d,c,u,a[h+7],10,1126891415),u=g(u,p,d,c,a[h+14],15,-1416354905),c=g(c,u,p,d,a[h+5],21,-57434055),d=g(d,c,u,p,a[h+12],6,1700485571),p=g(p,d,c,u,a[h+3],10,-1894986606),u=g(u,p,d,c,a[h+10],15,-1051523),c=g(c,u,p,d,a[h+1],21,-2054922799),d=g(d,c,u,p,a[h+8],6,1873313359),p=g(p,d,c,u,a[h+15],10,-30611744),u=g(u,p,d,c,a[h+6],15,-1560198380),c=g(c,u,p,d,a[h+13],21,1309151649),d=g(d,c,u,p,a[h+4],6,-145523070),p=g(p,d,c,u,a[h+11],10,-1120210379),u=g(u,p,d,c,a[h+2],15,718787259),c=g(c,u,p,d,a[h+9],21,-343485551),d=d+b>>>0,c=c+f>>>0,u=u+y>>>0,p=p+C>>>0}return i.endian([d,c,u,p])})._ff=(e,t,a,i,l,s,r)=>{var o=e+(t&a|~t&i)+(l>>>0)+r;return(o<<s|o>>>32-s)+t},o._gg=(e,t,a,i,l,s,r)=>{var o=e+(t&i|a&~i)+(l>>>0)+r;return(o<<s|o>>>32-s)+t},o._hh=(e,t,a,i,l,s,r)=>{var o=e+(t^a^i)+(l>>>0)+r;return(o<<s|o>>>32-s)+t},o._ii=(e,t,a,i,l,s,r)=>{var o=e+(a^(t|~i))+(l>>>0)+r;return(o<<s|o>>>32-s)+t},o._blocksize=16,o._digestsize=16,e.exports=(e,t)=>{if(null==e)throw new Error("Illegal argument "+e);var a=i.wordsToBytes(o(e,t));return t&&t.asBytes?a:t&&t.asString?r.bytesToString(a):i.bytesToHex(a)}},8814:(e,t,a)=>{"use strict";var i;a.d(t,{g:()=>i}),(e=>{e.General="general",e.AutoReload="reload",e.CropScale="crop_scale",e.Thumbnail="thumbnail",e.Settings="settings",e.Visual="visual",e.Tags="tags"})(i||(i={}))},6126:(e,t,a)=>{"use strict";a.d(t,{editSingleDial:()=>ta});var i=a(1940),l=a(2346),s=a(539),r=a(5471),o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-app",{attrs:{id:"inspire"}},[t("v-app-bar",{attrs:{app:"",absolute:"","clipped-left":"",color:""}},[t("v-toolbar-title",{staticClass:"ml-0 d-flex align-center"},[t("v-app-bar-nav-icon",{on:{click:t=>{t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),t("span",{directives:[{name:"tr",rawName:"v-tr",value:"ed_edit_dial",expression:"'ed_edit_dial'"}],staticClass:"hidden-xs-and-down"})],1),e._v(" "),t("draggable_top"),e._v(" "),t("v-toolbar-title",{staticClass:"px-4 d-flex align-center grey--text text--darken-1 font-italic"},[t("label",{directives:[{name:"tr",rawName:"v-tr:title",value:"dial_number_title",expression:"'dial_number_title'",arg:"title"}]},[e._v("#"+e._s(e.dialNumber))])]),e._v(" "),t("v-btn",{attrs:{icon:"",title:e.tr("label_close")},on:{click:e.closeEditor}},[t("v-icon",[e._v("fa-times")])],1)],1),e._v(" "),t("v-navigation-drawer",{attrs:{clipped:!0,app:"",absolute:"","mobile-breakpoint":e.mobileBreakpoint},model:{value:e.drawer,callback:t=>{e.drawer=t},expression:"drawer"}},[t("v-list",[t("v-divider"),e._v(" "),e._l(e.tabs,(a=>t("div",[t("v-list-item",{class:{"v-list-item--active":e.activeTab===a.tab},on:{click:t=>{e.activeTab=a.tab}}},[t("v-list-item-icon",[t("v-icon",[e._v(e._s(a.icon))])],1),e._v(" "),t("v-list-item-content",[t("v-list-item-title",[e._v(e._s(a.name))])],1)],1),e._v(" "),t("v-divider")],1))),e._v(" "),t("dark_theme_switch")],2)],1),e._v(" "),t("v-main",{staticClass:"fill-height"},[t("v-container",{staticClass:"fill-height overflow-auto align-content-start",attrs:{fluid:""}},[e.activeTab===e.ActiveTab.General?t("tab_general",{attrs:{editDialController:e.editDialController},on:{saveChanges:e.saveChanges,openTab:e.openTab}}):e._e(),e._v(" "),e.activeTab===e.ActiveTab.AutoReload?t("tab_auto_reload",{attrs:{editDialController:e.editDialController},on:{saveChanges:e.saveChanges}}):e._e(),e._v(" "),t("keep-alive",[e.activeTab===e.ActiveTab.CropScale?t("tab_crop_scale",{attrs:{editDialController:e.editDialController},on:{saveChanges:e.saveChanges}}):e._e(),e._v(" "),e.activeTab===e.ActiveTab.Thumbnail?t("tab_thumbnail",{attrs:{editDialController:e.editDialController},on:{saveChanges:e.saveChanges}}):e._e()],1),e._v(" "),e.activeTab===e.ActiveTab.Visual?t("tab_visual",{attrs:{editDialController:e.editDialController},on:{saveChanges:e.saveChanges}}):e._e(),e._v(" "),e.activeTab===e.ActiveTab.Tags?t("tab_tags",{attrs:{editDialController:e.editDialController},on:{saveChanges:e.saveChanges}}):e._e(),e._v(" "),e.activeTab===e.ActiveTab.Settings?t("tab_settings",{attrs:{editDialController:e.editDialController},on:{saveChanges:e.saveChanges}}):e._e()],1)],1),e._v(" "),t("v-footer",{attrs:{app:"",absolute:"",outlined:""}},[t("div",{staticClass:"d-flex text-left",attrs:{cols:"12"}},[t("v-btn",{staticClass:"ma-2",attrs:{tile:"",color:"primary",name:"save_changes",disabled:e.isSaving},on:{click:e.saveChanges}},[t("v-icon",{attrs:{left:""}},[e._v(e._s(e.isSaving?"fa-spinner fa-spin":"far fa-save"))]),t("span",{directives:[{name:"tr",rawName:"v-tr",value:"label_save_changes",expression:"'label_save_changes'"}]})],1),e._v(" "),t("v-btn",{staticClass:"ma-2",attrs:{tile:"",outlined:"",color:""},on:{click:e.discardChanges}},[t("v-icon",{attrs:{left:""}},[e._v("fa-undo-alt")]),t("span",{directives:[{name:"tr",rawName:"v-tr",value:"label_discard_changes",expression:"'label_discard_changes'"}]})],1)],1)])],1)};o._withStripped=!0;var n=a(8408),d=a(5278),c=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("v-row",{staticClass:"mt-2 mx-2",attrs:{dense:""}},[t("v-col",{staticClass:"d-flex flex-space-between_10",attrs:{cols:"12",sm:"5"}},[t("v-text-field",{directives:[{name:"tr",rawName:"v-tr:title",value:["cm_shortcut_title","F2"],expression:"['cm_shortcut_title', 'F2']",arg:"title"}],ref:"dial_name",attrs:{type:"text",maxlength:"128",dense:"",outlined:"",label:e.tr("ed_dial_title"),hint:e.tr("dial_name_placeholder")},on:{focus:e=>e.target.select(),keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.saveChanges.apply(null,arguments))}},model:{value:e.dial.name,callback:t=>{e.$set(e.dial,"name","string"==typeof t?t.trim():t)},expression:"dial.name"}}),e._v(" "),!e.hasNote&&e.isAndroid?t("v-btn",{attrs:{title:e.tro("ed_dial_note",{column:!1}),right:"",fab:"",small:""},on:{click:e.addNote}},[t("v-icon",{attrs:{color:"grey"}},[e._v("fa-regular fa-note-sticky")])],1):e._e()],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"7"}},[!e.isAndroid||e.hasNote?t("v-textarea",{ref:"dial_note",attrs:{maxlength:"500","auto-grow":"",outlined:"",rows:"1",dense:"",label:e.tr("ed_dial_note"),hint:e.tr("dial_note_placeholder")},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.saveChanges.apply(null,arguments):null}},model:{value:e.dial.note,callback:t=>{e.$set(e.dial,"note",t)},expression:"dial.note"}}):e._e()],1)],1),e._v(" "),t("v-radio-group",{staticClass:"mt-0 pt-0",attrs:{mandatory:"",value:e.radioOptions[e.selectedRadioIndex]}},[t("v-expansion-panels",{model:{value:e.selectedRadioIndex,callback:t=>{e.selectedRadioIndex=t},expression:"selectedRadioIndex"}},[t("v-expansion-panel",[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("ed_page_dial"),value:e.DIAL_TYPE.URL}})],1),e._v(" "),t("v-expansion-panel-content",[t("v-text-field",{ref:"url_input",attrs:{maxlength:"2048",type:"url",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",outlined:"",label:e.tr("ed_link_to_page"),hint:e.tr("dial_url_placeholder")},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.saveChanges.apply(null,arguments))},blur:t=>e.checkForDuplicates(),input:t=>e.checkForDuplicatesWithDelay()},scopedSlots:e._u([{key:"append",fn:()=>[e.dial.url?.slice(0,-2).includes(".")?t("v-btn",{directives:[{name:"tr",rawName:"v-tr:title",value:"logos_lookup",expression:"'logos_lookup'",arg:"title"}],staticClass:"mt-n4 mr-n2",attrs:{"x-large":"",icon:""},on:{click:t=>{e.editDialController.logosLookup(),e.$emit("openTab",e.ActiveTab.Thumbnail)}}},[t("v-icon",[e._v("fa-image")])],1):e._e()],proxy:!0}]),model:{value:e.dial.url,callback:t=>{e.$set(e.dial,"url","string"==typeof t?t.trim():t)},expression:"dial.url"}}),e._v(" "),e.duplicateDial?t("v-btn",{staticClass:"text-none",attrs:{color:"warning",outlined:"",tile:"",small:""},on:{click:t=>e.highlightDuplicate(e.duplicateDial)}},[t("v-icon",{attrs:{left:"",small:""}},[e._v("fa-copy")]),e._v(" "),t("span",{directives:[{name:"tr",rawName:"v-tr",value:["duplicate_dial_found",e.duplicateDial.groupName],expression:"['duplicate_dial_found', duplicateDial.groupName]"}]})],1):e._e()],1)],1),e._v(" "),t("v-expansion-panel",[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("ed_group_dial"),value:e.DIAL_TYPE.GROUP,name:"radio_group_dial"}})],1),e._v(" "),t("v-expansion-panel-content",[t("v-row",{staticClass:"mb-2",attrs:{dense:""}},[t("v-col",{attrs:{cols:"12",sm:"6"}},[t("power_select",{ref:"group_name_input",staticClass:"select_container",attrs:{"_option-data":e.linkToGroupData,"_categories-info":[{id:"create_new",name:e.tr("ed_create_new_group")},{id:"group",name:e.tr("ed_link_to_group")}]},model:{value:e.editDialController.groupDialModel,callback:t=>{e.$set(e.editDialController,"groupDialModel",t)},expression:"editDialController.groupDialModel"}})],1)],1),e._v(" "),""===e.editDialController.groupDialModel?t("div",[t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-text-field",{ref:"new_group_name_input",attrs:{type:"text",maxlength:"128",dense:"","hide-details":"",outlined:"",label:e.tr("ed_group_name")},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.saveChanges.apply(null,arguments))}},model:{value:e.editDialController.newGroup.name,callback:t=>{e.$set(e.editDialController.newGroup,"name","string"==typeof t?t.trim():t)},expression:"editDialController.newGroup.name"}})],1),e._v(" "),t("v-col",{attrs:{cols:"6",sm:"3"}},[t("v-text-field",{attrs:{type:"number",min:"1",max:"9",dense:"","hide-details":"",outlined:"",label:e.tr("ed_columns")},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.saveChanges.apply(null,arguments))}},model:{value:e.editDialController.newGroup.columns,callback:t=>{e.$set(e.editDialController.newGroup,"columns",e._n(t))},expression:"editDialController.newGroup.columns"}})],1),e._v(" "),t("v-col",{attrs:{cols:"6",sm:"3"}},[t("v-text-field",{attrs:{type:"number",min:"1",max:"9",dense:"","hide-details":"",outlined:"",label:e.tr("ed_rows")},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.saveChanges.apply(null,arguments))}},model:{value:e.editDialController.newGroup.rows,callback:t=>{e.$set(e.editDialController.newGroup,"rows",e._n(t))},expression:"editDialController.newGroup.rows"}})],1)],1)],1):e._e()],1)],1),e._v(" "),t("v-expansion-panel",{class:{force_first:e.initialType===e.DIAL_TYPE.MULTI}},[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("ed_multi_dial"),value:e.DIAL_TYPE.MULTI}})],1),e._v(" "),t("v-expansion-panel-content",[t("multi_dial",{on:{saveChanges:e.saveChanges},model:{value:e.dial.multi,callback:t=>{e.$set(e.dial,"multi",t)},expression:"dial.multi"}})],1)],1),e._v(" "),t("v-expansion-panel",{class:{force_first:e.initialType===e.DIAL_TYPE.SEARCH}},[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("ed_search_dial"),value:e.DIAL_TYPE.SEARCH}})],1),e._v(" "),t("v-expansion-panel-content",[t("search_dial",{model:{value:e.dial.providers,callback:t=>{e.$set(e.dial,"providers",t)},expression:"dial.providers"}})],1)],1),e._v(" "),t("v-expansion-panel",{class:{force_first:e.initialType===e.DIAL_TYPE.WEATHER}},[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("ed_weather_dial"),value:e.DIAL_TYPE.WEATHER}})],1),e._v(" "),t("v-expansion-panel-content",[t("weather_dial",{model:{value:e.dial.weather,callback:t=>{e.$set(e.dial,"weather",t)},expression:"dial.weather"}})],1)],1),e._v(" "),t("v-expansion-panel",{class:{force_first:e.initialType===e.DIAL_TYPE.LIVE}},[t("v-expansion-panel-header",{staticClass:"d-flex"},[t("v-radio",{attrs:{label:e.tr("ed_live_dial"),value:e.DIAL_TYPE.LIVE}}),e._v(" "),t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:({on:a,attrs:i})=>[t("v-btn",e._g(e._b({staticClass:"ml-auto flex-grow-0 mr-2",attrs:{icon:""}},"v-btn",i,!1),a),[t("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("fa-question-circle")])],1)]}])},[e._v(" "),t("div",{domProps:{textContent:e._s(e.tr("ed_live_dial_title_1"))}}),e._v(" "),t("div",{domProps:{textContent:e._s(e.tr("ed_live_dial_title_2"))}})])],1),e._v(" "),t("v-expansion-panel-content",[t("pro_label",[t("v-text-field",{ref:"live_input",attrs:{maxlength:"2048",type:"url",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",outlined:"","hide-details":"",label:e.tr("ed_link_to_page")},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.saveChanges.apply(null,arguments))}},model:{value:e.dial.url,callback:t=>{e.$set(e.dial,"url","string"==typeof t?t.trim():t)},expression:"dial.url"}}),e._v(" "),t("v-checkbox",{attrs:{"hide-details":"",label:e.tr("live_dial_opt_no_interaction")},model:{value:e.dial.live.noInteraction,callback:t=>{e.$set(e.dial.live,"noInteraction",t)},expression:"dial.live.noInteraction"}}),e._v(" "),t("v-checkbox",{attrs:{"hide-details":"",label:e.tr("live_dial_opt_hide_scrollbars")},model:{value:e.dial.live.hideScrollbars,callback:t=>{e.$set(e.dial.live,"hideScrollbars",t)},expression:"dial.live.hideScrollbars"}})],1)],1)],1),e._v(" "),t("v-expansion-panel",{class:{force_first:e.initialType===e.DIAL_TYPE.TEXT}},[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("ed_text_dial"),value:e.DIAL_TYPE.TEXT}})],1),e._v(" "),t("v-expansion-panel-content",[t("v-textarea",{ref:"text_input",attrs:{maxlength:"8192",rows:Math.max(5,e.dial.text.value.split("\n").length||0),outlined:"","hide-details":"",dense:"",placeholder:e.tr("dial_text_placeholder")},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.saveChanges.apply(null,arguments):null},t=>{if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation()}]},model:{value:e.dial.text.value,callback:t=>{e.$set(e.dial.text,"value",t)},expression:"dial.text.value"}}),e._v(" "),t("v-checkbox",{staticClass:"mt-1",attrs:{label:e.tr("dial_click_to_clipboard")},model:{value:e.dial.text.CLICK_TO_CLIPBOARD,callback:t=>{e.$set(e.dial.text,"CLICK_TO_CLIPBOARD",t)},expression:"dial.text.CLICK_TO_CLIPBOARD"}})],1)],1),e._v(" "),t("v-expansion-panel",{class:{force_first:e.initialType===e.DIAL_TYPE.SESSION},on:{click:e.requestSessionsPermission}},[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("ed_recently_closed_dial"),value:e.DIAL_TYPE.SESSION}})],1),e._v(" "),t("v-expansion-panel-content",[t("span",{directives:[{name:"tr",rawName:"v-tr",value:e.isAndroid?"label_not_supported_by_browser":"ed_recently_closed_dial_help",expression:"isAndroid ? 'label_not_supported_by_browser' : 'ed_recently_closed_dial_help'"}]})])],1),e._v(" "),t("v-expansion-panel",{class:{force_first:e.initialType===e.DIAL_TYPE.TOP_SITES},on:{click:e.requestTopSitesPermission}},[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("ed_top_sites_dial"),value:e.DIAL_TYPE.TOP_SITES}})],1),e._v(" "),t("v-expansion-panel-content",[e.isAndroid?t("div",{directives:[{name:"tr",rawName:"v-tr",value:"label_not_supported_by_browser",expression:"'label_not_supported_by_browser'"}]}):[t("div",{directives:[{name:"tr",rawName:"v-tr.d",value:"top_sites_about",expression:"'top_sites_about'",modifiers:{d:!0}}]}),e._v(" "),t("div",{directives:[{name:"tr",rawName:"v-tr",value:"top_sites_help_1",expression:"'top_sites_help_1'"}]})]],2)],1),e._v(" "),t("v-expansion-panel",{class:{force_first:e.initialType===e.DIAL_TYPE.TIMER}},[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("ed_timer_dial"),value:e.DIAL_TYPE.TIMER}})],1),e._v(" "),t("v-expansion-panel-content",[t("timer_dial",{model:{value:e.dial.timer,callback:t=>{e.$set(e.dial,"timer",t)},expression:"dial.timer"}})],1)],1)],1)],1)],1)};c._withStripped=!0;var u=a(4590),p=a(6683),h=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"search_dial"},[t("div",[t("draggable",e._b({staticClass:"list-group",attrs:{handle:".search_handle",tag:"div",disabled:e.single},on:{start:t=>{e.drag=!0},end:t=>{e.drag=!1},update:e.orderChanged},model:{value:e.value,callback:t=>{e.value=t},expression:"value"}},"draggable",e.dragOptions,!1),e._l(e.value,((a,i)=>t("v-row",{key:i,staticClass:"fill-height",attrs:{dense:""}},[t("v-col",{staticClass:"fill-height d-flex align-center",attrs:{cols:"12",lg:"12"}},[t("div",{staticClass:"select_container"},[t("v-icon",{staticClass:"search_handle"},[e._v("fa fa-grip-vertical")]),e._v(" "),t("power_select",{staticClass:"power_select",attrs:{"_option-data":e.providersData,"_categories-info":e.providersCategories},on:{input:e.providerChanged},model:{value:a.type,callback:t=>{e.$set(a,"type",t)},expression:"provider.type"}})],1),e._v(" "),e.single?e._e():t("v-btn",{directives:[{name:"tr",rawName:"v-tr:title",value:"label_remove",expression:"'label_remove'",arg:"title"}],staticClass:"mx-2",attrs:{icon:""},on:{click:t=>e.removeProvider(a)}},[t("v-icon",{attrs:{small:""}},[e._v("fa-trash-alt")])],1)],1),e._v(" "),e.isCustomSearchProvider(a)?t("v-col",{staticClass:"fill-height",attrs:{cols:"12",lg:"4"}},[t("v-text-field",{staticClass:"ml-6",attrs:{type:"text",outlined:"",dense:"","hide-details":"",label:e.tr("search_provider_name")+":",placeholder:e.tr("search_provider_name_placeholder")},on:{input:e.providerChanged},scopedSlots:e._u([{key:"prepend-inner",fn:()=>[t("img",{staticClass:"mr-3",staticStyle:{cursor:"default"},attrs:{src:e.getFavicon(a.url),alt:"",height:"24",width:"24"}})],proxy:!0}],null,!0),model:{value:a.name,callback:t=>{e.$set(a,"name",t)},expression:"provider.name"}})],1):e._e(),e._v(" "),e.isCustomSearchProvider(a)?t("v-col",{staticClass:"fill-height",attrs:{cols:"12",lg:"8"}},[t("div",{staticClass:"d-flex"},[t("v-text-field",{attrs:{type:"url",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",outlined:"",dense:"",label:e.tr("search_provider_url")+":",hint:e.tr("search_provider_url_placeholder",'"%s"'),"persistent-hint":""},on:{input:e.providerChanged},model:{value:a.url,callback:t=>{e.$set(a,"url",t)},expression:"provider.url"}}),e._v(" "),t("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},scopedSlots:e._u([{key:"activator",fn:({on:a})=>[t("v-btn",e._g({staticClass:"mx-2 mt-1",attrs:{icon:""}},a),[t("v-icon",{attrs:{small:""}},[e._v("fa-cog")])],1)]}],null,!0)},[e._v(" "),t("v-card",[t("v-card-actions",[t("v-checkbox",{attrs:{label:e.tr("search_provider_input_raw")},model:{value:a.raw,callback:t=>{e.$set(a,"raw",t)},expression:"provider.raw"}})],1)],1)],1)],1),e._v(" "),i===e.value.findIndex((e=>"cp"===e.type))?t("a",{directives:[{name:"tr",rawName:"v-tr",value:"search_provider_url_info",expression:"'search_provider_url_info'"}],staticClass:"mt-2",attrs:{href:e.LINK_YOUTUBE_CUSTOM_SEARCH_DIAL,target:"_blank"}}):e._e()]):e._e()],1))),1)],1),e._v(" "),e.single?e._e():t("pro_label",{staticClass:"flex mt-2",staticStyle:{width:"min-content"},attrs:{"tr-title":"search_add_more_title",allow:e.value.length<2,"offset-left":"4px"}},[t("v-btn",{attrs:{color:"primary"},on:{click:e.addProvider}},[t("v-icon",{attrs:{left:""}},[e._v("fa-plus-circle")]),t("span",{directives:[{name:"tr",rawName:"v-tr",value:"search_add_more",expression:"'search_add_more'"}]})],1)],1)],1)};h._withStripped=!0;var v=a(7080),m=a(4323),_=a(9074),g=a(1374),b=a(5431),f=a(2542),y=a(9805),C=a(432),x=a.n(C),w=a(6672),k=a(1962),T=a(9510),D=a(1879);const I=r.default.extend({name:"search_dial",props:{value:{type:Array,required:!0},single:Boolean},components:{pro_label:b.A,power_select:y.A,draggable:x()},data:()=>({drag:!1,LINK_YOUTUBE_CUSTOM_SEARCH_DIAL:_.jO,providersCategories:(0,m.WR)(v.HV).map((e=>({...e,name:(0,u.tr)(`sc_${e.id}`)}))),providers:[f.S,...Object.values(v.Lo)],providersData:[f.S,...Object.values(v.Lo)].map((e=>({name:(0,u.tr)(`s_${e}`)||"",smallName:{name:e===f.S?"":(0,w.lX)(v.c3[e].url,!0),url:e===f.S?"":(0,w.bZ)(v.c3[e].url)},value:e,icon:e===f.S?"svg/search (3).svg":v.c3[e]?.icon,category:e===f.S?v.f$.CUSTOM:v.c3[e]?.category}))),faviconsStore:{}}),async created(){this.faviconsStore=await(0,T.$)(D.e.id)},computed:{dragOptions:()=>({animation:200,group:"description",ghostClass:"drag_and_drop_ghost"})},watch:{value(e){this.$emit("input",e)}},methods:{tr:u.tr,getFavicon(e){return this.faviconsStore[e]?.iconBlobURL||k.RO},isCustomSearchProvider:f.Z,isString:m.Kg,addProvider(){this.value.push({type:v.Lo.DUCK_DUCK_GO}),this.$emit("input",this.value)},removeProvider(e){(0,g.E6)(this.value,e),this.$emit("input",this.value)},async orderChanged(){},providerChanged(){this.$emit("input",this.value)}}});var A=a(4486);const L=(0,A.A)(I,h,[],!1,null,"b71c74ca",null).exports;var S=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"timer_dial"},[t("div",[t("draggable",e._b({staticClass:"list-group",attrs:{handle:"div",tag:"div",disabled:e.single},on:{start:t=>{e.drag=!0},end:t=>{e.drag=!1},update:e.orderChanged},model:{value:e.value.timers,callback:t=>{e.$set(e.value,"timers",t)},expression:"value.timers"}},"draggable",e.dragOptions,!1),e._l(e.value.timers,((a,i)=>t("v-row",{key:i,staticClass:"fill-height",attrs:{dense:""}},[t("v-col",{staticClass:"fill-height d-flex align-center",attrs:{cols:"12",md:"5"}},[t("v-select",{attrs:{dense:"","menu-props":"auto",outlined:"",items:e.timerTypes,"hide-details":""},on:{input:e.timerChanged},model:{value:a.type,callback:t=>{e.$set(a,"type",t)},expression:"timer.type"}})],1),e._v(" "),t("v-col",{staticClass:"fill-height d-flex align-center",attrs:{cols:"11",md:"5"}},[a.type===e.TIMER_TYPE.countdown?t("v-menu",{ref:"menu",refInFor:!0,attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":a.value,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":t=>e.$set(a,"value",t),"update:return-value":t=>e.$set(a,"value",t)},scopedSlots:e._u([{key:"activator",fn:({on:i,attrs:l})=>[t("v-text-field",e._g(e._b({attrs:{label:e.tr("timer_type_"+a.type),"prepend-icon":"fa-clock",dense:"","hide-details":"",readonly:""},model:{value:a.value,callback:t=>{e.$set(a,"value",t)},expression:"timer.value"}},"v-text-field",l,!1),i))]}],null,!0),model:{value:e.timersMenuOpenedModel[i],callback:t=>{e.$set(e.timersMenuOpenedModel,i,t)},expression:"timersMenuOpenedModel[index]"}},[e._v(" "),e.timersMenuOpenedModel[i]?t("v-time-picker",{attrs:{min:"00:01",format:"24hr","full-width":""},on:{"click:minute":t=>e.$refs.menu[i].save(a.value)},model:{value:a.value,callback:t=>{e.$set(a,"value",t)},expression:"timer.value"}}):e._e()],1):e._e(),e._v(" "),a.type===e.TIMER_TYPE.alarm?t("v-menu",{ref:"menu",refInFor:!0,attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":a.value,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":t=>e.$set(a,"value",t),"update:return-value":t=>e.$set(a,"value",t)},scopedSlots:e._u([{key:"activator",fn:({on:i,attrs:l})=>[t("v-text-field",e._g(e._b({attrs:{label:e.tr("timer_type_"+a.type),"prepend-icon":"fa-clock",dense:"","hide-details":"",readonly:""},model:{value:a.value,callback:t=>{e.$set(a,"value",t)},expression:"timer.value"}},"v-text-field",l,!1),i))]}],null,!0),model:{value:e.timersMenuOpenedModel[i],callback:t=>{e.$set(e.timersMenuOpenedModel,i,t)},expression:"timersMenuOpenedModel[index]"}},[e._v(" "),e.timersMenuOpenedModel[i]?t("v-time-picker",{attrs:{format:"24hr","full-width":""},on:{"click:minute":t=>e.$refs.menu[i].save(a.value)},model:{value:a.value,callback:t=>{e.$set(a,"value",t)},expression:"timer.value"}}):e._e()],1):e._e()],1),e._v(" "),t("v-col",{staticClass:"ml-auto",attrs:{cols:"1"}},[e.single?e._e():t("v-btn",{staticClass:"mx-2",attrs:{fab:"","x-small":"",color:"",elevation:"2"},on:{click:t=>e.removeTimer(a)}},[t("v-icon",{attrs:{dark:""}},[e._v("fa-trash-alt")])],1)],1)],1))),1)],1),e._v(" "),e.single?e._e():t("pro_label",{staticClass:"flex mt-2",staticStyle:{width:"min-content"},attrs:{allow:e.value.timers.length<3,"offset-left":"4px"}},[t("v-btn",{staticClass:"my-3",attrs:{color:"primary",fab:""},on:{click:e.addTimer}},[t("v-icon",{staticStyle:{opacity:"1"}},[e._v("fa-plus")])],1)],1)],1)};S._withStripped=!0;var O=a(2960);const E=r.default.extend({name:"timer_dial",props:{value:Object,single:Boolean},components:{pro_label:b.A,draggable:x()},data:()=>({timersMenuOpenedModel:{},drag:!1,TIMER_TYPE:p.$C,timerTypes:(0,O.w5)(p.$C).map((e=>({value:e,text:(0,u.tr)(`timer_type_${e}`)})))}),computed:{dragOptions:()=>({animation:200,group:"description",ghostClass:"drag_and_drop_ghost"})},watch:{value(e){this.$emit("input",e)}},methods:{tr:u.tr,addTimer(){this.value.timers.push({type:p.$C.countdown,value:"00:03"}),this.$emit("input",this.value)},removeTimer(e){(0,g.E6)(this.value.timers,e),this.$emit("input",this.value)},async orderChanged(){},timerChanged(){this.$emit("input",this.value)}}});const R=(0,A.A)(E,S,[],!1,null,"ffdf34e6",null).exports;var $=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"weather_dial"},[e.single?e._e():t("pro_label",{staticClass:"mt-2",attrs:{"offset-left":"4px"}},[t("v-row",[t("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[t("v-autocomplete",{attrs:{autofocus:"",label:e.tr("city_name"),items:e.cities,loading:e.isLoading,"search-input":e.search,filter:e.customFilter,placeholder:e.value.city,"item-text":"name","item-value":"index",outlined:"","hide-selected":"","hide-details":""},on:{"update:searchInput":t=>{e.search=t},"update:search-input":t=>{e.search=t}},scopedSlots:e._u([{key:"item",fn:({item:a})=>[t("div",[e._v(e._s(a.name)+", "+e._s(a.state)+" ("+e._s(a.country)+")")])]}],null,!1,260541587),model:{value:e.selectedIndex,callback:t=>{e.selectedIndex=t},expression:"selectedIndex"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[t("v-text-field",{attrs:{type:"number",outlined:"",label:e.tr("latitude"),"hide-details":""},model:{value:e.value.lat,callback:t=>{e.$set(e.value,"lat",e._n(t))},expression:"value.lat"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[t("v-text-field",{attrs:{type:"number",outlined:"",label:e.tr("longitude"),"hide-details":""},model:{value:e.value.lon,callback:t=>{e.$set(e.value,"lon",e._n(t))},expression:"value.lon"}})],1)],1),e._v(" "),t("v-row",{staticClass:"align-center"},[t("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t("v-checkbox",{staticClass:"mt-0",attrs:{label:e.tr("weather_current"),"hide-details":""},model:{value:e.value.current,callback:t=>{e.$set(e.value,"current",t)},expression:"value.current"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t("v-text-field",{attrs:{label:e.tr("weather_forecast_days"),type:"number",min:"0",max:"5",outlined:"",dense:"","hide-details":""},model:{value:e.value.forecastDays,callback:t=>{e.$set(e.value,"forecastDays",e._n(t))},expression:"value.forecastDays"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t("v-select",{attrs:{label:e.tr("weather_units"),dense:"","menu-props":"auto",outlined:"",items:e.weatherUnits,"hide-details":""},model:{value:e.value.units,callback:t=>{e.$set(e.value,"units",t)},expression:"value.units"}})],1)],1)],1)],1)};$._withStripped=!0;var P=a(2037),N=a(4487),B=a(8698),U=a(8168);const M=r.default.extend({name:"weather_dial",props:{value:Object,single:Boolean},components:{pro_label:b.A,draggable:x()},data:()=>({executor:(0,B.U)(800),cities:Array(),selectedIndex:-1,isLoading:!1,search:"",weatherUnits:(0,O.w5)(N.z).map((e=>({value:e,text:(0,u.tr)(`weather_unit_${e}`)})))}),computed:{},watch:{value(e){this.$emit("input",e)},search(e){e&&e.length>2&&this.fetchCities()},selectedIndex(e){const t=this.cities[e];t&&(this.value.lat=t.lat,this.value.lon=t.lon,this.value.city=t.name)}},methods:{tr:u.tr,weatherChanged(){this.$emit("input",this.value)},async fetchCities(){this.isLoading=!0,this.executor((async()=>{this.cities=await(0,P.B8)("open-weather/location/:cityName",{cityName:this.search}),this.cities.forEach(((e,t)=>e.index=t)),this.isLoading=!1}))},customFilter(e,t,a){const i=(0,U.WL)(t.toLowerCase());return(0,U.WL)(e.name.toLowerCase()).includes(i)?e:null}}});const F=(0,A.A)(M,$,[],!1,null,"5b0ee350",null).exports;var G=a(5772),H=a(2036),W=a(6004),z=a(9574),Y=a(9735),X=a(6346),V=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("pro_label",{staticClass:"multi_dial"},[t("draggable",e._b({staticClass:"list-group",attrs:{handle:".v-input__prepend-outer",tag:"div"},on:{start:t=>{e.drag=!0},end:t=>{e.drag=!1},update:e.onManualSort},model:{value:e.multi.links,callback:t=>{e.$set(e.multi,"links",t)},expression:"multi.links"}},"draggable",e.dragOptions,!1),e._l(e.multi.links,((a,i)=>t("v-row",{key:i,staticClass:"fill-height row--dense"},[t("v-col",{staticClass:"fill-height",attrs:{cols:"12",lg:"4"}},[t("v-text-field",{directives:[{name:"tr",rawName:"v-tr:title",value:"dial_name_placeholder",expression:"'dial_name_placeholder'",arg:"title"}],attrs:{type:"text",outlined:"",dense:"","hide-details":"",tabindex:"1",label:e.tr("page_name")+":","prepend-icon":"fa-grip-vertical"},on:{input:e.onChange,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveChanges.apply(null,arguments)}},scopedSlots:e._u([{key:"prepend-inner",fn:()=>[t("img",{staticClass:"mr-3",staticStyle:{cursor:"default"},attrs:{src:e.getFavicon(a.url),alt:"",height:"24",width:"24"}})],proxy:!0}],null,!0),model:{value:a.name,callback:t=>{e.$set(a,"name","string"==typeof t?t.trim():t)},expression:"link.name"}})],1),e._v(" "),t("v-col",{staticClass:"fill-height",attrs:{cols:"12",lg:"8"}},[t("v-text-field",{ref:"url_inputs",refInFor:!0,attrs:{type:"url",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",outlined:"",dense:"",label:e.tr("ed_link_to_page"),"hide-details":"",tabindex:"1","append-outer-icon":"fa-trash-alt"},on:{input:e.onChange,"click:append-outer":t=>e.removeLink(a),keydown:t=>{if(!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;!t.shiftKey&&a.url&&i===e.multi.links.length-1&&e.addLink()},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveChanges.apply(null,arguments)}},model:{value:a.url,callback:t=>{e.$set(a,"url","string"==typeof t?t.trim():t)},expression:"link.url"}})],1)],1))),1),e._v(" "),t("div",{staticClass:"fill-height d-flex align-center"},[t("v-btn",{staticClass:"my-3",attrs:{color:"primary",fab:""},on:{click:t=>e.addLink(!0)}},[t("v-icon",{staticStyle:{opacity:"1"}},[e._v("fa-plus")])],1),e._v(" "),t("v-spacer"),e._v(" "),e.addCurrent.isActive()?t("v-btn",{directives:[{name:"tr",rawName:"v-tr",value:["multi_dial_import_current",e.linksData.length],expression:"['multi_dial_import_current', linksData.length]"}],staticClass:"my-3 mr-3 primary",on:{click:e.addCurrentlyAddingLinks}}):e._e(),e._v(" "),t("v-btn",{directives:[{name:"tr",rawName:"v-tr",value:"multi_dial_import",expression:"'multi_dial_import'"}],staticClass:"my-3",on:{click:e.toggleImportArea}})],1),e._v(" "),e.showTextArea?t("v-textarea",{ref:"text_input",attrs:{rows:"6",outlined:"","hide-details":"",dense:"",placeholder:e.tr("multi_dial_import_help_0")+"\n"+e.tr("multi_dial_import_help_1","#")+"\n"+e.tr("label_example")+"\n# Wikipedia\nhttps://wikipedia.org/"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.saveChanges.apply(null,arguments):null},t=>{if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation()}],paste:e.importFromPaste,input:e.onTextAreaInput},model:{value:e.importLinksModel,callback:t=>{e.importLinksModel=t},expression:"importLinksModel"}}):e._e(),e._v(" "),t("v-row",{staticClass:"mt-2"},[t("v-col",{attrs:{cols:"12",sm:"4"}},[t("v-select",{attrs:{label:e.tr("multi_dial_title_action"),dense:"","menu-props":"auto",outlined:"",items:e.multiDialTitleActions,"hide-details":""},on:{input:e.onChange},model:{value:e.multi.titleAction,callback:t=>{e.$set(e.multi,"titleAction",t)},expression:"multi.titleAction"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"4"}},[t("v-select",{attrs:{label:e.tr("multi_dial_link_action"),dense:"","menu-props":"auto",outlined:"",items:e.multiDialLinkActions,"hide-details":""},on:{input:e.onChange},model:{value:e.multi.linkAction,callback:t=>{e.$set(e.multi,"linkAction",t)},expression:"multi.linkAction"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"4"}},[t("v-select",{attrs:{label:e.tr("cm_sort_by"),dense:"","menu-props":"auto",outlined:"",items:e.multiDialSortBy,"hide-details":""},on:{input:e.onAutoSortChange},model:{value:e.multi.sortBy,callback:t=>{e.$set(e.multi,"sortBy",t)},expression:"multi.sortBy"}})],1)],1)],1)};V._withStripped=!0;var j=a(5022),K=a(8794),q=a(8289);const Q=r.default.extend({name:"multi_dial",props:{value:{type:Object,required:!0}},components:{pro_label:b.A,power_select:y.A,draggable:x()},data(){return{drag:!1,showTextArea:!1,importLinksModel:"",addCurrent:j.$,linksData:Array(),multi:(0,m.WR)(this.value),multiDialTitleActions:(0,O.w5)(p.C2).map((e=>({value:e,text:(0,u.tr)(`multi_dial_title_action_${e}`)}))),multiDialLinkActions:(0,O.w5)(p.Q0).map((e=>({value:e,text:(0,u.tr)(`multi_dial_link_action_${e}`)}))),multiDialSortBy:(0,O.w5)(p.oB).map((e=>({value:e,text:(0,u.tr)([p.oB.nameAsc,p.oB.nameDesc].includes(e)?"sort_by_name":[p.oB.createdAsc,p.oB.createdDesc].includes(e)?"sort_by_date":[p.oB.urlAsc,p.oB.urlDesc].includes(e)?"sort_by_url":"sort_by_manual"),asc:p.oB[e].includes("Asc"),desc:p.oB[e].includes("Desc")}))).map((e=>({...e,text:(e.asc?"â–² ":e.desc?"â–¼ ":"â‹®â‹® ")+e.text}))),faviconsStore:{}}},async created(){this.updateTextAreaFromModel(),this.linksData=await K.qA.get(),this.faviconsStore=await(0,T.$)(D.e.id)},computed:{dragOptions:()=>({animation:200,group:"description",ghostClass:"drag_and_drop_ghost"})},watch:{},methods:{tr:u.tr,isString:m.Kg,getFavicon(e){return this.faviconsStore[e]?.iconBlobURL||k.RO},emitValue(){this.$emit("input",this.multi)},async addCurrentlyAddingLinks(){this.addCurrent.setActive(!1);(await K.qA.get()).forEach((e=>this.multi.links.push({name:e.title,url:e.url}))),await K.qA.reset(),this.removeDuplicates(),this.onChange()},async addLink(e=!1){this.multi.links.push({name:"",url:""}),this.onChange(),e&&(await(0,m.BK)(1),this.$refs.url_inputs.slice(-1)[0].focus())},removeLink(e){(0,g.E6)(this.multi.links,e),this.onChange()},async toggleImportArea(){this.showTextArea=!this.showTextArea,await(0,m.BK)(1),this.showTextArea&&this.$refs.text_input.$el.querySelector("textarea")?.focus()},importFromPaste(e){const t=(e.clipboardData?.getData("text")||"").split("|").flatMap((e=>e.match(/(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[-A-Z0-9+&@#\/%=~_|$?!:,.])*(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[A-Z0-9+&@#\/%=~_|$])/gim))).filter((e=>e?.trim())).join("\n# \n");t&&(this.importLinksModel=`${this.importLinksModel}\n# \n${t}`.trim(),e.preventDefault()),this.onTextAreaInput(this.importLinksModel)},onTextAreaInput(e){const t=e.split("\n").map((e=>e.trim())).filter(m.zz);this.multi.links.length=0;for(let e=0;e<t.length;e++){const a=t[e-1]||"",i=t[e];this.isCommentLine(i)||this.multi.links.push({name:this.isCommentLine(a)?a.slice(1).trimStart():"",url:i})}this.removeDuplicates(),this.emitValue()},isCommentLine:e=>e.startsWith("#")&&!(0,q.Z)(e),removeDuplicates(){this.multi.links=(0,g.vC)(this.multi.links,"url")},onAutoSortChange(){this.onChange()},onManualSort(){this.multi.sortBy=p.oB.manual,this.onChange(),this.$forceUpdate()},onChange(){this.updateTextAreaFromModel(),this.emitValue()},updateTextAreaFromModel(){this.importLinksModel=this.multi.links.filter((e=>e.url)).map((({name:e,url:t})=>`#${e}\n${t}`)).join("\n")},saveChanges(){this.$emit("saveChanges")}}});const Z=(0,A.A)(Q,V,[],!1,null,null,null).exports;var J=a(1596),ee=a(4069),te=a(2846),ae=a(5048),ie=a(6684),le=a(8032),se=a(7104),re=a(8040);function oe(e){(0,W.Ub)(e.$el.querySelector("input"))}var ne=a(5076),de=a(8495),ce=a(8814);const ue=r.default.extend({name:"tab_general",props:{editDialController:{type:Object,required:!0}},components:{select_container:re.A,multi_dial:Z,search_dial:L,timer_dial:R,weather_dial:F,power_select:y.A,pro_label:b.A},data(){const e=this,t=this.editDialController.dial,a=[p.kh.URL,p.kh.GROUP,p.kh.MULTI,p.kh.SEARCH,p.kh.WEATHER,p.kh.LIVE,p.kh.TEXT,p.kh.SESSION,p.kh.TOP_SITES,p.kh.TIMER];return{dial:t,initialType:t.type,DIAL_TYPE:p.kh,THUMBNAIL_TYPE:p.O8,ActiveTab:ce.g,hasNote:!!t.note,isPro:(0,z.m)(H.FJ),duplicateDial:null,checkForDuplicatesWithDelay:(0,B.U)(600,(()=>this.checkForDuplicates())),radioOptions:a,selectedRadioIndex:a.indexOf(t.type),tagsData:[{name:"Mange tags",value:"",icon:"svg/fullscreen.svg",iconStyle:()=>e.$vuetify.theme.dark?"filter: invert(1);":"",category:"tags"}],linkToGroupData:[],env:se._}},async created(){const e=this;this.linkToGroupData=[{name:(0,u.tr)("cm_create_new_group"),category:"create_new",value:"",icon:"svg/plus.svg",get iconStyle(){return e.$vuetify.theme.dark?"filter: invert(1);":""}},...(await te.M.getVisibleGroups()).filter((e=>e.id!==this.editDialController.groupId)).sort((0,G.s)("archived")).map((e=>({name:e.name,category:"group",smallName:`${e.archived?` [${(0,u.tr)("archived")}]`:""} ${e.cols} x ${e.rows}`,value:`#${e.id}`,icon:k.RO,iconStyle:e.styleIcon().style.cssText})))]},computed:{isAndroid:()=>ee.m0},watch:{selectedRadioIndex(e,t){this.dial.type=this.radioOptions[e],this.focusInput(!0)}},mounted(){this.focusInput(),this.checkForDuplicates(),this.$el.addEventListener("keydown",(e=>{if("F2"===e.key)oe(this.$refs.dial_name),e.stopPropagation()}),{capture:!0})},methods:{tr:u.tr,tro:de.e,async addNote(){this.hasNote=!0,await(0,m.BK)(1),this.$refs.dial_note.focus()},async focusInput(e=!1){if(!ee.m0)switch(await(0,m.BK)(10),this.dial.type){case p.kh.URL:oe(this.$refs.url_input);break;case p.kh.GROUP:oe(this.$refs.new_group_name_input||this.$refs.group_name_input);break;case p.kh.LIVE:await this.isPro()&&oe(this.$refs.live_input);break;case p.kh.TEXT:this.$refs.text_input.focus();break;case p.kh.TIMER:case p.kh.SEARCH:case p.kh.SESSION:case p.kh.TOP_SITES:case p.kh.MULTI:e?(0,ne.J)(this.$el.querySelector('.v-expansion-panel--active :is(textarea, input):not([type="radio"])'),W.Ub):oe(this.$refs.dial_name)}},saveChanges(){this.$emit("saveChanges")},async checkForDuplicates(){const e=this.dial.url||"",t=(0,ae.Ty)(e);(0,J.E)(await te.M.getVisibleGroups(),((e,a,i,l)=>{const s=!(!e.url||e.domId===this.dial.domId&&this.editDialController.groupId===a.id||t!==(0,ae.Ty)(e.url));return s&&(this.duplicateDial={dialId:(0,ae.k6)(l),groupId:a.id,groupName:a.name}),s}))||(this.duplicateDial=null)},async highlightDuplicate({dialId:e,groupId:t,groupName:a}){(0,X.Q)(this.$el,{type:"changeOpacity",opacity:"0.1"}),await(0,Y.v)(t,e,{animated:!0,hideOthers:!0}),await(0,m.BK)(2e3),(0,X.Q)(this.$el,{type:"changeOpacity",opacity:"1.0"})},async requestSessionsPermission(){await ie.F.askForPermission()},async requestTopSitesPermission(){await le.O.askForPermission()}}});const pe=(0,A.A)(ue,c,[],!1,null,null,null).exports;var he=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-container",{staticClass:"pa-0"},[t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-card",[t("v-card-subtitle",[t("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:e.tr("ed_ar_title")},model:{value:e.editDialController.hasAutoReload,callback:t=>{e.$set(e.editDialController,"hasAutoReload",t)},expression:"editDialController.hasAutoReload"}})],1),e._v(" "),t("v-card-text",{on:{click:t=>{e.editDialController.hasAutoReload=!0}}},[t("v-row",[t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-select",{attrs:{label:e.tr("ed_ar_title"),dense:"","menu-props":"auto",outlined:"",items:e.reloadTypes,"hide-details":"",disabled:!e.editDialController.hasAutoReload},model:{value:e.dial.reload.type,callback:t=>{e.$set(e.dial.reload,"type",t)},expression:"dial.reload.type"}})],1),e._v(" "),t("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"6"}},[e.dial.reload.type!==e.DialReloadType.ReloadEvery?t("label",{directives:[{name:"tr",rawName:"v-tr",value:"ar_at",expression:"'ar_at'"}],staticClass:"mr-4"}):e._e(),e._v(" "),t("v-text-field",{attrs:{dense:"",type:"number",min:"0",max:e.dial.reload.type===e.DialReloadType.ReloadEvery?999:23,"hide-details":"",outlined:"",label:e.tr("ar_hours"),disabled:!e.editDialController.hasAutoReload},model:{value:e.editDialController.reloadTime.hours,callback:t=>{e.$set(e.editDialController.reloadTime,"hours",e._n(t))},expression:"editDialController.reloadTime.hours"}}),e._v(" "),t("label",{staticClass:"mx-2"},[e._v(":")]),e._v(" "),t("v-text-field",{attrs:{dense:"",type:"number",min:"0",max:e.dial.reload.type===e.DialReloadType.ReloadEvery?999:59,"hide-details":"",outlined:"",label:e.tr("ar_minutes"),disabled:!e.editDialController.hasAutoReload},model:{value:e.editDialController.reloadTime.minutes,callback:t=>{e.$set(e.editDialController.reloadTime,"minutes",e._n(t))},expression:"editDialController.reloadTime.minutes"}})],1)],1),e._v(" "),t("v-row",[t("v-col",{directives:[{name:"tr",rawName:"v-tr:title",value:"ar_dial_delay_title",expression:"'ar_dial_delay_title'",arg:"title"}],attrs:{cols:"12",sm:"12"}},[t("v-card",[t("v-card-subtitle",{directives:[{name:"tr",rawName:"v-tr",value:"ar_dial_delay",expression:"'ar_dial_delay'"}]}),e._v(" "),t("v-card-text",[t("v-slider",{staticClass:"align-center mt-3",attrs:{min:"0",max:"32",label:e.tr("o_seconds"),"inverse-label":"","thumb-label":"always","thumb-size":"26","hide-details":"",disabled:!e.editDialController.hasAutoReload},model:{value:e.dial.reload.delay,callback:t=>{e.$set(e.dial.reload,"delay",t)},expression:"dial.reload.delay"}})],1)],1)],1)],1),e._v(" "),t("v-row",[t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-select",{attrs:{label:e.tr("refresh_method"),outlined:"",items:e.refreshMethods,"hide-details":"",disabled:!e.editDialController.hasAutoReload},model:{value:e.dial.reload.method,callback:t=>{e.$set(e.dial.reload,"method",t)},expression:"dial.reload.method"}})],1)],1),e._v(" "),e.env.$IS_CHROMIUM?t("v-row",[t("v-col",{attrs:{cols:"12",sm:"12"}},[t("label",{directives:[{name:"tr",rawName:"v-tr",value:"set_reloading_monitor",expression:"'set_reloading_monitor'"}],staticClass:"v-label"}),e._v(" "),t("br"),e._v(" "),t("v-btn",{attrs:{small:"",tile:"",color:"",outlined:""},on:{click:t=>(t.stopPropagation(),e.setFavoriteMonitor())}},[t("v-icon",{attrs:{left:""}},[e._v("fa-solid fa-desktop")]),t("span",{directives:[{name:"tr",rawName:"v-tr",value:"set_reloading_monitor",expression:"'set_reloading_monitor'"}]})],1),e._v(" "),t("v-btn",{attrs:{fab:"",small:""},on:{click:t=>(t.stopPropagation(),e.setFavoriteMonitor(!0))}},[t("v-icon",[e._v("fa-undo-alt")])],1)],1)],1):e._e(),e._v(" "),t("v-row",{staticStyle:{display:"none"}},[e._v("    // todo: unhide when cloud reload is ready\n            "),t("v-col",{staticClass:"flex",attrs:{cols:"12",sm:"12"}},[t("pro_label",{staticClass:"flex mt-2",staticStyle:{width:"fit-content","flex-grow":"0"},attrs:{"tr-title":"refresh_cloud_title","offset-left":"12px"}},[t("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:e.tr("refresh_cloud"),disabled:!e.editDialController.hasAutoReload},model:{value:e.editDialController.hasCloudReload,callback:t=>{e.$set(e.editDialController,"hasCloudReload",t)},expression:"editDialController.hasCloudReload"}})],1),e._v(" "),t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:({on:a,attrs:i})=>[t("v-btn",e._g(e._b({staticClass:"ml-auto flex-grow-0 mr-2",attrs:{icon:"",title:""}},"v-btn",i,!1),a),[t("v-icon",{attrs:{color:"grey"}},[e._v("fa-question-circle")])],1)]}])},[e._v(" "),t("div",{domProps:{textContent:e._s(e.tr("refresh_cloud_title"))}}),e._v(" "),t("div",{domProps:{textContent:e._s(e.tr("server_location_list"))}}),e._v(" "),t("ul",{staticClass:"servers_list"},e._l(e.serversList,(a=>t("li",{domProps:{textContent:e._s(a.text)}}))),0)])],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-select",{attrs:{label:e.tr("server_location"),"menu-props":"auto",outlined:"",items:e.serversList,"hide-details":"",disabled:!e.editDialController.hasCloudReload},model:{value:e.dial.reload.cloud.server,callback:t=>{e.$set(e.dial.reload.cloud,"server",t)},expression:"dial.reload.cloud.server"}})],1)],1)],1)],1)],1)],1)],1)};he._withStripped=!0;var ve=a(6663),me=a(2479),_e=a(8642);const ge=new(a(910).F)("reloading_monitor",(()=>[])),be={de:{name:"ðŸ‡©ðŸ‡ªâ€‚Germany"},fr:{name:"ðŸ‡«ðŸ‡·â€‚France"},pl:{name:"ðŸ‡µðŸ‡±â€‚Poland"},ua:{name:"ðŸ‡ºðŸ‡¦â€‚Ukraine"},uk:{name:"ðŸ‡¬ðŸ‡§â€‚United Kingdom"},us:{name:"ðŸ‡ºðŸ‡¸â€‚United States"},ca:{name:"ðŸ‡¨ðŸ‡¦â€‚Canada"},au:{name:"ðŸ‡¦ðŸ‡ºâ€‚Australia"},jp:{name:"ðŸ‡¯ðŸ‡µâ€‚Japan"},sg:{name:"ðŸ‡¸ðŸ‡¬â€‚Singapore"}},fe=r.default.extend({name:"tab_auto_reload",components:{pro_label:b.A,custom_checkbox:me.A,select_container:re.A,color_picker_input:_e.A},props:{editDialController:{type:Object,required:!0}},data(){return{env:se._,DialReloadType:p.kw,dial:this.editDialController.dial,reloadTypes:(0,O.w5)(p.kw).map((e=>({value:e,text:(0,u.tr)(`ed_au_type_${e}`)}))),refreshMethods:[{text:(0,de.e)("label_default",{column:!1}),value:ve.P.default},{text:(0,u.tr)("cm_refresh_dial_background"),value:ve.P.background},{text:`${(0,u.tr)("cm_refresh_dial_background")} 2`,value:ve.P.hiddenVisit}],serversList:Object.entries(be).map((([e,t])=>({value:e,text:t.name})))}},async created(){},methods:{tr:u.tr,setFavoriteMonitor(e=!1){e?ge.reset():ge.set([window.screenX,window.screenY])}}});const ye=(0,A.A)(fe,he,[],!1,null,null,null).exports;var Ce=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-container",{staticClass:"pa-0"},[t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-card",[t("v-card-subtitle",[t("div",{directives:[{name:"tr",rawName:"v-tr:title",value:"label_deprecated",expression:"'label_deprecated'",arg:"title"}],staticClass:"flex flex-space-between_10"},[t("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:e.tr("ed_crop_scale")},model:{value:e.editDialController.hasCropScale,callback:t=>{e.$set(e.editDialController,"hasCropScale",t)},expression:"editDialController.hasCropScale"}})],1)]),e._v(" "),t("v-card-text",{on:{click:t=>{e.editDialController.hasCropScale=!0}}},[t("v-row",{staticClass:"align-center",attrs:{dense:""}},[t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-slider",{staticClass:"align-center",attrs:{min:"10",max:e.MAX,label:e.tr("label_scale"),dense:"","hide-details":"",disabled:!e.editDialController.hasCropScale},scopedSlots:e._u([{key:"append",fn:()=>[t("v-text-field",{staticClass:"my-n1 mr-4",attrs:{type:"number",min:"10",max:e.MAX,dense:"",solo:"","hide-details":"",label:e.tr("label_scale"),disabled:!e.editDialController.hasCropScale},model:{value:e.dial.crop.scale,callback:t=>{e.$set(e.dial.crop,"scale",e._n(t))},expression:"dial.crop.scale"}}),e._v(" "),t("v-icon",{on:{click:t=>{e.dial.crop.scale=e.editDialController.defaultCrop.scale}}},[e._v("fa-undo-alt")])],proxy:!0}]),model:{value:e.dial.crop.scale,callback:t=>{e.$set(e.dial.crop,"scale",t)},expression:"dial.crop.scale"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-slider",{staticClass:"align-center",attrs:{min:"128",max:e.MAX,step:"1",label:e.tr("screen_width"),dense:"","hide-details":"",disabled:!e.editDialController.hasCropScale},scopedSlots:e._u([{key:"append",fn:()=>[t("v-text-field",{staticClass:"my-n1 mr-4",attrs:{type:"number",min:"128",max:e.MAX,step:"1",dense:"",solo:"","hide-details":"",label:e.tr("screen_width"),disabled:!e.editDialController.hasCropScale},model:{value:e.dial.crop.vrX,callback:t=>{e.$set(e.dial.crop,"vrX",e._n(t))},expression:"dial.crop.vrX"}}),e._v(" "),t("v-icon",{on:{click:t=>{e.dial.crop.vrX=e.editDialController.defaultCrop.vrX}}},[e._v("fa-undo-alt")])],proxy:!0}]),model:{value:e.dial.crop.vrX,callback:t=>{e.$set(e.dial.crop,"vrX",t)},expression:"dial.crop.vrX"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-slider",{staticClass:"align-center",attrs:{min:"128",max:"5120",step:"1",label:e.tr("screen_height"),dense:"","hide-details":"",disabled:!e.editDialController.hasCropScale},scopedSlots:e._u([{key:"append",fn:()=>[t("v-text-field",{staticClass:"my-n1 mr-4",attrs:{type:"number",min:"128",max:"5120",step:"1",dense:"",solo:"","hide-details":"",label:e.tr("screen_height"),disabled:!e.editDialController.hasCropScale},model:{value:e.dial.crop.vrY,callback:t=>{e.$set(e.dial.crop,"vrY",e._n(t))},expression:"dial.crop.vrY"}}),e._v(" "),t("v-icon",{on:{click:t=>{e.dial.crop.vrY=e.editDialController.defaultCrop.vrY}}},[e._v("fa-undo-alt")])],proxy:!0}]),model:{value:e.dial.crop.vrY,callback:t=>{e.$set(e.dial.crop,"vrY",t)},expression:"dial.crop.vrY"}})],1)],1),e._v(" "),t("v-row",{attrs:{dense:""}},[t("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"6","order-sm":"first",order:"last"}},[t("v-btn",{attrs:{color:"",outlined:"",disabled:!e.editDialController.hasCropScale},on:{click:t=>e.editDialController.resetCropScale()}},[t("v-icon",{attrs:{left:""}},[e._v("fa-undo-alt")]),t("span",{directives:[{name:"tr",rawName:"v-tr",value:"label_reset_all",expression:"'label_reset_all'"}]})],1)],1),e._v(" "),t("v-col",{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"6"}},[t("v-text-field",{staticClass:"mr-2",attrs:{dense:"",type:"number",min:"-9000",max:"9000",step:"1","hide-details":"",outlined:"",label:e.tr("ed_left"),disabled:!e.editDialController.hasCropScale},model:{value:e.dial.crop.posX,callback:t=>{e.$set(e.dial.crop,"posX",e._n(t))},expression:"dial.crop.posX"}}),e._v(" "),t("v-text-field",{attrs:{dense:"",type:"number",min:"-9000",max:"9000",step:"1","hide-details":"",outlined:"",label:e.tr("ed_top"),disabled:!e.editDialController.hasCropScale},model:{value:e.dial.crop.posY,callback:t=>{e.$set(e.dial.crop,"posY",e._n(t))},expression:"dial.crop.posY"}}),e._v(" "),t("v-icon",{staticClass:"ml-4",on:{click:t=>{e.dial.crop.posX=e.editDialController.defaultCrop.posX,e.dial.crop.posY=e.editDialController.defaultCrop.posY}}},[e._v("fa-undo-alt")])],1)],1),e._v(" "),t("v-row",{attrs:{dense:""}},[t("v-col",{staticClass:"mt-2"},[e.noPreview?t("v-btn",{attrs:{"x-large":"",color:"primary"},on:{click:t=>e.loadPreview()}},[t("v-icon",{attrs:{left:""}},[e._v("fa-arrow-alt-circle-down")]),t("span",{directives:[{name:"tr",rawName:"v-tr",value:"ed_load_preview",expression:"'ed_load_preview'"}]})],1):t("div",{ref:"preview_node",staticClass:"iframe_preview_container",style:{width:e.previewContainerWidth,height:e.previewContainerHeight},on:{wheel:e.onScrollWheel}},[t("iframe",{staticClass:"iframe_page_preview",style:e.frameStyle,attrs:{src:e.editDialController.URL,name:e.iframeName,sandbox:e.getSandboxValue},on:{load:e.onFrameLoad}})])],1)],1)],1)],1)],1)],1)],1)};Ce._withStripped=!0;var xe=a(3091),we=a(6202),ke=a(2466),Te=a(8847),De=a(865);const Ie="iframe_node_name",Ae=r.default.extend({name:"tab_crop_scale",components:{custom_checkbox:me.A,select_container:re.A,color_picker_input:_e.A},props:{editDialController:{type:Object,required:!0}},data(){return{env:se._,MAX:8192,iframeName:Ie,MOVE:(0,xe.$)(document.createElement("dummy")),dial:this.editDialController.dial,noPreview:!0}},computed:{previewContainerWidth(){return this.editDialController.dialWidth/window.devicePixelRatio+"px"},previewContainerHeight(){return this.editDialController.dialHeight/window.devicePixelRatio+"px"},frameStyle(){return(0,Te.v0)(this.dial.crop,this.editDialController.dialWidth/window.devicePixelRatio)},getSandboxValue(){return this.dial.settings?.NO_SCRIPT?"":(0,Te.jM)(this.editDialController.URL)}},mounted(){},methods:{tr:u.tr,async loadPreview(){await(0,we.w)(De.aU),this.noPreview=!1,await(0,m.BK)(1),this.MOVE=(0,xe.$)(this.$refs.preview_node,{USE_PERCENT:!0,PERCENT_RATIO:Te.Ny,elementWidth:this.editDialController.dialWidth}),this.MOVE.setPosition(this.dial.crop.posX,this.dial.crop.posY),this.MOVE.setCallback(((e,t)=>this.updatePreviewPosition(e,t)))},updatePreviewPosition(e,t){this.dial.crop.posX=e,this.dial.crop.posY=t,this.MOVE.setPosition(e,t)},async onFrameLoad(){await(0,ke.K)(De.aU,this.dial.isGroupDial(),{frameName:Ie})},onScrollWheel(e){e.preventDefault(),e.stopPropagation();const t=(e.deltaY||e.deltaX||e.deltaZ)>0?-1:1,a=this.dial.crop.scale*this.editDialController.dialWidth*1/1e6,i=t*(96*a);if(this.dial.crop.scale+i>8192&&t>0)return;this.dial.crop.scale+=i;const l=this.dial.crop.scale*this.editDialController.dialWidth*1/1e6-a,s=this.dial.crop.vrX*l,r=this.dial.crop.vrY*l,o=1*this.editDialController.dialWidth/Te.Ny,{layerX:n,layerY:d}=e,c=n-this.dial.crop.posX*o,u=d-this.dial.crop.posY*o,p=c/(this.dial.crop.vrX*a),h=u/(this.dial.crop.vrY*a);this.dial.crop.posX-=Math.round(s*p/o),this.dial.crop.posY-=Math.round(r*h/o),this.MOVE.setPosition(this.dial.crop.posX,this.dial.crop.posY)}}});const Le=(0,A.A)(Ae,Ce,[],!1,null,"ad22e7dc",null).exports;var Se=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-container",{staticClass:"pa-0"},[t("v-radio-group",{staticClass:"mt-0",attrs:{value:e.radioOptions[e.selectedRadioIndex],mandatory:!0},on:{change:e.onRadioChange}},[t("v-expansion-panels",{attrs:{mandatory:""},model:{value:e.selectedRadioIndex,callback:t=>{e.selectedRadioIndex=t},expression:"selectedRadioIndex"}},[t("v-expansion-panel",[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:`${e.tr("ed_auto_generated_th_radio")} ${e.dimensionsLabel}`,value:e.THUMBNAIL_TYPE.AUTO_GENERATED}})],1)],1),e._v(" "),t("v-expansion-panel",[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("ed_public_thumbnail_radio"),value:e.THUMBNAIL_TYPE.PUBLIC}})],1),e._v(" "),t("v-expansion-panel-content",[t("public_library",{attrs:{editDialController:e.editDialController},on:{saveChanges:t=>e.$emit("saveChanges")}})],1)],1),e._v(" "),t("v-expansion-panel",[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("ed_custom_th_file"),value:e.THUMBNAIL_TYPE.FILE}})],1),e._v(" "),t("v-expansion-panel-content",[t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"12"}},[t("v-file-input",{staticClass:"mr-2",attrs:{label:e.tr("file_load_label"),accept:"image/*","show-size":"",outlined:"",dense:""},on:{change:e.imageLoaded}})],1)],1),e._v(" "),e.editDialController.thumbnailBase64?t("img",{staticClass:"thumbnail_preview",attrs:{src:e.editDialController.thumbnailBase64}}):e._e(),e._v(" "),t("v-subheader",[t("b",{directives:[{name:"tr",rawName:"v-tr",value:"label_tip",expression:"'label_tip'"}]}),e._v(" "),t("i",{directives:[{name:"tr",rawName:"v-tr",value:"file_load_drop_help",expression:"'file_load_drop_help'"}],staticClass:"ml-2"})])],1)],1),e._v(" "),t("v-expansion-panel",[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("file_from_clipboard")+":",value:e.THUMBNAIL_TYPE.CLIPBOARD}})],1),e._v(" "),t("v-expansion-panel-content",[t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{staticClass:"mr-2",attrs:{label:e.tr("file_from_clipboard"),autofocus:"",readonly:"",outlined:"",dense:"","prepend-icon":"fa-paste",value:e.editDialController.loadedImageFileInfo}})],1)],1),e._v(" "),e.editDialController.thumbnailBase64?t("img",{staticClass:"thumbnail_preview",attrs:{src:e.editDialController.thumbnailBase64}}):e._e(),e._v(" "),t("v-subheader",[t("b",{directives:[{name:"tr",rawName:"v-tr",value:"label_tip",expression:"'label_tip'"}]}),e._v(" "),t("i",{directives:[{name:"tr",rawName:"v-tr",value:"file_from_clipboard_help",expression:"'file_from_clipboard_help'"}],staticClass:"ml-2"})])],1)],1),e._v(" "),t("v-expansion-panel",[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("ed_custom_th_url"),value:e.THUMBNAIL_TYPE.URL}})],1),e._v(" "),t("v-expansion-panel-content",[t("v-text-field",{attrs:{type:"url",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",autofocus:"",dense:"",outlined:""},on:{change:e.centerThumbnail},model:{value:e.editDialController.thumbnailURL,callback:t=>{e.$set(e.editDialController,"thumbnailURL",t)},expression:"editDialController.thumbnailURL"}}),e._v(" "),e.editDialController.thumbnailURL?t("img",{staticClass:"thumbnail_preview",attrs:{src:e.editDialController.thumbnailURL}}):e._e()],1)],1),e._v(" "),t("v-expansion-panel",[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("ed_make_text_radio","MakeText.io"),value:e.THUMBNAIL_TYPE.MAKE_TEXT}})],1),e._v(" "),t("v-expansion-panel-content",[t("v-btn",{domProps:{textContent:e._s(e.tr("label_open_page"))},on:{click:e.makeText}}),e._v(" "),e.editDialController.thumbnailBase64?t("img",{staticClass:"thumbnail_preview mt-2",attrs:{src:e.editDialController.thumbnailBase64}}):e._e()],1)],1),e._v(" "),t("v-expansion-panel",[t("v-expansion-panel-header",[t("v-radio",{attrs:{label:e.tr("ed_blank_radio"),value:e.THUMBNAIL_TYPE.BLANK}})],1)],1)],1)],1)],1)};Se._withStripped=!0;var Oe=a(6801),Ee=a(8282);var Re=a(2462);async function $e(e){const t=(await(0,n.K)(`https://maketext.io/api/editor/0.1/?t=${e}&s=100`,{inNewTab:!0,nextToCurrent:!0,active:!0})).id;await async function(e,{timeout:t=0}={}){return new Promise(((a,i)=>{function l(t){t.tabId===e&&0===t.frameId&&t.url!==Ee.pf&&(s(),"error"in t&&"Error code 2152398850"!==t.error?i(t.error):a())}function s(){browser.webNavigation.onCompleted.removeListener(l),browser.webNavigation.onErrorOccurred.removeListener(l)}t&&setTimeout((()=>{s(),i(Error("timeout"))}),t),browser.webNavigation.onCompleted.addListener(l),browser.webNavigation.onErrorOccurred.addListener(l)}))}(t,{timeout:2e3}).catch(m.lQ),await browser.scripting.executeScript({target:{tabId:t,allFrames:!1},files:[...(0,Re.K_)(),"/content_scripts/cs_maketext_integration.js"]});const a=await(0,Oe.hC)(t,{type:"getCreatedImage",downloadText:(0,u.tr)("use_for_dial")});return await browser.tabs.remove(t),a}var Pe=a(3457),Ne=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",["loading"===e.state?t("div",{staticClass:"flex flex-space-between_10"},[t("span",{directives:[{name:"tr",rawName:"v-tr",value:"loading",expression:"'loading'"}]}),e._v(" "),t("v-progress-linear",{attrs:{indeterminate:"",color:"primary"}})],1):"init"===e.state?t("v-btn",{staticClass:"mt-4",domProps:{textContent:e._s(e.tr("load_images"))},on:{click:e.loadPublicLibrary}}):"loaded"===e.state?t("div",{ref:"publicLibraryImages",staticClass:"public_previews",attrs:{tabindex:"0"},on:{keydown:t=>e.switchImage(t,"public")}},[e.publicThumbnails.length?e._e():t("div",{staticClass:"nowrap"},[t("div",{directives:[{name:"tr",rawName:"v-tr.c",value:"load_images_empty",expression:"'load_images_empty'",modifiers:{c:!0}}]}),e._v(" "),t("div",{staticClass:"text--secondary"},[e._v(e._s(e.editDialController.domain))])]),e._v(" "),e._l(e.publicThumbnails.filter(((t,a)=>a<e.publicImageCountLimit||t.hash===e.selectedHash)),(a=>t("div",{key:a.hash,staticClass:"public_item",class:{is_selected:a.hash===e.selectedHash},attrs:{"data-hash":a.hash},on:{click:t=>e.selectImage(a,"public"),mouseenter:t=>e.showPreview(a,!0),mouseleave:t=>e.showPreview(e.selectedItem,!0,!0)}},[t("img",{staticClass:"public_image",attrs:{loading:"lazy",src:a.src,title:a.titleDetails()}}),e._v(" "),t("div",{staticClass:"public_info ml-2"},[t("div",{directives:[{name:"tr",rawName:"v-tr:title.cc",value:"image_extension",expression:"'image_extension'",arg:"title",modifiers:{cc:!0}}],staticClass:"text-uppercase text--primary",class:{"font-weight-bold":a.vector}},[t("v-icon",{attrs:{color:a.vector?"primary":"",small:""}},[e._v("fa-image")]),e._v(" "),t("span",{domProps:{textContent:e._s(a.img.ext)}}),e._v(" "),e.isLoggedIn&&!a.reportLocked?t("v-btn",{directives:[{name:"tr",rawName:"v-tr:title",value:a.img.reported?"report_image_done":"report_image",expression:"item.img.reported ? 'report_image_done' : 'report_image'",arg:"title"}],staticClass:"ml-auto mt-n1 mr-n1",class:{"opacity-05":!a.img.reported},attrs:{icon:"",color:a.img.reported?"error":""},on:{click:t=>{t.stopPropagation(),!e.beingReported&&e.reportImage(a)}}},[t("v-icon",{attrs:{"x-small":""}},[e._v("fa-flag "+e._s(a.img.reported?"":"fa-regular"))])],1):e._e()],1),e._v(" "),t("div",{directives:[{name:"tr",rawName:"v-tr:title.cc",value:"downloads",expression:"'downloads'",arg:"title",modifiers:{cc:!0}}]},[t("v-icon",{attrs:{small:""}},[e._v("fa-download")]),t("span",{domProps:{textContent:e._s(a.img.downloads.toLocaleString())}})],1),e._v(" "),t("div",{directives:[{name:"tr",rawName:"v-tr:title.cc",value:"image_file_size",expression:"'image_file_size'",arg:"title",modifiers:{cc:!0}}]},[t("v-icon",{attrs:{small:"",color:a.bigSize?"orange":""},domProps:{textContent:e._s(a.bigSize?"fa-triangle-exclamation":"fa-file-image")}}),t("span",{domProps:{textContent:e._s(a.size)}})],1),e._v(" "),a.vector?e._e():t("div",{directives:[{name:"tr",rawName:"v-tr:title.cc",value:"ed_vr_resolution",expression:"'ed_vr_resolution'",arg:"title",modifiers:{cc:!0}}]},[t("v-icon",{attrs:{small:""}},[e._v("fa-maximize")]),t("span",{domProps:{textContent:e._s(a.img.width+"x"+a.img.height)}})],1)])]))),e._v(" "),e.publicThumbnails.length>e.publicImageCountLimit?t("div",{staticClass:"d-flex justify-center align-center"},[t("v-btn",{on:{click:t=>{e.publicImageCountLimit+=300}}},[t("v-icon",{attrs:{left:""}},[e._v("fa-square-caret-down")]),e._v(" "),t("span",{directives:[{name:"tr",rawName:"v-tr",value:"label_load_more",expression:"'label_load_more'"}]})],1)],1):e._e()],2):e._e(),e._v(" "),t("v-divider",{staticClass:"my-4"}),e._v(" "),"loaded"===e.webState&&e.webThumbnails.length?t("div",{staticClass:"nowrap mb-4 flex justify-space-between"},[t("div",{directives:[{name:"tr",rawName:"v-tr",value:"load_images_result",expression:"'load_images_result'"}]}),e._v(" "),e.editDialController.canUploadToPublicLibrary()?t("v-checkbox",{staticClass:"mt-0",attrs:{label:e.tr("cm_public_upload"),"hide-details":""},model:{value:e.editDialController.uploadToPublicLibrary,callback:t=>{e.$set(e.editDialController,"uploadToPublicLibrary",t)},expression:"editDialController.uploadToPublicLibrary"}}):e._e()],1):e._e(),e._v(" "),"loading"===e.webState?t("div",{staticClass:"flex flex-space-between_10"},[t("span",{directives:[{name:"tr",rawName:"v-tr",value:"loading",expression:"'loading'"}]}),e._v(" "),t("v-progress-linear",{attrs:{value:e.webLoadProgress,color:"primary"}})],1):"init"===e.webState&&e.editDialController.httpURL?t("v-btn",{staticClass:"mt-4 text-none",on:{click:e.loadWebImages}},[t("v-icon",{attrs:{left:""}},[e._v("fa-images fa-regular")]),e._v(" "),t("span",{directives:[{name:"tr",rawName:"v-tr",value:"load_web_images",expression:"'load_web_images'"}]})],1):"loaded"===e.webState?t("div",{ref:"webImages",staticClass:"public_previews",attrs:{tabindex:"0"},on:{keydown:t=>e.switchImage(t,"web")}},[e.webThumbnails.length?e._e():t("div",{staticClass:"nowrap"},[t("div",{directives:[{name:"tr",rawName:"v-tr.c",value:"load_images_empty",expression:"'load_images_empty'",modifiers:{c:!0}}]}),e._v(" "),t("div",{staticClass:"text--secondary"},[e._v(e._s(e.editDialController.domain))])]),e._v(" "),e._l(e.webThumbnails,(a=>t("div",{key:a.hash,staticClass:"public_item",class:{is_selected:a.hash===e.selectedHash},attrs:{"data-hash":a.hash},on:{click:t=>e.selectImage(a,"web"),mouseenter:t=>e.showPreview(a,!0),mouseleave:t=>e.showPreview(e.selectedWebItem,!0,!0)}},[t("img",{staticClass:"public_image",attrs:{src:a.src,title:a.titleDetails()}}),e._v(" "),t("div",{staticClass:"public_info ml-2"},[t("div",{directives:[{name:"tr",rawName:"v-tr:title.cc",value:"image_extension",expression:"'image_extension'",arg:"title",modifiers:{cc:!0}}],staticClass:"text-uppercase text--primary",class:{"font-weight-bold":a.vector}},[t("v-icon",{attrs:{color:a.vector?"primary":"",small:""}},[e._v("fa-image")]),t("span",{domProps:{textContent:e._s(a.img.ext)}})],1),e._v(" "),t("div",{directives:[{name:"tr",rawName:"v-tr:title.cc",value:"image_file_size",expression:"'image_file_size'",arg:"title",modifiers:{cc:!0}}]},[t("v-icon",{attrs:{small:"",color:a.bigSize?"orange":""},domProps:{textContent:e._s(a.bigSize?"fa-triangle-exclamation":"fa-file-image")}}),t("span",{domProps:{textContent:e._s(a.size)}})],1),e._v(" "),a.vector?e._e():t("div",{directives:[{name:"tr",rawName:"v-tr:title.cc",value:"ed_vr_resolution",expression:"'ed_vr_resolution'",arg:"title",modifiers:{cc:!0}}]},[t("v-icon",{attrs:{small:""}},[e._v("fa-maximize")]),t("span",{domProps:{textContent:e._s(a.img.width+"x"+a.img.height)}})],1)])])))],2):e._e()],1)};Ne._withStripped=!0;const Be=["png","jpeg","avif","svg","webp"];var Ue,Me,Fe;(e=>{e[e.CENTER=0]="CENTER",e[e.FULL_WIDTH=1]="FULL_WIDTH",e[e.COVER=2]="COVER",e[e.FILL=3]="FILL"})(Ue||(Ue={})),(e=>{e[e.USER=0]="USER",e[e.WIKI=1]="WIKI",e[e.FLATICON=2]="FLATICON",e[e.FIREFOX=3]="FIREFOX",e[e.SVG_LOGOS=4]="SVG_LOGOS",e[e.HEURISTIC=5]="HEURISTIC",e[e.SCREENSHOT=6]="SCREENSHOT",e[e.GOOGLE_FAV_SRC=7]="GOOGLE_FAV_SRC",e[e.CLEARBIT=8]="CLEARBIT"})(Me||(Me={})),(e=>{e[e.SPAM=0]="SPAM",e[e.COPYRIGHT=1]="COPYRIGHT",e[e.VIOLENT=2]="VIOLENT",e[e.UNETHICAL=3]="UNETHICAL",e[e.OTHER=4]="OTHER",e[e.DOWN_VOTE=5]="DOWN_VOTE"})(Fe||(Fe={}));var Ge=a(2572),He=a(260);class We{img;domain;priority;hash;src;size;vector;bigSize;reportLocked;supportedFormat;constructor(e,t){this.img=e,this.domain=t,this.priority=this.computePriority(),this.hash=this.img.hash.replaceAll("-",""),this.src=this.computeSrc(),this.size=(0,He.z)(this.img.size,0),this.vector="svg"===this.img.ext,this.bigSize=this.img.size>2e5,this.reportLocked=[Me.SVG_LOGOS,Me.GOOGLE_FAV_SRC,Me.FIREFOX].includes(this.img.source),this.supportedFormat=Be.includes(this.img.ext)}computeSrc(){const e=["svg","png","gif","webp"].includes(this.img.ext)?this.img.ext:"jpeg";return(0,Ge.Fr)(this.domain,this.hash,e)}computePriority(){const e="svg"===this.img.ext,t=3*(this.img.downloads+1);return 1e4*this.sourcePriority*(t-this.img.reports)+(e?1e4:this.img.width+this.img.height)-(this.img.reported?1e6:0)}get sourcePriority(){switch(this.img.source){case Me.SVG_LOGOS:return 7;case Me.GOOGLE_FAV_SRC:case Me.FIREFOX:case Me.CLEARBIT:case Me.HEURISTIC:return 5;case Me.FLATICON:return 4;case Me.SCREENSHOT:return 3;case Me.WIKI:case Me.USER:return 2;default:return 1}}async reportImage(e=Fe.DOWN_VOTE){return(0,P.J8)("pub_img/report",{},{domain:this.domain,hash:this.hash,reportType:e})}titleDetails(){return`\n${this.img.name}\n${(0,u.tr)("image_file_size")}: ${this.img.size.toLocaleString()} B\n${(0,u.tr)("create_date")}: ${new Date(this.img.create_date).toLocaleDateString()}`.trimStart()}static async fetchList(e){if(!e)return[];return(await(0,P.B8)(await(0,H.M3)()?"pub_img/get":"pub_img/:domain",{domain:e})).map((t=>new We(t,e))).sort((0,G.s)("priority",!1))}}class ze{pageSource;pageURL;DOM;constructor(e,t){this.pageSource=e,this.pageURL=t,this.DOM=(new self.DOMParser).parseFromString(this.pageSource,"text/html")}}var Ye=a(3503),Xe=a.n(Ye);class Ve extends ze{pageSource;pageURL;constructor(e,t){super(e,t),this.pageSource=e,this.pageURL=t}async extract(){const e=Array.from(this.DOM.querySelectorAll('[data-testid*="logo"] svg, a svg'),(async e=>{try{e.hasAttribute("xmlns")||e.setAttribute("xmlns","http://www.w3.org/2000/svg");const t=(new XMLSerializer).serializeToString(e);if(/(xlink:)?href="(\/\/|http)/.test(t))return;const a=new Blob([t],{type:"image/svg+xml"}),i=(e.querySelector("image")?1:1e6)+a.size;return{blob:a,priority:i,hash:Xe()(t),ext:"svg"}}catch(e){}}));return(await Promise.all(e)).filter(m.zz)}}var je=a(9598),Ke=a(2221),qe=a(3660);const Qe=e=>e[0]?.result;var Ze=a(7632);class Je extends ze{pageSource;pageURL;constructor(e,t){super(e,t),this.pageSource=e,this.pageURL=t}async extract(){const e=`head > link[rel*="icon"],\nhead > link[rel*="image"],\nhead > meta[property="og:image"],\n${["id","alt","title","data-testid","class","src"].flatMap((e=>["logo","icon","brand","image"].map((t=>`img[${e}*="${t}"]`)))).join(", ")}`,t=this.DOM.querySelector("base")?.getAttribute("href")||"",a=Array.from(this.DOM.querySelectorAll(e)).slice(0,100).map((async e=>{try{const i=e.getAttribute("href")||e.getAttribute("src")||e.getAttribute("content");if(!i)return;const l=i.startsWith("http")?i:new URL(t+i,this.pageURL).href,s=await fetch(l),r=await s.clone().blob(),o=(a=r.type,(new RegExp("image/\\w+").exec(a)||[]).map((e=>e.substring(6)))[0]);if(!o)return;const n=Xe()(new Uint8Array(await r.arrayBuffer())),d=await(0,Ze.m)(l);if(d.width<128&&"svg"!==o)return;const c=r.type.startsWith("image/svg+xml")?1e6+r.size:d.width+d.height;return{blob:r,priority:c,hash:n,ext:o,width:d.width,height:d.height}}catch(e){}var a}));return(await Promise.all(a)).filter(m.zz)}}class et extends We{img;domain;constructor(e,t){super(e,t),this.img=e,this.domain=t}computeSrc(){return URL.createObjectURL(this.img.blob)}static async findLogosOnPage(e){const{html:t,origin:a}=await async function(e){const t="fetch-page-html",a=()=>document.querySelector(`iframe[name="${t}"]`)?.remove();try{a();const i=await De.d6;await(0,we.w)(i);const l=await new Promise((a=>{(0,m.BK)(5e3).then((()=>a("iframe timeout"))),document.body.appendChild((0,je.z)("iframe",{name:t,src:e,referrerpolicy:"no-referrer",sandbox:(0,Te.jM)(e),style:(0,Te.v0)((0,Te.fd)(Ke.lw,800,600),1),handlers:{onload:a,onerror:a}}))})),s=await(0,qe.F)(t,i);l&&await(0,m.BK)(1e3);const r=await browser.scripting.executeScript({target:{tabId:i,frameIds:[s]},func:()=>({origin:window.location.origin,html:document.documentElement.outerHTML})}).then(Qe);if(r)return r}catch(e){}finally{a()}}(e)||{html:"",origin:""};return t?[...await new Ve(t,a).extract(),...await new Je(t,a).extract()]:[]}static async fetchList(e){const t=new URL(e),a=t.hostname,i=t.pathname.length>1,l=await this.findLogosOnPage(e);l.length<=3&&i&&l.push(...await this.findLogosOnPage(`http://${a}`));return(0,g.vC)(l,"hash").map((e=>({size:e.blob.size,blob:e.blob,hash:e.hash,priority:e.priority,ext:e.ext,width:e.width||0,height:e.height||0,name:"",create_date:(new Date).toISOString(),position:0,source:0,downloads:0,reports:0}))).sort((0,G.s)("priority",!1)).map((e=>new et(e,a)))}async reportImage(){return{result:0}}}var tt=a(9044),at=a(1265);const it=r.default.extend({name:"PublicLibrary",props:{editDialController:{type:Object,required:!0}},data(){return{dial:this.editDialController.dial,state:"init",webState:"init",webLoadProgress:0,publicThumbnails:[],webThumbnails:[],publicImageCountLimit:44,selectedHash:(this.editDialController.dial.thumbnail?.value||[]).at(1)||"",previewExecutor:(0,B.U)(),isLoggedIn:!1,beingReported:!1}},async created(){await this.loadPublicLibrary(),this.isLoggedIn=await(0,H.M3)()},computed:{selectedItem(){return this.publicThumbnails.find((e=>e.hash===this.selectedHash))},selectedWebItem(){return this.webThumbnails.find((e=>e.hash===this.selectedHash))}},methods:{tr:u.tr,async loadWebImages(){this.simulateWebLoading(11),this.webState="loading",this.webThumbnails=(await et.fetchList(this.editDialController.httpURL).finally((()=>this.webState="loaded"))).filter((e=>!this.publicThumbnails.find((t=>t.hash===e.hash)))),this.$refs.webImages.focus()},async simulateWebLoading(e){for(let t=0;t<100;t++)this.webLoadProgress=t,await(0,m.BK)(10*e)},async loadPublicLibrary(){this.state="loading",this.publicThumbnails=await We.fetchList(this.editDialController.domain).finally((()=>this.state="loaded")),await(0,m.BK)(),this.$refs.publicLibraryImages.focus(),!this.selectedHash&&this.publicThumbnails.length?this.selectImage(this.publicThumbnails[0],"public"):this.scrollSelectedIntoView()},switchImage(e,t){if("Enter"===e.key)return this.$emit("saveChanges");const a="public"===t?this.publicThumbnails:this.webThumbnails,i=a.findIndex((e=>e.hash===this.selectedHash)),l=(0,tt.k)(".public_previews .public_item"),s=(0,at.E)(e,a,i,l);this.selectImage(s,t)},selectImage(e,t){if(!e)return;const a="public"===t;this.selectedHash=e.hash,this.editDialController.selectedImage=e,this.showPreview(e),this.scrollSelectedIntoView(a?this.$refs.publicLibraryImages:this.$refs.webImages)},scrollSelectedIntoView(e=this.$refs.publicLibraryImages){e.querySelector(`[data-hash="${this.selectedHash}"]`)?.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},showPreview(e,t=!1,a=!1){e&&this.previewExecutor((()=>{this.dial.thumbnail.position=e.img.position,this.dial.visual.padding=e.img.position===p.X.CENTER?Pe.rM.get():0,this.editDialController.previewDial(e.src)}),a?200:0)},async reportImage(e){this.beingReported=!0,r.default.set(e.img,"reported",!e.img.reported),await e.reportImage(),await(0,m.BK)(500),this.beingReported=!1}}});const lt=(0,A.A)(it,Ne,[],!1,null,null,null).exports,st=r.default.extend({name:"tab_thumbnail",components:{public_library:lt},props:{editDialController:{type:Object,required:!0}},data(){const e=[p.O8.AUTO_GENERATED,p.O8.PUBLIC,p.O8.FILE,p.O8.CLIPBOARD,p.O8.URL,p.O8.MAKE_TEXT,p.O8.BLANK];return{dial:this.editDialController.dial,radioOptions:e,selectedRadioIndex:e.indexOf(this.editDialController.dial.thumbnail.type||p.O8.AUTO_GENERATED),THUMBNAIL_TYPE:p.O8}},async created(){this.editDialController.autoLookForLogos&&(this.selectedRadioIndex=this.radioOptions.indexOf(p.O8.PUBLIC))},computed:{dimensionsLabel(){return`${Math.round(this.editDialController.dialWidth)} x ${Math.round(this.editDialController.dialHeight)}`}},watch:{async selectedRadioIndex(e){const t=this.editDialController.dial.thumbnail.type=this.radioOptions[e];t===p.O8.PUBLIC?this.centerThumbnail():t===p.O8.AUTO_GENERATED&&(this.dial.thumbnail.position=p.X.FULL_WIDTH,this.dial.visual.padding=0,await this.editDialController.previewDial(""))}},methods:{tr:u.tr,imageLoaded(e){this.editDialController.thumbnailBase64=URL.createObjectURL(e),this.centerThumbnail(),this.editDialController.previewDial()},async makeText(){this.editDialController.thumbnailBase64=await $e(this.editDialController.dialName),this.centerThumbnail(),this.editDialController.previewDial()},centerThumbnail(){this.dial.thumbnail.position=p.X.CENTER,this.dial.visual.padding=Pe.rM.get()},async onRadioChange(e){}},activated(){(0,X.Q)(this.$root.$el,{type:"changeTransparency",isTransparent:!0})}});const rt=(0,A.A)(st,Se,[],!1,null,"5b5354e1",null).exports;var ot=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-card",{staticStyle:{width:"100%"}},[t("v-card-text",[t("v-row",[t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-select",{staticClass:"mb-3",attrs:{label:e.tr("ds_open_dial_in"),outlined:"",items:e.openDialInItems,"hide-details":""},model:{value:e.dial.settings.OPEN_DIAL_IN,callback:t=>{e.$set(e.dial.settings,"OPEN_DIAL_IN",t)},expression:"dial.settings.OPEN_DIAL_IN"}}),e._v(" "),e.env.$IS_FIREFOX?t("select_container",{model:{value:e.dial.settings.OPEN_IN_CONTAINER,callback:t=>{e.$set(e.dial.settings,"OPEN_IN_CONTAINER",t)},expression:"dial.settings.OPEN_IN_CONTAINER"}}):e._e(),e._v(" "),t("custom_checkbox",{attrs:{name:"ds_fetch_new_name"},model:{value:e.dial.settings.FETCH_NEW_NAME,callback:t=>{e.$set(e.dial.settings,"FETCH_NEW_NAME",t)},expression:"dial.settings.FETCH_NEW_NAME"}}),e._v(" "),t("custom_checkbox",{attrs:{name:"ds_no_script"},model:{value:e.dial.settings.NO_SCRIPT,callback:t=>{e.$set(e.dial.settings,"NO_SCRIPT",t)},expression:"dial.settings.NO_SCRIPT"}})],1)],1)],1)],1)};ot._withStripped=!0;const nt=r.default.extend({name:"tab_settings",components:{custom_checkbox:me.A,select_container:re.A},props:{editDialController:{type:Object,required:!0}},data(){return{env:se._,dial:this.editDialController.dial,openDialInItems:(0,O._P)(p.TI).map((([e,t])=>({text:(0,u.tr)(`ds_open_dial_in_${t}`),value:t})))}},methods:{tr:u.tr}});const dt=(0,A.A)(nt,ot,[],!1,null,null,null).exports;var ct=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-card",{staticStyle:{width:"100%"}},[t("v-card-text",[t("v-row",[t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-row",{staticClass:"append_separator",attrs:{dense:""}},[t("v-col",{attrs:{cols:"12"}},[t("div",{directives:[{name:"tr",rawName:"v-tr",value:"ed_position",expression:"'ed_position'"}]}),e._v(" "),t("v-radio-group",{staticClass:"mt-0 radio-group-grid",attrs:{"hide-details":""},on:{change:t=>e.previewThumbnail()},model:{value:e.dial.thumbnail.position,callback:t=>{e.$set(e.dial.thumbnail,"position",t)},expression:"dial.thumbnail.position"}},e._l(e.thumbnailPositions,(e=>t("v-radio",{key:e.value,attrs:{value:e.value,label:e.text}}))),1)],1),e._v(" "),t("v-col",{attrs:{cols:"12"}},[t("v-slider",{attrs:{label:e.tr("thumbnail_padding"),min:"0",max:"16",step:"1","hide-details":"","thumb-label":""},on:{input:t=>{e.previewThumbnail(),e.updateLastValue("padding",t)}},model:{value:e.dial.visual.padding,callback:t=>{e.$set(e.dial.visual,"padding",t)},expression:"dial.visual.padding"}})],1)],1),e._v(" "),t("v-row",{staticClass:"append_separator",attrs:{align:"center",dense:""}},[t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-checkbox",{staticClass:"mx-2 mt-0",attrs:{"hide-details":"",label:e.tr("eg_background_color")},on:{change:t=>{!t&&(e.dial.thumbnail.background=""),e.previewThumbnail()}},model:{value:e.editDialController.hasBackgroundColor,callback:t=>{e.$set(e.editDialController,"hasBackgroundColor",t)},expression:"editDialController.hasBackgroundColor"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"6"},on:{click:t=>{e.editDialController.hasBackgroundColor=!0}}},[e.isLoaded?t("color_picker_input",{attrs:{"default-value":e.defaultDialBackground,disabled:!e.editDialController.hasBackgroundColor},on:{opened:t=>{e.editDialController.hasBackgroundColor=!0},input:t=>{e.previewThumbnail(),e.updateLastValue("background",t)}},model:{value:e.dial.thumbnail.background,callback:t=>{e.$set(e.dial.thumbnail,"background",t)},expression:"dial.thumbnail.background"}}):e._e()],1)],1),e._v(" "),t("v-row",{staticClass:"append_separator",attrs:{align:"center",dense:""}},[t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-checkbox",{staticClass:"mx-2 mt-0",attrs:{"hide-details":"",label:e.tr("eg_title_text_color")},on:{change:t=>{!t&&(e.dial.visual.titleColor=""),e.previewThumbnail()}},model:{value:e.editDialController.hasTitleColor,callback:t=>{e.$set(e.editDialController,"hasTitleColor",t)},expression:"editDialController.hasTitleColor"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"6"},on:{click:t=>{e.editDialController.hasTitleColor=!0}}},[e.isLoaded?t("color_picker_input",{attrs:{"default-value":e.defaultTitleColor,disabled:!e.editDialController.hasTitleColor},on:{opened:t=>{e.editDialController.hasTitleColor=!0},input:t=>{e.previewThumbnail(),e.updateLastValue("title",t)}},model:{value:e.dial.visual.titleColor,callback:t=>{e.$set(e.dial.visual,"titleColor",t)},expression:"dial.visual.titleColor"}}):e._e()],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-checkbox",{staticClass:"mx-2 mt-0",attrs:{"hide-details":"",label:e.tr("eg_title_background_color")},on:{change:t=>{!t&&(e.dial.visual.titleBackground=""),e.previewThumbnail()}},model:{value:e.editDialController.hasTitleBackground,callback:t=>{e.$set(e.editDialController,"hasTitleBackground",t)},expression:"editDialController.hasTitleBackground"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"6"},on:{click:t=>{e.editDialController.hasTitleBackground=!0}}},[e.isLoaded?t("color_picker_input",{attrs:{"default-value":e.defaultTitleBackground,disabled:!e.editDialController.hasTitleBackground},on:{opened:t=>{e.editDialController.hasTitleBackground=!0},input:t=>{e.previewThumbnail(),e.updateLastValue("titleBackground",t)}},model:{value:e.dial.visual.titleBackground,callback:t=>{e.$set(e.dial.visual,"titleBackground",t)},expression:"dial.visual.titleBackground"}}):e._e()],1)],1),e._v(" "),t("v-row",{attrs:{dense:""}},[t("v-col",{attrs:{cols:"12"}},[t("v-checkbox",{staticClass:"mx-2 mt-0",attrs:{"hide-details":"",label:e.tr("hide_dial_title")},on:{change:t=>e.previewThumbnail()},model:{value:e.dial.visual.noTitle,callback:t=>{e.$set(e.dial.visual,"noTitle",t)},expression:"dial.visual.noTitle"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12"}},[t("v-checkbox",{staticClass:"mx-2 mt-0",attrs:{"hide-details":"",label:e.tr("hide_dial_favicon")},on:{change:t=>e.previewThumbnail()},model:{value:e.dial.visual.noIcon,callback:t=>{e.$set(e.dial.visual,"noIcon",t)},expression:"dial.visual.noIcon"}})],1)],1)],1)],1)],1)],1)};ct._withStripped=!0;const ut=r.default.extend({name:"tab_thumbnail",components:{custom_checkbox:me.A,select_container:re.A,color_picker_input:_e.A},props:{editDialController:{type:Object,required:!0}},data(){return{isLoaded:!1,dial:this.editDialController.dial,defaultTitleBackground:"#FFFFFFFF",defaultDialBackground:"#FFFFFFFF",defaultTitleColor:"#FFFFFFFF",thumbnailPositions:(0,O.w5)(p.X).map((e=>({value:e,text:(0,u.tr)(`ed_thumbnail_position_${e}`)})))}},async created(){this.defaultTitleBackground=await Pe.xe.get()||"#00317EFF",this.defaultDialBackground=await K.eX.get()||"#FFFFFFFF",this.defaultTitleColor=await Pe.Cw.get()||"#FFFFFFFF",this.isLoaded=!0},methods:{tr:u.tr,previewThumbnail(){this.editDialController.previewDial()},updateLastValue(e,t){if("padding"===e)this.dial.thumbnail.position===p.X.CENTER&&Pe.rM.set(parseInt(t));else if(t)switch(e){case"title":Pe.Cw.set(t);break;case"titleBackground":Pe.xe.set(t);break;case"background":K.eX.set(t)}}},mounted(){(0,X.Q)(this.$root.$el,{type:"changeTransparency",isTransparent:!0})}});const pt=(0,A.A)(ut,ct,[],!1,null,"d2b11eb6",null).exports;var ht=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-card",{staticStyle:{width:"100%"}},[t("v-card-text",[t("v-row",[t("v-col",{attrs:{cols:"12",md:"6"}},[t("v-radio-group",{staticClass:"mt-0",attrs:{label:e.tro("ed_tag",{column:!0})},on:{change:t=>e.previewThumbnail()},model:{value:e.dial.settings.TAG_ID,callback:t=>{e.$set(e.dial.settings,"TAG_ID",t)},expression:"dial.settings.TAG_ID"}},[t("draggable",e._b({staticClass:"list-group",attrs:{handle:".is_draggable",tag:"div"},on:{start:t=>{e.drag=!0},end:t=>{e.drag=!1},update:e.updateTagsOrder},model:{value:e.userTags,callback:t=>{e.userTags=t},expression:"userTags"}},"draggable",e.dragOptions,!1),e._l(e.userTags,(a=>t("v-radio",{key:a.id,class:0===a.id?"":"is_draggable",attrs:{value:a.id,label:a.name},scopedSlots:e._u([{key:"label",fn:()=>[t("img",{staticClass:"mx-2 tag_icon",style:a.getIconStyle(),attrs:{src:e.emptyImg}}),e._v(" "),t("label",{staticClass:"tag_name",on:{dblclick:t=>{0!==a.id&&e.editTag(a)}}},[e._v(e._s(a.name))]),e._v(" "),0!==a.id?t("v-btn",{staticClass:"mx-2 ml-auto",attrs:{fab:"","x-small":"",elevation:"2"},on:{click:t=>(t.stopPropagation(),e.editTag(a))}},[t("v-icon",{staticStyle:{opacity:"0.7"}},[e._v("fa-pen")])],1):e._e(),e._v(" "),0!==a.id?t("v-btn",{staticClass:"mx-2",attrs:{fab:"","x-small":"",elevation:"2"},on:{click:t=>(t.stopPropagation(),e.removeTag(a))}},[t("v-icon",{staticStyle:{opacity:"0.7"}},[e._v("fa-trash-alt")])],1):e._e()],proxy:!0}],null,!0)}))),1)],1),e._v(" "),t("pro_label",{staticClass:"flex mt-2",staticStyle:{width:"min-content"},attrs:{allow:e.userTags.length<3,"offset-left":"4px"}},[t("v-btn",{attrs:{color:"primary"},on:{click:e.addTag}},[t("v-icon",{attrs:{left:""}},[e._v("fa-plus-circle")]),t("span",{directives:[{name:"tr",rawName:"v-tr",value:"tag_add",expression:"'tag_add'"}]})],1)],1)],1)],1)],1)],1)};ht._withStripped=!0;var vt=a(1589),mt=a(5574),_t=a(984);var gt=a(4268),bt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-card",[t("v-card-title",{staticClass:"primary white--text"},[e._v(e._s(e.tr("tag_edit")+': "'+e.name+'"'))]),e._v(" "),t("v-container",{attrs:{"grid-list-sm":""}},[t("v-row",[t("v-col",{attrs:{cols:"12",md:"6"}},[t("v-text-field",{attrs:{"prepend-icon":"fa-pen",label:e.tr("tag_name"),type:"text",autofocus:"","hide-details":""},on:{focus:e=>e.target.select(),keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveChanges.apply(null,arguments)}},model:{value:e.name,callback:t=>{e.name=t},expression:"name"}})],1),e._v(" "),t("v-col",{directives:[{name:"tr",rawName:"v-tr:title",value:"tag_color",expression:"'tag_color'",arg:"title"}],attrs:{cols:"12",md:"6"}},[t("color_picker_input",{model:{value:e.color,callback:t=>{e.color=t},expression:"color"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",md:"12"}},[t("div",{staticClass:"tag_icons"},e._l(e.tags,(a=>t("div",{key:a.id,class:"tag_icon_container"+(a.icon===e.icon?" selected":""),on:{click:t=>{e.icon=a.icon}}},[t("img",{staticClass:"tag_icon",style:e.computeIconStyle(a),attrs:{src:e.emptyImg}})]))),0)])],1)],1),e._v(" "),t("v-card-actions",[t("v-btn",{attrs:{color:"primary"},on:{click:e.saveChanges}},[t("v-icon",{staticClass:"action_icon"},[e._v("fa-circle-check")]),e._v(" "),t("span",{directives:[{name:"tr",rawName:"v-tr",value:"btn_done",expression:"'btn_done'"}]})],1)],1)],1)};bt._withStripped=!0;const ft=r.default.extend({name:"edit_tag",components:{color_picker_input:_e.A},props:{tag:{type:vt.v,required:!0}},data(){return{id:this.tag.id,name:this.tag.name,icon:this.tag.icon,color:this.tag.color,env:se._,emptyImg:k.RO,tags:Array.from({length:vt.v.TOTAL_TAGS},((e,t)=>new vt.v(this.id,this.name,t,this.color)))}},async created(){},computed:{},methods:{tr:u.tr,computeIconStyle(e){return new vt.v(e.id,this.name,e.icon,this.color).getIconStyle()},async saveChanges(){this.$emit("yes",new vt.v(this.id,this.name,this.icon,this.color))},async close(){}}});const yt=(0,A.A)(ft,bt,[],!1,null,"f8c23a6a",null).exports;var Ct=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-card",[t("v-card-title",{staticClass:"primary white--text"},[e._v(e._s(e.title))]),e._v(" "),t("v-card-text",{staticClass:"dialog_body pa-3"},[e._v(e._s(e.body))]),e._v(" "),t("v-card-actions",[e.yesText?t("v-btn",{attrs:{color:"primary"},on:{click:e.onYes}},[e.yesIcon?t("v-icon",{staticClass:"action_icon"},[e._v(e._s(e.yesIcon))]):e._e(),e._v(" "),t("span",{domProps:{textContent:e._s(e.yesText)}})],1):e._e(),e._v(" "),e.noText?t("v-btn",{attrs:{color:""},on:{click:e.onNo}},[e.noIcon?t("v-icon",{staticClass:"action_icon"},[e._v(e._s(e.noIcon))]):e._e(),e._v(" "),t("span",{domProps:{textContent:e._s(e.noText)}})],1):e._e()],1)],1)};Ct._withStripped=!0;const xt=r.default.extend({name:"message_dialog",components:{},props:{title:{type:String,required:!0},body:{type:[Object,String],required:!0},yesText:String,noText:String,yesIcon:String,noIcon:String},data:()=>({env:se._}),async created(){},computed:{},methods:{tr:u.tr,async onYes(){this.$emit("yes")},async onNo(){this.$emit("no")}}});const wt=(0,A.A)(xt,Ct,[],!1,null,"06ac4432",null).exports;const kt=r.default.extend({name:"tab_thumbnail",components:{draggable:x(),pro_label:b.A,custom_checkbox:me.A,select_container:re.A,color_picker_input:_e.A},props:{editDialController:{type:Object,required:!0}},data(){return{drag:!1,emptyImg:k.RO,dial:this.editDialController.dial,userTags:[]}},async created(){this.updateTags()},computed:{dragOptions:()=>({animation:200,group:"description",ghostClass:"drag_and_drop_ghost"})},methods:{tro:de.e,tr:u.tr,updateTags(){this.userTags=[vt.v.getEmptyTag()].concat(te.M.METADATA.getUserTags())},async updateTagsOrder(){const e=this.userTags.filter((e=>0!==e.id));await te.M.action("updateTags",{tags:e,operation:"reordered"}),this.updateTags()},async addTag(){const e=te.M.METADATA.getUserTags(),t=new vt.v(Math.max(...e.map((e=>e.id)),0)+1,"",(0,mt.R)(vt.v.TOTAL_TAGS),(0,_t.S)((0,mt.R)(360),100,50));await te.M.action("updateTags",{tags:e.concat(t),operation:`${(0,u.tr)("tag_add")} "${t.name}"`}),this.updateTags(),await this.editTag(t)},async editTag(e){const t=await(0,gt.t)(yt,{tag:e}).catch(m.lQ);if(t){const a=te.M.METADATA.getUserTags().map((a=>a.id===e.id?t:a));await te.M.action("updateTags",{tags:a,operation:`${(0,u.tr)("tag_edit")} "${t.name}"`}),this.updateTags()}},async removeTag(e){const t=(await te.M.getVisibleGroups()).flatMap((t=>t.dials.filter((t=>t.settings?.TAG_ID===e.id)).map((e=>t.name+" / "+e.name))));t.length&&await async function(e,t,a={}){return await(0,gt.t)(wt,{title:e,body:t,...a})}((0,u.tr)("tag_delete"),(0,u.tr)("tag_in_use")+"\n"+t.join("\n"),{yesText:(0,u.tr)("tag_delete"),noText:(0,u.tr)("label_close")});const a=te.M.METADATA.getUserTags().filter((t=>t.id!==e.id));await te.M.action("updateTags",{tags:a,operation:`${(0,u.tr)("tag_delete")} "${e.name}"`}),this.updateTags()},previewThumbnail(){this.editDialController.previewDial()}},mounted(){(0,X.Q)(this.$root.$el,{type:"changeTransparency",isTransparent:!0})}});const Tt=(0,A.A)(kt,ht,[],!1,null,"0f14010d",null).exports;var Dt=a(4046),It=a(3331),At=a(3694),Lt=a(3683),St=a(6808),Ot=a(5941),Et=a(4800),Rt=a(3074),$t=a(2806),Pt=a(9501),Nt=a(6419),Bt=a(8873),Ut=a(2742),Mt=a(1416),Ft=a(5229);var Gt=a(5444),Ht=a(7683),Wt=a(1360),zt=a(2447),Yt=a(1641);var Xt=a(7700);class Vt{editDialOptions;originalDial;dial;dialId;groupId;isDragAndDrop;isEmptyDialSetup;dialWidth;dialHeight;DATA_LAST_RELOAD_SERVER;groupDialModel;newGroup;hasAutoReload;reloadTime;hasCloudReload;hasTitleColor;hasTitleBackground;hasBackgroundColor;thumbnailBase64;previewImageSrc;loadedImageFileInfo;thumbnailURL;selectedImage;isLoggedIn;uploadToPublicLibrary;canUploadToPublicLibrary(){return this.selectedImage instanceof et&&this.selectedImage.supportedFormat&&this.isLoggedIn}autoLookForLogos;hasCropScale;defaultCrop;isCropChanged(e){return this.hasCropScale?!(0,Et.a)(e.crop,this.originalDial.crop):!!this.originalDial.crop}get URL(){return this.dial.type===p.kh.GROUP&&this.groupDialModel&&this.dial.url?this.dial.url:(0,Lt.d)(this.dial.url?.trim()||Ee.pf)}get httpURL(){const e=this.URL;return e.startsWith("http")?e:""}get domain(){return e=this.URL,e=(0,Ft.I)(e||""),(0,q.Z)(e)?"gl.fastaddons.com":(0,w.lX)(e,!0);var e}get dialName(){return this.dial.name||(0,w.QV)(this.URL)}isNewName(e){return e.name!==this.originalDial.name}isNewURL(e){return e.url!==this.originalDial.url}isNewDomain(e){return(0,Gt.N)(e.url)!==(0,Gt.N)(this.originalDial.url)||e.url&&!this.originalDial.url}constructor(e,t){this.editDialOptions=e,this.DATA_LAST_RELOAD_SERVER=new zt.e("_lastReloadServer",(()=>"de")),this.newGroup={name:"",columns:St.wh,rows:St.YK},this.thumbnailBase64="",this.previewImageSrc="",this.loadedImageFileInfo="",this.thumbnailURL="",this.selectedImage=null,this.isLoggedIn=!1,this.uploadToPublicLibrary=!0,this.autoLookForLogos=!1,(0,H.M3)().then((e=>this.isLoggedIn=e));const{dialWidth:a,dialHeight:i,dial:l}=t;this.dialWidth=a,this.dialHeight=i;const{id:s,dragAndDropTitle:r,dragAndDropUrl:o,isGroupDrop:n,groupId:d}=e;this.groupId=d,this.dialId=s,this.originalDial=l.clone(),this.isDragAndDrop=!!o,this.isEmptyDialSetup=!this.isDragAndDrop&&this.originalDial.isEmptyDial(),this.defaultCrop=(0,Te.fd)(Ke.lw,a,i),Object.freeze(this.defaultCrop);const c=this.originalDial.clone();this.hasAutoReload=!!c.reload,this.hasCloudReload=!!c.reload?.cloud,this.hasCropScale=!!c.crop,this.hasBackgroundColor=!!c.thumbnail?.background,this.hasTitleColor=!!c.visual?.titleColor,this.hasTitleBackground=!!c.visual?.titleBackground,this.dial=Object.assign(c,{url:o||c.url,distraction:c.distraction,settings:c.settings||{OPEN_DIAL_IN:0,OPEN_IN_CONTAINER:"",FETCH_NEW_NAME:!1,NO_SCRIPT:!1,TAG_ID:0},visual:{noTitle:!!c.visual?.noTitle,noIcon:!!c.visual?.noIcon,padding:c.visual?.padding||0,titleColor:c.visual?.titleColor||"",titleBackground:c.visual?.titleBackground||""},providers:c.providers||[{type:v.Lo.DUCK_DUCK_GO}],multi:c.multi||{links:[{name:c.name||"",url:c.url||""},{name:"",url:""},{name:"",url:""}],titleAction:p.C2.openAll,linkAction:p.Q0.openLink},session:c.session||{},topSites:c.topSites||{},weather:c.weather||{theme:N.b.default,current:!0,forecastDays:5,city:"",lat:0,lon:0,units:N.z.metric},timer:c.timer||{timers:[{type:p.$C.countdown,value:"00:03"},{type:p.$C.alarm,value:"17:00"},{type:p.$C.stopwatch,value:""}]},name:r||c.name||"",thumbnail:{type:c.thumbnail?.type??p.O8.AUTO_GENERATED,value:c.thumbnail?.value??0,position:c.thumbnail?.position??p.X.FULL_WIDTH,background:c.thumbnail?.background},reload:Object.assign({type:p.kw.ReloadEvery,delay:0,value:21600,method:ve.P.default,cloud:{server:this.DATA_LAST_RELOAD_SERVER.get()}},c.reload),crop:c.crop||(0,m.WR)(this.defaultCrop),text:{CLICK_TO_CLIPBOARD:c.text?.CLICK_TO_CLIPBOARD||!1,value:c.text?.value||""},live:c.live||{hideScrollbars:!1,noInteraction:!1},note:c.note||"",type:this.isDragAndDrop?n?p.kh.GROUP:p.kh.URL:c.type||p.kh.URL}),this.dial.multi.sortBy||=p.oB.manual,this.groupDialModel=c.type===p.kh.GROUP?c.url:"",this.thumbnailURL=c.thumbnail?.type===p.O8.URL?c.thumbnail.value:"";const[u,h,_]=(0,At.Xm)(c.reload.value);this.reloadTime={hours:u,minutes:h}}computeDialNumber(){return(0,It.d)(this.groupId)+(0,ae.om)(this.dialId)+1}discardChanges(){(0,Rt.$8)()}async serializeDial(){const e=(0,m.WR)(this.dial),t=(0,m.WR)(this.originalDial),a=e.index;if(this.hasCropScale||delete e.crop,this.hasAutoReload){this.hasCloudReload||delete e.reload.cloud;const t=(0,At.kG)(this.reloadTime.hours,this.reloadTime.minutes);e.reload.value=0===t&&e.reload?.type===p.kw.ReloadEvery?60:t}else delete e.reload;switch(Object.values(e.settings).find(m.zz)||delete e.settings,this.hasTitleColor||delete e.visual.titleColor,this.hasTitleBackground||delete e.visual.titleBackground,this.hasBackgroundColor||delete e.thumbnail.background,e.thumbnail.type){case p.O8.AUTO_GENERATED:e.thumbnail.value=0,e.thumbnail.position!==p.X.FULL_WIDTH||e.thumbnail.background||delete e.thumbnail;break;case p.O8.CLIPBOARD:e.thumbnail.type=p.O8.FILE;case p.O8.FILE:e.thumbnail.value="";break;case p.O8.BLANK:case p.O8.MAKE_TEXT:e.thumbnail.value=0;break;case p.O8.URL:e.thumbnail.value=this.thumbnailURL;break;case p.O8.PUBLIC:this.selectedImage instanceof et?(e.thumbnail.type=p.O8.FILE,e.thumbnail.value="",this.thumbnailBase64=await(0,Xt.G)(this.selectedImage.img.blob)):this.selectedImage instanceof We?e.thumbnail.value=[this.selectedImage.domain,this.selectedImage.hash,this.selectedImage.img.ext]:t.thumbnail?.type!==p.O8.PUBLIC&&(e.thumbnail=t.thumbnail,e.visual.padding=t.visual?.padding)}await(0,H.FJ)()||[p.kh.LIVE,p.kh.WEATHER,p.kh.MULTI].includes(e.type)&&(e.type=p.kh.URL);const i={created:this.isEmptyDialSetup||!e.created?(0,At.Sy)():e.created,note:e.note?.trim()||void 0,size:e.size,distraction:e.distraction},l=(!this.isNewName(e)&&this.isNewDomain(e)?"":e.name)||(0,w.QV)(this.URL);switch(e.type){case p.kh.URL:return Nt.O.fromUserInput(a,this.groupId,this.URL,{...i,name:l,thumbnail:e.thumbnail,crop:e.crop,reload:e.reload,visual:e.visual,settings:e.settings});case p.kh.LIVE:return Ut.r.fromUserInput(a,this.groupId,this.URL,e.live,{...i,name:l,live:e.live,thumbnail:e.thumbnail,crop:e.crop,reload:e.reload,visual:e.visual,settings:e.settings});case p.kh.GROUP:const t=this.groupDialModel?te.M.groupById(parseInt(this.groupDialModel.slice(1))):(0,St.v3)(te.M.getNewGroupId(),{name:this.newGroup.name,sourceGroup:D.e.getCurrentGroup(),dimensions:{rows:this.newGroup.rows,cols:this.newGroup.columns}}),s=this.groupDialModel?void 0:()=>te.M.action("addGroup",{newGroup:t});return Pt.O.fromUserInput(a,this.groupId,t.id,s,{...i,name:e.name||t.name,thumbnail:e.thumbnail,crop:e.crop,reload:e.reload,visual:e.visual,settings:e.settings});case p.kh.SEARCH:return Mt.t.fromUserInput(a,this.groupId,e.providers,{...i,name:e.name,thumbnail:e.thumbnail,visual:e.visual,settings:e.settings});case p.kh.MULTI:return $t.U.fromUserInput(a,this.groupId,e.multi,{...i,name:e.name,thumbnail:e.thumbnail,visual:e.visual,settings:e.settings});case p.kh.SESSION:return ie.F.fromUserInput(a,this.groupId,e.session,{...i,name:e.name||(0,u.tr)("recently_closed_dial"),thumbnail:e.thumbnail,visual:e.visual,settings:e.settings});case p.kh.TOP_SITES:return le.O.fromUserInput(a,this.groupId,e.topSites,{...i,name:e.name||(0,u.tr)("ed_tab_top_sites"),thumbnail:e.thumbnail,visual:e.visual,settings:e.settings});case p.kh.TIMER:return Ht.W.fromUserInput(a,this.groupId,e.timer,{...i,name:e.name||(0,u.tr)("timer_dial"),thumbnail:e.thumbnail,visual:e.visual,settings:e.settings});case p.kh.WEATHER:return Wt.r.fromUserInput(a,this.groupId,e.weather,{...i,name:e.name||e.weather?.city||(0,de.e)("ed_weather_dial",{column:!1}),thumbnail:e.thumbnail,visual:e.visual,settings:e.settings});case p.kh.TEXT:return Bt.i.fromUserInput(a,this.groupId,e.text,{...i,name:e.name,thumbnail:e.thumbnail,visual:e.visual});default:throw"unknown dial"}}async saveDial(){const e=await this.serializeDial(),t=this.isNewURL(e);switch((0,ne.J)(e.reload?.cloud?.server,(e=>this.DATA_LAST_RELOAD_SERVER.set(e))),await e.preSaveAction(this.groupId),await te.M.action("replaceDial",{dial:e,groupId:this.groupId,gridPlacement:this.editDialOptions.gridPlacement}),await e.postSaveAction(this.groupId),e.thumbnail?.type??p.O8.AUTO_GENERATED){case p.O8.BLANK:break;case p.O8.PUBLIC:(0,Oe._z)({type:"synchronize_thumbnails"});break;case p.O8.AUTO_GENERATED:this.isNewDomain(e)||this.isCropChanged(e)?(0,Ot.w)().then((t=>t.reloadDial(e,this.groupId))):t&&this.originalDial.url&&Dt.h.updateDB(this.groupId,this.originalDial.url,this.groupId,e.url);break;case p.O8.URL:case p.O8.FILE:case p.O8.CLIPBOARD:case p.O8.MAKE_TEXT:default:e.canHaveThumbnail()&&(this.thumbnailBase64?(await(0,Oe._z)({type:"save_db_image",notify:!0,groupId:this.groupId,url:e.url,img:this.thumbnailBase64}).catch(m.lQ),this.uploadToPublicLibrary&&this.canUploadToPublicLibrary()&&(0,Oe._z)({type:"public_upload",groupId:this.groupId,dial:e})):t&&this.originalDial.url&&Dt.h.updateDB(this.groupId,this.originalDial.url,this.groupId,e.url))}}resetCropScale(){return this.dial.crop=(0,m.WR)(this.defaultCrop)}loadImageFromClipboard(e){this.thumbnailBase64=URL.createObjectURL(e),this.dial.thumbnail.position=p.X.CENTER,this.dial.thumbnail.type=p.O8.CLIPBOARD,this.loadedImageFileInfo=`${e.type.replace("image/","")} (${(0,He.z)(e.size)})`,this.previewDial()}async logosLookup(){this.autoLookForLogos=!0}async previewDial(e){void 0!==e&&(this.previewImageSrc=e);const t=await this.serializeDial();await function(e,t){const a=D.e.getCurrentGroup().clone();return a.replaceDial(e,e.index),(0,Yt.Wx)(a,t&&Object.values(t).some(m.zz)?{overrideImagesHash:{[e.url]:t}}:void 0)}(t,{imgBlobURL:e||this.thumbnailBase64||this.previewImageSrc})}}var jt=a(7969),Kt=a(3120),qt=a(416);const Qt=r.default.extend({name:"editor",props:{editDialOptions:{type:Object,required:!0},ediDialData:{type:Object,required:!0}},components:{draggable_top:Kt.A,tab_general:pe,tab_auto_reload:ye,tab_crop_scale:Le,tab_thumbnail:rt,tab_visual:pt,tab_tags:Tt,tab_settings:dt,dark_theme_switch:d.A},data(){return Ke.KY.addOnChangeListener((()=>this.$forceUpdate())),{editDialController:new Vt(this.editDialOptions,this.ediDialData),tabs:[{tab:ce.g.General,name:(0,u.tr)("ed_tab_general"),icon:"fa-edit"},{tab:ce.g.Thumbnail,name:(0,u.tr)("ed_tab_thumbnail"),icon:"far fa-image"},{tab:ce.g.Visual,name:(0,u.tr)("ed_tab_visual"),icon:"fa-palette"},{tab:ce.g.Tags,name:(0,u.tr)("ed_tab_tags"),icon:"fa-tags"},{tab:ce.g.AutoReload,name:(0,u.tr)("ed_auto_reload"),icon:"fa-redo-alt"},{tab:ce.g.CropScale,name:(0,u.tr)("ed_crop_scale"),icon:"fa-crop-alt"},{tab:ce.g.Settings,name:(0,u.tr)("ed_tab_settings"),icon:"fa-cogs"}],drag:!1,isSaving:!1,ActiveTab:ce.g,activeTab:this.editDialOptions.targetTab||ce.g.General,drawer:!0,mobileBreakpoint:790,tr:u.tr}},async created(){ee.m0&&(this.mobileBreakpoint=1280),this.$root.$el.closest("[data-modal-overlay]").addEventListener("paste",(e=>{(0,ne.J)([...e.clipboardData?.items||[]].find((e=>e.type.startsWith("image/")))?.getAsFile(),(e=>{this.activeTab=ce.g.Thumbnail,this.editDialController.loadImageFromClipboard(e)}))})),await Ke.j_,(0,X.Q)(this.$el,{type:"addOnCloseHandler",callback:(0,jt.o)(this,this.discardChanges)})},computed:{OPTIONS:()=>Ke.lw,dialNumber(){return this.editDialController.computeDialNumber()}},watch:{},methods:{async openInNewTab(){(0,n.K)(window.location.href,{active:!0,inNewTab:!0,nextToCurrent:!0})},openTab(e){this.activeTab=e},async saveChanges(){await(0,qt.$)((e=>this.isSaving=e),(()=>this.editDialController.saveDial())),this.closeEditor()},async discardChanges(){this.editDialController.discardChanges(),this.closeEditor()},closeEditor(){(0,X.Q)(this.$el,{type:"removeOnCloseHandler",callback:(0,jt.o)(this,this.discardChanges)}),(0,X.Q)(this.$el,{type:"close"})},maximizeEditor(){(0,X.Q)(this.$el,{type:"maximize"})}}});const Zt=(0,A.A)(Qt,o,[],!1,null,null,null).exports;var Jt=a(6499),ea=a(97);async function ta(e){const{id:t,groupId:a}=e,o=new i.X(`#${t} .border_target { box-shadow: var(--dial-highlight) !important }`);return new Promise((async i=>{const n=(0,Jt.Q)(document.createElement("div"),{width:1e3,height:750,onClose(){o.unloadAll(),h.$destroy(),i()}}),d=te.M.groupById(a),c=e.dial||d.dialById(t),{width:u,height:p}=await(0,l.I)(d,c,!0,1,(0,s.c)()),h=new r.default({el:n.node,vuetify:(await(0,ea.X)())(),render:t=>t(Zt,{props:{editDialOptions:e,ediDialData:{dial:c.clone(),dialWidth:u,dialHeight:p}}})})}))}},9735:(e,t,a)=>{"use strict";a.d(t,{v:()=>r});var i=a(1879),l=a(1962),s=a(4257);async function r(e,t,{animated:a,hideOthers:r,hideOtherPermanent:o,color:n,callbackFn:d}={}){await s.re;const c=a?"dial-highlight-animated":"search-dial-highlight",u=o?"opacity-05":r?"dial-highlight-opacity":"noop";await i.e.activate(e,!0),i.e.getCurrentGroup().dials.filter((e=>e.domId)).forEach((e=>{const a=(0,l.$H)(e.domId),i=a.getAttribute("id")===t;i&&a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),a.classList.add(i?c:u),d?.(a)}))}},4257:(e,t,a)=>{"use strict";a.d(t,{EK:()=>r,RO:()=>o,re:()=>s});var i=a(4323),l=a(744);const[s,r]=(0,i.Mj)(),o=Promise.all([s,l.b])},1940:(e,t,a)=>{"use strict";a.d(t,{X:()=>s});var i=a(7865),l=a(9574);class s{_style=document.createElement("style");injectToBody=(0,l.m)((async()=>{await i.W,document.head?.appendChild(this._style)}));constructor(e){e&&this.loadRule(e)}async loadRule(...e){await this.injectToBody();const t=this._style.sheet;if(t)for(const a of e)t.insertRule(a)}async unloadAll(){await this.injectToBody();const e=this._style.sheet;if(e)for(;e.cssRules.length>0;)e.deleteRule(0)}}},260:(e,t,a)=>{"use strict";a.d(t,{z:()=>l});var i=a(4323);function l(e,t=1){if(!(0,i.Et)(e)||e<0)return"";if(0===e)return"0";const a=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,Math.floor(a))).toFixed(t)} ${["B","KB","MB","GB","TB","PB"][a]}`}},7632:(e,t,a)=>{"use strict";function i(e){return new Promise(((t,a)=>{let i=new Image;i.onload=()=>t({width:i.naturalWidth,height:i.naturalHeight}),i.onerror=()=>t({width:0,height:0}),i.src=e}))}a.d(t,{m:()=>i})},4800:(e,t,a)=>{"use strict";function i(e,t){if(null==e||null==t)return e===t;if(e.constructor!==t.constructor)return!1;if(e instanceof Function)return e===t;if(e instanceof RegExp)return e===t;if(e===t||e.valueOf()===t.valueOf())return!0;if(Array.isArray(e)&&e.length!==t.length)return!1;if(e instanceof Date)return!1;if(!(e instanceof Object&&t instanceof Object))return!1;const a=Object.keys(e);return Object.keys(t).every((e=>-1!==a.indexOf(e)))&&a.every((a=>i(e[a],t[a])))}a.d(t,{a:()=>i})},4268:(e,t,a)=>{"use strict";a.d(t,{t:()=>_});var i=a(5471),l=a(4323),s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("v-dialog",{attrs:{"max-width":e.maxWidth+"px",persistent:e.persistent},on:{"click:outside":t=>{!e.persistent&&e.$emit("close")}},model:{value:e.dialogOpened,callback:t=>{e.dialogOpened=t},expression:"dialogOpened"}},[t("div",{ref:"dialog_container"})])};s._withStripped=!0;const r=i.default.extend({name:"modal",components:{},props:{maxWidth:{type:Number,default:600},persistent:Boolean,component:Function,propsData:Object},data:()=>({dialogOpened:!0}),async mounted(){const e=new(i.default.extend(this.component))({parent:this.$parent,propsData:this.propsData});e.$mount(),this.$refs.dialog_container.appendChild(e.$el),this.$refs.dialog_container.parentElement.addEventListener("keydown",(t=>{"Escape"===t.key&&(t.stopPropagation(),this.persistent||e.$emit("close"))})),e.$on("yes",(e=>{this.$emit("yes",e),this.dialogOpened=!1})),e.$on("no",(()=>{this.$emit("no"),this.dialogOpened=!1})),e.$on("close",(()=>{this.$emit("close"),this.dialogOpened=!1}))},watch:{},methods:{}});var o=a(4486);const n=(0,o.A)(r,s,[],!1,null,"4d9b9ff3",null).exports;var d=a(97),c=function(){var e=this._self._c;this._self._setupProxy;return e("v-app",{staticStyle:{width:"100%",height:"100%"}},[e("v-main",{staticStyle:{width:"100%",height:"100%",padding:"0"}},[e("v-container",{staticStyle:{width:"100%",height:"100%"},attrs:{fluid:""}},[e("div",{staticClass:"modal-div-goes-here"})])],1)],1)};c._withStripped=!0;var u=a(4590),p=a(6346);const h=i.default.extend({name:"main_search_input_settings",props:{},components:{},data:()=>({}),watch:{},async created(){},mounted(){},methods:{tr:u.tr,closeEditor(){(0,p.Q)(this.$el,{type:"close"})}}});const v=(0,o.A)(h,c,[],!1,null,null,null).exports;var m=a(9598);async function _(e,t,{vueParent:a,persistent:s=!1,maxWidth:r=600,onYes:o=l.lQ,onNo:c=l.lQ,onClose:u=l.lQ}={}){const p=i.default.extend(n),h=a||await async function(){const e=(0,m.z)("div",{style:"width: 0; height: 0;",class:"vue_modal_container"},[document.createElement("div")]);return document.body.appendChild(e),new i.default({el:e.firstElementChild,vuetify:(await(0,d.X)())(),render:e=>e(v,{props:{}})})}(),_=new p({parent:h,propsData:{maxWidth:r,component:e,persistent:s,propsData:t}});_.$vuetify.theme.dark=!0,_.$mount();return(document.querySelector("div.v-application[data-app]")||h.$el).appendChild(_.$el),new Promise(((e,t)=>{const i=()=>{_.$el.remove(),_.$destroy(),h!==a&&(h.$destroy(),(h.$el?.parentNode).remove())};_.$on("yes",(t=>{o(t),e(t),i()})),_.$on("no",(()=>{c(),t(),i()})),_.$on("close",(()=>{u(),t(),i()}))}))}}}]);