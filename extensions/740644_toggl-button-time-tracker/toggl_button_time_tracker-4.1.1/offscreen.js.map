{"version":3,"file":"offscreen.js","sources":["../../src/content/offscreen/index.ts"],"sourcesContent":["import Browser from 'webextension-polyfill'\n\nlet tickingAudio: HTMLAudioElement\n\nBrowser.runtime.onMessage.addListener((message, sender, sendResponse) => {\n  if (message.type === 'OFFSCREEN_PLAY_POMODORO_SOUND') {\n    return playSound(message.payload)\n  }\n  if (message.type === 'OFFSCREEN_PLAY_POMODORO_SOUND_STOP') {\n    tickingAudio.pause()\n  }\n})\n\nasync function playSound({ src, volume, audioLength }) {\n  const audio = new Audio(src)\n  audio.volume = Number(volume ?? 50)\n  audio.loop = true\n  if (src.includes('tick-tock')) {\n    tickingAudio = audio\n  }\n  await audio.play()\n  setTimeout(() => {\n    audio.pause()\n    audio.currentTime = 0\n  }, Number(audioLength ?? 1000))\n}\n"],"names":["tickingAudio","Browser","runtime","onMessage","addListener","message","sender","sendResponse","type","playSound","payload","pause","src","volume","audioLength","audio","Audio","Number","loop","includes","play","setTimeout","currentTime"],"mappings":"4FAEA,IAAIA,EAEJC,EAAQC,QAAQC,UAAUC,YAAY,CAACC,EAASC,EAAQC,IAAiB,CACnEF,GAAAA,EAAQG,OAAS,gCACZC,OAAAA,EAAUJ,EAAQK,OAAO,EAE9BL,EAAQG,OAAS,sCACnBR,EAAaW,MAAM,CAEvB,CAAC,EAED,eAAeF,EAAU,CAAEG,IAAAA,EAAKC,OAAAA,EAAQC,YAAAA,CAAY,EAAG,CAC/CC,MAAAA,EAAQ,IAAIC,MAAMJ,CAAG,EACrBC,EAAAA,OAASI,OAAOJ,GAAAA,KAAAA,EAAU,EAAE,EAClCE,EAAMG,KAAO,GACTN,EAAIO,SAAS,WAAW,IACXJ,EAAAA,GAEjB,MAAMA,EAAMK,OACZC,WAAW,IAAM,CACfN,EAAMJ,MAAM,EACZI,EAAMO,YAAc,CACnBL,EAAAA,OAAOH,GAAAA,KAAAA,EAAe,GAAI,CAAC,CAChC"}