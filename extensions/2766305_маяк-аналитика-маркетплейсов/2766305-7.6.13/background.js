(()=>{var Le=Object.create;var ne=Object.defineProperty;var Fe=Object.getOwnPropertyDescriptor;var je=Object.getOwnPropertyNames;var qe=Object.getPrototypeOf,Ke=Object.prototype.hasOwnProperty;var Ne=e=>ne(e,"__esModule",{value:!0});var le=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,i)=>(typeof require!="undefined"?require:t)[i]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var j=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ge=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let y of je(t))!Ke.call(e,y)&&(i||y!=="default")&&ne(e,y,{get:()=>t[y],enumerable:!(s=Fe(t,y))||s.enumerable});return e},fe=(e,t)=>Ge(Ne(ne(e!=null?Le(qe(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var de=j(()=>{});var q=j((V,he)=>{(function(e,t){typeof V=="object"?he.exports=V=t():typeof define=="function"&&define.amd?define([],t):e.CryptoJS=t()})(V,function(){var e=e||function(t,i){var s;if(typeof window!="undefined"&&window.crypto&&(s=window.crypto),typeof self!="undefined"&&self.crypto&&(s=self.crypto),typeof globalThis!="undefined"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window!="undefined"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof global!="undefined"&&global.crypto&&(s=global.crypto),!s&&typeof le=="function")try{s=de()}catch{}var y=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},_=Object.create||function(){function r(){}return function(a){var g;return r.prototype=a,g=new r,r.prototype=null,g}}(),B={},n=B.lib={},x=n.Base=function(){return{extend:function(r){var a=_(this);return r&&a.mixIn(r),(!a.hasOwnProperty("init")||this.init===a.init)&&(a.init=function(){a.$super.init.apply(this,arguments)}),a.init.prototype=a,a.$super=this,a},create:function(){var r=this.extend();return r.init.apply(r,arguments),r},init:function(){},mixIn:function(r){for(var a in r)r.hasOwnProperty(a)&&(this[a]=r[a]);r.hasOwnProperty("toString")&&(this.toString=r.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),u=n.WordArray=x.extend({init:function(r,a){r=this.words=r||[],a!=i?this.sigBytes=a:this.sigBytes=r.length*4},toString:function(r){return(r||v).stringify(this)},concat:function(r){var a=this.words,g=r.words,w=this.sigBytes,A=r.sigBytes;if(this.clamp(),w%4)for(var P=0;P<A;P++){var $=g[P>>>2]>>>24-P%4*8&255;a[w+P>>>2]|=$<<24-(w+P)%4*8}else for(var S=0;S<A;S+=4)a[w+S>>>2]=g[S>>>2];return this.sigBytes+=A,this},clamp:function(){var r=this.words,a=this.sigBytes;r[a>>>2]&=4294967295<<32-a%4*8,r.length=t.ceil(a/4)},clone:function(){var r=x.clone.call(this);return r.words=this.words.slice(0),r},random:function(r){for(var a=[],g=0;g<r;g+=4)a.push(y());return new u.init(a,r)}}),l=B.enc={},v=l.Hex={stringify:function(r){for(var a=r.words,g=r.sigBytes,w=[],A=0;A<g;A++){var P=a[A>>>2]>>>24-A%4*8&255;w.push((P>>>4).toString(16)),w.push((P&15).toString(16))}return w.join("")},parse:function(r){for(var a=r.length,g=[],w=0;w<a;w+=2)g[w>>>3]|=parseInt(r.substr(w,2),16)<<24-w%8*4;return new u.init(g,a/2)}},b=l.Latin1={stringify:function(r){for(var a=r.words,g=r.sigBytes,w=[],A=0;A<g;A++){var P=a[A>>>2]>>>24-A%4*8&255;w.push(String.fromCharCode(P))}return w.join("")},parse:function(r){for(var a=r.length,g=[],w=0;w<a;w++)g[w>>>2]|=(r.charCodeAt(w)&255)<<24-w%4*8;return new u.init(g,a)}},k=l.Utf8={stringify:function(r){try{return decodeURIComponent(escape(b.stringify(r)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(r){return b.parse(unescape(encodeURIComponent(r)))}},C=n.BufferedBlockAlgorithm=x.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(r){typeof r=="string"&&(r=k.parse(r)),this._data.concat(r),this._nDataBytes+=r.sigBytes},_process:function(r){var a,g=this._data,w=g.words,A=g.sigBytes,P=this.blockSize,$=P*4,S=A/$;r?S=t.ceil(S):S=t.max((S|0)-this._minBufferSize,0);var O=S*P,T=t.min(O*4,A);if(O){for(var o=0;o<O;o+=P)this._doProcessBlock(w,o);a=w.splice(0,O),g.sigBytes-=T}return new u.init(a,T)},clone:function(){var r=x.clone.call(this);return r._data=this._data.clone(),r},_minBufferSize:0}),D=n.Hasher=C.extend({cfg:x.extend(),init:function(r){this.cfg=this.cfg.extend(r),this.reset()},reset:function(){C.reset.call(this),this._doReset()},update:function(r){return this._append(r),this._process(),this},finalize:function(r){r&&this._append(r);var a=this._doFinalize();return a},blockSize:512/32,_createHelper:function(r){return function(a,g){return new r.init(g).finalize(a)}},_createHmacHelper:function(r){return function(a,g){return new E.HMAC.init(r,g).finalize(a)}}}),E=B.algo={};return B}(Math);return e})});var pe=j((I,ve)=>{(function(e,t){typeof I=="object"?ve.exports=I=t(q()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(I,function(e){return function(){var t=e,i=t.lib,s=i.WordArray,y=t.enc,_=y.Base64={stringify:function(n){var x=n.words,u=n.sigBytes,l=this._map;n.clamp();for(var v=[],b=0;b<u;b+=3)for(var k=x[b>>>2]>>>24-b%4*8&255,C=x[b+1>>>2]>>>24-(b+1)%4*8&255,D=x[b+2>>>2]>>>24-(b+2)%4*8&255,E=k<<16|C<<8|D,r=0;r<4&&b+r*.75<u;r++)v.push(l.charAt(E>>>6*(3-r)&63));var a=l.charAt(64);if(a)for(;v.length%4;)v.push(a);return v.join("")},parse:function(n){var x=n.length,u=this._map,l=this._reverseMap;if(!l){l=this._reverseMap=[];for(var v=0;v<u.length;v++)l[u.charCodeAt(v)]=v}var b=u.charAt(64);if(b){var k=n.indexOf(b);k!==-1&&(x=k)}return B(n,x,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function B(n,x,u){for(var l=[],v=0,b=0;b<x;b++)if(b%4){var k=u[n.charCodeAt(b-1)]<<b%4*2,C=u[n.charCodeAt(b)]>>>6-b%4*2,D=k|C;l[v>>>2]|=D<<24-v%4*8,v++}return s.create(l,v)}}(),e.enc.Base64})});var ge=j((J,_e)=>{(function(e,t){typeof J=="object"?_e.exports=J=t(q()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(J,function(e){return function(t){var i=e,s=i.lib,y=s.WordArray,_=s.Hasher,B=i.algo,n=[];(function(){for(var k=0;k<64;k++)n[k]=t.abs(t.sin(k+1))*4294967296|0})();var x=B.MD5=_.extend({_doReset:function(){this._hash=new y.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(k,C){for(var D=0;D<16;D++){var E=C+D,r=k[E];k[E]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360}var a=this._hash.words,g=k[C+0],w=k[C+1],A=k[C+2],P=k[C+3],$=k[C+4],S=k[C+5],O=k[C+6],T=k[C+7],o=k[C+8],m=k[C+9],z=k[C+10],p=k[C+11],R=k[C+12],M=k[C+13],H=k[C+14],L=k[C+15],c=a[0],f=a[1],d=a[2],h=a[3];c=u(c,f,d,h,g,7,n[0]),h=u(h,c,f,d,w,12,n[1]),d=u(d,h,c,f,A,17,n[2]),f=u(f,d,h,c,P,22,n[3]),c=u(c,f,d,h,$,7,n[4]),h=u(h,c,f,d,S,12,n[5]),d=u(d,h,c,f,O,17,n[6]),f=u(f,d,h,c,T,22,n[7]),c=u(c,f,d,h,o,7,n[8]),h=u(h,c,f,d,m,12,n[9]),d=u(d,h,c,f,z,17,n[10]),f=u(f,d,h,c,p,22,n[11]),c=u(c,f,d,h,R,7,n[12]),h=u(h,c,f,d,M,12,n[13]),d=u(d,h,c,f,H,17,n[14]),f=u(f,d,h,c,L,22,n[15]),c=l(c,f,d,h,w,5,n[16]),h=l(h,c,f,d,O,9,n[17]),d=l(d,h,c,f,p,14,n[18]),f=l(f,d,h,c,g,20,n[19]),c=l(c,f,d,h,S,5,n[20]),h=l(h,c,f,d,z,9,n[21]),d=l(d,h,c,f,L,14,n[22]),f=l(f,d,h,c,$,20,n[23]),c=l(c,f,d,h,m,5,n[24]),h=l(h,c,f,d,H,9,n[25]),d=l(d,h,c,f,P,14,n[26]),f=l(f,d,h,c,o,20,n[27]),c=l(c,f,d,h,M,5,n[28]),h=l(h,c,f,d,A,9,n[29]),d=l(d,h,c,f,T,14,n[30]),f=l(f,d,h,c,R,20,n[31]),c=v(c,f,d,h,S,4,n[32]),h=v(h,c,f,d,o,11,n[33]),d=v(d,h,c,f,p,16,n[34]),f=v(f,d,h,c,H,23,n[35]),c=v(c,f,d,h,w,4,n[36]),h=v(h,c,f,d,$,11,n[37]),d=v(d,h,c,f,T,16,n[38]),f=v(f,d,h,c,z,23,n[39]),c=v(c,f,d,h,M,4,n[40]),h=v(h,c,f,d,g,11,n[41]),d=v(d,h,c,f,P,16,n[42]),f=v(f,d,h,c,O,23,n[43]),c=v(c,f,d,h,m,4,n[44]),h=v(h,c,f,d,R,11,n[45]),d=v(d,h,c,f,L,16,n[46]),f=v(f,d,h,c,A,23,n[47]),c=b(c,f,d,h,g,6,n[48]),h=b(h,c,f,d,T,10,n[49]),d=b(d,h,c,f,H,15,n[50]),f=b(f,d,h,c,S,21,n[51]),c=b(c,f,d,h,R,6,n[52]),h=b(h,c,f,d,P,10,n[53]),d=b(d,h,c,f,z,15,n[54]),f=b(f,d,h,c,w,21,n[55]),c=b(c,f,d,h,o,6,n[56]),h=b(h,c,f,d,L,10,n[57]),d=b(d,h,c,f,O,15,n[58]),f=b(f,d,h,c,M,21,n[59]),c=b(c,f,d,h,$,6,n[60]),h=b(h,c,f,d,p,10,n[61]),d=b(d,h,c,f,A,15,n[62]),f=b(f,d,h,c,m,21,n[63]),a[0]=a[0]+c|0,a[1]=a[1]+f|0,a[2]=a[2]+d|0,a[3]=a[3]+h|0},_doFinalize:function(){var k=this._data,C=k.words,D=this._nDataBytes*8,E=k.sigBytes*8;C[E>>>5]|=128<<24-E%32;var r=t.floor(D/4294967296),a=D;C[(E+64>>>9<<4)+15]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360,C[(E+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360,k.sigBytes=(C.length+1)*4,this._process();for(var g=this._hash,w=g.words,A=0;A<4;A++){var P=w[A];w[A]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}return g},clone:function(){var k=_.clone.call(this);return k._hash=this._hash.clone(),k}});function u(k,C,D,E,r,a,g){var w=k+(C&D|~C&E)+r+g;return(w<<a|w>>>32-a)+C}function l(k,C,D,E,r,a,g){var w=k+(C&E|D&~E)+r+g;return(w<<a|w>>>32-a)+C}function v(k,C,D,E,r,a,g){var w=k+(C^D^E)+r+g;return(w<<a|w>>>32-a)+C}function b(k,C,D,E,r,a,g){var w=k+(D^(C|~E))+r+g;return(w<<a|w>>>32-a)+C}i.MD5=_._createHelper(x),i.HmacMD5=_._createHmacHelper(x)}(Math),e.MD5})});var ye=j((Y,me)=>{(function(e,t){typeof Y=="object"?me.exports=Y=t(q()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(Y,function(e){return function(){var t=e,i=t.lib,s=i.WordArray,y=i.Hasher,_=t.algo,B=[],n=_.SHA1=y.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(x,u){for(var l=this._hash.words,v=l[0],b=l[1],k=l[2],C=l[3],D=l[4],E=0;E<80;E++){if(E<16)B[E]=x[u+E]|0;else{var r=B[E-3]^B[E-8]^B[E-14]^B[E-16];B[E]=r<<1|r>>>31}var a=(v<<5|v>>>27)+D+B[E];E<20?a+=(b&k|~b&C)+1518500249:E<40?a+=(b^k^C)+1859775393:E<60?a+=(b&k|b&C|k&C)-1894007588:a+=(b^k^C)-899497514,D=C,C=k,k=b<<30|b>>>2,b=v,v=a}l[0]=l[0]+v|0,l[1]=l[1]+b|0,l[2]=l[2]+k|0,l[3]=l[3]+C|0,l[4]=l[4]+D|0},_doFinalize:function(){var x=this._data,u=x.words,l=this._nDataBytes*8,v=x.sigBytes*8;return u[v>>>5]|=128<<24-v%32,u[(v+64>>>9<<4)+14]=Math.floor(l/4294967296),u[(v+64>>>9<<4)+15]=l,x.sigBytes=u.length*4,this._process(),this._hash},clone:function(){var x=y.clone.call(this);return x._hash=this._hash.clone(),x}});t.SHA1=y._createHelper(n),t.HmacSHA1=y._createHmacHelper(n)}(),e.SHA1})});var be=j((Z,we)=>{(function(e,t){typeof Z=="object"?we.exports=Z=t(q()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(Z,function(e){(function(){var t=e,i=t.lib,s=i.Base,y=t.enc,_=y.Utf8,B=t.algo,n=B.HMAC=s.extend({init:function(x,u){x=this._hasher=new x.init,typeof u=="string"&&(u=_.parse(u));var l=x.blockSize,v=l*4;u.sigBytes>v&&(u=x.finalize(u)),u.clamp();for(var b=this._oKey=u.clone(),k=this._iKey=u.clone(),C=b.words,D=k.words,E=0;E<l;E++)C[E]^=1549556828,D[E]^=909522486;b.sigBytes=k.sigBytes=v,this.reset()},reset:function(){var x=this._hasher;x.reset(),x.update(this._iKey)},update:function(x){return this._hasher.update(x),this},finalize:function(x){var u=this._hasher,l=u.finalize(x);u.reset();var v=u.finalize(this._oKey.clone().concat(l));return v}})})()})});var se=j((Q,ke)=>{(function(e,t,i){typeof Q=="object"?ke.exports=Q=t(q(),ye(),be()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],t):t(e.CryptoJS)})(Q,function(e){return function(){var t=e,i=t.lib,s=i.Base,y=i.WordArray,_=t.algo,B=_.MD5,n=_.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:B,iterations:1}),init:function(x){this.cfg=this.cfg.extend(x)},compute:function(x,u){for(var l,v=this.cfg,b=v.hasher.create(),k=y.create(),C=k.words,D=v.keySize,E=v.iterations;C.length<D;){l&&b.update(l),l=b.update(x).finalize(u),b.reset();for(var r=1;r<E;r++)l=b.finalize(l),b.reset();k.concat(l)}return k.sigBytes=D*4,k}});t.EvpKDF=function(x,u,l){return n.create(l).compute(x,u)}}(),e.EvpKDF})});var Ce=j((X,xe)=>{(function(e,t,i){typeof X=="object"?xe.exports=X=t(q(),se()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],t):t(e.CryptoJS)})(X,function(e){e.lib.Cipher||function(t){var i=e,s=i.lib,y=s.Base,_=s.WordArray,B=s.BufferedBlockAlgorithm,n=i.enc,x=n.Utf8,u=n.Base64,l=i.algo,v=l.EvpKDF,b=s.Cipher=B.extend({cfg:y.extend(),createEncryptor:function(o,m){return this.create(this._ENC_XFORM_MODE,o,m)},createDecryptor:function(o,m){return this.create(this._DEC_XFORM_MODE,o,m)},init:function(o,m,z){this.cfg=this.cfg.extend(z),this._xformMode=o,this._key=m,this.reset()},reset:function(){B.reset.call(this),this._doReset()},process:function(o){return this._append(o),this._process()},finalize:function(o){o&&this._append(o);var m=this._doFinalize();return m},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function o(m){return typeof m=="string"?T:$}return function(m){return{encrypt:function(z,p,R){return o(p).encrypt(m,z,p,R)},decrypt:function(z,p,R){return o(p).decrypt(m,z,p,R)}}}}()}),k=s.StreamCipher=b.extend({_doFinalize:function(){var o=this._process(!0);return o},blockSize:1}),C=i.mode={},D=s.BlockCipherMode=y.extend({createEncryptor:function(o,m){return this.Encryptor.create(o,m)},createDecryptor:function(o,m){return this.Decryptor.create(o,m)},init:function(o,m){this._cipher=o,this._iv=m}}),E=C.CBC=function(){var o=D.extend();o.Encryptor=o.extend({processBlock:function(z,p){var R=this._cipher,M=R.blockSize;m.call(this,z,p,M),R.encryptBlock(z,p),this._prevBlock=z.slice(p,p+M)}}),o.Decryptor=o.extend({processBlock:function(z,p){var R=this._cipher,M=R.blockSize,H=z.slice(p,p+M);R.decryptBlock(z,p),m.call(this,z,p,M),this._prevBlock=H}});function m(z,p,R){var M,H=this._iv;H?(M=H,this._iv=t):M=this._prevBlock;for(var L=0;L<R;L++)z[p+L]^=M[L]}return o}(),r=i.pad={},a=r.Pkcs7={pad:function(o,m){for(var z=m*4,p=z-o.sigBytes%z,R=p<<24|p<<16|p<<8|p,M=[],H=0;H<p;H+=4)M.push(R);var L=_.create(M,p);o.concat(L)},unpad:function(o){var m=o.words[o.sigBytes-1>>>2]&255;o.sigBytes-=m}},g=s.BlockCipher=b.extend({cfg:b.cfg.extend({mode:E,padding:a}),reset:function(){var o;b.reset.call(this);var m=this.cfg,z=m.iv,p=m.mode;this._xformMode==this._ENC_XFORM_MODE?o=p.createEncryptor:(o=p.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==o?this._mode.init(this,z&&z.words):(this._mode=o.call(p,this,z&&z.words),this._mode.__creator=o)},_doProcessBlock:function(o,m){this._mode.processBlock(o,m)},_doFinalize:function(){var o,m=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(m.pad(this._data,this.blockSize),o=this._process(!0)):(o=this._process(!0),m.unpad(o)),o},blockSize:128/32}),w=s.CipherParams=y.extend({init:function(o){this.mixIn(o)},toString:function(o){return(o||this.formatter).stringify(this)}}),A=i.format={},P=A.OpenSSL={stringify:function(o){var m,z=o.ciphertext,p=o.salt;return p?m=_.create([1398893684,1701076831]).concat(p).concat(z):m=z,m.toString(u)},parse:function(o){var m,z=u.parse(o),p=z.words;return p[0]==1398893684&&p[1]==1701076831&&(m=_.create(p.slice(2,4)),p.splice(0,4),z.sigBytes-=16),w.create({ciphertext:z,salt:m})}},$=s.SerializableCipher=y.extend({cfg:y.extend({format:P}),encrypt:function(o,m,z,p){p=this.cfg.extend(p);var R=o.createEncryptor(z,p),M=R.finalize(m),H=R.cfg;return w.create({ciphertext:M,key:z,iv:H.iv,algorithm:o,mode:H.mode,padding:H.padding,blockSize:o.blockSize,formatter:p.format})},decrypt:function(o,m,z,p){p=this.cfg.extend(p),m=this._parse(m,p.format);var R=o.createDecryptor(z,p).finalize(m.ciphertext);return R},_parse:function(o,m){return typeof o=="string"?m.parse(o,this):o}}),S=i.kdf={},O=S.OpenSSL={execute:function(o,m,z,p){p||(p=_.random(64/8));var R=v.create({keySize:m+z}).compute(o,p),M=_.create(R.words.slice(m),z*4);return R.sigBytes=m*4,w.create({key:R,iv:M,salt:p})}},T=s.PasswordBasedCipher=$.extend({cfg:$.cfg.extend({kdf:O}),encrypt:function(o,m,z,p){p=this.cfg.extend(p);var R=p.kdf.execute(z,o.keySize,o.ivSize);p.iv=R.iv;var M=$.encrypt.call(this,o,m,R.key,p);return M.mixIn(R),M},decrypt:function(o,m,z,p){p=this.cfg.extend(p),m=this._parse(m,p.format);var R=p.kdf.execute(z,o.keySize,o.ivSize,m.salt);p.iv=R.iv;var M=$.decrypt.call(this,o,m,R.key,p);return M}})}()})});var Be=j((ee,ze)=>{(function(e,t,i){typeof ee=="object"?ze.exports=ee=t(q(),pe(),ge(),se(),Ce()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],t):t(e.CryptoJS)})(ee,function(e){return function(){var t=e,i=t.lib,s=i.BlockCipher,y=t.algo,_=[],B=[],n=[],x=[],u=[],l=[],v=[],b=[],k=[],C=[];(function(){for(var r=[],a=0;a<256;a++)a<128?r[a]=a<<1:r[a]=a<<1^283;for(var g=0,w=0,a=0;a<256;a++){var A=w^w<<1^w<<2^w<<3^w<<4;A=A>>>8^A&255^99,_[g]=A,B[A]=g;var P=r[g],$=r[P],S=r[$],O=r[A]*257^A*16843008;n[g]=O<<24|O>>>8,x[g]=O<<16|O>>>16,u[g]=O<<8|O>>>24,l[g]=O;var O=S*16843009^$*65537^P*257^g*16843008;v[A]=O<<24|O>>>8,b[A]=O<<16|O>>>16,k[A]=O<<8|O>>>24,C[A]=O,g?(g=P^r[r[r[S^P]]],w^=r[r[w]]):g=w=1}})();var D=[0,1,2,4,8,16,32,64,128,27,54],E=y.AES=s.extend({_doReset:function(){var r;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var a=this._keyPriorReset=this._key,g=a.words,w=a.sigBytes/4,A=this._nRounds=w+6,P=(A+1)*4,$=this._keySchedule=[],S=0;S<P;S++)S<w?$[S]=g[S]:(r=$[S-1],S%w?w>6&&S%w==4&&(r=_[r>>>24]<<24|_[r>>>16&255]<<16|_[r>>>8&255]<<8|_[r&255]):(r=r<<8|r>>>24,r=_[r>>>24]<<24|_[r>>>16&255]<<16|_[r>>>8&255]<<8|_[r&255],r^=D[S/w|0]<<24),$[S]=$[S-w]^r);for(var O=this._invKeySchedule=[],T=0;T<P;T++){var S=P-T;if(T%4)var r=$[S];else var r=$[S-4];T<4||S<=4?O[T]=r:O[T]=v[_[r>>>24]]^b[_[r>>>16&255]]^k[_[r>>>8&255]]^C[_[r&255]]}}},encryptBlock:function(r,a){this._doCryptBlock(r,a,this._keySchedule,n,x,u,l,_)},decryptBlock:function(r,a){var g=r[a+1];r[a+1]=r[a+3],r[a+3]=g,this._doCryptBlock(r,a,this._invKeySchedule,v,b,k,C,B);var g=r[a+1];r[a+1]=r[a+3],r[a+3]=g},_doCryptBlock:function(r,a,g,w,A,P,$,S){for(var O=this._nRounds,T=r[a]^g[0],o=r[a+1]^g[1],m=r[a+2]^g[2],z=r[a+3]^g[3],p=4,R=1;R<O;R++){var M=w[T>>>24]^A[o>>>16&255]^P[m>>>8&255]^$[z&255]^g[p++],H=w[o>>>24]^A[m>>>16&255]^P[z>>>8&255]^$[T&255]^g[p++],L=w[m>>>24]^A[z>>>16&255]^P[T>>>8&255]^$[o&255]^g[p++],c=w[z>>>24]^A[T>>>16&255]^P[o>>>8&255]^$[m&255]^g[p++];T=M,o=H,m=L,z=c}var M=(S[T>>>24]<<24|S[o>>>16&255]<<16|S[m>>>8&255]<<8|S[z&255])^g[p++],H=(S[o>>>24]<<24|S[m>>>16&255]<<16|S[z>>>8&255]<<8|S[T&255])^g[p++],L=(S[m>>>24]<<24|S[z>>>16&255]<<16|S[T>>>8&255]<<8|S[o&255])^g[p++],c=(S[z>>>24]<<24|S[T>>>16&255]<<16|S[o>>>8&255]<<8|S[m&255])^g[p++];r[a]=M,r[a+1]=H,r[a+2]=L,r[a+3]=c},keySize:256/32});t.AES=s._createHelper(E)}(),e.AES})});var Ae=j((re,Se)=>{(function(e,t){typeof re=="object"?Se.exports=re=t(q()):typeof define=="function"&&define.amd?define(["./core"],t):t(e.CryptoJS)})(re,function(e){return e.enc.Hex})});var $e=fe(Be()),oe=fe(Ae());var te=(e,t)=>{if(t)return t;if(e==="background")return chrome.storage.local;if(e==="client")return localStorage;throw new Error("Can not define storage")},F={get:(e,t="background",i=null)=>{let s=te(t,i);if(t==="background")return new Promise((y,_)=>{try{s.get(e,B=>{y(B[e])})}catch(B){_(B)}});if(t==="client"){let y=s.getItem(e);try{return JSON.parse(y)}catch{return y}}throw new Error("Wrong type")},find:(e,t="background",i=null)=>{let s=te(t,i);if(t==="background")return new Promise((y,_)=>{try{s.get(null,B=>{let n=Object.entries(B).find(([x])=>x.includes(e));y(n?n[1]:null)})}catch(B){_(B)}});if(t==="client"){let y=Object.entries(s).find(([_])=>_.includes(e));if(y)try{return JSON.parse(y[1])}catch{return y[1]}return null}throw new Error("Wrong type")},set:(e,t="background",i=null)=>{let s=te(t,i);if(t==="background")return new Promise((y,_)=>{try{s.set(e,()=>{y()})}catch(B){_(B)}});if(t==="client"){let[[y,_]]=Object.entries(e),B=typeof _=="object"?JSON.stringify(_):_;return s.setItem(y,B),null}throw new Error("Wrong type")},remove:(e,t="background",i=null)=>{let s=te(t,i);if(t==="background")return new Promise((y,_)=>{try{s.remove(e,()=>{y()})}catch(B){_(B)}});if(t==="client")return s.removeItem(e),null;throw new Error("Wrong type")}};var{cookies:Ve}=chrome,K={get:(e,t)=>new Promise((i,s)=>{try{Ve.get({url:e,name:t},y=>{y?.value?i(y.value):s(new Error("Cookie not found"))})}catch(y){s(y)}})};var Ie="mayak.bz",N="https://app.mayak.bz",Ee="https://mayak.bz/spasibo",Pe="https://mayak.bz/comeback",Re=Ie;var mr=`${N}/wb`,yr=`${N}/ozon`,De=`${N}/plugin`,U=`${N}/api/v1`,wr=`${N}/users/sign_in?utm_source=plugin`,br=`${N}/prices?utm_source=plugin`,kr=`${N}/api/v1/plugin/image_search`;var ie={get id(){return"mayak-plugin"},get manifest(){return chrome.runtime.getManifest()},get version(){return this.manifest.version},isUpdated(e){if(!e)return!0;let t=this.version,[i,s]=t.split("."),[y,_]=e.split(".");return i>y||s>_},addMeta(){let{host:e}=new URL(window.location.href);if(e.endsWith(Re)&&!!document.head){let t=document.createElement("meta");t.setAttribute("name",this.id),t.setAttribute("content",`installed=true, version=${this.version}`),document.head.appendChild(t)}},addWildberries(){let e=document.createElement("script");e.setAttribute("src",chrome.runtime.getURL("wildberries.js")),e.setAttribute("onload",()=>this.remove()),(document.head||document.documentElement).appendChild(e)}};var W=async(e,t)=>{let i=await fetch(e,t);if(!i.ok)throw new Error(`Fetch error: ${i.status}`);return i};var Je=()=>{try{return chrome.runtime&&chrome.runtime.getManifest(),!0}catch{return!1}};var Oe=(e,t,i=250,s=Je)=>{let y=t/i;return new Promise((_,B)=>{let n=0,x=setInterval(async()=>{if(!(typeof s=="function"?s():s)){clearInterval(x);return}++n;try{await e(),_(),clearInterval(x)}catch{n===y&&(B(),clearInterval(x))}},i)})};var{notifications:Ye}=chrome,Me={show:({title:e,message:t})=>{Ye.create("",{title:e,message:t.replace(/<[^>]+>/g,""),iconUrl:"images/logo/128.png",type:"basic"})}};var G={revenue:null,sales:null,purchase:null,days:null,brand_id:null,seller_id:null,orders:[],stocks:[],prices:[],revenues:[],limits:null},ae=!1,ce=!1,ue=!1,Te=async()=>{let e=await F.get("version");if(ie.isUpdated(e)&&(ae=!1,await F.set({version:ie.version})),!ae)try{let i=await(await W(`${U}/plugin/settings`)).json();await F.set({settings:i}),ae=!0}catch(t){let i=await F.get("settings");throw await F.set({settings:i}),new Error(`Can not get user settings, ${t}`)}};setInterval(async()=>{ae=!1,ce=!1,ue=!1,await Te()},1e3*60*60*24);var Ze=e=>{chrome.tabs.create({url:e})},Qe=async e=>{await W(`${U}/alerts/${e.id}`,{method:"DELETE"})},Xe=e=>{chrome.tabs.sendMessage(e,{msg:"wb_initialize"})},er=async(e,t,i)=>{let s={options:t};chrome.tabs.sendMessage(e,{msg:"wb_render_sku",data:{...s,loading:!0}});let[y,_,B]=await Promise.allSettled([F.get("settings"),W(`${U}/wb/products/${i}`),W(`${U}/alerts?marketplace=wb`)]);if(_.status==="fulfilled"){let[n]=await _.value.json();if(s={...s,...n},B.status==="fulfilled"){let x=await B.value.json();s={...s,alerts:x},y.status==="fulfilled"&&y.value.wb.permissions.includes("browser-notifications")&&x.forEach(({title:u,body:l})=>{Me.show({title:u,message:l})})}chrome.tabs.sendMessage(e,{msg:"wb_render_sku",data:s})}else switch(_.reason.message){case"Fetch error: 401":{chrome.tabs.sendMessage(e,{msg:"wb_render_sku",data:{...s,unauthorized:!0}});break}case"Fetch error: 402":{chrome.tabs.sendMessage(e,{msg:"wb_render_sku",data:{...s,paymentRequired:!0}});break}case"Fetch error: 404":{chrome.tabs.sendMessage(e,{msg:"wb_render_sku",data:{...G,...s,error:!0}});break}default:throw chrome.tabs.sendMessage(e,{msg:"wb_render_sku",data:{...G,...s,error:!0}}),_.reason}},rr=async(e,t,i)=>{let s;i==="categories"&&(s=(await(await W(`${U}/wb/products/${t}/page_ranks`)).json()).page_ranks),i==="requests"&&(s=(await(await W(`${U}/wb/products/${t}/word_ranks`)).json()).word_ranks),chrome.tabs.sendMessage(e,{msg:"wb_handle_sku_ranks",data:s})},tr=async(e,t)=>{try{let i=await W(`${U}/wb/products?codes=${t}`);chrome.tabs.sendMessage(e,{msg:"wb_render_skus",data:await i.json()})}catch{}},ar=async(e,t)=>{try{let i=await W(`${U}/wb/products/summary?codes=${t}`);chrome.tabs.sendMessage(e,{msg:"wb_render_summary",data:await i.json()})}catch(i){switch(i.message){case"Fetch error: 401":{chrome.tabs.sendMessage(e,{msg:"wb_render_summary",data:{unauthorized:!0}});break}case"Fetch error: 402":{chrome.tabs.sendMessage(e,{msg:"wb_render_summary",data:{paymentRequired:!0}});break}}}},nr=async(e,t)=>{try{let i=await W(`${De}/wb/products?codes=${t}`);chrome.tabs.sendMessage(e,{msg:"wb_handle_skus_table",html:await i.text()})}catch{}},We=async(e,t,i)=>{chrome.tabs.sendMessage(e,{msg:"wb_render_summary",data:{loading:!0}});try{let s=await W(`${U}/wb/${t}s/${i}`);chrome.tabs.sendMessage(e,{msg:"wb_render_summary",data:await s.json()})}catch(s){switch(s.message){case"Fetch error: 401":{chrome.tabs.sendMessage(e,{msg:"wb_render_summary",data:{unauthorized:!0}});break}case"Fetch error: 402":{chrome.tabs.sendMessage(e,{msg:"wb_render_summary",data:{paymentRequired:!0}});break}}}},sr=async()=>{if(!ce)try{let e,t=await W("https://seller.wildberries.ru/passport/api/v2/user/personal_data"),{data:i,error:s}=await t.json();i&&(e=!0),s&&(e=!1),await W(`${U}/plugin/wb`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wb_seller:e})}),ce=!0}catch{}},He=async(e,{sessionID:t,supplierID:i,wildToken:s,source:y})=>{let _=await F.get("settings");if(!_?.user)return;let{e_key:B,digest:n}=_.user,x=oe.default.parse(B),u=oe.default.parse(n),l=JSON.stringify({w:t,x:i,s,z:y}),v=$e.default.encrypt(l,x,{iv:u}).toString();await W(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({info:v})})},ir=async e=>{let t=`${e}/api/v1`,i=[{pageUrl:"https://seller.wildberries.ru",authUrl:`${t}/plugin/wba`,storageKey:"wb_auth_seller"},{pageUrl:"https://cmp.wildberries.ru",authUrl:`${t}/plugin/wb_advertizing_auth`,storageKey:"wb_auth_cmp"}],s;try{for(let{pageUrl:y,authUrl:_,storageKey:B}of i){let n;chrome.tabs.create({url:y}),[s]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0});let{origin:x}=new URL(s.pendingUrl);await Oe(async()=>{let[l,v,b]=await Promise.all([K.get(x,"WBToken"),Promise.any([K.get(x,"x-supplier-id"),K.get(x,"x-supplier-id-external")]),K.get(x,"WILDAUTHNEW_V3").catch(()=>null)]);n={sessionID:l,supplierID:v,wildToken:b,source:"user"}},5e3),chrome.tabs.remove(s.id);let u=await F.get(B)??{};(u.sessionID!==n.sessionID||u.supplierID!==n.supplierID||n.wildToken&&u.wildToken!==n.wildToken)&&(await F.set({[B]:n}),await He(_,n))}chrome.tabs.create({url:`${e}/setup/wb_auths/success`})}catch{chrome.tabs.remove(s.id),chrome.tabs.create({url:`${e}/setup/wb_auths/failure`})}},or=async(e,t)=>{let{authUrl:i,storageKey:s}={seller:{authUrl:`${U}/plugin/wba`,storageKey:"wb_auth_seller"},cmp:{authUrl:`${U}/plugin/wb_advertizing_auth`,storageKey:"wb_auth_cmp"}}[t];try{let y=await chrome.tabs.get(e),{origin:_}=new URL(y.url),[B,n,x]=await Promise.all([K.get(_,"WBToken"),Promise.any([K.get(_,"x-supplier-id"),K.get(_,"x-supplier-id-external")]),K.get(_,"WILDAUTHNEW_V3").catch(()=>null)]),u={sessionID:B,supplierID:n,wildToken:x,source:"watcher"},l=await F.get(s)??{};if(l.supplierID!==u.supplierID)return;(l.sessionID!==u.sessionID||u.wildToken&&l.wildToken!==u.wildToken)&&(await F.set({[s]:u}),await He(i,u))}catch{}},cr=async(e,t)=>{try{let i=await W(`${U}/plugin/subjects?ids=${t}`);chrome.tabs.sendMessage(e,{msg:"wb_handle_categories_priority",data:await i.json()})}catch(i){switch(i.message){case"Fetch error: 401":{chrome.tabs.sendMessage(e,{msg:"wb_handle_categories_priority",data:{unauthorized:!0}});break}default:throw chrome.tabs.sendMessage(e,{msg:"wb_handle_categories_priority",data:{error:!0}}),i}}},ur=e=>{chrome.tabs.sendMessage(e,{msg:"ozon_initialize"})},lr=async(e,t)=>{let i={};chrome.tabs.sendMessage(e,{msg:"ozon_render_sku",data:{loading:!0}});try{let[s,y]=await Promise.allSettled([W(`${U}/ozon/products/${t}`),W(`${U}/alerts?marketplace=ozon`)]);if(s.status==="fulfilled"){let[_]=await s.value.json();i={...i,..._}}if(y.status==="fulfilled"){let _=await y.value.json();i={...i,alerts:_}}chrome.tabs.sendMessage(e,{msg:"ozon_render_sku",data:{...G,...i}})}catch(s){switch(s.message){case"Fetch error: 401":{chrome.tabs.sendMessage(e,{msg:"ozon_render_sku",data:{unauthorized:!0}});break}case"Fetch error: 402":{chrome.tabs.sendMessage(e,{msg:"ozon_render_sku",data:{paymentRequired:!0}});break}case"Fetch error: 404":{chrome.tabs.sendMessage(e,{msg:"ozon_render_sku",data:{...G,error:!0}});break}default:throw chrome.tabs.sendMessage(e,{msg:"ozon_render_sku",data:{...G,error:!0}}),s}}},fr=async(e,t)=>{if(t.length)try{let i=await W(`${U}/ozon/products?codes=${t}`);chrome.tabs.sendMessage(e,{msg:"ozon_render_skus",data:await i.json()})}catch{}},dr=async()=>{if(!ue)try{let e=!0;try{await W("https://seller.ozon.ru/api/site/user/current")}catch(t){t.message==="Fetch error: 401"&&(e=!1)}await W(`${U}/plugin/ozon`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ozon_seller:e})}),ue=!0}catch{}},Ue=async(e,t,i)=>{chrome.tabs.sendMessage(e,{msg:"ozon_render_summary",data:{loading:!0}});try{let s=await W(`${U}/ozon/${t}s/${i}`);chrome.tabs.sendMessage(e,{msg:"ozon_render_summary",data:await s.json()})}catch(s){switch(s.message){case"Fetch error: 401":{chrome.tabs.sendMessage(e,{msg:"ozon_render_summary",data:{unauthorized:!0}});break}case"Fetch error: 402":{chrome.tabs.sendMessage(e,{msg:"ozon_render_summary",data:{paymentRequired:!0}});break}}}};chrome.runtime.onMessage.addListener(({msg:e,options:t=null,sku:i=null,skus:s=[],brand:y=null,seller:_=null,url:B=null,authType:n=null,alert:x=null,ranksType:u=null,subjects:l=[]},{tab:{id:v}})=>{switch(e){case"prepare":{Te();break}case"open_external_tab":{Ze(B);break}case"alert_close":{Qe(x);break}case"wb_start":{Xe(v);break}case"wb_get_sku":{er(v,t,i);break}case"wb_get_ranks":{rr(v,i,u);break}case"wb_get_skus":{tr(v,s);break}case"wb_get_skus_summary":{ar(v,s);break}case"wb_get_skus_table":{nr(v,s);break}case"wb_get_brand":{We(v,"brand",y);break}case"wb_get_seller":{We(v,"seller",_);break}case"wb_send_has_seller_account":{sr();break}case"wb_send_seller_account":{ir(B);break}case"wb_watch_and_send_seller_account":{or(v,n);break}case"wb_get_categories_priority":{cr(v,l);break}case"ozon_start":{ur(v);break}case"ozon_get_sku":{lr(v,i);break}case"ozon_get_skus":{fr(v,s);break}case"ozon_get_brand":{Ue(v,"brand",y);break}case"ozon_get_seller":{Ue(v,"seller",_);break}case"ozon_send_has_seller_account":{dr();break}}});chrome.runtime.onInstalled.addListener(e=>{e.reason==="install"&&chrome.tabs.create({url:Ee})});chrome.runtime.setUninstallURL(Pe);})();
