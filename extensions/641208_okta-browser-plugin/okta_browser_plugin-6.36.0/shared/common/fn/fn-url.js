!function(){const r=Okta.parseUri,o=Okta.parseQueryKey;var t=Okta._okta;const a=t.any,n=t.compose,e=t.contains,s=t.partial,i=t.each,c=t.find,u=t.filter,l=t.flatten,p=t.last,h=t.min,m=t.reduce,f=t.isMatch,k=t.some,g=Okta.fn.other.string.endsWith,P=t.pick,d=Okta.fn.url={},O=Okta.Constants,w=Okta.Q,U=["okta.mil","okta-miltest.com","okta-gov.com","trex-gov.com"],H=l(["cloudareanet.com","clouditude.com","hioktane.com","lowoktane.com","openalloy.com","okta.com","okta1.com","okta-emea.com","oktapreview.com","perfcloud.org","primeapp.com","trexcloud.com","widerock.com","okta.ninja",U]),T="-admin",y=["/app/UserHome","/app/Home","/enduser"],v=["/app/UserHome","/plugin/bookmark","/home/plugin","/enduser/app-settings"],D=[{path:"/oauth2/v1/authorize",queryKey:{client_id:Okta.Constants.AuthOptions.WORKFORCE_OIDC.PLUGIN_CLIENT_ID}},{path:"/oauth2/v1/authorize",queryKey:{client_id:Okta.Constants.AuthOptions.PERSONAL_OIDC.PLUGIN_CLIENT_ID}},{path:"/discovery/iframe.html"},{path:"/login/token/redirect"}],A=["www.okta.com","trust.okta.com","system.okta.com","static.okta.com","support.okta.com","developer.okta.com","login.okta.com","help.okta.com","trustro.okta.com","investor.okta.com","oanmanager.okta.com","oinmanager.okta.com","devforum.okta.com","store.okta.com","status.okta.com","survey.okta.com","infra.okta.com","workflow.okta.com","productfeedback.okta.com","productfeedbacksandbox.okta.com","regionalevents.okta.com","workflows.okta.com","ideas.okta.com","rewards.okta.com","pages.okta.com","sec.okta.com","personal.okta.com","profile.okta.com","partner.okta.com","id.okta.com"],C=["/app/*/*/sso/saml*","/app/office365/*/*"],W=["/sso/wsfed/signout"],S=["www.amazon.com","accounts.google.com","www.paypal.com","login.xfinity.com","account.t-mobile.com","twitter.com","login.yahoo.com","www.walmart.com","www.cvs.com","accounts.intuit.com"],_="/app/UserHome",I="/enduser/personal/askpin";function L(o){const r=[];return i(H,function(t){t+=o;r.push("https://*."+t),Okta.Config.allowOktaHttp&&r.push("http://*."+t)}),r}function b(t,o){o=o.split(".");if(o.length<2)return!1;const r=o[o.length-2]+"."+o[o.length-1];return a(t,function(t){return t===r})}d.isHomepageIframePath=function(o){return!!c(D,function(t){return d.isUrlPathStartsWith(o,t.path)&&(!t.queryKey||f(o.queryKey,t.queryKey))})},d.isUrlPathStartsWith=function(t,o){return t.path===o||0===t.path.indexOf(o+"/")},d.hrefToUrlParts=function(t){const o=r(t);return o.href=t,P(o,"anchor","path","port","host","protocol","href","queryKey")},d.locationToUrlParts=function(t){return{anchor:t.hash.replace("#",""),path:t.pathname,port:t.port,host:t.hostname,protocol:t.protocol.replace(":",""),href:t.href,queryKey:o(t.search.replace("?",""))}},d.urlPartsToHref=function(t){return t.href},d.urlPartsToDomain=function(t){let o=t.protocol+"://"+t.host;return""!==t.port&&(o+=":"+t.port),o},d.urlPartsToDomainWithoutPort=function(t){return t.protocol+"://"+t.host},d.urlPartsToDomainAndPath=function(t){return d.urlPartsToDomain(t)+t.path},d.replaceUrlPartsPath=function(t,o){return d.hrefToUrlParts(d.urlPartsToDomain(t)+o)},d.removeTrailingSlash=function(o){if(o){let t=o.replace(/^\s+|\s+$/gm,"");return t=t.replace(/\/+$/,""),t}},d.getOktaDomains=function(){return H},d.isOktaPage=function(t,o){return!(!Okta.Config.allowOktaHttp&&"https"!==t.protocol)&&(!(o&&!d.isUrlPathStartsWith(t,o))&&(!(!Okta.Config.allowLocalHostOrServer||"localhost"!==t.host)||b(H,t.host)))},d.isOktaLoginAccounts=function(t){return d.isOktaPage(t)&&"login.okta.com"===t.host},d.isOktaHref=n(d.isOktaPage,d.hrefToUrlParts),d.isOktaAdminPage=function(t){var o=t.host.split(".");return d.isOktaPage(t)&&g(o[0],T)},d.isOktaEndUserHomePage=function(t){return d.isOktaHref(t.href)&&!d.isOktaAdminPage(t)&&d.isOktaEndUserHomePagePath(t)},d.isOktaEndUserHomePagePath=function(t){return!!c(y,s(d.isUrlPathStartsWith,t))},d.isOktaPluginHomePagePath=function(t){return!!c(v,s(d.isUrlPathStartsWith,t))},d.isOktaPluginHomePage=function(o){return!!c(v,function(t){return d.isOktaPage(o,t)})},d.isOktaPersonalAllowListedUrlChange=function(t,o){return t.path.startsWith("/enduser/addapp")&&o.path.startsWith(_)||t.path.startsWith("/enduser/importapps")&&o.path.startsWith(_)||t.path.startsWith("/enduser/app-settings")&&o.path.startsWith(_)||t.path.startsWith(I)&&!o.path.startsWith(I)||!t.path.startsWith(I)&&o.path.startsWith(I)},d.isAskPin=function(t){var o=d.urlPartsToDomain(t);return d.isOktaPersonalAccount(o)&&d.isOktaPage(t,I)},d.isOktaPersonalPasswordlessOnboardingPage=function(t){var o=d.urlPartsToDomain(t);return d.isOktaPersonalAccount(o)&&d.isOktaPage(t,"/enduser/personal/onboarding/passwordless/plugin")},d.isOktaEndUserHomeHref=n(d.isOktaEndUserHomePage,d.hrefToUrlParts),d.isCustomEndUserHomeHref=function(t,o){if(!t||!o)return!1;t=d.hrefToUrlParts(t),o=d.hrefToUrlParts(o);return d.isOktaEndUserHomePagePath(t)&&t.protocol===o.protocol&&t.host===o.host&&t.port===o.port},d.isOktaAppSSOPath=function(t){if(!d.isOktaPage(t))return!1;t=t.path.split("/");return 5==t.length&&("app"===t[1]&&0<t[2].length&&0<t[3].length&&0<t[4].length)},d.normalizeOktaSubdomain=function(t){if(d.isOktaAdminPage(t)){const o=t.host.split(".");o[0]=o[0].substr(0,o[0].length-T.length),t.host=o.join(".")}return t},d.isOktaTrustedFQDN=function(t){return e(A,t.host)},d.matchesHref=function(t){const o=new Okta.Url(d.urlPartsToHref(t));return function(t){return o.matches(t)}},d.matchesDomains=function(t,o){return d.urlPartsToDomain(t)===d.urlPartsToDomain(o)},d.matchesSubDomains=function(t,o){if(t.protocol!=o.protocol||t.port!=o.port)return!1;const r=t.host,a=o.host;if(!r||!a)return!1;var n=r.split("."),t=a.split("."),o=h([n.length,2]);return p(n,o).join(".").toLowerCase()===p(t,o).join(".").toLowerCase()},d.getOktaFederatedRequestMatchPatterns=function(){return m(C,function(t,o){return t.concat(L(o))},[])},d.isAllowedOktaRequestForAuthMonitoring=function(o){return!!o&&(!!d.isOktaPage(d.hrefToUrlParts(o))&&!c(W,function(t){return-1<o.indexOf(t)}))},d.getMonitoredSitesApiMatchPatterns=function(){return L("/api/plugin/2/sites*")},d.getAppInfoFromSiteUrl=function(t){const o=d.hrefToUrlParts(t).path;t=o.split("/");return"app"===t[1]&&t[2]&&t[3]?{appName:t[2],instanceId:t[3]}:null},d.getOktaDomainsRegexp=function(t){if(!t.length)return null;let o="^";return o+=Okta.Config.allowOktaHttp?"http[s]?":"https",o+="://[^/]+\\.(",i(t,function(t){o+=t.replace(".","\\.")+"|"}),o=o.slice(0,-1),o+=")",o+=Okta.Config.allowOktaHttp?"(:[0-9]+)?":"",o+="(",i(y,function(t){o+=t+"|"}),o=o.slice(0,-1),o+=")",o},d.getSubDomain=function(t){var o=t.lastIndexOf(".");if(o<=0)return null;var r=t.lastIndexOf(".",--o);return-1==r||r==o?null:t.substring(r+1)},d.isOktaPersonalAccount=function(t){const o=["https://personal.okta.com","https://personal.trexcloud.com","https://personal.clouditude.com"];return Okta.Config.allowLocalHostOrServer&&(o.push("http://localhost"),o.push("https://personal.okta1.com")),e(o,t)},d.isOktaFederalDomain=function(t){t=d.hrefToUrlParts(t);return"https"===t.protocol&&b(U,t.host)},d.isMultiStepsAppLoginHost=function(o,t){return!(!t||!t.useNAPDomain||"nap-fake-swa.com"!==o.host)||"https"==o.protocol&&k(S,function(t){return t===o.host})},d.hrefToDomain=function(t){t=d.hrefToUrlParts(t);return t.host&&t.protocol?d.urlPartsToDomain(t):""},d.getOktaPersonalMarketingLinkWithParams=function(n,e,t){return w.all([t.getEnduserHome(),t.getTabs()]).spread(function(t,o){var r=t.orgId,t=encodeURIComponent(new URL(e).hostname),o=u(o.appLinks,function(t){return t.appInstancePersonal}).length;const a=["utm_campaign=op4w","utm_medium=workforce","utm_source="+n,"from_workforce=true","wf_org_id="+r,"org_url="+t,"num_personal_apps="+o];return"https://personal."+(o=(o=e).split(".").slice(-2).join("."),["okta1.com","trexcloud.com"].includes(o)?o:"okta.com")+"?"+a.join("&")}).fail(function(){return O.OktaPersonalMarketingSiteLink})}}();