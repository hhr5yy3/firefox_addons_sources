Okta.RuntimeMessage=function(){var e=Okta._okta;var s=e.isNumber;var n=e.isFunction;var i={};var a=[];var u=[];var o="Okta.RuntimeMessage::";i.webExtension=typeof chrome!=="undefined"?chrome:null;if(i.webExtension&&i.webExtension.runtime){i.remove=function(e){var n=a.indexOf(e);if(n>=0){i.webExtension.runtime.onMessage.removeListener(u[n]);a.splice(n,1);u.splice(n,1)}}}i.init=function(r,t){if(!r){Log.warn(o+"init: runtime message doesn't have moduleName")}if(i.webExtension&&i.webExtension.runtime){if(n(t)&&!a.includes(t)){var e=function(e,n,i){if(!e){Log.warn(o+"handlerWrapper: missing msg, skip");return}if(typeof e==="string"&&/^thrush-future::/.test(e)){return}if(!n||!n.tab||!s(n.tab.id)){Log.warn(o+"handlerWrapper: invalid sender, skip");return}if(r===e.module){return t(e,n,i)}else{Log.debug(o+"handlerWrapper: message from "+e.module+" mismatch current module "+r)}};a.push(t);u.push(e);i.webExtension.runtime.onMessage.addListener(e)}}};return i};