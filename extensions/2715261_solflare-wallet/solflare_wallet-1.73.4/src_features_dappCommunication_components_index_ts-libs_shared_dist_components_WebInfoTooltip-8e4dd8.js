"use strict";(self.webpackChunk_solflare_extension=self.webpackChunk_solflare_extension||[]).push([["src_features_dappCommunication_components_index_ts-libs_shared_dist_components_WebInfoTooltip-8e4dd8"],{"./src/features/backgroundScript/context/index.ts":(e,s,t)=>{t.d(s,{G:()=>a.G,L:()=>a.L});var a=t("./src/features/backgroundScript/context/backgroundClient/index.tsx")},"./src/features/dappCommunication/components/Connect/index.tsx":(e,s,t)=>{t("../../../node_modules/react/jsx-runtime.js"),t("../../../node_modules/react/index.js"),t("../../libs/shared/dist/components/index.js"),t("../../libs/shared/dist/features/dappCommunication/context/index.js"),t("../../libs/shared/dist/features/featureFlags/index.js"),t("../../libs/shared/dist/features/settings/index.js"),t("../../libs/shared/dist/features/shared/autoApproveApps/index.js")},"./src/features/dappCommunication/components/DappEmitAccountChange/index.ts":(e,s,t)=>{t.d(s,{R:()=>r});var a=t("../../../node_modules/react/index.js"),n=t("../../libs/shared/dist/features/walletData/hooks/index.js"),i=t("./src/features/backgroundScript/context/index.ts");const r=()=>{const{loggedIn:e}=(0,n.Rg)(),{publicKey:s}=(0,n.rT)(),t=(0,a.useRef)(null),{accountChange:r}=(0,i.G)();return(0,a.useEffect)((()=>{const a=t.current;e&&s&&a&&s!==a&&r({publicKey:s}),t.current=s}),[e,s,r]),null}},"./src/features/dappCommunication/components/Sign/index.tsx":(e,s,t)=>{t("../../../node_modules/react/jsx-runtime.js"),t("../../../node_modules/react/index.js"),t("../../libs/shared/dist/features/dappCommunication/components/index.js")},"./src/features/dappCommunication/components/index.ts":(e,s,t)=>{t.d(s,{Rl:()=>a.R}),t("./src/features/dappCommunication/components/Connect/index.tsx"),t("./src/features/dappCommunication/components/Sign/index.tsx");var a=t("./src/features/dappCommunication/components/DappEmitAccountChange/index.ts")},"../../libs/shared/dist/components/ConfirmationHelpers/ConfirmationStaking.js":(e,s,t)=>{t.d(s,{Z:()=>c});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),i=t("../../libs/foundation-ui/dist/index.js"),r=t("../../libs/shared/dist/constants/mints.js"),o=t("../../libs/shared/dist/features/currencies/hooks/index.js"),d=t("../../libs/shared/dist/utils/displayPrice.js"),l=t("../../libs/shared/dist/components/TokenAvatar/index.js");const c=({amount:e,validatorName:s,validatorImage:t})=>{const{value:c,suffix:u,prefix:m,price:f}=(0,o.yF)("SOL",e);return(0,a.jsx)(i.ConfirmTransaction,{avatar:(0,a.jsx)(i.IconAvatar,{size:"xl",icon:n.Quw}),transactionFromItem:(0,a.jsx)(i.TXListItem,{title:(0,d.ED)({amount:e,displayType:"solana",suffix:" SOL"}),subtitle:f?(0,d.ED)({amount:c,displayType:"value",suffix:u,prefix:m}):void 0,avatar:(0,a.jsx)(l.y,{src:r.vx.logoURI,verified:!0})}),transactionToItem:s?(0,a.jsx)(i.TXListItem,{title:s,avatar:(0,a.jsx)(i.ValidatorAvatar,{src:t})}):void 0})}},"../../libs/shared/dist/components/WebInfoTooltip/index.js":(e,s,t)=>{t.d(s,{s:()=>i});var a=t("../../../node_modules/@mui/system/esm/styled.js"),n=t("../../libs/foundation-ui/dist/index.js");const i=(0,a.Z)(n.InfoWithTooltip)({zIndex:n.Z_INDEX_TOOLTIP})},"../../libs/shared/dist/constants/index.js":(e,s,t)=>{t.d(s,{JF:()=>a,Qv:()=>n,go:()=>i});const a="https://wallet-api.solflare.com",n="https://activity-api.solflare.com",i=16},"../../libs/shared/dist/constants/mints.js":(e,s,t)=>{t.d(s,{BH:()=>n,Jb:()=>i,Xz:()=>r,oR:()=>o,vx:()=>a});const a={name:"Solana",symbol:"SOL",logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/solana/info/logo.png"},n="11111111111111111111111111111111",i="So11111111111111111111111111111111111111112",r="EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",o="Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"},"../../libs/shared/dist/constants/networks.js":(e,s,t)=>{t.d(s,{EE:()=>a,g5:()=>d,pX:()=>r,vo:()=>n});const a={mainnet:"mainnet",devnet:"devnet",testnet:"testnet"},n={mainnet:101,testnet:102,devnet:103},i={mainnet:"https://rpc-mainnet-failover.solflare.com",devnet:"https://rpc-devnet-failover.solflare.com",testnet:"https://rpc-testnet-failover.solflare.com"},r={mainnet:"https://wallet-api.solflare.com/v2/tx/rpc-extended/mainnet",devnet:"https://wallet-api.solflare.com/v2/tx/rpc-extended/devnet",testnet:"https://wallet-api.solflare.com/v2/tx/rpc-extended/testnet"},o={mainnet:"https://wallet-api.solflare.com/v2/tx/jito/send-bundle",devnet:"https://wallet-api.solflare.com/v2/tx/jito/send-bundle",testnet:"https://wallet-api.solflare.com/v2/tx/jito/send-bundle"},d=(a.mainnet,a.devnet,a.testnet,{mainnet:{cluster:a.mainnet,name:"Mainnet",url:"https://mainnet-beta.solflare.network",failoverUrl:i[a.mainnet],sendUrl:r[a.mainnet],bundledSendUrl:o[a.mainnet]},testnet:{cluster:a.testnet,name:"Testnet",url:"https://api.testnet.solana.com",failoverUrl:i[a.testnet],sendUrl:r[a.testnet],bundledSendUrl:o[a.testnet]},devnet:{cluster:a.devnet,name:"Devnet",url:"https://api.devnet.solana.com",failoverUrl:i[a.devnet],sendUrl:r[a.devnet],bundledSendUrl:o[a.devnet]}})},"../../libs/shared/dist/constants/validatorStatus.js":(e,s,t)=>{var a;t.d(s,{n:()=>a}),function(e){e.Active="active",e.Inactive="inactive"}(a||(a={}))},"../../libs/shared/dist/features/activity/context/KnownAddressesRegistryContext/index.js":(e,s,t)=>{t.d(s,{h:()=>l,j:()=>d});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../libs/shared/dist/features/addressBook/context/index.js"),r=t("../../libs/shared/dist/features/walletData/hooks/index.js");const o=(0,n.createContext)(null),d=({children:e})=>{const{accounts:s}=(0,r.Rg)(),{addresses:t}=(0,i.b)(),d=(0,n.useMemo)((()=>{const e={};for(const t of s)e[t.publicKey]=t.name;for(const s of t)e[s.pubkey]=s.name;return e}),[s,t]);return(0,a.jsx)(o.Provider,{value:d,children:e})},l=()=>{const e=(0,n.useContext)(o);if(!e)throw new Error("useKnownAddressesRegistry must be used within KnownAddressesRegistryProvider");return e}},"../../libs/shared/dist/features/activity/context/index.js":(e,s,t)=>{t.d(s,{j:()=>a.j});var a=t("../../libs/shared/dist/features/activity/context/KnownAddressesRegistryContext/index.js")},"../../libs/shared/dist/features/activity/hooks/index.js":(e,s,t)=>{t.d(s,{T:()=>p});var a=t("../../../node_modules/react/index.js"),n=t("../../../node_modules/lodash/lodash.js"),i=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),r=t("../../libs/shared/dist/features/walletData/hooks/index.js"),o=t("../../libs/shared/dist/storage/solflareService.js"),d=t("../../libs/shared/dist/utils/requestId.js"),l=t("../../../node_modules/console-browserify/index.js");const c="https://activity-api.solflare.com",u="<|EOF|>";async function*m(e,s,t,a,n){if(!e)return;const i=await o.Z.solflarenetwork.get();try{const r=(await fetch(`${c}/v1/transactions?network=${s}`,{method:"post",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(0,d.A)(i)}`},body:JSON.stringify({language:t,layout:n,address:e,signatures:a})})).body.getReader();yield*f(r)}catch(e){l.log("error",e)}}async function*f(e){let s="";for(;;){const{done:t,value:a}=await e.read();if(t)break;s+=(new TextDecoder).decode(a);const n=s.split(u);if(1!==n.length){for(let e=0;e<n.length-1;e++){const s=JSON.parse(n[e]);yield s}s=n[n.length-1]}}}function p({layout:e}){const s=(0,i.LN)(),{publicKey:t}=(0,r.rT)(),[u,p]=(0,a.useState)(!0),[b,h]=(0,a.useState)(!1),[g,y]=(0,a.useState)([]),[x,k]=(0,a.useState)([]),[j,v]=(0,a.useState)([]),[w,_]=(0,a.useState)({}),S=(0,a.useRef)(j),C=(0,a.useRef)(w);(0,a.useEffect)((()=>{S.current=j}),[j]),(0,a.useEffect)((()=>{C.current=w}),[w]);const T=e=>{e&&(_((s=>({...s,...e.data.reduce(((e,t)=>({...e,[t.hash]:{...s[t.hash]??{},...t}})),{})}))),v((s=>"append"===e.position?[...s,...e.data]:[...e.data,...s])))};return{loadTransactions:async(a,i)=>{if(!a.length)return;const r=a[0].index,o=a[a.length-1].index,d=S.current.map((e=>e.hash)).slice(r,o+10);let l=(0,n.difference)(d,x);if(l=(0,n.difference)(l,g),l.length){y((e=>[...e,...l])),setTimeout((()=>{y((e=>(0,n.difference)(e,l)))}),1e3);for await(const a of m(t,s.cluster,i,l,e))k((e=>[...e,...l])),_((e=>({...e,...a?.data?.reduce(((s,t)=>({...s,[t.hash]:{...e[t.hash]??{},...t}})),{})})))}},loadSignatures:async({publicKey:e,onlyNewer:t=!1,ignoreFailed:a,limit:n=0})=>{if(t||S.current.length){p(!1),h(!0);for await(const t of async function*(e,s,t,a=!1,n=0){if(!e||!t)return;const i=await o.Z.solflarenetwork.get();try{const r=(await fetch(`${c}/v1/signatures/newer?address=${e}&lastSignature=${t}&network=${s}&ignoreFailed=${+a}&limit=${n}`,{headers:{Authorization:`Bearer ${(0,d.A)(i)}`}})).body.getReader();for await(const e of f(r))yield e}catch(e){l.log("error",e)}}(e,s.cluster,S.current[0]?.hash,a,n))T(t);h(!1)}else{p(!0),v([]),_({});for await(const t of async function*(e,s,t=!1,a=0){if(!e)return;const n=await o.Z.solflarenetwork.get();try{const i=(await fetch(`${c}/v1/signatures?address=${e}&network=${s}&ignoreFailed=${+t}&limit=${a}`,{headers:{Authorization:`Bearer ${(0,d.A)(n)}`}})).body.getReader();for await(const e of f(i))yield e}catch(e){l.log("error",e)}}(e,s.cluster,a,n))T(t);p(!1)}},loadLimitTransactions:async a=>{const n=S.current.map((e=>e.hash));for await(const i of m(t,s.cluster,a,n,e))_((e=>({...e,...i?.data?.reduce(((s,t)=>({...s,[t.hash]:{...e[t.hash]??{},...t}})),{})})))},signatures:j,transactions:w,isLoading:u,isPreloading:b}}},"../../libs/shared/dist/features/activity/utils/index.js":(e,s,t)=>{t.d(s,{Q:()=>k});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),i=t("../../../node_modules/@mui/material/Box/Box.js"),r=t("../../../node_modules/@mui/material/Tooltip/Tooltip.js"),o=t("../../../node_modules/@mui/styles/makeStyles/makeStyles.js"),d=t("../../libs/shared/dist/hooks/index.js"),l=t("../../libs/shared/dist/utils/truncateMiddle.js"),c=t("../../libs/shared/dist/features/pfp/components/index.js"),u=t("../../libs/shared/dist/features/activity/context/KnownAddressesRegistryContext/index.js");const m=(0,o.Z)((()=>({avatarWrapper:{marginRight:8},address:{whieSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer"},addressTooltip:{"&:hover":{opacity:.7}}})));var f=t("../../libs/foundation-ui/dist/index.js"),p=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs");function b(e){switch(e){case"faWavePulse":return p.tc2;case"faArrowRight":return p.eFW;case"faPiggyBank":return p.Quw;default:return p.Psp}}var h=t("../../libs/shared/dist/utils/displayPrice.js"),g=t("../../libs/shared/dist/features/activity/components/ExtLineItem/index.js"),y=t("../../libs/shared/dist/features/activity/components/WebLineItem/index.js");const x={Avatar:e=>(0,a.jsx)(f.ActivityAvatar,{src:e.src,icon:b(e.icon),shape:e.shape}),AvatarDouble:e=>(0,a.jsx)(f.ActivityDoubleAvatar,{src1:e.src1,icon1:b(e.icon1),shape1:e.shape1,src2:e.src2,icon2:b(e.icon2),shape2:e.shape2}),Text:e=>(0,a.jsx)("span",{children:e.content}),Icon:e=>(0,a.jsx)(f.Icon,{icon:b(e.name)}),Address:e=>{const s=(0,u.h)(),t=m(),{openExplorer:o}=(0,d.Vf)(),{t:f}=(0,n.$)();return(0,a.jsxs)(i.Z,{style:{display:"flex",alignItems:"center",maxWidth:170},children:[e.withAvatar&&(0,a.jsx)("div",{className:t.avatarWrapper,children:(0,a.jsx)(c.y,{size:"s",publicKey:e.content})}),s.hasOwnProperty(e.content)?(0,a.jsx)(r.Z,{placement:"top",title:f("action_view_in_explorer"),className:t.addressTooltip,onClick:s=>{s.stopPropagation(),o({type:"account",address:e.content})},children:(0,a.jsx)("span",{className:t.address,children:s[e.content]})}):(0,a.jsx)(r.Z,{placement:"top",title:f("action_view_in_explorer"),className:t.addressTooltip,onClick:s=>{s.stopPropagation(),o({type:"account",address:e.content})},children:(0,a.jsx)("span",{className:t.address,children:(0,l.r)(e.content)})})]})},ExtLineItem:g.v,Balances:e=>{const s=e.positives?.map((s=>({...s,image:s.image,amount:e.format?`+${(0,h.ED)({amount:s.amount,pricePerCoin:s.price,displayType:"amount"})}`:`+${s.amount}`})))??[],t=e.negatives?.map((s=>({...s,image:s.image,amount:e.format?(0,h.ED)({amount:s.amount,pricePerCoin:s.price,displayType:"amount"}):s.amount})))??[],n="details"===e.layout?f.ActivityDetailsBalances:f.ActivityBalances;return(0,a.jsx)(n,{shorterNames:e.shorterNames,failedText:e.failedText,withImage:e.withImage,positives:s,negatives:t})},WebLineItem:y.X};function k(e,s={}){if("object"!=typeof e||!e)return e;if(Array.isArray(e))return e.map((e=>k(e)));if(void 0===e.type){const s={},t=Object.keys(e);for(const a of t)s[a]=k(e[a]);return s}if(Object.keys(x).includes(e.type)){const t=x[e.type],n=e.props,i={};for(const e of n)e.value&&"object"==typeof e.value?Array.isArray(e.value)?i[e.name]=e.value.map((e=>k(e))):i[e.name]=k(e.value):i[e.name]=e.value;return(0,a.jsx)(t,{...i,...s})}}},"../../libs/shared/dist/features/addressBook/context/index.js":(e,s,t)=>{t.d(s,{Z:()=>c,b:()=>u});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../../node_modules/lodash/lodash.js"),r=t("../../libs/shared/dist/storage/solflareService.js"),o=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),d=t("../../libs/shared/dist/features/shared/account/index.js");const l=(0,n.createContext)(null),c=({children:e})=>{const s=(0,o.LN)(),[t,c]=(0,n.useState)([]),[u,m]=(0,n.useState)(!1),f=(0,n.useCallback)((async e=>{try{const t=await(0,d.ru)(e,s.cluster);return t?t.publicKey:null}catch{return null}}),[s]);(0,n.useEffect)((()=>{m(!0),(async()=>{const e=await r.Z.solflareaddressbook.get(),s=[];for(const t of e)s.push({...t,pubkey:await f(t.address)||t.address});c((e=>(0,i.sortBy)((0,i.uniqBy)([...e,...s],"address"),[({name:e})=>e.toLowerCase()]))),m(!1)})()}),[f]);const p=(0,n.useMemo)((()=>t.reduce(((e,s)=>(e[s.address]=s.name,e)),{})),[t]),b=(0,n.useCallback)((async e=>{const s=await f(e.address)||e.address;await r.Z.solflareaddressbook.addEntry(e),c((t=>(0,i.sortBy)((0,i.uniqBy)([...t,{...e,pubkey:s}],"address"),[({name:e})=>e.toLowerCase()])))}),[f]),h=(0,n.useCallback)((async e=>{await r.Z.solflareaddressbook.deleteEntry(e),c((s=>s.filter((s=>s.address!==e))))}),[]),g=(0,n.useCallback)((async(e,s)=>{await r.Z.solflareaddressbook.updateEntry(e,s);const t=await f(s.address)||s.address;c((a=>(0,i.sortBy)(a.map((a=>a.address===e?{name:s.name,address:s.address,pubkey:t}:a)),[({name:e})=>e.toLowerCase()])))}),[f]),y=(0,n.useMemo)((()=>({addresses:t,isLoading:u,nameByAddress:p,addAddress:b,removeAddress:h,updateAddress:g})),[t,u,p,b,h,g]);return(0,a.jsx)(l.Provider,{value:y,children:e})},u=()=>{const e=(0,n.useContext)(l);if(!e)throw new Error("useAddressBookContext must be used within a AddressBookProvider");return e}},"../../libs/shared/dist/features/addressBook/hooks/index.js":(e,s,t)=>{t.d(s,{TA:()=>b,q5:()=>o,L8:()=>d.L});var a=t("../../../node_modules/react/index.js"),n=t("../../libs/wallet-core/dist/shared.js"),i=t("../../libs/shared/dist/features/walletData/hooks/index.js"),r=t("../../libs/shared/dist/features/addressBook/context/index.js");const o=()=>{const{wallets:e}=(0,i.Rg)(),{addresses:s}=(0,r.b)();return{getDestinationWalletType:(0,a.useCallback)((t=>e[t]&&e[t].type in n.oH?n.oH[e[t].type]:s.find((e=>e.pubkey===t))?9:10),[s,e])}};var d=t("../../libs/shared/dist/features/addressBook/hooks/useValidateContactInputs.js"),l=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),c=t("../../../node_modules/react-router/dist/index.js"),u=t("../../libs/shared/dist/constants/routes.js"),m=t("../../libs/shared/dist/features/recentAddresses/context/index.js"),f=t("../../libs/shared/dist/features/shared/snackbar/index.js"),p=t("../../libs/shared/dist/utils/extension.js");const b=()=>{const[e,s]=(0,a.useState)(!1),[t,n]=(0,a.useState)(!1),i=(0,c.s0)(),{addAddress:o,updateAddress:d,removeAddress:b,addresses:h}=(0,r.b)(),{upsertAddress:g}=(0,m.g)(),{enqueueSnackbar:y}=(0,f.Ds)(),{t:x}=(0,l.$)(),k=(0,a.useCallback)((async(e,t)=>{s(!0),await o({name:e,address:t}),s(!1),p.UJ&&i(u.s2.ADDRESS_BOOK.MAIN),y(x("address_book_contact_added"),{variant:"success",autoHideDuration:1e3,onClick:()=>{}})}),[o,i,y,x]),j=(0,a.useCallback)((async(e,s,t)=>{-1!==h.findIndex((e=>e.address===t))&&(n(!0),await d(t,{name:e,address:s}),n(!1),p.UJ&&i(u.s2.ADDRESS_BOOK.MAIN),y(x("address_book_contact_edited"),{variant:"success",autoHideDuration:1e3,onClick:()=>{}}))}),[h,d,i,y,x]),v=(0,a.useCallback)((async e=>{await b(e),y(x("address_book_contact_removed"),{variant:"success",autoHideDuration:1e3,onClick:()=>{}})}),[b,y,x]),w=(0,a.useCallback)((async(e,s)=>{await g(e,s,!0),y(x("address_book_contact_removed"),{variant:"success",autoHideDuration:1e3,onClick:()=>{}})}),[y,x,g]);return(0,a.useMemo)((()=>({handleSubmitAddContact:k,handleSubmitEditContact:j,handleRemoveContact:v,handleRemoveRecent:w,isAddingContact:e,isEditingContact:t})),[k,j,v,w,e,t])}},"../../libs/shared/dist/features/amountInput/utils.js":(e,s,t)=>{t.d(s,{$:()=>n});var a=t("../../libs/shared/dist/utils/common.js");const n=(e,s)=>{const t=e.includes(",")?e.replace(",",".").trim():e.trim(),n=(0,a.T4)(t);if("."===t||","===t)return"0.";if("e"===t||"E"===t||"-"===t)return"";if(!(0,a.w9)(t,s)||!n)throw new Error("More decimals then allowed or input is not valid.");return t}},"../../libs/shared/dist/features/chart/api/index.js":(e,s,t)=>{t.d(s,{W:()=>a.W});var a=t("../../libs/shared/dist/features/chart/api/requests.js")},"../../libs/shared/dist/features/chart/utils/isStableCoin.js":(e,s,t)=>{t.d(s,{e:()=>n});var a=t("../../libs/shared/dist/constants/mints.js");const n=e=>[a.Xz,a.oR].includes(e)},"../../libs/shared/dist/features/currencies/hooks/index.js":(e,s,t)=>{t.d(s,{__:()=>a._,EV:()=>n.E,$T:()=>c.$,Af:()=>i.A,yF:()=>l});var a=t("../../libs/shared/dist/features/currencies/hooks/useCurrencyDisplay.js"),n=t("../../libs/shared/dist/features/currencies/hooks/useCurrencyDisplayState.js"),i=t("../../libs/shared/dist/features/currencies/hooks/useCurrentCurrency.js"),r=t("../../../node_modules/react/index.js"),o=t("../../libs/shared/dist/features/currencies/utils/index.js"),d=t("../../../node_modules/console-browserify/index.js");const l=(e,s,t)=>{const a=(0,i.A)();(0,r.useEffect)((()=>{"development"==="MISSING_ENV_VAR".environment&&d.warn("Hook useTokenFiatValue is deprecated.")}),[]);const n=Number(t??0);return{value:Number(s)*n,prefix:(0,o.MK)(a.ticker,a.symbol),price:n}};var c=t("../../libs/shared/dist/features/currencies/hooks/useCurrencyFormatter.js")},"../../libs/shared/dist/features/currencies/utils/symbolFormatter.js":(e,s,t)=>{t.d(s,{M:()=>i});const a=e=>`${e} `,n={BHD:a,CHF:a,CZK:a,DKK:a,HUF:a,KWD:a,LKR:a,MMK:a,NOK:a,PKR:a,PLN:a,RUB:a,SAR:a,SEK:a,VEF:a},i=(e,s)=>n[e]?n[e](s||e):s||e},"../../libs/shared/dist/features/dappCommunication/context/DappInfo/index.js":(e,s,t)=>{t.d(s,{N:()=>i,s:()=>n});var a=t("../../../node_modules/react/index.js");const n=(0,a.createContext)({origin:"",host:"",title:"",blinkUrl:void 0}),i=()=>(0,a.useContext)(n)},"../../libs/shared/dist/features/featureFlags/constants/index.js":(e,s,t)=>{t.d(s,{Go:()=>a,Lu:()=>n,SU:()=>i,qX:()=>r});const a="Initialize",n="CloseClicked",i="CTAClicked",r="page"},"../../libs/shared/dist/features/featureFlags/infoScreen/index.js":(e,s,t)=>{t.d(s,{P:()=>n,c:()=>a});const a="/infoScreenJupiterSwap",n="/infoScreenUnverifiedNftGuide"},"../../libs/shared/dist/features/featureFlags/nftSingle/index.js":(e,s,t)=>{t.d(s,{C4:()=>l,KZ:()=>i,Qc:()=>r,Yn:()=>u,cq:()=>d,dn:()=>m,uK:()=>c,ub:()=>o});var a=t("../../libs/shared/dist/utils/featureFlags.js");const n="NftSingle",i=e=>a.Z.c(n,"SetAsPfpClicked",e),r=()=>a.Z.c(n,"RemoveAsPfpClicked"),o=()=>a.Z.c(n,"Save"),d=()=>a.Z.c(n,"ViewInExplorer"),l=()=>a.Z.c(n,"ViewOnTensor"),c=e=>a.Z.c(n,"MarkAsSpam",e),u=e=>a.Z.c(n,"UnmarkAsSpam",e),m=e=>a.Z.c(n,"ViewOnSolSniper",e)},"../../libs/shared/dist/features/featureFlags/onramper/index.js":(e,s,t)=>{t.d(s,{U:()=>n,l:()=>i});var a=t("../../libs/shared/dist/utils/featureFlags.js");const n=e=>{a.Z.pv("/onRamperBuyRoute",{source:e})},i=()=>{a.Z.pv("/onRamperInfoVideoRoute")}},"../../libs/shared/dist/features/featureFlags/promo/index.js":(e,s,t)=>{t.d(s,{A:()=>u,J6:()=>d,Og:()=>c,Rj:()=>l,kk:()=>m});var a=t("../../libs/shared/dist/utils/featureFlags.js");const n="RemoteBanner",i="IntermediaryScreen",r="CTAClicked",o="CloseClicked",d="/intermediaryRoute",l=async e=>a.Z.c(n,r,e),c=async e=>a.Z.c(n,o,e),u=async e=>a.Z.c(i,r,e),m=async({page:e})=>a.Z.c(i,o,{page:e})},"../../libs/shared/dist/features/featureFlags/signTx/index.js":(e,s,t)=>{t.d(s,{Ad:()=>k,D6:()=>h,Ic:()=>o,Iz:()=>r,Jb:()=>c,LO:()=>m,Nk:()=>u,S6:()=>l,T4:()=>x,WG:()=>f,Ww:()=>i,Y$:()=>g,jV:()=>d,ml:()=>b,tP:()=>p,vH:()=>y});var a=t("../../libs/shared/dist/utils/featureFlags.js");const n="SignTx",i=e=>{a.Z.c(n,"Stake",e)},r=e=>{a.Z.c(n,"Unstake",e)},o=e=>{a.Z.c(n,"InstantUnstake",e)},d=e=>{a.Z.c(n,"Swap",e)},l=e=>{a.Z.c(n,"InstantSell",e)},c=e=>a.Z.c(n,"ListForSale",e),u=e=>a.Z.c(n,"Delist",e),m=e=>a.Z.c(n,"EditListing",e),f=e=>a.Z.c(n,"SendNftSingle",e),p=e=>a.Z.c(n,"SendNftMultiple",e),b=e=>a.Z.c(n,"SendToken",e),h=e=>a.Z.c(n,"CloseTokenAccount",e),g=async e=>a.Z.c(n,"External",e),y=async e=>a.Z.c(n,"SplitStake",e),x=async e=>a.Z.c(n,"WithdrawStake",e),k=async e=>a.Z.c(n,"CloseStakeAccount",e)},"../../libs/shared/dist/features/featureFlags/singleToken/index.js":(e,s,t)=>{t.d(s,{E:()=>n,Z:()=>i});var a=t("../../libs/shared/dist/utils/featureFlags.js");const n=async(e,s,t,n)=>a.Z.c("TokenDetails","SocialsClick",{socialType:e,socialUrl:s,tokenTicker:t,tokenMintAddress:n}),i=async(e,s,t)=>a.Z.c("Token","ViewOnExplorer",{tokenTicker:e,tokenMintAddress:s,source:t})},"../../libs/shared/dist/features/featureFlags/swap/index.js":(e,s,t)=>{t.d(s,{Wz:()=>i,lh:()=>o,ml:()=>d,n$:()=>r,xN:()=>l});var a=t("../../libs/shared/dist/utils/featureFlags.js");const n="Swap",i=()=>{a.Z.c(n,"MaxCTA")},r=()=>{a.Z.c(n,"TooltipBuyClick")},o=()=>{a.Z.c(n,"TooltipRateClick")},d=()=>{a.Z.c(n,"TooltipMinimumReceivedClick")},l=()=>{a.Z.c(n,"SwitchTokenPlace")}},"../../libs/shared/dist/features/featureFlags/utils.js":(e,s,t)=>{t.d(s,{l:()=>n});var a=t("../../libs/shared/dist/utils/extension.js");const n=()=>a.Qd?"widget":a.UJ?"popup":a.Cy?"expanded":"web"},"../../libs/shared/dist/features/featureFlags/whatsNew/index.js":(e,s,t)=>{t.d(s,{D:()=>i,FA:()=>o,kr:()=>r,tR:()=>d});var a=t("../../libs/shared/dist/utils/featureFlags.js"),n=t("../../libs/shared/dist/features/featureFlags/constants/index.js");const i="/whatIsNewTxGuardsRoute",r="TxGuardsWhatsNewPopup",o=(e,s)=>{a.Z.c(e,n.Lu,{[n.qX]:s})},d=e=>{a.Z.c(e,n.SU)}},"../../libs/shared/dist/features/globalConfig/hooks/index.js":(e,s,t)=>{t.d(s,{ec:()=>o,$V:()=>d.$,LN:()=>l.L});var a=t("../../../node_modules/react/index.js"),n=t("../../libs/shared/dist/constants/autolock.js"),i=t("../../libs/shared/dist/storage/solflareService.js"),r=t("../../libs/shared/dist/features/globalConfig/context/index.js");const o=()=>{const{autoLock:e,setAutoLockTime:s,setAutoLockEnabled:t}=(0,r.A)(),o=(0,a.useCallback)((async e=>{const a=e!==n.pT.NEVER;s(e),t(a),await i.Z.solflareconfig.setField("autoLockTime",e),await i.Z.solflareconfig.setField("autoLock",a)}),[t,s]);return{autoLock:e,setDefaultAutoLock:(0,a.useCallback)((async()=>{await o(n.pT.TWENTY_FOUR_HOURS)}),[o]),changeAutoLock:o}};var d=t("../../libs/shared/dist/features/globalConfig/hooks/useLoadGlobalConfig.js"),l=t("../../libs/shared/dist/features/globalConfig/hooks/useNetwork.js")},"../../libs/shared/dist/features/nfts/api/flags.js":(e,s,t)=>{t.d(s,{T:()=>n});var a=t("../../libs/shared/dist/api/index.js");const n=async({addresses:e,flag:s,network:t="mainnet",publicKey:n,timestamp:i,signature:r})=>{const{body:o}=await(0,a.v_)("https://wallet-api.solflare.com/v2/flag/manage",{addresses:e,flag:s,network:t,publicKey:n,timestamp:i,type:"mint",signature:r});return o}},"../../libs/shared/dist/features/nfts/api/nfts.js":(e,s,t)=>{t.d(s,{H_:()=>l,J8:()=>r,Lu:()=>d,RW:()=>c,bH:()=>o});var a=t("../../libs/shared/dist/api/index.js"),n=t("../../libs/shared/dist/features/nfts/utils/prepareData.js");const i="https://wallet-api.solflare.com",r=async(e,s="mainnet",t="USD",n)=>{const{body:r}=await(0,a.v_)(`${i}/v2/portfolio/nfts/${e}?network=${s}&currency=${t}&listings=1&unverifiedSupport=true`,{suspicious:n?.suspicious||[],legitimate:n?.legitimate||[]});return r},o=({nfts:e,groups:s,totalFloor:t,currencyTotalFloor:a},i)=>{const r=(0,n.H_)({nfts:e,groups:s},i),o=(0,n.iE)({nfts:e,groups:s},i),d=(0,n.c0)(t);return{nfts:[...r,...o],heroUi:(0,n.c0)(a),heroUiSol:d}},d=({nfts:e,groups:s},t)=>{const a=(0,n.iq)(e,t),i=s.find((e=>e.id===t)),r=(e=>"suspicious"===e?.id?"Unverified":"scam"===e?.id?"Blocklist":e?.name??"")(i);return i?{nfts:a,heroUi:(0,n.c0)(i.currencyTotalFloor,r,i.id),heroUiSol:(0,n.c0)(i.totalFloor,r,i.id)}:null},l=async(e,s,t="mainnet",n="USD",r=!1)=>{const o=new URLSearchParams({currency:n,network:t,showOffer:String(+r)}),{body:d}=await(0,a.U2)(`${i}/v2/portfolio/nfts/${e}/${s}?${o.toString()}`);return d||{}},c=async(e,s,t="mainnet")=>{const n=new URLSearchParams({network:t}),{body:r}=await(0,a.U2)(`${i}/v2/portfolio/nfts/${e}/${s}/offer?${n.toString()}`);return r}},"../../libs/shared/dist/features/nfts/constants.js":(e,s,t)=>{t.d(s,{YF:()=>o,Yn:()=>l,dY:()=>d,mr:()=>i,vD:()=>r});var a=t("../../libs/shared/dist/assets/nft-default-img.svg"),n=t("../../libs/shared/dist/assets/nft-empty.svg");const i=a,r=n,o="image";var d,l;!function(e){e.TOTAL_VALUE="total-value",e.FLOOR_PRICE="floor-price",e.BEST_PERFORMANCE="best-performance",e.BY_NEWEST="newest",e.ALPHABETICALLY="alphabetically",e.RARITY="rarity"}(d||(d={})),function(e){e[e.NonFungible=0]="NonFungible",e[e.FungibleAsset=1]="FungibleAsset",e[e.Fungible=2]="Fungible",e[e.NonFungibleEdition=3]="NonFungibleEdition",e[e.ProgrammableNonFungible=4]="ProgrammableNonFungible"}(l||(l={}))},"../../libs/shared/dist/features/nfts/context/ListTutorial/index.js":(e,s,t)=>{t.d(s,{G7:()=>o,b2:()=>d});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../libs/shared/dist/storage/solflareService.js");const r=(0,n.createContext)(null),o=({children:e})=>{const[s,t]=(0,n.useState)(!1);(0,n.useEffect)((()=>{i.Z.nftListTensorTutorial.get().then((e=>"boolean"==typeof e&&t(e)))}),[]);const o=(0,n.useCallback)((async()=>{t(!0),await i.Z.nftListTensorTutorial.set(!0)}),[]),d=(0,n.useMemo)((()=>({isTutorialDisplayed:s,setTutorialAsDisplayed:o})),[s,o]);return(0,a.jsx)(r.Provider,{value:d,children:e})},d=()=>{const e=(0,n.useContext)(r);if(null===e)throw new Error("useListTutorial must be used within a ListTutorial");return e}},"../../libs/shared/dist/features/nfts/context/NFT/index.js":(e,s,t)=>{t.d(s,{P:()=>b,$:()=>h});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../../node_modules/dayjs/dayjs.min.js"),r=t.n(i),o=t("../../libs/shared/dist/storage/solflareService.js"),d=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),l=t("../../libs/shared/dist/features/walletData/hooks/index.js"),c=t("../../libs/shared/dist/features/nfts/api/flags.js"),u=t("../../libs/shared/dist/features/nfts/constants.js"),m=t("../../libs/shared/dist/features/nfts/utils/transferUtils.js");var f=t("../../libs/shared/dist/features/nfts/context/constants.js");const p=(0,n.createContext)(f.P),b=({children:e})=>{const{isSelectMode:s,selectedIds:t,toggleSelected:i,isGridView:f,handleGridClick:b,setIsDrawerOpen:h,isDrawerOpen:g,setSelectedIds:y,toggleVisibleContext:x,selectAll:k,isVisibleContextSelected:j,setIsVisibleContextSelected:v,searchTerm:w,setSearchTerm:_,sortedKey:S,setSortedKey:C,sortedGroupKey:T,setSortedGroupKey:A,selectedIdsCount:I,setSelectedIdsCount:P,isJunkHidden:N,setIsJunkHidden:E,isRarityDisplayed:F,setIsRarityDisplayed:D,nftsToTransfer:L,setNftsToTransfer:B,isTransferInProgress:R,setIsTransferInProgress:U,receiveModalOpen:M,setReceiveModalOpen:K,isSendTransfer:$,setIsSendTransfer:O,markedAsSpam:Z,setMarkedAsSpam:V,isContextStateLoading:q,setIsContextStateLoading:H,userJunkPreference:W,setUserJunkPreference:G}=(()=>{const[e,s]=(0,n.useState)(""),[t,a]=(0,n.useState)(""),[i,r]=(0,n.useState)(null),[d,l]=(0,n.useState)(new Map),[c,u]=(0,n.useState)(0),[f,p]=(0,n.useState)(!1),[b,h]=(0,n.useState)(!1),[g,y]=(0,n.useState)(!0),[x,k]=(0,n.useState)(""),[j,v]=(0,n.useState)(null),[w,_]=(0,n.useState)(!0),[S,C]=(0,n.useState)(!1),[T,A]=(0,n.useState)([]),[I,P]=(0,n.useState)(!1),[N,E]=(0,n.useState)(!0),[F,D]=(0,n.useState)(!0),[L,B]=(0,n.useState)(!0),R=(0,n.useCallback)((async e=>{y(e),await o.Z.gridView.set(e)}),[]),U=(0,n.useCallback)((async()=>{const e=await o.Z.gridView.get();if(null===e)return await o.Z.gridView.set(g);y(e)}),[g]),M=(e,s)=>{const t=e.reduce(((e,s)=>(e.set(s.id,s),e)),new Map),a=(0,m.Uw)(s??{},t);l(t),p(!0),u(a.length||0),A(a||[])};return(0,n.useEffect)((()=>{U()}),[U]),{isSelectMode:d.size>0,selectedIds:d,toggleSelected:(e,s,t)=>{l((a=>(a.has(e.id)?((e,s,t)=>{if(s)return e.delete(t.id),void u((e=>e-Number(s)));e.delete(t.id),u((e=>e-1))})(a,s,e):((e,s,t)=>{if(s)return e.set(t.id,t),void u((e=>e+Number(s)));e.set(t.id,t),u((e=>e+1))})(a,s,e),0===a.size&&p(!1),a.size>0&&p(!0),A((0,m.Uw)(t??{},d)||[]),new Map(a))))},isGridView:g,setGridView:y,isDrawerOpen:b,setIsDrawerOpen:h,handleGridClick:R,setSelectedIds:l,selectAll:M,toggleVisibleContext:(e,s)=>{if(d.size>0)return l(new Map),p(!1),u(0),void A([]);M(e,s)},setIsVisibleContextSelected:p,isVisibleContextSelected:f,searchTerm:x,setSearchTerm:k,sortedKey:e,setSortedKey:s,selectedIdsCount:c,setSelectedIdsCount:u,isJunkHidden:j,setIsJunkHidden:v,isRarityDisplayed:w,setIsRarityDisplayed:_,isTransferInProgress:S,setIsTransferInProgress:C,nftsToTransfer:T,setNftsToTransfer:A,receiveModalOpen:I,setReceiveModalOpen:P,isSendTransfer:N,setIsSendTransfer:E,sortedGroupKey:t,setSortedGroupKey:a,markedAsSpam:i,setMarkedAsSpam:r,isContextStateLoading:F,setIsContextStateLoading:D,userJunkPreference:L,setUserJunkPreference:B}})(),Q=(0,d.LN)(),{publicKey:z}=(0,l.rT)(),Y=(0,n.useCallback)((async e=>{C(e),await o.Z.solflarenftsorting.set(e)}),[C]),J=(0,n.useCallback)((async()=>{if(!S){const e=await o.Z.solflarenftsorting.get()||u.dY.TOTAL_VALUE;C(e)}}),[C,S]),X=(0,n.useCallback)((async e=>{A(e),await o.Z.solflarenftgroupsorting.set(e)}),[A]),ee=(0,n.useCallback)((async()=>{if(!T){const e=await o.Z.solflarenftgroupsorting.get()||u.dY.RARITY;A(e)}}),[A,T]),se=(0,n.useCallback)((async()=>{if(!Z){const e=await o.Z.markedNfts.get()||null;V(e)}}),[Z,V]),te=(0,n.useCallback)((async(e,s,t)=>{V(e),(0,c.T)({addresses:s,flag:t,network:Q.cluster,publicKey:z,timestamp:r()().unix()}),await o.Z.markedNfts.set(e)}),[Q.cluster,V,z]),ae=(0,n.useCallback)((async()=>{await Promise.all([J(),ee(),se()]),H(!1)}),[ee,se,J,H]);(0,n.useEffect)((()=>{ae()}),[ae]);const ne=(0,n.useMemo)((()=>({isSelectMode:s,selectedIds:t,setSelectedIds:y,toggleSelected:i,isGridView:f,setIsDrawerOpen:h,handleGridClick:b,isDrawerOpen:g,sortedKey:S,sortedGroupKey:T,setSortedGroupKey:A,handleSortClick:Y,handleSortGroupClick:X,selectAll:k,toggleVisibleContext:x,isVisibleContextSelected:j,setIsVisibleContextSelected:v,searchTerm:w,setSearchTerm:_,selectedIdsCount:I,setSelectedIdsCount:P,isJunkHidden:N,setIsJunkHidden:E,isRarityDisplayed:F,setIsRarityDisplayed:D,nftsToTransfer:L,setNftsToTransfer:B,isTransferInProgress:R,setIsTransferInProgress:U,receiveModalOpen:M,setReceiveModalOpen:K,isSendTransfer:$,setIsSendTransfer:O,markedAsSpam:Z,setMarkedAsSpam:V,isContextStateLoading:q,setIsContextStateLoading:H,onMarkAsSpamClick:te,userJunkPreference:W,setUserJunkPreference:G})),[s,t,y,i,f,h,b,g,S,T,A,Y,X,k,x,j,v,w,_,I,P,N,E,F,D,L,B,R,U,M,K,$,O,Z,V,q,H,te,W,G]);return(0,a.jsx)(p.Provider,{value:ne,children:q?null:e})},h=()=>(0,n.useContext)(p)},"../../libs/shared/dist/features/nfts/context/SingleNFT/index.js":(e,s,t)=>{t.d(s,{V:()=>I,_:()=>A});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../../node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),o=t("../../libs/wallet-core/dist/shared.js"),d=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),l=t("../../libs/foundation-ui/dist/index.js"),c=t("../../libs/shared/dist/features/pfp/components/index.js"),u=t("../../libs/shared/dist/utils/truncateMiddle.js");const m=({walletPubkey:e,walletName:s,walletIsBurner:t})=>(0,a.jsx)(l.ConfirmTransaction,{avatar:(0,a.jsx)(l.IconAvatar,{size:"xl",icon:d.V3X}),transactionFromItem:(0,a.jsx)(l.TXListItem,{title:s,subtitle:(0,u.r)(e),avatar:(0,a.jsx)(c.y,{publicKey:e})}),transactionToItem:(0,a.jsx)(l.TXListItem,{title:s,subtitle:(0,u.r)(e),avatar:(0,a.jsx)(l.Avatar,{variant:"circle",boring:{variant:"solflare"+(t?"Secondary":"Primary"),name:e}})})});var f=t("../../libs/shared/dist/hooks/useResizedImage.js");const p=({walletPubkey:e,walletName:s,newAvatarImage:t})=>{const{url:n}=(0,f.j)(t);return(0,a.jsx)(l.ConfirmTransaction,{avatar:(0,a.jsx)(l.IconAvatar,{size:"xl",icon:d.V3X}),transactionFromItem:(0,a.jsx)(l.TXListItem,{title:s,subtitle:(0,u.r)(e),avatar:(0,a.jsx)(c.y,{publicKey:e})}),transactionToItem:(0,a.jsx)(l.TXListItem,{title:s,subtitle:(0,u.r)(e),avatar:(0,a.jsx)(l.NFTAvatar,{src:n})})})};var b=t("../../libs/shared/dist/utils/extension.js"),h=t("../../libs/shared/dist/features/featureFlags/index.js"),g=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),y=t("../../libs/shared/dist/features/pfp/api/index.js"),x=t("../../libs/shared/dist/features/pfp/queries/index.js"),k=t("../../libs/shared/dist/features/shared/snackbar/index.js"),j=t("../../libs/shared/dist/features/transactionFlow/context/index.js"),v=t("../../libs/shared/dist/features/walletData/hooks/index.js"),w=t("../../libs/shared/dist/features/nfts/utils/index.js"),_=t("../../libs/shared/dist/features/nfts/utils/prepareData.js"),S=t("../../libs/shared/dist/features/nfts/utils/transferUtils.js"),C=t("../../libs/shared/dist/features/nfts/context/NFT/index.js"),T=t("../../../node_modules/console-browserify/index.js");const A=(0,n.createContext)(null),I=({nft:e,children:s})=>{const{t}=(0,i.$)(),{enqueueSnackbar:d}=(0,k.Ds)(),l=(0,r.NL)(),{transactionInit:c}=(0,j.p)(),{publicKey:u,walletType:I,accountName:P}=(0,v.rT)(),{onMarkAsSpamClick:N,markedAsSpam:E}=(0,C.$)(),F=(0,g.LN)(),{data:D,refetch:L}=(0,x.F)(u),[B,R]=(0,n.useState)((0,w.DQ)(e)),{url:U}=(0,f.j)(e.image,{width:b.UJ?400:1e3}),{setIsTransferInProgress:M,setNftsToTransfer:K,setIsSendTransfer:$}=(0,C.$)(),O=I===o.CO,Z=(0,n.useCallback)((async()=>{let s="";const{src:t,category:a,originalSrc:n}=(0,_.gw)(e);if(!t)return;(0,h.ub)(),a&&(s=n||t);const i=s.split("ext=")[1]||e.image?.split("ext=")[1];await fetch(s).then((e=>e.blob())).then((s=>{const t=document.createElement("a");t.href=URL.createObjectURL(s),t.download=`${e.name}${i?`.${i}`:""}`,t.click()})).catch(T.error)}),[e]),V=(0,n.useCallback)((async()=>{M(!0),$(!0),K([{image:U||e.image,name:e.name,subname:e.groupName??"",group:e.group,tokenAccountPubkey:e.tokenData?.pubkey??"",mint:e.id,decimals:e.tokenData?.decimals??0,compressed:e.compressed,typeForPosthog:(0,S.n3)(e),isLastNft:1===Number(e.tokenData?.uiAmount??1),amount:Number(e.tokenData?.uiAmount??1),symbol:e.symbol,metaplexCore:!!e.metaplexCore}])}),[e,U,$,M,K]),q=(0,n.useCallback)((async()=>{M(!0),$(!1),K([{image:U||e.image,name:e.name,subname:"scam"===e.group?"":e.groupName??"",group:e.group,tokenAccountPubkey:e.tokenData?.pubkey??"",mint:e.id,decimals:e.tokenData?.decimals??0,compressed:e.compressed,typeForPosthog:(0,S.n3)(e),isLastNft:1===Number(e.tokenData?.uiAmount),amount:Number(e.tokenData?.uiAmount??1),symbol:e.symbol,metaplexCore:!!e.metaplexCore}])}),[e,U,$,M,K]),H=(0,n.useCallback)((async()=>{if(!e.compressed)return(0,h.KZ)({alreadyHadPfp:!!D&&D.isAvailable}),new Promise((s=>{c({title:t("confirm_transaction_title"),commitment:"confirmed",txBuilder:y.mn,builderParams:{address:u,mint:e.id,token:e.tokenData.pubkey,setComputeBudget:!0,network:F.cluster},confirmDialog:(0,a.jsx)(p,{walletPubkey:u,walletName:P,newAvatarImage:U||e.image}),onConfirm:()=>{s(),L()}})}))}),[e.compressed,e.id,e.tokenData,e.image,D,c,t,u,F.cluster,P,U,L]),W=(0,n.useCallback)((async()=>{if(!e.compressed)return(0,h.Qc)(),new Promise((e=>{c({title:t("confirm_transaction_title"),commitment:"confirmed",txBuilder:y.Yi,builderParams:{address:u,setComputeBudget:!0,network:F.cluster},confirmDialog:(0,a.jsx)(m,{walletPubkey:u,walletName:P,walletIsBurner:O}),onConfirm:()=>{e(),L()}})}))}),[e.compressed,c,t,u,P,O,F.cluster,L]),G=(0,n.useCallback)((async()=>{R(!0);const s=(0,S.eN)(E,[e.id]),t=(0,S.Iq)(E,s);d("Collectible marked as spam",{variant:"info",autoHideDuration:1e3}),await N(s,t,"suspicious"),await l.invalidateQueries(["nfts"])}),[d,E,e.id,N,l]),Q=(0,n.useCallback)((async()=>{R(!1);const s=(0,S.UH)(E,[e.id]),t=(0,S.Xm)(E,s);d("Collectible unmarked as spam",{variant:"info",autoHideDuration:1e3}),await N(s,t,"legitimate"),await l.invalidateQueries(["nfts"])}),[d,E,e.id,N,l]),z=(0,n.useMemo)((()=>({download:Z,burn:q,setAsPfp:H,removeAsPfp:W,send:V,markAsSuspicious:G,markAsLegitimate:Q,nft:e,isMarkedAsSpam:B})),[Z,q,H,W,V,G,Q,e,B]);return(0,a.jsx)(A.Provider,{value:z,children:s})}},"../../libs/shared/dist/features/nfts/context/index.js":(e,s,t)=>{t.d(s,{$T:()=>a.$,G7:()=>i.G7,PP:()=>a.P,V1:()=>n.V});var a=t("../../libs/shared/dist/features/nfts/context/NFT/index.js"),n=t("../../libs/shared/dist/features/nfts/context/SingleNFT/index.js"),i=t("../../libs/shared/dist/features/nfts/context/ListTutorial/index.js")},"../../libs/shared/dist/features/nfts/hooks/useNftData.js":(e,s,t)=>{t.d(s,{c:()=>l});var a=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),n=t("../../libs/shared/dist/features/currencies/hooks/index.js"),i=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),r=t("../../libs/shared/dist/features/walletData/hooks/index.js"),o=t("../../libs/shared/dist/features/nfts/api/nfts.js"),d=t("../../libs/shared/dist/features/nfts/context/index.js");const l=()=>{const{publicKey:e}=(0,r.rT)(),s=(0,i.LN)(),t=(0,n.Af)(),{markedAsSpam:l}=(0,d.$T)();return(0,a.a)({queryKey:["nfts",e,s.url,t.ticker,l],queryFn:()=>(0,o.J8)(e,s.cluster,t.ticker,l),keepPreviousData:!0,enabled:!!e})}},"../../libs/shared/dist/features/nfts/utils/enrichData.js":(e,s,t)=>{t.d(s,{Iy:()=>n,jO:()=>a});const a=e=>e<0?"error":"success",n=(e,s)=>{if("suspicious"===s||"scam"===s)return"suspicious"===(t=s)?{variant:"susp",percentage:"Suspicious"}:"scam"===t?{variant:"error",percentage:"Scam"}:{variant:"success",percentage:""};var t;if(!e)return{variant:"success",percentage:""};switch(!0){case e<=.3:return{variant:"error",percentage:"Mythic"};case e<=1:return{variant:"orange",percentage:"Legendary"};case e<=3:return{variant:"purple",percentage:"Epic"};case e<=10:return{variant:"darkBlue",percentage:"Rare"};case e<=30:return{variant:"success",percentage:"Uncommon"};case e<=100:return{variant:"default",percentage:"Common"};default:return{variant:"success",percentage:""}}}},"../../libs/shared/dist/features/nfts/utils/index.js":(e,s,t)=>{t.d(s,{oW:()=>l,IW:()=>k,Vp:()=>c,Xc:()=>y,Vh:()=>x,Kl:()=>h,EB:()=>u,Pl:()=>p,oA:()=>g,gO:()=>m,$h:()=>b,DQ:()=>f,_:()=>d,i0:()=>r,Ng:()=>o});var a=t("../../libs/shared/dist/features/nfts/constants.js"),n=t("../../../node_modules/lodash/lodash.js"),i=t("../../libs/shared/dist/utils/lamportToSol.js");const r=(e,s,t)=>{const a=t??null,i=s?.lastSold&&(0,n.isNumber)(s.lastSold.amount)?s.lastSold.amount:null,r=s?.lastSold&&(0,n.isNumber)(s.lastSold.usdThen)?s.lastSold.usdThen:null,o=e.floor&&(0,n.isNumber)(e.floor.price)?e.floor.price:null,d=s?.traitFloorPrice&&(0,n.isNumber)(s.traitFloorPrice)?s.traitFloorPrice:null;return{rarity:y(e.rarity?.percentage)??null,boughtForInSol:i,boughtForInUsd:null!==i&&null!==r?i*r:null,floorPriceInSol:o,floorPriceInUsd:null!==o&&null!==a?o*a:null,traitFloorPriceInSol:d,traitFloorPriceInUsd:null!==d&&null!==a?d*a:null}},o=(e,s,t)=>{const a=t??null,i=s?.lastSold&&(0,n.isNumber)(s?.lastSold.amount)?s.lastSold.amount:null,r=s?.lastSold&&(0,n.isNumber)(s.lastSold.usdThen)?s.lastSold.usdThen:null,o=e.floor&&(0,n.isNumber)(e.floor.price)?e.floor.price:null,d=s?.traitFloorPrice&&(0,n.isNumber)(s.traitFloorPrice)?s.traitFloorPrice:null;return{rarity:y(e.rarity?.percentage)??null,boughtForInSol:i,boughtForInUsd:null!==i&&null!==r?i*r:null,floorPriceInSol:o,floorPriceInUsd:null!==o&&null!==a?o*a:null,traitFloorPriceInSol:d,traitFloorPriceInUsd:null!==d&&null!==a?d*a:null}},d=(e,s,t,a)=>{const i=a??null,r=e.floor&&(0,n.isNumber)(e.floor.price)?e.floor.price:null,o=s?.lastSold&&(0,n.isNumber)(s?.lastSold.amount)?s.lastSold.amount:null,d=s?.lastSold&&(0,n.isNumber)(s.lastSold.usdThen)?s.lastSold.usdThen:null,l=s?.traitFloorPrice&&(0,n.isNumber)(s.traitFloorPrice)?s.traitFloorPrice:null;return{amountListedForInSol:t,amountListedForInUsd:null!==i?t*i:null,rarity:y(e.rarity?.percentage)??null,floorPriceInSol:r,floorPriceInUsd:null!==r&&null!==i?r*i:null,boughtForInSol:o,boughtForInUsd:null!==o&&null!==d?o*d:null,traitFloorPriceInSol:l,traitFloorPriceInUsd:null!==l&&null!==i?l*i:null,market:"tensor"}},l=(e,s,t)=>{const a=t??null,r=e.floor&&(0,n.isNumber)(e.floor.price)?e.floor.price:null,o=(0,i.s)(e.listedPrice).toNumber(),d=s?.lastSold&&(0,n.isNumber)(s?.lastSold.amount)?s.lastSold.amount:null,l=s?.lastSold&&(0,n.isNumber)(s.lastSold.usdThen)?s.lastSold.usdThen:null,c=s?.traitFloorPrice&&(0,n.isNumber)(s.traitFloorPrice)?s.traitFloorPrice:null;return{amountListedForInSol:o,amountListedForInUsd:null!==a?o*a:null,rarity:y(e.rarity?.percentage)??null,floorPriceInSol:r,floorPriceInUsd:null!==r&&null!==a?r*a:null,boughtForInSol:d,boughtForInUsd:null!==d&&null!==l?d*l:null,traitFloorPriceInSol:c,traitFloorPriceInUsd:null!==c&&null!==a?c*a:null,market:"tensor"}},c=(e,s,t,a)=>{const r=a??null,o=e.floor&&(0,n.isNumber)(e.floor.price)?e.floor.price:null,d=(0,i.s)(e.listedPrice).toNumber(),l=s?.lastSold&&(0,n.isNumber)(s?.lastSold.amount)?s.lastSold.amount:null,c=s?.lastSold&&(0,n.isNumber)(s.lastSold.usdThen)?s.lastSold.usdThen:null,u=s?.traitFloorPrice&&(0,n.isNumber)(s.traitFloorPrice)?s.traitFloorPrice:null;return{amountListedForInSol:t,amountListedForInUsd:null!==r?t*r:null,oldAmountListedForInSol:d,oldAmountListedForInUsd:null!==r?d*r:null,rarity:y(e.rarity?.percentage)??null,floorPriceInSol:o,floorPriceInUsd:null!==o&&null!==r?o*r:null,boughtForInSol:l,boughtForInUsd:null!==l&&null!==c?l*c:null,traitFloorPriceInSol:u,traitFloorPriceInUsd:null!==u&&null!==r?u*r:null,market:"tensor"}},u=(e,s,t,a,i,r)=>{const o=r??null,d=e.floor&&(0,n.isNumber)(e.floor.price)?e.floor.price:null,l=s?.lastSold&&(0,n.isNumber)(s?.lastSold.amount)?s.lastSold.amount:null,c=s?.lastSold&&(0,n.isNumber)(s.lastSold.usdThen)?s.lastSold.usdThen:null,u=s?.traitFloorPrice&&(0,n.isNumber)(s.traitFloorPrice)?s.traitFloorPrice:null;return{rarity:y(e.rarity?.percentage),sellerGetsInSol:t,sellerGetsInUsd:null!==t&&null!==o?t*o:null,feePaidInSol:a?+a:null,feePaidInUsd:null!==a&&null!==o?+a*o:null,market:i,boughtForInSol:l,boughtForInUsd:null!==l&&null!==c?l*c:null,floorPriceInSol:d,floorPriceInUsd:null!==d&&null!==o?d*o:null,traitFloorPriceInSol:u,traitFloorPriceInUsd:null!==u&&null!==o?u*o:null}},m=e=>!!e&&"scam"===e.group,f=e=>!!e&&"suspicious"===e.group,p=e=>f(e)||m(e),b=e=>!(!e||!e.tokenData)&&(null===e.tokenStandard?e.tokenData.uiAmount>1&&0===e.tokenData.decimals:(e.tokenStandard===a.Yn.FungibleAsset||e.tokenStandard===a.Yn.NonFungible)&&1!==e.tokenData.uiAmount),h=e=>!!e&&Number(e.currencyFloor?.price)>0,g=e=>h(e)&&!b(e)&&!e?.metaplexCore,y=e=>{if(e)switch(!0){case e<=.3:return"mythic";case e<=1:return"legendary";case e<=3:return"epic";case e<=10:return"rare";case e<=30:return"uncommon";case e<=100:return"common";default:return}},x=e=>({mythic:"Mythic",legendary:"Legendary",epic:"Epic",rare:"Rare",uncommon:"Uncommon",common:"Common"}[e]),k=(e,s="%")=>e<.01?`<0.01${s}`:`${e.toFixed(2)}${s}`},"../../libs/shared/dist/features/nfts/utils/prepareData.js":(e,s,t)=>{t.d(s,{H_:()=>l,c0:()=>c,gw:()=>f,iE:()=>d,iq:()=>u});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/lodash/lodash.js"),i=t("../../libs/shared/dist/features/currencies/components/index.js"),r=t("../../libs/shared/dist/features/nfts/constants.js"),o=t("../../libs/shared/dist/features/nfts/utils/enrichData.js");const d=({nfts:e,groups:s},t)=>{const n=e.reduce(((e,s)=>(s.group&&(!e[s.group]||s.rarity?.rank&&s.rarity?.rank<e[s.group]?.rank)&&(e[s.group]={image:s.image}),e)),{});return s.map((s=>{const o="fiat"===t?s.currencyTotalFloor?.price:s.totalFloor?.price,d="fiat"===t?s.currencyFloor?.price:s.floor?.price,l="fiat"===t?s.currencyTotalFloor?.percentage:s.totalFloor?.percentage;if("scam"===s.id)return{id:s.id,title:"Blocklist",image:n[s.id]?.image??s.image??r.mr,collectionCount:String(s.count),collectionSelectableCount:String(s.count),group:s.id,sortByAmount:o??0,sortByValue:d??0,sortByPerformance:l??0,amount:""};if("suspicious"===s.id){const e=!!s?.currencyTotalFloor?.price||!!s?.totalFloor?.price;return{id:s.id,title:"Unverified",image:n[s.id]?.image??s.image??r.mr,errorFallbackImage:r.mr,collectionCount:String(s.count),collectionSelectableCount:String(s.count),group:s.id,sortByAmount:o??0,sortByValue:d??0,sortByPerformance:l??0,amount:e?(0,a.jsx)(i.NT,{configKey:"nftFloorPrice",fiat:(0,a.jsx)(i.sp,{value:s.currencyTotalFloor?.price??0}),token:(0,a.jsx)(i.EI,{value:s.totalFloor?.price??0})}):""}}const c=e.filter((e=>e.listed&&e.group===s.id)).length,u=e.filter((e=>e.group===s.id)).length===c;return{id:s.id,title:s.name.trim(),image:n[s.id]?.image??s.image??r.mr,fallbackImage:n[s.id]?.image??s.image??r.mr,errorFallbackImage:r.mr,collectionCount:String(s.count),collectionSelectableCount:String(s.count-c),group:s.id,sortByAmount:o??0,sortByValue:d??0,sortByPerformance:l??0,disabled:u,amount:o&&o>0?(0,a.jsx)(i.NT,{configKey:"nftFloorPrice",fiat:(0,a.jsx)(i.sp,{value:s.currencyTotalFloor?.price??0}),token:(0,a.jsx)(i.EI,{value:s.totalFloor?.price??0})}):"",value:d&&d>0?(0,a.jsx)(i.NT,{configKey:"nftFloorPrice",fiat:(0,a.jsx)(i.sp,{value:s.currencyFloor?.price??0}),token:(0,a.jsx)(i.EI,{value:s.floor?.price??0})}):"",gridViewListedPillText:c>0?`${c} Listed`:void 0,listViewListedPillText:c>0?`${c}`:void 0,...m(s.currencyTotalFloor?.percentage??0,s.totalFloor?.percentage??0,t)}}))},l=({nfts:e,groups:s},t)=>{const o=(0,n.keyBy)(s,"id");return e.filter((e=>e.group!==o[e.group||""]?.id)).map((e=>{const s="fiat"===t?e.currencyFloor?.price:e.floor?.price,n="fiat"===t?e.currencyFloor?.price:e.floor?.price,o="fiat"===t?e.currencyFloor?.percentage??0:e.floor?.percentage??0;return{id:e.id,group:e.group,image:e?.image??r.mr,fallbackImage:e.image,errorFallbackImage:r.mr,title:e.name?.trim(),sortByAmount:s??0,sortByValue:n??0,sortByPerformance:o,listed:e.listed,gridViewListedPillText:e.listed?"Listed":null,listViewListedPillText:e.listed?null:void 0,disabled:e.listed,amount:s&&s>0?(0,a.jsx)(i.NT,{configKey:"nftFloorPrice",fiat:(0,a.jsx)(i.sp,{value:e.currencyFloor?.price??0}),token:(0,a.jsx)(i.EI,{value:e.floor?.price??0})}):"",value:n&&n>0?(0,a.jsx)(i.NT,{configKey:"nftFloorPrice",fiat:(0,a.jsx)(i.sp,{value:e.currencyFloor?.price??0}),token:(0,a.jsx)(i.EI,{value:e.floor?.price??0})}):"",...m(e.currencyFloor?.percentage??0,e.floor?.percentage??0,t)}}))},c=(e,s,t)=>({name:s||"",price:String(e?.price??0),amountChange:String(e?.change??0),percentageChange:String(e?.percentage??0),variant:(0,o.jO)(e?.change??0),groupId:t}),u=(e,s)=>{const t=e?.filter((e=>e.group===s)),n="suspicious"===s,d="scam"===s;return t.map((e=>{const s=!!e?.currencyFloor?.price||!!e?.floor?.price;return{id:e.id,group:e.group,image:e?.image??r.mr,fallbackImage:e.image,errorFallbackImage:r.mr,title:e.name?.trim(),isScam:"scam"===e.group,amount:n&&s&&(0,a.jsx)(i.NT,{configKey:"nftFloorPrice",fiat:(0,a.jsx)(i.sp,{value:e.currencyFloor?.price??0}),token:(0,a.jsx)(i.EI,{value:e.floor?.price??0,displayType:"value"})}),value:n&&s&&(0,a.jsx)(i.NT,{configKey:"nftFloorPrice",fiat:(0,a.jsx)(i.sp,{value:e.currencyFloor?.price??0}),token:(0,a.jsx)(i.EI,{value:e.floor?.price??0,displayType:"value"})}),sortByRarity:e.rarity?.rank??0,tagValues:(0,o.Iy)(d?0:e.rarity?.percentage),listed:e.listed,gridViewListedPillText:e.listed?"Listed":void 0,listViewListedPillText:e.listed?null:void 0,disabled:e.listed}}))},m=(e,s,t)=>!e&&"fiat"===t||!s&&"token"===t?null:{tagValues:{variant:(0,o.jO)("fiat"===t?e:s),percentage:(0,a.jsx)(i.NT,{configKey:"nftFloorPrice",fiat:(0,a.jsx)(i.Tf,{value:e||"0",showSign:!0}),token:(0,a.jsx)(i.Tf,{value:s||"0",showSign:!0})})}},f=e=>(({image:e,animationUrl:s,properties:t})=>{const a=t?.category,n=e??r.mr;if(!a)return{category:r.YF,src:n,originalSrc:e??r.mr};if("video"===a)return{category:a,src:s??r.mr,posterSrc:n};if("vr"===a||"model"===a)return{category:a,src:s??r.mr,posterSrc:n};if("audio"===a){const e=t.files.find((e=>e.type.startsWith("audio")));return{category:a,src:s||e?.uri||r.mr,posterSrc:n}}return"image"===a?{category:a,src:n,originalSrc:e??r.mr}:{category:r.YF,src:n??r.mr,originalSrc:e??r.mr}})(e)},"../../libs/shared/dist/features/nfts/utils/transferUtils.js":(e,s,t)=>{t.d(s,{B1:()=>o,Iq:()=>l,UH:()=>r,Uw:()=>h,Xm:()=>c,eA:()=>d,eN:()=>i,jo:()=>y,n3:()=>b,tX:()=>u,uk:()=>p,um:()=>f,vX:()=>m});var a=t("../../../node_modules/lodash/lodash.js"),n=t("../../libs/shared/dist/features/nfts/constants.js");const i=(e,s)=>{const t=e&&e?.suspicious||[];return{legitimate:[...(e&&e?.legitimate||[]).filter((e=>!s.includes(e)))||[]],suspicious:[...t,...s]}},r=(e,s)=>({suspicious:e&&e?.suspicious&&e?.suspicious.filter((e=>!s.includes(e)))||[],legitimate:[...e&&e?.legitimate||[],...s]}),o=(e,s)=>i(e,s.map((e=>e.mint))),d=(e,s)=>r(e,s.map((e=>e.mint))),l=(e,s)=>e&&e.suspicious?(0,a.difference)(s.suspicious,e.suspicious):s.suspicious||[],c=(e,s)=>e&&e.legitimate?(0,a.difference)(s.legitimate,e.legitimate):s.legitimate||[],u=e=>e.every((e=>g(e))),m=e=>e.some((e=>g(e))),f=e=>e.some((e=>"suspicious"===e.group)),p=e=>e.every((e=>"suspicious"===e.group)),b=e=>e.compressed?"compressed":e.tokenStandard===n.Yn.ProgrammableNonFungible?"programmable":!e.tokenStandard&&0===e.tokenData?.decimals&&Number(e.tokenData?.uiAmount)>1?"semiFungible":e.tokenStandard!==n.Yn.NonFungible&&e.tokenStandard!==n.Yn.FungibleAsset||1===Number(e.tokenData?.uiAmount)?"regular":"semiFungible",h=(e,s)=>e?.nfts?.reduce(((e,t)=>((t.group&&s.has(t.group)||s.has(t.id))&&!t.listed&&e.push({image:t.image??n.mr,name:t.name,group:t.group,subname:t.groupName||"",tokenAccountPubkey:t?.tokenData?.pubkey??"",mint:t.id,decimals:t?.tokenData?.decimals??0,compressed:t.compressed,typeForPosthog:b(t),isLastNft:1===Number(t.tokenData?.uiAmount),amount:Number(t.tokenData?.uiAmount??1),symbol:t.symbol,metaplexCore:!!t.metaplexCore}),e)),[]),g=e=>"suspicious"===e.group||"scam"===e.group,y=e=>e.toLowerCase()==="Burn NFT".toLowerCase()},"../../libs/shared/dist/features/notifications/api/index.js":(e,s,t)=>{t.d(s,{kG:()=>f,_v:()=>h,tL:()=>m,r1:()=>b,b2:()=>u,J:()=>g});var a=t("../../../node_modules/lodash/lodash.js"),n=t("../../libs/shared/dist/api/index.js"),i=t("../../libs/shared/dist/constants/notifications.js"),r=t("../../libs/shared/dist/storage/solflareService.js"),o=t("../../libs/shared/dist/features/notifications/constants.js");const d="1",l="1.0.0",c="web",u=async(e,s,t,a=!0)=>{if(!t)return await f(e,s),void(a?await r.Z.notificationsDevice.setEnabled(!1):await r.Z.notificationsDevice.remove());await r.Z.notificationsDevice.setEnabled(!0)};async function m(e,s,t){const i=await r.Z.notificationsDevice.get();if(!i){const a=await p(e,s.map(y),t);return await r.Z.notificationsDevice.set({pushToken:e.pushToken,pushProvider:e.pushProvider,enabled:!0}),{action:"created",deviceInfo:a}}if(e.pushToken!==i.pushToken||e.pushProvider!==i.pushProvider)try{await async function(e,s,t){const{body:a}=await(0,n.gz)(`${o.tn}/devices/token`,{pushToken:e.pushToken,pushProvider:e.pushProvider,newPushToken:s.pushToken,newPushProvider:s.pushProvider},{headers:{Language:t}});return a.data}(i,e,t),await r.Z.notificationsDevice.set({pushToken:e.pushToken,pushProvider:e.pushProvider,enabled:!0})}catch(a){await r.Z.notificationsDevice.remove();const{deviceInfo:n}=await m(e,s,t);return{action:"updated",deviceInfo:n}}let d;try{d=await async function(e,s,t){let i=await h(e,t),r=(0,a.cloneDeep)(i.subscriptions);const d=(0,a.map)(i.subscriptions,"publicKey"),l=(0,a.difference)(d,s),c=(0,a.difference)(s,d);return r=(0,a.filter)(r,(e=>!l.includes(e.publicKey))),(0,a.forEach)(c,(e=>r.push(y(e)))),(c.length||l.length)&&(i=await g(e,r,t)),i.language!==t&&(i=await async function(e,s,t,a){const{body:i}=await(0,n.gz)(`${o.tn}/devices`,{pushToken:e.pushToken,pushProvider:e.pushProvider,os:"web",osVersion:"1",appVersion:"1.0.0",language:s},{headers:{Language:s}});return i.data}(e,t)),i}(e,s,t)}catch{d=await p(e,s.map(y),t)}return{action:"updated",deviceInfo:d}}async function f(e,s){try{const{body:t}=await(0,n.IV)(`${o.tn}/devices?pushToken=${e.pushToken}&pushProvider=${e.pushProvider}`,{headers:{Language:s}});return t.data}catch(e){if(404===e.response.status)return!0;throw e}}async function p(e,s,t){const{body:a}=await(0,n.v_)(`${o.tn}/subscriptions`,{pushToken:e.pushToken,pushProvider:e.pushProvider,os:c,osVersion:d,appVersion:l,language:t,topics:i.E5,subscriptions:s.map((({publicKey:e,preferences:s})=>({publicKey:e,preferences:s})))},{headers:{Language:t}});return a.data}async function b(e,s){const{body:t}=await(0,n.gz)(`${o.tn}/devices`,{pushToken:e.pushToken,pushProvider:e.pushProvider,os:"web",osVersion:"1",appVersion:"1.0.0",language:s},{headers:{Language:s}});return t.data}async function h(e,s){const{body:t}=await(0,n.U2)(`${o.tn}/devices?pushToken=${e.pushToken}&pushProvider=${e.pushProvider}`,{headers:{Language:s}});return t.data}async function g(e,s,t){return await p(e,s,t)}const y=e=>({publicKey:e,preferences:i.Tc})},"../../libs/shared/dist/features/notifications/utils/isWalletTypeSupportedForNotification.js":(e,s,t)=>{t.d(s,{G:()=>n});var a=t("../../libs/wallet-core/dist/shared.js");const n=e=>[a.R7,a.vn,a.CO,a.pe,a.x4].includes(e)},"../../libs/shared/dist/features/onramper/modals/index.js":(e,s,t)=>{t.d(s,{V:()=>T});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../../node_modules/@mui/styles/makeStyles/makeStyles.js"),r=t("../../../node_modules/bs58/index.js"),o=t.n(r),d=t("../../../node_modules/platform/platform.js"),l=t.n(d),c=t("../../../node_modules/webextension-polyfill/dist/browser-polyfill.js"),u=t.n(c),m=t("../../libs/wallet-core/dist/shared.js"),f=t("../../libs/foundation-ui/dist/index.js"),p=t("../../libs/rise-ui/dist/index.js"),b=t("../../libs/shared/dist/storage/solflareService.js"),h=t("../../libs/shared/dist/utils/extension.js"),g=t("../../libs/shared/dist/utils/requestId.js"),y=t("../../libs/shared/dist/features/featureFlags/onramper/index.js"),x=t("../../libs/shared/dist/features/featureFlags/utils.js"),k=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),j=t("../../libs/shared/dist/features/walletData/hooks/index.js"),v=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),w=t("../../libs/shared/dist/assets/onramper-info.mp4");const _=({onContinue:e})=>{const{t:s}=(0,v.$)();return(0,a.jsx)(f.WhatsNew,{cta:{title:s("action_continue"),action:e},steps:[{videoSrc:w}]})},S="Firefox"===l().name,C=(0,i.Z)((()=>({dialogScreenPaper:{padding:"0px",width:"auto",borderRadius:"20px",boxShadow:"none"},content:{padding:"0px !important",borderRadius:"20px",overflow:"hidden"}}))),T=({token:e,onCancel:s,source:t})=>{const i=C(),{publicKey:r,walletType:d}=(0,j.rT)(),{cluster:l}=(0,k.LN)(),[c,v]=(0,n.useState)(null),w=(0,n.useCallback)((async()=>{if(!r)return null;const s=d&&d in m.oH?m.oH[d]:255,a=(0,x.l)(),n={publicKey:r,network:l,wt:s,origin:a,user_platform:"web",source:t},i=await b.Z.solflarenetwork.get(),c=(0,g.A)(i);c&&(n.id=c);const u=o().encode((new TextEncoder).encode(JSON.stringify(n)));return((e,s,t)=>`https://buy.onramper.com?apiKey=pk_prod_01HGD8ENSBSM0EG0N0RKW2Y6A2&partnerContext=${s}&mode=buy&onlyCryptoNetworks=solana&defaultCrypto=${t}&networkWallets=solana:${e}${(()=>{const e=f.solflareTokens.semanticColorsOnramperPrimaryDefault.replace("#",""),s=f.solflareTokens.semanticColorsOnramperSecondaryDefault.replace("#",""),t=f.solflareTokens.semanticColorsOnramperTextPrimaryDefault.replace("#","");return`&themeName=dark&primaryColor=${e}&secondaryColor=${s}&containerColor=${f.solflareTokens.semanticColorsOnramperSurfaceElevation0.replace("#","")}&cardColor=ffffff0f&primaryTextColor=${t}&secondaryTextColor=ffffff66&borderRadius=${f.solflareTokens.semanticBorderRadiusSurface/16}`})()}`)(r,u,e.onrampTokenId)}),[l,r,t,e.onrampTokenId,d]),T=c?(0,a.jsx)("iframe",{width:375,height:600,style:{border:0,display:"block"},src:c}):(0,a.jsx)(_,{onContinue:async()=>{const e=await w();e&&(h.UJ&&!h.Qd?(S?u().tabs.create({url:e}):u().windows.create({url:e,type:"popup",width:450,height:750}),s()):h.Qd?(window.open(e,"_blank"),s()):v(e),(0,y.U)(t))}});return h.p1&&!h.Cy?(0,a.jsx)(f.FullPageModal,{open:!0,children:T}):(0,a.jsx)(p.u_,{open:!0,disableBackdropClick:!0,contentClassName:i.content,dialogPaperClassName:i.dialogScreenPaper,onClose:s,children:T})}},"../../libs/shared/dist/features/pfp/api/index.js":(e,s,t)=>{t.d(s,{KB:()=>a.K,Yi:()=>c,mn:()=>l});var a=t("../../libs/shared/dist/features/pfp/api/requests.js"),n=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),i=t("../../../node_modules/base64-js/index.js"),r=t("../../libs/shared/dist/api/index.js"),o=t("../../../node_modules/console-browserify/index.js");const d="https://wallet-api.solflare.com",l=async e=>{try{const s=`${d}/v2/portfolio/nft/set-pfp`,{body:t}=await(0,r.v_)(s,e);if(t?.error)throw new Error(t.error);if(!t?.txs.length)throw new Error("Failed to generate transaction");return{transaction:n.VersionedTransaction.deserialize((0,i.toByteArray)(t.txs[0]))}}catch(e){throw o.dir(e),new Error(e?.response?.data?.error||e?.message)}},c=async e=>{try{const s=`${d}/v2/portfolio/nft/remove-pfp`,{body:t}=await(0,r.v_)(s,e);if(t?.error)throw new Error(t.error);if(!t?.txs.length)throw new Error("Failed to generate transaction");return{transaction:n.VersionedTransaction.deserialize((0,i.toByteArray)(t.txs[0]))}}catch(e){throw o.dir(e),new Error(e?.response?.data?.error||e?.message)}}},"../../libs/shared/dist/features/portfolio/api/index.js":(e,s,t)=>{t.d(s,{B$:()=>g,ZK:()=>h,aR:()=>o,sG:()=>j,qR:()=>y,FT:()=>d,hG:()=>x,lz:()=>l,D1:()=>c,Nv:()=>k});var a=t("../../libs/shared/dist/api/index.js"),n=t("../../libs/shared/dist/constants/index.js"),i=t("../../libs/shared/dist/constants/networks.js"),r=t("../../libs/shared/dist/features/portfolio/constants.js");async function o(){try{const e=await(0,a.U2)("https://priority-fee-api.solflare.com");return e?.body?.compute_unit_price||0}catch{return 0}}const d=async(e,s="USD")=>{const{body:t}=await(0,a.U2)(`${n.JF}/v2/portfolio/token/${e}/info?&currency=${s}`);return t},l=async(e,s="mainnet",t="USD")=>{const{body:i}=await(0,a.U2)(`${n.JF}/v3/portfolio/tokens/${e}?network=${s}&currency=${t}&enablePartialErrors=true`);return i};async function c({term:e,cluster:s},{start:t=0,limit:n=50}={},o){const d={chainId:String(s&&i.vo[s]?i.vo[s]:i.vo.mainnet),query:e||" "};"number"==typeof t&&(d.start=String(t)),"number"==typeof n&&(d.limit=String(n));const{body:l}=await(0,a.U2)(`${r.yJ}/v1/search?${new URLSearchParams(d)}`),c=l?.content||[];return o&&o.length?{totalReceivedItems:c.length,data:c.filter((e=>!o.includes(e.address)))}:{totalReceivedItems:c.length,data:c}}var u=t("../../../node_modules/@solana/spl-token/lib/esm/instructions/approve.js"),m=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),f=t("../../../node_modules/base64-js/index.js"),p=t("../../libs/shared/dist/utils/units.js"),b=t("../../../node_modules/console-browserify/index.js");const h=async e=>{try{const{standard:s,...t}=e,{body:i}=await(0,a.v_)(`${n.JF}/v3/actions/${e.standard}/close`,t);if(!i?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:m.VersionedTransaction.deserialize(f.toByteArray(i.txs[0]))}}catch(e){throw b.dir(e),new Error(e?.response?.data?.error||e?.message)}},g=async e=>{try{const{standard:s,...t}=e,{body:i}=await(0,a.v_)(`${n.JF}/v3/actions/${e.standard}/burn-and-close`,t);if(!i?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:m.VersionedTransaction.deserialize(f.toByteArray(i.txs[0]))}}catch(e){throw b.dir(e),new Error(e?.response?.data?.error||e?.message)}},y=async e=>{try{const{body:s}=await(0,a.v_)(`${n.JF}/v3/actions/native/send`,e);if(!s?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:m.VersionedTransaction.deserialize(f.toByteArray(s.txs[0]))}}catch(e){throw b.dir(e),new Error(e?.response?.data?.error||e?.message)}},x=async e=>{try{const{standard:s,...t}=e,{body:i}=await(0,a.v_)(`${n.JF}/v3/actions/${e.standard}/send`,t);if(!i?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:m.VersionedTransaction.deserialize(f.toByteArray(i.txs[0]))}}catch(e){throw b.dir(e),new Error(e?.response?.data?.error||e?.message)}};async function k({blockhashFetcher:e,from:s,recipient:t,amount:a,tokenAccountPubkey:n,decimals:i}){const r=new m.PublicKey(s),o=new m.PublicKey(n),d=new m.PublicKey(t),l=(0,p.z)(a,i),c=(0,u.g6)(o,d,r,BigInt(l)),{blockhash:f}=await e.getLatestBlockhash("confirmed"),b=new m.TransactionMessage({payerKey:r,recentBlockhash:f,instructions:[c]}).compileToV0Message();return{transaction:new m.VersionedTransaction(b)}}const j=async e=>{try{const{standard:s,...t}=e,{body:i}=await(0,a.v_)(`${n.JF}/v3/actions/${e.standard}/create-ata`,t);if(!i?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:m.VersionedTransaction.deserialize(f.toByteArray(i.txs[0]))}}catch(e){throw b.dir(e),new Error(e?.response?.data?.error||e?.message)}}},"../../libs/shared/dist/features/portfolio/constants.js":(e,s,t)=>{t.d(s,{PY:()=>r,U4:()=>i,bA:()=>n,eK:()=>d,gM:()=>a,uC:()=>o,yJ:()=>l});const a=5e3,n=890880,i=2039280,r="SOL",o="0.01",d="transferFeeConfig",l="https://token-list-api.solana.cloud"},"../../libs/shared/dist/features/portfolio/context/index.js":(e,s,t)=>{t.d(s,{N:()=>o,H:()=>d});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../libs/shared/dist/features/featureFlags/onramper/index.js");const r=(0,n.createContext)(null),o=({children:e})=>{const[s,t]=(0,n.useState)(!1),[o,d]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),[f,p]=(0,n.useState)(null),[b,h]=(0,n.useState)(!1),[g,y]=(0,n.useState)(null),[x,k]=(0,n.useState)(!1),[j,v]=(0,n.useState)(null),[w,_]=(0,n.useState)("portfolioPage"),[S,C]=(0,n.useState)("portfolioButton"),T=(0,n.useMemo)((()=>{const e=f?.token,s=f?.token.accounts[f.tokenAccountIndex||0],t=f?.token.actions?.find((e=>"send"===e.name))?.metadata;return{tokenId:e?.mint||"",pubkey:s?.pubkey||"",symbol:e?.symbol||"",name:e?.name,isAta:!!s?.isAta,amount:e?.amount||"",rawAmount:e?.amount||"",decimals:e?.decimals||0,logoURI:e?.imageUri||"",verified:!!e?.verified,value:"",price:"",rawValue:"",standard:e?.standard,metadata:t,priceInUsd:e?.price?.usdPrice}}),[f]),A=(0,n.useCallback)((()=>{t(!0)}),[]),I=(0,n.useCallback)((()=>{t(!1)}),[]),P=(0,n.useCallback)((()=>{d(!0)}),[]),N=(0,n.useCallback)((()=>{d(!1)}),[]),E=(0,n.useCallback)((e=>{c(!0),C(e)}),[]),F=(0,n.useCallback)((()=>{c(!1),p(null)}),[]),D=(0,n.useCallback)(((e,s)=>{p(e),m(!0),C(s)}),[]),L=(0,n.useCallback)((()=>{m(!1),p(null)}),[]),B=(0,n.useCallback)((e=>{y(e),h(!0)}),[]),R=(0,n.useCallback)((()=>{h(!1)}),[]),U=(0,n.useCallback)(((e,s)=>{v(e),k(!0),_(s),(0,i.l)()}),[]),M=(0,n.useCallback)((()=>{k(!1),v(null)}),[]),K=(0,n.useMemo)((()=>({receiveModal:s,openReceiveModal:A,closeReceiveModal:I,createTokenModal:o,openCreateTokenModal:P,closeCreateTokenModal:N,transferModal:l,openTransferModal:E,closeTransferModal:F,splTransferModal:u,splTransferToken:f,openSplTransferModal:D,closeSplTransferModal:L,providedAccount:T,splDelegateModal:b,splDelegateToken:g,openSplDelegateModal:B,closeSplDelegateModal:R,buyModal:x,buyToken:j,buySource:w,openBuyModal:U,closeBuyModal:M,sendSource:S})),[N,I,R,L,T,F,o,P,A,B,D,E,s,b,g,u,f,l,x,j,w,U,M,S]);return(0,a.jsx)(r.Provider,{value:K,children:e})},d=()=>{const e=(0,n.useContext)(r);if(!e)throw new Error("usePortfolioState must be used within a PortfolioStateProvider");return e}},"../../libs/shared/dist/features/portfolio/hooks/index.js":(e,s,t)=>{t.d(s,{h1:()=>E,RR:()=>z,nD:()=>U,Dm:()=>M});var a=t("../../libs/shared/dist/features/portfolio/queries/index.js"),n=t("../../../node_modules/react/jsx-runtime.js"),i=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),o=t("../../../node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),d=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),l=t("../../libs/foundation-ui/dist/index.js"),c=t("../../libs/shared/dist/features/currencies/hooks/index.js"),u=t("../../libs/shared/dist/utils/displayPrice.js"),m=t("../../libs/shared/dist/components/TokenAvatar/index.js");const f=({amount:e,tokenImage:s,tokenMint:t,tokenSymbol:a,tokenVerified:i})=>{const{value:r,suffix:o,prefix:f,price:p}=(0,c.yF)(t,e);return(0,n.jsx)(l.ConfirmTransaction,{avatar:(0,n.jsx)(l.IconAvatar,{size:"xl",icon:d.Rpv}),transactionFromItem:(0,n.jsx)(l.TXListItem,{title:(0,u.ED)({amount:e,displayType:"solana",prefix:"-",suffix:a?` ${a}`:void 0}),subtitle:p?`-${(0,u.ED)({amount:r,displayType:"value",suffix:o,prefix:f})}`:void 0,avatar:(0,n.jsx)(m.y,{src:s,verified:i})})})};var p=t("../../libs/shared/dist/utils/truncateMiddle.js");const b=({tokenImage:e,tokenMint:s,tokenSymbol:t,tokenVerified:a})=>(0,n.jsx)(l.ConfirmTransaction,{avatar:(0,n.jsx)(l.IconAvatar,{size:"xl",icon:d.M6r}),transactionFromItem:(0,n.jsx)(l.TXListItem,{title:t||(0,p.r)(s),subtitle:t?(0,p.r)(s):void 0,avatar:(0,n.jsx)(m.y,{src:e,verified:a})})}),h=({tokenName:e,tokenImage:s,tokenMint:t,tokenVerified:a})=>(0,n.jsx)(l.ConfirmTransaction,{avatar:(0,n.jsx)(l.IconAvatar,{size:"xl",icon:d.M6r}),transactionFromItem:(0,n.jsx)(l.TXListItem,{title:e,subtitle:(0,p.r)(t),avatar:(0,n.jsx)(m.y,{src:s,verified:a})})});var g=t("../../libs/shared/dist/features/pfp/components/index.js");const y=({amount:e,tokenImage:s,tokenMint:t,tokenSymbol:a,tokenVerified:i=!0,toPubkey:r,toName:o})=>{const{value:f,suffix:b,prefix:h,price:y}=(0,c.yF)(t,e);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.ConfirmTransaction,{avatar:(0,n.jsx)(l.IconAvatar,{size:"xl",icon:d.XCy}),transactionFromItem:(0,n.jsx)(l.TXListItem,{title:(0,u.ED)({amount:e,displayType:"solana",suffix:a?` ${a}`:void 0}),subtitle:y?(0,u.ED)({amount:f,displayType:"value",suffix:b,prefix:h}):void 0,avatar:(0,n.jsx)(m.y,{src:s,verified:i})}),transactionToItem:(0,n.jsx)(l.TXListItem,{title:o||(0,p.r)(r),subtitle:o?(0,p.r)(r):void 0,avatar:(0,n.jsx)(g.y,{publicKey:r})})})})};var x=t("../../libs/shared/dist/constants/mints.js");const k=({amount:e})=>{const{value:s,suffix:t,prefix:a,price:i}=(0,c.yF)("SOL",e);return(0,n.jsx)(l.ConfirmTransaction,{avatar:(0,n.jsx)(l.IconAvatar,{size:"xl",icon:d.O8f}),transactionFromItem:(0,n.jsx)(l.TXListItem,{title:(0,u.ED)({amount:e,displayType:"solana",suffix:" WSOL"}),subtitle:i?(0,u.ED)({amount:s,displayType:"value",suffix:t,prefix:a}):void 0,avatar:(0,n.jsx)(m.y,{src:x.vx.logoURI,verified:!0})}),transactionToItem:(0,n.jsx)(l.TXListItem,{title:(0,u.ED)({amount:e,displayType:"solana",suffix:" SOL"}),avatar:(0,n.jsx)(m.y,{src:x.vx.logoURI,verified:!0})})})};var j=t("../../libs/shared/dist/hooks/index.js"),v=t("../../libs/shared/dist/features/addressBook/hooks/index.js"),w=t("../../libs/shared/dist/features/featureFlags/index.js"),_=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),S=t("../../libs/shared/dist/features/recipientInput/constants.js"),C=t("../../libs/shared/dist/features/shared/snackbar/index.js"),T=t("../../libs/shared/dist/features/transactionFlow/context/index.js"),A=t("../../libs/shared/dist/features/transactionFlow/hooks/index.js"),I=t("../../libs/shared/dist/features/walletData/hooks/index.js"),P=t("../../libs/shared/dist/features/portfolio/api/index.js"),N=t("../../libs/shared/dist/features/portfolio/constants.js");const E=()=>{const{data:e,isLoading:s,isError:t}=(0,a.yo)();return{data:e,isLoading:s,isError:t,actions:(()=>{const{enqueueSnackbar:e}=(0,C.Ds)(),{t:s}=(0,i.$)(),{cluster:t}=(0,_.LN)(),{getDestinationWalletType:a}=(0,v.q5)(),d=(0,j.Q)({purpose:"transfer"}),{transactionInit:l}=(0,T.p)(),{publicKey:c}=(0,I.rT)(),u=(0,j.Q)({purpose:"airdrop"}),m=(0,o.NL)();return{transferSolana:async(e,i,r,o,d,u,f,p,b,h)=>{await l({title:s("confirm_transaction_title"),txBuilder:P.qR,builderParams:{amount:r,wallet:c,recipient:i,network:t,setComputeBudget:!0},ffLogFunction:w.ml,ffParams:{source:d,dwt:a(i),destinationPickedFrom:S.XV[p??"MANUAL"],tokenTicker:N.PY,tokenMintAddress:x.BH,tokenAmount:r,tokenValueInUsd:f?Number(r)*f:void 0,isUnverified:!e.verified,isAta:u},commitment:"processed",onConfirm(){m.invalidateQueries({queryKey:["tokens"]}),b?.()},onBroadcast({status:e}){"success"===e&&h?.()},confirmDialog:(0,n.jsx)(y,{amount:r,tokenImage:x.vx.logoURI,tokenSymbol:"SOL",tokenMint:"SOL",fromPubkey:c,toPubkey:i,toName:o})})},requestSolanaAirdrop:async(s,t)=>{await u.requestAirdrop(new r.PublicKey(c),s*r.LAMPORTS_PER_SOL),e("1 SOL will appear in your wallet in a few seconds",{key:"request-airdrop",preventDuplicate:!0}),m.invalidateQueries({queryKey:["tokens"]}),t?.()},transferToken:async(e,i,r,o,d,u,f,p,b,h,g,x)=>{await l({txBuilder:P.hG,title:s("confirm_transaction_title"),builderParams:{metadata:h,wallet:c,recipient:r,amount:o,mint:e.mint,token:i.pubkey,decimals:e.decimals,standard:e.standard,network:t,setComputeBudget:!0},ffLogFunction:w.ml,ffParams:{source:u,dwt:a(r),destinationPickedFrom:S.XV[b??"MANUAL"],tokenTicker:e.symbol?e.symbol:void 0,tokenMintAddress:e.mint,tokenAmount:o,tokenValueInUsd:p?Number(o)*Number(p):void 0,isUnverified:!e.verified,isAta:f},commitment:"processed",onConfirm(){m.invalidateQueries({queryKey:["tokens"]}),g?.()},onBroadcast({status:e}){"success"===e&&x?.()},useSignAndSend:A.Ht,confirmDialog:(0,n.jsx)(y,{amount:o,tokenImage:e.imageUri,tokenSymbol:e.symbol,tokenVerified:e.verified,tokenMint:e.mint,fromPubkey:c,toPubkey:r,toName:d})})},delegateToken:async(e,s,t,a,n,i,r)=>{l({commitment:"processed",txBuilder:P.Nv,builderParams:{amount:a,recipient:t,tokenAccountPubkey:s.pubkey,decimals:e.decimals,from:c,blockhashFetcher:d},onBroadcast:()=>r?.(),onConfirm(){m.invalidateQueries({queryKey:["tokens"]}),i?.()}})},createTokenAccount:async(e,s="spl-token")=>{l({txBuilder:P.sG,builderParams:{mint:e.address,wallet:c,network:t,standard:s,setComputeBudget:!0},commitment:"processed",onConfirm(){m.invalidateQueries({queryKey:["tokens"]})},confirmDialog:(0,n.jsx)(h,{tokenImage:e.logoURI||"",tokenMint:e.address,tokenName:e.symbol,tokenVerified:e.verified})})},unwrapWrappedSol:async(e,s,a,i)=>{await l({txBuilder:P.ZK,builderParams:{metadata:a,wallet:c,token:s.pubkey,mint:e.mint,network:t,standard:e.standard,setComputeBudget:!0},commitment:"processed",onBroadcast({status:e}){"success"===e&&i?.()},onConfirm({status:e}){"success"===e&&m.invalidateQueries({queryKey:["tokens"]})},confirmDialog:(0,n.jsx)(k,{amount:s.uiAmount})})},closeTokenAccount:async(e,s,a,i,r)=>{await l({txBuilder:P.ZK,builderParams:{metadata:i,wallet:c,token:s.pubkey,mint:e.mint,network:t,standard:e.standard,setComputeBudget:!0},ffLogFunction:w.D6,ffParams:{source:a,tokenTicker:e.symbol,tokenMintAddress:e.mint},commitment:"processed",onBroadcast({status:e}){"success"===e&&r?.()},onConfirm:({status:e})=>{"success"===e&&m.invalidateQueries({queryKey:["tokens"]})},confirmDialog:(0,n.jsx)(b,{tokenMint:e.mint,tokenImage:e.imageUri,tokenSymbol:e.symbol,tokenVerified:e.verified})})},burnAndCloseTokenAccount:async(e,s,a,i)=>{l({commitment:"processed",txBuilder:P.B$,builderParams:{metadata:a,amount:s.amount,mint:e.mint,wallet:c,token:s.pubkey,standard:e.standard,network:t,setComputeBudget:!0},onConfirm(){m.invalidateQueries({queryKey:["tokens"]}),i?.()},confirmDialog:(0,n.jsx)(f,{amount:s.uiAmount,tokenMint:e.mint,tokenImage:e.imageUri,tokenSymbol:e.symbol,tokenVerified:e.verified})})}}})()}};var F=t("../../../node_modules/react/index.js"),D=t("../../../node_modules/react-router/dist/index.js"),L=t("../../libs/shared/dist/constants/routes.js"),B=t("../../libs/shared/dist/features/confirmDialog/context/index.js"),R=t("../../libs/shared/dist/features/portfolio/context/index.js");const U=(e,s=!1)=>{const t=(0,D.s0)(),{t:a}=(0,i.$)(),{confirm:r}=(0,B.O)(),{openSplTransferModal:o,openSplDelegateModal:d}=(0,R.H)();return{handleTransferTokenClick:(0,F.useCallback)(((e,s,t)=>{let a=t?e.accounts?.findIndex((e=>e.pubkey===t)):e.accounts?.findIndex((e=>e.isAta));a<0&&(a=0),o({token:e,tokenAccountIndex:a},s)}),[o]),handleDelegateTokenClick:(0,F.useCallback)(((e,s)=>{let t=s?e.accounts?.findIndex((e=>e.pubkey===s)):e.accounts?.findIndex((e=>e.isAta));t<0&&(t=0),d({token:e,tokenAccountIndex:t})}),[d]),handleCreateTokenAccount:(0,F.useCallback)((s=>{e.createTokenAccount(s)}),[e]),handleUnwrapTokenAccount:(0,F.useCallback)(((a,n,i)=>{let r=n?a.accounts?.find((e=>e.pubkey===n)):a.accounts?.find((e=>e.isAta));if(r||(r=a.accounts?.[0]),!r)return;const o=a.actions?.find((e=>"close"===e.name))?.metadata;e.unwrapWrappedSol(a,r,o,s?i:()=>t(L.Zg.MAIN,{replace:!0}))}),[e,s,t]),handleCloseTokenAccount:(0,F.useCallback)(((a,n,i,r)=>{let o=i?a.accounts?.find((e=>e.pubkey===i)):a.accounts?.find((e=>e.isAta));if(o||(o=a.accounts?.[0]),!o)return;const d=a.actions?.find((e=>"close"===e.name))?.metadata;e.closeTokenAccount(a,o,n,d,s?r:()=>t(L.Zg.MAIN,{replace:!0}))}),[e]),handleBurnTokenAccount:(0,F.useCallback)((async(s,t)=>{let i=t?s.accounts?.find((e=>e.pubkey===t)):s.accounts?.find((e=>e.isAta));if(i||(i=s.accounts?.[0]),!i)return;const o=s.actions?.find((e=>"burn-and-close"===e.name))?.metadata;await r({title:a("confirm_burn_title"),message:(0,n.jsx)(l.Section,{children:(0,n.jsx)(l.Alert,{title:a("confirm_burn_are_you_sure"),variant:"warning",message:a("confirm_burn_you_are_burning",{count:i.uiAmount||1,name:s.symbol||"token"})})}),confirmButtonText:a("action_continue"),cancelButtonText:a("action_cancel")})&&e.burnAndCloseTokenAccount(s,i,o)}),[e,r,a]),handleRequestAirdrop:(0,F.useCallback)((()=>{e.requestSolanaAirdrop(1)}),[e])}},M=()=>{const{data:e,isLoading:s,isError:t}=(0,a.yo)();return{data:(0,F.useMemo)((()=>e?.tokens.find((e=>e.mint===x.BH))??null),[e]),isLoading:s,isError:t}};var K=t("../../../node_modules/lodash/lodash.js"),$=t("../../libs/shared/dist/storage/solflareService.js"),O=t("../../libs/shared/dist/features/promo/context/index.js"),Z=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),V=t("../../libs/wallet-core/dist/shared.js"),q=t("../../libs/shared/dist/features/featureFlags/utils.js"),H=t("../../libs/shared/dist/features/settings/index.js"),W=t("../../libs/shared/dist/features/promo/api/index.js"),G=t("../../libs/shared/dist/features/promo/constants.js"),Q=t("../../libs/shared/dist/features/stakingCore/index.js");const z=()=>{const e=(0,D.s0)(),{publicKey:s}=(0,I.rT)(),[t,a]=(0,Q.Bf)(),{setStakingEvents:n}=(0,Q.Ub)(),{banners:i,areBannersLoading:r,bannersResponse:o,readPubkeys:d,tBannerClose:l,tBannerCTA:c,tIntermediaryCTA:u,tIntermediaryClose:m}=(0,O.Dq)(),{data:f}=(()=>{const{publicKey:e,walletType:s}=(0,I.rT)(),{current:t}=(0,H.ix)();return(0,Z.a)({queryKey:["intermediaries",e,t],queryFn:()=>(0,W.Cv)({address:e,platform:(0,q.l)(),language:t,at:V.oH[s||""]??V.Yf}),enabled:!!e,refetchInterval:G.K})})(),[p,b]=(0,F.useState)(),[h,g]=(0,F.useState)(),y=async e=>{const{id:t}=e,a=Number(i?.findIndex((e=>e.id===t)));l(e,a),await $.Z.portfolioBanner.dismissBanner(s,t,Date.now()),d()},k=({type:s,url:t,meta:i},r)=>{switch(s){case"tx":return void g(t);case"intermediary":{const e=(0,K.find)(f?.data,{id:t});b(e);break}case"internal":{const s=r?"remoteBanner":"intermediaryScreen";if("stakingCreate"===t)return n({...Q.TQ,source:s,...r?{bannerID:r.id,bannerCampaignID:r.campaignId}:{intermediaryScreenCampaignID:p?.campaignId,intermediaryScreenID:p?.id}}),void a();if("tradeSwap"===t){const t=i?.destinationMint&&`?from=${x.Jb}&to=${i.destinationMint}`;return void e({pathname:L.Zv.MAIN,search:t},{state:{from:s}})}if("tradeLimit"===t)return void e(L.Zv.MAIN);if("portfolio"===t)return void e(L.Zg.MAIN);if("staking"===t)return n({...Q.TQ,source:s,...r?{bannerID:r.id,bannerCampaignID:r.campaignId}:{intermediaryScreenCampaignID:p?.campaignId,intermediaryScreenID:p?.id}}),void e(L.Ni.MAIN);e(t);break}case"close":r?.id&&y(r);break;case"external":window.open(t,"_blank")}};return{banners:i,bannersResponse:o,areBannersLoading:r,intermediaryScreen:p,txID:h,setTxID:g,dismissBanner:y,onClickBanner:async e=>{const{id:s,cta:t}=e;if(!t)return;const a=Number(i?.findIndex((e=>e.id===s)));await c(e,a),k(t,e)},onClickIntermediary:async e=>{await u(e),k(e.cta),b(void 0)},onCloseIntermediary:async e=>{m(e),b(void 0)}}}},"../../libs/shared/dist/features/portfolio/modals/ManageAssets/index.js":(e,s,t)=>{t.d(s,{a:()=>p});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../../node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),o=t("../../../node_modules/@tanstack/react-query/build/lib/useInfiniteQuery.mjs"),d=t("../../../node_modules/lodash/lodash.js"),l=t("../../libs/foundation-ui/dist/index.js"),c=t("../../libs/shared/dist/modals/index.js"),u=t("../../libs/shared/dist/utils/truncateMiddle.js"),m=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),f=t("../../libs/shared/dist/features/portfolio/api/index.js");const p=({submit:e,onClose:s,portfolioList:t})=>{const{t:p}=(0,i.$)(),b=(0,m.LN)(),h=(0,r.NL)(),g=(0,n.useMemo)((()=>(t||[]).map((e=>e.id))),[t]),y=e=>e.map((e=>({...e,title:e.name,subtitle:(0,u.r)(e.address)}))),{data:x,hasNextPage:k,fetchNextPage:j,refetch:v,isLoading:w}=(0,o.N)({queryKey:["manage-assets-filter",b.cluster],queryFn:async({pageParam:e=0})=>(0,f.D1)({term:_,cluster:b.cluster},{start:e,limit:40},g).then((e=>({...e,data:y(e.data)}))),getNextPageParam:(e,s)=>!e||e.totalReceivedItems<40?void 0:40*s.length,enabled:!1});(0,n.useEffect)((()=>{v()}),[v]);const[_,S]=(0,n.useState)(""),C=(0,n.useRef)((0,d.debounce)(v,200)).current,{tokens:T,tokensById:A}=(0,n.useMemo)((()=>{const e=(0,d.keyBy)((x?.pages?.map((e=>e.data))||[])?.flat(),"address");return{tokens:Object.keys(e),tokensById:e}}),[x]),I=!w&&0===T.length;return(0,a.jsx)(c.V,{onClose:s,title:p("portfolio_create_account_title"),textAlign:"left",contentInlineStyle:{maxHeight:500,minHeight:50},children:(0,a.jsx)(l.ManageAssetsList,{noResults:I,isLoading:w,data:T.map((e=>A[e])),onTokenClick:t=>{const a=A[t]??{address:t,name:"Unknown",logoURI:"",decimals:0,symbol:"Unknown"};e(a),s(),h.resetQueries(["manage-assets-filter"])},onSearch:e=>{h.resetQueries(["manage-assets-filter"]),S(e.target.value),C()},endReached:()=>k&&j(),placeholder:"Search by token name or address"})})}},"../../libs/shared/dist/features/portfolio/modals/Send/index.js":(e,s,t)=>{t.d(s,{b:()=>I});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../libs/foundation-ui/dist/index.js"),o=t("../../libs/shared/dist/constants/mints.js"),d=t("../../libs/shared/dist/modals/index.js"),l=t("../../libs/shared/dist/utils/common.js"),c=t("../../libs/shared/dist/utils/displayPrice.js"),u=t("../../libs/shared/dist/utils/truncateMiddle.js"),m=t("../../libs/shared/dist/features/recentAddresses/context/index.js"),f=t("../../libs/shared/dist/features/recipientInput/components/index.js"),p=t("../../libs/shared/dist/features/recipientInput/context/index.js"),b=t("../../libs/shared/dist/features/recipientInput/transformers/index.js"),h=t("../../libs/shared/dist/features/walletData/hooks/index.js"),g=t("../../../node_modules/bignumber.js/bignumber.mjs");const y=({inputAmount:e,selectedToken:s})=>{const{t}=(0,i.$)(),o=(0,n.useMemo)((()=>{const t=s?.extensions?.find((e=>"transferFeeConfig"===e.extension));if(!t||!s)return!1;if(!e||0==+e)return{feePercentage:t.state?.newerTransferFee?.transferFeeBasisPoints/100,recipientGets:0};const a=g.Z.min(new g.Z(+e).multipliedBy(new g.Z(t.state?.newerTransferFee?.transferFeeBasisPoints).div(1e4)),new g.Z(t.state?.newerTransferFee?.maximumFee).div(new g.Z(10).pow(s.decimals)));return{feePercentage:a.toNumber()/+e*100,recipientGets:+e-a.toNumber()}}),[e,s]);return o?(0,a.jsxs)(r.InfoTable,{children:[(0,a.jsx)(r.InfoRow,{left:(0,a.jsxs)(r.InfoRowLeft,{children:[t("send_transfer_fee"),(0,a.jsx)(r.InfoWithTooltip,{tooltip:t("send_transfer_fee_tooltip")})]}),right:(0,a.jsx)(r.InfoRowRight,{children:o.feePercentage?(0,c.ED)({amount:o.feePercentage,displayType:"value",suffix:"%"}):"-"})}),(0,a.jsx)(r.InfoRow,{left:(0,a.jsxs)(r.InfoRowLeft,{children:[t("send_recepient_gets"),(0,a.jsx)(r.InfoWithTooltip,{tooltip:t("send_recepient_gets_tooltip")})]}),right:(0,a.jsx)(r.InfoRowRight,{children:o.recipientGets?`${(0,l.iP)(o.recipientGets,s?.decimals||0)} ${s?.symbol}`:"-"})})]}):null};var x=t("../../libs/shared/dist/features/portfolio/hooks/index.js"),k=t("../../libs/shared/dist/utils/units.js"),j=t("../../libs/shared/dist/features/portfolio/constants.js"),v=t("../../libs/shared/dist/features/portfolio/utils/index.js"),w=t("../../libs/shared/dist/hooks/index.js"),_=t("../../libs/shared/dist/features/shared/account/index.js"),S=t("../../../node_modules/console-browserify/index.js");const C={variant:"error"};var T;!function(e){e.INSUFFICIENT_BALANCE="INSUFFICIENT_BALANCE",e.INSUFFICIENT_REMAINING_BALANCE="INSUFFICIENT_REMAINING_BALANCE",e.INSUFFICIENT_SOL="INSUFFICIENT_SOL",e.UNUSED_ADDRESS="UNUSED_ADDRESS",e.SEND_TO_YOURSELF="SEND_TO_YOURSELF",e.NOT_SOLANA_ACCOUNT="NOT_SOLANA_ACCOUNT",e.WRONG_MINT="WRONG_MINT",e.MINT_ADDRESS="MINT_ADDRESS",e.TOKEN_ACCOUNT_CORRECT="TOKEN_ACCOUNT_CORRECT",e.STAKE_ACCOUNT="STAKE_ACCOUNT"}(T||(T={}));var A=t("../../libs/shared/dist/features/portfolio/hooks/useAmountInput.js");const I=({onClose:e,providedAccount:s,tSource:t})=>{const{publicKey:I,walletType:P}=(0,h.rT)(),{t:N}=(0,i.$)(),{saveAddress:E}=(0,p.x)(),{actions:F}=(0,x.h1)(),{inputAmount:D,setInputAmount:L,computedInputValue:B,handleAmountChange:R,solBalance:U,handleSelectedTokenChange:M,selectedToken:K,computeUnitPrice:$,filteredTokens:O,setSearchParam:Z,maxAvailable:V}=(0,A._)({providedAccount:s}),q=K?.tokenId!==o.BH&&!K?.isAta,{selectedRecipient:H,saveAddressChecked:W}=(0,p.x)(q),{alertProps:G,isValidationLoading:Q}=(({maxAvailable:e,inputAmount:s,selectedToken:t,computeUnitPrice:a,recipientSameAddress:r,solBalance:d,recipient:l,walletType:c})=>{const{t:u}=(0,i.$)(),m=+(0,k.d)(j.bA,9),f="LEDGER"===c,{accountValidation:p,isLoading:b}=(({pubkey:e,mint:s})=>{const[t,a]=(0,n.useState)(null),[i,r]=(0,n.useState)(!1),d=s===o.BH,l=(0,w.Q)({purpose:"transfer"}),c=(0,n.useCallback)((async()=>{r(!0),a(null);try{let t;t=d?await(0,_.hu)({pubkey:e,connection:l}):await(0,_.$v)({pubkey:e,mint:s,connection:l}),a(t)}catch(e){S.error(e),a({ok:!1})}finally{r(!1)}}),[d,e,s,l]);return(0,n.useEffect)((()=>{c()}),[c]),{accountValidation:t,isLoading:i}})({pubkey:l?.address,mint:t?.tokenId});return{alertProps:(0,n.useMemo)((()=>{if(!t||b)return null;const n=t.tokenId===o.BH,i=n&&"ACCOUNT_DOESNT_EXIST"!==p?.confirm;if(n&&!+e)return{...C,title:u("insufficient_ticker",{ticker:j.PY}),message:u("swap_alert_ensure_minimum",{amountWithSuffix:`${j.uC} ${j.PY}`}),type:T.INSUFFICIENT_BALANCE};if(n&&+e<m&&!i)return{...C,title:u("insufficient_ticker",{ticker:j.PY}),message:u("swap_alert_ensure_minimum",{amountWithSuffix:`${j.uC} ${j.PY}`}),type:T.INSUFFICIENT_BALANCE};if(+s>+e)return{...C,title:u("insufficient_ticker",{ticker:t.symbol}),message:u("staking_validation_insufficient_balance_description"),type:T.INSUFFICIENT_BALANCE};const l=new g.Z(e).minus(s);if(n&&l.isGreaterThan(0)&&l.isLessThan(m))return{...C,title:u("validation_send_insufficient_remaing_balance_title"),message:u("validation_send_insufficient_remaing_balance_description",{amountWithTicker:`${m} ${j.PY}`}),type:T.INSUFFICIENT_REMAINING_BALANCE};const c=+(0,k.d)((0,v.dP)(a||0,1),9),h=+(0,k.d)(j.gM,9),y=+(0,k.d)(j.U4,9),x=new g.Z(c).times(2).plus(h).toNumber(),w=new g.Z(d),_="ATA_CREATION"===p?.confirm;return!n&&(!f&&!_&&w.isLessThan(new g.Z(c).plus(m).toNumber())||!f&&_&&w.isLessThan(new g.Z(x).plus(y).plus(m).toNumber())||f&&!_&&w.isLessThan(new g.Z(h).plus(m).toNumber())||f&&_&&w.isLessThan(new g.Z(h).plus(y).plus(m).toNumber()))?{...C,title:u("insufficient_ticker",{ticker:j.PY}),message:u("swap_alert_ensure_minimum",{amountWithSuffix:`${j.uC} ${j.PY}`}),type:T.INSUFFICIENT_SOL}:"ACCOUNT_DOESNT_EXIST"===p?.confirm||"ATA_CREATION"===p?.confirm&&p?.accountEmpty?{variant:"warning",title:u("validation_send_to_unused_address_title"),message:u("validation_send_to_unused_address_description"),type:T.UNUSED_ADDRESS}:r?{variant:"warning",title:u("validation_send_to_yourself_title"),message:u("validation_send_to_yourself_description"),type:T.SEND_TO_YOURSELF}:"NOT_SOLANA_ACCOUNT"===p?.error?{variant:"warning",title:u("validation_send_irregular_title"),message:u("validation_send_irregular_description"),type:T.NOT_SOLANA_ACCOUNT}:"WRONG_MINT"===p?.error||"NOT_A_TOKEN_ACCOUNT"===p?.error||"SPL_TOKEN_ACCOUNT"===p?.confirm?{variant:"error",title:u("validation_send_to_wrong_mint_title"),message:u("validation_send_to_wrong_mint_description"),type:T.WRONG_MINT}:"MINT_ADDRESS"===p?.error?{variant:"error",title:u("address_book_new_contact_address_solana_incorect"),message:u("validation_send_to_wrong_mint_description"),type:T.MINT_ADDRESS}:"TOKEN_ACCOUNT_CORRECT"===p?.confirm?{variant:"warning",title:u("validation_send_to_token_account_title"),message:u("validation_send_to_token_account_description"),type:T.TOKEN_ACCOUNT_CORRECT}:"STAKE_ACCOUNT"===p?.confirm?{variant:"warning",title:u("validation_send_to_stake_account_title"),message:u("validation_send_to_stake_account_description"),type:T.STAKE_ACCOUNT}:null}),[p?.accountEmpty,p?.confirm,p?.error,a,s,f,b,e,r,m,t,d,u]),isValidationLoading:b,accountValidation:p}})({computeUnitPrice:$,inputAmount:D,maxAvailable:V,selectedToken:K,recipientSameAddress:!q&&I===H?.address,solBalance:U,recipient:H,walletType:P||""}),{upsertAddress:z}=(0,m.g)(),Y=!!G&&"error"===G.variant,J=Y||!+D||!H||Q,X=G&&G.type!==T.TOKEN_ACCOUNT_CORRECT,ee=(0,n.useCallback)((async()=>{if(!K||!H)return!1;if(W&&!await E())return!1;const s=()=>{const e="SAVED"!==H.group?H.name:H.subtitle;z(H.address,e)},a=()=>{e?.()},n=K.tokenId===o.BH,i=H.address,r=H.name??(0,u.r)(i);n?await F.transferSolana((0,b.sc)(K),i,D,r,t,K.isAta,K.priceInUsd,H.group,(()=>{s()}),(()=>{a()})):await F.transferToken((0,b.sc)(K),(0,b.t)(K),i,D,r,t,K.isAta,K.priceInUsd,H.group,K.metadata,(()=>{s()}),(()=>{a()}))}),[F,D,e,E,W,H,K,t,z]);return(0,a.jsxs)(d.V,{title:N("action_send"),textAlign:"left",onClose:e,contentInlineStyle:{marginBottom:-24},footer:(0,a.jsxs)(a.Fragment,{children:[G&&(0,a.jsx)(r.Alert,{...G}),(0,a.jsx)(r.Button,{processing:Q,disabled:J,onClick:ee,children:N("action_send")})]}),children:[K&&(0,a.jsx)(r.SendInput,{autoFocusAmount:!0,label:(0,a.jsx)(r.Label,{htmlFor:"send-input",children:N("table_token")}),right:(0,a.jsx)(r.RightLabel,{onClick:$?()=>{L((0,l.T7)(V))}:void 0,children:(0,c.ED)({displayType:"solana",amount:V||0,prefix:`${N("swap_max")}: `})}),amount:D,value:B,id:"send-input",onBlur:()=>{L((e=>e?(0,l.iP)(e,K.decimals):e))},onAmountChange:R,selectedToken:K,onSearchChange:e=>{Z(e.target.value)},onOpenChange:e=>{e||Z("")},tokens:O||[],emptyTokenSearch:N("search_empty_results"),onSelectedTokenChange:M,unverifiedTooltip:N("unverified_token_tooltip")}),(0,a.jsx)(f.T,{hasErrors:Y,displaySaveAddressCheckbox:X}),(0,a.jsx)(y,{inputAmount:D,selectedToken:K})]})}},"../../libs/shared/dist/features/portfolio/queries/index.js":(e,s,t)=>{t.d(s,{NT:()=>i,yo:()=>b,bi:()=>o});var a=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),n=t("../../libs/shared/dist/features/portfolio/api/index.js");const i=()=>{const{data:e}=(0,a.a)({queryKey:["compute-units"],queryFn:n.aR,staleTime:72e5});return{computeUnitPrice:e||0}};var r=t("../../libs/shared/dist/features/currencies/hooks/index.js");const o=e=>{const s=(0,r.Af)();return(0,a.a)({queryKey:["tokenInfo",e,s.ticker],queryFn:()=>(0,n.FT)(e,s.ticker),refetchInterval:6e4,enabled:!!e})};var d=t("../../../node_modules/bignumber.js/bignumber.mjs"),l=t("../../../node_modules/lodash/lodash.js"),c=t("../../libs/shared/dist/constants/mints.js"),u=t("../../libs/shared/dist/utils/tokenAccounts.js"),m=t("../../libs/shared/dist/utils/units.js"),f=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),p=t("../../libs/shared/dist/features/walletData/hooks/index.js");const b=()=>{const{publicKey:e}=(0,p.rT)(),s=(0,f.LN)(),t=(0,r.Af)();return(0,a.a)({queryKey:["tokens",e,s.url,t.ticker],queryFn:()=>(0,n.lz)(e,s.cluster,t.ticker),refetchInterval:6e4,select:s=>((e,s)=>{const t=e.tokens.map((e=>{const t=e.accounts.reduce(((e,s)=>e.plus(s.amount)),new d.Z(0)),a=(0,m.d)(t,e.decimals),n=new d.Z(a).times(e.price?.price||0).toString(),i=(0,u.d)(e.mint,s,e.standard);return{...e,amount:a,value:n,accounts:(e.accounts||[]).map((s=>{const t=(0,m.d)(s.amount,e.decimals);return{...s,uiAmount:t,value:new d.Z(t).times(e.price?.price||0).toString(),isAta:s.pubkey===i,delegation:s.delegation?{...s.delegation,uiAmount:(0,m.d)(s.delegation.amount,e.decimals)}:null}}))}})),a=(0,l.sortBy)(t,[e=>e.mint!==c.BH,e=>!e.name,e=>-(e.value||0),e=>-(e.amount||0),e=>e.mint]);return{...e,tokens:a}})(s,e),enabled:!!e})}},"../../libs/shared/dist/features/portfolio/transformers/index.js":(e,s,t)=>{t.d(s,{u:()=>f,A:()=>m});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/bignumber.js/bignumber.mjs"),i=t("../../libs/shared/dist/utils/displayPrice.js");const r=(e,s,t,a)=>+e<0?s:+e>0?a:t;var o=t("../../libs/shared/dist/utils/truncateMiddle.js"),d=t("../../libs/shared/dist/utils/units.js"),l=t("../../libs/shared/dist/features/currencies/components/index.js"),c=t("../../libs/shared/dist/features/currencies/utils/index.js"),u=t("../../libs/shared/dist/features/portfolio/constants.js");const m=(e,s,t,a)=>{const l=(0,c.MK)(t.ticker,t.symbol),m=e.accounts.reduce(((e,s)=>e.plus(s.amount)),new n.Z(0)),f=(0,d.d)(m,e.decimals),p=new n.Z(f).times(e.price?.price||0).toString(),b=new n.Z(f).times(e.solPrice?.price||0).toString(),h=p&&"0"!==p&&e.price?.price?(0,i.ED)({amount:p,displayType:"value",prefix:l}):"",g=b&&"0"!==b&&e.solPrice?.price?(0,i.ED)({amount:b,displayType:"value",suffix:" SOL"}):"",y=e.price?.price?(0,i.ED)({amount:e.price.price,displayType:"value",prefix:l}):"",x=e.solPrice?.price?(0,i.ED)({amount:e.solPrice.price,displayType:"value",suffix:" SOL"}):"",k=e.price?.liquidity?(0,i.ED)({amount:e.price.liquidity,displayType:"value"}):"",j=e.price?.volume24h?(0,i.ED)({amount:e.price.volume24h,displayType:"value"}):"",v={value:e.price?.volumeChange24h?r(e.price.volumeChange24h,"-","","+")+(0,i.ED)({amount:Math.abs(e.price.volumeChange24h),displayType:"value",suffix:"%"}):"",positive:(e.price?.volumeChange24h||0)>=0},w=e.price?.mc?(0,i.ED)({amount:e.price.mc,displayType:"value"}):"",_=e.price?.change||0,S=e.solPrice?.change||0,C={value:e.price?.change?r(_,"-","","+")+(0,i.ED)({amount:Math.abs(_),displayType:"value",suffix:"%"}):"",positive:(e.price?.change||0)>=0},T={value:e.solPrice?.change?r(S,"-","","+")+(0,i.ED)({amount:Math.abs(S),displayType:"value",suffix:"%"}):"",positive:(e.solPrice?.change||0)>=0},A=e?.extensions?.find((e=>e.extension===u.eK)),I=A?.state?.newerTransferFee?.transferFeeBasisPoints/100,P={value:A?`${I}%`:"0%",display:I>0};return{id:e.mint,tokenId:e.mint,amount:(0,i.ED)({amount:f,displayType:"amount",pricePerCoin:e.price?.usdPrice||0}),name:e.name||(0,o.r)(e.mint),symbol:e.symbol,logoURI:e.imageUri||"",price:"fiat"===a?y:x,value:"fiat"===a?h:g,verified:e.verified,priceDiff:"fiat"===a?C:T,rawAmount:f,rawValue:p,liquidity:k,volume24h:j,volumeChange24h:v,marketCap:w,transferFee:P}},f=(e,s,t,n)=>{if(e)return{tokens:e.tokens.map((e=>m(e,s,t,n))),heroUi:"fiat"===n?{total:(0,a.jsx)(l.sp,{value:String(e.value.total||"0")}),change:(0,a.jsx)(l.sp,{value:String(e.value.change||"0"),showSign:!0}),percentage:(0,a.jsx)(l.Tf,{value:String(e.value.percentage||"0"),showSign:!0}),variant:e.value.change<0?"error":"success"}:{total:(0,a.jsx)(l.EI,{value:String(e.solValue.total||"0")}),change:(0,a.jsx)(l.EI,{value:String(e.solValue.change||"0"),hideSymbol:!0,showSign:!0}),percentage:(0,a.jsx)(l.Tf,{value:String(e.solValue.percentage||"0"),showSign:!0}),variant:e.solValue.change<0?"error":"success"}}}},"../../libs/shared/dist/features/portfolio/types.js":(e,s,t)=>{var a,n;t.d(s,{D:()=>a}),function(e){e.WEBSITE="website",e.TWITTER="twitter",e.REDDIT="reddit",e.TELEGRAM="telegram",e.DISCORD="discord",e.GITHUB="github",e.FACEBOOK="facebook"}(a||(a={})),function(e){e.LP_TOKEN="lp-token"}(n||(n={}))},"../../libs/shared/dist/features/portfolio/utils/index.js":(e,s,t)=>{t.d(s,{dP:()=>d,ls:()=>a,Ir:()=>m,Bj:()=>r});const a=(e,s)=>s?e.filter((e=>e.name?.toLowerCase().includes(s.toLowerCase().trim())||e.symbol?.toLowerCase().includes(s.toLowerCase().trim())||e.tokenId===s.trim())):e;var n=t("../../../node_modules/lodash/lodash.js"),i=t("../../libs/shared/dist/constants/mints.js");const r=e=>(0,n.sortBy)(e,[e=>e.tokenId!==i.BH,e=>-e.rawValue,e=>e.name?.toLowerCase(),e=>e.tokenId.toLowerCase()]);var o=t("../../../node_modules/bignumber.js/bignumber.mjs");const d=(e,s=1)=>new o.Z(e).times(2e5).times(Math.min(s,7)).dividedBy(1e6).toNumber();var l=t("../../libs/shared/dist/utils/common.js"),c=t("../../libs/shared/dist/utils/units.js"),u=t("../../libs/shared/dist/features/portfolio/constants.js");const m=({amount:e,tokenId:s,computeUnitPrice:t})=>{if(s!==i.BH||!(0,l.T4)(e)||!t)return e;const a=+(0,c.z)(e,9),n=d(t,1)+u.gM,r=a-n<u.bA?0:a-n;return(0,c.d)(r,9)}},"../../libs/shared/dist/features/promo/api/index.js":(e,s,t)=>{t.d(s,{Ey:()=>l,P4:()=>d,Cv:()=>o});var a=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),n=t("../../../node_modules/base64-js/index.js"),i=t("../../libs/shared/dist/api/index.js"),r=t("../../libs/shared/dist/constants/index.js");const o=async({address:e,platform:s,language:t,at:a})=>{const{body:n}=await(0,i.U2)(`${r.JF}/v3/promo/intermediaries/list/?address=${e}&platform=${s}&language=${t}&at=${a}`);return n},d=async({publicKey:e,cluster:s,txID:t})=>{const{body:o}=await(0,i.U2)(`${r.JF}/v3/promo/tx/${t}?address=${e}&network=${s}`);return{transactions:o.data.txs.map((e=>({transaction:a.VersionedTransaction.deserialize((0,n.toByteArray)(e))}))),data:o.data}},l=async({address:e,platform:s,language:t,at:a})=>{const{body:n}=await(0,i.U2)(`${r.JF}/v3/promo/banners/list/?address=${e}&platform=${s}&language=${t}&at=${a}`);return n}},"../../libs/shared/dist/features/promo/components/index.js":(e,s,t)=>{t.d(s,{c:()=>d,l:()=>x});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../libs/foundation-ui/dist/index.js"),i=t("../../libs/shared/dist/components/index.js"),r=t("../../libs/shared/dist/features/promo/constants.js");const o=({type:e,url:s})=>{switch(e){case"dapp":return(0,a.jsx)(i.iB,{host:s});case"token":return(0,a.jsx)(i.yY,{src:s,verified:!0});case"validator":return(0,a.jsx)(n.ValidatorAvatar,{src:s});case"nft":return(0,a.jsx)(n.NFTAvatar,{src:s});case"icon":return(0,a.jsx)(n.IconAvatarV2,{icon:r.F[s]});default:return""}},d=({banners:e,bannersResponse:s,isLoading:t,dismissBanner:i,onClickBanner:r})=>s?.length?(0,a.jsx)(n.Carousel,{isLoading:t,slidesLength:e?.length??0,renderSlides:()=>e?.map((s=>(0,a.jsx)(n.RemoteBanner,{onClose:()=>i(s),pagination:e?.length>1,onClick:s.cta?()=>r(s):void 0,avatar:s?.icon?o(s.icon):null,...s,children:s?.cta?.text?(0,a.jsx)(n.Button,{size:"s",children:s.cta?.text}):null},s.id)))??[]}):null;var l=t("../../../node_modules/react/index.js"),c=t("../../libs/shared/dist/utils/origin.js"),u=t("../../libs/shared/dist/features/dappCommunication/context/index.js"),m=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),f=t("../../libs/shared/dist/features/transactionFlow/components/index.js"),p=t("../../libs/shared/dist/features/transactionFlow/context/index.js"),b=t("../../libs/shared/dist/features/transactionFlow/hooks/index.js"),h=t("../../libs/shared/dist/features/walletData/hooks/index.js"),g=t("../../libs/shared/dist/features/promo/api/index.js"),y=t("../../libs/shared/dist/features/promo/context/index.js");const x=({txID:e,onClose:s})=>{const{analizedTransactionInit:t,transactionData:n}=(0,p.p)(),{publicKey:i}=(0,h.rT)(),{tSignTxExternal:r}=(0,y.Dq)(),{cluster:o}=(0,m.LN)(),[d,x]=(0,l.useState)({origin:"",host:"",title:""});return(0,l.useEffect)((()=>{i&&t({txBuilder:g.P4,useSignAndSend:b.go,builderParams:{publicKey:i,cluster:o,txID:e},ffLogFunction:r,commitment:"confirmed",onEnd:s})}),[i,e,o]),(0,l.useEffect)((()=>{if(n&&"data"in n){const e=n?.data?.dapp;x({origin:e?.origin??"",host:(0,c.m)(e?.origin),title:e?.title??""})}}),[n]),(0,a.jsx)(u.s.Provider,{value:d,children:(0,a.jsx)(f.J9,{})})}},"../../libs/shared/dist/features/promo/constants.js":(e,s,t)=>{t.d(s,{F:()=>n,K:()=>i});var a=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs");const n={faPiggyBank:a.Quw,faCoins:a.owJ,faCoin:a.vWT,faDisplayChartUp:a.lBT,faParachuteBox:a.Ef4,faImage:a.VmB,faImagesUser:a.QzG,faFaceTongueMoney:a.Mxd,faSackDollar:a.LjC,faFaceSmile:a.pkM,faSun:a.enB,faCirclePlay:a.sl_,faCircleExclamation:a.xHz,faTrophy:a.kWN,faCrown:a.nmd,faCircleInfo:a.DBf,faPercent:a.jGC,faTimer:a.lgJ,faClockSeven:a.Num,faTriangleExclamation:a.ik8,faCalendarDays:a.WRo},i=6e4},"../../libs/shared/dist/features/promo/context/index.js":(e,s,t)=>{t.d(s,{HF:()=>j,gI:()=>v,Dq:()=>w});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../libs/shared/dist/storage/solflareService.js"),r=t("../../libs/shared/dist/features/walletData/hooks/index.js"),o=t("../../../node_modules/bignumber.js/bignumber.mjs"),d=t("../../libs/shared/dist/constants/mints.js"),l=t("../../libs/shared/dist/utils/lamportToSol.js"),c=t("../../libs/shared/dist/features/featureFlags/index.js"),u=t("../../libs/shared/dist/features/featureFlags/promo/index.js"),m=t("../../libs/shared/dist/features/nfts/hooks/useNftData.js"),f=t("../../libs/shared/dist/features/portfolio/queries/index.js"),p=t("../../libs/shared/dist/features/stakingCore/index.js"),b=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),h=t("../../libs/wallet-core/dist/shared.js"),g=t("../../libs/shared/dist/features/featureFlags/utils.js"),y=t("../../libs/shared/dist/features/settings/index.js"),x=t("../../libs/shared/dist/features/promo/api/index.js"),k=t("../../libs/shared/dist/features/promo/constants.js");const j=(0,n.createContext)({banners:[],bannersResponse:void 0,areBannersLoading:!1,readPubkeys:()=>{},tBannerCTA:()=>{},tBannerClose:()=>{},tIntermediaryCTA:()=>{},tIntermediaryClose:()=>{},tSignTxExternal:()=>{}}),v=({children:e})=>{const{publicKey:s}=(0,r.rT)(),{data:t,isLoading:v}=(()=>{const{publicKey:e,walletType:s}=(0,r.rT)(),{current:t}=(0,y.ix)();return(0,b.a)({queryKey:["banners",e,t],queryFn:()=>(0,x.Ey)({address:e,platform:(0,g.l)(),language:t,at:h.oH[s||""]??h.Yf}),enabled:!!e,refetchInterval:k.K})})(),[w,_]=(0,n.useState)({}),{tBannerCTA:S,tBannerClose:C,tIntermediaryCTA:T,tIntermediaryClose:A,tSignTxExternal:I}=(()=>{if(!(0,n.useContext)(j))throw new Error("usePromoFeatureFlags must be used within a usePromoContext");const{data:e}=(0,f.yo)(),{data:s}=(0,m.c)(),{data:t}=(0,p.ku)(),[a,i]=(0,n.useState)(),[r,b]=(0,n.useState)(),[h,g]=(0,n.useState)(),y=t?.header,x=(0,l.s)(y?.totalAmount||0),k=t&&void 0!==y?.totalAmount?+x.multipliedBy(new o.Z(y?.price?.usdPrice||0)):0,v=s?.totalFloor?.price&&s?.solanaPrice?.usdPrice?s?.totalFloor?.price*s?.solanaPrice?.usdPrice:0,w=e?.tokens.find((e=>e.mint===d.BH))?.price?.usdPrice,_=e&&w?e?.solValue.total*w:0,S=e?.tokens.find((e=>e.mint===d.BH))?.totalUiAmount??0,C=k+v+_,T=(0,n.useMemo)((()=>({totalStakeValueInUsd:k,totalNftsValueInUsd:v,totalTokensValueInUsd:_,totalPortfolioValueInUsd:C,totalAvailableSolAmount:S?+S:void 0})),[k,v,_,C,S]),A=(0,n.useCallback)(((e,s)=>{const{id:t,campaignId:a,cta:n}=e;if(n)return b({...e,index:s}),i("remoteBanner"),(0,u.Rj)({bannerID:t,bannerCampaignID:a,bannerIndex:s,ctaType:n.type,...T})}),[T]),I=(0,n.useCallback)((({id:e,campaignId:s},t)=>{b(void 0),(0,u.Og)({bannerID:e,bannerCampaignID:s,bannerIndex:t,...T})}),[T]),P=(0,n.useCallback)((e=>{const{id:s,campaignId:t,cta:a}=e;return g(e),i("intermediaryScreen"),(0,u.A)({intermediaryScreenID:s,intermediaryScreenCampaignID:t,ctaType:a.type,...T})}),[T]),N=(0,n.useCallback)((e=>{g(void 0),(0,u.kk)({page:e})}),[]),E=(0,n.useCallback)((e=>{if(!a)return;const s="intermediaryScreen"===a?{intermediaryScreenCampaignID:h?.campaignId,intermediaryScreenID:h?.id}:{bannerCampaignID:r?.campaignId,bannerID:r?.id,bannerIndex:r?.index};(0,c.Y$)({source:a,...s,...e})}),[a,r,h]);return(0,n.useMemo)((()=>({tBannerCTA:A,tBannerClose:I,tIntermediaryCTA:P,tIntermediaryClose:N,tSignTxExternal:E})),[A,I,P,N,E])})(),P=(0,n.useCallback)((async()=>{if(s){const e=await i.Z.portfolioBanner.getBannerStatuses(s);_(e??{})}}),[s]);(0,n.useEffect)((()=>{P()}),[P]);const N=(0,n.useMemo)((()=>{const e=Date.now();return t?.data.filter((s=>{if(!w[s.id])return!0;const t=w[s.id],a=s?.coolDownTime;return!(a&&t&&e-t<=a)}))??[]}),[t?.data,w]),E=(0,n.useMemo)((()=>({banners:N,areBannersLoading:v,bannersResponse:t,readPubkeys:P,tBannerCTA:S,tBannerClose:C,tIntermediaryCTA:T,tIntermediaryClose:A,tSignTxExternal:I})),[v,N,t,P,S,C,T,A,I]);return(0,a.jsx)(j.Provider,{value:E,children:e})},w=()=>{const e=(0,n.useContext)(j);if(!e)throw new Error("usePromoContext must be used within a usePromoContext");return e}},"../../libs/shared/dist/features/promo/modals/index.js":(e,s,t)=>{t.d(s,{H:()=>f});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../../node_modules/@mui/styles/makeStyles/makeStyles.js"),o=t("../../libs/foundation-ui/dist/index.js"),d=t("../../libs/rise-ui/dist/index.js"),l=t("../../libs/shared/dist/utils/extension.js"),c=t("../../libs/shared/dist/utils/featureFlags.js"),u=t("../../libs/shared/dist/features/featureFlags/promo/index.js");const m=(0,r.Z)((()=>({dialogScreenPaper:{padding:"0px",width:"auto",borderRadius:"20px"},content:{padding:"0px !important",borderRadius:"20px",overflow:"hidden"}}))),f=({onClose:e,onCTAClick:s,cta:t,graphicType:r,...f})=>{const{t:p}=(0,i.$)(),b=m(),[h,g]=(0,n.useState)(0);return(0,n.useEffect)((()=>(c.Z.pv(u.J6),()=>{c.Z.pl(u.J6)})),[]),l.p1&&!l.Cy?(0,a.jsx)(o.FullPageModal,{open:!0,children:(0,a.jsx)(o.IntermediaryScreen,{...f,onClose:e,variant:r,finishCTA:{label:t?.text||p("action_continue"),onClick:s},nextCTA:{label:p("action_next")},backCTA:{label:p("action_back")}})}):(0,a.jsx)(d.u_,{open:!0,contentClassName:b.content,dialogPaperClassName:b.dialogScreenPaper,onClose:()=>e(h),children:(0,a.jsx)(o.IntermediaryScreen,{...f,variant:r,finishCTA:{label:t?.text||p("action_continue"),onClick:s},nextCTA:{label:p("action_next")},backCTA:{label:p("action_back")},updateStepNumber:g})})}},"../../libs/shared/dist/features/receive/modals/index.js":(e,s,t)=>{t.d(s,{Z:()=>b});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../libs/foundation-ui/dist/index.js"),o=t("../../libs/shared/dist/hooks/index.js"),d=t("../../libs/shared/dist/modals/index.js"),l=t("../../libs/shared/dist/utils/featureFlags.js"),c=t("../../../node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),u=t("../../../node_modules/easyqrcodejs/dist/easy.qrcode.min.js"),m=t.n(u);const f=c.Z.div({"& canvas":{borderRadius:8,width:160,height:160}}),p=({text:e})=>{const s=(0,n.useCallback)((s=>{s&&new(m())(s,{text:e,logoWidth:64,logoHeight:64,quietZone:10,quietZoneColor:"white"})}),[]);return(0,a.jsx)(f,{ref:s})},b=({address:e,onClose:s,tRoute:t,tSource:c})=>{const{t:u}=(0,i.$)(),{copy:m}=(0,o.c)();return(0,n.useEffect)((()=>{var e,s;e=t,s=c,l.Z.pv(e,{source:s})}),[t,c]),(0,a.jsx)(d.V,{title:"Receive",onClose:s,footer:(0,a.jsx)(r.Button,{onClick:()=>{var s;m(e),s=c,l.Z.c("PortfolioReceive","CopyAddress",{source:s})},children:u("action_copy_address")}),children:(0,a.jsx)(r.Receive,{address:e,title:u("receive_your_address_simple"),code:(0,a.jsx)(p,{text:e})})})}},"../../libs/shared/dist/features/recentAddresses/context/RecentAddressesContext/index.js":(e,s,t)=>{t.d(s,{g:()=>p,r:()=>f});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../../node_modules/dayjs/dayjs.min.js"),r=t.n(i),o=t("../../../node_modules/lodash/lodash.js"),d=t("../../libs/shared/dist/storage/solflareService.js"),l=t("../../libs/shared/dist/utils/truncateMiddle.js"),c=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),u=t("../../libs/shared/dist/features/shared/account/index.js");const m=(0,n.createContext)(null),f=({children:e})=>{const s=(0,c.LN)(),[t,i]=(0,n.useState)([]),[f,p]=(0,n.useState)(!1),b=(0,n.useCallback)((async e=>{try{const t=await(0,u.ru)(e,s.cluster);return t?t.publicKey:null}catch{return null}}),[s]);(0,n.useEffect)((()=>{p(!0),(async()=>{const e=await d.Z.solflarerecentaddresses.get(),s=[];for(const t of e)s.push({...t,pubkey:await b(t.address)||t.address});i((e=>(0,o.sortBy)((0,o.uniqBy)([...e,...s],"address"),(e=>-e.timestamp)))),p(!1)})()}),[b]);const h=(0,n.useCallback)((async(e,s,t=!1)=>{const a=await d.Z.solflarerecentaddresses.get(),n=(0,o.sortBy)(a,(e=>-e.timestamp)),c=await b(e)||e,u=n.findIndex((t=>s&&s!==(0,l.r)(e)?s===t.name:!t.name&&t.address===e));if(t)u>=0&&(await d.Z.solflarerecentaddresses.removeEntry(u),i((e=>e.filter(((e,s)=>s!==u)))));else{const t={address:e,pubkey:c,timestamp:r()().unix(),...s!==(0,l.r)(e)&&{name:s}};await d.Z.solflarerecentaddresses.upsertEntry(u,t),i((e=>(u>=0&&e.splice(u,1),e.unshift({...t}),e)))}}),[b]),g=(0,n.useMemo)((()=>({addresses:t,isLoading:f,upsertAddress:h})),[t,f,h]);return(0,a.jsx)(m.Provider,{value:g,children:e})},p=()=>{const e=(0,n.useContext)(m);if(!e)throw new Error("useRecentAddressesContext must be used within a RecentAddressesProvider");return e}},"../../libs/shared/dist/features/recipientInput/components/RecipientInput/index.js":(e,s,t)=>{t.d(s,{T:()=>u});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),i=t("../../libs/foundation-ui/dist/index.js"),r=t("../../libs/shared/dist/constants/index.js"),o=t("../../libs/shared/dist/utils/extension.js"),d=t("../../libs/shared/dist/features/pfp/components/index.js"),l=t("../../libs/shared/dist/features/recipientInput/context/index.js"),c=t("../../libs/shared/dist/features/recipientInput/types.js");const u=({hasErrors:e,displaySaveAddressCheckbox:s})=>{const{t}=(0,n.$)(),{recipients:u,setSearch:m,isLoading:f,isAddressValid:p,selectedRecipient:b,isAddressSaveable:h,saveAddressChecked:g,setSaveAddressChecked:y,saveAddressError:x,addressName:k,setAddressName:j,changeSelectedRecipient:v,onPaste:w,isDisabled:_}=(0,l.x)(),S=[{value:c.f.RECENT,label:t("address_input_recent")},{value:c.f.MNEMONIC,label:t("address_input_mnemonic")},{value:c.f.METAMASK,label:t("address_input_metamask")},{value:c.f.BURNER,label:t("address_input_burner")},{value:c.f.LEDGER,label:t("address_input_ledger")},{value:c.f.KEYSTONE,label:t("address_input_keystone")},{value:c.f.PRIVATEKEY,label:t("address_input_imported")},{value:c.f.SAVED,label:t("address_input_saved")}];return(0,a.jsxs)(i.SelectRecipientForm,{children:[(0,a.jsx)(i.SelectRecipient,{error:p?null:t("address_book_new_contact_address_solana_incorect"),isFetching:f,recipients:u,label:t("form_recepient_address"),placeholder:t("form_recepient_placeholder"),recipientGroups:S,selectedRecipient:b,onInputChange:m,onPaste:w,disabled:_,onSelectedItemChange:v,onClearSelection:()=>v(null),renderAvatar:e=>(0,a.jsx)(d.y,{publicKey:e,"data-id":"recipient-avatar"})}),s&&!e&&!o.Qd&&h&&(0,a.jsxs)(i.SaveContactForm,{children:[(0,a.jsx)(i.Control,{id:"saveContactCheckbox",label:t("form_save_address"),action:(0,a.jsx)(i.Checkbox,{checked:g,onChange:e=>y(!!e.target.checked)})}),g&&(0,a.jsx)(i.TextField,{error:Boolean(x),hint:(0,a.jsx)(i.Label,{error:!0,children:x}),maxLength:r.go,placeholder:t("form_name_placeholder"),value:k,onChange:e=>j(e.target.value),id:"enterContactNameInputId",label:(0,a.jsx)(i.Label,{htmlFor:"enterContactNameInputId",children:t("form_save_address_name")})})]})]})}},"../../libs/shared/dist/features/recipientInput/constants.js":(e,s,t)=>{t.d(s,{NI:()=>a,XV:()=>i,bQ:()=>n});const a=3,n=400,i={MANUAL:"manualInput",RECENT:"recent",SAVED:"addressBook",MNEMONIC:"myWallets",METAMASK:"myWallets",BURNER:"myWallets",LEDGER:"myWallets",KEYSTONE:"myWallets",PRIVATEKEY:"myWallets"}},"../../libs/shared/dist/features/recipientInput/context/RecipientInputState/index.js":(e,s,t)=>{t.d(s,{j:()=>y,x:()=>x});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../../node_modules/lodash/lodash.js"),o=t("../../libs/shared/dist/features/addressBook/context/index.js"),d=t("../../libs/shared/dist/features/recentAddresses/context/index.js"),l=t("../../libs/shared/dist/features/walletData/hooks/index.js"),c=t("../../libs/shared/dist/features/recipientInput/constants.js"),u=t("../../libs/shared/dist/utils/isPublicKeyValid.js"),m=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),f=t("../../libs/shared/dist/features/shared/account/index.js"),p=t("../../libs/shared/dist/features/recipientInput/transformers/index.js"),b=t("../../libs/shared/dist/features/recipientInput/types.js");const h=(0,n.createContext)({recipients:[],search:"",setSearch:()=>null,isLoading:!1,isAddressValid:!0,selectedRecipient:void 0,isAddressSaveable:!1,addressName:"",setAddressName:()=>null,saveAddressChecked:!1,setSaveAddressChecked:()=>null,showCurrentWallet:!0,setShowCurrentWallet:()=>null,saveAddress:()=>Promise.resolve(!1),saveAddressError:null,changeSelectedRecipient:()=>null,isDisabled:!1,onPaste:()=>null}),g={[b.f.RECENT]:0,[b.f.MNEMONIC]:1,[b.f.METAMASK]:2,[b.f.BURNER]:3,[b.f.LEDGER]:4,[b.f.KEYSTONE]:5,[b.f.PRIVATEKEY]:6,[b.f.SAVED]:7},y=({children:e})=>{const[s,t]=(0,n.useState)(""),[b,y]=(0,n.useState)(!1),[x,k]=(0,n.useState)(null),[j,v]=(0,n.useState)(""),[w,_]=(0,n.useState)(!1),[S,C]=(0,n.useState)(""),[T,A]=(0,n.useState)(!0),{publicKey:I}=(0,l.rT)(),{t:P}=(0,i.$)(),N=(()=>{const e=(0,l.Rg)();return e.accounts.map((({publicKey:s,name:t})=>{const a=e.wallets[s];return{publicKey:s,name:t,type:a.type,accountIndex:a.accountIndex??void 0}})).reduce(((e,{publicKey:s,name:t,type:a,accountIndex:n})=>(e[a]||(e[a]=[]),e[a].push({publicKey:s,name:t,accountIndex:n}),e)),{})})(),E=(()=>{const e=(0,l.Rg)();return(0,r.keyBy)(e.accounts,"publicKey")})(),{addAddress:F,addresses:D,nameByAddress:L}=(0,o.b)(),B=(0,d.g)(),{isLoading:R,data:U,isValid:M}=(e=>{const[s,t]=(0,n.useState)(""),{cluster:a}=(0,m.LN)(),[i,o]=(0,n.useState)(null),[d,l]=(0,n.useState)(!1),[p,b]=(0,n.useState)(!1),h=(0,n.useRef)((0,r.debounce)((async(e,s)=>{if(!e)return o(null),void l(!1);try{l(!0),b(!1);let t="",a="",n="";if((0,u.Z)(e))t=e,a="address",n=e;else{const i=await(0,f.ru)(e,s);i&&(t=i.publicKey,a=i.source,n=e)}o(t?{publicKey:t,source:a,query:n}:null)}catch(e){b(!0),o(null)}finally{l(!1)}}),c.bQ)).current;(0,n.useEffect)((()=>(t(e),l(!0),h(e,a),()=>h.cancel())),[e,a,h]);const g=(0,n.useMemo)((()=>!(s.length>0&&!i&&!d&&s===e)),[s,i,d,e]);return{isLoading:d,isError:p,data:i,isValid:g}})(s?.trim()),K=(0,n.useMemo)((()=>{const e=[],t=B.addresses?.filter((e=>((e,s)=>e.address.toLowerCase().includes(s.toLowerCase())||e.name?.toLowerCase().includes(s.toLowerCase())||e.pubkey.toLowerCase().includes(s))(e,s))).slice(0,c.NI).map((e=>(0,p.vd)(e,L,E)));t.length>0&&e.push(...t);const a=(0,r.sortBy)(D,[({name:e})=>e.toLowerCase()])?.filter((e=>((e,s)=>e.address.toLowerCase().includes(s.toLowerCase())||e.name.toLowerCase().includes(s.toLowerCase()))(e,s))).map(p.fB);return a.length>0&&e.push(...a),(0,r.forEach)(g,((t,a)=>{const n=(0,r.sortBy)(N[a],["accountIndex",e=>e.name.toLowerCase()])?.filter((e=>((e,s)=>e.name.toLowerCase().includes(s.toLowerCase())||e.publicKey.toLowerCase().includes(s.toLowerCase()))(e,s))).map((e=>(0,p.Pr)(e,a)));n?.length>0&&e.push(...n)})),e.filter((e=>T||I!==e.address))}),[B,D,s,L,E,N,T,I]),$=(0,n.useMemo)((()=>Boolean(x&&!L[x?.address??""]&&!E[x?.address??""]&&!D.find((e=>e.pubkey===x.address)))),[D,L,x,E]),O=(0,n.useCallback)((async()=>{if(0===j.length)return C(P("form_save_address_name_is_empty")),!1;if(x?.address){const{address:e,name:s,subtitle:t}=x;return await F({pubkey:x.address,name:j,address:t&&s!==t?s??"":e}),v(""),_(!1),C(""),!0}return!1}),[F,j,x,P]),Z=(0,n.useCallback)(((e,s)=>{const a=K.find((t=>s?s===t.name:t.address===e))??null;a&&k(a),!e&&k(null),_(!1),v(""),t("")}),[K]),V=(0,n.useMemo)((()=>{if(U)return"address"===U.source?(0,p.E5)(U):(0,p.EO)(U)}),[U]),q=(0,n.useCallback)((e=>{y(!0),t(e),setTimeout((()=>{y(!1)}),c.bQ)}),[]);(0,n.useEffect)((()=>{V&&k(V)}),[V]);const H=(0,n.useMemo)((()=>({recipients:K,selectedRecipient:x,changeSelectedRecipient:Z,isAddressSaveable:$,addressName:j,setAddressName:v,saveAddressChecked:w,setSaveAddressChecked:_,showCurrentWallet:T,setShowCurrentWallet:A,saveAddress:O,saveAddressError:S,search:s,setSearch:t,recipientGroups:g,isLoading:R,isAddressValid:M,resolveData:U,onPaste:q,isDisabled:b})),[j,Z,$,M,R,K,U,O,w,S,s,x,T,q,b]);return(0,a.jsx)(h.Provider,{value:H,children:e})},x=(e=!0)=>{const s=(0,n.useContext)(h);return(0,n.useEffect)((()=>{s.setShowCurrentWallet(e)}),[s,e]),s}},"../../libs/shared/dist/features/recipientInput/types.js":(e,s,t)=>{var a;t.d(s,{f:()=>a}),function(e){e.MANUAL="MANUAL",e.RECENT="RECENT",e.MNEMONIC="MNEMONIC",e.METAMASK="METAMASK",e.BURNER="BURNER",e.LEDGER="LEDGER",e.KEYSTONE="KEYSTONE",e.PRIVATEKEY="PRIVATEKEY",e.SAVED="SAVED"}(a||(a={}))},"../../libs/shared/dist/features/settings/contexts/DelegatedTokensProviderContext.js":(e,s,t)=>{t.d(s,{k:()=>a});const a=(0,t("../../../node_modules/react/index.js").createContext)(null)},"../../libs/shared/dist/features/settings/contexts/SelectContext.js":(e,s,t)=>{t.d(s,{Z:()=>a});const a=(0,t("../../../node_modules/react/index.js").createContext)(null)},"../../libs/shared/dist/features/settings/contexts/SignedMessagesLogsContext.js":(e,s,t)=>{t.d(s,{U:()=>a});const a=(0,t("../../../node_modules/react/index.js").createContext)(null)},"../../libs/shared/dist/features/settings/hooks/useChangePasswordForm/index.js":(e,s,t)=>{t.d(s,{L:()=>c});var a=t("../../../node_modules/react/index.js"),n=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),i=t("../../../node_modules/lodash/lodash.js"),r=t("../../libs/wallet-core/dist/shared.js"),o=t("../../libs/shared/dist/storage/solflareService.js"),d=t("../../libs/shared/dist/features/shared/snackbar/index.js"),l=t("../../libs/shared/dist/features/walletData/hooks/index.js");const c=()=>{const{t:e}=(0,n.$)(),{locked:s}=(0,l.Rg)(),{login:t,persistWalletData:c}=(0,l.bg)(),u=(0,d.Ds)(),[m,f]=(0,a.useState)({currentPassword:"",newPassword:"",repeatPassword:""}),[p,b]=(0,a.useState)({}),h=Boolean(s),g=(0,a.useCallback)(((e,s)=>{f((t=>({...t,[e]:s}))),b({})}),[]),y=(0,a.useCallback)((async()=>{const s={};if(h&&!m.currentPassword&&(s.currentPassword=e("validation_password_is_required")),m.newPassword||(s.newPassword=e("validation_password_is_required")),s.currentPassword)return b(s),!1;const a=await o.Z.solflaredata.get();let n;try{if(a.locked){const e=(0,r.c_)(m.currentPassword);n=await(0,r.bI)(a.data,e)}else n=a.data}catch(t){s.currentPassword=e("password_incorrect")}if(s.currentPassword||m.currentPassword!==m.newPassword||(s.currentPassword||(s.currentPassword=""),s.newPassword=e("validation_password_cant_be_same_as_old"),s.repeatPassword=""),m.repeatPassword!==m.newPassword&&(s.repeatPassword=e("validation_passwords_dont_match")),!(0,i.isEmpty)(s))return b(s),!1;const d=(0,r.c_)(m.newPassword);return await t({locked:!0,data:n,password:d}),await c(),u.enqueueSnackbar(e("password_updated"),{onClick:()=>{},variant:"info",autoHideDuration:1e3}),!0}),[h,m.currentPassword,m.newPassword,m.repeatPassword,t,c,u,e]),x=h&&0===m.currentPassword.length||0===m.newPassword.length||0===m.repeatPassword.length||0!==Object.keys(p).length;return{values:m,errors:p,setValue:g,changePassword:y,disableSubmit:x,requireCurrentPassword:h}}},"../../libs/shared/dist/features/settings/hooks/useDelegatedTokens/index.js":(e,s,t)=>{t.d(s,{o:()=>i});var a=t("../../../node_modules/react/index.js"),n=t("../../libs/shared/dist/features/settings/contexts/index.js");const i=()=>{const e=(0,a.useContext)(n.kV);if(null===e)throw new Error("useDelegatedTokens must be used within a DelegatedTokensContext");return e}},"../../libs/shared/dist/features/settings/hooks/useHideBalancesSettings/index.js":(e,s,t)=>{t.d(s,{s:()=>r});var a=t("../../../node_modules/react/index.js"),n=t("../../libs/shared/dist/storage/solflareService.js"),i=t("../../libs/shared/dist/features/globalConfig/context/index.js");const r=()=>{const{setHideBalances:e,hideBalances:s}=(0,i.A)();return{isBalanceHidden:s,setHideBalancesEnabled:(0,a.useCallback)((async s=>{e(s),await n.Z.solflareconfig.setField("hideBalances",s)}),[e])}}},"../../libs/shared/dist/features/settings/hooks/useNetworkSettings/index.js":(e,s,t)=>{t.d(s,{Q:()=>m});var a=t("../../../node_modules/react/index.js"),n=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),i=t("../../../node_modules/lodash/lodash.js"),r=t("../../libs/shared/dist/constants/networks.js"),o=t("../../libs/shared/dist/storage/solflareService.js"),d=t("../../libs/shared/dist/features/confirmDialog/context/index.js"),l=t("../../libs/shared/dist/features/globalConfig/context/index.js"),c=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),u=t("../../libs/shared/dist/features/shared/snackbar/index.js");const m=()=>{const{t:e}=(0,n.$)(),{enqueueSnackbar:s,closeSnackbar:t}=(0,u.Ds)(),{setNetwork:m}=(0,l.A)(),{confirm:f}=(0,d.O)(),{cluster:p}=(0,c.LN)(),b=(0,a.useRef)(p);return{current:p,changeNetwork:(0,a.useCallback)((async a=>!(a!==r.EE.mainnet&&!await f({title:e("network_switch_warning_title",{cluster:(0,i.upperFirst)(a)}),message:e("network_switch_warning_description",{cluster:a.toLowerCase()}),confirmButtonText:e("action_continue")}))&&(m(a),await o.Z.solflareconfig.setField("network",a),t(`changeNetwork-${b.current}`),s(e("network_connected_to",{cluster:(0,i.upperFirst)(a)}),{autoHideDuration:3e3,variant:"info"}),b.current=a,!0)),[t,f,s,m,e])}}},"../../libs/shared/dist/features/settings/hooks/useNotificationsSettings/index.js":(e,s,t)=>{t.d(s,{u:()=>p});var a=t("../../../node_modules/react/index.js"),n=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),i=t("../../libs/shared/dist/utils/extension.js"),r=t("../../libs/shared/dist/features/notifications/api/index.js"),o=t("../../libs/shared/dist/features/notifications/context/index.js"),d=t("../../libs/shared/dist/features/notifications/utils/index.js"),l=t("../../libs/shared/dist/features/walletData/hooks/index.js"),c=t("../../libs/shared/dist/features/settings/notifications/notificationPreferences.js"),u=t("../../libs/shared/dist/features/settings/utils/index.js");const m=["inbound-asset","inbound-nft","outbound-asset","outbound-nft"],f=()=>window.open("/wallet.html#/settings/notifications","_blank"),p=()=>{const{i18n:e}=(0,n.$)(),{notificationAuth:s,notificationsEnabled:t,notificationsSupported:p,notificationDevice:b,setNotificationDevice:h,setNotificationsEnabled:g}=(0,o.l)(),{publicKey:y,walletType:x}=(0,l.rT)(),k=(0,d.GW)(x||""),j=(0,a.useMemo)((()=>(b?.subscriptions??[]).find((e=>e.publicKey===y))),[b?.subscriptions,y]),v="granted"!==Notification.permission||!j,w=!p||"denied"===Notification.permission,_=!!(!v&&t&&b&&b.subscriptions&&b?.subscriptions.length),S=(0,a.useCallback)((async t=>{if("denied"!==Notification.permission||!i.p1||i.Cy)if("default"===Notification.permission)await(0,r.b2)(s,e.language,!0),g(!0),i.p1&&!i.Cy?f():await Notification.requestPermission();else try{await(0,r.b2)(s,e.language,t),g(t)}catch{g(!t)}else f()}),[g,e.language,s]),C=(0,a.useCallback)((async(t,a,n=!1)=>{if(!b)return!1;const i=(0,c.Hv)(b.subscriptions,y,t,a,n),o=await(0,r.J)(s,i,e.language);return h(o),!0}),[e.language,s,b,h,y]),T=(0,a.useMemo)((()=>m.map((e=>({id:e,enabled:(0,u.fq)(e,j)})))),[j]);return{webPushBlocked:w,webPushEnabled:_,notificationsEnabled:t,isNotificationsAvailableForWallet:k,notificationsDisabled:v,notificationsSupported:p,setNotificationsEnabled:S,setPreferenceEnabled:C,subscription:j,preferences:T}}},"../../libs/shared/dist/features/settings/hooks/useSelect/index.js":(e,s,t)=>{t.d(s,{L:()=>i});var a=t("../../../node_modules/react/index.js"),n=t("../../libs/shared/dist/features/settings/contexts/index.js");const i=()=>{const e=(0,a.useContext)(n.ZB);if(null===e)throw new Error("useSelect must be used within a SelectContext");return e}},"../../libs/shared/dist/features/settings/hooks/useSignedMessagesLogs/index.js":(e,s,t)=>{t.d(s,{n:()=>i});var a=t("../../../node_modules/react/index.js"),n=t("../../libs/shared/dist/features/settings/contexts/index.js");const i=()=>{const e=(0,a.useContext)(n.U7);if(null===e)throw new Error("useSignedMessagesLogs must be used within a SignedMessagesLogsContext");return e}},"../../libs/shared/dist/features/settings/notifications/notificationPreferences.js":(e,s,t)=>{t.d(s,{Hv:()=>r,Zj:()=>n,vv:()=>i});var a=t("../../../node_modules/lodash/lodash.js");const n=(e,s)=>{switch(e){case"inbound-asset":return s("notifications_type_inbound_coins");case"outbound-asset":return s("notifications_type_sent_tokens");case"inbound-nft":return s("notifications_type_receive_collectibles");case"outbound-nft":return s("notifications_type_sent_collectibles");default:return""}},i=(e,s)=>{switch(e){case"inbound-asset":return s("notifications_type_receive_tokens_description");case"outbound-asset":return s("notifications_type_sent_tokens_description");case"inbound-nft":return s("notifications_type_receive_collectibles_description");case"outbound-nft":return s("notifications_type_sent_collectibles_description");default:return""}},r=(e=[],s,t,n,i)=>{const r=[],o=(0,a.cloneDeep)(e);"inbound-asset"===t?(r.push("inbound-sol"),r.push("inbound-spl")):"outbound-asset"===t?(r.push("outbound-sol"),r.push("outbound-spl")):"inbound-nft"===t?r.push("inbound-nft"):"outbound-nft"===t&&r.push("outbound-nft");for(const e of r)for(let t=0;t<o.length;t++)(i||o[t].publicKey===s)&&(o[t].preferences=o[t].preferences.filter((s=>s!==e)),n&&o[t].preferences.push(e));return o}},"../../libs/shared/dist/features/settings/providers/DelegatedTokensProvider.js":(e,s,t)=>{t.d(s,{Z:()=>E});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../../node_modules/lodash/lodash.js"),o=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),d=t("../../libs/foundation-ui/dist/index.js"),l=t("../../libs/shared/dist/hooks/useResizedImage.js"),c=t("../../libs/shared/dist/utils/truncateMiddle.js"),u=t("../../libs/shared/dist/components/TokenAvatar/index.js");const m=({type:e,image:s,name:t,address:n,delegatedAddress:i,amount:r,tokenVerified:m})=>{const{url:f}=(0,l.j)(s);return(0,a.jsx)(d.ConfirmTransaction,{avatar:(0,a.jsx)(d.IconAvatar,{size:"xl",icon:o.s3v}),transactionFromItem:(0,a.jsx)(d.TXListItem,{title:t||(0,c.r)(n),subtitle:(0,c.r)(i),avatar:"nft"===e?(0,a.jsx)(d.NFTAvatar,{src:f}):(0,a.jsx)(u.y,{src:f,verified:m}),amount:r})})},f={nfts:o.l9f,tokens:o.t5N,mixed:o.Psp},p=({type:e,count:s})=>{const{t}=(0,i.$)();return(0,a.jsx)(d.ConfirmTransaction,{avatar:(0,a.jsx)(d.IconAvatar,{size:"xl",icon:o.s3v}),transactionFromItem:(0,a.jsx)(d.TXListItem,{title:t("nfts"===e?"confirmation_spending_approval_revoke_type_nfts":"tokens"===e?"confirmation_spending_approval_revoke_type_tokens":"confirmation_spending_approval_revoke_type_mixed",{count:s}),avatar:(0,a.jsx)(d.IconAvatar,{variant:"nfts"===e?"square":"circle",icon:f[e]})})})};var b=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),h=t("../../libs/shared/dist/features/nfts/hooks/useNftData.js"),g=t("../../libs/shared/dist/features/portfolio/queries/index.js"),y=t("../../libs/shared/dist/features/transactionFlow/context/index.js"),x=t("../../libs/shared/dist/features/transactionFlow/hooks/index.js"),k=t("../../libs/shared/dist/features/walletData/hooks/index.js"),j=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),v=t("../../../node_modules/base64-js/index.js"),w=t("../../libs/shared/dist/api/index.js"),_=t("../../../node_modules/console-browserify/index.js");const S="https://wallet-api.solflare.com";async function C({tokens:e,address:s,network:t}){try{const{body:a}=await(0,w.v_)(`${S}/v2/portfolio/token/revoke-delegation?network=${t}`,{address:s,tokens:e.map((e=>({token:e.address,mint:e.tokenId,...e.state&&{state:e.state},...Number.isInteger(e.tokenStandard)&&{tokenStandard:e.tokenStandard},delegate:e.delegateAddress}))),network:t});return{transactions:a.txs.map((e=>j.VersionedTransaction.deserialize((0,v.toByteArray)(e)))).map((e=>({transaction:e})))}}catch(e){throw _.log("error",e),new Error(e?.response?.data?.error||e?.message)}}async function T({token:e,address:s,network:t}){const{transactions:a}=await C({tokens:[e],address:s,network:t});return{transaction:a[0].transaction}}var A,I=t("../../libs/shared/dist/features/settings/contexts/index.js");!function(e){e.Token="token",e.Nft="nft"}(A||(A={}));const P=e=>e.accounts.map((s=>((e,s)=>e.delegation?{type:A.Token,address:e.pubkey,tokenId:s.mint,delegation:{address:e.delegation.pubkey,amount:e.delegation.amount,uiAmount:e.delegation.uiAmount},state:e.state,info:{name:s.name,image:s.imageUri,symbol:s.symbol,price:s.price?.usdPrice,verified:s.verified}}:null)(s,e))).filter(Boolean),N=e=>e.tokenData&&e.tokenData.delegation?{type:A.Nft,address:e.tokenData.pubkey,tokenId:e.id,state:e.tokenData.state,tokenStandard:e.tokenStandard,delegation:{address:e.tokenData.delegation.pubkey,amount:e.tokenData.delegation.amount,uiAmount:e.tokenData.delegation.uiAmount},info:{name:e.name,image:e.image}}:null,E=({children:e})=>{const{t:s}=(0,i.$)(),{publicKey:t}=(0,k.rT)(),{transactionInit:o}=(0,y.p)(),{data:d,isLoading:l,refetch:u}=(0,g.yo)(),{data:f,isLoading:j,refetch:v}=(0,h.c)(),{cluster:w}=(0,b.LN)(),_=l||j,S=(0,n.useMemo)((()=>{const e=[];return _?e:(d?.tokens&&Array.isArray(d.tokens)&&e.push(...d.tokens.map(P).flat()),f?.nfts&&Array.isArray(f.nfts)&&e.push(...f.nfts.map(N).filter(Boolean)),(0,r.sortBy)(e,[e=>e.info.name?.toLowerCase(),e=>+e.delegation.uiAmount],["asc","desc"]))}),[_,d,f]),A=(0,n.useMemo)((()=>(0,r.keyBy)(S,"address")),[S]),E=(0,n.useMemo)((()=>Object.keys(A)),[A]),F=(0,n.useCallback)((async e=>{const n=A[e];return new Promise(((i,r)=>{o({title:s("action_revoke"),txBuilder:T,builderParams:{token:{address:n.address,tokenId:n.tokenId,state:n.state,tokenStandard:n.tokenStandard,delegateAddress:n.delegation.address},address:t,network:w},commitment:"processed",onBroadcast:({status:e})=>{if("success"===e)return i();r()},onConfirm({status:e}){"success"===e&&("nft"===n.type?v():u())},confirmDialog:(0,a.jsx)(m,{type:n.type,name:n.info.name||(0,c.r)(n.tokenId),tokenVerified:n.info.verified,address:e,delegatedAddress:n.delegation.address,image:n.info.image,amount:"token"===n.type?n.delegation.uiAmount:void 0})})}))}),[A,o,t,s,u,v,w]),D=(0,n.useCallback)((async e=>{if(1===e.length)return F(e[0]);const n=e.map((e=>A[e])).filter(Boolean),i=n.filter((e=>"token"===e.type)).length,r=n.filter((e=>"nft"===e.type)).length;let d="mixed";return i&&!r?d="tokens":!i&&r&&(d="nfts"),new Promise((e=>{o({title:s("action_revoke"),txBuilder:C,builderParams:{tokens:n.map((e=>({address:e.address,tokenId:e.tokenId,state:e.state,tokenStandard:e.tokenStandard,delegateAddress:e.delegation.address}))),address:t,network:w},useSignAndSend:x.go,commitment:"processed",onEnd:()=>{["nfts","mixed"].includes(d)&&v(),["tokens","mixed"].includes(d)&&u(),e()},confirmDialog:(0,a.jsx)(p,{type:d,count:n.length})})}))}),[A,o,t,s,u,v,w]),L={isLoading:_,delegatedTokens:S,items:E,itemsById:A,revoke:F,revokeMultiple:D};return(0,a.jsx)(I.kV.Provider,{value:L,children:e})}},"../../libs/shared/dist/features/settings/providers/SelectProvider.js":(e,s,t)=>{t.d(s,{Z:()=>r});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../libs/shared/dist/features/settings/contexts/index.js");const r=({children:e})=>{const[s,t]=(0,n.useState)("none"),[r,o]=(0,n.useState)(new Map),d=(0,n.useMemo)((()=>({selected:r,setSelected:o,mode:s,setMode:t})),[s,r]);return(0,a.jsx)(i.ZB.Provider,{value:d,children:e})}},"../../libs/shared/dist/features/settings/providers/SignedMessagesLogsProvider.js":(e,s,t)=>{t.d(s,{Z:()=>m});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../libs/foundation-ui/dist/index.js"),o=t("../../libs/shared/dist/storage/solflareService.js"),d=t("../../libs/shared/dist/features/confirmDialog/context/index.js"),l=t("../../libs/shared/dist/features/settings/contexts/index.js"),c=t("../../libs/shared/dist/features/settings/utils/index.js"),u=t("../../../node_modules/console-browserify/index.js");const m=({children:e})=>{const{t:s}=(0,i.$)(),[t,m]=(0,n.useState)(!0),[f,p]=(0,n.useState)([]),{confirm:b}=(0,d.O)(),h=(0,n.useCallback)((async()=>{let e;try{e=await o.Z.solflaresigneddata.get()}catch(e){u.warn(e)}const s=new Map;for(const t of e||[]){const{origin:e,title:a}=t;if(t._origin=(0,c.CS)(e),!a&&!s.has(t.origin))try{const e=await fetch(t._origin).then((e=>e.text())).then((0,c.Wf)("<title>","</title>"));s.set(t.origin,e)}catch(e){u.warn(e)}}const t=(e??[]).reverse().map((e=>({...e,title:e.title||s.get(e.origin)})));p(t)}),[]),g=(0,n.useCallback)((async e=>{if(!await b({title:s("settings_signed_logs_delete_title"),message:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Section,{children:(0,a.jsx)(r.Paragraph,{children:s("settings_signed_logs_delete_description")})}),(0,a.jsx)(r.Section,{children:(0,a.jsx)(r.SubscribeListItem,{title:e.title||e.origin,subtitle:e.title?e.origin:void 0,avatarSrc:`https://www.google.com/s2/favicons?domain=${e.origin}&sz=128`})})]})}))return!1;const t=(await o.Z.solflaresigneddata.get()??[]).filter((s=>s.id!==e.id));return await o.Z.solflaresigneddata.set(t),await h(),!0}),[h,b,s]),y=(0,n.useCallback)((async()=>!!await b({title:s("settings_signed_logs_delete_all_title"),message:s("settings_signed_logs_delete_all_description")})&&(o.Z.solflaresigneddata.set([]),await h(),!0)),[h,b,s]);(0,n.useEffect)((()=>{h().then((()=>m(!1)))}),[h]);const x={isLoading:t,logs:f,removeAll:y,removeLog:g};return(0,a.jsx)(l.U7.Provider,{value:x,children:e})}},"../../libs/shared/dist/features/settings/utils/index.js":(e,s,t)=>{t.d(s,{Wf:()=>i,fq:()=>a.f,CS:()=>n});var a=t("../../libs/shared/dist/features/settings/utils/notifications.js");t("../../../node_modules/dayjs/dayjs.min.js");const n=e=>/^https?:\/\//i.test(e)?e:`http://${e}`,i=(e,s)=>t=>t.match(new RegExp(`${e}(.*)${s}`))[1]},"../../libs/shared/dist/features/settings/utils/notifications.js":(e,s,t)=>{t.d(s,{f:()=>a});const a=(e,s)=>{if(!s)return!1;return"inbound-asset"===e?["inbound-sol","inbound-spl"].some((e=>s.preferences.includes(e))):"outbound-asset"===e?["outbound-sol","outbound-spl"].some((e=>s.preferences.includes(e))):"inbound-nft"===e?s.preferences.includes("inbound-nft"):s.preferences.includes("outbound-nft")}},"../../libs/shared/dist/features/shared/account/api/index.js":(e,s,t)=>{t.d(s,{r:()=>n});var a=t("../../libs/shared/dist/api/index.js");const n=async(e,s="mainnet")=>{try{const{body:t}=await(0,a.U2)(`https://wallet-api.solflare.com/v2/resolver/resolve/${e}?network=${s}`);return t}catch(e){return null}}},"../../libs/shared/dist/features/shared/account/utils.js":(e,s,t)=>{t.d(s,{$:()=>o,h:()=>r});var a=t("../../../node_modules/@solana/spl-token/lib/esm/constants.js"),n=t("../../../node_modules/@solana/spl-token/lib/esm/state/mint.js"),i=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js");const r=async({pubkey:e,connection:s})=>{if(!e)return;let t=null;try{t=new i.PublicKey(e)}catch(e){return{ok:!1,error:"INVALID_PUBLIC_KEY"}}const n=await s.getParsedAccountInfo(t);if(null===n.value)return{ok:!0,confirm:"ACCOUNT_DOESNT_EXIST"};{const e=n.value.owner;if(e.equals(i.SystemProgram.programId))return{ok:!0};if(e.equals(i.StakeProgram.programId))return{ok:!0,confirm:"STAKE_ACCOUNT"};if(e.equals(a.H_)||e.equals(a.nA)){const e=n.value.data.parsed;return"mint"===e.type?{ok:!1,error:"MINT_ADDRESS"}:"account"===e.type?{ok:!0,confirm:"SPL_TOKEN_ACCOUNT"}:{ok:!1,error:"TOKEN_PROGRAM"}}return{ok:!1,error:"NOT_SOLANA_ACCOUNT"}}},o=async({pubkey:e,mint:s,connection:t})=>{if(!e)return;let r=null;try{r=new i.PublicKey(e)}catch(e){return{ok:!1,error:"INVALID_PUBLIC_KEY"}}const o=await t.getParsedAccountInfo(r);if(null===o.value||o.value.owner?.equals(i.SystemProgram.programId)){const e=await(0,n.Am)(new i.PublicKey(s),r,!0,a.H_),d=await(0,n.Am)(new i.PublicKey(s),r,!0,a.nA),l=await t.getMultipleParsedAccounts([e,d],{commitment:"confirmed"});return null===l.value?.[0]&&null===l.value?.[1]?{ok:!0,confirm:"ATA_CREATION",accountEmpty:null===o.value}:{ok:!0,accountEmpty:null===o.value}}{const e=o.value.owner;if(e.equals(a.H_)||e.equals(a.nA)){const e=o.value.data.parsed;return"mint"===e.type?{ok:!1,error:"MINT_ADDRESS"}:e.info.mint!==s?{ok:!1,error:"WRONG_MINT"}:{ok:!0,confirm:"TOKEN_ACCOUNT_CORRECT"}}return{ok:!1,error:"NOT_A_TOKEN_ACCOUNT"}}}},"../../libs/shared/dist/features/shared/autoApproveApps/hooks/index.js":(e,s,t)=>{t.d(s,{L:()=>r});var a=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),n=t("../../libs/shared/dist/api/index.js");const i=async()=>{const{body:e}=await(0,n.U2)("https://wallet-api.solflare.com/v2/config/auto-approve-domains");return e},r=()=>(0,a.a)({queryKey:["allowedAutoApproveApps"],queryFn:i})},"../../libs/shared/dist/features/shared/blocklist/hooks/useHydrateBlocklistCache.js":(e,s,t)=>{t.d(s,{Z:()=>r});var a=t("../../../node_modules/react/index.js"),n=t("../../libs/shared/dist/features/shared/blocklist/api/index.js"),i=t("../../../node_modules/console-browserify/index.js");const r=()=>{(0,a.useEffect)((()=>{(async()=>{try{await(0,n.Qc)()}catch(e){i.error("Failed to hydrate blocklist",e)}})()}),[])}},"../../libs/shared/dist/features/shared/components/index.js":(e,s,t)=>{t.d(s,{w:()=>n});var a=t("../../libs/shared/dist/features/trading/queries/index.js");const n=()=>((0,a.Kc)(""),null)},"../../libs/shared/dist/features/staking/api/staking.js":(e,s,t)=>{t.d(s,{GN:()=>l,Gg:()=>u,vB:()=>c,vg:()=>m,yJ:()=>d});var a=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),n=t("../../../node_modules/base64-js/index.js"),i=t("../../libs/shared/dist/api/index.js"),r=t("../../libs/shared/dist/utils/lamportToSol.js");const o="https://wallet-api.solflare.com";async function d({validator:e,amount:s,pubkey:t,network:d,setComputeBudget:l}){const{body:c}=await(0,i.v_)(`${o}/v2/staking/create-stake-account`,{address:t,amount:(0,r.m)(s),validator:e,network:d,setComputeBudget:l});if(c?.error)throw new Error(c.error);if(!c?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:a.VersionedTransaction.deserialize(n.toByteArray(c.txs[0])),data:{stakeAccountPubkey:c?.stakeAccount}}}async function l({stakeAccount:e,address:s,validator:t,network:r,setComputeBudget:d}){const{body:l}=await(0,i.v_)(`${o}/v2/staking/delegate-stake`,{stakeAccount:e,address:s,validator:t,network:r,setComputeBudget:d});if(l?.error)throw new Error(l.error);if(!l?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:a.VersionedTransaction.deserialize(n.toByteArray(l.txs[0]))}}async function c({stakeAccountPubKey:e,address:s,amount:t,setComputeBudget:d,network:l}){const{body:c}=await(0,i.v_)(`${o}/v2/staking/split-stake`,{stakeAccount:e,address:s,amount:(0,r.m)(t),setComputeBudget:d,network:l});if(c?.error)throw new Error(c.error);if(!c?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:a.VersionedTransaction.deserialize(n.toByteArray(c.txs[0])),data:{stakeAccountPubkey:c?.stakeAccount}}}async function u({stakeAccount:e,address:s,amountLamports:t,setComputeBudget:r,network:d}){const{body:l}=await(0,i.v_)(`${o}/v2/staking/withdraw-stake`,{stakeAccount:e,address:s,amount:t,setComputeBudget:r,network:d});if(l?.error)throw new Error(l.error);if(!l?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:a.VersionedTransaction.deserialize(n.toByteArray(l.txs[0]))}}async function m({stakeAccount:e,address:s,setComputeBudget:t,network:r}){const{body:d}=await(0,i.v_)(`${o}/v2/staking/deactivate-stake`,{stakeAccount:e,address:s,network:r,setComputeBudget:t});if(d?.error)throw new Error(d.error);if(!d?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:a.VersionedTransaction.deserialize(n.toByteArray(d.txs[0]))}}},"../../libs/shared/dist/features/stakingCore/components/StakingProvider.js":(e,s,t)=>{t.d(s,{Bf:()=>d,TQ:()=>r,Ub:()=>l,uW:()=>c});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../libs/foundation-ui/dist/index.js");const r={transaction:"",amountInSol:"",amountInUsd:"",validatorName:"",validatorNodePubKey:"",validatorVotePubKey:"",source:""},o=n.createContext({}),d=()=>{const{stakingModal:e}=n.useContext(o);if(!e)throw new Error("useStakeModal called outside the StakeModalProvider context");return e},l=()=>{const e=n.useContext(o);if(!e)throw new Error("useStakingProvider called outside the StakeModalProvider context");return e},c=({children:e})=>{const s=(0,i.useDisclosure)(),[t,d]=(0,n.useState)(),[l,c]=(0,n.useState)(r),u=(0,n.useMemo)((()=>({stakingModal:s,setLastCreatedStakeAccountPubKey:d,lastCreatedStakeAccountPubKey:t,stakingEvents:l,setStakingEvents:c})),[t,s,l]);return(0,a.jsx)(o.Provider,{value:u,children:e})}},"../../libs/shared/dist/features/stakingCore/constants.js":(e,s,t)=>{t.d(s,{T:()=>a});const a=.01},"../../libs/shared/dist/features/stakingCore/index.js":(e,s,t)=>{t.d(s,{TQ:()=>a.TQ,uW:()=>a.uW,fZ:()=>I,gK:()=>u,jg:()=>f,tb:()=>h,QC:()=>k,Bf:()=>a.Bf,ku:()=>_,Ub:()=>a.Ub,te:()=>C,Uo:()=>A});var a=t("../../libs/shared/dist/features/stakingCore/components/StakingProvider.js"),n=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),i=t("../../../node_modules/@tanstack/react-query/build/lib/useMutation.mjs"),r=t("../../libs/shared/dist/features/featureFlags/index.js"),o=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),d=t("../../libs/shared/dist/features/staking/api/staking.js"),l=t("../../libs/shared/dist/features/transactionFlow/context/index.js"),c=t("../../libs/shared/dist/features/walletData/hooks/index.js");const u=()=>{const{t:e}=(0,n.$)(),{setLastCreatedStakeAccountPubKey:s,stakingEvents:t,setStakingEvents:u}=(0,a.Ub)(),{transactionInit:m}=(0,l.p)(),{publicKey:f}=(0,c.rT)(),{cluster:p}=(0,o.LN)();return(0,i.D)({mutationFn:({validator:n,amountSOL:i,onBroadcast:o,confirmData:l})=>new Promise(((s,c)=>{m({title:e("action_stake"),commitment:"confirmed",txBuilder:d.yJ,builderParams:{amount:i,pubkey:f,validator:n,network:p,setComputeBudget:!0},ffLogFunction:r.Ww,ffParams:t,confirmDialog:l,onBroadcast({status:e}){"success"===e&&o?.()},onConfirm({status:e,data:t}){"success"===e?(s(t?.stakeAccountPubkey),u({...a.TQ})):(c(null),u({...a.TQ}))}})})).then((e=>(s(e),e)))})};var m=t("../../../node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs");const f=()=>{const{t:e}=(0,n.$)(),s=(0,m.NL)(),{transactionInit:t}=(0,l.p)(),{publicKey:u}=(0,c.rT)(),{cluster:f}=(0,o.LN)(),{stakingEvents:p,setStakingEvents:b}=(0,a.Ub)();return(0,i.D)({mutationFn:({stakePubkey:n,onBroadcast:i,confirmData:o,validatorPubkey:l})=>t({title:e("action_restake"),commitment:"confirmed",txBuilder:d.GN,builderParams:{address:u,stakeAccount:n,validator:l,network:f,setComputeBudget:!0},ffLogFunction:r.Ww,ffParams:p,confirmDialog:o,onBroadcast({status:e}){"success"===e&&i?.()},onConfirm({status:e}){"success"===e&&(s.invalidateQueries(["staking-accounts"]),b({...a.TQ}))}})})};var p=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),b=t("../../libs/shared/dist/api/index.js");const h=(e,s)=>(0,p.a)({queryKey:["stakingRewards",e,s],queryFn:()=>(async(e,s)=>{let t=`https://wallet-api.solflare.com/v2/staking/account/${e}/rewards`;null!==s&&(t+=`?activationEpoch=${s}`);const{body:a}=await(0,b.U2)(t);return{rewards:a.data}})(e,s),staleTime:1/0,keepPreviousData:!0});var g=t("../../../node_modules/bignumber.js/bignumber.mjs"),y=t("../../libs/shared/dist/hooks/useSolanaBalance/index.js"),x=t("../../libs/shared/dist/utils/lamportToSol.js");const k=()=>{const{t:e}=(0,n.$)(),{setLastCreatedStakeAccountPubKey:s}=(0,a.Ub)(),{transactionInit:t}=(0,l.p)(),{publicKey:u}=(0,c.rT)(),{cluster:m}=(0,o.LN)(),{usdPrice:f}=(0,y.h)();return(0,i.D)({mutationFn:({amountSOL:a,onBroadcast:n,confirmData:i,splitStakeAccount:o})=>{const l=(0,x.s)(o.amount??0);return t({title:e("action_split"),commitment:"confirmed",txBuilder:d.vB,builderParams:{amount:a,address:u,stakeAccountPubKey:o.publicKey,setComputeBudget:!0,network:m},ffLogFunction:r.vH,ffParams:{amountOldSol:l.toString(),amountOldUsd:l.times(f).toString(),amountNewSol:a,amountNewUsd:new g.Z(a).times(f).toString(),validatorName:o.validator?.name??"",validatorNodePubKey:o.validator?.votePublicKey??"",validatorVotePubKey:o.validator?.nodePublicKey??""},confirmDialog:i,onBroadcast({status:e}){"success"===e&&n?.()},onConfirm({status:e,data:t}){"success"===e&&s(t?.stakeAccountPubkey)}})}})};var j=t("../../libs/shared/dist/features/currencies/hooks/index.js");const v={inactive:11,inactiveDeactivating:10,deactivating:9,activating:8,active:7,activeInactive:6,empty:0},w=e=>e.includes("inactive")&&e.includes("deactivating")?"inactiveDeactivating":e.includes("active")&&e.includes("inactive")?"activeInactive":e.includes("empty")?"empty":e.includes("activating")?"activating":e[e.length-1],_=()=>{const{publicKey:e}=(0,c.rT)(),{cluster:s}=(0,o.LN)(),t=(0,j.Af)(),{lastCreatedStakeAccountPubKey:n}=(0,a.Ub)();return(0,p.a)({queryKey:["staking-accounts",s,e,t.ticker,n],queryFn:()=>(async(e,s,t,a)=>{const n=a?`&extend=${a}`:"",{body:i}=await(0,b.U2)(`https://wallet-api.solflare.com/v2/portfolio/stake/${e}?network=${s}&currency=${t}${n}`),r=i;return{...r,stakeAccounts:(o=r.stakeAccounts,o.sort(((e,s)=>{const t=v[w(e.statuses)]||1,a=v[w(s.statuses)]||1;return t!==a?a-t:e.amount!==s.amount?parseInt(s.amount,10)-parseInt(e.amount,10):s.voter>e.voter?1:-1})))};var o})(e,s,t.ticker,n),staleTime:1/0,refetchInterval:3e4,keepPreviousData:!0,enabled:!!e})};var S=t("../../libs/shared/dist/features/stakingCore/utils/transformValidatorResponse.js");const C=(e="",s="")=>{const t=(0,o.LN)();return(0,p.a)({queryKey:["validators",t.cluster,e,s],queryFn:()=>(async(e,s,t)=>{const{body:a}=await(0,b.U2)(`https://wallet-api.solflare.com/v2/staking/validators?network=${e}${s?`&query=${encodeURIComponent(s)}`:""}${t?`&selected=${encodeURIComponent(t)}`:""}`);return a.data.map(S.s)})(t.cluster,e,s),staleTime:1/0,keepPreviousData:!0})};var T=t("../../libs/shared/dist/features/featureFlags/signTx/index.js");const A=()=>{const{t:e}=(0,n.$)(),{transactionInit:s}=(0,l.p)(),{publicKey:t}=(0,c.rT)(),a=(0,m.NL)(),{cluster:r}=(0,o.LN)(),{usdPrice:u}=(0,y.h)();return(0,i.D)({mutationFn:({onBroadcast:n,confirmData:i,amountLamports:o,stakingAccount:l,closeAccount:c=!1,actionType:m="withdraw"})=>{const f=(0,x.s)(o??0);return s({title:e("closeAccount"===m?"close_staking_account_title":"action_withdraw"),commitment:"confirmed",txBuilder:d.Gg,builderParams:{address:t,amountLamports:o.toString(),stakeAccount:l.publicKey,network:r,setComputeBudget:!0},ffLogFunction:"withdraw"===m?T.T4:T.Ad,ffParams:"withdraw"===m?{amountInSol:f.toString(),amountInUsd:f.times(u).toString(),validatorName:l.validator?.name??"",validatorVotePubKey:l.validator?.votePublicKey??"",closeStakingAccount:c}:void 0,confirmDialog:i,onBroadcast({status:e}){"success"===e&&n?.()},onConfirm({status:e}){"success"===e&&a.invalidateQueries(["staking-accounts"])}})}})},I=e=>{const s=e;return s.includes("activating")?"activating":s.includes("deactivating")&&s.includes("inactive")?"deactivating-inactive":s.includes("inactive")&&s.includes("active")?"inactive-active":s.includes("deactivating")?"deactivating":1===s.length&&s.includes("active")?"active":1===s.length&&s.includes("inactive")?"inactive":s.includes("empty")?"empty":void 0}},"../../libs/shared/dist/features/stakingCore/utils/transformValidatorResponse.js":(e,s,t)=>{t.d(s,{s:()=>i});var a=t("../../libs/shared/dist/utils/displayPrice.js"),n=t("../../libs/shared/dist/utils/truncateMiddle.js");const i=e=>({...e,id:e.votePublicKey,name:e.name??(0,n.r)(e.votePublicKey),apyUI:(0,a.ED)({amount:e.apy,suffix:"% APY",displayType:"medium"})})},"../../libs/shared/dist/features/stakingModal/components/StakeForm.js":(e,s,t)=>{t.d(s,{m:()=>c});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),i=t("../../libs/foundation-ui/dist/index.js"),r=t("../../libs/shared/dist/assets/solana.png"),o=t("../../libs/shared/dist/utils/displayPrice.js"),d=t("../../libs/shared/dist/utils/lamportToSol.js");const l=({validator:e,selectedAmount:s})=>{const{t}=(0,n.$)();return(0,a.jsxs)(i.InfoTable,{children:[(0,a.jsx)(i.InfoRow,{left:(0,a.jsxs)(i.InfoRowLeft,{children:[t("staking_stake_detail_annual_return_label"),(0,a.jsx)(i.InfoWithTooltip,{tooltip:t("staking_stake_detail_annual_return_label_tooltip")})]}),right:(0,a.jsx)(i.InfoRowRight,{children:s?(0,o.ED)({amount:+(Number(s)||0)*(e.apy/100),displayType:"short",suffix:" SOL"}):"-"})}),(0,a.jsx)(i.InfoRow,{left:(0,a.jsxs)(i.InfoRowLeft,{children:[t("staking_stake_detail_total_stake_label"),(0,a.jsx)(i.InfoWithTooltip,{tooltip:t("staking_stake_detail_total_stake_label_tooltip")})]}),right:(0,a.jsx)(i.InfoRowRight,{children:(0,o.ED)({amount:(0,d.s)(e.stakeActive),displayType:"none",suffix:" SOL"})})})]})},c=({maxSOLBalance:e,onAmountChange:s,selectedAmount:t,validatorOptions:o,onValidatorQueryChange:d,validatorsFetching:c,validatorsLoading:u,onValidatorChange:m,selectedValidator:f,handleAmountChange:p,computedInputValue:b})=>{const{t:h}=(0,n.$)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.SendInput,{label:(0,a.jsx)(i.Label,{htmlFor:"token-input",children:h("table_token")}),right:s&&(0,a.jsxs)(i.RightLabel,{onClick:e.isGreaterThan(0)?()=>s(e.toString()):void 0,children:[h("swap_max"),": ",e.toString()]}),id:"token-input",value:b,selectedToken:{tokenId:"-",symbol:"SOL",amount:"-",logoURI:r,verified:!0},readOnly:!s,autoFocusAmount:!0,amount:t,amountInputSize:"m",onAmountChange:e=>p?.(e.target.value),tokens:[],onSelectedTokenChange:()=>{},disabledTokenSelect:!0,amountTextInputType:"text"}),(0,a.jsx)(i.ValidatorSelect,{options:o,onSearchChange:e=>d(e.target.value),isLoading:u,isFetching:c,onChange:m,onOpenChange:e=>!e&&d(void 0),value:f??void 0,placeholder:h("staking_please_select_a_validator"),searchInputPlaceholder:h("form_recepient_placeholder"),label:(0,a.jsxs)(a.Fragment,{children:[h("table_validator"),(0,a.jsx)(i.InfoWithTooltip,{tooltip:h("staking_validator_description")})]})}),f&&(0,a.jsx)(l,{validator:f,selectedAmount:t})]})}},"../../libs/shared/dist/features/stakingModal/hooks/useCreateStakeForm.js":(e,s,t)=>{t.d(s,{g:()=>w});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../../node_modules/react-router/dist/index.js"),o=t("../../../node_modules/bignumber.js/bignumber.mjs"),d=t("../../../node_modules/lodash/lodash.js"),l=t("../../libs/shared/dist/components/ConfirmationHelpers/ConfirmationStaking.js"),c=t("../../libs/shared/dist/constants/routes.js"),u=t("../../libs/shared/dist/constants/validatorStatus.js"),m=t("../../libs/shared/dist/utils/common.js"),f=t("../../libs/shared/dist/utils/displayPrice.js"),p=t("../../libs/shared/dist/utils/lamportToSol.js"),b=t("../../libs/shared/dist/utils/truncateMiddle.js"),h=t("../../libs/shared/dist/features/amountInput/utils.js"),g=t("../../libs/shared/dist/features/currencies/hooks/index.js"),y=t("../../libs/shared/dist/features/portfolio/hooks/index.js"),x=t("../../libs/shared/dist/features/stakingCore/index.js"),k=t("../../libs/shared/dist/features/stakingCore/utils/transformValidatorResponse.js"),j=t("../../libs/shared/dist/features/stakingCore/constants.js"),v=t("../../../node_modules/console-browserify/index.js");const w=e=>{const s=(0,r.s0)(),{t}=(0,i.$)(),w=(0,g.Af)(),{data:_}=(0,y.Dm)(),[S,C]=(0,n.useState)(e&&(0,p.s)(e.amount).toString()),[T,A]=(0,n.useState)(e?.validator?.status===u.n.Active?(0,k.s)(e.validator):void 0),[I,P]=n.useState(),[N,E]=n.useState(),[F,D,L]=(0,x.Bf)(),B=n.useRef((0,d.debounce)((e=>E(e)),700)).current,R=(0,n.useCallback)((e=>{P(e),B(e)}),[B]),U=+(_?.accounts[0]?.amount||0),M=o.Z.maximum((0,p.s)(U||0).minus(.05),0),K=S&&+S&&_?.price?.usdPrice&&(0,m.T4)(String(_.price.usdPrice))?(0,f.ED)({amount:String(+S*+_.price.usdPrice),prefix:w.symbol,displayType:"value"}):"",{data:$,isLoading:O,isFetching:Z}=(0,x.te)(N,T?.votePublicKey??void 0),{mutateAsync:V,isLoading:q}=(0,x.gK)(),{mutateAsync:H,isLoading:W}=(0,x.jg)(),G=($||[]).map((e=>({...e,recommendedTagText:e.recommended?t("form_recommended"):void 0}))),Q=((e,s,t=!1,a)=>{if(void 0===s)return;if(s<3200760)return{title:a("validation_insufficient_balance_title",{symbol:"SOL"}),message:a("validation_insufficient_balance_description",{amount:"0.01 SOL"})};if(s<1e7)return{title:a("validation_insufficient_balance_to_stake_title",{symbol:"SOL"}),message:a("validation_insufficient_balance_description",{amount:"0.02 SOL"})};if(t)return;if(void 0===e||isNaN(+e))return;if(0==+e)return;const n=new o.Z(e||0);return""===e||n.isLessThan(j.T)?{title:a("staking_validation_amount_below_minimum_title"),message:a("staking_validation_amount_below_minimum_description",{amount:`${j.T} SOL`})}:(0,p.s)(s).isLessThan(n.plus(.05))?{title:a("staking_validation_insufficient_balance_title"),message:a("staking_validation_insufficient_balance_description")}:void 0})(S,U,Boolean(e),t),z=()=>{C(void 0),A(void 0),L()},Y=!T&&$?G[0]:T,J=e?H:V,X=e?{stakePubkey:e.publicKey,validatorPubkey:Y?.votePublicKey,amountSOL:S,confirmData:(0,a.jsx)(l.Z,{validatorName:Y?.name??(0,b.r)(Y?.votePublicKey),validatorImage:Y?.image??void 0,amount:S??"0"}),onBroadcast:()=>{z(),s(c.xm)}}:{validator:Y?.votePublicKey,amountSOL:S,confirmData:(0,a.jsx)(l.Z,{validatorName:Y?.name??(0,b.r)(Y?.votePublicKey),validatorImage:Y?.image??void 0,amount:S??"0"}),onBroadcast:()=>{z()}};return{selectedAmount:S,setSelectedAmount:C,selectedValidator:Y,setSelectedValidator:e=>{A(e),R()},validatorOptions:G,maxSOLBalance:M,setValidatorFilter:R,validatorFilter:I,validatorsLoading:O,validatorsFetching:Z,createStake:()=>J(X),createStakeLoading:q||W,closeStakeModal:z,error:Q,isStakeModalOpen:F,handleAmountChange:e=>{try{const s=(0,h.$)(e,_?.decimals??0);C(s)}catch(e){v.log(e)}},solanaToken:_,computedInputValue:K}}},"../../libs/shared/dist/features/trading/api/index.js":(e,s,t)=>{t.d(s,{A:()=>i,s:()=>r});var a=t("../../libs/shared/dist/api/index.js"),n=t("../../libs/shared/dist/constants/index.js");const i=async(e,s="")=>{const t={currency:e};s&&(t.query=s);const i=Object.keys(t).map((e=>`${e}=${encodeURIComponent(t[e])}`)).join("&"),{body:r}=await(0,a.U2)(`${n.JF}/v2/swap/capped-tokens?${i}`);return r},r=async({inMint:e,outMint:s,priceImpactPct:t})=>{const i={inMint:e,outMint:s};void 0!==t&&(i.priceImpactPct=t);const r=Object.keys(i).map((e=>`${e}=${encodeURIComponent(i[e])}`)).join("&"),{body:o}=await(0,a.U2)(`${n.JF}/v2/trade/market-price?${r}`);return o}},"../../libs/shared/dist/features/trading/queries/useCappedTokensQuery.js":(e,s,t)=>{t.d(s,{K:()=>d});var a=t("../../../node_modules/react/index.js"),n=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),i=t("../../libs/shared/dist/hooks/index.js"),r=t("../../libs/shared/dist/features/currencies/hooks/index.js"),o=t("../../libs/shared/dist/features/trading/api/index.js");const d=e=>{const s=(0,r.Af)(),t=(0,i.Nr)(e,500),[d,l]=(0,a.useState)({tokens:[],errors:[]}),[c,u]=(0,a.useState)(0),m=(0,n.a)({queryKey:["cappedTokens",s.ticker,t||""],queryFn:()=>(0,o.A)(s.ticker,t||""),staleTime:36e5});return(0,a.useEffect)((()=>{"success"===m.status&&(l(m.data),u(Date.now()))}),[m.data]),{...m,data:d,dataUpdatedAt:c}}},"../../libs/shared/dist/features/trading/queries/useMarketPriceQuery.js":(e,s,t)=>{t.d(s,{i:()=>i});var a=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),n=t("../../libs/shared/dist/features/trading/api/index.js");const i=({inMint:e,outMint:s,priceImpactPct:t,enabledQuery:i=!0})=>(0,a.a)({queryKey:["marketPrice",e,s],queryFn:()=>(0,n.s)({inMint:e,outMint:s,priceImpactPct:t}),retry:!1,refetchInterval:22e3,enabled:i&&!!e&&!!s,cacheTime:0,keepPreviousData:!1})},"../../libs/shared/dist/features/trading/queries/useWalletTokensQuery.js":(e,s,t)=>{t.d(s,{t:()=>p});var a=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),n=t("../../../node_modules/bignumber.js/bignumber.mjs"),i=t("../../libs/shared/dist/constants/mints.js"),r=t("../../libs/shared/dist/utils/displayPrice.js"),o=t("../../libs/shared/dist/utils/tokenAccounts.js"),d=t("../../libs/shared/dist/utils/truncateMiddle.js"),l=t("../../libs/shared/dist/utils/units.js"),c=t("../../libs/shared/dist/features/currencies/hooks/index.js"),u=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),m=t("../../libs/shared/dist/features/portfolio/api/index.js"),f=t("../../libs/shared/dist/features/walletData/hooks/index.js");const p=()=>{const{publicKey:e}=(0,f.rT)(),s=(0,u.LN)(),t=(0,c.Af)();return(0,a.a)({queryKey:["tokens",e,s.url,t.ticker],queryFn:()=>(0,m.lz)(e,s.cluster,t.ticker),select:s=>(({tokens:e},s,t)=>e.map((e=>{const a=(0,o.d)(e.mint,s,e.standard),c=e.mint===i.BH?e.accounts[0]:e.accounts.find((e=>e.pubkey===a)),u=(0,l.d)(c?.amount||0,e.decimals),m=new n.Z(u).times(e.price?.price||0).toString(),f=(0,r.ED)({amount:u,displayType:"amount"});return{tokenId:e.mint,amount:"0"!==f?f:"",rawAmount:u,value:"0"!==f&&e.price?(0,r.ED)({prefix:t,amount:m,displayType:"value",pricePerCoin:e.price?.usdPrice||0}):"",rawValue:m,decimals:e.decimals,isAta:!!c,isUnknown:!e.name,verified:e.verified,name:e.name||(0,d.r)(e.mint),symbol:e.symbol,logoURI:e.imageUri,price:String(e.price?.price??0),usdPrice:e.price?.usdPrice??0,swapable:e.swappable}})).filter(Boolean))(s,e,t.symbol||t.ticker)})}},"../../libs/shared/dist/features/transactionFlow/components/AnalizedDialogContent/index.js":(e,s,t)=>{t.d(s,{Q:()=>k});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),i=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../../node_modules/@mui/styles/makeStyles/makeStyles.js"),o=t("../../../node_modules/base64-js/index.js"),d=t("../../../node_modules/bs58/index.js"),l=t.n(d),c=t("../../libs/foundation-ui/dist/index.js"),u=t("../../libs/rise-ui/dist/index.js"),m=t("../../libs/shared/dist/utils/extension.js"),f=t("../../libs/shared/dist/features/transactionAnalysis/components/index.js"),p=t("../../libs/shared/dist/features/transactionAnalysis/context/index.js"),b=t("../../libs/shared/dist/features/transactionAnalysis/queries/index.js"),h=t("../../libs/shared/dist/features/transactionAnalysis/utils/index.js"),g=t("../../libs/shared/dist/features/transactionFlow/context/index.js");const y=(0,r.Z)((()=>({dialogPaperClassName:{maxWidth:"450px",padding:"0px"},contentClassName:{display:"flex",flexDirection:"column",minHeight:"600px",padding:"16px !important"}}))),x=({transactionMessageBase58:e,transactionBase64:s,onReject:t})=>{const{t:n}=(0,i.$)(),{isBuilderLoading:r,useSignAndSendHook:o}=(0,g.p)(),{signAndSend:d}=o(),{simulationResults:l,isLoading:u}=(0,b.mG)(e??[],"signAndSendTransaction");return(0,a.jsx)(p.y,{timerEnabled:!0,children:(0,a.jsx)(f.BY,{title:(0,a.jsx)(c.PageTitle,{center:n("approve_transaction_one")}),simulationResults:l,onReject:t,onApprove:d,isLoading:r||u,analysisPreview:(0,h.Zb)(l)&&(0,a.jsx)(c.TXSimulationList,{children:l.transactions.map(((e,t)=>(0,a.jsx)(f.ND,{transaction:e,rawTransaction:s?s[t]:""},t)))})})})},k=()=>{const e=y(),{transactionData:s,setOpenAnalizedConfirmDialog:t,callbacks:i}=(0,g.p)(),r=(0,n.useMemo)((()=>s&&"transactions"in s?s.transactions.map((({transaction:e})=>(0,o.fromByteArray)(e.serialize())),[]):void 0),[s]),d=(0,n.useMemo)((()=>{const e=s&&"transactions"in s?s.transactions:null;if(e)return e.map((({transaction:e})=>l().encode(e.message.serialize())))}),[s]),f=(0,n.useCallback)((()=>{t(!1),i.onSign({status:"rejected"}),i.onEnd()}),[i,t]);return m.p1&&!m.Cy?(0,a.jsx)(c.PagePortal,{children:(0,a.jsx)(x,{transactionBase64:r,transactionMessageBase58:d,onReject:f})}):(0,a.jsx)(u.u_,{open:!0,onClose:f,scroll:"body",dialogPaperClassName:e.dialogPaperClassName,contentClassName:e.contentClassName,children:(0,a.jsx)(x,{transactionBase64:r,transactionMessageBase58:d,onReject:f})})}},"../../libs/shared/dist/features/transactionFlow/hooks/useSignAndSendAllParallel.js":(e,s,t)=>{t.d(s,{g:()=>c});var a=t("../../../node_modules/react/index.js"),n=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),i=t("../../libs/shared/dist/hooks/index.js"),r=t("../../libs/shared/dist/features/transactionFlow/context/index.js"),o=t("../../libs/shared/dist/features/transactionFlow/hooks/useSendAndConfirmTransaction.js"),d=t("../../libs/shared/dist/features/transactionFlow/hooks/useSigner.js"),l=t("../../../node_modules/console-browserify/index.js");const c=()=>{const{closableNotification:e}=(0,i.hn)(),{transactionData:s,callbacks:t,signAndSendProps:c}=(0,r.p)(),{publicKey:u,signAllTransactions:m}=(0,d.m)(),{sendAndConfirmAllTransactionsParallel:f}=(0,o.Q)();return{signAndSend:(0,a.useCallback)((async()=>{const a=s&&"transactions"in s?s.transactions:null;if(!a)return;t.onStart();const{commitment:i}=c;try{const e=[];for(const s of a){const{transaction:t}=s;e.push(t)}const r=e.map((e=>e.message.serialize()));let o;try{o=await m(r)}catch(e){return void t.onSign({status:"rejected"})}if(!o)return void t.onSign({status:"rejected"});t.onSign({status:"success"});const d=[...e];if(d.forEach(((e,s)=>{e.addSignature(new n.PublicKey(u),o?.[s])})),d?.length!==e?.length)throw new Error("Failed to sign the transactions");await f({transactions:d,commitment:i,transactionData:s,callbacks:t})}catch(s){l.error(s),e({message:s.toString(),variant:"warning"})}finally{t.onEnd()}}),[t,e,f,m,c,s,u])}}},"../../libs/shared/dist/features/transactionFlow/hooks/useSignAndSendBundle.js":(e,s,t)=>{t.d(s,{H:()=>c});var a=t("../../../node_modules/react/index.js"),n=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),i=t("../../libs/shared/dist/features/shared/snackbar/index.js"),r=t("../../libs/shared/dist/features/transactionFlow/context/index.js"),o=t("../../libs/shared/dist/features/transactionFlow/hooks/useSendAndConfirmTransaction.js"),d=t("../../libs/shared/dist/features/transactionFlow/hooks/useSigner.js"),l=t("../../../node_modules/console-browserify/index.js");const c=()=>{const{enqueueSnackbar:e}=(0,i.Ds)(),{transactionData:s,callbacks:t,signAndSendProps:c}=(0,r.p)(),{publicKey:u,signAllTransactions:m}=(0,d.m)(),{sendAndConfirmTransaction:f,sendAndConfirmBundleTransactions:p}=(0,o.Q)();return{signAndSend:(0,a.useCallback)((async()=>{const a=s&&"transactions"in s?s.transactions:null;if(!a)throw Error("No transactions data");let i=[];t.onStart();const{commitment:r}=c;try{const e=[];for(const s of a){const{transaction:a}=s;e.push(a);const r=e.map((e=>e.message.serialize()));let o;try{o=await m(r)}catch(e){return void t.onSign({status:"rejected"})}if(!o)return void t.onSign({status:"rejected"});if(t.onSign({status:"success"}),i=[...e],i.forEach(((e,s)=>{e.addSignature(new n.PublicKey(u),o?.[s])})),i?.length!==e?.length)throw new Error("Failed to sign the transactions")}1===i.length?await f({commitment:r,transaction:i[0],transactionData:s,callbacks:t}):await p({transactions:i,transactionData:s,callbacks:t})}catch(s){l.error(s),e(s.toString(),{variant:"warning",autoHideDuration:5e3})}finally{t.onEnd()}}),[t,e,p,f,m,c,s,u])}}},"../../libs/shared/dist/features/whatsNew/modals/index.js":(e,s,t)=>{t.d(s,{n:()=>x});var a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),i=t("../../libs/shared/dist/assets/whats-new-guards-1.mp4"),r=t("../../libs/shared/dist/assets/whats-new-guards-2.mp4"),o=t("../../libs/shared/dist/features/featureFlags/index.js"),d=t("../../../node_modules/react/index.js"),l=t("../../../node_modules/react-router/dist/index.js"),c=t("../../../node_modules/@mui/styles/makeStyles/makeStyles.js"),u=t("../../libs/foundation-ui/dist/index.js"),m=t("../../libs/rise-ui/dist/index.js"),f=t("../../libs/shared/dist/storage/solflareService.js"),p=t("../../libs/shared/dist/utils/extension.js"),b=t("../../libs/shared/dist/utils/featureFlags.js");const h=(0,c.Z)((()=>({dialogScreenPaper:{padding:"0px",width:"auto",borderRadius:"20px"},content:{padding:"0px !important",borderRadius:"20px",overflow:"hidden"}}))),g=({starts:e,ends:s,storageKey:t,cta:n,logInfo:{page:i,namespace:r},...c})=>{const g=(0,l.TH)(),y=h(),[x,k]=(0,d.useState)(!1),[j,v]=(0,d.useState)(0),w="/onboard/success"===g.state?.from,_=(0,d.useCallback)((async()=>{await f.Z.whatsNew.setField(t,!0),k(!1),b.Z.pl(i)}),[t]),S=(0,d.useCallback)((async e=>{(0,o.FA)(r,e+1),_()}),[r,_]);(0,d.useEffect)((()=>{(async()=>{if(w)return void _();const a=await f.Z.whatsNew.getField(t),n=new Date;k((!e||n>=e)&&(!s||n<=s)&&!a)})()}),[]),(0,d.useEffect)((()=>{x&&b.Z.pv(i)}),[x]);const C=()=>{(0,o.tR)(r),n.action(),_()};return x?p.p1&&!p.Cy?(0,a.jsx)(u.FullPageModal,{open:!0,children:(0,a.jsx)(u.WhatsNew,{...c,onClose:S,cta:{...n,action:C}})}):(0,a.jsx)(m.u_,{open:!0,contentClassName:y.content,dialogPaperClassName:y.dialogScreenPaper,onClose:()=>S(j),children:(0,a.jsx)(u.WhatsNew,{...c,cta:{...n,action:C},updateStepNumber:v})}):null},y=[{title:"Transactions You Trust",paragraph:"Solflare Guards scan every simulated transaction for hidden dangers, keeping your assets safe.",videoSrc:i,duration:7e3},{title:"How do Guards work?",paragraph:"If someone sneaks in extra changes you aren't aware of, Guards detect them and block them instantly.",videoSrc:r,duration:7e3}],x=()=>{const{t:e}=(0,n.$)();return(0,a.jsx)(g,{title:"Absolute Security",steps:y,cta:{title:e("action_continue"),action:()=>{}},storageKey:"guards",logInfo:{page:o.D,namespace:o.kr}})}},"../../libs/shared/dist/hooks/useDebounce.js":(e,s,t)=>{t.d(s,{N:()=>n});var a=t("../../../node_modules/react/index.js");const n=(e,s=300)=>{const[t,n]=(0,a.useState)(e);return(0,a.useEffect)((()=>{const t=setTimeout((()=>{n(e)}),s);return()=>{clearTimeout(t)}}),[e,s]),t}},"../../libs/shared/dist/hooks/useSolanaBalance/index.js":(e,s,t)=>{t.d(s,{h:()=>l});var a=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),n=t("../../libs/shared/dist/constants/mints.js"),i=t("../../libs/shared/dist/features/currencies/hooks/index.js"),r=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),o=t("../../libs/shared/dist/features/portfolio/api/index.js"),d=t("../../libs/shared/dist/features/walletData/hooks/index.js");const l=()=>{const{data:e,isLoading:s}=(()=>{const{publicKey:e}=(0,d.rT)(),s=(0,r.LN)(),t=(0,i.Af)();return(0,a.a)({queryKey:["tokens",e,s.url,t.ticker],queryFn:()=>(0,o.lz)(e||"",s.cluster,t.ticker),refetchInterval:6e4,enabled:!!e})})(),t=e?.tokens?.find((e=>e.mint===n.BH));return{isLoading:s,lamports:t?.accounts?.[0]?.amount||0,price:t?.price?.price||0,usdPrice:t?.price?.usdPrice||0}}},"../../libs/shared/dist/utils/common.js":(e,s,t)=>{t.d(s,{T4:()=>n,T7:()=>o,iP:()=>r,w9:()=>i});var a=t("../../../node_modules/bignumber.js/bignumber.mjs");const n=e=>{const s=Number(e);return!(isNaN(s)||s<0)},i=(e,s)=>{const t=e.split(".")[1]?.length;return!t||s>=t},r=(e,s)=>{const t=new a.Z(e).dp(s??99,a.Z.ROUND_FLOOR);return t.toFixed(t.dp()??0)},o=e=>e.replace(/,/g,"")},"../../libs/shared/dist/utils/lamportToSol.js":(e,s,t)=>{t.d(s,{m:()=>r,s:()=>i});var a=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),n=t("../../../node_modules/bignumber.js/bignumber.mjs");const i=e=>new n.Z(e).dividedBy(a.LAMPORTS_PER_SOL),r=e=>new n.Z(e).times(a.LAMPORTS_PER_SOL)},"../../libs/shared/dist/utils/tokenAccounts.js":(e,s,t)=>{t.d(s,{d:()=>d});var a=t("../../../node_modules/@solana/spl-token/lib/esm/constants.js"),n=t("../../../node_modules/@solana/spl-token/lib/esm/state/mint.js"),i=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js");const r=new Map,o={native:void 0,"spl-token":a.H_,"spl-token-2022":a.nA},d=(e,s,t="spl-token")=>{if(r.has(`${e}-${s}`))return r.get(`${e}-${s}`);const a=(0,n.MO)(new i.PublicKey(e),new i.PublicKey(s),!0,o[t])?.toString();return r.set(`${e}-${s}`,a),a}},"../../libs/shared/dist/utils/units.js":(e,s,t)=>{t.d(s,{d:()=>n,z:()=>i});var a=t("../../../node_modules/bignumber.js/bignumber.mjs");const n=(e,s)=>{const t=new a.Z(10).pow(s);return new a.Z(e.toString()).div(t).toFixed()},i=(e,s)=>{const t=new a.Z(10).pow(s);return new a.Z(e).times(t).toFixed(0,a.Z.ROUND_FLOOR)}},"../../libs/shared/dist/assets/no-activity.svg":(e,s,t)=>{e.exports=t.p+"assets/no-activity.b2481b88..svg"},"../../libs/shared/dist/assets/onramper-info.mp4":(e,s,t)=>{e.exports=t.p+"assets/onramper-info.2468f58f..mp4"},"../../libs/shared/dist/assets/solana-logo-white.svg":(e,s,t)=>{e.exports=t.p+"assets/solana-logo-white.743ffb87..svg"},"../../libs/shared/dist/assets/solana.png":(e,s,t)=>{e.exports=t.p+"assets/solana.356c6cf4..png"},"../../libs/shared/dist/assets/whats-new-guards-1.mp4":(e,s,t)=>{e.exports=t.p+"assets/whats-new-guards-1.5ec7b846..mp4"},"../../libs/shared/dist/assets/whats-new-guards-2.mp4":(e,s,t)=>{e.exports=t.p+"assets/whats-new-guards-2.c98e9d27..mp4"}}]);