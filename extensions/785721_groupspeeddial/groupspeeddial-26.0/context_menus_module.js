"use strict";(globalThis.webpackChunkgroup_speed_dial=globalThis.webpackChunkgroup_speed_dial||[]).push([[72],{1184:(e,t,n)=>{n.d(t,{z:()=>s});var i=n(179),o=n(2846),a=n(2221),r=n(9439);function s(){if(r.vt||a.lw.HIDE_TOP_BAR)return 0;const e=(0,i.ik)()&&(0,i.A$)()&&o.M.GROUPS.length>2?2:1;return a.lw.GROUPS_HEIGHT*e}},3311:(e,t,n)=>{n.r(t),n.d(t,{AdvancedDropMenu:()=>b,MainMenu:()=>v,ReloadMenu:()=>I,SharedGroupsMenu:()=>S,contextMenuDials:()=>C,contextMenuGroups:()=>$});var i=n(5326),o=n(7590),a=n(4643),r=n(1879),s=n(2094);const c=[{key:"",action:"share_import_group"},{key:"",action:"share_import_all"},{key:"",action:"share_re_lock"},(0,s.w)(),{key:"",action:"persist_storage"},(0,s.w)(),{key:"",action:"op_options"},(0,s.w)(),{key:"",action:"op_undo"},(0,s.w)(),{key:"",action:"promo",options:{inNewTab:!0}},(0,s.w)(),{key:"",action:"op_bing_image",options:{preventClose:!0},children:[{key:"",action:"op_bing_next",options:{preventClose:!0}},{key:"",action:"op_bing_previous",options:{preventClose:!0}},(0,s.w)(),{key:"",action:"op_bing_fullscreen",options:{}},{key:"",action:"op_bing_info",options:{}},{key:"",action:"op_bing_quiz",options:{}},(0,s.w)(),{key:"",action:"bing_hide_dials",options:{delayedClose:300}}]},(0,s.w)(),{key:"",action:"edit_group",options:{sourceMenu:"options"}},(0,s.w)(),{key:"s",action:"select_dials"},(0,s.w)(),{key:"",action:"unlock_dials"},(0,s.w)(),{key:"",action:"unlock_grid"},(0,s.w)(),{key:"",action:"master_pwd",options:{preventClose:!0},children:[{key:"",action:"master_pwd_lock",options:{sourceMenu:"options"}},{key:"",action:"master_pwd_unlock"},(0,s.w)(),{key:"",action:"master_pwd_change"}]},(0,s.w)(),{key:"",action:"op_history"},(0,s.w)(),{key:"",action:"share_dials"},(0,s.w)(),{key:"",action:"productivity"},(0,s.w)(),{key:"",action:"archive"},(0,s.w)(),{key:"",action:"op_search"},(0,s.w)(),{key:"",action:"op_reload"},(0,s.w)(),{key:"",action:"op_advanced",options:{preventClose:!0},children:[{key:"",action:"send_runtime_error_log"},(0,s.w)(),{key:"",action:"statistics"}]},(0,s.w)(),{key:"",action:"support_me",options:{preventClose:!0},children:[{key:"",action:"support_patreon"},{key:"",action:"support_paypal"},{key:"",action:"support_coffee"}]},(0,s.w)(),{key:"",action:"op_help",options:{preventClose:!0},children:[{key:"",action:"op_online_help"},{key:"",action:"op_help_pro"},(0,s.w)(),{key:"",action:"op_help_introduction"},(0,s.w)(),{key:"",action:"chrome_store",options:{inNewTab:!0}},{key:"",action:"firefox_addons",options:{inNewTab:!0}},{key:"",action:"edge_store",options:{inNewTab:!0}},(0,s.w)(),{key:"",action:"op_about"},{key:"",action:"report_issues",options:{inNewTab:!0}},(0,s.w)(),{key:"",type:"inline",action:"social_facebook",options:{inNewTab:!0}},{key:"",type:"inline",action:"social_twitter",options:{inNewTab:!0}},{key:"",type:"inline",action:"social_linked_in",options:{inNewTab:!0}}]}];var l=n(5048),d=n(3986),p=n(2663),u=n(2630);const h=[{key:"",action:"convert_to_multi"},{key:"m",action:"add_to_multi"},(0,s.w)("md"),{key:"",action:"insert_up"},{key:"",action:"insert_left"},{key:"",action:"insert_right"},{key:"",action:"insert_down"},(0,s.w)("ip"),{key:"",action:"drop_replace"},{key:"",action:"drop_copy_replace"},{key:"",action:"drop_swap"}],m=[{key:"",action:"share_import_group"},(0,s.w)(),{key:"",action:"share_import_all"},(0,s.w)(),{key:"",action:"share_re_lock"}],g=[{key:"",action:"refresh_dial_automatic"},{key:"",action:"change_image"},(0,s.w)(),{key:"",action:"refresh_dial_by_visit_invisible"},{key:"",action:"refresh_dial_by_visit"},{key:"",action:"refresh_by_visit_delayed"},{key:"",action:"refresh_by_visit_left_align"},(0,s.w)(),{key:"",action:"refresh_all_missing"}];var y=n(5451),w=n(1962),_=n(7879),k=n(2846),x=n(1184),f=n(2221);const v=(()=>{const e=new o.t({menuBuilder:(0,i.$)({autoCloseParentOnClickFn:function(){return e.isVisible()&&(0,w.$H)("options").dispatchEvent(new Event("click"))},iconSize:18,itemPadding:"4px 6px",generateIds:!0,showShortcutsTitle:!0,darkThemeService:_.H,maxWidth:"600px"}),getActionsItemsData:async function(e){return{actions:await(0,a.n)(),items:f.lw.CONTEXT_MENU_OPTIONS||c,data:{activeGroup:r.e.getCurrentGroup(),group:r.e.getCurrentGroup()}}},getX:()=>Number.MAX_SAFE_INTEGER,getY:()=>((0,x.z)()+32)/2,customStyle:"z-index: 10;"});return e})(),b=new o.t({menuBuilder:(0,i.$)({iconSize:18,itemPadding:"4px 6px",generateIds:!0,showShortcutsTitle:!0,darkThemeService:_.H,maxWidth:"600px"}),customStyle:"z-index: 10;",getActionsItemsData:async e=>{const t=e.composedPath(),n=e.ctrlKey,i=r.e.dialById((0,l.C9)(t));if(!i)throw"target dial not found";const o=(0,y.l)(e);if(!o)throw Error("source dial not found");const{dial:s,group:c}=o;return{actions:await(0,a.n)({composedPath:t}),items:h,data:{activeGroup:r.e.getCurrentGroup(),group:r.e.getCurrentGroup(),dial:i,srcDial:s,srcGroup:c,ctrlKey:n}}}}),C=new o.t({menuBuilder:(0,i.$)({iconSize:18,itemPadding:"4px 6px",generateIds:!0,maxWidth:"600px",showShortcutsTitle:!0,darkThemeService:_.H}),customStyle:"z-index: 10;",getActionsItemsData:async e=>{const t=e.composedPath(),n=(0,l.C9)(t),i=n?r.e.dialById(n):void 0;return{actions:await(0,a.n)({contextMenuEvent:e,composedPath:t}),items:f.lw.CONTEXT_MENU_DIAL||(0,d.X$)(p.X,"children",{filter:e=>!!e.defaultOff!=!f.lw.DISABLED_DIALS_MENU?.includes(e.action),map:e=>({...e})}),data:{activeGroup:r.e.getCurrentGroup(),dial:i,group:i&&i.isGroupDial()?k.M.groupById(i.getTargetGroupId()):void 0}}}}),$=new o.t({menuBuilder:(0,i.$)({iconSize:18,itemPadding:"4px 6px",generateIds:!0,maxWidth:"600px",showShortcutsTitle:!0,darkThemeService:_.H}),customStyle:"z-index: 10;",getActionsItemsData:async e=>{const t=e.composedPath(),n=e.target.closest("a")?.id;return{actions:await(0,a.n)({contextMenuEvent:e,composedPath:t}),items:f.lw.CONTEXT_MENU_GROUP||(0,d.X$)(u.G,"children",{filter:e=>!!e.defaultOff!=!f.lw.DISABLED_GROUPS_MENU?.includes(e.action),map:e=>({...e})}),data:{activeGroup:r.e.getCurrentGroup(),group:k.M.groupById((0,l.ti)(n)?(0,l.U0)(n):r.e.id)}}}}),I=new o.t({menuBuilder:(0,i.$)({iconSize:18,itemPadding:"4px 6px",generateIds:!0,showShortcutsTitle:!0,darkThemeService:_.H,maxWidth:"600px"}),customStyle:"z-index: 10; margin-left: -5px; margin-top: -5px",async getActionsItemsData(e){const t=e.composedPath(),n=r.e.dialById((0,l.C9)(t));return{actions:await(0,a.n)(),items:g,data:{activeGroup:r.e.getCurrentGroup(),dial:n,group:n.isGroupDial()?k.M.groupById(n.getTargetGroupId()):void 0}}}}),S=(()=>{const e=new o.t({menuBuilder:(0,i.$)({autoCloseParentOnClickFn:function(){return e.isVisible()&&(0,w.$H)("shared_groups_menu_btn").dispatchEvent(new Event("click"))},iconSize:18,itemPadding:"4px 6px",generateIds:!0,showShortcutsTitle:!0,darkThemeService:_.H,maxWidth:"600px"}),getActionsItemsData:async function(e){return{actions:await(0,a.n)(),items:m,data:{activeGroup:r.e.getCurrentGroup(),group:r.e.getCurrentGroup()}}},getX:()=>0,getY:()=>(0,x.z)(),customStyle:"z-index: 10; box-shadow: none;"});return e})()},3986:(e,t,n)=>{n.d(t,{X$:()=>o,my:()=>a,xZ:()=>r});var i=n(4323);function o(e,t,{filter:n,map:i}){const a=[];for(let r=0;r<e.length;r++){const s=e[r];if(n&&!n(s))continue;const c=s[t],l=c?o(c,t,{filter:n,map:i}):void 0;a.push(i(s,l))}return a}function a(e,t,n,{skipNestedFalsy:a=!0}={}){let r=0;return o(e,t,{map:i.lQ,filter:e=>{const t=n(e);return t&&r++,!a||t}}),r}async function r(e,t,{filter:n,map:i}){const o=[];for(let a=0;a<e.length;a++){const s=e[a];if(n&&!await n(s))continue;const c=s[t],l=c?await r(c,t,{filter:n,map:i}):void 0;o.push(await i(s,l))}return o}},7590:(e,t,n)=>{n.d(t,{t:()=>p});var i=n(4323),o=n(7865),a=n(2441),r=n(1962),s=n(9598),c=n(6690),l=n(6898);const d=new a._;class p{_contextMenuNode;menuBuilder;getActionsItemsData;getX;getY;runtimeContextId;constructor({menuBuilder:e,getActionsItemsData:t,getX:n,getY:i,targetId:a,targetNode:c,runtimeContextId:l="default",customStyle:p="",closeOnEvents:u=["click","dragstart","hashchange"],closeOnTabChange:h=!0}){this._contextMenuNode=(0,s.z)("context-menu",{tabindex:0,style:"position: fixed;\nbox-shadow: 0 0 16px -3px black;\noutline: none;\nwhite-space: nowrap;\ntouch-action: manipulation;\nuser-select: none;\n"+p}),this.menuBuilder=e,this.getActionsItemsData=t,this.getX=n,this.getY=i,this.runtimeContextId=l,d.push(l,this.close),h&&browser.tabs.onActivated.addListener(this.close),u.forEach((e=>window.addEventListener(e,this.close))),e.setAutoCloseParentOnclick(this.close),this._contextMenuNode.addEventListener("click",(e=>{const t=e.target;("CONTEXT-MENU"===t.nodeName||"SEPARATOR"===t.nodeName||t.classList.contains("context-menu-items-container"))&&e.stopPropagation()}),{capture:!0}),(c||a)&&o.W.then((()=>{const e=c||a&&(0,r.$H)(a);e&&e.addEventListener("contextmenu",(e=>this.show(e)),{capture:!1})}))}close=()=>{window.removeEventListener("mouseout",this.onMouseOut),this._contextMenuNode.removeEventListener("keydown",this.onKeyDown),this.isVisible()&&(this._contextMenuNode.remove(),this.menuBuilder.menuClosed())};onMouseOut=e=>{const{clientX:t,clientY:n}=e;(t<=0||n<=0||t>=window.innerWidth||n>=window.innerHeight)&&!this.isMouseNearMenus(t,n)&&this.close()};isVisible(){return document.contains(this._contextMenuNode)}async toggle(e){if(this.isVisible())return this.close();await(0,i.BK)(0),await this.show(e)}isMouseNearMenus(e,t){const n={left:e-64,right:e+64,top:t-64,bottom:t+64};return[...document.querySelectorAll(".context-menu-items-container")].filter((e=>e.offsetParent)).map((e=>e.getBoundingClientRect())).map((e=>(0,l.U)(e,n))).some(i.zz)}async show(e=new MouseEvent("click")){e.preventDefault(),d.get(this.runtimeContextId).forEach(i.g7);const{actions:t,items:n,data:o}=await this.getActionsItemsData(e);this._contextMenuNode.replaceChildren(await this.menuBuilder.buildMenu(t,o,n)),window.addEventListener("mouseout",this.onMouseOut),this._contextMenuNode.addEventListener("keydown",this.onKeyDown),document.body.appendChild(this._contextMenuNode),this._contextMenuNode.focus();const a=this.getX?this.getX():e.clientX-2,r=this.getY?this.getY():e.clientY-2,{width:s,height:l}=this._contextMenuNode.getBoundingClientRect(),p=a+s<window.innerWidth,u=r+l<window.innerHeight;this._contextMenuNode.style.left=(0,c.px)(p?a:window.innerWidth-s),this._contextMenuNode.style.top=(0,c.px)(u?r:window.innerHeight-l)}onKeyDown=e=>{switch(e.key){case"Control":case"Alt":case"Shift":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":return;case"Escape":break;default:this.menuBuilder.handleKey(e.key,e)&&e.preventDefault(),this.close()}this.close()}}},5326:(e,t,n)=>{n.d(t,{$:()=>_});var i=n(4323),o=n(4590),a=n(6004),r=n(7813),s=n(1374),c=n(8408),l=n(7302),d=n(2689),p=n(7526),u=n(3672),h=n(9598),m=n(1181),g=n(2895),y=n(6690),w=n(1962);function _({important:e=!1,generateIds:t=!1,roundEdges:n=!1,showShortcutsTitle:_=!1,maxWidth:k="300px",itemPadding:x="6px",iconSize:f=26,hoverColor:v="#e7e7e7",activeColor:b="#d7d7d7",autoCloseParentOnClickFn:C=i.lQ,containerStyle:$="",submenuStyle:I="",darkThemeService:S={isDarkPromise:Promise.resolve(!1)}}={}){const T=t=>(0,a.DT)(t,{important:e,allToInitial:e}),M=[],N=[],E=[];let P=!0;return{setAutoCloseParentOnclick:e=>C=e,addOnClickHandler:e=>N.push(e),handleKey:function(e,t){const n=M.find((t=>t.key===e));return!!n&&(n.executeAction({data:{},actionId:n.actionId,options:{},event:t}),!0)},buildMenu:async function(e,t,n){const o=await S.isDarkPromise.catch(i.bJ),a=o?"#FFFFFF":"#000000",r=`background: ${o?"#2b2b2b":"#FFFFFF"}; color: ${a}; border: 1px solid ${a}32;`;P=!0,M.length=0;const c=(await Promise.all(n.map((n=>z(e,n,t,{mainStyle:r,darkTheme:o},M))))).filter(i.zz),l=(0,s.Ub)(c,((e,t)=>Boolean(e.isSeparator&&t.isSeparator))),d=(0,s.yf)(l,(e=>e.isSeparator)).map((e=>e.node));return(0,h.z)("div",{class:"context-menu-items-container",style:`${r}${$}`},d)},menuClosed:()=>E.forEach(i.g7)};async function z($,S,A={},{darkTheme:D,mainStyle:B},G=[],O=!1){const F=String((0,p.V)()),L=(0,g.fF)((e=>G.push(e))),R="inline"===S.type;if("separator"===S.type)return L({id:"separator",isSeparator:!0,node:(0,h.z)("separator",{style:T(`${B}; border-left: 0; border-right: 0; border-bottom: 0; margin: 3px 0; padding: 0; display: block;`)}),executeAction:i.lQ,hideChildNode:i.lQ,actionId:S.action,children:[]});const{key:X,action:H,children:W=[],options:U={}}=S,K=$[H];if(!K)return!1;const{name:Y,nameFix:Q,nameFn:V,title:Z,titleFix:J,autoTitle:j,titleFn:q,smallName:ee,smallNameFn:te,smallNameFix:ne,proIcon:ie,proLink:oe,icon:ae,iconStyle:re,darkIconStyle:se,darkIconInvert:ce,fn:le,allowAuxClick:de,onMenu:pe,onChildrenMenu:ue,onClose:he,anchor:me,children:ge,test:ye,disabled:we,enabled:_e,checkbox:ke,checkboxIcons:xe,style:fe="",smallStyle:ve=""}=K,be=fe.includes("background"),Ce=await ie,$e={data:A,actionId:H,options:U,event:new Event("noop")};if(he&&E.push((()=>he($e))),ye&&!await Promise.resolve(ye($e)).catch(i.lQ))return!1;const Ie=Ce&&oe?()=>(0,c.K)(oe,{nextToCurrent:!0,active:!0,inNewTab:!0}):(0,m.do)(i.lQ),Se=!_e&&(!!Ce||!(!we||!await Promise.resolve(we($e)).catch(i.bJ))),Te=Se?e=>Ie(e.event):le,Me=!(!me||Se)&&await Promise.resolve(me($e)).catch(i.bJ),Ne=ge?await ge($e):[],Ee=Ne.reduce(((e,{action:t,menuItem:n})=>(t&&(e[n.action]=t),e)),{});W.push(...Ne.map((({menuItem:e})=>e)));const Pe=()=>Promise.resolve(!!ke&&ke($e)).catch(i.bJ),ze=ke&&(xe?(0,a.t$)(await Pe(),{handlers:{onclick:e=>e.preventDefault()},style:T("visibility: hidden")},{style:T(`margin: 0 10px 0 0; width: ${f}px; height: ${f}px`)},{style:T("width: 100%;")},xe):(0,a.mx)(await Pe(),{handlers:{onclick:e=>e.preventDefault()},style:T(`margin: 0 10px 0 0; width: ${f-3}px; height: ${f}px; appearance: checkbox; -moz-appearance: checkbox; -webkit-appearance: checkbox;`)}));async function Ae(e){ze&&(ze.checked=!ze.checked);const t=Promise.resolve(Te(Object.assign({},$e,{event:e}))).catch(console.error);U.showWorking?await(0,a.$A)(e.currentTarget,(()=>t),{styleContainer:`display: ${R?"inline-":""}flex; align-items: center; font-size: 14px; cursor: default; padding: ${x}; margin: 2px; user-select: none; white-space: nowrap;`,styleImg:`height: ${f}px; width: ${f}px;`,styleLabel:`${R?"display: none":""}; margin: 0 10px; max-width: ${k}; ${a.dQ}`}):await t,N.forEach((e=>e($e))),U.delayedClose&&await(0,i.BK)(U.delayedClose),U.preventClose||C()}const De=e=>t=>{t.stopPropagation();let n=!0;t.stopImmediatePropagation=()=>n=!1,e(t),n&&C()},Be=ne||(te?await te($e):ee?(0,o.C8)(ee):""),Ge=await(0,d.u)(K,$e),Oe=q&&await q($e)||`${j&&Ge||J||(Z?(0,o.C8)(Z):"")}\n${_&&X?(0,o.tr)("cm_shortcut_title",X):""}`.trim(),Fe=[],Le=(0,s.yf)((await Promise.all(W.map((e=>z(Object.assign({},$,Ee),e,A,{darkTheme:D,mainStyle:B},Fe,!0))))).filter(i.zz),(e=>e.isSeparator)),Re=Le.length>0,Xe=Le.some((e=>e.children.length>0));if((W.length>0||ge)&&!Re)return!1;G.push(...Fe);const He=Re?(0,h.z)("div",{class:"context-menu-items-container",style:T(`${B}; position: absolute; display: none; box-shadow: 0px 0px 2px -1px; ${Xe?"":"max-height: 100vh; overflow-y: auto;"}${I}`),handlers:{...(0,r.Z5)("visibility: show; display: block;","",{important:e})}},Le.map((e=>e.node))):void 0,We=Se?"opacity: 0.5;":"",Ue=Se?De(Ie):O?De(Ae):Ae,Ke=(0,h.z)(Me?"a":"div",{...Me?{href:Me,target:"_blank"}:{},...t?{"data-testid":`cm_${H}`}:{},style:T(`display: ${R?"inline-":""}flex; align-items: center; font-size: 14px; padding: ${x}; margin: 2px; cursor: pointer; user-select: none; white-space: nowrap; \n        ${n?"border-radius: 4px;":""}\n        ${Me?"text-decoration: none; color: inherit;":""}\n        ${fe}`),title:`${Ce?`${(0,o.tr)("msg_pro_header")}\n${(0,o.tr)("msg_pro_support")}\n\n`:""}${Oe}`.trim(),handlers:{onclick:Ue,...de?{onauxclick:Ue}:{},...(0,r.Z5)(be&&!Re?"filter: brightness(85%)":`background:${v}${D?"42":""};`,be&&!Re?"filter: brightness(75%)":`background:${b}${D?"84":""}`,{important:e})}},[ze||(0,h.z)("img",{style:T(`${We} height: ${f}px; width: ${f}px; ${ce&&D?"filter: invert(1);":""}${re||""}; ${D?se:""}`),src:ae?(0,l.Z)(ae):w.RO}),(0,h.z)("label",{style:T(`${We}${R?"display: none":""}; margin: 0 10px; cursor: pointer; max-width: ${k}; ${a.dQ}`),textContent:Ge}),Be&&(0,h.z)("i",{style:T(`margin-left: auto; opacity: 0.5;${ve}`),textContent:Be}),Re&&(0,h.z)("img",{style:T("margin: 0 0 0 auto; height: 12px; opacity: 0.5;"+(D?"filter: invert(1);":"")),src:(0,l.Z)("utils/svg/keyboard-right-arrow-button.svg")}),Ce&&(0,h.z)("img",{style:T(`margin: 0 0 0 ${Be||Re?"5px":"auto"}; height: ${f}px; width: ${f}px;`),src:(0,l.Z)(Ce),handlers:{onclick:(0,m.do)(Ie)}}),Re&&(0,h.z)("div",{style:T("position: absolute; left: 0; width: 100%; align-self: start;")},He&&[He])].filter(i.zz));return Ke.addEventListener("mouseleave",(e=>{pe?.(!1,e,$e),He&&ue?.(!1,e,$e)})),Ke.addEventListener("mouseenter",(async e=>{await(0,i.BK)(0),function(e){M.filter((t=>!t.children.find((t=>t.id===e)))).forEach((e=>e.hideChildNode()))}(F),pe?.(!0,e,$e),He&&((0,a.eC)(He,"display","block"),(0,a.eC)(He,"top",(0,y.px)(-2-parseInt((0,u.u)(x,"","px"))||0)),P?function(){if(!He)return;(0,a.eC)(He,"left","100%");const{right:e}=He.getBoundingClientRect();e>window.innerWidth&&((0,a.eC)(He,"left",""),(0,a.eC)(He,"right","100%"),P=!1);const{left:t}=He.getBoundingClientRect();t<0&&((0,a.eC)(He,"left",""),(0,a.eC)(He,"right",`calc(100% + ${t}px)`))}():function(){if(!He)return;(0,a.eC)(He,"right","100%");const{left:e}=He.getBoundingClientRect();e<0&&((0,a.eC)(He,"right",""),(0,a.eC)(He,"left","100%"));const{right:t}=He.getBoundingClientRect();t>window.innerWidth&&((0,a.eC)(He,"right",""),(0,a.eC)(He,"left",`calc(100% - ${t-window.innerWidth}px)`))}(),function(){if(!He)return;const{bottom:e}=He.getBoundingClientRect(),t=e-window.innerHeight;t>0&&(0,a.eC)(He,"top",(0,y.px)(parseInt(He.style.top||"0")-t))}(),ue?.(!0,e,$e))})),L({id:F,actionId:H,isSeparator:!1,node:Ke,executeAction:()=>Te($e),key:X,children:Fe,hideChildNode:()=>{He&&((0,a.eC)(He,"display","none"),(0,a.eC)(He,"right",""),(0,a.eC)(He,"left",""))}})}}}}]);