(()=>{"use strict";var e={4098:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(r,o){function i(e){try{a(s.next(e))}catch(e){o(e)}}function c(e){try{a(s.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}a((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(8033),o=browser.i18n.getUILanguage(),i=[],c=i.concat([{id:"gar-oidc",text:"__MSG_connexion_gar__",icon:"gar-logo.svg"}]);function a(e){document.getElementById("provider-separator").innerHTML='\n        <div class="line"></div>\n        <p class="provider-separator-text">__MSG_ou__</p>\n        <div class="line"></div>\n    ',e.forEach(((t,n)=>{document.getElementById("idps").classList.add("idps-container"),document.getElementById("idps").innerHTML+=`\n            <div class="idp-wrapper">\n                <button type="submit" class="btn-idp vertically-center" id="btn-se-connecter-${t.id}">\n                    <img src="../images/${t.icon}">\n                    <span>${t.text}</span>\n                </button>\n            </div>\n            ${n!==e.length-1?'\n            <div class="idp-separator"></div>\n            ':""}\n        `}))}!function(){const e=document.getElementsByTagName("html");"fr"===o||"fr-FR"===o?c.length>0&&a(c):i.length>0&&a(i);for(let t=0;t<e.length;t++){const n=e[t],s=n.innerHTML.toString(),r=s.replace(/__MSG_(\w+)__/g,(function(e,t){return t?browser.i18n.getMessage(t):""}));r!=s&&(n.innerHTML=r)}}();document.querySelector("img").src="de"===o?browser.runtime.getURL("/images/PopLab-baseline-black-de.svg"):browser.runtime.getURL("images/PopLab-baseline-black.svg"),document.querySelector("form").addEventListener("submit",(e=>s(void 0,void 0,void 0,(function*(){e.preventDefault();const t=document.querySelector(".timeout");t.classList.add("chargement");try{let t=e.submitter.id.replace("btn-se-connecter","");t.length>1&&(t=t.substring(1,t.length)),yield browser.runtime.sendMessage(new r.BrowserRuntimeMessage(r.BrowserRuntimeMessageEventType.CONNECT,void 0,t)),window.close()}catch(e){t.classList.remove("chargement")}})))),browser.runtime.sendMessage(new r.BrowserRuntimeMessage(r.BrowserRuntimeMessageEventType.STATUS)).then((e=>{const t=document.getElementById("error-cant-use-webclipper");e==r.BrowserRuntimeResponse.CONNECTE&&window.close(),e==r.BrowserRuntimeResponse.DECONNECTE&&(t.style.display="none"),e==r.BrowserRuntimeResponse.INTERDIT&&(t.style.display="block")}))},8033:(e,t)=>{var n,s,r,o,i;Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserContextMenusId=t.MessageOngletDone=t.MessageOnglet=t.MessageOngletType=t.BrowserRuntimeResponse=t.BrowserRuntimeMessageSearchArborescenceWithSelectionnable=t.BrowserRuntimeMessageSearchArborescence=t.BrowserRuntimeMessageGetRecentArborescenceWithSelectionnable=t.BrowserRuntimeMessageGetRecentArborescence=t.BrowserRuntimeMessageForPoplab=t.BrowserRuntimeMessage=t.BrowserRuntimeMessageEventSubType=t.BrowserRuntimeMessageEventType=void 0,function(e){e.STATUS="status",e.CONNECT="connect",e.ENVOYER_SUR_POPLAB="envoyer_sur_poplab",e.CAPTURE_TAB="captureTab",e.GET_RECENT_ARBORESCENCE="getRecentHierarchies",e.SEARCH_ARBORESCENCE="searchArborescence"}(n||(t.BrowserRuntimeMessageEventType=n={})),function(e){e.WITH_SELECTIONNABLE="WithSelectionnable"}(s||(t.BrowserRuntimeMessageEventSubType=s={}));class c{constructor(e,t,n){this.type=e,this.subType=t,this.idp=n}}t.BrowserRuntimeMessage=c,t.BrowserRuntimeMessageForPoplab=class extends c{constructor(e,t,s,r){super(n.ENVOYER_SUR_POPLAB),this.type_item_poplab=e,this.type_capture=t,this.data=s,this.destination=r}},t.BrowserRuntimeMessageGetRecentArborescence=class extends c{constructor(){super(n.GET_RECENT_ARBORESCENCE)}},t.BrowserRuntimeMessageGetRecentArborescenceWithSelectionnable=class extends c{constructor(){super(n.GET_RECENT_ARBORESCENCE,s.WITH_SELECTIONNABLE)}};class a extends c{constructor(e,t,n){super(t,n),this.value=e}}t.BrowserRuntimeMessageSearchArborescence=class extends a{constructor(e){super(e,n.SEARCH_ARBORESCENCE)}},t.BrowserRuntimeMessageSearchArborescenceWithSelectionnable=class extends a{constructor(e){super(e,n.SEARCH_ARBORESCENCE,s.WITH_SELECTIONNABLE)}},function(e){e.INTERDIT="interdit",e.DECONNECTE="déconnecté",e.CONNECTE="connecté",e.ENVOYE="envoyé"}(r||(t.BrowserRuntimeResponse=r={})),function(e){e.STOP_CAPTURE="stopCapture",e.CAPTURER_LIEN="capturerLien",e.CAPTURER_IMAGE="capturerImage",e.CAPTURER_VIDEO="capturerVideo",e.TOGGLE_CAPTURE="toggleCapture",e.START_CAPTURE="startCapture",e.UPLOAD_FRIGO_DONE="uploadFrigoDone",e.CANCEL_UPLOAD="cancelUpload",e.REFRESH_CAPTURE="refreshCapture"}(o||(t.MessageOngletType=o={}));class u{constructor(e,t,n){this.first_name=void 0,this.provenance=void 0,this.type=e,this.first_name=t,this.provenance=n}}t.MessageOnglet=u,t.MessageOngletDone=class extends u{constructor(e,t){super(e),this.documentId=t}},function(e){e.SE_DECONNECTER="se-deconnecter",e.VOIR_FRIGO="voir-frigo",e.ENVOYER_LIEN="envoyer-lien",e.ENVOYER_IMAGE="envoyer-image",e.ENVOYER_VIDEO="envoyer-video"}(i||(t.BrowserContextMenusId=i={}))}},t={};!function n(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}(4098)})();