import{a as p}from"./cplx-Bzmv935M.js";import{o as a,s as d}from"./cplx-DNOGgzzX.js";import{$ as s}from"./cplx-BbAh7E-i.js";import{w as l,s as S,U as i,D as b}from"./cplx-Cdcyb6EG.js";import"./cplx-wwbq-DDb.js";import"./cplx-B814hFp-.js";async function N(){return new Promise(t=>{const e=setInterval(()=>{var o;((o=window.next)==null?void 0:o.router)!==void 0&&(s(document.body).attr("data-nextjs-router-ready",""),clearInterval(e),t())},100)})}function n(){return window.next!==void 0}function h(t){s(document.body).attr("location",t)}function C(){a("spa-router:isNextWindowObjectExists",()=>n()),a("spa-router:push",({data:{url:t}})=>{var e;if(!n())throw new Error("Next.js window object not found");try{(e=window.next)==null||e.router.push(t)}catch(o){console.error("Error during route change:",o)}}),a("spa-router:replace",({data:{url:t}})=>{var e;if(!n())throw new Error("Next.js window object not found");(e=window.next)==null||e.router.replace(t)}),a("spa-router:refresh",()=>{var t;if(!n())throw new Error("Next.js window object not found");(t=window.next)==null||t.router.refresh()})}p();let w=null;function O(){if(!n())throw new Error("Next.js router not found");const t=window.next.router,e=t.push,o=history.replaceState;t.push=P(e),history.replaceState=k(o),window.addEventListener("popstate",()=>c({trigger:"popstate",newUrl:window.location.href})),h(l())}function P(t){return async function(e){t.apply(this,[e]),c({trigger:"push",newUrl:e})}}function k(t){return function(e,o,r){t.apply(this,[e,o,r]),typeof r=="string"&&c({trigger:"replace",newUrl:r})}}const c=async({trigger:t,newUrl:e})=>{const o=new URL(e,window.location.origin).href;o!==w&&(w=o,d("spa-router:route-change",{state:"pending",trigger:t,newUrl:e},"content-script"),await L(l(o)),d("spa-router:route-change",{state:"complete",trigger:t,newUrl:e},"content-script"))};async function L(t){const o={thread:r,home:f}[t]??i.waitForSpaIdle;await m(o),h(t);async function r(){return await i.waitForSpaIdle(),i.getMessageBlocks().length>=1}function f(){return s(b.HOME.SLOGAN).length>0}async function m(g,x=3e3,y=100){let u=!1;const j=new Promise(R=>{setTimeout(()=>{u=!0,R(void 0)},x)}),E=async()=>{for(;!u&&!await g();)await S(y)};await Promise.race([E(),j])}}p();await N();O();C();
