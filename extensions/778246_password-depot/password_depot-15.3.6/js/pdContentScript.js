var $JQ=$.noConflict();function log(){}var pd_select_password_interval=10,pd_select_password_selected_entry_uuid="";function isiFrame(){return window.self!==window.top}function GetDocumentUrl(t){var n="";if(t)try{n=t.location?t.location.href:t.URL}catch(e){n=t.URL}return n}function ContainsText(e,t){try{var n=t.toLowerCase();return 0<=e.toLowerCase().indexOf(n)}catch(e){return!1}}function IsValidInput(e){try{var t;return!!e&&("text"==(t=e.toLowerCase())||"password"==t||"email"==t)}catch(e){return!1}}function rawStrToXML(e){return e=e&&(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/>/g,"&gt;")).replace(/</g,"&lt;")).replace(/"/g,"&quot;")).replace(/'/g,"&apos;")}function replaceSpecialCharaters(e){return e=e&&(e=(e=(e=(e=(e=(e=(e=e.replace(/Ä/g,"(*gsba)")).replace(/ä/g,"(*gssa)")).replace(/Ö/g,"(*gsbo)")).replace(/ö/g,"(*gsso)")).replace(/Ü/g,"(*gsbu)")).replace(/ü/g,"(*gssu)")).replace(/ß/g,"(*gsbb)")).replace(/§/g,"(*gsds)")}function XMLToRawStr(e){return e=e&&(e=(e=(e=(e=e.replace(/&amp;/g,"&")).replace(/&gt;/g,">")).replace(/&lt;/g,"<")).replace(/&quot;/g,'"')).replace(/&apos;/g,"'")}function getXMLString(e){return e=e&&(e=isBase64(e)?decodeURIComponent(escape(atob(e))):e).replace(/\\\\/g,"\\")}function getBtoa(t){try{return btoa(t)}catch(e){t=t.replace(/[\u0250-\ue007]/g,"");return btoa(t)}}function isIframe(){return window.self!==window.top}function isValidDocument(e){try{var t;return null==e?!1:(t=GetDocumentUrl(e),"#document"==e.nodeName&&!ContainsText(e.contentType,"xml")&&!ContainsText(t,"about:"))}catch(e){return!1}}function buildFakeXMLform(){var e='<?xml version="1.0" encoding="unicode"?><forms>',e='<?xml version="1.0" encoding="unicode"?><forms><formdata name="dummyForm" idx="0"><fields>',n="";return $JQ("input[type='password'],input[type='text'],input[type='email']").each((e,t)=>{n=n+'<input name="'+t.name+'" type="'+t.type+'" idx="'+e+'">'+rawStrToXML(t.value)+"</input>"}),e=e+n+"</fields></formdata>",e+="</forms>"}function buildDummyXMLForm(e="",t=""){return'<?xml version="1.0" encoding="unicode"?><forms><formdata name="" idx="0"><fields><input name="username" type="text" idx="0">'+e+'</input><input name="password" type="password" idx="1">'+rawStrToXML(t)+"</input></fields></formdata></forms>"}function getUserAndPassFromDummy(e){var t=e.substr(e.indexOf('<input name="username" type="text" idx="0">')+'<input name="username" type="text" idx="0">'.length);return{user:XMLToRawStr(t.substr(0,t.indexOf("</input>"))),pass:XMLToRawStr((t=e.substr(e.indexOf('<input name="password" type="password" idx="1">')+'<input name="password" type="password" idx="1">'.length)).substr(0,t.indexOf("</input>")))}}function pdDocumentToXML(e){var t='<?xml version="1.0" encoding="unicode"?><forms>';if(e)try{if(e.forms){for(var n=0;n<e.forms.length;n++){for(var a=null,r=0;r<e.forms[n].elements.length;r++)if("password"==e.forms[n].elements[r].type){a=e.forms[n];break}if(($JQ(a).is(":reallyVisible")||"contents"==$JQ(a).css("display"))&&a){for(var i,o,t=t+'<formdata name="'+a.name+'" idx="'+n+'"><fields>',s="",d=GetDocumentUrl(document),r=0;r<a.elements.length;r++)("textarea"==a.elements[r].type&&"username"==a.elements[r].id||IsValidInput(a.elements[r].type)&&$JQ(a.elements[r]).is(":visible")||d.includes("https://www.systeam.de")&&"user"==a.elements[r].id&&"user"==a.elements[r].name)&&(log(a.elements[r],"Visibility:"+$JQ(a.elements[r]).length),i=""!=a.elements[r].value?a.elements[r].value:"",o="textarea"==a.elements[r].type?"text":a.elements[r].type,s=s+'<input name="'+a.elements[r].name+'" type="'+o+'" idx="'+r+'">'+rawStrToXML(i)+"</input>");t=t+s+"</fields></formdata>"}}t+="</forms>"}}catch(e){log("pdWindowToXML "+e)}return t}function pdFormToXML(e){var t=GetDocumentUrl(document),n='<?xml version="1.0" encoding="unicode"?><forms>';if(e)try{var a=0,r=e.ownerDocument;if(r)for(var i=0;i<r.forms.length;i++)if(r.forms[i]==e){a=i;break}for(var o,s,n=n+'<formdata name="'+e.name+'" idx="'+a+'"><fields>',d="",l=0,m=0;m<e.elements.length;m++)("textarea"==e.elements[m].type&&"username"==e.elements[m].id||IsValidInput(e.elements[m].type)||t.includes("https://www.systeam.de")&&"user"==e.elements[m].id&&"user"==e.elements[m].name)&&$JQ(e.elements[m]).is(":visible")&&(o=""!=e.elements[m].value?e.elements[m].value:"",s="textarea"==e.elements[m].type?"text":e.elements[m].type,d=d+'<input name="'+e.elements[m].name+'" type="'+s+'" idx="'+l+'">'+rawStrToXML(o)+"</input>",l++);n=n+d+"</fields></formdata>",n+="</forms>"}catch(e){log("pdFormToXML "+e)}return n}function nextInDOM(e,t){for(var n=getNext(t);0!=n.length;){if("IFRAME"==n[0].tagName)return null;var a=searchFor(e,n);if(null!=a){var r=(r=a.html()+a.val()).toUpperCase().replace(/\s/g,"");if(20<a.outerHeight()&&40<a.outerWidth()&&-1==r.indexOf("FORGOT"))return a}n=getNext(n)}return null}function getNext(e){return 0<e.next().length?e.next():getNext(e.parent())}function searchFor(e,t){var n;return t.is(e)?t:(n=null,"IFRAME"==t[0].tagName?null:(t.children().each(function(){if(null!=(n=searchFor(e,$JQ(this))))return!1}),n))}function isSameUrl(e,t){e=e.split("?")[0],t=t.split("?")[0];return e.toLowerCase()==t.toLowerCase()}function isLoginUrl(e){var t=new URL(e).hostname,n=e.split("?")[0],a=n.substr(n.indexOf(t)+t.length),r=a.replace(/[^a-zA-Z ]/g,"");return-1==_exception_urls.indexOf(e)&&(-1!=_acceptable_urls.indexOf(e)||-1<e.toLowerCase().indexOf("login")||-1<e.toLowerCase().indexOf("signin")||-1<e.toLowerCase().indexOf("log-in")||-1<e.toLowerCase().indexOf("log_in")||-1<e.toLowerCase().indexOf("sign-in")||-1<e.toLowerCase().indexOf("signon")||-1<e.toLowerCase().indexOf("sign_in")||-1<e.toLowerCase().indexOf("session/new")||-1<e.toLowerCase().indexOf("welcome")||a.length<3||"passport.yandex.com"==t||-1<Object.keys(countryCodes).indexOf(r.toUpperCase())||-1<_special_urls.indexOf(n))}function isLoginForm(e){return 1==$JQ(e).find("input[type=password]").length&&-1==e.id.indexOf("register")&&-1==e.id.indexOf("new_user")}function generateJQFilterString(e,n="=",a=""){var r="",t=e.attrs,i=e.values;return t.forEach(t=>{i.forEach(e=>{r=(r=r+(a+"[")+(t+n+e)+"],")+(a+"["+(t+n+UppercaseFirstLetter(e)))+"],"})}),r=r.substr(0,r.length-1)}function UppercaseFirstLetter(e){return e.substr(0,1).toUpperCase()+e.substr(1)}function filterVisibleCss(){var e,t=!0,n=$JQ(arguments[1]),a=n.outerHeight();if(a<13&&0<=a)return!1;if(n.css("opacity")<.1)return!1;if(-1==n.css("z-index"))return!1;for(e of n.parents()){var r=$JQ(e);if("BODY"==e.tagName)break;if(r.outerHeight()<13&&0<=r.outerHeight()&&"hidden"==r.css("overflow")){t=!1;break}}return t}function filterUserFieldsFromElements(e){return e.filter(generateJQFilterString({attrs:["type"],values:["text","email","tel"]},"=","input")+",input:not([type])").filter(generateJQFilterString({attrs:["id","name"],values:["logon","pw_usr","postbankId","name","user","mail","account","login","identifier","i0116","Id","telefon","eee","domain","IDToken1","identification","__input0-inner"]},"*=")+",[placeholder*='me@mydomain.com'],[placeholder*=mail],[placeholder*='feedier.com'],[placeholder*='E-Mail-Adresse'],[placeholder*='Username'],[placeholder*='your-org-url'],[class*=email],[autocomplete='new-password'][class='bubble-element Input'],[data-id='text-login-email'],:not([id]):not([name])").filter(":not([placeholder*=Find]):not([placeholder*=Search]):not([placeholder*=find]):not([placeholder*=search])input:not([id*=captcha]):not([title*=Find]):not([title*=Search]):not([id*=ddns-account])input:not([id*=suggBankAccount])").filter(":visible").filter(":not([type='password'])").filter(":not([type='submit'])").filter(":not([readonly]):not([disabled])").filter(filterVisibleCss,this)}function filterPasswordFieldsFromElements(e){var t="[type='password'],[type='Password'],[id='password'][type='text'],[name='password'][type='text']";return GetDocumentUrl(document).includes("https://login.wrike.com/login")&&(t+=",[placeholder='Password']"),e.filter(t).filter(":not([id*=answer])").filter(":visible").filter(filterVisibleCss,this)}function generatePasswordPromptHtml(){let e="https://support.password-depot.de/hc/en-us/articles/360011706759";return"de"===chrome.i18n.getUILanguage()&&(e="https://support.password-depot.de/hc/de/articles/360011706759-Warum-ein-zus%25252525C3%25252525A4tzliches-Passwort-f%25252525C3%25252525BCr-das-Add-On-"),'<div id="prompt_password_container" style="font-size:14px !important;z-index:2000000099;position:fixed;width:'+window.innerWidth+"px;height:"+window.innerHeight+'px;left:0;top:0;background-color:#00000050;"><div style="position:fixed;width:400px;height:202px;left:'+(window.innerWidth-400)/2+'px;top:10px;background-color: #0e4e88;" tabindex="-1" ><img style="position: absolute; left:10px; top:8px; width:32px !important; height:32px !important;" src="'+chrome.runtime.getURL("icons/white.png")+'" width="32px" height="32px"><p style="position: absolute; left:50px;color:white !important;top:16px;margin:0 !important;">'+chrome.i18n.getMessage("pd_title")+'</p><div style="position: absolute;width:394px;height:150px;left:3px;top:49px;background-color: white;"><p style="position: absolute; left:10px;color:#0e4e88 !important;top:22px;margin:0 !important; width:80px !important;">'+chrome.i18n.getMessage("pd_enter_password")+'</p><input id="prompt_password_input" type="password" autofocus pdUsed="true" style="outline: none !important; margin:0 !important;color:black !important;border-radius:0 !important;background: white !important;box-sizing: border-box !important;position: absolute;border:1px solid #0e4e88 !important;width:285px !important;min-width:285px !important;max-width:285px !important;height:35px !important; min-height:35px !important;left:100px;top:14px;margin:0 !important;padding:0 0 0 7px !important" /><p style="position: absolute;left: 10px;top: 55px;color: #0e4e88 !important;margin:0 !important; padding:0 !important;font-size: 12px !important;padding: 0 !important;line-height: 16px !important;">'+chrome.i18n.getMessage("pd_enter_password_desc")+'</p><a href="'+e+'"target="_blank" style="left: 10px;top: 89px;position: absolute;margin:0 !important; padding:0 !important;font-size: 12px !important;text-decoration: underline !important;color: #0e4888 !important;">'+chrome.i18n.getMessage("pd_enter_password_more")+'</a><button id="prompt_password_btn_ok" style="margin:0 !important;border-radius:0 !important;cursor:pointer;position: absolute;padding: 0 !important; min-width:80px !important;width:80px !important;height:35px !important;bottom:10px;right:100px;border:1px solid #0e4e88 !important;background:#0e4e88 !important;color:white !important;box-shadow: lightgrey 1px 1px 2px !important;">'+chrome.i18n.getMessage("pd_ok")+'</button><button id="prompt_password_btn_cancel"style="margin:0 !important;border-radius:0 !important;cursor:pointer;position: absolute;padding: 0 !important; min-width:80px !important;width:80px !important;height:35px !important;bottom:10px;right:10px;border: 1px solid #cccccc !important;background: white !important;box-shadow: lightgrey 1px 1px 2px !important;color:#0e4e88 !important;">'+chrome.i18n.getMessage("pd_cancel")+"</button></div></div></div>"}function addjustTabIndex(e){e?$JQ('[tabindex="-1"').map(function(){$JQ(this).attr("pdtabindex","-1"),$JQ(this).removeAttr("tabindex")}):$JQ('[pdtabindex="-1"').map(function(){$JQ(this).attr("tabindex","-1"),$JQ(this).removeAttr("pdtabindex")})}function findSubmitOrNextButtonNext(e){return(GetDocumentUrl(document).includes("https://www.itscope.com/red/login")?nextInDOM("[class*=v-button-big]",e):nextInDOM("[type=submit],button,[role=button]",e))||nextInDOM("[id*=submit],[id*=next],[name*=submit],[name*=next],[value*=next],[value*=login],[id=Logon_PopupActions_Menu_DXI0_T]",e)}function getFavicon(){for(var e=null,t=document.getElementsByTagName("link"),n=0;n<t.length;n++)"icon"!=t[n].getAttribute("rel")&&"shortcut icon"!=t[n].getAttribute("rel")||(e=t[n].getAttribute("href"));return e||"https://s2.googleusercontent.com/s2/favicons?domain="+GetDocumentUrl(document)}function isBase64(e){if(""===e||""===e.trim())return!1;try{return btoa(atob(e))==e}catch(e){return!1}}function b64ToUint6(e){return 64<e&&e<91?e-65:96<e&&e<123?e-71:47<e&&e<58?e+4:43===e?62:47===e?63:0}function base64DecToArr(e,t){for(var n,a,r=e.replace(/[^A-Za-z0-9\+\/]/g,""),i=r.length,o=t?Math.ceil((3*i+1>>2)/t)*t:3*i+1>>2,s=new Uint8Array(o),d=0,l=0,m=0;m<i;m++)if(a=3&m,d|=b64ToUint6(r.charCodeAt(m))<<6*(3-a),3==a||i-m==1){for(n=0;n<3&&l<o;n++,l++)s[l]=d>>>(16>>>n&24)&255;d=0}return s}function uint6ToB64(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function base64EncArr(e){for(var t=2,n="",a=e.length,r=0,i=0;i<a;i++)0<i&&4*i/3%76==0&&(n+="\r\n"),r|=e[i]<<(16>>>(t=i%3)&24),2!==t&&e.length-i!=1||(n+=String.fromCharCode(uint6ToB64(r>>>18&63),uint6ToB64(r>>>12&63),uint6ToB64(r>>>6&63),uint6ToB64(63&r)),r=0);return n.substr(0,n.length-2+t)+(2===t?"":1===t?"=":"==")}function UTF8ArrToStr(e){for(var t,n="",a=e.length,r=0;r<a;r++)t=e[r],n+=String.fromCharCode(251<t&&t<254&&r+5<a?1073741824*(t-252)+(e[++r]-128<<24)+(e[++r]-128<<18)+(e[++r]-128<<12)+(e[++r]-128<<6)+e[++r]-128:247<t&&t<252&&r+4<a?(t-248<<24)+(e[++r]-128<<18)+(e[++r]-128<<12)+(e[++r]-128<<6)+e[++r]-128:239<t&&t<248&&r+3<a?(t-240<<18)+(e[++r]-128<<12)+(e[++r]-128<<6)+e[++r]-128:223<t&&t<240&&r+2<a?(t-224<<12)+(e[++r]-128<<6)+e[++r]-128:191<t&&t<224&&r+1<a?(t-192<<6)+e[++r]-128:t);return n}function strToUTF8Arr(e){for(var t,n=e.length,a=0,r=0;r<n;r++)a+=(t=e.charCodeAt(r))<128?1:t<2048?2:t<65536?3:t<2097152?4:t<67108864?5:6;for(var i=new Uint8Array(a),o=0,s=0;o<a;s++)(t=e.charCodeAt(s))<128?i[o++]=t:(t<2048?i[o++]=192+(t>>>6):(t<65536?i[o++]=224+(t>>>12):(t<2097152?i[o++]=240+(t>>>18):(t<67108864?i[o++]=248+(t>>>24):(i[o++]=252+(t>>>30),i[o++]=128+(t>>>24&63)),i[o++]=128+(t>>>18&63)),i[o++]=128+(t>>>12&63)),i[o++]=128+(t>>>6&63)),i[o++]=128+(63&t));return i}var submitRegExps=[/login/i];function IsSubmitButton(e,t){return e.matchRegexps(submitRegExps,t)}var DomObserver={observerConfig:{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]},_observerSet:!1,_round:0,_timerId:-1,_callback:null,Observer:new MutationObserver(e=>{e.some(e=>{("childList"==e.type&&e.addedNodes.length||"attributes"==e.type&&("DIV"==e.target.tagName||"INPUT"==e.target.tagName)&&"pdused"!=e.attributeName&&("class"==e.attributeName||"style"==e.attributeName&&-1==e.target.outerHTML.toUpperCase().indexOf("SLIDER")&&-1==e.target.outerHTML.toUpperCase().indexOf("PROGRESS")&&-1==e.target.outerHTML.toUpperCase().indexOf("TIMECODE")))&&DomObserver._callback(e)})}),setTarget:function(e,t){this._callback=t,this._observerSet&&(log("Changing observed target to "+attributes),this.disconnect()),this.Observer.observe(e,this.observerConfig),this._observerSet=!0},disconnect:function(){this.Observer.takeRecords(),this.Observer.disconnect(),log("Disconnecting observer"),this.clearTimeout()}},pageMgr={_tmpUsername:"",entry_count:0,isIgnored:-1,hasUsernameField:!1,encoding:"",dlgSize:{width:0,height:0},initialize:function(){log("pageMgr: initialize..."),this.listenForNewDomElements(),log("pageMgr: exiting..."),chrome.runtime.onMessage.addListener(function(e,t,n){"add_bookmark_from_popup"===e.message&&(e=GetDocumentUrl(document),chrome.runtime.sendMessage({action:"addonMgr.postWebForm",data:{url:e,title:document.title,xml:""}},e=>{}))})},listenForNewDomElements:function(){try{var t=_.debounce(e=>{this.actOnDomChange(e)},300);DomObserver.setTarget($JQ("body")[0],e=>{t(e)})}catch(e){console.log("EXCEPTION: could not add dom listener",e)}},actOnDomChange:function(e){if(!e||"hidden"!=e.type)try{var t;-1==pageMgr.isIgnored&&(t=GetDocumentUrl(document),chrome.runtime.sendMessage({action:"addonMgr.isIgnoredURL",data:{url:t}},e=>{e.data&&1==e.data.result?pageMgr.isIgnored=1:(chrome.runtime.lastError||e.data&&1!=e.data.result)&&(pageMgr.isIgnored=0,pageMgr.scanForms())})),-1!=pageMgr.isIgnored&&1!=pageMgr.isIgnored&&pageMgr.scanForms()}catch(e){log("EXCEPTION in DomInserted ",e)}},scanSingleEmailOrUsernameField:function(e=!0,t=!1){var n=[];return n=e?"https://mein.afilio.de/login/"==(e=GetDocumentUrl(document))?$JQ(document.getElementsByTagName("input")).filter("input[id*=input-4]"):e.includes("https://www.itscope.com/red/login")?$JQ(document.getElementsByTagName("input")).filter("input[id*=gwt-uid-4]"):"www.sparkasse-aurich-norden.de"==document.location.host?$JQ(document.getElementsByTagName("input")).filter("input[autocomplete=username]"):filterUserFieldsFromElements($JQ(document.getElementsByTagName("input"))):filterPasswordFieldsFromElements($JQ(document.getElementsByTagName("input"))),(n=t?n:n.filter("[pdUsed!='true']")).attr("pdUsed","true"),n},saveCredential:function(n="",a=!1){var r=GetDocumentUrl(document),i=GetDocumentUrl(document),o=new URL(i).hostname;chrome.runtime.sendMessage({action:"addonMgr.getTmpCredential",data:{surl:i,stitle:o}},e=>{var t;(this._tmpUsername||e.data)&&a?(t="base64"===pageMgr.encoding?getBtoa(buildDummyXMLForm(this._tmpUsername||e.data.usrname,n)):buildDummyXMLForm(this._tmpUsername||e.data.usrname,n),e.data.surl&&(r=e.data.surl),chrome.runtime.sendMessage({action:"addonMgr.postWebForm",data:{url:r,title:document.title,xml:t,x:window.screenX,y:window.screenY,w:window.innerWidth,h:window.innerHeight}},e=>{e.data.error&&"passwordRequired"==e.data.error&&this.requestPasswordAndRescan(null,!1,function(e){chrome.runtime.sendMessage({action:"addonMgr.postWebForm",data:{password:e,url:r,title:document.title,xml:t,x:window.screenX,y:window.screenY,w:window.innerWidth,h:window.innerHeight}},()=>{}),chrome.runtime.sendMessage({action:"addonMgr.removeCredential",data:{surl:i,stitle:o}},()=>{}),this._tmpUsername=""})})):""===n||a||(this._tmpUsername=n,chrome.runtime.sendMessage({action:"addonMgr.saveTmpCredential",data:{usrname:n,pass:"",surl:i,stitle:o}},()=>{}))})},scanSingleNextOrSubmit:function(e,t){for(var n=$JQ(e[0]),a=0;a<e.length;a++)n=$JQ(e[a]),$JQ(n).on("keydown",e=>{"Enter"==e.key&&this.saveCredential($JQ(n).val(),"password"==$JQ(n).attr("type"))}),!t&&pageMgr.hasUsernameField&&$JQ(n).on("focusout",e=>{this.saveCredential($JQ(e.target).val(),!1)});try{var r=findSubmitOrNextButtonNext($JQ(e[0]));null!=r&&(log("pageMgr.scanSingleNextOrSubmit: adding click hdler to ",r),$JQ(r).click(e=>{var t="password"==$JQ(n).attr("type");GetDocumentUrl(document).includes("https://login.wrike.com/login")&&(t="Password"==$JQ(n).attr("placeholder")),this.saveCredential($JQ(n).val(),t)}))}catch(e){}},showCopyTextInfoPanel:function(){var e,t;0<$JQ("#pd_copy_text_info_panel").length||((e=document.createElement("div")).id="pd_copy_text_info_panel",e.style="position: fixed !important;                  z-index: 2147483647 !important;                  display: flex !important;                  align-items: center !important;                  justify-content: center !important;                  opacity: 1 !important;                  visibility: visible !important;                  transform: none !important;                  clip: auto !important;                  clip-path: none !important;                  filter: none !important;                  mask: none !important;                  width: 400px !important;                  height: 70px !important;                  right: 10px !important;                  top:10px !important;                  background-color:#0e4e88bf !important;                  color: white !important;                  border-radius: 10px !important;                  font-size: 15px !important;                  font-weight: lighter !important;",e.innerHTML=chrome.i18n.getMessage("pd_copy_clipboard"),(t=1<(t=$JQ("body")).length?$JQ(t[0]):t).append(e),e.style.right="-100px",e.style.opacity="0",$JQ(e).animate({right:"10px",opacity:1},400),setTimeout(function(){$JQ(e).animate({right:"-100px",opacity:0},400).promise().done(function(){$JQ("#pd_copy_text_info_panel").remove()})},2e3))},getPath:function(e,t){let n;if(e){if(-1==(n=e.replace(/\\\\/g,"/")).indexOf("/")&&n===t)return"";e=n.lastIndexOf("/");n="/"+(n=-1!=e?n.slice(0,e):n)}return n},initResizeElement:function(e){var t,n,a,r,i=null,o=document.createElement("div"),o=(o.className="PD-popup-resizer-right",o.style="width: 5px;      height: 100%;      background: transparent;      position: absolute;      right: 0;      bottom: 0;      cursor: e-resize;      z-index: 2147483647 !important;",e.appendChild(o),o.addEventListener("mousedown",s,!1),o.parentPopup=e,document.createElement("div")),o=(o.className="PD-popup-resizer-bottom",o.style="width: 100%;      height: 5px;      background: transparent;      position: absolute;      right: 0;      bottom: 100px;      cursor: n-resize;      z-index: 2147483647 !important;",e.appendChild(o),o.addEventListener("mousedown",s,!1),o.parentPopup=e,document.createElement("div"));function s(e){i=this.parentPopup,t=e.clientX,n=e.clientY,a=parseInt(document.defaultView.getComputedStyle(i).width,10),r=parseInt(document.defaultView.getComputedStyle(i).height,10),document.documentElement.addEventListener("mousemove",d,!1),document.documentElement.addEventListener("mouseup",l,!1)}function d(e){pageMgr.dlgSize.width=a+e.clientX-t,pageMgr.dlgSize.height=r+e.clientY-n,i.style.width=a+e.clientX-t+"px",i.style.height=r+e.clientY-n+"px"}function l(){document.documentElement.removeEventListener("mousemove",d,!1),document.documentElement.removeEventListener("mouseup",l,!1)}o.className="PD-popup-resizer-both",o.style="width: 8px;      height: 8px;      background: transparent;      z-index: 10;      position: absolute;      right: 0;      bottom: 100px;      cursor: nw-resize;      z-index: 2147483648 !important;",e.appendChild(o),o.addEventListener("mousedown",s,!1),o.parentPopup=e},initPassDialogComponents:function(r,i,o){if(!(0<$JQ("#pd_input_popup_container").length)){var s=document.createElement("div");s.id="pd_input_popup_container";let e=$JQ(r).offset().left+$JQ(r).outerWidth()-300-13,t=!1;e<=10&&(e+=265,t=!0);var d=$JQ(r).offset().top+$JQ(r).outerHeight();let n=491;d+(n=i.data.matches<5?183+70*i.data.matches:n)-100>$JQ(document).height()&&(n=$JQ(document).height()-d+100),s.style="position: absolute !important;z-index: 2147483647 !important;display: block !important;opacity: 1 !important;                  visibility: visible !important;transform: none !important;clip: auto !important;clip-path: none !important;                  filter: none !important;mask: none !important;                  min-width: 330px !important; height: "+(0!=pageMgr.dlgSize.height?pageMgr.dlgSize.height:n)+"px !important;                  left:"+e+"px !important; top:"+d+"px !important;"+(0!=pageMgr.dlgSize.width?"width:"+pageMgr.dlgSize.width+"px":"");var l=document.createElement("iframe");l.src=chrome.runtime.getURL("/dialogs/input_popup/input_popup.html"),l.style="border: none !important;                    position: relative !important;                    top: 0px !important;                    right: 0px !important;                    bottom: 0px !important;                    left: 0px !important;                    height: 100% !important;                    width: 100% !important;                    visibility: visible !important;                    display: block !important;                    z-index: 2147483647 !important;                    opacity: 1 !important;                    transform: none !important;                    clip: auto !important;                    clip-path: none !important;                    filter: none !important;                    mask: none !important;",s.append(l);let a=[];if(0<i.data.matches)for(var m=0;m<i.data.matches;m++)a.push({uuid:i.data.entries[m],desc:i.data.descrs[m],user:i.data.users[m],path:pageMgr.getPath(i.data&&i.data.paths?i.data.paths[m]:"",i.data.descrs[m]),url:i.data.url});l.onload=function(){l.contentWindow.postMessage({call:"sendValueFromPD_input_popup_entries",value:{entries:a,password:$JQ(r).val(),ispass:"password"===r.type}},"*"),t&&l.contentWindow.postMessage({call:"setRightAlign",value:{}},"*")};var d=$JQ("body"),u=((d=1<d.length?$JQ(d[0]):d).append(s),pageMgr.initResizeElement(s),$JQ(document).mouseup(function(e){var t=$JQ("#pd_input_popup_container");t.is(e.target)||0!==t.has(e.target).length||u()}),function(){$JQ("#pd_input_popup_container").remove(),removeEventListener("message",p)}),p=function(e){var t,n,e=e[e.message?"message":"data"];"pd_select_entry_send_uuid_from_input_popup"==e.call?(o(e.value),u()):"pd_fill_password_from_input_popup"==e.call?($JQ(r).val(e.value),r.type,u()):"pd_create_password_from_input_popup"==e.call?(t="base64"===pageMgr.encoding?getBtoa(buildDummyXMLForm("","")):buildDummyXMLForm("",""),n=GetDocumentUrl(document),chrome.runtime.sendMessage({action:"addonMgr.postWebForm",data:{url:n,title:document.title,xml:t,x:window.screenX,y:window.screenY,w:window.innerWidth,h:window.innerHeight}},e=>{}),u()):"pd_copy_text_from_input_popup"==e.call&&(u(),pageMgr.showCopyTextInfoPanel())};window.addEventListener("message",p,!1)}},scanForms:function(e=0){log("pageMgr.scanForms: entering...");var s=[],i="";try{for(var n=GetDocumentUrl(document),t=0;t<document.forms.length;t++){var a=filterPasswordFieldsFromElements($JQ(document.forms[t]).find("input")).filter("[pdUsed!=true]"),r="input[type*=user],input[type=email],input[type=text],input[type=text],input[name*=email],input:not([type]),[placeholder*=mail],textarea[id=username],input[id='form-login-mail'][name='form[mail]']",o=(n.includes("https://www.systeam.de")&&(r="input[type=number][id='user'][name='user']"),$JQ(document.forms[t]).find(r).filter(":not([id*=captcha])").filter(":visible").filter(filterVisibleCss,this));a.length&&o.length&&"uiMainForm"!=document.forms[t].id&&(a.attr("pdUsed","true"),o.attr("pdUsed","true"),s.push(document.forms[t]))}return log("pageMgr.scanForms: formsLength"+s.length),s.length?chrome.runtime.sendMessage({action:"addonMgr.getTempBrowserPassword"},e=>{log("pageMgr.scanForms:browserPassword:"+(i=e.data));e={url:n,title:document.title};""!=i&&(e.password=i),chrome.runtime.sendMessage({action:"addonMgr.queryURL",data:e},e=>{var n,a,t,r;log("queryUrl response ",e),e.data.error?"passwordRequired"==e.data.error&&(r=this).requestPasswordAndRescan(s,!1,function(e){r.scanForms(e)}):(n=GetDocumentUrl(document),a=new URL(n).hostname,pageMgr.encoding="base64"===e.data.encoding?"base64":"",t="base64"===e.data.encoding?getBtoa(pdDocumentToXML(document)):pdDocumentToXML(document),r=this,e.data.clientVersion,pageMgr.entry_count=e.data.matches||0,e.data.matches&&this.addIconAndClickHdlrToAllInputFields(s),1==e.data.matches&&(e=e.data.entries[0],chrome.runtime.sendMessage({action:"addonMgr.loadWebForm",data:{uuid:e,password:i,url:n,title:document.title,xml:t,x:window.screenX,y:window.screenY,w:window.innerWidth,h:window.innerHeight}},e=>{var t,o;"passwordRequired"==e.data.error?(t=this).requestPasswordAndRescan(s,!1,function(e){t.scanForms(e)}):isSameUrl(e.data.url,n)&&isLoginUrl(n)&&e.data.xml&&(o=getXMLString(e.data.xml),chrome.runtime.sendMessage({action:"addonMgr.getTmpCredential",data:{surl:n,stitle:a}},e=>{for(var t=[],n=(new DOMParser).parseFromString(o,"text/xml").getElementsByTagName("formdata"),a=0;a<n.length;a++)for(var r=n[a].getElementsByTagName("input"),i=0;i<r.length;i++)t.push(r[i].textContent);e.data&&-1==t.indexOf(e.data.usrname)&&2<=r.length||s.forEach(e=>{isLoginForm(e)&&pageMgr.fillSelectedFormFromXML(o,e)})}))})))});for(var t=0;t<s.length;t++)$JQ(s[t]).attr("formSubmitHandled")||this.addSubmitEventHandlers(s[t])}):this.setValueToSingleEmailOrUsernameField(i),log("pageMgr.scanForms: found "+s.length),s}catch(e){return log("EXCEPTION: pageMgr.scanForms "+e),!1}},setValueToSingleEmailOrUsernameField:function(e=0){log("pageMrg.scanStandAloneEmailOrUsername: entering....");var m;try{chrome.runtime.sendMessage({action:"addonMgr.getTempBrowserPassword"},e=>{log("pageMgr.setValueToSingleEmailOrUsernameField:browserPassword:"+(m=e.data));var s=this.scanSingleEmailOrUsernameField(!0,!1),d=this.scanSingleEmailOrUsernameField(!1,!1),i=GetDocumentUrl(document),l=new URL(i).hostname;s.length&&(pageMgr.hasUsernameField=!0,chrome.runtime.sendMessage({action:"addonMgr.queryURL",data:{url:i,title:document.title,password:m}},e=>{if(log("queryUrl response ",e),e.data.error){var t;"passwordRequired"==e.data.error&&((t=[]).push(s,d),(a=this).requestPasswordAndRescan(t,!0,function(e){a.setValueToSingleEmailOrUsernameField(e)}))}else{pageMgr.encoding="base64"===e.data.encoding?"base64":"";var n="base64"===e.data.encoding?getBtoa(buildDummyXMLForm()):buildDummyXMLForm(),a=this;e.data.clientVersion;if(pageMgr.entry_count=e.data.matches||0,e.data.matches){for(var r=0;r<s.length;r++)this.addIconToField(s[r]),this.addIconEventHandlerForStandAlone(s[r]);for(r=0;r<d.length;r++)this.addIconToField(d[r]),this.addIconEventHandlerForStandAlone(d[r])}if(1==e.data.matches){let t=e.data.entries[0];chrome.runtime.sendMessage({action:"addonMgr.setSingleForm"},e=>{chrome.runtime.sendMessage({action:"addonMgr.loadWebForm",data:{uuid:t,url:i,password:m,title:document.title,xml:n,x:window.screenX,y:window.screenY,w:window.innerWidth,h:window.innerHeight}},e=>{var t,n,a;"passwordRequired"==e.data.error?((t=[]).push(s,d),(n=this).requestPasswordAndRescan(t,!0,function(e){n.setValueToSingleEmailOrUsernameField(e)})):e.data.xml&&isSameUrl(e.data.url,i)&&isLoginUrl(i)&&(a=getUserAndPassFromDummy(getXMLString(e.data.xml)),chrome.runtime.sendMessage({action:"addonMgr.saveCredential",data:{usrname:a.user,pass:a.pass,surl:i,stitle:l}},e=>{for(var t=0;t<s.length;t++)this.fillTextField(s[t],a.user),d.length&&(chrome.runtime.sendMessage({action:"addonMgr.getCredential",data:{surl:i,stitle:l}},e=>{if(e.data){for(var t=0;t<d.length;t++)this.fillTextField(d[t],e.data.pass);chrome.runtime.sendMessage({action:"addonMgr.removeSingleForm"},e=>{})}}),this.scanSingleNextOrSubmit(d,!0))}))})})}}}),this.scanSingleNextOrSubmit(s,!1)),d.length&&this.scanSingleNextOrSubmit(d,!0),d.length&&!s.length&&chrome.runtime.sendMessage({action:"addonMgr.getClientVersion"},e=>{var o=e.data;chrome.runtime.sendMessage({action:"addonMgr.getSingleForm",data:{surl:i,stitle:l}},e=>{chrome.runtime.sendMessage({action:"addonMgr.queryURL",data:{url:i,title:document.title,password:m}},e=>{if(!e.data.error){if(pageMgr.entry_count=e.data.matches||0,e.data.matches){for(var t=0;t<s.length;t++)this.addIconToField(s[t]),this.addIconEventHandlerForStandAlone(s[t]);for(t=0;t<d.length;t++)this.addIconToField(d[t]),this.addIconEventHandlerForStandAlone(d[t])}var n,a,r,i;e.data&&"V10"!=o?(r=GetDocumentUrl(document),pageMgr.encoding="base64"===e.data.encoding?"base64":"",n="base64"===e.data.encoding?getBtoa(buildDummyXMLForm()):buildDummyXMLForm(),a=e.data.entries?e.data.entries[0]:"",chrome.runtime.sendMessage({action:"addonMgr.loadWebForm",data:{uuid:a,passsword:m,url:r,title:document.title,xml:n,x:window.screenX,y:window.screenY,w:window.innerWidth,h:window.innerHeight}},e=>{if(isSameUrl(e.data.url,r)&&isLoginUrl(r)&&e.data.xml){for(var t=getUserAndPassFromDummy(getXMLString(e.data.xml)),n=0;n<d.length;n++)this.fillTextField(d[n],t.pass);chrome.runtime.sendMessage({action:"addonMgr.removeSingleForm"},e=>{})}})):e.data&&"V10"==o&&(r=GetDocumentUrl(document),i=new URL(r).hostname,chrome.runtime.sendMessage({action:"addonMgr.getCredential",data:{surl:r,stitle:i}},e=>{if(e.data){for(var t=0;t<d.length;t++)this.fillTextField(d[t],e.data.pass);chrome.runtime.sendMessage({action:"addonMgr.removeCredential",data:{stitle:i,surl:r}},e=>{}),chrome.runtime.sendMessage({action:"addonMgr.removeSingleForm"},e=>{})}}))}})})})})}catch(e){return log("EXCEPTION: pageMgr.setValueToSingleEmailOrUsernameField "+e),!1}},requestPasswordAndRescan:function(i,o=!1,s){var e,t;null==document.getElementById("prompt_password_container")&&(e=generatePasswordPromptHtml(),t=$JQ("body"),1<$JQ("body").length&&(t=$JQ($JQ("body")[0])),addjustTabIndex(!0),t.append(e),document.getElementById("prompt_password_input").focus(),$JQ("#prompt_password_input").on("keydown",e=>{if("Enter"==e.key){if(o)for(t=0;t<i.length;t++)$JQ(i[t]).attr("pdUsed","false");else for(var t=0;t<i.length;t++)for(var n=$JQ(i[t]).find("*"),a=0;a<n.length;a++)$JQ(n[a]).attr("pdUsed","false");var r=$JQ("#prompt_password_input").val();$JQ("#prompt_password_container").remove(),addjustTabIndex(!1),chrome.runtime.sendMessage({action:"addonMgr.saveTempBrowserPassword",data:r},e=>{s(r)})}"Escape"==e.key&&($JQ("#prompt_password_container").remove(),addjustTabIndex(!1))}),$JQ("#prompt_password_btn_ok").on("click",function(){if(o)for(e=0;e<i.length;e++)$JQ(i[e]).attr("pdUsed","false");else for(var e=0;e<i.length;e++)for(var t=$JQ(i[e]).find("*"),n=0;n<t.length;n++)$JQ(t[n]).attr("pdUsed","false");var a=$JQ("#prompt_password_input").val();$JQ("#prompt_password_container").remove(),addjustTabIndex(!1),chrome.runtime.sendMessage({action:"addonMgr.saveTempBrowserPassword",data:a},e=>{s(a)})}),$JQ("#prompt_password_btn_cancel").on("click",function(){$JQ("#prompt_password_container").remove(),addjustTabIndex(!1)}))},addSubmitEventHandlers:function(t){log("pageMgr.addSubmitEventHandlers: ",t);for(var e=GetDocumentUrl(document),n=($JQ(t).attr("formSubmitHandled",!0),$JQ(t).find("input[type*=user],input[type='email'],input[type='text'],input[type='password'],input[type='submit'],input[name*=email],textarea[id=username],a,button,div,input,span")),a=0;a<n.length;a++){var r=$JQ(n[a]);-1!=["text","email","password","username"].indexOf(r.attr("type"))||"form-login-mail"==r.attr("id")&&"form[mail]"==r.attr("name")||e.includes("https://www.systeam.de")&&"user"==r.attr("id")&&"user"==r.attr("name")?$JQ(r).on("keydown",e=>{"Enter"==e.key&&this.pdOnSubmit(t)}):(-1!=["submit"].indexOf(r.attr("type"))||"BUTTON"==r.prop("tagName").indexOf||e.includes("https://www.systeam.de")&&"BUTTON"==r.prop("tagName")&&"login"==r.attr("id")||this.checkIfSubmitButton(r))&&(log("pageMgr.addSubmitEventHandlers: adding click hdler to ",r),$JQ(r).mousedown(e=>{this.pdOnSubmit(t)}))}},checkIfSubmitButton:function(e){var e=$JQ(e),t=e.prop("tagName");if(-1!=["A","DIV","INPUT","SPAN"].indexOf(t.toUpperCase())&&0==e.children().length){var t=(t=e.html()+e.val()+e.attr("name")).toUpperCase().replace(/\s/g,"").replace(/&NBSP;/g,""),n=GetDocumentUrl(document),n=new URL(n).hostname;if("app.pipedrive.com"==n||"user.17track.net"==n)return!1;if(-1!=t.indexOf("LOGIN")||-1!=t.indexOf("SIGNIN")||-1!=t.indexOf("ANMELDEN")||e.is("[name*=submit],[id*=submit]"))return!0}return!1},fireEvent:function(e,t,n){e.dispatchEvent(new t(n,{bubbles:!0,cancelable:!1}))},fireKeyboardEvent:function(e,t){this.fireEvent(e,KeyboardEvent,t)},emulateEvent:function(e,t){try{e.dispatchEvent(new Event(t))}catch(e){console.error("emulateEvent "+e)}},fillTextField:function(r,i){return new Promise((e,t)=>{var n,a;r&&void 0!==i&&r.value!=i?(n=window.scrollX,a=window.scrollY,r.focus(),window.scrollTo(n,a),window.setTimeout(()=>{r.value=i||"",log("pageMGR.fillTextField: firing events 100ms"),this.fireKeyboardEvent(r,"input"),this.fireKeyboardEvent(r,"keydown"),this.fireKeyboardEvent(r,"keypress"),this.fireKeyboardEvent(r,"keyup"),e(!0)},100)):e(!1)})},addIconAndClickHdlrToAllInputFields:function(e){var t="input[type='text'],input[type='password'],input[type='email'],input[type='Text'],input[type='Password'],input[type='Email'],input[type='username'],input[name*=email],input:not([type]),textarea[id=username],input[id='form-login-mail'][name='form[mail]']",n=(GetDocumentUrl(document).includes("https://www.systeam.de")&&(t+=",input[type=number][id='user'][name='user']"),e);null==e&&(n=document.forms);for(var a=0;a<n.length;a++)$JQ(n[a]).find(t).filter("[iconAdded!='true'],:not([iconAdded])").filter(":not([name*=captcha])").each((e,t)=>{this.addIconToField(t),this.addIconEventHandler(t)})},addIconToField:function(n){let a=5<pageMgr.entry_count?"more":pageMgr.entry_count,r=this.checkInputOverlapping(n);$JQ(n).width()<100||(n.style.setProperty("background-image","url('"+chrome.runtime.getURL("icons/ico/ico"+a+"_gray.png")+"')","important"),n.style.setProperty("background-position",r?"right 35px center":"right 5px center","important"),n.style.setProperty("background-repeat","no-repeat","important"),n.style.setProperty("background-size","16px 16px","important"),n.style.setProperty("padding-right",r?"55px":"25px","important"),n.style.setProperty("-webkit-box-sizing","border-box","important"),n.style.setProperty("-moz-box-sizing","border-box","important"),n.style.setProperty("box-sizing","border-box","important"),n.setAttribute("iconAdded","true"),-1==window.location.hostname.indexOf("fandom.com")&&-1==window.location.hostname.indexOf("agencyanalytics.com")&&-1==window.location.hostname.indexOf("app.clickup.com")||n.style.setProperty("box-shadow","none","important"),$JQ(n).on("mousemove",function(e){n.style.setProperty("background-image","url('"+chrome.runtime.getURL("icons/ico/ico"+a+"_color.png")+"')","important");var t=r?54:24;e.offsetX>$JQ(n).outerWidth()-t?n.style.cursor="pointer":n.style.cursor="auto"}),$JQ(n).on("mouseleave",function(e){n.style.setProperty("background-image","url('"+chrome.runtime.getURL("icons/ico/ico"+a+"_gray.png")+"')","important")}))},checkInputOverlapping:function(e){if((-1!=window.location.hostname.indexOf("campz.de")||-1!=window.location.hostname.indexOf("check24.de")||-1!=window.location.hostname.indexOf("alaclickneu.gourmet.at"))&&"password"===e.type||-1!=window.location.hostname.indexOf("ucld.us"))return!0;var t,n=($JQ(e).parent().parent()?$JQ(e).parent():$JQ(e)).parent().find("div,span,i,img,button,label"),a=e.getBoundingClientRect();let r=!1;for(let e=0;e<n.length;e++){var i=n[e].getBoundingClientRect();if(t=a,(i=i).left<t.right&&i.left>t.right-50&&i.right<=t.right&&i.top>=t.top&&i.bottom<=t.bottom){r=!0;break}}return r},addIconEventHandler:function(r){var i=this;$JQ(r).on("mousemove",function(){$JQ(r).attr("autocomplete","off")}),$JQ(r).click(e=>{var n,t=e.target.getBoundingClientRect(),a=this.checkInputOverlapping(r);(a&&e.offsetX>t.width-54&&e.offsetX<t.width-28||!a&&e.offsetX>t.width-24)&&(log("pageMgr.addIconEventHandler: elt clicked",e.target),n=GetDocumentUrl(document),chrome.runtime.sendMessage({action:"addonMgr.queryURL",data:{url:n,title:document.title}},e=>{var t;log("queryUrl response ",e),e.data.error||(pageMgr.encoding="base64"===e.data.encoding?"base64":"",t="base64"===e.data.encoding?getBtoa(pdDocumentToXML(document)):pdDocumentToXML(document),pageMgr.initPassDialogComponents(r,e,function(e){chrome.runtime.sendMessage({action:"addonMgr.loadWebForm",data:{uuid:e,url:n,title:document.title,xml:t,x:window.screenX,y:window.screenY,w:window.innerWidth,h:window.innerHeight}},e=>{var t;if(e.data.xml)return GetDocumentUrl(document),log("assisted filling",e.data.xml),t=$JQ(r).closest("form"),i.fillSelectedFormFromXML(getXMLString(e.data.xml),t)})}))}))})},addIconEventHandlerForStandAlone:function(r){var i=this;$JQ(r).on("mousemove",function(){"username"!=$JQ(r).attr("autocomplete")&&$JQ(r).attr("autocomplete","off")}),$JQ(r).click(e=>{var t=e.target.getBoundingClientRect(),n=this.checkInputOverlapping(r);(n&&e.offsetX>t.width-54&&e.offsetX<t.width-28||!n&&e.offsetX>t.width-24)&&(log("pageMgr.addIconEventHandler: elt clicked",e.target),chrome.runtime.sendMessage({action:"addonMgr.setSingleForm"},e=>{var n=GetDocumentUrl(document),a=new URL(n).hostname;chrome.runtime.sendMessage({action:"addonMgr.queryURL",data:{url:n,title:document.title}},e=>{log("queryUrl response ",e),pageMgr.encoding="base64"===e.data.encoding?"base64":"";var t="base64"===e.data.encoding?getBtoa(buildDummyXMLForm()):buildDummyXMLForm();e.data.error||pageMgr.initPassDialogComponents(r,e,function(e){chrome.runtime.sendMessage({action:"addonMgr.loadWebForm",data:{uuid:e,url:n,title:document.title,xml:t,x:window.screenX,y:window.screenY,w:window.innerWidth,h:window.innerHeight}},e=>{var r;!e.data.error&&e.data.xml?(r=getUserAndPassFromDummy(getXMLString(e.data.xml)),chrome.runtime.sendMessage({action:"addonMgr.saveCredential",data:{usrname:r.user,pass:r.pass,surl:n,stitle:a}},e=>{var t=i.scanSingleEmailOrUsernameField(!0,!0),n=i.scanSingleEmailOrUsernameField(!1,!0);if(t.length)for(var a=0;a<t.length;a++)i.fillTextField(t[a],r.user);if(n.length){for(a=0;a<n.length;a++)i.fillTextField(n[a],r.pass);chrome.runtime.sendMessage({action:"addonMgr.removeSingleForm"},e=>{})}})):e.data.error})})})}))})},fillSelectedFormFromXML:async function(e,t){try{for(var n=GetDocumentUrl(document),a=e,r=[],i=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("formdata"),o=0;o<i.length;o++){var s=i[o],d=document.forms[s.getAttribute("idx")];if($JQ(t).is($JQ(d))){d?r=d.elements:$JQ("input[type='password'],input[type='text'],input[type='email'],textarea[id=username]").each((e,t)=>{r.push(t)});for(var l=i[o].getElementsByTagName("input"),m=0;m<r.length;m++){var u=r[m];if("textarea"==u.type&&"username"==u.id)for(var p=0;p<l.length;p++)l[p].getAttribute("name")==u.name&&l[p].getAttribute("idx")==m.toString()&&await this.fillTextField(u,XMLToRawStr(l[p].textContent));else if(IsValidInput(u.type)&&-1==u.name.indexOf("captcha")||n.includes("https://www.systeam.de"))for(p=0;p<l.length;p++)l[p].getAttribute("type")!=u.type||u.name&&l[p].getAttribute("name")!=u.name||l[p].getAttribute("idx")!=m.toString()||await this.fillTextField(u,XMLToRawStr(l[p].textContent))}}}}catch(e){log("fillSelectedFormFromXML "+e)}},pdOnSubmit:function(a){log("pageMgr.pdOnSubmit: entering");try{if(a){ContainsText(a.action,"javascript:");for(var e=!1,t=0;t<a.elements.length;t++)if("password"==a.elements[t].type&&a.elements[t].value){e=!0;break}if(!e)return!0;var n=a.ownerDocument;if(!isValidDocument(n))return!0;var r,i=GetDocumentUrl(n),o=new URL(i).hostname,s="input[type=text],input[type=TEXT],input[type=email],input[type=tel],input[name*=email],input[type=username],input:not([type]),input[name=login],textarea[id=username],input[id='form-login-mail'][name='form[mail]']";i.includes("https://www.systeam.de")&&(s="input[type=number][id='user'][name='user']"),$JQ(a).find(s).filter(":visible").filter(filterVisibleCss,this).length?(r="base64"===pageMgr.encoding?getBtoa(pdFormToXML(a)):pdFormToXML(a),chrome.runtime.sendMessage({action:"addonMgr.postWebForm",data:{url:i,title:document.title,xml:r,x:window.screenX,y:window.screenY,w:window.innerWidth,h:window.innerHeight}},e=>{e.data.error&&"passwordRequired"==e.data.error&&this.requestPasswordAndRescan(null,!1,function(e){chrome.runtime.sendMessage({action:"addonMgr.postWebForm",data:{password:e,url:i,title:document.title,xml:r,x:window.screenX,y:window.screenY,w:window.innerWidth,h:window.innerHeight}},e=>{})})})):chrome.runtime.sendMessage({action:"addonMgr.getTmpCredential",data:{surl:i,stitle:o}},e=>{var t,n;e.data&&(t=$JQ(a).find("input[type=password],input[type=Password]"),n="base64"===pageMgr.encoding?getBtoa(buildDummyXMLForm(e.data.usrname,t[0].value)):buildDummyXMLForm(e.data.usrname,t[0].value),chrome.runtime.sendMessage({action:"addonMgr.postWebForm",data:{url:i,title:document.title,xml:n,x:window.screenX,y:window.screenY,w:window.innerWidth,h:window.innerHeight}},e=>{e.data.error&&"passwordRequired"==e.data.error&&this.requestPasswordAndRescan(null,!1,function(e){chrome.runtime.sendMessage({action:"addonMgr.postWebForm",data:{password:e,url:i,title:document.title,xml:n,x:window.screenX,y:window.screenY,w:window.innerWidth,h:window.innerHeight}},e=>{}),chrome.runtime.sendMessage({action:"addonMgr.removeCredential",data:{surl:i,stitle:o}},e=>{})})}))})}return!0}catch(e){return log("onSubmit "+e),null}return this._forms}},_special_urls=["https://www1.bmo.com/onlinebanking/cgi-bin/netbnx/NBmain","https://meine.deutsche-bank.de/trxm/db/init.do","https://meine.deutsche-bank.de/trxm/db/","https://www.acebit.com/forum/","https://posteo.de/de","https://www.sparkasse-bamberg.de/de/home.html","https://app.10000ft.com/si","https://app.yesware.com/token_auth/request_email","https://accounts.outreach.io/users/next","https://www.trustpilot.com/users/connect","https://www.g2.com/#state.email.showform","https://www.loseit.com/account/","https://subscription.newsweek.com/auth","https://launchpad.37signals.com/signin","https://myr.renault.de/anmeldung-registrierung.html","https://ttvwh.click-tt.de/cgi-bin/WebObjects/nuLigaTTDE.woa/wa/home","https://meine.zeit.de/anmelden","https://admin.df.eu/kunde/index.php5","https://banking.netbank.de/banking/session","https://www.frankfurter-volksbank.de/banking-private/entry","https://onlinebanking.bank11.de/ptlweb/WebPortal","https://www.vtb-direktbank.de/banking-private/entry","https://www.freenet.tv/meinkonto","https://www.valgardena.it/typo3/","https://baby-garage.de/backend/","https://www.sparkasse-aurich-norden.de/de/home.html"],_exception_urls=["https://app.ghostinspector.com/","https://login.yahoo.com/account/personalinfo/edit"],_acceptable_urls=["https://www.ovh.com/auth/"],countryCodes={EN:"",ENGLOBAL:"",US:"United States",IN:"India",AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas, The",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei",BG:"Bulgaria",BF:"Burkina Faso",MM:"Burma",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo (brazzaville) ",CD:"Congo (kinshasa)",CK:"Cook Islands",CR:"Costa Rica",CI:"CÔte D’ivoire",HR:"Croatia",CU:"Cuba",CW:"CuraÇao",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (islas Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern And Antarctic Lands",GA:"Gabon",GM:"Gambia, The",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island And Mcdonald Islands",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",ID:"Indonesia",IR:"Iran",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Korea, North",KR:"Korea, South",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Laos",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macau",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn Islands",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russia",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena, Ascension, And Tristan Da Cunha",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And The Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And South Sandwich Islands",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syria",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VA:"Vatican City",VE:"Venezuela",VN:"Vietnam",VG:"Virgin Islands, British",VI:"Virgin Islands, United States ",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},Options={set(n){return this.get().then(e=>{for(var t in n)e[t]=n[t];chrome.storage.local.set(e,function(){return!0})})},get(){return new Promise(function(t,e){chrome.storage.local.get({debugUseDevUrl:!1,socketPortNumber:"25109",isAutoFill:!1,ignoredUrls:[]},function(e){t(e)})})}},contentScriptMgr=($JQ.expr[":"].reallyVisible=function(e){return!(jQuery(e).is(":hidden")||jQuery(e).parents(":hidden").length||"hidden"==jQuery(e).parent().css("visibility"))},{_autoFillTimerID:0,_forms:[],_actionsMessage:["loadWebForm"],_onBackgroundMessage:function(e,t,n){return!(!e.name||!e.action||-1===this._actionsMessage.indexOf(e.action)||(this["_onMessage_"+e.action](e,t,n),0))},initialize:function(){log("pdContentScript: starting script..."+document.URL),chrome.runtime.onMessage.addListener(this._onBackgroundMessage.bind(this)),isiFrame()?(pageMgr.initialize(),this._forms=pageMgr.scanForms()):(log("Getting version..."),this.getClientVersion().then(e=>{log("Version:"+e),e?"V11"==e||"V10"==e?(pageMgr.initialize(),this._forms=pageMgr.scanForms()):this.initializeAfterCheckState():setTimeout(()=>{this.initializeAfterCheckState()},500)}))},initializeAfterCheckState:function(){chrome.runtime.sendMessage({action:"addonMgr.checkState",data:null},e=>{e&&e.data.clientAlive&&("ready"==e.data.state||"running"==e.data.state)&&(pageMgr.initialize(),this._forms=pageMgr.scanForms())})},getClientVersion:function(){return new Promise((t,e)=>{chrome.runtime.sendMessage({action:"proxyMgr.getClientVersion",data:null},e=>{t(e.data.version)})})},_onMessage_loadWebForm:function(e){},stopAutoFill:function(){this._autoFillTimerID&&(clearTimeout(this._autoFillTimerID),this._autoFillTimerID=0)}}),DEBUG_MODE=($JQ(document).ready(function(){Options.get().then(e=>{e.ignoredUrls.find(e=>{e=e.includes("https://")?e.split("https://")[1]:e,e=(e.includes("http://")?e.split("http://")[1]:e).split("/").join("");return-1!=document.URL.split("/").join("").indexOf(e)})||contentScriptMgr.initialize()})}),0);