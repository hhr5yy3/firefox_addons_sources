/*! For license information please see background.js.LICENSE.txt */
(()=>{var e={398:(e,t,n)=>{"use strict";e.exports=globalThis.browser??n(570)},570:function(e,t){var n,i;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const t="The message port closed before a response was received.",n=e=>{const n={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(n).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class i extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const a=(t,n)=>(...i)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):n.singleCallbackArg||i.length<=1&&!1!==n.singleCallbackArg?t.resolve(i[0]):t.resolve(i)},r=e=>1==e?"argument":"arguments",o=(e,t,n)=>new Proxy(t,{apply:(t,i,a)=>n.call(i,e,...a)});let s=Function.call.bind(Object.prototype.hasOwnProperty);const c=(e,t={},n={})=>{let i=Object.create(null),l={has:(t,n)=>n in e||n in i,get(l,u,d){if(u in i)return i[u];if(!(u in e))return;let p=e[u];if("function"==typeof p)if("function"==typeof t[u])p=o(e,e[u],t[u]);else if(s(n,u)){let t=((e,t)=>function(n,...i){if(i.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${r(t.minArgs)} for ${e}(), got ${i.length}`);if(i.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${r(t.maxArgs)} for ${e}(), got ${i.length}`);return new Promise(((r,o)=>{if(t.fallbackToNoCallback)try{n[e](...i,a({resolve:r,reject:o},t))}catch(a){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),n[e](...i),t.fallbackToNoCallback=!1,t.noCallback=!0,r()}else t.noCallback?(n[e](...i),r()):n[e](...i,a({resolve:r,reject:o},t))}))})(u,n[u]);p=o(e,e[u],t)}else p=p.bind(e);else if("object"==typeof p&&null!==p&&(s(t,u)||s(n,u)))p=c(p,t[u],n[u]);else{if(!s(n,"*"))return Object.defineProperty(i,u,{configurable:!0,enumerable:!0,get:()=>e[u],set(t){e[u]=t}}),p;p=c(p,t[u],n["*"])}return i[u]=p,p},set:(t,n,a,r)=>(n in i?i[n]=a:e[n]=a,!0),defineProperty:(e,t,n)=>Reflect.defineProperty(i,t,n),deleteProperty:(e,t)=>Reflect.deleteProperty(i,t)},u=Object.create(e);return new Proxy(u,l)},l=e=>({addListener(t,n,...i){t.addListener(e.get(n),...i)},hasListener:(t,n)=>t.hasListener(e.get(n)),removeListener(t,n){t.removeListener(e.get(n))}}),u=new i((e=>"function"!=typeof e?e:function(t){const n=c(t,{},{getContent:{minArgs:0,maxArgs:0}});e(n)})),d=new i((e=>"function"!=typeof e?e:function(t,n,i){let a,r,o=!1,s=new Promise((e=>{a=function(t){o=!0,e(t)}}));try{r=e(t,n,a)}catch(e){r=Promise.reject(e)}const c=!0!==r&&((l=r)&&"object"==typeof l&&"function"==typeof l.then);var l;if(!0!==r&&!c&&!o)return!1;return(c?r:s).then((e=>{i(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",i({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0})),p=({reject:n,resolve:i},a)=>{e.runtime.lastError?e.runtime.lastError.message===t?i():n(new Error(e.runtime.lastError.message)):a&&a.__mozWebExtensionPolyfillReject__?n(new Error(a.message)):i(a)},f=(e,t,n,...i)=>{if(i.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${r(t.minArgs)} for ${e}(), got ${i.length}`);if(i.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${r(t.maxArgs)} for ${e}(), got ${i.length}`);return new Promise(((e,t)=>{const a=p.bind(null,{resolve:e,reject:t});i.push(a),n.sendMessage(...i)}))},g={devtools:{network:{onRequestFinished:l(u)}},runtime:{onMessage:l(d),onMessageExternal:l(d),sendMessage:f.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:f.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},h={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return n.privacy={network:{"*":h},services:{"*":h},websites:{"*":h}},c(e,g,n)};e.exports=n(chrome)}else e.exports=globalThis.browser},void 0===(i=n.apply(t,[e]))||(e.exports=i)},8545:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldEnforceSignIn=t.resetPreSignInEnforcementUrl=t.getPreSignInEnforcementUrl=t.enforceSignInOnTokenIdentify=t.enforceSignInOnStartup=t.openSignInPage=void 0;var i=n(8993);Object.defineProperty(t,"openSignInPage",{enumerable:!0,get:function(){return i.openSignInPage}});var a=n(8823);Object.defineProperty(t,"enforceSignInOnStartup",{enumerable:!0,get:function(){return a.enforceSignInOnStartup}}),Object.defineProperty(t,"enforceSignInOnTokenIdentify",{enumerable:!0,get:function(){return a.enforceSignInOnTokenIdentify}}),Object.defineProperty(t,"getPreSignInEnforcementUrl",{enumerable:!0,get:function(){return a.getPreSignInEnforcementUrl}}),Object.defineProperty(t,"resetPreSignInEnforcementUrl",{enumerable:!0,get:function(){return a.resetPreSignInEnforcementUrl}}),Object.defineProperty(t,"shouldEnforceSignIn",{enumerable:!0,get:function(){return a.shouldEnforceSignIn}})},8993:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.openSignInPage=void 0;const a=i(n(165)),r=i(n(398)),o=n(1326),s=n(4904);let c=0;const l=a.default(1);t.openSignInPage=e=>l((()=>async function(e){try{const{tabId:t,limitConsecutiveOpens:n}=e;o.logger.info("openSignInPage: called");const i=Date.now();if(n&&i-c<1e4)return void o.logger.info("openSignInPage: already opened recently");const a=await s.getSignInUrl();t?(o.logger.info("openSignInPage: redirecting tab to signin page.",{tabId:t}),await r.default.tabs.update(t,{url:a})):(o.logger.info("openSignInPage: opening signin page in a new tab."),await(async e=>{if(await(async()=>(await r.default.windows.getAll({populate:!1})).length>0)())await r.default.tabs.create({url:e});else{const t=()=>{o.logger.debug("openSignInPage: window created, opening signin page."),r.default.windows.onCreated.removeListener(t),r.default.tabs.create({url:e}).catch((e=>{o.logger.error("openSignInPage: failed to open signin page in new tab",e)}))};r.default.windows.onCreated.addListener(t)}})(a)),c=i,o.logger.info("openSignInPage: finished signin page opening successfully.")}catch(e){o.logger.error("openSignInPage: failed",e)}}(e)))},8823:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.enforceSignInOnWebNavigation=t.shouldEnforceSignIn=t.resetPreSignInEnforcementUrl=t.getPreSignInEnforcementUrl=t.enforceSignInOnTokenIdentify=t.enforceSignInOnStartup=void 0;const a=i(n(398)),r=n(1276),o=n(8657),s=n(1326),c=n(8993),l=n(9249),u=n(345),d=n(1025),p=n(1311),f=n(315),g=["signInEnforcementMode","forceSignInDomainsWhitelist"];t.enforceSignInOnStartup=async function(){try{if(!await o.isSignedOut())return;const{signInEnforcementMode:e}=await a.default.storage.local.get(g);e===r.SignInEnforcementMode.AutoOpenSignInPage&&(s.logger.info("signin enforcement: auto open sign in page on startup."),await c.openSignInPage({limitConsecutiveOpens:!0}))}catch(e){s.logger.error("signin enforcement: startup signin enforcement failed.",e)}},t.enforceSignInOnTokenIdentify=async function(e){try{const{signInEnforcementMode:t}=await a.default.storage.local.get(g);t!==r.SignInEnforcementMode.AutoOpenSignInPage&&e===r.SignInEnforcementMode.AutoOpenSignInPage&&(s.logger.info("signin enforcement: force open sign in page on token identify."),await c.openSignInPage({limitConsecutiveOpens:!0}))}catch(e){s.logger.error("signin enforcement: token identify signin enforcement failed.",e)}},a.default.webNavigation&&a.default.webNavigation.onBeforeNavigate.addListener((e=>{(function(e){return!p.isNotMainFrame(e.frameId)&&!!p.isURLOneOfProtocols(e.url,["http:","https:","ftp:","ftps:","file:","blob:http:","blob:https:","blob:file:"])})(e)&&v(e.tabId,e.url)}));let h="";async function m(e){if(!await o.isSignedOut())return!1;if(e.startsWith(d.extensionBaseUrl)||e.startsWith("chrome://")||e.startsWith("edge://")||"about:blank"===e||f.isEdgeNewTab(e))return!1;const{signInEnforcementMode:t,forceSignInDomainsWhitelist:n}=await a.default.storage.local.get(g);if(t!==r.SignInEnforcementMode.ForceSignIn)return!1;s.logger.info("signin enforcement: checking url.",{url:e});const i=l.getDomainFromUrl(e);return!u.doesMatchListWildcard(i,n)||(s.logger.debug("signin enforcement: domain is in whitelist."),!1)}async function v(e,t){try{if(!await m(t))return;s.logger.info("signin enforcement: force open sign in page on web navigation."),h=t,await c.openSignInPage({tabId:e,limitConsecutiveOpens:!1})}catch(e){s.logger.error("signin enforcement: web navigation signin enforcement failed.",e)}}t.getPreSignInEnforcementUrl=function(){return h},t.resetPreSignInEnforcementUrl=function(){h=""},t.shouldEnforceSignIn=m,t.enforceSignInOnWebNavigation=v},4904:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSignInUrl=void 0;const a=i(n(398)),r=n(1025),o=["idpSigninUrl","autoOpenPreSamlSignInPage"];t.getSignInUrl=async()=>{const e=await a.default.storage.local.get(o);return e.idpSigninUrl?e.autoOpenPreSamlSignInPage?r.signInRedirectingPageUrl:e.idpSigninUrl:r.extensionSignInPageUrl}},7067:function(e,t,n){"use strict";var i,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleReportFalsePositive=t.handleReportFalseNegative=void 0;const r=a(n(398)),o=n(5347);n(5172),n(423),n(1113),n(9423),n(4752),n(28),n(5320),n(9207);const s=a(n(165)),c=n(1276),l=n(9532),u=n(1025),d=n(1326),p=n(1774),f=n(8657);n(740);const g=n(5943),h=n(772),m=n(8459),v=n(2219),y=n(8459),b=n(4667),w=n(8585),S=n(4030),x=n(3017),C=n(7445),T=n(420),E=n(1311);n(5947);const I=n(5998),_=n(4458),A=n(5947),D=n(9103),k=n(7833),P=n(7848),B=n(6399),R=n(8545),O=n(7121),U=n(161),N=n(9249),M=n(4882),F=n(4806),L=n(1071),j=n(516),V=n(6966),K=n(4929);n(9155);const q=n(8354),z=n(7488);n(5690),n(5020);const W=n(7721),H=async()=>{d.logger.debug("========= Debugging Info Started =========");const e=(new Date).getTimezoneOffset(),t=Math.abs(e),n=`GMT${e>0?"-":"+"}${`${Math.floor(t/60)}`.padStart(2,"0")}:${(""+t%60).padStart(2,"0")}`;d.logger.debug("User's timezone: ",n);const i=await L.getMostRecent();d.logger.debug("Most recent downloads",i),d.logger.debug("========= Debugging Info Ended =========")};const G=s.default(1);function $({log:e,level:t,optionalParameters:n},i){var a;const r=null===(a=i.tab)||void 0===a?void 0:a.id;switch(t){case"error":d.logger.error(e,...n||[],r);break;case"warn":d.logger.warn(e,...n||[],r);break;case"info":d.logger.info(e,...n||[],r);break;case"debug":d.logger.debug(e,...n||[],r)}}async function Q(e,t){const n=D.getTabsManager(),i=await n.getActive();if(!i||!i.id||!i.url)return void t({success:!1});d.logger.debug("User requested to report malicious page",i.id,i.url);const a=await E.getScanRequest(await V.collectEvidence(i.id,i.url));try{await T.reportFalseNegativeUrl(a,e),t({success:!0})}catch(e){d.logger.error("Error in reporting malicious page",e),t({success:!1})}const r=N.getDomainFromUrl(a.url);I.processTelemetry({category:c.TelemetryCategory.Detection,type:c.TelemetryType.Reporting,metadata:{action:c.ReportAction.FalseNegative,domain:""!==r?r:void 0},timestamp:new Date})}async function Y({comment:e,scanId:t},n){d.logger.debug("Reporting a malicious website as clean",t,e);const{maxRetriesInReportFalsePositive:i}=await m.getConfiguration();try{await x.hmcFetchPost("report/url-false-positive",{comment:e,scanId:t},{revProxy:!0,retryOptions:{maxRetries:i}}),n({success:!0})}catch(e){d.logger.error("Error in reporting clean page",e),n({success:!1})}const a=await L.getByScanId(t),r=null==a?void 0:a.download.urls.finalUrl,o=r?N.getDomainFromUrl(r):"";I.processTelemetry({category:c.TelemetryCategory.Detection,type:c.TelemetryType.Reporting,metadata:{action:c.ReportAction.FalsePositive,domain:""!==o?o:void 0,scanId:t},timestamp:new Date})}r.default.runtime.onConnect.addListener((e=>{e.name===c.PortName.Logger&&e.onMessage.addListener(((e,t)=>{e.kind===c.MessageKind.WriteLog&&t.sender&&$(e,t.sender)}))})),t.handleReportFalseNegative=Q,t.handleReportFalsePositive=Y,r.default.runtime.onMessage.addListener((function(e,t,n){var i;switch(e.kind){case c.MessageKind.GetCategories:return async function({tabId:e},t,n){var i;const a=null!=e?e:null===(i=t.tab)||void 0===i?void 0:i.id;if(!a)return d.logger.error("getCategoriesMessageHandler: tabId is undefined"),void n({});n({categories:await M.getCategories({tabId:a})})}(e,t,n),!0;case c.MessageKind.GetCurrentSite:return async function({tabId:e},t){var n,i;if(e<0)return;const a=D.getTabsManager(),r=await a.get(e);t({faviconUrl:null!==(n=null==r?void 0:r.favIconUrl)&&void 0!==n?n:"",url:null!==(i=null==r?void 0:r.url)&&void 0!==i?i:""})}(e,n),!0;case c.MessageKind.GetToken:return G((async()=>{try{d.logger.info("handleGetTokenRequest: called");const e=await f.getToken();if(e)return d.logger.info("handleGetTokenRequest: got token immediately"),e;if(d.logger.info("handleGetTokenRequest: handle idp token identify"),await b.safeHandleIdpTokenIdentify())return void d.logger.info("handleGetTokenRequest: identified with org token, it is OK not to have a token");if(d.logger.info("handleGetTokenRequest: no idp token, trying automatic signin"),await p.automaticSignIn()){d.logger.info("handleGetTokenRequest: retrying to get token");const e=await f.getToken();if(e)return d.logger.info("handleGetTokenRequest: got token on second attempt"),e}}catch(e){d.logger.error("handleGetTokenRequest: failed",e)}})).then((e=>n({jwtToken:e}))),!0;case c.MessageKind.SigninIdentifyUser:return f.identifyUser(e,n),!0;case c.MessageKind.SaveAuthTokens:return f.saveAuthTokens(e,n,null===(i=t.tab)||void 0===i?void 0:i.id),!0;case c.MessageKind.GetConfiguration:return async function(e,t){t({configuration:await m.getConfiguration()})}(0,n),!0;case c.MessageKind.GetLocalLogs:return async function(e){d.logger.debug("User requested to download logs"),await w.asyncTrySafe("onGetLocalLogsHandler",(async()=>{const e=await m.getConfiguration();d.logger.info("onGetLocalLogsHandler: Current HMC configuration",e),await H(),await te()})),e(c.browserName===c.BrowserName.Safari?await async function(){d.logger.info("saveLogsNatively: sending native message to save logs");const e=await c.getAsFileContent();try{const t=await l.sendNativeMessageBlindly("",{logs:e,type:l.NativeMessageType.SaveLogs});return d.logger.info("saveLogsNatively: got: ",t),t}catch(e){return d.logger.error("saveLogsNatively: failed to save logs",e),{}}}():await async function(){return d.logger.info("saveLogsDirectly: opening tab for local logs download"),await r.default.tabs.create({url:u.localLogsDownloadUrl}),{}}()),se(c.LogsCollectionOrigin.Local,!0)}(n),!0;case c.MessageKind.GetExtensionSettings:return function(e){e({extensionSettings:o.extensionSettings})}(n),!0;case c.MessageKind.WriteLog:$(e,t);break;case c.MessageKind.ReportFalseNegative:return Q(e.comment,n),!0;case c.MessageKind.ReportFalsePositive:return Y(e,n),!0;case c.MessageKind.TelemetryMessage:return void I.processTelemetry(e.data);case c.MessageKind.DevelopmentToolsOpened:W.handleDevtoolsOpen(e);break;case c.MessageKind.GetLastUser:return async function(e,t){t({lastUser:await P.getLastUser()})}(0,n),!0;case c.MessageKind.ShowPasteRestrictedNotification:O.showPasteRestrictedNotificationSafe();break;case c.MessageKind.UploadDetected:return U.handleFileUploadDetection(e,n),!0;case c.MessageKind.GetTabDomain:return async function(e,t,n){const i=await async function(e){var t,n;if("about:blank"!==e.url){if(null===(t=e.tab)||void 0===t?void 0:t.id)return(await r.default.tabs.get(null===(n=e.tab)||void 0===n?void 0:n.id)).url}else if([c.BrowserName.Chrome,c.BrowserName.Edge].includes(c.browserName))return e.origin}(t);n({domain:i?N.getDomainFromUrl(i):void 0})}(0,t,n),!0;case c.MessageKind.DownloadProgress:O.updateScanProgressToastIfNeeded(e.id,c.ScanProgressStatus.Downloading,e.progress,e.sourceTabId);break;case c.MessageKind.SensitiveDataDetectionInProgress:F.sensitiveDataDetectionInProgress();break;case c.MessageKind.SensitiveDataDetected:F.sensitiveDataDetected(e);break;case c.MessageKind.DetectSensitiveData:return F.detectSensitiveData(e,n),!0;case c.MessageKind.GetTabProtectionData:return async function(e,t){var n;const{activationStatus:i}=await m.getConfiguration(),a=D.getTabsManager(),r=await a.getActive();if(!r||!r.id)return void t({activationStatus:i});if(!(null==r?void 0:r.sessionId))return void t({tabId:r.id});const o=await k.getSessionManager(),s=await o.get(r.sessionId);t(s?{tabId:r.id,navigationSetId:r.navigationSetId,sessionId:s.id,sessionResolvingOrigin:r.sessionResolvingOrigin,emailScanId:null===(n=null==s?void 0:s.connectivityChannels)||void 0===n?void 0:n.email,activationStatus:i,detectionActive:r.isDetectionActive}:{tabId:r.id,activationStatus:i,detectionActive:r.isDetectionActive})}(0,n),!0;case c.MessageKind.SignInEnforcementDocumentDisabling:return async function(e,t){const{url:n}=e;t({disable:await R.shouldEnforceSignIn(n)})}(e,n),!0;case c.MessageKind.EventMessage:return void _.processEventMessageHandler(e.data);case c.MessageKind.OpenDownloadManager:return void async function(){d.logger.info("openDownloadManger: opening download manager tab"),await r.default.tabs.create({url:u.downloadManagerPageUrl})}();case c.MessageKind.FactoryReset:return void z.handleResetRequest();case c.MessageKind.KeepAlive:return void d.logger.debug("Got Keepalive message",t);default:return}}));const X=s.default(1);async function J(e){c.browserName!==c.BrowserName.Safari||await f.isSignedOut()||(d.logger.info(`${e}: triggered popup`),r.default.browserAction.openPopup(),r.default.browserAction.openPopup())}async function Z(){d.logger.info("onStartup: called"),await re,d.logger.info("onStartup: wakeup complete"),await R.enforceSignInOnStartup(),await J("onStartup")}async function ee(){d.logger.info("onInstalled: called"),await re,d.logger.info("onInstalled: wakeup complete"),await J("onInstalled")}r.default.runtime.onStartup.addListener((()=>{X(Z)})),r.default.runtime.onInstalled.addListener((e=>{if(X(ee),"update"===e.reason){const t=r.default.runtime.getManifest().version,n=e.previousVersion;if(!n)return void d.logger.warn("previousVersion is undefined");d.logger.info("About to run migration",n,t);try{S.migrate(n,t)}catch(e){d.logger.error("Error while migrating evidence cache",e)}}}));const te=async()=>c.clearIDBLogger(m.defaultLogLinesLimit);async function ne(){try{d.logger.info("executeAutomaticSignin: called"),await p.automaticSignIn()?(d.logger.info("executeAutomaticSignin: Setting default icon"),await C.setDefaultIcon(),d.logger.info("executeAutomaticSignin: Updating ABS Console"),await h.updateABSConsole()):(d.logger.info("executeAutomaticSignin: Setting pre-signin icon"),await C.setPreSignInIcon()),d.logger.info("executeAutomaticSignin: getting configuration for proxy");const e=await m.getConfiguration();d.logger.info("executeAutomaticSignin: setting configuration for proxy"),await g.setProxyConfiguration(e),d.logger.info("executeAutomaticSignin: finished successfully")}catch(e){d.logger.error("executeAutomaticSignin: failed",e)}}const ie=s.default(1),ae=()=>ie(ne),re=async function(){try{if(d.logger.info("onWakeup: Initializing local logs"),await async function(){await te();const{lastLogRequestAt:e}=await r.default.storage.local.get({lastLogRequestAt:0});(!Number.isSafeInteger(e)||e<=0)&&await r.default.storage.local.set({lastLogRequestAt:Date.now()})}(),d.logger.info("onWakeup: initializing content script manager - starting script injection"),await K.initContentScriptManager(),d.logger.info("onWakeup: Logging extension info"),await w.asyncTrySafe("logExtensionInfo",oe),d.logger.info("onWakeup: Checking for update"),await async function(){const{checkForUpdateOnWakeUp:e,reloadExtensionOnUpdate:t}=await m.getConfiguration();e?r.default.runtime.requestUpdateCheck&&r.default.runtime.requestUpdateCheck().then((([e,n])=>{"update_available"===e&&(d.logger.info("checkForUpdate: extension update available",n),t&&(d.logger.info("checkForUpdate: reloading extension to apply update"),r.default.runtime.reload()))})):d.logger.info("checkForUpdate: update check is disabled")}(),d.logger.info("onWakeup: handle idp token identify"),await b.safeHandleIdpTokenIdentify()||(d.logger.info("onWakeup: failed to identify with org token, attempting remote deployment token"),await ae()),d.logger.info("onWakeup: initializing telemetries"),await I.init(),d.logger.info("onWakeup: initializing events"),await _.init(),d.logger.info("onWakeup: initializing download process management"),A.init(),d.logger.info("onWakeup: initializing tabs management"),D.init(),d.logger.info("onWakeup: initializing session management"),await k.init(),d.logger.info("onWakeup: initializing custom html pages service"),await B.init(),d.logger.info("onWakeup: initializing badge text"),await j.updateDownloadsBadge(),r.default.tabs){d.logger.info("onWakeup: sync tabs");const e=D.getTabsManager();await e.syncTabs()}d.logger.info("onWakeup: handling reset request if needed."),await z.handleResetOnWakeup(),d.logger.info("onWakeup: Initialization finished successfully")}catch(e){d.logger.error("onWakeup: Failed to initialize",e)}}();async function oe(){var e,t;const{version:n}=r.default.runtime.getManifest();d.logger.info(`Extension version: ${n}`);const i=r.default.storage.local,a=null!==(t=await(null===(e=i.getBytesInUse)||void 0===e?void 0:e.call(i)))&&void 0!==t?t:0;d.logger.info(`Current storage size: ${a}`);const{storageBytesAlert:o}=await m.getConfiguration();o>0&&a>o&&d.logger.warn(`Storage size is ${a} bytes, which is above the alert threshold of ${o} bytes.`);const s=await m.getConfiguration();d.logger.info("logExtensionInfo: Current HMC configuration",s)}function se(e,t){I.processTelemetry({category:c.TelemetryCategory.Management,type:c.TelemetryType.LogsCollection,metadata:{origin:e,succeeded:t},timestamp:new Date})}r.default.cookies&&r.default.cookies.onChanged.addListener(q.cookieChangedAtHubCallback((({removed:e,cookie:t})=>{e||t.name!==b.idpReferenceTokenName||t.path!==b.idpReferenceTokenPath||(d.logger.info("cookies.onChanged: idp-reference-token cookie changed"),b.safeHandleIdpTokenIdentify())}))),r.default.storage.onChanged.addListener(((e,t)=>{"managed"===t&&async function(){d.logger.info("handleManagementStorageChange: attempting to identify with idp token"),await b.safeHandleIdpTokenIdentify({noUserInteraction:!0})||(d.logger.info("handleManagementStorageChange: attempting to use remote deployment token"),await ae())}()})),r.default.runtime&&r.default.runtime.onUpdateAvailable?(d.logger.debug("update availability handler active"),r.default.runtime.onUpdateAvailable.addListener((e=>{!async function({version:e}){try{const{enableTelemetryUpdateAvailable:t}=await m.getConfiguration(),{version:n}=r.default.runtime.getManifest();if(!t)return;if(await async function(e,t){const{lastNotifiedAvailableUpdate:n}=await r.default.storage.local.get(["lastNotifiedAvailableUpdate"]);return n===`${t}:${e}`||(await r.default.storage.local.set({lastNotifiedAvailableUpdate:`${t}:${e}`}),!1)}(e,n))return void d.logger.debug("onUpdateAvailable: telemetry about this version already been set. skipping telemetry");d.logger.info("onUpdateAvailable: new update is available",{newVersion:e,oldVersion:n,enableTelemetryUpdateAvailable:t}),await I.processTelemetry({category:c.TelemetryCategory.Management,type:c.TelemetryType.UpdateAvailable,timestamp:new Date,metadata:{newVersion:e,oldVersion:n}})}catch(e){if(e instanceof Error){const{message:t,name:n,stack:i}=e;d.logger.error("onUpdateAvailable: failed with error",{error:{message:t,name:n,stack:i}})}d.logger.error("onUpdateAvailable: failed with non-error exception")}}(e)}))):d.logger.debug("onUpdateAvailable: update availability handler disabled",{"browser.runtime":r.default.runtime,"browser.runtime.onUpdateAvailable":null===(i=r.default.runtime)||void 0===i?void 0:i.onUpdateAvailable});const ce=s.default(1);y.registerGetConfigurationCallback((function e(t){ce((()=>async function(t){try{d.logger.info("uploadLogsOnDemand: called");const{hmcRegistrationId:e,lastLogRequestAt:n,logUploadRetriesLeft:i}=await r.default.storage.local.get({hmcRegistrationId:"",lastLogRequestAt:0,logUploadRetriesLeft:0});if(!e)return void d.logger.info("uploadLogsOnDemand: no hmcRegistrationId, skipping");if(n<=0)return void d.logger.info("uploadLogsOnDemand: lastLogRequestAt was not initialized, skipping");const a=n<t.logRequestAt;if(!a&&i<=0)return void d.logger.info("uploadLogsOnDemand: nothing changed in last logRequestAt");d.logger.info("uploadLogsOnDemand: saving new logRequestAt timestamp instead of last timestamp",t.logRequestAt,new Date(t.logRequestAt),n,new Date(n),i,t.logUploadRetries),await r.default.storage.local.set(a?{lastLogRequestAt:t.logRequestAt,logUploadRetriesLeft:t.logUploadRetries}:{logUploadRetriesLeft:i-1}),d.logger.info("uploadLogsOnDemand: creating new log capsule");const o=await v.createLogCapsule(e);try{await H(),d.logger.info("uploadLogsOnDemand: clearing old logs"),await te(),d.logger.info("uploadLogsOnDemand: getting logs to upload");const t=await c.getAsFileContent();d.logger.info("uploadLogsOnDemand: uploading logs"),await v.uploadLogCapsule(t,e,o),d.logger.info("uploadLogsOnDemand: upload success, preventing log upload retries"),await r.default.storage.local.set({logUploadRetriesLeft:0})}catch(t){throw d.logger.error("uploadLogsOnDemand: failed to upload logs",t),await v.updateLogCapsuleError(t,e,o),t}d.logger.info("uploadLogsOnDemand: finished successfully"),se(c.LogsCollectionOrigin.OnDemand,!0)}catch(n){d.logger.error("uploadLogsOnDemand: failed",n),setTimeout((()=>e(t)),1),se(c.LogsCollectionOrigin.OnDemand,!1)}}(t)))}))},4732:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.manageContentScript=void 0;const a=i(n(398)),r=n(6186);t.manageContentScript=async function(e,t,n){return a.default.tabs.sendMessage(e,{kind:r.ContentScriptBaseMessageKind.Management,operation:t,identifiers:n})}},1652:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentScriptsListChromium=void 0,t.contentScriptsListChromium=[{id:"chrome-exp-page-script",js:["scripts/chrome-exp-page-script.js"],matches:["<all_urls>"],runAt:"document_start",matchOriginAsFallback:!0,allFrames:!0,world:"MAIN"},{id:"chrome-exp-content-script",js:["scripts/chrome-exp-content-script.js"],matches:["<all_urls>"],runAt:"document_start",matchOriginAsFallback:!0,allFrames:!0}]},4023:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentScriptsListFirefox=void 0,t.contentScriptsListFirefox=[{id:"firefox-object-url-hijack",js:["scripts/firefox-object-url-hijack.js"],matches:["http://*/*","https://*/*","file://*/*"],runAt:"document_start"},{id:"upload-detection-firefox-page-script",js:["scripts/upload-detection-firefox-page-script.js"],matches:["<all_urls>"],runAt:"document_start",allFrames:!0}]},7756:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentScriptsListSafari=void 0,t.contentScriptsListSafari=[{id:"safari-download-click-content-script",js:["scripts/safari-download-click-content-script.js"],matches:["<all_urls>"],runAt:"document_start",allFrames:!0},{id:"safari-download-click-page-script",js:["scripts/safari-download-click-page-script.js"],matches:["<all_urls>"],runAt:"document_start",allFrames:!0,world:"MAIN"}]},6641:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.absFullScriptsList=void 0;const i=n(1276),a=n(3151),r=n(7756),o=n(4023),s=n(1652),c=n(2543),l={[i.BrowserName.Safari]:r.contentScriptsListSafari,[i.BrowserName.Firefox]:o.contentScriptsListFirefox,[i.BrowserName.Chrome]:s.contentScriptsListChromium,[i.BrowserName.Edge]:s.contentScriptsListChromium};t.absFullScriptsList=function(){const e=c.cloneDeep(a.contentScriptsList);return e.push(...l[i.browserName]),e}},3151:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentScriptsList=void 0,t.contentScriptsList=[{id:"page-info-content-script",js:["scripts/page-info-content-script.js","scripts/timers-content-script.js"],matches:["<all_urls>"],matchOriginAsFallback:!0,runAt:"document_start",allFrames:!1,world:"ISOLATED"},{id:"toast-content-script",js:["scripts/toast-content-script.js"],matches:["<all_urls>"],matchOriginAsFallback:!0,runAt:"document_start",allFrames:!1,world:"ISOLATED"},{id:"prevent-print",js:["scripts/prevent-print.js"],matches:["<all_urls>"],matchOriginAsFallback:!0,runAt:"document_start",allFrames:!1,world:"ISOLATED"},{id:"dlp-fetures",js:["scripts/upload-detection-script.js","scripts/sdd-pre-action-script.js","scripts/sdd-post-action-script.js","scripts/sdd-domain-defined-script.js"],matches:["<all_urls>"],runAt:"document_start",matchOriginAsFallback:!0,allFrames:!0,world:"ISOLATED"},{id:"upload-detection-page-script",js:["scripts/upload-detection-page-script.js"],matches:["<all_urls>"],runAt:"document_start",matchOriginAsFallback:!0,allFrames:!0,world:"MAIN"},{id:"prevent-paste-out",js:["scripts/prevent-paste-out.js"],matches:["<all_urls>"],runAt:"document_start",matchOriginAsFallback:!0,allFrames:!0,world:"ISOLATED"},{id:"scripts-messaging-helper",js:["scripts/scripts-messaging-helper.js"],matches:["<all_urls>"],allFrames:!0,matchOriginAsFallback:!0,runAt:"document_start",world:"ISOLATED"},{id:"blob-download-content-script",js:["scripts/blob-download-content-script.js"],matches:["<all_urls>"],allFrames:!0,matchOriginAsFallback:!0,runAt:"document_start",world:"ISOLATED"},{id:"object-url-page-script",js:["scripts/object-url-page-script.js"],matches:["<all_urls>"],runAt:"document_start",matchOriginAsFallback:!0,allFrames:!0,world:"MAIN"},{id:"block-page-content-script",js:["scripts/block-page-content-script.js"],matches:["<all_urls>"],matchOriginAsFallback:!0,world:"ISOLATED"},{id:"favicon-collector-script",js:["scripts/favicon-collector-script.js"],matches:["<all_urls>"],matchOriginAsFallback:!0,world:"ISOLATED"},{id:"dynamic-evidence-script",js:["scripts/dynamic-evidence-script.js","scripts/html-dom-statistics-script.js"],matches:["<all_urls>"],matchOriginAsFallback:!0,allFrames:!0,world:"ISOLATED"},{id:"get-text-content-content-script",js:["scripts/get-text-content-content-script.js"],matches:["<all_urls>"],matchOriginAsFallback:!0,allFrames:!0,runAt:"document_start",world:"ISOLATED"},{id:"html-dom-script",js:["scripts/html-dom-script.js"],matches:["<all_urls>"],matchOriginAsFallback:!0,runAt:"document_start",allFrames:!1,world:"ISOLATED"},{id:"signin-enforcement-interactions-disabling",js:["scripts/signin-enforcement-interactions-disabling.js"],matches:["<all_urls>"],matchOriginAsFallback:!0,runAt:"document_start",allFrames:!1,world:"ISOLATED"},{id:"detection-features",js:["scripts/link-click-script.js","scripts/login-visibility.js","scripts/detection-rescan-script.js","scripts/field-typing-detection.js"],matches:["<all_urls>"],runAt:"document_end",matchOriginAsFallback:!0,allFrames:!0,world:"ISOLATED"},{id:"idp-signin-tokens-detection",js:["scripts/idp-signin-tokens-detection.js"],extensionService:!0,runAt:"document_end",allFrames:!1,world:"ISOLATED"},{id:"downloader",js:["scripts/downloader.js"],matches:["<all_urls>"],runAt:"document_end",matchOriginAsFallback:!0,allFrames:!0,world:"ISOLATED"}]},4929:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initContentScriptManager=void 0;var i=n(8175);Object.defineProperty(t,"initContentScriptManager",{enumerable:!0,get:function(){return i.initialize}})},8175:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=void 0;const a=i(n(9207)),r=n(8459),o=n(1326);async function s(){o.logger.info("initialize: content script manager initialization started");const e=await r.getConfiguration();await a.default(e),r.registerGetConfigurationCallback((e=>{a.default(e)}))}t.initialize=s,t.default=s},9207:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleScripts=void 0;const a=n(398),r=n(5629),o=n(5347),s=n(3151),c=n(6641),l=n(1326),u=i(n(2543));async function d(e){try{await a.scripting.registerContentScripts([e]),l.logger.info("registerScript: Registered script",{scriptData:e})}catch(t){l.logger.error("registerScript: Failed to register script",{scriptData:e},t)}}async function p(e){try{await a.scripting.updateContentScripts([e]),l.logger.info("updateScript: Updated script",{scriptData:e})}catch(t){l.logger.error("updateScript: Failed to update script",{scriptData:e},t)}}async function f({disableAllContentScripts:e,contentScriptDisabledDomains:t,enableContentScriptManagement:n}){var i,f,g;try{const h=await async function(){return await a.scripting.getRegisteredContentScripts(void 0)}();l.logger.info("handleScripts: started",{registeredScripts:h});const m=new Set(c.absFullScriptsList().filter((e=>e.extensionService)).map((e=>e.id)));if(n&&e){l.logger.info("handleScripts: disable all scripts except those related to the extensionService");const e=h.filter((e=>!m.has(e.id))).map((e=>e.id));return void await async function(e){try{await a.scripting.unregisterContentScripts(e),l.logger.info("unregisterScripts: Unregistered scripts",{filter:e})}catch(t){l.logger.error("unregisterScripts: Failed to unregister scripts",{filter:e},t)}}({ids:e})}const v=r.preprocessContentScripts(s.contentScriptsList,o.extensionSettings);for(const e of v){const a=h.find((t=>t.id===e.id)),r=null!==(i=e.excludeMatches)&&void 0!==i?i:[];n&&t.length>0&&!m.has(e.id)&&(r.push(...(g=t,g.flatMap((e=>[`*://${e.trim()}/*`])))),l.logger.debug("handleScripts: excludeMatches has been updated",{scriptID:e.id,contentScriptDisabledDomains:t}));const o=Object.assign(Object.assign({},e),{excludeMatches:r});if(a){const t=null!==(f=a.excludeMatches)&&void 0!==f?f:[];!u.default.isEqual(u.default.sortBy(r),u.default.sortBy(t))&&(l.logger.info("handleScripts: the change found in excludeMatches",{scriptID:e.id,newExcludeMatches:r,registeredExcludeMatches:t}),await p(o))}else await d(o)}}finally{l.logger.info("handleScripts: finalized.")}}t.handleScripts=f,t.default=f},3090:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromiumPreprocessor=void 0;const i=n(1652);t.ChromiumPreprocessor=class{preprocess(e){return[...e,...i.contentScriptsListChromium]}}},3741:function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.FirefoxPreprocessor=void 0;const a=n(4023);t.FirefoxPreprocessor=class{preprocess(e,t){return[...e,...a.contentScriptsListFirefox].filter((e=>"MAIN"!==e.world)).map((e=>{var{world:t,matchOriginAsFallback:n}=e,a=i(e,["world","matchOriginAsFallback"]);return Object.assign({},a)}))}}},368:function(e,t){"use strict";var n=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralPreprocessor=void 0,t.GeneralPreprocessor=class{preprocess(e,t){var i,a;const{absUrl:r}=t;for(const t of e)t.extensionService?t.matches=[...null!==(i=t.matches)&&void 0!==i?i:[],`${r}/*`]:t.excludeMatches=[...null!==(a=t.excludeMatches)&&void 0!==a?a:[],`${r}/*`];return e.map((e=>{var{extensionService:t}=e;return n(e,["extensionService"])}))}}},2858:function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.SafariPreprocessor=void 0;const a=n(7756);t.SafariPreprocessor=class{preprocess(e,t){return[...e.map((e=>{var{matchOriginAsFallback:t}=e,n=i(e,["matchOriginAsFallback"]);return Object.assign({},n)})),...a.contentScriptsListSafari]}}},5629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preprocessContentScripts=void 0;const i=n(1276),a=n(368),r=n(2858),o=n(3741),s=n(2543),c=n(3090),l={[i.BrowserName.Safari]:new r.SafariPreprocessor,[i.BrowserName.Firefox]:new o.FirefoxPreprocessor,[i.BrowserName.Chrome]:new c.ChromiumPreprocessor,[i.BrowserName.Edge]:new c.ChromiumPreprocessor};t.preprocessContentScripts=function(e,t){const n=function(){const e=[l[i.browserName]];return e.push(new a.GeneralPreprocessor),e}();let r=s.cloneDeep(e);for(const e of n)r=e.preprocess(r,t);return r}},6399:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const a=i(n(398)),r=n(8459),o=n(7615),s=n(1326);r.registerGetConfigurationCallback((e=>{l(e)})),t.init=async function(){s.logger.info("Custom html pages service: initializing."),l(await r.getConfiguration())};const c=["customHtmlPagesVersion"];async function l({enableCustomHtmlPagesService:e,customHtmlPagesPaths:t}){try{if(!e)return s.logger.info("Custom html pages service: configuration is disabled."),void(0===t.length&&(s.logger.info("Custom html pages service: removing existing pages."),await a.default.storage.local.remove("customHtmlPages")));const{customHtmlPagesVersion:n}=await a.default.storage.local.get(c),i=t[0].split("/")[1];i&&i!==n?(s.logger.info("Custom html pages service: configuration updated, updating pages."),await a.default.storage.local.set({customHtmlPagesVersion:i}),await async function(e){try{const t={};await Promise.all(e.map((e=>async function(e,t){try{const[n,i,a]=e.trim().replace(".html","").split("/");s.logger.debug("Custom html pages service: updating page.",{basePath:n,version:i,pageType:a});const r=await o.fetchHtml(e);t[a]=r}catch(t){throw s.logger.error("Custom html pages service: failed to update page.",{path:e}),t}}(e,t)))),s.logger.debug("Custom html pages service: updated pages.",Object.keys(t)),await a.default.storage.local.set({customHtmlPages:t})}catch(e){throw s.logger.error("Custom html pages service: failed to update pages."),e}}(t)):s.logger.info("Custom html pages service: configuration not updated, no need to fetch pages.")}catch(e){s.logger.error("Custom html pages service: failed to check and update pages.",e),await a.default.storage.local.remove("customHtmlPages")}}},740:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.shouldDetectUrlNavigation=void 0;const a=i(n(398)),r=n(8244),o=n(1276),s=n(8459),c=n(1326),l=n(1311),u=n(4570),d=n(6860),p=n(7100),f=n(5560);n(2176);const g=n(9103),h=n(5998),m=n(2039),v=n(9249),y=n(4537);async function b(e,t){if(!await l.shouldDetectUrl(e,t))return!1;const n=v.getDomainFromUrl(e),{isWhitelisted:i,category:a}=await m.checkLocalWhitelists([n]);if(i){const{telemetriesUrlMaxLength:t}=await s.getConfiguration();return c.logger.debug("shouldDetectUrlNavigation: website shouldn't be scanned for this domain or category. its in local whitelist",{domain:n,category:a}),h.processTelemetry({category:o.TelemetryCategory.Detection,type:o.TelemetryType.AvoidUrlDetection,metadata:{url:e.slice(0,t),domain:n.slice(0,t),reason:a?o.AvoidUrlDetectionReason.ExcludedCategory:o.AvoidUrlDetectionReason.ExcludedDomains,category:a},timestamp:new Date}),!1}return!0}async function w(e,t=o.ScanReason.TabFocused){await l.isDetectionEnabled()&&await async function(e,t){c.logger.debug("onTabFocusedHandler",e,t);const{triggerRescanOnTabFocused:n}=await s.getConfiguration();if(n){const n=g.getTabsManager(),i=await n.get(e);i&&i.isDetectionActive&&i.url?f.triggerRescan({kind:o.MessageKind.TriggerRescan,reason:t},e,i.url):c.logger.debug("onTabFocusedHandler: criteria not met, skipping rescan",{tabId:e,isDetectionActive:null==i?void 0:i.isDetectionActive,url:null==i?void 0:i.url})}}(e,t)}t.shouldDetectUrlNavigation=b,a.default.webNavigation&&(a.default.webNavigation.onBeforeNavigate.addListener((e=>{!async function(e){const{tabId:t,url:n,frameId:i}=e;await b(n,i)&&g.getTabsManager().getTabPlimit(t)((()=>r.onBeforeNavigationHandler(e)))}(e)})),a.default.webNavigation.onCommitted.addListener((e=>{!async function(e){const{tabId:t,timeStamp:n,url:i,frameId:a}=e;if(!await b(i,a))return;const o=e.transitionType,s=e.transitionQualifiers;o&&s?g.getTabsManager().getTabPlimit(t)((()=>r.onCommittedHandler({tabId:t,timeStamp:n,url:i,transitionType:o,transitionQualifiers:s}))):c.logger.debug("onCommittedCallback: transitionType or transitionQualifiers is undefined")}(e)})),a.default.webNavigation.onCompleted.addListener((e=>{!async function(e){const{tabId:t,url:n,frameId:i}=e;await b(n,i)&&g.getTabsManager().getTabPlimit(t)((()=>r.onCompletedHandler(e)))}(e)})),y.preRenderedTabShown.addListener((({tabId:e})=>{w(e,o.ScanReason.PrerenderedTabShown)}))),a.default.runtime.onMessage.addListener(((e,t)=>{!async function(e,t){var n;const i=null===(n=null==t?void 0:t.tab)||void 0===n?void 0:n.id;switch(e.kind){case o.MessageKind.LinkClickedOnPage:void 0!==i&&g.getTabsManager().getTabPlimit(i)((()=>u.onLinkClickedHandler(i,e)));break;case o.MessageKind.BypassMaliciousPage:await d.onBypassBlockPageHandler(e.tabId,e.url,e.detectionMode);break;case o.MessageKind.CloseTab:void 0!==i&&a.default.tabs.remove(i);break;case o.MessageKind.BackToSafety:void 0!==i&&await r.onBackToSafetyHandler(i)}}(e,t)})),a.default.tabs.onActivated.addListener((e=>{w(e.tabId)})),a.default.tabs.onRemoved.addListener((e=>{!async function(e){await l.isDetectionEnabled()&&g.getTabsManager().getTabPlimit(e)((()=>{r.onTabClosedHandler(e),u.onTabClosedHandler(e)}))}(e)})),f.initRescan((async function(e,t,n){if(!await b(t))return;const i=await p.getExtensionEvidences(e);await p.deleteExternalEvidences(e),g.getTabsManager().getTabPlimit(e)((()=>r.onRescanTriggeredHandler({tabId:e,timeStamp:Date.now(),url:t,extensionEvidences:i,reason:n})))}))},7721:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleDevtoolsOpen=void 0;const a=n(1276),r=n(8459),o=n(5998),s=n(1326),c=i(n(398)),l=n(9103);t.handleDevtoolsOpen=async function(e){if("number"!=typeof e.tabId)return void s.logger.info("handleDevtoolsOpen: devtools for an extension was opened");s.logger.info("handleDevtoolsOpen: devtools for tab was opened",e.tabId);const{enableDevtoolsProtection:t}=await r.getConfiguration();o.processTelemetry({category:a.TelemetryCategory.Prevention,type:a.TelemetryType.Devtools,metadata:{opened:!0,prevented:t},timestamp:new Date}),t&&(s.logger.info("handleDevtoolsOpen: closing tab",e.tabId),c.default.tabs.remove(e.tabId))},c.default.webNavigation.onBeforeNavigate.addListener((function(e){!async function({tabId:e,frameId:t}){const{enableDevToolsCloseByDebugger:n,enableDevtoolsProtection:i}=await r.getConfiguration(),a=await u.get(e);if(n&&i&&a&&a.active&&0===t&&(s.logger.debug("checkDevelopmentToolsStatus: got event for the tab with DevTools",e),null===chrome||void 0===chrome?void 0:chrome.debugger))try{(await new Promise((e=>chrome.debugger.getTargets(e)))).some((t=>t.tabId===e&&t.attached))&&(s.logger.debug("checkDevelopmentToolsStatus: DevTools are open, closing tab"),await c.default.tabs.remove(e),s.logger.info("checkDevelopmentToolsStatus: Tab closed successfully because the DevTools was open"))}catch(e){s.logger.error("checkDevelopmentToolsStatus: An error occurred while checking or closing the tab with DevTools",e)}}(e)}));const u=l.getTabsManager()},3070:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleCandidate=void 0;const i=n(3017),a=n(1326);t.handleCandidate=async function(e){try{const t=await i.hmcFetchPost("endpoint-user/update-user-display-name",{candidateEmail:e});if(!t.ok){let n;try{n=await t.text()}catch(e){n=void 0}a.logger.error("handleCandidate: Failed to update user display name, error response",{email:e,headers:Object.fromEntries(t.headers.entries()),status:t.status,body:n,bodyRecovered:void 0!==n})}}catch(e){a.logger.error("handleCandidate: Failed to update user with an exception",{error:e})}}},5176:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailCollectionFlowContext=void 0;class n{constructor(e,t,n,i){this.tabId=e,this.requestId=t,this.url=n,this.configuration=i}propegate(e){return n.fromDetails(e,this.configuration)}static fromDetails(e,t){return new n(e.tabId,e.requestId,e.url,t)}}t.EmailCollectionFlowContext=n},9155:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(1276),r=i(n(2543)),o=n(8459),s=n(1326),c=n(9554);o.registerGetConfigurationCallback((e=>{e.enableOutlookEmailCollection&&e.emailCollectionStatus===a.EmailCollectionStatus.Enabled?(s.logger.debug("email-collection:onConfigChange email collection enabled"),c.register(r.default.clone(e))):(s.logger.debug("email-collection:onConfigChange email collection disabled"),c.unregister())}))},1590:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CandidateFound=void 0;const i=n(474);t.CandidateFound=class{constructor(e,t){this.context=e,this.email=t}handleRequest(e){i.invalidInput()}}},3407:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailEntry=t.isEmailEntryPage=void 0;const i=n(4740),a=n(9896),r=n(5176),o=n(474),s=n(345);function c(e,t,n){return{urlIsLoginPage:n.microsoftOauthLoginPageUrls.map((e=>new URL(e))).some((t=>t.hostname===e.hostname&&t.pathname===e.pathname)),hasRedirectUri:e.searchParams.has("redirect_uri"),redirectUriMatchOfficeHostname:t&&s.doesMatchListWildcard(t.hostname,n.officeHostnamePatterns)}}t.isEmailEntryPage=c;class l{constructor(e,t){this.context=e,this.redirectUri=t}handleRequest(e){const t=new URL(e.url),n=o.whenSome(t.searchParams.get("redirect_uri"),(e=>new URL(e))),s=c(t,n,this.context.configuration);if(o.allKeysAreTrue(s)&&n)return new l(r.EmailCollectionFlowContext.fromDetails(e,this.context.configuration),n);if(this.context.configuration.microsoftLoginApiUrls.includes(e.url)&&"POST"===e.method){if(!e.requestBody||!e.requestBody.formData)return new i.FlowFailed(this.context.propegate(e),"cant inspect body");const t=e.requestBody.formData.login[0];return new a.WaitConfirm(this.context.propegate(e),this.redirectUri,t)}return n&&o.testRedirectUri(n,this.redirectUri)?new i.FlowFailed(this.context.propegate(e),"user was already logged in"):void 0}}t.EmailEntry=l},4740:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlowFailed=void 0;const i=n(474);t.FlowFailed=class{constructor(e,t){this.context=e,this.reason=t}handleRequest(e){i.invalidInput()}}},9896:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WaitConfirm=void 0;const i=n(1590),a=n(474);t.WaitConfirm=class{constructor(e,t,n){this.context=e,this.redirectUri=t,this.email=n}handleRequest(e){if(a.testRedirectUri(new URL(e.url),this.redirectUri))return new i.CandidateFound(this.context.propegate(e),this.email)}}},9554:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unregister=t.register=void 0;const i=n(398),a=n(1326),r=n(3070),o=n(3407),s=n(1590),c=n(4740),l=n(474),u=n(1276),d=n(5176),p=n(8676),f=new Map,g=e=>{const t=f.get(e.context.tabId);a.logger.debug("email-collection:state-machine transition",{newState:e,oldState:t}),f.set(e.context.tabId,e)};function h(e,t){const n=new URL(t.url),i=f.get(t.tabId);if(p.isChromium(u.browserName)&&!l.isActiveRequest(t))return;const h=l.whenSome(n.searchParams.get("redirect_uri"),(e=>new URL(e))),m=Object.assign(Object.assign({},o.isEmailEntryPage(n,h,e)),{tabStateUndefined:!i});if(l.allKeysAreTrue(m)&&h)return a.logger.debug("email-collection:handleRequest login flow start detected",{details:t}),void g(new o.EmailEntry(d.EmailCollectionFlowContext.fromDetails(t,e),h));i?(a.logger.info("email-collection:handleRequest input",{tabState:i,details:t}),function(e){try{const n=i.handleRequest(t);if(!n)return;if(n instanceof s.CandidateFound)return a.logger.info("candidate found.",{state:n}),r.handleCandidate(n.email),void f.delete(e);if(n instanceof c.FlowFailed){const t=n.reason;return a.logger.info("email collection flow failed",{lastState:f.get(e),reason:t}),void f.delete(e)}g(n)}catch(t){a.logger.error("email collection flow failed with an error",t),f.delete(e)}}(t.tabId)):a.logger.debug("email-collection:handleRequest request ignored",{details:t,conditions:m})}i.tabs.onRemoved.addListener((e=>{a.logger.debug("email-collection:state-machine tab closed. clearing state",{tabId:e}),f.delete(e)}));const m=["*://*/*"];let v;t.register=function(e){if(v)return;a.logger.debug("email-collection:register adding web request listeners");const t=h.bind(void 0,e);i.webRequest.onBeforeRequest.addListener(t,{urls:m,types:["main_frame"]},["requestBody"]),v=()=>i.webRequest.onBeforeRequest.removeListener(t)},t.unregister=function(){v&&(a.logger.debug("email-collection:register removing web request listeners"),f.clear(),v(),v=void 0)}},474:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.testRedirectUri=t.whenSome=t.allKeysAreTrue=t.isActiveRequest=t.invalidInput=void 0;const a=i(n(2543));function r(e){return(e=(e=e.startsWith("/")?e:"/"+e).endsWith("/")?e:e+"/").toLowerCase()}t.invalidInput=function(){throw new Error("Invalid input")},t.isActiveRequest=function(e){const{documentLifecycle:t}=e;return"active"===t},t.allKeysAreTrue=e=>!a.default.values(e).some((e=>!1===e)),t.whenSome=function(e,t){if(null!=e)return t(e)},t.testRedirectUri=function(e,t){return e.origin===t.origin&&r(e.pathname)===r(t.pathname)}},9423:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(1276),r=i(n(398)),o=n(9684),s=i(n(2543)),c=n(8459),l=n(4458),u=n(1326),d=n(5560),p=n(611),f=n(9103),g=new o.TemporaryMap(void 0),h=new o.TemporaryMap(void 0);var m;r.default.runtime.onMessage.addListener(((e,t)=>{!function(e,t){var n,i,r;e.kind===a.MessageKind.FieldTypingDetection&&(g.set(null===(n=t.tab)||void 0===n?void 0:n.id,e.extractedData),function(e,t){let n=h.get(e);n||(n=s.default.debounce((()=>async function(e,t){var n,i,r;const{detectEmailAddressTyping:o,detectEmailAddressTypingTriggerRescan:s,detectEmailAddressTypingRegex:h,detectEmailAddressTypingSendEvent:v,detectCreditCardTyping:y,detectCreditCardTypingTriggerRescan:b,detectCreditCardTypingRegex:w,detectCreditCardTypingSendEvent:S}=await c.getConfiguration(),x=g.get(e);if(!x)return void u.logger.error(`No last data for tabId ${e} and url ${t}`);const C=(T={detectEmailAddressTyping:o,detectEmailAddressTypingTriggerRescan:s,detectEmailAddressTypingRegex:h,detectEmailAddressTypingSendEvent:v,detectCreditCardTyping:y,detectCreditCardTypingTriggerRescan:b,detectCreditCardTypingRegex:w,detectCreditCardTypingSendEvent:S},E=x.value,T.detectEmailAddressTyping&&new RegExp(T.detectEmailAddressTypingRegex).test(E)?{type:m.Email,rescan:T.detectEmailAddressTypingTriggerRescan,processEvent:T.detectEmailAddressTypingSendEvent,eventType:a.EventType.EmailTyped,removeValue:!1}:T.detectCreditCardTyping&&new RegExp(T.detectCreditCardTypingRegex).test(E)?{type:m.CreditCard,rescan:T.detectCreditCardTypingTriggerRescan,processEvent:T.detectCreditCardTypingSendEvent,eventType:a.EventType.CreditCardTyped,removeValue:!0}:void 0);var T,E;if(C){const o=Object.assign(Object.assign(Object.assign({},x.name&&{name:x.name}),x.placeholder&&{placeholder:x.placeholder}),x.type&&{type:x.type}),s={value:C.removeValue?"N/A":null!==(n=x.value)&&void 0!==n?n:"N/A",url:x.url,inputType:null!==(i=x.type)&&void 0!==i?i:"N/A",extraTags:o};if(C.rescan)try{u.logger.info(`Triggering rescan for ${C.type} detection`),d.triggerRescan({kind:a.MessageKind.TriggerRescan,reason:a.ScanReason.CreditCardOrEmail,externalEvidences:[{name:C.type,category:"FieldTyping",description:"Field typing detected",data:{value:s.value,url:s.url,inputType:s.inputType}}]},e,t)}catch(e){u.logger.error(`Failed to trigger rescan for ${C.type} detection`,e)}if(C.processEvent){u.logger.debug(`Sending ${C.eventType} event to XRay`);const e=f.getTabsManager(),n=await e.getActive();l.processEvent({metadata:Object.assign(Object.assign({},s),{url:t}),category:a.EventCategory.UserInput,type:C.eventType,timestamp:new Date,destination:[a.EventDestination.XDR],sessionId:null!==(r=null==n?void 0:n.sessionId)&&void 0!==r?r:p.v4(),eventId:p.v4()})}}}(e,t)),2e3,{leading:!1,trailing:!0,maxWait:3e3}),h.set(e,n)),n()}(null===(i=t.tab)||void 0===i?void 0:i.id,null===(r=t.tab)||void 0===r?void 0:r.url))}(e,t)})),function(e){e.Email="email_typing",e.CreditCard="creditcard_typing"}(m||(m={}))},5320:function(e,t,n){"use strict";var i=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,a){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,a,(t=e[n](t)).done,t.value)}))}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1326),o=n(4458),s=a(n(398)),c=n(1276),l=n(611),u=n(9103),d=a(n(165)),p=n(3671),f=n(1043),g=n(1071),h=n(9249),m=new p.DexieLimitedCache("fileDownloadDetection",{maxAge:432e5,maxCount:100,shouldEvictExpired:!0});const v=new Map;async function y(e){var t;const n=e.id.toString(),i=await m.get(n);if(!i){const{id:t}=e;r.logger.warn("file-download-detection: got change info before created, postponing",{downloadId:t});const n=v.get(t)||[];return n.push(e),void v.set(t,n)}r.logger.debug("file-download-detection: changed",{details:e});const a=function(e,t){var n,i,a,o;const s=Object.assign(Object.assign(Object.assign(Object.assign({downloadDetectionOrigin:c.DownloadDetectionOrigin.DownloadsApi},!e.finalUrl&&(null===(n=t.finalUrl)||void 0===n?void 0:n.current)&&{finalUrl:t.finalUrl.current}),!e.filename&&(null===(i=t.filename)||void 0===i?void 0:i.current)&&{filename:t.filename.current}),!e.fileSize&&(null===(a=t.fileSize)||void 0===a?void 0:a.current)&&{fileSize:t.fileSize.current}),(null===(o=t.state)||void 0===o?void 0:o.current)&&{state:t.state.current});return r.logger.debug("file-download-detection: extracting essential data from delta",{downloadItem:e,delta:t,extractedDelta:s}),s}(i,e);await m.update(n,a),"complete"===(null===(t=e.state)||void 0===t?void 0:t.current)&&w(n)}const b=d.default(1);s.default.downloads&&(r.logger.debug("file-download-detection: registering listeners"),s.default.downloads.onCreated.addListener((e=>{b((()=>async function(e){if(["complete","interrupted"].includes(e.state))return;const t=await async function(e){const t=Object.assign(Object.assign({},e),{downloadDetectionOrigin:c.DownloadDetectionOrigin.DownloadsApi});if(t.finalUrl)if(f.isDownloadByABSExtension(t)){const e=f.getOriginDownloadProcessId(t.finalUrl),n=await g.get(e);if(n)return Object.assign(Object.assign({},t),{url:n.download.urls.finalUrl,referrer:n.download.urls.referrer,mime:n.download.mimeType,fileSize:n.download.fileSize,filename:n.download.filename})}else if(t.finalUrl.startsWith("data")){const e=c.dataURLToBlob(t.finalUrl),n=await c.blobToSha256(e),i=`data:text/plain;base64,${btoa(n)}`,a=u.getTabsManager(),r=await a.getActive();return Object.assign(Object.assign(Object.assign({},t),{url:i,finalUrl:i,mime:e.type,fileSize:e.size}),(null==r?void 0:r.url)&&{referrer:h.getDomainFromUrl(null==r?void 0:r.url)})}return t}(e);await m.set(e.id.toString(),t),r.logger.debug("file-download-detection: created",t),await async function(e){var t,n;const a=v.get(e);if(a){try{for(var o,s=i(a);!(o=await s.next()).done;){const e=o.value;r.logger.info("file-download-detection: applying postponed change",e),await y(e)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=s.return)&&await n.call(s)}finally{if(t)throw t.error}}v.delete(e)}}(e.id)}(e)))})),s.default.downloads.onChanged.addListener((e=>{b((()=>y(e)))})));const w=async e=>{var t;const n=await m.get(e);if(!n)return void r.logger.error("file-download-detection: missing download info to send event",{downloadId:e});const{url:i,finalUrl:a,filename:s,fileSize:d}=n,p=u.getTabsManager(),f=await p.getActive();o.processEvent({metadata:{url:null!=i?i:"N/A",fileUrl:null!=a?a:"N/A",fileName:null!=s?s:"N/A",fileSize:null!=d?d:-1},category:c.EventCategory.UserInput,destination:[c.EventDestination.XDR],type:c.EventType.FileDownload,timestamp:new Date,sessionId:null!==(t=null==f?void 0:f.sessionId)&&void 0!==t?t:l.v4(),eventId:l.v4()})}},161:function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.handleFileUploadDetection=void 0;const a=n(1276),r=n(8459),o=n(4458),s=n(5998),c=n(7121),l=n(9249),u=n(1326);function d(e){return e.map((e=>e.name))}function p(e){return e.map((e=>{const{name:t}=e;return i(e,["name"])}))}t.handleFileUploadDetection=async function(e,t){u.logger.info("handleFileUploadDetection: handle file upload detection",e);const{url:n,source:i,files:f,prevented:g,showNotification:h,rootDomain:m,category:v,reportEvent:y}=e;if(!n)return;const b=l.getDomainFromUrl(n);g?await async function(e,t,n,i,l,f,g,h){const{enableUploadPreventionEvents:m,enableUploadPreventionTelemetries:v,enableUploadPreventionToast:y,telemetriesUrlMaxLength:b}=await r.getConfiguration(),w=new Date;if(m){const n=l&&l.length>0?d(null!=l?l:[]):void 0;o.processEvent({category:a.EventCategory.Prevention,type:a.EventType.FileUpload,activity:"File upload blocked",details:n&&n.length>0?`The system blocked an attempt to upload the following file(s) to ${t}: ${n.join(", ")}`:`The system blocked an attempt to upload file(s) to ${t}`,destination:[a.EventDestination.ABS],metadata:{fileNames:n,url:e,domain:t,prevented:!0,rootDomain:f&&f!==t?f:void 0,category:g},timestamp:w,reportEvent:h})}v&&s.processTelemetry({category:a.TelemetryCategory.Prevention,type:a.TelemetryType.FileUpload,metadata:{files:l&&l.length>0?p(null!=l?l:[]):void 0,domain:t,source:n.slice(0,b),rootDomain:f,category:g},timestamp:w}),u.logger.debug("publishFileUploadPrevention: up to decide whether to show the UploadPrevention toast",{enableUploadPreventionToast:y,showNotification:i}),y&&i&&c.showFileUploadPreventedNotificationSafe()}(n,b,i,h,f,m,v,y):await async function(e,t,n,i,c,l){const{enableUploadDetectionEvents:u,enableUploadDetectionTelemetries:f,telemetriesUrlMaxLength:g}=await r.getConfiguration(),h=new Date;if(u){const n=i&&i.length>0?d(null!=i?i:[]):void 0;o.processEvent({category:a.EventCategory.Detection,type:a.EventType.FileUpload,activity:"Successful file upload",details:n&&n.length>0?`User uploaded the following file(s) to ${t}: ${n.join(", ")}`:`User uploaded file(s) to ${t}`,destination:[a.EventDestination.ABS],metadata:{fileNames:n,url:e,domain:t,prevented:!1,category:l},timestamp:h})}f&&s.processTelemetry({category:a.TelemetryCategory.Detection,type:a.TelemetryType.FileUpload,metadata:{files:i&&i.length>0?p(null!=i?i:[]):void 0,domain:t,source:n.slice(0,g),rootDomain:c,category:l},timestamp:h})}(n,b,i,f,m,v),t()}},1113:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(398)),r=n(1276),o=n(611),s=n(4458),c=n(1326),l=i(n(2543)),u=n(9684),d=n(8459),p=n(611),f=n(9103),g=new u.TemporaryMap(void 0);function h(e){const t={kind:r.MessageKind.LoginSubmitted,url:"",usernames:[]},n=g.get(e);if(void 0!==n){c.logger.debug("mergeEventsAndSend: ",e,n.events);for(const e of n.events)t.url||(t.url=e.url),void 0===t.ssoInfo&&(t.ssoInfo=e.ssoInfo),void 0===t.userConsentApproved&&(t.userConsentApproved=e.userConsentApproved),void 0===t.userConfirmed&&(t.userConfirmed=e.userConfirmed),t.usernames=[...t.usernames,...e.usernames];t.usernames=[...new Set(t.usernames)],g.delete(e),async function({url:e,usernames:t,ssoInfo:n,userConsentApproved:i}){var a,o;try{const c=n?function(e){return void 0!==e?r.LoginType.GrantPermissions:r.LoginType.SSO}(i):r.LoginType.Simple,l=f.getTabsManager(),u=await l.getActive();await s.processEvent({metadata:{username:t,loginType:c,provider:null!==(a=null==n?void 0:n.provider)&&void 0!==a?a:r.IdpProvider.Unknown,url:e},category:r.EventCategory.UserInput,type:r.EventType.Login,activity:"User logged in to website",details:`User logged in to ${e}`,timestamp:new Date,sessionId:null!==(o=null==u?void 0:u.sessionId)&&void 0!==o?o:p.v4(),eventId:p.v4()})}catch(e){c.logger.error("sendLoginXdrEvent: ",e)}}(t),function({url:e,usernames:t,ssoInfo:n,userConsentApproved:i,userConfirmed:a},r){const l={eventId:o.v4(),url:e,timestamp:new Date,props:[{usernames:t}]};void 0!==n&&(l.props=[...l.props,{ssoInfo:n}],void 0!==i&&(l.props=[...l.props,{userConsentApproved:i}]),void 0!==a&&(l.props=[...l.props,{userConfirmed:a}])),c.logger.debug("Sending login event",r,l),s.sendLoginEvent(l)}(t,e)}else c.logger.debug("mergeEventsAndSend: no entry for id: ",e)}a.default.runtime.onMessage.addListener(((e,t)=>{var n,i;e.kind===r.MessageKind.LoginSubmitted&&async function(e,t){c.logger.debug("aggregateLoginEvent: ",e,t);let n=g.get(e);if(void 0===n){const{loginVisibilitySendEventWaitMs:t}=await d.getConfiguration();n={debounce:l.default.debounce(h,t,{leading:!1,trailing:!0}),events:new Set},g.set(e,n)}n.events.add(t),n.debounce(e)}(null!==(i=null===(n=t.tab)||void 0===n?void 0:n.id)&&void 0!==i?i:0,e)}))},2176:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(398)),r=n(1276),o=new Set([r.MessageKind.GetPageInfo,r.MessageKind.ChangePageInfo,r.MessageKind.UpdatePageInfo,r.MessageKind.PageInfoChanged,r.MessageKind.DismissNotificationToast,r.MessageKind.ResizeToastWindow]);a.default.runtime.onMessage.addListener(((e,t,n)=>{const{id:i}=t.tab||{};if(void 0!==i&&o.has(e.kind))return a.default.tabs.sendMessage(i,e).then(n),!0}))},4752:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(3642),r=i(n(398)),o=n(1276),s=n(4458),c=n(1326),l=n(8459),u=n(7121),d=n(611),p=n(9103),f=n(5198),g=n(8866);r.default.runtime.onMessage.addListener((e=>{if(e.kind!==o.MessageKind.PasswordDuplicationFound)return;const{currentDomain:t,password:n}=e;!async function(e,t){var n,i;const{enablePasswordReuseDetection:r,enablePasswordDuplicationDetectionEvents:h,passwordDuplicationDetectionEnableToast:m}=await l.getConfiguration();if(!r)return void c.logger.debug("Password reuse detection is disabled.");const v=await f.calculateHashString(t,await g.getInstallationId(),"SHA-256",2);c.logger.debug("Received password duplication detection message",{currentDomain:e,passwordHash:v});const y=a.getPasswordHashesStore();await y.put(v,e),c.logger.debug("Added current domain to domainsForHash",{currentDomain:e});const b=(await y.findMatchingDomains(v)).filter((t=>t!==e));if(0===b.length)return;const w=null!==(i=null===(n=await p.getTabsManager().getActive())||void 0===n?void 0:n.sessionId)&&void 0!==i?i:d.v4();if(c.logger.debug("Processing password duplication event",{currentDomain:e,matchingDomains:b,sessionId:w}),h){const t=b.join(", ");s.processEvent({metadata:{currentDomain:e,duplicateDomains:b},category:o.EventCategory.UserInput,type:o.EventType.PasswordDuplicationFound,details:`User reused password: Current website: "${e}", Other websites: "${t}"`,destination:[o.EventDestination.ABS],sessionId:w,eventId:d.v4(),timestamp:new Date,activity:"User reused password"}),c.logger.debug("Password duplication event processed")}if(m){const t=e.length<=30?e:`${e.slice(0,30)}..`;c.logger.debug("Showing password duplication toast",{displayDomain:t}),u.showPasswordDuplicationNotificationSafe(t)}}(t,n)}))},3642:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPasswordHashesStore=void 0;const i=n(1276);class a extends i.Dexie{constructor(e){super("passwordHashes","[hash+domain], timestamp"),this.options=e}async put(e,t){await this.items.put({hash:e,domain:t,timestamp:Date.now()}),await this.dropOldPasswordEntries()}async findMatchingDomains(e){return(await this.items.where("hash").equals(e).toArray()).map((e=>e.domain))}async dropOldPasswordEntries(){const e=await this.items.count();if(e<=this.options.maxPasswordEntries)return;const t=Math.floor(e*this.options.evictionRatio);await this.items.orderBy("timestamp").limit(t).delete()}}let r;t.getPasswordHashesStore=function(){return r||(r=new a({maxPasswordEntries:1e3,evictionRatio:.2}),r)}},5943:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setProxyConfiguration=void 0;const a=i(n(398)),r=n(8459),o=n(1326);let s;async function c({hostsToProxy:e,proxyEnabled:t,proxyHost:n}){var i;if(!a.default.proxy)return!1;if(!t||!n||0===e.length)return s?(o.logger.info("setProxyConfiguration: unsetting proxy"),await a.default.proxy.settings.clear({scope:"regular"}),s=void 0,!1):(o.logger.info("setProxyConfiguration: proxy was undefined and remained undefined"),!1);if(n===(null==s?void 0:s.proxyHost)&&e.length===(null==s?void 0:s.hostsToProxy.length)&&e.every(((e,t)=>e===(null==s?void 0:s.hostsToProxy[t]))))return o.logger.info("setProxyConfiguration: proxy was defined and remained the same"),!0;const r=e.map((e=>`(host == ${JSON.stringify(e)})`)),c=`\n    function FindProxyForURL(url, host) {\n      if ${1===r.length?r[0]:`(${r.join(" || ")})`}\n        return "${null!==(i=extensionSettings.proxyType)&&void 0!==i?i:"HTTPS"} ${n}";\n      return "DIRECT";\n    }\n  `.trim();o.logger.info("setProxyConfiguration: setting proxy",c);try{await a.default.proxy.settings.set({scope:"regular",value:{mode:"pac_script",pacScript:{data:c,mandatory:!0}}})}catch(e){throw o.logger.error("setProxyConfiguration: Failed to set proxy"),e}return o.logger.info("setProxyConfiguration: Proxy was set successfully"),s={hostsToProxy:e,proxyHost:n},!0}t.setProxyConfiguration=c,a.default.proxy&&a.default.proxy.settings.onChange.addListener((e=>{o.logger.info("proxy.settings.onChange: called",e)})),r.registerGetConfigurationCallback((e=>{(async function({hostsToProxy:e,proxyEnabled:t,proxyHost:n}){await c({hostsToProxy:e,proxyEnabled:t,proxyHost:n})})(e).catch((e=>{o.logger.error("setProxyConfigurationBasedOnExtensionConfiguration: failed",e)}))}))},28:()=>{},9552:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getRequestResourceType=t.getUrlIp=t.getRequestingTabOptions=t.generateRequestInit=void 0;const a=n(1276),r=i(n(398)),o=n(6686),s=i(n(9749)),c=n(5029),l=n(1326),u=new s.default({max:200,ttl:18e5}),d=new s.default({max:200,ttl:18e5}),p=new s.default({max:200,ttl:18e5}),f=["main_frame","sub_frame"];if(r.default.webRequest){r.default.webRequest.onBeforeSendHeaders.addListener((e=>{const t=e.initiator||e.originUrl||e.url;(null==t?void 0:t.startsWith("http"))&&u.set(e.url,e)}),{urls:["<all_urls>"]},["requestHeaders",...a.browserName!==a.BrowserName.Firefox?["extraHeaders"]:[]]),r.default.webRequest.onBeforeRequest.addListener((e=>{const t=e.initiator||e.originUrl||e.url;(null==t?void 0:t.startsWith("http"))&&d.set(e.url,e)}),{urls:["<all_urls>"]},["requestBody"]);for(const e of f)r.default.webRequest.onResponseStarted.addListener((e=>{p.set(e.url,e)}),{urls:["<all_urls>"],types:[e]})}var g;function h(e){const t=u.get(e);if(t)return t;l.logger.warn("request-tracking-svc: Could not find headers record for url",e)}function m(e){const t=d.get(e);if(t)return t;l.logger.warn("request-tracking-svc: Could not find body record for url",e)}t.generateRequestInit=function(e){const{method:t,requestHeaders:n}=u.get(e)||{},i=c.parseMimeType({headers:n}),a=i?o.parseEnumOrUndefined(g,i):void 0,{requestBody:r,tabId:s,frameId:l}=d.get(e)||{},p=function(e,t){if(e){if(e.formData){if(t===g.formData){const t=new FormData;for(const[n,i]of Object.entries(e.formData))t.append(n,i);return t}{const t=[];for(const[n,i]of Object.entries(e.formData))t.push(n+"="+encodeURIComponent(i));return t.join("&")}}return e.raw?(new TextDecoder).decode(e.raw[0].bytes):void 0}}(r,a),f=a===g.formData?function(e){return(null==e?void 0:e.filter((e=>e.name.toLocaleLowerCase()!=="content-type".toLocaleLowerCase())))||[]}(n):n;return{requestInit:{method:t,headers:null==f?void 0:f.map((e=>[e.name,e.value||""])),mode:"cors",credentials:"include",cache:"no-cache",body:p},tabId:s,frameId:l}},function(e){e.formData="multipart/form-data",e.urlEncoded="application/x-www-form-urlencoded"}(g||(g={})),t.getRequestingTabOptions=function(e){const t=h(e),n=m(e),i=(null==t?void 0:t.tabId)||(null==n?void 0:n.tabId);if(i)return{tabId:i,frameId:(null==n?void 0:n.frameId)||(null==n?void 0:n.frameId)}},t.getUrlIp=function(e){const{ip:t}=p.get(e)||{};return t},t.getRequestResourceType=function(e){const{type:t}=h(e)||{type:void 0},{type:n}=m(e)||{type:void 0};return t||n}},4806:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sensitiveDataDetected=t.sensitiveDataDetectionInProgress=t.detectSensitiveData=void 0;const i=n(1276),a=n(1326),r=n(4458),o=n(9249),s=n(7391),c=n(5998),l=n(7121),u=n(8459),d=n(850);t.detectSensitiveData=async function(e,t){var n,i;if(a.logger.debug("sensitive data detection: handling detect sensitive data message",e),!e.input)return void t({sensitiveDataTypes:[],input:e.input});const r=await s.detectSensitiveData(e.input);a.logger.debug("sensitive data detection: detect sensitive data message response",e.input,r),t({sensitiveDataTypes:null!==(n=null==r?void 0:r.sensitiveDataTypes)&&void 0!==n?n:[],ignore:null!==(i=null==r?void 0:r.ignore)&&void 0!==i&&i,input:e.input})},t.sensitiveDataDetectionInProgress=function(){a.logger.debug("sensitive data detection: handling sensitive data detection inprogress message"),l.showSensitiveDataDetectionProgressNotificationSafe()},t.sensitiveDataDetected=async function(e){a.logger.debug("sensitive data detection: handling sensitive data detected message",e);const{url:t,customMessage:n,sensitiveDataTypes:s,rootDomain:p,category:f,mode:g,reportEvent:h}=e;if(!t)return;const m=null==n?void 0:n.customMessageLink,v=new Date,y=o.getDomainFromUrl(t),{entityTypeToSensitiveDataType:b,telemetriesUrlMaxLength:w}=await u.getConfiguration(),S=s.map((e=>{const t=b[e];if(t)return t;a.logger.warn("sensitive data detection: label not found for entity type.",{type:e})})).filter(d.isDefined).join(", ");if(g!==i.SensitiveDataDetectionMode.Disabled){switch(g!==i.SensitiveDataDetectionMode.Silent&&l.showSensitiveDataIdentificationNotificationSafe(S,m),g){case i.SensitiveDataDetectionMode.Warn:case i.SensitiveDataDetectionMode.Silent:r.processEvent({category:i.EventCategory.Detection,type:i.EventType.SensitiveDataInput,timestamp:v,metadata:{url:t,rootDomain:p,domain:y,category:f,sensitiveDataTypes:s,prevented:!1},activity:"Sensitive data input",details:`User entered data that matches [${S}] patterns in the following website: ${t}`,destination:[i.EventDestination.ABS],reportEvent:h});break;case i.SensitiveDataDetectionMode.Block:r.processEvent({category:i.EventCategory.Prevention,type:i.EventType.SensitiveDataInput,timestamp:v,metadata:{url:t,rootDomain:p,domain:y,category:f,sensitiveDataTypes:s,prevented:!0},activity:"Sensitive data input",details:`User blocked entering data that matched ${S} patterns in the following website: ${t}`,destination:[i.EventDestination.ABS],reportEvent:h})}c.processTelemetry({category:i.TelemetryCategory.Detection,type:i.TelemetryType.SensitiveDataInput,timestamp:v,metadata:{url:t.slice(0,w),category:f,sensitiveDataTypes:s,mode:g}})}}},5020:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(398)),r=n(1276),o=n(1326),s=n(8459),c=n(4449),l=n(8767),u=i(n(8875)),d=i(n(7332)),p=n(772);async function f(e,t){var n;const i=null!==(n=t.id)&&void 0!==n?n:t;if(!i)return;const f=await u.default.get(i),g=Object.assign(Object.assign({},f),t);await u.default.set(i,g);const h=g.shortName||g.name;if(await d.default({state:e,extensionId:i,activity:`3rd party extension ${e}`,details:`"${h}" was ${e}`}),e===r.ThirdPartyExtensionsState.Uninstalled&&await u.default.delete(i),e===r.ThirdPartyExtensionsState.Enabled&&i!==a.default.runtime.id){const e=await s.getConfiguration(),{thirdPartyExtensionsImplementationVersion:t}=e;switch(t){case 1:{const[e]=await c.shouldEnforceExtensions([i]);e&&c.enforceExtension({extensionId:i,isSilent:!1,disablingReason:e.disablingScenarioName,ruleName:e.ruleName,reportEvents:e.reportEvents});break}case 2:{const t=await l.determineEnforcmentAction([g],e);for(const n of t)l.enforceExtension(n,!1,e);break}default:o.logger.error("third-party-extensions-service(onChange): unsupported impl version",{version:t})}}p.updateABSConsoleDebounced({updateRemoteDeploymentInformation:!1,updateUserDisplayName:!1})}const g=f.bind(void 0,r.ThirdPartyExtensionsState.Installed),h=f.bind(void 0,r.ThirdPartyExtensionsState.Uninstalled),m=f.bind(void 0,r.ThirdPartyExtensionsState.Enabled),v=f.bind(void 0,r.ThirdPartyExtensionsState.Disabled);if(a.default.management&&r.browserName!==r.BrowserName.Firefox){let e=!1;o.logger.info("third-party-extensions-service: setting up"),s.registerGetConfigurationCallback((async t=>{try{if(o.logger.debug("third-party-extensions-service: configuration update",{version:t.thirdPartyExtensionsImplementationVersion}),-1===t.thirdPartyExtensionsImplementationVersion)return void(e&&(o.logger.info("third-party-extensions-service: unregistering handlers"),a.default.management.onInstalled.removeListener(g),a.default.management.onUninstalled.removeListener(h),a.default.management.onEnabled.removeListener(m),a.default.management.onDisabled.removeListener(v),e=!1));e||(o.logger.info("third-party-extensions-service: registering handlers"),await async function(){const e=await a.default.management.getAll();await Promise.all(e.map((e=>u.default.set(e.id,e))))}(),a.default.management.onInstalled.addListener(g),a.default.management.onUninstalled.addListener(h),a.default.management.onEnabled.addListener(m),a.default.management.onDisabled.addListener(v),e=!0),await async function(e){switch(e.thirdPartyExtensionsImplementationVersion){case 1:return void await c.disableNonPermittedExtensions();case 2:return await l.disableNonPermittedExtensions(e);default:o.logger.error("third-party-extensions-service: Unsupported impl version number",{version:e.thirdPartyExtensionsImplementationVersion})}}(t)}catch(e){o.logger.error("third-party-extensions-service: config update handler failed with error",{error:e})}}),[s.ConfigurationEvent.Updated,s.ConfigurationEvent.NotModified])}else o.logger.info("third-party-extensions-service: unsupported")},8875:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=new(n(3097).LimitedCache)("third-party-extensions-cache",void 0,200,void 0);t.default=i},522:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldEnforceExtensionsByRules=t.getRiskLevelByScore=void 0;const i=n(1276),a=n(1326),r=n(6973),o=n(850),s=n(1477),c=n(6366),l=n(8995);function u(e,{highLevelExtensionRiskScoreMaxValue:t,mediumLevelExtensionRiskScoreMaxValue:n}){return o.isDefined(e)?Number.isFinite(e)?t>=e?"high":n>=e?"medium":"low":"undetermined":"no-score"}function d(e,t,n,i){const r=e.map((e=>{const r=function(e,t,n,i){const r=u(n,i);switch(e){case"is":case"isOneOf":return t.includes(r);case"isNot":case"isNotOneOf":return!t.includes(r);default:return a.logger.warn("getRiskLevelFilterByOperator: Unsupported operator",e),!1}}(t,n,e.rate,i);return a.logger.debug("getFilteredExtensionsByRiskLevelCondition: filtered",{extensionData:e,result:r,operator:t,values:n}),{extensionData:e,result:r}}));return r.filter((({result:e})=>e)).map((({extensionData:e})=>e.extension))}function p(e,t,n,i){let r;switch(t.type){case"extensionId":e=function(e,t){switch(t.operator){case"equals":return e.filter((e=>e.id===t.value));case"in":return e.filter((e=>t.values.includes(e.id)));default:return a.logger.warn("filterExtensionsByExtensionIdCondition: Unsupported operator",t),[]}}(e,t),r="BlockList";break;case"riskScore":e=function(e,t,n){return e.filter((({id:e})=>{var i,r;return function(e,t,n){switch(t){case"equals":return e===n;case"notEquals":return e!==n;case"greaterThan":return e>n;case"greaterThanOrEqual":return e>=n;case"lessThan":return e<n;case"lessThanOrEqual":return e<=n;default:return a.logger.warn("getFilteredExtensionIdByRiskScoreCondition: Unsupported operator",t),!1}}(null!==(r=null===(i=t.get(e))||void 0===i?void 0:i.spinAiTrustRateParsed)&&void 0!==r?r:Number.NaN,n.operator,n.value)}))}(e,n,t),r="RiskScore";break;case"riskLevel":e=function(e,t,n,i){const r=e.map((e=>{var n;return{extension:e,rate:null===(n=t.get(e.id))||void 0===n?void 0:n.spinAiTrustRateParsed}}));switch(n.operator){case"is":case"isNot":{const e=l.tpeRiskLevelFromExtensionRiskLevel(n.value);return d(r,n.operator,[e],i)}case"isOneOf":case"isNotOneOf":{const e=n.values.map((e=>l.tpeRiskLevelFromExtensionRiskLevel(e)));return d(r,n.operator,e,i)}default:return a.logger.warn("filterExtensionsByRiskLevelCondition: Unsupported operator",n.operator),[]}}(e,n,t,i),r="RiskScore";break;case"permissions":r="ExtensionPermissions",e=function(e,t){return e.filter((n=>o.isDefined(n.permissions)?n.permissions.some((e=>t.values.includes(e)===("hasAllOf"!==t.operator)))===("hasOneOf"===t.operator):(a.logger.warn("extension-rules: extension do not have permissions",e),"hasNonOf"===t.operator)))}(e,t);break;default:return void a.logger.warn("filterExtensionsByCondition: Unsupported condition type",t)}if(0!==e.length)return{extensions:e,scenarioName:r};a.logger.debug("filterExtensionsByCondition: No extensions left after filtering",t)}function f(e,t,n,i){let a;for(const r of t){const t=p(e,r,n,i);if(!t)return;null!=a||(a=t.scenarioName),a!==t.scenarioName&&(a="MultipleConditions"),e=t.extensions}if(0!==e.length&&o.isDefined(a))return{extensions:e,senarioName:a}}t.getRiskLevelByScore=u;const g=(e,t,n)=>`The “${t}” extension was disabled as it meets the conditions of the “${n}” rule. Extension ID: ${e}`;t.shouldEnforceExtensionsByRules=async function(e,t){var n;const l=[],{thirdPartyExtensionsEnforcementRules:u,thirdPartyExtensionRulesIgnoreConditionType:d}=t,p=await r.scanExtensions({extensions:e.filter((({updateUrl:e})=>o.isDefined(e)))}),h=new Map(p.map((e=>[e.extensionKey.id,e.result]))),m=new Map(e.map((e=>[e.id,e])));a.logger.debug("tpe-enforcement-rules: start",{extensions:e,thirdPartyExtensionsEnforcementRules:u});const v=u.filter((e=>!e.conditions.some((e=>d.includes(e.type)))));for(const e of v){const{action:r,conditions:o,name:u,reportEvents:d}=e;if(0===o.length){a.logger.warn("shouldEnforceExtensions: Rule has no conditions",e);continue}if(!i.tpeEnforcmentRuleActions.includes(r)){a.logger.warn("shouldEnforceExtensions: Rule has invalid action",e);continue}const p=f([...m.values()],o,h,t);if(a.logger.debug("tpe-enforcement-rules: Rule executed",{decision:p,rule:e}),p)for(const e of p.extensions){const t=c.getExtensionKey(e),i=null!==(n=e.shortName)&&void 0!==n?n:e.name;m.delete(e.id),l.push({extensionKey:t,ruleName:u,scenarioName:p.senarioName,action:r,activityEventDescription:g(e.id,i,u),showBlockPage:s.showDisabledExtensionBlockPage.bind(void 0,i),reportEvents:d})}}return[l,[...m.values()]]}},8767:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.disableNonPermittedExtensions=t.enforceExtension=t.determineEnforcmentAction=void 0;const a=i(n(398)),r=n(1276),o=n(1326),s=i(n(7332)),c=n(522),l=n(1599),u=n(2487),d=n(6345),p=[new u.LegacyBlockListScenario,new l.LegacyAllowListScenario,new d.LegacyRiskScore];async function f(e,t){if(e.length<=0)return[];o.logger.debug("determineEnforcmentAction: reviewing installed extensions",{extensions:e});const[n,i]=await c.shouldEnforceExtensionsByRules(e,t),a=new Map(i.map((e=>[e.id,e])));for(const e of p){const i=await e.runScenario([...a.values()],t);if(i.wasEnabled){o.logger.debug("determineEnforcmentAction: senario executed",{disablingScenario:e,scenarioResult:i,extensionsMap:a});for(const e of i.enforcementItems)a.delete(e.extensionKey.id);n.push(...i.enforcementItems)}}return n}async function g(e,t=!1,n){const{ruleName:i,extensionKey:c,activityEventDescription:l,action:u,reportEvents:d}=e,{thirdPartyExtensionsEnforcement:p}=n;if(!p)return;if("allow"===u)return;const f=await async function(e){try{return await a.default.management.setEnabled(e,!1),!0}catch(e){return o.logger.info("enforceExtension: Disabling extension failed with an error",e),!1}}(c.id);t||await e.showBlockPage(f),await s.default({state:f?r.ThirdPartyExtensionsState.Disabled:r.ThirdPartyExtensionsState.Enabled,extensionId:c.id,activity:f?"Extension disabled by policy":"Failed to disable extension",details:l,additionalDetails:{extensionStore:c.store,isDisabledByPolicy:f,ruleName:i},reportEvents:d})}t.determineEnforcmentAction=f,t.enforceExtension=g,t.disableNonPermittedExtensions=async function(e){o.logger.info("disableNonPermittedExtensions: starts");const t=(await a.default.management.getAll()).filter((({enabled:e,id:t})=>e&&t!==a.default.runtime.id)),n=await f(t,e);n.length>0&&await Promise.all(n.map((async t=>await g(t,!0,e))))}},6366:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExtensionKey=void 0;const i=n(4880);t.getExtensionKey=function(e){return{id:"id"in e?e.id:e.extensionKey,store:i.getStoreByUpdateUrl(e.updateUrl)}}},4880:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreByUpdateUrl=t.ExtensionStore=void 0,function(e){e.ChromeWebStore="Chrome Web Store",e.EdgeAddons="Edge Add-ons",e.Firefox="Firefox Browser Add-Ons"}(n=t.ExtensionStore||(t.ExtensionStore={})),t.getStoreByUpdateUrl=function(e){switch(e){case"https://clients2.google.com/service/update2/crx":case"http://clients2.google.com/service/update2/crx":return n.ChromeWebStore;case"https://edge.microsoft.com/extensionwebstorebase/v1/crx":return n.EdgeAddons;default:return}}},1599:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyAllowListScenario=void 0;const i=n(1477),a=n(4880);class r{runScenario(e,t){return Promise.resolve(this.runScenarioSync(e,t))}runScenarioSync(e,t){const{thirdPartyExtensionsEnforcementByAllowList:n,allowedThirdPartyExtensions:o}=t;return n?{wasEnabled:!0,enforcementItems:e.filter((({id:e})=>o.includes(e))).map((({id:e,updateUrl:t,name:n,shortName:o})=>{const s=null!=o?o:n;return{ruleName:r.ruleName,scenarioName:r.scenarioName,extensionKey:{id:e,store:a.getStoreByUpdateUrl(t)},action:"allow",showBlockPage:i.showDisabledExtensionBlockPage.bind(void 0,s),activityEventDescription:`The "${s}" extension is included in the extensions allow list. Extension ID: ${e}`}}))}:{wasEnabled:!1}}}t.LegacyAllowListScenario=r,r.ruleName="Legacy AllowList (deprecated)",r.scenarioName="AlockList"},2487:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyBlockListScenario=void 0;const i=n(1477),a=n(4880);class r{runScenario(e,t){const{thirdPartyExtensionsEnforcement:n,disabledExtensions:o}=t;return n?Promise.resolve({wasEnabled:!0,enforcementItems:e.filter((({id:e})=>o.includes(e))).map((({id:e,updateUrl:t,name:n,shortName:o})=>{const s=null!=o?o:n;return{ruleName:r.ruleName,scenarioName:r.scenarioName,extensionKey:{id:e,store:a.getStoreByUpdateUrl(t)},action:"disable",showBlockPage:i.showDisabledExtensionBlockPage.bind(void 0,s),activityEventDescription:`The "${s}" extension is included in the extensions block list. Extension ID: ${e}`}}))}):Promise.resolve({wasEnabled:!1})}}t.LegacyBlockListScenario=r,r.ruleName="Legacy BlockList (deprecated)",r.scenarioName="BlockList"},1447:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldEnforceExtensionsByRules=void 0;const i=n(1276),a=n(8459),r=n(1692),o=n(1326),s=n(8995);async function c(e,t,n){const i=await async function(e){return e?s.getRiskLevelByScore(Number.parseFloat(e)):"no-score"}(n);switch(e){case"is":case"isOneOf":return t.includes(i);case"isNot":case"isNotOneOf":return!t.includes(i);default:return o.logger.warn("getRiskLevelFilterByOperator: Unsupported operator",e),!1}}async function l(e,t,n){return(await Promise.all(e.map((async e=>({extensionData:e,result:await c(t,n,e.spinAiTrustRate)}))))).filter((({result:e})=>e)).map((({extensionData:e})=>e)).map((({id:e})=>e))}async function u(e,t,n,i){const a=[],o=(await r.getThirdPartyExtensionsByExtensionIds(e)).map((e=>({spinAiTrustRate:e.spinAiTrustRate,id:e.id}))),s=await l(o,n,i);if(a.push(...s),!t){const t=(await r.getThirdPartyExtensionsByExtensionIdsAndRiskScoreExistance(e,!1)).map((e=>({id:e}))),o=await l(t,n,i);a.push(...o)}return a}async function d(e,t){let n;switch(t.type){case"extensionId":e=function(e,t){switch(t.operator){case"equals":return e.filter((e=>e===t.value));case"in":return e.filter((e=>t.values.includes(e)));default:return o.logger.warn("filterExtensionsByExtensionIdCondition: Unsupported operator",t),[]}}(e,t),n=r.DisablingScenarioName.BlockList;break;case"riskScore":e=await async function(e,t){return(await r.getThirdPartyExtensionsByExtensionIds(e)).filter((e=>function(e,t,n){switch(t){case"equals":return e===n;case"notEquals":return e!==n;case"greaterThan":return e>n;case"greaterThanOrEqual":return e>=n;case"lessThan":return e<n;case"lessThanOrEqual":return e<=n;default:return o.logger.warn("getFilteredExtensionIdByRiskScoreCondition: Unsupported operator",t),!1}}(Number.parseFloat(e.spinAiTrustRate),t.operator,t.value))).map((({id:e})=>e))}(e,t),n=r.DisablingScenarioName.RiskScore;break;case"riskLevel":e=await async function(e,t){switch(t.operator){case"is":case"isNot":return await u(e,s.isNoScore(t.value),t.operator,[s.tpeRiskLevelFromExtensionRiskLevel(t.value)]);case"isOneOf":case"isNotOneOf":return await u(e,!t.values.some((e=>s.isNoScore(e))),t.operator,t.values.map((e=>s.tpeRiskLevelFromExtensionRiskLevel(e))));default:return o.logger.warn("filterExtensionsByRiskLevelCondition: Unsupported operator",t.operator),[]}}(e,t),n=r.DisablingScenarioName.RiskScore;break;default:return void o.logger.warn("filterExtensionsByCondition: Unsupported condition type",t)}if(0!==e.length)return{extensionIds:e,disablingScenario:n};o.logger.debug("filterExtensionsByCondition: No extensions left after filtering",t)}async function p(e,t){let n=e;const i=[];for(const e of t){const t=await d(n,e);if(!t)return;n=t.extensionIds,i.push(t.disablingScenario)}if(0!==n.length&&0!==i.length)return{extensionIds:n,disablingScenarioName:i.length>1?r.DisablingScenarioName.MultipleConditions:i[0]}}t.shouldEnforceExtensionsByRules=async function(e){const t=[],n=[r.ownExtensionId],{thirdPartyExtensionsEnforcementRules:s}=await a.getConfiguration();for(const a of s){const{action:r,conditions:s,name:c,reportEvents:l}=a;if(0===s.length){o.logger.warn("shouldEnforceExtensions: Rule has no conditions",a);continue}if(!i.tpeEnforcmentRuleActions.includes(r)){o.logger.warn("shouldEnforceExtensions: Rule has invalid action",a);continue}const u=e.filter((e=>!t.some((t=>t.extensionId===e)))).filter((e=>!n.includes(e)));if(0===u.length)break;const d=await p(u,s);if(d)if("allow"===r)n.push(...d.extensionIds);else{const e=d.extensionIds.map((e=>({action:r,extensionId:e,disablingScenarioName:d.disablingScenarioName,ruleName:c,reportEvents:l})));t.push(...e)}}return{extensionsToEnforce:t,extensionsNotToEnforce:n}}},4449:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.disableNonPermittedExtensions=t.enforceExtension=t.shouldEnforceExtensions=void 0;const a=i(n(398)),r=n(1276),o=n(8459),s=n(1326),c=n(1477),l=i(n(7332)),u=n(3685),d=n(1692),p=n(1447),f=[{featureFlagName:"thirdPartyExtensionsEnforcement",ruleName:"Legacy BlockList (deprecated)",shouldDisableMultipleBySpecificScenario:async e=>{const{disabledExtensions:t}=await o.getConfiguration();return{extensionsToDisable:e.filter((e=>t.includes(e))),disablingScenarioName:d.DisablingScenarioName.BlockList}}},{featureFlagName:"thirdPartyExtensionsEnforcementByAllowList",ruleName:"Legacy AllowList (deprecated)",shouldDisableMultipleBySpecificScenario:async e=>{const{allowedThirdPartyExtensions:t}=await o.getConfiguration();return{disablingScenarioName:void 0,extensionsNotToDisable:e.filter((e=>t.includes(e)))}}},{featureFlagName:"thirdPartyExtensionsEnforcementByRiskScore",ruleName:"Legacy Risk Score (deprecated)",shouldDisableMultipleBySpecificScenario:u.shouldDisableMultipleBySpecificScenario}],g={[d.DisablingScenarioName.BlockList]:{showBlockPage:({extensionDisplayName:e,isSuccessfulDisabling:t})=>c.showDisabledExtensionBlockPage(e,t),getActivityEventDescription:(e,t)=>Promise.resolve(`The "${t}" extension is included in the extensions block list. Extension ID: ${e}`)},[d.DisablingScenarioName.MultipleConditions]:{showBlockPage:({extensionDisplayName:e,isSuccessfulDisabling:t})=>c.showDisabledExtensionBlockPage(e,t),getActivityEventDescription:(e,t,n)=>Promise.resolve(`The "${t}" extension matches rule "${n}". Extension ID: ${e}`)},[d.DisablingScenarioName.RiskScore]:{showBlockPage:d.showBlockPage,getActivityEventDescription:d.getActivityEventDescription}};async function h(e){const{extensionsNotToEnforce:t,extensionsToEnforce:n}=await p.shouldEnforceExtensionsByRules(e),i=await o.getConfiguration();for(const a of f){const{featureFlagName:r,ruleName:o,shouldDisableMultipleBySpecificScenario:s}=a;if(r&&!i[r])continue;const c=e.filter((e=>!n.some((t=>t.extensionId===e)))).filter((e=>!t.includes(e))),l=await s(c);void 0!==l.disablingScenarioName?n.push(...l.extensionsToDisable.map((e=>({action:"disable",extensionId:e,disablingScenarioName:l.disablingScenarioName,ruleName:o})))):t.push(...l.extensionsNotToDisable)}return n}async function m({extensionId:e,isSilent:t,disablingReason:n,ruleName:i,reportEvents:c}){const{thirdPartyExtensionsEnforcement:u}=await o.getConfiguration();if(!u)return;const d=(await a.default.management.getAll()).find((({id:t})=>t===e)),p=(null==d?void 0:d.shortName)||(null==d?void 0:d.name);let f=!0;try{if(!d)return void s.logger.warn("enforceExtension: Extension to disable wasn't found locally on list of local extensions",{extensionId:e});await a.default.management.setEnabled(e,!1)}catch(e){s.logger.info("enforceExtension: Could not disable extension",e),f=!1}const{showBlockPage:h,getActivityEventDescription:m}=g[n];t||h({extensionId:e,extensionDisplayName:p,isSuccessfulDisabling:f});const v=await m(e,p,i);await l.default(Object.assign(Object.assign({state:f?r.ThirdPartyExtensionsState.Disabled:r.ThirdPartyExtensionsState.Enabled,extensionId:e},f&&{additionalDetails:{isDisabledByPolicy:!0,ruleName:i}}),{activity:f?"Extension disabled by policy":"Failed to disable extension",details:v,reportEvents:c}))}t.shouldEnforceExtensions=h,t.enforceExtension=m,t.disableNonPermittedExtensions=async function(){const e=(await a.default.management.getAll()).filter((({enabled:e})=>e)).map((({id:e})=>e)),t=await h(e);Promise.all(t.map((({extensionId:e,disablingScenarioName:t,ruleName:n})=>({extensionId:e,isSilent:!0,disablingReason:t,ruleName:n}))).map(m))}},6345:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyRiskScore=t.getRiskLevelByRiskScore=t.getExtensionsRiskScoreLevelsMap=void 0;const i=n(1276),a=n(1477),r=n(850),o=n(6973),s=n(6366),c=n(1326);t.getExtensionsRiskScoreLevelsMap=e=>{const{highLevelExtensionRiskScoreMaxValue:t,mediumLevelExtensionRiskScoreMaxValue:n}=e;return{[i.ExtensionsRiskScoreLevel.High]:t,[i.ExtensionsRiskScoreLevel.Medium]:n}},t.getRiskLevelByRiskScore=(e,n)=>{const a=t.getExtensionsRiskScoreLevelsMap(n);return Number.isFinite(e)?e<=a.High?i.ExtensionsRiskScoreDisplayableLevel.High:e<=a.Medium?i.ExtensionsRiskScoreDisplayableLevel.Medium:i.ExtensionsRiskScoreDisplayableLevel.Low:i.ExtensionsRiskScoreDisplayableLevel.Undetermined};class l{constructor(e,t,n,i){this.extensionKey=e,this.activityEventDescription=t,this.displayName=n,this.riskLevel=i,this.scenarioName="Legacy Risk Score (deprecated)",this.ruleName="RiskScore",this.action="disable"}async showBlockPage(e){await a.showDisabledExtensionDueToRiskScoreBlockPage(this.displayName,this.riskLevel,e)}}t.LegacyRiskScore=class{async runScenario(e,n){if(!n.thirdPartyExtensionsEnforcementByRiskScore)return{wasEnabled:!1};const{extensionsRiskScoreLevel:a}=n;if(a===i.ExtensionsRiskScoreLevel.None)return{wasEnabled:!0,enforcementItems:[]};if(a===i.ExtensionsRiskScoreLevel.All)return function(e){return{wasEnabled:!0,enforcementItems:e.map((e=>{const{name:t,shortName:n}=e,i=null!=n?n:t;return new l(s.getExtensionKey(e),function(e){return`The extension ${e} was disabled by Legacy Risk Score rule: Disabled extensions risk level is set to 'All'`}(i),i)}))}}(e);const u=t.getExtensionsRiskScoreLevelsMap(n)[a],d=e.filter((e=>r.isDefined(e.updateUrl)));return{wasEnabled:!0,enforcementItems:(await o.scanExtensions({extensions:d.filter((e=>r.isDefined(e.updateUrl)))})).filter((({result:e})=>Number.isFinite(e.spinAiTrustRateParsed)&&e.spinAiTrustRateParsed<=u)).map((e=>Object.assign(Object.assign({},e),{details:d.find((t=>t.id===e.extensionKey.id))}))).map((({result:i,extensionKey:a,details:o})=>{if(!r.isDefined(o))return void c.logger.error("legacy-risk-score: Scanned extension details are undefined.",{result:i,extensionKey:a,extensions:e});const{name:s,shortName:u}=o,d=null!=u?u:s,p=`The "${d}" extension is not permitted by risk score. Extension risk score:`,f=t.getRiskLevelByRiskScore(i.spinAiTrustRateParsed,n);return new l(a,`${p} ${f} (${i.spinAiTrustRate})`,d,f)})).filter((e=>r.isDefined(e)))}}}},8995:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNoScore=t.tpeRiskLevelFromExtensionRiskLevel=t.getRiskLevelByScore=t.getRiskLevelByRiskScore=t.getExtensionsRiskScoreLevelsMap=void 0;const i=n(1276),a=n(8459),r=n(7244);t.getExtensionsRiskScoreLevelsMap=async()=>{const{highLevelExtensionRiskScoreMaxValue:e,mediumLevelExtensionRiskScoreMaxValue:t}=await a.getConfiguration();return{[i.ExtensionsRiskScoreLevel.High]:e,[i.ExtensionsRiskScoreLevel.Medium]:t}},t.getRiskLevelByRiskScore=async e=>{const n=await t.getExtensionsRiskScoreLevelsMap();return e<=n.High?i.ExtensionsRiskScoreDisplayableLevel.High:e<=n.Medium?i.ExtensionsRiskScoreDisplayableLevel.Medium:i.ExtensionsRiskScoreDisplayableLevel.Low},t.getRiskLevelByScore=async function(e){const n=await t.getExtensionsRiskScoreLevelsMap();return Number.isFinite(e)?n.High>=e?"high":n.Medium>=e?"medium":"low":"undetermined"};const o={[i.ExtensionsRiskLevel.High]:"high",[i.ExtensionsRiskLevel.Medium]:"medium",[i.ExtensionsRiskLevel.Low]:"low",[i.ExtensionsRiskLevel.NoScore]:"no-score"};t.tpeRiskLevelFromExtensionRiskLevel=function(e){return Object.keys(o).includes(e)?o[e]:r.includes(i.tpeRiskLevels,e)?e:"undetermined"};const s=["no-score",i.ExtensionsRiskLevel.NoScore];t.isNoScore=r.includes.bind(void 0,s)},3685:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldDisableMultipleBySpecificScenario=void 0;const i=n(1276),a=n(8995),r=n(8459),o=n(1692);t.shouldDisableMultipleBySpecificScenario=async e=>{const{extensionsRiskScoreLevel:t}=await r.getConfiguration();if(t===i.ExtensionsRiskScoreLevel.None)return{extensionsToDisable:[],disablingScenarioName:o.DisablingScenarioName.RiskScore};const n=e.filter((e=>e!==o.ownExtensionId));if(t===i.ExtensionsRiskScoreLevel.All)return{extensionsToDisable:n,disablingScenarioName:o.DisablingScenarioName.RiskScore};const s=await a.getExtensionsRiskScoreLevelsMap(),c=await o.getThirdPartyExtensionsByExtensionIds(n);return 0===c.length?{extensionsToDisable:[],disablingScenarioName:o.DisablingScenarioName.RiskScore}:{extensionsToDisable:c.filter((e=>Number.parseFloat(e.spinAiTrustRate)<=s[t])).map((({id:e})=>e)),disablingScenarioName:o.DisablingScenarioName.RiskScore}}},6973:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scanExtensions=void 0;const i=n(3017),a=n(3566),r=n(1326);class o extends Error{constructor(e,t,n){super(e),this.scanRequest=t,this.response=n}}t.scanExtensions=async e=>{try{const t=await i.hmcFetchPost("third-party-extensions/scan",e);if(t.status!==a.HttpStatusCode.Ok)throw new o("Scan respond in non 200 OK status",e,t);const n=await t.json();return r.logger.debug("scanExtensions: scan reply from server",{results:n}),n.map((({extensionKey:e,result:t})=>({extensionKey:e,result:Object.assign(Object.assign({},t),{spinAiTrustRateParsed:Number.parseFloat(t.spinAiTrustRate)})})))}catch(e){return r.logger.error("Failed to get HMC third party extensions",e),[]}}},1912:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scanExtensions=void 0;const i=n(3017),a=n(3566),r=n(1326);t.scanExtensions=async e=>{const t=await(async e=>{try{return await i.hmcFetchGet("third-party-extensions",{queryParams:{extension_ids:e.join(",")}})}catch(e){r.logger.error("Failed to get HMC third party extensions",e)}})(e);if(t){if(a.isStatusOk(t.status))return await t.json();r.logger.warn("scanExtensions: Failed to get risk scores for extensions",{extensionIds:e})}}},7332:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(398)),r=n(1276),o=i(n(8875)),s=n(4458),c=n(8459),l=n(1326),u=a.default.runtime.id;t.default=async function({state:e,extensionId:t,additionalDetails:n={},activity:i,details:a,reportEvents:d}){const{enableThirdPartyExtensionsEvents:p}=await c.getConfiguration();if(!p)return;const f=await o.default.get(t);f?f.id!==u&&s.processEvent({metadata:{state:e,details:Object.assign(Object.assign({},f),n)},category:r.EventCategory.Detection,type:r.EventType.ThirdPartyExtensionsChange,timestamp:new Date,activity:i,details:a,destination:[r.EventDestination.ABS],reportEvent:d}):l.logger.warn("sendThirdPartyExtensionEvent: Extension details weren't found",{extensionId:t})}},1692:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getActivityEventDescription=t.showBlockPage=t.getThirdPartyExtensionsByExtensionIds=t.getThirdPartyExtensionsByExtensionIdsV2=t.getThirdPartyExtensionsByExtensionIdsV1=t.getThirdPartyExtensionsByExtensionIdsAndRiskScoreExistance=t.ownExtensionId=t.DisablingScenarioName=void 0;const a=i(n(398)),r=i(n(8875)),o=n(3566),s=n(850),c=n(1912),l=n(6973),u=n(8995),d=n(1477),p=n(8459);var f;(f=t.DisablingScenarioName||(t.DisablingScenarioName={})).BlockList="BlockList",f.MultipleConditions="MultipleConditions",f.RiskScore="RiskScore",t.ownExtensionId=a.default.runtime.id;const g=new Set(["https://clients2.google.com/service/update2/crx","http://clients2.google.com/service/update2/crx"]),h=async e=>{const t=await r.default.get(e);return g.has((null==t?void 0:t.updateUrl)||"")};async function m(e,n=!0){const i=e.filter((e=>e!==t.ownExtensionId)),a=await Promise.all(i.map((async e=>({extensionId:e,isChromeExtension:await h(e)}))));return n?a.filter((({isChromeExtension:e})=>e)).map((({extensionId:e})=>e)):a.filter((({isChromeExtension:e})=>!e)).map((({extensionId:e})=>e))}async function v(e){const t=await m(e);if(0===t.length)return[];const n=await c.scanExtensions(t);return n?n.map(((e,n)=>Object.assign(Object.assign({},e),{id:t[n]}))).filter((({data:e,status:t})=>{if(t&&t===o.HttpStatusCode.Ok)return e})).filter(s.isDefined).map((({data:e,id:t})=>Object.assign(Object.assign({},e),{id:t}))):[]}async function y(e){const t=await m(e),n=await Promise.all(t.map((e=>r.default.get(e))));return(await l.scanExtensions({extensions:n.filter((e=>s.isDefined(e)&&s.isDefined(e.updateUrl))).map((e=>{if(!s.isDefined(e)||!s.isDefined(e.updateUrl))throw new Error("Unreachable code");return{id:e.id,updateUrl:e.updateUrl}}))})).map((e=>Object.assign(Object.assign({},e.result),{id:e.extensionKey.id})))}t.getThirdPartyExtensionsByExtensionIdsAndRiskScoreExistance=m,t.getThirdPartyExtensionsByExtensionIdsV1=v,t.getThirdPartyExtensionsByExtensionIdsV2=y,t.getThirdPartyExtensionsByExtensionIds=async function(e){const{thirdPartyExtensionsScanApiVersion:t}=await p.getConfiguration();switch(t){case 1:return v(e);case 2:return y(e);default:throw new Error("Unsupported Version")}},t.showBlockPage=async({extensionId:e,extensionDisplayName:t,isSuccessfulDisabling:n})=>{var i;let a;const r=await c.scanExtensions([e]);if(r&&r.length>0&&(null===(i=r[0])||void 0===i?void 0:i.status)===o.HttpStatusCode.Ok){const e=Number.parseFloat(r[0].data.spinAiTrustRate);a=await u.getRiskLevelByRiskScore(e)}d.showDisabledExtensionDueToRiskScoreBlockPage(t,a,n)},t.getActivityEventDescription=async(e,t)=>{var n;const i=`The "${t}" extension is not permitted by risk score. Extension risk score:`,a=await c.scanExtensions([e]);if(a&&a.length>0&&(null===(n=a[0])||void 0===n?void 0:n.status)===o.HttpStatusCode.Ok){const e=Number.parseFloat(a[0].data.spinAiTrustRate);return`${i} ${await u.getRiskLevelByRiskScore(e)} (${e})`}return`${i} N/A`}},5690:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(398)),r=n(8459),o=n(6860),s=n(1311),c=n(8657),l=n(9103),u=n(7904),d=n(4882),p=n(2039),f=n(1326),g=n(9249),h=n(5949);async function m(e,t){if(!await c.isSignedOut())try{const{tabId:n,url:i}=e,a=l.getTabsManager(),c=a.getTabPlimit(n),m=g.getDomainFromUrl(i);d.safeFetchCategories(m),c((async()=>{f.logger.debug("website-block: started handling",{tabId:n,url:i,navigationStage:t});const c=await a.get(n);if(c){if(t===u.NavigationStage.OnBeforeNavigate)await a.update(n,{isBlockedByRule:!1});else if(c.isBlockedByRule)return void f.logger.debug("website-block: tab is already blocked, skipping",{tabId:n});await async function(e){const{websiteDetectionProtocols:t}=await r.getConfiguration();if(!s.isURLOneOfProtocols(e,t))return f.logger.debug("website-block: url is not one of the website detection protocols, skipping web navigation",e),!1;const n=g.getDomainFromUrl(e),{isWhitelisted:i,category:a}=await p.checkLocalWhitelists([n]);return!i||(f.logger.debug("website-block: domain or category is local whitelisted, skipping web nvaigation",e,n,a),!1)}(i)&&(await o.shouldBypass(i,n)?f.logger.debug("website-block: url exists in bypass list, skipping",i):(await a.update(n,{lastUrl:i}),await h.websiteBlock({domain:m,tabId:n,url:i}),f.logger.debug("website-block: finished handling",{details:e,navigationStage:t})))}else f.logger.debug("website-block: tab does not exist, skipping",{tabId:n})}))}catch(e){e instanceof Error&&f.logger.error("website-block: Failed to handle web navigation",{error:{message:e.message,stack:e.stack}})}}const v={url:[{urlPrefix:"http://"},{urlPrefix:"https://"}]};a.default.webNavigation&&(a.default.webNavigation.onBeforeNavigate.addListener((function(e){(e.url.startsWith("https://")||e.url.startsWith("http://"))&&(e.frameId>0||m(e,u.NavigationStage.OnBeforeNavigate))}),v),a.default.webNavigation.onCommitted.addListener((function(e){(e.url.startsWith("https://")||e.url.startsWith("http://"))&&(e.frameId>0||m(e,u.NavigationStage.OnCommitted))}),v),a.default.webNavigation.onCompleted.addListener((function(e){(e.url.startsWith("https://")||e.url.startsWith("http://"))&&(e.frameId>0||m(e,u.NavigationStage.OnCompleted))}),v))},5949:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.websiteBlock=void 0;const i=n(1276),a=n(2543),r=n(8459),o=n(4882),s=n(1326),c=n(6846),l=n(5998),u=n(4458),d=n(7121),p=n(9103),f=n(1477),g=n(9698),h={[i.MaliciousWebsiteDetection.Block]:i.BlockPageDetectionMode.Block,[i.MaliciousWebsiteDetection.Warn]:i.BlockPageDetectionMode.Warn,[i.MaliciousWebsiteDetection.Silent]:i.BlockPageDetectionMode.Block,[i.MaliciousWebsiteDetection.Disabled]:i.BlockPageDetectionMode.Block},m={[i.WebsiteBlockAction.Block]:i.BlockPageDetectionMode.Block,[i.WebsiteBlockAction.Warn]:i.BlockPageDetectionMode.Warn,[i.WebsiteBlockAction.Allow]:i.BlockPageDetectionMode.Block},v=async(e,t)=>new Promise((n=>{s.logger.info("website-block: website detected in warn mode on incognito",{tabId:e,domain:t}),d.showWebsiteWarningNotificationSafe(e),n()}));t.websiteBlock=async function({domain:e,tabId:t,url:n}){s.logger.info("websiteBlock: Handling block website request",{domain:e,tabId:t,url:n});const{dlpRules:d}=await r.getConfiguration(),y=await o.getCategories({domain:e,tabId:t}),b=c.getMatchedWebsiteRule([e],y?Object.keys(y):[],d,c.WebsiteRuleType.WebsiteBlock,s.logger);if(!b||a.isUndefined(b.websiteBlockAction)&&!b.blockWebsite||b.websiteBlockAction===i.WebsiteBlockAction.Allow)return void s.logger.debug("websiteBlock: No rule found, skipping");s.logger.debug("websiteBlock: rule found, blocking website",b);const w=new Date,S=function(e,t){if(t&&function(e){return e.kind===i.DlpRuleKind.Category}(e))return e.websiteCategory?t[e.websiteCategory]:void 0}(b,y),x=(e=>e.websiteBlockAction?e.websiteBlockAction:e.blockWebsite?i.WebsiteBlockAction.Block:i.WebsiteBlockAction.Allow)(b),C=await(async e=>{const{maliciousWebsiteDetection:t}=await r.getConfiguration();return e?m[e]:h[null!=t?t:i.MaliciousWebsiteDetection.Block]})(x);!async function({timestamp:e,domain:t,reason:n,category:a}){await l.processTelemetry({category:i.TelemetryCategory.Prevention,type:i.TelemetryType.BlockPage,metadata:Object.assign({domain:t,reason:n},a&&{categories:[a]}),timestamp:e})}(Object.assign({timestamp:w,domain:e},S?{reason:i.BlockPageReason.CategoryRule,category:S}:{reason:i.BlockPageReason.DomainRule})),async function({timestamp:e,domain:t,url:n,type:a,detectionMode:r,category:o,reportEvent:s}){const c={category:i.EventCategory.Prevention,timestamp:e,activity:r===i.BlockPageDetectionMode.Block?"Website blocked by policy":"User warned before accessing website",type:a,reportEvent:s},l=r===i.BlockPageDetectionMode.Block?"blocked":"warned";switch(a){case i.EventType.WebsiteCategoriesAccessBlocked:await u.processEvent(Object.assign(Object.assign(Object.assign({},c),o?{metadata:{url:n,categories:[o]},details:`The URL is included in a ${l} category: [${o}]. URL: ${n}`}:{metadata:{url:n,categories:[]},details:`Categorization failed, URL ${l}: ${n}`}),{destination:[i.EventDestination.ABS],type:a}));break;case i.EventType.WebsiteUrlAccessBlocked:await u.processEvent(Object.assign(Object.assign({},c),{metadata:{url:n},details:`The URL is included in a ${l} domain: [${t}]. URL: ${n}`,destination:[i.EventDestination.ABS],type:a}))}}(Object.assign(Object.assign({timestamp:w,domain:e,url:n,detectionMode:C},S?{type:i.EventType.WebsiteCategoriesAccessBlocked,category:S}:{type:i.EventType.WebsiteUrlAccessBlocked}),{reportEvent:b.reportEvents}));const T=p.getTabsManager(),E=await T.get(t);if(E){if(E.incognito){const n=C===i.BlockPageDetectionMode.Warn?v:g.showWebsiteBlockpage;await n(t,e)}else await f.showWebsiteBlockPage({domain:e,tabId:t,url:n,detectionMode:C,customBlockMessage:b.customBlockMessage,category:S});s.logger.debug("website-block: blocked page, disabled detection",{tabId:t}),await T.update(t,{isBlockedByRule:!0})}else s.logger.debug("websiteBlock: tab does not exist, skipping",{tabId:t})}},8459:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(7194),t),a(n(38),t),a(n(2150),t)},7194:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerGetConfigurationCallback=t.executegetConfigurationCallbacks=t.ConfigurationEvent=void 0;const i=n(1326);var a;!function(e){e.Updated="updated",e.NotModified="not-modified"}(a=t.ConfigurationEvent||(t.ConfigurationEvent={}));const r={[a.Updated]:[],[a.NotModified]:[]};t.executegetConfigurationCallbacks=function(e,t=a.Updated){const n=r[t];for(const t of n)try{t(e)}catch(n){i.logger.error("Failed to execute callback",t,e,n)}},t.registerGetConfigurationCallback=function(e,t=a.Updated){if(Array.isArray(t))for(const n of t)r[n].push(e);else r[t].push(e)}},38:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getConfiguration=t.defaultLogLinesLimit=void 0;const a=i(n(165)),r=i(n(398)),o=n(3566),s=n(1326),c=n(3017),l=n(8657),u=n(7194),d=n(772),p=n(2150);t.defaultLogLinesLimit=1e5;const f=["hmcRegistrationId","latestConfiguration","latestConfigurationTimestamp"],g=a.default(1);let h=!1,m=!1;const v=p.getDefaultConfiguration(),y=p.getParsers();function b(e=!1){return g((()=>async function(e=!1){var t;const n=await r.default.storage.local.get(f);if(h&&!e&&n.latestConfiguration)return Object.assign(Object.assign({},v),n.latestConfiguration);if(await l.isSignedOut())return s.logger.info("fetchConfiguration: Cannot fetch when user is not signed-in"),await w(n);let i;try{const e=await d.getExtensionId();i=await c.hmcFetchGet("extensions/configuration",{headers:Object.assign({},n.latestConfigurationTimestamp&&{"If-Modified-Since":n.latestConfigurationTimestamp}),queryParams:Object.assign({},e&&{extensionId:e})})}catch(e){return s.logger.error("Failed to get configuration",e),await w(n)}const a=i.headers.get("last-modified");if(n.latestConfiguration&&i.status===o.HttpStatusCode.NotModified){a&&(n.latestConfigurationTimestamp=a,await r.default.storage.local.set(n)),h=!0,s.logger.debug("fetchConfiguration: configuration was unmodified");const e=Object.assign(Object.assign({},v),n.latestConfiguration);return u.executegetConfigurationCallbacks(e,u.ConfigurationEvent.NotModified),e}let g;try{g=await i.json()}catch(e){return s.logger.error("Failed to parse configuration",e),await w(n)}const m=Object.assign(Object.assign({},v),g);for(const e in m){if(!Object.prototype.hasOwnProperty.call(m,e))continue;const n=e,i=m[n];if("string"!=typeof i)continue;const a=y[n];a?m[n]=null!==(t=a(i))&&void 0!==t?t:v[n]:delete m[n]}a&&(n.latestConfigurationTimestamp=a);const b=p.getActivationConfiguration(m);return h=!0,u.executegetConfigurationCallbacks(b),n.latestConfiguration=b,await r.default.storage.local.set(Object.assign(Object.assign({},n),{blockActionSummaryVersion:Date.now()})),n.latestConfiguration}(e)))}async function w(e){e.latestConfiguration||await r.default.storage.local.set({latestConfiguration:v});const t=Object.assign(Object.assign({},v),e.latestConfiguration);return m||(u.executegetConfigurationCallbacks(t),m=!0),t}t.getConfiguration=b;const S=a.default(1),x=new Map;c.setConfigurationUpdatedAtHandler((e=>{!async function(e,t){s.logger.info("debouncedOnConfigUpdate: Got config update with timestamp",e,t);const n=JSON.stringify([e,t]),i=x.get(n);if(i)return i;const a=new Promise((e=>setTimeout(e,100))).then((()=>((e,t)=>S((async()=>{s.logger.info("onConfigUpdate: Handling config update with timestamp",e);const{latestConfigurationTimestamp:n}=await r.default.storage.local.get(["latestConfigurationTimestamp"]);!n||new Date(n)<new Date(e)?(s.logger.info("onConfigUpdate: Retrieving configuration from server due to new config timestamp"),await b(!0)):s.logger.info("onConfigUpdate: Irrelevant old config timestamp"),t?s.logger.info("onConfigUpdate: can hide native notification - avoiding it"):s.logger.info("onConfigUpdate: no need to check native notification - avoiding it")})))(e,t)));x.set(n,a);try{return await a}finally{x.delete(n)}}(e,!1)})),u.registerGetConfigurationCallback((function(e){s.logger.info("Current configuration",e)}))},580:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configurationItems=void 0;const i=n(1276),a=n(1166);t.configurationItems={maliciousDownloadMaxSizeBytes:{parser:a.parseSafePositiveInteger,defaultValue:104857600},maliciousDownloadMessage:{parser:a.parseString,defaultValue:""},useS3HttpPostUpload:{parser:a.parseBoolean,defaultValue:!1},s3FileMultipartUploadMaxPartSize:{parser:a.parseS3FileMultipartUploadMaxPartSize,defaultValue:104857600},maliciousWebsiteDetection:{parser:a.enumParser(i.MaliciousWebsiteDetection),defaultValue:i.MaliciousWebsiteDetection.Silent,disabledValue:i.MaliciousWebsiteDetection.Disabled},maliciousWebsiteMessage:{parser:a.parseString,defaultValue:""},policyRestrictedWebsiteCustomMessage:{parser:a.parseObject,defaultValue:{}},collectDynamicEvidence:{parser:a.parseBoolean,defaultValue:!0},cacheDynamicEvidence:{parser:a.parseBoolean,defaultValue:!0},collectLinkDescription:{parser:a.parseBoolean,defaultValue:!0},collectFavicon:{parser:a.parseBoolean,defaultValue:!0},collectScreenshot:{parser:a.parseBoolean,defaultValue:!0},sendEnrichment:{parser:a.parseBoolean,defaultValue:!0},allowBypassMaliciousWebsites:{parser:a.parseBoolean,defaultValue:!0},allowReportingWebsiteAsMalicious:{parser:a.parseBoolean,defaultValue:!0},allowReportingWebsiteAsClean:{parser:a.parseBoolean,defaultValue:!0},quickWebsiteReporting:{parser:a.parseBoolean,defaultValue:!1},linkDescriptionAncestorsLimit:{parser:a.parseSafePositiveInteger,defaultValue:3},linkDescriptionNavigationElementTags:{parser:a.parseStringArray,defaultValue:["a"]},checkVerdictCache:{parser:a.parseBoolean,defaultValue:!0},descriptionLengthLimit:{parser:a.parseSafePositiveInteger,defaultValue:280},screenshotRetryLimit:{parser:a.parseSafePositiveInteger,defaultValue:7},scanUrlMaxLength:{parser:a.parseSafePositiveInteger,defaultValue:2e3},treatUnknownAsMalicious:{parser:a.parseBoolean,defaultValue:!1},enablePreScanApi:{parser:a.parseBoolean,defaultValue:!0},enableClipboardControl:{parser:a.parseBoolean,defaultValue:!1},clipboardControlMatchingRules:{parser:a.parseStringArray,defaultValue:void 0},clipboardForbiddenText:{parser:a.parseString,defaultValue:""},preventPrintingDomains:{parser:a.parseStringArray,defaultValue:void 0},enablePrintingPrevention:{parser:a.parseBoolean,defaultValue:!1},enableDownloadLocalLogs:{parser:a.parseBoolean,defaultValue:!1},cleanVerdictTtl:{parser:a.parseSafePositiveInteger,defaultValue:18e5},malVerdictTtl:{parser:a.parseSafePositiveInteger,defaultValue:6e4},unkVerdictTtl:{parser:a.parseSafePositiveInteger,defaultValue:1e4},susVerdictTtl:{parser:a.parseSafePositiveInteger,defaultValue:18e5},collectWebsitePermissionsAsEvidence:{parser:a.parseBoolean,defaultValue:!1},websitePermissionsToCollect:{parser:a.parseStringArray,defaultValue:["popups","notifications","microphone","location","javascript","images","cookies","clipboard","camera","automaticDownloads","autoVerify"]},maliciousDownloadSuffix:{parser:a.parseString,defaultValue:""},logRequestAt:{parser:a.parseSafePositiveInteger,defaultValue:0},logUploadRetries:{parser:a.parseSafePositiveInteger,defaultValue:5},storageBytesAlert:{parser:a.parseSafePositiveInteger,defaultValue:52428800},preventAccessUntilFileScanned:{parser:a.parseBoolean,defaultValue:!1},microsoftOauthLoginPageUrls:{parser:a.parseStringArray,defaultValue:["https://login.microsoftonline.com/common/oauth2/v2.0/authorize","https://login.microsoftonline.com/common/oauth2/authorize"]},officeHostnamePatterns:{parser:a.parseStringArray,defaultValue:["*.office.com","*.office365.com","*.microsoft.com"]},microsoftLoginApiUrls:{parser:a.parseStringArray,defaultValue:["https://login.microsoftonline.com/common/login","https://login.microsoft.com/common/login"]},fieldsRequiredForWebsiteVerdictCache:{parser:a.parseStringArray,defaultValue:["screenshot"]},classifyUrlsWithHmc:{parser:a.parseBoolean,defaultValue:!0},useRedirectionSettingsFromConfiguration:{parser:a.parseBoolean,defaultValue:!0},blockedFileTypes:{parser:a.parseStringArray,defaultValue:[]},blockedFileTypesRules:{parser:a.parseStringArray,defaultValue:void 0},localDomainWhitelist:{parser:a.parseStringArray,defaultValue:[]},localCategoriesWhitelist:{parser:a.parseStringArray,defaultValue:[]},proxyEnabled:{parser:a.parseBoolean,defaultValue:!1,disabledValue:!1},hostsToProxy:{parser:a.parseStringArray,defaultValue:[]},proxyHost:{parser:a.parseString,defaultValue:""},loginVisibilityEnabled:{parser:a.parseBoolean,defaultValue:!1,disabledValue:!1},loginVisibilityInputsQuery:{parser:a.parseString,defaultValue:'input:not([type="hidden"]):not([type="submit"]):not([type="reset"]):not([type="button"]):not([type="image"]):not([type="file"])'},loginVisibilityNonPasswordFields:{parser:a.parseStringArray,defaultValue:["onetimepassword","captcha","findanything","forgot"]},loginVisibilityInputTestAttribute:{parser:a.parseStringArray,defaultValue:["id","name","placeholder","aria-label","autocomplete"]},loginVisibilitySubmitButtonText:{parser:a.parseStringArray,defaultValue:["log in","sign in","login","go","submit","continue","next","הבא","המשך","התחבר"]},loginVisibilityCancelButtonText:{parser:a.parseStringArray,defaultValue:["cancel","close","back","forgot email?"]},loginVisibilityUsernameFields:{parser:a.parseStringArray,defaultValue:["username","user name","email","email address","e-mail","e-mail address","userid","user id","customer id","login id","שם משתמש"]},loginVisibilityDomChangesWaitMs:{parser:a.parseSafePositiveInteger,defaultValue:1e3},loginVisibilitySubmitButtonQuery:{parser:a.parseString,defaultValue:'input[type="submit"], input[type="image"], button[type="submit"]'},loginVisibilitySubmitButtonTextLookupQuery:{parser:a.parseString,defaultValue:"button:not([type])"},loginVisibilityTypelessSubmitButtonQuery:{parser:a.parseString,defaultValue:'a, button[type="button"], input[type="button"], button:not([type]), div[role="button"]'},detectionEnrichmentOnMal:{parser:a.parseBoolean,defaultValue:!0},enableWatermark:{parser:a.parseBoolean,defaultValue:!1},watermarkAdditionalText:{parser:a.parseString,defaultValue:""},watermarkCustomCSS:{parser:a.parseString,defaultValue:""},watermarkCustomColor:{parser:a.parseString,defaultValue:"999999"},watermarkCustomOpacity:{parser:a.parseString,defaultValue:"0.1"},watermarkDomainList:{parser:a.parseStringArray,defaultValue:void 0},watermarkUrlRegex:{parser:a.parseJsonStringArray,defaultValue:[]},watermarkRepeat:{parser:a.parseSafePositiveInteger,defaultValue:4e3},useCalculatedWatermarkRepeat:{parser:a.parseBoolean,defaultValue:!0},watermarkFontSize:{parser:a.parseSafePositiveInteger,defaultValue:20},watermarkLineHeight:{parser:a.parseSafePositiveInteger,defaultValue:2},watermarkLetterSpacing:{parser:a.parseSafePositiveInteger,defaultValue:5},enablePrivacyScreen:{parser:a.parseBoolean,defaultValue:!1,disabledValue:!1},privacyScreenBlur:{parser:a.parseSafePositiveInteger,defaultValue:5},privacyScreenDomainList:{parser:a.parseStringArray,defaultValue:[],disabledValue:[]},privacyScreenUrlRegex:{parser:a.parseJsonStringArray,defaultValue:[]},enableTelemetry:{parser:a.parseBoolean,defaultValue:!0},enableEvents:{parser:a.parseBoolean,defaultValue:!0,disabledValue:!1},enableXDREvents:{parser:a.parseBoolean,defaultValue:!0,disabledValue:!1},enableIREvents:{parser:a.parseBoolean,defaultValue:!1,disabledValue:!1},showToastWarnings:{parser:a.parseBoolean,defaultValue:!1},fileScansTimeoutMs:{parser:a.parseSafePositiveInteger,defaultValue:3e4},fileScansFailTimeoutMs:{parser:a.parseSafePositiveInteger,defaultValue:6e5},enableMultipartBrowserScan:{parser:a.parseBoolean,defaultValue:!1},hidePPLogo:{parser:a.parseBoolean,defaultValue:!1},maliciousWebsitesBypassEnabled:{parser:a.parseBoolean,defaultValue:!0},maliciousWebsitesBypassTtlMs:{parser:a.parseSafePositiveInteger,defaultValue:0},shouldDownloadFileOnScanFailed:{parser:a.parseBoolean,defaultValue:!0},showFailedScanNotification:{parser:a.parseBoolean,defaultValue:!0},customLogoUrl:{parser:a.parseString,defaultValue:""},enableMultipartScanEnrichment:{parser:a.parseBoolean,defaultValue:!1},enableMultipartFalseNegativeReport:{parser:a.parseBoolean,defaultValue:!1},shouldTryUrlFetchBeforeScan:{parser:a.parseBoolean,defaultValue:!0},urlFetchValidationBytesAmount:{parser:a.parseSafePositiveInteger,defaultValue:1},useOpenShadowDomRootForToasts:{parser:a.parseBoolean,defaultValue:!1},emailCollectionStatus:{parser:a.enumParser(i.EmailCollectionStatus),defaultValue:i.EmailCollectionStatus.Disabled},enableOutlookEmailCollection:{parser:a.parseBoolean,defaultValue:!1},enableDevtoolsProtection:{parser:a.parseBoolean,defaultValue:!1,disabledValue:!1},loginVisibilitySendEventWaitMs:{parser:a.parseSafePositiveInteger,defaultValue:2e3},loginVisibilityDomainIgnoreList:{parser:a.parseStringArray,defaultValue:[]},loginVisibilityUrlIgnoreRegex:{parser:a.parseJsonStringArray,defaultValue:[]},enableFilePreScan:{parser:a.parseBoolean,defaultValue:!0},showSuffixOfRemoteDeploymentName:{parser:a.parseBoolean,defaultValue:!1},websiteDetectionProtocols:{parser:a.parseStringArray,defaultValue:["http:","https:","file:","blob:http:","blob:https:","blob:file:"]},shouldShowScanningFilesNotification:{parser:a.parseBoolean,defaultValue:!0},shouldShowCleanFilesNotification:{parser:a.parseBoolean,defaultValue:!0},shouldShowMaliciousFilesNotification:{parser:a.parseBoolean,defaultValue:!0},shouldShowFileTooLargeNotification:{parser:a.parseBoolean,defaultValue:!0},shouldShowFileAccessibleNotification:{parser:a.parseBoolean,defaultValue:!0},dlpRules:{parser:a.parseObject,defaultValue:[],disabledValue:[]},blockUnscannableFiles:{parser:a.parseBoolean,defaultValue:!0},fileUploadWhitelist:{parser:a.parseStringArray,defaultValue:[]},fileUploadBlacklist:{parser:a.parseStringArray,defaultValue:[]},disableFileUpload:{parser:a.parseBoolean,defaultValue:!1},thirdPartyExtensionsScanApiVersion:{parser:a.parseSafePositiveInteger,defaultValue:1},thirdPartyExtensionsImplementationVersion:{parser:a.parseSafeInteger,defaultValue:-1},thirdPartyExtensionRulesIgnoreConditionType:{parser:a.parseStringUnionArray(["extensionId","riskScore","riskLevel"],"drop"),defaultValue:[]},showNotificationRetries:{parser:a.parseSafePositiveInteger,defaultValue:5},showNotificationRetryDelayMs:{parser:a.parseSafePositiveInteger,defaultValue:1e3},dynamicEvidenceDomChangesDelayMs:{parser:a.parseSafePositiveInteger,defaultValue:1e3},requestEncryptedFilePasswordFromUser:{parser:a.parseBoolean,defaultValue:!1},defaultMaxLengthForToastFilename:{parser:a.parseSafePositiveInteger,defaultValue:36},websiteDetectionRescanUserClick:{parser:a.parseBoolean,defaultValue:!0},websiteDetectionRescanDomChangesDelay:{parser:a.parseSafePositiveInteger,defaultValue:1e3},websiteDetectionRescanDelay:{parser:a.parseSafePositiveInteger,defaultValue:3e4},detectEmailAddressTyping:{parser:a.parseBoolean,defaultValue:!1},detectEmailAddressTypingTriggerRescan:{parser:a.parseBoolean,defaultValue:!1},detectEmailAddressTypingRegex:{parser:a.parseString,defaultValue:"^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$"},detectEmailAddressTypingSendEvent:{parser:a.parseBoolean,defaultValue:!1},detectCreditCardTyping:{parser:a.parseBoolean,defaultValue:!1},detectCreditCardTypingTriggerRescan:{parser:a.parseBoolean,defaultValue:!1},detectCreditCardTypingRegex:{parser:a.parseString,defaultValue:"\\b((4\\d{3})|(5[0-5]\\d{2})|(6\\d{3})|(1\\d{3})|(3\\d{3}))[- ]?(\\d{3,4})[- ]?(\\d{3,4})[- ]?(\\d{3,5})\\b"},detectCreditCardTypingSendEvent:{parser:a.parseBoolean,defaultValue:!1},allowSilentFcmOnEdge:{parser:a.parseBoolean,defaultValue:!1},warnSuspiciousWebsites:{parser:a.parseBoolean,defaultValue:!0},sendScreenshotOnScan:{parser:a.parseBoolean,defaultValue:!1},treatFilePreScanCleanAsUnknown:{parser:a.parseBoolean,defaultValue:!1},supportedPrescanProtocols:{parser:a.parseStringArray,defaultValue:["http:","https:"]},checkForUpdateOnWakeUp:{parser:a.parseBoolean,defaultValue:!1},reloadExtensionOnUpdate:{parser:a.parseBoolean,defaultValue:!1},triggerRescanDebounceMs:{parser:a.parseSafePositiveInteger,defaultValue:3e3},triggerRescanDebounceMaxWaitMs:{parser:a.parseSafePositiveInteger,defaultValue:5e3},triggerRescanDebounceOnLeading:{parser:a.parseBoolean,defaultValue:!1},triggerRescanDebounceOnTrailing:{parser:a.parseBoolean,defaultValue:!0},browserScanVerdictsToCache:{parser:a.enumArrayParser(i.Verdict),defaultValue:[i.Verdict.Clean,i.Verdict.Malware]},triggerRescanOnTabFocused:{parser:a.parseBoolean,defaultValue:!0},shouldShowEncryptedFilesNotification:{parser:a.parseBoolean,defaultValue:!0},websiteDetectionRescanGradualIntervalConfiguration:{parser:a.parseObject,defaultValue:{enabled:!0,baseMs:1e3,multiplierMs:5e3,maxMs:3e4}},websiteDetectionRescanIntervalMs:{parser:a.parseSafePositiveInteger,defaultValue:3e4},websiteDetectionRescanIntervalCountLimit:{parser:a.parseSafePositiveInteger,defaultValue:1},passwordDuplicationDetectionEnableToast:{parser:a.parseBoolean,defaultValue:!1},enablePasswordDuplicationDetectionEvents:{parser:a.parseBoolean,defaultValue:!1},uploadCompleteTextContentLimit:{parser:a.parseSafePositiveInteger,defaultValue:9e4},uploadCompleteTextContentEnabled:{parser:a.parseBoolean,defaultValue:!1},shouldSendUrlsInTelemetries:{parser:a.parseBoolean,defaultValue:!1},enableFileScanningInSafari:{parser:a.parseBoolean,defaultValue:!1},enableInlineFileScanInFirefox:{parser:a.parseBoolean,defaultValue:!1},maliciousDownloadCustomMessageLink:{parser:a.parseString,defaultValue:""},maliciousDownloadCustomMessageLinkTitle:{parser:a.parseString,defaultValue:""},maliciousWebsiteCustomMessageLink:{parser:a.parseString,defaultValue:""},maliciousWebsiteCustomMessageLinkTitle:{parser:a.parseString,defaultValue:""},previousPageInfoTransitionTypesToKeepEntry:{parser:a.parseStringArray,defaultValue:["link"]},intensiveSafariDownloadsLogging:{parser:a.parseBoolean,defaultValue:!1},safeGetTextContentFromFrameTimeoutMs:{parser:a.parseSafePositiveInteger,defaultValue:3e3},safariDownloadsDoNotScanMimetypes:{parser:a.parseStringArray,defaultValue:["image/","video/","audio/","text/css","text/html","application/xhtml+xml","application/javascript","application/x-javascript","application/json","text/plain","application/xml","application/vnd.google","application/vnd.ms-fontobject","application/x-font","application/font-","text/calendar","application/x-empty","text/event-stream"]},safariDownloadsScanMimetypes:{parser:a.parseStringArray,defaultValue:["application/octet-stream","application/vnd.ms-","application/pdf","application/excel","application/vnd.openxmlformats","application/ms","application/csv","application/x-bzip","text/csv","application/x-dosexec","application/x-msdownload","application/zip","application/x-sharedlib","application/x-gzip","application/x-apple-diskimage","application/vnd.apple.installer"]},safariDownloadsNonDownloadResourceTypes:{parser:a.parseStringArray,defaultValue:["stylesheet","script","image","font","media","ping","csp_report","websocket","xmlhttprequest"]},safariDownloadsExcludeDomains:{parser:a.parseStringArray,defaultValue:["accounts.google.com","*.googleadservices.com","*.googlesyndication.com","google-analytics.com","chat.google.com","*.googleads.g.doubleclick.net","aa.google.com","*.googleusercontent.com"]},customOrganizationName:{parser:a.parseString,defaultValue:""},autoDismissScanningFilesNotification:{parser:a.parseBoolean,defaultValue:!1},autoDismissCleanFilesNotification:{parser:a.parseBoolean,defaultValue:!0},autoDismissMaliciousFilesNotification:{parser:a.parseBoolean,defaultValue:!1},autoDismissFileTooLargeNotification:{parser:a.parseBoolean,defaultValue:!1},autoDismissFileAccessibleNotification:{parser:a.parseBoolean,defaultValue:!0},autoDismissFailedScanNotification:{parser:a.parseBoolean,defaultValue:!1},autoDismissEncryptedFilesNotification:{parser:a.parseBoolean,defaultValue:!1},customHtmlPagesPaths:{parser:a.parseStringArray,defaultValue:[]},enableCustomHtmlPagesService:{parser:a.parseBoolean,defaultValue:!1},largeFilesScanMessage:{parser:a.parseString,defaultValue:""},useCloudMessagingNotifications:{parser:a.parseBoolean,defaultValue:!0},useFcmOnChrome:{parser:a.parseBoolean,defaultValue:!1},scanProgressPreparingMaxPercentage:{parser:a.parseSafePositiveInteger,defaultValue:5},scanProgressDownloadingMaxPercentage:{parser:a.parseSafePositiveInteger,defaultValue:30},scanProgressUploadingMaxPercentage:{parser:a.parseSafePositiveInteger,defaultValue:50},scanProgressScanningMaxPercentage:{parser:a.parseSafePositiveInteger,defaultValue:99},scanProgressCompletedMaxPercentage:{parser:a.parseSafePositiveInteger,defaultValue:100},scanProgressPreparingMaxTotalTimeMs:{parser:a.parseSafePositiveInteger,defaultValue:2e3},scanProgressDownloadingMaxTotalTimeMs:{parser:a.parseSafePositiveInteger,defaultValue:40480},scanProgressUploadingMaxTotalTimeMs:{parser:a.parseSafePositiveInteger,defaultValue:6059},scanProgressScanningMaxTotalTimeMs:{parser:a.parseSafePositiveInteger,defaultValue:42650},scanProgressEncryptedScanningMaxTotalTimeMs:{parser:a.parseSafePositiveInteger,defaultValue:82650},scanProgressCompletedMaxTotalTimeMs:{parser:a.parseSafePositiveInteger,defaultValue:1},uploadFetchOperationRetries:{parser:a.parseSafePositiveInteger,defaultValue:3},uploadFetchOperationWaitBetweenRetries:{parser:a.parseSafePositiveInteger,defaultValue:1e3},domainCategorizationWhitelist:{parser:a.parseStringArray,defaultValue:["localhost"]},remediationStatusesToEnrichScan:{parser:a.enumArrayParser(i.DownloadRemediation),defaultValue:[i.DownloadRemediation.Deleted,i.DownloadRemediation.Failed,i.DownloadRemediation.None]},enableEnrichScanWithRemediation:{parser:a.parseBoolean,defaultValue:!1},enableRemediationTelemetries:{parser:a.parseBoolean,defaultValue:!1},scanStatusIntervalMs:{parser:a.parseSafePositiveInteger,defaultValue:3e3},verdictOriginsForFileScanCleanTelemetry:{parser:a.enumArrayParser(i.VerdictOrigin),defaultValue:[i.VerdictOrigin.Network,i.VerdictOrigin.Cache,i.VerdictOrigin.Configuration]},verdictOriginsForFileScanMalTelemetry:{parser:a.enumArrayParser(i.VerdictOrigin),defaultValue:[i.VerdictOrigin.Network,i.VerdictOrigin.Cache]},failedScanSendEvent:{parser:a.parseBoolean,defaultValue:!0},failedScanEventExcludedProtocols:{parser:a.parseStringArray,defaultValue:["file:"]},enableUploadHtmlDom:{parser:a.parseBoolean,defaultValue:!1},dynamicEvidenceUpdateTimestamp:{parser:a.parseSafePositiveInteger,defaultValue:0},htmlDomIFrameDepth:{parser:a.parseSafePositiveInteger,defaultValue:2},enableUploadDetection:{parser:a.parseBoolean,defaultValue:!1},uploadDetectionConfigurationPerDomains:{parser:a.parseObject,defaultValue:[]},enableUploadDetectionEvents:{parser:a.parseBoolean,defaultValue:!1},enableUploadDetectionTelemetries:{parser:a.parseBoolean,defaultValue:!1},enableUploadPrevention:{parser:a.parseBoolean,defaultValue:!1},enableUploadPreventionEvents:{parser:a.parseBoolean,defaultValue:!1},enableUploadPreventionTelemetries:{parser:a.parseBoolean,defaultValue:!1},enableUploadPreventionToast:{parser:a.parseBoolean,defaultValue:!1},enableUploadPreventionCombinedRules:{parser:a.parseBoolean,defaultValue:!1},enableUploadPreventionDisableFileInputs:{parser:a.parseBoolean,defaultValue:!1},useGoogleFaviconFetch:{parser:a.parseBoolean,defaultValue:!1},enableApiFaviconFetchOnBrowsers:{parser:a.enumArrayParser(i.BrowserName),defaultValue:[i.BrowserName.Chrome,i.BrowserName.Edge]},extensionApiFaviconFetchProtocols:{parser:a.parseStringArray,defaultValue:["http:","https:","file:"]},sendTelemetryForDownloadUrlHostname:{parser:a.parseBoolean,defaultValue:!1},toastPosition:{parser:a.enumParser(i.ToastPosition),defaultValue:i.ToastPosition.TopRight},excludeByFileExtension:{parser:a.parseStringArray,defaultValue:[]},showRealDownloadToastProgress:{parser:a.parseBoolean,defaultValue:!1},shouldShowDownloadProgressInToast:{parser:a.parseBoolean,defaultValue:!1},showToastNotificationWhenCollectingEvidence:{parser:a.parseBoolean,defaultValue:!1},shouldShowDownloadIdInToast:{parser:a.parseBoolean,defaultValue:!1},enabledDownloadMechanisms:{parser:a.enumArrayParser(i.DownloadMechanism),defaultValue:[i.DownloadMechanism.DataUrlBlob,i.DownloadMechanism.ContentScriptBlob,i.DownloadMechanism.ServiceWorkerStream,i.DownloadMechanism.ContentScriptStream]},validFileExtensions:{parser:a.parseStringArray,defaultValue:["reg"]},firefoxInlineScanDisabledDomains:{parser:a.parseStringArray,defaultValue:[]},firefoxFallbackInlineToParallel:{parser:a.parseBoolean,defaultValue:!0},verdictsToSendScreenshotEvidence:{parser:a.enumArrayParser(i.Verdict),defaultValue:[i.Verdict.Malware,i.Verdict.Suspicious],disabledValue:[]},firefoxUrlInTelemetryOnFallbackToParallel:{parser:a.parseBoolean,defaultValue:!1},enableDirectWebsiteRulesCalculation:{parser:a.parseBoolean,defaultValue:!1},enableDetermineDownloadMechanismRetries:{parser:a.parseBoolean,defaultValue:!1},firefoxWebrequestDownloadFilterSupportedMimeTypes:{parser:a.parseStringArray,defaultValue:["application/octet-stream","application/vnd.ms-","application/pdf","application/excel","application/vnd.openxmlformats","application/ms","application/csv","text/csv","application/x-dosexec","application/x-msdownload","application/zip","application/x-sharedlib","application/x-gzip","application/x-apple-diskimage","application/vnd.apple.installer","application/x-msdos-program"]},firefoxWebrequestDownloadFilterSupportedResourceTypes:{parser:a.parseStringArray,defaultValue:["main_frame","sub_frame","other"]},firefoxWebrequestDownloadFilterSupportedProtocols:{parser:a.parseStringArray,defaultValue:["http","ftp","sftp","file"]},determineDownloadMechanismRetries:{parser:a.parseSafePositiveInteger,defaultValue:0},determineDownloadMechanismRetryDelayMs:{parser:a.parseSafePositiveInteger,defaultValue:1e3},maxRescanTriggerCount:{parser:a.parseSafePositiveInteger,defaultValue:0},disableFileScanningForDomainList:{parser:a.parseStringArray,defaultValue:[]},shouldSendUploadApiResponseHeaders:{parser:a.parseBoolean,defaultValue:!1},shouldSendMultipartApiResponseHeaders:{parser:a.parseBoolean,defaultValue:!1},enableTelemetryUpdateAvailable:{parser:a.parseBoolean,defaultValue:!1},pasteOutPreventionUseRuleDestination:{parser:a.parseBoolean,defaultValue:!1},enableFileSignaturePreScan:{parser:a.parseBoolean,defaultValue:!1},checkFileSignatureVerdictCache:{parser:a.parseBoolean,defaultValue:!0},cleanFileSignatureVerdictTtl:{parser:a.parseSafePositiveInteger,defaultValue:18e5},malFileSignatureVerdictTtl:{parser:a.parseSafePositiveInteger,defaultValue:6e4},unkFileSignatureVerdictTtl:{parser:a.parseSafePositiveInteger,defaultValue:1e4},susFileSignatureVerdictTtl:{parser:a.parseSafePositiveInteger,defaultValue:18e5},activationStatus:{parser:a.enumParser(i.ActivationStatus),defaultValue:i.ActivationStatus.Active},useBypassPerTabInWarnMode:{parser:a.parseBoolean,defaultValue:!1},telemetryTypesBlacklist:{parser:a.enumArrayParser(i.TelemetryType),defaultValue:[]},enableBulkTelemetries:{parser:a.parseBoolean,defaultValue:!1,disabledValue:!1},telemetriesDispatchRetryMS:{parser:a.parseSafePositiveInteger,defaultValue:3e3},telemetriesDispatchScheduleMS:{parser:a.parseSafePositiveInteger,defaultValue:3e4},telemetriesDispatchCount:{parser:a.parseSafePositiveInteger,defaultValue:500},telemetriesDispatchMaxBytes:{parser:a.parseSafePositiveInteger,defaultValue:16777216},categoriesCacheTtl:{parser:a.parseSafePositiveInteger,defaultValue:3e4},categoriesCacheSize:{parser:a.parseSafePositiveInteger,defaultValue:200},enableBulkEvents:{parser:a.parseBoolean,defaultValue:!1},eventsDispatchScheduleMS:{parser:a.parseSafePositiveInteger,defaultValue:1e4},eventsDispatchCount:{parser:a.parseSafePositiveInteger,defaultValue:100},eventsDispatchMaxBytes:{parser:a.parseSafePositiveInteger,defaultValue:16777216},eventsDispatchRetryMS:{parser:a.parseSafePositiveInteger,defaultValue:3e3},requireUserToEnterPasswordForFileEncryptedOptions:{parser:a.enumArrayParser(i.EncryptedOptions),defaultValue:[i.EncryptedOptions.Fully,i.EncryptedOptions.Partially]},maxEncryptedFileScanRetries:{parser:a.parseSafePositiveInteger,defaultValue:1},enableThirdPartyExtensionsEvents:{parser:a.parseBoolean,defaultValue:!1},thirdPartyExtensionsUpdatesSearchInterval:{parser:a.parseSafePositiveInteger,defaultValue:6e5},releaseRepeatingFailingDownloadProcesses:{parser:a.parseBoolean,defaultValue:!0},downloadProcessFailuresThresholdBeforeReleasing:{parser:a.parseSafePositiveInteger,defaultValue:3},downloadProcessFailuresCacheTtl:{parser:a.parseSafePositiveInteger,defaultValue:18e5},isTrackingFullUrlForTelemetryAllowed:{parser:a.parseBoolean,defaultValue:!0},validWebsiteCategorizationDomainRegex:{parser:a.parseString,defaultValue:"^(?!$)(?!(127.|192.168.|10.|172.1[6-9].|172.2[0-9].|172.3[0-1].|::1$|[fF][cCdD])|[^.]*$|.*.(local|localdomain))"},websiteCategorizationDomainsSkipList:{parser:a.parseStringArray,defaultValue:["*.hysolate.com","*.perception-point.io"]},enableDownloadConfidence:{parser:a.parseBoolean,defaultValue:!1},acceptedDownloadConfidenceLevel:{parser:a.enumArrayParser(i.DownloadConfidence),defaultValue:[i.DownloadConfidence.Medium,i.DownloadConfidence.High]},allowMimeTypePrimaryComparison:{parser:a.parseBoolean,defaultValue:!0},enableDownloadProcessInfoFilenameOverrideOnBrowsers:{parser:a.enumArrayParser(i.BrowserName),defaultValue:[i.BrowserName.Safari]},enableSensitiveDataDetection:{parser:a.parseBoolean,defaultValue:!1,disabledValue:!1},sensitiveDataDetectionExcludedDomains:{parser:a.parseStringArray,defaultValue:[]},sensitiveDataDetectionPerDomainDefinitions:{parser:a.parseObject,defaultValue:{}},sensitiveDataCacheSize:{parser:a.parseSafePositiveInteger,defaultValue:500},sensitiveDataCacheTtl:{parser:a.parseSafePositiveInteger,defaultValue:432e5},sensitiveDataDetectionEnabledEntityTypes:{parser:a.parseStringArray,defaultValue:[]},entityTypeToSensitiveDataType:{parser:a.parseObject,defaultValue:{}},sensitiveDataDetectionBlockingWarningDomains:{parser:a.parseStringArray,defaultValue:[]},sensitiveDataEntityTypeToMinScoreThreshold:{parser:a.parseObject,defaultValue:{}},sensitiveDataDetectionMinScoreThreshold:{parser:a.parseSafePositiveFloat,defaultValue:.8},sensitiveDataDetectionWaitBetweenSimilarMs:{parser:a.parseSafePositiveInteger,defaultValue:0},sensitiveDataDetectionReplaceWithSpaceRegex:{parser:a.parseString,defaultValue:""},failureReasonsToReleaseIfRepeating:{parser:a.enumArrayParser(i.DownloadProcessFailureReason),defaultValue:[i.DownloadProcessFailureReason.Unfetchable,i.DownloadProcessFailureReason.Timeout,i.DownloadProcessFailureReason.Error]},disabledExtensions:{parser:a.parseStringArray,defaultValue:[]},thirdPartyExtensionsEnforcement:{parser:a.parseBoolean,defaultValue:!1},thirdPartyExtensionsEnforcementRules:{parser:a.parseObject,defaultValue:[]},sendFilenameIdentificationFailureTelemetry:{parser:a.parseBoolean,defaultValue:!1},enableDownloadsBadgeIndicator:{parser:a.parseBoolean,defaultValue:!1},thirdPartyExtensionsEnforcementByRiskScore:{parser:a.parseBoolean,defaultValue:!1},extensionsRiskScoreLevel:{parser:a.enumParser(i.ExtensionsRiskScoreLevel),defaultValue:i.ExtensionsRiskScoreLevel.None},highLevelExtensionRiskScoreMaxValue:{parser:a.parseSafePositiveInteger,defaultValue:35},mediumLevelExtensionRiskScoreMaxValue:{parser:a.parseSafePositiveInteger,defaultValue:65},customSuspiciousBannerTexts:{parser:a.parseObject,defaultValue:{title:"Suspicious website",body:"Be careful with providing sensitive information (for example, credentials and payment methods) and with files downloaded from this website."}},allowedThirdPartyExtensions:{parser:a.parseStringArray,defaultValue:[]},thirdPartyExtensionsEnforcementByAllowList:{parser:a.parseBoolean,defaultValue:!1},enableSessionDebugging:{parser:a.parseBoolean,defaultValue:!1},navigationEventsMaxCount:{parser:a.parseSafePositiveInteger,defaultValue:5e4},navigationEventsEvictionRatio:{parser:a.parseSafePositiveFloat,defaultValue:.1},sessionsCacheSize:{parser:a.parseSafePositiveInteger,defaultValue:1e3},sessionsCacheTtl:{parser:a.parseSafePositiveInteger,defaultValue:6048e5},shouldExpireSessions:{parser:a.parseBoolean,defaultValue:!1},enableWebsiteStatisticsCollection:{parser:a.parseBoolean,defaultValue:!1,disabledValue:!1},excludedWebsiteStatistics:{parser:a.parseStringArray,defaultValue:[]},websiteStatisticsFramesDepth:{parser:a.parseSafePositiveInteger,defaultValue:0},webRequestsResourceTypesForNavigationEvents:{parser:a.parseStringArray,defaultValue:["main_frame","sub_frame"]},enableTabProtectionPopup:{parser:a.parseBoolean,defaultValue:!1},encryptedFilePasswordSubmissionMaxTimeInMS:{parser:a.parseSafePositiveInteger,defaultValue:12e4},maxRetriesInReportFalsePositive:{parser:a.parseSafePositiveInteger,defaultValue:5},evidenceSummaryInTelemetry:{parser:a.parseBoolean,defaultValue:!0},mandatoryEvidences:{parser:a.parseStringArray,defaultValue:[]},extensionSchemes:{parser:a.parseStringArray,defaultValue:["chrome-extension://","moz-extension://"]},excludedDomainsForSourceTabSessionResolving:{parser:a.parseStringArray,defaultValue:["mail.google.com","outlook.live.com"]},userDisplayName:{parser:a.parseString,defaultValue:""},shouldUpdateUserDisplayName:{parser:a.parseBoolean,defaultValue:!1},resultsToStopUpdateUserDisplayNameFor:{parser:a.enumArrayParser(i.UserDisplayNameUpdateResult),defaultValue:[i.UserDisplayNameUpdateResult.Modified]},eventTypesToExcludeFromExtensionActivity:{parser:a.enumArrayParser(i.EventType),defaultValue:[]},eventTypesToExcludeFromXDR:{parser:a.enumArrayParser(i.EventType),defaultValue:[]},eventTypesToExcludeFromIR:{parser:a.enumArrayParser(i.EventType),defaultValue:[]},fileDetectionMode:{parser:a.enumParser(i.FileDetectionMode),defaultValue:i.FileDetectionMode.Silent,disabledValue:i.FileDetectionMode.Disabled},webAppTypeToDomains:{parser:a.parseObject,defaultValue:{[i.WebAppType.Gmail]:["mail.google.com"],[i.WebAppType.Outlook]:["outlook.live.com","outlook.office.com","outlook.office365.com"],[i.WebAppType.WhatsApp]:["web.whatsapp.com"],[i.WebAppType.GoogleDrive]:["drive.google.com"]}},disableAllContentScripts:{parser:a.parseBoolean,defaultValue:!1},showInternalDownloadManager:{parser:a.parseBoolean,defaultValue:!1},enableContentScriptManagement:{parser:a.parseBoolean,defaultValue:!1},contentScriptDisabledDomains:{parser:a.parseStringArray,defaultValue:[]},enableNavigationStageProgressor:{parser:a.parseBoolean,defaultValue:!0},navigationStageProgressorBlobTimeout:{parser:a.parseSafePositiveInteger,defaultValue:1e3},navigationStageProgressorDefaultTimeout:{parser:a.parseSafePositiveInteger,defaultValue:1e4},useNewLookupAPI:{parser:a.parseBoolean,defaultValue:!1},syncTabDetermineInterval:{parser:a.parseSafePositiveInteger,defaultValue:100},syncBlobNullTabDetermineBlobMaxWait:{parser:a.parseSafePositiveInteger,defaultValue:1e3},syncBlobTabDetermineBlobMaxWait:{parser:a.parseSafePositiveInteger,defaultValue:3e3},telemetriesUrlMaxLength:{parser:a.parseSafePositiveInteger,defaultValue:2e3},preventShowSaveFilePicker:{parser:a.parseBoolean,defaultValue:!1},preventShowDirectoryPicker:{parser:a.parseBoolean,defaultValue:!1},enablePasswordReuseDetection:{parser:a.parseBoolean,defaultValue:!0},factoryResetStorages:{parser:a.parseObject,defaultValue:{indexedDB:["telemetry","events","tabs","sessions","navigationEvents","downloadProcessStore","scan-cache","url-cache","file-signature-verdict-cache","files","passwordHashes"],localStorage:["categories","domain-bypass","previous-page","upload-api-response-headers","sdd-types","downloadEventsData","externalEvidences","third-party-extensions-cache","latestConfiguration","latestConfigurationTimestamp"]}},enableFactoryReset:{parser:a.parseBoolean,defaultValue:!1},dynamicEvidenceNamesToSkipScanCache:{parser:a.parseStringArray,defaultValue:["cloudflare_captcha","cloudflare_challenge_in_html"]},tabManagerDeletionDelayMs:{parser:a.parseSafePositiveInteger,defaultValue:6e4},enableDeviceName:{parser:a.parseBoolean,defaultValue:!1},enableNavigationEventsSquashing:{parser:a.parseBoolean,defaultValue:!1},onBeforeNavigateEventsSquashingIntervalMs:{parser:a.parseSafePositiveInteger,defaultValue:1e3},enableDevToolsCloseByDebugger:{parser:a.parseBoolean,defaultValue:!1}}},2150:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getActivationConfiguration=t.getParsers=t.getDefaultConfiguration=void 0;const a=n(1276),r=n(580),o=i(n(2543));t.getDefaultConfiguration=()=>o.default.fromPairs(Object.entries(r.configurationItems).map((([e,t])=>[e,t.defaultValue]))),t.getParsers=()=>o.default.fromPairs(Object.entries(r.configurationItems).map((([e,t])=>[e,t.parser]))),t.getActivationConfiguration=e=>{const{activationStatus:t}=e;switch(t){case a.ActivationStatus.Disabled:return(e=>{const t=o.default.fromPairs(Object.entries(r.configurationItems).filter((e=>void 0!==e[1].disabledValue)).map((([e,t])=>[e,t.disabledValue])));return Object.assign(Object.assign({},e),t)})(e);case a.ActivationStatus.Active:case a.ActivationStatus.ActiveForEmail:default:return e}}},1166:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseObject=t.parseS3FileMultipartUploadMaxPartSize=t.parseSafePositiveFloat=t.parseSafeInteger=t.parseSafePositiveInteger=t.parseBoolean=t.parseStringUnionArray=t.parseStringUnion=t.enumArrayParser=t.enumParser=t.parseString=t.parseStringArray=t.parseJsonStringArray=void 0;const i=n(7244),a=n(1326),r={fail:i.mapOrFail,drop:i.mapAndDrop};function o(e){try{if(""===e)return[];const t=e.split(",").map((e=>e.trim()));return t.length>0?t:void 0}catch(t){return void a.logger.error("Failed parsing string array",e,t)}}function s(e){return t=>i.includes(e,t)?t:void 0}function c(e){try{const t=e.trim();if(!/^[1-9]\d{0,15}$/.test(t))return;const n=Number(t);if(!Number.isSafeInteger(n))return;return n}catch(t){return void a.logger.error("Failed parsing safe positive integer",e,t)}}t.parseJsonStringArray=function(e){if(e)try{const t=JSON.parse(e);return!Array.isArray(t)||t.some((e=>"string"!=typeof e))?void a.logger.error("Provided JSON is not an array of strings",e):t}catch(t){return void a.logger.error("Failed parsing json",e,t)}},t.parseStringArray=o,t.parseString=function(e){try{return e}catch(t){return void a.logger.error("Failed parsing string",e,t)}},t.enumParser=function(e){const t=new Set(Object.values(e));return function(e){try{return t.has(e)?e:void 0}catch(t){return void a.logger.error("Failed parsing enum",e,t)}}},t.enumArrayParser=function(e){const t=new Set(Object.values(e));return function(e){try{if(""===e)return[];const n=e.split(",").map((e=>e.trim())).filter((e=>t.has(e)));return n.length>0?n:void 0}catch(t){return void a.logger.error("Failed parsing enum array",e,t)}}},t.parseStringUnion=s,t.parseStringUnionArray=function(e,t){const n=s(e);return e=>{const i=o(e);return i&&(e=>r[t](e,n))(i)}},t.parseBoolean=function(e){try{switch(e=e.toLowerCase().trim()){case"0":case"false":return!1;case"1":case"true":return!0;default:return}}catch(t){return void a.logger.error("Failed parsing boolean",e,t)}},t.parseSafePositiveInteger=c,t.parseSafeInteger=function(e){try{const t=Number.parseInt(e,10);return Number.isFinite(t)&&Number.isSafeInteger(t)?t:void a.logger.error("Parsed number is not a safe finite",{parsed:t,raw:e,isFinite:Number.isFinite(t),isSafeInteger:Number.isSafeInteger(t)})}catch(t){return void a.logger.error("Failed parsing int",{raw:e,error:t})}},t.parseSafePositiveFloat=function(e){try{const t=e.trim();if(!/^(0|[1-9]\d*)(\.\d+)?$/.test(t))return;const n=Number(t);if(!Number.isFinite(n)||Math.abs(n)>Number.MAX_SAFE_INTEGER)return;return n}catch(t){return void a.logger.error("Failed parsing safe positive float",e,t)}},t.parseS3FileMultipartUploadMaxPartSize=function(e){try{const t=c(e);if(void 0===t||t<5242880)return;return t}catch(t){return void a.logger.error("Failed parsing S3 file multipart upload max part size",e,t)}},t.parseObject=function(e){try{return JSON.parse(e)}catch(t){return void a.logger.error("Failed parsing object",e,t)}}},6186:(e,t)=>{"use strict";var n,i,a,r;Object.defineProperty(t,"__esModule",{value:!0}),t.isManagementMessage=t.ContentScriptBaseMessageKind=t.ContentScriptIdentifier=t.PageScriptIdentifier=t.ContentScriptManagementOperation=void 0,(r=t.ContentScriptManagementOperation||(t.ContentScriptManagementOperation={})).Initialize="Initialize",r.Uninitialize="Uninitialize",(a=t.PageScriptIdentifier||(t.PageScriptIdentifier={})).ObjectUrlPageScript="objectUrlPageScript",a.SafariDownloadClickPageScript="safariDownloadClickPageScript",a.ChromeExpPageScript="chromeExpPageScript",a.UploadDetectionPageScript="uploadDetectionPageScript",(i=t.ContentScriptIdentifier||(t.ContentScriptIdentifier={})).ChromeExp="chromeExp",i.BlobDownload="blobDownload",i.DetectionRescan="detectionRescan",i.PageInfo="pageInfo",i.Timers="timers",i.SignInEnforcementInteractionsDisabling="signInEnforcementInteractionsDisabling",i.DomainDefinedSDD="domainDefinedSDD",i.SafariDownloadClickContentScript="safariDownloadClickContentScript",i.UploadDetectionContentScript="uploadDetectionContentScript",function(e){e.Management="management"}(n=t.ContentScriptBaseMessageKind||(t.ContentScriptBaseMessageKind={})),t.isManagementMessage=function(e){if(!e||"object"!=typeof e)return!1;const{kind:t}=e;return t===n.Management}},6860:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.onBypassBlockPageHandler=t.shouldBypass=void 0;const a=i(n(398)),r=n(1276),o=n(8459),s=n(5998),c=n(3097),l=n(1326),u=n(9103),d=new c.LimitedCache("domain-bypass",0);t.shouldBypass=async function(e,t){const{maliciousWebsitesBypassEnabled:n,useBypassPerTabInWarnMode:i}=await o.getConfiguration();if(!n)return!1;const a=new URL(e).hostname,r=a.startsWith("www.")?a.slice(4):a,s=u.getTabsManager(),c=t?await s.get(t):void 0;if(c&&i&&c.bypassDomains)return c.bypassDomains.includes(r);const p=await d.has(r);return l.logger.debug("shouldBypass",p,e),p},t.onBypassBlockPageHandler=async function(e,t,n){l.logger.debug("onBypassBlockPageHandler: ",t);const{maliciousWebsitesBypassTtlMs:i,useBypassPerTabInWarnMode:c}=await o.getConfiguration(),p=new URL(t).hostname,f=p.startsWith("www.")?p.slice(4):p;if(n===r.BlockPageDetectionMode.Warn&&c){const t=u.getTabsManager(),n=await t.get(e),i=(null==n?void 0:n.bypassDomains)&&(null==n?void 0:n.bypassDomains.length)>0?[...null==n?void 0:n.bypassDomains,f]:[f];await t.update(e,{bypassDomains:i})}else await d.set(f,0,{ttl:i});await a.default.tabs.update(e,{url:t}),s.processTelemetry({category:r.TelemetryCategory.User,type:r.TelemetryType.UserInterface,metadata:{action:r.UserInterfaceAction.BlockPageContinueAnyWay},timestamp:new Date})}},8244:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.onBackToSafetyHandler=t.onTabClosedHandler=t.onRescanTriggeredHandler=t.onCompletedHandler=t.onCommittedHandler=t.onBeforeNavigationHandler=void 0;const a=i(n(398)),r=n(1276),o=n(611),s=n(9552),c=n(8459),l=n(4570),u=n(1311),d=n(7121),p=n(1748),f=n(7833),g=n(9103),h=n(7904),m=n(6339),v=n(1326),y=n(5560),b=n(4345),w=n(4770),S=n(6966);async function x(e,t,n){var i;const{connectivityChannels:a,id:r}=t||{};if(null==a?void 0:a.email)return;const o=null===(i=n.slice(0,2).find((e=>{var t;return null===(t=e.connectivityChannels)||void 0===t?void 0:t.email})))||void 0===i?void 0:i.connectivityChannels;if(o)if(r){const e=await f.getSessionManager();await e.update(r,{connectivityChannels:o})}else v.logger.warn("updateConnectivityChannels: no session found",{tabId:e,sessionId:r})}const C=e=>{if(!(null==e?void 0:e.email))return{connectivityLookup:{email:!0}}};async function T({tabId:e,url:t,timestamp:n,forceScan:i,sessionId:a,navigationStage:o,activationStatus:c,navigationSetId:l}){v.logger.debug("pre-scan api for url",{tabId:e,url:t,forceScan:i,sessionId:a});const u=await f.getSessionManager(),d=await u.get(a);if(!d)return v.logger.warn("callPreScan: aborting - session not found",e,a),!1;const{connectivityChannels:h}=d||{},m=await A(l,n),y=await p.urlPreScan(Object.assign({url:t,remoteIp:s.getUrlIp(t),navigationSetId:l,tabId:e,sessionId:a,connectivityChannels:h,entries:m},C(h)),i?p.CacheMode.ignoreCache:p.CacheMode.useCache);v.logger.debug("pre-scan api response for url",{tabId:e,url:t,forceScan:i,response:y}),await x(e,d,[y]);const S=g.getTabsManager(),T=await S.get(e);if(!T)return v.logger.debug("callPreScan: aborting - tab doesn't exist",e),!1;if(!T.isDetectionActive)return v.logger.debug("callPreScan: aborting - detection is not active",e),!1;const{verdict:E,reason:I,scanId:_}=y,{action:D,stopDetection:k,actionType:P}=await w.determineAction({tabId:e,url:t,verdict:E,scanType:r.ScanType.UrlPreScan,reason:I,scanId:_,incognito:T.incognito,activationStatus:c,navigationStage:o});return await S.update(e,{lastVerdict:{verdict:E,returnedBy:r.ScanType.UrlPreScan,reason:I,timestamp:Date.now()},lastActionType:P,isDetectionActive:!k}),await D(),b.sendUrlScanTelemetry(y,r.ScanType.UrlPreScan,n,t,P),!k}const E=(e,t,n)=>{var i,a;return t===r.ActivationStatus.ActiveForEmail&&!(null===(i=null==n?void 0:n.connectivityChannels)||void 0===i?void 0:i.email)&&e.verdictOrigin===r.VerdictOrigin.Cache&&!(null===(a=e.connectivityChannels)||void 0===a?void 0:a.email)};async function I({tabId:e,navigationEntries:t,forceScan:n,sessionId:i,navigationSetId:a,navigationStage:o,incognito:s=!1}){v.logger.debug("bulkPreScan: started",{tabId:e,navigationEntries:t,forceScan:n,sessionId:i});const l=await f.getSessionManager(),u=await l.get(i);if(!u)return v.logger.warn("bulkPreScan: aborting - session not found",e,i),!1;const{activationStatus:d,useNewLookupAPI:h}=await c.getConfiguration(),{connectivityChannels:y}=u||{},b=C(y),S=h?await async function(e,t,n,i,a,o,s){const c={lookupChannels:[m.UrlLookupChannel.Verdict,...(null==a?void 0:a.email)?[]:[m.UrlLookupChannel.Email]],entries:t,navigationSetId:i,tabId:e,sessionId:n,connectivityChannels:a},l=await p.urlLookup(c,function(e,t){return(n,i)=>{var a;const o=n.lookupChannels.includes(m.UrlLookupChannel.Email),s=n.lookupChannels.includes(m.UrlLookupChannel.Verdict),c=Boolean(null===(a=null==t?void 0:t.connectivityChannels)||void 0===a?void 0:a.email)||i.lookupResults.some((e=>{var t;return Boolean(null===(t=e.connectivityChannels)||void 0===t?void 0:t.email)})),l=e===r.ActivationStatus.ActiveForEmail&&c||e===r.ActivationStatus.Active,u=n.entries.length===i.lookupResults.length;switch(!0){case o&&!s:return l;case!o&&s:return u;case o&&s:return l&&u;default:return!1}}}(s,o));return l.lookupResults}(e,t,i,a,y,u,d):await async function(e,t,n,i,a,o,s,c){const l=await Promise.all(t.map((t=>async function(e,t,n){const{url:i,tabId:a}=e,r=await p.urlPreScan(e);return E(r,t,n)?(v.logger.debug("Retrying pre-scan with email connectivity",a,i),await p.urlPreScan(e,p.CacheMode.ignoreCache)):r}(Object.assign({url:t.url,remoteIp:t.remoteIp,navigationSetId:i,tabId:e,sessionId:n,connectivityChannels:a},o),c,s).catch((n=>(v.logger.error("bulkPreScan: failed to call preScan",e,t,n),{url:t.url,verdict:r.Verdict.Unknown}))))));return l}(e,t,i,a,y,b,u,d);await x(e,u,[...S]);const T=g.getTabsManager(),I=await T.get(e);if(!I)return v.logger.debug("bulkPreScan: aborting - tab doesn't exist",e),!1;if(!I.isDetectionActive)return v.logger.debug("bulkPreScan: aborting - detection is not active",e),!1;const{verdict:_,response:A}=function(e,t){const n=t.find((e=>e.verdict===r.Verdict.Malware));if(n&&n.url)return{verdict:r.Verdict.Malware,response:n};const i=t.find((e=>e.verdict===r.Verdict.Suspicious));if(i)return{verdict:r.Verdict.Suspicious,response:i};const a=t[t.length-1];return a&&a.verdict===r.Verdict.Clean?{verdict:r.Verdict.Clean,response:a}:{verdict:r.Verdict.Unknown}}(0,S),{action:D,actionType:k,stopDetection:P}=await w.determineAction({tabId:e,verdict:_,scanType:r.ScanType.UrlPreScan,incognito:s,url:(null==A?void 0:A.url)||"",activationStatus:d,navigationStage:o,connectivityChannels:y});return await T.update(e,{lastVerdict:{verdict:_,returnedBy:r.ScanType.UrlPreScan,reason:null==A?void 0:A.reason,timestamp:Date.now()},lastActionType:k,isDetectionActive:!P}),await D(),v.logger.debug("bulkPreScan: done",{tabId:e,finalVerdict:_,chosenResponse:A,stopDetection:P,navigationEntries:t,forceScan:n,responses:S}),!P}async function _(e,t,n){var i,a;const o=await f.getSessionManager(),s=await o.get(e);if(s){if(n===r.ActivationStatus.ActiveForEmail&&!(null===(i=s.connectivityChannels)||void 0===i?void 0:i.email)){const i=await o.getUrlSession(t,n);i&&(null===(a=i.connectivityChannels)||void 0===a?void 0:a.email)&&await o.update(e,{connectivityChannels:i.connectivityChannels})}}else v.logger.warn("updateSessionConnectivityByUrl: session not found",e)}async function A(e,t){const n=await f.getNavigationEventsStore();return[...new Set((await n.findBySetId(e)).filter((e=>e.timestamp<=t)).sort(((e,t)=>e.timestamp-t.timestamp)).map((e=>e.url))).values()].map((e=>({url:e,remoteIp:s.getUrlIp(e)})))}async function D(e,t,n,i,a,o,s,l,h){v.logger.debug("fullScan started",{url:i,tabId:e,scanType:o});const{shouldScan:m,description:x}=await u.shouldScanUrl(e,i);if(!m)return v.logger.debug("fullScan: aborting scan",{tabId:e,url:i,description:x}),!1;const C=g.getTabsManager(),T=await C.get(e);if(!T)return v.logger.warn("fullScan: aborting - tab doesn't exist",e),!1;if(!T.isDetectionActive)return v.logger.debug("fullScan: aborting - detection is not active",e),!1;const E=await f.getSessionManager(),I=await E.get(t);if(!I)return v.logger.warn("fullScan: aborting - session doesn't exist",e,t),!1;const _=await A(n,a);try{v.logger.debug("fullScan: request",e,i);const{request:t,response:f}=await p.urlScan(i,o===r.ScanType.ReScan?p.CacheMode.ignoreCache:p.CacheMode.useCache,(async t=>{d.showScanReasonToast(h,e),await y.deactivate(e);const i=await S.collectEvidence(e,t,l);await y.activate(e);const a=await u.getScanRequest(i,e,I,n,_),{mandatoryEvidences:r}=await c.getConfiguration(),o=Object.keys(a),s=r.filter((e=>!o.includes(e)));if(s.length>0){const t=`Missing mandatory evidence: ${s.join(", ")}`;throw d.showScanAbortedToast(t,e),new Error(t)}return y.incrementScanCount(e),a}));v.logger.debug("fullScan: response",e,f,i);const{verdict:g,reason:m,scanId:x,decisionDescriptions:E,verdictOrigin:A}=f,{action:D,actionType:k,stopDetection:P}=await w.determineAction({tabId:e,url:i,verdict:g,scanType:o,scanId:x,reason:m,decisionDescriptions:E,incognito:T.incognito,activationStatus:s});return await C.update(e,{lastVerdict:{verdict:g,returnedBy:o,reason:m,timestamp:Date.now()},lastActionType:k,isDetectionActive:!P}),await D(),await b.sendUrlScanTelemetry(f,o,a,i,k,A===r.VerdictOrigin.Network&&t?b.getEvidenceSummary(t):void 0),void 0!==t&&async function({screenshot:e},{scanId:t,verdict:n}){const{detectionEnrichmentOnMal:i,collectScreenshot:a,verdictsToSendScreenshotEvidence:r}=await c.getConfiguration();if(i&&a&&r.includes(n)&&e&&t){const n={scanId:t,screenshot:e};await p.scanEnrichment(n)}}(t,f),v.logger.debug("fullScan finished",{url:i,tabId:e,scanType:o,stopDetection:P}),!P}catch(t){return v.logger.error("fullScan: failed to call scan",{url:i,tabId:e,scanType:o},t),!0}}async function k(e,t,n){v.logger.debug("cachedScan started",{url:t,tabId:e});const i=g.getTabsManager(),a=await i.get(e);if(!a)return v.logger.debug("cachedScan: aborting - tab doesn't exist",e),!1;if(!a.isDetectionActive)return v.logger.debug("cachedScan: aborting - detection is not active",e),!1;try{v.logger.debug("cachedScan: request",e,t);const{response:o}=await p.urlScan(t,p.CacheMode.onlyCache);v.logger.debug("cachedScan: response",e,o,t);const{verdict:s,reason:l,scanId:u,decisionDescriptions:d}=o,{activationStatus:f}=await c.getConfiguration(),{action:g,actionType:h,stopDetection:m}=await w.determineAction({tabId:e,url:t,verdict:s,scanType:r.ScanType.Scan,scanId:u,reason:l,decisionDescriptions:d,incognito:a.incognito,activationStatus:f});return await i.update(e,{lastVerdict:{verdict:s,returnedBy:r.ScanType.Scan,reason:l,timestamp:Date.now()},lastActionType:h,isDetectionActive:!m}),await g(),await b.sendUrlScanTelemetry(o,r.ScanType.Scan,n,t,h),v.logger.debug("cachedScan finished",{url:t,tabId:e,stopDetection:m}),!m}catch(n){v.logger.error("cachedScan: failed to call scan",{url:t,tabId:e},n)}return!1}t.onBeforeNavigationHandler=async function({tabId:e,timeStamp:t,url:n}){v.logger.debug("onBeforeNavigationHandler",n,e);const i=g.getTabsManager();if(!await i.get(e))return void v.logger.warn("aborting onBeforeNavigationHandler as tab doesn't exist",e);const a=await f.getSessionManager(),{session:s,origin:l}=await a.resolve(e,n),{enableNavigationEventsSquashing:u,onBeforeNavigateEventsSquashingIntervalMs:d,activationStatus:p}=await c.getConfiguration(),m=await f.getNavigationEventsStore();if(u&&(await m.findByUrl(n)).some((e=>e.metadata.navigationStage===h.NavigationStage.OnBeforeNavigate&&Math.abs(e.timestamp-t)<d)))return void v.logger.warn("onBeforeNavigationHandler: dropping event handling due to similarity",e,n);const y=o.v4();await m.add({tabId:e,url:n,sessionId:s.id,timestamp:t,setId:y,metadata:{navigationStage:h.NavigationStage.OnBeforeNavigate}}),await i.update(e,{navigationSetId:y,sessionId:s.id,sessionResolvingOrigin:l,lastVerdict:void 0,lastActionType:r.ActionType.None,isDetectionActive:!0});try{await k(e,n,t)?await T({tabId:e,url:n,timestamp:t,sessionId:s.id,navigationSetId:y,activationStatus:p,navigationStage:h.NavigationStage.OnBeforeNavigate}):v.logger.debug("onBeforeNavigationHandler: handled using cached scan",e,n)}catch(t){v.logger.error("onBeforeNavigationHandler: failed to call preScan",e,t)}v.logger.debug("onBeforeNavigationHandler finished",n,e)},t.onCommittedHandler=async function({tabId:e,url:t,timeStamp:n,transitionType:i,transitionQualifiers:a}){v.logger.debug("onCommitted started",t,e),await l.handleNavigationCause(e,i);const r=g.getTabsManager(),o=await r.get(e);if(!o||!o.navigationSetId||!o.sessionId)return void v.logger.warn("aborting onCommittedHandler as tab info doesn't exist",e);const{navigationSetId:s,sessionId:u,incognito:d}=o,{activationStatus:p}=await c.getConfiguration(),m=await f.getNavigationEventsStore();await m.add({tabId:e,url:t,sessionId:u,timestamp:n,setId:s,metadata:{navigationStage:h.NavigationStage.OnCommitted,transitionQualifiers:a,transitionType:i}}),await _(u,t,p);try{await k(e,t,n)?await T({tabId:e,url:t,timestamp:n,sessionId:u,navigationSetId:s,activationStatus:p,incognito:d,navigationStage:h.NavigationStage.OnCommitted}):v.logger.debug("onCommitted: handled using cached scan",e,t)}catch(t){v.logger.error("onCommitted: failed to call preScan",e,t)}v.logger.debug("onCommitted finished",t,e)},t.onCompletedHandler=async function({tabId:e,url:t,timeStamp:n}){v.logger.debug("onCompleted started",t,e);const i=g.getTabsManager(),a=await i.get(e);if(!a||!a.navigationSetId||!a.sessionId)return void v.logger.debug("aborting onCompletedHandler as tab info doesn't exist",e);const{navigationSetId:o,sessionId:s,incognito:l}=a,{activationStatus:u}=await c.getConfiguration(),d=await f.getNavigationEventsStore();await d.add({tabId:e,url:t,sessionId:s,timestamp:n,setId:o,metadata:{navigationStage:h.NavigationStage.OnCompleted}}),await _(s,t,u);const p=await A(o,n);let m=await I({tabId:e,forceScan:!0,sessionId:s,navigationSetId:o,incognito:l,navigationStage:h.NavigationStage.OnCompleted,navigationEntries:p});v.logger.debug("onCompleted: post bulk pre scan",{shouldContinue:m,tabId:e,url:t}),m&&(m=await D(e,s,o,t,n,r.ScanType.Scan,u,void 0,r.ScanReason.WebsiteLoaded)),m&&await y.activate(e),v.logger.debug("onCompleted finished",t,e)},t.onRescanTriggeredHandler=async function({tabId:e,url:t,extensionEvidences:n,timeStamp:i,reason:a}){v.logger.debug("onRescanTriggeredHandler: started",e,t);const o=g.getTabsManager(),s=await o.get(e);if(!s||!s.navigationSetId||!s.sessionId)return void v.logger.warn("onRescanTriggeredHandler aborted, tab info doesn't exist",e);const{navigationSetId:l,sessionId:u}=s,d=await f.getSessionManager(),p=await d.get(u);if(!p)return void v.logger.warn("onRescanTriggeredHandler: session not found",e,u);const{activationStatus:h}=await c.getConfiguration();let m=!0;try{m=await T({tabId:e,url:t,timestamp:i,forceScan:!1,sessionId:p.id,navigationSetId:l,activationStatus:h})}catch(t){v.logger.error("onRescanTriggeredHandler: failed to call preScan",e,t),m=!0}m&&(v.logger.debug("onRescanTriggeredHandler: continuing with full scan",e,t),m=await D(e,u,l,t,i,r.ScanType.ReScan,h,n,a)),m||(v.logger.debug("onRescanTriggeredHandler: deactivating rescans",e,t),await y.deactivate(e)),v.logger.debug("onRescanTriggeredHandler: finished",e,t)},t.onTabClosedHandler=function(e){v.logger.debug("tab closed:",e)},t.onBackToSafetyHandler=async function(e){v.logger.debug("User requested to go back to safety",e);const t=(await a.default.tabs.get(e)).index;await a.default.tabs.create({index:t}),await a.default.tabs.remove(e),b.sendBackToSafetyTelemtry()}},4770:function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.determineAction=void 0;const a=n(1276),r=n(8459),o=n(7121),s=n(1477),c=n(9698),l=n(1326),u=n(6860),d=n(4458),p=n(9249),f=n(611),g=n(9103),h=n(7904),m={actionType:a.ActionType.None,action:()=>Promise.resolve(),stopDetection:!1},v={[a.Verdict.Clean]:async function({scanType:e,navigationStage:t,activationStatus:n,url:i}){const{maliciousWebsiteDetection:o}=await r.getConfiguration();return Object.assign(Object.assign({},m),{action:()=>(async function(e,t,n){var i;if(e===a.MaliciousWebsiteDetection.Disabled)return void l.logger.info("sendMaliciousUrlDetectionEvent: The event won't be sent for Disabled malicious website detection mode");const r=p.getDomainFromUrl(t),o=g.getTabsManager(),s=await o.getActive();d.processEvent({category:a.EventCategory.Detection,type:a.EventType.CleanUrl,timestamp:new Date,metadata:{url:t,domain:r,scanType:n,verdict:a.Verdict.Clean},destination:[a.EventDestination.IR],sessionId:null!==(i=null==s?void 0:s.sessionId)&&void 0!==i?i:f.v4(),eventId:f.v4()})}(o,i,e),Promise.resolve()),stopDetection:n===a.ActivationStatus.Disabled||e===a.ScanType.UrlPreScan&&t===h.NavigationStage.OnCompleted})},[a.Verdict.Malware]:y,[a.Verdict.Suspicious]:async function({tabId:e,decisionDescriptions:t}){const{warnSuspiciousWebsites:n,maliciousWebsiteDetection:i}=await r.getConfiguration();return n&&i!==a.MaliciousWebsiteDetection.Silent?{actionType:a.ActionType.Notification,action:()=>o.showSuspiciousWebsiteNotificationSafe(e,null==t?void 0:t[0]),stopDetection:!1}:m},[a.Verdict.Unknown]:async function(e){const{tabId:t,verdict:n,scanType:i,navigationStage:o,activationStatus:s,connectivityChannels:c}=e,{treatUnknownAsMalicious:u}=await r.getConfiguration();if(u&&i===a.ScanType.Scan)return l.logger.debug("determineAction: Treating unknown as malicious",{tabId:t,verdict:n}),y(e);const d=s===a.ActivationStatus.Disabled||i===a.ScanType.UrlPreScan&&o===h.NavigationStage.OnCompleted&&s===a.ActivationStatus.ActiveForEmail&&!(null==c?void 0:c.email);return Object.assign(Object.assign({},m),{stopDetection:d})}};async function y({tabId:e,url:t,incognito:n,scanId:i,reason:l,scanType:d}){const{showToastWarnings:p,maliciousWebsiteDetection:f}=await r.getConfiguration();if(f===a.MaliciousWebsiteDetection.Silent||await u.shouldBypass(t,e))return Object.assign(Object.assign({},m),{action:()=>(w(f,t,d,i),Promise.resolve()),stopDetection:!0});if(p)return{actionType:a.ActionType.Notification,action:()=>(o.showMaliciousWebsiteNotificationSafe(t,e),w(f,t,d,i),Promise.resolve()),stopDetection:!0};if(n){if(f===a.MaliciousWebsiteDetection.Block)return{actionType:a.ActionType.BlockPage,action:()=>(w(f,t,d,i),c.showWebsiteDetectionBlockPage(e,t,l)),stopDetection:!0};if(f===a.MaliciousWebsiteDetection.Warn)return{actionType:a.ActionType.Notification,action:()=>(o.showMaliciousWebsiteNotificationSafe(t,e),Promise.resolve()),stopDetection:!0}}const g=f===a.MaliciousWebsiteDetection.Warn;return{actionType:a.ActionType.BlockPage,action:()=>(w(f,t,d,i),s.showWebsiteDetectionBlockPage(e,t,i,l,g)),stopDetection:!0}}t.determineAction=async function(e){const{verdict:t}=e,n=v[t];if(!n)return l.logger.error("determineAction: no handler defined",e),m;const a=await n(e),{action:r}=a,o=i(a,["action"]);return l.logger.debug("determineAction:",{parameters:e,action:o}),a};const b={[a.MaliciousWebsiteDetection.Block]:{activity:"Malicious website blocked",details:"Malicious website was blocked - based on policy settings."},[a.MaliciousWebsiteDetection.Warn]:{activity:"User warned before accessing malicious website",details:"User was warned before accessing malicious website - based on policy settings."},[a.MaliciousWebsiteDetection.Silent]:{activity:"Malicious website detected",details:"Malicious website was detected. The user was not warned  - based on policy settings [Silent mode]."}};async function w(e,t,n,i){var r;if(e===a.MaliciousWebsiteDetection.Disabled)return void l.logger.info("sendMaliciousUrlDetectionEvent: The event won't be sent for Disabled malicious website detection mode");const o=p.getDomainFromUrl(t),s=b[e],c=g.getTabsManager(),u=await c.getActive();d.processEvent({category:a.EventCategory.Detection,type:a.EventType.MaliciousUrl,timestamp:new Date,metadata:{scanId:i,scanType:n,verdict:a.Verdict.Malware,url:t,domain:o},activity:s.activity,details:`${s.details} URL: ${t}`,destination:[a.EventDestination.ABS],sessionId:null!==(r=null==u?void 0:u.sessionId)&&void 0!==r?r:f.v4(),eventId:f.v4()})}},612:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractClause=void 0;const r=n(618),o=n(1676),s=n(6686),c=n(9517);class l{constructor(){this.operator=o.Operator.AND,this.value="",this.isInverted=!1,this.clauseResult=!1}applyClause(e){return this.clauseResult=this.isInverted?!e:e,this.clauseResult}applyOperator(e,t){switch(this.operator){case o.Operator.AND:return this.applyClause(t)&&e;case o.Operator.OR:return this.applyClause(t)||e;default:throw new c.InvalidClauseError(this,"Invalid Clause was applied, operator is invalid")}}toUniqueString(){return[this.clauseType,...this.uniqueFieldValues].join("___")}isValid(){return this.operator!==o.Operator.Unknown}}i([r.Expose({name:"operator"}),r.Transform((({value:e})=>s.parseEnumOrDefault(o.Operator,e,o.Operator.Unknown)),{toClassOnly:!0}),a("design:type",String)],l.prototype,"operator",void 0),i([r.Expose({name:"value"}),a("design:type",Object)],l.prototype,"value",void 0),i([r.Exclude(),a("design:type",Object)],l.prototype,"isInverted",void 0),i([r.Exclude(),a("design:type",Object)],l.prototype,"clauseResult",void 0),t.AbstractClause=l},9966:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInvertedAction=void 0,t.getInvertedAction=function(e){const t="not"===e.split(" ")[0];return t&&(e=e.slice(4)),{inverted:t,action:e}}},1676:(e,t)=>{"use strict";var n,i,a,r;Object.defineProperty(t,"__esModule",{value:!0}),t.ClauseType=t.Condition=t.Operator=t.Method=void 0,(r=t.Method||(t.Method={})).Contains="contains",r.Text="contains text",r.Regex="regex",r.XPath="xpath",r.CSS="css_selector",r.Unknown="unknown",(a=t.Operator||(t.Operator={})).AND="and",a.OR="or",a.Unknown="unknown",(i=t.Condition||(t.Condition={})).Equals="path equal",i.Contains="path contains",i.DomainEquals="domain_equal",i.DomainEndsWith="domain_endswith",i.DomainStartsWith="domain_startswith",i.Unknown="unknown",(n=t.ClauseType||(t.ClauseType={})).HTML="html",n.URL="url"},6936:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicEvidenceInfo=void 0,n(4741);const r=n(618),o=n(6865),s=n(1339),c=n(612),l=n(1676);class u{constructor(){this.description="",this.name="",this.clauses=[],this.result=!1}applyClauseOrOperator(e,t,n){return void 0===t?e.applyClause(n):e.applyOperator(t,n)}applyForSpecificClauseType(e,t){let n;for(const i of this.clauses){const a=e.has(i.toUniqueString());(t===l.ClauseType.HTML&&i instanceof o.HtmlContentClause||t===l.ClauseType.URL&&i instanceof s.UrlPathClause)&&(n=this.applyClauseOrOperator(i,n,a))}return this.result=null==n||n,this.result}isValid(){for(const e of this.clauses)if(!e.isValid())return!1;return!0}}i([r.Expose({name:"description"}),a("design:type",Object)],u.prototype,"description",void 0),i([r.Expose({name:"evidence_name"}),a("design:type",Object)],u.prototype,"name",void 0),i([r.Expose(),r.Type((()=>c.AbstractClause),{discriminator:{property:"clause_type",subTypes:[{value:o.HtmlContentClause,name:"html_content"},{value:s.UrlPathClause,name:"url_path"}]}}),a("design:type",Array)],u.prototype,"clauses",void 0),i([r.Exclude(),a("design:type",Object)],u.prototype,"result",void 0),t.DynamicEvidenceInfo=u},6865:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlContentClause=void 0;const o=n(618),s=n(2481),c=n(612),l=n(1676),u=n(9966),d=r(n(680)),p=n(6686),f=n(9517),g=new s.ContentScriptLogger("html-content-clause");class h extends c.AbstractClause{constructor(){super(...arguments),this.iframeDepthLimit=-1,this.iframeLevelLimit=-1,this._method="",this._enumMethod=l.Method.Contains,this.clauseType=l.ClauseType.HTML}get method(){return this._method}set method(e){this._method=e,({inverted:this.isInverted,action:e}=u.getInvertedAction(e)),this._enumMethod=p.parseEnumOrDefault(l.Method,e,l.Method.Unknown)}get uniqueFieldValues(){return[this.method,this.value]}getClauseDescription(){return`method: ${this.method}, value: ${this.value}`}clauseImpl(e){try{return this.internalClauseImpl(e)}catch(e){return g.info("HtmlContentClause: threw exception",this,e),!1}}internalClauseImpl(e){var t,n;const i=this.value.trim();switch(this._enumMethod){case l.Method.XPath:return document.evaluate(this.value,document,void 0,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE).snapshotLength>0;case l.Method.CSS:return document.querySelectorAll(this.value).length>0;case l.Method.Regex:return new RegExp(this.value,"mi").test(e);case l.Method.Contains:return new RegExp(d.default(i),"mi").test(e);case l.Method.Text:return new RegExp(d.default(i),"mi").test(null!==(n=null===(t=document.firstElementChild)||void 0===t?void 0:t.textContent)&&void 0!==n?n:"");default:throw new f.InvalidClauseError(this,"Tried to apply an invalid clause")}}isValid(){return super.isValid()&&this._enumMethod!==l.Method.Unknown}}i([o.Expose({name:"iframe_depth_limit"}),a("design:type",Object)],h.prototype,"iframeDepthLimit",void 0),i([o.Expose({name:"iframe_level_limit"}),a("design:type",Object)],h.prototype,"iframeLevelLimit",void 0),i([o.Exclude(),a("design:type",Object)],h.prototype,"_method",void 0),i([o.Exclude(),a("design:type",String)],h.prototype,"_enumMethod",void 0),i([o.Expose({name:"method"}),a("design:type",String),a("design:paramtypes",[String])],h.prototype,"method",null),t.HtmlContentClause=h},9517:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidClauseError=void 0;class n extends Error{constructor(e,t){super(t),this.Clause=e}}t.InvalidClauseError=n},1339:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.UrlPathClause=void 0;const r=n(618),o=n(2481),s=n(612),c=n(1676),l=n(9966),u=n(6686),d=n(9517),p=new o.ContentScriptLogger("url-path-clause");class f extends s.AbstractClause{constructor(){super(...arguments),this._condition="",this._enumCondition=c.Condition.Contains,this.clauseType=c.ClauseType.URL}get condition(){return this._condition}set condition(e){this._condition=e,({inverted:this.isInverted,action:e}=l.getInvertedAction(e)),this._enumCondition=u.parseEnumOrDefault(c.Condition,e,c.Condition.Unknown)}get uniqueFieldValues(){return[this.condition,this.value]}getClauseDescription(){return`method: ${this.condition}, value: ${this.value}`}clauseImpl(e){try{return this.internalClauseImpl()}catch(e){return p.info("UrlPathClause: threw exception",this,e),!1}}internalClauseImpl(){const e=location.href.toLocaleLowerCase(),t=location.hostname.replace(/^www\./,"").toLocaleLowerCase().trim(),n=this.value.toLocaleLowerCase().trim();switch(this._enumCondition){case c.Condition.Equals:return e===n;case c.Condition.Contains:return e.includes(n);case c.Condition.DomainEquals:return t===n;case c.Condition.DomainEndsWith:return t.endsWith(n);case c.Condition.DomainStartsWith:return t.startsWith(n);default:throw new d.InvalidClauseError(this,"Invalid Clause was applied, Condition is Invalid")}}isValid(){return super.isValid()&&this._enumCondition!==c.Condition.Unknown}}i([r.Exclude(),a("design:type",Object)],f.prototype,"_condition",void 0),i([r.Exclude(),a("design:type",String)],f.prototype,"_enumCondition",void 0),i([r.Expose({name:"condition"}),a("design:type",String),a("design:paramtypes",[String])],f.prototype,"condition",null),t.UrlPathClause=f},6966:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isEvidenceCollectionError=t.EvidenceCollectionError=t.collectEvidence=void 0;const a=n(2543),r=i(n(398)),o=n(618),s=n(1748),c=n(8711),l=n(8459),u=n(9103),d=n(1326),p=n(9792),f=n(1311),g=n(8585),h=n(6936),m=n(1676),v=n(9552),y=n(4570),b=n(9084),w=n(1354),S=n(7474);let x,C=0;async function T(e,t,n){return await r.default.tabs.sendMessage(e,{kind:c.MessageKind.GetDynamicEvidence,rawClauses:o.instanceToPlain(n)},{frameId:t})}const E=async(e,t,n,i)=>{const r=function(e){const t=e.reduce(((e,t)=>[...e,...t.clauses]),[]);return a.uniqBy(t,(e=>e.toUniqueString()))}(e).filter((e=>e.clauseType===i)).filter((e=>e.isValid())),o=await async function(e,t,n){const i=new Set;for(const a of e)try{const e=n.filter((e=>!i.has(e.toUniqueString())));d.logger.debug("getDynamicEvidenceFromTab: processing frame",t,a);const r=await T(t,a,e);if(void 0===r)throw new Error("response is undefined");d.logger.debug("getDynamicEvidenceFromTab: got response",t,a,r);for(const e of r.foundClauses)i.add(e)}catch(e){d.logger.error("getDynamicEvidenceFromTab: failed to get evidence from frame",t,a,e)}return i}(t,n,r);return function(e,t,n){const i=[];for(const a of e)if(a.isValid())try{a.applyForSpecificClauseType(t,n)&&i.push(a)}catch(e){d.logger.error("Error while applying evidence",a.name,e)}else d.logger.warn("Invalid evidence rule",a);return i}(e,o,i)};async function I(e){const{collectDynamicEvidence:t,dynamicEvidenceUpdateTimestamp:n}=await l.getConfiguration();if(!t)return;const i=u.getTabsManager(),a=await i.get(e);if(!a)return void d.logger.debug("getDynamicEvidenceFromTab: failed",e);if(f.isLocalFileInSafari(a.url))throw new Error("dynamic evidence collection for local files in Safari is not supported");if(!x||C<n){const e=await s.getDynamicEvidence();x=o.plainToInstance(h.DynamicEvidenceInfo,e,{excludeExtraneousValues:!0}),C=n}if(void 0===x)return void d.logger.warn("getDynamicEvidenceFromTab: no evidence json definition file",e);const c=await r.default.webNavigation.getAllFrames({tabId:e});if(!c)return void d.logger.debug("getDynamicEvidenceFromTab: failed to get frames",e);const p=await E(x,[0],e,m.ClauseType.URL),g=c.filter((({parentFrameId:e})=>0===e)).map((({frameId:e})=>e)),v=(await E(p,[0,...g],e,m.ClauseType.HTML)).map((e=>e.name));return d.logger.debug("getDynamicEvidenceFromTab: got evidence",e,v),v}async function _(e){const{collectFavicon:t}=await l.getConfiguration();if(!t)return;const n=u.getTabsManager(),i=await n.get(e);if(!i)return void d.logger.debug("getFavicon: couldn't acquire tab",e);const a=await p.getFaviconFromExtensionApi(i);if(a)return d.logger.debug("getFavicon: fetched favicon via extension api",e),a;const r=await p.getFaviconFromTab(i);if(r)return d.logger.debug("getFavicon: fetched favicon via tab api",e),r;const o=await p.getFaviconFromGoogleService(i);if(o)return d.logger.debug("getFavicon: fetched favicon from google services by domain",e),o;d.logger.warn("Failed to get favicon",i)}async function A(e){const t=u.getTabsManager(),n=await t.get(e);if(n)return null==n?void 0:n.title;d.logger.debug("getTabTitle: couldn't acquire tab",e)}async function D(e){const{collectScreenshot:t}=await l.getConfiguration();if(!t)return;const n=u.getTabsManager();if(await n.get(e))return d.logger.debug("getScreenshotIfNeeded: getting screenshot for tab",e),await async function(e){const{screenshotRetryLimit:t}=await l.getConfiguration(),n=await g.asyncTrySafe("collect-screenshot",(async()=>{const t=u.getTabsManager(),n=await t.getActive();if((null==n?void 0:n.id)===e)return{full:await r.default.tabs.captureVisibleTab()};d.logger.debug("getScreenshot: active tab changed, aborting screenshot",e,null==n?void 0:n.id)}),t,100,!1);return d.logger.debug("getScreenshot: got screenshot?",void 0!==n,e),n}(e);d.logger.debug("Not taking screenshot, tab doesn't exist anymore",e)}var k;function P(e,t=""){return{name:`not-collected-${e}`,category:"evidence-not-collected",description:`Evidence ${e} was not collected because ${t}`,data:{}}}!function(e){e.FavIconBase64="favIconBase64",e.Title="title",e.Screenshot="screenshot",e.DynamicEvidence="dynamicEvidence",e.PreviousPageInfo="previousPageInfo",e.HtmlDom="htmlDom",e.RemoteIp="remoteIp",e.WebsiteStatistics="websiteStatistics",e.WebsitePermissions="websitePermissions"}(k||(k={})),t.collectEvidence=async function(e,t,n){let i={url:t},a=!1;const r=n||new Array;for(const n of Object.values(k))try{if(a){r.push(P(n,"url changed"));continue}const o=await O(e,t,n),{shouldScan:s,description:c}=await f.shouldScanUrl(e,t);if(!s){d.logger.debug("collectEvidence: aborting evidence collection",{tabId:e,url:t,evidenceType:n,description:c}),r.push(P(n,"url changed")),a=!0;continue}o&&(i=Object.assign(Object.assign({},i),o))}catch(t){d.logger.warn(`collectEvidence: exception ${n}`,e,t),R(t)&&r.push(P(n,t.message))}const o=Object.assign(Object.assign({},i),{extensionEvidences:r});return d.logger.debug("collectEvidence: collected evidence for tab",e,o),o};class B extends Error{constructor(e,t){super(e),this.evidenceType=t}}function R(e){return Boolean(e&&e.evidenceType)}async function O(e,t,n){try{switch(n){case k.FavIconBase64:return{[k.FavIconBase64]:await _(e)};case k.Title:return{[k.Title]:await A(e)};case k.Screenshot:return{[k.Screenshot]:await D(e)};case k.DynamicEvidence:return{[k.DynamicEvidence]:await I(e)};case k.PreviousPageInfo:return{[k.PreviousPageInfo]:await y.getPreviousPageInfoByTabId(e)};case k.HtmlDom:return{[k.HtmlDom]:await w.getHtmlDomByTabId(e)};case k.RemoteIp:return{[k.RemoteIp]:v.getUrlIp(t)};case k.WebsiteStatistics:return{[k.WebsiteStatistics]:await b.getWebsiteStatistics(e)};case k.WebsitePermissions:return{[k.WebsitePermissions]:await S.getWebsitePermissions(e)}}}catch(t){if(d.logger.warn("getEvidenceByType: failed to get evidence",e,n,t),t instanceof Error)throw new B(t.message,n)}}t.EvidenceCollectionError=B,t.isEvidenceCollectionError=R},4570:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleNavigationCause=t.onTabClosedHandler=t.onLinkClickedHandler=t.getPreviousPageInfoByTabId=void 0;const i=n(8459),a=n(1326),r=n(1276),o=n(3097),s=n(9103),c=new o.LimitedCache("previous-page",void 0);async function l(e){const{collectLinkDescription:t}=await i.getConfiguration();if(!t)return;const n=await c.get(e.toString());if(n)return a.logger.debug("getPreviousPageInfo: found",e,n),n;a.logger.info("getPreviousPageInfo: couldn't find previous page info for tab",e)}t.getPreviousPageInfoByTabId=async function(e){if(r.browserName===r.BrowserName.Safari)return void a.logger.info("getPreviousPageInfoByTabId is not supported on Safari");const t=await l(e);if(t)return t;const n=s.getTabsManager(),i=await n.get(e);if(null==i?void 0:i.id){if(void 0!==(null==i?void 0:i.openerTabId))return a.logger.debug("getPreviousPageInfoByTabId: looking for previous page of opener tab ",e,i.openerTabId),await l(i.openerTabId);a.logger.debug("getPreviousPageInfoByTabId: tab has no opener tab",e)}else a.logger.debug("getPreviousPageInfoByTabId: couldn't find tab",e)},t.onLinkClickedHandler=async function(e,{linkDescription:t,url:n}){const{collectLinkDescription:r}=await i.getConfiguration();r&&(a.logger.debug("Setting description evidence for",e,t,n),await c.set(e.toString(),{linkDescription:t,url:n}))},t.onTabClosedHandler=async function(e){a.logger.debug("tab closed:",e),await c.delete(e.toString())},t.handleNavigationCause=async function(e,t){const{previousPageInfoTransitionTypesToKeepEntry:n}=await i.getConfiguration();n.includes(t)?a.logger.debug("handleNavigationCause: keeping previous page info",e,t):(await c.delete(e.toString()),a.logger.debug("handleNavigationCause: deleting previous page info",e,t))}},7100:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteExternalEvidences=t.addExtensionEvidences=t.getExtensionEvidences=void 0;const i=n(1326),a=new(n(3097).LimitedCache)("externalEvidences",[],50,6e5);async function r(e){const t=await a.get(e.toString());return i.logger.debug("getExtensionEvidences:",e,t),t}t.getExtensionEvidences=r,t.addExtensionEvidences=async function(e,t){if(t.length>0){const n=await r(e),o=[...n,...t];return i.logger.debug("addExtensionEvidence:",e,n,t),await a.set(e.toString(),o)}},t.deleteExternalEvidences=async function(e){i.logger.debug("deleteExternalEvidences:",e),await a.delete(e.toString())}},4747:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlStatistics=void 0;const i=n(8459),a=n(1326),r=new RegExp('^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$'),o={domainIsIp:e=>{const t=e.hostname;return/^(\d{1,3}\.){3}\d{1,3}$/.test(t)},subdomainsCount:e=>e.hostname.split(".").length-2,domainLength:e=>e.hostname.length,urlLength:e=>e.href.length,numberOfDotsInUrl:e=>e.href.split(".").length-1,emailInQueryParams:e=>{const t=e.searchParams;for(const e of t.values())if(r.test(e))return!0;return!1}};t.getUrlStatistics=async function(e){try{const{excludedWebsiteStatistics:t}=await i.getConfiguration(),n=Object.entries(o).filter((([e])=>!t.includes(e))),a=new Map,r=new URL(e);for(const[e,t]of n){const n=t(r);void 0!==n&&a.set(e,n)}return Object.fromEntries(a.entries())}catch(t){a.logger.error("getUrlStatistics: failed to get url statistics",t,e)}}},9084:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getWebsiteStatistics=void 0;const a=i(n(398)),r=n(8459),o=n(9103),s=n(1326),c=n(1311),l=n(8711),u=n(4747);async function d(e){const t=await async function(e){const t=await a.default.webNavigation.getAllFrames({tabId:e});if(!t)return s.logger.debug("Website statistics: failed to get frames",e),[];const{websiteStatisticsFramesDepth:n}=await r.getConfiguration(),i=t.find((({frameId:e})=>0===e));if(0===n)return i?[i.frameId]:[];const o=[];let c=i?[i]:[];for(let e=0;e<=n;e++)o.push(...c),c=c.flatMap((({frameId:e})=>{return n=e,t.filter((({parentFrameId:e})=>e===n));var n}));return o.map((({frameId:e})=>e))}(e),n=new Map;s.logger.debug("Website statistics: start collecting html dom statistics for frames",e,t);const i=await Promise.all(t.map((t=>async function(e,t){const n=[];for(let i=0;i<3;i++)try{const n=await a.default.tabs.sendMessage(e,{kind:l.MessageKind.GetHtmlDomStatistics},{frameId:t});if(n.htmlDomStatistics)return[t,n.htmlDomStatistics]}catch(e){e instanceof Error&&"Could not establish connection. Receiving end does not exist."!==e.message&&n.push(e)}n.length>0&&s.logger.warn("Website statistics: failed to get html dom statistics for frame",{tabId:e,frameId:t,errors:n})}(e,t))));let o=0;for(const t of i){if(!t){o++;continue}const[i,a]=t;a?n.set(i,a):(o++,s.logger.warn("Website statistics: failed to get html dom statistics for frame",e,i))}return s.logger.debug(`Website statistics: tried to collect ${t.length} frames and ${o} failed.`,{tabId:e}),n}t.getWebsiteStatistics=async function(e){const{enableWebsiteStatisticsCollection:t}=await r.getConfiguration();if(!t)return;const n=o.getTabsManager(),i=await n.get(e);if(!i)return void s.logger.debug("Website statistics: failed",e);if(c.isLocalFileInSafari(i.url))throw new Error("website statistics collection for local files in Safari is not supported");const a=Date.now(),l={htmlDomStatistics:function(e){const t=e.get(0);if(!t)return void s.logger.debug("Website statistics: failed to get main frame html dom statistics",e);if(1===e.size)return{mainFrame:t};const n=new Map;for(const t of e.values())for(const e of Object.keys(t)){let i=n.get(e)||0;/count|length/gi.test(e)?i+=t[e]||0:i=Math.max(i,t[e]||0),n.set(e,i)}return{mainFrame:t,allFrames:Object.fromEntries(n.entries())}}(await d(e)),urlStatistics:i.url?await u.getUrlStatistics(i.url):void 0};return s.logger.debug("Website statistics: done",{tabId:e,duration:Date.now()-a,websiteStatistics:l}),l}},9792:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchFavicon=t.getFaviconFromExtensionApi=t.getFaviconFromGoogleService=t.getFaviconFromTab=void 0;const a=i(n(398)),r=n(6401),o=n(1326),s=n(1311),c=n(1276),l=n(8459);async function u(e,t){const n=await fetch(e,t);if(404===n.status)return;const i=await n.blob();return i.type.startsWith("image/")?(await r.blobToBase64Data(i)).toString():void 0}t.getFaviconFromTab=async function(e){const{favIconUrl:t}=e;if(t){const e=await u(t);if(e)return e}o.logger.debug("getFaviconFromTab: couldn't get favicon using tab api",e);return await async function({id:e}){if(!e)return;o.logger.debug("fetchFaviconFromDom: trying to get favicon from DOM",e);const t=await a.default.tabs.sendMessage(e,{kind:c.MessageKind.GetFavicon});if(t){for(const n of t)try{const t=await u(n);if(t)return o.logger.debug("fetchFaviconFromDom: got favicon from DOM",e,n),t;o.logger.debug("fetchFaviconFromDom: failed getting favicon",e,n)}catch(t){o.logger.debug("fetchFaviconFromDom: error getting favicon",e,n,t)}o.logger.debug("fetchFaviconFromDom: failed",e)}else o.logger.debug("fetchFaviconFromDom: failed getting favicon urls from content script",e)}(e)||(o.logger.debug("getFaviconFromTab: couldn't fetch favicon from DOM",e),await async function({id:e,url:t}){if(!e||!t)return;const n=new URL("/favicon.ico",t);return o.logger.debug("fetchDomainFavicon: fetching favicon for tab",e,n),await u(n.toString())}(e))},t.getFaviconFromGoogleService=async function(e){const{useGoogleFaviconFetch:t}=await l.getConfiguration();if(!t)return void o.logger.debug("getFaviconFromGoogleService: Google favicon fetching is turned off by config");const{url:n}=e;if(void 0===n||!s.isHttpProtocol(n))return void o.logger.debug("getFaviconFromGoogleService: inappropriate url for query",n);const i=`https://www.google.com/s2/favicons?domain=${new URL(n).hostname}`;return await u(i)},t.getFaviconFromExtensionApi=async function(e){const{enableApiFaviconFetchOnBrowsers:t,extensionApiFaviconFetchProtocols:n}=await l.getConfiguration();if(!t.includes(c.browserName))return;const{url:i}=e;if(void 0===i||!s.isURLOneOfProtocols(i,n))return void o.logger.debug("getFaviconFromExtensionApi: inappropriate url for query",i);const a=function(e){const t=new URL(chrome.runtime.getURL("/_favicon/"));return t.searchParams.set("pageUrl",e),t.toString()}(i);return await u(a)},t.fetchFavicon=u},1354:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getHtmlDomByTabId=void 0;const a=i(n(398)),r=n(1276),o=n(8459),s=n(1326);t.getHtmlDomByTabId=async function(e){const{enableUploadHtmlDom:t}=await o.getConfiguration();if(!t)return;s.logger.info("getHtmlDomByTabId: called",e);const{htmlDomIFrameDepth:n}=await o.getConfiguration();s.logger.info("getHtmlDomByTabId: getting html dom root",e);const i=await a.default.tabs.sendMessage(e,{kind:r.MessageKind.GetHtmlDomRoot,iframeDepth:n});if(!i.content)return void s.logger.info("getHtmlDomByTabId: no content",e);const c=[],l=crypto.randomUUID(),u=i.iframes.map((e=>Object.assign(Object.assign({},e),{parentUid:l})));s.logger.info("getHtmlDomByTabId: traversing over iframes tree",e);for(let t=u.shift();t;t=u.shift()){const n=await a.default.tabs.sendMessage(e,{kind:r.MessageKind.GetIFrameContent,uid:t.uid});c.push(Object.assign(Object.assign({},t),{content:null!=n?n:""}));const i=t.uid;u.push(...t.iframes.map((e=>Object.assign(Object.assign({},e),{parentUid:i}))))}const d=`-----------------------------${crypto.randomUUID().replace(/-/g,"")}`;return`${d}\nId: ${l}\n\n${i.content}\n${c.map((e=>`${d}\nId: ${e.uid}\nParentId: ${e.parentUid}\nAttributes: ${JSON.stringify(e.attributes)}\n\n${e.content}`)).join("\n")}\n${d}--`}},7474:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWebsitePermissions=t.collectWebsitePermissions=void 0;const i=n(398),a=n(8459),r=n(850),o=n(1326),s=n(8731);async function c(e,t,n){const{collectWebsitePermissionsAsEvidence:i,websitePermissionsToCollect:a}=n;if(!i)return{status:"disabled"};if(!(null===chrome||void 0===chrome?void 0:chrome.contentSettings))return{status:"unsupported"};const c=function(e){return`${new URL(e).origin}/*`}(e),l=new Map;return await Promise.all(a.map((async e=>{var n;try{const i=function(e){if(!s.hasProperty(chrome.contentSettings,e))return void o.logger.debug("content setting set to collect but no such field exist",{settingName:e});const t=chrome.contentSettings[e];if("object"==typeof t){if(null!==t)return s.hasProperty(t,"get")||"function"==typeof t.get||o.logger.debug("contentSettings set to collect but it not a contentSettings"),t;o.logger.debug("content setting set to collect but it is null",{settingName:e})}else o.logger.debug("content setting set to collect but it is not an object",{settingName:e})}(e),a=null===(n=await(null==i?void 0:i.get({primaryUrl:c,incognito:t})))||void 0===n?void 0:n.setting;r.isDefined(a)&&l.set(e,a)}catch(t){o.logger.error("collectWebsitePermissions: content settigns collection failed!",{name:e,error:t})}}))),o.logger.info("collectWebsitePermissions: collected",{permissions:l}),{status:"collected",permissions:Object.fromEntries(l.entries())}}t.collectWebsitePermissions=c,t.getWebsitePermissions=async function(e){const t=await i.tabs.get(e),n=await a.getConfiguration();if(!t.url)return;const r=await c(t.url,t.incognito,n);if("collected"===r.status)return r.permissions;o.logger.info("getWebsitePermissions: not collected",{reason:r.status})}},5560:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.triggerRescan=t.activate=t.incrementScanCount=t.deactivate=t.initRescan=void 0;const a=i(n(398)),r=n(1276),o=n(6186),s=i(n(2543)),c=n(9684),l=n(8459),u=n(1326),d=n(1311),p=n(5761),f=n(7100),g=n(8585),h=n(4732);let m;const v=new c.TemporaryMap(void 0);async function y(e,t,n,i=!1){if(void 0===m)return void u.logger.error("rescan: callback is undefined",{tabId:e,url:t,reason:n});const{websiteDetectionProtocols:a}=await l.getConfiguration();if(d.isURLOneOfProtocols(t,a)){if(i){u.logger.debug("rescan: debouncing",{tabId:e});const{debouncedFunc:i}=await async function(e){const t=v.get(e);if(t)return t;const{triggerRescanDebounceMs:n,triggerRescanDebounceMaxWaitMs:i,triggerRescanDebounceOnLeading:a,triggerRescanDebounceOnTrailing:r}=await l.getConfiguration(),o={debouncedFunc:s.default.debounce(y,n,{leading:a,trailing:r,maxWait:i})};return v.set(e,o),o}(e);return i(e,t,n)}return u.logger.debug("rescan: triggering",{tabId:e}),m(e,t,n)}}function b(e,t){a.default.tabs.sendMessage(e,{kind:r.MessageKind.SetTimeout,ms:t,identifier:"rescan"})}async function w(e){const{websiteDetectionRescanIntervalMs:t,websiteDetectionRescanIntervalCountLimit:n,websiteDetectionRescanGradualIntervalConfiguration:i}=await l.getConfiguration(),a=await p.getPageInfo(e);if(void 0!==a)if(i.enabled){const{baseMs:t,maxMs:n,multiplierMs:r}=i,o=Math.min(t+a.scanCount*r,n);u.logger.debug("schedulePageRescan: setting gradual timeout",{tabId:e,intervalMultiplier:o}),b(e,o)}else{if(a.timeoutCount>=n&&a.scanCount>0)return void u.logger.debug("schedulePageRescan: not scheduling new interval",e,a);u.logger.debug("schedulePageRescan: setting timeout",{tabId:e,intervalMs:t}),b(e,t)}else u.logger.warn("schedulePageRescan: couldn't get page data",e)}async function S({reason:e,externalEvidences:t},n,i){return t&&await f.addExtensionEvidences(n,t),y(n,i,e,!0)}async function x(e){void 0!==await p.getPageInfo(e)?(u.logger.debug("handleRescanTimeout: setting timeout reached",e),await p.changePageInfo(e,r.ChangeAction.Increment,"timeoutCount"),await p.updatePageInfo(e,{timeoutReached:!0})):u.logger.warn("handleRescanTimeout: couldn't get page data",e)}t.initRescan=function(e){m=e},t.deactivate=async function(e){await h.manageContentScript(e,o.ContentScriptManagementOperation.Uninitialize,[o.ContentScriptIdentifier.DetectionRescan])},t.incrementScanCount=async function(e){await p.changePageInfo(e,r.ChangeAction.Increment,"scanCount")},t.activate=async function(e){const t=await p.getPageInfo(e),{maxRescanTriggerCount:n}=await l.getConfiguration(),i=void 0!==t&&t.scanCount<n,a=i?"activating":"scan count reached";u.logger.debug(`rescan: ${a}`,{tabId:e,scanCount:null==t?void 0:t.scanCount,maxRescanTriggerCount:n}),i&&(await h.manageContentScript(e,o.ContentScriptManagementOperation.Initialize,[o.ContentScriptIdentifier.DetectionRescan]),w(e))},a.default.runtime.onMessage.addListener(((e,t)=>{const{id:n,url:i}=(null==t?void 0:t.tab)||{};switch(e.kind){case r.MessageKind.TimeoutReached:{const{identifier:t}=e;if("rescan"!==t||!n)return;!async function(e){await g.tryOnceAsync(x,e),await g.tryOnceAsync(w,e)}(n);break}case r.MessageKind.TriggerRescan:if(!n||!i)return;S(e,n,i);break;case r.MessageKind.PageInfoChanged:{const{current:t,change:i}=e;if(!n||!t||!i)return;!async function(e,t,n){const{rescanRequired:i,reason:a}=function(e,t){return t.timeoutReached?e.domChanged?{rescanRequired:!0,reason:[r.ScanReason.DomChanged,r.ScanReason.Interval]}:0===e.scanCount?{rescanRequired:!0,reason:[r.ScanReason.FirstScan,r.ScanReason.Interval]}:{rescanRequired:!1,reason:r.ScanReason.Interval}:t.domChanged?e.timeoutReached?{rescanRequired:!0,reason:[r.ScanReason.Interval,r.ScanReason.DomChanged]}:e.userClicked?{rescanRequired:!0,reason:[r.ScanReason.UserClicked,r.ScanReason.DomChanged]}:{rescanRequired:!1,reason:r.ScanReason.DomChanged}:t.userClicked?e.domChanged?{rescanRequired:!0,reason:[r.ScanReason.DomChanged,r.ScanReason.UserClicked]}:{rescanRequired:!1,reason:r.ScanReason.UserClicked}:{rescanRequired:!1,reason:[]}}(t,n);i&&(await y(e,t.url,a,!0),await p.updatePageInfo(e,{timeoutReached:!1,domChanged:!1,userClicked:!1}))}(n,t,i);break}}})),t.triggerRescan=S},4345:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendBackToSafetyTelemtry=t.sendUrlScanTelemetry=t.getEvidenceSummary=void 0;const i=n(1276),a=n(8459),r=n(5998),o=n(1326),s=n(9249);t.getEvidenceSummary=function({pageTitle:e,favicon:t,dynamicHtml:n,description:i,originUrl:a,extensionEvidences:r,screenshot:o,htmlDom:s,remoteIp:c}){return{pageTitle:Boolean(e),favicon:Boolean(t),dynamicHtmlCount:(null==n?void 0:n.length)||0,description:Boolean(i),originUrl:Boolean(a),extensionEvidenceCount:(null==r?void 0:r.length)||0,screenshot:Boolean(o),htmlDom:Boolean(s),remoteIp:Boolean(c)}},t.sendUrlScanTelemetry=async function({scanId:e,verdict:t,verdictOrigin:n},c,l,u,d,p){const f=Date.now()-l,{shouldSendUrlsInTelemetries:g,evidenceSummaryInTelemetry:h,telemetriesUrlMaxLength:m}=await a.getConfiguration(),v={category:i.TelemetryCategory.Detection,type:i.TelemetryType.UrlScan,metadata:{scanId:e,verdict:t,verdictOrigin:null!=n?n:i.VerdictOrigin.Unknown,scanType:c,url:g?u.slice(0,m):s.getDomainFromUrl(u),evidenceSummary:h?p:void 0,actionType:d},timestamp:new Date(l),duration:f};o.logger.debug("sendUrlScanTelemtry",v),r.processTelemetry(v)},t.sendBackToSafetyTelemtry=async function(){return r.processTelemetry({category:i.TelemetryCategory.User,type:i.TelemetryType.UserInterface,metadata:{action:i.UserInterfaceAction.BlockPageBackToSafety},timestamp:new Date})}},1311:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.shouldScanUrl=t.urlEquals=t.isAbsUrl=t.isExtensionUrl=t.isLocalFileInSafari=t.getScanRequest=t.isHttpProtocol=t.isURLOneOfProtocols=t.isPrescanUrlSupported=t.shouldDetectUrl=t.isNotMainFrame=t.isDetectionEnabled=void 0;const a=i(n(398)),r=n(1276),o=n(8459),s=n(8657),c=n(6401),l=n(1025),u=n(9249),d=n(315),p=n(5347);async function f(){if(await s.isSignedOut())return!1;const{maliciousWebsiteDetection:e}=await o.getConfiguration();return e!==r.MaliciousWebsiteDetection.Disabled}function g(e){return void 0!==e&&e>0}function h(e,t){try{return t.some((t=>e.startsWith(t)))}catch(e){return!1}}function m(e){return r.browserName===r.BrowserName.Safari&&(!e||e.startsWith("file://"))}function v(e){return e.startsWith(l.extensionBaseUrl)}function y(e){return p.baseHubUrls.some((t=>e.startsWith(t)))}function b(e,t){return u.getUrlWithoutFragment(u.stripCredentials(e))===u.getUrlWithoutFragment(u.stripCredentials(t))}t.isDetectionEnabled=f,t.isNotMainFrame=g,t.shouldDetectUrl=async function(e,t,n=!1){if(g(t))return!1;if(y(e))return!1;if(d.isEdgeNewTab(e))return!1;const{websiteDetectionProtocols:i}=await o.getConfiguration();return!!h(e,i)&&(!!n||f())},t.isPrescanUrlSupported=async function(e){const{supportedPrescanProtocols:t}=await o.getConfiguration();return!(t.length>0)||h(e,t)},t.isURLOneOfProtocols=h,t.isHttpProtocol=function(e){const t=new URL(e).protocol;return"http:"===t||"https:"===t},t.getScanRequest=async function(e,t,n,i,a){var r;const{screenshot:s,favIconBase64:l,url:u,title:d,dynamicEvidence:p,previousPageInfo:f,transitionInfo:g,extensionEvidences:h,htmlDom:m,remoteIp:v,websiteStatistics:y,websitePermissions:b}=e,{id:w,connectivityChannels:S}=n||{},{sendScreenshotOnScan:x,scanUrlMaxLength:C}=await o.getConfiguration(),T=u.slice(0,C),E=[...null!=h?h:[]];if(b){const e={name:"website_permissions",category:"extension",description:"the state of permission a website have for sensetive capabilities",data:b};E.push(e)}return Object.assign(Object.assign(Object.assign(Object.assign({url:null!=T?T:"",pageTitle:d},l&&{favicon:c.removeDataPrefixFromBase64Url(l)}),{dynamicHtml:p,description:null==f?void 0:f.linkDescription,originUrl:null==f?void 0:f.url,transitionQualifiers:null!==(r=null==g?void 0:g.transitionQualifiers)&&void 0!==r?r:[],transitionType:null==g?void 0:g.transitionType}),(null==s?void 0:s.full)&&x&&{screenshot:c.removeDataPrefixFromBase64Url(s.full)}),{extensionEvidences:E.length>0?E:void 0,htmlDom:m,remoteIp:v,tabId:t,sessionId:w,connectivityChannels:S,navigationSetId:i,websiteStatistics:y,entries:a})},t.isLocalFileInSafari=m,t.isExtensionUrl=v,t.isAbsUrl=y,t.urlEquals=b,t.shouldScanUrl=async function(e,t){const n={tabId:e,tabUrl:t};if(m(t))return Object.assign({shouldScan:!0,description:"safari local file detected"},n);const{url:i}=await a.default.tabs.get(e);return void 0===i?Object.assign({shouldScan:!1,description:"tab url is undefined"},n):v(i)?Object.assign({shouldScan:!1,description:"tab url belongs to the extension"},n):y(i)?Object.assign({shouldScan:!1,description:"tab url is abs url"},n):b(i,t)?Object.assign({shouldScan:!0,description:"proceeding with scan"},n):Object.assign({shouldScan:!1,description:"tab url has changed"},n)}},1662:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getTabInfo=void 0;const a=i(n(398)),r=n(1276),o=n(1326),s=new Map;t.getTabInfo=function(e){const t=s.get(e);return o.logger.debug("blobUrlToTab: returning tab info",{url:e,tabInfo:t}),t},a.default.runtime.onMessage.addListener(((e,t)=>{if(e.kind!==r.MessageKind.UpdateBlobInTab)return;const{url:n,operation:i}=e;switch(i){case r.UpdateBlobOperation.Create:{const{tab:i,frameId:a}=t;void 0!==(null==i?void 0:i.id)?(s.set(n,{tabId:null==i?void 0:i.id,frameId:a}),o.logger.debug("blobUrlToTab: Received blob creation message",{url:n,tabId:i.id,frameId:a})):o.logger.error("blobUrlToTab: Received blob creation message without tab id",e);break}case r.UpdateBlobOperation.Revoke:setTimeout((()=>{s.delete(n)}),15e3)}}))},4316:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isContentScriptBlob=t.fetchBlob=t.tryFetch=t.waitForTabInfo=void 0;const a=i(n(398)),r=n(1276),o=n(1326),s=n(9103),c=n(8585),l=n(1662),u=n(8459);async function d(e){const{syncTabDetermineInterval:t,syncBlobNullTabDetermineBlobMaxWait:n,syncBlobTabDetermineBlobMaxWait:i}=await u.getConfiguration(),a=Date.now();let r=l.getTabInfo(e);const o=e.startsWith("blob:null")?n:i;for(;!r&&Date.now()-a<o;)await new Promise((e=>setTimeout(e,t))),r=l.getTabInfo(e);return r}async function p(e,t,n,i){const a=await d(t),{tabId:r,frameId:l}=a||{};if(void 0!==r){o.logger.debug("blobDownloader: attempting to download from tab where blob was created",{id:e,url:t,blobTabId:r,blobFrameId:l});const n=await c.tryOnceAsync(f,e,t,r,l);if(void 0!==n)return n;o.logger.error("blobDownloader: failed to download from tab where blob was created",{id:e,url:t,blobTabId:r,blobFrameId:l})}else o.logger.debug("blobDownloader: couldn't find tab where blob was created",{id:e,url:t});if(n&&n!==r){o.logger.debug("blobDownloader: from specific tab",{id:e,url:t,tabId:n,frameId:i});const a=await c.tryOnceAsync(f,e,t,n,i);if(void 0!==a)return a;o.logger.error("blobDownloader: from specific tab failed",{id:e,url:t,tabId:n,frameId:i})}o.logger.debug("blobDownloader: from active tab",{id:e,url:t,tabId:n,frameId:i});const u=s.getTabsManager(),p=await u.getActive(),g=null==p?void 0:p.id;if(g)try{return await f(e,t,g)}catch(n){const i=null==p?void 0:p.openerTabId;if(i)return o.logger.debug("blobDownloader: trying to fetch blob from opener tab",g,i,n),await f(e,t,i);throw o.logger.debug("blobDownloader: failed to fetch blob from tab",{currentTabId:g,openerTabId:i},n),n}else o.logger.warn("blobDownloader: couldn't find active tab",{id:e,currentTabId:g})}async function f(e,t,n,i){o.logger.debug("blobDownloader: Fetching blob from page",{id:e,url:t,tabId:n,frameId:i});const{binaryString:s,type:c}=await a.default.tabs.sendMessage(n,{kind:r.MessageKind.GetBlobFromObjectURL,objectUrl:t,downloadId:e},{frameId:i});if(s)return o.logger.info("blobDownloader: Successfully fetched blob from page",e,s.length),r.binaryStringToBlob(s,c||"application/octet-stream");o.logger.info("blobDownloader: Failed to fetch blob from page",e)}t.waitForTabInfo=d,t.tryFetch=async function(e,t,n,i){return o.logger.debug("blobDownloader: tryFetch parameters",{downloadId:e,url:t}),p(e,t,n,i).then((e=>!!e))},t.fetchBlob=p,t.isContentScriptBlob=function(e){return e.startsWith("blob:")}},9609:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchBlob=t.tryFetch=void 0;const a=i(n(398)),r=n(9552),o=n(1276),s=n(1326);t.tryFetch=async function(e,t,n){const{tabId:i,frameId:l}=r.getRequestingTabOptions(t)||{},u=i&&i>0?i:await c(),d=l&&l>0?l:0;s.logger.debug("content script downloader, tryFetch parameters",{tabId:u,frameId:d,url:t});try{return await a.default.tabs.sendMessage(u&&u>0?u:await c(),{kind:o.MessageKind.TryFetchBlob,downloadId:e,url:t,options:n},{frameId:d&&d>0?d:0})}catch(e){throw s.logger.error("content script downloader, tryFetch error",{tabId:u,frameId:d,url:t},e),e}},t.fetchBlob=async function(e,t,n){const{tabId:i,frameId:l}=r.getRequestingTabOptions(t)||{},u=i&&i>0?i:await c(),d=l&&l>0?l:0;s.logger.debug("content script downloader, fetchBlobString parameters",{tabId:u,frameId:d,url:t});let p=!0;const f=[];try{for(;p;){const i=await a.default.tabs.sendMessage(u&&u>0?u:await c(),{kind:o.MessageKind.FetchBlob,downloadId:e,url:t,requestInit:n},{frameId:d&&d>0?d:0}),{blobString:r,blobType:s,moreChunksAvailable:l}=i;p=l;const g=o.binaryStringToBlob(r,s);f.push(g)}return new Blob(f,{type:f[0].type})}catch(e){throw s.logger.error("content script downloader, fetchBlobString error",{tabId:u,frameId:d,url:t},e),e}};const c=async()=>{var e,t;return null!==(t=null===(e=(await a.default.tabs.query({active:!0,lastFocusedWindow:!0}))[0])||void 0===e?void 0:e.id)&&void 0!==t?t:-1}},8027:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchBlob=t.tryFetch=t.getDataUrlInfo=t.isInternalDataUrl=void 0;const i=n(1276),a=n(611),r="internal.download",o=new Map;function s(e){return e.startsWith("data")&&e.includes(r)}t.isInternalDataUrl=s,t.getDataUrlInfo=function(e){const t=`data://${r}/${a.v4()}`,n={internalUrl:t,blob:i.dataURLToBlob(e)};return o.set(t,n),n},t.tryFetch=function(e){return s(e)&&o.has(e)},t.fetchBlob=function(e){const{blob:t}=o.get(e)||{};if(!t)throw new Error(`Data URL not found: ${e}`);return t}},4604:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareHeaders=void 0;const i=n(1276);var a,r;!function(e){e.ContentLengthExact="contentLengthExact",e.ContentLengthDifferent="contentLengthDifferent",e.ContentLengthMissing="contentLengthMissing"}(a||(a={})),function(e){e.MimeTypeExact="mimeTypeExact",e.MimeTypeDifferent="mimeTypeDifferent",e.MimeTypeMissing="mimeTypeMissing",e.MimeTypePrimaryOnly="mimeTypePrimaryOnly"}(r||(r={}));const o={[a.ContentLengthDifferent]:{[r.MimeTypeExact]:i.DownloadConfidence.Medium,[r.MimeTypeDifferent]:i.DownloadConfidence.Low,[r.MimeTypeMissing]:i.DownloadConfidence.Low,[r.MimeTypePrimaryOnly]:i.DownloadConfidence.Medium},[a.ContentLengthExact]:{[r.MimeTypeExact]:i.DownloadConfidence.High,[r.MimeTypeDifferent]:i.DownloadConfidence.Low,[r.MimeTypeMissing]:i.DownloadConfidence.Medium,[r.MimeTypePrimaryOnly]:i.DownloadConfidence.High},[a.ContentLengthMissing]:{[r.MimeTypeExact]:i.DownloadConfidence.Medium,[r.MimeTypeDifferent]:i.DownloadConfidence.Low,[r.MimeTypeMissing]:i.DownloadConfidence.Low,[r.MimeTypePrimaryOnly]:i.DownloadConfidence.Medium}};t.compareHeaders=function({contentLength:e=-1,mimeType:t=""},{contentLength:n=-1,mimeType:i=""},{considerPrimaryMimeTypesOnly:s=!0}){const c=function(e,t){return e>0&&t>0?e===t?a.ContentLengthExact:a.ContentLengthDifferent:a.ContentLengthMissing}(e,n),l=function(e,t,n){if(""===e.trim()||""===t.trim())return r.MimeTypeMissing;if(e===t)return r.MimeTypeExact;if(!n)return r.MimeTypeDifferent;try{const[n,i]=e.split("/")[0],[a,o]=t.split("/")[0];return n.toLowerCase()===a.toLowerCase()?r.MimeTypePrimaryOnly:r.MimeTypeDifferent}catch(e){return r.MimeTypeDifferent}}(t,i,s);return o[c][l]}},7351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallNext=void 0;const i=n(1109);t.CallNext=class{callNext(e,t,n){throw n(e,t),new i.NextCalledError}}},1109:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(7351),t),a(n(8271),t)},8271:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NextCalledError=void 0;class n extends Error{constructor(){super("Next called. Exiting flow."),this.name="NextCalledError"}}t.NextCalledError=n},3081:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transitions=void 0;const i=n(8404),a=n(1276);t.transitions=[{from:a.DownloadProcessState.New,processor:new i.Enrich,to:[a.DownloadProcessState.Enriched,a.DownloadProcessState.Completed,a.DownloadProcessState.Failed]},{from:a.DownloadProcessState.Enriched,processor:new i.Avoid,to:[a.DownloadProcessState.Started,a.DownloadProcessState.Completed,a.DownloadProcessState.Failed]},{from:a.DownloadProcessState.Started,processor:new i.UrlPreScan,to:[a.DownloadProcessState.UrlsPreScanFinished,a.DownloadProcessState.Completed]},{from:a.DownloadProcessState.UrlsPreScanFinished,processor:new i.AnalyzePartialDownload,to:[a.DownloadProcessState.PartialDownloadAnalyzed,a.DownloadProcessState.Failed]},{from:a.DownloadProcessState.PartialDownloadAnalyzed,processor:new i.SettleUserDownload,to:[a.DownloadProcessState.UserDownloadSettled,a.DownloadProcessState.Failed]},{from:a.DownloadProcessState.UserDownloadSettled,processor:new i.InternalDownload,to:[a.DownloadProcessState.Downloaded,a.DownloadProcessState.Failed]},{from:a.DownloadProcessState.Downloaded,processor:new i.FileSignaturePreScan,to:[a.DownloadProcessState.SignaturePreScanFinished,a.DownloadProcessState.Completed,a.DownloadProcessState.Failed]},{from:a.DownloadProcessState.SignaturePreScanFinished,processor:new i.Upload,to:[a.DownloadProcessState.Uploaded,a.DownloadProcessState.Completed,a.DownloadProcessState.Failed]},{from:a.DownloadProcessState.Uploaded,processor:new i.Scan,to:[a.DownloadProcessState.Scanning,a.DownloadProcessState.Failed]}]},4972:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleError=void 0;const i=n(1276),a=n(8459),r=n(1326),o=n(1043),s=n(5998),c=n(4293),l=n(7121),u=n(75),d=n(259),p=n(1311),f=n(7095);var g;!function(e){e.Release="Release",e.Stop="Stop",e.Download="Download",e.None="None"}(g||(g={}));const h={[g.Release]:async e=>{await Promise.resolve(u.releaseDownload(e.download.id))},[g.Stop]:async e=>{await o.stopDownload(e.download.id)},[g.Download]:async e=>{await o.downloadFileToDownloadsIfNeeded({downloadProcessInfo:e})},[g.None]:async e=>{await Promise.resolve()}},m={IsBeforeDownload:{ShouldReleaseDownload:g.Release,ShouldNotReleaseDownload:g.Stop},IsAfterDownload:{ShouldReleaseDownload:g.Download,ShouldNotReleaseDownload:g.None}};t.handleError=async function(e,{reason:t,isBeforeDownload:n,error:g}){try{const{shouldDownloadFileOnScanFailed:o}=await a.getConfiguration();r.logger.error("Download process error handler:",{downloadProcessInfo:e,reason:t,error:g,isBeforeDownload:n,shouldReleaseDownload:o}),await async function(e,t,n,i){const r=function(e,t){return m[e?"IsBeforeDownload":"IsAfterDownload"][t?"ShouldReleaseDownload":"ShouldNotReleaseDownload"]}(t,n),o=h[r];await o(e);const{releaseRepeatingFailingDownloadProcesses:s,failureReasonsToReleaseIfRepeating:c}=await a.getConfiguration(),l=c.includes(i);if(s&&n&&l){const{finalUrl:n}=e.download.urls;f.addDownloadProcessFailureForUrl(n,t,i)}}(e,n,o,t),await async function(e,t,n){const{shouldDownloadFileOnScanFailed:r}=await a.getConfiguration(),{configuration:o}=e,u=!(null==o?void 0:o.isInline)||r;await async function(e,t){const{download:{filename:n,urls:{url:i}},tabId:r,configuration:o}=e,{failedScanSendEvent:s,failedScanEventExcludedProtocols:l}=await a.getConfiguration();if(t&&s&&i&&!p.isURLOneOfProtocols(i,l)){const e=null==o?void 0:o.attemptedDownloadMechanisms;c.sendUnsuccessfulScanEvent({sourceUrl:i,fileName:n,tabId:r,attemptedDownloadMechanisms:e})}}(e,u),await async function(e,t,n){t===i.DownloadProcessFailureReason.Error&&n?(n instanceof Error||s.processAlarmTelemetry({message:"Download process failed with unknown error type"}),s.sendFileScanTelemetrySafe(i.TelemetryType.FileScanFailed,e,{error:"sendFileScanFailed",detailedError:JSON.stringify(n)})):t===i.DownloadProcessFailureReason.Unfetchable?s.sendFileScanTelemetrySafe(i.TelemetryType.FileScanFailed,e,{error:"unfetchable"}):t===i.DownloadProcessFailureReason.Timeout&&s.sendFileScanTelemetrySafe(i.TelemetryType.FileScanTimeout,e,{error:"system timeout"}),await d.sendApiHeadersTelemetryForDownloadProcessId(e.id)}(e,t,n),await async function(e,t){const{download:{filename:n,id:i},tabId:a,sourceTabId:r}=e,o=t?l.showUnsuccessfulScanNotificationSafeIfNeeded:l.showUnsuccessfulDownloadNotificationSafeIfNeeded;await o(n,i,a,r)}(e,u)}(e,t,g)}catch(i){const a=`Download process error handler: failed to handle error. download id ${e.download.id}.`;s.processAlarmTelemetry({message:a}),r.logger.error(a,{downloadProcessInfo:e,reason:t,error:g,isBeforeDownload:n,internalError:i})}finally{const{download:{id:t}}=e;o.deleteStoredFileWithDelayIfNeeded(`${t}`),u.cleanReleaseHandler(t)}}},7095:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.downloadProcessFailuresReasonUniqueName=t.addDownloadProcessFailureForUrl=t.getDownloadProcessFailuresForUrl=void 0;const i=n(8459),a=new(n(3097).LimitedCache)("downloadProcessFailures",[],50,18e5);t.getDownloadProcessFailuresForUrl=function(e){return a.get(e)},t.addDownloadProcessFailureForUrl=async function(e,t,n){const{downloadProcessFailuresCacheTtl:r}=await i.getConfiguration(),o=[...await a.get(e),{isBeforeDownload:t,reason:n}];await a.set(e,o,{ttl:r})},t.downloadProcessFailuresReasonUniqueName=function(e){const{isBeforeDownload:t,reason:n}=e;return`${t.toString()} ${n}`}},3496:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadProcessManager=void 0;const i=n(611),a=n(4494),r=n(1071),o=n(1326),s=n(1276),c=n(5998),l=n(75),u=n(1043),d=n(9552),p=n(5697),f=n(3181);t.DownloadProcessManager=class{constructor(e){this.transitions=e}process(e,t){this.processAsync(e,t)}async processAsync(e,t){const n=i.v4();try{if(o.logger.info("Download process manager: Initiating download process",{downloadItem:e}),l.setReleaseHandler(e.id,t),u.isDownloadByABSExtension(e))o.logger.info("Download process manager: Download is from ABS extension, settling download",e.id),await this.handleDownloadByABSExtension(e),this.next(n,a.DownloadProcessAction.Complete);else{const t=await this.createFromDownloadItem(n,e);await r.add(t),this.next(t.id,a.DownloadProcessAction.Continue)}}catch(t){o.logger.error("Download process manager: Failed to initiate download process",{error:t}),l.releaseDownload(e.id),l.cleanReleaseHandler(e.id),this.next(n,a.DownloadProcessAction.Fail)}}restart(e){this.next(e,a.DownloadProcessAction.Continue)}async next(e,t){const n=await r.get(e);if(!n){const t=`Download process manager: download process info not found for id ${e}`;return o.logger.error(t),void c.processAlarmTelemetry({message:t})}try{switch(t){case a.DownloadProcessAction.Complete:return await r.update(e,{state:s.DownloadProcessState.Completed}),void this.releaseSafteyNet(n);case a.DownloadProcessAction.Fail:return await r.update(e,{state:s.DownloadProcessState.Failed}),void this.releaseSafteyNet(n);case a.DownloadProcessAction.Continue:{const t=this.getTransition(n.state);if(!t){const t=`Download process manager: transition not found for state ${n.state} for id ${e}`;return o.logger.error(t),void c.processAlarmTelemetry({message:t})}const{processor:i,state:a}=t;return void i.process(e,((e,t)=>{this.asyncNext(e,t,a)}))}}}catch(e){o.logger.error("Download process manager: error while processing",e,{id:n.id}),this.releaseSafteyNet(n)}}async asyncNext(e,t,n){t===a.DownloadProcessAction.Continue&&await r.update(e,{state:n}),await this.next(e,t)}getTransition(e){const t=this.transitions.find((t=>t.from===e));if(t)return{processor:t.processor,state:t.to[0]}}async createFromDownloadItem(e,t){var n,i;const a={finalUrl:null!==(n=t.finalUrl)&&void 0!==n?n:"",url:t.url,referrer:null!==(i=t.referrer)&&void 0!==i?i:""},r=t.filename?p.basename(t.filename):"",o=Date.now(),c=s.DownloadProcessState.New,l=await f.getWindowByTabId(t.tabId);return{id:e,download:Object.assign(Object.assign({id:t.id,filename:r},await p.getFileTypesInfo(r,t.mime)),{fileSize:await u.getDownloadItemFileSize(t.fileSize,t.id),urls:a,startTime:t.startTime,remoteIp:d.getUrlIp(a.finalUrl)}),detectionInfo:{origin:t.downloadDetectionOrigin,resourceType:t.resourceType},timestamps:{createdAt:o},verdict:{verdict:s.Verdict.Unknown,verdictOrigin:s.VerdictOrigin.Unknown},tabId:t.tabId,frameId:t.frameId,windowId:null==l?void 0:l.id,incognito:t.incognito,state:c,log:[{processor:this.constructor.name,timestamp:new Date(o),state:c}]}}async handleDownloadByABSExtension(e){const{id:t,url:n}=e;l.releaseDownload(t),l.cleanReleaseHandler(t);const i=u.getOriginDownloadProcessId(n);if(!i)return void o.logger.warn("Download process manager: Download is by ABS Extension but origin download process id not found",t);let a=await r.get(i);if(!a)return void o.logger.warn("Download process manager: Download is by ABS Extension but download process info not found",i);const{download:s,id:c}=a,d=s.id;a=await r.update(c,{download:Object.assign(Object.assign({},s),{generatedDownloadId:t})})||a,u.deleteStoredFileWithDelayIfNeeded(`${d}`)}releaseSafteyNet(e){const{id:t}=e.download;if(l.releaseDownload(t,{shouldSkipWarnOnRelease:!0})){const e=`releaseDownload: Released a download that should have been released before. Download - ${t}`;o.logger.error(e,{id:t}),c.processAlarmTelemetry({message:e})}}}},1071:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getDownloadsInProgressCount=t.getMostRecent=t.updateScanVerdict=t.updateLog=t.updateConfiguration=t.updateFilename=t.updateTimestamps=t.update=t.getAllFailedScans=t.getAllWithUncompletedScans=t.getByBrowserDownloadId=t.getByScanId=t.maintenance=t.get=t.add=t.onStoreChange=void 0;const a=n(1276),r=n(1326),o=new(i(n(7007)).default),s="downloadProcessStoreChanged";t.onStoreChange=function(e){o.on(s,e)},t.add=async function(e){return await a.store.items.add(e,e.id),o.emit(s),l(),e},t.get=async function(e){return a.store.items.get(e)};let c=0;async function l(e=7,t=100,n=1){if(Date.now()-c<60*n*60*1e3)return;c=Date.now();const i=await a.store.items.count(),o=Date.now()-1e3*e*60*60*24,s=await a.store.items.where("timestamps.createdAt").below(o).delete();if(r.logger.debug("Download process store maintenance:",{totalEntriesCount:i,agedItemsCount:s}),i-s>t){const e=await a.store.items.orderBy("timestamps.createdAt").reverse().offset(t).delete();r.logger.debug("Download process store maintenance:",{deletedByLimit:e})}}t.maintenance=l,t.getByScanId=async function(e){return a.store.items.where("scan.id").equals(e).first()},t.getByBrowserDownloadId=async function(e,t=10){const n=Date.now()-60*t*1e3,i=(await a.store.items.where("download.id").equals(e).and((e=>e.timestamps.createdAt>n)).sortBy("timestamps.createdAt")).reverse();return i.length>1&&r.logger.warn("download-process-store: Multiple download processes info were found for the download id",e),i[0]},t.getAllWithUncompletedScans=async function(){return a.store.items.where("scan.status").anyOf(a.queryForScanStatuses).toArray()},t.getAllFailedScans=async function(){return a.store.items.where("scan.status").anyOf([a.ScanStatus.Failed]).toArray()},t.update=async function(e,t){return a.store.transaction("rw",a.store.items,(async()=>{const n=await a.store.items.get(e);if(n)return Object.assign(n,t),await a.store.items.put(n,e),n}))},t.updateTimestamps=async function(e,t){return a.store.transaction("rw",a.store.items,(async()=>{const n=await a.store.items.get(e);if(n)return Object.assign(n.timestamps,t),await a.store.items.put(n,e),n}))},t.updateFilename=async function(e,t){return a.store.items.update(e,{"download.filename":t})},t.updateConfiguration=async function(e,t){return a.store.transaction("rw",a.store.items,(async()=>{var n;const i=await a.store.items.get(e);if(i)return Object.assign(null!==(n=i.configuration)&&void 0!==n?n:{},t),await a.store.items.put(i,e),i}))},t.updateLog=async function(e,t){return a.store.transaction("rw",a.store.items,(async()=>{const n=await a.store.items.get(e);if(n)return Object.assign(n.log,[...n.log,t]),await a.store.items.put(n,e),n}))},t.updateScanVerdict=async function(e,t,n){const i=a.store.items.update(e,{verdict:{verdict:t,verdictOrigin:n}});return o.emit(s),i},t.getMostRecent=async function(e=20){return a.store.items.orderBy("timestamps.createdAt").reverse().limit(e).toArray()},t.getDownloadsInProgressCount=async function(){return a.store.items.where("verdict.verdict").equals(a.Verdict.Unknown).count()}},64:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(1071),t),a(n(3081),t)},1686:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(398)),r=n(1276),o=n(9271),s=n(1326),c=n(8027),l=a.default.downloads,u=new Set([r.BrowserName.Chrome,r.BrowserName.Edge]);a.default.webRequest&&l&&l.onDeterminingFilename&&u.has(r.browserName)&&(s.logger.info("Chrome/Edge download interception: registering onDeterminingFilename listener"),l.onDeterminingFilename.addListener(((e,t)=>{const n=function(e){const{url:t}=e,n=t.startsWith("data:")?c.getDataUrlInfo(t):void 0;if(n){const{internalUrl:t,blob:{size:i,type:a}}=n;return Object.assign(Object.assign({},e),{finalUrl:t,url:t,fileSize:i,mime:a,totalBytes:-1,bytesReceived:-1})}return e}(Object.assign(Object.assign({},e),{finalUrl:e.url,downloadDetectionOrigin:r.DownloadDetectionOrigin.DownloadsApi}));return o.process(n,t),!0})))},1412:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FirefoxWebRequestDownloadItem=void 0;const i=n(5029),a=n(1276);class r{constructor(e,t){if(this.webRequest=e,this.release=t,this.danger="safe",this.state="in_progress",this.paused=!1,this.canResume=!1,this.bytesReceived=0,this.fileSize=-1,this.exists=!1,this.downloadDetectionOrigin=a.DownloadDetectionOrigin.WebRequest,!e.responseHeaders)throw new TypeError("webRequest has no response headers");this.responseHeaders=e.responseHeaders,this.id=--r.IdCounter,this.startTime=(new Date).toISOString()}get url(){return this.webRequest.url}get finalUrl(){return this.webRequest.url}get incognito(){var e;return null!==(e=this.webRequest.incognito)&&void 0!==e&&e}get filename(){var e,t;if(!this.cachedFilename){const n=this.getContentDisposition();this.cachedFilename=null!==(t=null!==(e=n.filename)&&void 0!==e?e:new URL(this.url).pathname.split("/").pop())&&void 0!==t?t:"",this.cachedFilename.startsWith("UTF-8''")&&(this.cachedFilename=decodeURIComponent(this.cachedFilename.slice(7)))}return this.cachedFilename}get totalBytes(){var e;return this.contentLength||(this.contentLength=null!==(e=i.parseContentLength(this.responseHeaders))&&void 0!==e?e:-1),this.contentLength}get mime(){return this.mimeType||(this.mimeType=i.parseMimeType({headers:this.responseHeaders})),this.mimeType}get referrer(){return this.webRequest.originUrl?this.webRequest.originUrl:(this.cachedReferrer||(this.cachedReferrer=i.getHeaderValue(this.responseHeaders,"referrer")),this.cachedReferrer)}get resourceType(){return this.webRequest.type}static isFirefoxWebRequestDownloadItemId(e){return a.browserName===a.BrowserName.Firefox&&e<0}getContentDisposition(){return this.contentDisposition||(this.contentDisposition=i.parseContentDisposition({headers:this.responseHeaders})),this.contentDisposition}}t.FirefoxWebRequestDownloadItem=r,r.IdCounter=0},8141:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(1276),r=i(n(398)),o=n(1025),s=n(8459),c=n(3148),l=n(1412),u=n(1326),d=n(8459),p=n(9271);let f=s.getDefaultConfiguration();if(d.registerGetConfigurationCallback((e=>{f=e})),a.browserName===a.BrowserName.Firefox&&r.default.webRequest){if(r.default.downloads&&r.default.downloads.onCreated){const e=e=>{u.logger.info("Firefox download interception: releaseHandler called",e)};u.logger.info("Firefox download interception: registering oncreated listener"),r.default.downloads.onCreated.addListener((t=>{const n=Object.assign(Object.assign({},t),{finalUrl:t.url,downloadDetectionOrigin:a.DownloadDetectionOrigin.DownloadsApi});p.process(n,e)}))}r.default.webRequest.onHeadersReceived&&(u.logger.info("Firefox download interception: registering webrequest listener"),r.default.webRequest.onHeadersReceived.addListener((async e=>{var t;if(null===(t=e.originUrl)||void 0===t?void 0:t.startsWith(o.extensionBaseUrl))return{};const{enableInlineFileScanInFirefox:n,firefoxInlineScanDisabledDomains:i,firefoxWebrequestDownloadFilterSupportedMimeTypes:a,firefoxWebrequestDownloadFilterSupportedResourceTypes:r,firefoxWebrequestDownloadFilterSupportedProtocols:s}=f;if(!n)return{};const d=c.shouldBlockWebRequest(e,{disabledDomains:i,downloadMimeTypes:a,downloadRequestTypes:r,supportedProtocols:s});return"confirmed-true"===d.status?(u.logger.info("Firefox download interception: a webrequest was designated as download",{details:e,result:d}),await new Promise((t=>{const n=new l.FirefoxWebRequestDownloadItem(e,t);p.process(n,(e=>{var n;u.logger.info("Firefox download interception: releaseHandler called",e),t({cancel:null!==(n=null==e?void 0:e.stop)&&void 0!==n&&n})}))}))):{}}),{urls:["<all_urls>"]},["blocking","responseHeaders"]))}},3148:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldBlockWebRequest=void 0;const i=n(5029),a=n(345),r={status:"unknown"},o=e=>({status:"confirmed-true",reason:e}),s=e=>({status:"confirmed-false",reason:e});class c{constructor(e,t){this.options=t,this.result=r,this.resultHistory=[],this.webRequest=Object.assign(Object.assign({},e),{__url:new URL(e.url)})}pipe(e){return e&&this.result===r&&(this.result=e.call(void 0,this.webRequest,this.options),this.resultHistory.push([e.name,this.result])),this}getResultWithHistory(){return Object.assign(Object.assign({},this.result),{resultHistory:this.resultHistory})}}function l({__url:e},{disabledDomains:t}){return t.some((t=>a.doesMatchDomain(e.hostname,t)))?s(`webRequest hostname is ${e.hostname}`):r}function u({type:e},{downloadRequestTypes:t}){return t.includes(e)?r:s(`webRequest type is ${e}`)}function d({__url:e},{supportedProtocols:t}){return t.some((t=>e.protocol.startsWith(t)))?r:s(`webRequest protocol is ${e.protocol}`)}function p({statusCode:e}){return e>=200&&e<400?r:s(`webRequest status code is ${e}`)}function f({responseHeaders:e},{downloadMimeTypes:t}){const n=e&&i.getHeaderValue(e,"content-type");return n&&t.some((e=>n.startsWith(e)))?o(`webRequest MIME type is ${n}`):r}function g({responseHeaders:e}){return i.getHasAttachment({headers:e})?o("webRequest content disposition is attachment"):r}t.shouldBlockWebRequest=function(e,t){return new c(e,t).pipe(l).pipe(u).pipe(d).pipe(p).pipe(f).pipe(g).getResultWithHistory()}},1665:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(8141),t),a(n(9840),t),a(n(1686),t)},9840:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(398)),r=n(1276),o=n(1025),s=n(1326),c=n(8459),l=n(345),u=n(8459),d=n(5808),p=n(5029),f=n(2308),g=n(6562);let h,m,v,y,b,w;function S(e,t){!async function(e,t){try{if(g.isAbsIdentified(e.url))return void s.logger.info("Safari download interception: the download was already identified, not handling download",e);if(void 0===h&&(s.logger.debug("Safari download interception:: calling getConfiguration as cachedEnableFileScanningInSafari is undefined"),C(await c.getConfiguration())),!h)return;if(!function({initiator:e,requestId:t,responseHeaders:n,url:i},a){var r;const c=p.parseMimeType({headers:n});if(x("Safari download interception:",{requestId:t,mimetype:c,resourceType:a}),null==e?void 0:e.startsWith(o.extensionBaseUrl.slice(0,-1)))return s.logger.debug("Safari download interception: initiator is extension",{requestId:t,initiator:e}),!1;if(null==y?void 0:y.includes(a))return s.logger.debug("Safari download interception: resourceType is not download",{requestId:t,resourceType:a}),!1;if(function(e){const t=new URL(e).hostname;return!!l.doesMatchListWildcard(t,null!=b?b:[])}(i))return s.logger.debug("Safari download interception: specific non-download",t),!1;const u=function(e){if(!e)return;const t=e.trim().toLowerCase();return!!(null==v?void 0:v.some((e=>t.startsWith(e))))||!(null==m?void 0:m.some((e=>t.startsWith(e))))&&void 0}(c),d=p.getHasAttachment({headers:n}),f=null!==(r=u||d)&&void 0!==r&&r;return x("Safari download interception: isDownload result",{requestId:t,isDownload:f,contentDispositionResult:d,mimeTypeResult:u}),f}(e,t))return;const n=function({timeStamp:e,responseHeaders:t,url:n,initiator:i,tabId:a,frameId:o},s){const c=d.createBasicDownloadItem(),l=t?p.parseContentLength(t):-1,u=p.parseMimeType({headers:t}),f=p.getFilename({url:n,headers:t});return Object.assign(Object.assign({},c),{url:n,finalUrl:n,filename:f||"Unknown",fileSize:null!=l?l:-1,startTime:new Date(e).toISOString(),referrer:i||"",tabId:a,frameId:o,mime:u,downloadDetectionOrigin:r.DownloadDetectionOrigin.WebRequest,resourceType:s})}(e,t);s.logger.debug("Safari download interception: isDownload! createdDownloadItemFromDetails",n,e),d.handleSafariDownload(n)}catch(e){s.logger.error("Safari download interception: handleSafariDownloadsIfNeeded failed",e)}}(e,t)}function x(e,...t){w&&s.logger.debug("Safari download interception: Safari downloads intensive log: ",e,...t)}function C(e){const{enableFileScanningInSafari:t,safariDownloadsDoNotScanMimetypes:n,safariDownloadsScanMimetypes:i,safariDownloadsExcludeDomains:a,safariDownloadsNonDownloadResourceTypes:r,intensiveSafariDownloadsLogging:o}=e;s.logger.info("Safari download interception: setSafariDownloadsConfigs"),h=t,m=n,v=i,b=a,y=r,w=o}if(r.browserName===r.BrowserName.Safari&&(s.logger.info("Safari download interception: initiating click listeners for safari downloads"),a.default.runtime.onMessage.addListener(f.safariClicksHandling),a.default.webRequest)){s.logger.info("Safari download interception: initiating safari downloads webRequest listeners per type");for(const e of o.commonWebRequestResourceTypes)a.default.webRequest.onResponseStarted.addListener((t=>{S(t,e)}),{urls:["<all_urls>"],types:[e]},["responseHeaders","extraHeaders"]);!async function(){s.logger.info("Safari download interception: setSafariDownloadsConfigsOnWakeUp"),C(await c.getConfiguration())}()}u.registerGetConfigurationCallback(C)},2308:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safariClicksHandling=void 0;const i=n(1276),a=n(5808),r=n(6562);t.safariClicksHandling=function(e,t){var n;if(e.kind!==i.MessageKind.SafariDownloadLinkClicked)return;const{url:o,filename:s}=e,c=function(e,t,n,o){const s=a.createBasicDownloadItem(),c=r.removeDownloadClickInterceptionIdentifier(e);return Object.assign(Object.assign({},s),{url:c,finalUrl:c,filename:t,tabId:n,frameId:o,downloadDetectionOrigin:i.DownloadDetectionOrigin.DownloadClickInterception})}(o,s,null===(n=t.tab)||void 0===n?void 0:n.id,t.frameId);a.handleSafariDownload(c)}},5808:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleSafariDownload=t.createBasicDownloadItem=void 0;const i=n(1326),a=n(5947);t.createBasicDownloadItem=function(){return{bytesReceived:0,danger:"safe",url:"",totalBytes:-1,filename:"",paused:!1,state:"in_progress",mime:"application/octet-stream",fileSize:-1,startTime:(new Date).toISOString(),error:void 0,endTime:void 0,id:Math.floor(1e7*Math.random())+5555e7,incognito:!1,referrer:"",estimatedEndTime:void 0,canResume:!0,exists:!0,byExtensionId:void 0,byExtensionName:void 0}};const r=()=>{i.logger.info("Safari download release called")};t.handleSafariDownload=function(e){const t=function(e){const t=function(e){return e.replace(/^["'\s]+|["'\s]+$/g,"").trim()}(e.filename);return Object.assign(Object.assign({},e),{filename:t})}(e);a.process(t,r)}},6457:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyzePartialDownload=void 0;const i=n(1071),a=n(1326),r=n(7584),o=n(2424),s=n(9609),c=n(4316),l=n(1276),u=n(8459),d=n(4604),p=n(9429),f=n(4494),g=n(9251),h=n(7121),m=n(5998),v=n(8027),y={[l.DownloadMechanism.DataUrlBlob]:0,[l.DownloadMechanism.ContentScriptBlob]:1,[l.DownloadMechanism.ServiceWorkerStream]:2,[l.DownloadMechanism.ContentScriptStream]:3,[l.DownloadMechanism.Unavailable]:4},b={[l.DownloadMechanism.ServiceWorkerStream]:o.tryFetch,[l.DownloadMechanism.ContentScriptStream]:s.tryFetch};async function w(e,t,n,i,r){const{enableDownloadConfidence:o,allowMimeTypePrimaryComparison:s}=await u.getConfiguration();a.logger.debug("Analyze partial download processor: ",{downloadMechanismType:e,downloadId:t});const c=b[e],{fetchable:f,parsedHeaders:g}=await c(t,n,Object.assign(Object.assign({},i),{triedDownloadMechanism:e}),a.logger,m.processTelemetry);if(!f)return{downloadMechanismType:e,confidenceLevel:l.DownloadConfidence.Lowest};if(!o)return{downloadMechanismType:e,confidenceLevel:l.DownloadConfidence.High,parsedHeaders:g};const h=d.compareHeaders(r,g||{},{considerPrimaryMimeTypesOnly:s});return a.logger.debug("Analyze partial download processor: Comparing download headers",{extension:g,browser:r,headersComparisonResult:h,downloadMechanismType:e}),p.sendDownloadConfidenceTelemetry(t,n,e,r,g||{},h),{downloadMechanismType:e,confidenceLevel:h,parsedHeaders:g}}class S extends g.BaseProcessor{async logic(e,t){const{id:n,download:r}=e,{id:o}=r,{downloadMechanism:s,parsedHeaders:d,attemptedDownloadMechanisms:g}=await async function(e){const{download:{id:t,urls:{finalUrl:n},mimeType:i,filename:r,fileSize:o},configuration:s,tabId:d,frameId:p}=e;try{const{shouldTryUrlFetchBeforeScan:e,enabledDownloadMechanisms:f,enableDetermineDownloadMechanismRetries:g,determineDownloadMechanismRetries:h,determineDownloadMechanismRetryDelayMs:m,acceptedDownloadConfidenceLevel:b}=await u.getConfiguration();if(l.browserName===l.BrowserName.Firefox){const e=f.indexOf(l.DownloadMechanism.ContentScriptStream);e>-1&&f.splice(e,1)}if(v.isInternalDataUrl(n)&&f.includes(l.DownloadMechanism.DataUrlBlob))return{downloadMechanism:v.tryFetch(n)?l.DownloadMechanism.DataUrlBlob:l.DownloadMechanism.Unavailable};if(c.isContentScriptBlob(n)&&f.includes(l.DownloadMechanism.ContentScriptBlob))return o>52428800?{downloadMechanism:l.DownloadMechanism.Unavailable}:{downloadMechanism:await c.tryFetch(t,n,d,p)?l.DownloadMechanism.ContentScriptBlob:l.DownloadMechanism.Unavailable};if(!e)return a.logger.debug("Analyze partial download processor: Not checking fetching file available, return default download mechanism",t),{downloadMechanism:l.DownloadMechanism.ServiceWorkerStream};const S={contentLength:o,mimeType:i,filename:r},x=g&&h>0,C=Object.assign(Object.assign({},(null==s?void 0:s.requestInit)&&{requestInit:s.requestInit}),x&&{retryOptions:{retries:h,delayMs:m}}),T=f.filter((e=>{return(t=e)===l.DownloadMechanism.ServiceWorkerStream||t===l.DownloadMechanism.ContentScriptStream;var t})).sort(((e,t)=>{var n,i;return(null!==(n=y[e])&&void 0!==n?n:0)-(null!==(i=y[t])&&void 0!==i?i:0)})),E=[];for(const e of T){const i=await w(e,t,n,C,S);E.push(i);const{confidenceLevel:a,parsedHeaders:r}=i;if(b.includes(a))return{downloadMechanism:e,parsedHeaders:r,attemptedDownloadMechanisms:E}}return a.logger.warn("Analyze partial download processor: Download mechanism is not available",{downloadId:t,enabledDownloadMechanisms:f}),{downloadMechanism:l.DownloadMechanism.Unavailable,attemptedDownloadMechanisms:E}}catch(e){return a.logger.warn("Analyze partial download processor: download is not available",t,e),{downloadMechanism:l.DownloadMechanism.Unavailable}}}(e);a.logger.info("Analyze partial download processor: Partial download analysis result is",o,s,d,g),d&&await async function(e,t){var n;const{enableDownloadProcessInfoFilenameOverrideOnBrowsers:r,sendFilenameIdentificationFailureTelemetry:o}=await u.getConfiguration();if(!r.includes(l.browserName))return void a.logger.debug("Update filename processor: Not overriding download process info filename");const{id:s,download:{id:c,filename:d,urls:f,mimeType:g,fileSize:m}}=e,v=(null==t?void 0:t.filename)&&(null===(n=null==t?void 0:t.filename)||void 0===n?void 0:n.toLowerCase().startsWith("utf-8''"))?decodeURIComponent(null==t?void 0:t.filename.slice(7)):null==t?void 0:t.filename;if(v&&v!==d)return await i.updateFilename(s,v),a.logger.info("Update filename processor: updated filename",{downloadId:c,filename:v}),void await h.refreshScanProgressToastBaseData(c,v);"Unknown"===d&&o&&p.sendFilenameTelemetry(f,g,c,m)}(e,d),await i.updateConfiguration(n,{downloadMechanism:s,parsedHeaders:d,attemptedDownloadMechanisms:g}),t(n,f.DownloadProcessAction.Continue)}onError(e,t,n){a.logger.error("Analyze partial download processor: Error occurred.",e.id,n),t(e.id,f.DownloadProcessAction.Fail)}validate(e){const{id:t,configuration:n}=e;if(!n){const e=`Analyze partial download processor: configuration is missing in download process info ${t}`;return a.logger.error(e),r.processAlarmTelemetry({message:e}),!1}return!0}}t.AnalyzePartialDownload=S},4045:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Avoid=t.shouldBlockFileTypeForDomains=void 0;const a=n(1276),r=n(1326),o=n(8459),s=n(75),c=n(1043),l=n(1071),u=n(9249),d=n(5998),p=n(6339),f=n(4293),g=n(2214),h=n(8657),m=n(1477),v=n(9990),y=n(1127),b=n(7095),w=n(1084),S=n(6846),x=n(4882),C=n(9251),T=n(4494),E=n(8676),I=n(398),_=n(5231),A=i(n(8875)),D=n(2039);async function k(e,t,n){r.logger.debug("Should block file type: checking domains",e);for(const i of e){const e=await x.getCategories({domain:i}),a=S.getMatchedWebsiteRule([i],e?Object.keys(e):[],t,S.WebsiteRuleType.BlockFileTypes,r.logger);if(a){if("*"===a.blockedFileTypes[0])return r.logger.debug("shouldblockfiletypeforurls: all file extensions are blocked for domain",i),{isBlocked:!0,reportEvent:a.reportEvents};if(a.blockedFileTypes.includes(n))return r.logger.debug("shouldblockfiletypeforurls: file extension is blocked for domain",i,n),{isBlocked:!0,reportEvent:a.reportEvents}}else r.logger.debug("shouldblockfiletypeforurls: no rule for domain",i)}return{isBlocked:!1}}t.shouldBlockFileTypeForDomains=k;class P extends C.BaseProcessor{async logic(e,t){const{id:n,download:{urls:{finalUrl:i},id:S,fileSize:x,fileExtension:C}}=e;r.logger.info("Avoid processor: Checking if download should be avoided or blocked",{id:n}),await h.isSignedOut()&&(r.logger.warn("Avoid processor: User is signed out, not handling download"),s.releaseDownload(S),t(n,T.DownloadProcessAction.Complete));const P=await async function(e){const{filename:t,fileSize:n,urls:{finalUrl:i}}=e.download,{extensionSchemes:a}=await o.getConfiguration(),s=a.map((e=>"blob:"+e)),c=[...a,...s];if(!c.some((e=>null==i?void 0:i.startsWith(e))))return;if(!c.find((e=>i.startsWith(e))))return;const l=u.getExtensionIDFromUrl(i),d=await A.default.get(l);if(d)return{thirdPartyExtension:d,fileName:t,finalUrl:i,fileSize:n};r.logger.error("Avoid processor: Unable to get extension details",{finalUrl:i,extensionId:l})}(e);if(P){r.logger.warn("Avoid processor: Stop processing once a download is identified from a third-party extension.",{id:n}),f.sendThirdPartyExtensionDownload(P);const{name:e}=P.thirdPartyExtension;d.sendUnscannedFilesTelemetry({downloadId:S.toString(),fileSize:x,fileExtension:C,reason:a.AvoidFileDetectionReason.ThirdPartyExtensionDownload,extensionId:n,extensionName:e}),s.releaseDownload(S),t(n,T.DownloadProcessAction.Complete)}const B=await c.getDownloadDomains(e),{isWhitelisted:R,category:O,domain:U}=await D.checkLocalWhitelists(B);R&&(r.logger.debug("Avoid processor: Files shouldn't be processed for this domain or category. its in local whitelist",{domain:U,category:O}),d.sendUnscannedFilesTelemetry({downloadId:S.toString(),fileSize:x,fileExtension:C,domain:U,category:O,reason:O?a.AvoidFileDetectionReason.ExcludedCategory:a.AvoidFileDetectionReason.ExcludedDomains}),s.releaseDownload(S),t(n,T.DownloadProcessAction.Complete));const{maliciousDownloadMaxSizeBytes:N,blockUnscannableFiles:M}=await o.getConfiguration();if(y.hasInterceptionCaughtParallelDownload(e)&&(r.logger.info("Avoid processor: [Firefox] Download is parallel, but was caught using interception, let the browser to catch it",S),s.releaseDownload(S),t(n,T.DownloadProcessAction.Complete)),y.wasInlineDownloadMisidentified(e)){r.logger.info("Avoid processor: [Firefox] Download is inline, but was not handled by interception",S),d.sendFileDetectionFailureTelemetry(e);const{firefoxFallbackInlineToParallel:i}=await o.getConfiguration();i||(r.logger.info("Avoid processor: [Firefox] Download is supposed to fallback to parallel, but fallback is disabled, file won't be scanned!",S),s.releaseDownload(S),t(n,T.DownloadProcessAction.Complete)),r.logger.info("Avoid processor: [Firefox] Download has fallen back to parallel",S),await l.update(n,{configuration:Object.assign(Object.assign({},e.configuration),{isInline:!1,fellbackToParallel:!0})})}const{isBlocked:F,reportEvent:L}=await async function(e,t){const{blockedFileTypes:n,dlpRules:i}=await o.getConfiguration(),{download:a}=e;if(n.includes(a.fileExtension))return r.logger.debug("Download has blocked file type (backward compatibility config), deleting it and opening blocked type page",a.id),{isBlocked:!0};const s=await k(t,i,a.fileExtension);return s.isBlocked?(r.logger.debug("Download has blocked file type for domain, deleting it and opening blocked type page",a.id),s):s}(e,B);F&&(await async function(e,t){var n;const{download:i,incognito:r,windowId:o}=e;if(await c.stopDownload(i.id),E.isChromium(a.browserName)&&r){const e={icon:"downloadBlock",absUrl:null!==(n=extensionSettings.absUrl)&&void 0!==n?n:"",bgColor:"gray",titleText:"You are not allowed to download this file",contentHtml:`<div data-testid="file-type-block-page-reason"><span data-testid="block-page-filename">${i.filename}</span> cannot be downloaded as the browser policy restricts downloading files of this type. Please contact your administrator for more information.</div>`},t=void 0!==o?await I.windows.get(o):void 0;await(t?_.openBlockPageTab(e,o):_.openBlockPageInNewWindow(e))}else await m.showFileTypeBlockPage(i.filename);((e,t,n)=>{g.processEvent({category:a.EventCategory.Prevention,timestamp:new Date,activity:"File download blocked by policy",metadata:{fileName:e,fileType:t},details:`The download file has a blocked extension [.${t}]. File name: "${e}"`,destination:[a.EventDestination.ABS],type:a.EventType.FileTypeDownloadBlocked,reportEvent:n})})(i.filename,i.fileExtension,t),s.releaseDownload(i.id)}(e,L),t(n,T.DownloadProcessAction.Complete));const{configuration:j}=e;(null==j?void 0:j.detectionMode)===a.FileDetectionMode.Silent&&(r.logger.debug("Avoid processor: Detection mode is silent not holding up download."),s.releaseDownload(S)),(null==j?void 0:j.detectionMode)===a.FileDetectionMode.Disabled&&(r.logger.info("Avoid processor: detection mode is disabled, stop processing."),s.releaseDownload(S),t(n,T.DownloadProcessAction.Complete)),await async function(e){const{releaseRepeatingFailingDownloadProcesses:t}=await o.getConfiguration();return t&&await async function(e){const{downloadProcessFailuresThresholdBeforeReleasing:t}=await o.getConfiguration();return(await b.getDownloadProcessFailuresForUrl(e)).length>=t}(e)}(i)&&(d.sendFileDownloadMaxFailuresTelemetry(i,S),s.releaseDownload(S),t(n,T.DownloadProcessAction.Complete)),x>N&&(await async function(e,t){const{download:n}=e,{id:i,urls:o,filename:l,fileSize:u,fileExtension:g}=n;r.logger.info("Avoid processor: File size is larger than limit, not handling download",i,u),f.sendUnscannedFilesEvent({sourceUrl:o.url,fileName:l,fileSize:u.toString(),errorReason:a.ErrorReason.TooLarge,isBlocked:t}),d.sendUnscannedFilesTelemetry({downloadId:i.toString(),fileSize:u,fileExtension:g,reason:a.AvoidFileDetectionReason.FileTooLarge}),t&&await c.stopDownload(i),s.releaseDownload(i),function(e){r.logger.info("cleanup",e),c.deleteStoredFileWithDelayIfNeeded(`${e}`),s.cleanReleaseHandler(e)}(i),await v.showUnscannableFileUiIfNeeded(e,p.Reason.LargeFile)}(e,M),t(n,T.DownloadProcessAction.Complete));const V=await async function(e){const{excludeByFileExtension:t}=await o.getConfiguration();return t.includes(e.download.fileExtension)}(e);V&&(function(e){const{fileExtension:t,fileSize:n,id:i}=e.download;r.logger.info("Avoid processor: File type is in skip list",i,t),d.sendUnscannedFilesTelemetry({downloadId:i.toString(),fileSize:n,fileExtension:t,reason:a.AvoidFileDetectionReason.BlockedFileType}),s.releaseDownload(i)}(e),t(n,T.DownloadProcessAction.Complete)),w.startAcquiringTextContent(S),t(n,T.DownloadProcessAction.Continue)}onError(e,t,n){const{id:i,download:{id:a}}=e;r.logger.error("Avoid processor: Failed while avoiding download",{error:n}),s.releaseDownload(a),s.cleanReleaseHandler(a),t(i,T.DownloadProcessAction.Fail)}}t.Avoid=P},9251:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseProcessor=void 0;const i=n(1276),a=n(4494),r=n(1071),o=n(1109),s=n(5998),c=n(1326),l=n(1043),u=n(7121);class d extends o.CallNext{async process(e,t,n){let i=await r.get(e);if(!i){const n=`${this.constructor.name}: download process info not found for id ${e}`;return c.logger.error(n),s.processAlarmTelemetry({message:n}),void t(e,a.DownloadProcessAction.Fail)}try{const o=new Date;c.logger.info(`${this.constructor.name}: Processing download`,{id:e,timestamp:o}),i=await r.updateLog(e,{processor:this.constructor.name,timestamp:o,state:i.state})||i,this.validate&&!await this.validate(i)&&this.callNext(e,a.DownloadProcessAction.Fail,t),await this.logic(i,((e,n)=>this.callNext(e,n,t)),n)}catch(e){if(e instanceof o.NextCalledError)return;await this.onError(i,t,e)}}async inlineTimeout(e,t){try{c.logger.info(`${this.constructor.name} processor: handling inline timeout`,e);const n=await r.get(e);if(!n){const n=`${this.constructor.name}: download process info not found for id ${e}`;return c.logger.error(n),s.processAlarmTelemetry({message:n}),void t(e,a.DownloadProcessAction.Fail)}await l.downloadFileToDownloadsIfNeeded({downloadProcessInfo:n});const{download:{filename:o,id:d},tabId:p,sourceTabId:f}=n;s.sendFileScanTelemetrySafe(i.TelemetryType.FileScanTimeout,n,{error:"inline timeout"}),u.showFileAccessibleNotificationIfNeeded(o,d,p,f),await r.update(n.id,{isTimeout:!0})}catch(e){if(e instanceof o.NextCalledError)return;throw e}}}t.BaseProcessor=d},2807:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Enrich=void 0;const i=n(1326),a=n(8459),r=n(75),o=n(1071),s=n(8657),c=n(9103),l=n(9552),u=n(1184),d=n(9251),p=n(4494),f=n(3181),g=n(1662),h=n(8027);class m extends d.BaseProcessor{async logic(e,t){const{id:n,download:{id:d}}=e;i.logger.info("Enrich processor: Checking if download should be enriched or blocked",{id:n}),await s.isSignedOut()&&(i.logger.warn("Enrich processor: User is signed out, not handling download"),r.releaseDownload(d),t(n,p.DownloadProcessAction.Complete)),e=await o.update(n,await async function(e){var t,n,r,o,s,d,p,m;const{useS3HttpPostUpload:v,fileScansFailTimeoutMs:y,maxEncryptedFileScanRetries:b,fileDetectionMode:w}=await a.getConfiguration(),{download:{urls:S},frameId:x,detectionInfo:C}=e,T=await u.isInlineByPolicy(S),E=S.finalUrl&&""!==S.finalUrl?l.generateRequestInit(S.finalUrl):void 0,I=c.getTabsManager(),_=g.getTabInfo(S.finalUrl);i.logger.debug("Enrich processor: blob tab info",{blobTabInfo:_});const A=null!==(r=null!==(n=null!==(t=e.tabId)&&void 0!==t?t:null==E?void 0:E.tabId)&&void 0!==n?n:null==_?void 0:_.tabId)&&void 0!==r?r:await I.getActiveId(),D=A?await I.get(A):void 0,k=null!==(o=e.windowId)&&void 0!==o?o:null===(s=await f.getWindowByTabId(A))||void 0===s?void 0:s.id,{referrer:P,url:B,finalUrl:R}=S,O=null!==(d=C.resourceType)&&void 0!==d?d:l.getRequestResourceType(P||B||R);if(!P&&h.isInternalDataUrl(R)&&A){const e=await I.get(A);S.referrer=null!==(p=null==e?void 0:e.url)&&void 0!==p?p:""}return Object.assign(Object.assign({},e),{configuration:{isInline:T,useS3HttpPostUpload:v,requestInit:null==E?void 0:E.requestInit,inlineTimeoutMs:T?await u.getDownloadProcessTimeout(S):-1,fileScansFailTimeoutMs:y,maxEncryptedFileScanRetries:b,detectionMode:w},tabId:A,sourceTabId:null==D?void 0:D.sourceTabId,windowId:k,frameId:null!==(m=null!=x?x:null==E?void 0:E.frameId)&&void 0!==m?m:null==_?void 0:_.frameId,detectionInfo:Object.assign(Object.assign({},C),{resourceType:O})})}(e))||e,t(n,p.DownloadProcessAction.Continue)}onError(e,t,n){const{id:a,download:{id:o}}=e;i.logger.error("Enrich processor: Failed while enriching download",{error:n}),r.releaseDownload(o),r.cleanReleaseHandler(o),t(a,p.DownloadProcessAction.Fail)}}t.Enrich=m},577:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileSignaturePreScan=void 0;const i=n(1071),a=n(1326),r=n(5998),o=n(1276),s=n(1748),c=n(7121),l=n(1043),u=n(75),d=n(9990),p=n(9251),f=n(4494);async function g(e,{verdict:t,verdictOrigin:n,scanId:s}){let p=await i.get(e);if(!p)return a.logger.error("File signature pre-scan processor: couldn't get download process info",e),!1;s&&(p=await i.update(e,{scan:{id:s}})||p);const{download:{id:f},sourceTabId:g}=p;switch(await i.updateScanVerdict(e,t,n),t){case o.Verdict.Clean:return await c.updateScanProgressToastIfNeeded(f,o.ScanProgressStatus.Completed,g),await async function(e){const{downloadProcessInfo:t}=e,{download:{id:n,filename:i},tabId:s,sourceTabId:u}=t;try{a.logger.debug("File signature pre-scan processor: handling clean verdict",e),await r.sendCleanVerdictTelemetry(Object.assign(Object.assign({},e),{scanType:o.ScanType.FileSignaturePreScan})),c.showCleanDownloadNotificationSafeIfNeeded(i,n,s,u),await l.downloadFileToDownloadsIfNeeded({downloadProcessInfo:t})}catch(e){a.logger.error("File signature pre-scan processor: failed handling clean verdict",e)}}({downloadProcessInfo:p,verdictOrigin:n}),!1;case o.Verdict.Malware:return await c.updateScanProgressToastIfNeeded(f,o.ScanProgressStatus.Completed,g),await async function(e){const{downloadProcessInfo:t}=e,{download:{id:n,filename:i},tabId:s,sourceTabId:p,configuration:f}=t;try{a.logger.debug("File signature pre-scan processor: Handling malicious verdict",e),await c.showMaliciousDownloadNotificationSafeIfNeeded(i,n,s,p),await r.sendMalVerdictTelemetry(Object.assign(Object.assign({},e),{scanType:o.ScanType.FileSignaturePreScan}));let u=o.DownloadRemediation.None;(null==f?void 0:f.detectionMode)!==o.FileDetectionMode.Block?(a.logger.info("File signature pre-scan processor: not remediaing download. remediation is off",n),await l.downloadFileToDownloadsIfNeeded({downloadProcessInfo:t,addDangerSuffix:!0})):(a.logger.info("File signature pre-scan processor: remediating download",n),u=await async function(e){var t;const{download:n,isTimeout:i}=e,r=null==n?void 0:n.generatedDownloadId,o=n.id;let s=null!==(t=n.remediationStatus)&&void 0!==t?t:await l.remediateDownload(o);return i&&r&&(a.logger.debug("File signature pre-scan processor: remediate inline timeout generated download",o,r),s=await l.remediateDownload(r)),s}(t)),l.publishMaliciousFileSafe(t,u),await d.openBlockpageInNewTabIfNeeded(t,u)}catch(e){a.logger.error("File signature pre-scan processor: failed handling malicious verdict",e)}finally{u.cleanReleaseHandler(n)}}({downloadProcessInfo:p,verdictOrigin:n}),!1;case o.Verdict.Unknown:default:return!0}}class h extends p.BaseProcessor{async logic(e,t){const n=await async function(e){const{id:t,download:{id:n,filename:r,fileSize:c,mimeType:l,urls:u,remoteIp:d}}=e;a.logger.info("File signature pre-scan processor: preScanFile - starting",n),e=await i.updateTimestamps(t,{fileSignaturePreScanStart:Date.now()})||e;const p=await o.getFile(`${n}`);if(!p)throw new Error(`preScanFile: couldn't get blob for download ${n}`);const f=await o.blobToSha256(p),g=u.finalUrl,{verdict:h,verdictOrigin:m,scanId:v}=await s.fileSignaturePreScan({fileSha256:f,url:g,fileName:r,fileSize:c,mimeType:l,remoteIp:d});return a.logger.info("File signature pre-scan processor: preScanFile",{downloadProcessInfoId:t,downloadId:n,verdict:h,verdictOrigin:m}),await i.updateTimestamps(t,{fileSignaturePreScanEnd:Date.now()}),{verdict:h,verdictOrigin:null!=m?m:o.VerdictOrigin.Unknown,scanId:v}}(e),r=await g(e.id,n)?f.DownloadProcessAction.Continue:f.DownloadProcessAction.Complete;t(e.id,r)}onError(e,t,n){a.logger.warn("File signature pre-scan processor: error occurred, continuing",n),r.sendFileScanTelemetrySafe(o.TelemetryType.FileScanError,e,{error:"file signature pre scan failure"}),t(e.id,f.DownloadProcessAction.Continue)}}t.FileSignaturePreScan=h},1127:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasInterceptionCaughtParallelDownload=t.wasInlineDownloadMisidentified=void 0;const i=n(1276);t.wasInlineDownloadMisidentified=function({configuration:e,detectionInfo:{origin:t}}){return Boolean(null==e?void 0:e.isInline)&&i.browserName===i.BrowserName.Firefox&&t!==i.DownloadDetectionOrigin.WebRequest},t.hasInterceptionCaughtParallelDownload=function({configuration:e,detectionInfo:{origin:t}}){return!1===Boolean(null==e?void 0:e.isInline)&&i.browserName===i.BrowserName.Firefox&&t===i.DownloadDetectionOrigin.WebRequest}},8404:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(2807),t),a(n(4045),t),a(n(5255),t),a(n(6457),t),a(n(9046),t),a(n(6828),t),a(n(577),t),a(n(4611),t),a(n(8807),t)},6828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalDownload=void 0;const i=n(1326),a=n(1276),r=n(1071),o=n(8459),s=n(7121),c=n(2424),l=n(9609),u=n(4316),d=n(8027),p=n(4972),f=n(4494),g=n(9251);class h extends g.BaseProcessor{async logic(e,t){const{id:n,download:p}=e,{id:g,urls:h}=p,m=h.finalUrl;i.logger.info("Internal download processor: Downloading",g),await r.updateTimestamps(n,{fetchStart:Date.now()}),i.logger.debug("Internal download processor: fetching file",g,m);const v=await async function(e){const{configuration:t,download:n,sourceTabId:r}=e;if(!t)throw new Error("Can't download file. configuration is undefined");const p=t.downloadMechanism;if(!p)throw new Error("Can't download file. download mechanism is undefined");const{showRealDownloadToastProgress:f,shouldShowDownloadProgressInToast:g}=await o.getConfiguration();await s.updateScanProgressToastIfNeeded(n.id,a.ScanProgressStatus.Downloading,r,f&&p!==a.DownloadMechanism.ContentScriptBlob?1:void 0,g&&p!==a.DownloadMechanism.ContentScriptBlob?1:void 0);const h=await(async e=>{const{showRealDownloadToastProgress:t}=await o.getConfiguration(),{configuration:n,download:{id:r,urls:p},tabId:f,sourceTabId:g,frameId:h}=e;if(!n)throw new Error("Can't download file. configuration is undefined");const{downloadMechanism:m,requestInit:v}=n;switch(m){case a.DownloadMechanism.DataUrlBlob:return d.fetchBlob(p.finalUrl);case a.DownloadMechanism.ContentScriptBlob:return await u.fetchBlob(r,p.finalUrl,f,h);case a.DownloadMechanism.ContentScriptStream:return await l.fetchBlob(r,p.finalUrl,v);case a.DownloadMechanism.ServiceWorkerStream:return(await c.fetchBlob(r,p.finalUrl,Object.assign(Object.assign({},t?{progressCallback:(e,t,n)=>{s.updateDownloadProgressToastIfNeeded(e,t,n,g)}}:{}),{requestInit:v,returnEveryChunk:!1}),i.logger)).blob;case a.DownloadMechanism.Unavailable:default:throw new Error("Can't download file. download mechanism is not available")}})(e);if(!h)throw new Error(`Failed to fetch blob by download mechanism ${p}. blob is undefined.`);return h}(e);i.logger.info(`Internal download processor: fetched file with length ${v.size}`,g),await r.updateTimestamps(n,{fetchEnd:Date.now()}),e=await r.update(n,{download:Object.assign(Object.assign({},p),{fetchedFileLength:v.size})})||e,await a.saveFile(`${g}`,v),t(n,f.DownloadProcessAction.Continue)}async onError(e,t,n){i.logger.error("Internal download processor: Error occurred.",e.id,n),await p.handleError(e,{reason:a.DownloadProcessFailureReason.Error,isBeforeDownload:!1,error:n}),t(e.id,f.DownloadProcessAction.Fail)}}t.InternalDownload=h},8807:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Scan=t.callNextCallback=void 0;const a=i(n(398)),r=n(1276),o=n(1071),s=n(1326),c=n(7121),l=n(1084),u=n(4972),d=i(n(165)),p=n(1748),f=n(8459),g=n(8459),h=n(3855),m=n(8585),v=n(3213),y=n(6339),b=n(4293),w=n(75),S=n(5998),x=n(9990),C=n(1043),T=n(259),E=n(850),I=n(9251),_=n(4494);async function A(e){const{urls:t,filename:n,fileSize:i,fileExtension:a,id:o}=e.download;s.logger.info("handling unscanned encrypted file",e);const{blockUnscannableFiles:c}=await g.getConfiguration();b.sendUnscannedFilesEvent({sourceUrl:t.url,fileName:n,fileSize:i.toString(),errorReason:r.ErrorReason.PasswordProtected,isBlocked:c}),S.sendUnscannedFilesTelemetry({downloadId:o.toString(),fileSize:i,fileExtension:a,reason:r.AvoidFileDetectionReason.EncryptedFile}),await x.showUnscannableFileUiIfNeeded(e,y.Reason.EncryptedFile),await(c?C.removeFileDownloadIfNeeded(e):C.downloadFileToDownloadsIfNeeded({downloadProcessInfo:e}))}async function D({scanId:e,hasFailuresInScan:t,verdict:n,encrypted:i},a){let l=await o.getByScanId(e);if(!l)return void s.logger.error("onFileScanDone: Could not find download process info",{scanId:e});s.logger.warn("onFileScanDone: ",Object.assign({scanStatus:a},void 0!==t&&{failures:t}));const{id:u,download:d,sourceTabId:p}=l;l=await o.updateTimestamps(u,{scanEnd:Date.now()})||l,await c.updateScanProgressToastIfNeeded(d.id,r.ScanProgressStatus.Completed,p);const f=r.VerdictOrigin.Network;await o.updateScanVerdict(u,n,f),n!==r.Verdict.Malware?await async function(e){const{downloadProcessInfo:t,encrypted:n}=e;try{s.logger.debug("handling clean verdict",e),await S.sendCleanVerdictTelemetry(Object.assign(Object.assign({},e),{scanType:r.ScanType.Scan}));const{download:{id:i,filename:a},tabId:o,sourceTabId:l,decryptionInfo:u}=t,{requireUserToEnterPasswordForFileEncryptedOptions:d}=await g.getConfiguration(),p=!E.isDefined(null==u?void 0:u.isEncrypted)||(null==u?void 0:u.isEncrypted);if(n&&d.includes(n)&&p)return void await A(t);c.showCleanDownloadNotificationSafeIfNeeded(a,i,o,l),await C.downloadFileToDownloadsIfNeeded({downloadProcessInfo:t})}catch(e){s.logger.error("Scan processor: failed handling clean verdict",e)}}({downloadProcessInfo:l,encrypted:i,verdictOrigin:f}):await async function(e){const{downloadProcessInfo:t}=e;try{s.logger.debug("Handling malicious verdict",e);const{download:{id:n,filename:i},tabId:a,sourceTabId:o,configuration:l}=t;await c.showMaliciousDownloadNotificationSafeIfNeeded(i,n,a,o),await S.sendMalVerdictTelemetry(Object.assign(Object.assign({},e),{scanType:r.ScanType.Scan}));let u=r.DownloadRemediation.None;(null==l?void 0:l.detectionMode)!==r.FileDetectionMode.Block?(s.logger.debug("Delete malicious file is disabled, downloading file to downloads if needed"),await C.downloadFileToDownloadsIfNeeded({downloadProcessInfo:t,addDangerSuffix:!0})):u=await async function(e){var t;const{download:n,configuration:i,isTimeout:a}=e,o=null==n?void 0:n.generatedDownloadId,c=n.id;if(s.logger.info("remediating download for scan",c),!(null==i?void 0:i.isInline))return await C.remediateDownload(c);n.remediationStatus||s.logger.error("remediateDownloadForScan: remediationStatus is undefined for activeDownload",c);let l=null!==(t=n.remediationStatus)&&void 0!==t?t:r.DownloadRemediation.Failed;return i.isInline&&a&&o&&(s.logger.debug("Deleting malicious generated download on timeout for active download",c,o),l=await C.remediateDownload(o)),l}(t),C.publishMaliciousFileSafe(t,u),await x.openBlockpageInNewTabIfNeeded(t,u)}catch(e){s.logger.error("Scan processor: failed handling malicious verdict",e)}finally{const{download:{id:e}}=t;C.deleteStoredFileWithDelayIfNeeded(`${e}`),w.cleanReleaseHandler(e)}}({downloadProcessInfo:l,verdictOrigin:f})}async function k(e){var t;const{download:n,configuration:i,scan:a,decryptionInfo:l,id:u,sourceTabId:d}=e;if(!i)return void s.logger.error("onFileScanPendingPassword: Configuration is missing.");const p=null==a?void 0:a.id;s.logger.info("onFileScanPendingPassword: handling encrypted file",p,n.id),await o.update(u,{decryptionInfo:Object.assign(Object.assign({},l),{isEncrypted:!0,encryptedFileScanRetries:(null!==(t=null==l?void 0:l.encryptedFileScanRetries)&&void 0!==t?t:i.maxEncryptedFileScanRetries)-1})}),await c.updateScanProgressToastIfNeeded(n.id,r.ScanProgressStatus.PendingPassword,d),x.showGetEncryptedFilePasswordUiIfNeeded(n.id,n.filename,i.detectionMode)}let P;a.default.runtime.onMessage.addListener((function(e){e.kind!==r.MessageKind.SetEncryptedFilePassword||async function({password:e,downloadId:t,filename:n}){s.logger.debug("decryptFile:",{filename:n,downloadId:t});const i=await o.getByBrowserDownloadId(t);if(!i)return void s.logger.warn("decryptFile: scan info wasn't found");const{scan:a,id:l,sourceTabId:u}=i,{id:d}=a||{};if(!d)return void s.logger.warn("decryptFile: scan id wasn't found",{scanId:d});let p;""!==e&&(await c.updateScanProgressToastIfNeeded(t,r.ScanProgressStatus.Scanning,u,void 0,void 0,!0),p=await h.decryptUpload(d,e),p.success||(s.logger.warn("decryptFile: decryption failed",{scanId:d}),c.clearDownloadNotification(t))),await v.progressScanStatus(l,(null==p?void 0:p.success)?r.ScanStatus.Pending:r.ScanStatus.Failed),N()}(e)}));const B=d.default(1);async function R(e){await B((async()=>{await async function(e){var t;const{scanId:n,eventType:i,decryption_status:a,decryptionStatus:c,encrypted:l}=e,u=null!=c?c:a,d=await async function(e,t,n){switch(e){case r.PPEventType.FileScanPending:return r.ScanStatus.Pending;case r.PPEventType.FileScanInProgress:return r.ScanStatus.InProgress;case r.PPEventType.FileScanError:return r.ScanStatus.ScanError;case r.PPEventType.FileScanCompleted:return t?async function(e,t){const{requestEncryptedFilePasswordFromUser:n,requireUserToEnterPasswordForFileEncryptedOptions:i}=await g.getConfiguration();return n&&i.includes(e)?t===r.DecryptionStatuses.Succeeded?r.ScanStatus.Completed:r.ScanStatus.PendingPassword:r.ScanStatus.Completed}(t,n):r.ScanStatus.Completed}}(i,l,u);if(!d)return void s.logger.debug("onFileScanEvent: unknown event type",i);s.logger.info("onFileScanEvent: handling file scan event",d,n);let p=await o.getByScanId(n);if(!p)return void s.logger.error("onFileScanEvent: Could not find download process info for scan-id",n);const{id:f,decryptionInfo:h,configuration:y}=p;if(!y)return void s.logger.error("onFileScanEvent: Configuration is missing. Cannot handle file scan event.",n);const b=null!==(t=null==h?void 0:h.encryptedFileScanRetries)&&void 0!==t?t:y.maxEncryptedFileScanRetries;if(await v.progressScanStatus(f,d)){if(v.isScanDone(d))return u===r.DecryptionStatuses.Succeeded&&(p=await o.update(f,{decryptionInfo:Object.assign(Object.assign({},h),{encryptedFileScanRetries:b,isEncrypted:!1})})||p),await m.tryOnceAsync(D,e,d),void await v.progressScanStatus(f,r.ScanStatus.Finished);if(d===r.ScanStatus.PendingPassword){if(b>0)return void await m.tryOnceAsync(k,p);s.logger.info("onFileScanEvent: no retries left for scanning the encrypted file, changing scan status to failure"),await v.progressScanStatus(f,r.ScanStatus.Failed),N()}}}(e)}))}const O=1e3,U={isRunning:!1,shouldRunAgain:!1};function N(){if(U.isRunning)return s.logger.debug("scheduleScanLifecycle: already running"),void(U.shouldRunAgain=!0);s.logger.info("scheduleScanLifecycle: started"),U.isRunning=!0,M()}async function M(){try{await async function(){return await async function(){const e=await o.getAllFailedScans();0!==e.length&&await Promise.all(e.map((e=>async function(e){var t;(null===(t=e.decryptionInfo)||void 0===t?void 0:t.isEncrypted)&&await A(e),await v.progressScanStatus(e.id,r.ScanStatus.Finished)}(e))))}(),await async function(){const{scanStatusIntervalMs:e}=await g.getConfiguration();if(Date.now()-F<e)return L.Postpone;const t=await o.getAllWithUncompletedScans();if(0===t.length)return L.NoScans;const n=function(e){return e.map((e=>{var t;return null===(t=e.scan)||void 0===t?void 0:t.id})).filter((e=>!!e))}(t);if(n.length<=0)return L.NoRelevantScans;F=Date.now(),s.logger.debug("handleStaleScans: querying for status",n.join(", "));try{const e=await p.getFileScanStatus({scanIds:n});await Promise.all(e.scanStatus.map((e=>R(e))))}catch(e){return s.logger.warn("handleStaleScans: status query failed",e),L.Postpone}return L.Done}()!==L.NoScans&&await async function(){const e=await o.getAllWithUncompletedScans();if(0===e.length)return L.NoScans;const t=e.filter((e=>function(e){const{configuration:t,isTimeout:n,timestamps:i}=e;if(!t)throw new Error("hasScanTimedout: configurations is missing");const{inlineTimeoutMs:a,isInline:r,fileScansFailTimeoutMs:o}=t,s=a>0&&r&&!n?a:o,c=i.fetchEnd;return Date.now()-c>s}(e)));return 0===t.length?L.NoRelevantScans:(await Promise.all(t.map((e=>async function(e){const{scan:t,id:n}=e;C.isInlineTimeoutEnabled(e)?await P(n):(s.logger.debug("scanTimedOut:",null==t?void 0:t.id),await v.progressScanStatus(n,r.ScanStatus.Failed),await u.handleError(e,{reason:r.DownloadProcessFailureReason.Timeout,isBeforeDownload:!1}),await v.progressScanStatus(n,r.ScanStatus.Finished))}(e)))),L.Done)}()!==L.NoScans}()&&(U.shouldRunAgain=!0)}catch(e){s.logger.error("executeScheduleScanLifecycle: failed to handle scan lifecycle",e),U.shouldRunAgain=!0}await new Promise((e=>{setTimeout(e,O)})),U.shouldRunAgain?(U.shouldRunAgain=!1,M()):(s.logger.info("executeScheduleScanLifecycle: stopped"),U.isRunning=!1)}let F=0;var L;!function(e){e.Postpone="postpone",e.NoScans="noScans",e.NoRelevantScans="noRelevantScans",e.Done="done"}(L||(L={})),f.registerGetConfigurationCallback((()=>{N()}),[f.ConfigurationEvent.Updated,f.ConfigurationEvent.NotModified]);class j extends I.BaseProcessor{async logic(e,n){const{id:i,download:a,sourceTabId:u}=e,{id:d}=a;var p;s.logger.info("Scan processor: Scanning",d),function(e){t.callNextCallback||(t.callNextCallback=e)}(n),p=e=>this.inlineTimeout(e,n),P||(P=p);const f=await async function(e){try{return async function({id:e,download:t,upload:n,configuration:i}){if(!i)throw new Error("startScanInner: configurations is missing");const{useS3HttpPostUpload:a}=i;if(!n)throw new Error("startScanInner: upload is missing");const{uploadKey:c,etags:u}=n;if(!c||!u)throw s.logger.error("startScanInner: uploadKey or etags are missing"),new Error("uploadKey or etags are missing");const{id:d,urls:p,filename:f,remoteIp:g}=t,m={single_part:a,upload_key:c,etags:u,filename:f,finalUrl:p.finalUrl,textContent:await l.acquireTextContent(d),downloadId:d,remoteIp:g},{scanId:v,operationUrl:y,headers:b}=await h.uploadComplete(m);if(!v)throw new Error("startScan: no scanId returned from uploadComplete");return await async function(e,t){return o.update(e,{scan:{id:t,status:r.ScanStatus.Initiating}})}(e,v),await T.addDataToDownloadProcessId(e,y,b),N(),v}(e)}catch(t){throw await v.progressScanStatus(e.id,r.ScanStatus.Failed),t}}(e);await o.updateTimestamps(i,{scanStart:Date.now()}),await c.updateScanProgressToastIfNeeded(d,r.ScanProgressStatus.Scanning,u),s.logger.info("Scan processor: Scan started successfully",d,f)}async onError(e,t,n){s.logger.error("Scan processor: Error occurred.",e.id,n),await u.handleError(e,{reason:r.DownloadProcessFailureReason.Error,isBeforeDownload:!1,error:n}),t(e.id,_.DownloadProcessAction.Fail)}}t.Scan=j},9046:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettleUserDownload=void 0;const i=n(1276),a=n(1071),r=n(1043),o=n(75),s=n(4972),c=n(1326),l=n(7584),u=n(4494),d=n(9251);class p extends d.BaseProcessor{async logic(e,t){const{downloadMechanism:n}=e.configuration;(!n||n===i.DownloadMechanism.Unavailable)&&(await s.handleError(e,{reason:i.DownloadProcessFailureReason.Unfetchable,isBeforeDownload:!0}),t(e.id,u.DownloadProcessAction.Fail));const{download:l,configuration:d,id:p}=e,{id:f}=l;if(c.logger.debug("Settle user download processor: Handling unknown verdict",e),(null==d?void 0:d.detectionMode)!==i.FileDetectionMode.Silent&&(null==d?void 0:d.isInline)){const e=await r.remediateDownload(f);await a.update(p,{download:Object.assign(Object.assign({},l),{remediationStatus:e})})}else c.logger.info("Settle user download processor: Didn't delete download, releasing parallel download",f),o.releaseDownload(f);t(p,u.DownloadProcessAction.Continue)}validate(e){const{id:t,configuration:n}=e;if(!n){const e=`Settle user download processor: configuration is missing in download process info ${t}`;return c.logger.error(e),l.processAlarmTelemetry({message:e}),!1}if(!n.downloadMechanism){const e=`Settle user download processor: download mechanism is missing in configuration in download process info ${t}`;return c.logger.error(e),l.processAlarmTelemetry({message:e}),!1}return!0}onError(e,t,n){c.logger.error("Settle user download processor: Error occurred.",e.id,n),t(e.id,u.DownloadProcessAction.Fail)}}t.SettleUserDownload=p},4611:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Upload=void 0;const i=n(1276),a=n(1071),r=n(8459),o=n(3855),s=n(259),c=n(1326),l=n(2005),u=n(7121),d=n(7584),p=n(4972),f=n(1043),g=n(6339),h=n(4293),m=n(9990),v=n(4494),y=n(9251),b=n(5998);class w extends y.BaseProcessor{async logic(e,t){const{id:n,download:d,configuration:p,upload:y,sourceTabId:w}=e,{id:S,urls:x,fetchedFileLength:C,filename:T,fileSize:E,fileExtension:I}=d,_=x.finalUrl;c.logger.info("Upload processor: Uploading",S),await u.updateScanProgressToastIfNeeded(S,i.ScanProgressStatus.Uploading,w),await a.updateTimestamps(n,{uploadStart:Date.now()});const A=await i.getFile(`${S}`);if(!A)throw new Error(`blob was not found ${S}`);const{maliciousDownloadMaxSizeBytes:D,blockUnscannableFiles:k,s3FileMultipartUploadMaxPartSize:P,useS3HttpPostUpload:B,uploadFetchOperationRetries:R,uploadFetchOperationWaitBetweenRetries:O}=await r.getConfiguration();if(C&&C>D){c.logger.debug("Upload processor: File too large. not uploading file.",{downloadId:S,blockUnscannableFiles:k});const a=k?f.removeFileDownloadIfNeeded(e):f.downloadFileToDownloadsIfNeeded({downloadProcessInfo:e});await a,h.sendUnscannedFilesEvent({sourceUrl:x.url,fileName:T,fileSize:C.toString(),errorReason:i.ErrorReason.TooLarge,isBlocked:k}),b.sendUnscannedFilesTelemetry({downloadId:S.toString(),fileSize:E,fileExtension:I,reason:i.AvoidFileDetectionReason.FileTooLarge}),await m.showUnscannableFileUiIfNeeded(e,g.Reason.LargeFile),t(n,v.DownloadProcessAction.Fail)}const U=(null==p?void 0:p.inlineTimeoutMs)&&f.isInlineTimeoutEnabled(e)?l.niceTimeout((()=>{e&&this.inlineTimeout(n,t)}),p.inlineTimeoutMs):l.noopCancelable,{etags:N,uploadKey:M,operationsResponses:F}=await o.uploadFile({blob:A,filename:null!=T?T:"unknown",maxSizeBytes:D,s3FileMultipartUploadMaxPartSize:P,retries:R,waitBetweenRetriesMs:O},B).finally(U.cancel);if(!M)throw new Error("Upload processor: uploadKey is undefined");await Promise.all(F.map((({operationUrl:e,headers:t})=>s.addDataToDownloadProcessId(n,e,t)))),e=await a.update(n,{upload:Object.assign(Object.assign({},y),{uploadKey:M,etags:N})})||e,c.logger.info("Upload processor: Upload complete",_,N),await s.clearDataForDownloadProcessId(n),await a.updateTimestamps(n,{uploadEnd:Date.now()}),t(n,v.DownloadProcessAction.Continue)}async onError(e,t,n){c.logger.error("Upload processor: Error occurred.",e.id,n),await p.handleError(e,{reason:i.DownloadProcessFailureReason.Error,isBeforeDownload:!1,error:n}),t(e.id,v.DownloadProcessAction.Fail)}validate(e){const{id:t,configuration:n}=e;if(!n){const e=`Upload processor: configuration is missing in download process info ${t}`;return c.logger.error(e),d.processAlarmTelemetry({message:e}),!1}return!0}}t.Upload=w},5255:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlPreScan=void 0;const i=n(1071),a=n(1326),r=n(1276),o=n(8459),s=n(1748),c=n(7121),l=n(1043),u=n(75),d=n(5998),p=n(9990),f=n(9552),g=n(4494),h=n(9251);async function m(e,t){return await Promise.all(e.map((async e=>{const n=await s.urlPreScan({url:e,remoteIp:f.getUrlIp(e)},t);return a.logger.debug("Pre-scan processor: preScanFile - pre scan url api response",e,t,n),n})))}async function v(e,t){const{enableFilePreScan:n}=await o.getConfiguration();if(!n)return a.logger.debug("Pre-scan processor: preScanFile - disabled, returning unknown",t),{verdict:r.Verdict.Unknown,verdictOrigin:r.VerdictOrigin.Configuration};const i=function(e){return y(e,(e=>e.filter((e=>e.verdict===r.Verdict.Malware))),r.Verdict.Malware)}(e);if(i)return a.logger.debug("Pre-scan processor: getPreScanFinalVerdict - malicious",t),i;const s=function(e){return y(e,(e=>e.every((e=>e.verdict===r.Verdict.Clean))?e.filter((e=>e.verdict===r.Verdict.Clean&&Boolean(e.dontScanFiles))):[]),r.Verdict.Clean)}(e);if(s){const{treatFilePreScanCleanAsUnknown:e}=await o.getConfiguration();return e?(a.logger.debug("Pre-scan processor: getPreScanFinalVerdict - treating clean as unknown",t),{verdict:r.Verdict.Unknown,verdictOrigin:r.VerdictOrigin.Configuration}):(a.logger.debug("Pre-scan processor: getPreScanFinalVerdict - clean",t),s)}return a.logger.debug("Pre-scan processor: getPreScanFinalVerdict - unknown",t),{verdict:r.Verdict.Unknown,verdictOrigin:r.VerdictOrigin.Configuration}}function y(e,t,n){const i=new Set(t(e).map((({verdictOrigin:e})=>e)));if(i.size>0)return i.has(r.VerdictOrigin.Network)?{verdict:n,verdictOrigin:r.VerdictOrigin.Network}:i.has(r.VerdictOrigin.Cache)?{verdict:n,verdictOrigin:r.VerdictOrigin.Cache}:i.has(r.VerdictOrigin.Configuration)?{verdict:n,verdictOrigin:r.VerdictOrigin.Configuration}:(a.logger.warn("Pre-scan processor: getPreScanFinalVerdictInternal - unknown verdict origin",{verdictOrigins:i,verdict:n}),{verdict:n,verdictOrigin:r.VerdictOrigin.Unknown})}class b extends h.BaseProcessor{async logic(e,t){const{verdict:n,verdictOrigin:o}=await async function(e){const{id:t,download:n,sourceTabId:o}=e,l=n.id,{url:u,referrer:d,finalUrl:p}=n.urls;a.logger.info("Pre-scan processor: preScanFile - starting",l),e=await i.updateTimestamps(t,{preScanStart:Date.now()})||e;const f=[...new Set([u,d,p].filter(Boolean))],g=await m(f,s.CacheMode.onlyCache),h=g.filter((e=>e.verdictOrigin===r.VerdictOrigin.Cache)),y=new Set(h.map((e=>e.url))),b=f.filter((e=>!y.has(e)));(b.length>0||(await v(g,l)).verdict===r.Verdict.Unknown)&&await c.updateScanProgressToastIfNeeded(l,r.ScanProgressStatus.Preparing,o);const w=await m(b,s.CacheMode.ignoreCache),S=[...h,...w],{verdict:x,verdictOrigin:C}=await v(S,l);return a.logger.info("Pre-scan processor: preScanFile",{download:n,downloadId:l,verdict:x,verdictOrigin:C}),e=await i.updateTimestamps(t,{preScanEnd:Date.now()})||e,{verdict:x,verdictOrigin:C}}(e),f=await async function(e,t,n){const{id:o,download:{id:s},sourceTabId:f}=e;switch(await i.updateScanVerdict(o,t,n),t){case r.Verdict.Clean:return await c.updateScanProgressToastIfNeeded(s,r.ScanProgressStatus.Completed,f),await async function(e){const{downloadProcessInfo:{download:{id:t,filename:n},tabId:i,sourceTabId:o}}=e;try{a.logger.debug("Pre-scan processor: handling clean verdict",e),await d.sendCleanVerdictTelemetry(Object.assign(Object.assign({},e),{scanType:r.ScanType.UrlPreScan})),c.showCleanDownloadNotificationSafeIfNeeded(n,t,i,o)}finally{u.releaseDownload(t),u.cleanReleaseHandler(t)}}({downloadProcessInfo:e,verdictOrigin:n}),!1;case r.Verdict.Malware:return await c.updateScanProgressToastIfNeeded(s,r.ScanProgressStatus.Completed,f),await async function(e){const{downloadProcessInfo:t}=e,{download:{id:n,filename:i},tabId:o,sourceTabId:s,configuration:f}=t;try{a.logger.debug("Pre-scan processor: Handling malicious verdict",e),await c.showMaliciousDownloadNotificationSafeIfNeeded(i,n,o,s),await d.sendMalVerdictTelemetry(Object.assign(Object.assign({},e),{scanType:r.ScanType.UrlPreScan}));let u=r.DownloadRemediation.None;a.logger.info("Pre-scan processor: remediating download",n),(null==f?void 0:f.detectionMode)===r.FileDetectionMode.Block&&(u=await l.remediateDownload(n)),l.publishMaliciousFileSafe(t,u),await p.openBlockpageInNewTabIfNeeded(t,u)}finally{u.cleanReleaseHandler(n)}}({downloadProcessInfo:e,verdictOrigin:n}),!1;case r.Verdict.Unknown:default:return!0}}(e,n,o)?g.DownloadProcessAction.Continue:g.DownloadProcessAction.Complete;t(e.id,f)}onError(e,t,n){a.logger.warn("Pre-scan processor: error occured, continuing",n),d.sendFileScanTelemetrySafe(r.TelemetryType.FileScanError,e,{error:"url pre scan failure"}),t(e.id,g.DownloadProcessAction.Continue)}}t.UrlPreScan=b},6562:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeDownloadClickInterceptionIdentifier=t.isAbsIdentified=t.setHrefAttributeForIdentifiedDownload=void 0;const i=n(1276),a=n(1326),r=`#${i.DownloadDetectionOrigin.DownloadClickInterception}`;function o(e){return e.endsWith(r)}t.setHrefAttributeForIdentifiedDownload=function(e){const t=e.getAttribute("href");t?o(t)||e.setAttribute("href",`${t}${r}`):a.logger.warn("Safari download identification: cannot set href for the identified download")},t.isAbsIdentified=o,t.removeDownloadClickInterceptionIdentifier=function(e){return e.replace(r,"")}},75:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.releaseDownload=t.cleanReleaseHandler=t.setReleaseHandler=void 0;const i=n(1326),a=new Map;t.setReleaseHandler=function(e,t){a.set(e,{release:t})},t.cleanReleaseHandler=function(e){a.delete(e)},t.releaseDownload=function(e,t){try{const n=a.get(e);return n?n.released?((null==t?void 0:t.shouldSkipWarnOnRelease)||i.logger.warn("releaseDownload: Download already released",e),!1):(n.release(null==t?void 0:t.releaseParameters),n.released=!0,i.logger.debug("releaseDownload: download was released.",e),!0):(i.logger.warn("releaseDownload: Could not find a release item for download. not releasing",e),!1)}catch(t){return i.logger.error("Error while releasing download",e,t),!1}}},9990:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openBlockpageInNewTabIfNeeded=t.showGetEncryptedFilePasswordUiIfNeeded=t.showUnscannableFileUiIfNeeded=void 0;const i=n(1276),a=n(8459),r=n(6339),o=n(1477),s=n(1326),c=n(7121),l=n(5231),u=n(398),d=n(3755),p=n(8676),f=n(9103);t.showUnscannableFileUiIfNeeded=async function(e,t){var n;const{download:r,windowId:f,incognito:g,tabId:h,sourceTabId:m,configuration:v}=e,{filename:y,id:b}=r;if((null==v?void 0:v.detectionMode)===i.FileDetectionMode.Silent)return void s.logger.debug("Silent mode is on, not showing unscannable file UI",b,t);const{blockUnscannableFiles:w,largeFilesScanMessage:S}=await a.getConfiguration(),{text:x,shouldReplaceMessageBody:C}=o.getUnscannableFilesConfigurationTexts(t,S);if(w){if(g&&p.isChromium(i.browserName)){const e={icon:"error",titleText:"Downloaded file cannot be scanned",bgColor:"red",contentHtml:`<div data-test-id="unscannable-block-page-subtitle">${C?x:`the file <span data-test-id="unscannable-file-filename">${y}</span> ${x}, and therefore can&apos;t be scanned for malicious content.<br />\nYour download has been blocked. <br />\nPlease contact your administrator for more information.`}</div>`,absUrl:null!==(n=extensionSettings.absUrl)&&void 0!==n?n:""};await(f&&await u.windows.get(f)?l.openBlockPageTab(e,f):d.openBlockPageInNewWindow(e))}else await o.showUnscannableBlockPage(y,x,C);c.clearDownloadNotification(b)}else c.showUnscannableFileNotificationSafeIfNeeded(y,b,x,C,t,h,m)},t.showGetEncryptedFilePasswordUiIfNeeded=async function(e,t,n){n!==i.FileDetectionMode.Silent?await o.showEncryptedFilePasswordPage(e,t):s.logger.debug("Silent mode is on, not showing encrypted file UI",e,r.Reason.EncryptedFile)},t.openBlockpageInNewTabIfNeeded=async function(e,t){var n;const{download:a,incognito:r,windowId:c,tabId:p,configuration:g}=e,h=f.getTabsManager(),m=p?await h.get(p):void 0;if(m&&!1===m.isDetectionActive)return void s.logger.debug("Detection is disabled for this tab, not opening new blockpage",p);const{id:v,filename:y}=a,b=(null==g?void 0:g.detectionMode)===i.FileDetectionMode.Block&&[i.DownloadRemediation.None,i.DownloadRemediation.Deleted].includes(t);if((null==g?void 0:g.detectionMode)!==i.FileDetectionMode.Silent)if(s.logger.debug("Opening blockpage in new tab",y,v),r){const e={icon:"skull",absUrl:null!==(n=extensionSettings.absUrl)&&void 0!==n?n:"",bgColor:"red",titleText:b?"Malicious file download was blocked":"Do not launch the downloaded file",contentHtml:b?`<p>${y} is a malicious file that may harm your computer. Its download had been blocked by policy.</p>`:`<p>${y} is dangerous - launching it may let attackers steal information or cause other harm. Do not click or launch this downloaded file to avoid damaging your device, your data, and your organization. </p>`};if("number"==typeof c&&await u.windows.get(c))return void await l.openBlockPageTab(e,c);await d.openBlockPageInNewWindow(e)}else await o.showFileWarningBlockPage(y,b)}},1043:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getOriginDownloadProcessId=t.isDownloadByABSExtension=t.getDownloadItemFileSize=t.isInlineTimeoutEnabled=t.publishMaliciousFileSafe=t.removeFileDownloadIfNeeded=t.deleteStoredFileWithDelayIfNeeded=t.downloadFileToDownloadsIfNeeded=t.getDownloadDomains=t.getDownloadOriginDomain=t.publishMaliciousFile=t.getGeneratedDownload=t.stopDownload=t.remediateDownload=void 0;const a=n(1276),r=i(n(398)),o=n(8459),s=n(1025),c=n(9249),l=n(1326),u=n(8585),d=n(1748),p=n(5998),f=n(64),g=n(75),h=n(1412),m=n(850),v=n(4458),y=n(9103);async function b(e,t,n){var i;l.logger.info(`remediateWithRetry: trying to remediate download ${e}. retry count ${n}`,e);const o=null===(i=await r.default.downloads.search({id:e}))||void 0===i?void 0:i[0];if(!o)return l.logger.warn("remediateWithRetry: failed, download not found.",e),a.DownloadRemediation.Failed;if(n>2)return l.logger.warn("remediateWithRetry: failed, exceeded retry count.",e),a.DownloadRemediation.Failed;switch(o.state){case"interrupted":return l.logger.info(`remediateWithRetry: download already canceled, returning remediation status ${t}`,e),t;case"in_progress":l.logger.info("remediateWithRetry: download in progress, canceling...",e);try{await r.default.downloads.cancel(e),l.logger.info("remediateWithRetry: Download canceled",e),t=a.DownloadRemediation.Deleted}catch(n){l.logger.warn("remediateWithRetry: failed on download cancel.",e,n),t=a.DownloadRemediation.Failed}return await b(e,t,n+1);case"complete":l.logger.info("remediateWithRetry: download is complete, removing...",e);try{return await r.default.downloads.removeFile(e),l.logger.info("remediateWithRetry: Download file removed",e),a.DownloadRemediation.Deleted}catch(t){return l.logger.warn("remediateWithRetry: failed removing download.",e,t),a.DownloadRemediation.Failed}default:return l.logger.warn("remediateWithRetry: unknown download state.",e,o.state),a.DownloadRemediation.Failed}}async function w(e){if(a.browserName!==a.BrowserName.Safari){if(h.FirefoxWebRequestDownloadItem.isFirefoxWebRequestDownloadItemId(e))return l.logger.debug("stopDownload: for firefox"),void g.releaseDownload(e,{releaseParameters:{filename:"",stop:!0}});await u.asyncTrySafe(`stopDownload: Cancel download ${e}`,(async()=>{await r.default.downloads.cancel(e),l.logger.info("stopDownload: Download canceled",e)})),await u.asyncTrySafe(`stopDownload: remove file for download ${e}`,(async()=>{await r.default.downloads.removeFile(e),l.logger.info("stopDownload: Download file removed",e)})),await u.asyncTrySafe(`stopDownload: Erase download ${e} from history`,(async()=>{await r.default.downloads.erase({id:e}),l.logger.info("stopDownload: Download erased from history",e)})),g.releaseDownload(e,{shouldSkipWarnOnRelease:!0})}else l.logger.debug("stopDownload: not supported on Safari")}async function S(e){l.logger.info("Publishing malicious file",e);const{remediationStatusesToEnrichScan:t,enableEnrichScanWithRemediation:n,enableRemediationTelemetries:i}=await o.getConfiguration(),{downloadProcessInfo:r,remediationStatus:s}=e,{scan:c,download:{id:f}}=r,g=null==c?void 0:c.id;if(n&&g&&t.includes(s)&&await u.asyncTrySafe(`Enriching scan ${g} with download ${f} remediation status ${s}`,(()=>d.scanEnrichment({remediationStatus:s,scanId:g}))),v.sendMaliciousFileDetectionEvent(r,s),i){const e={category:a.TelemetryCategory.Remediation,type:a.TelemetryType.FileDownloadRemediation,timestamp:new Date,metadata:{scanId:g,downloadId:f,remediationStatus:s}};await u.asyncTrySafe("Sending download remediation telemetry",(()=>p.processTelemetry(e)))}}function x(e,t=6e4){l.logger.debug("Stored file queued for deletion",{downloadId:e,delayms:t}),setTimeout((()=>{l.logger.info("Deleting stored file",e),a.deleteFile(e)}),t)}t.remediateDownload=async function(e){var t;if(a.browserName===a.BrowserName.Safari)return l.logger.debug("remediateDownload: not supported on Safari"),a.DownloadRemediation.NotSupported;if(h.FirefoxWebRequestDownloadItem.isFirefoxWebRequestDownloadItemId(e))return await w(e),a.DownloadRemediation.Deleted;const n=await b(e,a.DownloadRemediation.None,0);return(null===(t=await r.default.downloads.search({id:e}))||void 0===t?void 0:t[0])&&await u.asyncTrySafe(`Erase download ${e} from history`,(async()=>{await r.default.downloads.erase({id:e}),l.logger.info("Download erased from history",e)})),g.releaseDownload(e,{shouldSkipWarnOnRelease:!0}),n},t.stopDownload=w,t.getGeneratedDownload=async function(e){var t;return null===(t=await r.default.downloads.search({urlRegex:`#originDownloadId=${e}`}))||void 0===t?void 0:t[0]},t.publishMaliciousFile=S,t.getDownloadOriginDomain=function({finalUrl:e,referrer:t,url:n}){const i=(({finalUrl:e,referrer:t,url:n})=>t||n||e)({finalUrl:e,referrer:t,url:n});return c.getDomainFromUrl(i)},t.getDownloadDomains=async function(e){const{download:t,tabId:n}=e,{finalUrl:i,url:a,referrer:r}=t.urls,o=[...new Set([i,a,r])].filter(Boolean),s=new Set(o),l=y.getTabsManager(),{url:u}=n&&await l.get(n)||{};return u&&s.add(u),[...s].map((e=>c.getDomainFromUrl(e))).filter(Boolean)},t.downloadFileToDownloadsIfNeeded=async function({downloadProcessInfo:e,addDangerSuffix:t}){if(a.browserName===a.BrowserName.Safari)return void l.logger.debug("Not downloading file to downloads because browser is Safari");const{download:n,configuration:i,isTimeout:c}=e,{id:u,isDownloaded:d}=n;if(d)return void l.logger.debug("Not downloading file to downloads because it was already downloaded",u);if(!i)return void l.logger.error("Not downloading file to downloads because configuration is not defined",u);const{isInline:p,detectionMode:g}=i;p?c?l.logger.debug("Not downloading file to downloads because it was already handled when timed out",u):g!==a.FileDetectionMode.Silent?(l.logger.debug("Downloading file to downloads",u),await async function({downloadProcessInfo:e,addDangerSuffix:t}){const{download:n,id:i}=e,a=n.id,{maliciousDownloadSuffix:c}=await o.getConfiguration(),u=t?`${n.filename}${c}`:n.filename;l.logger.info("using stored file for download",{id:i,filename:u}),await f.update(i,{download:Object.assign(Object.assign({},n),{isDownloaded:!0})}),await async function(e,t,n){const i=new URLSearchParams;i.set("fileName",n),i.set("downloadId",e.toString()),i.set("downloadProcessInfoId",t);const a=`${s.downloadStoredFileUrl}&${i.toString()}`;await r.default.tabs.create({url:a,active:!1})}(a,i,u)}({downloadProcessInfo:e,addDangerSuffix:t})):l.logger.debug("Not downloading file to downloads because silent mode is on",u):l.logger.debug("Not downloading file to downloads because mode is not inline",u)},t.deleteStoredFileWithDelayIfNeeded=x,t.removeFileDownloadIfNeeded=async function({download:e,configuration:t,isTimeout:n}){if(!t)return void l.logger.error("removeFileDownloadIfNeeded: Not removing the file because configuration is not defined");const{detectionMode:i,isInline:r}=t,{generatedDownloadId:o,id:s}=e;if(i===a.FileDetectionMode.Silent)return void l.logger.debug("removeFileDownloadIfNeeded: Not removing the file because silent mode is on",o);if(r&&!n)return void l.logger.debug("removeFileDownloadIfNeeded: Not removing the file because it was already removed due to inline timeout",o);const c=r?o:s;c?(await w(c),function(e){l.logger.info("cleanup",e),x(`${e}`),g.cleanReleaseHandler(e)}(c)):l.logger.warn("removeFileDownloadIfNeeded: Not removing the file because the generatedDownloadId is not defined in inline mode")},t.publishMaliciousFileSafe=function(e,t){u.asyncTrySafe("Publishing malicious file",(async()=>{await S({downloadProcessInfo:e,remediationStatus:t})}))},t.isInlineTimeoutEnabled=({configuration:e,isTimeout:t})=>m.isDefined(e)&&e.inlineTimeoutMs>0&&e.isInline&&!t,t.getDownloadItemFileSize=async function(e,t){var n;if(-1!==e||a.browserName===a.BrowserName.Safari)return e;const i=null===(n=await r.default.downloads.search({id:t}))||void 0===n?void 0:n[0];return i?-1!==i.fileSize?i.fileSize:i.totalBytes:(l.logger.warn("getDownloadItemFileSize: No download was found with the following id",t),-1)},t.isDownloadByABSExtension=function(e){return e.url.startsWith(s.extensionBlobUrlPrefix)},t.getOriginDownloadProcessId=function(e){var t,n;return null!==(n=null===(t=/#originDownloadProcessInfoId=(.+)/.exec(e))||void 0===t?void 0:t[1])&&void 0!==n?n:""}},2424:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchBlob=t.tryFetch=void 0;const a=n(1276),r=i(n(2328)),o=n(5029),s=n(5697),c=new Map;function l(e,t){const n=c.get(`${e}:${t}`);if(n)return n;const i={url:t,downloadedBytes:0,bytesLeftToCallback:500};return u(e,t,i),i}function u(e,t,n){c.set(`${e}:${t}`,n)}async function d({url:e,response:t},n,i,a){if(t)return t;const{body:r,status:c,headers:l}=await fetch(e,Object.assign(Object.assign({},i),{signal:a}));if(!r)throw new Error(`No response body ${e}`);if(c>=400)throw new Error(`Bad response, status code ${c}`);const u=await async function(e,t,n){var i;const a={};try{const n=t.get("content-length"),r=n?Number.parseInt(n,10):void 0;a.contentLength=Number.isNaN(r)?void 0:r;const c=t.get("content-type")||void 0;a.contentType=c,a.filename=o.getFilename({url:e,contentDispositionHeader:t.get("content-disposition")});const l=o.parseMimeType({contentTypeHeader:c}),{mimeType:u}=await s.getFileTypesInfo(null!==(i=a.filename)&&void 0!==i?i:"",l);a.mimeType=u}catch(t){n.warn("Errors while parsing download response headers",{url:e,result:a},t)}return a}(e,l,n);return{stream:r,headers:l,parsedHeaders:u}}function p({downloadedBytes:e}){return e<1024?512:e<1048576?5120:e<10485760?51200:512e3}t.tryFetch=async function e(t,n,{requestInit:i,retryOptions:o,triedDownloadMechanism:s},p,f){var g,h,m;const v=l(t,n),y=new AbortController;let b=!1;try{v.response=await d(v,p,i,y.signal);const[e,t]=v.response.stream.tee();v.response.stream=t;const n=e.getReader(),a=await n.read();p.debug("tryFetch: oneChunk",a.done,null===(g=a.value)||void 0===g?void 0:g.length),v.fetchable=!a.done&&(null===(h=a.value)||void 0===h?void 0:h.length)>0}catch(l){if(o&&o.retries>0)return p.warn("tryFetch: error, retrying",l),b=!0,v&&(v.response&&y.abort(),function(e,t){c.delete(`${e}:${t}`)}(t,n)),o.delayMs>0&&await r.default(o.delayMs),function(e,t){const{retryOptions:n,triedDownloadMechanism:i}=e;n&&t({category:a.TelemetryCategory.Management,type:a.TelemetryType.RetryTryFetch,metadata:{retriesLeft:n.retries,retryDelayMs:n.delayMs,triedDownloadMechanism:i},timestamp:new Date})}({retryOptions:o,triedDownloadMechanism:s},f),await e(t,n,{requestInit:i,retryOptions:Object.assign(Object.assign({},o),{retries:o.retries-1})},p,f);v.fetchable=!1,p.error("tryFetch: error",l)}finally{b||u(t,n,v)}return{fetchable:v.fetchable,parsedHeaders:null===(m=null==v?void 0:v.response)||void 0===m?void 0:m.parsedHeaders}},t.fetchBlob=async function(e,t,{progressCallback:n,requestInit:i,returnEveryChunk:a},r){const o=l(e,t);try{o.response=await d(o,r,i);const{stream:s,parsedHeaders:{contentLength:c,mimeType:l,contentType:u}}=o.response,f=s.getReader(),g=[];for(;!o.done;){const{done:i,value:s}=await f.read();if(i||!s){o.done=!0;break}if(g.push(s),o.downloadedBytes+=s.length,o.bytesLeftToCallback-=s.length,n&&o.bytesLeftToCallback<=0){o.bytesLeftToCallback=p(o);try{n(e,o.downloadedBytes,c)}catch(n){r.error("fetchBlobString: progressCallback error",n,t,e)}}if(a)break}return!a&&c&&o.done&&c!==o.downloadedBytes&&r.error("fetchBlobString: download finished but not all bytes were downloaded.",o.downloadedBytes,c,t,e),f.releaseLock(),{blob:new Blob(g,{type:l||u}),moreChunksAvailable:!o.done}}finally{u(e,t,o)}}},516:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateDownloadsBadge=void 0;const i=n(8459),a=n(7445),r=n(1071),o=n(8459);async function s(){const{enableDownloadsBadgeIndicator:e}=await i.getConfiguration();if(!e)return;const t=await r.getDownloadsInProgressCount();a.setBadgeText(t>0?t.toString():"")}r.onStoreChange((()=>{s()})),t.updateDownloadsBadge=s,o.registerGetConfigurationCallback((({enableDownloadsBadgeIndicator:e})=>{e||a.setBadgeText("")}))},5947:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.process=void 0,a(n(1877),t);var r=n(9271);Object.defineProperty(t,"process",{enumerable:!0,get:function(){return r.process}})},1877:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const r=n(9271);a(n(1665),t),t.init=function(){r.getDownloadProcessManager()}},1184:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDownloadProcessTimeout=t.isInlineByPolicy=void 0;const i=n(1276),a=n(8459),r=n(1326),o=n(1043),s=n(4494),c=n(6846),l=n(4882),u=new Set([i.BrowserName.Safari]);async function d(e,t){const{dlpRules:n}=await a.getConfiguration(),i=c.getMatchedWebsiteRule([e],t?Object.keys(t):[],n,c.WebsiteRuleType.FileAccessModeOverride,r.logger);if(!i)return void r.logger.debug("getDomainFileAccessModeOverride: no dlp rule was found",{domain:e});const o=i.fileAccessModeOverride;return r.logger.debug("getDomainFileAccessModeOverride: get file access mode override from dlp rule",{domain:e,fileAccessModeOverride:o}),o}t.isInlineByPolicy=async function(e){if(!await async function(){const{enableInlineFileScanInFirefox:e}=await a.getConfiguration();return!(u.has(i.browserName)||i.browserName===i.BrowserName.Firefox&&!e)}())return r.logger.debug("isInlineByPolicy: not supported"),!1;const t=o.getDownloadOriginDomain(e),{preventAccessUntilFileScanned:n}=await a.getConfiguration(),c=await l.getCategories({domain:t}),p=n?s.InlineMode.Inline:s.InlineMode.NoInline,f=await async function(e,t,n){switch(await d(t,n)){case i.FileAccessModeOverride.AllowFileAccess:return!1;case i.FileAccessModeOverride.PreventFileAccess:case i.FileAccessModeOverride.PreventFileAccessWithTimeout:return!0;case i.FileAccessModeOverride.NoOverride:default:return e===s.InlineMode.Inline}}(p,t,c);return r.logger.debug("isInlineByPolicy: considering file access override",{domain:t,isDomainInlineByOverride:f}),f},t.getDownloadProcessTimeout=async function(e){const t=a.getDefaultConfiguration().fileScansTimeoutMs,{fileScansTimeoutMs:n}=await a.getConfiguration(),r=o.getDownloadOriginDomain(e),s=await l.getCategories({domain:r});switch(await d(r,s)){case i.FileAccessModeOverride.PreventFileAccess:return-1;case i.FileAccessModeOverride.PreventFileAccessWithTimeout:return t;case i.FileAccessModeOverride.NoOverride:default:return n}}},3213:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.progressScanStatus=t.getDownloadProcessNextAction=t.isScanDone=void 0;const i=n(1276),a=n(1071),r=n(1326),o=n(4494),s=n(8807),c=n(1109),l={[i.ScanStatus.Initiating]:[i.ScanStatus.Pending,i.ScanStatus.InProgress,i.ScanStatus.PendingPassword,i.ScanStatus.ScanError,i.ScanStatus.Completed,i.ScanStatus.Failed],[i.ScanStatus.Pending]:[i.ScanStatus.InProgress,i.ScanStatus.PendingPassword,i.ScanStatus.Completed,i.ScanStatus.ScanError,i.ScanStatus.Failed],[i.ScanStatus.InProgress]:[i.ScanStatus.PendingPassword,i.ScanStatus.Completed,i.ScanStatus.ScanError,i.ScanStatus.Failed],[i.ScanStatus.PendingPassword]:[i.ScanStatus.Pending,i.ScanStatus.Completed,i.ScanStatus.ScanError,i.ScanStatus.Failed,i.ScanStatus.Finished],[i.ScanStatus.Completed]:[i.ScanStatus.Finished],[i.ScanStatus.ScanError]:[i.ScanStatus.Finished],[i.ScanStatus.Failed]:[i.ScanStatus.Finished],[i.ScanStatus.Finished]:[]};function u(e){return[i.ScanStatus.ScanError,i.ScanStatus.Completed].includes(e)}function d(e){return e===i.ScanStatus.Failed?o.DownloadProcessAction.Fail:u(e)?o.DownloadProcessAction.Complete:void 0}t.isScanDone=u,t.getDownloadProcessNextAction=d,t.progressScanStatus=async function(e,t){var n;const i=await a.get(e);if(!i)return r.logger.warn("progressScanStatus: downloadProcessInfo not found",e),!1;const o=null!==(n=i.scan)&&void 0!==n?n:{};if(o.status){if(o.status===t)return r.logger.debug("progressScanStatus: scan status already updated",o.id,t),!1;if(!l[o.status].includes(t))return r.logger.debug(`progressScanStatus: unable to progress from ${o.status} to ${t}`,e,o.id),!1}r.logger.debug("progressScanStatus: updating scan status",e,t),await a.update(e,{scan:Object.assign(Object.assign({},o),{status:t})});const u=d(t);if(s.callNextCallback&&u)try{s.callNextCallback(e,u)}catch(e){if(!(e instanceof c.NextCalledError))throw e}return!0}},9271:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.process=t.getDownloadProcessManager=void 0;const i=n(1326),a=n(3496),r=n(64);let o;function s(){return o||(o=new a.DownloadProcessManager(r.transitions),o)}t.getDownloadProcessManager=s,t.process=function(e,t){try{s().process(e,t)}catch(n){i.logger.error("Failed to process download",{error:n,downloadItem:e,releaseHandler:t})}}},1084:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.acquireTextContent=t.cleanTextContentCache=t.startAcquiringTextContent=void 0;const a=i(n(398)),r=n(8459),o=n(5217),s=n(1326),c=n(9103),l=n(1276),u=n(1025),d=new Map;function p(e){d.delete(e)}async function f(){const{uploadCompleteTextContentEnabled:e,uploadCompleteTextContentLimit:t,safeGetTextContentFromFrameTimeoutMs:n}=await r.getConfiguration();if(!e)return;const i=await async function(e){try{const t=c.getTabsManager(),n=await t.getActiveId();if("number"!=typeof n)return"";const i=await a.default.webNavigation.getAllFrames({tabId:n});if(!i)return s.logger.error("safeGetTextContent: failed to get frames",n),"";const r=i.filter((e=>0===e.parentFrameId||0===e.frameId)).filter((e=>!e.url.startsWith(u.extensionBaseUrl))),o=await Promise.all(r.map((t=>async function(e,t,n){const i={kind:l.MessageKind.GetTextContent};s.logger.info("safeGetTextContentFromFrame: processing frame",e,t);try{let r;const{textContent:o}=await Promise.race([new Promise(((e,t)=>{r=setTimeout((()=>{t(new Error("safeGetTextContentFromFrame: timeout"))}),n)})),a.default.tabs.sendMessage(e,i,{frameId:t})]);return void 0!==r&&clearTimeout(r),s.logger.info("safeGetTextContentFromFrame: got text content",e,t),o}catch(n){s.logger.error("safeGetTextContentFromFrame: failed to get text content",e,t,n)}}(n,t.frameId,e))));return o.filter(Boolean).join(" ")}catch(e){return s.logger.error("safeGetTextContent: failed to get text content",e),""}}(n);return o.summarizeTextContent(i).slice(0,t)}t.startAcquiringTextContent=function(e){d.set(e,{textContentPromise:f()})},t.cleanTextContentCache=p,t.acquireTextContent=async function(e){const t=d.get(e);if(!t)return void s.logger.warn("resolveTextContentPromise: Could not find a text content item for download",e);const n=t.textContentPromise;return p(e),await n}},4494:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadProcessAction=t.InlineMode=void 0,(i=t.InlineMode||(t.InlineMode={})).Inline="inline",i.NoInline="no-inline",i.Whitelist="whitelist",i.Blacklist="blacklist",(n=t.DownloadProcessAction||(t.DownloadProcessAction={})).Continue="continue",n.Complete="complete",n.Fail="fail"},4458:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.processEventMessageHandler=t.sendLoginEvent=t.processEvent=void 0;var r=n(2214);Object.defineProperty(t,"processEvent",{enumerable:!0,get:function(){return r.processEvent}}),Object.defineProperty(t,"sendLoginEvent",{enumerable:!0,get:function(){return r.sendLoginEvent}}),Object.defineProperty(t,"processEventMessageHandler",{enumerable:!0,get:function(){return r.processEventMessageHandler}});var o=n(8882);Object.defineProperty(t,"init",{enumerable:!0,get:function(){return o.init}}),a(n(4293),t)},8882:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const i=n(8459),a=n(2214);t.init=async function(){const{enableBulkEvents:e}=await i.getConfiguration();e&&await a.getEventsBulkDispatcher()}},4293:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendMaliciousFileDetectionEvent=t.sendThirdPartyExtensionDownload=t.sendUnsuccessfulScanEvent=t.sendUnscannedFilesEvent=void 0;const i=n(1276),a=n(2214),r=n(9249),o=n(1326),s=n(611),c=n(9103);var l;!function(e){e[e.FileNotScanned=0]="FileNotScanned",e[e.FileScanFailed=1]="FileScanFailed"}(l||(l={}));const u={[l.FileNotScanned]:"File not scanned",[l.FileScanFailed]:"File scan failed"},d=e=>{const{errorReason:t,isBlocked:n,fileName:a}=e;switch(t){case i.ErrorReason.TooLarge:return`${n?"The file is too large to scan - therefore the file was not downloaded.":"The file was downloaded, but it was not scanned because it is too large."} File name: "${a}"`;case i.ErrorReason.PasswordProtected:return`${n?"The file is password-protected and could not be scanned. The file was not downloaded.":"The file was downloaded, but it was not scanned because it is password-protected."} File name: "${a}"`}};t.sendUnscannedFilesEvent=e=>{const t={category:i.EventCategory.Prevention,timestamp:new Date,activity:u[l.FileNotScanned],type:i.EventType.UnscannedFile};a.processEvent(Object.assign(Object.assign({},t),{metadata:e,details:d(e),destination:[i.EventDestination.ABS],type:i.EventType.UnscannedFile}))},t.sendUnsuccessfulScanEvent=e=>{const t={category:i.EventCategory.Prevention,timestamp:new Date,activity:u[l.FileScanFailed],type:i.EventType.UnsuccessfulScan};a.processEvent(Object.assign(Object.assign({},t),{metadata:e,details:`The file was downloaded, but the scan was not completed successfully. File name: "${e.fileName}"`,destination:[i.EventDestination.ABS],type:i.EventType.UnsuccessfulScan}))},t.sendThirdPartyExtensionDownload=async({thirdPartyExtension:e,fileName:t,finalUrl:n,fileSize:r})=>{const{name:o,id:s}=e,c={category:i.EventCategory.Prevention,timestamp:new Date,activity:u[l.FileNotScanned],type:i.EventType.ThirdPartyExtensionDownload},d={sourceUrl:n,fileName:t,fileSize:r,reason:"The file was downloaded by a third-party extension",isBlocked:!1,extensionId:s,extensionName:o};return a.processEvent(Object.assign(Object.assign({},c),{metadata:d,details:`A user downloaded a file. The file was not scanned. Reason: The file was downloaded by a third-party extension. File name: ${t}. Extension name: ${o} Extension ID: ${s}`,destination:[i.EventDestination.ABS],type:i.EventType.ThirdPartyExtensionDownload}))},t.sendMaliciousFileDetectionEvent=async function(e,t){var n;const{download:{id:l,urls:{url:u},filename:d,fileSize:p,fileExtension:f},scan:g,decryptionInfo:h,configuration:m}=e,v=r.getDomainFromUrl(u),y=(null==m?void 0:m.isInline)?void 0:t,b=function(e,t){const{download:n,configuration:a,isTimeout:r}=e,{id:s}=n;if(!a)return void o.logger.warn("getMaliciousFileDetectionEventTexts: Couldn't find download process info configuration",{downloadId:s});const{isInline:c,detectionMode:l}=a;switch(l){case i.FileDetectionMode.Block:return function(e,t,n){if(n===i.DownloadRemediation.Failed)return{activity:"Remediation failed",details:"The malicious downloaded file was not successfully remediated. The file may still be on the end user’s computer."};const a=n===i.DownloadRemediation.Deleted?"remediated":"prevented";return e&&!t?{activity:"Malicious file download prevented",details:"Malicious file download was prevented - based on policy settings."}:{activity:`Malicious file download ${a}`,details:`Malicious file download was ${a} - based on policy settings.`}}(c,r,t);case i.FileDetectionMode.Warn:return{activity:"User warned on malicious file download",details:"User was warned about a malicious file download - based on policy settings."};default:return{activity:"Malicious file downloaded",details:"Malicious file was downloaded by the user. The user was not warned  - based on policy settings [Silent mode]."}}}(e,y);if(!b)return void o.logger.warn("sendMaliciousFileDetectionEvent: Couldn't get malicious file event texts - not sending the event",{downloadId:l});const w=c.getTabsManager(),S=e.tabId||await w.getActiveId(),x=S?await w.get(S):await w.getActive();a.processEvent({category:i.EventCategory.Detection,type:i.EventType.MaliciousFile,timestamp:new Date,metadata:{downloadId:`${l}`,scanId:null==g?void 0:g.id,verdict:i.Verdict.Malware,url:u,domain:v,encrypted:null==h?void 0:h.isEncrypted,fileSize:p,fileExtension:f,remediationStatus:y},activity:b.activity,details:`${b.details} URL: ${u}, File: ${d}`,destination:[i.EventDestination.ABS],sessionId:null!==(n=null==x?void 0:x.sessionId)&&void 0!==n?n:s.v4(),eventId:s.v4()})}},2214:function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.processEventMessageHandler=t.processEvent=t.sendLoginEvent=t.getEventsBulkDispatcher=void 0;const a=n(611),r=n(8459),o=n(3017),s=n(7295),c=n(8824),l=n(1326),u=n(8459),d=n(3456),p=n(9103),f=n(5998),g=n(4632),h=n(850),m=n(4982);let v;async function y(){if(v)return v;const{eventsDispatchScheduleMS:e,eventsDispatchCount:t,eventsDispatchMaxBytes:n,eventsDispatchRetryMS:i}=await r.getConfiguration();return v=new d.ScheduledBulkDispatcher({name:"events",dispatchRetryMS:i,dispatchScheduleMS:e,maxDispatchItems:t,maxDispatchSize:n},(async e=>{await o.hmcFetchPost("extensions/events",{events:e})})),v}t.getEventsBulkDispatcher=y,u.registerGetConfigurationCallback((e=>{if(v){const{eventsDispatchScheduleMS:t,eventsDispatchCount:n,eventsDispatchMaxBytes:i,eventsDispatchRetryMS:a}=e;v.updateConfig({dispatchScheduleMS:t,maxDispatchItems:n,dispatchRetryMS:a,maxDispatchSize:i})}}));const b=[m.EventDestination.ABS,m.EventDestination.XDR,m.EventDestination.IR];function w(e){return Object.assign(Object.assign({},c.filterObjectFields(e,["activity","details","metadata","uniqueId"])),e.metadata)}t.sendLoginEvent=async function(e){const{loginVisibilityEnabled:t}=await r.getConfiguration();if(t)try{await o.hmcFetchPost("login-event",e,{revProxy:!0})}catch(e){l.logger.error("Failed to send login event",{error:e})}},t.processEvent=async e=>{var t;try{const{enableEvents:n,enableXDREvents:u,enableIREvents:d,enableBulkEvents:p,eventTypesToExcludeFromExtensionActivity:v,eventTypesToExcludeFromXDR:S,eventTypesToExcludeFromIR:x,eventsDispatchMaxBytes:C}=await r.getConfiguration();if(!n&&!u)return;const{reportEvent:T}=e,E=i(e,["reportEvent"]);if(h.isDefined(T)&&!1===T)return void l.logger.debug("processEvent: Not reporting the event due to the configuration",E);const I=await s.getSource();!function(e){const t=e.metadata;if(void 0===t)return;const n=Object.entries(t);e.metadata=n.reduce(((e,[t,n])=>{return Object.assign(Object.assign({},e),{[t]:"string"==typeof n?(i=n,i.length>1024?i.slice(0,1024):i):n});var i}),t)}(E);const _=Object.assign(Object.assign({source:I,uniqueId:a.v4()},E),{destination:null!==(t=e.destination)&&void 0!==t?t:b});if(n&&!v.includes(_.type)&&_.destination.includes(m.EventDestination.ABS)){const e=function(e){return c.filterObjectFields(e,["sessionId","eventId"])}(_);if(p){const t=g.dispatchSize([e]);if(!t||t>C){const e=`Event item is too large to be sent in bulk, type: ${_.type} size: ${null!=t?t:"unknown"}`;return l.logger.warn(e,{event:_}),void f.processAlarmTelemetry({message:e})}const n=await y();await n.add(e)}else await o.hmcFetchPost("extensions/events",e)}u&&!S.includes(_.type)&&_.destination.includes(m.EventDestination.XDR)&&await o.hmcFetchPost("event",w(_),{revProxy:!0,headers:{"X-EventDest":m.EventDestination.XDR}}),d&&!x.includes(_.type)&&_.destination.includes(m.EventDestination.IR)&&await o.hmcFetchPost("event",w(_),{revProxy:!0,headers:{"X-EventDest":m.EventDestination.IR}})}catch(t){const{metadata:n}=e,a=i(e,["metadata"]);l.logger.error("Failed to send extension event",{error:t,data:a})}},t.processEventMessageHandler=async e=>{const n=p.getTabsManager(),i=await n.getActive(),a=(null==i?void 0:i.sessionId)?Object.assign({sessionId:i.sessionId},e):e;t.processEvent(a)}},7445:function(e,t,n){"use strict";var i,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setBadgeText=t.setPreSignInIcon=t.setDefaultIcon=void 0;const r=a(n(398)),o=n(1326),s=new Map(["../assets/icon","../assets/pre-signin-icon"].map((e=>[e+"16.png",[16,19,32,38].reduce(((t,n)=>(t[n]=`${e}${n}.png`,t)),{})]))),c=null!==(i=r.default.action)&&void 0!==i?i:r.default.browserAction;async function l(e){var t;o.logger.debug("setCurrentIcon: Setting current icon to",e),await r.default.storage.local.set({currentIconAsset:e}),o.logger.debug("setCurrentIcon: Changing browser icon to",e),c.setIcon({path:null!==(t=s.get(e))&&void 0!==t?t:e}).catch((e=>{o.logger.error("setCurrentIcon: Error setting icon",e)})).then((()=>{o.logger.debug("setCurrentIcon: Icon changed to",e)}))}t.setDefaultIcon=async function(){await l("../assets/icon16.png")},t.setPreSignInIcon=async function(){await l("../assets/pre-signin-icon16.png")},t.setBadgeText=function(e){c.setBadgeText({text:e}).catch((e=>{o.logger.error("setBadgeText: Error setting badge text",e)})).then((()=>{o.logger.debug(`setBadgeText: Badge text changed to ${e}`)}))}},1774:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateEndpointUserRemoteDeploymentInformation=t.automaticSignIn=t.getRemoteDeploymentUserInformation=void 0;const a=n(1276),r=i(n(2328)),o=i(n(165)),s=i(n(398)),c=n(3566),l=n(8866),u=n(1326),d=n(8855),p=n(3751),f=n(8657),g=n(1005),h=n(9370),m=n(8354),v=n(5310);async function y(){if(!s.default.identity)return;const e=s.default.identity;return e.getProfileUserInfo&&(await e.getProfileUserInfo({accountStatus:chrome.identity.AccountStatus.ANY})).email||void 0}const b=globalThis.chrome&&globalThis.chrome.enterprise;async function w(){if(!b)return u.logger.info("getHostname: browser.enterprise is not defined"),"";u.logger.info("getHostname: getting device hostname");try{return await new Promise(((e,t)=>{b.deviceAttributes.getDeviceHostname((n=>{chrome.runtime.lastError?t(chrome.runtime.lastError):e(n)}))}))}catch(e){return u.logger.info("getHostname: Could not find device hostname",e),""}}const S=100;const x=6,C=36;async function T(){var e,t,n,i;u.logger.info("getRemoteDeploymentUserInformation: called");const a=await y(),r=a&&a.length<p.maxStringLength&&!await f.isSignedOut()&&await p.endpointUserCheckEmail(a)&&a,o=await async function(){var e;u.logger.info("getEndpointGeneratedId: get managed-storage endpoint generated id");const{EndpointGeneratedId:t}=await g.safeStorageManagedGet(["EndpointGeneratedId"]);if(t)return`registry:${t}`;const n=await w();if(n)return`hostname:${n}`;u.logger.info("getEndpointGeneratedId: checking if chrome.instanceID is defined");const i=s.default;if(null===(e=i.instanceID)||void 0===e?void 0:e.getID){u.logger.info("getEndpointGeneratedId: trying to get instance id");try{const e=await new Promise(((e,t)=>{var n,a;null===(a=null===(n=i.instanceID)||void 0===n?void 0:n.getID)||void 0===a||a.call(n,(n=>{s.default.runtime.lastError?t(s.default.runtime.lastError):e(n)}))}));if(e)return`instanceId:${e}`}catch(e){u.logger.info("Could not find instance id",e)}}return u.logger.info("getEndpointGeneratedId: using installation id"),`installationId:${await l.getInstallationId()}`}();u.logger.debug("getRemoteDeploymentUserInformation: endpoint generated id",o);const c=await async function(){u.logger.info("getRemoteDeploymentDomain: get managed-storage remote deployment domain");const{Userdomain:e}=await g.safeStorageManagedGet(["Userdomain"]);return e&&"WORKGROUP"!==e.toUpperCase()?(u.logger.info("getRemoteDeploymentDomain: found remote deployment domain in registry"),e):(u.logger.info("getRemoteDeploymentDomain: trying to get domain from hostname"),await w())}(),d=await async function(){return await h.getUsernameFromManagedStorage()||await async function(){const e=Boolean(s.default.downloads);if(u.logger.info("getUsernameFromDownloads: called",e),!e)return"";const t=(await s.default.downloads.search({limit:S,orderBy:["-startTime"]})).map((e=>e.filename));u.logger.info(`getUsernameFromDownloads: found ${t.length} downloads`);const n=new Map;for(const e of t){const t=/^\/(?:Users|home)\/([^/]+)\//.exec(e)||/^.:\\Users\\([^\\]+)\\/.exec(e);if(t){const[,e]=t;n.set(e,(n.get(e)||0)+1)}}u.logger.info(`getUsernameFromDownloads: found ${n.size} potential usernames`);const[i]=[...n.entries()].sort((([e],[t])=>e<t?-1:1)).reduce((([e,t],[n,i])=>i>t?[n,i]:[e,t]),["",0]);return u.logger.debug(`getUsernameFromDownloads: bestUsername: ${i}`),i}()}();if(!d)return Object.assign({endpointGeneratedId:o,remoteDeploymentDomain:c.slice(0,p.maxStringLength)},r&&{remoteDeploymentEmail:r});if(!c){const a=(new TextEncoder).encode(o);let s;try{s=new Uint8Array(await crypto.subtle.digest("SHA-256",a))}catch(e){u.logger.error("getRemoteDeploymentUserInformation: could not hash endpointGeneratedId",e),s=a.slice(-4)}const c=`000000${((null!==(e=s[0])&&void 0!==e?e:0)+256*(null!==(t=s[1])&&void 0!==t?t:0)+65536*(null!==(n=s[2])&&void 0!==n?n:0)+16777216*(null!==(i=s[3])&&void 0!==i?i:0)).toString(C)}`.slice(-x);return Object.assign(Object.assign({endpointGeneratedId:o},r&&{remoteDeploymentEmail:r}),{remoteDeploymentUsername:`${d.slice(0,p.maxStringLength-c.length-1)}:${c}`})}return Object.assign(Object.assign({endpointGeneratedId:o,remoteDeploymentDomain:c.slice(0,p.maxStringLength)},r&&{remoteDeploymentEmail:r}),{remoteDeploymentUsername:d.slice(0,p.maxStringLength)})}async function E(e,t,n){u.logger.info("authenticateUser: password fetched, logging in to cognito",Boolean(e),Boolean(t));const i=await d.createCognitoUser(e,n);i.setAuthenticationFlowType("USER_SRP_AUTH");const r=new a.AuthenticationDetails({Username:e,Password:t}),o=await new Promise(((e,t)=>{i.authenticateUser(r,{onSuccess:t=>{e(t)},onFailure:e=>{t(e)}})}));u.logger.info("authenticateUser: got session, saving tokens");const c=o.getIdToken();await s.default.storage.local.set(Object.assign({jwtToken:c.getJwtToken(),jwtTokenExpiration:c.getExpiration(),lastUser:e,refreshToken:o.getRefreshToken().getToken()},n)),u.logger.info("authenticateUser: saved tokens"),await f.onAuthTokensSave()}t.getRemoteDeploymentUserInformation=T;const I=Date.now(),_=o.default(1);async function A(){u.logger.info("updateEndpointUserRemoteDeploymentInformation: called");const e=await T();await p.updateEndpointUser(e);const{remoteDeploymentDomain:t,remoteDeploymentEmail:n,remoteDeploymentUsername:i}=e;await s.default.storage.local.set(Object.assign(Object.assign(Object.assign({},void 0!==t&&{remoteDeploymentDomain:t}),void 0!==n&&{remoteDeploymentEmail:n}),void 0!==i&&{remoteDeploymentUsername:i}))}t.automaticSignIn=()=>_((async()=>{try{if(u.logger.info("automaticSignIn: called"),!await f.isSignedOut())return u.logger.info("automaticSignIn: already signed in"),!0;const e=5e3-(Date.now()-I);e>0&&await r.default(e);const t=await async function(){const{RemoteDeploymentToken:e}=await g.safeStorageManagedGet(["RemoteDeploymentToken"]);if(e)return u.logger.info("findRemoteDeploymentToken: found token in managed settings"),e;if(a.browserName!==a.BrowserName.Safari){const e=await m.getCookieValueFromHub({name:"remoteDeploymentToken",path:"/remote-deployment-token-install"});if(e)return u.logger.info("findRemoteDeploymentToken: found token in cookie"),e}u.logger.info("findRemoteDeploymentToken: did not find remote deployment token")}();if(!t)return!1;u.logger.info("automaticSignIn: found a remote deployment token");const n=await y();if(n){if(u.logger.info("automaticSignIn: found profile email"),await async function(e,t){u.logger.info("createRemoteDeploymentEmailUserCheck: checking if email is owned by tenant");const n=await v.hubFetch("/create-remote-deployment-email-user/check",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({email:e})});if(!c.isStatusOk(n.status))throw u.logger.warn("createRemoteDeploymentEmailUserCheck: fetch failed",n.status),new Error("createRemoteDeploymentEmailUserCheck: bad response");const i=await n.json();return u.logger.info("createRemoteDeploymentEmailUserCheck: response",i),i.ok}(n,t))return u.logger.info("automaticSignIn: can sign in with token and email"),await async function(e,t){u.logger.info("createRemoteDeploymentEmailUser: called");const{remoteDeploymentDomain:n,remoteDeploymentUsername:i}=await T();u.logger.debug("createRemoteDeploymentEmailUser: user information",{remoteDeploymentDomain:n,remoteDeploymentUsername:i}),u.logger.info("createRemoteDeploymentEmailUser: getting password for email user");const a=await v.hubFetch("/create-remote-deployment-email-user",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({email:e,remoteDeploymentDomain:n,remoteDeploymentUsername:i})});if(!c.isStatusOk(a.status))throw u.logger.warn("createRemoteDeploymentEmailUser: fetch failed",a.status),new Error("createRemoteDeploymentEmailUser: bad response");const{password:r,userPoolClientId:o,userPoolId:l}=await a.json();await s.default.storage.local.set(Object.assign(Object.assign({},void 0!==n&&{remoteDeploymentDomain:n}),void 0!==i&&{remoteDeploymentUsername:i}));const d=void 0!==o&&void 0!==l?{userPoolClientId:o,userPoolId:l}:void 0;await E(e,r,d)}(n,t),!0;u.logger.info("automaticSignIn: cannot sign in with token and email")}else u.logger.info("automaticSignIn: did not find profile email");return u.logger.info("automaticSignIn: creating anonymous user"),await async function(e){u.logger.info("createRemoteDeploymentAnonymousUser: called");const{endpointGeneratedId:t,remoteDeploymentDomain:n,remoteDeploymentUsername:i}=await T();u.logger.debug("createRemoteDeploymentAnonymousUser: user information",{remoteDeploymentDomain:n,remoteDeploymentUsername:i}),u.logger.info("createRemoteDeploymentAnonymousUser: getting email and password for anonymous user");const a=await v.hubFetch("/create-remote-deployment-anonymous-user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({endpointGeneratedId:t,remoteDeploymentDomain:n,remoteDeploymentUsername:i})});if(!c.isStatusOk(a.status))throw u.logger.warn("createRemoteDeploymentAnonymousUser: fetch failed",a.status),new Error("createRemoteDeploymentAnonymousUser: bad response");const{email:r,password:o,userPoolClientId:l,userPoolId:d}=await a.json(),p=void 0!==l&&void 0!==d?{userPoolClientId:l,userPoolId:d}:void 0;await E(r,o,p),await s.default.storage.local.set(Object.assign(Object.assign({},void 0!==n&&{remoteDeploymentDomain:n}),void 0!==i&&{remoteDeploymentUsername:i}))}(t),!0}catch(e){throw u.logger.error("automaticSignIn: failed",e),e}})),t.updateEndpointUserRemoteDeploymentInformation=A,s.default.downloads&&s.default.downloads.onChanged.addListener((e=>{!async function(e){var t;if(u.logger.debug("onDownloadChanged",e),"complete"===(null===(t=e.state)||void 0===t?void 0:t.current)){u.logger.info("onDownloadChanged: updating endpoint user information",e.id);try{await A()}catch(t){u.logger.warn("onDownloadChanged: failed to update endpoint user information",e.id,t)}}}(e)}))},1748:function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fileSignaturePreScan=t.getFileScanStatus=t.scanEnrichment=t.getDynamicEvidence=t.urlScan=t.urlLookup=t.urlPreScan=t.CacheMode=void 0;const r=n(1276),o=n(3017),s=n(3566),c=n(1326),l=n(8459),u=n(1025),d=n(5294),p=n(1311),f=n(9032),g=n(3632),h=n(850),m=a(n(2543));var v;!function(e){e.ignoreCache="ignoreCache",e.onlyCache="onlyCache",e.useCache="useCache"}(v=t.CacheMode||(t.CacheMode={}));const y={verdict:r.Verdict.Unknown,verdictOrigin:r.VerdictOrigin.Configuration};async function b(e,t,n){if(e.startsWith("data:"))return y;if(e.startsWith(u.extensionBlobUrlPrefix))return{verdict:r.Verdict.Clean,verdictOrigin:r.VerdictOrigin.Configuration};const{enablePreScanApi:i}=await l.getConfiguration();if(!i)return c.logger.debug("URL pre-scan API is disabled, returning Unknown"),y;if(!await p.isPrescanUrlSupported(e))return c.logger.debug("URL pre-scan returned unknown for URL with unsupported protocol"),y;const a=n===v.ignoreCache?void 0:await t.get(e);return void 0!==a?(c.logger.debug("urlPreScan: cache hit",e,a),Object.assign(Object.assign({},a),{verdictOrigin:r.VerdictOrigin.Cache})):n===v.onlyCache?(c.logger.debug("urlPreScan: cache didn't hit",e,a),y):void 0}t.urlPreScan=async function(e,t=v.useCache){const{url:n}=e,i=await d.getUrlVerdictCache(),a=await b(n,i,t);if(a)return a;const{scanUrlMaxLength:u}=await l.getConfiguration(),p=await o.hmcFetchPost("browser/pre-scan",Object.assign(Object.assign({},e),{url:n.slice(0,u)}),{revProxy:!0});if(!s.isStatusOk(p.status))throw c.logger.error("Bad response from perception-point/browser/pre-scan",p),new Error("Bad response from perception-point/browser/pre-scan");const f=await p.json();return await i.set(n,f),Object.assign(Object.assign({},f),{verdictOrigin:r.VerdictOrigin.Network})},t.urlLookup=async function(e,t,n=v.useCache){const i=await d.getUrlVerdictCache(),a={lookupResults:(await Promise.all(e.entries.map((e=>b(e.url,i,n))))).filter((e=>h.isDefined(e)))};if(t(e,a))return a;const{scanUrlMaxLength:u}=await l.getConfiguration(),p=await o.hmcFetchPost("browser/lookup",Object.assign(Object.assign({},e),{entries:e.entries.map((e=>Object.assign(Object.assign({},e),{url:e.url.slice(0,u)})))}),{revProxy:!0});if(!s.isStatusOk(p.status))throw c.logger.error("Bad response from perception-point/browser/lookup",p),new Error("Bad response from perception-point/browser/lookup");const{lookupResults:f}=await p.json();return{lookupResults:f.map((e=>Object.assign(Object.assign({},e),{verdictOrigin:r.VerdictOrigin.Network})))}},t.urlScan=async function(e,t=v.useCache,n){if(e.startsWith(u.extensionBlobUrlPrefix))return{response:{verdict:r.Verdict.Clean,verdictOrigin:r.VerdictOrigin.Configuration}};const{enableMultipartBrowserScan:i}=await l.getConfiguration(),a=await g.getScanVerdictCache(),d=t===v.ignoreCache?void 0:await a.get(e);if(void 0!==d)return c.logger.debug("urlScan: cache hit",e,d),{response:Object.assign(Object.assign({},d),{verdictOrigin:r.VerdictOrigin.Cache})};if(t===v.onlyCache)return c.logger.debug("urlScan: cache didn't hit",e),{response:y};if(void 0===n)return c.logger.debug("urlScan: createScanRequestBody is not provided, won't send scan request."),{response:y};const p=await n(e),f=i?await o.hmcFormPost("browser/scan",{body:Object.assign({},p),base64FileFieldNames:["favicon","screenshot"],stringFileFieldNames:["htmlDom"]},{revProxy:!0}):await o.hmcFetchPost("browser/scan",p,{revProxy:!0});if(!s.isStatusOk(f.status))throw c.logger.error("Bad response from perception-point/browser/scan",f),new Error("Bad response from perception-point/browser/scan");const h=await f.json(),{verdict:b}=h;return await async function(e,t){const{fieldsRequiredForWebsiteVerdictCache:n,browserScanVerdictsToCache:i,dynamicEvidenceNamesToSkipScanCache:a}=await l.getConfiguration(),r=Object.keys(t),o=n.find((e=>!r.includes(e)));if(o)return c.logger.info("browser-scan: Result was not cached because a key was missing from the request",{url:t.url,missingKey:o}),!1;const s=m.default.intersection(a,t.dynamicHtml);return s.length>0?(c.logger.info("browser-scan: not cached, found dynamic evidence that skips cache",{url:t.url,evidence:s}),!1):i.includes(e.verdict)}(h,p)?(c.logger.debug("urlScan: cache set",{url:e,verdict:b}),await a.set(e,h)):(c.logger.debug("urlScan: cache remove",e),await a.remove(e)),{request:p,response:Object.assign(Object.assign({},h),{verdictOrigin:r.VerdictOrigin.Network})}},t.getDynamicEvidence=async function(){return await o.hmcEncryptedFetchGet("de",{revProxy:!0})},t.scanEnrichment=async function(e){const{enableMultipartScanEnrichment:t}=await l.getConfiguration();if(t)await o.hmcFormPost("scan/enrichment",{body:e,base64FileFieldNames:["screenshot"]},{revProxy:!0});else{const{screenshot:t}=e,n=i(e,["screenshot"]);await o.hmcFetchPost("scan/enrichment",Object.assign(Object.assign({},n),{base64Screenshot:t}),{revProxy:!0})}},t.getFileScanStatus=async function(e){c.logger.info("getFileScanStatus: Starting",e);const t=await o.hmcFetchPost("scan/status",e,{revProxy:!0}),n=await t.json();return c.logger.info("getFileScanStatus: Done",n),n},t.fileSignaturePreScan=async function(e,t=!1){const{fileSha256:n}=e,{enableFileSignaturePreScan:i}=await l.getConfiguration();if(!i)return c.logger.debug("File signature pre-scan API is disabled, returning Unknown"),y;const a=await f.getFileSignatureVerdictCache(),s=t?void 0:await a.get(n);if(void 0!==s)return c.logger.debug("fileSignaturePreScan: cache hit",s),Object.assign(Object.assign({},s),{verdictOrigin:r.VerdictOrigin.Cache});const u=await o.hmcFetchPost("browser/file-pre-scan",e,{revProxy:!0}),d=await u.json();return await a.set(n,d),Object.assign(Object.assign({},d),{verdictOrigin:r.VerdictOrigin.Network})}},8438:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCategories=void 0;const i=n(3017),a=n(3566),r=n(1326);t.getCategories=async function(e){const t=await i.hmcFetchPost("categories",e,{revProxy:!0,retryOptions:{dontRetryOnServerError:!0}});if(t.status!==a.HttpStatusCode.Accepted){if(!a.isStatusOk(t.status))throw r.logger.error("Bad response from perception-point/categories",t),new Error("Bad response from perception-point/categories");return await t.json()}r.logger.debug("perception-point/categories returned 'Accepted' response. No categories yet.",t)}},8855:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCognitoUser=t.getCognitoUserPoolData=t.getCognitoApiEndpoint=void 0;const i=n(1276),a=n(5310),r=n(1326),o=n(6353);function s(e){return a.hubUrl(`/cognito-idp/${e.split("_",1)[0]||"us-east-1"}/`)}async function c(){var e,t,n;const i=await o.cloudDiscover(),a=null!==(e=null==i?void 0:i.userPoolId)&&void 0!==e?e:"";return{ClientId:null!==(n=null===(t=null==i?void 0:i.jwtAudiences)||void 0===t?void 0:t.default)&&void 0!==n?n:"",UserPoolId:a,endpoint:s(a)}}t.getCognitoApiEndpoint=s,t.getCognitoUserPoolData=c,t.createCognitoUser=async function(e,t){const n=t?{ClientId:t.userPoolClientId,UserPoolId:t.userPoolId,endpoint:s(t.userPoolId)}:await c();r.logger.info("createCognitoUser: pool options",n);const a={Username:e,Pool:new i.CognitoUserPool(n)};return new i.CognitoUser(a)}},7615:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchHtml=void 0;const i=n(3566),a=n(1326),r=n(3017);t.fetchHtml=async function(e){const t="data/"+e,n=await r.hmcFetchGet(t);if(!i.isStatusOk(n.status))throw a.logger.error(`fetcHtml: Bad response from ${t}`,n),new Error(`Bad response from ${t}`);return await n.text()}},6353:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloudDiscover=void 0;const i=n(3566),a=n(5310),r=n(1326);let o;t.cloudDiscover=async()=>{if(o)return o;r.logger.info(`cloudDiscover: getting manifest description, hubUrl: ${a.hubUrl()}`);const e=await a.hubFetch("/discover");if(!i.isStatusOk(e.status))throw r.logger.warn("cloudDiscover: fetch failed",e.status),new Error("Cloud discover failed");return o=await e.json(),r.logger.info(`cloudDiscover: data ${JSON.stringify(o)}`),o}},3751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.endpointUserCheckEmail=t.updateEndpointUser=t.maxStringLength=void 0;const i=n(3566),a=n(1326),r=n(3017);t.maxStringLength=200,t.updateEndpointUser=async function({remoteDeploymentDomain:e,remoteDeploymentEmail:n,remoteDeploymentUsername:i}){await r.hmcFetchPatch("endpoint-user",Object.assign(Object.assign(Object.assign({},"string"==typeof e&&{remoteDeploymentDomain:e.slice(0,t.maxStringLength)}),"string"==typeof n&&{remoteDeploymentEmail:n.slice(0,t.maxStringLength)}),"string"==typeof i&&{remoteDeploymentUsername:i.slice(0,t.maxStringLength)}))},t.endpointUserCheckEmail=async function(e){const t=await r.hmcFetchPost("endpoint-user/check-email",{email:e});if(!i.isStatusOk(t.status))throw a.logger.error("checkEndpointUserEmail: Bad response from endpoint-user/check-email",t),new Error("Bad response from endpoint-user/check-email");return(await t.json()).ok}},7488:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleResetOnWakeup=t.handleResetRequest=void 0;const a=i(n(398)),r=n(8459),o=n(1326);function s(e){const t=indexedDB.open(e);t.onsuccess=e=>{const t=e.target.result,n=t.transaction(t.objectStoreNames,"readwrite");for(const e of[...t.objectStoreNames])n.objectStore(e).clear();n.addEventListener("error",(e=>{o.logger.warn("Factory reset: Error clearing indexedDB:",e.target.error)}))},t.addEventListener("error",(e=>{o.logger.error("Factory reset: Error opening database:",e.target.error)}))}t.handleResetRequest=async function(){await a.default.storage.local.set({resetRequested:!0}),a.default.runtime.reload()},t.handleResetOnWakeup=async function(){const{resetRequested:e}=await a.default.storage.local.get({resetRequested:!1});e&&(await a.default.storage.local.remove("resetRequested"),await async function(){try{o.logger.info("Factory reset: reset requested, clearing all data.");const{factoryResetStorages:e}=await r.getConfiguration();for(const t of e.indexedDB)try{o.logger.debug(`Factory reset: clearing dexie storage ${t}.`),s(t)}catch(e){o.logger.warn(`Factory reset: Error clearing dexie storage ${t}:`,e)}for(const t of e.localStorage)try{o.logger.debug(`Factory reset: clearing local storage ${t}.`),await a.default.storage.local.remove(t)}catch(e){o.logger.warn(`Factory reset: Error clearing local storage ${t}:`,e)}a.default.runtime.reload(),o.logger.info("Factory reset: reset completed.")}catch(e){return void o.logger.error("Factory reset: Error resetting:",e)}}())}},9032:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileSignatureVerdictCache=void 0;const i=n(1276),a=n(8459),r=n(9282);let o;function s({checkFileSignatureVerdictCache:e,cleanFileSignatureVerdictTtl:t,malFileSignatureVerdictTtl:n,unkFileSignatureVerdictTtl:a,susFileSignatureVerdictTtl:r}){return{checkVerdictCache:e,verdictTtls:{[i.Verdict.Clean]:t,[i.Verdict.Malware]:n,[i.Verdict.Unknown]:a,[i.Verdict.Suspicious]:r}}}t.getFileSignatureVerdictCache=async function(){if(o)return o;const e=s(await a.getConfiguration());return o=new r.VerdictCache("file-signature-verdict-cache",50,18e5,e),o},a.registerGetConfigurationCallback((e=>{if(o){const t=s(e);o.updateConfig(t)}}))},3017:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hmcFormPost=t.hmcFetchPatch=t.hmcFetchPost=t.hmcEncryptedFetchGet=t.hmcFetchGet=t.setConfigurationUpdatedAtHandler=void 0;const i=n(9983),a=n(9547),r=n(611),o=n(5520),s=n(3566),c=n(1326),l=n(8657),u=n(2407),d=n(772),p=n(2739),f=n(7802),g=n(5310),h="jwt expired";async function m(e,t,n,i){const a=await l.getToken();if(!a)throw new Error("Not signed in");const o=r.v4(),s=n instanceof FormData,c=await p.getEndpointInfo(),u=function(e){const t=new URLSearchParams(e).toString();return t?`?${t}`:""}(Object.assign(Object.assign({},(null==i?void 0:i.revProxy)&&{extensionId:await d.getExtensionId()}),null==i?void 0:i.queryParams));return{path:g.hubUrl(`${(null==i?void 0:i.revProxy)?"/perception-point":""}/${e}${u}`),subpath:e,init:Object.assign(Object.assign({method:t},n&&{body:s?n:JSON.stringify(n)}),{headers:Object.assign(Object.assign(Object.assign({},!s&&{"Content-Type":"application/json"}),{Authorization:`Bearer ${a}`,"X-RequestId":o,"X-EndpointInfo":JSON.stringify(c)}),null==i?void 0:i.headers),signal:null==i?void 0:i.signal}),token:a}}const v=(e,t)=>`ABS API failed ${null!=e?e:""} request on ${["first","second","third"][t]} attempt`;let y,b;t.setConfigurationUpdatedAtHandler=function(e){b=e};const w={maxRetries:2,retryCount:0,unauthorizedRetries:0};async function S(e,t){var n;let i;const a=t||w;try{i=await o.request(e.path,e.init);const t=i.headers.get("x-perceptionpoint-extension-configuration-updated-at");t&&t!==y&&(y=t,b&&b(t));const{maxRetries:n,retryCount:r,unauthorizedRetries:c}=a;if(i.status===s.HttpStatusCode.Unauthorized&&c<1){const t=i.body&&await i.json();if((null==t?void 0:t.message)===h){const t=await async function(e){const t=await l.getToken(!0);if(!t)throw new Error("Not signed in");const n=Object.assign(Object.assign({},e.init.headers),{Authorization:`Bearer ${t}`});return Object.assign(Object.assign({},e),{init:Object.assign(Object.assign({},e.init),{headers:n})})}(e);return await S(t,Object.assign(Object.assign({},a),{unauthorizedRetries:c+1}))}await f.performSignOutLogic()}if(s.isStatusAServerError(i.status)&&r<n)return await S(e,Object.assign(Object.assign({},a),{retryCount:r+1}));if(s.isStatusOk(i.status))return{response:i,token:e.token};const u=v(e.init.method,Math.max(r,c));throw new s.HttpError(u,i.status,e.subpath)}catch(t){throw s.isHttpError(t)?c.logger.warn(t.message,e.subpath,t.status,null==i?void 0:i.headers,await async function(e){if(!e)return"<no response>";try{return await e.json()}catch(t){try{return await e.formData()}catch(t){try{return await e.text()}catch(e){return"<failed to parse response body>"}}}}(i)):c.logger.error(`ABS API failed ${null!==(n=e.init.method)&&void 0!==n?n:""} request with non HttpError`,e.subpath,t),t}}async function x(e,t){return S(await m(e,"GET",void 0,t))}t.hmcFetchGet=async function(e,t){return(await x(e,t)).response};async function C(e,t,n,i){const a=await m(t,e,n,i),r=(e=>{var t;const n=(null==e?void 0:e.dontRetryOnServerError)?0:null!==(t=null==e?void 0:e.maxRetries)&&void 0!==t?t:w.maxRetries;return Object.assign(Object.assign({},w),{maxRetries:n})})(null==i?void 0:i.retryOptions),{response:o}=await S(a,r);return o}t.hmcEncryptedFetchGet=async function(e,t){const{response:n,token:r}=await x(e,t),o=await n.arrayBuffer(),s=await i.scrypt((new TextEncoder).encode(r),new Uint8Array(o.slice(0,16)),2,8,1,32),c=a.cipher.createDecipher("AES-GCM",a.util.createBuffer(s));c.start({iv:a.util.createBuffer(o.slice(16,28)),tag:a.util.createBuffer(o.slice(28,44))});const l=a.util.createBuffer(o.slice(44));return c.update(l),c.finish(),JSON.parse(c.output.toString())},t.hmcFetchPost=function(e,t,n){return C("POST",e,t,n)},t.hmcFetchPatch=function(e,t,n){return C("PATCH",e,t,n)},t.hmcFormPost=function(e,t,n){return C("POST",e,u.requestBodyToFormData(t),n)}},5520:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.request=void 0,t.request=async function(e,t){return await fetch(e,t)}},4667:function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.safeHandleIdpTokenIdentify=t.idpReferenceTokenPath=t.idpReferenceTokenName=void 0;const r=a(n(398)),o=n(1276),s=a(n(165)),c=n(1005),l=n(9370),u=n(8657),d=n(1326),p=n(3566),f=n(8545),g=n(5943),h=n(8459),m=n(8354),v=n(5310);t.idpReferenceTokenName="idp-reference",t.idpReferenceTokenPath="/to/get-extension";const y=s.default(1);t.safeHandleIdpTokenIdentify=e=>y((()=>async function({noUserInteraction:e}){var n,a,s;try{if(!await u.isSignedOut())return await r.default.storage.local.remove("idpSigninUrl"),!1;const y=await async function(){const{IdpReferenceToken:e}=await c.safeStorageManagedGet(["IdpReferenceToken"]);if(e)return d.logger.info("getIdpReferenceToken: found token in managed storage"),e;const n=await m.getCookieValueFromHub({name:t.idpReferenceTokenName,path:t.idpReferenceTokenPath});if(n)return d.logger.info("getIdpReferenceToken: found token in cookie"),n;d.logger.info("getIdpReferenceToken: no token found")}();if(!y)return await r.default.storage.local.remove("idpSigninUrl"),!1;const b=await v.hubFetch("/token-identify",{method:"POST",headers:{Authorization:`Bearer ${y}`}});if(b.status!==p.HttpStatusCode.Ok)return d.logger.error("handleIdpTokenIdentify: Failed to call token-identify",b.status),await r.default.storage.local.remove("idpSigninUrl"),!1;const w=await b.json();await r.default.storage.local.set({autoOpenPreSamlSignInPage:Boolean(w.autoOpenPreSamlSignInPage),signInRedirectCountdown:w.signInCountdown,forceSignInDomainsWhitelist:null!==(n=w.forceSignInDomainsWhitelist)&&void 0!==n?n:[],postSignInRedirectMode:null!==(a=w.postSignInRedirectMode)&&void 0!==a?a:o.PostSignInRedirectMode.ABSPage});const S=await l.getUsernameFromManagedStorage();if(w.signInMode===o.SignInMode.UnattendedSignIn&&S){d.logger.info("handleIdpTokenIdentify: starting unattended mode sign-in");const e=await async function(e,t){try{return await v.hubFetch("/unattended-sign-in",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({username:t})})}catch(e){d.logger.error("callUnattendedSignIn: Post call to unattended-sign-in failed",e)}}(y,S);if(!e)return!1;if(e.status===p.HttpStatusCode.Ok){d.logger.info("handleIdpTokenIdentify: succeeded to sign-in in unattended mode");const t=await e.json(),{username:n}=t,a=i(t,["username"]),o=Object.assign(Object.assign({},a),{lastUser:n});await r.default.storage.local.set(o);const{shouldUpdateUserDisplayName:s}=await h.getConfiguration();return await r.default.storage.local.set({shouldUpdateUserDisplayName:s}),d.logger.info("handleIdpTokenIdentify: saved tokens in unattended mode"),await u.onAuthTokensSave(),!0}return d.logger.error("handleIdpTokenIdentify: Failed to call unattended-sign-in",e.status),!1}if(e)return d.logger.info("handleIdpTokenIdentify: no user interaction. Hence succeeding quietly"),!0;w.proxyHostname&&w.idpHostnames&&await g.setProxyConfiguration({hostsToProxy:w.idpHostnames,proxyEnabled:!0,proxyHost:w.proxyHostname}),w.idp&&w.signinUrl?(d.logger.info("handleIdpTokenIdentify: saving idp signin url"),await r.default.storage.local.set({idpSigninUrl:w.signinUrl})):(d.logger.info("handleIdpTokenIdentify: no idp or id signin url"),await r.default.storage.local.remove("idpSigninUrl")),await f.enforceSignInOnTokenIdentify(w.signInEnforcementMode);const x=null!==(s=w.signInEnforcementMode)&&void 0!==s?s:o.SignInEnforcementMode.None;await r.default.storage.local.set({signInEnforcementMode:x})}catch(e){return d.logger.error("handleIdpTokenIdentify: failed",e),!1}return!0}(null!=e?e:{})))},772:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getExtensionId=t.getInstallationContext=t.updateABSConsoleDebounced=t.updateABSConsole=void 0;const a=n(1276),r=i(n(165)),o=i(n(2543)),s=i(n(398)),c=n(3566),l=n(1326),u=n(1774),d=n(3017),p=n(8676),f=n(7450),g=n(2905),h=n(8459),m=n(850),v=n(3070),y=["hmcRegistrationId"],b=r.default(1);function w(e){return b((()=>async function(e){const{email:t}=[a.BrowserName.Chrome,a.BrowserName.Edge].includes(a.browserName)?await chrome.identity.getProfileUserInfo({accountStatus:chrome.identity.AccountStatus.ANY}):{email:void 0};await async function(e,t){if(!e||e.updateRemoteDeploymentInformation){l.logger.info("updateExtensionInformation: updating endpoint user information");try{await u.updateEndpointUserRemoteDeploymentInformation()}catch(e){l.logger.warn("updateExtensionInformation: failed to update endpoint user information",e)}}l.logger.info("updateExtensionInformation: updating extension information");const n=p.getBrowserBrandVersion(),i=s.default.runtime.getManifest(),a=await f.getDeviceName(),r=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({pushNotification:null},n&&{browserName:n.brand,browserVersion:n.version}),{userAgent:navigator.userAgent}),await async function(){if(!s.default.management)return{extensionsInfo:[]};const e=s.default.runtime.id;return{extensionsInfo:(await s.default.management.getAll()).filter((({id:t})=>t!==e)),selfExtensionInfo:await s.default.management.getSelf()}}()),{platformInfo:await g.getPlatformInfo(),extensionVersion:i.version,installationContext:await S(),deviceId:await x()}),t&&{browserProfileIdentity:t}),a&&{deviceName:a}),o=await s.default.storage.local.get(y);if(o.hmcRegistrationId)try{if((await d.hmcFetchPatch(`extensions/${o.hmcRegistrationId}`,r)).ok)return void l.logger.debug("updateExtensionInformation: Updated ABS Console",o.hmcRegistrationId)}catch(e){if(!c.isHttpError(e))throw l.logger.error("updateExtensionInformation: Failed to update ABS Console due to non-http error",e),e;if(e.status!==c.HttpStatusCode.NotFound)return void l.logger.warn("updateExtensionInformation: Failed to update ABS Console",e.status);l.logger.warn("updateExtensionInformation: Extension was deleted in ABS Console or user has changed. Re-registering...")}try{const e=await d.hmcFetchPost("extensions",r),t=await e.json();o.hmcRegistrationId=t._id}catch(e){return void l.logger.warn("Failed to register in ABS Console")}await s.default.storage.local.set(o),l.logger.debug("Registered in ABS Console",o.hmcRegistrationId)}(e,t),await async function(e,t){if(e&&!e.updateUserDisplayName)return;const{userDisplayName:n,emailCollectionStatus:i}=await h.getConfiguration();m.isDefined(t)&&t!==n&&i===a.EmailCollectionStatus.Enabled&&await v.handleCandidate(t)}(e,t)}(e)))}async function S(){const{isGuest:e}=await s.default.storage.local.get({isGuest:""});return""===e?a.InstallationContext.Standalone:e?a.InstallationContext.Guest:a.InstallationContext.Host}async function x(){const{deviceId:e}=await s.default.storage.local.get({deviceId:null});return e}t.updateABSConsole=w,t.updateABSConsoleDebounced=o.default.debounce((async e=>await w(e)),1e3,{leading:!1,trailing:!0,maxWait:1e3}),t.getInstallationContext=S,t.getExtensionId=async function(){var e;return null!==(e=(await s.default.storage.local.get("hmcRegistrationId")).hmcRegistrationId)&&void 0!==e?e:""}},2219:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uploadLogCapsule=t.updateLogCapsuleError=t.createLogCapsule=void 0;const i=n(1326),a=n(3017),r=17e6;t.createLogCapsule=async function(e){i.logger.info("createLogCapsule: called");const t=await a.hmcFetchPost(`extensions/${e}/log-capsules`,{}),{_id:n}=await t.json();return i.logger.info("createLogCapsule: logCapsuleId",n),n},t.updateLogCapsuleError=async function(e,t,n){var i;const r=null!==(i=e.stack)&&void 0!==i?i:e.message;await a.hmcFetchPatch(`extensions/${t}/log-capsules/${n}`,{errorMessage:r.slice(0,1e3)})},t.uploadLogCapsule=async function(e,t,n){i.logger.info("uploadLogCapsule: called");const o=new Blob([e],{type:"text/plain"});i.logger.info("uploadLogCapsule: file size",o.size),await a.hmcFetchPatch(`extensions/${t}/log-capsules/${n}`,{size:o.size});const s=[];let c=await o.arrayBuffer(),l=1;for(;c.byteLength>0;){i.logger.info("uploadLogCapsule: part",l);const e=c.slice(0,r);c=c.slice(r);const o=await a.hmcFetchPost(`extensions/${t}/log-capsules/${n}/create-multipart-upload-part-url/${l}`,{}),{uploadUrl:u}=await o.json();i.logger.info("uploadLogCapsule: uploadUrl",u);const d=await fetch(u,{method:"PUT",body:e});if(!d.ok)throw i.logger.warn("uploadLogCapsule: failed to upload part due to bad status",d.status),new Error("Failed to upload part due to bad status");const p=d.headers.get("etag");if(!p)throw i.logger.warn("uploadLogCapsule: failed to upload part due to missing etag"),new Error("Failed to upload part due to missing etag");s.push(p),l+=1}if(i.logger.info("uploadLogCapsule: completing multipart upload"),!(await a.hmcFetchPost(`extensions/${t}/log-capsules/${n}/complete-multipart-upload`,{etags:s})).ok)throw i.logger.warn("uploadLogCapsule: failed to complete uploading log capsules"),new Error("Failed to complete multipart upload");i.logger.info("uploadLogCapsule: upload completed successfully")}},1005:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.safeStorageManagedGet=void 0;const a=i(n(398)),r=n(1326),o=n(1276),s=n(9532);t.safeStorageManagedGet=async function(e){if(o.browserName===o.BrowserName.Safari)return await s.sendNativeMessageBlindly("",{type:s.NativeMessageType.GetManagedKeys,keys:e});if(!a.default.storage.managed)return{};try{return await a.default.storage.managed.get(e)}catch(e){return o.browserName===o.BrowserName.Firefox&&e instanceof Error&&"Managed storage manifest not found"===e.message?(r.logger.warn("safeStorageManagedGet: no managed storage found on Firefox"),{}):(r.logger.error("safeStorageManagedGet: failed",e),{})}}},8657:function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.saveAuthTokens=t.onAuthTokensSave=t.isSignedOut=t.getToken=t.identifyUser=void 0;const r=n(1276),o=n(6186),s=a(n(398)),c=n(8855),l=n(3566),u=n(1326),d=n(772),p=n(7445),f=n(7802),g=n(8545),h=n(4732),m=n(9103),v=n(5310),y=n(7085);async function b(){try{u.logger.info("onAuthTokensSave: updating ABS console"),await d.updateABSConsole(),u.logger.info("onAuthTokensSave: setting icon"),await p.setDefaultIcon()}catch(e){u.logger.error("onAuthTokensSave: Failed to update others",e)}}t.identifyUser=async({email:e},t)=>{const n=await v.hubFetch("/identify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});switch(n.status){case l.HttpStatusCode.Ok:break;case l.HttpStatusCode.NotFound:return void t({kind:r.SigninIdentifyResponseKind.Error,error:r.SigninIdentifyError.NotFound});default:return void t({kind:r.SigninIdentifyResponseKind.Error,error:r.SigninIdentifyError.InternalError})}const i=await n.json();if(i.idp)return i.signinUrl?void t({kind:r.SigninIdentifyResponseKind.SigninUrl,signinUrl:i.signinUrl}):void t({kind:r.SigninIdentifyResponseKind.Error,error:r.SigninIdentifyError.IdpUser});const a=i.userPoolId?{ClientId:i.userPoolClientId,UserPoolId:i.userPoolId,endpoint:c.getCognitoApiEndpoint(i.userPoolId)}:await c.getCognitoUserPoolData();t({kind:r.SigninIdentifyResponseKind.CognitoUserPool,email:i.email,cognitoUserPoolData:a})},t.getToken=y.callAsyncOnce((async(e=!1)=>{const{jwtToken:t,jwtTokenExpiration:n,lastUser:i,refreshToken:a,userPoolId:o,userPoolClientId:l}=await s.default.storage.local.get(["jwtToken","jwtTokenExpiration","lastUser","refreshToken","userPoolId","userPoolClientId"]);if(t)return e?(u.logger.info("getToken: calling refreshSession",e,n,600,t.split(".").slice(0,-1).join(".")),await async function({lastUser:e,refreshToken:t,userPoolClientId:n,userPoolId:i}){const a=await c.createCognitoUser(e,n&&i?{userPoolClientId:n,userPoolId:i}:void 0),o=await new Promise((e=>{a.refreshSession(new r.CognitoRefreshToken({RefreshToken:t}),((t,n)=>{if(t)return u.logger.error("Refresh token error",t),"UserNotFoundException"===t.code?void e(!1):"NotAuthorizedException"===t.code?void s.default.storage.local.remove(["jwtToken","jwtTokenExpiration","refreshToken","lastUser"]).finally((()=>{e(void 0)})):void e(void 0);const i=n.idToken;if(!i)return void e(void 0);const a=i.getJwtToken();s.default.storage.local.set(Object.assign({jwtToken:a,jwtTokenExpiration:i.getExpiration()},n.refreshToken&&{refreshToken:n.refreshToken.getToken()})).finally((()=>{e(a)}))}))}));if(!1!==o)return o;await f.performSignOutLogic()}({lastUser:i,refreshToken:a,userPoolClientId:l,userPoolId:o})):t})),t.isSignedOut=async()=>{if(await t.getToken())return!1;const{jwtToken:e}=await s.default.storage.local.get({jwtToken:""});return!e},t.onAuthTokensSave=b,t.saveAuthTokens=async(e,t,n)=>{try{u.logger.info("saveAuthTokens: saving in local storage");const{kind:a}=e,c=i(e,["kind"]);await s.default.storage.local.set(Object.assign({},c)),await b(),u.logger.info("saveAuthTokens: sending empty response");const l=await async function(){const{postSignInRedirectMode:e}=await s.default.storage.local.get("postSignInRedirectMode"),t=g.getPreSignInEnforcementUrl(),n="react-pages/index.html?page=signin&done=true";let i="";switch(e){case r.PostSignInRedirectMode.PreSignInUrlRedirectAfterTimeout:i=s.default.runtime.getURL(`${n}&preSignInUrl=${t}`);break;case r.PostSignInRedirectMode.PreSignInUrlRedirect:i=t||s.default.runtime.getURL(n);break;case r.PostSignInRedirectMode.ABSPage:default:i=s.default.runtime.getURL(n)}return g.resetPreSignInEnforcementUrl(),i}(),d=m.getTabsManager(),p=n||await d.getActiveId();p&&(u.logger.debug("saveAuthTokens: uninitializing signin enforcement content script.",{tabId:p}),h.manageContentScript(p,o.ContentScriptManagementOperation.Uninitialize,[o.ContentScriptIdentifier.SignInEnforcementInteractionsDisabling])),t({redirectUrl:l})}catch(e){u.logger.error("saveAuthTokens: Failed to save auth tokens",e),t({})}}},420:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportFalseNegativeUrl=void 0;const i=n(8459),a=n(3017);t.reportFalseNegativeUrl=async function(e,t){const{scanUrlMaxLength:n,enableMultipartFalseNegativeReport:r}=await i.getConfiguration(),o=Object.assign(Object.assign({},e),{comment:t,url:e.url.slice(0,n)});await(r?a.hmcFormPost("report/url-false-negative",{body:o,base64FileFieldNames:["favicon","screenshot"]},{revProxy:!0}):a.hmcFetchPost("report/url-false-negative",o,{revProxy:!0}))}},3632:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScanVerdictCache=void 0;const i=n(1276),a=n(8459),r=n(9282);let o;function s({checkVerdictCache:e,cleanVerdictTtl:t,malVerdictTtl:n,unkVerdictTtl:a,susVerdictTtl:r}){return{checkVerdictCache:e,verdictTtls:{[i.Verdict.Clean]:t,[i.Verdict.Malware]:n,[i.Verdict.Unknown]:a,[i.Verdict.Suspicious]:r}}}t.getScanVerdictCache=async function(){if(o)return o;const e=s(await a.getConfiguration());return o=new r.VerdictCache("scan-cache",200,18e5,e),o},a.registerGetConfigurationCallback((e=>{if(o){const t=s(e);o.updateConfig(t)}}))},1371:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detectSensitiveData=void 0;const i=n(3017),a=n(3566),r=n(1326);let o=new AbortController;t.detectSensitiveData=async function(e){try{o.abort(),o=new AbortController;const{signal:t}=o,n=await i.hmcFetchPost("sensitive-data",e,{revProxy:!0,signal:t});if(!a.isStatusOk(n.status))throw r.logger.error("Bad response from perception-point/sensitive-data",n),new Error("Bad response from perception-point/sensitive-data");return{apiResponseItems:await n.json()}}catch(e){if(e instanceof Error&&"AbortError"===e.name)return{apiResponseItems:[],ignore:!0};throw e}}},7802:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.performSignOutLogic=void 0;const a=i(n(398)),r=n(1326);t.performSignOutLogic=async function(){r.logger.warn("The user has been removed. Starting signOut process"),await a.default.storage.local.clear(),r.logger.info("Reloading the extension"),a.default.runtime.reload()}},7295:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSource=void 0;const a=i(n(398)),r=n(8676),o=n(7450),s=n(2905);let c;t.getSource=async function(){const{hmcRegistrationId:e}=await a.default.storage.local.get(["hmcRegistrationId"]);if(c)return e&&!c.extension.apiId&&(c.extension=Object.assign(Object.assign({},c.extension),{apiId:e})),Object.assign({},c);const t=r.getBrowserBrandVersion(),n=await s.getPlatformInfo(),i=await o.getDeviceName();return c=Object.assign(Object.assign(Object.assign(Object.assign({},n&&{os:{name:n.os,arch:n.arch}}),t&&{browser:{name:t.brand,version:t.version}}),{userAgent:navigator.userAgent,extension:Object.assign({id:a.default.runtime.id,version:a.default.runtime.getManifest().version},e&&{apiId:e})}),i&&{deviceName:i}),Object.assign({},c)}},259:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sendApiHeadersTelemetryForDownloadProcessId=t.clearDataForDownloadProcessId=t.addDataToDownloadProcessId=void 0;const a=i(n(165)),r=n(1276),o=n(3097),s=n(5998),c=n(8459),l=["x-amz-cf-id"],u=a.default(1),d=(e,t)=>e?t.reduce(((t,n)=>Object.assign(Object.assign({},t),{[n]:e.get(n)})),{}):{},p=new o.LimitedCache("upload-api-response-headers",void 0,200,6e5);t.addDataToDownloadProcessId=async(e,t,n)=>u((async()=>{const i=await p.get(e)||(e=>({downloadProcessId:e,uploadApiResponseHeaders:[]}))(e);p.set(e,Object.assign(Object.assign({},i),{uploadApiResponseHeaders:[...i.uploadApiResponseHeaders,{url:t,headers:d(n,l)}]}))})),t.clearDataForDownloadProcessId=async e=>{await p.delete(e)},t.sendApiHeadersTelemetryForDownloadProcessId=async e=>{const n=await p.get(e);if(!n)return;const{shouldSendUploadApiResponseHeaders:i}=await c.getConfiguration();if(i){const t=n.uploadApiResponseHeaders.map((async t=>s.processTelemetry(await(async(e,t)=>{const{telemetriesUrlMaxLength:n}=await c.getConfiguration();return{category:r.TelemetryCategory.Management,type:r.TelemetryType.ApiHeaders,timestamp:new Date,metadata:Object.assign(Object.assign({downloadProcessId:e},t),{url:t.url.slice(0,n)})}})(e,t))));await Promise.all(t)}await t.clearDataForDownloadProcessId(e)}},3855:function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.uploadFile=t.decryptUpload=t.uploadComplete=t.uploadGenerateUrl=void 0;const a=n(3566),r=n(1326),o=n(8585),s=n(3017),c=n(8459);async function l(e){const t="upload/create",n=await s.hmcFetchPost(t,e,{revProxy:!0}),{headers:i}=n,a=await n.json();if(!e.single_part&&!a.upload_key)throw new Error("Upload-Create failed: responded without an upload_key");return{data:e.single_part?a:{uploadKey:a.upload_key},operationUrl:t,headers:i}}async function u(e,t){const n=await s.hmcFetchPost("upload/generate-url",{upload_key:e,part:t},{revProxy:!0});return(await n.json()).signed_url}async function d(e,t,n,i,s,c){var l;const d=await u(e,t),p=await o.asyncTry("upload-chunk",(async()=>{const e=await fetch(d,{method:"PUT",body:n,headers:{"Content-Type":"",Accept:"application/json"}});if(await e.text(),a.isStatusOk(e.status))return r.logger.debug("uploadChunk: successfully uploaded file chunk using fetch operation",i,e.status),e;throw r.logger.warn("uploadChunk: failed uploading file chunk using fetch operation",i,e.status),new Error("uploadChunk: failed uploading file chunk using fetch operation")}),s,c,!1,!0);return{etag:null!==(l=null==p?void 0:p.headers.get("ETag"))&&void 0!==l?l:"",operationUrl:d,headers:null==p?void 0:p.headers}}t.uploadGenerateUrl=u,t.uploadComplete=async function(e){const t="upload/complete",n=await s.hmcFetchPost(t,e,{revProxy:!0}),{headers:i}=n;return{scanId:(await n.json()).scan_id,operationUrl:t,headers:i}},t.decryptUpload=async function(e,t){try{const n=await s.hmcFetchPost("upload/decrypt",{scan_id:e,password:t},{revProxy:!0});return a.isStatusOk(n.status)?{success:!0}:(r.logger.warn("decrypteUpload: failed decrypting file",{scanId:e}),{success:!1})}catch(t){return r.logger.warn("decrypteUpload: failed decrypting file",{scanId:e,error:t}),{success:!1}}},t.uploadFile=async function(e,t){const n=new AbortController,{s3FileMultipartUploadMaxPartSize:s}=e,u=i(e,["s3FileMultipartUploadMaxPartSize"]);return t?Object.assign({etags:[]},await async function({blob:e,filename:t,maxSizeBytes:n,retries:i,waitBetweenRetriesMs:s}){const{data:c,operationUrl:u,headers:d}=await l({filename:t,single_part:!0}),{url:p,fields:f}=c,g=new FormData;for(const[e,t]of Object.entries(f))g.append(e,t);return g.append("file",e.slice(0,n)),await o.asyncTry("http-post-upload",(async()=>{const e=await fetch(p,{method:"POST",body:g});if(await e.text(),a.isStatusOk(e.status))return r.logger.debug("httpPostUpload: successfully uploaded file using single fetch operation",p,t,e.status),e;throw r.logger.warn("httpPostUpload: failed uploading file using single fetch operation",p,t,e.status),new Error("httpPostUpload: failed uploading file using single fetch operation")}),i,s,!1,!0),{uploadKey:f.key,operationsResponses:[{operationUrl:u,headers:d}]}}(u)):await async function({blob:e,filename:t,maxSizeBytes:n,s3FileMultipartUploadMaxPartSize:i,retries:a,waitBetweenRetriesMs:r},o){const s=e.stream().getReader();let u,p,f,g="";const h=[],m=new Uint8Array(i);let v=0;const y=[],{shouldSendMultipartApiResponseHeaders:b}=await c.getConfiguration();for(;y.length*i+v<=n;){const{done:e,value:o}=await s.read();if(e)break;for(const e of null!=o?o:[]){if(m[v]=e,v+=1,v===i){u||(({data:p,operationUrl:g,headers:f}=await l({filename:t,single_part:!1})),h.push({operationUrl:g,headers:f}),({uploadKey:u}=p));const e=await d(u,y.length+1,m,t,a,r),{etag:n}=e;if(({operationUrl:g,headers:f}=e),b&&f&&h.push({operationUrl:g,headers:f}),!n)throw new Error("Failed to get an etag");y.push(n),v=0}if(y.length*i+v>n)break}}if(y.length*i+v>n&&o.abort(),v>0){u||(({data:p,operationUrl:g,headers:f}=await l({filename:t,single_part:!1})),h.push({operationUrl:g,headers:f}),({uploadKey:u}=p));const e=await d(u,y.length+1,m.slice(0,v),t,a,r),{etag:n}=e;if(({operationUrl:g,headers:f}=e),b&&f&&h.push({operationUrl:g,headers:f}),!n)throw new Error("Failed to get an etag");y.push(n),v=0}return{etags:y,uploadKey:u,operationsResponses:h}}(e,n)}},5294:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlVerdictCache=void 0;const i=n(1276),a=n(8459),r=n(9282);let o;function s({checkVerdictCache:e,cleanVerdictTtl:t,malVerdictTtl:n,unkVerdictTtl:a,susVerdictTtl:r}){return{checkVerdictCache:e,verdictTtls:{[i.Verdict.Clean]:t,[i.Verdict.Malware]:n,[i.Verdict.Unknown]:a,[i.Verdict.Suspicious]:r}}}t.getUrlVerdictCache=async function(){if(o)return o;const e=s(await a.getConfiguration());return o=new r.VerdictCache("url-cache",200,18e5,e),o},a.registerGetConfigurationCallback((e=>{if(o){const t=s(e);o.updateConfig(t)}}))},9370:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUsernameFromManagedStorage=void 0;const i=n(1005),a=n(1326);t.getUsernameFromManagedStorage=async function(){a.logger.info("getUsernameFromManagedStorage: get managed-storage remote deployment username");const{Username:e}=await i.safeStorageManagedGet(["Username"]);if(e)return a.logger.info("getUsernameFromManagedStorage: found remote deployment username in registry"),e}},8711:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageKind=void 0,(n=t.MessageKind||(t.MessageKind={})).GetDynamicEvidence="getDynamicEvidence",n.GetHtmlDomStatistics="getHtmlDomStatistics"},4030:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.migrate=void 0;const a=i(n(398)),r=n(1326);t.migrate=async function(e,t){r.logger.info("removing old sensitive data detection cache"),await a.default.storage.local.remove("sensitiveData"),await a.default.storage.local.remove("hash_domain"),await a.default.storage.local.remove("downloadEventsData")}},7121:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(4175),t),a(n(3543),t),a(n(5173),t),a(n(1893),t),a(n(7652),t),a(n(5215),t),a(n(9845),t),a(n(7517),t)},8429:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCommonNotificationId=void 0;const i=n(3543);t.getCommonNotificationId=function(e,t){var n;return null!==(n=i.NotificationsIds.get(`${e}-${t}`))&&void 0!==n?n:`${e}-${t}`}},7517:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showWebsiteWarningNotificationSafe=t.showScanAbortedToast=t.showScanReasonToast=t.showSensitiveDataIdentificationNotificationSafe=t.showSensitiveDataDetectionProgressNotificationSafe=t.showFileUploadPreventedNotificationSafe=t.showPasteRestrictedNotificationSafe=t.showSuspiciousWebsiteNotificationSafe=t.showPasswordDuplicationNotificationSafe=t.showMaliciousWebsiteNotificationSafe=void 0;const i=n(1276),a=n(4175),r=n(5173),o=n(7717),s=n(8459);t.showMaliciousWebsiteNotificationSafe=function(e,t){a.showNotificationSafe(r.CommonNotification.MaliciousWebsite,{title:"Malicious website detected",type:i.ToastType.BasicNotification,autoDismiss:!1,notificationLevel:i.NotificationLevel.Malicious,body:`The following website was found to be malicious: ${e}`,tabId:t,legacyNotificationOptions:{icon:"../assets/icon128.png"}})},t.showPasswordDuplicationNotificationSafe=function(e){a.showNotificationSafe(r.CommonNotification.MaliciousWebsite,{title:"Password reuse detected",type:i.ToastType.BasicNotification,autoDismiss:!0,notificationLevel:i.NotificationLevel.Warning,body:`We detected reuse of a password on ${e}.\nUnique passwords help to protect your accounts.\nPlease don't reuse passwords on multiple sites.`})},t.showSuspiciousWebsiteNotificationSafe=async function(e,t){const{customSuspiciousBannerTexts:{title:n,body:o}}=await s.getConfiguration();return a.showNotificationSafe(r.CommonNotification.Banner,{autoDismiss:!1,title:n,body:t||o,tabId:e,type:i.ToastType.BannerNotification,bannerType:i.BannerType.SuspiciousBanner,cleanPreviousNotification:!1})},t.showPasteRestrictedNotificationSafe=function(){a.showNotificationSafe(r.CommonNotification.PasteResticted,{title:"Paste is blocked",type:i.ToastType.BasicNotification,autoDismiss:!0,notificationLevel:i.NotificationLevel.Policy,body:"Pasting content into this website is blocked by your organization"})},t.showFileUploadPreventedNotificationSafe=function(){a.showNotificationSafe(r.CommonNotification.FileUploadPrevented,{title:"Upload is blocked",type:i.ToastType.BasicNotification,autoDismiss:!0,notificationLevel:i.NotificationLevel.Policy,body:"Uploading files to this site is blocked by your organization."})},t.showSensitiveDataDetectionProgressNotificationSafe=function(){a.showNotificationSafe(r.CommonNotification.SensitiveDataDetected,{title:"Sensitive data detection is in progress.",type:i.ToastType.BasicNotification,autoDismiss:!0,notificationLevel:i.NotificationLevel.Policy,body:"Please wait while we are detecting sensitive data in your input. try again in a few seconds."})},t.showSensitiveDataIdentificationNotificationSafe=function(e,t){a.showNotificationSafe(r.CommonNotification.SensitiveDataDetected,{title:"Sensitive data input detected",type:i.ToastType.BasicNotification,autoDismiss:!0,notificationLevel:i.NotificationLevel.Policy,body:`Be careful when inputting ${e} into this website. ${t?`<a href="${t}">More info</a>`:""}`})};const c=new o.ImmutableArrayKeyMap(new Map([[[i.ScanReason.FirstScan,i.ScanReason.Interval],"Website wasn't scanned before, and interval passed"],[i.ScanReason.WebsiteLoaded,"Website finished loading"],[i.ScanReason.FalseNegativeReport,"Reporting False Negative for website"],[i.ScanReason.CreditCardOrEmail,"Detected credit-card or email"],[[i.ScanReason.Interval,i.ScanReason.DomChanged],"Interval passed and then DOM changed"],[[i.ScanReason.UserClicked,i.ScanReason.DomChanged],"User click triggered a DOM changed"],[[i.ScanReason.DomChanged,i.ScanReason.Interval],"DOM changed and then interval passed"],[[i.ScanReason.DomChanged,i.ScanReason.UserClicked],"DOM changed and then user clicked"],[i.ScanReason.TabFocused,"Tab was focused"],[i.ScanReason.PrerenderedTabShown,"Prerendered tab was shown"]]));t.showScanReasonToast=async function(e,t){var n;const{showToastNotificationWhenCollectingEvidence:o}=await s.getConfiguration();o&&a.showNotificationSafe(r.CommonNotification.WebsiteScanning,{title:"Scanning website",body:null!==(n=e&&c.get(e))&&void 0!==n?n:"For no good reason!",type:i.ToastType.BasicNotification,notificationLevel:i.NotificationLevel.Info,autoDismiss:!0,tabId:t})},t.showScanAbortedToast=async function(e,t){const{showToastNotificationWhenCollectingEvidence:n}=await s.getConfiguration();n&&a.showNotificationSafe(r.CommonNotification.WebsiteScanning,{title:"Scanning aborted",body:e,type:i.ToastType.BasicNotification,notificationLevel:i.NotificationLevel.Info,autoDismiss:!0,tabId:t})},t.showWebsiteWarningNotificationSafe=function(e){a.showNotificationSafe(r.CommonNotification.WebsiteWarning,{title:"Proceed with caution",type:i.ToastType.BasicNotification,autoDismiss:!1,notificationLevel:i.NotificationLevel.Policy,body:"Keep in mind the organization's security guidelines while using this website",tabId:e,legacyNotificationOptions:{icon:"../assets/pre-signin-icon72.png"}})}},9845:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showDownloadNotificationSafe=t.clearDownloadNotification=void 0;const i=n(7121),a=n(1326),r=n(8585),o=n(8459),s=n(1276);t.clearDownloadNotification=function(e){const t=i.getNotificationId(i.DownloadNotification.DownloadScanning,e);t?i.clearNotification(t):a.logger.warn("downloads-notifications: Couln't find toast id, not clearing the toast")},t.showDownloadNotificationSafe=async function(e){return r.asyncTrySafe("showDownloadNotification",(async()=>{var t,n;const{notificationType:r,toastOptions:c}=e;if(!await async function(e,t){if(!await async function(e){const{shouldShowScanningFilesNotification:t,shouldShowCleanFilesNotification:n,shouldShowMaliciousFilesNotification:a,shouldShowFileTooLargeNotification:r,shouldShowFileAccessibleNotification:s,showFailedScanNotification:c,shouldShowEncryptedFilesNotification:l}=await o.getConfiguration();switch(e){case i.DownloadNotification.DownloadScanning:return t;case i.DownloadNotification.DownloadClean:return n;case i.DownloadNotification.DownloadMalicious:return a;case i.DownloadNotification.DownloadFileTooLarge:return r;case i.DownloadEventNotification.DownloadTimeout:return s;case i.DownloadNotification.DownloadUnsuccessfulScan:case i.DownloadNotification.DownloadUnsuccessfulDownload:return c;case i.DownloadNotification.DownloadEncryptedFile:return l;default:return!0}}(e))return a.logger.info("notification-manager: not showing download notification because specific config is disabled",t,e),!1;const{fileDetectionMode:n}=await o.getConfiguration();return n!==s.FileDetectionMode.Silent||(a.logger.info("notification-manager: not showing download notification because silent mode is enabled",e),!1)}(r,null!==(t=c.downloadId)&&void 0!==t?t:-1))return;const l=await async function(e){const{autoDismissScanningFilesNotification:t,autoDismissCleanFilesNotification:n,autoDismissMaliciousFilesNotification:a,autoDismissFileTooLargeNotification:r,autoDismissFileAccessibleNotification:s,autoDismissFailedScanNotification:c,autoDismissEncryptedFilesNotification:l}=await o.getConfiguration();switch(e){case i.DownloadNotification.DownloadScanning:return t;case i.DownloadNotification.DownloadClean:return n;case i.DownloadNotification.DownloadMalicious:return a;case i.DownloadNotification.DownloadFileTooLarge:return r;case i.DownloadEventNotification.DownloadTimeout:return s;case i.DownloadNotification.DownloadUnsuccessfulScan:case i.DownloadNotification.DownloadUnsuccessfulDownload:return c;case i.DownloadNotification.DownloadEncryptedFile:return l;default:return!1}}(r),{shouldShowDownloadIdInToast:u}=await o.getConfiguration();await i.showNotificationSafe(r,Object.assign(Object.assign({},c),{autoDismiss:l,debuggingData:u?`${null!==(n=c.downloadId)&&void 0!==n?n:-1}`:void 0,legacyNotificationOptions:{}}))}))}},5215:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shortenFilename=t.getDownloadNotificationId=t.downloadNotificationIdPrefix=void 0;const i=n(1326),a=n(8585),r=n(8459),o=n(5173),s=n(3543);let c=36;t.downloadNotificationIdPrefix="download-state",t.getDownloadNotificationId=function(e,n){var i,a;return Object.values(o.DownloadNotification).includes(e)?null!==(i=s.NotificationsIds.get(`${t.downloadNotificationIdPrefix}-${n}`))&&void 0!==i?i:`${t.downloadNotificationIdPrefix}-${n}`:null!==(a=s.NotificationsIds.get(`download-event-${n}`))&&void 0!==a?a:`download-event-${n}`},t.shortenFilename=function(e,t){return t=null!=t?t:c,e.length>t?`${e.slice(0,t/2)}..${e.slice(-t/2)}`:e},a.asyncTrySafe("setDefaultMaxLengthForToastFilename",(async function(){const{defaultMaxLengthForToastFilename:e}=await r.getConfiguration();i.logger.debug("notification-manager: setting default max length for toast filename",c,e),c=e}))},7652:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showScanProgressBarNotificationSafe=t.showUnscannableFileNotificationSafeIfNeeded=t.showUnsuccessfulDownloadNotificationSafeIfNeeded=t.showUnsuccessfulScanNotificationSafeIfNeeded=t.showFileAccessibleNotificationIfNeeded=t.showMaliciousDownloadNotificationSafeIfNeeded=t.showCleanDownloadNotificationSafeIfNeeded=void 0;const i=n(1276),a=n(7121),r=n(6339),o=n(5215),s=n(9845),c=n(1326),l=n(8459);t.showCleanDownloadNotificationSafeIfNeeded=function(e,t,n,r){s.showDownloadNotificationSafe({notificationType:a.DownloadNotification.DownloadClean,toastOptions:{title:"Your download is safe to open",body:`${o.shortenFilename(e)} was scanned successfully - no threats were found.`,notificationLevel:i.NotificationLevel.Success,type:i.ToastType.BasicNotification,downloadId:t,tabId:n,sourceTabId:r}})},t.showMaliciousDownloadNotificationSafeIfNeeded=async function(e,t,n,r){await s.showDownloadNotificationSafe({notificationType:a.DownloadNotification.DownloadMalicious,toastOptions:{title:"Malicious download detected",body:`A downloaded file was found to be malicious: ${o.shortenFilename(e)}`,notificationLevel:i.NotificationLevel.Malicious,type:i.ToastType.BasicNotification,downloadId:t,tabId:n,sourceTabId:r}})},t.showFileAccessibleNotificationIfNeeded=function(e,t,n,r){s.showDownloadNotificationSafe({notificationType:a.DownloadEventNotification.DownloadTimeout,toastOptions:{title:"Downloaded file may not be safe",body:`${o.shortenFilename(e)} is now accessible. The scan is still in progress, therefore the file may not be safe.`,notificationLevel:i.NotificationLevel.Warning,type:i.ToastType.BasicNotification,downloadId:t,tabId:n,sourceTabId:r}})},t.showUnsuccessfulScanNotificationSafeIfNeeded=async function(e,t,n,r){const{showFailedScanNotification:u}=await l.getConfiguration();if(!u)return c.logger.debug("not showing failed scan notification as it is disabled",{downloadId:t,showFailedScanNotification:u}),void s.clearDownloadNotification(t);s.showDownloadNotificationSafe({notificationType:a.DownloadNotification.DownloadUnsuccessfulScan,toastOptions:{title:"Scan not successful",body:`We were not able to successfully scan your file ${o.shortenFilename(e)}.\nThe downloaded file is available.\nWarning: It may be malicious.`,notificationLevel:i.NotificationLevel.Warning,type:i.ToastType.BasicNotification,downloadId:t,tabId:n,sourceTabId:r}})},t.showUnsuccessfulDownloadNotificationSafeIfNeeded=async function(e,t,n,r){const{showFailedScanNotification:u}=await l.getConfiguration();if(!u)return c.logger.debug("not showing failed scan notification as it is disabled",{downloadId:t,showFailedScanNotification:u}),void s.clearDownloadNotification(t);s.showDownloadNotificationSafe({notificationType:a.DownloadNotification.DownloadUnsuccessfulDownload,toastOptions:{title:"Download not successful",body:`We were not able to scan your file ${o.shortenFilename(e)}.\nPlease try to download the file again later...`,notificationLevel:i.NotificationLevel.Error,type:i.ToastType.BasicNotification,downloadId:t,tabId:n,sourceTabId:r}})},t.showUnscannableFileNotificationSafeIfNeeded=function(e,t,n,c,l,u,d){const p=l===r.Reason.EncryptedFile?a.DownloadNotification.DownloadEncryptedFile:a.DownloadNotification.DownloadFileTooLarge;s.showDownloadNotificationSafe({notificationType:p,toastOptions:{title:"Downloaded file may not be safe",body:c?n:`The downloaded file ${o.shortenFilename(e)} ${n}, and therefore can't be scanned for malicious content.\nOpen the downloaded file only if you trust its source.`,notificationLevel:i.NotificationLevel.Warning,type:i.ToastType.BasicNotification,downloadId:t,tabId:u,sourceTabId:d}})},t.showScanProgressBarNotificationSafe=function(e,t,n,r,o,c,l,u,d,p,f,g){s.showDownloadNotificationSafe({notificationType:a.DownloadNotification.DownloadScanning,toastOptions:{notificationLevel:i.NotificationLevel.Info,maxScanProgressPercentage:c,minScanProgressPercentage:l,scanProgressStagePercentage:u,downloadedBytes:d,changeInterval:o,scanStatus:n,downloadId:r,fileName:e,fileSizeBytes:null!=t?t:0,showCancelButton:null!=p&&p,tabId:f,sourceTabId:g,type:i.ToastType.ScanStatusNotification}})}},1893:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.refreshScanProgressToast=t.refreshScanProgressToastBaseData=t.updateDownloadProgressToastIfNeeded=t.updateScanProgressToastIfNeeded=void 0;const a=i(n(398)),r=n(1276),o=n(7121),s=n(1326),c=n(7652),l=n(8585),u=n(64),d=n(8459);async function p(e,{scanStatus:t,changeInterval:n,maxScanProgressPercentage:i,minScanProgressPercentage:a,scanProgressStagePercentage:d,downloadedBytes:p},f){const h=o.getNotificationId(o.DownloadNotification.DownloadScanning,e);if(h)return a&&a>0||d&&d>0?(await l.asyncTrySafe("refreshScanProgressToast",(()=>g(h,{scanStatus:t,changeInterval:n,maxScanProgressPercentage:i,minScanProgressPercentage:a,scanProgressStagePercentage:d,downloadedBytes:p},f))),void(t===r.ScanProgressStatus.Completed&&setTimeout((()=>{o.clearNotification(o.DownloadEventNotification.DownloadTimeout)}),2e3))):void await async function(e,t,{scanStatus:n,changeInterval:i,maxScanProgressPercentage:a,minScanProgressPercentage:r,scanProgressStagePercentage:l,downloadedBytes:d}){if(t>=0&&e!==`${o.downloadNotificationIdPrefix}-${t}`)return void s.logger.warn("notification-manager: Found notification id, not showing scan progress notification again",t);s.logger.debug("notification-manager: initializing scan progress toast",{downloadId:t,scanStatus:n,maxScanProgressPercentage:a,minScanProgressPercentage:r,scanProgressStagePercentage:l});const p=await u.getByBrowserDownloadId(t);if(!(null==p?void 0:p.download))return void s.logger.warn("notification-manager: no download found for scan progress toast",{downloadId:t});const{filename:f,fileSize:g}=p.download;c.showScanProgressBarNotificationSafe(f,g,n,t,i,a,r,l,d,!1,p.tabId,p.sourceTabId)}(h,e,{scanStatus:t,changeInterval:n,maxScanProgressPercentage:i,minScanProgressPercentage:a,scanProgressStagePercentage:d,downloadedBytes:p});s.logger.warn("scanning-notification: Couln't find toast id, not showing the toast")}async function f(e,t,n,i,a,o){const s=function(e,t,n){return{[r.ScanProgressStatus.Preparing]:{totalTimeInMs:e.scanProgressPreparingMaxTotalTimeMs,maxPercentage:e.scanProgressPreparingMaxPercentage,minPercentage:0},[r.ScanProgressStatus.Downloading]:{totalTimeInMs:e.scanProgressDownloadingMaxTotalTimeMs,maxPercentage:e.scanProgressDownloadingMaxPercentage,minPercentage:e.scanProgressPreparingMaxPercentage},[r.ScanProgressStatus.Uploading]:{totalTimeInMs:e.scanProgressUploadingMaxTotalTimeMs,maxPercentage:e.scanProgressUploadingMaxPercentage,minPercentage:e.scanProgressDownloadingMaxPercentage},[r.ScanProgressStatus.Scanning]:{totalTimeInMs:n?e.scanProgressEncryptedScanningMaxTotalTimeMs:e.scanProgressScanningMaxTotalTimeMs,maxPercentage:e.scanProgressScanningMaxPercentage,minPercentage:e.scanProgressUploadingMaxPercentage},[r.ScanProgressStatus.PendingPassword]:{totalTimeInMs:0,maxPercentage:e.scanProgressUploadingMaxPercentage,minPercentage:e.scanProgressUploadingMaxPercentage},[r.ScanProgressStatus.Completed]:{totalTimeInMs:e.scanProgressCompletedMaxTotalTimeMs,maxPercentage:e.scanProgressCompletedMaxPercentage,minPercentage:e.scanProgressScanningMaxPercentage}}[t]}(await d.getConfiguration(),t,o);if(i){const r=100===i?s.maxPercentage-1:Math.round(i*((s.maxPercentage-s.minPercentage)/100)+s.minPercentage);return void await p(e,{scanStatus:t,changeInterval:0,maxScanProgressPercentage:void 0,minScanProgressPercentage:void 0,scanProgressStagePercentage:r,downloadedBytes:a},n)}const c=0===s.totalTimeInMs?0:s.totalTimeInMs/(s.maxPercentage-s.minPercentage);await p(e,{scanStatus:t,changeInterval:c,maxScanProgressPercentage:s.maxPercentage,minScanProgressPercentage:s.minPercentage,scanProgressStagePercentage:void 0,downloadedBytes:a},n)}async function g(e,{maxScanProgressPercentage:t,minScanProgressPercentage:n,changeInterval:i,scanStatus:o,scanProgressStagePercentage:s,downloadedBytes:c},l){var u;const d=null!==(u=r.getTabIdFromToastId(e))&&void 0!==u?u:l;d&&await a.default.tabs.sendMessage(d,{kind:r.MessageKind.ShowScanProgressBarRefreshedToastMessage,maxScanProgressPercentage:t,minScanProgressPercentage:n,changeInterval:i,scanStatus:o,id:e,scanProgressStagePercentage:s,downloadedBytes:c})}t.updateScanProgressToastIfNeeded=f,t.updateDownloadProgressToastIfNeeded=async function(e,t,n,i){const a=n?Math.round(t/n*100):void 0,{shouldShowDownloadProgressInToast:o}=await d.getConfiguration();await f(e,r.ScanProgressStatus.Downloading,i,a,o?t:void 0)},t.refreshScanProgressToastBaseData=async function(e,t){const n=o.getNotificationId(o.DownloadNotification.DownloadScanning,e);if(!n)return;const i=r.getTabIdFromToastId(n);i&&await a.default.tabs.sendMessage(i,{kind:r.MessageKind.RefreshScanProgressBaseDataMessage,id:n,fileName:t})},t.refreshScanProgressToast=g},4175:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.showNotificationSafe=t.clearNotification=void 0;const a=n(1276),r=i(n(398)),o=n(1326),s=n(8459),c=n(8585),l=n(3543),u=n(9103),d=n(611),p={[a.ToastType.BasicNotification]:a.MessageKind.ShowNotificationToast,[a.ToastType.ScanStatusNotification]:a.MessageKind.ShowScanProgressBarToastMessage,[a.ToastType.BannerNotification]:a.MessageKind.ShowNotificationBanner};function f(e){var t;const n=null!==(t=l.getNotificationId(e))&&void 0!==t?t:e;c.tryOnce((()=>{o.logger.info("notification-manager: clearing notification",n);const e=a.getTabIdFromToastId(n);e&&r.default.tabs.sendMessage(e,{kind:a.MessageKind.DismissNotificationToast,id:n})}))}t.clearNotification=f,t.showNotificationSafe=async function(e,t){const{showNotificationRetries:n,showNotificationRetryDelayMs:i}=await s.getConfiguration(),a=await async function(e){var t;const n=u.getTabsManager();if(e&&await n.exists(e))return e;const i=await n.getActive(),a=i&&""===i.url&&i.index>0?null===(t=(await r.default.tabs.query({index:i.index-1}))[0])||void 0===t?void 0:t.id:null==i?void 0:i.id;if(!a)throw o.logger.warn("notification-manager: Could not find current active tab. not showing notification"),new Error("Could not find current active tab");return a}(t.tabId);if(!a)throw o.logger.warn("notification-manager: Could not find current active tab. not showing notification"),new Error("Could not find current active tab");const g=l.getNotificationId(e,t.downloadId,a);if(!g)return void o.logger.warn("notification-manager: Couln't find notification id, not showing the notification");const h=await c.asyncTrySafe("showNotification",(()=>async function(e,t,n){const{customLogoUrl:i}=await s.getConfiguration(),{cleanPreviousNotification:a}=Object.assign({cleanPreviousNotification:!0},e),{legacyNotificationOptions:c,type:l,sourceTabId:g}=e;i&&(null==c?void 0:c.icon)&&(c.icon=i),a&&void 0!==t&&f(t);const h=u.getTabsManager(),m=await h.exists(n)?n:g;if(!m)throw o.logger.error("notification-manager: Could not find the download tab. not showing notification"),new Error("Could not find the download tab");const v=`t${m}_${d.v4()}`;return await r.default.tabs.sendMessage(m,Object.assign({kind:p[l],id:v},e)),o.logger.debug("notification-manager: showing notification",Object.assign(Object.assign({},e),{id:t,notificationTabId:m})),v}(t,g,a)),n,i,!1);h&&l.setNotificationId(g,h)}},3543:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNotificationId=t.setNotificationId=t.NotificationsIds=void 0;const i=n(8429),a=n(5215),r=n(5173);t.NotificationsIds=new Map,t.setNotificationId=function(e,n){t.NotificationsIds.set(e,n)},t.getNotificationId=function(e,t,n){if(Object.values(r.CommonNotification).includes(e)){if(!n)return;return i.getCommonNotificationId(e,n)}if(t)return a.getDownloadNotificationId(e,t)}},5173:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.CommonNotification=t.DownloadEventNotification=t.DownloadNotification=void 0,(i=t.DownloadNotification||(t.DownloadNotification={})).DownloadScanning="download-scanning",i.DownloadClean="download-clean",i.DownloadMalicious="download-malicious",i.DownloadFileTooLarge="download-file-too-large",i.DownloadUnsuccessfulScan="download-unsuccessful-scan",i.DownloadUnsuccessfulDownload="download-unsuccessful-download",i.DownloadEncryptedFile="download-encrypted-file",(t.DownloadEventNotification||(t.DownloadEventNotification={})).DownloadTimeout="download-timeout",(n=t.CommonNotification||(t.CommonNotification={})).PasteResticted="paste-restricted",n.FileUploadPrevented="file-upload-prevented",n.SensitiveDataDetected="sensitive-data-detected",n.MaliciousWebsite="malicious-website",n.Banner="banner",n.WebsiteScanning="website-scanning",n.WebsiteWarning="website-warning"},423:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(398)),r=n(1311),o=n(8459),s=n(345),c=n(1326),l=n(4882),u=n(6846);a.default.webNavigation.onCompleted.addListener((e=>{!async function(e){const{tabId:t,url:n,frameId:i}=e;await r.shouldDetectUrl(n,i,!0)&&await async function(e,t){const{enablePrivacyScreen:n,privacyScreenDomainList:i,privacyScreenUrlRegex:a,dlpRules:r}=await o.getConfiguration(),d=new URL(e).hostname;if(n&&(s.doesMatchListWildcard(d,i)||s.doesMatchListRegex(e,a)))return!0;const p=await l.getCategories({tabId:t});return u.isWebsiteRuleEnabled([d],p?Object.keys(p):[],r,u.WebsiteRuleType.InactivityMask,c.logger)}(n,t)&&(c.logger.debug("About to inject privacy screen to:",t),await async function(e){const{privacyScreenBlur:t}=await o.getConfiguration(),n=`body.privacy-on {\n    filter: blur(${t}px);\n    position: absolute;\n    width: 100%;\n    height: 100%;\n  }`;await a.default.scripting.insertCSS({css:n,target:{tabId:e}}),await a.default.scripting.executeScript({target:{tabId:e},files:["scripts/privacy-screen-content-script.js"]})}(t),c.logger.debug("Privacy screen applied to:",t))}(e)}))},7833:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.getNavigationEventsStore=t.getSessionManager=void 0;var i=n(3744);Object.defineProperty(t,"getSessionManager",{enumerable:!0,get:function(){return i.getSessionManager}});var a=n(5240);Object.defineProperty(t,"getNavigationEventsStore",{enumerable:!0,get:function(){return a.getNavigationEventsStore}});var r=n(4535);Object.defineProperty(t,"init",{enumerable:!0,get:function(){return r.init}})},4535:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const a=i(n(398)),r=n(3744),o=n(8663);t.init=async function(){await r.getSessionManager()},a.default.webRequest&&a.default.webRequest.onBeforeSendHeaders.addListener((e=>{o.processWebRequests(e)}),{urls:["<all_urls>"]})},5240:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNavigationEventsStore=void 0;const i=n(1276),a=n(7904),r=n(1326),o=n(8459);class s{constructor(e){this.options=e,this.store=new i.Dexie("navigationEvents","++id, url, setId, tabId, metadata.navigationStage",2)}async add(e){await this.store.items.add(e),await this.evictOldNavigationEvents()}async findByUrl(e){return await this.store.items.where("url").equals(e).toArray()}async findBySetId(e){return await this.store.items.where("setId").equals(e).toArray()}async evictOldNavigationEvents(){const e=await this.store.items.count();if(e<=this.options.maxNavigationEvents)return;const t=Date.now();r.logger.debug(`Evicting old navigation events. Current count: ${e}`,{start:t});const n=Math.floor(e*this.options.evictionRatio),i=(await this.store.items.where("metadata.navigationStage").equals(a.NavigationStage.OnBeforeNavigate).sortBy("timestamp")).slice(0,n).map((e=>e.setId));await this.store.items.where("setId").anyOf(i).delete(),r.logger.debug(`Evicted ${i.length} navigation events. Took ${Date.now()-t}ms`)}}let c;t.getNavigationEventsStore=async function(){if(c)return c;const{navigationEventsMaxCount:e,navigationEventsEvictionRatio:t}=await o.getConfiguration();return c=new s({maxNavigationEvents:e,evictionRatio:t}),c}},3744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSessionManager=void 0;const i=n(1276),a=n(8459),r=n(3671),o=n(1326),s=n(2061),c=n(611),l=n(9103),u=n(5240),d=n(9249);class p{constructor(e,t,n){this.tabsManager=e,this.navigationEventsStore=t,this.sessions=new r.DexieLimitedCache("sessions",{maxAge:n.cacheTtl||0,maxCount:n.cacheSize,shouldEvictExpired:n.shouldEvictExpired})}async get(e){return await this.sessions.get(e)}async update(e,t){await this.sessions.update(e,t)}async delete(e){await this.sessions.delete(e)}async createSession(){const e=c.v4(),t={id:e,createdAt:Date.now()};return o.logger.debug("Session Manager: New session info",{session:t}),await this.sessions.set(e,t),t}async getTabSession(e){const t=await this.tabsManager.get(e);if(null==t?void 0:t.sessionId)return o.logger.debug("Session Manager: Found session on tab",{tabId:e,sessionId:t.sessionId}),await this.sessions.get(t.sessionId)}async getSourceTabSession(e,t){const n=await this.tabsManager.get(e);if(!(null==n?void 0:n.sourceTabId))return;const i=await this.tabsManager.get(n.sourceTabId);if(!i||!i.sessionId)return void o.logger.debug("Session Manager: No session found on source tab",{tabId:n.sourceTabId});const a=i.url&&d.getDomainFromUrl(i.url);if(a){if(!t.includes(a))return o.logger.debug("Session Manager: Found session on source tab",{tabId:i.id,sessionId:i.sessionId}),await this.sessions.get(i.sessionId);o.logger.debug("Session Manager: Source tab domain is excluded from session inheritance. not using source tab session.",{tabId:i.id,sessionId:i.sessionId,domain:a})}else o.logger.debug("Session Manager: No domain found for source tab",{tabId:i.id,sessionId:i.sessionId})}async getUrlSession(e,t){const n=await this.navigationEventsStore.findByUrl(e);if(0===n.length)return;const a=[...new Set(n.map((e=>e.sessionId)))],r=(await this.sessions.bulkGet(a)).sort(((e,t)=>t.createdAt-e.createdAt)),s=r[0];switch(t){case i.ActivationStatus.Active:return s;case i.ActivationStatus.ActiveForEmail:{const e=r.find((e=>{var t;return null===(t=e.connectivityChannels)||void 0===t?void 0:t.email}));return e?(o.logger.debug("Session Manager: Found session with email connectivity.",{activationStatus:t,sessionWithEmailConnectivity:e}),e):(o.logger.debug("Session Manager: No session with email connectivity found. resolving to last session.",{activationStatus:t,lastSession:s}),s)}}}async resolve(e,t){o.logger.debug("Session Manager: Resolving session",e,t);const{activationStatus:n,excludedDomainsForSourceTabSessionResolving:i}=await a.getConfiguration(),r=await this.getTabSession(e);if(r)return o.logger.debug("Session Manager: Session found by tab",{url:t,sessionId:r.id}),{session:r,origin:s.SessionResolvingOrigin.Tab};o.logger.debug("Session Manager: No session found on tab. Checking source tab",e);const c=await this.getSourceTabSession(e,i);if(c)return o.logger.debug("Session Manager: Session found by source tab",{url:t,sessionId:c.id}),{session:c,origin:s.SessionResolvingOrigin.SourceTab};o.logger.debug("Session Manager: No session found on source tab. Checking url",e);const l=t?await this.getUrlSession(t,n):void 0;return l?(o.logger.debug("Session Manager: Session found by url",{url:t,sessionId:l.id}),{session:l,origin:s.SessionResolvingOrigin.Url}):(o.logger.debug("Session Manager: No session found by url, creating new session",e),{session:await this.createSession(),origin:s.SessionResolvingOrigin.NewSession})}}let f;t.getSessionManager=async function(){if(f)return f;const{sessionsCacheSize:e,sessionsCacheTtl:t,shouldExpireSessions:n}=await a.getConfiguration(),i=l.getTabsManager(),r=await u.getNavigationEventsStore();return f=new p(i,r,{cacheSize:e,cacheTtl:t,shouldEvictExpired:n}),f}},2061:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionResolvingOrigin=void 0,(n=t.SessionResolvingOrigin||(t.SessionResolvingOrigin={})).Tab="tab",n.SourceTab="source-tab",n.Url="url",n.NewSession="new-session"},8663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processWebRequests=void 0;const i=n(5240),a=n(9103),r=n(7904),o=n(8459);t.processWebRequests=async function(e){var t;if(!(null===(t=e.initiator)||void 0===t?void 0:t.startsWith("http"))||0!==e.frameId)return;const{webRequestsResourceTypesForNavigationEvents:n}=await o.getConfiguration();if(!n.includes(e.type))return;const s=await i.getNavigationEventsStore(),c=a.getTabsManager(),l=await c.get(e.tabId);if(!(l&&l.id&&l.navigationSetId&&l.sessionId))return;const{navigationSetId:u,sessionId:d,id:p}=l;await s.add({setId:u,sessionId:d,url:e.url,tabId:p,timestamp:e.timeStamp,metadata:Object.assign({navigationStage:r.NavigationStage.OnWebRequest},e)})}},9103:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.getTabsManager=void 0;var i=n(1836);Object.defineProperty(t,"getTabsManager",{enumerable:!0,get:function(){return i.getTabsManager}});var a=n(4537);Object.defineProperty(t,"init",{enumerable:!0,get:function(){return a.init}})},4537:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.preRenderedTabShown=t.tabManagerEvents=t.tabsManager=void 0;const a=i(n(398)),r=n(1836),o=n(1326),s=n(6991);if(t.tabManagerEvents=["preRenderedTabShown"],t.preRenderedTabShown=s.createEventWithCallback("preRenderedTabShown"),a.default.tabs){const e=r.getTabsManager();a.default.tabs.onCreated&&a.default.tabs.onCreated.addListener((t=>{t.id&&e.add(t.id,{lastUrl:t.url,bypassDomains:[],isPrerendered:Number.isNaN(t.index)&&-1===t.windowId})})),a.default.tabs.onRemoved&&a.default.tabs.onRemoved.addListener((t=>{e.delete(t)})),a.default.tabs.onReplaced&&a.default.tabs.onReplaced.addListener(((n,i)=>{!async function(e,n,i){const a=await i.getExtendedInfo(n),r=await i.get(e);if(!a||!r)return void o.logger.warn("handleTabsReplacement: tab data is missing",{addedTabData:r,removedTabData:a});const s=r.isPrerendered&&-1!==r.windowId&&r.index>=0?{isPrerendered:!1}:void 0;if(await i.update(e,Object.assign({replacedTabId:n,bypassDomains:a.bypassDomains},s)),s){o.logger.debug("handleTabsReplacement: pre-rendered tab is shown",r);const{url:n}=r.pendingChanges||{};n&&(o.logger.debug("handleTabsReplacement: redirecting tab"),await i.redirect(e,n)),t.preRenderedTabShown.emit({tabId:e})}}(n,i,e)}))}a.default.webNavigation&&a.default.webNavigation.onCreatedNavigationTarget&&a.default.webNavigation.onCreatedNavigationTarget.addListener((e=>{r.getTabsManager().getTabPlimit(e.tabId)((async()=>await async function(e){const{tabId:t,sourceTabId:n}=e,i=r.getTabsManager();await i.update(t,{sourceTabId:n})}(e)))})),t.init=function(){r.getTabsManager()}},1836:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getTabsManager=void 0;const a=i(n(398)),r=n(1276),o=n(1326),s=i(n(165)),c=n(850),l=n(8459);class u{constructor(e){var t,n;this.config=e,this.store=new r.Dexie("tabs","id",2),this.pLimits=new Map(void 0),this.config={deletionDelayMs:null!==(n=null===(t=null==this?void 0:this.config)||void 0===t?void 0:t.deletionDelayMs)&&void 0!==n?n:6e4}}async redirect(e,t){const n=await this.get(e);await((null==n?void 0:n.isPrerendered)?this.update(e,{pendingChanges:{url:t}}):a.default.tabs.update(e,{url:t}))}updateConfig(e){var t;this.config.deletionDelayMs=null!==(t=e.deletionDelayMs)&&void 0!==t?t:this.config.deletionDelayMs}async add(e,t){await this.store.items.put(Object.assign(Object.assign({},t),{id:e}),e);const n=e.toString();this.pLimits.has(n)||this.pLimits.set(n,s.default(1))}async bulkAdd(e){await this.store.items.bulkPut(e);for(const t of e){const e=t.id.toString();this.pLimits.has(e)||this.pLimits.set(e,s.default(1))}}async update(e,t){await this.store.transaction("rw",this.store.items,(async()=>{await this.store.items.update(e,t)||await this.add(e,t)}))}async delete(e){await this.store.items.update(e,{toDelete:!0}),setTimeout((()=>{this.deleteImmediately(e)}),this.config.deletionDelayMs)}async deleteImmediately(e){await this.store.items.delete(e),this.pLimits.delete(e.toString())}async bulkDeleteImmediately(e){await this.store.items.bulkDelete(e);for(const t of e)this.pLimits.delete(t.toString())}async get(e){try{const t=await a.default.tabs.get(e);if(!t)return void await this.store.items.delete(e);const n=await this.getExtendedInfo(e);return Object.assign(Object.assign({},t),n)}catch(t){return void o.logger.warn("Tab manager: failed getting tab",{id:e,error:t})}}async getExtendedInfo(e){try{return await this.store.items.get(e)}catch(t){return void o.logger.warn("Tab manager: failed getting extended tab info",{id:e,error:t})}}async getAllExtendedInfos(){return await this.store.items.toArray()}async getActive(){const[e]=await a.default.tabs.query({active:!0,lastFocusedWindow:!0});if(!e||!e.id)return;const t=await this.store.items.get(e.id);return Object.assign(Object.assign({},e),t)}async getActiveId(){const e=await this.getActive();return null==e?void 0:e.id}async exists(e){try{return!!await a.default.tabs.get(e)}catch(t){return o.logger.warn("Tab manager: failed getting tab",{id:e,error:t}),!1}}async syncTabs(){const e=(await a.default.tabs.query({})).map((e=>e.id)).filter((e=>c.isDefined(e)));await this.syncTabsInternal(e)}async syncTabsInternal(e){await this.store.transaction("rw",this.store.items,(async()=>{const t=await this.getAllExtendedInfos(),n=new Set(t.map((e=>e.id))),i=[];for(const n of t)e.includes(n.id)&&!n.toDelete||i.push(n.id);const a=this.bulkDeleteImmediately(i),r=[];for(const t of e)n.has(t)||(o.logger.warn(`Tab manager: open tab is missing from the tabs storage ${t}`),r.push({id:t}));await Promise.all([a,this.bulkAdd(r)])}))}getTabPlimit(e){const t=this.pLimits.get(e.toString());if(t)return t;o.logger.warn("Tabs manager: plimit should have been found for tab. creating pLimit now.",{tabId:e});const n=s.default(1);return this.pLimits.set(e.toString(),n),n}}let d;function p(){return d||(d=new u({deletionDelayMs:6e4}),d)}t.getTabsManager=p,l.registerGetConfigurationCallback((e=>{const t=p();if(t){const{tabManagerDeletionDelayMs:n}=e;t.updateConfig({deletionDelayMs:n})}}))},5998:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.processAlarmTelemetry=t.processTelemetry=t.init=void 0;var r=n(7734);Object.defineProperty(t,"init",{enumerable:!0,get:function(){return r.init}});var o=n(1044);Object.defineProperty(t,"processTelemetry",{enumerable:!0,get:function(){return o.processTelemetry}});var s=n(7584);Object.defineProperty(t,"processAlarmTelemetry",{enumerable:!0,get:function(){return s.processAlarmTelemetry}}),a(n(9429),t)},7734:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const i=n(8459),a=n(1044);t.init=async function(){const{enableBulkTelemetries:e}=await i.getConfiguration();e&&await a.getTelemetriesBulkDispatcher()}},7584:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processAlarmTelemetry=void 0;const i=n(1276),a=n(1044);t.processAlarmTelemetry=async function(e){const t={category:i.TelemetryCategory.Management,type:i.TelemetryType.Alarm,metadata:e,timestamp:new Date};await a.processTelemetry(t)}},9429:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendUnscannedFilesTelemetry=t.sendFilenameTelemetry=t.sendDownloadConfidenceTelemetry=t.sendFileDownloadMaxFailuresTelemetry=t.sendFileDetectionFailureTelemetry=t.sendMalVerdictTelemetry=t.sendCleanVerdictTelemetry=t.sendFileScanTelemetrySafe=void 0;const i=n(2543),a=n(1276),r=n(8459),o=n(1044),s=n(1326),c=n(8585),l=n(9249),u=n(7095);function d(e,t,n){c.asyncTrySafe("sendFileScanTelemetry",(()=>async function(e,t,n){const i=await async function(e,t){const n={},{shouldSendUrlsInTelemetries:i,sendTelemetryForDownloadUrlHostname:a,telemetriesUrlMaxLength:o}=await r.getConfiguration(),{urls:c}=e.download,{finalUrl:u}=c;try{const e=new URL(u),{protocol:t}=e;n.finalUrlInfo=Object.assign({protocol:t},a&&{hostname:l.getDomainFromUrl(u)})}catch(e){s.logger.debug("getAdditionalData: failed while collecting url data",e)}if(i){const e=Object.fromEntries(Object.entries(c).map((([e,t])=>[e,t.slice(0,o)])));n.urls=e}return t=Object.assign(Object.assign({},t),n)}(t,n),c=function(e,t,n={}){const{download:i,scan:r,configuration:o,timestamps:c,isTimeout:l,detectionInfo:{resourceType:u}}=t,{id:d}=r||{id:void 0},p=Date.now()-new Date(i.startTime).getTime();if(!o)return void s.logger.error("createFileScanTelemetryData: missing configuration",t);const{isInline:f,downloadMechanism:g,attemptedDownloadMechanisms:h}=o,{downloadDuration:m,uploadDuration:v,preScanDuration:y,scanDuration:b}=function(e){return{downloadDuration:(null==e?void 0:e.fetchStart)&&e.fetchEnd?e.fetchEnd-e.fetchStart:void 0,uploadDuration:(null==e?void 0:e.uploadEnd)&&e.uploadStart?e.uploadEnd-e.uploadStart:void 0,preScanDuration:(null==e?void 0:e.preScanEnd)&&e.preScanStart?e.preScanEnd-e.preScanStart:void 0,scanDuration:(null==e?void 0:e.scanEnd)&&e.scanStart?e.scanEnd-e.scanStart:void 0}}(c);return{category:a.TelemetryCategory.Detection,type:e,timestamp:new Date(i.startTime),duration:p,metadata:Object.assign(Object.assign({scanId:d,downloadId:`${i.id}`,fileSize:i.fileSize||i.fetchedFileLength||0,isOriginalFileSize:Boolean(i.fileSize),fileExtension:i.fileExtension.toLowerCase(),isInline:f,timestamps:c,downloadDuration:m,uploadDuration:v,preScanDuration:y,scanDuration:b,statusUpdateMethods:[a.ScanStatusUpdateMethod.Polling],downloadMechanism:g,attemptedDownloadMechanisms:h,resourceType:u},l&&{isTimeout:l}),n)}}(e,t,i);c?(s.logger.debug("download-telemetries: sending file scan telemetry",e,t.download.id,c),await o.processTelemetry(c)):s.logger.warn("sendFileScanTelemetry: something went wrong while creating telemetry",t)}(e,t,n)))}t.sendFileScanTelemetrySafe=d,t.sendCleanVerdictTelemetry=async function({downloadProcessInfo:e,scanType:t,encrypted:n,verdictOrigin:i}){const{verdictOriginsForFileScanCleanTelemetry:o}=await r.getConfiguration();s.logger.debug("handling clean verdict",e,t,n),o.includes(i)&&d(a.TelemetryType.FileScanCompleted,e,{verdict:a.Verdict.Clean,verdictOrigin:i,scanType:t,encrypted:n})},t.sendMalVerdictTelemetry=async function({downloadProcessInfo:e,scanType:t,verdictOrigin:n}){const{verdictOriginsForFileScanMalTelemetry:i}=await r.getConfiguration(),{id:o}=e.download;s.logger.debug("Handling malicious verdict",o,e,t),i.includes(n)&&d(a.TelemetryType.FileScanCompleted,e,{verdict:a.Verdict.Malware,verdictOrigin:n,scanType:t})},t.sendFileDetectionFailureTelemetry=async function(e){const{download:{id:t,fileSize:n,fileExtension:i,urls:{url:c,finalUrl:u,referrer:d}},configuration:p}=e;if(!p)return void s.logger.error("sendFileDetectionFailureTelemetry: missing configuration",e);const f=p.isInline,{firefoxUrlInTelemetryOnFallbackToParallel:g,firefoxFallbackInlineToParallel:h,telemetriesUrlMaxLength:m}=await r.getConfiguration();await o.processTelemetry({category:a.TelemetryCategory.Detection,type:a.TelemetryType.FileDetectionFailure,metadata:{downloadId:`${t}`,fileSize:n,fileExtension:i,finalUrl:g?u.slice(0,m):void 0,url:g?c.slice(0,m):void 0,referrer:g?d.slice(0,m):void 0,inline:f,fellbackToParallel:h,urlDomain:l.getDomainFromUrl(c),referrerDomain:l.getDomainFromUrl(d),finalUrlDomain:l.getDomainFromUrl(u)},timestamp:new Date})},t.sendFileDownloadMaxFailuresTelemetry=async function(e,t){const{isTrackingFullUrlForTelemetryAllowed:n,telemetriesUrlMaxLength:s}=await r.getConfiguration(),c=await u.getDownloadProcessFailuresForUrl(e),d=i.uniqBy(c,u.downloadProcessFailuresReasonUniqueName),p=n?`${e.slice(0,s)}`:l.getDomainFromUrl(e),f={category:a.TelemetryCategory.Detection,type:a.TelemetryType.FileDownloadMaxFailures,timestamp:new Date,metadata:{downloadId:`${t}`,url:p,reasons:d}};await o.processTelemetry(f)},t.sendDownloadConfidenceTelemetry=function(e,t,n,i,r,c){try{o.processTelemetry({category:a.TelemetryCategory.Detection,type:a.TelemetryType.FileDownloadConfidence,metadata:{downloadId:e,domain:l.getDomainFromUrl(t),originalDownloadHeaders:i,extensionDownloadHeaders:r,downloadMechanism:n,headersComparisonResult:c},timestamp:new Date})}catch(e){s.logger.error("sendDownloadConfidenceTelemetry: error while sending telemetry",e)}},t.sendFilenameTelemetry=function(e,t,n,i){const{referrer:r,url:s,finalUrl:c}=e,u=l.getDomainFromUrl(r||s||c),d={category:a.TelemetryCategory.Detection,type:a.TelemetryType.FilenameIdentificationFailure,metadata:{domain:u,downloadId:`${n}`,fileSize:i,mimeType:t},timestamp:new Date};o.processTelemetry(d)},t.sendUnscannedFilesTelemetry=e=>{o.processTelemetry({category:a.TelemetryCategory.Detection,type:a.TelemetryType.AvoidFileDetection,metadata:e,timestamp:new Date})}},1044:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processTelemetry=t.getTelemetriesBulkDispatcher=void 0;const i=n(8459),a=n(3017),r=n(7295),o=n(1326),s=n(611),c=n(3456),l=n(8459),u=n(7584),d=n(4632);let p;async function f(){if(p)return p;const{telemetriesDispatchRetryMS:e,telemetriesDispatchScheduleMS:t,telemetriesDispatchMaxBytes:n,telemetriesDispatchCount:r}=await i.getConfiguration();return p=new c.ScheduledBulkDispatcher({name:"telemetry",dispatchRetryMS:e,dispatchScheduleMS:t,maxDispatchItems:r,maxDispatchSize:n},(async e=>{await a.hmcFetchPost("extensions/telemetries",{telemetries:e})})),p}t.getTelemetriesBulkDispatcher=f,l.registerGetConfigurationCallback((e=>{if(p){const{telemetriesDispatchScheduleMS:t,telemetriesDispatchCount:n,telemetriesDispatchMaxBytes:i,telemetriesDispatchRetryMS:a}=e;p.updateConfig({dispatchScheduleMS:t,maxDispatchItems:n,dispatchRetryMS:a,maxDispatchSize:i})}})),t.processTelemetry=async function(e){try{const{enableTelemetry:t,telemetryTypesBlacklist:n,enableBulkTelemetries:c,telemetriesDispatchMaxBytes:l}=await i.getConfiguration();if(!t||n.includes(e.type))return;const p=await r.getSource(),g=Object.assign({source:p,uniqueId:s.v4()},e);if(c){const e=d.dispatchSize([g]);if(!e||e>l){const t=`Telemtry item is too large to be sent in bulk, type: ${g.type} size: ${null!=e?e:"unknown"}`;return o.logger.warn(t,{telemetry:g,size:e}),void u.processAlarmTelemetry({message:t})}const t=await f();await t.add(g)}else await a.hmcFetchPost("extensions/telemetries",g)}catch(t){o.logger.error("Failed to process extension telemetry",{error:t,data:e})}}},7904:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationStage=void 0,(n=t.NavigationStage||(t.NavigationStage={})).OnBeforeNavigate="onBeforeNavigate",n.OnCommitted="onCommitted",n.OnCompleted="onCompleted",n.OnWebRequest="onWebRequest"},6339:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.UrlLookupChannel=t.Reason=void 0,(i=t.Reason||(t.Reason={})).Phishing="phishing",i.Malcious="malicious",i.Policy="policy",i.EncryptedFile="encryptedFile",i.LargeFile="largeFile",(n=t.UrlLookupChannel||(t.UrlLookupChannel={})).Verdict="verdict",n.Email="email"},7244:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapOrFail=t.mapAndDrop=t.includes=void 0;const i=n(850);t.includes=function(e,t){return e.includes(t)},t.mapAndDrop=function(e,t){const n=[];for(let a=0;a<e.length;a++){const r=t(e[a],a,e);i.isDefined(r)&&n.push(r)}return n},t.mapOrFail=function(e,t){const n=[];for(let a=0;a<e.length;a++){const r=t(e[a],a,e);if(!i.isDefined(r))return;n.push(r)}return n}},6401:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToFile=t.removeDataPrefixFromBase64Url=t.stringToBase64=t.blobToBase64Data=t.UrlToBase64Data=void 0;const i=n(1326);async function a(e){return await new Promise(((t,n)=>{const i=new FileReader;i.onloadend=()=>{var e;return t(null!==(e=i.result)&&void 0!==e?e:"")},i.addEventListener("error",(e=>{n(e)})),i.readAsDataURL(e)}))}t.UrlToBase64Data=async function(e){const t=await fetch(e);if(404===t.status)return"";const n=await t.blob();return await a(n)},t.blobToBase64Data=a,t.stringToBase64=function(e){try{return btoa(unescape(encodeURIComponent(e)))}catch(t){return i.logger.warn("Failed to convert string to base64",e,t),""}},t.removeDataPrefixFromBase64Url=function(e){return e.replace(/^data:[^;]+;base64,/,"")},t.stringToFile=function(e,t){const n=new ArrayBuffer(e.length),i=new Uint8Array(n);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return new File([n],t)}},9698:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.showWebsiteBlockpage=t.showWebsiteDetectionBlockPage=void 0;const a=n(5231),r=n(6339),o=i(n(2543));t.showWebsiteDetectionBlockPage=async function(e,t,n){if(void 0!==extensionSettings.absUrl){const i=o.default.escape(new URL(t).hostname);await a.navigateTabToBlockPage(e,function(e,t="This site",n){const i={absUrl:e,icon:"block",bgColor:"red",titleText:"Dangerous site ahead",contentHtml:`<h4>${t} was blocked.<h4/><p>Our system detected that the ${t} website may try to steal data, harm your device, or negatively affect your browsing experience.\n</p>`},a=n&&s.get(n);return Object.assign(Object.assign({},i),null==a?void 0:a.call(void 0,t))}(extensionSettings.absUrl,i,n))}};const s=new Map([[r.Reason.Policy,e=>({titleText:"Access to this site is blocked",contentHtml:`<h4>${e} was blocked by the Administrator.<h4/><p>Due to the company's browsing policies, ${e} is currently blocked.</p>`})],[r.Reason.Phishing,e=>({bgColor:"red",titleText:"Deceptive site ahead",contentHtml:`<h4>${e} was blocked due to a phishing attempt.<h4/><p>Our system detected that the ${e} website may try to trick you into revealing some of your personal information, such as passwords, phone numbers, or credit cards.</p>`})],[r.Reason.Malcious,e=>({bgColor:"red",titleText:"Dangerous site ahead",contentHtml:`<h4>${e} was blocked.</h4><p>Our system detected that the ${e} website may try to steal data, harm your device, or negatively affect your browsing experience.</p>`})]]);t.showWebsiteBlockpage=async function(e,t){if(!extensionSettings.absUrl)return;const n=o.default.escape(t);await a.navigateTabToBlockPage(e,{absUrl:extensionSettings.absUrl,icon:"block",bgColor:"gray",titleText:"This website is blocked",contentHtml:`<p>Access to "${n}" is blocked by your administrator due to the company's browsing policies.</p>`})}},1477:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.showWebsiteBlockPage=t.showEncryptedFileBlockPage=t.showEncryptedFilePasswordPage=t.getUnscannableFilesConfigurationTexts=t.showDisabledExtensionDueToRiskScoreBlockPage=t.showDisabledExtensionBlockPage=t.showUnscannableBlockPage=t.showFileTypeBlockPage=t.showFileWarningBlockPage=t.showWebsiteDetectionBlockPage=void 0;const a=i(n(398)),r=n(6339),o=n(1025),s=n(1276),c=n(8459),l=n(9103);async function u(e,t){const{enableCustomHtmlPagesService:n}=await c.getConfiguration();return n&&t.set("custom","true"),`${e}&${t.toString()}`}t.showWebsiteDetectionBlockPage=async function(e,t,n,i,a=!1){const c=new URLSearchParams;c.set("url",t),n&&c.set("scanId",n),c.set("blockPageDetectionMode",a?s.BlockPageDetectionMode.Warn:s.BlockPageDetectionMode.Block);const d=await u(function(e){switch(e){case r.Reason.Policy:return o.policyBlockPageUrl;case r.Reason.Phishing:return o.phishingBlockPageUrl;case r.Reason.Malcious:return o.websiteMaliciousBlockPageUrl;default:return o.websiteBlockPageUrl}}(i),c);l.getTabsManager().redirect(e,d)},t.showFileWarningBlockPage=async function(e,t){const n=new URLSearchParams;n.set("fileName",e),n.set("blockPageDetectionMode",t?s.BlockPageDetectionMode.Block:s.BlockPageDetectionMode.Warn);const i=await u(o.fileWarningBlockPageUrl,n);await a.default.tabs.create({url:i})},t.showFileTypeBlockPage=async function(e){const t=new URLSearchParams;t.set("fileName",e);const n=await u(o.fileTypeBlockPageUrl,t);await a.default.tabs.create({url:n})},t.showUnscannableBlockPage=async function(e,t,n){const i=new URLSearchParams;i.set("fileName",e),i.set("reasonText",t),i.set("shouldReplaceMessageBody",n?"0":"1");const r=await u(o.unscannableFileBlockPageUrl,i);await a.default.tabs.create({url:r})},t.showDisabledExtensionBlockPage=async function(e,t){const n=new URLSearchParams;n.set("extensionDisplayName",e),n.set("isSuccessfulDisabling",t.toString());const i=await u(o.disabledExtensionBlockPageUrl,n);await a.default.tabs.create({url:i})},t.showDisabledExtensionDueToRiskScoreBlockPage=async function(e,t,n){const i=new URLSearchParams;i.set("extensionDisplayName",e),i.set("riskLevel",t||""),i.set("isSuccessfulDisabling",n.toString());const r=await u(o.disabledExtensionDueToRiskScoreBlockPage,i);await a.default.tabs.create({url:r})},t.getUnscannableFilesConfigurationTexts=function(e,t){return{text:{[r.Reason.EncryptedFile]:"is encrypted",[r.Reason.LargeFile]:t||"is too large"}[e],shouldReplaceMessageBody:!!t}},t.showEncryptedFilePasswordPage=async function(e,t){const n=new URLSearchParams({downloadId:`${e}`,filename:`${t}`}),i=await u(o.encryptedFileGetPasswordPageUrl,n);await a.default.tabs.create({url:i})},t.showEncryptedFileBlockPage=async function(e){const t=new URLSearchParams;t.set("downloadId",`${e}`);const n=await u(o.encryptedFileBlockPageUrl,t);await a.default.tabs.create({url:n})},t.showWebsiteBlockPage=async function({domain:e,tabId:t,url:n,detectionMode:i,category:a,customBlockMessage:r}){const s=new URLSearchParams;s.set("dom",e),s.set("url",n),s.set("blockPageDetectionMode",i),a&&s.set("categories",a),r&&s.set("customMessage",r);const c=await u(o.managedWebsiteBlockPageUrl,s);l.getTabsManager().redirect(t,c)}},8676:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isChromium=t.getBrowserBrandVersion=t.parseUserAgent=void 0;const a=n(1326),r=i(n(7232)),o=n(1276);function s(e){const t=new r.default(e).getBrowser();return!t||void 0!==t.version&&void 0!==t.name||a.logger.debug("parseUserAgent: version or name is undefined",t),{brand:t.name,version:t.version}}t.parseUserAgent=s,t.getBrowserBrandVersion=function(){return s(navigator.userAgent)};const c=[o.BrowserName.Chrome,o.BrowserName.Edge];t.isChromium=function(e){return c.includes(e)}},7085:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callAsyncOnce=void 0;class n{constructor(e){this.asyncFunction=e,this.promiseMap=new Map}async call(...e){const t=JSON.stringify(e),n=this.promiseMap.get(t);if(n)return await n;const i=(async()=>{try{return await this.asyncFunction(...e)}finally{this.promiseMap.delete(t)}})();return this.promiseMap.set(t,i),i}}t.callAsyncOnce=function(e){const t=new n(e);return async(...e)=>await t.call(...e)}},4882:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCategories=t.GetCategoriesMode=t.hasCategoryWebsiteRules=t.getActiveTabCategories=t.getTabCategories=t.safeFetchCategories=t.getDomainCategories=void 0;const i=n(8438),a=n(3097),r=n(1326),o=n(9103),s=n(7085),c=n(8459),l=n(9249),u=n(8459),d=n(345),p=n(1276);let f;async function g(e,n){const i=o.getTabsManager(),a=await i.get(e);if(!a)return void r.logger.error("Could not get tab categories, no tab info found");if(!a.lastUrl)return void r.logger.warn("Could not get tab categories, no tab url found");const s=l.getDomainFromUrl(a.lastUrl);if(s)return await t.getDomainCategories(s,n);r.logger.warn("Could not get tab categories, domain could not be parsed")}async function h(e){const t=o.getTabsManager(),n=await t.getActive();if(n&&n.id)return g(n.id,e);r.logger.error("Could not get active tab categories, no active tab found")}async function m(){const{dlpRules:e}=await c.getConfiguration();return e.some((e=>e.kind===p.DlpRuleKind.Category))}var v;u.registerGetConfigurationCallback((e=>{const{categoriesCacheSize:t,categoriesCacheTtl:n}=e;if(f){const e=f.getCacheProperties();e.maxCount===t&&e.maxAge===n||(f=new a.LimitedCache("categories",void 0,t,n))}})),t.getDomainCategories=s.callAsyncOnce((async function(e,t){if(!await async function(e,t){const{validWebsiteCategorizationDomainRegex:n,websiteCategorizationDomainsSkipList:i}=await c.getConfiguration();return new RegExp(n).test(e)?d.doesMatchListWildcard(e,i)?(r.logger.warn("Not fetching categories, domain is in skip list.",{domain:e}),!1):!(!await m()&&t===v.WebsiteRulesCheck||!(i.length>0)&&t===v.WhitelistCheck):(r.logger.warn("Not fetching categories, domain is not valid for categorization.",{domain:e}),!1)}(e,t))return;const{activationStatus:n}=await c.getConfiguration(),o=await async function(){if(f)return f;const{categoriesCacheSize:e,categoriesCacheTtl:t}=await c.getConfiguration();return f=new a.LimitedCache("categories",void 0,e,t),f}(),s=await o.get(e);if(s)return r.logger.debug("Got categories from cache",{domain:e,categories:s}),s;const l=await i.getCategories({url:e,cacheOnly:n===p.ActivationStatus.ActiveForEmail});if(!l)return void r.logger.warn("Could not get categories, response is undefined");const u=l.categories.reduce(((e,t)=>(e[t.iabCategoryId]=t.title,e)),{});return await o.set(e,u),r.logger.debug("Got categories",{domain:e,categories:u}),u})),t.safeFetchCategories=async function(e){try{await t.getDomainCategories(e)}catch(t){return void r.logger.warn("safeFetchCategories: Can't categorize domain.",t,{domain:e})}},t.getTabCategories=g,t.getActiveTabCategories=h,t.hasCategoryWebsiteRules=m,function(e){e.WebsiteRulesCheck="websiteRulesCheck",e.WhitelistCheck="whitelistCheck"}(v=t.GetCategoriesMode||(t.GetCategoriesMode={})),t.getCategories=async function({domain:e,tabId:n,mode:i=v.WebsiteRulesCheck}){try{return e?await t.getDomainCategories(e,i):n?g(n,i):await h(i)}catch(t){r.logger.warn("Could not get categories",{domain:e,tabId:n},t)}}},1025:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.commonWebRequestResourceTypes=t.downloadStoredFileUrl=t.localLogsDownloadUrl=t.downloadManagerPageUrl=t.signInRedirectingPageUrl=t.extensionSignInPageUrl=t.encryptedFileBlockPageUrl=t.encryptedFileGetPasswordPageUrl=t.disabledExtensionDueToRiskScoreBlockPage=t.disabledExtensionBlockPageUrl=t.unscannableFileBlockPageUrl=t.fileTypeBlockPageUrl=t.fileWarningBlockPageUrl=t.phishingBlockPageUrl=t.policyBlockPageUrl=t.websiteMaliciousBlockPageUrl=t.websiteBlockPageUrl=t.managedWebsiteBlockPageUrl=t.extensionBlobUrlPrefix=t.extensionBaseUrl=void 0;const a=i(n(398)),r=n(1276);t.extensionBaseUrl=a.default.runtime.getURL(""),t.extensionBlobUrlPrefix=`blob:${t.extensionBaseUrl}`,t.managedWebsiteBlockPageUrl=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.Block}`,t.websiteBlockPageUrl=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.WebsiteBlock}`,t.websiteMaliciousBlockPageUrl=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.WebsiteMaliciousBlock}`,t.policyBlockPageUrl=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.PolicyBlock}`,t.phishingBlockPageUrl=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.PhishingBlock}`,t.fileWarningBlockPageUrl=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.FileWarning}`,t.fileTypeBlockPageUrl=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.FileTypeBlock}`,t.unscannableFileBlockPageUrl=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.UnscannableFileBlockPage}`,t.disabledExtensionBlockPageUrl=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.DisabledExtensionBlockPage}`,t.disabledExtensionDueToRiskScoreBlockPage=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.DisabledExtensionDueToRiskScoreBlockPage}`,t.encryptedFileGetPasswordPageUrl=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.PasswordInputPage}`,t.encryptedFileBlockPageUrl=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.EncryptedFileBlockPage}`,t.extensionSignInPageUrl=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.SignIn}`,t.signInRedirectingPageUrl=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.SignInRedirectingPage}`,t.downloadManagerPageUrl=`${t.extensionBaseUrl}react-pages/index.html?page=${r.PageType.DownloadManagerPage}`,t.localLogsDownloadUrl=`${t.extensionBaseUrl}react-pages/index.html?page=download-local-logs`,t.downloadStoredFileUrl=`${t.extensionBaseUrl}react-pages/index.html?page=download-stored-file`,t.commonWebRequestResourceTypes=["main_frame","sub_frame","stylesheet","script","image","font","object","xmlhttprequest","ping","csp_report","media","websocket","other"]},2481:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContentScriptLogger=t.getExtensionSettings=t.getConfigurationFromBackground=void 0;const a=i(n(398)),r=n(1276);async function o(){const{extensionSettings:e}=await a.default.runtime.sendMessage({kind:r.MessageKind.GetExtensionSettings});return e}t.getConfigurationFromBackground=async function(){const{configuration:e}=await a.default.runtime.sendMessage({kind:r.MessageKind.GetConfiguration});return e},t.getExtensionSettings=o,t.ContentScriptLogger=class{constructor(e){this.contentScriptName=e,this.shouldLogToConsole=!1,this.setShouldLogToConsole()}async setShouldLogToConsole(){const{contentScriptConsoleLogs:e}=await o();this.shouldLogToConsole=e}writeLog(e,t,...n){this.port||(this.port=a.default.runtime.connect({name:r.PortName.Logger}),this.port.onDisconnect.addListener((()=>{this.port=void 0})));try{this.port.postMessage({kind:r.MessageKind.WriteLog,log:e,level:t,optionalParameters:n})}catch(e){}}error(e,...t){this.shouldLogToConsole&&console.error(e,...t),this.writeLog(e,"error",...t,"content-script-log",this.contentScriptName)}warn(e,...t){this.shouldLogToConsole&&console.warn(e,...t),this.writeLog(e,"warn",...t,"content-script-log",this.contentScriptName)}info(e,...t){this.shouldLogToConsole&&console.info(e,...t),this.writeLog(e,"info",...t,"content-script-log",this.contentScriptName)}debug(e,...t){this.shouldLogToConsole&&console.debug(e,...t),this.writeLog(e,"debug",...t,"content-script-log",this.contentScriptName)}}},7450:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceName=void 0;const i=n(1005);t.getDeviceName=async function(){const{DeviceName:e}=await i.safeStorageManagedGet(["DeviceName"]);return e}},3671:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DexieLimitedCache=void 0;const i=n(1276),a=n(850);t.DexieLimitedCache=class{constructor(e,t){this.options=t,this.store=new i.Dexie(e,"key, value, timestamp, ttl")}async get(e){this.options.shouldEvictExpired&&await this.checkAndEvictExpired();const t=await this.store.items.get(e);if(t)return await this.store.items.update(e,{timestamp:Date.now()}),t.value}async bulkGet(e){return await this.store.transaction("rw",this.store.items,(async()=>{this.options.shouldEvictExpired&&await this.checkAndEvictExpired();const t=(await this.store.items.bulkGet(e)).filter(a.isDefined);if(!t)return[];const n=t.map((e=>Object.assign(Object.assign({},e),{timestamp:Date.now()}))),i=n.map((e=>this.store.items.put(e,e.key)));return await Promise.all(i),n.map((e=>e.value))}))}async getAllEntries(){return await this.checkAndEvictExpired(),await this.store.items.toArray()}async getAll(){return(await this.getAllEntries()).map((e=>e.value))}async set(e,t,n){await this.store.transaction("rw",this.store.items,(async()=>{const{maxAge:i,maxCount:a}=this.options,r=(null==n?void 0:n.ttl)||i;await this.size()>=a&&await this.evictLRU();const o=Date.now();await this.store.items.put({key:e,value:t,timestamp:o,ttl:r+o},e)}))}async update(e,t){await this.store.transaction("rw",this.store.items,(async()=>{const n=await this.store.items.get(e);if(!n)return;const i=Object.assign(Object.assign({},n),{value:Object.assign(Object.assign({},n.value),t)});await this.store.items.update(e,i)}))}async delete(e){await this.store.items.delete(e)}async clear(){await this.store.items.clear()}getCacheOptions(){return this.options}async size(){return await this.store.items.count()}async evictLRU(){const e=await this.store.items.orderBy("timestamp").first();e&&await this.store.items.delete(e.key)}async checkAndEvictExpired(){const e=Date.now();await this.store.items.where("ttl").belowOrEqual(e).delete()}}},4632:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchSize=void 0;const i=n(1326);t.dispatchSize=function(e){try{return(new TextEncoder).encode(JSON.stringify(e)).byteLength}catch(e){return void i.logger.error("Failed to calculate dispatch size.",e)}}},9806:(e,t)=>{"use strict";function n(e,t,n="case-insensitive"){return"case-insensitive"===n&&(e=e.toLowerCase(),t=t.toLowerCase()),t.startsWith("*.")?e.endsWith(t.slice(1))||e===t.slice(2):t.startsWith("*")?e.endsWith(t.slice(1)):e===t||e===`www.${t}`}function i(e,t){return new RegExp(t).test(e)}function a(e,t){return t.some((t=>n(e,t)))}Object.defineProperty(t,"__esModule",{value:!0}),t.doesMatchListRegex=t.anyMatchListWildcard=t.doesMatchListWildcard=t.doesMatchRegex=t.doesMatchWildcard=void 0,t.doesMatchWildcard=n,t.doesMatchRegex=i,t.doesMatchListWildcard=a,t.anyMatchListWildcard=function(e,t){return e.some((e=>a(e,t)))},t.doesMatchListRegex=function(e,t){return t.some((t=>i(e,t)))}},345:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.doesMatchDomain=void 0;const o=r(n(5163));a(n(9806),t),t.doesMatchDomain=function(e,t){const n=o.default(t.replace(/^(www\.)/,""));return new RegExp(`^.+[.]${n}$|^${n}$`).test(e)}},315:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEdgeNewTab=void 0;const i=n(1276);t.isEdgeNewTab=function(e){return i.browserName===i.BrowserName.Edge&&e.startsWith("https://ntp.msn.com")}},2739:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEndpointInfo=void 0;const i=n(8459),a=n(772),r=n(8676),o=n(7450),s=n(2905);let c=!1;i.registerGetConfigurationCallback((e=>{c=e.enableDeviceName}),[i.ConfigurationEvent.Updated,i.ConfigurationEvent.NotModified]),t.getEndpointInfo=async function(){const e=r.getBrowserBrandVersion(),t=await s.getPlatformInfo(),n=await a.getExtensionId(),i=c?await o.getDeviceName():void 0;return Object.assign(Object.assign({extensionId:n,userAgent:navigator.userAgent,platform:t.os},e&&{browserName:e.brand,browserVersion:e.version}),{deviceName:i})}},6686:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnumOrUndefined=t.parseEnumOrDefault=t.parseEnumValue=void 0,t.parseEnumValue=function(e,t){if(!Object.values(e).includes(t))throw new Error("Unknown value for type");return t},t.parseEnumOrDefault=function(e,t,n){return Object.values(e).includes(t)?t:n},t.parseEnumOrUndefined=function(e,t){if(Object.values(e).includes(t))return t}},6991:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createEventWithCallback=void 0;const a=i(n(7007));t.createEventWithCallback=function(e){const t=new a.default;return{addListener:n=>{t.on(e,n)},removeListener:n=>{t.off(e,n)},hasListener:n=>t.listeners(e).includes(n),emit:n=>{t.emit(e,n)}}}},5347:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baseHubUrls=t.extensionSettings=void 0;const n=globalThis.importScripts;"function"==typeof n&&n("../env.js"),t.extensionSettings=Object.assign({hmcUrl:"https://hub.hysolate.com",absUrl:"https://hub.abs.perception-point.io",enableConsoleLogs:!1,contentScriptConsoleLogs:!1,enableDownloadLocalLogsBeforeLogin:!0,enableFactoryResetBeforeLogin:!1,enableIDBLogs:!0,excludedLogFields:["favIconBase64","screenshot","favicon","base64Data","shellCodeDetectionPatterns"]},globalThis.extensionSettings),t.baseHubUrls=[t.extensionSettings.absUrl,t.extensionSettings.hmcUrl]},8824:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterObjectFields=void 0,t.filterObjectFields=(e,t)=>Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]})),{})},5198:(e,t)=>{"use strict";function n(e){return"string"==typeof e?function(e){const t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}(e).buffer:e}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateHashString=void 0,t.calculateHashString=async function(e,t,i,a){const r="SHA-256"===i?256:512,o=n(e),s={name:"PBKDF2",salt:n(t),iterations:a,hash:{name:i}},c=await crypto.subtle.importKey("raw",o,{name:"PBKDF2"},!1,["deriveBits"]),l=await crypto.subtle.deriveBits(s,c,r);return u=new Uint8Array(l).buffer,[...new Uint8Array(u)].map((e=>e.toString(16).padStart(2,"0"))).join("");var u}},5029:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseContentLength=t.contentLengthHeaderName=t.parseMimeType=t.parseContentDisposition=t.getHasAttachment=t.getFilename=t.contentDispositionHeaderName=t.EmptyContentDisposition=t.SimpleContentDispositionHeader=t.getHeaderValue=void 0;const i=n(474);function a(e,t){const n=e.find((e=>e.name.toLowerCase()===t.toLowerCase()));return null==n?void 0:n.value}t.getHeaderValue=a;class r{constructor(e){this.raw=e;const[t,n]=e.split(";",2);this.type=t.trim().toLowerCase(),this.fields=n.split(";").reduce(((e,t)=>{const[n,i]=t.split("=",2);return e[n.trim().toLowerCase()]=i.trim().replace(/^"|"$/g,""),e}),{})}get isAttachment(){return"attachment"===this.type}get filename(){var e;return null!==(e=this.fields.filename)&&void 0!==e?e:this.getSpecialFilename()}get name(){return this.fields.name}toString(){return this.raw}getSpecialFilename(){const e=this.fields["filename*"];return i.whenSome(e,(e=>{var t;const n=e.split("'");if(3===n.length){const i=n[0];return n[1],null!==(t=function(e,t,n){try{const t=new Uint8Array(function*(e){for(let n=0;n<e.length;n++){if("%"===e[n]){yield Number.parseInt(e.substr(n+1,2),16),n+=2;continue}const i=e.codePointAt(n);if(!i||(!((t=i)>32&&t<=126)||[42,39,37].includes(t)))throw new Error("invalid input");yield i}var t}(n));return new TextDecoder(e).decode(t)}catch(e){return}}(i,0,n[2]))&&void 0!==t?t:e}return e}))}}function o({headers:e,contentDispositionHeader:n}){const i=n||e&&a(e,t.contentDispositionHeaderName);return i?new r(i):t.EmptyContentDisposition}t.SimpleContentDispositionHeader=r,t.EmptyContentDisposition={type:"other",fields:{},isAttachment:!1},t.contentDispositionHeaderName="content-disposition",t.getFilename=function({url:e,headers:t,contentDispositionHeader:n}){return o({headers:t,contentDispositionHeader:n}).filename||function(e){const t=new URL(e).pathname.split("/").filter((e=>Boolean(e))).pop(),n=decodeURIComponent(t||"");return(null==n?void 0:n.includes("."))?n:void 0}(e)},t.getHasAttachment=function({headers:e,contentDispositionHeader:t}){return o({headers:e,contentDispositionHeader:t}).isAttachment},t.parseContentDisposition=o,t.parseMimeType=function({headers:e,contentTypeHeader:t}){const n=t||e&&a(e,"content-type");if(n){const[e,...t]=n.split(";").map((e=>e.trim()));return e}},t.contentLengthHeaderName="content-length",t.parseContentLength=function(e){const n=a(e,t.contentLengthHeaderName);if(!n)return;const i=Number.parseInt(n,10);return Number.isNaN(i)?void 0:i}},3566:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.isHttpError=t.HttpError=t.isStatusAServerError=t.isStatusOk=t.HttpStatusCode=void 0,(n=t.HttpStatusCode||(t.HttpStatusCode={}))[n.Ok=200]="Ok",n[n.Accepted=202]="Accepted",n[n.NotModified=304]="NotModified",n[n.Unauthorized=401]="Unauthorized",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.InternalServerError=500]="InternalServerError",n[n.BadGateway=502]="BadGateway",t.isStatusOk=function(e){return 200<=e&&e<400},t.isStatusAServerError=function(e){return e>=500};class i extends Error{constructor(e,t,n){super(e),this.status=t,this.subpath=n}}t.HttpError=i,t.isHttpError=function(e){return Boolean(e&&e.status)}},8354:function(e,t,n){"use strict";var i=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,a){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,a,(t=e[n](t)).done,t.value)}))}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.cookieChangedAtHubCallback=t.getCookieValueFromHub=void 0;const r=a(n(398)),o=n(5347),s=n(1326);t.getCookieValueFromHub=async function({name:e,path:t}){var n,a;if(r.default.cookies)try{try{for(var c,l=i(o.baseHubUrls);!(c=await l.next()).done;){const n=c.value,i=await r.default.cookies.get({name:e,url:`${n}${t}`}),a=null==i?void 0:i.value;if(a)return a}}catch(e){n={error:e}}finally{try{c&&!c.done&&(a=l.return)&&await a.call(l)}finally{if(n)throw n.error}}}catch(e){s.logger.error("getCookieValueFromHub: getting cookie failed",e)}};const c=new Set(o.baseHubUrls.map((e=>new URL(e).hostname)));t.cookieChangedAtHubCallback=function(e){return t=>{c.has(t.cookie.domain)&&e(t)}}},5310:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hubFetch=t.hubUrl=void 0;const i=n(5347);function a(e=""){return`${i.extensionSettings.absUrl}${e}`}t.hubUrl=a,t.hubFetch=async function(e,t){return await fetch(a(e),t)}},7717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImmutableArrayKeyMap=void 0,t.ImmutableArrayKeyMap=class{constructor(e){this.internalMap=new Map;for(const[t,n]of e.entries()){const e=this.arrayKeyToString(t);this.internalMap.set(e,n)}}arrayKeyToString(e){return Array.isArray(e)?e.map((e=>String(e))).join(","):String(e)}get(e){const t=this.arrayKeyToString(e);return this.internalMap.get(t)}}},8866:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getInstallationId=void 0;const a=i(n(165)),r=n(611),o=i(n(398)),s=a.default(1);let c;t.getInstallationId=()=>s((async()=>{if(c)return c;const{installationId:e}=await o.default.storage.local.get(["installationId"]);if(e)return c=e,e;const t=r.v4();return await o.default.storage.local.set({installationId:t}),c=t,t}))},850:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDefined=void 0,t.isDefined=function(e){return void 0!==e}},7848:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getLastUser=void 0;const a=i(n(398)),r=n(8459),o=["lastUser","remoteDeploymentDomain","remoteDeploymentEmail","remoteDeploymentUsername"],s=/:[\da-z]{6}$/,c=["@remote-deployment.perception-point.io","@unattended-sign-in.perception-point.io"];t.getLastUser=async function(){const{showSuffixOfRemoteDeploymentName:e}=await r.getConfiguration(),t=await a.default.storage.local.get(o),{lastUser:n,remoteDeploymentDomain:i,remoteDeploymentEmail:l,remoteDeploymentUsername:u}=t;if(!((d=n)&&c.some((e=>d.endsWith(e)))&&u))return n;var d;if(l)return l;const p=e?u:u.replace(s,"");return i&&"x"!==i?`${i}\\${p}`:p}},3097:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LimitedCache=void 0;const a=i(n(165)),r=i(n(9749)),o=i(n(398)),s=a.default(1);async function c(e){var t;const n=null!==(t=(await o.default.storage.local.get(e))[e])&&void 0!==t?t:[];return Array.isArray(n[0])?n:[]}function l(e,t){return o.default.storage.local.set({[e]:t.dump()})}t.LimitedCache=class{constructor(e,t,n=1e3,i=6048e5){this.storageKey=e,this.defaultValue=t,this.maxCount=n,this.maxAge=i,this.cache=new r.default({max:n,ttl:i})}async getAllEntries(){return s((async()=>(this.cache.load(await c(this.storageKey)),[...this.cache.entries()])))}async getAll(){return s((async()=>(this.cache.load(await c(this.storageKey)),[...this.cache.values()])))}async get(e){return s((async()=>{this.cache.load(await c(this.storageKey));const t=this.cache.get(e);return void 0===t?(await l(this.storageKey,this.cache),this.defaultValue):t}))}async set(e,t,n){return s((async()=>{this.cache.load(await c(this.storageKey)),this.cache.set(e,t,n),await l(this.storageKey,this.cache)}))}async delete(e){return s((async()=>{this.cache.load(await c(this.storageKey));const t=this.cache.delete(e);return await l(this.storageKey,this.cache),t}))}async deleteKeys(e){return s((async()=>{this.cache.load(await c(this.storageKey));for(const t of e)this.cache.delete(t);await l(this.storageKey,this.cache)}))}async purgeStale(){return s((async()=>{this.cache.load(await c(this.storageKey)),this.cache.purgeStale(),await l(this.storageKey,this.cache)}))}async has(e,t){return s((async()=>{this.cache.load(await c(this.storageKey));const n=this.cache.has(e,t);return n||(this.cache.delete(e),await l(this.storageKey,this.cache)),n}))}getCacheProperties(){return{maxCount:this.maxCount,maxAge:this.maxAge}}}},2039:function(e,t,n){"use strict";var i=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,a){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,a,(t=e[n](t)).done,t.value)}))}}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkLocalWhitelists=void 0;const a=n(8459),r=n(4882),o=n(9806),s=n(1326);t.checkLocalWhitelists=async function(e){var t,n;const{localDomainWhitelist:c,localCategoriesWhitelist:l}=await a.getConfiguration();s.logger.debug("Checking local whitelists",{localDomainWhitelist:c,localCategoriesWhitelist:l,domains:e});try{for(var u,d=i(e);!(u=await d.next()).done;){const e=u.value;if(o.doesMatchListWildcard(e,c))return{isWhitelisted:!0,domain:e};if(0===l.length)continue;const t=await r.getCategories({domain:e,mode:r.GetCategoriesMode.WhitelistCheck});if(t)for(const n of l){const i=t[n];if(i)return{isWhitelisted:!0,domain:e,category:i}}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=d.return)&&await n.call(d)}finally{if(t)throw t.error}}return{isWhitelisted:!1}}},1326:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.logLevels=void 0;const i=n(1276),a=n(5347);t.logLevels=["error","warn","info","debug"];const r=[];a.extensionSettings.enableConsoleLogs&&r.push(new i.ConsoleSink({error:"error",warn:"warn",info:"info",debug:"debug"})),a.extensionSettings.enableIDBLogs&&r.push(new i.IDBSink({excludedLogFields:a.extensionSettings.excludedLogFields})),t.logger=i.loggerFactory(t.logLevels,new i.CompositeSink(r))},2407:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestBodyToFormData=void 0;const i=n(6401),a=n(2543);t.requestBodyToFormData=function({body:e,base64FileFieldNames:t,stringFileFieldNames:n}){const r=new FormData;for(const[o,s]of Object.entries(e)){if(a.isUndefined(s))continue;const c=null==t?void 0:t.includes(o);if(c||(null==n?void 0:n.includes(o))){const t=e[o],n=i.stringToFile(c?atob(t):t,o);if(a.isUndefined(n))continue;r.append(o,n)}else r.append(o,"string"==typeof s?s:JSON.stringify(s))}return r}},9532:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sendNativeMessageBlindly=t.NativeMessageType=void 0;const a=i(n(398));var r;(r=t.NativeMessageType||(t.NativeMessageType={})).SaveLogs="save_logs",r.GetManagedKeys="get_managed_keys",t.sendNativeMessageBlindly=(e,t)=>a.default.runtime.sendNativeMessage(e,t)},2005:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.niceTimeout=t.noopCancelable=void 0,t.noopCancelable={cancel(){}},t.niceTimeout=function(e,t){const n=setTimeout(e,t);return{cancel(){clearTimeout(n)}}}},5761:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.changePageInfo=t.updatePageInfo=t.getPageInfo=void 0;const a=i(n(398)),r=n(1276),o=n(1326);t.getPageInfo=async function(e){if(void 0!==a.default.tabs.get(e))try{const t=await a.default.tabs.sendMessage(e,{kind:r.MessageKind.GetPageInfo});return o.logger.info("getPageInfo: ",{tabId:e,info:t.info}),t.info}catch(e){o.logger.error("getPageInfo: ",e)}else o.logger.warn("getPageInfo: tab not found",{id:e})},t.updatePageInfo=async function(e,t){if(void 0!==a.default.tabs.get(e))try{const n=await a.default.tabs.sendMessage(e,{kind:r.MessageKind.UpdatePageInfo,update:t});return o.logger.info("updatePageInfo: ",{tabId:e,update:t,result:n}),n.info}catch(e){o.logger.error("updatePageInfo: ",e)}else o.logger.warn("updatePageInfo: tab not found",{tabId:e})},t.changePageInfo=async function(e,t,n){if(void 0!==a.default.tabs.get(e))try{const i=await a.default.tabs.sendMessage(e,{kind:r.MessageKind.ChangePageInfo,changeAction:t,key:n});return o.logger.info("changePageInfo: ",{tabId:e,changeAction:t,key:n,info:i.info}),i.info}catch(e){o.logger.error("changePageInfo: ",e)}else o.logger.warn("changePageInfo: tab not found",{tabId:e})}},5697:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getFileTypesInfo=t.basename=void 0;const o=r(n(6049)),s=n(1326),c=n(8459),l=navigator.userAgent.includes("Win")?"\\":"/";t.basename=function(e){return e.split(l).slice(-1)[0]},t.getFileTypesInfo=async function(e,t){const{validFileExtensions:n}=await c.getConfiguration();s.logger.info("getFileTypesInfo:",{filename:e,mimeTypeFromDownload:t});const i=e.split("."),a=(i.length>1&&i.pop()||"").toLowerCase(),r=o.lookup(a);if(Boolean(r)||n.includes(a)){const e="string"==typeof r?r:t||"";return s.logger.info("getFileTypesInfo: returning file types info from file name",{fileExtension:a,mimeType:e}),{fileExtension:a,mimeType:e}}{const e=t&&o.extension(t)||"";return s.logger.info("getFileTypesInfo: returning file types info from mime type",e),{fileExtension:e,mimeType:t||""}}}},2905:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getPlatformInfo=void 0;const a=i(n(398));t.getPlatformInfo=async function(){const{os:e,arch:t}=await a.default.runtime.getPlatformInfo();return{os:e,arch:t}}},8731:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasProperty=void 0,t.hasProperty=function(e,t){return Reflect.has(e,t)}},3456:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScheduledBulkDispatcher=void 0;const a=n(1326),r=n(1276),o=n(2889),s=i(n(2328)),c=n(4632);t.ScheduledBulkDispatcher=class{constructor(e,t){this.config=e,this.dispatch=t,this.event=new o.SynchronizationEvent,this.running=!0,this.store=new r.Dexie(e.name,"uniqueId, timestamp"),this.consumerPromise=this.consumerLoop(),this.config.maxDispatchSize=this.config.maxDispatchSize>2?this.config.maxDispatchSize:2}async add(e){try{a.logger.info(`${this.config.name} bulk dispatcher: Adding item`,{item:e}),await this.store.items.add(e,e.uniqueId)}catch(e){a.logger.error(`${this.config.name} bulk dispatcher: Failed to add item to queue.`,e)}await this.notifyIfNeeded()}updateConfig(e){var t,n,i;this.config.dispatchScheduleMS=null!==(t=e.dispatchScheduleMS)&&void 0!==t?t:this.config.dispatchScheduleMS,this.config.maxDispatchItems=null!==(n=e.maxDispatchItems)&&void 0!==n?n:this.config.maxDispatchItems,this.config.maxDispatchSize=null!==(i=e.maxDispatchSize&&e.maxDispatchSize>2?e.maxDispatchSize:this.config.maxDispatchSize)&&void 0!==i?i:this.config.maxDispatchSize,this.notifyIfNeeded()}async stop(){this.running=!1,this.event.set(),await this.consumerPromise}async notifyIfNeeded(){try{await this.store.items.count()>=this.config.maxDispatchItems&&this.event.set()}catch(e){a.logger.warn(`${this.config.name} bulk dispatcher: Failed to check if queue is full.`,e)}}async consumerLoop(){try{for(;this.running;){const e=await this.consumerIteration();await(e?this.event.wait(this.config.dispatchScheduleMS):s.default(this.config.dispatchRetryMS))}}catch(e){a.logger.error(`${this.config.name} bulk dispatcher: consumer loop failed.`,e)}}async consumerIteration(){var e;const t=await this.store.items.orderBy("timestamp").limit(this.config.maxDispatchItems).toArray();if(0===t.length)return this.event.clear(),!0;let n=[...t];for(;(null!==(e=c.dispatchSize(n))&&void 0!==e?e:0)>this.config.maxDispatchSize&&n.length>1;)n=n.slice(0,Math.floor(n.length/2));try{await this.dispatch(n)}catch(e){return a.logger.warn(`${this.config.name} bulk dispatcher: Failed to dispatch items.`,e),!1}try{await this.store.items.bulkDelete(n.map((e=>e.uniqueId)))}catch(e){return a.logger.warn(`${this.config.name} bulk dispatcher: Failed to delete dispatched items.`,e),!1}return await this.store.items.count()<this.config.maxDispatchItems&&this.event.clear(),!0}}},7391:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detectSensitiveData=void 0;const i=n(3097),a=n(1326),r=n(8459),o=n(8459),s=n(1371),c=n(850);let l;const u="sdd-types";o.registerGetConfigurationCallback((e=>{const{sensitiveDataCacheSize:t,sensitiveDataCacheTtl:n}=e;if(!l)return;const a=l.getCacheProperties();a.maxCount===t&&a.maxAge===n||(l=new i.LimitedCache(u,void 0,t,n))})),t.detectSensitiveData=async function(e){try{const{sensitiveDataDetectionEnabledEntityTypes:t,sensitiveDataEntityTypeToMinScoreThreshold:n,sensitiveDataDetectionMinScoreThreshold:o}=await r.getConfiguration(),d=await async function(){if(l)return l;const{sensitiveDataCacheSize:e,sensitiveDataCacheTtl:t}=await r.getConfiguration();return l=new i.LimitedCache(u,void 0,e,t),l}(),p=await d.get(e);if(p)return a.logger.debug("sensitive data detection: Got sensitive data types from cache",{input:e,sensitiveDataTypes:p}),{sensitiveDataTypes:p};const f=await s.detectSensitiveData({text:e});if(a.logger.debug("Got sensitive data API response",{input:e,response:f}),!f)return void a.logger.warn("Could not detect sensitive data, response is undefined");if(f.ignore)return{sensitiveDataTypes:[],ignore:!0};const g=[...new Set([...f.apiResponseItems.filter((e=>{var i,a,r;const s=e.entity_type,c=t.includes(s),l=null!==(a=null!==(i=null==n?void 0:n[s])&&void 0!==i?i:o)&&void 0!==a?a:1;return(null!==(r=e.max_score)&&void 0!==r?r:1)>=l&&c})).map((e=>e.entity_type)).filter(c.isDefined)])];return g.length>0&&await d.set(e,g),a.logger.debug("sensitive data detection: Got sensitive data response",{input:e,sensitiveDataTypes:g}),{sensitiveDataTypes:g}}catch(t){a.logger.warn("Could not get sensitive data",{input:e},t)}}},2889:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SynchronizationEvent=void 0;const a=i(n(2328));t.SynchronizationEvent=class{constructor(e=a.default){this.delay=e,this.state=!1,this.resolvers=[]}isSet(){return this.state}set(){this.state=!0;const e=this.resolvers;this.resolvers=[];for(const t of e)t()}clear(){this.state=!1}async wait(e){const t=new Promise((e=>{this.state?e(!0):this.resolvers.push((()=>e(!0)))}));return void 0!==e?Promise.race([t,this.delay(e).then((()=>!1))]):t}}},9684:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TemporaryMap=void 0,t.TemporaryMap=class{constructor(e,t=1e3){this.defaultValue=e,this.maxSize=t,this.oldValues=new Map,this.newValues=new Map}get(e){return this.newValues.has(e)?this.newValues.get(e):this.oldValues.has(e)?this.oldValues.get(e):this.defaultValue}set(e,t){!this.newValues.has(e)&&this.maxSize<=this.newValues.size&&(this.oldValues=this.newValues,this.newValues=new Map),this.newValues.set(e,t)}delete(e){this.newValues.delete(e),this.oldValues.delete(e)}}},5217:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.summarizeTextContent=void 0,t.summarizeTextContent=function(e){const t=e.split(/\s/).filter((e=>e&&e.length<30)),n=new Set;return t.filter((e=>1===e.length||!n.has(e)&&(n.add(e),!0))).join(" ")}},8585:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncTry=t.asyncTrySafe=t.tryOnceAsync=t.tryOnce=void 0;const i=n(1326);async function a(e,t,n=1,a=1e3,r=!1,o=!0){for(let o=1;o<=n;o++)try{i.logger.debug(`Trying to execute function for the ${o} time`,e);const n=await t();if(r&&void 0===n)throw new Error("Result is undefined");return n}catch(t){i.logger.warn("failed executing function ",o,e,t,t.stack),o!==n&&await new Promise((e=>setTimeout(e,a)))}if(o)throw new Error(`Failed to execute function after all tries - ${e}`)}t.tryOnce=function(e,...t){try{return e(...t)}catch(n){return void i.logger.error("Failed executing function ",n,Object.assign({name:e.name},t))}},t.tryOnceAsync=async function(e,...t){try{return await e(...t)}catch(n){return void i.logger.error("Failed executing asynchronous function:",n,Object.assign({name:e.name},t))}},t.asyncTrySafe=async function(e,t,n=1,i=1e3,r=!1){return a(e,t,n,i,r,!1)},t.asyncTry=a},9249:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExtensionIDFromUrl=t.getDomainFromUrl=t.getUrlWithoutFragment=t.stripCredentials=void 0;const i=n(1326);t.stripCredentials=function(e){return e.replace(/\/\/[^@]+@/,"//")},t.getUrlWithoutFragment=function(e){return e.split("#")[0]},t.getDomainFromUrl=function(e){try{return new URL(e).hostname}catch(t){return i.logger.warn(`getDomainFromUrl: Failed to parse URL: ${e}`,t),""}},t.getExtensionIDFromUrl=function(e){try{const t=/^(?:blob:)?[\w-]+:\/\/([^/]+)(?:\/|$)/.exec(e);return t?t[1]:""}catch(t){return i.logger.warn(`getExtensionIDFromUrl: Failed to parse URL: ${e}`,t),""}}},6846:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWebsiteRuleEnabled=t.getMatchedWebsiteRuleData=t.getRuleKindData=t.WebsiteRuleType=t.getMatchedWebsiteRule=void 0;const i=n(1276),a=n(345);function r(e,t,n,r,o){o.debug("Trying to match website rules",{ruleType:r,domains:e,categories:t});for(const r of n)switch(r.kind){case i.DlpRuleKind.Domain:if(e.some((e=>a.doesMatchWildcard(e,r.destination))))return o.debug("Matched website domain rule",{domains:e,rule:r}),r;break;case i.DlpRuleKind.Category:{const e=r.websiteCategory;if(!e){o.warn("Category rule has no website category",{rule:r});continue}if(t.includes(e))return o.debug("Matched website category rule",{categories:t,rule:r}),r;break}}}var o;t.getMatchedWebsiteRule=r,function(e){e.PreventPasteOut="pasteOut",e.PreventPrinting="printing",e.AddWatermark="watermark",e.PreventFileUpload="blockFileUpload",e.BlockFileTypes="blockedFileTypes",e.FileAccessModeOverride="fileAccessModeOverride",e.WebsiteBlock="blockWebsite",e.InactivityMask="inactivityMask",e.SensitiveDataDetection="sensitiveDataDetection"}(o=t.WebsiteRuleType||(t.WebsiteRuleType={}));const s={[o.PreventPasteOut]:"pasteOut",[o.PreventPrinting]:"printing",[o.AddWatermark]:"watermark",[o.PreventFileUpload]:"blockFileUpload",[o.BlockFileTypes]:"blockedFileTypes",[o.FileAccessModeOverride]:"fileAccessModeOverride",[o.WebsiteBlock]:"blockWebsite",[o.InactivityMask]:"inactivityMask",[o.SensitiveDataDetection]:"sensitiveDataDetection"};function c(e){return e.kind===i.DlpRuleKind.Domain?{domain:e.destination}:{category:e.websiteCategory}}function l(e,t,n,i,a){const o=r(e,t,n,i,a);if(!o)return{isEnabled:!1};const l=s[i];return Object.assign({isEnabled:Boolean(o[l]),reportEvent:o.reportEvents},c(o))}t.getRuleKindData=c,t.getMatchedWebsiteRuleData=l,t.isWebsiteRuleEnabled=function(e,t,n,i,a){return l(e,t,n,i,a).isEnabled}},9282:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerdictCache=void 0;const i=n(3671);t.VerdictCache=class{constructor(e,t,n,a){this.config=a,this.cache=new i.DexieLimitedCache(e,{maxAge:n,maxCount:t,shouldEvictExpired:!0})}async get(e){if(this.config.checkVerdictCache)return await this.cache.get(e)}async set(e,t){if(!this.config.checkVerdictCache)return;const n=this.config.verdictTtls[t.verdict];await this.cache.set(e,t,{ttl:n})}async remove(e){await this.cache.delete(e)}updateConfig(e){this.config=e}}},3181:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWindowByTabId=void 0;const i=n(398),a=n(850),r=n(1326);t.getWindowByTabId=async function(e){if(a.isDefined(e))try{const t=await i.tabs.get(e);if(!t||!a.isDefined(t.windowId))return;return await i.windows.get(t.windowId)}catch(t){return void r.logger.warn("getWindowByTabId: Couldn't find the window due to an error that occurred while trying to find the tab",{tabId:e,error:t})}}},5172:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(398)),r=n(1311),o=n(8459),s=n(345),c=n(1326),l=n(7848),u=n(6846),d=n(4882),p=n(9103);async function f(e){const{tabId:t,url:n,frameId:i}=e;await r.shouldDetectUrl(n,i,!0)&&await async function(e,t){const{enableWatermark:n,watermarkDomainList:i,watermarkUrlRegex:a,dlpRules:r,enableDirectWebsiteRulesCalculation:l}=await o.getConfiguration();if(!n)return!1;const p=new URL(e).hostname,f=await d.getCategories({tabId:t});return!!s.doesMatchListRegex(e,a)||(i&&!l?s.doesMatchListWildcard(p,i):u.isWebsiteRuleEnabled([p],f?Object.keys(f):[],r,u.WebsiteRuleType.AddWatermark,c.logger))}(n,t)&&(c.logger.debug("onCompletedCallback: About to inject watermark to",t),await async function(e){var t;const{watermarkAdditionalText:n,watermarkCustomCSS:i,watermarkCustomColor:r,watermarkCustomOpacity:s,watermarkRepeat:c,useCalculatedWatermarkRepeat:u,watermarkFontSize:d,watermarkLineHeight:f,watermarkLetterSpacing:g}=await o.getConfiguration(),h=null!==(t=await l.getLastUser())&&void 0!==t?t:"",m=n.length>0?`${h} ${n} `:`${h} `,v=await async function(e){var t,n;const i=p.getTabsManager(),a=await i.get(e),r=null!==(t=null==a?void 0:a.height)&&void 0!==t?t:1080,o=null!==(n=null==a?void 0:a.width)&&void 0!==n?n:1920;return 4*Math.ceil(o/Math.sqrt(2)+r/Math.sqrt(2))}(e),y=function(e,t,n,i){return Math.ceil(e/(t*(i+1)))*Math.ceil(e/(.8*t+n))}(v,d,m.length,f),b=u?y:c,w=`body:after {\n    content: '${m.repeat(b)}';\n    color: #${r};\n    opacity: ${s};\n    line-height: ${f}em;\n    letter-spacing: ${g}px; \n    font-size: ${d}px; \n    pointer-events: none;\n    z-index: 2147483647;\n    width: ${v}px; \n    height: ${v}px; \n    transform: rotate(-45deg); \n    transform-origin: -40% 50%;\n    font-weight: 500;\n    display: grid; \n    justify-content: center; \n    align-content: center; \n    position: fixed; \n    top: 0; bottom: 0; left: 0; right: 0;\n    word-wrap: break-word;\n    ${i} }`;await a.default.scripting.insertCSS({css:w,target:{tabId:e}})}(t),c.logger.debug("onCompletedCallback: Watermark injected to",t))}a.default.webNavigation&&a.default.webNavigation.onCompleted.addListener((e=>{f(e)}))},7866:(e,t)=>{"use strict";var n,i,a;Object.defineProperty(t,"__esModule",{value:!0}),t.PostSignInRedirectMode=t.SignInEnforcementMode=t.SignInMode=void 0,(a=t.SignInMode||(t.SignInMode={})).UnattendedSignIn="UnattendedSignIn",a.InteractiveWithIdp="InteractiveWithIdp",a.InteractiveWithCode="InteractiveWithCode",(i=t.SignInEnforcementMode||(t.SignInEnforcementMode={})).None="None",i.ForceSignIn="ForceSignIn",i.AutoOpenSignInPage="AutoOpenSignInPage",(n=t.PostSignInRedirectMode||(t.PostSignInRedirectMode={})).ABSPage="ABSPage",n.PreSignInUrlRedirectAfterTimeout="PreSignInUrlRedirectAfterTimeout",n.PreSignInUrlRedirect="PreSignInUrlRedirect"},8298:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserName=void 0,(n=t.BrowserName||(t.BrowserName={})).Edge="edge",n.Chrome="chrome",n.Safari="safari",n.Firefox="firefox"},7237:(e,t)=>{"use strict";var n,i,a,r,o,s,c,l,u,d,p,f,g,h,m,v;Object.defineProperty(t,"__esModule",{value:!0}),t.WebAppType=t.ClipboardOperation=t.ActionType=t.ExtensionsRiskScoreDisplayableLevel=t.ExtensionsRiskScoreLevel=t.BlockPageDetectionMode=t.ActivationStatus=t.ScanType=t.PPEventType=t.queryForScanStatuses=t.ScanStatus=t.IdpProvider=t.VerdictOrigin=t.Verdict=t.ScanReason=t.DecryptionStatuses=t.EncryptedOptions=void 0,(v=t.EncryptedOptions||(t.EncryptedOptions={})).Fully="fully",v.Partially="partially",v.No="no",(m=t.DecryptionStatuses||(t.DecryptionStatuses={})).Succeeded="succeeded",m.Failed="failed",(h=t.ScanReason||(t.ScanReason={})).WebsiteLoaded="websiteLoaded",h.FalseNegativeReport="falseNegativeReport",h.CreditCardOrEmail="creditCardOrEmail",h.Interval="interval",h.DomChanged="domChanged",h.TabFocused="tabFocused",h.UserClicked="userClicked",h.FirstScan="firstScan",h.PrerenderedTabShown="prerenderedTabShown",(g=t.Verdict||(t.Verdict={})).Malware="MAL",g.Unknown="UNK",g.Clean="CLN",g.Suspicious="SUS",(f=t.VerdictOrigin||(t.VerdictOrigin={})).Configuration="configuration",f.Cache="cache",f.Network="network",f.VerdictChange="verdictChange",f.Unknown="unknown",(p=t.IdpProvider||(t.IdpProvider={})).Google="google",p.Microsoft="microsoft",p.Other="other",p.Unknown="unknown",function(e){e.Initiating="initiating",e.Pending="pending",e.InProgress="in_progress",e.PendingPassword="pending_password",e.Completed="completed",e.ScanError="scan_error",e.Failed="failed",e.Finished="finished"}(n=t.ScanStatus||(t.ScanStatus={})),t.queryForScanStatuses=[n.Initiating,n.Pending,n.InProgress],(d=t.PPEventType||(t.PPEventType={})).FileScanPending="file_scan_pending",d.FileScanInProgress="file_scan_in_progress",d.FileScanCompleted="file_scan_completed",d.FileScanError="file_scan_error",(u=t.ScanType||(t.ScanType={})).UrlPreScan="url_pre_scan",u.Scan="scan",u.ReScan="re_scan",u.FileSignaturePreScan="file_signature_pre_scan",(l=t.ActivationStatus||(t.ActivationStatus={})).Active="active",l.Disabled="disabled",l.ActiveForEmail="activeForEmail",(c=t.BlockPageDetectionMode||(t.BlockPageDetectionMode={})).Warn="warn",c.Block="block",(s=t.ExtensionsRiskScoreLevel||(t.ExtensionsRiskScoreLevel={})).None="None",s.High="High",s.Medium="Medium",s.All="All",(o=t.ExtensionsRiskScoreDisplayableLevel||(t.ExtensionsRiskScoreDisplayableLevel={})).High="High",o.Medium="Medium",o.Low="Low",o.Undetermined="Undetermined",(r=t.ActionType||(t.ActionType={})).None="none",r.BlockPage="blockPage",r.Notification="notification",(a=t.ClipboardOperation||(t.ClipboardOperation={})).Copy="copy",a.Paste="paste",a.Cut="cut",(i=t.WebAppType||(t.WebAppType={})).Gmail="Gmail",i.Outlook="Outlook",i.WhatsApp="WhatsApp",i.GoogleDrive="GoogleDrive"},81:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MaliciousWebsiteDetection=void 0,(n=t.MaliciousWebsiteDetection||(t.MaliciousWebsiteDetection={})).Disabled="disabled",n.Silent="silent",n.Warn="warn",n.Block="block"},8791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9227:(e,t)=>{"use strict";var n,i,a,r,o,s,c,l;Object.defineProperty(t,"__esModule",{value:!0}),t.FileDetectionMode=t.DownloadProcessState=t.DownloadDetectionOrigin=t.DownloadConfidence=t.DownloadProcessFailureReason=t.DownloadMechanism=t.ScanStatusUpdateMethod=t.DownloadRemediation=void 0,(l=t.DownloadRemediation||(t.DownloadRemediation={})).Deleted="deleted",l.Failed="failed",l.None="none",l.NotSupported="not-supported",(c=t.ScanStatusUpdateMethod||(t.ScanStatusUpdateMethod={})).Polling="polling",c.Push="push",(s=t.DownloadMechanism||(t.DownloadMechanism={})).ServiceWorkerStream="service-worker-stream",s.ContentScriptStream="content-script-stream",s.ContentScriptBlob="content-script-blob",s.DataUrlBlob="data-blob",s.Unavailable="unavailable",(o=t.DownloadProcessFailureReason||(t.DownloadProcessFailureReason={})).Unfetchable="unfetchable",o.Timeout="timeout",o.Error="error",o.ScanError="scan-error",(r=t.DownloadConfidence||(t.DownloadConfidence={})).Lowest="lowest",r.Low="low",r.Medium="medium",r.High="high",(a=t.DownloadDetectionOrigin||(t.DownloadDetectionOrigin={})).DownloadsApi="downloads-api",a.WebRequest="web-request",a.DownloadClickInterception="download-click-interception",(i=t.DownloadProcessState||(t.DownloadProcessState={})).New="new",i.Enriched="enriched",i.Started="started",i.UrlsPreScanFinished="urls-pre-scan-finished",i.PartialDownloadAnalyzed="partial-download-analyzed",i.UserDownloadSettled="user-download-settled",i.Downloaded="downloaded",i.SignaturePreScanFinished="signature-pre-scan-finished",i.Uploaded="uploaded",i.Scanning="scanning",i.Completed="completed",i.Failed="failed",i.VerdictChanged="verdict-changed",(n=t.FileDetectionMode||(t.FileDetectionMode={})).Disabled="disabled",n.Silent="silent",n.Warn="warn",n.Block="block"},2957:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5499:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.EmailCollectionStatus=void 0,(n=t.EmailCollectionStatus||(t.EmailCollectionStatus={})).Enabled="enabled",n.Disabled="disabled",n.Completed="completed"},994:(e,t)=>{"use strict";var n,i,a,r,o,s;Object.defineProperty(t,"__esModule",{value:!0}),t.ThirdPartyExtensionsState=t.LoginType=t.ErrorReason=t.EventDestination=t.EventType=t.EventCategory=void 0,(s=t.EventCategory||(t.EventCategory={})).Prevention="prevention",s.UserInput="user_input",s.Detection="detection",(o=t.EventType||(t.EventType={})).WebsiteUrlAccessBlocked="website_url_access_blocked",o.WebsiteCategoriesAccessBlocked="website_categories_access_blocked",o.FileTypeDownloadBlocked="file_type_download_blocked",o.Login="login",o.UnscannedFile="unscanned_file",o.EmailTyped="email_typed",o.CreditCardTyped="credit_card_typed",o.PasswordDuplicationFound="password_duplication_found",o.UnsuccessfulScan="unsuccessful_scan",o.FileUpload="file_upload",o.FileDownload="file_download",o.ThirdPartyExtensionsChange="third_party_extensions_change",o.SensitiveDataInput="sensitive_data_input",o.ThirdPartyExtensionDownload="third_party_extension_download",o.PasteOut="paste_out",o.Printing="printing",o.MaliciousUrl="malicious_url",o.MaliciousFile="malicious_file",o.CleanUrl="clean_url",(r=t.EventDestination||(t.EventDestination={})).ABS="abs",r.XDR="xdr",r.IR="ir",(a=t.ErrorReason||(t.ErrorReason={})).PasswordProtected="password protected",a.TooLarge="too large",(i=t.LoginType||(t.LoginType={})).SSO="sso",i.Simple="simple",i.GrantPermissions="grant_permissions",(n=t.ThirdPartyExtensionsState||(t.ThirdPartyExtensionsState={})).Installed="installed",n.Uninstalled="uninstalled",n.Enabled="enabled",n.Disabled="disabled",n.Updated="updated"},1997:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5791:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.InstallationContext=void 0,(n=t.InstallationContext||(t.InstallationContext={})).Host="host",n.Guest="guest",n.Standalone="standalone"},4982:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(81),t),a(n(7250),t),a(n(1409),t),a(n(7237),t),a(n(994),t),a(n(4044),t),a(n(9227),t),a(n(2042),t),a(n(5459),t),a(n(8298),t),a(n(8791),t),a(n(5791),t),a(n(665),t),a(n(2957),t),a(n(8007),t),a(n(9498),t),a(n(5499),t),a(n(2665),t),a(n(1997),t),a(n(7866),t),a(n(6995),t)},2042:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.UserDisplayNameUpdateResult=t.PushNotificationBackend=void 0,(i=t.PushNotificationBackend||(t.PushNotificationBackend={})).Apns="apns",i.Fcm="fcm",(n=t.UserDisplayNameUpdateResult||(t.UserDisplayNameUpdateResult={})).NotModified="not_modified",n.Modified="modified",n.Rejected="rejected"},7250:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5459:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PageType=void 0,(n=t.PageType||(t.PageType={})).SignIn="signin",n.SignInRedirectingPage="signin-redirecting-page",n.WebsiteBlock="website-block",n.WebsiteMaliciousBlock="website-malicious-block",n.PolicyBlock="policy-block",n.PhishingBlock="phishing-block",n.FileWarning="file-warning",n.FileTypeBlock="file-type-block",n.DownloadLocalLogs="download-local-logs",n.DownloadStoredFile="download-stored-file",n.Notification="notification",n.ScanProgress="scanProgress",n.UnscannableFileBlockPage="unscannable-file-block-page",n.DisabledExtensionBlockPage="disabled-extension-block-page",n.DisabledExtensionDueToRiskScoreBlockPage="disabled-extension-due-to-risk-score-block-page",n.PasswordInputPage="password-input-page",n.Banner="banner",n.Block="block",n.Popup="popup",n.EncryptedFileBlockPage="encrypted-file-block-page",n.DownloadManagerPage="download-manager-page"},2665:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.TextExtractionMethod=t.SensitiveDataDetectionMode=void 0,(i=t.SensitiveDataDetectionMode||(t.SensitiveDataDetectionMode={})).Warn="warn",i.Block="block",i.Silent="silent",i.Disabled="disabled",(n=t.TextExtractionMethod||(t.TextExtractionMethod={})).Regex="regex",n.Value="value",n.TextContent="textContent"},1409:(e,t)=>{"use strict";var n,i,a,r,o,s,c,l,u;Object.defineProperty(t,"__esModule",{value:!0}),t.AvoidUrlDetectionReason=t.AvoidFileDetectionReason=t.PrintPhase=t.BlockPageReason=t.ReportAction=t.LogsCollectionOrigin=t.UserInterfaceAction=t.TelemetryType=t.TelemetryCategory=void 0,(u=t.TelemetryCategory||(t.TelemetryCategory={})).Detection="detection",u.Prevention="prevention",u.Boot="boot",u.Management="management",u.User="user",u.Remediation="remediation",(l=t.TelemetryType||(t.TelemetryType={})).UrlScan="url_scan",l.FileScanCompleted="file_scan_completed",l.FileScanFailed="file_scan_failed",l.FileScanTimeout="file_scan_timeout",l.FileScanError="file_scan_error",l.ExtensionLoaded="extension_loaded",l.ClipboardAction="clipboard_action",l.Printing="printing",l.Devtools="devtools",l.BlockPage="block_page",l.Reporting="reporting",l.LogsCollection="logs",l.UserInterface="user_interface",l.FileUpload="file_upload",l.FileDownloadConfidence="file_download_confidence",l.FileDownloadRemediation="file_download_remediation",l.AvoidFileDetection="avoid_file_detection",l.UpdateAvailable="version_available",l.RetryTryFetch="retry_try_fetch",l.Alarm="telemetry_alarm",l.ApiHeaders="api_headers",l.AvoidUrlDetection="avoid_url_detection",l.FileDetectionFailure="file_detection_failure",l.DecryptionFailure="decryption_failure",l.FileDownloadMaxFailures="file_download_max_failures",l.SensitiveDataInput="sensitive_data_input",l.FilenameIdentificationFailure="filename_identification_failure",l.FunctionCalled="function_called",(c=t.UserInterfaceAction||(t.UserInterfaceAction={})).ToastDismissed="toast_dismissed",c.BlockPageBackToSafety="block_page_back_to_safety",c.BlockPageContinueAnyWay="block_page_continue_any_way",(s=t.LogsCollectionOrigin||(t.LogsCollectionOrigin={})).Local="local",s.OnDemand="on_demand",(o=t.ReportAction||(t.ReportAction={})).FalsePositive="false_positive",o.FalseNegative="false_negative",(r=t.BlockPageReason||(t.BlockPageReason={})).DomainRule="blocked_domain",r.CategoryRule="blocked_category",(a=t.PrintPhase||(t.PrintPhase={})).BeforePrint="before_print",a.AfterPrint="after_print",(i=t.AvoidFileDetectionReason||(t.AvoidFileDetectionReason={})).BlockedFileType="blocked_file_type",i.ExcludedDomains="excluded_domains",i.ExcludedCategory="excluded_category",i.EncryptedFile="encrypted_file",i.FileTooLarge="file_too_large",i.ThirdPartyExtensionDownload="third_party_extension_download",(n=t.AvoidUrlDetectionReason||(t.AvoidUrlDetectionReason={})).ExcludedDomains="excluded_domains",n.ExcludedCategory="excluded_category"},9498:(e,t)=>{"use strict";var n,i,a,r;Object.defineProperty(t,"__esModule",{value:!0}),t.tpeRiskLevels=t.ExtensionsRiskLevel=t.ThirdPartyExtensionEnforcementRuleRiskScoreOperator=t.tpeEnforcmentRuleActions=t.ThirdPartyExtensionEnforcementAction=void 0,(t.ThirdPartyExtensionEnforcementAction||(t.ThirdPartyExtensionEnforcementAction={})).Disable="disable",t.tpeEnforcmentRuleActions=["disable","allow"],(r=t.ThirdPartyExtensionEnforcementRuleRiskScoreOperator||(t.ThirdPartyExtensionEnforcementRuleRiskScoreOperator={})).Equals="equals",r.NotEquals="notEquals",r.GreaterThan="greaterThan",r.GreaterThanOrEqual="greaterThanOrEqual",r.LessThan="lessThan",r.LessThanOrEqual="lessThanOrEqual",(a=t.ExtensionsRiskLevel||(t.ExtensionsRiskLevel={})).Low="All",a.Medium="Medium",a.High="High",a.NoScore="NoScore",t.tpeRiskLevels=["no-score","undetermined","low","medium","high"],function(e){e.Is="is",e.IsNot="isNot"}(n||(n={})),function(e){e.IsOneOf="isOneOf",e.IsNotOneOf="isNotOneOf"}(i||(i={}))},4044:(e,t)=>{"use strict";var n,i,a;Object.defineProperty(t,"__esModule",{value:!0}),t.ToastPosition=t.BannerType=t.ToastType=t.NotificationLevel=void 0,(a=t.NotificationLevel||(t.NotificationLevel={})).Info="info",a.Error="error",a.Warning="warning",a.Success="success",a.Malicious="malicious",a.Policy="policy",(i=t.ToastType||(t.ToastType={})).BasicNotification="basicNotification",i.ScanStatusNotification="scanStatusNotification",i.BannerNotification="bannerNotification",(t.BannerType||(t.BannerType={})).SuspiciousBanner="suspiciousBanner",(n=t.ToastPosition||(t.ToastPosition={})).BottomRight="bottomRight",n.BottomLeft="bottomLeft",n.TopRight="topRight",n.TopLeft="topLeft"},6995:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},665:(e,t)=>{"use strict";var n,i,a;Object.defineProperty(t,"__esModule",{value:!0}),t.WebsiteBlockAction=t.FileAccessModeOverride=t.DlpRuleKind=void 0,(a=t.DlpRuleKind||(t.DlpRuleKind={})).Domain="domain",a.Category="category",(i=t.FileAccessModeOverride||(t.FileAccessModeOverride={})).NoOverride="noOverride",i.PreventFileAccessWithTimeout="preventFileAccessWithTimeout",i.PreventFileAccess="preventFileAccess",i.AllowFileAccess="allowFileAccess",(n=t.WebsiteBlockAction||(t.WebsiteBlockAction={})).Allow="allow",n.Warn="warn",n.Block="block"},8007:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3755:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.openBlockPageInNewWindow=t.openBlockPageTab=t.navigateTabToBlockPage=void 0;const r=n(398),o=n(9244);async function s(e,t){const n=crypto.randomUUID(),i=new URL("public/empty.html",t.absUrl);i.searchParams.set("n",n);const a=o.EmbeddedUiServer.createServer({clientName:n,initialState:t,expectedTabId:e,url:i.href,bundle:"scripts/embedded-ui/block-page.js",css:"scripts/embedded-ui/block-page.css",listeners:t.listeners,connectTimeoutMs:3e3});return await r.tabs.update(e,{url:i.href}),await a}a(n(3658),t),t.navigateTabToBlockPage=s,t.openBlockPageTab=async function(e,t){const n=crypto.randomUUID(),i=await r.tabs.create({url:"about:blank",windowId:t}),a=new URL("public/empty.html",e.absUrl);a.searchParams.set("n",n);const s=o.EmbeddedUiServer.createServer({clientName:n,initialState:e,expectedTabId:i.id,url:a.href,bundle:"scripts/embedded-ui/block-page.js",css:"scripts/embedded-ui/block-page.css",listeners:e.listeners,connectTimeoutMs:3e3});return await r.tabs.update(i.id,{url:a.href}),await s},t.openBlockPageInNewWindow=async function(e){var t;const n=await r.windows.create({incognito:!0,type:"normal",focused:!0,state:"maximized"});if(!n.tabs)throw new Error("tabs is not defined on a newily created window");if(!(null===(t=n.tabs[0])||void 0===t?void 0:t.id))throw new Error("the id of the initial tab of a new window is undefined while the window is not a devtools window or its do not exist");return await s(n.tabs[0].id,e)}},3658:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5231:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openBlockPageInNewWindow=t.openBlockPageTab=t.navigateTabToBlockPage=t.ServerDisconnectError=t.EmbeddedUiServer=void 0;var i=n(9244);Object.defineProperty(t,"EmbeddedUiServer",{enumerable:!0,get:function(){return i.EmbeddedUiServer}}),Object.defineProperty(t,"ServerDisconnectError",{enumerable:!0,get:function(){return i.ServerDisconnectError}});var a=n(3755);Object.defineProperty(t,"navigateTabToBlockPage",{enumerable:!0,get:function(){return a.navigateTabToBlockPage}}),Object.defineProperty(t,"openBlockPageTab",{enumerable:!0,get:function(){return a.openBlockPageTab}}),Object.defineProperty(t,"openBlockPageInNewWindow",{enumerable:!0,get:function(){return a.openBlockPageInNewWindow}})},9244:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedUiServer=t.ServerDisconnectError=void 0;const i=n(398);class a extends Error{constructor(e){super(`ServerPortDisconnected with error ${e}`),this.portError=e}}t.ServerDisconnectError=a;const r={onAction:()=>{},onError:()=>{}};class o{constructor(e,t,n){this.port=t,this.events=n,this.isConnected=!0,this.state=e,t.onMessage.addListener(this.onMessage.bind(this)),t.onDisconnect.addListener(this.onDisconnect.bind(this))}setState(e){const t={type:"state-changed",newState:e};this.state=e,this.port.postMessage(t)}get connected(){return this.isConnected}get currentState(){return this.state}close(){this.port.disconnect(),this.isConnected=!1}static createServer({connectTimeoutMs:e,clientName:t,expectedTabId:n,initialState:a,bundle:s,css:c,url:l,listeners:u}){return new Promise(((d,p)=>{const f=`eui::${t}`,g=setTimeout((()=>{i.runtime.onConnect.removeListener(h),i.scripting.unregisterContentScripts({ids:[f]}),p(new Error("Connect Timeout Reached"))}),null!=e?e:1e3);async function h(e){var s,c;if(e.name===t&&(null===(c=null===(s=e.sender)||void 0===s?void 0:s.tab)||void 0===c?void 0:c.id)===n)try{i.runtime.onConnect.removeListener(h),clearTimeout(g),await i.scripting.unregisterContentScripts({ids:[f]}),e.postMessage({type:"hello",initialState:a}),d(new o(a,e,null!=u?u:r))}catch(e){p(e)}}i.runtime.onConnect.addListener(h),i.scripting.registerContentScripts([{id:f,js:[s],css:c?[c]:void 0,runAt:"document_start",matches:[l]}]).catch((e=>{clearTimeout(g),i.runtime.onConnect.removeListener(h),p(e)}))}))}onMessage(e){"action"===e.type&&this.events.onAction(e)}onDisconnect(){this.isConnected=!1,this.port.error&&this.events.onError(new a(this.port.error.message))}}t.EmbeddedUiServer=o},618:(e,t,n)=>{"use strict";var i;n.r(t),n.d(t,{ClassTransformer:()=>l,Exclude:()=>u,Expose:()=>d,Transform:()=>h,TransformInstanceToInstance:()=>p,TransformInstanceToPlain:()=>f,TransformPlainToInstance:()=>g,TransformationType:()=>i,Type:()=>m,classToClassFromExist:()=>E,classToPlain:()=>y,classToPlainFromExist:()=>w,deserialize:()=>_,deserializeArray:()=>A,instanceToInstance:()=>T,instanceToPlain:()=>b,plainToClass:()=>S,plainToClassFromExist:()=>C,plainToInstance:()=>x,serialize:()=>I}),function(e){e[e.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",e[e.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",e[e.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"}(i||(i={}));var a=new(function(){function e(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return e.prototype.addTypeMetadata=function(e){this._typeMetadatas.has(e.target)||this._typeMetadatas.set(e.target,new Map),this._typeMetadatas.get(e.target).set(e.propertyName,e)},e.prototype.addTransformMetadata=function(e){this._transformMetadatas.has(e.target)||this._transformMetadatas.set(e.target,new Map),this._transformMetadatas.get(e.target).has(e.propertyName)||this._transformMetadatas.get(e.target).set(e.propertyName,[]),this._transformMetadatas.get(e.target).get(e.propertyName).push(e)},e.prototype.addExposeMetadata=function(e){this._exposeMetadatas.has(e.target)||this._exposeMetadatas.set(e.target,new Map),this._exposeMetadatas.get(e.target).set(e.propertyName,e)},e.prototype.addExcludeMetadata=function(e){this._excludeMetadatas.has(e.target)||this._excludeMetadatas.set(e.target,new Map),this._excludeMetadatas.get(e.target).set(e.propertyName,e)},e.prototype.findTransformMetadatas=function(e,t,n){return this.findMetadatas(this._transformMetadatas,e,t).filter((function(e){return!e.options||!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?n===i.CLASS_TO_CLASS||n===i.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||n===i.CLASS_TO_PLAIN)}))},e.prototype.findExcludeMetadata=function(e,t){return this.findMetadata(this._excludeMetadatas,e,t)},e.prototype.findExposeMetadata=function(e,t){return this.findMetadata(this._exposeMetadatas,e,t)},e.prototype.findExposeMetadataByCustomName=function(e,t){return this.getExposedMetadatas(e).find((function(e){return e.options&&e.options.name===t}))},e.prototype.findTypeMetadata=function(e,t){return this.findMetadata(this._typeMetadatas,e,t)},e.prototype.getStrategy=function(e){var t=this._excludeMetadatas.get(e),n=t&&t.get(void 0),i=this._exposeMetadatas.get(e),a=i&&i.get(void 0);return n&&a||!n&&!a?"none":n?"excludeAll":"exposeAll"},e.prototype.getExposedMetadatas=function(e){return this.getMetadata(this._exposeMetadatas,e)},e.prototype.getExcludedMetadatas=function(e){return this.getMetadata(this._excludeMetadatas,e)},e.prototype.getExposedProperties=function(e,t){return this.getExposedMetadatas(e).filter((function(e){return!e.options||!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?t===i.CLASS_TO_CLASS||t===i.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||t===i.CLASS_TO_PLAIN)})).map((function(e){return e.propertyName}))},e.prototype.getExcludedProperties=function(e,t){return this.getExcludedMetadatas(e).filter((function(e){return!e.options||!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?t===i.CLASS_TO_CLASS||t===i.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||t===i.CLASS_TO_PLAIN)})).map((function(e){return e.propertyName}))},e.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},e.prototype.getMetadata=function(e,t){var n,i=e.get(t);i&&(n=Array.from(i.values()).filter((function(e){return void 0!==e.propertyName})));for(var a=[],r=0,o=this.getAncestors(t);r<o.length;r++){var s=o[r],c=e.get(s);if(c){var l=Array.from(c.values()).filter((function(e){return void 0!==e.propertyName}));a.push.apply(a,l)}}return a.concat(n||[])},e.prototype.findMetadata=function(e,t,n){var i=e.get(t);if(i){var a=i.get(n);if(a)return a}for(var r=0,o=this.getAncestors(t);r<o.length;r++){var s=o[r],c=e.get(s);if(c){var l=c.get(n);if(l)return l}}},e.prototype.findMetadatas=function(e,t,n){var i,a=e.get(t);a&&(i=a.get(n));for(var r=[],o=0,s=this.getAncestors(t);o<s.length;o++){var c=s[o],l=e.get(c);l&&l.has(n)&&r.push.apply(r,l.get(n))}return r.slice().reverse().concat((i||[]).slice().reverse())},e.prototype.getAncestors=function(e){if(!e)return[];if(!this._ancestorsMap.has(e)){for(var t=[],n=Object.getPrototypeOf(e.prototype.constructor);void 0!==n.prototype;n=Object.getPrototypeOf(n.prototype.constructor))t.push(n);this._ancestorsMap.set(e,t)}return this._ancestorsMap.get(e)},e}()),r=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,r=t.length;a<r;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))},o=function(){function e(e,t){this.transformationType=e,this.options=t,this.recursionStack=new Set}return e.prototype.transform=function(e,t,r,o,s,c){var l,u=this;if(void 0===c&&(c=0),Array.isArray(t)||t instanceof Set){var d=o&&this.transformationType===i.PLAIN_TO_CLASS?function(e){var t=new e;return t instanceof Set||"push"in t?t:[]}(o):[];return t.forEach((function(t,n){var a=e?e[n]:void 0;if(u.options.enableCircularCheck&&u.isCircular(t))u.transformationType===i.CLASS_TO_CLASS&&(d instanceof Set?d.add(t):d.push(t));else{var o=void 0;if("function"!=typeof r&&r&&r.options&&r.options.discriminator&&r.options.discriminator.property&&r.options.discriminator.subTypes){if(u.transformationType===i.PLAIN_TO_CLASS){o=r.options.discriminator.subTypes.find((function(e){return e.name===t[r.options.discriminator.property]}));var s={newObject:d,object:t,property:void 0},l=r.typeFunction(s);o=void 0===o?l:o.value,r.options.keepDiscriminatorProperty||delete t[r.options.discriminator.property]}u.transformationType===i.CLASS_TO_CLASS&&(o=t.constructor),u.transformationType===i.CLASS_TO_PLAIN&&(t[r.options.discriminator.property]=r.options.discriminator.subTypes.find((function(e){return e.value===t.constructor})).name)}else o=r;var p=u.transform(a,t,o,void 0,t instanceof Map,c+1);d instanceof Set?d.add(p):d.push(p)}})),d}if(r!==String||s){if(r!==Number||s){if(r!==Boolean||s){if((r===Date||t instanceof Date)&&!s)return t instanceof Date?new Date(t.valueOf()):null==t?t:new Date(t);if(("undefined"!=typeof globalThis?globalThis:void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0).Buffer&&(r===Buffer||t instanceof Buffer)&&!s)return null==t?t:Buffer.from(t);if(null===(l=t)||"object"!=typeof l||"function"!=typeof l.then||s){if(s||null===t||"object"!=typeof t||"function"!=typeof t.then){if("object"==typeof t&&null!==t){r||t.constructor===Object||(Array.isArray(t)||t.constructor!==Array)&&(r=t.constructor),!r&&e&&(r=e.constructor),this.options.enableCircularCheck&&this.recursionStack.add(t);var p=this.getKeys(r,t,s),f=e||{};e||this.transformationType!==i.PLAIN_TO_CLASS&&this.transformationType!==i.CLASS_TO_CLASS||(f=s?new Map:r?new r:{});for(var g=function(n){if("__proto__"===n||"constructor"===n)return"continue";var o=n,l=n,u=n;if(!h.options.ignoreDecorators&&r)if(h.transformationType===i.PLAIN_TO_CLASS)(d=a.findExposeMetadataByCustomName(r,n))&&(u=d.propertyName,l=d.propertyName);else if(h.transformationType===i.CLASS_TO_PLAIN||h.transformationType===i.CLASS_TO_CLASS){var d;(d=a.findExposeMetadata(r,n))&&d.options&&d.options.name&&(l=d.options.name)}var p=void 0;p=h.transformationType===i.PLAIN_TO_CLASS?t[o]:t instanceof Map?t.get(o):t[o]instanceof Function?t[o]():t[o];var g=void 0,m=p instanceof Map;if(r&&s)g=r;else if(r){var v=a.findTypeMetadata(r,u);if(v){var y={newObject:f,object:t,property:u},b=v.typeFunction?v.typeFunction(y):v.reflectedType;v.options&&v.options.discriminator&&v.options.discriminator.property&&v.options.discriminator.subTypes?t[o]instanceof Array?g=v:(h.transformationType===i.PLAIN_TO_CLASS&&(g=void 0===(g=v.options.discriminator.subTypes.find((function(e){if(p&&p instanceof Object&&v.options.discriminator.property in p)return e.name===p[v.options.discriminator.property]})))?b:g.value,v.options.keepDiscriminatorProperty||p&&p instanceof Object&&v.options.discriminator.property in p&&delete p[v.options.discriminator.property]),h.transformationType===i.CLASS_TO_CLASS&&(g=p.constructor),h.transformationType===i.CLASS_TO_PLAIN&&p&&(p[v.options.discriminator.property]=v.options.discriminator.subTypes.find((function(e){return e.value===p.constructor})).name)):g=b,m=m||v.reflectedType===Map}else if(h.options.targetMaps)h.options.targetMaps.filter((function(e){return e.target===r&&!!e.properties[u]})).forEach((function(e){return g=e.properties[u]}));else if(h.options.enableImplicitConversion&&h.transformationType===i.PLAIN_TO_CLASS){var w=Reflect.getMetadata("design:type",r.prototype,u);w&&(g=w)}}var S=Array.isArray(t[o])?h.getReflectedType(r,u):void 0,x=e?e[o]:void 0;if(f.constructor.prototype){var C=Object.getOwnPropertyDescriptor(f.constructor.prototype,l);if((h.transformationType===i.PLAIN_TO_CLASS||h.transformationType===i.CLASS_TO_CLASS)&&(C&&!C.set||f[l]instanceof Function))return"continue"}if(h.options.enableCircularCheck&&h.isCircular(p))h.transformationType===i.CLASS_TO_CLASS&&(E=p,(void 0!==(E=h.applyCustomTransformations(E,r,n,t,h.transformationType))||h.options.exposeUnsetFields)&&(f instanceof Map?f.set(l,E):f[l]=E));else{var T=h.transformationType===i.PLAIN_TO_CLASS?l:n,E=void 0;h.transformationType===i.CLASS_TO_PLAIN?(E=t[T],E=h.applyCustomTransformations(E,r,T,t,h.transformationType),E=t[T]===E?p:E,E=h.transform(x,E,g,S,m,c+1)):void 0===p&&h.options.exposeDefaultValues?E=f[l]:(E=h.transform(x,p,g,S,m,c+1),E=h.applyCustomTransformations(E,r,T,t,h.transformationType)),(void 0!==E||h.options.exposeUnsetFields)&&(f instanceof Map?f.set(l,E):f[l]=E)}},h=this,m=0,v=p;m<v.length;m++)g(v[m]);return this.options.enableCircularCheck&&this.recursionStack.delete(t),f}return t}return t}return new Promise((function(e,n){t.then((function(t){return e(u.transform(void 0,t,r,void 0,void 0,c+1))}),n)}))}return null==t?t:Boolean(t)}return null==t?t:Number(t)}return null==t?t:String(t)},e.prototype.applyCustomTransformations=function(e,t,n,i,r){var o=this,s=a.findTransformMetadatas(t,n,this.transformationType);return void 0!==this.options.version&&(s=s.filter((function(e){return!e.options||o.checkVersion(e.options.since,e.options.until)}))),(s=this.options.groups&&this.options.groups.length?s.filter((function(e){return!e.options||o.checkGroups(e.options.groups)})):s.filter((function(e){return!e.options||!e.options.groups||!e.options.groups.length}))).forEach((function(t){e=t.transformFn({value:e,key:n,obj:i,type:r,options:o.options})})),e},e.prototype.isCircular=function(e){return this.recursionStack.has(e)},e.prototype.getReflectedType=function(e,t){if(e){var n=a.findTypeMetadata(e,t);return n?n.reflectedType:void 0}},e.prototype.getKeys=function(e,t,n){var o=this,s=a.getStrategy(e);"none"===s&&(s=this.options.strategy||"exposeAll");var c=[];if(("exposeAll"===s||n)&&(c=t instanceof Map?Array.from(t.keys()):Object.keys(t)),n)return c;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&e){var l=a.getExposedProperties(e,this.transformationType),u=a.getExcludedProperties(e,this.transformationType);c=r(r([],l,!0),u,!0)}if(!this.options.ignoreDecorators&&e){l=a.getExposedProperties(e,this.transformationType),this.transformationType===i.PLAIN_TO_CLASS&&(l=l.map((function(t){var n=a.findExposeMetadata(e,t);return n&&n.options&&n.options.name?n.options.name:t}))),c=this.options.excludeExtraneousValues?l:c.concat(l);var d=a.getExcludedProperties(e,this.transformationType);d.length>0&&(c=c.filter((function(e){return!d.includes(e)}))),void 0!==this.options.version&&(c=c.filter((function(t){var n=a.findExposeMetadata(e,t);return!n||!n.options||o.checkVersion(n.options.since,n.options.until)}))),c=this.options.groups&&this.options.groups.length?c.filter((function(t){var n=a.findExposeMetadata(e,t);return!n||!n.options||o.checkGroups(n.options.groups)})):c.filter((function(t){var n=a.findExposeMetadata(e,t);return!(n&&n.options&&n.options.groups&&n.options.groups.length)}))}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(c=c.filter((function(e){return o.options.excludePrefixes.every((function(t){return e.substr(0,t.length)!==t}))}))),c.filter((function(e,t,n){return n.indexOf(e)===t}))},e.prototype.checkVersion=function(e,t){var n=!0;return n&&e&&(n=this.options.version>=e),n&&t&&(n=this.options.version<t),n},e.prototype.checkGroups=function(e){return!e||this.options.groups.some((function(t){return e.includes(t)}))},e}(),s={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},c=function(){return c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},c.apply(this,arguments)},l=function(){function e(){}return e.prototype.instanceToPlain=function(e,t){return new o(i.CLASS_TO_PLAIN,c(c({},s),t)).transform(void 0,e,void 0,void 0,void 0,void 0)},e.prototype.classToPlainFromExist=function(e,t,n){return new o(i.CLASS_TO_PLAIN,c(c({},s),n)).transform(t,e,void 0,void 0,void 0,void 0)},e.prototype.plainToInstance=function(e,t,n){return new o(i.PLAIN_TO_CLASS,c(c({},s),n)).transform(void 0,t,e,void 0,void 0,void 0)},e.prototype.plainToClassFromExist=function(e,t,n){return new o(i.PLAIN_TO_CLASS,c(c({},s),n)).transform(e,t,void 0,void 0,void 0,void 0)},e.prototype.instanceToInstance=function(e,t){return new o(i.CLASS_TO_CLASS,c(c({},s),t)).transform(void 0,e,void 0,void 0,void 0,void 0)},e.prototype.classToClassFromExist=function(e,t,n){return new o(i.CLASS_TO_CLASS,c(c({},s),n)).transform(t,e,void 0,void 0,void 0,void 0)},e.prototype.serialize=function(e,t){return JSON.stringify(this.instanceToPlain(e,t))},e.prototype.deserialize=function(e,t,n){var i=JSON.parse(t);return this.plainToInstance(e,i,n)},e.prototype.deserializeArray=function(e,t,n){var i=JSON.parse(t);return this.plainToInstance(e,i,n)},e}();function u(e){return void 0===e&&(e={}),function(t,n){a.addExcludeMetadata({target:t instanceof Function?t:t.constructor,propertyName:n,options:e})}}function d(e){return void 0===e&&(e={}),function(t,n){a.addExposeMetadata({target:t instanceof Function?t:t.constructor,propertyName:n,options:e})}}function p(e){return function(t,n,i){var a=new l,r=i.value;i.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=r.apply(this,t);return!i||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then?a.instanceToInstance(i,e):i.then((function(t){return a.instanceToInstance(t,e)}))}}}function f(e){return function(t,n,i){var a=new l,r=i.value;i.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=r.apply(this,t);return!i||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then?a.instanceToPlain(i,e):i.then((function(t){return a.instanceToPlain(t,e)}))}}}function g(e,t){return function(n,i,a){var r=new l,o=a.value;a.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=o.apply(this,n);return!a||"object"!=typeof a&&"function"!=typeof a||"function"!=typeof a.then?r.plainToInstance(e,a,t):a.then((function(n){return r.plainToInstance(e,n,t)}))}}}function h(e,t){return void 0===t&&(t={}),function(n,i){a.addTransformMetadata({target:n.constructor,propertyName:i,transformFn:e,options:t})}}function m(e,t){return void 0===t&&(t={}),function(n,i){var r=Reflect.getMetadata("design:type",n,i);a.addTypeMetadata({target:n.constructor,propertyName:i,reflectedType:r,typeFunction:e,options:t})}}var v=new l;function y(e,t){return v.instanceToPlain(e,t)}function b(e,t){return v.instanceToPlain(e,t)}function w(e,t,n){return v.classToPlainFromExist(e,t,n)}function S(e,t,n){return v.plainToInstance(e,t,n)}function x(e,t,n){return v.plainToInstance(e,t,n)}function C(e,t,n){return v.plainToClassFromExist(e,t,n)}function T(e,t){return v.instanceToInstance(e,t)}function E(e,t,n){return v.classToClassFromExist(e,t,n)}function I(e,t){return v.serialize(e,t)}function _(e,t,n){return v.deserialize(e,t,n)}function A(e,t,n){return v.deserializeArray(e,t,n)}},2328:e=>{"use strict";const t=()=>{const e=new Error("Delay aborted");return e.name="AbortError",e},n=({clearTimeout:e,setTimeout:n,willResolve:i})=>(a,{value:r,signal:o}={})=>{if(o&&o.aborted)return Promise.reject(t());let s,c,l;const u=e||clearTimeout,d=()=>{u(s),l(t())},p=new Promise(((e,t)=>{c=()=>{o&&o.removeEventListener("abort",d),i?e(r):t(r)},l=t,s=(n||setTimeout)(c,a)}));return o&&o.addEventListener("abort",d,{once:!0}),p.clear=()=>{u(s),s=null,c()},p},i=e=>{const t=n({...e,willResolve:!0});return t.reject=n({...e,willResolve:!1}),t.range=(e,n,i)=>t(((e,t)=>Math.floor(Math.random()*(t-e+1)+e))(e,n),i),t},a=i();a.createWithTimers=i,e.exports=a,e.exports.default=a},7007:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(e,t){return new Promise((function(n,i){function a(n){e.removeListener(t,r),i(n)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}h(e,t,r,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&h(e,"error",t,{once:!0})}(e,a)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function l(e,t,n,i){var a,r,o,l;if(s(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),o=r[t]),void 0===o)o=r[t]=n,++e._eventsCount;else if("function"==typeof o?o=r[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(a=c(e))>0&&o.length>a&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=u.bind(i);return a.listener=n,i.wrapFn=a,a}function p(e,t,n){var i=e._events;if(void 0===i)return[];var a=i[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):g(a,a.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function h(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(r){i.once&&e.removeEventListener(t,a),n(r)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return c(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a="error"===e,r=this._events;if(void 0!==r)a=a&&void 0===r.error;else if(!a)return!1;if(a){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=r[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var l=c.length,u=g(c,l);for(n=0;n<l;++n)i(u[n],this,t)}return!0},r.prototype.addListener=function(e,t){return l(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return l(this,e,t,!0)},r.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,i,a,r,o;if(s(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){o=n[r].listener,a=r;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(a=r[i])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},r.prototype.listeners=function(e){return p(this,e,!0)},r.prototype.rawListeners=function(e){return p(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},r.prototype.listenerCount=f,r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},1873:(e,t,n)=>{var i=n(9325).Symbol;e.exports=i},4932:e=>{e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}},2552:(e,t,n)=>{var i=n(1873),a=n(659),r=n(9350),o=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?a(e):r(e)}},7556:(e,t,n)=>{var i=n(1873),a=n(4932),r=n(6449),o=n(4394),s=i?i.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(r(t))return a(t,e)+"";if(o(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},4840:(e,t,n)=>{var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=i},659:(e,t,n)=>{var i=n(1873),a=Object.prototype,r=a.hasOwnProperty,o=a.toString,s=i?i.toStringTag:void 0;e.exports=function(e){var t=r.call(e,s),n=e[s];try{e[s]=void 0;var i=!0}catch(e){}var a=o.call(e);return i&&(t?e[s]=n:delete e[s]),a}},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9325:(e,t,n)=>{var i=n(4840),a="object"==typeof self&&self&&self.Object===Object&&self,r=i||a||Function("return this")();e.exports=r},680:(e,t,n)=>{var i=n(3222),a=/[\\^$.*+?()[\]{}|]/g,r=RegExp(a.source);e.exports=function(e){return(e=i(e))&&r.test(e)?e.replace(a,"\\$&"):e}},6449:e=>{var t=Array.isArray;e.exports=t},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},4394:(e,t,n)=>{var i=n(2552),a=n(346);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==i(e)}},2543:function(e,t,n){var i;e=n.nmd(e),function(){var a,r="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",c=32,l=128,u=1/0,d=9007199254740991,p=NaN,f=4294967295,g=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",c],["partialRight",64],["rearg",256]],h="[object Arguments]",m="[object Array]",v="[object Boolean]",y="[object Date]",b="[object Error]",w="[object Function]",S="[object GeneratorFunction]",x="[object Map]",C="[object Number]",T="[object Object]",E="[object Promise]",I="[object RegExp]",_="[object Set]",A="[object String]",D="[object Symbol]",k="[object WeakMap]",P="[object ArrayBuffer]",B="[object DataView]",R="[object Float32Array]",O="[object Float64Array]",U="[object Int8Array]",N="[object Int16Array]",M="[object Int32Array]",F="[object Uint8Array]",L="[object Uint8ClampedArray]",j="[object Uint16Array]",V="[object Uint32Array]",K=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,G=RegExp(W.source),$=RegExp(H.source),Q=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(te.source),ie=/^\s+/,ae=/\s/,re=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oe=/\{\n\/\* \[wrapped with (.+)\] \*/,se=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,le=/[()=,{}\[\]\/\s]/,ue=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,he=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,ve=/^(?:0|[1-9]\d*)$/,ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,we=/['\n\r\u2028\u2029\\]/g,Se="\\ud800-\\udfff",xe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ce="\\u2700-\\u27bf",Te="a-z\\xdf-\\xf6\\xf8-\\xff",Ee="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",_e="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ae="["+Se+"]",De="["+_e+"]",ke="["+xe+"]",Pe="\\d+",Be="["+Ce+"]",Re="["+Te+"]",Oe="[^"+Se+_e+Pe+Ce+Te+Ee+"]",Ue="\\ud83c[\\udffb-\\udfff]",Ne="[^"+Se+"]",Me="(?:\\ud83c[\\udde6-\\uddff]){2}",Fe="[\\ud800-\\udbff][\\udc00-\\udfff]",Le="["+Ee+"]",je="\\u200d",Ve="(?:"+Re+"|"+Oe+")",Ke="(?:"+Le+"|"+Oe+")",qe="(?:['’](?:d|ll|m|re|s|t|ve))?",ze="(?:['’](?:D|LL|M|RE|S|T|VE))?",We="(?:"+ke+"|"+Ue+")?",He="["+Ie+"]?",Ge=He+We+"(?:"+je+"(?:"+[Ne,Me,Fe].join("|")+")"+He+We+")*",$e="(?:"+[Be,Me,Fe].join("|")+")"+Ge,Qe="(?:"+[Ne+ke+"?",ke,Me,Fe,Ae].join("|")+")",Ye=RegExp("['’]","g"),Xe=RegExp(ke,"g"),Je=RegExp(Ue+"(?="+Ue+")|"+Qe+Ge,"g"),Ze=RegExp([Le+"?"+Re+"+"+qe+"(?="+[De,Le,"$"].join("|")+")",Ke+"+"+ze+"(?="+[De,Le+Ve,"$"].join("|")+")",Le+"?"+Ve+"+"+qe,Le+"+"+ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pe,$e].join("|"),"g"),et=RegExp("["+je+Se+xe+Ie+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,at={};at[R]=at[O]=at[U]=at[N]=at[M]=at[F]=at[L]=at[j]=at[V]=!0,at[h]=at[m]=at[P]=at[v]=at[B]=at[y]=at[b]=at[w]=at[x]=at[C]=at[T]=at[I]=at[_]=at[A]=at[k]=!1;var rt={};rt[h]=rt[m]=rt[P]=rt[B]=rt[v]=rt[y]=rt[R]=rt[O]=rt[U]=rt[N]=rt[M]=rt[x]=rt[C]=rt[T]=rt[I]=rt[_]=rt[A]=rt[D]=rt[F]=rt[L]=rt[j]=rt[V]=!0,rt[b]=rt[w]=rt[k]=!1;var ot={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},st=parseFloat,ct=parseInt,lt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ut="object"==typeof self&&self&&self.Object===Object&&self,dt=lt||ut||Function("return this")(),pt=t&&!t.nodeType&&t,ft=pt&&e&&!e.nodeType&&e,gt=ft&&ft.exports===pt,ht=gt&&lt.process,mt=function(){try{return ft&&ft.require&&ft.require("util").types||ht&&ht.binding&&ht.binding("util")}catch(e){}}(),vt=mt&&mt.isArrayBuffer,yt=mt&&mt.isDate,bt=mt&&mt.isMap,wt=mt&&mt.isRegExp,St=mt&&mt.isSet,xt=mt&&mt.isTypedArray;function Ct(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Tt(e,t,n,i){for(var a=-1,r=null==e?0:e.length;++a<r;){var o=e[a];t(i,o,n(o),e)}return i}function Et(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function _t(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function At(e,t){for(var n=-1,i=null==e?0:e.length,a=0,r=[];++n<i;){var o=e[n];t(o,n,e)&&(r[a++]=o)}return r}function Dt(e,t){return!(null==e||!e.length)&&Lt(e,t,0)>-1}function kt(e,t,n){for(var i=-1,a=null==e?0:e.length;++i<a;)if(n(t,e[i]))return!0;return!1}function Pt(e,t){for(var n=-1,i=null==e?0:e.length,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}function Bt(e,t){for(var n=-1,i=t.length,a=e.length;++n<i;)e[a+n]=t[n];return e}function Rt(e,t,n,i){var a=-1,r=null==e?0:e.length;for(i&&r&&(n=e[++a]);++a<r;)n=t(n,e[a],a,e);return n}function Ot(e,t,n,i){var a=null==e?0:e.length;for(i&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function Ut(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var Nt=qt("length");function Mt(e,t,n){var i;return n(e,(function(e,n,a){if(t(e,n,a))return i=n,!1})),i}function Ft(e,t,n,i){for(var a=e.length,r=n+(i?1:-1);i?r--:++r<a;)if(t(e[r],r,e))return r;return-1}function Lt(e,t,n){return t==t?function(e,t,n){for(var i=n-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}(e,t,n):Ft(e,Vt,n)}function jt(e,t,n,i){for(var a=n-1,r=e.length;++a<r;)if(i(e[a],t))return a;return-1}function Vt(e){return e!=e}function Kt(e,t){var n=null==e?0:e.length;return n?Ht(e,t)/n:p}function qt(e){return function(t){return null==t?a:t[e]}}function zt(e){return function(t){return null==e?a:e[t]}}function Wt(e,t,n,i,a){return a(e,(function(e,a,r){n=i?(i=!1,e):t(n,e,a,r)})),n}function Ht(e,t){for(var n,i=-1,r=e.length;++i<r;){var o=t(e[i]);o!==a&&(n=n===a?o:n+o)}return n}function Gt(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function $t(e){return e?e.slice(0,pn(e)+1).replace(ie,""):e}function Qt(e){return function(t){return e(t)}}function Yt(e,t){return Pt(t,(function(t){return e[t]}))}function Xt(e,t){return e.has(t)}function Jt(e,t){for(var n=-1,i=e.length;++n<i&&Lt(t,e[n],0)>-1;);return n}function Zt(e,t){for(var n=e.length;n--&&Lt(t,e[n],0)>-1;);return n}var en=zt({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),tn=zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(e){return"\\"+ot[e]}function an(e){return et.test(e)}function rn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function on(e,t){return function(n){return e(t(n))}}function sn(e,t){for(var n=-1,i=e.length,a=0,r=[];++n<i;){var o=e[n];o!==t&&o!==s||(e[n]=s,r[a++]=n)}return r}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function un(e){return an(e)?function(e){for(var t=Je.lastIndex=0;Je.test(e);)++t;return t}(e):Nt(e)}function dn(e){return an(e)?function(e){return e.match(Je)||[]}(e):function(e){return e.split("")}(e)}function pn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var fn=zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),gn=function e(t){var n,i=(t=null==t?dt:gn.defaults(dt.Object(),t,gn.pick(dt,nt))).Array,ae=t.Date,Se=t.Error,xe=t.Function,Ce=t.Math,Te=t.Object,Ee=t.RegExp,Ie=t.String,_e=t.TypeError,Ae=i.prototype,De=xe.prototype,ke=Te.prototype,Pe=t["__core-js_shared__"],Be=De.toString,Re=ke.hasOwnProperty,Oe=0,Ue=(n=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ne=ke.toString,Me=Be.call(Te),Fe=dt._,Le=Ee("^"+Be.call(Re).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=gt?t.Buffer:a,Ve=t.Symbol,Ke=t.Uint8Array,qe=je?je.allocUnsafe:a,ze=on(Te.getPrototypeOf,Te),We=Te.create,He=ke.propertyIsEnumerable,Ge=Ae.splice,$e=Ve?Ve.isConcatSpreadable:a,Qe=Ve?Ve.iterator:a,Je=Ve?Ve.toStringTag:a,et=function(){try{var e=cr(Te,"defineProperty");return e({},"",{}),e}catch(e){}}(),ot=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,lt=ae&&ae.now!==dt.Date.now&&ae.now,ut=t.setTimeout!==dt.setTimeout&&t.setTimeout,pt=Ce.ceil,ft=Ce.floor,ht=Te.getOwnPropertySymbols,mt=je?je.isBuffer:a,Nt=t.isFinite,zt=Ae.join,hn=on(Te.keys,Te),mn=Ce.max,vn=Ce.min,yn=ae.now,bn=t.parseInt,wn=Ce.random,Sn=Ae.reverse,xn=cr(t,"DataView"),Cn=cr(t,"Map"),Tn=cr(t,"Promise"),En=cr(t,"Set"),In=cr(t,"WeakMap"),_n=cr(Te,"create"),An=In&&new In,Dn={},kn=Nr(xn),Pn=Nr(Cn),Bn=Nr(Tn),Rn=Nr(En),On=Nr(In),Un=Ve?Ve.prototype:a,Nn=Un?Un.valueOf:a,Mn=Un?Un.toString:a;function Fn(e){if(es(e)&&!qo(e)&&!(e instanceof Kn)){if(e instanceof Vn)return e;if(Re.call(e,"__wrapped__"))return Mr(e)}return new Vn(e)}var Ln=function(){function e(){}return function(t){if(!Zo(t))return{};if(We)return We(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function jn(){}function Vn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function Kn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Wn;++t<n;)this.add(e[t])}function Gn(e){var t=this.__data__=new zn(e);this.size=t.size}function $n(e,t){var n=qo(e),i=!n&&Ko(e),a=!n&&!i&&Go(e),r=!n&&!i&&!a&&cs(e),o=n||i||a||r,s=o?Gt(e.length,Ie):[],c=s.length;for(var l in e)!t&&!Re.call(e,l)||o&&("length"==l||a&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||hr(l,c))||s.push(l);return s}function Qn(e){var t=e.length;return t?e[Wi(0,t-1)]:a}function Yn(e,t){return Pr(Ia(e),ri(t,0,e.length))}function Xn(e){return Pr(Ia(e))}function Jn(e,t,n){(n!==a&&!Lo(e[t],n)||n===a&&!(t in e))&&ii(e,t,n)}function Zn(e,t,n){var i=e[t];Re.call(e,t)&&Lo(i,n)&&(n!==a||t in e)||ii(e,t,n)}function ei(e,t){for(var n=e.length;n--;)if(Lo(e[n][0],t))return n;return-1}function ti(e,t,n,i){return ui(e,(function(e,a,r){t(i,e,n(e),r)})),i}function ni(e,t){return e&&_a(t,ks(t),e)}function ii(e,t,n){"__proto__"==t&&et?et(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ai(e,t){for(var n=-1,r=t.length,o=i(r),s=null==e;++n<r;)o[n]=s?a:Es(e,t[n]);return o}function ri(e,t,n){return e==e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function oi(e,t,n,i,r,o){var s,c=1&t,l=2&t,u=4&t;if(n&&(s=r?n(e,i,r,o):n(e)),s!==a)return s;if(!Zo(e))return e;var d=qo(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Re.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!c)return Ia(e,s)}else{var p=dr(e),f=p==w||p==S;if(Go(e))return wa(e,c);if(p==T||p==h||f&&!r){if(s=l||f?{}:fr(e),!c)return l?function(e,t){return _a(e,ur(e),t)}(e,function(e,t){return e&&_a(t,Ps(t),e)}(s,e)):function(e,t){return _a(e,lr(e),t)}(e,ni(s,e))}else{if(!rt[p])return r?e:{};s=function(e,t,n){var i,a=e.constructor;switch(t){case P:return Sa(e);case v:case y:return new a(+e);case B:return function(e,t){var n=t?Sa(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case R:case O:case U:case N:case M:case F:case L:case j:case V:return xa(e,n);case x:return new a;case C:case A:return new a(e);case I:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return new a;case D:return i=e,Nn?Te(Nn.call(i)):{}}}(e,p,c)}}o||(o=new Gn);var g=o.get(e);if(g)return g;o.set(e,s),rs(e)?e.forEach((function(i){s.add(oi(i,t,n,i,e,o))})):ts(e)&&e.forEach((function(i,a){s.set(a,oi(i,t,n,a,e,o))}));var m=d?a:(u?l?tr:er:l?Ps:ks)(e);return Et(m||e,(function(i,a){m&&(i=e[a=i]),Zn(s,a,oi(i,t,n,a,e,o))})),s}function si(e,t,n){var i=n.length;if(null==e)return!i;for(e=Te(e);i--;){var r=n[i],o=t[r],s=e[r];if(s===a&&!(r in e)||!o(s))return!1}return!0}function ci(e,t,n){if("function"!=typeof e)throw new _e(r);return _r((function(){e.apply(a,n)}),t)}function li(e,t,n,i){var a=-1,r=Dt,o=!0,s=e.length,c=[],l=t.length;if(!s)return c;n&&(t=Pt(t,Qt(n))),i?(r=kt,o=!1):t.length>=200&&(r=Xt,o=!1,t=new Hn(t));e:for(;++a<s;){var u=e[a],d=null==n?u:n(u);if(u=i||0!==u?u:0,o&&d==d){for(var p=l;p--;)if(t[p]===d)continue e;c.push(u)}else r(t,d,i)||c.push(u)}return c}Fn.templateSettings={escape:Q,evaluate:Y,interpolate:X,variable:"",imports:{_:Fn}},Fn.prototype=jn.prototype,Fn.prototype.constructor=Fn,Vn.prototype=Ln(jn.prototype),Vn.prototype.constructor=Vn,Kn.prototype=Ln(jn.prototype),Kn.prototype.constructor=Kn,qn.prototype.clear=function(){this.__data__=_n?_n(null):{},this.size=0},qn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},qn.prototype.get=function(e){var t=this.__data__;if(_n){var n=t[e];return n===o?a:n}return Re.call(t,e)?t[e]:a},qn.prototype.has=function(e){var t=this.__data__;return _n?t[e]!==a:Re.call(t,e)},qn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=_n&&t===a?o:t,this},zn.prototype.clear=function(){this.__data__=[],this.size=0},zn.prototype.delete=function(e){var t=this.__data__,n=ei(t,e);return!(n<0||(n==t.length-1?t.pop():Ge.call(t,n,1),--this.size,0))},zn.prototype.get=function(e){var t=this.__data__,n=ei(t,e);return n<0?a:t[n][1]},zn.prototype.has=function(e){return ei(this.__data__,e)>-1},zn.prototype.set=function(e,t){var n=this.__data__,i=ei(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Wn.prototype.clear=function(){this.size=0,this.__data__={hash:new qn,map:new(Cn||zn),string:new qn}},Wn.prototype.delete=function(e){var t=or(this,e).delete(e);return this.size-=t?1:0,t},Wn.prototype.get=function(e){return or(this,e).get(e)},Wn.prototype.has=function(e){return or(this,e).has(e)},Wn.prototype.set=function(e,t){var n=or(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Hn.prototype.add=Hn.prototype.push=function(e){return this.__data__.set(e,o),this},Hn.prototype.has=function(e){return this.__data__.has(e)},Gn.prototype.clear=function(){this.__data__=new zn,this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Gn.prototype.get=function(e){return this.__data__.get(e)},Gn.prototype.has=function(e){return this.__data__.has(e)},Gn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof zn){var i=n.__data__;if(!Cn||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Wn(i)}return n.set(e,t),this.size=n.size,this};var ui=ka(yi),di=ka(bi,!0);function pi(e,t){var n=!0;return ui(e,(function(e,i,a){return n=!!t(e,i,a)})),n}function fi(e,t,n){for(var i=-1,r=e.length;++i<r;){var o=e[i],s=t(o);if(null!=s&&(c===a?s==s&&!ss(s):n(s,c)))var c=s,l=o}return l}function gi(e,t){var n=[];return ui(e,(function(e,i,a){t(e,i,a)&&n.push(e)})),n}function hi(e,t,n,i,a){var r=-1,o=e.length;for(n||(n=gr),a||(a=[]);++r<o;){var s=e[r];t>0&&n(s)?t>1?hi(s,t-1,n,i,a):Bt(a,s):i||(a[a.length]=s)}return a}var mi=Pa(),vi=Pa(!0);function yi(e,t){return e&&mi(e,t,ks)}function bi(e,t){return e&&vi(e,t,ks)}function wi(e,t){return At(t,(function(t){return Yo(e[t])}))}function Si(e,t){for(var n=0,i=(t=ma(t,e)).length;null!=e&&n<i;)e=e[Ur(t[n++])];return n&&n==i?e:a}function xi(e,t,n){var i=t(e);return qo(e)?i:Bt(i,n(e))}function Ci(e){return null==e?e===a?"[object Undefined]":"[object Null]":Je&&Je in Te(e)?function(e){var t=Re.call(e,Je),n=e[Je];try{e[Je]=a;var i=!0}catch(e){}var r=Ne.call(e);return i&&(t?e[Je]=n:delete e[Je]),r}(e):function(e){return Ne.call(e)}(e)}function Ti(e,t){return e>t}function Ei(e,t){return null!=e&&Re.call(e,t)}function Ii(e,t){return null!=e&&t in Te(e)}function _i(e,t,n){for(var r=n?kt:Dt,o=e[0].length,s=e.length,c=s,l=i(s),u=1/0,d=[];c--;){var p=e[c];c&&t&&(p=Pt(p,Qt(t))),u=vn(p.length,u),l[c]=!n&&(t||o>=120&&p.length>=120)?new Hn(c&&p):a}p=e[0];var f=-1,g=l[0];e:for(;++f<o&&d.length<u;){var h=p[f],m=t?t(h):h;if(h=n||0!==h?h:0,!(g?Xt(g,m):r(d,m,n))){for(c=s;--c;){var v=l[c];if(!(v?Xt(v,m):r(e[c],m,n)))continue e}g&&g.push(m),d.push(h)}}return d}function Ai(e,t,n){var i=null==(e=Tr(e,t=ma(t,e)))?e:e[Ur($r(t))];return null==i?a:Ct(i,e,n)}function Di(e){return es(e)&&Ci(e)==h}function ki(e,t,n,i,r){return e===t||(null==e||null==t||!es(e)&&!es(t)?e!=e&&t!=t:function(e,t,n,i,r,o){var s=qo(e),c=qo(t),l=s?m:dr(e),u=c?m:dr(t),d=(l=l==h?T:l)==T,p=(u=u==h?T:u)==T,f=l==u;if(f&&Go(e)){if(!Go(t))return!1;s=!0,d=!1}if(f&&!d)return o||(o=new Gn),s||cs(e)?Ja(e,t,n,i,r,o):function(e,t,n,i,a,r,o){switch(n){case B:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!r(new Ke(e),new Ke(t)));case v:case y:case C:return Lo(+e,+t);case b:return e.name==t.name&&e.message==t.message;case I:case A:return e==t+"";case x:var s=rn;case _:var c=1&i;if(s||(s=cn),e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;i|=2,o.set(e,t);var u=Ja(s(e),s(t),i,a,r,o);return o.delete(e),u;case D:if(Nn)return Nn.call(e)==Nn.call(t)}return!1}(e,t,l,n,i,r,o);if(!(1&n)){var g=d&&Re.call(e,"__wrapped__"),w=p&&Re.call(t,"__wrapped__");if(g||w){var S=g?e.value():e,E=w?t.value():t;return o||(o=new Gn),r(S,E,n,i,o)}}return!!f&&(o||(o=new Gn),function(e,t,n,i,r,o){var s=1&n,c=er(e),l=c.length;if(l!=er(t).length&&!s)return!1;for(var u=l;u--;){var d=c[u];if(!(s?d in t:Re.call(t,d)))return!1}var p=o.get(e),f=o.get(t);if(p&&f)return p==t&&f==e;var g=!0;o.set(e,t),o.set(t,e);for(var h=s;++u<l;){var m=e[d=c[u]],v=t[d];if(i)var y=s?i(v,m,d,t,e,o):i(m,v,d,e,t,o);if(!(y===a?m===v||r(m,v,n,i,o):y)){g=!1;break}h||(h="constructor"==d)}if(g&&!h){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(g=!1)}return o.delete(e),o.delete(t),g}(e,t,n,i,r,o))}(e,t,n,i,ki,r))}function Pi(e,t,n,i){var r=n.length,o=r,s=!i;if(null==e)return!o;for(e=Te(e);r--;){var c=n[r];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++r<o;){var l=(c=n[r])[0],u=e[l],d=c[1];if(s&&c[2]){if(u===a&&!(l in e))return!1}else{var p=new Gn;if(i)var f=i(u,d,l,e,t,p);if(!(f===a?ki(d,u,3,i,p):f))return!1}}return!0}function Bi(e){return!(!Zo(e)||(t=e,Ue&&Ue in t))&&(Yo(e)?Le:he).test(Nr(e));var t}function Ri(e){return"function"==typeof e?e:null==e?nc:"object"==typeof e?qo(e)?Fi(e[0],e[1]):Mi(e):dc(e)}function Oi(e){if(!wr(e))return hn(e);var t=[];for(var n in Te(e))Re.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ui(e,t){return e<t}function Ni(e,t){var n=-1,a=Wo(e)?i(e.length):[];return ui(e,(function(e,i,r){a[++n]=t(e,i,r)})),a}function Mi(e){var t=sr(e);return 1==t.length&&t[0][2]?xr(t[0][0],t[0][1]):function(n){return n===e||Pi(n,e,t)}}function Fi(e,t){return vr(e)&&Sr(t)?xr(Ur(e),t):function(n){var i=Es(n,e);return i===a&&i===t?Is(n,e):ki(t,i,3)}}function Li(e,t,n,i,r){e!==t&&mi(t,(function(o,s){if(r||(r=new Gn),Zo(o))!function(e,t,n,i,r,o,s){var c=Er(e,n),l=Er(t,n),u=s.get(l);if(u)Jn(e,n,u);else{var d=o?o(c,l,n+"",e,t,s):a,p=d===a;if(p){var f=qo(l),g=!f&&Go(l),h=!f&&!g&&cs(l);d=l,f||g||h?qo(c)?d=c:Ho(c)?d=Ia(c):g?(p=!1,d=wa(l,!0)):h?(p=!1,d=xa(l,!0)):d=[]:is(l)||Ko(l)?(d=c,Ko(c)?d=ms(c):Zo(c)&&!Yo(c)||(d=fr(l))):p=!1}p&&(s.set(l,d),r(d,l,i,o,s),s.delete(l)),Jn(e,n,d)}}(e,t,s,n,Li,i,r);else{var c=i?i(Er(e,s),o,s+"",e,t,r):a;c===a&&(c=o),Jn(e,s,c)}}),Ps)}function ji(e,t){var n=e.length;if(n)return hr(t+=t<0?n:0,n)?e[t]:a}function Vi(e,t,n){t=t.length?Pt(t,(function(e){return qo(e)?function(t){return Si(t,1===e.length?e[0]:e)}:e})):[nc];var i=-1;t=Pt(t,Qt(rr()));var a=Ni(e,(function(e,n,a){var r=Pt(t,(function(t){return t(e)}));return{criteria:r,index:++i,value:e}}));return function(e){var t=e.length;for(e.sort((function(e,t){return function(e,t,n){for(var i=-1,a=e.criteria,r=t.criteria,o=a.length,s=n.length;++i<o;){var c=Ca(a[i],r[i]);if(c)return i>=s?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}(e,t,n)}));t--;)e[t]=e[t].value;return e}(a)}function Ki(e,t,n){for(var i=-1,a=t.length,r={};++i<a;){var o=t[i],s=Si(e,o);n(s,o)&&Yi(r,ma(o,e),s)}return r}function qi(e,t,n,i){var a=i?jt:Lt,r=-1,o=t.length,s=e;for(e===t&&(t=Ia(t)),n&&(s=Pt(e,Qt(n)));++r<o;)for(var c=0,l=t[r],u=n?n(l):l;(c=a(s,u,c,i))>-1;)s!==e&&Ge.call(s,c,1),Ge.call(e,c,1);return e}function zi(e,t){for(var n=e?t.length:0,i=n-1;n--;){var a=t[n];if(n==i||a!==r){var r=a;hr(a)?Ge.call(e,a,1):ca(e,a)}}return e}function Wi(e,t){return e+ft(wn()*(t-e+1))}function Hi(e,t){var n="";if(!e||t<1||t>d)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function Gi(e,t){return Ar(Cr(e,t,nc),e+"")}function $i(e){return Qn(Ls(e))}function Qi(e,t){var n=Ls(e);return Pr(n,ri(t,0,n.length))}function Yi(e,t,n,i){if(!Zo(e))return e;for(var r=-1,o=(t=ma(t,e)).length,s=o-1,c=e;null!=c&&++r<o;){var l=Ur(t[r]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(r!=s){var d=c[l];(u=i?i(d,l,c):a)===a&&(u=Zo(d)?d:hr(t[r+1])?[]:{})}Zn(c,l,u),c=c[l]}return e}var Xi=An?function(e,t){return An.set(e,t),e}:nc,Ji=et?function(e,t){return et(e,"toString",{configurable:!0,enumerable:!1,value:Zs(t),writable:!0})}:nc;function Zi(e){return Pr(Ls(e))}function ea(e,t,n){var a=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=i(r);++a<r;)o[a]=e[a+t];return o}function ta(e,t){var n;return ui(e,(function(e,i,a){return!(n=t(e,i,a))})),!!n}function na(e,t,n){var i=0,a=null==e?i:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;i<a;){var r=i+a>>>1,o=e[r];null!==o&&!ss(o)&&(n?o<=t:o<t)?i=r+1:a=r}return a}return ia(e,t,nc,n)}function ia(e,t,n,i){var r=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!=t,c=null===t,l=ss(t),u=t===a;r<o;){var d=ft((r+o)/2),p=n(e[d]),f=p!==a,g=null===p,h=p==p,m=ss(p);if(s)var v=i||h;else v=u?h&&(i||f):c?h&&f&&(i||!g):l?h&&f&&!g&&(i||!m):!g&&!m&&(i?p<=t:p<t);v?r=d+1:o=d}return vn(o,4294967294)}function aa(e,t){for(var n=-1,i=e.length,a=0,r=[];++n<i;){var o=e[n],s=t?t(o):o;if(!n||!Lo(s,c)){var c=s;r[a++]=0===o?0:o}}return r}function ra(e){return"number"==typeof e?e:ss(e)?p:+e}function oa(e){if("string"==typeof e)return e;if(qo(e))return Pt(e,oa)+"";if(ss(e))return Mn?Mn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function sa(e,t,n){var i=-1,a=Dt,r=e.length,o=!0,s=[],c=s;if(n)o=!1,a=kt;else if(r>=200){var l=t?null:Ha(e);if(l)return cn(l);o=!1,a=Xt,c=new Hn}else c=t?[]:s;e:for(;++i<r;){var u=e[i],d=t?t(u):u;if(u=n||0!==u?u:0,o&&d==d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),s.push(u)}else a(c,d,n)||(c!==s&&c.push(d),s.push(u))}return s}function ca(e,t){return null==(e=Tr(e,t=ma(t,e)))||delete e[Ur($r(t))]}function la(e,t,n,i){return Yi(e,t,n(Si(e,t)),i)}function ua(e,t,n,i){for(var a=e.length,r=i?a:-1;(i?r--:++r<a)&&t(e[r],r,e););return n?ea(e,i?0:r,i?r+1:a):ea(e,i?r+1:0,i?a:r)}function da(e,t){var n=e;return n instanceof Kn&&(n=n.value()),Rt(t,(function(e,t){return t.func.apply(t.thisArg,Bt([e],t.args))}),n)}function pa(e,t,n){var a=e.length;if(a<2)return a?sa(e[0]):[];for(var r=-1,o=i(a);++r<a;)for(var s=e[r],c=-1;++c<a;)c!=r&&(o[r]=li(o[r]||s,e[c],t,n));return sa(hi(o,1),t,n)}function fa(e,t,n){for(var i=-1,r=e.length,o=t.length,s={};++i<r;){var c=i<o?t[i]:a;n(s,e[i],c)}return s}function ga(e){return Ho(e)?e:[]}function ha(e){return"function"==typeof e?e:nc}function ma(e,t){return qo(e)?e:vr(e,t)?[e]:Or(vs(e))}var va=Gi;function ya(e,t,n){var i=e.length;return n=n===a?i:n,!t&&n>=i?e:ea(e,t,n)}var ba=ot||function(e){return dt.clearTimeout(e)};function wa(e,t){if(t)return e.slice();var n=e.length,i=qe?qe(n):new e.constructor(n);return e.copy(i),i}function Sa(e){var t=new e.constructor(e.byteLength);return new Ke(t).set(new Ke(e)),t}function xa(e,t){var n=t?Sa(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ca(e,t){if(e!==t){var n=e!==a,i=null===e,r=e==e,o=ss(e),s=t!==a,c=null===t,l=t==t,u=ss(t);if(!c&&!u&&!o&&e>t||o&&s&&l&&!c&&!u||i&&s&&l||!n&&l||!r)return 1;if(!i&&!o&&!u&&e<t||u&&n&&r&&!i&&!o||c&&n&&r||!s&&r||!l)return-1}return 0}function Ta(e,t,n,a){for(var r=-1,o=e.length,s=n.length,c=-1,l=t.length,u=mn(o-s,0),d=i(l+u),p=!a;++c<l;)d[c]=t[c];for(;++r<s;)(p||r<o)&&(d[n[r]]=e[r]);for(;u--;)d[c++]=e[r++];return d}function Ea(e,t,n,a){for(var r=-1,o=e.length,s=-1,c=n.length,l=-1,u=t.length,d=mn(o-c,0),p=i(d+u),f=!a;++r<d;)p[r]=e[r];for(var g=r;++l<u;)p[g+l]=t[l];for(;++s<c;)(f||r<o)&&(p[g+n[s]]=e[r++]);return p}function Ia(e,t){var n=-1,a=e.length;for(t||(t=i(a));++n<a;)t[n]=e[n];return t}function _a(e,t,n,i){var r=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var c=t[o],l=i?i(n[c],e[c],c,n,e):a;l===a&&(l=e[c]),r?ii(n,c,l):Zn(n,c,l)}return n}function Aa(e,t){return function(n,i){var a=qo(n)?Tt:ti,r=t?t():{};return a(n,e,rr(i,2),r)}}function Da(e){return Gi((function(t,n){var i=-1,r=n.length,o=r>1?n[r-1]:a,s=r>2?n[2]:a;for(o=e.length>3&&"function"==typeof o?(r--,o):a,s&&mr(n[0],n[1],s)&&(o=r<3?a:o,r=1),t=Te(t);++i<r;){var c=n[i];c&&e(t,c,i,o)}return t}))}function ka(e,t){return function(n,i){if(null==n)return n;if(!Wo(n))return e(n,i);for(var a=n.length,r=t?a:-1,o=Te(n);(t?r--:++r<a)&&!1!==i(o[r],r,o););return n}}function Pa(e){return function(t,n,i){for(var a=-1,r=Te(t),o=i(t),s=o.length;s--;){var c=o[e?s:++a];if(!1===n(r[c],c,r))break}return t}}function Ba(e){return function(t){var n=an(t=vs(t))?dn(t):a,i=n?n[0]:t.charAt(0),r=n?ya(n,1).join(""):t.slice(1);return i[e]()+r}}function Ra(e){return function(t){return Rt(Ys(Ks(t).replace(Ye,"")),e,"")}}function Oa(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Ln(e.prototype),i=e.apply(n,t);return Zo(i)?i:n}}function Ua(e){return function(t,n,i){var r=Te(t);if(!Wo(t)){var o=rr(n,3);t=ks(t),n=function(e){return o(r[e],e,r)}}var s=e(t,n,i);return s>-1?r[o?t[s]:s]:a}}function Na(e){return Za((function(t){var n=t.length,i=n,o=Vn.prototype.thru;for(e&&t.reverse();i--;){var s=t[i];if("function"!=typeof s)throw new _e(r);if(o&&!c&&"wrapper"==ir(s))var c=new Vn([],!0)}for(i=c?i:n;++i<n;){var l=ir(s=t[i]),u="wrapper"==l?nr(s):a;c=u&&yr(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[ir(u[0])].apply(c,u[3]):1==s.length&&yr(s)?c[l]():c.thru(s)}return function(){var e=arguments,i=e[0];if(c&&1==e.length&&qo(i))return c.plant(i).value();for(var a=0,r=n?t[a].apply(this,e):i;++a<n;)r=t[a].call(this,r);return r}}))}function Ma(e,t,n,r,o,s,c,u,d,p){var f=t&l,g=1&t,h=2&t,m=24&t,v=512&t,y=h?a:Oa(e);return function l(){for(var b=arguments.length,w=i(b),S=b;S--;)w[S]=arguments[S];if(m)var x=ar(l),C=function(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}(w,x);if(r&&(w=Ta(w,r,o,m)),s&&(w=Ea(w,s,c,m)),b-=C,m&&b<p){var T=sn(w,x);return za(e,t,Ma,l.placeholder,n,w,T,u,d,p-b)}var E=g?n:this,I=h?E[e]:e;return b=w.length,u?w=function(e,t){for(var n=e.length,i=vn(t.length,n),r=Ia(e);i--;){var o=t[i];e[i]=hr(o,n)?r[o]:a}return e}(w,u):v&&b>1&&w.reverse(),f&&d<b&&(w.length=d),this&&this!==dt&&this instanceof l&&(I=y||Oa(I)),I.apply(E,w)}}function Fa(e,t){return function(n,i){return function(e,t,n,i){return yi(e,(function(e,a,r){t(i,n(e),a,r)})),i}(n,e,t(i),{})}}function La(e,t){return function(n,i){var r;if(n===a&&i===a)return t;if(n!==a&&(r=n),i!==a){if(r===a)return i;"string"==typeof n||"string"==typeof i?(n=oa(n),i=oa(i)):(n=ra(n),i=ra(i)),r=e(n,i)}return r}}function ja(e){return Za((function(t){return t=Pt(t,Qt(rr())),Gi((function(n){var i=this;return e(t,(function(e){return Ct(e,i,n)}))}))}))}function Va(e,t){var n=(t=t===a?" ":oa(t)).length;if(n<2)return n?Hi(t,e):t;var i=Hi(t,pt(e/un(t)));return an(t)?ya(dn(i),0,e).join(""):i.slice(0,e)}function Ka(e){return function(t,n,r){return r&&"number"!=typeof r&&mr(t,n,r)&&(n=r=a),t=ps(t),n===a?(n=t,t=0):n=ps(n),function(e,t,n,a){for(var r=-1,o=mn(pt((t-e)/(n||1)),0),s=i(o);o--;)s[a?o:++r]=e,e+=n;return s}(t,n,r=r===a?t<n?1:-1:ps(r),e)}}function qa(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=hs(t),n=hs(n)),e(t,n)}}function za(e,t,n,i,r,o,s,l,u,d){var p=8&t;t|=p?c:64,4&(t&=~(p?64:c))||(t&=-4);var f=[e,t,r,p?o:a,p?s:a,p?a:o,p?a:s,l,u,d],g=n.apply(a,f);return yr(e)&&Ir(g,f),g.placeholder=i,Dr(g,e,t)}function Wa(e){var t=Ce[e];return function(e,n){if(e=hs(e),(n=null==n?0:vn(fs(n),292))&&Nt(e)){var i=(vs(e)+"e").split("e");return+((i=(vs(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}var Ha=En&&1/cn(new En([,-0]))[1]==u?function(e){return new En(e)}:sc;function Ga(e){return function(t){var n=dr(t);return n==x?rn(t):n==_?ln(t):function(e,t){return Pt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function $a(e,t,n,o,u,d,p,f){var g=2&t;if(!g&&"function"!=typeof e)throw new _e(r);var h=o?o.length:0;if(h||(t&=-97,o=u=a),p=p===a?p:mn(fs(p),0),f=f===a?f:fs(f),h-=u?u.length:0,64&t){var m=o,v=u;o=u=a}var y=g?a:nr(e),b=[e,t,n,o,u,m,v,d,p,f];if(y&&function(e,t){var n=e[1],i=t[1],a=n|i,r=a<131,o=i==l&&8==n||i==l&&256==n&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!r&&!o)return e;1&i&&(e[2]=t[2],a|=1&n?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?Ta(u,c,t[4]):c,e[4]=u?sn(e[3],s):t[4]}(c=t[5])&&(u=e[5],e[5]=u?Ea(u,c,t[6]):c,e[6]=u?sn(e[5],s):t[6]),(c=t[7])&&(e[7]=c),i&l&&(e[8]=null==e[8]?t[8]:vn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a}(b,y),e=b[0],t=b[1],n=b[2],o=b[3],u=b[4],!(f=b[9]=b[9]===a?g?0:e.length:mn(b[9]-h,0))&&24&t&&(t&=-25),t&&1!=t)w=8==t||16==t?function(e,t,n){var r=Oa(e);return function o(){for(var s=arguments.length,c=i(s),l=s,u=ar(o);l--;)c[l]=arguments[l];var d=s<3&&c[0]!==u&&c[s-1]!==u?[]:sn(c,u);return(s-=d.length)<n?za(e,t,Ma,o.placeholder,a,c,d,a,a,n-s):Ct(this&&this!==dt&&this instanceof o?r:e,this,c)}}(e,t,f):t!=c&&33!=t||u.length?Ma.apply(a,b):function(e,t,n,a){var r=1&t,o=Oa(e);return function t(){for(var s=-1,c=arguments.length,l=-1,u=a.length,d=i(u+c),p=this&&this!==dt&&this instanceof t?o:e;++l<u;)d[l]=a[l];for(;c--;)d[l++]=arguments[++s];return Ct(p,r?n:this,d)}}(e,t,n,o);else var w=function(e,t,n){var i=1&t,a=Oa(e);return function t(){return(this&&this!==dt&&this instanceof t?a:e).apply(i?n:this,arguments)}}(e,t,n);return Dr((y?Xi:Ir)(w,b),e,t)}function Qa(e,t,n,i){return e===a||Lo(e,ke[n])&&!Re.call(i,n)?t:e}function Ya(e,t,n,i,r,o){return Zo(e)&&Zo(t)&&(o.set(t,e),Li(e,t,a,Ya,o),o.delete(t)),e}function Xa(e){return is(e)?a:e}function Ja(e,t,n,i,r,o){var s=1&n,c=e.length,l=t.length;if(c!=l&&!(s&&l>c))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var p=-1,f=!0,g=2&n?new Hn:a;for(o.set(e,t),o.set(t,e);++p<c;){var h=e[p],m=t[p];if(i)var v=s?i(m,h,p,t,e,o):i(h,m,p,e,t,o);if(v!==a){if(v)continue;f=!1;break}if(g){if(!Ut(t,(function(e,t){if(!Xt(g,t)&&(h===e||r(h,e,n,i,o)))return g.push(t)}))){f=!1;break}}else if(h!==m&&!r(h,m,n,i,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function Za(e){return Ar(Cr(e,a,qr),e+"")}function er(e){return xi(e,ks,lr)}function tr(e){return xi(e,Ps,ur)}var nr=An?function(e){return An.get(e)}:sc;function ir(e){for(var t=e.name+"",n=Dn[t],i=Re.call(Dn,t)?n.length:0;i--;){var a=n[i],r=a.func;if(null==r||r==e)return a.name}return t}function ar(e){return(Re.call(Fn,"placeholder")?Fn:e).placeholder}function rr(){var e=Fn.iteratee||ic;return e=e===ic?Ri:e,arguments.length?e(arguments[0],arguments[1]):e}function or(e,t){var n,i,a=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function sr(e){for(var t=ks(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,Sr(a)]}return t}function cr(e,t){var n=function(e,t){return null==e?a:e[t]}(e,t);return Bi(n)?n:a}var lr=ht?function(e){return null==e?[]:(e=Te(e),At(ht(e),(function(t){return He.call(e,t)})))}:gc,ur=ht?function(e){for(var t=[];e;)Bt(t,lr(e)),e=ze(e);return t}:gc,dr=Ci;function pr(e,t,n){for(var i=-1,a=(t=ma(t,e)).length,r=!1;++i<a;){var o=Ur(t[i]);if(!(r=null!=e&&n(e,o)))break;e=e[o]}return r||++i!=a?r:!!(a=null==e?0:e.length)&&Jo(a)&&hr(o,a)&&(qo(e)||Ko(e))}function fr(e){return"function"!=typeof e.constructor||wr(e)?{}:Ln(ze(e))}function gr(e){return qo(e)||Ko(e)||!!($e&&e&&e[$e])}function hr(e,t){var n=typeof e;return!!(t=null==t?d:t)&&("number"==n||"symbol"!=n&&ve.test(e))&&e>-1&&e%1==0&&e<t}function mr(e,t,n){if(!Zo(n))return!1;var i=typeof t;return!!("number"==i?Wo(n)&&hr(t,n.length):"string"==i&&t in n)&&Lo(n[t],e)}function vr(e,t){if(qo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ss(e))||Z.test(e)||!J.test(e)||null!=t&&e in Te(t)}function yr(e){var t=ir(e),n=Fn[t];if("function"!=typeof n||!(t in Kn.prototype))return!1;if(e===n)return!0;var i=nr(n);return!!i&&e===i[0]}(xn&&dr(new xn(new ArrayBuffer(1)))!=B||Cn&&dr(new Cn)!=x||Tn&&dr(Tn.resolve())!=E||En&&dr(new En)!=_||In&&dr(new In)!=k)&&(dr=function(e){var t=Ci(e),n=t==T?e.constructor:a,i=n?Nr(n):"";if(i)switch(i){case kn:return B;case Pn:return x;case Bn:return E;case Rn:return _;case On:return k}return t});var br=Pe?Yo:hc;function wr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ke)}function Sr(e){return e==e&&!Zo(e)}function xr(e,t){return function(n){return null!=n&&n[e]===t&&(t!==a||e in Te(n))}}function Cr(e,t,n){return t=mn(t===a?e.length-1:t,0),function(){for(var a=arguments,r=-1,o=mn(a.length-t,0),s=i(o);++r<o;)s[r]=a[t+r];r=-1;for(var c=i(t+1);++r<t;)c[r]=a[r];return c[t]=n(s),Ct(e,this,c)}}function Tr(e,t){return t.length<2?e:Si(e,ea(t,0,-1))}function Er(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ir=kr(Xi),_r=ut||function(e,t){return dt.setTimeout(e,t)},Ar=kr(Ji);function Dr(e,t,n){var i=t+"";return Ar(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(re,"{\n/* [wrapped with "+t+"] */\n")}(i,function(e,t){return Et(g,(function(n){var i="_."+n[0];t&n[1]&&!Dt(e,i)&&e.push(i)})),e.sort()}(function(e){var t=e.match(oe);return t?t[1].split(se):[]}(i),n)))}function kr(e){var t=0,n=0;return function(){var i=yn(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(a,arguments)}}function Pr(e,t){var n=-1,i=e.length,r=i-1;for(t=t===a?i:t;++n<t;){var o=Wi(n,r),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Br,Rr,Or=(Br=Ro((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,n,i,a){t.push(i?a.replace(ue,"$1"):n||e)})),t}),(function(e){return 500===Rr.size&&Rr.clear(),e})),Rr=Br.cache,Br);function Ur(e){if("string"==typeof e||ss(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Nr(e){if(null!=e){try{return Be.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Mr(e){if(e instanceof Kn)return e.clone();var t=new Vn(e.__wrapped__,e.__chain__);return t.__actions__=Ia(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Fr=Gi((function(e,t){return Ho(e)?li(e,hi(t,1,Ho,!0)):[]})),Lr=Gi((function(e,t){var n=$r(t);return Ho(n)&&(n=a),Ho(e)?li(e,hi(t,1,Ho,!0),rr(n,2)):[]})),jr=Gi((function(e,t){var n=$r(t);return Ho(n)&&(n=a),Ho(e)?li(e,hi(t,1,Ho,!0),a,n):[]}));function Vr(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var a=null==n?0:fs(n);return a<0&&(a=mn(i+a,0)),Ft(e,rr(t,3),a)}function Kr(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return n!==a&&(r=fs(n),r=n<0?mn(i+r,0):vn(r,i-1)),Ft(e,rr(t,3),r,!0)}function qr(e){return null!=e&&e.length?hi(e,1):[]}function zr(e){return e&&e.length?e[0]:a}var Wr=Gi((function(e){var t=Pt(e,ga);return t.length&&t[0]===e[0]?_i(t):[]})),Hr=Gi((function(e){var t=$r(e),n=Pt(e,ga);return t===$r(n)?t=a:n.pop(),n.length&&n[0]===e[0]?_i(n,rr(t,2)):[]})),Gr=Gi((function(e){var t=$r(e),n=Pt(e,ga);return(t="function"==typeof t?t:a)&&n.pop(),n.length&&n[0]===e[0]?_i(n,a,t):[]}));function $r(e){var t=null==e?0:e.length;return t?e[t-1]:a}var Qr=Gi(Yr);function Yr(e,t){return e&&e.length&&t&&t.length?qi(e,t):e}var Xr=Za((function(e,t){var n=null==e?0:e.length,i=ai(e,t);return zi(e,Pt(t,(function(e){return hr(e,n)?+e:e})).sort(Ca)),i}));function Jr(e){return null==e?e:Sn.call(e)}var Zr=Gi((function(e){return sa(hi(e,1,Ho,!0))})),eo=Gi((function(e){var t=$r(e);return Ho(t)&&(t=a),sa(hi(e,1,Ho,!0),rr(t,2))})),to=Gi((function(e){var t=$r(e);return t="function"==typeof t?t:a,sa(hi(e,1,Ho,!0),a,t)}));function no(e){if(!e||!e.length)return[];var t=0;return e=At(e,(function(e){if(Ho(e))return t=mn(e.length,t),!0})),Gt(t,(function(t){return Pt(e,qt(t))}))}function io(e,t){if(!e||!e.length)return[];var n=no(e);return null==t?n:Pt(n,(function(e){return Ct(t,a,e)}))}var ao=Gi((function(e,t){return Ho(e)?li(e,t):[]})),ro=Gi((function(e){return pa(At(e,Ho))})),oo=Gi((function(e){var t=$r(e);return Ho(t)&&(t=a),pa(At(e,Ho),rr(t,2))})),so=Gi((function(e){var t=$r(e);return t="function"==typeof t?t:a,pa(At(e,Ho),a,t)})),co=Gi(no),lo=Gi((function(e){var t=e.length,n=t>1?e[t-1]:a;return n="function"==typeof n?(e.pop(),n):a,io(e,n)}));function uo(e){var t=Fn(e);return t.__chain__=!0,t}function po(e,t){return t(e)}var fo=Za((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,r=function(t){return ai(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Kn&&hr(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:po,args:[r],thisArg:a}),new Vn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(a),e}))):this.thru(r)})),go=Aa((function(e,t,n){Re.call(e,n)?++e[n]:ii(e,n,1)})),ho=Ua(Vr),mo=Ua(Kr);function vo(e,t){return(qo(e)?Et:ui)(e,rr(t,3))}function yo(e,t){return(qo(e)?It:di)(e,rr(t,3))}var bo=Aa((function(e,t,n){Re.call(e,n)?e[n].push(t):ii(e,n,[t])})),wo=Gi((function(e,t,n){var a=-1,r="function"==typeof t,o=Wo(e)?i(e.length):[];return ui(e,(function(e){o[++a]=r?Ct(t,e,n):Ai(e,t,n)})),o})),So=Aa((function(e,t,n){ii(e,n,t)}));function xo(e,t){return(qo(e)?Pt:Ni)(e,rr(t,3))}var Co=Aa((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),To=Gi((function(e,t){if(null==e)return[];var n=t.length;return n>1&&mr(e,t[0],t[1])?t=[]:n>2&&mr(t[0],t[1],t[2])&&(t=[t[0]]),Vi(e,hi(t,1),[])})),Eo=lt||function(){return dt.Date.now()};function Io(e,t,n){return t=n?a:t,t=e&&null==t?e.length:t,$a(e,l,a,a,a,a,t)}function _o(e,t){var n;if("function"!=typeof t)throw new _e(r);return e=fs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var Ao=Gi((function(e,t,n){var i=1;if(n.length){var a=sn(n,ar(Ao));i|=c}return $a(e,i,t,n,a)})),Do=Gi((function(e,t,n){var i=3;if(n.length){var a=sn(n,ar(Do));i|=c}return $a(t,i,e,n,a)}));function ko(e,t,n){var i,o,s,c,l,u,d=0,p=!1,f=!1,g=!0;if("function"!=typeof e)throw new _e(r);function h(t){var n=i,r=o;return i=o=a,d=t,c=e.apply(r,n)}function m(e){var n=e-u;return u===a||n>=t||n<0||f&&e-d>=s}function v(){var e=Eo();if(m(e))return y(e);l=_r(v,function(e){var n=t-(e-u);return f?vn(n,s-(e-d)):n}(e))}function y(e){return l=a,g&&i?h(e):(i=o=a,c)}function b(){var e=Eo(),n=m(e);if(i=arguments,o=this,u=e,n){if(l===a)return function(e){return d=e,l=_r(v,t),p?h(e):c}(u);if(f)return ba(l),l=_r(v,t),h(u)}return l===a&&(l=_r(v,t)),c}return t=hs(t)||0,Zo(n)&&(p=!!n.leading,s=(f="maxWait"in n)?mn(hs(n.maxWait)||0,t):s,g="trailing"in n?!!n.trailing:g),b.cancel=function(){l!==a&&ba(l),d=0,i=u=o=l=a},b.flush=function(){return l===a?c:y(Eo())},b}var Po=Gi((function(e,t){return ci(e,1,t)})),Bo=Gi((function(e,t,n){return ci(e,hs(t)||0,n)}));function Ro(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new _e(r);var n=function(){var i=arguments,a=t?t.apply(this,i):i[0],r=n.cache;if(r.has(a))return r.get(a);var o=e.apply(this,i);return n.cache=r.set(a,o)||r,o};return n.cache=new(Ro.Cache||Wn),n}function Oo(e){if("function"!=typeof e)throw new _e(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ro.Cache=Wn;var Uo=va((function(e,t){var n=(t=1==t.length&&qo(t[0])?Pt(t[0],Qt(rr())):Pt(hi(t,1),Qt(rr()))).length;return Gi((function(i){for(var a=-1,r=vn(i.length,n);++a<r;)i[a]=t[a].call(this,i[a]);return Ct(e,this,i)}))})),No=Gi((function(e,t){var n=sn(t,ar(No));return $a(e,c,a,t,n)})),Mo=Gi((function(e,t){var n=sn(t,ar(Mo));return $a(e,64,a,t,n)})),Fo=Za((function(e,t){return $a(e,256,a,a,a,t)}));function Lo(e,t){return e===t||e!=e&&t!=t}var jo=qa(Ti),Vo=qa((function(e,t){return e>=t})),Ko=Di(function(){return arguments}())?Di:function(e){return es(e)&&Re.call(e,"callee")&&!He.call(e,"callee")},qo=i.isArray,zo=vt?Qt(vt):function(e){return es(e)&&Ci(e)==P};function Wo(e){return null!=e&&Jo(e.length)&&!Yo(e)}function Ho(e){return es(e)&&Wo(e)}var Go=mt||hc,$o=yt?Qt(yt):function(e){return es(e)&&Ci(e)==y};function Qo(e){if(!es(e))return!1;var t=Ci(e);return t==b||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!is(e)}function Yo(e){if(!Zo(e))return!1;var t=Ci(e);return t==w||t==S||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Xo(e){return"number"==typeof e&&e==fs(e)}function Jo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function Zo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function es(e){return null!=e&&"object"==typeof e}var ts=bt?Qt(bt):function(e){return es(e)&&dr(e)==x};function ns(e){return"number"==typeof e||es(e)&&Ci(e)==C}function is(e){if(!es(e)||Ci(e)!=T)return!1;var t=ze(e);if(null===t)return!0;var n=Re.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Be.call(n)==Me}var as=wt?Qt(wt):function(e){return es(e)&&Ci(e)==I},rs=St?Qt(St):function(e){return es(e)&&dr(e)==_};function os(e){return"string"==typeof e||!qo(e)&&es(e)&&Ci(e)==A}function ss(e){return"symbol"==typeof e||es(e)&&Ci(e)==D}var cs=xt?Qt(xt):function(e){return es(e)&&Jo(e.length)&&!!at[Ci(e)]},ls=qa(Ui),us=qa((function(e,t){return e<=t}));function ds(e){if(!e)return[];if(Wo(e))return os(e)?dn(e):Ia(e);if(Qe&&e[Qe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Qe]());var t=dr(e);return(t==x?rn:t==_?cn:Ls)(e)}function ps(e){return e?(e=hs(e))===u||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function fs(e){var t=ps(e),n=t%1;return t==t?n?t-n:t:0}function gs(e){return e?ri(fs(e),0,f):0}function hs(e){if("number"==typeof e)return e;if(ss(e))return p;if(Zo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Zo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=$t(e);var n=ge.test(e);return n||me.test(e)?ct(e.slice(2),n?2:8):fe.test(e)?p:+e}function ms(e){return _a(e,Ps(e))}function vs(e){return null==e?"":oa(e)}var ys=Da((function(e,t){if(wr(t)||Wo(t))_a(t,ks(t),e);else for(var n in t)Re.call(t,n)&&Zn(e,n,t[n])})),bs=Da((function(e,t){_a(t,Ps(t),e)})),ws=Da((function(e,t,n,i){_a(t,Ps(t),e,i)})),Ss=Da((function(e,t,n,i){_a(t,ks(t),e,i)})),xs=Za(ai),Cs=Gi((function(e,t){e=Te(e);var n=-1,i=t.length,r=i>2?t[2]:a;for(r&&mr(t[0],t[1],r)&&(i=1);++n<i;)for(var o=t[n],s=Ps(o),c=-1,l=s.length;++c<l;){var u=s[c],d=e[u];(d===a||Lo(d,ke[u])&&!Re.call(e,u))&&(e[u]=o[u])}return e})),Ts=Gi((function(e){return e.push(a,Ya),Ct(Rs,a,e)}));function Es(e,t,n){var i=null==e?a:Si(e,t);return i===a?n:i}function Is(e,t){return null!=e&&pr(e,t,Ii)}var _s=Fa((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ne.call(t)),e[t]=n}),Zs(nc)),As=Fa((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ne.call(t)),Re.call(e,t)?e[t].push(n):e[t]=[n]}),rr),Ds=Gi(Ai);function ks(e){return Wo(e)?$n(e):Oi(e)}function Ps(e){return Wo(e)?$n(e,!0):function(e){if(!Zo(e))return function(e){var t=[];if(null!=e)for(var n in Te(e))t.push(n);return t}(e);var t=wr(e),n=[];for(var i in e)("constructor"!=i||!t&&Re.call(e,i))&&n.push(i);return n}(e)}var Bs=Da((function(e,t,n){Li(e,t,n)})),Rs=Da((function(e,t,n,i){Li(e,t,n,i)})),Os=Za((function(e,t){var n={};if(null==e)return n;var i=!1;t=Pt(t,(function(t){return t=ma(t,e),i||(i=t.length>1),t})),_a(e,tr(e),n),i&&(n=oi(n,7,Xa));for(var a=t.length;a--;)ca(n,t[a]);return n})),Us=Za((function(e,t){return null==e?{}:function(e,t){return Ki(e,t,(function(t,n){return Is(e,n)}))}(e,t)}));function Ns(e,t){if(null==e)return{};var n=Pt(tr(e),(function(e){return[e]}));return t=rr(t),Ki(e,n,(function(e,n){return t(e,n[0])}))}var Ms=Ga(ks),Fs=Ga(Ps);function Ls(e){return null==e?[]:Yt(e,ks(e))}var js=Ra((function(e,t,n){return t=t.toLowerCase(),e+(n?Vs(t):t)}));function Vs(e){return Qs(vs(e).toLowerCase())}function Ks(e){return(e=vs(e))&&e.replace(ye,en).replace(Xe,"")}var qs=Ra((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),zs=Ra((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ws=Ba("toLowerCase"),Hs=Ra((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Gs=Ra((function(e,t,n){return e+(n?" ":"")+Qs(t)})),$s=Ra((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Qs=Ba("toUpperCase");function Ys(e,t,n){return e=vs(e),(t=n?a:t)===a?function(e){return tt.test(e)}(e)?function(e){return e.match(Ze)||[]}(e):function(e){return e.match(ce)||[]}(e):e.match(t)||[]}var Xs=Gi((function(e,t){try{return Ct(e,a,t)}catch(e){return Qo(e)?e:new Se(e)}})),Js=Za((function(e,t){return Et(t,(function(t){t=Ur(t),ii(e,t,Ao(e[t],e))})),e}));function Zs(e){return function(){return e}}var ec=Na(),tc=Na(!0);function nc(e){return e}function ic(e){return Ri("function"==typeof e?e:oi(e,1))}var ac=Gi((function(e,t){return function(n){return Ai(n,e,t)}})),rc=Gi((function(e,t){return function(n){return Ai(e,n,t)}}));function oc(e,t,n){var i=ks(t),a=wi(t,i);null!=n||Zo(t)&&(a.length||!i.length)||(n=t,t=e,e=this,a=wi(t,ks(t)));var r=!(Zo(n)&&"chain"in n&&!n.chain),o=Yo(e);return Et(a,(function(n){var i=t[n];e[n]=i,o&&(e.prototype[n]=function(){var t=this.__chain__;if(r||t){var n=e(this.__wrapped__);return(n.__actions__=Ia(this.__actions__)).push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,Bt([this.value()],arguments))})})),e}function sc(){}var cc=ja(Pt),lc=ja(_t),uc=ja(Ut);function dc(e){return vr(e)?qt(Ur(e)):function(e){return function(t){return Si(t,e)}}(e)}var pc=Ka(),fc=Ka(!0);function gc(){return[]}function hc(){return!1}var mc,vc=La((function(e,t){return e+t}),0),yc=Wa("ceil"),bc=La((function(e,t){return e/t}),1),wc=Wa("floor"),Sc=La((function(e,t){return e*t}),1),xc=Wa("round"),Cc=La((function(e,t){return e-t}),0);return Fn.after=function(e,t){if("function"!=typeof t)throw new _e(r);return e=fs(e),function(){if(--e<1)return t.apply(this,arguments)}},Fn.ary=Io,Fn.assign=ys,Fn.assignIn=bs,Fn.assignInWith=ws,Fn.assignWith=Ss,Fn.at=xs,Fn.before=_o,Fn.bind=Ao,Fn.bindAll=Js,Fn.bindKey=Do,Fn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return qo(e)?e:[e]},Fn.chain=uo,Fn.chunk=function(e,t,n){t=(n?mr(e,t,n):t===a)?1:mn(fs(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var o=0,s=0,c=i(pt(r/t));o<r;)c[s++]=ea(e,o,o+=t);return c},Fn.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,a=[];++t<n;){var r=e[t];r&&(a[i++]=r)}return a},Fn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=i(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Bt(qo(n)?Ia(n):[n],hi(t,1))},Fn.cond=function(e){var t=null==e?0:e.length,n=rr();return e=t?Pt(e,(function(e){if("function"!=typeof e[1])throw new _e(r);return[n(e[0]),e[1]]})):[],Gi((function(n){for(var i=-1;++i<t;){var a=e[i];if(Ct(a[0],this,n))return Ct(a[1],this,n)}}))},Fn.conforms=function(e){return function(e){var t=ks(e);return function(n){return si(n,e,t)}}(oi(e,1))},Fn.constant=Zs,Fn.countBy=go,Fn.create=function(e,t){var n=Ln(e);return null==t?n:ni(n,t)},Fn.curry=function e(t,n,i){var r=$a(t,8,a,a,a,a,a,n=i?a:n);return r.placeholder=e.placeholder,r},Fn.curryRight=function e(t,n,i){var r=$a(t,16,a,a,a,a,a,n=i?a:n);return r.placeholder=e.placeholder,r},Fn.debounce=ko,Fn.defaults=Cs,Fn.defaultsDeep=Ts,Fn.defer=Po,Fn.delay=Bo,Fn.difference=Fr,Fn.differenceBy=Lr,Fn.differenceWith=jr,Fn.drop=function(e,t,n){var i=null==e?0:e.length;return i?ea(e,(t=n||t===a?1:fs(t))<0?0:t,i):[]},Fn.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?ea(e,0,(t=i-(t=n||t===a?1:fs(t)))<0?0:t):[]},Fn.dropRightWhile=function(e,t){return e&&e.length?ua(e,rr(t,3),!0,!0):[]},Fn.dropWhile=function(e,t){return e&&e.length?ua(e,rr(t,3),!0):[]},Fn.fill=function(e,t,n,i){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&mr(e,t,n)&&(n=0,i=r),function(e,t,n,i){var r=e.length;for((n=fs(n))<0&&(n=-n>r?0:r+n),(i=i===a||i>r?r:fs(i))<0&&(i+=r),i=n>i?0:gs(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},Fn.filter=function(e,t){return(qo(e)?At:gi)(e,rr(t,3))},Fn.flatMap=function(e,t){return hi(xo(e,t),1)},Fn.flatMapDeep=function(e,t){return hi(xo(e,t),u)},Fn.flatMapDepth=function(e,t,n){return n=n===a?1:fs(n),hi(xo(e,t),n)},Fn.flatten=qr,Fn.flattenDeep=function(e){return null!=e&&e.length?hi(e,u):[]},Fn.flattenDepth=function(e,t){return null!=e&&e.length?hi(e,t=t===a?1:fs(t)):[]},Fn.flip=function(e){return $a(e,512)},Fn.flow=ec,Fn.flowRight=tc,Fn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var a=e[t];i[a[0]]=a[1]}return i},Fn.functions=function(e){return null==e?[]:wi(e,ks(e))},Fn.functionsIn=function(e){return null==e?[]:wi(e,Ps(e))},Fn.groupBy=bo,Fn.initial=function(e){return null!=e&&e.length?ea(e,0,-1):[]},Fn.intersection=Wr,Fn.intersectionBy=Hr,Fn.intersectionWith=Gr,Fn.invert=_s,Fn.invertBy=As,Fn.invokeMap=wo,Fn.iteratee=ic,Fn.keyBy=So,Fn.keys=ks,Fn.keysIn=Ps,Fn.map=xo,Fn.mapKeys=function(e,t){var n={};return t=rr(t,3),yi(e,(function(e,i,a){ii(n,t(e,i,a),e)})),n},Fn.mapValues=function(e,t){var n={};return t=rr(t,3),yi(e,(function(e,i,a){ii(n,i,t(e,i,a))})),n},Fn.matches=function(e){return Mi(oi(e,1))},Fn.matchesProperty=function(e,t){return Fi(e,oi(t,1))},Fn.memoize=Ro,Fn.merge=Bs,Fn.mergeWith=Rs,Fn.method=ac,Fn.methodOf=rc,Fn.mixin=oc,Fn.negate=Oo,Fn.nthArg=function(e){return e=fs(e),Gi((function(t){return ji(t,e)}))},Fn.omit=Os,Fn.omitBy=function(e,t){return Ns(e,Oo(rr(t)))},Fn.once=function(e){return _o(2,e)},Fn.orderBy=function(e,t,n,i){return null==e?[]:(qo(t)||(t=null==t?[]:[t]),qo(n=i?a:n)||(n=null==n?[]:[n]),Vi(e,t,n))},Fn.over=cc,Fn.overArgs=Uo,Fn.overEvery=lc,Fn.overSome=uc,Fn.partial=No,Fn.partialRight=Mo,Fn.partition=Co,Fn.pick=Us,Fn.pickBy=Ns,Fn.property=dc,Fn.propertyOf=function(e){return function(t){return null==e?a:Si(e,t)}},Fn.pull=Qr,Fn.pullAll=Yr,Fn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?qi(e,t,rr(n,2)):e},Fn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?qi(e,t,a,n):e},Fn.pullAt=Xr,Fn.range=pc,Fn.rangeRight=fc,Fn.rearg=Fo,Fn.reject=function(e,t){return(qo(e)?At:gi)(e,Oo(rr(t,3)))},Fn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,a=[],r=e.length;for(t=rr(t,3);++i<r;){var o=e[i];t(o,i,e)&&(n.push(o),a.push(i))}return zi(e,a),n},Fn.rest=function(e,t){if("function"!=typeof e)throw new _e(r);return Gi(e,t=t===a?t:fs(t))},Fn.reverse=Jr,Fn.sampleSize=function(e,t,n){return t=(n?mr(e,t,n):t===a)?1:fs(t),(qo(e)?Yn:Qi)(e,t)},Fn.set=function(e,t,n){return null==e?e:Yi(e,t,n)},Fn.setWith=function(e,t,n,i){return i="function"==typeof i?i:a,null==e?e:Yi(e,t,n,i)},Fn.shuffle=function(e){return(qo(e)?Xn:Zi)(e)},Fn.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&mr(e,t,n)?(t=0,n=i):(t=null==t?0:fs(t),n=n===a?i:fs(n)),ea(e,t,n)):[]},Fn.sortBy=To,Fn.sortedUniq=function(e){return e&&e.length?aa(e):[]},Fn.sortedUniqBy=function(e,t){return e&&e.length?aa(e,rr(t,2)):[]},Fn.split=function(e,t,n){return n&&"number"!=typeof n&&mr(e,t,n)&&(t=n=a),(n=n===a?f:n>>>0)?(e=vs(e))&&("string"==typeof t||null!=t&&!as(t))&&!(t=oa(t))&&an(e)?ya(dn(e),0,n):e.split(t,n):[]},Fn.spread=function(e,t){if("function"!=typeof e)throw new _e(r);return t=null==t?0:mn(fs(t),0),Gi((function(n){var i=n[t],a=ya(n,0,t);return i&&Bt(a,i),Ct(e,this,a)}))},Fn.tail=function(e){var t=null==e?0:e.length;return t?ea(e,1,t):[]},Fn.take=function(e,t,n){return e&&e.length?ea(e,0,(t=n||t===a?1:fs(t))<0?0:t):[]},Fn.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?ea(e,(t=i-(t=n||t===a?1:fs(t)))<0?0:t,i):[]},Fn.takeRightWhile=function(e,t){return e&&e.length?ua(e,rr(t,3),!1,!0):[]},Fn.takeWhile=function(e,t){return e&&e.length?ua(e,rr(t,3)):[]},Fn.tap=function(e,t){return t(e),e},Fn.throttle=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new _e(r);return Zo(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),ko(e,t,{leading:i,maxWait:t,trailing:a})},Fn.thru=po,Fn.toArray=ds,Fn.toPairs=Ms,Fn.toPairsIn=Fs,Fn.toPath=function(e){return qo(e)?Pt(e,Ur):ss(e)?[e]:Ia(Or(vs(e)))},Fn.toPlainObject=ms,Fn.transform=function(e,t,n){var i=qo(e),a=i||Go(e)||cs(e);if(t=rr(t,4),null==n){var r=e&&e.constructor;n=a?i?new r:[]:Zo(e)&&Yo(r)?Ln(ze(e)):{}}return(a?Et:yi)(e,(function(e,i,a){return t(n,e,i,a)})),n},Fn.unary=function(e){return Io(e,1)},Fn.union=Zr,Fn.unionBy=eo,Fn.unionWith=to,Fn.uniq=function(e){return e&&e.length?sa(e):[]},Fn.uniqBy=function(e,t){return e&&e.length?sa(e,rr(t,2)):[]},Fn.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?sa(e,a,t):[]},Fn.unset=function(e,t){return null==e||ca(e,t)},Fn.unzip=no,Fn.unzipWith=io,Fn.update=function(e,t,n){return null==e?e:la(e,t,ha(n))},Fn.updateWith=function(e,t,n,i){return i="function"==typeof i?i:a,null==e?e:la(e,t,ha(n),i)},Fn.values=Ls,Fn.valuesIn=function(e){return null==e?[]:Yt(e,Ps(e))},Fn.without=ao,Fn.words=Ys,Fn.wrap=function(e,t){return No(ha(t),e)},Fn.xor=ro,Fn.xorBy=oo,Fn.xorWith=so,Fn.zip=co,Fn.zipObject=function(e,t){return fa(e||[],t||[],Zn)},Fn.zipObjectDeep=function(e,t){return fa(e||[],t||[],Yi)},Fn.zipWith=lo,Fn.entries=Ms,Fn.entriesIn=Fs,Fn.extend=bs,Fn.extendWith=ws,oc(Fn,Fn),Fn.add=vc,Fn.attempt=Xs,Fn.camelCase=js,Fn.capitalize=Vs,Fn.ceil=yc,Fn.clamp=function(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=(n=hs(n))==n?n:0),t!==a&&(t=(t=hs(t))==t?t:0),ri(hs(e),t,n)},Fn.clone=function(e){return oi(e,4)},Fn.cloneDeep=function(e){return oi(e,5)},Fn.cloneDeepWith=function(e,t){return oi(e,5,t="function"==typeof t?t:a)},Fn.cloneWith=function(e,t){return oi(e,4,t="function"==typeof t?t:a)},Fn.conformsTo=function(e,t){return null==t||si(e,t,ks(t))},Fn.deburr=Ks,Fn.defaultTo=function(e,t){return null==e||e!=e?t:e},Fn.divide=bc,Fn.endsWith=function(e,t,n){e=vs(e),t=oa(t);var i=e.length,r=n=n===a?i:ri(fs(n),0,i);return(n-=t.length)>=0&&e.slice(n,r)==t},Fn.eq=Lo,Fn.escape=function(e){return(e=vs(e))&&$.test(e)?e.replace(H,tn):e},Fn.escapeRegExp=function(e){return(e=vs(e))&&ne.test(e)?e.replace(te,"\\$&"):e},Fn.every=function(e,t,n){var i=qo(e)?_t:pi;return n&&mr(e,t,n)&&(t=a),i(e,rr(t,3))},Fn.find=ho,Fn.findIndex=Vr,Fn.findKey=function(e,t){return Mt(e,rr(t,3),yi)},Fn.findLast=mo,Fn.findLastIndex=Kr,Fn.findLastKey=function(e,t){return Mt(e,rr(t,3),bi)},Fn.floor=wc,Fn.forEach=vo,Fn.forEachRight=yo,Fn.forIn=function(e,t){return null==e?e:mi(e,rr(t,3),Ps)},Fn.forInRight=function(e,t){return null==e?e:vi(e,rr(t,3),Ps)},Fn.forOwn=function(e,t){return e&&yi(e,rr(t,3))},Fn.forOwnRight=function(e,t){return e&&bi(e,rr(t,3))},Fn.get=Es,Fn.gt=jo,Fn.gte=Vo,Fn.has=function(e,t){return null!=e&&pr(e,t,Ei)},Fn.hasIn=Is,Fn.head=zr,Fn.identity=nc,Fn.includes=function(e,t,n,i){e=Wo(e)?e:Ls(e),n=n&&!i?fs(n):0;var a=e.length;return n<0&&(n=mn(a+n,0)),os(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&Lt(e,t,n)>-1},Fn.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var a=null==n?0:fs(n);return a<0&&(a=mn(i+a,0)),Lt(e,t,a)},Fn.inRange=function(e,t,n){return t=ps(t),n===a?(n=t,t=0):n=ps(n),function(e,t,n){return e>=vn(t,n)&&e<mn(t,n)}(e=hs(e),t,n)},Fn.invoke=Ds,Fn.isArguments=Ko,Fn.isArray=qo,Fn.isArrayBuffer=zo,Fn.isArrayLike=Wo,Fn.isArrayLikeObject=Ho,Fn.isBoolean=function(e){return!0===e||!1===e||es(e)&&Ci(e)==v},Fn.isBuffer=Go,Fn.isDate=$o,Fn.isElement=function(e){return es(e)&&1===e.nodeType&&!is(e)},Fn.isEmpty=function(e){if(null==e)return!0;if(Wo(e)&&(qo(e)||"string"==typeof e||"function"==typeof e.splice||Go(e)||cs(e)||Ko(e)))return!e.length;var t=dr(e);if(t==x||t==_)return!e.size;if(wr(e))return!Oi(e).length;for(var n in e)if(Re.call(e,n))return!1;return!0},Fn.isEqual=function(e,t){return ki(e,t)},Fn.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:a)?n(e,t):a;return i===a?ki(e,t,a,n):!!i},Fn.isError=Qo,Fn.isFinite=function(e){return"number"==typeof e&&Nt(e)},Fn.isFunction=Yo,Fn.isInteger=Xo,Fn.isLength=Jo,Fn.isMap=ts,Fn.isMatch=function(e,t){return e===t||Pi(e,t,sr(t))},Fn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:a,Pi(e,t,sr(t),n)},Fn.isNaN=function(e){return ns(e)&&e!=+e},Fn.isNative=function(e){if(br(e))throw new Se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Bi(e)},Fn.isNil=function(e){return null==e},Fn.isNull=function(e){return null===e},Fn.isNumber=ns,Fn.isObject=Zo,Fn.isObjectLike=es,Fn.isPlainObject=is,Fn.isRegExp=as,Fn.isSafeInteger=function(e){return Xo(e)&&e>=-9007199254740991&&e<=d},Fn.isSet=rs,Fn.isString=os,Fn.isSymbol=ss,Fn.isTypedArray=cs,Fn.isUndefined=function(e){return e===a},Fn.isWeakMap=function(e){return es(e)&&dr(e)==k},Fn.isWeakSet=function(e){return es(e)&&"[object WeakSet]"==Ci(e)},Fn.join=function(e,t){return null==e?"":zt.call(e,t)},Fn.kebabCase=qs,Fn.last=$r,Fn.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;return n!==a&&(r=(r=fs(n))<0?mn(i+r,0):vn(r,i-1)),t==t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,r):Ft(e,Vt,r,!0)},Fn.lowerCase=zs,Fn.lowerFirst=Ws,Fn.lt=ls,Fn.lte=us,Fn.max=function(e){return e&&e.length?fi(e,nc,Ti):a},Fn.maxBy=function(e,t){return e&&e.length?fi(e,rr(t,2),Ti):a},Fn.mean=function(e){return Kt(e,nc)},Fn.meanBy=function(e,t){return Kt(e,rr(t,2))},Fn.min=function(e){return e&&e.length?fi(e,nc,Ui):a},Fn.minBy=function(e,t){return e&&e.length?fi(e,rr(t,2),Ui):a},Fn.stubArray=gc,Fn.stubFalse=hc,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=Sc,Fn.nth=function(e,t){return e&&e.length?ji(e,fs(t)):a},Fn.noConflict=function(){return dt._===this&&(dt._=Fe),this},Fn.noop=sc,Fn.now=Eo,Fn.pad=function(e,t,n){e=vs(e);var i=(t=fs(t))?un(e):0;if(!t||i>=t)return e;var a=(t-i)/2;return Va(ft(a),n)+e+Va(pt(a),n)},Fn.padEnd=function(e,t,n){e=vs(e);var i=(t=fs(t))?un(e):0;return t&&i<t?e+Va(t-i,n):e},Fn.padStart=function(e,t,n){e=vs(e);var i=(t=fs(t))?un(e):0;return t&&i<t?Va(t-i,n)+e:e},Fn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),bn(vs(e).replace(ie,""),t||0)},Fn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&mr(e,t,n)&&(t=n=a),n===a&&("boolean"==typeof t?(n=t,t=a):"boolean"==typeof e&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=ps(e),t===a?(t=e,e=0):t=ps(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var r=wn();return vn(e+r*(t-e+st("1e-"+((r+"").length-1))),t)}return Wi(e,t)},Fn.reduce=function(e,t,n){var i=qo(e)?Rt:Wt,a=arguments.length<3;return i(e,rr(t,4),n,a,ui)},Fn.reduceRight=function(e,t,n){var i=qo(e)?Ot:Wt,a=arguments.length<3;return i(e,rr(t,4),n,a,di)},Fn.repeat=function(e,t,n){return t=(n?mr(e,t,n):t===a)?1:fs(t),Hi(vs(e),t)},Fn.replace=function(){var e=arguments,t=vs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fn.result=function(e,t,n){var i=-1,r=(t=ma(t,e)).length;for(r||(r=1,e=a);++i<r;){var o=null==e?a:e[Ur(t[i])];o===a&&(i=r,o=n),e=Yo(o)?o.call(e):o}return e},Fn.round=xc,Fn.runInContext=e,Fn.sample=function(e){return(qo(e)?Qn:$i)(e)},Fn.size=function(e){if(null==e)return 0;if(Wo(e))return os(e)?un(e):e.length;var t=dr(e);return t==x||t==_?e.size:Oi(e).length},Fn.snakeCase=Hs,Fn.some=function(e,t,n){var i=qo(e)?Ut:ta;return n&&mr(e,t,n)&&(t=a),i(e,rr(t,3))},Fn.sortedIndex=function(e,t){return na(e,t)},Fn.sortedIndexBy=function(e,t,n){return ia(e,t,rr(n,2))},Fn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=na(e,t);if(i<n&&Lo(e[i],t))return i}return-1},Fn.sortedLastIndex=function(e,t){return na(e,t,!0)},Fn.sortedLastIndexBy=function(e,t,n){return ia(e,t,rr(n,2),!0)},Fn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=na(e,t,!0)-1;if(Lo(e[n],t))return n}return-1},Fn.startCase=Gs,Fn.startsWith=function(e,t,n){return e=vs(e),n=null==n?0:ri(fs(n),0,e.length),t=oa(t),e.slice(n,n+t.length)==t},Fn.subtract=Cc,Fn.sum=function(e){return e&&e.length?Ht(e,nc):0},Fn.sumBy=function(e,t){return e&&e.length?Ht(e,rr(t,2)):0},Fn.template=function(e,t,n){var i=Fn.templateSettings;n&&mr(e,t,n)&&(t=a),e=vs(e),t=ws({},t,i,Qa);var r,o,s=ws({},t.imports,i.imports,Qa),c=ks(s),l=Yt(s,c),u=0,d=t.interpolate||be,p="__p += '",f=Ee((t.escape||be).source+"|"+d.source+"|"+(d===X?de:be).source+"|"+(t.evaluate||be).source+"|$","g"),g="//# sourceURL="+(Re.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(f,(function(t,n,i,a,s,c){return i||(i=a),p+=e.slice(u,c).replace(we,nn),n&&(r=!0,p+="' +\n__e("+n+") +\n'"),s&&(o=!0,p+="';\n"+s+";\n__p += '"),i&&(p+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=c+t.length,t})),p+="';\n";var h=Re.call(t,"variable")&&t.variable;if(h){if(le.test(h))throw new Se("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(o?p.replace(K,""):p).replace(q,"$1").replace(z,"$1;"),p="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Xs((function(){return xe(c,g+"return "+p).apply(a,l)}));if(m.source=p,Qo(m))throw m;return m},Fn.times=function(e,t){if((e=fs(e))<1||e>d)return[];var n=f,i=vn(e,f);t=rr(t),e-=f;for(var a=Gt(i,t);++n<e;)t(n);return a},Fn.toFinite=ps,Fn.toInteger=fs,Fn.toLength=gs,Fn.toLower=function(e){return vs(e).toLowerCase()},Fn.toNumber=hs,Fn.toSafeInteger=function(e){return e?ri(fs(e),-9007199254740991,d):0===e?e:0},Fn.toString=vs,Fn.toUpper=function(e){return vs(e).toUpperCase()},Fn.trim=function(e,t,n){if((e=vs(e))&&(n||t===a))return $t(e);if(!e||!(t=oa(t)))return e;var i=dn(e),r=dn(t);return ya(i,Jt(i,r),Zt(i,r)+1).join("")},Fn.trimEnd=function(e,t,n){if((e=vs(e))&&(n||t===a))return e.slice(0,pn(e)+1);if(!e||!(t=oa(t)))return e;var i=dn(e);return ya(i,0,Zt(i,dn(t))+1).join("")},Fn.trimStart=function(e,t,n){if((e=vs(e))&&(n||t===a))return e.replace(ie,"");if(!e||!(t=oa(t)))return e;var i=dn(e);return ya(i,Jt(i,dn(t))).join("")},Fn.truncate=function(e,t){var n=30,i="...";if(Zo(t)){var r="separator"in t?t.separator:r;n="length"in t?fs(t.length):n,i="omission"in t?oa(t.omission):i}var o=(e=vs(e)).length;if(an(e)){var s=dn(e);o=s.length}if(n>=o)return e;var c=n-un(i);if(c<1)return i;var l=s?ya(s,0,c).join(""):e.slice(0,c);if(r===a)return l+i;if(s&&(c+=l.length-c),as(r)){if(e.slice(c).search(r)){var u,d=l;for(r.global||(r=Ee(r.source,vs(pe.exec(r))+"g")),r.lastIndex=0;u=r.exec(d);)var p=u.index;l=l.slice(0,p===a?c:p)}}else if(e.indexOf(oa(r),c)!=c){var f=l.lastIndexOf(r);f>-1&&(l=l.slice(0,f))}return l+i},Fn.unescape=function(e){return(e=vs(e))&&G.test(e)?e.replace(W,fn):e},Fn.uniqueId=function(e){var t=++Oe;return vs(e)+t},Fn.upperCase=$s,Fn.upperFirst=Qs,Fn.each=vo,Fn.eachRight=yo,Fn.first=zr,oc(Fn,(mc={},yi(Fn,(function(e,t){Re.call(Fn.prototype,t)||(mc[t]=e)})),mc),{chain:!1}),Fn.VERSION="4.17.21",Et(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Fn[e].placeholder=Fn})),Et(["drop","take"],(function(e,t){Kn.prototype[e]=function(n){n=n===a?1:mn(fs(n),0);var i=this.__filtered__&&!t?new Kn(this):this.clone();return i.__filtered__?i.__takeCount__=vn(n,i.__takeCount__):i.__views__.push({size:vn(n,f),type:e+(i.__dir__<0?"Right":"")}),i},Kn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Et(["filter","map","takeWhile"],(function(e,t){var n=t+1,i=1==n||3==n;Kn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:rr(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),Et(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Kn.prototype[e]=function(){return this[n](1).value()[0]}})),Et(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Kn.prototype[e]=function(){return this.__filtered__?new Kn(this):this[n](1)}})),Kn.prototype.compact=function(){return this.filter(nc)},Kn.prototype.find=function(e){return this.filter(e).head()},Kn.prototype.findLast=function(e){return this.reverse().find(e)},Kn.prototype.invokeMap=Gi((function(e,t){return"function"==typeof e?new Kn(this):this.map((function(n){return Ai(n,e,t)}))})),Kn.prototype.reject=function(e){return this.filter(Oo(rr(e)))},Kn.prototype.slice=function(e,t){e=fs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Kn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(n=(t=fs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Kn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Kn.prototype.toArray=function(){return this.take(f)},yi(Kn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),r=Fn[i?"take"+("last"==t?"Right":""):t],o=i||/^find/.test(t);r&&(Fn.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,c=t instanceof Kn,l=s[0],u=c||qo(t),d=function(e){var t=r.apply(Fn,Bt([e],s));return i&&p?t[0]:t};u&&n&&"function"==typeof l&&1!=l.length&&(c=u=!1);var p=this.__chain__,f=!!this.__actions__.length,g=o&&!p,h=c&&!f;if(!o&&u){t=h?t:new Kn(this);var m=e.apply(t,s);return m.__actions__.push({func:po,args:[d],thisArg:a}),new Vn(m,p)}return g&&h?e.apply(this,s):(m=this.thru(d),g?i?m.value()[0]:m.value():m)})})),Et(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ae[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);Fn.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var a=this.value();return t.apply(qo(a)?a:[],e)}return this[n]((function(n){return t.apply(qo(n)?n:[],e)}))}})),yi(Kn.prototype,(function(e,t){var n=Fn[t];if(n){var i=n.name+"";Re.call(Dn,i)||(Dn[i]=[]),Dn[i].push({name:t,func:n})}})),Dn[Ma(a,2).name]=[{name:"wrapper",func:a}],Kn.prototype.clone=function(){var e=new Kn(this.__wrapped__);return e.__actions__=Ia(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ia(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ia(this.__views__),e},Kn.prototype.reverse=function(){if(this.__filtered__){var e=new Kn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Kn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=qo(e),i=t<0,a=n?e.length:0,r=function(e,t,n){for(var i=-1,a=n.length;++i<a;){var r=n[i],o=r.size;switch(r.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=vn(t,e+o);break;case"takeRight":e=mn(e,t-o)}}return{start:e,end:t}}(0,a,this.__views__),o=r.start,s=r.end,c=s-o,l=i?s:o-1,u=this.__iteratees__,d=u.length,p=0,f=vn(c,this.__takeCount__);if(!n||!i&&a==c&&f==c)return da(e,this.__actions__);var g=[];e:for(;c--&&p<f;){for(var h=-1,m=e[l+=t];++h<d;){var v=u[h],y=v.iteratee,b=v.type,w=y(m);if(2==b)m=w;else if(!w){if(1==b)continue e;break e}}g[p++]=m}return g},Fn.prototype.at=fo,Fn.prototype.chain=function(){return uo(this)},Fn.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===a&&(this.__values__=ds(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},Fn.prototype.plant=function(e){for(var t,n=this;n instanceof jn;){var i=Mr(n);i.__index__=0,i.__values__=a,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t},Fn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Kn){var t=e;return this.__actions__.length&&(t=new Kn(this)),(t=t.reverse()).__actions__.push({func:po,args:[Jr],thisArg:a}),new Vn(t,this.__chain__)}return this.thru(Jr)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return da(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,Qe&&(Fn.prototype[Qe]=function(){return this}),Fn}();dt._=gn,(i=function(){return gn}.call(t,n,t,e))===a||(e.exports=i)}.call(this)},3222:(e,t,n)=>{var i=n(7556);e.exports=function(e){return null==e?"":i(e)}},9749:e=>{const t="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,n="function"==typeof AbortController?AbortController:class{constructor(){this.signal=new r}abort(){this.signal.dispatchEvent("abort")}},i="function"==typeof AbortSignal,a="function"==typeof n.AbortSignal,r=i?AbortSignal:a?n.AbortController:class{constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if("abort"===e){this.aborted=!0;const t={type:e,target:this};this.onabort(t),this._listeners.forEach((e=>e(t)),this)}}onabort(){}addEventListener(e,t){"abort"===e&&this._listeners.push(t)}removeEventListener(e,t){"abort"===e&&(this._listeners=this._listeners.filter((e=>e!==t)))}},o=new Set,s=(e,t)=>{const n=`LRU_CACHE_OPTION_${e}`;u(n)&&d(n,`${e} option`,`options.${t}`,m)},c=(e,t)=>{const n=`LRU_CACHE_METHOD_${e}`;if(u(n)){const{prototype:i}=m,{get:a}=Object.getOwnPropertyDescriptor(i,e);d(n,`${e} method`,`cache.${t}()`,a)}},l=(...e)=>{"object"==typeof process&&process&&"function"==typeof process.emitWarning?process.emitWarning(...e):console.error(...e)},u=e=>!o.has(e),d=(e,t,n,i)=>{o.add(e),l(`The ${t} is deprecated. Please use ${n} instead.`,"DeprecationWarning",e,i)},p=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),f=e=>p(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?g:null:null;class g extends Array{constructor(e){super(e),this.fill(0)}}class h{constructor(e){if(0===e)return[];const t=f(e);this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class m{constructor(e={}){const{max:t=0,ttl:n,ttlResolution:i=1,ttlAutopurge:a,updateAgeOnGet:r,updateAgeOnHas:c,allowStale:d,dispose:g,disposeAfter:v,noDisposeOnSet:y,noUpdateTTL:b,maxSize:w=0,sizeCalculation:S,fetchMethod:x,fetchContext:C,noDeleteOnFetchRejection:T,noDeleteOnStaleGet:E}=e,{length:I,maxAge:_,stale:A}=e instanceof m?{}:e;if(0!==t&&!p(t))throw new TypeError("max option must be a nonnegative integer");const D=t?f(t):Array;if(!D)throw new Error("invalid max value: "+t);if(this.max=t,this.maxSize=w,this.sizeCalculation=S||I,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=x||null,this.fetchMethod&&"function"!=typeof this.fetchMethod)throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=C,!this.fetchMethod&&void 0!==C)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(t).fill(null),this.valList=new Array(t).fill(null),this.next=new D(t),this.prev=new D(t),this.head=0,this.tail=0,this.free=new h(t),this.initialFill=1,this.size=0,"function"==typeof g&&(this.dispose=g),"function"==typeof v?(this.disposeAfter=v,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!y,this.noUpdateTTL=!!b,this.noDeleteOnFetchRejection=!!T,0!==this.maxSize){if(!p(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!d||!!A,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!r,this.updateAgeOnHas=!!c,this.ttlResolution=p(i)||0===i?i:1,this.ttlAutopurge=!!a,this.ttl=n||_||0,this.ttl){if(!p(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(0===this.max&&0===this.ttl&&0===this.maxSize)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const e="LRU_CACHE_UNBOUNDED";u(e)&&(o.add(e),l("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,m))}A&&s("stale","allowStale"),_&&s("maxAge","ttl"),I&&s("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new g(this.max),this.starts=new g(this.max),this.setItemTTL=(e,n,i=t.now())=>{if(this.starts[e]=0!==n?i:0,this.ttls[e]=n,0!==n&&this.ttlAutopurge){const t=setTimeout((()=>{this.isStale(e)&&this.delete(this.keyList[e])}),n+1);t.unref&&t.unref()}},this.updateItemAge=e=>{this.starts[e]=0!==this.ttls[e]?t.now():0};let e=0;const n=()=>{const n=t.now();if(this.ttlResolution>0){e=n;const t=setTimeout((()=>e=0),this.ttlResolution);t.unref&&t.unref()}return n};this.getRemainingTTL=t=>{const i=this.keyMap.get(t);return void 0===i?0:0===this.ttls[i]||0===this.starts[i]?1/0:this.starts[i]+this.ttls[i]-(e||n())},this.isStale=t=>0!==this.ttls[t]&&0!==this.starts[t]&&(e||n())-this.starts[t]>this.ttls[t]}updateItemAge(e){}setItemTTL(e,t,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new g(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,t,n,i)=>{if(!p(n)){if(!i)throw new TypeError("invalid size value (must be positive integer)");if("function"!=typeof i)throw new TypeError("sizeCalculation must be a function");if(n=i(t,e),!p(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return n},this.addItemSize=(e,t)=>{this.sizes[e]=t;const n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,t){}requireSize(e,t,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let t=this.tail;this.isValidIndex(t)&&(!e&&this.isStale(t)||(yield t),t!==this.head);)t=this.prev[t]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let t=this.head;this.isValidIndex(t)&&(!e&&this.isStale(t)||(yield t),t!==this.tail);)t=this.next[t]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(const e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(const e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(const e of this.indexes())yield this.keyList[e]}*rkeys(){for(const e of this.rindexes())yield this.keyList[e]}*values(){for(const e of this.indexes())yield this.valList[e]}*rvalues(){for(const e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,t={}){for(const n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],t)}forEach(e,t=this){for(const n of this.indexes())e.call(t,this.valList[n],this.keyList[n],this)}rforEach(e,t=this){for(const n of this.rindexes())e.call(t,this.valList[n],this.keyList[n],this)}get prune(){return c("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(const t of this.rindexes({allowStale:!0}))this.isStale(t)&&(this.delete(this.keyList[t]),e=!0);return e}dump(){const e=[];for(const n of this.indexes({allowStale:!0})){const i=this.keyList[n],a=this.valList[n],r={value:this.isBackgroundFetch(a)?a.__staleWhileFetching:a};if(this.ttls){r.ttl=this.ttls[n];const e=t.now()-this.starts[n];r.start=Math.floor(Date.now()-e)}this.sizes&&(r.size=this.sizes[n]),e.unshift([i,r])}return e}load(e){this.clear();for(const[n,i]of e){if(i.start){const e=Date.now()-i.start;i.start=t.now()-e}this.set(n,i.value,i)}}dispose(e,t,n){}set(e,t,{ttl:n=this.ttl,start:i,noDisposeOnSet:a=this.noDisposeOnSet,size:r=0,sizeCalculation:o=this.sizeCalculation,noUpdateTTL:s=this.noUpdateTTL}={}){if(r=this.requireSize(e,t,r,o),this.maxSize&&r>this.maxSize)return this;let c=0===this.size?void 0:this.keyMap.get(e);if(void 0===c)c=this.newIndex(),this.keyList[c]=e,this.valList[c]=t,this.keyMap.set(e,c),this.next[this.tail]=c,this.prev[c]=this.tail,this.tail=c,this.size++,this.addItemSize(c,r),s=!1;else{const n=this.valList[c];t!==n&&(this.isBackgroundFetch(n)?n.__abortController.abort():a||(this.dispose(n,e,"set"),this.disposeAfter&&this.disposed.push([n,e,"set"])),this.removeItemSize(c),this.valList[c]=t,this.addItemSize(c,r)),this.moveToTail(c)}if(0===n||0!==this.ttl||this.ttls||this.initializeTTLTracking(),s||this.setItemTTL(c,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return 0===this.size?this.tail:this.size===this.max&&0!==this.max?this.evict(!1):0!==this.free.length?this.free.pop():this.initialFill++}pop(){if(this.size){const e=this.valList[this.head];return this.evict(!0),e}}evict(e){const t=this.head,n=this.keyList[t],i=this.valList[t];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(t),e&&(this.keyList[t]=null,this.valList[t]=null,this.free.push(t)),this.head=this.next[t],this.keyMap.delete(n),this.size--,t}has(e,{updateAgeOnHas:t=this.updateAgeOnHas}={}){const n=this.keyMap.get(e);return void 0!==n&&!this.isStale(n)&&(t&&this.updateItemAge(n),!0)}peek(e,{allowStale:t=this.allowStale}={}){const n=this.keyMap.get(e);if(void 0!==n&&(t||!this.isStale(n))){const e=this.valList[n];return this.isBackgroundFetch(e)?e.__staleWhileFetching:e}}backgroundFetch(e,t,i,a){const r=void 0===t?void 0:this.valList[t];if(this.isBackgroundFetch(r))return r;const o=new n,s={signal:o.signal,options:i,context:a},c=new Promise((t=>t(this.fetchMethod(e,r,s)))).then((t=>(o.signal.aborted||this.set(e,t,s.options),t)),(n=>{if(this.valList[t]===c&&(i.noDeleteOnFetchRejection&&void 0!==c.__staleWhileFetching?this.valList[t]=c.__staleWhileFetching:this.delete(e)),c.__returned===c)throw n}));return c.__abortController=o,c.__staleWhileFetching=r,c.__returned=null,void 0===t?(this.set(e,c,s.options),t=this.keyMap.get(e)):this.valList[t]=c,c}isBackgroundFetch(e){return e&&"object"==typeof e&&"function"==typeof e.then&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||null===e.__returned)}async fetch(e,{allowStale:t=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:r=this.noDisposeOnSet,size:o=0,sizeCalculation:s=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,fetchContext:u=this.fetchContext,forceRefresh:d=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:t,updateAgeOnGet:n,noDeleteOnStaleGet:i});const p={allowStale:t,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:a,noDisposeOnSet:r,size:o,sizeCalculation:s,noUpdateTTL:c,noDeleteOnFetchRejection:l};let f=this.keyMap.get(e);if(void 0===f){const t=this.backgroundFetch(e,f,p,u);return t.__returned=t}{const i=this.valList[f];if(this.isBackgroundFetch(i))return t&&void 0!==i.__staleWhileFetching?i.__staleWhileFetching:i.__returned=i;if(!d&&!this.isStale(f))return this.moveToTail(f),n&&this.updateItemAge(f),i;const a=this.backgroundFetch(e,f,p,u);return t&&void 0!==a.__staleWhileFetching?a.__staleWhileFetching:a.__returned=a}}get(e,{allowStale:t=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){const a=this.keyMap.get(e);if(void 0!==a){const r=this.valList[a],o=this.isBackgroundFetch(r);if(this.isStale(a))return o?t?r.__staleWhileFetching:void 0:(i||this.delete(e),t?r:void 0);if(o)return;return this.moveToTail(a),n&&this.updateItemAge(a),r}}connect(e,t){this.prev[t]=e,this.next[e]=t}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return c("del","delete"),this.delete}delete(e){let t=!1;if(0!==this.size){const n=this.keyMap.get(e);if(void 0!==n)if(t=!0,1===this.size)this.clear();else{this.removeItemSize(n);const t=this.valList[n];this.isBackgroundFetch(t)?t.__abortController.abort():(this.dispose(t,e,"delete"),this.disposeAfter&&this.disposed.push([t,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return t}clear(){for(const e of this.rindexes({allowStale:!0})){const t=this.valList[e];if(this.isBackgroundFetch(t))t.__abortController.abort();else{const n=this.keyList[e];this.dispose(t,n,"delete"),this.disposeAfter&&this.disposed.push([t,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return c("reset","clear"),this.clear}get length(){return(e=>{const t=`LRU_CACHE_PROPERTY_${e}`;if(u(t)){const{prototype:n}=m,{get:i}=Object.getOwnPropertyDescriptor(n,e);d(t,`${e} property`,"cache.size",i)}})("length"),this.size}static get AbortController(){return n}static get AbortSignal(){return r}}e.exports=m},7598:(e,t,n)=>{e.exports=n(1813)},6049:(e,t,n)=>{"use strict";var i,a,r,o=n(7598),s=n(7975).extname,c=/^\s*([^;\s]*)(?:;|\s|$)/,l=/^text\//i;function u(e){if(!e||"string"!=typeof e)return!1;var t=c.exec(e),n=t&&o[t[1].toLowerCase()];return n&&n.charset?n.charset:!(!t||!l.test(t[1]))&&"UTF-8"}t.charset=u,t.charsets={lookup:u},t.contentType=function(e){if(!e||"string"!=typeof e)return!1;var n=-1===e.indexOf("/")?t.lookup(e):e;if(!n)return!1;if(-1===n.indexOf("charset")){var i=t.charset(n);i&&(n+="; charset="+i.toLowerCase())}return n},t.extension=function(e){if(!e||"string"!=typeof e)return!1;var n=c.exec(e),i=n&&t.extensions[n[1].toLowerCase()];return!(!i||!i.length)&&i[0]},t.extensions=Object.create(null),t.lookup=function(e){if(!e||"string"!=typeof e)return!1;var n=s("x."+e).toLowerCase().substr(1);return n&&t.types[n]||!1},t.types=Object.create(null),i=t.extensions,a=t.types,r=["nginx","apache",void 0,"iana"],Object.keys(o).forEach((function(e){var t=o[e],n=t.extensions;if(n&&n.length){i[e]=n;for(var s=0;s<n.length;s++){var c=n[s];if(a[c]){var l=r.indexOf(o[a[c]].source),u=r.indexOf(t.source);if("application/octet-stream"!==a[c]&&(l>u||l===u&&"application/"===a[c].substr(0,12)))continue}a[c]=e}}}))},9504:(e,t,n)=>{var i=n(276);function a(e,t){i.cipher.registerAlgorithm(e,(function(){return new i.aes.Algorithm(e,t)}))}n(3900),n(6370),n(7619),e.exports=i.aes=i.aes||{},i.aes.startEncrypting=function(e,t,n,i){var a=h({key:e,output:n,decrypt:!1,mode:i});return a.start(t),a},i.aes.createEncryptionCipher=function(e,t){return h({key:e,output:null,decrypt:!1,mode:t})},i.aes.startDecrypting=function(e,t,n,i){var a=h({key:e,output:n,decrypt:!0,mode:i});return a.start(t),a},i.aes.createDecryptionCipher=function(e,t){return h({key:e,output:null,decrypt:!0,mode:t})},i.aes.Algorithm=function(e,t){u||p();var n=this;n.name=e,n.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return g(n._w,e,t,!1)},decrypt:function(e,t){return g(n._w,e,t,!0)}}}),n._init=!1},i.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,n=e.key;if("string"!=typeof n||16!==n.length&&24!==n.length&&32!==n.length){if(i.util.isArray(n)&&(16===n.length||24===n.length||32===n.length)){t=n,n=i.util.createBuffer();for(var a=0;a<t.length;++a)n.putByte(t[a])}}else n=i.util.createBuffer(n);if(!i.util.isArray(n)){t=n,n=[];var r=t.length();if(16===r||24===r||32===r)for(r>>>=2,a=0;a<r;++a)n.push(t.getInt32())}if(!i.util.isArray(n)||4!==n.length&&6!==n.length&&8!==n.length)throw new Error("Invalid key parameter.");var o=this.mode.name,s=-1!==["CFB","OFB","CTR","GCM"].indexOf(o);this._w=f(n,e.decrypt&&!s),this._init=!0}},i.aes._expandKey=function(e,t){return u||p(),f(e,t)},i.aes._updateBlock=g,a("AES-ECB",i.cipher.modes.ecb),a("AES-CBC",i.cipher.modes.cbc),a("AES-CFB",i.cipher.modes.cfb),a("AES-OFB",i.cipher.modes.ofb),a("AES-CTR",i.cipher.modes.ctr),a("AES-GCM",i.cipher.modes.gcm);var r,o,s,c,l,u=!1,d=4;function p(){u=!0,s=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;for(r=new Array(256),o=new Array(256),c=new Array(4),l=new Array(4),t=0;t<4;++t)c[t]=new Array(256),l[t]=new Array(256);var n,i,a,d,p,f,g,h=0,m=0;for(t=0;t<256;++t){d=(d=m^m<<1^m<<2^m<<3^m<<4)>>8^255&d^99,r[h]=d,o[d]=h,f=(p=e[d])<<24^d<<16^d<<8^d^p,g=((n=e[h])^(i=e[n])^(a=e[i]))<<24^(h^a)<<16^(h^i^a)<<8^h^n^a;for(var v=0;v<4;++v)c[v][h]=f,l[v][d]=g,f=f<<24|f>>>8,g=g<<24|g>>>8;0===h?h=m=1:(h=n^e[e[e[n^a]]],m^=e[e[m]])}}function f(e,t){for(var n,i=e.slice(0),a=1,o=i.length,c=d*(o+6+1),u=o;u<c;++u)n=i[u-1],u%o==0?(n=r[n>>>16&255]<<24^r[n>>>8&255]<<16^r[255&n]<<8^r[n>>>24]^s[a]<<24,a++):o>6&&u%o==4&&(n=r[n>>>24]<<24^r[n>>>16&255]<<16^r[n>>>8&255]<<8^r[255&n]),i[u]=i[u-o]^n;if(t){for(var p,f=l[0],g=l[1],h=l[2],m=l[3],v=i.slice(0),y=(u=0,(c=i.length)-d);u<c;u+=d,y-=d)if(0===u||u===c-d)v[u]=i[y],v[u+1]=i[y+3],v[u+2]=i[y+2],v[u+3]=i[y+1];else for(var b=0;b<d;++b)p=i[y+b],v[u+(3&-b)]=f[r[p>>>24]]^g[r[p>>>16&255]]^h[r[p>>>8&255]]^m[r[255&p]];i=v}return i}function g(e,t,n,i){var a,s,u,d,p,f,g,h,m,v,y,b,w=e.length/4-1;i?(a=l[0],s=l[1],u=l[2],d=l[3],p=o):(a=c[0],s=c[1],u=c[2],d=c[3],p=r),f=t[0]^e[0],g=t[i?3:1]^e[1],h=t[2]^e[2],m=t[i?1:3]^e[3];for(var S=3,x=1;x<w;++x)v=a[f>>>24]^s[g>>>16&255]^u[h>>>8&255]^d[255&m]^e[++S],y=a[g>>>24]^s[h>>>16&255]^u[m>>>8&255]^d[255&f]^e[++S],b=a[h>>>24]^s[m>>>16&255]^u[f>>>8&255]^d[255&g]^e[++S],m=a[m>>>24]^s[f>>>16&255]^u[g>>>8&255]^d[255&h]^e[++S],f=v,g=y,h=b;n[0]=p[f>>>24]<<24^p[g>>>16&255]<<16^p[h>>>8&255]<<8^p[255&m]^e[++S],n[i?3:1]=p[g>>>24]<<24^p[h>>>16&255]<<16^p[m>>>8&255]<<8^p[255&f]^e[++S],n[2]=p[h>>>24]<<24^p[m>>>16&255]<<16^p[f>>>8&255]<<8^p[255&g]^e[++S],n[i?1:3]=p[m>>>24]<<24^p[f>>>16&255]<<16^p[g>>>8&255]<<8^p[255&h]^e[++S]}function h(e){var t,n="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),a=(t=e.decrypt?i.cipher.createDecipher(n,e.key):i.cipher.createCipher(n,e.key)).start;return t.start=function(e,n){var r=null;n instanceof i.util.ByteBuffer&&(r=n,n={}),(n=n||{}).output=r,n.iv=e,a.call(t,n)},t}},8678:(e,t,n)=>{var i=n(276);n(9504),n(3986);var a=e.exports=i.tls;function r(e,t,n){var r=t.entity===i.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:i.cipher.createDecipher("AES-CBC",r?n.keys.server_write_key:n.keys.client_write_key),iv:r?n.keys.server_write_IV:n.keys.client_write_IV},e.write.cipherState={init:!1,cipher:i.cipher.createCipher("AES-CBC",r?n.keys.client_write_key:n.keys.server_write_key),iv:r?n.keys.client_write_IV:n.keys.server_write_IV},e.read.cipherFunction=l,e.write.cipherFunction=o,e.read.macLength=e.write.macLength=n.mac_length,e.read.macFunction=e.write.macFunction=a.hmac_sha1}function o(e,t){var n,r=!1,o=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(o),t.updateSequenceNumber(),n=e.version.minor===a.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:i.random.getBytesSync(16),t.cipherState.init=!0;var c=t.cipherState.cipher;return c.start({iv:n}),e.version.minor>=a.Versions.TLS_1_1.minor&&c.output.putBytes(n),c.update(e.fragment),c.finish(s)&&(e.fragment=c.output,e.length=e.fragment.length(),r=!0),r}function s(e,t,n){if(!n){var i=e-t.length()%e;t.fillWithByte(i-1,i)}return!0}function c(e,t,n){var i=!0;if(n){for(var a=t.length(),r=t.last(),o=a-1-r;o<a-1;++o)i=i&&t.at(o)==r;i&&t.truncate(r+1)}return i}function l(e,t){var n,r=!1;n=e.version.minor===a.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:e.fragment.getBytes(16),t.cipherState.init=!0;var o=t.cipherState.cipher;o.start({iv:n}),o.update(e.fragment),r=o.finish(c);var s=t.macLength,l=i.random.getBytesSync(s),u=o.output.length();u>=s?(e.fragment=o.output.getBytes(u-s),l=o.output.getBytes(s)):e.fragment=o.output.getBytes(),e.fragment=i.util.createBuffer(e.fragment),e.length=e.fragment.length();var d=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=function(e,t,n){var a=i.hmac.create();return a.start("SHA1",e),a.update(t),t=a.digest().getBytes(),a.start(null,null),a.update(n),t===(n=a.digest().getBytes())}(t.macKey,l,d)&&r,r}a.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=a.BulkCipherAlgorithm.aes,e.cipher_type=a.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=a.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:r},a.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=a.BulkCipherAlgorithm.aes,e.cipher_type=a.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=a.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:r}},4309:(e,t,n)=>{var i=n(276);n(2746);var a=i.asn1;t.privateKeyValidator={name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},t.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}},2746:(e,t,n)=>{var i=n(276);n(7619),n(6418);var a=e.exports=i.asn1=i.asn1||{};function r(e,t,n){if(n>t){var i=new Error("Too few bytes to parse DER.");throw i.available=e.length(),i.remaining=t,i.requested=n,i}}function o(e,t,n,i){var s;r(e,t,2);var c=e.getByte();t--;var l=192&c,u=31&c;s=e.length();var d,p,f=function(e,t){var n=e.getByte();if(t--,128!==n){var i;if(128&n){var a=127&n;r(e,t,a),i=e.getInt(a<<3)}else i=n;if(i<0)throw new Error("Negative length: "+i);return i}}(e,t);if(t-=s-e.length(),void 0!==f&&f>t){if(i.strict){var g=new Error("Too few bytes to read ASN.1 value.");throw g.available=e.length(),g.remaining=t,g.requested=f,g}f=t}var h=!(32&~c);if(h)if(d=[],void 0===f)for(;;){if(r(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}s=e.length(),d.push(o(e,t,n+1,i)),t-=s-e.length()}else for(;f>0;)s=e.length(),d.push(o(e,f,n+1,i)),t-=s-e.length(),f-=s-e.length();if(void 0===d&&l===a.Class.UNIVERSAL&&u===a.Type.BITSTRING&&(p=e.bytes(f)),void 0===d&&i.decodeBitStrings&&l===a.Class.UNIVERSAL&&u===a.Type.BITSTRING&&f>1){var m=e.read,v=t,y=0;if(u===a.Type.BITSTRING&&(r(e,t,1),y=e.getByte(),t--),0===y)try{s=e.length();var b=o(e,t,n+1,{strict:!0,decodeBitStrings:!0}),w=s-e.length();t-=w,u==a.Type.BITSTRING&&w++;var S=b.tagClass;w!==f||S!==a.Class.UNIVERSAL&&S!==a.Class.CONTEXT_SPECIFIC||(d=[b])}catch(e){}void 0===d&&(e.read=m,t=v)}if(void 0===d){if(void 0===f){if(i.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=t}if(u===a.Type.BMPSTRING)for(d="";f>0;f-=2)r(e,t,2),d+=String.fromCharCode(e.getInt16()),t-=2;else d=e.getBytes(f),t-=f}var x=void 0===p?null:{bitStringContents:p};return a.create(l,u,h,d,x)}a.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},a.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},a.create=function(e,t,n,r,o){if(i.util.isArray(r)){for(var s=[],c=0;c<r.length;++c)void 0!==r[c]&&s.push(r[c]);r=s}var l={tagClass:e,type:t,constructed:n,composed:n||i.util.isArray(r),value:r};return o&&"bitStringContents"in o&&(l.bitStringContents=o.bitStringContents,l.original=a.copy(l)),l},a.copy=function(e,t){var n;if(i.util.isArray(e)){n=[];for(var r=0;r<e.length;++r)n.push(a.copy(e[r],t));return n}return"string"==typeof e?e:(n={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:a.copy(e.value,t)},t&&!t.excludeBitStringContents&&(n.bitStringContents=e.bitStringContents),n)},a.equals=function(e,t,n){if(i.util.isArray(e)){if(!i.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!a.equals(e[r],t[r]))return!1;return!0}if(typeof e!=typeof t)return!1;if("string"==typeof e)return e===t;var o=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&a.equals(e.value,t.value);return n&&n.includeBitStringContents&&(o=o&&e.bitStringContents===t.bitStringContents),o},a.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t},a.fromDer=function(e,t){void 0===t&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"==typeof t&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"string"==typeof e&&(e=i.util.createBuffer(e));var n=e.length(),a=o(e,e.length(),0,t);if(t.parseAllBytes&&0!==e.length()){var r=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw r.byteCount=n,r.remaining=e.length(),r}return a},a.toDer=function(e){var t=i.util.createBuffer(),n=e.tagClass|e.type,r=i.util.createBuffer(),o=!1;if("bitStringContents"in e&&(o=!0,e.original&&(o=a.equals(e,e.original))),o)r.putBytes(e.bitStringContents);else if(e.composed){e.constructed?n|=32:r.putByte(0);for(var s=0;s<e.value.length;++s)void 0!==e.value[s]&&r.putBuffer(a.toDer(e.value[s]))}else if(e.type===a.Type.BMPSTRING)for(s=0;s<e.value.length;++s)r.putInt16(e.value.charCodeAt(s));else!(e.type===a.Type.INTEGER&&e.value.length>1)||(0!==e.value.charCodeAt(0)||128&e.value.charCodeAt(1))&&(255!==e.value.charCodeAt(0)||128&~e.value.charCodeAt(1))?r.putBytes(e.value):r.putBytes(e.value.substr(1));if(t.putByte(n),r.length()<=127)t.putByte(127&r.length());else{var c=r.length(),l="";do{l+=String.fromCharCode(255&c),c>>>=8}while(c>0);for(t.putByte(128|l.length),s=l.length-1;s>=0;--s)t.putByte(l.charCodeAt(s))}return t.putBuffer(r),t},a.oidToDer=function(e){var t,n,a,r,o=e.split("."),s=i.util.createBuffer();s.putByte(40*parseInt(o[0],10)+parseInt(o[1],10));for(var c=2;c<o.length;++c){t=!0,n=[],a=parseInt(o[c],10);do{r=127&a,a>>>=7,t||(r|=128),n.push(r),t=!1}while(a>0);for(var l=n.length-1;l>=0;--l)s.putByte(n[l])}return s},a.derToOid=function(e){var t;"string"==typeof e&&(e=i.util.createBuffer(e));var n=e.getByte();t=Math.floor(n/40)+"."+n%40;for(var a=0;e.length()>0;)a<<=7,128&(n=e.getByte())?a+=127&n:(t+="."+(a+n),a=0);return t},a.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=n>=50?1900+n:2e3+n;var i=parseInt(e.substr(2,2),10)-1,a=parseInt(e.substr(4,2),10),r=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),s=0;if(e.length>11){var c=e.charAt(10),l=10;"+"!==c&&"-"!==c&&(s=parseInt(e.substr(10,2),10),l+=2)}if(t.setUTCFullYear(n,i,a),t.setUTCHours(r,o,s,0),l&&("+"===(c=e.charAt(l))||"-"===c)){var u=60*parseInt(e.substr(l+1,2),10)+parseInt(e.substr(l+4,2),10);u*=6e4,"+"===c?t.setTime(+t-u):t.setTime(+t+u)}return t},a.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),i=parseInt(e.substr(4,2),10)-1,a=parseInt(e.substr(6,2),10),r=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),c=0,l=0,u=!1;"Z"===e.charAt(e.length-1)&&(u=!0);var d=e.length-5,p=e.charAt(d);return"+"!==p&&"-"!==p||(l=60*parseInt(e.substr(d+1,2),10)+parseInt(e.substr(d+4,2),10),l*=6e4,"+"===p&&(l*=-1),u=!0),"."===e.charAt(14)&&(c=1e3*parseFloat(e.substr(14),10)),u?(t.setUTCFullYear(n,i,a),t.setUTCHours(r,o,s,c),t.setTime(+t+l)):(t.setFullYear(n,i,a),t.setHours(r,o,s,c)),t},a.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",n=[];n.push((""+e.getUTCFullYear()).substr(2)),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var i=0;i<n.length;++i)n[i].length<2&&(t+="0"),t+=n[i];return t+"Z"},a.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",n=[];n.push(""+e.getUTCFullYear()),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var i=0;i<n.length;++i)n[i].length<2&&(t+="0"),t+=n[i];return t+"Z"},a.integerToDer=function(e){var t=i.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=e,n},a.derToInteger=function(e){"string"==typeof e&&(e=i.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},a.validate=function(e,t,n,r){var o=!1;if(e.tagClass!==t.tagClass&&void 0!==t.tagClass||e.type!==t.type&&void 0!==t.type)r&&(e.tagClass!==t.tagClass&&r.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&r.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||void 0===t.constructed){if(o=!0,t.value&&i.util.isArray(t.value))for(var s=0,c=0;o&&c<t.value.length;++c)o=t.value[c].optional||!1,e.value[s]&&((o=a.validate(e.value[s],t.value[c],n,r))?++s:t.value[c].optional&&(o=!0)),!o&&r&&r.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(o&&n&&(t.capture&&(n[t.capture]=e.value),t.captureAsn1&&(n[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(n[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)n[t.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");n[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else r&&r.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return o};var s=/[^\\u0000-\\u00ff]/;a.prettyPrint=function(e,t,n){var r="";n=n||2,(t=t||0)>0&&(r+="\n");for(var o="",c=0;c<t*n;++c)o+=" ";switch(r+=o+"Tag: ",e.tagClass){case a.Class.UNIVERSAL:r+="Universal:";break;case a.Class.APPLICATION:r+="Application:";break;case a.Class.CONTEXT_SPECIFIC:r+="Context-Specific:";break;case a.Class.PRIVATE:r+="Private:"}if(e.tagClass===a.Class.UNIVERSAL)switch(r+=e.type,e.type){case a.Type.NONE:r+=" (None)";break;case a.Type.BOOLEAN:r+=" (Boolean)";break;case a.Type.INTEGER:r+=" (Integer)";break;case a.Type.BITSTRING:r+=" (Bit string)";break;case a.Type.OCTETSTRING:r+=" (Octet string)";break;case a.Type.NULL:r+=" (Null)";break;case a.Type.OID:r+=" (Object Identifier)";break;case a.Type.ODESC:r+=" (Object Descriptor)";break;case a.Type.EXTERNAL:r+=" (External or Instance of)";break;case a.Type.REAL:r+=" (Real)";break;case a.Type.ENUMERATED:r+=" (Enumerated)";break;case a.Type.EMBEDDED:r+=" (Embedded PDV)";break;case a.Type.UTF8:r+=" (UTF8)";break;case a.Type.ROID:r+=" (Relative Object Identifier)";break;case a.Type.SEQUENCE:r+=" (Sequence)";break;case a.Type.SET:r+=" (Set)";break;case a.Type.PRINTABLESTRING:r+=" (Printable String)";break;case a.Type.IA5String:r+=" (IA5String (ASCII))";break;case a.Type.UTCTIME:r+=" (UTC time)";break;case a.Type.GENERALIZEDTIME:r+=" (Generalized time)";break;case a.Type.BMPSTRING:r+=" (BMP String)"}else r+=e.type;if(r+="\n",r+=o+"Constructed: "+e.constructed+"\n",e.composed){var l=0,u="";for(c=0;c<e.value.length;++c)void 0!==e.value[c]&&(l+=1,u+=a.prettyPrint(e.value[c],t+1,n),c+1<e.value.length&&(u+=","));r+=o+"Sub values: "+l+u}else{if(r+=o+"Value: ",e.type===a.Type.OID){var d=a.derToOid(e.value);r+=d,i.pki&&i.pki.oids&&d in i.pki.oids&&(r+=" ("+i.pki.oids[d]+") ")}if(e.type===a.Type.INTEGER)try{r+=a.derToInteger(e.value)}catch(t){r+="0x"+i.util.bytesToHex(e.value)}else if(e.type===a.Type.BITSTRING){if(e.value.length>1?r+="0x"+i.util.bytesToHex(e.value.slice(1)):r+="(none)",e.value.length>0){var p=e.value.charCodeAt(0);1==p?r+=" (1 unused bit shown)":p>1&&(r+=" ("+p+" unused bits shown)")}}else if(e.type===a.Type.OCTETSTRING)s.test(e.value)||(r+="("+e.value+") "),r+="0x"+i.util.bytesToHex(e.value);else if(e.type===a.Type.UTF8)try{r+=i.util.decodeUtf8(e.value)}catch(t){if("URI malformed"!==t.message)throw t;r+="0x"+i.util.bytesToHex(e.value)+" (malformed UTF8)"}else e.type===a.Type.PRINTABLESTRING||e.type===a.Type.IA5String?r+=e.value:s.test(e.value)?r+="0x"+i.util.bytesToHex(e.value):0===e.value.length?r+="[null]":r+=e.value}return r}},4058:e=>{var t={};e.exports=t;var n={};t.encode=function(e,t,n){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==n&&"number"!=typeof n)throw new TypeError('"maxline" must be a number.');var i="";if(e instanceof Uint8Array){var a=0,r=t.length,o=t.charAt(0),s=[0];for(a=0;a<e.length;++a){for(var c=0,l=e[a];c<s.length;++c)l+=s[c]<<8,s[c]=l%r,l=l/r|0;for(;l>0;)s.push(l%r),l=l/r|0}for(a=0;0===e[a]&&a<e.length-1;++a)i+=o;for(a=s.length-1;a>=0;--a)i+=t[s[a]]}else i=function(e,t){var n=0,i=t.length,a=t.charAt(0),r=[0];for(n=0;n<e.length();++n){for(var o=0,s=e.at(n);o<r.length;++o)s+=r[o]<<8,r[o]=s%i,s=s/i|0;for(;s>0;)r.push(s%i),s=s/i|0}var c="";for(n=0;0===e.at(n)&&n<e.length()-1;++n)c+=a;for(n=r.length-1;n>=0;--n)c+=t[r[n]];return c}(e,t);if(n){var u=new RegExp(".{1,"+n+"}","g");i=i.match(u).join("\r\n")}return i},t.decode=function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');var i=n[t];if(!i){i=n[t]=[];for(var a=0;a<t.length;++a)i[t.charCodeAt(a)]=a}e=e.replace(/\s/g,"");var r=t.length,o=t.charAt(0),s=[0];for(a=0;a<e.length;a++){var c=i[e.charCodeAt(a)];if(void 0===c)return;for(var l=0,u=c;l<s.length;++l)u+=s[l]*r,s[l]=255&u,u>>=8;for(;u>0;)s.push(255&u),u>>=8}for(var d=0;e[d]===o&&d<e.length-1;++d)s.push(0);return"undefined"!=typeof Buffer?Buffer.from(s.reverse()):new Uint8Array(s.reverse())}},3900:(e,t,n)=>{var i=n(276);n(7619),e.exports=i.cipher=i.cipher||{},i.cipher.algorithms=i.cipher.algorithms||{},i.cipher.createCipher=function(e,t){var n=e;if("string"==typeof n&&(n=i.cipher.getAlgorithm(n))&&(n=n()),!n)throw new Error("Unsupported algorithm: "+e);return new i.cipher.BlockCipher({algorithm:n,key:t,decrypt:!1})},i.cipher.createDecipher=function(e,t){var n=e;if("string"==typeof n&&(n=i.cipher.getAlgorithm(n))&&(n=n()),!n)throw new Error("Unsupported algorithm: "+e);return new i.cipher.BlockCipher({algorithm:n,key:t,decrypt:!0})},i.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),i.cipher.algorithms[e]=t},i.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in i.cipher.algorithms?i.cipher.algorithms[e]:null};var a=i.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};a.prototype.start=function(e){e=e||{};var t={};for(var n in e)t[n]=e[n];t.decrypt=this._decrypt,this._finish=!1,this._input=i.util.createBuffer(),this.output=e.output||i.util.createBuffer(),this.mode.start(t)},a.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},a.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}},6370:(e,t,n)=>{var i=n(276);n(7619),i.cipher=i.cipher||{};var a=e.exports=i.cipher.modes=i.cipher.modes||{};function r(e,t){if("string"==typeof e&&(e=i.util.createBuffer(e)),i.util.isArray(e)&&e.length>4){var n=e;e=i.util.createBuffer();for(var a=0;a<n.length;++a)e.putByte(n[a])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!i.util.isArray(e)){var r=[],o=t/4;for(a=0;a<o;++a)r.push(e.getInt32());e=r}return e}function o(e){e[e.length-1]=e[e.length-1]+1&4294967295}function s(e){return[e/4294967296|0,4294967295&e]}a.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},a.ecb.prototype.start=function(e){},a.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),i=0;i<this._ints;++i)t.putInt32(this._outBlock[i])},a.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),i=0;i<this._ints;++i)t.putInt32(this._outBlock[i])},a.ecb.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},a.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),i=e.at(n-1);return!(i>this.blockSize<<2||(e.truncate(i),0))},a.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},a.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},a.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=this._prev[i]^e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]);this._prev=this._outBlock},a.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),i=0;i<this._ints;++i)t.putInt32(this._prev[i]^this._outBlock[i]);this._prev=this._inBlock.slice(0)},a.cbc.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},a.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),i=e.at(n-1);return!(i>this.blockSize<<2||(e.truncate(i),0))},a.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=i.util.createBuffer(),this._partialBytes=0},a.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},a.cfb.prototype.encrypt=function(e,t,n){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32()^this._outBlock[a],t.putInt32(this._inBlock[a]);else{var r=(this.blockSize-i)%this.blockSize;for(r>0&&(r=this.blockSize-r),this._partialOutput.clear(),a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32()^this._outBlock[a],this._partialOutput.putInt32(this._partialBlock[a]);if(r>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),r>0&&!n)return t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=r,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}},a.cfb.prototype.decrypt=function(e,t,n){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32(),t.putInt32(this._inBlock[a]^this._outBlock[a]);else{var r=(this.blockSize-i)%this.blockSize;for(r>0&&(r=this.blockSize-r),this._partialOutput.clear(),a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[a]^this._outBlock[a]);if(r>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),r>0&&!n)return t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=r,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}},a.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=i.util.createBuffer(),this._partialBytes=0},a.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},a.ofb.prototype.encrypt=function(e,t,n){var i=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]),this._inBlock[a]=this._outBlock[a];else{var r=(this.blockSize-i)%this.blockSize;for(r>0&&(r=this.blockSize-r),this._partialOutput.clear(),a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(r>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._outBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),r>0&&!n)return t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=r,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}},a.ofb.prototype.decrypt=a.ofb.prototype.encrypt,a.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=i.util.createBuffer(),this._partialBytes=0},a.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},a.ctr.prototype.encrypt=function(e,t,n){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]);else{var r=(this.blockSize-i)%this.blockSize;for(r>0&&(r=this.blockSize-r),this._partialOutput.clear(),a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(r>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),r>0&&!n)return t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=r,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},a.ctr.prototype.decrypt=a.ctr.prototype.encrypt,a.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=i.util.createBuffer(),this._partialBytes=0,this._R=3774873600},a.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,n=i.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?i.util.createBuffer(e.additionalData):i.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=i.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=n.length();if(12===a)this._j0=[n.getInt32(),n.getInt32(),n.getInt32(),1];else{for(this._j0=[0,0,0,0];n.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(s(8*a)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,t=i.util.createBuffer(t),this._aDataLength=s(8*t.length());var r=t.length()%this.blockSize;for(r&&t.fillWithByte(0,this.blockSize-r),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},a.gcm.prototype.encrypt=function(e,t,n){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize){for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^=e.getInt32());this._cipherLength+=this.blockSize}else{var r=(this.blockSize-i)%this.blockSize;for(r>0&&(r=this.blockSize-r),this._partialOutput.clear(),a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(r<=0||n){if(n){var s=i%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(a=0;a<this._ints;++a)this._outBlock[a]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),r>0&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=r,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},a.gcm.prototype.decrypt=function(e,t,n){var i=e.length();if(i<this.blockSize&&!(n&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^this._hashBlock[a]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize},a.gcm.prototype.afterFinish=function(e,t){var n=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=i.util.createBuffer();var a=this._aDataLength.concat(s(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,a);var r=[];this.cipher.encrypt(this._j0,r);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^r[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n},a.gcm.prototype.multiply=function(e,t){for(var n=[0,0,0,0],i=t.slice(0),a=0;a<128;++a)e[a/32|0]&1<<31-a%32&&(n[0]^=i[0],n[1]^=i[1],n[2]^=i[2],n[3]^=i[3]),this.pow(i,i);return n},a.gcm.prototype.pow=function(e,t){for(var n=1&e[3],i=3;i>0;--i)t[i]=e[i]>>>1|(1&e[i-1])<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)},a.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],n=0;n<32;++n){var i=e[n/8|0]>>>4*(7-n%8)&15,a=this._m[n][i];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t},a.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)},a.gcm.prototype.generateHashTable=function(e,t){for(var n=8/t,i=4*n,a=16*n,r=new Array(a),o=0;o<a;++o){var s=[0,0,0,0],c=(i-1-o%i)*t;s[o/i|0]=1<<t-1<<c,r[o]=this.generateSubHashTable(this.multiply(s,e),t)}return r},a.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,i=n>>>1,a=new Array(n);a[i]=e.slice(0);for(var r=i>>>1;r>0;)this.pow(a[2*r],a[r]=[]),r>>=1;for(r=2;r<i;){for(var o=1;o<r;++o){var s=a[r],c=a[o];a[r+o]=[s[0]^c[0],s[1]^c[1],s[2]^c[2],s[3]^c[3]]}r*=2}for(a[0]=[0,0,0,0],r=i+1;r<n;++r){var l=a[r^i];a[r]=[e[0]^l[0],e[1]^l[1],e[2]^l[2],e[3]^l[3]]}return a}},9095:(e,t,n)=>{var i=n(276);function a(e,t){i.cipher.registerAlgorithm(e,(function(){return new i.des.Algorithm(e,t)}))}n(3900),n(6370),n(7619),e.exports=i.des=i.des||{},i.des.startEncrypting=function(e,t,n,i){var a=g({key:e,output:n,decrypt:!1,mode:i||(null===t?"ECB":"CBC")});return a.start(t),a},i.des.createEncryptionCipher=function(e,t){return g({key:e,output:null,decrypt:!1,mode:t})},i.des.startDecrypting=function(e,t,n,i){var a=g({key:e,output:n,decrypt:!0,mode:i||(null===t?"ECB":"CBC")});return a.start(t),a},i.des.createDecryptionCipher=function(e,t){return g({key:e,output:null,decrypt:!0,mode:t})},i.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return f(n._keys,e,t,!1)},decrypt:function(e,t){return f(n._keys,e,t,!0)}}}),n._init=!1},i.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=i.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,n=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],i=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],a=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],r=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],g=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],h=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=e.length()>8?3:1,v=[],y=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,w=0;w<m;w++){var S=e.getInt32(),x=e.getInt32();S^=(t=252645135&(S>>>4^x))<<4,S^=t=65535&((x^=t)>>>-16^S),S^=(t=858993459&(S>>>2^(x^=t<<-16)))<<2,S^=t=65535&((x^=t)>>>-16^S),S^=(t=1431655765&(S>>>1^(x^=t<<-16)))<<1,S^=t=16711935&((x^=t)>>>8^S),t=(S^=(t=1431655765&(S>>>1^(x^=t<<8)))<<1)<<8|(x^=t)>>>20&240,S=x<<24|x<<8&16711680|x>>>8&65280|x>>>24&240,x=t;for(var C=0;C<y.length;++C){y[C]?(S=S<<2|S>>>26,x=x<<2|x>>>26):(S=S<<1|S>>>27,x=x<<1|x>>>27);var T=n[(S&=-15)>>>28]|i[S>>>24&15]|a[S>>>20&15]|r[S>>>16&15]|o[S>>>12&15]|s[S>>>8&15]|c[S>>>4&15],E=l[(x&=-15)>>>28]|u[x>>>24&15]|d[x>>>20&15]|p[x>>>16&15]|f[x>>>12&15]|g[x>>>8&15]|h[x>>>4&15];t=65535&(E>>>16^T),v[b++]=T^t,v[b++]=E^t<<16}}return v}(t),this._init=!0}},a("DES-ECB",i.cipher.modes.ecb),a("DES-CBC",i.cipher.modes.cbc),a("DES-CFB",i.cipher.modes.cfb),a("DES-OFB",i.cipher.modes.ofb),a("DES-CTR",i.cipher.modes.ctr),a("3DES-ECB",i.cipher.modes.ecb),a("3DES-CBC",i.cipher.modes.cbc),a("3DES-CFB",i.cipher.modes.cfb),a("3DES-OFB",i.cipher.modes.ofb),a("3DES-CTR",i.cipher.modes.ctr);var r=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],s=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],c=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],l=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],u=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],d=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],p=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function f(e,t,n,i){var a,f,g=32===e.length?3:9;a=3===g?i?[30,-2,-2]:[0,32,2]:i?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var h=t[0],m=t[1];h^=(f=252645135&(h>>>4^m))<<4,h^=(f=65535&(h>>>16^(m^=f)))<<16,h^=f=858993459&((m^=f)>>>2^h),h^=f=16711935&((m^=f<<2)>>>8^h),h=(h^=(f=1431655765&(h>>>1^(m^=f<<8)))<<1)<<1|h>>>31,m=(m^=f)<<1|m>>>31;for(var v=0;v<g;v+=3){for(var y=a[v+1],b=a[v+2],w=a[v];w!=y;w+=b){var S=m^e[w],x=(m>>>4|m<<28)^e[w+1];f=h,h=m,m=f^(o[S>>>24&63]|c[S>>>16&63]|u[S>>>8&63]|p[63&S]|r[x>>>24&63]|s[x>>>16&63]|l[x>>>8&63]|d[63&x])}f=h,h=m,m=f}m=m>>>1|m<<31,m^=f=1431655765&((h=h>>>1|h<<31)>>>1^m),m^=(f=16711935&(m>>>8^(h^=f<<1)))<<8,m^=(f=858993459&(m>>>2^(h^=f)))<<2,m^=f=65535&((h^=f)>>>16^m),m^=f=252645135&((h^=f<<16)>>>4^m),h^=f<<4,n[0]=h,n[1]=m}function g(e){var t,n="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),a=(t=e.decrypt?i.cipher.createDecipher(n,e.key):i.cipher.createCipher(n,e.key)).start;return t.start=function(e,n){var r=null;n instanceof i.util.ByteBuffer&&(r=n,n={}),(n=n||{}).output=r,n.iv=e,a.call(t,n)},t}},2926:(e,t,n)=>{var i=n(276);n(3736),n(9356),n(2313),n(7619);var a=n(4309),r=a.publicKeyValidator,o=a.privateKeyValidator;if(void 0===s)var s=i.jsbn.BigInteger;var c=i.util.ByteBuffer,l="undefined"==typeof Buffer?Uint8Array:Buffer;i.pki=i.pki||{},e.exports=i.pki.ed25519=i.ed25519=i.ed25519||{};var u=i.ed25519;function d(e){var t=e.message;if(t instanceof Uint8Array||t instanceof l)return t;var n=e.encoding;if(void 0===t){if(!e.md)throw new TypeError('"options.message" or "options.md" not specified.');t=e.md.digest().getBytes(),n="binary"}if("string"==typeof t&&!n)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if("string"==typeof t){if("undefined"!=typeof Buffer)return Buffer.from(t,n);t=new c(t,n)}else if(!(t instanceof c))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var i=new l(t.length()),a=0;a<i.length;++a)i[a]=t.at(a);return i}u.constants={},u.constants.PUBLIC_KEY_BYTE_LENGTH=32,u.constants.PRIVATE_KEY_BYTE_LENGTH=64,u.constants.SEED_BYTE_LENGTH=32,u.constants.SIGN_BYTE_LENGTH=64,u.constants.HASH_BYTE_LENGTH=64,u.generateKeyPair=function(e){var t=(e=e||{}).seed;if(void 0===t)t=i.random.getBytesSync(u.constants.SEED_BYTE_LENGTH);else if("string"==typeof t){if(t.length!==u.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+u.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=d({message:t,encoding:"binary"});for(var n=new l(u.constants.PUBLIC_KEY_BYTE_LENGTH),a=new l(u.constants.PRIVATE_KEY_BYTE_LENGTH),r=0;r<32;++r)a[r]=t[r];return function(e,t){var n,i=[U(),U(),U(),U()],a=w(t,32);for(a[0]&=248,a[31]&=127,a[31]|=64,P(i,a),E(e,i),n=0;n<32;++n)t[n+32]=e[n]}(n,a),{publicKey:n,privateKey:a}},u.privateKeyFromAsn1=function(e){var t={},n=[];if(!i.asn1.validate(e,o,t,n)){var a=new Error("Invalid Key.");throw a.errors=n,a}var r=i.asn1.derToOid(t.privateKeyOid),s=i.oids.EdDSA25519;if(r!==s)throw new Error('Invalid OID "'+r+'"; OID must be "'+s+'".');var c=t.privateKey;return{privateKeyBytes:d({message:i.asn1.fromDer(c).value,encoding:"binary"})}},u.publicKeyFromAsn1=function(e){var t={},n=[];if(!i.asn1.validate(e,r,t,n)){var a=new Error("Invalid Key.");throw a.errors=n,a}var o=i.asn1.derToOid(t.publicKeyOid),s=i.oids.EdDSA25519;if(o!==s)throw new Error('Invalid OID "'+o+'"; OID must be "'+s+'".');var c=t.ed25519PublicKey;if(c.length!==u.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return d({message:c,encoding:"binary"})},u.publicKeyFromPrivateKey=function(e){var t=d({message:(e=e||{}).privateKey,encoding:"binary"});if(t.length!==u.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+u.constants.PRIVATE_KEY_BYTE_LENGTH);for(var n=new l(u.constants.PUBLIC_KEY_BYTE_LENGTH),i=0;i<n.length;++i)n[i]=t[32+i];return n},u.sign=function(e){var t=d(e=e||{}),n=d({message:e.privateKey,encoding:"binary"});if(n.length===u.constants.SEED_BYTE_LENGTH)n=u.generateKeyPair({seed:n}).privateKey;else if(n.length!==u.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+u.constants.SEED_BYTE_LENGTH+" or "+u.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new l(u.constants.SIGN_BYTE_LENGTH+t.length);!function(e,t,n,i){var a,r,o=new Float64Array(64),s=[U(),U(),U(),U()],c=w(i,32);c[0]&=248,c[31]&=127,c[31]|=64;for(a=0;a<n;++a)e[64+a]=t[a];for(a=0;a<32;++a)e[32+a]=c[32+a];var l=w(e.subarray(32),n+32);for(x(l),P(s,l),E(e,s),a=32;a<64;++a)e[a]=i[a];var u=w(e,n+64);for(x(u),a=32;a<64;++a)o[a]=0;for(a=0;a<32;++a)o[a]=l[a];for(a=0;a<32;++a)for(r=0;r<32;r++)o[a+r]+=u[a]*c[r];S(e.subarray(32),o)}(i,t,t.length,n);for(var a=new l(u.constants.SIGN_BYTE_LENGTH),r=0;r<a.length;++r)a[r]=i[r];return a},u.verify=function(e){var t=d(e=e||{});if(void 0===e.signature)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var n=d({message:e.signature,encoding:"binary"});if(n.length!==u.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+u.constants.SIGN_BYTE_LENGTH);var i=d({message:e.publicKey,encoding:"binary"});if(i.length!==u.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+u.constants.PUBLIC_KEY_BYTE_LENGTH);var a,r=new l(u.constants.SIGN_BYTE_LENGTH+t.length),o=new l(u.constants.SIGN_BYTE_LENGTH+t.length);for(a=0;a<u.constants.SIGN_BYTE_LENGTH;++a)r[a]=n[a];for(a=0;a<t.length;++a)r[a+u.constants.SIGN_BYTE_LENGTH]=t[a];return function(e,t,n,i){var a,r=new l(32),o=[U(),U(),U(),U()],s=[U(),U(),U(),U()];if(n<64)return-1;if(function(e,t){var n=U(),i=U(),a=U(),r=U(),o=U(),s=U(),c=U();return B(e[2],f),function(e,t){var n;for(n=0;n<16;++n)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}(e[1],t),F(a,e[1]),L(r,a,g),M(a,a,e[2]),N(r,e[2],r),F(o,r),F(s,o),L(c,s,o),L(n,c,a),L(n,n,r),function(e,t){var n,i=U();for(n=0;n<16;++n)i[n]=t[n];for(n=250;n>=0;--n)F(i,i),1!==n&&L(i,i,t);for(n=0;n<16;++n)e[n]=i[n]}(n,n),L(n,n,a),L(n,n,r),L(n,n,r),L(e[0],n,r),F(i,e[0]),L(i,i,r),_(i,a)&&L(e[0],e[0],b),F(i,e[0]),L(i,i,r),_(i,a)?-1:(D(e[0])===t[31]>>7&&M(e[0],p,e[0]),L(e[3],e[0],e[1]),0)}(s,i))return-1;for(a=0;a<n;++a)e[a]=t[a];for(a=0;a<32;++a)e[a+32]=i[a];var c=w(e,n);if(x(c),k(o,s,c),P(s,t.subarray(32)),C(o,s),E(r,o),n-=64,A(t,0,r,0)){for(a=0;a<n;++a)e[a]=0;return-1}for(a=0;a<n;++a)e[a]=t[a+64];return n}(o,r,r.length,i)>=0};var p=U(),f=U([1]),g=U([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=U([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=U([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),v=U([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),y=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),b=U([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function w(e,t){var n=i.md.sha512.create(),a=new c(e);n.update(a.getBytes(t),"binary");var r=n.digest().getBytes();if("undefined"!=typeof Buffer)return Buffer.from(r,"binary");for(var o=new l(u.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)o[s]=r.charCodeAt(s);return o}function S(e,t){var n,i,a,r;for(i=63;i>=32;--i){for(n=0,a=i-32,r=i-12;a<r;++a)t[a]+=n-16*t[i]*y[a-(i-32)],n=t[a]+128>>8,t[a]-=256*n;t[a]+=n,t[i]=0}for(n=0,a=0;a<32;++a)t[a]+=n-(t[31]>>4)*y[a],n=t[a]>>8,t[a]&=255;for(a=0;a<32;++a)t[a]-=n*y[a];for(i=0;i<32;++i)t[i+1]+=t[i]>>8,e[i]=255&t[i]}function x(e){for(var t=new Float64Array(64),n=0;n<64;++n)t[n]=e[n],e[n]=0;S(e,t)}function C(e,t){var n=U(),i=U(),a=U(),r=U(),o=U(),s=U(),c=U(),l=U(),u=U();M(n,e[1],e[0]),M(u,t[1],t[0]),L(n,n,u),N(i,e[0],e[1]),N(u,t[0],t[1]),L(i,i,u),L(a,e[3],t[3]),L(a,a,h),L(r,e[2],t[2]),N(r,r,r),M(o,i,n),M(s,r,a),N(c,r,a),N(l,i,n),L(e[0],o,s),L(e[1],l,c),L(e[2],c,s),L(e[3],o,l)}function T(e,t,n){for(var i=0;i<4;++i)O(e[i],t[i],n)}function E(e,t){var n=U(),i=U(),a=U();!function(e,t){var n,i=U();for(n=0;n<16;++n)i[n]=t[n];for(n=253;n>=0;--n)F(i,i),2!==n&&4!==n&&L(i,i,t);for(n=0;n<16;++n)e[n]=i[n]}(a,t[2]),L(n,t[0],a),L(i,t[1],a),I(e,i),e[31]^=D(n)<<7}function I(e,t){var n,i,a,r=U(),o=U();for(n=0;n<16;++n)o[n]=t[n];for(R(o),R(o),R(o),i=0;i<2;++i){for(r[0]=o[0]-65517,n=1;n<15;++n)r[n]=o[n]-65535-(r[n-1]>>16&1),r[n-1]&=65535;r[15]=o[15]-32767-(r[14]>>16&1),a=r[15]>>16&1,r[14]&=65535,O(o,r,1-a)}for(n=0;n<16;n++)e[2*n]=255&o[n],e[2*n+1]=o[n]>>8}function _(e,t){var n=new l(32),i=new l(32);return I(n,e),I(i,t),A(n,0,i,0)}function A(e,t,n,i){return function(e,t,n,i){var a,r=0;for(a=0;a<32;++a)r|=e[t+a]^n[i+a];return(1&r-1>>>8)-1}(e,t,n,i)}function D(e){var t=new l(32);return I(t,e),1&t[0]}function k(e,t,n){var i,a;for(B(e[0],p),B(e[1],f),B(e[2],f),B(e[3],p),a=255;a>=0;--a)T(e,t,i=n[a/8|0]>>(7&a)&1),C(t,e),C(e,e),T(e,t,i)}function P(e,t){var n=[U(),U(),U(),U()];B(n[0],m),B(n[1],v),B(n[2],f),L(n[3],m,v),k(e,n,t)}function B(e,t){var n;for(n=0;n<16;n++)e[n]=0|t[n]}function R(e){var t,n,i=1;for(t=0;t<16;++t)n=e[t]+i+65535,i=Math.floor(n/65536),e[t]=n-65536*i;e[0]+=i-1+37*(i-1)}function O(e,t,n){for(var i,a=~(n-1),r=0;r<16;++r)i=a&(e[r]^t[r]),e[r]^=i,t[r]^=i}function U(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;++t)n[t]=e[t];return n}function N(e,t,n){for(var i=0;i<16;++i)e[i]=t[i]+n[i]}function M(e,t,n){for(var i=0;i<16;++i)e[i]=t[i]-n[i]}function F(e,t){L(e,t,t)}function L(e,t,n){var i,a,r=0,o=0,s=0,c=0,l=0,u=0,d=0,p=0,f=0,g=0,h=0,m=0,v=0,y=0,b=0,w=0,S=0,x=0,C=0,T=0,E=0,I=0,_=0,A=0,D=0,k=0,P=0,B=0,R=0,O=0,U=0,N=n[0],M=n[1],F=n[2],L=n[3],j=n[4],V=n[5],K=n[6],q=n[7],z=n[8],W=n[9],H=n[10],G=n[11],$=n[12],Q=n[13],Y=n[14],X=n[15];r+=(i=t[0])*N,o+=i*M,s+=i*F,c+=i*L,l+=i*j,u+=i*V,d+=i*K,p+=i*q,f+=i*z,g+=i*W,h+=i*H,m+=i*G,v+=i*$,y+=i*Q,b+=i*Y,w+=i*X,o+=(i=t[1])*N,s+=i*M,c+=i*F,l+=i*L,u+=i*j,d+=i*V,p+=i*K,f+=i*q,g+=i*z,h+=i*W,m+=i*H,v+=i*G,y+=i*$,b+=i*Q,w+=i*Y,S+=i*X,s+=(i=t[2])*N,c+=i*M,l+=i*F,u+=i*L,d+=i*j,p+=i*V,f+=i*K,g+=i*q,h+=i*z,m+=i*W,v+=i*H,y+=i*G,b+=i*$,w+=i*Q,S+=i*Y,x+=i*X,c+=(i=t[3])*N,l+=i*M,u+=i*F,d+=i*L,p+=i*j,f+=i*V,g+=i*K,h+=i*q,m+=i*z,v+=i*W,y+=i*H,b+=i*G,w+=i*$,S+=i*Q,x+=i*Y,C+=i*X,l+=(i=t[4])*N,u+=i*M,d+=i*F,p+=i*L,f+=i*j,g+=i*V,h+=i*K,m+=i*q,v+=i*z,y+=i*W,b+=i*H,w+=i*G,S+=i*$,x+=i*Q,C+=i*Y,T+=i*X,u+=(i=t[5])*N,d+=i*M,p+=i*F,f+=i*L,g+=i*j,h+=i*V,m+=i*K,v+=i*q,y+=i*z,b+=i*W,w+=i*H,S+=i*G,x+=i*$,C+=i*Q,T+=i*Y,E+=i*X,d+=(i=t[6])*N,p+=i*M,f+=i*F,g+=i*L,h+=i*j,m+=i*V,v+=i*K,y+=i*q,b+=i*z,w+=i*W,S+=i*H,x+=i*G,C+=i*$,T+=i*Q,E+=i*Y,I+=i*X,p+=(i=t[7])*N,f+=i*M,g+=i*F,h+=i*L,m+=i*j,v+=i*V,y+=i*K,b+=i*q,w+=i*z,S+=i*W,x+=i*H,C+=i*G,T+=i*$,E+=i*Q,I+=i*Y,_+=i*X,f+=(i=t[8])*N,g+=i*M,h+=i*F,m+=i*L,v+=i*j,y+=i*V,b+=i*K,w+=i*q,S+=i*z,x+=i*W,C+=i*H,T+=i*G,E+=i*$,I+=i*Q,_+=i*Y,A+=i*X,g+=(i=t[9])*N,h+=i*M,m+=i*F,v+=i*L,y+=i*j,b+=i*V,w+=i*K,S+=i*q,x+=i*z,C+=i*W,T+=i*H,E+=i*G,I+=i*$,_+=i*Q,A+=i*Y,D+=i*X,h+=(i=t[10])*N,m+=i*M,v+=i*F,y+=i*L,b+=i*j,w+=i*V,S+=i*K,x+=i*q,C+=i*z,T+=i*W,E+=i*H,I+=i*G,_+=i*$,A+=i*Q,D+=i*Y,k+=i*X,m+=(i=t[11])*N,v+=i*M,y+=i*F,b+=i*L,w+=i*j,S+=i*V,x+=i*K,C+=i*q,T+=i*z,E+=i*W,I+=i*H,_+=i*G,A+=i*$,D+=i*Q,k+=i*Y,P+=i*X,v+=(i=t[12])*N,y+=i*M,b+=i*F,w+=i*L,S+=i*j,x+=i*V,C+=i*K,T+=i*q,E+=i*z,I+=i*W,_+=i*H,A+=i*G,D+=i*$,k+=i*Q,P+=i*Y,B+=i*X,y+=(i=t[13])*N,b+=i*M,w+=i*F,S+=i*L,x+=i*j,C+=i*V,T+=i*K,E+=i*q,I+=i*z,_+=i*W,A+=i*H,D+=i*G,k+=i*$,P+=i*Q,B+=i*Y,R+=i*X,b+=(i=t[14])*N,w+=i*M,S+=i*F,x+=i*L,C+=i*j,T+=i*V,E+=i*K,I+=i*q,_+=i*z,A+=i*W,D+=i*H,k+=i*G,P+=i*$,B+=i*Q,R+=i*Y,O+=i*X,w+=(i=t[15])*N,o+=38*(x+=i*F),s+=38*(C+=i*L),c+=38*(T+=i*j),l+=38*(E+=i*V),u+=38*(I+=i*K),d+=38*(_+=i*q),p+=38*(A+=i*z),f+=38*(D+=i*W),g+=38*(k+=i*H),h+=38*(P+=i*G),m+=38*(B+=i*$),v+=38*(R+=i*Q),y+=38*(O+=i*Y),b+=38*(U+=i*X),r=(i=(r+=38*(S+=i*M))+(a=1)+65535)-65536*(a=Math.floor(i/65536)),o=(i=o+a+65535)-65536*(a=Math.floor(i/65536)),s=(i=s+a+65535)-65536*(a=Math.floor(i/65536)),c=(i=c+a+65535)-65536*(a=Math.floor(i/65536)),l=(i=l+a+65535)-65536*(a=Math.floor(i/65536)),u=(i=u+a+65535)-65536*(a=Math.floor(i/65536)),d=(i=d+a+65535)-65536*(a=Math.floor(i/65536)),p=(i=p+a+65535)-65536*(a=Math.floor(i/65536)),f=(i=f+a+65535)-65536*(a=Math.floor(i/65536)),g=(i=g+a+65535)-65536*(a=Math.floor(i/65536)),h=(i=h+a+65535)-65536*(a=Math.floor(i/65536)),m=(i=m+a+65535)-65536*(a=Math.floor(i/65536)),v=(i=v+a+65535)-65536*(a=Math.floor(i/65536)),y=(i=y+a+65535)-65536*(a=Math.floor(i/65536)),b=(i=b+a+65535)-65536*(a=Math.floor(i/65536)),w=(i=w+a+65535)-65536*(a=Math.floor(i/65536)),r=(i=(r+=a-1+37*(a-1))+(a=1)+65535)-65536*(a=Math.floor(i/65536)),o=(i=o+a+65535)-65536*(a=Math.floor(i/65536)),s=(i=s+a+65535)-65536*(a=Math.floor(i/65536)),c=(i=c+a+65535)-65536*(a=Math.floor(i/65536)),l=(i=l+a+65535)-65536*(a=Math.floor(i/65536)),u=(i=u+a+65535)-65536*(a=Math.floor(i/65536)),d=(i=d+a+65535)-65536*(a=Math.floor(i/65536)),p=(i=p+a+65535)-65536*(a=Math.floor(i/65536)),f=(i=f+a+65535)-65536*(a=Math.floor(i/65536)),g=(i=g+a+65535)-65536*(a=Math.floor(i/65536)),h=(i=h+a+65535)-65536*(a=Math.floor(i/65536)),m=(i=m+a+65535)-65536*(a=Math.floor(i/65536)),v=(i=v+a+65535)-65536*(a=Math.floor(i/65536)),y=(i=y+a+65535)-65536*(a=Math.floor(i/65536)),b=(i=b+a+65535)-65536*(a=Math.floor(i/65536)),w=(i=w+a+65535)-65536*(a=Math.floor(i/65536)),r+=a-1+37*(a-1),e[0]=r,e[1]=o,e[2]=s,e[3]=c,e[4]=l,e[5]=u,e[6]=d,e[7]=p,e[8]=f,e[9]=g,e[10]=h,e[11]=m,e[12]=v,e[13]=y,e[14]=b,e[15]=w}},276:e=>{e.exports={options:{usePureJavaScript:!1}}},1696:(e,t,n)=>{var i=n(276);n(8106),n(7619),(e.exports=i.hmac=i.hmac||{}).create=function(){var e=null,t=null,n=null,a=null,r={start:function(r,o){if(null!==r)if("string"==typeof r){if(!((r=r.toLowerCase())in i.md.algorithms))throw new Error('Unknown hash algorithm "'+r+'"');t=i.md.algorithms[r].create()}else t=r;if(null===o)o=e;else{if("string"==typeof o)o=i.util.createBuffer(o);else if(i.util.isArray(o)){var s=o;o=i.util.createBuffer();for(var c=0;c<s.length;++c)o.putByte(s[c])}var l=o.length();for(l>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),n=i.util.createBuffer(),a=i.util.createBuffer(),l=o.length(),c=0;c<l;++c)s=o.at(c),n.putByte(54^s),a.putByte(92^s);if(l<t.blockLength)for(s=t.blockLength-l,c=0;c<s;++c)n.putByte(54),a.putByte(92);e=o,n=n.bytes(),a=a.bytes()}t.start(),t.update(n)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(a),t.update(e),t.digest()}};return r.digest=r.getMac,r}},9547:(e,t,n)=>{e.exports=n(276),n(9504),n(8678),n(2746),n(3900),n(9095),n(2926),n(1696),n(3432),n(2045),n(1355),n(5250),n(3254),n(2385),n(7501),n(5071),n(9343),n(9255),n(268),n(3878),n(1417),n(9356),n(5124),n(149),n(3986),n(7619)},3736:(e,t,n)=>{var i,a=n(276);function r(e,t,n){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function o(){return new r(null)}function s(e,t,n,i,a,r){for(var o=16383&t,s=t>>14;--r>=0;){var c=16383&this.data[e],l=this.data[e++]>>14,u=s*c+l*o;a=((c=o*c+((16383&u)<<14)+n.data[i]+a)>>28)+(u>>14)+s*l,n.data[i++]=268435455&c}return a}e.exports=a.jsbn=a.jsbn||{},a.jsbn.BigInteger=r,"undefined"==typeof navigator?(r.prototype.am=s,i=28):"Microsoft Internet Explorer"==navigator.appName?(r.prototype.am=function(e,t,n,i,a,r){for(var o=32767&t,s=t>>15;--r>=0;){var c=32767&this.data[e],l=this.data[e++]>>15,u=s*c+l*o;a=((c=o*c+((32767&u)<<15)+n.data[i]+(1073741823&a))>>>30)+(u>>>15)+s*l+(a>>>30),n.data[i++]=1073741823&c}return a},i=30):"Netscape"!=navigator.appName?(r.prototype.am=function(e,t,n,i,a,r){for(;--r>=0;){var o=t*this.data[e++]+n.data[i]+a;a=Math.floor(o/67108864),n.data[i++]=67108863&o}return a},i=26):(r.prototype.am=s,i=28),r.prototype.DB=i,r.prototype.DM=(1<<i)-1,r.prototype.DV=1<<i,r.prototype.FV=Math.pow(2,52),r.prototype.F1=52-i,r.prototype.F2=2*i-52;var c,l,u=new Array;for(c="0".charCodeAt(0),l=0;l<=9;++l)u[c++]=l;for(c="a".charCodeAt(0),l=10;l<36;++l)u[c++]=l;for(c="A".charCodeAt(0),l=10;l<36;++l)u[c++]=l;function d(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function p(e,t){var n=u[e.charCodeAt(t)];return null==n?-1:n}function f(e){var t=o();return t.fromInt(e),t}function g(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function h(e){this.m=e}function m(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function v(e,t){return e&t}function y(e,t){return e|t}function b(e,t){return e^t}function w(e,t){return e&~t}function S(e){if(0==e)return-1;var t=0;return 65535&e||(e>>=16,t+=16),255&e||(e>>=8,t+=8),15&e||(e>>=4,t+=4),3&e||(e>>=2,t+=2),1&e||++t,t}function x(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function C(){}function T(e){return e}function E(e){this.r2=o(),this.q3=o(),r.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}h.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},h.prototype.revert=function(e){return e},h.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},h.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},h.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},m.prototype.convert=function(e){var t=o();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(r.ZERO)>0&&this.m.subTo(t,t),t},m.prototype.revert=function(e){var t=o();return e.copyTo(t),this.reduce(t),t},m.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e.data[t],i=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e.data[n]+=this.m.am(0,i,e,t,0,this.m.t);e.data[n]>=e.DV;)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},m.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},m.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},r.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},r.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},r.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var i=e.length,a=!1,o=0;--i>=0;){var s=8==n?255&e[i]:p(e,i);s<0?"-"==e.charAt(i)&&(a=!0):(a=!1,0==o?this.data[this.t++]=s:o+n>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&128&e[0]&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&r.ZERO.subTo(this,this)},r.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},r.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t.data[n+e]=this.data[n];for(n=e-1;n>=0;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s},r.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=Math.max(this.t-e,0),t.s=this.s},r.prototype.lShiftTo=function(e,t){var n,i=e%this.DB,a=this.DB-i,r=(1<<a)-1,o=Math.floor(e/this.DB),s=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t.data[n+o+1]=this.data[n]>>a|s,s=(this.data[n]&r)<<i;for(n=o-1;n>=0;--n)t.data[n]=0;t.data[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},r.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var i=e%this.DB,a=this.DB-i,r=(1<<i)-1;t.data[0]=this.data[n]>>i;for(var o=n+1;o<this.t;++o)t.data[o-n-1]|=(this.data[o]&r)<<a,t.data[o-n]=this.data[o]>>i;i>0&&(t.data[this.t-n-1]|=(this.s&r)<<a),t.t=this.t-n,t.clamp()}},r.prototype.subTo=function(e,t){for(var n=0,i=0,a=Math.min(e.t,this.t);n<a;)i+=this.data[n]-e.data[n],t.data[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this.data[n],t.data[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e.data[n],t.data[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t.data[n++]=this.DV+i:i>0&&(t.data[n++]=i),t.t=n,t.clamp()},r.prototype.multiplyTo=function(e,t){var n=this.abs(),i=e.abs(),a=n.t;for(t.t=a+i.t;--a>=0;)t.data[a]=0;for(a=0;a<i.t;++a)t.data[a+n.t]=n.am(0,i.data[a],t,a,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&r.ZERO.subTo(t,t)},r.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e.data[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()},r.prototype.divRemTo=function(e,t,n){var i=e.abs();if(!(i.t<=0)){var a=this.abs();if(a.t<i.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=o());var s=o(),c=this.s,l=e.s,u=this.DB-g(i.data[i.t-1]);u>0?(i.lShiftTo(u,s),a.lShiftTo(u,n)):(i.copyTo(s),a.copyTo(n));var d=s.t,p=s.data[d-1];if(0!=p){var f=p*(1<<this.F1)+(d>1?s.data[d-2]>>this.F2:0),h=this.FV/f,m=(1<<this.F1)/f,v=1<<this.F2,y=n.t,b=y-d,w=null==t?o():t;for(s.dlShiftTo(b,w),n.compareTo(w)>=0&&(n.data[n.t++]=1,n.subTo(w,n)),r.ONE.dlShiftTo(d,w),w.subTo(s,s);s.t<d;)s.data[s.t++]=0;for(;--b>=0;){var S=n.data[--y]==p?this.DM:Math.floor(n.data[y]*h+(n.data[y-1]+v)*m);if((n.data[y]+=s.am(0,S,n,b,0,d))<S)for(s.dlShiftTo(b,w),n.subTo(w,n);n.data[y]<--S;)n.subTo(w,n)}null!=t&&(n.drShiftTo(d,t),c!=l&&r.ZERO.subTo(t,t)),n.t=d,n.clamp(),u>0&&n.rShiftTo(u,n),c<0&&r.ZERO.subTo(n,n)}}},r.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(!(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},r.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},r.prototype.exp=function(e,t){if(e>4294967295||e<1)return r.ONE;var n=o(),i=o(),a=t.convert(this),s=g(e)-1;for(a.copyTo(n);--s>=0;)if(t.sqrTo(n,i),(e&1<<s)>0)t.mulTo(i,a,n);else{var c=n;n=i,i=c}return t.revert(n)},r.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,i=(1<<t)-1,a=!1,r="",o=this.t,s=this.DB-o*this.DB%t;if(o-- >0)for(s<this.DB&&(n=this.data[o]>>s)>0&&(a=!0,r=d(n));o>=0;)s<t?(n=(this.data[o]&(1<<s)-1)<<t-s,n|=this.data[--o]>>(s+=this.DB-t)):(n=this.data[o]>>(s-=t)&i,s<=0&&(s+=this.DB,--o)),n>0&&(a=!0),a&&(r+=d(n));return a?r:"0"},r.prototype.negate=function(){var e=o();return r.ZERO.subTo(this,e),e},r.prototype.abs=function(){return this.s<0?this.negate():this},r.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this.data[n]-e.data[n]))return t;return 0},r.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+g(this.data[this.t-1]^this.s&this.DM)},r.prototype.mod=function(e){var t=o();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(r.ZERO)>0&&e.subTo(t,t),t},r.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new h(t):new m(t),this.exp(e,n)},r.ZERO=f(0),r.ONE=f(1),C.prototype.convert=T,C.prototype.revert=T,C.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},C.prototype.sqrTo=function(e,t){e.squareTo(t)},E.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=o();return e.copyTo(t),this.reduce(t),t},E.prototype.revert=function(e){return e},E.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},E.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},E.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],_=(1<<26)/I[I.length-1];r.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},r.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),i=f(n),a=o(),r=o(),s="";for(this.divRemTo(i,a,r);a.signum()>0;)s=(n+r.intValue()).toString(e).substr(1)+s,a.divRemTo(i,a,r);return r.intValue().toString(e)+s},r.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),i=Math.pow(t,n),a=!1,o=0,s=0,c=0;c<e.length;++c){var l=p(e,c);l<0?"-"==e.charAt(c)&&0==this.signum()&&(a=!0):(s=t*s+l,++o>=n&&(this.dMultiply(i),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),a&&r.ZERO.subTo(this,this)},r.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(r.ONE.shiftLeft(e-1),y,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(r.ONE.shiftLeft(e-1),this);else{var i=new Array,a=7&e;i.length=1+(e>>3),t.nextBytes(i),a>0?i[0]&=(1<<a)-1:i[0]=0,this.fromString(i,256)}},r.prototype.bitwiseTo=function(e,t,n){var i,a,r=Math.min(e.t,this.t);for(i=0;i<r;++i)n.data[i]=t(this.data[i],e.data[i]);if(e.t<this.t){for(a=e.s&this.DM,i=r;i<this.t;++i)n.data[i]=t(this.data[i],a);n.t=this.t}else{for(a=this.s&this.DM,i=r;i<e.t;++i)n.data[i]=t(a,e.data[i]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},r.prototype.changeBit=function(e,t){var n=r.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},r.prototype.addTo=function(e,t){for(var n=0,i=0,a=Math.min(e.t,this.t);n<a;)i+=this.data[n]+e.data[n],t.data[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this.data[n],t.data[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e.data[n],t.data[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t.data[n++]=i:i<-1&&(t.data[n++]=this.DV+i),t.t=n,t.clamp()},r.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},r.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},r.prototype.multiplyLowerTo=function(e,t,n){var i,a=Math.min(this.t+e.t,t);for(n.s=0,n.t=a;a>0;)n.data[--a]=0;for(i=n.t-this.t;a<i;++a)n.data[a+this.t]=this.am(0,e.data[a],n,a,0,this.t);for(i=Math.min(e.t,t);a<i;++a)this.am(0,e.data[a],n,a,0,t-a);n.clamp()},r.prototype.multiplyUpperTo=function(e,t,n){--t;var i=n.t=this.t+e.t-t;for(n.s=0;--i>=0;)n.data[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)n.data[this.t+i-t]=this.am(t-i,e.data[i],n,0,0,this.t+i-t);n.clamp(),n.drShiftTo(1,n)},r.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this.data[0]%e;else for(var i=this.t-1;i>=0;--i)n=(t*n+this.data[i])%e;return n},r.prototype.millerRabin=function(e){var t=this.subtract(r.ONE),n=t.getLowestSetBit();if(n<=0)return!1;for(var i,a=t.shiftRight(n),o={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},s=0;s<e;++s){do{i=new r(this.bitLength(),o)}while(i.compareTo(r.ONE)<=0||i.compareTo(t)>=0);var c=i.modPow(a,this);if(0!=c.compareTo(r.ONE)&&0!=c.compareTo(t)){for(var l=1;l++<n&&0!=c.compareTo(t);)if(0==(c=c.modPowInt(2,this)).compareTo(r.ONE))return!1;if(0!=c.compareTo(t))return!1}}return!0},r.prototype.clone=function(){var e=o();return this.copyTo(e),e},r.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},r.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},r.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},r.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},r.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,i=this.DB-e*this.DB%8,a=0;if(e-- >0)for(i<this.DB&&(n=this.data[e]>>i)!=(this.s&this.DM)>>i&&(t[a++]=n|this.s<<this.DB-i);e>=0;)i<8?(n=(this.data[e]&(1<<i)-1)<<8-i,n|=this.data[--e]>>(i+=this.DB-8)):(n=this.data[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),128&n&&(n|=-256),0==a&&(128&this.s)!=(128&n)&&++a,(a>0||n!=this.s)&&(t[a++]=n);return t},r.prototype.equals=function(e){return 0==this.compareTo(e)},r.prototype.min=function(e){return this.compareTo(e)<0?this:e},r.prototype.max=function(e){return this.compareTo(e)>0?this:e},r.prototype.and=function(e){var t=o();return this.bitwiseTo(e,v,t),t},r.prototype.or=function(e){var t=o();return this.bitwiseTo(e,y,t),t},r.prototype.xor=function(e){var t=o();return this.bitwiseTo(e,b,t),t},r.prototype.andNot=function(e){var t=o();return this.bitwiseTo(e,w,t),t},r.prototype.not=function(){for(var e=o(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},r.prototype.shiftLeft=function(e){var t=o();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},r.prototype.shiftRight=function(e){var t=o();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},r.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+S(this.data[e]);return this.s<0?this.t*this.DB:-1},r.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=x(this.data[n]^t);return e},r.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:!!(this.data[t]&1<<e%this.DB)},r.prototype.setBit=function(e){return this.changeBit(e,y)},r.prototype.clearBit=function(e){return this.changeBit(e,w)},r.prototype.flipBit=function(e){return this.changeBit(e,b)},r.prototype.add=function(e){var t=o();return this.addTo(e,t),t},r.prototype.subtract=function(e){var t=o();return this.subTo(e,t),t},r.prototype.multiply=function(e){var t=o();return this.multiplyTo(e,t),t},r.prototype.divide=function(e){var t=o();return this.divRemTo(e,t,null),t},r.prototype.remainder=function(e){var t=o();return this.divRemTo(e,null,t),t},r.prototype.divideAndRemainder=function(e){var t=o(),n=o();return this.divRemTo(e,t,n),new Array(t,n)},r.prototype.modPow=function(e,t){var n,i,a=e.bitLength(),r=f(1);if(a<=0)return r;n=a<18?1:a<48?3:a<144?4:a<768?5:6,i=a<8?new h(t):t.isEven()?new E(t):new m(t);var s=new Array,c=3,l=n-1,u=(1<<n)-1;if(s[1]=i.convert(this),n>1){var d=o();for(i.sqrTo(s[1],d);c<=u;)s[c]=o(),i.mulTo(d,s[c-2],s[c]),c+=2}var p,v,y=e.t-1,b=!0,w=o();for(a=g(e.data[y])-1;y>=0;){for(a>=l?p=e.data[y]>>a-l&u:(p=(e.data[y]&(1<<a+1)-1)<<l-a,y>0&&(p|=e.data[y-1]>>this.DB+a-l)),c=n;!(1&p);)p>>=1,--c;if((a-=c)<0&&(a+=this.DB,--y),b)s[p].copyTo(r),b=!1;else{for(;c>1;)i.sqrTo(r,w),i.sqrTo(w,r),c-=2;c>0?i.sqrTo(r,w):(v=r,r=w,w=v),i.mulTo(w,s[p],r)}for(;y>=0&&!(e.data[y]&1<<a);)i.sqrTo(r,w),v=r,r=w,w=v,--a<0&&(a=this.DB-1,--y)}return i.revert(r)},r.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return r.ZERO;for(var n=e.clone(),i=this.clone(),a=f(1),o=f(0),s=f(0),c=f(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(a.isEven()&&o.isEven()||(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),t?(s.isEven()&&c.isEven()||(s.addTo(this,s),c.subTo(e,c)),s.rShiftTo(1,s)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);n.compareTo(i)>=0?(n.subTo(i,n),t&&a.subTo(s,a),o.subTo(c,o)):(i.subTo(n,i),t&&s.subTo(a,s),c.subTo(o,c))}return 0!=i.compareTo(r.ONE)?r.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},r.prototype.pow=function(e){return this.exp(e,new C)},r.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var i=t;t=n,n=i}var a=t.getLowestSetBit(),r=n.getLowestSetBit();if(r<0)return t;for(a<r&&(r=a),r>0&&(t.rShiftTo(r,t),n.rShiftTo(r,n));t.signum()>0;)(a=t.getLowestSetBit())>0&&t.rShiftTo(a,t),(a=n.getLowestSetBit())>0&&n.rShiftTo(a,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return r>0&&n.lShiftTo(r,n),n},r.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n.data[0]<=I[I.length-1]){for(t=0;t<I.length;++t)if(n.data[0]==I[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<I.length;){for(var i=I[t],a=t+1;a<I.length&&i<_;)i*=I[a++];for(i=n.modInt(i);t<a;)if(i%I[t++]==0)return!1}return n.millerRabin(e)}},3432:(e,t,n)=>{var i=n(276);n(7619),n(9356),n(3736),e.exports=i.kem=i.kem||{};var a=i.jsbn.BigInteger;function r(e,t,n,a){e.generate=function(e,r){for(var o=new i.util.ByteBuffer,s=Math.ceil(r/a)+n,c=new i.util.ByteBuffer,l=n;l<s;++l){c.putInt32(l),t.start(),t.update(e+c.getBytes());var u=t.digest();o.putBytes(u.getBytes(a))}return o.truncate(o.length()-r),o.getBytes()}}i.kem.rsa={},i.kem.rsa.create=function(e,t){var n=(t=t||{}).prng||i.random;return{encrypt:function(t,r){var o,s=Math.ceil(t.n.bitLength()/8);do{o=new a(i.util.bytesToHex(n.getBytesSync(s)),16).mod(t.n)}while(o.compareTo(a.ONE)<=0);var c=s-(o=i.util.hexToBytes(o.toString(16))).length;return c>0&&(o=i.util.fillString(String.fromCharCode(0),c)+o),{encapsulation:t.encrypt(o,"NONE"),key:e.generate(o,r)}},decrypt:function(t,n,i){var a=t.decrypt(n,"NONE");return e.generate(a,i)}}},i.kem.kdf1=function(e,t){r(this,e,0,t||e.digestLength)},i.kem.kdf2=function(e,t){r(this,e,1,t||e.digestLength)}},2045:(e,t,n)=>{var i=n(276);n(7619),e.exports=i.log=i.log||{},i.log.levels=["none","error","warning","info","debug","verbose","max"];var a={},r=[],o=null;i.log.LEVEL_LOCKED=2,i.log.NO_LEVEL_CHECK=4,i.log.INTERPOLATE=8;for(var s=0;s<i.log.levels.length;++s){var c=i.log.levels[s];a[c]={index:s,name:c.toUpperCase()}}i.log.logMessage=function(e){for(var t=a[e.level].index,n=0;n<r.length;++n){var o=r[n];o.flags&i.log.NO_LEVEL_CHECK?o.f(e):t<=a[o.level].index&&o.f(o,e)}},i.log.prepareStandard=function(e){"standard"in e||(e.standard=a[e.level].name+" ["+e.category+"] "+e.message)},i.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]||0),e.full=i.util.format.apply(this,t)}},i.log.prepareStandardFull=function(e){"standardFull"in e||(i.log.prepareStandard(e),e.standardFull=e.standard)};var l=["error","warning","info","debug","verbose"];for(s=0;s<l.length;++s)!function(e){i.log[e]=function(t,n){var a=Array.prototype.slice.call(arguments).slice(2),r={timestamp:new Date,level:e,category:t,message:n,arguments:a};i.log.logMessage(r)}}(l[s]);if(i.log.makeLogger=function(e){var t={flags:0,f:e};return i.log.setLevel(t,"none"),t},i.log.setLevel=function(e,t){var n=!1;if(e&&!(e.flags&i.log.LEVEL_LOCKED))for(var a=0;a<i.log.levels.length;++a)if(t==i.log.levels[a]){e.level=t,n=!0;break}return n},i.log.lock=function(e,t){void 0===t||t?e.flags|=i.log.LEVEL_LOCKED:e.flags&=~i.log.LEVEL_LOCKED},i.log.addLogger=function(e){r.push(e)},"undefined"!=typeof console&&"log"in console){var u;if(console.error&&console.warn&&console.info&&console.debug){var d={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},p=function(e,t){i.log.prepareStandard(t);var n=d[t.level],a=[t.standard];a=a.concat(t.arguments.slice()),n.apply(console,a)};u=i.log.makeLogger(p)}else p=function(e,t){i.log.prepareStandardFull(t),console.log(t.standardFull)},u=i.log.makeLogger(p);i.log.setLevel(u,"debug"),i.log.addLogger(u),o=u}else console={log:function(){}};if(null!==o&&"undefined"!=typeof window&&window.location){var f=new URL(window.location.href).searchParams;f.has("console.level")&&i.log.setLevel(o,f.get("console.level").slice(-1)[0]),f.has("console.lock")&&"true"==f.get("console.lock").slice(-1)[0]&&i.log.lock(o)}i.log.consoleLogger=o},1355:(e,t,n)=>{e.exports=n(8106),n(1267),n(1598),n(172),n(2313)},8106:(e,t,n)=>{var i=n(276);e.exports=i.md=i.md||{},i.md.algorithms=i.md.algorithms||{}},1267:(e,t,n)=>{var i=n(276);n(8106),n(7619);var a=e.exports=i.md5=i.md5||{};i.md.md5=i.md.algorithms.md5=a,a.create=function(){l||function(){r=String.fromCharCode(128),r+=i.util.fillString(String.fromCharCode(0),64),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],s=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],c=new Array(64);for(var e=0;e<64;++e)c[e]=Math.floor(4294967296*Math.abs(Math.sin(e+1)));l=!0}();var e=null,t=i.util.createBuffer(),n=new Array(16),a={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var n=a.messageLengthSize/4,r=0;r<n;++r)a.fullMessageLength.push(0);return t=i.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},a}};return a.start(),a.update=function(r,o){"utf8"===o&&(r=i.util.encodeUtf8(r));var s=r.length;a.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var c=a.fullMessageLength.length-1;c>=0;--c)a.fullMessageLength[c]+=s[1],s[1]=s[0]+(a.fullMessageLength[c]/4294967296>>>0),a.fullMessageLength[c]=a.fullMessageLength[c]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(r),u(e,n,t),(t.read>2048||0===t.length())&&t.compact(),a},a.digest=function(){var o=i.util.createBuffer();o.putBytes(t.bytes());var s=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize&a.blockLength-1;o.putBytes(r.substr(0,a.blockLength-s));for(var c,l=0,d=a.fullMessageLength.length-1;d>=0;--d)l=(c=8*a.fullMessageLength[d]+l)/4294967296>>>0,o.putInt32Le(c>>>0);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};u(p,n,o);var f=i.util.createBuffer();return f.putInt32Le(p.h0),f.putInt32Le(p.h1),f.putInt32Le(p.h2),f.putInt32Le(p.h3),f},a};var r=null,o=null,s=null,c=null,l=!1;function u(e,t,n){for(var i,a,r,l,u,d,p,f=n.length();f>=64;){for(a=e.h0,r=e.h1,l=e.h2,u=e.h3,p=0;p<16;++p)t[p]=n.getInt32Le(),i=a+(u^r&(l^u))+c[p]+t[p],a=u,u=l,l=r,r+=i<<(d=s[p])|i>>>32-d;for(;p<32;++p)i=a+(l^u&(r^l))+c[p]+t[o[p]],a=u,u=l,l=r,r+=i<<(d=s[p])|i>>>32-d;for(;p<48;++p)i=a+(r^l^u)+c[p]+t[o[p]],a=u,u=l,l=r,r+=i<<(d=s[p])|i>>>32-d;for(;p<64;++p)i=a+(l^(r|~u))+c[p]+t[o[p]],a=u,u=l,l=r,r+=i<<(d=s[p])|i>>>32-d;e.h0=e.h0+a|0,e.h1=e.h1+r|0,e.h2=e.h2+l|0,e.h3=e.h3+u|0,f-=64}}},1373:(e,t,n)=>{var i=n(276);n(5250),e.exports=i.mgf=i.mgf||{},i.mgf.mgf1=i.mgf1},5250:(e,t,n)=>{var i=n(276);n(7619),i.mgf=i.mgf||{},(e.exports=i.mgf.mgf1=i.mgf1=i.mgf1||{}).create=function(e){return{generate:function(t,n){for(var a=new i.util.ByteBuffer,r=Math.ceil(n/e.digestLength),o=0;o<r;o++){var s=new i.util.ByteBuffer;s.putInt32(o),e.start(),e.update(t+s.getBytes()),a.putBuffer(e.digest())}return a.truncate(a.length()-n),a.getBytes()}}}},6418:(e,t,n)=>{var i=n(276);i.pki=i.pki||{};var a=e.exports=i.pki.oids=i.oids=i.oids||{};function r(e,t){a[e]=t,a[t]=e}function o(e,t){a[e]=t}r("1.2.840.113549.1.1.1","rsaEncryption"),r("1.2.840.113549.1.1.4","md5WithRSAEncryption"),r("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),r("1.2.840.113549.1.1.7","RSAES-OAEP"),r("1.2.840.113549.1.1.8","mgf1"),r("1.2.840.113549.1.1.9","pSpecified"),r("1.2.840.113549.1.1.10","RSASSA-PSS"),r("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),r("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),r("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),r("1.3.101.112","EdDSA25519"),r("1.2.840.10040.4.3","dsa-with-sha1"),r("1.3.14.3.2.7","desCBC"),r("1.3.14.3.2.26","sha1"),r("1.3.14.3.2.29","sha1WithRSASignature"),r("2.16.840.1.101.3.4.2.1","sha256"),r("2.16.840.1.101.3.4.2.2","sha384"),r("2.16.840.1.101.3.4.2.3","sha512"),r("2.16.840.1.101.3.4.2.4","sha224"),r("2.16.840.1.101.3.4.2.5","sha512-224"),r("2.16.840.1.101.3.4.2.6","sha512-256"),r("1.2.840.113549.2.2","md2"),r("1.2.840.113549.2.5","md5"),r("1.2.840.113549.1.7.1","data"),r("1.2.840.113549.1.7.2","signedData"),r("1.2.840.113549.1.7.3","envelopedData"),r("1.2.840.113549.1.7.4","signedAndEnvelopedData"),r("1.2.840.113549.1.7.5","digestedData"),r("1.2.840.113549.1.7.6","encryptedData"),r("1.2.840.113549.1.9.1","emailAddress"),r("1.2.840.113549.1.9.2","unstructuredName"),r("1.2.840.113549.1.9.3","contentType"),r("1.2.840.113549.1.9.4","messageDigest"),r("1.2.840.113549.1.9.5","signingTime"),r("1.2.840.113549.1.9.6","counterSignature"),r("1.2.840.113549.1.9.7","challengePassword"),r("1.2.840.113549.1.9.8","unstructuredAddress"),r("1.2.840.113549.1.9.14","extensionRequest"),r("1.2.840.113549.1.9.20","friendlyName"),r("1.2.840.113549.1.9.21","localKeyId"),r("1.2.840.113549.1.9.22.1","x509Certificate"),r("1.2.840.113549.1.12.10.1.1","keyBag"),r("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),r("1.2.840.113549.1.12.10.1.3","certBag"),r("1.2.840.113549.1.12.10.1.4","crlBag"),r("1.2.840.113549.1.12.10.1.5","secretBag"),r("1.2.840.113549.1.12.10.1.6","safeContentsBag"),r("1.2.840.113549.1.5.13","pkcs5PBES2"),r("1.2.840.113549.1.5.12","pkcs5PBKDF2"),r("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),r("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),r("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),r("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),r("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),r("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),r("1.2.840.113549.2.7","hmacWithSHA1"),r("1.2.840.113549.2.8","hmacWithSHA224"),r("1.2.840.113549.2.9","hmacWithSHA256"),r("1.2.840.113549.2.10","hmacWithSHA384"),r("1.2.840.113549.2.11","hmacWithSHA512"),r("1.2.840.113549.3.7","des-EDE3-CBC"),r("2.16.840.1.101.3.4.1.2","aes128-CBC"),r("2.16.840.1.101.3.4.1.22","aes192-CBC"),r("2.16.840.1.101.3.4.1.42","aes256-CBC"),r("2.5.4.3","commonName"),r("2.5.4.4","surname"),r("2.5.4.5","serialNumber"),r("2.5.4.6","countryName"),r("2.5.4.7","localityName"),r("2.5.4.8","stateOrProvinceName"),r("2.5.4.9","streetAddress"),r("2.5.4.10","organizationName"),r("2.5.4.11","organizationalUnitName"),r("2.5.4.12","title"),r("2.5.4.13","description"),r("2.5.4.15","businessCategory"),r("2.5.4.17","postalCode"),r("2.5.4.42","givenName"),r("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),r("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),r("2.16.840.1.113730.1.1","nsCertType"),r("2.16.840.1.113730.1.13","nsComment"),o("2.5.29.1","authorityKeyIdentifier"),o("2.5.29.2","keyAttributes"),o("2.5.29.3","certificatePolicies"),o("2.5.29.4","keyUsageRestriction"),o("2.5.29.5","policyMapping"),o("2.5.29.6","subtreesConstraint"),o("2.5.29.7","subjectAltName"),o("2.5.29.8","issuerAltName"),o("2.5.29.9","subjectDirectoryAttributes"),o("2.5.29.10","basicConstraints"),o("2.5.29.11","nameConstraints"),o("2.5.29.12","policyConstraints"),o("2.5.29.13","basicConstraints"),r("2.5.29.14","subjectKeyIdentifier"),r("2.5.29.15","keyUsage"),o("2.5.29.16","privateKeyUsagePeriod"),r("2.5.29.17","subjectAltName"),r("2.5.29.18","issuerAltName"),r("2.5.29.19","basicConstraints"),o("2.5.29.20","cRLNumber"),o("2.5.29.21","cRLReason"),o("2.5.29.22","expirationDate"),o("2.5.29.23","instructionCode"),o("2.5.29.24","invalidityDate"),o("2.5.29.25","cRLDistributionPoints"),o("2.5.29.26","issuingDistributionPoint"),o("2.5.29.27","deltaCRLIndicator"),o("2.5.29.28","issuingDistributionPoint"),o("2.5.29.29","certificateIssuer"),o("2.5.29.30","nameConstraints"),r("2.5.29.31","cRLDistributionPoints"),r("2.5.29.32","certificatePolicies"),o("2.5.29.33","policyMappings"),o("2.5.29.34","policyConstraints"),r("2.5.29.35","authorityKeyIdentifier"),o("2.5.29.36","policyConstraints"),r("2.5.29.37","extKeyUsage"),o("2.5.29.46","freshestCRL"),o("2.5.29.54","inhibitAnyPolicy"),r("1.3.6.1.4.1.11129.2.4.2","timestampList"),r("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),r("1.3.6.1.5.5.7.3.1","serverAuth"),r("1.3.6.1.5.5.7.3.2","clientAuth"),r("1.3.6.1.5.5.7.3.3","codeSigning"),r("1.3.6.1.5.5.7.3.4","emailProtection"),r("1.3.6.1.5.5.7.3.8","timeStamping")},2698:(e,t,n)=>{var i=n(276);if(n(9504),n(2746),n(9095),n(8106),n(6418),n(3254),n(2385),n(9356),n(5124),n(5805),n(7619),void 0===a)var a=i.jsbn.BigInteger;var r=i.asn1,o=i.pki=i.pki||{};e.exports=o.pbe=i.pbe=i.pbe||{};var s=o.oids,c={name:"EncryptedPrivateKeyInfo",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},l={name:"PBES2Algorithms",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},u={name:"pkcs-12PbeParams",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:"iterations"}]};function d(e,t){return e.start().update(t).digest().getBytes()}function p(e){var t;if(e){if(!(t=o.oids[r.derToOid(e)])){var n=new Error("Unsupported PRF OID.");throw n.oid=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}}else t="hmacWithSHA1";return f(t)}function f(e){var t=i.md;switch(e){case"hmacWithSHA224":t=i.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}o.encryptPrivateKeyInfo=function(e,t,n){(n=n||{}).saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var a,c,l,u=i.random.getBytesSync(n.saltSize),d=n.count,p=r.integerToDer(d);if(0===n.algorithm.indexOf("aes")||"des"===n.algorithm){var g,h,m;switch(n.algorithm){case"aes128":a=16,g=16,h=s["aes128-CBC"],m=i.aes.createEncryptionCipher;break;case"aes192":a=24,g=16,h=s["aes192-CBC"],m=i.aes.createEncryptionCipher;break;case"aes256":a=32,g=16,h=s["aes256-CBC"],m=i.aes.createEncryptionCipher;break;case"des":a=8,g=8,h=s.desCBC,m=i.des.createEncryptionCipher;break;default:throw(x=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=n.algorithm,x}var v="hmacWith"+n.prfAlgorithm.toUpperCase(),y=f(v),b=i.pkcs5.pbkdf2(t,u,d,a,y),w=i.random.getBytesSync(g);(C=m(b)).start(w),C.update(r.toDer(e)),C.finish(),l=C.output.getBytes();var S=function(e,t,n,a){var s=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,e),r.create(r.Class.UNIVERSAL,r.Type.INTEGER,!1,t.getBytes())]);return"hmacWithSHA1"!==a&&s.value.push(r.create(r.Class.UNIVERSAL,r.Type.INTEGER,!1,i.util.hexToBytes(n.toString(16))),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(o.oids[a]).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.NULL,!1,"")])),s}(u,p,a,v);c=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(s.pkcs5PBES2).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(s.pkcs5PBKDF2).getBytes()),S]),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(h).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,w)])])])}else{var x;if("3des"!==n.algorithm)throw(x=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=n.algorithm,x;a=24;var C,T=new i.util.ByteBuffer(u);b=o.pbe.generatePkcs12Key(t,T,1,d,a),w=o.pbe.generatePkcs12Key(t,T,2,d,a),(C=i.des.createEncryptionCipher(b)).start(w),C.update(r.toDer(e)),C.finish(),l=C.output.getBytes(),c=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(s["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,u),r.create(r.Class.UNIVERSAL,r.Type.INTEGER,!1,p.getBytes())])])}return r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[c,r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,l)])},o.decryptPrivateKeyInfo=function(e,t){var n=null,a={},s=[];if(!r.validate(e,c,a,s)){var l=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=s,l}var u=r.derToOid(a.encryptionOid),d=o.pbe.getCipher(u,a.encryptionParams,t),p=i.util.createBuffer(a.encryptedData);return d.update(p),d.finish()&&(n=r.fromDer(d.output)),n},o.encryptedPrivateKeyToPem=function(e,t){var n={type:"ENCRYPTED PRIVATE KEY",body:r.toDer(e).getBytes()};return i.pem.encode(n,{maxline:t})},o.encryptedPrivateKeyFromPem=function(e){var t=i.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return r.fromDer(t.body)},o.encryptRsaPrivateKey=function(e,t,n){if(!(n=n||{}).legacy){var a=o.wrapRsaPrivateKey(o.privateKeyToAsn1(e));return a=o.encryptPrivateKeyInfo(a,t,n),o.encryptedPrivateKeyToPem(a)}var s,c,l,u;switch(n.algorithm){case"aes128":s="AES-128-CBC",l=16,c=i.random.getBytesSync(16),u=i.aes.createEncryptionCipher;break;case"aes192":s="AES-192-CBC",l=24,c=i.random.getBytesSync(16),u=i.aes.createEncryptionCipher;break;case"aes256":s="AES-256-CBC",l=32,c=i.random.getBytesSync(16),u=i.aes.createEncryptionCipher;break;case"3des":s="DES-EDE3-CBC",l=24,c=i.random.getBytesSync(8),u=i.des.createEncryptionCipher;break;case"des":s="DES-CBC",l=8,c=i.random.getBytesSync(8),u=i.des.createEncryptionCipher;break;default:var d=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw d.algorithm=n.algorithm,d}var p=u(i.pbe.opensslDeriveBytes(t,c.substr(0,8),l));p.start(c),p.update(r.toDer(o.privateKeyToAsn1(e))),p.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:s,parameters:i.util.bytesToHex(c).toUpperCase()},body:p.output.getBytes()};return i.pem.encode(f)},o.decryptRsaPrivateKey=function(e,t){var n=null,a=i.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==a.type&&"PRIVATE KEY"!==a.type&&"RSA PRIVATE KEY"!==a.type)throw(l=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=l,l;if(a.procType&&"ENCRYPTED"===a.procType.type){var s,c;switch(a.dekInfo.algorithm){case"DES-CBC":s=8,c=i.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,c=i.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,c=i.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,c=i.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,c=i.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,c=function(e){return i.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":s=8,c=function(e){return i.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":s=16,c=function(e){return i.rc2.createDecryptionCipher(e,128)};break;default:var l;throw(l=new Error('Could not decrypt private key; unsupported encryption algorithm "'+a.dekInfo.algorithm+'".')).algorithm=a.dekInfo.algorithm,l}var u=i.util.hexToBytes(a.dekInfo.parameters),d=c(i.pbe.opensslDeriveBytes(t,u.substr(0,8),s));if(d.start(u),d.update(i.util.createBuffer(a.body)),!d.finish())return n;n=d.output.getBytes()}else n=a.body;return null!==(n="ENCRYPTED PRIVATE KEY"===a.type?o.decryptPrivateKeyInfo(r.fromDer(n),t):r.fromDer(n))&&(n=o.privateKeyFromAsn1(n)),n},o.pbe.generatePkcs12Key=function(e,t,n,a,r,o){var s,c;if(null==o){if(!("sha1"in i.md))throw new Error('"sha1" hash algorithm unavailable.');o=i.md.sha1.create()}var l=o.digestLength,u=o.blockLength,d=new i.util.ByteBuffer,p=new i.util.ByteBuffer;if(null!=e){for(c=0;c<e.length;c++)p.putInt16(e.charCodeAt(c));p.putInt16(0)}var f=p.length(),g=t.length(),h=new i.util.ByteBuffer;h.fillWithByte(n,u);var m=u*Math.ceil(g/u),v=new i.util.ByteBuffer;for(c=0;c<m;c++)v.putByte(t.at(c%g));var y=u*Math.ceil(f/u),b=new i.util.ByteBuffer;for(c=0;c<y;c++)b.putByte(p.at(c%f));var w=v;w.putBuffer(b);for(var S=Math.ceil(r/l),x=1;x<=S;x++){var C=new i.util.ByteBuffer;C.putBytes(h.bytes()),C.putBytes(w.bytes());for(var T=0;T<a;T++)o.start(),o.update(C.getBytes()),C=o.digest();var E=new i.util.ByteBuffer;for(c=0;c<u;c++)E.putByte(C.at(c%l));var I=Math.ceil(g/u)+Math.ceil(f/u),_=new i.util.ByteBuffer;for(s=0;s<I;s++){var A=new i.util.ByteBuffer(w.getBytes(u)),D=511;for(c=E.length()-1;c>=0;c--)D>>=8,D+=E.at(c)+A.at(c),A.setAt(c,255&D);_.putBuffer(A)}w=_,d.putBuffer(C)}return d.truncate(d.length()-r),d},o.pbe.getCipher=function(e,t,n){switch(e){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(e,t,n);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(e,t,n);default:var i=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw i.oid=e,i.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],i}},o.pbe.getCipherForPBES2=function(e,t,n){var a,s={},c=[];if(!r.validate(t,l,s,c))throw(a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=c,a;if((e=r.derToOid(s.kdfOid))!==o.oids.pkcs5PBKDF2)throw(a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,a.supportedOids=["pkcs5PBKDF2"],a;if((e=r.derToOid(s.encOid))!==o.oids["aes128-CBC"]&&e!==o.oids["aes192-CBC"]&&e!==o.oids["aes256-CBC"]&&e!==o.oids["des-EDE3-CBC"]&&e!==o.oids.desCBC)throw(a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a;var u,d,f=s.kdfSalt,g=i.util.createBuffer(s.kdfIterationCount);switch(g=g.getInt(g.length()<<3),o.oids[e]){case"aes128-CBC":u=16,d=i.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,d=i.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,d=i.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,d=i.des.createDecryptionCipher;break;case"desCBC":u=8,d=i.des.createDecryptionCipher}var h=p(s.prfOid),m=i.pkcs5.pbkdf2(n,f,g,u,h),v=s.encIv,y=d(m);return y.start(v),y},o.pbe.getCipherForPKCS12PBE=function(e,t,n){var a={},s=[];if(!r.validate(t,u,a,s))throw(h=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=s,h;var c,l,d,f=i.util.createBuffer(a.salt),g=i.util.createBuffer(a.iterations);switch(g=g.getInt(g.length()<<3),e){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,l=8,d=i.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,l=8,d=function(e,t){var n=i.rc2.createDecryptionCipher(e,40);return n.start(t,null),n};break;default:var h;throw(h=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,h}var m=p(a.prfOid),v=o.pbe.generatePkcs12Key(n,f,1,g,c,m);return m.start(),d(v,o.pbe.generatePkcs12Key(n,f,2,g,l,m))},o.pbe.opensslDeriveBytes=function(e,t,n,a){if(null==a){if(!("md5"in i.md))throw new Error('"md5" hash algorithm unavailable.');a=i.md.md5.create()}null===t&&(t="");for(var r=[d(a,e+t)],o=16,s=1;o<n;++s,o+=16)r.push(d(a,r[s-1]+e+t));return r.join("").substr(0,n)}},3254:(e,t,n)=>{var i=n(276);n(1696),n(8106),n(7619);var a,r=i.pkcs5=i.pkcs5||{};i.util.isNodejs&&!i.options.usePureJavaScript&&(a=n(310)),e.exports=i.pbkdf2=r.pbkdf2=function(e,t,n,r,o,s){if("function"==typeof o&&(s=o,o=null),i.util.isNodejs&&!i.options.usePureJavaScript&&a.pbkdf2&&(null===o||"object"!=typeof o)&&(a.pbkdf2Sync.length>4||!o||"sha1"===o))return"string"!=typeof o&&(o="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),s?4===a.pbkdf2Sync.length?a.pbkdf2(e,t,n,r,(function(e,t){if(e)return s(e);s(null,t.toString("binary"))})):a.pbkdf2(e,t,n,r,o,(function(e,t){if(e)return s(e);s(null,t.toString("binary"))})):4===a.pbkdf2Sync.length?a.pbkdf2Sync(e,t,n,r).toString("binary"):a.pbkdf2Sync(e,t,n,r,o).toString("binary");if(null==o&&(o="sha1"),"string"==typeof o){if(!(o in i.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=i.md[o].create()}var c=o.digestLength;if(r>4294967295*c){var l=new Error("Derived key is too long.");if(s)return s(l);throw l}var u=Math.ceil(r/c),d=r-(u-1)*c,p=i.hmac.create();p.start(o,e);var f,g,h,m="";if(!s){for(var v=1;v<=u;++v){p.start(null,null),p.update(t),p.update(i.util.int32ToBytes(v)),f=h=p.digest().getBytes();for(var y=2;y<=n;++y)p.start(null,null),p.update(h),g=p.digest().getBytes(),f=i.util.xorBytes(f,g,c),h=g;m+=v<u?f:f.substr(0,d)}return m}function b(){if(v>u)return s(null,m);p.start(null,null),p.update(t),p.update(i.util.int32ToBytes(v)),f=h=p.digest().getBytes(),y=2,w()}function w(){if(y<=n)return p.start(null,null),p.update(h),g=p.digest().getBytes(),f=i.util.xorBytes(f,g,c),h=g,++y,i.util.setImmediate(w);m+=v<u?f:f.substr(0,d),++v,b()}v=1,b()}},2385:(e,t,n)=>{var i=n(276);n(7619);var a=e.exports=i.pem=i.pem||{};function r(e){for(var t=e.name+": ",n=[],i=function(e,t){return" "+t},a=0;a<e.values.length;++a)n.push(e.values[a].replace(/^(\S+\r\n)/,i));t+=n.join(",")+"\r\n";var r=0,o=-1;for(a=0;a<t.length;++a,++r)if(r>65&&-1!==o){var s=t[o];","===s?(++o,t=t.substr(0,o)+"\r\n "+t.substr(o)):t=t.substr(0,o)+"\r\n"+s+t.substr(o+1),r=a-o-1,o=-1,++a}else" "!==t[a]&&"\t"!==t[a]&&","!==t[a]||(o=a);return t}function o(e){return e.replace(/^\s+/,"")}a.encode=function(e,t){t=t||{};var n,a="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(a+=r(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(a+=r(n={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),a+=r(n)),e.headers)for(var o=0;o<e.headers.length;++o)a+=r(e.headers[o]);return e.procType&&(a+="\r\n"),(a+=i.util.encode64(e.body,t.maxline||64)+"\r\n")+"-----END "+e.type+"-----\r\n"},a.decode=function(e){for(var t,n=[],a=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,r=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;t=a.exec(e);){var c=t[1];"NEW CERTIFICATE REQUEST"===c&&(c="CERTIFICATE REQUEST");var l={type:c,procType:null,contentDomain:null,dekInfo:null,headers:[],body:i.util.decode64(t[3])};if(n.push(l),t[2]){for(var u=t[2].split(s),d=0;t&&d<u.length;){for(var p=u[d].replace(/\s+$/,""),f=d+1;f<u.length;++f){var g=u[f];if(!/\s/.test(g[0]))break;p+=g,d=f}if(t=p.match(r)){for(var h={name:t[1],values:[]},m=t[2].split(","),v=0;v<m.length;++v)h.values.push(o(m[v]));if(l.procType)if(l.contentDomain||"Content-Domain"!==h.name)if(l.dekInfo||"DEK-Info"!==h.name)l.headers.push(h);else{if(0===h.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:m[0],parameters:m[1]||null}}else l.contentDomain=m[0]||"";else{if("Proc-Type"!==h.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==h.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:m[0],type:m[1]}}}++d}if("ENCRYPTED"===l.procType&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===n.length)throw new Error("Invalid PEM formatted message.");return n}},7501:(e,t,n)=>{var i=n(276);n(7619),n(9356),n(1598);var a=e.exports=i.pkcs1=i.pkcs1||{};function r(e,t,n){n||(n=i.md.sha1.create());for(var a="",r=Math.ceil(t/n.digestLength),o=0;o<r;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);n.start(),n.update(e+s),a+=n.digest().getBytes()}return a.substring(0,t)}a.encode_rsa_oaep=function(e,t,n){var a,o,s,c;"string"==typeof n?(a=n,o=arguments[3]||void 0,s=arguments[4]||void 0):n&&(a=n.label||void 0,o=n.seed||void 0,s=n.md||void 0,n.mgf1&&n.mgf1.md&&(c=n.mgf1.md)),s?s.start():s=i.md.sha1.create(),c||(c=s);var l=Math.ceil(e.n.bitLength()/8),u=l-2*s.digestLength-2;if(t.length>u)throw(m=new Error("RSAES-OAEP input message length is too long.")).length=t.length,m.maxLength=u,m;a||(a=""),s.update(a,"raw");for(var d=s.digest(),p="",f=u-t.length,g=0;g<f;g++)p+="\0";var h=d.getBytes()+p+""+t;if(o){if(o.length!==s.digestLength){var m;throw(m=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=o.length,m.digestLength=s.digestLength,m}}else o=i.random.getBytes(s.digestLength);var v=r(o,l-s.digestLength-1,c),y=i.util.xorBytes(h,v,h.length),b=r(y,s.digestLength,c);return"\0"+i.util.xorBytes(o,b,o.length)+y},a.decode_rsa_oaep=function(e,t,n){var a,o,s;"string"==typeof n?(a=n,o=arguments[3]||void 0):n&&(a=n.label||void 0,o=n.md||void 0,n.mgf1&&n.mgf1.md&&(s=n.mgf1.md));var c=Math.ceil(e.n.bitLength()/8);if(t.length!==c)throw(v=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,v.expectedLength=c,v;if(void 0===o?o=i.md.sha1.create():o.start(),s||(s=o),c<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");a||(a=""),o.update(a,"raw");for(var l=o.digest().getBytes(),u=t.charAt(0),d=t.substring(1,o.digestLength+1),p=t.substring(1+o.digestLength),f=r(p,o.digestLength,s),g=r(i.util.xorBytes(d,f,d.length),c-o.digestLength-1,s),h=i.util.xorBytes(p,g,p.length),m=h.substring(0,o.digestLength),v="\0"!==u,y=0;y<o.digestLength;++y)v|=l.charAt(y)!==m.charAt(y);for(var b=1,w=o.digestLength,S=o.digestLength;S<h.length;S++){var x=h.charCodeAt(S);v|=x&(b?65534:0),w+=b&=1&x^1}if(v||1!==h.charCodeAt(w))throw new Error("Invalid RSAES-OAEP padding.");return h.substring(w+1)}},5071:(e,t,n)=>{var i=n(276);n(2746),n(1696),n(6418),n(9954),n(2698),n(9356),n(5805),n(1598),n(7619),n(6011);var a=i.asn1,r=i.pki,o=e.exports=i.pkcs12=i.pkcs12||{},s={name:"ContentInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:a.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},c={name:"PFX",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},s,{name:"PFX.macData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:a.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},l={name:"SafeBag",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:a.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},u={name:"Attribute",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0,capture:"values"}]},d={name:"CertBag",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:a.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:a.Class.UNIVERSAL,type:a.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function p(e,t,n,i){for(var a=[],r=0;r<e.length;r++)for(var o=0;o<e[r].safeBags.length;o++){var s=e[r].safeBags[o];void 0!==i&&s.type!==i||(null!==t?void 0!==s.attributes[t]&&s.attributes[t].indexOf(n)>=0&&a.push(s):a.push(s))}return a}function f(e){if(e.composed||e.constructed){for(var t=i.util.createBuffer(),n=0;n<e.value.length;++n)t.putBytes(e.value[n].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function g(e,t){var n={},o=[];if(!a.validate(e,i.pkcs7.asn1.encryptedDataValidator,n,o))throw(s=new Error("Cannot read EncryptedContentInfo.")).errors=o,s;var s,c=a.derToOid(n.contentType);if(c!==r.oids.data)throw(s=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=c,s;c=a.derToOid(n.encAlgorithm);var l=r.pbe.getCipher(c,n.encParameter,t),u=f(n.encryptedContentAsn1),d=i.util.createBuffer(u.value);if(l.update(d),!l.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return l.output.getBytes()}function h(e,t,n){if(!t&&0===e.length)return[];if((e=a.fromDer(e,t)).tagClass!==a.Class.UNIVERSAL||e.type!==a.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var i=[],o=0;o<e.value.length;o++){var s=e.value[o],c={},u=[];if(!a.validate(s,l,c,u))throw(v=new Error("Cannot read SafeBag.")).errors=u,v;var p,f,g={type:a.derToOid(c.bagId),attributes:m(c.bagAttributes)};i.push(g);var h=c.bagValue.value[0];switch(g.type){case r.oids.pkcs8ShroudedKeyBag:if(null===(h=r.decryptPrivateKeyInfo(h,n)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case r.oids.keyBag:try{g.key=r.privateKeyFromAsn1(h)}catch(e){g.key=null,g.asn1=h}continue;case r.oids.certBag:p=d,f=function(){if(a.derToOid(c.certId)!==r.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=a.derToOid(c.certId),e}var n=a.fromDer(c.cert,t);try{g.cert=r.certificateFromAsn1(n,!0)}catch(e){g.cert=null,g.asn1=n}};break;default:var v;throw(v=new Error("Unsupported PKCS#12 SafeBag type.")).oid=g.type,v}if(void 0!==p&&!a.validate(h,p,c,u))throw(v=new Error("Cannot read PKCS#12 "+p.name)).errors=u,v;f()}return i}function m(e){var t={};if(void 0!==e)for(var n=0;n<e.length;++n){var i={},o=[];if(!a.validate(e[n],u,i,o)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=o,s}var c=a.derToOid(i.oid);if(void 0!==r.oids[c]){t[r.oids[c]]=[];for(var l=0;l<i.values.length;++l)t[r.oids[c]].push(i.values[l].value)}}return t}o.pkcs12FromAsn1=function(e,t,n){"string"==typeof t?(n=t,t=!0):void 0===t&&(t=!0);var l={};if(!a.validate(e,c,l,[]))throw(u=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=u,u;var u,d={version:l.version.charCodeAt(0),safeContents:[],getBags:function(e){var t,n={};return"localKeyId"in e?t=e.localKeyId:"localKeyIdHex"in e&&(t=i.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!("friendlyName"in e)&&"bagType"in e&&(n[e.bagType]=p(d.safeContents,null,null,e.bagType)),void 0!==t&&(n.localKeyId=p(d.safeContents,"localKeyId",t,e.bagType)),"friendlyName"in e&&(n.friendlyName=p(d.safeContents,"friendlyName",e.friendlyName,e.bagType)),n},getBagsByFriendlyName:function(e,t){return p(d.safeContents,"friendlyName",e,t)},getBagsByLocalKeyId:function(e,t){return p(d.safeContents,"localKeyId",e,t)}};if(3!==l.version.charCodeAt(0))throw(u=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=l.version.charCodeAt(0),u;if(a.derToOid(l.contentType)!==r.oids.data)throw(u=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=a.derToOid(l.contentType),u;var m=l.content.value[0];if(m.tagClass!==a.Class.UNIVERSAL||m.type!==a.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(m=f(m),l.mac){var v=null,y=0,b=a.derToOid(l.macAlgorithm);switch(b){case r.oids.sha1:v=i.md.sha1.create(),y=20;break;case r.oids.sha256:v=i.md.sha256.create(),y=32;break;case r.oids.sha384:v=i.md.sha384.create(),y=48;break;case r.oids.sha512:v=i.md.sha512.create(),y=64;break;case r.oids.md5:v=i.md.md5.create(),y=16}if(null===v)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+b);var w=new i.util.ByteBuffer(l.macSalt),S="macIterations"in l?parseInt(i.util.bytesToHex(l.macIterations),16):1,x=o.generateKey(n,w,3,S,y,v),C=i.hmac.create();if(C.start(v,x),C.update(m.value),C.getMac().getBytes()!==l.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(e,t,n,i){if((t=a.fromDer(t,n)).tagClass!==a.Class.UNIVERSAL||t.type!==a.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var o=0;o<t.value.length;o++){var c=t.value[o],l={},u=[];if(!a.validate(c,s,l,u))throw(v=new Error("Cannot read ContentInfo.")).errors=u,v;var d={encrypted:!1},p=null,m=l.content.value[0];switch(a.derToOid(l.contentType)){case r.oids.data:if(m.tagClass!==a.Class.UNIVERSAL||m.type!==a.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");p=f(m).value;break;case r.oids.encryptedData:p=g(m,i),d.encrypted=!0;break;default:var v;throw(v=new Error("Unsupported PKCS#12 contentType.")).contentType=a.derToOid(l.contentType),v}d.safeBags=h(p,n,i),e.safeContents.push(d)}}(d,m.value,t,n),d},o.toPkcs12Asn1=function(e,t,n,s){(s=s||{}).saltSize=s.saltSize||8,s.count=s.count||2048,s.algorithm=s.algorithm||s.encAlgorithm||"aes128","useMac"in s||(s.useMac=!0),"localKeyId"in s||(s.localKeyId=null),"generateLocalKeyId"in s||(s.generateLocalKeyId=!0);var c,l=s.localKeyId;if(null!==l)l=i.util.hexToBytes(l);else if(s.generateLocalKeyId)if(t){var u=i.util.isArray(t)?t[0]:t;"string"==typeof u&&(u=r.certificateFromPem(u)),(_=i.md.sha1.create()).update(a.toDer(r.certificateToAsn1(u)).getBytes()),l=_.digest().getBytes()}else l=i.random.getBytes(20);var d=[];null!==l&&d.push(a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(r.oids.localKeyId).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,l)])])),"friendlyName"in s&&d.push(a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(r.oids.friendlyName).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[a.create(a.Class.UNIVERSAL,a.Type.BMPSTRING,!1,s.friendlyName)])])),d.length>0&&(c=a.create(a.Class.UNIVERSAL,a.Type.SET,!0,d));var p=[],f=[];null!==t&&(f=i.util.isArray(t)?t:[t]);for(var g=[],h=0;h<f.length;++h){"string"==typeof(t=f[h])&&(t=r.certificateFromPem(t));var m=0===h?c:void 0,v=r.certificateToAsn1(t),y=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(r.oids.certBag).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(r.oids.x509Certificate).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(v).getBytes())])])]),m]);g.push(y)}if(g.length>0){var b=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,g),w=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(r.oids.data).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(b).getBytes())])]);p.push(w)}var S=null;if(null!==e){var x=r.wrapRsaPrivateKey(r.privateKeyToAsn1(e));S=null===n?a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(r.oids.keyBag).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[x]),c]):a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(r.oids.pkcs8ShroudedKeyBag).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[r.encryptPrivateKeyInfo(x,n,s)]),c]);var C=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[S]),T=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(r.oids.data).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(C).getBytes())])]);p.push(T)}var E,I=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,p);if(s.useMac){var _=i.md.sha1.create(),A=new i.util.ByteBuffer(i.random.getBytes(s.saltSize)),D=s.count,k=(e=o.generateKey(n,A,3,D,20),i.hmac.create());k.start(_,e),k.update(a.toDer(I).getBytes());var P=k.getMac();E=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(r.oids.sha1).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,P.getBytes())]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,A.getBytes()),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(D).getBytes())])}return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(3).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(r.oids.data).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(I).getBytes())])]),E])},o.generateKey=i.pbe.generatePkcs12Key},9343:(e,t,n)=>{var i=n(276);n(9504),n(2746),n(9095),n(6418),n(2385),n(9954),n(9356),n(7619),n(6011);var a=i.asn1,r=e.exports=i.pkcs7=i.pkcs7||{};function o(e){var t={},n=[];if(!a.validate(e,r.asn1.recipientInfoValidator,t,n)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=n,o}return{version:t.version.charCodeAt(0),issuer:i.pki.RDNAttributesAsArray(t.issuer),serialNumber:i.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:a.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function s(e){for(var t,n=[],r=0;r<e.length;++r)n.push((t=e[r],a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(t.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[i.pki.distinguishedNameToAsn1({attributes:t.issuer}),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,i.util.hexToBytes(t.serialNumber))]),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.encryptedContent.algorithm).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.encryptedContent.content)])));return n}function c(e){var t=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[i.pki.distinguishedNameToAsn1({attributes:e.issuer}),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,i.util.hexToBytes(e.serialNumber))]),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.digestAlgorithm).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.signatureAlgorithm).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])),t.value.push(a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var n=a.create(a.Class.CONTEXT_SPECIFIC,1,!0,[]),r=0;r<e.unauthenticatedAttributes.length;++r){var o=e.unauthenticatedAttributes[r];n.values.push(l(o))}t.value.push(n)}return t}function l(e){var t;if(e.type===i.pki.oids.contentType)t=a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.value).getBytes());else if(e.type===i.pki.oids.messageDigest)t=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===i.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),r=new Date("2050-01-01T00:00:00Z"),o=e.value;if("string"==typeof o){var s=Date.parse(o);o=isNaN(s)?13===o.length?a.utcTimeToDate(o):a.generalizedTimeToDate(o):new Date(s)}t=o>=n&&o<r?a.create(a.Class.UNIVERSAL,a.Type.UTCTIME,!1,a.dateToUtcTime(o)):a.create(a.Class.UNIVERSAL,a.Type.GENERALIZEDTIME,!1,a.dateToGeneralizedTime(o))}return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.type).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[t])])}function u(e,t,n){var r={};if(!a.validate(t,n,r,[])){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}if(a.derToOid(r.contentType)!==i.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(r.encryptedContent){var s="";if(i.util.isArray(r.encryptedContent))for(var c=0;c<r.encryptedContent.length;++c){if(r.encryptedContent[c].type!==a.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");s+=r.encryptedContent[c].value}else s=r.encryptedContent;e.encryptedContent={algorithm:a.derToOid(r.encAlgorithm),parameter:i.util.createBuffer(r.encParameter.value),content:i.util.createBuffer(s)}}if(r.content){if(s="",i.util.isArray(r.content))for(c=0;c<r.content.length;++c){if(r.content[c].type!==a.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");s+=r.content[c].value}else s=r.content;e.content=i.util.createBuffer(s)}return e.version=r.version.charCodeAt(0),e.rawCapture=r,r}function d(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case i.pki.oids["aes128-CBC"]:case i.pki.oids["aes192-CBC"]:case i.pki.oids["aes256-CBC"]:t=i.aes.createDecryptionCipher(e.encryptedContent.key);break;case i.pki.oids.desCBC:case i.pki.oids["des-EDE3-CBC"]:t=i.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}r.messageFromPem=function(e){var t=i.pem.decode(e)[0];if("PKCS7"!==t.type){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=t.type,n}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=a.fromDer(t.body);return r.messageFromAsn1(o)},r.messageToPem=function(e,t){var n={type:"PKCS7",body:a.toDer(e.toAsn1()).getBytes()};return i.pem.encode(n,{maxline:t})},r.messageFromAsn1=function(e){var t={},n=[];if(!a.validate(e,r.asn1.contentInfoValidator,t,n)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=n,o}var s,c=a.derToOid(t.contentType);switch(c){case i.pki.oids.envelopedData:s=r.createEnvelopedData();break;case i.pki.oids.encryptedData:s=r.createEncryptedData();break;case i.pki.oids.signedData:s=r.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+c+" is not (yet) supported.")}return s.fromAsn1(t.content.value[0]),s},r.createSignedData=function(){var e=null;return e={type:i.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(u(e,t,r.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var n=e.rawCapture.certificates.value,a=0;a<n.length;++a)e.certificates.push(i.pki.certificateFromAsn1(n[a]))},toAsn1:function(){e.contentInfo||e.sign();for(var t=[],n=0;n<e.certificates.length;++n)t.push(i.pki.certificateToAsn1(e.certificates[n]));var r=[],o=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return t.length>0&&o.value[0].value.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,t)),r.length>0&&o.value[0].value.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,r)),o.value[0].value.push(a.create(a.Class.UNIVERSAL,a.Type.SET,!0,e.signerInfos)),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.type).getBytes()),o])},addSigner:function(t){var n=t.issuer,a=t.serialNumber;if(t.certificate){var r=t.certificate;"string"==typeof r&&(r=i.pki.certificateFromPem(r)),n=r.issuer.attributes,a=r.serialNumber}var o=t.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof o&&(o=i.pki.privateKeyFromPem(o));var s=t.digestAlgorithm||i.pki.oids.sha1;switch(s){case i.pki.oids.sha1:case i.pki.oids.sha256:case i.pki.oids.sha384:case i.pki.oids.sha512:case i.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+s)}var c=t.authenticatedAttributes||[];if(c.length>0){for(var l=!1,u=!1,d=0;d<c.length;++d){var p=c[d];if(l||p.type!==i.pki.oids.contentType){if(u||p.type!==i.pki.oids.messageDigest);else if(u=!0,l)break}else if(l=!0,u)break}if(!l||!u)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:n,serialNumber:a,digestAlgorithm:s,signatureAlgorithm:i.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(t){var n;t=t||{},("object"!=typeof e.content||null===e.contentInfo)&&(e.contentInfo=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(i.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof i.util.ByteBuffer?n=e.content.bytes():"string"==typeof e.content&&(n=i.util.encodeUtf8(e.content)),t.detached?e.detachedContent=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,n):e.contentInfo.value.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,n)])))),0!==e.signers.length&&function(t){var n;if(!(n=e.detachedContent?e.detachedContent:(n=e.contentInfo.value[1]).value[0]))throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var r=a.derToOid(e.contentInfo.value[0].value),o=a.toDer(n);for(var s in o.getByte(),a.getBerValueLength(o),o=o.getBytes(),t)t[s].start().update(o);for(var u=new Date,d=0;d<e.signers.length;++d){var p=e.signers[d];if(0===p.authenticatedAttributes.length){if(r!==i.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{p.authenticatedAttributesAsn1=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[]),g=0;g<p.authenticatedAttributes.length;++g){var h=p.authenticatedAttributes[g];h.type===i.pki.oids.messageDigest?h.value=t[p.digestAlgorithm].digest():h.type===i.pki.oids.signingTime&&(h.value||(h.value=u)),f.value.push(l(h)),p.authenticatedAttributesAsn1.value.push(l(h))}o=a.toDer(f).getBytes(),p.md.start().update(o)}p.signature=p.key.sign(p.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(e){for(var t=[],n=0;n<e.length;++n)t.push(c(e[n]));return t}(e.signers)}(function(){for(var t={},n=0;n<e.signers.length;++n){var r=e.signers[n];(o=r.digestAlgorithm)in t||(t[o]=i.md[i.pki.oids[o]].create()),0===r.authenticatedAttributes.length?r.md=t[o]:r.md=i.md[i.pki.oids[o]].create()}for(var o in e.digestAlgorithmIdentifiers=[],t)e.digestAlgorithmIdentifiers.push(a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(o).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]));return t}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"==typeof t&&(t=i.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},r.createEncryptedData=function(){var e=null;return e={type:i.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:i.pki.oids["aes256-CBC"]},fromAsn1:function(t){u(e,t,r.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),d(e)}}},r.createEnvelopedData=function(){var e=null;return e={type:i.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:i.pki.oids["aes256-CBC"]},fromAsn1:function(t){var n=u(e,t,r.asn1.envelopedDataValidator);e.recipients=function(e){for(var t=[],n=0;n<e.length;++n)t.push(o(e[n]));return t}(n.recipientInfos.value)},toAsn1:function(){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.type).getBytes()),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,s(e.recipients)),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,(t=e.encryptedContent,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(i.pki.oids.data).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.algorithm).getBytes()),t.parameter?a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.content.getBytes())])]))])])]);var t},findRecipient:function(t){for(var n=t.issuer.attributes,i=0;i<e.recipients.length;++i){var a=e.recipients[i],r=a.issuer;if(a.serialNumber===t.serialNumber&&r.length===n.length){for(var o=!0,s=0;s<n.length;++s)if(r[s].type!==n[s].type||r[s].value!==n[s].value){o=!1;break}if(o)return a}}return null},decrypt:function(t,n){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==n)switch(t.encryptedContent.algorithm){case i.pki.oids.rsaEncryption:case i.pki.oids.desCBC:var a=n.decrypt(t.encryptedContent.content);e.encryptedContent.key=i.util.createBuffer(a);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}d(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:i.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(void 0===e.encryptedContent.content){var a,r,o;switch(n=n||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,n){case i.pki.oids["aes128-CBC"]:a=16,r=16,o=i.aes.createEncryptionCipher;break;case i.pki.oids["aes192-CBC"]:a=24,r=16,o=i.aes.createEncryptionCipher;break;case i.pki.oids["aes256-CBC"]:a=32,r=16,o=i.aes.createEncryptionCipher;break;case i.pki.oids["des-EDE3-CBC"]:a=24,r=8,o=i.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(void 0===t)t=i.util.createBuffer(i.random.getBytes(a));else if(t.length()!=a)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+a+".");e.encryptedContent.algorithm=n,e.encryptedContent.key=t,e.encryptedContent.parameter=i.util.createBuffer(i.random.getBytes(r));var s=o(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=s.output}for(var c=0;c<e.recipients.length;++c){var l=e.recipients[c];if(void 0===l.encryptedContent.content){if(l.encryptedContent.algorithm!==i.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm);l.encryptedContent.content=l.encryptedContent.key.encrypt(e.encryptedContent.key.data)}}}}}},9954:(e,t,n)=>{var i=n(276);n(2746),n(7619);var a=i.asn1,r=e.exports=i.pkcs7asn1=i.pkcs7asn1||{};i.pkcs7=i.pkcs7||{},i.pkcs7.asn1=r;var o={name:"ContentInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};r.contentInfoValidator=o;var s={name:"EncryptedContentInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};r.envelopedDataValidator={name:"EnvelopedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(s)},r.encryptedDataValidator={name:"EncryptedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"}].concat(s)};var c={name:"SignerInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};r.signedDataValidator={name:"SignedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,capture:"signerInfos",optional:!0,value:[c]}]},r.recipientInfoValidator={name:"RecipientInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},9255:(e,t,n)=>{var i=n(276);n(2746),n(6418),n(2698),n(2385),n(3254),n(5071),n(1417),n(5805),n(7619),n(6011);var a=i.asn1,r=e.exports=i.pki=i.pki||{};r.pemToDer=function(e){var t=i.pem.decode(e)[0];if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return i.util.createBuffer(t.body)},r.privateKeyFromPem=function(e){var t=i.pem.decode(e)[0];if("PRIVATE KEY"!==t.type&&"RSA PRIVATE KEY"!==t.type){var n=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var o=a.fromDer(t.body);return r.privateKeyFromAsn1(o)},r.privateKeyToPem=function(e,t){var n={type:"RSA PRIVATE KEY",body:a.toDer(r.privateKeyToAsn1(e)).getBytes()};return i.pem.encode(n,{maxline:t})},r.privateKeyInfoToPem=function(e,t){var n={type:"PRIVATE KEY",body:a.toDer(e).getBytes()};return i.pem.encode(n,{maxline:t})}},268:(e,t,n)=>{var i=n(276);n(7619),n(3736),n(9356),function(){if(i.prime)e.exports=i.prime;else{var t=e.exports=i.prime=i.prime||{},n=i.jsbn.BigInteger,a=[6,4,2,4,2,4,6,2],r=new n(null);r.fromInt(30);var o=function(e,t){return e|t};t.generateProbablePrime=function(e,t,a){"function"==typeof t&&(a=t,t={});var r=(t=t||{}).algorithm||"PRIMEINC";"string"==typeof r&&(r={name:r}),r.options=r.options||{};var o=t.prng||i.random,c={nextBytes:function(e){for(var t=o.getBytesSync(e.length),n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}};if("PRIMEINC"===r.name)return function(e,t,a,r){return"workers"in a?function(e,t,a,r){if("undefined"==typeof Worker)return s(e,t,a,r);var o=l(e,t),c=a.workers,u=a.workLoad||100,d=30*u/8,p=a.workerScript||"forge/prime.worker.js";if(-1===c)return i.util.estimateCores((function(e,t){e&&(t=2),c=t-1,f()}));function f(){c=Math.max(1,c);for(var i=[],a=0;a<c;++a)i[a]=new Worker(p);for(a=0;a<c;++a)i[a].addEventListener("message",f);var s=!1;function f(a){if(!s){var c=a.data;if(c.found){for(var p=0;p<i.length;++p)i[p].terminate();return s=!0,r(null,new n(c.prime,16))}o.bitLength()>e&&(o=l(e,t));var f=o.toString(16);a.target.postMessage({hex:f,workLoad:u}),o.dAddOffset(d,0)}}}f()}(e,t,a,r):s(e,t,a,r)}(e,c,r.options,a);throw new Error("Invalid prime generation algorithm: "+r.name)}}function s(e,t,n,i){var a=l(e,t),r=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(a.bitLength());"millerRabinTests"in n&&(r=n.millerRabinTests);var o=10;"maxBlockTime"in n&&(o=n.maxBlockTime),c(a,e,t,0,r,o,i)}function c(e,t,n,r,o,s,u){var d=+new Date;do{if(e.bitLength()>t&&(e=l(t,n)),e.isProbablePrime(o))return u(null,e);e.dAddOffset(a[r++%8],0)}while(s<0||+new Date-d<s);i.util.setImmediate((function(){c(e,t,n,r,o,s,u)}))}function l(e,t){var i=new n(e,t),a=e-1;return i.testBit(a)||i.bitwiseTo(n.ONE.shiftLeft(a),o,i),i.dAddOffset(31-i.mod(r).byteValue(),0),i}}()},3878:(e,t,n)=>{var i=n(276);n(7619);var a=null;!i.util.isNodejs||i.options.usePureJavaScript||process.versions["node-webkit"]||(a=n(310)),(e.exports=i.prng=i.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=e.md,r=new Array(32),o=0;o<32;++o)r[o]=n.create();function s(){if(t.pools[0].messageLength>=32)return c();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),c()}function c(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var n=1,i=0;i<32;++i)t.reseeds%n==0&&(e.update(t.pools[i].digest().getBytes()),t.pools[i].start()),n<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var a=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(a),t.generated=0}function l(e){var t=null,n=i.util.globalScope,a=n.crypto||n.msCrypto;a&&a.getRandomValues&&(t=function(e){return a.getRandomValues(e)});var r=i.util.createBuffer();if(t)for(;r.length()<e;){var o=Math.max(1,Math.min(e-r.length(),65536)/4),s=new Uint32Array(Math.floor(o));try{t(s);for(var c=0;c<s.length;++c)r.putInt32(s[c])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(r.length()<e)for(var l,u,d,p=Math.floor(65536*Math.random());r.length()<e;)for(u=16807*(65535&p),u+=(32767&(l=16807*(p>>16)))<<16,p=4294967295&(u=(2147483647&(u+=l>>15))+(u>>31)),c=0;c<3;++c)d=p>>>(c<<3),d^=Math.floor(256*Math.random()),r.putByte(255&d);return r.getBytes(e)}return t.pools=r,t.pool=0,t.generate=function(e,n){if(!n)return t.generateSync(e);var a=t.plugin.cipher,r=t.plugin.increment,o=t.plugin.formatKey,s=t.plugin.formatSeed,l=i.util.createBuffer();t.key=null,function u(d){if(d)return n(d);if(l.length()>=e)return n(null,l.getBytes(e));if(t.generated>1048575&&(t.key=null),null===t.key)return i.util.nextTick((function(){!function(e){if(t.pools[0].messageLength>=32)return c(),e();var n=32-t.pools[0].messageLength<<5;t.seedFile(n,(function(n,i){if(n)return e(n);t.collect(i),c(),e()}))}(u)}));var p=a(t.key,t.seed);t.generated+=p.length,l.putBytes(p),t.key=o(a(t.key,r(t.seed))),t.seed=s(a(t.key,t.seed)),i.util.setImmediate(u)}()},t.generateSync=function(e){var n=t.plugin.cipher,a=t.plugin.increment,r=t.plugin.formatKey,o=t.plugin.formatSeed;t.key=null;for(var c=i.util.createBuffer();c.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&s();var l=n(t.key,t.seed);t.generated+=l.length,c.putBytes(l),t.key=r(n(t.key,a(t.seed))),t.seed=o(n(t.key,t.seed))}return c.getBytes(e)},a?(t.seedFile=function(e,t){a.randomBytes(e,(function(e,n){if(e)return t(e);t(null,n.toString())}))},t.seedFileSync=function(e){return a.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,l(e))}catch(e){t(e)}},t.seedFileSync=l),t.collect=function(e){for(var n=e.length,i=0;i<n;++i)t.pools[t.pool].update(e.substr(i,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,n){for(var i="",a=0;a<n;a+=8)i+=String.fromCharCode(e>>a&255);t.collect(i)},t.registerWorker=function(e){e===self?t.seedFile=function(e,t){self.addEventListener("message",(function e(n){var i=n.data;i.forge&&i.forge.prng&&(self.removeEventListener("message",e),t(i.forge.prng.err,i.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:e}}})}:e.addEventListener("message",(function(n){var i=n.data;i.forge&&i.forge.prng&&t.seedFile(i.forge.prng.needed,(function(t,n){e.postMessage({forge:{prng:{err:t,bytes:n}}})}))}))},t}},1417:(e,t,n)=>{var i=n(276);n(9356),n(7619),(e.exports=i.pss=i.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,n=e.md,a=e.mgf,r=n.digestLength,o=e.salt||null;if("string"==typeof o&&(o=i.util.createBuffer(o)),"saltLength"in e)t=e.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");t=o.length()}if(null!==o&&o.length()!==t)throw new Error("Given salt length does not match length of given salt.");var s=e.prng||i.random;return{encode:function(e,c){var l,u,d=c-1,p=Math.ceil(d/8),f=e.digest().getBytes();if(p<r+t+2)throw new Error("Message is too long to encrypt.");u=null===o?s.getBytesSync(t):o.bytes();var g=new i.util.ByteBuffer;g.fillWithByte(0,8),g.putBytes(f),g.putBytes(u),n.start(),n.update(g.getBytes());var h=n.digest().getBytes(),m=new i.util.ByteBuffer;m.fillWithByte(0,p-t-r-2),m.putByte(1),m.putBytes(u);var v=m.getBytes(),y=p-r-1,b=a.generate(h,y),w="";for(l=0;l<y;l++)w+=String.fromCharCode(v.charCodeAt(l)^b.charCodeAt(l));var S=65280>>8*p-d&255;return(w=String.fromCharCode(w.charCodeAt(0)&~S)+w.substr(1))+h+String.fromCharCode(188)},verify:function(e,o,s){var c,l=s-1,u=Math.ceil(l/8);if(o=o.substr(-u),u<r+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(u-1))throw new Error("Encoded message does not end in 0xBC.");var d=u-r-1,p=o.substr(0,d),f=o.substr(d,r),g=65280>>8*u-l&255;if(p.charCodeAt(0)&g)throw new Error("Bits beyond keysize not zero as expected.");var h=a.generate(f,d),m="";for(c=0;c<d;c++)m+=String.fromCharCode(p.charCodeAt(c)^h.charCodeAt(c));m=String.fromCharCode(m.charCodeAt(0)&~g)+m.substr(1);var v=u-r-t-2;for(c=0;c<v;c++)if(0!==m.charCodeAt(c))throw new Error("Leftmost octets not zero as expected");if(1!==m.charCodeAt(v))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var y=m.substr(-t),b=new i.util.ByteBuffer;return b.fillWithByte(0,8),b.putBytes(e),b.putBytes(y),n.start(),n.update(b.getBytes()),f===n.digest().getBytes()}}}},9356:(e,t,n)=>{var i=n(276);n(9504),n(172),n(3878),n(7619),i.random&&i.random.getBytes?e.exports=i.random:function(t){var n={},a=new Array(4),r=i.util.createBuffer();function o(){var e=i.prng.create(n);return e.getBytes=function(t,n){return e.generate(t,n)},e.getBytesSync=function(t){return e.generate(t)},e}n.formatKey=function(e){var t=i.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),i.aes._expandKey(e,!1)},n.formatSeed=function(e){var t=i.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},n.cipher=function(e,t){return i.aes._updateBlock(e,t,a,!1),r.putInt32(a[0]),r.putInt32(a[1]),r.putInt32(a[2]),r.putInt32(a[3]),r.getBytes()},n.increment=function(e){return++e[3],e},n.md=i.md.sha256;var s=o(),c=null,l=i.util.globalScope,u=l.crypto||l.msCrypto;if(u&&u.getRandomValues&&(c=function(e){return u.getRandomValues(e)}),i.options.usePureJavaScript||!i.util.isNodejs&&!c){if("undefined"==typeof window||window.document,s.collectInt(+new Date,32),"undefined"!=typeof navigator){var d="";for(var p in navigator)try{"string"==typeof navigator[p]&&(d+=navigator[p])}catch(e){}s.collect(d),d=null}t&&(t().mousemove((function(e){s.collectInt(e.clientX,16),s.collectInt(e.clientY,16)})),t().keypress((function(e){s.collectInt(e.charCode,8)})))}if(i.random)for(var p in s)i.random[p]=s[p];else i.random=s;i.random.createInstance=o,e.exports=i.random}("undefined"!=typeof jQuery?jQuery:null)},5124:(e,t,n)=>{var i=n(276);n(7619);var a=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],r=[1,2,3,5],o=function(e,t){return e<<t&65535|(65535&e)>>16-t},s=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.exports=i.rc2=i.rc2||{},i.rc2.expandKey=function(e,t){"string"==typeof e&&(e=i.util.createBuffer(e)),t=t||128;var n,r=e,o=e.length(),s=t,c=Math.ceil(s/8),l=255>>(7&s);for(n=o;n<128;n++)r.putByte(a[r.at(n-1)+r.at(n-o)&255]);for(r.setAt(128-c,a[r.at(128-c)&l]),n=127-c;n>=0;n--)r.setAt(n,a[r.at(n+1)^r.at(n+c)]);return r};var c=function(e,t,n){var a,c,l,u,d=!1,p=null,f=null,g=null,h=[];for(e=i.rc2.expandKey(e,t),l=0;l<64;l++)h.push(e.getInt16Le());n?(a=function(e){for(l=0;l<4;l++)e[l]+=h[u]+(e[(l+3)%4]&e[(l+2)%4])+(~e[(l+3)%4]&e[(l+1)%4]),e[l]=o(e[l],r[l]),u++},c=function(e){for(l=0;l<4;l++)e[l]+=h[63&e[(l+3)%4]]}):(a=function(e){for(l=3;l>=0;l--)e[l]=s(e[l],r[l]),e[l]-=h[u]+(e[(l+3)%4]&e[(l+2)%4])+(~e[(l+3)%4]&e[(l+1)%4]),u--},c=function(e){for(l=3;l>=0;l--)e[l]-=h[63&e[(l+3)%4]]});var m=function(e){var t=[];for(l=0;l<4;l++){var i=p.getInt16Le();null!==g&&(n?i^=g.getInt16Le():g.putInt16Le(i)),t.push(65535&i)}u=n?0:63;for(var a=0;a<e.length;a++)for(var r=0;r<e[a][0];r++)e[a][1](t);for(l=0;l<4;l++)null!==g&&(n?g.putInt16Le(t[l]):t[l]^=g.getInt16Le()),f.putInt16Le(t[l])},v=null;return v={start:function(e,t){e&&"string"==typeof e&&(e=i.util.createBuffer(e)),d=!1,p=i.util.createBuffer(),f=t||new i.util.createBuffer,g=e,v.output=f},update:function(e){for(d||p.putBuffer(e);p.length()>=8;)m([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(e){var t=!0;if(n)if(e)t=e(8,p,!n);else{var i=8===p.length()?8:8-p.length();p.fillWithByte(i,i)}if(t&&(d=!0,v.update()),!n&&(t=0===p.length()))if(e)t=e(8,f,!n);else{var a=f.length(),r=f.at(a-1);r>a?t=!1:f.truncate(r)}return t}}};i.rc2.startEncrypting=function(e,t,n){var a=i.rc2.createEncryptionCipher(e,128);return a.start(t,n),a},i.rc2.createEncryptionCipher=function(e,t){return c(e,t,!0)},i.rc2.startDecrypting=function(e,t,n){var a=i.rc2.createDecryptionCipher(e,128);return a.start(t,n),a},i.rc2.createDecryptionCipher=function(e,t){return c(e,t,!1)}},5805:(e,t,n)=>{var i=n(276);if(n(2746),n(3736),n(6418),n(7501),n(268),n(9356),n(7619),void 0===a)var a=i.jsbn.BigInteger;var r=i.util.isNodejs?n(310):null,o=i.asn1,s=i.util;i.pki=i.pki||{},e.exports=i.pki.rsa=i.rsa=i.rsa||{};var c=i.pki,l=[6,4,2,4,2,4,6,2],u={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},d={name:"RSAPrivateKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},p={name:"RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},f=i.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},g={name:"DigestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},h=function(e){var t;if(!(e.algorithm in c.oids)){var n=new Error("Unknown message digest algorithm.");throw n.algorithm=e.algorithm,n}t=c.oids[e.algorithm];var i=o.oidToDer(t).getBytes(),a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),r=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);r.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,i)),r.value.push(o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,""));var s=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.digest().getBytes());return a.value.push(r),a.value.push(s),o.toDer(a).getBytes()},m=function(e,t,n){if(n)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var r;t.dP||(t.dP=t.d.mod(t.p.subtract(a.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(a.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{r=new a(i.util.bytesToHex(i.random.getBytes(t.n.bitLength()/8)),16)}while(r.compareTo(t.n)>=0||!r.gcd(t.n).equals(a.ONE));for(var o=(e=e.multiply(r.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);o.compareTo(s)<0;)o=o.add(t.p);var c=o.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return c.multiply(r.modInverse(t.n)).mod(t.n)};function v(e,t,n){var a=i.util.createBuffer(),r=Math.ceil(t.n.bitLength()/8);if(e.length>r-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=e.length,o.max=r-11,o}a.putByte(0),a.putByte(n);var s,c=r-3-e.length;if(0===n||1===n){s=0===n?0:255;for(var l=0;l<c;++l)a.putByte(s)}else for(;c>0;){var u=0,d=i.random.getBytes(c);for(l=0;l<c;++l)0===(s=d.charCodeAt(l))?++u:a.putByte(s);c=u}return a.putByte(0),a.putBytes(e),a}function y(e,t,n,a){var r=Math.ceil(t.n.bitLength()/8),o=i.util.createBuffer(e),s=o.getByte(),c=o.getByte();if(0!==s||n&&0!==c&&1!==c||!n&&2!=c||n&&0===c&&void 0===a)throw new Error("Encryption block is invalid.");var l=0;if(0===c){l=r-3-a;for(var u=0;u<l;++u)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===c)for(l=0;o.length()>1;){if(255!==o.getByte()){--o.read;break}++l}else if(2===c)for(l=0;o.length()>1;){if(0===o.getByte()){--o.read;break}++l}if(0!==o.getByte()||l!==r-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function b(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var n=i.util.hexToBytes(t);return!(n.length>1)||(0!==n.charCodeAt(0)||128&n.charCodeAt(1))&&(255!==n.charCodeAt(0)||128&~n.charCodeAt(1))?n:n.substr(1)}function w(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function S(e){return i.util.isNodejs&&"function"==typeof r[e]}function x(e){return void 0!==s.globalScope&&"object"==typeof s.globalScope.crypto&&"object"==typeof s.globalScope.crypto.subtle&&"function"==typeof s.globalScope.crypto.subtle[e]}function C(e){return void 0!==s.globalScope&&"object"==typeof s.globalScope.msCrypto&&"object"==typeof s.globalScope.msCrypto.subtle&&"function"==typeof s.globalScope.msCrypto.subtle[e]}function T(e){for(var t=i.util.hexToBytes(e.toString(16)),n=new Uint8Array(t.length),a=0;a<t.length;++a)n[a]=t.charCodeAt(a);return n}c.rsa.encrypt=function(e,t,n){var r,o=n,s=Math.ceil(t.n.bitLength()/8);!1!==n&&!0!==n?(o=2===n,r=v(e,t,n)):(r=i.util.createBuffer()).putBytes(e);for(var c=new a(r.toHex(),16),l=m(c,t,o).toString(16),u=i.util.createBuffer(),d=s-Math.ceil(l.length/2);d>0;)u.putByte(0),--d;return u.putBytes(i.util.hexToBytes(l)),u.getBytes()},c.rsa.decrypt=function(e,t,n,r){var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=o,s}var c=new a(i.util.createBuffer(e).toHex(),16);if(c.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=m(c,t,n).toString(16),u=i.util.createBuffer(),d=o-Math.ceil(l.length/2);d>0;)u.putByte(0),--d;return u.putBytes(i.util.hexToBytes(l)),!1!==r?y(u.getBytes(),t,n):u.getBytes()},c.rsa.createKeyPairGenerationState=function(e,t,n){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048;var r,o=(n=n||{}).prng||i.random,s={nextBytes:function(e){for(var t=o.getBytesSync(e.length),n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}},c=n.algorithm||"PRIMEINC";if("PRIMEINC"!==c)throw new Error("Invalid key generation algorithm: "+c);return(r={algorithm:c,state:0,bits:e,rng:s,eInt:t||65537,e:new a(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(r.eInt),r},c.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var n=new a(null);n.fromInt(30);for(var i,r=0,o=function(e,t){return e|t},s=+new Date,u=0;null===e.keys&&(t<=0||u<t);){if(0===e.state){var d=null===e.p?e.pBits:e.qBits,p=d-1;0===e.pqState?(e.num=new a(d,e.rng),e.num.testBit(p)||e.num.bitwiseTo(a.ONE.shiftLeft(p),o,e.num),e.num.dAddOffset(31-e.num.mod(n).byteValue(),0),r=0,++e.pqState):1===e.pqState?e.num.bitLength()>d?e.pqState=0:e.num.isProbablePrime(w(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(l[r++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(a.ONE).gcd(e.e).compareTo(a.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(a.ONE),e.q1=e.q.subtract(a.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(a.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var f=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)}}u+=(i=+new Date)-s,s=i}return null!==e.keys},c.rsa.generateKeyPair=function(e,t,n,l){if(1===arguments.length?"object"==typeof e?(n=e,e=void 0):"function"==typeof e&&(l=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(l=t,t=void 0):"number"!=typeof t&&(n=t,t=void 0):(n=e,l=t,e=void 0,t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof n&&(l=n,n=void 0):(l=n,n=t,t=void 0)),n=n||{},void 0===e&&(e=n.bits||2048),void 0===t&&(t=n.e||65537),!i.options.usePureJavaScript&&!n.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(l){if(S("generateKeyPair"))return r.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(e,t,n){if(e)return l(e);l(null,{privateKey:c.privateKeyFromPem(n),publicKey:c.publicKeyFromPem(t)})}));if(x("generateKey")&&x("exportKey"))return s.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:T(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(e){return s.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)})).then(void 0,(function(e){l(e)})).then((function(e){if(e){var t=c.privateKeyFromAsn1(o.fromDer(i.util.createBuffer(e)));l(null,{privateKey:t,publicKey:c.setRsaPublicKey(t.n,t.e)})}}));if(C("generateKey")&&C("exportKey")){var u=s.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:T(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return u.oncomplete=function(e){var t=e.target.result,n=s.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);n.oncomplete=function(e){var t=e.target.result,n=c.privateKeyFromAsn1(o.fromDer(i.util.createBuffer(t)));l(null,{privateKey:n,publicKey:c.setRsaPublicKey(n.n,n.e)})},n.onerror=function(e){l(e)}},void(u.onerror=function(e){l(e)})}}else if(S("generateKeyPairSync")){var d=r.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:c.privateKeyFromPem(d.privateKey),publicKey:c.publicKeyFromPem(d.publicKey)}}var p=c.rsa.createKeyPairGenerationState(e,t,n);if(!l)return c.rsa.stepKeyPairGenerationState(p,0),p.keys;!function(e,t,n){"function"==typeof t&&(n=t,t={});var r={algorithm:{name:(t=t||{}).algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};function o(){s(e.pBits,(function(t,i){return t?n(t):(e.p=i,null!==e.q?l(t,e.q):void s(e.qBits,l))}))}function s(e,t){i.prime.generateProbablePrime(e,r,t)}function l(t,i){if(t)return n(t);if(e.q=i,e.p.compareTo(e.q)<0){var r=e.p;e.p=e.q,e.q=r}if(0!==e.p.subtract(a.ONE).gcd(e.e).compareTo(a.ONE))return e.p=null,void o();if(0!==e.q.subtract(a.ONE).gcd(e.e).compareTo(a.ONE))return e.q=null,void s(e.qBits,l);if(e.p1=e.p.subtract(a.ONE),e.q1=e.q.subtract(a.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(a.ONE))return e.p=e.q=null,void o();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void s(e.qBits,l);var u=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)},n(null,e.keys)}"prng"in t&&(r.prng=t.prng),o()}(p,n,l)},c.setRsaPublicKey=c.rsa.setPublicKey=function(e,t){var n={n:e,e:t,encrypt:function(e,t,a){if("string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,n){return v(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return i.pkcs1.encode_rsa_oaep(t,e,a)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var r=t.encode(e,n,!0);return c.rsa.encrypt(r,n,!0)},verify:function(e,t,a,r){"string"==typeof a?a=a.toUpperCase():void 0===a&&(a="RSASSA-PKCS1-V1_5"),void 0===r&&(r={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in r||(r._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===a?a={verify:function(e,t){t=y(t,n,!0);var a=o.fromDer(t,{parseAllBytes:r._parseAllDigestBytes}),s={},c=[];if(!o.validate(a,g,s,c))throw(l=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=c,l;var l,u=o.derToOid(s.algorithmIdentifier);if(u!==i.oids.md2&&u!==i.oids.md5&&u!==i.oids.sha1&&u!==i.oids.sha224&&u!==i.oids.sha256&&u!==i.oids.sha384&&u!==i.oids.sha512&&u!==i.oids["sha512-224"]&&u!==i.oids["sha512-256"])throw(l=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=u,l;if((u===i.oids.md2||u===i.oids.md5)&&!("parameters"in s))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return e===s.digest}}:"NONE"!==a&&"NULL"!==a&&null!==a||(a={verify:function(e,t){return e===y(t,n,!0)}});var s=c.rsa.decrypt(t,n,!0,!1);return a.verify(e,s,n.n.bitLength())}};return n},c.setRsaPrivateKey=c.rsa.setPrivateKey=function(e,t,n,a,r,o,s,l){var u={n:e,e:t,d:n,p:a,q:r,dP:o,dQ:s,qInv:l,decrypt:function(e,t,n){"string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var a=c.rsa.decrypt(e,u,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:y};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return i.pkcs1.decode_rsa_oaep(t,e,n)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(a,u,!1)},sign:function(e,t){var n=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:h},n=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},n=1);var i=t.encode(e,u.n.bitLength());return c.rsa.encrypt(i,u,n)}};return u},c.wrapRsaPrivateKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(e).getBytes())])},c.privateKeyFromAsn1=function(e){var t,n,r,s,l,p,f,g,h={},m=[];if(o.validate(e,u,h,m)&&(e=o.fromDer(i.util.createBuffer(h.privateKey))),h={},m=[],!o.validate(e,d,h,m)){var v=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw v.errors=m,v}return t=i.util.createBuffer(h.privateKeyModulus).toHex(),n=i.util.createBuffer(h.privateKeyPublicExponent).toHex(),r=i.util.createBuffer(h.privateKeyPrivateExponent).toHex(),s=i.util.createBuffer(h.privateKeyPrime1).toHex(),l=i.util.createBuffer(h.privateKeyPrime2).toHex(),p=i.util.createBuffer(h.privateKeyExponent1).toHex(),f=i.util.createBuffer(h.privateKeyExponent2).toHex(),g=i.util.createBuffer(h.privateKeyCoefficient).toHex(),c.setRsaPrivateKey(new a(t,16),new a(n,16),new a(r,16),new a(s,16),new a(l,16),new a(p,16),new a(f,16),new a(g,16))},c.privateKeyToAsn1=c.privateKeyToRSAPrivateKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.e)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.d)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.p)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.q)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.dP)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.dQ)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.qInv))])},c.publicKeyFromAsn1=function(e){var t={},n=[];if(o.validate(e,f,t,n)){var r,s=o.derToOid(t.publicKeyOid);if(s!==c.oids.rsaEncryption)throw(r=new Error("Cannot read public key. Unknown OID.")).oid=s,r;e=t.rsaPublicKey}if(n=[],!o.validate(e,p,t,n))throw(r=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=n,r;var l=i.util.createBuffer(t.publicKeyModulus).toHex(),u=i.util.createBuffer(t.publicKeyExponent).toHex();return c.setRsaPublicKey(new a(l,16),new a(u,16))},c.publicKeyToAsn1=c.publicKeyToSubjectPublicKeyInfo=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,[c.publicKeyToRSAPublicKey(e)])])},c.publicKeyToRSAPublicKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.e))])}},1598:(e,t,n)=>{var i=n(276);n(8106),n(7619);var a=e.exports=i.sha1=i.sha1||{};i.md.sha1=i.md.algorithms.sha1=a,a.create=function(){o||(r=String.fromCharCode(128),r+=i.util.fillString(String.fromCharCode(0),64),o=!0);var e=null,t=i.util.createBuffer(),n=new Array(80),a={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var n=a.messageLengthSize/4,r=0;r<n;++r)a.fullMessageLength.push(0);return t=i.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},a}};return a.start(),a.update=function(r,o){"utf8"===o&&(r=i.util.encodeUtf8(r));var c=r.length;a.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var l=a.fullMessageLength.length-1;l>=0;--l)a.fullMessageLength[l]+=c[1],c[1]=c[0]+(a.fullMessageLength[l]/4294967296>>>0),a.fullMessageLength[l]=a.fullMessageLength[l]>>>0,c[0]=c[1]/4294967296>>>0;return t.putBytes(r),s(e,n,t),(t.read>2048||0===t.length())&&t.compact(),a},a.digest=function(){var o=i.util.createBuffer();o.putBytes(t.bytes());var c,l=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize&a.blockLength-1;o.putBytes(r.substr(0,a.blockLength-l));for(var u=8*a.fullMessageLength[0],d=0;d<a.fullMessageLength.length-1;++d)u+=(c=8*a.fullMessageLength[d+1])/4294967296>>>0,o.putInt32(u>>>0),u=c>>>0;o.putInt32(u);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};s(p,n,o);var f=i.util.createBuffer();return f.putInt32(p.h0),f.putInt32(p.h1),f.putInt32(p.h2),f.putInt32(p.h3),f.putInt32(p.h4),f},a};var r=null,o=!1;function s(e,t,n){for(var i,a,r,o,s,c,l,u=n.length();u>=64;){for(a=e.h0,r=e.h1,o=e.h2,s=e.h3,c=e.h4,l=0;l<16;++l)i=n.getInt32(),t[l]=i,i=(a<<5|a>>>27)+(s^r&(o^s))+c+1518500249+i,c=s,s=o,o=(r<<30|r>>>2)>>>0,r=a,a=i;for(;l<20;++l)i=(i=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|i>>>31,t[l]=i,i=(a<<5|a>>>27)+(s^r&(o^s))+c+1518500249+i,c=s,s=o,o=(r<<30|r>>>2)>>>0,r=a,a=i;for(;l<32;++l)i=(i=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|i>>>31,t[l]=i,i=(a<<5|a>>>27)+(r^o^s)+c+1859775393+i,c=s,s=o,o=(r<<30|r>>>2)>>>0,r=a,a=i;for(;l<40;++l)i=(i=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|i>>>30,t[l]=i,i=(a<<5|a>>>27)+(r^o^s)+c+1859775393+i,c=s,s=o,o=(r<<30|r>>>2)>>>0,r=a,a=i;for(;l<60;++l)i=(i=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|i>>>30,t[l]=i,i=(a<<5|a>>>27)+(r&o|s&(r^o))+c+2400959708+i,c=s,s=o,o=(r<<30|r>>>2)>>>0,r=a,a=i;for(;l<80;++l)i=(i=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|i>>>30,t[l]=i,i=(a<<5|a>>>27)+(r^o^s)+c+3395469782+i,c=s,s=o,o=(r<<30|r>>>2)>>>0,r=a,a=i;e.h0=e.h0+a|0,e.h1=e.h1+r|0,e.h2=e.h2+o|0,e.h3=e.h3+s|0,e.h4=e.h4+c|0,u-=64}}},172:(e,t,n)=>{var i=n(276);n(8106),n(7619);var a=e.exports=i.sha256=i.sha256||{};i.md.sha256=i.md.algorithms.sha256=a,a.create=function(){o||(r=String.fromCharCode(128),r+=i.util.fillString(String.fromCharCode(0),64),s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0);var e=null,t=i.util.createBuffer(),n=new Array(64),a={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var n=a.messageLengthSize/4,r=0;r<n;++r)a.fullMessageLength.push(0);return t=i.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},a}};return a.start(),a.update=function(r,o){"utf8"===o&&(r=i.util.encodeUtf8(r));var s=r.length;a.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=a.fullMessageLength.length-1;l>=0;--l)a.fullMessageLength[l]+=s[1],s[1]=s[0]+(a.fullMessageLength[l]/4294967296>>>0),a.fullMessageLength[l]=a.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(r),c(e,n,t),(t.read>2048||0===t.length())&&t.compact(),a},a.digest=function(){var o=i.util.createBuffer();o.putBytes(t.bytes());var s,l=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize&a.blockLength-1;o.putBytes(r.substr(0,a.blockLength-l));for(var u=8*a.fullMessageLength[0],d=0;d<a.fullMessageLength.length-1;++d)u+=(s=8*a.fullMessageLength[d+1])/4294967296>>>0,o.putInt32(u>>>0),u=s>>>0;o.putInt32(u);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};c(p,n,o);var f=i.util.createBuffer();return f.putInt32(p.h0),f.putInt32(p.h1),f.putInt32(p.h2),f.putInt32(p.h3),f.putInt32(p.h4),f.putInt32(p.h5),f.putInt32(p.h6),f.putInt32(p.h7),f},a};var r=null,o=!1,s=null;function c(e,t,n){for(var i,a,r,o,c,l,u,d,p,f,g,h,m,v=n.length();v>=64;){for(c=0;c<16;++c)t[c]=n.getInt32();for(;c<64;++c)i=((i=t[c-2])>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,a=((a=t[c-15])>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,t[c]=i+t[c-7]+a+t[c-16]|0;for(l=e.h0,u=e.h1,d=e.h2,p=e.h3,f=e.h4,g=e.h5,h=e.h6,m=e.h7,c=0;c<64;++c)r=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),o=l&u|d&(l^u),i=m+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(h^f&(g^h))+s[c]+t[c],m=h,h=g,g=f,f=p+i>>>0,p=d,d=u,u=l,l=i+(a=r+o)>>>0;e.h0=e.h0+l|0,e.h1=e.h1+u|0,e.h2=e.h2+d|0,e.h3=e.h3+p|0,e.h4=e.h4+f|0,e.h5=e.h5+g|0,e.h6=e.h6+h|0,e.h7=e.h7+m|0,v-=64}}},2313:(e,t,n)=>{var i=n(276);n(8106),n(7619);var a=e.exports=i.sha512=i.sha512||{};i.md.sha512=i.md.algorithms.sha512=a;var r=i.sha384=i.sha512.sha384=i.sha512.sha384||{};r.create=function(){return a.create("SHA-384")},i.md.sha384=i.md.algorithms.sha384=r,i.sha512.sha256=i.sha512.sha256||{create:function(){return a.create("SHA-512/256")}},i.md["sha512/256"]=i.md.algorithms["sha512/256"]=i.sha512.sha256,i.sha512.sha224=i.sha512.sha224||{create:function(){return a.create("SHA-512/224")}},i.md["sha512/224"]=i.md.algorithms["sha512/224"]=i.sha512.sha224,a.create=function(e){if(s||(o=String.fromCharCode(128),o+=i.util.fillString(String.fromCharCode(0),128),c=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(l={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],l["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],l["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],l["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],s=!0),void 0===e&&(e="SHA-512"),!(e in l))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=l[e],n=null,a=i.util.createBuffer(),r=new Array(80),d=0;d<80;++d)r[d]=new Array(2);var p=64;switch(e){case"SHA-384":p=48;break;case"SHA-512/256":p=32;break;case"SHA-512/224":p=28}var f={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:p,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){f.messageLength=0,f.fullMessageLength=f.messageLength128=[];for(var e=f.messageLengthSize/4,r=0;r<e;++r)f.fullMessageLength.push(0);for(a=i.util.createBuffer(),n=new Array(t.length),r=0;r<t.length;++r)n[r]=t[r].slice(0);return f}};return f.start(),f.update=function(e,t){"utf8"===t&&(e=i.util.encodeUtf8(e));var o=e.length;f.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var s=f.fullMessageLength.length-1;s>=0;--s)f.fullMessageLength[s]+=o[1],o[1]=o[0]+(f.fullMessageLength[s]/4294967296>>>0),f.fullMessageLength[s]=f.fullMessageLength[s]>>>0,o[0]=o[1]/4294967296>>>0;return a.putBytes(e),u(n,r,a),(a.read>2048||0===a.length())&&a.compact(),f},f.digest=function(){var t=i.util.createBuffer();t.putBytes(a.bytes());var s,c=f.fullMessageLength[f.fullMessageLength.length-1]+f.messageLengthSize&f.blockLength-1;t.putBytes(o.substr(0,f.blockLength-c));for(var l=8*f.fullMessageLength[0],d=0;d<f.fullMessageLength.length-1;++d)l+=(s=8*f.fullMessageLength[d+1])/4294967296>>>0,t.putInt32(l>>>0),l=s>>>0;t.putInt32(l);var p=new Array(n.length);for(d=0;d<n.length;++d)p[d]=n[d].slice(0);u(p,r,t);var g,h=i.util.createBuffer();for(g="SHA-512"===e?p.length:"SHA-384"===e?p.length-2:p.length-4,d=0;d<g;++d)h.putInt32(p[d][0]),d===g-1&&"SHA-512/224"===e||h.putInt32(p[d][1]);return h},f};var o=null,s=!1,c=null,l=null;function u(e,t,n){for(var i,a,r,o,s,l,u,d,p,f,g,h,m,v,y,b,w,S,x,C,T,E,I,_,A,D,k,P,B,R,O,U,N,M=n.length();M>=128;){for(k=0;k<16;++k)t[k][0]=n.getInt32()>>>0,t[k][1]=n.getInt32()>>>0;for(;k<80;++k)i=(((P=(R=t[k-2])[0])>>>19|(B=R[1])<<13)^(B>>>29|P<<3)^P>>>6)>>>0,a=((P<<13|B>>>19)^(B<<3|P>>>29)^(P<<26|B>>>6))>>>0,r=(((P=(U=t[k-15])[0])>>>1|(B=U[1])<<31)^(P>>>8|B<<24)^P>>>7)>>>0,o=((P<<31|B>>>1)^(P<<24|B>>>8)^(P<<25|B>>>7))>>>0,O=t[k-7],N=t[k-16],B=a+O[1]+o+N[1],t[k][0]=i+O[0]+r+N[0]+(B/4294967296>>>0)>>>0,t[k][1]=B>>>0;for(g=e[0][0],h=e[0][1],m=e[1][0],v=e[1][1],y=e[2][0],b=e[2][1],w=e[3][0],S=e[3][1],x=e[4][0],C=e[4][1],T=e[5][0],E=e[5][1],I=e[6][0],_=e[6][1],A=e[7][0],D=e[7][1],k=0;k<80;++k)u=((x>>>14|C<<18)^(x>>>18|C<<14)^(C>>>9|x<<23))>>>0,d=(I^x&(T^I))>>>0,s=((g>>>28|h<<4)^(h>>>2|g<<30)^(h>>>7|g<<25))>>>0,l=((g<<4|h>>>28)^(h<<30|g>>>2)^(h<<25|g>>>7))>>>0,p=(g&m|y&(g^m))>>>0,f=(h&v|b&(h^v))>>>0,B=D+(((x<<18|C>>>14)^(x<<14|C>>>18)^(C<<23|x>>>9))>>>0)+((_^C&(E^_))>>>0)+c[k][1]+t[k][1],i=A+u+d+c[k][0]+t[k][0]+(B/4294967296>>>0)>>>0,a=B>>>0,r=s+p+((B=l+f)/4294967296>>>0)>>>0,o=B>>>0,A=I,D=_,I=T,_=E,T=x,E=C,x=w+i+((B=S+a)/4294967296>>>0)>>>0,C=B>>>0,w=y,S=b,y=m,b=v,m=g,v=h,g=i+r+((B=a+o)/4294967296>>>0)>>>0,h=B>>>0;B=e[0][1]+h,e[0][0]=e[0][0]+g+(B/4294967296>>>0)>>>0,e[0][1]=B>>>0,B=e[1][1]+v,e[1][0]=e[1][0]+m+(B/4294967296>>>0)>>>0,e[1][1]=B>>>0,B=e[2][1]+b,e[2][0]=e[2][0]+y+(B/4294967296>>>0)>>>0,e[2][1]=B>>>0,B=e[3][1]+S,e[3][0]=e[3][0]+w+(B/4294967296>>>0)>>>0,e[3][1]=B>>>0,B=e[4][1]+C,e[4][0]=e[4][0]+x+(B/4294967296>>>0)>>>0,e[4][1]=B>>>0,B=e[5][1]+E,e[5][0]=e[5][0]+T+(B/4294967296>>>0)>>>0,e[5][1]=B>>>0,B=e[6][1]+_,e[6][0]=e[6][0]+I+(B/4294967296>>>0)>>>0,e[6][1]=B>>>0,B=e[7][1]+D,e[7][0]=e[7][0]+A+(B/4294967296>>>0)>>>0,e[7][1]=B>>>0,M-=128}}},149:(e,t,n)=>{var i=n(276);n(9504),n(1696),n(1267),n(1598),n(7619);var a=e.exports=i.ssh=i.ssh||{};function r(e,t){var n=t.toString(16);n[0]>="8"&&(n="00"+n);var a=i.util.hexToBytes(n);e.putInt32(a.length),e.putBytes(a)}function o(e,t){e.putInt32(t.length),e.putString(t)}function s(){for(var e=i.md.sha1.create(),t=arguments.length,n=0;n<t;++n)e.update(arguments[n]);return e.digest()}a.privateKeyToPutty=function(e,t,n){var a="ssh-rsa",c=""===(t=t||"")?"none":"aes256-cbc",l="PuTTY-User-Key-File-2: "+a+"\r\n";l+="Encryption: "+c+"\r\n",l+="Comment: "+(n=n||"")+"\r\n";var u=i.util.createBuffer();o(u,a),r(u,e.e),r(u,e.n);var d=i.util.encode64(u.bytes(),64),p=Math.floor(d.length/66)+1;l+="Public-Lines: "+p+"\r\n",l+=d;var f,g=i.util.createBuffer();if(r(g,e.d),r(g,e.p),r(g,e.q),r(g,e.qInv),t){var h=g.length()+16-1;h-=h%16;var m=s(g.bytes());m.truncate(m.length()-h+g.length()),g.putBuffer(m);var v=i.util.createBuffer();v.putBuffer(s("\0\0\0\0",t)),v.putBuffer(s("\0\0\0",t));var y=i.aes.createEncryptionCipher(v.truncate(8),"CBC");y.start(i.util.createBuffer().fillWithByte(0,16)),y.update(g.copy()),y.finish();var b=y.output;b.truncate(16),f=i.util.encode64(b.bytes(),64)}else f=i.util.encode64(g.bytes(),64);l+="\r\nPrivate-Lines: "+(p=Math.floor(f.length/66)+1)+"\r\n",l+=f;var w=s("putty-private-key-file-mac-key",t),S=i.util.createBuffer();o(S,a),o(S,c),o(S,n),S.putInt32(u.length()),S.putBuffer(u),S.putInt32(g.length()),S.putBuffer(g);var x=i.hmac.create();return x.start("sha1",w),x.update(S.bytes()),l+"\r\nPrivate-MAC: "+x.digest().toHex()+"\r\n"},a.publicKeyToOpenSSH=function(e,t){var n="ssh-rsa";t=t||"";var a=i.util.createBuffer();return o(a,n),r(a,e.e),r(a,e.n),n+" "+i.util.encode64(a.bytes())+" "+t},a.privateKeyToOpenSSH=function(e,t){return t?i.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):i.pki.privateKeyToPem(e)},a.getPublicKeyFingerprint=function(e,t){var n=(t=t||{}).md||i.md.md5.create(),a=i.util.createBuffer();o(a,"ssh-rsa"),r(a,e.e),r(a,e.n),n.start(),n.update(a.getBytes());var s=n.digest();if("hex"===t.encoding){var c=s.toHex();return t.delimiter?c.match(/.{2}/g).join(t.delimiter):c}if("binary"===t.encoding)return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return s}},3986:(e,t,n)=>{var i=n(276);n(2746),n(1696),n(1267),n(2385),n(9255),n(9356),n(1598),n(7619);var a=function(e,t,n,a){var r=i.util.createBuffer(),o=e.length>>1,s=o+(1&e.length),c=e.substr(0,s),l=e.substr(o,s),u=i.util.createBuffer(),d=i.hmac.create();n=t+n;var p=Math.ceil(a/16),f=Math.ceil(a/20);d.start("MD5",c);var g=i.util.createBuffer();u.putBytes(n);for(var h=0;h<p;++h)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+n),g.putBuffer(d.digest());d.start("SHA1",l);var m=i.util.createBuffer();for(u.clear(),u.putBytes(n),h=0;h<f;++h)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+n),m.putBuffer(d.digest());return r.putBytes(i.util.xorBytes(g.getBytes(),m.getBytes(),a)),r},r=function(e,t,n){var a=!1;try{var r=e.deflate(t.fragment.getBytes());t.fragment=i.util.createBuffer(r),t.length=r.length,a=!0}catch(e){}return a},o=function(e,t,n){var a=!1;try{var r=e.inflate(t.fragment.getBytes());t.fragment=i.util.createBuffer(r),t.length=r.length,a=!0}catch(e){}return a},s=function(e,t){var n=0;switch(t){case 1:n=e.getByte();break;case 2:n=e.getInt16();break;case 3:n=e.getInt24();break;case 4:n=e.getInt32()}return i.util.createBuffer(e.getBytes(n))},c=function(e,t,n){e.putInt(n.length(),t<<3),e.putBuffer(n)},l={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};l.SupportedVersions=[l.Versions.TLS_1_1,l.Versions.TLS_1_0],l.Version=l.SupportedVersions[0],l.MaxFragment=15360,l.ConnectionEnd={server:0,client:1},l.PRFAlgorithm={tls_prf_sha256:0},l.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},l.CipherType={stream:0,block:1,aead:2},l.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},l.CompressionMethod={none:0,deflate:1},l.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},l.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},l.Alert={},l.Alert.Level={warning:1,fatal:2},l.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},l.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},l.CipherSuites={},l.getCipherSuite=function(e){var t=null;for(var n in l.CipherSuites){var i=l.CipherSuites[n];if(i.id[0]===e.charCodeAt(0)&&i.id[1]===e.charCodeAt(1)){t=i;break}}return t},l.handleUnexpected=function(e,t){!e.open&&e.entity===l.ConnectionEnd.client||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unexpected_message}})},l.handleHelloRequest=function(e,t,n){!e.handshaking&&e.handshakes>0&&(l.queue(e,l.createAlert(e,{level:l.Alert.Level.warning,description:l.Alert.Description.no_renegotiation})),l.flush(e)),e.process()},l.parseHelloMessage=function(e,t,n){var a=null,r=e.entity===l.ConnectionEnd.client;if(n<38)e.error(e,{message:r?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});else{var o=t.fragment,c=o.length();if(a={version:{major:o.getByte(),minor:o.getByte()},random:i.util.createBuffer(o.getBytes(32)),session_id:s(o,1),extensions:[]},r?(a.cipher_suite=o.getBytes(2),a.compression_method=o.getByte()):(a.cipher_suites=s(o,2),a.compression_methods=s(o,1)),(c=n-(c-o.length()))>0){for(var u=s(o,2);u.length()>0;)a.extensions.push({type:[u.getByte(),u.getByte()],data:s(u,2)});if(!r)for(var d=0;d<a.extensions.length;++d){var p=a.extensions[d];if(0===p.type[0]&&0===p.type[1])for(var f=s(p.data,2);f.length()>0&&0===f.getByte();)e.session.extensions.server_name.serverNameList.push(s(f,2).getBytes())}}if(e.session.version&&(a.version.major!==e.session.version.major||a.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}});if(r)e.session.cipherSuite=l.getCipherSuite(a.cipher_suite);else for(var g=i.util.createBuffer(a.cipher_suites.bytes());g.length()>0&&(e.session.cipherSuite=l.getCipherSuite(g.getBytes(2)),null===e.session.cipherSuite););if(null===e.session.cipherSuite)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.handshake_failure},cipherSuite:i.util.bytesToHex(a.cipher_suite)});e.session.compressionMethod=r?a.compression_method:l.CompressionMethod.none}return a},l.createSecurityParameters=function(e,t){var n=e.entity===l.ConnectionEnd.client,i=t.random.bytes(),a=n?e.session.sp.client_random:i,r=n?i:l.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:l.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:a,server_random:r}},l.handleServerHello=function(e,t,n){var i=l.parseHelloMessage(e,t,n);if(!e.fail){if(!(i.version.minor<=e.version.minor))return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}});e.version.minor=i.version.minor,e.session.version=e.version;var a=i.session_id.bytes();a.length>0&&a===e.session.id?(e.expect=g,e.session.resuming=!0,e.session.sp.server_random=i.random.bytes()):(e.expect=u,e.session.resuming=!1,l.createSecurityParameters(e,i)),e.session.id=a,e.process()}},l.handleClientHello=function(e,t,n){var a=l.parseHelloMessage(e,t,n);if(!e.fail){var r=a.session_id.bytes(),o=null;if(e.sessionCache&&(null===(o=e.sessionCache.getSession(r))?r="":(o.version.major!==a.version.major||o.version.minor>a.version.minor)&&(o=null,r="")),0===r.length&&(r=i.random.getBytes(32)),e.session.id=r,e.session.clientHelloVersion=a.version,e.session.sp={},o)e.version=e.session.version=o.version,e.session.sp=o.sp;else{for(var s,c=1;c<l.SupportedVersions.length&&!((s=l.SupportedVersions[c]).minor<=a.version.minor);++c);e.version={major:s.major,minor:s.minor},e.session.version=e.version}null!==o?(e.expect=S,e.session.resuming=!0,e.session.sp.client_random=a.random.bytes()):(e.expect=!1!==e.verifyClient?y:b,e.session.resuming=!1,l.createSecurityParameters(e,a)),e.open=!0,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createServerHello(e)})),e.session.resuming?(l.queue(e,l.createRecord(e,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),e.state.pending=l.createConnectionState(e),e.state.current.write=e.state.pending.write,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createFinished(e)}))):(l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificate(e)})),e.fail||(l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createServerKeyExchange(e)})),!1!==e.verifyClient&&l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificateRequest(e)})),l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createServerHelloDone(e)})))),l.flush(e),e.process()}},l.handleCertificate=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var a,r,o=t.fragment,c={certificate_list:s(o,3)},u=[];try{for(;c.certificate_list.length()>0;)a=s(c.certificate_list,3),r=i.asn1.fromDer(a),a=i.pki.certificateFromAsn1(r,!0),u.push(a)}catch(t){return e.error(e,{message:"Could not parse certificate list.",cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate}})}var p=e.entity===l.ConnectionEnd.client;!p&&!0!==e.verifyClient||0!==u.length?0===u.length?e.expect=p?d:b:(p?e.session.serverCertificate=u[0]:e.session.clientCertificate=u[0],l.verifyCertificateChain(e,u)&&(e.expect=p?d:b)):e.error(e,{message:p?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}}),e.process()},l.handleServerKeyExchange=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unsupported_certificate}});e.expect=p,e.process()},l.handleClientKeyExchange=function(e,t,n){if(n<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unsupported_certificate}});var a=t.fragment,r={enc_pre_master_secret:s(a,2).getBytes()},o=null;if(e.getPrivateKey)try{o=e.getPrivateKey(e,e.session.serverCertificate),o=i.pki.privateKeyFromPem(o)}catch(t){e.error(e,{message:"Could not get private key.",cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}})}if(null===o)return e.error(e,{message:"No private key set.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}});try{var c=e.session.sp;c.pre_master_secret=o.decrypt(r.enc_pre_master_secret);var u=e.session.clientHelloVersion;if(u.major!==c.pre_master_secret.charCodeAt(0)||u.minor!==c.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(e){c.pre_master_secret=i.random.getBytes(48)}e.expect=S,null!==e.session.clientCertificate&&(e.expect=w),e.process()},l.handleCertificateRequest=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var i=t.fragment,a={certificate_types:s(i,1),certificate_authorities:s(i,2)};e.session.certificateRequest=a,e.expect=f,e.process()},l.handleCertificateVerify=function(e,t,n){if(n<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var a=t.fragment;a.read-=4;var r=a.bytes();a.read+=4;var o={signature:s(a,2).getBytes()},c=i.util.createBuffer();c.putBuffer(e.session.md5.digest()),c.putBuffer(e.session.sha1.digest()),c=c.getBytes();try{if(!e.session.clientCertificate.publicKey.verify(c,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(r),e.session.sha1.update(r)}catch(t){return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.handshake_failure}})}e.expect=S,e.process()},l.handleServerHelloDone=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.record_overflow}});if(null===e.serverCertificate){var a={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.insufficient_security}},r=e.verify(e,a.alert.description,0,[]);if(!0!==r)return(r||0===r)&&("object"!=typeof r||i.util.isArray(r)?"number"==typeof r&&(a.alert.description=r):(r.message&&(a.message=r.message),r.alert&&(a.alert.description=r.alert))),e.error(e,a)}null!==e.session.certificateRequest&&(t=l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificate(e)}),l.queue(e,t)),t=l.createRecord(e,{type:l.ContentType.handshake,data:l.createClientKeyExchange(e)}),l.queue(e,t),e.expect=v;var o=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificateVerify(e,t)})),l.queue(e,l.createRecord(e,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),e.state.pending=l.createConnectionState(e),e.state.current.write=e.state.pending.write,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createFinished(e)})),e.expect=g,l.flush(e),e.process()};if(null===e.session.certificateRequest||null===e.session.clientCertificate)return o(e,null);l.getClientSignature(e,o)},l.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var n=e.entity===l.ConnectionEnd.client;(e.session.resuming&&n||!e.session.resuming&&!n)&&(e.state.pending=l.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&n||e.session.resuming&&!n)&&(e.state.pending=null),e.expect=n?h:x,e.process()},l.handleFinished=function(e,t,n){var r=t.fragment;r.read-=4;var o=r.bytes();r.read+=4;var s=t.fragment.getBytes();(r=i.util.createBuffer()).putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest());var c=e.entity===l.ConnectionEnd.client,u=c?"server finished":"client finished",d=e.session.sp;if((r=a(d.master_secret,u,r.getBytes(),12)).getBytes()!==s)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.decrypt_error}});e.session.md5.update(o),e.session.sha1.update(o),(e.session.resuming&&c||!e.session.resuming&&!c)&&(l.queue(e,l.createRecord(e,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createFinished(e)}))),e.expect=c?m:C,e.handshaking=!1,++e.handshakes,e.peerCertificate=c?e.session.serverCertificate:e.session.clientCertificate,l.flush(e),e.isConnected=!0,e.connected(e),e.process()},l.handleAlert=function(e,t){var n,i=t.fragment,a={level:i.getByte(),description:i.getByte()};switch(a.description){case l.Alert.Description.close_notify:n="Connection closed.";break;case l.Alert.Description.unexpected_message:n="Unexpected message.";break;case l.Alert.Description.bad_record_mac:n="Bad record MAC.";break;case l.Alert.Description.decryption_failed:n="Decryption failed.";break;case l.Alert.Description.record_overflow:n="Record overflow.";break;case l.Alert.Description.decompression_failure:n="Decompression failed.";break;case l.Alert.Description.handshake_failure:n="Handshake failure.";break;case l.Alert.Description.bad_certificate:n="Bad certificate.";break;case l.Alert.Description.unsupported_certificate:n="Unsupported certificate.";break;case l.Alert.Description.certificate_revoked:n="Certificate revoked.";break;case l.Alert.Description.certificate_expired:n="Certificate expired.";break;case l.Alert.Description.certificate_unknown:n="Certificate unknown.";break;case l.Alert.Description.illegal_parameter:n="Illegal parameter.";break;case l.Alert.Description.unknown_ca:n="Unknown certificate authority.";break;case l.Alert.Description.access_denied:n="Access denied.";break;case l.Alert.Description.decode_error:n="Decode error.";break;case l.Alert.Description.decrypt_error:n="Decrypt error.";break;case l.Alert.Description.export_restriction:n="Export restriction.";break;case l.Alert.Description.protocol_version:n="Unsupported protocol version.";break;case l.Alert.Description.insufficient_security:n="Insufficient security.";break;case l.Alert.Description.internal_error:n="Internal error.";break;case l.Alert.Description.user_canceled:n="User canceled.";break;case l.Alert.Description.no_renegotiation:n="Renegotiation not supported.";break;default:n="Unknown error."}if(a.description===l.Alert.Description.close_notify)return e.close();e.error(e,{message:n,send:!1,origin:e.entity===l.ConnectionEnd.client?"server":"client",alert:a}),e.process()},l.handleHandshake=function(e,t){var n=t.fragment,a=n.getByte(),r=n.getInt24();if(r>n.length())return e.fragmented=t,t.fragment=i.util.createBuffer(),n.read-=4,e.process();e.fragmented=null,n.read-=4;var o=n.bytes(r+4);n.read+=4,a in F[e.entity][e.expect]?(e.entity!==l.ConnectionEnd.server||e.open||e.fail||(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:i.md.md5.create(),sha1:i.md.sha1.create()}),a!==l.HandshakeType.hello_request&&a!==l.HandshakeType.certificate_verify&&a!==l.HandshakeType.finished&&(e.session.md5.update(o),e.session.sha1.update(o)),F[e.entity][e.expect][a](e,t,r)):l.handleUnexpected(e,t)},l.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},l.handleHeartbeat=function(e,t){var n=t.fragment,a=n.getByte(),r=n.getInt16(),o=n.getBytes(r);if(a===l.HeartbeatMessageType.heartbeat_request){if(e.handshaking||r>o.length)return e.process();l.queue(e,l.createRecord(e,{type:l.ContentType.heartbeat,data:l.createHeartbeat(l.HeartbeatMessageType.heartbeat_response,o)})),l.flush(e)}else if(a===l.HeartbeatMessageType.heartbeat_response){if(o!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,i.util.createBuffer(o))}e.process()};var u=1,d=2,p=3,f=4,g=5,h=6,m=7,v=8,y=1,b=2,w=3,S=4,x=5,C=6,T=l.handleUnexpected,E=l.handleChangeCipherSpec,I=l.handleAlert,_=l.handleHandshake,A=l.handleApplicationData,D=l.handleHeartbeat,k=[];k[l.ConnectionEnd.client]=[[T,I,_,T,D],[T,I,_,T,D],[T,I,_,T,D],[T,I,_,T,D],[T,I,_,T,D],[E,I,T,T,D],[T,I,_,T,D],[T,I,_,A,D],[T,I,_,T,D]],k[l.ConnectionEnd.server]=[[T,I,_,T,D],[T,I,_,T,D],[T,I,_,T,D],[T,I,_,T,D],[E,I,T,T,D],[T,I,_,T,D],[T,I,_,A,D],[T,I,_,T,D]];var P=l.handleHelloRequest,B=l.handleServerHello,R=l.handleCertificate,O=l.handleServerKeyExchange,U=l.handleCertificateRequest,N=l.handleServerHelloDone,M=l.handleFinished,F=[];F[l.ConnectionEnd.client]=[[T,T,B,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[P,T,T,T,T,T,T,T,T,T,T,R,O,U,N,T,T,T,T,T,T],[P,T,T,T,T,T,T,T,T,T,T,T,O,U,N,T,T,T,T,T,T],[P,T,T,T,T,T,T,T,T,T,T,T,T,U,N,T,T,T,T,T,T],[P,T,T,T,T,T,T,T,T,T,T,T,T,T,N,T,T,T,T,T,T],[P,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[P,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,M],[P,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[P,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T]];var L=l.handleClientHello,j=l.handleClientKeyExchange,V=l.handleCertificateVerify;F[l.ConnectionEnd.server]=[[T,L,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,R,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,j,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,V,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,M],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T]],l.generateKeys=function(e,t){var n=a,i=t.client_random+t.server_random;e.session.resuming||(t.master_secret=n(t.pre_master_secret,"master secret",i,48).bytes(),t.pre_master_secret=null),i=t.server_random+t.client_random;var r=2*t.mac_key_length+2*t.enc_key_length,o=e.version.major===l.Versions.TLS_1_0.major&&e.version.minor===l.Versions.TLS_1_0.minor;o&&(r+=2*t.fixed_iv_length);var s=n(t.master_secret,"key expansion",i,r),c={client_write_MAC_key:s.getBytes(t.mac_key_length),server_write_MAC_key:s.getBytes(t.mac_key_length),client_write_key:s.getBytes(t.enc_key_length),server_write_key:s.getBytes(t.enc_key_length)};return o&&(c.client_write_IV=s.getBytes(t.fixed_iv_length),c.server_write_IV=s.getBytes(t.fixed_iv_length)),c},l.createConnectionState=function(e){var t=e.entity===l.ConnectionEnd.client,n=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},i={read:n(),write:n()};if(i.read.update=function(e,t){return i.read.cipherFunction(t,i.read)?i.read.compressFunction(e,t,i.read)||e.error(e,{message:"Could not decompress record.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.decompression_failure}}):e.error(e,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_record_mac}}),!e.fail},i.write.update=function(e,t){return i.write.compressFunction(e,t,i.write)?i.write.cipherFunction(t,i.write)||e.error(e,{message:"Could not encrypt record.",send:!1,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}):e.error(e,{message:"Could not compress record.",send:!1,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}),!e.fail},e.session){var a=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(a),a.keys=l.generateKeys(e,a),i.read.macKey=t?a.keys.server_write_MAC_key:a.keys.client_write_MAC_key,i.write.macKey=t?a.keys.client_write_MAC_key:a.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(i,e,a),a.compression_algorithm){case l.CompressionMethod.none:break;case l.CompressionMethod.deflate:i.read.compressFunction=o,i.write.compressFunction=r;break;default:throw new Error("Unsupported compression algorithm.")}}return i},l.createRandom=function(){var e=new Date,t=+e+6e4*e.getTimezoneOffset(),n=i.util.createBuffer();return n.putInt32(t),n.putBytes(i.random.getBytes(28)),n},l.createRecord=function(e,t){return t.data?{type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data}:null},l.createAlert=function(e,t){var n=i.util.createBuffer();return n.putByte(t.level),n.putByte(t.description),l.createRecord(e,{type:l.ContentType.alert,data:n})},l.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=i.util.createBuffer(),n=0;n<e.cipherSuites.length;++n){var a=e.cipherSuites[n];t.putByte(a.id[0]),t.putByte(a.id[1])}var r=t.length(),o=i.util.createBuffer();o.putByte(l.CompressionMethod.none);var s=o.length(),u=i.util.createBuffer();if(e.virtualHost){var d=i.util.createBuffer();d.putByte(0),d.putByte(0);var p=i.util.createBuffer();p.putByte(0),c(p,2,i.util.createBuffer(e.virtualHost));var f=i.util.createBuffer();c(f,2,p),c(d,2,f),u.putBuffer(d)}var g=u.length();g>0&&(g+=2);var h=e.session.id,m=h.length+1+2+4+28+2+r+1+s+g,v=i.util.createBuffer();return v.putByte(l.HandshakeType.client_hello),v.putInt24(m),v.putByte(e.version.major),v.putByte(e.version.minor),v.putBytes(e.session.sp.client_random),c(v,1,i.util.createBuffer(h)),c(v,2,t),c(v,1,o),g>0&&c(v,2,u),v},l.createServerHello=function(e){var t=e.session.id,n=t.length+1+2+4+28+2+1,a=i.util.createBuffer();return a.putByte(l.HandshakeType.server_hello),a.putInt24(n),a.putByte(e.version.major),a.putByte(e.version.minor),a.putBytes(e.session.sp.server_random),c(a,1,i.util.createBuffer(t)),a.putByte(e.session.cipherSuite.id[0]),a.putByte(e.session.cipherSuite.id[1]),a.putByte(e.session.compressionMethod),a},l.createCertificate=function(e){var t,n=e.entity===l.ConnectionEnd.client,a=null;e.getCertificate&&(t=n?e.session.certificateRequest:e.session.extensions.server_name.serverNameList,a=e.getCertificate(e,t));var r=i.util.createBuffer();if(null!==a)try{i.util.isArray(a)||(a=[a]);for(var o=null,s=0;s<a.length;++s){var u=i.pem.decode(a[s])[0];if("CERTIFICATE"!==u.type&&"X509 CERTIFICATE"!==u.type&&"TRUSTED CERTIFICATE"!==u.type){var d=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw d.headerType=u.type,d}if(u.procType&&"ENCRYPTED"===u.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var p=i.util.createBuffer(u.body);null===o&&(o=i.asn1.fromDer(p.bytes(),!1));var f=i.util.createBuffer();c(f,3,p),r.putBuffer(f)}a=i.pki.certificateFromAsn1(o),n?e.session.clientCertificate=a:e.session.serverCertificate=a}catch(t){return e.error(e,{message:"Could not send certificate list.",cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate}})}var g=3+r.length(),h=i.util.createBuffer();return h.putByte(l.HandshakeType.certificate),h.putInt24(g),c(h,3,r),h},l.createClientKeyExchange=function(e){var t=i.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(i.random.getBytes(46));var n=e.session.sp;n.pre_master_secret=t.getBytes();var a=(t=e.session.serverCertificate.publicKey.encrypt(n.pre_master_secret)).length+2,r=i.util.createBuffer();return r.putByte(l.HandshakeType.client_key_exchange),r.putInt24(a),r.putInt16(t.length),r.putBytes(t),r},l.createServerKeyExchange=function(e){return i.util.createBuffer()},l.getClientSignature=function(e,t){var n=i.util.createBuffer();n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest()),n=n.getBytes(),e.getSignature=e.getSignature||function(e,t,n){var a=null;if(e.getPrivateKey)try{a=e.getPrivateKey(e,e.session.clientCertificate),a=i.pki.privateKeyFromPem(a)}catch(t){e.error(e,{message:"Could not get private key.",cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}})}null===a?e.error(e,{message:"No private key set.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}):t=a.sign(t,null),n(e,t)},e.getSignature(e,n,t)},l.createCertificateVerify=function(e,t){var n=t.length+2,a=i.util.createBuffer();return a.putByte(l.HandshakeType.certificate_verify),a.putInt24(n),a.putInt16(t.length),a.putBytes(t),a},l.createCertificateRequest=function(e){var t=i.util.createBuffer();t.putByte(1);var n=i.util.createBuffer();for(var a in e.caStore.certs){var r=e.caStore.certs[a],o=i.pki.distinguishedNameToAsn1(r.subject),s=i.asn1.toDer(o);n.putInt16(s.length()),n.putBuffer(s)}var u=1+t.length()+2+n.length(),d=i.util.createBuffer();return d.putByte(l.HandshakeType.certificate_request),d.putInt24(u),c(d,1,t),c(d,2,n),d},l.createServerHelloDone=function(e){var t=i.util.createBuffer();return t.putByte(l.HandshakeType.server_hello_done),t.putInt24(0),t},l.createChangeCipherSpec=function(){var e=i.util.createBuffer();return e.putByte(1),e},l.createFinished=function(e){var t=i.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var n=e.entity===l.ConnectionEnd.client,r=e.session.sp,o=n?"client finished":"server finished";t=a(r.master_secret,o,t.getBytes(),12);var s=i.util.createBuffer();return s.putByte(l.HandshakeType.finished),s.putInt24(t.length()),s.putBuffer(t),s},l.createHeartbeat=function(e,t,n){void 0===n&&(n=t.length);var a=i.util.createBuffer();a.putByte(e),a.putInt16(n),a.putBytes(t);var r=a.length(),o=Math.max(16,r-n-3);return a.putBytes(i.random.getBytes(o)),a},l.queue=function(e,t){if(t&&(0!==t.fragment.length()||t.type!==l.ContentType.handshake&&t.type!==l.ContentType.alert&&t.type!==l.ContentType.change_cipher_spec)){if(t.type===l.ContentType.handshake){var n=t.fragment.bytes();e.session.md5.update(n),e.session.sha1.update(n),n=null}var a;if(t.fragment.length()<=l.MaxFragment)a=[t];else{a=[];for(var r=t.fragment.bytes();r.length>l.MaxFragment;)a.push(l.createRecord(e,{type:t.type,data:i.util.createBuffer(r.slice(0,l.MaxFragment))})),r=r.slice(l.MaxFragment);r.length>0&&a.push(l.createRecord(e,{type:t.type,data:i.util.createBuffer(r)}))}for(var o=0;o<a.length&&!e.fail;++o){var s=a[o];e.state.current.write.update(e,s)&&e.records.push(s)}}},l.flush=function(e){for(var t=0;t<e.records.length;++t){var n=e.records[t];e.tlsData.putByte(n.type),e.tlsData.putByte(n.version.major),e.tlsData.putByte(n.version.minor),e.tlsData.putInt16(n.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var K=function(e){switch(e){case!0:return!0;case i.pki.certificateError.bad_certificate:return l.Alert.Description.bad_certificate;case i.pki.certificateError.unsupported_certificate:return l.Alert.Description.unsupported_certificate;case i.pki.certificateError.certificate_revoked:return l.Alert.Description.certificate_revoked;case i.pki.certificateError.certificate_expired:return l.Alert.Description.certificate_expired;case i.pki.certificateError.certificate_unknown:return l.Alert.Description.certificate_unknown;case i.pki.certificateError.unknown_ca:return l.Alert.Description.unknown_ca;default:return l.Alert.Description.bad_certificate}};for(var q in l.verifyCertificateChain=function(e,t){try{var n={};for(var a in e.verifyOptions)n[a]=e.verifyOptions[a];n.verify=function(t,n,a){K(t);var r=e.verify(e,t,n,a);if(!0!==r){if("object"==typeof r&&!i.util.isArray(r)){var o=new Error("The application rejected the certificate.");throw o.send=!0,o.alert={level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate},r.message&&(o.message=r.message),r.alert&&(o.alert.description=r.alert),o}r!==t&&(r=function(e){switch(e){case!0:return!0;case l.Alert.Description.bad_certificate:return i.pki.certificateError.bad_certificate;case l.Alert.Description.unsupported_certificate:return i.pki.certificateError.unsupported_certificate;case l.Alert.Description.certificate_revoked:return i.pki.certificateError.certificate_revoked;case l.Alert.Description.certificate_expired:return i.pki.certificateError.certificate_expired;case l.Alert.Description.certificate_unknown:return i.pki.certificateError.certificate_unknown;case l.Alert.Description.unknown_ca:return i.pki.certificateError.unknown_ca;default:return i.pki.certificateError.bad_certificate}}(r))}return r},i.pki.verifyCertificateChain(e.caStore,t,n)}catch(t){var r=t;("object"!=typeof r||i.util.isArray(r))&&(r={send:!0,alert:{level:l.Alert.Level.fatal,description:K(t)}}),"send"in r||(r.send=!0),"alert"in r||(r.alert={level:l.Alert.Level.fatal,description:K(r.error)}),e.error(e,r)}return!e.fail},l.createSessionCache=function(e,t){var n=null;if(e&&e.getSession&&e.setSession&&e.order)n=e;else{for(var a in(n={}).cache=e||{},n.capacity=Math.max(t||100,1),n.order=[],e)n.order.length<=t?n.order.push(a):delete e[a];n.getSession=function(e){var t=null,a=null;if(e?a=i.util.bytesToHex(e):n.order.length>0&&(a=n.order[0]),null!==a&&a in n.cache)for(var r in t=n.cache[a],delete n.cache[a],n.order)if(n.order[r]===a){n.order.splice(r,1);break}return t},n.setSession=function(e,t){if(n.order.length===n.capacity){var a=n.order.shift();delete n.cache[a]}a=i.util.bytesToHex(e),n.order.push(a),n.cache[a]=t}}return n},l.createConnection=function(e){var t;t=e.caStore?i.util.isArray(e.caStore)?i.pki.createCaStore(e.caStore):e.caStore:i.pki.createCaStore();var n=e.cipherSuites||null;if(null===n)for(var a in n=[],l.CipherSuites)n.push(l.CipherSuites[a]);var r=e.server?l.ConnectionEnd.server:l.ConnectionEnd.client,o=e.sessionCache?l.createSessionCache(e.sessionCache):null,s={version:{major:l.Version.major,minor:l.Version.minor},entity:r,sessionId:e.sessionId,caStore:t,sessionCache:o,cipherSuites:n,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(e,t,n,i){return t},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:i.util.createBuffer(),tlsData:i.util.createBuffer(),data:i.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(t,n){n.origin=n.origin||(t.entity===l.ConnectionEnd.client?"client":"server"),n.send&&(l.queue(t,l.createAlert(t,n.alert)),l.flush(t));var i=!1!==n.fatal;i&&(t.fail=!0),e.error(t,n),i&&t.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null,reset:function(e){s.version={major:l.Version.major,minor:l.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=(s.entity,l.ConnectionEnd.client,0),s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(e||void 0===e),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=l.createConnectionState(s)}};return s.reset(),s.handshake=function(e){if(s.entity!==l.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&0===s.handshakes&&(s.fail=!1),s.handshaking=!0;var t=null;(e=e||"").length>0&&(s.sessionCache&&(t=s.sessionCache.getSession(e)),null===t&&(e="")),0===e.length&&s.sessionCache&&null!==(t=s.sessionCache.getSession())&&(e=t.id),s.session={id:e,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:i.md.md5.create(),sha1:i.md.sha1.create()},t&&(s.version=t.version,s.session.sp=t.sp),s.session.sp.client_random=l.createRandom().getBytes(),s.open=!0,l.queue(s,l.createRecord(s,{type:l.ContentType.handshake,data:l.createClientHello(s)})),l.flush(s)}},s.process=function(e){var t=0;return e&&s.input.putBytes(e),s.fail||(null!==s.record&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),null===s.record&&(t=function(e){var t=0,n=e.input,a=n.length();if(a<5)t=5-a;else{e.record={type:n.getByte(),version:{major:n.getByte(),minor:n.getByte()},length:n.getInt16(),fragment:i.util.createBuffer(),ready:!1};var r=e.record.version.major===e.version.major;r&&e.session&&e.session.version&&(r=e.record.version.minor===e.version.minor),r||e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}})}return t}(s)),s.fail||null===s.record||s.record.ready||(t=function(e){var t=0,n=e.input,i=n.length();return i<e.record.length?t=e.record.length-i:(e.record.fragment.putBytes(n.getBytes(e.record.length)),n.compact(),e.state.current.read.update(e,e.record)&&(null!==e.fragmented&&(e.fragmented.type===e.record.type?(e.fragmented.fragment.putBuffer(e.record.fragment),e.record=e.fragmented):e.error(e,{message:"Invalid fragmented record.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unexpected_message}})),e.record.ready=!0)),t}(s)),!s.fail&&null!==s.record&&s.record.ready&&function(e,t){var n=t.type-l.ContentType.change_cipher_spec,i=k[e.entity][e.expect];n in i?i[n](e,t):l.handleUnexpected(e,t)}(s,s.record)),t},s.prepare=function(e){return l.queue(s,l.createRecord(s,{type:l.ContentType.application_data,data:i.util.createBuffer(e)})),l.flush(s)},s.prepareHeartbeatRequest=function(e,t){return e instanceof i.util.ByteBuffer&&(e=e.bytes()),void 0===t&&(t=e.length),s.expectedHeartbeatPayload=e,l.queue(s,l.createRecord(s,{type:l.ContentType.heartbeat,data:l.createHeartbeat(l.HeartbeatMessageType.heartbeat_request,e,t)})),l.flush(s)},s.close=function(e){if(!s.fail&&s.sessionCache&&s.session){var t={id:s.session.id,version:s.session.version,sp:s.session.sp};t.sp.keys=null,s.sessionCache.setSession(t.id,t)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,l.queue(s,l.createAlert(s,{level:l.Alert.Level.warning,description:l.Alert.Description.close_notify})),l.flush(s)),s.closed(s)),s.reset(e)},s},e.exports=i.tls=i.tls||{},l)"function"!=typeof l[q]&&(i.tls[q]=l[q]);i.tls.prf_tls1=a,i.tls.hmac_sha1=function(e,t,n){var a=i.hmac.create();a.start("SHA1",e);var r=i.util.createBuffer();return r.putInt32(t[0]),r.putInt32(t[1]),r.putByte(n.type),r.putByte(n.version.major),r.putByte(n.version.minor),r.putInt16(n.length),r.putBytes(n.fragment.bytes()),a.update(r.getBytes()),a.digest().getBytes()},i.tls.createSessionCache=l.createSessionCache,i.tls.createConnection=l.createConnection},7619:(e,t,n)=>{var i=n(276),a=n(4058),r=e.exports=i.util=i.util||{};function o(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function s(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(r.isArrayBuffer(e)||r.isArrayBufferView(e))if("undefined"!=typeof Buffer&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(e){for(var n=0;n<t.length;++n)this.putByte(t[n])}}else(e instanceof s||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return r.nextTick=process.nextTick,void("function"==typeof setImmediate?r.setImmediate=setImmediate:r.setImmediate=r.nextTick);if("function"==typeof setImmediate)return r.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(r.nextTick=function(e){return setImmediate(e)});if(r.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",t=[];r.setImmediate=function(n){t.push(n),1===t.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(n){if(n.source===window&&n.data===e){n.stopPropagation();var i=t.slice();t.length=0,i.forEach((function(e){e()}))}}),!0)}if("undefined"!=typeof MutationObserver){var n=Date.now(),i=!0,a=document.createElement("div");t=[],new MutationObserver((function(){var e=t.slice();t.length=0,e.forEach((function(e){e()}))})).observe(a,{attributes:!0});var o=r.setImmediate;r.setImmediate=function(e){Date.now()-n>15?(n=Date.now(),o(e)):(t.push(e),1===t.length&&a.setAttribute("a",i=!i))}}r.nextTick=r.setImmediate}(),r.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,r.globalScope=r.isNodejs?n.g:"undefined"==typeof self?window:self,r.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},r.isArrayBufferView=function(e){return e&&r.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},r.ByteBuffer=s,r.ByteStringBuffer=s,r.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},r.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},r.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},r.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},r.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var n=this.data;t>0;)1&t&&(n+=e),(t>>>=1)>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this},r.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},r.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(r.encodeUtf8(e))},r.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},r.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},r.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},r.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},r.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},r.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},r.ByteStringBuffer.prototype.putInt=function(e,t){o(t);var n="";do{t-=8,n+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(n)},r.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},r.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},r.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},r.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},r.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},r.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},r.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},r.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},r.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},r.ByteStringBuffer.prototype.getInt=function(e){o(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},r.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},r.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},r.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},r.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},r.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},r.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},r.ByteStringBuffer.prototype.copy=function(){var e=r.createBuffer(this.data);return e.read=this.read,e},r.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},r.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},r.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},r.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+="0"),e+=n.toString(16)}return e},r.ByteStringBuffer.prototype.toString=function(){return r.decodeUtf8(this.bytes())},r.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var n=r.isArrayBuffer(e),i=r.isArrayBufferView(e);if(n||i)return this.data=n?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},r.DataBuffer.prototype.length=function(){return this.write-this.read},r.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},r.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+t);return i.set(n),this.data=new DataView(i.buffer),this},r.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},r.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this},r.DataBuffer.prototype.putBytes=function(e,t){if(r.isArrayBufferView(e)){var n=(i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-i.byteOffset;return this.accommodate(n),new Uint8Array(this.data.buffer,this.write).set(i),this.write+=n,this}if(r.isArrayBuffer(e)){var i=new Uint8Array(e);return this.accommodate(i.byteLength),new Uint8Array(this.data.buffer).set(i,this.write),this.write+=i.byteLength,this}if(e instanceof r.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&r.isArrayBufferView(e.data))return i=new Uint8Array(e.data.byteLength,e.read,e.length()),this.accommodate(i.byteLength),new Uint8Array(e.data.byteLength,this.write).set(i),this.write+=i.byteLength,this;if(e instanceof r.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"==typeof e){var a;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.hex.decode(e,a,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),a=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.base64.decode(e,a,this.write),this;if("utf8"===t&&(e=r.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.raw.decode(a),this;if("utf16"===t)return this.accommodate(2*e.length),a=new Uint16Array(this.data.buffer,this.write),this.write+=r.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},r.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},r.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},r.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},r.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},r.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},r.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},r.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},r.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},r.DataBuffer.prototype.putInt=function(e,t){o(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},r.DataBuffer.prototype.putSignedInt=function(e,t){return o(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},r.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},r.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},r.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},r.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},r.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},r.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},r.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},r.DataBuffer.prototype.getInt=function(e){o(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},r.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},r.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},r.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},r.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},r.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},r.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},r.DataBuffer.prototype.copy=function(){return new r.DataBuffer(this)},r.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},r.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},r.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},r.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);n<16&&(e+="0"),e+=n.toString(16)}return e},r.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return r.binary.raw.encode(t);if("hex"===e)return r.binary.hex.encode(t);if("base64"===e)return r.binary.base64.encode(t);if("utf8"===e)return r.text.utf8.decode(t);if("utf16"===e)return r.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},r.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=r.encodeUtf8(e)),new r.ByteBuffer(e)},r.fillString=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>>=1)>0&&(e+=e);return n},r.xorBytes=function(e,t,n){for(var i="",a="",r="",o=0,s=0;n>0;--n,++o)a=e.charCodeAt(o)^t.charCodeAt(o),s>=10&&(i+=r,r="",s=0),r+=String.fromCharCode(a),++s;return i+r},r.hexToBytes=function(e){var t="",n=0;for(!0&e.length&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},r.bytesToHex=function(e){return r.createBuffer(e).toHex()},r.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],u="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";r.encode64=function(e,t){for(var n,i,a,r="",o="",s=0;s<e.length;)n=e.charCodeAt(s++),i=e.charCodeAt(s++),a=e.charCodeAt(s++),r+=c.charAt(n>>2),r+=c.charAt((3&n)<<4|i>>4),isNaN(i)?r+="==":(r+=c.charAt((15&i)<<2|a>>6),r+=isNaN(a)?"=":c.charAt(63&a)),t&&r.length>t&&(o+=r.substr(0,t)+"\r\n",r=r.substr(t));return o+r},r.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,n,i,a,r="",o=0;o<e.length;)t=l[e.charCodeAt(o++)-43],n=l[e.charCodeAt(o++)-43],i=l[e.charCodeAt(o++)-43],a=l[e.charCodeAt(o++)-43],r+=String.fromCharCode(t<<2|n>>4),64!==i&&(r+=String.fromCharCode((15&n)<<4|i>>2),64!==a&&(r+=String.fromCharCode((3&i)<<6|a)));return r},r.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},r.decodeUtf8=function(e){return decodeURIComponent(escape(e))},r.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:a.encode,decode:a.decode}},r.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},r.binary.raw.decode=function(e,t,n){var i=t;i||(i=new Uint8Array(e.length));for(var a=n=n||0,r=0;r<e.length;++r)i[a++]=e.charCodeAt(r);return t?a-n:i},r.binary.hex.encode=r.bytesToHex,r.binary.hex.decode=function(e,t,n){var i=t;i||(i=new Uint8Array(Math.ceil(e.length/2)));var a=0,r=n=n||0;for(1&e.length&&(a=1,i[r++]=parseInt(e[0],16));a<e.length;a+=2)i[r++]=parseInt(e.substr(a,2),16);return t?r-n:i},r.binary.base64.encode=function(e,t){for(var n,i,a,r="",o="",s=0;s<e.byteLength;)n=e[s++],i=e[s++],a=e[s++],r+=c.charAt(n>>2),r+=c.charAt((3&n)<<4|i>>4),isNaN(i)?r+="==":(r+=c.charAt((15&i)<<2|a>>6),r+=isNaN(a)?"=":c.charAt(63&a)),t&&r.length>t&&(o+=r.substr(0,t)+"\r\n",r=r.substr(t));return o+r},r.binary.base64.decode=function(e,t,n){var i,a,r,o,s=t;s||(s=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var c=0,u=n=n||0;c<e.length;)i=l[e.charCodeAt(c++)-43],a=l[e.charCodeAt(c++)-43],r=l[e.charCodeAt(c++)-43],o=l[e.charCodeAt(c++)-43],s[u++]=i<<2|a>>4,64!==r&&(s[u++]=(15&a)<<4|r>>2,64!==o&&(s[u++]=(3&r)<<6|o));return t?u-n:s.subarray(0,u)},r.binary.base58.encode=function(e,t){return r.binary.baseN.encode(e,u,t)},r.binary.base58.decode=function(e,t){return r.binary.baseN.decode(e,u,t)},r.text={utf8:{},utf16:{}},r.text.utf8.encode=function(e,t,n){e=r.encodeUtf8(e);var i=t;i||(i=new Uint8Array(e.length));for(var a=n=n||0,o=0;o<e.length;++o)i[a++]=e.charCodeAt(o);return t?a-n:i},r.text.utf8.decode=function(e){return r.decodeUtf8(String.fromCharCode.apply(null,e))},r.text.utf16.encode=function(e,t,n){var i=t;i||(i=new Uint8Array(2*e.length));for(var a=new Uint16Array(i.buffer),r=n=n||0,o=n,s=0;s<e.length;++s)a[o++]=e.charCodeAt(s),r+=2;return t?r-n:i},r.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},r.deflate=function(e,t,n){if(t=r.decode64(e.deflate(r.encode64(t)).rval),n){var i=2;32&t.charCodeAt(1)&&(i=6),t=t.substring(i,t.length-4)}return t},r.inflate=function(e,t,n){var i=e.inflate(r.encode64(t)).rval;return null===i?null:r.decode64(i)};var d=function(e,t,n){if(!e)throw new Error("WebStorage not available.");var i;if(null===n?i=e.removeItem(t):(n=r.encode64(JSON.stringify(n)),i=e.setItem(t,n)),void 0!==i&&!0!==i.rval){var a=new Error(i.error.message);throw a.id=i.error.id,a.name=i.error.name,a}},p=function(e,t){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(t);if(e.init)if(null===n.rval){if(n.error){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(r.decode64(n))),n},f=function(e,t,n,i){var a=p(e,t);null===a&&(a={}),a[n]=i,d(e,t,a)},g=function(e,t,n){var i=p(e,t);return null!==i&&(i=n in i?i[n]:null),i},h=function(e,t,n){var i=p(e,t);if(null!==i&&n in i){delete i[n];var a=!0;for(var r in i){a=!1;break}a&&(i=null),d(e,t,i)}},m=function(e,t){d(e,t,null)},v=function(e,t,n){var i,a=null;void 0===n&&(n=["web","flash"]);var r=!1,o=null;for(var s in n){i=n[s];try{if("flash"===i||"both"===i){if(null===t[0])throw new Error("Flash local storage not available.");a=e.apply(this,t),r="flash"===i}"web"!==i&&"both"!==i||(t[0]=localStorage,a=e.apply(this,t),r=!0)}catch(e){o=e}if(r)break}if(!r)throw o;return a};r.setItem=function(e,t,n,i,a){v(f,arguments,a)},r.getItem=function(e,t,n,i){return v(g,arguments,i)},r.removeItem=function(e,t,n,i){v(h,arguments,i)},r.clearItems=function(e,t,n){v(m,arguments,n)},r.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},r.format=function(e){for(var t,n,i=/%./g,a=0,r=[],o=0;t=i.exec(e);){(n=e.substring(o,i.lastIndex-2)).length>0&&r.push(n),o=i.lastIndex;var s=t[0][1];switch(s){case"s":case"o":a<arguments.length?r.push(arguments[1+a++]):r.push("<?>");break;case"%":r.push("%");break;default:r.push("<%"+s+"?>")}}return r.push(e.substring(o)),r.join("")},r.formatNumber=function(e,t,n,i){var a=e,r=isNaN(t=Math.abs(t))?2:t,o=void 0===n?",":n,s=void 0===i?".":i,c=a<0?"-":"",l=parseInt(a=Math.abs(+a||0).toFixed(r),10)+"",u=l.length>3?l.length%3:0;return c+(u?l.substr(0,u)+s:"")+l.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+s)+(r?o+Math.abs(a-l).toFixed(r).slice(2):"")},r.formatSize=function(e){return e>=1073741824?r.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?r.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?r.formatNumber(e/1024,0)+" KiB":r.formatNumber(e,0)+" bytes"},r.bytesFromIP=function(e){return-1!==e.indexOf(".")?r.bytesFromIPv4(e):-1!==e.indexOf(":")?r.bytesFromIPv6(e):null},r.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=r.createBuffer(),n=0;n<e.length;++n){var i=parseInt(e[n],10);if(isNaN(i))return null;t.putByte(i)}return t.getBytes()},r.bytesFromIPv6=function(e){for(var t=0,n=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++t,!0}))).length+t),i=r.createBuffer(),a=0;a<8;++a)if(e[a]&&0!==e[a].length){var o=r.hexToBytes(e[a]);o.length<2&&i.putByte(0),i.putBytes(o)}else i.fillWithByte(0,n),n=0;return i.getBytes()},r.bytesToIP=function(e){return 4===e.length?r.bytesToIPv4(e):16===e.length?r.bytesToIPv6(e):null},r.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")},r.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],n=[],i=0,a=0;a<e.length;a+=2){for(var o=r.bytesToHex(e[a]+e[a+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var s=n[n.length-1],c=t.length;s&&c===s.end+1?(s.end=c,s.end-s.start>n[i].end-n[i].start&&(i=n.length-1)):n.push({start:c,end:c})}t.push(o)}if(n.length>0){var l=n[i];l.end-l.start>0&&(t.splice(l.start,l.end-l.start+1,""),0===l.start&&t.unshift(""),7===l.end&&t.push(""))}return t.join(":")},r.estimateCores=function(e,t){if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in r&&!e.update)return t(null,r.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return r.cores=navigator.hardwareConcurrency,t(null,r.cores);if("undefined"==typeof Worker)return r.cores=1,t(null,r.cores);if("undefined"==typeof Blob)return r.cores=2,t(null,r.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){for(var t=Date.now(),n=t+4;Date.now()<n;);self.postMessage({st:t,et:n})}))}.toString(),")()"],{type:"application/javascript"}));!function e(i,a,o){if(0===a){var s=Math.floor(i.reduce((function(e,t){return e+t}),0)/i.length);return r.cores=Math.max(1,s),URL.revokeObjectURL(n),t(null,r.cores)}!function(e,t){for(var i=[],a=[],r=0;r<e;++r){var o=new Worker(n);o.addEventListener("message",(function(n){if(a.push(n.data),a.length===e){for(var r=0;r<e;++r)i[r].terminate();t(0,a)}})),i.push(o)}for(r=0;r<e;++r)i[r].postMessage(r)}(o,(function(t,n){i.push(function(e,t){for(var n=[],i=0;i<e;++i)for(var a=t[i],r=n[i]=[],o=0;o<e;++o)if(i!==o){var s=t[o];(a.st>s.st&&a.st<s.et||s.st>a.st&&s.st<a.et)&&r.push(o)}return n.reduce((function(e,t){return Math.max(e,t.length)}),0)}(o,n)),e(i,a-1,o)}))}([],5,16)}},6011:(e,t,n)=>{var i=n(276);n(9504),n(2746),n(9095),n(8106),n(1373),n(6418),n(2385),n(1417),n(5805),n(7619);var a=i.asn1,r=e.exports=i.pki=i.pki||{},o=r.oids,s={};s.CN=o.commonName,s.commonName="CN",s.C=o.countryName,s.countryName="C",s.L=o.localityName,s.localityName="L",s.ST=o.stateOrProvinceName,s.stateOrProvinceName="ST",s.O=o.organizationName,s.organizationName="O",s.OU=o.organizationalUnitName,s.organizationalUnitName="OU",s.E=o.emailAddress,s.emailAddress="E";var c=i.pki.rsa.publicKeyValidator,l={name:"Certificate",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:a.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:a.Class.UNIVERSAL,type:a.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:a.Class.UNIVERSAL,type:a.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:a.Class.UNIVERSAL,type:a.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:a.Class.UNIVERSAL,type:a.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},c,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:a.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:a.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:a.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},u={name:"rsapss",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:a.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:a.Class.UNIVERSAL,type:a.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:a.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:a.Class.UNIVERSAL,type:a.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},d={name:"CertificationRequestInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},c,{name:"CertificationRequestInfo.attributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0}]}]}]},p={name:"CertificationRequest",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[d,{name:"CertificationRequest.signatureAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:a.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function f(e,t){"string"==typeof t&&(t={shortName:t});for(var n,i=null,a=0;null===i&&a<e.attributes.length;++a)n=e.attributes[a],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(i=n);return i}r.RDNAttributesAsArray=function(e,t){for(var n,i,r,c=[],l=0;l<e.value.length;++l){n=e.value[l];for(var u=0;u<n.value.length;++u)r={},i=n.value[u],r.type=a.derToOid(i.value[0].value),r.value=i.value[1].value,r.valueTagClass=i.value[1].type,r.type in o&&(r.name=o[r.type],r.name in s&&(r.shortName=s[r.name])),t&&(t.update(r.type),t.update(r.value)),c.push(r)}return c},r.CRIAttributesAsArray=function(e){for(var t=[],n=0;n<e.length;++n)for(var i=e[n],c=a.derToOid(i.value[0].value),l=i.value[1].value,u=0;u<l.length;++u){var d={};if(d.type=c,d.value=l[u].value,d.valueTagClass=l[u].type,d.type in o&&(d.name=o[d.type],d.name in s&&(d.shortName=s[d.name])),d.type===o.extensionRequest){d.extensions=[];for(var p=0;p<d.value.length;++p)d.extensions.push(r.certificateExtensionFromAsn1(d.value[p]))}t.push(d)}return t};var g=function(e,t,n){var i={};if(e!==o["RSASSA-PSS"])return i;n&&(i={hash:{algorithmOid:o.sha1},mgf:{algorithmOid:o.mgf1,hash:{algorithmOid:o.sha1}},saltLength:20});var r={},s=[];if(!a.validate(t,u,r,s)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=s,c}return void 0!==r.hashOid&&(i.hash=i.hash||{},i.hash.algorithmOid=a.derToOid(r.hashOid)),void 0!==r.maskGenOid&&(i.mgf=i.mgf||{},i.mgf.algorithmOid=a.derToOid(r.maskGenOid),i.mgf.hash=i.mgf.hash||{},i.mgf.hash.algorithmOid=a.derToOid(r.maskGenHashOid)),void 0!==r.saltLength&&(i.saltLength=r.saltLength.charCodeAt(0)),i},h=function(e){switch(o[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return i.md.sha1.create();case"md5WithRSAEncryption":return i.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return i.md.sha256.create();case"sha384WithRSAEncryption":return i.md.sha384.create();case"sha512WithRSAEncryption":return i.md.sha512.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},m=function(e){var t,n=e.certificate;switch(n.signatureOid){case o.sha1WithRSAEncryption:case o.sha1WithRSASignature:break;case o["RSASSA-PSS"]:var a,r,s;if(void 0===(a=o[n.signatureParameters.mgf.hash.algorithmOid])||void 0===i.md[a])throw(s=new Error("Unsupported MGF hash function.")).oid=n.signatureParameters.mgf.hash.algorithmOid,s.name=a,s;if(void 0===(r=o[n.signatureParameters.mgf.algorithmOid])||void 0===i.mgf[r])throw(s=new Error("Unsupported MGF function.")).oid=n.signatureParameters.mgf.algorithmOid,s.name=r,s;if(r=i.mgf[r].create(i.md[a].create()),void 0===(a=o[n.signatureParameters.hash.algorithmOid])||void 0===i.md[a])throw(s=new Error("Unsupported RSASSA-PSS hash function.")).oid=n.signatureParameters.hash.algorithmOid,s.name=a,s;t=i.pss.create(i.md[a].create(),r,n.signatureParameters.saltLength)}return n.publicKey.verify(e.md.digest().getBytes(),e.signature,t)};function v(e){for(var t,n,r=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),o=e.attributes,s=0;s<o.length;++s){var c=(t=o[s]).value,l=a.Type.PRINTABLESTRING;"valueTagClass"in t&&(l=t.valueTagClass)===a.Type.UTF8&&(c=i.util.encodeUtf8(c)),n=a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.type).getBytes()),a.create(a.Class.UNIVERSAL,l,!1,c)])]),r.value.push(n)}return r}function y(e){for(var t,n=0;n<e.length;++n){if(void 0===(t=e[n]).name&&(t.type&&t.type in r.oids?t.name=r.oids[t.type]:t.shortName&&t.shortName in s&&(t.name=r.oids[s[t.shortName]])),void 0===t.type){if(!t.name||!(t.name in r.oids))throw(c=new Error("Attribute type not specified.")).attribute=t,c;t.type=r.oids[t.name]}if(void 0===t.shortName&&t.name&&t.name in s&&(t.shortName=s[t.name]),t.type===o.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=a.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(r.certificateExtensionToAsn1(b(t.extensions[i])))}var c;if(void 0===t.value)throw(c=new Error("Attribute value not specified.")).attribute=t,c}}function b(e,t){if(t=t||{},void 0===e.name&&e.id&&e.id in r.oids&&(e.name=r.oids[e.id]),void 0===e.id){if(!e.name||!(e.name in r.oids))throw(S=new Error("Extension ID not specified.")).extension=e,S;e.id=r.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var n=0,s=0,c=0;e.digitalSignature&&(s|=128,n=7),e.nonRepudiation&&(s|=64,n=6),e.keyEncipherment&&(s|=32,n=5),e.dataEncipherment&&(s|=16,n=4),e.keyAgreement&&(s|=8,n=3),e.keyCertSign&&(s|=4,n=2),e.cRLSign&&(s|=2,n=1),e.encipherOnly&&(s|=1,n=0),e.decipherOnly&&(c|=128,n=7);var l=String.fromCharCode(n);0!==c?l+=String.fromCharCode(s)+String.fromCharCode(c):0!==s&&(l+=String.fromCharCode(s)),e.value=a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,l)}else if("basicConstraints"===e.name)e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(a.create(a.Class.UNIVERSAL,a.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);var u=e.value.value;for(var d in e)!0===e[d]&&(d in o?u.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(o[d]).getBytes())):-1!==d.indexOf(".")&&u.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(d).getBytes())))}else if("nsCertType"===e.name)n=0,s=0,e.client&&(s|=128,n=7),e.server&&(s|=64,n=6),e.email&&(s|=32,n=5),e.objsign&&(s|=16,n=4),e.reserved&&(s|=8,n=3),e.sslCA&&(s|=4,n=2),e.emailCA&&(s|=2,n=1),e.objCA&&(s|=1,n=0),l=String.fromCharCode(n),0!==s&&(l+=String.fromCharCode(s)),e.value=a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,l);else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);for(var p=0;p<e.altNames.length;++p){if(l=(y=e.altNames[p]).value,7===y.type&&y.ip){if(null===(l=i.util.bytesFromIP(y.ip)))throw(S=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,S}else 8===y.type&&(l=y.oid?a.oidToDer(a.oidToDer(y.oid)):a.oidToDer(l));e.value.value.push(a.create(a.Class.CONTEXT_SPECIFIC,y.type,!1,l))}}else if("nsComment"===e.name&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=a.create(a.Class.UNIVERSAL,a.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,f.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){if(e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),u=e.value.value,e.keyIdentifier){var g=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;u.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!1,g))}if(e.authorityCertIssuer){var h=[a.create(a.Class.CONTEXT_SPECIFIC,4,!0,[v(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])];u.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,h))}if(e.serialNumber){var m=i.util.hexToBytes(!0===e.serialNumber?t.cert.serialNumber:e.serialNumber);u.push(a.create(a.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if("cRLDistributionPoints"===e.name){e.value=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),u=e.value.value;var y,b=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),w=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[]);for(p=0;p<e.altNames.length;++p){if(l=(y=e.altNames[p]).value,7===y.type&&y.ip){if(null===(l=i.util.bytesFromIP(y.ip)))throw(S=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,S}else 8===y.type&&(l=y.oid?a.oidToDer(a.oidToDer(y.oid)):a.oidToDer(l));w.value.push(a.create(a.Class.CONTEXT_SPECIFIC,y.type,!1,l))}b.value.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[w])),u.push(b)}var S;if(void 0===e.value)throw(S=new Error("Extension value not specified.")).extension=e,S;return e}function w(e,t){if(e===o["RSASSA-PSS"]){var n=[];return void 0!==t.hash.algorithmOid&&n.push(a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.hash.algorithmOid).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&n.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.mgf.algorithmOid).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(t.mgf.hash.algorithmOid).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&n.push(a.create(a.Class.CONTEXT_SPECIFIC,2,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(t.saltLength).getBytes())])),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,n)}return a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")}function S(e){var t=a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var n=e.attributes,r=0;r<n.length;++r){var o=n[r],s=o.value,c=a.Type.UTF8;"valueTagClass"in o&&(c=o.valueTagClass),c===a.Type.UTF8&&(s=i.util.encodeUtf8(s));var l=!1;"valueConstructed"in o&&(l=o.valueConstructed);var u=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(o.type).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SET,!0,[a.create(a.Class.UNIVERSAL,c,l,s)])]);t.value.push(u)}return t}r.certificateFromPem=function(e,t,n){var o=i.pem.decode(e)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var s=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw s.headerType=o.type,s}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=a.fromDer(o.body,n);return r.certificateFromAsn1(c,t)},r.certificateToPem=function(e,t){var n={type:"CERTIFICATE",body:a.toDer(r.certificateToAsn1(e)).getBytes()};return i.pem.encode(n,{maxline:t})},r.publicKeyFromPem=function(e){var t=i.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=t.type,n}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=a.fromDer(t.body);return r.publicKeyFromAsn1(o)},r.publicKeyToPem=function(e,t){var n={type:"PUBLIC KEY",body:a.toDer(r.publicKeyToAsn1(e)).getBytes()};return i.pem.encode(n,{maxline:t})},r.publicKeyToRSAPublicKeyPem=function(e,t){var n={type:"RSA PUBLIC KEY",body:a.toDer(r.publicKeyToRSAPublicKey(e)).getBytes()};return i.pem.encode(n,{maxline:t})},r.getPublicKeyFingerprint=function(e,t){var n,o=(t=t||{}).md||i.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":n=a.toDer(r.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":n=a.toDer(r.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}o.start(),o.update(n);var s=o.digest();if("hex"===t.encoding){var c=s.toHex();return t.delimiter?c.match(/.{2}/g).join(t.delimiter):c}if("binary"===t.encoding)return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return s},r.certificationRequestFromPem=function(e,t,n){var o=i.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==o.type){var s=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw s.headerType=o.type,s}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var c=a.fromDer(o.body,n);return r.certificationRequestFromAsn1(c,t)},r.certificationRequestToPem=function(e,t){var n={type:"CERTIFICATE REQUEST",body:a.toDer(r.certificationRequestToAsn1(e)).getBytes()};return i.pem.encode(n,{maxline:t})},r.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return f(e.issuer,t)},e.issuer.addField=function(t){y([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return f(e.subject,t)},e.subject.addField=function(t){y([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,n){y(t),e.subject.attributes=t,delete e.subject.uniqueId,n&&(e.subject.uniqueId=n),e.subject.hash=null},e.setIssuer=function(t,n){y(t),e.issuer.attributes=t,delete e.issuer.uniqueId,n&&(e.issuer.uniqueId=n),e.issuer.hash=null},e.setExtensions=function(t){for(var n=0;n<t.length;++n)b(t[n],{cert:e});e.extensions=t},e.getExtension=function(t){"string"==typeof t&&(t={name:t});for(var n,i=null,a=0;null===i&&a<e.extensions.length;++a)n=e.extensions[a],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(i=n);return i},e.sign=function(t,n){e.md=n||i.md.sha1.create();var s=o[e.md.algorithm+"WithRSAEncryption"];if(!s){var c=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw c.algorithm=e.md.algorithm,c}e.signatureOid=e.siginfo.algorithmOid=s,e.tbsCertificate=r.getTBSCertificate(e);var l=a.toDer(e.tbsCertificate);e.md.update(l.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var n=!1;if(!e.issued(t)){var i=t.issuer,o=e.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=o.attributes,s.actualIssuer=i.attributes,s}var c=t.md;if(null===c){c=h({signatureOid:t.signatureOid,type:"certificate"});var l=t.tbsCertificate||r.getTBSCertificate(t),u=a.toDer(l);c.update(u.getBytes())}return null!==c&&(n=m({certificate:e,md:c,signature:t.signature})),n},e.isIssuer=function(t){var n=!1,i=e.issuer,a=t.subject;if(i.hash&&a.hash)n=i.hash===a.hash;else if(i.attributes.length===a.attributes.length){var r,o;n=!0;for(var s=0;n&&s<i.attributes.length;++s)r=i.attributes[s],o=a.attributes[s],r.type===o.type&&r.value===o.value||(n=!1)}return n},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return r.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=o.subjectKeyIdentifier,n=0;n<e.extensions.length;++n){var a=e.extensions[n];if(a.id===t){var r=e.generateSubjectKeyIdentifier().getBytes();return i.util.hexToBytes(a.subjectKeyIdentifier)===r}}return!1},e},r.certificateFromAsn1=function(e,t){var n={},o=[];if(!a.validate(e,l,n,o)){var s=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw s.errors=o,s}if(a.derToOid(n.publicKeyOid)!==r.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=r.createCertificate();c.version=n.certVersion?n.certVersion.charCodeAt(0):0;var u=i.util.createBuffer(n.certSerialNumber);c.serialNumber=u.toHex(),c.signatureOid=i.asn1.derToOid(n.certSignatureOid),c.signatureParameters=g(c.signatureOid,n.certSignatureParams,!0),c.siginfo.algorithmOid=i.asn1.derToOid(n.certinfoSignatureOid),c.siginfo.parameters=g(c.siginfo.algorithmOid,n.certinfoSignatureParams,!1),c.signature=n.certSignature;var d=[];if(void 0!==n.certValidity1UTCTime&&d.push(a.utcTimeToDate(n.certValidity1UTCTime)),void 0!==n.certValidity2GeneralizedTime&&d.push(a.generalizedTimeToDate(n.certValidity2GeneralizedTime)),void 0!==n.certValidity3UTCTime&&d.push(a.utcTimeToDate(n.certValidity3UTCTime)),void 0!==n.certValidity4GeneralizedTime&&d.push(a.generalizedTimeToDate(n.certValidity4GeneralizedTime)),d.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(d.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(c.validity.notBefore=d[0],c.validity.notAfter=d[1],c.tbsCertificate=n.tbsCertificate,t){c.md=h({signatureOid:c.signatureOid,type:"certificate"});var p=a.toDer(c.tbsCertificate);c.md.update(p.getBytes())}var m=i.md.sha1.create(),v=a.toDer(n.certIssuer);m.update(v.getBytes()),c.issuer.getField=function(e){return f(c.issuer,e)},c.issuer.addField=function(e){y([e]),c.issuer.attributes.push(e)},c.issuer.attributes=r.RDNAttributesAsArray(n.certIssuer),n.certIssuerUniqueId&&(c.issuer.uniqueId=n.certIssuerUniqueId),c.issuer.hash=m.digest().toHex();var b=i.md.sha1.create(),w=a.toDer(n.certSubject);return b.update(w.getBytes()),c.subject.getField=function(e){return f(c.subject,e)},c.subject.addField=function(e){y([e]),c.subject.attributes.push(e)},c.subject.attributes=r.RDNAttributesAsArray(n.certSubject),n.certSubjectUniqueId&&(c.subject.uniqueId=n.certSubjectUniqueId),c.subject.hash=b.digest().toHex(),n.certExtensions?c.extensions=r.certificateExtensionsFromAsn1(n.certExtensions):c.extensions=[],c.publicKey=r.publicKeyFromAsn1(n.subjectPublicKeyInfo),c},r.certificateExtensionsFromAsn1=function(e){for(var t=[],n=0;n<e.value.length;++n)for(var i=e.value[n],a=0;a<i.value.length;++a)t.push(r.certificateExtensionFromAsn1(i.value[a]));return t},r.certificateExtensionFromAsn1=function(e){var t={};if(t.id=a.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===a.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in o)if(t.name=o[t.id],"keyUsage"===t.name){var n=0,r=0;(c=a.fromDer(t.value)).value.length>1&&(n=c.value.charCodeAt(1),r=c.value.length>2?c.value.charCodeAt(2):0),t.digitalSignature=!(128&~n),t.nonRepudiation=!(64&~n),t.keyEncipherment=!(32&~n),t.dataEncipherment=!(16&~n),t.keyAgreement=!(8&~n),t.keyCertSign=!(4&~n),t.cRLSign=!(2&~n),t.encipherOnly=!(1&~n),t.decipherOnly=!(128&~r)}else if("basicConstraints"===t.name){(c=a.fromDer(t.value)).value.length>0&&c.value[0].type===a.Type.BOOLEAN?t.cA=0!==c.value[0].value.charCodeAt(0):t.cA=!1;var s=null;c.value.length>0&&c.value[0].type===a.Type.INTEGER?s=c.value[0].value:c.value.length>1&&(s=c.value[1].value),null!==s&&(t.pathLenConstraint=a.derToInteger(s))}else if("extKeyUsage"===t.name)for(var c=a.fromDer(t.value),l=0;l<c.value.length;++l){var u=a.derToOid(c.value[l].value);u in o?t[o[u]]=!0:t[u]=!0}else if("nsCertType"===t.name)n=0,(c=a.fromDer(t.value)).value.length>1&&(n=c.value.charCodeAt(1)),t.client=!(128&~n),t.server=!(64&~n),t.email=!(32&~n),t.objsign=!(16&~n),t.reserved=!(8&~n),t.sslCA=!(4&~n),t.emailCA=!(2&~n),t.objCA=!(1&~n);else if("subjectAltName"===t.name||"issuerAltName"===t.name){var d;t.altNames=[],c=a.fromDer(t.value);for(var p=0;p<c.value.length;++p){var f={type:(d=c.value[p]).type,value:d.value};switch(t.altNames.push(f),d.type){case 1:case 2:case 6:break;case 7:f.ip=i.util.bytesToIP(d.value);break;case 8:f.oid=a.derToOid(d.value)}}}else"subjectKeyIdentifier"===t.name&&(c=a.fromDer(t.value),t.subjectKeyIdentifier=i.util.bytesToHex(c.value));return t},r.certificationRequestFromAsn1=function(e,t){var n={},o=[];if(!a.validate(e,p,n,o)){var s=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw s.errors=o,s}if(a.derToOid(n.publicKeyOid)!==r.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=r.createCertificationRequest();if(c.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,c.signatureOid=i.asn1.derToOid(n.csrSignatureOid),c.signatureParameters=g(c.signatureOid,n.csrSignatureParams,!0),c.siginfo.algorithmOid=i.asn1.derToOid(n.csrSignatureOid),c.siginfo.parameters=g(c.siginfo.algorithmOid,n.csrSignatureParams,!1),c.signature=n.csrSignature,c.certificationRequestInfo=n.certificationRequestInfo,t){c.md=h({signatureOid:c.signatureOid,type:"certification request"});var l=a.toDer(c.certificationRequestInfo);c.md.update(l.getBytes())}var u=i.md.sha1.create();return c.subject.getField=function(e){return f(c.subject,e)},c.subject.addField=function(e){y([e]),c.subject.attributes.push(e)},c.subject.attributes=r.RDNAttributesAsArray(n.certificationRequestInfoSubject,u),c.subject.hash=u.digest().toHex(),c.publicKey=r.publicKeyFromAsn1(n.subjectPublicKeyInfo),c.getAttribute=function(e){return f(c,e)},c.addAttribute=function(e){y([e]),c.attributes.push(e)},c.attributes=r.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),c},r.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return f(e.subject,t)},e.subject.addField=function(t){y([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return f(e,t)},e.addAttribute=function(t){y([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){y(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){y(t),e.attributes=t},e.sign=function(t,n){e.md=n||i.md.sha1.create();var s=o[e.md.algorithm+"WithRSAEncryption"];if(!s){var c=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw c.algorithm=e.md.algorithm,c}e.signatureOid=e.siginfo.algorithmOid=s,e.certificationRequestInfo=r.getCertificationRequestInfo(e);var l=a.toDer(e.certificationRequestInfo);e.md.update(l.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,n=e.md;if(null===n){n=h({signatureOid:e.signatureOid,type:"certification request"});var i=e.certificationRequestInfo||r.getCertificationRequestInfo(e),o=a.toDer(i);n.update(o.getBytes())}return null!==n&&(t=m({certificate:e,md:n,signature:e.signature})),t},e};var x=new Date("1950-01-01T00:00:00Z"),C=new Date("2050-01-01T00:00:00Z");function T(e){return e>=x&&e<C?a.create(a.Class.UNIVERSAL,a.Type.UTCTIME,!1,a.dateToUtcTime(e)):a.create(a.Class.UNIVERSAL,a.Type.GENERALIZEDTIME,!1,a.dateToGeneralizedTime(e))}r.getTBSCertificate=function(e){var t=T(e.validity.notBefore),n=T(e.validity.notAfter),o=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.CONTEXT_SPECIFIC,0,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes())]),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,i.util.hexToBytes(e.serialNumber)),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.siginfo.algorithmOid).getBytes()),w(e.siginfo.algorithmOid,e.siginfo.parameters)]),v(e.issuer),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[t,n]),v(e.subject),r.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&o.value.push(a.create(a.Class.CONTEXT_SPECIFIC,1,!0,[a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&o.value.push(a.create(a.Class.CONTEXT_SPECIFIC,2,!0,[a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&o.value.push(r.certificateExtensionsToAsn1(e.extensions)),o},r.getCertificationRequestInfo=function(e){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(e.version).getBytes()),v(e.subject),r.publicKeyToAsn1(e.publicKey),S(e)])},r.distinguishedNameToAsn1=function(e){return v(e)},r.certificateToAsn1=function(e){var t=e.tbsCertificate||r.getTBSCertificate(e);return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[t,a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.signatureOid).getBytes()),w(e.signatureOid,e.signatureParameters)]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},r.certificateExtensionsToAsn1=function(e){var t=a.create(a.Class.CONTEXT_SPECIFIC,3,!0,[]),n=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);t.value.push(n);for(var i=0;i<e.length;++i)n.value.push(r.certificateExtensionToAsn1(e[i]));return t},r.certificateExtensionToAsn1=function(e){var t=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);t.value.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.id).getBytes())),e.critical&&t.value.push(a.create(a.Class.UNIVERSAL,a.Type.BOOLEAN,!1,String.fromCharCode(255)));var n=e.value;return"string"!=typeof e.value&&(n=a.toDer(n).getBytes()),t.value.push(a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,n)),t},r.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||r.getCertificationRequestInfo(e);return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[t,a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(e.signatureOid).getBytes()),w(e.signatureOid,e.signatureParameters)]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},r.createCaStore=function(e){var t={certs:{}};function n(e){return o(e),t.certs[e.hash]||null}function o(e){if(!e.hash){var t=i.md.sha1.create();e.attributes=r.RDNAttributesAsArray(v(e),t),e.hash=t.digest().toHex()}}if(t.getIssuer=function(e){return n(e.issuer)},t.addCertificate=function(e){if("string"==typeof e&&(e=i.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))if(e.subject.hash in t.certs){var n=t.certs[e.subject.hash];i.util.isArray(n)||(n=[n]),n.push(e),t.certs[e.subject.hash]=n}else t.certs[e.subject.hash]=e},t.hasCertificate=function(e){"string"==typeof e&&(e=i.pki.certificateFromPem(e));var t=n(e.subject);if(!t)return!1;i.util.isArray(t)||(t=[t]);for(var o=a.toDer(r.certificateToAsn1(e)).getBytes(),s=0;s<t.length;++s)if(o===a.toDer(r.certificateToAsn1(t[s])).getBytes())return!0;return!1},t.listAllCertificates=function(){var e=[];for(var n in t.certs)if(t.certs.hasOwnProperty(n)){var a=t.certs[n];if(i.util.isArray(a))for(var r=0;r<a.length;++r)e.push(a[r]);else e.push(a)}return e},t.removeCertificate=function(e){var s;if("string"==typeof e&&(e=i.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))return null;var c=n(e.subject);if(!i.util.isArray(c))return s=t.certs[e.subject.hash],delete t.certs[e.subject.hash],s;for(var l=a.toDer(r.certificateToAsn1(e)).getBytes(),u=0;u<c.length;++u)l===a.toDer(r.certificateToAsn1(c[u])).getBytes()&&(s=c[u],c.splice(u,1));return 0===c.length&&delete t.certs[e.subject.hash],s},e)for(var s=0;s<e.length;++s){var c=e[s];t.addCertificate(c)}return t},r.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},r.verifyCertificateChain=function(e,t,n){"function"==typeof n&&(n={verify:n}),n=n||{};var a=(t=t.slice(0)).slice(0),o=n.validityCheckDate;void 0===o&&(o=new Date);var s=!0,c=null,l=0;do{var u=t.shift(),d=null,p=!1;if(o&&(o<u.validity.notBefore||o>u.validity.notAfter)&&(c={message:"Certificate is not valid yet or has expired.",error:r.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:o}),null===c){if(null===(d=t[0]||e.getIssuer(u))&&u.isIssuer(u)&&(p=!0,d=u),d){var f=d;i.util.isArray(f)||(f=[f]);for(var g=!1;!g&&f.length>0;){d=f.shift();try{g=d.verify(u)}catch(e){}}g||(c={message:"Certificate signature is invalid.",error:r.certificateError.bad_certificate})}null!==c||d&&!p||e.hasCertificate(u)||(c={message:"Certificate is not trusted.",error:r.certificateError.unknown_ca})}if(null===c&&d&&!u.isIssuer(d)&&(c={message:"Certificate issuer is invalid.",error:r.certificateError.bad_certificate}),null===c)for(var h={keyUsage:!0,basicConstraints:!0},m=0;null===c&&m<u.extensions.length;++m){var v=u.extensions[m];v.critical&&!(v.name in h)&&(c={message:"Certificate has an unsupported critical extension.",error:r.certificateError.unsupported_certificate})}if(null===c&&(!s||0===t.length&&(!d||p))){var y=u.getExtension("basicConstraints"),b=u.getExtension("keyUsage");null!==b&&(b.keyCertSign&&null!==y||(c={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:r.certificateError.bad_certificate})),null!==c||null===y||y.cA||(c={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:r.certificateError.bad_certificate}),null===c&&null!==b&&"pathLenConstraint"in y&&l-1>y.pathLenConstraint&&(c={message:"Certificate basicConstraints pathLenConstraint violated.",error:r.certificateError.bad_certificate})}var w=null===c||c.error,S=n.verify?n.verify(w,l,a):w;if(!0!==S)throw!0===w&&(c={message:"The application rejected the certificate.",error:r.certificateError.bad_certificate}),(S||0===S)&&("object"!=typeof S||i.util.isArray(S)?"string"==typeof S&&(c.error=S):(S.message&&(c.message=S.message),S.error&&(c.error=S.error))),c;c=null,s=!1,++l}while(t.length>0);return!0}},165:(e,t,n)=>{"use strict";const i=n(4693);e.exports=e=>{if(!Number.isInteger(e)&&e!==1/0||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");const t=new i;let n=0;const a=async(e,i,...a)=>{n++;const r=(async()=>e(...a))();i(r);try{await r}catch{}n--,t.size>0&&t.dequeue()()},r=(i,...r)=>new Promise((o=>{((i,r,...o)=>{t.enqueue(a.bind(null,i,r,...o)),(async()=>{await Promise.resolve(),n<e&&t.size>0&&t.dequeue()()})()})(i,o,...r)}));return Object.defineProperties(r,{activeCount:{get:()=>n},pendingCount:{get:()=>t.size},clearQueue:{value:()=>{t.clear()}}}),r}},7975:e=>{"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,i="",a=0,r=-1,o=0,s=0;s<=e.length;++s){if(s<e.length)n=e.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(r===s-1||1===o);else if(r!==s-1&&2===o){if(i.length<2||2!==a||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var c=i.lastIndexOf("/");if(c!==i.length-1){-1===c?(i="",a=0):a=(i=i.slice(0,c)).length-1-i.lastIndexOf("/"),r=s,o=0;continue}}else if(2===i.length||1===i.length){i="",a=0,r=s,o=0;continue}t&&(i.length>0?i+="/..":i="..",a=2)}else i.length>0?i+="/"+e.slice(r+1,s):i=e.slice(r+1,s),a=s-r-1;r=s,o=0}else 46===n&&-1!==o?++o:o=-1}return i}var i={resolve:function(){for(var e,i="",a=!1,r=arguments.length-1;r>=-1&&!a;r--){var o;r>=0?o=arguments[r]:(void 0===e&&(e=process.cwd()),o=e),t(o),0!==o.length&&(i=o+"/"+i,a=47===o.charCodeAt(0))}return i=n(i,!a),a?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(e){if(t(e),0===e.length)return".";var i=47===e.charCodeAt(0),a=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!i)).length||i||(e="."),e.length>0&&a&&(e+="/"),i?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var a=arguments[n];t(a),a.length>0&&(void 0===e?e=a:e+="/"+a)}return void 0===e?".":i.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=i.resolve(e))===(n=i.resolve(n)))return"";for(var a=1;a<e.length&&47===e.charCodeAt(a);++a);for(var r=e.length,o=r-a,s=1;s<n.length&&47===n.charCodeAt(s);++s);for(var c=n.length-s,l=o<c?o:c,u=-1,d=0;d<=l;++d){if(d===l){if(c>l){if(47===n.charCodeAt(s+d))return n.slice(s+d+1);if(0===d)return n.slice(s+d)}else o>l&&(47===e.charCodeAt(a+d)?u=d:0===d&&(u=0));break}var p=e.charCodeAt(a+d);if(p!==n.charCodeAt(s+d))break;47===p&&(u=d)}var f="";for(d=a+u+1;d<=r;++d)d!==r&&47!==e.charCodeAt(d)||(0===f.length?f+="..":f+="/..");return f.length>0?f+n.slice(s+u):(s+=u,47===n.charCodeAt(s)&&++s,n.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),i=47===n,a=-1,r=!0,o=e.length-1;o>=1;--o)if(47===(n=e.charCodeAt(o))){if(!r){a=o;break}}else r=!1;return-1===a?i?"/":".":i&&1===a?"//":e.slice(0,a)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var i,a=0,r=-1,o=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var s=n.length-1,c=-1;for(i=e.length-1;i>=0;--i){var l=e.charCodeAt(i);if(47===l){if(!o){a=i+1;break}}else-1===c&&(o=!1,c=i+1),s>=0&&(l===n.charCodeAt(s)?-1==--s&&(r=i):(s=-1,r=c))}return a===r?r=c:-1===r&&(r=e.length),e.slice(a,r)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!o){a=i+1;break}}else-1===r&&(o=!1,r=i+1);return-1===r?"":e.slice(a,r)},extname:function(e){t(e);for(var n=-1,i=0,a=-1,r=!0,o=0,s=e.length-1;s>=0;--s){var c=e.charCodeAt(s);if(47!==c)-1===a&&(r=!1,a=s+1),46===c?-1===n?n=s:1!==o&&(o=1):-1!==n&&(o=-1);else if(!r){i=s+1;break}}return-1===n||-1===a||0===o||1===o&&n===a-1&&n===i+1?"":e.slice(n,a)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+i:n+"/"+i:i}(0,e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var i,a=e.charCodeAt(0),r=47===a;r?(n.root="/",i=1):i=0;for(var o=-1,s=0,c=-1,l=!0,u=e.length-1,d=0;u>=i;--u)if(47!==(a=e.charCodeAt(u)))-1===c&&(l=!1,c=u+1),46===a?-1===o?o=u:1!==d&&(d=1):-1!==o&&(d=-1);else if(!l){s=u+1;break}return-1===o||-1===c||0===d||1===d&&o===c-1&&o===s+1?-1!==c&&(n.base=n.name=0===s&&r?e.slice(1,c):e.slice(s,c)):(0===s&&r?(n.name=e.slice(1,o),n.base=e.slice(1,c)):(n.name=e.slice(s,o),n.base=e.slice(s,c)),n.ext=e.slice(o,c)),s>0?n.dir=e.slice(0,s-1):r&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i},4741:(e,t,n)=>{var i;!function(e){!function(){var t="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=a(e);function a(e,t){return function(n,i){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:i}),t&&t(n,i)}}void 0===t.Reflect?t.Reflect=e:i=a(t.Reflect,i),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",a=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",r="function"==typeof Object.create,o={__proto__:[]}instanceof Array,s=!r&&!o,c={create:r?function(){return U(Object.create(null))}:o?function(){return U({__proto__:null})}:function(){return U({})},has:s?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:s?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),u="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=u||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[a]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var i=this._keys.length,a=n+1;a<i;a++)this._keys[a-1]=this._keys[a],this._values[a-1]=this._values[a];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,i)},t.prototype.values=function(){return new n(this._keys,this._values,r)},t.prototype.entries=function(){return new n(this._keys,this._values,o)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[a]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function i(e,t){return e}function r(e,t){return t}function o(e,t){return[e,t]}}():Map,p=u||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[a]=function(){return this.keys()},e}():Set,f=new(u||"function"!=typeof WeakMap?function(){var e=16,n=c.create(),i=a();return function(){function e(){this._key=a()}return e.prototype.has=function(e){var t=r(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=r(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return r(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=r(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=a()},e}();function a(){var e;do{e="@@WeakMap@@"+s()}while(c.has(n,e));return n[e]=!0,e}function r(e,n){if(!t.call(e,i)){if(!n)return;Object.defineProperty(e,i,{value:c.create()})}return e[i]}function o(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(){var t,n=(t=e,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t));n[6]=79&n[6]|64,n[8]=191&n[8]|128;for(var i="",a=0;a<e;++a){var r=n[a];4!==a&&6!==a&&8!==a||(i+="-"),r<16&&(i+="0"),i+=r.toString(16).toLowerCase()}return i}}():WeakMap);function g(e,t,n){var i=f.get(e);if(C(i)){if(!n)return;i=new d,f.set(e,i)}var a=i.get(t);if(C(a)){if(!n)return;a=new d,i.set(t,a)}return a}function h(e,t,n){if(m(e,t,n))return!0;var i=O(t);return!T(i)&&h(e,i,n)}function m(e,t,n){var i=g(t,n,!1);return!C(i)&&!!i.has(e)}function v(e,t,n){if(m(e,t,n))return y(e,t,n);var i=O(t);return T(i)?void 0:v(e,i,n)}function y(e,t,n){var i=g(t,n,!1);if(!C(i))return i.get(e)}function b(e,t,n,i){g(n,i,!0).set(e,t)}function w(e,t){var n=S(e,t),i=O(e);if(null===i)return n;var a=w(i,t);if(a.length<=0)return n;if(n.length<=0)return a;for(var r=new p,o=[],s=0,c=n;s<c.length;s++){var l=c[s];r.has(l)||(r.add(l),o.push(l))}for(var u=0,d=a;u<d.length;u++)l=d[u],r.has(l)||(r.add(l),o.push(l));return o}function S(e,t){var n=[],i=g(e,t,!1);if(C(i))return n;for(var r=function(e){var t=P(e,a);if(!D(t))throw new TypeError;var n=t.call(e);if(!E(n))throw new TypeError;return n}(i.keys()),o=0;;){var s=B(r);if(!s)return n.length=o,n;var c=s.value;try{n[o]=c}catch(e){try{R(r)}finally{throw e}}o++}}function x(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function C(e){return void 0===e}function T(e){return null===e}function E(e){return"object"==typeof e?null!==e:"function"==typeof e}function I(e,t){switch(x(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",a=P(e,i);if(void 0!==a){var r=a.call(e,n);if(E(r))throw new TypeError;return r}return function(e,t){if("string"===t){var n=e.toString;if(D(n)&&!E(a=n.call(e)))return a;if(D(i=e.valueOf)&&!E(a=i.call(e)))return a}else{var i;if(D(i=e.valueOf)&&!E(a=i.call(e)))return a;var a,r=e.toString;if(D(r)&&!E(a=r.call(e)))return a}throw new TypeError}(e,"default"===n?"number":n)}function _(e){var t=I(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function A(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function D(e){return"function"==typeof e}function k(e){return"function"==typeof e}function P(e,t){var n=e[t];if(null!=n){if(!D(n))throw new TypeError;return n}}function B(e){var t=e.next();return!t.done&&t}function R(e){var t=e.return;t&&t.call(e)}function O(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===l)return t;if(t!==l)return t;var n=e.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return t;var a=i.constructor;return"function"!=typeof a||a===e?t:a}function U(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,i){if(C(n)){if(!A(e))throw new TypeError;if(!k(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var i=(0,e[n])(t);if(!C(i)&&!T(i)){if(!k(i))throw new TypeError;t=i}}return t}(e,t)}if(!A(e))throw new TypeError;if(!E(t))throw new TypeError;if(!E(i)&&!C(i)&&!T(i))throw new TypeError;return T(i)&&(i=void 0),function(e,t,n,i){for(var a=e.length-1;a>=0;--a){var r=(0,e[a])(t,n,i);if(!C(r)&&!T(r)){if(!E(r))throw new TypeError;i=r}}return i}(e,t,n=_(n),i)})),e("metadata",(function(e,t){return function(n,i){if(!E(n))throw new TypeError;if(!C(i)&&!function(e){switch(x(e)){case 3:case 4:return!0;default:return!1}}(i))throw new TypeError;b(e,t,n,i)}})),e("defineMetadata",(function(e,t,n,i){if(!E(n))throw new TypeError;return C(i)||(i=_(i)),b(e,t,n,i)})),e("hasMetadata",(function(e,t,n){if(!E(t))throw new TypeError;return C(n)||(n=_(n)),h(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!E(t))throw new TypeError;return C(n)||(n=_(n)),m(e,t,n)})),e("getMetadata",(function(e,t,n){if(!E(t))throw new TypeError;return C(n)||(n=_(n)),v(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!E(t))throw new TypeError;return C(n)||(n=_(n)),y(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!E(e))throw new TypeError;return C(t)||(t=_(t)),w(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!E(e))throw new TypeError;return C(t)||(t=_(t)),S(e,t)})),e("deleteMetadata",(function(e,t,n){if(!E(t))throw new TypeError;C(n)||(n=_(n));var i=g(t,n,!1);if(C(i))return!1;if(!i.delete(e))return!1;if(i.size>0)return!0;var a=f.get(t);return a.delete(n),a.size>0||f.delete(t),!0}))}(i)}()}(i||(i={}))},9983:function(e){"use strict";!function(){const t=2147483647;function n(e){const t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let n=1779033703,i=3144134277,a=1013904242,r=2773480762,o=1359893119,s=2600822924,c=528734635,l=1541459225;const u=new Uint32Array(64);function d(e){let d=0,p=e.length;for(;p>=64;){let f,g,h,m,v,y=n,b=i,w=a,S=r,x=o,C=s,T=c,E=l;for(g=0;g<16;g++)h=d+4*g,u[g]=(255&e[h])<<24|(255&e[h+1])<<16|(255&e[h+2])<<8|255&e[h+3];for(g=16;g<64;g++)f=u[g-2],m=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,f=u[g-15],v=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,u[g]=(m+u[g-7]|0)+(v+u[g-16]|0)|0;for(g=0;g<64;g++)m=(((x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7))+(x&C^~x&T)|0)+(E+(t[g]+u[g]|0)|0)|0,v=((y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10))+(y&b^y&w^b&w)|0,E=T,T=C,C=x,x=S+m|0,S=w,w=b,b=y,y=m+v|0;n=n+y|0,i=i+b|0,a=a+w|0,r=r+S|0,o=o+x|0,s=s+C|0,c=c+T|0,l=l+E|0,d+=64,p-=64}}d(e);let p,f=e.length%64,g=e.length/536870912|0,h=e.length<<3,m=f<56?56:120,v=e.slice(e.length-f,e.length);for(v.push(128),p=f+1;p<m;p++)v.push(0);return v.push(g>>>24&255),v.push(g>>>16&255),v.push(g>>>8&255),v.push(g>>>0&255),v.push(h>>>24&255),v.push(h>>>16&255),v.push(h>>>8&255),v.push(h>>>0&255),d(v),[n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255,l>>>24&255,l>>>16&255,l>>>8&255,l>>>0&255]}function i(e,t,i){e=e.length<=64?e:n(e);const a=64+t.length+4,r=new Array(a),o=new Array(64);let s,c=[];for(s=0;s<64;s++)r[s]=54;for(s=0;s<e.length;s++)r[s]^=e[s];for(s=0;s<t.length;s++)r[64+s]=t[s];for(s=a-4;s<a;s++)r[s]=0;for(s=0;s<64;s++)o[s]=92;for(s=0;s<e.length;s++)o[s]^=e[s];function l(){for(let e=a-1;e>=a-4;e--){if(r[e]++,r[e]<=255)return;r[e]=0}}for(;i>=32;)l(),c=c.concat(n(o.concat(n(r)))),i-=32;return i>0&&(l(),c=c.concat(n(o.concat(n(r))).slice(0,i))),c}function a(e,t,n,i,a){let r;for(c(e,16*(2*n-1),a,0,16),r=0;r<2*n;r++)s(e,16*r,a,16),o(a,i),c(a,0,e,t+16*r,16);for(r=0;r<n;r++)c(e,t+2*r*16,e,16*r,16);for(r=0;r<n;r++)c(e,t+16*(2*r+1),e,16*(r+n),16)}function r(e,t){return e<<t|e>>>32-t}function o(e,t){c(e,0,t,0,16);for(let e=8;e>0;e-=2)t[4]^=r(t[0]+t[12],7),t[8]^=r(t[4]+t[0],9),t[12]^=r(t[8]+t[4],13),t[0]^=r(t[12]+t[8],18),t[9]^=r(t[5]+t[1],7),t[13]^=r(t[9]+t[5],9),t[1]^=r(t[13]+t[9],13),t[5]^=r(t[1]+t[13],18),t[14]^=r(t[10]+t[6],7),t[2]^=r(t[14]+t[10],9),t[6]^=r(t[2]+t[14],13),t[10]^=r(t[6]+t[2],18),t[3]^=r(t[15]+t[11],7),t[7]^=r(t[3]+t[15],9),t[11]^=r(t[7]+t[3],13),t[15]^=r(t[11]+t[7],18),t[1]^=r(t[0]+t[3],7),t[2]^=r(t[1]+t[0],9),t[3]^=r(t[2]+t[1],13),t[0]^=r(t[3]+t[2],18),t[6]^=r(t[5]+t[4],7),t[7]^=r(t[6]+t[5],9),t[4]^=r(t[7]+t[6],13),t[5]^=r(t[4]+t[7],18),t[11]^=r(t[10]+t[9],7),t[8]^=r(t[11]+t[10],9),t[9]^=r(t[8]+t[11],13),t[10]^=r(t[9]+t[8],18),t[12]^=r(t[15]+t[14],7),t[13]^=r(t[12]+t[15],9),t[14]^=r(t[13]+t[12],13),t[15]^=r(t[14]+t[13],18);for(let n=0;n<16;++n)e[n]+=t[n]}function s(e,t,n,i){for(let a=0;a<i;a++)n[a]^=e[t+a]}function c(e,t,n,i,a){for(;a--;)n[i++]=e[t++]}function l(e){if(!e||"number"!=typeof e.length)return!1;for(let t=0;t<e.length;t++){const n=e[t];if("number"!=typeof n||n%1||n<0||n>=256)return!1}return!0}function u(e,t){if("number"!=typeof e||e%1)throw new Error("invalid "+t);return e}function d(e,n,r,o,d,p,f){if(r=u(r,"N"),o=u(o,"r"),d=u(d,"p"),p=u(p,"dkLen"),0===r||r&r-1)throw new Error("N must be power of 2");if(r>t/128/o)throw new Error("N too large");if(o>t/128/d)throw new Error("r too large");if(!l(e))throw new Error("password must be an array or buffer");if(e=Array.prototype.slice.call(e),!l(n))throw new Error("salt must be an array or buffer");n=Array.prototype.slice.call(n);let g=i(e,n,128*d*o);const h=new Uint32Array(32*d*o);for(let e=0;e<h.length;e++){const t=4*e;h[e]=(255&g[t+3])<<24|(255&g[t+2])<<16|(255&g[t+1])<<8|255&g[t+0]}const m=new Uint32Array(64*o),v=new Uint32Array(32*o*r),y=32*o,b=new Uint32Array(16),w=new Uint32Array(16),S=d*r*2;let x,C,T=0,E=null,I=!1,_=0,A=0;const D=f?parseInt(1e3/o):4294967295,k="undefined"!=typeof setImmediate?setImmediate:setTimeout,P=function(){if(I)return f(new Error("cancelled"),T/S);let t;switch(_){case 0:C=32*A*o,c(h,C,m,0,y),_=1,x=0;case 1:t=r-x,t>D&&(t=D);for(let e=0;e<t;e++)c(m,0,v,(x+e)*y,y),a(m,y,o,b,w);if(x+=t,T+=t,f){const e=parseInt(1e3*T/S);if(e!==E){if(I=f(null,T/S),I)break;E=e}}if(x<r)break;x=0,_=2;case 2:t=r-x,t>D&&(t=D);for(let e=0;e<t;e++){const e=m[16*(2*o-1)]&r-1;s(v,e*y,m,y),a(m,y,o,b,w)}if(x+=t,T+=t,f){const e=parseInt(1e3*T/S);if(e!==E){if(I=f(null,T/S),I)break;E=e}}if(x<r)break;if(c(m,0,h,C,y),A++,A<d){_=0;break}g=[];for(let e=0;e<h.length;e++)g.push(255&h[e]),g.push(h[e]>>8&255),g.push(h[e]>>16&255),g.push(h[e]>>24&255);const n=i(e,g,p);return f&&f(null,1,n),n}f&&k(P)};if(!f)for(;;){const e=P();if(null!=e)return e}P()}const p={scrypt:function(e,t,n,i,a,r,o){return new Promise((function(s,c){let l=0;o&&o(0),d(e,t,n,i,a,r,(function(e,t,n){if(e)c(e);else if(n)o&&1!==l&&o(1),s(new Uint8Array(n));else if(o&&t!==l)return l=t,o(t)}))}))},syncScrypt:function(e,t,n,i,a,r){return new Uint8Array(d(e,t,n,i,a,r))}};e.exports=p}()},7232:function(e,t,n){var i;!function(a,r){"use strict";var o="function",s="undefined",c="object",l="string",u="model",d="name",p="type",f="vendor",g="version",h="architecture",m="console",v="mobile",y="tablet",b="smarttv",w="wearable",S="embedded",x="Amazon",C="Apple",T="ASUS",E="BlackBerry",I="Browser",_="Chrome",A="Firefox",D="Google",k="Huawei",P="LG",B="Microsoft",R="Motorola",O="Opera",U="Samsung",N="Sharp",M="Sony",F="Xiaomi",L="Zebra",j="Facebook",V=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},K=function(e,t){return typeof e===l&&-1!==q(t).indexOf(q(e))},q=function(e){return e.toLowerCase()},z=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,""),typeof t===s?e:e.substring(0,350)},W=function(e,t){for(var n,i,a,s,l,u,d=0;d<t.length&&!l;){var p=t[d],f=t[d+1];for(n=i=0;n<p.length&&!l;)if(l=p[n++].exec(e))for(a=0;a<f.length;a++)u=l[++i],typeof(s=f[a])===c&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,u):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=u?u.replace(s[1],s[2]):r:this[s[0]]=u?s[1].call(this,u,s[2]):r:4===s.length&&(this[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):r):this[s]=u||r;d+=2}},H=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(K(t[n][i],e))return"?"===n?r:n}else if(K(t[n],e))return"?"===n?r:n;return e},G={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},$={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,g],[/opios[\/ ]+([\w\.]+)/i],[g,[d,O+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[d,O]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[d,"UC"+I]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[g,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[g,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+I],g],[/\bfocus\/([\w\.]+)/i],[g,[d,A+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[d,O+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[d,O+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[d,"MIUI "+I]],[/fxios\/([-\w\.]+)/i],[g,[d,A]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+I]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+I],g],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,j],g],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[d,_+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,_+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[d,"Android "+I]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[g,H,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[d,A+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,g],[/(cobalt)\/([\w\.]+)/i],[d,[g,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,q]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[f,U],[p,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[f,U],[p,v]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[f,C],[p,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[f,C],[p,y]],[/(macintosh);/i],[u,[f,C]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[f,k],[p,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[f,k],[p,v]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[f,F],[p,v]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[f,F],[p,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[f,"OPPO"],[p,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[f,"Vivo"],[p,v]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[f,"Realme"],[p,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[f,R],[p,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[f,R],[p,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[f,P],[p,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[f,P],[p,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[f,"Lenovo"],[p,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[f,"Nokia"],[p,v]],[/(pixel c)\b/i],[u,[f,D],[p,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[f,D],[p,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[f,M],[p,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[f,M],[p,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[f,"OnePlus"],[p,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[f,x],[p,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[f,x],[p,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,f,[p,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[f,E],[p,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[f,T],[p,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[f,T],[p,v]],[/(nexus 9)/i],[u,[f,"HTC"],[p,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[u,/_/g," "],[p,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[f,"Acer"],[p,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[f,"Meizu"],[p,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[f,N],[p,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,u,[p,v]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,u,[p,y]],[/(surface duo)/i],[u,[f,B],[p,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[f,"Fairphone"],[p,v]],[/(u304aa)/i],[u,[f,"AT&T"],[p,v]],[/\bsie-(\w*)/i],[u,[f,"Siemens"],[p,v]],[/\b(rct\w+) b/i],[u,[f,"RCA"],[p,y]],[/\b(venue[\d ]{2,7}) b/i],[u,[f,"Dell"],[p,y]],[/\b(q(?:mv|ta)\w+) b/i],[u,[f,"Verizon"],[p,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[f,"Barnes & Noble"],[p,y]],[/\b(tm\d{3}\w+) b/i],[u,[f,"NuVision"],[p,y]],[/\b(k88) b/i],[u,[f,"ZTE"],[p,y]],[/\b(nx\d{3}j) b/i],[u,[f,"ZTE"],[p,v]],[/\b(gen\d{3}) b.+49h/i],[u,[f,"Swiss"],[p,v]],[/\b(zur\d{3}) b/i],[u,[f,"Swiss"],[p,y]],[/\b((zeki)?tb.*\b) b/i],[u,[f,"Zeki"],[p,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],u,[p,y]],[/\b(ns-?\w{0,9}) b/i],[u,[f,"Insignia"],[p,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[f,"NextBook"],[p,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],u,[p,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],u,[p,v]],[/\b(ph-1) /i],[u,[f,"Essential"],[p,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[f,"Envizen"],[p,y]],[/\b(trio[-\w\. ]+) b/i],[u,[f,"MachSpeed"],[p,y]],[/\btu_(1491) b/i],[u,[f,"Rotor"],[p,y]],[/(shield[\w ]+) b/i],[u,[f,"Nvidia"],[p,y]],[/(sprint) (\w+)/i],[f,u,[p,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[f,B],[p,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[f,L],[p,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[f,L],[p,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,u,[p,m]],[/droid.+; (shield) bui/i],[u,[f,"Nvidia"],[p,m]],[/(playstation [345portablevi]+)/i],[u,[f,M],[p,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[f,B],[p,m]],[/smart-tv.+(samsung)/i],[f,[p,b]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[f,U],[p,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,P],[p,b]],[/(apple) ?tv/i],[f,[u,C+" TV"],[p,b]],[/crkey/i],[[u,_+"cast"],[f,D],[p,b]],[/droid.+aft(\w)( bui|\))/i],[u,[f,x],[p,b]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[f,N],[p,b]],[/(bravia[\w ]+)( bui|\))/i],[u,[f,M],[p,b]],[/(mitv-\w{5}) bui/i],[u,[f,F],[p,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[f,z],[u,z],[p,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,b]],[/((pebble))app/i],[f,u,[p,w]],[/droid.+; (glass) \d/i],[u,[f,D],[p,w]],[/droid.+; (wt63?0{2,3})\)/i],[u,[f,L],[p,w]],[/(quest( 2)?)/i],[u,[f,j],[p,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[p,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[p,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[p,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[g,H,G]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[g,H,G]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,g],[/\(bb(10);/i],[g,[d,E]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[d,A+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[g,[d,_+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],g],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,g],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,g]]},Q=function(e,t){if(typeof e===c&&(t=e,e=r),!(this instanceof Q))return new Q(e,t).getResult();var n=e||(typeof a!==s&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),i=t?function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n}($,t):$;return this.getBrowser=function(){var e,t={};return t[d]=r,t[g]=r,W.call(t,n,i.browser),t.major=typeof(e=t.version)===l?e.replace(/[^\d\.]/g,"").split(".")[0]:r,t},this.getCPU=function(){var e={};return e[h]=r,W.call(e,n,i.cpu),e},this.getDevice=function(){var e={};return e[f]=r,e[u]=r,e[p]=r,W.call(e,n,i.device),e},this.getEngine=function(){var e={};return e[d]=r,e[g]=r,W.call(e,n,i.engine),e},this.getOS=function(){var e={};return e[d]=r,e[g]=r,W.call(e,n,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===l&&e.length>350?z(e,350):e,this},this.setUA(n),this};Q.VERSION="1.0.33",Q.BROWSER=V([d,g,"major"]),Q.CPU=V([h]),Q.DEVICE=V([u,f,p,m,v,b,y,w,S]),Q.ENGINE=Q.OS=V([d,g]),typeof t!==s?(e.exports&&(t=e.exports=Q),t.UAParser=Q):n.amdO?(i=function(){return Q}.call(t,n,t,e))===r||(e.exports=i):typeof a!==s&&(a.UAParser=Q);var Y=typeof a!==s&&(a.jQuery||a.Zepto);if(Y&&!Y.ua){var X=new Q;Y.ua=X.getResult(),Y.ua.get=function(){return X.getUA()},Y.ua.set=function(e){X.setUA(e);var t=X.getResult();for(var n in t)Y.ua[n]=t[n]}}}("object"==typeof window?window:this)},611:(e,t,n)=>{"use strict";var i;n.r(t),n.d(t,{NIL:()=>k,parse:()=>m,stringify:()=>u,v1:()=>h,v3:()=>E,v4:()=>I,v5:()=>D,validate:()=>s,version:()=>P});var a=new Uint8Array(16);function r(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(a)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(e){return"string"==typeof e&&o.test(e)};for(var c=[],l=0;l<256;++l)c.push((l+256).toString(16).substr(1));const u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n};var d,p,f=0,g=0;const h=function(e,t,n){var i=t&&n||0,a=t||new Array(16),o=(e=e||{}).node||d,s=void 0!==e.clockseq?e.clockseq:p;if(null==o||null==s){var c=e.random||(e.rng||r)();null==o&&(o=d=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==s&&(s=p=16383&(c[6]<<8|c[7]))}var l=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:g+1,m=l-f+(h-g)/1e4;if(m<0&&void 0===e.clockseq&&(s=s+1&16383),(m<0||l>f)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=l,g=h,p=s;var v=(1e4*(268435455&(l+=122192928e5))+h)%4294967296;a[i++]=v>>>24&255,a[i++]=v>>>16&255,a[i++]=v>>>8&255,a[i++]=255&v;var y=l/4294967296*1e4&268435455;a[i++]=y>>>8&255,a[i++]=255&y,a[i++]=y>>>24&15|16,a[i++]=y>>>16&255,a[i++]=s>>>8|128,a[i++]=255&s;for(var b=0;b<6;++b)a[i+b]=o[b];return t||u(a)},m=function(e){if(!s(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function v(e,t,n){function i(e,i,a,r){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof i&&(i=m(i)),16!==i.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+e.length);if(o.set(i),o.set(e,i.length),(o=n(o))[6]=15&o[6]|t,o[8]=63&o[8]|128,a){r=r||0;for(var s=0;s<16;++s)a[r+s]=o[s];return a}return u(o)}try{i.name=e}catch(e){}return i.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",i}function y(e){return 14+(e+64>>>9<<4)+1}function b(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function w(e,t,n,i,a,r){return b((o=b(b(t,e),b(i,r)))<<(s=a)|o>>>32-s,n);var o,s}function S(e,t,n,i,a,r,o){return w(t&n|~t&i,e,t,a,r,o)}function x(e,t,n,i,a,r,o){return w(t&i|n&~i,e,t,a,r,o)}function C(e,t,n,i,a,r,o){return w(t^n^i,e,t,a,r,o)}function T(e,t,n,i,a,r,o){return w(n^(t|~i),e,t,a,r,o)}const E=v("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,i="0123456789abcdef",a=0;a<n;a+=8){var r=e[a>>5]>>>a%32&255,o=parseInt(i.charAt(r>>>4&15)+i.charAt(15&r),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[y(t)-1]=t;for(var n=1732584193,i=-271733879,a=-1732584194,r=271733878,o=0;o<e.length;o+=16){var s=n,c=i,l=a,u=r;n=S(n,i,a,r,e[o],7,-680876936),r=S(r,n,i,a,e[o+1],12,-389564586),a=S(a,r,n,i,e[o+2],17,606105819),i=S(i,a,r,n,e[o+3],22,-1044525330),n=S(n,i,a,r,e[o+4],7,-176418897),r=S(r,n,i,a,e[o+5],12,1200080426),a=S(a,r,n,i,e[o+6],17,-1473231341),i=S(i,a,r,n,e[o+7],22,-45705983),n=S(n,i,a,r,e[o+8],7,1770035416),r=S(r,n,i,a,e[o+9],12,-1958414417),a=S(a,r,n,i,e[o+10],17,-42063),i=S(i,a,r,n,e[o+11],22,-1990404162),n=S(n,i,a,r,e[o+12],7,1804603682),r=S(r,n,i,a,e[o+13],12,-40341101),a=S(a,r,n,i,e[o+14],17,-1502002290),n=x(n,i=S(i,a,r,n,e[o+15],22,1236535329),a,r,e[o+1],5,-165796510),r=x(r,n,i,a,e[o+6],9,-1069501632),a=x(a,r,n,i,e[o+11],14,643717713),i=x(i,a,r,n,e[o],20,-373897302),n=x(n,i,a,r,e[o+5],5,-701558691),r=x(r,n,i,a,e[o+10],9,38016083),a=x(a,r,n,i,e[o+15],14,-660478335),i=x(i,a,r,n,e[o+4],20,-405537848),n=x(n,i,a,r,e[o+9],5,568446438),r=x(r,n,i,a,e[o+14],9,-1019803690),a=x(a,r,n,i,e[o+3],14,-187363961),i=x(i,a,r,n,e[o+8],20,1163531501),n=x(n,i,a,r,e[o+13],5,-1444681467),r=x(r,n,i,a,e[o+2],9,-51403784),a=x(a,r,n,i,e[o+7],14,1735328473),n=C(n,i=x(i,a,r,n,e[o+12],20,-1926607734),a,r,e[o+5],4,-378558),r=C(r,n,i,a,e[o+8],11,-2022574463),a=C(a,r,n,i,e[o+11],16,1839030562),i=C(i,a,r,n,e[o+14],23,-35309556),n=C(n,i,a,r,e[o+1],4,-1530992060),r=C(r,n,i,a,e[o+4],11,1272893353),a=C(a,r,n,i,e[o+7],16,-155497632),i=C(i,a,r,n,e[o+10],23,-1094730640),n=C(n,i,a,r,e[o+13],4,681279174),r=C(r,n,i,a,e[o],11,-358537222),a=C(a,r,n,i,e[o+3],16,-722521979),i=C(i,a,r,n,e[o+6],23,76029189),n=C(n,i,a,r,e[o+9],4,-640364487),r=C(r,n,i,a,e[o+12],11,-421815835),a=C(a,r,n,i,e[o+15],16,530742520),n=T(n,i=C(i,a,r,n,e[o+2],23,-995338651),a,r,e[o],6,-198630844),r=T(r,n,i,a,e[o+7],10,1126891415),a=T(a,r,n,i,e[o+14],15,-1416354905),i=T(i,a,r,n,e[o+5],21,-57434055),n=T(n,i,a,r,e[o+12],6,1700485571),r=T(r,n,i,a,e[o+3],10,-1894986606),a=T(a,r,n,i,e[o+10],15,-1051523),i=T(i,a,r,n,e[o+1],21,-2054922799),n=T(n,i,a,r,e[o+8],6,1873313359),r=T(r,n,i,a,e[o+15],10,-30611744),a=T(a,r,n,i,e[o+6],15,-1560198380),i=T(i,a,r,n,e[o+13],21,1309151649),n=T(n,i,a,r,e[o+4],6,-145523070),r=T(r,n,i,a,e[o+11],10,-1120210379),a=T(a,r,n,i,e[o+2],15,718787259),i=T(i,a,r,n,e[o+9],21,-343485551),n=b(n,s),i=b(i,c),a=b(a,l),r=b(r,u)}return[n,i,a,r]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(y(t)),i=0;i<t;i+=8)n[i>>5]|=(255&e[i/8])<<i%32;return n}(e),8*e.length))})),I=function(e,t,n){var i=(e=e||{}).random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=i[a];return t}return u(i)};function _(e,t,n,i){switch(e){case 0:return t&n^~t&i;case 1:case 3:return t^n^i;case 2:return t&n^t&i^n&i}}function A(e,t){return e<<t|e>>>32-t}const D=v("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var i=unescape(encodeURIComponent(e));e=[];for(var a=0;a<i.length;++a)e.push(i.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var r=e.length/4+2,o=Math.ceil(r/16),s=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=e[64*c+4*u]<<24|e[64*c+4*u+1]<<16|e[64*c+4*u+2]<<8|e[64*c+4*u+3];s[c]=l}s[o-1][14]=8*(e.length-1)/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<o;++d){for(var p=new Uint32Array(80),f=0;f<16;++f)p[f]=s[d][f];for(var g=16;g<80;++g)p[g]=A(p[g-3]^p[g-8]^p[g-14]^p[g-16],1);for(var h=n[0],m=n[1],v=n[2],y=n[3],b=n[4],w=0;w<80;++w){var S=Math.floor(w/20),x=A(h,5)+_(S,m,v,y)+b+t[S]+p[w]>>>0;b=y,y=v,v=A(m,30)>>>0,m=h,h=x}n[0]=n[0]+h>>>0,n[1]=n[1]+m>>>0,n[2]=n[2]+v>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),k="00000000-0000-0000-0000-000000000000",P=function(e){if(!s(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},4693:e=>{class t{constructor(e){this.value=e,this.next=void 0}}class n{constructor(){this.clear()}enqueue(e){const n=new t(e);this._head?(this._tail.next=n,this._tail=n):(this._head=n,this._tail=n),this._size++}dequeue(){const e=this._head;if(e)return this._head=this._head.next,this._size--,e.value}clear(){this._head=void 0,this._tail=void 0,this._size=0}get size(){return this._size}*[Symbol.iterator](){let e=this._head;for(;e;)yield e.value,e=e.next}}e.exports=n},2708:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5826);t.browserName=(()=>{const e=navigator.userAgent.toLowerCase();return e.includes("firefox")?i.BrowserName.Firefox:e.includes("edg")?i.BrowserName.Edge:e.includes("chrome")?i.BrowserName.Chrome:i.BrowserName.Safari})()},8432:(e,t)=>{"use strict";function n(e,t){const n=new Uint8Array(e.length);for(let t=0;t<n.length;t++)n[t]=e.charCodeAt(t);return new Blob([n],{type:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.binaryStringToBlob=n,t.blobToBinaryString=async function(e){return new Promise(((t,n)=>{const i=new FileReader;i.addEventListener("load",(()=>t(i.result))),i.addEventListener("error",n),i.readAsBinaryString(e)}))},t.blobToSha256=async function(e){const t=await e.arrayBuffer(),n=await crypto.subtle.digest("SHA-256",t);return[...new Uint8Array(n)].map((e=>e.toString(16).padStart(2,"0"))).join("")},t.dataURLToBlob=function(e){var t;const[i,a]=e.split(","),r=(null===(t=/:(.*?);/.exec(i))||void 0===t?void 0:t[1])||"application/octet-stream",o=decodeURIComponent(a);return n(i.includes("base64")?atob(o):o,r)}},6959:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.IdpFormType||(t.IdpFormType={})).RequestCredentials="credentials",i.RequestPickAccount="pick-account",i.RequestUserConsent="user-consent",i.RequestAccountConfirmation="account-confirmation",(n=t.ScanProgressStatus||(t.ScanProgressStatus={})).Preparing="Preparing to download file",n.Downloading="Downloading file",n.Uploading="Preparing file for scan",n.Scanning="Scanning",n.PendingPassword="Pending password",n.Completed="Completed"},3243:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7256);class a extends i.Dexie{constructor(e,t,n=1){super(e),this.version(n).stores({items:t})}}t.Dexie=a},8146:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7256);class a extends i.Dexie{constructor(){super(a.Name),this.version(5).stores({items:"id, scan.id, scan.status, download.id, timestamps.createdAt, verdict.verdict"}),this.version(6).stores({items:"id, scan.id, scan.status, download.id, timestamps.createdAt, verdict.verdict, download.urls.finalUrl, download.urls.url"}).upgrade((e=>{const t="data:text/plain;charset=utf-8,migrated";return e.table("items").where("download.urls.finalUrl").startsWith("data:").or("download.urls.url").startsWith("data:").modify((e=>{e.download.urls.finalUrl=t,e.download.urls.url=t}))})),this.version(7).stores({items:"id, scan.id, scan.status, download.id, timestamps.createdAt, verdict.verdict"})}}t.DownloadProcessStore=a,a.Name="downloadProcessStore",t.store=new a},7e3:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(1360)),r=a.default.createInstance({driver:a.default.INDEXEDDB,name:"files",storeName:"files",version:1});t.saveFile=async function(e,t){await r.setItem(e,t)},t.getFile=async function(e){return await r.getItem(e)},t.deleteFile=async function(e){await r.removeItem(e)}},1276:(e,t,n)=>{"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(9394));var a=n(1434);t.getTabIdFromToastId=a.getTabIdFromToastId,i(n(5282));var r=n(6959);t.IdpFormType=r.IdpFormType,t.ScanProgressStatus=r.ScanProgressStatus;var o=n(8432);t.blobToBinaryString=o.blobToBinaryString,t.binaryStringToBlob=o.binaryStringToBlob,t.blobToSha256=o.blobToSha256,t.dataURLToBlob=o.dataURLToBlob;var s=n(7e3);t.saveFile=s.saveFile,t.getFile=s.getFile,t.deleteFile=s.deleteFile;var c=n(3243);t.Dexie=c.Dexie;var l=n(8146);t.store=l.store,i(n(5826));var u=n(2708);t.browserName=u.browserName,i(n(7201))},396:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeSink=class{constructor(e){this.sinks=e}log(e,t,n){for(const i of this.sinks)i.log(e,t,n)}}},3298:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleSink=class{constructor(e){this.levelMapping=e}log(e,t,n){console[this.levelMapping[e]](`[${e}]: ${t}`,...n)}}},1547:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loggerFactory=function(e,t){const n={};for(const i of e)n[i]=function(e,...n){t.log(i,e,n)};return n}},538:(e,t)=>{"use strict";function n(e){const{message:t,stack:n}=e;return{message:t,stack:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.format=function(e){return e.map((e=>{switch(!0){case e instanceof Error:return n(e);case e instanceof Headers:return[...e.entries()];case"object"==typeof(i=e)&&null!==i&&Object.keys(i).length>0:return t=e,Object.entries(t).map((([e,t])=>[e,t instanceof Error?n(t):t])).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t[0]]:t[1]})),{});default:return e}var t,i}))}},5470:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3784),a=n(538);function r(e){return(t,n)=>e.excludedLogFields.includes(t)?"<redacted>":"string"==typeof n&&n.length>e.maxValueLength?n.slice(0,e.maxValueLength)+"...":n}t.createRedactorMethod=r;const o={maxValueLength:1024,excludedLogFields:[]};t.IDBSink=class{constructor(e){this.redactor=r(Object.assign(Object.assign({},o),e))}log(e,t,n){const r=a.format(n),o={message:t,level:e,parameters:JSON.stringify(r,this.redactor),timestamp:new Date};i.log(o)}}},7201:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3784);t.getAsFileContent=i.get,t.clearIDBLogger=i.clear;var a=n(396);t.CompositeSink=a.CompositeSink;var r=n(1547);t.loggerFactory=r.loggerFactory;var o=n(5470);t.IDBSink=o.IDBSink;var s=n(3298);t.ConsoleSink=s.ConsoleSink},3784:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=new(n(3243).Dexie)("logs","++id",3);t.log=async function(e){return i.items.add(e)},t.clear=async function(e){return i.items.reverse().offset(e).delete()},t.get=async function(){return(await i.items.toArray()).map((e=>`${e.timestamp.toISOString()}|${e.level}|${e.message} ${e.parameters||""}`)).join("\r\n").slice(-8e7)}},5282:(e,t)=>{"use strict";var n,i,a,r,o,s;Object.defineProperty(t,"__esModule",{value:!0}),(t.PortName||(t.PortName={})).Logger="logger",(s=t.MessageKind||(t.MessageKind={})).GetCategories="getCategories",s.GetCurrentSite="getCurrentSite",s.GetToken="getToken",s.SigninIdentifyUser="signinIdentifyUser",s.SaveAuthTokens="saveAuthTokens",s.LinkClickedOnPage="linkClickedOnPage",s.GetDynamicEvidence="getDynamicEvidence",s.GetHtmlDomStatistics="getHtmlDomStatistics",s.GetConfiguration="GetConfigurationMessage",s.BypassMaliciousPage="BypassMaliciousPageMessage",s.CloseTab="CloseTabMessage",s.GetLocalLogs="GetLocalLogsMessage",s.GetExtensionSettings="GetExtensionSettingsMessage",s.GetTextContent="getTextContent",s.PageClickOnUrl="pageClickOnUrl",s.WriteLog="WriteLogMessage",s.BackToSafety="BackToSafety",s.ShowNotificationToast="showNotificationToast",s.DismissNotificationToast="dismissNotificationToast",s.ReportFalseNegative="ReportFalseNegative",s.ReportFalsePositive="ReportFalsePositive",s.ResizeToastWindow="resizeToastWindow",s.LoginSubmitted="loginSubmitted",s.TelemetryMessage="telemetryMessage",s.DevelopmentToolsOpened="devToolsOpened",s.TriggerRescan="triggerRescan",s.GetBlobFromObjectURL="getBlobFromObjectURL",s.UpdateBlobInTab="updateBlobInTab",s.FieldTypingDetection="fieldTypingDetection",s.ShowScanProgressBarToastMessage="showScanProgressBarToastMessage",s.ShowScanProgressBarRefreshedToastMessage="showScanProgressBarRefreshedToastMessage",s.RefreshScanProgressBaseDataMessage="refreshScanProgressBaseDataMessage",s.CancelScanMessage="cancelScan",s.PasswordDuplicationFound="passwordDuplicationFound",s.SetEncryptedFilePassword="setEncryptedFilePassword",s.ShowNotificationBanner="showNotificationBanner",s.GetFavicon="getFavicon",s.SafariDownloadLinkClicked="safariDownloadLinkClicked",s.GetLastUser="getLastUser",s.ShowPasteRestrictedNotification="showPasteRestrictedNotification",s.GetHtmlDomRoot="getHtmlDomRoot",s.GetIFrameContent="getIFrameContent",s.UploadDetected="uploadDetected",s.SensitiveDataDetected="sensitiveDataDetected",s.SensitiveDataDetectionInProgress="sensitiveDataDetectionInProgress",s.DetectSensitiveData="detectSensitiveData",s.GetTabDomain="getTabDomain",s.TryFetchBlob="tryFetchBlob",s.FetchBlob="fetchBlob",s.DownloadProgress="downloadProgress",s.GetPageInfo="getPageInfo",s.UpdatePageInfo="updatePageInfo",s.ChangePageInfo="changePageInfo",s.PageInfoChanged="pageInfoChanged",s.SetTimeout="setTimeout",s.TimeoutReached="timeoutReached",s.GetTabProtectionData="GetTabProtectionDataMessage",s.SignInEnforcementDocumentDisabling="SignInEnforcementDocumentDisabling",s.EventMessage="eventMessage",s.OpenDownloadManager="openDownloadManager",s.FactoryReset="factoryResetRequest",s.KeepAlive="keepAlive",(o=t.ChangeAction||(t.ChangeAction={})).Increment="increment",o.Decrement="decrement",(r=t.UserAuthorizationStatus||(t.UserAuthorizationStatus={})).Ok="Ok",r.InternalError="InternalError",r.DifferentTokenId="DifferentTokenId",r.Forbidden="Forbidden",r.WrongPassword="WrongPassword",r.WrongVerificationCode="WrongVerificationCode",r.VerificationSessionExpired="VerificationSessionExpired",r.Unauthorized="Unauthorized",(a=t.SigninIdentifyError||(t.SigninIdentifyError={})).NotFound="NotFound",a.InternalError="InternalError",a.TenantDisabled="TenantDisabled",a.IdpUser="IdpUser",(i=t.SigninIdentifyResponseKind||(t.SigninIdentifyResponseKind={})).Error="Error",i.CognitoUserPool="CognitoUserPool",i.SigninUrl="SigninUrl",(n=t.UpdateBlobOperation||(t.UpdateBlobOperation={})).Create="create",n.Revoke="revoke"},1434:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=/^t(\d+)_.*$/;t.getTabIdFromToastId=function(e){var t;const i=null===(t=n.exec(e))||void 0===t?void 0:t[1];if(i)return Number.parseInt(i,10)}},5070:(e,t)=>{"use strict";var n,i,a;Object.defineProperty(t,"__esModule",{value:!0}),(a=t.SignInMode||(t.SignInMode={})).UnattendedSignIn="UnattendedSignIn",a.InteractiveWithIdp="InteractiveWithIdp",a.InteractiveWithCode="InteractiveWithCode",(i=t.SignInEnforcementMode||(t.SignInEnforcementMode={})).None="None",i.ForceSignIn="ForceSignIn",i.AutoOpenSignInPage="AutoOpenSignInPage",(n=t.PostSignInRedirectMode||(t.PostSignInRedirectMode={})).ABSPage="ABSPage",n.PreSignInUrlRedirectAfterTimeout="PreSignInUrlRedirectAfterTimeout",n.PreSignInUrlRedirect="PreSignInUrlRedirect"},6722:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.BrowserName||(t.BrowserName={})).Edge="edge",n.Chrome="chrome",n.Safari="safari",n.Firefox="firefox"},4229:(e,t)=>{"use strict";var n,i,a,r,o,s,c,l,u,d,p,f,g,h,m,v;Object.defineProperty(t,"__esModule",{value:!0}),(v=t.EncryptedOptions||(t.EncryptedOptions={})).Fully="fully",v.Partially="partially",v.No="no",(m=t.DecryptionStatuses||(t.DecryptionStatuses={})).Succeeded="succeeded",m.Failed="failed",(h=t.ScanReason||(t.ScanReason={})).WebsiteLoaded="websiteLoaded",h.FalseNegativeReport="falseNegativeReport",h.CreditCardOrEmail="creditCardOrEmail",h.Interval="interval",h.DomChanged="domChanged",h.TabFocused="tabFocused",h.UserClicked="userClicked",h.FirstScan="firstScan",h.PrerenderedTabShown="prerenderedTabShown",(g=t.Verdict||(t.Verdict={})).Malware="MAL",g.Unknown="UNK",g.Clean="CLN",g.Suspicious="SUS",(f=t.VerdictOrigin||(t.VerdictOrigin={})).Configuration="configuration",f.Cache="cache",f.Network="network",f.VerdictChange="verdictChange",f.Unknown="unknown",(p=t.IdpProvider||(t.IdpProvider={})).Google="google",p.Microsoft="microsoft",p.Other="other",p.Unknown="unknown",function(e){e.Initiating="initiating",e.Pending="pending",e.InProgress="in_progress",e.PendingPassword="pending_password",e.Completed="completed",e.ScanError="scan_error",e.Failed="failed",e.Finished="finished"}(n=t.ScanStatus||(t.ScanStatus={})),t.queryForScanStatuses=[n.Initiating,n.Pending,n.InProgress],(d=t.PPEventType||(t.PPEventType={})).FileScanPending="file_scan_pending",d.FileScanInProgress="file_scan_in_progress",d.FileScanCompleted="file_scan_completed",d.FileScanError="file_scan_error",(u=t.ScanType||(t.ScanType={})).UrlPreScan="url_pre_scan",u.Scan="scan",u.ReScan="re_scan",u.FileSignaturePreScan="file_signature_pre_scan",(l=t.ActivationStatus||(t.ActivationStatus={})).Active="active",l.Disabled="disabled",l.ActiveForEmail="activeForEmail",(c=t.BlockPageDetectionMode||(t.BlockPageDetectionMode={})).Warn="warn",c.Block="block",(s=t.ExtensionsRiskScoreLevel||(t.ExtensionsRiskScoreLevel={})).None="None",s.High="High",s.Medium="Medium",s.All="All",(o=t.ExtensionsRiskScoreDisplayableLevel||(t.ExtensionsRiskScoreDisplayableLevel={})).High="High",o.Medium="Medium",o.Low="Low",o.Undetermined="Undetermined",(r=t.ActionType||(t.ActionType={})).None="none",r.BlockPage="blockPage",r.Notification="notification",(a=t.ClipboardOperation||(t.ClipboardOperation={})).Copy="copy",a.Paste="paste",a.Cut="cut",(i=t.WebAppType||(t.WebAppType={})).Gmail="Gmail",i.Outlook="Outlook",i.WhatsApp="WhatsApp",i.GoogleDrive="GoogleDrive"},7309:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.MaliciousWebsiteDetection||(t.MaliciousWebsiteDetection={})).Disabled="disabled",n.Silent="silent",n.Warn="warn",n.Block="block"},2287:(e,t)=>{"use strict";var n,i,a,r,o,s,c,l;Object.defineProperty(t,"__esModule",{value:!0}),(l=t.DownloadRemediation||(t.DownloadRemediation={})).Deleted="deleted",l.Failed="failed",l.None="none",l.NotSupported="not-supported",(c=t.ScanStatusUpdateMethod||(t.ScanStatusUpdateMethod={})).Polling="polling",c.Push="push",(s=t.DownloadMechanism||(t.DownloadMechanism={})).ServiceWorkerStream="service-worker-stream",s.ContentScriptStream="content-script-stream",s.ContentScriptBlob="content-script-blob",s.DataUrlBlob="data-blob",s.Unavailable="unavailable",(o=t.DownloadProcessFailureReason||(t.DownloadProcessFailureReason={})).Unfetchable="unfetchable",o.Timeout="timeout",o.Error="error",o.ScanError="scan-error",(r=t.DownloadConfidence||(t.DownloadConfidence={})).Lowest="lowest",r.Low="low",r.Medium="medium",r.High="high",(a=t.DownloadDetectionOrigin||(t.DownloadDetectionOrigin={})).DownloadsApi="downloads-api",a.WebRequest="web-request",a.DownloadClickInterception="download-click-interception",(i=t.DownloadProcessState||(t.DownloadProcessState={})).New="new",i.Enriched="enriched",i.Started="started",i.UrlsPreScanFinished="urls-pre-scan-finished",i.PartialDownloadAnalyzed="partial-download-analyzed",i.UserDownloadSettled="user-download-settled",i.Downloaded="downloaded",i.SignaturePreScanFinished="signature-pre-scan-finished",i.Uploaded="uploaded",i.Scanning="scanning",i.Completed="completed",i.Failed="failed",i.VerdictChanged="verdict-changed",(n=t.FileDetectionMode||(t.FileDetectionMode={})).Disabled="disabled",n.Silent="silent",n.Warn="warn",n.Block="block"},9807:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.EmailCollectionStatus||(t.EmailCollectionStatus={})).Enabled="enabled",n.Disabled="disabled",n.Completed="completed"},8214:(e,t)=>{"use strict";var n,i,a,r,o,s;Object.defineProperty(t,"__esModule",{value:!0}),(s=t.EventCategory||(t.EventCategory={})).Prevention="prevention",s.UserInput="user_input",s.Detection="detection",(o=t.EventType||(t.EventType={})).WebsiteUrlAccessBlocked="website_url_access_blocked",o.WebsiteCategoriesAccessBlocked="website_categories_access_blocked",o.FileTypeDownloadBlocked="file_type_download_blocked",o.Login="login",o.UnscannedFile="unscanned_file",o.EmailTyped="email_typed",o.CreditCardTyped="credit_card_typed",o.PasswordDuplicationFound="password_duplication_found",o.UnsuccessfulScan="unsuccessful_scan",o.FileUpload="file_upload",o.FileDownload="file_download",o.ThirdPartyExtensionsChange="third_party_extensions_change",o.SensitiveDataInput="sensitive_data_input",o.ThirdPartyExtensionDownload="third_party_extension_download",o.PasteOut="paste_out",o.Printing="printing",o.MaliciousUrl="malicious_url",o.MaliciousFile="malicious_file",o.CleanUrl="clean_url",(r=t.EventDestination||(t.EventDestination={})).ABS="abs",r.XDR="xdr",r.IR="ir",(a=t.ErrorReason||(t.ErrorReason={})).PasswordProtected="password protected",a.TooLarge="too large",(i=t.LoginType||(t.LoginType={})).SSO="sso",i.Simple="simple",i.GrantPermissions="grant_permissions",(n=t.ThirdPartyExtensionsState||(t.ThirdPartyExtensionsState={})).Installed="installed",n.Uninstalled="uninstalled",n.Enabled="enabled",n.Disabled="disabled",n.Updated="updated"},1107:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.InstallationContext||(t.InstallationContext={})).Host="host",n.Guest="guest",n.Standalone="standalone"},5826:(e,t,n)=>{"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(7309)),i(n(1521)),i(n(4229)),i(n(8214)),i(n(7624)),i(n(2287)),i(n(1130)),i(n(4299)),i(n(6722)),i(n(1107)),i(n(6753)),i(n(3206)),i(n(9807)),i(n(861)),i(n(5070))},1130:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.PushNotificationBackend||(t.PushNotificationBackend={})).Apns="apns",i.Fcm="fcm",(n=t.UserDisplayNameUpdateResult||(t.UserDisplayNameUpdateResult={})).NotModified="not_modified",n.Modified="modified",n.Rejected="rejected"},4299:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.PageType||(t.PageType={})).SignIn="signin",n.SignInRedirectingPage="signin-redirecting-page",n.WebsiteBlock="website-block",n.WebsiteMaliciousBlock="website-malicious-block",n.PolicyBlock="policy-block",n.PhishingBlock="phishing-block",n.FileWarning="file-warning",n.FileTypeBlock="file-type-block",n.DownloadLocalLogs="download-local-logs",n.DownloadStoredFile="download-stored-file",n.Notification="notification",n.ScanProgress="scanProgress",n.UnscannableFileBlockPage="unscannable-file-block-page",n.DisabledExtensionBlockPage="disabled-extension-block-page",n.DisabledExtensionDueToRiskScoreBlockPage="disabled-extension-due-to-risk-score-block-page",n.PasswordInputPage="password-input-page",n.Banner="banner",n.Block="block",n.Popup="popup",n.EncryptedFileBlockPage="encrypted-file-block-page",n.DownloadManagerPage="download-manager-page"},861:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.SensitiveDataDetectionMode||(t.SensitiveDataDetectionMode={})).Warn="warn",i.Block="block",i.Silent="silent",i.Disabled="disabled",(n=t.TextExtractionMethod||(t.TextExtractionMethod={})).Regex="regex",n.Value="value",n.TextContent="textContent"},1521:(e,t)=>{"use strict";var n,i,a,r,o,s,c,l,u;Object.defineProperty(t,"__esModule",{value:!0}),(u=t.TelemetryCategory||(t.TelemetryCategory={})).Detection="detection",u.Prevention="prevention",u.Boot="boot",u.Management="management",u.User="user",u.Remediation="remediation",(l=t.TelemetryType||(t.TelemetryType={})).UrlScan="url_scan",l.FileScanCompleted="file_scan_completed",l.FileScanFailed="file_scan_failed",l.FileScanTimeout="file_scan_timeout",l.FileScanError="file_scan_error",l.ExtensionLoaded="extension_loaded",l.ClipboardAction="clipboard_action",l.Printing="printing",l.Devtools="devtools",l.BlockPage="block_page",l.Reporting="reporting",l.LogsCollection="logs",l.UserInterface="user_interface",l.FileUpload="file_upload",l.FileDownloadConfidence="file_download_confidence",l.FileDownloadRemediation="file_download_remediation",l.AvoidFileDetection="avoid_file_detection",l.UpdateAvailable="version_available",l.RetryTryFetch="retry_try_fetch",l.Alarm="telemetry_alarm",l.ApiHeaders="api_headers",l.AvoidUrlDetection="avoid_url_detection",l.FileDetectionFailure="file_detection_failure",l.DecryptionFailure="decryption_failure",l.FileDownloadMaxFailures="file_download_max_failures",l.SensitiveDataInput="sensitive_data_input",l.FilenameIdentificationFailure="filename_identification_failure",l.FunctionCalled="function_called",(c=t.UserInterfaceAction||(t.UserInterfaceAction={})).ToastDismissed="toast_dismissed",c.BlockPageBackToSafety="block_page_back_to_safety",c.BlockPageContinueAnyWay="block_page_continue_any_way",(s=t.LogsCollectionOrigin||(t.LogsCollectionOrigin={})).Local="local",s.OnDemand="on_demand",(o=t.ReportAction||(t.ReportAction={})).FalsePositive="false_positive",o.FalseNegative="false_negative",(r=t.BlockPageReason||(t.BlockPageReason={})).DomainRule="blocked_domain",r.CategoryRule="blocked_category",(a=t.PrintPhase||(t.PrintPhase={})).BeforePrint="before_print",a.AfterPrint="after_print",(i=t.AvoidFileDetectionReason||(t.AvoidFileDetectionReason={})).BlockedFileType="blocked_file_type",i.ExcludedDomains="excluded_domains",i.ExcludedCategory="excluded_category",i.EncryptedFile="encrypted_file",i.FileTooLarge="file_too_large",i.ThirdPartyExtensionDownload="third_party_extension_download",(n=t.AvoidUrlDetectionReason||(t.AvoidUrlDetectionReason={})).ExcludedDomains="excluded_domains",n.ExcludedCategory="excluded_category"},3206:(e,t)=>{"use strict";var n,i,a,r;Object.defineProperty(t,"__esModule",{value:!0}),(t.ThirdPartyExtensionEnforcementAction||(t.ThirdPartyExtensionEnforcementAction={})).Disable="disable",t.tpeEnforcmentRuleActions=["disable","allow"],(r=t.ThirdPartyExtensionEnforcementRuleRiskScoreOperator||(t.ThirdPartyExtensionEnforcementRuleRiskScoreOperator={})).Equals="equals",r.NotEquals="notEquals",r.GreaterThan="greaterThan",r.GreaterThanOrEqual="greaterThanOrEqual",r.LessThan="lessThan",r.LessThanOrEqual="lessThanOrEqual",(a=t.ExtensionsRiskLevel||(t.ExtensionsRiskLevel={})).Low="All",a.Medium="Medium",a.High="High",a.NoScore="NoScore",t.tpeRiskLevels=["no-score","undetermined","low","medium","high"],function(e){e.Is="is",e.IsNot="isNot"}(n||(n={})),function(e){e.IsOneOf="isOneOf",e.IsNotOneOf="isNotOneOf"}(i||(i={}))},7624:(e,t)=>{"use strict";var n,i,a;Object.defineProperty(t,"__esModule",{value:!0}),(a=t.NotificationLevel||(t.NotificationLevel={})).Info="info",a.Error="error",a.Warning="warning",a.Success="success",a.Malicious="malicious",a.Policy="policy",(i=t.ToastType||(t.ToastType={})).BasicNotification="basicNotification",i.ScanStatusNotification="scanStatusNotification",i.BannerNotification="bannerNotification",(t.BannerType||(t.BannerType={})).SuspiciousBanner="suspiciousBanner",(n=t.ToastPosition||(t.ToastPosition={})).BottomRight="bottomRight",n.BottomLeft="bottomLeft",n.TopRight="topRight",n.TopLeft="topLeft"},6753:(e,t)=>{"use strict";var n,i,a;Object.defineProperty(t,"__esModule",{value:!0}),(a=t.DlpRuleKind||(t.DlpRuleKind={})).Domain="domain",a.Category="category",(i=t.FileAccessModeOverride||(t.FileAccessModeOverride={})).NoOverride="noOverride",i.PreventFileAccessWithTimeout="preventFileAccessWithTimeout",i.PreventFileAccess="preventFileAccess",i.AllowFileAccess="allowFileAccess",(n=t.WebsiteBlockAction||(t.WebsiteBlockAction={})).Allow="allow",n.Warn="warn",n.Block="block"},4704:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var i=n(1536),a=function(){function e(){this.state=Int32Array.from(i.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>i.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===i.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%i.BLOCK_SIZE>=i.BLOCK_SIZE-8){for(var a=this.bufferLength;a<i.BLOCK_SIZE;a++)t.setUint8(a,0);this.hashBuffer(),this.bufferLength=0}for(a=this.bufferLength;a<i.BLOCK_SIZE-8;a++)t.setUint8(a,0);t.setUint32(i.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(i.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var r=new Uint8Array(i.DIGEST_LENGTH);for(a=0;a<8;a++)r[4*a]=this.state[a]>>>24&255,r[4*a+1]=this.state[a]>>>16&255,r[4*a+2]=this.state[a]>>>8&255,r[4*a+3]=this.state[a]>>>0&255;return r},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],a=t[1],r=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=0;d<i.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var p=this.temp[d-2],f=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,g=((p=this.temp[d-15])>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[d]=(f+this.temp[d-7]|0)+(g+this.temp[d-16]|0)}var h=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&c^~s&l)|0)+(u+(i.KEY[d]+this.temp[d]|0)|0)|0,m=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&a^n&r^a&r)|0;u=l,l=c,c=s,s=o+h|0,o=r,r=a,a=n,n=h+m|0}t[0]+=n,t[1]+=a,t[2]+=r,t[3]+=o,t[4]+=s,t[5]+=c,t[6]+=l,t[7]+=u},e}();t.RawSha256=a},1536:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},7177:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(0,n(177).__exportStar)(n(9177),t)},9177:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var i=n(177),a=n(1536),r=n(4704),o=n(5274),s=function(){function e(e){if(this.hash=new r.RawSha256,e){this.outer=new r.RawSha256;var t=function(e){var t=(0,o.convertToBuffer)(e);if(t.byteLength>a.BLOCK_SIZE){var n=new r.RawSha256;n.update(t),t=n.digest()}var i=new Uint8Array(a.BLOCK_SIZE);return i.set(t),i}(e),n=new Uint8Array(a.BLOCK_SIZE);n.set(t);for(var i=0;i<a.BLOCK_SIZE;i++)t[i]^=54,n[i]^=92;for(this.hash.update(t),this.outer.update(n),i=0;i<t.byteLength;i++)t[i]=0}}return e.prototype.update=function(e){if(!(0,o.isEmptyData)(e)&&!this.error)try{this.hash.update((0,o.convertToBuffer)(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.digestSync()]}))}))},e}();t.Sha256=s},3530:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var i=n(6432),a="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:i.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?a(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}},5274:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var i=n(3530);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return i.convertToBuffer}});var a=n(395);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return a.isEmptyData}});var r=n(9999);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return r.numToUint8}});var o=n(9680);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return o.uint32ArrayFrom}})},395:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},9999:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},9680:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Array.from){for(var t=new Uint32Array(e.length);0<e.length;)t[0]=e[0];return t}return Uint32Array.from(e)}},6432:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fromUtf8:()=>i,toUtf8:()=>a});const i=e=>"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):(e=>{const t=[];for(let n=0,i=e.length;n<i;n++){const i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){const a=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(a>>18|240,a>>12&63|128,a>>6&63|128,63&a|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)})(e),a=e=>"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):(e=>{let t="";for(let n=0,i=e.length;n<i;n++){const i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){const a=e[++n];t+=String.fromCharCode((31&i)<<6|63&a)}else if(240<=i&&i<365){const a="%"+[i,e[++n],e[++n],e[++n]].map((e=>e.toString(16))).join("%");t+=decodeURIComponent(a)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t})(e)},9394:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AuthenticationDetails:()=>a,AuthenticationHelper:()=>T,CognitoAccessToken:()=>_,CognitoIdToken:()=>D,CognitoRefreshToken:()=>k,CognitoUser:()=>j,CognitoUserAttribute:()=>U,CognitoUserPool:()=>ne,CognitoUserSession:()=>P,CookieStorage:()=>ae,DateHelper:()=>O,WordArray:()=>s,appendToCognitoUserAgent:()=>z});var i,a=function(){function e(e){var t=e||{},n=t.ValidationData,i=t.Username,a=t.Password,r=t.AuthParameters,o=t.ClientMetadata;this.validationData=n||{},this.authParameters=r||{},this.clientMetadata=o||{},this.username=i,this.password=a}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}(),r=n(7197);if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==n.g&&n.g.crypto&&(i=n.g.crypto),!i)try{i=n(8048)}catch(e){}function o(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}var s=function(){function e(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length}var t=e.prototype;return t.random=function(t){for(var n=[],i=0;i<t;i+=4)n.push(o());return new e(n,t)},t.toString=function(){return function(e){for(var t=e.words,n=e.sigBytes,i=[],a=0;a<n;a++){var r=t[a>>>2]>>>24-a%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")}(this)},e}(),c=n(7177);const l=u;function u(e,t){null!=e&&this.fromString(e,t)}function d(){return new u(null)}var p,f="undefined"!=typeof navigator;f&&"Microsoft Internet Explorer"==navigator.appName?(u.prototype.am=function(e,t,n,i,a,r){for(var o=32767&t,s=t>>15;--r>=0;){var c=32767&this[e],l=this[e++]>>15,u=s*c+l*o;a=((c=o*c+((32767&u)<<15)+n[i]+(1073741823&a))>>>30)+(u>>>15)+s*l+(a>>>30),n[i++]=1073741823&c}return a},p=30):f&&"Netscape"!=navigator.appName?(u.prototype.am=function(e,t,n,i,a,r){for(;--r>=0;){var o=t*this[e++]+n[i]+a;a=Math.floor(o/67108864),n[i++]=67108863&o}return a},p=26):(u.prototype.am=function(e,t,n,i,a,r){for(var o=16383&t,s=t>>14;--r>=0;){var c=16383&this[e],l=this[e++]>>14,u=s*c+l*o;a=((c=o*c+((16383&u)<<14)+n[i]+a)>>28)+(u>>14)+s*l,n[i++]=268435455&c}return a},p=28),u.prototype.DB=p,u.prototype.DM=(1<<p)-1,u.prototype.DV=1<<p,u.prototype.FV=Math.pow(2,52),u.prototype.F1=52-p,u.prototype.F2=2*p-52;var g,h,m=new Array;for(g="0".charCodeAt(0),h=0;h<=9;++h)m[g++]=h;for(g="a".charCodeAt(0),h=10;h<36;++h)m[g++]=h;for(g="A".charCodeAt(0),h=10;h<36;++h)m[g++]=h;function v(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function y(e,t){var n=m[e.charCodeAt(t)];return null==n?-1:n}function b(e){var t=d();return t.fromInt(e),t}function w(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function S(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function x(e){return r.hp.from((new s).random(e).toString(),"hex")}S.prototype.convert=function(e){var t=d();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(u.ZERO)>0&&this.m.subTo(t,t),t},S.prototype.revert=function(e){var t=d();return e.copyTo(t),this.reduce(t),t},S.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},S.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},S.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},u.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},u.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},u.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var i=e.length,a=!1,r=0;--i>=0;){var o=y(e,i);o<0?"-"==e.charAt(i)&&(a=!0):(a=!1,0==r?this[this.t++]=o:r+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-r)-1)<<r,this[this.t++]=o>>this.DB-r):this[this.t-1]|=o<<r,(r+=n)>=this.DB&&(r-=this.DB))}this.clamp(),a&&u.ZERO.subTo(this,this)},u.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},u.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},u.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},u.prototype.lShiftTo=function(e,t){var n,i=e%this.DB,a=this.DB-i,r=(1<<a)-1,o=Math.floor(e/this.DB),s=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+o+1]=this[n]>>a|s,s=(this[n]&r)<<i;for(n=o-1;n>=0;--n)t[n]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},u.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var i=e%this.DB,a=this.DB-i,r=(1<<i)-1;t[0]=this[n]>>i;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&r)<<a,t[o-n]=this[o]>>i;i>0&&(t[this.t-n-1]|=(this.s&r)<<a),t.t=this.t-n,t.clamp()}},u.prototype.subTo=function(e,t){for(var n=0,i=0,a=Math.min(e.t,this.t);n<a;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()},u.prototype.multiplyTo=function(e,t){var n=this.abs(),i=e.abs(),a=n.t;for(t.t=a+i.t;--a>=0;)t[a]=0;for(a=0;a<i.t;++a)t[a+n.t]=n.am(0,i[a],t,a,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&u.ZERO.subTo(t,t)},u.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},u.prototype.divRemTo=function(e,t,n){var i=e.abs();if(!(i.t<=0)){var a=this.abs();if(a.t<i.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=d());var r=d(),o=this.s,s=e.s,c=this.DB-w(i[i.t-1]);c>0?(i.lShiftTo(c,r),a.lShiftTo(c,n)):(i.copyTo(r),a.copyTo(n));var l=r.t,p=r[l-1];if(0!=p){var f=p*(1<<this.F1)+(l>1?r[l-2]>>this.F2:0),g=this.FV/f,h=(1<<this.F1)/f,m=1<<this.F2,v=n.t,y=v-l,b=null==t?d():t;for(r.dlShiftTo(y,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),u.ONE.dlShiftTo(l,b),b.subTo(r,r);r.t<l;)r[r.t++]=0;for(;--y>=0;){var S=n[--v]==p?this.DM:Math.floor(n[v]*g+(n[v-1]+m)*h);if((n[v]+=r.am(0,S,n,y,0,l))<S)for(r.dlShiftTo(y,b),n.subTo(b,n);n[v]<--S;)n.subTo(b,n)}null!=t&&(n.drShiftTo(l,t),o!=s&&u.ZERO.subTo(t,t)),n.t=l,n.clamp(),c>0&&n.rShiftTo(c,n),o<0&&u.ZERO.subTo(n,n)}}},u.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(!(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},u.prototype.addTo=function(e,t){for(var n=0,i=0,a=Math.min(e.t,this.t);n<a;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[n++]=i:i<-1&&(t[n++]=this.DV+i),t.t=n,t.clamp()},u.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,i=(1<<t)-1,a=!1,r="",o=this.t,s=this.DB-o*this.DB%t;if(o-- >0)for(s<this.DB&&(n=this[o]>>s)>0&&(a=!0,r=v(n));o>=0;)s<t?(n=(this[o]&(1<<s)-1)<<t-s,n|=this[--o]>>(s+=this.DB-t)):(n=this[o]>>(s-=t)&i,s<=0&&(s+=this.DB,--o)),n>0&&(a=!0),a&&(r+=v(n));return a?r:"0"},u.prototype.negate=function(){var e=d();return u.ZERO.subTo(this,e),e},u.prototype.abs=function(){return this.s<0?this.negate():this},u.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},u.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+w(this[this.t-1]^this.s&this.DM)},u.prototype.mod=function(e){var t=d();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(u.ZERO)>0&&e.subTo(t,t),t},u.prototype.equals=function(e){return 0==this.compareTo(e)},u.prototype.add=function(e){var t=d();return this.addTo(e,t),t},u.prototype.subtract=function(e){var t=d();return this.subTo(e,t),t},u.prototype.multiply=function(e){var t=d();return this.multiplyTo(e,t),t},u.prototype.divide=function(e){var t=d();return this.divRemTo(e,t,null),t},u.prototype.modPow=function(e,t,n){var i,a=e.bitLength(),r=b(1),o=new S(t);if(a<=0)return r;i=a<18?1:a<48?3:a<144?4:a<768?5:6;var s=new Array,c=3,l=i-1,u=(1<<i)-1;if(s[1]=o.convert(this),i>1){var p=d();for(o.sqrTo(s[1],p);c<=u;)s[c]=d(),o.mulTo(p,s[c-2],s[c]),c+=2}var f,g,h=e.t-1,m=!0,v=d();for(a=w(e[h])-1;h>=0;){for(a>=l?f=e[h]>>a-l&u:(f=(e[h]&(1<<a+1)-1)<<l-a,h>0&&(f|=e[h-1]>>this.DB+a-l)),c=i;!(1&f);)f>>=1,--c;if((a-=c)<0&&(a+=this.DB,--h),m)s[f].copyTo(r),m=!1;else{for(;c>1;)o.sqrTo(r,v),o.sqrTo(v,r),c-=2;c>0?o.sqrTo(r,v):(g=r,r=v,v=g),o.mulTo(v,s[f],r)}for(;h>=0&&!(e[h]&1<<a);)o.sqrTo(r,v),g=r,r=v,v=g,--a<0&&(a=this.DB-1,--h)}var y=o.revert(r);return n(null,y),y},u.ZERO=b(0),u.ONE=b(1);var C=/^[89a-f]/i,T=function(){function e(e){this.N=new l("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new l("2",16),this.k=new l(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue((function(){})),this.infoBits=r.hp.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(e){var t=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,(function(n,i){n&&e(n,null),t.largeAValue=i,e(null,t.largeAValue)}))},t.generateRandomSmallA=function(){var e=x(128).toString("hex");return new l(e,16)},t.generateRandomString=function(){return x(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var i=this;this.randomPassword=this.generateRandomString();var a=""+e+t+":"+this.randomPassword,r=this.hash(a),o=x(16).toString("hex");this.SaltToHashDevices=this.padHex(new l(o,16)),this.g.modPow(new l(this.hexHash(this.SaltToHashDevices+r),16),this.N,(function(e,t){e&&n(e,null),i.verifierDevices=i.padHex(t),n(null,null)}))},t.calculateA=function(e,t){var n=this;this.g.modPow(e,this.N,(function(e,i){e&&t(e,null),i.mod(n.N).equals(l.ZERO)&&t(new Error("Illegal paramater. A mod N cannot be 0."),null),t(null,i)}))},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new l(this.UHexHash,16)},t.hash=function(e){var t=new c.Sha256;t.update(e);var n=t.digestSync(),i=r.hp.from(n).toString("hex");return new Array(64-i.length).join("0")+i},t.hexHash=function(e){return this.hash(r.hp.from(e,"hex"))},t.computehkdf=function(e,t){var n=r.hp.concat([this.infoBits,r.hp.from(String.fromCharCode(1),"utf8")]),i=new c.Sha256(t);i.update(e);var a=i.digestSync(),o=new c.Sha256(a);return o.update(n),o.digestSync().slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,i,a){var o=this;if(n.mod(this.N).equals(l.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(l.ZERO))throw new Error("U cannot be zero.");var s=""+this.poolName+e+":"+t,c=this.hash(s),u=new l(this.hexHash(this.padHex(i)+c),16);this.calculateS(u,n,(function(e,t){e&&a(e,null);var n=o.computehkdf(r.hp.from(o.padHex(t),"hex"),r.hp.from(o.padHex(o.UValue),"hex"));a(null,n)}))},t.calculateS=function(e,t,n){var i=this;this.g.modPow(e,this.N,(function(a,r){a&&n(a,null),t.subtract(i.k.multiply(r)).modPow(i.smallAValue.add(i.UValue.multiply(e)),i.N,(function(e,t){e&&n(e,null),n(null,t.mod(i.N))}))}))},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){if(!(e instanceof l))throw new Error("Not a BigInteger");var t=e.compareTo(l.ZERO)<0,n=e.abs().toString(16);if(n=n.length%2!=0?"0"+n:n,n=C.test(n)?"00"+n:n,t){var i=n.split("").map((function(e){var t=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(t)})).join("");(n=new l(i,16).add(l.ONE).toString(16)).toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},e}(),E=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(r.hp.from(e,"base64").toString("utf8"))}catch(e){return{}}},e}();function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var _=function(e){var t,n;function i(t){var n=(void 0===t?{}:t).AccessToken;return e.call(this,n||"")||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,I(t,n),i}(E);function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}var D=function(e){var t,n;function i(t){var n=(void 0===t?{}:t).IdToken;return e.call(this,n||"")||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,A(t,n),i}(E),k=function(){function e(e){var t=(void 0===e?{}:e).RefreshToken;this.token=t||""}return e.prototype.getToken=function(){return this.token},e}(),P=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,i=t.RefreshToken,a=t.AccessToken,r=t.ClockDrift;if(null==a||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=i,this.accessToken=a,this.clockDrift=void 0===r?this.calculateClockDrift():r}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],R=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],O=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=R[e.getUTCDay()],n=B[e.getUTCMonth()],i=e.getUTCDate(),a=e.getUTCHours();a<10&&(a="0"+a);var r=e.getUTCMinutes();r<10&&(r="0"+r);var o=e.getUTCSeconds();return o<10&&(o="0"+o),t+" "+n+" "+i+" "+a+":"+r+":"+o+" UTC "+e.getUTCFullYear()},e}(),U=function(){function e(e){var t=void 0===e?{}:e,n=t.Name,i=t.Value;this.Name=n||"",this.Value=i||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),N={},M=function(){function e(){}return e.setItem=function(e,t){return N[e]=t,N[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(N,e)?N[e]:void 0},e.removeItem=function(e){return delete N[e]},e.clear=function(){return N={}},e}(),F=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=M}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),L="undefined"!=typeof navigator?navigator.userAgent:"nodejs",j=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new F).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,t){var n=this,i=e.getAuthParameters();i.USERNAME=this.username;var a=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),r={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:i,ClientMetadata:a};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",r,(function(e,i){if(e)return t.onFailure(e);var a=i.ChallengeName,r=i.ChallengeParameters;return"CUSTOM_CHALLENGE"===a?(n.Session=i.Session,t.customChallenge(r)):(n.signInUserSession=n.getCognitoUserSession(i.AuthenticationResult),n.cacheTokens(),t.onSuccess(n.signInUserSession))}))},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(e,t){var n,i,a=this,o=new T(this.pool.getUserPoolName()),s=new O,u={};null!=this.deviceKey&&(u.DEVICE_KEY=this.deviceKey),u.USERNAME=this.username,o.getLargeAValue((function(d,p){d&&t.onFailure(d),u.SRP_A=p.toString(16),"CUSTOM_AUTH"===a.authenticationFlowType&&(u.CHALLENGE_NAME="SRP_A");var f=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),g={AuthFlow:a.authenticationFlowType,ClientId:a.pool.getClientId(),AuthParameters:u,ClientMetadata:f};a.getUserContextData(a.username)&&(g.UserContextData=a.getUserContextData(a.username)),a.client.request("InitiateAuth",g,(function(u,d){if(u)return t.onFailure(u);var p=d.ChallengeParameters;a.username=p.USER_ID_FOR_SRP,a.userDataKey=a.keyPrefix+"."+a.username+".userData",n=new l(p.SRP_B,16),i=new l(p.SALT,16),a.getCachedDeviceKeyAndPassword(),o.getPasswordAuthenticationKey(a.username,e.getPassword(),n,i,(function(e,n){e&&t.onFailure(e);var i=s.getNowString(),l=r.hp.concat([r.hp.from(a.pool.getUserPoolName(),"utf8"),r.hp.from(a.username,"utf8"),r.hp.from(p.SECRET_BLOCK,"base64"),r.hp.from(i,"utf8")]),u=new c.Sha256(n);u.update(l);var g=u.digestSync(),h=r.hp.from(g).toString("base64"),m={};m.USERNAME=a.username,m.PASSWORD_CLAIM_SECRET_BLOCK=p.SECRET_BLOCK,m.TIMESTAMP=i,m.PASSWORD_CLAIM_SIGNATURE=h,null!=a.deviceKey&&(m.DEVICE_KEY=a.deviceKey);var v={ChallengeName:"PASSWORD_VERIFIER",ClientId:a.pool.getClientId(),ChallengeResponses:m,Session:d.Session,ClientMetadata:f};a.getUserContextData()&&(v.UserContextData=a.getUserContextData()),function e(t,n){return a.client.request("RespondToAuthChallenge",t,(function(i,r){return i&&"ResourceNotFoundException"===i.code&&-1!==i.message.toLowerCase().indexOf("device")?(m.DEVICE_KEY=null,a.deviceKey=null,a.randomPassword=null,a.deviceGroupKey=null,a.clearCachedDeviceKeyAndPassword(),e(t,n)):n(i,r)}))}(v,(function(e,n){return e?t.onFailure(e):a.authenticateUserInternal(n,o,t)}))}))}))}))},t.authenticateUserPlainUsernamePassword=function(e,t){var n=this,i={};if(i.USERNAME=this.username,i.PASSWORD=e.getPassword(),i.PASSWORD){var a=new T(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);var r=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),o={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:i,ClientMetadata:r};this.getUserContextData(this.username)&&(o.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",o,(function(e,i){return e?t.onFailure(e):n.authenticateUserInternal(i,a,t)}))}else t.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(e,t,n){var i=this,a=e.ChallengeName,o=e.ChallengeParameters;if("SMS_MFA"===a)return this.Session=e.Session,n.mfaRequired(a,o);if("SELECT_MFA_TYPE"===a)return this.Session=e.Session,n.selectMFAType(a,o);if("MFA_SETUP"===a)return this.Session=e.Session,n.mfaSetup(a,o);if("SOFTWARE_TOKEN_MFA"===a)return this.Session=e.Session,n.totpRequired(a,o);if("CUSTOM_CHALLENGE"===a)return this.Session=e.Session,n.customChallenge(o);if("NEW_PASSWORD_REQUIRED"===a){this.Session=e.Session;var s=null,c=null,l=[],u=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(o&&(s=JSON.parse(e.ChallengeParameters.userAttributes),c=JSON.parse(e.ChallengeParameters.requiredAttributes)),c)for(var d=0;d<c.length;d++)l[d]=c[d].substr(u.length);return n.newPasswordRequired(s,l)}if("DEVICE_SRP_AUTH"===a)return this.Session=e.Session,void this.getDeviceResponse(n);this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=a,this.cacheTokens();var p=e.AuthenticationResult.NewDeviceMetadata;if(null==p)return n.onSuccess(this.signInUserSession);t.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(a){if(a)return n.onFailure(a);var o={Salt:r.hp.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:r.hp.from(t.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=o.PasswordVerifier,i.deviceGroupKey=p.DeviceGroupKey,i.randomPassword=t.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:p.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:L},(function(t,a){return t?n.onFailure(t):(i.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===a.UserConfirmationNecessary?n.onSuccess(i.signInUserSession,a.UserConfirmationNecessary):n.onSuccess(i.signInUserSession))}))}))},t.completeNewPasswordChallenge=function(e,t,n,i){var a=this;if(!e)return n.onFailure(new Error("New password is required."));var r=new T(this.pool.getUserPoolName()),o=r.getNewPasswordRequiredChallengeUserAttributePrefix(),s={};t&&Object.keys(t).forEach((function(e){s[o+e]=t[e]})),s.NEW_PASSWORD=e,s.USERNAME=this.username;var c={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:s,Session:this.Session,ClientMetadata:i};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",c,(function(e,t){return e?n.onFailure(e):a.authenticateUserInternal(t,r,n)}))},t.getDeviceResponse=function(e,t){var n=this,i=new T(this.deviceGroupKey),a=new O,o={};o.USERNAME=this.username,o.DEVICE_KEY=this.deviceKey,i.getLargeAValue((function(s,u){s&&e.onFailure(s),o.SRP_A=u.toString(16);var d={ChallengeName:"DEVICE_SRP_AUTH",ClientId:n.pool.getClientId(),ChallengeResponses:o,ClientMetadata:t,Session:n.Session};n.getUserContextData()&&(d.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",d,(function(t,o){if(t)return e.onFailure(t);var s=o.ChallengeParameters,u=new l(s.SRP_B,16),d=new l(s.SALT,16);i.getPasswordAuthenticationKey(n.deviceKey,n.randomPassword,u,d,(function(t,i){if(t)return e.onFailure(t);var l=a.getNowString(),u=r.hp.concat([r.hp.from(n.deviceGroupKey,"utf8"),r.hp.from(n.deviceKey,"utf8"),r.hp.from(s.SECRET_BLOCK,"base64"),r.hp.from(l,"utf8")]),d=new c.Sha256(i);d.update(u);var p=d.digestSync(),f=r.hp.from(p).toString("base64"),g={};g.USERNAME=n.username,g.PASSWORD_CLAIM_SECRET_BLOCK=s.SECRET_BLOCK,g.TIMESTAMP=l,g.PASSWORD_CLAIM_SIGNATURE=f,g.DEVICE_KEY=n.deviceKey;var h={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:g,Session:o.Session};n.getUserContextData()&&(h.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",h,(function(t,i){return t?e.onFailure(t):(n.signInUserSession=n.getCognitoUserSession(i.AuthenticationResult),n.cacheTokens(),e.onSuccess(n.signInUserSession))}))}))}))}))},t.confirmRegistration=function(e,t,n,i){var a={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:i};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",a,(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.sendCustomChallengeAnswer=function(e,t,n){var i=this,a={};a.USERNAME=this.username,a.ANSWER=e;var r=new T(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(a.DEVICE_KEY=this.deviceKey);var o={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:a,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",o,(function(e,n){return e?t.onFailure(e):i.authenticateUserInternal(n,r,t)}))},t.sendMFACode=function(e,t,n,i){var a=this,o={};o.USERNAME=this.username,o.SMS_MFA_CODE=e;var s=n||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===s&&(o.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);var c={ChallengeName:s,ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:i};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",c,(function(e,n){if(e)return t.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(a.signInUserSession=a.getCognitoUserSession(n.AuthenticationResult),a.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return t.onSuccess(a.signInUserSession);var i=new T(a.pool.getUserPoolName());i.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(e){if(e)return t.onFailure(e);var o={Salt:r.hp.from(i.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:r.hp.from(i.getVerifierDevices(),"hex").toString("base64")};a.verifierDevices=o.PasswordVerifier,a.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,a.randomPassword=i.getRandomPassword(),a.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:a.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:L},(function(e,i){return e?t.onFailure(e):(a.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,a.cacheDeviceKeyAndPassword(),!0===i.UserConfirmationNecessary?t.onSuccess(a.signInUserSession,i.UserConfirmationNecessary):t.onSuccess(a.signInUserSession))}))}))}else a.getDeviceResponse(t)}))},t.changePassword=function(e,t,n,i){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:i},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.enableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var t=[];t.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.disableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.deleteUser=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},(function(t){return t?e(t,null):(n.clearCachedUser(),e(null,"SUCCESS"))}))},t.updateAttributes=function(e,t,n){var i=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},(function(e){return e?t(e,null):i.getUserData((function(){return t(null,"SUCCESS")}),{bypassCache:!0})}))},t.getUserAttributes=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){if(t)return e(t,null);for(var i=[],a=0;a<n.UserAttributes.length;a++){var r={Name:n.UserAttributes[a].Name,Value:n.UserAttributes[a].Value},o=new U(r);i.push(o)}return e(null,i)}))},t.getMFAOptions=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e(t,null):e(null,n.MFAOptions)}))},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(e){var t=this;return void 0===e&&(e={}),new Promise((function(n){var i=t.signInUserSession.getRefreshToken();i&&i.getToken()?t.refreshSession(i,n,e.clientMetadata):n()}))},t.getUserData=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var i=this.getUserDataFromCache();if(i)if(this.isFetchUserDataAndTokenRequired(t))this.fetchUserData().then((function(e){return n.refreshSessionIfPossible(t).then((function(){return e}))})).then((function(t){return e(null,t)})).catch(e);else try{return void e(null,JSON.parse(i))}catch(t){return this.clearCachedUserData(),void e(t,null)}else this.fetchUserData().then((function(t){e(null,t)})).catch(e)},t.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},t.isFetchUserDataAndTokenRequired=function(e){var t=(e||{}).bypassCache;return void 0!==t&&t},t.fetchUserData=function(){var e=this;return this.createGetUserRequest().then((function(t){return e.cacheUserData(t),t}))},t.deleteAttributes=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?t(e,null):n.getUserData((function(){return t(null,"SUCCESS")}),{bypassCache:!0})}))},t.resendConfirmationCode=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.client.request("ResendConfirmationCode",n,(function(t,n){return t?e(t,null):e(null,n)}))},t.getSession=function(e,t){if(void 0===t&&(t={}),null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,i=n+".idToken",a=n+".accessToken",r=n+".refreshToken",o=n+".clockDrift";if(this.storage.getItem(i)){var s=new D({IdToken:this.storage.getItem(i)}),c=new _({AccessToken:this.storage.getItem(a)}),l=new k({RefreshToken:this.storage.getItem(r)}),u=parseInt(this.storage.getItem(o),0)||0,d=new P({IdToken:s,AccessToken:c,RefreshToken:l,ClockDrift:u});if(d.isValid())return this.signInUserSession=d,e(null,this.signInUserSession);if(!l.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(l,e,t.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(e,t,n){var i=this,a=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(t):t,r={};r.REFRESH_TOKEN=e.getToken();var o="CognitoIdentityServiceProvider."+this.pool.getClientId(),s=o+".LastAuthUser";if(this.storage.getItem(s)){this.username=this.storage.getItem(s);var c=o+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(c),r.DEVICE_KEY=this.deviceKey}var l={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:r,ClientMetadata:n};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",l,(function(t,n){if(t)return"NotAuthorizedException"===t.code&&i.clearCachedUser(),a(t,null);if(n){var r=n.AuthenticationResult;return Object.prototype.hasOwnProperty.call(r,"RefreshToken")||(r.RefreshToken=e.getToken()),i.signInUserSession=i.getCognitoUserSession(r),i.cacheTokens(),a(null,i.signInUserSession)}}))},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",i=e+"."+this.username+".refreshToken",a=e+"."+this.username+".clockDrift",r=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(i,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(a,""+this.signInUserSession.getClockDrift()),this.storage.setItem(r,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",i=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(i,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",i=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(i))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",i=e+".deviceGroupKey";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(i)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",i=e+"."+this.username+".refreshToken",a=e+".LastAuthUser",r=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(i),this.storage.removeItem(a),this.storage.removeItem(r)},t.getCognitoUserSession=function(e){var t=new D(e),n=new _(e),i=new k(e);return new P({IdToken:t,AccessToken:n,RefreshToken:i})},t.forgotPassword=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",n,(function(t,n){return t?e.onFailure(t):"function"==typeof e.inputVerificationCode?e.inputVerificationCode(n):e.onSuccess(n)}))},t.confirmPassword=function(e,t,n,i){var a={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:i};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",a,(function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")}))},t.getAttributeVerificationCode=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:n},(function(e,n){return e?t.onFailure(e):"function"==typeof t.inputVerificationCode?t.inputVerificationCode(n):t.onSuccess("SUCCESS")}))},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")}))},t.getDevice=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},(function(t,n){return t?e.onFailure(t):e.onSuccess(n)}))},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},(function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")}))},t.forgetDevice=function(e){var t=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(n){return t.deviceKey=null,t.deviceGroupKey=null,t.randomPassword=null,t.clearCachedDeviceKeyAndPassword(),e.onSuccess(n)}})},t.setDeviceStatusRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.setDeviceStatusNotRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));var i={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(i.PaginationToken=t),this.client.request("ListDevices",i,(function(e,t){return e?n.onFailure(e):n.onSuccess(t)}))},t.globalSignOut=function(e){var t=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(n){return n?e.onFailure(n):(t.clearCachedUser(),e.onSuccess("SUCCESS"))}))},t.signOut=function(e){var t=this;e&&"function"==typeof e?this.getSession((function(n,i){if(n)return e(n);t.revokeTokens((function(n){t.cleanClientData(),e(n)}))})):this.cleanClientData()},t.revokeTokens=function(e){if(void 0===e&&(e=function(){}),"function"!=typeof e)throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession)return e(new Error("User is not authenticated"));if(!this.signInUserSession.getAccessToken())return e(new Error("No Access token available"));var t=this.signInUserSession.getRefreshToken().getToken(),n=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(n)&&t)return this.revokeToken({token:t,callback:e});e()},t.isSessionRevocable=function(e){if(e&&"function"==typeof e.decodePayload)try{return!!e.decodePayload().origin_jti}catch(e){}return!1},t.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},t.revokeToken=function(e){var t=e.token,n=e.callback;this.client.requestWithRetry("RevokeToken",{Token:t,ClientId:this.pool.getClientId()},(function(e){if(e)return n(e);n()}))},t.sendMFASelectionAnswer=function(e,t){var n=this,i={};i.USERNAME=this.username,i.ANSWER=e;var a={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,(function(i,a){return i?t.onFailure(i):(n.Session=a.Session,"SMS_MFA"===e?t.mfaRequired(a.ChallengeName,a.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===e?t.totpRequired(a.ChallengeName,a.ChallengeParameters):void 0)}))},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(e){var t=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e.onFailure(t):e.associateSecretCode(n.SecretCode)})):this.client.request("AssociateSoftwareToken",{Session:this.Session},(function(n,i){return n?e.onFailure(n):(t.Session=i.Session,e.associateSecretCode(i.SecretCode))}))},t.verifySoftwareToken=function(e,t,n){var i=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},(function(e,t){return e?n.onFailure(e):n.onSuccess(t)})):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},(function(e,t){if(e)return n.onFailure(e);i.Session=t.Session;var a={};a.USERNAME=i.username;var r={ChallengeName:"MFA_SETUP",ClientId:i.pool.getClientId(),ChallengeResponses:a,Session:i.Session};i.getUserContextData()&&(r.UserContextData=i.getUserContextData()),i.client.request("RespondToAuthChallenge",r,(function(e,t){return e?n.onFailure(e):(i.signInUserSession=i.getCognitoUserSession(t.AuthenticationResult),i.cacheTokens(),n.onSuccess(i.signInUserSession))}))}))},e}(),V=(n(2934),"aws-amplify/5.0.4"),K={userAgent:V+" js",product:"",navigator:null,isReactNative:!1};function q(){}"undefined"!=typeof navigator&&navigator.product&&(K.product=navigator.product||"",K.navigator=navigator||null,"ReactNative"===navigator.product?(K.userAgent=V+" react-native",K.isReactNative=!0):(K.userAgent=V+" js",K.isReactNative=!1)),q.prototype.userAgent=K.userAgent;var z=function(e){e&&(q.prototype.userAgent&&!q.prototype.userAgent.includes(e)&&(q.prototype.userAgent=q.prototype.userAgent.concat(" ",e)),q.prototype.userAgent&&""!==q.prototype.userAgent||(q.prototype.userAgent=e))};const W=q;function H(e){var t="function"==typeof Map?new Map:void 0;return H=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return G(e,arguments,Q(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),$(i,e)},H(e)}function G(e,t,n){return G=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&$(a,n.prototype),a},G.apply(null,arguments)}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}var Y=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t)||this).code=n,r.name=i,r.statusCode=a,r}return i=e,(n=t).prototype=Object.create(i.prototype),n.prototype.constructor=n,$(n,i),t;var n,i}(H(Error)),X=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";var i=(n||{}).credentials;this.fetchOptions=i?{credentials:i}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var n=this;return new Promise((function(i,a){n.request(e,t,(function(e,t){e?a(new Y(e.message,e.code,e.name,e.statusCode)):i(t)}))}))},t.requestWithRetry=function(e,t,n){var i,a,r=this;(i=[t],a=5e3,void 0===a&&(a=te),ee((function(t){return new Promise((function(n,i){r.request(e,t,(function(e,t){e?i(e):n(t)}))}))}),i,function(e){return function(t){var n=100*Math.pow(2,t)+100*Math.random();return!(n>e)&&n}}(a))).then((function(e){return n(null,e)})).catch((function(e){return n(e)}))},t.request=function(e,t,n){var i,a={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":W.prototype.userAgent},r=Object.assign({},this.fetchOptions,{headers:a,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,r).then((function(e){return i=e,e}),(function(e){if(e instanceof TypeError)throw new Error("Network error");throw e})).then((function(e){return e.json().catch((function(){return{}}))})).then((function(e){if(i.ok)return n(null,e);var t=(e.__type||e.code).split("#").pop(),a=new Error(e.message||e.Message||null);return a.name=t,a.code=t,n(a)})).catch((function(e){if(i&&i.headers&&i.headers.get("x-amzn-errortype"))try{var t=i.headers.get("x-amzn-errortype").split(":")[0],a=new Error(i.status?i.status.toString():null);return a.code=t,a.name=t,a.statusCode=i.status,n(a)}catch(t){return n(e)}else e instanceof Error&&"Network error"===e.message&&(e.code="NetworkError");return n(e)}))},e}(),J={debug:function(){}},Z=function(e){return e&&e.nonRetryable};function ee(e,t,n,i){if(void 0===i&&(i=1),"function"!=typeof e)throw Error("functionToRetry must be a function");return J.debug(e.name+" attempt #"+i+" with args: "+JSON.stringify(t)),e.apply(void 0,t).catch((function(a){if(J.debug("error on "+e.name,a),Z(a))throw J.debug(e.name+" non retryable error",a),a;var r=n(i,t,a);if(J.debug(e.name+" retrying in "+r+" ms"),!1!==r)return new Promise((function(e){return setTimeout(e,r)})).then((function(){return ee(e,t,n,i+1)}));throw a}))}var te=3e5,ne=function(){function e(e,t){var n=e||{},i=n.UserPoolId,a=n.ClientId,r=n.endpoint,o=n.fetchOptions,s=n.AdvancedSecurityDataCollectionFlag;if(!i||!a)throw new Error("Both UserPoolId and ClientId are required.");if(i.length>55||!/^[\w-]+_[0-9a-zA-Z]+$/.test(i))throw new Error("Invalid UserPoolId format.");var c=i.split("_")[0];this.userPoolId=i,this.clientId=a,this.client=new X(c,r,o),this.advancedSecurityDataCollectionFlag=!1!==s,this.storage=e.Storage||(new F).getStorage(),t&&(this.wrapRefreshSessionCallback=t)}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},t.getClientId=function(){return this.clientId},t.signUp=function(e,t,n,i,a,r){var o=this,s={ClientId:this.clientId,Username:e,Password:t,UserAttributes:n,ValidationData:i,ClientMetadata:r};this.getUserContextData(e)&&(s.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",s,(function(t,n){if(t)return a(t,null);var i={Username:e,Pool:o,Storage:o.storage},r={user:new j(i),userConfirmed:n.UserConfirmed,userSub:n.UserSub,codeDeliveryDetails:n.CodeDeliveryDetails};return a(null,r)}))},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",t=this.storage.getItem(e);if(t){var n={Username:t,Pool:this,Storage:this.storage};return new j(n)}return null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},e}(),ie=n(6217),ae=function(){function e(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=e.prototype;return t.setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),ie.set(e,t,n),ie.get(e)},t.getItem=function(e){return ie.get(e)},t.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),ie.remove(e,t)},t.clear=function(){for(var e=ie.get(),t=Object.keys(e).length,n=0;n<t;++n)this.removeItem(Object.keys(e)[n]);return{}},e}()},3764:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,r=s(e),o=r[0],c=r[1],l=new a(function(e,t,n){return 3*(t+n)/4-n}(0,o,c)),u=0,d=c>0?o-4:o;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===c&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===c&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,i=e.length,a=i%3,r=[],o=16383,s=0,l=i-a;s<l;s+=o)r.push(c(e,s,s+o>l?l:s+o));return 1===a?(t=e[i-1],r.push(n[t>>2]+n[t<<4&63]+"==")):2===a&&(t=(e[i-2]<<8)+e[i-1],r.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),r.join("")};for(var n=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=r[o],i[r.charCodeAt(o)]=o;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,i){for(var a,r,o=[],s=t;s<i;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(r=a)>>18&63]+n[r>>12&63]+n[r>>6&63]+n[63&r]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},7197:(e,t,n)=>{"use strict";var i=n(3764),a=n(1041),r=n(208);function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=p(e,t),e}(e,t,n,i):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|g(t,n),a=(e=s(e,i)).write(t,n);return a!==i&&(e=e.slice(0,a)),e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|f(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?s(e,0):p(e,t);if("Buffer"===t.type&&r(t.data))return p(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=s(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|f(t.length);e=s(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function f(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(i)return j(e).length;t=(""+t).toLowerCase(),i=!0}}function h(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function v(e,t,n,i,a){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:y(e,t,n,i,a);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,i,a);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,i,a){var r,o=1,s=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,s/=2,c/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var u=-1;for(r=n;r<s;r++)if(l(e,r)===l(t,-1===u?0:r-u)){if(-1===u&&(u=r),r-u+1===c)return u*o}else-1!==u&&(r-=r-u),u=-1}else for(n+c>s&&(n=s-c),r=n;r>=0;r--){for(var d=!0,p=0;p<c;p++)if(l(e,r+p)!==l(t,p)){d=!1;break}if(d)return r}return-1}function b(e,t,n,i){n=Number(n)||0;var a=e.length-n;i?(i=Number(i))>a&&(i=a):i=a;var r=t.length;if(r%2!=0)throw new TypeError("Invalid hex string");i>r/2&&(i=r/2);for(var o=0;o<i;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function w(e,t,n,i){return K(j(t,e.length-n),e,n,i)}function S(e,t,n,i){return K(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function x(e,t,n,i){return S(e,t,n,i)}function C(e,t,n,i){return K(V(t),e,n,i)}function T(e,t,n,i){return K(function(e,t){for(var n,i,a,r=[],o=0;o<e.length&&!((t-=2)<0);++o)i=(n=e.charCodeAt(o))>>8,a=n%256,r.push(a),r.push(i);return r}(t,e.length-n),e,n,i)}function E(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);for(var i=[],a=t;a<n;){var r,o,s,c,l=e[a],u=null,d=l>239?4:l>223?3:l>191?2:1;if(a+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(r=e[a+1]))&&(c=(31&l)<<6|63&r)>127&&(u=c);break;case 3:r=e[a+1],o=e[a+2],128==(192&r)&&128==(192&o)&&(c=(15&l)<<12|(63&r)<<6|63&o)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:r=e[a+1],o=e[a+2],s=e[a+3],128==(192&r)&&128==(192&o)&&128==(192&s)&&(c=(15&l)<<18|(63&r)<<12|(63&o)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),a+=d}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=_));return n}(i)}t.hp=c,t.IS=50,c.TYPED_ARRAY_SUPPORT=void 0!==n.g.TYPED_ARRAY_SUPPORT?n.g.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),o(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,i){return u(t),t<=0?s(e,t):void 0!==n?"string"==typeof i?s(e,t).fill(n,i):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,a=0,r=Math.min(n,i);a<r;++a)if(e[a]!==t[a]){n=e[a],i=t[a];break}return n<i?-1:i<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!r(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=c.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var o=e[n];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,a),a+=o.length}return i},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?I(this,0,e):h.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.IS;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,i,a){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===a&&(a=this.length),t<0||n>e.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&t>=n)return 0;if(i>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var r=(a>>>=0)-(i>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(r,o),l=this.slice(i,a),u=e.slice(t,n),d=0;d<s;++d)if(l[d]!==u[d]){r=l[d],o=u[d];break}return r<o?-1:o<r?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},c.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var r=!1;;)switch(i){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function A(e,t,n){var i="";n=Math.min(e.length,n);for(var a=t;a<n;++a)i+=String.fromCharCode(127&e[a]);return i}function D(e,t,n){var i="";n=Math.min(e.length,n);for(var a=t;a<n;++a)i+=String.fromCharCode(e[a]);return i}function k(e,t,n){var i,a=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>a)&&(n=a);for(var r="",o=t;o<n;++o)r+=(i=e[o])<16?"0"+i.toString(16):i.toString(16);return r}function P(e,t,n){for(var i=e.slice(t,n),a="",r=0;r<i.length;r+=2)a+=String.fromCharCode(i[r]+256*i[r+1]);return a}function B(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,i,a,r){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<r)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function O(e,t,n,i){t<0&&(t=65535+t+1);for(var a=0,r=Math.min(e.length-n,2);a<r;++a)e[n+a]=(t&255<<8*(i?a:1-a))>>>8*(i?a:1-a)}function U(e,t,n,i){t<0&&(t=4294967295+t+1);for(var a=0,r=Math.min(e.length-n,4);a<r;++a)e[n+a]=t>>>8*(i?a:3-a)&255}function N(e,t,n,i,a,r){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,n,i,r){return r||N(e,0,n,4),a.write(e,t,n,i,23,4),n+4}function F(e,t,n,i,r){return r||N(e,0,n,8),a.write(e,t,n,i,52,8),n+8}c.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var a=t-e;n=new c(a,void 0);for(var r=0;r<a;++r)n[r]=this[r+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var i=this[e],a=1,r=0;++r<t&&(a*=256);)i+=this[e+r]*a;return i},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var i=this[e+--t],a=1;t>0&&(a*=256);)i+=this[e+--t]*a;return i},c.prototype.readUInt8=function(e,t){return t||B(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||B(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||B(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var i=this[e],a=1,r=0;++r<t&&(a*=256);)i+=this[e+r]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var i=t,a=1,r=this[e+--i];i>0&&(a*=256);)r+=this[e+--i]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readInt8=function(e,t){return t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||B(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||B(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||B(e,4,this.length),a.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||B(e,4,this.length),a.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||B(e,8,this.length),a.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||B(e,8,this.length),a.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,i){e=+e,t|=0,n|=0,i||R(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,r=0;for(this[t]=255&e;++r<n&&(a*=256);)this[t+r]=e/a&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,i){e=+e,t|=0,n|=0,i||R(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,r=1;for(this[t+a]=255&e;--a>=0&&(r*=256);)this[t+a]=e/r&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):U(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var a=Math.pow(2,8*n-1);R(this,e,t,n,a-1,-a)}var r=0,o=1,s=0;for(this[t]=255&e;++r<n&&(o*=256);)e<0&&0===s&&0!==this[t+r-1]&&(s=1),this[t+r]=(e/o|0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var a=Math.pow(2,8*n-1);R(this,e,t,n,a-1,-a)}var r=n-1,o=1,s=0;for(this[t+r]=255&e;--r>=0&&(o*=256);)e<0&&0===s&&0!==this[t+r+1]&&(s=1),this[t+r]=(e/o|0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):U(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var a,r=i-n;if(this===e&&n<t&&t<i)for(a=r-1;a>=0;--a)e[a+t]=this[a+n];else if(r<1e3||!c.TYPED_ARRAY_SUPPORT)for(a=0;a<r;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+r),t);return r},c.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{var o=c.isBuffer(e)?e:j(new c(e,i).toString()),s=o.length;for(r=0;r<n-t;++r)this[r+t]=o[r%s]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function j(e,t){var n;t=t||1/0;for(var i=e.length,a=null,r=[],o=0;o<i;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&r.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&r.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&r.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;r.push(n)}else if(n<2048){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function V(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,n,i){for(var a=0;a<i&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}},1041:(e,t)=>{t.read=function(e,t,n,i,a){var r,o,s=8*a-i-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?a-1:0,p=n?-1:1,f=e[t+d];for(d+=p,r=f&(1<<-u)-1,f>>=-u,u+=s;u>0;r=256*r+e[t+d],d+=p,u-=8);for(o=r&(1<<-u)-1,r>>=-u,u+=i;u>0;o=256*o+e[t+d],d+=p,u-=8);if(0===r)r=1-l;else{if(r===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),r-=l}return(f?-1:1)*o*Math.pow(2,r-i)},t.write=function(e,t,n,i,a,r){var o,s,c,l=8*r-a-1,u=(1<<l)-1,d=u>>1,p=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:r-1,g=i?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(o++,c/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*c-1)*Math.pow(2,a),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,a),o=0));a>=8;e[n+f]=255&s,f+=g,s/=256,a-=8);for(o=o<<a|s,l+=a;l>0;e[n+f]=255&o,f+=g,o/=256,l-=8);e[n+f-g]|=128*h}},208:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},2934:(e,t,n)=>{e.exports=self.fetch||(self.fetch=n(8372).default||n(8372))},6217:(e,t,n)=>{var i,a,r;void 0===(a="function"==typeof(i=r=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function a(){}function r(t,n,r){if("undefined"!=typeof document){"number"==typeof(r=e({path:"/"},a.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in r)r[c]&&(s+="; "+c,!0!==r[c]&&(s+="="+r[c].split(";")[0]));return document.cookie=t+"="+n+s}}function o(e,n){if("undefined"!=typeof document){for(var a={},r=document.cookie?document.cookie.split("; "):[],o=0;o<r.length;o++){var s=r[o].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(s[0]);if(c=(i.read||i)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(a[l]=c,e===l)break}catch(e){}}return e?a[e]:a}}return a.set=r,a.get=function(e){return o(e,!1)},a.getJSON=function(e){return o(e,!0)},a.remove=function(t,n){r(t,"",e(n,{expires:-1}))},a.defaults={},a.withConverter=n,a}((function(){}))})?i.call(t,n,t,e):i)||(e.exports=a),e.exports=r()},1360:(e,t,n)=>{e.exports=function e(t,n,i){function a(o,s){if(!n[o]){if(!t[o]){if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){return a(t[o][1][e]||e)}),l,l.exports,e,t,n,i)}return n[o].exports}for(var r=void 0,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(e,t,i){(function(e){"use strict";var n,i,a=e.MutationObserver||e.WebKitMutationObserver;if(a){var r=0,o=new a(u),s=e.document.createTextNode("");o.observe(s,{characterData:!0}),n=function(){s.data=r=++r%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;i=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}i=!1}t.exports=function(e){1!==l.push(e)||i||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var i=e(1);function a(){}var r={},o=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==a&&f(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){i((function(){var i;try{i=t(n)}catch(t){return r.reject(e,t)}i===e?r.reject(e,new TypeError("Cannot resolve promise with itself")):r.resolve(e,i)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function i(t){n||(n=!0,r.reject(e,t))}function a(t){n||(n=!0,r.resolve(e,t))}var o=g((function(){t(a,i)}));"error"===o.status&&i(o.value)}function g(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(a);return this.state!==c?d(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){r.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){r.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},r.resolve=function(e,t){var n=g(p,t);if("error"===n.status)return r.reject(e,n.value);var i=n.value;if(i)f(e,i);else{e.state=s,e.outcome=t;for(var a=-1,o=e.queue.length;++a<o;)e.queue[a].callFulfilled(t)}return e},r.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:r.resolve(new this(a),e)},l.reject=function(e){var t=new this(a);return r.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var o=new Array(n),s=0,c=-1,l=new this(a);++c<n;)u(e[c],c);return l;function u(e,a){t.resolve(e).then((function(e){o[a]=e,++s!==n||i||(i=!0,r.resolve(l,o))}),(function(e){i||(i=!0,r.reject(l,e))}))}},l.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n,i=e.length,o=!1;if(!i)return this.resolve([]);for(var s=-1,c=new this(a);++s<i;)n=e[s],t.resolve(n).then((function(e){o||(o=!0,r.resolve(c,e))}),(function(e){o||(o=!0,r.reject(c,e))}));return c}},{1:1}],3:[function(e,t,i){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function r(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if("TypeError"!==a.name)throw a;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)n.append(e[i]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var o=Promise;function s(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function l(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",p=void 0,f={},g=Object.prototype.toString,h="readonly",m="readwrite";function v(e){for(var t=e.length,n=new ArrayBuffer(t),i=new Uint8Array(n),a=0;a<t;a++)i[a]=e.charCodeAt(a);return n}function y(e){return"boolean"==typeof p?o.resolve(p):function(e){return new o((function(t){var n=e.transaction(d,m),i=r([""]);n.objectStore(d).put(i,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return p=e}))}function b(e){var t=f[e.name],n={};n.promise=new o((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function w(e){var t=f[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function S(e,t){var n=f[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function x(e,t){return new o((function(n,i){if(f[e.name]=f[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);b(e),e.db.close()}var r=[e.name];t&&r.push(e.version);var o=a.open.apply(a,r);t&&(o.onupgradeneeded=function(t){var n=o.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(d)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),i(o.error)},o.onsuccess=function(){var t=o.result;t.onversionchange=function(e){e.target.close()},n(t),w(e)}}))}function C(e){return x(e,!1)}function T(e){return x(e,!0)}function E(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),i=e.version<e.db.version,a=e.version>e.db.version;if(i&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),a||n){if(n){var r=e.db.version+1;r>e.version&&(e.version=r)}return!0}return!1}function I(e){return r([v(atob(e.data))],{type:e.type})}function _(e){return e&&e.__local_forage_encoded_blob}function A(e){var t=this,n=t._initReady().then((function(){var e=f[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(n,e,e),n}function D(e,t,n,i){void 0===i&&(i=1);try{var a=e.db.transaction(e.storeName,t);n(null,a)}catch(a){if(i>0&&(!e.db||"InvalidStateError"===a.name||"NotFoundError"===a.name))return o.resolve().then((function(){if(!e.db||"NotFoundError"===a.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),T(e)})).then((function(){return function(e){b(e);for(var t=f[e.name],n=t.forages,i=0;i<n.length;i++){var a=n[i];a._dbInfo.db&&(a._dbInfo.db.close(),a._dbInfo.db=null)}return e.db=null,C(e).then((function(t){return e.db=t,E(e)?T(e):t})).then((function(i){e.db=t.db=i;for(var a=0;a<n.length;a++)n[a]._dbInfo.db=i})).catch((function(t){throw S(e,t),t}))}(e).then((function(){D(e,t,n,i-1)}))})).catch(n);n(a)}}var k={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var i in e)n[i]=e[i];var a=f[n.name];a||(a={forages:[],db:null,dbReady:null,deferredOperations:[]},f[n.name]=a),a.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=A);var r=[];function s(){return o.resolve()}for(var c=0;c<a.forages.length;c++){var l=a.forages[c];l!==t&&r.push(l._initReady().catch(s))}var u=a.forages.slice(0);return o.all(r).then((function(){return n.db=a.db,C(n)})).then((function(e){return n.db=e,E(n,t._defaultConfig.version)?T(n):e})).then((function(e){n.db=a.db=e,t._dbInfo=n;for(var i=0;i<u.length;i++){var r=u[i];r!==t&&(r._dbInfo.db=n.db,r._dbInfo.version=n.version)}}))},_support:function(){try{if(!a||!a.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,i=new o((function(t,i){n.ready().then((function(){D(n._dbInfo,h,(function(a,r){if(a)return i(a);try{var o=r.objectStore(n._dbInfo.storeName).openCursor(),s=1;o.onsuccess=function(){var n=o.result;if(n){var i=n.value;_(i)&&(i=I(i));var a=e(i,n.key,s++);void 0!==a?t(a):n.continue()}else t()},o.onerror=function(){i(o.error)}}catch(e){i(e)}}))})).catch(i)}));return s(i,t),i},getItem:function(e,t){var n=this;e=l(e);var i=new o((function(t,i){n.ready().then((function(){D(n._dbInfo,h,(function(a,r){if(a)return i(a);try{var o=r.objectStore(n._dbInfo.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),_(e)&&(e=I(e)),t(e)},o.onerror=function(){i(o.error)}}catch(e){i(e)}}))})).catch(i)}));return s(i,t),i},setItem:function(e,t,n){var i=this;e=l(e);var a=new o((function(n,a){var r;i.ready().then((function(){return r=i._dbInfo,"[object Blob]"===g.call(t)?y(r.db).then((function(e){return e?t:(n=t,new o((function(e,t){var i=new FileReader;i.onerror=t,i.onloadend=function(t){var i=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:i,type:n.type})},i.readAsBinaryString(n)})));var n})):t})).then((function(t){D(i._dbInfo,m,(function(r,o){if(r)return a(r);try{var s=o.objectStore(i._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);o.oncomplete=function(){void 0===t&&(t=null),n(t)},o.onabort=o.onerror=function(){var e=c.error?c.error:c.transaction.error;a(e)}}catch(e){a(e)}}))})).catch(a)}));return s(a,n),a},removeItem:function(e,t){var n=this;e=l(e);var i=new o((function(t,i){n.ready().then((function(){D(n._dbInfo,m,(function(a,r){if(a)return i(a);try{var o=r.objectStore(n._dbInfo.storeName).delete(e);r.oncomplete=function(){t()},r.onerror=function(){i(o.error)},r.onabort=function(){var e=o.error?o.error:o.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return s(i,t),i},clear:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){D(t._dbInfo,m,(function(i,a){if(i)return n(i);try{var r=a.objectStore(t._dbInfo.storeName).clear();a.oncomplete=function(){e()},a.onabort=a.onerror=function(){var e=r.error?r.error:r.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},length:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){D(t._dbInfo,h,(function(i,a){if(i)return n(i);try{var r=a.objectStore(t._dbInfo.storeName).count();r.onsuccess=function(){e(r.result)},r.onerror=function(){n(r.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},key:function(e,t){var n=this,i=new o((function(t,i){e<0?t(null):n.ready().then((function(){D(n._dbInfo,h,(function(a,r){if(a)return i(a);try{var o=r.objectStore(n._dbInfo.storeName),s=!1,c=o.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},c.onerror=function(){i(c.error)}}catch(e){i(e)}}))})).catch(i)}));return s(i,t),i},keys:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){D(t._dbInfo,h,(function(i,a){if(i)return n(i);try{var r=a.objectStore(t._dbInfo.storeName).openKeyCursor(),o=[];r.onsuccess=function(){var t=r.result;t?(o.push(t.key),t.continue()):e(o)},r.onerror=function(){n(r.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n,i=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||i.name,e.storeName=e.storeName||i.storeName),e.name){var r=e.name===i.name&&this._dbInfo.db?o.resolve(this._dbInfo.db):C(e).then((function(t){var n=f[e.name],i=n.forages;n.db=t;for(var a=0;a<i.length;a++)i[a]._dbInfo.db=t;return t}));n=e.storeName?r.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;b(e);var i=f[e.name],r=i.forages;t.close();for(var s=0;s<r.length;s++){var c=r[s];c._dbInfo.db=null,c._dbInfo.version=n}var l=new o((function(t,i){var r=a.open(e.name,n);r.onerror=function(e){r.result.close(),i(e)},r.onupgradeneeded=function(){r.result.deleteObjectStore(e.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}}));return l.then((function(e){i.db=e;for(var t=0;t<r.length;t++){var n=r[t];n._dbInfo.db=e,w(n._dbInfo)}})).catch((function(t){throw(S(e,t)||o.resolve()).catch((function(){})),t}))}})):r.then((function(t){b(e);var n=f[e.name],i=n.forages;t.close();for(var r=0;r<i.length;r++)i[r]._dbInfo.db=null;var s=new o((function(t,n){var i=a.deleteDatabase(e.name);i.onerror=function(){var e=i.result;e&&e.close(),n(i.error)},i.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},i.onsuccess=function(){var e=i.result;e&&e.close(),t(e)}}));return s.then((function(e){n.db=e;for(var t=0;t<i.length;t++)w(i[t]._dbInfo)})).catch((function(t){throw(S(e,t)||o.resolve()).catch((function(){})),t}))}))}else n=o.reject("Invalid arguments");return s(n,t),n}};var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=/^~~local_forage_type~([^~]+)~/,R="__lfsc__:",O="arbf",U="blob",N="si08",M="ui08",F="uic8",L="si16",j="si32",V="ur16",K="ui32",q="fl32",z="fl64",W=Object.prototype.toString;function H(e){var t,n,i,a,r,o=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l=new ArrayBuffer(o),u=new Uint8Array(l);for(t=0;t<s;t+=4)n=P.indexOf(e[t]),i=P.indexOf(e[t+1]),a=P.indexOf(e[t+2]),r=P.indexOf(e[t+3]),u[c++]=n<<2|i>>4,u[c++]=(15&i)<<4|a>>2,u[c++]=(3&a)<<6|63&r;return l}function G(e){var t,n=new Uint8Array(e),i="";for(t=0;t<n.length;t+=3)i+=P[n[t]>>2],i+=P[(3&n[t])<<4|n[t+1]>>4],i+=P[(15&n[t+1])<<2|n[t+2]>>6],i+=P[63&n[t+2]];return n.length%3==2?i=i.substring(0,i.length-1)+"=":n.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}var $={serialize:function(e,t){var n="";if(e&&(n=W.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===W.call(e.buffer))){var i,a=R;e instanceof ArrayBuffer?(i=e,a+=O):(i=e.buffer,"[object Int8Array]"===n?a+=N:"[object Uint8Array]"===n?a+=M:"[object Uint8ClampedArray]"===n?a+=F:"[object Int16Array]"===n?a+=L:"[object Uint16Array]"===n?a+=V:"[object Int32Array]"===n?a+=j:"[object Uint32Array]"===n?a+=K:"[object Float32Array]"===n?a+=q:"[object Float64Array]"===n?a+=z:t(new Error("Failed to get type for BinaryArray"))),t(a+G(i))}else if("[object Blob]"===n){var r=new FileReader;r.onload=function(){var n="~~local_forage_type~"+e.type+"~"+G(this.result);t(R+U+n)},r.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if(e.substring(0,9)!==R)return JSON.parse(e);var t,n=e.substring(13),i=e.substring(9,13);if(i===U&&B.test(n)){var a=n.match(B);t=a[1],n=n.substring(a[0].length)}var o=H(n);switch(i){case O:return o;case U:return r([o],{type:t});case N:return new Int8Array(o);case M:return new Uint8Array(o);case F:return new Uint8ClampedArray(o);case L:return new Int16Array(o);case V:return new Uint16Array(o);case j:return new Int32Array(o);case K:return new Uint32Array(o);case q:return new Float32Array(o);case z:return new Float64Array(o);default:throw new Error("Unkown type: "+i)}},stringToBuffer:H,bufferToString:G};function Q(e,t,n,i){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,i)}function Y(e,t,n,i,a,r){e.executeSql(n,i,a,(function(e,o){o.code===o.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?r(e,o):Q(e,t,(function(){e.executeSql(n,i,a,r)}),r)}),r):r(e,o)}),r)}function X(e,t,n,i){var a=this;e=l(e);var r=new o((function(r,o){a.ready().then((function(){void 0===t&&(t=null);var s=t,c=a._dbInfo;c.serializer.serialize(t,(function(t,l){l?o(l):c.db.transaction((function(n){Y(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){r(s)}),(function(e,t){o(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(i>0)return void r(X.apply(a,[e,s,n,i-1]));o(t)}}))}))})).catch(o)}));return s(r,n),r}var J={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var i in e)n[i]="string"!=typeof e[i]?e[i].toString():e[i];var a=new o((function(e,i){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return i(e)}n.db.transaction((function(a){Q(a,n,(function(){t._dbInfo=n,e()}),(function(e,t){i(t)}))}),i)}));return n.serializer=$,a},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,i=new o((function(t,i){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){Y(n,a,"SELECT * FROM "+a.storeName,[],(function(n,i){for(var r=i.rows,o=r.length,s=0;s<o;s++){var c=r.item(s),l=c.value;if(l&&(l=a.serializer.deserialize(l)),void 0!==(l=e(l,c.key,s+1)))return void t(l)}t()}),(function(e,t){i(t)}))}))})).catch(i)}));return s(i,t),i},getItem:function(e,t){var n=this;e=l(e);var i=new o((function(t,i){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){Y(n,a,"SELECT * FROM "+a.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=a.serializer.deserialize(i)),t(i)}),(function(e,t){i(t)}))}))})).catch(i)}));return s(i,t),i},setItem:function(e,t,n){return X.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=l(e);var i=new o((function(t,i){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){Y(n,a,"DELETE FROM "+a.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){i(t)}))}))})).catch(i)}));return s(i,t),i},clear:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){Y(t,i,"DELETE FROM "+i.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},length:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){Y(t,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],(function(t,n){var i=n.rows.item(0).c;e(i)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},key:function(e,t){var n=this,i=new o((function(t,i){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){Y(n,a,"SELECT key FROM "+a.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var i=n.rows.length?n.rows.item(0).key:null;t(i)}),(function(e,t){i(t)}))}))})).catch(i)}));return s(i,t),i},keys:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){Y(t,i,"SELECT key FROM "+i.storeName,[],(function(t,n){for(var i=[],a=0;a<n.rows.length;a++)i.push(n.rows.item(a).key);e(i)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var i,a=this;return s(i=e.name?new o((function(t){var i;i=e.name===n.name?a._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:i,storeNames:[e.storeName]}):t(function(e){return new o((function(t,n){e.transaction((function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,i){for(var a=[],r=0;r<i.rows.length;r++)a.push(i.rows.item(r).name);t({db:e,storeNames:a})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}(i))})).then((function(e){return new o((function(t,n){e.db.transaction((function(i){function a(e){return new o((function(t,n){i.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var r=[],s=0,c=e.storeNames.length;s<c;s++)r.push(a(e.storeNames[s]));o.all(r).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):o.reject("Invalid arguments"),t),i}};function Z(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function ee(){return!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||localStorage.length>0}var te={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=Z(e,this._defaultConfig),ee()?(this._dbInfo=t,t.serializer=$,o.resolve()):o.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,i=n.ready().then((function(){for(var t=n._dbInfo,i=t.keyPrefix,a=i.length,r=localStorage.length,o=1,s=0;s<r;s++){var c=localStorage.key(s);if(0===c.indexOf(i)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,c.substring(a),o++)))return l}}}));return s(i,t),i},getItem:function(e,t){var n=this;e=l(e);var i=n.ready().then((function(){var t=n._dbInfo,i=localStorage.getItem(t.keyPrefix+e);return i&&(i=t.serializer.deserialize(i)),i}));return s(i,t),i},setItem:function(e,t,n){var i=this;e=l(e);var a=i.ready().then((function(){void 0===t&&(t=null);var n=t;return new o((function(a,r){var o=i._dbInfo;o.serializer.serialize(t,(function(t,i){if(i)r(i);else try{localStorage.setItem(o.keyPrefix+e,t),a(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||r(e),r(e)}}))}))}));return s(a,n),a},removeItem:function(e,t){var n=this;e=l(e);var i=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return s(i,t),i},clear:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var i=localStorage.key(n);0===i.indexOf(e)&&localStorage.removeItem(i)}}));return s(n,e),n},length:function(e){var t=this.keys().then((function(e){return e.length}));return s(t,e),t},key:function(e,t){var n=this,i=n.ready().then((function(){var t,i=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(i.keyPrefix.length)),t}));return s(i,t),i},keys:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,i=[],a=0;a<n;a++){var r=localStorage.key(a);0===r.indexOf(e.keyPrefix)&&i.push(r.substring(e.keyPrefix.length))}return i}));return s(n,e),n},dropInstance:function(e,t){if(t=u.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var i,a=this;return i=e.name?new o((function(t){e.storeName?t(Z(e,a._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):o.reject("Invalid arguments"),s(i,t),i}},ne=function(e,t){for(var n=e.length,i=0;i<n;){if((a=e[i])===(r=t)||"number"==typeof a&&"number"==typeof r&&isNaN(a)&&isNaN(r))return!0;i++}var a,r;return!1},ie=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ae={},re={},oe={INDEXEDDB:k,WEBSQL:J,LOCALSTORAGE:te},se=[oe.INDEXEDDB._driver,oe.WEBSQL._driver,oe.LOCALSTORAGE._driver],ce=["dropInstance"],le=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ce),ue={description:"",driver:se.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function de(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function pe(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(ie(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var fe=function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),oe)if(oe.hasOwnProperty(n)){var i=oe[n],a=i._driver;this[n]=a,ae[a]||this.defineDriver(i)}this._defaultConfig=pe({},ue),this._config=pe({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":i(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var i=new o((function(t,n){try{var i=e._driver,a=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(a);for(var r=le.concat("_initStorage"),c=0,l=r.length;c<l;c++){var u=r[c];if((!ne(ce,u)||e[u])&&"function"!=typeof e[u])return void n(a)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=o.reject(t);return s(n,arguments[arguments.length-1]),n}},n=0,i=ce.length;n<i;n++){var a=ce[n];e[a]||(e[a]=t(a))}}();var d=function(n){ae[i]&&console.info("Redefining LocalForage driver: "+i),ae[i]=e,re[i]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,n):d(!!e._support):d(!0)}catch(e){n(e)}}));return c(i,t,n),i},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var i=ae[e]?o.resolve(ae[e]):o.reject(new Error("Driver not found."));return c(i,t,n),i},e.prototype.getSerializer=function(e){var t=o.resolve($);return c(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(n,e,e),n},e.prototype.setDriver=function(e,t,n){var i=this;ie(e)||(e=[e]);var a=this._getSupportedDrivers(e);function r(){i._config.driver=i.driver()}function s(e){return i._extend(e),r(),i._ready=i._initStorage(i._config),i._ready}var l=null!==this._driverSet?this._driverSet.catch((function(){return o.resolve()})):o.resolve();return this._driverSet=l.then((function(){var e=a[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then((function(e){i._driver=e._driver,r(),i._wrapLibraryMethodsWithReady(),i._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var a=e[t];return t++,i._dbInfo=null,i._ready=null,i.getDriver(a).then(s).catch(n)}r();var c=new Error("No available storage method found.");return i._driverSet=o.reject(c),i._driverSet}()}}(a)}))})).catch((function(){r();var e=new Error("No available storage method found.");return i._driverSet=o.reject(e),i._driverSet})),c(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!re[e]},e.prototype._extend=function(e){pe(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var a=e[n];this.supports(a)&&t.push(a)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=le.length;e<t;e++)de(this,le[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),ge=new fe;t.exports=ge},{3:3}]},{},[4])(4)},177:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__assign:()=>r,__asyncDelegator:()=>w,__asyncGenerator:()=>b,__asyncValues:()=>S,__await:()=>y,__awaiter:()=>u,__classPrivateFieldGet:()=>E,__classPrivateFieldSet:()=>I,__createBinding:()=>p,__decorate:()=>s,__exportStar:()=>f,__extends:()=>a,__generator:()=>d,__importDefault:()=>T,__importStar:()=>C,__makeTemplateObject:()=>x,__metadata:()=>l,__param:()=>c,__read:()=>h,__rest:()=>o,__spread:()=>m,__spreadArrays:()=>v,__values:()=>g});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function a(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var r=function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};function o(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}function s(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=Promise))((function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}function p(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function f(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function g(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,a,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var r=arguments[t],o=0,s=r.length;o<s;o++,a++)i[a]=r[o];return i}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,a=n.apply(e,t||[]),r=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){a[e]&&(i[e]=function(t){return new Promise((function(n,i){r.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{(n=a[e](t)).value instanceof y?Promise.resolve(n.value.v).then(c,l):u(r[0][2],n)}catch(e){u(r[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),r.shift(),r.length&&s(r[0][0],r[0][1])}}function w(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,a){t[i]=e[i]?function(t){return(n=!n)?{value:y(e[i](t)),done:"return"===i}:a?a(t):t}:a}}function S(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=g(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,a){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,a,(t=e[n](t)).done,t.value)}))}}}function x(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function I(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},8372:(e,t,n)=>{"use strict";function i(e,t){return t=t||{},new Promise((function(n,i){var a=new XMLHttpRequest,r=[],o=[],s={},c=function(){return{ok:2==(a.status/100|0),statusText:a.statusText,status:a.status,url:a.responseURL,text:function(){return Promise.resolve(a.responseText)},json:function(){return Promise.resolve(a.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([a.response]))},clone:c,headers:{keys:function(){return r},entries:function(){return o},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}};for(var l in a.open(t.method||"get",e,!0),a.onload=function(){a.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){r.push(t=t.toLowerCase()),o.push([t,n]),s[t]=s[t]?s[t]+","+n:n})),n(c())},a.onerror=i,a.withCredentials="include"==t.credentials,t.headers)a.setRequestHeader(l,t.headers[l]);a.send(t.body||null)}))}n.r(t),n.d(t,{default:()=>i})},310:()=>{},8048:()=>{},5163:(e,t,n)=>{"use strict";function i(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}n.r(t),n.d(t,{default:()=>i})},7256:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Dexie:()=>Zn,RangeSet:()=>Wn,default:()=>Zn,liveQuery:()=>ii,mergeRanges:()=>Gn,rangesOverlap:()=>$n});const i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,a=Object.keys,r=Array.isArray;function o(e,t){return"object"!=typeof t||a(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);const s=Object.getPrototypeOf,c={}.hasOwnProperty;function l(e,t){return c.call(e,t)}function u(e,t){"function"==typeof t&&(t=t(s(e))),("undefined"==typeof Reflect?a:Reflect.ownKeys)(t).forEach((n=>{p(e,n,t[n])}))}const d=Object.defineProperty;function p(e,t,n,i){d(e,t,o(n&&l(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),p(e.prototype,"constructor",e),{extend:u.bind(null,e.prototype)}}}}const g=Object.getOwnPropertyDescriptor;function h(e,t){let n;return g(e,t)||(n=s(e))&&h(n,t)}const m=[].slice;function v(e,t,n){return m.call(e,t,n)}function y(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function w(e){i.setImmediate?setImmediate(e):setTimeout(e,0)}function S(e,t){return e.reduce(((e,n,i)=>{var a=t(n,i);return a&&(e[a[0]]=a[1]),e}),{})}function x(e,t){if(l(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],i=0,a=t.length;i<a;++i){var r=x(e,t[i]);n.push(r)}return n}var o=t.indexOf(".");if(-1!==o){var s=e[t.substr(0,o)];return void 0===s?void 0:x(s,t.substr(o+1))}}function C(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof n&&"length"in n);for(var i=0,a=t.length;i<a;++i)C(e,t[i],n[i])}else{var o=t.indexOf(".");if(-1!==o){var s=t.substr(0,o),c=t.substr(o+1);if(""===c)void 0===n?r(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var u=e[s];u&&l(e,s)||(u=e[s]={}),C(u,c,n)}}else void 0===n?r(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function T(e){var t={};for(var n in e)l(e,n)&&(t[n]=e[n]);return t}const E=[].concat;function I(e){return E.apply([],e)}const _="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(I([8,16,32,64].map((e=>["Int","Uint","Float"].map((t=>t+e+"Array")))))).filter((e=>i[e])),A=_.map((e=>i[e]));S(_,(e=>[e,!0]));let D=null;function k(e){D="undefined"!=typeof WeakMap&&new WeakMap;const t=P(e);return D=null,t}function P(e){if(!e||"object"!=typeof e)return e;let t=D&&D.get(e);if(t)return t;if(r(e)){t=[],D&&D.set(e,t);for(var n=0,i=e.length;n<i;++n)t.push(P(e[n]))}else if(A.indexOf(e.constructor)>=0)t=e;else{const n=s(e);for(var a in t=n===Object.prototype?{}:Object.create(n),D&&D.set(e,t),e)l(e,a)&&(t[a]=P(e[a]))}return t}const{toString:B}={};function R(e){return B.call(e).slice(8,-1)}const O="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",U="symbol"==typeof O?function(e){var t;return null!=e&&(t=e[O])&&t.apply(e)}:function(){return null},N={};function M(e){var t,n,i,a;if(1===arguments.length){if(r(e))return e.slice();if(this===N&&"string"==typeof e)return[e];if(a=U(e)){for(n=[];!(i=a.next()).done;)n.push(i.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const F="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var L="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function j(e,t){L=e,V=t}var V=()=>!0;const K=!new Error("").stack;function q(){if(K)try{throw q.arguments,new Error}catch(e){return e}return new Error}function z(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(V).map((e=>"\n"+e)).join("")):""}var W=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],H=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(W),G={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function $(e,t){this._e=q(),this.name=e,this.message=t}function Q(e,t){return e+". Errors: "+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join("\n")}function Y(e,t,n,i){this._e=q(),this.failures=t,this.failedKeys=i,this.successCount=n,this.message=Q(e,t)}function X(e,t){this._e=q(),this.name="BulkError",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=Q(e,t)}f($).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+z(this._e,2))}},toString:function(){return this.name+": "+this.message}}),f(Y).from($),f(X).from($);var J=H.reduce(((e,t)=>(e[t]=t+"Error",e)),{});const Z=$;var ee=H.reduce(((e,t)=>{var n=t+"Error";function i(e,i){this._e=q(),this.name=n,e?"string"==typeof e?(this.message=`${e}${i?"\n "+i:""}`,this.inner=i||null):"object"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=G[t]||n,this.inner=null)}return f(i).from(Z),e[t]=i,e}),{});ee.Syntax=SyntaxError,ee.Type=TypeError,ee.Range=RangeError;var te=W.reduce(((e,t)=>(e[t+"Error"]=ee[t],e)),{}),ne=H.reduce(((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=ee[t]),e)),{});function ie(){}function ae(e){return e}function re(e,t){return null==e||e===ae?t:function(n){return t(e(n))}}function oe(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function se(e,t){return e===ie?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var r=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?oe(i,this.onsuccess):i),a&&(this.onerror=this.onerror?oe(a,this.onerror):a),void 0!==r?r:n}}function ce(e,t){return e===ie?t:function(){e.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?oe(n,this.onsuccess):n),i&&(this.onerror=this.onerror?oe(i,this.onerror):i)}}function le(e,t){return e===ie?t:function(n){var i=e.apply(this,arguments);o(n,i);var a=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?oe(a,this.onsuccess):a),r&&(this.onerror=this.onerror?oe(r,this.onerror):r),void 0===i?void 0===s?void 0:s:o(i,s)}}function ue(e,t){return e===ie?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function de(e,t){return e===ie?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var i=this,a=arguments.length,r=new Array(a);a--;)r[a]=arguments[a];return n.then((function(){return t.apply(i,r)}))}return t.apply(this,arguments)}}ne.ModifyError=Y,ne.DexieError=$,ne.BulkError=X;var pe={};const fe=100,[ge,he,me]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,s(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,s(t),e]})(),ve=he&&he.then,ye=ge&&ge.constructor,be=!!me;var we=!1,Se=me?()=>{me.then(ze)}:i.setImmediate?setImmediate.bind(null,ze):i.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver((()=>{ze(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(ze,0)},xe=function(e,t){Pe.push([e,t]),Te&&(Se(),Te=!1)},Ce=!0,Te=!0,Ee=[],Ie=[],_e=null,Ae=ae,De={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ht,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{ht(e[0],e[1])}catch(e){}}))}},ke=De,Pe=[],Be=0,Re=[];function Oe(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ie,this._lib=!1;var t=this._PSD=ke;if(L&&(this._stackHolder=q(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==pe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Fe(this,this._value))}this._state=null,this._value=null,++t.ref,Me(this,e)}const Ue={get:function(){var e=ke,t=et;function n(n,i){var a=!e.global&&(e!==ke||t!==et);const r=a&&!at();var o=new Oe(((t,o)=>{je(this,new Ne(pt(n,e,a,r),pt(i,e,a,r),t,o,e))}));return L&&qe(o,this),o}return n.prototype=pe,n},set:function(e){p(this,"then",e&&e.prototype===pe?Ue:{get:function(){return e},set:Ue.set})}};function Ne(e,t,n,i,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i,this.psd=a}function Me(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&We();t&&"function"==typeof t.then?Me(e,((e,n)=>{t instanceof Oe?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Le(e)),n&&He()}}),Fe.bind(null,e))}catch(t){Fe(e,t)}}function Fe(e,t){if(Ie.push(t),null===e._state){var n=e._lib&&We();t=Ae(t),e._state=!1,e._value=t,L&&null!==t&&"object"==typeof t&&!t._promise&&function(e){try{e.apply(null,void 0)}catch(e){}}((()=>{var n=h(t,"stack");t._promise=e,p(t,"stack",{get:()=>we?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){Ee.some((t=>t._value===e._value))||Ee.push(e)}(e),Le(e),n&&He()}}function Le(e){var t=e._listeners;e._listeners=[];for(var n=0,i=t.length;n<i;++n)je(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),0===Be&&(++Be,xe((()=>{0==--Be&&Ge()}),[]))}function je(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Be,xe(Ve,[n,e,t])}else e._listeners.push(t)}function Ve(e,t,n){try{_e=t;var i,a=t._value;t._state?i=e(a):(Ie.length&&(Ie=[]),i=e(a),-1===Ie.indexOf(a)&&function(e){for(var t=Ee.length;t;)if(Ee[--t]._value===e._value)return void Ee.splice(t,1)}(t)),n.resolve(i)}catch(e){n.reject(e)}finally{_e=null,0==--Be&&Ge(),--n.psd.ref||n.psd.finalize()}}function Ke(e,t,n){if(t.length===n)return t;var i="";if(!1===e._state){var a,r,o=e._value;null!=o?(a=o.name||"Error",r=o.message||o,i=z(o,0)):(a=o,r=""),t.push(a+(r?": "+r:"")+i)}return L&&((i=z(e._stackHolder,2))&&-1===t.indexOf(i)&&t.push(i),e._prev&&Ke(e._prev,t,n)),t}function qe(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function ze(){We()&&He()}function We(){var e=Ce;return Ce=!1,Te=!1,e}function He(){var e,t,n;do{for(;Pe.length>0;)for(e=Pe,Pe=[],n=e.length,t=0;t<n;++t){var i=e[t];i[0].apply(null,i[1])}}while(Pe.length>0);Ce=!0,Te=!0}function Ge(){var e=Ee;Ee=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Re.slice(0),n=t.length;n;)t[--n]()}function $e(e){return new Oe(pe,!1,e)}function Qe(e,t){var n=ke;return function(){var i=We(),a=ke;try{return ct(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{ct(a,!1),i&&He()}}}u(Oe.prototype,{then:Ue,_then:function(e,t){je(this,new Ne(null,null,e,t,ke))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(e=>e instanceof t?n(e):$e(e))):this.then(null,(e=>e&&e.name===t?n(e):$e(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),$e(t))))},stack:{get:function(){if(this._stack)return this._stack;try{we=!0;var e=Ke(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{we=!1}}},timeout:function(e,t){return e<1/0?new Oe(((n,i)=>{var a=setTimeout((()=>i(new ee.Timeout(t))),e);this.then(n,i).finally(clearTimeout.bind(null,a))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&p(Oe.prototype,Symbol.toStringTag,"Dexie.Promise"),De.env=lt(),u(Oe,{all:function(){var e=M.apply(null,arguments).map(rt);return new Oe((function(t,n){0===e.length&&t([]);var i=e.length;e.forEach(((a,r)=>Oe.resolve(a).then((n=>{e[r]=n,--i||t(e)}),n)))}))},resolve:e=>{if(e instanceof Oe)return e;if(e&&"function"==typeof e.then)return new Oe(((t,n)=>{e.then(t,n)}));var t=new Oe(pe,!0,e);return qe(t,_e),t},reject:$e,race:function(){var e=M.apply(null,arguments).map(rt);return new Oe(((t,n)=>{e.map((e=>Oe.resolve(e).then(t,n)))}))},PSD:{get:()=>ke,set:e=>ke=e},totalEchoes:{get:()=>et},newPSD:nt,usePSD:ut,scheduler:{get:()=>xe,set:e=>{xe=e}},rejectionMapper:{get:()=>Ae,set:e=>{Ae=e}},follow:(e,t)=>new Oe(((n,i)=>nt(((t,n)=>{var i=ke;i.unhandleds=[],i.onunhandled=n,i.finalize=oe((function(){!function(e){Re.push((function t(){e(),Re.splice(Re.indexOf(t),1)})),++Be,xe((()=>{0==--Be&&Ge()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),i.finalize),e()}),t,n,i)))}),ye&&(ye.allSettled&&p(Oe,"allSettled",(function(){const e=M.apply(null,arguments).map(rt);return new Oe((t=>{0===e.length&&t([]);let n=e.length;const i=new Array(n);e.forEach(((e,a)=>Oe.resolve(e).then((e=>i[a]={status:"fulfilled",value:e}),(e=>i[a]={status:"rejected",reason:e})).then((()=>--n||t(i)))))}))})),ye.any&&"undefined"!=typeof AggregateError&&p(Oe,"any",(function(){const e=M.apply(null,arguments).map(rt);return new Oe(((t,n)=>{0===e.length&&n(new AggregateError([]));let i=e.length;const a=new Array(i);e.forEach(((e,r)=>Oe.resolve(e).then((e=>t(e)),(e=>{a[r]=e,--i||n(new AggregateError(a))}))))}))})));const Ye={awaits:0,echoes:0,id:0};var Xe=0,Je=[],Ze=0,et=0,tt=0;function nt(e,t,n,i){var a=ke,r=Object.create(a);r.parent=a,r.ref=0,r.global=!1,r.id=++tt;var s=De.env;r.env=be?{Promise:Oe,PromiseProp:{value:Oe,configurable:!0,writable:!0},all:Oe.all,race:Oe.race,allSettled:Oe.allSettled,any:Oe.any,resolve:Oe.resolve,reject:Oe.reject,nthen:ft(s.nthen,r),gthen:ft(s.gthen,r)}:{},t&&o(r,t),++a.ref,r.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=ut(r,e,n,i);return 0===r.ref&&r.finalize(),c}function it(){return Ye.id||(Ye.id=++Xe),++Ye.awaits,Ye.echoes+=fe,Ye.id}function at(){return!!Ye.awaits&&(0==--Ye.awaits&&(Ye.id=0),Ye.echoes=Ye.awaits*fe,!0)}function rt(e){return Ye.echoes&&e&&e.constructor===ye?(it(),e.then((e=>(at(),e)),(e=>(at(),mt(e))))):e}function ot(e){++et,Ye.echoes&&0!=--Ye.echoes||(Ye.echoes=Ye.id=0),Je.push(ke),ct(e,!0)}function st(){var e=Je[Je.length-1];Je.pop(),ct(e,!1)}function ct(e,t){var n=ke;if((t?!Ye.echoes||Ze++&&e===ke:!Ze||--Ze&&e===ke)||dt(t?ot.bind(null,e):st),e!==ke&&(ke=e,n===De&&(De.env=lt()),be)){var a=De.env.Promise,r=e.env;he.then=r.nthen,a.prototype.then=r.gthen,(n.global||e.global)&&(Object.defineProperty(i,"Promise",r.PromiseProp),a.all=r.all,a.race=r.race,a.resolve=r.resolve,a.reject=r.reject,r.allSettled&&(a.allSettled=r.allSettled),r.any&&(a.any=r.any))}}function lt(){var e=i.Promise;return be?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:he.then,gthen:e.prototype.then}:{}}function ut(e,t,n,i,a){var r=ke;try{return ct(e,!0),t(n,i,a)}finally{ct(r,!1)}}function dt(e){ve.call(ge,e)}function pt(e,t,n,i){return"function"!=typeof e?e:function(){var a=ke;n&&it(),ct(t,!0);try{return e.apply(this,arguments)}finally{ct(a,!1),i&&dt(at)}}}function ft(e,t){return function(n,i){return e.call(this,pt(n,t),pt(i,t))}}-1===(""+ve).indexOf("[native code]")&&(it=at=ie);const gt="unhandledrejection";function ht(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var a,r={promise:t,reason:e};if(i.document&&document.createEvent?((a=document.createEvent("Event")).initEvent(gt,!0,!0),o(a,r)):i.CustomEvent&&o(a=new CustomEvent(gt,{detail:r}),r),a&&i.dispatchEvent&&(dispatchEvent(a),!i.PromiseRejectionEvent&&i.onunhandledrejection))try{i.onunhandledrejection(a)}catch(e){}L&&a&&!a.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch(e){}}var mt=Oe.reject;function vt(e,t,n,i){if(e.idbdb&&(e._state.openComplete||ke.letThrough||e._vip)){var a=e._createTransaction(t,n,e._dbSchema);try{a.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===J.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>vt(e,t,n,i)))):mt(a)}return a._promise(t,((e,t)=>nt((()=>(ke.trans=a,i(e,t,a)))))).then((e=>a._completion.then((()=>e))))}if(e._state.openComplete)return mt(new ee.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return mt(new ee.DatabaseClosed);e.open().catch(ie)}return e._state.dbReadyPromise.then((()=>vt(e,t,n,i)))}const yt="3.2.4",bt=String.fromCharCode(65535),wt=-1/0,St="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",xt="String expected.",Ct=[],Tt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Et=Tt,It=Tt,_t=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),At="__dbnames",Dt="readonly",kt="readwrite";function Pt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const Bt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Rt(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=k(t))[e],t)}class Ot{_trans(e,t,n){const i=this._tx||ke.trans,a=this.name;function r(e,n,i){if(!i.schema[a])throw new ee.NotFound("Table "+a+" not part of transaction");return t(i.idbtrans,i)}const o=We();try{return i&&i.db===this.db?i===ke.trans?i._promise(e,r,n):nt((()=>i._promise(e,r,n)),{trans:i,transless:ke.transless||ke}):vt(this.db,e,[this.name],r)}finally{o&&He()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(r(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=a(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&t.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>t.indexOf(e)>=0))))[0];if(n&&this.db._maxKey!==bt)return this.where(n.name).equals(n.keyPath.map((t=>e[t])));!n&&L&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function s(e,t){try{return 0===o.cmp(e,t)}catch(e){return!1}}const[c,l]=t.reduce((([t,n],a)=>{const o=i[a],c=e[a];return[t||o,t||!o?Pt(n,o&&o.multi?e=>{const t=x(e,a);return r(t)&&t.some((e=>s(c,e)))}:e=>s(c,x(e,a))):n]}),[null,null]);return c?this.where(c.name).equals(e[c.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,r(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var i in t)if(l(t,i))try{n[i]=t[i]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass((function(e){o(this,e)}))}add(e,t){const{auto:n,keyPath:i}=this.schema.primKey;let a=e;return i&&n&&(a=Rt(i)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]}))).then((e=>e.numFailures?Oe.reject(e.failures[0]):e.lastResult)).then((t=>{if(i)try{C(e,i,t)}catch(e){}return t}))}update(e,t){if("object"!=typeof e||r(e))return this.where(":id").equals(e).modify(t);{const n=x(e,this.schema.primKey.keyPath);if(void 0===n)return mt(new ee.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?a(t).forEach((n=>{C(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}}put(e,t){const{auto:n,keyPath:i}=this.schema.primKey;let a=e;return i&&n&&(a=Rt(i)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null}))).then((e=>e.numFailures?Oe.reject(e.failures[0]):e.lastResult)).then((t=>{if(i)try{C(e,i,t)}catch(e){}return t}))}delete(e){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:[e]}))).then((e=>e.numFailures?Oe.reject(e.failures[0]):void 0))}clear(){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"deleteRange",range:Bt}))).then((e=>e.numFailures?Oe.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans("readonly",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:r}=this.schema.primKey;if(r&&i)throw new ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const o=e.length;let s=r&&n?e.map(Rt(r)):e;return this.core.mutate({trans:t,type:"add",keys:i,values:s,wantResults:a}).then((({numFailures:e,results:t,lastResult:n,failures:i})=>{if(0===e)return a?t:n;throw new X(`${this.name}.bulkAdd(): ${e} of ${o} operations failed`,i)}))}))}bulkPut(e,t,n){const i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:r}=this.schema.primKey;if(r&&i)throw new ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const o=e.length;let s=r&&n?e.map(Rt(r)):e;return this.core.mutate({trans:t,type:"put",keys:i,values:s,wantResults:a}).then((({numFailures:e,results:t,lastResult:n,failures:i})=>{if(0===e)return a?t:n;throw new X(`${this.name}.bulkPut(): ${e} of ${o} operations failed`,i)}))}))}bulkDelete(e){const t=e.length;return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:e}))).then((({numFailures:e,lastResult:n,failures:i})=>{if(0===e)return n;throw new X(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,i)}))}}function Ut(e){var t={},n=function(n,i){if(i){for(var a=arguments.length,r=new Array(a-1);--a;)r[a-1]=arguments[a];return t[n].subscribe.apply(null,r),e}if("string"==typeof n)return t[n]};n.addEventType=s;for(var i=1,o=arguments.length;i<o;++i)s(arguments[i]);return n;function s(e,i,o){if("object"!=typeof e){var c;i||(i=ue),o||(o=ie);var l={subscribers:[],fire:o,subscribe:function(e){-1===l.subscribers.indexOf(e)&&(l.subscribers.push(e),l.fire=i(l.fire,e))},unsubscribe:function(e){l.subscribers=l.subscribers.filter((function(t){return t!==e})),l.fire=l.subscribers.reduce(i,o)}};return t[e]=n[e]=l,l}a(c=e).forEach((function(e){var t=c[e];if(r(t))s(e,c[e][0],c[e][1]);else{if("asap"!==t)throw new ee.InvalidArgument("Invalid event config");var n=s(e,ae,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){w((function(){e.apply(null,t)}))}))}))}}))}}function Nt(e,t){return f(t).from({prototype:e}),t}function Mt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ft(e,t){e.filter=Pt(e.filter,t)}function Lt(e,t,n){var i=e.replayFilter;e.replayFilter=i?()=>Pt(i(),t()):t,e.justLimit=n&&!i}function jt(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new ee.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Vt(e,t,n){const i=jt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:i,range:e.range}})}function Kt(e,t,n,i){const a=e.replayFilter?Pt(e.filter,e.replayFilter()):e.filter;if(e.or){const r={},o=(e,n,i)=>{if(!a||a(n,i,(e=>n.stop(e)),(e=>n.fail(e)))){var o=n.primaryKey,s=""+o;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(o)),l(r,s)||(r[s]=!0,t(e,n,i))}};return Promise.all([e.or._iterate(o,n),qt(Vt(e,i,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return qt(Vt(e,i,n),Pt(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function qt(e,t,n,i){var a=Qe(i?(e,t,a)=>n(i(e),t,a):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=ie}),(t=>{e.fail(t),n=ie}))||a(e.value,e,(e=>n=e)),n()}))}))}function zt(e,t){try{const n=Wt(e),i=Wt(t);if(n!==i)return"Array"===n?1:"Array"===i?-1:"binary"===n?1:"binary"===i?-1:"string"===n?1:"string"===i?-1:"Date"===n?1:"Date"!==i?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const n=e.length,i=t.length,a=n<i?n:i;for(let n=0;n<a;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return n===i?0:n<i?-1:1}(Ht(e),Ht(t));case"Array":return function(e,t){const n=e.length,i=t.length,a=n<i?n:i;for(let n=0;n<a;++n){const i=zt(e[n],t[n]);if(0!==i)return i}return n===i?0:n<i?-1:1}(e,t)}}catch(e){}return NaN}function Wt(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const n=R(e);return"ArrayBuffer"===n?"binary":n}function Ht(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Gt{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,mt.bind(null,n.error)):n.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,mt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=Pt(t.algorithm,e)}_iterate(e,t){return Kt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&o(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>Kt(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(Mt(t,!0))return n.count({trans:e,query:{index:jt(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var i=0;return Kt(t,(()=>(++i,!1)),e,n).then((()=>i))})).then(e)}sortBy(e,t){const n=e.split(".").reverse(),i=n[0],a=n.length-1;function r(e,t){return t?r(e[n[t]],t-1):e[i]}var o="next"===this._ctx.dir?1:-1;function s(e,t){var n=r(e,a),i=r(t,a);return n<i?-o:n>i?o:0}return this.toArray((function(e){return e.sort(s)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if("next"===t.dir&&Mt(t,!0)&&t.limit>0){const{valueMapper:n}=t,i=jt(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:i,range:t.range}}).then((({result:e})=>n?e.map(n):e))}{const n=[];return Kt(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Mt(t)?Lt(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):Lt(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Lt(this._ctx,(()=>{var t=e;return function(e,n,i){return--t<=0&&n(i),t>=0}}),!0),this}until(e,t){return Ft(this._ctx,(function(n,i,a){return!e(n.value)||(i(a),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return Ft(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=Pt(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&Mt(t,!0)&&t.limit>0)return this._read((e=>{var n=jt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ft(this._ctx,(function(e){var t=e.primaryKey.toString(),i=l(n,t);return n[t]=!0,!i})),this}modify(e){var t=this._ctx;return this._write((n=>{var i;if("function"==typeof e)i=e;else{var r=a(e),o=r.length;i=function(t){for(var n=!1,i=0;i<o;++i){var a=r[i],s=e[a];x(t,a)!==s&&(C(t,a,s),n=!0)}return n}}const s=t.table.core,{outbound:c,extractKey:l}=s.schema.primaryKey,u=this.db._options.modifyChunkSize||200,d=[];let p=0;const f=[],g=(e,t)=>{const{failures:n,numFailures:i}=t;p+=e-i;for(let e of a(n))d.push(n[e])};return this.clone().primaryKeys().then((a=>{const r=o=>{const d=Math.min(u,a.length-o);return s.getMany({trans:n,keys:a.slice(o,o+d),cache:"immutable"}).then((p=>{const f=[],h=[],m=c?[]:null,v=[];for(let e=0;e<d;++e){const t=p[e],n={value:k(t),primKey:a[o+e]};!1!==i.call(n,n.value,n)&&(null==n.value?v.push(a[o+e]):c||0===zt(l(t),l(n.value))?(h.push(n.value),c&&m.push(a[o+e])):(v.push(a[o+e]),f.push(n.value)))}const y=Mt(t)&&t.limit===1/0&&("function"!=typeof e||e===$t)&&{index:t.index,range:t.range};return Promise.resolve(f.length>0&&s.mutate({trans:n,type:"add",values:f}).then((e=>{for(let t in e.failures)v.splice(parseInt(t),1);g(f.length,e)}))).then((()=>(h.length>0||y&&"object"==typeof e)&&s.mutate({trans:n,type:"put",keys:m,values:h,criteria:y,changeSpec:"function"!=typeof e&&e}).then((e=>g(h.length,e))))).then((()=>(v.length>0||y&&e===$t)&&s.mutate({trans:n,type:"delete",keys:v,criteria:y}).then((e=>g(v.length,e))))).then((()=>a.length>o+d&&r(o+u)))}))};return r(0).then((()=>{if(d.length>0)throw new Y("Error modifying one or more objects",d,p,f);return a.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Mt(e)&&(e.isPrimKey&&!It||3===t.type)?this._write((n=>{const{primaryKey:i}=e.table.core.schema,a=t;return e.table.core.count({trans:n,query:{index:i,range:a}}).then((t=>e.table.core.mutate({trans:n,type:"deleteRange",range:a}).then((({failures:e,lastResult:n,results:i,numFailures:a})=>{if(a)throw new Y("Could not delete some values",Object.keys(e).map((t=>e[t])),t-a);return t-a}))))})):this.modify($t)}}const $t=(e,t)=>t.value=null;function Qt(e,t){return e<t?-1:e===t?0:1}function Yt(e,t){return e>t?-1:e===t?0:1}function Xt(e,t,n){var i=e instanceof an?new e.Collection(e):e;return i._ctx.error=n?new n(t):new TypeError(t),i}function Jt(e){return new e.Collection(e,(()=>nn(""))).limit(0)}function Zt(e,t,n,i,a,r){for(var o=Math.min(e.length,i.length),s=-1,c=0;c<o;++c){var l=t[c];if(l!==i[c])return a(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):a(e[c],i[c])<0?e.substr(0,c)+i[c]+n.substr(c+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;a(e[c],l)<0&&(s=c)}return o<i.length&&"next"===r?e+n.substr(e.length):o<e.length&&"prev"===r?e.substr(0,n.length):s<0?null:e.substr(0,s)+i[s]+n.substr(s+1)}function en(e,t,n,i){var a,r,o,s,c,l,u,d=n.length;if(!n.every((e=>"string"==typeof e)))return Xt(e,xt);function p(e){a=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),r=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),o="next"===e?Qt:Yt;var t=n.map((function(e){return{lower:r(e),upper:a(e)}})).sort((function(e,t){return o(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),c=t.map((function(e){return e.lower})),l=e,u="next"===e?"":i}p("next");var f=new e.Collection(e,(()=>tn(s[0],c[d-1]+i)));f._ondirectionchange=function(e){p(e)};var g=0;return f._addAlgorithm((function(e,n,i){var a=e.key;if("string"!=typeof a)return!1;var p=r(a);if(t(p,c,g))return!0;for(var f=null,h=g;h<d;++h){var m=Zt(a,p,s[h],c[h],o,l);null===m&&null===f?g=h+1:(null===f||o(f,m)>0)&&(f=m)}return n(null!==f?function(){e.continue(f+u)}:i),!1})),f}function tn(e,t,n,i){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:i}}function nn(e){return{type:1,lower:e,upper:e}}class an{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,i){n=!1!==n,i=!0===i;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||i)&&(!n||!i)?Jt(this):new this.Collection(this,(()=>tn(e,t,!n,!i)))}catch(e){return Xt(this,St)}}equals(e){return null==e?Xt(this,St):new this.Collection(this,(()=>nn(e)))}above(e){return null==e?Xt(this,St):new this.Collection(this,(()=>tn(e,void 0,!0)))}aboveOrEqual(e){return null==e?Xt(this,St):new this.Collection(this,(()=>tn(e,void 0,!1)))}below(e){return null==e?Xt(this,St):new this.Collection(this,(()=>tn(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?Xt(this,St):new this.Collection(this,(()=>tn(void 0,e)))}startsWith(e){return"string"!=typeof e?Xt(this,xt):this.between(e,e+bt,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):en(this,((e,t)=>0===e.indexOf(t[0])),[e],bt)}equalsIgnoreCase(e){return en(this,((e,t)=>e===t[0]),[e],"")}anyOfIgnoreCase(){var e=M.apply(N,arguments);return 0===e.length?Jt(this):en(this,((e,t)=>-1!==t.indexOf(e)),e,"")}startsWithAnyOfIgnoreCase(){var e=M.apply(N,arguments);return 0===e.length?Jt(this):en(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,bt)}anyOf(){const e=M.apply(N,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return Xt(this,St)}if(0===e.length)return Jt(this);const n=new this.Collection(this,(()=>tn(e[0],e[e.length-1])));n._ondirectionchange=n=>{t="next"===n?this._ascending:this._descending,e.sort(t)};let i=0;return n._addAlgorithm(((n,a,r)=>{const o=n.key;for(;t(o,e[i])>0;)if(++i,i===e.length)return a(r),!1;return 0===t(o,e[i])||(a((()=>{n.continue(e[i])})),!1)})),n}notEqual(e){return this.inAnyRange([[wt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=M.apply(N,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Xt(this,St)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[wt,t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,i=this._ascending,a=this._descending,r=this._min,o=this._max;if(0===e.length)return Jt(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0)))return Xt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ee.InvalidArgument);const s=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;let l,u=i;function d(e,t){return u(e[0],t[0])}try{l=e.reduce((function(e,t){let i=0,a=e.length;for(;i<a;++i){const a=e[i];if(n(t[0],a[1])<0&&n(t[1],a[0])>0){a[0]=r(a[0],t[0]),a[1]=o(a[1],t[1]);break}}return i===a&&e.push(t),e}),[]),l.sort(d)}catch(e){return Xt(this,St)}let p=0;const f=c?e=>i(e,l[p][1])>0:e=>i(e,l[p][1])>=0,g=s?e=>a(e,l[p][0])>0:e=>a(e,l[p][0])>=0;let h=f;const m=new this.Collection(this,(()=>tn(l[0][0],l[l.length-1][1],!s,!c)));return m._ondirectionchange=e=>{"next"===e?(h=f,u=i):(h=g,u=a),l.sort(d)},m._addAlgorithm(((e,t,n)=>{for(var a=e.key;h(a);)if(++p,p===l.length)return t(n),!1;return!!function(e){return!f(e)&&!g(e)}(a)||(0===this._cmp(a,l[p][1])||0===this._cmp(a,l[p][0])||t((()=>{u===i?e.continue(l[p][0]):e.continue(l[p][1])})),!1)})),m}startsWithAnyOf(){const e=M.apply(N,arguments);return e.every((e=>"string"==typeof e))?0===e.length?Jt(this):this.inAnyRange(e.map((e=>[e,e+bt]))):Xt(this,"startsWithAnyOf() only works with strings")}}function rn(e){return Qe((function(t){return on(t),e(t.target.error),!1}))}function on(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const sn="storagemutated",cn="x-storagemutated-1",ln=Ut(null,sn);class un{_lock(){return b(!ke.global),++this._reculock,1!==this._reculock||ke.global||(ke.lockOwnerFor=this),this}_unlock(){if(b(!ke.global),0==--this._reculock)for(ke.global||(ke.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ut(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&ke.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new ee.DatabaseClosed(n);case"MissingAPIError":throw new ee.MissingAPI(n.message,n);default:throw new ee.OpenFailed(n)}if(!this.active)throw new ee.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Qe((t=>{on(t),this._reject(e.error)})),e.onabort=Qe((t=>{on(t),this.active&&this._reject(new ee.Abort(e.error)),this.active=!1,this.on("abort").fire(t)})),e.oncomplete=Qe((()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&ln.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if("readwrite"===e&&"readwrite"!==this.mode)return mt(new ee.ReadOnly("Transaction is readonly"));if(!this.active)return mt(new ee.TransactionInactive);if(this._locked())return new Oe(((i,a)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(i,a)},ke])}));if(n)return nt((()=>{var e=new Oe(((e,n)=>{this._lock();const i=t(e,n,this);i&&i.then&&i.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var i=new Oe(((e,n)=>{var i=t(e,n,this);i&&i.then&&i.then(e,n)}));return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=Oe.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var i=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(i.get(-1/0).onsuccess=e)}()}var a=t._waitingFor;return new Oe(((e,i)=>{n.then((n=>t._waitingQueue.push(Qe(e.bind(null,n)))),(e=>t._waitingQueue.push(Qe(i.bind(null,e))))).finally((()=>{t._waitingFor===a&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ee.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(l(t,e))return t[e];const n=this.schema[e];if(!n)throw new ee.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,n,this);return i.core=this.db.core.table(e),t[e]=i,i}}function dn(e,t,n,i,a,r,o){return{name:e,keyPath:t,unique:n,multi:i,auto:a,compound:r,src:(n&&!o?"&":"")+(i?"*":"")+(a?"++":"")+pn(t)}}function pn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function fn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:S(n,(e=>[e.name,e]))}}let gn=e=>{try{return e.only([[]]),gn=()=>[[]],[[]]}catch(e){return gn=()=>bt,bt}};function hn(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>x(t,e)}(e):t=>x(t,e)}function mn(e){return[].slice.call(e)}let vn=0;function yn(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function bn(e,t,n){function i(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:n,upper:i,lowerOpen:a,upperOpen:r}=e;return void 0===n?void 0===i?null:t.upperBound(i,!!r):void 0===i?t.lowerBound(n,!!a):t.bound(n,i,!!a,!!r)}const{schema:a,hasGetAll:o}=function(e,t){const n=mn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:n}=e,i=r(t),a=null==t,o={},s={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:a,compound:i,keyPath:t,autoIncrement:n,unique:!0,extractKey:hn(t)},indexes:mn(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:n,multiEntry:i,keyPath:a}=e,s={name:t,compound:r(a),keyPath:a,unique:n,multiEntry:i,extractKey:hn(a)};return o[yn(a)]=s,s})),getIndexByKeyPath:e=>o[yn(e)]};return o[":id"]=s.primaryKey,null!=t&&(o[yn(t)]=s.primaryKey),s}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),s=a.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:n,keys:a,values:r,range:o}){return new Promise(((s,c)=>{s=Qe(s);const l=e.objectStore(t),u=null==l.keyPath,d="put"===n||"add"===n;if(!d&&"delete"!==n&&"deleteRange"!==n)throw new Error("Invalid operation type: "+n);const{length:p}=a||r||{length:1};if(a&&r&&a.length!==r.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return s({numFailures:0,failures:{},results:[],lastResult:void 0});let f;const g=[],h=[];let m=0;const v=e=>{++m,on(e)};if("deleteRange"===n){if(4===o.type)return s({numFailures:m,failures:h,results:[],lastResult:void 0});3===o.type?g.push(f=l.clear()):g.push(f=l.delete(i(o)))}else{const[e,t]=d?u?[r,a]:[r,null]:[a,null];if(d)for(let i=0;i<p;++i)g.push(f=t&&void 0!==t[i]?l[n](e[i],t[i]):l[n](e[i])),f.onerror=v;else for(let t=0;t<p;++t)g.push(f=l[n](e[t])),f.onerror=v}const y=e=>{const t=e.target.result;g.forEach(((e,t)=>null!=e.error&&(h[t]=e.error))),s({numFailures:m,failures:h,results:"delete"===n?a:g.map((e=>e.result)),lastResult:t})};f.onerror=e=>{v(e),y(e)},f.onsuccess=y}))},getMany:({trans:e,keys:n})=>new Promise(((i,a)=>{i=Qe(i);const r=e.objectStore(t),o=n.length,s=new Array(o);let c,l=0,u=0;const d=e=>{const t=e.target;s[t._pos]=t.result,++u===l&&i(s)},p=rn(a);for(let e=0;e<o;++e)null!=n[e]&&(c=r.get(n[e]),c._pos=e,c.onsuccess=d,c.onerror=p,++l);0===l&&i(s)})),get:({trans:e,key:n})=>new Promise(((i,a)=>{i=Qe(i);const r=e.objectStore(t).get(n);r.onsuccess=e=>i(e.target.result),r.onerror=rn(a)})),query:function(e){return n=>new Promise(((a,r)=>{a=Qe(a);const{trans:o,values:s,limit:c,query:l}=n,u=c===1/0?void 0:c,{index:d,range:p}=l,f=o.objectStore(t),g=d.isPrimaryKey?f:f.index(d.name),h=i(p);if(0===c)return a({result:[]});if(e){const e=s?g.getAll(h,u):g.getAllKeys(h,u);e.onsuccess=e=>a({result:e.target.result}),e.onerror=rn(r)}else{let e=0;const t=s||!("openKeyCursor"in g)?g.openCursor(h):g.openKeyCursor(h),n=[];t.onsuccess=i=>{const r=t.result;return r?(n.push(s?r.value:r.primaryKey),++e===c?a({result:n}):void r.continue()):a({result:n})},t.onerror=rn(r)}}))}(o),openCursor:function({trans:e,values:n,query:a,reverse:r,unique:o}){return new Promise(((s,c)=>{s=Qe(s);const{index:l,range:u}=a,d=e.objectStore(t),p=l.isPrimaryKey?d:d.index(l.name),f=r?o?"prevunique":"prev":o?"nextunique":"next",g=n||!("openKeyCursor"in p)?p.openCursor(i(u),f):p.openKeyCursor(i(u),f);g.onerror=rn(c),g.onsuccess=Qe((t=>{const n=g.result;if(!n)return void s(null);n.___id=++vn,n.done=!1;const i=n.continue.bind(n);let a=n.continuePrimaryKey;a&&(a=a.bind(n));const r=n.advance.bind(n),o=()=>{throw new Error("Cursor not stopped")};n.trans=e,n.stop=n.continue=n.continuePrimaryKey=n.advance=()=>{throw new Error("Cursor not started")},n.fail=Qe(c),n.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},n.start=e=>{const t=new Promise(((e,t)=>{e=Qe(e),g.onerror=rn(t),n.fail=t,n.stop=t=>{n.stop=n.continue=n.continuePrimaryKey=n.advance=o,e(t)}})),s=()=>{if(g.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=()=>{throw new Error("Cursor behind last entry")},n.stop()};return g.onsuccess=Qe((e=>{g.onsuccess=s,s()})),n.continue=i,n.continuePrimaryKey=a,n.advance=r,s(),t},s(n)}),c)}))},count({query:e,trans:n}){const{index:a,range:r}=e;return new Promise(((e,o)=>{const s=n.objectStore(t),c=a.isPrimaryKey?s:s.index(a.name),l=i(r),u=l?c.count(l):c.count();u.onsuccess=Qe((t=>e(t.target.result))),u.onerror=rn(o)}))}}}(e))),c={};return s.forEach((e=>c[e.name]=e)),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!c[e])throw new Error(`Table '${e}' not found`);return c[e]},MIN_KEY:-1/0,MAX_KEY:gn(t),schema:a}}function wn({_novip:e},t){const n=t.db,i=function(e,t,{IDBKeyRange:n,indexedDB:i},a){const r=function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(bn(t,n,a),e.dbcore);return{dbcore:r}}(e._middlewares,n,e._deps,t);e.core=i.dbcore,e.tables.forEach((t=>{const n=t.name;e.core.schema.tables.some((e=>e.name===n))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function Sn({_novip:e},t,n,i){n.forEach((n=>{const a=i[n];t.forEach((t=>{const i=h(t,n);(!i||"value"in i&&void 0===i.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?p(t,n,{get(){return this.table(n)},set(e){d(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,a))}))}))}function xn({_novip:e},t){t.forEach((t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]}))}function Cn(e,t){return e._cfg.version-t._cfg.version}function Tn(e,t,n,i){const r=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,r);o.create(n),o._completion.catch(i);const s=o._reject.bind(o),c=ke.transless||ke;nt((()=>{ke.trans=o,ke.transless=c,0===t?(a(r).forEach((e=>{In(n,e,r[e].primKey,r[e].indexes)})),wn(e,n),Oe.follow((()=>e.on.populate.fire(o))).catch(s)):function({_novip:e},t,n,i){const r=[],o=e._versions;let s=e._dbSchema=An(0,e.idbdb,i),c=!1;const l=o.filter((e=>e._cfg.version>=t));return l.forEach((o=>{r.push((()=>{const r=s,l=o._cfg.dbschema;Dn(e,r,i),Dn(e,l,i),s=e._dbSchema=l;const u=En(r,l);u.add.forEach((e=>{In(i,e[0],e[1].primKey,e[1].indexes)})),u.change.forEach((e=>{if(e.recreate)throw new ee.Upgrade("Not yet support for changing primary key");{const t=i.objectStore(e.name);e.add.forEach((e=>_n(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),_n(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const d=o._cfg.contentUpgrade;if(d&&o._cfg.version>t){wn(e,i),n._memoizedTables={},c=!0;let t=T(l);u.del.forEach((e=>{t[e]=r[e]})),xn(e,[e.Transaction.prototype]),Sn(e,[e.Transaction.prototype],a(t),t),n.schema=t;const o=F(d);let s;o&&it();const p=Oe.follow((()=>{if(s=d(n),s&&o){var e=at.bind(null,null);s.then(e,e)}}));return s&&"function"==typeof s.then?Oe.resolve(s):p.then((()=>s))}})),r.push((t=>{c&&Et||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(o._cfg.dbschema,t),xn(e,[e.Transaction.prototype]),Sn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),function e(){return r.length?Oe.resolve(r.shift()(n.idbtrans)).then(e):Oe.resolve()}().then((()=>{var e,t;t=i,a(e=s).forEach((n=>{t.db.objectStoreNames.contains(n)||In(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,o,n).catch(s)}))}function En(e,t){const n={del:[],add:[],change:[]};let i;for(i in e)t[i]||n.del.push(i);for(i in t){const a=e[i],r=t[i];if(a){const e={name:i,def:r,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(r.primKey.keyPath||"")||a.primKey.auto!==r.primKey.auto&&!Tt)e.recreate=!0,n.change.push(e);else{const t=a.idxByName,i=r.idxByName;let o;for(o in t)i[o]||e.del.push(o);for(o in i){const n=t[o],a=i[o];n?n.src!==a.src&&e.change.push(a):e.add.push(a)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([i,r])}return n}function In(e,t,n,i){const a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach((e=>_n(a,e))),a}function _n(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function An(e,t,n){const i={};return v(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let a=t.keyPath;const r=dn(pn(a),a||"",!1,!1,!!t.autoIncrement,a&&"string"!=typeof a,!0),o=[];for(let e=0;e<t.indexNames.length;++e){const n=t.index(t.indexNames[e]);a=n.keyPath;var s=dn(n.name,a,!!n.unique,!!n.multiEntry,!1,a&&"string"!=typeof a,!1);o.push(s)}i[e]=fn(e,r,o)})),i}function Dn({_novip:e},t,n){const a=n.db.objectStoreNames;for(let i=0;i<a.length;++i){const r=a[i],o=n.objectStore(r);e._hasGetAll="getAll"in o;for(let e=0;e<o.indexNames.length;++e){const n=o.indexNames[e],i=o.index(n).keyPath,a="string"==typeof i?i:"["+v(i).join("+")+"]";if(t[r]){const e=t[r].idxByName[a];e&&(e.name=n,delete t[r].idxByName[a],t[r].idxByName[n]=e)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class kn{_parseStoresSpec(e,t){a(e).forEach((n=>{if(null!==e[n]){var i=e[n].split(",").map(((e,t)=>{const n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return dn(n,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),r(i),0===t)})),a=i.shift();if(a.multi)throw new ee.Schema("Primary key cannot be multi-valued");i.forEach((e=>{if(e.auto)throw new ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ee.Schema("Index must have a name and cannot be an empty string")})),t[n]=fn(n,a,i)}}))}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,e):e;const n=t._versions,i={};let r={};return n.forEach((e=>{o(i,e._cfg.storesSource),r=e._cfg.dbschema={},e._parseStoresSpec(i,r)})),t._dbSchema=r,xn(t,[t._allTables,t,t.Transaction.prototype]),Sn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],a(r),r),t._storeNames=a(r),this}upgrade(e){return this._cfg.contentUpgrade=de(this._cfg.contentUpgrade||ie,e),this}}function Pn(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Zn(At,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Bn(e){return e&&"function"==typeof e.databases}function Rn(e){return nt((function(){return ke.letThrough=!0,e()}))}function On(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function Un(e){var t=t=>e.next(t),n=a(t),i=a((t=>e.throw(t)));function a(e){return t=>{var a=e(t),o=a.value;return a.done?o:o&&"function"==typeof o.then?o.then(n,i):r(o)?Promise.all(o).then(n,i):n(o)}}return a(t)()}function Nn(e,t,n){var i=arguments.length;if(i<2)throw new ee.InvalidArgument("Too few arguments");for(var a=new Array(i-1);--i;)a[i-1]=arguments[i];return n=a.pop(),[e,I(a),n]}function Mn(e,t,n,i,a){return Oe.resolve().then((()=>{const r=ke.transless||ke,o=e._createTransaction(t,n,e._dbSchema,i),s={trans:o,transless:r};if(i)o.idbtrans=i.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===J.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>Mn(e,t,n,null,a)))):mt(i)}const c=F(a);let l;c&&it();const u=Oe.follow((()=>{if(l=a.call(o,o),l)if(c){var e=at.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=Un(l))}),s);return(l&&"function"==typeof l.then?Oe.resolve(l).then((e=>o.active?e:mt(new ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):u.then((()=>l))).then((e=>(i&&o._resolve(),o._completion.then((()=>e))))).catch((e=>(o._reject(e),mt(e))))}))}function Fn(e,t,n){const i=r(e)?e.slice():[e];for(let e=0;e<n;++e)i.push(t);return i}const Ln={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:i}=n,a={},r=[];function o(e,t,n){const i=yn(e),s=a[i]=a[i]||[],c=null==e?0:"string"==typeof e?1:e.length,l=t>0,u={...n,isVirtual:l,keyTail:t,keyLength:c,extractKey:hn(e),unique:!l&&n.unique};return s.push(u),u.isPrimaryKey||r.push(u),c>1&&o(2===c?e[0]:e.slice(0,c-1),t+1,n),s.sort(((e,t)=>e.keyTail-t.keyTail)),u}const s=o(i.primaryKey.keyPath,0,i.primaryKey);a[":id"]=[s];for(const e of i.indexes)o(e.keyPath,0,e);function c(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(i=t.query.range,a=n.keyTail,{type:1===i.type?2:i.type,lower:Fn(i.lower,i.lowerOpen?e.MAX_KEY:e.MIN_KEY,a),lowerOpen:!0,upper:Fn(i.upper,i.upperOpen?e.MIN_KEY:e.MAX_KEY,a),upperOpen:!0})}}:t;var i,a}const l={...n,schema:{...i,primaryKey:s,indexes:r,getIndexByKeyPath:function(e){const t=a[yn(e)];return t&&t[0]}},count:e=>n.count(c(e)),query:e=>n.query(c(e)),openCursor(t){const{keyTail:i,isVirtual:a,keyLength:r}=t.query.index;return a?n.openCursor(c(t)).then((n=>n&&function(n){const a=Object.create(n,{continue:{value:function(a){null!=a?n.continue(Fn(a,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,r).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value(t,a){n.continuePrimaryKey(Fn(t,e.MAX_KEY,i),a)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===r?e[0]:e.slice(0,r)}},value:{get:()=>n.value}});return a}(n))):n.openCursor(t)}};return l}}}};function jn(e,t,n,i){return n=n||{},i=i||"",a(e).forEach((a=>{if(l(t,a)){var r=e[a],o=t[a];if("object"==typeof r&&"object"==typeof o&&r&&o){const e=R(r);e!==R(o)?n[i+a]=t[a]:"Object"===e?jn(r,o,n,i+a+"."):r!==o&&(n[i+a]=t[a])}else r!==o&&(n[i+a]=t[a])}else n[i+a]=void 0})),a(t).forEach((a=>{l(e,a)||(n[i+a]=t[a])})),n}const Vn={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:i}=n.schema,a={...n,mutate(e){const a=ke.trans,{deleting:r,creating:o,updating:s}=a.table(t).hook;switch(e.type){case"add":if(o.fire===ie)break;return a._promise("readwrite",(()=>c(e)),!0);case"put":if(o.fire===ie&&s.fire===ie)break;return a._promise("readwrite",(()=>c(e)),!0);case"delete":if(r.fire===ie)break;return a._promise("readwrite",(()=>c(e)),!0);case"deleteRange":if(r.fire===ie)break;return a._promise("readwrite",(()=>function(e){return u(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function c(e){const t=ke.trans,a=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(i,e);if(!a)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:a}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,a).then((c=>{const u=a.map(((n,a)=>{const u=c[a],d={onerror:null,onsuccess:null};if("delete"===e.type)r.fire.call(d,n,u,t);else if("add"===e.type||void 0===u){const r=o.fire.call(d,n,e.values[a],t);null==n&&null!=r&&(n=r,e.keys[a]=n,i.outbound||C(e.values[a],i.keyPath,n))}else{const i=jn(u,e.values[a]),r=s.fire.call(d,i,n,u,t);if(r){const t=e.values[a];Object.keys(r).forEach((e=>{l(t,e)?t[e]=r[e]:C(t,e,r[e])}))}}return d}));return n.mutate(e).then((({failures:t,results:n,numFailures:i,lastResult:r})=>{for(let i=0;i<a.length;++i){const r=n?n[i]:a[i],o=u[i];null==r?o.onerror&&o.onerror(t[i]):o.onsuccess&&o.onsuccess("put"===e.type&&c[i]?e.values[i]:r)}return{failures:t,results:n,numFailures:i,lastResult:r}})).catch((e=>(u.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function u(e,t,a){return n.query({trans:e,values:!1,query:{index:i,range:t},limit:a}).then((({result:n})=>c({type:"delete",keys:n,trans:e}).then((i=>i.numFailures>0?Promise.reject(i.failures[0]):n.length<a?{failures:[],numFailures:0,lastResult:void 0}:u(e,{...t,lower:n[n.length-1],lowerOpen:!0},a)))))}}};return a}})};function Kn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const i=[];for(let a=0,r=0;a<t.keys.length&&r<e.length;++a)0===zt(t.keys[a],e[r])&&(i.push(n?k(t.values[a]):t.values[a]),++r);return i.length===e.length?i:null}catch(e){return null}}const qn={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=Kn(e.keys,e.trans._cache,"clone"===e.cache);return t?Oe.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?k(t):t},t)))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function zn(e){return!("from"in e)}const Wn=function(e,t){if(!this){const t=new Wn;return e&&"d"in e&&o(t,e),t}o(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Hn(e,t,n){const i=zt(t,n);if(isNaN(i))return;if(i>0)throw RangeError();if(zn(e))return o(e,{from:t,to:n,d:1});const a=e.l,r=e.r;if(zt(n,e.from)<0)return a?Hn(a,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Yn(e);if(zt(t,e.to)>0)return r?Hn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Yn(e);zt(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),zt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const s=!e.r;a&&!e.l&&Gn(e,a),r&&s&&Gn(e,r)}function Gn(e,t){zn(t)||function e(t,{from:n,to:i,l:a,r}){Hn(t,n,i),a&&e(t,a),r&&e(t,r)}(e,t)}function $n(e,t){const n=Qn(t);let i=n.next();if(i.done)return!1;let a=i.value;const r=Qn(e);let o=r.next(a.from),s=o.value;for(;!i.done&&!o.done;){if(zt(s.from,a.to)<=0&&zt(s.to,a.from)>=0)return!0;zt(a.from,s.from)<0?a=(i=n.next(s.from)).value:s=(o=r.next(a.from)).value}return!1}function Qn(e){let t=zn(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&zt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||zt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Yn(e){var t,n;const i=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),a=i>1?"r":i<-1?"l":"";if(a){const t="r"===a?"l":"r",n={...e},i=e[a];e.from=i.from,e.to=i.to,e[a]=i[a],n[a]=i[t],e[t]=n,n.d=Xn(n)}e.d=Xn(e)}function Xn({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}u(Wn.prototype,{add(e){return Gn(this,e),this},addKey(e){return Hn(this,e,e),this},addKeys(e){return e.forEach((e=>Hn(this,e,e))),this},[O](){return Qn(this)}});const Jn={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Wn(e.MIN_KEY,e.MAX_KEY);return{...e,table:i=>{const o=e.table(i),{schema:s}=o,{primaryKey:c}=s,{extractKey:l,outbound:u}=c,d={...o,mutate:e=>{const a=e.trans,c=a.mutatedParts||(a.mutatedParts={}),l=e=>{const n=`idb://${t}/${i}/${e}`;return c[n]||(c[n]=new Wn)},u=l(""),d=l(":dels"),{type:p}=e;let[f,g]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const h=e.trans._cache;return o.mutate(e).then((e=>{if(r(f)){"delete"!==p&&(f=e.results),u.addKeys(f);const t=Kn(f,h);t||"add"===p||d.addKeys(f),(t||g)&&function(e,t,n,i){t.indexes.forEach((function(t){const a=e(t.name||"");function o(e){return null!=e?t.extractKey(e):null}const s=e=>t.multiEntry&&r(e)?e.forEach((e=>a.addKey(e))):a.addKey(e);(n||i).forEach(((e,t)=>{const a=n&&o(n[t]),r=i&&o(i[t]);0!==zt(a,r)&&(null!=a&&s(a),null!=r&&s(r))}))}))}(l,s,t,g)}else if(f){const e={from:f.lower,to:f.upper};d.add(e),u.add(e)}else u.add(n),d.add(n),s.indexes.forEach((e=>l(e.name).add(n)));return e}))}},p=({query:{index:t,range:n}})=>{var i,a;return[t,new Wn(null!==(i=n.lower)&&void 0!==i?i:e.MIN_KEY,null!==(a=n.upper)&&void 0!==a?a:e.MAX_KEY)]},f={get:e=>[c,new Wn(e.key)],getMany:e=>[c,(new Wn).addKeys(e.keys)],count:p,query:p,openCursor:p};return a(f).forEach((e=>{d[e]=function(a){const{subscr:r}=ke;if(r){const s=e=>{const n=`idb://${t}/${i}/${e}`;return r[n]||(r[n]=new Wn)},c=s(""),d=s(":dels"),[p,g]=f[e](a);if(s(p.name||"").add(g),!p.isPrimaryKey){if("count"!==e){const t="query"===e&&u&&a.values&&o.query({...a,values:!1});return o[e].apply(this,arguments).then((n=>{if("query"===e){if(u&&a.values)return t.then((({result:e})=>(c.addKeys(e),n)));const e=a.values?n.result.map(l):n.result;a.values?c.addKeys(e):d.addKeys(e)}else if("openCursor"===e){const e=n,t=a.values;return e&&Object.create(e,{key:{get:()=>(d.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return d.addKey(t),t}},value:{get:()=>(t&&c.addKey(e.primaryKey),e.value)}})}return n}))}d.add(n)}}return o[e].apply(this,arguments)}})),d}}}};class Zn{constructor(e,t){this._middlewares={},this.verno=0;const n=Zn.dependencies;this._options=t={addons:Zn.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:i}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ie,dbReadyPromise:null,cancelOpen:ie,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var r;a.dbReadyPromise=new Oe((e=>{a.dbReadyResolve=e})),a.openCanceller=new Oe(((e,t)=>{a.cancelOpen=t})),this._state=a,this.name=e,this.on=Ut(this,"populate","blocked","versionchange","close",{ready:[de,ie]}),this.on.ready.subscribe=y(this.on.ready.subscribe,(e=>(t,n)=>{Zn.vip((()=>{const i=this._state;if(i.openComplete)i.dbOpenError||Oe.resolve().then(t),n&&e(t);else if(i.onReadyBeingFired)i.onReadyBeingFired.push(t),n&&e(t);else{e(t);const i=this;n||e((function e(){i.on.ready.unsubscribe(t),i.on.ready.unsubscribe(e)}))}}))})),this.Collection=(r=this,Nt(Gt.prototype,(function(e,t){this.db=r;let n=Bt,i=null;if(t)try{n=t()}catch(e){i=e}const a=e._ctx,o=a.table,s=o.hook.reading.fire;this._ctx={table:o,index:a.index,isPrimKey:!a.index||o.schema.primKey.keyPath&&a.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:a.or,valueMapper:s!==ae?s:null}}))),this.Table=function(e){return Nt(Ot.prototype,(function(t,n,i){this.db=e,this._tx=i,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Ut(null,{creating:[se,ie],reading:[re,ae],updating:[le,ie],deleting:[ce,ie]})}))}(this),this.Transaction=function(e){return Nt(un.prototype,(function(t,n,i,a,r){this.db=e,this.mode=t,this.storeNames=n,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=Ut(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Oe(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),mt(e)}))}))}(this),this.Version=function(e){return Nt(kn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Nt(an.prototype,(function(t,n,i){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:i};const a=e._deps.indexedDB;if(!a)throw new ee.MissingAPI;this._cmp=this._ascending=a.cmp.bind(a),this._descending=(e,t)=>a.cmp(t,e),this._max=(e,t)=>a.cmp(e,t)>0?e:t,this._min=(e,t)=>a.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on("blocked",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)})),this._maxKey=gn(t.IDBKeyRange),this._createTransaction=(e,t,n,i)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,i),this._fireOnBlocked=e=>{this.on("blocked").fire(e),Ct.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on("versionchange").fire(e)))},this.use(Ln),this.use(Vn),this.use(Jn),this.use(qn),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new ee.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(Cn),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||ke.letThrough||this._vip)?e():new Oe(((e,t)=>{if(this._state.openComplete)return t(new ee.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new ee.DatabaseClosed);this.open().catch(ie)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:n,name:i}){i&&this.unuse({stack:e,name:i});const a=this._middlewares[e]||(this._middlewares[e]=[]);return a.push({stack:e,create:t,level:null==n?10:n,name:i}),a.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>n?e.create!==n:!!t&&e.name!==t))),this}open(){return function(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((()=>t.dbOpenError?mt(t.dbOpenError):e));L&&(t.openCanceller._stackHolder=q()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const i=t.openCanceller;function r(){if(t.openCanceller!==i)throw new ee.DatabaseClosed("db.open() was cancelled")}let o=t.dbReadyResolve,s=null,c=!1;return Oe.race([i,("undefined"==typeof navigator?Oe.resolve():On()).then((()=>new Oe(((i,o)=>{if(r(),!n)throw new ee.MissingAPI;const l=e.name,u=t.autoSchema?n.open(l):n.open(l,Math.round(10*e.verno));if(!u)throw new ee.MissingAPI;u.onerror=rn(o),u.onblocked=Qe(e._fireOnBlocked),u.onupgradeneeded=Qe((i=>{if(s=u.transaction,t.autoSchema&&!e._options.allowEmptyDB){u.onerror=on,s.abort(),u.result.close();const e=n.deleteDatabase(l);e.onsuccess=e.onerror=Qe((()=>{o(new ee.NoSuchDatabase(`Database ${l} doesnt exist`))}))}else{s.onerror=rn(o);var a=i.oldVersion>Math.pow(2,62)?0:i.oldVersion;c=a<1,e._novip.idbdb=u.result,Tn(e,a/10,s,o)}}),o),u.onsuccess=Qe((()=>{s=null;const n=e._novip.idbdb=u.result,r=v(n.objectStoreNames);if(r.length>0)try{const i=n.transaction(1===(o=r).length?o[0]:o,"readonly");t.autoSchema?function({_novip:e},t,n){e.verno=t.version/10;const i=e._dbSchema=An(0,t,n);e._storeNames=v(t.objectStoreNames,0),Sn(e,[e._allTables],a(i),i)}(e,n,i):(Dn(e,e._dbSchema,i),function(e,t){const n=En(An(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,i)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),wn(e,i)}catch(e){}var o;Ct.push(e),n.onversionchange=Qe((n=>{t.vcFired=!0,e.on("versionchange").fire(n)})),n.onclose=Qe((t=>{e.on("close").fire(t)})),c&&function({indexedDB:e,IDBKeyRange:t},n){!Bn(e)&&n!==At&&Pn(e,t).put({name:n}).catch(ie)}(e._deps,l),i()}),o)}))))]).then((()=>(r(),t.onReadyBeingFired=[],Oe.resolve(Rn((()=>e.on.ready.fire(e.vip)))).then((function n(){if(t.onReadyBeingFired.length>0){let i=t.onReadyBeingFired.reduce(de,ie);return t.onReadyBeingFired=[],Oe.resolve(Rn((()=>i(e.vip)))).then(n)}}))))).finally((()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((()=>e)).catch((n=>{t.dbOpenError=n;try{s&&s.abort()}catch(e){}return i===t.openCanceller&&e._close(),mt(n)})).finally((()=>{t.openComplete=!0,o()}))}(this)}_close(){const e=this._state,t=Ct.indexOf(this);if(t>=0&&Ct.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Oe((t=>{e.dbReadyResolve=t})),e.openCanceller=new Oe(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ee.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new Oe(((n,i)=>{const a=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=Qe((()=>{!function({indexedDB:e,IDBKeyRange:t},n){!Bn(e)&&n!==At&&Pn(e,t).delete(n).catch(ie)}(this._deps,this.name),n()})),e.onerror=rn(i),e.onblocked=this._fireOnBlocked};if(e)throw new ee.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(a):a()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return a(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=Nn.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let i=ke.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);const a=-1!==e.indexOf("?");let r,o;e=e.replace("!","").replace("?","");try{if(o=t.map((e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===Dt)r=Dt;else{if("rw"!=e&&e!=kt)throw new ee.InvalidArgument("Invalid transaction mode: "+e);r=kt}if(i){if(i.mode===Dt&&r===kt){if(!a)throw new ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach((e=>{if(i&&-1===i.storeNames.indexOf(e)){if(!a)throw new ee.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),a&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,((t,n)=>{n(e)})):mt(e)}const s=Mn.bind(null,this,r,o,i,n);return i?i._promise(r,s,"lock"):ke.trans?ut(ke.transless,(()=>this._whenReady(s))):this._whenReady(s)}table(e){if(!l(this._allTables,e))throw new ee.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const ei="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class ti{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}[ei](){return this}}function ni(e,t){return a(t).forEach((n=>{Gn(e[n]||(e[n]=new Wn),t[n])})),e}function ii(e){let t,n=!1;const i=new ti((i=>{const r=F(e);let o=!1,s={},c={};const l={get closed(){return o},unsubscribe:()=>{o=!0,ln.storagemutated.unsubscribe(f)}};i.start&&i.start(l);let u=!1,d=!1;function p(){return a(c).some((e=>s[e]&&$n(s[e],c[e])))}const f=e=>{ni(s,e),p()&&g()},g=()=>{if(u||o)return;s={};const a={},h=function(t){r&&it();const n=()=>nt(e,{subscr:t,trans:null}),i=ke.trans?ut(ke.transless,n):n();return r&&i.then(at,at),i}(a);d||(ln(sn,f),d=!0),u=!0,Promise.resolve(h).then((e=>{n=!0,t=e,u=!1,o||(p()?g():(s={},c=a,i.next&&i.next(e)))}),(e=>{u=!1,n=!1,i.error&&i.error(e),l.unsubscribe()}))};return g(),l}));return i.hasValue=()=>n,i.getValue=()=>t,i}let ai;try{ai={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(i){ai={indexedDB:null,IDBKeyRange:null}}const ri=Zn;function oi(e){let t=si;try{si=!0,ln.storagemutated.fire(e)}finally{si=t}}u(ri,{...ne,delete:e=>new ri(e,{addons:[]}).delete(),exists:e=>new ri(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return Bn(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>e!==At)))):Pn(e,t).toCollection().primaryKeys()}(ri.dependencies).then(e)}catch(e){return mt(new ee.MissingAPI)}},defineClass:()=>function(e){o(this,e)},ignoreTransaction:e=>ke.trans?ut(ke.transless,e):e(),vip:Rn,async:function(e){return function(){try{var t=Un(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Oe.resolve(t)}catch(e){return mt(e)}}},spawn:function(e,t,n){try{var i=Un(e.apply(n,t||[]));return i&&"function"==typeof i.then?i:Oe.resolve(i)}catch(e){return mt(e)}},currentTransaction:{get:()=>ke.trans||null},waitFor:function(e,t){const n=Oe.resolve("function"==typeof e?ri.ignoreTransaction(e):e).timeout(t||6e4);return ke.trans?ke.trans.waitFor(n):n},Promise:Oe,debug:{get:()=>L,set:e=>{j(e,"dexie"===e?()=>!0:_t)}},derive:f,extend:o,props:u,override:y,Events:Ut,on:ln,liveQuery:ii,extendObservabilitySet:ni,getByKeyPath:x,setByKeyPath:C,delByKeyPath:function(e,t){"string"==typeof t?C(e,t,void 0):"length"in t&&[].map.call(t,(function(t){C(e,t,void 0)}))},shallowClone:T,deepClone:k,getObjectDiff:jn,cmp:zt,asap:w,minKey:wt,addons:[],connections:Ct,errnames:J,dependencies:ai,semVer:yt,version:yt.split(".").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),ri.maxKey=gn(ri.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(ln(sn,(e=>{if(!si){let t;Tt?(t=document.createEvent("CustomEvent"),t.initCustomEvent(cn,!0,!0,e)):t=new CustomEvent(cn,{detail:e}),si=!0,dispatchEvent(t),si=!1}})),addEventListener(cn,(({detail:e})=>{si||oi(e)})));let si=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel(cn);"function"==typeof e.unref&&e.unref(),ln(sn,(t=>{si||e.postMessage(t)})),e.onmessage=e=>{e.data&&oi(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){ln(sn,(e=>{try{si||("undefined"!=typeof localStorage&&localStorage.setItem(cn,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:cn,changedParts:e}))))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(e=>{if(e.key===cn){const t=JSON.parse(e.newValue);t&&oi(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",(function({data:e}){e&&e.type===cn&&oi(e.changedParts)}))}Oe.rejectionMapper=function(e,t){if(!e||e instanceof $||e instanceof TypeError||e instanceof SyntaxError||!e.name||!te[e.name])return e;var n=new te[e.name](t||e.message,e);return"stack"in e&&p(n,"stack",{get:function(){return this.inner.stack}}),n},j(L,_t)},1813:e=>{"use strict";e.exports=JSON.parse('{"application/1d-interleaved-parityfec":{"source":"iana"},"application/3gpdash-qoe-report+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/3gpp-ims+xml":{"source":"iana","compressible":true},"application/3gpphal+json":{"source":"iana","compressible":true},"application/3gpphalforms+json":{"source":"iana","compressible":true},"application/a2l":{"source":"iana"},"application/ace+cbor":{"source":"iana"},"application/activemessage":{"source":"iana"},"application/activity+json":{"source":"iana","compressible":true},"application/alto-costmap+json":{"source":"iana","compressible":true},"application/alto-costmapfilter+json":{"source":"iana","compressible":true},"application/alto-directory+json":{"source":"iana","compressible":true},"application/alto-endpointcost+json":{"source":"iana","compressible":true},"application/alto-endpointcostparams+json":{"source":"iana","compressible":true},"application/alto-endpointprop+json":{"source":"iana","compressible":true},"application/alto-endpointpropparams+json":{"source":"iana","compressible":true},"application/alto-error+json":{"source":"iana","compressible":true},"application/alto-networkmap+json":{"source":"iana","compressible":true},"application/alto-networkmapfilter+json":{"source":"iana","compressible":true},"application/alto-updatestreamcontrol+json":{"source":"iana","compressible":true},"application/alto-updatestreamparams+json":{"source":"iana","compressible":true},"application/aml":{"source":"iana"},"application/andrew-inset":{"source":"iana","extensions":["ez"]},"application/applefile":{"source":"iana"},"application/applixware":{"source":"apache","extensions":["aw"]},"application/at+jwt":{"source":"iana"},"application/atf":{"source":"iana"},"application/atfx":{"source":"iana"},"application/atom+xml":{"source":"iana","compressible":true,"extensions":["atom"]},"application/atomcat+xml":{"source":"iana","compressible":true,"extensions":["atomcat"]},"application/atomdeleted+xml":{"source":"iana","compressible":true,"extensions":["atomdeleted"]},"application/atomicmail":{"source":"iana"},"application/atomsvc+xml":{"source":"iana","compressible":true,"extensions":["atomsvc"]},"application/atsc-dwd+xml":{"source":"iana","compressible":true,"extensions":["dwd"]},"application/atsc-dynamic-event-message":{"source":"iana"},"application/atsc-held+xml":{"source":"iana","compressible":true,"extensions":["held"]},"application/atsc-rdt+json":{"source":"iana","compressible":true},"application/atsc-rsat+xml":{"source":"iana","compressible":true,"extensions":["rsat"]},"application/atxml":{"source":"iana"},"application/auth-policy+xml":{"source":"iana","compressible":true},"application/bacnet-xdd+zip":{"source":"iana","compressible":false},"application/batch-smtp":{"source":"iana"},"application/bdoc":{"compressible":false,"extensions":["bdoc"]},"application/beep+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/calendar+json":{"source":"iana","compressible":true},"application/calendar+xml":{"source":"iana","compressible":true,"extensions":["xcs"]},"application/call-completion":{"source":"iana"},"application/cals-1840":{"source":"iana"},"application/captive+json":{"source":"iana","compressible":true},"application/cbor":{"source":"iana"},"application/cbor-seq":{"source":"iana"},"application/cccex":{"source":"iana"},"application/ccmp+xml":{"source":"iana","compressible":true},"application/ccxml+xml":{"source":"iana","compressible":true,"extensions":["ccxml"]},"application/cdfx+xml":{"source":"iana","compressible":true,"extensions":["cdfx"]},"application/cdmi-capability":{"source":"iana","extensions":["cdmia"]},"application/cdmi-container":{"source":"iana","extensions":["cdmic"]},"application/cdmi-domain":{"source":"iana","extensions":["cdmid"]},"application/cdmi-object":{"source":"iana","extensions":["cdmio"]},"application/cdmi-queue":{"source":"iana","extensions":["cdmiq"]},"application/cdni":{"source":"iana"},"application/cea":{"source":"iana"},"application/cea-2018+xml":{"source":"iana","compressible":true},"application/cellml+xml":{"source":"iana","compressible":true},"application/cfw":{"source":"iana"},"application/city+json":{"source":"iana","compressible":true},"application/clr":{"source":"iana"},"application/clue+xml":{"source":"iana","compressible":true},"application/clue_info+xml":{"source":"iana","compressible":true},"application/cms":{"source":"iana"},"application/cnrp+xml":{"source":"iana","compressible":true},"application/coap-group+json":{"source":"iana","compressible":true},"application/coap-payload":{"source":"iana"},"application/commonground":{"source":"iana"},"application/conference-info+xml":{"source":"iana","compressible":true},"application/cose":{"source":"iana"},"application/cose-key":{"source":"iana"},"application/cose-key-set":{"source":"iana"},"application/cpl+xml":{"source":"iana","compressible":true,"extensions":["cpl"]},"application/csrattrs":{"source":"iana"},"application/csta+xml":{"source":"iana","compressible":true},"application/cstadata+xml":{"source":"iana","compressible":true},"application/csvm+json":{"source":"iana","compressible":true},"application/cu-seeme":{"source":"apache","extensions":["cu"]},"application/cwt":{"source":"iana"},"application/cybercash":{"source":"iana"},"application/dart":{"compressible":true},"application/dash+xml":{"source":"iana","compressible":true,"extensions":["mpd"]},"application/dash-patch+xml":{"source":"iana","compressible":true,"extensions":["mpp"]},"application/dashdelta":{"source":"iana"},"application/davmount+xml":{"source":"iana","compressible":true,"extensions":["davmount"]},"application/dca-rft":{"source":"iana"},"application/dcd":{"source":"iana"},"application/dec-dx":{"source":"iana"},"application/dialog-info+xml":{"source":"iana","compressible":true},"application/dicom":{"source":"iana"},"application/dicom+json":{"source":"iana","compressible":true},"application/dicom+xml":{"source":"iana","compressible":true},"application/dii":{"source":"iana"},"application/dit":{"source":"iana"},"application/dns":{"source":"iana"},"application/dns+json":{"source":"iana","compressible":true},"application/dns-message":{"source":"iana"},"application/docbook+xml":{"source":"apache","compressible":true,"extensions":["dbk"]},"application/dots+cbor":{"source":"iana"},"application/dskpp+xml":{"source":"iana","compressible":true},"application/dssc+der":{"source":"iana","extensions":["dssc"]},"application/dssc+xml":{"source":"iana","compressible":true,"extensions":["xdssc"]},"application/dvcs":{"source":"iana"},"application/ecmascript":{"source":"iana","compressible":true,"extensions":["es","ecma"]},"application/edi-consent":{"source":"iana"},"application/edi-x12":{"source":"iana","compressible":false},"application/edifact":{"source":"iana","compressible":false},"application/efi":{"source":"iana"},"application/elm+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/elm+xml":{"source":"iana","compressible":true},"application/emergencycalldata.cap+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/emergencycalldata.comment+xml":{"source":"iana","compressible":true},"application/emergencycalldata.control+xml":{"source":"iana","compressible":true},"application/emergencycalldata.deviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.ecall.msd":{"source":"iana"},"application/emergencycalldata.providerinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.serviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.subscriberinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.veds+xml":{"source":"iana","compressible":true},"application/emma+xml":{"source":"iana","compressible":true,"extensions":["emma"]},"application/emotionml+xml":{"source":"iana","compressible":true,"extensions":["emotionml"]},"application/encaprtp":{"source":"iana"},"application/epp+xml":{"source":"iana","compressible":true},"application/epub+zip":{"source":"iana","compressible":false,"extensions":["epub"]},"application/eshop":{"source":"iana"},"application/exi":{"source":"iana","extensions":["exi"]},"application/expect-ct-report+json":{"source":"iana","compressible":true},"application/express":{"source":"iana","extensions":["exp"]},"application/fastinfoset":{"source":"iana"},"application/fastsoap":{"source":"iana"},"application/fdt+xml":{"source":"iana","compressible":true,"extensions":["fdt"]},"application/fhir+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/fhir+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/fido.trusted-apps+json":{"compressible":true},"application/fits":{"source":"iana"},"application/flexfec":{"source":"iana"},"application/font-sfnt":{"source":"iana"},"application/font-tdpfr":{"source":"iana","extensions":["pfr"]},"application/font-woff":{"source":"iana","compressible":false},"application/framework-attributes+xml":{"source":"iana","compressible":true},"application/geo+json":{"source":"iana","compressible":true,"extensions":["geojson"]},"application/geo+json-seq":{"source":"iana"},"application/geopackage+sqlite3":{"source":"iana"},"application/geoxacml+xml":{"source":"iana","compressible":true},"application/gltf-buffer":{"source":"iana"},"application/gml+xml":{"source":"iana","compressible":true,"extensions":["gml"]},"application/gpx+xml":{"source":"apache","compressible":true,"extensions":["gpx"]},"application/gxf":{"source":"apache","extensions":["gxf"]},"application/gzip":{"source":"iana","compressible":false,"extensions":["gz"]},"application/h224":{"source":"iana"},"application/held+xml":{"source":"iana","compressible":true},"application/hjson":{"extensions":["hjson"]},"application/http":{"source":"iana"},"application/hyperstudio":{"source":"iana","extensions":["stk"]},"application/ibe-key-request+xml":{"source":"iana","compressible":true},"application/ibe-pkg-reply+xml":{"source":"iana","compressible":true},"application/ibe-pp-data":{"source":"iana"},"application/iges":{"source":"iana"},"application/im-iscomposing+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/index":{"source":"iana"},"application/index.cmd":{"source":"iana"},"application/index.obj":{"source":"iana"},"application/index.response":{"source":"iana"},"application/index.vnd":{"source":"iana"},"application/inkml+xml":{"source":"iana","compressible":true,"extensions":["ink","inkml"]},"application/iotp":{"source":"iana"},"application/ipfix":{"source":"iana","extensions":["ipfix"]},"application/ipp":{"source":"iana"},"application/isup":{"source":"iana"},"application/its+xml":{"source":"iana","compressible":true,"extensions":["its"]},"application/java-archive":{"source":"apache","compressible":false,"extensions":["jar","war","ear"]},"application/java-serialized-object":{"source":"apache","compressible":false,"extensions":["ser"]},"application/java-vm":{"source":"apache","compressible":false,"extensions":["class"]},"application/javascript":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["js","mjs"]},"application/jf2feed+json":{"source":"iana","compressible":true},"application/jose":{"source":"iana"},"application/jose+json":{"source":"iana","compressible":true},"application/jrd+json":{"source":"iana","compressible":true},"application/jscalendar+json":{"source":"iana","compressible":true},"application/json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["json","map"]},"application/json-patch+json":{"source":"iana","compressible":true},"application/json-seq":{"source":"iana"},"application/json5":{"extensions":["json5"]},"application/jsonml+json":{"source":"apache","compressible":true,"extensions":["jsonml"]},"application/jwk+json":{"source":"iana","compressible":true},"application/jwk-set+json":{"source":"iana","compressible":true},"application/jwt":{"source":"iana"},"application/kpml-request+xml":{"source":"iana","compressible":true},"application/kpml-response+xml":{"source":"iana","compressible":true},"application/ld+json":{"source":"iana","compressible":true,"extensions":["jsonld"]},"application/lgr+xml":{"source":"iana","compressible":true,"extensions":["lgr"]},"application/link-format":{"source":"iana"},"application/load-control+xml":{"source":"iana","compressible":true},"application/lost+xml":{"source":"iana","compressible":true,"extensions":["lostxml"]},"application/lostsync+xml":{"source":"iana","compressible":true},"application/lpf+zip":{"source":"iana","compressible":false},"application/lxf":{"source":"iana"},"application/mac-binhex40":{"source":"iana","extensions":["hqx"]},"application/mac-compactpro":{"source":"apache","extensions":["cpt"]},"application/macwriteii":{"source":"iana"},"application/mads+xml":{"source":"iana","compressible":true,"extensions":["mads"]},"application/manifest+json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["webmanifest"]},"application/marc":{"source":"iana","extensions":["mrc"]},"application/marcxml+xml":{"source":"iana","compressible":true,"extensions":["mrcx"]},"application/mathematica":{"source":"iana","extensions":["ma","nb","mb"]},"application/mathml+xml":{"source":"iana","compressible":true,"extensions":["mathml"]},"application/mathml-content+xml":{"source":"iana","compressible":true},"application/mathml-presentation+xml":{"source":"iana","compressible":true},"application/mbms-associated-procedure-description+xml":{"source":"iana","compressible":true},"application/mbms-deregister+xml":{"source":"iana","compressible":true},"application/mbms-envelope+xml":{"source":"iana","compressible":true},"application/mbms-msk+xml":{"source":"iana","compressible":true},"application/mbms-msk-response+xml":{"source":"iana","compressible":true},"application/mbms-protection-description+xml":{"source":"iana","compressible":true},"application/mbms-reception-report+xml":{"source":"iana","compressible":true},"application/mbms-register+xml":{"source":"iana","compressible":true},"application/mbms-register-response+xml":{"source":"iana","compressible":true},"application/mbms-schedule+xml":{"source":"iana","compressible":true},"application/mbms-user-service-description+xml":{"source":"iana","compressible":true},"application/mbox":{"source":"iana","extensions":["mbox"]},"application/media-policy-dataset+xml":{"source":"iana","compressible":true,"extensions":["mpf"]},"application/media_control+xml":{"source":"iana","compressible":true},"application/mediaservercontrol+xml":{"source":"iana","compressible":true,"extensions":["mscml"]},"application/merge-patch+json":{"source":"iana","compressible":true},"application/metalink+xml":{"source":"apache","compressible":true,"extensions":["metalink"]},"application/metalink4+xml":{"source":"iana","compressible":true,"extensions":["meta4"]},"application/mets+xml":{"source":"iana","compressible":true,"extensions":["mets"]},"application/mf4":{"source":"iana"},"application/mikey":{"source":"iana"},"application/mipc":{"source":"iana"},"application/missing-blocks+cbor-seq":{"source":"iana"},"application/mmt-aei+xml":{"source":"iana","compressible":true,"extensions":["maei"]},"application/mmt-usd+xml":{"source":"iana","compressible":true,"extensions":["musd"]},"application/mods+xml":{"source":"iana","compressible":true,"extensions":["mods"]},"application/moss-keys":{"source":"iana"},"application/moss-signature":{"source":"iana"},"application/mosskey-data":{"source":"iana"},"application/mosskey-request":{"source":"iana"},"application/mp21":{"source":"iana","extensions":["m21","mp21"]},"application/mp4":{"source":"iana","extensions":["mp4s","m4p"]},"application/mpeg4-generic":{"source":"iana"},"application/mpeg4-iod":{"source":"iana"},"application/mpeg4-iod-xmt":{"source":"iana"},"application/mrb-consumer+xml":{"source":"iana","compressible":true},"application/mrb-publish+xml":{"source":"iana","compressible":true},"application/msc-ivr+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msc-mixer+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msword":{"source":"iana","compressible":false,"extensions":["doc","dot"]},"application/mud+json":{"source":"iana","compressible":true},"application/multipart-core":{"source":"iana"},"application/mxf":{"source":"iana","extensions":["mxf"]},"application/n-quads":{"source":"iana","extensions":["nq"]},"application/n-triples":{"source":"iana","extensions":["nt"]},"application/nasdata":{"source":"iana"},"application/news-checkgroups":{"source":"iana","charset":"US-ASCII"},"application/news-groupinfo":{"source":"iana","charset":"US-ASCII"},"application/news-transmission":{"source":"iana"},"application/nlsml+xml":{"source":"iana","compressible":true},"application/node":{"source":"iana","extensions":["cjs"]},"application/nss":{"source":"iana"},"application/oauth-authz-req+jwt":{"source":"iana"},"application/oblivious-dns-message":{"source":"iana"},"application/ocsp-request":{"source":"iana"},"application/ocsp-response":{"source":"iana"},"application/octet-stream":{"source":"iana","compressible":false,"extensions":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{"source":"iana","extensions":["oda"]},"application/odm+xml":{"source":"iana","compressible":true},"application/odx":{"source":"iana"},"application/oebps-package+xml":{"source":"iana","compressible":true,"extensions":["opf"]},"application/ogg":{"source":"iana","compressible":false,"extensions":["ogx"]},"application/omdoc+xml":{"source":"apache","compressible":true,"extensions":["omdoc"]},"application/onenote":{"source":"apache","extensions":["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{"source":"iana","compressible":true},"application/oscore":{"source":"iana"},"application/oxps":{"source":"iana","extensions":["oxps"]},"application/p21":{"source":"iana"},"application/p21+zip":{"source":"iana","compressible":false},"application/p2p-overlay+xml":{"source":"iana","compressible":true,"extensions":["relo"]},"application/parityfec":{"source":"iana"},"application/passport":{"source":"iana"},"application/patch-ops-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/pdf":{"source":"iana","compressible":false,"extensions":["pdf"]},"application/pdx":{"source":"iana"},"application/pem-certificate-chain":{"source":"iana"},"application/pgp-encrypted":{"source":"iana","compressible":false,"extensions":["pgp"]},"application/pgp-keys":{"source":"iana","extensions":["asc"]},"application/pgp-signature":{"source":"iana","extensions":["asc","sig"]},"application/pics-rules":{"source":"apache","extensions":["prf"]},"application/pidf+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pidf-diff+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pkcs10":{"source":"iana","extensions":["p10"]},"application/pkcs12":{"source":"iana"},"application/pkcs7-mime":{"source":"iana","extensions":["p7m","p7c"]},"application/pkcs7-signature":{"source":"iana","extensions":["p7s"]},"application/pkcs8":{"source":"iana","extensions":["p8"]},"application/pkcs8-encrypted":{"source":"iana"},"application/pkix-attr-cert":{"source":"iana","extensions":["ac"]},"application/pkix-cert":{"source":"iana","extensions":["cer"]},"application/pkix-crl":{"source":"iana","extensions":["crl"]},"application/pkix-pkipath":{"source":"iana","extensions":["pkipath"]},"application/pkixcmp":{"source":"iana","extensions":["pki"]},"application/pls+xml":{"source":"iana","compressible":true,"extensions":["pls"]},"application/poc-settings+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/postscript":{"source":"iana","compressible":true,"extensions":["ai","eps","ps"]},"application/ppsp-tracker+json":{"source":"iana","compressible":true},"application/problem+json":{"source":"iana","compressible":true},"application/problem+xml":{"source":"iana","compressible":true},"application/provenance+xml":{"source":"iana","compressible":true,"extensions":["provx"]},"application/prs.alvestrand.titrax-sheet":{"source":"iana"},"application/prs.cww":{"source":"iana","extensions":["cww"]},"application/prs.cyn":{"source":"iana","charset":"7-BIT"},"application/prs.hpub+zip":{"source":"iana","compressible":false},"application/prs.nprend":{"source":"iana"},"application/prs.plucker":{"source":"iana"},"application/prs.rdf-xml-crypt":{"source":"iana"},"application/prs.xsf+xml":{"source":"iana","compressible":true},"application/pskc+xml":{"source":"iana","compressible":true,"extensions":["pskcxml"]},"application/pvd+json":{"source":"iana","compressible":true},"application/qsig":{"source":"iana"},"application/raml+yaml":{"compressible":true,"extensions":["raml"]},"application/raptorfec":{"source":"iana"},"application/rdap+json":{"source":"iana","compressible":true},"application/rdf+xml":{"source":"iana","compressible":true,"extensions":["rdf","owl"]},"application/reginfo+xml":{"source":"iana","compressible":true,"extensions":["rif"]},"application/relax-ng-compact-syntax":{"source":"iana","extensions":["rnc"]},"application/remote-printing":{"source":"iana"},"application/reputon+json":{"source":"iana","compressible":true},"application/resource-lists+xml":{"source":"iana","compressible":true,"extensions":["rl"]},"application/resource-lists-diff+xml":{"source":"iana","compressible":true,"extensions":["rld"]},"application/rfc+xml":{"source":"iana","compressible":true},"application/riscos":{"source":"iana"},"application/rlmi+xml":{"source":"iana","compressible":true},"application/rls-services+xml":{"source":"iana","compressible":true,"extensions":["rs"]},"application/route-apd+xml":{"source":"iana","compressible":true,"extensions":["rapd"]},"application/route-s-tsid+xml":{"source":"iana","compressible":true,"extensions":["sls"]},"application/route-usd+xml":{"source":"iana","compressible":true,"extensions":["rusd"]},"application/rpki-ghostbusters":{"source":"iana","extensions":["gbr"]},"application/rpki-manifest":{"source":"iana","extensions":["mft"]},"application/rpki-publication":{"source":"iana"},"application/rpki-roa":{"source":"iana","extensions":["roa"]},"application/rpki-updown":{"source":"iana"},"application/rsd+xml":{"source":"apache","compressible":true,"extensions":["rsd"]},"application/rss+xml":{"source":"apache","compressible":true,"extensions":["rss"]},"application/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"application/rtploopback":{"source":"iana"},"application/rtx":{"source":"iana"},"application/samlassertion+xml":{"source":"iana","compressible":true},"application/samlmetadata+xml":{"source":"iana","compressible":true},"application/sarif+json":{"source":"iana","compressible":true},"application/sarif-external-properties+json":{"source":"iana","compressible":true},"application/sbe":{"source":"iana"},"application/sbml+xml":{"source":"iana","compressible":true,"extensions":["sbml"]},"application/scaip+xml":{"source":"iana","compressible":true},"application/scim+json":{"source":"iana","compressible":true},"application/scvp-cv-request":{"source":"iana","extensions":["scq"]},"application/scvp-cv-response":{"source":"iana","extensions":["scs"]},"application/scvp-vp-request":{"source":"iana","extensions":["spq"]},"application/scvp-vp-response":{"source":"iana","extensions":["spp"]},"application/sdp":{"source":"iana","extensions":["sdp"]},"application/secevent+jwt":{"source":"iana"},"application/senml+cbor":{"source":"iana"},"application/senml+json":{"source":"iana","compressible":true},"application/senml+xml":{"source":"iana","compressible":true,"extensions":["senmlx"]},"application/senml-etch+cbor":{"source":"iana"},"application/senml-etch+json":{"source":"iana","compressible":true},"application/senml-exi":{"source":"iana"},"application/sensml+cbor":{"source":"iana"},"application/sensml+json":{"source":"iana","compressible":true},"application/sensml+xml":{"source":"iana","compressible":true,"extensions":["sensmlx"]},"application/sensml-exi":{"source":"iana"},"application/sep+xml":{"source":"iana","compressible":true},"application/sep-exi":{"source":"iana"},"application/session-info":{"source":"iana"},"application/set-payment":{"source":"iana"},"application/set-payment-initiation":{"source":"iana","extensions":["setpay"]},"application/set-registration":{"source":"iana"},"application/set-registration-initiation":{"source":"iana","extensions":["setreg"]},"application/sgml":{"source":"iana"},"application/sgml-open-catalog":{"source":"iana"},"application/shf+xml":{"source":"iana","compressible":true,"extensions":["shf"]},"application/sieve":{"source":"iana","extensions":["siv","sieve"]},"application/simple-filter+xml":{"source":"iana","compressible":true},"application/simple-message-summary":{"source":"iana"},"application/simplesymbolcontainer":{"source":"iana"},"application/sipc":{"source":"iana"},"application/slate":{"source":"iana"},"application/smil":{"source":"iana"},"application/smil+xml":{"source":"iana","compressible":true,"extensions":["smi","smil"]},"application/smpte336m":{"source":"iana"},"application/soap+fastinfoset":{"source":"iana"},"application/soap+xml":{"source":"iana","compressible":true},"application/sparql-query":{"source":"iana","extensions":["rq"]},"application/sparql-results+xml":{"source":"iana","compressible":true,"extensions":["srx"]},"application/spdx+json":{"source":"iana","compressible":true},"application/spirits-event+xml":{"source":"iana","compressible":true},"application/sql":{"source":"iana"},"application/srgs":{"source":"iana","extensions":["gram"]},"application/srgs+xml":{"source":"iana","compressible":true,"extensions":["grxml"]},"application/sru+xml":{"source":"iana","compressible":true,"extensions":["sru"]},"application/ssdl+xml":{"source":"apache","compressible":true,"extensions":["ssdl"]},"application/ssml+xml":{"source":"iana","compressible":true,"extensions":["ssml"]},"application/stix+json":{"source":"iana","compressible":true},"application/swid+xml":{"source":"iana","compressible":true,"extensions":["swidtag"]},"application/tamp-apex-update":{"source":"iana"},"application/tamp-apex-update-confirm":{"source":"iana"},"application/tamp-community-update":{"source":"iana"},"application/tamp-community-update-confirm":{"source":"iana"},"application/tamp-error":{"source":"iana"},"application/tamp-sequence-adjust":{"source":"iana"},"application/tamp-sequence-adjust-confirm":{"source":"iana"},"application/tamp-status-query":{"source":"iana"},"application/tamp-status-response":{"source":"iana"},"application/tamp-update":{"source":"iana"},"application/tamp-update-confirm":{"source":"iana"},"application/tar":{"compressible":true},"application/taxii+json":{"source":"iana","compressible":true},"application/td+json":{"source":"iana","compressible":true},"application/tei+xml":{"source":"iana","compressible":true,"extensions":["tei","teicorpus"]},"application/tetra_isi":{"source":"iana"},"application/thraud+xml":{"source":"iana","compressible":true,"extensions":["tfi"]},"application/timestamp-query":{"source":"iana"},"application/timestamp-reply":{"source":"iana"},"application/timestamped-data":{"source":"iana","extensions":["tsd"]},"application/tlsrpt+gzip":{"source":"iana"},"application/tlsrpt+json":{"source":"iana","compressible":true},"application/tnauthlist":{"source":"iana"},"application/token-introspection+jwt":{"source":"iana"},"application/toml":{"compressible":true,"extensions":["toml"]},"application/trickle-ice-sdpfrag":{"source":"iana"},"application/trig":{"source":"iana","extensions":["trig"]},"application/ttml+xml":{"source":"iana","compressible":true,"extensions":["ttml"]},"application/tve-trigger":{"source":"iana"},"application/tzif":{"source":"iana"},"application/tzif-leap":{"source":"iana"},"application/ubjson":{"compressible":false,"extensions":["ubj"]},"application/ulpfec":{"source":"iana"},"application/urc-grpsheet+xml":{"source":"iana","compressible":true},"application/urc-ressheet+xml":{"source":"iana","compressible":true,"extensions":["rsheet"]},"application/urc-targetdesc+xml":{"source":"iana","compressible":true,"extensions":["td"]},"application/urc-uisocketdesc+xml":{"source":"iana","compressible":true},"application/vcard+json":{"source":"iana","compressible":true},"application/vcard+xml":{"source":"iana","compressible":true},"application/vemmi":{"source":"iana"},"application/vividence.scriptfile":{"source":"apache"},"application/vnd.1000minds.decision-model+xml":{"source":"iana","compressible":true,"extensions":["1km"]},"application/vnd.3gpp-prose+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-prose-pc3ch+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-v2x-local-service-information":{"source":"iana"},"application/vnd.3gpp.5gnas":{"source":"iana"},"application/vnd.3gpp.access-transfer-events+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.bsf+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gmop+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gtpc":{"source":"iana"},"application/vnd.3gpp.interworking-data":{"source":"iana"},"application/vnd.3gpp.lpp":{"source":"iana"},"application/vnd.3gpp.mc-signalling-ear":{"source":"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-payload":{"source":"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-signalling":{"source":"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-floor-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-signed+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-init-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-transmission-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mid-call+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ngap":{"source":"iana"},"application/vnd.3gpp.pfcp":{"source":"iana"},"application/vnd.3gpp.pic-bw-large":{"source":"iana","extensions":["plb"]},"application/vnd.3gpp.pic-bw-small":{"source":"iana","extensions":["psb"]},"application/vnd.3gpp.pic-bw-var":{"source":"iana","extensions":["pvb"]},"application/vnd.3gpp.s1ap":{"source":"iana"},"application/vnd.3gpp.sms":{"source":"iana"},"application/vnd.3gpp.sms+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-ext+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.state-and-event-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ussd+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.bcmcsinfo+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.sms":{"source":"iana"},"application/vnd.3gpp2.tcap":{"source":"iana","extensions":["tcap"]},"application/vnd.3lightssoftware.imagescal":{"source":"iana"},"application/vnd.3m.post-it-notes":{"source":"iana","extensions":["pwn"]},"application/vnd.accpac.simply.aso":{"source":"iana","extensions":["aso"]},"application/vnd.accpac.simply.imp":{"source":"iana","extensions":["imp"]},"application/vnd.acucobol":{"source":"iana","extensions":["acu"]},"application/vnd.acucorp":{"source":"iana","extensions":["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{"source":"apache","compressible":false,"extensions":["air"]},"application/vnd.adobe.flash.movie":{"source":"iana"},"application/vnd.adobe.formscentral.fcdt":{"source":"iana","extensions":["fcdt"]},"application/vnd.adobe.fxp":{"source":"iana","extensions":["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{"source":"iana"},"application/vnd.adobe.xdp+xml":{"source":"iana","compressible":true,"extensions":["xdp"]},"application/vnd.adobe.xfdf":{"source":"iana","extensions":["xfdf"]},"application/vnd.aether.imp":{"source":"iana"},"application/vnd.afpc.afplinedata":{"source":"iana"},"application/vnd.afpc.afplinedata-pagedef":{"source":"iana"},"application/vnd.afpc.cmoca-cmresource":{"source":"iana"},"application/vnd.afpc.foca-charset":{"source":"iana"},"application/vnd.afpc.foca-codedfont":{"source":"iana"},"application/vnd.afpc.foca-codepage":{"source":"iana"},"application/vnd.afpc.modca":{"source":"iana"},"application/vnd.afpc.modca-cmtable":{"source":"iana"},"application/vnd.afpc.modca-formdef":{"source":"iana"},"application/vnd.afpc.modca-mediummap":{"source":"iana"},"application/vnd.afpc.modca-objectcontainer":{"source":"iana"},"application/vnd.afpc.modca-overlay":{"source":"iana"},"application/vnd.afpc.modca-pagesegment":{"source":"iana"},"application/vnd.age":{"source":"iana","extensions":["age"]},"application/vnd.ah-barcode":{"source":"iana"},"application/vnd.ahead.space":{"source":"iana","extensions":["ahead"]},"application/vnd.airzip.filesecure.azf":{"source":"iana","extensions":["azf"]},"application/vnd.airzip.filesecure.azs":{"source":"iana","extensions":["azs"]},"application/vnd.amadeus+json":{"source":"iana","compressible":true},"application/vnd.amazon.ebook":{"source":"apache","extensions":["azw"]},"application/vnd.amazon.mobi8-ebook":{"source":"iana"},"application/vnd.americandynamics.acc":{"source":"iana","extensions":["acc"]},"application/vnd.amiga.ami":{"source":"iana","extensions":["ami"]},"application/vnd.amundsen.maze+xml":{"source":"iana","compressible":true},"application/vnd.android.ota":{"source":"iana"},"application/vnd.android.package-archive":{"source":"apache","compressible":false,"extensions":["apk"]},"application/vnd.anki":{"source":"iana"},"application/vnd.anser-web-certificate-issue-initiation":{"source":"iana","extensions":["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{"source":"apache","extensions":["fti"]},"application/vnd.antix.game-component":{"source":"iana","extensions":["atx"]},"application/vnd.apache.arrow.file":{"source":"iana"},"application/vnd.apache.arrow.stream":{"source":"iana"},"application/vnd.apache.thrift.binary":{"source":"iana"},"application/vnd.apache.thrift.compact":{"source":"iana"},"application/vnd.apache.thrift.json":{"source":"iana"},"application/vnd.api+json":{"source":"iana","compressible":true},"application/vnd.aplextor.warrp+json":{"source":"iana","compressible":true},"application/vnd.apothekende.reservation+json":{"source":"iana","compressible":true},"application/vnd.apple.installer+xml":{"source":"iana","compressible":true,"extensions":["mpkg"]},"application/vnd.apple.keynote":{"source":"iana","extensions":["key"]},"application/vnd.apple.mpegurl":{"source":"iana","extensions":["m3u8"]},"application/vnd.apple.numbers":{"source":"iana","extensions":["numbers"]},"application/vnd.apple.pages":{"source":"iana","extensions":["pages"]},"application/vnd.apple.pkpass":{"compressible":false,"extensions":["pkpass"]},"application/vnd.arastra.swi":{"source":"iana"},"application/vnd.aristanetworks.swi":{"source":"iana","extensions":["swi"]},"application/vnd.artisan+json":{"source":"iana","compressible":true},"application/vnd.artsquare":{"source":"iana"},"application/vnd.astraea-software.iota":{"source":"iana","extensions":["iota"]},"application/vnd.audiograph":{"source":"iana","extensions":["aep"]},"application/vnd.autopackage":{"source":"iana"},"application/vnd.avalon+json":{"source":"iana","compressible":true},"application/vnd.avistar+xml":{"source":"iana","compressible":true},"application/vnd.balsamiq.bmml+xml":{"source":"iana","compressible":true,"extensions":["bmml"]},"application/vnd.balsamiq.bmpr":{"source":"iana"},"application/vnd.banana-accounting":{"source":"iana"},"application/vnd.bbf.usp.error":{"source":"iana"},"application/vnd.bbf.usp.msg":{"source":"iana"},"application/vnd.bbf.usp.msg+json":{"source":"iana","compressible":true},"application/vnd.bekitzur-stech+json":{"source":"iana","compressible":true},"application/vnd.bint.med-content":{"source":"iana"},"application/vnd.biopax.rdf+xml":{"source":"iana","compressible":true},"application/vnd.blink-idb-value-wrapper":{"source":"iana"},"application/vnd.blueice.multipass":{"source":"iana","extensions":["mpm"]},"application/vnd.bluetooth.ep.oob":{"source":"iana"},"application/vnd.bluetooth.le.oob":{"source":"iana"},"application/vnd.bmi":{"source":"iana","extensions":["bmi"]},"application/vnd.bpf":{"source":"iana"},"application/vnd.bpf3":{"source":"iana"},"application/vnd.businessobjects":{"source":"iana","extensions":["rep"]},"application/vnd.byu.uapi+json":{"source":"iana","compressible":true},"application/vnd.cab-jscript":{"source":"iana"},"application/vnd.canon-cpdl":{"source":"iana"},"application/vnd.canon-lips":{"source":"iana"},"application/vnd.capasystems-pg+json":{"source":"iana","compressible":true},"application/vnd.cendio.thinlinc.clientconf":{"source":"iana"},"application/vnd.century-systems.tcp_stream":{"source":"iana"},"application/vnd.chemdraw+xml":{"source":"iana","compressible":true,"extensions":["cdxml"]},"application/vnd.chess-pgn":{"source":"iana"},"application/vnd.chipnuts.karaoke-mmd":{"source":"iana","extensions":["mmd"]},"application/vnd.ciedi":{"source":"iana"},"application/vnd.cinderella":{"source":"iana","extensions":["cdy"]},"application/vnd.cirpack.isdn-ext":{"source":"iana"},"application/vnd.citationstyles.style+xml":{"source":"iana","compressible":true,"extensions":["csl"]},"application/vnd.claymore":{"source":"iana","extensions":["cla"]},"application/vnd.cloanto.rp9":{"source":"iana","extensions":["rp9"]},"application/vnd.clonk.c4group":{"source":"iana","extensions":["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{"source":"iana","extensions":["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{"source":"iana","extensions":["c11amz"]},"application/vnd.coffeescript":{"source":"iana"},"application/vnd.collabio.xodocuments.document":{"source":"iana"},"application/vnd.collabio.xodocuments.document-template":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation-template":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{"source":"iana"},"application/vnd.collection+json":{"source":"iana","compressible":true},"application/vnd.collection.doc+json":{"source":"iana","compressible":true},"application/vnd.collection.next+json":{"source":"iana","compressible":true},"application/vnd.comicbook+zip":{"source":"iana","compressible":false},"application/vnd.comicbook-rar":{"source":"iana"},"application/vnd.commerce-battelle":{"source":"iana"},"application/vnd.commonspace":{"source":"iana","extensions":["csp"]},"application/vnd.contact.cmsg":{"source":"iana","extensions":["cdbcmsg"]},"application/vnd.coreos.ignition+json":{"source":"iana","compressible":true},"application/vnd.cosmocaller":{"source":"iana","extensions":["cmc"]},"application/vnd.crick.clicker":{"source":"iana","extensions":["clkx"]},"application/vnd.crick.clicker.keyboard":{"source":"iana","extensions":["clkk"]},"application/vnd.crick.clicker.palette":{"source":"iana","extensions":["clkp"]},"application/vnd.crick.clicker.template":{"source":"iana","extensions":["clkt"]},"application/vnd.crick.clicker.wordbank":{"source":"iana","extensions":["clkw"]},"application/vnd.criticaltools.wbs+xml":{"source":"iana","compressible":true,"extensions":["wbs"]},"application/vnd.cryptii.pipe+json":{"source":"iana","compressible":true},"application/vnd.crypto-shade-file":{"source":"iana"},"application/vnd.cryptomator.encrypted":{"source":"iana"},"application/vnd.cryptomator.vault":{"source":"iana"},"application/vnd.ctc-posml":{"source":"iana","extensions":["pml"]},"application/vnd.ctct.ws+xml":{"source":"iana","compressible":true},"application/vnd.cups-pdf":{"source":"iana"},"application/vnd.cups-postscript":{"source":"iana"},"application/vnd.cups-ppd":{"source":"iana","extensions":["ppd"]},"application/vnd.cups-raster":{"source":"iana"},"application/vnd.cups-raw":{"source":"iana"},"application/vnd.curl":{"source":"iana"},"application/vnd.curl.car":{"source":"apache","extensions":["car"]},"application/vnd.curl.pcurl":{"source":"apache","extensions":["pcurl"]},"application/vnd.cyan.dean.root+xml":{"source":"iana","compressible":true},"application/vnd.cybank":{"source":"iana"},"application/vnd.cyclonedx+json":{"source":"iana","compressible":true},"application/vnd.cyclonedx+xml":{"source":"iana","compressible":true},"application/vnd.d2l.coursepackage1p0+zip":{"source":"iana","compressible":false},"application/vnd.d3m-dataset":{"source":"iana"},"application/vnd.d3m-problem":{"source":"iana"},"application/vnd.dart":{"source":"iana","compressible":true,"extensions":["dart"]},"application/vnd.data-vision.rdz":{"source":"iana","extensions":["rdz"]},"application/vnd.datapackage+json":{"source":"iana","compressible":true},"application/vnd.dataresource+json":{"source":"iana","compressible":true},"application/vnd.dbf":{"source":"iana","extensions":["dbf"]},"application/vnd.debian.binary-package":{"source":"iana"},"application/vnd.dece.data":{"source":"iana","extensions":["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{"source":"iana","compressible":true,"extensions":["uvt","uvvt"]},"application/vnd.dece.unspecified":{"source":"iana","extensions":["uvx","uvvx"]},"application/vnd.dece.zip":{"source":"iana","extensions":["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{"source":"iana","extensions":["fe_launch"]},"application/vnd.desmume.movie":{"source":"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{"source":"iana"},"application/vnd.dm.delegation+xml":{"source":"iana","compressible":true},"application/vnd.dna":{"source":"iana","extensions":["dna"]},"application/vnd.document+json":{"source":"iana","compressible":true},"application/vnd.dolby.mlp":{"source":"apache","extensions":["mlp"]},"application/vnd.dolby.mobile.1":{"source":"iana"},"application/vnd.dolby.mobile.2":{"source":"iana"},"application/vnd.doremir.scorecloud-binary-document":{"source":"iana"},"application/vnd.dpgraph":{"source":"iana","extensions":["dpg"]},"application/vnd.dreamfactory":{"source":"iana","extensions":["dfac"]},"application/vnd.drive+json":{"source":"iana","compressible":true},"application/vnd.ds-keypoint":{"source":"apache","extensions":["kpxx"]},"application/vnd.dtg.local":{"source":"iana"},"application/vnd.dtg.local.flash":{"source":"iana"},"application/vnd.dtg.local.html":{"source":"iana"},"application/vnd.dvb.ait":{"source":"iana","extensions":["ait"]},"application/vnd.dvb.dvbisl+xml":{"source":"iana","compressible":true},"application/vnd.dvb.dvbj":{"source":"iana"},"application/vnd.dvb.esgcontainer":{"source":"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess2":{"source":"iana"},"application/vnd.dvb.ipdcesgpdd":{"source":"iana"},"application/vnd.dvb.ipdcroaming":{"source":"iana"},"application/vnd.dvb.iptv.alfec-base":{"source":"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{"source":"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-container+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-generic+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-msglist+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-request+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-response+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-init+xml":{"source":"iana","compressible":true},"application/vnd.dvb.pfr":{"source":"iana"},"application/vnd.dvb.service":{"source":"iana","extensions":["svc"]},"application/vnd.dxr":{"source":"iana"},"application/vnd.dynageo":{"source":"iana","extensions":["geo"]},"application/vnd.dzr":{"source":"iana"},"application/vnd.easykaraoke.cdgdownload":{"source":"iana"},"application/vnd.ecdis-update":{"source":"iana"},"application/vnd.ecip.rlp":{"source":"iana"},"application/vnd.eclipse.ditto+json":{"source":"iana","compressible":true},"application/vnd.ecowin.chart":{"source":"iana","extensions":["mag"]},"application/vnd.ecowin.filerequest":{"source":"iana"},"application/vnd.ecowin.fileupdate":{"source":"iana"},"application/vnd.ecowin.series":{"source":"iana"},"application/vnd.ecowin.seriesrequest":{"source":"iana"},"application/vnd.ecowin.seriesupdate":{"source":"iana"},"application/vnd.efi.img":{"source":"iana"},"application/vnd.efi.iso":{"source":"iana"},"application/vnd.emclient.accessrequest+xml":{"source":"iana","compressible":true},"application/vnd.enliven":{"source":"iana","extensions":["nml"]},"application/vnd.enphase.envoy":{"source":"iana"},"application/vnd.eprints.data+xml":{"source":"iana","compressible":true},"application/vnd.epson.esf":{"source":"iana","extensions":["esf"]},"application/vnd.epson.msf":{"source":"iana","extensions":["msf"]},"application/vnd.epson.quickanime":{"source":"iana","extensions":["qam"]},"application/vnd.epson.salt":{"source":"iana","extensions":["slt"]},"application/vnd.epson.ssf":{"source":"iana","extensions":["ssf"]},"application/vnd.ericsson.quickcall":{"source":"iana"},"application/vnd.espass-espass+zip":{"source":"iana","compressible":false},"application/vnd.eszigno3+xml":{"source":"iana","compressible":true,"extensions":["es3","et3"]},"application/vnd.etsi.aoc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.asic-e+zip":{"source":"iana","compressible":false},"application/vnd.etsi.asic-s+zip":{"source":"iana","compressible":false},"application/vnd.etsi.cug+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvcommand+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-bc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-cod+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-npvr+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvservice+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsync+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvueprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mcid+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mheg5":{"source":"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{"source":"iana","compressible":true},"application/vnd.etsi.pstn+xml":{"source":"iana","compressible":true},"application/vnd.etsi.sci+xml":{"source":"iana","compressible":true},"application/vnd.etsi.simservs+xml":{"source":"iana","compressible":true},"application/vnd.etsi.timestamp-token":{"source":"iana"},"application/vnd.etsi.tsl+xml":{"source":"iana","compressible":true},"application/vnd.etsi.tsl.der":{"source":"iana"},"application/vnd.eu.kasparian.car+json":{"source":"iana","compressible":true},"application/vnd.eudora.data":{"source":"iana"},"application/vnd.evolv.ecig.profile":{"source":"iana"},"application/vnd.evolv.ecig.settings":{"source":"iana"},"application/vnd.evolv.ecig.theme":{"source":"iana"},"application/vnd.exstream-empower+zip":{"source":"iana","compressible":false},"application/vnd.exstream-package":{"source":"iana"},"application/vnd.ezpix-album":{"source":"iana","extensions":["ez2"]},"application/vnd.ezpix-package":{"source":"iana","extensions":["ez3"]},"application/vnd.f-secure.mobile":{"source":"iana"},"application/vnd.familysearch.gedcom+zip":{"source":"iana","compressible":false},"application/vnd.fastcopy-disk-image":{"source":"iana"},"application/vnd.fdf":{"source":"iana","extensions":["fdf"]},"application/vnd.fdsn.mseed":{"source":"iana","extensions":["mseed"]},"application/vnd.fdsn.seed":{"source":"iana","extensions":["seed","dataless"]},"application/vnd.ffsns":{"source":"iana"},"application/vnd.ficlab.flb+zip":{"source":"iana","compressible":false},"application/vnd.filmit.zfc":{"source":"iana"},"application/vnd.fints":{"source":"iana"},"application/vnd.firemonkeys.cloudcell":{"source":"iana"},"application/vnd.flographit":{"source":"iana","extensions":["gph"]},"application/vnd.fluxtime.clip":{"source":"iana","extensions":["ftc"]},"application/vnd.font-fontforge-sfd":{"source":"iana"},"application/vnd.framemaker":{"source":"iana","extensions":["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{"source":"iana","extensions":["fnc"]},"application/vnd.frogans.ltf":{"source":"iana","extensions":["ltf"]},"application/vnd.fsc.weblaunch":{"source":"iana","extensions":["fsc"]},"application/vnd.fujifilm.fb.docuworks":{"source":"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{"source":"iana"},"application/vnd.fujifilm.fb.docuworks.container":{"source":"iana"},"application/vnd.fujifilm.fb.jfi+xml":{"source":"iana","compressible":true},"application/vnd.fujitsu.oasys":{"source":"iana","extensions":["oas"]},"application/vnd.fujitsu.oasys2":{"source":"iana","extensions":["oa2"]},"application/vnd.fujitsu.oasys3":{"source":"iana","extensions":["oa3"]},"application/vnd.fujitsu.oasysgp":{"source":"iana","extensions":["fg5"]},"application/vnd.fujitsu.oasysprs":{"source":"iana","extensions":["bh2"]},"application/vnd.fujixerox.art-ex":{"source":"iana"},"application/vnd.fujixerox.art4":{"source":"iana"},"application/vnd.fujixerox.ddd":{"source":"iana","extensions":["ddd"]},"application/vnd.fujixerox.docuworks":{"source":"iana","extensions":["xdw"]},"application/vnd.fujixerox.docuworks.binder":{"source":"iana","extensions":["xbd"]},"application/vnd.fujixerox.docuworks.container":{"source":"iana"},"application/vnd.fujixerox.hbpl":{"source":"iana"},"application/vnd.fut-misnet":{"source":"iana"},"application/vnd.futoin+cbor":{"source":"iana"},"application/vnd.futoin+json":{"source":"iana","compressible":true},"application/vnd.fuzzysheet":{"source":"iana","extensions":["fzs"]},"application/vnd.genomatix.tuxedo":{"source":"iana","extensions":["txd"]},"application/vnd.gentics.grd+json":{"source":"iana","compressible":true},"application/vnd.geo+json":{"source":"iana","compressible":true},"application/vnd.geocube+xml":{"source":"iana","compressible":true},"application/vnd.geogebra.file":{"source":"iana","extensions":["ggb"]},"application/vnd.geogebra.slides":{"source":"iana"},"application/vnd.geogebra.tool":{"source":"iana","extensions":["ggt"]},"application/vnd.geometry-explorer":{"source":"iana","extensions":["gex","gre"]},"application/vnd.geonext":{"source":"iana","extensions":["gxt"]},"application/vnd.geoplan":{"source":"iana","extensions":["g2w"]},"application/vnd.geospace":{"source":"iana","extensions":["g3w"]},"application/vnd.gerber":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt-response":{"source":"iana"},"application/vnd.gmx":{"source":"iana","extensions":["gmx"]},"application/vnd.google-apps.document":{"compressible":false,"extensions":["gdoc"]},"application/vnd.google-apps.presentation":{"compressible":false,"extensions":["gslides"]},"application/vnd.google-apps.spreadsheet":{"compressible":false,"extensions":["gsheet"]},"application/vnd.google-earth.kml+xml":{"source":"iana","compressible":true,"extensions":["kml"]},"application/vnd.google-earth.kmz":{"source":"iana","compressible":false,"extensions":["kmz"]},"application/vnd.gov.sk.e-form+xml":{"source":"iana","compressible":true},"application/vnd.gov.sk.e-form+zip":{"source":"iana","compressible":false},"application/vnd.gov.sk.xmldatacontainer+xml":{"source":"iana","compressible":true},"application/vnd.grafeq":{"source":"iana","extensions":["gqf","gqs"]},"application/vnd.gridmp":{"source":"iana"},"application/vnd.groove-account":{"source":"iana","extensions":["gac"]},"application/vnd.groove-help":{"source":"iana","extensions":["ghf"]},"application/vnd.groove-identity-message":{"source":"iana","extensions":["gim"]},"application/vnd.groove-injector":{"source":"iana","extensions":["grv"]},"application/vnd.groove-tool-message":{"source":"iana","extensions":["gtm"]},"application/vnd.groove-tool-template":{"source":"iana","extensions":["tpl"]},"application/vnd.groove-vcard":{"source":"iana","extensions":["vcg"]},"application/vnd.hal+json":{"source":"iana","compressible":true},"application/vnd.hal+xml":{"source":"iana","compressible":true,"extensions":["hal"]},"application/vnd.handheld-entertainment+xml":{"source":"iana","compressible":true,"extensions":["zmm"]},"application/vnd.hbci":{"source":"iana","extensions":["hbci"]},"application/vnd.hc+json":{"source":"iana","compressible":true},"application/vnd.hcl-bireports":{"source":"iana"},"application/vnd.hdt":{"source":"iana"},"application/vnd.heroku+json":{"source":"iana","compressible":true},"application/vnd.hhe.lesson-player":{"source":"iana","extensions":["les"]},"application/vnd.hl7cda+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.hl7v2+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.hp-hpgl":{"source":"iana","extensions":["hpgl"]},"application/vnd.hp-hpid":{"source":"iana","extensions":["hpid"]},"application/vnd.hp-hps":{"source":"iana","extensions":["hps"]},"application/vnd.hp-jlyt":{"source":"iana","extensions":["jlt"]},"application/vnd.hp-pcl":{"source":"iana","extensions":["pcl"]},"application/vnd.hp-pclxl":{"source":"iana","extensions":["pclxl"]},"application/vnd.httphone":{"source":"iana"},"application/vnd.hydrostatix.sof-data":{"source":"iana","extensions":["sfd-hdstx"]},"application/vnd.hyper+json":{"source":"iana","compressible":true},"application/vnd.hyper-item+json":{"source":"iana","compressible":true},"application/vnd.hyperdrive+json":{"source":"iana","compressible":true},"application/vnd.hzn-3d-crossword":{"source":"iana"},"application/vnd.ibm.afplinedata":{"source":"iana"},"application/vnd.ibm.electronic-media":{"source":"iana"},"application/vnd.ibm.minipay":{"source":"iana","extensions":["mpy"]},"application/vnd.ibm.modcap":{"source":"iana","extensions":["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{"source":"iana","extensions":["irm"]},"application/vnd.ibm.secure-container":{"source":"iana","extensions":["sc"]},"application/vnd.iccprofile":{"source":"iana","extensions":["icc","icm"]},"application/vnd.ieee.1905":{"source":"iana"},"application/vnd.igloader":{"source":"iana","extensions":["igl"]},"application/vnd.imagemeter.folder+zip":{"source":"iana","compressible":false},"application/vnd.imagemeter.image+zip":{"source":"iana","compressible":false},"application/vnd.immervision-ivp":{"source":"iana","extensions":["ivp"]},"application/vnd.immervision-ivu":{"source":"iana","extensions":["ivu"]},"application/vnd.ims.imsccv1p1":{"source":"iana"},"application/vnd.ims.imsccv1p2":{"source":"iana"},"application/vnd.ims.imsccv1p3":{"source":"iana"},"application/vnd.ims.lis.v2.result+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy.id+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{"source":"iana","compressible":true},"application/vnd.informedcontrol.rms+xml":{"source":"iana","compressible":true},"application/vnd.informix-visionary":{"source":"iana"},"application/vnd.infotech.project":{"source":"iana"},"application/vnd.infotech.project+xml":{"source":"iana","compressible":true},"application/vnd.innopath.wamp.notification":{"source":"iana"},"application/vnd.insors.igm":{"source":"iana","extensions":["igm"]},"application/vnd.intercon.formnet":{"source":"iana","extensions":["xpw","xpx"]},"application/vnd.intergeo":{"source":"iana","extensions":["i2g"]},"application/vnd.intertrust.digibox":{"source":"iana"},"application/vnd.intertrust.nncp":{"source":"iana"},"application/vnd.intu.qbo":{"source":"iana","extensions":["qbo"]},"application/vnd.intu.qfx":{"source":"iana","extensions":["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.conceptitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.knowledgeitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsmessage+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.packageitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.planningitem+xml":{"source":"iana","compressible":true},"application/vnd.ipunplugged.rcprofile":{"source":"iana","extensions":["rcprofile"]},"application/vnd.irepository.package+xml":{"source":"iana","compressible":true,"extensions":["irp"]},"application/vnd.is-xpr":{"source":"iana","extensions":["xpr"]},"application/vnd.isac.fcs":{"source":"iana","extensions":["fcs"]},"application/vnd.iso11783-10+zip":{"source":"iana","compressible":false},"application/vnd.jam":{"source":"iana","extensions":["jam"]},"application/vnd.japannet-directory-service":{"source":"iana"},"application/vnd.japannet-jpnstore-wakeup":{"source":"iana"},"application/vnd.japannet-payment-wakeup":{"source":"iana"},"application/vnd.japannet-registration":{"source":"iana"},"application/vnd.japannet-registration-wakeup":{"source":"iana"},"application/vnd.japannet-setstore-wakeup":{"source":"iana"},"application/vnd.japannet-verification":{"source":"iana"},"application/vnd.japannet-verification-wakeup":{"source":"iana"},"application/vnd.jcp.javame.midlet-rms":{"source":"iana","extensions":["rms"]},"application/vnd.jisp":{"source":"iana","extensions":["jisp"]},"application/vnd.joost.joda-archive":{"source":"iana","extensions":["joda"]},"application/vnd.jsk.isdn-ngn":{"source":"iana"},"application/vnd.kahootz":{"source":"iana","extensions":["ktz","ktr"]},"application/vnd.kde.karbon":{"source":"iana","extensions":["karbon"]},"application/vnd.kde.kchart":{"source":"iana","extensions":["chrt"]},"application/vnd.kde.kformula":{"source":"iana","extensions":["kfo"]},"application/vnd.kde.kivio":{"source":"iana","extensions":["flw"]},"application/vnd.kde.kontour":{"source":"iana","extensions":["kon"]},"application/vnd.kde.kpresenter":{"source":"iana","extensions":["kpr","kpt"]},"application/vnd.kde.kspread":{"source":"iana","extensions":["ksp"]},"application/vnd.kde.kword":{"source":"iana","extensions":["kwd","kwt"]},"application/vnd.kenameaapp":{"source":"iana","extensions":["htke"]},"application/vnd.kidspiration":{"source":"iana","extensions":["kia"]},"application/vnd.kinar":{"source":"iana","extensions":["kne","knp"]},"application/vnd.koan":{"source":"iana","extensions":["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{"source":"iana","extensions":["sse"]},"application/vnd.las":{"source":"iana"},"application/vnd.las.las+json":{"source":"iana","compressible":true},"application/vnd.las.las+xml":{"source":"iana","compressible":true,"extensions":["lasxml"]},"application/vnd.laszip":{"source":"iana"},"application/vnd.leap+json":{"source":"iana","compressible":true},"application/vnd.liberty-request+xml":{"source":"iana","compressible":true},"application/vnd.llamagraphics.life-balance.desktop":{"source":"iana","extensions":["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{"source":"iana","compressible":true,"extensions":["lbe"]},"application/vnd.logipipe.circuit+zip":{"source":"iana","compressible":false},"application/vnd.loom":{"source":"iana"},"application/vnd.lotus-1-2-3":{"source":"iana","extensions":["123"]},"application/vnd.lotus-approach":{"source":"iana","extensions":["apr"]},"application/vnd.lotus-freelance":{"source":"iana","extensions":["pre"]},"application/vnd.lotus-notes":{"source":"iana","extensions":["nsf"]},"application/vnd.lotus-organizer":{"source":"iana","extensions":["org"]},"application/vnd.lotus-screencam":{"source":"iana","extensions":["scm"]},"application/vnd.lotus-wordpro":{"source":"iana","extensions":["lwp"]},"application/vnd.macports.portpkg":{"source":"iana","extensions":["portpkg"]},"application/vnd.mapbox-vector-tile":{"source":"iana","extensions":["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.conftoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.license+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.mdcf":{"source":"iana"},"application/vnd.mason+json":{"source":"iana","compressible":true},"application/vnd.maxar.archive.3tz+zip":{"source":"iana","compressible":false},"application/vnd.maxmind.maxmind-db":{"source":"iana"},"application/vnd.mcd":{"source":"iana","extensions":["mcd"]},"application/vnd.medcalcdata":{"source":"iana","extensions":["mc1"]},"application/vnd.mediastation.cdkey":{"source":"iana","extensions":["cdkey"]},"application/vnd.meridian-slingshot":{"source":"iana"},"application/vnd.mfer":{"source":"iana","extensions":["mwf"]},"application/vnd.mfmp":{"source":"iana","extensions":["mfm"]},"application/vnd.micro+json":{"source":"iana","compressible":true},"application/vnd.micrografx.flo":{"source":"iana","extensions":["flo"]},"application/vnd.micrografx.igx":{"source":"iana","extensions":["igx"]},"application/vnd.microsoft.portable-executable":{"source":"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{"source":"iana"},"application/vnd.miele+json":{"source":"iana","compressible":true},"application/vnd.mif":{"source":"iana","extensions":["mif"]},"application/vnd.minisoft-hp3000-save":{"source":"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{"source":"iana"},"application/vnd.mobius.daf":{"source":"iana","extensions":["daf"]},"application/vnd.mobius.dis":{"source":"iana","extensions":["dis"]},"application/vnd.mobius.mbk":{"source":"iana","extensions":["mbk"]},"application/vnd.mobius.mqy":{"source":"iana","extensions":["mqy"]},"application/vnd.mobius.msl":{"source":"iana","extensions":["msl"]},"application/vnd.mobius.plc":{"source":"iana","extensions":["plc"]},"application/vnd.mobius.txf":{"source":"iana","extensions":["txf"]},"application/vnd.mophun.application":{"source":"iana","extensions":["mpn"]},"application/vnd.mophun.certificate":{"source":"iana","extensions":["mpc"]},"application/vnd.motorola.flexsuite":{"source":"iana"},"application/vnd.motorola.flexsuite.adsi":{"source":"iana"},"application/vnd.motorola.flexsuite.fis":{"source":"iana"},"application/vnd.motorola.flexsuite.gotap":{"source":"iana"},"application/vnd.motorola.flexsuite.kmr":{"source":"iana"},"application/vnd.motorola.flexsuite.ttc":{"source":"iana"},"application/vnd.motorola.flexsuite.wem":{"source":"iana"},"application/vnd.motorola.iprm":{"source":"iana"},"application/vnd.mozilla.xul+xml":{"source":"iana","compressible":true,"extensions":["xul"]},"application/vnd.ms-3mfdocument":{"source":"iana"},"application/vnd.ms-artgalry":{"source":"iana","extensions":["cil"]},"application/vnd.ms-asf":{"source":"iana"},"application/vnd.ms-cab-compressed":{"source":"iana","extensions":["cab"]},"application/vnd.ms-color.iccprofile":{"source":"apache"},"application/vnd.ms-excel":{"source":"iana","compressible":false,"extensions":["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{"source":"iana","extensions":["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{"source":"iana","extensions":["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{"source":"iana","extensions":["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{"source":"iana","extensions":["xltm"]},"application/vnd.ms-fontobject":{"source":"iana","compressible":true,"extensions":["eot"]},"application/vnd.ms-htmlhelp":{"source":"iana","extensions":["chm"]},"application/vnd.ms-ims":{"source":"iana","extensions":["ims"]},"application/vnd.ms-lrm":{"source":"iana","extensions":["lrm"]},"application/vnd.ms-office.activex+xml":{"source":"iana","compressible":true},"application/vnd.ms-officetheme":{"source":"iana","extensions":["thmx"]},"application/vnd.ms-opentype":{"source":"apache","compressible":true},"application/vnd.ms-outlook":{"compressible":false,"extensions":["msg"]},"application/vnd.ms-package.obfuscated-opentype":{"source":"apache"},"application/vnd.ms-pki.seccat":{"source":"apache","extensions":["cat"]},"application/vnd.ms-pki.stl":{"source":"apache","extensions":["stl"]},"application/vnd.ms-playready.initiator+xml":{"source":"iana","compressible":true},"application/vnd.ms-powerpoint":{"source":"iana","compressible":false,"extensions":["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{"source":"iana","extensions":["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{"source":"iana","extensions":["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{"source":"iana","extensions":["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{"source":"iana","extensions":["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{"source":"iana","extensions":["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{"source":"iana","compressible":true},"application/vnd.ms-printing.printticket+xml":{"source":"apache","compressible":true},"application/vnd.ms-printschematicket+xml":{"source":"iana","compressible":true},"application/vnd.ms-project":{"source":"iana","extensions":["mpp","mpt"]},"application/vnd.ms-tnef":{"source":"iana"},"application/vnd.ms-windows.devicepairing":{"source":"iana"},"application/vnd.ms-windows.nwprinting.oob":{"source":"iana"},"application/vnd.ms-windows.printerpairing":{"source":"iana"},"application/vnd.ms-windows.wsd.oob":{"source":"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.lic-resp":{"source":"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.meter-resp":{"source":"iana"},"application/vnd.ms-word.document.macroenabled.12":{"source":"iana","extensions":["docm"]},"application/vnd.ms-word.template.macroenabled.12":{"source":"iana","extensions":["dotm"]},"application/vnd.ms-works":{"source":"iana","extensions":["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{"source":"iana","extensions":["wpl"]},"application/vnd.ms-xpsdocument":{"source":"iana","compressible":false,"extensions":["xps"]},"application/vnd.msa-disk-image":{"source":"iana"},"application/vnd.mseq":{"source":"iana","extensions":["mseq"]},"application/vnd.msign":{"source":"iana"},"application/vnd.multiad.creator":{"source":"iana"},"application/vnd.multiad.creator.cif":{"source":"iana"},"application/vnd.music-niff":{"source":"iana"},"application/vnd.musician":{"source":"iana","extensions":["mus"]},"application/vnd.muvee.style":{"source":"iana","extensions":["msty"]},"application/vnd.mynfc":{"source":"iana","extensions":["taglet"]},"application/vnd.nacamar.ybrid+json":{"source":"iana","compressible":true},"application/vnd.ncd.control":{"source":"iana"},"application/vnd.ncd.reference":{"source":"iana"},"application/vnd.nearst.inv+json":{"source":"iana","compressible":true},"application/vnd.nebumind.line":{"source":"iana"},"application/vnd.nervana":{"source":"iana"},"application/vnd.netfpx":{"source":"iana"},"application/vnd.neurolanguage.nlu":{"source":"iana","extensions":["nlu"]},"application/vnd.nimn":{"source":"iana"},"application/vnd.nintendo.nitro.rom":{"source":"iana"},"application/vnd.nintendo.snes.rom":{"source":"iana"},"application/vnd.nitf":{"source":"iana","extensions":["ntf","nitf"]},"application/vnd.noblenet-directory":{"source":"iana","extensions":["nnd"]},"application/vnd.noblenet-sealer":{"source":"iana","extensions":["nns"]},"application/vnd.noblenet-web":{"source":"iana","extensions":["nnw"]},"application/vnd.nokia.catalogs":{"source":"iana"},"application/vnd.nokia.conml+wbxml":{"source":"iana"},"application/vnd.nokia.conml+xml":{"source":"iana","compressible":true},"application/vnd.nokia.iptv.config+xml":{"source":"iana","compressible":true},"application/vnd.nokia.isds-radio-presets":{"source":"iana"},"application/vnd.nokia.landmark+wbxml":{"source":"iana"},"application/vnd.nokia.landmark+xml":{"source":"iana","compressible":true},"application/vnd.nokia.landmarkcollection+xml":{"source":"iana","compressible":true},"application/vnd.nokia.n-gage.ac+xml":{"source":"iana","compressible":true,"extensions":["ac"]},"application/vnd.nokia.n-gage.data":{"source":"iana","extensions":["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{"source":"iana","extensions":["n-gage"]},"application/vnd.nokia.ncd":{"source":"iana"},"application/vnd.nokia.pcd+wbxml":{"source":"iana"},"application/vnd.nokia.pcd+xml":{"source":"iana","compressible":true},"application/vnd.nokia.radio-preset":{"source":"iana","extensions":["rpst"]},"application/vnd.nokia.radio-presets":{"source":"iana","extensions":["rpss"]},"application/vnd.novadigm.edm":{"source":"iana","extensions":["edm"]},"application/vnd.novadigm.edx":{"source":"iana","extensions":["edx"]},"application/vnd.novadigm.ext":{"source":"iana","extensions":["ext"]},"application/vnd.ntt-local.content-share":{"source":"iana"},"application/vnd.ntt-local.file-transfer":{"source":"iana"},"application/vnd.ntt-local.ogw_remote-access":{"source":"iana"},"application/vnd.ntt-local.sip-ta_remote":{"source":"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{"source":"iana"},"application/vnd.oasis.opendocument.chart":{"source":"iana","extensions":["odc"]},"application/vnd.oasis.opendocument.chart-template":{"source":"iana","extensions":["otc"]},"application/vnd.oasis.opendocument.database":{"source":"iana","extensions":["odb"]},"application/vnd.oasis.opendocument.formula":{"source":"iana","extensions":["odf"]},"application/vnd.oasis.opendocument.formula-template":{"source":"iana","extensions":["odft"]},"application/vnd.oasis.opendocument.graphics":{"source":"iana","compressible":false,"extensions":["odg"]},"application/vnd.oasis.opendocument.graphics-template":{"source":"iana","extensions":["otg"]},"application/vnd.oasis.opendocument.image":{"source":"iana","extensions":["odi"]},"application/vnd.oasis.opendocument.image-template":{"source":"iana","extensions":["oti"]},"application/vnd.oasis.opendocument.presentation":{"source":"iana","compressible":false,"extensions":["odp"]},"application/vnd.oasis.opendocument.presentation-template":{"source":"iana","extensions":["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{"source":"iana","compressible":false,"extensions":["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{"source":"iana","extensions":["ots"]},"application/vnd.oasis.opendocument.text":{"source":"iana","compressible":false,"extensions":["odt"]},"application/vnd.oasis.opendocument.text-master":{"source":"iana","extensions":["odm"]},"application/vnd.oasis.opendocument.text-template":{"source":"iana","extensions":["ott"]},"application/vnd.oasis.opendocument.text-web":{"source":"iana","extensions":["oth"]},"application/vnd.obn":{"source":"iana"},"application/vnd.ocf+cbor":{"source":"iana"},"application/vnd.oci.image.manifest.v1+json":{"source":"iana","compressible":true},"application/vnd.oftn.l10n+json":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessdownload+xml":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessstreaming+xml":{"source":"iana","compressible":true},"application/vnd.oipf.cspg-hexbinary":{"source":"iana"},"application/vnd.oipf.dae.svg+xml":{"source":"iana","compressible":true},"application/vnd.oipf.dae.xhtml+xml":{"source":"iana","compressible":true},"application/vnd.oipf.mippvcontrolmessage+xml":{"source":"iana","compressible":true},"application/vnd.oipf.pae.gem":{"source":"iana"},"application/vnd.oipf.spdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.oipf.spdlist+xml":{"source":"iana","compressible":true},"application/vnd.oipf.ueprofile+xml":{"source":"iana","compressible":true},"application/vnd.oipf.userprofile+xml":{"source":"iana","compressible":true},"application/vnd.olpc-sugar":{"source":"iana","extensions":["xo"]},"application/vnd.oma-scws-config":{"source":"iana"},"application/vnd.oma-scws-http-request":{"source":"iana"},"application/vnd.oma-scws-http-response":{"source":"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.drm-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.imd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.ltkm":{"source":"iana"},"application/vnd.oma.bcast.notification+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.provisioningtrigger":{"source":"iana"},"application/vnd.oma.bcast.sgboot":{"source":"iana"},"application/vnd.oma.bcast.sgdd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sgdu":{"source":"iana"},"application/vnd.oma.bcast.simple-symbol-container":{"source":"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sprov+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.stkm":{"source":"iana"},"application/vnd.oma.cab-address-book+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-feature-handler+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-pcc+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-subs-invite+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-user-prefs+xml":{"source":"iana","compressible":true},"application/vnd.oma.dcd":{"source":"iana"},"application/vnd.oma.dcdc":{"source":"iana"},"application/vnd.oma.dd2+xml":{"source":"iana","compressible":true,"extensions":["dd2"]},"application/vnd.oma.drm.risd+xml":{"source":"iana","compressible":true},"application/vnd.oma.group-usage-list+xml":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+cbor":{"source":"iana"},"application/vnd.oma.lwm2m+json":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+tlv":{"source":"iana"},"application/vnd.oma.pal+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.detailed-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.final-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.groups+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.invocation-descriptor+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.optimized-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.push":{"source":"iana"},"application/vnd.oma.scidm.messages+xml":{"source":"iana","compressible":true},"application/vnd.oma.xcap-directory+xml":{"source":"iana","compressible":true},"application/vnd.omads-email+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-file+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-folder+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omaloc-supl-init":{"source":"iana"},"application/vnd.onepager":{"source":"iana"},"application/vnd.onepagertamp":{"source":"iana"},"application/vnd.onepagertamx":{"source":"iana"},"application/vnd.onepagertat":{"source":"iana"},"application/vnd.onepagertatp":{"source":"iana"},"application/vnd.onepagertatx":{"source":"iana"},"application/vnd.openblox.game+xml":{"source":"iana","compressible":true,"extensions":["obgx"]},"application/vnd.openblox.game-binary":{"source":"iana"},"application/vnd.openeye.oeb":{"source":"iana"},"application/vnd.openofficeorg.extension":{"source":"apache","extensions":["oxt"]},"application/vnd.openstreetmap.data+xml":{"source":"iana","compressible":true,"extensions":["osm"]},"application/vnd.opentimestamps.ots":{"source":"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawing+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{"source":"iana","compressible":false,"extensions":["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slide":{"source":"iana","extensions":["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{"source":"iana","extensions":["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.template":{"source":"iana","extensions":["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"source":"iana","compressible":false,"extensions":["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{"source":"iana","extensions":["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.theme+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.vmldrawing":{"source":"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"source":"iana","compressible":false,"extensions":["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{"source":"iana","extensions":["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.core-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.relationships+xml":{"source":"iana","compressible":true},"application/vnd.oracle.resource+json":{"source":"iana","compressible":true},"application/vnd.orange.indata":{"source":"iana"},"application/vnd.osa.netdeploy":{"source":"iana"},"application/vnd.osgeo.mapguide.package":{"source":"iana","extensions":["mgp"]},"application/vnd.osgi.bundle":{"source":"iana"},"application/vnd.osgi.dp":{"source":"iana","extensions":["dp"]},"application/vnd.osgi.subsystem":{"source":"iana","extensions":["esa"]},"application/vnd.otps.ct-kip+xml":{"source":"iana","compressible":true},"application/vnd.oxli.countgraph":{"source":"iana"},"application/vnd.pagerduty+json":{"source":"iana","compressible":true},"application/vnd.palm":{"source":"iana","extensions":["pdb","pqa","oprc"]},"application/vnd.panoply":{"source":"iana"},"application/vnd.paos.xml":{"source":"iana"},"application/vnd.patentdive":{"source":"iana"},"application/vnd.patientecommsdoc":{"source":"iana"},"application/vnd.pawaafile":{"source":"iana","extensions":["paw"]},"application/vnd.pcos":{"source":"iana"},"application/vnd.pg.format":{"source":"iana","extensions":["str"]},"application/vnd.pg.osasli":{"source":"iana","extensions":["ei6"]},"application/vnd.piaccess.application-licence":{"source":"iana"},"application/vnd.picsel":{"source":"iana","extensions":["efif"]},"application/vnd.pmi.widget":{"source":"iana","extensions":["wg"]},"application/vnd.poc.group-advertisement+xml":{"source":"iana","compressible":true},"application/vnd.pocketlearn":{"source":"iana","extensions":["plf"]},"application/vnd.powerbuilder6":{"source":"iana","extensions":["pbd"]},"application/vnd.powerbuilder6-s":{"source":"iana"},"application/vnd.powerbuilder7":{"source":"iana"},"application/vnd.powerbuilder7-s":{"source":"iana"},"application/vnd.powerbuilder75":{"source":"iana"},"application/vnd.powerbuilder75-s":{"source":"iana"},"application/vnd.preminet":{"source":"iana"},"application/vnd.previewsystems.box":{"source":"iana","extensions":["box"]},"application/vnd.proteus.magazine":{"source":"iana","extensions":["mgz"]},"application/vnd.psfs":{"source":"iana"},"application/vnd.publishare-delta-tree":{"source":"iana","extensions":["qps"]},"application/vnd.pvi.ptid1":{"source":"iana","extensions":["ptid"]},"application/vnd.pwg-multiplexed":{"source":"iana"},"application/vnd.pwg-xhtml-print+xml":{"source":"iana","compressible":true},"application/vnd.qualcomm.brew-app-res":{"source":"iana"},"application/vnd.quarantainenet":{"source":"iana"},"application/vnd.quark.quarkxpress":{"source":"iana","extensions":["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{"source":"iana"},"application/vnd.radisys.moml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conn+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-stream+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-base+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-detect+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-group+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-speech+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-transform+xml":{"source":"iana","compressible":true},"application/vnd.rainstor.data":{"source":"iana"},"application/vnd.rapid":{"source":"iana"},"application/vnd.rar":{"source":"iana","extensions":["rar"]},"application/vnd.realvnc.bed":{"source":"iana","extensions":["bed"]},"application/vnd.recordare.musicxml":{"source":"iana","extensions":["mxl"]},"application/vnd.recordare.musicxml+xml":{"source":"iana","compressible":true,"extensions":["musicxml"]},"application/vnd.renlearn.rlprint":{"source":"iana"},"application/vnd.resilient.logic":{"source":"iana"},"application/vnd.restful+json":{"source":"iana","compressible":true},"application/vnd.rig.cryptonote":{"source":"iana","extensions":["cryptonote"]},"application/vnd.rim.cod":{"source":"apache","extensions":["cod"]},"application/vnd.rn-realmedia":{"source":"apache","extensions":["rm"]},"application/vnd.rn-realmedia-vbr":{"source":"apache","extensions":["rmvb"]},"application/vnd.route66.link66+xml":{"source":"iana","compressible":true,"extensions":["link66"]},"application/vnd.rs-274x":{"source":"iana"},"application/vnd.ruckus.download":{"source":"iana"},"application/vnd.s3sms":{"source":"iana"},"application/vnd.sailingtracker.track":{"source":"iana","extensions":["st"]},"application/vnd.sar":{"source":"iana"},"application/vnd.sbm.cid":{"source":"iana"},"application/vnd.sbm.mid2":{"source":"iana"},"application/vnd.scribus":{"source":"iana"},"application/vnd.sealed.3df":{"source":"iana"},"application/vnd.sealed.csf":{"source":"iana"},"application/vnd.sealed.doc":{"source":"iana"},"application/vnd.sealed.eml":{"source":"iana"},"application/vnd.sealed.mht":{"source":"iana"},"application/vnd.sealed.net":{"source":"iana"},"application/vnd.sealed.ppt":{"source":"iana"},"application/vnd.sealed.tiff":{"source":"iana"},"application/vnd.sealed.xls":{"source":"iana"},"application/vnd.sealedmedia.softseal.html":{"source":"iana"},"application/vnd.sealedmedia.softseal.pdf":{"source":"iana"},"application/vnd.seemail":{"source":"iana","extensions":["see"]},"application/vnd.seis+json":{"source":"iana","compressible":true},"application/vnd.sema":{"source":"iana","extensions":["sema"]},"application/vnd.semd":{"source":"iana","extensions":["semd"]},"application/vnd.semf":{"source":"iana","extensions":["semf"]},"application/vnd.shade-save-file":{"source":"iana"},"application/vnd.shana.informed.formdata":{"source":"iana","extensions":["ifm"]},"application/vnd.shana.informed.formtemplate":{"source":"iana","extensions":["itp"]},"application/vnd.shana.informed.interchange":{"source":"iana","extensions":["iif"]},"application/vnd.shana.informed.package":{"source":"iana","extensions":["ipk"]},"application/vnd.shootproof+json":{"source":"iana","compressible":true},"application/vnd.shopkick+json":{"source":"iana","compressible":true},"application/vnd.shp":{"source":"iana"},"application/vnd.shx":{"source":"iana"},"application/vnd.sigrok.session":{"source":"iana"},"application/vnd.simtech-mindmapper":{"source":"iana","extensions":["twd","twds"]},"application/vnd.siren+json":{"source":"iana","compressible":true},"application/vnd.smaf":{"source":"iana","extensions":["mmf"]},"application/vnd.smart.notebook":{"source":"iana"},"application/vnd.smart.teacher":{"source":"iana","extensions":["teacher"]},"application/vnd.snesdev-page-table":{"source":"iana"},"application/vnd.software602.filler.form+xml":{"source":"iana","compressible":true,"extensions":["fo"]},"application/vnd.software602.filler.form-xml-zip":{"source":"iana"},"application/vnd.solent.sdkm+xml":{"source":"iana","compressible":true,"extensions":["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{"source":"iana","extensions":["dxp"]},"application/vnd.spotfire.sfs":{"source":"iana","extensions":["sfs"]},"application/vnd.sqlite3":{"source":"iana"},"application/vnd.sss-cod":{"source":"iana"},"application/vnd.sss-dtf":{"source":"iana"},"application/vnd.sss-ntf":{"source":"iana"},"application/vnd.stardivision.calc":{"source":"apache","extensions":["sdc"]},"application/vnd.stardivision.draw":{"source":"apache","extensions":["sda"]},"application/vnd.stardivision.impress":{"source":"apache","extensions":["sdd"]},"application/vnd.stardivision.math":{"source":"apache","extensions":["smf"]},"application/vnd.stardivision.writer":{"source":"apache","extensions":["sdw","vor"]},"application/vnd.stardivision.writer-global":{"source":"apache","extensions":["sgl"]},"application/vnd.stepmania.package":{"source":"iana","extensions":["smzip"]},"application/vnd.stepmania.stepchart":{"source":"iana","extensions":["sm"]},"application/vnd.street-stream":{"source":"iana"},"application/vnd.sun.wadl+xml":{"source":"iana","compressible":true,"extensions":["wadl"]},"application/vnd.sun.xml.calc":{"source":"apache","extensions":["sxc"]},"application/vnd.sun.xml.calc.template":{"source":"apache","extensions":["stc"]},"application/vnd.sun.xml.draw":{"source":"apache","extensions":["sxd"]},"application/vnd.sun.xml.draw.template":{"source":"apache","extensions":["std"]},"application/vnd.sun.xml.impress":{"source":"apache","extensions":["sxi"]},"application/vnd.sun.xml.impress.template":{"source":"apache","extensions":["sti"]},"application/vnd.sun.xml.math":{"source":"apache","extensions":["sxm"]},"application/vnd.sun.xml.writer":{"source":"apache","extensions":["sxw"]},"application/vnd.sun.xml.writer.global":{"source":"apache","extensions":["sxg"]},"application/vnd.sun.xml.writer.template":{"source":"apache","extensions":["stw"]},"application/vnd.sus-calendar":{"source":"iana","extensions":["sus","susp"]},"application/vnd.svd":{"source":"iana","extensions":["svd"]},"application/vnd.swiftview-ics":{"source":"iana"},"application/vnd.sycle+xml":{"source":"iana","compressible":true},"application/vnd.syft+json":{"source":"iana","compressible":true},"application/vnd.symbian.install":{"source":"apache","extensions":["sis","sisx"]},"application/vnd.syncml+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xsm"]},"application/vnd.syncml.dm+wbxml":{"source":"iana","charset":"UTF-8","extensions":["bdm"]},"application/vnd.syncml.dm+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xdm"]},"application/vnd.syncml.dm.notification":{"source":"iana"},"application/vnd.syncml.dmddf+wbxml":{"source":"iana"},"application/vnd.syncml.dmddf+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{"source":"iana"},"application/vnd.syncml.dmtnds+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.syncml.ds.notification":{"source":"iana"},"application/vnd.tableschema+json":{"source":"iana","compressible":true},"application/vnd.tao.intent-module-archive":{"source":"iana","extensions":["tao"]},"application/vnd.tcpdump.pcap":{"source":"iana","extensions":["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{"source":"iana","compressible":true},"application/vnd.tmd.mediaflex.api+xml":{"source":"iana","compressible":true},"application/vnd.tml":{"source":"iana"},"application/vnd.tmobile-livetv":{"source":"iana","extensions":["tmo"]},"application/vnd.tri.onesource":{"source":"iana"},"application/vnd.trid.tpt":{"source":"iana","extensions":["tpt"]},"application/vnd.triscape.mxs":{"source":"iana","extensions":["mxs"]},"application/vnd.trueapp":{"source":"iana","extensions":["tra"]},"application/vnd.truedoc":{"source":"iana"},"application/vnd.ubisoft.webplayer":{"source":"iana"},"application/vnd.ufdl":{"source":"iana","extensions":["ufd","ufdl"]},"application/vnd.uiq.theme":{"source":"iana","extensions":["utz"]},"application/vnd.umajin":{"source":"iana","extensions":["umj"]},"application/vnd.unity":{"source":"iana","extensions":["unityweb"]},"application/vnd.uoml+xml":{"source":"iana","compressible":true,"extensions":["uoml"]},"application/vnd.uplanet.alert":{"source":"iana"},"application/vnd.uplanet.alert-wbxml":{"source":"iana"},"application/vnd.uplanet.bearer-choice":{"source":"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{"source":"iana"},"application/vnd.uplanet.cacheop":{"source":"iana"},"application/vnd.uplanet.cacheop-wbxml":{"source":"iana"},"application/vnd.uplanet.channel":{"source":"iana"},"application/vnd.uplanet.channel-wbxml":{"source":"iana"},"application/vnd.uplanet.list":{"source":"iana"},"application/vnd.uplanet.list-wbxml":{"source":"iana"},"application/vnd.uplanet.listcmd":{"source":"iana"},"application/vnd.uplanet.listcmd-wbxml":{"source":"iana"},"application/vnd.uplanet.signal":{"source":"iana"},"application/vnd.uri-map":{"source":"iana"},"application/vnd.valve.source.material":{"source":"iana"},"application/vnd.vcx":{"source":"iana","extensions":["vcx"]},"application/vnd.vd-study":{"source":"iana"},"application/vnd.vectorworks":{"source":"iana"},"application/vnd.vel+json":{"source":"iana","compressible":true},"application/vnd.verimatrix.vcas":{"source":"iana"},"application/vnd.veritone.aion+json":{"source":"iana","compressible":true},"application/vnd.veryant.thin":{"source":"iana"},"application/vnd.ves.encrypted":{"source":"iana"},"application/vnd.vidsoft.vidconference":{"source":"iana"},"application/vnd.visio":{"source":"iana","extensions":["vsd","vst","vss","vsw"]},"application/vnd.visionary":{"source":"iana","extensions":["vis"]},"application/vnd.vividence.scriptfile":{"source":"iana"},"application/vnd.vsf":{"source":"iana","extensions":["vsf"]},"application/vnd.wap.sic":{"source":"iana"},"application/vnd.wap.slc":{"source":"iana"},"application/vnd.wap.wbxml":{"source":"iana","charset":"UTF-8","extensions":["wbxml"]},"application/vnd.wap.wmlc":{"source":"iana","extensions":["wmlc"]},"application/vnd.wap.wmlscriptc":{"source":"iana","extensions":["wmlsc"]},"application/vnd.webturbo":{"source":"iana","extensions":["wtb"]},"application/vnd.wfa.dpp":{"source":"iana"},"application/vnd.wfa.p2p":{"source":"iana"},"application/vnd.wfa.wsc":{"source":"iana"},"application/vnd.windows.devicepairing":{"source":"iana"},"application/vnd.wmc":{"source":"iana"},"application/vnd.wmf.bootstrap":{"source":"iana"},"application/vnd.wolfram.mathematica":{"source":"iana"},"application/vnd.wolfram.mathematica.package":{"source":"iana"},"application/vnd.wolfram.player":{"source":"iana","extensions":["nbp"]},"application/vnd.wordperfect":{"source":"iana","extensions":["wpd"]},"application/vnd.wqd":{"source":"iana","extensions":["wqd"]},"application/vnd.wrq-hp3000-labelled":{"source":"iana"},"application/vnd.wt.stf":{"source":"iana","extensions":["stf"]},"application/vnd.wv.csp+wbxml":{"source":"iana"},"application/vnd.wv.csp+xml":{"source":"iana","compressible":true},"application/vnd.wv.ssp+xml":{"source":"iana","compressible":true},"application/vnd.xacml+json":{"source":"iana","compressible":true},"application/vnd.xara":{"source":"iana","extensions":["xar"]},"application/vnd.xfdl":{"source":"iana","extensions":["xfdl"]},"application/vnd.xfdl.webform":{"source":"iana"},"application/vnd.xmi+xml":{"source":"iana","compressible":true},"application/vnd.xmpie.cpkg":{"source":"iana"},"application/vnd.xmpie.dpkg":{"source":"iana"},"application/vnd.xmpie.plan":{"source":"iana"},"application/vnd.xmpie.ppkg":{"source":"iana"},"application/vnd.xmpie.xlim":{"source":"iana"},"application/vnd.yamaha.hv-dic":{"source":"iana","extensions":["hvd"]},"application/vnd.yamaha.hv-script":{"source":"iana","extensions":["hvs"]},"application/vnd.yamaha.hv-voice":{"source":"iana","extensions":["hvp"]},"application/vnd.yamaha.openscoreformat":{"source":"iana","extensions":["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{"source":"iana","compressible":true,"extensions":["osfpvg"]},"application/vnd.yamaha.remote-setup":{"source":"iana"},"application/vnd.yamaha.smaf-audio":{"source":"iana","extensions":["saf"]},"application/vnd.yamaha.smaf-phrase":{"source":"iana","extensions":["spf"]},"application/vnd.yamaha.through-ngn":{"source":"iana"},"application/vnd.yamaha.tunnel-udpencap":{"source":"iana"},"application/vnd.yaoweme":{"source":"iana"},"application/vnd.yellowriver-custom-menu":{"source":"iana","extensions":["cmp"]},"application/vnd.youtube.yt":{"source":"iana"},"application/vnd.zul":{"source":"iana","extensions":["zir","zirz"]},"application/vnd.zzazz.deck+xml":{"source":"iana","compressible":true,"extensions":["zaz"]},"application/voicexml+xml":{"source":"iana","compressible":true,"extensions":["vxml"]},"application/voucher-cms+json":{"source":"iana","compressible":true},"application/vq-rtcpxr":{"source":"iana"},"application/wasm":{"source":"iana","compressible":true,"extensions":["wasm"]},"application/watcherinfo+xml":{"source":"iana","compressible":true,"extensions":["wif"]},"application/webpush-options+json":{"source":"iana","compressible":true},"application/whoispp-query":{"source":"iana"},"application/whoispp-response":{"source":"iana"},"application/widget":{"source":"iana","extensions":["wgt"]},"application/winhlp":{"source":"apache","extensions":["hlp"]},"application/wita":{"source":"iana"},"application/wordperfect5.1":{"source":"iana"},"application/wsdl+xml":{"source":"iana","compressible":true,"extensions":["wsdl"]},"application/wspolicy+xml":{"source":"iana","compressible":true,"extensions":["wspolicy"]},"application/x-7z-compressed":{"source":"apache","compressible":false,"extensions":["7z"]},"application/x-abiword":{"source":"apache","extensions":["abw"]},"application/x-ace-compressed":{"source":"apache","extensions":["ace"]},"application/x-amf":{"source":"apache"},"application/x-apple-diskimage":{"source":"apache","extensions":["dmg"]},"application/x-arj":{"compressible":false,"extensions":["arj"]},"application/x-authorware-bin":{"source":"apache","extensions":["aab","x32","u32","vox"]},"application/x-authorware-map":{"source":"apache","extensions":["aam"]},"application/x-authorware-seg":{"source":"apache","extensions":["aas"]},"application/x-bcpio":{"source":"apache","extensions":["bcpio"]},"application/x-bdoc":{"compressible":false,"extensions":["bdoc"]},"application/x-bittorrent":{"source":"apache","extensions":["torrent"]},"application/x-blorb":{"source":"apache","extensions":["blb","blorb"]},"application/x-bzip":{"source":"apache","compressible":false,"extensions":["bz"]},"application/x-bzip2":{"source":"apache","compressible":false,"extensions":["bz2","boz"]},"application/x-cbr":{"source":"apache","extensions":["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{"source":"apache","extensions":["vcd"]},"application/x-cfs-compressed":{"source":"apache","extensions":["cfs"]},"application/x-chat":{"source":"apache","extensions":["chat"]},"application/x-chess-pgn":{"source":"apache","extensions":["pgn"]},"application/x-chrome-extension":{"extensions":["crx"]},"application/x-cocoa":{"source":"nginx","extensions":["cco"]},"application/x-compress":{"source":"apache"},"application/x-conference":{"source":"apache","extensions":["nsc"]},"application/x-cpio":{"source":"apache","extensions":["cpio"]},"application/x-csh":{"source":"apache","extensions":["csh"]},"application/x-deb":{"compressible":false},"application/x-debian-package":{"source":"apache","extensions":["deb","udeb"]},"application/x-dgc-compressed":{"source":"apache","extensions":["dgc"]},"application/x-director":{"source":"apache","extensions":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{"source":"apache","extensions":["wad"]},"application/x-dtbncx+xml":{"source":"apache","compressible":true,"extensions":["ncx"]},"application/x-dtbook+xml":{"source":"apache","compressible":true,"extensions":["dtb"]},"application/x-dtbresource+xml":{"source":"apache","compressible":true,"extensions":["res"]},"application/x-dvi":{"source":"apache","compressible":false,"extensions":["dvi"]},"application/x-envoy":{"source":"apache","extensions":["evy"]},"application/x-eva":{"source":"apache","extensions":["eva"]},"application/x-font-bdf":{"source":"apache","extensions":["bdf"]},"application/x-font-dos":{"source":"apache"},"application/x-font-framemaker":{"source":"apache"},"application/x-font-ghostscript":{"source":"apache","extensions":["gsf"]},"application/x-font-libgrx":{"source":"apache"},"application/x-font-linux-psf":{"source":"apache","extensions":["psf"]},"application/x-font-pcf":{"source":"apache","extensions":["pcf"]},"application/x-font-snf":{"source":"apache","extensions":["snf"]},"application/x-font-speedo":{"source":"apache"},"application/x-font-sunos-news":{"source":"apache"},"application/x-font-type1":{"source":"apache","extensions":["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{"source":"apache"},"application/x-freearc":{"source":"apache","extensions":["arc"]},"application/x-futuresplash":{"source":"apache","extensions":["spl"]},"application/x-gca-compressed":{"source":"apache","extensions":["gca"]},"application/x-glulx":{"source":"apache","extensions":["ulx"]},"application/x-gnumeric":{"source":"apache","extensions":["gnumeric"]},"application/x-gramps-xml":{"source":"apache","extensions":["gramps"]},"application/x-gtar":{"source":"apache","extensions":["gtar"]},"application/x-gzip":{"source":"apache"},"application/x-hdf":{"source":"apache","extensions":["hdf"]},"application/x-httpd-php":{"compressible":true,"extensions":["php"]},"application/x-install-instructions":{"source":"apache","extensions":["install"]},"application/x-iso9660-image":{"source":"apache","extensions":["iso"]},"application/x-iwork-keynote-sffkey":{"extensions":["key"]},"application/x-iwork-numbers-sffnumbers":{"extensions":["numbers"]},"application/x-iwork-pages-sffpages":{"extensions":["pages"]},"application/x-java-archive-diff":{"source":"nginx","extensions":["jardiff"]},"application/x-java-jnlp-file":{"source":"apache","compressible":false,"extensions":["jnlp"]},"application/x-javascript":{"compressible":true},"application/x-keepass2":{"extensions":["kdbx"]},"application/x-latex":{"source":"apache","compressible":false,"extensions":["latex"]},"application/x-lua-bytecode":{"extensions":["luac"]},"application/x-lzh-compressed":{"source":"apache","extensions":["lzh","lha"]},"application/x-makeself":{"source":"nginx","extensions":["run"]},"application/x-mie":{"source":"apache","extensions":["mie"]},"application/x-mobipocket-ebook":{"source":"apache","extensions":["prc","mobi"]},"application/x-mpegurl":{"compressible":false},"application/x-ms-application":{"source":"apache","extensions":["application"]},"application/x-ms-shortcut":{"source":"apache","extensions":["lnk"]},"application/x-ms-wmd":{"source":"apache","extensions":["wmd"]},"application/x-ms-wmz":{"source":"apache","extensions":["wmz"]},"application/x-ms-xbap":{"source":"apache","extensions":["xbap"]},"application/x-msaccess":{"source":"apache","extensions":["mdb"]},"application/x-msbinder":{"source":"apache","extensions":["obd"]},"application/x-mscardfile":{"source":"apache","extensions":["crd"]},"application/x-msclip":{"source":"apache","extensions":["clp"]},"application/x-msdos-program":{"extensions":["exe"]},"application/x-msdownload":{"source":"apache","extensions":["exe","dll","com","bat","msi"]},"application/x-msmediaview":{"source":"apache","extensions":["mvb","m13","m14"]},"application/x-msmetafile":{"source":"apache","extensions":["wmf","wmz","emf","emz"]},"application/x-msmoney":{"source":"apache","extensions":["mny"]},"application/x-mspublisher":{"source":"apache","extensions":["pub"]},"application/x-msschedule":{"source":"apache","extensions":["scd"]},"application/x-msterminal":{"source":"apache","extensions":["trm"]},"application/x-mswrite":{"source":"apache","extensions":["wri"]},"application/x-netcdf":{"source":"apache","extensions":["nc","cdf"]},"application/x-ns-proxy-autoconfig":{"compressible":true,"extensions":["pac"]},"application/x-nzb":{"source":"apache","extensions":["nzb"]},"application/x-perl":{"source":"nginx","extensions":["pl","pm"]},"application/x-pilot":{"source":"nginx","extensions":["prc","pdb"]},"application/x-pkcs12":{"source":"apache","compressible":false,"extensions":["p12","pfx"]},"application/x-pkcs7-certificates":{"source":"apache","extensions":["p7b","spc"]},"application/x-pkcs7-certreqresp":{"source":"apache","extensions":["p7r"]},"application/x-pki-message":{"source":"iana"},"application/x-rar-compressed":{"source":"apache","compressible":false,"extensions":["rar"]},"application/x-redhat-package-manager":{"source":"nginx","extensions":["rpm"]},"application/x-research-info-systems":{"source":"apache","extensions":["ris"]},"application/x-sea":{"source":"nginx","extensions":["sea"]},"application/x-sh":{"source":"apache","compressible":true,"extensions":["sh"]},"application/x-shar":{"source":"apache","extensions":["shar"]},"application/x-shockwave-flash":{"source":"apache","compressible":false,"extensions":["swf"]},"application/x-silverlight-app":{"source":"apache","extensions":["xap"]},"application/x-sql":{"source":"apache","extensions":["sql"]},"application/x-stuffit":{"source":"apache","compressible":false,"extensions":["sit"]},"application/x-stuffitx":{"source":"apache","extensions":["sitx"]},"application/x-subrip":{"source":"apache","extensions":["srt"]},"application/x-sv4cpio":{"source":"apache","extensions":["sv4cpio"]},"application/x-sv4crc":{"source":"apache","extensions":["sv4crc"]},"application/x-t3vm-image":{"source":"apache","extensions":["t3"]},"application/x-tads":{"source":"apache","extensions":["gam"]},"application/x-tar":{"source":"apache","compressible":true,"extensions":["tar"]},"application/x-tcl":{"source":"apache","extensions":["tcl","tk"]},"application/x-tex":{"source":"apache","extensions":["tex"]},"application/x-tex-tfm":{"source":"apache","extensions":["tfm"]},"application/x-texinfo":{"source":"apache","extensions":["texinfo","texi"]},"application/x-tgif":{"source":"apache","extensions":["obj"]},"application/x-ustar":{"source":"apache","extensions":["ustar"]},"application/x-virtualbox-hdd":{"compressible":true,"extensions":["hdd"]},"application/x-virtualbox-ova":{"compressible":true,"extensions":["ova"]},"application/x-virtualbox-ovf":{"compressible":true,"extensions":["ovf"]},"application/x-virtualbox-vbox":{"compressible":true,"extensions":["vbox"]},"application/x-virtualbox-vbox-extpack":{"compressible":false,"extensions":["vbox-extpack"]},"application/x-virtualbox-vdi":{"compressible":true,"extensions":["vdi"]},"application/x-virtualbox-vhd":{"compressible":true,"extensions":["vhd"]},"application/x-virtualbox-vmdk":{"compressible":true,"extensions":["vmdk"]},"application/x-wais-source":{"source":"apache","extensions":["src"]},"application/x-web-app-manifest+json":{"compressible":true,"extensions":["webapp"]},"application/x-www-form-urlencoded":{"source":"iana","compressible":true},"application/x-x509-ca-cert":{"source":"iana","extensions":["der","crt","pem"]},"application/x-x509-ca-ra-cert":{"source":"iana"},"application/x-x509-next-ca-cert":{"source":"iana"},"application/x-xfig":{"source":"apache","extensions":["fig"]},"application/x-xliff+xml":{"source":"apache","compressible":true,"extensions":["xlf"]},"application/x-xpinstall":{"source":"apache","compressible":false,"extensions":["xpi"]},"application/x-xz":{"source":"apache","extensions":["xz"]},"application/x-zmachine":{"source":"apache","extensions":["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{"source":"iana"},"application/xacml+xml":{"source":"iana","compressible":true},"application/xaml+xml":{"source":"apache","compressible":true,"extensions":["xaml"]},"application/xcap-att+xml":{"source":"iana","compressible":true,"extensions":["xav"]},"application/xcap-caps+xml":{"source":"iana","compressible":true,"extensions":["xca"]},"application/xcap-diff+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/xcap-el+xml":{"source":"iana","compressible":true,"extensions":["xel"]},"application/xcap-error+xml":{"source":"iana","compressible":true},"application/xcap-ns+xml":{"source":"iana","compressible":true,"extensions":["xns"]},"application/xcon-conference-info+xml":{"source":"iana","compressible":true},"application/xcon-conference-info-diff+xml":{"source":"iana","compressible":true},"application/xenc+xml":{"source":"iana","compressible":true,"extensions":["xenc"]},"application/xhtml+xml":{"source":"iana","compressible":true,"extensions":["xhtml","xht"]},"application/xhtml-voice+xml":{"source":"apache","compressible":true},"application/xliff+xml":{"source":"iana","compressible":true,"extensions":["xlf"]},"application/xml":{"source":"iana","compressible":true,"extensions":["xml","xsl","xsd","rng"]},"application/xml-dtd":{"source":"iana","compressible":true,"extensions":["dtd"]},"application/xml-external-parsed-entity":{"source":"iana"},"application/xml-patch+xml":{"source":"iana","compressible":true},"application/xmpp+xml":{"source":"iana","compressible":true},"application/xop+xml":{"source":"iana","compressible":true,"extensions":["xop"]},"application/xproc+xml":{"source":"apache","compressible":true,"extensions":["xpl"]},"application/xslt+xml":{"source":"iana","compressible":true,"extensions":["xsl","xslt"]},"application/xspf+xml":{"source":"apache","compressible":true,"extensions":["xspf"]},"application/xv+xml":{"source":"iana","compressible":true,"extensions":["mxml","xhvml","xvml","xvm"]},"application/yang":{"source":"iana","extensions":["yang"]},"application/yang-data+json":{"source":"iana","compressible":true},"application/yang-data+xml":{"source":"iana","compressible":true},"application/yang-patch+json":{"source":"iana","compressible":true},"application/yang-patch+xml":{"source":"iana","compressible":true},"application/yin+xml":{"source":"iana","compressible":true,"extensions":["yin"]},"application/zip":{"source":"iana","compressible":false,"extensions":["zip"]},"application/zlib":{"source":"iana"},"application/zstd":{"source":"iana"},"audio/1d-interleaved-parityfec":{"source":"iana"},"audio/32kadpcm":{"source":"iana"},"audio/3gpp":{"source":"iana","compressible":false,"extensions":["3gpp"]},"audio/3gpp2":{"source":"iana"},"audio/aac":{"source":"iana"},"audio/ac3":{"source":"iana"},"audio/adpcm":{"source":"apache","extensions":["adp"]},"audio/amr":{"source":"iana","extensions":["amr"]},"audio/amr-wb":{"source":"iana"},"audio/amr-wb+":{"source":"iana"},"audio/aptx":{"source":"iana"},"audio/asc":{"source":"iana"},"audio/atrac-advanced-lossless":{"source":"iana"},"audio/atrac-x":{"source":"iana"},"audio/atrac3":{"source":"iana"},"audio/basic":{"source":"iana","compressible":false,"extensions":["au","snd"]},"audio/bv16":{"source":"iana"},"audio/bv32":{"source":"iana"},"audio/clearmode":{"source":"iana"},"audio/cn":{"source":"iana"},"audio/dat12":{"source":"iana"},"audio/dls":{"source":"iana"},"audio/dsr-es201108":{"source":"iana"},"audio/dsr-es202050":{"source":"iana"},"audio/dsr-es202211":{"source":"iana"},"audio/dsr-es202212":{"source":"iana"},"audio/dv":{"source":"iana"},"audio/dvi4":{"source":"iana"},"audio/eac3":{"source":"iana"},"audio/encaprtp":{"source":"iana"},"audio/evrc":{"source":"iana"},"audio/evrc-qcp":{"source":"iana"},"audio/evrc0":{"source":"iana"},"audio/evrc1":{"source":"iana"},"audio/evrcb":{"source":"iana"},"audio/evrcb0":{"source":"iana"},"audio/evrcb1":{"source":"iana"},"audio/evrcnw":{"source":"iana"},"audio/evrcnw0":{"source":"iana"},"audio/evrcnw1":{"source":"iana"},"audio/evrcwb":{"source":"iana"},"audio/evrcwb0":{"source":"iana"},"audio/evrcwb1":{"source":"iana"},"audio/evs":{"source":"iana"},"audio/flexfec":{"source":"iana"},"audio/fwdred":{"source":"iana"},"audio/g711-0":{"source":"iana"},"audio/g719":{"source":"iana"},"audio/g722":{"source":"iana"},"audio/g7221":{"source":"iana"},"audio/g723":{"source":"iana"},"audio/g726-16":{"source":"iana"},"audio/g726-24":{"source":"iana"},"audio/g726-32":{"source":"iana"},"audio/g726-40":{"source":"iana"},"audio/g728":{"source":"iana"},"audio/g729":{"source":"iana"},"audio/g7291":{"source":"iana"},"audio/g729d":{"source":"iana"},"audio/g729e":{"source":"iana"},"audio/gsm":{"source":"iana"},"audio/gsm-efr":{"source":"iana"},"audio/gsm-hr-08":{"source":"iana"},"audio/ilbc":{"source":"iana"},"audio/ip-mr_v2.5":{"source":"iana"},"audio/isac":{"source":"apache"},"audio/l16":{"source":"iana"},"audio/l20":{"source":"iana"},"audio/l24":{"source":"iana","compressible":false},"audio/l8":{"source":"iana"},"audio/lpc":{"source":"iana"},"audio/melp":{"source":"iana"},"audio/melp1200":{"source":"iana"},"audio/melp2400":{"source":"iana"},"audio/melp600":{"source":"iana"},"audio/mhas":{"source":"iana"},"audio/midi":{"source":"apache","extensions":["mid","midi","kar","rmi"]},"audio/mobile-xmf":{"source":"iana","extensions":["mxmf"]},"audio/mp3":{"compressible":false,"extensions":["mp3"]},"audio/mp4":{"source":"iana","compressible":false,"extensions":["m4a","mp4a"]},"audio/mp4a-latm":{"source":"iana"},"audio/mpa":{"source":"iana"},"audio/mpa-robust":{"source":"iana"},"audio/mpeg":{"source":"iana","compressible":false,"extensions":["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{"source":"iana"},"audio/musepack":{"source":"apache"},"audio/ogg":{"source":"iana","compressible":false,"extensions":["oga","ogg","spx","opus"]},"audio/opus":{"source":"iana"},"audio/parityfec":{"source":"iana"},"audio/pcma":{"source":"iana"},"audio/pcma-wb":{"source":"iana"},"audio/pcmu":{"source":"iana"},"audio/pcmu-wb":{"source":"iana"},"audio/prs.sid":{"source":"iana"},"audio/qcelp":{"source":"iana"},"audio/raptorfec":{"source":"iana"},"audio/red":{"source":"iana"},"audio/rtp-enc-aescm128":{"source":"iana"},"audio/rtp-midi":{"source":"iana"},"audio/rtploopback":{"source":"iana"},"audio/rtx":{"source":"iana"},"audio/s3m":{"source":"apache","extensions":["s3m"]},"audio/scip":{"source":"iana"},"audio/silk":{"source":"apache","extensions":["sil"]},"audio/smv":{"source":"iana"},"audio/smv-qcp":{"source":"iana"},"audio/smv0":{"source":"iana"},"audio/sofa":{"source":"iana"},"audio/sp-midi":{"source":"iana"},"audio/speex":{"source":"iana"},"audio/t140c":{"source":"iana"},"audio/t38":{"source":"iana"},"audio/telephone-event":{"source":"iana"},"audio/tetra_acelp":{"source":"iana"},"audio/tetra_acelp_bb":{"source":"iana"},"audio/tone":{"source":"iana"},"audio/tsvcis":{"source":"iana"},"audio/uemclip":{"source":"iana"},"audio/ulpfec":{"source":"iana"},"audio/usac":{"source":"iana"},"audio/vdvi":{"source":"iana"},"audio/vmr-wb":{"source":"iana"},"audio/vnd.3gpp.iufp":{"source":"iana"},"audio/vnd.4sb":{"source":"iana"},"audio/vnd.audiokoz":{"source":"iana"},"audio/vnd.celp":{"source":"iana"},"audio/vnd.cisco.nse":{"source":"iana"},"audio/vnd.cmles.radio-events":{"source":"iana"},"audio/vnd.cns.anp1":{"source":"iana"},"audio/vnd.cns.inf1":{"source":"iana"},"audio/vnd.dece.audio":{"source":"iana","extensions":["uva","uvva"]},"audio/vnd.digital-winds":{"source":"iana","extensions":["eol"]},"audio/vnd.dlna.adts":{"source":"iana"},"audio/vnd.dolby.heaac.1":{"source":"iana"},"audio/vnd.dolby.heaac.2":{"source":"iana"},"audio/vnd.dolby.mlp":{"source":"iana"},"audio/vnd.dolby.mps":{"source":"iana"},"audio/vnd.dolby.pl2":{"source":"iana"},"audio/vnd.dolby.pl2x":{"source":"iana"},"audio/vnd.dolby.pl2z":{"source":"iana"},"audio/vnd.dolby.pulse.1":{"source":"iana"},"audio/vnd.dra":{"source":"iana","extensions":["dra"]},"audio/vnd.dts":{"source":"iana","extensions":["dts"]},"audio/vnd.dts.hd":{"source":"iana","extensions":["dtshd"]},"audio/vnd.dts.uhd":{"source":"iana"},"audio/vnd.dvb.file":{"source":"iana"},"audio/vnd.everad.plj":{"source":"iana"},"audio/vnd.hns.audio":{"source":"iana"},"audio/vnd.lucent.voice":{"source":"iana","extensions":["lvp"]},"audio/vnd.ms-playready.media.pya":{"source":"iana","extensions":["pya"]},"audio/vnd.nokia.mobile-xmf":{"source":"iana"},"audio/vnd.nortel.vbk":{"source":"iana"},"audio/vnd.nuera.ecelp4800":{"source":"iana","extensions":["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{"source":"iana","extensions":["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{"source":"iana","extensions":["ecelp9600"]},"audio/vnd.octel.sbc":{"source":"iana"},"audio/vnd.presonus.multitrack":{"source":"iana"},"audio/vnd.qcelp":{"source":"iana"},"audio/vnd.rhetorex.32kadpcm":{"source":"iana"},"audio/vnd.rip":{"source":"iana","extensions":["rip"]},"audio/vnd.rn-realaudio":{"compressible":false},"audio/vnd.sealedmedia.softseal.mpeg":{"source":"iana"},"audio/vnd.vmx.cvsd":{"source":"iana"},"audio/vnd.wave":{"compressible":false},"audio/vorbis":{"source":"iana","compressible":false},"audio/vorbis-config":{"source":"iana"},"audio/wav":{"compressible":false,"extensions":["wav"]},"audio/wave":{"compressible":false,"extensions":["wav"]},"audio/webm":{"source":"apache","compressible":false,"extensions":["weba"]},"audio/x-aac":{"source":"apache","compressible":false,"extensions":["aac"]},"audio/x-aiff":{"source":"apache","extensions":["aif","aiff","aifc"]},"audio/x-caf":{"source":"apache","compressible":false,"extensions":["caf"]},"audio/x-flac":{"source":"apache","extensions":["flac"]},"audio/x-m4a":{"source":"nginx","extensions":["m4a"]},"audio/x-matroska":{"source":"apache","extensions":["mka"]},"audio/x-mpegurl":{"source":"apache","extensions":["m3u"]},"audio/x-ms-wax":{"source":"apache","extensions":["wax"]},"audio/x-ms-wma":{"source":"apache","extensions":["wma"]},"audio/x-pn-realaudio":{"source":"apache","extensions":["ram","ra"]},"audio/x-pn-realaudio-plugin":{"source":"apache","extensions":["rmp"]},"audio/x-realaudio":{"source":"nginx","extensions":["ra"]},"audio/x-tta":{"source":"apache"},"audio/x-wav":{"source":"apache","extensions":["wav"]},"audio/xm":{"source":"apache","extensions":["xm"]},"chemical/x-cdx":{"source":"apache","extensions":["cdx"]},"chemical/x-cif":{"source":"apache","extensions":["cif"]},"chemical/x-cmdf":{"source":"apache","extensions":["cmdf"]},"chemical/x-cml":{"source":"apache","extensions":["cml"]},"chemical/x-csml":{"source":"apache","extensions":["csml"]},"chemical/x-pdb":{"source":"apache"},"chemical/x-xyz":{"source":"apache","extensions":["xyz"]},"font/collection":{"source":"iana","extensions":["ttc"]},"font/otf":{"source":"iana","compressible":true,"extensions":["otf"]},"font/sfnt":{"source":"iana"},"font/ttf":{"source":"iana","compressible":true,"extensions":["ttf"]},"font/woff":{"source":"iana","extensions":["woff"]},"font/woff2":{"source":"iana","extensions":["woff2"]},"image/aces":{"source":"iana","extensions":["exr"]},"image/apng":{"compressible":false,"extensions":["apng"]},"image/avci":{"source":"iana","extensions":["avci"]},"image/avcs":{"source":"iana","extensions":["avcs"]},"image/avif":{"source":"iana","compressible":false,"extensions":["avif"]},"image/bmp":{"source":"iana","compressible":true,"extensions":["bmp"]},"image/cgm":{"source":"iana","extensions":["cgm"]},"image/dicom-rle":{"source":"iana","extensions":["drle"]},"image/emf":{"source":"iana","extensions":["emf"]},"image/fits":{"source":"iana","extensions":["fits"]},"image/g3fax":{"source":"iana","extensions":["g3"]},"image/gif":{"source":"iana","compressible":false,"extensions":["gif"]},"image/heic":{"source":"iana","extensions":["heic"]},"image/heic-sequence":{"source":"iana","extensions":["heics"]},"image/heif":{"source":"iana","extensions":["heif"]},"image/heif-sequence":{"source":"iana","extensions":["heifs"]},"image/hej2k":{"source":"iana","extensions":["hej2"]},"image/hsj2":{"source":"iana","extensions":["hsj2"]},"image/ief":{"source":"iana","extensions":["ief"]},"image/jls":{"source":"iana","extensions":["jls"]},"image/jp2":{"source":"iana","compressible":false,"extensions":["jp2","jpg2"]},"image/jpeg":{"source":"iana","compressible":false,"extensions":["jpeg","jpg","jpe"]},"image/jph":{"source":"iana","extensions":["jph"]},"image/jphc":{"source":"iana","extensions":["jhc"]},"image/jpm":{"source":"iana","compressible":false,"extensions":["jpm"]},"image/jpx":{"source":"iana","compressible":false,"extensions":["jpx","jpf"]},"image/jxr":{"source":"iana","extensions":["jxr"]},"image/jxra":{"source":"iana","extensions":["jxra"]},"image/jxrs":{"source":"iana","extensions":["jxrs"]},"image/jxs":{"source":"iana","extensions":["jxs"]},"image/jxsc":{"source":"iana","extensions":["jxsc"]},"image/jxsi":{"source":"iana","extensions":["jxsi"]},"image/jxss":{"source":"iana","extensions":["jxss"]},"image/ktx":{"source":"iana","extensions":["ktx"]},"image/ktx2":{"source":"iana","extensions":["ktx2"]},"image/naplps":{"source":"iana"},"image/pjpeg":{"compressible":false},"image/png":{"source":"iana","compressible":false,"extensions":["png"]},"image/prs.btif":{"source":"iana","extensions":["btif"]},"image/prs.pti":{"source":"iana","extensions":["pti"]},"image/pwg-raster":{"source":"iana"},"image/sgi":{"source":"apache","extensions":["sgi"]},"image/svg+xml":{"source":"iana","compressible":true,"extensions":["svg","svgz"]},"image/t38":{"source":"iana","extensions":["t38"]},"image/tiff":{"source":"iana","compressible":false,"extensions":["tif","tiff"]},"image/tiff-fx":{"source":"iana","extensions":["tfx"]},"image/vnd.adobe.photoshop":{"source":"iana","compressible":true,"extensions":["psd"]},"image/vnd.airzip.accelerator.azv":{"source":"iana","extensions":["azv"]},"image/vnd.cns.inf2":{"source":"iana"},"image/vnd.dece.graphic":{"source":"iana","extensions":["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{"source":"iana","extensions":["djvu","djv"]},"image/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"image/vnd.dwg":{"source":"iana","extensions":["dwg"]},"image/vnd.dxf":{"source":"iana","extensions":["dxf"]},"image/vnd.fastbidsheet":{"source":"iana","extensions":["fbs"]},"image/vnd.fpx":{"source":"iana","extensions":["fpx"]},"image/vnd.fst":{"source":"iana","extensions":["fst"]},"image/vnd.fujixerox.edmics-mmr":{"source":"iana","extensions":["mmr"]},"image/vnd.fujixerox.edmics-rlc":{"source":"iana","extensions":["rlc"]},"image/vnd.globalgraphics.pgb":{"source":"iana"},"image/vnd.microsoft.icon":{"source":"iana","compressible":true,"extensions":["ico"]},"image/vnd.mix":{"source":"iana"},"image/vnd.mozilla.apng":{"source":"iana"},"image/vnd.ms-dds":{"compressible":true,"extensions":["dds"]},"image/vnd.ms-modi":{"source":"iana","extensions":["mdi"]},"image/vnd.ms-photo":{"source":"apache","extensions":["wdp"]},"image/vnd.net-fpx":{"source":"iana","extensions":["npx"]},"image/vnd.pco.b16":{"source":"iana","extensions":["b16"]},"image/vnd.radiance":{"source":"iana"},"image/vnd.sealed.png":{"source":"iana"},"image/vnd.sealedmedia.softseal.gif":{"source":"iana"},"image/vnd.sealedmedia.softseal.jpg":{"source":"iana"},"image/vnd.svf":{"source":"iana"},"image/vnd.tencent.tap":{"source":"iana","extensions":["tap"]},"image/vnd.valve.source.texture":{"source":"iana","extensions":["vtf"]},"image/vnd.wap.wbmp":{"source":"iana","extensions":["wbmp"]},"image/vnd.xiff":{"source":"iana","extensions":["xif"]},"image/vnd.zbrush.pcx":{"source":"iana","extensions":["pcx"]},"image/webp":{"source":"apache","extensions":["webp"]},"image/wmf":{"source":"iana","extensions":["wmf"]},"image/x-3ds":{"source":"apache","extensions":["3ds"]},"image/x-cmu-raster":{"source":"apache","extensions":["ras"]},"image/x-cmx":{"source":"apache","extensions":["cmx"]},"image/x-freehand":{"source":"apache","extensions":["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{"source":"apache","compressible":true,"extensions":["ico"]},"image/x-jng":{"source":"nginx","extensions":["jng"]},"image/x-mrsid-image":{"source":"apache","extensions":["sid"]},"image/x-ms-bmp":{"source":"nginx","compressible":true,"extensions":["bmp"]},"image/x-pcx":{"source":"apache","extensions":["pcx"]},"image/x-pict":{"source":"apache","extensions":["pic","pct"]},"image/x-portable-anymap":{"source":"apache","extensions":["pnm"]},"image/x-portable-bitmap":{"source":"apache","extensions":["pbm"]},"image/x-portable-graymap":{"source":"apache","extensions":["pgm"]},"image/x-portable-pixmap":{"source":"apache","extensions":["ppm"]},"image/x-rgb":{"source":"apache","extensions":["rgb"]},"image/x-tga":{"source":"apache","extensions":["tga"]},"image/x-xbitmap":{"source":"apache","extensions":["xbm"]},"image/x-xcf":{"compressible":false},"image/x-xpixmap":{"source":"apache","extensions":["xpm"]},"image/x-xwindowdump":{"source":"apache","extensions":["xwd"]},"message/cpim":{"source":"iana"},"message/delivery-status":{"source":"iana"},"message/disposition-notification":{"source":"iana","extensions":["disposition-notification"]},"message/external-body":{"source":"iana"},"message/feedback-report":{"source":"iana"},"message/global":{"source":"iana","extensions":["u8msg"]},"message/global-delivery-status":{"source":"iana","extensions":["u8dsn"]},"message/global-disposition-notification":{"source":"iana","extensions":["u8mdn"]},"message/global-headers":{"source":"iana","extensions":["u8hdr"]},"message/http":{"source":"iana","compressible":false},"message/imdn+xml":{"source":"iana","compressible":true},"message/news":{"source":"iana"},"message/partial":{"source":"iana","compressible":false},"message/rfc822":{"source":"iana","compressible":true,"extensions":["eml","mime"]},"message/s-http":{"source":"iana"},"message/sip":{"source":"iana"},"message/sipfrag":{"source":"iana"},"message/tracking-status":{"source":"iana"},"message/vnd.si.simp":{"source":"iana"},"message/vnd.wfa.wsc":{"source":"iana","extensions":["wsc"]},"model/3mf":{"source":"iana","extensions":["3mf"]},"model/e57":{"source":"iana"},"model/gltf+json":{"source":"iana","compressible":true,"extensions":["gltf"]},"model/gltf-binary":{"source":"iana","compressible":true,"extensions":["glb"]},"model/iges":{"source":"iana","compressible":false,"extensions":["igs","iges"]},"model/mesh":{"source":"iana","compressible":false,"extensions":["msh","mesh","silo"]},"model/mtl":{"source":"iana","extensions":["mtl"]},"model/obj":{"source":"iana","extensions":["obj"]},"model/step":{"source":"iana"},"model/step+xml":{"source":"iana","compressible":true,"extensions":["stpx"]},"model/step+zip":{"source":"iana","compressible":false,"extensions":["stpz"]},"model/step-xml+zip":{"source":"iana","compressible":false,"extensions":["stpxz"]},"model/stl":{"source":"iana","extensions":["stl"]},"model/vnd.collada+xml":{"source":"iana","compressible":true,"extensions":["dae"]},"model/vnd.dwf":{"source":"iana","extensions":["dwf"]},"model/vnd.flatland.3dml":{"source":"iana"},"model/vnd.gdl":{"source":"iana","extensions":["gdl"]},"model/vnd.gs-gdl":{"source":"apache"},"model/vnd.gs.gdl":{"source":"iana"},"model/vnd.gtw":{"source":"iana","extensions":["gtw"]},"model/vnd.moml+xml":{"source":"iana","compressible":true},"model/vnd.mts":{"source":"iana","extensions":["mts"]},"model/vnd.opengex":{"source":"iana","extensions":["ogex"]},"model/vnd.parasolid.transmit.binary":{"source":"iana","extensions":["x_b"]},"model/vnd.parasolid.transmit.text":{"source":"iana","extensions":["x_t"]},"model/vnd.pytha.pyox":{"source":"iana"},"model/vnd.rosette.annotated-data-model":{"source":"iana"},"model/vnd.sap.vds":{"source":"iana","extensions":["vds"]},"model/vnd.usdz+zip":{"source":"iana","compressible":false,"extensions":["usdz"]},"model/vnd.valve.source.compiled-map":{"source":"iana","extensions":["bsp"]},"model/vnd.vtu":{"source":"iana","extensions":["vtu"]},"model/vrml":{"source":"iana","compressible":false,"extensions":["wrl","vrml"]},"model/x3d+binary":{"source":"apache","compressible":false,"extensions":["x3db","x3dbz"]},"model/x3d+fastinfoset":{"source":"iana","extensions":["x3db"]},"model/x3d+vrml":{"source":"apache","compressible":false,"extensions":["x3dv","x3dvz"]},"model/x3d+xml":{"source":"iana","compressible":true,"extensions":["x3d","x3dz"]},"model/x3d-vrml":{"source":"iana","extensions":["x3dv"]},"multipart/alternative":{"source":"iana","compressible":false},"multipart/appledouble":{"source":"iana"},"multipart/byteranges":{"source":"iana"},"multipart/digest":{"source":"iana"},"multipart/encrypted":{"source":"iana","compressible":false},"multipart/form-data":{"source":"iana","compressible":false},"multipart/header-set":{"source":"iana"},"multipart/mixed":{"source":"iana"},"multipart/multilingual":{"source":"iana"},"multipart/parallel":{"source":"iana"},"multipart/related":{"source":"iana","compressible":false},"multipart/report":{"source":"iana"},"multipart/signed":{"source":"iana","compressible":false},"multipart/vnd.bint.med-plus":{"source":"iana"},"multipart/voice-message":{"source":"iana"},"multipart/x-mixed-replace":{"source":"iana"},"text/1d-interleaved-parityfec":{"source":"iana"},"text/cache-manifest":{"source":"iana","compressible":true,"extensions":["appcache","manifest"]},"text/calendar":{"source":"iana","extensions":["ics","ifb"]},"text/calender":{"compressible":true},"text/cmd":{"compressible":true},"text/coffeescript":{"extensions":["coffee","litcoffee"]},"text/cql":{"source":"iana"},"text/cql-expression":{"source":"iana"},"text/cql-identifier":{"source":"iana"},"text/css":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["css"]},"text/csv":{"source":"iana","compressible":true,"extensions":["csv"]},"text/csv-schema":{"source":"iana"},"text/directory":{"source":"iana"},"text/dns":{"source":"iana"},"text/ecmascript":{"source":"iana"},"text/encaprtp":{"source":"iana"},"text/enriched":{"source":"iana"},"text/fhirpath":{"source":"iana"},"text/flexfec":{"source":"iana"},"text/fwdred":{"source":"iana"},"text/gff3":{"source":"iana"},"text/grammar-ref-list":{"source":"iana"},"text/html":{"source":"iana","compressible":true,"extensions":["html","htm","shtml"]},"text/jade":{"extensions":["jade"]},"text/javascript":{"source":"iana","compressible":true},"text/jcr-cnd":{"source":"iana"},"text/jsx":{"compressible":true,"extensions":["jsx"]},"text/less":{"compressible":true,"extensions":["less"]},"text/markdown":{"source":"iana","compressible":true,"extensions":["markdown","md"]},"text/mathml":{"source":"nginx","extensions":["mml"]},"text/mdx":{"compressible":true,"extensions":["mdx"]},"text/mizar":{"source":"iana"},"text/n3":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["n3"]},"text/parameters":{"source":"iana","charset":"UTF-8"},"text/parityfec":{"source":"iana"},"text/plain":{"source":"iana","compressible":true,"extensions":["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{"source":"iana","charset":"UTF-8"},"text/prs.fallenstein.rst":{"source":"iana"},"text/prs.lines.tag":{"source":"iana","extensions":["dsc"]},"text/prs.prop.logic":{"source":"iana"},"text/raptorfec":{"source":"iana"},"text/red":{"source":"iana"},"text/rfc822-headers":{"source":"iana"},"text/richtext":{"source":"iana","compressible":true,"extensions":["rtx"]},"text/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"text/rtp-enc-aescm128":{"source":"iana"},"text/rtploopback":{"source":"iana"},"text/rtx":{"source":"iana"},"text/sgml":{"source":"iana","extensions":["sgml","sgm"]},"text/shaclc":{"source":"iana"},"text/shex":{"source":"iana","extensions":["shex"]},"text/slim":{"extensions":["slim","slm"]},"text/spdx":{"source":"iana","extensions":["spdx"]},"text/strings":{"source":"iana"},"text/stylus":{"extensions":["stylus","styl"]},"text/t140":{"source":"iana"},"text/tab-separated-values":{"source":"iana","compressible":true,"extensions":["tsv"]},"text/troff":{"source":"iana","extensions":["t","tr","roff","man","me","ms"]},"text/turtle":{"source":"iana","charset":"UTF-8","extensions":["ttl"]},"text/ulpfec":{"source":"iana"},"text/uri-list":{"source":"iana","compressible":true,"extensions":["uri","uris","urls"]},"text/vcard":{"source":"iana","compressible":true,"extensions":["vcard"]},"text/vnd.a":{"source":"iana"},"text/vnd.abc":{"source":"iana"},"text/vnd.ascii-art":{"source":"iana"},"text/vnd.curl":{"source":"iana","extensions":["curl"]},"text/vnd.curl.dcurl":{"source":"apache","extensions":["dcurl"]},"text/vnd.curl.mcurl":{"source":"apache","extensions":["mcurl"]},"text/vnd.curl.scurl":{"source":"apache","extensions":["scurl"]},"text/vnd.debian.copyright":{"source":"iana","charset":"UTF-8"},"text/vnd.dmclientscript":{"source":"iana"},"text/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"text/vnd.esmertec.theme-descriptor":{"source":"iana","charset":"UTF-8"},"text/vnd.familysearch.gedcom":{"source":"iana","extensions":["ged"]},"text/vnd.ficlab.flt":{"source":"iana"},"text/vnd.fly":{"source":"iana","extensions":["fly"]},"text/vnd.fmi.flexstor":{"source":"iana","extensions":["flx"]},"text/vnd.gml":{"source":"iana"},"text/vnd.graphviz":{"source":"iana","extensions":["gv"]},"text/vnd.hans":{"source":"iana"},"text/vnd.hgl":{"source":"iana"},"text/vnd.in3d.3dml":{"source":"iana","extensions":["3dml"]},"text/vnd.in3d.spot":{"source":"iana","extensions":["spot"]},"text/vnd.iptc.newsml":{"source":"iana"},"text/vnd.iptc.nitf":{"source":"iana"},"text/vnd.latex-z":{"source":"iana"},"text/vnd.motorola.reflex":{"source":"iana"},"text/vnd.ms-mediapackage":{"source":"iana"},"text/vnd.net2phone.commcenter.command":{"source":"iana"},"text/vnd.radisys.msml-basic-layout":{"source":"iana"},"text/vnd.senx.warpscript":{"source":"iana"},"text/vnd.si.uricatalogue":{"source":"iana"},"text/vnd.sosi":{"source":"iana"},"text/vnd.sun.j2me.app-descriptor":{"source":"iana","charset":"UTF-8","extensions":["jad"]},"text/vnd.trolltech.linguist":{"source":"iana","charset":"UTF-8"},"text/vnd.wap.si":{"source":"iana"},"text/vnd.wap.sl":{"source":"iana"},"text/vnd.wap.wml":{"source":"iana","extensions":["wml"]},"text/vnd.wap.wmlscript":{"source":"iana","extensions":["wmls"]},"text/vtt":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["vtt"]},"text/x-asm":{"source":"apache","extensions":["s","asm"]},"text/x-c":{"source":"apache","extensions":["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{"source":"nginx","extensions":["htc"]},"text/x-fortran":{"source":"apache","extensions":["f","for","f77","f90"]},"text/x-gwt-rpc":{"compressible":true},"text/x-handlebars-template":{"extensions":["hbs"]},"text/x-java-source":{"source":"apache","extensions":["java"]},"text/x-jquery-tmpl":{"compressible":true},"text/x-lua":{"extensions":["lua"]},"text/x-markdown":{"compressible":true,"extensions":["mkd"]},"text/x-nfo":{"source":"apache","extensions":["nfo"]},"text/x-opml":{"source":"apache","extensions":["opml"]},"text/x-org":{"compressible":true,"extensions":["org"]},"text/x-pascal":{"source":"apache","extensions":["p","pas"]},"text/x-processing":{"compressible":true,"extensions":["pde"]},"text/x-sass":{"extensions":["sass"]},"text/x-scss":{"extensions":["scss"]},"text/x-setext":{"source":"apache","extensions":["etx"]},"text/x-sfv":{"source":"apache","extensions":["sfv"]},"text/x-suse-ymp":{"compressible":true,"extensions":["ymp"]},"text/x-uuencode":{"source":"apache","extensions":["uu"]},"text/x-vcalendar":{"source":"apache","extensions":["vcs"]},"text/x-vcard":{"source":"apache","extensions":["vcf"]},"text/xml":{"source":"iana","compressible":true,"extensions":["xml"]},"text/xml-external-parsed-entity":{"source":"iana"},"text/yaml":{"compressible":true,"extensions":["yaml","yml"]},"video/1d-interleaved-parityfec":{"source":"iana"},"video/3gpp":{"source":"iana","extensions":["3gp","3gpp"]},"video/3gpp-tt":{"source":"iana"},"video/3gpp2":{"source":"iana","extensions":["3g2"]},"video/av1":{"source":"iana"},"video/bmpeg":{"source":"iana"},"video/bt656":{"source":"iana"},"video/celb":{"source":"iana"},"video/dv":{"source":"iana"},"video/encaprtp":{"source":"iana"},"video/ffv1":{"source":"iana"},"video/flexfec":{"source":"iana"},"video/h261":{"source":"iana","extensions":["h261"]},"video/h263":{"source":"iana","extensions":["h263"]},"video/h263-1998":{"source":"iana"},"video/h263-2000":{"source":"iana"},"video/h264":{"source":"iana","extensions":["h264"]},"video/h264-rcdo":{"source":"iana"},"video/h264-svc":{"source":"iana"},"video/h265":{"source":"iana"},"video/iso.segment":{"source":"iana","extensions":["m4s"]},"video/jpeg":{"source":"iana","extensions":["jpgv"]},"video/jpeg2000":{"source":"iana"},"video/jpm":{"source":"apache","extensions":["jpm","jpgm"]},"video/jxsv":{"source":"iana"},"video/mj2":{"source":"iana","extensions":["mj2","mjp2"]},"video/mp1s":{"source":"iana"},"video/mp2p":{"source":"iana"},"video/mp2t":{"source":"iana","extensions":["ts"]},"video/mp4":{"source":"iana","compressible":false,"extensions":["mp4","mp4v","mpg4"]},"video/mp4v-es":{"source":"iana"},"video/mpeg":{"source":"iana","compressible":false,"extensions":["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{"source":"iana"},"video/mpv":{"source":"iana"},"video/nv":{"source":"iana"},"video/ogg":{"source":"iana","compressible":false,"extensions":["ogv"]},"video/parityfec":{"source":"iana"},"video/pointer":{"source":"iana"},"video/quicktime":{"source":"iana","compressible":false,"extensions":["qt","mov"]},"video/raptorfec":{"source":"iana"},"video/raw":{"source":"iana"},"video/rtp-enc-aescm128":{"source":"iana"},"video/rtploopback":{"source":"iana"},"video/rtx":{"source":"iana"},"video/scip":{"source":"iana"},"video/smpte291":{"source":"iana"},"video/smpte292m":{"source":"iana"},"video/ulpfec":{"source":"iana"},"video/vc1":{"source":"iana"},"video/vc2":{"source":"iana"},"video/vnd.cctv":{"source":"iana"},"video/vnd.dece.hd":{"source":"iana","extensions":["uvh","uvvh"]},"video/vnd.dece.mobile":{"source":"iana","extensions":["uvm","uvvm"]},"video/vnd.dece.mp4":{"source":"iana"},"video/vnd.dece.pd":{"source":"iana","extensions":["uvp","uvvp"]},"video/vnd.dece.sd":{"source":"iana","extensions":["uvs","uvvs"]},"video/vnd.dece.video":{"source":"iana","extensions":["uvv","uvvv"]},"video/vnd.directv.mpeg":{"source":"iana"},"video/vnd.directv.mpeg-tts":{"source":"iana"},"video/vnd.dlna.mpeg-tts":{"source":"iana"},"video/vnd.dvb.file":{"source":"iana","extensions":["dvb"]},"video/vnd.fvt":{"source":"iana","extensions":["fvt"]},"video/vnd.hns.video":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.ttsavc":{"source":"iana"},"video/vnd.iptvforum.ttsmpeg2":{"source":"iana"},"video/vnd.motorola.video":{"source":"iana"},"video/vnd.motorola.videop":{"source":"iana"},"video/vnd.mpegurl":{"source":"iana","extensions":["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{"source":"iana","extensions":["pyv"]},"video/vnd.nokia.interleaved-multimedia":{"source":"iana"},"video/vnd.nokia.mp4vr":{"source":"iana"},"video/vnd.nokia.videovoip":{"source":"iana"},"video/vnd.objectvideo":{"source":"iana"},"video/vnd.radgamettools.bink":{"source":"iana"},"video/vnd.radgamettools.smacker":{"source":"iana"},"video/vnd.sealed.mpeg1":{"source":"iana"},"video/vnd.sealed.mpeg4":{"source":"iana"},"video/vnd.sealed.swf":{"source":"iana"},"video/vnd.sealedmedia.softseal.mov":{"source":"iana"},"video/vnd.uvvu.mp4":{"source":"iana","extensions":["uvu","uvvu"]},"video/vnd.vivo":{"source":"iana","extensions":["viv"]},"video/vnd.youtube.yt":{"source":"iana"},"video/vp8":{"source":"iana"},"video/vp9":{"source":"iana"},"video/webm":{"source":"apache","compressible":false,"extensions":["webm"]},"video/x-f4v":{"source":"apache","extensions":["f4v"]},"video/x-fli":{"source":"apache","extensions":["fli"]},"video/x-flv":{"source":"apache","compressible":false,"extensions":["flv"]},"video/x-m4v":{"source":"apache","extensions":["m4v"]},"video/x-matroska":{"source":"apache","compressible":false,"extensions":["mkv","mk3d","mks"]},"video/x-mng":{"source":"apache","extensions":["mng"]},"video/x-ms-asf":{"source":"apache","extensions":["asf","asx"]},"video/x-ms-vob":{"source":"apache","extensions":["vob"]},"video/x-ms-wm":{"source":"apache","extensions":["wm"]},"video/x-ms-wmv":{"source":"apache","compressible":false,"extensions":["wmv"]},"video/x-ms-wmx":{"source":"apache","extensions":["wmx"]},"video/x-ms-wvx":{"source":"apache","extensions":["wvx"]},"video/x-msvideo":{"source":"apache","extensions":["avi"]},"video/x-sgi-movie":{"source":"apache","extensions":["movie"]},"video/x-smv":{"source":"apache","extensions":["smv"]},"x-conference/x-cooltalk":{"source":"apache","extensions":["ice"]},"x-shader/x-fragment":{"compressible":true},"x-shader/x-vertex":{"compressible":true}}')}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.amdO={},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n(7067)})();