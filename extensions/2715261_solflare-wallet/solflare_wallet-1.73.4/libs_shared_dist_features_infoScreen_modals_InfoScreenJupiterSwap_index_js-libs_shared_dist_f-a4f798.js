"use strict";(self.webpackChunk_solflare_extension=self.webpackChunk_solflare_extension||[]).push([["libs_shared_dist_features_infoScreen_modals_InfoScreenJupiterSwap_index_js-libs_shared_dist_f-a4f798"],{"../../libs/shared/dist/features/infoScreen/modals/InfoScreen/index.js":(e,s,t)=>{t.d(s,{l:()=>f});var i=t("../../../node_modules/react/jsx-runtime.js"),a=t("../../../node_modules/react/index.js"),n=t("../../../node_modules/@mui/styles/makeStyles/makeStyles.js"),r=t("../../libs/foundation-ui/dist/index.js"),o=t("../../libs/rise-ui/dist/index.js"),d=t("../../libs/shared/dist/storage/solflareService.js"),l=t("../../libs/shared/dist/utils/extension.js"),c=t("../../libs/shared/dist/utils/featureFlags.js");const u=(0,n.Z)((()=>({dialogScreenPaper:{padding:"0px",width:"auto",borderRadius:"20px"},content:{padding:"0px !important",borderRadius:"20px",overflow:"hidden"}}))),f=({storageKey:e,cta:s,page:t,manualOpen:n,onClose:f,...m})=>{const[p,h]=(0,a.useState)(!!n),b=(0,a.useRef)(n),x=u(),j=(0,a.useCallback)((async()=>{f&&n?f():(await d.Z.infoScreen.setField(e,!0),h(!1))}),[n,f,e]);(0,a.useEffect)((()=>{(async()=>{if(!n){const s=await d.Z.infoScreen.getField(e);h(!s)}})()}),[]),(0,a.useEffect)((()=>{n!==b.current&&h(!!n),b.current=n}),[n]),(0,a.useEffect)((()=>{p&&c.Z.pv(t)}),[p]);const g=()=>{s.action(),j()};return p?l.p1&&!l.Cy?(0,i.jsx)(r.FullPageModal,{open:!0,children:(0,i.jsx)(r.WhatsNew,{...m,onClose:j,cta:{...s,action:g}})}):(0,i.jsx)(o.u_,{open:!0,contentClassName:x.content,dialogPaperClassName:x.dialogScreenPaper,onClose:j,children:(0,i.jsx)(r.WhatsNew,{...m,cta:{...s,action:g}})}):null}},"../../libs/shared/dist/features/infoScreen/modals/InfoScreenJupiterSwap/index.js":(e,s,t)=>{t.d(s,{v:()=>c});var i=t("../../../node_modules/react/jsx-runtime.js"),a=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),n=t("../../libs/shared/dist/assets/InfoScreen/JupiterSwap/jupiter-swap-1.mp4"),r=t("../../libs/shared/dist/assets/InfoScreen/JupiterSwap/jupiter-swap-2.mp4"),o=t("../../libs/shared/dist/features/featureFlags/index.js"),d=t("../../libs/shared/dist/features/infoScreen/modals/InfoScreen/index.js");const l=[{title:"Get the best prices",paragraph:"Solflare uses Jupiter to find the best rates for your swaps across multiple decentralized exchanges.",videoSrc:n,duration:7e3},{title:"Get $JUP airdrops",paragraph:"Swap in Solflare to qualify for upcoming rounds of $JUP airdrops in the years ahead.",videoSrc:r,duration:7e3}],c=()=>{const{t:e}=(0,a.$)();return(0,i.jsx)(d.l,{steps:l,title:"Swap powered by Jupiter",cta:{title:e("action_continue"),action:()=>{}},storageKey:"jupiter-swap",page:o.c})}},"../../libs/shared/dist/features/infoScreen/modals/InfoScreenUnverifiedNftGuide/index.js":(e,s,t)=>{t.d(s,{l:()=>f});var i=t("../../../node_modules/react/jsx-runtime.js"),a=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),n=t("../../libs/shared/dist/assets/InfoScreen/UnverifiedNftGuide/unverified-nft-guide-1.mp4"),r=t("../../libs/shared/dist/assets/InfoScreen/UnverifiedNftGuide/unverified-nft-guide-2.mp4"),o=t("../../libs/shared/dist/assets/InfoScreen/UnverifiedNftGuide/unverified-nft-guide-3.mp4"),d=t("../../libs/shared/dist/assets/InfoScreen/UnverifiedNftGuide/unverified-nft-guide-4.mp4"),l=t("../../libs/shared/dist/features/featureFlags/index.js"),c=t("../../libs/shared/dist/features/infoScreen/modals/InfoScreen/index.js");const u=[{title:"Unverified NFTs",paragraph:"Here, you'll find NFTs that we and top marketplaces couldn't verify.",videoSrc:n,duration:7e3},{title:"Identify Unsafe NFTs",paragraph:"Anyone can send you NFTs. Some are safe, but those containing links might be scams.",videoSrc:r,duration:7e3},{title:"Don't Follow Links!",paragraph:"Links could lead you to unsafe sites putting your assets at risk. Ignore or burn NFTs you can't verify.",videoSrc:o,duration:7e3},{title:"Verify Safe NFTs",paragraph:"If you are confident an NFT is safe, you can move it to your main gallery. It's easy to undo if you change your mind.",videoSrc:d,duration:7e3}],f=({open:e,onClose:s})=>{const{t}=(0,a.$)();return(0,i.jsx)(c.l,{steps:u,title:"Unverified NFTs",cta:{title:t("action_continue"),action:()=>{}},storageKey:"unverified-nft-guide",page:l.Pr,manualOpen:e,onClose:s})}},"../../libs/shared/dist/features/nfts/api/transactions.js":(e,s,t)=>{t.d(s,{EI:()=>l,MH:()=>f,dA:()=>u,hO:()=>m,rp:()=>c});var i=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),a=t("../../../node_modules/base64-js/index.js"),n=t("../../libs/shared/dist/api/index.js"),r=t("../../libs/shared/dist/utils/lamportToSol.js"),o=t("../../../node_modules/console-browserify/index.js");const d="https://wallet-api.solflare.com",l=async({price:e,editListing:s,...t})=>{try{const o=`${d}/v2/portfolio/nft/${s?"edit-listing":"list"}`,{body:l}=await(0,n.v_)(o,{...t,price:(0,r.m)(e).toString()});if(l?.error)throw new Error(l.error);if(!l?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:i.VersionedTransaction.deserialize((0,a.toByteArray)(l.txs[0]))}}catch(e){throw o.dir(e),new Error(e?.response?.data?.error||e?.message)}},c=async e=>{try{const{body:s}=await(0,n.v_)(`${d}/v2/portfolio/nft/delist`,e);if(s?.error)throw new Error(s.error);if(!s?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:i.VersionedTransaction.deserialize((0,a.toByteArray)(s.txs[0]))}}catch(e){throw o.dir(e),new Error(e?.response?.data?.error||e?.message)}},u=async({address:e,mint:s,poolId:t,minAmountOut:r})=>{try{const{body:o}=await(0,n.v_)(`${d}/v2/portfolio/nft/instant-sell`,{address:e,mint:s,poolId:t,minAmountOut:r});if(o?.error)throw new Error(o.error);if(!o?.txs?.length)throw new Error("Failed to generate transaction");return{transactions:o.txs.map((e=>({transaction:i.VersionedTransaction.deserialize((0,a.toByteArray)(e))})))}}catch(e){throw o.dir(e),new Error(e?.response?.data?.error||e?.message)}},f=async({address:e,recipient:s,nfts:t,network:r,setComputeBudget:l})=>{try{const{body:o}=await(0,n.v_)(`${d}/v2/portfolio/nft/send`,{address:e,recipient:s,nfts:t,network:r,setComputeBudget:l});if(o?.error)throw new Error(o.error);if(!o?.txs?.length)throw new Error("Failed to generate transaction");const c=o.txs.map((e=>({transaction:i.VersionedTransaction.deserialize((0,a.toByteArray)(e))})));return 1===c.length?c[0]:{transactions:c}}catch(e){throw o.dir(e),new Error(e?.response?.data?.error||e?.message)}},m=async({address:e,nfts:s,network:t,setComputeBudget:r})=>{try{const{body:o}=await(0,n.v_)(`${d}/v2/portfolio/nft/burn`,{address:e,nfts:s,network:t,setComputeBudget:r});if(o?.error)throw new Error(o.error);if(!o?.txs?.length)throw new Error("Failed to generate transaction");return{transactions:o.txs.map((e=>({transaction:i.VersionedTransaction.deserialize((0,a.toByteArray)(e))})))}}catch(e){throw o.dir(e),new Error(e?.response?.data?.error||e?.message)}}},"../../libs/shared/dist/features/nfts/components/SingleNFTAttributes/index.js":(e,s,t)=>{t.d(s,{j:()=>f});var i=t("../../../node_modules/react/jsx-runtime.js"),a=t("../../../node_modules/react/index.js"),n=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../../node_modules/lodash/lodash.js"),o=t("../../libs/shared/dist/assets/solana-logo-grey.svg"),d=t("../../libs/shared/dist/utils/displayPrice.js"),l=t("../../libs/shared/dist/features/nfts/hooks/index.js"),c=t("../../libs/shared/dist/features/nfts/queries/nftData.js"),u=t("../../libs/shared/dist/features/nfts/utils/index.js");const f=({NFTAttributesComponent:e,NFTAttributeComponent:s})=>{const{t}=(0,n.$)(),{nft:f}=(0,l.ix)(),{data:{marketData:m}={},isLoading:p}=(0,c.c)(f.id,{enabled:(0,u.Kl)(f)}),h=(0,a.useMemo)((()=>{const e=m?.traits||[],s=f.attributes?.map(((s,t)=>{const i=e[t];return{value:s.value,field:s.traitType,rarity:i?.percentage||0,floorPrice:i?.floorPrice||0}}));return(0,r.orderBy)(s,["floorPrice"],["desc"])}),[f.attributes,m]);return(0,i.jsx)(e,{title:t("nft_details_attributes"),children:h.map((e=>(0,i.jsx)(s,{dataKey:e.field,isLoading:p&&(0,u.Kl)(f),text:e.value,label:e.field,rarity:e.rarity>0?(0,u.IW)(e.rarity):void 0,floorPrice:e.floorPrice>0?(0,d.ED)({amount:e.floorPrice,displayType:"value"}):void 0,priceSymbol:e.floorPrice>0&&(0,i.jsx)("img",{src:o,alt:"Solana"})},e.field)))})}},"../../libs/shared/dist/features/nfts/components/SingleNFTHeaderActionsMenu/index.js":(e,s,t)=>{t.d(s,{a:()=>b});var i=t("../../../node_modules/react/jsx-runtime.js"),a=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),n=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),r=t("../../libs/foundation-ui/dist/index.js"),o=t("../../libs/shared/dist/hooks/index.js"),d=t("../../libs/shared/dist/utils/extension.js"),l=t("../../libs/shared/dist/features/featureFlags/index.js"),c=t("../../libs/shared/dist/features/pfp/queries/index.js"),u=t("../../libs/shared/dist/features/portfolio/hooks/index.js"),f=t("../../libs/shared/dist/features/walletData/hooks/index.js"),m=t("../../libs/shared/dist/features/nfts/hooks/index.js"),p=t("../../libs/shared/dist/features/nfts/queries/nftData.js"),h=t("../../libs/shared/dist/features/nfts/utils/index.js");const b=()=>{const{t:e}=(0,a.$)(),{publicKey:s}=(0,f.rT)(),{nft:t,download:b,send:x,markAsSuspicious:j,markAsLegitimate:g,setAsPfp:_,removeAsPfp:v}=(0,m.ix)(),{data:{marketData:y}={}}=(0,p.c)(t.id,{enabled:(0,h.Kl)(t)}),{data:w}=(0,u.Dm)(),k=(0,m.Vr)(t.groupSingle),{data:T}=(0,c.F)(s),{openExplorer:S}=(0,o.Vf)(),I=w?.price?.usdPrice;return(0,i.jsxs)(r.DropdownMenu,{"data-id":"nft-more-actions-button",trigger:(0,i.jsx)(r.ActionableIcon,{icon:n.Uwo,size:"l"}),children:[(0,i.jsx)(r.DropdownMenuItem,{icon:n.g4A,onClick:()=>{(0,l.cq)(),S({type:t.compressed?"cNFT":"token",address:t.id})},"data-id":"view-in-explorer-action",children:e("action_view_in_explorer")}),t.listed&&(0,i.jsx)(r.DropdownMenuItem,{icon:n.wlW,onClick:()=>{(0,l.C4)(),window.open(`https://www.tensor.trade/item/${t.id}`,"_blank")},"data-id":"view-on-tensor-action",children:e("action_view_on_tensor")}),!t.compressed&&!t.listed&&!t.metaplexCore&&(0,i.jsx)(i.Fragment,{children:T&&T.mintAccount===t.id?(0,i.jsx)(r.DropdownMenuItem,{icon:n.V3X,onClick:v,"data-id":"remove-as-pfp-action",children:e("nfts_remove_as_pfp")}):!(0,h.Pl)(t)&&(0,i.jsx)(r.DropdownMenuItem,{icon:n.V3X,onClick:_,"data-id":"set-as-pfp-action",children:e("nfts_set_as_pfp")})}),(0,h.Pl)(t)&&(0,i.jsx)(r.DropdownMenuItem,{icon:n.XCy,onClick:x,"data-id":"send-action",children:e("action_send")}),!d.UJ&&k?.marketplaceLink&&(0,i.jsx)(r.DropdownMenuItem,{icon:n.wlW,onClick:()=>{(0,l.dn)({collectionName:k?.name||""}),window.open(k?.marketplaceLink,"_blank")},"data-id":"view-collection-action",children:e("action_view_collection")}),!(0,h.Pl)(t)&&(0,i.jsx)(r.DropdownMenuItem,{icon:n.fuY,onClick:b,"data-id":"download-action",children:e("action_download")}),!t.listed&&!(0,h.gO)(t)&&(0,i.jsx)(r.DropdownMenuItem,{icon:n.i5g,onClick:(0,h.DQ)(t)?async()=>{(0,l.Yn)((0,h.Ng)(t,y,I)),await g()}:async()=>{(0,l.uK)((0,h.i0)(t,y,I)),await j()},"data-id":(0,h.DQ)(t)?"unmark-as-spam-action":"mark-as-spam-action",children:(0,h.DQ)(t)?e("nfts_action_mark_as_verified"):e("nfts_action_mark_as_unverified")})]})}},"../../libs/shared/dist/features/nfts/components/SingleNFTInstantSell/SingleNFTInstantSellWidget.js":(e,s,t)=>{t.d(s,{o:()=>c});var i=t("../../../node_modules/react/jsx-runtime.js"),a=t("../../../node_modules/react/index.js"),n=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../../node_modules/@mui/styles/makeStyles/makeStyles.js"),o=t("../../libs/foundation-ui/dist/index.js"),d=t("../../libs/shared/dist/features/currencies/components/index.js");const l=(0,r.Z)((()=>({widgetContainer:{height:"0px",overflow:"hidden",transition:"height 0.3s ease-in-out"},slideInShow:{height:"64px"}}))),c=({sellerGets:e,onClick:s})=>{const{widgetContainer:t,slideInShow:r}=l(),{t:c}=(0,n.$)(),[u,f]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{const e=setTimeout((()=>{f(!0)}),300);return()=>clearTimeout(e)}),[]),(0,i.jsx)("div",{className:`${t} ${u?r:""}`,children:(0,i.jsx)(o.Widget,{title:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(d.EI,{symbolType:"text",value:e||"0",showSmallNumbers:!0})}),subtitle:c("nft_instant_sell_widget_subtitle"),tooltip:(0,i.jsx)(o.InfoWithTooltip,{tooltip:c("nft_instant_sell_widget_tooltip")}),right:(0,i.jsx)(o.Button,{size:"s",onClick:s,children:c("action_sell_now")})})})}},"../../libs/shared/dist/features/nfts/components/SingleNFTInstantSell/index.js":(e,s,t)=>{t.d(s,{z:()=>N});var i=t("../../../node_modules/react/jsx-runtime.js"),a=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),n=t("../../../node_modules/react/index.js"),r=t("../../../node_modules/react-router/dist/index.js"),o=t("../../../node_modules/@fortawesome/pro-regular-svg-icons/index.mjs"),d=t("../../libs/foundation-ui/dist/index.js"),l=t("../../libs/shared/dist/constants/mints.js"),c=t("../../libs/shared/dist/features/currencies/hooks/index.js"),u=t("../../libs/shared/dist/features/portfolio/hooks/index.js"),f=t("../../libs/shared/dist/utils/displayPrice.js"),m=t("../../libs/shared/dist/components/TokenAvatar/index.js");const p=({nftImage:e,nftName:s,nftCollection:t,solAmount:a})=>{const{data:n}=(0,u.Dm)(),{value:r,suffix:p,prefix:h,price:b}=(0,c.yF)("SOL",a||0,n?.price?.price);return(0,i.jsx)(d.ConfirmTransaction,{avatar:(0,i.jsx)(d.IconAvatar,{size:"xl",icon:o.vJI}),transactionFromItem:(0,i.jsx)(d.TXListItem,{title:s||"Collectible",subtitle:t,avatar:e&&(0,i.jsx)(d.NFTAvatar,{src:e})}),transactionToItem:a&&(0,i.jsx)(d.TXListItem,{title:(0,f.ED)({amount:a,displayType:"solana",suffix:" SOL"}),subtitle:b?(0,f.ED)({amount:r,displayType:"value",suffix:p,prefix:h}):void 0,avatar:(0,i.jsx)(m.y,{verified:!0,src:l.vx.logoURI})})})};var h=t("../../libs/shared/dist/constants/routes.js"),b=t("../../libs/shared/dist/utils/lamportToSol.js"),x=t("../../libs/shared/dist/features/featureFlags/index.js"),j=t("../../libs/shared/dist/features/transactionFlow/context/index.js"),g=t("../../libs/shared/dist/features/transactionFlow/hooks/index.js"),_=t("../../libs/shared/dist/features/walletData/hooks/index.js"),v=t("../../libs/shared/dist/features/nfts/api/transactions.js"),y=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),w=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),k=t("../../libs/shared/dist/features/nfts/api/nfts.js"),T=t("../../libs/shared/dist/features/nfts/queries/nftData.js"),S=t("../../libs/shared/dist/features/nfts/utils/index.js"),I=t("../../../node_modules/console-browserify/index.js");const N=({nft:e,NFTInstantSellComponent:s})=>{const{t}=(0,a.$)(),{showBanner:o,sellerGets:d,sellNow:l}=(e=>{const{transactionInit:s}=(0,j.p)(),{publicKey:t}=(0,_.rT)(),a=(0,r.s0)(),[o,d]=(0,n.useState)(!1),l=(0,S.Kl)(e)&&!(0,S.$h)(e)&&!o&&!e.metaplexCore,{data:c}=((e,{enabled:s=!0}={})=>{const t=(0,w.LN)(),{publicKey:i}=(0,_.rT)();return(0,y.a)({queryKey:["nft-best-offer",e,i,t.cluster],queryFn:async()=>(0,k.RW)(i,e,t.cluster),enabled:s,refetchInterval:3e4})})(e.id,{enabled:l}),{sellerGets:f,bestOffer:m,poolId:N,tradingFee:C,marketplace:F}=c?.bestOffer||{sellerGets:void 0,bestOffer:void 0,poolId:void 0,tradingFee:void 0},{data:{marketData:P}={}}=(0,T.c)(e.id),{data:L}=(0,u.Dm)(),A=L?.price?.usdPrice,D=(0,b.s)(f??0);return{showBanner:!!m&&+m>0&&!e.listed&&!e.metaplexCore,sellerGets:D,sellNow:async()=>{d(!0),await s({title:"Sell",txBuilder:v.dA,useSignAndSend:g.HG,builderParams:{address:t,mint:e.id,poolId:N||"",minAmountOut:f||"0"},ffLogFunction:x.S6,ffParams:(0,S.EB)(e,P,D.toNumber(),C??null,F??null,A),commitment:"confirmed",confirmDialog:(0,i.jsx)(p,{nftName:e.name,nftCollection:e.groupName,nftImage:e.image,solAmount:D.toString()}),onBroadcast:({status:e})=>{"success"===e&&a(h.yT.MAIN,{replace:!0})},onConfirm:({status:e,error:s,parsedError:t,stringifiedError:i})=>{I.log("===oncoNFIRM",e,s,t,i)},onEnd:()=>{d(!1)}})}}})(e);return o?(0,i.jsx)(s,{sellerGets:d.toString(),onClick:l,label:t("nft_details_instant_sell")}):null}},"../../libs/shared/dist/features/nfts/components/SingleNFTPreview/index.js":(e,s,t)=>{t.d(s,{I:()=>g});var i=t("../../../node_modules/react/jsx-runtime.js"),a=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),n=t("../../libs/foundation-ui/dist/index.js"),r=t("../../libs/shared/dist/utils/displayPrice.js"),o=t("../../libs/shared/dist/utils/lamportToSol.js"),d=t("../../libs/shared/dist/features/nfts/constants.js"),l=t("../../libs/shared/dist/features/nfts/hooks/index.js"),c=t("../../libs/shared/dist/features/nfts/utils/index.js"),u=t("../../libs/shared/dist/features/nfts/utils/prepareData.js"),f=t("../../../node_modules/react/index.js"),m=t("../../libs/shared/dist/utils/extension.js");const p=({src:e})=>(0,i.jsx)("img",{width:"100%",src:e}),h=({src:e})=>(0,i.jsxs)("video",{width:"100%",height:"100%",controls:!0,loop:!0,autoPlay:!0,children:[(0,i.jsx)("source",{src:e,type:"video/mp4"}),"Your browser does not support the video tag."]}),b=({src:e})=>(0,i.jsxs)("audio",{controls:!0,src:e,children:["Your browser does not support the ",(0,i.jsx)("code",{children:"audio"})," element."]}),x=({src:e,poster:s})=>{const[a,n]=(0,f.useState)(!1);return(0,f.useEffect)((()=>{(async()=>{await t.e("GoogleModelViewer").then(t.bind(t,"../../libs/shared/node_modules/@google/model-viewer/dist/model-viewer.min.js")),n(!0)})()}),[]),a?(0,i.jsx)("model-viewer",{"auto-rotate":!0,"auto-rotate-delay":0,"camera-controls":!0,src:e,poster:s,style:{height:"100%",width:"100%",minHeight:300,"--poster-color":"transparent"}}):null},j=({src:e,category:s,posterSrc:t="",fallbackSrc:a})=>{const r=m.p1&&!m.Cy;switch(s){case"image":return r?(0,i.jsx)(n.ImageResolver,{errorFallback:d.mr,src:e,fallbackImage:a}):(0,i.jsx)(n.ImageResolver,{style:{width:"100%",height:"100%"},src:e,fallbackImage:a,errorFallback:d.mr});case"vr":case"model":return(0,i.jsx)(x,{src:e,poster:t});case"audio":return(0,i.jsx)(b,{src:e,poster:t});case"video":return(0,i.jsx)(h,{src:e});default:return(0,i.jsx)(p,{src:e})}},g=()=>{const{t:e}=(0,a.$)(),{nft:s}=(0,l.ix)(),{src:t,originalSrc:f,category:m}=(0,u.gw)(s);return(0,i.jsxs)(n.NFTImage,{image:(0,i.jsx)(j,{src:t||d.mr,fallbackSrc:f,category:m||d.YF,posterSrc:s.image}),children:[s.listed&&(0,i.jsx)(n.NFTPill,{position:"top",children:e("nft_listed_for_label",{amount:(0,r.ED)({amount:(0,o.s)(s.listedPrice).toString(),suffix:" SOL",displayType:"solana"})})}),(0,c.$h)(s)&&(0,i.jsx)(n.NFTPill,{position:"bottom",children:(0,r.ED)({amount:s.tokenData?.uiAmount,displayType:"long"})})]})}},"../../libs/shared/dist/features/nfts/components/SingleNFTStats/index.js":(e,s,t)=>{t.d(s,{i:()=>m});var i=t("../../../node_modules/react/jsx-runtime.js"),a=t("../../../node_modules/react/index.js"),n=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../../node_modules/lodash/lodash.js"),o=t("../../libs/foundation-ui/dist/index.js"),d=t("../../libs/shared/dist/features/currencies/components/index.js"),l=t("../../libs/shared/dist/features/currencies/hooks/index.js"),c=t("../../libs/shared/dist/features/nfts/hooks/index.js"),u=t("../../libs/shared/dist/features/nfts/queries/nftData.js"),f=t("../../libs/shared/dist/features/nfts/utils/index.js");const m=({NFTStatsComponent:e,NFTStatComponent:s})=>{const{t}=(0,n.$)(),[m,p]=(0,l.EV)("nftFloorPrice"),[h,b]=(0,l.EV)("nftBoughtFor"),{nft:x}=(0,c.ix)(),{data:{marketData:j}={},isLoading:g}=(0,u.c)(x.id),[_,v]=(0,a.useState)(!0),y=(0,a.useCallback)((()=>{p("fiat"===m?"token":"fiat")}),[m,p]),w=(0,a.useCallback)((()=>{b("fiat"===h?"token":"fiat")}),[h,b]),k=(0,f.Xc)(x.rarity?.percentage);return(0,i.jsxs)(e,{label:t("nft_details_stats"),children:[(0,i.jsx)(s,{dataKey:"floor-price",label:t("nft_details_stats_floor_price"),onClick:y,children:"fiat"===m?(0,i.jsx)(d.sp,{value:x.currencyFloor?.price||"0",displayType:"value"}):(0,i.jsx)(d.EI,{value:x.floor?.price||"0",displayType:"value"})}),(g||!!j?.lastSold&&(0,r.isNumber)(j.lastSold.amount))&&(0,i.jsx)(s,{dataKey:"MINT"===j?.lastSold?.type?"mint-price":"bought-for",isLoading:g,label:t("MINT"===j?.lastSold?.type?"nft_details_stats_mint_price":"nft_details_stats_bought_for"),onClick:w,children:"fiat"===h?(0,i.jsx)(d.sp,{value:j&&j.lastSold?j.lastSold.amount*j.lastSold.currencyThen:"0",displayType:"value"}):(0,i.jsx)(d.EI,{value:j?.lastSold?.amount||"0",displayType:"value"})}),!!k&&(0,i.jsx)(s,{dataKey:_?"rarity":"rank",label:t(_?"nft_details_stats_rarity":"nft_details_stats_rank"),onClick:()=>v((e=>!e)),children:_?(0,i.jsx)(o.RarityTag,{variant:k,children:(0,f.Vh)(k)}):x.rarity?.rank})]})}},"../../libs/shared/dist/features/nfts/hooks/index.js":(e,s,t)=>{t.d(s,{Zn:()=>O,A1:()=>L,Pd:()=>S,iN:()=>V,cw:()=>I.c,Vr:()=>i.V,vg:()=>v,pN:()=>A.p,ix:()=>w});var i=t("../../libs/shared/dist/features/nfts/hooks/useNftGroupSingle.js"),a=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),r=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),o=t("../../../node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),d=t("../../libs/shared/dist/assets/tensor.png"),l=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),c=t("../../libs/foundation-ui/dist/index.js"),u=t("../../libs/shared/dist/hooks/useResizedImage.js");const f=({nftName:e,nftCollectionName:s,nftImage:t,marketplaceName:i,marketplaceWebsite:n,marketplaceLogo:r})=>{const{url:o}=(0,u.j)(t);return(0,a.jsx)(c.ConfirmTransaction,{avatar:(0,a.jsx)(c.IconAvatar,{size:"xl",icon:l.vJI}),transactionFromItem:(0,a.jsx)(c.TXListItem,{title:i,subtitle:n,avatar:(0,a.jsx)(c.Avatar,{variant:"circle",src:r})}),transactionToItem:(0,a.jsx)(c.TXListItem,{title:e,subtitle:s,avatar:(0,a.jsx)(c.NFTAvatar,{src:o})})})},m=({nftName:e,nftCollectionName:s,nftImage:t,marketplaceName:i,marketplaceWebsite:n,marketplaceLogo:r})=>{const{url:o}=(0,u.j)(t);return(0,a.jsx)(c.ConfirmTransaction,{avatar:(0,a.jsx)(c.IconAvatar,{size:"xl",icon:l.vJI}),transactionFromItem:(0,a.jsx)(c.TXListItem,{title:e,subtitle:s,avatar:(0,a.jsx)(c.NFTAvatar,{src:o})}),transactionToItem:(0,a.jsx)(c.TXListItem,{title:i,subtitle:n,avatar:(0,a.jsx)(c.Avatar,{variant:"circle",src:r})})})};var p=t("../../libs/shared/dist/features/featureFlags/index.js"),h=t("../../libs/shared/dist/features/portfolio/hooks/index.js"),b=t("../../libs/shared/dist/features/transactionFlow/context/index.js"),x=t("../../libs/shared/dist/features/walletData/hooks/index.js"),j=t("../../libs/shared/dist/features/nfts/api/transactions.js"),g=t("../../libs/shared/dist/features/nfts/utils/index.js");const _={name:"Tensor",website:"tensor.trade",logo:d},v=()=>{const{t:e}=(0,r.$)(),{transactionInit:s}=(0,b.p)(),{publicKey:t}=(0,x.rT)(),i=(0,o.NL)(),{data:d}=(0,h.Dm)(),l=d?.price?.usdPrice;return{list:(0,n.useCallback)((async(n,r,o)=>new Promise(((d,c)=>{s({title:e("confirm_nft_list"),commitment:"confirmed",txBuilder:j.EI,builderParams:{address:t,mint:n.id,price:o,setComputeBudget:!0},ffLogFunction:p.Jb,ffParams:(0,g._)(n,r,+o,l),confirmDialog:(0,a.jsx)(m,{nftName:n.name,nftCollectionName:n.groupName,nftImage:n.image,marketplaceName:_.name,marketplaceWebsite:_.website,marketplaceLogo:_.logo}),onBroadcast:({status:e})=>{"success"===e?d():c()},onConfirm:({status:e})=>{"success"===e&&i.invalidateQueries(["nfts"])}})}))),[i,s,t,e,l]),relist:(0,n.useCallback)((async(n,r,o)=>new Promise(((d,c)=>{s({title:e("confirm_nft_edit_listing"),commitment:"confirmed",txBuilder:j.EI,builderParams:{address:t,mint:n.id,price:o,editListing:!0,setComputeBudget:!0},ffLogFunction:p.LO,ffParams:(0,g.Vp)(n,r,+o,l),confirmDialog:(0,a.jsx)(m,{nftName:n.name,nftCollectionName:n.groupName,nftImage:n.image,marketplaceName:_.name,marketplaceWebsite:_.website,marketplaceLogo:_.logo}),onBroadcast:({status:e})=>{"success"===e?d():c()},onConfirm:({status:e})=>{"success"===e&&i.invalidateQueries(["nfts"])}})}))),[i,s,t,e,l]),delist:(0,n.useCallback)((async(n,r)=>new Promise(((o,d)=>{s({title:e("confirm_nft_delist"),commitment:"confirmed",txBuilder:j.rp,builderParams:{address:t,mint:n.id,setComputeBudget:!0},ffLogFunction:p.Nk,ffParams:(0,g.oW)(n,r,l),confirmDialog:(0,a.jsx)(f,{nftName:n.name,nftCollectionName:n.groupName,nftImage:n.image,marketplaceName:_.name,marketplaceWebsite:_.website,marketplaceLogo:_.logo}),onBroadcast:({status:e})=>{"success"===e?o():d()},onConfirm:({status:e})=>{"success"===e&&i.invalidateQueries(["nfts"])}})}))),[i,s,t,e,l])}};var y=t("../../libs/shared/dist/features/nfts/context/SingleNFT/index.js");const w=()=>{const e=(0,n.useContext)(y._);if(null===e)throw new Error("useSingleNft must be used within a SingleNftContext");return e};var k=t("../../libs/shared/dist/storage/solflareService.js"),T=t("../../libs/shared/dist/features/nfts/context/index.js");const S=()=>{const{isJunkHidden:e,setIsJunkHidden:s,userJunkPreference:t,setUserJunkPreference:i}=(0,T.$T)();return(0,n.useEffect)((()=>{k.Z.userJunkPreferenceIsHidden.get().then((e=>{!1===e&&i(!1)}))}),[i]),{setJunkState:(0,n.useCallback)((e=>{e.groups.some((e=>"scam"===e.id))?s(t):s(null)}),[s,t]),junkFilter:(0,n.useCallback)((s=>e?s.nfts.filter((e=>"scam"!==e.id)):s.nfts),[e])}};var I=t("../../libs/shared/dist/features/nfts/hooks/useNftData.js"),N=t("../../../node_modules/react-router/dist/index.js"),C=t("../../../node_modules/lodash/lodash.js"),F=t("../../libs/shared/dist/features/nfts/constants.js");const P={[F.dY.TOTAL_VALUE]:e=>(0,C.sortBy)(e,[e=>"scam"===e.id,e=>"suspicious"===e.id,e=>-(e?.sortByAmount||0),e=>e.title?.toLowerCase()]),[F.dY.FLOOR_PRICE]:e=>(0,C.sortBy)(e,[e=>"scam"===e.id,e=>"suspicious"===e.id,e=>-(e?.sortByValue||0),e=>e.title?.toLowerCase()]),[F.dY.BEST_PERFORMANCE]:e=>(0,C.sortBy)(e,[e=>"scam"===e.id,e=>"suspicious"===e.id,e=>0===e?.sortByPerformance?1/0:-(e?.sortByPerformance||0),e=>e.title?.toLowerCase()]),[F.dY.BY_NEWEST]:()=>{},[F.dY.RARITY]:e=>(0,C.sortBy)(e,[e=>"scam"===e.id,e=>"suspicious"===e.id,e=>0===e?.sortByRarity?1/0:e.sortByRarity,e=>e.title?.toLowerCase()]),[F.dY.ALPHABETICALLY]:e=>(0,C.sortBy)(e,[e=>"scam"===e.id,e=>"suspicious"===e.id,e=>e.title?.toLowerCase()])},L=()=>{const{sortedKey:e,searchTerm:s,sortedGroupKey:t}=(0,T.$T)(),{id:i}=(0,N.UO)(),a=i,r=(0,n.useCallback)((i=>{if(!e)return[];const n=P[a?t:e](i);return s?((e,s)=>{const t=e?.filter((e=>e.title.toLowerCase().includes(s?.trim().toLowerCase())));return t})(n,s):n}),[e,a,t,s]);return{filterFn:r}};var A=t("../../libs/shared/dist/features/nfts/hooks/useNftRouting.js"),D=t("../../../node_modules/bignumber.js/bignumber.mjs"),E=t("../../libs/wallet-core/dist/shared.js"),B=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),R=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),M=t("../../libs/shared/dist/hooks/useRPCProxy/index.js"),$=t("../../libs/shared/dist/hooks/useSolanaBalance/index.js"),G=t("../../libs/shared/dist/features/portfolio/constants.js"),U=t("../../libs/shared/dist/features/portfolio/queries/index.js"),K=t("../../libs/shared/dist/features/portfolio/utils/index.js");const O=({nfts:e,recipient:s,amount:t,showAmountInput:i})=>{const{t:a}=(0,r.$)(),{publicKey:o,walletType:d}=(0,x.rT)(),{lamports:l}=(0,$.h)(),{computeUnitPrice:c}=(0,U.NT)(),{data:u,isFetching:f}=(({pubkey:e,staleTime:s})=>{const t=(0,M.Q)({purpose:"transfer"});return(0,R.a)({queryKey:["getParsedAccountInfo",e],queryFn:async()=>{if(!e)return null;const s=await t.getParsedAccountInfo(new B.PublicKey(e));return s?.value??null},staleTime:s,enabled:!!e})})({pubkey:s?.address,staleTime:6e4});return{alertProps:(0,n.useMemo)((()=>{const n=e.filter((e=>e.compressed)).length,r=d===E.pe?0:(0,K.dP)(c||0,3),m=d===E.pe?0:(0,K.dP)(c||0,1),p=n===e.length?0:G.U4,h=(G.gM+r)*(e.length-n)+(G.gM+m)*n+p+G.bA;return+l<h?{variant:"error",title:a("validation_insufficient_balance_title",{symbol:"SOL"}),message:a("validation_insufficient_balance_to_cover_network_fees_description",{amount:"0.01 SOL"})}:i&&new D.Z(t).isGreaterThan(e[0].amount)?{variant:"error",title:a("insufficient_ticker",{ticker:e[0].name}),message:a("staking_validation_insufficient_balance_description")}:!s||u||f?s&&s.address===o?{variant:"error",title:a("validation_send_to_yourself_title"),message:a("validation_send_to_yourself_description")}:null:{variant:"warning",title:a("validation_send_to_unused_address_title"),message:a("validation_send_to_unused_address_description")}}),[t,c,f,l,e,s,u,i,a,d,o]),isLoading:f}};var q=t("../../libs/shared/dist/features/nfts/queries/nftData.js");const V=({id:e,amount:s,editListing:t,floorPrice:i})=>{const{t:a}=(0,r.$)(),{isLoading:o,data:{marketData:d}={}}=(0,q.c)(e,{enabled:!0}),{walletType:l}=(0,x.rT)(),{lamports:c}=(0,$.h)(),{computeUnitPrice:u}=(0,U.NT)(),f=l===E.pe;return(0,n.useMemo)((()=>{if(!Number(s)||o)return;const e=(0,K.dP)(u||0,2);return new D.Z(G.gM).plus(f?0:e).plus(t?0:G.U4).plus(t?0:1900080).plus(G.bA).isGreaterThan(c)?{variant:"error",title:a("validation_insufficient_balance_title",{symbol:"SOL"}),message:a("validation_insufficient_balance_to_cover_network_fees_description",{amount:"0.01 SOL"})}:d&&+s<d.traitFloorPrice?{variant:"warning",title:a("validation_nft_list_price_below_trait_floor_price_title"),message:a("validation_nft_list_price_below_trait_floor_price_description")}:+s>0&&i&&+s<i?{variant:"warning",title:a("validation_nft_list_price_below_floor_price_title"),message:a("validation_nft_list_price_below_floor_price_description")}:void 0}),[s,o,u,f,t,c,d,i,a])}},"../../libs/shared/dist/features/nfts/hooks/useAddressBookNft.js":(e,s,t)=>{t.d(s,{M:()=>I});var i=t("../../../node_modules/react/index.js"),a=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),n=t("../../../node_modules/lodash/lodash.js"),r=t("../../libs/shared/dist/utils/isPublicKeyValid.js"),o=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),d=t("../../libs/shared/dist/features/shared/account/index.js"),l=t("../../libs/shared/dist/features/nfts/context/index.js"),c=t("../../libs/shared/dist/features/nfts/utils/transferUtils.js"),u=t("../../../node_modules/react/jsx-runtime.js"),f=t("../../../node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),m=t("../../../node_modules/dayjs/dayjs.min.js"),p=t.n(m),h=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),b=t("../../libs/foundation-ui/dist/index.js");const x=({count:e})=>(0,u.jsx)(b.ConfirmTransaction,{avatar:(0,u.jsx)(b.IconAvatar,{size:"xl",icon:h.Rpv}),transactionFromItem:(0,u.jsx)(b.TXListItem,{title:`${e} ${e>1?"NFTs":"NFT"}`,avatar:(0,u.jsx)(b.IconAvatar,{variant:"square",icon:h.l9f})})});var j=t("../../libs/shared/dist/hooks/useResizedImage.js");const g=({nftName:e,nftImage:s})=>{const{url:t}=(0,j.j)(s);return(0,u.jsx)(b.ConfirmTransaction,{avatar:(0,u.jsx)(b.IconAvatar,{size:"xl",icon:h.Rpv}),transactionFromItem:(0,u.jsx)(b.TXListItem,{title:e||"NFT",avatar:(0,u.jsx)(b.NFTAvatar,{src:t})})})};var _=t("../../libs/shared/dist/features/transactionFlow/context/index.js"),v=t("../../libs/shared/dist/features/transactionFlow/hooks/index.js"),y=t("../../libs/shared/dist/features/walletData/hooks/index.js"),w=t("../../libs/shared/dist/features/nfts/api/flags.js"),k=t("../../libs/shared/dist/features/nfts/api/transactions.js"),T=t("../../libs/shared/dist/features/nfts/hooks/useNftRouting.js"),S=t("../../libs/shared/dist/features/nfts/hooks/useNftSend.js");const I=({nfts:e})=>{const{t:s}=(0,a.$)(),t=(0,o.LN)(),[m,h]=(0,i.useState)(""),[b,j]=(0,i.useState)(""),[I,N]=(0,i.useState)("address"),[C,F]=(0,i.useState)(!1),[P,L]=(0,i.useState)(""),[A,D]=(0,i.useState)({}),E=(0,i.useRef)(),{nftsToTransfer:B}=(0,l.$T)(),{sendTransaction:R}=(0,S.b)(),{burnTransaction:M}=(()=>{const{t:e}=(0,a.$)(),s=(0,f.NL)(),{goToGallery:t}=(0,T.p)(),{setIsTransferInProgress:n,setNftsToTransfer:r,setIsSendTransfer:d}=(0,l.$T)(),{transactionInit:c}=(0,_.p)(),{publicKey:m}=(0,y.rT)(),{cluster:h}=(0,o.LN)(),b=(0,i.useCallback)((({nfts:i})=>{c({txBuilder:k.hO,builderParams:{address:m,network:h,setComputeBudget:!0,nfts:i?.map((e=>({tokenPubkey:e.tokenAccountPubkey||e.mint,mint:e.mint,compressed:!!e.compressed,metaplexCore:!!e.metaplexCore})))||[]},title:e("confirm_transaction_title"),useSignAndSend:v.go,commitment:"confirmed",onBroadcastAll:({successCount:e})=>{if(e>0){const e=i.map((e=>e.mint));(0,w.T)({addresses:e,flag:"burned",publicKey:m,timestamp:p()().unix(),network:h}),t(),n(!1),r([]),d(!0)}},onConfirm:()=>{s.invalidateQueries(["nfts"])},confirmDialog:1===i.length?(0,u.jsx)(g,{nftName:"scam"===i[0]?.group?void 0:i[0]?.name,nftImage:"scam"===i[0]?.group?void 0:i[0]?.image}):(0,u.jsx)(x,{count:i.length})})}),[t,s,h,d,n,r,e,c,m]);return{burnTransaction:(0,i.useCallback)((({nfts:e})=>{if(!e?.length)return[];b({nfts:e})}),[b])}})();(0,i.useEffect)((()=>{0===B.length&&(h(""),j(""),F(!1),D({}))}),[A,B.length]);const $=(0,i.useRef)((0,n.debounce)((({value:e})=>{G(e)}),500)).current,G=async e=>{if(F(!1),j(""),0===e.length)return void D((e=>({...e,address:s("validation_invalid_address")})));const i=await(0,d.ru)(e,t.cluster);if(i)return D((e=>(0,n.omit)(e,["address"]))),"address"===i.source?(N("address"),void F(!0)):(N(i.source),j(i.publicKey),void F(!0));j(""),D((e=>({...e,address:s("validation_invalid_address")})))};return{onChange:e=>{const{name:s,value:t}=e.target;h(t),L(t),D((e=>(0,n.omit)(e,[s]))),"address"===s&&$({value:t}),"confirm"===s&&F((0,c.jo)(t))},submitTransfer:async()=>{const t={};if(m.trim()?("address"===I&&!(0,r.Z)(m)||"address"!==I&&!b)&&(t.address=s("validation_invalid_address")):t.address=s("validation_address_is_required"),!(0,n.isEmpty)(t))return D(t),!1;E&&E.current&&!E.current()||R({nfts:e??[],recipient:"address"===I?m:b,address:"address"===I?null:m})},submitBurn:()=>{const s={};if(!(0,n.isEmpty)(s))return D(s),!1;M({nfts:e})},saveAddressCallback:E,address:m,handler:I,resolved:b,errorState:A,allowSubmit:C,confirm:P}}},"../../libs/shared/dist/features/nfts/hooks/useNftRouting.js":(e,s,t)=>{t.d(s,{p:()=>r});var i=t("../../../node_modules/react-router/dist/index.js"),a=t("../../libs/shared/dist/constants/routes.js"),n=t("../../libs/shared/dist/features/nfts/context/index.js");const r=()=>{const e=(0,i.s0)(),{setSelectedIds:s,setIsVisibleContextSelected:t,setSearchTerm:r,setSelectedIdsCount:o,setNftsToTransfer:d}=(0,n.$T)();return{onNftClick:({group:s,id:t,redirectToSingle:i=!1})=>{if(!s||i)return e(a.yT.SINGLE(t)),r(""),void window.scrollTo(0,0);s&&e(a.yT.GROUP(s)),r(""),window.scrollTo(0,0)},goBack:()=>{s(new Map),t(!1),o(0),r(""),e(a.xm)},goToGallery:()=>{s(new Map),t(!1),o(0),r(""),d([]),e(a.yT.MAIN,{replace:!0})},resetState:()=>{s(new Map),t(!1),o(0),r(""),d([])}}}},"../../libs/shared/dist/features/nfts/hooks/useNftSend.js":(e,s,t)=>{t.d(s,{b:()=>k});var i=t("../../../node_modules/react/jsx-runtime.js"),a=t("../../../node_modules/react/index.js"),n=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../../node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),o=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),d=t("../../libs/foundation-ui/dist/index.js"),l=t("../../libs/shared/dist/features/pfp/components/index.js"),c=t("../../libs/shared/dist/utils/truncateMiddle.js");const u=({count:e,toPubkey:s,toName:t,collectionName:a})=>(0,i.jsx)(d.ConfirmTransaction,{avatar:(0,i.jsx)(d.IconAvatar,{size:"xl",icon:o.XCy}),transactionFromItem:(0,i.jsx)(d.TXListItem,{title:`${e} ${e>1?"Collectibles":"Collectible"}`,subtitle:a,avatar:(0,i.jsx)(d.IconAvatar,{variant:"square",icon:o.l9f})}),transactionToItem:(0,i.jsx)(d.TXListItem,{title:t||(0,c.r)(s),avatar:(0,i.jsx)(l.y,{publicKey:s})})}),f=({nftImage:e,nftName:s,nftCollection:t,toPubkey:a,toName:n})=>(0,i.jsx)(d.ConfirmTransaction,{avatar:(0,i.jsx)(d.IconAvatar,{size:"xl",icon:o.XCy}),transactionFromItem:(0,i.jsx)(d.TXListItem,{title:s||"Collectible",subtitle:t,avatar:(0,i.jsx)(d.NFTAvatar,{src:e})}),transactionToItem:(0,i.jsx)(d.TXListItem,{title:n||(0,c.r)(a),avatar:(0,i.jsx)(l.y,{publicKey:a})})});var m=t("../../libs/shared/dist/features/addressBook/hooks/index.js"),p=t("../../libs/shared/dist/features/featureFlags/index.js"),h=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),b=t("../../libs/shared/dist/features/recentAddresses/context/index.js"),x=t("../../libs/shared/dist/features/recipientInput/constants.js"),j=t("../../libs/shared/dist/features/transactionFlow/context/index.js"),g=t("../../libs/shared/dist/features/transactionFlow/hooks/index.js"),_=t("../../libs/shared/dist/features/walletData/hooks/index.js"),v=t("../../libs/shared/dist/features/nfts/api/transactions.js"),y=t("../../libs/shared/dist/features/nfts/context/index.js"),w=t("../../libs/shared/dist/features/nfts/hooks/useNftRouting.js");const k=()=>{const{t:e}=(0,n.$)(),s=(0,r.NL)(),{goToGallery:t}=(0,w.p)(),{setIsTransferInProgress:o,setNftsToTransfer:d,setIsSendTransfer:l}=(0,y.$T)(),{transactionInit:c}=(0,j.p)(),{publicKey:k}=(0,_.rT)(),{upsertAddress:T}=(0,b.g)(),{getDestinationWalletType:S}=(0,m.q5)(),{cluster:I}=(0,h.LN)(),N=(0,a.useCallback)((({recipient:a,nfts:n,address:r,recipientGroup:f,recipientName:m})=>{const h=n.every((e=>e.group===n[0].group&&e.group));c({commitment:"confirmed",title:e("confirm_transaction_title"),useSignAndSend:g.go,txBuilder:v.MH,builderParams:{network:I,address:k,nfts:n?.map((e=>({tokenPubkey:e.tokenAccountPubkey||e.mint,mint:e.mint,decimals:e.decimals,isLastNft:e.isLastNft,uiAmount:e.amount,compressed:!!e.compressed,metaplexCore:!!e.metaplexCore})))||[],recipient:a,setComputeBudget:!0},ffLogFunction:p.tP,ffParams:{nftCount:n.length,dwt:S(a),destinationPickedFrom:x.XV[f??"MANUAL"]},onBroadcastAll:({successCount:e})=>{e>0&&(t(),o(!1),d([]),l(!0))},onConfirm:()=>{s.invalidateQueries(["nfts"]),T(a,m)},confirmDialog:(0,i.jsx)(u,{count:n.length,fromPubkey:k,toPubkey:a,toName:r,collectionName:h?n[0].subname:""})})}),[c,e,I,k,S,t,o,d,l,s,T]),C=(0,a.useCallback)((({recipient:a,nfts:n,address:r,recipientGroup:u,recipientName:m})=>{const{tokenAccountPubkey:h,mint:b,decimals:j,compressed:g,typeForPosthog:_,isLastNft:y,name:w,group:N,image:C,subname:F,amount:P,metaplexCore:L}=n[0];c({commitment:"confirmed",txBuilder:v.MH,title:e("confirm_transaction_title"),builderParams:{network:I,address:k,nfts:[{tokenPubkey:h||b,mint:b,decimals:j,compressed:!!g,isLastNft:y,uiAmount:P,metaplexCore:!!L}],recipient:a,setComputeBudget:!0},ffLogFunction:p.WG,ffParams:{nftType:_,dwt:S(a),destinationPickedFrom:x.XV[u??"MANUAL"]},onBroadcast:({status:e})=>{"success"===e&&(t(),o(!1),d([]),l(!0))},onConfirm:()=>{s.invalidateQueries(["nfts"]),T(a,m)},confirmDialog:(0,i.jsx)(f,{nftName:"scam"===N?void 0:w,nftImage:"scam"===N?void 0:C,fromPubkey:k,toPubkey:a,toName:r,nftCollection:F??""})})}),[c,e,I,k,S,t,o,d,l,s,T]);return{sendTransaction:(0,a.useCallback)((({nfts:e,recipient:s,address:t,recipientGroup:i="MANUAL",recipientName:a})=>e?.length?1===e.length?C({nfts:e,recipient:s,address:t,recipientGroup:i,recipientName:a}):void N({nfts:e,recipient:s,address:t,recipientGroup:i,recipientName:a}):[]),[N,C])}}},"../../libs/shared/dist/features/nfts/modals/index.js":(e,s,t)=>{t.d(s,{W:()=>N,e:()=>M});var i=t("../../../node_modules/react/jsx-runtime.js"),a=t("../../../node_modules/react/index.js"),n=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),o=t("../../../node_modules/bignumber.js/bignumber.mjs"),d=t("../../libs/foundation-ui/dist/index.js"),l=t("../../libs/shared/dist/assets/solana-logo-white.svg"),c=t("../../libs/shared/dist/assets/solana.png"),u=t("../../libs/shared/dist/hooks/index.js"),f=t("../../libs/shared/dist/hooks/useResizedImage.js"),m=t("../../libs/shared/dist/modals/index.js"),p=t("../../libs/shared/dist/utils/common.js"),h=t("../../libs/shared/dist/utils/displayPrice.js"),b=t("../../libs/shared/dist/utils/lamportToSol.js"),x=t("../../libs/shared/dist/features/currencies/hooks/index.js"),j=t("../../libs/shared/dist/features/portfolio/hooks/index.js"),g=t("../../libs/shared/dist/features/nfts/context/ListTutorial/index.js"),_=t("../../libs/shared/dist/features/nfts/hooks/index.js"),v=t("../../libs/shared/dist/features/nfts/queries/nftData.js"),y=t("../../../node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),w=t("../../libs/rise-ui/dist/index.js"),k=t("../../libs/shared/dist/assets/tensor.mp4"),T=t("../../libs/shared/dist/utils/extension.js");const S=(0,y.Z)(w.u_)({"& .MuiPaper-root":{padding:"0px",width:"auto",borderRadius:"20px"},"& .MuiDialogContent-root":{padding:"0px !important",borderRadius:"20px",overflow:"hidden"}}),I=({onClose:e})=>{const{t:s}=(0,n.$)(),t=(0,i.jsx)(d.WhatsNew,{title:s("nft_list_title"),onClose:e,steps:[{paragraph:s("nft_list_tensor_tutorial_subtitle"),videoSrc:k}],cta:{title:s("action_continue"),action:e}});return T.p1&&!T.Cy?(0,i.jsx)(d.PagePortal,{children:(0,i.jsx)(d.FullPageModal,{open:!0,children:t})}):(0,i.jsx)(S,{open:!0,fullScreen:!1,children:t})},N=({nft:e,onClose:s})=>{const{t}=(0,n.$)(),y=(0,x.Af)(),[w,k]=(0,a.useState)(""),T=(0,u.Nr)(w),{isLoading:S,data:{marketData:N}={}}=(0,v.c)(e.id,{enabled:!0}),{list:C,relist:F}=(0,_.vg)(),{isTutorialDisplayed:P,setTutorialAsDisplayed:L}=(0,g.b2)(),[A,D]=(0,a.useState)(!P),{data:E}=(0,j.Dm)(),{url:B}=(0,f.j)(e.image),R=(0,_.iN)({id:e.id,amount:T,editListing:e.listed,floorPrice:e.floor?.price});(0,a.useEffect)((()=>{L()}),[L]);const M=(0,a.useCallback)((e=>{let{value:s}=e.target;s=s.trim(),s.includes(",")&&(s=s.replace(",","."));const t=(0,p.T4)(s);"."!==s&&","!==s?(0,p.w9)(s,E?.decimals||9)&&t&&k(s):k("0.")}),[E?.decimals]),$=!S&&"error"!==R?.variant&&w===T&&Number(w)>0&&(!e.listed||(0,b.s)(e.listedPrice).toNumber()!==+w),G=Number(w)>0&&N?.lastSold?.amount?+w-N.lastSold.amount:null;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.V,{onClose:s,title:e.listed?t("nft_list_edit_title"):t("nft_list_title"),textAlign:"left",headerAction:(0,i.jsx)(d.ActionableIcon,{onClick:()=>D(!0),size:"l",icon:r.sqG}),footer:(0,i.jsxs)(i.Fragment,{children:[R&&(0,i.jsx)(d.Alert,{...R}),(0,i.jsx)(d.Button,{variant:"primary",disabled:!$,onClick:async t=>{t.preventDefault(),$&&(e.listed?await F(e,N,w):await C(e,N,w),s())},children:t("action_review")})]}),children:[(0,i.jsx)(d.SectionContainer,{children:(0,i.jsx)(d.NFTListItem,{avatarSrc:B,title:e.name,subtitle:e.groupName,children:e.listed&&(0,i.jsxs)(d.NFTListItemContentBase,{children:[(0,i.jsxs)(d.NFTListItemContentTitleContent,{children:[(0,i.jsx)(d.PriceSymbol,{size:"s",children:(0,i.jsx)("img",{src:l,alt:"Solana logo"})}),(0,i.jsx)(d.ListItemTitleText,{children:(0,h.ED)({amount:(0,b.s)(e.listedPrice).toString(),displayType:"solana"})})]}),(0,i.jsx)(d.SubtitleText,{children:t("nft_list_listed_listed_for")})]})})}),(0,i.jsx)(d.SendInput,{amount:w,onAmountChange:M,autoFocusAmount:!0,amountInputSize:"m",selectedToken:{tokenId:"-",symbol:"SOL",amount:"-",logoURI:c,verified:!0},id:"listingPrice",label:(0,i.jsx)(d.Label,{htmlFor:"listingPrice",children:t("nft_list_listing_price_label")}),tokens:[],value:E?.price&&Number(w)>0?(0,h.ED)({amount:new o.Z(w).times(E.price.price).toString(),prefix:y.symbol,displayType:"value"}):void 0,onSelectedTokenChange:()=>{},disabledTokenSelect:!0}),(0,i.jsxs)(d.InfoTable,{children:[(0,i.jsx)(d.InfoRow,{left:(0,i.jsxs)(d.InfoRowLeft,{children:[t("nft_list_floor_price_label"),(0,i.jsx)(d.InfoWithTooltip,{tooltip:t("nft_list_floor_price_tooltip")})]}),right:(0,i.jsx)(d.InfoRowRight,{children:(0,h.ED)({amount:e.floor?.price,displayType:"solana",suffix:" SOL"})})}),(!!N&&N.traitFloorPrice>0||S)&&(0,i.jsx)(d.InfoRow,{left:(0,i.jsxs)(d.InfoRowLeft,{children:[t("nft_list_trait_floor_price_label"),(0,i.jsx)(d.InfoWithTooltip,{tooltip:t("nft_list_trait_floor_price_tooltip")})]}),right:(0,i.jsx)(d.InfoRowRight,{isLoading:S,children:(0,h.ED)({amount:N?.traitFloorPrice||0,displayType:"solana",suffix:" SOL"})})}),(N?.lastSold&&N.lastSold?.amount>0||S)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.InfoRow,{left:N?.lastSold&&"MINT"===N?.lastSold.type?(0,i.jsxs)(d.InfoRowLeft,{children:[t("nft_list_mint_price_label"),(0,i.jsx)(d.InfoWithTooltip,{tooltip:t("nft_list_mint_price_tooltip")})]}):(0,i.jsxs)(d.InfoRowLeft,{children:[t("nft_list_bought_for_label"),(0,i.jsx)(d.InfoWithTooltip,{tooltip:t("nft_list_bought_for_tooltip")})]}),right:(0,i.jsx)(d.InfoRowRight,{isLoading:S,children:(0,h.ED)({amount:N?.lastSold?.amount||0,displayType:"solana",suffix:" SOL"})})}),(0,i.jsx)(d.InfoRow,{left:(0,i.jsxs)(d.InfoRowLeft,{children:[t("nft_list_total_return_label"),(0,i.jsx)(d.InfoWithTooltip,{tooltip:t("nft_list_total_return_tooltip")})]}),right:(0,i.jsx)(d.InfoRowRight,{children:null!==G?(0,h.ED)({amount:G,displayType:"solana",suffix:" SOL",prefix:G>0?"+":""}):"-"})})]})]})]}),A&&(0,i.jsx)(I,{onClose:()=>D(!1)})]})};var C=t("../../../node_modules/@fortawesome/pro-solid-svg-icons/index.mjs"),F=t("../../libs/wallet-core/dist/shared.js"),P=t("../../libs/shared/dist/utils/truncateMiddle.js"),L=t("../../libs/shared/dist/features/recipientInput/components/index.js"),A=t("../../libs/shared/dist/features/recipientInput/context/index.js"),D=t("../../libs/shared/dist/features/walletData/hooks/index.js"),E=t("../../libs/shared/dist/features/nfts/context/index.js"),B=t("../../libs/shared/dist/features/nfts/hooks/useNftSend.js");const R=(0,y.Z)("div")((()=>({maxHeight:220,overflowY:"auto",overflowX:"hidden"}))),M=()=>{const{t:e}=(0,n.$)(),{sendTransaction:s}=(0,B.b)(),{walletType:t}=(0,D.rT)(),{selectedRecipient:r,saveAddressChecked:o,saveAddress:l}=(0,A.x)(!1),{setIsTransferInProgress:c,nftsToTransfer:u,setNftsToTransfer:f}=(0,E.$T)(),[h,b]=(0,a.useState)("1"),x=(0,a.useMemo)((()=>u||[]),[u]),j=(0,a.useMemo)((()=>1===x.length&&x[0].amount>0&&1!==x[0].amount),[x]),{alertProps:g,isLoading:v}=(0,_.Zn)({nfts:x,recipient:r,amount:h,showAmountInput:j}),y=!!g&&"error"===g.variant,w=y||j&&!+h||!r||v;(0,a.useEffect)((()=>{1===x.length&&b(String(x[0].amount))}),[x]);const k=(0,a.useCallback)((e=>{let{value:s}=e.target;s=s.trim(),s.includes(",")&&(s=s.replace(",","."));const t=(0,p.T4)(s);"."!==s&&","!==s?(0,p.w9)(s,x[0]?.decimals||0)&&t&&b(s):b("0.")}),[x]),S=(0,a.useCallback)((e=>{f((s=>s.filter((s=>s.mint!==e))))}),[f]),I=(t===F.pe||t===F.x4)&&x.length>1,N=T.UJ?"div":R,M=e=>"scam"===e.group?(0,i.jsx)(d.IconAvatar,{variant:"square",icon:C.xHz,background:"error"}):(0,i.jsx)(d.NFTAvatar,{src:e.image}),$=e=>{switch(e.group){case"scam":return"Blocklist";case"suspicious":return"Unverified";default:return e.subname}};return(0,i.jsx)(m.V,{onClose:()=>c(!1),title:e("action_send"),textAlign:"left",footerProps:{variant:"fixed"},footer:(0,i.jsxs)(i.Fragment,{children:[g&&(0,i.jsx)(d.Alert,{...g,fixed:T.UJ}),I&&!y&&(0,i.jsx)(d.Alert,{title:e("validation_multiple_signatures_required"),message:e("validation_multiple_signatures_description"),variant:"info",fixed:T.UJ}),(0,i.jsx)(d.Button,{disabled:w,onClick:async()=>{const e=parseFloat(h);if(!r||j&&!e)return!1;if(o&&!await l())return!1;const t=r.address,i=r.name??(0,P.r)(t);if(1===x.length){const a="SAVED"!==r.group?r.name:r.subtitle;s({nfts:[{...x[0],isLastNft:+e==+x[0].amount,amount:e}],recipient:t,address:i,recipientGroup:r.group,recipientName:a})}else s({nfts:x,recipient:t,address:i,recipientGroup:r.group,recipientName:"SAVED"!==r.group?r.name:r.subtitle})},children:e("action_send")})]}),children:(0,i.jsxs)(d.NFTSendContent,{children:[(0,i.jsx)(L.T,{hasErrors:y}),1===x.length?(0,i.jsx)(d.SectionContainer,{title:(0,i.jsx)(d.SectionTitle,{title:e("table_collectible")}),children:(0,i.jsx)(d.CollectibleListItem,{spacingX:"narrow",height:"narrow",avatar:M(x[0]),title:x[0].name,subtitle:$(x[0])},x[0].mint)}):(0,i.jsx)(d.NFTSendContentList,{title:(0,i.jsx)(d.SectionTitle,{title:e("table_collectible")}),children:(0,i.jsx)(N,{children:(0,i.jsx)(d.GeneralList,{data:x,renderItem:e=>(0,i.jsx)(d.CollectibleListItem,{avatar:M(e),title:e.name,subtitle:$(e),onClose:()=>S(e.mint),value:e.amount?String(e.amount):void 0}),extractKey:e=>e.mint})})}),j&&(0,i.jsx)(d.FormField,{label:(0,i.jsx)(d.Label,{children:e("form_amount")}),rightLabel:(0,i.jsx)(d.RightLabel,{onClick:()=>b(String(x[0].amount)),children:e("form_max_amount",{amount:x[0].amount})}),children:(0,i.jsx)(d.TextInput,{value:h,onChange:k,onBlur:()=>b((e=>e?(0,p.iP)(e,x[0].decimals??0):e)),textAlign:"right"})})]})})}},"../../libs/shared/dist/features/nfts/queries/nftData.js":(e,s,t)=>{t.d(s,{c:()=>d});var i=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),a=t("../../libs/shared/dist/features/currencies/hooks/index.js"),n=t("../../libs/shared/dist/features/globalConfig/hooks/index.js"),r=t("../../libs/shared/dist/features/walletData/hooks/index.js"),o=t("../../libs/shared/dist/features/nfts/api/nfts.js");const d=(e,{enabled:s=!0}={})=>{const t=(0,n.LN)(),d=(0,a.Af)(),{publicKey:l}=(0,r.rT)();return(0,i.a)(["nft-data",e,l,t.cluster,d.ticker],(async()=>(0,o.H_)(l,e,t.cluster,d.ticker)),{enabled:s,refetchInterval:3e4})}},"../../libs/shared/dist/assets/InfoScreen/JupiterSwap/jupiter-swap-1.mp4":(e,s,t)=>{e.exports=t.p+"assets/jupiter-swap-1.b77d2807..mp4"},"../../libs/shared/dist/assets/InfoScreen/JupiterSwap/jupiter-swap-2.mp4":(e,s,t)=>{e.exports=t.p+"assets/jupiter-swap-2.1235e60f..mp4"},"../../libs/shared/dist/assets/InfoScreen/UnverifiedNftGuide/unverified-nft-guide-1.mp4":(e,s,t)=>{e.exports=t.p+"assets/unverified-nft-guide-1.aef0a6cb..mp4"},"../../libs/shared/dist/assets/InfoScreen/UnverifiedNftGuide/unverified-nft-guide-2.mp4":(e,s,t)=>{e.exports=t.p+"assets/unverified-nft-guide-2.dd5f2772..mp4"},"../../libs/shared/dist/assets/InfoScreen/UnverifiedNftGuide/unverified-nft-guide-3.mp4":(e,s,t)=>{e.exports=t.p+"assets/unverified-nft-guide-3.3df1ef89..mp4"},"../../libs/shared/dist/assets/InfoScreen/UnverifiedNftGuide/unverified-nft-guide-4.mp4":(e,s,t)=>{e.exports=t.p+"assets/unverified-nft-guide-4.effaa66e..mp4"},"../../libs/shared/dist/assets/solana-logo-grey.svg":(e,s,t)=>{e.exports=t.p+"assets/solana-logo-grey.fc212baf..svg"},"../../libs/shared/dist/assets/tensor.mp4":(e,s,t)=>{e.exports=t.p+"assets/tensor.9eb38e71..mp4"},"../../libs/shared/dist/assets/tensor.png":(e,s,t)=>{e.exports=t.p+"assets/tensor.60276766..png"}}]);