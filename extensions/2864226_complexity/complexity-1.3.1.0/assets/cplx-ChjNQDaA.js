import{r as p}from"./cplx-M4JPizzD.js";import{j as t,t as G,C as lt,B as ot,c as L,g as Q,L as Ot,E as Dt,F as Rt}from"./cplx-DEt7CUyc.js";import{a1 as it,a2 as _t,a3 as Ft,G as Me,a4 as Ve,a5 as Ht,e as Vt,a6 as qt,p as zt,r as Ut,a7 as $t,b as Wt}from"./cplx-CejnDNPm.js";import{L as z,I as O}from"./cplx-OhnDHSjW.js";import{P as H,B as T,I as k,U as Gt,H as qe}from"./cplx-CCGYIZQf.js";import{a as M,c as Kt,b as be}from"./cplx-AFeO3sEC.js";import{P as Qt,R as Zt,u as dt}from"./cplx-E1EP-vVk.js";import{D as Z,g as ie,a as Y,b as X,e as de,f as ne,c as ce,d as Le}from"./cplx-BsCYqTWz.js";import{S as Yt,a as Xt}from"./cplx-DSxkwD9v.js";import{I as E}from"./cplx-3dJoKO85.js";import{S as h}from"./cplx-b9fF-OTI.js";import{u as v}from"./cplx-BA4LeNkX.js";import{d as ue,e as Jt,b as ea}from"./cplx-CzQHx1MX.js";import{K as ct}from"./cplx-COgv5RYR.js";import{b as ve,c as je,d as ye,e as Ce,S as Ne,a as Te}from"./cplx-DLB-E6VW.js";import{u as Ie}from"./cplx-B42KOvrD.js";import{T as ut,b as mt,c as re,a as se}from"./cplx-rYRypPy0.js";import{u as ke}from"./cplx-CgmVhoKz.js";import{T as $}from"./cplx-Cqfmi6PF.js";import{g as Se,b as W}from"./cplx-CIDXzIHh.js";import{q as Pe,K as U,$ as ta,a3 as aa,a4 as na,a5 as ra,k as sa,a6 as la,A as oa,a7 as ia,x as da,z as ca,w as ua,D as Be,a8 as me}from"./cplx-CVsLL7Ku.js";import{a as ma,u as ha}from"./cplx-Mn-h5XDX.js";import{c as ht,m as R,b as _,q as xa,s as wa,ac as ga,ar as fa,as as xt,v as wt,C as b,a1 as pa,at as ba,$ as va,au as ja,an as ya,al as Ca,t as Na,u as Ta,av as ka,r as Sa,aw as Oe,Y as he,ax as Pa,ay as Ea,az as De,aA as Aa,aB as Ma,aC as La,aD as Ee,w as Ia,x as Ba,y as xe,z as Oa,A as Da,a as gt}from"./cplx-CXGk_GMP.js";import{d as Ra,t as _a}from"./cplx-D9K5ecXe.js";import{a as we}from"./cplx-SsoyhRxE.js";import{b as ft}from"./cplx-BqwXc_LR.js";import{d as Fa}from"./cplx-DewpVJ-0.js";import{B as Ha}from"./cplx-D1YT3uoP.js";import{C as Va,a as qa,b as za,c as Ua,d as $a,e as Wa}from"./cplx-C1UhgCtl.js";import{D as Ga,a as Ka,b as Qa,c as Za}from"./cplx-D6x2E8AM.js";import{w as Ya}from"./cplx-Cdcyb6EG.js";import{g as Xa}from"./cplx-BbAh7E-i.js";import{c as Ja,e as en,C as tn}from"./cplx-C7vqVxs5.js";import{b as an,c as nn,a as rn}from"./cplx-gki37G4r.js";import"./cplx-2ekRUlSR.js";import"./cplx-DSnlyBAv.js";import"./cplx-CCS6eJc0.js";import"./cplx-C-SYgQKx.js";import"./cplx-B19A3gYQ.js";import"./cplx-km2FGkQ4.js";import"./cplx-D37zsf-y.js";const[sn,F]=ht({name:"SliderContext",hookName:"useSliderContext",providerName:"<SliderProvider />"}),ln=e=>e.children(F()),pt=p.forwardRef((e,n)=>{const a=F(),r=R(a.getControlProps(),e);return t.jsx(_.div,{...r,ref:n})});pt.displayName="SliderControl";const[on,dn]=ht({name:"SliderThumbPropsContext",hookName:"useSliderThumbPropsContext",providerName:"<SliderThumbPropsProvider />"}),bt=p.forwardRef((e,n)=>{const a=F(),r=dn(),l=R(a.getHiddenInputProps(r),e);return t.jsx(_.input,{...l,ref:n})});bt.displayName="SliderHiddenInput";const vt=p.forwardRef((e,n)=>{const a=F(),r=R(a.getLabelProps(),e);return t.jsx(_.label,{...r,ref:n})});vt.displayName="SliderLabel";const jt=p.forwardRef((e,n)=>{const a=F(),r=R(a.getRangeProps(),e);return t.jsx(_.div,{...r,ref:n})});jt.displayName="SliderRange";function cn(e,n){if(!e){n(void 0);return}n({width:e.offsetWidth,height:e.offsetHeight});const a=e.ownerDocument.defaultView??window,r=new a.ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const[s]=l;let o,d;if("borderBoxSize"in s){const i=s.borderBoxSize,c=Array.isArray(i)?i[0]:i;o=c.inlineSize,d=c.blockSize}else o=e.offsetWidth,d=e.offsetHeight;n({width:o,height:d})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}function un(e){const{getNodes:n,observeMutation:a=!0,callback:r}=e,l=[];let s=null;function o(){const d=n();s=d[0];const i=d.map((c,w)=>cn(c,g=>{r(g,w)}));l.push(...i)}if(o(),a){const d=mn(s,o);l.push(d)}return()=>{l.forEach(d=>{d==null||d()})}}function mn(e,n){var l;if(!e||!e.parentElement)return;const a=((l=e.ownerDocument)==null?void 0:l.defaultView)??window,r=new a.MutationObserver(()=>{n()});return r.observe(e.parentElement,{childList:!0}),()=>{r.disconnect()}}var hn=xa("slider").parts("root","label","thumb","valueText","track","range","control","markerGroup","marker","draggingIndicator"),A=hn.build();function xn(e){const n=e[0],a=e[e.length-1];return[n,a]}function wn(e){const[n,a]=xn(e.valuePercent);if(e.valuePercent.length===1){if(e.origin==="center"){const r=e.valuePercent[0]<50,l=r?`${e.valuePercent[0]}%`:"50%",s=r?"50%":`${100-e.valuePercent[0]}%`;return{start:l,end:s}}return{start:"0%",end:`${100-a}%`}}return{start:`${n}%`,end:`${100-a}%`}}function gn(e){return e.isVertical?{position:"absolute",bottom:"var(--slider-range-start)",top:"var(--slider-range-end)"}:{position:"absolute",[e.isRtl?"right":"left"]:"var(--slider-range-start)",[e.isRtl?"left":"right"]:"var(--slider-range-end)"}}function fn(e){const{height:n=0}=e.thumbSize??{},a=Ee([e.min,e.max],[-n/2,n/2]);return parseFloat(a(e.value).toFixed(2))}function pn(e){const{width:n=0}=e.thumbSize??{};if(e.isRtl){const r=Ee([e.max,e.min],[-n/2,n/2]);return-1*parseFloat(r(e.value).toFixed(2))}const a=Ee([e.min,e.max],[-n/2,n/2]);return parseFloat(a(e.value).toFixed(2))}function bn(e,n){if(e.thumbAlignment==="center")return`${n}%`;const a=e.isVertical?fn(e):pn(e);return`calc(${n}% - ${a}px)`}function yt(e){let n=Oe(e.value,e.min,e.max)*100;return bn(e,n)}function Ct(e){let n="visible";return e.thumbAlignment==="contain"&&!e.hasMeasuredThumbSize&&(n="hidden"),n}function vn(e,n){const a=e.isVertical?"bottom":"insetInlineStart";return{visibility:Ct(e),position:"absolute",transform:"var(--slider-thumb-transform)",[a]:`var(--slider-thumb-offset-${n})`}}function jn(){return{touchAction:"none",userSelect:"none",WebkitUserSelect:"none",position:"relative"}}function yn(e){const n=wn(e);return{...e.value.reduce((r,l,s)=>{const o=yt({...e,value:l});return{...r,[`--slider-thumb-offset-${s}`]:o}},{}),"--slider-thumb-transform":e.isVertical?"translateY(50%)":e.isRtl?"translateX(50%)":"translateX(-50%)","--slider-range-start":n.start,"--slider-range-end":n.end}}function Cn(e,n){return{visibility:Ct(e),position:"absolute",pointerEvents:"none",[e.isHorizontal?"insetInlineStart":"bottom"]:yt({...e,value:n}),translate:"var(--tx) var(--ty)","--tx":e.isHorizontal?e.isRtl?"50%":"-50%":"0%","--ty":e.isHorizontal?"0%":"50%"}}function Nn(){return{userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none",position:"relative"}}var Tn={getRootStyle:yn,getControlStyle:jn,getThumbStyle:vn,getRangeStyle:gn,getMarkerStyle:Cn,getMarkerGroupStyle:Nn},x=wa({...Tn,getRootId:e=>{var n;return((n=e.ids)==null?void 0:n.root)??`slider:${e.id}`},getThumbId:(e,n)=>{var a,r;return((r=(a=e.ids)==null?void 0:a.thumb)==null?void 0:r.call(a,n))??`slider:${e.id}:thumb:${n}`},getHiddenInputId:(e,n)=>{var a,r;return((r=(a=e.ids)==null?void 0:a.hiddenInput)==null?void 0:r.call(a,n))??`slider:${e.id}:input:${n}`},getControlId:e=>{var n;return((n=e.ids)==null?void 0:n.control)??`slider:${e.id}:control`},getTrackId:e=>{var n;return((n=e.ids)==null?void 0:n.track)??`slider:${e.id}:track`},getRangeId:e=>{var n;return((n=e.ids)==null?void 0:n.range)??`slider:${e.id}:range`},getLabelId:e=>{var n;return((n=e.ids)==null?void 0:n.label)??`slider:${e.id}:label`},getValueTextId:e=>{var n;return((n=e.ids)==null?void 0:n.valueText)??`slider:${e.id}:value-text`},getMarkerId:(e,n)=>{var a,r;return((r=(a=e.ids)==null?void 0:a.marker)==null?void 0:r.call(a,n))??`slider:${e.id}:marker:${n}`},getRootEl:e=>x.getById(e,x.getRootId(e)),getThumbEl:(e,n)=>x.getById(e,x.getThumbId(e,n)),getHiddenInputEl:(e,n)=>x.getById(e,x.getHiddenInputId(e,n)),getControlEl:e=>x.getById(e,x.getControlId(e)),getElements:e=>ga(x.getControlEl(e),"[role=slider]"),getFirstEl:e=>x.getElements(e)[0],getRangeEl:e=>x.getById(e,x.getRangeId(e)),getValueFromPoint(e,n){const a=x.getControlEl(e);if(!a)return;const l=fa(n,a).getPercentValue({orientation:e.orientation,dir:e.dir,inverted:{y:!0}});return xt(l,e.min,e.max,e.step)},dispatchChangeEvent(e){Array.from(e.value).forEach((a,r)=>{const l=x.getHiddenInputEl(e,r);l&&Ra(l,{value:a})})}});function ze(e,n){return n.map((a,r,l)=>Ae({...e,value:l},a,r))}function D(e,n){return Pa(e.value,e.min,e.max,e.minStepsBetweenThumbs)[n]}function Ae(e,n,a){const r=D(e,a),l=Ea(n,e.min,e.max,e.step);return De(l,r.min,r.max)}function kn(e,n,a){const r=n??e.focusedIndex,l=D(e,r),s=Aa(r,{...l,step:a??e.step,values:e.value});return s[r]=De(s[r],l.min,l.max),s}function Sn(e,n,a){const r=n??e.focusedIndex,l=D(e,r),s=Ma(r,{...l,step:a??e.step,values:e.value});return s[r]=De(s[r],l.min,l.max),s}function Pn(e,n){return La(e.value,n)}function En(e,n){for(let a=0;a<n.length;a++){const r=n[a];e[a]=r}}function An(e,n,a){const r=e.context["aria-label"],l=e.context["aria-labelledby"],s=e.context.value,o=e.matches("focus"),d=e.matches("dragging"),i=e.context.isDisabled,c=e.context.invalid,w=e.context.isInteractive,g=e.context.orientation==="horizontal",j=e.context.orientation==="vertical";function C(m){return Oe(m,e.context.min,e.context.max)}function y(m){return xt(m,e.context.min,e.context.max,e.context.step)}return{value:e.context.value,dragging:d,focused:o,setValue(m){n({type:"SET_VALUE",value:m})},getThumbValue(m){return s[m]},setThumbValue(m,u){n({type:"SET_VALUE",index:m,value:u})},getValuePercent:C,getPercentValue:y,getThumbPercent(m){return C(s[m])},setThumbPercent(m,u){const f=y(u);n({type:"SET_VALUE",index:m,value:f})},getThumbMin(m){return D(e.context,m).min},getThumbMax(m){return D(e.context,m).max},increment(m){n({type:"INCREMENT",index:m})},decrement(m){n({type:"DECREMENT",index:m})},focus(){w&&n({type:"FOCUS",index:0})},getLabelProps(){return a.label({...A.label.attrs,dir:e.context.dir,"data-disabled":b(i),"data-orientation":e.context.orientation,"data-invalid":b(c),"data-dragging":b(d),"data-focus":b(o),id:x.getLabelId(e.context),htmlFor:x.getHiddenInputId(e.context,0),onClick(m){var u;w&&(m.preventDefault(),(u=x.getFirstEl(e.context))==null||u.focus())},style:{userSelect:"none",WebkitUserSelect:"none"}})},getRootProps(){return a.element({...A.root.attrs,"data-disabled":b(i),"data-orientation":e.context.orientation,"data-dragging":b(d),"data-invalid":b(c),"data-focus":b(o),id:x.getRootId(e.context),dir:e.context.dir,style:x.getRootStyle(e.context)})},getValueTextProps(){return a.element({...A.valueText.attrs,dir:e.context.dir,"data-disabled":b(i),"data-orientation":e.context.orientation,"data-invalid":b(c),"data-focus":b(o),id:x.getValueTextId(e.context)})},getTrackProps(){return a.element({...A.track.attrs,dir:e.context.dir,id:x.getTrackId(e.context),"data-disabled":b(i),"data-invalid":b(c),"data-dragging":b(d),"data-orientation":e.context.orientation,"data-focus":b(o),style:{position:"relative"}})},getThumbProps(m){var _e,Fe;const{index:u=0,name:f}=m,N=s[u],P=D(e.context,u),I=(Fe=(_e=e.context).getAriaValueText)==null?void 0:Fe.call(_e,{value:N,index:u}),V=Array.isArray(r)?r[u]:r,Lt=Array.isArray(l)?l[u]:l;return a.element({...A.thumb.attrs,dir:e.context.dir,"data-index":u,"data-name":f,id:x.getThumbId(e.context,u),"data-disabled":b(i),"data-orientation":e.context.orientation,"data-focus":b(o&&e.context.focusedIndex===u),"data-dragging":b(d&&e.context.focusedIndex===u),draggable:!1,"aria-disabled":pa(i),"aria-label":V,"aria-labelledby":Lt??x.getLabelId(e.context),"aria-orientation":e.context.orientation,"aria-valuemax":P.max,"aria-valuemin":P.min,"aria-valuenow":s[u],"aria-valuetext":I,role:"slider",tabIndex:i?void 0:0,style:x.getThumbStyle(e.context,u),onPointerDown(B){w&&(n({type:"THUMB_POINTER_DOWN",index:u}),B.stopPropagation())},onBlur(){w&&n("BLUR")},onFocus(){w&&n({type:"FOCUS",index:u})},onKeyDown(B){if(B.defaultPrevented||!w)return;const q=ba(B)*e.context.step,It={ArrowUp(){g||n({type:"ARROW_INC",step:q,src:"ArrowUp"})},ArrowDown(){g||n({type:"ARROW_DEC",step:q,src:"ArrowDown"})},ArrowLeft(){j||n({type:"ARROW_DEC",step:q,src:"ArrowLeft"})},ArrowRight(){j||n({type:"ARROW_INC",step:q,src:"ArrowRight"})},PageUp(){n({type:"ARROW_INC",step:q,src:"PageUp"})},PageDown(){n({type:"ARROW_DEC",step:q,src:"PageDown"})},Home(){n("HOME")},End(){n("END")}},Bt=va(B,e.context),He=It[Bt];He&&(He(B),B.preventDefault(),B.stopPropagation())}})},getHiddenInputProps(m){const{index:u=0,name:f}=m;return a.input({name:f??(e.context.name?e.context.name+(e.context.value.length>1?"[]":""):void 0),form:e.context.form,type:"text",hidden:!0,defaultValue:e.context.value[u],id:x.getHiddenInputId(e.context,u)})},getRangeProps(){return a.element({id:x.getRangeId(e.context),...A.range.attrs,dir:e.context.dir,"data-dragging":b(d),"data-focus":b(o),"data-invalid":b(c),"data-disabled":b(i),"data-orientation":e.context.orientation,style:x.getRangeStyle(e.context)})},getControlProps(){return a.element({...A.control.attrs,dir:e.context.dir,id:x.getControlId(e.context),"data-dragging":b(d),"data-disabled":b(i),"data-orientation":e.context.orientation,"data-invalid":b(c),"data-focus":b(o),style:x.getControlStyle(),onPointerDown(m){if(!w||!ja(m)||ya(m))return;const u=Ca(m);n({type:"POINTER_DOWN",point:u}),m.preventDefault(),m.stopPropagation()}})},getMarkerGroupProps(){return a.element({...A.markerGroup.attrs,role:"presentation",dir:e.context.dir,"aria-hidden":!0,"data-orientation":e.context.orientation,style:x.getMarkerGroupStyle()})},getMarkerProps(m){const u=x.getMarkerStyle(e.context,m.value);let f;const N=e.context.value[0],P=e.context.value[e.context.value.length-1];return m.value<N?f="under-value":m.value>P?f="over-value":f="at-value",a.element({...A.marker.attrs,id:x.getMarkerId(e.context,m.value),role:"presentation",dir:e.context.dir,"data-orientation":e.context.orientation,"data-value":m.value,"data-disabled":b(i),"data-state":f,style:u})},getDraggingIndicatorProps(m){const{index:u=0}=m,f=u===e.context.focusedIndex&&d;return a.element({...A.draggingIndicator.attrs,role:"presentation",dir:e.context.dir,hidden:!f,"data-orientation":e.context.orientation,"data-state":f?"open":"closed",style:x.getThumbStyle(e.context,u)})}}}var Mn=(e,n)=>(e==null?void 0:e.width)===(n==null?void 0:n.width)&&(e==null?void 0:e.height)===(n==null?void 0:n.height);function Ln(e){const n=Na(e);return Ta({id:"slider",initial:"idle",context:{thumbSize:null,thumbAlignment:"contain",min:0,max:100,step:1,value:[0],origin:"start",orientation:"horizontal",dir:"ltr",minStepsBetweenThumbs:0,disabled:!1,readOnly:!1,...n,focusedIndex:-1,fieldsetDisabled:!1},computed:{isHorizontal:a=>a.orientation==="horizontal",isVertical:a=>a.orientation==="vertical",isRtl:a=>a.orientation==="horizontal"&&a.dir==="rtl",isDisabled:a=>!!a.disabled||a.fieldsetDisabled,isInteractive:a=>!(a.readOnly||a.isDisabled),hasMeasuredThumbSize:a=>a.thumbSize!=null,valuePercent(a){return a.value.map(r=>100*Oe(r,a.min,a.max))}},watch:{value:["syncInputElements"]},entry:["coarseValue"],activities:["trackFormControlState","trackThumbsSize"],on:{SET_VALUE:[{guard:"hasIndex",actions:"setValueAtIndex"},{actions:"setValue"}],INCREMENT:{actions:"incrementThumbAtIndex"},DECREMENT:{actions:"decrementThumbAtIndex"}},states:{idle:{on:{POINTER_DOWN:{target:"dragging",actions:["setClosestThumbIndex","setPointerValue","focusActiveThumb"]},FOCUS:{target:"focus",actions:"setFocusedIndex"},THUMB_POINTER_DOWN:{target:"dragging",actions:["setFocusedIndex","focusActiveThumb"]}}},focus:{entry:"focusActiveThumb",on:{POINTER_DOWN:{target:"dragging",actions:["setClosestThumbIndex","setPointerValue","focusActiveThumb"]},THUMB_POINTER_DOWN:{target:"dragging",actions:["setFocusedIndex","focusActiveThumb"]},ARROW_DEC:{actions:["decrementThumbAtIndex","invokeOnChangeEnd"]},ARROW_INC:{actions:["incrementThumbAtIndex","invokeOnChangeEnd"]},HOME:{actions:["setFocusedThumbToMin","invokeOnChangeEnd"]},END:{actions:["setFocusedThumbToMax","invokeOnChangeEnd"]},BLUR:{target:"idle",actions:"clearFocusedIndex"}}},dragging:{entry:"focusActiveThumb",activities:"trackPointerMove",on:{POINTER_UP:{target:"focus",actions:"invokeOnChangeEnd"},POINTER_MOVE:{actions:"setPointerValue"}}}}},{guards:{hasIndex:(a,r)=>r.index!=null},activities:{trackFormControlState(a,r,{initialContext:l}){return _a(x.getRootEl(a),{onFieldsetDisabledChange(s){a.fieldsetDisabled=s},onFormReset(){S.value(a,l.value)}})},trackPointerMove(a,r,{send:l}){return ka(x.getDoc(a),{onPointerMove(s){l({type:"POINTER_MOVE",point:s.point})},onPointerUp(){l("POINTER_UP")}})},trackThumbsSize(a){if(!(a.thumbAlignment!=="contain"||a.thumbSize))return un({getNodes:()=>x.getElements(a),observeMutation:!0,callback(r){!r||Mn(a.thumbSize,r)||(a.thumbSize=r)}})}},actions:{syncInputElements(a){a.value.forEach((r,l)=>{const s=x.getHiddenInputEl(a,l);x.setValue(s,r)})},invokeOnChangeEnd(a){ae.valueChangeEnd(a)},setClosestThumbIndex(a,r){const l=x.getValueFromPoint(a,r.point);if(l==null)return;const s=Pn(a,l);S.focusedIndex(a,s)},setFocusedIndex(a,r){S.focusedIndex(a,r.index)},clearFocusedIndex(a){S.focusedIndex(a,-1)},setPointerValue(a,r){const l=x.getValueFromPoint(a,r.point);if(l==null)return;const s=Ae(a,l,a.focusedIndex);S.valueAtIndex(a,a.focusedIndex,s)},focusActiveThumb(a){Sa(()=>{const r=x.getThumbEl(a,a.focusedIndex);r==null||r.focus({preventScroll:!0})})},decrementThumbAtIndex(a,r){const l=kn(a,r.index,r.step);S.value(a,l)},incrementThumbAtIndex(a,r){const l=Sn(a,r.index,r.step);S.value(a,l)},setFocusedThumbToMin(a){const{min:r}=D(a,a.focusedIndex);S.valueAtIndex(a,a.focusedIndex,r)},setFocusedThumbToMax(a){const{max:r}=D(a,a.focusedIndex);S.valueAtIndex(a,a.focusedIndex,r)},coarseValue(a){const r=ze(a,a.value);S.value(a,r)},setValueAtIndex(a,r){const l=Ae(a,r.value,r.index);S.valueAtIndex(a,r.index,l)},setValue(a,r){const l=ze(a,r.value);S.value(a,l)}}})}var ae={valueChange(e){var n;(n=e.onValueChange)==null||n.call(e,{value:Array.from(e.value)}),x.dispatchChangeEvent(e)},valueChangeEnd(e){var n;(n=e.onValueChangeEnd)==null||n.call(e,{value:Array.from(e.value)})},focusChange(e){var n;(n=e.onFocusChange)==null||n.call(e,{value:Array.from(e.value),focusedIndex:e.focusedIndex})}},S={valueAtIndex:(e,n,a)=>{he(e.value[n],a)||(e.value[n]=a,ae.valueChange(e))},value:(e,n)=>{he(e.value,n)||(En(e.value,n),ae.valueChange(e))},focusedIndex:(e,n)=>{he(e.focusedIndex,n)||(e.focusedIndex=n,ae.focusChange(e))}};wt()(["aria-label","aria-labelledby","dir","disabled","form","getAriaValueText","getRootNode","id","ids","invalid","max","min","minStepsBetweenThumbs","name","onFocusChange","onValueChange","onValueChangeEnd","orientation","origin","readOnly","step","thumbAlignment","thumbAlignment","thumbSize","value"]);wt()(["index","name"]);const In=(e={})=>{const{getRootNode:n}=Ia(),{dir:a}=Ba(),r={id:p.useId(),dir:a,getRootNode:n,value:e.defaultValue,...e},l={...r,value:e.value,onValueChange:xe(e.onValueChange,{sync:!0}),onValueChangeEnd:xe(e.onValueChangeEnd),onFocusChange:xe(e.onFocusChange)},[s,o]=Oa(Ln(r),{context:l});return An(s,o,Da)},Nt=p.forwardRef((e,n)=>{const[a,r]=gt()(e,["aria-label","aria-labelledby","defaultValue","disabled","form","getAriaValueText","id","ids","invalid","max","min","minStepsBetweenThumbs","name","onFocusChange","onValueChange","onValueChangeEnd","orientation","origin","readOnly","step","thumbAlignment","thumbAlignment","thumbSize","value"]),l=In(a),s=R(l.getRootProps(),r);return t.jsx(sn,{value:l,children:t.jsx(_.div,{...s,ref:n})})});Nt.displayName="SliderRoot";const Tt=p.forwardRef((e,n)=>{const[a,r]=gt()(e,["index","name"]),l=F(),s=R(l.getThumbProps(a),r);return t.jsx(on,{value:a,children:t.jsx(_.div,{...s,ref:n})})});Tt.displayName="SliderThumb";const kt=p.forwardRef((e,n)=>{const a=F(),r=R(a.getTrackProps(),e);return t.jsx(_.div,{...r,ref:n})});kt.displayName="SliderTrack";const St=p.forwardRef((e,n)=>{const{children:a,...r}=e,l=F(),s=R(l.getValueTextProps(),r);return t.jsx(_.span,{...s,ref:n,children:a||l.value.join(", ")})});St.displayName="SliderValueText";function Bn(){const{settings:e,mutation:n}=v(),a=p.useCallback(r=>({checked:l})=>n.mutate(s=>{s.plugins["thread:betterMessageToolbars"][r]=l}),[n]);return t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-4 tw-overflow-y-auto",children:[t.jsx("div",{className:"tw-flex tw-flex-col tw-gap-2",children:"Useful tweaks to make the toolbar more compact and easier to use."}),t.jsx(h,{textLabel:"Enable",checked:e==null?void 0:e.plugins["thread:betterMessageToolbars"].enabled,onCheckedChange:a("enabled")}),(e==null?void 0:e.plugins["thread:betterMessageToolbars"].enabled)&&t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-2",children:[t.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:"Options"}),t.jsx(h,{className:"tw-items-start",textLabel:t.jsxs("div",{children:[t.jsx("div",{children:"Stick to top"}),t.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:"Always keep the toolbar visible at the top of the page when scrolling"})]}),checked:e==null?void 0:e.plugins["thread:betterMessageToolbars"].sticky,onCheckedChange:a("sticky")}),t.jsx(h,{className:"tw-items-start",textLabel:t.jsxs("div",{children:[t.jsx("div",{children:"Simplify Rewrite Dropdown Menu"}),t.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:"Hide model's description (only for desktop)"})]}),checked:e==null?void 0:e.plugins["thread:betterMessageToolbars"].simplifyRewriteDropdown,onCheckedChange:a("simplifyRewriteDropdown")}),t.jsx(h,{className:"tw-items-start",textLabel:t.jsxs("div",{children:[t.jsx("div",{children:"Hide Unnecessary Buttons"}),t.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:"Hide Share, Thumbs Up/Down buttons"})]}),checked:e==null?void 0:e.plugins["thread:betterMessageToolbars"].hideUnnecessaryButtons,onCheckedChange:a("hideUnnecessaryButtons")}),t.jsx(h,{className:"tw-items-start",textLabel:t.jsxs("div",{children:[t.jsx("div",{children:"Explicit Model Name"}),t.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:"Show the model name without hovering"})]}),checked:e==null?void 0:e.plugins["thread:betterMessageToolbars"].explicitModelName,onCheckedChange:a("explicitModelName")}),t.jsx(h,{className:"tw-items-start",textLabel:t.jsxs("div",{children:[t.jsx("div",{children:"Word and Character Count"}),t.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:"Show words and characters count"})]}),checked:e==null?void 0:e.plugins["thread:betterMessageToolbars"].wordsAndCharactersCount,onCheckedChange:a("wordsAndCharactersCount")}),e.plugins["thread:betterMessageToolbars"].wordsAndCharactersCount&&t.jsx(h,{className:"tw-items-start",textLabel:t.jsxs("div",{children:[t.jsx("div",{children:"Estimated Token Count"}),t.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:"Tokens are calculated by dividing visible characters by 4 and do NOT include web sources/attachments"})]}),checked:e==null?void 0:e.plugins["thread:betterMessageToolbars"].tokensCount,onCheckedChange:a("tokensCount")}),t.jsx(h,{className:"tw-items-start",textLabel:t.jsxs("div",{children:[t.jsx("div",{children:"Collapsible Query"}),t.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:"Limit the maximum height of the query container"})]}),checked:e==null?void 0:e.plugins["thread:betterMessageToolbars"].collapsibleQuery,onCheckedChange:a("collapsibleQuery")})]}),t.jsx("div",{className:"tw-mx-auto tw-w-full tw-max-w-[700px]",children:t.jsx(E,{src:"https://i.imgur.com/xxqkuDn.png",alt:"better-thread-message-toolbars",className:"tw-w-full"})})]})}function On(){const{settings:e,mutation:n}=v();return e?t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-4",children:[t.jsx(H,{children:`Remove the empty space on the right side of each message in a thread. Only for messages that explicitly don't have "Search images, Search videos, Generate Images" options on the right.`}),t.jsx(h,{textLabel:"Enable",checked:e==null?void 0:e.plugins["thread:collapseEmptyThreadVisualCols"].enabled,onCheckedChange:({checked:a})=>n.mutate(r=>r.plugins["thread:collapseEmptyThreadVisualCols"].enabled=a)}),t.jsx("div",{className:"tw-mx-auto tw-w-full",children:t.jsx(E,{src:"https://i.imgur.com/DqXvaZp.png",alt:"collapse-empty-thread-visual-cols",className:"tw-w-full"})})]}):null}function Dn(){const{settings:e,mutation:n}=v(),a=p.useMemo(()=>ue(r=>{n.mutate(l=>l.plugins["home:customSlogan"].slogan=r)},300),[n]);return e?t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-4",children:[t.jsx(h,{textLabel:"Enable",checked:e==null?void 0:e.plugins["home:customSlogan"].enabled,onCheckedChange:({checked:r})=>n.mutate(l=>l.plugins["home:customSlogan"].enabled=r)}),t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-2",children:[t.jsx(z,{className:"tw-text-muted-foreground",children:"Slogan"}),t.jsx(O,{defaultValue:e==null?void 0:e.plugins["home:customSlogan"].slogan,onChange:({target:{value:r}})=>a(r)})]})]}):null}function Rn(){const{settings:e,mutation:n}=v();return e?t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-4",children:[t.jsx(H,{children:"Allow you to change your preferred image generation model. The selector can be found on the image generation popover in any thread."}),t.jsx(h,{textLabel:"Enable",checked:(e==null?void 0:e.plugins.imageGenModelSelector.enabled)??!1,onCheckedChange:({checked:a})=>{n.mutate(r=>{r.plugins.imageGenModelSelector.enabled=a})}}),t.jsx("img",{src:"https://i.imgur.com/qf6cb9i.png",alt:"image-gen-model-selector",className:"tw-mx-auto tw-w-full tw-max-w-[700px]"})]}):null}function _n(){const{settings:e,mutation:n}=v();return e?t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-4 tw-overflow-y-auto",children:[t.jsxs(H,{children:["Allow you to change your preferred language model"," ",t.jsx("span",{className:"tw-font-medium tw-text-primary tw-underline",children:"anywhere"}),". The selector can be found on all query boxes."]}),t.jsx(h,{textLabel:"Enable",checked:e.plugins["queryBox:languageModelSelector"].enabled??!1,onCheckedChange:({checked:a})=>{n.mutate(r=>{r.plugins["queryBox:languageModelSelector"].enabled=a})}}),e.plugins["queryBox:languageModelSelector"].enabled&&t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-2",children:[t.jsxs("div",{className:"tw-ml-8 tw-flex tw-flex-col tw-gap-2",children:[t.jsx(h,{textLabel:"Homepage + Modal + Space",checked:e.plugins["queryBox:languageModelSelector"].main??!1,onCheckedChange:({checked:a})=>{n.mutate(r=>{r.plugins["queryBox:languageModelSelector"].main=a})}}),t.jsx("div",{className:"tw-flex tw-flex-col tw-gap-2",children:t.jsx(h,{textLabel:"Follow-up (in a thread)",checked:e.plugins["queryBox:languageModelSelector"].followUp??!1,onCheckedChange:({checked:a})=>{n.mutate(r=>{r.plugins["queryBox:languageModelSelector"].followUp=a})}})})]}),e.devMode&&t.jsx(h,{textLabel:"Change timezone",checked:e.plugins["queryBox:languageModelSelector"].changeTimezone??!1,onCheckedChange:({checked:a})=>{n.mutate(r=>{r.plugins["queryBox:languageModelSelector"].changeTimezone=a})}})]}),t.jsx("div",{className:"tw-mx-auto tw-w-full tw-max-w-[700px]",children:t.jsx(E,{src:"https://i.imgur.com/IBClpp3.png",alt:"language-model-selector",className:"tw-w-full"})})]}):null}function Fn(){const{settings:e,mutation:n}=v();return e?t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-4",children:[t.jsxs(H,{children:["Activation hotkey: ",t.jsx(ct,{keys:["Ctrl","Shift","V"]}),"."]}),t.jsx(h,{textLabel:"Enable",checked:(e==null?void 0:e.plugins["queryBox:noFileCreationOnPaste"].enabled)??!1,onCheckedChange:({checked:a})=>{n.mutate(r=>{r.plugins["queryBox:noFileCreationOnPaste"].enabled=a})}})]}):null}const Ue={reload:"Reload","warn-only":"Warn only"},$e=["reload","warn-only"];function Hn(){const{settings:e,mutation:n}=v(),a=e==null?void 0:e.plugins.onCloudflareTimeoutAutoReload,r=s=>{n.mutate(o=>{o.plugins.onCloudflareTimeoutAutoReload.enabled=s})},l=s=>{n.mutate(o=>{o.plugins.onCloudflareTimeoutAutoReload.behavior=s[0]})};return e?t.jsxs("div",{className:"tw-flex tw-max-w-lg tw-flex-col tw-gap-4",children:[t.jsx(H,{children:"Helpful when you are using VPNs, or when Perplexity/Cloudflare has issues with your ISP. Turn this on if you want to automatically reload the page when this occurs."}),t.jsx(h,{textLabel:"Enable",checked:(a==null?void 0:a.enabled)??!1,onCheckedChange:({checked:s})=>r(s)}),t.jsxs("div",{children:[t.jsx(z,{className:"tw-text-muted-foreground",children:"Behavior"}),t.jsxs(ve,{portal:!1,collection:je({items:$e,itemToString:s=>Ue[s]}),value:[(a==null?void 0:a.behavior)??"reload"],positioning:{sameWidth:!0},onValueChange:({value:s})=>l(s),children:[t.jsx(ye,{variant:"default",className:"tw-w-fit tw-p-4 tw-py-2",children:t.jsx(Ce,{placeholder:"Behavior"})}),t.jsx(Ne,{children:$e.map(s=>t.jsx(Te,{item:s,children:Ue[s]},s))})]})]})]}):null}function Vn(){const[e,n]=p.useState(!1),[a,r]=p.useState(""),l=ke({mutationKey:["better-code-block-options","create",a],mutationFn:async({language:o})=>{if(!o)return G({title:"No language/block name provided"});const d={language:o,stickyHeader:!1,unwrap:{enabled:!1,showToggleButton:!1},maxHeight:{enabled:!1,collapseByDefault:!1,showToggleButton:!1,value:500},placeholderText:{enabled:!1,title:"",idle:"",loading:""}};await Se().add(d)},onSuccess:()=>{n(!1)},onError:o=>{G({title:"❌ Failed to create new language option",description:o.message})},onSettled:()=>{Pe.invalidateQueries({queryKey:W.list.queryKey,exact:!0}),r("")}}),s=()=>{a&&l.mutate({language:a})};return t.jsxs(Z,{unmountOnExit:!0,open:e,onOpenChange:({open:o})=>n(o),children:[t.jsx($,{content:"Add new rule",children:t.jsx(ie,{asChild:!0,children:t.jsx(T,{variant:"ghost",size:"sm",children:t.jsx(it,{})})})}),t.jsxs(Y,{portal:!1,children:[t.jsx(X,{children:"Fine-tune specific block"}),t.jsx(O,{value:a,className:"tw-font-mono",placeholder:"Language/Block name",onChange:({target:o})=>r(o.value),onKeyDown:o=>{o.key==="Enter"&&(o.preventDefault(),s())}}),t.jsxs(de,{children:[t.jsx(ne,{asChild:!0,children:t.jsx(T,{variant:"outline",children:"Cancel"})}),t.jsx(T,{disabled:!a,onClick:s,children:"Create"})]})]})]})}function qn({deleteMutation:e}){const[n,a]=p.useState(!1);return t.jsxs(Z,{open:n,onOpenChange:({open:r})=>a(r),children:[t.jsx(ie,{asChild:!0,children:t.jsx(T,{variant:"outline",size:"icon",children:t.jsx(_t,{})})}),t.jsxs(Y,{children:[t.jsxs(X,{children:[t.jsx(ce,{children:"Delete Language Option"}),t.jsx(Le,{children:"Are you sure you want to delete this language option? This action cannot be undone."})]}),t.jsxs(de,{children:[t.jsx(T,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),t.jsx(T,{variant:"destructive",onClick:()=>{e(),a(!1)},children:"Delete"})]})]})]})}function Pt({language:e}={}){const{settings:n,mutation:a}=v(),{data:r}=Ie({...W.get(e??""),enabled:!!e}),l=ke({mutationKey:["better-code-blocks-options","update",e],mutationFn:Se().updateDraft,onError:o=>{G({title:"❌ Failed to update options",description:o.message})},onSettled:()=>{Pe.invalidateQueries({queryKey:W.get(e??"").queryKey})}}),s=ke({mutationKey:["better-code-blocks-options","delete",e],mutationFn:async()=>{e&&await Se().delete(e)},onError:o=>{G({title:"❌ Failed to delete options",description:o.message})},onSettled:()=>{Pe.invalidateQueries({queryKey:W.list.queryKey,exact:!0})}});return{globalSettings:n,globalMutation:a,settings:r,mutation:l,delete:s}}function zn({language:e}){const{mutation:n,settings:a,delete:r}=Pt({language:e}),l=p.useMemo(()=>ue(s=>n.mutate({language:e,newDraft:s}),300),[e,n]);return a?t.jsx("div",{className:"tw-flex tw-flex-col tw-gap-4",children:t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-4",children:[t.jsx(h,{textLabel:"Sticky header",checked:a==null?void 0:a.stickyHeader,onCheckedChange:({checked:s})=>{n.mutate({language:e,newDraft:{stickyHeader:s}})}}),t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-2",children:[t.jsx(h,{textLabel:"Unwrap lines by default",checked:a==null?void 0:a.unwrap.enabled,onCheckedChange:({checked:s})=>{n.mutate({language:e,newDraft:{unwrap:{enabled:s}}})}}),t.jsx(h,{textLabel:"Show toggle button",className:"tw-ml-8",checked:a==null?void 0:a.unwrap.showToggleButton,onCheckedChange:({checked:s})=>{n.mutate({language:e,newDraft:{unwrap:{showToggleButton:s}}})}})]}),t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-2",children:[t.jsxs("div",{className:"tw-flex tw-gap-2",children:[t.jsx(h,{textLabel:"Max height",checked:a==null?void 0:a.maxHeight.enabled,onCheckedChange:({checked:s})=>{n.mutate({language:e,newDraft:{maxHeight:{enabled:s}}})}}),t.jsxs("div",{className:"tw-flex tw-items-center tw-gap-2",children:[t.jsx(O,{type:"number",min:0,defaultValue:a==null?void 0:a.maxHeight.value,className:"tw-w-[100px]",disabled:!(a!=null&&a.maxHeight.enabled),onChange:s=>{Number(s.target.value)<0||l({maxHeight:{value:Number(s.target.value)}})}}),t.jsx("div",{className:"tw-text-muted-foreground",children:"px (0px = entirely collapsed)"})]})]}),(a==null?void 0:a.maxHeight.enabled)&&t.jsxs(t.Fragment,{children:[t.jsx(h,{textLabel:"Collapse by default",className:"tw-ml-8",checked:a==null?void 0:a.maxHeight.collapseByDefault,onCheckedChange:({checked:s})=>{n.mutate({language:e,newDraft:{maxHeight:{collapseByDefault:s}}})}}),t.jsx(h,{textLabel:"Show toggle button",className:"tw-ml-8",checked:a==null?void 0:a.maxHeight.showToggleButton,onCheckedChange:({checked:s})=>{n.mutate({language:e,newDraft:{maxHeight:{showToggleButton:s}}})}})]}),t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-2",children:[t.jsx(h,{textLabel:"Custom placeholder text",checked:a==null?void 0:a.placeholderText.enabled,onCheckedChange:({checked:s})=>{n.mutate({language:e,newDraft:{placeholderText:{enabled:s}}})}}),(a==null?void 0:a.placeholderText.enabled)&&t.jsxs("div",{className:"tw-ml-8 tw-flex tw-flex-col tw-gap-2",children:[t.jsxs("div",{children:[t.jsx(z,{className:"tw-text-muted-foreground",children:"Title"}),t.jsx(O,{type:"text",maxLength:30,defaultValue:a==null?void 0:a.placeholderText.title,className:"tw-w-[300px]",onChange:s=>{l({placeholderText:{title:s.target.value}})}})]}),t.jsxs("div",{children:[t.jsx(z,{className:"tw-text-muted-foreground",children:"Loading text"}),t.jsx(O,{type:"text",maxLength:30,defaultValue:a==null?void 0:a.placeholderText.loading,className:"tw-w-[300px]",onChange:s=>{l({placeholderText:{loading:s.target.value}})}})]}),t.jsxs("div",{children:[t.jsx(z,{className:"tw-text-muted-foreground",children:"Idle text"}),t.jsx(O,{type:"text",maxLength:30,defaultValue:a==null?void 0:a.placeholderText.idle,className:"tw-w-[300px]",onChange:s=>{l({placeholderText:{idle:s.target.value}})}})]})]})]})]}),t.jsx("div",{className:"tw-ml-auto tw-flex tw-flex-col tw-gap-2",children:t.jsx(qn,{deleteMutation:r.mutate})})]})}):null}function Un(){var r,l,s,o,d;const{globalMutation:e,globalSettings:n}=Pt(),a=p.useMemo(()=>ue(i=>e.mutate(i),300),[e]);return t.jsx("div",{className:"tw-flex tw-flex-col tw-gap-4",children:t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-4",children:[t.jsx(h,{textLabel:"Sticky header",checked:n==null?void 0:n.plugins["thread:betterCodeBlocks"].stickyHeader,onCheckedChange:({checked:i})=>{e.mutate(c=>{c.plugins["thread:betterCodeBlocks"].stickyHeader=i})}}),t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-2",children:[t.jsx(h,{textLabel:"Unwrap lines by default",checked:n==null?void 0:n.plugins["thread:betterCodeBlocks"].unwrap.enabled,onCheckedChange:({checked:i})=>{e.mutate(c=>{c.plugins["thread:betterCodeBlocks"].unwrap.enabled=i})}}),t.jsx(h,{textLabel:"Show toggle button",className:"tw-ml-8",checked:n==null?void 0:n.plugins["thread:betterCodeBlocks"].unwrap.showToggleButton,onCheckedChange:({checked:i})=>{e.mutate(c=>{c.plugins["thread:betterCodeBlocks"].unwrap.showToggleButton=i})}})]}),t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-2",children:[t.jsxs("div",{className:"tw-flex tw-gap-2",children:[t.jsx(h,{textLabel:"Max height",checked:(r=n==null?void 0:n.plugins["thread:betterCodeBlocks"].maxHeight)==null?void 0:r.enabled,onCheckedChange:({checked:i})=>{e.mutate(c=>{c.plugins["thread:betterCodeBlocks"].maxHeight.enabled=i})}}),t.jsxs("div",{className:"tw-flex tw-items-center tw-gap-2",children:[t.jsx(O,{type:"number",min:300,defaultValue:(l=n==null?void 0:n.plugins["thread:betterCodeBlocks"].maxHeight)==null?void 0:l.value,className:"tw-w-[100px]",disabled:!((s=n==null?void 0:n.plugins["thread:betterCodeBlocks"].maxHeight)!=null&&s.enabled),onChange:i=>{Number(i.target.value)<300||a(c=>{c.plugins["thread:betterCodeBlocks"].maxHeight.value=Number(i.target.value)})}}),t.jsx("div",{className:"tw-text-muted-foreground",children:"px (>= 300px)"})]})]}),t.jsx(h,{textLabel:"Collapse by default",className:"tw-ml-8",checked:(o=n==null?void 0:n.plugins["thread:betterCodeBlocks"].maxHeight)==null?void 0:o.collapseByDefault,onCheckedChange:({checked:i})=>{e.mutate(c=>{c.plugins["thread:betterCodeBlocks"].maxHeight.collapseByDefault=i})}}),t.jsx(h,{textLabel:"Show toggle button",className:"tw-ml-8",checked:(d=n==null?void 0:n.plugins["thread:betterCodeBlocks"].maxHeight)==null?void 0:d.showToggleButton,onCheckedChange:({checked:i})=>{e.mutate(c=>{c.plugins["thread:betterCodeBlocks"].maxHeight.showToggleButton=i})}})]})]})})}function $n(){var o;const{settings:e}=v(),[n,a]=lt(),r=n.get("tab")||"global",{data:l}=Ie(W.list),s=(o=ot().state)==null?void 0:o.fromPluginList;return t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-4",children:[t.jsx(Wn,{}),(e==null?void 0:e.plugins["thread:betterCodeBlocks"].enabled)&&t.jsxs(ut,{value:r,onValueChange:({value:d})=>{a({tab:d},{state:{fromPluginList:s}})},children:[t.jsxs(mt,{className:"tw-mb-2 tw-justify-start",children:[t.jsx(re,{value:"global",children:"Global"}),l==null?void 0:l.map(d=>t.jsx(re,{value:d.language,children:d.language},d.language)),t.jsx(Vn,{})]}),t.jsx(se,{value:"global",className:"tw-max-w-[500px] tw-rounded-md tw-bg-secondary tw-p-4",children:t.jsx(Un,{})}),l==null?void 0:l.map(d=>t.jsx(se,{value:d.language,className:"tw-rounded-md tw-bg-secondary tw-p-4",children:t.jsx(zn,{language:d.language})},d.language))]})]})}function Wn(){const{settings:e,mutation:n}=v();return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"tw-flex tw-flex-col tw-gap-2",children:"Customize the appearance and usability of code blocks."}),t.jsx(h,{textLabel:"Enable",checked:e==null?void 0:e.plugins["thread:betterCodeBlocks"].enabled,onCheckedChange:({checked:a})=>{n.mutate(r=>{r.plugins["thread:betterCodeBlocks"].enabled=a})}})]})}function Gn(){const{settings:e,mutation:n}=v(),a=e==null?void 0:e.plugins["thread:betterMessageCopyButtons"];return e?t.jsxs("div",{className:"tw-flex tw-max-w-lg tw-flex-col tw-gap-4",children:[t.jsx(h,{textLabel:"Enable",checked:(a==null?void 0:a.enabled)??!1,onCheckedChange:({checked:r})=>{n.mutate(l=>{l.plugins["thread:betterMessageCopyButtons"].enabled=r})}}),t.jsx("div",{className:"tw-mx-auto tw-w-full tw-max-w-[700px]",children:t.jsx(E,{src:"https://i.imgur.com/OqGkEuF.png",alt:"better-thread-message-copy-buttons",className:"tw-w-full"})})]}):null}function Kn(){const{settings:e,mutation:n}=v();return t.jsxs("div",{className:"tw-flex tw-max-w-screen-lg tw-flex-col tw-gap-4",children:[t.jsx(h,{textLabel:"Enable",checked:e==null?void 0:e.plugins["thread:canvas"].enabled,onCheckedChange:({checked:a})=>n.mutate(r=>r.plugins["thread:canvas"].enabled=a)}),(e==null?void 0:e.plugins["thread:canvas"].enabled)&&t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-2",children:[t.jsxs("p",{className:"tw-text-muted-foreground",children:["For the AI to acknowledge the ability to use Canvas, you need to use this"," ",t.jsx("a",{href:"https://cdn.cplx.app/prompts/canvas-instruction-claude.md",target:"_blank",rel:"noopener noreferrer",className:"tw-text-primary hover:tw-underline",children:"pre-prompt"}),", either use Space's Instruction or directly place it before the query. Feel free to modify it as you see fit, however make sure to follow the specified syntaxes."]}),t.jsxs("p",{className:"tw-text-muted-foreground",children:[t.jsx("span",{className:"tw-text-foreground tw-underline",children:"Otherwise"}),', Complexity will show a "Render in Canvas" button on the header of applicable code blocks.']}),t.jsx("div",{className:"tw-mt-6",children:t.jsxs("table",{className:"tw-w-full tw-border-collapse tw-rounded-lg tw-border tw-border-border",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"tw-bg-secondary tw-text-secondary-foreground",children:[t.jsx("th",{className:"tw-border tw-border-border tw-p-2"}),t.jsx("th",{className:"tw-border tw-border-border tw-p-2 tw-font-semibold",children:"Without pre-prompt"}),t.jsx("th",{className:"tw-border tw-border-border tw-p-2 tw-font-semibold",children:"With pre-prompt"})]})}),t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"tw-border tw-border-border tw-bg-secondary tw-p-2 tw-text-secondary-foreground",children:"AI awareness"}),t.jsx("td",{className:"tw-border tw-border-border tw-p-2 tw-text-center",children:"❌"}),t.jsx("td",{className:"tw-border tw-border-border tw-p-2 tw-text-center",children:"✅"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"tw-border tw-border-border tw-bg-secondary tw-p-2 tw-text-secondary-foreground",children:"Render condition"}),t.jsx("td",{className:"tw-border tw-border-border tw-p-2 tw-text-center",children:"Manual activation"}),t.jsx("td",{className:"tw-border tw-border-border tw-p-2 tw-text-center",children:"Automatic rendering by the AI"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"tw-border tw-border-border tw-bg-secondary tw-p-2 tw-text-secondary-foreground",children:"Supported languages"}),t.jsx("td",{className:"tw-border tw-border-border tw-p-2",children:t.jsxs("div",{className:"tw-mx-auto tw-flex tw-w-max tw-flex-col tw-items-center tw-gap-1",children:[t.jsx(k,{className:"tw-w-max",children:"✅ markdown"}),t.jsx(k,{className:"tw-w-max",children:"✅ mermaid"}),t.jsx(k,{className:"tw-w-max",children:"✅ markmap"}),t.jsx(k,{className:"tw-w-max",children:"✅ plantuml"}),t.jsx(k,{className:"tw-w-max",children:"✅ html"}),t.jsx(k,{className:"tw-w-max",children:"❌ react"})]})}),t.jsx("td",{className:"tw-border tw-border-border tw-p-2",children:t.jsxs("div",{className:"tw-mx-auto tw-flex tw-w-max tw-flex-col tw-items-center tw-gap-1",children:[t.jsx(k,{className:"tw-w-max",children:"✅ markdown"}),t.jsx(k,{className:"tw-w-max",children:"✅ mermaid"}),t.jsx(k,{className:"tw-w-max",children:"✅ markmap"}),t.jsx(k,{className:"tw-w-max",children:"✅ plantuml"}),t.jsx(k,{className:"tw-w-max",children:"✅ html"}),t.jsx(k,{className:"tw-w-max",children:"✅ react"})]})})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"tw-border tw-border-border tw-bg-secondary tw-p-2 tw-text-secondary-foreground",children:"Supported language models"}),t.jsx("td",{className:"tw-border tw-border-border tw-p-2 tw-text-center tw-text-muted-foreground",children:"any"}),t.jsx("td",{className:"tw-border tw-border-border tw-p-2 tw-text-center",children:"Claude 3.5 Sonnet, GPT-4o, GPT-o1, Sonar Huge, Grok-2"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"tw-border tw-border-border tw-bg-secondary tw-p-2 tw-text-secondary-foreground",children:"Ease of use"}),t.jsx("td",{className:"tw-border tw-border-border tw-p-2 tw-text-center tw-text-muted-foreground",children:"No setup required"}),t.jsx("td",{className:"tw-border tw-border-border tw-p-2 tw-text-center",children:"Requires pre-prompt"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"tw-border tw-border-border tw-bg-secondary tw-p-2 tw-text-secondary-foreground",children:"Action"}),t.jsx("td",{className:"tw-border tw-border-border tw-p-2 tw-text-center tw-text-muted-foreground",children:"No action required"}),t.jsx("td",{className:"tw-border tw-border-border tw-p-2 tw-text-center",children:t.jsx(T,{onClick:()=>{window.open("https://perplexity.ai/#/cplx/canvas/install-pre-prompt-as-space","_blank")},children:"Install Canvas pre-prompt as a Space"})})]})]})]})})]})]})}const K=new Set([U.Key.Meta,U.Key.Control,U.Key.Alt,U.Key.Shift,"ctrl"].map(e=>e.toLowerCase()));function ee(e){const n={control:1,ctrl:1,meta:1,shift:2,alt:3};return[...e].sort((a,r)=>{const l=a.toLowerCase(),s=r.toLowerCase(),o=K.has(l),d=K.has(s);if(o&&d){const i=n[l]??0,c=n[s]??0;return i-c}return o?-1:d?1:0})}function We(e){if(!(e!=null&&e.size))return!1;const n=Array.from(e).map(l=>l.toLowerCase()),a=n.some(l=>K.has(l)),r=n.filter(l=>!K.has(l));return a&&r.length===1}function Qn({defaultKeys:e,onSave:n}){const a=ta()==="mac",[r,{isRecording:l,resetKeys:s,start:o,stop:d}]=ma();ha(U.Key.Escape,()=>d(),{preventDefault:!0});const i=l?r!=null&&r.size?ee(Array.from(r)):[]:ee(e);p.useEffect(()=>{if(!(r!=null&&r.size))return;Array.from(r).map(y=>y.toLowerCase()).filter(y=>!K.has(y)).length>1&&(s(),d())},[r,s,d]);const c=()=>{s(),o()},w=()=>{We(r)?n&&r!=null&&n(ee(Array.from(r))):s(),d()},g=r!=null?We(r):!0;return{HotkeyRecorderUI:()=>t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-3",children:[t.jsxs("div",{className:"tw-flex tw-items-center tw-gap-3",children:[t.jsx("div",{className:L("tw-flex tw-items-center tw-rounded-md",l&&"tw-border tw-border-border/50 tw-bg-secondary tw-px-3 tw-py-1.5"),children:l&&!(r!=null&&r.size)?t.jsxs("div",{className:"tw-flex tw-items-center tw-gap-2 tw-text-sm tw-text-muted-foreground",children:[t.jsx("div",{className:"tw-h-1.5 tw-w-1.5 tw-animate-pulse tw-rounded-full tw-bg-primary"}),"Recording..."]}):t.jsx(ct,{keys:i})}),l?g?t.jsx(T,{variant:"outline",size:"sm",className:"tw-min-w-[80px]",onClick:w,children:"Save"}):null:t.jsx(T,{variant:"outline",size:"sm",className:"tw-min-w-[80px]",onClick:c,children:"Record"})]}),l&&!g&&(r==null?void 0:r.size)>0&&t.jsxs("div",{className:"tw-flex tw-items-center tw-gap-2 tw-text-sm tw-text-destructive",children:[t.jsx("div",{className:"tw-i-lucide-alert-circle tw-h-4 tw-w-4"}),"Invalid combination. Use one modifier key (",a?"⌘":"Ctrl",", ",a?"Option":"Alt",", ","Shift",") + one regular key"]})]}),isRecording:l,keys:r!=null?ee(Array.from(r)):[],startRecording:c,stopRecording:w,isValidCombination:g}}function Zn(){const{settings:e,mutation:n}=v(),a=(e==null?void 0:e.plugins.commandMenu.hotkey)??[],{HotkeyRecorderUI:r}=Qn({defaultKeys:a,onSave:l=>{n.mutate(s=>{s.plugins.commandMenu.hotkey=l})}});return e?t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-4",children:[t.jsx("div",{children:"Similar to Mac's Spotlight / Windows's PowerToys Run, but inside Perplexity."}),t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-2",children:[t.jsx("div",{children:"Activation hotkey:"}),t.jsx(r,{})]}),t.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:"Side note: Thread search is subject to rate limiting by Perplexity at any time."}),t.jsx(h,{textLabel:"Enable",checked:(e==null?void 0:e.plugins.commandMenu.enabled)??!1,onCheckedChange:({checked:l})=>{n.mutate(s=>{s.plugins.commandMenu.enabled=l})}}),t.jsx("div",{className:"tw-mx-auto tw-w-full tw-max-w-[700px]",children:t.jsx(E,{src:"https://i.imgur.com/m8x0hm1.png",alt:"command-menu",className:"tw-w-full"})})]}):null}const Yn=ln,Xn=Nt,Jn=({className:e,...n})=>t.jsx(vt,{className:L("tw-peer-disabled:tw-cursor-not-allowed tw-peer-disabled:tw-opacity-70 tw-text-sm tw-font-medium tw-leading-none",e),...n}),er=({className:e,...n})=>t.jsx(pt,{className:L("tw-relative tw-flex tw-w-full tw-touch-none",e),...n}),tr=({className:e,...n})=>t.jsx(kt,{className:L("tw-relative tw-h-2 tw-w-full tw-grow tw-rounded-full tw-bg-secondary",e),...n}),ar=({className:e,...n})=>t.jsx(jt,{className:L("tw-absolute tw-h-full tw-bg-primary",e),...n}),nr=({className:e,indicatorProps:n,showValueIndicator:a,...r})=>t.jsxs(Tt,{className:L("tw-relative -tw-mt-1.5 tw-block tw-h-5 tw-w-5 tw-select-none tw-rounded-full tw-border-2 tw-border-primary tw-bg-background tw-ring-offset-background tw-transition-colors focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-pointer-events-none disabled:tw-opacity-50",e),...r,children:[a&&t.jsxs("div",{...n,className:L("tw-absolute -tw-top-7 tw-left-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-rounded-md tw-border tw-border-border/50 tw-bg-primary tw-px-2 tw-py-1",n==null?void 0:n.className),children:[t.jsx(St,{className:"tw-text-xs tw-text-primary-foreground"}),t.jsx("div",{className:"tw-absolute -tw-bottom-1 tw-left-1/2 -tw-translate-x-1/2 tw-border-4 tw-border-transparent tw-border-t-primary"})]}),t.jsx(bt,{})]});function rr(){const{settings:e,mutation:n}=v(),a=p.useMemo(()=>ue(r=>{n.mutate(l=>l.plugins["thread:customThreadContainerWidth"].value=r)},300),[n]);return e?t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-4",children:[t.jsx(h,{textLabel:"Enable",checked:e==null?void 0:e.plugins["thread:customThreadContainerWidth"].enabled,onCheckedChange:({checked:r})=>n.mutate(l=>l.plugins["thread:customThreadContainerWidth"].enabled=r)}),(e==null?void 0:e.plugins["thread:customThreadContainerWidth"].enabled)&&t.jsx("div",{className:"tw-flex tw-flex-col tw-gap-2",children:t.jsxs(Xn,{defaultValue:[e.plugins["thread:customThreadContainerWidth"].value],className:"md:tw-min-w-[500px]",min:1100,max:9999,onValueChange:({value:r})=>a(r[0]??0),children:[t.jsx(Yn,{children:({value:r})=>t.jsxs(Jn,{className:"tw-mb-4 tw-block tw-text-muted-foreground",children:["Desired Max-Width:"," ",t.jsxs("span",{className:"tw-text-primary",children:[r,"px"]})]})}),t.jsx(er,{children:t.jsxs(tr,{children:[t.jsx(ar,{}),t.jsx(nr,{index:0})]})})]})})]}):null}function sr(){const{settings:e,mutation:n}=v(),a=e==null?void 0:e.plugins["thread:exportThread"];return e?t.jsxs("div",{className:"tw-flex tw-max-w-lg tw-flex-col tw-gap-4",children:[t.jsx(h,{textLabel:"Enable",checked:(a==null?void 0:a.enabled)??!1,onCheckedChange:({checked:r})=>{n.mutate(l=>{l.plugins["thread:exportThread"].enabled=r})}}),t.jsx("div",{className:"tw-mx-auto tw-w-full tw-max-w-[700px]",children:t.jsx(E,{src:"https://i.imgur.com/Enn83Eg.png",alt:"export-thread",className:"tw-w-full"})})]}):null}const Ge={default:"Always override",persistent:"Persistent across sessions"},Ke=["default","persistent"];function lr(){const{settings:e,mutation:n}=v(),a=e==null?void 0:e.plugins["queryBox:focusSelector"],r=s=>{n.mutate(o=>{o.plugins["queryBox:focusSelector"].enabled=s})},l=s=>{n.mutate(o=>{o.plugins["queryBox:focusSelector"].mode=s[0]})};return e?t.jsxs("div",{className:"tw-flex tw-max-w-lg tw-flex-col tw-gap-4",children:[t.jsx(H,{children:"Please note that this plugin does not work on Enterprise accounts"}),t.jsx(h,{textLabel:"Enable",checked:(a==null?void 0:a.enabled)??!1,onCheckedChange:({checked:s})=>r(s)}),e.plugins["queryBox:focusSelector"].enabled&&t.jsxs("div",{className:"tw-flex tw-items-end tw-gap-4",children:[t.jsxs("div",{children:[t.jsx(z,{className:"tw-text-muted-foreground",children:"Mode"}),t.jsxs(ve,{portal:!1,collection:je({items:Ke,itemToString:s=>Ge[s]}),value:[(a==null?void 0:a.mode)??"default"],positioning:{sameWidth:!0},onValueChange:({value:s})=>l(s),children:[t.jsx(ye,{variant:"default",className:"tw-w-fit tw-p-4 tw-py-2",children:t.jsx(Ce,{placeholder:"Mode"})}),t.jsx(Ne,{children:Ke.map(s=>t.jsx(Te,{item:s,children:Ge[s]},s))})]})]}),e.plugins["queryBox:focusSelector"].mode==="default"&&t.jsxs(ve,{value:[(a==null?void 0:a.defaultFocusMode)??"internet"],collection:je({items:we,itemToString:s=>s.label}),onValueChange:({value:s})=>{n.mutate(o=>{o.plugins["queryBox:focusSelector"].defaultFocusMode=s[0]})},children:[t.jsx(ye,{variant:"default",className:"tw-w-fit tw-p-4 tw-py-2",children:t.jsx(Ce,{placeholder:"Default Focus Mode",children:(()=>{const s=we.find(o=>o.code===(a==null?void 0:a.defaultFocusMode));return s?t.jsxs("div",{className:"tw-flex tw-items-center tw-gap-2",children:[t.jsx(s.Icon,{className:"tw-size-4"}),t.jsx("div",{children:s.label})]}):null})()})}),t.jsx(Ne,{children:we.map(s=>t.jsxs(Te,{item:s.code,className:"tw-flex tw-items-center tw-gap-2",children:[t.jsx(s.Icon,{className:"tw-size-4"}),t.jsx("div",{children:s.label})]},s.code))})]})]}),t.jsx("div",{className:"tw-mx-auto tw-w-full tw-max-w-[700px]",children:t.jsx(E,{src:"https://i.imgur.com/qI4hFOA.png",alt:"focus-selector",className:"tw-w-full"})})]}):null}function or(){const{settings:e,mutation:n}=v(),a=e==null?void 0:e.plugins["queryBox:focusSelector:webRecency"];return e?t.jsxs("div",{className:"tw-flex tw-max-w-lg tw-flex-col tw-gap-4",children:[t.jsx(h,{textLabel:"Enable",checked:(a==null?void 0:a.enabled)??!1,onCheckedChange:({checked:r})=>{n.mutate(l=>{l.plugins["queryBox:focusSelector:webRecency"].enabled=r})}}),t.jsx("div",{className:"tw-mx-auto tw-w-full tw-max-w-[700px]",children:t.jsx(E,{src:"https://i.imgur.com/bcLTwkG.png",alt:"focus-web-recency",className:"tw-w-full"})})]}):null}function ir(){const{settings:e,mutation:n}=v(),a=e==null?void 0:e.plugins["queryBox:fullWidthFollowUp"];return e?t.jsxs("div",{className:"tw-flex tw-max-w-lg tw-flex-col tw-gap-4",children:[t.jsx(h,{textLabel:"Enable",checked:(a==null?void 0:a.enabled)??!1,onCheckedChange:({checked:r})=>{n.mutate(l=>{l.plugins["queryBox:fullWidthFollowUp"].enabled=r})}}),t.jsx("div",{className:"tw-mx-auto tw-w-full tw-max-w-[700px]",children:t.jsx(E,{src:"https://i.imgur.com/lFqauaw.png",alt:"full-width-follow-up-query-box",className:"tw-w-full"})})]}):null}function dr(){const{settings:e,mutation:n}=v(),a=e==null?void 0:e.plugins["queryBox:slashCommandMenu:promptHistory"],r=l=>{n.mutate(s=>{s.plugins["queryBox:slashCommandMenu:promptHistory"].enabled=l})};return e?t.jsxs("div",{className:"tw-flex tw-max-w-lg tw-flex-col tw-gap-4",children:[t.jsx(H,{children:"Frustrated when losing your prompt? This plugin will save your prompt to history and allow you to easily access it."}),t.jsx(h,{textLabel:"Enable",checked:(a==null?void 0:a.enabled)??!1,onCheckedChange:({checked:l})=>r(l)}),(a==null?void 0:a.enabled)&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"tw-ml-8 tw-flex tw-flex-col tw-gap-2",children:[t.jsx(h,{className:"tw-items-start",textLabel:t.jsxs("div",{children:[t.jsx("div",{children:"Save on submit"}),t.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:"When you submit a new prompt"})]}),checked:(a==null?void 0:a.trigger.onSubmit)??!1,onCheckedChange:({checked:l})=>{n.mutate(s=>{s.plugins["queryBox:slashCommandMenu:promptHistory"].trigger.onSubmit=l})}}),t.jsx(h,{className:"tw-items-start",textLabel:t.jsxs("div",{children:[t.jsx("div",{children:"Save on navigation"}),t.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:"When you (accidentally) navigate away from the page (or when Perplexity forces the page to reload)"})]}),checked:(a==null?void 0:a.trigger.onNavigation)??!1,onCheckedChange:({checked:l})=>{n.mutate(s=>{s.plugins["queryBox:slashCommandMenu:promptHistory"].trigger.onNavigation=l})}})]}),t.jsx("div",{className:"tw-flex tw-flex-col tw-gap-2",children:t.jsx(h,{className:"tw-items-start",textLabel:"Show trigger button on the query box",checked:(a==null?void 0:a.showTriggerButton)??!1,onCheckedChange:({checked:l})=>{n.mutate(s=>{s.plugins["queryBox:slashCommandMenu:promptHistory"].showTriggerButton=l})}})})]})]}):null}function cr(){const{settings:e,mutation:n}=v(),a=e==null?void 0:e.plugins["queryBox:spaceNavigator"];return e?t.jsxs("div",{className:"tw-flex tw-max-w-lg tw-flex-col tw-gap-4",children:[t.jsx(h,{textLabel:"Enable",checked:(a==null?void 0:a.enabled)??!1,onCheckedChange:({checked:r})=>{n.mutate(l=>{l.plugins["queryBox:spaceNavigator"].enabled=r})}}),t.jsx("div",{className:"tw-mx-auto tw-w-full tw-max-w-[700px]",children:t.jsx(E,{src:"https://i.imgur.com/r0Y1atO.png",alt:"space-navigator",className:"tw-w-full"})})]}):null}function ur(){const{settings:e,mutation:n}=v(),a=e==null?void 0:e.plugins["queryBox:submitOnCtrlEnter"];return e?t.jsxs("div",{className:"tw-flex tw-max-w-lg tw-flex-col tw-gap-4",children:[t.jsx(h,{textLabel:"Enable",checked:(a==null?void 0:a.enabled)??!1,onCheckedChange:({checked:r})=>{n.mutate(l=>{l.plugins["queryBox:submitOnCtrlEnter"].enabled=r})}}),t.jsx("div",{className:"tw-mx-auto tw-w-full tw-max-w-[700px]",children:t.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,controls:!0,src:"https://cdn.cplx.app/assets/submit-on-ctrl-enter.mp4",className:"tw-w-full"})})]}):null}function mr(){const{settings:e,mutation:n}=v(),a=e==null?void 0:e.plugins["thread:toc"];return e?t.jsxs("div",{className:"tw-flex tw-max-w-lg tw-flex-col tw-gap-4",children:[t.jsx(h,{textLabel:"Enable",checked:(a==null?void 0:a.enabled)??!1,onCheckedChange:({checked:r})=>{n.mutate(l=>{l.plugins["thread:toc"].enabled=r})}}),t.jsx("div",{className:"tw-mx-auto tw-w-full tw-max-w-[700px]",children:t.jsx(E,{src:"https://i.imgur.com/LpC4yZ8.png",alt:"thread-toc",className:"tw-w-full"})})]}):null}function hr(){const{settings:e,mutation:n}=v();return t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-4",children:[t.jsx(h,{textLabel:"Enable",checked:(e==null?void 0:e.plugins.zenMode.enabled)??!1,onCheckedChange:({checked:a})=>{n.mutate(r=>{r.plugins.zenMode.enabled=a})}}),(e==null?void 0:e.plugins.zenMode.enabled)&&t.jsxs(t.Fragment,{children:[t.jsx(h,{textLabel:"Persistent across reloads",checked:(e==null?void 0:e.plugins.zenMode.persistent)??!1,onCheckedChange:({checked:a})=>{n.mutate(r=>{r.plugins.zenMode.persistent=a})}}),t.jsx(h,{textLabel:"Always hide related questions",checked:(e==null?void 0:e.plugins.zenMode.alwaysHideRelatedQuestions)??!1,onCheckedChange:({checked:a})=>{n.mutate(r=>{r.plugins.zenMode.alwaysHideRelatedQuestions=a})}}),t.jsx(h,{textLabel:"Always hide homepage widgets",checked:(e==null?void 0:e.plugins.zenMode.alwaysHideHomepageWidgets)??!1,onCheckedChange:({checked:a})=>{n.mutate(r=>{r.plugins.zenMode.alwaysHideHomepageWidgets=a})}}),t.jsx(h,{textLabel:"Always hide visual columns",checked:(e==null?void 0:e.plugins.zenMode.alwaysHideVisualCols)??!1,onCheckedChange:({checked:a})=>{n.mutate(r=>{r.plugins.zenMode.alwaysHideVisualCols=a})}})]})]})}const Re={"queryBox:languageModelSelector":t.jsx(_n,{}),"queryBox:focusSelector":t.jsx(lr,{}),"queryBox:focusSelector:webRecency":t.jsx(or,{}),"queryBox:spaceNavigator":t.jsx(cr,{}),"queryBox:slashCommandMenu:promptHistory":t.jsx(dr,{}),"queryBox:fullWidthFollowUp":t.jsx(ir,{}),"queryBox:noFileCreationOnPaste":t.jsx(Fn,{}),"queryBox:submitOnCtrlEnter":t.jsx(ur,{}),commandMenu:t.jsx(Zn,{}),"thread:betterMessageToolbars":t.jsx(Bn,{}),"thread:betterCodeBlocks":t.jsx($n,{}),"thread:toc":t.jsx(mr,{}),"thread:canvas":t.jsx(Kn,{}),"thread:exportThread":t.jsx(sr,{}),"thread:betterMessageCopyButtons":t.jsx(Gn,{}),"thread:collapseEmptyThreadVisualCols":t.jsx(On,{}),"thread:customThreadContainerWidth":t.jsx(rr,{}),imageGenModelSelector:t.jsx(Rn,{}),onCloudflareTimeoutAutoReload:t.jsx(Hn,{}),"home:customSlogan":t.jsx(Dn,{}),zenMode:t.jsx(hr,{})};function xr({pluginId:e}){const n=Q(),{isMobile:a}=ft(),r=({open:o})=>{o||n("/plugins")},l=a?Yt:Z,s=a?Xt:Y;return t.jsx(l,{open:!0,onOpenChange:r,children:t.jsxs(s,{className:"md:tw-max-w-max",side:a?"bottom":void 0,children:[t.jsxs(X,{children:[t.jsx(ce,{children:M[e].title}),t.jsx(Le,{children:M[e].description})]}),t.jsx("div",{className:"tw-mt-4",children:Re[e]})]})})}function wr({pluginRouteSegment:e}){const n=Object.values(M).find(r=>r.routeSegment===e),a=n?Re[n.id]:null;return n?t.jsxs("div",{className:"tw-space-y-6",children:[t.jsxs(Ot,{to:"/plugins",className:"tw-mb-4 tw-flex tw-items-center tw-gap-2 tw-text-muted-foreground tw-transition hover:tw-text-foreground",children:[t.jsx(Ft,{}),"Back to plugins"]}),t.jsxs("div",{children:[t.jsx("h1",{className:"tw-text-2xl tw-font-bold",children:n.title}),t.jsx("p",{className:"tw-mt-2 tw-text-muted-foreground",children:n.description})]}),a]}):null}function gr(){p.useEffect(()=>{window.history.replaceState(null,"")},[])}function J(){if(Ya()!=="unknown")throw new Error("Can not run this hook in content script");return Ie({...Kt.featureFlags,retry:!1,retryOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,refetchOnMount:!1,refetchOnReconnect:!1,gcTime:1/0})}function fr(){var d,i;gr();const e=Q(),{pluginId:n}=Dt(),a=ot(),{data:r}=J(),l="anon",s=p.useMemo(()=>Object.values(M).find(c=>c.routeSegment===n),[n]);pr({pluginId:s==null?void 0:s.id});const o=((d=a.state)==null?void 0:d.fromPluginList)===!0;return!s||!aa(s.id)?null:(i=r==null?void 0:r[l])!=null&&i.forceDisable.includes(s.id)?t.jsx(br,{onBackClick:()=>e("/plugins")}):t.jsx(t.Fragment,{children:o?t.jsxs(t.Fragment,{children:[t.jsx(Us,{}),t.jsx(xr,{pluginId:s.id})]}):t.jsx(Qt,{title:s.title,children:t.jsx(wr,{pluginRouteSegment:n})})})}function pr({pluginId:e}){const n=Q();p.useEffect(()=>{e||n("/plugins",{replace:!0})},[e,n])}function br({onBackClick:e}){return t.jsxs("div",{className:"tw-flex tw-h-full tw-min-h-[500px] tw-flex-col tw-items-center tw-justify-center tw-gap-4 tw-text-center md:tw-text-left",children:["This plugin is not available at the moment. Please check back later.",t.jsx(T,{onClick:e,children:"Back to dashboard"})]})}function vr(){return t.jsx(Zt,{icon:Fa,title:"No plugins found",description:t.jsxs("div",{className:"tw-text-balance",children:["Try adjusting your search term/filters or"," ",t.jsx("a",{href:"#",className:"tw-underline tw-transition-colors hover:tw-text-foreground",target:"_blank",rel:"noreferrer",children:"request a new one"})]})})}function jr(e){return Me({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 14a2 2 0 1 1-.001-3.999A2 2 0 0 1 20 14ZM6 12a2 2 0 1 1-3.999.001A2 2 0 0 1 6 12Zm8 0a2 2 0 1 1-3.999.001A2 2 0 0 1 14 12Z"},child:[]}]})(e)}function yr(e){return Me({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 .25a.75.75 0 0 1 .673.418l3.058 6.197 6.839.994a.75.75 0 0 1 .415 1.279l-4.948 4.823 1.168 6.811a.751.751 0 0 1-1.088.791L12 18.347l-6.117 3.216a.75.75 0 0 1-1.088-.79l1.168-6.812-4.948-4.823a.75.75 0 0 1 .416-1.28l6.838-.993L11.328.668A.75.75 0 0 1 12 .25Zm0 2.445L9.44 7.882a.75.75 0 0 1-.565.41l-5.725.832 4.143 4.038a.748.748 0 0 1 .215.664l-.978 5.702 5.121-2.692a.75.75 0 0 1 .698 0l5.12 2.692-.977-5.702a.748.748 0 0 1 .215-.664l4.143-4.038-5.725-.831a.75.75 0 0 1-.565-.41L12 2.694Z"},child:[]}]})(e)}function Cr(e){return Me({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m12.672.668 3.059 6.197 6.838.993a.75.75 0 0 1 .416 1.28l-4.948 4.823 1.168 6.812a.75.75 0 0 1-1.088.79L12 18.347l-6.116 3.216a.75.75 0 0 1-1.088-.791l1.168-6.811-4.948-4.823a.749.749 0 0 1 .416-1.279l6.838-.994L11.327.668a.75.75 0 0 1 1.345 0Z"},child:[]}]})(e)}function Nr({pluginId:e,isForceDisabled:n}){var C,y,m;const a=Q(),{settings:r,mutation:l}=v(),{title:s,description:o,tags:d,routeSegment:i}=M[e],c=Re[e],{data:w}=J(),g=p.useMemo(()=>{var u,f,N;return((N=(f=(u=M)==null?void 0:u[e])==null?void 0:f.dependentPlugins)==null?void 0:N.every(P=>r==null?void 0:r.plugins[P].enabled))??!0},[e,r]),j=p.useMemo(()=>{var u,f,N;return((N=(f=(u=M)==null?void 0:u[e])==null?void 0:f.dependentPlugins)==null?void 0:N.some(P=>{var I;return(I=w==null?void 0:w.anon)==null?void 0:I.forceDisable.includes(P)}))??!1},[e,w]);return r?t.jsxs(Va,{className:"tw-flex tw-h-full tw-flex-col tw-bg-secondary",children:[t.jsx(qa,{className:"tw-flex tw-flex-row tw-items-start tw-justify-between tw-space-y-0",children:t.jsxs("div",{children:[t.jsx(za,{children:t.jsx("span",{className:"tw-text-lg",children:s})}),t.jsx(Ua,{children:o})]})}),d!=null&&d.length>0&&t.jsx($a,{children:t.jsx("div",{className:"tw-flex tw-flex-wrap tw-gap-2",children:d.map(u=>t.jsx($,{content:be[u].description,children:t.jsx(Ha,{variant:"secondary",className:L("tw-border tw-border-border/50 hover:tw-bg-background",{"tw-bg-destructive tw-text-destructive-foreground hover:tw-bg-destructive/80":u==="experimental","tw-bg-primary tw-text-primary-foreground hover:tw-bg-primary/80":u==="new"}),children:be[u].label.toLocaleUpperCase()})},u))})}),t.jsxs(Wa,{className:"tw-mt-auto tw-flex tw-justify-between",children:[t.jsxs("div",{className:"tw-flex tw-gap-2",children:[c!=null&&t.jsx(T,{onClick:()=>a(`/plugins/${i}`,{state:{fromPluginList:!0}}),children:"Details"}),t.jsxs(Ga,{children:[t.jsx(Ka,{asChild:!0,children:t.jsx(T,{variant:"ghost",size:"icon",children:t.jsx(jr,{className:"tw-size-4"})})}),t.jsx(Qa,{children:t.jsx(Za,{value:"favorite",onClick:()=>{l.mutate(u=>{if((r==null?void 0:r.favoritePluginIds)==null)return;r.favoritePluginIds.includes(e)?u.favoritePluginIds=u.favoritePluginIds.filter(N=>N!==e):u.favoritePluginIds.push(e)})},children:t.jsx("span",{className:"tw-flex tw-items-center",children:(C=r==null?void 0:r.favoritePluginIds)!=null&&C.includes(e)?t.jsxs(t.Fragment,{children:[t.jsx(Cr,{className:"tw-mr-2 tw-h-4 tw-w-4 tw-text-yellow-500"}),"Remove from favorites"]}):t.jsxs(t.Fragment,{children:[t.jsx(yr,{className:"tw-mr-2 tw-h-4 tw-w-4"}),"Add to favorites"]})})})})]})]}),(r==null?void 0:r.plugins[e].enabled)&&!g&&t.jsx($,{content:t.jsxs("div",{children:[t.jsx("div",{children:"One or more dependencies are disabled, please enable them to use this plugin:"}),t.jsx(Gt,{children:(m=(y=M[e])==null?void 0:y.dependentPlugins)==null?void 0:m.map(u=>{var f;return t.jsx("li",{children:(f=M[u])==null?void 0:f.title},u)})})]}),children:t.jsx(Ve,{className:"tw-size-4 tw-text-yellow-300 dark:tw-text-yellow-500"})}),j&&t.jsx($,{content:t.jsx("div",{children:"This plugin is disabled because one or more of its dependencies are not available."}),children:t.jsx(Ve,{className:"tw-size-4 tw-text-destructive"})}),!n&&t.jsx(h,{checked:(r==null?void 0:r.plugins[e].enabled)??!1,onCheckedChange:({checked:u})=>{l.mutate(f=>{f.plugins[e].enabled=u})}})]})]}):null}function Tr(){return t.jsxs("div",{className:"tw-absolute tw-inset-0 tw-flex tw-flex-col tw-items-center tw-justify-center tw-gap-4 tw-rounded-md tw-bg-secondary/90",children:[t.jsx(Ht,{className:"tw-size-8 tw-text-muted-foreground"}),t.jsx("div",{className:"tw-text-muted-foreground",children:"This plugin is not available at the moment"})]})}function le({pluginIds:e}){const{data:n}=J();return t.jsx("div",{className:"tw-grid tw-gap-4 sm:tw-grid-cols-2 xl:tw-grid-cols-3 2xl:tw-grid-cols-4",children:e.map(a=>{var l;const r=(l=n==null?void 0:n.anon)==null?void 0:l.forceDisable.includes(a);return t.jsxs("div",{className:"tw-relative",children:[t.jsx(Nr,{pluginId:a,isForceDisabled:!!r}),r&&t.jsx(Tr,{})]},a)})})}var kr="__lodash_hash_undefined__";function Sr(e){return this.__data__.set(e,kr),this}var Pr=Sr;function Er(e){return this.__data__.has(e)}var Ar=Er,Mr=na,Lr=Pr,Ir=Ar;function oe(e){var n=-1,a=e==null?0:e.length;for(this.__data__=new Mr;++n<a;)this.add(e[n])}oe.prototype.add=oe.prototype.push=Lr;oe.prototype.has=Ir;var Br=oe;function Or(e,n){for(var a=-1,r=e==null?0:e.length;++a<r;)if(n(e[a],a,e))return!0;return!1}var Dr=Or;function Rr(e,n){return e.has(n)}var _r=Rr,Fr=Br,Hr=Dr,Vr=_r,qr=1,zr=2;function Ur(e,n,a,r,l,s){var o=a&qr,d=e.length,i=n.length;if(d!=i&&!(o&&i>d))return!1;var c=s.get(e),w=s.get(n);if(c&&w)return c==n&&w==e;var g=-1,j=!0,C=a&zr?new Fr:void 0;for(s.set(e,n),s.set(n,e);++g<d;){var y=e[g],m=n[g];if(r)var u=o?r(m,y,g,n,e,s):r(y,m,g,e,n,s);if(u!==void 0){if(u)continue;j=!1;break}if(C){if(!Hr(n,function(f,N){if(!Vr(C,N)&&(y===f||l(y,f,a,r,s)))return C.push(N)})){j=!1;break}}else if(!(y===m||l(y,m,a,r,s))){j=!1;break}}return s.delete(e),s.delete(n),j}var Et=Ur;function $r(e){var n=-1,a=Array(e.size);return e.forEach(function(r,l){a[++n]=[l,r]}),a}var Wr=$r;function Gr(e){var n=-1,a=Array(e.size);return e.forEach(function(r){a[++n]=r}),a}var Kr=Gr,Qe=Jt,Ze=ra,Qr=sa,Zr=Et,Yr=Wr,Xr=Kr,Jr=1,es=2,ts="[object Boolean]",as="[object Date]",ns="[object Error]",rs="[object Map]",ss="[object Number]",ls="[object RegExp]",os="[object Set]",is="[object String]",ds="[object Symbol]",cs="[object ArrayBuffer]",us="[object DataView]",Ye=Qe?Qe.prototype:void 0,ge=Ye?Ye.valueOf:void 0;function ms(e,n,a,r,l,s,o){switch(a){case us:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case cs:return!(e.byteLength!=n.byteLength||!s(new Ze(e),new Ze(n)));case ts:case as:case ss:return Qr(+e,+n);case ns:return e.name==n.name&&e.message==n.message;case ls:case is:return e==n+"";case rs:var d=Yr;case os:var i=r&Jr;if(d||(d=Xr),e.size!=n.size&&!i)return!1;var c=o.get(e);if(c)return c==n;r|=es,o.set(e,n);var w=Zr(d(e),d(n),r,l,s,o);return o.delete(e),w;case ds:if(ge)return ge.call(e)==ge.call(n)}return!1}var hs=ms,Xe=la,xs=1,ws=Object.prototype,gs=ws.hasOwnProperty;function fs(e,n,a,r,l,s){var o=a&xs,d=Xe(e),i=d.length,c=Xe(n),w=c.length;if(i!=w&&!o)return!1;for(var g=i;g--;){var j=d[g];if(!(o?j in n:gs.call(n,j)))return!1}var C=s.get(e),y=s.get(n);if(C&&y)return C==n&&y==e;var m=!0;s.set(e,n),s.set(n,e);for(var u=o;++g<i;){j=d[g];var f=e[j],N=n[j];if(r)var P=o?r(N,f,j,n,e,s):r(f,N,j,e,n,s);if(!(P===void 0?f===N||l(f,N,a,r,s):P)){m=!1;break}u||(u=j=="constructor")}if(m&&!u){var I=e.constructor,V=n.constructor;I!=V&&"constructor"in e&&"constructor"in n&&!(typeof I=="function"&&I instanceof I&&typeof V=="function"&&V instanceof V)&&(m=!1)}return s.delete(e),s.delete(n),m}var ps=fs,fe=oa,bs=Et,vs=hs,js=ps,Je=ia,et=ua,tt=da,ys=ca,Cs=1,at="[object Arguments]",nt="[object Array]",te="[object Object]",Ns=Object.prototype,rt=Ns.hasOwnProperty;function Ts(e,n,a,r,l,s){var o=et(e),d=et(n),i=o?nt:Je(e),c=d?nt:Je(n);i=i==at?te:i,c=c==at?te:c;var w=i==te,g=c==te,j=i==c;if(j&&tt(e)){if(!tt(n))return!1;o=!0,w=!1}if(j&&!w)return s||(s=new fe),o||ys(e)?bs(e,n,a,r,l,s):vs(e,n,i,a,r,l,s);if(!(a&Cs)){var C=w&&rt.call(e,"__wrapped__"),y=g&&rt.call(n,"__wrapped__");if(C||y){var m=C?e.value():e,u=y?n.value():n;return s||(s=new fe),l(m,u,a,r,s)}}return j?(s||(s=new fe),js(e,n,a,r,l,s)):!1}var ks=Ts,Ss=ks,st=ea;function At(e,n,a,r,l){return e===n?!0:e==null||n==null||!st(e)&&!st(n)?e!==e&&n!==n:Ss(e,n,a,r,At,l)}var Ps=At,Es=Ps;function As(e,n){return Es(e,n)}var Ms=As;const Ls=Xa(Ms),Is=Be(me.plugins,e=>{e["queryBox:languageModelSelector"].enabled=!0,e["queryBox:spaceNavigator"].enabled=!0,e["thread:toc"].enabled=!0,e["thread:betterMessageToolbars"].enabled=!0,e["thread:exportThread"].enabled=!0,e["thread:betterMessageCopyButtons"].enabled=!0,e.imageGenModelSelector.enabled=!0}),Bs=Be(me.plugins,e=>{e["queryBox:languageModelSelector"].enabled=!0,e["queryBox:focusSelector"].enabled=!0,e["queryBox:spaceNavigator"].enabled=!0,e["queryBox:slashCommandMenu:promptHistory"].enabled=!0,e["queryBox:noFileCreationOnPaste"].enabled=!0,e["queryBox:fullWidthFollowUp"].enabled=!0,e.commandMenu.enabled=!0,e["thread:toc"].enabled=!0,e["thread:betterMessageToolbars"].enabled=!0,e["thread:exportThread"].enabled=!0,e["thread:betterMessageCopyButtons"].enabled=!0,e["thread:dragAndDropFileToUploadInThread"].enabled=!0,e.imageGenModelSelector.enabled=!0,e.zenMode.enabled=!0}),Os=Be(me.plugins,e=>{Object.keys(e).forEach(n=>{const a=n;["queryBox:submitOnCtrlEnter","thread:customThreadContainerWidth"].includes(a)||(e[a].enabled=!0)})});function Mt(){const{settings:e}=v(),[n]=lt(),a=p.useMemo(()=>Ls(e==null?void 0:e.plugins,me.plugins),[e]),[r,l]=p.useState(n.get("from")==="onboarding"&&a),s=Q();return t.jsxs(Z,{unmountOnExit:!0,lazyMount:!0,open:r,onOpenChange:({open:o})=>l(o),children:[t.jsx(ie,{asChild:!0,children:t.jsx(T,{variant:"link",className:"tw-p-0",children:"Don't know where to start? Try presets!"})}),t.jsxs(Y,{children:[t.jsx(X,{children:t.jsx(ce,{children:"Plugin Presets"})}),t.jsx(Le,{children:"Predefined sets of plugins to help you get started."}),!a&&t.jsx("div",{className:"tw-flex tw-flex-col tw-gap-2",children:t.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:"We noticed that you have modified the plugins settings. Presets will override your current settings. Please make sure to save your current settings before applying."})}),t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-2",children:[t.jsx(pe,{label:"Essentials Only",LabelIcon:Vt,description:"You are new to Perplexity and using the extension for the first time.",config:Is,className:"tw-border-primary/50",onComplete:()=>l(!1)}),t.jsx(pe,{label:"Power User",LabelIcon:qt,description:"You have used Perplexity for a while and want to make the most out of it.",config:Bs,className:"tw-border-primary/50",onComplete:()=>l(!1)}),t.jsx(pe,{label:"YOLO",LabelIcon:zt,description:"Enable all plugins without knowing what they do is NOT recommended. Please start exploring them first.",config:Os,onComplete:()=>l(!1)})]}),t.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:"There are many plugins that depend on personal preferences. Feel free to test and enable them as you see fit."}),t.jsx(de,{children:t.jsx(ne,{asChild:!0,children:t.jsx(T,{onClick:()=>s("/"),children:"I'll look around by myself"})})})]})]})}function pe({label:e,LabelIcon:n,description:a,config:r,onComplete:l,className:s,...o}){const{mutation:d}=v();return t.jsxs(Z,{lazyMount:!0,unmountOnExit:!0,children:[t.jsx(ie,{asChild:!0,children:t.jsxs("button",{className:L("tw-group tw-flex tw-flex-col tw-rounded-lg tw-border tw-border-border/50 tw-bg-secondary tw-p-4 tw-text-left tw-transition-all hover:tw-border-primary hover:tw-bg-primary/10",s),...o,children:[t.jsxs("div",{className:"tw-flex tw-w-full tw-items-center tw-justify-between tw-gap-2",children:[t.jsxs("div",{className:"tw-flex tw-items-center tw-gap-2",children:[t.jsx(n,{className:"group-hover:tw-text-primary"}),t.jsx("div",{className:"tw-text-lg group-hover:tw-text-primary",children:e})]}),t.jsx(Ut,{className:"tw-hidden tw-animate-in tw-fade-in tw-spin-in-90 group-hover:tw-block"})]}),t.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:a})]})}),t.jsxs(Y,{children:[t.jsx(X,{children:t.jsx(ce,{children:"Apply Plugin Preset"})}),'Are you sure you want to apply the "',e,'" preset?',t.jsxs(de,{children:[t.jsx(ne,{asChild:!0,children:t.jsx(T,{variant:"outline",children:"Cancel"})}),t.jsx(ne,{asChild:!0,onClick:()=>{d.mutate(i=>{i.plugins=r}),G({description:`✅ Preset "${e}" applied successfully!`}),l()},children:t.jsx(T,{children:"Apply"})})]})]})]})}function Ds({favoritePluginIds:e,otherPluginIds:n}){const{isMobile:a}=ft();return e.length===0&&n.length===0?t.jsx(vr,{}):a?t.jsx(Rs,{favoritePluginIds:e,otherPluginIds:n}):t.jsx(_s,{favoritePluginIds:e,otherPluginIds:n})}function Rs({favoritePluginIds:e,otherPluginIds:n}){return t.jsxs("div",{className:"tw-flex tw-flex-col",children:[t.jsx(Mt,{}),t.jsxs(ut,{defaultValue:"all",children:[t.jsxs(mt,{className:"tw-w-full",children:[e.length>0&&t.jsx(re,{value:"favorites",children:"Favourite Plugins"}),t.jsx(re,{value:"all",children:"All Plugins"})]}),e.length>0&&t.jsx(se,{value:"favorites",className:"tw-mt-4",children:t.jsx(le,{pluginIds:e})}),t.jsx(se,{value:"all",className:"tw-mt-4",children:t.jsx(le,{pluginIds:n})})]})]})}function _s({favoritePluginIds:e,otherPluginIds:n}){return t.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-8",children:[e.length>0&&t.jsxs("section",{children:[t.jsx(qe,{className:"tw-mb-4 !tw-text-lg tw-font-semibold",children:"Favourite Plugins"}),t.jsx(le,{pluginIds:e})]}),n.length>0&&t.jsxs("section",{children:[t.jsxs("div",{className:"tw-flex tw-items-center tw-justify-between tw-gap-4",children:[t.jsx(qe,{className:"tw-mb-4 !tw-text-lg tw-font-semibold",children:"All Plugins"}),t.jsx(Mt,{})]}),t.jsx(le,{pluginIds:n})]})]})}function Fs(){const[e,n]=dt(),[a,r]=p.useState(!1),l=i=>{const c=e.tags,w=e.excludeTags;!c.includes(i)&&!w.includes(i)?n({...e,tags:[...c,i]}):c.includes(i)?n({...e,tags:c.filter(g=>g!==i),excludeTags:[...w,i]}):n({...e,excludeTags:w.filter(g=>g!==i)})},s=i=>{r(i.open)},o=i=>e.tags.includes(i)?"include":e.excludeTags.includes(i)?"exclude":"none",d=()=>e.tags.length+e.excludeTags.length;return t.jsx("div",{className:"tw-flex tw-flex-col tw-gap-2",children:t.jsxs(an,{open:a,positioning:{placement:"bottom-end"},onOpenChange:s,children:[t.jsx(nn,{asChild:!0,children:t.jsx(T,{variant:"ghost",className:"tw-py-2",children:t.jsxs("div",{className:"tw-flex tw-items-center tw-gap-2",children:[t.jsx("span",{children:"Tags"}),d()>0&&t.jsx("div",{className:"tw-flex tw-h-4 tw-w-4 tw-items-center tw-justify-center tw-rounded-full tw-bg-primary/10 tw-text-[10px] tw-font-medium tw-text-primary",children:d()})]})})}),t.jsx(rn,{className:"tw-w-[230px] tw-p-0",children:t.jsx(Ja,{children:t.jsx(en,{className:"tw-p-3 tw-shadow-lg [&_[cmdk-list-sizer]]:tw-flex [&_[cmdk-list-sizer]]:tw-flex-row [&_[cmdk-list-sizer]]:tw-flex-wrap",children:Object.entries(be).map(([i,{label:c,description:w}])=>{const g=o(i);return t.jsx($,{content:w,children:t.jsx(tn,{className:L({"tw-m-1 tw-w-max tw-cursor-pointer tw-rounded-md tw-px-2 tw-py-0.5 tw-text-sm tw-transition-colors hover:tw-bg-primary/10 aria-selected:tw-bg-secondary aria-selected:tw-text-muted-foreground":!0,"tw-bg-primary tw-text-primary-foreground aria-selected:tw-bg-primary aria-selected:tw-text-primary-foreground":g==="include","tw-bg-destructive tw-text-destructive-foreground aria-selected:tw-bg-destructive aria-selected:tw-text-destructive-foreground":g==="exclude","tw-bg-secondary":g==="none"}),onSelect:()=>l(i),children:g==="include"?t.jsxs("span",{className:"tw-flex tw-items-center tw-gap-1",children:[t.jsx(it,{className:"tw-h-3 tw-w-3"}),c]}):g==="exclude"?t.jsxs("span",{className:"tw-flex tw-items-center tw-gap-1",children:[t.jsx($t,{className:"tw-h-3 tw-w-3"}),c]}):c})},i)})})})})]})})}function Hs({searchTerm:e,selectedTags:n,excludeTags:a}){const r="anon",{data:l}=J();return p.useMemo(()=>Object.values(M).filter(o=>{var j;const d=(j=l==null?void 0:l[r])==null?void 0:j.hide.includes(o.id),i=(o.title+o.description).toLowerCase().includes(e.toLowerCase()),c=o.tags!==void 0&&o.tags.length>0,w=n.length===0||c&&n.every(C=>o.tags.includes(C)),g=c&&a.some(C=>o.tags.includes(C));return i&&w&&!g&&!d}).map(o=>o.id),[e,n,a,l,r])}function Vs(){const{settings:e}=v(),{isFetching:n}=J(),[a,r]=dt(),l=Hs({searchTerm:a.searchTerm,selectedTags:a.tags,excludeTags:a.excludeTags}),{favoritePluginIds:s,otherPluginIds:o}=qs({filteredPluginIds:l,favoritePluginIds:e==null?void 0:e.favoritePluginIds}),d=zs(r);return t.jsxs("div",{className:"tw-size-full",children:[t.jsx("h1",{className:"tw-sr-only tw-text-2xl tw-font-bold",children:"Plugins"}),t.jsxs("div",{className:"tw-flex tw-size-full tw-flex-col tw-gap-4 md:tw-mt-0",children:[t.jsxs("div",{className:"tw-ml-auto tw-flex tw-w-full tw-flex-row-reverse tw-gap-4 md:tw-w-fit md:tw-flex-row md:tw-justify-end",children:[t.jsx(Fs,{}),t.jsx(O,{type:"search",placeholder:"Search plugins...",value:a.searchTerm,onChange:d})]}),t.jsx("div",{className:"tw-ml-auto tw-text-balance tw-text-center tw-text-sm tw-text-muted-foreground md:tw-text-left",children:"A full page reload on Perplexity.ai is required when changing plugin settings."}),n?t.jsxs("div",{className:"tw-m-auto tw-flex tw-size-max tw-items-center tw-gap-2",children:[t.jsx(Wt,{className:"tw-animate-spin"}),"Fetching plugins..."]}):t.jsx(Ds,{favoritePluginIds:s,otherPluginIds:o})]})]})}function qs({filteredPluginIds:e,favoritePluginIds:n}){return p.useMemo(()=>{const a=e.filter(l=>n==null?void 0:n.includes(l)),r=e.filter(l=>!(n!=null&&n.includes(l)));return{favoritePluginIds:a,otherPluginIds:r}},[e,n])}function zs(e){return p.useCallback(n=>{e(a=>({...a,searchTerm:n.target.value}))},[e])}function Us(){return Rt([{path:":pluginId/*",element:t.jsx(fr,{})},{path:"*",element:t.jsx(Vs,{})}])}export{Us as default};
