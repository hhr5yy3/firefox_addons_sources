import{r as h}from"./cplx-M4JPizzD.js";import{j as e,g as b,c as T}from"./cplx-DEt7CUyc.js";import{ab as k,J as S,I as L,ac as E,ad as B,ae as D,a1 as z}from"./cplx-CejnDNPm.js";import{A as P}from"./cplx-Cdcyb6EG.js";import{I as c,B as x}from"./cplx-CCGYIZQf.js";import{a1 as _,a0 as G}from"./cplx-CVsLL7Ku.js";import{T as j}from"./cplx-Cqfmi6PF.js";import{D as I,g as M,a as R,b as A,c as O,e as F}from"./cplx-BsCYqTWz.js";import{S as N}from"./cplx-b9fF-OTI.js";import{u as f}from"./cplx-BA4LeNkX.js";import{u as H}from"./cplx-fWvIhvmK.js";import{T as q,b as W,c as w,a as p}from"./cplx-rYRypPy0.js";import{C as V,a as Y,b as $,c as U,d as J,e as K}from"./cplx-C1UhgCtl.js";import{B as v}from"./cplx-D1YT3uoP.js";import{C as Q}from"./cplx-BPC9FkML.js";import{h as X}from"./cplx-BF52nfpw.js";import{b as Z}from"./cplx-BqwXc_LR.js";import{u as ee}from"./cplx-B42KOvrD.js";import"./cplx-BbAh7E-i.js";import"./cplx-CzQHx1MX.js";import"./cplx-DSnlyBAv.js";import"./cplx-CXGk_GMP.js";import"./cplx-CCS6eJc0.js";import"./cplx-B19A3gYQ.js";import"./cplx-D9K5ecXe.js";import"./cplx-CgmVhoKz.js";import"./cplx-km2FGkQ4.js";import"./cplx-D3LDHngQ.js";import"./cplx-BkZI4zpB.js";import"./cplx-D37zsf-y.js";function te(){var n,a;const{settings:t,mutation:s}=f(),{query:{data:i},handleGrantPermission:o}=H(),r=((n=i==null?void 0:i.permissions)==null?void 0:n.includes("scripting"))&&((a=i==null?void 0:i.permissions)==null?void 0:a.includes("webNavigation"));return t?e.jsxs("div",{className:"tw-flex tw-items-center tw-gap-2 md:tw-ml-auto",children:[e.jsx(N,{className:"tw-flex-col tw-gap-2 md:tw-flex-row md:tw-gap-0",textLabel:"Preload theme for a better experience",disabled:!r,checked:t.preloadTheme,onCheckedChange:({checked:l})=>{s.mutate(C=>C.preloadTheme=l)}}),e.jsx("div",{className:"tw-text-sm tw-text-muted-foreground",children:e.jsx(j,{content:e.jsxs("div",{className:"tw-text-balance tw-p-2",children:["Instead of inserting ",e.jsx(c,{children:"<style>"})," tags, Complexity uses ",e.jsx(c,{children:"scripting"})," and"," ",e.jsx(c,{children:"webNavigation"})," permissions to inject styles before the page loads. This results in a smooth, flicker-free experience. Complexity"," ",e.jsx("span",{className:"tw-font-semibold tw-underline",children:"ONLY"})," uses these permissions for theme injection - it never tracks your browsing history or collects any personal data. Please review the source code if you have further questions."]}),children:e.jsx(k,{className:"tw-size-4"})})}),!r&&e.jsxs(I,{children:[e.jsx(M,{asChild:!0,children:e.jsx(x,{children:"Grant Permissions"})}),e.jsxs(R,{children:[e.jsx(A,{children:e.jsx(O,{children:"Grant Permissions"})}),e.jsxs("div",{children:["You'll be asked to grant the extension both"," ",e.jsx(c,{children:"scripting"})," and"," ",e.jsx(c,{children:"webNavigation"})," permissions. While the permission prompt mentions access to browsing history, we want to assure you that we"," ",e.jsx("span",{className:"tw-font-semibold tw-text-primary tw-underline",children:"NEVER"})," ","read or store any of your history data - these permissions are only used for theme injection."]}),e.jsx(F,{children:e.jsx(x,{onClick:()=>{o({permissions:["scripting","webNavigation"]}),s.mutate(l=>l.preloadTheme=!0)},children:"Grant Permissions"})})]})]})]}):null}function se({theme:t}){const{settings:s,mutation:i}=f(),o=(s==null?void 0:s.theme)===(t==null?void 0:t.id),r=h.useCallback(()=>{i.mutate(n=>{n.theme=o?"":t.id})},[i,o,t]);return e.jsx(j,{content:o?"Disable":"Enable",children:e.jsx(N,{checked:o,onCheckedChange:r})})}const g=h.memo(({type:t})=>{const s=t==="light"?S:L;return e.jsxs(v,{variant:"secondary",className:"tw-flex tw-items-center tw-gap-2",children:[e.jsx(s,{className:"tw-size-3"}),t==="light"?"Light":"Dark"]})}),y=h.memo(({type:t})=>{const s=t==="desktop"?E:B;return e.jsxs(v,{variant:"outline",className:"tw-flex tw-items-center tw-gap-2",children:[e.jsx(s,{className:"tw-size-3"}),t==="desktop"?"Desktop":"Mobile"]})}),m={complexity:"oklch(74.37% 0.1304 255.6)","complexity-perplexity":"oklch(71.56% 0.1183 209.17)","complexity-shy-moment":"oklch(73.59% 0.1411 285.6)","complexity-sour-lemon":"oklch(93.86% 0.0876 92.74)"};function d({color:t}){const s=t!=null;return t||(t=m["complexity-perplexity"]),e.jsxs("div",{className:"tw-relative tw-flex tw-size-full tw-items-center tw-justify-center tw-bg-[oklch(21.67%_0.0016_197.04)]",children:[s&&e.jsx("div",{className:"tw-absolute tw-size-[50%] tw-rounded-full tw-blur-2xl",style:{backgroundColor:`color-mix(in srgb, ${t} 20%, transparent)`}}),e.jsx(Q,{className:"tw-relative tw-size-[50%] tw-fill-[oklch(93.34%_0.0025_106.45)]",primary:t})]})}const ie={complexity:e.jsx(d,{color:m.complexity}),"complexity-perplexity":e.jsx(d,{color:m["complexity-perplexity"]}),"complexity-shy-moment":e.jsx(d,{color:m["complexity-shy-moment"]}),"complexity-sour-lemon":e.jsx(d,{color:m["complexity-sour-lemon"]})};function oe({theme:t}){return e.jsx("div",{className:"tw-size-full tw-transition-transform tw-duration-500 group-hover:tw-scale-110",children:e.jsx(re,{theme:t})})}function re({theme:t}){var i;if(t.featuredImage)return e.jsx("img",{src:t.featuredImage,alt:t.title,className:"tw-size-full tw-object-cover"});const s=ie[t.id];return s!=null?e.jsx("div",{className:"tw-h-full tw-w-full",children:s}):e.jsx(d,{color:(i=t.config)!=null&&i.accentColor?`oklch(${X(t.config.accentColor)})`:void 0})}function ne({theme:t}){const s=b();return e.jsx(j,{content:"Edit",children:e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>s(`${t.id}/edit`),children:e.jsx(D,{})})})}function le({theme:t,type:s}){var r,n,a,l;const{settings:i}=f(),o=(i==null?void 0:i.theme)===(t==null?void 0:t.id);return t?e.jsxs(V,{className:T("tw-group tw-relative tw-flex tw-flex-col tw-overflow-hidden tw-border-border/50 tw-bg-secondary tw-transition-all",{"tw-border-primary tw-bg-primary/10":o}),children:[e.jsx("div",{className:"tw-relative tw-aspect-[16/9] tw-overflow-hidden",children:e.jsx(oe,{theme:t})}),e.jsxs(Y,{className:"tw-space-y-0",children:[e.jsx($,{className:"tw-text-lg",children:t.title}),e.jsx(U,{children:t.description})]}),e.jsx(J,{className:"tw-grow",children:e.jsxs("div",{className:"tw-flex tw-flex-wrap tw-gap-2",children:[((r=t.colorScheme)==null?void 0:r.includes("light"))&&e.jsx(g,{type:"light"}),((n=t.colorScheme)==null?void 0:n.includes("dark"))&&e.jsx(g,{type:"dark"}),((a=t.compatibleWith)==null?void 0:a.includes("desktop"))&&e.jsx(y,{type:"desktop"}),((l=t.compatibleWith)==null?void 0:l.includes("mobile"))&&e.jsx(y,{type:"mobile"})]})}),e.jsxs(K,{className:"tw-flex tw-flex-row tw-justify-end tw-gap-2",children:[s==="local"&&e.jsx(ne,{theme:t}),e.jsx(se,{theme:t})]})]}):null}function ae({builtInThemes:t,localThemes:s}){const{isMobile:i}=Z();return t.length===0&&s.length===0?e.jsx("div",{children:"No themes found"}):i?e.jsx(ce,{builtInThemes:t,localThemes:s}):e.jsx(me,{builtInThemes:t,localThemes:s})}function u({themes:t,type:s}){return e.jsx("div",{className:"tw-grid tw-grid-cols-1 tw-gap-4 md:tw-grid-cols-2 lg:tw-grid-cols-3 xl:tw-grid-cols-4",children:t.map(i=>e.jsx(le,{theme:i,type:s},i.id))})}function ce({builtInThemes:t,localThemes:s}){const i=s.length>0?"local":"built-in";return e.jsxs(q,{defaultValue:i,children:[e.jsxs(W,{children:[s.length>0&&e.jsx(w,{value:"local",children:"Local Themes"}),t.length>0&&e.jsx(w,{value:"built-in",children:"Built-in Themes"}),e.jsx(w,{value:"community",children:"Community Themes"})]}),t.length>0&&e.jsx(p,{value:"built-in",className:"tw-mt-4",children:e.jsx(u,{themes:t,type:"built-in"})}),s.length>0&&e.jsx(p,{value:"local",className:"tw-mt-4",children:e.jsx(u,{themes:s,type:"local"})}),e.jsx(p,{value:"community",className:"tw-mt-4",children:e.jsx("div",{className:"tw-text-muted-foreground",children:"Coming soon"})})]})}function me({builtInThemes:t,localThemes:s}){return e.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-8",children:[s.length>0&&e.jsxs("section",{children:[e.jsx("h2",{className:"tw-mb-4 tw-text-lg tw-font-semibold",children:"Local Themes"}),e.jsx(u,{themes:s,type:"local"})]}),t.length>0&&e.jsxs("section",{children:[e.jsx("h2",{className:"tw-mb-4 tw-text-lg tw-font-semibold",children:"Built-in Themes"}),e.jsx(u,{themes:t,type:"built-in"})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"tw-mb-4 tw-text-lg tw-font-semibold",children:"Community Themes"}),e.jsx("div",{className:"tw-text-muted-foreground",children:"Coming soon"})]})]})}function de(){return ee({queryKey:["local-themes"],queryFn:()=>_().getAll()})}function He(){const t=b(),s=h.useMemo(()=>G,[]),{data:i}=de();return e.jsxs("div",{className:"tw-space-y-6",children:[e.jsxs("div",{className:"tw-flex tw-flex-wrap tw-items-center tw-justify-between tw-gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"tw-mb-2 tw-text-2xl tw-font-bold",children:"Custom Themes"}),e.jsx("p",{className:"tw-text-muted-foreground",children:"Customize your Perplexity interface with curated themes"})]}),e.jsxs(x,{className:"tw-mx-auto md:tw-mx-0 md:tw-mt-auto",onClick:()=>t("new"),children:[e.jsx(z,{className:"tw-mr-2 tw-size-5"}),"Create New Theme"]})]}),P.BROWSER==="chrome"&&e.jsx(te,{}),e.jsx(ae,{localThemes:i??[],builtInThemes:s})]})}export{He as default};
