var content=function(){"use strict";var re=Object.defineProperty;var se=(T,E,x)=>E in T?re(T,E,{enumerable:!0,configurable:!0,writable:!0,value:x}):T[E]=x;var f=(T,E,x)=>se(T,typeof E!="symbol"?E+"":E,x);function T(s){return s}const E={main:()=>{},matches:["http://*/*","https://*/*"]};var x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var H={exports:{}};(function(s,t){(function(i,g){g(s)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:x,function(i){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)i.exports=globalThis.browser;else{const g="The message port closed before a response was received.",d=c=>{const I={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(I).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class O extends WeakMap{constructor(r,o=void 0){super(o),this.createItem=r}get(r){return this.has(r)||this.set(r,this.createItem(r)),super.get(r)}}const Z=e=>e&&typeof e=="object"&&typeof e.then=="function",G=(e,r)=>(...o)=>{c.runtime.lastError?e.reject(new Error(c.runtime.lastError.message)):r.singleCallbackArg||o.length<=1&&r.singleCallbackArg!==!1?e.resolve(o[0]):e.resolve(o)},R=e=>e==1?"argument":"arguments",z=(e,r)=>function(a,...l){if(l.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${R(r.minArgs)} for ${e}(), got ${l.length}`);if(l.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${R(r.maxArgs)} for ${e}(), got ${l.length}`);return new Promise((m,_)=>{if(r.fallbackToNoCallback)try{a[e](...l,G({resolve:m,reject:_},r))}catch(n){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,n),a[e](...l),r.fallbackToNoCallback=!1,r.noCallback=!0,m()}else r.noCallback?(a[e](...l),m()):a[e](...l,G({resolve:m,reject:_},r))})},D=(e,r,o)=>new Proxy(r,{apply(a,l,m){return o.call(l,e,...m)}});let C=Function.call.bind(Object.prototype.hasOwnProperty);const v=(e,r={},o={})=>{let a=Object.create(null),l={has(_,n){return n in e||n in a},get(_,n,u){if(n in a)return a[n];if(!(n in e))return;let A=e[n];if(typeof A=="function")if(typeof r[n]=="function")A=D(e,e[n],r[n]);else if(C(o,n)){let h=z(n,o[n]);A=D(e,e[n],h)}else A=A.bind(e);else if(typeof A=="object"&&A!==null&&(C(r,n)||C(o,n)))A=v(A,r[n],o[n]);else if(C(o,"*"))A=v(A,r[n],o["*"]);else return Object.defineProperty(a,n,{configurable:!0,enumerable:!0,get(){return e[n]},set(h){e[n]=h}}),A;return a[n]=A,A},set(_,n,u,A){return n in a?a[n]=u:e[n]=u,!0},defineProperty(_,n,u){return Reflect.defineProperty(a,n,u)},deleteProperty(_,n){return Reflect.deleteProperty(a,n)}},m=Object.create(e);return new Proxy(m,l)},F=e=>({addListener(r,o,...a){r.addListener(e.get(o),...a)},hasListener(r,o){return r.hasListener(e.get(o))},removeListener(r,o){r.removeListener(e.get(o))}}),Q=new O(e=>typeof e!="function"?e:function(o){const a=v(o,{},{getContent:{minArgs:0,maxArgs:0}});e(a)}),U=new O(e=>typeof e!="function"?e:function(o,a,l){let m=!1,_,n=new Promise(b=>{_=function(P){m=!0,b(P)}}),u;try{u=e(o,a,_)}catch(b){u=Promise.reject(b)}const A=u!==!0&&Z(u);if(u!==!0&&!A&&!m)return!1;const h=b=>{b.then(P=>{l(P)},P=>{let W;P&&(P instanceof Error||typeof P.message=="string")?W=P.message:W="An unexpected error occurred",l({__mozWebExtensionPolyfillReject__:!0,message:W})}).catch(P=>{console.error("Failed to send onMessage rejected reply",P)})};return h(A?u:n),!0}),J=({reject:e,resolve:r},o)=>{c.runtime.lastError?c.runtime.lastError.message===g?r():e(new Error(c.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?e(new Error(o.message)):r(o)},$=(e,r,o,...a)=>{if(a.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${R(r.minArgs)} for ${e}(), got ${a.length}`);if(a.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${R(r.maxArgs)} for ${e}(), got ${a.length}`);return new Promise((l,m)=>{const _=J.bind(null,{resolve:l,reject:m});a.push(_),o.sendMessage(...a)})},ee={devtools:{network:{onRequestFinished:F(Q)}},runtime:{onMessage:F(U),onMessageExternal:F(U),sendMessage:$.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:$.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},M={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return I.privacy={network:{"*":M},services:{"*":M},websites:{"*":M}},v(c,ee,I)};i.exports=d(chrome)}})})(H);var j=H.exports;const S=V(j);function L(s,...t){}const q={debug:(...s)=>L(console.debug,...s),log:(...s)=>L(console.log,...s),warn:(...s)=>L(console.warn,...s),error:(...s)=>L(console.error,...s)},K={BASE_URL:"/",BROWSER:"firefox",CHROME:!1,COMMAND:"build",DEV:!1,EDGE:!1,ENTRYPOINT:"content",FIREFOX:!0,MANIFEST_VERSION:2,MODE:"production",OPERA:!1,PLP_AFFILIATION_TTL_IN_MINUTES:"60",PLP_API_CALLING_CONTEXT:"ext",PLP_API_CLIENT_ID:"als61e6732c50ec95.25615046",PLP_API_DOMAIN:"api.poulpeo.com",PLP_API_LOGGER_ENABLED:"false",PLP_API_LOGIN_PATHS:"/1.0/web/auth/login,/1.0/web/auth/loginWithApple,/1.0/web/auth/loginWithFacebook,/1.0/web/auth/loginWithGoogle,/1.0/web/auth/register",PLP_API_LOGOUT_PATHS:"/1.0/web/me/logout",PLP_API_VERSION:"1.0",PLP_APPLICATION_APPLE_APP_STORE_URL:"https://itunes.apple.com/fr/app/poulpeo/id545935519?mt=8",PLP_APPLICATION_GOOGLE_PLAY_STORE_URL:"https://play.google.com/store/apps/details?id=com.poulpeo",PLP_AUTHENTICATION_PENDING_REQUEST_TTL_IN_MINUTES:"5",PLP_COUPON_APPLIER_CONFIGS_API_URL:"https://drivers-extension.poulpeo.io/latest/a4c-drivers.json",PLP_COUPON_APPLIER_CONFIGS_DECRYPTION_KEY:"N1gE77itqfhygc8vGGWwA4FK6583nxUGx06iAlF2",PLP_COUPON_APPLIER_TRACKING_API_URL:"https://analytics.besttoolbars.net/api/v1/activity/poulpeo",PLP_EXTENSION_INSTALLATION_MARKER_DOMAIN_WHITELIST:"www.poulpeo.com",PLP_FORCE_SIDEBAR_OPEN:"false",PLP_LEGACY_API_BASE_URL:"https://extension.poulpeo.com/extension/api/1.0",PLP_LONG_LIVED_CACHE_CLEAR_DELAY_IN_MINUTES:"0",PLP_LONG_LIVED_CACHE_TTL_IN_MINUTES:"1440",PLP_MESSAGING_SERVICE_DEFAULT_WAIT_DURATION_MS:"8000",PLP_NOTIFICATION_DEFAULT_TTL_IN_MINUTES:"60",PLP_ONBOARDING_ENABLED:"true",PLP_SENTRY_DSN:"https://f3fc01481b564848a9468792f943f99b@sentry.io/1800537",PLP_SHORT_LIVED_CACHE_CLEAR_DELAY_IN_MINUTES:"0",PLP_SHORT_LIVED_CACHE_TTL_IN_MINUTES:"30",PLP_SIDEBAR_MOUNT_POINT_ID:"",PLP_TRACKING_ENABLED:"true",PLP_WEBSITE_ABOUT_OFFERS_RANKING_PATH:"/classement-et-selection-des-offres.html",PLP_WEBSITE_BASE_URL:"https://www.poulpeo.com",PLP_WEBSITE_CONTACT_INFO_PATH:"/coordonnees.htm",PLP_WEBSITE_EXTENSION_UNINSTALL_FORM_PATH:"/extension.htm?s=uninstall",PLP_WEBSITE_GIFT_CARD_CASHBACK_PATH:"/cashback-bon-d-achat.html",PLP_WEBSITE_HOW_IT_WORKS_PATH:"/comment-ca-marche.htm",PLP_WEBSITE_LOGIN_PATH:"/connexion",PLP_WEBSITE_LOGIN_WITH_APPLE_PATH:"/connexion?provider_name=apple",PLP_WEBSITE_LOGIN_WITH_FACEBOOK_PATH:"/connexion?provider_name=facebook",PLP_WEBSITE_LOGIN_WITH_GOOGLE_PATH:"/connexion?provider_name=google",PLP_WEBSITE_LOGOUT_PATH:"/deconnexion",PLP_WEBSITE_MERCHANT_PAGE_PATH:"/reductions-{rewrite}.htm",PLP_WEBSITE_POT_PATH:"/compte.htm",PLP_WEBSITE_REDIRECTION_PATH:"/redirection.htm",PLP_WEBSITE_REDIRECTION_PATHS:"/redirection.htm,/redirection/",PLP_WEBSITE_REDIRECTION_PATH_FOR_GIFT_CARD:"/redirection/ifg/",PLP_WEBSITE_REDIRECTION_PATH_FROM_KRAKEN_TO_MIWIM:"/redirection/mwm/",PLP_WEBSITE_REGISTRATION_PATH:"/inscription",PLP_WEBSITE_REGISTRATION_SPONSORSHIP_PATH:"/inscription/parrainage",PLP_WEBSITE_REGISTRATION_WITH_APPLE_PATH:"/inscription?provider_name=apple",PLP_WEBSITE_REGISTRATION_WITH_FACEBOOK_PATH:"/inscription?provider_name=facebook",PLP_WEBSITE_REGISTRATION_WITH_GOOGLE_PATH:"/inscription?provider_name=google",PLP_WEBSITE_SPONSORSHIP_EXPLANATION_PATH:"/mag-le-parrainage-poulpeo-comment-ca-marche.html",PLP_WEBSITE_SPONSORSHIP_LINK_PATH:"/p/{sponsorKey}",PLP_WEBSITE_TERMS_OF_USE_PATH:"/conditions-utilisation.html",PLP_WEBSITE_TOP_MERCHANTS_PATH:"/top-marchands.htm",PROD:!0,SAFARI:!1,SSR:!1},w=class w extends Event{constructor(t,i){super(w.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=i}};f(w,"EVENT_NAME",k("wxt:locationchange"));let y=w;function k(s){var i;const t=typeof K>"u"?"build":"content";return`${(i=S==null?void 0:S.runtime)==null?void 0:i.id}:${t}:${s}`}function Y(s){let t,i;return{run(){t==null&&(i=new URL(location.href),t=s.setInterval(()=>{let g=new URL(location.href);g.href!==i.href&&(window.dispatchEvent(new y(g,i)),i=g)},1e3))}}}const p=class p{constructor(t,i){f(this,"isTopFrame",window.self===window.top);f(this,"abortController");f(this,"locationWatcher",Y(this));this.contentScriptName=t,this.options=i,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return S.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,i){const g=setInterval(()=>{this.isValid&&t()},i);return this.onInvalidated(()=>clearInterval(g)),g}setTimeout(t,i){const g=setTimeout(()=>{this.isValid&&t()},i);return this.onInvalidated(()=>clearTimeout(g)),g}requestAnimationFrame(t){const i=requestAnimationFrame((...g)=>{this.isValid&&t(...g)});return this.onInvalidated(()=>cancelAnimationFrame(i)),i}requestIdleCallback(t,i){const g=requestIdleCallback((...d)=>{this.signal.aborted||t(...d)},i);return this.onInvalidated(()=>cancelIdleCallback(g)),g}addEventListener(t,i,g,d){var c;i==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(c=t.addEventListener)==null||c.call(t,i.startsWith("wxt:")?k(i):i,g,{...d,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),q.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:p.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")}listenForNewerScripts(t){let i=!0;const g=d=>{var c,I;if(((c=d.data)==null?void 0:c.type)===p.SCRIPT_STARTED_MESSAGE_TYPE&&((I=d.data)==null?void 0:I.contentScriptName)===this.contentScriptName){const O=i;if(i=!1,O&&(t!=null&&t.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",g),this.onInvalidated(()=>removeEventListener("message",g))}};f(p,"SCRIPT_STARTED_MESSAGE_TYPE",k("wxt:content-script-started"));let B=p;function te(){}function N(s,...t){}const X={debug:(...s)=>N(console.debug,...s),log:(...s)=>N(console.log,...s),warn:(...s)=>N(console.warn,...s),error:(...s)=>N(console.error,...s)};return(async()=>{try{const{main:s,...t}=E,i=new B("content",t);return await s(i)}catch(s){throw X.error('The content script "content" crashed on startup!',s),s}})()}();
content;
