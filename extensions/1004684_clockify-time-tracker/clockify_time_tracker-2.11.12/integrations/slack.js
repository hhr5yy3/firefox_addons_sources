function isEmoji(e){try{return String.fromCodePoint(parseInt(e,16)),!0}catch{return!1}}function handleEmojisAndNewLines(e){if($(".clockify-ext",e))return;const t=e.cloneNode(!0),n=Array.from($$("img",t)||[]),o=Array.from($$(".c-mrkdwn__br, br",t)||[]),r=Array.from($$("li, pre",t)||[]);return o.forEach((e=>e.replaceWith("\n"))),r.forEach((e=>e.after("\n"))),n.forEach((e=>{const t=e.src.split("/").reverse()[0].split(".")[0];if(!isEmoji(t))return;const n=String.fromCodePoint(parseInt(t,16)),o=createTag("span","clockify-ext",n);console.log(o),e.replaceWith(o)})),t}function createContextMenuSeparator(){const e=createTag("div"),t=createTag("hr");return e.classList.add("c-menu_separator__li","c-menu_separator__li--no_first_child","c-menu_separator__li--no_last_child"),t.classList.add("c-menu_separator__separator"),e.append(t),e}function initializeBodyObserver(){const e=new MutationObserver(applyManualInputStyles),t=document.body;e.observe(t,{attributes:!0})}function applyManualInputStyles(){const e=Array.from(document.body.classList).join(" ").includes("theme--dark");applyStyles(e?".clockify-button-inactive { color: #d1d2d3 !important; }":".clockify-button-inactive { color: #444444 !important };","clockify-theme-dependent-styles")}clockifyButton.render(".c-message_actions__group:not(.clockify)",{observe:!0},(e=>{const t=e.closest('[aria-roledescription="message"]'),n=Array.from(e.children).reverse()[0],o=handleEmojisAndNewLines(t),r=()=>$(".c-message_kit__blocks",o).innerText;if(!r())return;const c=clockifyButton.createButton({description:r,small:!0});c.classList.add("c-button-unstyled","c-icon_button","c-icon_button--size_small","c-message_actions__button","c-icon_button--default"),n.before(c)})),clockifyButton.render(".c-popover .c-menu__items:not(.clockify)",{observe:!0},(e=>{if(e.closest(".c-submenu"))return;const t=handleEmojisAndNewLines($(".c-message_actions__group").closest('[aria-roledescription="message"]')),n=()=>$(".c-message_kit__blocks",t).innerText;if(!n())return;const o=clockifyButton.createButton({description:n});o.classList.add("c-menu_item__li"),o.style.padding="0 24px",o.style.display="block";const r=createContextMenuSeparator();e.append(r),e.append(o),o.addEventListener("mouseover",(()=>{Array.from($$(".c-menu_item__button--highlighted",e)).forEach((e=>{e.classList.remove("c-menu_item__button--highlighted"),e.parentElement.classList.remove("c-menu_item__li--highlighted")}))}))})),applyStyles("\n\t.c-popover .c-menu__items .c-menu_item__li:hover span.clockify-button-inactive {\n\t\tcolor: #fff !important;\n\t}\n\n\t.c-popover .c-menu__items .c-menu_item__li:hover {\n\t\tbackground-color: #1164A3;\n\t}\n"),initializeBodyObserver();