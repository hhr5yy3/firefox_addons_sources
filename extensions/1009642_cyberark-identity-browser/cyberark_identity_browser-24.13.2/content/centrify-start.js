"undefined"==typeof _idaptiveUniqueGlobal&&(_idaptiveUniqueGlobal={}),function(){var o=this;void 0===o.communication&&(o.communication={}),void 0===o.firefox&&(o.firefox={}),o.firefox.Log={},o.firefox.Log.prototype={logWithLevel:function(e,n){o.firefox.communicate2Bg.sendMessage2Bg({action:o.communication.CentrifyEventEnum.log,time:this.getTime(),level:e,loggerName:this.loggerName,message:n})}},o.firefox.communicate2Bg={sendMessage2Bg:function(e,n,t){browser.runtime.sendMessage(e).then(n,t)}},o.communication.CentrifyBEVersionToHost=function(){o.communication.CentrifyBEVersionToHostBase.call(this),this.logWithLevel=o.firefox.Log.prototype.logWithLevel},o.communication.CentrifyBEVersionToHost.prototype={},o.common.objectExtend(o.communication.CentrifyBEVersionToHost,o.communication.CentrifyBEVersionToHostBase),o.communication.centrifyBEVersionToHost=new o.communication.CentrifyBEVersionToHost,o.communication.CentrifyBESecuCheck=function(){o.communication.CentrifyBESecuCheckBase.call(this),this.logWithLevel=o.firefox.Log.prototype.logWithLevel},o.communication.CentrifyBESecuCheck.prototype={showPrompt:!1,promptFlag:!1,setChildPodValue:function(e,n){o.firefox.communicate2Bg.sendMessage2Bg({action:o.communication.CentrifyEventEnum.setChildpodHostname,newChild:e,isShell:n})},isDocIgnore:function(e){return!!o.communication.CentrifyBESecuCheckBase.prototype.isDocIgnore.call(this,e)||0===e.URL.indexOf("moz-extension://")},checkIfAddDialog:function(e,n){var t="",i=n.isShell;(i?(t=n.newChildPod.masterShellTenant.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),new RegExp("^https://"+t+"/(idusrportal|userportal)+","i")):(t=n.newChildPod.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),new RegExp("^https://"+t+"((/my([#?]|$))|(/home[^/]*))","i"))).test(e.URL)&&(this.log("The current document matches the domain of the pod which we are prompting for."),this.showPrompt=!0,this.promptFlag=!0,this.addDialog(e,n,i))},listener:function(e,n,t){var i=this;e.action===o.communication.CentrifyEventEnum.setPrompt&&(i.logWithLevel("Got setPrompt even in content script"),document.defaultView.top!==document.defaultView.self?i.log("document is in an iframe, skipping prompt"):i.promptFlag?i.logWithLevel("Deciding not to show the prompt because we already marked it as being shown."):(i.logWithLevel("Deciding to show the prompt because we think it is not already being shown."),e={newChildPod:e.newChildPod,currChildPod:e.currChildPod,isShell:e.isShell},i.checkIfAddDialog(document,e)))}},o.common.objectExtend(o.communication.CentrifyBESecuCheck,o.communication.CentrifyBESecuCheckBase),o.communication.centrifyBESecuCheck=new o.communication.CentrifyBESecuCheck,browser.runtime.onMessage.addListener(function(e,n,t){o.communication.centrifyBESecuCheck.listener(e,n,t)}),document.addEventListener(o.communication.centrifyBEVersionToHost.CentrifyExternalEventEnum.infoRequest,function(e){o.firefox.communicate2Bg.sendMessage2Bg({action:o.communication.CentrifyEventEnum.initAll},function(e){o.communication.centrifyBEVersionToHost.debugMode=e.debugMode,o.communication.centrifyBEVersionToHost.browserType=e.browserType,o.communication.centrifyBEVersionToHost.cbeVersion=e.cbeVersion,o.communication.centrifyBEVersionToHost.versionListener(document)})},!1),o.communication.CentrifyBEMultiAccountCheck=function(){o.communication.CentrifyBEMultiAccountCheckBase.call(this),this.logWithLevel=o.firefox.Log.prototype.logWithLevel},o.communication.CentrifyBEMultiAccountCheck.prototype={centrifyBEMultiAccountCheckListener:function(e,n){switch(e.action){case o.communication.CentrifyEventEnum.checkIsAppAccountSignedInResponse:e.result?this.checkIfAddDialog(n,e.info):this.responseUP(n,!0);break;case o.communication.CentrifyEventEnum.signOutAppCurAccountResponse:this.removeDialog(),this.responseUP(n,!0)}},checkMultiAccount:function(e,n){this.log("start check Multi Account apps"),o.firefox.communicate2Bg.sendMessage2Bg({action:o.communication.CentrifyEventEnum.checkIsAppAccountSignedInRequest,appkey:n})},signOutCurAccount:function(e,n){o.firefox.communicate2Bg.sendMessage2Bg({action:o.communication.CentrifyEventEnum.signOutAppCurAccountRequest,appkey:n})}},o.common.objectExtend(o.communication.CentrifyBEMultiAccountCheck,o.communication.CentrifyBEMultiAccountCheckBase),o.communication.centrifyBEMultiAccountCheck=new o.communication.CentrifyBEMultiAccountCheck,o.firefox.communicate2Bg.sendMessage2Bg({action:o.communication.CentrifyEventEnum.initAll},function(e){o.communication.centrifyBEMultiAccountCheck.debugMode=e.debugMode,browser.runtime.onMessage.addListener(function(e,n,t){o.communication.centrifyBEMultiAccountCheck.centrifyBEMultiAccountCheckListener(e,document)}),document.addEventListener(o.communication.centrifyBEMultiAccountCheck.CentrifyExternalEventEnum.multiAccountCheckRequest,function(e){o.communication.centrifyBEMultiAccountCheck.multiAccountCheckListener(document)})}),o.firefox.communicate2Bg.sendMessage2Bg({action:o.communication.CentrifyEventEnum.pageLoad})}.call(_idaptiveUniqueGlobal);