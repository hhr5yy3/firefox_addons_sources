"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[8652],{48094:(e,t,n)=>{n.d(t,{D:()=>l});var a=n(61468),i=n(96832),o=n(68593);const l=(0,i.forwardRef)((({label:e,name:t,value:n,placeholder:l,options:c,disabled:r,dataName:s="localeFormat",onChange:_},d)=>{const u=(0,i.useMemo)((()=>c.map((e=>(0,o.tZ)(a.$m,{value:e.value,children:e.label},e.value)))),[c]);return(0,o.tZ)(a.mg,{ref:d,name:t,label:e,placeholder:l,"data-name":s,value:n,onChange:_,readOnly:r,children:u},"country")}));l.displayName="CountryField"},48652:(e,t,n)=>{n.r(t),n.d(t,{Connected:()=>v});var a,i=n(24507),o=n(25792),l=n(39431),c=n(96832),r=n(26849),s=n(78346),_=n(8180),d=n(14900),u=n(48062),p=n(86498),m=n(88203),b=n(45272),C=n(92077),h=n(76376),I=n(63520),g=n(82994),y=n(8940),f=n(49087),k=n(3045),B=n(31605),A=n(61468),w=n(68593);const S=({item:e})=>{const{translate:t}=(0,m.Z)(),{routes:n}=(0,h.Xo)(),{updateVaultItem:i}=(0,_.u)(o.L),[S,v]=(0,c.useState)(!1),[D,N]=(0,c.useState)(!1),[E,L]=(0,c.useState)(new Set),[P,V]=(0,c.useState)(e),[Z,O]=(0,c.useState)(!1),{areProtectedItemsUnlocked:T,openProtectedItemsUnlocker:R,protectedItemsUnlockerShown:U}=(0,k.t)(),F=(0,f.B)(),H=(0,p.V)();(0,c.useEffect)((()=>{(0,b.Nc)(u.PageView.ItemBankStatementDetails)}),[]);const x=()=>{(0,b.Nc)(u.PageView.ItemPaymentList),(0,C.uX)(n.userPayments)},q=(0,c.useCallback)((t=>{V((n=>{const a={...n,...t};return v(!(0,r.equals)(a,e)),a}))}),[e]),M=()=>{H.showAlert(t("_common_generic_error"),d.BLW.ERROR)},G={confirmDeleteConfirm:t("webapp_payment_edition_bank_account_delete_confirm"),confirmDeleteDismiss:t("webapp_payment_edition_bank_account_delete_dismiss"),confirmDeleteSubtitle:t("webapp_payment_edition_bank_account_delete_subtitle"),confirmDeleteTitle:t("webapp_payment_edition_bank_account_delete_title"),deleteSuccessToast:e.accountName?t("webapp_payment_edition_bank_account_name_delete_alert",{accountName:e.accountName}):t("webapp_payment_edition_bank_account_generic_delete_alert")},z=U||Z;return(0,w.BX)(I.zI,{isUsingNewDesign:!0,onNavigateOut:x,ignoreCloseOnEscape:z,formId:"bank-account-edit-form",onSubmit:async()=>{if(D)return;const n=(0,y.e)(P);if(!n.isValid)return L(n.errorSet);N(!0);try{const n=await i({vaultItemType:l.U.BankAccount,content:P,id:e.id});if((0,s.d6)(n)){const e=P.accountName?t("webapp_payment_edition_bank_account_name_update_alert",{accountName:P.accountName}):t("webapp_payment_edition_bank_account_generic_update_alert");H.showAlert(e,d.BLW.SUCCESS),x()}else N(!1),M()}catch(e){N(!1),M()}},header:(0,w.tZ)(I.V9,{icon:a||(a=(0,w.tZ)(A.AK,{type:"bank-account",size:"xlarge"})),title:e.accountName}),onClickDelete:()=>{O(!0)},itemHasBeenEdited:S,isViewingExistingItem:!0,children:[(0,w.tZ)(y.o,{itemId:e.id,bankAccount:P,errors:E,onCopy:e=>{F.setAlertMessage(e),F.show()},onValueChanged:q,areProtectedItemsUnlocked:T,openProtectedItemsUnlocker:R,variant:"edit"}),(0,w.tZ)(g.s,{isVisible:Z,itemId:e.id,closeConfirmDeleteDialog:()=>{O(!1)},onDeletionSuccess:x,translations:G,vaultItemType:l.U.BankAccount}),F.isAlertVisible&&(0,w.tZ)("div",{className:B.Z.alertWrapper,children:(0,w.tZ)(d.bZj,{size:d.k3y.SMALL,severity:d.BLW.SUCCESS,closeIconName:t("_common_alert_dismiss_button"),onClose:()=>{F.hide()},children:F.alertMessage})})]})},v=e=>{const{data:t}=(0,i.k)(o.L,"query",{vaultItemTypes:[l.U.BankAccount],ids:[`{${e.match.params.uuid}}`]});return t?.bankAccountsResult.items.length?(0,w.tZ)(S,{...e,item:t.bankAccountsResult.items[0]}):null}},8940:(e,t,n)=>{n.d(t,{o:()=>O,e:()=>T});var a=n(96832),i=n(44105),o=n(48062),l=n(61468),c=n(88203),r=n(45272),s=n(77063),_=n(82207),d=n(68819),u=n(67406),p=n(30309);const m="webapp_payment_edition_field_bank_account_BIC",b="webapp_payment_edition_field_bank_account_no_BIC_placeholder",C="webapp_payment_edition_field_bank_account_account_number",h="webapp_payment_edition_field_bank_account_no_account_number_placeholder",I="webapp_payment_alert_bank_account_BIC_copied",g="webapp_payment_alert_bank_account_account_number_copied";var y=n(48038),f=n(5465);const k={},B=e=>e!==k,A=[];var w=n(68037),S=n(48094),v=n(79432),D=n(68593);const N="webapp_payment_edition_field_bank_account_action_hide",E="webapp_payment_edition_field_bank_account_action_show",L="webapp_payment_edition_field_bank_account_country",P="webapp_payment_edition_field_bank_account_bank_name",V=(e,t)=>e.filter((e=>!(i.c[e]===i.c.UNIVERSAL||i.c[e]===i.c.NO_TYPE))).map((e=>({label:t(`country_name_${i.c[e]}`),value:i.c[e]}))).sort(((e,t)=>e.label.localeCompare(t.label))),Z=(e,t)=>{const{bankAccount:n,errors:Z=new Set,onValueChanged:O}=e,{bankCode:T,accountName:R,IBAN:U,BIC:F,ownerName:H,spaceId:x,country:q}=n,M=U.length>0,G=F.length>0,z=Boolean(x),[W,X]=(0,a.useState)(!G),[$,K]=(0,a.useState)(!M),{translate:j}=(0,c.Z)(),{shouldShowFrozenStateDialog:J}=(0,s.Ub)(),{logRevealBankAccountField:Y,logCopiedBankAccountField:Q}=(0,v.D)(),ee="edit"===e.variant?!e.areProtectedItemsUnlocked:void 0,te=(e=>{switch(e){case p.cH.MX:return{IBAN:"webapp_payment_edition_field_bank_account_CLABE",BIC:m,IBAN_PLACEHOLDER:"webapp_payment_edition_field_bank_account_no_CLABE_placeholder",BIC_PLACEHOLDER:b,IBAN_COPIED:"webapp_payment_alert_bank_account_CLABE_copied",BIC_COPIED:I};case p.cH.GB:return{IBAN:C,BIC:"webapp_payment_edition_field_bank_account_sort_code",IBAN_PLACEHOLDER:h,BIC_PLACEHOLDER:"webapp_payment_edition_field_bank_account_no_sort_code_placeholder",IBAN_COPIED:g,BIC_COPIED:"webapp_payment_alert_bank_account_sort_code_copied"};case p.cH.US:return{IBAN:C,BIC:"webapp_payment_edition_field_bank_account_routing_number",IBAN_PLACEHOLDER:h,BIC_PLACEHOLDER:"webapp_payment_edition_field_bank_account_no_routing_number_placeholder",IBAN_COPIED:g,BIC_COPIED:"webapp_payment_alert_bank_account_routing_number_copied"};default:return{IBAN:"webapp_payment_edition_field_bank_account_IBAN",BIC:m,IBAN_PLACEHOLDER:"webapp_payment_edition_field_bank_account_no_IBAN_placeholder",BIC_PLACEHOLDER:b,IBAN_COPIED:"webapp_payment_alert_bank_account_IBAN_copied",BIC_COPIED:I}}})(q),ne=(0,a.useCallback)((e=>t=>{const n="string"==typeof t?t:t.target.value;O({[e]:n})}),[O]),ae="edit"===e.variant?t=>{(0,r.Kz)(new o.UserRevealVaultItemFieldEvent({field:t,isProtected:!0,itemId:e.itemId,itemType:o.ItemType.BankStatement}))}:void 0,ie="edit"===e.variant?(t,n)=>new Promise(((a,i)=>{if(t||e.areProtectedItemsUnlocked)return n(),a();ee&&"function"==typeof e.openProtectedItemsUnlocker&&e.openProtectedItemsUnlocker({action:d.P.Show,itemType:d.R.CreditCard,successCallback:()=>(n(),a()),cancelCallback:i})})):void 0,oe=()=>{!W&&ae&&(ae(o.Field.Bic),z&&Y({name:R,field:o.Field.Bic,country:q})),X((e=>!e))},le=()=>{!$&&ae&&(ae(o.Field.Iban),z&&Y({name:R,field:o.Field.Iban,country:q})),K((e=>!e))},ce="edit"===e.variant?t=>{(0,r.Kz)(new o.UserCopyVaultItemFieldEvent({itemType:o.ItemType.BankStatement,field:o.Field.Bic,itemId:e.itemId,isProtected:!0})),z&&Q({name:R,field:o.Field.Bic,country:q}),t&&e.onCopy(j(te.BIC_COPIED))}:void 0,re="edit"===e.variant?t=>{(0,r.Kz)(new o.UserCopyVaultItemFieldEvent({itemType:o.ItemType.BankStatement,field:o.Field.Iban,itemId:e.itemId,isProtected:!0})),z&&Q({name:R,field:o.Field.Iban,country:q}),t&&e.onCopy(j(te.IBAN_COPIED))}:void 0,se=(e=>{const t=(()=>{const e=a.useRef(k),t=(0,y.qr)({queryConfig:{query:f.C.getAllBanks}},[]);return B(e.current)||t.status!==y.rq.Success||(e.current=t.data),e.current})();return a.useMemo((()=>{var n;if(!B(t))return A;const a=(null!=(n=t[e])?n:[]).slice();return a.sort(((e,t)=>e.localizedString.localeCompare(t.localizedString))),a}),[t,e])})(q),_e=se!==A,de=(0,a.useMemo)((()=>se.map((e=>({label:e.localizedString,value:`${e.code}`})))),[se]);(0,a.useEffect)((()=>{var e;void 0===(e=T,de.find((({value:t})=>t===e)))&&de.length>0&&O({bankCode:de[0].value},!0),""!==T&&!de.length&&_e&&O({bankCode:""})}),[T,n,de,_e,O]);const ue=(0,a.useMemo)((()=>{const e=Object.keys(i.c);return(0,D.tZ)(S.D,{label:j(L),placeholder:j(L)+q,disabled:!!J,options:V(e,j),value:q,onChange:ne("country")})}),[q,ne,J,j]),pe=(0,a.useMemo)((()=>de.length>0?(0,D.tZ)(l.mg,{label:j(P),placeholder:j(P)+T,onChange:ne("bankCode"),value:T,readOnly:!!J,children:de.map((e=>(0,D.tZ)(l.$m,{value:e.value,children:e.label},e.value)))},`${q}bank`):null),[T,de,q,ne,J,j]);return(0,D.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,D.BX)(w.u,{title:j("webapp_payment_edition_content_bank_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,D.tZ)(l.qo,{value:H,label:j("webapp_payment_edition_field_bank_account_owner_name"),placeholder:j("webapp_payment_edition_field_bank_account_no_owner_name_placeholder"),onChange:ne("ownerName"),disabled:!!J,ref:t},"owner"),(0,D.tZ)(l.Nc,{required:!0,label:j(te.IBAN),placeholder:j(te.IBAN_PLACEHOLDER),"data-name":"IBAN",readOnly:!$&&M||!!J,isValueInitiallyVisible:$,toggleVisibilityLabel:{hide:j(N),show:j(E)},onValueVisibilityChangeRequest:ie?()=>ie?.($,le):void 0,actions:re&&void 0!==ee?[(0,D.tZ)(_.m,{data:U,checkProtected:()=>ee,onCopy:re,itemType:d.R.BankAccount},"copy-iban")]:void 0,value:$?U:"●●●●●●●●●●●●●●●●",onChange:ne("IBAN"),error:Z.has("IBAN")},"IBAN"),(0,D.tZ)(l.Nc,{readOnly:!W&&G||!!J,value:W?F:"●●●●●●",label:j(te.BIC),placeholder:j(te.BIC_PLACEHOLDER),isValueInitiallyVisible:W,toggleVisibilityLabel:{hide:j(N),show:j(E)},onValueVisibilityChangeRequest:ie?()=>ie?.(W,oe):void 0,actions:ce&&void 0!==ee?[(0,D.tZ)(_.m,{data:F,checkProtected:()=>ee,onCopy:ce,itemType:d.R.BankAccount},"copy-bic")]:void 0,onChange:ne("BIC"),error:Z.has("BIC")},"BIC"),ue,pe]}),(0,D.BX)(w.u,{title:j("webapp_payment_edition_content_bank_organization_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,D.tZ)(l.qo,{value:R,label:j("webapp_payment_edition_field_bank_account_name"),placeholder:j("webapp_payment_edition_field_bank_account_no_name_placeholder"),onChange:ne("accountName"),disabled:!!J},"name"),(0,D.tZ)(u.M,{isUsingNewDesign:!0,spaceId:null!=x?x:"",labelSx:u.e,onChange:e=>ne("spaceId")(e),disabled:!!J})]})]})},O=(0,a.forwardRef)(Z),T=e=>e.IBAN&&0!==e.IBAN.length?{isValid:!0}:{isValid:!1,errorSet:new Set(["IBAN"])}},49087:(e,t,n)=>{n.d(t,{B:()=>i});var a=n(96832);const i=()=>{const[e,t]=a.useState(""),[n,i]=a.useState(!1),o=()=>{i(!1)};return a.useEffect((()=>{if(!n)return;const e=setTimeout(o,5e3);return()=>clearTimeout(e)}),[n,e]),{isAlertVisible:n,alertMessage:e,setAlertMessage:t,hide:o,show:()=>{i(!0)}}}},82994:(e,t,n)=>{n.d(t,{s:()=>m}),n(96832);var a=n(61468),i=n(8180),o=n(51031),l=n(25792),c=n(88203);let r=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var s=n(65580),_=n(68593);const d=({reason:e,translations:t,goToSharingAccess:n,closeCantDeleteDialog:i})=>{const{translate:o}=(0,c.Z)(),l=((e,t)=>{const{groupSharingTitle:n,lastAdminTitle:a,collectionSharingTitle:i,genericErrorTitle:o}=e;switch(t){case r.LastAdmin:return a;case r.GroupSharing:return n;case r.CollectionSharing:return i;case r.Generic:return o;default:return(0,s.U)(t)}})(t,e),d=((e,t)=>{const{groupSharingSubtitle:n,lastAdminSubtitle:a,collectionSharingSubtitle:i,genericErrorSubtitle:o}=e;switch(t){case r.LastAdmin:return a;case r.GroupSharing:return n;case r.CollectionSharing:return i;case r.Generic:return o;default:return(0,s.U)(t)}})(t,e);return(0,_.tZ)(a.Vq,{isOpen:!0,onClose:i,title:null!=l?l:"",closeActionLabel:o("_common_dialog_dismiss_button"),actions:e===r.LastAdmin||r.GroupSharing||r.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{n(),i()}}}:void 0,children:d})};var u=n(37527);const p=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:n})=>{const{translate:i}=(0,c.Z)(),{confirmDeleteSubtitle:o,confirmDeleteTitle:l,confirmDeleteDismiss:r,confirmDeleteConfirm:s}=n;return(0,_.tZ)(a.Vq,{title:l,onClose:e,isOpen:!0,dialogClassName:u.Ht,closeActionLabel:i("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:s,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:r,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:o})},m=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:n,itemId:s,onDeletionSuccess:u,sharingStatus:m,translations:b,vaultItemType:C,isShared:h,isSharedViaUserGroup:I,isItemInCollection:g,isLastAdmin:y})=>{const{showToast:f}=(0,a.pm)(),{translate:k}=(0,c.Z)(),{deleteVaultItem:B}=(0,i.u)(l.L);if(!n)return null;let A;return(h||m?.isShared)&&(I&&(A=r.GroupSharing),y&&(A=r.LastAdmin),g&&(A=r.CollectionSharing)),A&&t?(0,_.tZ)(d,{reason:A,translations:b,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,_.tZ)(p,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await B({id:s,vaultItemType:C})).tag===o.rq.Success?(f({description:null!=(e=b.deleteSuccessToast)?e:k("webapp_personal_info_edition_delete_success_toast")}),u()):f({description:k("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){f({description:k("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:b})}},31605:(e,t,n)=>{n.d(t,{Z:()=>a});const a={alertWrapper:"alertWrapper--JLZLLWrHCo"}}}]);