"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[8886,4910],{88134:(e,t,a)=>{a.d(t,{t:()=>C});var r=a(96832),i=a(48062),n=a(61468),l=a(8180),d=a(78346),o=a(25792),s=a(39431),c=a(92077),u=a(45272),_=a(88203),p=a(77063),E=a(55752),m=a(14900),f=a(68593);const b=({formId:e,handleCancel:t,hasDataBeenModified:a,isSubmitting:r})=>{const{translate:i}=(0,_.Z)();return(0,f.BX)(n.kC,{sx:{padding:"24px"},as:"footer",justifyContent:"flex-end",flexWrap:"nowrap",children:[a?(0,f.tZ)(m.zxk,{type:"submit",form:e,disabled:r,children:i("webapp_panel_edition_generic_save_changes")}):null,(0,f.tZ)(m.zxk,{sx:{marginLeft:"16px"},nature:"secondary",onClick:t,type:"button",children:i("webapp_panel_edition_generic_cancel_changes")})]})},L="id-add-form",h={GENERIC_ERROR:"_common_generic_error"};function C({children:e,initialValues:t,listRoute:a,reportError:m,countryToKeys:C,header:N,type:I,requiredProperty:R="idNumber"}){const{translate:A}=(0,_.Z)(),{openDialog:y,shouldShowFrozenStateDialog:T}=(0,p.Ub)(),[w,g]=r.useState(!1),[U,B]=r.useState(!1),[D,S]=r.useState(t.country),{createVaultItem:Z}=(0,l.u)(o.L),{showToast:v}=(0,n.pm)();r.useEffect((()=>{const e={[s.U.DriversLicense]:i.PageView.ItemDriverLicenceCreate,[s.U.FiscalId]:i.PageView.ItemFiscalStatementCreate,[s.U.IdCard]:i.PageView.ItemIdCardCreate,[s.U.Passport]:i.PageView.ItemPassportCreate,[s.U.SocialSecurityId]:i.PageView.ItemSocialSecurityStatementCreate};(0,u.Nc)(e[I])}),[I]),r.useEffect((()=>{T&&y()}),[T]);const x=()=>{(0,u.Nc)(i.PageView.ItemIdList),(0,c.uX)(a)},P=()=>{v({description:A(h.GENERIC_ERROR),mood:"danger",isManualDismiss:!0})},M=r.useRef((e=>{if(null!==e){const{dirty:t,isSubmitting:a,values:r}=e;g(t),B(a),S(r.country)}}));return(0,f.BX)(f.HY,{children:[N(D),(0,f.tZ)(E.P,{formId:L,formRef:M.current,handleSubmit:async(e,{setSubmitting:t,setFieldError:a})=>{if(!e[R])return a(R,"");try{const a=await Z({vaultItemType:I,content:e});(0,d.d6)(a)?(v({description:A(C(D).success)}),x()):(t(!1),P(),m(new Error("[ids][add] Unable to add id"),a.error?.errorMessage))}catch(e){t(!1),P(),m(e,"[ids][add] Unexpected exception while add id")}},initialValues:t,variant:"add",children:t=>e({values:t})}),(0,f.tZ)(b,{formId:L,handleCancel:()=>{x()},hasDataBeenModified:w,isSubmitting:U})]})}},56490:(e,t,a)=>{a.r(t),a.d(t,{FiscalIdAddPanel:()=>p}),a(96832);var r,i=a(39431),n=a(88203),l=a(39649),d=a(88134),o=a(81506),s=a(66219),c=a(74910),u=a(68593);const _=()=>({title:"webapp_id_creation_fiscalid_title_default",success:"webapp_id_creation_fiscalid_alert_add_success_default"}),p=({lee:e,listRoute:t})=>{var a;const{translate:p}=(0,n.Z)(),E={fiscalNumber:"",teledeclarantNumber:"",country:(0,s.lt)(e.carbon.currentLocation),spaceId:null!=(a=(0,l.B)(e.globalState))?a:""};return(0,u.tZ)(d.t,{initialValues:E,listRoute:t,reportError:e.reportError,countryToKeys:_,type:i.U.FiscalId,requiredProperty:"fiscalNumber",header:()=>(0,u.tZ)(c.h,{title:p("webapp_id_creation_fiscalid_title_default"),type:i.U.FiscalId}),children:()=>r||(r=(0,u.tZ)(o.U,{variant:"add"}))})}},81506:(e,t,a)=>{a.d(t,{U:()=>m});var r=a(96832),i=a(88203),n=a(49023),l=a(16792),d=a(87773),o=a(77063),s=a(68037),c=a(82207),u=a(88355),_=a(68593);const p={...l.k,TELEDECLARANT_NUMBER_LABEL:"webapp_id_form_field_label_teledeclarant_number",TELEDECLARANT_NUMBER_PLACEHOLDER:"webapp_id_form_field_placeholder_teledeclarant_number",TAX_NUMBER_LABEL_DEFAULT:"webapp_id_form_field_label_tax_number",DETAILS_CONTENT_LABEL:"webapp_id_form_fiscal_id_content_details_label"},E=({variant:e,handleCopy:t})=>{const{translate:a}=(0,i.Z)(),{shouldShowFrozenStateDialog:l}=(0,o.Ub)(),{values:E}=(0,u.u6)(),m=r.useRef(null);return r.useEffect("add"===e?()=>{const e=setTimeout((()=>{m.current?.focus()}),n.sc);return()=>clearTimeout(e)}:()=>{},[]),(0,_.BX)(_.HY,{children:[(0,_.BX)(s.u,{title:a(p.DETAILS_CONTENT_LABEL),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,_.tZ)(d.YI,{name:"fiscalNumber",label:a(p.TAX_NUMBER_LABEL_DEFAULT),placeholder:a(p.ID_NUMBER_PLACEHOLDER),actions:"edit"===e?[(0,_.tZ)(c.m,{data:E.fiscalNumber,onCopy:t},"copy")]:void 0,ref:m,disabled:!!l}),(0,_.tZ)(d.xu,{name:"teledeclarantNumber",label:a(p.TELEDECLARANT_NUMBER_LABEL),placeholder:a(p.TELEDECLARANT_NUMBER_PLACEHOLDER),handleCopy:"edit"===e?t:void 0,disabled:!!l}),(0,_.tZ)(d.Dz,{name:"country",label:a(p.COUNTRY_LABEL),disabled:!!l})]}),(0,_.tZ)(d.A0,{name:"spaceId",disabled:!!l,wrapInContentCard:!0,contentCardLabel:a(p.ORGANIZATION_CONTENT_LABEL)})]})},m=r.memo(E)}}]);