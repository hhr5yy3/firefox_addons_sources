(self.webpackChunkchrome_extension=self.webpackChunkchrome_extension||[]).push([[2],{11724:(e,t,n)=>{"use strict";n.d(t,{j:()=>z});var i=n(15215),r=n(34549),s=n(78868),o=n(3976),a=n(88319),c=n(26126),u=[],p=function(){function e(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}return e.add=function(e,t,n){l(e,t).set(n)},e.remove=function(e,t){l(e,t).remove()},e.prototype.set=function(e){var t=this;this.context[this.methodName]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t._originalMethod.apply(t,(0,i.__spread)(n)))}},e.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},e}();function l(e,t){var n=u.filter((function(n){return n.context===e&&n.methodName===t}))[0];return n||(n=new p(e,t),u.push(n)),n}var h=n(64988),d=new r.C("PageViewTracker"),f="aws-amplify-analytics-prevUrl",_={enable:!1,provider:"AWSPinpoint",getUrl:function(){return(0,h.gy)().isBrowser?window.location.origin+window.location.pathname:""}},v=function(){function e(e,t){d.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},_,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}return e.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},e.prototype._isSameUrl=function(){return sessionStorage.getItem(f)===this._config.getUrl()&&(d.debug("the url is same"),!0)},e.prototype._pageViewTrackDefault=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return(0,h.gy)().isBrowser&&window.addEventListener&&window.sessionStorage?(e=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(d.debug("not in the supported web enviroment"),[2]);case 1:return n=i.sent(),[3,3];case 2:n=this._config.attributes,i.label=3;case 3:return t=n,r=Object.assign({url:e},t),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch((function(e){d.debug("Failed to record the page view event",e)})),sessionStorage.setItem(f,e)),[2]}}))}))},e.prototype._trackFunc=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return(0,h.gy)().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(e=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(d.debug("not in the supported web enviroment"),[2]);case 1:return n=i.sent(),[3,3];case 2:n=this._config.attributes,i.label=3;case 3:return t=n,r=Object.assign({url:e},t),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch((function(e){d.debug("Failed to record the page view event",e)})),sessionStorage.setItem(f,e)),[2]}}))}))},e.prototype._pageViewTrackSPA=function(){(0,h.gy)().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(p.add(history,"pushState",this._trackFunc),p.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(p.remove(history,"pushState"),p.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):d.debug("not in the supported web enviroment")},e}(),g=(0,h.gy)().isBrowser&&window.Element?window.Element.prototype:null,y=g?g.matches||g.matchesSelector||g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector:null;function m(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||b(e,t);if("length"in t)for(var n=0,i=void 0;i=t[n];n++)if(e===i||b(e,i))return!0}return!1}function b(e,t){if("string"!=typeof t)return!1;if(y)return y.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0,r=void 0;r=n[i];i++)if(r===e)return!0;return!1}function E(e,t,n,i,r){void 0===r&&(r={});var s=function(e){var t;if(r.composed&&"function"==typeof e.composedPath)for(var s=e.composedPath(),o=0,a=void 0;a=s[o];o++)1===a.nodeType&&m(a,n)&&(t=a);else t=function(e,t,n){if(void 0===n&&(n=!1),e&&1===e.nodeType&&t)for(var i,r=(n?[e]:[]).concat(function(e){for(var t=[],n=e;n&&n.parentNode&&1===n.parentNode.nodeType;)n=n.parentNode,t.push(n);return t}(e)),s=0;i=r[s];s++)if(m(i,t))return i}(e.target,n,!0);t&&i.call(t,e,t)};return e.addEventListener(t,s,r.useCapture),{destroy:function(){e.removeEventListener(t,s,r.useCapture)}}}var I=new r.C("EventTracker"),T={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},A=function(){function e(e,t){(0,h.gy)().isBrowser&&window.addEventListener?(this._config=Object.assign({},T,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),I.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):I.debug("not in the supported web environment")}return e.prototype.configure=function(e){var t=this;if(Object.assign(this._config,e),this._config.enable){if(this._config.enable&&0===Object.keys(this._delegates).length){var n="["+this._config.selectorPrefix+"on]";this._config.events.forEach((function(e){t._delegates[e]=E(document,e,n,t._trackFunc,{composed:!0,useCapture:!0})}))}}else Object.keys(this._delegates).forEach((function(e){"function"==typeof t._delegates[e].destroy&&t._delegates[e].destroy()})),this._delegates={};return this._config},e.prototype._trackFunc=function(e,t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,s,o,a,c,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n={},r=t.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),s=t.getAttribute(this._config.selectorPrefix+"name"),(o=t.getAttribute(this._config.selectorPrefix+"attrs"))&&o.split(/\s*,\s*/).forEach((function(e){var t=e.trim().split(/\s*:\s*/);n[t[0]]=t[1]})),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return c=i.sent(),[3,3];case 2:c=this._config.attributes,i.label=3;case 3:return a=c,u=Object.assign({type:e.type,target:e.target.localName+" with id "+e.target.id},a,n),I.debug("events needed to be recorded",r),I.debug("attributes needed to be attached",n),r.indexOf(e.type)<0?(I.debug("event "+e.type+" is not selected to be recorded"),[2]):(this._tracker({name:s||"event",attributes:u},this._config.provider).catch((function(t){I.debug("Failed to record the "+e.type+" event', "+t)})),[2])}}))}))},e}(),N=new r.C("SessionTracker"),w={enable:!1,provider:"AWSPinpoint"},k=!1,S=function(){function e(e,t){this._config=Object.assign({},w,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}return e.prototype._envCheck=function(){if(!(0,h.gy)().isBrowser)return!1;if(!document||!document.addEventListener)return N.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return N.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},e.prototype._trackFunc=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,t,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=i.sent(),[3,3];case 2:t=this._config.attributes,i.label=3;case 3:return e=t,n=Object.assign({},e),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:n},this._config.provider).catch((function(e){N.debug("record session stop event failed.",e)})):this._tracker({name:"_session.start",attributes:n},this._config.provider).catch((function(e){N.debug("record session start event failed.",e)})),[2]}}))}))},e.prototype._trackBeforeUnload=function(e){var t=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then((function(e){var n=Object.assign({},e);t._tracker({name:"_session.stop",attributes:n,immediate:!0},t._config.provider).catch((function(e){N.debug("record session stop event failed.",e)}))}))},e.prototype._sendInitialEvent=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,t,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return k?(N.debug("the start session has been sent when the page is loaded"),[2]):(k=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=i.sent(),[3,3];case 2:t=this._config.attributes,i.label=3;case 3:return e=t,n=Object.assign({},e),this._tracker({name:"_session.start",attributes:n},this._config.provider).catch((function(e){N.debug("record session start event failed.",e)})),[2]}}))}))},e.prototype.configure=function(e){return this._envCheck()?(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1),this._config):this._config},e}(),O=new r.C("AnalyticsClass"),D="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",C=function(e,t,n){s.Y.dispatch("analytics",{event:e,data:t,message:n},"Analytics",D)},x={pageView:v,event:A,session:S},P=null,R=function(){function e(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},P=this,this.record=this.record.bind(this),s.Y.listen("auth",B),s.Y.listen("storage",B),s.Y.listen("analytics",B),s.Y.listen("core",B)}return e.prototype.getModuleName=function(){return"Analytics"},e.prototype.configure=function(e){var t=this;if(!e)return this._config;O.debug("configure Analytics",e);var n=(0,o.s)(e);return this._config=Object.assign({},this._config,n.Analytics,e),this._config.disabled&&(this._disabled=!0),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),this._pluggables.forEach((function(e){var n="AWSPinpoint"!==e.getProviderName()||t._config.AWSPinpoint?t._config[e.getProviderName()]:t._config;e.configure((0,i.__assign)({disabled:t._config.disabled,autoSessionRecord:t._config.autoSessionRecord},n))})),0===this._pluggables.length&&this.addPluggable(new c.i),C("configured",null,"The Analytics category has been configured successfully"),O.debug("current configuration",this._config),this._config},e.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,n=(0,i.__assign)({disabled:this._config.disabled},t);return e.configure(n),n}},e.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return O.debug("No plugin found with providerName",e),null},e.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;return t===this._pluggables.length?void O.debug("No plugin found with providerName",e):void this._pluggables.splice(t,t+1)},e.prototype.disable=function(){this._disabled=!0},e.prototype.enable=function(){this._disabled=!1},e.prototype.startSession=function(e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,i.__generator)(this,(function(i){return n={event:t={name:"_session.start"},provider:e},C("record",t,"Recording Analytics session start event"),[2,this._sendEvent(n)]}))}))},e.prototype.stopSession=function(e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,i.__generator)(this,(function(i){return n={event:t={name:"_session.stop"},provider:e},C("record",t,"Recording Analytics session stop event"),[2,this._sendEvent(n)]}))}))},e.prototype.record=function(e,t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(i){return C("record",(n={event:e,provider:t}).event,"Recording Analytics event"),[2,this._sendEvent(n)]}))}))},e.prototype.updateEndpoint=function(e,t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){return n=(0,i.__assign)((0,i.__assign)({},e),{name:"_update_endpoint"}),[2,this.record(n,t)]}))}))},e.prototype._sendEvent=function(e){var t=this;if(this._disabled)return O.debug("Analytics has been disabled"),Promise.resolve();var n=e.provider?e.provider:"AWSPinpoint";return new Promise((function(i,r){t._pluggables.forEach((function(t){t.getProviderName()===n&&t.record(e,{resolve:i,reject:r})}))}))},e.prototype.autoTrack=function(e,t){if(x[e]){"session"===e&&(this._config.autoSessionRecord=t.enable);var n=this._trackers[e];n?n.configure(t):this._trackers[e]=new x[e](this.record,t)}else O.debug("invalid tracker type")},e}(),F=!1,L=!1,M=!1,j=!1,B=function(e){var t=e.channel,n=e.payload;switch(O.debug("on hub capsule "+t,n),t){case"auth":V(n);break;case"storage":U(n);break;case"analytics":q(n);break;case"core":K(n)}},U=function(e){var t=e.data,n=t.attrs,i=t.metrics;n&&M&&P.record({name:"Storage",attributes:n,metrics:i}).catch((function(e){O.debug("Failed to send the storage event automatically",e)}))},V=function(e){var t=e.event;if(t){var n=function(e){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:if(!L||!M)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,P.record({name:"_userauth."+e})];case 2:return[2,n.sent()];case 3:return t=n.sent(),O.debug("Failed to send the "+e+" event automatically",t),[3,4];case 4:return[2]}}))}))};switch(t){case"signIn":return n("sign_in");case"signUp":return n("sign_up");case"signOut":return n("sign_out");case"signIn_failure":return n("auth_fail");case"configured":L=!0,M&&Y()}}},q=function(e){var t=e.event;if(t&&"pinpointProvider_configured"===t)M=!0,(L||j)&&Y()},K=function(e){var t=e.event;if(t&&"credentials_configured"===t)j=!0,M&&Y()},Y=function(){var e=P.configure();!F&&e.autoSessionRecord&&(P.updateEndpoint({immediate:!0}).catch((function(e){O.debug("Failed to update the endpoint",e)})),F=!0),P.autoTrack("session",{enable:e.autoSessionRecord})},z=new R;a.H.register(z)},6096:(e,t,n)=>{"use strict";n.d(t,{Y:()=>h});var i=n(15215),r=n(34549),s=n(37070),o=n(22093),a=n(43144),c=n(20044),u=n(17620),p=n(76438),l=new r.C("AWSKineisFirehoseProvider"),h=function(e){function t(t){return e.call(this,t)||this}return(0,i.__extends)(t,e),t.prototype.getProviderName=function(){return"AWSKinesisFirehose"},t.prototype._sendEvents=function(e){var t=this;if(0!==e.length){var n=e[0],i=n.config,r=n.credentials;if(!this._init(i,r))return!1;var s={};e.map((function(e){var t=e.event,n=t.streamName,i=t.data;void 0===s[n]&&(s[n]=[]);var r=i&&"string"!=typeof i?JSON.stringify(i):i,o={Data:(0,u.fromUtf8)(r)};s[n].push(o)})),Object.keys(s).map((function(e){l.debug("putting records to kinesis",e,"with records",s[e]),t._kinesisFirehose.send(new a.A({Records:s[e],DeliveryStreamName:e})).then((function(t){return l.debug("Upload records to stream",e)})).catch((function(e){return l.debug("Failed to upload records to Kinesis",e)}))}))}},t.prototype._init=function(e,t){if(l.debug("init clients"),this._kinesisFirehose&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return l.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region;return this._initFirehose(n,t)},t.prototype._initFirehose=function(e,t){return l.debug("initialize kinesis firehose with credentials",t),this._kinesisFirehose=new c.B({apiVersion:"2015-08-04",region:e,credentials:t,customUserAgent:(0,p.b)(s.zJ.Record)}),!0},t}(o.T)},22093:(e,t,n)=>{"use strict";n.d(t,{T:()=>h});var i=n(15215),r=n(34549),s=n(37070),o=n(89404),a=n(72080),c=n(9459),u=n(17620),p=n(76438),l=new r.C("AWSKinesisProvider"),h=function(){function e(e){this._buffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._setupTimer()}return e.prototype._setupTimer=function(){var e=this;this._timer&&clearInterval(this._timer);var t=this._config,n=t.flushSize,i=t.flushInterval;this._timer=setInterval((function(){for(var t=e._buffer.length<n?e._buffer.length:n,i=[],r=0;r<t;r+=1){var s=e._buffer.shift();i.push(s)}e._sendFromBuffer(i)}),i)},e.prototype.getCategory=function(){return"Analytics"},e.prototype.getProviderName=function(){return"AWSKinesis"},e.prototype.configure=function(e){l.debug("configure Analytics",e);var t=e||{};return this._config=Object.assign({},this._config,t),this._setupTimer(),this._config},e.prototype.record=function(e){var t;return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this._getCredentials()];case 1:return(n=i.sent())?(Object.assign(e,{config:this._config,credentials:n}),(null===(t=e.event)||void 0===t?void 0:t.immediate)?(this._sendEvents([e]),[2,Promise.resolve(!0)]):[2,this._putToBuffer(e)]):[2,Promise.resolve(!1)]}}))}))},e.prototype.updateEndpoint=function(){return l.debug("updateEndpoint is not implemented in Kinesis provider"),Promise.resolve(!0)},e.prototype._putToBuffer=function(e){return this._buffer.length<1e3?(this._buffer.push(e),Promise.resolve(!0)):(l.debug("exceed analytics events buffer size"),Promise.reject(!1))},e.prototype._sendFromBuffer=function(e){for(var t=this,n=[],i=null,r=[],s=0;s<e.length;s+=1){var o=e[s].credentials;0===s?(r.push(e[s]),i=o):o.sessionToken===i.sessionToken&&o.identityId===i.identityId?(l.debug("no change for cred, put event in the same group"),r.push(e[s])):(n.push(r),(r=[]).push(e[s]),i=o)}n.push(r),n.map((function(e){t._sendEvents(e)}))},e.prototype._sendEvents=function(e){var t=this;if(0!==e.length){var n=e[0],r=n.config,s=n.credentials;if(!this._init(r,s))return!1;var o={};e.map((function(e){var t=e.event,n=t.streamName;void 0===o[n]&&(o[n]=[]);var i=t.data&&"string"!=typeof t.data?JSON.stringify(t.data):t.data,r={Data:(0,u.fromUtf8)(i),PartitionKey:t.partitionKey||"partition-"+s.identityId};o[n].push(r)})),Object.keys(o).map((function(e){return(0,i.__awaiter)(t,void 0,void 0,(function(){var t,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:l.debug("putting records to kinesis with records",o[e]),i.label=1;case 1:return i.trys.push([1,3,,4]),t=new a.x({Records:o[e],StreamName:e}),[4,this._kinesis.send(t)];case 2:return i.sent(),l.debug("Upload records to stream",e),[3,4];case 3:return n=i.sent(),l.debug("Failed to upload records to Kinesis",n),[3,4];case 4:return[2]}}))}))}))}},e.prototype._init=function(e,t){if(l.debug("init clients"),this._kinesis&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return l.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region,i=e.endpoint;return this._initKinesis(n,i,t)},e.prototype._initKinesis=function(e,t,n){return l.debug("initialize kinesis with credentials",n),this._kinesis=new c.q({region:e,credentials:n,customUserAgent:(0,p.b)(s.zJ.Record),endpoint:t}),!0},e.prototype._getCredentials=function(){var e=this;return o.J.get().then((function(t){return t?(l.debug("set credentials for analytics",e._config.credentials),o.J.shear(t)):null})).catch((function(e){return l.debug("ensure credentials error",e),null}))},e}()},26126:(e,t,n)=>{"use strict";n.d(t,{i:()=>S});var i=n(15215),r=n(11125),s=n(78868),o=n(34549),a=n(68026),c=n(37070),u=n(36525),p=n(64988),l=n(89404),h=n(25471),d=n(85247),f=n(95225),_=n(76438),v=new o.C("EventsBuffer"),g=[429,500],y=[202];const m=function(){function e(e){this._pause=!1,this._flush=!1,v.debug("Instantiating buffer with config:",e),this._buffer=[],this._config=e,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}return e.prototype.push=function(e){var t;if(this._buffer.length>=this._config.bufferSize)return v.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var n=((t={})[e.params.event.eventId]=e,t);this._buffer.push(n)},e.prototype.pause=function(){this._pause=!0},e.prototype.resume=function(){this._pause=!1},e.prototype.flush=function(){this._flush=!0},e.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},e.prototype._sendBatch=function(){var e=this._buffer.length;if(this._flush&&!e&&clearInterval(this._interval),!this._pause&&e){var t=this._config.flushSize,n=Math.min(t,e),i=this._buffer.splice(0,n);this._putEvents(i)}},e.prototype._putEvents=function(e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,n,r,s,o,a,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:t=this._bufferToMap(e),n=this._generateBatchEventParams(t),i.label=1;case 1:return i.trys.push([1,3,,4]),r=this._config,s=r.credentials,o=r.region,[4,(0,h.t)({credentials:s,region:o,userAgentValue:(0,_.Y)(c.zJ.Record)},n)];case 2:return a=i.sent(),this._processPutEventsSuccessResponse(a,t),[3,4];case 3:return u=i.sent(),[2,this._handlePutEventsFailure(u,t)];case 4:return[2]}}))}))},e.prototype._generateBatchEventParams=function(e){var t={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach((function(e){var n=e.params,i=n.event,r=n.timestamp,s=n.config,o=i.name,a=i.attributes,c=i.metrics,u=i.eventId,p=i.session,l=s.appId,h=s.endpointId,d=t.EventsRequest.BatchItem;t.ApplicationId=t.ApplicationId||l,d[h]||(d[h]={Endpoint:{},Events:{}}),d[h].Events[u]={EventType:o,Timestamp:new Date(r).toISOString(),Attributes:a,Metrics:c,Session:p}})),t},e.prototype._handlePutEventsFailure=function(e,t){v.debug("_putEvents Failed: ",e);var n=e.$metadata&&e.$metadata.httpStatusCode;if(g.includes(n)){var i=Object.values(t);this._retry(i)}else;},e.prototype._processPutEventsSuccessResponse=function(e,t){var n,r=(null!==(n=e.EventsResponse)&&void 0!==n?n:{}).Results,s=void 0===r?{}:r,o=[];Object.entries(s).forEach((function(e){var n,r=(0,i.__read)(e,2),s=r[0],a=null!==(n=r[1].EventsItemResponse)&&void 0!==n?n:{};Object.entries(a).forEach((function(e){var n,r,a=(0,i.__read)(e,2),c=a[0],u=a[1],p=t[c];if(p){var l=null!=u?u:{},h=l.StatusCode,d=l.Message,f={EventsResponse:{Results:(n={},n[s]={EventsItemResponse:(r={},r[c]={StatusCode:h,Message:d},r)},n)}};if(h&&y.includes(h))p.handlers.resolve(f);else{if(!h||!g.includes(h)){var _=p.params.event.name;return v.error("event "+c+" : "+_+" failed with error: "+d),p.handlers.reject(f)}o.push(p)}}}))})),o.length&&this._retry(o)},e.prototype._retry=function(e){var t,n=[];e.forEach((function(e){var t,i=e.params,r=i.event,s=r.eventId,o=r.name;if(i.resendLimit-- >0)return v.debug("resending event "+s+" : "+o+" with "+i.resendLimit+" retry attempts remaining"),void n.push((t={},t[s]=e,t));v.debug("no retry attempts remaining for event "+s+" : "+o)})),(t=this._buffer).unshift.apply(t,(0,i.__spread)(n))},e.prototype._bufferToMap=function(e){return e.reduce((function(e,t){var n=(0,i.__read)(Object.entries(t),1),r=(0,i.__read)(n[0],2),s=r[0],o=r[1];return e[s]=o,e}),{})},e}();var b="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",E=function(e,t){s.Y.dispatch("analytics",{event:e,data:t},"Analytics",b)},I=new o.C("AWSPinpointProvider"),T=[429,500],A=[202],N="_update_endpoint",w="_session.stop",k="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,S=function(){function e(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=a.C.clientInfo()}return e.prototype.getCategory=function(){return e.category},e.prototype.getProviderName=function(){return e.providerName},e.prototype.configure=function(e){var t=this;I.debug("configure Analytics",e);var n=e||{};if(this._config=Object.assign({},this._config,n),this._endpointGenerating=!!e.autoSessionRecord,this._config.appId&&!this._config.disabled)if(this._config.endpointId)E("pinpointProvider_configured",null);else{var i=this.getProviderName()+"_"+this._config.appId;this._getEndpointId(i).then((function(e){I.debug("setting endpoint id from the cache",e),t._config.endpointId=e,E("pinpointProvider_configured",null)})).catch((function(e){I.debug("Failed to generate endpointId",e)}))}else this._flushBuffer();return this._config},e.prototype.record=function(e,t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return I.debug("_public record",e),[4,this._getCredentials()];case 1:return(n=i.sent())&&this._config.appId&&this._config.region?(this._init(n),r=(new Date).getTime(),this._generateSession(e),e.event.eventId=(0,f.v1)(),Object.assign(e,{timestamp:r,config:this._config}),e.event.immediate?[2,this._send(e,t)]:(this._putToBuffer(e,t),[2])):(I.debug("cannot send events without credentials, applicationId or region"),[2,t.reject(new Error("No credentials, applicationId or region"))])}}))}))},e.prototype._sendEndpointUpdate=function(e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(e),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(e)]);case 1:return n.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}}))}))},e.prototype._putToBuffer=function(e,t){var n;e.event.name!==N?null===(n=this._buffer)||void 0===n||n.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},e.prototype._generateSession=function(e){this._sessionId=this._sessionId||(0,f.v1)();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=(0,f.v1)(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case w:var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||(0,f.v1)(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||(0,f.v1)(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},e.prototype._send=function(e,t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){switch(e.event.name){case N:return[2,this._updateEndpoint({params:e,handlers:t})];case w:return[2,this._pinpointSendStopSession(e,t)];default:return[2,this._pinpointPutEvents(e,t)]}return[2]}))}))},e.prototype._generateBatchItemContext=function(e){var t,n,i=e.event,r=e.timestamp,s=e.config,o=i.name,a=i.attributes,c=i.metrics,u=i.eventId,p=i.session;return{ApplicationId:s.appId,EventsRequest:{BatchItem:(t={},t[s.endpointId]={Endpoint:{},Events:(n={},n[u]={EventType:o,Timestamp:new Date(r).toISOString(),Attributes:a,Metrics:c,Session:p},n)},t)}}},e.prototype._pinpointPutEvents=function(e,t){var n,r,s,o,a;return(0,i.__awaiter)(this,void 0,void 0,(function(){var u,p,l,d,f,v,g,y,m,b,E;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:u=e.event.eventId,p=e.config.endpointId,l=this._generateBatchItemContext(e),i.label=1;case 1:return i.trys.push([1,3,,4]),d=this._config,f=d.credentials,v=d.region,[4,(0,h.t)({credentials:f,region:v,userAgentValue:(0,_.Y)(c.zJ.Record)},l)];case 2:return g=i.sent(),y=null!==(a=null===(o=null===(s=null===(r=null===(n=g.EventsResponse)||void 0===n?void 0:n.Results)||void 0===r?void 0:r[p])||void 0===s?void 0:s.EventsItemResponse)||void 0===o?void 0:o[u])&&void 0!==a?a:{},m=y.StatusCode,b=y.Message,m&&A.includes(m)?(I.debug("record event success. ",g),[2,t.resolve(g)]):m&&T.includes(m)?(this._retry(e,t),[3,4]):(I.error("Event "+u+" is not accepted, the error is "+b),[2,t.reject(g)]);case 3:return E=i.sent(),this._eventError(E),[2,t.reject(E)];case 4:return[2]}}))}))},e.prototype._pinpointSendStopSession=function(e,t){if(k){var n=this._generateBatchItemContext(e),i=this._config.region,r=n.ApplicationId,s=n.EventsRequest,o={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},a="https://pinpoint."+i+".amazonaws.com/v1/apps/"+r+"/events/legacy",c=JSON.stringify(s),p={url:a,body:c,method:"POST"},l={region:i,service:"mobiletargeting"},h=u.l.signUrl(p,o,l);return navigator.sendBeacon(h,c)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},e.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,e.resendLimit-- >0?(I.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):I.debug("retry times used up for event "+e.eventName)},e.prototype._updateEndpoint=function(e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,n,r,s,o,a,u,l,h,f,v,g,y,m;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:t=e.params,n=e.handlers,r=t.config,s=t.event,o=r.appId,a=r.endpointId,u=this._endpointRequest(r,(0,p.Jw)(s,[],["attributes","userAttributes","Attributes","UserAttributes"])),l={ApplicationId:o,EndpointId:a,EndpointRequest:u},i.label=1;case 1:return i.trys.push([1,3,,4]),h=this._config,f=h.credentials,v=h.region,[4,(0,d.l)({credentials:f,region:v,userAgentValue:(0,_.Y)(c.zJ.UpdateEndpoint)},l)];case 2:return g=i.sent(),I.debug("updateEndpoint success",g),this._endpointGenerating=!1,this._resumeBuffer(),n.resolve(g),[2];case 3:return y=i.sent(),m={err:y,update_params:l,endpointObject:e},[2,this._handleEndpointUpdateFailure(m)];case 4:return[2]}}))}))},e.prototype._handleEndpointUpdateFailure=function(e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,i.__generator)(this,(function(i){return t=e.err,n=e.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,I.debug("updateEndpoint error",t),403===r?[2,this._handleEndpointUpdateForbidden(e)]:T.includes(r)?[2,this._retryEndpointUpdate(n,true)]:(I.error("updateEndpoint failed",t),n.handlers.reject(t),[2])}))}))},e.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,i=t.code,r=t.retryable;if("ExpiredTokenException"!==i&&!r)return n.handlers.reject(t);this._retryEndpointUpdate(n)},e.prototype._retryEndpointUpdate=function(e,t){void 0===t&&(t=!1),I.debug("_retryEndpointUpdate",e);var n=e.params,i=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:i,n.resendLimit-- >0)return I.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));I.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&I.error("Initial endpoint update failed. ")},e.prototype._init=function(e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(n){return I.debug("init provider"),this._config.credentials&&this._config.credentials.sessionToken===e.sessionToken&&this._config.credentials.identityId===e.identityId?(I.debug("no change for aws credentials, directly return from init"),[2]):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=e,this._bufferExists()&&t===e.identityId||this._initBuffer(),[2])}))}))},e.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof m},e.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new m(this._config),this._endpointGenerating&&this._buffer.pause()},e.prototype._flushBuffer=function(){var e;this._bufferExists()&&(null===(e=this._buffer)||void 0===e||e.flush(),this._buffer=null)},e.prototype._resumeBuffer=function(){var e;this._bufferExists()&&(null===(e=this._buffer)||void 0===e||e.resume())},e.prototype._getEndpointId=function(e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,r.Y.getItem(e)];case 1:return t=i.sent(),I.debug("endpointId from cache",t,"type",typeof t),t||(t=(0,f.v1)(),n=(new Date).getTime()+31536e8,r.Y.setItem(e,t,{expires:n,priority:1})),[2,t]}}))}))},e.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},s=e.clientContext||{},o=e.endpoint||{},a={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},c=(s.clientId,s.appTitle,s.appVersionName,s.appVersionCode,s.appPackageName,(0,i.__rest)(s,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"])),u=t.address?"android"===r.platform?"GCM":"APNS":void 0,l=(0,i.__assign)((0,i.__assign)((0,i.__assign)({channelType:u,requestId:(0,f.v1)(),effectiveDate:(new Date).toISOString()},o),t),{attributes:(0,i.__assign)((0,i.__assign)({},o.attributes),t.attributes),demographic:(0,i.__assign)((0,i.__assign)((0,i.__assign)((0,i.__assign)({},a),c),o.demographic),t.demographic),location:(0,i.__assign)((0,i.__assign)({},o.location),t.location),metrics:(0,i.__assign)((0,i.__assign)({},o.metrics),t.metrics),user:{userId:t.userId||o.userId||n.identityId,userAttributes:(0,i.__assign)((0,i.__assign)({},o.userAttributes),t.userAttributes)}}),h=(l.userId,l.userAttributes,l.name,l.session,l.eventId,l.immediate,(0,i.__rest)(l,["userId","userAttributes","name","session","eventId","immediate"]));return(0,p.qo)(h,[],["metrics","userAttributes","attributes"])},e.prototype._eventError=function(e){I.error("record event failed.",e),I.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},e.prototype._getCredentials=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,l.J.get()];case 1:return(e=n.sent())?(I.debug("set credentials for analytics",e),[2,l.J.shear(e)]):[2,null];case 2:return t=n.sent(),I.debug("ensure credentials error",t),[2,null];case 3:return[2]}}))}))},e.category="Analytics",e.providerName="AWSPinpoint",e}()},67390:(e,t,n)=>{"use strict";n.d(t,{i:()=>k});var i,r,s,o=n(15215),a=n(34549),c=n(64988),u=n(37070),p=n(89404),l=n(79837),h=n(93635),d=n(62193),f=n.n(d),_=n(2404),v=n.n(_),g=n(95225),y=n(11125),m="_awsct_uid",b="_awsct_sid",E=(new a.C("AmazonPersonalizeProvider"),function(){function e(e){void 0===e&&(e=""),this._isBrowser=(0,c.gy)().isBrowser,this._timerKey=(0,g.v1)().substr(0,15),this._refreshTimer()}return e.prototype._refreshTimer=function(){this._timer&&clearInterval(this._timer);var e=this;this._timer=setInterval((function(){e._timerKey=(0,g.v1)().substr(0,15)}),3e4)},e.prototype.storeValue=function(e,t){var n=new Date,i=new Date;i.setTime(n.getTime()+6048e5),y.Y.setItem(this._getCachePrefix(e),t,{expires:i.getTime()})},e.prototype.retrieveValue=function(e){return y.Y.getItem(this._getCachePrefix(e))},e.prototype._getCachePrefix=function(e){return this._isBrowser?e+"."+window.location.host:"personalize"},e.prototype.getTimerKey=function(){return this._timerKey},e.prototype.updateSessionInfo=function(e,t){var n=t.userId,i=t.sessionId;if(this._isRequireNewSession(e,n,i)){var r=(0,g.v1)();this.storeValue(m,e),this.storeValue(b,r),t.sessionId=r}else this._isRequireUpdateSessionInfo(e,n,i)&&this.storeValue(m,e);t.userId=e},e.prototype._isRequireUpdateSessionInfo=function(e,t,n){return!f()(n)&&f()(t)&&!f()(e)},e.prototype.retrieveSessionInfo=function(e){var t={};return t.trackingId=e,t.sessionId=this.retrieveValue(b),t.userId=this.retrieveValue(m),f()(t.sessionId)&&(t.sessionId=(0,g.v1)(),this.storeValue(b,t.sessionId)),this.storeValue("_awsct",e),t},e.prototype._isRequireNewSession=function(e,t,n){var i=f()(n),r=f()(e)&&!f()(t),s=!f()(e)&&!f()(t)&&!v()(e,t);return i||r||s},e}());!function(e){e.PLAY="play",e.PAUSE="pause",e.ENDED="Ended"}(i||(i={})),function(e){e.IFRAME="IFRAME",e.VIDEO="VIDEO",e.AUDIO="AUDIO"}(r||(r={})),function(e){e.PLAY="Play",e.ENDED="Ended",e.PAUSE="Pause",e.TIME_WATCHED="TimeWatched"}(s||(s={}));var I=function(){function e(e,t){var n;this.eventActionMapping=((n={})[s.ENDED]=this.endedEventAction.bind(this),n[s.PLAY]=this.playEventAction.bind(this),n[s.PAUSE]=this.pauseEventAction.bind(this),n);var i=e.eventData;this._params=e,this._mediaElement=document.getElementById(i.properties.domElementId),this._started=!1,this._provider=t,{IFRAME:this._iframeMediaTracker,VIDEO:this._html5MediaTracker,AUDIO:this._html5MediaTracker}[this._mediaElement.tagName].bind(this)(),this._initYoutubeFrame()}return e.prototype._initYoutubeFrame=function(){this._youTubeIframeLoader={src:"https://www.youtube.com/iframe_api",loading:!1,loaded:!1,listeners:[],load:function(e){var t=this;if(this.listeners.push(e),this.loaded)setTimeout((function(){t.done()}));else if(!this.loading){this.loading=!0,window.onYouTubeIframeAPIReady=function(){t.loaded=!0,t.done()};var n=document.createElement("script");n.type="text/javascript",n.src=this.src,document.body.appendChild(n)}},done:function(){for(delete window.onYouTubeIframeAPIReady;this.listeners.length;)this.listeners.pop()(window.YT)}}},e.prototype._iframeMediaTracker=function(){var e=this;setInterval((function(){e._started&&e.recordEvent(r.IFRAME,s.TIME_WATCHED)}),3e3),this._youTubeIframeLoader.load((function(t){e._iframePlayer=new t.Player(e._mediaElement.id,{events:{onStateChange:e._onPlayerStateChange.bind(e)}})}))},e.prototype._onPlayerStateChange=function(e){var t={0:s.ENDED,1:s.PLAY,2:s.PAUSE}[e.data];t&&this.eventActionMapping[t](r.IFRAME)},e.prototype._html5MediaTracker=function(){var e=this;setInterval((function(){e._started&&e.recordEvent(r.VIDEO,s.TIME_WATCHED)}),3e3),this._mediaElement.addEventListener(i.PLAY,(function(){e.eventActionMapping[s.PLAY](r.VIDEO)}),!1),this._mediaElement.addEventListener(i.PAUSE,(function(){e.eventActionMapping[s.PAUSE](r.VIDEO)}),!1),this._mediaElement.addEventListener(i.ENDED,(function(){e.eventActionMapping[s.ENDED](r.VIDEO)}),!1)},e.prototype.playEventAction=function(e){this._started=!0,this.recordEvent(e,s.PLAY)},e.prototype.pauseEventAction=function(e){this._started=!1,this.recordEvent(e,s.PAUSE)},e.prototype.endedEventAction=function(e){this._started=!1,this.recordEvent(e,s.ENDED)},e.prototype.recordEvent=function(e,t){var n,i=Object.assign({},this._params),s=i.eventData;s.eventType=t,e===r.VIDEO?(n=this._mediaElement.currentTime,s.properties.duration=this._mediaElement.duration):(n=this._financial(this._iframePlayer.getCurrentTime()),s.properties.duration=this._financial(this._iframePlayer.getDuration()));var o=parseFloat(n)/parseFloat(s.properties.duration);s.properties.eventValue=Number(o.toFixed(4)),delete s.properties.domElementId,this._provider.putToBuffer(i)},e.prototype._financial=function(e){return Number.parseFloat(e).toFixed(4)},e}(),T=n(58156),A=n.n(T),N=n(76438),w=new a.C("AmazonPersonalizeProvider"),k=function(){function e(e){this._buffer=[],this._config=e||{},this._config.flushSize=this._config.flushSize>0&&this._config.flushSize<=10?this._config.flushSize:5,this._config.flushInterval=this._config.flushInterval||5e3,this._sessionManager=new E,f()(this._config.trackingId)||(this._sessionInfo=this._sessionManager.retrieveSessionInfo(this._config.trackingId)),this._isBrowser=(0,c.gy)().isBrowser,this._setupTimer()}return e.prototype._setupTimer=function(){this._timer&&clearInterval(this._timer);var e=this._config.flushInterval,t=this;this._timer=setInterval((function(){t._sendFromBuffer()}),e)},e.prototype.record=function(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,n,i,r,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,this._getCredentials()];case 1:return(t=o.sent())?(Object.assign(e,{config:this._config,credentials:t,sentAt:new Date}),n=e.event,i=n.eventType,r=n.properties,"Identify"===i?(this._sessionManager.updateSessionInfo(r&&r.userId?r.userId:"",this._sessionInfo),[2]):(f()(e.event.userId)||this._sessionManager.updateSessionInfo(e.event.userId,this._sessionInfo),s=this.generateRequestParams(e,this._sessionInfo),"MediaAutoTrack"!==i?[3,7]:this._isBrowser?f()(A()(s,"eventData.properties.domElementId",null))?[3,3]:[4,this.isElementFullyLoaded(this.loadElement,s.eventData.properties.domElementId,500,5)]:[3,5])):[2,Promise.resolve(!1)];case 2:return o.sent()?new I(s,this):w.debug("Cannot find the media element."),[3,4];case 3:w.debug("Missing domElementId field in 'properties' for MediaAutoTrack event type."),o.label=4;case 4:return[3,6];case 5:w.debug("MediaAutoTrack only for browser"),o.label=6;case 6:return[2];case 7:return[2,this.putToBuffer(s)]}}))}))},e.prototype.loadElement=function(e){return new Promise((function(t,n){return document.getElementById(e)&&document.getElementById(e).clientHeight?t(!0):n(!0)}))},e.prototype.isElementFullyLoaded=function(e,t,n,i){var r=this;return new Promise((function(s,o){return e(t).then(s).catch((function(a){return i-1>0?(c=n,new Promise((function(e){return setTimeout(e,c)}))).then(r.isElementFullyLoaded.bind(null,e,t,n,i-1)).then(s).catch(o):o(a);var c}))}))},e.prototype.getCategory=function(){return"Analytics"},e.prototype.getProviderName=function(){return"AmazonPersonalize"},e.prototype.configure=function(e){w.debug("configure Analytics",e);var t=e||{};return this._config=Object.assign({},this._config,t),f()(this._config.trackingId)||(this._sessionInfo=this._sessionManager.retrieveSessionInfo(this._config.trackingId)),this._setupTimer(),this._config},e.prototype.generateRequestParams=function(e,t){var n={},i=e.event,r=i.eventType,s=i.properties;return n.eventData={eventType:r,properties:s},n.sessionInfo=t,n.sentAt=e.sentAt,n.credentials=e.credentials,n.config=e.config,n},e.prototype._sendEvents=function(e){var t=e.length;if(0!==t){var n=e[0],i=n.config,r=n.credentials,s=n.sessionInfo;if(!this._init(i,r))return!1;if(t>0){for(var o=[],a=0;a<t;a+=1){var c=e.shift(),u=this._generateSingleRecordPayload(c,s);o.push(u)}var p={};p.trackingId=s.trackingId,p.sessionId=s.sessionId,p.userId=s.userId,p.eventList=[],o.forEach((function(e){p.eventList.push(e)}));var h=new l.y(p);this._personalize.send(h,(function(e){e?w.debug("Failed to call putEvents in Personalize",e):w.debug("Put events")}))}}else w.debug("events array is empty, directly return")},e.prototype.putToBuffer=function(e){return this._buffer.length<this._config.flushSize?this._buffer.push(e):(this._buffer.push(e),this._sendFromBuffer()),Promise.resolve(!0)},e.prototype._sendFromBuffer=function(){var e=this,t=this._buffer.length;if(!(t<=0)){for(var n=[],i=null,r=[],s=0;s<t;s+=1){var o=this._buffer.shift(),a=o.credentials,c=o.sessionInfo;0===s?(r.push(o),i=a):v()(c,this._sessionInfo)&&a.sessionToken===i.sessionToken&&a.identityId===i.identityId?(w.debug("no change for cred, put event in the same group"),r.push(o)):(n.push(r),(r=[]).push(o),i=a,this._sessionInfo=c)}n.push(r),n.map((function(t){e._sendEvents(t)}))}},e.prototype._generateSingleRecordPayload=function(e,t){var n=e.eventData,i=e.sentAt,r={};return r.sentAt=i,r.properties=n.properties&&JSON.stringify(n.properties),r.eventId=this._sessionManager.getTimerKey()+t.sessionId,r.eventType=n.eventType,r},e.prototype._init=function(e,t){if(w.debug("init clients"),this._personalize&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return w.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region;return w.debug("initialize personalize with credentials",t),this._personalize=new h.X({region:n,credentials:t,customUserAgent:(0,N.b)(u.zJ.Record)}),!0},e.prototype._getCredentials=function(){var e=this;return p.J.get().then((function(t){return t?(w.debug("set credentials for analytics",e._config.credentials),p.J.shear(t)):null})).catch((function(e){return w.debug("ensure credentials error",e),null}))},e}()},76438:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o,b:()=>s});var i=n(71805),r=n(37070);function s(e){return(0,i.Ij)({category:r.b7.Analytics,action:e})}function o(e){return(0,i.fE)({category:r.b7.Analytics,action:e})}},95225:(e,t,n)=>{var i=n(91700),r=n(35167),s=r;s.v1=i,s.v4=r,e.exports=s},424:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var i=n||0,r=t;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},46797:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)3&t||(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},91700:(e,t,n)=>{var i,r,s=n(46797),o=n(424),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,p=t||[],l=(e=e||{}).node||i,h=void 0!==e.clockseq?e.clockseq:r;if(null==l||null==h){var d=s();null==l&&(l=i=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==h&&(h=r=16383&(d[6]<<8|d[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),_=void 0!==e.nsecs?e.nsecs:c+1,v=f-a+(_-c)/1e4;if(v<0&&void 0===e.clockseq&&(h=h+1&16383),(v<0||f>a)&&void 0===e.nsecs&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,c=_,r=h;var g=(1e4*(268435455&(f+=122192928e5))+_)%4294967296;p[u++]=g>>>24&255,p[u++]=g>>>16&255,p[u++]=g>>>8&255,p[u++]=255&g;var y=f/4294967296*1e4&268435455;p[u++]=y>>>8&255,p[u++]=255&y,p[u++]=y>>>24&15|16,p[u++]=y>>>16&255,p[u++]=h>>>8|128,p[u++]=255&h;for(var m=0;m<6;++m)p[u+m]=l[m];return t||o(p)}},35167:(e,t,n)=>{var i=n(46797),r=n(424);e.exports=function(e,t,n){var s=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[s+a]=o[a];return t||r(o)}},59977:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var i=n(15215),r=n(88319),s=n(32503),o=function(e,t,n){return void 0===t&&(t={}),{query:e,variables:t,authToken:n}},a=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.__extends)(t,e),t.prototype.getModuleName=function(){return"GraphQLAPI"},t.prototype.graphql=function(t,n){return e.prototype.graphql.call(this,t,n)},t}(s.Vq))(null);r.H.register(a)},32503:(e,t,n)=>{"use strict";n.d(t,{Vq:()=>we});var i=n(15215);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}"function"==typeof Symbol&&null!=Symbol.iterator&&Symbol.iterator,"function"==typeof Symbol&&null!=Symbol.asyncIterator&&Symbol.asyncIterator;var s="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function o(e,t){for(var n,i=/\r\n|[\n\r]/g,r=1,s=t+1;(n=i.exec(e.body))&&n.index<t;)r+=1,s=t+1-(n.index+n[0].length);return{line:r,column:s}}function a(e){return c(e.source,o(e.source,e.start))}function c(e,t){var n=e.locationOffset.column-1,i=p(n)+e.body,r=t.line-1,s=e.locationOffset.line-1,o=t.line+s,a=1===t.line?n:0,c=t.column+a,l="".concat(e.name,":").concat(o,":").concat(c,"\n"),h=i.split(/\r\n|[\n\r]/g),d=h[r];if(d.length>120){for(var f=Math.floor(c/80),_=c%80,v=[],g=0;g<d.length;g+=80)v.push(d.slice(g,g+80));return l+u([["".concat(o),v[0]]].concat(v.slice(1,f+1).map((function(e){return["",e]})),[[" ",p(_-1)+"^"],["",v[f+1]]]))}return l+u([["".concat(o-1),h[r-1]],["".concat(o),d],["",p(c-1)+"^"],["".concat(o+1),h[r+1]]])}function u(e){var t=e.filter((function(e){e[0];return void 0!==e[1]})),n=Math.max.apply(Math,t.map((function(e){return e[0].length})));return t.map((function(e){var t,i=e[0],r=e[1];return p(n-(t=i).length)+t+(r?" | "+r:" |")})).join("\n")}function p(e){return Array(e+1).join(" ")}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){var t="function"==typeof Map?new Map:void 0;return g=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return y(e,arguments,E(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),b(i,e)},g(e)}function y(e,t,n){return y=m()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&b(r,n.prototype),r},y.apply(null,arguments)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(g,e);var t,n,i,u,p,l=(t=g,n=m(),function(){var e,i=E(t);if(n){var r=E(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return _(this,e)});function g(e,t,n,i,s,a,c){var u,p,f,y;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(y=l.call(this,e)).name="GraphQLError",y.originalError=null!=a?a:void 0,y.nodes=T(Array.isArray(t)?t:t?[t]:void 0);for(var m=[],b=0,E=null!==(I=y.nodes)&&void 0!==I?I:[];b<E.length;b++){var I,A=E[b].loc;null!=A&&m.push(A)}m=T(m),y.source=null!=n?n:null===(u=m)||void 0===u?void 0:u[0].source,y.positions=null!=i?i:null===(p=m)||void 0===p?void 0:p.map((function(e){return e.start})),y.locations=i&&n?i.map((function(e){return o(n,e)})):null===(f=m)||void 0===f?void 0:f.map((function(e){return o(e.source,e.start)})),y.path=null!=s?s:void 0;var N,w=null==a?void 0:a.extensions;return null==c&&("object"==r(N=w)&&null!==N)?y.extensions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},w):y.extensions=null!=c?c:{},Object.defineProperties(v(y),{message:{enumerable:!0},locations:{enumerable:null!=y.locations},path:{enumerable:null!=y.path},extensions:{enumerable:null!=y.extensions&&Object.keys(y.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=a&&a.stack?(Object.defineProperty(v(y),"stack",{value:a.stack,writable:!0,configurable:!0}),_(y)):(Error.captureStackTrace?Error.captureStackTrace(v(y),g):Object.defineProperty(v(y),"stack",{value:Error().stack,writable:!0,configurable:!0}),y)}return i=g,(u=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,i=e.nodes;n<i.length;n++){var r=i[n];r.loc&&(t+="\n\n"+a(r.loc))}else if(e.source&&e.locations)for(var s=0,o=e.locations;s<o.length;s++){var u=o[s];t+="\n\n"+c(e.source,u)}return t}(this)}},{key:s,get:function(){return"Object"}}])&&f(i.prototype,u),p&&f(i,p),g}(g(Error));function T(e){return void 0===e||0===e.length?void 0:e}function A(e,t,n){return new I("Syntax Error: ".concat(n),void 0,e,[t])}var N=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});const w="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function k(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}(0),e.prototype.inspect=t,w&&(e.prototype[w]=t)}var S=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();k(S);var O=function(){function e(e,t,n,i,r,s,o){this.kind=e,this.start=t,this.end=n,this.line=i,this.column=r,this.value=o,this.prev=s,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function D(e){return null!=e&&"string"==typeof e.kind}k(O);var C=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function P(e){return R(e,[])}function R(e,t){switch(x(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),i=function(e){var t=e[String(w)];if("function"==typeof t)return t;if("function"==typeof e.inspect)return e.inspect}(e);if(void 0!==i){var r=i.call(e);if(r!==e)return"string"==typeof r?r:R(r,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),i=e.length-n,r=[],s=0;s<n;++s)r.push(R(e[s],t));1===i?r.push("... 1 more item"):i>1&&r.push("... ".concat(i," more items"));return"["+r.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);if(0===n.length)return"{}";if(t.length>2)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]";var i=n.map((function(n){return n+": "+R(e[n],t)}));return"{ "+i.join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}function F(e,t){if(!Boolean(e))throw new Error(t)}const L=function(e,t){return e instanceof t};function M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var j=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||F(0,"Body must be a string. Received: ".concat(P(e),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||F(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||F(0,"column in locationOffset is 1-indexed and must be positive.")}var t,n,i;return t=e,(n=[{key:s,get:function(){return"Source"}}])&&M(t.prototype,n),i&&M(t,i),e}();var B=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function U(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,i=!0,r=0,s=null,o=0;o<e.length;++o)switch(e.charCodeAt(o)){case 13:10===e.charCodeAt(o+1)&&++o;case 10:n=!1,i=!0,r=0;break;case 9:case 32:++r;break;default:i&&!n&&(null===s||r<s)&&(s=r),i=!1}return null!==(t=s)&&void 0!==t?t:0}(e);if(0!==n)for(var i=1;i<t.length;i++)t[i]=t[i].slice(n);for(var r=0;r<t.length&&V(t[r]);)++r;for(var s=t.length;s>r&&V(t[s-1]);)--s;return t.slice(r,s).join("\n")}function V(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"\t"!==e[t])return!1;return!0}var q=function(){function e(e){var t=new O(C.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e=this.token;if(e.kind!==C.EOF)do{var t;e=null!==(t=e.next)&&void 0!==t?t:e.next=Y(this,e)}while(e.kind===C.COMMENT);return e},e}();function K(e){return isNaN(e)?C.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function Y(e,t){for(var n=e.source,i=n.body,r=i.length,s=t.end;s<r;){var o=i.charCodeAt(s),a=e.line,c=1+s-e.lineStart;switch(o){case 65279:case 9:case 32:case 44:++s;continue;case 10:++s,++e.line,e.lineStart=s;continue;case 13:10===i.charCodeAt(s+1)?s+=2:++s,++e.line,e.lineStart=s;continue;case 33:return new O(C.BANG,s,s+1,a,c,t);case 35:return G(n,s,a,c,t);case 36:return new O(C.DOLLAR,s,s+1,a,c,t);case 38:return new O(C.AMP,s,s+1,a,c,t);case 40:return new O(C.PAREN_L,s,s+1,a,c,t);case 41:return new O(C.PAREN_R,s,s+1,a,c,t);case 46:if(46===i.charCodeAt(s+1)&&46===i.charCodeAt(s+2))return new O(C.SPREAD,s,s+3,a,c,t);break;case 58:return new O(C.COLON,s,s+1,a,c,t);case 61:return new O(C.EQUALS,s,s+1,a,c,t);case 64:return new O(C.AT,s,s+1,a,c,t);case 91:return new O(C.BRACKET_L,s,s+1,a,c,t);case 93:return new O(C.BRACKET_R,s,s+1,a,c,t);case 123:return new O(C.BRACE_L,s,s+1,a,c,t);case 124:return new O(C.PIPE,s,s+1,a,c,t);case 125:return new O(C.BRACE_R,s,s+1,a,c,t);case 34:return 34===i.charCodeAt(s+1)&&34===i.charCodeAt(s+2)?X(n,s,a,c,t,e):H(n,s,a,c,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return J(n,s,o,a,c,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return $(n,s,a,c,t)}throw A(n,s,z(o))}var u=e.line,p=1+s-e.lineStart;return new O(C.EOF,r,r,u,p,t)}function z(e){return e<32&&9!==e&&10!==e&&13!==e?"Cannot contain the invalid character ".concat(K(e),"."):39===e?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(K(e),".")}function G(e,t,n,i,r){var s,o=e.body,a=t;do{s=o.charCodeAt(++a)}while(!isNaN(s)&&(s>31||9===s));return new O(C.COMMENT,t,a,n,i,r,o.slice(t+1,a))}function J(e,t,n,i,r,s){var o=e.body,a=n,c=t,u=!1;if(45===a&&(a=o.charCodeAt(++c)),48===a){if((a=o.charCodeAt(++c))>=48&&a<=57)throw A(e,c,"Invalid number, unexpected digit after 0: ".concat(K(a),"."))}else c=W(e,c,a),a=o.charCodeAt(c);if(46===a&&(u=!0,a=o.charCodeAt(++c),c=W(e,c,a),a=o.charCodeAt(c)),69!==a&&101!==a||(u=!0,43!==(a=o.charCodeAt(++c))&&45!==a||(a=o.charCodeAt(++c)),c=W(e,c,a),a=o.charCodeAt(c)),46===a||function(e){return 95===e||e>=65&&e<=90||e>=97&&e<=122}(a))throw A(e,c,"Invalid number, expected digit but got: ".concat(K(a),"."));return new O(u?C.FLOAT:C.INT,t,c,i,r,s,o.slice(t,c))}function W(e,t,n){var i=e.body,r=t,s=n;if(s>=48&&s<=57){do{s=i.charCodeAt(++r)}while(s>=48&&s<=57);return r}throw A(e,r,"Invalid number, expected digit but got: ".concat(K(s),"."))}function H(e,t,n,i,r){for(var s,o,a,c,u=e.body,p=t+1,l=p,h=0,d="";p<u.length&&!isNaN(h=u.charCodeAt(p))&&10!==h&&13!==h;){if(34===h)return d+=u.slice(l,p),new O(C.STRING,t,p+1,n,i,r,d);if(h<32&&9!==h)throw A(e,p,"Invalid character within String: ".concat(K(h),"."));if(++p,92===h){switch(d+=u.slice(l,p-1),h=u.charCodeAt(p)){case 34:d+='"';break;case 47:d+="/";break;case 92:d+="\\";break;case 98:d+="\b";break;case 102:d+="\f";break;case 110:d+="\n";break;case 114:d+="\r";break;case 116:d+="\t";break;case 117:var f=(s=u.charCodeAt(p+1),o=u.charCodeAt(p+2),a=u.charCodeAt(p+3),c=u.charCodeAt(p+4),Q(s)<<12|Q(o)<<8|Q(a)<<4|Q(c));if(f<0){var _=u.slice(p+1,p+5);throw A(e,p,"Invalid character escape sequence: \\u".concat(_,"."))}d+=String.fromCharCode(f),p+=4;break;default:throw A(e,p,"Invalid character escape sequence: \\".concat(String.fromCharCode(h),"."))}l=++p}}throw A(e,p,"Unterminated string.")}function X(e,t,n,i,r,s){for(var o=e.body,a=t+3,c=a,u=0,p="";a<o.length&&!isNaN(u=o.charCodeAt(a));){if(34===u&&34===o.charCodeAt(a+1)&&34===o.charCodeAt(a+2))return p+=o.slice(c,a),new O(C.BLOCK_STRING,t,a+3,n,i,r,U(p));if(u<32&&9!==u&&10!==u&&13!==u)throw A(e,a,"Invalid character within String: ".concat(K(u),"."));10===u?(++a,++s.line,s.lineStart=a):13===u?(10===o.charCodeAt(a+1)?a+=2:++a,++s.line,s.lineStart=a):92===u&&34===o.charCodeAt(a+1)&&34===o.charCodeAt(a+2)&&34===o.charCodeAt(a+3)?(p+=o.slice(c,a)+'"""',c=a+=4):++a}throw A(e,a,"Unterminated string.")}function Q(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function $(e,t,n,i,r){for(var s=e.body,o=s.length,a=t+1,c=0;a!==o&&!isNaN(c=s.charCodeAt(a))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++a;return new O(C.NAME,t,a,n,i,r,s.slice(t,a))}function Z(e,t){return new ee(e,t).parseDocument()}var ee=function(){function e(e,t){var n=function(e){return L(e,j)}(e)?e:new j(e);this._lexer=new q(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(C.NAME);return{kind:N.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:N.DOCUMENT,definitions:this.many(C.SOF,this.parseDefinition,C.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(C.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(C.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var e=this._lexer.token;if(this.peek(C.BRACE_L))return{kind:N.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(e)};var t,n=this.parseOperationType();return this.peek(C.NAME)&&(t=this.parseName()),{kind:N.OPERATION_DEFINITION,operation:n,name:t,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseOperationType=function(){var e=this.expectToken(C.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(C.PAREN_L,this.parseVariableDefinition,C.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:N.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(C.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(C.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(C.DOLLAR),{kind:N.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:N.SELECTION_SET,selections:this.many(C.BRACE_L,this.parseSelection,C.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(C.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,i=this.parseName();return this.expectOptionalToken(C.COLON)?(e=i,t=this.parseName()):t=i,{kind:N.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(C.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(C.PAREN_L,t,C.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(C.COLON),{kind:N.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:N.ARGUMENT,name:this.parseName(),value:(this.expectToken(C.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(C.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(C.NAME)?{kind:N.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:N.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)?{kind:N.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:N.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case C.BRACKET_L:return this.parseList(e);case C.BRACE_L:return this.parseObject(e);case C.INT:return this._lexer.advance(),{kind:N.INT,value:t.value,loc:this.loc(t)};case C.FLOAT:return this._lexer.advance(),{kind:N.FLOAT,value:t.value,loc:this.loc(t)};case C.STRING:case C.BLOCK_STRING:return this.parseStringLiteral();case C.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:N.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:N.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:N.NULL,loc:this.loc(t)};default:return{kind:N.ENUM,value:t.value,loc:this.loc(t)}}case C.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:N.STRING,value:e.value,block:e.kind===C.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:N.LIST,values:this.any(C.BRACKET_L,(function(){return t.parseValueLiteral(e)}),C.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:N.OBJECT,fields:this.any(C.BRACE_L,(function(){return t.parseObjectField(e)}),C.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(C.COLON),{kind:N.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(C.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(C.AT),{kind:N.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return this.expectOptionalToken(C.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(C.BRACKET_R),e={kind:N.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(C.BANG)?{kind:N.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:N.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===C.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(C.STRING)||this.peek(C.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),i=this.many(C.BRACE_L,this.parseOperationTypeDefinition,C.BRACE_R);return{kind:N.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:i,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(C.COLON);var n=this.parseNamedType();return{kind:N.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),i=this.parseDirectives(!0);return{kind:N.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:i,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),s=this.parseFieldsDefinition();return{kind:N.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:r,fields:s,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)){var t=[];this.expectOptionalToken(C.AMP);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(C.AMP)||this.peek(C.NAME));return t}return this.delimitedMany(C.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)&&this.peek(C.BRACE_L)&&this._lexer.lookahead().kind===C.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(C.BRACE_L,this.parseFieldDefinition,C.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),i=this.parseArgumentDefs();this.expectToken(C.COLON);var r=this.parseTypeReference(),s=this.parseDirectives(!0);return{kind:N.FIELD_DEFINITION,description:t,name:n,arguments:i,type:r,directives:s,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(C.PAREN_L,this.parseInputValueDef,C.PAREN_R)},t.parseInputValueDef=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(C.COLON);var i,r=this.parseTypeReference();this.expectOptionalToken(C.EQUALS)&&(i=this.parseValueLiteral(!0));var s=this.parseDirectives(!0);return{kind:N.INPUT_VALUE_DEFINITION,description:t,name:n,type:r,defaultValue:i,directives:s,loc:this.loc(e)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),s=this.parseFieldsDefinition();return{kind:N.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:r,fields:s,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),i=this.parseDirectives(!0),r=this.parseUnionMemberTypes();return{kind:N.UNION_TYPE_DEFINITION,description:t,name:n,directives:i,types:r,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(C.EQUALS)?this.delimitedMany(C.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),i=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();return{kind:N.ENUM_TYPE_DEFINITION,description:t,name:n,directives:i,values:r,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(C.BRACE_L,this.parseEnumValueDefinition,C.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),i=this.parseDirectives(!0);return{kind:N.ENUM_VALUE_DEFINITION,description:t,name:n,directives:i,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),i=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();return{kind:N.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:i,fields:r,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(C.BRACE_L,this.parseInputValueDef,C.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===C.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(C.BRACE_L,this.parseOperationTypeDefinition,C.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:N.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:N.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),r=this.parseFieldsDefinition();if(0===n.length&&0===i.length&&0===r.length)throw this.unexpected();return{kind:N.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:r,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),r=this.parseFieldsDefinition();if(0===n.length&&0===i.length&&0===r.length)throw this.unexpected();return{kind:N.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:r,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),i=this.parseUnionMemberTypes();if(0===n.length&&0===i.length)throw this.unexpected();return{kind:N.UNION_TYPE_EXTENSION,name:t,directives:n,types:i,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();if(0===n.length&&0===i.length)throw this.unexpected();return{kind:N.ENUM_TYPE_EXTENSION,name:t,directives:n,values:i,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();if(0===n.length&&0===i.length)throw this.unexpected();return{kind:N.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:i,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(C.AT);var n=this.parseName(),i=this.parseArgumentDefs(),r=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var s=this.parseDirectiveLocations();return{kind:N.DIRECTIVE_DEFINITION,description:t,name:n,arguments:i,repeatable:r,locations:s,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(C.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==B[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if(!0!==(null===(t=this._options)||void 0===t?void 0:t.noLocation))return new S(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw A(this._lexer.source,t.start,"Expected ".concat(ne(e),", found ").concat(te(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind!==C.NAME||t.value!==e)throw A(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(te(t),"."));this._lexer.advance()},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===C.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return A(this._lexer.source,t.start,"Unexpected ".concat(te(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var i=[];!this.expectOptionalToken(n);)i.push(t.call(this));return i},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var i=[];do{i.push(t.call(this))}while(!this.expectOptionalToken(n));return i}return[]},t.many=function(e,t,n){this.expectToken(e);var i=[];do{i.push(t.call(this))}while(!this.expectOptionalToken(n));return i},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n},e}();function te(e){var t=e.value;return ne(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function ne(e){return function(e){return e===C.BANG||e===C.DOLLAR||e===C.AMP||e===C.PAREN_L||e===C.PAREN_R||e===C.SPREAD||e===C.COLON||e===C.EQUALS||e===C.AT||e===C.BRACKET_L||e===C.BRACKET_R||e===C.BRACE_L||e===C.PIPE||e===C.BRACE_R}(e)?'"'.concat(e,'"'):e}var ie={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},re=Object.freeze({});function se(e,t,n){var i=e[t];if(i){if(!n&&"function"==typeof i)return i;var r=n?i.leave:i.enter;if("function"==typeof r)return r}else{var s=n?e.leave:e.enter;if(s){if("function"==typeof s)return s;var o=s[t];if("function"==typeof o)return o}}}function oe(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ie,i=void 0,r=Array.isArray(e),s=[e],o=-1,a=[],c=void 0,u=void 0,p=void 0,l=[],h=[],d=e;do{var f=++o===s.length,_=f&&0!==a.length;if(f){if(u=0===h.length?void 0:l[l.length-1],c=p,p=h.pop(),_){if(r)c=c.slice();else{for(var v={},g=0,y=Object.keys(c);g<y.length;g++){var m=y[g];v[m]=c[m]}c=v}for(var b=0,E=0;E<a.length;E++){var I=a[E][0],T=a[E][1];r&&(I-=b),r&&null===T?(c.splice(I,1),b++):c[I]=T}}o=i.index,s=i.keys,a=i.edits,r=i.inArray,i=i.prev}else{if(u=p?r?o:s[o]:void 0,null==(c=p?p[u]:d))continue;p&&l.push(u)}var A,N=void 0;if(!Array.isArray(c)){if(!D(c))throw new Error("Invalid AST Node: ".concat(P(c),"."));var w=se(t,c.kind,f);if(w){if((N=w.call(t,c,u,p,l,h))===re)break;if(!1===N){if(!f){l.pop();continue}}else if(void 0!==N&&(a.push([u,N]),!f)){if(!D(N)){l.pop();continue}c=N}}}void 0===N&&_&&a.push([u,c]),f?l.pop():(i={inArray:r,index:o,keys:s,edits:a,prev:i},s=(r=Array.isArray(c))?c:null!==(A=n[c.kind])&&void 0!==A?A:[],o=-1,a=[],p&&h.push(p),p=c)}while(void 0!==i);return 0!==a.length&&(d=a[a.length-1][1]),d}(e,{leave:ae})}var ae={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return ue(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,i=le("(",ue(e.variableDefinitions,", "),")"),r=ue(e.directives," "),s=e.selectionSet;return n||r||i||"query"!==t?ue([t,ue([n,i]),r,s]," "):s},VariableDefinition:function(e){var t=e.variable,n=e.type,i=e.defaultValue,r=e.directives;return t+": "+n+le(" = ",i)+le(" ",ue(r," "))},SelectionSet:function(e){return pe(e.selections)},Field:function(e){var t=e.alias,n=e.name,i=e.arguments,r=e.directives,s=e.selectionSet,o=le("",t,": ")+n,a=o+le("(",ue(i,", "),")");return a.length>80&&(a=o+le("(\n",he(ue(i,"\n")),"\n)")),ue([a,ue(r," "),s]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+le(" ",ue(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,i=e.selectionSet;return ue(["...",le("on ",t),ue(n," "),i]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,i=e.variableDefinitions,r=e.directives,s=e.selectionSet;return"fragment ".concat(t).concat(le("(",ue(i,", "),")")," ")+"on ".concat(n," ").concat(le("",ue(r," ")," "))+s},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=-1===e.indexOf("\n"),r=" "===e[0]||"\t"===e[0],s='"'===e[e.length-1],o="\\"===e[e.length-1],a=!i||s||o||n,c="";return!a||i&&r||(c+="\n"+t),c+=t?e.replace(/\n/g,"\n"+t):e,a&&(c+="\n"),'"""'+c.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+ue(e.values,", ")+"]"},ObjectValue:function(e){return"{"+ue(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+le("(",ue(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:ce((function(e){var t=e.directives,n=e.operationTypes;return ue(["schema",ue(t," "),pe(n)]," ")})),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:ce((function(e){return ue(["scalar",e.name,ue(e.directives," ")]," ")})),ObjectTypeDefinition:ce((function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return ue(["type",t,le("implements ",ue(n," & ")),ue(i," "),pe(r)]," ")})),FieldDefinition:ce((function(e){var t=e.name,n=e.arguments,i=e.type,r=e.directives;return t+(fe(n)?le("(\n",he(ue(n,"\n")),"\n)"):le("(",ue(n,", "),")"))+": "+i+le(" ",ue(r," "))})),InputValueDefinition:ce((function(e){var t=e.name,n=e.type,i=e.defaultValue,r=e.directives;return ue([t+": "+n,le("= ",i),ue(r," ")]," ")})),InterfaceTypeDefinition:ce((function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return ue(["interface",t,le("implements ",ue(n," & ")),ue(i," "),pe(r)]," ")})),UnionTypeDefinition:ce((function(e){var t=e.name,n=e.directives,i=e.types;return ue(["union",t,ue(n," "),i&&0!==i.length?"= "+ue(i," | "):""]," ")})),EnumTypeDefinition:ce((function(e){var t=e.name,n=e.directives,i=e.values;return ue(["enum",t,ue(n," "),pe(i)]," ")})),EnumValueDefinition:ce((function(e){return ue([e.name,ue(e.directives," ")]," ")})),InputObjectTypeDefinition:ce((function(e){var t=e.name,n=e.directives,i=e.fields;return ue(["input",t,ue(n," "),pe(i)]," ")})),DirectiveDefinition:ce((function(e){var t=e.name,n=e.arguments,i=e.repeatable,r=e.locations;return"directive @"+t+(fe(n)?le("(\n",he(ue(n,"\n")),"\n)"):le("(",ue(n,", "),")"))+(i?" repeatable":"")+" on "+ue(r," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return ue(["extend schema",ue(t," "),pe(n)]," ")},ScalarTypeExtension:function(e){return ue(["extend scalar",e.name,ue(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return ue(["extend type",t,le("implements ",ue(n," & ")),ue(i," "),pe(r)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,i=e.directives,r=e.fields;return ue(["extend interface",t,le("implements ",ue(n," & ")),ue(i," "),pe(r)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,i=e.types;return ue(["extend union",t,ue(n," "),i&&0!==i.length?"= "+ue(i," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,i=e.values;return ue(["extend enum",t,ue(n," "),pe(i)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,i=e.fields;return ue(["extend input",t,ue(n," "),pe(i)]," ")}};function ce(e){return function(t){return ue([t.description,e(t)],"\n")}}function ue(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter((function(e){return e})).join(n))&&void 0!==t?t:""}function pe(e){return le("{\n",he(ue(e,"\n")),"\n}")}function le(e,t){return null!=t&&""!==t?e+t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""):""}function he(e){return le("  ",e.replace(/\n/g,"\n  "))}function de(e){return-1!==e.indexOf("\n")}function fe(e){return null!=e&&e.some(de)}var _e=n(34549),ve=n(89404),ge=n(71805),ye=n(35166),me=n(88319),be=n(42065),Ee=n(16772),Ie=n(11125),Te=n(88206),Ae=n(97188),Ne=new _e.C("GraphQLAPI"),we=function(){function e(e){this._api=null,this.Auth=Ee.N,this.Cache=Ie.Y,this.Credentials=ve.J,this._options=e,Ne.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"InternalGraphQLAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,s=(0,i.__rest)(t,["API"]),o=(0,i.__assign)((0,i.__assign)({},s),r);return Ne.debug("configure GraphQL API",{opt:o}),o.aws_project_region&&(o=Object.assign({},o,{region:o.aws_project_region,header:{}})),void 0!==o.graphql_headers&&"function"!=typeof o.graphql_headers&&(Ne.warn("graphql_headers should be a function"),o.graphql_headers=void 0),this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return Ne.debug("create Rest instance"),this._options?(this._api=new Ae.e(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},e.prototype._headerBasedAuth=function(e,t){return void 0===t&&(t={}),(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,s,o,a,c,u,p;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:switch(n=this._options,r=n.aws_appsync_authenticationType,s=n.aws_appsync_apiKey,o={},e||r||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11];case"AWS_LAMBDA":return[3,15]}return[3,16];case 1:if(!s)throw new Error(Te.K.NO_API_KEY);return o={Authorization:null,"X-Api-Key":s},[3,17];case 2:return[4,this._ensureCredentials()];case 3:if(!i.sent())throw new Error(Te.K.NO_CREDENTIALS);return[3,17];case 4:return i.trys.push([4,9,,10]),a=void 0,[4,Ie.Y.getItem("federatedInfo")];case 5:return(c=i.sent())?(a=c.token,[3,8]):[3,6];case 6:return[4,Ee.N.currentAuthenticatedUser()];case 7:(u=i.sent())&&(a=u.token),i.label=8;case 8:if(!a)throw new Error(Te.K.NO_FEDERATED_JWT);return o={Authorization:a},[3,10];case 9:throw i.sent(),new Error(Te.K.NO_CURRENT_USER);case 10:return[3,17];case 11:return i.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return p=i.sent(),o={Authorization:p.getAccessToken().getJwtToken()},[3,14];case 13:throw i.sent(),new Error(Te.K.NO_CURRENT_USER);case 14:return[3,17];case 15:if(!t.Authorization)throw new Error(Te.K.NO_AUTH_TOKEN);return o={Authorization:t.Authorization},[3,17];case 16:return o={Authorization:null},[3,17];case 17:return[2,o]}}))}))},e.prototype.getGraphqlOperationType=function(e){var t=Z(e).definitions;return(0,i.__read)(t,1)[0].operation},e.prototype.graphql=function(e,t,n){var r=e.query,s=e.variables,o=void 0===s?{}:s,a=e.authMode,c=e.authToken,u=Z("string"==typeof r?r:oe(r)),p=(0,i.__read)(u.definitions.filter((function(e){return"OperationDefinition"===e.kind})),1)[0],l=(void 0===p?{}:p).operation,h=t||{};switch(c&&(h.Authorization=c),l){case"query":case"mutation":this.createInstanceIfNotCreated();var d=this._api.getCancellableToken(),f={cancellableToken:d,withCredentials:this._options.withCredentials},_=this._graphql({query:u,variables:o,authMode:a},h,f,n);return this._api.updateRequestToBeCancellable(_,d),_;case"subscription":return this._graphqlSubscribe({query:u,variables:o,authMode:a},h,n);default:throw new Error("invalid operation type: ".concat(l))}},e.prototype._graphql=function(e,t,n,r){var s=e.query,o=e.variables,a=e.authMode;return void 0===t&&(t={}),void 0===n&&(n={}),(0,i.__awaiter)(this,void 0,void 0,(function(){var e,c,u,p,l,h,d,f,_,v,g,y,m,b,E,T,A,N,w,k,S;return(0,i.__generator)(this,(function(O){switch(O.label){case 0:return this.createInstanceIfNotCreated(),e=this._options,c=e.aws_appsync_region,u=e.aws_appsync_graphqlEndpoint,p=e.graphql_headers,l=void 0===p?function(){return{}}:p,h=e.graphql_endpoint,d=e.graphql_endpoint_iam_region,_=[{}],(v=!h)?[4,this._headerBasedAuth(a,t)]:[3,2];case 1:v=O.sent(),O.label=2;case 2:return g=[i.__assign.apply(void 0,_.concat([v]))],(y=h)?d?[4,this._headerBasedAuth(a,t)]:[3,4]:[3,6];case 3:return m=O.sent(),[3,5];case 4:m={Authorization:null},O.label=5;case 5:y=m,O.label=6;case 6:return b=[i.__assign.apply(void 0,g.concat([y]))],[4,l({query:s,variables:o})];case 7:if(f=i.__assign.apply(void 0,[i.__assign.apply(void 0,[i.__assign.apply(void 0,b.concat([O.sent()])),t]),!h&&(S={},S["x-amz-user-agent"]=(0,ge.fE)(r),S)]),E={query:oe(s),variables:o},T=Object.assign({headers:f,body:E,signerServiceInfo:{service:h?"execute-api":"appsync",region:h?d:c}},n),!(A=h||u))throw{data:{},errors:[new I("No graphql endpoint provided.")]};O.label=8;case 8:return O.trys.push([8,10,,11]),[4,this._api.post(A,T)];case 9:return N=O.sent(),[3,11];case 10:if(w=O.sent(),this._api.isCancel(w))throw w;return N={data:{},errors:[new I(w.message,null,null,null,null,w)]},[3,11];case 11:if((k=N.errors)&&k.length)throw N;return[2,N]}}))}))},e.prototype.createInstanceIfNotCreated=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype.hasCancelToken=function(e){return this._api.hasCancelToken(e)},e.prototype._graphqlSubscribe=function(e,t,n){var i=e.query,r=e.variables,s=e.authMode,o=e.authToken;void 0===t&&(t={});var a=this._options,c=a.aws_appsync_region,u=a.aws_appsync_graphqlEndpoint,p=a.aws_appsync_authenticationType,l=a.aws_appsync_apiKey,h=a.graphql_headers,d=void 0===h?function(){return{}}:h,f=s||p||"AWS_IAM";if(be.R&&"function"==typeof be.R.subscribe)return be.R.subscribe("",{provider:ye.b,appSyncGraphqlEndpoint:u,authenticationType:f,apiKey:l,query:oe(i),region:c,variables:r,graphql_headers:d,additionalHeaders:t,authToken:o},n);throw Ne.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},e.prototype._ensureCredentials=function(){var e=this;return this.Credentials.get().then((function(t){if(!t)return!1;var n=e.Credentials.shear(t);return Ne.debug("set credentials for api",n),!0})).catch((function(e){return Ne.warn("ensure credentials error",e),!1}))},e}(),ke=new we(null);me.H.register(ke)},88206:(e,t,n)=>{"use strict";var i;n.d(t,{K:()=>i}),function(e){e.NO_API_KEY="No api-key configured",e.NO_CURRENT_USER="No current user",e.NO_CREDENTIALS="No credentials",e.NO_FEDERATED_JWT="No federated jwt",e.NO_AUTH_TOKEN="No auth token specified"}(i||(i={}))},97188:(e,t,n)=>{"use strict";n.d(t,{e:()=>l});var i=n(15215),r=n(34549),s=n(89404),o=n(10465),a=n(36525),c=n(71083),u=n(88835),p=new r.C("RestClient"),l=function(){function e(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=s.J,this._options=e,p.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}return e.prototype.ajax=function(e,t,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,s,a,l,h,d,f,_,v,g,y,m,b,E,I,T,A,N,w,k,S,O;return(0,i.__generator)(this,(function(D){switch(D.label){case 0:return p.debug(t,e),a="us-east-1",l="execute-api",h=void 0,"string"==typeof e?(r=this._parseUrl(e),s=e):(s=e.endpoint,h=e.custom_header,a=e.region,l=e.service,r=this._parseUrl(e.endpoint)),d={method:t,url:s,host:r.host,path:r.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},f={},_=Object.assign({},n),v=_.response,_.body&&("function"==typeof FormData&&_.body instanceof FormData?(f["Content-Type"]="multipart/form-data",d.data=_.body):(f["Content-Type"]="application/json; charset=UTF-8",d.data=JSON.stringify(_.body))),_.responseType&&(d.responseType=_.responseType),_.withCredentials&&(d.withCredentials=_.withCredentials),_.timeout&&(d.timeout=_.timeout),_.cancellableToken&&(d.cancelToken=_.cancellableToken.token),d.signerServiceInfo=_.signerServiceInfo,"function"!=typeof h?[3,2]:[4,h()];case 1:return y=D.sent(),[3,3];case 2:y=void 0,D.label=3;case 3:if(g=y,d.headers=(0,i.__assign)((0,i.__assign)((0,i.__assign)({},f),g),_.headers),m=(0,u.parse)(s,!0,!0),m.search,b=(0,i.__rest)(m,["search"]),d.url=(0,u.format)((0,i.__assign)((0,i.__assign)({},b),{query:(0,i.__assign)((0,i.__assign)({},b.query),_.queryStringParameters||{})})),void 0!==d.headers.Authorization)return d.headers=Object.keys(d.headers).reduce((function(e,t){return d.headers[t]&&(e[t]=d.headers[t]),e}),{}),[2,this._request(d,v)];D.label=4;case 4:return D.trys.push([4,6,,7]),[4,this.Credentials.get()];case 5:return E=D.sent(),[3,7];case 6:return D.sent(),p.debug("No credentials available, the request will be unsigned"),[2,this._request(d,v)];case 7:return D.trys.push([7,9,,10]),I=this._sign((0,i.__assign)({},d),E,{region:a,service:l}),[4,(0,c.A)(I)];case 8:return T=D.sent(),[2,v?T:T.data];case 9:if(A=D.sent(),p.debug(A),o.E.isClockSkewError(A)&&(N=A.response.headers,w=N&&(N.date||N.Date),k=new Date(w),S=o.E.getDateFromHeaderString(I.headers["x-amz-date"]),o.E.isClockSkewed(k)))return O=S.getTime()-o.E.getClockOffset(),o.E.setClockOffset(k.getTime()-O),[2,this.ajax(e,t,n)];throw A;case 10:return[2]}}))}))},e.prototype.get=function(e,t){return this.ajax(e,"GET",t)},e.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},e.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},e.prototype.post=function(e,t){return this.ajax(e,"POST",t)},e.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},e.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},e.prototype.cancel=function(e,t){var n=this._cancelTokenMap.get(e);return!!n&&(n.cancel(t),!0)},e.prototype.hasCancelToken=function(e){return this._cancelTokenMap.has(e)},e.prototype.isCancel=function(e){return c.A.isCancel(e)},e.prototype.getCancellableToken=function(){return c.A.CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},e.prototype.endpoint=function(e){var t=this,n=this._options.endpoints,i="";return Array.isArray(n)?(n.forEach((function(n){n.name===e&&(i=n.endpoint,"string"==typeof n.region?t._region=n.region:"string"==typeof t._options.region&&(t._region=t._options.region),"string"==typeof n.service?t._service=n.service||"execute-api":t._service="execute-api","function"==typeof n.custom_header?t._custom_header=n.custom_header:t._custom_header=void 0)})),i):i},e.prototype._sign=function(e,t,n){var r=n.service,s=n.region,o=e.signerServiceInfo,c=(0,i.__rest)(e,["signerServiceInfo"]),u=s||this._region||this._options.region,l=r||this._service||this._options.service,h={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},d={region:u,service:l},f=Object.assign(d,o),_=a.l.sign(c,h,f);return _.data&&(_.body=_.data),p.debug("Signed Request: ",_),delete _.headers.host,_},e.prototype._request=function(e,t){return void 0===t&&(t=!1),(0,c.A)(e).then((function(e){return t?e:e.data})).catch((function(e){throw p.debug(e),e}))},e.prototype._parseUrl=function(e){var t=e.split("/");return{host:t[2],path:"/"+t.slice(3).join("/")}},e}()},38180:(e,t,n)=>{"use strict";n.d(t,{n:()=>c,x:()=>a});var i=n(15215),r=n(34549),s=n(88319),o=n(5548),a=(new r.C("API"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.__extends)(t,e),t.prototype.getModuleName=function(){return"API"},t.prototype.graphql=function(t,n){return e.prototype.graphql.call(this,t,n)},t}(o.W)),c=new a(null);s.H.register(c)},5548:(e,t,n)=>{"use strict";n.d(t,{G:()=>g,W:()=>v});var i=n(15215),r=n(32503),s=n(97188),o=n(34549),a=n(89404),c=n(88319),u=new o.C("RestAPI"),p=function(){function e(e){this._api=null,this.Credentials=a.J,this._options=e,u.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"RestAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,s=(0,i.__rest)(t,["API"]),o=(0,i.__assign)((0,i.__assign)({},s),r);if(u.debug("configure Rest API",{opt:o}),o.aws_project_region){if(o.aws_cloud_logic_custom){var a=o.aws_cloud_logic_custom;o.endpoints="string"==typeof a?JSON.parse(a):a}o=Object.assign({},o,{region:o.aws_project_region,header:{}})}return Array.isArray(o.endpoints)?o.endpoints.forEach((function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(u.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)})):this._options&&Array.isArray(this._options.endpoints)?o.endpoints=this._options.endpoints:o.endpoints=[],this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return u.debug("create Rest API instance"),this._api=new s.e(this._options),this._api.Credentials=this.Credentials,!0},e.prototype.get=function(e,t,n){try{var i=this.getEndpointInfo(e,t),r=this._api.getCancellableToken(),s=Object.assign({},n);s.cancellableToken=r;var o=this._api.get(i,s);return this._api.updateRequestToBeCancellable(o,r),o}catch(e){return Promise.reject(e.message)}},e.prototype.post=function(e,t,n){try{var i=this.getEndpointInfo(e,t),r=this._api.getCancellableToken(),s=Object.assign({},n);s.cancellableToken=r;var o=this._api.post(i,s);return this._api.updateRequestToBeCancellable(o,r),o}catch(e){return Promise.reject(e.message)}},e.prototype.put=function(e,t,n){try{var i=this.getEndpointInfo(e,t),r=this._api.getCancellableToken(),s=Object.assign({},n);s.cancellableToken=r;var o=this._api.put(i,s);return this._api.updateRequestToBeCancellable(o,r),o}catch(e){return Promise.reject(e.message)}},e.prototype.patch=function(e,t,n){try{var i=this.getEndpointInfo(e,t),r=this._api.getCancellableToken(),s=Object.assign({},n);s.cancellableToken=r;var o=this._api.patch(i,s);return this._api.updateRequestToBeCancellable(o,r),o}catch(e){return Promise.reject(e.message)}},e.prototype.del=function(e,t,n){try{var i=this.getEndpointInfo(e,t),r=this._api.getCancellableToken(),s=Object.assign({},n);s.cancellableToken=r;var o=this._api.del(i,s);return this._api.updateRequestToBeCancellable(o,r),o}catch(e){return Promise.reject(e.message)}},e.prototype.head=function(e,t,n){try{var i=this.getEndpointInfo(e,t),r=this._api.getCancellableToken(),s=Object.assign({},n);s.cancellableToken=r;var o=this._api.head(i,s);return this._api.updateRequestToBeCancellable(o,r),o}catch(e){return Promise.reject(e.message)}},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype.hasCancelToken=function(e){return this._api.hasCancelToken(e)},e.prototype.endpoint=function(e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,this._api.endpoint(e)]}))}))},e.prototype.getEndpointInfo=function(e,t){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");var i=n.find((function(t){return t.name===e}));if(!i)throw new Error("API ".concat(e," does not exist"));var r={endpoint:i.endpoint+t};return"string"==typeof i.region?r.region=i.region:"string"==typeof this._options.region&&(r.region=this._options.region),"string"==typeof i.service?r.service=i.service||"execute-api":r.service="execute-api","function"==typeof i.custom_header?r.custom_header=i.custom_header:r.custom_header=void 0,r},e}(),l=new p(null);c.H.register(l);var h=n(16772),d=n(11125),f=n(37070),_=new o.C("API"),v=function(){function e(e){this.Auth=h.N,this.Cache=d.Y,this.Credentials=a.J,this._options=e,this._restApi=new p(e),this._graphqlApi=new r.Vq(e),_.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"InternalAPI"},e.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return(0,i.__assign)((0,i.__assign)({},t),n)},e.prototype.get=function(e,t,n){return this._restApi.get(e,t,this.getInitWithCustomUserAgentDetails(n,f.Fu.Get))},e.prototype.post=function(e,t,n){return this._restApi.post(e,t,this.getInitWithCustomUserAgentDetails(n,f.Fu.Post))},e.prototype.put=function(e,t,n){return this._restApi.put(e,t,this.getInitWithCustomUserAgentDetails(n,f.Fu.Put))},e.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,this.getInitWithCustomUserAgentDetails(n,f.Fu.Patch))},e.prototype.del=function(e,t,n){return this._restApi.del(e,t,this.getInitWithCustomUserAgentDetails(n,f.Fu.Del))},e.prototype.head=function(e,t,n){return this._restApi.head(e,t,this.getInitWithCustomUserAgentDetails(n,f.Fu.Head))},e.prototype.isCancel=function(e){return this._restApi.isCancel(e)},e.prototype.cancel=function(e,t){return this._restApi.hasCancelToken(e)?this._restApi.cancel(e,t):!!this._graphqlApi.hasCancelToken(e)&&this._graphqlApi.cancel(e,t)},e.prototype.getInitWithCustomUserAgentDetails=function(e,t){var n={category:f.b7.API,action:t};return(0,i.__assign)((0,i.__assign)({},e),{customUserAgentDetails:n})},e.prototype.endpoint=function(e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,this._restApi.endpoint(e)]}))}))},e.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},e.prototype.graphql=function(e,t,n){var r=(0,i.__assign)({category:f.b7.API,action:f.Fu.GraphQl},n);return this._graphqlApi.graphql(e,t,r)},e}(),g=new v(null);c.H.register(g)},39209:(e,t,n)=>{"use strict";var i=n(76578),r="undefined"==typeof globalThis?n.g:globalThis;e.exports=function(){for(var e=[],t=0;t<i.length;t++)"function"==typeof r[i[t]]&&(e[e.length]=i[t]);return e}}}]);