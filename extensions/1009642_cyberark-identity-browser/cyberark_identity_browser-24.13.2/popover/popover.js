var _idaptivePopOverGlobal;!function(){var o=this,a=browser.extension.getBackgroundPage()._idaptiveUniqueGlobal;o.utils.background=new o.utils.BackgroundBase(a),o.utils.MiscFunc=function(e){o.utils.MiscFuncBase.call(this,e)},o.utils.MiscFunc.prototype={getCbeVersion:function(){return this.bgp.firefox.systemData.cbeVersion}},o.common.objectExtend(o.utils.MiscFunc,o.utils.MiscFuncBase),o.utils.miscFunc=new o.utils.MiscFunc(a),o.utils.AppClick=function(e){o.utils.AppClickBase.call(this,e)},o.utils.AppClick.prototype={saveDiagLog:function(e,t){var n=document.createElement("a"),r=(document.body.appendChild(n),new Date);n.setAttribute("download","BElog-"+r.getFullYear()+("0"+(r.getMonth()+1)).slice(-2)+("0"+r.getDate()).slice(-2)+"-"+("0"+r.getHours()).slice(-2)+("0"+r.getMinutes()).slice(-2)+("0"+r.getSeconds()).slice(-2)+".bin"),n.setAttribute("href","data:application/octet-stream;charset=utf-8,"+encodeURIComponent(a.internal.generateDiagnosisData())),n.click()},captureInfinite:function(e,t){browser.tabs.sendMessage(t,{action:this.bgp.communication.CentrifyEventEnum.captureStart,data:{canCreateAppInAP:this.bgp.net.centrifyService.userSetting.canCreateAppInAP,canCreateAppInUP:this.bgp.net.centrifyService.userSetting.canCreateAppInUP}})},signIn:function(e){browser.tabs.create({url:"https://"+e}),window.close()},signOut:async function(e,t){let n="https://"+e+"/my?logout=true";await o.storage.get(o.preference.perfKeyEnum.isLoggedInShellTenant)&&(e=(await o.storage.get(o.preference.perfKeyEnum.loggedInShellTenantDetails)).masterShellTenant,n=`https://${e}/`+t),browser.tabs.create({url:n}),window.close()},openApp:function(e,t){t?browser.tabs.create({url:e}):browser.tabs.update({url:e}),setTimeout(function(){window.close()},500)},menuClick:function(n){var r=this;browser.tabs.query({active:!0,currentWindow:!0},function(e){var t=e[0].id;switch(n){case"menuCapture":r.captureInfinite(n,t);break;case"menuClearSkip":r.clearSkippedSites(n,t);break;case"menuDiagLog":r.saveDiagLog(n,t)}})},updateVersion:function(e){browser.tabs.create({url:e}),window.close()},setPreference:function(e,t,n){o.storage.set(e,t)},appsRefresh:function(){var t=this;browser.tabs.query({active:!0,currentWindow:!0},function(e){e=e[0].id;t.bgp.formfill.appsUpdater.asyncUpdate(!1,t.bgp.formfill.appsUpdater.maxTimeTick,!0),browser.tabs.sendMessage(e,{action:t.bgp.communication.AppsUpdaterEventEnum.formfillRecheck})})},securedItemsRefresh:function(){this.bgp.securedItem.securedItemsUpdater.asyncUpdate(!1)},setClearClipboardTimer:function(e){this.bgp.common.setClearClipboardTimer(e)},getCreds:function(e,t){browser.runtime.sendMessage({action:o.communication.AppsUpdaterEventEnum.getCredsForApp,appkey:e}).then(t)},getCredsForSecuredItem:function(e,t,n){browser.runtime.sendMessage({action:o.communication.AppsUpdaterEventEnum.getCredsForSecuredItem,itemKey:e,type:t}).then(n)},getPassphraseWordList:function(e){chrome.runtime.sendMessage({action:o.communication.AppsUpdaterEventEnum.getPassphraseWordList},e)},getVerificationCode:function(e,t,n){browser.runtime.sendMessage({action:o.communication.AppsUpdaterEventEnum.getVerificationCodeForApp,appkey:e,actionType:n},t)},getVerificationCodeForSecuredPassword:function(e,t,n){browser.runtime.sendMessage({action:o.communication.AppsUpdaterEventEnum.getVerificationCodeForSecuredPassword,itemKey:e,actionType:n},t)},clearAllSkippedSites:function(){o.storage.set(o.preference.perfKeyEnum.skippedSites,""),browser.tabs.query({},function(e){for(var t={action:o.communication.LandCatchEventEnum.clearAllSkippedSites},n=0;n<e.length;n++){var r=new URL(e[n].url);"http:"!==r.protocol&&"https:"!==r.protocol||browser.tabs.sendMessage(e[n].id,t)}})},reRenderPopoverApp:function(n){o.appInstance&&o.utils.miscFunc.getBgProperties().then(e=>{e.logoPath="../popover/images/logo-blue-trademark.png";var t=o.appInstance.state.contentType;e.contentType=t||n,e=o.utils.miscFunc.updatePopoverState(e),a.formfill.appsUpdater.checkForUpdate(),o.appInstance.reRenderApp(e)})}},o.common.objectExtend(o.utils.AppClick,o.utils.AppClickBase),o.utils.appClick=new o.utils.AppClick(a),o.components.MenuBtnsExt=o.components.createMenusClsWrapper([{id:"menuCapture",display:"Capture",toolTip:"Create Infinite Application",disable:!1,extraClass:"capture-button"}]),a.formfill.appsUpdater.addObserverByName(function(e){o.utils.appClick.reRenderPopoverApp(o.constants.contents.APPS)},"popOverAppsUpdaterObserver"),a.securedItem.securedItemsUpdater.addObserverByName(function(e){o.utils.appClick.reRenderPopoverApp(o.constants.contents.SECURED_ITEMS)},"popOverItemsUpdaterObserver"),a.net.centrifyConnection.addObserverByName(function(e){o.utils.appClick.reRenderPopoverApp()},"popOverConnectionObserver"),document.addEventListener("DOMContentLoaded",function(e){o.utils.miscFunc.getBgProperties().then(function(e){e.logoPath="../popover/images/logo-blue-trademark.png",e=o.utils.miscFunc.updatePopoverState(e),"?tab=genpass"===window.location.search&&(e.contentType="genpass",o.components.BottomBarExt=null,o.components.RightBarExt=null),a.formfill.appsUpdater.checkForUpdate(),preact.render(preact.createElement(o.components.PopoverAppExt,e),document.getElementById("appRoot"))})})}.call(_idaptivePopOverGlobal=void 0===_idaptivePopOverGlobal?{}:_idaptivePopOverGlobal);