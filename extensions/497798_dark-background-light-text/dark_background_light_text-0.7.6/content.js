(()=>{var e={96:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this._acquired=!1,this._waitingResolvers=[]}get acquired(){return this._acquired}acquireAsync(){return this._acquired?new Promise((e=>{this._waitingResolvers.push(e)})):(this._acquired=!0,Promise.resolve())}tryAcquire(){return!this._acquired&&(this._acquired=!0,!0)}release(){if(!this._acquired)throw new Error("Cannot release an unacquired lock");this._waitingResolvers.length>0?this._waitingResolvers.shift()():this._acquired=!1}}},694:(e,t)=>{var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(e){return(e=Math.round(e))<0?0:e>255?255:e}function s(e){return e<0?0:e>1?1:e}function i(e){return"%"===e[e.length-1]?o(parseFloat(e)/100*255):o(parseInt(e))}function n(e){return"%"===e[e.length-1]?s(parseFloat(e)/100):s(parseFloat(e))}function l(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in r)return r[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var a=s.indexOf("("),d=s.indexOf(")");if(-1!==a&&d+1===s.length){var c=s.substr(0,a),h=s.substr(a+1,d-(a+1)).split(","),u=1;switch(c){case"rgba":if(4!==h.length)return null;u=n(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),u];case"hsla":if(4!==h.length)return null;u=n(h.pop());case"hsl":if(3!==h.length)return null;var _=(parseFloat(h[0])%360+360)%360/360,p=n(h[1]),f=n(h[2]),g=f<=.5?f*(p+1):f+p-f*p,m=2*f-g;return[o(255*l(m,g,_+1/3)),o(255*l(m,g,_)),o(255*l(m,g,_-1/3)),u];default:return null}}return null}}catch(e){}},681:(e,t,r)=>{var o,s;o=[r,t,r(933)],void 0===(s=function(e,t,r){"use strict";function o(e){let t,r=1*e[0]/255,o=1*e[1]/255,s=1*e[2]/255,i=Math.max(r,o,s),n=Math.min(r,o,s);if(i==n)t=0;else if(i==r&&o>=s)t=60*(o-s)/(i-n);else if(i==r&&o<s)t=60*(o-s)/(i-n)+360;else if(i==o)t=60*(s-r)/(i-n)+120;else{if(i!=s)throw new Error("this code should have hever been reached");t=60*(r-o)/(i-n)+240}let l=(i+n)/2,a=(i-n)/(1-Math.abs(1-(i+n)));return Number.isNaN(a)&&(a=0),[t,100*a,100*l]}function s(e,t,s){let i,n=o(e.slice(0,3)),l=n[0],a=n[1],d=n[2],c=e[3],h=r.get_acceptable_range(l);return a<20?t?"rgba("+[s.default_dark_color[0],s.default_dark_color[1],s.default_dark_color[2],c].join(", ")+")":"rgba("+[s.default_light_color[0],s.default_light_color[1],s.default_light_color[2],c].join(", ")+")":(i=t?d<=h[0]?d:d>=100-h[0]?100-d:h[0]:d>=h[1]?d:d<=100-h[1]?100-d:h[1],"hsla("+l+", "+a+"%, "+i+"%, "+c+")")}Object.defineProperty(t,"__esModule",{value:!0}),t.relative_luminance=t.darken_color=t.lighten_color=t.lighten_or_darken_color=t.HSV_to_RGB=t.RGB_to_HSV=t.RGB_to_HSL=void 0,t.RGB_to_HSL=o,t.RGB_to_HSV=function(e,t,r){let o,s,i=1*e/255,n=1*t/255,l=1*r/255,a=Math.max(i,n,l),d=Math.min(i,n,l),c=a;if(a==d)o=0;else if(a==i&&n>=l)o=(n-l)/(a-d)*60;else if(a==i&&n<l)o=(n-l)/(a-d)*60+360;else if(a==n)o=(l-i)/(a-d)*60+120;else{if(a!=l)throw new Error("this code should have hever been reached");o=(i-n)/(a-d)*60+240}return s=0==a?0:1-d/a,{H:o,S:s,V:c}},t.HSV_to_RGB=function(e,t,r){let o,s,i,n=1*e,l=100*r,a=(100-100*t)*l/100,d=n%60*1/60*(l-a),c=a+d,h=l-d;switch(Math.floor(n/60)){case 0:o=l,s=c,i=a;break;case 1:o=h,s=l,i=a;break;case 2:o=a,s=l,i=c;break;case 3:o=a,s=h,i=l;break;case 4:o=c,s=a,i=l;break;case 5:o=l,s=a,i=h;break;default:throw new Error("bad H_i value")}return{R:Math.floor(2.55*o),G:Math.floor(2.55*s),B:Math.floor(2.55*i)}},t.lighten_or_darken_color=s,t.lighten_color=function(e,t){return s(e,!1,t)},t.darken_color=function(e,t){return s(e,!0,t)},t.relative_luminance=function(e){return 1*e[0]/255*.299+1*e[1]/255*.587+1*e[2]/255*.114}}.apply(t,o))||(e.exports=s)},788:(e,t,r)=>{var o;void 0===(o=function(e,t){"use strict";function r(e){if(e.length<7||e.length>15)return!1;let t=0,r=null,o=null,s=null;for(let i=0;i<=e.length;i++){const n=e.charCodeAt(i);if(46===n||i===e.length){if(t++,t>4||t<4&&i===e.length)return!1;if(null===r)return!1;if(null!==s&&100*r+10*o+s>255)return!1;r=null,o=null,s=null;continue}if(n<48||n>57)return!1;const l=n-48;if(null!==r)if(null!==o){if(null!==s)return!1;s=l}else o=l;else r=l}return!0}function o(e){const t=e.split(".");return[t.pop(),t]}Object.defineProperty(t,"__esModule",{value:!0}),t.generate_urls=t.is_IPv4=t.hint_marker=void 0,t.hint_marker="<next_is_preferred>",t.is_IPv4=r,t.generate_urls=function(e,s=!1,i=o){try{const o=new URL(e),n=[],l=o.href.startsWith(`${o.protocol}//`)?`${o.protocol}//`:o.protocol,a="http:"===o.protocol||"https:"===o.protocol;let d=!1;s&&e.indexOf("/")<0&&(n.push(t.hint_marker),d=!0);let c=o.pathname.split("/").filter((e=>e.length>0)),h=o.host?`${a?"":l}${o.host}/`:l.endsWith("//")?`${l}/`:l;for(let e=c.length-1;e>=0;e--)n.push(`${h}${c.slice(0,e+1).join("/")}`);if(s&&!d&&("file://"===l&&n.length>0?n.splice(n.length-1,0,t.hint_marker):n.push(t.hint_marker),d=!0),o.host&&o.hostname&&o.host!==o.hostname&&n.push(a?o.host:`${l}${o.host}`),!r(o.hostname)&&o.hostname.indexOf(".")>=0){let[e,t]=i(o.hostname);if(t)for(let r=0;r<t.length;r++)n.push(`${t.slice(r,t.length).join(".")}.${e}`);n.push(a?e:`${l}${e}`)}else o.hostname&&n.push(a?o.hostname:`${l}${o.hostname}`);return a||n.push(l),0==n.length?(console.error(`generate_urls: no urls has been generated, returning original: ${e}`),s?[t.hint_marker,e]:[e]):n}catch(r){return console.error(`generate_urls: something went wrong, returning original URL: ${e}`,r),s?[t.hint_marker,e]:[e]}}}.apply(t,[r,t]))||(e.exports=o)},933:(e,t,r)=>{var o;void 0===(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get_acceptable_range=void 0;const r=[50,25,30,25,60,45],o=[80,40,45,40,85,75];t.get_acceptable_range=function(e){e%=360;let t=Math.floor(e/60),s=r[t%6],i=r[(t+1)%6],n=o[t%6],l=o[(t+1)%6],a=e%60/60,d=3*Math.PI/2+Math.PI*a,c=(Math.sin(d)+1)/2;return[Math.round(s+c*(i-s)),Math.round(n+c*(l-n))]}}.apply(t,[r,t]))||(e.exports=o)},773:(e,t,r)=>{var o,s;o=[r,t,r(535),r(788)],void 0===(s=function(e,t,r,o){"use strict";const s=browser.runtime.sendMessage({action:"query_tabId"});let i;try{i=window.self!==window.top}catch(e){i=!0}try{let e,t;void 0===window.content_script_state&&(window.content_script_state="normal_order");let n,l=new Promise((e=>{t=e}));window.do_it=async function(a){try{let d=await async function(e){if(window.prefs.enabled){if(i){let t=await browser.runtime.sendMessage({action:"query_parent_method_number"});if(r.methods[t].affects_iframes)return r.methods[0];if("about:blank"===e||"about:srcdoc"===e)return r.methods[t]}let t=!1;if(Object.keys(window.configured_tabs).length>0){let e=await s;t=!!window.configured_tabs.hasOwnProperty(e)&&window.configured_tabs[e]}if(!1!==t)return r.methods[t];let n=Object.keys(window.merged_configured);for(let t of o.generate_urls(e))if(n.indexOf(t)>=0)return r.methods[window.merged_configured[t]];return r.methods[window.prefs.default_method]}return r.methods[0]}(window.document.documentURI);if(t?(t(d),t=null):l=Promise.resolve(d),!e||d.number!==e.number||Object.keys(a).some((e=>e.indexOf("_color")>=0))){for(let e of document.querySelectorAll('style[class="dblt-ykjmwcnxmi"]'))e.parentElement.removeChild(e);for(let e of d.stylesheets){let t=document.createElement("style");t.setAttribute("data-source",e.name),t.classList.add("dblt-ykjmwcnxmi"),t.innerText=window.rendered_stylesheets[`${e.name}_${i?"iframe":"toplevel"}`],document.documentElement.appendChild(t),document.body||document.addEventListener("DOMContentLoaded",(function(){document.documentElement.appendChild(t)}))}n&&(n.unload_from_window(),n=void 0),d.executor&&(n=new d.executor(window,window.prefs),n.load_into_window())}e=d}catch(e){console.exception(e)}},browser.runtime.onMessage.addListener((async(e,t)=>{try{if(!e.action)return void console.error("bad message!",e);switch(e.action){case"get_method_number":return(await l).number;default:return void console.error("bad message 2!",e)}}catch(e){return void console.exception(e)}})),"registered_content_script_first"===window.content_script_state&&(window.do_it({}),window.content_script_state="does not matters anymore")}catch(e){console.exception(e)}}.apply(t,o))||(e.exports=s)},576:(e,t,r)=>{var o;void 0===(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvertMethod=void 0,t.InvertMethod=class{constructor(e,t){this.window=e}load_into_window(){let e=this.window.document.querySelector("#mybpwaycfxccmnp-dblt-backdrop-filter");e||(e=this.window.document.createElement("div"),e.setAttribute("id","mybpwaycfxccmnp-dblt-backdrop-filter"),e.style.display="none",this.window.document.documentElement.appendChild(e))}unload_from_window(){let e=this.window.document.querySelector("#mybpwaycfxccmnp-dblt-backdrop-filter");null!==e&&e.parentElement.removeChild(e)}}}.apply(t,[r,t]))||(e.exports=o)},682:(e,t,r)=>{var o,s;o=[r,t,r(681),r(366),r(694)],void 0===(s=function(e,t,r,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StylesheetColorProcessor=void 0;const i=(e,t)=>e.some((e=>t.some((t=>e&&t.toLowerCase().indexOf(e.toLowerCase())>=0||t&&e.toLowerCase().indexOf(t.toLowerCase())>=0)))),n=[".ytp-menuitem-toggle-checkbox",".ytp-volume-slider",".ytp-hover-progress",".ytp-load-progress",".ytp-progress-list",".paper-toggle-button",".barchart"],l=["media.mongodb.org/code-block-bg.png"],a=["a.add","favorite.gif","pageviews.png","bg-user2.gif","bg-author-link.gif","bg-comments2.gif","button","btn","icon","logo","stars","sprites","sprite","Menu","s.ytimg.com","toggle","toolbar","progress","face",".svg","image/svg","/rsrc.php/",".i-tip",".dijitCheckBox","checkbox",".current-rating","chrome://wot/",".ytp-gradient-top",".ytp-gradient-bottom","thumbnail","tooltip","avatar","browserref"],d=["ActiveText","ButtonFace","ButtonText","Canvas","CanvasText","Field","FieldText","GrayText","Highlight","HighlightText","LinkText","VisitedText","ActiveBorder","ActiveCaption","AppWorkspace","Background","ButtonHighlight","ButtonShadow","CaptionText","InactiveBorder","InactiveCaption","InactiveCaptionText","InfoBackground","InfoText","Menu","MenuText","Scrollbar","ThreeDDarkShadow","ThreeDFace","ThreeDHighlight","ThreeDLightShadow","ThreeDShadow","Window","WindowFrame","WindowText"].map((e=>e.toLowerCase()));class c extends o.StylesheetProcessorAbstract{constructor(e,t){super(e,'[style*="color"], [style*="background"]'),this.var_name_postfix="-dark-background-light-text-add-on-",this.rename_var_fg=e=>`${e}${this.var_name_postfix}fg`,this.rename_var_bg=e=>`${e}${this.var_name_postfix}bg`,this.use_webkit_text_stroke=!1,this.options=t;let o=s.parseCSSColor(this.options.default_foreground_color),i=s.parseCSSColor(this.options.default_background_color),n=r.relative_luminance(i.slice(0,3))<r.relative_luminance(o.slice(0,3)),l=n?{default_light_color:o,default_dark_color:i}:{default_light_color:i,default_dark_color:o};this.backgroundify_color=e=>r.lighten_or_darken_color(e,n,l),this.foregroundify_color=e=>r.lighten_or_darken_color(e,!n,l)}unload_from_window(){o.StylesheetProcessorAbstract.prototype.unload_from_window.call(this,!1)}all_sheets_have_been_processed(){let e=document.querySelectorAll('style[data-source="simple-css"]');for(let t of e)t.parentElement?.removeChild(t);super.all_sheets_have_been_processed()}process_CSSStyleDeclaration(e,t,r,i,l,a){let d=[];for(let t of e)0===t.indexOf("--")&&t.indexOf(this.var_name_postfix)<0&&d.push(t);for(let o of d)e.setProperty(this.rename_var_fg(o),this.process_color_property(e.getPropertyValue(o),!0,!1),e.getPropertyPriority(o)),e.setProperty(this.rename_var_bg(o),this.process_background_property(e.getPropertyValue(o),r,t),e.getPropertyPriority(o));let c=e.getPropertyValue("color"),h=e.getPropertyValue("background"),u=e.getPropertyValue("background-color"),_=e.getPropertyValue("background-image"),p=e.getPropertyValue("background-repeat"),f=e.getPropertyValue("background-position"),g=e.getPropertyValue("text-shadow"),m=!1;if(c&&e.setProperty("color",this.process_color_property(c,!0,!1),e.getPropertyPriority("color")),h.indexOf("var(")>=0&&!n.some((e=>r.indexOf(e)>=0))&&e.setProperty("background",this.process_background_property(h,r,t),e.getPropertyPriority("background")),u&&!n.some((e=>r.indexOf(e)>=0))&&e.setProperty("background-color",this.process_color_property(u,!1,!1),e.getPropertyPriority("background-color")),_){let s,i,n=o.brackets_aware_split(_,void 0);s=p?p.split(",").map((e=>e.trim())):["repeat"],i=f?f.split(",").map((e=>e.trim())):["0% 0%"];let l=n.map(((e,o)=>{let{0:n,1:l}=this.process_background_image(e,s[o%s.length],i[o%i.length],r,t);return m=m||l,n}));e.setProperty("background-image",l.join(", "),e.getPropertyPriority("background-image"))}if(!m&&g){let t=o.brackets_aware_split(g,void 0).map((e=>{let[t,r]=function(e){let t,r=o.brackets_aware_split(e," ");for(let e=0;e<r.length;e++){let o=s.parseCSSColor(r[e]);if(o){t=e,r[e]=o;break}}return void 0===t?[null,null]:[r,t]}(e);return null!==t&&null!==r?(t[r]=this.backgroundify_color(t[r]),t.join(" ")):e}));e.setProperty("text-shadow",t.join(", "),e.getPropertyPriority("text-shadow"))}if(m)if(this.use_webkit_text_stroke)e.setProperty("-webkit-text-stroke-color",this.options.default_background_color,"important"),e.setProperty("-webkit-text-stroke-width","2px","important");else{let t=this.options.default_background_color;e.setProperty("text-shadow",[`${t} 0 0 1px`,`${t} 0 0 2px`,`${t} 0 0 3px`,`${t} 0 0 4px`,`${t} 0 0 5px`].join(", "),"important")}}static is_css_var(e){return 0===e.indexOf("var(")&&e.lastIndexOf(")")===e.length-1}static process_css_var_usage(e,t,r){let o=e.trim();if(!c.is_css_var(o))throw new Error(`${o} is not CSS var!`);o=o.slice(4,o.length-1);let s=o.indexOf(",");if(s>=0){let e=o.slice(0,s).trim(),i=o.slice(s+1,o.length).trim();return`var(${t(e)}, ${c.is_css_var(i)?c.process_css_var_usage(i,t,r):r(i)})`}return`var(${t(o.trim())})`}process_bg_part(e,t,r){if(e=e.trim(),c.is_css_var(e))return c.process_css_var_usage(e,this.rename_var_bg,(e=>this.process_bg_part(e,t,r)));return this.process_color_property(e,!1,!0)||this.process_background_image(e,"TODO bg_repeat","TODO bg_position",t,r)[0]}process_background_property(e,t,r){let s=o.brackets_aware_split(e,","),i=[];for(let e of s){let s=o.brackets_aware_split(e," "),n=[];for(let e of s)n.push(this.process_bg_part(e,t,r));i.push(n.join(" "))}return i.join(", ")}process_color_property(e,t,r){let o=s.parseCSSColor(e);return o?t?this.foregroundify_color(o):this.backgroundify_color(o):e.indexOf("-moz-")>=0||d.indexOf(e.toLowerCase().trim())>=0?t?this.options.default_foreground_color:this.options.default_background_color:c.is_css_var(e.trim())?c.process_css_var_usage(e,t?this.rename_var_fg:this.rename_var_bg,(e=>this.process_color_property(e,t,!1))):r?void 0:0===e.indexOf("rgba(")||0===e.indexOf("rgb(")?t?this.options.default_foreground_color:this.options.default_background_color:e}process_background_image(e,t,r,s,n){if(0===e.indexOf("url(")){let d=e.slice(e.indexOf("(")+1,e.lastIndexOf(")"));return d=d.trim(),0===d.indexOf('"')&&d.lastIndexOf('"')===d.length-1&&(d=d.slice(1,d.length-1)),d=new URL(d,n).href,s===o.inline_fake_selector?[`url("${d}")`,!0]:i(l,[d,s])||"no-repeat"!==t&&"no-repeat no-repeat"!==t&&e.indexOf("/rsrc.php/")>=0?["none",!1]:i(a,[d,s])?['url("'+d+'")',!0]:"no-repeat"!==t&&"no-repeat no-repeat"!==t||2!==(r.match(/px/g)||[]).length?["none",!1]:['url("'+d+'")',!0]}if(e.indexOf("gradient")<e.indexOf("(")){let t=e.indexOf("("),r=e.lastIndexOf(")"),s=e.slice(0,t),i=e.slice(t+1,r);return[s+"("+o.brackets_aware_split(i,void 0).map((e=>o.brackets_aware_split(e," ").map((e=>this.process_color_property(e,!1,!1))).join(" "))).join(", ")+")",!1]}return[e,!1]}}t.StylesheetColorProcessor=c}.apply(t,o))||(e.exports=s)},366:(e,t,r)=>{var o,s;o=[r,t,r(96)],void 0===(s=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StylesheetProcessorAbstract=t.brackets_aware_split=t.inline_fake_selector=void 0;const o=(e,t)=>{let r=0;for(let o=0;o<t.length;o++)r+=t[o]==e?1:0;return r};function s(e,t=","){let r=[],s=[],i=0,n=e.split(t);for(let e=0;e<n.length;e++)s.push(n[e].trim()),i+=o("(",n[e]),i-=o(")",n[e]),0===i&&(r.push(s.join(t)),s=[]);return r}t.inline_fake_selector="_inline_ykwfjtjiab",t.brackets_aware_split=s;const i=new RegExp('"',"g"),n=new RegExp("!important;","g"),l="data-is-imported";class a{constructor(e,t="[style]"){if(this.schedule_inline_override_stylesheet_update_timerID=0,this.shadow_roots=[],this.window=e,this.url=e.document.documentURI,this.processed_stylesheets=new WeakMap,this.self_stylesheets=new WeakSet,this.all_initial_sheets_have_been_processed=!1,this.workaround_requested=new WeakSet,this.broken_stylesheets=new WeakSet,this.style_selector=t,this.overridden_inline_styles=new Set,this.inline_overrides_style=[],this.auxiliary_element=document.createElement("div"),this.inline_override_lock=new r.default,this.stop=!1,"WeakRef"in e){const e=this.shadow_roots,t=Element.prototype.attachShadow;exportFunction((function(r){let o=t.call(this,r);return e.push(new WeakRef(o)),o}),Element.prototype,{defineAs:"attachShadow"})}}load_into_window(){this.process(),this.handle_visibilitychange=e=>{this.stop||this.window.document.hidden&&"complete"===this.window.document.readyState||this.process()},this.window.document.addEventListener("visibilitychange",this.handle_visibilitychange),this.window.addEventListener("unload",(e=>{this.unload_from_window(!0)}))}unload_from_window(e){if(this.stop=!0,this.handle_visibilitychange&&this.window.document.removeEventListener("visibilitychange",this.handle_visibilitychange),!e){for(let e of this.window.document.styleSheets){let t=e.ownerNode;if(t)if(t.hasAttribute(l))setTimeout((()=>{t.parentNode?.removeChild(t)}),0);else{let e=t.cloneNode(!0);setTimeout((()=>{t.parentNode?.insertBefore(e,t.nextSibling),setTimeout((()=>{t.parentNode?.removeChild(t)}),0)}),0)}}this.prev_inline_override_stylesheet&&(browser.runtime.sendMessage({action:1,code:this.prev_inline_override_stylesheet}),this.prev_inline_override_stylesheet=void 0,this.overridden_inline_styles.clear(),this.inline_overrides_style.length=0)}}all_sheets_have_been_processed(){this.all_initial_sheets_have_been_processed=!0}process(e=!1){if(!this.stop){try{this.window.document}catch(e){return void(this.stop=!0)}for(let e=this.shadow_roots.length-1;e>=0;e--){let t=this.shadow_roots[e].deref();if(void 0!==t)for(let e of t.styleSheets)this.process_CSSStyleSheet(e);else this.shadow_roots.splice(e,1)}for(let e of this.window.document.styleSheets)this.process_CSSStyleSheet(e);this.all_initial_sheets_have_been_processed||("complete"===this.window.document.readyState?Array.prototype.every.call(this.window.document.styleSheets,(e=>this.processed_stylesheets.has(e)||this.broken_stylesheets.has(e)||this.self_stylesheets.has(e)))?this.all_sheets_have_been_processed():setTimeout(this.all_sheets_have_been_processed,2e3):setTimeout(this.all_sheets_have_been_processed,1e4));for(let e of this.window.document.querySelectorAll(this.style_selector))this.process_HTMLElement(e);!0!==e&&(this.window.document.hidden&&"complete"===this.window.document.readyState||setTimeout((()=>this.process()),"complete"!==this.window.document.readyState?100:1e3))}}static find_ancestor_ownerNode(e){let{ownerNode:t,ownerRule:r}=e;return t||(r?this.find_ancestor_ownerNode(r.parentStyleSheet??e.parentStyleSheet):void 0)}workaround_stylesheet(e,t){if(this.workaround_requested.has(e))return;this.workaround_requested.add(e);let{ownerNode:r,ownerRule:o}=e;if(r){if(!(r instanceof HTMLLinkElement))return console.error("ownerNode is not instanceof HTMLLinkElement",r),void this.broken_stylesheets.add(e);if(r.hasAttribute("crossorigin")&&["anonymous","use-credentials",""].indexOf(r.getAttribute("crossorigin"))>=0)return console.error("ownerNode already has crossorigin attribute but the stylesheet is still unaccessable"),void this.broken_stylesheets.add(e);let t=r.getAttribute("href");if(!t)return console.error("ownerNode does not have href"),void this.broken_stylesheets.add(e);if(["https:","http:"].indexOf(new URL(t,window.document.documentURI).protocol)<0)return void this.broken_stylesheets.add(e);let o=r.cloneNode();o.setAttribute("crossorigin","anonymous"),o.addEventListener("load",(()=>this.process(!0)),{once:!0}),setTimeout((()=>r.parentNode?.removeChild(r)),0),r.parentNode?.insertBefore(o,r.nextSibling)}else{if(!o)return void console.error("None of ownerNode and ownerRule is defined in stylesheet. This should never happen.",e);{let r=new URL(e.href||o.href,t);o.parentStyleSheet?setTimeout((()=>o.parentStyleSheet.deleteRule(Array.prototype.indexOf.call(o.parentStyleSheet.cssRules,o))),0):setTimeout((()=>e.parentStyleSheet.deleteRule(Array.prototype.indexOf.call(e.parentStyleSheet.cssRules,o))),0);let s=this.window.document.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("crossorigin","anonymous"),s.setAttribute(l,"true");try{s.setAttribute("media",o.media.mediaText)}catch(e){console.error(e,o)}let i=a.find_ancestor_ownerNode(e);i.parentNode.insertBefore(s,i),s.addEventListener("load",(()=>this.process(!0)),{once:!0}),s.setAttribute("href",r.href)}}}process_CSSStyleSheet(e,t){if(this.stop)return"stop";if(!(this.processed_stylesheets.has(e)&&this.processed_stylesheets.get(e)===e.cssRules.length||this.broken_stylesheets.has(e)||this.self_stylesheets.has(e))){if(!e.ownerNode?.classList.contains("dblt-ykjmwcnxmi")){t||(t=e.href&&!e.href.startsWith("data:")?new URL(e.href,document.documentURI).href:document.documentURI);try{if(null===e.cssRules)throw{name:"SecurityError"}}catch(r){return"SecurityError"===r.name?(this.workaround_stylesheet(e,t),"bug 1393022"):"InvalidAccessError"===r.name?"not ready":(console.error("something really went wrong!",r,e),r)}return Array.prototype.forEach.call(e.cssRules,(e=>{this.process_CSSRule(e,t)})),this.processed_stylesheets.set(e,e.cssRules.length),!0}this.self_stylesheets.add(e)}}process_CSSGroupingRule(e,t){Array.prototype.forEach.call(e.cssRules,(e=>{this.process_CSSRule(e,t)}))}process_CSSRule(e,t){if(!this.stop)switch(e.type){case 1:this.process_CSSStyleRule(e,t);break;case 3:this.process_CSSStyleSheet(e.styleSheet,t);break;case 4:case 12:this.process_CSSGroupingRule(e,t)}}process_CSSStyleRule(e,t){let r=e.selectorText;this.process_CSSStyleDeclaration(e.style,t,r||"",[],"","")}async inline_override_stylesheet_update(){await this.inline_override_lock.acquireAsync();try{let e=this.inline_overrides_style.join("\n");await browser.runtime.sendMessage({action:0,code:e}),this.prev_inline_override_stylesheet&&await browser.runtime.sendMessage({action:1,code:this.prev_inline_override_stylesheet}),this.prev_inline_override_stylesheet=e}finally{this.inline_override_lock.release()}}schedule_inline_override_stylesheet_update(){clearTimeout(this.schedule_inline_override_stylesheet_update_timerID),this.schedule_inline_override_stylesheet_update_timerID=setTimeout((()=>this.inline_override_stylesheet_update()),100)}process_HTMLElement(e){let r=e.getAttribute("style");if(!r||this.overridden_inline_styles.has(r))return;this.auxiliary_element.setAttribute("style",r),this.process_CSSStyleDeclaration(this.auxiliary_element.style,this.window.location.href,t.inline_fake_selector,[...e.classList],e.getAttribute("id"),e.tagName);let o=this.auxiliary_element.getAttribute("style");if(o===r)return void this.overridden_inline_styles.add(r);let l=s(o.replace(n,";"),";").join(" !important; "),a=`[style="${r.replace(i,'\\"')}"] { ${l} }`;this.overridden_inline_styles.add(r),this.inline_overrides_style.push(a),this.schedule_inline_override_stylesheet_update()}}t.StylesheetProcessorAbstract=a}.apply(t,o))||(e.exports=s)},535:(e,t,r)=>{var o,s;o=[r,t,r(969),r(682),r(576)],void 0===(s=function(e,t,r,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.methods=void 0;let i=r.methods;t.methods=i,i[r.STYLESHEET_PROCESSOR_ID].executor=o.StylesheetColorProcessor,i[r.INVERT_ID].executor=s.InvertMethod;for(let e in i)e!==r.STYLESHEET_PROCESSOR_ID&&e!==r.INVERT_ID&&(i[e].executor=null)}.apply(t,o))||(e.exports=s)},969:(e,t,r)=>{var o;void 0===(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.methods=t.INVERT_ID=t.SIMPLE_CSS_ID=t.STYLESHEET_PROCESSOR_ID=t.DISABLED_ID=t.DEFAULT_ID=void 0,t.DEFAULT_ID="-1",t.DISABLED_ID="0",t.STYLESHEET_PROCESSOR_ID="1",t.SIMPLE_CSS_ID="2",t.INVERT_ID="3",t.methods={[t.DEFAULT_ID]:{number:t.DEFAULT_ID,label:"Default",stylesheets:[],affects_iframes:!1},[t.DISABLED_ID]:{number:t.DISABLED_ID,label:"Disabled",stylesheets:[],affects_iframes:!0},[t.STYLESHEET_PROCESSOR_ID]:{number:t.STYLESHEET_PROCESSOR_ID,label:"Stylesheet processor",stylesheets:[{name:"base"},{name:"simple-css"},{name:"stylesheet-processor"}],affects_iframes:!1},[t.SIMPLE_CSS_ID]:{number:t.SIMPLE_CSS_ID,label:"Simple CSS",stylesheets:[{name:"base"},{name:"simple-css"}],affects_iframes:!1},[t.INVERT_ID]:{number:t.INVERT_ID,label:"Invert",stylesheets:[{name:"invert"}],affects_iframes:!0}}}.apply(t,[r,t]))||(e.exports=o)}},t={};!function r(o){if(t[o])return t[o].exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}(773)})();