const SettingsGACategory="New-Settings",rtpSectionIdx=7;class MainComponent extends React.Component{constructor(t){super(t),this.serpsToOmitFromSettings=["Gmail"],this.filterSerpsFromList=this.filterSerpsFromList.bind(this),document.title="WOT - "+translate("settings"),this.state={openShields:!!this.props.getParams.serpid,selectedIdx:0},this.numberOfSections=7,this.pinWotPopupHandler=new PinPopupHandler(this.props.store),!this.props.pinWotPopup.popupWasShown&&this.pinWotPopupHandler.render()}async componentDidMount(){try{const t=this.props.user;this.setState({isPremiumUser:t.isPremiumUser})}catch(t){this.setState({isPremiumUser:!1})}window.addEventListener("scroll",this.scrollHandler.bind(this),{passive:!0})}componentWillUnmount(){window.removeEventListener("scroll",this.scrollHandler.bind(this))}handleSidebarButtonClick(t){this.isScrolling=!0,clearTimeout(this.scrollTimeout),this.props.settings.protection||7!==t?this.refs["section_"+t].scrollIntoView({behavior:"smooth"}):this.refs.section_0.scrollIntoView({behavior:"smooth"}),this.setState({selectedIdx:t}),this.scrollTimeout=setTimeout(()=>{this.isScrolling=!1},700)}onLogoClick(){this.sendGA("WOT Logo"),webextApi.runtime.sendMessage({name:OPEN_TAB_MESSAGE,url:MAIN_PAGE_URL})}scrollHandler(){if(this.isScrolling)return;const t=document.querySelectorAll("[id^='feature_section']");let e=0;t.forEach(t=>{const i=t.offsetTop,o=t.clientHeight;if(window.pageYOffset>=(i-o/4)/1.5){const i=t.getAttribute("id");e=parseInt(i.split(" ").at(-1),10)}}),this.setState({selectedIdx:e})}sendGA(t){GA("New-Settings",t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")}openShields(){this.setState({openShields:!this.state.openShields})}filterSerpsFromList(t){return!this.serpsToOmitFromSettings.includes(t.name)}_turnOffProtectionPreAction(){this.refs.section_0.scrollIntoView({behavior:"smooth"})}_showLeakMonitoringModal(){this.refs.section_3.scrollIntoView({behavior:"smooth"}),this.setState({showModal:!0})}_leakMonitoringModalConfirm(){this.props.store.dispatch(turnOnLeakMonitoring()),this.setState({showModal:!1})}_leakMonitoringModalCancel(){this.setState({showModal:!1})}render(){var t=this.props;const e=t.dispatch,i=t.settings,o=t.whitelist,n=t.phishingWhitelist,a=t.serps,s=t.trackerBlockerData;const r=this.props.store.getState().user.isPremiumUser,l=[],c="safari"===browserName,p=this.state.selectedIdx;this.state.showModal;window.eventSended||(this.sendGA("Open"),window.eventSended=!0);i.shields.all,setShieldsLevel,translate("always"),SHIELDS_LEVEL_HIGH,setShieldsLevel,translate("poorOnly"),SHIELDS_LEVEL_NORMAL,setShieldsLevel,translate("off"),SHIELDS_LEVEL_OFF;a.filter(this.filterSerpsFromList).forEach(t=>{let e=i.shields.all;_.forEach(i.shields,(i,o)=>{new RegExp(t.domain).test(o)&&(e=i)}),l.push({id:t.id,host:t.name,level:e,shieldActions:[{action:setShieldsLevel,title:translate("always"),arguments:SHIELDS_LEVEL_HIGH,params:["New-Settings","Donuts-list","All"]},{action:setShieldsLevel,title:translate("off"),arguments:SHIELDS_LEVEL_OFF,params:["New-Settings","Donuts-list","Off"]}]})});const d=[{id:1,section:{id:0,dataAutomationToggle:"reputation-icons-section-toggle",title:translate("donuts"),subTitle:translate(SHIELDS_LEVEL_HIGH),isPremiumFeature:!1,dispatch:e,protection:!0,actions:[()=>setShieldsLevel(SHIELDS_LEVEL_OFF),()=>setShieldsLevel(SHIELDS_LEVEL_HIGH)],check:i.shields.all===SHIELDS_LEVEL_HIGH,actionGA:"donuts",serpList:l,settings:i}},{id:2,section:{id:1,dataAutomationToggle:"warning-notification-toggle",title:translate("warnings"),subTitle:translate(WARNINGS_LEVEL_HIGH),isPremiumFeature:!1,dispatch:e,protection:i.protection,actions:[()=>setWarningsLevel(WARNINGS_LEVEL_OFF),()=>setWarningsLevel(WARNINGS_LEVEL_HIGH)],check:i.warnings===WARNINGS_LEVEL_HIGH,actionGA:"warnings"}},{id:3,section:{id:2,dataAutomationClick:"assistant-click",dataAutomationToggle:"assistant-toggle",dataAutomationUpgrade:"assistant-upgrade",title:translate("wotAssistant"),subTitle:translate("wotAssistantON"),isPremiumFeature:!0,isPremiumUser:r,dispatch:e,protection:i.protection,actions:[turnOffWotAssistant,turnOnWotAssistant],check:!!i.assistant&&r,actionGA:"Assistant"}},{id:4,section:{id:3,dataAutomationClick:"adult-protection-click",dataAutomationToggle:"adult-protection-toggle",dataAutomationUpgrade:"adult-protection-upgrade",title:translate("adultProtection"),subTitle:translate("adultProtectionText"),isPremiumFeature:!0,isPremiumUser:r,dispatch:e,protection:i.protection,actions:[turnOffAllAdultsControls,turnOnAllAdultsControls],check:(!!i.parental||!!i.gambling||!!i.parentalExtraIcon)&&r,actionGA:"Adult Protection",subFeatures:[{title:translate("adultContent"),subTitle:translate("parentalControlON"),actions:[turnOffParentalControl,turnOnParentalControl],check:!!i.parental&&r,actionGA:"adult content"},{title:translate("gamblingSites"),subTitle:translate("gamblingSitesText"),actions:[turnOffGamblingControl,turnOnGamblingControl],check:!!i.gambling&&r,actionGA:"Gambling Sites"},{title:translate("18Icon"),subTitle:translate("18IconON"),actions:[turnOffParentalControlExtraIcon,turnOnParentalControlExtraIcon],check:!!i.parentalExtraIcon&&r,actionGA:"18+ icon"}]}},{id:5,section:{id:4,dataAutomationClick:"leak-monitoring-click",dataAutomationToggle:"leak-monitoring-toggle",dataAutomationUpgrade:"leak-monitoring-upgrade",title:translate("dataLeakMonitoring"),subTitle:translate("leakMonitoringDescription"),isPremiumFeature:!0,isPremiumUser:r,dispatch:e,protection:i.protection,actions:[turnOffLeakMonitoring,void 0],preActions:[void 0,this._showLeakMonitoringModal.bind(this)],check:!!i.leakMonitoring&&r,actionGA:"Leak Monitoring",shortcut:{btnText:"goToLeakReport",action:()=>goToTab(BREACHES_URL)},modal:{showModal:this.state.showModal,handleConfirm:this._leakMonitoringModalConfirm.bind(this),handleCancel:this._leakMonitoringModalCancel.bind(this),modalText:"leakMonitoringDisclaimer"}}},{id:6,section:{id:5,dataAutomationWlInput:"email-protection-wl-input",dataAutomationWlAddBtn:"email-protection-wl-add",dataAutomationWlRemoveBtn:"email-protection-wl-remove",dataAutomationWlItem:"email-protection-wl-item",dataAutomationClick:"email-protection-click",dataAutomationToggle:"email-protection-toggle",dataAutomationUpgrade:"email-protection-upgrade",title:translate("gmailProtectionTitle"),subTitle:translate("gmailProtectionDescription"),isPremiumFeature:!0,isPremiumUser:r,dispatch:e,protection:i.protection,actions:[turnOffPhishing,turnOnPhishing],check:!!i.phishing&&r,actionGA:"Gmail-Protection",subFeatures:[{title:translate("gmailProtectionSubTitle"),subTitle:translate("gmailProtectionSubDescription"),actions:[turnOffPhishing,turnOnPhishing],check:!!i.phishing&&r,actionGA:"Gmail-Protection"}],settings:i,whitelist:n,isPhishingWL:!0}},{id:7,section:{id:6,dataAutomationClick:"popup-blocker-click",dataAutomationToggle:"popup-blocker-toggle",dataAutomationUpgrade:"popup-blocker-upgrade",title:translate("PopupBlockerShield"),subTitle:translate("PopupBlockerText"),isPremiumFeature:!0,isPremiumUser:r,dispatch:e,protection:i.protection,actions:[turnOffAllPopupControls,turnOnAllPopupControls],check:(!!i.blockPopUp||!!i.blockPopUpNotification)&&r,actionGA:"Popup controls",subFeatures:[{title:translate("BlocksPopup"),subTitle:translate("BlocksPopupText"),actions:[turnOffPopupBlock,turnOnPopupBlock],check:!!i.blockPopUp&&r,actionGA:"blocks popup"},{title:translate("PopupNotification"),subTitle:translate("PopupNotificationText"),actions:[turnOffPopupBlockNotification,turnOnPopupBlockNotification],check:!!i.blockPopUpNotification&&r,actionGA:"popup notification"}]}},{id:8,section:{id:7,dataAutomationClick:"anti-tracker-click",dataAutomationToggle:"anti-tracker-toggle",dataAutomationUpgrade:"anti-tracker-upgrade",title:translate("trackerBlocker"),subTitle:translate("trackerBlockerDescription"),isPremiumFeature:!0,isPremiumUser:r,dispatch:e,protection:i.protection,actions:[()=>toggleBlockAllTrackers(!1),()=>toggleBlockAllTrackers(!0)],check:!!s.allBlocked&&r,actionGA:"trackerBlocker"},notForSafari:!0},{id:9,section:{id:8,dataAutomationWlInput:"rt-protection-wl-input",dataAutomationWlAddBtn:"rt-protection-wl-add",dataAutomationWlRemoveBtn:"rt-protection-wl-remove",dataAutomationWlItem:"rt-protection-wl-item",dataAutomationToggle:"rt-protection-toggle",title:translate(i.protection?"rtProtection":"rtProtectionRecommended"),subTitle:translate(i.protection?"rtON":"rtOFF"),dispatch:e,protection:i.protection,actions:[turnOffProtection,turnOnProtection],preActions:[this._turnOffProtectionPreAction.bind(this),void 0],check:!!i.protection,actionGA:"RTP",whitelist:o,settings:i,policy:i.protection,isRTProtectionSection:!i.protection}}];return React.createElement("div",{className:"settings"},React.createElement("div",{className:"settings__body"},React.createElement(Sidebar,{selectedIdx:p,onClick:this.handleSidebarButtonClick.bind(this)}),React.createElement("div",{className:"settings__container",ref:"section_0"},d.map(t=>!(t.notForSafari&&c)&&[React.createElement(FeatureSection,t.section),t.id!==d.length&&React.createElement("hr",{className:"sections__divider",ref:"section_"+t.id})])),React.createElement("div",{className:"options__ads"},React.createElement(ConversionBanner,{isPremiumUser:r}),React.createElement(ContactUs,null))))}}function mapStateToPros(t){const e={};return window.location.search.substr(1).split("&").forEach(t=>{e[t.split("=")[0]]=t.split("=")[1]}),_.merge({},t,{getParams:e})}MainComponent.propTypes={},MainComponent=ReactRedux.connect(mapStateToPros)(MainComponent);