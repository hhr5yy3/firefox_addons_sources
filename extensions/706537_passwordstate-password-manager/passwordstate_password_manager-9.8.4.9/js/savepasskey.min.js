function on_show_hide(elem1,elem2){null!=document.getElementById(elem1)&&(document.getElementById(elem1).style.display="none"),null!=document.getElementById(elem2)&&(document.getElementById(elem2).style.display="block")}function set_list_for_select(list){if(list.length)for(var select=document.querySelector("#passwordRecord"),i=0;i<list.length;i++){var option=document.createElement("option");if(option.setAttribute("value",list[i].PasswordID),option.setAttribute("hasPasskey",list[i].HasPasskey),option.setAttribute("treePath",list[i].TreePath),option.appendChild(document.createTextNode(list[i].Title+"  ("+list[i].UserName+")")),1==list.length&&0==i){option.setAttribute("selected",!0);var treePath=document.querySelector("#passwordTreePath");null!=treePath&&(treePath.innerHTML=list[i].TreePath)}null!=select&&select.appendChild(option)}}function searchWebsites(e){var txtSearch_savepopup=document.querySelector("#txtSearch_savepopup"),select=document.querySelector("#passwordRecord");select.innerHTML="";var optionZero=document.createElement("option"),treePath;optionZero.setAttribute("value",0),optionZero.appendChild(document.createTextNode("-- No Results --")),null!=select&&select.appendChild(optionZero),document.querySelector("#passwordTreePath").innerHTML="None",null==e||""==e?(txtSearch_savepopup.value="",on_show_hide("imgErase","imgSearch")):browser.runtime.sendMessage({name:"get_websites_onsearch",search_text:e.toString(),HasPasskey:!1},(function(response){if(on_show_hide("imgSearch","imgErase"),null!=response){if(response.response.length>0){select.innerHTML="";var optionZero=document.createElement("option");optionZero.setAttribute("value",0),optionZero.appendChild(document.createTextNode("-- Please Select --")),null!=select&&select.appendChild(optionZero)}set_list_for_select(response.response)}}))}document.addEventListener("DOMContentLoaded",(function(){var txtSearch_savepopup=document.querySelector("#txtSearch_savepopup"),btnClearSearch=document.querySelector("#imgErase"),select=document.querySelector("#passwordRecord"),treePath=document.querySelector("#passwordTreePath"),closeButton=document.querySelector("#close_savepopup"),saveButton=document.querySelector("#update_savepopup");let queryString=window.location.search,urlParams=new URLSearchParams(queryString);const fallbackSupported=urlParams.get("fallbackSupported"),requestID=urlParams.get("id");saveButton.addEventListener("click",(function(event){if(null!=select){let passwordID=select[select.selectedIndex].getAttribute("value");passwordID>0&&browser.runtime.sendMessage({name:"confirmNewCredentialResponse",requestID:requestID,passwordID:passwordID})}})),closeButton.addEventListener("click",(function(event){browser.runtime.sendMessage({name:"webauthn_abort_request",requestID:requestID,fallbackSupported:fallbackSupported})})),select.addEventListener("change",(function(event){treePath.innerHTML="";let treePathValue=event.target[event.target.selectedIndex].getAttribute("treePath");null!=treePathValue&&null!=treePathValue&&(treePath.innerHTML=treePathValue)})),btnClearSearch.addEventListener("click",(function(){searchWebsites("")}),!1);var timeout=null;browser.runtime.sendMessage({name:"get_tab_hostname"},(function(response){null!=response.response&&""!=response.response&&(txtSearch_savepopup.value=response.response,searchWebsites(response.response)),txtSearch_savepopup.onkeyup=function(e){clearTimeout(timeout),timeout=setTimeout((function(){searchWebsites(txtSearch_savepopup.value)}),500)}}))})),window.onload=function(){document.getElementById("imgErase").style.display="none",document.getElementById("txtSearch_savepopup").focus()};