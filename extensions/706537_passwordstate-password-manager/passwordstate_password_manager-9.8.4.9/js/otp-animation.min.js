var animations=[],timers=[],radius=90,pID=0;function startOtpAnimations(id,remainingSeconds=0){pID=id;var canvasElements=document.getElementsByClassName("OtpAnimation");animations=[];for(var z=0;z<canvasElements.length;z++){var canvas=canvasElements[z],rowArgs=canvas.getAttribute("commandargument");if(""!=rowArgs&&null!=rowArgs){canvas.width=25,canvas.height=25;try{for(var context=canvas.getContext("2d"),otpSplit=rowArgs.split("~"),secs=otpSplit[0],timePeriod=otpSplit[1],timerIndex=-1,k=0;k<timers.length;k++){var potentialTimer=timers[k];if(potentialTimer.initialStartingSeconds===secs&&potentialTimer.timePeriodSeconds===timePeriod){timerIndex=k;break}}timerIndex<0&&(remainingSeconds>0&&(secs=timePeriod-remainingSeconds-1),timers.push(new Timer(timePeriod,secs)),timerIndex=timers.length-1),timerIndex>=0&&animations.push(new OtpAnimation(12.5,12.5,12.5,5,context,canvas,timePeriod,timerIndex))}catch(ex){canvas.style.visibility="hidden"}}else canvas.style.visibility="hidden"}animate()}function OtpAnimation(radius,y,x,styleDessin,context,canvas,timePeriod,timerIndex){this.radius=radius,this.x=x,this.y=y,this.color="#25a0da",this.lineWidth=0,this.styleDessin=styleDessin,this.context=context,this.canvas=canvas,this.timePeriod=timePeriod,this.timerIndex=timerIndex,this.render=function(){var unit=timers[timerIndex].interval,div=this.timePeriod/2,text=Math.abs(this.timePeriod-unit);this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.beginPath(),this.context.globalCompositeOperation="source-over",this.context.font=this.radius+"px Arial",this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillStyle="#333333",this.context.fillText(Math.floor(text),this.x,this.y),this.context.globalCompositeOperation="destination-over",this.context.lineWidth=this.lineWidth,this.context.fill(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.styleDessin<=3?(this.context.arc(this.x,this.y,this.radius,1.5*Math.PI,Math.PI*(unit/div)+1.5*Math.PI,!0),this.context.lineTo(this.x,this.y),this.context.fill()):this.styleDessin>3&&this.styleDessin<=7?(this.context.arc(this.x,this.y,this.radius,1.5*Math.PI,Math.PI*(unit/div)+1.5*Math.PI,!1),this.context.lineTo(this.x,this.y),this.context.fill()):this.styleDessin>7&&this.styleDessin<=11?(this.context.arc(this.x,this.y,this.radius/8,1.5*Math.PI,-.5*Math.PI,!1),this.context.fill(),this.context.moveTo(this.x,this.y-radius),this.context.arc(this.x,this.y,this.radius,1.5*Math.PI,-.5*Math.PI,!1),this.context.arc(this.x,this.y,this.radius,1.5*Math.PI,Math.PI*(unit/div)+1.5*Math.PI,!0),this.context.lineTo(this.x,this.y),this.context.stroke()):this.styleDessin>11&&this.styleDessin<=15&&(this.context.arc(this.x,this.y,this.radius,Math.PI*(unit/div),Math.PI*(unit/div)+1.5*Math.PI,!0),this.context.stroke()),this.context.closePath()}}function animate(){for(var f=0;f<animations.length;f++)animations[f].render();requestAnimFrame(animate)}function Timer(timePeriodSeconds,startingSeconds){var initialStartingSeconds=startingSeconds,interval=startingSeconds,start=Date.now()-1e3*startingSeconds,delay=100;setInterval((function(){(interval=Math.floor((Date.now()-start)/1e3))>=timePeriodSeconds&&(interval-=Math.floor(interval/timePeriodSeconds)*timePeriodSeconds),interval==parseInt(timePeriodSeconds-1)&&browser.runtime.sendMessage({name:"on_show_site_passwordstate_and_open_edit",pid:pID},(function(response){null!=response&&(document.querySelector("#txtOTPPasswordMatchingLogins").value=response.response.Code)}))}),100),this.__defineGetter__("delay",(function(){return 100})),this.__defineGetter__("interval",(function(){return interval})),this.__defineGetter__("initialStartingSeconds",(function(){return initialStartingSeconds})),this.__defineGetter__("timePeriodSeconds",(function(){return timePeriodSeconds}))}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)};