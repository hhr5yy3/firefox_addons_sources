import"./chunk-1ebdbb1b.js";import{R as b}from"./chunk-4da8f9f7.js";import{a as S,l as p,h as f,i as x,j as I,k as y}from"./chunk-70aa1672.js";/* empty css              */document.addEventListener("DOMContentLoaded",()=>{const v=document.getElementById("integrations"),t={};function g(e){const n=b().toString();t[n]={id:e.id,name:e.name,state:e.state};const a=document.createElement("div");a.id=e.id||"placeholder";const c=()=>console.debug(p,"updated integration",n,t[n]),o=document.createElement("select");o.addEventListener("change",r=>{const i=r.target;t[n].state=parseInt(i.value),c()});const s=document.createElement("option");s.value=f.toString(),s.innerText="disabled",o.appendChild(s);const d=document.createElement("option");d.value=x.toString(),d.innerText="receive only",o.appendChild(d);const l=document.createElement("option");l.value=I.toString(),l.innerText="send only",o.appendChild(l);const E=document.createElement("option");E.value=y.toString(),E.innerText="send and receive",o.appendChild(E),o.value=e.state.toString(),a.appendChild(o);const u=document.createElement("input");u.value=e.id,u.placeholder="external extension id",u.autocomplete="off",u.addEventListener("input",r=>{const i=r.target;t[n].id=i.value,a.id=i.value,c()}),a.appendChild(u);const m=document.createElement("input");m.value=e.name,m.placeholder="extension name",m.autocomplete="off",m.addEventListener("input",r=>{const i=r.target;t[n].name=i.value,c()}),a.appendChild(m);const h=document.createElement("button");h.innerText="Remove",h.addEventListener("click",r=>{const i=t[n];delete t[n],v.removeChild(a),console.debug(p,"deleted integration",n,i,t)}),a.appendChild(h),v.appendChild(a)}v.innerText="",S.storage.local.get({integrations:{}}).then(e=>e.integrations).then(e=>{console.debug(p,"loaded integrations:",e);const n=document.getElementById("add-button"),a=document.getElementById("save-button"),c=document.getElementById("save-status");n.addEventListener("click",s=>g({id:"",name:"",state:f}));let o=null;a.addEventListener("click",s=>{console.debug(p,"saving integrations:",t),o!==null&&clearTimeout(o);const d={};for(const l of Object.values(t))d[l.id]={name:l.name,state:l.state};S.storage.local.set({integrations:d}).then(()=>{console.debug(p,"saved integrations:",d),c.innerText="saved!",o=setTimeout(()=>c.innerText="",1e3)})});for(const[s,d]of Object.entries(e))g({id:s,name:d.name,state:d.state});Object.entries(t).length===0&&g({id:"",name:"",state:f})})});
