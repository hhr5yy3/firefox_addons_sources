(()=>{const l=[e("displayAllButton"),e("tags"),e("userFolder"),e("position"),e("coverSize")];function e(e){return document.getElementById(e)}function t(){const t=e("folder").style;const o=e("folderName");browser.storage.local.get(["all","tags","folder","path","position","cover"],e=>{e.all==true?l[0].checked=true:l[0].checked=false;e.tags==true?l[1].checked=true:l[1].checked=false;e.position==true?l[3].checked=true:l[3].checked=false;l[4].value=e.cover;if(e.folder==true){o.value=e.path;l[2].checked=true;t.visibility="visible";o.oninput=()=>{browser.storage.local.set({path:o.value.replace(/[^a-z,0-9,A-Z,а-я,А-Я,-,_]/gi,"")})}}else{l[2].checked=false;t.visibility="hidden";t.height=0}})}function o(e){e.addEventListener("change",()=>{if(e==l[0]){browser.storage.local.set({all:l[0].checked})}if(e==l[1]){browser.storage.local.set({tags:l[1].checked})}if(e==l[2]){browser.storage.local.set({folder:l[2].checked});t()}if(e==l[3]){browser.storage.local.set({position:l[3].checked});t()}if(e==l[4]){browser.storage.local.set({cover:l[4].value})}})}browser.storage.local.get("path",e=>{(!e.path||e.path.length==0)&&browser.storage.local.set({folder:false,path:""});t();for(let e in l){o(l[e])}})})();