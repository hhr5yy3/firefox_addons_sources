var _idaptivePopOverGlobal;!function(){var O=this,s=(void 0===O.common&&(O.common={}),void 0===O.constants&&(O.constants={}),void 0===O.utils&&(O.utils={}),void 0===O.components&&(O.components={}),"?tab=genpass"===window.location.search),o=(O.common.objectExtend=function(e,t){if(!e||!t)throw"child or parent is not defined";for(var s in t.prototype)e.prototype[s]||(e.prototype[s]=t.prototype[s])},O.constants.contents={WELCOME:"welcome",APPS:"apps",SECURED_ITEMS:"securedItems",SETTINGS:"settings",USERS:"users",HELP:"help",ERROR:"error",GENPASS:"genpass"},O.constants.connection={OFFLINE:"offline",OFFLINE_SIGNIN:"offlineSignin",SIGNIN:"signin",SIGNOUT:"signout"},O.constants.regularExp={HOSTNAME:/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/,VERSION:/^([1-9]+[0-9]*)\.([0-9]+)\.([0-9]+)(\.[0-9]+)*$/},O.constants.UPMessges={USERNAME_UNAVAILABLE:"Username is unavailable",USERNAME_COPIED:"Username copied",PASSWORD_UNAVAILABLE:"Password is unavailable",TOTP_UNAVAILABLE:"Verification code is unavailable",PASSWORD_COPIED:"Password copied",SECUREDNOTE_COPIED:"Secured note copied",SECUREDNOTE_UNAVAILABLE:"Secured note is unavailable",TOTP_COPIED:"Verification code copied",MFA_MESSAGE:"Open the User Portal to view the Password for this MFA-enabled application",USERNAME_RESTRICTED:"Unable to copy - Restricted username by administrator"},O.constants.contents),p=O.constants.connection,c=O.constants.regularExp,r=O.constants.UPMessges;O.utils.BackgroundBase=function(e){this.bgp=e},O.utils.BackgroundBase.prototype={getBackgroundPage:function(){}},O.utils.MiscFuncBase=function(e){this.bgp=e},O.utils.MiscFuncBase.prototype={getCbeVersion:function(){},isDisableBrowserPasswordPromptsVisible:function(){return!1},getBgProperties:function(){var L=this;return(async()=>{var e=(n=await O.storage.get(O.constants.names.APPS_UPDATER))?.appkeyToAppMap,t=n?.appsUpdateFlag,s=n?.appsRefreshAllFlag,r=n?.appTags,a=n?.appDefTag,n=n?.status,i=[];e&&(i=Object.values(e));var o=(e=await O.storage.get(O.constants.names.SECURED_ITEMS_UPDATER)||{})?.securedItemkeyToSecuredItemMap,p=e?.securedItemTags,c=e?.securedItemsDefTag,e=e?.status,l=[],o=(o&&(l=Object.values(o)),await O.storage.get(O.preference.perfKeyEnum.portalHostname)),h=await O.storage.get(O.preference.perfKeyEnum.openAppInNewTab),d=await O.storage.get(O.preference.perfKeyEnum.enableLCLocal),m=await O.storage.get(O.preference.perfKeyEnum.disableBrowserPasswordPrompts),u=await O.storage.get(O.preference.perfKeyEnum.debugMode),g=await O.storage.get(O.preference.perfKeyEnum.associatedChildPod),C=await O.storage.get(O.constants.names.CENTRIFY_SERVICE+"_status"),E=await O.storage.get(O.constants.names.CENTRIFY_CONNECTION+"_status"),P=await O.storage.get(O.preference.perfKeyEnum.genpassConfig),S=await O.storage.get(O.constants.names.USER_SETTINGS),b=S?S.entitlement:"APPS",y=!!S&&S.hasSwsEntitlement,f=!S||S.isCopyCredsFromIBEEnabled,w=!S||S.enableCompromisedPasswordCheckForIBE,T=!!S&&S.isCompromisedPwdLaunchDisabled,v=!S||S.isCopyPasswordAllowed,A=!S||S.isSecuredItemsEnabled,N=!!S&&S.hasWpmEntitlement,I=!S||S.isAppApearsTwiceBugFixEnabled,k=!S||S.isPassphraseGenerationEnable,B=!(!S||null===S.allowPasphraseGeneration)&&S.allowPasphraseGeneration,M=S&&null!==S.minimumNumberOfPassphraseWords?S.minimumNumberOfPassphraseWords:4,x=S&&null!==S.minimumNumberOfPassphraseCharacters?S.minimumNumberOfPassphraseCharacters:14,F=S&&null!==S.excludedPassphraseCharactersOrWords?S.excludedPassphraseCharactersOrWords:"",U=!0===(L.userSetting=S)?.enabledIBEVersionUpdate;return{apps:i,appUpdateFlag:t,appRefreshFlag:s,appTags:r,appDefTag:a,securedItems:l,securedItemsTags:p,securedItemsDefTag:c,portalHost:o,childHost:g,serviceStatus:C,appDataStatus:n,securedItemDataStatus:e,connectionStatus:E,cbeVersion:L.getCbeVersion(),userSetting:S,entitlement:b,openAppInNewTab:h,enableLCLocal:d,disableBrowserPasswordPrompts:m,debugMode:u,hasSwsEntitlement:y,isCopyPasswordAllowed:v,isCopyCredsFromIBEEnabled:f,enableCompromisedPasswordCheckForIBE:w,isCompromisedPwdLaunchDisabled:T,genpassConfig:P,isSecuredItemsEnabled:A,hasWpmEntitlement:N,isAppApearsTwiceBugFixEnabled:I,isPassphraseGenerationEnable:k,allowPasphraseGeneration:B,minimumNumberOfPassphraseWords:M,minimumNumberOfPassphraseCharacters:x,excludedPassphraseCharactersOrWords:F,enabledIBEVersionUpdate:U}})()},givesRefreshOption:function(e){return!(!e||!e.isFormFillEnabled)},givesCaptureOption:function(e){return!(!e||!e.canCreateAppInAP&&!e.canCreateAppInUP||"APPS"!=e.entitlement&&"LEGACY"!=e.entitlement)},isAuthenticated:function(e){return e===O.net.SERVICE_STATUS_ENUM.ready},isAppReady:function(e){return e===O.formfill.APPS_UPDATER_STATUS_ENUM.Ready},isConnectionGood:function(e){return e!=O.net.CONNECTION_STATUS_ENUM.offLine},isSignedIn:function(e){return e&&e.connectionStatus===O.net.CONNECTION_STATUS_ENUM.signedIn},updateMenus:function(e,t){return Array.isArray(t)&&0!==t.length&&(this.givesCaptureOption(e.userSetting)||(t=t.filter(function(e){return"menuCapture"!=e.id})),e.connection!==p.OFFLINE&&e.connection!==p.OFFLINE_SIGNIN||(t=t.map(function(e){return e.disable=!0,e}))),t},updatePopoverState:function(e){return e&&null==e.openAppInNewTab&&(e.openAppInNewTab=!0),e&&null==e.disableBrowserPasswordPrompts&&(e.disableBrowserPasswordPrompts=!1),e&&"APPS"==e.entitlement||"LEGACY"==e.entitlement?e.connectionStatus===O.net.CONNECTION_STATUS_ENUM.signedIn?(e.contentType=e.contentType||o.APPS,e.connection=p.SIGNIN):e.connectionStatus===O.net.CONNECTION_STATUS_ENUM.notSignedIn||e.connectionStatus===O.net.CONNECTION_STATUS_ENUM.onLine?(e.contentType=o.WELCOME,e.connection=p.SIGNOUT):e.connectionStatus===O.net.CONNECTION_STATUS_ENUM.offLine&&(e.userSetting?(e.contentType=e.contentType||o.APPS,e.connection=p.OFFLINE_SIGNIN):(e.contentType=o.ERROR,e.connection=p.OFFLINE)):e.connectionStatus===O.net.CONNECTION_STATUS_ENUM.signedIn?(e.contentType=o.WELCOME,e.connection=p.SIGNIN):e.connectionStatus===O.net.CONNECTION_STATUS_ENUM.notSignedIn||e.connectionStatus===O.net.CONNECTION_STATUS_ENUM.onLine?(e.contentType=o.WELCOME,e.connection=p.SIGNOUT):e.connectionStatus===O.net.CONNECTION_STATUS_ENUM.offLine&&(e.userSetting?(e.contentType=o.WELCOME,e.connection=p.OFFLINE_SIGNIN):(e.contentType=o.ERROR,e.connection=p.OFFLINE)),e},strSplitter(e,t){for(var s=[];e.length>t;){var r=e.substring(0,t).lastIndexOf(" "),a=(s.push(e.substring(0,r=r<=0?t:r)),e.indexOf(" ",r)+1);(a<r||r+t<a)&&(a=r),e=e.substring(a)}return s.push(e),s},clampTextToTwoLines(e,t){e=this.strSplitter(e,t),t=e.length;return"\r\n\r\n"+e.slice(0,2).join("\r\n")+(2<t?"...":"")},copyToClipboard(e,t){return navigator?.clipboard?.writeText?.(e)},setClearClipboardTimer(){var e;this.userSetting.isClearClipboardEnabled&&(e=this.userSetting.durationForClearingClipboardPassword,O.utils.appClick.setClearClipboardTimer(e))}},O.utils.AppClickBase=function(e){this.bgp=e},O.utils.AppClickBase.prototype={saveDiagLog:function(e,t){},clearSkippedSites:function(e,t){O.utils.appClick.clearAllSkippedSites()},captureInfinite:function(e,t){},signIn:function(){},signOut:function(){},openApp:function(e,t){},menuClick:function(e){},updateVersion:function(e){},setPreference:function(e,t){},appsRefresh:function(){},reRenderPopoverApp:function(){},requestPermission:function(e,t){},removePermission:function(e,t){}},O.components.SideButton=class extends preact.Component{constructor(e,t){super(e,t),this.handleClick=this.handleClick.bind(this)}handleClick(){this.props.clickSideButton(this.props.name)}render(){var e=this.props.contentType===this.props.name?"rightSideBtn rightSideBtnChosen":"rightSideBtn",t=this.props.contentType===this.props.name?this.props.imageClass+" icon-hover-class":this.props.imageClass;this.props.height;return preact.createElement("div",{title:this.props.toolTip,className:e,onClick:this.handleClick,style:{textAlign:"center"}},preact.createElement("div",{className:t}))}},O.components.SideButtonExt=O.components.SideButton,O.components.RightBar=class extends preact.Component{constructor(e,t){super(e,t),this.clickSideButton=this.clickSideButton.bind(this)}clickSideButton(e){this.props.clickSideButton(e)}render(){var e=preact.createElement(O.components.SideButtonExt,{contentType:this.props.contentType,name:o.SETTINGS,imageClass:"upper-images-class settings-icon-class",toolTip:"Settings",clickSideButton:this.clickSideButton}),t=preact.createElement(O.components.SideButtonExt,{contentType:this.props.contentType,name:o.APPS,imageClass:"upper-images-class apps-icon-class",toolTip:"Apps",height:"42px",clickSideButton:this.clickSideButton}),s=preact.createElement(O.components.SideButtonExt,{contentType:this.props.contentType,name:o.SECURED_ITEMS,imageClass:"upper-images-class secured-items-icon-class",toolTip:"Secured Items",height:"42px",clickSideButton:this.clickSideButton}),r=preact.createElement(O.components.SideButtonExt,{contentType:this.props.contentType,name:o.USERS,imageClass:"upper-images-class user-icon-class",toolTip:"User Portal",height:"42px",clickSideButton:this.clickSideButton}),a=preact.createElement("div",{className:"logo-container"},preact.createElement("img",{className:"logo-hex-image"})),n=preact.createElement(O.components.SideButtonExt,{contentType:this.props.contentType,name:o.GENPASS,imageClass:"upper-images-class genpass-icon-class",toolTip:"Password Generator",height:"42px",clickSideButton:this.clickSideButton}),i=[];return"APPS"==this.props.entitlement||"LEGACY"==this.props.entitlement?this.props.connection==p.SIGNOUT||this.props.connection==p.OFFLINE?i.push(a,e):(i.push(a,t),this.props.isSecuredItemsEnabled&&i.push(s),i.push(e,r,this.props.hasWpmEntitlement?n:{})):i.push(e),preact.createElement("div",{className:"rightBar"},preact.createElement("div",{className:"rightBarTop"},i),preact.createElement("div",{className:"rightBarBottom"},preact.createElement(O.components.SideButtonExt,{contentType:this.props.contentType,name:o.HELP,imageClass:"lower-image-class help-icon-class",toolTip:"Help",height:"30px",clickSideButton:this.clickSideButton})))}},O.components.RightBarExt=O.components.RightBar,O.components.BottomBar=class extends preact.Component{constructor(e,t){super(e,t),this.onBottomBarLabelClick=this.onBottomBarLabelClick.bind(this),this.versionCompare=this.versionCompare.bind(this),this.updateVersionClick=this.updateVersionClick.bind(this)}onBottomBarLabelClick(){var e=this.props.portalHost;this.props.connection==p.SIGNIN?O.utils.appClick.signOut(this.props.childHost,this.props.shellLogoutURL):O.utils.appClick.signIn(e)}updateVersionClick(){var e=this.props.cbePrescribeUrl;O.utils.appClick.updateVersion(e)}versionCompare(e,t){if(!e||!t)return 9;if(!c.VERSION.test(e)||!c.VERSION.test(t))return 8;var s=e.split("."),r=t.split(".");if(this.props.enabledIBEVersionUpdate&&s?.length!==r?.length)return 7;for(var a=0;a<r.length;a++){var n=s[a],i=r[a],n=n.localeCompare(i,void 0,{numeric:!0});if(0!=n)return n}return 0}render(){var e=this.props.connection==p.SIGNIN||this.props.connection==p.OFFLINE_SIGNIN?O.ui.menuItemLabel.signOut:O.ui.menuItemLabel.signIn,t=this.versionCompare(this.props.cbeVersion,this.props.cbePrescribeVersion);return preact.createElement("div",{className:"bottomBar "+(-1<t?"bottomBarNoUpdate":"bottomBarUpdate")},preact.createElement("span",{className:"versionSpan "+(-1<t?"versionSpanNoUpdate":"versionSpanUpdate")},"Ver: "+this.props.cbeVersion),preact.createElement("span",{className:"updateSpan "+(-1<t?"updateSpanHide":"updateSpanShow"),onClick:this.updateVersionClick},"Update Available"),preact.createElement("button",{className:"bottomBarLink "+(-1<t?"bottomBarNoUpdate":"bottomBarUpdate"),onClick:this.onBottomBarLabelClick,disabled:this.props.connection==p.OFFLINE||this.props.connection==p.OFFLINE_SIGNIN},e))}},O.components.BottomBarExt=O.components.BottomBar,O.components.SearchBar=class extends preact.Component{constructor(e,t){super(e,t),this.onSearchChange=this.onSearchChange.bind(this),this.timeout=null}onSearchChange(e){var t=e.target.value,s=(clearTimeout(this.timeout),this);this.timeout=setTimeout(function(){s.props.onSearchClick(t)},200)}render(){return preact.createElement("div",{className:"searchBarWrapper"},preact.createElement("button",{type:"submit",className:"searchBarBtn"},preact.createElement("img",{src:"../popover/images/search.svg"})),preact.createElement("input",{id:"searchBar",className:"searchBar",value:this.props.searchWords,onInput:this.onSearchChange,autoFocus:!0}))}},O.components.SearchBarExt=O.components.SearchBar,O.components.AppCard=class extends preact.Component{constructor(e,t){super(e,t),this.trueIcon=e.icon,!this.trueIcon||-1==this.trueIcon.toLowerCase().indexOf("/vfslow/lib/application/icons")&&-1==this.trueIcon.toLowerCase().indexOf("/vfs/lib/application/icons")&&-1==this.trueIcon.toLowerCase().indexOf("/vfs/application/icons")&&-1==this.trueIcon.toLowerCase().indexOf("/vfslow/lib/uibuild")||(this.trueIcon="https://"+e.childPodHost+e.icon),this.appCardClickInternal=this.appCardClickInternal.bind(this),this.appCardGearClick=this.appCardGearClick.bind(this),this.prepareTooltip=this.prepareTooltip.bind(this),this.showMenu=this.showMenu.bind(this),this.appNameLen=28,this.userNameLen=14}appCardClickInternal(){var e=this.props.appkey,t=this.props.isNewApp;this.props.appCardClick(e,t)}appCardGearClick(e){e.stopPropagation()}showMenu(e){e.stopPropagation();e=e.target.getClientRects()[0].top;this.props.copyUPMenu(e,this.props.appkey)}prepareTooltip(){var e=this.props.displayName,t=O.utils.miscFunc.userSetting.enableEnhancedTooltip,s="",r=()=>this.props.description?O.utils.miscFunc.clampTextToTwoLines(this.props.description,45):"",a=()=>{if("Web"==this.props.appType)return t?"UsernamePassword"==this.props.webAppType?this.props.username?"\r\n\r\nSign in as "+this.props.username:"":"Saml"==this.props.webAppType?"\r\n\r\nSingle sign-on":"\r\n\r\n"+this.props.webAppType:"UsernamePassword"==this.props.webAppType?this.props.isShared||!this.props.username?"\r\n\r\nLogin as ...":this.props.username?"\r\n\r\nLogin as "+this.props.username:void 0:"Saml"==this.props.webAppType?"\r\n\r\nSingle Sign on":"\r\n\r\n"+this.props.webAppType};return t?e+=a()+(()=>"UsernamePassword"===this.props.webAppType&&this.props.url?O.utils.miscFunc.clampTextToTwoLines(this.props.url,45):"")()+(s=r()):(s=r(),e+=a()+s),e}render(){e=0==this.props.appkey.indexOf("@!")?(e=this.props.name.length>this.userNameLen?this.props.name.substring(0,this.userNameLen)+"...":this.props.name,preact.createElement("span",{style:{color:"#B7B7B7",fontSize:"10px",padding:"0px 0px 0px 4px",verticalAlign:"middle"}},e)):null;var e,t=this.prepareTooltip(),s=this.props.isShared?preact.createElement("span",{className:"shared-icon-class",src:"../popover/images/shared-credentials.svg",title:"This app is using a shared account for all users"}):null,r=null,a=(this.props.isNewApp&&(r=preact.createElement("img",{className:"new-icon",src:"../popover/images/new-icon.png",title:"New"})),null),n=(this.props.hasSwsEntitlement&&this.props.isSwsEnabled&&(a=preact.createElement("img",{className:"sws-icon",src:"../popover/images/sws-icon.png",title:"This app is Secure Web Sessions enabled"})),null),i=("UsernamePassword"!==this.props.webAppType||this.props.isShared||this.props.username&&this.props.passwordIsSet||(n=preact.createElement("span",{className:"lock-icon-class",src:"../popover/images/no-secrets.svg",title:"No Secrets"})),null),n=(this.props.enableCompromisedPasswordCheckForIBE&&this.props.IsPwdCompromised&&(i=preact.createElement("span",{className:"compromised-passwords-icon-class ",src:"../popover/images/error-icon.svg",title:"Password is at risk. Change your password."})),n||s),s=null,o=("UsernamePassword"===this.props.webAppType&&this.props.isCopyCredsFromIBEEnabled&&(s=preact.createElement("div",{className:"creds-copy-menu-icon",onClick:this.showMenu,src:"../popover/images/icon_more_vert.svg"})),-1!==navigator.userAgent.toLowerCase().indexOf("chrome")?"app-card-default-width":"app-card-default-width app-card-smaller-width"),p=this.props.enableCompromisedPasswordCheckForIBE&&this.props.IsPwdCompromised&&this.props.isCompromisedPwdLaunchDisabled;return preact.createElement("div",{className:"app-card",onClick:!p&&this.appCardClickInternal,title:t},preact.createElement("div",{style:{width:"46px",margin:"0px 8px 0px 0px",display:"inline-block",position:"relative"}},r,a,preact.createElement("img",{className:p?"app-icon disabled":"app-icon",src:this.trueIcon})),preact.createElement("div",{className:p?o+" disabled":o},preact.createElement("div",{className:"app-name-class"},preact.createElement("span",{style:{verticalAlign:"middle"}},this.props.displayName),e)),i,n,s)}},O.components.AppCardExt=O.components.AppCard,O.components.SecuredItemCard=class extends preact.Component{constructor(e,t){super(e,t),this.trueIcon=e.icon,this.trueIcon||(this.trueIcon="Passwords"===e.type?"../popover/images/secured_items_password.png":"../popover/images/secured_items_note.png"),this.itemTypeInSingular=this.props.type.replace(/s$/,""),this.prepareTooltip=this.prepareTooltip.bind(this),this.getDetails=this.getDetails.bind(this),this.state={showMenu:{isMenuOpen:!1,top:0},toastMessage:{isCopied:!1,msg:""}},this.showCopyMenu=this.showCopyMenu.bind(this),this.closeMenu=this.closeMenu.bind(this),this.copyUserName=this.copyUserName.bind(this),this.copyPassword=this.copyPassword.bind(this),this.copyVerficationCodeForSecuredPassword=this.copyVerficationCodeForSecuredPassword.bind(this),this.copySecuredNote=this.copySecuredNote.bind(this),this.showToastMessage=this.showToastMessage.bind(this),this.isUsernameSet=this.props.isUsernameSet,this.isPasswordSet=this.props.isPasswordSet,this.isPasswordCompromised=this.props.isPasswordCompromised,this.isTOTPSet=this.props.isTOTPSet,this.isTOTPEnabledForSecuredPasswordBE=this.props.isTOTPEnabledForSecuredPasswordBE}showCopyMenu(e){e.stopPropagation();var t=e.target.getClientRects()[0].top;let s=document.querySelector(".panel-content");this.setState(e=>({showMenu:{...e.showMenu,isMenuOpen:!0,top:t},toastMessage:{isCopied:!1,msg:""}}),()=>{document.addEventListener("click",this.closeMenu,!0),s.addEventListener("scroll",this.closeMenu)})}closeMenu(){let e=document.querySelector(".panel-content");this.setState(e=>({showMenu:{...e.showMenu,isMenuOpen:!1}}),()=>{document.removeEventListener("click",this.closeMenu,!0),e.removeEventListener("scroll",this.closeMenu)})}showToastMessage(t,s,r){this.setState(e=>({toastMessage:{...e.toastMessage,isCopied:t,msg:s,isNotAllowed:r},showMenu:{}}))}errorCopyingUP(e){this.showToastMessage(!0,e,!0)}copyUserName(){!1===this.isUsernameSet?this.errorCopyingUP(r.USERNAME_UNAVAILABLE):this.getDetails("u",r.USERNAME_COPIED,r.USERNAME_UNAVAILABLE)}copyPassword(){!1===this.isPasswordSet?this.errorCopyingUP(r.PASSWORD_UNAVAILABLE):this.getDetails("p",r.PASSWORD_COPIED,r.PASSWORD_UNAVAILABLE)}copyVerficationCodeForSecuredPassword(e,t){var s=this;e.stopPropagation(),this.props.isTOTPSet?O.utils.appClick.getVerificationCodeForSecuredPassword(this.props.itemKey,function(e){e?(O.utils.miscFunc.copyToClipboard(e).then(()=>{s.showToastMessage(!0,r.TOTP_COPIED)}).catch(()=>{s.errorCopyingUP(r.TOTP_UNAVAILABLE)}),O.utils.miscFunc.setClearClipboardTimer()):s.errorCopyingUP(r.TOTP_UNAVAILABLE)},t):this.errorCopyingUP(r.TOTP_UNAVAILABLE)}copySecuredNote(){this.getDetails("n",r.SECUREDNOTE_COPIED,r.SECUREDNOTE_UNAVAILABLE)}prepareTooltip(){var e=O.utils.miscFunc.userSetting.enableEnhancedTooltip,t=this.props.displayName;if(this.props.description){if(e)return t+=O.utils.miscFunc.clampTextToTwoLines(this.props.description,45);t+="\r\n"+O.utils.miscFunc.strSplitter(this.props.description,45).join("\r\n")}else e||(t+="\r\n"+this.itemTypeInSingular);return t}getDetails(t,s,r){let a=this;O.utils.appClick.getCredsForSecuredItem(this.props.itemKey,this.props.type,function(e){null!=e&&null!==e.Result&&e.Result[t]?(O.utils.miscFunc.copyToClipboard(e.Result[t]).then(()=>{a.showToastMessage(!0,s)}).catch(()=>{a.errorCopyingUP(r)}),O.utils.miscFunc.setClearClipboardTimer()):a.errorCopyingUP(r)})}render(){let e=-1!==navigator.userAgent.toLowerCase().indexOf("chrome")?"card-default-width":"card-default-width card-smaller-width",t=this.props.showItemType?preact.createElement("div",{className:"item-type"},this.itemTypeInSingular):null,s=null;this.state.toastMessage.isCopied&&(s=preact.createElement(O.components.ToastMessageExt,{showFeedback:this.state.toastMessage.isCopied,feedbackMsg:this.state.toastMessage.msg,isNotAllowed:this.state.toastMessage.isNotAllowed}));var r=preact.createElement("div",{className:"creds-copy-menu-icon",onClick:this.showCopyMenu,src:"../popover/images/icon_more_vert.svg"});this.prepareTooltip();let a=null;var n=[],n=("Passwords"===this.props.type?(n.push({title:"Copy username",copyItem:this.copyUserName,className:!1===this.isUsernameSet?"copy-creds-button inactive":"copy-creds-button"}),n.push({title:"Copy password",copyItem:this.copyPassword,className:!1===this.isPasswordSet?"copy-creds-button inactive":"copy-creds-button"}),this.isTOTPSet&&this.isTOTPEnabledForSecuredPasswordBE&&n.push({title:"Copy verification code",copyItem:e=>this.copyVerficationCodeForSecuredPassword(e,O.formfill.TOTP_ACTION_TYPE.IBECopy),className:"copy-creds-button"})):n.push({title:"Copy secured note",copyItem:this.copySecuredNote}),this.state.showMenu.isMenuOpen&&(a=preact.createElement(O.components.CopyMenuExt,{showMenu:this.state.showMenu.isMenuOpen,top:this.state.showMenu.top,menuItems:n,isPasswordSet:this.isPasswordSet,isUsernameSet:this.isUsernameSet})),null);return this.isPasswordCompromised&&(n=preact.createElement("span",{className:"compromised-passwords-icon-class ",src:"../popover/images/error-icon.svg",title:"Password is at risk. Change your password."})),preact.createElement("div",{className:"card",title:this.prepareTooltip()},preact.createElement("div",{style:{width:"45px",margin:"0px 8px 0px 0px",display:"inline-block",position:"relative"}},preact.createElement("img",{className:"item-icon",src:this.trueIcon})),preact.createElement("div",{className:e},preact.createElement("div",{className:"item"},preact.createElement("div",{className:"item-name"},this.props.displayName),t)),n,r,a,s)}},O.components.SecuredItemCardExt=O.components.SecuredItemCard,O.components.CopyUPMenu=class extends preact.Component{constructor(e,t){super(e,t),this.copyPassword=this.copyPassword.bind(this),this.copyUsername=this.copyUsername.bind(this),this.errorCopyingUP=this.errorCopyingUP.bind(this),this.needsChallenge=this.needsChallenge.bind(this)}copyUsername(e){e.stopPropagation();e=this.props.username;""!==e&&this.props.isCredsAvailable?(O.utils.miscFunc.copyToClipboard(e).then(()=>{this.props.toastMessage(!1,!0,r.USERNAME_COPIED,!1)}),O.utils.miscFunc.setClearClipboardTimer()):this.errorCopyingUP(r.USERNAME_UNAVAILABLE)}copyPassword(e){var t=this;e.stopPropagation(),this.props.isCopyPasswordAllowed&&this.props.ispasswordIsSet&&this.props.isCredsAvailable?this.props.isMFAEnabled?this.needsChallenge(r.MFA_MESSAGE):O.utils.appClick.getCreds(this.props.appkey,function(e){null!=e&&null!==e.Result?(t.copyToClipboard(e.Result.p,r.PASSWORD_COPIED),t.setClearClipboardTimer()):t.errorCopyingUP(r.PASSWORD_UNAVAILABLE)}):this.errorCopyingUP(r.PASSWORD_UNAVAILABLE)}onChangePassword(e){e.stopPropagation(),this.props.showChangePasswordPrompt()}copyVerficationCode(e,t){var s=this;e.stopPropagation(),this.props.isTOTPAvailable?O.utils.appClick.getVerificationCode(this.props.appkey,function(e){e?(s.copyToClipboard(e,r.TOTP_COPIED),s.setClearClipboardTimer()):s.errorCopyingUP(r.TOTP_UNAVAILABLE)},t):this.errorCopyingUP(r.TOTP_UNAVAILABLE)}errorCopyingUP(e){this.props.toastMessage(!1,!0,e,!0)}needsChallenge(e){this.props.toastMessage(!0,!0,e)}copyToClipboard(e,t){navigator?.clipboard?.writeText?.(e).then(()=>{this.props.toastMessage(!1,!0,t,!1)})}setClearClipboardTimer(){var e;this.props.userSetting.isClearClipboardEnabled&&(e=this.props.userSetting.durationForClearingClipboardPassword,O.utils.appClick.setClearClipboardTimer(e))}render(){var e="",t="",s="";if(this.props.showMenu)return""!=this.props.username||this.props.isCredsAvailable||(t=r.USERNAME_UNAVAILABLE),this.props.isCredsAvailable||this.props.ispasswordIsSet||(e=r.PASSWORD_UNAVAILABLE),this.props.isTOTPAvailable||(s=r.TOTP_UNAVAILABLE),preact.createElement("div",{className:"copy-menu",style:{top:this.props.top}},preact.createElement("button",{className:this.props.isCredsAvailable&&this.props.username?"copy-creds-button":"copy-creds-button inactive",onClick:e=>{this.copyUsername(e)},title:t},"Copy username"),preact.createElement("button",{className:this.props.isCopyPasswordAllowed&&this.props.isCredsAvailable&&this.props.ispasswordIsSet?"copy-creds-button":"copy-creds-button inactive",onClick:e=>{this.copyPassword(e)},title:e},"Copy password"),this.props.needsChangePassword?preact.createElement("button",{className:"copy-creds-button",onClick:e=>{this.onChangePassword(e)},title:e},"Change password"):null,this.props.isTOTPAvailable?preact.createElement("button",{className:"copy-creds-button",onClick:e=>{this.copyVerficationCode(e,O.formfill.TOTP_ACTION_TYPE.IBECopy)},title:s},"Copy verification code"):null)}},O.components.CopyUPMenuExt=O.components.CopyUPMenu,O.components.CopyMenu=class extends preact.Component{constructor(e,t){super(e,t),this.menuItems=this.props.menuItems}render(){if(this.props.showMenu)return preact.createElement("div",{className:"copy-menu",style:{top:this.props.top}},this.menuItems.map((e,t)=>preact.createElement("button",{className:e.className,onClick:e.copyItem,title:e.title,key:t},e.title)))}},O.components.CopyMenuExt=O.components.CopyMenu,O.components.ToastMessage=class extends preact.Component{constructor(e,t){super(e,t)}render(){return preact.createElement("div",{className:"copy-toast-msg",style:{height:this.props.isMFA?"10vh":"8vh",background:this.props.isMFA?"#1362CB":this.props.isNotAllowed?"#f12d37":"#14b876",opacity:this.props.showFeedback?1:0}},this.props.feedbackMsg)}},O.components.ChangePasswordPromptExt=class extends preact.Component{constructor(e,t){super(e,t)}render(){return preact.createElement("div",{className:"toast-msg",style:{height:"20vh",background:"#fee7ea",opacity:1}},preact.createElement("img",{className:"close-icon",src:O.brand.closeDialogIcon,onClick:this.props.onClose}),preact.createElement("div",{className:"message-header"},"Change your password for "+this.props.app.displayName),preact.createElement("div",{className:"message-description"},"Reset password in the application"),preact.createElement("div",{className:"go-to-site",onClick:()=>{O.utils.appClick.openApp(this.props.app.url,!0)}},"Go to site now"))}},O.components.ToastMessageExt=O.components.ToastMessage,O.components.AppListGroup=class extends preact.Component{constructor(e,t){super(e,t),this.groupHeaderLen=35,this.onCopyUPMenuClick=this.onCopyUPMenuClick.bind(this)}onCopyUPMenuClick(e,t){this.props.onCopyUPMenuClick(e,t)}render(){e=this.props.searchWords?(t=this.props.searchWords.trim(),this.props.appsGroup.apps.filter(function(e){return e.name&&-1!=e.name.toLowerCase().indexOf(t.toLowerCase())})):this.props.appsGroup.apps;var t,e,s=this.props.childHost,r=0<e.length?"block":"none",a=this.props.appsGroup.header.length>this.groupHeaderLen?this.props.appsGroup.header.substring(0,this.groupHeaderLen)+"...":this.props.appsGroup.header,n=this;return preact.createElement("div",{className:"app-group-class",style:{display:r},title:n.props.appsGroup.header},preact.createElement("div",{className:"app-card-group"},a),e.map(function(e){return preact.createElement(O.components.AppCardExt,{key:e.appkey,name:e.name,displayName:e.displayName,description:e.raw.Description,appType:e.raw.AppType,webAppType:e.raw.WebAppType,webUPAppType:e.raw.WebUPAppType,icon:e.raw.Icon,appkey:e.appkey,childPodHost:s,isShared:e.isSharedAccout,isNewApp:e.isNewApp,username:e.username,passwordIsSet:e.raw.PasswordIsSet,appCardClick:n.props.appCardClick,isSwsEnabled:e.isSwsEnabled,hasSwsEntitlement:n.props.hasSwsEntitlement,isCopyCredsFromIBEEnabled:n.props.isCopyCredsFromIBEEnabled,IsPwdCompromised:e.IsPwdCompromised,copyUPMenu:n.onCopyUPMenuClick,isCompromisedPwdLaunchDisabled:n.props.isCompromisedPwdLaunchDisabled,enableCompromisedPasswordCheckForIBE:n.props.enableCompromisedPasswordCheckForIBE,url:e.url})}))}},O.components.AppListGroupExt=O.components.AppListGroup,O.components.SecuredItemListGroup=class extends preact.Component{constructor(e,t){super(e,t),this.groupHeaderLen=35}render(){var t,e,s,r;if(0!==(e=this.props.searchWords?(t=this.props.searchWords.trim(),this.props.securedItemsGroup.securedItems.filter(function(e){return e.name&&-1!=e.name.toLowerCase().indexOf(t.toLowerCase())})):this.props.securedItemsGroup.securedItems).length)return s=this.props.securedItemsGroup.header.length>this.groupHeaderLen?this.props.securedItemsGroup.header.substring(0,this.groupHeaderLen)+"...":this.props.securedItemsGroup.header,r=this,preact.createElement("div",{className:"item-group",title:r.props.securedItemsGroup.header},preact.createElement("div",{className:"item-group-title"},s),e.map(function(e){return preact.createElement(O.components.SecuredItemCardExt,{key:e.itemKey,itemKey:e.itemKey,name:e.name,displayName:e.displayName,type:e.securedItemType,icon:e.icon,description:e.description,showItemType:r.props.filter&&"all"!==r.props.filter,isUsernameSet:e.isUsernameSet,isPasswordSet:e.isPasswordSet,isPasswordCompromised:e.isPasswordCompromised,isTOTPSet:e.raw.IsTotpSet,isTOTPEnabledForSecuredPasswordBE:r.props.isTOTPEnabledForSecuredPasswordBE})}))}},O.components.SecuredItemListGroupExt=O.components.SecuredItemListGroup,O.components.PanelHeaderWithFilter=class extends preact.Component{constructor(e,t){super(e,t)}render(){return preact.createElement("div",null,preact.createElement("div",null,preact.createElement(O.components.PanelTitle,{panelTitle:this.props.panelTitle})),preact.createElement("div",{className:"panelHead"},preact.createElement("div",{className:"refresh-btn-div-wrapper"},preact.createElement("button",{className:"refresh-button",onClick:this.props.refreshBtnClick,title:"Refresh"},preact.createElement("div",{className:"refresh-icon"}))),preact.createElement("div",{className:"filterSelectWrapper"},preact.createElement(O.components.FilterDropDownExt,{categories:this.props.categories,filterChange:this.props.filterChange,filter:this.props.filterValue,tags:this.props.filterTags,fixedFilterOptions:this.props.fixedFilterOptions,defTag:this.props.defTag})),preact.createElement(O.components.SearchBarExt,{onSearchClick:this.props.onSearchClick,searchWords:this.props.searchWords})))}},O.components.PanelHeaderWithFilterExt=O.components.PanelHeaderWithFilter,O.components.PanelTitle=class extends preact.Component{constructor(e,t){super(e,t)}render(){return preact.createElement("div",null,preact.createElement("div",{className:"panel-header"},preact.createElement("span",{className:"panel-label"},this.props.panelTitle)))}},O.components.PanelTitleExt=O.components.PanelTitle,O.components.FilterDropDown=class extends preact.Component{constructor(e,t){super(e,t),this.unfocus=this.unfocus.bind(this),this.filterChange=this.filterChange.bind(this),this.getUserTags=this.getUserTags.bind(this),this.fixedOptions=this.props.fixedFilterOptions,this.optionSelectLen=14}unfocus(){this.mySelect&&this.mySelect.blur()}filterChange(e){e=e.target.value;this.props.filterChange(e)}shouldComponentUpdate(){this.unfocus()}getUserTags(){return this.props.tags?this.props.tags.filter(function(e){return"user"==e.tagType}):[]}render(){var s=this,e=this.getUserTags(),t=e&&0<e.length,r=this.fixedOptions.map(function(e){return preact.createElement("option",{className:"filterOption",selected:e.value==s.props.filter,value:e.value,title:e.display},e.display)});return t&&(r.push(preact.createElement("option",{className:"filterSep",disabled:!0},"⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯")),e.forEach(function(e){var t=e.header.length>s.optionSelectLen?e.header.substring(0,s.optionSelectLen)+"...":e.header;r.push(preact.createElement("option",{className:"filterOption",selected:e.label==s.props.filter,value:e.label,title:e.header},t))})),preact.createElement("select",{className:"filterSelect",onChange:this.filterChange,ref:function(e){s.mySelect=e}},r)}},O.components.FilterDropDownExt=O.components.FilterDropDown,O.components.AppsPanel=class extends preact.Component{constructor(e,t){super(e,t),this.groupAppsByCategory=this.groupAppsByCategory.bind(this),this.groupAppsByTags=this.groupAppsByTags.bind(this),this.onSearchClick=this.onSearchClick.bind(this),this.appsFilterChange=this.appsFilterChange.bind(this),this.prepareAllApps=this.prepareAllApps.bind(this),this.sortAllAppsByName=this.sortAllAppsByName.bind(this),this.refreshBtnClick=this.refreshBtnClick.bind(this),this.findAppFilterName=this.findAppFilterName.bind(this),this.onCopyUPMenuClick=this.onCopyUPMenuClick.bind(this),this.closeMenu=this.closeMenu.bind(this),this.toastMessage=this.toastMessage.bind(this),this.showChangePasswordPrompt=this.showChangePasswordPrompt.bind(this),this.prepareAllApps(),this.sortAllAppsByName(),this.state={selectedApp:null,showMenu:{isMenuOpen:!1,top:0},toastMessage:{isMFA:!1,isCopied:!1,msg:"",isNotAllowed:!1},showChangePassword:!1},this.appsUpdaterStatEnum=O.formfill.APPS_UPDATER_STATUS_ENUM}componentDidMount(){document.getElementById("searchBar").focus()}onCopyUPMenuClick(t,s){let e=document.querySelector(".panel-content");this.setState(e=>({selectedApp:this.props.apps.find(e=>e.appkey==s),showMenu:{...e.showMenu,isMenuOpen:!0,top:t},toastMessage:{},showChangePassword:!1}),()=>{document.addEventListener("click",this.closeMenu),e.addEventListener("scroll",this.closeMenu)})}closeMenu(){let e=document.querySelector(".panel-content");this.setState(e=>({showMenu:{...e.showMenu,isMenuOpen:!1}}),()=>{document.removeEventListener("click",this.closeMenu),e.removeEventListener("scroll",this.closeMenu)})}toastMessage(t,s,r,a){this.setState(e=>({toastMessage:{...e.toastMessage,isMFA:t,isCopied:s,msg:r,isNotAllowed:a},showMenu:{}}))}showChangePasswordPrompt(){this.setState({showChangePassword:!0}),this.closeMenu()}onSearchClick(t){this.props.onSearchClick(t),this.props.searchWords=t,this.setState(function(e){return{searchWords:t}})}appsFilterChange(t){this.props.appsFilterChange(t),this.props.appsFilter=t,this.setState(function(e){return{appsFilter:t}})}refreshBtnClick(){this.props.appDataStatus!=this.appsUpdaterStatEnum.Requesting&&O.utils.appClick.appsRefresh()}prepareAllApps(){for(var e=[],t=0;t<this.props.apps.length;t++){var s=this.props.apps[t];4!=s.readiness&&e.push(s)}this.props.apps=e}sortAllAppsByName(){this.props.apps.sort(function(e,t){return e.displayName.localeCompare(t.displayName)})}groupAppsByCategory(e){var t=[];if(e){for(var s={},r=0;r<e.length;r++)void 0===s[e[r].category]&&(s[e[r].category]=[]),s[e[r].category].push(e[r]);var a=Object.keys(s);a.sort(function(e,t){return e.localeCompare(t)}),this.props.categories=a;for(r=0;r<a.length;r++){var n=a[r];t.push({header:n,label:n,apps:s[n]})}}return t}groupAppsByTags(e,t){var s=[];if(e&&t){var r=Object.keys(t),a=r.indexOf("frequentlyused"),a=(-1<a&&r.splice(a,1),r.indexOf("recent"));-1<a&&r.splice(a,1),r.sort(function(e,t){return e.localeCompare(t)}),r.unshift("recent"),r.unshift("frequentlyused");for(var n=0;n<r.length;n++){var i=r[n],o=t[i];if(o){var p=o.tagdisplayname,c=o.type,l=[];if(0<o.appkeys.length){for(var h={},d=0;d<o.appkeys.length;d++)h[o.appkeys[d]]=!0;for(d=0;d<e.length;d++)void 0!==h[e[d].appkey]&&l.push(e[d])}s.push({header:p,label:i,tagType:c,apps:l})}}}return s}findAppFilterName(e){if(e&&this.props.appTags){if("allusertags"===e)return e;for(var t in this.props.appTags){t=this.props.appTags[t];if(t.tagname==e||t.tagdisplayname==e)return t.tagname}}return"allapps"}getFilteredAppGroup(e,t,s){var r=this.findAppFilterName(s);if(r&&"allapps"!=r)return"allusertags"==r?e.filter(function(e){return"user"==e.tagType||"frequentlyused"==e.label}):"frequentlyused"==r||"recent"==r?e.filter(function(e){return e.label==s}):e.filter(function(e){return e.label==s});for(var a=[],n=0;n<e.length;n++)if("frequentlyused"==e[n].label){a.push(e[n]);break}e=e.filter(function(e){return"frequentlyused"!=e.label&&"recent"!=e.label});for(var i={},n=0;n<e.length;n++)for(var o=0;o<e[n].apps.length;o++)i[e[n].apps[o].appkey]=!0;for(var p=0,c=0;p<e.length&&c<t.length;)if(e[p].label.localeCompare(t[c].label)<0)a.push(e[p]),p++;else{if(0==e[p].label.localeCompare(t[c].label)){if(this.props.isAppApearsTwiceBugFixEnabled){for(var l=new Set,h=0,d=0;h<e[p].apps.length&&d<t[c].apps.length;)e[p].apps[h].displayName.localeCompare(t[c].apps[d].displayName)<=0?(l.add(e[p].apps[h]),h++):(l.add(t[c].apps[d]),d++);for(;h<e[p].apps.length;)l.add(e[p].apps[h]),h++;for(;d<t[c].apps.length;)l.add(t[c].apps[d]),d++;e[p].apps=Array.from(l)}else{for(var l=[],m=0,u=0;m<e[p].apps.length&&u<t[c].apps.length;)e[p].apps[m].displayName.localeCompare(t[c].apps[u].displayName)<=0?(l.push(e[p].apps[m]),m++):(l.push(t[c].apps[u]),u++);for(;m<e[p].apps.length;)l.push(e[p].apps[m]),m++;for(;u<t[c].apps.length;)l.push(t[c].apps[u]),u++;e[p].apps=l}a.push(e[p]),p++}else{for(var g=[],n=0;n<t[c].apps.length;n++)i[t[c].apps[n].appkey]||g.push(t[c].apps[n]);0<g.length&&(t[c].apps=g,a.push(t[c]))}c++}for(;p<e.length;)a.push(e[p]),p++;for(;c<t.length;){for(g=[],n=0;n<t[c].apps.length;n++)i[t[c].apps[n].appkey]||g.push(t[c].apps[n]);0<g.length&&(t[c].apps=g,a.push(t[c])),c++}return a}render(){var e,t,s=this,r=this.props.appDataStatus,a=r==this.appsUpdaterStatEnum.Ready?(n=this.groupAppsByCategory(this.props.apps),a=this.groupAppsByTags(this.props.apps,this.props.appTags),this.props.tagGroupedApps=a,this.getFilteredAppGroup(a,n,this.props.appsFilter).map(function(e){return preact.createElement(O.components.AppListGroupExt,{appsGroup:e,searchWords:s.props.searchWords,childHost:s.props.childHost,appCardClick:s.props.appCardClick,hasSwsEntitlement:s.props.hasSwsEntitlement,isCopyCredsFromIBEEnabled:s.props.isCopyCredsFromIBEEnabled,onCopyUPMenuClick:s.onCopyUPMenuClick,isCompromisedPwdLaunchDisabled:s.props.isCompromisedPwdLaunchDisabled,enableCompromisedPasswordCheckForIBE:s.props.enableCompromisedPasswordCheckForIBE})})):r==this.appsUpdaterStatEnum.Requesting?preact.createElement("div",{style:{width:"100%",height:"150px",textAlign:"center",padding:"80px 0px 0px 0px",color:"#BDBDBA"},title:"Requesting..."},preact.createElement("i",{className:"fas fa-spinner fa-spin fa-4x"})):preact.createElement("div",{style:{width:"100%",height:"150px",textAlign:"center",padding:"80px 0px 0px 0px",color:"#FFA500"},title:"Error"},preact.createElement("i",{className:"fas fa-times-circle-o fa-4x"})),n=null;this.state.showMenu.isMenuOpen&&(t=e=r=!1,(this.state.selectedApp.Personal&&void 0===this.state.selectedApp.CanViewCreds||this.state.selectedApp.Personal&&this.state.selectedApp.CanViewCreds||this.state.selectedApp.AllowViewFixedCredentials&&this.state.selectedApp.isSharedAccout||void 0===this.state.selectedApp.Personal&&this.state.selectedApp.IsPromptForUsername)&&(r=!0),this.state.selectedApp.IsTotpEnabled&&s.props.userSetting.isTOTPEnabledForBE&&(e=!0),this.state.selectedApp.IsPwdCompromised&&this.props.enableCompromisedPasswordCheckForIBE&&(this.state.selectedApp.isSharedPersonalApp&&this.state.selectedApp.canSaveCreds||this.state.selectedApp.Personal&&!this.state.selectedApp.isSharedPersonalApp||!this.state.selectedApp.Personal&&this.state.selectedApp.IsPromptForUsername)&&(t=!0),n=preact.createElement(O.components.CopyUPMenuExt,{appkey:this.state.selectedApp.appkey,showMenu:this.state.showMenu.isMenuOpen,top:this.state.showMenu.top,username:this.state.selectedApp.username,webAppType:this.state.selectedApp.raw.WebAppType,isMFAEnabled:this.state.selectedApp.IsMFAEnabled,isCredsAvailable:r,needsChangePassword:t,isTOTPAvailable:e,ispasswordIsSet:this.state.selectedApp.raw.PasswordIsSet,isCopyPasswordAllowed:s.props.isCopyPasswordAllowed,userSetting:s.props.userSetting,toastMessage:this.toastMessage,showChangePasswordPrompt:this.showChangePasswordPrompt}));let i=null,o=(this.state.toastMessage.isCopied&&(i=preact.createElement(O.components.ToastMessageExt,{isMFA:this.state.toastMessage.isMFA,showFeedback:this.state.toastMessage.isCopied,feedbackMsg:this.state.toastMessage.msg,isNotAllowed:this.state.toastMessage.isNotAllowed})),null);this.state.showChangePassword&&(o=preact.createElement(O.components.ChangePasswordPromptExt,{app:this.state.selectedApp,onClose:()=>{this.setState({showChangePassword:!1})}}));return preact.createElement("div",{},preact.createElement(O.components.PanelHeaderWithFilterExt,{panelTitle:"Applications",refreshBtnClick:this.refreshBtnClick,filterTags:this.props.tagGroupedApps,fixedFilterOptions:[{display:"All Apps",value:"allapps"},{display:"All User Tags",value:"allusertags"},{display:"Frequently Used",value:"frequentlyused"},{display:"Recent",value:"recent"}],filterValue:this.props.appsFilter,filterChange:this.appsFilterChange,onSearchClick:this.onSearchClick,searchWords:this.props.searchWords}),preact.createElement("div",{className:"panel-content"},a),i,n,i,o)}},O.components.AppsPanelExt=O.components.AppsPanel,O.components.SecuredItemsPanel=class extends preact.Component{constructor(e,t){super(e,t),this.groupItemsByCategory=this.groupItemsByCategory.bind(this),this.groupItemsByTags=this.groupItemsByTags.bind(this),this.onSearchClick=this.onSearchClick.bind(this),this.refreshBtnClick=this.refreshBtnClick.bind(this),this.filterChange=this.filterChange.bind(this),this.findFilterName=this.findFilterName.bind(this),this.isUsernameSet=this.props.isUsernameSet,this.isPasswordSet=this.props.isPasswordSet,this.isPasswordCompromised=this.props.isPasswordCompromised,this.isTOTPEnabledForSecuredPasswordBE=this.props.userSetting.isTOTPEnabledForSecuredPasswordBE,this.securedItemsUpdaterStatEnum=O.securedItem.SECURED_ITEMS_UPDATER_STATUS_ENUM}refreshBtnClick(){this.props.securedItemDataStatus!=this.securedItemsUpdaterStatEnum.Requesting&&O.utils.appClick.securedItemsRefresh()}groupItemsByCategory(e){var t=[];if(e){for(var s={},r=0;r<e.length;r++)void 0===s[e[r].securedItemType]&&(s[e[r].securedItemType]=[]),s[e[r].securedItemType].push(e[r]);var a=Object.keys(s);a.sort(function(e,t){return e.localeCompare(t)}),this.props.categories=a;for(r=0;r<a.length;r++){var n=a[r];t.push({header:n,label:n,securedItems:s[n]})}}return t}groupItemsByTags(e,t){var s=[];if(e&&t){var r=Object.keys(t),a=r.indexOf("frequentlyused"),a=(-1<a&&r.splice(a,1),r.indexOf("recent"));-1<a&&r.splice(a,1),r.sort(function(e,t){return e.localeCompare(t)}),r.unshift("recent"),r.unshift("frequentlyused");for(var n=0;n<r.length;n++){var i=r[n],o=t[i];if(o){var p=o.tagdisplayname,c=o.type,l=[];if(0<o.itemkeys.length){for(var h={},d=0;d<o.itemkeys.length;d++)h[o.itemkeys[d]]=!0;for(d=0;d<e.length;d++)void 0!==h[e[d].itemKey]&&l.push(e[d])}s.push({header:p,label:i,tagType:c,securedItems:l})}}}return s}findFilterName(e){if(e&&this.props.securedItemsTags){if("allusertags"===e||"shared"===e)return e;for(var t in this.props.securedItemsTags){t=this.props.securedItemsTags[t];if(t.tagname==e||t.tagdisplayname==e)return t.tagname}}return"all"}getFilteredItemGroup(e,t,s){var r=this.findFilterName(s),r=r&&"all"!=r?"allusertags"==r?e.filter(function(e){return"user"==e.tagType||"frequentlyused"==e.label}):"frequentlyused"==r||"recent"==r?e.filter(function(e){return e.label==s}):"shared"==r?e.filter(function(e){return"sharedbyme"===e.label||"sharedwithme"===e.label}):e.filter(function(e){return e.label==s}):t;return r.forEach(e=>e.securedItems.sort((e,t)=>e.displayName.localeCompare(t.displayName))),r}onSearchClick(t){this.props.onSearchClick(t),this.props.searchWords=t,this.setState(function(e){return{searchWords:t}})}filterChange(t){this.props.securedItemsFilterChange(t),this.props.securedItemsFilter=t,this.setState(function(e){return{filter:t}})}createElement(){return preact.createElement.apply(this,arguments)}componentDidMount(){document.getElementById("searchBar").focus()}render(){var t=this,e=this.groupItemsByCategory(this.props.securedItems),s=this.groupItemsByTags(this.props.securedItems,this.props.securedItemsTags);this.props.tagGroupedItems=s,s=this.props.securedItemDataStatus===this.securedItemsUpdaterStatEnum.Ready?this.getFilteredItemGroup(s,e,this.props.securedItemsFilter).map(function(e){return preact.createElement(O.components.SecuredItemListGroupExt,{securedItemsGroup:e,key:e.header,searchWords:t.props.searchWords,filter:t.props.securedItemsFilter,isTOTPEnabledForSecuredPasswordBE:t.props.userSetting.isTOTPEnabledForSecuredPasswordBE})}):this.props.securedItemDataStatus===this.securedItemsUpdaterStatEnum.Requesting?preact.createElement("div",{style:{width:"100%",height:"150px",textAlign:"center",padding:"80px 0px 0px 0px",color:"#BDBDBA"},title:"Requesting..."},preact.createElement("i",{className:"fas fa-spinner fa-spin fa-4x"})):preact.createElement("div",{style:{width:"100%",height:"150px",textAlign:"center",padding:"80px 0px 0px 0px",color:"#FFA500"},title:"Error"},preact.createElement("i",{className:"fas fa-times-circle-o fa-4x"}));return this.createElement("div",{},preact.createElement(O.components.PanelHeaderWithFilterExt,{panelTitle:"Secured Items",refreshBtnClick:this.refreshBtnClick,filterValue:this.props.securedItemsFilter,fixedFilterOptions:[{display:"All Items",value:"all"},{display:"All User Tags",value:"allusertags"},{display:"Shared",value:"shared"}],filterChange:this.filterChange,onSearchClick:this.onSearchClick,searchWords:this.props.searchWords}),preact.createElement("div",{className:"panel-content"},s))}},O.components.SecuredItemsPanelExt=O.components.SecuredItemsPanel,O.components.WelcomePanel=class extends preact.Component{constructor(e,t){super(e,t)}render(){return preact.createElement("div",{style:{textAlign:"center",margin:"0px",padding:"0px",width:"352px",height:"90px"}},preact.createElement("img",{style:{paddingTop:"52.9px"},src:this.props.logoPath}))}},O.components.WelcomePanelExt=O.components.WelcomePanel,O.components.TogBtn=class extends preact.Component{constructor(e,t){super(e,t),this.toggleChange=this.toggleChange.bind(this)}toggleChange(e){this.props.onToggleChange(this,e.target.checked,this.props.id)}render(){var e=-1===navigator.userAgent.toLowerCase().indexOf("chrome"),t=this.props.initVal?"toggled":"untoggled";return e&&(t+=" decreased-top"),preact.createElement("label",{className:"switch",title:this.props.helpTip},preact.createElement("input",{type:"checkbox",onChange:this.toggleChange,checked:this.props.initVal,disabled:this.props.disable}),preact.createElement("div",{className:"slider "+t},preact.createElement("i",{className:"on"}),preact.createElement("div",{className:"off"})))}},O.components.TogBtnExt=O.components.TogBtn,O.components.MenuBtn=class extends preact.Component{constructor(e,t){super(e,t),this.onMenuItemClick=this.onMenuItemClick.bind(this)}onMenuItemClick(e){O.utils.appClick.menuClick(e.target.id)}render(){return preact.createElement("button",{className:this.props.extraClass?"settingButton menuButton "+this.props.extraClass:"settingButton menuButton",id:this.props.id,onClick:this.onMenuItemClick,title:this.props.toolTip,disabled:this.props.disable},this.props.display)}},O.components.MenuBtnExt=O.components.MenuBtn,O.components.createMenusClsWrapper=function(s){class e extends preact.Component{constructor(e,t){super(e,t),this.menus=O.utils.miscFunc.updateMenus(e,s)}render(){if(Array.isArray(this.menus)&&0!==this.menus.length)return preact.createElement("div",{style:{margin:"8px 0px"}},this.menus.map(function(e){return preact.createElement(O.components.MenuBtnExt,{id:e.id,title:e.toolTip,disabled:e.disable,display:e.display,extraClass:e.extraClass})}))}}return e},O.components.MenuBtnsExt=O.components.createMenusClsWrapper(),O.components.SettingPanel=class extends preact.Component{constructor(e,t){super(e,t),this.state={newPortalHost:this.props.portalHost,showAdvanced:!1,clearSkippedSites:!1},this.onInputChange=this.onInputChange.bind(this),this.onInputBlur=this.onInputBlur.bind(this),this.advancedSettingClick=this.advancedSettingClick.bind(this),this.onMenuItemClick=this.onMenuItemClick.bind(this)}onInputChange(e){this.setState(()=>({hostnameValidationResult:"None"}))}onInputBlur(e){var t=e.target.value,s=e.target.defaultValue;c.HOSTNAME.test(t)?t==this.props.portalHost?this.setState(()=>({hostnameValidationResult:"None"})):this.props.updatePortalHostname(t,!1):(this.setState(()=>({hostnameValidationResult:"Invalid"})),e.target.value=s)}advancedSettingClick(e){this.setState(function(e){return{showAdvanced:!e.showAdvanced}})}onMenuItemClick(e){e=e.target.id;O.utils.appClick.menuClick(e),this.setState(()=>({clearSkippedSites:!0}))}render(){var e=null,t=("Invalid"===this.state.hostnameValidationResult&&(e=preact.createElement(O.components.ToastMessageExt,{feedbackMsg:"Invalid Host Name",showFeedback:!0,isNotAllowed:!0})),null),s=(this.state.clearSkippedSites&&(t=preact.createElement(O.components.ToastMessageExt,{feedbackMsg:"Skipped sites cleared",showFeedback:!0})),this.props.connection!=p.SIGNIN||!this.props.userSetting.enableLandCatch||"APPS"!=this.props.entitlement&&"LEGACY"!=this.props.entitlement?"none":"block"),r=(this.props.connection==p.SIGNIN&&"APPS"!=this.props.entitlement&&this.props.entitlement,this.props.connection==p.SIGNIN&&this.props.userSetting.isDisableBrowserPasswordPromptsVisible&&O.utils.miscFunc.isDisableBrowserPasswordPromptsVisible()&&("APPS"==this.props.entitlement||"LEGACY"==this.props.entitlement)?"block":"none"),a=this.state.showAdvanced?"advanced-dropdown":"advanced-dropdown-right",n=this.state.showAdvanced?"advanced-setting-show":"advanced-setting-hide";return preact.createElement("div",{style:{margin:"0px",padding:"0px",width:"352px",height:"382px",backgroundColor:"#FFFFFF"}},preact.createElement("div",null,preact.createElement(O.components.PanelTitle,{panelTitle:"Settings"})),preact.createElement("div",{className:"panel-content settings-list"},preact.createElement("div",{className:"settings-container"},preact.createElement("span",{className:"settings-label"},"Open apps in a new browser tab"),preact.createElement("div",{className:"settings-toggle"},preact.createElement(O.components.TogBtnExt,{id:"openAppInNewTab",initVal:this.props.openAppInNewTab,onToggleChange:this.props.onToggleChange,disable:!1,helpTip:"Opens the app in current active tab or new tab"}))),preact.createElement("div",{className:"settings-container land-catch-container",style:{display:s}},preact.createElement("div",{className:"settings-container inner-container"},preact.createElement("span",{className:"settings-label"},"Enable Land&Catch on this computer"),preact.createElement("div",{className:"settings-toggle"},preact.createElement(O.components.TogBtnExt,{id:"enableLCLocal",initVal:-1<this.props.enableLCLocal,onToggleChange:this.props.onToggleChange,disable:!1,helpTip:"Enable/Disable Land&Catch on this machine"}))),preact.createElement("button",{id:"menuClearSkip",className:"settingButton",title:"Clear the land catch skipped sites",onClick:this.onMenuItemClick},"Clear Skipped Sites...")),preact.createElement("div",{className:"settings-container disable-password-prompts-container",style:{textAlign:"left",vertialAlign:"middle",display:r}},preact.createElement("span",{className:"settings-label"},"Disable Browser Password Prompts"),preact.createElement("div",{className:"settings-toggle"},preact.createElement(O.components.TogBtnExt,{id:"disableBrowserPasswordPrompts",initVal:this.props.disableBrowserPasswordPrompts,onToggleChange:this.props.onToggleChange,disable:!1,helpTip:"Disable Browser Password Prompts"}))),preact.createElement("div",{className:"settings-container advanced-container"},preact.createElement("div",{className:"advanced-button",onClick:this.advancedSettingClick},preact.createElement("span",{className:a},"Advanced")),preact.createElement("div",{className:n},preact.createElement("div",{style:{margin:"8px 0px"}},preact.createElement("input",{id:"setting_portalHostname",className:"portal-hostname-text",defaultValue:this.props.portalHost,onInput:this.onInputChange,onBlur:this.onInputBlur}),preact.createElement("span",{style:{backgroundColor:"transparent",width:"16px",height:"16px",margin:"0px",padding:"0px",borderStyle:"none",position:"absolute",borderRadius:"4px",right:"7px",top:"7px",verticalAlign:"middle",textAlign:"center"}})),preact.createElement("div",{className:"diagnostic-log-container"},preact.createElement("div",{className:"settings-container inner-container",style:{width:"280px"}},preact.createElement("span",{className:"settings-label"},"Enable diagnostics log"),preact.createElement("div",{className:"settings-toggle"},preact.createElement(O.components.TogBtnExt,{id:"debugMode",initVal:this.props.debugMode,onToggleChange:this.props.onToggleChange,disable:!1,helpTip:"Enable the diagnostics log for trouble shooting"}))),preact.createElement("div",{},preact.createElement(O.components.MenuBtnExt,{id:"menuDiagLog",title:"Download the diagnostics log for trouble shooting",disabled:!1,display:"Export Diagnostics Log"}))),preact.createElement(O.components.MenuBtnsExt,this.props)))),t,e)}},O.components.SettingPanelExt=O.components.SettingPanel,O.components.GenPassPanel=class extends preact.Component{constructor(e,t){super(e,t),this.refreshPassword=this.refreshPassword.bind(this),this.copyPassword=this.copyPassword.bind(this),this.getCryptoRandomInt=this.getCryptoRandomInt.bind(this),this.generatePassword=this.generatePassword.bind(this),this.assignPwdStrength=this.assignPwdStrength.bind(this),this.estimatePwdStrength=this.estimatePwdStrength.bind(this),this.estimatePassphraseStrength=this.estimatePassphraseStrength.bind(this),this.getPassword=this.getPassword.bind(this),this.generatePassPhrase=this.generatePassPhrase.bind(this),this.getPassphrase=this.getPassphrase.bind(this),this.editPassword=this.editPassword.bind(this),this.onLengthChange=this.onLengthChange.bind(this),this.onGenpassConfigChange=this.onGenpassConfigChange.bind(this),this.typeChange=this.onTypeChange.bind(this),this.seperatorChange=this.onSeperatorChange.bind(this),this.renderPassword=this.renderPassword.bind(this),this.checkGenerateBtnStatus=this.checkGenerateBtnStatus.bind(this),this.buttons=this.buttons.bind(this),this.getPassphraseWordList=this.getPassphraseWordList.bind(this),this.createPassphrase=this.createPassphrase.bind(this),this.setStrengthMeterStyle=this.setStrengthMeterStyle.bind(this),this.generateRandomNumberUsingDicewareMethod=this.generateRandomNumberUsingDicewareMethod.bind(this),this.passwordLengthMax=64,this.passwordLengthMin=8,this.commaSeperatedWordList="",this.passphraseWordListHash="",this.passphraseWordList="",this.props.passwordConfig=O.storage.get(O.preference.perfKeyEnum.genpassConfig,!0),this.state={passMinLength:8,passMaxLength:64,passwordConfig:this.props.passwordConfig},this.apiFail=!1,this.isGenPassTab=s,this.genpassValue="",this.passwordStengthLevelMax=4,this.isPassphraseGenerationEnable=this.props.isPassphraseGenerationEnable,this.passphraseMinWords=this.props.minimumNumberOfPassphraseWords,this.minimumNumberOfPassphraseCharacters=this.props.minimumNumberOfPassphraseCharacters,this.passphraseExcludedWords=this.props.excludedPassphraseCharactersOrWords,this.allowPasphraseGeneration=this.props.allowPasphraseGeneration}createElement(){return preact.createElement.apply(this,arguments)}getDocOrRelatedElement(){return O.crossover.genpass.getDocOrRelatedElement.apply(this,arguments)}getCryptoRandomInt(){return O.crossover.genpass.getCryptoRandomInt.apply(this,arguments)}durstenfeldShuffle(){return O.crossover.genpass.durstenfeldShuffle.apply(this,arguments)}generatePassword(){return O.crossover.genpass.generatePassword.apply(this,arguments)}getPassword(){return O.crossover.genpass.getPassword.apply(this,arguments)}generatePassPhrase(){return O.crossover.genpass.generatePassPhrase.apply(this,arguments)}getPassphrase(){return O.crossover.genpass.getPassphrase.apply(this,arguments)}estimatePwdStrength(){return O.crossover.genpass.estimatePwdStrength.apply(this,arguments)}assignPwdStrength(){return O.crossover.genpass.assignPwdStrength.apply(this,arguments)}estimatePassphraseStrength(){return O.crossover.genpass.estimatePassphraseStrength.apply(this,arguments)}editPassword(){return O.crossover.genpass.editPassword.apply(this,arguments)}refreshPassword(){return O.crossover.genpass.refreshPassword.apply(this,arguments)}onLengthChange(){return O.crossover.genpass.onLengthChange.apply(this,arguments)}onGenpassConfigChange(){return O.crossover.genpass.onGenpassConfigChange.apply(this,arguments)}onTypeChange(){return O.crossover.genpass.onTypeChange.apply(this,arguments)}onSeperatorChange(){return O.crossover.genpass.onSeperatorChange.apply(this,arguments)}renderPassword(){return O.crossover.genpass.renderPassword.apply(this,arguments)}checkGenerateBtnStatus(){return O.crossover.genpass.checkGenerateBtnStatus.apply(this,arguments)}buttons(){return O.crossover.genpass.buttons.apply(this,arguments)}createPassphrase(){return O.crossover.genpass.createPassphrase.apply(this,arguments)}setStrengthMeterStyle(){return O.crossover.genpass.setStrengthMeterStyle.apply(this,arguments)}generateRandomNumberUsingDicewareMethod(){return O.crossover.genpass.generateRandomNumberUsingDicewareMethod.apply(this,arguments)}getPassphraseWordList(t){O.utils.appClick.getPassphraseWordList(e=>{e&&null!=e.Result?(this.commaSeperatedWordList=e.Result.SubSetWords,this.createPassphrase(),this.setState(),this.setStrengthMeterStyle(t)):(this.apiFail=!0,this.setState())})}componentDidMount(){this.state.passwordConfig&&"Password"===this.state.passwordConfig.type?this.getPassword():this.generatePassPhrase(),this.checkGenerateBtnStatus()}closeTab(){setTimeout(function(){close()},100)}copyPassword(){var e;O.crossover.genpass.copyPassword.apply(this,arguments),this.props.userSetting.isClearClipboardEnabled&&(e=this.props.userSetting.durationForClearingClipboardPassword,O.utils.appClick.setClearClipboardTimer(e)),s&&this.closeTab()}renderCardBanner(){if(s)return preact.createElement("div",{className:"applications-banner"},preact.createElement("svg",{className:"logo-white-image"}),preact.createElement("svg",{className:"applications-close",onclick:this.closeTab}))}genpassComponent(){return O.crossover.genpass.genpassComponent.apply(this,arguments)}render(){var e=null;return this.apiFail&&"Passphrase"===this.state.passwordConfig.type&&""===this.commaSeperatedWordList&&(e=preact.createElement(O.components.ToastMessageExt,{feedbackMsg:"Unable to generate the Passphrase",showFeedback:!0,isNotAllowed:!0})),this.createElement("div",{style:{margin:"0px",padding:"0px",backgroundColor:"#FFFFFF"}},this.renderCardBanner(),this.genpassComponent(!0),e)}},O.components.GenPassPanelExt=O.components.GenPassPanel,O.components.UserPanel=class extends preact.Component{constructor(e,t){super(e,t)}render(){return preact.createElement("div",{style:{margin:"0px",padding:"0px",width:"300px",height:"303px",backgroundColor:"#FFFFFF"}},preact.createElement("div",{style:{width:"299px",height:"44px",backgroundColor:"#F7F7F7",borderBottom:"1px solid #D5D6D7"}},preact.createElement("span",{style:{lineHeight:"44px",paddingLeft:"16px",fontSize:"14px",fontWeight:700,width:"80px"}},"User")))}},O.components.UserPanelExt=O.components.UserPanel,O.components.MainDispWin=class extends preact.Component{constructor(e,t){super(e,t),this.estimateMainPanelBorder=this.estimateMainPanelBorder.bind(this)}estimateMainPanelBorder(){return s?"main-display-window border-shadow-thin-20":"main-display-window"}render(){var e;return this.props.contentType==o.WELCOME?e=preact.createElement(O.components.WelcomePanelExt,{logoPath:this.props.logoPath}):this.props.contentType==o.SETTINGS?e=preact.createElement(O.components.SettingPanelExt,this.props):this.props.contentType!=o.USERS&&(this.props.contentType==o.APPS?e=preact.createElement(O.components.AppsPanelExt,this.props):this.props.contentType!=o.HELP&&(e=this.props.contentType==o.GENPASS?preact.createElement(O.components.GenPassPanelExt,this.props):this.props.contentType==o.SECURED_ITEMS?preact.createElement(O.components.SecuredItemsPanelExt,this.props):preact.createElement(O.components.WelcomePanelExt,{logoPath:this.props.logoPath}))),preact.createElement("div",{className:this.estimateMainPanelBorder()},e)}},O.components.MainDispWinExt=O.components.MainDispWin,O.components.MainContent=class extends preact.Component{constructor(e,t){super(e,t),this.state=this.props,this.estimateBottomBarBorder=this.estimateBottomBarBorder.bind(this)}estimateBottomBarBorder(){return s?"rightBarBottom remove-bottom-bar-border":"rightBarBottom"}render(){return preact.createElement("div",{className:"leftContent"},preact.createElement("div",{className:"rightBarTop"},preact.createElement(O.components.MainDispWinExt,this.props)),preact.createElement("div",{className:this.estimateBottomBarBorder()},preact.createElement(O.components.BottomBarExt,{cbeVersion:this.props.cbeVersion,cbePrescribeVersion:this.props.userSetting?this.props.userSetting.prescribeVersion:null,cbePrescribeUrl:this.props.userSetting?this.props.userSetting.prescribeURL:null,shellLogoutURL:this.props.userSetting?this.props.userSetting.shellLogoutURL:null,childHost:this.props.childHost,portalHost:this.props.portalHost,connection:this.props.connection,enabledIBEVersionUpdate:this.props.enabledIBEVersionUpdate})))}},O.components.MainContentExt=O.components.MainContent,O.components.PopoverApp=class extends preact.Component{constructor(e,t){super(e,t),this.reRenderApp=this.reRenderApp.bind(this),this.clickSideButton=this.clickSideButton.bind(this),this.onSearchClick=this.onSearchClick.bind(this),this.updatePortalHostname=this.updatePortalHostname.bind(this),this.onToggleChange=this.onToggleChange.bind(this),this.appsFilterChange=this.appsFilterChange.bind(this),this.securedItemsFilterChange=this.securedItemsFilterChange.bind(this),this.appCardClick=this.appCardClick.bind(this),this.alignGenPassTab=this.alignGenPassTab.bind(this),this.props.onSearchClick=this.onSearchClick,this.props.updatePortalHostname=this.updatePortalHostname,this.props.onToggleChange=this.onToggleChange,this.props.appCardClick=this.appCardClick,this.props.appsFilterChange=this.appsFilterChange,this.props.securedItemsFilterChange=this.securedItemsFilterChange,this.props.filterChange=this.appsFilterChange,this.props.setGeneratePasswordConfig=this.setGeneratePasswordConfig,this.props.getGeneratePasswordConfig=this.getGeneratePasswordConfig,this.props.appDefTag&&(this.props.appsFilter=this.props.appDefTag),this.state=this.props}componentWillMount(){var t=this;(async()=>{var e;"false"!==await O.storage.get("resetPortalHostname")&&(-1!==(e="string"==typeof t.props.portalHost?t.props.portalHost:"").toLowerCase().indexOf(".centrify.com")||0===e.length?t.updatePortalHostname(O.brand.defaultPortalHostname,!0,function(){O.storage.set("resetPortalHostname","false")}):O.storage.set("resetPortalHostname","false"))})()}reRenderApp(t){t.appDefTag&&(t.appsFilter=t.appDefTag);for(var e=[],s=0;s<t.apps.length;s++){var r=t.apps[s];4!=r.readiness&&e.push(r)}t.apps=e,t.apps.sort(function(e,t){return e.displayName.localeCompare(t.displayName)}),this.setState(function(e){return t})}onSearchClick(e){this.props.searchWords=e}updatePortalHostname(t,e,s){var r=O.preference.perfKeyEnum.portalHostname;!0===(e=e||!1)?O.storage.set(r,t):O.utils.appClick.setPreference(r,t),O.storage.set(O.preference.perfKeyEnum.associatedChildPod,t),this.props.portalHost=t,this.setState(function(e){return{newPortalHost:t}},function(){s instanceof Function&&s(t)})}clickSideButton(t){var e,s=this;t==o.HELP?(e=O.brand.helpDocURL,O.utils.appClick.openApp(e,!0)):t==o.USERS?(async()=>{var e=`https://${s.state.childHost}/my`;await O.storage.get(O.preference.perfKeyEnum.isLoggedInShellTenant)&&(e=`https://${(await O.storage.get(O.preference.perfKeyEnum.loggedInShellTenantDetails)).masterShellTenant}/idusrportal`),O.utils.appClick.openApp(e,!0)})():this.state.contentType!=t&&this.setState(function(e){return{contentType:t}})}getGeneratePasswordConfig(){return global.storage.get(O.preference.perfKeyEnum.genpassConfig)}setGeneratePasswordConfig(e){var t=O.preference.perfKeyEnum.genpassConfig;O.utils.appClick.setPreference(t,e)}onToggleChange(e,t,s){switch(t?(e.base.children[1].classList.add("toggled"),e.base.children[1].classList.remove("untoggled")):(e.base.children[1].classList.add("untoggled"),e.base.children[1].classList.remove("toggled")),s){case"openAppInNewTab":a=O.preference.perfKeyEnum.openAppInNewTab,O.utils.appClick.setPreference(a,t),this.props.openAppInNewTab=t,this.setState(function(e){return{openAppInNewTab:t}});break;case"enableLCLocal":var r=t?1:-1,a=O.preference.perfKeyEnum.enableLCLocal;O.utils.appClick.setPreference(a,r),this.props.enableLCLocal=r,this.setState(function(e){return{enableLCLocal:r}});break;case"disableBrowserPasswordPrompts":var n=this,i=function(t){a=O.preference.perfKeyEnum.disableBrowserPasswordPrompts,O.utils.appClick.setPreference(a,t),n.props.disableBrowserPasswordPrompts=t,n.setState(function(e){return{disableBrowserPasswordPrompts:t}})};t?O.utils.appClick.requestPermission(i,!0):O.utils.appClick.removePermission(i,!1);break;case"debugMode":a=O.preference.perfKeyEnum.debugMode,O.utils.appClick.setPreference(a,t),this.props.debugMode=t,this.setState(function(e){return{debugMode:t}})}}appsFilterChange(e){this.props.appsFilter=e}securedItemsFilterChange(e){this.props.securedItemsFilter=e}appCardClick(e,t){e="https://"+this.props.childHost+"/uprest/HandleAppClick?appkey="+e;t&&(e+="&markAppVisited=true"),e+="&cbecurversion="+this.props.cbeVersion,this.props.userSetting.enableLandCatch&&(e+="&landCatchCBE="+("1"==this.props.enableLCLocal?"true":"false")),O.utils.appClick.openApp(e,this.props.openAppInNewTab)}alignGenPassTab(){return s?"popover-app align-genpass-tab":"popover-app"}genPassContent(){return preact.createElement("div",{className:this.alignGenPassTab(),style:{height:this.currentPopoverHeight+"px"}},preact.createElement(O.components.MainContentExt,this.state),preact.createElement(O.components.RightBarExt,{clickSideButton:this.clickSideButton,entitlement:this.state.entitlement,hasWpmEntitlement:this.state.hasWpmEntitlement,contentType:this.state.contentType,connection:this.state.connection,isSecuredItemsEnabled:this.props.isSecuredItemsEnabled}))}wrappedGenPassContent(){return preact.createElement("div",{className:"absolute-position"},this.genPassContent())}render(){return this.state.contentType==o.WELCOME||this.state.contentType==o.ERROR?(this.currentPopoverHeight=172,this.currentPopoverWidth=349):this.currentPopoverHeight=430,document.body.style.height=this.currentPopoverHeight+"px",document.documentElement.style.height=this.currentPopoverHeight+"px",O.appInstance=this,s?this.wrappedGenPassContent():this.genPassContent()}},O.components.PopoverAppExt=O.components.PopoverApp}.call(_idaptivePopOverGlobal=void 0===_idaptivePopOverGlobal?{}:_idaptivePopOverGlobal);