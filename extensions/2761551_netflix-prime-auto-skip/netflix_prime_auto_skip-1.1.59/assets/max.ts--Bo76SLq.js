import{c as l,s as u,P as d}from"./shared-functions-50IQFOKT.js";import{s}from"./content-script-D7YBjZpd.js";import{u as S,r as p,d as f}from"./storeTypes-CGrbvTi_.js";import"./chunk-QIZ4XBKF-C_NfkaUr.js";import"./_commonjsHelpers-CqkleIqs.js";const{data:n,promise:m}=S("settings",f),g=p(1);let a=0;const B={attributes:!0,childList:!0,subtree:!0};async function y(){console.log("%cStreaming enhanced","color: #00aeef;font-size: 2em;"),console.log("Settings",n.value)}async function b(){await m,y(),u(d.HBO),O.observe(document,B)}async function k(e,t,o){typeof e=="number"&&typeof t=="number"&&t>e&&(console.log(o,t-e),n.value.Statistics[o]+=t-e,s("increaseBadge",{},"background"))}const O=new MutationObserver(h);async function h(){var o,i,c,r;const e=document.querySelector("video"),t=e==null?void 0:e.currentTime;(o=n.value.HBO)!=null&&o.skipIntro&&H(e,t),(i=n.value.HBO)!=null&&i.skipCredits&&v(t),(c=n.value.HBO)!=null&&c.watchCredits&&C(e),(r=n.value.HBO)!=null&&r.speedSlider&&x(e)}function H(e,t){const o=document.querySelector('[class*="SkipButton-Beam-Web-Ent"]');o!=null&&o.checkVisibility({visibilityProperty:!0})&&(o.click(),console.log("Intro skipped",o),setTimeout(function(){k(t,e==null?void 0:e.currentTime,"IntroTimeSkipped")},600))}function v(e){const t=document.querySelector('[class*="UpNextButton-Beam-Web-Ent"]');t&&a<e-1&&(a=e,t.click(),n.value.Statistics.SegmentsSkipped++,s("increaseBadge",{},"background"),console.log("Credits skipped",t))}function C(e){let t=document.querySelector('[class*="DismissButton-Beam-Web-Ent"]');t&&(t.click(),n.value.Statistics.SegmentsSkipped++,s("increaseBadge",{},"background"),console.log("Watched Credits",t)),t=document.querySelector(".player-shrink-transition-enter-done"),e&&t&&(e.click(),n.value.Statistics.SegmentsSkipped++,s("increaseBadge",{},"background"),console.log("Watched Credits",t))}const q="height: 1em;background: rgb(221, 221, 221);display: none;width:200px;",W="font-size: 1.5em;color:#b2b2b2;",w="height:48px;display: flex;align-items: center;";async function x(e){if(!document.querySelector("#videoSpeedSlider")){const o=document.querySelector('[class*="ControlsFooterBottomRight-Beam-Web-Ent"]');o&&l(e,g,o,q,W,w)}}b();
