import{j as p,c as A}from"./cplx-DEt7CUyc.js";import{r as T}from"./cplx-M4JPizzD.js";import{W as te}from"./cplx-CejnDNPm.js";import{a as U,t as ne,s as oe,u as ie,P as re,b as ae}from"./cplx-DSnlyBAv.js";import{c as D,m as R,b as N,d as se,a as K,q as le,s as ge,ac as ue,ad as ce,ae as de,af as pe,ag as he,a0 as X,J as me,al as H,M as Ee,$ as V,a3 as Oe,k as fe,a4 as Te,am as Pe,an as Ie,a5 as $,ao as F,ap as W,C as b,t as Ce,u as ye,j as Me,r as _,a6 as Re,a7 as be,K as we,R as G,ak as ve,aq as Ne,Y as Se,v as S,F as ke,a9 as Le,aj as _e,w as Ae,x as De,y as j,z as xe,A as He}from"./cplx-CXGk_GMP.js";import{g as Ge,a as B,b as Ue}from"./cplx-B19A3gYQ.js";const[Ve,k]=D({name:"MenuContext",hookName:"useMenuContext",providerName:"<MenuProvider />",strict:!1}),[Fe,dt]=D({name:"MenuItemContext",hookName:"useMenuItemContext",providerName:"<MenuItemProvider />"}),q=T.forwardRef((t,o)=>{const e=k(),n=U(),r=R(e.getContentProps(),n.getPresenceProps(),t);return n.unmounted?null:p.jsx(N.div,{...r,ref:se(n.ref,o)})});q.displayName="MenuContent";const J=T.forwardRef((t,o)=>{const[e,n]=K()(t,["closeOnSelect","disabled","value","valueText"]),r=k(),s=R(r.getItemProps(e),n),l=r.getItemState(e);return p.jsx(Fe,{value:l,children:p.jsx(N.div,{...s,ref:o})})});J.displayName="MenuItem";const Q=T.forwardRef((t,o)=>{const e=k(),n=R(e.getPositionerProps(),t);return U().unmounted?null:p.jsx(N.div,{...n,ref:o})});Q.displayName="MenuPositioner";const We=t=>{const o=T.useRef(t),e=T.useRef(!1);T.useEffect(()=>{o.current=t}),T.useEffect(()=>{e.current!==!0&&(e.current=!0,o.current())},[])};var v=(t,o)=>({x:t,y:o});function je(t){const{x:o,y:e,width:n,height:r}=t,s=o+n/2,l=e+r/2;return{x:o,y:e,width:n,height:r,minX:o,minY:e,maxX:o+n,maxY:e+r,midX:s,midY:l,center:v(s,l)}}function Be(t){const o=v(t.minX,t.minY),e=v(t.maxX,t.minY),n=v(t.maxX,t.maxY),r=v(t.minX,t.maxY);return{top:o,right:e,bottom:n,left:r}}function Ye(t,o){const e=je(t),{top:n,right:r,left:s,bottom:l}=Be(e),[u]=o.split("-");return{top:[s,n,r,l],right:[n,r,l,s],bottom:[n,s,l,r],left:[r,n,s,l]}[u]}function Ke(t,o){const{x:e,y:n}=o;let r=!1;for(let s=0,l=t.length-1;s<t.length;l=s++){const u=t[s].x,c=t[s].y,O=t[l].x,I=t[l].y;c>n!=I>n&&e<(O-u)*(n-c)/(I-c)+u&&(r=!r)}return r}var Xe=le("menu").parts("arrow","arrowTip","content","contextTrigger","indicator","item","itemGroup","itemGroupLabel","itemIndicator","itemText","positioner","separator","trigger","triggerItem"),m=Xe.build(),a=ge({getTriggerId:t=>{var o;return((o=t.ids)==null?void 0:o.trigger)??`menu:${t.id}:trigger`},getContextTriggerId:t=>{var o;return((o=t.ids)==null?void 0:o.contextTrigger)??`menu:${t.id}:ctx-trigger`},getContentId:t=>{var o;return((o=t.ids)==null?void 0:o.content)??`menu:${t.id}:content`},getArrowId:t=>{var o;return((o=t.ids)==null?void 0:o.arrow)??`menu:${t.id}:arrow`},getPositionerId:t=>{var o;return((o=t.ids)==null?void 0:o.positioner)??`menu:${t.id}:popper`},getGroupId:(t,o)=>{var e,n;return((n=(e=t.ids)==null?void 0:e.group)==null?void 0:n.call(e,o))??`menu:${t.id}:group:${o}`},getGroupLabelId:(t,o)=>{var e,n;return((n=(e=t.ids)==null?void 0:e.groupLabel)==null?void 0:n.call(e,o))??`menu:${t.id}:group-label:${o}`},getContentEl:t=>a.getById(t,a.getContentId(t)),getPositionerEl:t=>a.getById(t,a.getPositionerId(t)),getTriggerEl:t=>a.getById(t,a.getTriggerId(t)),getHighlightedItemEl:t=>t.highlightedValue?a.getById(t,t.highlightedValue):null,getArrowEl:t=>a.getById(t,a.getArrowId(t)),getElements:t=>{const e=`[role^="menuitem"][data-ownedby=${CSS.escape(a.getContentId(t))}]:not([data-disabled])`;return ue(a.getContentEl(t),e)},getFirstEl:t=>ce(a.getElements(t)),getLastEl:t=>de(a.getElements(t)),getNextEl:(t,o)=>pe(a.getElements(t),t.highlightedValue,o??t.loopFocus),getPrevEl:(t,o)=>he(a.getElements(t),t.highlightedValue,o??t.loopFocus),getElemByKey:(t,o)=>X(a.getElements(t),{state:t.typeaheadState,key:o,activeId:t.highlightedValue}),isTargetDisabled:t=>me(t)&&(t.dataset.disabled===""||t.hasAttribute("disabled")),isTriggerItem:t=>{var o;return!!((o=t==null?void 0:t.getAttribute("role"))!=null&&o.startsWith("menuitem"))&&!!(t!=null&&t.hasAttribute("aria-controls"))},getOptionFromItemEl(t){return{id:t.id,name:t.dataset.name,value:t.dataset.value,valueText:t.dataset.valueText,type:t.dataset.type}}});function $e(t,o,e){const n=t.context.isSubmenu,r=t.context.isTypingAhead,s=t.context.composite,l=t.hasTag("open"),u=Ge({...t.context.positioning,placement:t.context.anchorPoint?"bottom":t.context.currentPlacement});function c(i){return{disabled:!!i.disabled,highlighted:t.context.highlightedValue===i.value}}function O(i){const g=i.valueText??i.value;return{...i,id:i.value,valueText:g}}function I(i){return{...c(O(i)),checked:!!i.checked}}function x(i){const{value:g,closeOnSelect:C,valueText:P}=i,h=c(i);return e.element({...m.item.attrs,id:g,role:"menuitem","aria-disabled":h.disabled,"data-disabled":b(h.disabled),"data-ownedby":a.getContentId(t.context),"data-highlighted":b(h.highlighted),"data-valuetext":P,onDragStart(d){d.currentTarget.matches("a[href]")&&d.preventDefault()},onPointerMove(d){if(h.disabled||d.pointerType!=="mouse")return;const E=d.currentTarget;h.highlighted||o({type:"ITEM_POINTERMOVE",id:g,target:E,closeOnSelect:C})},onPointerLeave(d){if(h.disabled||d.pointerType!=="mouse"||!t.previousEvent.type.includes("POINTER"))return;const y=d.currentTarget;o({type:"ITEM_POINTERLEAVE",id:g,target:y,closeOnSelect:C})},onPointerDown(d){if(h.disabled)return;const E=d.currentTarget;o({type:"ITEM_POINTERDOWN",target:E,id:g,closeOnSelect:C})},onClick(d){if(F(d)||W(d)||h.disabled)return;const E=d.currentTarget;o({type:"ITEM_CLICK",target:E,id:g,closeOnSelect:C})}})}return{highlightedValue:t.context.highlightedValue,open:l,setOpen(i){i!==l&&o(i?"OPEN":"CLOSE")},setHighlightedValue(i){o({type:"HIGHLIGHTED.SET",id:i})},setParent(i){o({type:"PARENT.SET",value:i,id:i.state.context.id})},setChild(i){o({type:"CHILD.SET",value:i,id:i.state.context.id})},reposition(i={}){o({type:"POSITIONING.SET",options:i})},getContextTriggerProps(){return e.element({...m.contextTrigger.attrs,dir:t.context.dir,id:a.getContextTriggerId(t.context),onPointerDown(i){if(i.pointerType==="mouse")return;const g=H(i);o({type:"CONTEXT_MENU_START",point:g})},onPointerCancel(i){i.pointerType!=="mouse"&&o("CONTEXT_MENU_CANCEL")},onPointerMove(i){i.pointerType!=="mouse"&&o("CONTEXT_MENU_CANCEL")},onPointerUp(i){i.pointerType!=="mouse"&&o("CONTEXT_MENU_CANCEL")},onContextMenu(i){const g=H(i);o({type:"CONTEXT_MENU",point:g}),i.preventDefault()},style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none"}})},getTriggerItemProps(i){return R(x({value:i.getTriggerProps().id}),i.getTriggerProps())},getTriggerProps(){return e.button({...n?m.triggerItem.attrs:m.trigger.attrs,"data-placement":t.context.currentPlacement,type:"button",dir:t.context.dir,id:a.getTriggerId(t.context),"data-uid":t.context.id,"aria-haspopup":s?"menu":"dialog","aria-controls":a.getContentId(t.context),"aria-expanded":l||void 0,"data-state":l?"open":"closed",onPointerMove(i){i.pointerType!=="mouse"||a.isTargetDisabled(i.currentTarget)||!n||o({type:"TRIGGER_POINTERMOVE",target:i.currentTarget})},onPointerLeave(i){if(a.isTargetDisabled(i.currentTarget)||i.pointerType!=="mouse"||!n)return;const g=H(i);o({type:"TRIGGER_POINTERLEAVE",target:i.currentTarget,point:g})},onPointerDown(i){a.isTargetDisabled(i.currentTarget)||Ee(i)||i.preventDefault()},onClick(i){i.defaultPrevented||a.isTargetDisabled(i.currentTarget)||o({type:"TRIGGER_CLICK",target:i.currentTarget})},onBlur(){o("TRIGGER_BLUR")},onFocus(){o("TRIGGER_FOCUS")},onKeyDown(i){if(i.defaultPrevented)return;const g={ArrowDown(){o("ARROW_DOWN")},ArrowUp(){o("ARROW_UP")},Enter(){o({type:"ARROW_DOWN",src:"enter"})},Space(){o({type:"ARROW_DOWN",src:"space"})}},C=V(i,t.context),P=g[C];P&&(i.preventDefault(),P(i))}})},getIndicatorProps(){return e.element({...m.indicator.attrs,dir:t.context.dir,"data-state":l?"open":"closed"})},getPositionerProps(){return e.element({...m.positioner.attrs,dir:t.context.dir,id:a.getPositionerId(t.context),style:u.floating})},getArrowProps(){return e.element({id:a.getArrowId(t.context),...m.arrow.attrs,dir:t.context.dir,style:u.arrow})},getArrowTipProps(){return e.element({...m.arrowTip.attrs,dir:t.context.dir,style:u.arrowTip})},getContentProps(){return e.element({...m.content.attrs,id:a.getContentId(t.context),"aria-label":t.context["aria-label"],hidden:!l,"data-state":l?"open":"closed",role:s?"menu":"dialog",tabIndex:0,dir:t.context.dir,"aria-activedescendant":t.context.highlightedValue??void 0,"aria-labelledby":a.getTriggerId(t.context),"data-placement":t.context.currentPlacement,onPointerEnter(i){i.pointerType==="mouse"&&o("MENU_POINTERENTER")},onKeyDown(i){if(i.defaultPrevented||!Oe(i))return;const g=fe(i);if(!((g==null?void 0:g.closest("[role=menu]"))===i.currentTarget||g===i.currentTarget))return;if(i.key==="Tab"&&!Te(i)){i.preventDefault();return}const P=a.getHighlightedItemEl(t.context),h={ArrowDown(){o("ARROW_DOWN")},ArrowUp(){o("ARROW_UP")},ArrowLeft(){o("ARROW_LEFT")},ArrowRight(){o("ARROW_RIGHT")},Enter(){o("ENTER"),_e(P)&&t.context.navigate({value:t.context.highlightedValue,node:P})},Space(y){var L;r?o({type:"TYPEAHEAD",key:y.key}):(L=h.Enter)==null||L.call(h,y)},Home(){o("HOME")},End(){o("END")}},d=V(i,{dir:t.context.dir}),E=h[d];if(E){E(i),i.stopPropagation(),i.preventDefault();return}t.context.typeahead&&Pe(i)&&(Ie(i)||$(g)||(o({type:"TYPEAHEAD",key:i.key}),i.preventDefault()))}})},getSeparatorProps(){return e.element({...m.separator.attrs,role:"separator",dir:t.context.dir,"aria-orientation":"horizontal"})},getItemState:c,getItemProps:x,getOptionItemState:I,getOptionItemProps(i){const{type:g,disabled:C,onCheckedChange:P,closeOnSelect:h}=i,d=O(i),E=I(i);return{...x(d),...e.element({"data-type":g,...m.item.attrs,dir:t.context.dir,"data-value":d.value,role:`menuitem${g}`,"aria-checked":!!E.checked,"data-state":E.checked?"checked":"unchecked",onClick(y){if(C||F(y)||W(y))return;const L=y.currentTarget;o({type:"ITEM_CLICK",target:L,option:d,closeOnSelect:h}),P==null||P(!E.checked)}})}},getItemIndicatorProps(i){const g=I(i);return e.element({...m.itemIndicator.attrs,dir:t.context.dir,"data-disabled":b(g.disabled),"data-highlighted":b(g.highlighted),"data-state":g.checked?"checked":"unchecked",hidden:!g.checked})},getItemTextProps(i){const g=I(i);return e.element({...m.itemText.attrs,dir:t.context.dir,"data-disabled":b(g.disabled),"data-highlighted":b(g.highlighted),"data-state":g.checked?"checked":"unchecked"})},getItemGroupLabelProps(i){return e.element({id:a.getGroupLabelId(t.context,i.htmlFor),dir:t.context.dir,...m.itemGroupLabel.attrs})},getItemGroupProps(i){return e.element({id:a.getGroupId(t.context,i.id),...m.itemGroup.attrs,dir:t.context.dir,"aria-labelledby":a.getGroupLabelId(t.context,i.id),role:"group"})}}}var{not:f,and:w,or:qe}=ke;function Je(t){const o=Ce(t);return ye({id:"menu",initial:o.open?"open":"idle",context:{highlightedValue:null,loopFocus:!1,anchorPoint:null,closeOnSelect:!0,typeahead:!0,composite:!0,navigate(e){ve(e.node)},...o,positioning:{placement:"bottom-start",gutter:8,...o.positioning},intentPolygon:null,parent:null,lastHighlightedValue:null,children:Ne(G({})),suspendPointer:!1,typeaheadState:X.defaultOptions},computed:{isSubmenu:e=>e.parent!==null,isRtl:e=>e.dir==="rtl",isTypingAhead:e=>e.typeaheadState.keysSoFar!==""},watch:{isSubmenu:"setSubmenuPlacement",anchorPoint:"reposition",open:"toggleVisibility"},on:{"PARENT.SET":{actions:"setParentMenu"},"CHILD.SET":{actions:"setChildMenu"},OPEN:[{guard:"isOpenControlled",actions:"invokeOnOpen"},{target:"open",actions:"invokeOnOpen"}],OPEN_AUTOFOCUS:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{internal:!0,target:"open",actions:["highlightFirstItem","invokeOnOpen"]}],CLOSE:[{guard:"isOpenControlled",actions:"invokeOnClose"},{target:"closed",actions:"invokeOnClose"}],"HIGHLIGHTED.RESTORE":{actions:"restoreHighlightedItem"},"HIGHLIGHTED.SET":{actions:"setHighlightedItem"}},states:{idle:{tags:["closed"],on:{"CONTROLLED.OPEN":"open","CONTROLLED.CLOSE":"closed",CONTEXT_MENU_START:{target:"opening:contextmenu",actions:"setAnchorPoint"},CONTEXT_MENU:[{guard:"isOpenControlled",actions:["setAnchorPoint","invokeOnOpen"]},{target:"open",actions:["setAnchorPoint","invokeOnOpen"]}],TRIGGER_CLICK:[{guard:"isOpenControlled",actions:"invokeOnOpen"},{target:"open",actions:"invokeOnOpen"}],TRIGGER_FOCUS:{guard:f("isSubmenu"),target:"closed"},TRIGGER_POINTERMOVE:{guard:"isSubmenu",target:"opening"}}},"opening:contextmenu":{tags:["closed"],after:{LONG_PRESS_DELAY:[{guard:"isOpenControlled",actions:"invokeOnOpen"},{target:"open",actions:"invokeOnOpen"}]},on:{"CONTROLLED.OPEN":"open","CONTROLLED.CLOSE":"closed",CONTEXT_MENU_CANCEL:[{guard:"isOpenControlled",actions:"invokeOnClose"},{target:"closed",actions:"invokeOnClose"}]}},opening:{tags:["closed"],after:{SUBMENU_OPEN_DELAY:[{guard:"isOpenControlled",actions:"invokeOnOpen"},{target:"open",actions:"invokeOnOpen"}]},on:{"CONTROLLED.OPEN":"open","CONTROLLED.CLOSE":"closed",BLUR:[{guard:"isOpenControlled",actions:"invokeOnClose"},{target:"closed",actions:"invokeOnClose"}],TRIGGER_POINTERLEAVE:[{guard:"isOpenControlled",actions:"invokeOnClose"},{target:"closed",actions:"invokeOnClose"}]}},closing:{tags:["open"],activities:["trackPointerMove","trackInteractOutside"],after:{SUBMENU_CLOSE_DELAY:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["focusParentMenu","restoreParentHighlightedItem","invokeOnClose"]}]},on:{"CONTROLLED.OPEN":"open","CONTROLLED.CLOSE":{target:"closed",actions:["focusParentMenu","restoreParentHighlightedItem"]},MENU_POINTERENTER:{target:"open",actions:"clearIntentPolygon"},POINTER_MOVED_AWAY_FROM_SUBMENU:[{guard:"isOpenControlled",actions:"invokeOnClose"},{target:"closed",actions:["focusParentMenu","restoreParentHighlightedItem"]}]}},closed:{tags:["closed"],entry:["clearHighlightedItem","focusTrigger","resumePointer"],on:{"CONTROLLED.OPEN":[{guard:qe("isOpenAutoFocusEvent","isArrowDownEvent"),target:"open",actions:"highlightFirstItem"},{guard:"isArrowUpEvent",target:"open",actions:"highlightLastItem"},{target:"open"}],CONTEXT_MENU_START:{target:"opening:contextmenu",actions:"setAnchorPoint"},CONTEXT_MENU:[{guard:"isOpenControlled",actions:["setAnchorPoint","invokeOnOpen"]},{target:"open",actions:["setAnchorPoint","invokeOnOpen"]}],TRIGGER_CLICK:[{guard:"isOpenControlled",actions:"invokeOnOpen"},{target:"open",actions:"invokeOnOpen"}],TRIGGER_POINTERMOVE:{guard:"isTriggerItem",target:"opening"},TRIGGER_BLUR:"idle",ARROW_DOWN:[{guard:"isOpenControlled",actions:"invokeOnOpen"},{target:"open",actions:["highlightFirstItem","invokeOnOpen"]}],ARROW_UP:[{guard:"isOpenControlled",actions:"invokeOnOpen"},{target:"open",actions:["highlightLastItem","invokeOnOpen"]}]}},open:{tags:["open"],activities:["trackInteractOutside","trackPositioning","scrollToHighlightedItem"],entry:["focusMenu","resumePointer"],on:{"CONTROLLED.CLOSE":[{target:"closed",guard:"isArrowLeftEvent",actions:["focusParentMenu"]},{target:"closed"}],TRIGGER_CLICK:[{guard:w(f("isTriggerItem"),"isOpenControlled"),actions:"invokeOnClose"},{guard:f("isTriggerItem"),target:"closed",actions:"invokeOnClose"}],ARROW_UP:{actions:["highlightPrevItem","focusMenu"]},ARROW_DOWN:{actions:["highlightNextItem","focusMenu"]},ARROW_LEFT:[{guard:w("isSubmenu","isOpenControlled"),actions:"invokeOnClose"},{guard:"isSubmenu",target:"closed",actions:["focusParentMenu","invokeOnClose"]}],HOME:{actions:["highlightFirstItem","focusMenu"]},END:{actions:["highlightLastItem","focusMenu"]},ARROW_RIGHT:{guard:"isTriggerItemHighlighted",actions:"openSubmenu"},ENTER:[{guard:"isTriggerItemHighlighted",actions:"openSubmenu"},{actions:"clickHighlightedItem"}],ITEM_POINTERMOVE:[{guard:f("suspendPointer"),actions:["setHighlightedItem","focusMenu"]},{actions:"setLastHighlightedItem"}],ITEM_POINTERLEAVE:{guard:w(f("suspendPointer"),f("isTriggerItem")),actions:"clearHighlightedItem"},ITEM_CLICK:[{guard:w(f("isTriggerItemHighlighted"),f("isHighlightedItemEditable"),"closeOnSelect","isOpenControlled"),actions:["invokeOnSelect","setOptionState","closeRootMenu","invokeOnClose"]},{guard:w(f("isTriggerItemHighlighted"),f("isHighlightedItemEditable"),"closeOnSelect"),target:"closed",actions:["invokeOnSelect","setOptionState","closeRootMenu","invokeOnClose"]},{guard:w(f("isTriggerItemHighlighted"),f("isHighlightedItemEditable")),actions:["invokeOnSelect","setOptionState"]},{actions:"setHighlightedItem"}],TRIGGER_POINTERLEAVE:{target:"closing",actions:"setIntentPolygon"},ITEM_POINTERDOWN:{actions:"setHighlightedItem"},TYPEAHEAD:{actions:"highlightMatchedItem"},FOCUS_MENU:{actions:"focusMenu"},"POSITIONING.SET":{actions:"reposition"}}}}},{delays:{LONG_PRESS_DELAY:700,SUBMENU_OPEN_DELAY:100,SUBMENU_CLOSE_DELAY:100},guards:{closeOnSelect:(e,n)=>!!((n==null?void 0:n.closeOnSelect)??e.closeOnSelect),isTriggerItem:(e,n)=>a.isTriggerItem(n.target),isTriggerItemHighlighted:(e,n)=>{const r=n.target??a.getHighlightedItemEl(e);return!!(r!=null&&r.hasAttribute("aria-controls"))},isSubmenu:e=>e.isSubmenu,suspendPointer:e=>e.suspendPointer,isHighlightedItemEditable:e=>$(a.getHighlightedItemEl(e)),isWithinPolygon:(e,n)=>e.intentPolygon?Ke(e.intentPolygon,n.point):!1,isOpenControlled:e=>!!e["open.controlled"],isArrowLeftEvent:(e,n)=>{var r;return((r=n.previousEvent)==null?void 0:r.type)==="ARROW_LEFT"},isArrowUpEvent:(e,n)=>{var r;return((r=n.previousEvent)==null?void 0:r.type)==="ARROW_UP"},isArrowDownEvent:(e,n)=>{var r;return((r=n.previousEvent)==null?void 0:r.type)==="ARROW_DOWN"},isOpenAutoFocusEvent:(e,n)=>{var r;return((r=n.previousEvent)==null?void 0:r.type)==="OPEN_AUTOFOCUS"}},activities:{trackPositioning(e){if(e.anchorPoint)return;e.currentPlacement=e.positioning.placement;const n=()=>a.getPositionerEl(e);return B(a.getTriggerEl(e),n,{...e.positioning,defer:!0,onComplete(r){e.currentPlacement=r.placement}})},trackInteractOutside(e,n,{send:r}){const s=()=>a.getContentEl(e);let l=!0;return ne(s,{defer:!0,exclude:[a.getTriggerEl(e)],onInteractOutside:e.onInteractOutside,onFocusOutside:e.onFocusOutside,onEscapeKeyDown(u){var c;(c=e.onEscapeKeyDown)==null||c.call(e,u),e.isSubmenu&&u.preventDefault(),Y(e)},onPointerDownOutside(u){var c;l=!u.detail.focusable,(c=e.onPointerDownOutside)==null||c.call(e,u)},onDismiss(){r({type:"CLOSE",src:"interact-outside",restoreFocus:l})}})},trackPointerMove(e,n,{guards:r,send:s}){const{isWithinPolygon:l}=r;e.parent.state.context.suspendPointer=!0;const u=a.getDoc(e);return Me(u,"pointermove",c=>{const O={x:c.clientX,y:c.clientY};l(e,{point:O})||(s("POINTER_MOVED_AWAY_FROM_SUBMENU"),e.parent.state.context.suspendPointer=!1)})},scrollToHighlightedItem(e,n,{getState:r}){const s=()=>{if(r().event.type.startsWith("ITEM_POINTER"))return;const c=a.getHighlightedItemEl(e),O=a.getContentEl(e);Le(c,{rootEl:O,block:"nearest"})};return _(()=>s()),Re(()=>a.getContentEl(e),{defer:!0,attributes:["aria-activedescendant"],callback:s})}},actions:{setAnchorPoint(e,n){e.anchorPoint=n.point},setSubmenuPlacement(e){e.isSubmenu&&(e.positioning.placement=e.isRtl?"left-start":"right-start",e.positioning.gutter=0)},reposition(e,n){const r=()=>a.getPositionerEl(e),s=e.anchorPoint?()=>({width:0,height:0,...e.anchorPoint}):void 0;B(a.getTriggerEl(e),r,{...e.positioning,defer:!0,getAnchorRect:s,...n.options??{},listeners:!1,onComplete(l){e.currentPlacement=l.placement}})},setOptionState(e,n){if(!n.option)return;const{checked:r,onCheckedChange:s,type:l}=n.option;l==="radio"?s==null||s(!0):l==="checkbox"&&(s==null||s(!r))},clickHighlightedItem(e,n){const r=a.getHighlightedItemEl(e);!r||r.dataset.disabled||queueMicrotask(()=>r.click())},setIntentPolygon(e,n){const r=a.getContentEl(e),s=e.currentPlacement;if(!r||!s)return;const l=r.getBoundingClientRect(),u=Ye(l,s);if(!u)return;const O=Ue(s)==="right"?-5:5;e.intentPolygon=[{...n.point,x:n.point.x+O},...u]},clearIntentPolygon(e){e.intentPolygon=null},resumePointer(e){e.parent&&(e.parent.state.context.suspendPointer=!1)},setHighlightedItem(e,n){M.highlighted(e,n.id)},clearHighlightedItem(e){M.highlighted(e,null)},focusMenu(e){_(()=>{const n=a.getContentEl(e),r=be({root:n,enabled:!we(n,a.getActiveElement(e)),filter(s){var l;return!((l=s.role)!=null&&l.startsWith("menuitem"))}});r==null||r.focus({preventScroll:!0})})},highlightFirstItem(e){(a.getContentEl(e)?queueMicrotask:_)(()=>{const r=a.getFirstEl(e);r&&M.highlighted(e,r.id)})},highlightLastItem(e){(a.getContentEl(e)?queueMicrotask:_)(()=>{const r=a.getLastEl(e);r&&M.highlighted(e,r.id)})},highlightNextItem(e,n){const r=a.getNextEl(e,n.loop);M.highlighted(e,(r==null?void 0:r.id)??null)},highlightPrevItem(e,n){const r=a.getPrevEl(e,n.loop);M.highlighted(e,(r==null?void 0:r.id)??null)},invokeOnSelect(e){var n;e.highlightedValue&&((n=e.onSelect)==null||n.call(e,{value:e.highlightedValue}))},focusTrigger(e,n){e.isSubmenu||e.anchorPoint||n.restoreFocus===!1||queueMicrotask(()=>{var r;return(r=a.getTriggerEl(e))==null?void 0:r.focus({preventScroll:!0})})},highlightMatchedItem(e,n){const r=a.getElemByKey(e,n.key);r&&M.highlighted(e,r.id)},setParentMenu(e,n){e.parent=G(n.value)},setChildMenu(e,n){e.children[n.id]=G(n.value)},closeRootMenu(e){Y(e)},openSubmenu(e){const n=a.getHighlightedItemEl(e),r=n==null?void 0:n.getAttribute("data-uid"),s=r?e.children[r]:null;s==null||s.send("OPEN_AUTOFOCUS")},focusParentMenu(e){var n;(n=e.parent)==null||n.send("FOCUS_MENU")},setLastHighlightedItem(e,n){e.lastHighlightedValue=n.id},restoreHighlightedItem(e){e.lastHighlightedValue&&(M.highlighted(e,e.lastHighlightedValue),e.lastHighlightedValue=null)},restoreParentHighlightedItem(e){var n;(n=e.parent)==null||n.send("HIGHLIGHTED.RESTORE")},invokeOnOpen(e){var n;(n=e.onOpenChange)==null||n.call(e,{open:!0})},invokeOnClose(e){var n;(n=e.onOpenChange)==null||n.call(e,{open:!1})},toggleVisibility(e,n,{send:r}){r({type:e.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:n})}}})}function Y(t){let o=t.parent;for(;o&&o.state.context.isSubmenu;)o=o.state.context.parent;o==null||o.send("CLOSE")}var M={highlighted(t,o){var e;Se(t.highlightedValue,o)||(t.highlightedValue=o,(e=t.onHighlightChange)==null||e.call(t,{highlightedValue:o}))}};S()(["anchorPoint","aria-label","closeOnSelect","composite","dir","getRootNode","highlightedValue","id","ids","loopFocus","navigate","onEscapeKeyDown","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onSelect","open.controlled","open","positioning","typeahead"]);S()(["closeOnSelect","disabled","value","valueText"]);S()(["htmlFor"]);S()(["id"]);S()(["disabled","valueText","closeOnSelect","type","value","checked","onCheckedChange"]);const Qe=(t={})=>{const{getRootNode:o}=Ae(),{dir:e}=De(),n={id:T.useId(),dir:e,getRootNode:o,open:t.defaultOpen,"open.controlled":t.open!==void 0,...t},r={...n,onOpenChange:j(t.onOpenChange),onSelect:j(t.onSelect)},[s,l,u]=xe(Je(n),{context:r});return{api:$e(s,l,He),machine:u}},[Ze,ze]=D({name:"MenuMachineContext",hookName:"useMenuMachineContext",providerName:"<MenuMachineProvider />",strict:!1}),[et,tt]=D({name:"MenuMachineContext",hookName:"useMenuMachineContext",providerName:"<MenuMachineProvider />",strict:!1}),Z=t=>{const[o,e]=oe(t),[n,r]=K()(e,["anchorPoint","aria-label","closeOnSelect","composite","defaultOpen","highlightedValue","id","ids","loopFocus","navigate","onEscapeKeyDown","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onSelect","open","positioning","typeahead"]),s=k(),l=ze(),{api:u,machine:c}=Qe(n),O=ie(R({present:u.open},o));We(()=>{l&&s&&(s.setChild(c),u.setParent(l))});const I=T.useCallback(()=>s==null?void 0:s.getTriggerItemProps(u),[u,s]);return p.jsx(et,{value:I,children:p.jsx(Ze,{value:c,children:p.jsx(Ve,{value:u,children:p.jsx(re,{value:O,...r})})})})},z=T.forwardRef((t,o)=>{const e=k(),n=U(),r=R({...e.getTriggerProps(),"aria-controls":n.unmounted?void 0:e.getTriggerProps()["aria-controls"]},t);return p.jsx(N.button,{...r,ref:o})});z.displayName="MenuTrigger";const ee=T.forwardRef((t,o)=>{const e=tt(),n=R((e==null?void 0:e())??{},t);return p.jsx(N.div,{...n,ref:o})});ee.displayName="MenuTriggerItem";function pt({...t}){return p.jsx(Z,{unmountOnExit:!1,lazyMount:!0,...t})}const nt=({className:t,...o})=>p.jsx(z,{className:A(t),...o});nt.displayName="DropdownMenuTrigger";const ot=({portal:t=!0,className:o,...e})=>{const n=t?ae:T.Fragment;return p.jsx(n,{children:p.jsx(Q,{children:p.jsx(q,{className:A("tw-z-50 tw-min-w-[8rem] tw-overflow-hidden tw-rounded-md tw-border tw-border-border/50 tw-bg-popover tw-p-1 tw-text-popover-foreground tw-shadow-md focus-visible:tw-outline-none","data-[state=open]:tw-animate-in data-[state=open]:tw-fade-in data-[state=open]:tw-zoom-in-95","data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out data-[state=closed]:tw-zoom-out-95","data-[placement^=top]:tw-slide-in-from-bottom-2","data-[placement^=bottom]:tw-slide-in-from-top-2","data-[placement^=left]:tw-slide-in-from-right-2","data-[placement^=right]:tw-slide-in-from-left-2",o),...e})})})};ot.displayName="DropdownMenuContent";const it=({className:t,inset:o,...e})=>p.jsx(J,{className:A("tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none tw-transition-colors focus:tw-bg-primary-foreground focus:tw-text-primary data-[disabled]:tw-pointer-events-none data-[highlighted]:tw-bg-primary-foreground data-[highlighted]:tw-text-primary data-[disabled]:tw-opacity-50",o&&"tw-pl-8",t),...e});it.displayName="DropdownMenuItem";const ht=({...t})=>p.jsx(Z,{unmountOnExit:!1,lazyMount:!0,positioning:{placement:"right-start",offset:{mainAxis:8}},...t}),rt=({className:t,children:o,...e})=>p.jsxs(ee,{className:A("tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-justify-between tw-rounded-sm tw-text-sm tw-outline-none tw-transition-colors focus:tw-bg-primary-foreground focus:tw-text-primary data-[disabled]:tw-pointer-events-none data-[highlighted]:tw-bg-primary-foreground data-[highlighted]:tw-text-primary data-[disabled]:tw-opacity-50",t),...e,children:[o,p.jsx(te,{className:"tw-ml-2 tw-size-4"})]});rt.displayName="DropdownMenuSubTrigger";export{pt as D,nt as a,ot as b,it as c,ht as d,rt as e};
