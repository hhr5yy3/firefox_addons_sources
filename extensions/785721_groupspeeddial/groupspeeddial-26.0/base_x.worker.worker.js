(()=>{"use strict";const r=function(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let r=0;r<e.length;r++)e[r]=255;for(let t=0;t<r.length;t++){const n=r.charAt(t),o=n.charCodeAt(0);if(255!==e[o])throw new TypeError(n+" is ambiguous");e[o]=t}const t=r.length,n=r.charAt(0),o=Math.log(t)/Math.log(256),a=Math.log(256)/Math.log(t);function f(r){if("string"!=typeof r)throw new TypeError("Expected String");if(0===r.length)return new Uint8Array;let a=0,f=0,c=0;for(;r[a]===n;)f++,a++;const i=(r.length-a)*o+1>>>0,s=new Uint8Array(i);for(;r[a];){let n=e[r.charCodeAt(a)];if(255===n)return;let o=0;for(let r=i-1;(0!==n||o<c)&&-1!==r;r--,o++)n+=t*s[r]>>>0,s[r]=n%256>>>0,n=n/256>>>0;if(0!==n)throw new Error("Non-zero carry");c=o,a++}let h=i-c;for(;h!==i&&0===s[h];)h++;const l=new Uint8Array(f+(i-h));let y=f;for(;h!==i;)l[y++]=s[h++];return l}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";let o=0,f=0,c=0;const i=e.length;for(;c!==i&&0===e[c];)c++,o++;const s=(i-c)*a+1>>>0,h=new Uint8Array(s);for(;c!==i;){let r=e[c],n=0;for(let e=s-1;(0!==r||n<f)&&-1!==e;e--,n++)r+=256*h[e]>>>0,h[e]=r%t>>>0,r=r/t>>>0;if(0!==r)throw new Error("Non-zero carry");f=n,c++}let l=s-f;for(;l!==s&&0===h[l];)l++;let y=n.repeat(o);for(;l<s;++l)y+=r.charAt(h[l]);return y},decodeUnsafe:f,decode:function(r){const e=f(r);if(e)return e;throw new Error("Non-base"+t+" character")}}},e=self;e.addEventListener("message",(t=>{const n=t.data;switch(n.type){case"encode":return e.postMessage(r(n.alphabet).encode(n.buffer));case"decode":return e.postMessage(r(n.alphabet).decode(n.data))}}))})();