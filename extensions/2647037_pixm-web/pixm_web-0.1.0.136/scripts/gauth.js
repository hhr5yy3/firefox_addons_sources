!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=286)}({115:function(e,t,n){"use strict";function o(){return new Promise(function(e,t){d.browserAPI.identity?d.browserAPI.identity.getProfileUserInfo(function(t){e(t)}):(h.logger.warn("Identity permissions not provided by user, system will continue without authentication !"),t("Identity permissions not provided by user, system will continue without authentication !"))})}function r(){var e=this,t={CLIENT_NAME:"Pixm",ENTERPRISE:!0,REDIRECT_URL:d.browserAPI.identity?d.browserAPI.identity.getRedirectURL():"",USER_INFO_REQUEST_URL:"https://www.googleapis.com/oauth2/v1/userinfo?alt=json",VALIDATION_BASE_URL:"https://www.googleapis.com/oauth2/v3/tokeninfo",CLIENT_ID:"137817484019-c91d2knhlrne98vd6fenms0m3s6t7upu.apps.googleusercontent.com",SCOPES:["openid","email","profile"]},n=["CLIENT_NAME","CLIENT_ID","ENTERPRISE"];this.setConfiguration=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=["string","boolean","number","bigint"];n.map(function(n,r){o.filter(function(t){return f(e[n])===t}).length>0&&(t[n]=e[n])})},this.getUserInfoRequestURL=function(){return t.USER_INFO_REQUEST_URL},this.getValidationBaseURL=function(){return t.VALIDATION_BASE_URL},this.getClientId=function(){return t.CLIENT_ID},this.getRedirectURL=function(){return t.REDIRECT_URL},this.getScopes=function(){return t.SCOPES},this.getAuthURL=function(){return"https://accounts.google.com/o/oauth2/auth?client_id="+e.getClientId()+"&response_type=token&redirect_uri="+encodeURIComponent(e.getRedirectURL())+"&scope="+encodeURIComponent(e.getScopes().join(" "))},this.isEnterpriseLicense=function(){return"boolean"==typeof t.ENTERPRISE&&t.ENTERPRISE}}function i(e){return p.setConfiguration(e),p.isEnterpriseLicense()?o().then(function(e){return e}):l().then(u)}function u(e){var t=new Headers;t.append("Authorization","Bearer "+e);var n=new Request(p.getUserInfoRequestURL(),{method:"GET",headers:t});return fetch(n).then(function(e){if(200===e.status)return e.json();throw e.status})}function s(e){var t=e.match(/[#?](.*)/);return!t||t.length<1?null:new URLSearchParams(t[1].split("#")[0]).get("access_token")}function c(e){function t(e){return new Promise(function(t,o){200!=e.status&&o("Token validation error"),e.json().then(function(e){e.aud&&e.aud===p.getClientId()?t(n):o("Token validation error")})})}var n=s(e);if(!n)throw"Authorization failure";var o=p.getValidationBaseURL()+"?access_token="+n,r=new Request(o,{method:"GET"});return fetch(r).then(t)}function a(){return new Promise(function(e,t){d.browserAPI.identity.launchWebAuthFlow({interactive:!0,url:p.getAuthURL()},function(t){h.logger.log("result : ",t),e(t||"Error executing getAccessToken().authorize()")})})}function l(){return a().then(c)}Object.defineProperty(t,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.authenticate=i;var d=n(5),h=n(6),p=new r},2:function(e,t){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function u(){g&&h&&(g=!1,h.length?p=h.concat(p):b=-1,p.length&&s())}function s(){if(!g){var e=r(u);g=!0;for(var t=p.length;t;){for(h=p,p=[];++b<t;)h&&h[b].run();b=-1,t=p.length}h=null,g=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function a(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var h,p=[],g=!1,b=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new c(e,t)),1!==p.length||g||r(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=a,d.addListener=a,d.once=a,d.off=a,d.removeListener=a,d.removeAllListeners=a,d.emit=a,d.prependListener=a,d.prependOnceListener=a,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},286:function(e,t,n){e.exports=n(115)},5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.browserAPI=function(){var e=null;return"undefined"!=typeof chrome?e=chrome:"undefined"!=typeof browser?e=browser:"undefined"!=typeof window&&(e=void 0!==window.msBrowser?window.msBrowser:window.chrome),e}()},6:function(e,t,n){"use strict";(function(e){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.LoggerService=t.DEFAULT_LOG_LEVEL=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(5),s=t.DEFAULT_LOG_LEVEL="INFO",c=t.LoggerService=function(){function t(){o(this,t),this.isDebugEnabled=!1,this.debugLevel=s,this.initialize()}return i(t,[{key:"isNodeJS",value:function(){return"object"===(void 0===e?"undefined":r(e))&&"object"===r(e.versions)&&void 0!==e.versions.node}},{key:"initialize",value:function(){var e=this;u.browserAPI.storage.local.get(["PixmDebug"],function(t){e.isDebugEnabled=!e.isNodeJS()&&void 0!==t.PixmDebug&&1==t.PixmDebug}),u.browserAPI.storage.local.get(["DebugLevel"],function(t){e.debugLevel=void 0!==t.DebugLevel&&t.DebugLevel instanceof String?t.DebugLevel:s})}},{key:"isDebugMode",value:function(){return this.isDebugEnabled}},{key:"log",value:function(){if(this.isDebugEnabled){var e;(e=console).log.apply(e,arguments)}}},{key:"warn",value:function(){if(this.isDebugEnabled){var e;(e=console).warn.apply(e,arguments)}}},{key:"info",value:function(){if(this.isDebugEnabled){var e;(e=console).info.apply(e,arguments)}}},{key:"error",value:function(){if(this.isDebugEnabled){var e;(e=console).error.apply(e,arguments)}}},{key:"table",value:function(){if(this.isDebugEnabled){var e;(e=console).table.apply(e,arguments)}}}]),t}();t.logger=new c}).call(t,n(2))}});