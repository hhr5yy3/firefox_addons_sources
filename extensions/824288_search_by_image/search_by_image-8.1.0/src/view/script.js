(()=>{"use strict";var e,a={7226:(e,a,i)=>{var t=i(7416),r=i(1128),o=i(2024),n=i(822),s=i(4526);const l={key:0,class:"view-content"},c={class:"image-header"},g={key:0,class:"image-url-container"},m=["href","title"],d={class:"image-details-container"},p={class:"image-name-text"},u={key:0,class:"image-data-container"},v={key:0,class:"image-data-separator"},h={class:"image-preview"},w=["srcset","type"],y=["src","alt"],f={key:1,class:"error-content"},b={class:"error-text"};var I=i(9329),k=i(8618);const L={components:{[I.qw.name]:I.qw,[I.In.name]:I.In,[I.K0.name]:I.K0},data:function(){return{dataLoaded:!1,showError:"",previewImage:null,imageDetails:[],imageLoaded:!1,theme:""}},methods:{getText:k.q4,initSetup:async function(){try{await this.setup()}catch(e){throw this.showError=(0,k.q4)("error_internalError"),e}finally{this.dataLoaded=!0}},setup:async function(){const e=new URL(window.location.href).searchParams.get("id");if((0,r.GZ)(e)){const a=await(0,r.NI)({message:{id:"storageRequest",asyncResponse:!0,saveReceipt:!0,storageId:e},transferResponse:!0,openConnection:this.$env.isSafari});a?(this.previewImage=a,document.title=(0,k.q4)("pageTitle",[a.imageFilename||(0,k.q4)("pageTitle_view"),(0,k.q4)("extensionName")])):this.showError=(0,k.q4)("error_sessionExpired")}else this.showError=(0,k.q4)("error_invalidPageUrl");this.theme=await(0,r.xB)(),document.addEventListener("themeChange",(e=>{this.theme=e.detail}))},onPreviewImageLoad:function(){this.setPreviewImageLoaded()},onPreviewImageError:function(e){const a=e.target.previousElementSibling;a.srcset=e.target.src,a.type="image/svg+xml",this.setPreviewImageLoaded()},setPreviewImageLoaded:function(){this.imageLoaded||(this.setImageDetails(),this.imageLoaded=!0)},setImageDetails:function(){const e=document.querySelector(".image-preview .image");let a,i;(0,r.uH)(e)&&(a=e.naturalWidth,i=e.naturalHeight),this.imageDetails=(0,r.Oe)({width:a,height:i,size:this.previewImage.imageSize,type:this.previewImage.imageType,iecSize:!this.$env.isWindows})},copyImageUrl:async function(){await navigator.clipboard.writeText(this.previewImage.imageUrl)}},created:function(){this.initSetup()}},E=(0,i(1535).A)(L,[["render",function(e,a,i,t,r,o){const I=(0,n.g2)("vn-icon-button"),k=(0,n.g2)("vn-icon"),L=(0,n.g2)("vn-app");return e.dataLoaded?((0,n.uX)(),(0,n.Wv)(L,{key:0},{default:(0,n.k6)((()=>[e.previewImage&&!e.showError?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",c,[e.previewImage.imageUrl?((0,n.uX)(),(0,n.CE)("div",g,[(0,n.Lk)("a",{class:"image-url-link",href:e.previewImage.imageUrl,title:e.previewImage.imageFilename},(0,s.toDisplayString)(e.previewImage.imageUrl),9,m),(0,n.eW)(),(0,n.bF)(I,{src:"/src/assets/icons/misc/content-copy.svg",title:o.getText("buttonTooltip_copyImageUrl"),onClick:o.copyImageUrl},null,8,["title","onClick"])])):(0,n.Q3)("",!0),(0,n.eW)(),(0,n.Lk)("div",d,[(0,n.Lk)("div",p,(0,s.toDisplayString)(e.previewImage.imageFilename),1),(0,n.eW)(),e.imageLoaded?((0,n.uX)(),(0,n.CE)("div",u,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.imageDetails,((e,a)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:a},[a?((0,n.uX)(),(0,n.CE)("div",v,"â€¢")):(0,n.Q3)("",!0),(0,n.eW)(),(0,n.Lk)("div",{class:(0,s.normalizeClass)({[`image-${e.kind}-text`]:!0})},(0,s.toDisplayString)(e.text),3)],64)))),128))])):(0,n.Q3)("",!0)])]),(0,n.eW)(),(0,n.Lk)("picture",h,[(0,n.Lk)("source",{srcset:e.previewImage.imageDataUrl,type:e.previewImage.imageType},null,8,w),(0,n.eW)(),(0,n.Lk)("img",{class:"image",src:`/src/assets/icons/misc/${"dark"===e.theme?"broken-image-dark":"broken-image"}.svg`,onErrorOnce:a[0]||(a[0]=(...e)=>o.onPreviewImageError&&o.onPreviewImageError(...e)),onLoad:a[1]||(a[1]=(...e)=>o.onPreviewImageLoad&&o.onPreviewImageLoad(...e)),alt:e.previewImage.imageFilename},null,40,y)])])):(0,n.Q3)("",!0),(0,n.eW)(),e.showError?((0,n.uX)(),(0,n.CE)("div",f,[(0,n.bF)(k,{class:"error-icon",src:"/src/assets/icons/misc/error.svg"}),(0,n.eW)(),(0,n.Lk)("div",b,(0,s.toDisplayString)(e.showError),1)])):(0,n.Q3)("",!0)])),_:1})):(0,n.Q3)("",!0)}]]);!async function(){await(0,r.rn)(["400 14px Roboto","500 14px Roboto"]);const e=(0,t.createApp)(E);await(0,r.K7)(e),await(0,o.H)(e),e.mount("body")}()}},i={};function t(e){var r=i[e];if(void 0!==r)return r.exports;var o=i[e]={exports:{}};return a[e].call(o.exports,o,o.exports,t),o.exports}t.m=a,e=[],t.O=(a,i,r,o)=>{if(!i){var n=1/0;for(g=0;g<e.length;g++){for(var[i,r,o]=e[g],s=!0,l=0;l<i.length;l++)(!1&o||n>=o)&&Object.keys(t.O).every((e=>t.O[e](i[l])))?i.splice(l--,1):(s=!1,o<n&&(n=o));if(s){e.splice(g--,1);var c=r();void 0!==c&&(a=c)}}return a}o=o||0;for(var g=e.length;g>0&&e[g-1][2]>o;g--)e[g]=e[g-1];e[g]=[i,r,o]},t.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},t.d=(e,a)=>{for(var i in a)t.o(a,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.j=6552,(()=>{var e={6552:0};t.O.j=a=>0===e[a];var a=(a,i)=>{var r,o,[n,s,l]=i,c=0;if(n.some((a=>0!==e[a]))){for(r in s)t.o(s,r)&&(t.m[r]=s[r]);if(l)var g=l(t)}for(a&&a(i);c<n.length;c++)o=n[c],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(g)},i=globalThis.webpackChunksearch_by_image=globalThis.webpackChunksearch_by_image||[];i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i))})();var r=t.O(void 0,[8830],(()=>t(7226)));r=t.O(r)})();